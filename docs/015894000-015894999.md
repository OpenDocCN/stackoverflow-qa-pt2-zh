# StackOverflow 问答 15894000-15894999

# c# - 如何使用 SimpleMembership 和 mvc4 存储来自 Google/Facebook 的附加字段

> ID：15894000
> 
> 赞同：0
> 
> 时间：2013-04-09T05:31:38.200
> 
> 标签：c#, .net, asp.net-mvc-4, asp.net-membership

mvc4 互联网模板具有以下代码

```
OAuthWebSecurity.CreateOrUpdateAccount(result.Provider, result.ProviderUserId, User.Identity.Name); 
```

是否支持保留其他属性，例如国家、姓氏/名字等，或者您使用 EF/other orm 自己滚动？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-09T05:34:01.860

您无法通过现有 API 向会员数据库添加其他字段。但是您可以使用 将`ProviderUserId`您自己的实体映射到会员数据库中的实体。

# c - C TUI 开发 - 帮助/教程？

> ID：15894002
> 
> 赞同：3
> 
> 时间：2013-04-09T05:31:48.140
> 
> 标签：c, linux, command-line, tui

我一直在查看有关此主题的先前问题，但到目前为止，他们都没有回答我的问题。我正在寻找一种方法（没有库）从头开始构建我自己的 TUI。我想从一个简单的程序开始，它读取一个目录并显示内容，并能够使用箭头键上下移动突出显示一个项目。这看起来很简单，这将是我开始项目其余部分所需的全部帮助。

我所需要的只是有人指出我清除和打印到屏幕的正确方向，而不是使用打印语句或外部库。任何帮助将不胜感激。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-09T06:15:51.693

好吧，说实话，你可以。但正如其他人会告诉你的那样，curses 是完成这项工作的正确工具。

也就是说，现在已经不是 80 年代了。<overgeneralization>每个人都使用 Xterm。</overgeneralization> Xterm 使用[ANSI VT100](http://ascii-table.com/ansi-escape-sequences-vt-100.php)控制代码，模仿经典的[DEC VT-100](http://en.wikipedia.org/wiki/VT-100)。如果你以此为目标，你应该是相当好的和可移植的。

但是curses真的很不错。它为你做了很多艰苦的工作（还有很多艰苦的工作让你忙碌）。

# java - android中的USB设置未存储

> ID：15894007
> 
> 赞同：1
> 
> 时间：2013-04-09T05:32:53.247
> 
> 标签：java, android, android-layout, android-intent, android-framework

我是android框架的新手。我正在使用 USB 设置。我想知道USB设置存储在android中的哪里。我遇到以下问题：当我将手机连接到计算机并从大容量存储、MTP、PTP 中选择一个选项时，现在如果我关闭然后再打开设备，我的选择就会被清除。我希望保留以前的选择。我该怎么办..？？

提前致谢...

编辑：我今天发现应该在 /data/system 文件夹中创建 usb_device_manager.xml 文件，但在我的情况下它没有生成。我无法找到这背后的原因。创建此文件的文件位于 frameworks/base/services/java/com/android/server/usb/

等待正面答复...

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-09T06:45:23.763

根据[http://developer.android.com/reference/android/hardware/usb/UsbManager.html](http://developer.android.com/reference/android/hardware/usb/UsbManager.html) 您找不到用于获取此信息的开放 API。但是，从源代码中我们可以看到这两个函数：

```
/**
 * Name of the MTP USB function.
 * Used in extras for the {@link #ACTION_USB_STATE} broadcast
 *
 * {@hide}
 */
public static final String USB_FUNCTION_MTP = "mtp";

/**
 * Name of the PTP USB function.
 * Used in extras for the {@link #ACTION_USB_STATE} broadcast
 *
 * {@hide}
 */
public static final String USB_FUNCTION_PTP = "ptp";

 /**
     * Returns the current default USB function.
     *
     * @return name of the default function.
     *
     * {@hide}
     */
    public String getDefaultFunction() {
        String functions = SystemProperties.get("persist.sys.usb.config", "");
        int commaIndex = functions.indexOf(',');
        if (commaIndex > 0) {
            return functions.substring(0, commaIndex);
        } else {
            return functions;
        }
    }

    /**
     * Sets the current USB function.
     * If function is null, then the current function is set to the default function.
     *
     * @param function name of the USB function, or null to restore the default function
     * @param makeDefault true if the function should be set as the new default function
     *
     * {@hide}
     */
    public void setCurrentFunction(String function, boolean makeDefault) {
        try {
            mService.setCurrentFunction(function, makeDefault);
        } catch (RemoteException e) {
            Log.e(TAG, "RemoteException in setCurrentFunction", e);
        }
    } 
```

不建议使用隐藏的 API，但这可能会解决您的问题。如果您想知道如何使用隐藏的 API，请参考此链接： [http ://devmaze.wordpress.com/2011/01/18/using-com-android-internal-part-1-introduction/](http://devmaze.wordpress.com/2011/01/18/using-com-android-internal-part-1-introduction/)

# iframe - bootstrap .modal 的 z-index 低于顶部淡入的 youtube iframe（仅在 Firefox 中）

> ID：15894009
> 
> 赞同：0
> 
> 时间：2013-04-09T05:33:08.707
> 
> 标签：iframe, youtube, z-index

当引导程序从顶部淡入时，它会显示在 youtube iframe 嵌入视频的下方。一旦淡入淡出，它就会像它应该那样显示在顶部。我已将 wmodes 设置为透明，不透明将 fade 和 modal 上的 z 索引设置为高，但仍然没有运气。奇怪的是，这只发生在**Firefox**中。即 chrome 甚至是挑剔的 ipad 都可以正常工作！我怎样才能解决这个问题？！？

![在此处输入图像描述](https://i.stack.imgur.com/nbSic.jpg)

```
<div class="modal fade" id="test"> 
    <div class="modal-header"> <a class="close" data-dismiss="modal">&times;</a> <h3>You have already voted!</h3> </div> 
    <div class="modal-body"> <p>You may vote again tomorrow.</p> </div> 

</div> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-10T02:07:10.413

在弄乱了 .modal.fade 上不透明度为 1.0 的引导程序的 css 之后，解决了这个问题：

```
 .modal.fade {
 opacity: 1.0;
  top: -25%;
   -webkit-transition: opacity 0.3s linear, top 0.3s ease-out;
     -moz-transition: opacity 0.3s linear, top 0.3s ease-out;
       -o-transition: opacity 0.3s linear, top 0.3s ease-out;
          transition: opacity 0.3s linear, top 0.3s ease-out;

} 
```

如果有人能解释这会很好，不确定这如何只影响 Firefox。

# asp.net - 如何从 LAN 连接的其他 PC 访问托管在 lIS 中的 Web 服务？

> ID：15894017
> 
> 赞同：1
> 
> 时间：2013-04-09T05:33:46.090
> 
> 标签：asp.net, web-services, iis, ipconfig

我创建了一个托管在 IIS 中的 Web 服务，现在我想从连接 LAN 的 PC 访问或调用该 Web 服务。

所以请帮帮我。

我尝试过的事情是：

Ping 检查连接性

使用 IpAddress 我尝试从其他 PC 访问它 - 我遇到的错误是 -

1.  连接超时
2.  无法连接主机

例如：`http://192.168.100.157/NewWebservice/WebService1.asmx`

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-09T05:57:03.800

尝试在配置文件中添加以下代码：

```
<client>
<endpoint address="http://192.168.100.157/NewWebservice/WebService1.asmx" binding="basicHttpBinding"
          contract="ClassABC" bindingConfiguration ="httpBinding"
          name="BasicHttpBinding_IABC" />
</client> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-09T08:21:58.100

确保在 Windows 防火墙（内置）或安装在该 IIS 机器上的任何其他防火墙解决方案中打开端口 80。

# c# - 在 C# 中使用类来描述数据

> ID：15894022
> 
> 赞同：2
> 
> 时间：2013-04-09T05:34:09.533
> 
> 标签：c#, architecture

我正在用 C# 编写一个支持插件的应用程序。每个插件都必须自我介绍，以便应用程序可以为其准备适当的环境。当前的 info 对象看起来不像这样：

```
class FilterInfo
{
    public InputInfo[] inputs; 
    public OutputInfo[] outputs;
    bool IsConfigurable;
    bool IsPlayable;
    string TypeName;
} 
```

这种结构将来肯定会扩大（但是，我想，那不多，它可能会扩大一倍）。我目前正在考虑如何正确实现此类信息类。

在 C++ 中，我会采用以下方式（我会将类剥离到一个字段以使示例更具可读性）：

```
class FilterInfo
{
private:
    std::vector<const InputInfo> inputs;

public:
    std::vector<const InputInfo> & GetInputs()
    {
        return inputs;
    }

    const std::vector<const InputInfo> & GetInputs() const
    {
        return inputs;
    }
} 
```

现在，插件将实例化一个`FilterInfo`类，填写其字段，然后`const FilterInfo`根据请求返回，这样没有人可以更改信息的内容（好吧，没有人应该）。

在 C# 中，我只能想象以下“安全”的解决方案：

```
public interface IInputInfo
{
    bool SomeData
    {
        get;
    }       
}

public class InputInfo : IInputInfo
{
    private bool someData;

    public bool SomeData
    {
        get
        {
            return someData;
        }
        set
        {
            someData = value;
        }
    }

    public bool IInputInfo.SomeData
    {
        get
        {
            return someData;
        }
    }
}

public interface IFilterInfo
{
    ReadOnlyCollection<IInputInfo> Inputs
    {
        get;
    }
}

public class FilterInfo : IFilterInfo
{
    private InputInfo[] inputs;

    public InputInfo[] Inputs
    {
        get
        {
            return inputs;
        }
        set
        {
            inputs = value;
        }
    }

    public ReadOnlyCollection<IInputInfo> IFilterInfo.Inputs
    {
        return inputs;
    }
} 
```

插件当然会返回`IFilterInfo`而不是`FilterInfo`，这样数据是只读的（好的，我知道反射，问题是通知用户，数据*不应该*被更改）。然而，这个解决方案对我来说看起来很笨拙——尤其是与我之前引用的紧凑版本相比。

另一种解决方案可能是仅使用 getter 创建 FilterInfo，但它需要以某种方式将数据传递给它，并且可能最终会产生一个带有大量参数的巨大构造函数。

* * *

**编辑：**另一个解决方案是创建一个结构并在每个请求期间返回其副本。但是，数组是通过引用复制的，所以我每次都必须手动复制它们。

还有一个是每次有人请求它时从头开始构建FilterInfo，例如。

```
public FilterInfo Info
{
    get
    {
        return new FilterInfo()
            {
                IsConfigurable = true,          
                IsPlayable = false,
                Inputs = new[]
                    {
                        new InputInfo()
                            {
                            // (...)
                            }
                    }
            }
    }
} 
```

有没有优雅的方法来解决这个问题？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-09T06:19:13.250

我认为您第一次几乎是正确的：

1.  **在可插入程序**集中定义一个只允许读取的公共`IFilterInfo`接口。
***   **在插件程序**`FilterInfo`集中的类中实现接口，该类的属性具有内部设置器。***   `FilterInfo`让方法根据请求返回类的新实例。约定建议在每次构造新实例的情况下使用方法而不是属性。（如果您坚持使用属性，则可以在实例构建后存储实例并通过属性返回）****

 ******例子：**

在可插拔组件中：

```
public interface IFilterInfo {
  bool IsPlayable { get; }
  bool IsConfigurable { get; }
} 
```

在插件程序集中：

```
internal class FilterInfo : IFilterInfo {
  public bool IsPlayable { get; internal set; }
  public bool IsConfigurable { get; internal set; }
}

public IFilterInfo GetFilterInfo() {
  return new FilterInfo() { IsPlayable = true, IsConfigurable = false };
} 
```

内部设置器和只读接口应该足以确保不会在插件程序集之外修改属性。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-09T05:49:27.533

如何将设置器设置为私有或受保护。

```
public class FilterInfo
{
    public InputInfo[] inputs { get; private set; } 
    public OutputInfo[] outputs { get; private set; };
    bool IsConfigurable;
    bool IsPlayable;
    string TypeName;

    public void SetInputs(...)
    {
        InputInfo[] allInputs;
        //do stuff
        inputs = AllInput;
    }

    public void SetOutputs(...)
    {
        OutputInfo[] allOutputs;
        //do stuff
        outputs = AllOutput;
    }
} 
```

您将能够拥有内部方法来设置数据或受到保护并允许通过继承修改对象。

**更新** 如何使用设置器的内部访问器。这样，除非在 InternalsVisibleTo 程序集级别属性中声明，否则任何东西都无法访问 setter，该属性将在包含 FilterInfo 的程序集中定义。

下面的帖子很好地解释了如何使用 internal 关键字来做到这一点。 [内部描述](https://stackoverflow.com/questions/165719/practical-usings-of-internal-keyword-in-c-sharp)

**更新**

> 另一种解决方案可能是仅使用 getter 创建 FilterInfo，但它需要以某种方式将数据传递给它，并且可能最终会产生一个带有大量参数的巨大构造函数。

据此，没有吸气剂的唯一问题是您仍然需要传入数据。原始解决方案允许这种情况发生。我想我可能有点困惑。如果插件能够更改此 API 中的信息，我猜这是通过引用。然后，如果应用程序引用相同的程序集，它也将具有提供给插件的相同访问器。似乎没有将设置器设置为内部并允许通过属性访问将是实现该类型功能的唯一方法。但这不适用于您的情况，因为您不知道引用您的 API 的程序集。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-09T06:12:18.973

我不太确定您真正想要什么，但是构建器模式似乎适合这种情况。

首先，setter或constructor可以标记为internal，意味着只有程序集才能访问constructor或setter。将 getter 公开，这是必需的，不是吗？

然后是您的构建器类（假设您正在使用构造函数注入）：

```
public class FilterInfoBuilder{
  public FilterInfoBuilder(InputInfo[] inputInfo){
    this.inputInfo = inputInfo;
  }

  private InputInfo[] inputInfo;
  public FilterInfo Create(){
    FilterInfo filterInfo = new FilterInfo(inputInfo);
    return filterInfo;
  }
} 
```

也许我误解了你的要求。

**编辑**

不过，您可以将构建器调整为动态设置器。现在考虑使用内部设置器而不是内部构造器。

```
 public class FilterInfoBuilder{
  public FilterInfoBuilder(InputInfo[] inputInfo){
    filterInfo = new FilterInfo();
    filterInfo.InputInfo = inputInfo;
  }

  private FilterInfo filterInfo;
  public FilterInfo FilterInfo{
    get{
      return filterInfo;
    }
  }

  public void ChangeInputInfo(InputInfo[] inputInfo){
    filterInfo.InputInfo = inputInfo;
  }
} 
```

您可以使用`FilterInfoBuilder.FilterInfo`FilterInfo 类来访问。要修改它，您可以在构建器类中创建内部方法。

不过，我不太确定解决方案，因为我没有在任何文档来源中找到该设计。

更多**编辑**

我有另一种设计，前提是您可以分离程序集之间的接口并确保应用程序访问接口而不是类。

例子：

```
public interface IInputInfoSetable{
  public InputInfo[] InputInfo{
    set;
  }
}

public interface IFilterInfo{
  public InputInfo[] InputInfo{
    get;
  }
}

public class FilterInfo: IFilterInfo, IInputInfoSetable{
  // implement explicitly both of the interface.
} 
```****

# html - 图像未出现在本地主机上

> ID：15894026
> 
> 赞同：0
> 
> 时间：2013-04-09T05:34:23.663
> 
> 标签：html, image, localhost

图像没有出现在我的本地主机上。这是HTML代码。我尝试了几种变体来显示图像。使用 Twitter 引导程序。任何帮助将不胜感激。

```
 <div class="media">
  <a class="pull-left" href="">
  <img class="media-object" src="/img/grads.jpg/64x64">
  </a>
  <div class="media-body">
  <h4 class="media-heading">Collaborate with students at other Universities</h4>
  <p>Join your classes and work with other students on studying without having to meet up.</p>
  </div>
  </div>

  <div class="media">
  <a class="pull-left" href="">
  <img class="media-object" src="grads.jpeg/64x64">
  </a>
  <div class="media-body">
  <h4 class="media-heading">Meet new friends you're in class with</h4>
  <p>Pick who you want to be a stranger in your own classes. School is social and so is moreo. : )</p>
  </div>
  </div> 
```

这是CSS代码。不知道我做错了什么。

```
<link href="../assets/css/bootstrap.css" rel="stylesheet">
<style type="text/css">
  body {
    padding-top: 10px;
    padding-bottom: 20px;
  }

  /* Custom container */
  .container-narrow {
    margin: 0 auto;
    max-width: 700px;
  }
  .container-narrow > hr {
    margin: 30px 0;
  }

  /* Main marketing message and sign up button */
  .jumbotron {
    margin: 30px 0;
    text-align: center;
  }
  .jumbotron h1 {
    font-size: 72px;
    line-height: 1;
  }
  .jumbotron .btn {
    font-size: 15px;
    padding: 10px 20px;
  }

  /* Supporting marketing content */
  .marketing {
    margin: 5px 0;
  }
  .marketing p + h4 {
    margin-top: 14px;
  }
</style>
<link href="../assets/css/bootstrap-responsive.css" rel="stylesheet"> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-09T06:14:31.730

尝试查看源代码并检查图像的路径。由于您使用了相对路径，请检查图像的正确路径是否在本地获取

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-09T06:40:55.027

使用[引导图像](http://twitter.github.io/bootstrap/base-css.html#images)进行图像加载和媒体对象`data-src`不使用属性`src`，但我没有看到任何使用直接图像 URL[引导媒体对象加载图像的示例](http://twitter.github.io/bootstrap/components.html#media)

**编辑**

我认为这个标签是指在线网址，我不确定。看看这个[占位符](http://placehold.it/)这个 URL 是一个实用程序站点，它像引导示例一样重新调整托管图像的大小

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-09T06:32:05.823

验证您的图像路径。它应该以文件名及其正确的扩展名结尾。

看你有，

```
<img class="media-object" src="grads.jpeg/64x64"> 
```

我想这可能是这样的；

```
<img class="media-object" src="/64x64/grads.jpeg"> 
```

现在，如果图像 (grads.jpeg) 在 root 的 64x64 文件夹中可用，那肯定会呈现。

# java - 无法将消息附加到 javax.mail 中的文件夹

> ID：15894029
> 
> 赞同：4
> 
> 时间：2013-04-09T05:34:31.013
> 
> 标签：java, jakarta-mail, james

我正在设法保存包含正文、主题等的简单消息。但是，我无法保存多部分消息。我在之前和之后登录`appendMessages`，但注意到第二个日志不存在。有趣的是，我根本没有任何例外被解雇。我完全不知道这里出了什么问题。

这是我的Java代码：

```
 Store store = null;
    Folder folder = null;
    String folderName = "sentbox";
    try {
        Session session = prepareSession(MailProtocols.IMAP, kid);
        store = session.getStore("imap");
        store.connect(myHost, user.getLogin(), user.getPassword());
        folder = store.getFolder(folderName);

        if (folder == null || !folder.exists()) {
            folder.create(Folder.HOLDS_MESSAGES);
        }
        folder.open(Folder.READ_WRITE);
        MimeMessage mimeMessage = new MimeMessage(session);
        Address[] to = null;
        if(msg.getTo() != null) { // msg is an instance of custom message class, nothing special there
            int msgSize = msg.getTo().size();
             to = new InternetAddress[msgSize];
            for (int i = 0; i < msgSize; i++) {
                to[i] = new InternetAddress(msg.getTo().get(i));
            }
        }

        mimeMessage.setRecipients(RecipientType.TO, to);
        mimeMessage.setSentDate(new Date(System.currentTimeMillis()));
        mimeMessage.setSubject(msg.getSubject());

        if (msg.getFiles() != null) {
            MimeMultipart mp = new MimeMultipart();
            MimeBodyPart newPart = new MimeBodyPart();
            newPart.setText(msg.getBody());
            mp.addBodyPart(newPart);
            for (MultipartFile multipartFile : msg.getFiles()) {
                try {
                    newPart = new MimeBodyPart(); // create new part to each files
                    newPart.addHeader("My-File-Type", multipartFile.getContentType());
                    File tmpFile = File.createTempFile("newAttachment", ".tmp");
                    multipartFile.transferTo(tmpFile);
                    FileDataSource fds = new FileDataSource(tmpFile);
                    newPart.setDataHandler(new DataHandler(fds));
                    newPart.setFileName(multipartFile.getOriginalFilename());
                    newPart.setDisposition(Part.ATTACHMENT);
                    mp.addBodyPart(newPart);
                    tmpFile.deleteOnExit();
                } catch (IOException e) {
                    logger.debug("Can not create temp file ===========>");
                    e.printStackTrace();
                }
            }
            mimeMessage.setContent(mp);
            mimeMessage.saveChanges();
        } else {
            mimeMessage.setText(msg.getBody());
        }

        folder.appendMessages(new Message[] {mimeMessage});

        Message[] allMessages = folder.getMessages();
        UIDFolder uidFolder = (UIDFolder) folder;
        long savedMsgId = uidFolder.getUID(allMessages[allMessages.length - 1]);
                    logger.info("savedMsgId",savedMsgId + "") //cannot get this output at all

    } catch (Exception e) {
        logger.error(e);

    } finally {
        closeMailStore(store, folder); // just simple method which closes the store
    } 
```

我正在使用 Apache James 3.0.4。欢迎任何方法

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-04-14T03:06:03.853

> *我正在使用 Apache James 3.0.4*

你不是说 Apache James 3.0-beta4 吗？即我们还没有达到3.0 版本，所以没有3.0.4。您不使用稳定版本（2.3.2）的任何原因？只是问问... ：-）

> *我在 appendMessages 之前和之后记录，但注意到第二个日志不存在。*

如果您在**folder.appendMessages(new Message[] {m​​imeMessage});之后永远无法记录代码** ，那么有三种可能：

1.  在 javax.mail / IO 代码中抛出了一个**错误**（或**Throwable ）。**
    示例包括 IOError（讨厌的 IO 接口故障）、LinkageError（不兼容的 jar/类）或 CoderMalfunctionError（如果解码/编码循环抛出意外异常，则由 CharsetDecoder 或 CharsetEncoder 抛出）。
2.  线程问题导致您的程序停止 - 即线程饥饿或死锁
3.  JVM进程崩溃

项目（1）是*迄今为止*最有可能的。建议：将代码的尾部更改为：

```
} catch (Exception e) {
    logger.error(e);

} catch (Throwable t) {
    logger.error(t);

} finally {
    closeMailStore(store, folder); // just simple method which closes the store
} 
```

如果这随后记录了一个 throwable，您可以根据应用程序 jar 和配置、OS/JVM 版本或数据内容来调查原因......

如果这没有记录可投掷，您可以调查 (2) 或 (3)。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-04-17T16:06:25.847

James 2.3.2 我也遇到了同样的错误。我正在使用日食。在库设置中的 Eclipse 中，我添加了 JDK 来代替 JRE。然后我的问题就解决了。尝试相同。它可能会起作用，因为您的代码看起来不错，而且我认为的代码没有问题。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-04-18T04:07:03.270

我找到了另一种方法，我放在这里是希望我能帮助别人。我正在覆盖 Mailet 的`service`方法。然后借助[org.apache.james.mailbox.MessageManager](http://james.apache.org/mailbox/apidocs/org/apache/james/mailbox/MessageManager.html#appendMessage%28java.io.InputStream,%20java.util.Date,%20org.apache.james.mailbox.MailboxSession,%20boolean,%20javax.mail.Flags%29)`appendMessage`的方法，我可以简单地将我的消息添加到我想要的文件夹中。这是我的 JAVA 代码：

```
public class MyMailet extends GenericMailet {

@Resource(name = "mailboxmanager")
private MailboxManager mailboxManager;

private String sentbox;

@Override
public void init() throws MessagingException {
    super.init();     

    this.sentbox = getInitParameter("sent", "sentbox");
}

@SuppressWarnings("unchecked")
@Override
public void service(Mail mail) throws MessagingException {
    // Here, I am putting my logic which has to decide which folder to put
    // ...

    putToFolder(mail.getMessage(), mail.getSender().toString(), sentbox);

    mail.setState(Mail.GHOST);
}   

private long putToFolder(MimeMessage message, String userName, String folderName) throws MessagingException {
    MailboxSession session = null;
    long appendedMessageId;
    try {
        session = mailboxManager.createSystemSession(userName, new MailetContextLog(getMailetContext()));

        MessageManager mailbox = getMessageManager(session, userName, folderName);
        appendedMessageId = mailbox.appendMessage(new MimeMessageInputStream(message), new Date(), session, true, null);

    } catch (BadCredentialsException e) {
        throw new MessagingException("Unable to authenticate to mailbox", e);
    } catch (MailboxException e) {
        throw new MessagingException("Unable to access mailbox.", e);
    } finally {
        if (session != null) {
            session.close();
        }

        try {
            mailboxManager.logout(session, true);
            mailboxManager.endProcessingRequest(session);
        } catch (MailboxException e) {
            throw new MessagingException("Can logout from mailbox", e);
        }

    }

    return appendedMessageId;
}

private MessageManager getMessageManager(MailboxSession session, String userName, String folderName) throws MailboxException, MessagingException {
    mailboxManager.startProcessingRequest(session);

    MailboxPath path = new MailboxPath(MailboxConstants.USER_NAMESPACE, userName, folderName);

    if (!mailboxManager.mailboxExists(path, session)) {
        mailboxManager.createMailbox(path, session);
    }
    MessageManager messageManager = mailboxManager.getMailbox(path, session);
    if (messageManager == null) {
        throw new MessagingException("Mailbox for username " + userName + " was not found on this server.");
    }

    return messageManager;
  } 
} 
```

正如我所料，它会附加任何没有问题的多部分消息。

# c++ - 以 lambda 作为参数的 C++ 函数

> ID：15894036
> 
> 赞同：0
> 
> 时间：2013-04-09T05:35:06.960
> 
> 标签：c++, lambda

我有一个重载函数，具有以下签名：

```
void Foo(const std::function<void(int     )> &func);
void Foo(const std::function<void(int, int)> &func); 
```

当我想将 Foo() 与 lambdas 一起使用时，我必须执行以下操作：

```
Foo((std::function<void(int     )>) [] (int i       ) { /* do something */ });
Foo((std::function<void(int, int)>) [] (int i, int j) { /* do something */ }); 
```

两者都不是那么用户友好。使用该函数会容易得多，而不必在 lambdas 之前添加强制转换 "(std::function<...>)" - 如下所示：

```
 Foo([] (int i       ) { /* do something */ }); // executes the 1st Foo()
    Foo([] (int i, int j) { /* do something */ }); // executes the 2nd Foo() 
```

所以，我需要另一个重载，它接受 lambda 作为其参数，并自动将 lambda 转换为上述签名之一。如何才能做到这一点？或者，一开始有可能吗？

```
template <typename Function> void Foo(Function function) {
    // insert code here: should be something like
    //   - check the signature of the 'function'; and
    //   - call 'Foo()' corresponding to the signature
} 
```

请帮忙。

PS。我正在使用VS2010。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-09T05:41:38.013

如果你的 lambda 没有捕获任何变量——也就是说，它以——开头，`[]`那么它可以转换为函数指针，你可以`Foo`像这样声明：

```
void Foo(void(*func)(int));
void Foo(void(*func)(int, int)); 
```

如果您想保留这些`std::function`版本，您可以将这些版本转发给那个版本。如果您不想单独实现它们，我认为可变参数模板会做得很好：

```
template<class... Args>
void Foo(void(*func)(Args...)) {
    return std::function<void(Args...)>(func);
} 
```

如果您的 lambdas 捕获变量，那么它们不能转换为函数指针，您需要自己将它们包装起来`std::function`。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-09T06:19:02.287

Lambda 隐式转换为 std::function<>，不需要显式转换。

```
std::function<void(int, int)> func = [](int a, int b){ printf("Hello Lambda world!"); };
func(1, 2); 
```

啊，您正试图获得对它的 const 引用。为什么呢？最好使用右手参考（因为它是临时的）或副本。在这两种情况下，它也应该隐式转换......

# c++ - 关于运算符的 C++ 面试

> ID：15894039
> 
> 赞同：-1
> 
> 时间：2013-04-09T05:35:35.250
> 
> 标签：c++, pointers, reference, variable-assignment

这是基本上为名为 的类实现 = 赋值`CMyString`的代码，并且代码是正确的。

```
CMyString& CMyString::operator =(const CMyString &str) { 
if(this == &str) 
    return *this; 

delete []m_pData; 
m_pData = NULL; 

m_pData = new char[strlen(str.m_pData) + 1]; 
strcpy(m_pData, str.m_pData); 

return *this; 
} 
```

实例是通过引用传递的，第一个'if'是检查传入的实例是否是它自己。我的问题是：为什么它`&str`用来比较，还没有`str`包含实例的地址？谁能解释这条线是如何工作的？

另外，我只想确保`this`包含对象的地址：这是正确的吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-09T05:38:44.997

> 是不是 str 已经包含了实例的地址

不，引用是**对象本身。**它不是指向对象的指针。

（即，在函数的声明中，`&str`代表“引用`str`”而**不是**“地址`str`”-如果函数声明如下，那么您所说的就是正确的：

```
CMyString& CMyString::operator =(const CMyString *str); 
```

但事实并非如此。）

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-09T05:41:57.637

[地址操作符](http://msdn.microsoft.com/en-us/library/64sa8b1e%28v=vs.71%29.aspx)和[引用操作符](http://msdn.microsoft.com/en-us/library/w7049scy%28v=vs.71%29.aspx)是不同的。

除了作为地址运算符之外，& 在 C++ 中还用作引用声明符。含义不相同。

```
int target;
int &rTarg = target;  // rTarg is a reference to an integer.
                      // The reference is initialized to refer to target.
void f(int*& p);      // p is a reference to a pointer 
```

如果您获取引用的地址，它将返回其目标的地址。使用前面的声明，&rTarg 是与 &target 相同的内存地址。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-09T05:46:15.967

`str`传递给赋值运算符是通过*引用*传递的，所以它包含实际的对象，而不是它的地址。A`this`是指向调用方法的类的指针，因此如果要比较，传递的对象是否是同一个对象本身，他必须获取地址`str`才能进行比较。

请注意，它的`&`行为会有所不同，具体取决于使用它的位置。如果在语句中，则意味着获取应用它的对象的地址。另一方面，如果在声明中使用它，则意味着声明的对象是一个*引用*。

考虑以下示例：

```
int i = 42;
int & refToI = i; // A reference to i
refToI = 99;
std::cout << i; // Will print 99

int j = 42;
int * pJ = &j; // A pointer to j
*pJ = 99;
std::cout << j; // Will print 99 
```

`this`是指向实例的指针，所以是的，它包含地址。

验证传递的对象是否存在的全部目的是`this`避免对 self 进行不必要的（或可能是破坏性的）赋值。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-04-09T05:47:36.743

虽然确实是一个变量引用 - 由`&`类型名称后面的符号表示 - 底层实现通常是一个指针，但 C++ 标准似乎没有指定它。

无论如何，在其用法中，在语法级别，引用的使用就像相同类型的非引用值，即。更严格地说：

*如果变量的类型是`T &`，那么它应该像它的类型一样使用`T`。*

如果你必须写`str.someMethod()`而不写`str->someMethod()`（没有任何箭头运算符的重载），那么你必须使用`&` 来获取值的地址。换句话说，引用的行为或多或少类似于变量的别名，而不是指针。

有关引用和指针的更多信息，请参阅以下问题：

*   [应用于变量名时 * 和 & 的含义是什么？](https://stackoverflow.com/questions/3350626/whats-the-meaning-of-and-when-applied-to-variable-names)
*   [C++中的指针变量和引用变量有什么区别？](https://stackoverflow.com/questions/57483/what-are-the-differences-between-pointer-variable-and-reference-variable-in-c)
*   [为什么“this”是指针而不是引用？](https://stackoverflow.com/questions/645994/why-this-is-a-pointer-and-not-a-reference)

# ubuntu - 蚂蚁不能在 Ubuntu 上工作

> ID：15894060
> 
> 赞同：1
> 
> 时间：2013-04-09T05:37:16.203
> 
> 标签：ubuntu, ant

我使用以下命令在 Ubuntu 12.10 上安装了 ant：

```
sudo apt-get install ant 
```

但是当我尝试访问时，我收到以下错误：

```
/usr/bin/ant: 1: eval: Syntax error: Unterminated quoted string 
```

请帮忙。

# maven - 在maven中添加嵌入式依赖

> ID：15894066
> 
> 赞同：1
> 
> 时间：2013-04-09T05:37:41.920
> 
> 标签：maven, osgi, pom.xml, apache-felix, maven-bundle-plugin

实际上，当我构建我的项目时，它会将捆绑包部署到正在运行的 OSGI 控制台。现在捆绑包处于已安装状态，并显示无法找到 commons-net 捆绑包的红色警报。

解决此问题的一种方法是将捆绑包显式安装到正在运行的 osgi 框架本身。

另一种方法可能是将嵌入依赖项添加到 maven。但这种方法行不通。我在 maven-build-plugin 的指令标签中添加了 Embeded-Dependency。它没有显示任何错误。

如果有任何建议，请告诉我。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-09T15:16:43.583

Embeded-Dependency 没有显示任何错误，因为您可以将任何内容放入说明中。如果不知道键值对，它将简单地插入到 MANIFEST.MF 中。尝试编写 Embed-Dependency，它应该可以工作。

一个很好的例子如下（我们如何为自己创建休眠包）：

```
<plugin>
    <groupId>org.apache.felix</groupId>
    <artifactId>maven-bundle-plugin</artifactId>
    <extensions>true</extensions>
    <configuration>
        <instructions>
            <Bundle-SymbolicName>${project.artifactId}</Bundle-SymbolicName>
            <_exportcontents>
                !org.hibernate.validator.*,
                org.hibernate.*;-noimport:=true,
            </_exportcontents>
            <Import-Package>
                javax.persistence*;version="1.1.0",
                javax.naming*,
                javax.sql,
                javax.transaction*;version="1.1.0",
                javax.xml.stream.*,
                javax.xml.*,
                org.slf4j,
                org.w3c.dom,
                org.xml.sax*,
                antlr.*,
                org.jboss.logging.*,
                org.dom4j*,
                *;resolution:=optional
            </Import-Package>
            <Embed-Dependency>
                groupId=org.hibernate;artifactId=hibernate-core,
                groupId=org.hibernate;artifactId=hibernate-entitymanager,
                groupId=org.hibernate.common;artifactId=hibernate-commons-annotations
            </Embed-Dependency>
        </instructions>
    </configuration>
</plugin> 
```

# json - JSON 是否有类似校验和的机制？

> ID：15894070
> 
> 赞同：3
> 
> 时间：2013-04-09T05:38:03.807
> 
> 标签：json, web-services, checksum

我需要将大量 JSON 数据上传到 Web 服务。分析服务器正确接收数据并上传所有数据的最佳方法是什么？请让我知道是否有人在这方面有任何经验。谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2020-05-15T05:27:32.470

您可以查看我的项目： [https ://github.com/hidayetcolkusu?tab=repositories](https://github.com/hidayetcolkusu?tab=repositories)

计算：

```
ChecksumCalculator checksumCalculator = new ChecksumCalculator();

string json = @"{""Name"":""Hidayet Raşit"",""Surname"":""ÇÖLKUŞU""}";

ushort checksum = checksumCalculator.Calculate(json);
Result: 43460 
```

比较：

```
ChecksumCalculator checksumCalculator = new ChecksumCalculator();

string json = @"{""Name"":""Hidayet Raşit"",""Surname"":""ÇÖLKUŞU""}";

bool result = checksumCalculator.Compare(json, 43460);
Resut:true 
```

或者

```
ChecksumCalculator checksumCalculator = new ChecksumCalculator();

string json = @"{""Name"":""Hidayet Raşit"",""Surname"":""ÇÖLKUŞU"",""Checksum"":43460}"; 

bool result = checksumCalculator.Compare(json);
Result:true 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2020-05-22T22:27:24.783

您可以像这样计算 json 的哈希值：

```
var sha1 = System.Security.Cryptography.SHA1.Create();
byte[] buf = System.Text.Encoding.UTF8.GetBytes(jsonString);
byte[] hash= sha1.ComputeHash(buf, 0, buf.Length); 
var hashstr = System.BitConverter.ToString(hash).Replace("-", ""); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2020-05-23T09:27:47.677

您可以计算**md5**来比较两个 json。

```
public static string CreateMD5(string json)
{
    // Use json string to calculate MD5 hash
    using (System.Security.Cryptography.MD5 md5 = System.Security.Cryptography.MD5.Create())
    {
        byte[] inputBytes = System.Text.Encoding.ASCII.GetBytes(json);
        byte[] hashBytes = md5.ComputeHash(inputBytes);

        StringBuilder sb = new StringBuilder();
        for (int i = 0; i < hashBytes.Length; i++)
        {
            sb.Append(hashBytes[i].ToString("X2"));
        }
        return sb.ToString();
    }
} 
```

# asp.net - 通过查询字符串进行的安全攻击是CSRF攻击吗？如何防止查询字符串的攻击？

> ID：15894071
> 
> 赞同：1
> 
> 时间：2013-04-09T05:38:05.473
> 
> 标签：asp.net, query-string, security, csrf

有人试图使用抛出异常的无效查询字符串访问我们的服务器页面。

查询字符串 =./../../../../../../../../../windows/system32md.exe

**例外**：

> 找不到文件“C:\windows\system32md.ex”。如何防止这些类型的攻击。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-09T09:31:40.493

这不是 CSRF 攻击。你可能有也可能没有其中之一——不能说。

这是一个[目录遍历攻击](http://en.wikipedia.org/wiki/Directory_traversal_attack)。

> 我们正在创建一个带有 GUID 的路径，例如： Server.MapPath("~\folder\" + GUID)

然后，通过在 GUID 变量中`~\folder`包含“go-up-a-directory”字符串 ( )，该路径可以在根目录之外结束。`..`因此，他们可能能够访问服务器文件系统上的任何文件——这不是一件好事。

在文件名中使用用户输入之前，您需要检查它是否是您期望的有限格式。除了目录遍历攻击之外，您还可以对 Windows 文件名做一些其他奇怪的事情（例如保留名称、无效名称、意外的 UNC 路径、不支持的 Unicode 字符等），因此您应该使用严格的白名单验证来确保您只获取名称你期望。

对于真正的 GUID，您需要对正则表达式进行验证：

```
[0-9A-Fa-f]{8}-[0-9A-Fa-f]{4}-[0-9A-Fa-f]{4}-[0-9A-Fa-f]{4}-[0-9A-Fa-f]{12} 
```

或者，如果您有 .NET 4.5，则可以使用[Guid.TryParse](http://msdn.microsoft.com/en-GB/library/system.guid.tryparse.aspx)。

另外：如果有人正在积极尝试利用这一点，而公司中没有人在进行经批准的安全测试，那么您就会遇到问题，应该调查攻击的来源。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-09T06:55:27.397

最好的解决方案是在数据库或 XML 文件中设置一个白名单文件夹名称。检索到查询字符串后，针对列表运行它以返回 TRUE 和 FALSE。如果不是文件夹名称，则执行 GUID 模式的逻辑。我认为这不是 CSRF 而是 XSS。

# java - Java 中的 System.out.err 和 System.out 交错

> ID：15894072
> 
> 赞同：2
> 
> 时间：2013-04-09T05:38:06.217
> 
> 标签：java, system.out, system.err

为了计算出执行算法需要多少时间，我在 main 方法中执行此操作，但它不会打印时间，因为它与 System.print 交错。

```
long startTime = System.currentTimeMillis();     
A1.Print(2);
long endTime = System.currentTimeMillis();
System.err.print(endTime - startTime); 
```

如果 A 类是这样的：

```
public class A{

    public void Print(int n){
        for(int i = 0; i <=n; i++){
        System.out.println(i)
    }
} 
```

它打印

```
0

1

2 
```

在这一行中，它是应该通过该循环的时间量，但它根本不会，所以它不会像这样打印：

```
0

1

2

1 
```

这里最后一行或 1 是算法所用的毫秒数。教科书说你必须使用 System.err。并找出一种防止交错的方法。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-04-09T05:47:53.447

你可以做类似[的事情](http://docs.oracle.com/javase/6/docs/api/java/lang/System.html#setErr%28java.io.PrintStream%29)

```
System.setErr(System.out); 
```

所以输出在同一个流中。他们使用两个不同的流，所以这就是你得到交错的原因。

对于您的代码，它将是：

```
long startTime = System.currentTimeMillis();    
System.setErr(System.out); 
A1.Print(50);
long endTime = System.currentTimeMillis();
System.err.print(endTime - startTime); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-09T05:48:25.647

`System.err`&`System.out`使用不同的缓冲区（取决于操作系统），因此这些缓冲区可能会在不同的时间被刷新。因此可能会给出交错输出。

而且，System.err 不保证默认定向到控制台（与 System.out 不同），它可能链接到控制台或文件系统。

要解决此问题，您可能需要`System.err`链接到`System.out`

喜欢

```
System.setErr(System.out); 
```

或者

```
System.setErr(System.console()); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-09T05:48:20.493

如果您在 Eclipse 中，这是一个已知的错误：[https](https://bugs.eclipse.org/bugs/show_bug.cgi?id=32205) ://bugs.eclipse.org/bugs/show_bug.cgi?id=32205 。从命令行尝试相同

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-04-09T05:47:21.230

您可能应该使用`System.err.println`而不是`System.err.print`. 它可能只是在缓冲，直到获得一整行。

# python - 无法处理此正则表达式

> ID：15894073
> 
> 赞同：0
> 
> 时间：2013-04-09T05:38:09.207
> 
> 标签：python, regex

我有以下“greekSymbols.txt”

```
Α α alpha
Β β beta
Γ γ gamma
Δ δ delta
Ε ε epsilon
Ζ ζ zeta
Η η eta
Θ θ theta
Ι ι iota
Κ κ kappa
Λ λ lambda
Μ μ mu  
Ν ν nu
Ξ ξ xi
Ο ο omicron
Π π pi
Ρ ρ rho
Σ σ sigma
Τ τ tau
Υ υ upsilon
Φ φ phi
Χ χ chi
Ψ ψ psi
Ω ω omega 
```

我试图将其转换为带有标签作为分隔符的 Anki 纯文本文件。我将每一行转换为两张卡片，其中前面是符号（大写或小写），后面是名称。我有以下。

```
#!/usr/local/bin/python

import re

pattern = re.compile(r"(.)\s+(.)\s+(.+)", re.UNICODE)

input = open("./greekSymbols.txt", "r")

output = open("./greekSymbolsFormated.txt", "w+")

line = input.readline()

while line:

    string = line.rstrip()

    m = pattern.match(string)

    if m:
        output.write(m.group(1) + "\t" + m.group(3) + "\n")
        output.write(m.group(2) + "\t" + m.group(3) + "\n")
    else:
        print("I was unable to process line '" + string + "' [" +  str(m) + "]")

    line = input.readline()

input.close();
output.close(); 
```

不幸的是，我目前每行都收到“我无法处理...”消息，str(m) 的值为 None。我究竟做错了什么？

```
> localhost:Anki stephen$ python ./convertGreekSymbols.py 
I was unable to process line 'Α α   alpha' [None]
I was unable to process line 'Β β   beta' [None]
... 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-04-09T05:43:41.847

你真的不需要正则表达式：

```
with (open("./greekSymbols.txt") as infile, 
      open("./greekSymbolsFormated.txt", "w+") as outfile):
    for line in infile:
        up, low, name = line.split()
        outfile.write("{0}\t{1}".format(up,name))
        outfile.write("{0}\t{1}".format(low,name)) 
```

如果您想坚持使用正则表达式，请尝试以下正则表达式而不是您的（这应该适用于 IMO，但可能不够明确）：

```
pattern = re.compile(r"(\S+)\s+(\S+)\s+(.+)", re.UNICODE) 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-09T05:42:14.710

在我看来，这是错误的空白解析。不应该是`(.)\s(.)\s(.+)`，而不是`\t`？您的输入中似乎没有标签。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-04-09T05:43:26.593

你有一个没有标签的\t，应该是\s：

```
>>> matcher = re.compile(r"(.)\s(.)\t(.+)", re.UNICODE) 
>>> phi = "Φ φ phi" 
>>> matcher.match(phi)
>>> matcher = re.compile(r"(.)\s(.)\s+(.+)", re.UNICODE)
>>> matcher.match(phi)
<_sre.SRE_Match object at 0x1018d8290>
>>> 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-04-09T08:17:28.670

这是最终使事情正常运行的代码。看来我的原始文件是 utf-8，这引起了问题。这是允许我为 Anki 创建 /t 单独导入文件的工作解决方案。

```
#!/usr/local/bin/python

import re
import codecs

pattern = re.compile(r"(\S+)\s+(\S+)\s+(.+)", re.UNICODE)

input = codecs.open("./greekSymbols.txt", "r", encoding="utf-8")

output = codecs.open("./greekSymbolsFormated.txt", "w+", encoding="utf-8")

line = input.readline()

while line:

    string = line.rstrip()

    m = pattern.match(string)

    if m:
        output.write(unicode(m.group(1) + "\t" + m.group(3) + "\n"))
        output.write(unicode(m.group(2) + "\t" + m.group(3) + "\n"))
    else:
        print("I was unable to process line '" + string + "' [" +  str(m) + "]")

    line = input.readline()

input.close();
output.close(); 
```

# entity-framework - 在断开模式下复制对象集数据

> ID：15894081
> 
> 赞同：1
> 
> 时间：2013-04-09T05:39:03.153
> 
> 标签：entity-framework

我想将数据从一个实体对象集复制到另一个。因此，对一个对象集所做的编辑不会反映在另一个对象集上。我有办法在 EF 中实现此功能吗？

请帮忙...

# file-io - WriteFile 线程安全

> ID：15894082
> 
> 赞同：2
> 
> 时间：2013-04-09T05:39:07.297
> 
> 标签：file-io, thread-safety

WriteFile 线程安全吗？我的意思是，我可以在不同步的情况下同时从多个线程写入同一个文件吗？MSDN 对 WriteFile 的线程安全只字未提。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-09T06:00:56.223

是的，它本身就是线程安全的，即它可以防止系统崩溃，win API 在写入文件时保持内部锁定，并且该锁定是字节范围锁定。你可以在这里阅读更多 [文件锁定](http://en.wikipedia.org/wiki/File_locking)

# blender - 如何在 Blender for cocos3d 中导出为 Collada 表单

> ID：15894085
> 
> 赞同：0
> 
> 时间：2013-04-09T05:39:39.473
> 
> 标签：blender, collada, cocos3d

我正在使用搅拌机 2.66a 为 Cocos3d 创建 3dobject。在 BRENWILL 教程中，他们使用 blender 2.4.9 导出到 collada 文件。导出到 collada 文件时，我找不到教程中提到的那些选项（如三角形，仅导出选择）。

我在哪里可以找到搅拌机 2.66 中的这些选项？或者更高版本的选项有什么不同？

由于 pod 文件 collada-pod 文件的创建在 cocos3d 中非常重要。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-08-08T04:06:30.243

除了现有的答案，您可以直接将您的 3D 模型从搅拌机导出为cocos3d 理解的**.POD格式。**为此，您需要将 PowerVR SDK 插件添加到 blender。

将 PVRGeoPOD 附加组件添加到搅拌机的步骤是

1.  [从此](http://www.imgtec.com/powervr/insider/sdkdownloads/index.asp)站点下载 PowerVR SDK（您可能已经完成） 。请注意，这会下载一个安装程序文件，然后再下载 SDK。在安装过程中，他们要求您选择需要安装哪些工具，我通常选择

    *   PVRGeoPOD
    *   PVRShaman（可选，但强烈推荐）

    选项。第一个是**.blend**到**.POD**（和**COLLADA**到 **.POD**）转换器（包括附加组件），第二个是一个非常有用的**.POD**文件查看器。等到安装完成。

2.  找到 Blender 插件路径。如果你不知道它，打开 Blender python 控制台，运行命令 `bpy.utils.script_paths("addons")`并记下路径。
3.  在您的安装路径中的 PVRGeoPOD 文件夹中找到 Blender 附加文​​件。当您看到**libPVRGeoPOD.dylib** 和**PVRGeoPODScript.py 之**类的文件以及 2 个 QT 文件时，请停下来，因为这些是附加文件。复制这 4 个文件并将它们粘贴到 Blender 附加文​​件夹中。
4.  打开 Blender，运行**Preference->add-ons tab**，搜索 **PVRGeoPOD**。您可以看到，该附加组件存在，但未启用。检查右侧的刻度市场以启用它。
5.  现在退出并重新启动 Blender，如果需要，然后选择**file->export** 并查看是否有一个名为**PVRGeoPOD(.pod/.h/.cpp)**的选项，如果有，你就成功了。现在您可以直接从**.blend**导出 到**.POD**

[你可以在这里](https://stackoverflow.com/a/18053562/640731)找到详细的解释。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-25T05:07:40.390

在 blender 2.4.9 中，我们必须指定创建 collada 文件的选项。但在搅拌机 2.66 中，您可以使用默认选项创建 collada 文件。然后使用 PowerVR SDK 将其转换为 pod 文件。

# objective-c - 在 iphone sdk 中检测 rootcontroller

> ID：15894088
> 
> 赞同：1
> 
> 时间：2013-04-09T05:40:03.527
> 
> 标签：objective-c, uinavigationcontroller, xcode4.5

我在我的应用程序中使用了两种类型的控制器，即**NavigationController**和**presentViewController**。如何在任何情况下通过代码检测基本控制器，即我正在使用导航或**呈现**视图控制器将一个**视图**控制器传输到另一个**视图**控制器？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-09T05:51:46.510

试试这个获取导航的rootviewcontroller：

```
UIViewController *topViewController = [self.navigationController topViewController]; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-09T06:19:05.740

对于当前模式视图控制器，请查看 UIViewController 的“presentingViewController”属性，对于导航，您可以获得视图控制器数组，`NSArray *ArryViewControllers=[self.navigationController viewControllers];`然后在索引 0 处获取对象。这将是该导航控制器的根视图控制器。

# sql - 在查找关联记录时减少查询

> ID：15894089
> 
> 赞同：1
> 
> 时间：2013-04-09T05:40:08.873
> 
> 标签：sql, ruby-on-rails

我有这段代码，它执行了大量的 SQL 查询，尤其是使用最后一种方法（“最相关”）。我的以下设置是这样的：

```
class User < ActiveRecord::Base
  authenticates_with_sorcery!
  has_and_belongs_to_many :items

  def purchased_categories
    ids = []
    self.items.each do |item|
      ids << item.categories.pluck(:id)
    end
    ids.flatten.uniq
  end

  def recommended_items
    Item.includes(:categories).where("categories.id IN (?)",       self.purchased_categories).references(:categories).uniq - self.items
  end

  def most_related
    cs = self.purchased_categories
    self.recommended_items.sort { |a, b| (a.categories.pluck(:id) & cs).length <=> (b.categories.pluck(:id) & cs).length }
  end

end 
```

我的项目模型如下所示：

```
class Item < ActiveRecord::Base
  has_and_belongs_to_many :categories
  has_and_belongs_to_many :users
end 
```

我在 most_related 方法中有大量查询，我想知道，如果我能以某种方式减少这些查询？

编辑：

我看到的主要问题是 most_related - 它执行大量查询，见下文：

```
Item Load (4.1ms)  SELECT "items".* FROM "items" INNER JOIN "items_users" ON "items"."id" = "items_users"."item_id" WHERE "items_users"."user_id" = $1  [["user_id", 815249]]
   (0.9ms)  SELECT "categories"."id" FROM "categories" INNER JOIN "categories_items" ON "categories"."id" = "categories_items"."category_id" WHERE "categories_items"."item_id" = $1  [["item_id", 1253]]
   (0.6ms)  SELECT "categories"."id" FROM "categories" INNER JOIN "categories_items" ON "categories"."id" = "categories_items"."category_id" WHERE "categories_items"."item_id" = $1  [["item_id", 1253]]
  SQL (2.9ms)  SELECT DISTINCT "items"."id" AS t0_r0, "items"."name" AS t0_r1, "items"."created_at" AS t0_r2, "items"."updated_at" AS t0_r3, "categories"."id" AS t1_r0, "categories"."name" AS t1_r1, "categories"."created_at" AS t1_r2, "categories"."updated_at" AS t1_r3 FROM "items" LEFT OUTER JOIN "categories_items" ON "categories_items"."item_id" = "items"."id" LEFT OUTER JOIN "categories" ON "categories"."id" = "categories_items"."category_id" WHERE (categories.id IN (134,152))
   (0.8ms)  SELECT "categories"."id" FROM "categories" INNER JOIN "categories_items" ON "categories"."id" = "categories_items"."category_id" WHERE "categories_items"."item_id" = $1  [["item_id", 1684]]
   (0.6ms)  SELECT "categories"."id" FROM "categories" INNER JOIN "categories_items" ON "categories"."id" = "categories_items"."category_id" WHERE "categories_items"."item_id" = $1  [["item_id", 1596]]
   (0.6ms)  SELECT "categories"."id" FROM "categories" INNER JOIN "categories_items" ON "categories"."id" = "categories_items"."category_id" WHERE "categories_items"."item_id" = $1  [["item_id", 1596]]
   (0.6ms)  SELECT "categories"."id" FROM "categories" INNER JOIN "categories_items" ON "categories"."id" = "categories_items"."category_id" WHERE "categories_items"."item_id" = $1  [["item_id", 1750]]
   (0.5ms)  SELECT "categories"."id" FROM "categories" INNER JOIN "categories_items" ON "categories"."id" = "categories_items"."category_id" WHERE "categories_items"."item_id" = $1  [["item_id", 1684]]
   (0.4ms)  SELECT "categories"."id" FROM "categories" INNER JOIN "categories_items" ON "categories"."id" = "categories_items"."category_id" WHERE "categories_items"."item_id" = $1  [["item_id", 1750]]
   (0.5ms)  SELECT "categories"."id" FROM "categories" INNER JOIN "categories_items" ON "categories"."id" = "categories_items"."category_id" WHERE "categories_items"."item_id" = $1  [["item_id", 1622]]
   (0.6ms)  SELECT "categories"."id" FROM "categories" INNER JOIN "categories_items" ON "categories"."id" = "categories_items"."category_id" WHERE "categories_items"."item_id" = $1  [["item_id", 1750]]
   (0.6ms)  SELECT "categories"."id" FROM "categories" INNER JOIN "categories_items" ON "categories"."id" = "categories_items"."category_id" WHERE "categories_items"."item_id" = $1  [["item_id", 1685]]
   (0.6ms)  SELECT "categories"."id" FROM "categories" INNER JOIN "categories_items" ON "categories"."id" = "categories_items"."category_id" WHERE "categories_items"."item_id" = $1  [["item_id", 1750]]
   (0.8ms)  SELECT "categories"."id" FROM "categories" INNER JOIN "categories_items" ON "categories"."id" = "categories_items"."category_id" WHERE "categories_items"."item_id" = $1  [["item_id", 1683]]
   (0.7ms)  SELECT "categories"."id" FROM "categories" INNER JOIN "categories_items" ON "categories"."id" = "categories_items"."category_id" WHERE "categories_items"."item_id" = $1  [["item_id", 1750]]
   (0.7ms)  SELECT "categories"."id" FROM "categories" INNER JOIN "categories_items" ON "categories"."id" = "categories_items"."category_id" WHERE "categories_items"."item_id" = $1  [["item_id", 1378]]
   (0.7ms)  SELECT "categories"."id" FROM "categories" INNER JOIN "categories_items" ON "categories"."id" = "categories_items"."category_id" WHERE "categories_items"."item_id" = $1  [["item_id", 1750]]
   (0.5ms)  SELECT "categories"."id" FROM "categories" INNER JOIN "categories_items" ON "categories"."id" = "categories_items"."category_id" WHERE "categories_items"."item_id" = $1  [["item_id", 1594]]
   (0.5ms)  SELECT "categories"."id" FROM "categories" INNER JOIN "categories_items" ON "categories"."id" = "categories_items"."category_id" WHERE "categories_items"."item_id" = $1  [["item_id", 1750]]
   (0.4ms)  SELECT "categories"."id" FROM "categories" INNER JOIN "categories_items" ON "categories"."id" = "categories_items"."category_id" WHERE "categories_items"."item_id" = $1  [["item_id", 1678]]
   (0.5ms)  SELECT "categories"."id" FROM "categories" INNER JOIN "categories_items" ON "categories"."id" = "categories_items"."category_id" WHERE "categories_items"."item_id" = $1  [["item_id", 1750]]
   (0.6ms)  SELECT "categories"."id" FROM "categories" INNER JOIN "categories_items" ON "categories"."id" = "categories_items"."category_id" WHERE "categories_items"."item_id" = $1  [["item_id", 1428]]
   (0.5ms)  SELECT "categories"."id" FROM "categories" INNER JOIN "categories_items" ON "categories"."id" = "categories_items"."category_id" WHERE "categories_items"."item_id" = $1  [["item_id", 1750]]
   (0.5ms)  SELECT "categories"."id" FROM "categories" INNER JOIN "categories_items" ON "categories"."id" = "categories_items"."category_id" WHERE "categories_items"."item_id" = $1  [["item_id", 1427]]
   (0.5ms)  SELECT "categories"."id" FROM "categories" INNER JOIN "categories_items" ON "categories"."id" = "categories_items"."category_id" WHERE "categories_items"."item_id" = $1  [["item_id", 1750]]
   (0.5ms)  SELECT "categories"."id" FROM "categories" INNER JOIN "categories_items" ON "categories"."id" = "categories_items"."category_id" WHERE "categories_items"."item_id" = $1  [["item_id", 1623]]
   (0.4ms)  SELECT "categories"."id" FROM "categories" INNER JOIN "categories_items" ON "categories"."id" = "categories_items"."category_id" WHERE "categories_items"."item_id" = $1  [["item_id", 1750]]
   (0.5ms)  SELECT "categories"."id" FROM "categories" INNER JOIN "categories_items" ON "categories"."id" = "categories_items"."category_id" WHERE "categories_items"."item_id" = $1  [["item_id", 1676]]
   (0.6ms)  SELECT "categories"."id" FROM "categories" INNER JOIN "categories_items" ON "categories"."id" = "categories_items"."category_id" WHERE "categories_items"."item_id" = $1  [["item_id", 1750]]
   (0.5ms)  SELECT "categories"."id" FROM "categories" INNER JOIN "categories_items" ON "categories"."id" = "categories_items"."category_id" WHERE "categories_items"."item_id" = $1  [["item_id", 1456]]
   (0.7ms)  SELECT "categories"."id" FROM "categories" INNER JOIN "categories_items" ON "categories"."id" = "categories_items"."category_id" WHERE "categories_items"."item_id" = $1  [["item_id", 1750]]
   (0.5ms)  SELECT "categories"."id" FROM "categories" INNER JOIN "categories_items" ON "categories"."id" = "categories_items"."category_id" WHERE "categories_items"."item_id" = $1  [["item_id", 1532]]
   (1.1ms)  SELECT "categories"."id" FROM "categories" INNER JOIN "categories_items" ON "categories"."id" = "categories_items"."category_id" WHERE "categories_items"."item_id" = $1  [["item_id", 1750]]
   (0.5ms)  SELECT "categories"."id" FROM "categories" INNER JOIN "categories_items" ON "categories"."id" = "categories_items"."category_id" WHERE "categories_items"."item_id" = $1  [["item_id", 1546]]
   (0.4ms)  SELECT "categories"."id" FROM "categories" INNER JOIN "categories_items" ON "categories"."id" = "categories_items"."category_id" WHERE "categories_items"."item_id" = $1  [["item_id", 1750]]
   (0.6ms)  SELECT "categories"."id" FROM "categories" INNER JOIN "categories_items" ON "categories"."id" = "categories_items"."category_id" WHERE "categories_items"."item_id" = $1  [["item_id", 1641]]
   (0.5ms)  SELECT "categories"."id" FROM "categories" INNER JOIN "categories_items" ON "categories"."id" = "categories_items"."category_id" WHERE "categories_items"."item_id" = $1  [["item_id", 1750]]
   (0.5ms)  SELECT "categories"."id" FROM "categories" INNER JOIN "categories_items" ON "categories"."id" = "categories_items"."category_id" WHERE "categories_items"."item_id" = $1  [["item_id", 1681]]
   (0.5ms)  SELECT "categories"."id" FROM "categories" INNER JOIN "categories_items" ON "categories"."id" = "categories_items"."category_id" WHERE "categories_items"."item_id" = $1  [["item_id", 1750]]
   (0.7ms)  SELECT "categories"."id" FROM "categories" INNER JOIN "categories_items" ON "categories"."id" = "categories_items"."category_id" WHERE "categories_items"."item_id" = $1  [["item_id", 1677]]
   (0.6ms)  SELECT "categories"."id" FROM "categories" INNER JOIN "categories_items" ON "categories"."id" = "categories_items"."category_id" WHERE "categories_items"."item_id" = $1  [["item_id", 1750]]
   (0.8ms)  SELECT "categories"."id" FROM "categories" INNER JOIN "categories_items" ON "categories"."id" = "categories_items"."category_id" WHERE "categories_items"."item_id" = $1  [["item_id", 1288]]
   (0.7ms)  SELECT "categories"."id" FROM "categories" INNER JOIN "categories_items" ON "categories"."id" = "categories_items"."category_id" WHERE "categories_items"."item_id" = $1  [["item_id", 1750]]
   (0.6ms)  SELECT "categories"."id" FROM "categories" INNER JOIN "categories_items" ON "categories"."id" = "categories_items"."category_id" WHERE "categories_items"."item_id" = $1  [["item_id", 1533]]
   (0.6ms)  SELECT "categories"."id" FROM "categories" INNER JOIN "categories_items" ON "categories"."id" = "categories_items"."category_id" WHERE "categories_items"."item_id" = $1  [["item_id", 1750]]
   (0.5ms)  SELECT "categories"."id" FROM "categories" INNER JOIN "categories_items" ON "categories"."id" = "categories_items"."category_id" WHERE "categories_items"."item_id" = $1  [["item_id", 1686]]
   (0.5ms)  SELECT "categories"."id" FROM "categories" INNER JOIN "categories_items" ON "categories"."id" = "categories_items"."category_id" WHERE "categories_items"."item_id" = $1  [["item_id", 1750]]
   (0.6ms)  SELECT "categories"."id" FROM "categories" INNER JOIN "categories_items" ON "categories"."id" = "categories_items"."category_id" WHERE "categories_items"."item_id" = $1  [["item_id", 1643]]
   (0.6ms)  SELECT "categories"."id" FROM "categories" INNER JOIN "categories_items" ON "categories"."id" = "categories_items"."category_id" WHERE "categories_items"."item_id" = $1  [["item_id", 1750]]
   (0.5ms)  SELECT "categories"."id" FROM "categories" INNER JOIN "categories_items" ON "categories"."id" = "categories_items"."category_id" WHERE "categories_items"."item_id" = $1  [["item_id", 1679]]
   (0.5ms)  SELECT "categories"."id" FROM "categories" INNER JOIN "categories_items" ON "categories"."id" = "categories_items"."category_id" WHERE "categories_items"."item_id" = $1  [["item_id", 1750]]
   (0.5ms)  SELECT "categories"."id" FROM "categories" INNER JOIN "categories_items" ON "categories"."id" = "categories_items"."category_id" WHERE "categories_items"."item_id" = $1  [["item_id", 1682]]
   (0.6ms)  SELECT "categories"."id" FROM "categories" INNER JOIN "categories_items" ON "categories"."id" = "categories_items"."category_id" WHERE "categories_items"."item_id" = $1  [["item_id", 1750]]
   (0.8ms)  SELECT "categories"."id" FROM "categories" INNER JOIN "categories_items" ON "categories"."id" = "categories_items"."category_id" WHERE "categories_items"."item_id" = $1  [["item_id", 1687]]
   (0.6ms)  SELECT "categories"."id" FROM "categories" INNER JOIN "categories_items" ON "categories"."id" = "categories_items"."category_id" WHERE "categories_items"."item_id" = $1  [["item_id", 1750]]
   (0.5ms)  SELECT "categories"."id" FROM "categories" INNER JOIN "categories_items" ON "categories"."id" = "categories_items"."category_id" WHERE "categories_items"."item_id" = $1  [["item_id", 1675]]
   (0.5ms)  SELECT "categories"."id" FROM "categories" INNER JOIN "categories_items" ON "categories"."id" = "categories_items"."category_id" WHERE "categories_items"."item_id" = $1  [["item_id", 1750]]
   (0.6ms)  SELECT "categories"."id" FROM "categories" INNER JOIN "categories_items" ON "categories"."id" = "categories_items"."category_id" WHERE "categories_items"."item_id" = $1  [["item_id", 1376]]
   (0.5ms)  SELECT "categories"."id" FROM "categories" INNER JOIN "categories_items" ON "categories"."id" = "categories_items"."category_id" WHERE "categories_items"."item_id" = $1  [["item_id", 1750]]
   (0.5ms)  SELECT "categories"."id" FROM "categories" INNER JOIN "categories_items" ON "categories"."id" = "categories_items"."category_id" WHERE "categories_items"."item_id" = $1  [["item_id", 1549]]
   (0.5ms)  SELECT "categories"."id" FROM "categories" INNER JOIN "categories_items" ON "categories"."id" = "categories_items"."category_id" WHERE "categories_items"."item_id" = $1  [["item_id", 1750]]
   (0.5ms)  SELECT "categories"."id" FROM "categories" INNER JOIN "categories_items" ON "categories"."id" = "categories_items"."category_id" WHERE "categories_items"."item_id" = $1  [["item_id", 1680]]
   (0.6ms)  SELECT "categories"."id" FROM "categories" INNER JOIN "categories_items" ON "categories"."id" = "categories_items"."category_id" WHERE "categories_items"."item_id" = $1  [["item_id", 1750]]
   (0.6ms)  SELECT "categories"."id" FROM "categories" INNER JOIN "categories_items" ON "categories"."id" = "categories_items"."category_id" WHERE "categories_items"."item_id" = $1  [["item_id", 1643]]
   (0.6ms)  SELECT "categories"."id" FROM "categories" INNER JOIN "categories_items" ON "categories"."id" = "categories_items"."category_id" WHERE "categories_items"."item_id" = $1  [["item_id", 1623]]
   (0.6ms)  SELECT "categories"."id" FROM "categories" INNER JOIN "categories_items" ON "categories"."id" = "categories_items"."category_id" WHERE "categories_items"."item_id" = $1  [["item_id", 1623]]
   (0.6ms)  SELECT "categories"."id" FROM "categories" INNER JOIN "categories_items" ON "categories"."id" = "categories_items"."category_id" WHERE "categories_items"."item_id" = $1  [["item_id", 1596]]
   (0.7ms)  SELECT "categories"."id" FROM "categories" INNER JOIN "categories_items" ON "categories"."id" = "categories_items"."category_id" WHERE "categories_items"."item_id" = $1  [["item_id", 1533]]
   (0.7ms)  SELECT "categories"."id" FROM "categories" INNER JOIN "categories_items" ON "categories"."id" = "categories_items"."category_id" WHERE "categories_items"."item_id" = $1  [["item_id", 1623]]
   (0.5ms)  SELECT "categories"."id" FROM "categories" INNER JOIN "categories_items" ON "categories"."id" = "categories_items"."category_id" WHERE "categories_items"."item_id" = $1  [["item_id", 1532]]
   (0.5ms)  SELECT "categories"."id" FROM "categories" INNER JOIN "categories_items" ON "categories"."id" = "categories_items"."category_id" WHERE "categories_items"."item_id" = $1  [["item_id", 1623]]
   (0.5ms)  SELECT "categories"."id" FROM "categories" INNER JOIN "categories_items" ON "categories"."id" = "categories_items"."category_id" WHERE "categories_items"."item_id" = $1  [["item_id", 1378]]
   (0.5ms)  SELECT "categories"."id" FROM "categories" INNER JOIN "categories_items" ON "categories"."id" = "categories_items"."category_id" WHERE "categories_items"."item_id" = $1  [["item_id", 1623]]
   (0.5ms)  SELECT "categories"."id" FROM "categories" INNER JOIN "categories_items" ON "categories"."id" = "categories_items"."category_id" WHERE "categories_items"."item_id" = $1  [["item_id", 1622]]
   (0.6ms)  SELECT "categories"."id" FROM "categories" INNER JOIN "categories_items" ON "categories"."id" = "categories_items"."category_id" WHERE "categories_items"."item_id" = $1  [["item_id", 1623]] 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-09T05:56:02.917

尝试分割句子

```
Item.includes(:categories).where("categories.id IN (?)", self.purchased_categories).references(:categories).uniq 
```

一分为二，一个用于Items的所有id，另一个用于通过Item和Category之间的表的所有类别，比如

```
1\. Item.includes(:categories).where("categories.id IN (?)", self.purchased_categories)
2\. Category.includes(:items).where("items.id IN (?)", <THE ids of Items>) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-09T05:49:52.770

如果没有看到您的应用程序正在执行的确切 SQL 查询，我不确定，但我怀疑它在这部分代码中遇到了**N + 1 查询问题：**

```
self.items.each do |item|
  ids << item.categories.pluck(:id)
end 
```

这将为每个项目执行单独的查询以获取其关联的类别（这就是您看到这么多`SELECT "categories"."id" ...`查询的原因）。但是在两个查询中选择所有项目的类别会更有效。

在上面的代码中可能还有其他实例，但通常 N + 1 查询问题的解决方案是在`includes(...)`从数据库中获取“父”模型时使用。阅读有关[Eager Loading Associations](http://guides.rubyonrails.org/active_record_querying.html#eager-loading-associations)的 Rails 指南部分的更多信息。

**编辑**`has_many :through`：使用这些模型关系而不是这些模型关系可能更有效，`has_and_belongs_to_many`这也可以通过使查询更容易来帮助解决您的问题。如果你切换到`has_many :through`你最终会得到这样的东西（使用更简单的`purchased_categories`方法）：

```
class User
  has_many :items
  has_many :categories, :through => :items

  def purchased_categories
    category_ids
  end
end

class Item
  belongs_to :user
  belongs_to :category
end 
```

# javascript - phantomJS 是否支持地理位置？

> ID：15894090
> 
> 赞同：8
> 
> 时间：2013-04-09T05:40:13.553
> 
> 标签：javascript, phantomjs, qunit, chutzpah

我正在尝试使用 PhantomJS 运行 qunit 测试用例。当 phantomJS 尝试访问 DOM 的 navigator.geolocation 函数时，我的一项测试正在进行中。同样的测试在浏览器中运行良好，只是挂在带有 phantomJS 的控制台中。

phantomJS 是否支持地理位置？有什么建议吗？

在以下 if 条件下中断

```
 if(navigator.geolocation) {
            window.navigator.geolocation.watchPosition(updateLocation, null, { frequency: 3000 });
        } 
```

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2013-04-09T12:21:44.417

不。

只需检查[features.js](https://github.com/ariya/phantomjs/blob/master/examples/features.js)示例。

```
>phantomjs.exe features.js
Detected features (using Modernizr 2.0.6):

Supported:
  touch
  generatedcontent
  fontface
  flexbox
  canvas
  canvastext
  postmessage
  websqldatabase
  hashchange
  history
  draganddrop
  websockets
  rgba
  hsla
  multiplebgs
  backgroundsize
  borderimage
  borderradius
  boxshadow
  textshadow
  opacity
  cssanimations
  csscolumns
  cssgradients
  cssreflections
  csstransforms
  csstransitions
  localstorage
  sessionstorage
  webworkers
  applicationcache
  svg
  inlinesvg
  smil
  svgclippaths

Not supported:
  csstransforms3d
  webgl
  geolocation
  indexeddb
  video
  audio 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2016-05-29T18:22:37.767

您可以通过在初始化时将所需函数注入 DOM 来添加“geolocation-fake-support”以运行测试或执行其他操作。以下示例伪造了 navigator.geolocation.getCurrentPosition，因此当浏览器中的网站调用此 API 端点时，PhantomJS 将始终返回配置的位置。

```
webpage.onInitialized = function() {
    webpage.injectJs('geolocation.js')
}; 
```

**地理位置.js：**

```
window.navigator.geolocation = {
    getCurrentPosition: function (success, failure) {
        success({
            coords: {
                // Will always return Germany, Rostock
                latitude: 54.0834,
                longitude: 12.1004

            }, timestamp: Date.now()
        });
    }
}; 
```

# c# - 如何使用 System.Runtime.Serialization.Json 解析这个字符串？

> ID：15894091
> 
> 赞同：4
> 
> 时间：2013-04-09T05:40:14.750
> 
> 标签：c#, json, parsing

你能帮我如何使用`System.Runtime.Serialization.Json`( **not`Json.NET`** ) 来获取这个字符串中每本书的信息到数组：

```
{
    "books":
    [
        {"name":"Book 1","orig":"Author 1","date":2009,"lang":"en"},
        {"name":"Book 2","orig":"Author 2","date":2012,"lang":"fr"}
    ],
    "src":"lib",
    "id":212
} 
```

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2013-04-09T05:50:31.583

这是我制作的一个快速示例，它似乎有效：

```
using System;
using System.Collections.Generic;
using System.IO;
using System.Runtime.Serialization;
using System.Runtime.Serialization.Json;

class Test
{
    static void Main()
    {
        using (Stream stream = File.OpenRead("test.json"))
        {
            var serializer = new DataContractJsonSerializer(typeof(Library));
            Library library = (Library) serializer.ReadObject(stream);
            Console.WriteLine(library.Books[0].Name);
        }

    }
}

[DataContract]
class Book
{
    [DataMember(Name="name")] public string Name { get; set; }
    [DataMember(Name="orig")] public string Orig { get; set; }
    [DataMember(Name="date")] public string Date { get; set; }
    [DataMember(Name="lang")] public string Lang { get; set; }
}

[DataContract]
class Library
{
    [DataMember(Name="books")] public IList<Book> Books { get; set; }
    [DataMember(Name="src")] public string Src { get; set; }
    [DataMember(Name="id")] public string Id { get; set; }
} 
```

我确信您可以调整许多其他选项，但这至少应该让您入门。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2018-03-23T12:03:21.243

通用方法：

```
using System.IO;
using System.Runtime.Serialization.Json;
using System.Text;
using System.Threading.Tasks;

namespace YourApp.Helpers
{
    public class SystemSerializer:ISerializer
    {
        public T Deserialize<T>(string json) where T : class
        {
            DataContractJsonSerializer ser = new DataContractJsonSerializer(typeof(T));

            using (var ms = new MemoryStream(Encoding.UTF8.GetBytes(json)))
            {
                return ser.ReadObject(ms) as T;
            }
        }

        public T Deserialize<T>(Stream json) where T : class
        {
            DataContractJsonSerializer ser = new DataContractJsonSerializer(typeof(T));
            return ser.ReadObject(json) as T;
        }

        public async Task<string> SerializeAsync<T>(T obj) where T : class
        {
            DataContractJsonSerializer ser = new DataContractJsonSerializer(typeof(T));
            using (var ms = new MemoryStream())
            {
                ser.WriteObject(ms, obj);
                ms.Position = 0;
                using (var sr = new StreamReader(ms))
                {
                    return await sr.ReadToEndAsync();
                }
            }
        }
    }
} 
```

# c# - 将对象存储到列表并搜索它们

> ID：15894093
> 
> 赞同：0
> 
> 时间：2013-04-09T05:40:29.117
> 
> 标签：c#, list, search, textbox

我希望能够在列表中创建一系列对象，然后在该列表中搜索特定结果（可能有 0、1 或许多命中），然后在文本框中显示结果。

这是我到目前为止所拥有的，但我似乎只能显示我输入的最后一个对象。

```
public partial class OrganiserWindow : Form
{
    public OrganiserWindow()
    {
        InitializeComponent();
    }

    List<Album> AlbumList = new List<Album>();

    private void createAlbum_Click(object sender, EventArgs e)
    {
        AlbumList.Add(new Album(albumBox.Text, artistBox.Text));
    }

    private void searchAlbum_Click(object sender, EventArgs e)
    {
        var albumResult = from album in AlbumList
                          where album.AlbumName != null// == albumBox.Text
                          select new { Name = album.AlbumName, Artist = album.ArtistName };

        foreach (var item in albumResult)
        {
            albumResultBox.Text = String.Join(Environment.NewLine, item.Name + " " + item.Artist);
        }
    }
}

public class Album
{
    private string albumName;
    private string artistName;

    public Album(string album, string artist)
    {
        albumName = album;
        artistName = artist;
    }

    public string AlbumName
    {
        get 
        { 
            return albumName; 
        }
        set 
        { 
            albumName = value; 
        }
    }

    public string ArtistName
    {
        get 
        { 
            return artistName; 
        }
        set 
        { 
            artistName = value; 
        }
    }
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-09T05:43:46.143

你忘了使用`+=`而不是`=`

```
albumResultBox.Text += String.Join(Environment.NewLine, item.Name + " " + item.Artist); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-09T05:44:53.767

在每次迭代中，您都会覆盖文本框中的文本。您应该附加到它。TextBox.Text 也永远不会为空。

此行将永远不会添加 AlbumName == null 的专辑

```
AlbumList.Add(new Album(albumBox.Text, artistBox.Text)); 
```

因此，当您运行此查询时，您始终会返回所有专辑

```
var albumResult = from album in AlbumList
                  where album.AlbumName != null
                  select new { Name = album.AlbumName, Artist = album.ArtistName }; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-09T05:55:59.870

你正在积累状态。字符串是不可变的，每次调用 += 都会为每次迭代创建一个新的字符串对象。在您的情况下，这可能无关紧要，但就形式而言，您应该这样做：

```
StringBuilder sb = new StringBuilder();
...
sb.AppendFormat("{0} {1}\r\n", item.AlbumName, item.ArtistName); 
```

然后从中提取完成的字符串`sb.ToString()`

您可以通过重写 ToString() 大大提高代码的易读性

```
public class Album
{
    public Album(string album, string artist)
    {
        albumName = album;
        artistName = artist;
    }

    public string AlbumName { get; set; }
    public string ArtistName { get; set; }

    public override string ToString() 
    {
        return string.Format("{0} {1}", AlbumName, ArtistName);
    }
} 
```

允许你写

```
sb.AppendLine(item); 
```

AppendLine 隐式调用 ToString 然后附加 CRLF。

# sql - 如何在 SQL Server 中一次运行多个查询

> ID：15894104
> 
> 赞同：1
> 
> 时间：2013-04-09T05:41:11.110
> 
> 标签：sql, sql-server

我必须生成一个包含 45 个插入语句的大报告。如何通过将查询分成组来一次运行多个插入语句。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-09T05:44:29.743

为此使用存储过程，通过使用它，你也可以返回值。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-09T09:07:44.243

尝试使用多个存储过程，其中每个存储过程处理多个插入语句。即使您一一执行这些过程，只要您使用不同的连接，它们也应该在 SQL Server 上并行执行。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-09T05:44:09.880

您可以在存储过程中编写 45 个插入语句。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-04-09T05:57:15.273

您可能会成功运行多个会话（即登录）。[编辑] 我写道，插入锁定表，这是错误的。谢谢@marc_s。[/编辑]

但是，如果您`insert`在执行复杂查询之前，您可能会成功，因为查询可以并行执行。

但是，这在很大程度上取决于代码。

使用现有代码没有什么可以改进的吗？通常，仅通过查看语句就有足够的空间来提升性能。

# css - 显示添加到 javafx 本机包中的 .css 文件中的图像的问题

> ID：15894109
> 
> 赞同：3
> 
> 时间：2013-04-09T05:41:46.010
> 
> 标签：css, javafx-2, background-image

Javafx 本机包不显示添加到 .css 文件中的任何图像

当我使用位于我的项目“/styles/style.css”中的 .css 文件时，我在其中提供了一个场景来获取样式，

```
Scene scene = new Scene(parent, 1080, 800);
scene.getStylesheets().add("/styles/style.css"); 
```

要将图像设置为 css，我尝试了两种方法：

```
-fx-graphic: url("../images/delete_hover.png") no-repeat; 
```

和

```
-fx-background-image:url("../images/bgLeft.jpg"); 
```

但我没有解决。

我在哪里将颜色或字体设置到 css 文件中，但不是图像可以请建议...

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-15T06:45:09.630

UnZipped jar 我注意到 style.css 被转换成 style.bss 即二进制格式。

只需在构建包时将 css 转换为 bss false，即在 pom.xml 中

`<css2bin>false </css2bin>`

这解决了问题:)

# hive - 如何将 XML 数据文件加载到 Hive 表中？

> ID：15894110
> 
> 赞同：0
> 
> 时间：2013-04-09T05:41:51.320
> 
> 标签：hive

在将 XML 数据文件加载到 HIVE 表中时，我收到以下错误消息：

```
FAILED: SemanticException 7:9 Input format must implement InputFormat. Error   encountered near token 'StoresXml'. 
```

我加载 XML 文件的方式如下：

**创建一个表StoresXml

```
 'CREATE EXTERNAL TABLE StoresXml (storexml string)
   STORED AS INPUTFORMAT 'org.apache.mahout.classifier.bayes.XmlInputFormat'
   OUTPUTFORMAT 'org.apache.hadoop.hive.ql.io.HiveIgnoreKeyTextOutputFormat'
   LOCATION '/user/hive/warehouse/stores';' 
```

** 位置 /user/hive/warehouse/stores 在 HDFS 中。

`load data inpath <local path where the xml file is stored> into table StoresXml;`

现在，问题是当我从表 StoresXml 中选择任何列时，就会出现上述错误。

请帮帮我。我哪里出错了？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-12-05T09:37:23.837

1）首先你需要创建单列表，如

```
CREATE TABLE xmlsample(xml string); 
```

2）之后，您需要将本地/hdfs中的数据加载到配置单元表中

```
LOAD DATA INPATH '---------' INTO TABLE XMLSAMPLE; 
```

3) 接下来使用`XPATH`, `XPATH_ARRAY`, `XPATH_STRING`LIKE SAMPLE **XML** QUERIES..

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2016-06-01T14:27:52.863

我刚刚使用 XML 文件的 xpath 将此 transactions.xml 文件加载到 hive 表中：**将 xml 文件的记录放入一行：

```
terminal> cat /home/cloudera/Desktop/Test/Transactions_xml.xml | tr -d '&' | tr '\n' ' ' | tr '\r' ' ' | sed 's|</record>|</record>\n|g' | grep -v '^\s*$' > /home/cloudera/Desktop/trx_xml;

terminal> hadoop fs -put /home/cloudera/Desktop/trx_xml.xml  /user/cloudera/DataTest/Transactions_xml

hive>create table Transactions_xml1(xmldata string);

hive>load data inpath '/user/cloudera/DataTest/Transactions_xml' overwrite into table Transactions_xml1;

hive>create table Transactions_xml(trx_id int,account int,amount int);

hive>insert overwrite table Transactions_xml select xpath_int(xmldata,'record/Tid'),
xpath_int(xmldata,'record/AccounID'),
xpath_int(xmldata,'record/Amount') from Transactions_xml1; 
```

我希望这能帮到您。让我知道结果。

* * *

## 回答 #3

> 赞同：-2
> 
> 时间：2015-04-09T10:34:02.697

我开发了一个从 csv 文件生成配置单元脚本的工具。以下是有关如何生成文件的几个示例。工具——https: [//sourceforge.net/projects/csvtohive/?source=directory](https://sourceforge.net/projects/csvtohive/?source=directory)

1.  使用浏览选择一个 CSV 文件并设置 hadoop 根目录，例如：/user/bigdataproject/

2.  工具使用所有 csv 文件生成 Hadoop 脚本，以下是生成的 Hadoop 脚本示例，用于将 csv 插入 Hadoop

    ```
    #!/bin/bash -v

    hadoop fs -put ./AllstarFull.csv /user/bigdataproject/AllstarFull.csv
    hive -f ./AllstarFull.hive

    hadoop fs -put ./Appearances.csv /user/bigdataproject/Appearances.csv
    hive -f ./Appearances.hive

    hadoop fs -put ./AwardsManagers.csv /user/bigdataproject/AwardsManagers.csv
    hive -f ./AwardsManagers.hive 
    ```

3.  生成的 Hive 脚本示例

    ```
    CREATE DATABASE IF NOT EXISTS lahman;

    USE lahman;

    CREATE TABLE AllstarFull (playerID string,yearID string,gameNum string,gameID string,teamID string,lgID string,GP string,startingPos string) row format delimited fields terminated by ',' stored as textfile;

    LOAD DATA INPATH '/user/bigdataproject/AllstarFull.csv' OVERWRITE INTO TABLE AllstarFull;

    SELECT * FROM AllstarFull;
    ```

谢谢维杰

# ios - 属性设置然后在 init 中重置

> ID：15894116
> 
> 赞同：0
> 
> 时间：2013-04-09T05:42:15.153
> 
> 标签：ios, objective-c

这是我的 SlidingVC 标头中的属性声明，它是 UITableViewController 的子类：

```
@property (strong, nonatomic) NSString *user; 
```

这是我的合成线：

```
@synthesize user = _user,sortedWordlist = _sortedWordlist, wordlist = _wordlist; 
```

这是我的自定义初始化：

```
- (id)initWithUser:(NSString*)theUser
{
    self = [super init];
    if (self) {
        if ([theUser isEqualToString:@"user"]) {
            _user = @"user";
        }
        else if ([theUser isEqualToString:@"opponent"]){
            _user = @"opponent";
        }
    }
    return self;
} 
```

所以发生的事情是，当我执行 pver`initWithUser:`时，我看到它`_user`占用`theUser`了变量调试器窗口中的内存地址。我走过去`return self`，然后关闭`}`该方法，它仍然设置。但是，Xcode 又返回`return self`一次，然后如果我跳过`_user`它，它旁边就没有内存地址了，它仍然`null`用于后面的方法。

为什么它返回两次，然后第二次设置为空？

* * *

这是我的 MainVC 中实例化 SlidingVC 的方法：

```
- (WSWordlistTableViewController *)setupWordlistTableViewController:(NSString*)user
{
    WSWordlistTableViewController *wordlistTableViewController;
    UIView *wordlistContainerView;
    UIStoryboard *mainStoryboard = [UIStoryboard storyboardWithName:@"MainStoryboard"
                                                             bundle: nil];

    if ([user isEqualToString:@"user"]){
        if(!self.userWordlistTableViewController){
            self.userWordlistTableViewController  = [[WSWordlistTableViewController alloc] initWithUser:@"user"];
            wordlistTableViewController = self.userWordlistTableViewController;
            wordlistContainerView = self.userWordlistContainerView;
        }
    }
    else if ([user isEqualToString:@"opponent"]) {
        if(!self.opponentWordlistTableViewController){
            self.opponentWordlistTableViewController  = [[WSWordlistTableViewController alloc] initWithUser:@"opponent"];
            wordlistTableViewController = self.opponentWordlistTableViewController;
            wordlistContainerView = self.opponentWordlistContainerView;
        }
    }

    wordlistTableViewController = [mainStoryboard  instantiateViewControllerWithIdentifier:@"wordlistTableViewController"];

    wordlistTableViewController.view.frame = wordlistContainerView.bounds;
    wordlistTableViewController.view.autoresizingMask = wordlistContainerView.autoresizingMask;
    [self addChildViewController:wordlistTableViewController];
    [wordlistContainerView addSubview:wordlistTableViewController.view];
    [wordlistContainerView bringSubviewToFront:wordlistTableViewController.wordlistTableView];

    [wordlistTableViewController didMoveToParentViewController:self];

    return wordlistTableViewController;
} 
```

调用该方法的方法取决于按下的按钮：

```
- (IBAction)slideUserWordlistView:(id)sender {
    if(!self.userWordlistTableViewController){
        [self setupWordlistTableViewController:@"user"];
    }

    // (sliding drawer code here)
} 
```

或者：

```
- (IBAction)slideOpponentWordlistView:(id)sender {
    if(!self.opponentWordlistTableViewController){
        [self setupWordlistTableViewController:@"opponent"];
    }

        // (sliding drawer code here)
} 
```

我正在做的是滑出一个包含我的 SlidingVC 的视图。我有两个，两个用户各一个。当每个相应的按钮被按下时，我检查每个相应的 SlidingVC 是否存在，如果不存在，则实例化然后添加到slidingViewContainer。

# javascript - 从 Javascript 调用 Rails 操作

> ID：15894119
> 
> 赞同：10
> 
> 时间：2013-04-09T05:42:23.717
> 
> 标签：javascript, ruby-on-rails, ajax

我有这个在我的控制器`link_to`中调用动作：`update`

`<%= link_to((image_tag("lock_closed.svg", :class => "edit")), :controller => "sections", :action => "update",:id => section.id, :remote => true) %>`

* * *

但我真的很想`update`通过一些带有普通图像标签的javascript来调用这个动作。

所以像：

`<%= image_tag("lock_closed.svg", :class => "edit")%>`

和：

```
$(".edit").click(function(){
    if ($(this).hasClass("update")){
    // call update action
    } else {
    //do something else 
    };
}) 
```

* * *

是否可以通过这种方式调用动作？我一直在使用`GET`&`POST`或`Ajax`方法，但我不确定如何利用它们来定位特定的控制器和动作。

* * *

## 回答 #1

> 赞同：18
> 
> 时间：2013-04-09T05:50:35.523

发送 Ajax 调用

```
$(".edit").click(function(){  
  if ($(this).hasClass("update")){     
    $.ajax({
      type: "PUT",
      url: "/sections/<%= section.id %>"
    });
  } else {
    //do something else 
  }; 
}) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2019-02-05T15:40:30.783

为了解决`ActionController::InvalidAuthenticityToken` 关于 ajax 调用的问题，我们还应该发送*`authenticity_token`*.

```
 $.ajax({
   url: '/sections',
   data: { authenticity_token: $('[name="csrf-token"]')[0].content, 
           id: <%= section.id %> },
   method: 'POST',
   success: function (res) {
     ....
  }
}); 
```

# c++ - 为什么不在 C++ 游戏中频繁分配和释放内存？

> ID：15894122
> 
> 赞同：15
> 
> 时间：2013-04-09T05:42:39.343
> 
> 标签：c++, memory-management, game-engine

我最近转换为 C++ 进行游戏编程 - 我在处理 C# 中的内存管理和垃圾收集问题方面有很多经验，但在 C++ 方面没有那么多经验。

我过去听过一些含糊的建议，以避免在游戏过程中进行分配和释放（即`new`和`delete`），并预先分配您可能需要的所有内容。但这比在游戏运行时根据需要分配和释放游戏对象（敌人、粒子等）要乏味且架构复杂得多。

我认为我读到的建议是指资源受限的平台——我的目标是主要为 PC 开发，我想经常变化的游戏状态数据最多只有几兆字节。其余的是我将要预加载的纹理、声音资源等。

所以我的问题是：在拥有千兆字节内存的 PC 世界中，为我的游戏状态数据设置精细的内存池、预分配等是否值得头疼？或者这只是一些毫无疑问的“最佳实践”传统，在最大限度地利用有限平台时演变而来，现在被重复为福音？

如果我的 2 MB 游戏数据碎片化并且现在分布在 4MB 上，我无法想象这对 1990 年之后制造的 PC 有丝毫影响——但我很想知道我是否遗漏了什么:)。

* * *

## 回答 #1

> 赞同：22
> 
> 时间：2013-04-09T06:00:05.450

`new`除非在游戏环境中必要，否则避免调用的主要原因是

1.  内存的动态分配确实非常昂贵。
2.  缓存未命中对性能不利。

**动态分配**

在我的工作中，我们开发了一个类似游戏的产品（虚拟手术），我们的大部分内存都是通过工厂或内存池预先分配和处理的。这样做是因为动态分配内存需要很长时间。系统必须随时处理许多不同大小的内存请求。这意味着在流程中需要做很多工作，例如尽量减少碎片。如果您向系统请求内存，您将不得不等待它执行这些操作。如果您预先分配内存，您可以使用工厂或其他特定于块大小的内存管理器来缓解这些问题。

我可以根据经验告诉你，一个简单的错误，比如`std::vector`从头开始为每帧分配一个相当大的内存，而不是重用预先分配的内存，就会把帧速率拖到阴沟里。

**缓存未命中**

另一个相关问题是缓存一致性。缓存未命中（强制操作系统将新页面带入缓存）也非常昂贵。如果这种情况经常发生，您将拥有无法玩的游戏。但是，如果您预先分配大块内存，这可以大大改善缓存局部性，从而使缓存未命中率降低。

**故事的道德启示**

因此，简而言之：如果您不管理自己的预分配内存，您可能会浪费大量计算时间来等待系统分配内存或处理缓存未命中。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-04-09T05:46:29.203

> 在拥有千兆字节内存的 PC 世界中

如果那台 PC 上运行的是健全的操作系统，那么您的进程只有几兆字节。（但这不是这里的主要问题。）

> 为我的游戏状态数据设置精细的内存池、预分配等是否值得头疼

我不敢说“总是预先分配所有东西”，因为有时这是不可能的，而且对于不经常使用的对象，这可能不值得付出努力，但**C 和 C++ 中的动态内存管理确实是资源-密集而缓慢。**因此，如果您渲染，例如每秒 30 帧到屏幕上，则可能避免分配和取消分配，然后为每个帧/迭代期间要渲染的对象重新分配缓冲区。

# java - 为一个条目输入的值存储为其他条目，而不是唯一值

> ID：15894126
> 
> 赞同：0
> 
> 时间：2013-04-09T05:42:43.843
> 
> 标签：java, mysql, for-loop, liferay-6

我有一个模块，我必须更新每个学生的出勤率。代码如下：

```
public void updateDailyAttendance(ActionRequest areq, ActionResponse aRes) throws Exception{ 

int totalEmployees = EmployeeLocalServiceUtil.getEmployeesCount();
String attendanceValue = getAttendanceValue(areq);
//long attPKey = CounterLocalServiceUtil.increment(Employee.class.getName());
for (int i = 0; i < totalEmployees; i++) {
// use attendanceValue to update employee entry
//String attendanceValue = getAttendanceValue(areq);
// parameterValue is value of radio button parameter

long attPKey = CounterLocalServiceUtil.increment(Employee.class.getName());

Attendance newAttendanceInstance = new AttendanceImpl();
newAttendanceInstance.setAttId(attPKey);
                            newAttendanceInstance.setAttStatus(attendanceValue);
                        AttendanceLocalServiceUtil.addAttendance(newAttendanceInstance); 
```

} }

```
 private String getAttendanceValue(ActionRequest areq) {
 Enumeration parameters = areq.getParameterNames();

while (parameters.hasMoreElements()) {
   String parameterName = parameters.nextElement().toString();
if (parameterName.startsWith("updateattendance")) {
    return areq.getParameter(parameterName);
 }
 }
throw new IllegalStateException("Parameter updateattendance cannot be found!!");
} 
```

当我使用上面的代码时，我的数据库得到更新，但出勤（为第一位员工输入的出席/缺席被视为其他员工的值，即使我为其他员工标记了不同的值（出席/缺席）

我应该如何修改上面的代码，以便存储为每个员工输入的单选按钮值？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-09T06:10:08.483

你在循环之前得到`attendanceValue` 唯一的一次。`getAttendanceValue`只返回一个字符串，那么`attendanceValue`两个学生之间怎么可能不同呢？

```
String attendanceValue = getAttendanceValue(areq); 
```

这就是为什么所有`attendanceValue`的 s 都是一样的。您需要做的是更新 for 循环中每个员工的值。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-09T06:18:16.807

这是因为您只获取一个出席值。在这一行中“字符串出勤值 = getAttendanceValue(areq);” 你得到第一个员工的出席。但是在 getAttendanceValue 方法中

```
while (parameters.hasMoreElements()) {
   String parameterName = parameters.nextElement().toString();
if (parameterName.startsWith("updateattendance")) {
    return areq.getParameter(parameterName);
 }
 } 
```

此代码仅检查其是否以 updateattendance 开头，该值始终满足第一条记录并返回该值。您可以通过检查用于使“updateattendance”唯一的后缀来存储不同员工的记录，如果它是某个数字，那么您可以将其存储在 ArrayList 中，索引作为 updateattendance 之后的数字。而不是返回 Strig，您可以返回该 ArrayList

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-10T06:10:21.127

这是更好的方法，而不是使用 Map 与 EmpId 作为 Key 和 updateattendanc 作为值。

```
Map<String, String> mapEmpAttendance = new HashMap<String, String>(); 
while (parameters.hasMoreElements()) {
    String parameterName = parameters.nextElement().toString();
    String value = "";
    if (parameterName.startsWith("updateattendance")) {
            value = areq.getParameter(parameterName);
            map.put(parameterName.substring(16, parameterName.length), value)
    }
 } 
return mapEmpAttendance; 
```

# web-services - 如何在 html 页面中访问 Web 服务？静态网站？

> ID：15894127
> 
> 赞同：-3
> 
> 时间：2013-04-09T05:42:46.197
> 
> 标签：web-services

在 HTML 页面中访问 Web 服务，我有一个静态站点，我想访问该站点中的一个 Web 服务。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-18T14:03:44.063

如果您运行的是静态站点，我假设您要访问的 Web 服务*不在同一个域中*，并且您*无法*在服务器端设置代理。如果两个假设都是正确的，则由于浏览器中的原始策略相同，您不能使用“普通”ajax。您最好的选择可能是[JSONP](http://en.wikipedia.org/wiki/JSONP)，因为许多 Web 服务都支持它。

我会给你一个简单的例子。[要使用 jQuery 从 JavaScript 中的openkeyval](http://openkeyval.org/)存储 Web服务检索存储在键“mykey”下的值，请调用

```
$.ajax({
    url: "http://api.openkeyval.org/mykey",
    dataType: "jsonp",
    success: function(data){
        // do something with data
    }
}); 
```

并存储一个值，调用

```
$.ajax({
    url: "http://api.openkeyval.org/store/",
    data: "mykey=myvalue",
    dataType: "jsonp",
    success: function(data){
        // your value has been succesfully saved
    }
}); 
```

请注意，现在许多人认为[跨域资源共享 (CORS)](http://en.wikipedia.org/wiki/Cross-origin_resource_sharing)是 JSONP 的更好替代方案。但是，对您来说开始可能会有点困难。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-19T03:31:06.287

我同意 benedolph 提供的答案，但认为我可能会添加一些与他的假设相反的想法。

这些步骤可能比您想要的更复杂，但实际上并不是非常复杂——而且即使不是免费的，也会很便宜。但是至少要留出一整天的时间...

1）如果您没有，请获取一个域来代理多个服务。免费或每月低至 5 美元（取决于您的需要）。

2）写你的代理。这可以用您选择的语言来完成 - Java（推荐 Play 框架）、PHP（推荐 CodeIgniter 框架）、Javascript（Node）、Ruby（Rails）等。您将要做的（从高层次）可能看起来喜欢：

```
- Read request. This would be a url you configure on the server app. 
  The url might look something like,  "http://yourdomain.net/get/mashup/{service1:yourfirstservice.com, service2:yournextservice.com,...}. 

- Parse the json into individual requests and load each of them from your server app. (The fastest way that I've found to complete this task is by using cURL's multi_init and multi_exec functions, via PHP. That said, Java and Ruby have equally powerful multi-threading capabilities).

- Put the results of each query into a json map.

- Once all responses come back, output the json response from your server and consume on your client side. 
```

无论如何，这就是我会做的。希望我的回答以一种或另一种方式有所帮助！

-布兰登

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-09T05:48:10.633

试试 Javascript，这里是示例代码

```
 <html>
  <head>
   <title>Hello World</title>
    <script language="JavaScript">
     function InitializeService(){
      service.useService(http://localhost/MyWebService.asmx?wsdl, "HelloWorldService");
      service.HelloWorldService.callService("HelloWorld");
     }
     function ShowResult(){
      alert(event.result.value);
     }
    </script>
   </head>
  <body onload="InitializeService()" id="service" 
        onresult="ShowResult()"> </body>
 </html> 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-04-09T05:56:35.827

您也可以使用 Jquery，但您访问的 Web 服务必须与发出请求的 jQuery 脚本位于同一域中。它必须遵守相同的域策略。

```
$(document).ready(function() {
    $('#Save').click(function() {
        $.ajax({
            url: "mydomain.com/test/ws/getData",
            type: "POST",
            dataType: "json",
            data: "{BizName:'" + BizName + "'}",
            contentType: "application/json; charset=utf-8",
            success: function(msg) {
                $('#status').html('Id: '+msg['d']['Id']);
            },
            error: function(e) {
                $('#status').innerHTML = "Unavailable";
            }
        });
    });
); 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-04-17T14:00:58.127

它是如此可能，但你需要一些 jquery、javascript、ajax

# php - 文本清理问题

> ID：15894128
> 
> 赞同：0
> 
> 时间：2013-04-09T05:42:50.760
> 
> 标签：php, javascript, jquery, html, sanitization

我将此代码添加到我的网站以进行文本清理：

```
var re = /(<([^>]+)>)/gi;
        for (i=0; i < arguments.length; i++){
        arguments[i].value=arguments[i].value.replace(re, "");
        } 
```

但不知何故，人们能够使用标签，仍然能够通过文本区域在我的网站上发布图片。如果我的代码有误，请告诉我。

PS：用户也摆脱了标签。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-09T07:45:26.287

maybe nothing wrong ,user just disable javascript before submit.

check in server side like

```
 $_POST['name'] = preg_replace('/<[^>]*>/', '', $_POST['name']); 
```

OR

```
 $_POST['name'] = strip_tags($_POST['name']); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-09T07:41:14.130

永远不要相信输入数据。用户可以简单地使用`curl`或其他东西，并将`HTTP POST`请求中包含他想要的任何数据的请求发送到您的服务器。因此，有一个规则来**验证服务器端的所有数据，**然后再将其保存到数据库中。

您可以引入客户端验证以改善用户体验，但无论如何您必须在收到请求时在服务器端验证该输入。

* * *

**更新：**

我看到你用`php`标签标记了你的问题，所以如果你的服务器端应用程序是用 PHP 编写的，你可以使用[HTML Purifier](http://htmlpurifier.org/)来清理输入数据并避免 XSS 等。另外，如果你使用一些 PHP 框架，它可能会有一个自己的 HTML Purifier 包装器。例如 Yii 框架就有它。

# mongodb - 查找查询中的 MONGO DB 别名使用不起作用

> ID：15894129
> 
> 赞同：0
> 
> 时间：2013-04-09T05:42:51.200
> 
> 标签：mongodb, alias

我正在使用以下命令在联系人集合中查找记录

```
db.contacts.find({"field1":"1"}) 
```

问题是我想将 field1 的别名用作 SL.NO

我试过这种方式，但它不起作用......

```
db.contacts.find({"field :n, as: :SL.NO" : "1"} 
```

任何人都可以在这个问题上帮助我吗？

顺便说一句，我目前正在使用 mongo 1.6.5

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-09T05:46:30.533

像 Mongoose 这样的一些驱动程序支持该功能，但 MongoDB 本身或 Mongo shell 中没有此类功能。

# c# - 在浏览器的两个选项卡上打开登录页面并依次登录，在第二个选项卡登录时间得到“页面未正确重定向”

> ID：15894132
> 
> 赞同：2
> 
> 时间：2013-04-09T05:43:04.077
> 
> 标签：c#, asp.net

可见的

我在页面中收到以下错误，并且页面没有正确重定向。

> Firefox 检测到服务器正在以永远不会完成的方式重定向对该地址的请求。

此问题有时可能是由禁用或拒绝接受 cookie 引起的。

当我在同一浏览器的两个选项卡上打开登录页面并通过第一个选项卡登录时生成错误，当我尝试登录第二个选项卡时，我收到此错误消息。

有人可以帮我解决这个错误吗？我想通过asp.net，c#来解决这个错误。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-09T05:47:01.660

要解决此问题，无需删除所有 cookie，只需删除与您的 google 和 youtube 帐户相关联的 cookie。**就是这样：**

```
- Click Tools/Options/Privacy

- Click "Remove Individual Cookies"

- In the Cookies Window type "accounts" (no quotes) into the Search box 
```

# shell - 在 awk 中按名称搜索列

> ID：15894142
> 
> 赞同：4
> 
> 时间：2013-04-09T05:44:05.940
> 
> 标签：shell, unix, awk

我有一个包含很多列的文件。让我们说“Employee_number”“Employee_name”“Salary”。我想通过给出全部或部分列名来显示列中的所有条目。例如，如果我输入“姓名”，我希望打印所有员工姓名。是否可以使用 awk 以简单的方式做到这一点？谢谢

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-09T06:13:50.843

给定一个脚本`getcol.awk`如下：

```
BEGIN {
    colname = ARGV[1]
    ARGV[1] = ""
    getline
    for (i = 1; i <= NF; i++) {
        if ($i ~ colname) {
            break;
        }
    }
    if (i > NF) exit
}

{print $i} 
```

...和输入文件`test.txt`：

```
apple   banana  candy   deer    elephant
A   B   C   D   E
A   B   C   D   E
A   B   C   D   E
A   B   C   D   E
A   B   C   D   E
A   B   C   D   E
A   B   C   D   E 
```

... 命令：

```
$ awk -f getcol.awk b <test.txt 
```

...给出以下输出：

```
B
B
B
B
B
B
B 
```

请注意，输出文本不包括测试文件的第一行，它被视为标题。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-04-09T07:53:30.353

Simple one-liner will do the trick:

```
$ cat file
a b c 
1 2 3
1 2 3
1 2 3

$ awk -v c="a" 'NR==1{for(i=1;i<=NF;i++)n=$i~c?i:n;next}n{print $n}' file
1
1
1

$ awk -v c="b" 'NR==1{for(i=1;i<=NF;i++)n=$i~c?i:n;next}n{print $n}' file
2
2
2

$ awk -v c="c" 'NR==1{for(i=1;i<=NF;i++)n=$i~c?i:n;next}n{print $n}' file
3
3
3  

# no column d so no output
$ awk -v c="d" 'NR==1{for(i=1;i<=NF;i++)n=$i~c?i:n;next}n{print $n}' file 
```

Note: as in your requirement you want `name` to match `employee_name` just be aware if you give `employee` you will get the last column matching `employee` this is easily changed however.

# android - java.lang.NoClassDefFoundError: com.google.android.gms.R$styleable 在 android

> ID：15894143
> 
> 赞同：13
> 
> 时间：2013-04-09T05:44:06.130
> 
> 标签：android, maps

我尝试了在 android 中显示谷歌地图 v2 的演示。

java代码是，

```
package com.example.gpslocator;

import android.os.Bundle;
import android.app.Activity;
import android.view.Menu;

public class MainActivity extends Activity {

@Override
protected void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.activity_main);
}

@Override
public boolean onCreateOptionsMenu(Menu menu) {
    // Inflate the menu; this adds items to the action bar if it is present.
    getMenuInflater().inflate(R.menu.main, menu);
    return true;
}    
} 
```

Xml 代码是，

```
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
android:orientation="vertical"
android:layout_width="fill_parent"
android:layout_height="fill_parent"
>

<fragment 
      android:id="@+id/map"
      android:layout_width="match_parent"
      android:layout_height="match_parent"
      android:name="com.google.android.gms.maps.MapFragment"/>
</LinearLayout> 
```

我在 manifest.xml 中添加了 API 密钥，

```
<?xml version="1.0" encoding="utf-8"?>
<manifest xmlns:android="http://schemas.android.com/apk/res/android"
package="com.example.gpslocator"
android:versionCode="1"
android:versionName="1.0" >

<uses-sdk
    android:minSdkVersion="3"
    android:targetSdkVersion="17" />

<uses-permission android:name="android.permission.INTERNET" />
<uses-permission android:name="android.permission.ACCESS_NETWORK_STATE" />
<uses-permission android:name="android.permission.WRITE_EXTERNAL_STORAGE" />
<uses-permission android:name="com.google.android.providers.gsf.permission.READ_GSERVICES" />
<!--
 The following two permissions are not required to use
 Google Maps Android API v2, but are recommended.
-->
<uses-permission android:name="android.permission.ACCESS_COARSE_LOCATION" />
<uses-permission android:name="android.permission.ACCESS_FINE_LOCATION" />

<permission
    android:name="com.example.mapdemo.permission.MAPS_RECEIVE"
    android:protectionLevel="signature" />

<uses-permission android:name="com.example.mapdemo.permission.MAPS_RECEIVE" />

<uses-feature
    android:glEsVersion="0x00020000"
    android:required="true" />

<application
    android:icon="@drawable/ic_launcher"
    android:label="@string/app_name"
    android:theme="@style/AppTheme" >
    <activity
        android:name="com.example.gpslocator.MainActivity"
        android:label="@string/app_name" >
        <intent-filter>
            <action android:name="android.intent.action.MAIN" />

            <category android:name="android.intent.category.LAUNCHER" />
        </intent-filter>
    </activity>

    <meta-data
        android:name="com.google.android.maps.v2.API_KEY"
        android:value="MY_API_KEY" />
</application>

</manifest> 
```

当我尝试运行我的应用程序时突然关闭。当我调试时，它向我显示了错误“java.lang.NoClassDefFoundError: com.google.android.gms.R$styleable”。我将 google-play-services.jar 文件添加到我的应用程序中。

logcat是，

```
04-09 05:33:53.677: E/Trace(1053): error opening trace file: No such file or directory (2)
04-09 05:33:53.807: W/ActivityThread(1053): Application com.example.gpslocator is waiting for the debugger on port 8100...
04-09 05:33:53.878: I/System.out(1053): Sending WAIT chunk
04-09 05:33:54.207: I/dalvikvm(1053): Debugger is active
04-09 05:33:54.288: I/System.out(1053): Debugger has connected
04-09 05:33:54.288: I/System.out(1053): waiting for debugger to settle...
04-09 05:33:54.487: I/System.out(1053): waiting for debugger to settle...
04-09 05:33:54.697: I/System.out(1053): waiting for debugger to settle...
04-09 05:33:54.897: I/System.out(1053): waiting for debugger to settle...
04-09 05:33:55.097: I/System.out(1053): waiting for debugger to settle...
04-09 05:33:55.297: I/System.out(1053): waiting for debugger to settle...
04-09 05:33:55.498: I/System.out(1053): waiting for debugger to settle...
04-09 05:33:55.708: I/System.out(1053): waiting for debugger to settle...
04-09 05:33:55.907: I/System.out(1053): waiting for debugger to settle...
04-09 05:33:56.167: I/System.out(1053): waiting for debugger to settle...
04-09 05:33:56.367: I/System.out(1053): debugger has settled (1344)
04-09 05:34:06.097: W/dalvikvm(1053): VFY: unable to resolve static field 867 (MapAttrs) in Lcom/google/android/gms/R$styleable;
04-09 05:34:06.097: D/dalvikvm(1053): VFY: replacing opcode 0x62 at 0x000e
04-09 05:40:21.278: D/AndroidRuntime(1053): Shutting down VM
04-09 05:40:21.278: W/dalvikvm(1053): threadid=1: thread exiting with uncaught exception (group=0x40a71930)
04-09 05:40:21.398: E/AndroidRuntime(1053): FATAL EXCEPTION: main
04-09 05:40:21.398: E/AndroidRuntime(1053): java.lang.NoClassDefFoundError: com.google.android.gms.R$styleable
04-09 05:40:21.398: E/AndroidRuntime(1053):     at com.google.android.gms.maps.GoogleMapOptions.createFromAttributes(Unknown Source)
04-09 05:40:21.398: E/AndroidRuntime(1053):     at com.google.android.gms.maps.MapFragment.onInflate(Unknown Source)
04-09 05:40:21.398: E/AndroidRuntime(1053):     at android.app.Activity.onCreateView(Activity.java:4716)
04-09 05:40:21.398: E/AndroidRuntime(1053):     at android.view.LayoutInflater.createViewFromTag(LayoutInflater.java:680)
04-09 05:40:21.398: E/AndroidRuntime(1053):     at android.view.LayoutInflater.rInflate(LayoutInflater.java:746)
04-09 05:40:21.398: E/AndroidRuntime(1053):     at android.view.LayoutInflater.inflate(LayoutInflater.java:489)
04-09 05:40:21.398: E/AndroidRuntime(1053):     at android.view.LayoutInflater.inflate(LayoutInflater.java:396)
04-09 05:40:21.398: E/AndroidRuntime(1053):     at android.view.LayoutInflater.inflate(LayoutInflater.java:352)
04-09 05:40:21.398: E/AndroidRuntime(1053):     at com.android.internal.policy.impl.PhoneWindow.setContentView(PhoneWindow.java:270)
04-09 05:40:21.398: E/AndroidRuntime(1053):     at android.app.Activity.setContentView(Activity.java:1881)
04-09 05:40:21.398: E/AndroidRuntime(1053):     at com.example.gpslocator.MainActivity.onCreate(MainActivity.java:12)
04-09 05:40:21.398: E/AndroidRuntime(1053):     at android.app.Activity.performCreate(Activity.java:5104)
04-09 05:40:21.398: E/AndroidRuntime(1053):     at android.app.Instrumentation.callActivityOnCreate(Instrumentation.java:1080)
04-09 05:40:21.398: E/AndroidRuntime(1053):     at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:2144)
04-09 05:40:21.398: E/AndroidRuntime(1053):     at android.app.ActivityThread.handleLaunchActivity(ActivityThread.java:2230)
04-09 05:40:21.398: E/AndroidRuntime(1053):     at android.app.ActivityThread.access$600(ActivityThread.java:141)
04-09 05:40:21.398: E/AndroidRuntime(1053):     at android.app.ActivityThread$H.handleMessage(ActivityThread.java:1234)
04-09 05:40:21.398: E/AndroidRuntime(1053):     at android.os.Handler.dispatchMessage(Handler.java:99)
04-09 05:40:21.398: E/AndroidRuntime(1053):     at android.os.Looper.loop(Looper.java:137)
04-09 05:40:21.398: E/AndroidRuntime(1053):     at android.app.ActivityThread.main(ActivityThread.java:5041)
04-09 05:40:21.398: E/AndroidRuntime(1053):     at java.lang.reflect.Method.invokeNative(Native Method)
04-09 05:40:21.398: E/AndroidRuntime(1053):     at java.lang.reflect.Method.invoke(Method.java:511)
04-09 05:40:21.398: E/AndroidRuntime(1053):     at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:793)
04-09 05:40:21.398: E/AndroidRuntime(1053):     at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:560)
04-09 05:40:21.398: E/AndroidRuntime(1053):     at dalvik.system.NativeStart.main(Native Method)
04-09 05:40:26.487: I/Process(1053): Sending signal. PID: 1053 SIG: 9 
```

在属性-->Android-->

![在此处输入图像描述](https://i.stack.imgur.com/xNlJB.png)

请任何人帮助我。我错过了任何参考吗？

* * *

## 回答 #1

> 赞同：29
> 
> 时间：2013-04-09T05:54:16.663

在此处查看答案：
[Google Maps Android API v2 - 示例代码崩溃](https://stackoverflow.com/questions/13733911/google-maps-android-api-v2-sample-code-crashes)
虽然问题列出了不同的异常，但答案特别提到了您的确切问题。

`google-play-services_lib`具体来说，作为**项目**导入很重要 ：
选择`File > Import > Android > Existing Android Code Into Workspace`并单击下一步。
选择浏览...，输入`[android-sdk-folder]/extras/google/google_play_services/libproject/google-play-services_lib`，然后单击完成。
（请参阅“示例代码”下的[https://developers.google.com/maps/documentation/android/intro](https://developers.google.com/maps/documentation/android/intro)
） 然后按照链接答案中的说明进行操作：

> *   导入“google-play-services_lib”项目的实际源并将其链接为 > **Android**库。
>     *   通过 Project -> Properties -> Android -> Library, Add -> google-play-services_lib 执行此操作（您可以右键单击您的项目并选择 Properties，然后选择 Android）。
>     *   不要通过您的项目的“Java 构建路径”**将**其添加为依赖项目，这对我不起作用。

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2013-04-22T21:59:17.043

检查`AndroidManifest.xml`您的 google-play-services_lib 项目的文件。应该：

```
package="com.google.android.gms" 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-05-24T06:15:24.017

导入**google-play-services_lib**时，选中“将项目复制到工作区”。这个对我有用！

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-06-14T15:40:35.627

我遇到了同样的问题，我可以通过右键单击 google-play-services_lib 项目并刷新来解决它。由于某种原因，该项目未与导致错误的 Eclipse 同步。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2014-05-21T12:55:35.670

我有同样的问题。

但我所做的是我使用了 com.google.android.gms 版本代码这个 3265130

而不是使用com.google.android.gms版本代码这个4452000，这是最新的，我不知道问题是什么但它对我有用。

[按照亚历山大给出的步骤]

可能适用于新的更新。

![在此处输入图像描述](https://i.stack.imgur.com/KpUyd.png)

可能适用于新的更新。

![在此处输入图像描述](https://i.stack.imgur.com/U996e.png)

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2013-05-05T20:14:43.843

项目的文件路径`google-play-services_lib`必须只有`[A-Z,a-z]`not `ÄÖÜ`。我已经把它移到`D:\google-play-services_lib\`了新的地方，然后它就可以工作了！

对不起我的英语不好 ;-）

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2013-09-02T11:31:49.877

将 google-play-services_lib 和演示项目都导入工作区；将 android-support-v4.jar 处理到演示项目下的“libs”文件夹；然后：项目属性->android->library”，然后添加 google-play-services_lib

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2014-01-11T16:08:18.130

查看 John Oleynik 的步骤：www.stackoverflow.com/a/15709686/20146。这对我有用。

* * *

## 回答 #9

> 赞同：0
> 
> 时间：2014-02-03T18:24:52.147

将项目 google-play-services_lib 导入 IDE 后，不要忘记检查其属性。google-play-services_lib 应使用您用于项目的相同版本的 Android SDK 构建。例如，您的项目和 google-play-services 都是使用 Android 4.4.2 构建的。之后，您应该会看到该库已正确构建。

最后，您应该将以下元标记添加到标记内的 AndroidManifest.xml 中`<application> ... </application>`：

```
<meta-data
        android:name="com.google.android.gms.version"
        android:value="@integer/google_play_services_version" /> 
```

* * *

## 回答 #10

> 赞同：0
> 
> 时间：2014-09-27T10:19:10.783

我对那张地图有很多问题。但最终成功，构建！我不使用eclipse，只使用**命令行**。首先，我认为我只是从 google-play-services_lib/libs 复制到 myProject/libs/ 文件并 ececute ant 调试......在 android 模拟器上安装后，我收到错误**java.lang.NoClassDefFoundError: com.google.android.gms。 R$styleable**

数小时后搜索解决方案：

1）首先我将目录 sdk/extras/google/.../google-play-services_lib 复制到我的 myProject 目录。

2）做一个`android update project --target <your target> -p myProject/google-play-services_lib`像用户dzeikei说的（检查目标exec `android list target`：）

3）编辑文件夹myProject中的文件“project.properties”，并在最后添加这一行 android.library.reference.1=google-play-services_lib 或执行`android update project --target android-19 --path myProject --library myProject/google-play-services_lib`

4) `ant clean`, `ant debug`.... 但有一些错误，例如返回 null 等（让人头疼）。但在那之后，蚂蚁在 myProject/google-play-services_lib 文件夹中创建 bin 和 gen 文件夹

5) 搜索了许多解决方案，以找出为什么 ant debug 返回错误，我最终将目录 bin 和 gen 从 myProject/google-play-services_lib/ 复制到 myProject/bin 和 myProject/gen

6）然后删除我之前在第 3 点添加的行#android.library.reference.1=google-play-services_lib，并将文件 myProject/google-play-services_lib/libs/google-play-services.jar 复制到myProject/libs/google-play-services.jar

7）执行`ant debug`

```
adb install -r bin/myProject-debug.apk 
```

最后在我的android模拟器上的projectApplication中看到了谷歌地图:)

当然还有其他东西，比如 API_KEY 或者我在编译项目之前完成的谷歌地图教程中的添加和权限。无需提示即可查看地图，例如。“安装 Goodle Play 服务”使用模拟器和已安装的谷歌服务。我使用了 AVD Manager 列表中的 Google API（Google Inc.）。我希望这对你有帮助。

# c - C 函数中的分段错误

> ID：15894144
> 
> 赞同：-4
> 
> 时间：2013-04-09T05:44:08.130
> 
> 标签：c, segmentation-fault

我正在尝试开发一个基本的外壳。对于那个 shell，我需要一个 C 函数来解析一个字符串。由于我是 CI 新手，我试图开发一个基本功能，但它给了我一个分段错误错误。请告诉我我错过了什么。

```
#include<string.h>
#include<stdio.h>

void parse(char *msg);
int main()
{
    char *msg =  "This is a message";
    parse(msg);
}

void parse(char *msg){
    char *mm;
    mm = msg;

    char *tok;
    tok = strtok(mm," ");
    while(tok == NULL){
        tok = strtok(NULL," ");
            printf("%s \n",tok);
    }
} 
```

错误消息（运行时）

```
Segmentation fault (core dumped) 
```

提前致谢

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-04-09T05:46:06.267

`msg`指向一个字符串文字，并且您正在尝试修改它。在 C 中，修改字符串文字是[未定义的行为](http://en.wikipedia.org/wiki/Undefined_behavior)（实际上，编译器通常将它们放在只读内存中）。

要修复，请`msg`转换为数组：

```
int main()
{
    char msg[] =  "This is a message";
    parse(msg);
} 
```

此外，您的`while`循环存在几个问题：

1) 条件错误；
2）第二个电话`strtok()`应该出现*在*.`printf()`

```
void parse(char *msg){
    char *mm = msg;
    char *tok = strtok(mm, " ");
    while (tok) {
        printf("%s \n",tok);
        tok = strtok(NULL," ");
    }
} 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-04-09T05:46:03.140

您不能可靠地修改字符串文字；它们通常是只读的（在您的情况下，显然是只读的）。尝试修改字符串文字会调用未定义的行为，这总是一件坏事™！

利用：

```
int main(void)
{
    char msg[] = "This is a message";
    parse(msg);
} 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-04-09T05:47:28.113

你的定义：

```
char *msg =  "This is a message"; 
```

制作`msg`为无法修改的常量字符字符串。但是`strtok`修改它。

您可能希望将其更改为

```
char *msg =  strdup("This is a message"); 
```

完成后不要忘记释放指针。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-04-09T05:54:08.953

随它去吧…………

```
#include<string.h>
#include<stdio.h>

void parse(char *msg);
int main()
{
    char msg[] =  "This is a message";
    parse(msg);
}

void parse(char *msg){
    char *mm;
    mm = msg;

    char *tok;
    tok = strtok(mm," ");
    while(tok != NULL){
        printf("%s \n",tok);
    tok = strtok(NULL," ");
    }
} 
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2013-04-09T05:46:21.170

也许代替

```
while(tok == NULL) 
```

你的意思是

```
while(tok != NULL) 
```

要不就

```
while (tok) // <- because in C, conditions are always compared to 0 
```

. 但是，给您带来分段错误的是`strtok`修改了传递的字符串，这就是为什么它需要一个*非常量*指针`char`（参见[http://linux.die.net/man/3/strtok](http://linux.die.net/man/3/strtok)）。因此，因为您传递了一个指向不可修改的字符串文字的指针，所以您会收到分段错误（这是您的*运气*；如果您不走运，此错误也可能会通过 QA 并投入生产）。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2013-04-09T05:48:10.187

如何将 tok==NULL 更改为 tok!=NULL

# php - jquery.keypad.js 不适用于动态添加的文本框

> ID：15894148
> 
> 赞同：0
> 
> 时间：2013-04-09T05:44:22.443
> 
> 标签：php, javascript, jquery

我正在使用 jquery.keypad.js 在用户可以选择的文本框中显示特殊字符（ÁÃÅÀ...）。文本框的第一个字段工作正常，当我通过单击“添加更多”按钮添加相同的文本字段时，它不起作用。我在单击“添加更多”后再次调用该函数，即使它不起作用。可能是什么问题？

```
$(function () {
        $('.keypadactive').keypad({keypadClass: 'flatKeypad',keypadOnly: false, 
             layout: [<? echo  utf8_encode("'ÁÃÅÀÂÄááåàâäÆæßÇçÐÉËÈÊéëèê', 'ÌÎÍÏìîíïÑñÒÔÖØÓÕðòôöøóõÚÜÙ' ,'ÛùûúüÝýÿÿ¡,°¹²³º¼½¾±µ', '£¥\$¢þ§©®¯·¨¬«»¦ª¶'");?> ], prompt: '',showOn: 'button', buttonImageOnly: true, buttonImage: 'images/spl.jpg'});
});

$('.add_more').live('click',function(){
    $(this).parent().parent().parent().parent().append($('#add_me_next').html());
    $(this).parent().html('<label class="w50">&nbsp;</label><input type="button" name="remove" value="Remove" class="button remove" />');

    setTimeout('keypadCall()',1000);

});

function keypadCall(){
    $('.keypadactive').keypad({keypadClass: 'flatKeypad',keypadOnly: false, 
                 layout: [<? echo  utf8_encode("'ÁÃÅÀÂÄááåàâäÆæßÇçÐÉËÈÊéëèê', 'ÌÎÍÏìîíïÑñÒÔÖØÓÕðòôöøóõÚÜÙ' ,'ÛùûúüÝýÿÿ¡,°¹²³º¼½¾±µ', '£¥\$¢þ§©®¯·¨¬«»¦ª¶'");?> ], prompt: '',showOn: 'button', buttonImageOnly: true, buttonImage: 'images/spl.jpg'});
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-09T05:53:40.097

尝试将事件委托给最近的父级，当 dom 准备好或`$(document)`它本身带有`.on()`处理程序时可用：

```
$(document).on('click', '.add_more', function(){
    $(this).parent().parent().parent().parent().append($('#add_me_next').html());
    $(this).parent().html('<label class="w50">&nbsp;</label><input type="button" name="remove" value="Remove" class="button remove" />');

    setTimeout(keypadCall,1000);

}); 
```

并尝试删除`()`from中的`keypadCall`函数`setTimeout()`。

# paypal - Pay Pal 定期付款集成

> ID：15894153
> 
> 赞同：0
> 
> 时间：2013-04-09T05:45:01.680
> 
> 标签：paypal

我有一个网站会定期收到客户的钱（比如一周一次）。我将我的客户详细信息存储在我的数据库中，我想从我的客户帐户中提取资金，而不是每次都提示他们进行身份验证。金额会因客户而异。我如何使用 pay pal 做到这一点？我是否需要购买 pay pal pro 来实现这一点。我阅读了一些与 pay pal 的定期付款和参考付款服务相关的文档，但我不知道我的业务将如何运作在澳大利亚注册的 pay pal 帐户。

提前致谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-09T05:56:09.970

我们最近（2013 年 1 月）为澳大利亚网站（贝宝账户）实施了与 PalPal 的定期支付集成。

我们用了;

*   PayFlow Pro（文档： [https](https://www.x.com/sites/default/files/payflowgateway_guide.pdf) ://www.x.com/sites/default/files/payflowgateway_guide.pdf ）
*   定期付款模块（文档：[https](https://www.x.com/sites/default/files/pp_payflowpro_recurringbilling_guide.pdf) ://www.x.com/sites/default/files/pp_payflowpro_recurringbilling_guide.pdf ）

我不能说这次经历是一次愉快的经历，大量的阅读、电话支持和拉扯——但我们最终到达了那里。

根据您的情况，我建议您查看 Pin 支付网关 ( [https://pin.net.au/](https://pin.net.au/) ) 作为替代方案。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-08-13T06:13:30.147

**您可以为此使用 PayPal 定期付款方式。**

正如您所说，您不希望在不再次对其进行身份验证的情况下从该帐户中提取资金，您必须通过**NVP API**（**CreateRecurringPaymentsProfile**）在贝宝上创建客户的订阅配置文件。

在您获得带有成功消息的客户的订阅 ID 后，您无需存储客户详细信息（卡详细信息），这样做也是非法的。

在调用

> API 的 CreateRecurringPaymentsProfile 方法

您需要设置以下字段。

```
BILLINGPERIOD = MONTH or DAY (according to your need)

BILLINGFREQUENCY = 2 (means after 2 BILLINGPERIOD )

TOTALBILLINGCYCLES = 10 
```

**例如：**如果 BILLINGPERIOD = MONTH & BILLINGFREQUENCY = 2 & TOTALBILLINGCYCLES = 10，则每 2 个月后将自动付款，直到完成 10 个付款周期。

```
You can also find the example code here :
http://paypal.github.io/sample-apps/ 
```

# jquery - jQuery 元素在滚动页面时淡出，在页面滚动时淡出

> ID：15894157
> 
> 赞同：8
> 
> 时间：2013-04-09T05:45:17.247
> 
> 标签：jquery, scroll, fadein, fadeout

我希望元素在滚动离开页面顶部时淡出，然后在滚动回页面时淡入。我写了一些有效的代码，但我正在寻找一个更优雅的解决方案。这是我在 jsfiddle 上工作的解决方案：http: [//jsfiddle.net/wmmead/JdbhV/3/](http://jsfiddle.net/wmmead/JdbhV/3/)

我想找到一段更短、更优雅的代码，但无法完全解决。也许有一个数组和 each() 方法？如果我在 div 上放置一个类而不是一个 ID，它会变得更短，但它们会立即消失。我希望每个框在滚动离开页面时淡出。

HTML

```
<div id="box1"></div>
<div id="box2"></div>
<div id="box3"></div>
<div id="box4"></div>
<div id="box5"></div>
<div id="box6"></div> 
```

CSS

```
#box1, #box2, #box3, #box4, #box5, #box6 {
  width: 100px;
  height: 100px;
  background: orange;
  margin:100px auto;
}
#box6 {
  margin-bottom:600px;
} 
```

jQuery

```
var box1Top = $('#box1').offset().top;
var box2Top = $('#box2').offset().top;
var box3Top = $('#box3').offset().top;
var box4Top = $('#box4').offset().top;
var box5Top = $('#box5').offset().top;
var box6Top = $('#box6').offset().top;

$(window).scroll(function () {
if ((box1Top - $(window).scrollTop()) < 20) {
    $('#box1').stop().fadeTo(100, 0);
} else {
    $('#box1').stop().fadeTo('fast', 1);
}

if ((box2Top - $(window).scrollTop()) < 20) {
    $('#box2').stop().fadeTo(100, 0);
} else {
    $('#box2').stop().fadeTo('fast', 1);
}

if ((box3Top - $(window).scrollTop()) < 20) {
    $('#box3').stop().fadeTo(100, 0);
} else {
    $('#box3').stop().fadeTo('fast', 1);
}

if ((box4Top - $(window).scrollTop()) < 20) {
    $('#box4').stop().fadeTo(100, 0);
} else {
    $('#box4').stop().fadeTo('fast', 1);
}

if ((box5Top - $(window).scrollTop()) < 20) {
    $('#box5').stop().fadeTo(100, 0);
} else {
    $('#box5').stop().fadeTo('fast', 1);
}
if ((box6Top - $(window).scrollTop()) < 20) {
    $('#box6').stop().fadeTo(100, 0);
} else {
    $('#box6').stop().fadeTo('fast', 1);
}
}); 
```

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-04-09T06:07:14.120

您可以使用jQuery`'[attr="someattr"]'`的方法来使用属性选择器：`.each()`

```
$(window).scroll(function () {
   $('[id^="box"]').each(function () { // <---loop the divs id starts with #box 
      if (($(this).offset().top - $(window).scrollTop()) < 20) { //<---mark the $(this).offset().top of current object
          $(this).stop().fadeTo(100, 0); //<----fadeOut the current obj
      } else {
          $(this).stop().fadeTo('fast', 1); //<----fadeIn the current obj
      }
   });
}); 
```

您可以在这里进行演示：

### [演示](http://jsfiddle.net/JdbhV/6/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-09T06:37:31.033

[由于以下几个原因，您的 jsfiddle 版本被认为更好](http://jsfiddle.net/thinkfast2008/JdbhV/8/)：

*   良好的功能分解（分解为小功能）：为您和其他编码人员提供更高的可读性，并且如果您需要更改某些内容，将来更易于维护。
*   灵活性：你可以改变盒子的数量，甚至不知道javascript！
*   效率：由于功能分解，这意味着每行代码只有在 100% 必要时才会被调用

除了 javascript，除了现有的 id 之外，我还添加了类。例如：`id="box1" class="box"`

请享用 ：）

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-09T05:54:41.803

好吧，我想只是为你所有的 div 设置一个类。而不是用#id调用每个

# jquery - 动画 scrollleft 与 ('html, body') 配合良好，但使用 ('#div') 会产生不希望的结果

> ID：15894160
> 
> 赞同：0
> 
> 时间：2013-04-09T05:45:35.110
> 
> 标签：jquery, jquery-animate

这是一个运行良好的[jsfiddle](http://jsfiddle.net/WuhW9/)，但我实际上只想滚动一个div而不是整个身体。这是我尝试过的一个[jsfiddle](http://jsfiddle.net/rEzEE/)，但它给出了不希望的结果。将 offset() 更改为 position() 但结果相同。

HTML 代码：

```
 <ul id="banner">
        <li> <a href="#1">1</a> 
        </li>
        <li> <a href="#2">2</a> 
        </li>
        <li> <a href="#3">3</a> 
        </li>
        <li> <a href="#4">4</a> 
        </li>
    </ul>
    <div id="wrapper">
    <div id="container">
            <div id="1" class="panel">1</div>
            <div id="2" class="panel">2</div>
            <div id="3" class="panel">3</div>
            <div id="4" class="panel">4</div>
    </div>
    </div>
</body> 
```

CSS 代码：

```
body {

    margin: 0 0 0 0;
}
.panel {
    width: 25%;
    height:100%;
    float:left;
    margin-top: 45px;

}
ul#banner {
    position: fixed;
    line-height: 45px;
    margin: 0 30px;
    padding: 0;
    z-index: 9;
}
ul#banner li {
    display: inline;
    z-index: 10;
}

#container {

    width: 400%;

}

#wrapper { width: 100%; overflow-x:hidden; } 
```

jQuery代码：

```
$(document).ready(function () {
    $("#banner a").bind("click", function (event) {
        event.preventDefault();
        var target = $(this).attr("href");
        $(" #wrapper").stop().animate({
            scrollLeft: $(target).offset().left,
            scrollTop: $(target).offset().top
        }, 1000);
    });
}); 
```

提前致谢。:)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-09T06:02:23.240

就快到了

您需要为容器而不是包装器设置动画，并且包装器需要`position:relative`在其 css中包含

```
#wrapper { width: 100%; overflow-x:hidden; position:relative;} 
```

和

```
$(document).ready(function () {
    $("#banner a").bind("click", function (event) {
        event.preventDefault();
        var target = $(this).attr("href");
        $("#container").stop().animate({
            left: $(target).offset().left,
            top: $(target).offset().top
        }, 1000);
    });
}); 
```

见[jsfiddle](http://jsfiddle.net/rEzEE/2/)

# iphone - iOS 5上的IOS App，当iphone升级到新版本时，app中的文件是否会改变

> ID：15894162
> 
> 赞同：1
> 
> 时间：2013-04-09T05:45:39.330
> 
> 标签：iphone, ios, objective-c, xcode

我正在 iOS 5 上编写一个 IOS 应用程序，当 iphone 操作系统升级到新的 IOS 时，应用程序中的文件是否会发生变化。如果是，如何检测和管理更改？

任何人都可以帮助。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-09T05:49:54.647

不，它不会改变。仅不推荐使用升级后的操作系统不支持的某些方法。

你的第二个问题，如何检测它？这是答案：

您将在不推荐使用方法的地方收到警告。

享受编程！

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-09T05:47:14.437

不，当 iPhone OS 升级到新的 IOS 时，它永远不会改变。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-09T06:13:02.907

存储在文档目录中的文件将在应用更新后保留

[http://developer.apple.com/library/mac/#documentation/FileManagement/Conceptual/FileSystemProgrammingGUIde/FileSystemOverview/FileSystemOverview.html](http://developer.apple.com/library/mac/#documentation/FileManagement/Conceptual/FileSystemProgrammingGUide/FileSystemOverview/FileSystemOverview.html)

> `<Application_Home>/Documents/` 使用此目录来存储重要的用户文档和应用程序数据文件。关键数据是您的应用程序无法重新创建的任何数据，例如用户生成的内容。该目录的内容可以通过文件共享提供给用户。此目录的内容由 iTunes 备份。

请参阅下面的答案以获取更多说明 [第一次应用程序更新，用户数据丢失（存储在 Documents 目录中）](https://stackoverflow.com/questions/5607655/first-app-update-user-data-lost-was-stored-in-documents-directory)

# java - 以下功能的测试用例

> ID：15894164
> 
> 赞同：1
> 
> 时间：2013-04-09T05:45:44.267
> 
> 标签：java, unit-testing, testing, junit

我不熟悉单元测试，但我在面试中遇到了这个问题。任何人都可以帮助我处理一些单元测试用例并解释它们的输出。我知道我们只需要传递参数但是有任何负面情况吗？

对使用以下参数的函数进行单元测试：
`reverseString(originalString, stringToBeReversed, stringReverseTo, max)`

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-09T05:56:16.767

```
reversestring(originalString, stringToBeReversed, stringReverseTo, max) 
```

您将需要一个用于测试用例的矩阵，您必须根据实现 evtl 测试空字符串、空值的字符串参数的每个组合。包含非英文值的字符串。

对于整数参数，负数、零数和正数，取决于最大值意味着什么，您应该测试一个超过最大 linit（如果存在）的大数。

提到的事情可能已经相互结合进行了测试。例如一个带有负整数的空原始字符串，这一切都取决于实现，如果你有这样一个循环，它有两个参数的组合条件，那么应该测试组合。

# google-app-engine - GAE - 邮件 API - 拨号限制

> ID：15894167
> 
> 赞同：-1
> 
> 时间：2013-04-09T05:45:56.157
> 
> 标签：google-app-engine, gae-quotas

根据[https://developers.google.com/appengine/docs/quotas#Mail](https://developers.google.com/appengine/docs/quotas#Mail) ，由第三方（我们中的任何人）开发并托管在 GA Cloud 中的 GAE 应用程序每天可以发送的消息限制为 20.000 条，对吧?

如果一个应用程序注册了 100,000 个最终用户并同意接收每日电子邮件通知怎么办？

GAE 不是这类应用程序的平台吗？我们必须寻找其他供应商吗？该应用程序是否必须使用诸如 mailchimp api 或类似的第三方服务来完成这项工作？

感谢：D。-

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2016-05-05T19:15:24.613

GAE 不再支持发送超过 100 封电子邮件，并且他们不会使用此表单请求增加您的配额。他们正在推动人们使用 SendGrid（为什么 SendGrid 特别不清楚）。不幸的是，它降低了 GAE 功能。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-09T06:55:20.740

他们有一个很好的小脚注，上面写着：

> 每天 20,000 条消息的新限制仅适用于 2012 年 12 月 14 日或之后创建的应用程序。在此日期之前创建的应用程序将不受此限制，即使它们在 12 月 14 日之后启用计费也是如此。

您可以通过转换一个旧的和未使用的 GAE 项目来发送电子邮件来解决这个问题。如果你没有，你可以问问你的朋友是否有。我认识的几乎每个人都至少有一两个死掉的 GAE 项目。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-09T10:15:46.923

您可以在此处请求增加配额：http: [//support.google.com/code/bin/request.py ?&contact_type=AppEngineCPURequest](http://support.google.com/code/bin/request.py?&contact_type=AppEngineCPURequest)

解释你在做什么以及为什么你需要更多的邮件配额。

# javascript - 将多维 javascript 数组传递到另一个页面

> ID：15894168
> 
> 赞同：1
> 
> 时间：2013-04-09T05:45:57.077
> 
> 标签：javascript, forms, multidimensional-array

我有一个像这样的多维数组

*   [0]字符串
*   [1]-->[0]字符串，[1]字符串，[2]字符串
*   [2]字符串
*   [3]字符串
*   [4]-->[0]字符串，[1]字符串，[2]字符串[3]字符串，[4]字符串，[5]**信息**

（我希望这是有道理的）

其中 [1] 和 [4] 本身就是数组，我可以像 myArray[4][5] 一样访问**INFO 。**

嵌套数组（[1] 和 [4]）的长度可以变化。

我使用这种方法在一个非常复杂的表单中存储、计算和分发数据。

并非所有存储在数组中的数据都进入输入字段，因此当调用表单的 post 方法时，并非所有数据都发送到下一页。

我想在下一页以与第一页相同的方式访问数组。

* * *

**想法：**

*方法一：*

我想我可以将所有数据加载到隐藏字段中，发布所有内容，然后在第二页上获取这些值并将它们全部加载回数组中，但这需要一百多个隐藏字段。

*方法二：*

我想我也可以使用 .join() 将整个数组连接成一个字符串，将其加载到一个输入中，发布它，然后使用 .split(",") 将其分解。但是如果我这样做，我不确定如何处理它的多维方面，以便我仍然能够访问第 2 页上的 myArray[4][5] 之类的 INFO。

我将使用 Javascript 访问数组，在第 1 页上输入的值将使用第 2 页上的 php 访问。

* * *

**我的问题是**有没有更好的方法来完成我需要的**，或者**我如何设置上面提到的方法 2？

* * *

* * *

**这解决了我的问题：**

```
var str = JSON.stringify(fullInfoArray);
sessionStorage.fullInfoArray = str;

var newArr = JSON.parse(sessionStorage.fullInfoArray);

alert(newArr[0][2][1]); 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-09T07:14:39.470

如果可能，您可以使用[`sessionStorage`](https://developer.mozilla.org/en-US/docs/DOM/Storage#sessionStorage)以下方法存储对象的字符串表示形式[`JSON.stringify()`](https://developer.mozilla.org/en-US/docs/JavaScript/Reference/Global_Objects/JSON/stringify)：

```
// store value
sessionStorage.setItem('myvalue', JSON.stringify(myObject));

// retrieve value
var myObject = JSON.parse(sessionStorage.getItem('myvalue')); 
```

请注意，`sessionStorage`可以存储多少有上限；我相信它大约是 2.5MB，所以你不应该轻易点击它。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-09T05:50:17.107

将数据保存在您的 PHP 会话中，每当您提交表单时，更新会话中的数据。您生成的每个页面都可以使用此数据生成。

或者

如果您使用的是现代浏览器，请使用 HTML5 localStorage。

或者

你可以继续你正在做的事情:)

# iphone - 如何正确添加这三个文件？“Default.png, Default-568h@2x.png, Default@2x.png”适用于 iPhone/iPad 通用应用程序？

> ID：15894176
> 
> 赞同：2
> 
> 时间：2013-04-09T05:46:27.530
> 
> 标签：iphone, ios, xcode, splash-screen, default.png

我在我的通用项目中为启动图像添加了“Default.png，Default-568h@2x.png，Default@2x.png”这三个文件，我有三个不同的图像，分辨率与苹果文档中提到的完全相同，对于iPad 768 * 1024 ，适用于 iphone-4s -> 320 * 480 ，适用于 iphone 5-> 640 * 1136。

但我的问题是，当我在 iphone4s-iphone5 上朗姆酒时，飞溅朗姆酒正确，但是当我在 Ipad 上运行时，Deafault.png 飞溅没有显示，而不是从 Default-568h@2x.png 引用。Default-568h@2x.png 显示在 iPad 上而不是 Deafault.png 并且图像在 ipad 上也变得模糊和缩小，因为 Deafault.png 没有显示。如何解决这个问题。

任何来自专家的想法或建议都将受到高度欢迎。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-04-09T06:10:48.493

对于通用应用程序，启动图像命名应该与此类似。

```
iPhone > Default~iPhone.png,Default@2x~iPhone.png & Default-568h@2x.png.
iPad > Default-Portrait~iPad.png,Default-Portrait@2x~iPad.png,Default-Landscape~iPad.png,Default-Landscape@2x~iPad.png 
```

有关图像分辨率的更多详细信息，请参阅以下链接

[http://developer.apple.com/library/ios/#documentation/userexperience/conceptual/mobilehig/IconsImages/IconsImages.html](http://developer.apple.com/library/ios/#documentation/userexperience/conceptual/mobilehig/IconsImages/IconsImages.html)

对于图像命名约定，请使用以下链接

[http://developer.apple.com/library/ios/#documentation/iphone/conceptual/iphoneosprogrammingguide/App-RelatedResources/App-RelatedResources.html](http://developer.apple.com/library/ios/#documentation/iphone/conceptual/iphoneosprogrammingguide/App-RelatedResources/App-RelatedResources.html)

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-04-09T05:55:46.917

1.  首先，我想建议，
2.  准备所有图片，
3.  从 Project Navigator 中选择 Project 并转到 Summary 并向下滚动出现此屏幕，然后右键单击该屏幕并从您的计算机中选择文件，它将自动复制到项目中，并且它也将输入 plist 文件中。
4.  如果您的应用程序是通用的，那么您必须同时为 iPhone 和 iPad 设置。` ![在此处输入图像描述](https://i.stack.imgur.com/OCeji.png)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-09T06:43:58.427

**请参阅应用程序启动（默认）图像**一章的官方文档： [应用程序启动（默认）图像](https://developer.apple.com/library/ios/documentation/iPhone/Conceptual/iPhoneOSProgrammingGuide/App-RelatedResources/App-RelatedResources.html#//apple_ref/doc/uid/TP40007072-CH6-SW12%3E)

只有您应该为启动图像设置一个具有相对大小的正确名称，然后将这些图像添加到项目中。Xcode 将帮助您在应用程序启动时正确显示它。

# java - 字符串函数无法正常工作

> ID：15894181
> 
> 赞同：1
> 
> 时间：2013-04-09T05:46:37.907
> 
> 标签：java

这是我的程序。它不应该打印以单词“LTP”开头的句子或包含单词“TRAILING”的句子，但它不会那样做……我不明白为什么。请帮帮我。

```
import java.io.*;

public class FileInputDemo {
    public static void main(String args[]) {
        // args.length is equivalent to argc in C
        try {
            // Open the file that is the first
            // command line parameter
            FileInputStream fstream = new FileInputStream(
                    "C:\\Documents and Settings\\work\\Desktop\\New Folder\\New Folder\\02Apr2013log1.txt");
            // Convert our input stream to a
            // DataInputStream
            DataInputStream in = new DataInputStream(fstream);
            // Continue to read lines while
            // there are still some left to read
            while (in.available() != 0) {
                String s=in.readLine();
                // Print file line to screen
            if(s.startsWith("LTP") || s.contains("TRAILING"))
            {
                continue;
            }

            System.out.println(in.readLine());
            }

            in.close();
        } catch (Exception e) {
            System.err.println("File input error");
        }
    }
} 
```

这是输出

```
Long trade Managers in list (from Limit removal process) 2
LTP 9708.0 Current Stop 9723.0 for Order ID BAA0001 Mode:- TRAILING
9711.0 9716.0 9707.0 9707.0 9710.62
BullishFactor [openBullishFactor=NEUTRAL, closeBullishfactor=BEARISH, closeToOpenFactor=MODERATE_BEARISH]
BarSharing [sharingType=LLLH, bodySharing=0.44]
LTP 9707.0 Current Stop 9717.0 for Order ID BAA0001 Mode:- TRAILING 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-09T05:49:59.790

不`System.out.println`应该打印字符串`s`吗？

```
 while (in.available() != 0) {
     String s=in.readLine();

     if(s.startsWith("LTP") || s.contains("TRAILING"))
     {
         continue;
     }

     System.out.println(s);
 } 
```

如果您要打印出来`in.readLine()`，那么您刚刚阅读的行（存储在 中`s`）之后的行可能包含“TRAILING”或以“LTP”开头。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-09T05:50:06.360

不再从行中读取`System.out.println(in.readLine());`. 它将读取下一行而不检查 LTP | TRAILING 在线可用。将其替换为`System.out.println(s);`

# python - Python的数学错误？

> ID：15894182
> 
> 赞同：78
> 
> 时间：2013-04-09T05:46:40.893
> 
> 标签：python, python-2.7, math

刚开始使用 Python，所以这可能是我的错误，但是......

我正在尝试 Python。我喜欢把它用作计算器，我正在慢慢学习一些教程。

我今天遇到了奇怪的事情。想查一下2013*2013，结果写错了，写了2013*013，得到了这个：

```
>>> 2013*013
22143 
```

我用计算器查了一下，22143是错误的答案！2013 * 13 应该是 26169。

为什么 Python 给我一个错误的答案？我的旧卡西欧计算器不这样做......

* * *

## 回答 #1

> 赞同：137
> 
> 时间：2013-04-09T05:47:41.670

因为八进制运算，013 实际上是整数 11。

```
>>> 013
11 
```

带有前导零，`013`被解释为以 8 为底的数字和 1*8 ¹ + 3*8 ⁰ = 11。

注意：此行为[在 python 3 中已更改](http://docs.python.org/release/3.0.1/whatsnew/2.6.html#pep-3127-integer-literal-support-and-syntax)。这是来自[PEP 3127的特别合适的引用](http://www.python.org/dev/peps/pep-3127/)

> 对于不熟悉类 C 语言的人来说，整数的默认八进制表示会默默地混淆。无意中创建具有错误值的整数对象是非常容易的，因为对于 Python 语言本身，'013' 意味着'十进制 11'，而不是'十进制 13'，这不是大多数人会赋予这个字面量的含义.

* * *

## 回答 #2

> 赞同：36
> 
> 时间：2013-04-09T05:52:22.703

`013`是一个八进制整数文字（相当于十进制整数文字`11`），由于前导 0。

```
>>> 2013*013
22143
>>> 2013*11
22143
>>> 2013*13
26169 
```

八进制整数文字以 . 开头`0`而十六进制整数文字以`0x`. 由于您遇到的确切困惑，Python 3 引发了 SyntaxError：

```
>>> 2013*013
  File "<stdin>", line 1
    2013*013
           ^
SyntaxError: invalid token 
```

并且需要`0o`或`0O`代替：

```
>>> 2013*0o13
22143
>>> 2013*0O13
22143 
```

* * *

## 回答 #3

> 赞同：7
> 
> 时间：2013-04-09T22:12:22.977

Python 的八进制文字的“前导零”语法是一个常见的问题：

```
Python 2.7.3
>>> 010
8 
```

Python 3.x 中的语法已更改[http://docs.python.org/3.0/whatsnew/3.0.html#integers](http://docs.python.org/3.0/whatsnew/3.0.html#integers)

* * *

## 回答 #4

> 赞同：5
> 
> 时间：2013-04-09T06:01:16.227

这主要只是扩展了@Wim 的答案，但是 Python 使用某些前缀表示整数文字的基础。如果没有前缀，整数将被解释为以 10 为基数。使用“0x”，整数将被解释为十六进制整数。完整的语法规范在这里，但如果你不熟悉形式语法，理解起来有点棘手：http: [//docs.python.org/2/reference/lexical_analysis.html#integers](http://docs.python.org/2/reference/lexical_analysis.html#integers)

该表本质上说，如果您想要一个长值（即超过正常 int 容量的值），请写下数字后跟字母“L”或“l”；如果您希望您的数字以十进制解释，请正常写入数字（不带前导 0）；如果您希望它以八进制解释，请在其前面加上“0”、“0o”或“0O”；如果你想要它是十六进制的，在它前面加上“0x”；如果你想要它是二进制的，在它前面加上“0b”或“0B”。

# ipad - ipad 缺少重叠注释

> ID：15894185
> 
> 赞同：0
> 
> 时间：2013-04-09T05:46:53.667
> 
> 标签：ipad, xamarin.ios, annotations, drawing

当我试图在 iPad 视图上绘制交叉线时，它会擦除​​前一行的重叠部分。我正在使用 setNeedsDisplayInRect() 方法来刷新图纸。请建议我克服这个问题。

我为此编写的代码是

我正在使用以下代码进行绘制：

```
context.MoveTo (penVertices [0].X, penVertices [0].Y);

for (int i = 1; i < penVertices.Count; i++) {

context.AddLineToPoint (penVertices [i].X, penVertices [i].Y);

}
context.StrokePath(); 
```

* * *

并使用下面的代码来显示该行

```
SetNeedsDisplayInRect(RectangleF.FromLTRB(minX - (lineWidth/2), minY - (lineWidth/2), maxX + (lineWidth/2), maxY + (lineWidth/2))); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-15T10:27:33.877

嗨，为了避免在重叠的地方擦除以前所做的注释，使用路径来绘制注释而不是简单的上下文。

# java - 编译带有异常错误/警告的 Java USB 程序

> ID：15894186
> 
> 赞同：-1
> 
> 时间：2013-04-09T05:46:56.797
> 
> 标签：java, usb, compiler-warnings, properties-file

我正在开发一个 USB 读取 Java 程序来获取连接的 USB 设备的名称。这是我写的代码：

```
import java.io.UnsupportedEncodingException;
import java.util.List;
import javax.usb.*;
import javax.usb.UsbDevice;
import javax.usb.UsbDisconnectedException;
import javax.usb.UsbException;
import javax.usb.UsbHostManager;
import javax.usb.UsbHub;
import javax.usb.UsbServices;

public class ListUsbDevices {
    public static void main(String[] args) throws SecurityException, UsbException, UnsupportedEncodingException, UsbDisconnectedException {
        UsbServices services = UsbHostManager.getUsbServices();
        UsbHub rootHub = services.getRootUsbHub();

        List<UsbDevice> devices = rootHub.getAttachedUsbDevices();
        if (devices.size() > 0) {
            System.out.println("USB devices found.");
        } else {
            System.out.println("No USB devices found.");
        }

        for (UsbDevice device : devices) {
            System.out.println("\tProduct String " + device.getProductString());
            System.out.println("\tManufacturer String " + device.getManufacturerString());
            System.out.println("\tSerial Number " + device.getSerialNumberString());
        }
    }
} 
```

当我编译这个程序时，它会显示这个警告：

> ```
> Note: ListUsbDevices.java uses unchecked or unsafe operations.
> Recompile with -Xlint:unchecked for details. 
> ```

我用 重新编译`-Xlint:unchecked`，它显示了这一点：

> ```
>  ListUsbDevices.java:21: warning: [unchecked] unchecked conversion
>      found   : java.util.L
>      required: java.util.List<javax.usb.UsbDevice>
>      List<UsbDevice> devices = rootHub.getAttachedUsbDevices();
>                                           ^. 
> ```

但是创建了类文件。

当我运行这个程序时，我得到了这个异常：

> ```
> Exception in thread "main" javax.usb.UsbException: Properties file
> javax.usb.properties not found. 
> ```

我该如何解决这个问题？如何在 Mac 中设置属性文件？我已经用这个设置了 CLASSPATH：

```
export CLASSPATH=.:/Users/sakkisetty/Documents/jsr80-1.0.1.jar 
```

但我不确定这是否有效。任何指针将不胜感激。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-09T06:03:23.690

属性文件通常是本机包的一部分。我什至不知道 OSX 的实现。

[javax.usb FAQ](http://javax-usb.sourceforge.net/faq.html#linux_imp_jar_file)中提供了如何为 Linux 设置它的示例。

# c# - 在后台以编程方式从控制台应用程序获取 PDF 打印输出

> ID：15894189
> 
> 赞同：1
> 
> 时间：2013-04-09T05:47:16.823
> 
> 标签：c#, .net

如何以编程方式从打印机获取 PDF 文件的打印输出？打印输出命令应该在不弹出任何额外对话框的情况下执行。

我正在使用控制台应用程序，需要在不使用任何 3rd 方库或工具的情况下执行此操作

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-09T06:28:46.163

按照@Freelancer 所写的内容，我使用以下方法，因为它使用 Adob​​e 的注册表设置来查找 Acrobat 阅读器可执行文件的路径，但它会以静默方式打印到默认打印机：

```
private void PrintPdf(string fileName)
{
    var hkeyLocalMachine = Registry.LocalMachine.OpenSubKey(@"Software\Classes\Software\Adobe\Acrobat");
    if (hkeyLocalMachine != null)
    {
        var exe = hkeyLocalMachine.OpenSubKey("Exe");
        if (exe != null)
        {
            var acrobatPath = exe.GetValue(null).ToString();

            if (!string.IsNullOrEmpty(acrobatPath))
            {
                var process = new Process
                {
                    StartInfo =
                    {
                        UseShellExecute = false,
                        FileName = acrobatPath,
                        Arguments = string.Format(CultureInfo.CurrentCulture, "/T {0}", fileName)
                    }
                };

                process.Start();
            }
        }
    }
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-09T05:52:36.620

.NET Framework 在 System.Diagnostics 命名空间中提供了可用于启动外部进程的类。我在几个项目中使用了以下代码来启动各种可执行文件，我们也可以使用它来启动 Adob​​e Acrobat Reader。

```
using System.Diagnostics;
using System.IO;
using System.Text;
using System.Threading;
private static void RunExecutable(string executable, string arguments) 
  {
   ProcessStartInfo starter = new ProcessStartInfo(executable, arguments);
   starter.CreateNoWindow = true;
   starter.RedirectStandardOutput = true;
   starter.UseShellExecute = false;
   Process process = new Process();
   process.StartInfo = starter;
   process.Start();
   StringBuilder buffer = new StringBuilder();
   using (StreamReader reader = process.StandardOutput) 
   {
    string line = reader.ReadLine();
    while (line != null) 
    {
     buffer.Append(line);
     buffer.Append(Environment.NewLine);
     line = reader.ReadLine();
     Thread.Sleep(100);
    }
   }
   if (process.ExitCode != 0) 
   {
    throw new Exception(string.Format(@"""{0}"" exited with ExitCode {1}. Output: {2}", 
executable, process.ExitCode, buffer.ToString());  
   }
  } 
```

**您可以通过将上述代码合并到您的项目中并按如下方式使用它来打印您的 PDF：**

```
string pathToExecutable = "c:\...\acrord32.exe";
RunExecutable(pathToExecutable, @"/t ""mytest.pdf"" ""My Windows PrinterName"""); 
```

**注意：**此代码属于[http://aspalliance.com/514_CodeSnip_Printing_PDF_from_NET.all](http://aspalliance.com/514_CodeSnip_Printing_PDF_from_NET.all)

您可以在此链接上关注此代码的所有讨论。

希望它有帮助。

# node.js - 在 JSHint 中禁用有关“require”功能的警告

> ID：15894193
> 
> 赞同：56
> 
> 时间：2013-04-09T05:47:30.013
> 
> 标签：node.js, require, jshint

我正在为 Node.js 编写一些代码，目前正在使用 JSHint 检查我的代码。但是，当我使用该`require`函数导入模块时，它会说：

> “要求”未定义。

如何抑制警告？

```
"use strict";
var express = require('express');   
var register = require('./routes/register'); 
```

* * *

## 回答 #1

> 赞同：89
> 
> 时间：2013-04-09T05:52:02.403

默认情况下，jshint 不知道 node.js 全局变量，您需要通知它。

将此评论添加到顶部：

`/* jshint node: true */`

* * *

## 回答 #2

> 赞同：63
> 
> 时间：2015-11-19T14:13:10.153

我们可以在 JSHint 的文件中设置`node`为全局环境变量`.jshintrc`

> 此选项定义当您的代码在 Node 运行时环境中运行时可用的全局变量。Node.js 是一个使用异步事件驱动模型的服务器端 JavaScript 环境。此选项还会跳过一些在浏览器环境中有意义但在 Node 中没有意义的警告，例如文件级 use strict pragma 和 console.log 语句。

欲了解更多信息[http://jshint.com/docs/options/#node](http://jshint.com/docs/options/#node)

```
{
   "node": true
} 
```

`'require' is not defined`, `'console' is not defined`,之类的错误`'module' is not defined`不会再出现

* * *

## 回答 #3

> 赞同：7
> 
> 时间：2014-03-20T03:16:09.437

您可以通过在文件中添加“require”来配置 JSHint `.jshintrc`。例如：

```
{
    "globals" : {
        "require": false
    }
} 
```

或者您只能通过以下方式为每个特定文件定义全局变量：

```
/* global require */ 
```

有关如何配置 JSHint 的更多信息，请阅读[JSHint 文档](http://www.jshint.com/docs/)

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2020-02-24T15:39:32.943

我偶然发现了这个答案，并且无法在 VSCode 中使用任何东西。我得到了这个工作：

1.  `Preferences: Open Settings (JSON)`通过命令面板窗口 (Ctrl-Shift-P)打开 JSON 设置文件。
2.  将此部分添加到`settings.json`文件中：

    `{ "jshint.options": { "esversion": 8, // This gets rid of some other warnings "node": true } }`

# java - matlab中bat算法的java版本

> ID：15894196
> 
> 赞同：3
> 
> 时间：2013-04-09T05:47:36.510
> 
> 标签：java, algorithm, matlab, random

我有一个 bat 算法的 Matlab 代码，我编写了这个算法的 java 版本 Bat 算法是一个简单的优化算法，用于找到任何函数的最小值这里是 matlab 代码和我的这个代码的 java 版本

我的这个算法的 java 版本找不到像 matlab 版本那样的最佳结果，我找不到将代码从 matlab 转换为 java 的错误在哪里

谁能帮助我我的错误在哪里？

```
import java.util.Random;

public class Bat
{
    private int n;
    private float A, r;
    private float Qmin, Qmax;
    private int d;
    private int NofGen;
    private float fmin;
    private int fminIndex;
    private float Fnew;
    private int loopCounter;

    private float Q[], V[][], Sol[][], UL_bound[][], fitness[], S[][], Best[];

    private Random myRand;

    public Bat(
            int NBats,
            float loudness,
            float pulseRate,
            float minFreq,
            float maxFreq,
            int NofGeneration,
            int dimension
            )
    {
        n = NBats;
        A = loudness;
        r = pulseRate;
        Qmin = minFreq;
        Qmax = maxFreq;
        NofGen = NofGeneration;
        d = dimension;

        S = new float[n][d];
        Best = new float[d];
        UL_bound = new float[2][d];

        //default bounds 
        for(int i = 0 ;  i < d ; i++)
        {
            UL_bound[0][i] = -10000;
            UL_bound[1][i] =  10000;
        }

        loopCounter = 0;
        myRand = new Random();

        Q = new float[n];
        for(int i = 0 ; i < n ; i++)
            Q[i] = 0;

        V = new float[n][d];
        for(int i = 0 ; i < n ; i++)
            for(int j = 0 ; j < d ; j++)
                V[i][j] = 0;

    }

    public void intial()
    {

        Sol = new float[n][d];
        for(int i = 0 ; i < n ; i++)
            for(int j = 0 ; j < d ; j++)
            {
                float t = myRand.nextFloat();
                //(upper -lower)*rand + lower
                Sol[i][j] = t * (UL_bound[1][j] - UL_bound[0][j]) + UL_bound[0][j];
            }

        fitness = new float[n];
        for(int i = 0 ; i < n ; i++)
            fitness[i] = function(Sol[i]);

        //finding fmin
        fmin = fitness[0];
        fminIndex = 0;
        for(int i = 0 ; i < n ; i++)
        {
            if (fitness[i] < fmin)
            {
                fmin = fitness[i];
                fminIndex = i;
            }
        }

        //setting best
        for(int j = 0 ; j < d ; j++)
            Best[j] = Sol[fminIndex][j];

    }

    public void start()
    {

        while(loopCounter < NofGen)
        {

            for(int i = 0 ; i < n ; i++)
            {

                Q[i] = Qmin + (Qmin - Qmax)* myRand.nextFloat();

                for(int j = 0 ; j < d ; j++)
                    V[i][j] = V[i][j] + (Sol[i][j]-Best[j])*Q[i];

                for(int j = 0 ; j < d ; j++)
                    S[i][j] = Sol[i][j] + V[i][j]; 

                Sol[i] = simpleBounds(Sol[i]);

                if(myRand.nextFloat() > r)          
                    for(int j = 0 ; j < d ; j++)
                        S[i][j] =  (float) (Best[j] + (.001 * myRand.nextFloat()) );

                Fnew = function(S[i]);

                if(Fnew <= fitness[i] && myRand.nextFloat() < A)
                {
                    for(int j = 0 ; j < d ; j++)
                        Sol[i][j] = S[i][j];

                    fitness[i] = Fnew;
                }

                if(Fnew <= fmin)
                {
                    fmin = Fnew;
                    for(int j = 0 ; j < d ; j++)
                        Best[j] = S[i][j];
                }

            }
            loopCounter++;

        }

    }

    public float[] simpleBounds(float p[])
    {
        for(int i = 0 ; i < d ; i++)
        {
            if(p[i] < UL_bound[0][i])
                p[i] = UL_bound[0][i];

            if(p[i] > UL_bound[1][i])
                p[i] = UL_bound[1][i];
        }
        return p;
    }
    float function(float p[])
    {
        // Sphere function with fmin=0 at (0,0,...,0)
        float sum = 0;
        for(int i = 0 ;  i < p.length  ; i++)
            sum = sum + p[i]*p[i];
        return sum;

    }
    public float printResult()
    {
        System.out.println("After " + loopCounter + "Repeats :");

        for(int i = 0 ; i < d ; i++)
            System.out.print(Best[i] + ", ");

        System.out.println ( "F(x)  = " + fmin);
        return fmin;
    }

    public void set_UL_Bound(int n, float L, float U)
    {
        if( n < d && n >= 0)
        {
            UL_bound[0][n] = L;
            UL_bound[1][n] = U;
        }
    }   

} 
```

这是matlab版本

```
function [best,fmin,N_iter]=bat_algorithm(para)
% Display help
 help bat_algorithm.m

% Default parameters
if nargin<1,  para=[20 1000 0.5 0.5];  end
n=para(1);      % Population size, typically 10 to 40
N_gen=para(2);  % Number of generations
A=para(3);      % Loudness  (constant or decreasing)
r=para(4);      % Pulse rate (constant or decreasing)
% This frequency range determines the scalings
% You should change these values if necessary
Qmin=0;         % Frequency minimum
Qmax=2;         % Frequency maximum
% Iteration parameters
N_iter=0;       % Total number of function evaluations
% Dimension of the search variables
d=5;           % Number of dimensions 
% Lower limit/bounds/ a vector
Lb=-3*ones(1,d);
% Upper limit/bounds/ a vector
Ub=6*ones(1,d);
% Initializing arrays
Q=zeros(n,1);   % Frequency
v=zeros(n,d);   % Velocities
% Initialize the population/solutions
for i=1:n,
  Sol(i,:)=Lb+(Ub-Lb).*rand(1,d);
  Fitness(i)=Fun(Sol(i,:));
end
% Find the initial best solution
[fmin,I]=min(Fitness);
best=Sol(I,:);

for t=1:N_gen, 
% Loop over all bats/solutions
        for i=1:n,
          Q(i)=Qmin+(Qmin-Qmax)*rand;
          v(i,:)=v(i,:)+(Sol(i,:)-best)*Q(i);
          S(i,:)=Sol(i,:)+v(i,:);
          % Apply simple bounds/limits
          Sol(i,:)=simplebounds(Sol(i,:),Lb,Ub);
          % Pulse rate
          if rand>r
          % The factor 0.001 limits the step sizes of random walks 
              S(i,:)=best+0.001*randn(1,d);
          end

     % Evaluate new solutions
           Fnew=Fun(S(i,:));
     % Update if the solution improves, or not too loud
           if (Fnew<=Fitness(i)) & (rand<A) ,
                Sol(i,:)=S(i,:);
                Fitness(i)=Fnew;
           end

          % Update the current best solution
          if Fnew<=fmin,
                best=S(i,:);
                fmin=Fnew;
          end
        end
        N_iter=N_iter+n;
end
% Output/display
disp(['Number of evaluations: ',num2str(N_iter)]);
disp(['Best =',num2str(best),' fmin=',num2str(fmin)]);

% Application of simple limits/bounds
function s=simplebounds(s,Lb,Ub)
  % Apply the lower bound vector
  ns_tmp=s;
  I=ns_tmp<Lb;
  ns_tmp(I)=Lb(I);

  % Apply the upper bound vector 
  J=ns_tmp>Ub;
  ns_tmp(J)=Ub(J);
  % Update this new move 
  s=ns_tmp;

function z=Fun(u)
% Sphere function with fmin=0 at (0,0,...,0)
z=sum(u.^2);
%%%%% ============ end ==================================== 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2014-07-09T07:39:32.383

*   两个代码之间的差异

在 Matlab 代码中：

> S(i,:)=最佳+0.001*randn(1,d)；

randn=>**标准正态分布。**

在 Java 代码中：

> S[i][j] = (float) (Best[j] + (.001 * myRand.nextFloat()) );

java.util.Random.nextFloat()=> 0.0 到 1.0 之间**均匀分布**的浮点值。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2015-06-23T15:08:09.910

我一直在寻找 C# 中的解决方案并偶然发现了这一点。这足以完成工作。这是从 java 中翻译过来的 C# 解决方案，其中变量重命名，以及一个额外的适应度函数，用于找到两个 x,y 方程 xy=6 和 x+y = 5 的解。还包括找到 .3 的平方根：

```
 using System;

    namespace BatAlgorithmC

    namespace BatAlgorithmC
    {
        class Program
        {
            static void Main(string[] args)
            {
           //     Mybat x = new Mybat(100, 1000, 0.5, 0.5, 5, Mybat.sphere);
        //      Mybat x = new Mybat(1000, 1000, 0.5, 0.5, 1, Mybat.squareRoot);

            Mybat x = new Mybat(1000, 1000, 0.5, 0.5, 2, Mybat.RootOfXYEquations);
                Console.WriteLine("Hit any key to continue.");
                Console.ReadLine();

            }

        }

        public class Mybat
        {
    /**
     * @param args the command line arguments
     */
            public int _numberOfBats, _generations, Qmin, Qmax, N_iter, _dimension;
            public double _volume, _pulseRate, min, max, fnew, fmin;
            public double[][] _lowerBound, _upperBound, _velocity, _solution, S;
            public double[] _fitness, _tempSolution, _bestSolution, Q;
            public Random random;
    //public static void main(String[] args) {
    //   Mybat x = new Mybat(20,1000,0.5,0.5,5, Mybat.sphere);

    //}

            public static void initJagged(double[][] array, int n, int d)
            {
                for (int i = 0; i < n; i++) array[i] = new double[d];
            }

            public Mybat(
                int bats,
                int generations,
                double loud,
                double pulse,
                int dimension,
                Func<double[], int, double> function
                )
            {
                //initialization of variables
                _numberOfBats = bats;
                _generations = generations;
                _volume = loud;
                _pulseRate = pulse;
                _dimension = dimension;

                Random random = new Random();

                //plan to change later and added as parameter
                min = -15;
                max = 15;

                fmin = 0;
                //decleration for the bounds
                _lowerBound = new double[1][];
                _upperBound = new double[1][];

                Q = new double[_numberOfBats]; // frequency
                _velocity = new double[_numberOfBats][]; //velocity

                initJagged(_velocity, _numberOfBats, _dimension);
                initJagged(_lowerBound, 1, _dimension);
                initJagged(_upperBound, 1, _dimension);

                //initialize solution array 
                _solution = new double[_numberOfBats][];
                S = new double[_numberOfBats][];
                _fitness = new double[_numberOfBats]; // fitness container
                _bestSolution = new double[_dimension];
                _tempSolution = new double[_dimension]; //temporary holder for a row in array _solution

                initJagged(_solution, _numberOfBats, _dimension);
                initJagged(S, _numberOfBats, _dimension);

                for (int i = 0; i < _numberOfBats; i++)
                {
                    // for minimal coding : added initialize Q[]array with '0' as element
                    Q[i] = 0;

                    for (int x = 0; x < _dimension; x++)
                    {
                        // for minimal coding : added initialize _velocity[][] array with '0' as element
                        _velocity[i][x] = 0;

                        //find random double values from LB to UB
                        _solution[i][x] = (random.NextDouble()*(max - min)) + min;
                        _tempSolution[x] = _solution[i][x];
                        //Console.WriteLine("sol["+i+"]["+x+"] = "+_solution[i][x]); //test line
                        //Console.WriteLine(rand.nextDouble()); //test line
                    }
                    _fitness[i] = function(_tempSolution, _dimension);

                    //initialize best and the fmin
                    if (i == 0 || fmin > _fitness[i])
                    {
                        fmin = _fitness[i];

                        for (int x = 0; x < _dimension; x++)
                        {
                            _bestSolution[x] = _solution[i][x];
                        }
                    }
                    Console.WriteLine("fitness[" + i + "]" + _fitness[i]); //test
                }
                Console.WriteLine("fmin = " + fmin); //test

                // special note to these variables (below)
                // change if required for maximum effectivity
                Qmin = 0;
                Qmax = 2;
                N_iter = 1; //number of function evaluation

                // bat proper
                for (int loop = 0; loop < N_iter; loop++)
                {
                    // loop over all bats/solutions
                    for (int nextBat = 0; nextBat < _numberOfBats; nextBat++)
                    {
                        Q[nextBat] = Qmin + ((Qmin - Qmax)*random.NextDouble());

                        // loop for velocity
                        for (int vel = 0; vel < _dimension; vel++)
                        {
                            _velocity[nextBat][vel] = _velocity[nextBat][vel] +
                                                      ((_solution[nextBat][vel] - _bestSolution[vel])*Q[nextBat]);
                        }

                        //new solutions
                        for (int nextDimension = 0; nextDimension < _dimension; nextDimension++)
                        {
                            S[nextBat][nextDimension] = _solution[nextBat][nextDimension] +
                                                        _velocity[nextBat][nextDimension];
                        }

                        /**
                 * RESERVED SPOT for the QUESTIONABLE AREA ON THE 
                 * MATLAB CODE (i think it is not needed for the java equivalent)
                 */

                        // pulse rate
                        if (random.NextDouble() > _pulseRate)
                        {
                            for (int nextDimension = 0; nextDimension < _dimension; nextDimension++)
                            {
                                S[nextBat][nextDimension] = _bestSolution[nextDimension] + (0.001*random.NextGaussian());
                            }
                        }

                        //putting current row of _solution to a temp array
                        for (int nextDimension = 0; nextDimension < _dimension; nextDimension++)
                        {
                            _tempSolution[nextDimension] = S[nextBat][nextDimension];
                        }
                        fnew = function(_tempSolution, _dimension);

                        // update if solution is improved, and not too loud
                        if ((fnew <= _fitness[nextBat]) && (random.NextDouble() < _volume))
                        {
                            for (int x = 0; x < _dimension; x++)
                            {
                                _solution[nextBat][x] = S[nextBat][x];
                                _fitness[nextBat] = fnew;
                            }
                        }

                        //update current best solution
                        if (fnew <= fmin)
                        {
                            for (int nextDimension = 0; nextDimension < _dimension; nextDimension++)
                            {
                                _bestSolution[nextDimension] = S[nextBat][nextDimension];
                                fmin = fnew;
                            }
                        }
                    }
                }

                Console.WriteLine(" ");
                Console.WriteLine("new fitness");
                for (int i = 0; i < _numberOfBats; i++)
                {
                    Console.WriteLine("fitness[" + i + "]" + _fitness[i]);
                }

                for (int nextDimension = 0; nextDimension < _dimension; nextDimension++)
                {
                    Console.WriteLine("best[" + nextDimension + "]" + _bestSolution[nextDimension]);
                }
                Console.WriteLine("Fmin = " + fmin);
            }

    //possible that this function is not needed in java
            public void set_bounds(int x, double L, double U)
            {
                //double temp_Lb[x];
                //double temp_Ub[x];
                for (int i = 0; i < x; i++)
                {
                    _lowerBound[0][i] = L;
                    _upperBound[0][i] = U;
                }
            }

            public static double sphere(double[] value, int d)
            {
                // sphere function where fmin is at 0
                double result = 0;

                for (int i = 0; i < d; i++)
                {
                    result += (value[i]*value[i]);
                }
                return result;
            }

            public static double squareRoot(double[] value, int d)
            {
                // find the square root of .3
                double result = 0;

                for (int i = 0; i < d; i++)
                {
                    result += Math.Abs(.3 - (value[i]*value[i]));
                }
                return result;
            }

    public static double RootOfXYEquations(double[] value, int d)
    {
        // solve for x and y  xy = 6  and x+y = 5
        double result = 0;

        result += Math.Abs(5 - (value[0] + value[1]));
        result += Math.Abs(6 - (value[0] * value[1]));

        return result;
    }
        }

        static class MathExtensiionns
        {
            public static double NextGaussian(this Random rand)
            {
            double u1 = rand.NextDouble(); //these are uniform(0,1) random doubles
            double u2 = rand.NextDouble();
            double mean = 0, stdDev = 1;
            double randStdNormal = Math.Sqrt(-2.0 * Math.Log(u1)) *
                         Math.Sin(2.0 * Math.PI * u2); //random normal(0,1)
            double randNormal =
                         mean + stdDev * randStdNormal; //random normal(mean,stdDev^2)
            return randNormal;
            }
        }
    } 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2015-01-15T19:13:16.597

这将是我第一次在这里堆栈溢出，所以如果我的回答有点模棱两可并且有很多问题，我会事先说抱歉。我只是希望我的这个答案能帮助这个线程上想要通过java学习蝙蝠算法的未来访问者。

无论如何，我确实看过你的代码，因为我目前正在研究蝙蝠算法。尝试运行它，与 matlab 版本相比，它确实给出了很远的结果。

我注意到的是，您只是“从字面上”尝试在没有完全理解每个 matlab 行的情况下转换 matlab 代码。我想指出你错过的所有东西，但我现在感觉很懒，所以我将把我的 bat 算法版本留在 java 中。

注意：我刚刚在 java 中制作了一个运行中的 bat 算法。不是一个高效的、完全调试的、matlab 的 java 等效 bat 算法。

```
import java.util.Random;

 public class Mybat {

/**
 * @param args the command line arguments
 */
public int n, N_gen, Qmin, Qmax, N_iter, d;
public double A,r,min,max,fnew,fmin;
public double Lb[][],Ub[][],Q[],v[][],Sol[][],S[][],fitness[],temp[],best[];
public Random random;
public static void main(String[] args) {
   Mybat x = new Mybat(20,1000,0.5,0.5,5);

}

public Mybat(
        int bats,
        int generations,
        double loud,
        double pulse,
        int dimension
        ){

    //initialization of variables
    n=bats;
    N_gen = generations;
    A = loud;
    r = pulse;
    d = dimension;

    Random rand = new Random();

    //plan to change later and added as parameter
    min = -15;
    max = 15;

    fmin = 0;
        //decleration for the bounds
    Lb = new double[1][d];
    Ub = new double[1][d];

    Q = new double[n]; // frequency
    v = new double[n][d]; //velocity

    //initialize solution array 
    Sol = new double[n][d];
    S = new double[n][d];
    fitness = new double[n]; // fitness container
    best =new double[d];
    temp = new double[d];  //temporary holder for a row in array Sol

    for(int i=0;i<n;i++){

        // for minimal coding : added initialize Q[]array with '0' as element
        Q[i] = 0;

        for(int x=0;x<d;x++){

            // for minimal coding : added initialize v[][] array with '0' as element
            v[i][x] = 0;

            //find random double values from LB to UB
            Sol[i][x]= (rand.nextDouble()*(max - min)) + min;
            temp[x] = Sol[i][x];
            //System.out.println("sol["+i+"]["+x+"] = "+Sol[i][x]); //test line
            //System.out.println(rand.nextDouble()); //test line
        }
        fitness[i] = function(temp);

        //initialize best and the fmin
        if(i==0 || fmin > fitness[i]){
            fmin = fitness[i];

            for(int x=0;x<d;x++){
                best[x] = Sol[i][x];
            }
        }
        System.out.println("fitness["+i+"]"+fitness[i]); //test
    }
    System.out.println("fmin = "+fmin); //test

        // special note to these variables (below)
        // change if required for maximum effectivity
    Qmin = 0;
    Qmax = 2;
    N_iter = 1; //number of function evaluation

    // bat proper
    for(int loop=0;loop<N_iter;loop++){

        // loop over all bats/solutions
        for(int i=0;i<n;i++){
            Q[i] = Qmin+((Qmin-Qmax)*rand.nextDouble());

            // loop for velocity
            for(int vel=0;vel<d;vel++){
                v[i][vel] = v[i][vel]+((Sol[i][vel]-best[vel])*Q[i]);  
            }

            //new solutions
            for(int x=0;x<d;x++){
                S[i][x] = Sol[i][x] + v[i][x];
            }

            /**
             * RESERVED SPOT for the QUESTIONABLE AREA ON THE 
             * MATLAB CODE (i think it is not needed for the java equivalent)
             */

            // pulse rate
            if(rand.nextDouble()>r){
                for(int x=0;x<d;x++){
                    S[i][x] = best[x]+(0.001*rand.nextGaussian());
                }
            }

            //putting current row of Sol to a temp array
            for(int x=0;x<d;x++){
                temp[x] = S[i][x];
            }
            fnew = function(temp);

            // update if solution is improved, and not too loud
            if((fnew<=fitness[i]) && (rand.nextDouble()<A)){
                for(int x=0;x<d;x++){
                    Sol[i][x] = S[i][x];
                    fitness[i] = fnew;
                }
            }

            //update current best solution
            if(fnew<=fmin){
                for(int x=0;x<d;x++){
                    best[x] = S[i][x];
                    fmin = fnew;
                }
            }
        }

    }

    System.out.println(" ");
    System.out.println("new fitness");
    for(int i=0;i<n;i++){

        System.out.println("fitness["+i+"]"+fitness[i]);
    }
    System.out.println("Fmin = "+fmin);
}

//possible that this function is not needed in java
public void set_bounds(int x, double L, double U){
    //double temp_Lb[x];
    //double temp_Ub[x];
    for(int i=0; i<x; i++){
        Lb[0][i] = L;
        Ub[0][i] = U;
    }

}

public double function(double value[]){
    // sphere function where fmin is at 0
    double result = 0;

    for(int i=0;i<d;i++){
        result += (value[i]*value[i]);
    }
    return result;
}

} 
```

# cordova - 使用 phonegap 检查设备的互联网连接

> ID：15894201
> 
> 赞同：6
> 
> 时间：2013-04-09T05:47:54.060
> 
> 标签：cordova, phonegap-plugins, cordova-2.0.0

尝试使用 cordova 2.0.0 并使用此代码检查互联网连接

```
document.addEventListener("deviceready", onDeviceReady(), false);

function onDeviceReady() {
    alert("ready");
    db = window.openDatabase("loginintro", "1.0", "loginintro", 1000000);
    db.transaction(populateDB, errorCB, successCB);
    checkConnection();
}
function checkConnection()
{   alert("connection");
    network = navigator.network.connection.type;
    alert("fdfd");
    var states = {};
    states[Connection.UNKNOWN]  = 'Unknown connection';
    states[Connection.ETHERNET] = 'Ethernet connection';
    states[Connection.WIFI]     = 'WiFi connection';
    states[Connection.CELL_2G]  = 'Cell 2G connection';
    states[Connection.CELL_3G]  = 'Cell 3G connection';
    states[Connection.CELL_4G]  = 'Cell 4G connection';
    states[Connection.NONE]     = 'No network connection';
    alert('Connection type: ' + states[networkState]);
} 
```

但在这条线上出现错误

```
network = navigator.network.connection.type; 
```

错误是：

```
04-09 15:20:23.989: E/Web Console(13329): Uncaught TypeError: Cannot read property 'connection' of undefined at file:///android_asset/www/js/lib/helloworldjs/alldatabse.js:14
04-09 15:20:39.419: E/CordovaWebView(13329): CordovaWebView: TIMEOUT ERROR!
04-09 15:20:39.419: D/Cordova(13329): CordovaWebViewClient.onReceivedError: Error code=-6 Description=The connection to the server was unsuccessful. URL=file:///android_asset/www/index.html 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-09T07:57:18.603

您在代码中有小错误。应该是 alert('Connection type: ' + states[network]);

此外，请确保您拥有以下权限：

安卓

应用程序/res/xml/plugins.xml

```
<plugin name="NetworkStatus" value="org.apache.cordova.NetworkManager" /> 
```

应用程序/AndroidManifest.xml

```
<uses-permission android:name="android.permission.INTERNET" />
<uses-permission android:name="android.permission.ACCESS_NETWORK_STATE" />
<uses-permission android:name="android.permission.READ_PHONE_STATE" /> 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2014-01-10T10:43:59.293

API 已更改，您应该参考 navigator.connection。

```
network = navigator.connection.type; 
```

然后，看[本卡的回答](https://stackoverflow.com/questions/17767933/cordova-3-0-android-connection-is-not-defined)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2016-03-23T00:26:09.953

我在使用最新版本的科尔多瓦时遇到了这个问题。我在 config.xml 中有网络插件，但它没有下载到插件目录中。

这修复了它

科尔多瓦插件添加科尔多瓦插件网络信息科尔多瓦构建

存储库名称已更改，以防您习惯：

cordova 插件添加 org.apache.cordova.network-information

# javascript - 如何使用 jQuery 执行添加功能

> ID：15894203
> 
> 赞同：-2
> 
> 时间：2013-04-09T05:48:00.810
> 
> 标签：javascript, jquery, html

我是 JavaScript 新手，我需要执行一个函数！基本上场景是什么，有两个元素用来增加和减少一个数值。该值显示在元素中。我已经展示了元素所在的图像！如何使用 JavaScript 做到这一点？

![在此处输入图像描述](https://i.stack.imgur.com/Jk9jz.png)

更新 ：

我为元素单击事件编写了以下 jQuery 函数。但是当我单击元素时结果不会改变。

```
 jQuery(document).ready(function(){
        jQuery(".amount-increase").click(function(
            var amount = parseInt($(".bill-item-amount span")text(),10);
            amount = amount + 1;
            $(".bill-item-amount span").text(amount);
        ));
    }); 
```

这是 HTML 元素映射。

```
 <div class="bill-item-description">
 <!-- Section for Item description and pricing -->
 <div class="bill-item-name">
 <p class="bill-item-name-left">Normal Cofee</p><p class="bill-item-name-right">170.00</p>
 <div class="clear"></div>
 </div>
 <div class="bill-item-price">
 <span>170.00 USD</span>
 </div>
 <div class="bill-item-amount">
 <span>2</span>
 </div>
 </div>
 <div class="bill-amount-selection">
 <!-- Section where the increment & decrement of item amount goes -->
 <a class="amount-increase" href="#"></a>
 <a class="amount-decrease" href="#"></a>
 </div> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-09T06:06:39.640

假设您从某个地方获取值，或者您可以从 0 开始并相应地添加，它还有很多其他的东西，但是使用 jQuery 很容易。

[http://jsfiddle.net/6hMfj/](http://jsfiddle.net/6hMfj/)

HTML

```
<div id="box1">1</div>
<a href="#" id="increase1">Click</a> 
```

带有 jQ​​uery 的 JavaScript

```
var x = 0; //<?php echo '$num' ?> or default setting or something
$("#increase1").click(function() {
    // This assumes you get value from database as number
    x+=1;
    $("#box1").html(x);
}); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-09T06:13:12.800

根据您显示的图像，有两个侧面图像，向上和向下显示..

[http://jsfiddle.net/6hMfj/](http://jsfiddle.net/6hMfj/)

向上使用一个 div(name :up) 来增加值并使用以下代码：

```
***var x = 0; 
$("#up").click(function() 
{    
    x+=1;
    $("#box1").html(x);
});*** 
```

使用另一个 div(name :down) 向下并使用此代码

```
***var x = 0; 
$("#up").click(function() 
{    
    x-=1;
    $("#box1").html(x);
});*** 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-09T07:26:15.253

```
$(document).ready(function(){
var s1=170;
$("amt_in").click(function(){
  s1=s1+1;
  document.getElementById("price").value=s1;
  });
$("amt_de").click(function(){
  s1=s1-1;
  document.getElementById("price").value=s1;
  });

  }); 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-04-09T07:56:56.167

[http://jsfiddle.net/Praveen16oct90/QkgzB/](http://jsfiddle.net/Praveen16oct90/QkgzB/)

看看这个..为你创建的......

```
 $(document).ready(function()
        {
        var x=2;
                $("#increase").click(function()
                {

                        x+=1;
                        $("#price").html(x);

                });

        }); 
```

# java - UDFRowSequence 不起作用

> ID：15894205
> 
> 赞同：0
> 
> 时间：2013-04-09T05:48:07.760
> 
> 标签：java, hadoop, mapreduce, hive, user-defined-functions

我正在尝试使用自动增量UDF（[http://svn.apache.org/repos/asf/hive/trunk/contrib/src/java/org/apache/hadoop/hive/contrib/udf/UDFRowSequence.java](http://svn.apache.org/repos/asf/hive/trunk/contrib/src/java/org/apache/hadoop/hive/contrib/udf/UDFRowSequence.java)）

使用此 UDF 时出现错误。

错误 ：

在 Hive 控制台上 -

```
Exception in Thread 60 - Java nullpointer exception

On Hadoop Web Ui - Error in configuring Object .....caused by java,reflect.Invocation.. 
```

有人用过这个UDF吗？我想知道这个 UDF 是否在 Map Phase 中运行，那么它将如何为每一行提供唯一的数字？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-09T07:23:06.847

它对我来说很好。你是如何执行它的？

正如我所看到的，它启动了一个映射器进程，这就是为什么它可以为每一行提供唯一的数字。

# yii - 在 Yii 框架中测试数据库连接

> ID：15894213
> 
> 赞同：0
> 
> 时间：2013-04-09T05:48:25.713
> 
> 标签：yii

以下命令会产生错误。并且现在只与 yii 合作了 4 天..请帮助解决这个问题。

```
C:\wamp\www\yii\trackstar\protected\tests\unit>phpunit DbTest.php
'phpunit' is not recognized as an internal or external command, operable program or batch file. 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-26T08:38:48.917

上述错误表明 PHPUnit 未安装在您的 WAMP 堆栈中。

最简单的安装方法是使用 PEAR。尝试按照此方法使用 PEAR 安装 PHPUnit：

转到 PHP 所在的目录。通常，这是 \bin\php\php5.3.8

我们将此路径称为“PHP 的位置”</p>

1.  从这个位置下载“go-pear.phar”：pear.php.net/go-pear.phar

    在 PHP 的位置创建一个文件夹“pear”

    将下载的“go-pear.phar”文件放在这个位置。

2.  以管理权限打开命令提示符。为此，单击开始菜单，键入“cmd”——您可以看到 cmd.exe 图标。右键单击此图标，然后单击“以管理员身份运行”</p>

    Cmd.exe 将打开。通过键入“cd”命令转到 PHP 位置的目录。例如，我的 wamp 位于“D:\wamp”，所以我编写以下命令：

    ```
    D:
    cd wamp\bin\php\php5.3.8 
    ```

    现在运行下载的文件，输入：

    ```
    php .\pear\go-pear.phar 
    ```

    安装将开始！在安装过程中，您需要响应一些提示，只需在必要时按回车键/按“Y”即可。

    安装后，双击并安装 PHP 位置中的“PEAR_ENV.reg”。

    或者，您可以在 PATH 变量中添加 PHP 的位置。

在你可以像这样安装 PHPUnit 之后：

1.  打开命令提示符，使用 cd 转到 PHP 的位置，然后键入：

    ```
    pear channel-discover components.ez.no
    pear channel-discover pear.phpunit.de
    pear channel-discover pear.symfony-project.com
    pear install --alldeps phpunit/PHPUnit 
    ```

    键入**phpunit –version**以确认安装。

那应该安装PHPUnit，现在你可以试试

```
phpunit DbTest.php 
```

希望它应该工作。

问候，

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-11T06:19:02.117

如果您尝试设置单元测试，那么我发现设置 ubuntu 虚拟机更快更容易。只需要几个小时，包括 PHPunit 和 selenium 服务器。而您可能会花费数小时或数天试图在 Windows 上获取 PHP 路径和系统变量。

# javascript - 在 codeigniter 中未打开的弹出窗口

> ID：15894226
> 
> 赞同：0
> 
> 时间：2013-04-09T05:49:30.597
> 
> 标签：javascript, codeigniter, confirm, popupwindow

我正在使用 codeigniter，在其中一个视图中，当数据库中不存在员工代码时，我触发了以下函数（使用 jquery ajax - 工作正常）。当输入的代码无效但确认结果为真时，会显示确认弹出窗口，以下代码不会触发弹出窗口！

```
function popup(){
        if(confirm("Employee_code not available! \nSave the code as new employee?")){
            //var new_emp_window = "<?php echo base_url().'index.php/it_inventory/new_employee'; ?>";
            widnow.open('www.google.com', 'width=500, height=500');
        }else{
            alert("ohh!");
            $('#employee_code').val('').focus();
        }
    } 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-09T05:51:07.233

它应该是**window**而不是**idnow**，更改：

```
widnow.open 
```

到

```
window.open 
```

尝试：

```
window.open("www.google.com", "_blank", "width=500,height=500"); 
```

参见：[window.open()](https://developer.mozilla.org/en/docs/DOM/window.open)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-09T06:10:24.540

1.  首先更改`www.google.com`为[http://www.google.com](http://www.google.com)。由于浏览器将没有协议前缀的 URL 处理为相对路径。

2.  检查您的浏览器上的弹出窗口阻止程序是否处于活动状态。

# asp.net - ASP.Net 角色和成员资格检查多个角色的角色中的用户

> ID：15894231
> 
> 赞同：0
> 
> 时间：2013-04-09T05:50:03.727
> 
> 标签：asp.net, authorization, roles, membership, roleprovider

我有会员用户，一个用户可以分配一个或多个角色。我想检查页面的特定角色，例如：

角色 1、角色 2、角色 3、角色 4、角色 5

具有 Role2 和 Role3 访问权限的用户可以访问 Page1.aspx 并且如果具有 Role1 和 Role2 访问权限的用户也可以访问，因为 Role2 可用。

我已经实现了成员资格，并在

字符串 [] 角​​色 = Roles.GetRolesForUser(User.Identity.Name);

如何检查多个角色？我是否需要使用 Roles.IsUserInRole 函数进行一一检查？

我用过; 由于 Partner in capital，它返回 0 个计数。我怎样才能忽略大小写？下面是检查数组与数组的正确方法吗？

```
string[] userroles = { "Partner", "testsetsr" };
 string[] requiredroles = { "contractor", "customer", "sims", "nonclientau", "partner" };
        var countInRoles = userroles.Intersect(requiredroles).Count(); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-09T06:29:16.387

您必须实现自己的授权过滤器属性。为此，您可以创建一个扩展“AuthorizationAttribute”的类，然后覆盖 OnAuthorization，您可以在其中指定所需的角色检查。

[Nimesh 的 .Net 博客中](http://www.nimeshdotnet.info/post/Extending-Authorize-Attribute.aspx)有一个关于如何做到这一点的小例子

该示例不是您个人问题的解决方案，但应该让您了解您需要做什么。

编辑：您的应用程序角色提供者也是如此，扩展它并覆盖 IsUserInRole（或者甚至添加一个新方法）以提供您需要的检查，以便让 Roles.IsUserInRole 以您想要的方式工作。

对于您的第二个问题：如果您有 2 个数组并且想要计算第一个数组的多少成员是第二个数组的成员，而忽略大小写，您可以使用 linq

```
var countInRoles = userroles.Select(u => u.ToLower()).Count(u => requiredroles.Select(r => r.ToLower()).Contains(u)); 
```

另一方面，如果您有访问某些操作所需的角色列表，则反之亦然，您还可以使用 linq 检查用户是否具有所有必需的角色（同样忽略大小写）

```
string[] requiredroles = { "Partner", "testsetsr" };
string[] userroles = { "contractor", "testsetsr", "customer", "sims", "nonclientau", "partner" };
var userHasAllRequiredRoles = requiredroles.Select(r => r.ToLower()).All(r => userroles.Select(u => u.ToLower()).Contains(r)); 
```

# function - 函数定义后的链式函数调用

> ID：15894232
> 
> 赞同：2
> 
> 时间：2013-04-09T05:50:03.847
> 
> 标签：function, coffeescript, chaining

如何在 CoffeeScript 中的函数定义之后链接函数调用？

等效的 javascript 将是：

```
var foo = function () {
    // stuff
}.bar() 
```

我设法做到这一点的唯一方法是：

```
foo = `function () {
    // stuff
}.bar()` 
```

但我希望有一个比在我的（漂亮的）coffeescript 代码中嵌入 javascript 更好的解决方案

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-09T05:54:51.943

试试这样：

```
foo = (-> stuff).bar() 
```

例如：

```
square = ((x)-> x*x).bar() 
```

编译成：

```
var square;
square = (function(x) {
  return x * x;
}).bar(); 
```

# html - image.src 不可用时处理 canvas.drawImage 错误

> ID：15894235
> 
> 赞同：0
> 
> 时间：2013-04-09T05:50:09.580
> 
> 标签：html, html5-canvas

当图像的 src url 不可用时，在画布上下文上处理调用 drawImage 的有效和正确方法是什么。例如：

```
myImage.src = "ImageDoesNotExist";
canvasCtx.drawImage(myImage,0,0); // 0x80004005 - JavaScript runtime error: Unspecified error. 
```

谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-09T06:31:51.853

**除了这些场合`image.onload`还有一个`image.onerror`**

```
var img = new Image();
img.onload = function(){ 
    context.drawImage(img,0,0);
}; 
img.onerror = function(){ 
    alert("Oops, bad stuff happened while loading this image.");
};
img.src = "ImageDoesNotExist"; 
```

# vb.net - CSV 重复字段名称

> ID：15894236
> 
> 赞同：1
> 
> 时间：2013-04-09T05:50:12.100
> 
> 标签：vb.net, csv, ssis

我有一个从核心系统中提取的 CSV 文件。最近对系统的开发更改使 CSV 文件数据包含重复的列/字段名称。

所以这些字段出现了不止一次。

*   创作者名字
*   创作者姓氏
*   创作者工资号
*   收入
*   接触
*   销售团队
*   渠道

然后我们通过 SSIS/DTS 包上传这些数据。该包实际上不会运行或使用重复的字段名称。所以我们需要删除或重命名重复的字段。

所以我正在考虑创建一个 C# 或 VB 脚本，当它计算一个超过 1 的字段名称时，它会使用 1 的后缀重命名重复的字段名称。

有没有一种简单的方法可以通过 Microsoft.VisualBasic.FileIO.TextFieldParser 或类似的东西来做到这一点？不确定是否有人遇到过类似的问题。

我添加了一个运行 Visual Basic 2008 代码（如下）WIP 的脚本任务；

```
Public Sub Main()

    'Check if file exist
    Dim filename As String = Dts.Variables.Item("fileName").Value
    If Not System.IO.File.Exists(filename) Then
        Exit Sub
    End If

    Dim csvFileArray(1, 1) As String
    Dim newCsvFileArray(1, 1) As String
    Dim streamReader As StreamReader = File.OpenText(filename)
    Dim strlines() As String

    strlines = streamReader.ReadToEnd().Split(Environment.NewLine)

    ' Redimension the array.
    Dim num_rows As Long
    Dim num_cols As Long
    'Dim counter As Integer = 0     '' >> Idea is to add this to the array as a 3rd dimension so we can count each field
    Dim fieldCounter As Integer = 0
    Dim strline() As String

    num_rows = UBound(strlines)
    strline = strlines(0).Split(",")
    num_cols = UBound(strline)
    ReDim csvFileArray(num_rows, num_cols)
    ReDim newCsvFileArray(num_rows, num_cols)

    ' Copy the data into the array.
    Dim fields As Integer
    Dim rows As Integer

    For rows = 0 To num_rows - 1
        strline = strlines(rows).Split(",")
        For fields = 0 To num_cols - 1
            csvFileArray(rows, fields) = strline(fields)
        Next
    Next

    Dim currentField As String = ""
    Dim comparrisionField As String = ""

    Dim newRows As Integer = 0
    Dim newFields As Integer = 0
    rows = 0

    ' Compare the current array to if they match anything in the new array
    For rows = 0 To num_rows - 1
        For fields = 0 To num_cols - 1
            currentField = csvFileArray(rows, fields)

            If rows = 0 Then
                ' If we are dealing with Fields i.e Row=0
                For newFields = 0 To num_cols - 1

                    comparrisionField = newCsvFileArray(newRows, newFields)
                    If String.IsNullOrEmpty(currentField) Then
                    Else
                        If currentField.Equals(comparrisionField) Then

                            If currentField <> "" Then
                                fieldCounter = fieldCounter + 1

                                ' if we have already added this column, then append a number
                                If fieldCounter >= 1 Then
                                    currentField = currentField + " " + CStr(fieldCounter)
                                End If
                            End If
                        End If
                    End If

                Next
            Else
                ' This means we are dealing with the Rows i/e not row = 0
                currentField = currentField
            End If
            newRows = 0
            newFields = 0
            fieldCounter = 0
            ' save currentField in the same layout as the initial file
            newCsvFileArray(rows, fields) = currentField
        Next
    Next

    ' Amend the duplicate field names
    Dim sw As New System.IO.StreamWriter(Left(filename, Len(filename) - Len(Right(filename, 4))) + "_amended.csv")
    rows = 0
    Dim currentLine As String = ""

    For rows = 0 To num_rows - 1
        For fields = 0 To num_cols - 1
            ' Save the data back to the filesystem
            If fields = 0 Then
                currentLine = newCsvFileArray(rows, fields)
            Else
                currentLine = currentLine + "," + newCsvFileArray(rows, fields)
            End If
        Next
        If currentLine <> "" Then
            sw.WriteLine(currentLine.Replace(vbCr, "").Replace(vbLf, ""))
        End If
    Next

    sw.Close()

    Dts.TaskResult = ScriptResults.Success
End Sub 
```

# java - 如何通过右键单击从多个jtree中删除选定的jtree

> ID：15894238
> 
> 赞同：0
> 
> 时间：2013-04-09T05:50:20.973
> 
> 标签：java, xml, swing, jtree, jdom-2

在我的 GUI 中，我必须根据 JTree 结构一个一个地加载几个 XML 文件，如果我想通过右键单击来编辑或删除完整的 JTree 或值，我怎样才能有效地做到这一点？任何线索？

我将 xml 文件处理到 jtree，如下所示，

```
 /* Tree implementation. */
    xmlTree = new JTree();
    xmlTree.setRootVisible(false);      
    xmlTree.setEditable(true);

    scrollPane.setViewportView(xmlTree);        
    frame.getContentPane().add("Center", scrollPane); 
```

++++++++++++++++++++++++++++++++++++++++++++++++++++++ ++++++++++++++++++++++++++++++++

```
 tn = processElement(xmlDoc.getRootElement());
         ((DefaultTreeModel) xmlTree.getModel()).setRoot(tn); 
```

++++++++++++++++++++++++++++++++++++++++++++++++++++++ ++++++++++++++++++++++++++++++++

```
// Open XMl file into the GUI.
private DefaultMutableTreeNode processElement(Element el) {
    DefaultMutableTreeNode node = new DefaultMutableTreeNode(el.getName());
    String text = el.getTextNormalize();
    if ((text != null) && (!text.equals(""))) {
        node.add(new DefaultMutableTreeNode(text));
    }
    processAttributes(el, node);
    Iterator<Element> children = el.getChildren().iterator();
    while (children.hasNext()) {
        Element next = (Element) children.next();
        node.add(processElement(next));
    } // End of while loop.
    return node;
} // End of method.

// Processing Element attributes.
private void processAttributes(Element el, DefaultMutableTreeNode dmtn) {
    Iterator<Attribute> atts = el.getAttributes().iterator();
    while (atts.hasNext()) {
        Attribute att = (Attribute) atts.next();
        DefaultMutableTreeNode attNode = new DefaultMutableTreeNode("@" + att.getName());
        attNode.add(new DefaultMutableTreeNode(att.getValue()));
        dmtn.add(attNode);
    } // End of while loop.
} // End of method. 
```

# android - 使用通用图像加载器加载的图像上的黑色背景

> ID：15894242
> 
> 赞同：8
> 
> 时间：2013-04-09T05:50:33.393
> 
> 标签：android, universal-image-loader

如下所示。第一张图片是链接在[http://goldentrail.towardstech.com/assets/images/membersimage/buttons/eat.png](http://goldentrail.towardstech.com/assets/images/membersimage/buttons/eat.png)的默认图片。而它下面的第二个图像是使用 uil 加载的图像

这是图像加载器配置

```
 File cacheDir = StorageUtils.getCacheDirectory(context);
    ImageLoaderConfiguration config = new ImageLoaderConfiguration.Builder(context)
            .memoryCacheExtraOptions(480, 800) // default = device screen dimensions
            .discCacheExtraOptions(480, 800, CompressFormat.JPEG, 75)
            .taskExecutor(AsyncTask.THREAD_POOL_EXECUTOR)
            .taskExecutorForCachedImages(AsyncTask.THREAD_POOL_EXECUTOR)
            .threadPoolSize(3) // default
            .threadPriority(Thread.NORM_PRIORITY - 1) // default
            .tasksProcessingOrder(QueueProcessingType.FIFO) // default
            .denyCacheImageMultipleSizesInMemory()
            .memoryCache(new LruMemoryCache(2 * 1024 * 1024))
            .memoryCacheSize(2 * 1024 * 1024)
            .discCache(new UnlimitedDiscCache(cacheDir)) // default
            .discCacheSize(50 * 1024 * 1024)
            .discCacheFileCount(100)
            .discCacheFileNameGenerator(new HashCodeFileNameGenerator()) // default
            .imageDownloader(new BaseImageDownloader(context)) // default
            .imageDecoder(new BaseImageDecoder()) // default
            .defaultDisplayImageOptions(DisplayImageOptions.createSimple()) // default
            .enableLogging()
            .build(); 
```

这是显示选项

```
DisplayImageOptions options = new DisplayImageOptions.Builder()
    .bitmapConfig(Bitmap.Config.ARGB_8888) // default
    .cacheInMemory()
    .cacheOnDisc()

    .build(); 
```

![在此处输入图像描述](https://i.stack.imgur.com/ruS4O.png)

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2013-05-20T18:18:11.593

您是否在自述文件中看到评论：

```
DON'T COPY THIS CODE TO YOUR PROJECT! This is just example of ALL options using. 
```

不要使用`.discCacheExtraOptions(480, 800, CompressFormat.JPEG, 75)`. 您的图像保存在磁盘缓存中作为 JPEG 文件，不能有透明背景。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-05-20T18:42:00.800

尝试使用[android-query](https://code.google.com/p/android-query/)。此 API 有助于处理图像，而其他一些 API 则适用于 android。

# php - 如何从php中的总分钟数计算小时、分钟和秒？

> ID：15894244
> 
> 赞同：1
> 
> 时间：2013-04-09T05:50:42.927
> 
> 标签：php

我正在用 php 开发一个网站。

我需要将作业添加到 sql server 2008 数据库。

我以分钟为单位计算工作持续时间，我想将其转换为 H:i:s 格式。

我正在使用这段代码：

```
 $hours = (int)($duration / 60);
  $minutes = $duration - ($hours * 60);
  $time = $hours.":".$minutes; 
```

它适用于 int 持续时间 30,60,100,120 等。

但如果持续时间为 1.33 或 5.40，则输出应分别为 00:01:30 或 00:05:40。

我怎样才能做到这一点 ？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-09T05:56:04.580

如果您正在运行 PHP > 5.3.0，请使用 DateInterval 类：

```
$interval = new DateInterval('100 minutes');
$interval->format('%H:%I:%S');  // prep for MySQL database. 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-09T06:28:39.303

试试这个

```
<?php
 $duration = "1.33";
 $hours    = (int)($duration / 60);
 $minutes  = $duration - ($hours * 60);   

  date_default_timezone_set('UTC');
  $date = new DateTime($hours.":".$minutes);
  echo $date->format('H:i:s');
?> 
```

输出

```
00:01:33 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-09T05:55:15.583

当您花费几分钟时，此代码运行良好

```
$valueInMinutes = 135;

echo intval($valueInMinutes / 60);
echo " h ";
echo intval($valueInMinutes % 60); 
```

并将输出

```
2 h 15 
```

如果您必须管理这些日子，只需将代码更改为：

```
$value = 1505;

echo intval($value / 1440);
echo " day(s) ";
echo intval(($value % 1440) / 60);
echo " h ";
echo intval($value % 60); 
```

将输出

```
1 day(s) 1 h 5 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-04-09T05:56:29.610

您可以使用 php`date`函数：

```
$hours = (int)($duration / 60);
$minutes = $duration - ($hours * 60);
$time = date("H:i:s", strtotime($hours.":".$minutes));
echo $time; 
```

更多信息`date`可以在这里找到[http://php.net/manual/en/function.date.php](http://php.net/manual/en/function.date.php)

希望这可以帮助 ：）

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-04-09T05:56:53.670

试试这个方法

```
$time = 5.40;
$newtime = floatval($time);
echo number_format($newtime,2,':',null); 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2013-04-09T06:00:05.973

试试这个

```
echo $time = date("H:i:s", strtotime($hours)) . ":" . date("H:i:s", strtotime($minutes)); 
```

**输出**

```
01:33:00 : 05:40:00 
```

# c# - 如何解决重定向循环

> ID：15894254
> 
> 赞同：5
> 
> 时间：2013-04-09T05:51:32.490
> 
> 标签：c#, asp.net, .net

我有一个 Web 应用程序，一些使用 Chrome 作为首选浏览器的用户在退出应用程序并尝试重新登录时收到以下错误。

“此网页有重定向循环”。

我的 Web 应用程序使用表单身份验证，并将`FormAuthenticationModule`用户重定向回我的应用程序的登录页面，所以我不能使用这种方法：

```
<customErrors mode="On" defaultRedirect="~/MyErrorPage.aspx" >

    <error statusCode="401" redirect="~/NoAccess.aspx"/>

</customErrors> 
```

相反，我将以下内容添加到`Page_Load`我的`LoginPage`.

```
if (Request.IsAuthenticated && !string.IsNullOrEmpty(Request.QueryString["ReturnUrl"]))
{
    Response.Redirect("~/NoAccess.aspx");
} 
```

但是，由于我添加了这种方法，用户似乎得到了“重定向循环”错误。

清除 cookie 后一切正常，但问题再次出现。

我可以将其添加到我的代码中，或者我可以做些什么来防止这个问题发生？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-04-09T06:23:44.697

尝试将此添加到您的`web.config`文件中：

```
 <location path="NoAccess.aspx">
    <system.web>
      <authorization>
        <allow users="?"/>
        <allow users="*"/>
      </authorization>
    </system.web>
  </location> 
```

这将关闭此页面的任何授权，并应停止您的循环。

你也可以添加这个：

```
 <location path="Login.aspx">
    <system.web>
      <authorization>
        <deny users="?"/>
        <allow users="*"/>
      </authorization>
    </system.web>
  </location> 
```

这将拒绝所有已通过身份验证的用户访问您的登录页面。结合这两者应该允许您为所有重定向添加自定义错误。

您还可以考虑为未经授权的访问（例如`public/`）创建一个目录，并将其放置在所有错误页面中（不需要被授权）。然后你可以这样做：

```
 <location path="public">
    <system.web>
      <authorization>
        <allow users="?"/>
        <allow users="*"/>
      </authorization>
    </system.web>
  </location> 
```

[您可以在此处](http://msdn.microsoft.com/en-us/library/b6x6shw7%28v=vs.71%29.aspx)阅读有关位置的更多信息。还有更多关于授权[的信息](http://msdn.microsoft.com/en-us/library/8d82143t%28v=vs.71%29.aspx)。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2014-05-11T09:58:00.903

有一个非常相似的问题并在 IIS 中解决：在`Authentication`功能中启用`Anonymous Authentication`和禁用其他所有内容。这是有道理的，因为最终这是管理身份验证逻辑的应用程序，而不是 IIS 或 ASP.NET。但显然这个解决方案不支持@Grzegorz 建议的对公共页面的优雅访问。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2015-02-25T17:07:02.463

我还有一个重定向循环，导致`The request filtering module is configured to deny a request where the query string is too long.`Visual Studio 2013 网站出现错误消息，其中身份验证设置为个人用户帐户。

请求的 URL 是一个长版本，`http://localhost:52266/Account/Login?ReturnUrl=%2FAccount%2FLogin%3FReturnUrl%3D%252FAccount%252FLogin%253FReturnUrl....`因此它显然会不断地重定向到登录页面并每次都附加返回 URL。

试图找到有问题的循环的任何断点似乎都没有影响，因为没有一个被触发。

最后我[做了以下事情](http://www.codeproject.com/Tips/805682/Error-The-request-filtering-module-query-string-is)：

*   找到项目属性。通过选择项目（不是解决方案）并查看“属性”窗口来执行此操作（不要右键单击然后选择“属性”，否则您将找不到它）。
*   设置`Anonymous Authentication`为`Enabled`。
*   设置`Windows Authentication`为`Disabled`。

启动项目时，默认页面现在应该出现，并且您添加的断点应该开始工作。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2018-04-03T10:37:39.060

这是一篇旧帖子，我在自定义身份验证和验证时遇到了这个问题。通过在 web.config 中添加这行代码解决了这个问题

```
<system.web>
<authentication mode="Forms">
  <forms name=".ASPXFORMSAUTH" path="/" timeout="240" cookieless="UseCookies"></forms>
</authentication>
<authorization>
  <allow users="*"/>
</authorization>
    <compilation debug="true" targetFramework="4.6" />
    <httpRuntime targetFramework="4.6" />
    <httpModules>
      <add name="ApplicationInsightsWebTracking" type="Microsoft.ApplicationInsights.Web.ApplicationInsightsHttpModule, Microsoft.AI.Web" />
    </httpModules>
  </system.web> 
```

希望能帮助到你。

# java - 看不到从 Java 类执行的 Perl 输出

> ID：15894255
> 
> 赞同：2
> 
> 时间：2013-04-09T05:51:45.527
> 
> 标签：java, linux, perl, unix

我正在使用 Java 类在 Linux 机器上执行 Perl 脚本。`.class`正在成功创建。但是当我执行这个类时，它说`exit code successful as sop`，但我看不到 Perl 输出或脚本的执行。如果我直接执行 Perl，它工作正常......

这是 Perl 脚本：

```
#!/usr/local/bin/perl

print ("Enter the distance to be converted:\n"); 
$originaldist = <STDIN>;
chop ($originaldist);
$miles = $originaldist * 0.6214;
$kilometers = $originaldist * 1.609;
print ($originaldist, " kilometers = ", $miles,   " miles\n"); 
```

这是我调用脚本的 Java 类：

```
import java.io.InputStream;
import java.io.InputStreamReader;
import java.io.BufferedReader;
import java.io.IOException;

class test {
    public static void main(String[] args) throws IOException {
        String[] aCmdArgs = { "perl", "-e"
                  , "pl newprg.pl" };
        Runtime oRuntime = Runtime.getRuntime();
        Process oProcess = null;
        try {
            oProcess = oRuntime.exec(aCmdArgs);
            oProcess.waitFor();
        } catch (Exception e) {
            System.out.println("error executing " + aCmdArgs[0]);
        }
        /* dump output stream */
        BufferedReader is = new BufferedReader
            ( new InputStreamReader(oProcess.getInputStream()));
        String sLine;
        while ((sLine = is.readLine()) != null) {
            System.out.println(sLine);
        }
        System.out.flush();
        /* print final result of process */
        System.err.println("Exit status=" + oProcess.exitValue());
        return;
    }
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-09T06:04:39.617

两个问题：

*   `perl -e pl newprg.pl`实际上不会从命令行执行您的程序，因为它将无法解析给定的（非）表达式。您可能打算使用`perl newprg.pl`
*   您的程序需要输入，您需要使用进程的输出流将其输入

例如：

```
try {
    oProcess = oRuntime.exec(aCmdArgs);
    PrintWriter writer = new PrintWriter(new OutputStreamWriter(
            oProcess.getOutputStream()));
    writer.println(200);
    writer.close();
    oProcess.waitFor();
} catch (Exception e) {
    System.out.println("error executing " + aCmdArgs[0]);
} 
```

# java - MultiKeyMap 与带有 Map 值的 Map

> ID：15894260
> 
> 赞同：0
> 
> 时间：2013-04-09T05:52:08.760
> 
> 标签：java, data-structures

在性能方面（在您看来，任何可能的可读性），使用 MultiKeyMap 与使用带有 Map 值的 Map 有什么好处？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-09T06:26:44.123

当您使用多键映射时，将在底层中完成一次查找，`HashMap`而如果您使用带有映射值的映射，则必须执行至少两次查找才能找到您要查找的元素。

另请注意，您可以将泛型与 Map of Map-s 一起使用，因此您可以指定键和值类型，而使用 MultiKeyMap 您不能这样做。这就是为什么我会说使用 Map of Map-s 在这方面有点“安全”。

# css-selectors - CSS选择器在硒网格中找不到元素

> ID：15894266
> 
> 赞同：2
> 
> 时间：2013-04-09T05:52:30.797
> 
> 标签：css-selectors, selenium-webdriver

我正在尝试查找提交元素。我的 HTML 结构如下。

```
<div> 
  <span class="combutton"><a href="javascript:void(0);">Submit</a></span>
</div> 
<div> 
 <span class="combutton"><a href="#Cancel">Cancel</a></span>
</div> 
```

在使用萤火虫的浏览器中我试过了

```
$('div .combutton')[0].click() 
```

点击提交完美。但是使用 selenium 驱动程序找不到这个元素。请告诉我如何使用

```
driver.findElement(By.css("CSSSELECTORSTRING")) 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-09T06:32:19.383

试试看：

```
driver.findElement(By.xpath("//div span.combutton a[contains(.,'Submit')]")).click(); 
```

或者

```
driver.findElement(By.xpath("//div span.combutton[0] a")).click(); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-09T06:38:00.750

你在 Firebug 中所做的应该不会有任何影响，因为它点击的是 a`span`而不是`a`它的内部。

这应该有效，除非您省略了标记的某些部分，否则会阻止它：

```
driver.findElement(By.cssSelector("div:first-child .combutton a")).click(); 
```

# matlab - 如何在matlab中处理图片数组

> ID：15894269
> 
> 赞同：1
> 
> 时间：2013-04-09T05:52:39.217
> 
> 标签：matlab

我有一个名为 rectimgs 的数组，其中包含大约 2000 张图片并查看我所做的个人图片

```
 imshow(rectimgs{375}) // this displays the 375th pic in the array. 
```

现在每张图片是 86 * 86 * 3 (RGB)

```
 size((rectimgs{375}))

   ans =

   86    86     3 
```

如何从此数组中访问图像的每个像素，例如我想找出每张图片的像素 43*44 的平均值（比如红色值），我该怎么做。

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2013-04-09T06:27:28.917

好的，我想出了例如：访问第 456 张图片的像素 86 * 86 的绿色值

```
rectimgs{456}(86,86,3) 
```

将工作

# jquery - 如何在同一个html中使用2个不同版本的jquery

> ID：15894270
> 
> 赞同：-4
> 
> 时间：2013-04-09T05:52:46.623
> 
> 标签：jquery, forms, validation

我想在 html 中同时使用表单验证和 datepicker。由于冲突，它不起作用。请帮忙。这是我的代码。

```
 <script src="http://ajax.googleapis.com/ajax/libs/jquery/1.3.2/jquery.min.js"                          type="text/javascript"></script>
    <script     src="http://ajax.microsoft.com/ajax/jquery.validate/1.5.5/jquery.validate.js"     type="text/javascript"></script>
    <script type="text/javascript">

     $().ready(function() {  
     $("#form1").validate({  
      rules: {  
          asset_name: 'required',  
          asset_code: 'required',  
          asset_desc: 'required',  
          purchase_date: 'required'  

         }
        });
       });  
       </script>
       <link rel="stylesheet"      href="http://code.jquery.com/ui/1.10.2/themes/smoothness/jquery-ui.css" />
       <script src="http://code.jquery.com/jquery-1.9.1.js"></script>
        <script src="http://code.jquery.com/ui/1.10.2/jquery-ui.js"></script>
        <link rel="stylesheet" href="/resources/demos/style.css" />
       <script type="text/javascript">  
       jQuery.noConflict();  
       $(function() {  
       $( "#purchase_date" ).datepicker({ dateFormat: 'yy-mm-dd' });  
        });  
           $(function() {  
      $( "#renewal_date" ).datepicker({ dateFormat: 'yy-mm-dd' });  
      })(jQuery);  
          </script> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-09T05:55:43.200

您可以为此使用 .noConflict()

```
<!-- load jQuery 1_8_3 -->
    <script  src="../assets/js/jquery-1.8.3.min.js"></script> 
        <script type="text/javascript">
        var jQuery_1_8_3 = $.noConflict(true);
        </script>

        <!-- load jQuery 1.4.2 -->
        <script type="text/javascript" src="jquery/jquery-1.4.2.js"></script>
        <script type="text/javascript">
        var jQuery_1_4_2= $.noConflict(true);
        </script> 
```

[看这里](https://stackoverflow.com/questions/15383126/jquery-jqueryui-conflict/15383186#15383186)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-09T05:56:41.860

尝试使用：

```
jQuery.noConflict(); 
```

您将在此处找到示例和文档[。](http://api.jquery.com/jQuery.noConflict/)

# excel - JXL 获取单元地址

> ID：15894272
> 
> 赞同：1
> 
> 时间：2013-04-09T05:52:49.233
> 
> 标签：excel, jxl

我正在使用 Java [jxl](http://jexcelapi.sourceforge.net/) api v2.6.16 来生成 Excel 电子表格。就像上面的标题所说的那样，如果我所拥有的只是单元格的列和行，如何获得一个单元格或更具体的可写单元格的地址？还是我必须编写一个可以生成它的算法？

提前致谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-10-25T19:54:06.167

您可以使用此代码。希望这有帮助。你可以这样使用它：

`cellAddress(cell.getRow() + 1, cell.getColumn())`如果单元格定义为`Cell cell = someCell;`

```
private String cellAddress(Integer rowNumber, Integer colNumber){
    return "$"+columnName(colNumber)+"$"+rowNumber;
}

private String columName(Integer colNumber) {

    Base columns = new Base(colNumber,26);
    columns.transform();
    return columns.getResult();
}

class Base {
    String[] colNames = "A,B,C,D,E,F,G,H,I,J,K,L,M,N,O,P,Q,R,S,T,U,V,W,X,Y,Z".split(",");
    String equalTo;
    int position;
    int number;
    int base;
    int[] digits;
    int[] auxiliar;

    public Base(int n, int b) {
        position = 0;
        equalTo = "";
        base = b;
        number = n;
        digits = new int[1];
    }

    public void transform() {
        if (number < base) {
            digits[position] = number;
            size();
        } else {
            digits[position] = number % base;
            size();
            position++;
            number = number / base;
            transform();
        }
    }

    public String getResult() {
        for (int j = digits.length - 2; j >= 0; j--) {
            equalTo += colNames[j>0?digits[j]-1:digits[j]];
        }
        return equalTo;
    }

    private void size() {
        auxiliar = digits;
        digits = new int[auxiliar.length + 1];
        System.arraycopy(auxiliar, 0, digits, 0, auxiliar.length);
    }
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-05-09T11:46:11.417

地址由列和行组成。

在**A1 表示法**中，它的写法如下：`Range("A1")`其中第 1 列由字母“A”表示，第 1 行为 1

在**R1C1 表示法**中，它会这样写：列为`R1C1`1，行为 1

它们将像这样使用：

```
Cells(1,1).font.bold=true ' row 1, column 1
range("A1").font.bold=true 
```

要从 Reference 中获取地址，请检索**Cells**或**Range**对象的*Address*属性，如下所示：

 ****```
sAddress=cells(1,1).address 
```

这将返回**A$1$**

在 JXL 中，`String rangeAddress = range.getAddress();`

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2016-01-05T22:35:31.257

您可以使用以下方法之一通过其 alpha 索引获取列。这个简单的方法只是将一个整数转换为一个 ASCII 字符。第二种方法允许使用自定义字母表。

# 简单方法

```
public class LookupUtil {
    public static String cellAddress(int row, int col) {
        return String.format("$%s$%d", columnName(col), row);
    }

    public static String columnName(int index) {
        int div = index + 1;
        StringBuffer result = new StringBuffer();
        int mod = 0;

        while (div > 0) {
            mod = (div - 1) % 26;
            result.insert(0, (char) (65 + mod));
            div = (int) ((div - mod) / 26);
        }

        return result.toString();
    }
} 
```

# 高级方法

```
public class LookupUtil {
    private static final char[] ALPHA = "ABCDEFGHIJKLMNOPQRSTUVWXYZ".toCharArray();

    public static String cellAddress(int row, int col) {
        return String.format("$%s$%d", columnName(col, ALPHA), row);
    }

    public static String columnName(int index, char[] alphabet) {
        int div = index + 1;
        StringBuffer result = new StringBuffer();
        int mod = 0;

        while (div > 0) {
            mod = (div - 1) % alphabet.length;
            result.insert(0, alphabet[mod]);
            div = (int) ((div - mod) / alphabet.length);
        }

        return result.toString();
    }
} 
```****

# c# - 将对象与字符串作为方法参数传递

> ID：15894274
> 
> 赞同：0
> 
> 时间：2013-04-09T05:52:59.957
> 
> 标签：c#

通过以下代码，我了解到 getStringAgain(classOne.str1) 比 getAstring(classOne) 更好，因为由于数据隐藏/封装等原因，我们只想传递必要的内容。

但是，有任何记忆好处吗？显然 classOne 对象不仅仅是一个字符串，但是由于在这两种方法中，我们只传入一个对象的引用，因此只有引用被复制到堆栈中，它们在内存方面是否同样有效？

```
Class ClassOne()
{
    public string str1 = "string1";
    public string str2 = "string2";
}

Class ClassTwo()
{
    public ClassTwo()
    {
        ClassOne classOne = new ClassOne();
        string a = getAstring(classOne);
        string b = getStringAgain(classOne.str1)
    }

    private string getAstring(ClassOne classOne)
    {
        return classOne.str1;
    }

    private string getStringAgain(string str)
    {
        return str;
    }
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-09T06:05:27.017

string 和 ANY 类是引用类型

这意味着这两个函数引用了保存实际数据的托管堆

没有任何东西被复制。

如果您知道指针，则它与传递指针基本相同。

# c# - WinRT中线程内的新线程

> ID：15894276
> 
> 赞同：0
> 
> 时间：2013-04-09T05:53:09.063
> 
> 标签：c#, multithreading, async-await, c#-5.0, winrt-async

我正在线程池中执行某些功能。在这个线程中，将执行 linq 查询。这需要更多时间，因为在该查询中选择了我的类的集合还有一个 bool 属性来检查另外两个集合。

```
collection.Select(item => new MyElement { IsActive = this.CheckIsActive(collection1, collection2, item), Value = item, Name = item != null ? item.ToString() : "Empty" }).ToList<MyElement>(); 
```

CheckIsActive 方法----

```
private bool CheckIsActive(List<object> collection1, List<object> collection2, object item){
 if (collection1.Contains(item) && !collection2.Contains(item))
     return false;
 return true;} 
```

这可以优化吗？任何想法？

可以在新线程中使用新线程进行上述执行吗？

可以使用 Thread 或 await 作为返回类型方法吗？

# ef-code-first - 实体框架代码优先：按层次结构表，不填充自定义鉴别器字段

> ID：15894281
> 
> 赞同：2
> 
> 时间：2013-04-09T05:54:00.850
> 
> 标签：ef-code-first, entity-framework-5, .net-4.5, discriminator

我正在使用 Table Per Hierarchy (TPH) 架构来处理现有的数据库模式。当我尝试使用自定义*鉴别*器字段名称*时 DbEntityValidationException*：

> *属性：CourseType 错误：CourseType 字段是必需的。*

### 楷模

```
public abstract class Course {
    public int ID { get; set; }
    public string Name { get; set; }
    public string CourseType { get; set; }
}
public class OnlineCourse : Course {
    public string Url { get; set; }
}
public class OnsiteCourse : Course {
    public string Location { get; set; }
} 
```

### 实体类型配置

```
public class CourseMap : EntityTypeConfiguration<Course> {
    public CourseMap() {
        this.HasKey(x => x.ID);
        this.Property(x => x.Name).HasMaxLength(100).IsRequired();
        this.Property(x => x.CourseType).HasMaxLength(128).IsRequired();
    }
}
public class OnlineCourseMap : EntityTypeConfiguration<OnlineCourse> {
    public OnlineCourseMap() {
        this.Property(x => x.Url).HasMaxLength(500);
    }
}
public class OnsiteCourseMap : EntityTypeConfiguration<OnsiteCourse> {
    public OnsiteCourseMap() {
        this.Property(x => x.Location).HasMaxLength(100);
    }
} 
```

### 数据上下文

```
public class EntityContext : DbContext {

    public EntityContext(): base("Name=EntityContext") {
    }

    protected override void OnModelCreating(DbModelBuilder modelBuilder) {
        modelBuilder.Configurations.Add(new CourseMap());
        modelBuilder.Configurations.Add(new OnlineCourseMap());
        modelBuilder.Configurations.Add(new OnsiteCourseMap());

        modelBuilder.Entity<Course>()
            .Map<OnlineCourse>(x => x.Requires("CourseType").HasValue("Online"))
            .Map<OnsiteCourse>(x => x.Requires("CourseType").HasValue("Onsite"));
    }

    public DbSet<Course> Courses { get; set; }
} 
```

### 执行的代码

```
using (var ctx = new EntityContext()) {
    ctx.Courses.Add(new OnlineCourse() {
        Name = "Online 1",
        Url = "Http://www.online.com"
    });
    ctx.SaveChanges();
} 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-09T06:17:35.790

我本来预计会有一个例外，例如“CourseType 不能用作鉴别器，也不能用作映射库”（我显然不记得正确的错误消息）。但是`CourseType`当它是判别器时，不能作为映射列作为模型的一部分。通常的模式是仅在映射配置中查看它（如您所见）。无处。

因此，如果您`CourseType`从`Course`. 我希望你不需要它来处理任何其他逻辑。

# maven - 加速多个模块的 Maven 组装

> ID：15894283
> 
> 赞同：7
> 
> 时间：2013-04-09T05:54:13.080
> 
> 标签：maven, maven-assembly-plugin

我有以下形式的项目

```
- pom.xml
- projectA
  - pom.xml
  - src/main/
    - java
    - startupScript
- projectB
  - pom.xml
  - src/main/
    - java
    - startupScript
- projectAssembly
  - pom.xml 
```

我想`projectAssembly`生成一个 tar.gz，其中包含两个文件夹，一个用于 projectA，一个用于 projectB，在每个文件夹中，都会有项目的依赖项和`startupScript`库。

这样做的“天真”方法是将`assembly.xml`文件添加到每个项目中，该文件大致如下所示：

```
<assembly>
<formats>
    <format>tar.gz</format>
</formats>
<baseDirectory>/${project.artifactId}</baseDirectory>
<fileSets>
    <fileSet>
        <directory>${basedir}/src/main/startupScripts</directory>
        <outputDirectory>/startupScripts</outputDirectory>
    </fileSet>
 </fileSets>
<dependencySets>
    <dependencySet>
        <outputDirectory>/lib</outputDirectory>
    </dependencySet>
</dependencySets>
</assembly> 
```

然后，在,中同时`projectAssembly`依赖和, 并添加一个大致如下的程序集文件`<type>tar.gz</type>``projectA``projectB`

```
<assembly>
<dependencySets>
    <dependencySet>
        <outputDirectory>/</outputDirectory>
        <unpack>true</unpack>
    </dependencySet>
</dependencySets>
</assembly> 
```

这行得通，但是，我不需要中间`tar.gz`项目`A`和`B`，并且生产它们，特别是如果它们有很多依赖项，需要很长时间。

我怎样才能告诉 maven 只直接组装 tar.gz`projectAssembly`而不浪费时间打包和解包中间档案？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-05-14T06:19:10.070

您在 projectAssembly 中的程序集描述符需要看起来像这样（请参阅内部注释）：

```
<assembly xmlns="http://maven.apache.org/plugins/maven-assembly-plugin/assembly/1.1.2"
xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
xsi:schemaLocation="http://maven.apache.org/plugins/maven-assembly-plugin/assembly/1.1.2 http://maven.apache.org/xsd/assembly-1.1.2.xsd">
<id>bin</id>
<formats>
  <format>dir</format>
</formats>
<includeBaseDirectory>false</includeBaseDirectory>
<moduleSets>
  <moduleSet>

    <!-- Enable access to all projects in the current multimodule build! -->
    <useAllReactorProjects>true</useAllReactorProjects>

    <!-- Now, select which projects to include in this module-set. -->
    <includes>
      <include>*:projectA</include>
      <include>*:projectB</include>
    </includes>

    <!-- Select and map resources from each module -->
    <sources>
      <includeModuleDirectory>false</includeModuleDirectory>
      <fileSets>
        <fileSet>
          <directory>src/main/startupScript</directory>
          <outputDirectory>${module.artifactId}/startupScript</outputDirectory>
        </fileSet>
      </fileSets>
    </sources>

   <!-- Select and map dependencies from each module -->
    <binaries>
      <dependencySets>
        <dependencySet>
          <outputDirectory>${module.artifactId}/lib</outputDirectory>
        </dependencySet>
      </dependencySets>
    </binaries>
  </moduleSet>
</moduleSets>
</assembly> 
```

我相信那将是您所需要的。如果不让我们知道..

# javascript - 如何在对话框关闭时销毁进度条？

> ID：15894290
> 
> 赞同：0
> 
> 时间：2013-04-09T05:54:52.043
> 
> 标签：javascript, html, jquery-ui

我有这两个功能，其中一个是创建对话框，另一个是销毁进度条，

创建对话框后，我可能需要在其中创建一个进度条并启动它，但是当我关闭对话框时，进度条会继续在后台运行。我需要的是破坏或做任何事情来阻止这个进度条工作。我用 beforeclose 事件编写了 createddialog 函数来破坏进度条，但它不起作用，而且对话框甚至没有关闭，就像关闭按钮没有响应一样。

```
function createdialog(trgt,h,w) {
    $( trgt ).dialog({
        height:h,
        width:w,
        autoOpen: false,
        show: {
            effect: "blind",
            duration: 200
        },
        hide: {
            effect: "blind",
            duration: 100
        },
        beforeClose: function( event, ui ) {
                destroyprogresspar(trgt);
        }
    });
}

destroyprogresspar(dialg) {
    if(dialg=="#myfilesdialog") { 
        $("#progressbar").progressbar("destroy");
    } else if(dialg=="#ibrowser") {
        $("#progressbar2").progressbar("destroy");
    }
} 
```

我尝试在创建这样的对话框时创建一个关闭处理程序（**WORKS BUT MESSY**）：

```
$(trgt).on("dialogbeforeclose", function( event, ui ) {
    if(trgt=="#myfilesdialog") {
        $("#progressbar").progressbar("destroy");
    } else if(trgt=="#ibrowser") {
        $("#progressbar2").progressbar("destroy");
    } 
}); 
```

它可以工作，但不能让它调用一个函数，而不是像这样的 if 条件（**DOESN'T WORK**）：

```
$(trgt).on("dialogbeforeclose", function( event, ui ) {
    destroyprogresspar(trgt);
}); 
```

# perl - Test::MockObject::Extends with 'fields' 给出错误

> ID：15894298
> 
> 赞同：0
> 
> 时间：2013-04-09T05:55:29.900
> 
> 标签：perl

因此尝试升级其他人编写的一些旧测试模块以支持更新的 perls。一些测试正在使用 Test::MockObject::Extends，但我发现运行以下代码错误。

```
#!/usr/bin/env perl

package MyModule;
use strict;
use warnings;
use fields qw(field1 field2);

sub new {
    my $self = shift;
    unless (ref $self) {
        $self = fields::new($self);
    }
    return $self;
}

package main;
use strict;
use warnings;
use Test::MockObject::Extends;
use Data::Dumper;

my $VAR1 = MyModule->new();
print Data::Dumper::Dumper($VAR1);
my $VAR2 = Test::MockObject::Extends->new($VAR1); 
```

错误：

```
$ perl a
$VAR1 = bless( {}, 'MyModule' );
Modification of a read-only value attempted at /usr/local/share/perl/5.14.2/Test/MockObject/Extends.pm line 31. 
```

我查看了 Test::MockObject 和 perl 5.10 的更改日志，但看不到任何直接看起来会导致此问题的东西。我怀疑它已经坏了一段时间，而 5.10 的一些新东西刚刚照亮了它。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-09T17:46:16.563

I think what's happening here is a result of using fields::new. From the perldoc page:

> ```
>  perl 5.9.0 and higher:  fields::new() creates and blesses a
>       restricted-hash comprised of the fields declared using the "fields"
>       pragma into the specified class. 
> ```

I think Test::MockObject::Extends wants to modify the hash, hence boom.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2017-08-23T01:38:23.463

@nfg 的答案是正确的，但有一个简单的解决方法：`fields`在将其传递给`Test::Object::Extends`.

```
use Hash::Util qw(unlock_keys);

my $obj = Some::Class->new();
unlock_keys(%$obj);
$obj = Test::MockObject::Extends->new($obj); 
```

如果使用 perl < 5.9，这将失败，所以如果这是一个问题，那么您可以有条件地解锁密钥。

在调用 Test::MockObject::Extends 并模拟任何要拦截的方法后，您可能需要重新锁定键，因为否则访问对象中不应该存在的字段的错误代码将不会被捕获。

# javascript - 在电子邮件地址上输入键时打开电子邮件弹出窗口

> ID：15894300
> 
> 赞同：0
> 
> 时间：2013-04-09T05:55:36.200
> 
> 标签：javascript, jquery, html, email

我的屏幕上显示了电子邮件地址，用户可以单击该电子邮件地址并打开 Outlook 邮件实例（使用简单`<a mailto:/>`）。但是，用户也可以使用 Tab 序列来访问该电子邮件地址并按 Enter。我想以类似的方式打开 Outlook 邮件实例。我该怎么做？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-09T06:01:23.360

```
<a href="" onkeypress="check()">

function check(e)
{
    if (!e) e = window.event;   // resolve event instance
  if (e.keyCode == '13')
    {
      //your code for opening outlook
    }
 } 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-09T06:19:17.460

尝试这个

```
<a href="BAC" id="mail"/>
$(function(){
  $("#mail").bind('keyup',function(evt){
        var key = (window.event) ? event.keyCode : evt.which;
        if(key==13) return true;
        else return false;
  }); 
}); 
```

# android - 拦截传入的 SMS 消息并对其进行修改

> ID：15894301
> 
> 赞同：8
> 
> 时间：2013-04-09T05:55:38.950
> 
> 标签：android, iphone, cordova, xamarin.ios, sms

有没有办法拦截传入的 SMS 消息，然后在将其呈现给用户之前对其进行修改？

*   可以在 iPhone / Andriod 上本地完成吗？
*   可以使用PhoneGap完成吗？
*   可以使用 MonoTouch / Mono for Andriod 来完成吗？

如果以上任何一项都是，您能否提供一些指示？

我的首选解决方案优先顺序如下：

1.  电话间隙
2.  单核细胞增多症
3.  本国的

谢谢大家！！

编辑：

对于想知道这样做的目的的人，基本上我想根据内容在短信中添加一个词作为“标签”，所以当我查看短信时，我可以看到类似“重要：等等等等” ，而不仅仅是“等等等等”。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-06-19T04:40:19.073

试试这个- **//将此类注册为 SMS_RECEIVED 意图的清单文件中的接收者**

```
 public class SmsReceiver extends BroadcastReceiver {

    private static final String SMS_RECEIVED = "android.provider.Telephony.SMS_RECEIVED";

    @Override
    public void onReceive(Context context, Intent intent) {
        if (intent.getAction().equals(SMS_RECEIVED)) {
              abortBroadcast();**this is prevent message to deliver to user**

            Bundle bundle = intent.getExtras();
            if (bundle != null) {
                // get sms objects
                Object[] pdus = (Object[]) bundle.get("pdus");
                if (pdus.length == 0) {
                    return;
                }
                // large message might be broken into many
                SmsMessage[] messages = new SmsMessage[pdus.length];
                StringBuilder sb = new StringBuilder();
                for (int i = 0; i < pdus.length; i++) {
                    messages[i] = SmsMessage.createFromPdu((byte[]) pdus[i]);
                    sb.append(messages[i].getMessageBody());
                }
                String sender = messages[0].getOriginatingAddress();
                String message = sb.toString();
                Toast.makeText(context, message, Toast.LENGTH_SHORT).show();

               SmsManager sms = SmsManager.getDefault();
               sms.sendTextMessage(phoneNumber, null, message, null, null);//phone number will be your number. 
            }
        }
    }
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2014-04-23T03:45:13.663

Yes there is a way, but unfortunately since the rollout of KitKat it isn't that easy any more. To work on versions > Jelly Bean you must have your application run as the default SMS application, that is to modify and abortBroadcast(). For 4.3 and below, create a broadcast receiver and do something like the following:

```
public void onReceive( Context context, Intent intent ) {
    // Get the SMS map from Intent
    Bundle extras = intent.getExtras();

    String messages = "";

    if ( extras != null ) {
        // Get received SMS array
        Object[] smsExtra = (Object[]) extras.get( SMS_EXTRA_NAME );

        // Get ContentResolver object for pushing encrypted SMS to the incoming folder
        ContentResolver contentResolver = context.getContentResolver();

        for ( int i = 0; i < smsExtra.length; ++i ) {
            SmsMessage sms = SmsMessage.createFromPdu((byte[])smsExtra[i]);

            String body = sms.getMessageBody().toString();
            String address = sms.getOriginatingAddress();

            // Here is where you modify the body of the message!
            messages += "SMS from " + address + " :\n";                   
            messages += body + "\n";

            putSmsToDatabase( contentResolver, sms );
        }
    }
}

private void putSmsToDatabase( ContentResolver contentResolver, SmsMessage sms ) {

    // Create SMS row
    ContentValues values = new ContentValues();
    values.put( ADDRESS, sms.getOriginatingAddress() );
    values.put( DATE, sms.getTimestampMillis() );
    values.put( READ, MESSAGE_IS_NOT_READ );
    values.put( STATUS, sms.getStatus() );
    values.put( TYPE, MESSAGE_TYPE_INBOX );
    values.put( SEEN, MESSAGE_IS_NOT_SEEN );

    try {
        values.put( BODY, sms.getMessageBody() ); // May need sms.getMessageBody.toString()
    }
    catch ( Exception e ) { 
        e.printStackTrace(); 
    }

    // Push row into the SMS table
   contentResolver.insert( Uri.parse( SMS_URI ), values );
} 
```

This info was obtained from [here](http://androidiostutorials.wordpress.com/2012/11/05/how-to-receive-and-handle-sms-on-android/ "here")

Almost forgot...constants..

```
public static final String SMS_EXTRA_NAME = "pdus";
public static final String SMS_URI = "content://sms";

public static final String ADDRESS = "address";
public static final String PERSON = "person";
public static final String DATE = "date";
public static final String READ = "read";
public static final String STATUS = "status";
public static final String TYPE = "type";
public static final String BODY = "body";
public static final String SEEN = "seen";

public static final int MESSAGE_TYPE_INBOX = 1;
public static final int MESSAGE_TYPE_SENT = 2;

public static final int MESSAGE_IS_NOT_READ = 0;
public static final int MESSAGE_IS_READ = 1;

public static final int MESSAGE_IS_NOT_SEEN = 0;
public static final int MESSAGE_IS_SEEN = 1; 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-06-16T16:44:45.180

当然！iOS 上最简单的方法就是在 SMS 数据库上创建一个触发器 - /var/mobile/Library/SMS/sms.db

```
CREATE TRIGGER AFTER INSERT ON message 
```

然后更新记录！

更高级的方法是挂钩私有方法，但我现在不会深入，你只需要探索这些方法:)

顺便说一句，您无论如何都需要越狱设备

# javascript - 使用 $http 获取数据以用于自定义服务

> ID：15894304
> 
> 赞同：2
> 
> 时间：2013-04-09T05:55:47.040
> 
> 标签：javascript, angularjs

我正在尝试创建一个自定义服务，该服务从服务器中提取所有已定义状态的列表以用于表单，到目前为止我有：

```
SimpleTaskApp.factory('storyStatus', function($http) {
    var data = null;
    var promise = $http({
            url: '/story-status/',
            method: 'GET'
        }).success(function (resp) {
            data = resp;
        });
    return {list: data }};
}); 
```

我知道这不起作用，因为 $http 是异步的，但是我不想多次运行请求。我想把它当作一个静态变量，所以如果调用了storyStatus.list，它应该检查它是否为空，然后尝试填充自己。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-09T07:38:18.123

你应该*使用*promise 而不是反对它们。

您不需要存储数据，因为您可以存储*promise*。承诺的意义在于你不知道它们何时会完成。您不知道您的数据何时可用。

所以你的服务**必须**回报承诺。但这没关系：

```
SimpleTaskApp.factory('storyStatus', function($http) {
  var promise;

  function getData() {
    if ( ! angular.isDefined( promise ) ) {
      promise = $http({
        url: '/story-status/',
        method: 'GET'
      });
    }

    return promise;
  }

  return { list: getData };
}); 
```

在此服务中，您的`$http`调用只会被调用一次，但无论何时调用都会返回一个承诺`SimpleTaskApp.list()`。调用它的控制器不需要知道数据是否存在，因为无论如何它都会做出相同的反应，例如：

```
SimpleTaskApp.controller('MainCtrl', function($scope, storyStatus) {
  storyStatus.list().then(function( data ) {
    $scope.statuses = data.statuses;
  });
}); 
```

如果数据已经取回，则`then`基本立即运行；如果没有，它将在数据返回时运行。控制器不需要知道任何关于`storyStatus`服务内部状态的信息。

因此，promise 不仅有助于异步任务，而且还有助于保持我们的组件解耦，这在 AngularJS 中很重要 - 也应该在其他框架中！

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-09T06:08:37.337

你可以这样做吗？

```
SimpleTaskApp.factory('storyStatus', function($http) {

    var promise = $http({
        url: '/story-status/',
        method: 'GET'
    });

    return { list: promise };
}); 
```

调用代码

```
storyStatus.list.then(function (data) {
}); 
```

`synchronous`如果您只加载一次列表，您可能需要考虑使用ajax 调用来简化您的 API。

# visual-studio - 有没有办法在源代码控制项目（TFS）中恢复已擦除的代码？

> ID：15894310
> 
> 赞同：0
> 
> 时间：2013-04-09T05:56:15.980
> 
> 标签：visual-studio, azure-devops, source-control-explorer

我正在开发 Visual Studio 2012 中的一个项目，该项目托管在 TFS 上。无论如何，当尝试将一个大型函数体从一个文件移动到另一个文件时，我不知道是由于缺乏睡眠还是粗心大意，我将声明复制到新文件，但忘记复制正文，然后从旧文件中删除正文，通过反射单击保存并关闭第一个 .cpp 文件，所以当我将它粘贴到第二个文件时，令我惊讶我粘贴了声明而不是定义。撤消挂起的更改只会一起撤消“添加”。有什么方法可以检索丢失的源代码还是应该尽快开始重写它？因为我花了很长时间编写它。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-09T06:11:10.603

查看文件的历史记录。右键单击它>>源代码管理>>查看历史记录，如下所示：

![查看历史](https://i.stack.imgur.com/N0pYA.png)

这显然假设您已经在某个时候签入了它。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-09T06:12:53.407

在 Visual Studio 下，您有多个级别的复制/粘贴，因此您可以通过按下来检索它`Ctrl``Alt``Ins`（如果我没记错的话）。

如果你还没有关闭 Visual Studio，它可能还在你的`Copy / Paste`圈子里，值得一试。

否则，您始终可以在 TFS 服务器中回滚到以前的签入状态（如果您在删除之前签入了所需的代码）。

首先，将您当前的状态签入服务器。然后回滚到包含您的代码的先前版本（右键单击您的解决方案，然后`Source Control -> Get Specific Version`）。现在在侧面编辑器中复制您的代码。重新转到最新版本（`Get latest Version...`在您的解决方案上）。现在将您的代码重新粘贴到正确的位置，您就完成了。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2015-08-17T20:31:54.623

如果**CTRL+Z**在 VS 中不起作用，请转到已删除文件的空文件夹并在那里尝试**CTRL+Z**。已经为我工作了好几次。

# c# - 处理某事时如何放置加载图像？

> ID：15894324
> 
> 赞同：3
> 
> 时间：2013-04-09T05:57:03.157
> 
> 标签：c#, asp.net

我有一个页面，当我们单击创建按钮时，它会发送 Web 请求以获取所有链接，但这意味着虽然需要一些时间才能使所有链接正常工作，但当时我想加载图像

```
 Button ID="btnRender" runat="server" Text="Page Render" OnClick="btnRender_Click" />
        <asp:Button ID="btn_submit" runat="server" Text="Submit" OnClientClick="javascript:finda();" />
        <asp:Button ID="btn_createlink" runat="server" Text="Create link" OnClick="btn_createlink_Click" /> 
```

当用户单击图像或文本时，我想调用 btn_createlink_Click" 按钮

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-04-09T06:19:41.700

**没有 Ajax 工具：**
这将在按钮单击时调用加载图像并在页面加载完成时隐藏图像。

```
<%@ Page Language="C#" AutoEventWireup="true"  CodeFile="Default.aspx.cs" Inherits="_Default" %>

<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">

<html xmlns="http://www.w3.org/1999/xhtml">
<head runat="server">
    <title></title>
    <script type="text/javascript">
      function ShowProgressBar() {
        document.getElementById('dvProgressBar').style.visibility = 'visible';
      }

      function HideProgressBar() {
        document.getElementById('dvProgressBar').style.visibility = "hidden";
      }
    </script>
</head>
<body onload="javascript:HideProgressBar()" >
    <form id="form1" runat="server">
     <div>
  <div style="float:left;">
      <asp:Button ID="btn_createlink" runat="server" Text="Create link" OnClick="btn_createlink_Click" OnClientClick="javascript:ShowProgressBar()" />
  </div>
  <div ID="dvProgressBar" style="float:left;visibility: hidden;" >
        <img src="/images/progress_bar.gif" /> resolving address, please wait...
  </div>
  <br style="clear:both" />
</div>
    </form>
</body>
</html> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-09T06:06:47.843

您可以借助 BackgroundWorker 组件的多线程来实现这一点。看看[多线程与Backgroundworker](http://msdn.microsoft.com/en-us/library/vstudio/ywkkz4s1.aspx)

[后台工作者](http://www.dotnetperls.com/backgroundworker) [C# 后台工作者](http://www.dotnetperls.com/backgroundworker)

[还有这个](https://stackoverflow.com/questions/4851069/background-worker-thread-problem)

您可以在 _Dowork 方法中调用您的 loading.gif 图像。希望这可以帮助。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-09T06:07:27.453

**编辑：**

您可能想看看 HttpResponse.Flush

> 强制将所有当前缓冲的输出发送到客户端。在请求处理过程中，可以多次调用 Flush 方法。

请参阅以下链接：[HttpResponse.Flush 方法](http://msdn.microsoft.com/en-us/library/system.web.httpresponse.flush.aspx)

您可以显示加载图像并在每 X 个加载的链接中调用此方法。

**老的：**

由于问题缺少信息，我假设您正在进行 Ajax 调用，以便从服务器获取链接集合并更新表。

我建议您使用 jQuery 并按照之前关于 SO 的答案，以便在发出请求时显示动画加载微调器并在完成时隐藏它。

请参阅链接：[Jquery Ajax 加载图像](https://stackoverflow.com/a/8761756/1036025)

# php - 如何将数组中的数据发送到数据库

> ID：15894329
> 
> 赞同：0
> 
> 时间：2013-04-09T05:57:19.830
> 
> 标签：php, codeigniter

我从数组中的输入框中获取一个值。我想使用单个插入查询将所有这些发布到数据库中，以便将所有相关数据一起插入 MySQL

这是我的代码

```
foreach ($_POST['stop'] as $stopIndex => $stopValue) {
    echo $stopname=$stopValue;
}

foreach ($_POST['timing'] as $timingIndex => $timingValue) {

}

foreach ($_POST['ampm'] as $ampmIndex => $ampmValue) {

} 
```

谁能帮我正确的代码在哪里写插入查询

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-09T06:03:24.620

如果您使用 codeigniter 获取数据的方式，这是一个示例。

只需准备一个带有适当键的数组（与您定义的数据库键相关）并使用 update_batch CI db 方法将其导入。

这实际上是您可以在模型中使用的方法。

```
function save_something() {
    $post_data = $this->input->post();

    foreach ($post_data as $key => $value) {
            $settings[] =  array( 'key' => $key, 'value' => $value);
        }
    }

    $this->db->update_batch('settings',$settings,'key');
    return true;
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-09T08:45:24.133

是的，当然。

假设你有类似下面的东西。

```
<input type="text" name="variable1['key1']">
<input type="text" name="variable1['key2']"> 
```

这`variable1`是一个数组。提交时，不要使用“for”或“foreach”直接将其序列化为：

```
$s = serialize($_POST['variable1']);
echo $s; 
```

你`$s`会是这样的：

```
"a:2:{s:6:"'key1'";s:6:"value1";s:5:"'bcd'";s:6:"value2";}" 
```

`$s`可以存储在数据库中的单个列中（类型可以是 DB 中的文本）。

在检索时，您可以反序列化转换回数组的列，您可以轻松使用它。

优点，数据库中的记录数量较少，并且在您的前端您无需使用循环语句。

更新 - 添加到数据库：

```
foreach ($_POST as $key)
{
  $s = serialize($key);
  mysqli_query("INSERT INTO `test`.`abc` (`id` ,`data`) VALUES (NULL , $s)");       
} 
```

序列化值充当字符串，因此结果将是记录数 == 数组数。

# forms-authentication - 如何在 Windows Store App 中使用 HttpClient 登录 ASP.Net MVC 网站（表单身份验证）？

> ID：15894330
> 
> 赞同：4
> 
> 时间：2013-04-09T05:57:20.960
> 
> 标签：forms-authentication, httpclient, windows-store-apps, antiforgerytoken

首先我用 cookie 容器创建了 HttpClientHandler

```
CookieContainer cookies = new CookieContainer();
HttpClientHandler handler = new HttpClientHandler();
handler.CookieContainer = cookies;
handler.UseCookies = true;
var hc = new HttpClient(handler); 
```

然后我点击基本网址只是为了获取带有“__RequestVerificationToken”的cookie

```
string r = await hc.GetStringAsync(BaseUrl); 
```

然后我将用户名/密码发布到登录网址

```
HttpContent content = new FormUrlEncodedContent(new[]
{
    new KeyValuePair<string, string>("UserName", "admin"),
    new KeyValuePair<string, string>("Password", password),
});
HttpResponseMessage response = await hc.PostAsync(LoginUrl, content); 
```

然后我收到服务器错误“所需的防伪表单字段“__RequestVerificationToken”不存在”。

但是当我在 fiddler 中检查请求时，我可以看到请求的 cookie 中已经添加了“__RequestVerificationToken”。

然后我尝试在IE中手动登录，并检查IE发送的请求类型。

然后我发现IE也把“__RequestVerificationToken”放在了表单中，所以我在表单中添加了cookie

```
new KeyValuePair<string, string>("__RequestVerificationToken", cookies.GetCookies(new Uri(BaseUrl)).Cast<Cookie>().FirstOrDefault(x => x.Name == "__RequestVerificationToken").Value) 
```

然后我得到了这个错误

“验证提供的防伪令牌失败*。cookie“_RequestVerificationToken”和表单字段“* _RequestVerificationToken”已交换。”

然后我无法在谷歌上得到任何关于这个错误的搜索结果。

任何想法？

谢谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-09T06:20:42.443

发现问题。

添加到 cookie 中的“__RequestVerificationToken”与添加到表单中的不同。

所以我从返回的 Html 字符串中取了表单中“__RequestVerificationToken”的值，然后就成功了！

# xml - 如何在 Flex 中删除保留 XML 中的属性的节点值

> ID：15894338
> 
> 赞同：0
> 
> 时间：2013-04-09T05:57:54.940
> 
> 标签：xml, apache-flex

我有一个像这样的 XML：

```
<root>
 <item>
  <item name="Fruit">Fruits</item>
  <item name="Vegetable">Vegetables</item>
 </item>
</root> 
```

如何单独删除节点值（“Fruits”“Vegetables”）在 Flex 中保留 XML 中的属性值“Fruit”“Vegetable”。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-09T07:48:22.350

删除 XML 节点的后代。

```
delete item.descendants()[0]; 
```

举个例子：

```
var xml:XML = 
    <root>
        <item>
            <item name="Fruit">Fruits</item>
            <item name="Vegetable">Vegetables</item>
        </item>
    </root>;

for each (var item:XML in xml.item.item)
{
    delete item.descendants()[0];
}

trace(xml); 
```

...会产生：

```
<root>
  <item>
    <item name="Fruit"/>
    <item name="Vegetable"/>
  </item>
</root> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-09T07:47:36.630

我认为您应该遍历这些项目。

如果要删除所有项目的值，请执行以下操作：

```
 var i:int = 0;
            for each (var node:XML in xml.item.item)
            {
                xml.item.item[i] = "";
                i++;
            } 
```

您可以指定一个条件：

```
 var i:int = 0;
            for each (var node:XML in xml.item.item)
            {
                if (node.@name == 'Fruit')
                    xml.item.item[i] = "";
                i++;
            } 
```

# entity-framework - 如何从数据库中获取列名？

> ID：15894340
> 
> 赞同：1
> 
> 时间：2013-04-09T05:57:56.540
> 
> 标签：entity-framework

我正在使用实体框架。有什么方法可以从数据库中获取表的列名吗？

我想显示数据库中的所有列名。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-09T06:08:39.917

据我所知，不是直接来自实体框架 - 但您始终可以对目录视图执行标准 T-SQL 查询：

```
SELECT
    ColumnName = c.Name,
    SchemaName = s.Name, 
    TableName = t.Name
FROM
    sys.columns c 
INNER JOIN 
    sys.tables t ON c.object_id = t.object_id
INNER JOIN 
    sys.schemas s ON t.schema_id = s.schema_id 
```

这将为您提供当前 SQL Server 数据库中的所有列，以及它们所属的架构和表。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-09T07:52:08.353

此查询类似于 marc_s 的查询，但使用`sys.objects`而不是`sys.tables`. 系统表`sys.tables`包含很多隐藏的 JOIN 语句，所以这个查询应该更快——

```
SELECT
  column_name = c.name,
  table_name = s.name + '.' + o.name
FROM sys.columns c 
JOIN sys.objects o ON c.object_id = o.object_id
JOIN sys.schemas s ON o.schema_id = s.schema_id
WHERE o.type = 'U' 
```

# java - GWT：SelectionChangeEvent.Handler 未检测到取消选择 CellTable 上的行

> ID：15894341
> 
> 赞同：2
> 
> 时间：2013-04-09T05:57:58.100
> 
> 标签：java, gwt, celltable

所以我有这段代码在 GWT Showcase 上几乎完全相同

```
selectionModel = new SingleSelectionModel<T>(keyProvider);
cellTable.setSelectionModel(selectionModel);

selectionModel.addSelectionChangeHandler(new SelectionChangeEvent.Handler() {
    public void onSelectionChange(SelectionChangeEvent event) {
        selectedRow = ((SingleSelectionModel<T>).selectionModel)
                .getSelectedObject();

    });

Column<T, Boolean> checkColumn = new Column<T, Boolean>(new CheckboxCell(true, false)) {
            @Override
            public Boolean getValue(T object) {
                return cellTable.getSelectionModel().isSelected(object);
            }
        };
        cellTable.addColumn(checkColumn, SafeHtmlUtils.fromSafeConstant("<br/>")); 
```

问题是，当我取消选中复选框时，SelectionChangeEvent 不会处理它。唯一调用 onSelectionChange 的实例是当我选择另一条记录时，但取消选择一条记录不会调用此方法。

有什么帮助吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-09T06:35:10.303

我猜你忘了添加 [DefaultSelectionEventManager 。](http://google-web-toolkit.googlecode.com/svn/javadoc/2.1/com/google/gwt/view/client/DefaultSelectionEventManager.html)

更改此行

```
cellTable.setSelectionModel(selectionModel); 
```

到

```
cellTable.setSelectionModel(selectionModel,
                     DefaultSelectionEventManager.<T> createCheckboxManager()); 
```

# c# - 当一行的删除按钮单击整个gridview时变得不可见

> ID：15894343
> 
> 赞同：2
> 
> 时间：2013-04-09T05:58:15.830
> 
> 标签：c#, asp.net-mvc, database

当我单击删除按钮时，相应的行将被删除。但是gridview中的其余行变得不可见。但是当我再次单击那些链接按钮时它会正确显示。请帮我。代码在这里：

```
protected void LinkButton2_Click(object sender, EventArgs e)
{

try
   {    SqlConnection con = obj.getcon();
        con.Open();

        GridView1.Visible = true;
        SqlDataAdapter adapter = new SqlDataAdapter("select e.student_id,e.student_name,e.student_nric from student_details e join student_vs_testsession_details f on e.student_id=f.student_id where f.testsession_id='" + lb_testid.Text + "' ", con);
        adapter.Fill(ds);
        GridView1.DataSource = ds;
        GridView1.DataBind(); 

        }

    catch (Exception ex)
    {
        Response.Write(ex);
    }
}
 protected void GridView1_RowDeleting(object sender, GridViewDeleteEventArgs e)
 {

    string id =Convert.ToString (GridView1.DataKeys[e.RowIndex].Value);

    SqlConnection con = obj.getcon();
    con.Open();

    SqlCommand cmd = new SqlCommand("DELETE FROM student_vs_testsession_details WHERE student_id='" + id + "'", con);
   // con1.Open();
    int temp = cmd.ExecuteNonQuery();
    if (temp != 0)
  {

      ScriptManager.RegisterStartupScript(this, this.GetType(), "alertmessage", "javascript:alert(' record deleted succesfully')", true);
  }
       con.Close();

       GridView1.Visible = true;

       GridView1.DataBind(); 

} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-09T06:03:03.713

缺少网格视图的数据源

```
Gridview1.DataSource = dt; 
```

添加此作为数据源需要重新绑定它。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-09T06:16:02.970

您在这里所做的是从数据库中删除它，而不是从表中删除它。（这是分配给您的网格的表）

因此，在这种情况下，您需要在删除行后重新填充数据表，或者从绑定到 gridview 的数据表中手动删除行

你可以做的是添加

**LinkBut​​ton2_Click(null,null)** 之后**GridView1.Visible = true;** 在删除功能

或重写数据集函数。

但不要忘记，每次您需要将表格分配给您的网格视图

希望这可以帮助

# spring - spring xml文件中的错误。需要spring mvc的指导

> ID：15894346
> 
> 赞同：1
> 
> 时间：2013-04-09T05:58:19.303
> 
> 标签：spring, spring-mvc

我是春天的新手，正在通过春天的示例程序....我的程序如下

用户.java

```
package project2;
import javax.persistence.Column;
import javax.persistence.Entity;
import javax.persistence.GeneratedValue;
import javax.persistence.Id;
import javax.persistence.Table;

@Entity
@Table(name="user")
public class User {

private Long id;
private String name;
private String password;
private String gender;
private String country;

@Id
@GeneratedValue
@Column(name="USER_ID")
public Long getId() {
    return id;
}
public void setId(Long id) {
    this.id = id;
}

@Column(name="USER_NAME")
public String getName() {
    return name;
}
public void setName(String name) {
    this.name = name;
}

@Column(name="USER_PASSWORD")
public String getPassword() {
    return password;
}
public void setPassword(String password) {
    this.password = password;
}

@Column(name="USER_GENDER")
public String getGender() {
    return gender;
}
public void setGender(String gender) {
    this.gender = gender;
}

@Column(name="USER_COUNTRY")
public String getCountry() {
    return country;
}
public void setCountry(String country) {
    this.country = country;
}

} 
```

用户DAO.java

```
package project2;
import java.util.List;

public interface UserDAO {

    public void saveUser(User user) ;
    public List<User> listUser() ;
    public void deleteUser(User user) ;
} 
```

用户控制器2.java

```
package project2;

import javax.servlet.http.HttpServletRequest;
import javax.servlet.http.HttpServletResponse;

import org.springframework.stereotype.Controller;
import org.springframework.transaction.annotation.Transactional;
import org.springframework.ui.ModelMap;
import org.springframework.web.bind.annotation.RequestMapping;
import org.springframework.web.bind.annotation.RequestMethod;
import org.springframework.web.servlet.ModelAndView;
import org.springframework.web.servlet.mvc.multiaction.MultiActionController;

@Controller
public class UserController2 extends MultiActionController {

    private UserDAO userDAO;

    public void setUserDAO(UserDAO userDAO) {
        this.userDAO = userDAO;
    }
    @RequestMapping(params = "add", method = RequestMethod.POST)
    public ModelAndView add(HttpServletRequest request,
            HttpServletResponse response, User user) throws Exception {
        userDAO.saveUser(user);
        return new ModelAndView("redirect:list.htm");
    }
    @RequestMapping(params = "delete", method = RequestMethod.POST)
    @Transactional
    public ModelAndView delete(HttpServletRequest request,
        HttpServletResponse response, User user) throws Exception {
        userDAO.deleteUser(user);
        return new ModelAndView("redirect:list.htm");
    }

    public ModelAndView list(HttpServletRequest request,
        HttpServletResponse response) throws Exception {
        ModelMap modelMap = new ModelMap();
        modelMap.addAttribute("userList", userDAO.listUser());
        modelMap.addAttribute("user", new User());
        return new ModelAndView("userForm", modelMap);
    }
} 
```

UserDAOImpl.java

```
package project2;

import java.util.List;
import org.hibernate.SessionFactory;
import org.springframework.orm.hibernate3.HibernateTemplate;

public class UserDAOImpl implements UserDAO {

    private HibernateTemplate hibernateTemplate;

    public void setSessionFactory(SessionFactory sessionFactory) {
        this.hibernateTemplate = new HibernateTemplate(sessionFactory);
    }

    @Override
    public void saveUser(User user) {
        hibernateTemplate.saveOrUpdate(user);
    }

    @Override
    @SuppressWarnings("unchecked")
    public List<User> listUser() {
        return hibernateTemplate.find("from User");
   }

     @Override
    public void deleteUser(User user) {
        hibernateTemplate.delete(user);
    }
 } 
```

UserController2-servlet.xml文件如下

```
<?xml version="1.0" encoding="UTF-8"?>
<beans xmlns="http://www.springframework.org/schema/beans"
   xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
   xmlns:p="http://www.springframework.org/schema/p"
   xmlns:aop="http://www.springframework.org/schema/aop"
   xmlns:tx="http://www.springframework.org/schema/tx"
   xsi:schemaLocation="http://www.springframework.org/schema/beans  
http://www.springframework.org/schema/beans/spring-beans-2.5.xsd
   http://www.springframework.org/schema/aop http://www.springframework.org/schema/aop/spring-aop-2.5.xsd
   http://www.springframework.org/schema/tx http://www.springframework.org/schema/tx/spring-tx-2.5.xsd">

<bean class="org.springframework.web.servlet.mvc.support.ControllerClassNameHandlerMapping"/>

<bean id="urlMapping" class="org.springframework.web.servlet.handler.SimpleUrlHandlerMapping">
    <property name="mappings">
        <props>
            <prop key="index.htm">indexController</prop>
        </props>
    </property>
</bean>

<bean id="viewResolver"
      class="org.springframework.web.servlet.view.InternalResourceViewResolver"
      p:prefix="/WEB-INF/jsp/"
      p:suffix=".jsp" />

<bean id="myDataSource" class="org.apache.commons.dbcp.BasicDataSource" destroy-method="close">
    <property name="driverClassName" value="com.mysql.jdbc.Driver"/>
    <property name="url" value="jdbc:mysql://localhost:3306/indi"/>
    <property name="username" value="admin"/>
    <property name="password" value=""/>
</bean>

<bean id="mySessionFactory" class="org.springframework.orm.hibernate3.annotation.AnnotationSessionFactoryBean">
    <property name="dataSource" ref="myDataSource" />
    <property name="annotatedClasses">
        <list>
            <value>Spring.project2.User</value>

        </list>
    </property>
    <property name="hibernateProperties">
        <props>
            <prop key="hibernate.dialect">org.hibernate.dialect.MySQLDialect</prop>
            <prop key="hibernate.show_sql">true</prop>
            <prop key="hibernate.hbm2ddl.auto">create</prop>
        </props>
    </property>
</bean>

<bean id="myUserDAO" class="project2.UserDAOImpl">
    <property name="sessionFactory" ref="mySessionFactory"/>
</bean>

<bean name="/user/*.htm" class="project2.UserController2" >
    <property name="userDAO" ref="myUserDAO" />
</bean>

<bean name="indexController" class="org.springframework.web.servlet.mvc.ParameterizableViewController"
      p:viewName="userForm" />

</beans> 
```

而userForm.jsp文件如下

```
<%@ page language="java" contentType="text/html; charset=ISO-8859-1"
pageEncoding="ISO-8859-1"%>
<!DOCTYPE html PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org 
/TR/html4/loose.dtd">
<%@taglib uri="http://www.springframework.org/tags/form" prefix="form"%>

<html>
<head>
<meta http-equiv="Content-Type" content="text/html; charset=ISO-8859-1">
<title>Insert title here</title>
</head>
<body>
 <center> WELCOME TO CUSTOMER ACCESS SITE.PLEASE ENTER THE FOLLOWING  
                 INFORMATION</center>
<form:form method="POST" action="add.htm" commandName="user">
<table>
<tr>
    <td><form:label path="name">Name</form:label></td>
    <td><form:input path="name" /></td>
</tr>

<tr>
    <td><form:label path="id">id</form:label></td>
    <td><form:input path="id" /></td>
</tr>

<tr>
    <td><form:label path="password">Name</form:label></td>
    <td><form:input path="password" /></td>
</tr>

<tr>
    <td><form:label path="gender">Name</form:label></td>
    <td><form:input path="gender" /></td>
</tr>

<tr>
    <td><form:label path="gender">Name</form:label></td>
    <td><form:input path="gender" /></td>
</tr>

<tr>
    <td><form:label path="country">Name</form:label></td>
    <td><form:input path="country" /></td>
</tr>

<tr>
    <td colspan="2">
        <input type="submit" value="Submit"/>
    </td>
</tr>
</table>  
</form:form>

</body>
</html> 
```

而web.xml文件如下...

```
 <listener>
    <listener-class>org.springframework.web.context.ContextLoaderListener</listener-class>
</listener>
<servlet>
    <servlet-name>UserController2</servlet-name>
    <servlet-class>org.springframework.web.servlet.DispatcherServlet</servlet-class>
    <load-on-startup>2</load-on-startup>
</servlet>
<servlet-mapping>
    <servlet-name>UserController2</servlet-name>
    <url-pattern>*.htm</url-pattern>
</servlet-mapping>
<session-config>
    <session-timeout>
        30
    </session-timeout>
</session-config> 
```

现在，当我运行此程序时，我的 UserController2-servlet.xml 文件中出现嵌套异常，如下所示

```
SEVERE: Exception sending context initialized event to listener instance of class  
org.springframework.web.context.ContextLoaderListener
org.springframework.beans.factory.BeanCreationException: Error creating bean with name
 'org.springframework.web.servlet.mvc.support.ControllerClassNameHandlerMapping#0'  
defined in ServletContext resource [/WEB-INF/UserController2-servlet.xml]:  
Initialization of bean failed; nested exception is  
org.springframework.beans.factory.BeanCreationException: Error creating bean with name
 '/user/*.htm' defined in ServletContext resource [/WEB-INF/UserController2-
servlet.xml]: Cannot resolve reference to bean 'myUserDAO' while setting bean property
 'userDAO'; nested exception is 
org.springframework.beans.factory.BeanCreationException: Error creating bean with name
 'myUserDAO' defined in ServletContext resource [/WEB-INF/UserController2-
servlet.xml]: Cannot resolve reference to bean 'mySessionFactory' while setting bean 
property 'sessionFactory'; nested exception is 
org.springframework.beans.factory.BeanCreationException: Error creating bean with name 
'mySessionFactory' defined in ServletContext resource [/WEB-INF/UserController2-
servlet.xml]: Initialization of bean failed; nested exception is 
org.springframework.beans.TypeMismatchException: Failed to convert property value of 
type 'java.util.ArrayList' to required type 'java.lang.Class[]' for property 
'annotatedClasses'; nested exception is java.lang.IllegalArgumentException: Cannot 
find class [Spring.project2.User]

Caused by: java.lang.ClassNotFoundException: Spring.project2.User
   at  
org.apache.catalina.loader.WebappClassLoader.loadClass(WebappClassLoader.java:1360)
at 
org.apache.catalina.loader.WebappClassLoader.loadClass(WebappClassLoader.java:1206)
at org.springframework.util.ClassUtils.forName(ClassUtils.java:257)
at org.springframework.util.ClassUtils.resolveClassName(ClassUtils.java:290) 
```

我已将这些文件保存在 src 中的文件夹 project2 下，项目名称为 Spring。我已将所有 jar 文件包含在 lib 中，并且所有 jar 都具有相同的版本。我不知道我哪里错了。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-09T06:02:48.853

在`UserController2-servlet.xml`看到这个声明中，更改`Spring.project2.User`为`project2.User`

```
<bean id="mySessionFactory"     
 class="org.springframework.orm.hibernate3.annotation.AnnotationSessionFactoryBean">
    <property name="dataSource" ref="myDataSource" />
    <property name="annotatedClasses">
       <list>
          <value>Spring.project2.User</value>
          .... 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-09T06:13:39.007

使用扫描仪查找实体：

```
<bean id="sessionFactory"
          class="org.springframework.orm.hibernate3.LocalSessionFactoryBean">
        <property name="packagesToScan">
            <list>
                <value>project2.*</value>
            </list>
        </property>
        <property name="hibernateProperties">
            <props>

            </props>
        </property>
        <property name="dataSource">
            <ref bean="dataSource" />
        </property>
    </bean> 
```

希望能帮到你：）

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-09T06:00:08.860

看这里

```
nested exception is java.lang.IllegalArgumentException: Cannot 
find class [Spring.project2.User] 
```

更改`Spring.project2.User`为`project2.User`

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-04-09T06:06:29.087

删除 Spring 字符串，就像跟随它会正常工作

```
<property name="annotatedClasses">
  <list>
    <value>project2.User</value>
  </list>
</property> 
```

祝你好运：）

# php - Safari PHP 表单提交 - 文件上传挂起

> ID：15894348
> 
> 赞同：2
> 
> 时间：2013-04-09T05:58:30.273
> 
> 标签：php, html, safari

我对 Safari 5+ 有疑问。当客户端通过简单的 HTML 表单选择要上传的图像文件时，Safari 5.1 的 MAC 版本（迄今为止我发现的唯一一个这样做的浏览器）会无限期地挂起。

我在 php.ini 中正确设置了上传时间和大小，并且它在所有其他浏览器（FF、Opera 甚至 IE！）中都有效，所以我认为我在 HTML 或 PHP 中没有一些新手错误。

我搜索了许多帖子，发现了与此问题相关的错误报告（[https://bugs.webkit.org/show_bug.cgi?id=5760](https://bugs.webkit.org/show_bug.cgi?id=5760)）。我还发现了几个 Ajax 解决方法，但没有一个是合适的。我没有在此页面上使用 Ajax，实际上由于重定向，我无论如何都不想这样做。

**有谁知道解决方案？**

另外.... 像添加`<? header('Connection: close'); ?>`到文件这样的建议会使 Opera 的情况变得更糟。

**编辑：2013 年 4 月 10 日** 我仍然不明白为什么 Safari 会挂起一些图像上传。我正在进行此编辑以防有人遇到类似问题。顺便说一句，当 Safari 在 VirtualBox 中运行时，每次上传都会失败，这与 Firefox 或 IE 工作正常不同。（可能是设置问题？）

我发现这个变通方法很容易实现，并且到目前为止可以与我可以测试的所有主流浏览器一起使用。（来源： http: [//www.atwebresults.com/php_ajax_image_upload/](http://www.atwebresults.com/php_ajax_image_upload/)）但是最初的问题仍然存在。谢谢你。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-06-20T20:07:01.943

lighttpd 的解决方法：

```
$HTTP["useragent"] =~ "Safari" {
$HTTP["useragent"] !~ "Chrome" {
  server.max-keep-alive-requests = 0
}
} 
```

Jamis Buck 发现了它，我添加了配置行。第二条规则避免将 keepalives 限制在也具有 Safari 子字符串的 Chrome 上。礼貌[https://bugs.webkit.org/show_bug.cgi?id=5760](https://bugs.webkit.org/show_bug.cgi?id=5760)

# hadoop - 如何为“hadoop-ec2”正确配置 Amazon EC2 AMI？

> ID：15894352
> 
> 赞同：3
> 
> 时间：2013-04-09T05:58:47.113
> 
> 标签：hadoop, amazon-web-services, amazon-ec2, ec2-ami, ec2-api-tools

我正在尝试在 Amazon EC2 上启动一个实例。我已经广泛研究了这个问题，但我没有找到任何有用的信息。

当我运行命令`hadoop-ec2 launch-cluster mycluster 2`时，我收到以下错误消息：

```
Starting master with AMI.
Required parameter 'AMI' missing (-h for usage) 
```

我已经输入了我的 AWS 密钥、AWS 密钥、AWS 密钥对等。我正在使用 hadoop-1.0.4。我使用的是默认 S3 存储桶 ( `hadoop-images`)，但我尝试了许多其他 AMI，但总是收到相同的错误消息。

有没有人遇到过这个问题？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-05-26T14:22:53.020

基本问题是`launch-hadoop-master`脚本执行的图像搜索没有返回任何结果。最可能的原因是不同地区可用的 AMI 不同（但这可能是由于您对`S3_BUCKET`和`HADOOP_VERSION`中所做的任何更改`hadoop-ec2-env.sh`）。

从`launch-hadoop-master`脚本：

```
# Finding Hadoop image
AMI_IMAGE=`ec2-describe-images -a | grep $S3_BUCKET 
                                  | grep $HADOOP_VERSION
                                  | grep $ARCH
                                  | grep available
                                  | awk '{print $2}'`

# Start a master
echo "Starting master with AMI $AMI_IMAGE" 
```

因此，似乎`AMI_IMAGE`没有设置为有效图像，因此搜索与各种`grep`过滤器匹配的 AMI 失败（Hadoop 1.0.4 分发的默认设置是`S3_BUCKET`is `hadoop-images`，`HADOOP_VERSION`is`0.19.0`和`ARCH`is`x86`如果您使用的是 m1.small实例）。如果您搜索[US-West-2 区域中的公共 AMI](https://console.aws.amazon.com/ec2/v2/home?region=us-west-2#Images%3afilter=all-images;platform=all-platforms;visibility=public-images;search=hadoop)，您会看到 Hadoop 映像并不多，但如果您搜索[US-East-1 区域中的公共 AMI](https://console.aws.amazon.com/ec2/v2/home?region=us-east-1#Images%3afilter=all-images;platform=all-platforms;visibility=public-images;search=hadoop)，您会看到那里不少。因此，解决此问题的一种方法是在 US-East-1 区域工作（这是最简单的），或者，`EC2_URL`在您的登录脚本中设置，`export EC2_URL=https://ec2.us-east-1.amazonaws.com`但现在您需要确保从 AWS 控制台将您的密钥放在该区域.

如果您确实更改`HADOOP_VERSION`为`1.0.4`，我会注意到

```
ec2-describe-images -a | grep hadoop-images 
                       | grep "1.0.4"'
                       | grep x86
                       | grep available 
```

不返回 US-East-1 区域中的任何图像。请注意，`HADOOP_VERSION`您从中运行命令的 Hadoop 分发版本 ( )`hadoop-ec2`不需要与将运行映像的 Hadoop 版本相同。

最后，作为一个直截了当的修复，您可以找到要使用的 AMI，并在和脚本中强制设置`AMI_IMAGE`为图像名称。`launch-hadoop-master``launch-hadoop-cluster`

# iphone - 如何列出属于当前应用程序的所有用户，而不是 QuickBlox for IOS 中的当前帐户？

> ID：15894353
> 
> 赞同：0
> 
> 时间：2013-04-09T05:58:48.217
> 
> 标签：iphone, ios, quickblox

我正在使用 Quick Blox ios SDK。我在 QuickBlox 仪表板中创建了两个应用程序。在列出应用程序中的用户时，它显示属于我的帐户的所有用户[两个应用程序的用户]，而不是当前应用程序的用户。

如何在 QuickBlox 中列出属于我的帐户中创建的任何特定应用程序的用户。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-12T07:17:30.613

有一个名为**Show only application users的复选框**

# java - Spring - 如何在不调用 ClassPathXmlApplicationContext 的情况下 @Autowire 一个 bean

> ID：15894355
> 
> 赞同：0
> 
> 时间：2013-04-09T05:59:02.273
> 
> 标签：java, spring, autowired

是否可以在不调用的情况下自动装配 bean：

```
ApplicationContext context = new ClassPathXmlApplicationContext("applicationContext.xml"); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-09T06:10:08.767

如果你的意思是 no-xml conifg 试试这个测试

```
class T1 {
}

class T2 {
    @Autowired
    T1 t1;
}

public class Main {

    public static void main(String[] args) throws Exception {
        AnnotationConfigApplicationContext ctx = new AnnotationConfigApplicationContext();
        ctx.register(T1.class, T2.class);
        ctx.refresh();
        System.out.println(ctx.getBean(T2.class).t1);
    }
} 
```

它会显示 T1 bean 被注入到 T2 bean

# c# - c#,Mysql数据比较问题

> ID：15894357
> 
> 赞同：1
> 
> 时间：2013-04-09T05:59:17.913
> 
> 标签：c#, asp.net, mysql

我正在使用 mysql 和 asp.net 将数据保存在 DB 中。当我在使用 server.HTMLEncode() 后将数据保存在 DB 中时，删除 \ 后将保存数据。这就是我保存数据的方式

```
INSERT INTO Users(ID,Name) Values(1,Server.HTMLEncode(User.Identity.Name)) 
```

在这种情况下，如果名称为 XXX\ABC ，则将其保存为 XXXABC。保存在数据库中时会删除斜线。

下次当我阅读相同内容时，我需要检查登录用户是否是我保存数据的那个人，所以我会关注

```
if ( existingRowEditor == Server.HtmlEncode(User.Identity.Name))
{

} 
```

但问题是上述条件总是错误的，因为我有以下值 `existingRowEditor="XXXABC"`和`Server.HtmlEncode(User.Identity.Name) =XXX\\ABC`.

那么如何检查上述条件是否为真呢？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-09T06:07:38.053

HTML 编码不适用于对数据进行编码以存储在数据库中。

反斜杠消失的原因是您将 SQL 代码粘贴在一起，并对文本进行编码以显示在网页中，而不是将其转义为 SQL 查询中的文本。反斜杠在 MySQL 中用作转义字符，因此字符串中的任何反斜杠都会转义下一个字符。

最好使用参数化查询，而不是将数据连接到 SQL 查询中。如果这是不可能的，您*必须*正确地转义文本以在 SQL 代码中的字符串文字中，因此您必须用双反斜杠替换每个反斜杠，并在每个撇号前面加上一个反斜杠。如果您未能正确转义它，您的应用程序将很容易受到 SQL 注入攻击。

HTML 编码值应该在您将其显示在网页中时完成，而不是在您将其放入数据库之前。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-09T06:23:05.370

您可以使用以下内容：

```
var sqlQueryString = "INSERT INTO Users(ID,Name) Values(@Id,@Name)";
var sqlCommand = new SqlCommand(sqlQueryString, sqlConnection);
sqlCommand.Parameters.Add(new SqlParameter("Id", 1);
sqlCommand.Parameters.Add(new SqlParameter("Name", User.Identity.Name);
sqlCommand.ExecuteNonQuery(); 
```

# wpf - WPF DVC 图表轴标注

> ID：15894366
> 
> 赞同：1
> 
> 时间：2013-04-09T06:00:16.040
> 
> 标签：wpf, xaml, visual-studio-2012

我在代码中创建了如下所示的 DVC:Chart，如何在图表中添加 x 轴和 y 轴标签？

```
 <DVC:Chart Name="callLogs" 
       Background="SteelBlue" Grid.ColumnSpan="2">

        <DVC:Chart.Series>
            <DVC:ColumnSeries Title="Calls per Hour" 
                IndependentValueBinding="{Binding Path=Key}"
                DependentValueBinding="{Binding Path=Value}">
            </DVC:ColumnSeries>
        </DVC:Chart.Series>
    </DVC:Chart> 
```

提前致谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-09T06:18:07.197

我设法弄清楚了：

```
 <DVC:Chart Name="callLogs" 
       Background="SteelBlue" Grid.ColumnSpan="2">
        <DVC:Chart.Axes>
            <DVC:LinearAxis Orientation="Y" Title="Ammount of calls"/>
            <DVC:LinearAxis Orientation="X" Title="Time (Hours)"/>
        </DVC:Chart.Axes>
        <DVC:Chart.Series>
            <DVC:ColumnSeries Title="Calls per Hour" 
                IndependentValueBinding="{Binding Path=Key}"
                DependentValueBinding="{Binding Path=Value}">
            </DVC:ColumnSeries>
        </DVC:Chart.Series>
    </DVC:Chart> 
```

但是，它为我标记了我的 x 轴，不知道如何自定义它，所以当我弄清楚时我会发布新的解决方案。

# visual-studio-2012 - Visual Studio 2012。负载测试。如何确定最大虚拟用户数？

> ID：15894370
> 
> 赞同：3
> 
> 时间：2013-04-09T06:00:42.017
> 
> 标签：visual-studio-2012, load-testing

我有 2 GB 的 RAM 和 1.8 GHz 处理器。我使用 Visual Studio 2012 进行负载测试站点。如何根据要测试的计算机的容量（RAM 和 CPU）以及 Internet 通道的宽度（每秒 8 兆比特）确定最大虚拟用户数？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-05-25T20:12:14.703

虚拟用户的数量仅取决于您的测试和目标网站。

在某些测试中，虚拟用户只需要执行一个简单的请求，而在其他测试中，它可以调用多个页面和服务。有时，目标网站太慢了。

个人而言，我更喜欢使用基于目标的模式。它类似于步进模式，但根据性能计数器阈值与定期用户负载调整来调整用户负载。因此，我通常在 Web 服务器上使用 40% 到 60% 之间的 CPU 运行负载测试。

# iphone - iPad应用程序奇怪的行为

> ID：15894372
> 
> 赞同：0
> 
> 时间：2013-04-09T06:00:48.963
> 
> 标签：iphone, ios, ipad, video

我正在开发一个简单的视频播放器基础应用程序，其中有八个按钮，单击该按钮视频播放，视频播放完成后按钮图像发生变化。如果用户关闭视频，则按钮图像不会改变。

这个小应用程序非常适合我，当我将它发送给客户端时，它的行为很奇怪，就像一些按钮可以工作，而有些按钮不能。

我该如何解决！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-09T06:21:03.083

我对 iPad 也有同样的问题。所有按钮在模拟器上都可以正常工作，但在 iPad 上它们随机工作。
我发现手势识别器对`TouchUpInside`事件非常精确。如果您点击并移动手指甚至一毫米，触摸事件就会被取消，因为它认为这是一次滑动。
我通过删除`addTarget:action:forControlEvents:`和编写我自己的方法来解决这个问题`gestureRecognizer`。

# jquery - WordPress 中的 carouFredSel jQuery

> ID：15894375
> 
> 赞同：0
> 
> 时间：2013-04-09T06:01:02.577
> 
> 标签：jquery, html, wordpress

我在这个 html 代码上使用 carouFredSel jQuery 作为滑块：

```
<div class="list_carousel">
        <ul id="foo">
            <li>c</li>
            <li>a</li>
            <li>r</li>
            <li>o</li>
            <li>u</li>
            <li>F</li>
            <li>r</li>
            <li>e</li>
            <li>d</li>
            <li>S</li>
            <li>e</li>
            <li>l</li>
            <li> </li>
        </ul>
        <div class="clearfix"></div>
        <a id="prev" class="prev" href="#">&lt;</a>
        <a id="next" class="next" href="#">&gt;</a>
        <div id="pager2" class="pager"></div>
    </div> 
```

和jQuery

```
<script type="text/javascript" src="javascript/jquery-1.8.2.min.js"></script>
<script type="text/javascript" src="javascript/jquery.carouFredSel-6.2.0.js"></script>
<script>
$(document).ready(function() {
$('#foo').carouFredSel({
                    auto: false,
                    prev: '#prev',
                    next: '#next',
                    pagination: "#pager",
                    mousewheel: true,
                    swipe: {
                        onMouse: true,
                        onTouch: true
                    }
                });
});
</script> 
```

当我在标准 html 中使用它时，它可以正常工作，但是当我将代码传输到 WordPress 站点时，查询就不起作用了。可能有什么问题？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-09T06:07:30.043

当然可能是脚本源错误..请注意您在粘贴该网站时引用的路径....

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-09T08:03:26.070

添加 wordpress 页眉和页脚。这对我有用。干杯。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-06-28T22:56:27.807

不确定您是否已解决此问题，但 hexblot 是否正确，请使用 'jQuery' 切换 '$' 以避免冲突。

# model-view-controller - 如何使我的 ViewModel 映射到我的实际模型？

> ID：15894376
> 
> 赞同：0
> 
> 时间：2013-04-09T06:01:06.783
> 
> 标签：model-view-controller, asp.net-mvc-4

我的应用程序中有一个选项卡，单击该选项卡后，将在可编辑的文本框中向他显示​​用户的详细信息（使用占位符 HTML 属性）。用户可以简单地查看它们，也可以编辑他想要的任何细节。

现在我的问题是：我应该为这种情况创建一个 View Model 类还是应该使用实际的 Account 模型类？我想我将不得不创建一个 View Model 类，因为我只需要 Account 模型类中的“一些”属性，但如果我这样做，我将如何使其“可编辑”并随后映射编辑的属性（如果有的话) 到实际的 Account 模型类？

另外，如果我需要创建一个视图模型类，请告诉我需要在哪里存储视图模型类。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-09T06:15:27.243

> 我应该为这种情况创建一个 View Model 类还是应该使用实际的 Account 模型类？

是的，最好创建一个模型来代表您需要的操作，并这样做以防止发布不足和过度发布。所以你在你期望用户工作的地方工作。例如，如果你有一个`AccountModel`有很多属性的，你只需要在一个动作上处理它的十个，在一个`add`动作上处理它的五个属性`edit`，那么你创建两个 ViewModel：

```
// your model or entity
public class AccountModel {
    // the list of properties goes here
}
// your view models
public class CreateAccountModel {
    public string Username {get;set;}    
    public string Password {get;set;}
    public string Phone {get;set;}
}
// this model is for the scenario 
// where you want users to edit their basic info
// but not the password (e.g. you have a separate
// functionality for changing the password)
public class EditAccountModel {
    public string Username {get;set;}    
    public string Phone {get;set;}
} 
```

现在要将您的视图模型映射到您的实际模型或实体，您可以使用映射器工具或自己做（很累，但对于小模型来说是一个选项）。以下是步骤：

*   您从帖子中收到模型/实体
*   您从数据库中查询您的实体
*   您将值从视图模型复制到模型/实体
*   您将模型/实体保存回数据库

> 我到底需要在哪里存储 View Model 类

您可以将它放在您的 MVC 项目`Models`中创建的文件夹下。这实际上更像是一种偏好，并且没有标准的方法 - 特别是当您开始分层应用程序时。把它放在更有意义的地方。

# scheme - 封装列表的某些部分

> ID：15894378
> 
> 赞同：0
> 
> 时间：2013-04-09T06:01:08.110
> 
> 标签：scheme

我正在尝试编写一个在“分隔符”元素之间“封装”（即放入列表中）列表元素的过程。

```
(my-proc '(1 + 2))
=> ((1) (2))

(my-proc '(x * y + z ^ 2 + 1 + 5))
=> ((x * y) (z ^ 2) (1) (5))

(my-proc '((x + 1) * y + 5))
=> (((x + 1) * y) (5)) 
```

在这种情况下，可以对过程进行硬编码以将 + 符号定义为分隔符。

假设定义了 foldr （折叠右操作），我更喜欢它。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-09T06:13:55.017

我没有给出完整的解决方案，因为这看起来真的很家庭作业。

```
(define (split-expr expr)
   (foldr (lambda (e es)
                  (if (eq? e '+)
                      <???>    ; do split
                      (cons (cons e (car es))
                            (cdr es))))
          <???>    ; what should start be?
          es)) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-10T03:02:27.427

只是为了好玩，这是一个[延续传递风格](https://stackoverflow.com/questions/8544127/why-continuation-passing-style)的版本（不`foldr`，可能不适合作为家庭作业的答案）：

```
(define split/cps
  (λ (sep ls)
    (let loop ([ls ls] [k (λ (item acc)
                               (if item (cons item acc) acc))])
      (cond
        [(null? ls)
          (k #f '())]
        [(eq? sep (car ls))
          (loop (cdr ls)
                (λ (item acc)
                  (k #f (if item (cons item acc) acc))))]
        [else
          (loop (cdr ls)
                (λ (item acc)
                  (k (if item
                         (cons (car ls) item)
                         (list (car ls)))
                     acc)))])))) 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-10T13:08:09.717

这是另一种方法，也没有`foldr`：

```
(define split/values
  (λ (sep ls)
    (let loop ([ls ls])
      (cond
        [(null? ls)
          '()]
        [else
          (let-values ([(a d) (car-to-sep sep ls)])
            (if (null? a)
                (loop d)
                (cons a (loop d))))]))))

(define car-to-sep
  (λ (sep ls)
    (let loop ([ls ls] [a '()])
      (cond
        [(null? ls)
          (values '() '())]
        [(eq? sep (car ls))
          (values '() (cdr ls))]
        [else
          (let-values ([(a d) (loop (cdr ls) a)])
            (values (cons (car ls) a) d))])))) 
```

# android - 如何缓存远程视图？

> ID：15894387
> 
> 赞同：2
> 
> 时间：2013-04-09T06:02:12.853
> 
> 标签：android

我需要知道是否可以缓存布局远程视图？

如果是这样我如何缓存或清理缓存这里有什么例子我试着用谷歌搜索我找不到如何缓存布局远程视图的例子

例如如何缓存此通知进度！

感谢您的时间

```
 updateTask = this;

      //setup notification ID and information
      Random r = new Random();
      NOTIFICATION_ID  = r.nextInt(80-65) + 1;
      NOTIFICATION_ID++;

      int icon = R.drawable.icon;
      long when = System.currentTimeMillis();

      notification = new Notification(icon, getString(R.string.app_name), when);
      contentView = new RemoteViews(getPackageName(), R.layout.custom_notification);
      contentView.setTextViewText(R.id.text, "cool"+NOTIFICATION_ID);

      notification.contentView = contentView;

      notification.flags |= Notification.FLAG_NO_CLEAR;
      notification.flags |= Notification.FLAG_ONGOING_EVENT;

      Intent notificationIntent = new Intent();

      notificationIntent.setFlags(Intent.FLAG_ACTIVITY_NEW_TASK | Intent.FLAG_ACTIVITY_CLEAR_TOP);
      notificationIntent.setAction(Intent.ACTION_MAIN);
      PendingIntent contentIntent = PendingIntent.getActivity(BabupMain.this, 0, notificationIntent, 0);

      notification.contentIntent = contentIntent;

      mNotificationManager.notify(NOTIFICATION_ID, notification); 
```

# eclipse - 如何限制 Eclipse e4 的最小窗口大小

> ID：15894393
> 
> 赞同：4
> 
> 时间：2013-04-09T06:02:48.690
> 
> 标签：eclipse, window, size, minimum, e4

我正在制作一个基于 Eclipse e4 框架的应用程序。我想知道如何控制应用程序窗口的最小尺寸。为此目的，似乎无法在 e4xmi 文件中定义任何属性。

有谁知道该怎么做？

我在 Eclipse 社区论坛 ( [http://www.eclipse.org/forums/index.php/t/244875/](http://www.eclipse.org/forums/index.php/t/244875/) ) 中找到了一个帖子，说可以通过创建自己的渲染器来实现。我该怎么做呢？

非常感谢你 ：）

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-09T11:40:29.167

假设您使用的是内置的 SWT 渲染器，您还可以监听 E4 MWindow 元素的创建并获得对底层 SWT Shell 的访问权限。在此示例中，侦听器在 AddOn 中注册，您可以将其添加到您的 e4xmi。

```
import javax.annotation.PostConstruct;

import org.eclipse.e4.core.services.events.IEventBroker;
import org.eclipse.e4.ui.model.application.ui.basic.MWindow;
import org.eclipse.e4.ui.workbench.UIEvents;
import org.eclipse.swt.widgets.Shell;
import org.osgi.service.event.Event;
import org.osgi.service.event.EventHandler;

public class MinSizeAddon {
    @PostConstruct
    public void init(final IEventBroker eventBroker) {
        EventHandler handler = new EventHandler() {
            @Override
            public void handleEvent(Event event) {
                if (!UIEvents.isSET(event))
                    return;

                Object objElement = event.getProperty(UIEvents.EventTags.ELEMENT);
                if (!(objElement instanceof MWindow))
                    return;

                MWindow windowModel = (MWindow)objElement;
                Shell theShell = (Shell)windowModel.getWidget();
                if (theShell == null)
                    return;

                theShell.setMinimumSize(400, 300);
            }
        };
        eventBroker.subscribe(UIEvents.UIElement.TOPIC_WIDGET, handler);
    }
} 
```

请注意，这将针对应用程序中的任何 MWindow 执行，并且可以有更多（即，当 MPart 从 MPartStack 分离到单独的窗口中时）。如果您想将执行限制在特定的 MWindows，我建议在 e4xmi 中向窗口添加一个标签，并在设置最小大小之前检查此标签。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2020-08-20T08:00:59.307

如果有人仍然希望在 e4 应用程序中执行此操作并且不想滚动他们自己的渲染器，您可以在零件类的后期构造中简单地执行以下操作：

```
@PostConstruct
public void postConstruct(Composite parent) {
  parent.getShell().setMinimumSize(300, 300);
  //...
} 
```

框架传入的父`Composite`级使您可以访问`Shell`，这使您可以设置最小大小。这会阻止应用程序的大小调整为小于指定的最小大小（以像素为单位）。

# ios - 我可以在 for 循环中将键值对添加到 NSarray 或字典吗？

> ID：15894398
> 
> 赞同：0
> 
> 时间：2013-04-09T06:03:03.703
> 
> 标签：ios, plist, nsdictionary, nsmutabledictionary

我想从带有键值对的 for 循环中向 NSMutabledictionary 添加值？

目前正在使用此代码

```
for(int j=0;j<[array count];j++){
    for(int l=0;l<array2 count] ;l++){   
          // retreive the category from plist ,then check whether its matching with "catid"
          NSString *temp=[NSString stringWithFormat:@"%@",allBookPlist[@"listbook"][j][@"cate"][l][@"categories"]];

           if([catId isEqualToString:temp]){    
                 // "catid" is matching with temp then ,retreive the corresponding bid from plist
                 NSString *str=[NSString stringWithFormat:@"%@",allBookPlist[@"listbook"][j][@"bid"]];
                 // add that  value "bid" and key "catid" to a mutabledictionary
                 NSMutableDictionary *m=[[NSMutableDictionary alloc]init];
                 [m setValue:str forKey:catId];
            }
     }
} 
```

结果是每次最终字典“m”的值被最新值替换时，但我希望所有值都在一起？

![在此处输入图像描述](https://i.stack.imgur.com/L3lLu.png)我试图获得这样的输出

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-09T06:10:30.563

我想您可以将字典的初始化移到for之外，因为在for中它在每个循环中都被初始化了，这就是为什么它只有一个值

```
NSMutableDictionary *m = [[NSMutableDictionary alloc] init];
for(int j=0; j < [array count]; j++)
{
    NSMutableArray *containerArray = [[NSMutableArray alloc] init];
    for(int l=0;l<[array2 count] ;l++)
    {
        // retreive the category from plist ,then check whether its matching with "catid"
        NSString *temp=[NSString stringWithFormat:@"%@",allBookPlist[@"listbook"][j][@"cate"][l][@"categories"]];

        if([catId isEqualToString:temp])
        {
            // "catid" is matching with temp then ,retreive the corresponding bid from plist
            NSString *str=[NSString stringWithFormat:@"%@",allBookPlist[@"listbook"][j][@"bid"]];

            // add that  value "bid" and key "catid" to a mutabledictionary
             [containerArray addObject:str];
        }
        [m setValue:containerArray forKey:catId];
    }
} 
```

**更新**

我已经更新了上面的代码，以便在图片中调整您的输出

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-09T06:07:56.533

试试这个代码。

```
NSMutableDictionary *m=[[NSMutableDictionary alloc]init];
for(int j=0;j<[array count];j++)
{
    for(int l=0;l<array2 count] ;l++)
    {
        // retreive the category from plist ,then check whether its matching with "catid"
        NSString *temp=[NSString stringWithFormat:@"%@",allBookPlist[@"listbook"][j][@"cate"][l][@"categories"]];
        if([catId isEqualToString:temp])
        {
            // "catid" is matching with temp then ,retreive the corresponding bid from plist
            NSString *str=[NSString stringWithFormat:@"%@",allBookPlist[@"listbook"][j][@"bid"]];
            // add that  value "bid" and key "catid" to a mutabledictionary
            [m setValue:str forKey:catId];
        }
    } 
```

我认为您每次都在循环内分配一个新字典，这不是必需的。分配一次，然后继续向该可变字典添加值。

***我想，每次你都有不同`catId`的 KEY***

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2016-07-26T19:57:05.453

在你的循环中，请尝试这个逻辑

```
NSObject *collectionIndexString = indexPath;
NSMutableDictionary *tempDict = [myNSMutableArray[row] mutableCopy];
tempDict[@"collectionIndex"] = collectionIndexString;// Setting Key and Value
[myNSMutableArray replaceObjectAtIndex:row withObject:tempDict]; 
```

# c# - 字符串未被识别为有效的 DateTime

> ID：15894400
> 
> 赞同：1
> 
> 时间：2013-04-09T06:03:11.120
> 
> 标签：c#, asp.net, datetime

我的代码是：

```
 protected void Page_Load(object sender, EventArgs e)
    {
        string myDate = Request.QueryString["period"];
        if (!String.IsNullOrEmpty(myDate))
        {
            myDate = myDate.Replace("!", ":");
        }
        DateTime dt1 = Convert.ToDateTime(myDate);
        DateTime dt2 = DateTime.Now;
        TimeSpan variable = dt2 - dt1;
        if (variable.TotalMinutes > 5)
        {
            Response.Write("Download time is expired now");
        }
        else
        {
            Response.Redirect("Default.aspx", false);
        }

    } 
```

我收到如下错误：

> *字符串未被识别为有效的日期时间。*

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-09T06:06:12.490

用方法试试[`DateTime.ParseExact()`](http://msdn.microsoft.com/en-us/library/w2sa9yss.aspx)；

> 使用指定的格式和特定​​于区域性的格式信息将日期和时间的指定字符串表示形式转换为其等效的 DateTime。**字符串表示的格式必须与指定的格式完全匹配。**

```
DateTime date = DateTime.ParseExact(myDate, "dd/MM/yyyy hh:mm:ss tt", CultureInfo.InvariantCulture); 
```

这是一个[`DEMO`](http://ideone.com/BWq8wD).

您可以从以下位置查看更多自定义日期格式[`Custom Date and Time Format Strings`](http://msdn.microsoft.com/en-us/library/8kb3ddd4.aspx)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-09T06:05:30.200

利用[`DateTime.ParseExact`](http://msdn.microsoft.com/en-us/library/system.datetime.parseexact.aspx)

因为你有这个日期格式像`09/04/2013 10:41:45 AM`

```
DateTime dt1 = DateTime.ParseExact(myDate, "MM/dd/yyyy hh:mm:ss tt", 
                                           CultureInfo.InvariantCulture) 
```

如果`09`是一天，则将模式更改为`dd/MM/yyyy hh:mm:ss tt`

有关日期和时间格式字符串的更多信息，

*   [自定义日期和时间格式字符串](http://msdn.microsoft.com/en-us/library/8kb3ddd4.aspx)

# java - 使用大数据准备 jasper 报告时出现问题

> ID：15894410
> 
> 赞同：3
> 
> 时间：2013-04-09T06:04:04.443
> 
> 标签：java, jasper-reports

我在 iReport 中使用 JRBeanDatasource 并从我的 java 代码中传递这个数据源。但我有大量数据。所以得到 OutOfMemory 异常。我已经看到了虚拟器概念，但由于我正在传递 javabeandatasource 并在将所有数据存储在数据源（内存）中时遇到问题，所以无法使用。

有什么方法可以接收数据并直接写入报告而不是存储在内存中。

我需要导出为 xlsx 格式，所有数据都应该只在一张纸上。

# java - 计算Java中任何对象的总内存使用量

> ID：15894414
> 
> 赞同：3
> 
> 时间：2013-04-09T06:04:22.380
> 
> 标签：java, jprofiler

我正在使用 jProfiler。我有一个 X 类的对象。这个类有许多 String、Integer 和其他类类型的属性。我想知道 X 类的单个对象消耗了多少内存。

当我使用 jProfile 查找内存使用情况时，我只得到 X 类型对象的大小。我假设 jProfiler 没有显示其成员变量使用的内存。例如，X 类的 String 属性对 String 使用的总内存有贡献。

我想弄清楚 X 类的总内存使用情况，包括其所有属性对象使用的内存。有关如何使用 jProfile 或其他一些工具/代码实现这一目标的任何信息？

提前致谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-09T06:14:44.990

看看这个[http://www.javamex.com/tutorials/memory/object_memory_usage.shtml](http://www.javamex.com/tutorials/memory/object_memory_usage.shtml)。它包含有关如何计算 Java 对象内存使用量的信息以及对计算它的工具的引用。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-09T06:16:37.247

这是一个非常好的工具，可以显示对象使用的总内存

[http://www.eclipse.org/mat/](http://www.eclipse.org/mat/)

它不仅会显示它自己使用的内存，还会显示由于它拥有的引用而保持活跃的内存量。

# ios - 在哪里为子类 uitableviewcell 创建自动布局约束？

> ID：15894415
> 
> 赞同：16
> 
> 时间：2013-04-09T06:04:26.217
> 
> 标签：ios, uitableview, constraints, autolayout, layoutsubviews

我正在尝试将自动布局用于我正在创建的 uitableviewcell 子类，我希望能提供一些关于放置布局约束创建代码的方法的建议。我一直在四处寻找，我找到的所有信息都谈到了在 viewDidLoad 方法中添加子视图后添加约束。据我所知， viewDidLoad 不是 uitableviewcell 子类的选项。

我正在使用界面生成器来创建自定义单元格并在我的代码中动态分配它。没什么特别的...我将 uitableviewcell 子类化，以便可以将自定义 uiview 添加到单元格。再一次，没有什么特别惊天动地的......当我尝试根据我添加到界面构建器中的单元格的标签来定位我的自定义 uiview 时，我遇到了困难。

这是创建自定义 uiview 并将其添加到单元格内容视图的代码：

```
- (id)initWithCoder:(NSCoder *)decoder
{
    if ((self = [super initWithCoder:decoder]))
    {
        [self initSelf];
    }
    return self;
}

- (id)initWithStyle:(UITableViewCellStyle)style reuseIdentifier:(NSString *)reuseIdentifier
{
    if ((self = [super initWithStyle:style reuseIdentifier:reuseIdentifier]))
    {
        [self initSelf];
    }
    return self;
}

- (void) initSelf
{
    // Initialization code
    _badgeLabel = @"";

    if (!_customBadge)
    {
        _customBadge = [CustomBadge customBadgeWithString:self.badgeLabel];
    }

    // hide the badge until needed
    self.customBadge.hidden = YES;

    // add badge to the cell view hierarchy
    [self.customBadge setTranslatesAutoresizingMaskIntoConstraints:NO];
    [self.customBadge setContentHuggingPriority:UILayoutPriorityDefaultHigh forAxis:UILayoutConstraintAxisHorizontal];
    [self.customBadge setContentHuggingPriority:UILayoutPriorityDefaultHigh forAxis:UILayoutConstraintAxisVertical];

    [self.contentView addSubview:self.customBadge];
} 
```

如果我将约束代码放在 initSelf 的末尾，则不会发生任何事情。我的 _customBadge 的位置保持默认。当我将约束代码放在 layoutSubviews 中时，应用了定位；但我很确定这是错误的地方。这是代码：

```
- (void) layoutSubviews
{
    [self.contentView addConstraint:[NSLayoutConstraint
                                     constraintWithItem:self.customBadge
                                     attribute:NSLayoutAttributeLeft
                                     relatedBy:NSLayoutRelationEqual
                                     toItem:self.competence
                                     attribute:NSLayoutAttributeRight
                                     multiplier:1.0
                                     constant:-14.0]];

    [self.contentView addConstraint:[NSLayoutConstraint
                                     constraintWithItem:self.customBadge
                                     attribute:NSLayoutAttributeTop
                                     relatedBy:NSLayoutRelationEqual
                                     toItem:self.competence
                                     attribute:NSLayoutAttributeTop
                                     multiplier:1.0
                                     constant:0.0]];

    [super layoutSubviews];
} 
```

谁能告诉我这段代码应该去哪里？当然，每次布局发生时我都会创建重复的约束。

谢谢

* * *

## 回答 #1

> 赞同：31
> 
> 时间：2013-04-09T06:44:04.293

您需要更新约束，例如：

```
-(void)updateConstraints{
 // add your constraints if not already there
 [super updateConstraints];
} 
```

将视图添加到 superview 后，您需要调用`[self setNeedsUpdateConstraints]`以开始使用它们。通过这样做，渲染运行时将`updateConstraints`在正确的时间调用。

# c# - 如何在 C# 中将数据源绑定到 .rdlc 报告

> ID：15894416
> 
> 赞同：2
> 
> 时间：2013-04-09T06:04:29.090
> 
> 标签：c#, winforms, dataset, rdlc

朋友们，我用c#开发了一个简单的应用程序，它有两个rdlc报告

我使用下面的代码将数据源绑定到报告查看器

```
 this.reportViewer1.LocalReport.ReportPath = @"C:\Documents and Settings\Administrator\My Documents\Visual Studio 2008\Projects\reports\reports\Report1.rdlc";
 reportViewer1.LocalReport.DataSources.Clear();
 reportViewer1.LocalReport.DataSources.Add(new ReportDataSource("customer", dt.Tables[0])) ;
 this.reportViewer1.RefreshReport(); 
```

但是当报告生成时，它是空报告，没有数据将显示，任何意见？？？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-07-08T11:22:07.440

当您通过向导在项目中添加 .rdlc 报告时，默认情况下它将数据集名称设为**'DataSet1'**。现在，如果要动态绑定新数据集，则该数据集的名称必须为**'DataSet1'**。尝试更改它并检查 Table[0] 是否包含一些**DataType**与原始 dataType 匹配的数据（行） `DataSet1`。如果 DataType 不匹配，则数据不会出现在您的 ReportViewer 中。试试这个代码： -

```
string exeFolder = (Path.GetDirectoryName(Application.StartupPath)).Substring(0, (Path.GetDirectoryName(Application.StartupPath)).Length - 3);
string reportPath = Path.Combine(exeFolder, @"Reports\SessionReport.rdlc");
Microsoft.Reporting.WinForms.ReportDataSource rds = new Microsoft.Reporting.WinForms.ReportDataSource("DataSet1", yourDataSet.Tables[0]);
this.reportViewer1.LocalReport.DataSources.Add(rds);
this.reportViewer1.LocalReport.ReportPath = reportPath;
this.reportViewer1.RefreshReport(); 
```

有关 .rdlc 报告（核心逻辑）的更多详细信息，请参阅以下链接 [如何在没有数据库的情况下创建报告 (RDLC)？](https://stackoverflow.com/questions/5275801/how-to-create-report-rdlc-without-database)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-09T06:22:46.000

试试下面，可能是数据源名称不正确的问题。

```
reportViewer1.LocalReport.DataSources.Add(new ReportDataSource(ds.DataSetName + "_" + ds.Tables[0].TableName, ds.Tables[0])); 
```

您可以检查 rdlc 文件内容上的数据集名称。检查数据集的名称属性是否与您在代码中给出的匹配。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-05-21T23:44:14.763

这就是我使用对象绑定更新数据的方式： 在 Form1.cs 文件中：

```
private myClass m_products = new Products();
public Form1()
        {
            InitializeComponent();
        }

        private void Form1_Load(object sender, EventArgs e)
        {
           this.PaperBindingSource.DataSource = m_products.GetProducts(); 
```

`this.PaperBindingSource.DataSource`很重要。

# ruby-on-rails - 类 CommentsController (TypeError) 的超类不匹配，重命名的最佳方法是什么？

> ID：15894417
> 
> 赞同：9
> 
> 时间：2013-04-09T06:04:29.480
> 
> 标签：ruby-on-rails, ruby, ruby-on-rails-3, model-view-controller

我今晚在部署时遇到了一些问题，我正试图尽快解决这个问题

我不知道为什么会这样。在本地一切正常，但在heroku上却不行。在研究之后，我尝试了各种不同的修复方法，但我可能不得不完全重命名这个类 CommentsController（希望这有效）。最好的方法是什么？我对 Rails 很陌生，所以我需要一些帮助来正确更改这些内容。

这是 CommentsController 的样子，仅供参考：

```
class CommentsController < ApplicationController
  def new
    @post = Post.new(params[:post])
  end

  def show
    @comment = Comment.find(params[:id])
    respond_to do |format|
      format.js
    end
  end

  def create
    @post = Post.find(params[:post_id])
    @comment = Comment.new(params[:comment])
    @comment.micropost = @post
    @comment.user = current_user
    if @comment.save
      redirect_to(:back)
    else
      render partial: 'shared/_comment_form', locals: { post: @post }
    end
  end
end 
```

评论与每个帖子相关联（用户可以对帖子发表评论）。如果需要，我也会发布其他代码。

这是heroku日志中的错误

```
2013-04-09T05:55:19.454545+00:00 app[web.2]: /app/app/controllers/comments_contr
oller.rb:1:in `<top (required)>': superclass mismatch for class CommentsControll
er (TypeError) 
```

路由.db

```
SampleApp::Application.routes.draw do
  resources :posts, :path => "posts"

  resources :users do
    resources :messages do
      collection do
        post :delete_selected
      end
    end
  end

  ActiveAdmin.routes(self)

  devise_for :admin_users, ActiveAdmin::Devise.config

  resources :users do
    member do
      get :following, :followers
    end
  end

  resources :sessions, only: [:new, :create, :destroy]
  resources :posts, only: [:create, :destroy]
  resources :relationships, only: [:create, :destroy]
  resources :posts do
    resources :comments
  end

  root to: 'static_pages#home'

  match '/signup',   to: 'users#new'
  match '/signin',   to: 'sessions#new'
  match '/signout',  to: 'sessions#destroy', via: :delete

  match '/post',    to: 'static_pages#post'
  match '/post1',   to: 'static_pages#post1'
  match '/faq',     to: 'static_pages#faq'
  match '/review',  to: 'users#review'
  match "/posts/:id/review" => "posts#review"
end 
```

当我在 rails app 文件夹中运行高级索引搜索时，出现了以下相关文件

```
- comments_controller.rb
- comments_helper.rb
- comments_helper_spec.rb
- comments_controller_spec.rb
- 3 migration files
- routes.rb (posted above)
- schema.rb (table called "active_admin_comments" and table called "comments')
- post.rb model (has_many :comments)
- user.rb model (has_many :comments)
- comment.rb model
- active_admin.rb in config/initializer (any instance where I find "comments" has been #'ed out") 
```

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-04-10T14:24:12.820

我遇到了几乎相同的问题（服务器正确启动，但 RSpec 失败并出现同样的错误）。就我而言，问题出在 ActiveAdmin (0.6.0) 中。不知道到底是什么，也许与命名空间有关。

刚刚降级到 0.5.0 在那个版本上，我对 CommentsController 没有任何问题。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-06-27T21:56:48.430

我与管理命名空间有类似的冲突，因为我`Admin::CommentsController`在我的应用程序中定义了一个。

尝试将 ActiveAdmin 的默认命名空间更改为“admin”以外的名称

配置/初始化程序/active_admin.rb

```
config.default_namespace = :activeadmin # Default :admin 
```

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2013-05-29T07:20:58.303

我假设 ActiveAdmin 有自己的 CommentsController 来自另一个基类。它只影响运行测试，所以我只是将路线更改为：

```
unless Rails.env.test?
  devise_for :admin_users, ActiveAdmin::Devise.config
  ActiveAdmin.routes(self)
end 
```

除非您想针对 ActiveAdmin 中的路由进行测试，否则此解决方案效果很好。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2013-12-29T17:39:56.837

从 Active Admin 0.6.1 开始，您可以重命名 Active Admin 包含的评论模块，使其不会与您自己的冲突。这些是选项：

```
# == Admin Comments
#
# This allows your users to comment on any resource registered with Active Admin.
#
# You can completely disable comments:
# config.allow_comments = false
#
# You can disable the menu item for the comments index page:
# config.show_comments_in_menu = false
#
# You can change the name under which comments are registered:
# config.comments_registration_name = 'AdminComment' 
```

# android - 如何将值传递给 AsyncTask Android

> ID：15894418
> 
> 赞同：4
> 
> 时间：2013-04-09T06:04:36.843
> 
> 标签：android, android-asynctask

这是我第一次使用 AsyncTask 并且可能有点困惑，关于传递值。

我有 4 `ArrayList<String>`s，其中包含应插入数据库的数据。我希望这个插入在后台完成。通过从我拥有的 4 个数组列表中获取值，将至少有 50 行插入到数据库中，并且一次插入 1 行。

有人可以指导我如何做到这一点吗？

现在我创建了一个扩展 AsyncTask ::: 的子类 InsertData

```
private class InsertData extends AsyncTask<Params, Progress, Result>{

        @Override
        protected Result doInBackground(Params... params) {
            // TODO Auto-generated method stub
            return null;
        }   
} 
```

我在 4 个数组列表中有值，我需要从每个数组列表中检索 1 个条目并将这 4 个值传递给数据库。如何将这 4 个值传递给 AsyncTask，以及如何重复此操作，直到数组列表中有条目。

这是在数据库中插入 1 行的数据库方法 :::

```
public void insert_row(int count, String image_url, String name, String number) {
        // TODO Auto-generated method stub

        db.execSQL("INSERT INTO contacts VALUES('"+ count +"', '"+ image_url +"', '"+ name +"', '"+ number +"')");
    } 
```

如果有人可以给我一个关于如何实现这一点的概述，那就太好了。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-04-09T06:11:34.973

尝试以下操作，无论如何，您可以为`InsertData`您需要的参数创建构造函数，将它们存储在`InsertData`类字段中并在`doInBackground()`.

```
private class InsertData extends AsyncTask<ArrayList, Progress, Result>{

            @Override
            protected Result doInBackground(ArrayList... params) {
                // TODO Auto-generated method stub
                ArrayList list1 = params[0];
                ArrayList list2 = params[1];
                ...
                return null;
            }   
    } 
```

称呼：

```
InsertData task = new InsertData();
task.execute(yourList1, yourList2, yourList3...); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-09T06:13:09.207

您可以直接将列表传递给`doInBackground()`这样的对象，并在那里进行所有 50 次迭代。

```
private class InsertData extends AsyncTask<List<String>, Progress, Result>{

    @Override
    protected Result doInBackground(List<String>... params) {
        // TODO Auto-generated method stub
        List<String> list1 = params[0];
        List<String> list2 = params[1];
        List<String> list3 = params[2];
        List<String> list4 = params[3];

        // Do the 50 iterations here.        

        return null;
    }   
} 
```

您可以像这样将列表传递给`AsyncTask`这样的：-

```
new InsertData().execute(list1, list2, list3, list4); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-09T06:08:24.460

你可以这样通过

```
private class InsertData extends AsyncTask<Params, Progress, Result>{

    public InsertData(String stg1, String stg2, String stg3, String stg4) {

    } 

    @Override
    protected Result doInBackground(Params... params) {
        // TODO Auto-generated method stub
        return null;
    }   
} 
```

像这样调用 asynctask

```
InsertData task = new InsertData (stg1, stg2, st3, stg4);    
task.execute(); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-04-09T06:17:25.343

不要将 ArrayList 用于所有值...只需使用一个 Arraylist。你可以使用 bean 例如

```
ArrayList<ItemBean> aryitem=new ArrayList<ItemBean>(); 
```

ItemBean 是一个 Bean 类..所以你可以在那里设置值..并从那里检索。

```
for (int i = 0; i <aryitem; i++)
{
  itemBean= new ItemBean();

  itemBean.set(yourValues);
  itemBean.set(yourValues);

aryItem.add(itemBean);
} 
```

现在调用你`public void insert_row(int count, String image_url, String name, String number)`的 doInBackground 并传递 aryItem。试试这个

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-04-09T06:36:27.840

我认为它可能会帮助你..你可以像这样传递价值..

调用 InsertData (AsynkTask)

```
ArrayList list1,list2,list3,list4;

InsertData insertd = new InsertData(list1,list2,list3,list4)
insertd.execute(); 
```

在您的 InsertData.java

```
class InsertData extends AsyncTask<Object, Object, Object>
{
    Context ctx;
    ArrayList li1,li2,li3,li4;
    public InsertData(Context ct,ArrayList l1,ArrayList l2,ArrayList l3,ArrayList l4)
    {
        ctx = ct;

        this.li1 = l1;
        this.li2 = l2;
        this.li3 = l3;
        this.li4 = l4;

        dialog = new ProgressDialog(ct);
        dialog.setProgressStyle(ProgressDialog.STYLE_SPINNER);
        dialog.setMessage("Loading.. Please Wait..");
        dialog.setCancelable(true);
    }

        @Override
        protected Result doInBackground(Params... params)
        {
            // Do your Work...

            return null;
        }   
} 
```

# c# - 在 C# 中获取包含“&”的查询字符串参数值

> ID：15894429
> 
> 赞同：0
> 
> 时间：2013-04-09T06:05:21.027
> 
> 标签：c#, asp.net

我传递的网址如下...

```
Response.Redirect("~/all-media/books/?serachtext=on&off"); 
```

其中 serachtext 是唯一的参数。因此，当我按如下方式访问此参数时，它只给我“on”作为值。

```
Request.QueryString["searchtext"] 
```

那么，我该如何解决呢？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-04-09T06:06:48.587

这行不通。& 符号需要进行 URL 编码。

& 符号的 URL 编码值为`%26`. 所以你可以这样做：

一种）

```
Response.Redirect("~/all-media/books/?serachtext=on%26off"); 
```

或 b)

```
Response.Redirect("~/all-media/books/?serachtext=" + HttpUtility.UrlEncode("on&off")); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-09T06:13:08.323

您应该对放入查询字符串中的值进行编码：

```
Response.Redirect("~/all-media/books/?searchtext=" + Server.UrlEncode("on&off")); 
```

或者手动执行：

```
Response.Redirect("~/all-media/books/?searchtext=on%26off"); 
```

# python - 为使用 WSGI 的 Django 应用程序编写适当的 Apache 虚拟主机脚本

> ID：15894432
> 
> 赞同：0
> 
> 时间：2013-04-09T06:05:28.143
> 
> 标签：python, django, apache, mod-wsgi, virtualhost

我在这里有一个 Django 应用程序的虚拟主机脚本，我最终将部署到现实世界中。现在它似乎工作正常；但是，我想知道这个脚本是否有任何问题，或者应该改进的地方。

注意事项：

*   该`wsgi.py`文件只是 Django 自动生成的文件。它与应用程序的源代码位于同一目录中。
*   静态文件将由 Apache 从`/srv/www/foobar/static/`目录中提供

    ```
    <VirtualHost *:80>

        ServerName foobar.com
        ServerAlias www.foobar.com
        ServerAdmin contact@foobar.com

        WSGIDaemonProcess foobar.com processes=2 threads=20 inactivity-timeout=600 maximum-requests=10000
        WSGIProcessGroup foobar.com
        WSGIScriptAlias / /home/some_user/foobar_django_app/foobar/wsgi.py

        DocumentRoot "/srv/www/foobar/"
        Alias "/static/" "/srv/www/foobar/static/"

    </VirtualHost> 
    ```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-09T07:09:57.907

考虑设置：

```
WSGIApplicationGroup %{GLOBAL}
WSGIRestrictEmbedded On 
```

手表：

*   [http://lanyrd.com/2013/pycon/scdyzk/#link-qhyk](http://lanyrd.com/2013/pycon/scdyzk/#link-qhyk)

读：

*   [http://blog.dscpl.com.au/2009/11/save-on-memory-with-modwsgi-30.html](http://blog.dscpl.com.au/2009/11/save-on-memory-with-modwsgi-30.html)

# makefile - Thingsquare Mist (Contiki-OS) 中缺少 platform-conf.h

> ID：15894434
> 
> 赞同：0
> 
> 时间：2013-04-09T06:05:31.317
> 
> 标签：makefile, msp430, contiki

我克隆了[Contiki-OS](http://www.contiki-os.org)端口[Thingsquare 雾](https://github.com/errordeveloper/mist/)来与德州仪器 EXP430 板一起使用。当我`Hello World`从相应的文件夹运行时

```
make TARGET=mist-exp5438 
```

我收到`platform-conf.h`缺少的错误：

```
 In file included from ../../contiki/core/./net/rime/rimeaddr.h:57:0,
from ../../contiki/core/net/rime/rimeaddr.c:45:
../../platform/mist-exp5438/./contiki-conf.h:36:27: fatal error: platform-conf.h: No such file or directory
compilation terminated. 
```

有谁知道怎么写`platform-conf.h`文件？尝试在其中添加一个空文件`../../platform/mist-exp54388`可以成功找到该文件，但会产生很多错误。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-18T09:38:44.973

那是因为 exp5438 并不是一个真正的平台。该平台是 CC1101 或 CC1120，这是一个带有 CC1101 或 CC1120 模块的 EXP5438 板。当您查看 exp1101 和 exp1120 目录时，您会发现 platform-conf.h 文件。

```
make TARGET=exp1120 
```

似乎使代码编译。不幸的是，编译的代码似乎太大了，我`hello-world.exp1120 section '.text' will not fit in region 'rom'`从链接器中得到一个错误。

但是，其他平台似乎编译得很好，我尝试使用 CodeSourcery 工具链为 CC2538DK 编译，我没有收到任何错误。但我也没有CC2538DK。

# php - 是database.xml可以换成php类文件吗

> ID：15894440
> 
> 赞同：1
> 
> 时间：2013-04-09T06:05:59.770
> 
> 标签：php, symfony1, symfony-1.4

在我的 Web 应用程序中，我的一些应用程序在 symfony 中，而一些在非 symfony 中。对于非 symfony，我有一个常量类文件，对于 symfony，我有 database.yml 文件。

有没有机会我可以在 symfony 中使用 php 类文件而不是 database.yml。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-10T05:15:45.893

创建一个在一个点上具有所有可配置变量的类。在 database.yml 中包含该类，就像您只能在那里调用这些变量一样。

# c# - Openid 为提供者显示图像

> ID：15894446
> 
> 赞同：2
> 
> 时间：2013-04-09T06:06:33.203
> 
> 标签：c#, .net, asp.net-mvc, asp.net-membership, openid

在尝试教程时

```
http://mvcrocksonasp.net/OAuthWithMVC4 
```

按照说明添加 facebook.png 像这样

```
Dictionary<string, object> facebookExtraData = new Dictionary<string, object>();
facebookExtraData.Add("Icon", "../Images/facebook.png"); 
```

但它不起作用，所以任何人都能够在浏览器上获取图像？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-09T07:28:49.023

我没有完全详细地使用您的链接。但是请查看以下两个链接，它也可能对您正在寻找的内容有用。

关于如何在 MVC 中实现 OAuth。检查此链接底部的相关帖子。

[http://blogs.msdn.com/b/webdev/archive/2012/08/15/oauth-openid-support-for-webforms-mvc-and-webpages.aspx](http://blogs.msdn.com/b/webdev/archive/2012/08/15/oauth-openid-support-for-webforms-mvc-and-webpages.aspx)

自定义提供程序图像。 [http://blogs.msdn.com/b/webdev/archive/2012/08/24/customizing-the-login-ui-when-using-oauth-openid.aspx](http://blogs.msdn.com/b/webdev/archive/2012/08/24/customizing-the-login-ui-when-using-oauth-openid.aspx)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-11T02:34:06.180

遇到了 zocial 和这篇博客文章，它解决了这个特定问题

[http://www.beabigrockstar.com/customizing-external-login-buttons-in-asp-net-mvc-4/](http://www.beabigrockstar.com/customizing-external-login-buttons-in-asp-net-mvc-4/)

示例项目在这里

[https://github.com/jerriep/CustomizeOAuthLoginBranding](https://github.com/jerriep/CustomizeOAuthLoginBranding)

最终结果看起来像这样

![在此处输入图像描述](https://i.stack.imgur.com/7Fnnl.png)

# android - 无法使用 API v2 水平滚动 Google 地图

> ID：15894453
> 
> 赞同：1
> 
> 时间：2013-04-09T06:07:02.373
> 
> 标签：android, google-maps-api-2

我正在开发一个我已经集成的应用程序`Google map API v2`。有一个滑动菜单，我在运行时使用`HorizontalScrollView`. 问题是我只能垂直滚动地图，因为我尝试水平滚动`HorizontalScrollView`获取触摸事件。

这就是我制作布局的方式。

```
LayoutInflater inflater = LayoutInflater.from(this);
    View menu = inflater.inflate(R.layout.menu, null);

    HorizontalScrollView hsv = new HorizontalScrollView(this) {
        @Override
        public boolean onTouchEvent(MotionEvent ev) {
            if (Menu_Displayed) {
                return false;
            } else {
                return true;
            }
        }
    LinearLayout li_body = new LinearLayout(this);
    li_body.setLayoutParams(new LayoutParams(LayoutParams.WRAP_CONTENT,
            LayoutParams.MATCH_PARENT));
    li_body.setOrientation(0);
    li_body.setBackgroundColor(Color.TRANSPARENT);

    hsv.addView(li_body);

    TextView placeholder = new TextView(this);
    placeholder.setTextColor(Color.TRANSPARENT);
    placeholder.setLayoutParams(new LayoutParams(width - 130,
            LayoutParams.MATCH_PARENT));
    placeholder.setVisibility(View.INVISIBLE);

    li_body.addView(placeholder);

    LayoutInflater inflatex = LayoutInflater.from(this);
    View mainScreen = inflatex.inflate(R.layout.main, null);
    li_body.addView(mainScreen);

    FrameLayout mainFrame = new FrameLayout(this);
    mainFrame.setLayoutParams(new LayoutParams(LayoutParams.MATCH_PARENT,
            LayoutParams.MATCH_PARENT));
    mainFrame.addView(menu);
    mainFrame.addView(hsv);

    hsv.post(new Runnable() {

        @Override
        public void run() {
            hsv.scrollBy(width - 130, 0);
        }
    });
    setContentView(mainFrame); 
```

有`View` `mainScreen`一个地图片段。有什么解决方案可以让我滚动地图`horizontally`吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-09T12:32:02.257

尝试组合这些参数：

```
getSlidingMenu().setTouchModeAbove(SlidingMenu.TOUCHMODE_FULLSCREEN); 
```

或者

```
getSlidingMenu().setTouchModeAbove(SlidingMenu.TOUCHMODE_NONE); 
```

和另一个参数：

```
getSlidingMenu().setMode(SlidingMenu.LEFT_RIGHT); 
```

或者

```
getSlidingMenu().setMode(SlidingMenu.LEFT); / getSlidingMenu().setMode(SlidingMenu.RIGHT); 
```

如果我没记错的话，你的组合是

```
getSlidingMenu().setTouchModeAbove(SlidingMenu.TOUCHMODE_NONE);
getSlidingMenu().setMode(SlidingMenu.LEFT_RIGHT); 
```

希望这可以帮助！

# mysql - Java Mysql 完整性约束违反异常

> ID：15894455
> 
> 赞同：2
> 
> 时间：2013-04-09T06:07:09.510
> 
> 标签：mysql, swing, exception, constraints, unique-constraint

我的 Swing 应用程序很少抛出异常。我试图捕捉完整性约束违规异常并显示消息“重复 ID”。但是当这种情况发生时，没有在这里捕获它：catch(MySQLIntegrityConstraintViolationException ex) 它会去捕获(SQLException ex)。我想要做的是，捕获 Integrity Violation 异常并显示用户友好的消息，而不是来自 ex.getMessage() 的技术消息。我该怎么做呢？

```
 ShippmentTransfer shipTrns = new ShippmentTransfer(shipID, GIN, issueDate, ToStore, itemName, Qty, Driver, Vehicle);
                    int res = ShipmentTansController.addShipGIN(shipTrns);
                    if (res > 0) {
                          JOptionPane.showMessageDialog(null, "Record Added");
                          resetAll();
                    }
              } catch (DataIntegrityViolationException ex) {
                    JOptionPane.showMessageDialog(null, "Duplicate ID");

              } catch (ClassNotFoundException ex) {
                    JOptionPane.showMessageDialog(null, ex.getMessage());
              } 
              catch (SQLException ex) {
                    JOptionPane.showMessageDialog(null, ex.gets);
              }
        } 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-09T07:23:51.927

为了捕获特定的 SQLException，您需要使用`getSQLState()`方法与 SQL 状态进行比较。例如：违反数据完整性的 SQL 状态 23。

```
catch (SQLException ex) {
    if (ex.getSQLState().startsWith("23")) {
        JOptionPane.showMessageDialog(null, "Duplicate");
    } 
} 
```

[从这里找到](https://stackoverflow.com/questions/1988570/how-to-catch-a-specific-exceptions-in-jdbc)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-09T06:15:29.900

你不能用

```
MySQLIntegrityConstraintViolationException  directly. 
```

因为在具有该名称的 java 中没有异常可用。

试试这个

```
try {

}
catch (DataIntegrityViolationException ex) {
    .....
} 
```

然后使用ex获取错误代码。然后进行比较

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-06-29T18:33:42.373

对于稍后检查的人，您可以选择将实例类型检查为：

```
try {
...
} catch (Exception e) {

    if (e instanceof SQLIntegrityConstraintViolationException) {
          // duplicate record or alike problem
    }
} 
```

# android - 如何根据group_id将android手机联系人添加到组中

> ID：15894457
> 
> 赞同：2
> 
> 时间：2013-04-09T06:07:19.823
> 
> 标签：android, android-contacts

我正在处理一个联系人列表项目，到目前为止，我可以根据组 ID 将已经在电话中的联系人添加到组中。我从以下代码中找到了组 ID。

```
final String[] GROUP_PROJECTION = new String[] {ContactsContract.Groups._ID, ContactsContract.Groups.TITLE };

Cursor cursor = managedQuery(ContactsContract.Groups.CONTENT_URI,GROUP_PROJECTION, null, null, ContactsContract.Groups.TITLE+ " ASC"); 
```

现在我想从电话中挑选一些联系人，并根据这些组 ID 将这些联系人插入特定组。

先感谢您

# linux - 如何了解远程 linux 机器是否已启动？

> ID：15894459
> 
> 赞同：-2
> 
> 时间：2013-04-09T06:07:29.463
> 
> 标签：linux, networking, embedded-linux

我有一台 Windows 开发机器，以及公司网络上的 Linux 目标。启动目标板后，我如何知道它是否已启动？`ping` `dig` `host` `nslookup`具有目标名称的实用程序不解析 IP 地址，因此不回复。该板仅具有 Busy box 实用程序。

我看过[这个](https://superuser.com/questions/281542/how-can-i-get-the-ip-address-of-a-remote-unix-linux-machine-whose-name-i-know)帖子，但问题仍然存在。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-09T07:19:27.573

1.  你知道这个目标板的 IP 地址或主机名吗？

如是，

1.  它响应`ssh host_name_or_ip_here`命令吗？

如果是并且如果安装了busybox实用程序，您可以执行

```
ssh remote_target "/bin/busybox uptime" 
```

并解析您的 Windows 机器上的输出以查看该板是否在短时间内启动，这意味着它最近重新启动。

我希望这就是你要找的

# asp.net-mvc - Visual Studio 2012 MVC 项目的数据表

> ID：15894460
> 
> 赞同：0
> 
> 时间：2013-04-09T06:07:29.817
> 
> 标签：asp.net-mvc, jquery-datatables

我有一个在 JQuery 中建立的数据表。声明如下：

```
oTable =
    $('#rules-datatable').dataTable({
    "aoColumns": [
        { "mDataProp": [0], "sWidth": "10%" },
        { "mDataProp": [1], "sWidth": "10%" },
        { "mDataProp": [2], "sWidth": "10%" },
        { "mDataProp": [3], "sWidth": "10%" },
        { "mDataProp": [4], "sWidth": "10%" },
        { "mDataProp": [5], "sWidth": "10%" },
        { "mDataProp": [6], "sWidth": "10%" },
        { "mDataProp": [7], "sWidth": "10%" },
        { "mDataProp": [8], "sWidth": "10%" },
        { "mDataProp": [9], "sWidth": "10%" }
    ],
    "bAutoWidth": true,
    "bFilter": false,
    "bLengthChange": false,
    "bProcessing": true,
    "bServerSide": true,
    "bSort": false,
    "iDisplayLength": 50,
    "sAjaxSource": '@Url.Action("GetAllCapturedRules")',
    "fnDrawCallback": function (oSettings) {
        if (navigator.userAgent.toString().indexOf('MSIE') >= 0) {
            // This fixes the IE8 overflow issue. Style is added after the datatable has been drawn.
            $('#main').addClass('overflow-fix');
        }
    }
}); 
```

我试图在单击事件后获取所选行的值，但它似乎不起作用。我的点击事件如下所示：

```
oTable.click(function () {
    var anSelected = oTable.$('tr.row_selected');
    if (anSelected.length == 0) {
        alert('Please make a selection');
    } else {
        // Get data from the selected row                    
    }
} 
```

在单击事件上，它始终显示“请进行选择”，因此它永远不会获取所选行的值。有人可以解释为什么，以及如何解决这个问题吗？我正在使用数据表 v 1.9.1

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-09T15:17:31.943

下面将点击事件添加到每个表格行

```
oTable.$("tr").on("click", function(){
    //TR that was clicked, you can now get the information from rowClicked
    var rowClicked = $(this);        
}); 
```

这是你想要的？

# git - 二进制文件中的冲突 - git

> ID：15894463
> 
> 赞同：0
> 
> 时间：2013-04-09T06:07:42.350
> 
> 标签：git, file, binary, git-merge

我正在研究`Git`。我正在合并一个`binary file`它给我带来冲突的东西。

有人可以告诉我为什么二进制文件冲突。是什么原因。是因为当前分支上未提交的更改还是仅仅因为二进制文件的不同版本？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-09T06:13:31.517

如果二进制文件在作为合并一部分的多个分支中发生更改，Git 将*始终*产生冲突，因为它无法应用为文本文件设计的合并策略。这是因为通常你不能在不完全破坏文件的情况下移动二进制块。此外，例如合并图像文件的语义是什么？

由你决定你想做什么。您可能想要保留其中一个版本，或者，如果它是图像文件，您可能想要使用图形处理程序“手动合并”它们。Git 在这里真的帮不了你。

# cakephp - cakephp find('all') 语句返回双重输入

> ID：15894465
> 
> 赞同：0
> 
> 时间：2013-04-09T06:07:47.647
> 
> 标签：cakephp

我正在使用 cakephp 1.3 的网站。上个月我改变了网站的托管服务。之后我有一个问题。

IE。我的数据库中有预订表。当我使用 find() 语句时，bookings 表返回双重输入。我找不到为什么会这样。

例如，我得到特定地点的车辆数据返回以下，

当我在 find('all') 语句中使用 'recursive'=>2 时，我得到以下

* * *

**

```
Parking Location : Chennai Citi Centre 2W
Booking Date : 02/04/2013
Booking ID  Transaction Type    Vehicle No  Check In Date       Check Out Date
187994      Normal          7099        02/04/2013 18:31    02/04/2013 22:03
187994      Normal          7099        02/04/2013 18:31    02/04/2013 22:03 
```

**

但是当我在 find('all') 语句中使用 'recursive'=>-1 时，我得到以下

```
**

Parking Location :
Booking Date : 02/04/2013
Booking ID  Transaction Type    Vehicle No  Check In Date       Check Out Date
187994      Normal          7099        02/04/2013 18:31    02/04/2013 22:03 
```

**

这里停车位不来。它在提供者表中。

请任何人帮我解决这个问题

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-09T15:23:02.070

通常我不建议使用除 之外的任何东西`recursive=>-1`，并且只在适当的时候使用可包含的行为。我真的不能告诉你为什么第一种方法会在不知道模型关联的情况下返回双重条目，或者在不知道你正在使用的确切查找查询的情况下（你是在使用 Bookings 还是 Parking 或其他什么 :S 进行 find() ？ )，但尝试使用可包含的，看看它是否有效。

像......（我只是假设你的模型是如何被调用的以及你如何使用 find()）

```
$this->Booking->find('all', array('conditions'=> array() ,//some conditions here
                                  'recursive' => -1,
                                  'contain' => array('Parking')); 
```

之后，对返回的数组进行转储，以查看输出是否符合您的需求。有关更多可控制行为，[请查看此处](http://book.cakephp.org/1.3/en/The-Manual/Core-Behaviors/Containable.html)。

# android - Android 应用内货币

> ID：15894478
> 
> 赞同：0
> 
> 时间：2013-04-09T06:08:42.407
> 
> 标签：android

我最近开始研究一个 android 项目，我想知道是否有一种预先存在的方式在应用货币中实现，例如硬币或钻石，因为我想允许用户根据数量或价值使用应用程序的某些功能用户拥有的货币。例如启用或禁用按钮。根据我到目前为止所学到的知识，我将使用一个新数据库并将数据值存储在一个文件中，但我不确定，所以我来到这里问是因为我已经搜索了互联网并且没有找到一种方法来做到这一点并感谢您的帮助。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-09T06:37:17.347

你可以试试这个[库](https://github.com/robotmedia/AndroidBillingLibrary)，那些家伙在那里做得很好。

# ios - 以编程方式获取 WiFi 网关、DNS 信息

> ID：15894484
> 
> 赞同：2
> 
> 时间：2013-04-09T06:09:20.870
> 
> 标签：ios, dns

我可以从网上找到的代码中获取 wifi IP 地址信息：

是否也可以识别 DNS​​ 和网关信息？有什么代码可以做到吗？谢谢，

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-05-12T06:50:50.707

这是通过使用此代码完成的

```
#include <resolv.h>

#include <dns.h>
#include<stdio.h> 
#include<string.h>    
#include<stdlib.h>    
#include<sys/socket.h>    
#include<arpa/inet.h> //inet_addr , inet_ntoa , ntohs etc
#include<netinet/in.h>
#include<unistd.h>   

-(void) get_dns_servers
{
    res_state res = malloc(sizeof(struct __res_state));
    int result = res_ninit(res);
    if(result==0)
    {
        NSLog(@"No of DNS IP : %d",res->nscount);
        for ( int i= 0; i < res->nscount; i++)
        {
            NSString *s = [NSString stringWithUTF8String :  inet_ntoa(res->nsaddr_list[i].sin_addr)];
            NSLog(@"DNS ip : %@",s);
            [server_DNS addObject:s];
        }
    }

 } 
```

# c# - 选择包含 CSV 但保持排序顺序

> ID：15894487
> 
> 赞同：2
> 
> 时间：2013-04-09T06:09:27.193
> 
> 标签：c#, linq, entity-framework, linq-to-sql

我有一个场景，我有一个`IList<Guid>`名为 csv 的变量，它也是我需要保留的特定顺序。然后我正在做一个选择包含，这样我就可以根据我拥有的 guid 列表取回我的所有主题。

guid 来自 lucene 搜索，它按每个 LuceneResult 的原始分数排序。这就是为什么我需要按此顺序排列它们。

```
 var results = _context.Topic
                              .Where(x => csv.Contains(x.Id)); 
```

然而。我一这样做就失去了向导进来的命令。知道如何做到这一点，但保持相同的顺序，我将 guid 列表交给上下文，并根据 topid.Id 以相同的顺序返回主题？

我已经尝试了下面提到的以下方法，通过加入但它们仍然以相同的顺序出现？请注意，我也在分页这些结果。

```
 var results = _context.Topic
            .Join(csv,
                    topic => topic.Id,
                    guidFromCsv => guidFromCsv,
                    (topic, guidFromCsv) => new { topic, guidFromCsv }
                )
                .Where(x => x.guidFromCsv == x.topic.Id)
                .Skip((pageIndex - 1)*pageSize)
                .Take(pageSize)
                .Select(x=> x.topic); 
```

## ** 更新 **

因此，我已经不再使用和 guid，而是尝试传入我的 lucene 模型，该模型具有我想要订购的 score 属性。这是我所拥有的

```
 public PagedList<Topic> GetTopicsByLuceneResult(int pageIndex, int pageSize, int amountToTake, List<LuceneSearchModel> luceneResults)
{
    var results = _context.Topic
        .Join(luceneResults,
                topic => topic.Id,
                luceneResult => luceneResult.Id,
                (topic, luceneResult) => new { topic, luceneResult }
            )
            .Where(x => x.luceneResult.Id == x.topic.Id)
            .OrderByDescending(x => x.luceneResult.Score)
            .Skip((pageIndex - 1) * pageSize)
            .Take(pageSize)
            .Select(x => x.topic);

    var topicResults = results.ToList();

    // Return a paged list
    return new PagedList<Topic>(topicResults, pageIndex, pageSize, topicResults.Count);
} 
```

但是我现在收到以下错误？我正在做的事情可能吗？

**无法创建“LuceneSearchModel”类型的常量值。此上下文仅支持原始类型或枚举类型。**

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-09T06:25:01.507

如果我正确理解了这个问题，您希望根据 csv 过滤主题，并且您希望以与 csv 相同的顺序返回结果。如果是这样：

```
var results = csv
    .GroupJoin(_context.Topic, guid => guid, topic => topic.Id, 
        (guid, topics) => topics)
    .SelectMany(topics => topics); 
```

重要的是要注意，这将;`_context.Topic`视为 `IEnumerable<T>`因此，它将从数据库中获取所有主题并在客户端而不是数据库上执行 GroupJoin。

**编辑：根据下面的评论，这个答案不是你想要的。**我将把答案留在这里作为文档。

# java - 'java.lang.Class.getDeclaredField()' 在 ObjectiveC 中的类似方法

> ID：15894495
> 
> 赞同：0
> 
> 时间：2013-04-09T06:10:10.550
> 
> 标签：java, objective-c, function, variables, methods

我正在阅读一个文本文件。我想检查类中是否声明了一个变量，其名称与我从文件中读取的文本相同。

java中的方法是'java.lang.Class.getDeclaredField()'。有关详细信息，请参阅[http://www.tutorialspoint.com/java/lang/class_getdeclaredfield.htm](http://www.tutorialspoint.com/java/lang/class_getdeclaredfield.htm)。

我在 ObjectiveC 中找不到类似的方法。有没有？如果不是，我该如何实现。如果您有任何想法，请给我一些提示。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-09T06:16:39.487

您可以像这样检查：/*对于属性*/

```
YourClass *arrObj=[YourClass new];//your target class where you wnat to check
NSString *propertyName=@"samllArray";//this is what you will check in class YourClass
if([arrObj respondsToSelector:NSSelectorFromString(propertyName)]){
    NSLog(@"yes, exists");
}
else{
    NSLog(@"no, it does not exists");
} 
```

编辑：/*对于 ivars* /

```
- (NSMutableArray *)getAllPropertyOfClass:(Class)aClass {
    NSMutableArray *mArray=[NSMutableArray new];
    unsigned int outCount;
    Ivar *ivars = class_copyIvarList([aClass class], &outCount); //class_copyPropertyList([aClass class], &outCount);

    for(unsigned int i = 0; i < outCount; i++) {
        Ivar ivar = ivars[i];
        const char *propName = ivar_getName(ivar);
        if(propName) {
            NSString *propertyName = [NSString stringWithUTF8String:propName];
            mArray[mArray.count]=propertyName;
        }
    }
    free(ivars);
    return mArray;
} 
```

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2013-04-09T06:15:14.840

有一些方法`respondsToSelector`也许`conformsToProtocol`他们可以帮助

# c# - 隐藏在设计模式下使用它的页面中的母版页内容

> ID：15894499
> 
> 赞同：2
> 
> 时间：2013-04-09T06:10:26.993
> 
> 标签：c#, asp.net, .net, vb.net, visual-studio

我的主页面已损坏，因此在尝试设计继承母版页的页面时显示为丑陋且不可编辑。

有没有办法在设计模式下隐藏母版页内容，以便我可以继续编辑我的页面而不会遇到处理母版页内容的麻烦？

必须有办法禁用它..也许是一些扩展？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-09T07:40:56.030

尝试使用以下命令隐藏控件：

```
style="display:none" 
```

在`style`标签中。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-10T04:26:22.833

我认为没有在设计视图中隐藏母版页内容的选项。甚至 VS 2012 也没有这个选项。

# javascript - MAC 地址 Iphone 和 Desktop

> ID：15894505
> 
> 赞同：0
> 
> 时间：2013-04-09T06:10:44.283
> 
> 标签：javascript, jquery

我正在使用 jquery 手机。我想获取设备的 MAC 地址，我的 Iphone 应用程序用于.. 它也可以在计算机上使用。所以基本上我想要一个跨浏览器的脚本，也应该支持多个设备。我尝试在互联网上搜索，但找不到解决方案。谁能告诉这甚至可能吗？如果是，那么示例代码将不胜感激。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-09T06:14:29.097

不，这是不可能的，JavaScript 不提供对 MAC 地址的访问，即使在服务器端，您也无法获取它，除非客户端与服务器位于同一以太网段。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-09T06:14:50.507

如果您的问题是“如何使用 Javascript 获取 MAC 地址”，那么答案是“没办法”。在 IE 中有一种方法可以做到这一点，但既然你提到了 iPhone，我想这不是一个选择。

# shell - shell脚本错误

> ID：15894509
> 
> 赞同：0
> 
> 时间：2013-04-09T06:10:50.833
> 
> 标签：shell

```
!#/bin/bash

  svnadmin dump /path/to/repo | gzip -9 > /path/to/backup.bak-$(date     +"%d\%m\%Y--%T").dump.gz
if ( `echo $?` -eq 0) 
then
    echo "hello world" | mail -s "a subject" someone@wherever.com
else
    echo "sorry, no way out" | mail -s "a subject" someone@wherever.com 
exit 1
fi 
```

有一个问题的编辑

任何帮助表示赞赏。谢谢我得到的输出是其他部分“抱歉没有出路！但我期望得到的是一个你好世界，因为转储命令可以完美运行

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-09T06:16:06.647

你的`IF`条款应该是：`if [ $? -eq 0 ]`. 注意方括号和它们周围的空格。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-09T08:42:44.473

这是我解决它的方法：

```
 !#/bin/bash 

 ls;
 if [ $? -eq 0 ] 
```

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2013-04-09T06:14:35.817

你的shebang是错误的。应该是`#!`。另外，不要费心显式检查`$?`. 做就是了：

```
if ls; then
      ...
else
      ...
fi 
```

# web-services - 如何通过安全层访问grails中的webservice

> ID：15894511
> 
> 赞同：1
> 
> 时间：2013-04-09T06:11:01.937
> 
> 标签：web-services, rest, grails, spring-security, jsonp

我在控制器类中有简单的方法。

```
Class TrainingController{

    def getTrainingsJson(){
          def trainingList  = Training.list()
          println "called===="
          //render trainingList as JSON
          render "${params.callback}(${trainingList as JSON})"
    }
} 
```

获取培训列表，在我的 HTML 页面中，我的请求如下

```
<script type="text/javascript">
        $(function(){

             $.getJSON('http://localhost:8080/training/getTrainingsJson?callback=?',            
              function(data) {
               console.log("success");
               alert(data);
             });

        });
    </script> 
```

**该请求仅在登录后提供。如果没有登录，响应将是登录页面 HTML 格式。**

**请求跨服务器（从 php 到 grails）。我想确保必须建立安全通信，那么如何在grails中使用spring security通过json进行身份验证。**

以及如何确保Nobody可以伪造请求并从服务器获得响应。

并且是否需要遵循 REST 或者我可以在现有控制器中编写方法或者我是否需要为此类请求创建单独的控制器/服务。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-09T08:07:38.123

如果所有访问都是通过浏览器进行的，那么 spring 身份验证将处理它 - 只需相应地保护 url。所有请求（包括ajax）都将通过spring auth

为防止窥探，请考虑实施 SSL

Spring Security 插件[文档](http://grails-plugins.github.io/grails-spring-security-core/docs/manual/)有更多关于保护你的应用程序的信息。特别阅读有关身份验证、IP 地址限制和会话固定预防的信息

# google-apps-script - 缺少标识符 XXXXXXX 的库（可能已被删除？）

> ID：15894523
> 
> 赞同：2
> 
> 时间：2013-04-09T06:11:59.940
> 
> 标签：google-apps-script, google-sheets

我创建了一个用于跟踪项目状态的电子表格，该电子表格向观看特定项目的人发送自定义通知。我已将 99% 的代码移至外部库，并在电子表格脚本中引用了它。每分钟发生的一项操作（触发器）是在该电子表格内的多个工作表之间同步项目更改。发生 1440 次执行不到 10 次（24 小时内每分钟）我收到一条错误消息，指出我的库丢失：

**缺少标识符 XXXXXXX 的库（可能已被删除？）**

我在这个库上使用版本控制，所有生产电子表格都将“开发模式”设置为关闭。

你知道发生了什么吗？我应该检查什么来阻止这些错误被引发和发送？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-11-13T15:15:35.640

根据[2013 年 11 月 4 日的发行说明，](https://developers.google.com/apps-script/releases/#november_2013)已推出针对零星缺失库错误的修复程序。（请参阅[问题 2817](https://code.google.com/p/google-apps-script-issues/issues/detail?id=2817)。）

同时，引入了一项更改，例如“如果库的所有者已删除某个版本的库，则脚本将无法再使用该版本。” 以前，脚本可能一直在使用库的版本 3，例如，即使该版本已被删除。突然，在 11 月 4 日左右，该脚本将开始失败。这种情况下的修复是更新脚本使用的资源以引用仍然存在的库版本。

# ruby-on-rails - 深度嵌套的 content_tag、concat 和 rails 3

> ID：15894526
> 
> 赞同：4
> 
> 时间：2013-04-09T06:12:06.260
> 
> 标签：ruby-on-rails, twitter-bootstrap, ruby-on-rails-3.2, helper

我对使用 Rails 3.2 并为 Bootstrap modals 制作助手感到沮丧。我不明白何时需要 concat 与何时不需要 concat 有时我最终会丢失标签，有时我会得到一个哈希，其中包含之前和结束标签之间的所有选项。当我在任何带有 do-end 的内容标签上使用 concat 时，一切都变得混乱了。我想做的就是复制这个html：

```
<div id="stupid_modal" class="modal hide fade" tabindex="-1" data-width="760">
    <div class="modal-header">
        <button type="button" class="close" data-dismiss="modal" aria-hidden="true"><i class="fontello-icon-cancel-1"></i></button>
        <h4>Modal header</h4>
    </div>
    <div class="modal-body">
        <div class="page-header">
            <p>Test header 1 2 3.</p>
        </div>
        <div class="row-fluid">

           content here... blah blah

        </div>
    </div>
    <div class="modal-footer">
        <button type="button" data-dismiss="modal" class="btn">Close</button>
        <button type="button" class="btn btn-green">Save changes</button>
    </div>
</div> 
```

我一辈子都无法让模态标题中的 h4 中的按钮正常工作。我也不能让页眉出现在模态正文中。

我的助手看起来像这样：

```
module ModalHelper
def modal(css_id, header_text, hidden = true, options = {},&block)
    class_text = "modal"
    class_text += " hide fade" if hidden
    content_tag(:div, :class => 'modal hide fade', :id => css_id, :style => ("display:none;" if hidden)) do 
        concat modal_header(header_text)
        concat modal_body(&block)
        concat modal_footer
    end
end

def modal_button(link_text, href)
    modal_caller link_text, href, :button
end

def modal_link(link_text, href)
    modal_caller link_text, href
end

private

def modal_caller(link_text, href, type = nil)
    options = { :"data-toggle" => "modal" }
    options.merge!({ :class => "btn" }) if type == :button
    link_to link_text, "#" + href, options
end

def modal_header(header_text)
    content_tag(:div, :class => 'modal-header') do
        concat content_tag(:button,(content_tag(:i, :class => 'fontello-icon-cancel-1')),:class => 'close', :"data-dismiss" => 'modal', :"aria-hidden" => 'true')
        concat content_tag(:h4, header_text)
    end
end

def modal_body(page_header = "")
    content_tag(:div, :class => 'modal-body') do
        content_tag(:div, :class => 'page-header') do
            concat content_tag(:p, page_header)
        end
        content_tag(:div, :class => 'row-fluid') do
            yield
        end
    end     
end 

def modal_footer
    content_tag(:div, :class => 'modal-footer') do
        concat content_tag(:button, 'Close', type: "button", :class => 'btn btn-boo', :"data-dismiss" => 'modal')
        concat content_tag(:button, 'Save', type: "button", class: 'btn btn-green')
    end     
end 
```

结尾

链接如下所示：

```
<%= modal_link "New Stupid Modal", "stupid_modal" %> 
```

模态 html 看起来像这样：

```
<%= modal('stupid_modal', 'Shouldnt this work?', submit: true, tabindex: '-1') do %>
    <% render 'stupid_modal_partials/stupid_modal' %>
<% end %> 
```

输出是这样的：

```
<button aria-hidden="true" class="close" data-dismiss="modal"><i>{:class=&gt;&quot;fontello-icon-cancel-1&quot;}</i></button> 
```

在页面源代码中看起来像这样：

```
<i>{:class=>"fontello-icon-cancel-1"}</i> 
```

**更新：**

将 modal_header 更改为此有效：

```
def modal_header(header_text)
    content_tag(:div, :class => 'modal-header') do
        concat content_tag(:button,(content_tag(:i, "",:class => 'fontello-icon-cancel-1')),:class => 'close', :"data-dismiss" => 'modal', :"aria-hidden" => 'true')
        concat content_tag(:h4, header_text)
    end
end 
```

但这不会：

```
def modal_header(header_text)
    content_tag(:div, :class => 'modal-header') do
        concat content_tag(:button,:class => 'close', :"data-dismiss" => 'modal', :"aria-hidden" => 'true') do
            concat content_tag(:i, "",:class => 'fontello-icon-cancel-1')
        end
        concat content_tag(:h4, header_text)
    end
end 
```

这引出了一个问题，wzup 与 concat？我是否遗漏了什么——我还尝试将空引号作为按钮 content_tag 的第二个参数

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2013-04-09T07:06:21.317

你永远不需要使用`concat`.

每个 Rails 助手都返回一个包含一些 html 的字符串：

```
tag(:br) # "<br>" 
```

所以你最简单的辅助方法是这样的：

```
# "<br>"
def br
  tag(:br)
end 
```

如果您有多个 html 字符串，请将它们总结起来：

```
# "<button>Close</button><button>Save</button>"
def modal_buttons
  content_tag(:button, "Close") + content_tag(:button, "Save")
end 
```

请注意，您不能只调用它们，因为它们不会修改视图

```
# "<button>Save</button>"
def modal_buttons
  content_tag(:button, "Close") # this won't do anything
  content_tag(:button, "Save")
end 
```

对于块，同样的规则适用：

```
# "<div><button>Close</button><button>Save</button></div>"
def modal_footer
  content_tag(:div) do
    # what block returns will be inside the div
    content_tag(:button, "Close") + content_tag(:button, "Save")
  end
end

def modal_body
  content_tag(:div) do
    modal_header + yield + modal_footer
  end
end 
```

附带说明一下，仅使用 Rails 助手来构建整个视图并不是真正的预期目的。他们应该在动态的地方*帮助*你，静态 html 最好在 ERB 模板中完成。

# php - 使用网址回显下一篇文章或上一篇文章

> ID：15894527
> 
> 赞同：0
> 
> 时间：2013-04-09T06:12:06.350
> 
> 标签：php, html, xhtml

下面的**nest.php**页面包含一个多维数组**$laws**，它包含一组法律，其中的**章节**由几篇**文章****组成**。

 ****我已经制作了**PREVIOUS Article**和**NEXT Article**动态 url 链接，以依次回显一篇文章。

但是，当特定章节的最后一篇文章被回显时，我应该在这些 (2) url 中添加什么 PHP 代码以跳到下一章？

```
<?php
session_start();

$laws=array(
       "group1"=>array(
                      "1"=>array(
                                "1"=>"This is article (1) in chapter (1) of (group1)",
                                "2"=>"This is article (2) in chapter (1) of (group1)",
                                "3"=>"This is article (3) in chapter (1) of (group1)",
                                ),
                      "2"=>array(
                                "1"=>"This is article (1) in chapter (2) of (group1)",
                                "2"=>"This is article (2) in chapter (2) of (group1)",
                                "3"=>"This is article (3) in chapter (2) of (group1)",
                                ),
                       ),
       "group2"=>array(
                      "1"=>array(
                                "1"=>"This is article (1) in chapter (1) of (group2)",
                                "2"=>"This is article (2) in chapter (1) of (group2)",
                                "3"=>"This is article (3) in chapter (1) of (group2)",
                                ),
                      "2"=>array(
                                "1"=>"This is article (1) in chapter (2) of (group2)",
                                "2"=>"This is article (2) in chapter (2) of (group2)",
                                "3"=>"This is article (3) in chapter (2) of (group2)",
                                ),

       )
       );

if(isset($_GET['group']) && isset($_GET['chapter']) && isset($_GET['article'])){
$grp = $_GET['group'];
$chap = $_GET['chapter'];
$art = $_GET['article'];    
}else{
$grp = 'group1';
$chap = '1';
$art = '1';  
}

if(isset($laws[$grp][$chap][$art])){
$_SESSION['group'] = $grp;
$_SESSION['chapter'] = $chap;
$_SESSION['article'] = $art;    
}

$group = $_SESSION['group'];
$chapter = $_SESSION['chapter'];
$article = $_SESSION['article'];

$previousarticle = $_SESSION['article'];

echo $laws[$group][$chapter][$article]; // ALL ARTICLES TO BE ECHOED HERE!!!!!

echo '<br/>';

?>
  <!-------------- PREVIOUS Article and NEXT Article URLS ------------------->
<a href="nest.php?group=<?php echo $group; ?>&chapter=<?php echo $chapter; ?>&article=<?php echo --$previousarticle ; ?>" style="text-decoration: none;">PREVIOUS ARTICLE</a>
<br/>
<a href="nest.php?group=<?php echo $group; ?>&chapter=<?php echo $chapter;  ?>&article=<?php echo ++$article ; ?>" style="text-decoration: none;">NEXT ARTICLE</a> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-09T06:45:48.563

所有必要的评论都写在他们需要的地方。

```
<?php

$no_of_groups = count($laws);
// counting number of groups in laws

/* check if there is any selected by any user or by link. If there is nothing selected, do select first group in laws automatically */
if (isset($_GET['group']) and !empty($_GET['group'])) {
    $fgroup = $_GET['group'];
} else {
    $fgroup = $laws[0]; // selects first group in laws
}

/* check if there is any article selected by user or by link. If there is nothing selected, do select first article in a group automatically */
if (isset($_GET['article']) and !empty($_GET['article'])) {
    $farticle = $_GET['article'];
} else {
    $farticle = $fgroup[0];     // selects first article in a group
}

$no_of_article_in_this_group = count($farticle);
// counting number of article in selected or default group

/* Now, we are checking if there is chapters selected by user or by link. If there is nothing selected, do select first chapter in an article */
if (isset($_GET['chap']) and !empty($_GET['chap'])) {
    $fchap = $_GET['chap'];
} else {
    $fchap = $farticle[0];      // selects first chapter in an article
}

$no_of_chapters_in_this_article = count($fchap);
// counting number of chapter in selected article or default article

$page_url = "nest.php";

/* We are checking, is there is next chapter available in an article, if yes then move to next chapter in an array else we will be current chapter */

if (!empty(next($fchap))) {
    $nxt_chapter = next($fchap);
} else {
    $nxt_chapter = current($fchap);
}

/* We are checking, is there is previous chapter available in an article, if yes then move to previous chapter in an array else we will be current chapter */

if (!empty(prev($fchap))) {
    $prv_chapter = prev($fchap);
} else {
    $prv_chapter = current($fchap);
}

// Below, making next and prev links ready to use

$page_next_url = $page_url . "?group=$fgroup&article=$farticle&chap=$nxt_chapter";
$page_prev_url = $page_url . "?group=$fgroup&article=$farticle&chap=$prv_chapter";

?> 
```

如果您需要更多信息，请与我们联系

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-09T06:23:21.110

您可以在链接之前再添加一个条件，如下所示

```
<!-------------- PREVIOUS Article and NEXT Article URLS ------------------->
  <?php 
  $prvartcle = $previousarticle -1 ;

  if(!empty($laws[$group][$chapter][$prvartcle])) {?>
<a href="test1.php?group=<?php echo $group; ?>&chapter=<?php echo $chapter; ?>&article=<?php echo --$previousarticle ; ?>" style="text-decoration: none;">PREVIOUS ARTICLE</a>
<?php } ?>
<br/>

<?php 
$nextart = $article+1;
if(!empty($laws[$group][$chapter][$nextart])) {?>
<a href="test1.php?group=<?php echo $group; ?>&chapter=<?php echo $chapter;  ?>&article=<?php echo ++$article ; ?>" style="text-decoration: none;">NEXT ARTICLE</a>
<?php } ?> 
```****

# asp.net - 使用 itextsharp 在 Pdf 上设置图像

> ID：15894537
> 
> 赞同：0
> 
> 时间：2013-04-09T06:12:48.737
> 
> 标签：asp.net, wcf, itextsharp, wcf-data-services

我正在使用 WCF 服务来创建一个 pad 文件，并希望在创建的 pdf 上设置图像。下面是我的代码。它给了我错误“对象引用未设置为对象实例”

```
 string str = System.Web.HttpContext.Current.Request.MapPath("App_Data/suc.png");
 Image imgCheckBoxChecked = Image.GetInstance(str); 
```

我尝试的另一件事，它给了我错误：找不到文件'C：\ Program Files \ Common Files \ Microsoft Shared \ DevServer \ 10.0 \ suc.png：下面是我的其他代码

```
 Image imgCheckBoxChecked = Image.GetInstance("App_Data/suc.png");

  cell.AddElement(imgCheckBoxChecked);
  cell.Colspan = 4;
  table.AddCell(cell); 
```

关于如何解决此错误并在 pdf 上设置图像的任何想法。谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-09T06:25:29.023

您可以使用`AppDomain.BaseDirectory`获取主 dll 的目录，之后您可以使用它来获取图像 dll 的路径，例如`Path.Combine(AppDomain.BaseDirectory, "App_Data\\suc.png")`，如果您在 ASP.NET 中托管服务，并且 dll 在`Bin`目录中，您可以使用相对路径，例如`Path.Combine(AppDomain.BaseDirectory, "..\\App_Data\\suc.png")`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-09T06:28:35.903

```
string pdfPath = "~/PDF/File_1.pdf";
iTextSharp.text.Image img = iTextSharp.text.Image.GetInstance(Server.MapPath("~/image.JPG"));
img.ScalePercent(100f);
Document doc = new Document();
PdfWriter.GetInstance(doc, new FileStream(Server.MapPath(pdfPath), FileMode.Create));
doc.Open();
doc.Add(new Paragraph(sb.ToString()));
doc.Add(img);
doc.Close(); 
```

# jquery - 使刷新功能仅刷新页面的某些部分

> ID：15894541
> 
> 赞同：3
> 
> 时间：2013-04-09T06:13:06.577
> 
> 标签：jquery

在我的列表视图中，我有几个问题列表，现在我尝试在单击刷新按钮时进行操作，列表视图中的问题将按随机顺序刷新。我想知道我是否可以只刷新页面的列表部分而不是整个页面？

```
 <ul id="list" data-role="listview" data-filter="true" data-filter-reveal="true"      data-filter-placeholder="Search Questions..." data-inset="true" ></ul>
<script>
var jsonfile = 'data.json';
var qData = [];
var qHint = [];

$.getJSON(jsonfile, function(data) {

while (data.activity.length) {
    var index = Math.floor(Math.random() * data.activity.length);
    qData.push(data.activity[index].question);
    qHint.push(data.activity[index].hint);
        data.activity.splice(index, 1)
    }

for (var i = 0; i < 8; i++) {
    question(qData[i], i);
     hint(qHint[i], i);
    $('#text' + (i + 1)).textinput();
    $('#submit' + (i + 1)).button();
    $('#cancel' + (i + 1)).button();

}

function question(data, i) {
    $('#list').append('<li><a href=#mypanel'+ (i + 1)+ '  data-icon="arrow-l" data-iconpos="notext" data-shadow="false" data-iconshadow="false" class="ui-icon-nodisc" id="list">'+ data + '</a></li>'); // list item

}
 function hint(data, i)
 {
    $('#mypanel' + (i + 1)).append("<div align='center' style='margin-top:30px;'><font style='font-family:Helvetica, Arial, sans-serif ;color:white;' size='5px' ><b>Question Hint : </b></font></div><br/><label for=text" + (i + 1) + " id=paneltitle"+ (i + 1)+ " style='margin-top:10px;text-align:center;color:white;'>"+ data + "</label>");// panel item
    $('#paneltitle' + (i + 1)).append('<input type="text" id=text'+ (i + 1) + ' >');
    $('#mypanel' + (i + 1)).append('<a href="#header" data-role="button" id=submit'+ (i + 1)+ ' data-inline="true" data-rel="close" data-icon="check" style="margin-left:75px;">Submit</a>');
    $('#mypanel' + (i + 1)).append('<a href=#mypanel'+ (i + 1)+ ' data-role="button" id=cancel'+ (i + 1)+ ' data-inline="true" data-rel="close" data-icon="delete2" style="margin-left:75px;">Cancel</a>');
 }

//Affected part
$('#PageRefresh').click(function() {

          location.reload();

});

$('#list').listview('refresh');
})

       <div data-theme="a" data-role="footer" data-position="fixed">
            <div data-role="navbar">
            <ul>
                <li><a id="PageRefresh" data-icon="refresh">Refresh</a></li>
            </ul>
            </div>
        </div> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-09T06:23:39.097

这样就可以了；

[JSfiddle](http://jsfiddle.net/Allendar/gEJsd/)

**HTML**

```
<ul id="myList">
    <li>1</li>
    <li>2</li>
    <li>3</li>
    <li>4</li>
    <li>5</li>
    <li>6</li>
</ul>

<button id="myButton">Click me</button> 
```

**JavaScript**

```
'use strict';

Array.prototype.shuffle = function() {
    var s = [];
    while (this.length) s.push(this.splice(Math.random() * this.length, 1)[0]);
    while (s.length) this.push(s.pop());
    return this;
}

$(document).ready(function(){
    $('#myButton').click(function() {
        // Get all children of the <ul>
        var lis = $('#myList').children().get();

        // Shuffle the DOM elements (children) in the array
        lis.shuffle();

        // Empty the <ul> list
        $('#myList').html('');

        // Loop the shuffled array of DOM-elements and put them back in the <ul>
        for (var i = 0; i < lis.length; i++) {
            $('#myList').append(lis[i]);
        }
    });
}); 
```

我使用一个干净的示例作为更易于理解的演示。我认为使用一个干净的示例比将代码完全放入循环中更容易理解。

祝你好运！

# php - 检查给定链接的真实性并使用 php 将其存储在 mysql 表中

> ID：15894549
> 
> 赞同：0
> 
> 时间：2013-04-09T06:13:38.173
> 
> 标签：php

如何检查用户给定的链接是否属于特定网站的链接？我正在使用 php。我应该使用 preg 还是有它的功能？我也可以检查链接是否损坏？有它的功能吗？如何确保删除恶意链接或者无法自动处理？我应该使用以下功能吗？ `$link=mysql_real_escape_string($_GET['link']);`

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-09T06:19:35.407

> 如何检查用户给定的链接是否属于特定网站的链接？

您可以尝试使用或[`file_get_contents()`](http://php.net/file_get_contents)来获取链接。[`get_headers()`](http://php.net/get_headers)[`curl`](http://php.net/curl)

> 我应该使用 preg 还是有它的功能？

可以通过以下方式验证 URL 的内容[`filter_input()`](http://php.net/filter_input)：

```
$url = filter_input(INPUT_GET, 'link', FILTER_VALIDATE_URL);
// $url would be false if invalid or null if not available 
```

> 我也可以检查链接是否损坏？

如前所述，您必须获取链接并确定状态代码。

> 有它的功能吗？

是的，如前所述。

> 如何确保删除恶意链接或者无法自动处理？

如果链接无效，则由您自行删除数据库中的相应条目，或者您存储它们的任何位置。

> 我应该使用以下功能吗？`$link=mysql_real_escape_string($_GET['link']);`

这用于为数据库存储准备值。它也使用旧`mysql_`函数，您应该切换到 mysqli 或 PDO 并使用准备好的语句来完全处理转义。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-09T06:21:50.600

始终使用 get_headers，它可以帮助您验证网站的状态，无论它是否可用。

$val = @get_headers(" [http://www.google.com](http://www.google.com) ");
print_r($val[0]);

使用以下 preg_match 模式检查损坏的链接。

%^((https?://)|(www.))([a-z0-9-].?)+(:[0-9]+)?(/.*)?$%i

# vb.net - 跟踪已输入数据数量的代码

> ID：15894551
> 
> 赞同：0
> 
> 时间：2013-04-09T06:13:45.497
> 
> 标签：vb.net, ms-access-2007

我有一个表格，我想在其中输入机器的 Sr. Nos。它有一个组合框，我必须选择保存在另一个表中的发票以及相应的机器数量。当我输入机器详细信息时，它应该说我为“输入第 X/Y 台机器的 Sr 编号，其中 y 是保存在 db 中的总数量，x 是我保存的 sr 编号+1”

它还应该允许我保存号码。有些地方..我的意思是在任何变量中，所以如果我在单词之间和之后暂停我的工作，如果继续，它应该说我“输入 X'th/Y'th 的详细信息”而不是“1'st/Y'th”

我正在使用这段代码：

```
Private Sub get_qty()

    Dim qtySql As String = "SELECT * FROM invoice1 where chalan_no='" & cmbChal_no.Text & "'"
    cnnOLEDB.Open()
    Dim cmd As OleDb.OleDbCommand = New OleDb.OleDbCommand(qtySql, cnnOLEDB)

    Dim dr As OleDb.OleDbDataReader = cmd.ExecuteReader

    If dr.Read = True Then
        qnty = dr("qty")
    End If

    cnnOLEDB.Close()

End Sub

Private Sub Srno_enter()

    Dim noSql As String = "SELECT count(sr_no) FROM Vendor_machine GROUP BY(chalan_no) having chalan_no='" & cmbChal_no.Text & "'"
    cnnOLEDB.Open()
    Dim cmd As OleDb.OleDbCommand = New OleDb.OleDbCommand(noSql, cnnOLEDB)

       ' Suggest code retrieve count(sr_no)           <--------------------------

    cnnOLEDB.Close()

End Sub

private sub show()
     lblMachine= 'Result of count(sr_no)' "/" qnty
end sub 
```

请给我建议相同的代码..谢谢..

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-09T08:07:05.463

只需在数据库中使用[Identity 列](http://en.wikipedia.org/wiki/Identity_column)，让数据库引擎完成创建下一个空闲号码的工作。

如果您编写了一个存储过程来执行插入，则可以[将序列号作为输出参数返回](https://stackoverflow.com/questions/3142444/stored-procedure-return-identity-as-output-parameter-or-scalar)

# android - 如何从 CursorWindow 读取行/列？- 安卓

> ID：15894556
> 
> 赞同：0
> 
> 时间：2013-04-09T06:14:02.310
> 
> 标签：android

这是我比较它的功能.......如果有错误，请查找错误。我还没有登录

```
public void onClick(View v) {
// TODO Auto-generated method stub

String unname=username1.getText().toString();
String storedPassword1=db.getdata(unname);
db.open();
try
{
if(password.equals(storedPassword1))
{
Intent it=new Intent("com.Butterfly.bmw.ADMINLIST");
startActivity(it);
}
else
{
 Toast.makeText(Database.this, "User Name or Password  does not match",     Toast.LENGTH_LONG).show();
System.out.println("errorrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrr");
}
db.close(); 
}
catch (Exception e)
{
Toast.makeText(Database.this, "does not enter in try block", Toast.LENGTH_LONG).show();
} }
}); 
```

这是我的数据库类，请从这里找到错误。我还没有登录

```
import android.content.ContentValues;
import android.content.Context;
import android.database.Cursor;
import android.database.SQLException;
import android.database.sqlite.SQLiteDatabase;
import android.database.sqlite.SQLiteOpenHelper;
import android.util.Log;
public class EditDatabase 
{
public static final String KEY_USERNAME="username";
public static final String KEY_ROLE="role";
public static final String KEY_PASSWORD="password";
private static final String TAG="DbaAdapter";
private static final String DATABASE_NAME="mydatabase";
private static final String DATABASE_TABLE="login";
private static final int DATABASE_VERSION=1;

private static final String DATABASE_CREATE="create table "+DATABASE_TABLE+"("+KEY_USERNAME+" text primary key ,"+KEY_PASSWORD+" text not null,"+KEY_ROLE+" text not null)";
  private final Context context;
  private static DatabaseHelper DBhelper;
  private static SQLiteDatabase db;

  public EditDatabase(Context ctx){
 this.context=ctx;
 DBhelper=new DatabaseHelper(context);
  }
  private static class DatabaseHelper extends SQLiteOpenHelper{
  DatabaseHelper(Context context){
  super(context,DATABASE_NAME,null,DATABASE_VERSION);
  }
 @Override
public void onUpgrade(SQLiteDatabase db, int oldVersion, int newVersion) {
// TODO Auto-generated method stub
 Log.w(TAG, "Upgrading database from version " + oldVersion + " to "
  + newVersion + ", which will destroy all old data");
  db.execSQL("DROP TABLE IF EXISTS contacts");
  onCreate(db);
}
 @Override
public void onCreate(SQLiteDatabase db) {
// TODO Auto-generated method stub
db.execSQL(DATABASE_CREATE);
}
}
public EditDatabase open() throws SQLException{
    // TODO Auto-generated method stub
    db=DBhelper.getWritableDatabase();
      return this;
}

public long insertDetails(String uname, String pass, String string) {
    // TODO Auto-generated method stub

      ContentValues initialValues = new ContentValues();
      initialValues.put(KEY_USERNAME, uname);
      initialValues.put(KEY_PASSWORD, pass);
      initialValues.put(KEY_ROLE, "admin");
      return db.insert(DATABASE_TABLE, null, initialValues);
}
public void close() {
    // TODO Auto-generated method stub
     DBhelper.close();
}

public String getdata(String unname) {
    // TODO Auto-generated method stub

    Cursor cursor = db.rawQuery("SELECT * FROM login WHERE KEY_USERNAME=?", new String [] { unname.toString() });
    if(cursor.getCount()<1) // UserName Not Exist
    {
        cursor.close();
        return "NOT EXIST";
    }
    cursor.moveToFirst();
    String password= cursor.getString(cursor.getColumnIndex("KEY_PASSWORD"));
    cursor.close();

     return password; 

}
public long insertDetailsuser(String uname, String pass, String string) {
    // TODO Auto-generated method stub
     ContentValues initialValuess = new ContentValues();
      initialValuess.put(KEY_USERNAME, uname);
      initialValuess.put(KEY_PASSWORD, pass);
      initialValuess.put(KEY_ROLE, "user");
      return db.insert(DATABASE_TABLE, null, initialValuess);
}

public Cursor getAllContacts() {
    // TODO Auto-generated method stub

     return db.query(DATABASE_TABLE, new String[] {KEY_USERNAME, KEY_PASSWORD,
              KEY_ROLE}, null, null, null, null, null);}
public boolean deleteDetails(String uname) 
{
// TODO Auto-generated method stub
//Cursor cursor=db.rawQuery("select password from login where " +  KEY_USERNAME + "='"   + unname + "'", null);
return db.delete(DATABASE_TABLE,KEY_USERNAME + "='" + uname + "'",  null)>0;
}
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-09T06:50:55.440

我认为它可能会对您有所帮助..尝试使用此代码获取数据..它是您可以自己管理的代码段..

你的数据库文件.Java

```
public String get(String unname)
{
     return db.rawQuery("SELECT * FROM login WHERE KEY_USERNAME=?", new String [] { unname.toString() });
} 
```

你的代码文件.Java

```
public void onClick(View v)
{
    String storedPassword;
    String unname=username1.getText().toString();
    db.open();

    Cursor cur = db.get(unname);
    cur.moveToFirst();      
    if(cur.getCount() < 1 )
    {
        storedPassword = "NOT EXIST";
    }
    else
    {
        storedPassword = cur.getString(cur.getColumnIndex("KEY_PASSWORD"));
    }

    cur.close();

    try
    {
        if(password.equals(storedPassword))
        {
            Intent it=new Intent("com.Butterfly.bmw.ADMINLIST");
            startActivity(it);
        }
        else
        {
            Toast.makeText(Database.this, "User Name or Password does not match", Toast.LENGTH_LONG).show();
            System.out.println("errorrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrr");
        }
        db.close(); 
    }
    catch (Exception e)
    {
        Toast.makeText(Database.this, "does not enter in try block", Toast.LENGTH_LONG).show();
    }
} 
```

# jquery - Phonegap AJAX 调用失败

> ID：15894565
> 
> 赞同：1
> 
> 时间：2013-04-09T06:14:44.393
> 
> 标签：jquery, ios, ajax, cordova

我正在尝试获取一个简单的 phonegap 应用程序来与我的服务器通信。

这是我的 JavaScript：

```
<script src="js/jquery.min.js" ></script>
    <script>
        $.ajax({
            url: 'http://www.drimmit.com/test',
            dataType: 'jsonp',
            jsonp: 'jsoncallback',
            timeout: 5000,
            success: function(data, status){
                //data loaded
                alert(data);
            },
            error: function(){
                //error loading data
                alert('no data');
            }
        });
    </script> 
```

我还在 config.xml 中将域列入白名单：

```
<access origin="http://www.drimmit.com" subdomains="true"/> 
```

在我的服务器上，我正在做一个简单的 echo 语句。

```
<?php
header('Content-type: application/json');
echo 'hello from server';

?> 
```

最后，我只是得到一个弹出窗口（iOS）说“没有数据”，这意味着它失败了。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-09T06:54:08.590

您已经提到了`dataType: 'jsonp'`您正在发送字符串的响应

```
<?php
header('Content-type: application/json');
echo json_encode('hello from server');
?> 
```

希望这可以帮助

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-09T07:15:41.147

您已经提到请求类型为 jsonp，但是您正在从服务器渲染 json，因此问题是，如果您从 ajax 调用中删除“jsonp：'jsoncallback'”语句，它应该可以正常工作，也替换 dataType:'jsonp'使用数据类型：'json'。

PS - 如果您正在发出跨域请求，则使用 jsonp，但在 phonegap 中它不是必需的，因为您已经将域列入白名单。

# php - 在 codeigniter 中验证动态生成的字段数组

> ID：15894568
> 
> 赞同：0
> 
> 时间：2013-04-09T06:14:51.703
> 
> 标签：php, arrays, codeigniter, validation, jquery

我有一个表单，其中一些字段是动态生成的。

```
<table class="insideform">
                            <tr>
                                <td>
                                <script>
                                    $(document).ready(function() {
                                        $('#addrange').click(function(){
                                            var value = '<tr><td><input type="number" size="10" id="from" name="from[]" value=""></td>';
                                                value += '<td><input type="text" size="10" id="to" name="to[]" value=""></td>';
                                                value += '<td><input type="text" id="disprice" name="disprice[]" /></td>';
                                                value += '<td valign="middle" id="removerange">x</td>';
                                                value += '<td id="to_err" class="err"></td></tr>';

                                            $('.discounttable').append(value);
                                        });

                                        $('body').on("click","#removerange",function(){
                                            $(this).parent().remove();
                                        });

                                        $('#maxqty').change(function(){
                                            var value = $('#maxqty').val() + " Above";
                                            $('#maxabove').text(value);
                                        });

                                    });
                                </script>
                                    <table class="discounttable">
                                        <tr>
                                            <th>From</th>
                                            <th>To</th>
                                            <th>Price</th>
                                        </tr>
                                        <tr>
                                            <td colspan="2" align="right"><span id="maxabove">10 Above</span></td>
                                            <td><input type="text" name="maxaboveinput" id="maxaboveinput" /></td>
                                            <td id="maxaboveinput_err" class="err"></td>
                                        </tr>
                                        <tr>
                                            <td><input type="text" size="10" id="from" name="from[]" value=""></td>
                                            <td><input type="text" size="10" id="to" name="to[]" value=""></td>
                                            <td><input type="text" /></td>
                                            <td valign="middle" id="removerange">x</td>
                                            <td id="to_err" class="err"></td>
                                        </tr>
                                    </table> <input type="button" name="addrange" id="addrange" value="Add Row"/> 
```

我想验证codeignitor中的所有to []，from []字段，我使用ajax调用来验证表单这里是代码：

```
$('#submit').click(function(){
        console.log($("#form").serialize());
        $.ajax({
                url:'<?php echo base_url(); ?>index.php/placeorder/valids',
                type:'POST',
                data:$("#form").serialize()
                }).done(function(data){
                    $("#validations").html(data);}); 
```

我试图在控制器中编写此代码：

```
$this->load->helper(array('form', 'url'));
 $this->load->library('form_validation');
 $this->form_validation->set_message('%s required', '*required');

 $this->form_validation->set_rules('to[]', 'To field', 'required|xss_clean');
$this->form_validation->set_rules('from[]', 'From field', 'required|xss_clean');

 $errors = array();

 if ($this->form_validation->run() == FALSE)
    {
        echo validation_errors();

    } 
```

它没有验证我的字段......并且validation_errors没有显示任何我试图将它解析为json并回显json代码的东西......'to'和'from'在json中显示为空。有人可以帮忙吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-09T06:18:34.083

样品控制器：

```
 public function sample_controller() {

    if ($this->input->post()) {
      $this->load->library('form_validation');
      $this->form_validation->set_rules('from[]', 'From field', 'required|xss_clean');
      if ($this->form_validation->run() == TRUE) {
        echo 'success';
      } else {
        echo validation_errors();
      }
    }
    $this->load->view('sample_view');
  } 
```

示例视图：

```
<form method="post">
  <input type="text" size="10" id="from" name="from[]" value="dino"/>
  <input type="text" size="10" id="from" name="from[]" value="babu"/>
  <input type="text" size="10" id="from" name="from[]" value="kannampuzha"/>
  <input type="submit" value="Go" />
</form> 
```

// 输出

1) 如果任何文本框为空

```
The From field field is required. 
```

2) 如果所有文本框都填满

```
success 
```

# shell - 执行带有使用 I/O 间接接受的代码的 shell 脚本

> ID：15894569
> 
> 赞同：0
> 
> 时间：2013-04-09T06:14:54.627
> 
> 标签：shell, unix

我正在尝试执行这样的脚本，使用间接接受脚本

```
sh <<EOT
for str in `cat test`
do
 echo $str
done
EOT 
```

文件“test”有内容

```
a
b
c 
```

它给出了以下错误。

```
sh: line 2: syntax error near unexpected token `b'
sh: line 2: `b' 
```

任何人都可以澄清吗？我的目标是像上面那样执行脚本，而不是创建一个 shell 脚本文件 script.sh 并执行它（效果很好）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-09T06:58:24.853

您的外壳正在插入 HEREDOC。为防止这种情况，请引用分隔符：

```
sh << 'EOT' 
```

为了澄清，你所拥有的相当于：

```
sh <<EOT
for str in a
b
c
do
 echo
done
EOT 
```

这使得语法错误相当明显。

# java - 使用 Google App Engine (GAE) 生成哈希码

> ID：15894570
> 
> 赞同：2
> 
> 时间：2013-04-09T06:14:55.373
> 
> 标签：java, google-app-engine, hash, google-cloud-datastore

我需要设计一种方法来为存储在我的应用程序中的每个文档提供哈希值。

使用现有的哈希库（`BCrypt`等），甚至 BSON`ObjectId`生成不错的“哈希”或“密钥”，但它很长。

我也明白实现短散列的唯一方法是散列更少的字符串（如果没有记错的话）。就像哈希`Long`id 的盯着`0, 1, 2, 3`等等。

然而，这很容易想到，在 Google App Engine (GAE) 数据存储中实现起来相当困难，或者直到现在我还没有真正跨越这个需求。

GAE 数据存储跨服务器甚至跨数据中心存储实体，并且自动增量 ID 并不是真正用于此目的。

实现这一目标的策略是什么？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-10T21:34:50.727

据我了解，您正在寻找一种为您的文档生成简短、唯一、字母数字标识符的方法。URL 缩短器所做的事情（请参阅问题[制作类似于 TinyURL.com 的短 URL](https://stackoverflow.com/questions/1671059/making-a-short-url-similar-to-tinyurl-com)或[创建短哈希的最佳方法是什么，类似于 tiny Url 的功能？](https://stackoverflow.com/questions/1116860/whats-the-best-way-to-create-a-short-hash-similiar-to-what-tiny-url-does)或[如何使用 Python 制作独特的短 URL？](https://stackoverflow.com/questions/1497504/how-to-make-unique-short-url-with-python)等。 ）。我的回答是基于这个假设。

数据存储会生成唯一的自动递增 ID，因此您可以依赖它。多个数据中心不是问题，您的 ID 将是唯一的、短的（至少最初是这样）并且不会发生冲突。这可能就是 tinyurl 和类似服务的实现方式。

您甚至可以使用[DatastoreService.allocateIds()](https://developers.google.com/appengine/docs/java/javadoc/com/google/appengine/api/datastore/DatastoreService#allocateIds%28java.lang.String,%20long%29)在将新文档保存在数据存储中之前请求一个或多个唯一 ID ，例如：

```
KeyRange keyRange = dataService.allocateIds("MyDocumentModel", 1);
long uniqueId = keyRange.getStart().getId(); 
```

然后，您可以“散列”此 ID，或者您可以通过简单地将整数 ID 转码为 Base64（或 Base36 或您定义自己的字符的其他基数，例如，省略元音可以帮助您避免产生明显的脏话）来获得更短的字母数字 ID意外的话）。

如果可预测性是一个问题，您可以为这个字母数字 ID 加上一些随机字符的前缀/后缀。

# android - 更新单个列正在创建 sqlite 语法错误

> ID：15894573
> 
> 赞同：0
> 
> 时间：2013-04-09T06:15:07.057
> 
> 标签：android, sqlite, sql-update

我不确定自己做错了什么，但我正在尝试将表列中的单个整数值从 0 更新为 1。创建数据库时，我使用以下方法将列的所有值设置为零：

```
for (int i = 0; i < setups.length; i++) {
        ContentValues values = new ContentValues();
        values.put(JokeDbContract.TblJoke.COLUMN_NAME_SETUP, setups[i]);
        values.put(JokeDbContract.TblJoke.COLUMN_NAME_PUNCHLINE, punchlines[i]);
        values.put(JokeDbContract.TblJoke.COLUMN_NAME_USED, 0);

        db.insert(JokeDbContract.TblJoke.TABLE_NAME, null, values);
    } 
```

然后，在实际活动中，我正在做：

```
private void findNewJoke() {
    JokeDb jokeDb = JokeDb.getInstance(this);
    SQLiteDatabase theDb = jokeDb.getDB();
    String selection = JokeDbContract.TblJoke.COLUMN_NAME_USED + "=" + 0;

    // Query database for a joke that has not been used, update the fields
    // theJoke and thePunchline appropriately
    String[] columns = {JokeDbContract.TblJoke._ID,
                        JokeDbContract.TblJoke.COLUMN_NAME_PUNCHLINE,
                        JokeDbContract.TblJoke.COLUMN_NAME_SETUP,
                        JokeDbContract.TblJoke.COLUMN_NAME_USED};

    Cursor c = theDb.query(JokeDbContract.TblJoke.TABLE_NAME, columns, selection,
                        null, null, null, null);

    if (c.moveToFirst() == false) {
        Toast.makeText(this, R.string.error_retrieving_joke, Toast.LENGTH_LONG).show();
        Log.e(getString(R.string.app_name),"No jokes retreived from DB in JokeActivity.findNewJoke()!");
    }
    else {
        ContentValues values = new ContentValues();
        theSetup = c.getString(c.getColumnIndexOrThrow(JokeDbContract.TblJoke.COLUMN_NAME_SETUP));
        thePunchline = c.getString(c.getColumnIndexOrThrow(JokeDbContract.TblJoke.COLUMN_NAME_PUNCHLINE));

        String updateSelection = JokeDbContract.TblJoke.COLUMN_NAME_SETUP + "=" + theSetup;

        values.put(JokeDbContract.TblJoke.COLUMN_NAME_USED, 1);

        theDb.update(JokeDbContract.TblJoke.TABLE_NAME, values, updateSelection, null);
    }
} 
```

我收到更新错误：

```
java.lang.RuntimeException: .... while compiling: UPDATE jokes SET used=? 
WHERE setup=Why do programmers always mix up Halloween and Christmas? 
```

似乎我没有为已使用的列设置实际值。程序最终所做的是循环播放 used=0 的笑话，然后在查看时将 used 设置为 1。所以查询只提取那些尚未使用的笑话。我有一种感觉，我错过了一些简单的东西，一个可以希望的东西。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-09T06:18:18.030

我认为您在使用引号时遇到问题。

例子：

```
String updateSelection = JokeDbContract.TblJoke.COLUMN_NAME_SETUP + "=\"" + theSetup + "\""; 
```

但是，推荐的方法是：

```
theDb.update(JokeDbContract.TblJoke.TABLE_NAME, values, JokeDbContract.TblJoke.COLUMN_NAME_SETUP + " = ?", new String[] { theSetup }); 
```

最好使用 field = ?，因为这有助于 sqlite 缓存查询（我相信）。

# design-patterns - 如何区分系统代码版本修订？

> ID：15894577
> 
> 赞同：0
> 
> 时间：2013-04-09T06:15:33.680
> 
> 标签：design-patterns

我开发了具有多种功能的产品。几天前，我们发布了我们的第一个版本 v1r1。

现在我们已经开始在 v1r2 中开发。

我的问题是如何使用 v1r1 管理 v1r2 代码？

如果我将进行条件编译（#define V1R2），那么代码将变得混乱，因为该代码会有多个版本，并且如果团队 1 正在处理 v1r1 并且团队 2 同时正在处理 v1r2，则可能会出现代码冲突。

我不想为版本修订（v1r2）保留不同的副本。一旦我们开始开发 v2（版本 2），我将保留不同的副本。

任何想法都将受到高度赞赏。谢谢-桑迪普·帕特尔。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-09T06:39:51.040

我总是觉得[gitworkflows](http://git-scm.com/docs/gitworkflows)很有启发性。即使您不使用 Git，其中描述的做法也非常合理，适用于几乎所有版本控制系统（尽管不推荐使用的不将历史表示为 DAG 的系统在执行合并时可能会给您带来困难） .

我也喜欢[这篇](http://nvie.com/posts/a-successful-git-branching-model/)更详细的文章。对于此工作流程，存在一[组脚本](https://github.com/nvie/gitflow)，可以更轻松地实施此工作流程。

# php - 将 mysql_* 转换为 PDO

> ID：15894578
> 
> 赞同：0
> 
> 时间：2013-04-09T06:15:38.350
> 
> 标签：php, mysql

我已经使用 PHP 编写了一个程序并尝试将数据存储到本地服务器 Xampp 中，但是每当我使用这个 url 运行我的 php 脚本时：

```
 http://127.0.0.1/test.php 
```

收到错误消息：**{"StatusID":"0","Error":"无法保存数据！"}**

请有人帮助我，我怎样才能使它对我有用，请检查下面的 PHP 脚本：

```
 <?php

$objConnect = mysql_connect("localhost","root","");
mysql_error($ObjConnect);

$objDB = mysql_select_db("registration_login");
mysql_error($ObjDB);

$strUsername = $_POST["sUsername"];
$strPassword = $_POST["sPassword"];
$strName = $_POST["sName"];
$strEmail = $_POST["sEmail"];
$strTel = $_POST["sTel"];

/*** Insert ***/
$strSQL = "INSERT INTO member (Username,Password,Name,Email,Tel)
VALUES (
'".$strUsername."',
'".$strPassword."',
'".$strName."',
'".$strEmail."',
'".$strTel."'
)
";

$objQuery = mysql_query($strSQL);
mysql_error($ObjQuery);

if(!$objQuery)
{
$arr["Status"] = "0";
$arr["Message"] = "Cannot Save Data!";

echo json_encode($arr);
exit();
}
else
{
$arr["Status"] = "1";
$arr["Message"] = "Register Successfully!";

echo json_encode($arr);
exit();
}

mysql_close($objConnect);

?> 
```

**注意：**我在这个数据库下创建了**registration_login**数据库和**成员**表。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-09T08:26:39.663

为什么不将mysql报告的错误返回或记录在某个地方？

> $objConnect = mysql_connect(DB_HOST, DB_USER, DB_PASSWORD);

您忘记检查返回值是否成功 - 如果失败，原因在 mysql_error()

> $objDB = mysql_select_db(DB_DATABASE);

您忘记检查返回值是否成功 - 如果失败，原因在 mysql_error()

> $objQuery = mysql_query($strSQL);

至少这次你检查了返回值——但你没有检查错误是什么。

顺便说一句，您的脚本对 SQL 注入很开放。

> 将 mysql_* 转换为 PDO

和你的帖子有什么关系？

# java - 如何在java中使用google plus api在用户的Streams中发布

> ID：15894582
> 
> 赞同：1
> 
> 时间：2013-04-09T06:15:52.483
> 
> 标签：java, oauth-2.0, google-plus, scribe

我想从我的应用程序中在 google plus wall 中分享一些信息。我正在尝试 moment.insert，但出现 400 错误。有人可以帮我吗

```
@Override
  public JSONObject getGooglePlusAddUseractivities(Object token) {
  Token accessToken = (Token) token;
  OAuthService service = createOAuthServiceForGooglePlus();
   OAuthRequest request = new       OAuthRequest(Method.POST,"https://www.googleapis.com/plus/v1/people/me/moments/vault");
   request.addQuerystringParameter("alt", "json");
   service.signRequest(accessToken, request);
   JSONObject object=new JSONObject();
   try {
     object.put("kind","plus#moment");
     object.put("type","http://schemas.google.com/AddActivity"); 
     JSONObject obj1=new JSONObject();
     obj1.put("kind", "plus#itemScope");
     obj1.put("url","https://plus.google.com/me");
     obj1.put("description","Sign up now to claim and redeem your credits while          shopping! ");
     obj1.put("image","http://invite.png");
     obj1.put("contentUrl", "www.abcd.com");
     obj1.put("thumbnailUrl", "http://logo1_favicon.png");
     object.putOpt("target", obj1);;
     }catch(Exception ex) {
          ex.printStackTrace();
       }
     request.addPayload(object.toString());
     request.addHeader("Content-Type", "application/json");
     System.out.println("request : "+request.getBodyContents());
     Response response = request.send();
     String responseBody = response.getBody();
     JSONObject googleJSON = null;
     try {
      googleJSON = new JSONObject(responseBody);
     }
     catch (JSONException e) {
      System.out.println("can not create JSON Object");
     } 
```

得到400错误？？任何人都可以告诉我.....哪里错了..!!`

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-10T00:38:14.840

目前，无法以编程方式写入用户的 Stream。作为开发人员，您有两种选择：

1.  编写一个 AppActivity（以前称为 Moment），它将信息写入 Google，但不会写入 Google+ 流。这些活动在 plus.google.com/apps 上可见，并且随着时间的推移 Google 将以其他方式使用。
2.  创建一个用户必须启动的交互式帖子共享按钮。但是，您可以预先填写帖子的文本和最多 10 个预期收件人。用户可以根据需要进行更改，然后执行实际共享。[您可以在https://developers.google.com/+/web/share/interactive](https://developers.google.com/+/web/share/interactive)或观看此 Google+ 开发者直播剧集了解更多信息： [http](http://www.youtube.com/watch?v=U4Iw28jWtAY) ://www.youtube.com/watch?v=U4Iw28jWtAY 。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-04-09T11:22:20.563

从文档中不清楚，但您不能同时提供`target.url`和大多数其他`target`元数据。这目前在问题跟踪系统中作为[错误 485](https://code.google.com/p/google-plus-platform/issues/detail?id=485)打开- 请前往那里并为问题加注星标，以确保他们正确地确定修复的优先级。

如果您删除该`target.url`值并添加一个`target.id`值，它应该可以工作。

（顺便说一句，这不会在用户的信息流中发布，但会在他们的应用时刻库中发布应用活动。如果他们选择，他们必须手动共享活动。）

# c - 如何设置寄存器值以启用中断？

> ID：15894587
> 
> 赞同：2
> 
> 时间：2013-04-09T06:16:09.440
> 
> 标签：c, linux, linux-kernel

我正在处理 Android 设备的中断。（Android 4.2.2 Kernel 2.6.29，在 Mach-Goldfish 虚拟设备上运行）。

到目前为止，我已经使用中断#17 注册了我的设备。它尚未启用，因此发送到此中断的信号将被忽略，并且我的中断处理程序不会收到通知。

启用我的设备的寄存器位于偏移量 0x00 处，内存地址由

`(char __iomem *)IO_ADDRESS(resource->start - IO_START)`

从 0xFE016000 开始。

我试过：（在`mydevice_probe()`）

```
writel(0x07, 0xFE016000);
//0x07 is a mask to enable three sub-devices at bit 0, bit 1 and bit 2. 
```

但是内核立即崩溃了。以下`writel`s 也不起作用：

```
writel(0x00, 0xFE016000);
writel(0x01, 0xFE016000); 
```

我错过了什么？谁能告诉我如何完成这项工作？万一我的起始地址有误，您能指出正确获取它的方法吗？

谢谢。

P/S：内核恐慌：

```
qemu: fatal: mydevice_write: Bad offset fea000

R00=c02ef00b R01=00000000 R02=00000007 R03=e0808000
R04=c0340864 R05=c031e3b0 R06=c0173b6c R07=c031e3cc
R08=00000000 R09=00100100 R10=00000000 R11=df827e34
R12=ff016000 R13=df827e18 R14=c002e96c R15=c0030aac
PSR=20000013 --C- A svc32
Aborted (core dumped) 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-12T08:03:10.377

这是结束我的问题。原来是模拟器有问题。通常`writel(MASK, IO_ADDRESS(resource->start - IO_START));`应该可以工作。

# c# - 如何捕获绑定的数据更新事件？

> ID：15894588
> 
> 赞同：1
> 
> 时间：2013-04-09T06:16:13.440
> 
> 标签：c#, xaml, binding, windows-runtime, winrt-xaml

我正在为 Windows 8 编写一个应用程序，我有一个 UI 类`GroupedItemsPage`，它继承自`LayoutAwarePage`包含数据：

```
 this.DefaultViewModel["Groups"] = sampleDataGroups; 
```

sampleDataGroups 中的每个项目都绑定到 UI 中的图块，而 sampleDataGroups 是一个继承自 BindableBase 的类，每个属性都使用

```
set{this.SetProperty(ref this._property, value); } 
```

我想做的是能够在`GroupedItemsPage`每次更改 sampleDataGroups 中的属性时在我的 UI 类中捕获一般事件（以便我可以将 sampleDataGroups 重写到文件中）。我已经进行了一些研究，但我真的发现了如何为 sampleDataGroups 捕获通知事件，但如果我希望 sampleDataGroups 通知则不行`GroupedItemsPage`？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-09T20:32:54.227

您的页面不应将数据写入文件。它更多的是视图模型或模型的职责。如果您确实必须这样做，那么您将需要订阅由变量`PropertyChanged`类型声明的事件并在页面对象中处理该事件。`sampleDataGroups`

# c++ - C++：如何确保所有变量都已初始化？

> ID：15894590
> 
> 赞同：1
> 
> 时间：2013-04-09T06:16:16.517
> 
> 标签：c++, initialization, declaration

最近我在使用非初始化变量时遇到了很多麻烦。

在Java中，变量的默认值为null，因此如果使用未初始化的变量，很可能会抛出异常。如果我理解的话，在 C++ 中，变量会使用内存中的任何数据进行初始化。这意味着程序很可能会运行，甚至可能很难知道它有什么问题。

处理这个问题的干净方法是什么？是否有一些好的编程习惯可以降低风险？在我的例子中，变量是在头文件中声明的，并且应该在 cpp 文件中初始化，这是一个更容易出错的例子。

谢谢

* * *

收到几个答案后的版本：

抱歉，我的问题不够具体。

我得到的使用 flag 让编译器了解未初始化变量的答案将很有用。

但是很少有大小写变量不能在一开始就被初始化，因为这取决于你系统的行为。

在头文件中

```
double learnedValue; 
```

在cpp文件中

```
/* code that has nothing to do with learnedValue
...
*/

learnedValue = a*b*c; // values of a, b and c computed in the code above

/*code making use of learned value
...
*/ 
```

现在发生的事情是忘记了“learnedValue=a*b*c”这一行。

但是该程序运行良好，只是将 learnValue 的值初始化为声明时内存中的任何内容。

在 Java 中，这样的错误不是问题，因为使用学习值的代码很可能会崩溃或抛出异常（至少你知道出了什么问题）。

在 C++ 中，您显然可以很高兴，但根本不知道有问题。或者 ？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-09T06:24:25.510

请确保在编译程序时设置了适当的警告级别。每当使用未初始化的变量时，编译器都会发出适当的警告。

在 g++ 上，-Wall 编译器选项将显示所有警告。

在 Visual Studio 上，您可能必须使用警告级别 4。

此外，市场上有一些静态代码分析工具。 [cppCheck](http://cppcheck.sourceforge.net/)就是这样一款免费提供的工具。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-04-09T07:14:18.253

您不应在标头中定义变量（仅声明它）。否则，当您将标头包含在多个 .cpp 文件中时，您会遇到其他错误。

在实际定义变量时，也可以给它一个初始值（如 0）。在 C++ 中，延迟（局部）变量的定义也很常见，直到你有一个值可以分配给它们。

在头文件中

```
extern double learnedValue;
^^^^^^ 
```

在 cpp 文件中

```
double learnedValue = 0;

/* code that has nothing to do with learnedValue
...
*/

learnedValue = a*b*c; // values of a, b and c computed in the code above

/*code making use of learned value
...
*/ 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-09T06:20:59.037

您可以在声明它们的地方定义变量

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-04-09T06:27:02.983

c++11 允许你在类中初始化变量。如果编译器尚未实现，那么构造函数初始化列表就是要检查的区域。

* * *

## 回答 #5

> 赞同：-1
> 
> 时间：2013-04-09T07:19:57.133

C# 可以初始化变量。但是 C++ 没有，所以当使用没有初始化的指针时，它总是抛出异常。你应该养成在类构造函数中初始化所有变量的好习惯。

# python - 更改 lxml 中子元素的默认命名空间

> ID：15894591
> 
> 赞同：3
> 
> 时间：2013-04-09T06:16:22.620
> 
> 标签：python, lxml, xml-namespaces

我想生成这个xml `lxml`：

```
<aroot xmlns="http://a/">
  <broot xmlns="http://b/" xmlns:a="http://a/">
    <child1/>
    <child2/>
    <a:smalltag1/>
    <a:smalltag2/>
  </broot>
</aroot> 
```

但是下面的代码（对于这个输出来说似乎是正确的），不会生成上面的 xml。

```
from lxml import etree
from lxml.builder import ElementMaker

NS_A = 'http://a/'
NS_B = 'http://b/'

A = ElementMaker(namespace=NS_A, nsmap={None: NS_A, 'b': NS_B})
B = ElementMaker(namespace=NS_B, nsmap={None: NS_B, 'a': NS_A})

elem = A.aroot(
    B.broot(
        B.child1,
        B.child2,
        A.smalltag1,
        A.smalltag2,
    ),
)

print(etree.tostring(elem, pretty_print=True).decode('ascii')) 
```

这会产生：

```
<aroot xmlns:b="http://b/" xmlns="http://a/">
  <b:broot>
    <b:child1/>
    <b:child2/>
    <smalltag1/>
    <smalltag1/>
  </b:broot>
</aroot> 
```

这是一个有效的 xml，但我无法更改 subelemnt 上的默认命名空间`broot`。

如果我更改`A` `ElementMaker`如下：

```
A = ElementMaker(namespace=NS_A, nsmap={None: NS_A}) 
```

输出变为：

```
<aroot xmlns="http://a/">
  <broot xmlns="http://b/">
    <child1/>
    <child2/>
    <smalltag1/>
    <smalltag2/>
  </broot>
</aroot> 
```

这是一个无效的 xml（`smalltag1`现在的命名空间是 b）

如果我同时更改`A`，`B`如下所示：

```
A = ElementMaker(namespace=NS_A, nsmap={None: NS_A})
B = ElementMaker(namespace=NS_B, nsmap={None: NS_B}) 
```

输出是：

```
<aroot xmlns="http://a/">
  <broot xmlns="http://b/">
    <child1/>
    <child2/>
    <smalltag1 xmlns="http://a/"/>
    <smalltag2 xmlns="http://a/"/>
  </broot>
</aroot> 
```

这是有效的，但不是所需的输出。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-12-04T16:15:01.940

使用 etree：

```
from lxml import etree

NS_A = 'http://a/'
NS_B = 'http://b/'

aroot = Element('{%s}aroot' % (NS_A), nsmap={None: NS_A})
broot = etree.SubElement(aroot, '{%s}broot' % (NS_B), nsmap={None: NS_B, 'a': NS_A})
etree.SubElement(broot, '{%s}child1' % (NS_B))
etree.SubElement(broot, '{%s}child2' % (NS_B))
etree.SubElement(broot, '{%s}smalltag1' % (NS_A))
etree.SubElement(broot, '{%s}smalltag2' % (NS_A))

print etree.tostring(aroot, pretty_print=True) 
```

你得到：

```
<aroot xmlns="http://a/">
  <broot xmlns:a="http://a/" xmlns="http://b/">
    <child1/>
    <child2/>
    <a:smalltag1/>
    <a:smalltag2/>
  </broot>
</aroot> 
```

# ruby-on-rails-3 - 使用 with_options 和数组在 ActiveRecord 中进行上下文验证

> ID：15894600
> 
> 赞同：0
> 
> 时间：2013-04-09T06:17:10.280
> 
> 标签：ruby-on-rails-3, activerecord

最近从 Datamapper 迁移到 ActiveRecord，我们正在使用的一个很酷的功能是上下文验证和使用 with_options 可以传递一个数组，如下所示：

```
with_options when: [:started, :completed] do |v|
  v.validates_with_method :has_data, method: :check_data_started?
end 
```

`.valid?(:started)`如果或被`.valid?(:completed)`调用，它将触发块内的所有验证。

有没有办法用 Active Record 做到这一点，我试过：

```
with_options on: [:started, :completed] do |v|
  v.validate :check_data_started?
end 
```

看起来会因错误而爆炸的是说我无法在 with_options 调用中传递数组，因为它只需要一个上下文：

`/home/vagrant/.rbenv/versions/1.9.3-p327/lib/ruby/gems/1.9.1/gems/activesupport-3.2.12/lib/active_support/callbacks.rb:414: syntax error, unexpected '[', expecting tSTRING_CONTENT or tSTRING_DBEG or tSTRING_DVAR or tSTRING_END ...ue && (validation_context == :[:started, :complet...`

有没有人这样做过？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-10T07:42:08.437

弄清楚了。如果其他人遇到此问题，请参阅以下解决方案：

```
with_options if: -> {[:started, :completed].include?(validation_context)} do |v|
  v.validates_with_method :has_data, method: :check_data_started?
end 
```

# mobile - DLNA 与 APIPA

> ID：15894602
> 
> 赞同：0
> 
> 时间：2013-04-09T06:17:13.240
> 
> 标签：mobile, ip, wifi, android-wifi, dhcp

我最近注意到，在我的手机 wifi 设置中，有一个`DLNA auto-ip`选项已经被选中。如其描述：“**在没有 DHCP 服务器可用时检查以使用 DLNA** ”，

我发现这*与*APIPA 机制相同：“**使用 APIPA（自动专用 IP 地址），DHCP 客户端可以在 DHCP 服务器不可用时自动自行配置 IP 地址和子网掩码。** ”

DLNA 在这里是什么意思，DLNA 和 APIPA 有什么区别？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-05-07T11:48:56.103

由于 DLNA 规范，我们必须在没有 DHCP 服务器时支持自动 IP。“dhcpcd”由android使用，它支持自动IP，但框架内部有2种设计使自动IP不可用。1.无线管理器超时与默认DHCP发现超时相同。（30s） 2.dhcpcd在获取自动IP时将设置失败属性

我们尝试了以下方法来修改 dhcpcd。1.使用属性系统 当 DLNA 开启时，设置属性以记录其状态。湾。dhcpcd 读取状态属性。当状态为 on 时，将默认 DHCP 发现超时设置为 10 秒。C。脚本读取状态属性。当状态打开时，对于 IPv4LL 情况，将结果属性设置为“ok”。属性系统不适用于一般应用。因此我们无法完成步骤a。

2-1。写入状态文件 a. 当 DLNA 开启时，在应用程序文件夹中写入状态文件。湾。dhcpcd 读取状态文件。当状态为 on 时，将默认 DHCP 发现超时设置为 10 秒。C。脚本读取状态文件。当状态打开时，对于 IPv4LL 情况，将结果属性设置为“ok”。步骤 c 是一个脚本，如果条件和文件访问总是导致错误。所以我们再次做出改变。

2-2。写入状态文件并为 dhcpcd 创建一个新的原因 a。当 DLNA 开启时，在应用程序文件夹中写入状态文件。湾。dhcpcd 读取状态文件。当状态为 on 时，将默认 DHCP 发现超时设置为 10 秒。C。dhcpcd 读取状态文件。当状态打开时，将原因设置为新创建的。脚本中的情况总是将结果属性设置为“ok”。

# iphone - 以编程方式将图像 600x600 调整为 100x100

> ID：15894610
> 
> 赞同：1
> 
> 时间：2013-04-09T06:17:55.157
> 
> 标签：iphone, objective-c

我的图像高度为 600，宽度也是 600 现在我想在 UIImageView 中以 100x100 的方式以编程方式显示该图像。我尝试但图像不像原始图像我添加图像的屏幕截图第一个是 100x100，第二个是 200x200。第二个很好。但是第一个不像原始图像。知道我做什么请![在此处输入图像描述](https://i.stack.imgur.com/vl7ek.png)

**在.h**

```
@interface ViewController : UIViewController
{
    IBOutlet UIImageView *imageView1;
    IBOutlet UIImageView *imageView2;
}
@end 
```

**英寸**

```
- (void)viewDidLoad
{
    [super viewDidLoad];
    imageView1.frame=CGRectMake(100, 50, 100, 100);
    imageView2.frame=CGRectMake(50, 200, 200, 200);
    imageView1.image = [UIImage imageNamed:@"Untitled-7.png"];
    imageView2.image = [UIImage imageNamed:@"Untitled-7.png"];
} 
```

![原始图像是 600x600](https://i.stack.imgur.com/IoMEX.png)

* * *

## 回答 #1

> 赞同：18
> 
> 时间：2013-05-08T08:55:13.687

**请试试这个**

```
UIImage *originalImage = [UIImage imageNamed:@"5.png"];
        CGSize destinationSize = CGSizeMake(100, 100);
        UIGraphicsBeginImageContext(destinationSize);
        [originalImage drawInRect:CGRectMake(0,0,destinationSize.width,destinationSize.height)];
        UIImage *newImage = UIGraphicsGetImageFromCurrentImageContext();
        UIGraphicsEndImageContext();
        UIImageView *newImageView = [[UIImageView alloc] initWithFrame:CGRectMake(20, 20, 100, 100)];
        newImageView.image = newImage;
        [self.view addSubview:newImageView]; 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2013-04-09T06:26:20.890

尝试`imageView1.contentMode = UIViewContentModeScaleAspectFit;`

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2013-04-09T06:32:47.637

**使用此方法：**

```
- (UIImage*)imageWithImage:(UIImage*)image
              scaledToSize:(CGSize)newSize;
{
    UIGraphicsBeginImageContext( newSize );
    [image drawInRect:CGRectMake(0,0,newSize.width,newSize.height)];
    UIImage* newImage = UIGraphicsGetImageFromCurrentImageContext();
    UIGraphicsEndImageContext();
    return newImage;
} 
```

**调用方法：**

```
CGSize newSize = CGSizeMake(100.0,100.0);
[self imageWithImage:image scaledToSize:newSize]; 
```

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2013-04-09T06:28:54.413

设置内容模式

```
imageView2.contentMode = UIViewContentModeScaleAspectFit; 
```

* * *

## 回答 #5

> 赞同：3
> 
> 时间：2017-01-25T16:34:48.730

在迅速 3

```
func createImage(withImage image: UIImage, forSize size: CGSize) -> UIImage? {
    UIGraphicsBeginImageContext(size)
    image.draw(in: CGRect(x: 0, y: 0, width: size.width, height: size.height))
    if let newImage: UIImage = UIGraphicsGetImageFromCurrentImageContext() {
        UIGraphicsEndImageContext()
        return newImage;
    }
    return nil
} 
```

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2013-05-01T13:30:36.017

请参阅此链接以编程方式调整图像大小

[http://developer.appcelerator.com/question/121517/how-to-scale-image-proportionally](http://developer.appcelerator.com/question/121517/how-to-scale-image-proportionally) [http://iphonedevsdk.com/forum/iphone-sdk-development/95666-resize-uiimageview-proportionally.html](http://iphonedevsdk.com/forum/iphone-sdk-development/95666-resize-uiimageview-proportionally.html)

* * *

## 回答 #7

> 赞同：1
> 
> 时间：2018-12-10T09:07:12.680

从 Swift 4.2 开始，

使用它，您将获得正确纵横比的非模糊调整大小的图像 -

```
class func resizeImage(image: UIImage, targetSize: CGSize) -> UIImage {
    let size = image.size

    let widthRatio  = targetSize.width  / size.width
    let heightRatio = targetSize.height / size.height

    // Figure out what our orientation is, and use that to form the rectangle
    var newSize: CGSize
    if(widthRatio > heightRatio) {
        newSize = CGSize(width: size.width * heightRatio, height: size.height * heightRatio)
    } else {
        newSize = CGSize(width: size.width * widthRatio,  height: size.height * widthRatio)
    }

    // This is the rect that we've calculated out and this is what is actually used below
    let rect = CGRect(x: 0, y: 0, width: newSize.width, height: newSize.height)

    //resizing the rect using the ImageContext
    UIGraphicsBeginImageContextWithOptions(newSize, false, 0)
    image.draw(in: rect)
    let newImage = UIGraphicsGetImageFromCurrentImageContext()
    UIGraphicsEndImageContext()

    return newImage!
} 
```

根据开发人员文档，以下方法使用指定的选项创建基于位图的图形上下文 -

func UIGraphicsBeginImageContextWithOptions(_ size: CGSize, _ opaque: Bool, _ scale: CGFloat)

参数-

size：新位图上下文的大小（以磅为单位）。这表示 UIGraphicsGetImageFromCurrentImageContext() 函数返回的图像大小。

opaque：一个布尔标志，指示位图是否不透明。

scale：应用于位图的比例因子。如果您指定值 0.0，则比例因子设置为设备主屏幕的比例因子。

参考[- https://developer.apple.com/documentation/uikit/1623912-uigraphicsbeginimagecontextwitho](https://developer.apple.com/documentation/uikit/1623912-uigraphicsbeginimagecontextwitho)

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2013-04-09T06:25:08.473

用图像初始化你的 imageView，然后调整它的大小

```
imageView1 = [[UIImageView alloc] initWithImage:[UIImage imageNamed:@"Untitled-7.png"]];
imageView2 = [[UIImageView alloc] initWithImage:[UIImage imageNamed:@"Untitled-7.png"]];
[imageView1 setFrame:CGRectMake(100, 50, 100, 100)];
[imageView2 setFrame:CGRectMake(50, 200, 200, 200)]; 
```

试试看，让我知道它是否有效！

* * *

## 回答 #9

> 赞同：0
> 
> 时间：2013-04-09T06:34:45.913

试试这个： -

```
- (void)viewDidLoad
{
    [super viewDidLoad];
    imageView1.frame=CGRectMake(100, 50, 100, 100);
    imageView2.frame=CGRectMake(50, 200, 200, 200);
    imageView1.contentMode = UIViewContentModeScaleAspectFit;
    imageView2.contentMode = UIViewContentModeScaleAspectFit;
    imageView1.image = [UIImage imageNamed:@"Untitled-7.png"];
    imageView2.image = [UIImage imageNamed:@"Untitled-7.png"];
} 
```

请享用。

* * *

## 回答 #10

> 赞同：0
> 
> 时间：2013-04-09T07:41:01.097

尝试改变这个：

```
imageView1.image = [UIImage imageNamed:@"Untitled-7.png"]; 
```

对此：

```
imageView1.image = [[UIImage imageNamed:@"Untitled-7.png"] resizableImageWithCapInsets:UIEdgeInsetsZero
                                                                          resizingMode:UIImageResizingModeStretch]; 
```

* * *

## 回答 #11

> 赞同：0
> 
> 时间：2016-12-20T21:52:33.383

我喜欢在 UIImage 上使用一个类别，方法如下：

```
// Returns a rescaled copy of the image, taking into account its orientation
// The image will be scaled disproportionately if necessary to fit the bounds specified by the parameter
- (UIImage *)resizedImage:(CGSize)newSize interpolationQuality:(CGInterpolationQuality)quality {
    CGRect newRect = CGRectIntegral(CGRectMake(0, 0, newSize.width * self.scale, newSize.height * self.scale));

    UIImage *newImage;
    UIGraphicsBeginImageContextWithOptions(newRect.size, NO, 0.0);
    newImage = [UIImage imageWithCGImage:[self CGImage] scale:0.0 orientation:self.imageOrientation];
    [newImage drawInRect:newRect];
    newImage = UIGraphicsGetImageFromCurrentImageContext();
    UIGraphicsEndImageContext();

    return newImage;
} 
```

请参阅此[更新的存储库](https://github.com/mbcharbonneau/UIImage-Categories)和此[博客文章](http://vocaro.com/trevor/blog/2009/10/12/resize-a-uiimage-the-right-way/)。

这适用于调整 PDF 图像的大小，尤其是当您需要在 UIBarButtonItem 中粘贴一个时。

* * *

## 回答 #12

> 赞同：0
> 
> 时间：2017-10-04T10:43:46.513

嘿，如果您已经在使用 Alamofire 图像库，那么您可以使用以下代码：

```
UIImage(named:"image").af_imageScaled(to: CGSize(width: 100, height: 100)) 
```

# java - 从 ArrayList 中删除特定条目

> ID：15894616
> 
> 赞同：1
> 
> 时间：2013-04-09T06:18:16.613
> 
> 标签：java, arraylist

我有一个包含以下示例条目（名称和疾病）的数组列表：

```
1\.  Name: Aimee Cholmondeley. Disease: German measles
2\.  Name: Colin Anissina.     Disease: Diphtheria
3\.  Name: Colin Anissina.     Disease: Malaria
4\.  Name: Aimee Cholmondeley. Disease: Typhoid fever
5\.  Name: Isaias Cheung.      Disease: Haemophilus Influenza
6\.  Name: Isaias Cheung.      Disease: Scarlet fever
7\.  Name: Sebastian Cutting.  Disease: Gingivitis
8\.  Name: Juan Weiss.         Disease: Acquired Immunodeficiency Sydrome (AIDS)
9\.  Name: Kaelyn Nauman.      Disease: Amebiasis
10\. Name: Kaelyn Nauman.      Disease: Human Pulmonary Syndrome (HPS)
11\. Name: Lyndsey Stapleton.  Disease: Chlamydia
12\. Name: Lyndsey Stapleton.  Disease: Chlamydia 
```

*   **相同的名称，不同的疾病-> 删除两者！**
*   **一个实例 -> 保留**
*   **相同的名字，相同的疾病 -> 保留，但只有一份！**

现在，由于某种原因， .equals 不起作用。所以我不能简单地做`if (arrayList.get(i).equals(arrayList.get(j)) then remove`。所以我单独比较名称和疾病，`compareTo`用于比较疾病（这是有效的）。

这是我尝试过的：

> ```
>  for (int i = 0; i < IDArray.size(); i++){ //IDArray contains all the elements
>         int countFound = 0;
>         IdenPerson curr1 = IDArray.get(i);
>         for (int j = i + 1; j < IDArray.size(); j++) {
>                IdenPerson curr2 = IDArray.get(j);
>                if (curr1.name.toString().equals(curr2.name.toString())) { //If Name is same
>                    if  ((curr1.dis.toString().compareTo(curr2.dis.toString())) == 0) { // And Disease is same
>                        System.out.println(curr1.name.toString()); // Print that Name
>                        break;
>                    }
>                }
>                else {
>                    // If name is not same, and only repeated once ... how to do this?
>                }
>         }
>     } 
> ```

```
public static class IdenPerson {
    String name;
    String dis;
} 
```

使用上面的方法，我可以找到双副本元素，但我无法分离单个实例元素。请帮忙！我不能使用 Java 外部的库。

以下是上面的 ArrayList 工作时的样子：

```
1\. Name: Sebastian Cutting.  Disease: Gingivitis
2\. Name: Juan Weiss.         Disease: Acquired Immunodeficiency Sydrome (AIDS)
3\. Name: Lyndsey Stapleton.  Disease: Chlamydia 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-09T06:48:32.627

这可以使用`Map<String, Set<String>>`. 请看一下这种方法。

基本上，我保持着`Set<String>`控制疾病。如果一个名字有相同的疾病，那么`Set`应该有一个**值**，如果一个名字有多个，那么`Set`应该有**多个条目**。

我正在**消除**Set 具有**多个条目的值**

```
public class ArrayListDisease {

    public static List<String> process(List<String> input) {

        Map<String, Set<String>> map = new HashMap<String, Set<String>>();

        for(String s : input) {
            String [] nameAndDisease = s.split("\\.");
            if(map.containsKey(nameAndDisease[0])) {
                Set<String> diseases = map.get(nameAndDisease[0]);
                diseases.add(nameAndDisease[1]);
            }
            else {
                Set<String> set = new HashSet<String>();
                set.add(nameAndDisease[1]);
                map.put(nameAndDisease[0], set);
            }
        }

        List<String> res = new ArrayList<String>();
        for(Entry<String, Set<String>> e : map.entrySet()) {
            String key = e.getKey();
            Set<String> values = e.getValue();
            if(values.size() == 1) {
                res.add(key+"."+values.iterator().next());
            }
        }
        return res;
    }

    public static void main(String [] args) {
        List<String> input = new ArrayList<String>();
        input.add("Name: Aimee Cholmondeley. Disease: German measles");
        input.add("Name: Colin Anissina.     Disease: Diphtheria");
        input.add("Name: Colin Anissina.     Disease: Malaria");
        input.add("Name: Aimee Cholmondeley. Disease: Typhoid fever");
        input.add("Name: Isaias Cheung.      Disease: Haemophilus Influenza");
        input.add("Name: Isaias Cheung.      Disease: Scarlet fever");
        input.add("Name: Sebastian Cutting.  Disease: Gingivitis");
        input.add("Name: Juan Weiss.         Disease: Acquired Immunodeficiency Sydrome (AIDS)");
        input.add("Name: Kaelyn Nauman.      Disease: Amebiasis");
        input.add("Name: Kaelyn Nauman.      Disease: Human Pulmonary Syndrome (HPS)");
        input.add("Name: Lyndsey Stapleton.  Disease: Chlamydia");
        input.add("Name: Lyndsey Stapleton.  Disease: Chlamydia");

        System.out.println(process(input));
    }

} 
```

这是输出

```
[Name: Lyndsey Stapleton.  Disease: Chlamydia, Name: Juan Weiss.         Disease: Acquired Immunodeficiency Sydrome (AIDS), Name: Sebastian Cutting.  Disease: Gingivitis] 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-09T06:36:01.320

我假设您可以使用其他库，此解决方案基于此。拉入[Guava](https://code.google.com/p/guava-libraries/)并使用[`MultiMap`](http://guava-libraries.googlecode.com/svn/tags/release03/javadoc/com/google/common/collect/Multimap.html)：

```
LinkedListMultimap<String, String> mappedPersons = LinkedListMultimap.create();

for (int i = 0; i < IDArray.size(); i++) {
    IdenPerson person = IDArray.get(i);
    mappedPersons.put(person.name, person.dis);
}

List<IdenPerson> uniques = new ArrayList<IdenPerson>(mappedPersons.size());
for(int i = 0 ; i < IDArray.size(); i++) {
    if(mappedPersons.get(IDArray.get(i).name).size() == 1) {
        uniques.add(IDArray.get(i));
    }
} 
```

代码需要清理，并且可以优化，但你明白了要点。

附带说明一下，您绝对应该遵循更好的命名标准，并为您的 Java 对象使用适当的访问器/修改器。

*新的旁注：下一次，请说明问题是否与作业或家庭作业有关。从长远来看，在这种情况下提供近乎完整的解决方案对您没有帮助*

* * *

如果由于任何原因无法引入其他库，则可以通过将多图替换为地图/列表组合以相同的方式完成任务：

```
Map<String, Set<String>> mappedPersons =
    new HashMap<String, Set<String>>(IDArray.size());

for (int i = 0; i < IDArray.size(); i++) {
    IdenPerson person = IDArray.get(i);
    List<String> diseases = mappedPersons.get(person.name);
    if(diseases == null) {
        diseases = new HashSet<String>(4);
        mappedPersons.put(person.name, diseases);
    }

    diseases.add(person.dis);
}

List<IdenPerson> uniques = new ArrayList<IdenPerson>(mappedPersons.size());
for(int i = 0 ; i < IDArray.size(); i++) {
    if(mappedPersons.get(IDArray.get(i).name).size() == 1) {
        uniques.add(IDArray.get(i));
    }
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-09T06:39:13.367

您可以使用`Map<String,IdenPerson>`. 当名称和疾病相同时，覆盖 IdenPerson 的 equals() 和 hashCode() 以返回 true。在插入带有 的条目之前`put('name',person)`，请检查带有 的条目`get('name')`。根据比赛，执行以下操作。

> 相同的名称，不同的疾病-> 删除两者！

如果它与条目匹配，请检查疾病并在必要时删除条目。`equals()`如果姓名和疾病相同，则人员匹配将返回 true。

> 一个实例 -> 保持同名

那也应该很简单。如果该名称存在一个实例，则 get() 将永远找不到密钥。

> 相同的名字，相同的疾病 -> 保留，但只有一份！

get 将匹配现有条目，但疾病将相同并且`equals()`将返回 true，因此无需执行任何操作。保留现有条目并继续前进。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-04-09T06:38:27.893

伪代码：

添加`found`布尔值。将其初始化为`false`，如果发现重复，请将其设置为`true`. 然后 - 在循环结束时检查发现是否为假。如果是这样 - 将其添加为唯一名称。

# c# - NFC 软件开发套件 NFC 包装器示例

> ID：15894619
> 
> 赞同：0
> 
> 时间：2013-04-09T06:18:21.027
> 
> 标签：c#

当我在我的 32 位操作系统桌面上打开 NFC 包装器示例代码时，程序通过说明“SCM_NFC.DLL 已成功加载”来工作。但是当我在笔记本电脑上尝试使用 64 位操作系统时，它会显示“未找到 NFC Wrapper 确保文件 SCM_NFC.dll 存在于搜索路径中。

谁能告诉我怎么了？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-05-08T11:15:59.980

在 Visual Studio 的配置管理器中，确保选择 x86 作为目标平台。程序本身需要作为 32 位应用程序运行才能正确解析路径。

# javascript - 在 phonegap 应用程序中保存数据库的位置

> ID：15894620
> 
> 赞同：1
> 
> 时间：2013-04-09T06:18:30.740
> 
> 标签：javascript, jquery, database, image, cordova

我是Phone gap domain的新手。我在android中做了一个小应用程序。我只是想在Phone Gap中实现它，看看它是如何工作的？

我在我的 android 项目中使用了一个静态数据库。我想对 Phone Gap 项目使用相同的数据库吗？

我最大的疑问是我们将把这个数据库保存在哪里，我们将如何访问它们？

例如..在android中我们创建了一个Db方法...并将我们想要的存储在一个数组列表中？然后在我们想要的时候访问它们？例如

```
instance name = db.arraylistname(id);
column name =  instance name.get(0).get("column name"); 
```

另一个疑问是关于图像。我们应该在 www/img/ 文件夹中使用什么分辨率的图像（hdpi/mdpi/ldpi/xhdpi）？

在 Phone Gap Jquery 或 java 脚本中使用哪种语言更好？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-09T06:28:24.087

我使用过 jQuery + jQuery mobile，它们的工作非常出色。jQuery mobile 甚至有一些关于使用 phonegap 的文档，可以在[http://view.jquerymobile.com/1.3.0/docs/faq/how-configure-phonegap-cordova.php](http://view.jquerymobile.com/1.3.0/docs/faq/how-configure-phonegap-cordova.php)找到。我只使用 ajax 来访问外部数据库，所以我不能亲自提供有关本地存储的任何建议，但是关于 SO 的这个问题有一个明显的答案，所以看起来它对他们有用：[PhoneGap 应用程序的最佳数据库选项？](https://stackoverflow.com/questions/11030076/best-database-option-for-phonegap-applications)

如果您有任何问题或希望我澄清有关 jQuery Mobile 的任何内容，请告诉我。

# gitlab - gitlab team 和 gitlab group 有什么区别？

> ID：15894624
> 
> 赞同：25
> 
> 时间：2013-04-09T06:18:39.177
> 
> 标签：gitlab

我正在使用 Gitlab 5.0 来管理我的 git 存储库，在 Gitlab 之前我从未使用过 github。

当我创建一个组时，我会在 /home/git/repositories 中看到一个具有该组名的新目录。但是对于团队，没有这样的事情。此外，通过组，我可以为组创建一个项目，并且分配（对于该组的用户）是自动完成的。

我看不出**小组**和**团队**之间有任何其他差异，我想理解这一点。

提前谢谢你，抱歉英语不好（我是法国人），

* * *

## 回答 #1

> 赞同：35
> 
> 时间：2013-04-09T06:29:42.327

GitLab 6.0（2013 年 8 月，22d）

请参阅[提交 3bc4845](https://github.com/gitlabhq/gitlabhq/commit/3bc4845874112242d6e885731c033ffe85ee98dd)：

### 功能：将团队替换为组成员

> 我们在 6.0 中引入了**组成员身份**来替代团队。
> 组和团队的旧组合让很多人感到困惑。
> 当团队成员发生变化时，这不会反映在项目权限中。
> 
> **在 GitLab 6.0 中，您将能够将成员添加到具有每个成员权限级别的组中**。
> 这些组成员将有权访问该组中的项目。
> 对组成员的任何更改都将立即反映在项目权限中。
> 您甚至可以为一个组拥有多个所有者，从而大大简化管理。

* * *

> 为什么 GitLab 7 中仍然存在对 Teams 的引用？例如“按团队过滤”

*   “**团队**”现在似乎（GitLab 6.x->7.x 2015）似乎仅限于一个**项目**（例如参见[`features/project/team_management.feature`](https://github.com/gitlabhq/gitlabhq/blob/master/features/project/team_management.feature)和[`app/models/project_team.rb`](https://github.com/gitlabhq/gitlabhq/blob/master/app/models/project_team.rb)或[`spec/models/project_team_spec.rb`](https://github.com/gitlabhq/gitlabhq/blob/master/spec/models/project_team_spec.rb)）。
    [一个项目可以是一个组的一部分](https://github.com/gitlabhq/gitlabhq/blob/bd72b5bd32c64606a498066cadf9f765be059b9d/app/models/project_team.rb#L166-L168)：参见“ [Gitlab API for all projects under group](https://stackoverflow.com/a/31742822/6309) ”。

*   “**组**”引用用户，并且可以对多个项目进行分组，（参见[`features/groups.feature`](https://github.com/gitlabhq/gitlabhq/blob/master/features/groups.feature), [`app/models/group.rb`](https://github.com/gitlabhq/gitlabhq/blob/master/app/models/group.rb), [`app/models/members/group_member.rb`](https://github.com/gitlabhq/gitlabhq/blob/master/app/models/members/group_member.rb)）

作为用户，您首先是组的成员，并且具有与项目相关联的**角色**（“报告者”、“开发者”……）（这使您成为该项目的成员，“团队”的一部分）对于那个项目）。
无角色，意味着“不是项目团队的成员”。
见[`db/migrate/20140914145549_migrate_to_new_members_model.rb`](https://github.com/gitlabhq/gitlabhq/blob/master/db/migrate/20140914145549_migrate_to_new_members_model.rb)。

* * *

GitLab 5.x 的答案（2013 年 8 月 22 日之前）

*   **Group**用于对项目进行分组，类似于文件夹（git repositories）
*   **团队**用于对资源（人）进行分组

这些概念在[GitLab 4.2](http://blog.gitlab.org/gitlab-v4-dot-2-has-been-released/)中得到了改进。

这允许您以更方便的方式管理授权，在一次操作中授予一组项目的权限，和/或授予他们团队引用的一组人的权限。

GitLab 5.x 不再使用 Gitolite，但在 5.0 之前，团队和小组都来自[**Gitolite**](http://gitolite.com/gitolite/master-toc.html)及其[`gitolite.conf`配置文件](http://gitolite.com/gitolite/git-config.html)。
这是为了授予权限访问而声明和关联[团队和组的地方。](http://gitolite.com/gitolite/groups.html)
即使没有 gitolite，这个想法仍然存在：通过团队（人员）和组（项目）之间的关联来管理授权。

# jquery-animate - 动画中的完整功能

> ID：15894625
> 
> 赞同：0
> 
> 时间：2013-04-09T06:18:39.490
> 
> 标签：jquery-animate

据我所知，完成功能正在使用下一种方式（有一个例子）：

```
$('#element_id').animate({
    cssProperty1: 'value1',
    cssProperty2: 'value2', 
}, duration, function complete1() {
        $('#element_id').animate({
            cssProperty1: 'value1',
            cssProperty3: 'value3', 
        }, duration, function complete2() {
            $('#element_id').animate({
                cssProperty1: 'value1',
                cssProperty4: 'value4', 
            }, duration)
        })
}) 
```

如果我需要为新的 CSS 属性设置动画，在上一个结束后，多次？这将是代码的很大一部分。是否存在更简单的方法来介绍此代码？更优化？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-09T06:50:28.787

我使用了五种风格，它称之为特定的间隔

```
<script>
$(document).ready(function(){
var s1=0;
var s2=3000;
var s3=6000;
var s4=9000;
var s5=12000;
function function1(){
s1=s1+12000;
$('#element_id').animate({
cssProperty1: 'value1',
cssProperty2: 'value2', 
 },3000);
function function2(){
s2=s2+12000;
$('#element_id').animate({
cssProperty1: 'value1',
cssProperty2: 'value2', 
 },3000);
function function3(){
s3=s3+12000;
$('#element_id').animate({
cssProperty1: 'value1',
cssProperty2: 'value2', 
 },3000);
function function4(){
s4=s4+12000;
$('#element_id').animate({
cssProperty1: 'value1',
cssProperty2: 'value2', 
 },3000);
function function5(){
s5=s5+12000;
$('#element_id').animate({
cssProperty1: 'value1',
cssProperty2: 'value2', 
 },3000);
setTimeout(function1,s1);
setTimeout(function2,s2);
setTimeout(function3,s3);
setTimeout(function4,s4);
setTimeout(function5,s5);
    });
</script> 
```

# process - Microchip PIC32 以太网入门工具包上的多个进程

> ID：15894626
> 
> 赞同：0
> 
> 时间：2013-04-09T06:18:42.527
> 
> 标签：process, embedded, pic

我刚刚收到了 Microchip PIC32 以太网入门套件。

我以前对 PIC 设备的经验为零，想知道 PIC32 设备是否可以同时运行多个进程？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-09T16:57:50.013

是的。一种方法：您可以编写调度程序。一种相对简单的方法是设置一个计时器，当计时器计时，您运行一个中断服务例程，该例程每次运行您的一个任务。这被称为协作多任务，好像任何一个任务超过了计时器滴答，其他任务必须等待它完成。如果一个任务崩溃，整个系统就会崩溃。

或者您可以获得某种操作系统，例如[FreeRTOS](http://www.freertos.org/port_PIC32_MIPS_MK4.html)有一个 PIC32 端口。这将为您准备好调度（和进程间通信原语，以及许多其他 O/S 服务）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-09T08:36:33.157

取决于“同时运行多个进程”的含义。

Microchip PIC32 只有一个内核，所以不，如果您将“运行”解释为“执行代码指令”，则无法运行同时运行多个进程所需的多个执行线程。

这并不意味着您不能运行支持多个线程/进程并让它们都以有用和和谐的方式运行的操作系统。硬件和软件中断可以有效地改变正在运行的线程集，操作系统将在一个内核上运行其中一个，直到下一个中​​断，这与在任何其他具有单核架构的 uC 上相同。

# list - ocaml 冒泡排序

> ID：15894627
> 
> 赞同：0
> 
> 时间：2013-04-09T06:18:49.383
> 
> 标签：list, functional-programming, ocaml

我的基本想法是实现一种冒泡类型`('a list -> 'a list)`。`sorted`我使用的是和的变量`result`。如果我更改列表中的某些元素，则`sorted`变为 1。否则，`sorted`仍为 0。`Result`是比较的一个周期。

我认为我的`sorted`变量有问题。谁能弄清楚问题是什么？

```
let rec sort (l: int list) : int list =
    let sorted=0 in
    let result = match l with
           | []->[]
           | x::xs-> if xs=[] then x
                     else let y::ys = xs in
                          if x<y then x::sort(xs)
                          else let sorted=1 in
                               y::sort(x::ys)
    in
    if sorted=0 then result
    else sort(result) 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-09T14:01:39.920

在我看来，您正试图将其`sorted`用作可变变量。OCaml 变量是不可变的。一旦将变量绑定到值，就无法更改绑定。您的每个`let sorted =`语句都定义了一个名为 的*新*变量`sorted`。因此，您的最后一个测试将始终显示 sorted 等于 0。它正在测试 sorted 的第一个定义，它永远不会有任何其他值而不是 0。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-10T10:11:51.427

正如 Jeffrey 所说，OCaml 值是不可变的。这就是为什么您的程序无法按预期工作的原因。

但是您的代码还有其他问题：

*   `sorted`应该有类型`bool`，没有`int`。OCaml 的优点之一是它具有强大的类型系统，因此请使用它。
*   要解构列表，您应该只使用模式匹配`if xs=[] then x else let y::ys = xs in`不是这样做的好方法（OCaml 应该警告您您的模式匹配并不详尽）。您应该将其他情况添加到您的模式匹配中。

像这样：

```
| [] -> []
| x::[] -> x
| x::y::ys -> ... 
```

# c# - 使用 oledb 更新 excel 文件的特定单元格

> ID：15894628
> 
> 赞同：0
> 
> 时间：2013-04-09T06:18:54.607
> 
> 标签：c#, excel, oledbcommand

我想使用 oledb 更新 excel 文件的特定单元格。说 I7 单元，由于某种原因，I1 总是在更新。谁能告诉我这段代码有什么问题？

```
OleDbConnection oledbConn = new OleDbConnection(connString);
oledbConn.Open();

// I want to set the value of I7 cell to 22, for some reason value is I1 is getting updated :(
OleDbCommand cmd = new OleDbCommand("UPDATE [" + sheetName + "$I7:I7] SET F1=22", oledbConn);
int result = cmd.ExecuteNonQuery();
Console.WriteLine(result);
oledbConn.Close(); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-09T06:26:45.733

这可能纯粹是您使用的单元地址方案的问题。试试`$I$7:$I$7`intsead。另外，`F1`查询中的那个东西是什么？

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-12T09:54:20.953

我在 excel 2007 上运行了相同的程序，它运行顺利。对于 excel 2013，它不起作用。似乎是 excel 2013 中的错误。

# android - 我们的应用程序是否加载包含的库文件中的所有类？

> ID：15894629
> 
> 赞同：3
> 
> 时间：2013-04-09T06:19:00.920
> 
> 标签：android, apk, facebook-android-sdk, google-play-services

在android应用程序中，我们包含许多库文件，例如`google-play-services-lib`等等`Facebook-SDK`。但我们从未真正使用这些库中的所有功能和类，所以我的问题是，当`.apk`文件被创建时，是否包含所有这些类或我们使用的唯一类包含在我们的应用？如果是，那么我们有办法解决这个问题吗？即我们可以删除或做一些事情来避免包含所有类吗？

谢谢你...

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-09T06:44:34.483

您应该使您的 Android 应用程序尽可能小。因此，您应该只在您真正需要的 jar 中包含类。

[http://www.vogella.com/blog/2010/02/11/java-library-jar-android/](http://www.vogella.com/blog/2010/02/11/java-library-jar-android/)

最好使用 Proguard 混淆您的代码。

ProGuard 是一个 Java 类文件收缩器、优化器、混淆器和预验证器。**收缩步骤检测并删除未使用的类、字段、方法和属性**。优化步骤分析和优化方法的字节码

混淆还可以在一定程度上保护您的代码。

要在您的项目中启用 ProGuard，请编辑 project.properties

```
# Project target.
proguard.config=${sdk.dir}/tools/proguard/proguard-android.txt
target=Google Inc.:Google APIs:16
android.library.reference.1=../actionbarsherlock 
```

[http://developer.android.com/tools/help/proguard.html](http://developer.android.com/tools/help/proguard.html)

[http://proguard.sourceforge.net/index.html#manual/introduction.html](http://proguard.sourceforge.net/index.html#manual/introduction.html)

# sql - 用于启动 xp_cmdshell 作业的 T SQL 多线程

> ID：15894640
> 
> 赞同：1
> 
> 时间：2013-04-09T06:19:51.123
> 
> 标签：sql, multithreading, xp-cmdshell

我有一项工作需要数据库备份文件并使用七个 zips 命令行实用程序将它们压缩为 .7z 文件，目前它需要大约 8 个小时来运行所有 .bak 文件，因为它一次只做一个。这是在大约 16 个内核上运行的，而 7z 进程似乎只使用 1 个内核，所以我希望能够运行 xp_cmdshell 命令的多个实例来一次压缩多个文件。有没有办法在 MSSQL Server 2005 上执行 T SQL 中的命令列表？

我在下面发布了我的脚本。

这是我用来压缩文件的程序的链接。[http://downloads.sourceforge.net/sevenzip/7za920.zip][1]

```
-- YYYYYYYYYYYYYYYYYYYYYYYYYYYYYYYYYYYYYYYYYYYYYYYYYYYYYYYYYYY
-- II       zip all files in a folder                       II
-- VVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVV

-- Zip and then Delete all files from the backup folder
-- List all files in a directory - T-SQL parse string for date and filename 
DECLARE  @PathName       VARCHAR(256) , 
         @CMD            VARCHAR(512) 

CREATE TABLE #CommandShell ( Line VARCHAR(512)) 

    -- To use the xp_cmdshell option it has to be enabled. you can use the script bellow to enable it.
    --
    -- -- run exec sp_configure to see if the option exists in this list and you can check if it is enabled.
    -- EXEC sp_configure
    -- go
    -- -- if you don't see xp_cmdshell in the list then you will have to enable advanced options first 
    -- -- before you can enable the xp_cmdshell option.
    -- EXEC sp_configure 'show advanced options', 1;
    -- go
    -- reconfigure
    -- go
    -- -- if xp_cmdshell is in the list then you should just need to run this script.
    -- exec sp_configure 'xp_cmdshell', 1
    -- go
    -- reconfigure

SET @PathName = 'D:\FILES\Backups\' 

SET @CMD = 'DIR ' + @PathName + ' /TC' 

INSERT INTO #CommandShell 
EXEC MASTER..xp_cmdshell   @CMD 

-- Delete lines not containing filename
DELETE 
FROM   #CommandShell 
WHERE  Line NOT LIKE '[0-9][0-9]/[0-9][0-9]/[0-9][0-9][0-9][0-9] %' 
OR Line LIKE '%<DIR>%'
OR Line is null

-- SQL reverse string function - charindex string function 
SELECT ROW_NUMBER() OVER (ORDER BY REVERSE( LEFT(REVERSE(Line),CHARINDEX(' ',REVERSE(line))-1 ) )) AS ROW_NUM,
  FileName = REVERSE( LEFT(REVERSE(Line),CHARINDEX(' ',REVERSE(line))-1 ) ),
  CreateDate = LEFT(Line,10)
INTO #tempFileList 
FROM #CommandShell
WHERE REVERSE( LEFT(REVERSE(Line),CHARINDEX(' ',REVERSE(line))-1 ) ) LIKE '%.bak'
ORDER BY FileName

DROP TABLE #CommandShell

DECLARE @FileMaxRownum INT
SET @FileMaxRownum = (SELECT MAX(ROW_NUM) FROM #tempFileList)

DECLARE @FileIter INT
SET @FileIter = (SELECT MIN(ROW_NUM) FROM #tempFileList)

WHILE @FileIter <= @FileMaxRownum
BEGIN
    DECLARE @DelFile varchar(200)
    --@@
    DECLARE @cmd2 VARCHAR(1000)
    SET @cmd2 = null
    DECLARE @db_bkp_files_dir varchar(100)
    SET @db_bkp_files_dir = null
    DECLARE @archive_destination_dir varchar(100)
    SET @archive_destination_dir = null
    DECLARE @archive_name varchar(100)
    SET @archive_name = null
    DECLARE @7z_path varchar(100)
    SET @7z_path = null
    set @archive_destination_dir = @PathName --destination dir
    set @7z_path = 'D:\FILES'
    set @db_bkp_files_dir = right(@PathName,1) --db backup files origin 
    SELECT TOP(1) @archive_name = FileName FROM #tempFileList WHERE ROW_NUM = @FileIter
    SET @cmd2 = @7z_path + '\7za a -t7z -mx5 -ms=off ' + @archive_destination_dir + @archive_name + '.7z ' +  @archive_destination_dir + @archive_name
    print @cmd2
    EXEC xp_cmdshell @cmd2
    --@@
    SELECT TOP(1) @DelFile = 'del ' + @PathName + FileName FROM #tempFileList WHERE ROW_NUM = @FileIter
    EXEC xp_cmdshell @DelFile
    SET @FileIter = @FileIter + 1
END
DROP TABLE #tempFileList 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-09T15:59:33.520

我认为问题不在于 SQL Server。如果您想同时运行多个执行线程，您可以使用 SQL Server 代理中的计划作业来执行此操作……但是，这只是您正在使用的 7-Zip 中的压缩算法的一种解决方法。

[默认压缩不会使用两个以上的核心，但另一种压缩算法（例如 b-zip）将更好地利用服务器的可用核心。](http://www.codinghorror.com/blog/2009/02/file-compression-in-the-multi-core-era.html)

不要使用`-t7z`开关，而是尝试使用`-tbzip2`，这是上面博客文章中详细介绍的算法。

```
SET @cmd2 = @7z_path + '\7za a -tbzip2 -mx5 -ms=off ' 
  + @archive_destination_dir 
  + @archive_name + '.7z ' 
  + @archive_destination_dir 
  + @archive_name 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-10T05:24:56.933

这是我最终用来测试加速过程的脚本。它在完成后将作业留在 msdb 数据库中，因此我必须返回并删除所有在它们完成运行后添加的作业，所以它有点混乱，如果我还没有为服务器代理设置权限服务和我正在访问的文件夹我认为它会给我带来错误。我可能会重写它并为每个数据库创建单独的备份和压缩作业，所以我不会一直删除和创建服务器代理作业，但这适用于测试。

```
-- YYYYYYYYYYYYYYYYYYYYYYYYYYYYYYYYYYYYYYYYYYYYYYYYYYYYYYYYYYY
-- II       zip all files in a folder                       II
-- VVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVV

-- Zip and then Delete all files from the backup folder
-- List all files in a directory - T-SQL parse string for date and filename 
DECLARE  @PathName       VARCHAR(256) , 
         @CMD            VARCHAR(512) 

CREATE TABLE #CommandShell ( Line VARCHAR(512)) 

SET @PathName = 'D:\FILES\Backups\' 

SET @CMD = 'DIR ' + @PathName + ' /TC' 

INSERT INTO #CommandShell 
EXEC MASTER..xp_cmdshell   @CMD 

-- Delete lines not containing filename
DELETE 
FROM   #CommandShell 
WHERE  Line NOT LIKE '[0-9][0-9]/[0-9][0-9]/[0-9][0-9][0-9][0-9] %' 
OR Line LIKE '%<DIR>%'
OR Line is null

-- SQL reverse string function - charindex string function 
SELECT ROW_NUMBER() OVER (ORDER BY REVERSE( LEFT(REVERSE(Line),CHARINDEX(' ',REVERSE(line))-1 ) )) AS ROW_NUM,
  FileName = REVERSE( LEFT(REVERSE(Line),CHARINDEX(' ',REVERSE(line))-1 ) ),
  CreateDate = LEFT(Line,10)
INTO #tempFileList 
FROM #CommandShell
WHERE REVERSE( LEFT(REVERSE(Line),CHARINDEX(' ',REVERSE(line))-1 ) ) LIKE '%.bak'
ORDER BY FileName

DROP TABLE #CommandShell

DECLARE @FileMaxRownum INT
SET @FileMaxRownum = (SELECT MAX(ROW_NUM) FROM #tempFileList)

DECLARE @FileIter INT
SET @FileIter = (SELECT MIN(ROW_NUM) FROM #tempFileList)

WHILE @FileIter <= @FileMaxRownum
BEGIN
    DECLARE @DelFile varchar(200)
    --@@
    DECLARE @cmd2 VARCHAR(1000)
    SET @cmd2 = null
    DECLARE @db_bkp_files_dir varchar(100)
    SET @db_bkp_files_dir = null
    DECLARE @archive_destination_dir varchar(100)
    SET @archive_destination_dir = null
    DECLARE @archive_name varchar(100)
    SET @archive_name = null
    DECLARE @7z_path varchar(100)
    SET @7z_path = null
    set @archive_destination_dir = @PathName --destination dir
    set @7z_path = 'D:\FILES'
    set @db_bkp_files_dir = right(@PathName,1) --db backup files origin 
    SELECT TOP(1) @archive_name = FileName FROM #tempFileList WHERE ROW_NUM = @FileIter
    --   7za switches: 
    --   -mx0 (Don't compress)
    --   -mx1 (Low)
    --   -mx3 (Fast)
    --   -mx5 (Normal)
    --   -mx7 (Maximum)
    --   -mx9 (Ultra)
    --
    --   -mmt (enable multithreading)
    --   
    --   -t7z
    --   -tbzip2
    SET @cmd2 = @7z_path + '\7za a -t7z -mx5 -ms=off ' + @archive_destination_dir + @archive_name + '.7z ' +  @archive_destination_dir + @archive_name
    --SET @cmd2 = @7z_path + '\7za a -tbzip2 -mx5 ' + @archive_destination_dir + @archive_name + '.7z ' +  @archive_destination_dir + @archive_name

    DECLARE @cmd3 nvarchar(max)
    SET @cmd3 = 'USE msdb; EXEC sp_add_job @job_name = N''' + @archive_name + ' Zip job' + ''''

    DECLARE @cmd4 nvarchar(max)
    SET @cmd4 = 'USE msdb; EXEC sp_add_jobstep @job_name = N''' + @archive_name + ' Zip job' +''', @step_name = N''' + @archive_name + ' Zip job Step 1'  + ''', ' +
                '@subsystem = N''TSQL'', @command = N''' + 'DECLARE @cmd VARCHAR(1000) SET @cmd = ''''' + @7z_path + '\7za a -t7z -mx5 -ms=off ' + @archive_destination_dir + @archive_name + '.7z ' +  @archive_destination_dir + @archive_name + ''''' EXEC xp_cmdshell @cmd '  + ''', @retry_attempts = 5, @retry_interval = 1'

    DECLARE @cmd5 nvarchar(max)
    SET @cmd5 = 'USE msdb; EXEC dbo.sp_add_jobserver @job_name = N''' + @archive_name + ' Zip job' + ''', @server_name = N''ServerName'';'

    DECLARE @cmd6 nvarchar(max)
    SET @cmd6 = 'USE msdb; EXEC dbo.sp_start_job N''' + @archive_name + ' Zip job' + ''';'

    DECLARE @cmd7 nvarchar(max)
    SET @cmd7 = 'EXEC sp_delete_job @job_name = N''' + @archive_name + ' Zip job' + ''';'

    PRINT @cmd3
    EXEC sp_executesql @statement = @cmd3
    PRINT @cmd4
    EXEC sp_executesql @statement = @cmd4
    PRINT @cmd5
    EXEC sp_executesql @statement = @cmd5
    PRINT @cmd6
    EXEC sp_executesql @statement = @cmd6

    PRINT @cmd7

    --print @cmd2
    --EXEC xp_cmdshell @cmd2
    --@@
    SELECT TOP(1) @DelFile = 'del ' + @PathName + FileName FROM #tempFileList WHERE ROW_NUM = @FileIter
    --EXEC xp_cmdshell @DelFile
    SET @FileIter = @FileIter + 1
END
DROP TABLE #tempFileList 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-06-16T14:32:11.873

sp_add_job 有一个@delete_level 参数，它允许在成功完成后自动删除作业。

[http://technet.microsoft.com/en-us/library/aa259577(v=sql.80).aspx](http://technet.microsoft.com/en-us/library/aa259577%28v=sql.80%29.aspx)

# java - 找不到属性文件 - 如何将其定位为资源？

> ID：15894642
> 
> 赞同：2
> 
> 时间：2013-04-09T06:20:05.997
> 
> 标签：java

我在位置有一个属性文件（来自 netbeans 项目资源管理器）

```
-MyTest
    +Web Pages
    +Source Packages
    -Test Packages
        -<default package>
            +Env.properties     <---- Here it is
        +com.mycomp.gts.test
        +com.mycomp.gts.logintest
        .....
        .... 
```

现在，当我尝试使用代码查找此文件时

```
InputStream propertiesInputStream = getClass().getResourceAsStream("Env.properties");
ENV.load(propertiesInputStream); 
```

它的投掷`java.lang.NullPointerException`

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-04-09T06:22:51.213

您不能将类用作加载资源的引用，因为资源路径与类*无关*。改用类加载器：

```
InputStream propertiesInputStream = getClass().getClassLoader()
        .getResourceAsStream("Env.properties");
ENV.load(propertiesInputStream); 
```

或者，您可以使用当前线程的上下文类加载器：

```
InputStream propertiesInputStream = Thread.currentThread()
    .getContextClassLoader().getResourceAsStream("Env.properties");
ENV.load(propertiesInputStream); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-09T06:24:47.537

```
String basePath = PropertiesUtil.class.getResource("/").getPath();
InputStream in = new FileInputStream(basePath + "Env.properties");
pros.load(in); 
```

祝你好运：）

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-09T06:37:08.387

尝试通过以下方式获取绝对路径：

```
String absolute = getClass().getProtectionDomain().getCodeSource().getLocation().toExternalForm(); 
```

您可以打印出字符串`absolute`并尝试将其子串到您的属性文件的路径中。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2020-11-03T17:32:01.443

下面的代码读取存储在 Maven 项目的资源文件夹中的属性文件。

```
InputStream inputStream = YourClass.class.getResourceAsStream("/filename.properties");
BufferedReader reader = new BufferedReader(new InputStreamReader(inputStream))) {

Properties properties = new Properties();
properties.load(reader);

} catch (IOException ioException) {
    ioException.printStackTrace();
} 
```

# android - 我们如何让 texview 的文本动态对齐

> ID：15894644
> 
> 赞同：-2
> 
> 时间：2013-04-09T06:20:24.457
> 
> 标签：android

在我的应用程序中，我有一个文本视图，在产品旁边有很多行，但我需要具有正确外观的数据。是否可以动态对齐对齐？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-09T06:24:15.800

**Android 不支持完全对齐**

[但请检查此链接](https://stackoverflow.com/a/11922862/1168654)和此[链接](https://stackoverflow.com/a/4291087/1168654)的所有答案。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-09T06:24:43.763

这可能会帮助你

```
 TextView tv = new TextView(context);
    tv.setWidth(45);
    tv.setGravity(Gravity.RIGHT); // attempt at justifying text 
    tv.setMaxLines(1);
    tv.setText("Hellow");

    this.addView(tv); 
```

但可能 Android 不支持完整的理由。

# macos - 允许在 Mac OS X 应用程序中读取文件的权利是什么？（拒绝文件读取数据错误）

> ID：15894645
> 
> 赞同：3
> 
> 时间：2013-04-09T06:20:28.677
> 
> 标签：macos, cocoa, file, sandbox, file-read

我正在制作一个 Mac OS X 应用程序（沙盒），它从 /etc/myfolder 中已安装的配置文件中读取。当我尝试使用 NSFileHandle 读取文件时，我在控制台中收到以下错误：

`sandboxd: ([3251]) MyApp(3251) deny file-read-data /private/etc/myfolder/myconfig.conf`

我在我的权利文件中设置了以下权利，但我仍然被沙盒拒绝。

*   com.apple.security.temporary-exception.files.home-relative-path.read-only
*   com.apple.security.temporary-exception.files.absolute-path.read-only
*   com.apple.security.files.user-selected.read-only

编辑：看来我误用了

`com.apple.security.temporary-exception.files.absolute-path.read-only`.

我将其设置为布尔值。我的印象是，将其设置为 YES 将启用使用绝对路径读取所有文件。上述权利的值必须是允许的绝对路径。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-04-09T08:43:46.280

您需要使用`com.apple.security.temporary-exception.files.absolute-path.read-only`绝对路径`/private/etc/myfolder/myconfig.conf`- (10.8.3) 沙箱似乎不接受`/etc/myfolder/myconfig.conf`包含符号链接的路径。

*注意*：如果您正在为 Mac App Store 进行沙盒处理，您可能会面临一项几乎不可能完成的任务，即让您的应用程序被接受并获得读取 /etc 中文件的临时权限。最好将此文件存储在应用程序的容器中 - 在 MAS 中，每个应用程序都是一个被鲨鱼出没的水域包围的岛屿。

# c# - 获取 RadAutoCompleteBox 的文本

> ID：15894646
> 
> 赞同：3
> 
> 时间：2013-04-09T06:20:33.543
> 
> 标签：c#, wpf, xaml, telerik, rad-controls

如何在 C# 中使用 RadControls Q1 2013 获取 RadAutoCompleteBox 的文本？

`autoCompleteBox.SelectedItem`返回`"ServerCrafterTelerikWPF.Command"`。

**编辑 1：** 这是我的 XAML：

```
<telerik:RadAutoCompleteBox x:Name="txtboxCommand" ItemsSource="{Binding Commands, Source={StaticResource ViewModel}}" 
DisplayMemberPath="ACommand"  AutoCompleteMode="Append" HorizontalAlignment="Left" 
telerik:StyleManager.Theme="Modern" Margin="280,405,0,0" 
VerticalAlignment="Top" Width="330" Height="30" KeyDown="txtboxCommand_KeyDown"/> 
```

而且我没有任何 C# 代码。我只想在按下按钮时获取 RadAutoCompleteBox 中的文本。

**编辑2：** 这是我的`collection`：

```
public class Command
{
    public string ACommand { get; set; }
}

/// <summary>
/// A view model for MainWindow.xaml
/// </summary>
public class ViewModel
{
    public ObservableCollection<Command> Commands { get; set; }

    public ViewModel()
    {
        Commands = new ObservableCollection<Command>()
            {
                new Command() {ACommand = "stop "},
                // Other commands...
                // ...
                // ...
            };
    }
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-09T06:42:06.610

你应该从`SelectedItem`物业拿走它。将其投射到您的班级，然后从`MyClass.ACommand`

我建议在您的 ViewModel 中绑定`SelectedItem`with`Mode=TwoWay`会很有帮助。

只需向 ViewModel 添加一个成员，该成员正在实现命令，例如：

```
private Command _SelectedItem;

public Command SelectedItem 
{ 
   //get set with INotifyPropertyChanged 
} 
```

然后从 xaml：绑定 RadAutoCompleteBox 的 SelectedItem 属性，如：

```
SelectedItem="{Binding SelectedItem, Mode=TwoWay}" 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-09T08:37:41.540

我已经重现了这个问题。

是的。我有`same problem`。我`found`也是问题和答案。

由于在我的视图模型中对所选项目**使用类型字符串**，我遇到了问题。

```
private string selectedCommand;

public string SelectedCommand
{
    get
    {
        return selectedCommand;
    }
    set
    {
        selectedCommand = value;
        NotifyPropertyChanged("SelectedCommand");
    }
} 
```

使用**类型作为命令类**，您的问题将得到解决。

```
private Command selectedCommand;

public Command SelectedCommand
{
    get
    {
        return selectedCommand;
    }
    set
    {
        selectedCommand = value;
        NotifyPropertyChanged("SelectedCommand");
    }
} 
```

`Bind`中的`SelectedItem`财产`RadAutoCompleteBox``XAML`

```
<telerik:RadAutoCompleteBox 
            x:Name="txtboxCommand" 
            ItemsSource="{Binding Commands, Source={StaticResource ViewModel}}" 
            DisplayMemberPath="ACommand"  
            AutoCompleteMode="Append" 
            HorizontalAlignment="Left" 
            telerik:StyleManager.Theme="Modern" 
            Margin="280,405,0,0" 
            VerticalAlignment="Top" 
            Width="330" 
            Height="30" 
            KeyDown="txtboxCommand_KeyDown"
            SelectedItem="{Binding SelectedCommand, Mode=TwoWay}"/> 
```

如果您想通过代码隐藏获取所选项目，请将所选项目转换为 Command 类类型。

```
var selectedItem = autoCompleteBox.SelectedItem as Command; 
```

实际上可以有`multiple selected items`。在这种情况下，您必须定义一个`collection of Command objects`.

```
private ObservableCollection<Command> selectedCommands;

public ObservableCollection<Command> SelectedCommands
{
    get
    {
        return selectedCommands;
    }
    set
    {
        selectedCommands = value;
        NotifyPropertyChanged("SelectedCommands");
    }
} 
```

并将其绑定到`SelectedItems`RadAutoCompleteBox 控件的属性（SelectedItem 的复数）。

```
SelectedItems="{Binding SelectedCommands, Mode=TwoWay}" 
```

并确保您已启动 SelectedItems。

```
this.SelectedCommands = new ObservableCollection<Command>(); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-09T06:36:31.150

的`SearchText`属性`RadAutoCompleteBox`应该为您提供价值。

根据[文档](http://www.telerik.com/help/wpf/p_telerik_windows_controls_radautocompletebox_searchtext.html)，它获取或设置进入 RadAutoCompleteBox 的 TextBox 部分的字符串。SearchText 值用于过滤 RadAutoCompleteBox 的 ItemsSource。

如果要获取 AutocompleteBox 选中项的“文本”，则需要将其强制转换为指定类型。在您的情况下，它是 type `ServerCrafterTelerikWPF.Command`。

```
var selectedItem = autoCompleteBox.SelectedItem;

if (selectedItem is ServerCrafterTelerikWPF.Command) {
  var selectedCommand = selectedItem as ServerCrafterTelerikWPF.Command;

  string textOfAutoCompleteBox = selectedCommand.ACommand;
} 
```

# asp.net - 转换为日期时间

> ID：15894647
> 
> 赞同：0
> 
> 时间：2013-04-09T06:20:38.187
> 
> 标签：asp.net, asp.net-mvc, asp.net-mvc-3

我有以下标签来选择日期，第一个是天，第二个是月，第三个是年

```
<select id="d" class="styledselect-day" tabindex="6">
                    <option value="">dd</option>
                    <option value="1">1</option>
                    <option value="2">2</option>
                    <option value="3">3</option>
                    <option value="4">4</option>
                    <option value="5">5</option>
                    <option value="6">6</option>
                    <option value="7">7</option>
                    <option value="8">8</option>
                    <option value="9">9</option>
                    <option value="10">10</option>
                    <option value="11">11</option>
                    <option value="12">12</option>
                    <option value="13">13</option>
                    <option value="14">14</option>
                    <option value="15">15</option>
                    <option value="16">16</option>
                    <option value="17">17</option>
                    <option value="18">18</option>
                    <option value="19">19</option>
                    <option value="20">20</option>
                    <option value="21">21</option>
                    <option value="22">22</option>
                    <option value="23">23</option>
                    <option value="24">24</option>
                    <option value="25">25</option>
                    <option value="26">26</option>
                    <option value="27">27</option>
                    <option value="28">28</option>
                    <option value="29">29</option>
                    <option value="30">30</option>
                    <option value="31">31</option>
                </select>
<select id="m" class="styledselect-month" tabindex="7" >
                        <option value="">mm</option>
                        <option value="1">Jan</option>
                        <option value="2">Feb</option>
                        <option value="3">Mar</option>
                        <option value="4">Apr</option>
                        <option value="5">May</option>
                        <option value="6">Jun</option>
                        <option value="7">Jul</option>
                        <option value="8">Aug</option>
                        <option value="9">Sep</option>
                        <option value="10">Oct</option>
                        <option value="11">Nov</option>
                        <option value="12">Dec</option>
                    </select>

<select  id="y"  class="styledselect-year" tabindex="8">
<option value="yyyy">yyyy</option>
<option value="2005">2005</option>
<option value="2006">2006</option>
<option value="2007">2007</option><option value="2008">2008</option><option value="2009">2009</option><option value="2010">2010</option><option value="2011">2011</option><option value="2012">2012</option>
                    </select> 
```

以下是 JS 代码，我使用它向控制器发送信息。我在 Session 中存储这些信息的位置

```
$.ajax({
                        type: "POST",
                        url: "@Url.Action("AcceptPersonalInfo","Register")",
                        data: { dateDay: $("#d").val(), dateMonth: $("#m").val(), dateYear: $("#y").val() },
                        success: function () {
                            $("#contentSpan").load("/Register/ContactInfo");
                        }
                     }); 
```

以下是会话代码

```
public void AcceptPersonalInfo(string dateDay, string dateMonth, string dateYear) //
        {
            Session["DateDay"] = dateDay;
            Session["DateMonth"] = dateMonth;
            Session["DateYear"] = dateYear;

        } 
```

然后我必须将日期存储在 DateTime 对象中以保存到数据库中。

```
p.DOB = Convert.ToDateTime(Convert.ToInt32(Session["DateMonth"]) + Convert.ToInt32(Session["DateDay"]) + Convert.ToInt32(Session["DateYear"])); 
```

但它没有将其转换为日期时间。“p.DOB”是日期时间类型。请帮助转换失败的原因。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-09T06:37:16.610

实际上，您正在添加所有整数，这就是您没有得到的原因。试试下面的代码

```
 string date = Session["DateMonth"].Tostring() + "-" + Session["DateDay"] + "-" + Session["DateYear"];
 p.DOB=Convert.ToDateTime(date); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-09T06:26:06.490

您可以使用

```
p.DOB=new DateTime(Convert.ToInt32(Session["DateYear"]),  
                   Convert.ToInt32(Session["DateMonth"]),
                   Convert.ToInt32(Session["DateDay"])); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-09T06:38:55.147

那是因为你正在转换一个`int`. 您忘记添加分隔符：

```
p.DOB = Convert.ToDateTime(
    Convert.ToInt32(Session["DateMonth"]) + "/" + 
    Convert.ToInt32(Session["DateDay"]) + "/" + 
    Convert.ToInt32(Session["DateYear"])); 
```

# angularjs - Angular.js 中的 $http 帖子

> ID：15894650
> 
> 赞同：18
> 
> 时间：2013-04-09T06:20:44.877
> 
> 标签：angularjs, angular-http

我刚刚开始学习 Angular.js。如何在 Angular.js 中重写以下代码？

```
var postData = "<RequestInfo> "
            + "<Event>GetPersons</Event> "         
        + "</RequestInfo>";

    var req = new XMLHttpRequest();

    req.onreadystatechange = function () {
        if (req.readyState == 4 || req.readyState == "complete") {
            if (req.status == 200) {
                console.log(req.responseText);
            }
        }
    };

    try {
        req.open('POST', 'http://samedomain.com/GetPersons', false);
        req.send(postData);
    }
    catch (e) {
        console.log(e);
    } 
```

这是我到目前为止所拥有的 -

```
function TestController($scope) {
      $scope.persons = $http({
            url: 'http://samedomain.com/GetPersons',
            method: "POST",
            data: postData,
            headers: {'Content-Type': 'application/x-www-form-urlencoded'}
        }).success(function (data, status, headers, config) {
                $scope.data = data; // how do pass this to $scope.persons?
            }).error(function (data, status, headers, config) {
                $scope.status = status;
            });

} 
```

html

```
<div ng-controller="TestController">    
    <li ng-repeat="person in persons">{{person.name}}</li>
</div> 
```

我在正确的方向吗？

* * *

## 回答 #1

> 赞同：41
> 
> 时间：2013-04-09T06:59:22.190

在您当前的函数中，如果您分配`$scope.persons`哪个`$http`是一个承诺对象，则`$http`返回一个承诺对象。

`scope.persons`因此，您应该在如下`$scope.persons`所述的成功内分配，而不是分配给 $http `$http`：

```
function TestController($scope, $http) {
      $http({
            url: 'http://samedomain.com/GetPersons',
            method: "POST",
            data: postData,
            headers: {'Content-Type': 'application/x-www-form-urlencoded'}
        }).success(function (data, status, headers, config) {
                $scope.persons = data; // assign  $scope.persons here as promise is resolved here 
            }).error(function (data, status, headers, config) {
                $scope.status = status;
            });

} 
```

* * *

## 回答 #2

> 赞同：13
> 
> 时间：2013-04-11T03:22:48.757

这是**Ajay beni**给出的解决方案的变体。使用**then**方法允许链接多个 Promise，因为**then**返回一个新的 Promise。

```
function TestController($scope) {
    $http({
        url: 'http://samedomain.com/GetPersons',
        method: "POST",
        data: postData,
        headers: {'Content-Type': 'application/x-www-form-urlencoded'}
    })
    .then(function(response) {
            // success
        }, 
        function(response) { // optional
            // failed
        }
    );
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2017-03-15T11:01:47.470

使用 $http：

[AngularJS：API：$http](https://docs.angularjs.org/api/ng/service/$http)

```
$http.post(url, data, [config]); 
```

实现示例：

```
$http.post('http://service.provider.com/api/endpoint', {
        Description: 'Test Object',
        TestType: 'PostTest'
    }, {
        headers {
            'Authorization': 'Basic d2VudHdvcnRobWFuOkNoYW5nZV9tZQ==',
            'Accept': 'application/json;odata=verbose'
        }
    }
).then(function (result) {
    console.log('Success');
    console.log(result);
}, function(error) {
    console.log('Error:');
    console.log(error);
}); 
```

让我们分解一下：Url 有点明显，所以我们跳过它......

1.  数据：这是您的邮递员请求的正文内容

    ```
    {
        Description: 'Test Object',
        TestType: 'PostTest'
    } 
    ```

2.  config：这是我们可以注入标头、事件处理程序、缓存的地方...参见[AngularJS：API：$http：向下滚动到配置](https://docs.angularjs.org/api/ng/service/$http)标头是人们在 angularJS 中难以复制的最常见的 http 邮递员变体

    ```
    {
        headers {
            'Authorization': 'Basic d2VudHdvcnRobWFuOkNoYW5nZV9tZQ==',
            'Accept': 'application/json;odata=verbose'
        }
    } 
    ```

3.  响应：$http 操作返回一个角度承诺，我建议使用 .then(successFunction, errorFunction) 来处理该承诺，请参阅[AngularJS: The Deferred API (Promises)](https://docs.angularjs.org/api/ng/service/$q)

    ```
    .then(function (result) {
        console.log('Success');
        console.log(result);
    }, function(error) {
        console.log('Error:');
        console.log(error);
    }); 
    ```

# html - 替换与其他 div 具有相同 id 的特定 div 的 innerhtml？

> ID：15894653
> 
> 赞同：0
> 
> 时间：2013-04-09T06:21:02.013
> 
> 标签：html, onclick, innerhtml

所以我做了相当多的研究，但仍然没有得到这个工作。我正在尝试替换 div 的 innerhtml。我已经成功地让它与以下代码一起工作：

```
<script type="text/javascript">
    var embedCode = 'new html goes here';
</script>

<div id="videocontainer">
<img class="playButton" onclick="document.getElementById(videocontainer).innerHTML = embedCode;return false;" src=""/>
</div> 
```

这基本上是一个帖子模板，我将复制和粘贴它，并且只更改图像/embedCode。如果我只有 1 个帖子，一切正常。但是一旦我添加另一个帖子，两者都将无法工作，因为它们都共享相同的 embedCod 名称和相同的 div id。有没有不使用 jQuery 的解决方案？

我试过使用

`document.getElementById(this.id).innerHTML = embedCode`

代替

`document.getElementById(videocontainer).innerHTML = embedCode`

但它仍然无法正常工作。谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-10T22:36:53.847

`id`应该是独一无二的。只需增加一个计数器或使用帖子 ID 作为`id`属性的一部分。

为了便于样式化，也为它们添加一个类，例如`<div class="videocontainer" id="videocontainer1">`. 使用该类进行样式设置，并为您的 JS 使用 id。

# c# - 中间作为任务的目标

> ID：15894655
> 
> 赞同：-1
> 
> 时间：2013-04-09T06:21:08.180
> 
> 标签：c#, vb.net

我在 c# 中尝试了一个旧的 VB 应用程序进行转换，而我遇到了这行代码：

```
Mid(strData, intPosition + 1, intLenght) = strValue 
```

怎么翻译成c#？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-09T06:35:00.863

您必须结合[`Remove`](http://msdn.microsoft.com/en-us/library/system.string.remove.aspx)and [`Insert`](http://msdn.microsoft.com/en-gb/library/system.string.insert.aspx)，例如：

```
strData.Remove(intPosition, intLenght).Insert(intPosition, strValue); 
```

以上假设 的长度`strValue`等于`intLenght`。如果`strValue`可能更长，那么要复制该[`Mid`](http://msdn.microsoft.com/en-us/library/xz5s6003%28v=vs.80%29.aspx)语句，我们需要执行以下操作：

```
strData.Remove(intPosition, intLenght)
       .Insert(intPosition, strValue.Substring(0, intLenght)); 
```

# .net - 如何在不阻塞 UI 的情况下等待任务完成

> ID：15894656
> 
> 赞同：0
> 
> 时间：2013-04-09T06:21:08.363
> 
> 标签：.net, vb.net, task

这是我在这个论坛上的第一个问题，由于我不是以英语为母语的人，我希望你对我放轻松，以防我做错或说错了什么。

所以，这是我的问题：

我喜欢解决一个简单的问题（看起来如此），但我已经研究了一个多星期并尝试了不同的东西，但到目前为止都没有奏效，我总是偶然发现同样的问题。

我喜欢做的是打开一个进度表，然后开始两个长时间运行的任务（例如从两个数据库中获取数据）。这些长时间运行的任务向进度表报告他们的进度，完成后进度表关闭并打开另一个表单以显示两个长时间运行的任务的结果。在进度表关闭和程序继续（或关闭）之前，这两项任务都必须完成（或取消/失败）。

因此，进度表（Form1）只包含两个列表框（ListBox1 和 ListBox2）和以下代码：

```
Public Delegate Sub ShowProgressDelegate(ByVal message As String)

Public Class Form1

Public Sub AddMessage1(ByVal message As String)
  If String.IsNullOrEmpty(message) Then
    Exit Sub
  End If

  If Me.InvokeRequired Then
    Me.Invoke(New ShowProgressDelegate(AddressOf Me.AddMessage1), New Object() {message})
  Else
    Me.ListBox1.Items.Add(message)
    Me.ListBox1.SelectedIndex = Me.ListBox1.Items.Count - 1
    Application.DoEvents()
  End If
End Sub

Public Sub AddMessage2(ByVal message As String)
  If String.IsNullOrEmpty(message) Then
    Exit Sub
  End If

  If Me.InvokeRequired Then
    Me.Invoke(New ShowProgressDelegate(AddressOf Me.AddMessage2), New Object() {message})
  Else
    Me.ListBox2.Items.Add(message)
    Me.ListBox2.SelectedIndex = Me.ListBox2.Items.Count - 1
    Application.DoEvents()
  End If
End Sub

End Class 
```

然后我有我的 TestClass 模拟长时间运行的任务并引发进度事件：

```
Imports System.Threading

Public Class TestClass

  Public Event ShowProgress(ByVal message As String)

  Private _milliSeconds As UShort

  Public Sub New(milliSeconds As UShort)
    _milliSeconds = milliSeconds
  End Sub

  Public Function Run() As UShort
    For i As Integer = 1 To 20
      RaiseEvent ShowProgress("Run " & i)
      Thread.Sleep(_milliSeconds)
    Next i

    Return _milliSeconds
  End Function

End Class 
```

最后我有我的主要程序，它试图把这两个放在一起：

```
Imports System.Threading.Tasks
Imports System.ComponentModel

Public Class Start
  Private Const MULTI_THREAD As Boolean = True

  Public Shared Sub Main()
    Dim testClass(1) As TestClass
    Dim testTask(1) As Task(Of UShort)
    Dim result(1) As UShort

    testClass(0) = New TestClass(50)
    testClass(1) = New TestClass(100)

    Using frm As Form1 = New Form1
      frm.Show()

      AddHandler testClass(0).ShowProgress, AddressOf frm.AddMessage1
      AddHandler testClass(1).ShowProgress, AddressOf frm.AddMessage2

      If MULTI_THREAD Then
        testTask(0) = Task(Of UShort).Factory.StartNew(Function() testClass(0).Run)
        testTask(1) = Task(Of UShort).Factory.StartNew(Function() testClass(1).Run)

        Task.WaitAll(testTask(0), testTask(1))

        result(0) = testTask(0).Result
        result(1) = testTask(1).Result
      Else
        result(0) = testClass(0).Run
        result(1) = testClass(1).Run
      End If

      RemoveHandler testClass(0).ShowProgress, AddressOf frm.AddMessage1
      RemoveHandler testClass(1).ShowProgress, AddressOf frm.AddMessage2

      frm.Close()
    End Using

    MessageBox.Show("Result 1: " & result(0) & "; Result 2: " & result(1))
  End Sub

End Class 
```

如果我将常量 MULTI_THREAD 设置为 false，则一切正常（但按顺序）。但是如果我将 if 设置为 true，它只会显示表单，但不会显示任何进度，也不会显示生成的消息框。如果我调试它永远不会到达 Task.WaitAll(...) 之后的行。

我已经尝试过其他多线程方法，例如使用普通线程（无返回值）、后台工作人员（仅百分比进度，无文本消息）、委托上的 BeginInvoke/EndInvoke，但没有任何效果，或者它显示出与上述相同的行为。

我在另一个论坛上被告知，Task.WaitAll 阻塞了 UI 线程，因为它是在 UI 线程上调用的，但我不敢相信，因为 MSDN 明确指出 Task.WaitAll 等待移交的任务完成或者失败，我没有交出 UI 线程。

所以，我不知道还能尝试什么，所以我希望你能向我指出我的错误，或者告诉我另一种方法来尝试解决我的小问题。

非常感谢您提前。

**更新：**
我做了更多的测试和调试。如果我将表单代码中的两个“Me.Invoke(...)”更改为“Me.BeginInvoke(...)”，那么我的表单中仍然没有显示任何进度消息，但至少任务有效我得到了我的关闭消息框。因此，进度消息的实际交付或显示似乎会导致问题。

也许这会触发你的想法？

再次感谢你。

**更新二：**
经过大量的试验和错误，它似乎工作，至少一点点。我在创建任务时交出了“TaskScheduler.FromCurrentSynchronizationContext”，而不是表单代码中的“Me.InvokeRequired”部分。所以我至少显示了我的进度消息，但任务仍然没有完全并行运行。但这是我下一个问题的主题。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-09T06:35:47.667

您的进程可能会占用系统端可用的大量资源。它只是开始新任务，尝试为繁重的进程启动完整的新线程

你甚至可以在单独的线程中启动你的进度 UI，这样它就不会停止响应

```
Thread nThread;
private void Button1_Click(System.Object sender, System.EventArgs e)
{
    nThread = new Thread(ShowDlg);
    nThread.Start();
}

private void ShowDlg()
{
    Form1 nWin = new Form1();
    nWin.ShowDialog();
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-09T07:03:46.963

您在启动任务后调用 WaitAll，这将阻塞 UI 线程，因此您的进度将不会显示。

您应该指定一个回调或延续任务，以便在任务完成后执行，并在其中做最后的事情，例如显示结果并关闭进度表。

```
Task.Factory.ContinueWhenAll(tasks, Sub(antecedents)
  result(0) = testTask(0).Result
  result(1) = testTask(1).Result
  RemoveHandler testClass(0).ShowProgress, AddressOf frm.AddMessage1
  RemoveHandler testClass(1).ShowProgress, AddressOf frm.AddMessage2

  frm.Close()
  MessageBox.Show("Result 1: " & result(0) & "; Result 2: " & result(1))
End Sub 
```

我通常不是 vb.net 程序员，因此您可能需要对其进行一些调整以确保闭包正常工作，并将其中一些调用编组回 ui 线程

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-09T06:27:12.950

尝试将 Task 更改为 BackgroundWorker。这个类是为表单创建的，并且有很好的 api 来显示关于你的工作的表单信息。看这里的[教程](http://www.dotnetperls.com/backgroundworker-vbnet)

**更新** 完整示例，因为在评论中它看起来很丑：

```
public partial class Form1 : Form
{
    private BackgroundWorker bw = new BackgroundWorker();

    public Form1()
    {
        InitializeComponent();

        bw.WorkerReportsProgress = true;
        bw.WorkerSupportsCancellation = true;
        bw.DoWork += new DoWorkEventHandler(bw_DoWork);
        bw.ProgressChanged += new ProgressChangedEventHandler(bw_ProgressChanged);
        bw.RunWorkerCompleted += new RunWorkerCompletedEventHandler(bw_RunWorkerCompleted);
    }

    void bw_RunWorkerCompleted(object sender, RunWorkerCompletedEventArgs e)
    {
        if ((e.Cancelled == true))
        {
            this.tbProgress.Text = "Canceled!";
        }

        else if (!(e.Error == null))
        {
            this.tbProgress.Text = ("Error: " + e.Error.Message);
        }

        else
        {
            this.tbProgress.Text = "Done!";
        }
    }

    void bw_ProgressChanged(object sender, ProgressChangedEventArgs e)
    {
        this.tbProgress.Text = (string)e.UserState;            
    }

    void bw_DoWork(object sender, DoWorkEventArgs e)
    {
        var worker = sender as BackgroundWorker;

        for (int i = 1; (i <= 10); i++)
        {
            if ((worker.CancellationPending == true))
            {
                e.Cancel = true;
                break;
            }
            else
            {
                // Perform a time consuming operation and report progress.
                System.Threading.Thread.Sleep(500);
                worker.ReportProgress((i * 10), "status you want "+i.ToString());
            }
        }
    }
} 
```

# visual-studio-2012 - TFS 错误找不到文件 [ProjectName].vsmdi

> ID：15894660
> 
> 赞同：0
> 
> 时间：2013-04-09T06:21:21.907
> 
> 标签：visual-studio-2012

首次签入时的此错误阻止我们将解决方案添加到 TFS。不知道如何解决它。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-04-09T07:47:54.513

此错误通常意味着对磁盘上不存在的文件进行了挂起的更改。

因此，无论出于何种原因，您的 VS 都告诉 TFS 正在对文件进行更改`[ProjectName].vsdmi`。随后，该文件已从磁盘中删除。因此，当 VS 进行签入时，它会尝试签入，`[ProjectName].vsdmi`但磁盘上不存在。所以你得到了错误。

任何一个

1.  撤消挂起的更改并再次签入
2.  找出您是否真的需要该文件（vsdmi 文件与 VS 单元测试项目相关）并尝试恢复它。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-08-18T16:23:53.327

我为 Class.cs 文件解决了这个问题。该文件存在于磁盘上，TFS/VS 由于某种原因找不到它。

1.  从VS复制文件（到记事本）
2.  删除了 Visual Studio 中的文件
3.  通过右键单击添加->新建在VS中重新创建文件。
4.  重新粘贴并保存。

这行得通。

# jquery - 滑动 Div 从左侧删除第一个并从右侧添加新的

> ID：15894661
> 
> 赞同：1
> 
> 时间：2013-04-09T06:21:24.550
> 
> 标签：jquery, html, sliding

我有三个水平的div部分我想要的是在一段时间间隔后最左边的div被删除并从最右边的方向添加一个新的div

这是在外部 div 中有 3 个 div 部分的 html 文件

**HTML**

```
<div id="sub-category">
  <div id="sub-category1">
  </div>
  <div id="sub-category2">
  </div>
  <div id="sub-category3">
  </div>
</div> 
```

在 jquery 中，每 5 秒 SlideDivSection() 后有 5 秒的时间间隔。现在它删除了第一个 div 并移动，但它没有在右侧添加新的 div。

**jQuery**

```
 function SlideDiv(){
        setInterval(function(){SlideDivSection()}, 5000);
 }

 function SlideDivSection(){            
     $("#sub-category1").slideUp();    
     $("#sub-category1").remove();    
     $("#sub-category2").attr('id',"sub-category1");//setting the id of sub-cateogry2 to sub category1

     $("#sub-category2").attr("id","sub-category2");//setting the id of sub-cateogry3 to sub category2

// now adding a new div    
     $("#sub-cateogry").append("<div id='#sub-cateogry3'></div>");
//giving slidedown effect to newly created div
     $("#sub-cateogry3").slideUp();
   }

    $("document").ready(SlideDiv); 
```

**CSS**

```
#sub-category {
    border:solid 0px black;
    width:686px;
    height:275px;
    position: relative;
    margin:5px;
}
#sub-category1 {
    border:solid 1px black;
    width:223px;
    height:293px;
    position: relative;
    float:left;
    background-color:grey;
}
#sub-category2 {
    border:solid 1px black;
    width:223px;
    height:293px;
    position: relative;
    margin-left: 5px;
    float:left;
    background-color:lightskyblue;
}
#sub-category3 {
    border:solid 1px black;
    width:222px;
    height:293px;
    position: relative;
    float:right;
    background-color:lightgreen;
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-09T07:31:58.860

你可能想做这样的 [jsfiddle](http://jsfiddle.net/pZBMh/)

## 标记

```
<div id="sub-category">
    <div id="sub-category1" class="item">Item 1</div>
    <div id="sub-category2" class="item">Item 2</div>
    <div id="sub-category3" class="item">Item 3</div>
</div> 
```

## css

```
 #sub-category{
        border: 0 solid black;
        height: 295px;
        margin: 5px 300px;
        overflow: hidden;
        position: relative;
        width: 675px;
     }
     .item{
        position: absolute;
        left:0;
        top: 0;
        width: 223px;
        height: 293px;
        border: solid 1px black;
        background: #046380;
        font: 44px/262px georgia;
        text-align: center;
        font-style: italic
     }
     #sub-category1{
        background-color: grey;
     }
     #sub-category2{
        background-color: #ffc; left: 225px;
     }
     #sub-category3{
        left: 450px;
        background-color: lightgreen;
     } 
```

## 和 javascript

```
 function SlideDivSection() {
        var items = ['sub-category1', 'sub-category2', 'sub-category3'];
        var container = $('#sub-category')
        var item_width = 225;

        window.setInterval(function () {

           var first = $('.item:first', container);
           var faux_id = first.attr('id') + 'faux';
           var faux_elem = $($('<div/>').append(first.clone()).html()).attr('id', faux_id).css({
              left: item_width * items.length,
              backgroundColor: first.css('background-color')
           })
           container.append(faux_elem);
           faux_elem = $('#' + faux_id, container);

           $('.item', container).animate({
              left: '-=' + item_width
           }, 500, function () {
              first.remove();
              faux_elem.attr('id', faux_elem.attr('id').replace('faux', ''))
           })
        }, 2000)
     }

     $(function(){
        SlideDivSection();
     }) 
```

此解决方案从一端移除一个项目，然后从另一端再次插入它。所以你最终会**无缝地**循环你的初始元素。删除元素后，此行为可以更改为“添加新的（和不同的）元素”。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-09T06:54:50.597

我已经修复了你的 javascript，有一些小错误，但现在似乎工作正常。

更新的jQuery：

```
$(document).ready(function() {

    setInterval(function(){SlideDivSection()}, 5000);

 function SlideDivSection(){            

    //fade out and remove div1
    $("#sub-category1").fadeOut(1000, function(){$(this).remove();});   

    $("#sub-category2").attr('id',"sub-category1").html('1');//setting the id of sub-cateogry2 to sub category1    
    $("#sub-category3").attr("id","sub-category2").html('2');//setting the id of sub-cateogry3 to sub category2

    //create new div
    var newDiv = '<div id="sub-category3" style="display:none;">asdas</div>';

    //add new div and fade in    
    $("#sub-category").append(newDiv);
    $("#sub-category3").fadeIn(400);
}

}); 
```

通过使用链接，您可以使用一行代码来删除您的 div 并隐藏它们。通过使用 slideUp 的回调将确保您的 div 仅在上滑动画完成后才被删除..

```
$("#sub-category1").slideUp(1000, function(){$(this).remove();}); 
```

这是一个有效的 JSfiddle - [http://jsfiddle.net/EmxnF/4](http://jsfiddle.net/EmxnF/4)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-09T07:40:00.813

错别字：

```
/* you wrote : */ $("#sub-category2").attr("id","sub-category2");
/* should be : */ $("#sub-category3").attr("id","sub-category2");

/* you wrote : */ $("#sub-cateogry").append("<div id='#sub-cateogry3'></div>");
/* should be : */ $("#sub-category").append("<div id='sub-category3'></div>");

/* you wrote : */ $("#sub-cateogry3").slideUp();
/* should be : */ $("#sub-category3").slideUp(); 
```

更正这会使您的代码工作（效果除外）：[jsfiddle](http://jsfiddle.net/9ChKW/)。

如果你想看到你的第一个 div slideUp，你必须等待动画结束，然后再调用`$('#div-subcategory1').remove()`. 您应该在 slideUp 上使用回调。

如果要为插入的 div 设置动画，则应将其隐藏插入，并使用`slideToggle`.

```
 $("#sub-category1").slideUp(function(){
     $("#sub-category1").remove();
     $("#sub-category2").attr('id',"sub-category1");
     $("#sub-category3").attr("id","sub-category2");

     $("#sub-category").append("<div id='sub-category3' style='display: none'></div>");
     $("#sub-category3").slideToggle();
 }); 
```

这是一个[jsfiddle](http://jsfiddle.net/9ChKW/2/)。

如前所述，如果您想`SlideDiv`在文档加载时设置更多内容，最好编写：

```
$(document).ready( function(){
     SlideDiv();
     //add more stuff here
}); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-04-09T06:49:08.527

尝试这个;

[JSfiddle](http://jsfiddle.net/Allendar/Qudvw/)

**HTML**

```
/* Same as your original */ 
```

**CSS**

```
/* Same as your original */ 
```

**JavaScript**

```
'use strict';

$(document).ready(function() {
    setInterval(function() {
        $('#sub-category3').remove();

        $('#sub-category1').attr('id', 'sub-category2');
        $('#sub-category2').attr('id', 'sub-category3');

        $('#sub-category').prepend('<div id="sub-category1"></div>');
    }, 2000);
}); 
```

谨慎; 除非您将内容放入 DIV 中，否则您不会看到视觉上的变化，因为样式也会传递；）所以它不是“不起作用”，因为您什么也看不到：P

# c# - minidump 中的 .ni.dll 和 .ni.exe 文件是什么？

> ID：15894662
> 
> 赞同：9
> 
> 时间：2013-04-09T06:21:26.177
> 
> 标签：c#, windows-store-apps, windbg, windows-store

由于我的应用程序崩溃，我从 Windows 应用商店应用程序提交过程（由审阅者发送）中获得了一个小型转储。我在为我的应用程序加载符号时遇到问题，因为错误发生在`App.ni.exe`我不知道来自哪里的文件内部。

我的应用程序只有一个`App.exe`（和一些 DLL），但转储一直引用`.ni.dll`和`.ni.exe`. `.appx`在我的或文件中找不到这些`.appxsym`文件。

我的应用是为每个特定平台（x86、x64 和 ARM）构建的。在 stackdump 中崩溃的是 x64 版本。

我目前对windbg的尝试：

符号路径：

```
Srv*C:\Users\Vegard\Appdata\local\temp\SymbolCache*http://msdl.microsoft.com/download/symbols` 
```

Windbg 尝试：

```
0:006> !analyze -v
*******************************************************************************
*                                                                             *
*                        Exception Analysis                                   *
*                                                                             *
*******************************************************************************

Unable to load image Newtonsoft.Json.ni.dll, Win32 error 0n2
*** WARNING: Unable to verify checksum for Newtonsoft.Json.ni.dll
*** ERROR: Module load completed but symbols could not be loaded for Newtonsoft.Json.ni.dll
Unable to load image App.ni.exe, Win32 error 0n2
*** WARNING: Unable to verify checksum for App.ni.exe
*** ERROR: Module load completed but symbols could not be loaded for App.ni.exe
Unable to load image mscorlib.ni.dll, Win32 error 0n2
*** WARNING: Unable to verify checksum for mscorlib.ni.dll 
```

**更新**：尝试 ngen App.exe（以管理员身份运行）我收到以下错误：

```
> ngen.exe install App.exe
[snip]
This operation is only valid in the context of an app container. 
(Exception from HRESULT: 0x8007109A) 
```

在这种情况下，什么是应用容器？我应该从哪里运行它？

**更新**：经过长时间的故障排除，并通过其他方式找出根本原因，我得出的结论是我得到的 minidump 文件缺少此信息。无论哄骗都可以让调试器加载文件的符号。

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2013-04-09T18:35:12.860

看一下工具说明[Ngen.exe (Native Image Generator)](https://docs.microsoft.com/en-us/dotnet/framework/tools/ngen-exe-native-image-generator)：

> 本机映像生成器 (Ngen.exe) 是一种提高托管应用程序性能的工具。Ngen.exe 创建本机映像，这些文件包含已编译的特定于处理器的机器代码，并将它们安装到本地计算机上的本机映像缓存中。运行时可以使用缓存中的本机映像，而不是使用即时 (JIT) 编译器来编译原始程序集。

请记住这一点`processor-specific machine code`。

如果您需要使用 NI 映像调试 minidump，则需要获取这些映像的符号 (PDB)。托管 DLL 的 PDB 将不起作用，您需要使用 NGEN 工具为 NGEN 映像生成本机 PDB，请查看文章[为分析报告创建 NGEN PDB](https://web.archive.org/web/20130308084446/http://blogs.msdn.com/b/visualstudioalm/archive/2012/12/10/creating-ngen-pdbs-for-profiling-reports.aspx)。这篇关于如何为 Profiler Report 获取 NGEN pdbs 的文章，但对于调试它是相同的。

正如我所说，请记住 NGEN 是一个`processor-specific machine code`，因此要为它们生成 PDB：

> 由于 NGEN 的映像是本机的，因此使用与您正在分析的应用程序 (x86/x64/ARM) 的体系结构相匹配的 ngen.exe 副本非常重要。例如，如果应用程序在 Windows 8 RTM 上运行 64 位，那么您需要在“C:\Windows\Microsoft.NET\Framework64\v4.0.30319”中引用 ngen.exe 的副本</p>

**更新：**

从上面的[链接](https://web.archive.org/web/20130308084446/http://blogs.msdn.com/b/visualstudioalm/archive/2012/12/10/creating-ngen-pdbs-for-profiling-reports.aspx)：

> 如果您远程分析了 Windows 应用商店应用程序，则必须在分析时在运行应用程序的机器上执行此操作。如果您在正在查看报告的机器上执行此操作，它将不起作用

因此，您似乎需要在获得 minidump 的同一台机器上生成 ngen 模块/pdb。

Windows 有一个[Native Image Service](https://docs.microsoft.com/en-us/previous-versions/dotnet/netframework-4.0/ms165074(v=vs.100))，当你在你的机器上安装一段时间后，它会为 Windows Store Applications 生成 ni 图像。您可以尝试使用[procmon.exe](https://docs.microsoft.com/en-gb/sysinternals/downloads/procmon)来了解 Windows 如何为 Windows Store 中的应用程序生成 ngen 模块。（只需使用带有 ngen.exe 的进程名称过滤器）。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-04-09T18:19:10.590

NI=本机图像。换句话说，如上面的评论所示，NGEN 的图像。

# c# - 聚焦虚拟键盘时如何滚动用户控件弹出窗口

> ID：15894664
> 
> 赞同：1
> 
> 时间：2013-04-09T06:21:37.770
> 
> 标签：c#, windows-8, user-controls, popup, microsoft-metro

在我的 Windows 8 应用程序中，我需要收集用户详细信息。为此，我在弹出窗口中使用用户控件。在模拟器中，当打开虚拟键盘时，弹出窗口不会滚动。打开虚拟键盘时如何仅滚动弹出窗口。

[http://tinypic.com/view.php?pic=begdh4&s=6](http://tinypic.com/view.php?pic=begdh4&s=6)

提前致谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-09T06:25:39.460

博客文章[处理虚拟键盘](http://blogs.msdn.com/b/eternalcoding/archive/2012/07/09/tips-and-tricks-for-c-metro-developers-handling-the-virtual-keyboard.aspx)应该可以回答您的问题。您可以使用 Margins、RenderTransform、Canvas.Top 或任何其他布局机制将弹出窗口推送到您想要的任何位置。

# javascript - 在javascript中从表单中获取数据

> ID：15894667
> 
> 赞同：-2
> 
> 时间：2013-04-09T06:21:42.287
> 
> 标签：javascript, html, forms

我需要从`FORM`. 我的表格是：

```
<form action="" id="test">
   <h2>Data</h2>
   <label for="">Name</label>
   <input type="text" name="name">
   <label for="">address</label>
   <input type="text" name="address">
   <label for="">phone</label>
   <input type="text" name="phone">
   <input type="button" onclick="xd()" value="click here">
</form> 
```

为此，我使用了这个 javascript 命令：

```
 <script type="text/javascript">
 function xd(){
 //var x=document.forms["test"].getElementsByTagName("address") or
 var x=document.forms["test"].getElementsByTagName("address").value
 document.write(x);
 }
 </script> 
```

但它不起作用。怎么轻松搞定。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-09T06:25:24.213

您似乎通过其`name`属性（地址）而不是其`tagName`属性来定位元素。

`.getElementsByTagName`查找容器中具有特定`tagName`... 的所有元素，这意味着元素的“ `tagName`a `<a href="#">asdf</a>`”是“a”。

我会使用：

```
<script type="text/javascript">
    function xd(){
        var inputs = document.forms["test"].getElementsByTagName("input");
        for (var i = 0 ; i < inputs.length; i++) {
            if (inputs[i].name === "address") {
                // `inputs[i]` is the element with the name "address"
            }
        }
    }
</script> 
```

您必须遍历结果，并将匹配元素的`name`属性与您想要的...“地址”进行比较。

当然，另一种选择是使用`getElementsByName("address")`，例如：

```
var address = document.forms["test"].getElementsByName("address");
if (address.length > 0) {
    // `address[0]` is the element with the name "address"
} 
```

最后一个选择是使用`querySelectorAll('input[name="address"]')`，例如：

```
var address = document.forms["test"].querySelectorAll('[name="address"]');
if (address.length > 0) {
    // `address[0]` is the element with the name "address"
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-09T06:24:20.253

你没有标签“地址”。而不是名字放id。这对你来说很容易

```
 <input type="text" name="address" id="addressId">
var x=document.forms["test"].getElementsById("addressId").value 
```

或使用

```
var inputs = document.forms["test"].getElementsByTagName("input");

for (var i = 0 ; i < inputs.length; i++) {
            if (inputs[i].name === "address") {
                // `inputs[i]` is the element with the name "address"
            }
        } 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-09T06:25:53.027

你的意思是`getElementsByName("address")[0]`？

# android - 数据目录无法访问android

> ID：15894668
> 
> 赞同：0
> 
> 时间：2013-04-09T06:21:42.960
> 
> 标签：android, root

我已经植根了我的设备，我正在尝试在 /data/data 文件夹上写入文件，但是当控件要创建文件时出现“文件的父目录不可写：/data/data/test.txt”异常。代码：

```
Runtime runtime = Runtime.getRuntime();
Process process = runtime.exec("chmod 777 /data/data");
process.waitFor();
resultFile = new File(Environment.getDataDirectory()+ "/data/test.txt");
if (!resultFile.exists())
{
resultFile.createNewFile();
} 
```

请帮助我哪里错了。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-09T06:34:33.973

将您的目录更改为 /data/data/YOUR_PACKAGE_NAME/test.txt

# android - 将 gerrits 列表标记为标签

> ID：15894671
> 
> 赞同：0
> 
> 时间：2013-04-09T06:21:53.740
> 
> 标签：android, git, gerrit, repository

有没有办法将 gerrits 列表标记到标签...标记后，如果我对此标签进行 repo 同步，这些 gerrits 应该同步到工作区..有像 dat 这样的选项吗？有没有人这样做过？对此的任何建议都非常感谢。

```
Commands used to do repo sync

    $repo init -u git://git.SERVER.com/platform/manifest.git -b refs/tags/label -m versioned.xml #Eg to sync to a label
     <code snippet>

    $ repo sync # syncing the code 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-09T07:39:51.963

创建标签：

repo forall -c "git tag -a -m \" [标签描述] \" [标签名] "

将标签推送到远程存储库：

repo forall -c "git push origin [tag-name]"

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-09T06:31:37.680

您可以简单地编辑您的 .repo/manifest.xml 修订以指向特定标签...添加默认修订作为标签名称。它只会同步到提供的标签..

# dropbox - 通过云存储的文件共享应用程序

> ID：15894672
> 
> 赞同：0
> 
> 时间：2013-04-09T06:22:01.663
> 
> 标签：dropbox, google-drive-api, dropbox-api, onedrive, cloud-storage

我一直在寻找文件共享云存储解决方案。我的要求如下
1\. 应该能够将内容共享给有限的用户（或公共可用性）
2\. 用户应该能够将共享文件夹中的内容下载到他们的私有云存储中。

Dropbox、Google Cloud Storage、amazone、Microsoft azure 等许多云存储服务都允许公共文件夹，但是否可以选择将公共共享内容复制到用户私有云存储区域而不复制到第三方服务器？

是否可以在没有任何第三方服务器的情况下将内容从服务提供商复制到其他服务提供商？（例如：从 Dropbox 到 Google Drive）

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-11T18:38:02.873

你看过 Cloudberry Explorer 吗？它让您可以从公共云复制到公共云（例如 Amazon 到 Constant）或从公共云复制到私有云（例如 Amazon 到 Cloudian）。它相当直观且便宜。

# coldfusion - 嵌套浮点数在 CFDOCUMENT css 中不起作用

> ID：15894673
> 
> 赞同：1
> 
> 时间：2013-04-09T06:22:04.210
> 
> 标签：coldfusion, coldfusion-9, coldfusion-8

以下 html 在 <cfdocumentitem type="header"> 块内提供。但是输出是空的。

```
<div class="grid">                              
    <div class="span5">
        <div class="span5">
            Label1
        </div>
        <div class="span5">
            Data1
        </div>
    </div>
    <div class="span5">
        <div class="span5">
            Label2
        </div>
        <div class="span5">
            Data2
        </div>
    </div>
    <div style="clear:both"></div>
</div> 
```

但是当我删除嵌套的 'class="span5"' div 并将一些内容放在那里时，它工作正常。cfdocument 中的嵌套浮点数有什么问题吗？？？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-04-09T12:22:01.450

不幸的是，CFDOCUMENT 中对 CSS 的支持是偶然的。

遵循 2 条规则可能会有所帮助：

1.  确保您的 HTML 验证为 XHTML 1.0 过渡
2.  使用导入样式表

    ```
    <style type="text/css" media="screen">@import "style.css";</style> 
    ```

可以在此处找到相同的信息：[http ://rip747.wordpress.com/2007/09/10/cfdocument-it-works-if-you-know-how/](http://rip747.wordpress.com/2007/09/10/cfdocument-it-works-if-you-know-how/)

# c - Make: *** [] 错误 1

> ID：15894675
> 
> 赞同：0
> 
> 时间：2013-04-09T06:22:06.163
> 
> 标签：c, gcc, makefile

我制作了一个 makefile 并正在尝试对其进行测试，但在 make 中出现错误：

```
austins-macbook:work4 staffmember$ make new
rm -f main.o heap.o heap
gcc -Wall -O2   -c -o main.o main.c
gcc -Wall -O2   -c -o heap.o heap.c
heap.c: In function ‘createHeap’:
heap.c:6: warning: implicit declaration of function ‘malloc’
heap.c:6: warning: incompatible implicit declaration of built-in function ‘malloc’
heap.c:8: warning: implicit declaration of function ‘exit’
heap.c:8: warning: incompatible implicit declaration of built-in function ‘exit’
gcc -Wall -O2 -o heap main.o heap.o
austins-macbook:work4 staffmember$ make test
./heap
make: *** [test] Error 1 
```

我认为获取 make *** Error 1 意味着您的组件之一没有正确编译，但是当我编译它时没有任何错误消息。我如何找出问题所在？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-09T06:23:05.047

`./heap`可能返回一个非零退出代码，它`make`被解释为一个错误。确保您`return 0;`在`main`.

# php - 警告：无法修改标头信息 - 标头已由（输出开始于 C:\xampp\htdocs\project\advancebrowsing.php:132）

> ID：15894677
> 
> 赞同：0
> 
> 时间：2013-04-09T06:22:18.487
> 
> 标签：php, html, mysql

我正在为我的学校做一个项目，我写了这个页面，但由于某种原因，我最后收到 2 个警告，关于已在第 132 行发送的标题信息，但在第 132 行，我只有 php 标签

如果能得到帮助，我将不胜感激，我在 1 小时内编写了此代码，但在过去 2 小时内试图解决此问题......最后累了，决定问它

这是我的代码

```
<html>
<body>
<form method="POST">
Browse By Author's name starting with :<select name="author">
<option value="">--Select--</option>
<option value="A">A</option>
<option value="B">B</option>
<option value="C">C</option>
<option value="D">D</option>
<option value="E">E</option>
<option value="F">F</option>
<option value="G">G</option>
<option value="H">H</option>
<option value="I">I</option>
<option value="J">J</option>
<option value="K">K</option>
<option value="L">L</option>
<option value="M">M</option>
<option value="N">N</option>
<option value="O">O</option>
<option value="P">P</option>
<option value="Q">Q</option>
<option value="R">R</option>
<option value="S">S</option>
<option value="T">T</option>
<option value="U">U</option>
<option value="V">V</option>
<option value="W">W</option>
<option value="X">X</option>
<option value="Y">Y</option>
<option value="Z">Z</option>
</select><br><br>

Browse by Title start with :<select name="title">
<option value="">--Select--</option>
<option value="A">A</option>
<option value="B">B</option>
<option value="C">C</option>
<option value="D">D</option>
<option value="E">E</option>
<option value="F">F</option>
<option value="G">G</option>
<option value="H">H</option>
<option value="I">I</option>
<option value="J">J</option>
<option value="K">K</option>
<option value="L">L</option>
<option value="M">M</option>
<option value="N">N</option>
<option value="O">O</option>
<option value="P">P</option>
<option value="Q">Q</option>
<option value="R">R</option>
<option value="S">S</option>
<option value="T">T</option>
<option value="U">U</option>
<option value="V">V</option>
<option value="W">W</option>
<option value="X">X</option>
<option value="Y">Y</option>
<option value="Z">Z</option>
</select><br><br>

Browse by Publisher start with :<select name="publisher">
<option value="">--Select--</option>
<option value="A">A</option>
<option value="B">B</option>
<option value="C">C</option>
<option value="D">D</option>
<option value="E">E</option>
<option value="F">F</option>
<option value="G">G</option>
<option value="H">H</option>
<option value="I">I</option>
<option value="J">J</option>
<option value="K">K</option>
<option value="L">L</option>
<option value="M">M</option>
<option value="N">N</option>
<option value="O">O</option>
<option value="P">P</option>
<option value="Q">Q</option>
<option value="R">R</option>
<option value="S">S</option>
<option value="T">T</option>
<option value="U">U</option>
<option value="V">V</option>
<option value="W">W</option>
<option value="X">X</option>
<option value="Y">Y</option>
<option value="Z">Z</option>
</select><br><br>

Browse by Genre:<select name="genre">
<option value="">--Select--</option>
<option value="fiction">Fiction</option>
<option value="non-fiction">non-fiction</option>
<option value="sciencefiction">science fiction</option>
</select><br><br>

Book Award: <select name="bookaward">
<option value="">--Select--</option>
<option value="1">Arthur Ellis Award</option>
 <option value="2">Booker Prize</option>
 <option value="3">Canadian Jewish Book Awards</option>
 <option value="4">Commonwealth Writers Prize</option>
 <option value="5">Dayne Ogilvie Prize</option>
 <option value="6">Edna Staebler Award</option>
 <option value="7">Geoffrey Bilson Award</option>
 <option value="8">Gerald Lampert Award</option>
 <option value="9">Griffin Poetry Prize</option>
 <option value="10">Governor General's Award</option>
 <option value="11">Commonwealth Writers Prize</option>
 <option value="12">Journey Prize</option>
 <option value="13">Lorne Pierce Medal</option>
 <option value="14">Wright Awards</option>
 <option value="15">Milton Acorn People's Poetry Award</option>
 <option value="16">Matt Cohen Award: In Celebration of a Writing Life</option>
 <option value="17">Norma Fleck Award</option>
 <option value="18">RBC Bronwen Wallace Award for Emerging Writers</option>
 <option value="19">Pat Lowther Award</option>
 <option value="20">Rogers Writers' Trust Fiction Prize</option>
 <option value="21"> Wright Awards</option>
 <option value="22">Writers' Trust Distinguished Contribution Award</option>
 <option value="23">Writers' Trust Engel/Findley Award</option>
 <option value="24">Winterset Award</option>
 <option value="25">Hilary Weston Writers' Trust Prize for Nonfiction</option>
 <option value="26">Geoffrey Bilson Award</option>
 </select><br><br>
<input type="submit" name="submit" value="Browse">
</form>

<?php
error_reporting(E_ERROR|E_WARNING);

$con = mysql_connect("localhost", "root", "");

if (!$con) {
die('Connection Failed: ' . mysql_error());
}

 if (mysql_select_db("elibrary",$con)){
if ($_POST['submit']){
    $author = $_POST['author'];
    $title = $_POST['title'];
    $genre = $_POST['genre'];
    $publisher= $_POST['publisher'];
    $award= $_POST['bookaward'];

    if ($author != "") {
    $author1 = "author";
    $like1 = "like";
    $and1 = "and";
    }   

    if ($title != "") {
    $title1= "title";
    $like2 = "like";
    $and2 = "and";
    }   

    if ($genre != "") {
    $genre1="genre";
    $like3 = "like";
    $and3 = "and";
    }   

    if ($publisher != "") {
    $publisher1= "publisher";
    $like4 = "like";
    $and4 = "and";
    }   

    if ($award != "") {
    $award1= "bookawards.id";
    $like5 = "=";
    $and5 = "and";
    }

    $browse = ("select * from books,bookawards,bookrelations where books.id = bookrelations.bookid and bookawards.id = bookrelations.bookawardsid '".$and1."' '".$author1."' '".$like1."' '".$author."%' '".$and2."' '".$title1."' '".$like2."' '".$title."%' '".$and3."' '".$genre1."' '".$like3."' '".$genre."%' '".$and4."' '".$publisher1."' '".$like4."' '".$publisher."' '".$and5."' '".$award1."''".$like5."''".$award."'");
    setcookie("browse",$browse);
    header("Location: shop.php");
    exit(); 
    }
    }
mysql_close();
?>
</body>
</html> 
```

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-04-09T06:26:21.340

您需要将 PHP 代码移动到页面顶部（在 HTML 之前）。

如需更详细的答案：

[https://stackoverflow.com/a/8028987/1724762](https://stackoverflow.com/a/8028987/1724762)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-09T06:24:02.453

`header()`在您已经输出了这么多 HTML 之后将无法正常工作。必须在任何输出发送到浏览器之前调用它

根据[PHP 手册](http://www.php.net/manual/en/function.header.php)

> 请记住，必须在发送任何实际输出之前调用 header()，无论是通过普通 HTML 标记、文件中的空白行还是从 PHP 发送。使用 include 或 require 函数或其他文件访问函数读取代码并在调用 header() 之前输出空格或空行是一个非常常见的错误。使用单个 PHP/HTML 文件时也存在同样的问题。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-09T06:26:20.907

当您使用或任何函数写入输出时`echo`，PHP 已经发送了响应正文。这意味着您不能在之后发送标头。

同样适用于 html，将显示 html 并且输出已经开始，因此您无法调用`header()`之后。

这同样适用于结束标签`?>`。如果您在结束标记后有任何单个空格，解析器将忽略它（因为在结束标记之外）并且输出将开始。

所以最好的解决方案是省略结束标签，因为解析器不需要它们。

就像您发送电子邮件并在之后添加地址一样。

# extjs4.1 - 使用 extjs 开发应用程序

> ID：15894678
> 
> 赞同：0
> 
> 时间：2013-04-09T06:22:21.090
> 
> 标签：extjs4.1

最近我的公司要求我收集EXTJS的知识。我从 Sencha 看到了很多例子

但是，当我想使用 extjs 开发应用程序时，我应该怎么做？现在我想深入研究使用 ExtJS 构建应用程序。请给我一些链接。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-09T07:03:42.553

使用 Ext 肯定有一点学习曲线，但最好的起点是他们的 MVC 应用程序教程，并且只需阅读应用程序文档：

*   教程：
    *   [外部 MVC 介绍](http://docs.sencha.com/ext-js/4-2/#!/guide/application_architecture%5d)
    *   [应用架构 pt 1](http://docs.sencha.com/ext-js/4-2/#!/guide/mvc_pt1)
    *   [应用架构 pt 2](http://docs.sencha.com/ext-js/4-2/#!/guide/mvc_pt2)
    *   [应用架构 pt 3](http://docs.sencha.com/ext-js/4-2/#!/guide/mvc_pt3)
*   文档：
    *   [应用文档](http://docs.sencha.com/ext-js/4-2/#!/api/Ext.app.Application)

此外，我会确保了解事件系统在 extjs 中是如何工作的，因为它是将组件连接在一起工作的核心。查看[基本 observable](http://docs.sencha.com/ext-js/4-2/#!/api/Ext.util.Observable)类以获取一些详细信息 - 所有可以触发事件的组件都继承该类。一般来说，文档是你在 Ext 中的朋友。

我在学习 ext 时做的一件事是阅读 Jay Garcia 的书[ExtJS In Action](http://www.manning.com/garcia/)。它绝不会教给你你需要知道的一切，但它很好地概述了 Ext 的能力和一些常见的使用模式。

# php - Codeigniter 值未设置

> ID：15894680
> 
> 赞同：0
> 
> 时间：2013-04-09T06:22:31.307
> 
> 标签：php, arrays, forms, codeigniter

我的代码有问题，即在提交时选择的值`user_support_documentaries`没有被提交到数组

我可以在页面提交之前查看 HTML 源代码，它显示填充的值标签 - 我不明白为什么所选项目没有被放入数组中。

**HTML：**

```
<label>
    <input type="radio" id="user_dafapp_1" name="user_dafapp" value="1" class="checkbox" <?php echo selected_checkbox(set_value('user_dafapp',$grant['user_dafapp']) == 1) ?> /> <br />
</label>
     <div id="user_support_documentaries_container" style="display: none;">
    <?php echo form_dropdown('user_support_documentaries', $film_list, set_value('user_support_documentaries',$grant['user_support_documentaries']), 'id="user_support_documentaries"'); ?>
</div> 
```

**JS：**

```
// checkout form enhancement
    if ($("#user_dafapp_1").is(":checked")) // If checked
    {
        $("#user_support_documentaries_container").show("fast"); //show the hidden div
    }
    else
    {
        $("#user_support_documentaries_container").hide("fast"); //otherwise, hide it
    }
    $("input[name*='user_dafapp']").click(function ()
    {
        if ($("#user_dafapp_1").is(":checked"))
        {
            $("#user_support_documentaries_container").show("fast");
        }
        else
        {
            $("#user_support_documentaries_container").hide("fast");
        }

    }); 
```

**控制器：**

```
function op($action = NULL, $grant_id = NULL)
    {
        if ($this->session->userdata('user_role') != 'grantmaker')
        {
            redirect('grants');
        }

        $user_id = $this->session->userdata('user_id');

        $results = $this->users_model->get_user_by_id($user_id);
        $this->data['user'] = $results->row_array();

        switch ($action) {

            case "edit" :

                $results = $this->grant_model->get($grant_id, $user_id);

                if ($results->num_rows() == 0)
                {
                    $this->session->set_flashdata('flash', 'Grant not found', 'error');
                    redirect('user/my_grants');
                }

                $grant = $results->row_array();

                $this->data['submit_text'] = 'Save changes';

                $page_title = 'Edit a grant';
            break;

            case "add" :

                $grant = array(
                                'user_budget'                   => '',
                                'user_dafapp'                   => '',
                                'user_support_documentaries'    => '',
                                'related_filmmakers'            => '',
                                'user_related_filmmakers'       => '',
                                'user_anoymous'                 => '',
                            );

                $this->data['submit_text'] = 'Submit';
                $page_title = 'Make a Grant application form';
            break;
            default :

                $this->session->set_flashdata('flash', 'grant not found', 'error');
                redirect('user/my_grants');

            break;

        }

        $this->data['action'] = $action;
        $this->form_validation->set_rules('user_budget','Budget','required|numeric|trim|xss_clean'); //Amount
        $this->form_validation->set_rules('user_dafapp','Support','trim|xss_clean'); //Support
        $this->form_validation->set_rules('user_support_documentaries','Support documentaries','trim|xss_clean'); //FILMS

        $this->form_validation->set_error_delimiters('<span class="error">', '</span>');

        if ($this->form_validation->run() == FALSE)
        {   
            $this->data['grant'] = $grant;

            $this->data['grant_id'] = $grant_id;

            $this->data['film_list'] = $this->film_model->get_select_options2();

            build_page('user/my_grants/grant/op/add_edit_form', $this->data, $page_title, 'User');
        }
        else
        {
            $grant_data['user_budget']                  = set_value('user_budget'); //Amount
            $grant_data['user_dafapp']                  = set_value('user_dafapp'); //Support
            $grant_data['user_support_documentaries']   = ((set_value('user_dafapp') == 1) ? set_value('user_support_documentaries') : ''); //This Line 

            switch($action) 
            {
                case('edit'):

                    $grant_data['grant_modified'] = date('Y-m-d H:i:s');

                    if ($this->grant_model->save($grant_data, 'edit', $grant_id) == TRUE)
                    {
                        $this->session->set_flashdata('flash', 'Grant updated', 'success');
                    }

                break;

                case('add'):

                    $grant_data['grant_created']    = date('Y-m-d H:i:s');
                    $grant_data['user_id']  = $user_id;
                    $grant_data['grant_active'] = 0;

                    if ($this->grant_model->save($grant_data, 'add', $grant_id) == FALSE) 
                    {
                        log_message('error', "Failed to add grant {$grant_id} via the admin section");
                        $this->session->set_flashdata('flash', 'Failed to add grant - '.set_value('grant_name'), 'error');
                    }
                    else
                    {
                        $responder_array = array(
                            '%user_budget'                  => set_value('user_budget'),
                            '%user_dafapp'                  => ((set_value('user_dafapp') == 1) ? 'Support one or more documentaries on Name Approved List of films' : 'Support the general operations of Name'),
                            '%user_support_documentaries'   => ((set_value('user_dafapp') == 1) ? set_value('user_support_documentaries') : '')
                            );

                        /*
                                                $responder_array = array(
                            '%user_budget'                  => set_value('user_budget'),
                            '%user_dafapp'                  => ((set_value('user_dafapp') == 2) ? 'Support one or more documentaries on Name Approved List of films' : 'Support the general operations of Name'),
                            '%user_support_documentaries'   => ((set_value('user_dafapp') == 2) ? set_value('user_support_documentaries') : ''),
                            '%user_related_filmmakers'      => ((set_value('related_filmmakers')) ? set_value('user_related_filmmakers') : ''),
                            '%user_anoymous'                => ((set_value('user_anoymous')) ? 'Yes' : 'No'),
                            );
                            */
                        @$this->autoresponder->send('add_grant', $this->session->userdata('user_email'), $this->session->userdata('user_first_name') . " ". $this->session->userdata('user_surname'), $responder_array);
                        @$this->autoresponder->send('add_grant', NOTIFICATION_EMAIL, NULL, $responder_array);

                        $this->session->set_flashdata('flash', 'Your grant submission was successful', 'success');
                    }

                break;
            }

            redirect("user/my_grants");         
        }
    } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-09T07:18:37.580

尝试更换

```
$("#user_dafapp_1").is(":checked") 
```

和

```
$("#user_dafapp_1").attr("checked") 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-19T02:02:09.477

此问题是由`id`设置为`radio`然后使用 CI`checkbox`代码引起的：

**工作代码：**

```
<label>
    <input type="checkbox" id="user_dafapp_1" name="user_dafapp" value="1" class="checkbox" <?php echo selected_checkbox(set_value('user_dafapp',$grant['user_dafapp']) == 1) ?> /> <br />
</label>
     <div id="user_support_documentaries_container" style="display: none;">
    <?php echo form_dropdown('user_support_documentaries', $film_list, set_value('user_support_documentaries',$grant['user_support_documentaries']), 'id="user_support_documentaries"'); ?>
</div> 
```

# c# - 自定义枚举作为可选参数

> ID：15894681
> 
> 赞同：2
> 
> 时间：2013-04-09T06:22:39.060
> 
> 标签：c#, asp.net, .net, asp.net-mvc

```
 public enum Employee
    {
        FT,
        PT,
    } 
```

这不起作用

```
 public ActionResult Index(Employee s = Employee.PT)
        {
            ViewData["Message"] = s.ToString();

            return View("MyView");
        } 
```

> 异常详细信息：System.ArgumentException：参数字典包含“SampleControllerEx.Controllers.HomeController”中方法“System.Web.Mvc.ActionResult Index(SampleControllerEx.Controllers.Employee)”的参数“s”的无效条目。字典包含“System.Int32”类型的值，但参数需要“SampleControllerEx.Controllers.Employee”类型的值。参数名称：参数

但是下面的一个作品，

```
public ActionResult Index([DefaultValue(Employee.PT)] Employee s)
        {
            ViewData["Message"] = s.ToString();

            return View("MyView");
        } 
```

我可以知道为什么'DefaultValue'只支持自定义枚举，而可选参数（4.0）不支持它吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-09T18:53:21.633

你可以这样做：

```
 public ActionResult Index(int employeeType)
        {
            Employee s = (Employee) employeeType;
            ViewData["Message"] = s.ToString();

            return View("MyView");
        } 
```

# html - html 选择框向下箭头看起来像鼠标

> ID：15894684
> 
> 赞同：0
> 
> 时间：2013-04-09T06:23:00.553
> 
> 标签：html, css

在 IE8、9 和 10 上，选择元素看起来像所附图片。下拉箭头被替换为看起来或多或少像鼠标的东西。

在 Firefox 和 Chrome 上，它看起来像一个带有向下箭头的标准下拉菜单。

我找不到任何我用 CSS 做任何事情来改变选择的地方。

有什么建议么？

```
 <td>
    <select id='allocated' name='alloc' onchange='allocChange()'>
    <option value='??' selected='selected'>??</option>
    <option value='1A' >1A</option>
    <option value='1B' >1B</option>
    <option value='1C' >1C</option>
    <option value='2A' >2A</option>
    <option value='2B' >2B</option>
    <option value='3A' >3A</option>
    </select>
  </td> 
```

CSS 不是一个因素——即使没有加载样式表也会发生同样的事情

![在此处输入图像描述](https://i.stack.imgur.com/AQw2N.png)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-09T08:36:40.707

它可能是默认的..但是您可以使用 css 更改箭头

```
.styleSelect select {
background: transparent;
width: 168px;
padding: 5px;
font-size: 16px;
line-height: 1;
border: 0;
border-radius: 0;
height: 34px;
-webkit-appearance: none;
color: #000;
}

.styleSelect {
width: 140px;
height: 34px;
overflow: hidden;
background: url("images/downArrow.png") no-repeat right #fff;
border: 2px solid #000;
} 
```

# mysql - mysql计算不同的正值但计算表中的所有-1值并给出总数？

> ID：15894690
> 
> 赞同：-1
> 
> 时间：2013-04-09T06:23:18.460
> 
> 标签：mysql, sql

我有一个名为 ptb_profile_views 的表，如下所示：

```
id | profile_id | viewed_profile_id
1        2              6
2        2              6
3        3              6
4       -1              6
5       -1              6 
```

我一直试图将“profile_id”中的正值仅计算一次作为不同的值，并将 -1 值计算为它们在以下查询中出现的次数：

```
function check_profile_views3() {
global $connection;
global $_SESSION;
$query = "
SELECT id,profile_id,viewed_profile_id COUNT
FROM ptb_profile_views 
WHERE profile_id > 0
GROUP BY profile_id
UNION
/*shows all -1 profile id's*/
SELECT id,profile_id,viewed_profile_id 
FROM ptb_profile_views 
WHERE profile_id <= 0";
$check_profile_views_set3 = mysql_query($query, $connection);
confirm_query($check_profile_views_set3);
return $check_profile_views_set3;       
        } 
```

所以最终结果是

```
2, 3, -1, -1 
```

但不是回显它们自己的实际值，而是希望查询对值进行计数。

所以...

```
2, 3, -1, -1 = a total of 4 
```

我也试图像这样调用查询，我不知道它是否会起作用：

```
$check_profile_views_set3 = check_profile_views3();
while ($views3 = mysql_fetch_array($check_profile_views_set3)) { 

echo "".$views3['profile_id'].""; ?> 
```

有人可以告诉我我该怎么做吗？谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-09T06:25:03.393

```
SELECT a + b AS TotalCount
FROM
        (
          SELECT COUNT(DISTINCT profile_ID) a
          FROM   ptb_profile_views
          WHERE  profile_ID > 0
        ) x,
        (
          SELECT COUNT(profile_ID) b
          FROM   ptb_profile_views
          WHERE  profile_ID < 0
        ) y 
```

*   [SQLFiddle 演示](http://www.sqlfiddle.com/#!2/95379/8)

# sql - 简化 SQL 列查找查询

> ID：15894691
> 
> 赞同：0
> 
> 时间：2013-04-09T06:23:20.310
> 
> 标签：sql, sql-server

我想查询数据库 sys 表以获取表、列和主键信息的列表，如下查询：

```
select t.name as [TableName]
, (select max(column_id) from sys.columns c where c.object_id = t.object_id) as [ColumnCount]
, (select name from sys.columns c where c.object_id = t.object_id and c.column_id = 1) as [Column01]
, (select name from sys.columns c where c.object_id = t.object_id and c.column_id = 2) as [Column02]
, (select name from sys.columns c where c.object_id = t.object_id and c.column_id = 3) as [Column03]
, (select name from sys.columns c where c.object_id = t.object_id and c.column_id = 4) as [Column04]
, (select name from sys.columns c where c.object_id = t.object_id and c.column_id = 5) as [Column05]
, (select name from sys.columns c where c.object_id = t.object_id and c.column_id = 6) as [Column06]
, (select name from sys.columns c where c.object_id = t.object_id and c.column_id = 7) as [Column07]
, (select name from sys.columns c where c.object_id = t.object_id and c.column_id = 8) as [Column08]
, (select name from sys.columns c where c.object_id = t.object_id and c.column_id = 9) as [Column09]
, (select name from sys.columns c where c.object_id = t.object_id and c.column_id = 10) as [Column10]
, (select name from sys.columns c where c.object_id = t.object_id and c.column_id = 11) as [Column11]
, (select name from sys.columns c where c.object_id = t.object_id and c.column_id = 12) as [Column12]
, (select i.is_primary_key from sys.columns c inner join sys.index_columns ic on ic.column_id = c.column_id and ic.object_id = c.object_id inner join sys.indexes i on ic.index_id = i.index_id and ic.object_id = i.object_id and i.is_primary_key <> 0 where t.object_id = c.object_id and c.column_id = 1) as [Column01PrimaryKey] 
, (select i.is_primary_key from sys.columns c inner join sys.index_columns ic on ic.column_id = c.column_id and ic.object_id = c.object_id inner join sys.indexes i on ic.index_id = i.index_id and ic.object_id = i.object_id and i.is_primary_key <> 0 where t.object_id = c.object_id and c.column_id = 2) as [Column02PrimaryKey] 
, (select i.is_primary_key from sys.columns c inner join sys.index_columns ic on ic.column_id = c.column_id and ic.object_id = c.object_id inner join sys.indexes i on ic.index_id = i.index_id and ic.object_id = i.object_id and i.is_primary_key <> 0 where t.object_id = c.object_id and c.column_id = 3) as [Column03PrimaryKey] 
, (select i.is_primary_key from sys.columns c inner join sys.index_columns ic on ic.column_id = c.column_id and ic.object_id = c.object_id inner join sys.indexes i on ic.index_id = i.index_id and ic.object_id = i.object_id and i.is_primary_key <> 0 where t.object_id = c.object_id and c.column_id = 4) as [Column04PrimaryKey] 
, (select i.is_primary_key from sys.columns c inner join sys.index_columns ic on ic.column_id = c.column_id and ic.object_id = c.object_id inner join sys.indexes i on ic.index_id = i.index_id and ic.object_id = i.object_id and i.is_primary_key <> 0 where t.object_id = c.object_id and c.column_id = 5) as [Column05PrimaryKey] 
, (select i.is_primary_key from sys.columns c inner join sys.index_columns ic on ic.column_id = c.column_id and ic.object_id = c.object_id inner join sys.indexes i on ic.index_id = i.index_id and ic.object_id = i.object_id and i.is_primary_key <> 0 where t.object_id = c.object_id and c.column_id = 6) as [Column06PrimaryKey] 
, (select i.is_primary_key from sys.columns c inner join sys.index_columns ic on ic.column_id = c.column_id and ic.object_id = c.object_id inner join sys.indexes i on ic.index_id = i.index_id and ic.object_id = i.object_id and i.is_primary_key <> 0 where t.object_id = c.object_id and c.column_id = 7) as [Column07PrimaryKey] 
, (select i.is_primary_key from sys.columns c inner join sys.index_columns ic on ic.column_id = c.column_id and ic.object_id = c.object_id inner join sys.indexes i on ic.index_id = i.index_id and ic.object_id = i.object_id and i.is_primary_key <> 0 where t.object_id = c.object_id and c.column_id = 8) as [Column08PrimaryKey] 
, (select i.is_primary_key from sys.columns c inner join sys.index_columns ic on ic.column_id = c.column_id and ic.object_id = c.object_id inner join sys.indexes i on ic.index_id = i.index_id and ic.object_id = i.object_id and i.is_primary_key <> 0 where t.object_id = c.object_id and c.column_id = 9) as [Column09PrimaryKey] 
, (select i.is_primary_key from sys.columns c inner join sys.index_columns ic on ic.column_id = c.column_id and ic.object_id = c.object_id inner join sys.indexes i on ic.index_id = i.index_id and ic.object_id = i.object_id and i.is_primary_key <> 0 where t.object_id = c.object_id and c.column_id = 10) as [Column10PrimaryKey] 
, (select i.is_primary_key from sys.columns c inner join sys.index_columns ic on ic.column_id = c.column_id and ic.object_id = c.object_id inner join sys.indexes i on ic.index_id = i.index_id and ic.object_id = i.object_id and i.is_primary_key <> 0 where t.object_id = c.object_id and c.column_id = 11) as [Column11PrimaryKey] 
, (select i.is_primary_key from sys.columns c inner join sys.index_columns ic on ic.column_id = c.column_id and ic.object_id = c.object_id inner join sys.indexes i on ic.index_id = i.index_id and ic.object_id = i.object_id and i.is_primary_key <> 0 where t.object_id = c.object_id and c.column_id = 12) as [Column12PrimaryKey] 
from sys.tables t 
; 
```

有没有办法简化查询而不是继续手动添加更多列？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-09T06:43:44.133

尝试这样的事情 - 这会给你你想要的吗？

```
SELECT
    ColumnName = c.Name,
    SchemaName = s.Name, 
    TableName = t.Name,
    i.Name, i.is_primary_key
FROM
    sys.columns c 
INNER JOIN 
    sys.tables t ON c.object_id = t.object_id
INNER JOIN 
    sys.schemas s ON t.schema_id = s.schema_id
INNER JOIN 
    sys.indexes i ON i.object_id = t.object_id 
```

它应该给你列名、模式和表名、索引名以及该索引是否是主键

# iphone - 如何在 uisearchbar ios 中添加 DropDownComobo

> ID：15894698
> 
> 赞同：2
> 
> 时间：2013-04-09T06:23:48.623
> 
> 标签：iphone, ios, uisearchbar

我想在 UISearchBar 中添加一个下拉组合，如邮件应用程序（NSTokenField）。

单击该组合后，它将显示项目列表。我读过很多博客，但没有来自 Apple 的公共控制。有没有办法做到这一点？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-09T06:54:53.607

不。您必须使用 UIPickerview 或 UISegmentedControl 来创建下拉菜单。

如果您想要自定义控件，可以查看此链接：-

[https://github.com/katokichisoft/KSPopoverView](https://github.com/katokichisoft/KSPopoverView)

如果您需要任何进一步的帮助..请回复我..

您也可以使用操作表..由您决定..

请享用..

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-09T06:53:39.180

没有内置控件来制作下拉组合。相反，您可以使用选择器，或者在邮件应用程序中有一个自定义控制器。您可以通过视图上的表格视图并呈现它来实现它。您还可以通过添加具有表格视图的控制器并管理弹出框的内容大小来显示 UIPopOverController 中的项目列表。

# php - 是否可以使用 $_REQUEST 在 mysql 数据库中插入数据？

> ID：15894700
> 
> 赞同：0
> 
> 时间：2013-04-09T06:23:50.940
> 
> 标签：php, html, mysql, forms

我已经弄清楚了这段代码，但是用户使用提交按钮提交的条目不会去任何地方。有什么办法可以解决这个问题，还是我应该只使用 $_POST 方法？

PHP代码：

```
 <?php
include ("dbroutine.php");
function register() {
$connect = db_connect;
if (!$connect)
{
die(mysql_error());
}
$select_db = mysql_select_db(securitzed, $connect);
if (!$select_db) {
die(mysql_error());
}
//Collecting info
$fname = $_REQUEST ['fname'];
$lname = $_REQUEST ['lname'];
$username = $_REQUEST['username'];
$password = $_REQUEST['password'];
$email = $_REQUEST['email'];

//Here we will check do we have all inputs filled

if(empty($_REQUEST['username'])){
die("Please enter your username!<br>");
}

if(empty($_REQUEST['password'])){
die("Please enter your password!<br>");
}

if(empty($_REQUEST['email'])){
die("Please enter your email!");
}

//Let's check if this username is already in use
$user_check = mysql_query("SELECT username FROM members WHERE username = '".$_REQUEST

['username']."'");
$do_user_check = mysql_num_rows($user_check);
//Now if email is already in use
$email_check = mysql_query("SELECT email FROM members WHERE email= '".$_REQUEST['email']."'");
$do_email_check = mysql_num_rows($email_check);
//Now display errors
if($do_user_check > 0){
die("Username is already in use!<br>");
}
if($do_email_check > 0){
die("Email is already in use!");
}

//If everything is okay let's register this user
$insert = mysql_query("INSERT INTO members (username, password, email) 
VALUES ('".$_REQUEST['username']."', '".$_REQUEST['password']."', '".$_REQUEST['email']."', '".$_REQUEST['fname']."', '".$_REQUEST['lname']."')");
if(!$insert){
die("There's little problem: ".mysql_error());
}

}
switch($act){
case "register";
register();
break;
} 
```

HTML 代码：

```
 <body>

        <form method="post">
            First Name: <input type="text" name="fname" value="" /> <br />
            Last Name: <input type="text" name="lname" value="" /> <br />
            E-mail: <input type="email" name="email" value="" /> <br />
            Desired Username: <input type="text" name="username" value="" /> <br />
            Password: <input type="password" name="password" value="" /> <br />
            Confirm Password: <input type="password" name="passwordconf" value="" /> <br />
            <input type="submit" value="Submit"/>
        </form>

    </body> 
```

如果我需要添加任何东西，谁能指出，如果没有，我还可以根据需要添加一些额外的代码。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-09T06:26:16.577

`$_REQUEST`包含：`$_COOKIE`、、`$_GET`和`$_POST`变量。如果您使用`$_REQUEST`，则无法保证数据来自发布数据，这会导致脚本中存在安全漏洞。我会使用`$_POST`，但是通过使用这种方法，您很容易受到[SQL 注入](https://stackoverflow.com/questions/601300/what-is-sql-injection)的攻击。

`$_GET`从查询字符串或您的 URL 中检索变量。`$_POST`从 POST 方法中检索变量，例如（通常）表单。`$_REQUEST`是`$_GET`和`$_POST`where `$_POST`overrides的合并`$_GET`。

# 使固定

您必须在表单中指定操作，如下所示。

```
<form action="fetch_data.php" method="post">

<form action="URL"> 
```

`URL`- 提交表单时将表单数据发送到哪里。可能的值：

*   绝对 URL - 指向另一个网站（如 action="http://www.example.com/example.htm"）

*   相对 URL - 指向网站内的文件（如 action="example.htm"）

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-09T06:27:48.440

**首先**，我建议您阅读有关变量的更多信息。

**其次**，`$_REQUEST`是一个变量，如`$_POST`、等`$_SESSION`，`$_GET`可以存储到您的数据库中。因此，对于您的问题，是的，您可以使用`$_REQUEST`在 MySQL 数据库中插入数据

但是，将其用作`$_POST`变量的替代品根本不安全，也不是一个好习惯。看看[这个](http://www.html-form-guide.com/php-form/php-form-post.html)，看看`$_POST`变量是如何工作的。

**第三**，您在代码中使用`mysql_*`函数。请考虑使用`PDO`or`MYSQLI`来防止 SQL INJECTION 并更好地保护您的网站。此外，MYSQL 在 PHP 5.5 及更高版本中被复制。看看[这个](http://net.tutsplus.com/tutorials/php/php-database-access-are-you-doing-it-correctly/)教程，它向你展示了如何使用 PDO 而不是 MYSQL。

**第四**，您不应该将密码直接存储到数据库中，您需要某种形式的密码散列。[在此处](https://stackoverflow.com/questions/401656/secure-hash-and-salt-for-php-passwords)阅读更多信息

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-09T06:25:19.743

*   `ACTION`在您的 HTML 中使用`form`。
*   还要从`sql`注入中清理数据。
*   检查来自的数据`$_REQUEST`是否不为空。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-04-09T06:27:41.980

尝试使用

```
 $fname = $_POST ['fname'];
$lname = $_POST ['lname'];
$username = $_POST['username'];
$password = $_POST['password'];
$email = $_POST['email']; 
```

您还可以执行以下操作来检查请求参数

```
var_dump($_POST); 
```

# c# - 字符串未转换为日期时间

> ID：15894705
> 
> 赞同：0
> 
> 时间：2013-04-09T06:24:19.830
> 
> 标签：c#, datetime

我有 Excel 文件，我从中获取字符串格式的日期为“30-12-1899 07:50:00:AM”

当我尝试将其转换为时，`DATETIME`它会给出错误

```
String was not recognized as a valid DateTime 
```

我正在尝试像这样转换它

```
Convert.ToDateTime(homeToSchool[7],new DateTimeFormatInfo { ShortDatePattern = "dd-MM-yyyy", DateSeparator = "-" }) 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-09T06:26:28.477

采用[`DateTime.ParseExact`](http://msdn.microsoft.com/en-us/library/system.datetime.parseexact.aspx)

```
string myDate = "30-12-1899 07:50:00:AM";
DateTime dt1 = DateTime.ParseExact(myDate, "dd-MM-yyyy hh:mm:ss:tt", 
                                           CultureInfo.InvariantCulture) 
```

有关日期和时间格式字符串的更多信息，

*   [自定义日期和时间格式字符串](http://msdn.microsoft.com/en-us/library/8kb3ddd4.aspx)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-09T06:33:29.763

由于您正在从 excel 中阅读此内容，我希望这会有所帮助

```
 DateTime.FromOADate(homeToSchool[7].ToString("dd-MMM-yyyy"); 
```

# windows-phone-7 - 参数不正确异常

> ID：15894707
> 
> 赞同：4
> 
> 时间：2013-04-09T06:24:20.457
> 
> 标签：windows-phone-7, windows-phone-7.1

我正在开发一个 Windows Phone 7.1 项目，并完成了大部分工作，并决定将我的图块（62x62 和 173x173 PNG）的图像以及用于启动画面的 JPG 文件（SplashScreenImage.jpg 480x800）添加到项目中。在将这些图像添加到项目之前，我的项目运行良好！添加它们并将切片图像设置为 2 个新文件后，我的项目仍然可以构建，但是在 7.1 模拟器上运行时（我的 acer 笔记本电脑没有启用硬件辅助虚拟化以运行 wp8 模拟器）应用程序崩溃当尝试使用“参数不正确”异常加载 MainPage 时（在 Application_UnhandledException 处理程序中）。在过去的 1-2 天里，我一直在尝试在网络上找到解决方案，发现很少提及此错误并且很少有可能的原因，但到目前为止，我的任何发现都没有帮助。这个例外没有说任何有用的东西，考虑到大部分严肃的工作已经完成，而且我非常接近将应用程序发布到市场上，这真的很令人沮丧。

以前有人遇到过这个问题吗？有什么想法可能出错以及如何解决此异常？任何帮助深表感谢！

先感谢您！安德烈

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-05-17T09:48:31.637

每当我想更改启动画面和其他图像时，我都会这样做：

1.  使用 Windows 资源管理器找到磁盘上的文件。

2.  使用一些图像编辑器打开文件（我使用 Paint.NET）

3.  删除默认图像并替换为保持尺寸的图像。

4.  保存图像并返回到 Visual Studio。

5.  重建整个项目。

这可以无缝运行，没有任何错误。;)

# actionscript-3 - 如何在 Group 容器上对鼠标绘制的线进行复制粘贴操作？

> ID：15894710
> 
> 赞同：4
> 
> 时间：2013-04-09T06:24:36.957
> 
> 标签：actionscript-3, apache-flex, flex4, flex4.6

我正在做一个项目，我需要执行复制和粘贴操作。我在组容器上用鼠标画了一条线。现在我想粘贴它。请给我解决方案...... ..

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-12-18T18:17:15.260

首先，您需要为您的图表定义一个数据结构（例如，您定义一个`Line`具有属性`start`(Point)、`end`(Point)`width`和 的`color`）

接下来，您需要创建一个 UI 来呈现（组容器）`Line`内部。`Canvas`ui 还负责提供交互，例如调整大小、更改颜色等。`Line`它可以根据它们的属性（、 和`start`）`end`渲染很多实例`width``color`

现在，您的复制和粘贴很容易。

只需复制选定的`Line`实例并告诉 UI 呈现复制的实例。

# multithreading - 套接字 Winsock 异步阻塞读写同时

> ID：15894715
> 
> 赞同：1
> 
> 时间：2013-04-09T06:24:53.483
> 
> 标签：multithreading, sockets, asynchronous, io, winsock

我有一个客户端服务器拱门，我正在使用阻塞赢套接字。我在服务器和客户端都有一个读写线程。

假设客户端正在等待（阻塞）读取（）调用服务器将内容写入，

当另一个线程的 read() 调用被阻塞时，客户端可以向该套接字写入一些东西。那么阻塞会影响全双工双向套接字吗？我知道我会阻止读取，但为什么它也会阻止写入（）？

或者为了让它工作，我必须使用 select() 还是 poll()？

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-09T08:09:22.997

> 当另一个线程的 read() 调用被阻塞时，客户端可以向该套接字写入一些东西吗

是的，这完全没有问题。

# nhibernate - 为什么 NHibernate 会更新数据库中的旧实体，尽管没有分配 id

> ID：15894720
> 
> 赞同：0
> 
> 时间：2013-04-09T06:25:09.303
> 
> 标签：nhibernate, fluent-nhibernate

我正在使用 Fluent NHibernate 和 MS SQL Express 2012。

当我想将一些实体保存到数据库时，我只需创建它们并调用 ISession.Save() 或 ISession.SaveOrUpdate() 而不设置它们的 id 字段。一切正常，直到我停止应用程序并重新启动它。之后，新实体不会添加到 db。相反，当我调用 Save() 或 SaveOrUpdate() 时，它只会更新旧的。

为什么 NHibernate 会这样？在我看来，当我不设置 id 字段时，它必须向 DB 添加一个新实体，但不更新旧实体。

这是一个例子：

考虑我们有一个类 Foo：

```
public class Foo
{
    public virtual long id { get; set; }
    public virtual string value { get; set; }
} 
```

及其映射：

```
public class FooMap : ClassMap<Foo>
{
    public FooMap()
    {
        Id(foo => foo.id)
            .GeneratedBy.Native();

        Map(foo => foo.value);
    }
} 
```

这是我将它们保存到数据库的方法：

```
var foo1 = new Foo { value = "aaa" };
var foo2 = new Foo { value = "bbb" };

var sf = config.BuildSessionFactory();
using (var sess = sf.OpenSession())
{
    using (var tr = sess.BeginTransaction())
    {
        sess.Save(foo1);
        sess.Save(foo2);

        tr.Commit();
    }
} 
```

之后，数据库中有两个实体。然后我停止应用程序，更改值字段的值，然后重新开始（即创建一个新的 SessionFactory）。在上面的代码之后，没有新的实体被添加到数据库中。相反，旧的现在有另一个值字段值。

PS：我找不到 MS SQL Server 2012 的 db 驱动程序，所以我不得不使用 MS SQL 2008 的驱动程序。这可能是问题吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-09T06:53:38.013

那里`SchemaUpdate`只创建尚不存在的表/列

# wpf - 如何从浏览器访问 Wpf 应用程序？

> ID：15894725
> 
> 赞同：-1
> 
> 时间：2013-04-09T06:25:31.183
> 
> 标签：wpf

我有一个 WPF 应用程序（不是 Wpf 浏览器应用程序），我想从浏览器访问我的 wpf 应用程序。我怎样才能做到这一点？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-09T06:45:46.843

我们称它为[Silverlight](http://www.microsoft.com/silverlight/)我的朋友

# java - 在java中使用正则表达式从字符串中提取数字

> ID：15894729
> 
> 赞同：0
> 
> 时间：2013-04-09T06:25:38.367
> 
> 标签：java, regex, function, debugging, parsing

我无法使用正则表达式从预定义的输入字符串中提取（双）数字。
字符串是：

```
String inputline ="Neuer Kontostand";"+2.117,68"; 
```

为了成功解析我需要`+`在保持可选的同时抑制前导的数字`-`。另外我必须切断`"`数字之前/之后。

当然，我可以进行多步字符串操作，但有谁知道如何使用一个正则表达式以更优雅的方式完成所有操作？

到目前为止我尝试了什么：

```
Pattern p = Pattern.compile("-{0,1}[0-9.,]*");
Matcher m = p.matcher(inputline);
String substring =m.group(); 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-09T06:31:55.587

```
Pattern.compile("-?[0-9]+(?:,[0-9]+)?") 
```

解释

```
-？# 一个可选的减号
[0-9]+ # 十进制数字，至少一位
(?: # 开始非捕获组
  , # 小数点（德文格式）
  [0-9]+ # 十进制数字，至少一位
) # 结束非捕获组，设为可选

```

请注意，此表达式使小数部分（逗号后）可选，但不匹配输入，如`-,01`.

如果您的预期输入*始终*包含两个部分（逗号之前和之后），您可以使用更简单的表达式。

```
Pattern.compile("-?[0-9]+,[0-9]+") 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-09T06:27:47.643

```
import java.util.regex.Matcher;
import java.util.regex.Pattern;

public class NumRegEx {

   public static void main( String[] args ) {
      String inputline = "\"Neuer Kontostand\";\"+2.117,68\"";
      Pattern p = Pattern.compile(".*;\"(\\+|-)?([0-9.,]+).*");
      Matcher m = p.matcher( inputline );
      if( m.matches()) { // required
         String sign  = m.group( 1 );
         String value = m.group( 2 );
         System.out.println( sign );
         System.out.println( value );
      }

   }
} 
```

输出：

```
+
2.117,68 
```

# java - 如何在一定时间后停止计时器？

> ID：15894731
> 
> 赞同：6
> 
> 时间：2013-04-09T06:25:42.680
> 
> 标签：java, android, timer

我有一个 android 应用程序，它有一个计时器来运行任务：

```
time2.scheduleAtFixedRate(new TimerTask() {
        @Override
        public void run() {
            sendSamples();
        }
    }, sampling_interval, sending_interval); 
```

可以说 sampling_interval 是 2000，sending_interval 是 4000。

所以在这个应用程序中，我将一些读数值从传感器发送到服务器。但我想在 10000（10 秒）后停止发送。

我该怎么办？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-04-09T07:04:23.003

尝试

```
 time2.scheduleAtFixedRate(new TimerTask() {
            long t0 = System.currentTimeMillis();
            @Override
            public void run() {
              if (System.currentTimeMillis() - t0 > 10 * 1000) {
                  cancel();
              } else {
                  sendSamples();
              }
            }
... 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-09T06:28:08.790

检查此代码：

```
private final static int DELAY = 10000;
private final Handler handler = new Handler();
private final Timer timer = new Timer();
private final TimerTask task = new TimerTask() {
    private int counter = 0;
    public void run() {
        handler.post(new Runnable() {
            public void run() {
                Toast.makeText(MainActivity.this, "test", Toast.LENGTH_SHORT).show();
            }
        });
        if(++counter == 4) {
            timer.cancel();
        }
    }
};

@Override
public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.activity_main);
    timer.schedule(task, DELAY, DELAY);
} 
```

# arrays - 如何避免将重复值推入 Perl 数组

> ID：15894732
> 
> 赞同：16
> 
> 时间：2013-04-09T06:25:45.917
> 
> 标签：arrays, perl

我需要从包含多个重复值的输入的数组中添加唯一元素。

如何避免将重复值推入 Perl 数组？

* * *

## 回答 #1

> 赞同：21
> 
> 时间：2013-04-09T06:29:21.830

```
push(@yourarray, $yourvalue) unless grep{$_ == $yourvalue} @yourarray; 
```

这会在推送之前检查该值是否存在于数组中。如果该值不存在，它将被推送。

如果该值不是数字，则应使用`eq`而不是`==`.

* * *

## 回答 #2

> 赞同：16
> 
> 时间：2013-04-09T06:28:44.450

您只需要像这样使用哈希：

```
my %hash;
$hash{$key} = $value;  # you can use 1 as $value
... 
```

这将自动覆盖重复的键。

当您需要打印它时，只需使用：

```
foreach my $key (keys %hash) {
    # do something with $key
} 
```

如果您需要对键进行排序，请使用

```
foreach my $key (sort keys %hash) ... 
```

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2014-02-13T03:40:07.010

通过使用`~~`我们可以最小的 perl 版本是 5.10.1

```
use v5.10.1;
use strict;
use warnings;

my @ARRAY1 = qw/This is array of backup /;
my @ARRAY2;
my $value = "version.xml";

sub CheckPush($$) {
    my $val = shift (@_);
    my $array_ref = shift (@_);

    unless ($val ~~ @$array_ref) {
        print "$val is going to push to array\n";
        push(@$array_ref, $val);
    }

    return (@$array_ref);
} 

@ARRAY1 = CheckPush($value, \@ARRAY1);
print "out\n";

foreach (@ARRAY1) {
    print "$_\n";
}

@ARRAY2 = CheckPush ($value, \@ARRAY2);
print "out2\n";

foreach (@ARRAY2) {
    print "$_\n";
} 
```

# android - 带有proguard的android上的Restfb lib

> ID：15894739
> 
> 赞同：0
> 
> 时间：2013-04-09T06:26:11.747
> 
> 标签：android, proguard, restfb

我在我的android项目中使用[restfb](http://restfb.com/)库，一切都很好。当我尝试使用它运行 proguard 时，它已成功完成，但是在运行应用程序时，我得到了

> com.restfb.exception.FacebookJsonMappingException：您必须指定要映射到的 Java 类型。在 com.restfb.DefaultJsonMapper.toJavaList（未知来源）

我的 proguard-project.txt 包含这些行

```
-keep class com.restfb.** { *; }
-keep interface com.restfb.** { *; } 
```

我错过了什么吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-18T00:00:35.283

JSON 映射器可能使用自省来查找泛型类型信息。ProGuard 的混淆步骤默认将其移除，因为虚拟机不需要它，但您可以保留它：

```
-keepattributes Signature 
```

# javascript - 选择所有必填字段后显示验证弹出窗口

> ID：15894748
> 
> 赞同：1
> 
> 时间：2013-04-09T06:26:40.567
> 
> 标签：javascript, kendo-ui

我对过滤器按钮有疑问：当某些客户端选择所有必填字段时，必须过滤网格，否则必须显示弹出消息：“选择所有必填字段”。

在我的小提琴中，我有 3 个下拉菜单和 2 个日期选择器。当我们选择所有而不是 filterbutton 过滤数据时，它必须显示消息。在这个小提琴下拉列表中不使用网格，因为我没有在下拉列表和网格之间放置任何代码，但 datetimpicker 正在工作。

在[这个小提琴](http://jsbin.com/exakic/61/edit)中，我需要显示弹出验证。这里都是必修领域

代码：

```
if(datetimepicker1 ===""&&datetimepicker2 ==="") {
    $("#filter-msg").data("kendoWindow").center().open();
} 
```

这样我就可以了，但我想验证所有 5 个控件

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-09T08:46:04.970

我建议您在按钮的`click`情况下添加测试`filter`：

```
$("#filter").on("click", function () {
    var mindate = $('#datetimepicker1').data("kendoDatePicker").value();
    var maxdate = $('#datetimepicker2').data("kendoDatePicker").value();

    // Check if min date has been filled
    if(!mindate) {
        alert("You have not filled the min date...");
        return false;
    }

    // Check if max date has been filled
    if(!maxdate) {
        alert("You have not filled the max date...");
       return false;
    }

    // the rest of your logic...
} 
```

代替`alert`，您可以放置​​窗口 ( `$("#filter-msg").data("kendoWindow").center().open();`)，但您应该保留`return false`后，以免过滤结果...

# sql-server - 按记录的创建日期分组的不同表中的记录总数

> ID：15894752
> 
> 赞同：1
> 
> 时间：2013-04-09T06:27:11.737
> 
> 标签：sql-server, sql-server-2008-r2

我正在使用 SQL Server 2008 R2。我有六个表，我从中获取许多按创建日期分组的行。

例如 ：

```
SELECT COUNT(*) AS NoOfReading FROM TableA
WHERE IsDeleted = 0 
GROUP BY CONVERT(VARCHAR(10), CreatedDtUTC,111)

SELECT COUNT(*) AS NoOfReading FROM TableB
WHERE IsDeleted = 0 
GROUP BY CONVERT(VARCHAR(10), CreatedDtUTC,111)

SELECT COUNT(*) AS NoOfReading FROM TableC
WHERE IsDeleted = 0 
GROUP BY CONVERT(VARCHAR(10), CreatedDtUTC,111) 
```

及以后..

现在我想`sum of NoOfReading`按创建日期从所有表中分组。有什么解决办法？？

PS：我尝试在所有查询之间使用“+”但给出错误。

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-09T06:34:15.660

我认为一个简单的添加可以工作..

```
select (
    (SELECT COUNT(*) FROM TableA
    WHERE IsDeleted = 0 
    GROUP BY CONVERT(VARCHAR(10), CreatedDtUTC,111))
    +
    (SELECT COUNT(*) FROM TableB
    WHERE IsDeleted = 0 
    GROUP BY CONVERT(VARCHAR(10), CreatedDtUTC,111))
    +
    (SELECT COUNT(*) FROM TableC
    WHERE IsDeleted = 0 
    GROUP BY CONVERT(VARCHAR(10), CreatedDtUTC,111))
    )  AS NoOfReadingSum 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-09T06:42:44.810

Resolved it my self :

```
;WITH MeasurementReadings(NoOfReading, CreatedDtUTC) AS 
(
    SELECT COUNT(*) AS  NoOfReading, CreatedDtUTC FROM TableA
    WHERE IsDeleted = 0 
    GROUP BY CONVERT(VARCHAR(10), CreatedDtUTC,111)
    UNION ALL
    SELECT COUNT(*) AS  NoOfReading, CreatedDtUTC  FROM TableB
    WHERE IsDeleted = 0 
    GROUP BY CONVERT(VARCHAR(10), CreatedDtUTC,111)
    UNION ALL
    SELECT COUNT(*) AS  NoOfReading, CreatedDtUTC FROM TableC
    WHERE IsDeleted = 0 
    GROUP BY CONVERT(VARCHAR(10), CreatedDtUTC,111)
)  
SELECT SUM(NoOfReading) AS NoOfRecords, CreatedDtUTC 
FROM MeasurementReadings
GROUP BY CreatedDtUTC 
```

Thanks

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-09T06:39:36.460

您可以使用`UNION ALL`which 保留重复项：

```
SELECT COUNT(*) AS NoOfReading FROM
(
   SELECT CreatedDtUTC,IsDeleted FROM TableA
   UNION ALL
   SELECT CreatedDtUTC,IsDeleted FROM TableB
   UNION ALL
   SELECT CreatedDtUTC,IsDeleted FROM TableC
) t
WHERE IsDeleted = 0 
GROUP BY DATEADD(day,DATEDIFF(day,0,CreatedDtUTC),0) 
```

# apache - DNS 和 Web 应用程序部署

> ID：15894753
> 
> 赞同：1
> 
> 时间：2013-04-09T06:27:12.193
> 
> 标签：apache, tomcat, dns, vps

您好我有以下情况：

目前在一个 VPS Box（有 1 个 IP 地址）上，我让 LAMPP 在端口 80 上运行网站的“商业”部分。然后我在 Tomcat 上的端口 8080 上运行实际的 Web 应用程序。

我想知道我应该采取什么方法，这样人们就可以直接访问 www.example.com（lampp 商业网站）或 www.example.com/app/（网络应用程序）而无需访问 www.example.com :8080/应用/

我将如何在 DNS 中执行此操作，这甚至可能吗？

我需要 LAMPP 的原因是因为我将 PHP 用于商业站点，而将 Java EE 用于实际的 Web 应用程序。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-09T06:39:45.337

您可以使用 Apache 代理来执行此操作：

```
ProxyPass /app http://www.example.com:8080/app
ProxyPassReverse /app http://www.example.com:8080/app
ProxyRequests Off 
```

现在，当您向[http://www.example.com/app](http://www.example.com/app)发出请求时，它将透明地转发到[http://www.example.com:8080/app 。](http://www.example.com:8080/app)

# javascript - 如何“生成”唯一变量？

> ID：15894755
> 
> 赞同：1
> 
> 时间：2013-04-09T06:27:15.330
> 
> 标签：javascript, jquery, json, google-maps-api-3

我目前正在研究谷歌地图，现在我想从 API 中“生成”图钉。但后来我被卡住了，因为一个图钉看起来像这样：

```
var imageDriver = 'marker.png';
var DriverLatLng = new google.maps.LatLng(location.lat, location.lng);
var driverMarker = new google.maps.Marker({
    position: DriverLatLng,
    map: map,
    icon: imageDriver,
    title: drivers[0].name
});
} 
```

我想创建某种可以“生成”带有前缀的变量的函数。检查以下示例：

```
var imageDriver0;
var DriverLatLng0;
var driverMarker0;
position: DriverLatLng0,
map: map,
icon: imageDriver0,
title: drivers[o].name 
```

这些变量当然必须是唯一的，因此它们不会“冲突”。我有这个 for 循环，它计算我的 API 中的所有“驱动程序”。我可以以某种方式制作这个 for 循环来创建这些引脚吗？例子：

```
 driversRealtime();
function driversRealtime() {
    setInterval(function () {
        var url = "http://blackcab.didair.se/api/drivers";
        var lat;
        var lon;
        var name;
        var id;
        $.getJSON(url,

        function (response) {
            for (var i = 0; i < response.drivers.length; i++) //Counts data-elemements inside 
                lat = response.drivers[i].currentLat;
                lon = response.drivers[i].currentLon;
                name = response.drivers[i].name;
                id = response.drivers[i].profileId;
            console.log(lat);
            console.log(lon);
            console.log(name);
            console.log(id);
        });
    }, 3000); //Delay in milliseconds
} 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-09T06:39:00.537

可以动态创建变量名，但几乎总是毫无意义*。*

改用数组或后缀，并将值作为属性放在数组中的对象中。例子：

```
var points = [];

var point = {
  "url": url,
  "lat": lat,
  "lng": lng,
  "name": name,
  "id": id
};
points.push(point); 
```

# c# - 在 C# 中使用 .MDF 文件

> ID：15894759
> 
> 赞同：0
> 
> 时间：2013-04-09T06:27:33.423
> 
> 标签：c#, sql-server, desktop-application

我有一个`.mdf`文件。我想在桌面应用程序的 c# 中使用它。

这是我的连接字符串：

```
string cwd = System.IO.Directory.GetCurrentDirectory();
string ConString = @"Data Source=.\SQLEXPRESS; AttachDbFilename=" + cwd + "\\SalaryProgram.mdf;Integrated Security=True;User Instance=True"; 
```

如何`.mdf`在 C# 中使用该文件？

我收到此错误：

> 尝试为文件 D:\Naresh Backup\SalaryProgram\Latest Work\SalaryProgram\SalaryProgram\bin\Debug\SalaryProgram.mdf 附加自动命名数据库失败。存在同名数据库，或无法打开指定文件，或位于 UNC 共享上。

提前致谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-09T06:32:36.920

检查以下 3 件事：

1.  确保您的 MDF 文件是由与目标计算机上安装的 SQL Server 相同或更旧版本的 SQL Server 创建的。

2.  确保目标计算机上的 SQL Server 没有同名的数据库。

3.  总是更喜欢`Path.Combine()`文件夹路径和文件名的直接连接。有时函数会返回结束反斜杠字符作为路径的一部分，有时则不会。所以直接连接会导致非法路径。

4.  您可能想查看[|DataDirectory|](http://blogs.msdn.com/b/smartclientdata/archive/2005/08/26/456886.aspx) 功能也是，intsead 的`GetCurrentDirectory()`。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-09T06:40:03.623

在我之前的一个项目（C# 中的 winform 应用程序）中，我使用了一个数据库，比如“EmployeeMaster”。

对我有用的连接字符串是：

“数据源=（本地）\SQLExpress；初始目录=EmployeeMaster；Trusted_Connection=是；”

试试看。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-09T09:02:27.860

我真的建议您定期将此 MDF 文件附加到本地实例，然后连接到数据库。在 asp.net 应用程序中附加 mdf 文件并不是最好的方法。

只需将连接字符串添加到您的应用程序配置文件

```
<connectionStrings>
            <add name="yourConnectionString" connectionString=
"Data Source=(local); Initial Catalog=database_name;Integrated Security=True"     
 providerName="System.Data.SqlClient"/>
    </connectionStrings> 
```

然后在您的代码中使用它，如下所示：

```
string ConString = ConfigurationManager.ConnectionStrings["yourConnectionString 
"].ConnectionString 
```

# actionscript-3 - 如何在flex中刷新itemrenderer

> ID：15894760
> 
> 赞同：0
> 
> 时间：2013-04-09T06:27:38.330
> 
> 标签：actionscript-3, apache-flex, actionscript, flex4, flex3

我开发了一个 flex 应用程序，其中包含一个显示项目列表的 itemrenderer。问题是如果我选择一个项目，背景会突出显示，如果我转到另一个页面并再次返回同一页面，我之前选择的项目仍然突出显示。每次打开页面时，是否有任何解决方案可以刷新 itemrenderer 以清除突出显示的背景？

![突出显示了一个 itemrenderer 实例（复选框和标签）](https://i.stack.imgur.com/eldY4.png)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-09T17:34:45.143

因此，当您说“转到另一个页面并返回”时，听起来您正在导航到应用程序中的某个其他屏幕并返回到具有列表的屏幕。该项目显示已选中，因为您的视图正在被重复使用。这不是从头开始创建的新视图...

要从列表中删除选择，您可以将列表的[selectedIndex](http://help.adobe.com/en_US/FlashPlatform/reference/actionscript/3/spark/components/supportClasses/ListBase.html#selectedIndex)设置为 -1，或者甚至将列表的[selectedItem](http://help.adobe.com/en_US/FlashPlatform/reference/actionscript/3/spark/components/supportClasses/ListBase.html#selectedItem)设置为`null`（或者可能`undefined`作为文档状态）。您可以在导航到下一个屏幕之前或在导航回列表时立即执行这些操作。

还有更多的方法可以解决这个问题：

*   不要重复使用视图
*   返回时重置列表中的 dataProvider
*   ETC...

但是设置`selectedIndex`or`selectedItem`将是最有效的方法。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-11-25T16:06:59.917

正如苏尼尔所建议的那样。离开列表时尝试重置列表的数据提供者。设置 list.dataProvider = new ArrayCollection()。或者如果你有数据 list.DataProvider = arrayCollectionThatYouHave

注意：如果您希望每次用户在视图堆栈中打开此视图时都刷新整个屏幕数据，则侦听“显示”事件并重置数据提供程序并在此事件中设置默认值。

# javascript - Javascript/Jquery - 检测按键，除非显示文件选择对话框

> ID：15894771
> 
> 赞同：0
> 
> 时间：2013-04-09T06:28:21.373
> 
> 标签：javascript, jquery, dialog

我有一个模态框覆盖，用户可以在其中编辑一些信息。关闭此覆盖的一种方法是简单地按 ESC。我对这个工作没有问题。但是，在此模式框中是用于上传文件的部分。当用户选择一个文件时，如果用户按下 ESC，它会关闭“选择文件”对话框，但是我的“模态框关闭”脚本也会检测到该按键。我确实有一个确认对话框来询问用户是否确定要关闭该框，但是如果他们只是尝试关闭“文件选择”对话框，我仍然不希望触发该操作。

这里最好的方法是什么？有没有办法确定浏览器的焦点是在“文件选择”对话框还是实际页面的一部分上？

**更新：** 前三个答案基本相同，而且解决方案非常简单，我什至都不好意思问了。谢谢您的帮助。通常我会接受答案，但由于三个相同，我不确定如何选择最喜欢的。我想我只会选一个。不过，这并没有使其他两个变得不那么可接受。谢谢大家。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-09T06:30:46.420

当对话框打开时设置一个标志变量为真。当对话框关闭时将其更改为假。如果它为假，则应用按键逻辑。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-09T06:31:04.990

> 这里最好的方法是什么？有没有办法确定浏览器的焦点是在“文件选择”对话框还是实际页面的一部分上？

为什么让它变得如此复杂，您可以识别用户是否单击了“选择文件”按钮，因此您可以设置一个标志变量并将其设置为 true，只要他们单击此按钮。

然后您的 keydown/keyup 事件可以检查标志并相应地处理场景。

**编辑：**

示例代码：

```
var SelectFileCode = {
   IsSelectingFile: false,

   Click: function() {
      this.IsSelectingFile = true;
      //do stuff here to open dialog
   },
   KeyDown: function(event) {
     if (this.IsSelectingFile && event.which == 27) //pressed ESC
        //don't close modal, just close select dialog
   }
};

$(function() {
    $('.selectBtn').click(SelectFileCode.Click);
    $('.modal').keydown(SelectFileCode.KeyDown);
}); 
```

您需要确保正确重置`IsSelectingFile`，但这将是一般方法。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-09T06:31:27.067

当按下浏览文件按钮时，您可以设置一个变量（一个标志）。稍后在您关闭模式框的地方，只需检查标志，如果它打开，请不要关闭框。

# php - 如何通过树枝模板在控制器中呈现验证错误

> ID：15894773
> 
> 赞同：0
> 
> 时间：2013-04-09T06:28:24.900
> 
> 标签：php, symfony

如何通过树枝模板在控制器中呈现验证错误。我无法访问控制器中的验证错误。

我找到了一种方法来做到这一点

```
$validator = $this->get('validator');
$errors = $validator->validate($entity);
$content = $this->renderView('YourBundle:YourEntity:template.html.twig',array('errors'=>$errors));

{% if errors %}
    {% for error in errors %}
        <li>{{ error.message }}</li>
    {% endfor %}
{% endif %} 
```

如何在此处获取有错误的字段名称

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-09T06:46:50.647

```
$validator = $this->get('validator');
$errors = $validator->validate($entity);
$content = $this->renderView('YourBundle:YourEntity:template.html.twig',array('errors'=>$errors));

{% if errors %}
    {% for error in errors %}
        <li>{{ error.message }}</li>
        <li>{{ error.propertypath }}</li>
    {% endfor %}
{% endif %} 
```

# c# - 在属性网格中列出 c#

> ID：15894775
> 
> 赞同：0
> 
> 时间：2013-04-09T06:28:31.030
> 
> 标签：c#, list, propertygrid

我有一个以前的列表`Property Grid`，我想消除通过按钮添加的可能性 - 添加。

但我希望能够编辑已经存在的数据。

我的列表：

```
 private List<Pos> _position = new List<Pos>();

    public List<Pos> Position
    {
        get { return _position; }
        set
        {
            _position = value;
            NotifyPropertyChanged("Position");
        }
    } 
```

位置：

```
public class Pos
{
    public string Name { get; set; }
    public double Postion { get; set; }

    public Pos()
        : this(null, Double.NaN)
    {

    }

    public Pos(string name, double postion)
    {
        this.Name = name;
        this.Postion = postion;
    }
} 
```

我试图把`[ReadOnly(true)]`上面的列表，它仍然提供添加的选项。

有谁知道怎么做？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-09T09:53:12.640

我取消了添加/删除的选项，如下所示：

我创建了一个通用类：

```
public class PosList<T> : List<T>, ICollection<T>, IList
{

    public ValuesList(IEnumerable<T> items) : base(items) { }

    bool ICollection<T>.IsReadOnly { get { return true; } }

    bool IList.IsReadOnly { get { return true; } }

} 
```

这提供了在代码中添加/删除的可能性，但不能通过集合编辑器。

采用：

```
private PosList<Pos> _position = new PosList<Pos>(new List<Pos>());

public PosList<Pos> Position
{
    get { return _position; }
    set
    {
        _position = value;
        NotifyPropertyChanged("Position");
    }
} 
```

# dynamics-crm-2011 - 如何在 crm 2011 中将潜在客户分配给活动

> ID：15894779
> 
> 赞同：0
> 
> 时间：2013-04-09T06:28:41.253
> 
> 标签：dynamics-crm-2011, dynamics-crm, dynamics-crm-online

我有大约 10 个潜在客户和 10 个活动，现在如何将潜在客户分配给 CRM 2011 中的活动并生成报告..

这个作业怎么做。

提前致谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-09T08:24:20.843

我不知道你到底想要什么，但你可以做的一件事是你有营销列表，你可以添加线索、联系人或客户。一项新功能是 Dynamics Marketing 列表，如果实体的条件发生更改，该列表也会更新。如果我不回答您的问题，请提供更多详细信息。

看看一些教程：

*   [https://community.dynamics.com/crm/b/crmsoftwareblog/archive/2012/11/13/simplifying-campaigns-in-microsoft-dynamics-crm-2011.aspx](https://community.dynamics.com/crm/b/crmsoftwareblog/archive/2012/11/13/simplifying-campaigns-in-microsoft-dynamics-crm-2011.aspx)
*   [http://www.youtube.com/watch?v=kkjZYhUZDbc](http://www.youtube.com/watch?v=kkjZYhUZDbc)

# sql-server - 从另一个连接列更新列，，

> ID：15894782
> 
> 赞同：2
> 
> 时间：2013-04-09T06:28:46.883
> 
> 标签：sql-server, join, sql-update

首先，对于 DB'es 来说应该很容易，但它真的让我很痛苦，我不知道为什么，，

我有两个表，名为 Applicationforms 的 [Table1] 和名为 WFInstance 的 [Table2] 我需要使用表 2 中的 startedDate 值更新 Table1 中的 FormSubmitDate，其中 FormSubmitDate 为空。我写了以下查询

```
UPDATE    ApplicationForm
SET              FormSubmitDate = wfi.StartDate
FROM         ApplicationForm app ,
                      WorkFlowInstances wfi

WHERE     app.FormSubmitDate is null and wfi.applicationID = app.ID 
```

当我运行查询时，SQL 将查询重新生成到这个，，

```
UPDATE    ApplicationForm
SET              FormSubmitDate = wfi.StartDate
FROM         ApplicationForm AS app INNER JOIN
                      WorkFlowInstances AS wfi ON app.ID = wfi.ApplicationID CROSS JOIN
                      ApplicationForm
WHERE     (app.FormSubmitDate IS NULL) 
```

我尝试使用 join 写另一个语句，，

```
UPDATE ApplicationForm
SET FormSubmitDate = wfi.StartDate
FROM ApplicationForm 
JOIN WorkFlowInstances wfi ON ApplicationForm.ID = wfi.ApplicationID 
WHERE  FormSubmitDate is null 
```

和 SQL 生成相同的新语法，，

现在当我运行代码时，[所有记录] formSubmitDate 字段填充了第二个表 startDate 的第一个值。即使我有一条记录在 table1 中包含空值

我在这里想念什么！？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-09T07:20:25.110

我认为这可以满足您的要求。试试看，让我们知道。

```
UPDATE tabl3
SET formsubmitdate=(SELECT startdate
  FROM table4
  WHERE table4.id=tabl3.id AND tabl3.formsubmitdate is null); 
```

编写相同内容的另一种方法是

```
UPDATE tabl3
SET formsubmitdate= startdate
FROM table4 where tabl3.id = table4.id and formsubmitdate is null 
```

# php - 通过“SELECT”命令选择每组的前两条记录的最佳方法是什么？

> ID：15894785
> 
> 赞同：5
> 
> 时间：2013-04-09T06:28:54.840
> 
> 标签：php, mysql, sql, group-by, greatest-n-per-group

例如我有下表：

```
id group data
1 1 aaa
2 1 aaa
3 2 aaa
4 2 aaa
5 2 aaa
6 3 aaa
7 3 aaa
8 3 aaa 
```

通过“SELECT”命令选择每组的前两条记录的最佳方法是什么？如果没有好的方法，你建议什么例程？（在 PHP 中）

（模型结果）

```
1 1 aaa
2 1 aaa
3 2 aaa
4 2 aaa
6 3 aaa
7 3 aaa 
```

我知道在子查询中通过 a.id >= b.id 进行交叉连接是可行的，但我正在寻找一种更具可扩展性的解决方案，可以应用于具有数百万条记录的表。谢谢

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-04-09T06:34:55.443

```
select a.*
from Tablename a
where 
(
   select count(*) 
   from Tablename as b
   where a.group = b.group and a.id >= b.id
) <= 2 
```

*   [SQLFiddle 演示](http://www.sqlfiddle.com/#!2/1b596/3)

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-04-09T07:15:08.783

我喜欢这个技巧，它利用了 GROUP_CONCAT 聚合函数和 FIND_IN_SET：

```
SELECT
  Tablename.*
FROM
  Tablename INNER JOIN (
    SELECT `group`, GROUP_CONCAT(id ORDER BY id) ids
    FROM Tablename
    GROUP BY `group`) grp ON
  Tablename.`group` = grp.`group` AND
  FIND_IN_SET(Tablename.id, ids)<=2
ORDER BY
  Tablename.`group`, Tablename.id 
```

性能不能太好，因为它不能利用索引。

或者你也可以使用这个：

```
SELECT t1.id, t1.`group`, t1.data
from
  Tablename t1 INNER JOIN Tablename t2
  ON t1.`group` = t2.`group` AND t1.id>=t2.id
GROUP BY
  t1.id, t1.`group`, t1.data
HAVING
  COUNT(*)<=2
ORDER BY
  t1.`group`, t1.id, t1.data 
```

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2013-04-09T06:33:42.983

您可以像往常一样选择、过滤和排序查询，然后

用于**MSSQL**

```
SELECT TOP 2 * FROM foo; 
```

据我记得**Sybase**、**Oracle**和可能的其他一些**RDBMS**使用这种语法。

对于**MySQL**，你做

```
SELECT * FROM foo LIMIT 2; 
```

**更新：**

是的，我看错了你的问题，对不起。似乎我们中的一些人这样做了:)

然后取决于您的**RDBMS**是否支持**HAVING**等。您可以使用**HAVING**或使用**IN**和**IN**子句中的子查询来构造查询。

对于**MSSQL**，我认为您可以执行类似的操作（代码未测试）

```
SELECT id, data
    FROM (
        SELECT id, data, Rank() over (Partition BY group ORDER BY id DESC ) AS Rank
        FROM table
        ) rs WHERE Rank <= 2) 
```

但是由于这取决于您的**RDBMS**，所以我要求您查看类似的问题，看看哪一个最适合您的情况，因为**MSSQL支持****MySQL**不支持的某些东西，反之亦然。

*这里有些例子*

[为每个类别选择前 10 条记录](https://stackoverflow.com/questions/176964/select-top-10-records-for-each-category)

[如何在 MySQL 中为每个 topic_id 选择最后两条记录](https://stackoverflow.com/questions/2596489/how-to-select-the-last-two-records-for-each-topic-id-in-mysql)

# ios - GoogleMaps JS API v3 在 iOS 中不起作用

> ID：15894787
> 
> 赞同：3
> 
> 时间：2013-04-09T06:28:56.853
> 
> 标签：ios, google-maps

我在 iOS 中使用 Google Maps Java Script API V3。首先，我在页面中创建了一个示例 html Hello World 示例

[https://developers.google.com/maps/documentation/javascript/tutorial](https://developers.google.com/maps/documentation/javascript/tutorial)

我使用了正确的 Google Maps API for Business 客户端 ID。当我启动 html 页面时它工作正常。

但是，当我通过创建 webview 并使用此 html 页面加载视图来在 iOS 项目中加载相同的 html 页面时，同样的方法不起作用。

我收到以下错误

“Google 已禁用此应用程序的 Maps API。此站点无权使用提供的 Google Maps 客户端 ID。如果您是该应用程序的所有者，您可以在此处了解有关注册 URL 的更多信息：[https://developers .google.com/maps/documentaion/business/guide#URLs](https://developers.google.com/maps/documentaion/business/guide#URLs) "

我需要专门为 iOS 项目做任何事情吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2014-09-15T14:15:10.883

正如之前的评论中提到的，为了在 iOS 或 Android 应用程序中使用带有 web 视图的 Google Maps for Business，您必须在 Google 控制台中注册适当的 URL。这些 URL 以“file://”开头，此时用户无法输入。Google 代表可以帮助您代表您注册这些网址。他们是：

<= iOS7 -- file:///var/mobile/Applications

iOS8 -- file:///private/var/mobile/Containers/Bundle/Application/

Android -- file:///android_asset/www/index.html

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2015-09-18T21:22:29.057

似乎在 iOS 9 中 URL 已更改为：file:///var/mobile/Containers/Bundle/Application

# python - 用于桌面的python作业队列库

> ID：15894788
> 
> 赞同：0
> 
> 时间：2013-04-09T06:29:12.620
> 
> 标签：python

我想开发一个 PyQt 联系人列表桌面应用程序，并且我希望在某些事件发生时不时执行一些工作。例如，我希望当我点击联系人按钮时，将发送电子邮件的工作添加到队列中并在 5 分钟后完成。

我见过一些工作排​​队解决方案，它们需要 redis 或其他类型的代理。我希望我的应用程序简单，因此捆绑服务器（如 redis）不是我想要的。

是否有一个简单的作业队列，我可以使用它来执行我计划在我的应用程序中执行的简单作业，而无需庞大的服务代理？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-09T06:48:44.417

对于计划任务，

*   对于 *nux ，使用[crontab](http://kvz.io/blog/2007/07/29/schedule-tasks-on-linux-using-crontab/)

*   对于胜利，使用 [Windows 计划任务](http://msdn.microsoft.com/en-us/library/windows/desktop/bb736357%28v=vs.85%29.aspx) 或简单地使用“at”命令

对于消息队列，

*   对于win，您可以使用消息队列[windows消息队列](http://msdn.microsoft.com/en-us/library/windows/desktop/ms632590%28v=vs.85%29.aspx)

*   [pika（rabbitmq 客户端）](https://github.com/pika/pika)，[rabbitmq 服务器](http://www.rabbitmq.com)

*   [pymq](https://code.google.com/p/pymq/)

*   [redis server](http://redis.io/) , [redis py 客户端](https://github.com/andymccurdy/redis-py)（redis 提供简单的队列服务器，支持订阅和发布）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-09T07:17:21.890

我首先想到的是[Quartz 框架](http://quartz-scheduler.org/)——它是一个调度器，起源于 Java（我认为）。所以我在 stackoverflow 上查找并发现了另一个问题：[An enterprise scheduler for python (like quartz)](https://stackoverflow.com/questions/1727138/an-enterprise-scheduler-for-python-like-quartz)，它看起来很匹配。

# jakarta-ee - Struts 和 Spring 哪个更好，为什么？

> ID：15894790
> 
> 赞同：0
> 
> 时间：2013-04-09T06:29:18.137
> 
> 标签：jakarta-ee

我是一名从事 Swing API 的 Java 开发人员。我对 JSp 和 Servlet 有一定的了解。我想学习一个框架。我想知道哪个更好，Struts 还是 Spring。Apache 的检票口怎么样。

提前致谢

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-04-09T06:51:32.960

这取决于您想学习它们的目的。Struts 要简单得多，或者可能只是更小，所以从一开始可能会更好。

Struts 是一个 Web 框架，它通常仅用于在 MVC 架构中定义控制器和渲染视图。如果您需要，这里有更多关于[MVC 架构的信息。](http://en.wikipedia.org/wiki/Model%E2%80%93view%E2%80%93controller)因此，您通常需要将它与其他框架（例如 Hibernate 和 EJB）结合起来以完成您的项目。

Spring 很大，它更像是一个完整的平台。它有各种模块，但您不必使用所有模块。Spring MVC 将是一个很好的起点，它相当于 Struts，您可以从那里选择其他模块，例如 Spring Security 和 Spring Data，以适应您的项目需求。

这里有[更多关于 Spring](http://www.springsource.org/spring-framework#documentation)的信息。

# ios - NSXML Parser 查找父节点的子节点

> ID：15894791
> 
> 赞同：0
> 
> 时间：2013-04-09T06:29:19.477
> 
> 标签：ios, objective-c, nsxml

我对 XML 解析完全陌生，有一个 XML 结构，如..

```
 <Chapter name = "chap1">
   <pages>one.html</pages>
   <pages>two.html</pages>
   </Chapter>
   Chapter name = "chap2">
   <pages>one.html</pages>
   <pages>two.html</pages>
   </Chapter>
   <Chapter name = "chap3">
   </Chapter> 
```

我想把每个章节的页面分开......即如果章节有页面节点，我想说是，否则不。我该如何解析..我正在使用`NSXml`解析器

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-09T07:14:45.830

你必须像这样尝试，

```
- (void)parser:(NSXMLParser *)parser didStartElement:(NSString *)elementName namespaceURI:(NSString *)namespaceURI qualifiedName:(NSString *)qName attributes:(NSDictionary *)attributeDict
{
     if ([elementName isEqualToString:@"Chapter"]) 
     {
         ChapterOneFlag = YES;//use this as BOOL
     }
}
- (void)parser:(NSXMLParser *)parser foundCharacters:(NSMutableString *)string
{
        buffContent=[buffContent stringByAppendingString:string];
}
- (void)parser:(NSXMLParser *)parser didEndElement:(NSString *)elementName namespaceURI:(NSString *)namespaceURI qualifiedName:(NSString *)qName
{
      if (ChapterOneFlag == YES)
      {
        if ([elementName isEqualToString:@"pages"]) 
        { 
            [yourArr addObject:buffContent];
        }
     }
} 
```

这是你想要的代码吗？在这里您可以使用`youArr`. 它会分开来。

* * *

## 回答 #2

> 赞同：-2
> 
> 时间：2013-04-09T06:31:16.400

您必须为此使用 NSXMLParser

在这里查看编程指南：[NSXMLParser Programming Guide](https://developer.apple.com/library/mac/#documentation/Cocoa/Conceptual/XMLParsing/Articles/UsingParser.html)

# c# - 为什么在 OnClick 事件中可以找到控件，但在页面加载中找不到？

> ID：15894793
> 
> 赞同：1
> 
> 时间：2013-04-09T06:29:33.557
> 
> 标签：c#, asp.net, events, webforms, page-lifecycle

所以我假设这与页面生命周期有关，也许控件尚未绑定到页面加载？老实说，我仍在学习 ASP.NET 页面生命周期，何时发生绑定，何时可以访问某些数据以及何时太早/太晚等等。我只是想很好地解释一下为什么以下内容不起作用. 假设一个递归搜索控件的方法，从一个RepeaterItem开始，寻找一个TextBox，就像这样......

```
 private void FindMyTextBox()
 {
    foreach (RepeaterItem repeated in myRepeater.Items)
    {
        TextBox txtPercentage = (TextBox)FindControlRecursive(repeated, "txtPercentage");
        .
        .
        .
    }
 } 
```

....在哪里....

```
public static Control FindControlRecursive(Control root, string id)
{
    if (root.ID == id)
    {
        return root;
    }

    return root.Controls.Cast<Control>()
        .Select(c => FindControlRecursive(c, id))
        .FirstOrDefault(c => c != null);
} 
```

...为什么会从绑定到`OnClick`事件的方法中调用这项工作，例如....

```
<asp:Button ID="btnSubmit" runat="server" Text="Submit" OnClick="Validate" />

 protected void Validate(object sender, EventArgs e)
 {
     FindMyTextBox();
 } 
```

...但不是从 Page_Load 调用时，例如....

```
protected void Page_Load(object sender, EventArgs e)
{
    FindMyTextBox();
} 
```

# macos - 基于视图的表视图中的基于视图的表视图

> ID：15894796
> 
> 赞同：2
> 
> 时间：2013-04-09T06:29:43.450
> 
> 标签：macos, cocoa, nstableview

我正在寻找创建一个 Mac 应用程序，其中您在表视图中有一个表视图。

我使用了一个基于视图的表格视图，在它的 cellView 中，我放置了另一个表格视图。到现在为止还挺好。我运行程序，可以看到两个表视图都正常工作。我还为桌子创建了不同的 Outlets，但收到一条警告说

```
warning: Unsupported Configuration: Outlet 'innerTable' of 'File's Owner' is connected to 'Table View,' an invalid destination (Object may be repeated at runtime.) 
```

我查看了错误，但无法得到明确的答案。

我的目标是为 iPhone / iPad 创建类似“Pulse”应用程序。

另一件事：

当我制作内部表视图 - 基于视图时，不编写任何代码，我收到此错误：

```
Command /Applications/Xcode.app/Contents/Developer/usr/bin/ibtool failed with exit code 255 
```

我似乎无法以任何方式控制内部表视图。

这是当前在 xib 中的情况的屏幕截图。

```
![Screen shot that shows my xib](http://prntscr.com/zuic3) 
```

任何帮助，将不胜感激。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2014-05-02T21:58:12.937

Apple 文档中有一个名为 TableViewPlayground 的演示项目。Apple 在其中演示了如何在 NSTableView 中引用自定义对象。该演示显示了三个不同的示例，您要查看“复杂表视图”选项。

遗憾的是，该演示完全没有文档记录，代码编写也很笨拙，但您可以检查 xib 文件中的连接并查看子类和引用的内容以及拼图如何一起引用，但无论哪种方式都可能有所帮助。

[https://developer.apple.com/library/mac/samplecode/TableViewPlayground/Introduction/Intro.html](https://developer.apple.com/library/mac/samplecode/TableViewPlayground/Introduction/Intro.html)

我相信为自定义单元创建连接的方法是不使用助手编辑器——即使它在 iOS 中很常见。相反，请事先在代码中声明您的 IBOutlets，然后使用连接检查器控制从 IB 中的元素拖动到您的自定义类。这样做可以防止出现“不支持的配置”错误。

# jquery - 防止 div 在使用 jquery 切换时被按下

> ID：15894800
> 
> 赞同：3
> 
> 时间：2013-04-09T06:30:33.873
> 
> 标签：jquery, html, css

我有两个可以点击打开的 div。除了第一个 div 不断向下推第二个 div 之外，该功能工作得非常顺利。我希望他们站在彼此的一边。

我创建了一个 js 小提琴， [http://jsfiddle.net/Qskxa/1/](http://jsfiddle.net/Qskxa/1/)

我认为问题出在html文件中？

谢谢

```
<div id="artistsbox">
  <div class="artist">
    <ul class="ulartists">
      <li> 
        <span class="toggle">Artist 1</span>
        <div class="toggle_hide">
          <p> Hello world</p>
        </div>
      </li>
      <li>
        <span class="toggle">Artist 2</span>
        <div class="toggle_hide">
          <p> Hello world</p>
        </div> 
      </li>
    </ul>
  </div>  
</div> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-09T06:44:08.320

我不是 100% 确定你在寻找什么（是你想要并排的按钮吗？）但是如果你使用 CSS 定位，你可以从文档流中删除隐藏的图像，避免下推：

[http://jsfiddle.net/Qskxa/10/](http://jsfiddle.net/Qskxa/10/)

```
.toggle_hide{
    display:none;
    position: relative;
}

.toggle_hide img {
    position: absolute;
    left: 0;
    top: 0;
} 
```

更改值/定位以满足您的需要:)

# sql-server - SQL Server 中动态 SQL 中的异常处理

> ID：15894805
> 
> 赞同：1
> 
> 时间：2013-04-09T06:30:51.677
> 
> 标签：sql-server

在动态 SQL 语句中，一个 @STU_ID 值无法将数据插入到另一个表中。在这里，如果执行失败，我需要知道哪个@STU_ID。

```
CREATE PROC DATA_COPY
 (
 @SRC_TABLE VARCHAR(30),
 @DEST_TABLE VARCHAR(30)
 )
 AS
 DECLARE @STU_ID INT
 BEGIN
  DECLARE STUDENT_CURSOR CURSOR FOR
  SELECT DISTINCT STU_ID FROM STUDENT

  OPEN STUDENT_CURSOR
        FETCH NEXT FROM STUDENT_CURSOR INTO @STU_ID
    WHILE @@FETCH_STATUS = 0
        BEGIN

EXEC ('INSERT INTO '+@DEST_TABLE+'
    SELECT *
    FROM '+@SRC_TABLE+' 
    WHERE STU_ID='+@STU_ID)

        FETCH NEXT FROM STUDENT_CURSOR INTO @STU_ID
    END
    CLOSE STUDENT_CURSOR
    DEALLOCATE STUDENT_CURSOR
 END 
```

你能帮我怎么做吗？

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-09T07:04:39.353

[您可以使用TRY CATCH](http://msdn.microsoft.com/en-us/library/ms179296%28v=sql.105%29.aspx)在错误上下文期间捕获数据

```
BEGIN TRY
    EXEC ('INSERT INTO '+@DEST_TABLE+'
    SELECT *
    FROM '+@SRC_TABLE+' 
    WHERE STU_ID='+@STU_ID)
END TRY
BEGIN CATCH
    PRINT 'ERROR WITH VALUE @STU_ID = ' + CONVERT(VARCHAR,@STU_ID)
END CATCH 
```

# javascript - 使用文本区域在多行中显示文本

> ID：15894807
> 
> 赞同：2
> 
> 时间：2013-04-09T06:31:02.177
> 
> 标签：javascript, jquery, html

我在 html 中使用文本区域标签，我必须在单独的行中打印成分，但即使使用回车键，当我将文本区域的值传递给变量并打印它时，它也会出现在一行中。

以下是我的代码片段：

```
<div data-role="fieldcontain">
    <label for="name">Ingredients</label>
    <textarea rows="4" cols="50" id="new_ingredients">

    </textarea>
</div>

$( '#new_recipe' ).live( 'pagebeforeshow',function(event){
    var temp1 = $("#new_ingredients").val();
    $("#testing").text(temp1);
});

<div data-role="page" id="new_recipe">
    <div class="content" id="testing" ></div>
</div> 
```

请帮助我了解当用户按下回车键时如何获取不同行中的数据。提前谢谢您。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-09T06:37:48.157

用这个：

```
$("#testing").html(temp1.replace(/\n\r?/g, "<br />")); 
```

在文本区域中按“enter”键表示的字符用“\n”表示（有时也用“\n”表示`\r`）。但是当以 HTML 显示时，它们在视觉上只是一个空格。要显示这些换行符，需要将它们替换为等效的 HTML`<br />`元素。

由于`<br />`元素现在被添加到`#testing`元素的内容中，因此您需要使用`.html()`，而不是`.text()`。否则，HTML 将被转义，无法正常显示。

**演示：http:** [//jsfiddle.net/Wkbrn/2/](http://jsfiddle.net/Wkbrn/2/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-09T06:51:13.217

试试这个

```
<script src='http://code.jquery.com/jquery-latest.min.js'></script>
<div data-role="fieldcontain">
        <label for="name">Ingredients</label>
        <textarea rows="4" cols="50" id="new_ingredients">ingredient1&#13;&#10;ingredient2&#13;&#10
        </textarea>
        </div>

<script>
$(document).ready(function(){
var temp1 = $("#new_ingredients").html().replace(/\n/g,"<br>");;
 $("#testing").html(temp1);
})
</script>

<div data-role="page" id="new_recipe">
<div class="content" id="testing" ></div></div> 
```

我修改了脚本只是为了测试

# c# - Servicestack - 流利验证和请求过滤器的操作顺序

> ID：15894810
> 
> 赞同：2
> 
> 时间：2013-04-09T06:31:07.550
> 
> 标签：c#, servicestack, fluentvalidation

我们有一些请求过滤器，并且还利用了验证功能。

```
[AttributeUsage(AttributeTargets.Method, Inherited = true)]
public class MyFilterAttribute : Attribute, IHasRequestFilter
{
   ...
} 
```

在 AppHost 中：

```
 public override void Configure(Container container)
    {
        ....
        Plugins.Add(new ValidationFeature());
        ....
    } 
```

我需要在请求过滤器之后运行流畅的验证，因为一些过滤器将数据添加到然后验证的 dto。我已经看到[了操作顺序，](https://github.com/ServiceStack/ServiceStack/wiki/Order-of-Operations)但这并没有说明验证适合的位置……至少我没有看到。

任何帮助，将不胜感激。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-04-09T07:26:49.207

[ValidationFeature](https://github.com/ServiceStack/ServiceStack/blob/master/src/ServiceStack.ServiceInterface/Validation/ValidationFeature.cs)像 ServiceStack 中的大多数东西一样只是一个简单的[插件](https://github.com/ServiceStack/ServiceStack/wiki/Plugins)，可以通过转到[ServiceStack GitHub repo](https://github.com/ServiceStack/ServiceStack/)按“T”来激活[GitHub 的查找文件](https://github.com/blog/793-introducing-the-file-finder)功能并开始输入部分类名，例如`VFe`将带来[ValidationFeature](https://github.com/ServiceStack/ServiceStack/blob/master/src/ServiceStack.ServiceInterface/Validation/ValidationFeature.cs)直到第一个结果。

在[ValidationFeature](https://github.com/ServiceStack/ServiceStack/blob/master/src/ServiceStack.ServiceInterface/Validation/ValidationFeature.cs)中，您可以在该`IPlugin.Register(IAppHost)`功能中看到它是如何工作的：

```
public void Register(IAppHost appHost)
{
    if(!appHost.RequestFilters.Contains(ValidationFilters.RequestFilter))
        appHost.RequestFilters.Add(ValidationFilters.RequestFilter);
} 
```

如上所示，它只注册了一个[Global Request Filter](https://github.com/ServiceStack/ServiceStack/wiki/Serialization-deserialization)。[操作顺序](https://github.com/ServiceStack/ServiceStack/wiki/Order-of-Operations)指出全局请求过滤器在具有优先级的过滤器属性之后和[具有](https://github.com/ServiceStack/ServiceStack/wiki/Filter-attributes)优先级的`<0`过滤器属性之前执行`>=0`。

# c++ - 在函数之间的堆上传递数组时导致此运行时错误的原因，c++

> ID：15894813
> 
> 赞同：0
> 
> 时间：2013-04-09T06:31:25.113
> 
> 标签：c++, pointers, multidimensional-array, heap-memory

当我在接受双指针的函数之间传递在堆上声明的二维数组时，我无法解释为什么我的程序会挂起和崩溃。

我有一种强烈的感觉，它与我选择声明二维数组的方法有关。在我创建一个函数来分配数组之前，程序可以在传递给函数时操作数组内的数据。

所以这里是分配函数，然后是它在内部崩溃的函数：

```
void matrix_malloc(int **matrix, int m, int n);
void matrix_init(int **matrix, int m, int n);

int main(void)
{
  int **matrix;
  int m(3), n(2);

  matrix_malloc(matrix, m, n);
  matrix_init(matrix, m, n); // runtime error
}

void matrix_malloc(int **matrix, int m, int n)
{ // get heap memory
  int i;
  matrix = new int*[m];
  for(i = 0; i < m; i++)
  {
    matrix[i] = new int[n];
  }
}

void matrix_init(int **matrix, int m, int n)
{ // randomize matrix
  int i, j;
  for(i = 0; i < m; i++)
  {
    for(j = 0; j < n; j++)
    {
      matrix[i][j] = rand() % 10 + 1;
    }
  }
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-09T06:33:42.610

```
void matrix_malloc(int **&matrix, int m, int n);
void matrix_init(int **matrix, int m, int n);

void matrix_malloc(int **&matrix, int m, int n)
{ // get heap memory
  int i;
  matrix = new int*[m];
  for(i = 0; i < m; i++)
  {
    matrix[i] = new int[n];
  }
} 
```

并且应该运作良好。问题，因为在这之后

```
matrix = new int*[m]; 
```

矩阵有新地址，但由于它是指针的本地副本 - main 不知道它。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-09T06:33:48.830

`matrix_malloc()`需要通过引用获取指针：

```
void matrix_malloc(int **&matrix, int m, int n)
                         ^ 
```

没有这个，新分配的指针不会传播回调用者。

*也就是说，从函数返回*新分配的指针可能更明确：

```
int** matrix_malloc(int m, int n) 
```

最后，你不使用`std::vector`这个有什么原因吗？

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-04-09T06:33:50.173

您必须通过引用传递矩阵指针。

```
void matrix_malloc(int **matrix, int m, int n) 
```

这接受矩阵的副本。这意味着您在其中所做的任何事情都不会`matrix_malloc`影响.`matrix``main`

相反，它应该是

```
void matrix_malloc(int **& matrix, int m, int n)
                        ^^^ 
```

* * *

但是我建议你使用向量而不是原始指针和分配。这样您就不必担心分配和解除分配。

```
void matrix_malloc(vector<vector<int> >& matrix, int m, int n);

// You don't need this anymore.
// void matrix_init(int **matrix, int m, int n);

int main(void)
{
  vector<vector<int> > matrix;
  int m(3), n(2);

  // matrix_malloc(matrix, m, n);

  matrix_init(matrix, m, n); 
}

void matrix_init(vector<vector<int> >& matrix, int m, int n)
{ // randomize matrix
  int i, j;
  for(i = 0; i < m; i++)
  {
    vector<int> row;
    for(j = 0; j < n; j++)
    {
      row.push_back(rand() % 10 + 1);
      // matrix[i][j] = rand() % 10 + 1;
    }
    matrix.push_back(row);
  }
} 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-04-09T06:35:32.287

二维数组的分配很好。但。

```
 int **matrix;
  int m(3), n(2);

  matrix_malloc(matrix, m, n); 
```

在这里，矩阵不会改变 - 您正在*复制*它的值以将其传递给函数。我的意思是：

```
 int **matrix = NULL; // matrix points to null
  int m(3), n(2);

  matrix_malloc(matrix, m, n); // copy the value contained in matrix and give it to the function
  //matrix still points to null 
```

您有多种解决方案：

*   您的矩阵 malloc 可以返回一个 int**，您只需编写 matrix = matrix_malloc(m, n)
*   您的矩阵 malloc 可以将指针指向 int** （int*** - 小心处理）
*   正如其他答案中提到的，对 int** 的引用

* * *

这是带有 int*** 的 matrix_malloc 的样子。

```
//call it as follows:
matrix_malloc(&matrix, m, n);

void matrix_malloc(int ***matrix, int m, int n)
{
  // matrix contains the address of the original variable, so *matrix is the original variable itself.
  int i;
  *matrix = new int*[m];
  for(i = 0; i < m; i++)
  {
    (*matrix)[i] = new int[n];
  }
} 
```

# php - 在 Paypal 中显示订单号

> ID：15894816
> 
> 赞同：1
> 
> 时间：2013-04-09T06:31:30.270
> 
> 标签：php, paypal

我对多种产品使用标准的 Paypal 方法。我想在 Paypal 小部件中显示每笔交易的订单号。此订单号必须在 Paypal 小部件中对买家可见。有人能说如何向买家显示订单号吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-09T06:39:18.760

您可以附加自定义字段并传递订单号。

'< input type="hidden" name="custom" value="#你的订单号#" >'

# mysql - mysqlvb 初学者查询

> ID：15894818
> 
> 赞同：0
> 
> 时间：2013-04-09T06:31:43.943
> 
> 标签：mysql, vb.net

我正在使用 Vb.net 2010 和 MySQL。插入正在工作，但更新时出现问题。

```
con.Open()

Dim cmd As New Odbc.odbcCommand("update date1 set event_title='" + txteventtitle.Text + "',description='" + rchdescription.Text + "',calender='" + DateTimePicker1.Value.Date() + "')", con)

cmd.ExecuteNonQuery()

con.Close() 
```

此查询不会将我的记录更新到表中。作为我的初学者，我需要逐步更新查询。我没有使用任何数据网格来显示我的记录。

请帮我。谢谢你。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-09T08:19:35.743

删除查询中的右括号`+ "')"`。

# perl - perl 打印行为的混乱

> ID：15894819
> 
> 赞同：1
> 
> 时间：2013-04-09T06:31:43.913
> 
> 标签：perl, printing

我对“打印”功能的行为感到困惑。下面是我的代码：-

```
$var1 = "VARIBLE";
@arr = ();
push (@arr,$var1); 
```

当我在上面的代码中添加打印功能时，

```
print @arr; 
```

它给出“变量”作为输出。但是当我用下面的行替换上面的行时，

```
print @arr."\n"; 
```

它给出“1”作为输出。有人能告诉我到底发生了什么吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-09T06:34:55.520

这是因为您*正在* `@arr`与`\n`. 这实质上是说您希望将`@arr`其视为标量，以便可以将其连接到另一个标量，`1`在这种情况下，这是因为数组中有一个元素。有关上下文如何影响变量解释的更多信息，请参见[此处。](http://perldoc.perl.org/perldata.html#Context)

你可能想要的是：

```
print @arr, "\n"; 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-04-09T06:38:20.593

标量上下文中的数组给出数组中元素的数量：

```
print scalar @arr; #result is one for your array. 
```

可以使用`scalar`关键字显式指定标量上下文，如示例所示。但是，只要操作自然需要单个值，也会出现标量上下文。例如：

```
#A numeric comparison requires a single value, so this is scalar context.
if (@arr > 0) { print "array has elements" } 
```

字符串连接是一种操作，自然需要在 的每一侧都有一个值`.`，因此它会创建标量上下文并且您可以获得数组的大小。

在您的情况下，最简单的解决方案是使用逗号代替：

```
print @arr,"\n"; 
```

`print`接受参数列表并将它们全部打印出来，这就是`print @arr`首先起作用的原因。通过使用逗号添加另一个术语，您只是在将要打印的参数列表中添加了一个东西。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-09T06:53:28.280

正如之前的答案所说，它因上下文而有所不同：标量与数组。此外，还有第三句话可能对您来说很有趣：

```
my @array = qw(one two three);
print "@array", "\n";  #<-- observe the "" quotes;
#prints: one two three

print @array, "\n";  #<-- without quotes;
#prints: onetwothree 
```

这是因为双引号内的变量的字符串插值。数组插值通过特殊 perl 变量的内容来分隔项目`$"`（默认情况下，该变量的内容是空格）。如果没有插值，perl 将打印不带任何分隔符的数组内容。

`$"`允许您更改在打印中插入字符串的方式；例子：

```
{
   local $" = '-';
   print "@array", "\n";
   #prints: one-two-three
} 
```

# datepicker - XPages 中的 DatePicker：手写时禁用 onblur 事件

> ID：15894820
> 
> 赞同：0
> 
> 时间：2013-04-09T06:31:46.773
> 
> 标签：datepicker, xpages

当我在日期选择器字段中手动写入日期时，是否可以禁用日期选择器的打开？

这很吵，因为在这种情况下，当我在输入日期后离开该字段时，日期选择器会再次打开，要关闭我需要再次单击该字段，然后单击退出

谢谢

安德烈亚

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-09T08:38:37.490

你可以尝试一些 JS 魔法。在输入字段中的 keydown 上挂钩事件。当一个条目被取消链接触发日期选择器的事件时，如果该字段为空，则重新链接它。通过一些 Firebug 会话，您应该能够找出细则

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-10T12:19:07.223

我最近倾向于使用其他 JS 框架来输入日期/时间（主要是 jQuery，它在这个领域有很多直观的控件）。所以我将 Xpage 控件设置为***不***使用选择器对话框，而是使用“我自己的”。

# c# - 列表 内存不足异常

> ID：15894825
> 
> 赞同：1
> 
> 时间：2013-04-09T06:32:04.240
> 
> 标签：c#, list, out-of-memory

我想填写如下列表：

```
 List<string> list_lines = new List<string>();
    for (double num = double.Parse(txtStart.Text); num < 99999999; num++)
    {
        list_lines.Add(num.ToString());
    } 
```

但是这些代码会导致错误`33,554,432`和那个错误：
`Out Of Memory Exception`
我想使用那个列表，有什么替换它或者我该如何修复那个错误？

提前致谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-09T06:46:52.763

如果您可以用 IEnumerable 替换 List ，则可以使用以下方法

```
 static IEnumerable<string> Gen()
    {
        for (double num = 0; num < 99999999; num++)
        {
            yield return num.ToString();
        }
    } 
```

所以基本上你不分配内存，通过进一步的处理你必须记住你不能调用像 Gen().ToArray() 这样的东西，这会产生同样的问题。如果你需要列表，这是不可能的。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-09T06:36:39.637

你可以做一些内存优化，例如只做一次解析：

```
var parsed_number = double.Parse(txtStart.Text);

List<string> list_lines = new List<string>();
for (double num = parsed_number; num < 99999999; ++num)
{
    list_lines.Add(num.ToString());
} 
```

这可能有助于内存使用。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-09T06:34:26.673

你内存不够！
循环的每一步都保留内存。整个循环需要 [99999999 * 99999999/2 * sizeof(double)] B. 这个数字真的很大

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-04-09T06:46:35.610

如果您需要数字，请尝试使用以下代码：

```
int startNumber = int.Parse(txtStart.Text);
List<int> list_lines = new List<int>();

for (int i = startNumber; i < 99999999; i++)
{
    list_lines.Add(i);
} 
```

这将毫无问题地运行。如果您以后需要将数字作为字符串，只需在检索它们时将它们转换即可。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-11-07T07:49:12.627

我建议 John Willemse 的回答 - 任何时候整数都比字符串快..

只需在需要时转换为字符串 - 查看此链接以获得适合您的场景的最佳可能方法（转换）：

[将对象转换为 int 的更好方法](https://stackoverflow.com/questions/745172/better-way-to-cast-object-to-int)

# objective-c - SIGABRT 回到 MainViewController 时

> ID：15894828
> 
> 赞同：0
> 
> 时间：2013-04-09T06:32:06.307
> 
> 标签：objective-c, cocoa-touch, sigabrt

在我的应用程序中，当用户按下按钮时，我想在不同的视图上生成有关该主题的信息。例如，当用户按下 cat 按钮时，我想要一个新视图来显示标题和描述。但是，当他们按下 dog 时，它会转到相同的视图，但会更改信息。

**第一视图控制器.h**

```
#import "secondview.h"

@interface ViewController :UIViewController 
{
    secondview *secondviewData;
    IBOutlet UITextField *textfield;
}

@property (nonatomic, retain)secondview*secondviewData;

-(IBAction)passdata:(id)sender; 

@end 
```

**第一视图控制器.m**

```
#import "ViewController.h"
#import "secondview.h"

@implementation ViewController

@synthesize secondviewData;

-(IBAction)passdata:(id)sender 
{
    secondview *second = [[secondview alloc] initWithNibName:nil bundle:nil];  
    self.secondviewData = second; 
    secondviewData.passedValue = @"dog Info";
    [self presentModalViewController:second animated:YES];
}

@end 
```

**secondViewController.h**

```
@interface secondview :UIViewController 
{
    IBOutlet UILabel *label;  
    NSString *passedValue;
}

@property (nonatomic, retain)NSString *passedValue;

-(IBAction)back:(id)sender;

@end 
```

**第二视图控制器.m**

```
#import "ViewController.h"

@implementation secondview

@synthesize passedValue;

-(IBAction)back:(id)sender 
{
    ViewController *second = [[ViewController alloc] initWithNibName:nil bundle:nil];
    [self presentModalViewController:second animated:YES];
} 

- (void)viewDidLoad
{
    label.text = passedValue;
    [super viewDidLoad];
} 

@end 
```

当我执行这段代码时，它会出现`SIGABRT`

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-09T06:39:53.697

如果您的下一个视图与当前视图分离，您可以使用： ![在此处输入图像描述](https://i.stack.imgur.com/6wJru.png)

```
-(void)prepareForSegue:(UIStoryboardSegue *)segue sender:(id)sender
{
    if([segue.identifier isEqualToString:@"nextViewSegue"]){

        nextViewController *nextViewObj  = segue.destinationViewController;
        nextViewObj.someNSString = @"the string you wanna to pass";
    }
    else if ([segue.identifier isEqualToString:@"nextViewSegue2"]){
        otherNextViewController *otherNextViewObj  = segue.destinationViewController;
        otherNextViewObj.someNSString = @"the string you wanna to pass";
    }
} 
```

* * *

## --------------------------**还有另一种方法：** ------------------ ---------

您可以使用全局变量来传递参数。

创建一个类

。H

```
 @interface iXxxxxxGlobal : NSObject
    {
        NSString *globalString;

    }
    @property (nonatomic,retain)NSString *globalString;
    +(iXxxxxxGlobal *)getInstance;
    -(void) updateSetting;
    @end 
```

.m

```
#import "iXxxxxxGlobal.h"

@implementation iXxxxxxGlobal

@synthesize globalString;

static iXxxxxxGlobal *instance = nil;

+(iXxxxxxGlobal *)getInstance
{
    if(instance ==nil)
    {
        instance = [iXxxxxxGlobal new];
        // Get initial value from Preferences and Settings.
        // Use <<Preferences and Settings>> 

    }
    return instance;
}

-(void)updateSetting
{
    //Do something to update <<Preferences and Settings>> 
}

@end 
```

每次使用全局变量时，您只需要这样做：

```
iXxxxxxGlobal *iXxxxxxGlobalObj=[iXxxxxxGlobal getInstance];
iXxxxxxGlobalObj.globalString = @"your string";
NSString *localString = iXxxxxxGlobalObj.globalString; 
```

# mysql - JBOSS与多数据库连接（sql集群）

> ID：15894832
> 
> 赞同：0
> 
> 时间：2013-04-09T06:32:34.320
> 
> 标签：mysql, jboss, load-balancing, database-connectivity, securitydomain

1.  我想将 JBOSS 连接到多个数据库（具有故障转移恢复和负载平衡），即在第一个数据库连接失败的情况下，连接从一个数据库切换到另一个数据库。

2.  此外，每个数据库连接都有一组单独的用户 ID 和密码。

我几乎完成了第一部分，但仍然卡在第二部分。

我该怎么做？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-09T06:45:05.773

这不是应该做的。应该这样做，以便服务器（此处为 JBoss）连接到的只有一个前端实例，并将实际连接发送到它认为合适的任何 db 实例。

如何实现的细节取决于所使用的服务器。[由于您使用 mysql 标记了问题，因此您可能会对本教程](http://www.howtoforge.com/loadbalanced_mysql_cluster_debian)感兴趣，了解如何使用它设置这样的东西。

如果您坚持按照自己的方式进行操作，那么我看不出例如负载平衡将如何工作。JBoss 如何知道哪个服务器的负载更大？您如何知道何时应该激活故障转移？

如果您已经回答了这些问题，如您的问题所示，那么没有什么可以阻止您创建具有指向不同数据库的不同用户 ID 和密码的常规数据源。我只是认为这本质上是错误的方法。

# java - 在单元测试期间回滚自动生成的表值

> ID：15894835
> 
> 赞同：2
> 
> 时间：2013-04-09T06:32:38.450
> 
> 标签：hsqldb, java, spring, unit-testing, hsqldb, dbunit

我的单元测试配置是：JUnit、DBUnit、Spring。

在我的 Spring 上下文中，我有一个嵌入式数据库 - [hsqldb](/questions/tagged/hsqldb "显示标记为“hsqldb”的问题")

```
<jdbc:embedded-database id="dataSourceSpied">
    <jdbc:script location="classpath:test_ddl.sql"/>
</jdbc:embedded-database> 
```

我的单元测试带有以下类级注释：

```
@ContextConfiguration(locations = "classpath:/test-context.xml")
@RunWith(SpringJUnit4ClassRunner.class)
@Transactional
@TestExecutionListeners({DependencyInjectionTestExecutionListener.class,
        TransactionDbUnitTestExecutionListener.class,
        DbUnitTestExecutionListener.class}) 
```

我的测试架构有以下片段：

```
CREATE TABLE test(
  id  BIGINT GENERATED BY DEFAULT AS IDENTITY,
  name  VARCHAR(255) NOT NULL,
  ...
); 
```

`@Transactional`注释回滚我在单个单元测试方法中所做的任何更改，但**不会**清除`id`值！自动生成的`id`值不会重置，因此单元测试依赖于它们的运行顺序！

如何在测试期间重置 Spring 中自动生成的 HSQLDB 数据库字段？

* * *

也许`trucate`命令会有所帮助？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-09T14:53:37.303

在您的示例中，可以修改自动生成的 IDENTITY。

```
 ALTER TABLE test ALTER COLUMN id RESTART WITH 0 
```

请参阅指南：

[http://www.hsqldb.org/doc/2.0/guide/databaseobjects-chapt.html#dbc_table_manupulation](http://www.hsqldb.org/doc/2.0/guide/databaseobjects-chapt.html#dbc_table_manupulation)

# php - 为什么我们在 PHP 中将一些变量声明为“$_variablename”...？

> ID：15894839
> 
> 赞同：11
> 
> 时间：2013-04-09T06:32:59.153
> 
> 标签：php, oop, variables

为什么我们在 PHP 中声明一些变量为 like `$_variablename`？

`_`定义了什么？

请帮我解决这个问题，谢谢。

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2013-04-09T06:34:48.443

这是一个命名约定。

来自命名约定的[梨手册：](http://pear.php.net/manual/en/standards.naming.php)

> 私有类成员前面有一个下划线。例如：

```
$_status 
```

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2013-04-09T06:42:24.037

下划线并不意味着变量是私有的。没有必要使用下划线。它只是一个命名约定，提醒开发人员变量/属性/方法是私有的或受保护的

例如

```
// This variable is not available outside of the class  
private $_someVariable;  

class MyClass {  
   // This method is only available from within this class, or  
   // any others that inherit from it.   
   protected function __myFunction() {}  
} 
```

在上面的代码中，下划线并不是使变量或方法成为私有的原因；private/protected 关键字就是这样做的。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-09T06:40:51.130

在您的代码中使用“_”或“__”不是强制性的，但它可以帮助您通过查看名称来理解变量/函数访问类型。

在某些 PHP 框架中，您可能会看到：

```
_ for protected variable/function

__ for private variable/function 
```

* * *

## 回答 #4

> 赞同：-4
> 
> 时间：2013-04-09T06:52:05.157

this 主要用于声明全局变量和函数中.. 一般不强制使用 '_' this

[http://php.net/](http://php.net/)检查这个

# ios - iOS 计数 JSON 项目

> ID：15894840
> 
> 赞同：-6
> 
> 时间：2013-04-09T06:33:00.907
> 
> 标签：ios, json

我想计算从`JSONObjectWithData`.

```
id jsonObjects = [NSJSONSerialization JSONObjectWithData:receivedData options:NSJSONReadingMutableContainers error:nil];

NSLog(@"%@",jsonObjects); 
```

JSON 返回

```
{
detail = "\U0e19\U0e31\U0e01\U0e28\U0e36\U0e01\U0e29\U0e32";
email = "krol3ong8gs@gmail.com";
id = 1;
name = "\U0e13\U0e23\U0e07\U0e04\U0e4c\U0e0a\U0e31\U0e22 \U0e08\U0e34\U0e19\U0e14\U0e32\U0e1b\U0e23\U0e30\U0e01\U0e32\U0e22";
password = 9670f4c03767a65db8067d2b5cf2e6e4;
picture = "Thumbnails_2012-10-14_23-56-59.jpg";
username = asskyo001;
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-09T06:36:48.123

用这个

```
NSDictionary  *jsonObjects = [NSJSONSerialization JSONObjectWithData:receivedData options:NSJSONReadingMutableContainers error:nil];
NSLog(@"%d", [jsonObjects count]); 
```

# backbone.js - 使用 Backbone.Marionette 分组集合和视图

> ID：15894842
> 
> 赞同：2
> 
> 时间：2013-04-09T06:33:19.017
> 
> 标签：backbone.js, marionette

我有一个要按月分组的文档的主干集合，以便将在同一个月内创建的所有文档组合在一起。我知道我基本上可以通过以下方式实现这一目标：

```
var byMonth = documents.groupBy(function(doc){
  return this.get('date').getMonth()
}); 
```

既然我有了`byMonth`数组，那么设置主干视图的最佳方法是什么正确的组和视图相应更新？

PS。我还想显示每个月的汇总数据（例如，文档数量等）。

Marionette 的 CompositeView 非常适合此类事情，但我不确定是否以及如何使其与分组集合一起使用？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2014-09-22T19:16:46.300

我已经考虑了很多，并没有一个完美的答案，但这是我的笔记（脑力转储），以防它们帮助/激发你的任何新想法：

**显示（和自动更新）分为 3 个部分/组的集合的最佳方式，例如本周、下周和即将到来的**

1.  过滤View外的集合：在Controller中创建过滤后的子集合，每个CollectionView传一个。然后有 2 个用于修改集合的选项：
    *   a) 直接修改3个子集合
        *   优点：自动更新将起作用，CollectionView 中不需要过滤逻辑，emptyView 将起作用，在每个部分的顶部很容易计数。
        *   缺点：必须在我们可能想要修改它们的任何地方传递这 3 个集合，并且在添加/删除事件时有这个额外的逻辑：`if (event.time<next-week) {...} else if (event.time<upcoming) {...} else {...}`. 可以将所有这些抽象为一个新实体，该实体具有所有 3 个集合的引用，并具有包含上述逻辑的简单添加/删除方法。
        *   另一个缺点：项目不能在这些子集合之间移动，如果分组是特定时间的，这可能很关键。虽然我猜这只会在完全重新渲染时发生，所以你可以有一个 updateSubCollections 方法并调用它 onBeforeRender 或其他什么。
    *   B）仅修改父集合 - 需要主集合上的侦听器，用于在添加/删除时手动重新过滤控制器中的每个子集合，并手动重新渲染所有 3 个列表视图。
        *   优点：CollectionView 非常简单——没有过滤逻辑等，emptyView 可以正常工作，很容易在每个部分的顶部进行计数。
        *   缺点：你失去了自动更新的魔力（当一个集合发生变化时，它的 collectionView 会自动更新），并且每次都需要一个愚蠢的（昂贵的）重新渲染整个 collectionView
2.  过滤 View 内的集合：将完整集合传递给每个 CollectionView，并覆盖 appendHTML 方法（或 showCollection）以仅显示满足条件的集合。
    *   优点：获得自动更新的魔力，并且仍然只处理代码中任何地方的单个集合
    *   缺点：需要额外的逻辑才能在每个部分的顶部显示计数。是否需要一些额外的逻辑来显示空视图，并且可能会产生其他后果，因为我怀疑 CollectionViews 是为此而设计的......他们可能在后台使用所有 itemViews 做聪明的事情 - 它可能效率低下 - 需要研究。查看源代码并找到要覆盖的最佳（最高级别）函数以不打扰处理不相关的项目
3.  单视图选项：通过手动将每个视图附加到页面的右侧部分来过滤视图的 appendHtml() 函数内的集合。
    *   优点：所有逻辑都在一个地方，但可能不是正确的地方（CollectionView）。自动更新有效。仍然只处理代码中各处的单个集合。
    *   缺点：需要额外的逻辑才能在每个部分的顶部显示计数。需要为每个部分手动处理 emptyView，这并不难 - 在您的模板中只需定义包含空消息的所有部分，然后在 appendHtml 函数中，当您确定项目属于哪个部分时，只需在附加之前隐藏该部分的空消息。那么问题是如何在从集合中删除项目时隐藏空白部分。唯一的方法是侦听集合上的删除事件，并检查所有部分以查看它们是否为空？或者只是重新渲染整个事情。

当我第一次加入我现在的团队时，他们有一些实现选项 1B 的旧代码，我认为这很糟糕。然后，当我必须实现类似的东西时，我选择了选项 3，它有效，但随着时间的推移有点混乱。下次我想我会尝试选项 1A，但它目前未经测试......

让我知道你最后做了什么！

编辑：关于 Github 上 Marionette 项目的几个相关问题：

*   [CollectionView / CompositeView 应该有一个可选的过滤方法](https://github.com/marionettejs/backbone.marionette/issues/1596)
*   [添加过滤集合视图的功能](https://github.com/marionettejs/backbone.marionette/issues/183)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-09T19:31:37.217

您可以创建一个新的 byMonth 集合并绑定一个函数以在每次文档集合更改时重置它。

**控制器**

```
App.Controller = function(){
  this.documents = new DocumentCollection();
  this.byMonthCollection = new ByMonthCollection(); 
  this.byMonthView = new ByMonthView({collection: this.byMonthCollection});
}

_.extend(App.Controller.prototype, {
  start: function() {
    this.documents.bind("change", _.bind(this.groupByMonth, this));
    this.documents.fetch();
  },
  groupByMonth: function() {
    var grouped = documents.groupBy(function(doc){
                    return this.get('date').getMonth() }); 

    this.byMonthCollection.reset(grouped);
  }
} 
```

# c# - 在 .net 4.5 中使用 ClientWebSocket 时如何设置 User-Agent 和 Referer 标头？

> ID：15894844
> 
> 赞同：5
> 
> 时间：2013-04-09T06:33:31.750
> 
> 标签：c#, http-headers, websocket, .net-4.5, user-agent

使用的明显答案`ClientWebSocket.SetHeader`会引发异常，因为它是受保护的标头：

```
System.ArgumentException 发生
  Message=必须使用适当的属性或方法修改“User-Agent”标头。
参数名称：名称
  参数名称=名称
  堆栈跟踪：
       在 System.Net.WebHeaderCollection.ThrowOnRestrictedHeader（字符串 headerName）

```

异常字符串建议在其自身上使用属性/方法，`ClientWebSocket`但我找不到任何此类属性/方法。似乎此异常是为`HttpWebRequest`实际上具有此类属性的类设计的。

该代码不起作用：

```
ClientWebSocket socket = new ClientWebSocket();
// Will throw
socket.Options.SetRequestHeader("User-Agent", "SomeUserAgentString");
// Will throw
socket.Options.SetRequestHeader("Referer", "SomeReferer"]); 
```

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-04-12T16:28:25.053

看起来您不能设置这些属性，至少现在不能。您*也许*可以通过反射来做到这一点。

如果您仔细查看堆栈跟踪，您会发现 throwing 方法是`System.Net.WebHeaderCollection.ThrowOnRestrictedHeader`. [`System.Net.WebHeaderCollection`](http://msdn.microsoft.com/en-us/library/system.net.webheadercollection.aspx "WebHeaderCollection 类")是一个专门用于处理 HTTP 标头的名称值集合。如果您查看备注部分，您将看到以下内容：

> 一些常见的标头被认为是受限制的，它们要么由 API 直接公开（例如**Content-Type**），要么受系统保护且无法更改。

该列表同时具有列为受保护标头的`User-Agent`和`Referer`属性，并且无法设置，因为`ClientWebSocket`没有公开它。

尽管如此，如果您*绝对需要*设置这些标头，则需要找到您的私有引用（作为`WebHeaderCollection`您的属性`ClientWebSocketOptions`公开）并调用受保护的方法来设置标头。`Options``ClientWebSocket`[`AddWithoutValidate`](http://msdn.microsoft.com/en-us/library/system.net.webheadercollection.addwithoutvalidate.aspx "WebHeaderCollection.AddWithoutValidate")

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2019-05-15T07:57:28.093

看起来这是 .NET Framework 中的一个错误：

[https://github.com/dotnet/corefx/issues/26627#issuecomment-391472613](https://github.com/dotnet/corefx/issues/26627#issuecomment-391472613)

不幸的是，似乎即使 Joshua 建议的反射黑客也不起作用，因为在建立 websocket 连接时，作为 HTTP 交换的一部分再次执行验证：

[https://github.com/dotnet/corefx/issues/26627#issuecomment-361234413](https://github.com/dotnet/corefx/issues/26627#issuecomment-361234413)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2019-10-28T04:57:17.640

您可以使用反射来更改带有 HeaderInfo 的静态 Hashtable（WebHeaderCollection 使用的所有内部类）。

我的答案中的更多详细信息： [使用 System.Net.WebRequest 时无法设置一些 HTTP 标头](https://stackoverflow.com/questions/239725/cannot-set-some-http-headers-when-using-system-net-webrequest/58585845#58585845)

编辑：已确认此修复了 ClientWebSocket 问题并允许您设置 User-Agent 和 Referer。

* * *

## 回答 #4

> 赞同：-2
> 
> 时间：2018-09-11T09:24:53.967

我想我找到了一个“简单”的解决方案

如果您使用“.NET Core 2.2”（在 Windows 10 上）构建，则：

"socket.Options.SetRequestHeader("User-Agent", "SomeUserAgentString");"

不会扔。与所有其他受限标头相同。

所以要么它工作，要么它只是默默地失败。我无法测试和验证它是否有效，因为我不知道如何记录或查看请求标头。（有人知道吗？）

* * *

## 回答 #5

> 赞同：-5
> 
> 时间：2013-05-12T06:48:53.757

非常简单：

推荐人标头应该这样写：

HttpWebRequest objRequest()... objRequest.Referer = " [http://microsoft.com/simpleApp/](http://microsoft.com/simpleApp/)

# php - 使用 php 函数作为函数参数

> ID：15894846
> 
> 赞同：0
> 
> 时间：2013-04-09T06:33:41.143
> 
> 标签：php, function, argument-passing

我们可以在自定义函数参数中调用 php 函数吗？

**例子**

```
function customFunction(trim($args),addslashes($args_second))
{
    //other code
} 
```

这给出了`Parse error: syntax error, unexpected '(', expecting '&' or T_VARIABLE`错误。这是正确的方法吗？

我知道我可以在函数内部做到这一点，但为什么我不能这样做。？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-09T06:39:20.950

你想要做的事情是不可能用 php 做的。

> 信息可以通过参数列表传递给函数，参数列表是一个逗号分隔的表达式列表。参数从左到右进行评估。
> 
> PHP 支持按值传递参数（默认）、[按引用传递](http://www.php.net/manual/en/functions.arguments.php#functions.arguments.by-reference)和[默认参数值](http://www.php.net/manual/en/functions.arguments.php#functions.arguments.default)。还支持[可变长度参数列表。](http://www.php.net/manual/en/functions.arguments.php#functions.variable-arg-list)

[阅读更多](http://php.net/manual/en/functions.arguments.php)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-09T06:36:54.737

您不能在函数参数的定义中使用表达式。只有赋值运算符才能指定一个默认值。

这是不可能的，因为这些论点没有被“评估”。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-09T06:36:29.860

这就是语言的设计方式。您必须将这些调用放在您的函数定义中：

```
function customFunction($args,$args_second)
{
    $args = trim($args);
    $args_second = addslashes($args_second);

    //other code
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-04-09T06:37:26.033

正确的路：

```
function customFunction($arg1,$arg2) {
 $arg1 = trim($arg1);
 $arg2 = addslashed($arg2);
 //do
} 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-04-09T06:38:57.373

**不**，你不能在 php 中做到这一点。

你可以这样做。

```
 function customFunction($arg1, $arg2) {
    $arg1 = trim($arg1);
    $arg2 = addslashes($arg2);
    // use $arg1 and $arg2
  } 
```

# sql - 查询在sql server表中插入一条记录，如2013040900001

> ID：15894878
> 
> 赞同：0
> 
> 时间：2013-04-09T06:35:35.023
> 
> 标签：sql, sql-server, sql-server-2005

如何在 sql server 2005 表中插入带有格式化日期并附加自动递增数值的记录？

例如，如果今天的日期`2013-04-09 12:05:44.640`，那么我可以像`20130409`使用 `convert(varchar, getdate(), 112)`.

但我想插入一条记录，就像`2013040900001`接下来的那样`2013040900002`，`2013040900003`依此类推。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-09T07:05:14.727

生成系统范围的自动递增数字的一个很好的解决方案是通过为该任务设计的表格：

```
CREATE TABLE [AutoInc]
(
   [Number] INT IDENTITY (1,1) NOT NULL,
   [Col1] CHAR(1) NOT NULL
); 
```

然后在表中插入一个值并立即使用 ROLLBACK 将其删除：

```
BEGIN TRAN;
INSERT INTO AutoInc VALUES ('A');
ROLLBACK TRAN; 
```

这确保不使用空间（表将始终为空），但会创建数字（因为 IDENTITY 属性生成的值不参与事务）。然后，您可以使用 SCOPE_IDENTITY() 函数获取增量值并将其附加到您的日期：

```
INSERT INTO yourtable (yourcol) VALUES (convert(varchar, getdate(), 112) + RIGHT('000000000' + CAST(SCOPE_IDENTITY() AS VARCHAR(10)), 10)); 
```

# c++ - 在 C++ 中公开成员变量方法

> ID：15894881
> 
> 赞同：5
> 
> 时间：2013-04-09T06:35:49.867
> 
> 标签：c++, c++11

我有一个简单的`Object-Components`设计。就像是：

```
class Object1 : public Object
{
    Component1 _comp1;
    Component2 _comp2;
    ...
    ComponentN _compN;
}; 
```

是否可以在不创建调用内部方法的`public:`方法的情况下公开`Objects1`某些方法的方法？`ComponentK``Object1``ComponentK`

我需要一种简单的方法来执行此操作，因为每次我想公开某个`ComponentK`方法时都编写一个函数非常烦人。

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2013-04-09T06:40:07.653

不直接，不。您可以使用私有继承从组件继承而不是聚合它们（注意私有继承不表达**is-a**），然后通过`using`. 像这样的东西：

```
class Object1 : public Object, private Component1, private Component2, ..., private ComponentN
{
public:
  using Component1::function1();
  using Component1::function2();
  ...
  using ComponentN::functionM();
}; 
```

我并不是说这一定是最好的方法，但它是*一种*方法。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2020-07-04T13:39:49.567

您可以返回指向成员的指针；指针将归调用者所有，可以在不影响类成员的情况下删除：

```
// Example program
#include <iostream>
#include <string>

class Member {
    private:
        int size = 10;
    public:
        int getSize() {
            return size;
        };
};

class MemberContainer {
    private:
        Member member;
    public:
        Member * getMember () {
            return &member;
        };
};

int main()
{
  MemberContainer memberContainer;
  Member * memberPtr = memberContainer.getMember();
  std::cout << memberPtr->getSize() << std::endl;
  memberPtr = nullptr;
  delete memberPtr;
  Member * anotherMemberPtr = memberContainer.getMember();
  std::cout << anotherMemberPtr->getSize() << std::endl;
} 
```

这将输出：

```
10
10 
```

# android - Android - 处理应用程序中的用户不活动

> ID：15894884
> 
> 赞同：3
> 
> 时间：2013-04-09T06:36:13.780
> 
> 标签：android, android-layout, android-dialogfragment

我想检测我的 android 应用程序中的用户不活动。当用户登录应用程序时，一个线程将开始执行并检查时间间隔。登录应用程序后，如果用户与设备交互我需要重置时间，当用户没有与设备应用程序交互并且时间超过时，我需要显示一个对话框（DialogFragment）来提示用户。当用户单击对话框时，我需要再次重置时间。

在活动中，我们可以使用 onUserInteraction() 方法并重置时间。但是如果对话框（DialogFragment）显示在屏幕上的时间如何重置。

**我们也可以为这个概念使用后台线程，或者是否有任何其他方式来处理应用程序中的这种用户不活动。**

谢谢明杜斯

# video - 自动播放视频问题

> ID：15894885
> 
> 赞同：0
> 
> 时间：2013-04-09T06:36:15.353
> 
> 标签：video, vimeo, autoplay, vimeo-player

我在隐藏的 div 中嵌入了一个 vimeo 视频。当我单击一个链接时，会弹出带有花式框的视频，然后自动播放开始。

我的问题是在 Chrome 中，当我进入网站时视频直接开始播放，你可以在这里播放视频的背景音乐。

我将如何解决这个问题？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-25T18:16:41.893

有两种方法可以解决此问题：

1.  等待将 iframe 写入灯箱，直到用户单击打开它。
2.  `autoplay`从 iframe src 中删除并使用该函数[`play()`](https://developer.vimeo.com/player/js-api#methods)在灯箱打开时开始播放。

# actionscript-3 - 如何在 Actionscript 中锁定文件？

> ID：15894886
> 
> 赞同：0
> 
> 时间：2013-04-09T06:36:15.713
> 
> 标签：actionscript-3, locking, flash-cs5

使用 ActionScript 3.0，如何锁定文件？我想将我的高分写入文件并将游戏放在服务器上，但我不希望两个玩家同时提交他们的高分时出现问题。这种`openAsync()`方法`FileStream`够用吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-16T07:03:32.960

感谢 shaunhusain：

> 将您的项目放在网络服务器上时，SWF 文件会发送到客户端计算机并在那里进行处理，因此您的 Flash 应用程序/游戏的每个用户都会在他们自己的计算机上拥有自己的高分列表。为了处理提交的分数，您需要 PHP 之类的东西，相信 MySQL 会为您处理并发问题。其他服务器端语言和数据库同样可以正常工作，但我知道这两种语言和数据库都有很好的文档和免费的。

# windows-8 - 将数据存储在云端

> ID：15894887
> 
> 赞同：-1
> 
> 时间：2013-04-09T06:36:18.000
> 
> 标签：windows-8, cloud, data-storage, onedrive

我是 Windows 8 应用程序开发的新手。我想创建一个像这样在skydrive中存储数据的应用程序

```
<person>
     <name>XYZ</name>
     <geb>01.01.1992</geb>
     …
</person> 
```

我怎样才能做到这一点？我只找到一个版本来发送带有数组索引的值。如何将数据保存为 XML 或云中的 xml 或图片等整个文件？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-09T08:41:07.710

您可以使用 Azure 移动服务将数据作为表存储在云中。它是付费服务，您可以将其用于商业目的。这里有一些可能对你有帮助的帖子。

[宣布 Windows Azure 移动服务](http://weblogs.asp.net/scottgu/archive/2012/08/28/announcing-windows-azure-mobile-services.aspx)

[Windows Azure 移动服务 - 第 9 频道系列](http://channel9.msdn.com/Series/Windows-Azure-Mobile-Services)

[Windows Azure 移动服务 - MSDN 文档](http://msdn.microsoft.com/en-us/library/windowsazure/jj554228.aspx)

[Windows Azure 移动服务 - MSDN 示例](http://code.msdn.microsoft.com/windowsapps/site/search?f%5B0%5D.Type=Technology&f%5B0%5D.Value=Windows%20Azure%20Mobile%20Services&f%5B0%5D.Text=Windows%20Azure%20Mobile%20Services)

[Windows Azure 移动服务 - 官方网站](http://www.windowsazure.com/en-us/develop/mobile/)

# matlab - matlab如何找到直线的边缘点？

> ID：15894890
> 
> 赞同：0
> 
> 时间：2013-04-09T06:36:25.573
> 
> 标签：matlab

我在 Matlab 中绘制了一条线，我想找出我的线穿过边缘的坐标：

![在此处输入图像描述](https://i.stack.imgur.com/Tfyry.png)

有什么建议或意见吗？=) 我的函数 xy 限制是 -1 到 1。到目前为止，这是我的代码：

```
yp = -1 + (1-(-1)).*rand(1,2);
xp = -1 + (1-(-1)).*rand(1,2);
a = (yp(2)-yp(1)) / (xp(2)-xp(1));
b = yp(1)-a*xp(1);
xlim([-1 1])
ylim([-1 1])
xlims = xlim(gca);
ylims = ylim(gca);
y = xlims*a+b;
line( xlims, y ); 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-09T06:40:17.730

1.  求直线的方程，即：`y=a*x+b`
2.  使用下/上 y 限制求解 x，如果结果 x 在 x 限制内，则这是边缘点。
3.  使用左/右 x 限制求解 y，如果得到的 y 在 y 限制内，则这是边缘点。
4.  完毕

所以基本上限制内的结果点是下图中的绿点，限制外的结果点是红色点。

![在此处输入图像描述](https://i.stack.imgur.com/nPSui.png)

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-04-09T07:32:22.763

我想我自己解决了=）如果有人遇到这个问题，我是这样修改代码的：

```
yp = -1 + (1-(-1)).*rand(1,2);
xp = -1 + (1-(-1)).*rand(1,2);
a = (yp(2)-yp(1)) / (xp(2)-xp(1));
b = yp(1)-a*xp(1);
xlim([-1 1])
ylim([-1 1])
x = xlim(gca);
y = x*a+b;

for i = 1:numel(y)
    if y(i) < -1
        y(i) = -1;
        x(i) = (-b-1)/a;
    elseif y(i) > 1
        y(i) = 1;
        x(i) = (1-b)/a;
    end
end

line( x, y ); 
```

这似乎对我有用，我可以解决 Gunthers 图片中的“绿点”=）

# asp.net - Fullcalendar 事件，使用 MVC asp

> ID：15894900
> 
> 赞同：1
> 
> 时间：2013-04-09T06:36:40.277
> 
> 标签：asp.net, asp.net-mvc, events, fullcalendar

```
$(document).ready(function () {

$('#calendar').fullCalendar(
    {
        header:
        {
            left: 'prev,next today',
            center: 'title',
            right: 'month,agendaWeek,agendaDay'
        },
        editable: true,

        events: function (start, end, callback) {
            var event = [];
            event.push({
                title: 'Garten',
                start: '2013-06-10T00:00:00',
                allday: true
            });

            callback(event);
        }
    });

}); 
```

伙计们，这是一个事件示例，但我想要的是从数据库中提取事件，我正在使用 MVC 2 ASP.net 并且数据库在 ADO.Net 上，任何人都可以帮我举例说明如何提取数据

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-09T06:53:08.803

理想情况下，ASP.NET Web 服务应以 JSON 格式返回日历数据。请参考以下网址：[http ://arshaw.com/fullcalendar/docs/event_data/events_json_feed/](http://arshaw.com/fullcalendar/docs/event_data/events_json_feed/)

# actionscript-3 - AS3 Facebook API：访问令牌错误消息

> ID：15894901
> 
> 赞同：0
> 
> 时间：2013-04-09T06:36:42.700
> 
> 标签：actionscript-3, facebook-opengraph, mobile-application, facebook-as3-api

我正在使用 FacebookMobile API 在 FlashDevelop 中处理 ActionScript Air Mobile 项目，以获取和排序用户的朋友列表。我目前正在使用 FacebookMobile.batchRequest() 来获取我想要的信息，它工作正常。

工作代码：

```
var installedBatch:Batch = new Batch();
installedBatch.add("me/friends?fields=installed,name", handleFriendsList);
FacebookMobile.batchRequest(installedBatch); 
```

传递给 handleFriendsList() 的结果 JSON 对象包含用户朋友的列表。每个朋友都包含一个 id 和一个 name 字段。只有安装了应用程序的朋友才会包含设置为“true”的已安装字段。我想使用 FacebookMobile.api() 将其浓缩为一行，但是当我尝试时，我得到了错误。

尝试的代码：

```
FacebookMobile.api("me/friends?fields=installed,name", handleFriendsList); 
```

这应该会导致将相同的 JSON 对象传递给 handleFriendsList()，但是我收到一个错误，抱怨我没有活动的访问令牌。

错误：

```
message = "An active access token must be used to query information about the 
current user." 
```

奇怪的是，我只在 FacebookMobile.api() 中收到此错误，并且仅在我要求安装和名称字段时才会发生。当我只询问“我/朋友”而不指定已安装和名称字段时，FacebookMobile.api() 工作得很好。

有谁知道为什么会这样？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-09T21:55:17.720

尝试使用`params`参数发出请求。

```
FacebookMobile.api("me/friends", handleFriendsList, {fields:"installed,name"}); 
```

# java - java - 如何在通过java中的jsp显示的web驱动程序中断言java异常？

> ID：15894904
> 
> 赞同：0
> 
> 时间：2013-04-09T06:36:53.637
> 
> 标签：java, jsp, selenium-webdriver

我想在 web 驱动程序中断言异常消息，我通过 jsp 显示异常消息，如下所示。

```
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"    "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">       
<%@ page contentType="text/html;charset=UTF-8" language="java" %>     
<%@ page isErrorPage="true" import="java.io.PrintWriter" %>      

<html>      
<head>    
<title>Online Accounting Software</title>     
  <link type="text/css" rel="stylesheet" href="/stylesheets/main.css" />    
</head>     
<body>     

  <div class="wrapper">    
<div class="page-container">     
    <jsp:include page="/header.jsp" />    
    <jsp:include page="/mainMenuHeader.jsp" />     
 <div class="blocktenant">    
  <%     
      // unwrap ServletExceptions.    
      while (exception instanceof ServletException) {      
        exception = ((ServletException) exception).getRootCause();    
      }

      // print stack trace.     
      out.println(exception.getMessage());    
  %>   
  </div>   
  </div>     
</div>    

</body></html> 
```

但我无法使用 driver.getPageSource().contains(containString); 断言异常消息。我的消息是“com.veersoft.gwt.shared.VsException：名称'alice bob'已经存在。提供不同的名称”

任何建议都会很棒。

谢谢，MSNaidu..

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-09T07:06:28.420

我建议直接捕获如下消息：

```
String t = driver.findElement(By.cssSelector("div.page-container div.blocktenant")).getText();

Assert.assertEquals(t,message); 
```

你有 html 中的渲染吗？就像浏览器显示的一样。

# c# - C#中字符串连接中的内存分配

> ID：15894906
> 
> 赞同：2
> 
> 时间：2013-04-09T06:36:59.750
> 
> 标签：c#, memory, memory-management, string-concatenation

让，

```
string a = “Test”;
string b = “test 2”;
string c  = a + b 
```

c的输出是`"Testtest 2"`

我想知道内存是怎么分配的？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-09T06:45:05.527

# python - 如何加入这两个熊猫数据框？

> ID：15894909
> 
> 赞同：1
> 
> 时间：2013-04-09T06:37:09.030
> 
> 标签：python, join, dataframe, pandas

我无法将 DataFrame1 与 DataFrame2 连接起来，我怀疑这是由于其中一个具有 int64 索引而另一个具有字符串索引。如何将字符串索引也转换为 int64 索引（如果这确实是问题）？如果没有，如何合并这两个数据框？

数据框1

```
<class 'pandas.core.frame.DataFrame'>
Int64Index: 9943 entries, 10029934 to 9962359
Data columns:
face_area     9943  non-null values
image_area    9943  non-null values
ratio         9943  non-null values
dtypes: int64(3) 
```

数据帧2

```
<class 'pandas.core.frame.DataFrame'>
Index: 9412 entries, 10029934 to 9962359
Data columns:
1        9412  non-null values
2        9412  non-null values
name     9412  non-null values
class    9412  non-null values
dtypes: float64(2), int64(1), object(1) 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-09T06:46:43.713

```
DataFrame2['id'] = DataFrame2.index.map(int)
DataFrame2.set_index('id') 
```

这似乎已经解决了问题，我现在可以加入了。如果您有更优雅的解决方案，我仍然很乐意听到。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-09T07:08:03.340

你可以使用[`astype`](http://pandas.pydata.org/pandas-docs/dev/generated/pandas.DataFrame.astype.html)：

```
df.index = df.index.astype(int) 
```

例子：

```
In [1]: df1 = pd.DataFrame([[1, 2], [3, 4]], columns=['a', 'b'])

In [2]: df2 = pd.DataFrame([[1, 2], [3, 4]], columns=['c', 'd'], index=['0','1'])

In [3]: df2.index = df2.index.astype(int)

In [4]: df1.join(df2)
Out[4]: 
   a  b  c  d
0  1  2  1  2
1  3  4  3  4 
```

# java - Java - 没有类构造函数是不好的做法吗？

> ID：15894910
> 
> 赞同：13
> 
> 时间：2013-04-09T06:37:15.560
> 
> 标签：java, constructor, helper

我想创建一个处理格式的辅助类（即具有删除标点符号和类型之间转换的方法，以及重新格式化名称等）。这似乎不需要任何字段 - 它的唯一目的是让传递的东西转换并返回它们，重新格式化。省略构造函数是不好的做法吗？如果是这样，我的构造函数应该做什么？我正在查看[此链接](http://myprogrammingblog.com/2013/03/22/java-helper-class-bmi-calculator-lb-to-kg-converter-kg-to-lb-converter-feet-to-cm-converter-cm-to-feet-converter/)，并注意到它描述的类缺少构造函数。

* * *

## 回答 #1

> 赞同：40
> 
> 时间：2013-04-09T06:39:59.670

> 省略构造函数是不好的做法吗？

是的 - 因为除非您指定*任何*构造函数，否则 Java 编译器将为您提供与类本身具有相同可见性的构造函数。

假设你所有的方法都是静态的——这似乎很可能，除非你想要多态——你应该创建你的类`final`并给它一个`private`构造函数，这样其他开发人员就不会*意外地*创建你的类的实例，而那将毫无意义。在考虑 API 时，只要我可以消除开发人员做一些愚蠢的事情的能力，我就会这样做 :)

所以像：

```
public final class Helpers {
    private Helpers() {
    }

    public static String formatDate(Date date) {
        // etc
    }
} 
```

请注意，通过将多态性排除在等式之外，您还消除了为测试等改变这种行为的可能性。这可能很好——我不相信“永远没有静态”——但值得考虑。

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2013-04-09T06:39:48.807

任何拥有所有没有或不需要任何状态的方法的类都可以*通过将构造函数设为私有来自由地降低构造函数的可见性。*

**Java 中的示例[java.lang.Math](http://docs.oracle.com/javase/7/docs/api/java/lang/Math.html)类。**

与所有`java.lang.Math`与您的类做类似工作的*静态方法*一样，它们已经声明了构造函数，`private`这样任何人都不会意外地创建该类的实例。

```
 /**
     * Don't let anyone instantiate this class.
     */
    private Math() {} 
```

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2013-04-09T06:40:10.043

不错的做法。但是您给出的示例没有任何可以在 Object 上下文中使用的成员变量。在这种情况下，最好使用静态方法，因为这样您就不需要在调用方法之前分配内存来为类创建对象。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-04-09T06:41:44.797

编译器将为您生成一个默认构造函数（不带参数）。如果你的类没有状态并且没有扩展一个需要初始化的类，你可以让它在不声明显式构造函数的情况下

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2013-04-09T06:43:19.087

省略构造函数是不好的，因为您的类中没有任何实例变量！

构造函数用于初始化实例变量！

仍然如果你跳过构造函数，编译器无论如何都会插入默认构造函数，这很公平！

* * *

## 回答 #6

> 赞同：-2
> 
> 时间：2013-04-09T06:40:43.420

通常在类中定义构造函数是一种很好的编码习惯，尽管每个类都有一个默认构造函数。

但是，如果您没有任何特殊需要使用重载构造函数或制作任何单例模式，那么您可以删除构造函数。

如果您在您的情况下使用静态方法，那么您也不需要定义构造函数，因为您不需要拥有此类的对象。

# data-structures - 关于帕特里夏的困惑

> ID：15894912
> 
> 赞同：-4
> 
> 时间：2013-04-09T06:37:17.063
> 
> 标签：data-structures, patricia-trie

根据[libstdc++ 文档](http://gcc.gnu.org/onlinedocs/libstdc++/ext/pb_ds/trie_based_containers.html)的第 3 点和第 4 点，PATRICIA 尝试有两种类型的节点：

> (PATRICIA) trie 类似于树，但有以下区别：
> 
> 1.  它明确地将键视为一系列元素。例如，trie 可以将字符串视为字符序列；trie 可以将数字视为位序列。
>     
>     
> 2.  它不是（必然）二进制。每个节点都有 n + 1 个扇出，其中 n 是不同元素的数量。
>     
>     
> 3.  它仅在叶节点存储值。
>     
>     
> 4.  内部节点具有以下属性：A）每个都至少有两个子节点，B）每个节点都与其任何后代共享相同的前缀。

我一直在阅读的书（Algorithms in C, Parts 1-4 by Robert Sedgewick）似乎描述了一个 PATRICIA trie，它只使用 n 个节点存储 n 个值，使用内部节点来存储值：

> 与 DST 一样，patricia 尝试允许在只有 N 个节点的树中搜索 N 个键。...我们通过另一个简单的设备避免外部节点：我们将数据存储在内部节点中，并将指向外部节点的链接替换为指向树中正确内部节点的链接

这里似乎有两个信仰阵营：

1.  一方面，我们有一个严格、具体的定义（即 Sedgewick、Knuth、Morrison，他们似乎都将 PATRICIA 专门描述为一棵消除了单向分支的前缀压缩二叉树）；和
2.  然后我们有一些人认为该术语形成了一个松散、模糊的定义，这似乎更像是他们的意思是使用像“map”、“dictionary”或“trie”这样的词（这些实际上都是松散定义的，即 libcs​​td++ 文档）。

我想我担心我的资源的准确性。据我了解，由于常见前缀引入的问题，不可能在不将其呈现为二叉树的情况下表示只有 N 个节点的树（这似乎违反了 libcs​​td++ 文档的第 2 点，以及处理变量时的第 4 点-width 键），并且不失严格单向分支的概念（违反第 3 点和第 4 点，使“叶节点”和“子节点”的概念有些无效）。这两个功能协同工作以消除“内部节点”的困境，这将导致此类树使用超过 N 个节点（回想一下：N 个项目与 N 个节点）。

这两组参考文献不可能都正确；有太多的相互排斥。如果一个参考说 PATRICIA 是二元的，另一个说它可能不是，它们不能都被认为是事实正确的，这只是我在这里看到的不一致的一个例子。这些引用中哪些是正确的？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-04-09T14:17:22.383

我继续从过去有信誉的来源中寻找一个具体的定义来证实我的怀疑，我写信是为了提供我的发现。也许最重要的是定义 PATRICIA 的官方论文，该论文由 Morrison 博士在 1968 年 10 月的“Journal of the ACM”中发表：

> PATRICIA 由“A Library Automaton”[3] 等研究演变而来。... 在这一演变的早期，人们决定将字母表限制为二进制。一个对这个决定产生强烈影响的定理是一个在另一种形式中归因于欧拉的定理。该定理指出，如果字母表是二进制的，则分支数正好比端数少一。推论指出，随着图书馆的发展，每一个新的末端都会带着一个新的分支进入图书馆，而每个分支恰好有两个出口。这些事实在为索引分配存储时非常有用。它们暗示所需的总存储空间完全由端数决定，并且所有所需的存储空间都将实际使用。

这肯定与 libstdc++ 参考的第 2 点和第 3 点相矛盾。本文中还有进一步的证据，例如具体的算法细节，但上面的引用就足够了。

然而，似乎与 Sedgewick 报价中的官方描述没有任何偏差。基于此，libstdc++ 资源肯定不如 Sedgewick 资源有效。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-09T08:02:42.073

虽然这两个定义似乎都是正确的，但第一个更详细，对我来说似乎更好。也看看[这个答案](https://stackoverflow.com/questions/14708134/trie-data-structure-and-radix-tree/14708989#14708989)，我试图描述帕特里夏和普通特里之间的区别。

# sql - 我需要设置为引用其他表中的复合主键之一的外键

> ID：15894914
> 
> 赞同：2
> 
> 时间：2013-04-09T06:37:22.017
> 
> 标签：sql, sql-server, sql-server-2008, ssms

我有 3 个带有复合主键的表，我需要设置为外键，它引用其他表中的一个主键。

IE，

*   **表1**：商家（mId，mName，addid，..）pk（mId，addId）。
*   **表 2** : 地址(addId,name..) pk(addId)
*   **表 3**：存储（storeId，addId，mId，storename，..）pk（storeId，addId，mId）

`mId`在表存储中是`mId`商家表主键的外键， `addId`在 tbl 存储中是表地址中主键的外键。

这种关系是如何使用 gui 在 sql server management studio express 中设置的？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-09T06:49:21.287

您的约束可以像这样工作，即以级联方式：

```
alter table store add constraint FK_store_merchant foreign key (mId, addId) references merchant (mId,addId)
alter table merchant add constraint FK_merchant_address foreign key (addId) references address (addId) 
```

不确定如何在 GUI 中执行此操作，但只需从查询窗口运行即可。

# c++ - 单例构造函数失败 c++ - 可能是什么？

> ID：15894917
> 
> 赞同：1
> 
> 时间：2013-04-09T06:37:29.703
> 
> 标签：c++, exception, mfc, singleton, mutex

我实际上面临一个巨大的问题：我有一个单例课程。我的程序是一个多线程的MFC，所以可以从不同的线程调用单例的构造函数。我用互斥锁包围了单例实例获取函数，以避免死锁和多重构造。下面的意思是函数的调用在第一次直接失败。

该函数看起来像（LOG_MSG 宏将给定的字符串记录到我的日志文件中）：

```
MyClass& MyClass::singleton ()
{
    LOG_MSG("MyClass::singleton -> jump in");

    static CMutex oInitMutex;
    try
    {
        CSingleLock oSingleLock((CSyncObject *) &oInitMutex, TRUE);
        LOG_MSG("!!! SINGLETON LOCK OKAY !!!");
        static MyClass oMyClassInstance;
        LOG_MSG("!!! SINGLETON CONSTRUCTION OKAY !!!");
        return oMyClassInstance;
    }
    catch(...)
    {
        CString excMsg("Unexpected exception by creating MyClass singleton instance!");
        LOG_MSG(excMsg);
        throw excMsg;
    }
} 
```

我发现，单例对象的构造不会失败（因为我们得到“！！！单例构造OKAY !!!”消息）。

日志输出说：

```
09.04.2013 ;07:14:51:832;"MyClass::singleton -> jump in"
09.04.2013 ;07:14:51:841;"!!! SINGLETON LOCK OKAY !!!"
... (constructor logs => NOTHING unexpected in it!!! everything runs fine, as they must!!!)
09.04.2013 ;07:14:52:125;"!!! SINGLETON CONSTRUCTION OKAY !!!"
09.04.2013 ;07:14:52:170;"Unexpected exception by creating MyClass singleton instance!" 
```

这是什么意思？*return*语句什么时候会抛出异常？？？请帮我解决这个问题...

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-04-09T06:49:18.350

虽然这不能回答您的特定问题，但它仍然是您整体问题的解决方案：您根本不需要互斥锁*。*C++11 标准 [stmt.dcl]§4 指定（在讨论`static`函数的局部变量时）：

> 如果在变量初始化时控制同时进入声明，则并发执行将等待初始化完成。^(88)如果在初始化变量时控制以递归方式重新进入声明，则行为未定义。

注释 88 是：

> 注 88：实现不能在初始化程序的执行中引入任何死锁。

换句话说，编译器为你引入了同步；无需手动执行此操作。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-10T07:10:42.550

**解决方案：**

> 我发现了问题，这并不容易。从我的错误中吸取教训，我将分享代码，导致失败。
> 
> 在构造函数中，我以不正确的方式使用`sscanf`函数调用：
> 
> ```
> const char* sBuffer;
> // some stuff here that fills the sBuffer up
> sscanf(sBuffer, "%X %X %X %X", &tags_[0], &tags_[1], &tags_[2], &tags_[3]); 
> ```
> 
> 该数组在单例类中定义为：
> 
> ```
> private:
>     char tags_[4]; 
> ```
> 
> 当心：格式代码等待特定类型的变量才能写入数据。例如：在我的情况下，`tags_`数组应该是整数数组而不是字符数组。由于单例类应该存储`tags_`，在索引第二个、第三个和第四个元素后，`sscanf`函数将写入一个未定义的内存位置，静态类的数据将被覆盖，这会导致它的多次实例化，但是：这可以可以通过互斥来避免，但在这种情况下，互斥对象将被覆盖。有关 (s)scanf 所需类型的更多信息，请参见[此处](http://www.cplusplus.com/reference/cstdio/scanf/)和[此处](http://www.cplusplus.com/reference/cstdio/sscanf/)。

**结论：**

> 要聪明并注意使用 C 函数/低级调用。非常注意输入参数，不仅是它们的值，还有它们的类型。如果您按预期支持其他类型，您的程序的行为将是未定义的，但您不会得到编译器错误：以后很难发现这个问题。

# delphi - Delphi XE2，vcl样式重新创建窗口句柄

> ID：15894918
> 
> 赞同：6
> 
> 时间：2013-04-09T06:37:29.873
> 
> 标签：delphi, delphi-xe2, vcl-styles

在运行时应用新样式后，我的应用程序的 MainForm 会创建一个新的窗口句柄 - 有没有办法停止此操作或重新分配句柄，因为我收到大量以下错误：

'系统错误。代码：1400。无效的窗口句柄'

有什么方法可以操纵强制分配新句柄的过程？

我通过以下方式解决了这个问题：

我的主窗体创建了一个从未显示的看不见的“帮助器”窗体，但它确实有可视组件 - 它在尝试重绘这些可视组件时抛出句柄错误，所以我用对象替换了相关组件（注意我最初没有编写此代码）。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-04-09T12:53:33.800

没有办法避免重新创建窗口句柄。相反，请覆盖您的窗口`CreateWnd`和`DestroyWnd`方法，以便在重新创建窗口时通知您。

此外，避免保持对可能被破坏的窗口句柄的持久引用。相反，请在`Handle`每次需要时阅读该属性。这样您就不必关注通知了。

但是，请注意从不同的线程读取`Handle`，因为它可能会导致窗口与错误的线程相关联。将需要与 VCL 窗口交互的任何代码包装到您通过`Synchronize`或调用的方法中`Queue`。

# wso2 - 如何比较 wso2 esb 中的属性值？

> ID：15894927
> 
> 赞同：3
> 
> 时间：2013-04-09T06:38:06.273
> 
> 标签：wso2, wso2esb

我如何比较 wso2 esb 中的属性值，即我想做过滤操作，如果`property2.value== property1.value`那么它应该做进一步的处理，否则它应该下降。但是如何做到这一点我没有得到？请帮忙。提前致谢。

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-04-10T07:30:10.313

这是一个与属性进行比较并执行两个过滤器的序列示例：

```
<property name="propertyA" value="'abc'"/>
<log level="custom">
    <property name="propertyA" expression="get-property('propertyA')"/>
</log>
<property name="propertyB" value="'abc'"/>
<log level="custom">
    <property name="propertyB" expression="get-property('propertyB')"/>
</log>
<property name="propertyCompare" expression="get-property('propertyA') = get-property('propertyB')"/>
<log level="custom">
    <property name="propertyCompare" expression="get-property('propertyCompare')"/>
</log>
<filter  source="get-property('propertyCompare')" regex="true">
    <then>
        <log level="custom">
           <property name="filterA" expression="'worked'"/>
         </log>
    </then>
</filter>
<filter  xpath="get-property('propertyA') = get-property('propertyB')">
    <then>
        <log level="custom">
           <property name="filterB" expression="'worked'"/>
         </log>
    </then>
</filter> 
```

# javascript - 将 Adfly 广告改为 js

> ID：15894931
> 
> 赞同：-1
> 
> 时间：2013-04-09T06:38:23.313
> 
> 标签：javascript

我试图将其注入 JS 文件。

```
<script>
var adfly_id = 3793905;
var adfly_advert = 'banner';
var frequency_cap = 5;
var frequency_delay = 5;
var init_delay = 3;
</script>
<script src="adf.ly/js/entry.js"></script> 
```

只需将其添加到我的页面即可加载它。

```
<script type="text/javascript" src="http://server.com/adfly.js"></script> 
```

是否可以？因为我没有运气。

我尝试这一切...

```
document.write('<script type="text/javascript">var adfly_id = 3793905;var adfly_advert = 'int';var frequency_cap = 5;var frequency_delay = 5;var init_delay = 3;</script><script src="cdn.adf.ly/js/entry.js"></script>'); 
```

--

```
var adfly_id = 3793905;
var adfly_advert = 'int';
var frequency_cap = 4;
var frequency_delay = 5;
var init_delay = 3;
src="cdn.adf.ly/js/entry.js" 
```

和

```
var sc = document.createElement('script');
sc.src = "adf.ly/js/entry.js"
document.body.appendChild(sc);
unsafeWindow.adfly_id = 3793905;
unsafeWindow.adfly_advert = 'int';
unsafeWindow.frequency_cap = 5;
unsafeWindow.frequency_delay = 5;
unsafeWindow.init_delay = 3; 
```

它适用于任何这些代码。谁能帮我谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-09T06:44:38.353

您非常接近最后一段代码。

存在的问题是您没有定义脚本类型，`body`而是将其放在`head`.

这是 Google 为 DFP 所做的改编副本：

```
var ads = document.createElement('script');
ads.async = true;
ads.type = 'text/javascript';
var useSSL = 'https:' == document.location.protocol;
ads.src = (useSSL ? 'https:' : 'http:') + '//adf.ly/js/entry.js';
var node = document.getElementsByTagName('script')[0];
node.parentNode.insertBefore(ads, node); 
```

# c# - 如何在 C# 中过滤两个数据表？

> ID：15894934
> 
> 赞同：-1
> 
> 时间：2013-04-09T06:38:28.147
> 
> 标签：c#, filter, datatable

如何在 C# 中过滤两个表？表一包含全部数据，表二包含表一的一些内容？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-09T06:45:40.233

你到底想做什么（从你的问题中不清楚）？取table1，过滤，然后把结果传给table2？然后：

```
DataView dv = table1.AsDataView();
dv.RowFilter = fexpression; // for example "MyID = 3"
DataTable table2 = dv.ToTable();

// If you want typed datatable, you can do it like this (although there are other ways):
MyTypedDataTable table2 = new MyTypedDataTable();
DataTable tempTable = dv.ToTable();
table2.Merge(tempTable); 
```

# listview - 参数在 vb6 中不是可选的

> ID：15894938
> 
> 赞同：1
> 
> 时间：2013-04-09T06:38:42.587
> 
> 标签：listview, ms-access, vb6, runtime-error

为什么我会收到此错误？这段代码是对的，但为什么呢？

```
Private Sub loadEmployee()
With frmEmployee.lvEmployee.ListItems
Call connect
'SQL = "SELECT * FROM tblemployee "
Rs.Open "SELECT * FROM tblemployee ", Conn, adOpenDynamic, adLockOptimistic
  If Not Rs.EOF Then
    Rs.MoveLast
    Set Item = lvEmployee.ListItems.Add(1, , Rs!id)
        Item.SubItems(2) = Rs!firstname
        'Item.SubItems(2) = Rs!middlename
        Item.SubItems(3) = Rs!lastname
        Item.SubItems(4) = Rs!agename
        Item.SubItems(5) = Rs!gender
        Item.SubItems(6) = Rs!address
        Item.SubItems(7) = Rs!datehired
        Item.SubItems(8) = Rs!birthdate
        Item.SubItems(9) = Rs!birthplace
        Item.SubItems(10) = Rs!citizenship
        Item.SubItems(11) = Rs!cellno
        Item.SubItems(12) = Rs!Status
        Item.SubItems(13) = Rs!basicsalary
        Item.SubItems(14) = Rs!designation
        Item.SubItems(15) = Rs!department
        'Item.SubItems(16) = Rs!m_name
        'Item.SubItems(17) = Rs!m_occupation
        'Item.SubItems(18) = Rs!n_spouse
        'Item.SubItems(19) = Rs!dependents
        'Item.SubItems(20) = Rs!SSS
        'Item.SubItems(21) = Rs!PHILHEALTH
        'Item.SubItems(22) = Rs!PAGIBIG
        Item.EnsureVisible
  End If
  Rs.Close
  Conn.Close
  Set Conn = Nothing
 End With
End Sub 
```

错误：

```
Arguments not optional 
```

这个真的很难受。调用时出现此错误。我这样调用：

```
Private Sub Form_Load()
loadEmployee
End Sub 
```

如何解决这个问题？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-09T08:17:56.803

你申报了`Item`吗？

尝试声明：

```
Dim Item as listitems 
```

# c# - Kinect Fusion 获取位置

> ID：15894945
> 
> 赞同：0
> 
> 时间：2013-04-09T06:39:00.427
> 
> 标签：c#, kinect

所以我使用了 Kinect fusion，我在一些视频和他们的研究论文中看到的一件很酷的事情是，你可以跟踪/估计 kinect 的位置。我试图找到某种方法来做到这一点，但不幸失败了。

有人对此有经验吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-22T13:42:18.480

我通过使用 worldToCamera Matrix4 解决了这个问题。

它可以将任何网格点转换为正确的相机坐标。

# .net - Mono.Cecil 导入列表枚举器

> ID：15894947
> 
> 赞同：1
> 
> 时间：2013-04-09T06:39:03.090
> 
> 标签：.net, mono, mono.cecil

我正在用 Mono.Cecil 做一些 IL 编织，我遇到了这个问题：

```
Member 'System.Collections.Generic.List`1/Enumerator' is declared in
another module and needs to be imported 
```

您如何导入具有列表枚举器的模块？

我有一个`TypeReference`(System.Collections.Generic.List`1< blah >) 用于获取枚举器，如下所示：

```
var instanceType = (typeReference as GenericInstanceType);
var list = instanceType.Resolve();

MethodDefinition getEnumerator;
if (!list.TryGetMethod("GetEnumerator", out getEnumerator))
    throw ... 
```

...在哪里`TryGetMethod`是一个自定义扩展，它在相关类型中搜索具有该名称的方法。

然后我在代码中进一步使用 getEnumerator，如下所示：

```
instructions.Add(Instruction.Create(OpCodes.Callvirt, getEnumerator)); 
```

我究竟做错了什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-10T05:59:33.350

I figured it out. To get an enumerator for a list, you need to get a `MethodReference` for the `GetEnumerator` method, like so:

```
Type listType = typeof (List<>);

MethodReference getEnumerator = moduleDefinition
    .Import(listType.GetMethod("GetEnumerator")); 
```

# ruby-on-rails - 将序列化哈希转换为模型属性

> ID：15894948
> 
> 赞同：0
> 
> 时间：2013-04-09T06:39:03.103
> 
> 标签：ruby-on-rails, ruby, delegates

我的 ActiveRecord 模型上有一个序列化数据，我想将某些属性委托给它。像这样的东西：

```
class Object < AR::Base
  serialize :data
  delegate :title, to: :data
end 
```

但这当然不适用于哈希。还有其他方法吗？

我最终想要的是这个。我给 ActiveRecord 模型一个符号列表：

```
[ :title, :size, :color ] 
```

它们被转换为 getter 和 setter，如下所示：

```
def title
  data[:title]
end

def title=(val)
  data[:title]= val
end 
```

它们显示在其余的 AR 属性旁边：

```
#<Model id: 21, title: "Foo", size: 4, color: nil> 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-09T07:20:46.697

您正在寻找[`store`](http://api.rubyonrails.org/classes/ActiveRecord/Store.html)：

```
class User < ActiveRecord::Base
  store :settings, accessors: [ :color, :homepage ]
end

u = User.new(color: 'black', homepage: '37signals.com')
u.color                          # Accessor stored attribute
u.settings[:country] = 'Denmark' # Any attribute, even if not specified with an accessor 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-09T06:46:16.783

您可以使用通用 method_missing ：

```
def method_missing(m, *args, &block)  
  if delegates.include?(m)
    return data[m]
  end
  super(m, *args, &block)
end 
```

将为对象上不存在的每个方法调用[缺少的方法，因此您可以查看该方法是否是您要委托的方法之一。](http://www.ruby-doc.org/docs/ProgrammingRuby/html/ref_c_object.html#Object.method_missing)

# php - 从 mongodb 到带有对象的数组

> ID：15894954
> 
> 赞同：0
> 
> 时间：2013-04-09T06:39:19.557
> 
> 标签：php, mongodb, mongodb-php, mongodb-query

这必须是更好的方法吗？我想从声音集合中获取所有文档，并将它们与**包含对象的数组一起**输出（将其用于主干.js）。**它不能是一个有物体的物体！**

```
$sounds = iterator_to_array($db->sounds->find());

    $a = "[";

    foreach ($sounds as $id => $sound) {
        $a .= json_encode($sound) . ",";
    }

    //remove the last comma...
    $a = substr($a, 0, -1);
    $a .="]";

    echo $a; 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-09T06:54:06.157

你可以试试：

```
$sounds = iterator_to_array($db->sounds->find());
echo json_encode(array_values($sounds)); 
```

[`array_values`](http://php.net/manual/en/function.array-values.php)将关联数组的值作为索引数组返回，因此[`json_encode`](http://www.php.net/manual/en/function.json-encode.php)将以您想要的格式返回 json 编码字符串（即 javascript 数组而不是 javascript 对象）。

# c# - 同时使用 Response.Write 和 Response.Redirect

> ID：15894957
> 
> 赞同：1
> 
> 时间：2013-04-09T06:39:26.977
> 
> 标签：c#, asp.net, .net, asp.net-mvc

下面是 Asp.net mvc 代码，

```
 public void Index()
        {
            Response.Write("Hey");
            Response.Redirect("https://www.google.com");
        }

 OR

 public void Index()
        {
            Response.Redirect("https://www.google.com");
            Response.Write("Hey");
        } 
```

在这里，重定向有效，但 Write() 无效。为什么优先考虑重定向？我的意思是为什么在 http 响应中使用 302 而不是 200。

注意：这不是为了解决任何实时场景。只是好奇地知道原因或潜在的行为。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-09T06:50:21.360

Respose.Write 正在工作，但是当您执行 Redirect 时，服务器会发送带有标头的响应：

> HTTP/1.1 302 对象移动
> 
> 服务器：Microsoft-IIS/5.0
> 
> 位置：某处/newlocation.aspx

然后浏览器向某处/newlocation.aspx 发起另一个请求（假设它支持重定向），将其内容加载到浏览器中。

无论如何，如果响应流被缓冲（“嘿”），您将使用 Response.Redirect 覆盖此响应。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-09T06:50:33.320

这里没有优先考虑 Redirect ，您在同一个函数中同时调用 Responce.Write 和 Responce.Redirect ，然后在写入页面后直接重定向到您给定的 url。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-09T07:15:25.757

如果您有一些需要执行此类操作的真实场景，您可以在代码隐藏/控制器中执行 Response.Write（取决于您使用的是 WebForms 还是 MVC）并在HTML 页面的正文：

控制器：

```
public void Index()
{
    Response.Write("Hey");
} 
```

HTML：

```
<%
//response would show here
%>
<head>
    <meta http-equiv="refresh" content="10; url=https://www.google.com" />
</head> 
```

# actionscript-3 - 为什么这个方法会导致 Flash 在没有被调用的情况下崩溃？

> ID：15894958
> 
> 赞同：0
> 
> 时间：2013-04-09T06:39:28.727
> 
> 标签：actionscript-3, flash

我有一个名为 OESDatePicker 的类，顾名思义，它是一个日期选择器。

我的类中有这个方法返回一个包含工作日名称的精灵：

```
private function DrawWeekDays():Sprite
    {
        var temp:Sprite = new Sprite();
        var wds:Array = new Array();
        var format:TextFormat = new TextFormat();
        format.font = "Tahoma";
        format.align = TextFormatAlign.CENTER;
        format.size = 11;
        format.color = 0xffffff;

        trace("HERE");
        /*for( var i:int = 0; i < 7; i++ )
        {
            trace(i);
            wds[i] = new TLFTextField();
            /*wds[i].width = CELL_SIZE;
            wds[i].defaultTextFormat = format;
            if( "en" == lang )
            {
                wds[i].text = day_names_en[i];
            }
            else
            {
                wds[i].text = day_names_fa[i];
            }
            //wds[i].y = 0;*/
            //wds[i].x = MARGIN + i * CELL_SIZE;
            //wds[i].text = "kkk";
            //temp.addChild(wds[i]);
        //}

        return temp;
    } 
```

如您所见，我已经注释掉了 for 循环。如果我不闪烁，运行电影时会崩溃。问题是不会执行 trace("HERE") 指令。奇怪的是我从来没有调用过那个方法。但是，如果我删除 for 循环注释，flash 将崩溃而不会在输出中打印任何内容。有任何想法吗？？？？

编辑：以下代码也有同样的问题：

```
private function DrawWeekDays():Sprite
    {
        var temp:Sprite = new Sprite();
        var wds:Array = new Array();
        var format:TextFormat = new TextFormat();
        format.font = "Tahoma";
        format.align = TextFormatAlign.CENTER;
        format.size = 11;
        format.color = 0xffffff;

        trace("HERE");
        //for( var i:int = 0; i < 7; i++ )
        //{
            //trace(i);
            wds[0] = new TLFTextField();
            wds[0].width = CELL_SIZE;
            wds[0].defaultTextFormat = format;
            if( "en" == lang )
            {
                wds[0].text = day_names_en[0];
            }
            else
            {
                wds[0].text = day_names_fa[0];
            }
            wds[0].y = 0;
            wds[0].x = MARGIN + 0 * CELL_SIZE;

            temp.addChild(wds[0]);
        //}

        return temp;
    } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-09T07:30:27.153

什么鬼人！！！我正在使用项目属性中的类属性来使用该类。我将课程移到可以导入的地方，所有问题都消失了！

感谢您的所有帮助

# c# - 使用 WCF 的 SQL Server 数据库通知

> ID：15894961
> 
> 赞同：0
> 
> 时间：2013-04-09T06:39:36.713
> 
> 标签：c#, wcf, sql-server-2008-r2

每当将记录插入 SQL 时，我都需要在 C# 程序中执行一些操作。
我以前和`SqlDependency`. 但是现在客户要求我们做`WCF`服务。与相比
是 更好。任何从 WCF 开始的链接？`WCF``SqlDependency`

# c# - Convert.ToInt32 和 Int32.Parse 有什么区别？

> ID：15894963
> 
> 赞同：11
> 
> 时间：2013-04-09T06:39:39.117
> 
> 标签：c#

在那里，您可以使用和`C#`将字符串转换为 Int32 。他们之间有什么区别？哪个表现更好？我应该在哪些情况下使用over ，反之亦然？`Int32.Parse``Convert.ToInt32``Convert.ToInt32``Int32.Parse`

* * *

## 回答 #1

> 赞同：17
> 
> 时间：2013-04-09T06:46:58.567

如果您使用[Reflector](http://www.red-gate.com/products/dotnet-development/reflector/)或[ILSpy](http://ilspy.net/)查看您将`mscorlib`看到以下代码`Convert.ToInt32`

```
public static int ToInt32(string value)
{
    if (value == null)
    {
        return 0;
    }
    return int.Parse(value, CultureInfo.CurrentCulture);
} 
```

因此，在内部它使用[int.Parse](http://msdn.microsoft.com/en-us/library/system.int32.parse.aspx)但与`CurrentCulture`. 实际上从代码中可以理解为什么当我`null`像参数一样指定此方法时不会引发异常。

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2013-04-09T06:42:09.407

Basically `Convert.ToInt32` uses 'Int32.Parse' behind scenes but at the bottom line `Convert.ToInt32` A `null` will return 0\. while in `Int32.Parse` an Exception will be raised.

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2013-04-09T06:42:59.080

> Int32.Parse (string s) method converts the string representation of a number to its 32-bit signed integer equivalent. When s is a null reference, it will throw ArgumentNullException.

whereas

> Convert.ToInt32(string s) method converts the specified string representation of 32-bit signed integer equivalent. This calls in turn Int32.Parse () method. When s is a null reference, it will return 0 rather than throw ArgumentNullException.

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2013-04-09T06:42:25.173

> Convert.ToInt32 (string value)

From MSDN:

Returns a 32-bit signed integer equivalent to the value of value. -or- Zero if value is a null reference (Nothing in Visual Basic). The return value is the result of invoking the `Int32.Parse` method on value.

# ios - UIImageView 注解

> ID：15894964
> 
> 赞同：0
> 
> 时间：2013-04-09T06:39:40.453
> 
> 标签：ios, uiimageview

我正在尝试从相机捕获图像，将其显示在 UIImageView 上。

之后，我有一些按钮，例如“画笔”、“橡皮擦”、“撤消”、“保存”。

使用画笔我想在捕获的图像上标记一些项目。

完成注释然后保存图像的最佳方法是什么。

我不确定应该使用什么。我应该使用 touchesbegan/end 等.. 还是其他替代方法。

问候，

尼拉夫

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-09T07:06:33.933

你需要了解贝塞尔路径基础知识。在谷歌或苹果文档上搜索它。

UIBezierPath 类是核心图形框架中路径相关功能的 Objective-C 包装器。您可以使用此类定义简单的形状，例如椭圆和矩形，以及包含多个直线和曲线段的复杂形状。

# c# - DataView 排序方法 - 使用哪种排序算法？

> ID：15894969
> 
> 赞同：1
> 
> 时间：2013-04-09T06:39:56.150
> 
> 标签：c#, .net, visual-studio, sorting

我正在使用 VS2012，.NET Framework 4.5。我需要知道 DataView.Sort 中使用了哪种排序算法？

我的代码：

```
var table = new DataTable();
table.Columns.Add("Word");

table.DefaultView.Sort = "Word";//after that row, DefaultDataView is sorted 
```

那么这里使用什么排序算法呢？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-09T06:46:09.473

DataView 中的 Sort 方法实现了**Quicksort 算法**。它选择一个任意中点，将所有低于中点的值放在左侧，将所有较高的值放在右侧。然后它递归地应用到左右部分。最终它将递归到不能被分成更小的部分的部分（即，当一个部分由单个数组成员组成时），此时排序已完成。使用大 O 表示法，我们可以说该算法在**O(n log n)**时间内执行，这与您对排序算法的预期效率差不多。只要排序的每次迭代都将索引集分成两个相等的部分，我们正在处理以**2 为底的对数** 为了证明这一切，您必须检测 System.Data 代码并使用测试工具检查运行时性能。

**更新：**

你可以看看[Reflector Utility](http://www.red-gate.com/products/dotnet-development/reflector/)并关注这篇文章......它在这里都解释了[DataView 排序](http://geekswithblogs.net/chrisfalter/archive/2006/08/15/88057.aspx)

# python - Python：每次调用函数时输出一个编号变量？

> ID：15894983
> 
> 赞同：0
> 
> 时间：2013-04-09T06:40:20.183
> 
> 标签：python

我正在使用乌龟来展示分拣机。我的数字排序工作正常，但我正在对条形进行排序。我想知道是否有一种方法可以在每次调用函数时将函数的输出分配给变量。更具体地说，我希望能够将每个单独的条分配给一个变量，然后将所有条变量放入一个列表中，并与 nums 中的数字同时对其进行排序。希望我说得通。任何帮助，将不胜感激。

```
nums=[30,60,90] ##sorted list

draw(): ##draws the bar based on height of number in the list
    t.fd(5)
    t.lt(90)
    t.fd(nums[i])
    t.lt(90)
    t.fd(5)
    t.lt(90)
    t.fd(nums[i])
    t.lt(90)
    t.pu()
    t.fd(50)
    t.pd()

for i in range(len(nums)): ##draws all lines in the list
    draw() 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-09T06:43:08.513

Do you mean this:

```
def draw(num): ##draws the bar based on height of number in the list
    t.fd(5)
    t.lt(90)
    t.fd(num)
    t.lt(90)
    t.fd(5)
    t.lt(90)
    t.fd(num)
    t.lt(90)
    t.pu     # typo?
    t.fd(50)
    t.pd()

nums=[30,60,90] ##sorted list

for num in nums:
    draw(num) 
```

If not, please give an example of what you're trying to achieve.

# c# - 如何在水晶报表中获得空白日期而不是 1899 年 12 月 30 日

> ID：15894985
> 
> 赞同：5
> 
> 时间：2013-04-09T06:40:22.753
> 
> 标签：c#, .net, datetime, crystal-reports

我正在使用水晶报告，我正在使用日期参数。在某些情况下，我不会从数据库中返回任何日期。系统正在跟踪默认日期 1899 年 12 月 30 日。所以在这种情况下，我想用空白日期绑定报告。需要用空白日期显示所有其他字段。请为此提供帮助

提前致谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-09T06:45:08.477

在选择查询中使用此格式

```
select isnull(dateColumn,''),column2 from table 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2016-09-28T14:51:12.540

在添加到报告的字段中，转到“格式化对象”并选中“抑制”复选框，然后通过单击该复选框右侧的底部添加此公式：

```
{DATE_FIELD} = Date (1899,12,30) 
```

其中 DATE_FIELD 是对象的字段。

当日期等于 1899/12/30 时，这将抑制该字段。

# php - rsyslog 性能优化

> ID：15894986
> 
> 赞同：3
> 
> 时间：2013-04-09T06:40:24.707
> 
> 标签：php, mysql, performance, logging, rsyslog

**应该如何设置[rsyslog](http://www.rsyslog.com/)以获得最佳性能？**

*   我们可以允许某些项目在服务器崩溃时丢失或只是丢失。
*   我们将把日志保存到 MySQL DB。
*   我们希望能够以 0.001 - 0.005 秒的延迟处理每秒至少 100 次日志写入。
*   我们正在从 PHP 应用程序写入日志。

谢谢你的帮助。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-10-29T18:02:03.943

我们刚刚使用 MongoDB 作为数据库进行了类似的练习，因此我将记录我们所做的事情并希望它对您有所帮助。

这是我们第一次使用 rsyslog，因此需要花费一些精力来找到正确的文档并将所有内容拼凑在一起。最后，我们的测试驱动程序（我们使用 SoapUI）能够通过使用 rsyslog 编写事务摘要记录的 php Web 服务获得 1000 TPS。

我们发现以下文章让我们开始：

*   [http://www.rsyslog.com/doc/rsyslog_high_database_rate.html](http://www.rsyslog.com/doc/rsyslog_high_database_rate.html)
*   [http://www.rsyslog.com/tag/mongodb/](http://www.rsyslog.com/tag/mongodb/)

概述是您将启用 rsyslog 的队列基础结构，以便在守护进程的内存队列已满时将传入消息写入磁盘。在我们的例子中，我们启用了 $ActionQueueSaveOnShutdown，听起来您不需要。然后，您将配置 rsyslog 规则集以解析传入消息并将它们传递给 MySQL 的输出处理程序。最后，您的 php 脚本将使用 openlog() 和 syslog() 来写入您想要记录的任何数据。哦，我们还必须从源代码编译 rsyslog，以启用 json/mongo 插件，这本身就是一个练习。我们在 Ubuntu 12.04 上使用 rsyslog 7.4.5。

我当然不是 rsyslog 方面的专家，但是可以为您提供我们的配置文件和代码作为起点。同样，它们适用于 MongoDB，希望它能让您了解该做什么以及在哪里为您的实现进行更改。

祝你好运！

/etc/rsyslog.conf：

```
$ModLoad imuxsock # provides support for local system logging
$ModLoad imklog   # provides kernel logging support (previously done by rklogd)

# Load modules for MongoDB integration: json parser and MongoDB output driver
module(load="mmjsonparse")
module(load="ommongodb")

# Use traditional timestamp format.
# To enable high precision timestamps, comment out the following line.
$ActionFileDefaultTemplate RSYSLOG_TraditionalFileFormat

# Filter duplicated messages
$RepeatedMsgReduction on

# Set the default permissions for all log files.
$FileOwner syslog
$FileGroup adm
$FileCreateMode 0640
$DirCreateMode 0755
$Umask 0022
$PrivDropToUser syslog
$PrivDropToGroup syslog

# Where to place spool files
$WorkDirectory /var/spool/rsyslog

# use queue to decouple the db writes from default message handling
# From http://www.rsyslog.com/doc/rsyslog_high_database_rate.html
$MainMsgQueueFileName mainq     # set file name for main queue, also enables disk mode
$ActionQueueType LinkedList     # use asynchronous processing
$ActionQueueFileName mongodbq   # set file name for mongo db queue, enables disk mode
$ActionResumeRetryCount -1      # infinite retries on insert failure
$ActionQueueSaveOnShutdown on   # write all queue data to disk when rsyslogd is
                                #   terminated (default is off)

# Include all config files in /etc/rsyslog.d/
$IncludeConfig /etc/rsyslog.d/*.conf 
```

/etc/rsyslog.d/10-mongo.conf：

```
input(type="imuxsock" socket="/dev/log")

template(name="mongodblocal" type="subtree" subtree="$!")

# use json parser for all "local0" facility messages, 
# if parsed successfully run the template to load the
# message into the MongoDB database.
if $syslogfacility-text == 'local0' then {
        action(type="mmjsonparse")
        if $parsesuccess == "OK" then {
                # set some local vars that are appended onto the 
                # document that's written to MongoDB
                set $!time = $timestamp;
                set $!sys = $hostname;
                set $!procid = $syslogtag;
                set $!syslog_fac = $syslogfacility;
                set $!syslog_sever = $syslogpriority;
                set $!pid = $procid;
                action(type="ommongodb" server="127.0.0.1" db="test" collection="syslog" template="mongodblocal")
        }
} 
```

/etc/rsyslog.d/50-default.conf：注意：这会禁用“local0”消息以进行默认处理。

```
# First some standard log files.  Log by facility.
auth,authpriv.*         /var/log/auth.log

# don't write "local0" messages to syslog, 
# as they're processed using ommongodb (see 10-mongo.conf)
*.*;local0,auth,authpriv.none   -/var/log/syslog

kern.*              -/var/log/kern.log
mail.*              -/var/log/mail.log

# Logging for the mail system.  Split it up so that
# it is easy to write scripts to parse these files.
mail.err            /var/log/mail.err

# Logging for INN news system.
news.crit           /var/log/news/news.crit
news.err            /var/log/news/news.err
news.notice         -/var/log/news/news.notice

# Emergencies are sent to everybody logged in.
*.emerg                                :omusrmsg:* 
```

php web 服务相关调用：

```
// open syslog, include the process ID and open the connection to the logger 
// immediately, and use a user defined logging mechanism Local0
openlog($SCRIPT_NAME, LOG_PID | LOG_NDELAY, LOG_LOCAL0);
// note: calling closelog() is optional, and we don't use it

...
// construct $doc, which is what will be logged, change this as appropriate
// for your implementation; here $ary_headers is the request's HTTP headers,
// and $request/$response are what was posted/returned
$doc = array("headers" => $ary_headers
            ,"request" => $request
            ,"response" => $response
            );
...

// write the log entry to syslog, where it queues it and writes it to MongoDB
// NOTE: need the '@cee: ' prefix so the rsyslog json parser will process it
// See:  http://www.rsyslog.com/doc/rsyslog_conf_modules.html/mmjsonparse.html

// JSON_BIGINT_AS_STRING = Encodes large integers as their original string value.
// JSON_NUMERIC_CHECK = Encodes numeric strings as numbers.
// JSON_UNESCAPED_SLASHES = Don't escape "/".

syslog(LOG_INFO, '@cee: ' . json_encode($doc, JSON_BIGINT_AS_STRING | JSON_NUMERIC_CHECK | JSON_UNESCAPED_SLASHES)); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2014-01-25T10:21:49.540

这可能会有所帮助，即使它是关于 Elasticsearch，而不是 MySQL：http: [//blog.sematext.com/2014/01/20/rsyslog-8-1-elasticsearch-output-performance/](http://blog.sematext.com/2014/01/20/rsyslog-8-1-elasticsearch-output-performance/)

但它解释了 rsyslog 如何与队列和线程一起工作的基础知识，并且您可以开始使用一种新型配置。加上将您发送到 rsyslog 有关队列、规则集等的文档的链接。

有关新型配置格式的更多信息，这是一个很好的资源：[http ://www.rsyslog.com/doc/rainerscript.html](http://www.rsyslog.com/doc/rainerscript.html)

# android - 我应该将文本文件放在哪个路径中以写入android

> ID：15894989
> 
> 赞同：0
> 
> 时间：2013-04-09T06:40:40.620
> 
> 标签：android

我有一个 android 应用程序，我需要在文本文件中写入一些字符串值。我有编码写在一个文本文件中。但我不知道我应该在哪里创建我的文本文件。请参考下面的代码，

```
FileOutputStream fOut = null; 

OutputStreamWriter osw = null; 

try{ 

fOut = openFileOutput(“public.dat”, Context.MODE_PRIVATE); 

osw = new OutputStreamWriter(fOut);

osw.write(“TEXT”);

osw.close(); 

fOut.close(); 

}catch(Exception e){ 

e.printStackTrace(System.err); 

} 
```

请告诉我应该在哪个路径中创建文本文件。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-09T06:53:02.590

最好的方法是在 sdcard 中的应用程序目录中创建文件。

```
fOut = openFileOutput(Environment.getExternalStorageDirectory().getAbsolutePath()+“/yourAppFolder/public.dat”, Context.MODE_PRIVATE); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-09T08:02:18.140

如果您想将数据本地存储到您的应用程序，在设备的内部文件系统上（而不是在外部 SD 卡上），您应该始终考虑[SharedPreferences](http://developer.android.com/reference/android/content/SharedPreferences.html)，默认情况下，它们是您应用程序私有存储空间中的私有文件，方便使用权。

SharedPreferences 非常适合键/值对，但不太适合某些数据格式。因此，如果您有不同的需求，该`Context`课程可以提供多种方法。请注意，`Activity`和`Application`对象都是`Context`s，因此您将始终能够访问这些对象。请参考文档：

*   [获取目录（）](http://developer.android.com/reference/android/content/Context.html#getDir%28java.lang.String,%20int%29)
*   [获取文件目录（）](http://developer.android.com/reference/android/content/Context.html#getFilesDir%28%29)
*   [打开文件输出（）](http://developer.android.com/reference/android/content/Context.html#openFileOutput%28java.lang.String,%20int%29)

还有一些方法可以获取外部 SD 卡安装在特定设备上的路径、临时文件等。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-10T05:54:37.743

我认为这不是最佳的最佳解决方案，但如果它正在工作，它是值得的。

# c# - System.IO.Stream 中的模式搜索

> ID：15894990
> 
> 赞同：7
> 
> 时间：2013-04-09T06:40:42.370
> 
> 标签：c#, stream

我正在从源接收系统 IO 流。只有当它包含字符串时，我才会继续处理流对象`"MSTND"`。

我意识到除非我将它转换成字符串，否则我在流上无能为力。字符串转换仅用于子字符串匹配。但我不想做任何占用大量时间或空间的事情。从 Stream 到字符串的转换仅用于子字符串匹配的时间/空间密集程度如何？

我写的代码是：

```
private bool StreamHasString (Stream vStream)
{
     bool containsStr = false;
     byte[] streamBytes = new byte[vStream.Length];
     vStream.Read( streamBytes, 0, (int) vStream.Length);
     string stringOfStream = Encoding.UTF32.GetString(streamBytes);
     if (stringOfStream.Contains("MSTND"))
     {
        containsStr = true;
     }     
     return containsStr ;
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-09T07:09:26.467

您正在做的事情会很好，但是一旦您将流读入字符串，您就可以返回字符串，这样您就不必再次读取流。

另请注意，您使用的`Read`方法错误。它返回读入数组的字节数，因为它不必返回您请求的字节数，即使它不在流的末尾。您必须循环直到从流中读取所有字节。

```
private string StreamHasString (Stream vStream) {
  byte[] streamBytes = new byte[vStream.Length];

  int pos = 0;
  int len = (int)vStream.Length;
  while (pos < len) {
    int n = vStream.Read(streamBytes, pos, len - pos);
    pos += n;
  }

  string stringOfStream = Encoding.UTF32.GetString(streamBytes);
  if (stringOfStream.Contains("MSTND")) {
    return stringOfStream;
  } else {
    return null;
  }
} 
```

用法：

```
string s = StreamHasString(vStream);
if (s != null) {
  // proceed
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-09T06:52:43.167

根据您期望此序列在流中的位置，将其转​​换为字符串以执行子字符串将是相当有效的。如果它每次都在标准位置，那么您可以阅读所需的字节数并将它们转换为字符串。

看看这个以获得一些参考：http: [//msdn.microsoft.com/en-us/library/system.io.stream.read.aspx](http://msdn.microsoft.com/en-us/library/system.io.stream.read.aspx)

或者，您可以将字符串“MSTND”转换为 byte[] 并在流中搜索 byte[]。

编辑：

我发现[如何在不手动指定编码的情况下获得 C# 中字符串的一致字节表示？](https://stackoverflow.com/questions/472906/net-string-to-byte-array-c-sharp)这应该有助于将字符串转换为字节 []。

# android - 广告顶部的 ListView - Android

> ID：15894992
> 
> 赞同：0
> 
> 时间：2013-04-09T06:40:48.590
> 
> 标签：android, listview, layout, android-relativelayout

我在列表视图底部显示广告时遇到问题，在我的主要活动中，广告有效，唯一的区别是我使用 viewpager 而不是列表视图。

这是布局：

```
<?xml version="1.0" encoding="utf-8"?>
<RelativeLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:layout_width="match_parent"
    android:layout_height="match_parent" >

    <com.google.ads.AdView
        xmlns:app="http://schemas.android.com/apk/lib/com.google.ads"
        xmlns:ads="http://schemas.android.com/apk/lib/com.google.ads"
        android:id="@+id/adView"
        android:layout_width="match_parent"
        android:layout_height="wrap_content"
        android:layout_alignParentBottom="true"
        ads:loadAdOnCreate="true"
        android:background="#313131"
        app:adSize="SMART_BANNER"
        app:adUnitId="MY_ID" />

    <ListView
        android:id="@id/android:list"
        android:layout_width="match_parent"
        android:layout_height="wrap_content"
        android:layout_above="@id/adView" />

</RelativeLayout> 
```

列表视图显示在广告的顶部，当然不能点击，但同样的布局适用于 viewpager。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-09T08:00:33.833

最终布局：

```
<?xml version="1.0" encoding="utf-8"?>
<RelativeLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:layout_width="match_parent"
    android:layout_height="match_parent" >

    <com.google.ads.AdView
        xmlns:app="http://schemas.android.com/apk/lib/com.google.ads"
        xmlns:ads="http://schemas.android.com/apk/lib/com.google.ads"
        android:id="@+id/adView"
        android:layout_width="match_parent"
        android:layout_height="wrap_content"
        android:layout_alignParentBottom="true"
        ads:loadAdOnCreate="true"
        android:background="#313131"
        app:adSize="SMART_BANNER"
        app:adUnitId="MY_ID" />

    <LinearLayout
        android:id="@+id/listview"
        android:layout_width="match_parent"
        android:layout_height="match_parent"
        android:layout_above="@id/adView" />

</RelativeLayout> 
```

然后替换：

```
getSupportFragmentManager().beginTransaction().add(android.R.id.content, list).commit(); 
```

和：

```
getSupportFragmentManager().beginTransaction().add(R.id.listview, list).commit(); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-09T06:46:58.740

另一种方式。

```
<?xml version="1.0" encoding="utf-8"?>
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
android:layout_width="match_parent"
android:layout_height="match_parent"
android:orientation="vertical" >

<ListView
    android:id="@id/android:list"
    android:layout_width="match_parent"
    android:layout_height="match_parent"
   />

<com.google.ads.AdView
    xmlns:app="http://schemas.android.com/apk/lib/com.google.ads"
    xmlns:ads="http://schemas.android.com/apk/lib/com.google.ads"
    android:id="@+id/adView"
    android:layout_width="match_parent"
    android:layout_height="wrap_content"
    ads:loadAdOnCreate="true"
    android:background="#313131"
    app:adSize="SMART_BANNER"
    app:adUnitId="MY_ID" />

</LinearLayout > 
```

加载 Ad - 时，获取他的身高。然后`ListView bottomMargin = adHeight`和`Ad topMargin = (-1)*adHeight`。试试看。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-09T10:49:14.333

```
<ListView
    android:id="@id/android:list"
    android:layout_width="match_parent"
    android:layout_height="wrap_content"
    android:layout_weight="1"
   />

<com.google.ads.AdView
    xmlns:ads="http://schemas.android.com/apk/lib/com.google.ads"
    android:id="@+id/adView"
    android:layout_width="match_parent"
    android:layout_height="wrap_content"
    android:background="#313131"
    ads:loadAdOnCreate="true"
    ads="SMART_BANNER"
    ads="MY_ID" /> 
```

注意这是一个布局问题。它与 Admob 无关。如果您使用的是 LinearLayout，那么只需为要扩展的项目设置 layout_height="wrap+content" 和 layout_gravity="1" 以消耗未使用的空间。在这种情况下，您的 ListView。

您的问题实际上是 layout_height="match_parent"

注意我还删除了广告命名空间的不必要重命名。

# javascript - 如何使标题栏固定

> ID：15894997
> 
> 赞同：-1
> 
> 时间：2013-04-09T06:41:04.327
> 
> 标签：javascript, jquery, html, css

我想固定标题栏（包含我的个人资料，更改密码的栏），因此我创建了一个类！[当我单击更改密码时，它不会完全更改密码][1 ] p.pos_fixed { 位置：固定；顶部：30px；右：5px；} 但它不能很好地工作我的意思是说外观和感觉不好。

这是我的 index.html 代码

```
<!DOCTYPE html> <!-- The new doctype -->
<html>
    <head>

        <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />

        <title>home</title>

        <link rel="stylesheet" type="text/css" href="styles.css" />

    </head>

    <body>

        <section id="page" > <!-- Defining the #page section with the section tag -->

            <header> <!-- Defining the header section of the page with the appropriate tag -->

                <hgroup>
                    <h1>Your Logo</h1>
                    <h3>and a fancy slogan</h3>
                </hgroup>

                <nav class="clear"> <!-- The nav link semantically marks your main site navigation -->
                    <ul>
                        <li><a href="#article1">My Profile</a></li>
                        <li><a href="#article2">Change password</a></li>
                        <li><a href="#article3">Navigation Menu</a></li>
                    </ul>
                </nav>

            </header>

            <section id="articles"> <!-- A new section with the articles -->

                <!-- Article 1 start -->

                <div class="line"></div>  <!-- Dividing line -->

                <article id="article1"> <!-- The new article tag. The id is supplied so it can be scrolled into view. -->
                    <h2>Dr. Sukant Kumar nayak</h2>

                    <div class="line"></div>

                    <div class="articleBody clear">

                     <div >
        <div  align="center" style="padding-top: 30px">
            <table align="center" >
                <tr >

                </tr>
            </table>
        </div>
        <div style="float: left; padding-left: 50px; padding-top: 5px">
            <table cellspacing="10" cellpadding="10" >
            <tr>
                <td width="200" height="30">
                    <b>Last Name</b>
                </td>
                <td>
                     <label for="LastName">LastName</label>
                </td>
            </tr>
            <tr>
                <td  height="30">
                    <b>First Name</b>
                </td>
                <td>
                    <label for="FirstName">First Name</label>
                </td>
            </tr>
            <tr>
                <td  height="30">
                    <b>Date of Birth</b>
                </td>
                <td>
                    <label for="DateofBirth">Date of Birth</label>
                </td>
            </tr>
            <tr>
                <td  height="30">
                    <b>Qualification</b>
                </td>
                <td>
                    <label for="LastName">Qualification</label>
                </td>
            </tr>
            <tr>
                <td  height="30">
                    <b>Registration. No.</b>
                </td>
                <td>
                    <label for="RegistrationNo">Registration No</label>
                </td>
            </tr>
            <tr>
                <td  height="30">
                    <b>Country of Registration</b>
                </td>
                <td>
                    <label for="CountryofRegistration">Country of Registration</label>
                </td>
            </tr>
            <tr>
                <td  height="30">
                    <b>Practice Name</b>
                </td>
                <td>
                    <label for="PracticeName">Practice Name</label>
                </td>
            </tr>
            <tr>
                <td  height="30">
                    <b>Phone</b>
                </td>

                <td>
                    <label for="Phone">Phone</label>
                </td>
            </tr>
            <tr>
                <td  height="30">
                    <b>Email</b>
                </td>
                <td>
                    <label for="Email">Email</label>
                </td>
            </tr>
        </table>

        </div>
        <div style="float: right;padding-right: 50px;padding-top: 50px">

            <table>

                <tr>
                <td width="160" height="30">
                    <b>Address</b>
                </td>
                <td>
                    <label for="Address">Address</label>
                </td>
                </tr>
                <tr>
                    <td  height="30">
                        <b>Street</b>
                    </td>
                    <td>
                        <label for="Street">Street</label>
                    </td>
                </tr>
                <tr>
                    <td  height="30">
                        <b>City</b>
                    </td>
                    <td>
                        <label for="City">City</label>
                    </td>
                </tr>
                <tr>
                    <td  height="30">
                        <b>State</b>
                    </td>
                    <td>
                        <label for="State">State</label>
                    </td>
                </tr>
                <tr>
                    <td  height="30">
                        <b>Country</b>
                    </td>
                    <td>
                        <label for="Country">Country</label>
                    </td>
                </tr>
                <tr>
                    <td  height="30">
                        <b>Pin Code</b>
                    </td>
                    <td>
                        <label for="PinCode">Pin Code</label>
                    </td>
                </tr>
                <tr>
                    <td  height="30">
                        <b>How do you know?</b>
                    </td>
                    <td>
                        <label for="HowDoYouKnow">How Do You Know</label>
                    </td>
                </tr>
                <tr>
                    <td  height="30">
                        <b>Comment</b>
                    </td>

                    <td>
                        <label for="Comments">Comments</label>
                    </td>
                </tr>
            </table>
        </div>
        </div>
                    </div>
                </article>

                <!-- Article 1 end -->

                <!-- Article 2 start -->

                <div class="line"></div>

                <article id="article2">
                    <h2>Change Password</h2>

                    <div class="line"></div>

                    <div class="articleBody clear">
                        <figure>
                            <a href="http://tutorialzine.com/2010/01/sweet-tabs-jquery-ajax-css/"><img src="medical.jpg" width="620" height="340" /></a>
                        </figure>

                        <p><div align="center" style="padding-top: 30px">
            <table  cellspacing="10" cellpadding="10">
                <tr>
                    <td width="200" height="30"><h5>Old Password</h5></td>
                    <td  height="30"><input name="old" type="password"></td>
                </tr>
                <tr>
                    <td  height="30"><h5>New Password</h5></td>
                    <td  height="30"><input name="newPsw" type="password"></td>
                </tr>
                <tr>
                    <td height="30"><h5>Confirm Password</h5></td>
                    <td  height="30"><input name="confirm" type="password"></td>
                </tr>
            </table>
        </div>
        <div class="footer-bar"  align="center" style="padding-top: 30px">
            <table align="center" >
                <tr >
                    <td width="100" align="center"><input type="submit" class="button button-submit" value="Submit"  /></td>
                    <td width="100" align="center"><input type="reset" class="button button-submit" value="Reset" /></td>
                </tr>
            </table>
        </div></p>
                        <p></p>
                    </div>
                </article>

                <!-- Article 2 end -->

                <!-- Article 3 start -->

                <div class="line"></div>

                <!-- Article 3 end -->

            </section>

        <footer> <!-- Marking the footer section -->

           <div class="line"></div>

           <p>Copyright 2013 - mysite.com</p> 

           <a href="#" class="up">Go UP</a>
           <a href="www.df.com" class="by">dh</a>

        </footer>

        </section> <!-- Closing the #page section -->

        <!-- JavaScript Includes -->

        <script src="http://ajax.googleapis.com/ajax/libs/jquery/1.3.2/jquery.min.js"></script>
        <script src="jquery.scrollTo-1.4.2/jquery.scrollTo-min.js"></script>
        <script src="script.js"></script>
    </body>
</html> 
```

这是 style.css

```
*{
    /* Universal reset: */
    margin:0;
    padding:0;
}

header,footer,
article,section,
hgroup,nav,
figure{
    /* Giving a display value to the HTML5 rendered elements: */
    display:block;
}

body{
    /* Setting the default text color, size, page background and a font stack: */
    font-size:0.825em;
    color:#fcfcfc;
    background-color:#355664;
    font-family:Arial, Helvetica, sans-serif;
}

/* Hyperlink Styles: */

a, a:visited {
    color:#0196e3;
    text-decoration:none;
    outline:none;
}

a:hover{
    text-decoration:underline;
}

a img{
    border:none;
}

/* Headings: */

h1,h2,h3{
    font-family:"Myriad Pro","Helvetica Neue",Helvetica,Arial,Sans-Serif;
    text-shadow:0 1px 1px black;
}

h1{
    /* The logo text */
    font-size:3.5em;
    padding:0.5em 0 0;
    text-transform:uppercase;
}

h3{
    /* The slogan text */
    font-family:forte,"Myriad Pro","Helvetica Neue",Helvetica,Arial,Sans-Serif;
    font-size:2em;
    font-weight:normal;
    margin:0 0 1em;
}

h2{
    font-size:2.2em;
    font-weight:normal;
    letter-spacing:0.01em;
    text-transform:uppercase;
}

p{
    line-height:1.5em;
    padding-bottom:1em;
}

.line{
    /* The dividing line: */
    height:1px;
    background-color:#24404c;
    border-bottom:1px solid #416371;
    margin:1em 0;
    overflow:hidden;
}

article .line{
    /* The dividing line inside of the article is darker: */
    background-color:#15242a;
    border-bottom-color:#204656;
    margin:1.3em 0;
}

footer .line{
    margin:2em 0;
}

nav{
    background:url(img/gradient_light.jpg) repeat-x 50% 50% #f8f8f8;
    padding:0 5px;
    position:absolute;
    right:0;
    top:4em;

    border:1px solid #FCFCFC;

    -moz-box-shadow:0 1px 1px #333333;
    -webkit-box-shadow:0 1px 1px #333333;
    box-shadow:0 1px 1px #333333;
}

/* The clearfix hack to clear the floats: */

.clear:after{
    content: ".";
    display: block;
    height: 0;
    clear: both;
    visibility: hidden;
}

/* The navigation styling: */

nav ul li{
    display:inline;
}

nav ul li a,
nav ul li a:visited{
    color:#565656;
    display:block;
    float:left;
    font-size:1.25em;
    font-weight:bold;
    margin:5px 2px;
    padding:7px 10px 4px;
    text-shadow:0 1px 1px white;
    text-transform:uppercase;
}

nav ul li a:hover{
    text-decoration:none;
    background-color:#f0f0f0;
}

nav, article, nav ul li a,figure{
    /* Applying CSS3 rounded corners: */
    -moz-border-radius:10px;
    -webkit-border-radius:10px;
    border-radius:10px;
}

/* Article styles: */

#page{
    width:960px;
    margin:0 auto;
    position:relative;
}

article{
    background-color:#213E4A;
    margin:3em 0;
    padding:20px;

    text-shadow:0 2px 0 black;
}

figure{
    border:3px solid #142830;
    float:right;
    height:300px;
    margin-left:15px;
    overflow:hidden;
    width:500px;
}

figure:hover{
    -moz-box-shadow:0 0 2px #4D7788;
    -webkit-box-shadow:0 0 2px #4D7788;
    box-shadow:0 0 2px #4D7788;
}

figure img{
    margin-left:-60px;
}

/* Footer styling: */

footer{
    margin-bottom:30px;
    text-align:center;
    font-size:0.825em;
}

footer p{
    margin-bottom:-2.5em;
    position:relative;
}

footer a,footer a:visited{
    color:#cccccc;
    background-color:#213e4a;
    display:block;
    padding:2px 4px;
    z-index:100;
    position:relative;
}

footer a:hover{
    text-decoration:none;
    background-color:#142830;
}

footer a.by{
    float:left;

}

footer a.up{
    float:right;
} 
```

请告诉我该怎么做。当我点击我的个人资料时，它会进入我的个人资料页面，但标题栏消失了，同样，更改密码也一样

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-09T07:22:43.650

![在此处输入图像描述](https://i.stack.imgur.com/Mcrqt.png) 把它放在css文件中

```
.pp
    {
        position:fixed;
        top: 30px;
        width: 944px;
        z-index:1;
        top:5px;

    } 
```

在正文中将标题设置为 pp 类

```
<header class="pp"> <!-- Defining the header section of the page with the appropriate tag -->

                <hgroup style="float:left">
                    <h1>Your Logo</h1>
                    <h3>and a fancy slogan</h3>
                </hgroup>

                <nav class="clear"> <!-- The nav link semantically marks your main site navigation -->
                    <ul>
                    <li><a href="#articles">My Profile</a></li>
                    <li><a href="#line1">Change password</a></li>
                    <li><a href="#article3">Navigation Menu</a></li>
                    </ul>
                </nav>

            </header> 
```

将 line1 id 设置为 articale2 上面的此类

```
 <div class="line" id="line1"></div> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-09T06:46:04.300

我不明白你为什么指向`p tag`，你的 HTML 代码中没有 p 标签。

添加`position:fixed`到`nav ul`

```
nav ul{
    background:white;
    border-radius:6px;
    position:fixed;
    top:30px;
    right:5px;
} 
```

**[演示](http://jsfiddle.net/DLKfj/)**

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2013-04-09T06:54:34.070

作为导航标签中的栏，因此您需要为导航标签编写 css 来修复它，同时您有一点，您已经为 p 标签编写了 css 代码。

# xml - SpringSocial XML 配置架构错误

> ID：15894999
> 
> 赞同：6
> 
> 时间：2013-04-09T06:41:06.277
> 
> 标签：xml, spring, config, spring-social

我尝试了使用 XML 的 Spring Social Showcase，但它似乎在 XML 中有错误。

XML 文件不工作。我已经阅读了第 23 到 27 行的 x 标记。

```
<facebook:config app-id="${facebook.clientId}" app-secret="${facebook.clientSecret}" app-namespace="socialshowcase" />
    <twitter:config app-id="${twitter.consumerKey}" app-secret="${twitter.consumerSecret}"/>
    <linkedin:config app-id="${linkedin.consumerKey}" app-secret="${linkedin.consumerSecret}"/>

    <social:jdbc-connection-repository/> 
```

我试图检查架构（[http://www.springframework.org/schema/social/](http://www.springframework.org/schema/social/)）并将其粘贴到 URL 中，但它说它没有找到。我试图检查 springframework.org/schema/ 的根目录，但找不到与 Spring Social 相关的孩子。

春季社交的 xmnls 或模式位置是否有新链接？

这是我的 XML 文件：

```
<?xml version="1.0" encoding="UTF-8"?>
<beans xmlns="http://www.springframework.org/schema/beans"
    xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
    xmlns:facebook="http://www.springframework.org/schema/social/facebook"
    xmlns:twitter="http://www.springframework.org/schema/social/twitter"
    xmlns:social="http://www.springframework.org/schema/social"
    xmlns:linkedin="http://www.springframework.org/schema/social/linkedin"
    xmlns:c="http://www.springframework.org/schema/c"
    xmlns:context="http://www.springframework.org/schema/context"
    xsi:schemaLocation="http://www.springframework.org/schema/social/facebook http://www.springframework.org/schema/social/spring-social-facebook.xsd
        http://www.springframework.org/schema/social/linkedin http://www.springframework.org/schema/social/spring-social-linkedin.xsd
        http://www.springframework.org/schema/beans http://www.springframework.org/schema/beans/spring-beans.xsd
        http://www.springframework.org/schema/social/twitter http://www.springframework.org/schema/social/spring-social-twitter.xsd
        http://www.springframework.org/schema/social http://www.springframework.org/schema/social/spring-social.xsd
        http://www.springframework.org/schema/context http://www.springframework.org/schema/context/spring-context-3.1.xsd">

    <context:property-placeholder location="classpath:/org/springframework/social/showcase/config/application.properties" />

    <facebook:config app-id="${facebook.clientId}" app-secret="${facebook.clientSecret}" app-namespace="socialshowcase" />
    <twitter:config app-id="${twitter.consumerKey}" app-secret="${twitter.consumerSecret}"/>
    <linkedin:config app-id="${linkedin.consumerKey}" app-secret="${linkedin.consumerSecret}"/>

    <social:jdbc-connection-repository/>    
    <bean id="userIdSource" class="org.springframework.social.security.AuthenticationNameUserIdSource" />

    <bean id="connectController" class="org.springframework.social.connect.web.ConnectController" autowire="constructor">
        <property name="connectInterceptors">
            <list>
                <bean class="org.springframework.social.showcase.facebook.PostToWallAfterConnectInterceptor" />
                <bean class="org.springframework.social.showcase.twitter.TweetAfterConnectInterceptor" />
            </list>
        </property>
    </bean>

    <bean id="psc" class="org.springframework.social.connect.web.ProviderSignInController" autowire="constructor" />        
    <bean id="signInAdapter" class="org.springframework.social.showcase.signin.SimpleSignInAdapter" autowire="constructor" />

    <bean id="disconnectController" class="org.springframework.social.facebook.web.DisconnectController" 
        c:_0-ref="usersConnectionRepository" c:_1="${facebook.clientSecret}" />

</beans> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-10-22T09:27:39.060

自从提出问题以来已经有一段时间了，但我现在遇到了同样的问题。

我只是通过将 Spring-Social-Security jar 添加到我的构建路径来修复它。使用行家：

```
<dependency>
  <groupId>org.springframework.social</groupId>
  <artifactId>spring-social-security</artifactId>
  <version>${org.springframework.social-version}</version>
</dependency> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2014-01-14T15:49:38.107

尝试改变这部分

```
<bean id="connectController" class="org.springframework.social.connect.web.ConnectController" autowire="constructor">
    <property name="connectInterceptors">
        <list>
            <bean class="org.springframework.social.showcase.facebook.PostToWallAfterConnectInterceptor" />
            <bean class="org.springframework.social.showcase.twitter.TweetAfterConnectInterceptor" />
        </list>
    </property></bean> 
```

和

```
 <bean class="org.springframework.social.web.connect.ConnectController">
<constructor-arg value="${application.url}" /></bean> 
```