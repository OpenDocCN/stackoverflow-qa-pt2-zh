# StackOverflow 问答 13344000-13344999

# ios - 通过 alloc 方法初始化单例和普通对象有什么区别？

> ID：13344000
> 
> 赞同：0
> 
> 时间：2012-11-12T12:48:38.613
> 
> 标签：ios

我正在测试 UITableView ：（在 ARC 下）代码如下，

```
- (void)viewDidLoad
{
    [super viewDidLoad];
    UnitTest *unitTest = [[UnitTest alloc] init];

    UITableView *tableView = [[UITableView alloc] initWithFrame:self.view.bounds style:UITableViewStylePlain];
    tableView.delegate = unitTest;
    tableView.dataSource = unitTest;

    [self.view addSubview:tableView];

} 
```

我在 Object UnitTest 中实现了 tableView 委托。当我运行我的项目时，它会获取一个错误：

```
libobjc.A.dylib`objc_msgSend:
0x30f13f68:  teq.w  r0, #0
0x30f13f6c:  beq    0x30f13faa               ; objc_msgSend + 66
0x30f13f6e:  push.w {r3, r4}
0x30f13f72:  ldr    r4, [r0]                // Thread 1: BAD_EXE_ACCESS ....
0x30f13f74:  lsr.w  r9, r1, #2
0x30f13f78:  ldr    r3, [r4, #8]
0x30f13f7a:  add.w  r3, r3, #8
0x30f13f7e:  ldr    r12, [r3, #-8] 
```

控制台中没有任何内容。

当我换线时

```
UnitTest *unitTest = [[UnitTest alloc] init]; 
```

至

```
UnitTest *unitTest = [UnitTest sharedUnitTest]; // i have implement this singleton 
```

一切正常！！为什么

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-12T12:54:50.187

你在 ARC，这意味着什么。基本上，您`unitTest`迟早会被解除分配，因为您不保留对它的任何引用。但是，它仍然是 tableView 的委托和数据源。因此，一段时间后（为了简化），tableView 将尝试调用它的委托，但该委托`unitTest`已被释放。

因此，这里最简单的解决方案是在标题中为`unitTest`: 创建一个属性`@property (nonatomic, strong) UnitTest *unitTest;`，在 .m 中合成它

然后，只需使用：

```
self.unitTest = [[UnitTest alloc] init]; 
```

它应该解决这一切。您可能不需要单例。

PS：单例解决这个问题的原因是单例将“永远活着”（只要应用程序启动）。因为它永远不会被释放，所以当表视图尝试调用其委托/数据源时没有问题。

# matlab - 在matlab中手动旋转图像

> ID：13344016
> 
> 赞同：1
> 
> 时间：2012-11-12T12:49:31.617
> 
> 标签：matlab, rotation, computer-vision, image-rotation

我正在尝试使用以下代码手动旋转图像。

```
clc;
m1 = imread('owl','pgm'); % a simple gray scale image of order 260 X 200
newImg = zeros(500,500);
newImg = int16(newImg);
rotationMatrix45 = [cos((pi/4)) -sin((pi/4)); sin((pi/4)) cos((pi/4))];

for x = 1:size(m1,1)
    for y = 1:size(m1,2)
        point =[x;y] ;
        product = rotationMatrix45 * point;
        product = int16(product);
        newx =product(1,1);
        newy=product(2,1);
        newImg(newx,newy) = m1(x,y);
    end
end
imshow(newImg); 
```

只需我遍历图像的每个像素`m1`，将 m1(x,y) 与旋转矩阵相乘，我得到`x',y'`，并将`m1(x,y)`in 的值存储到 `newImg(x',y')'**但**它给出了以下错误

```
??? Attempted to access newImg(0,1); index must be a positive integer or logical.

Error in ==> at 18
        newImg(newx,newy) = m1(x,y); 
```

我不知道我做错了什么。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-12T12:52:16.090

部分旋转图像将变为负数（或零）`newx`和`newy`值，因为角点将旋转出原始图像坐标。`newImg`您不能为if `newx`or是非正数赋值`newy`；这些不是有效的矩阵索引。一种解决方案是检查这种情况并跳过此类像素（使用[`continue`](http://www.mathworks.nl/help/matlab/ref/continue.html)）

另一种解决方案是充分放大 newImg，但这需要稍微复杂的转换。

这是假设您不能[`imrotate`](http://www.mathworks.nl/help/images/ref/imrotate.html)因为这是家庭作业而仅仅使用？

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-04-17T17:45:13.827

这是一篇旧帖子，所以我想它不会帮助 OP，但由于他的尝试帮助了我，我在这里发布了我更正的代码。关于如何处理未分配的像素以及是否希望保持图片的原始大小，在实施中基本上有一些自由 - 这将迫使您裁剪落在“外部”的区域。以下函数围绕其中心旋转图像，将未分配的像素保留为“烧毁”并裁剪边缘。

```
function [h] = rot(A,ang)
rotMat = [cos((pi.*ang/180)) sin((pi.*ang/180)); -sin((pi.*ang/180)) cos((pi.*ang/180))];
centerW = round(size(A,1)/2);
centerH = round(size(A,2)/2);
h=255.* uint8(ones(size(A)));
for x = 1:size(A,1)
    for y = 1:size(A,2)
        point =[x-centerW;y-centerH] ;
        product = rotMat * point;
        product = int16(product);
        newx =product(1,1);
        newy=product(2,1);
            if newx+centerW<=size(A,1)&& newx+centerW > 0 && newy+centerH<=size(A,2)&& newy+centerH > 0 
            h(newx+centerW,newy+centerH) = A(x,y);
            end
    end
end 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-12T12:55:46.520

问题很简单，答案可能不是：`Matlab arrays`索引从一到 N（而在许多编程语言中它是从 0 到 (N-1) ）。

尝试一下`newImg( max( min(1,newX), m1.size() ) , max( min(1,newY), m1.size() ) )`（我没有使用 Matlab，所以我可以判断它是否可以工作），但生成的图像将被裁剪。

# c# - 具有不同大小的对象的内存池 - C#

> ID：13344018
> 
> 赞同：2
> 
> 时间：2012-11-12T12:49:35.500
> 
> 标签：c#, memory, garbage-collection, memory-pool

您是否有一些解决方案，如何使用对象制作对象池（**内存池**）而不是可以包含**不同大小的不同数据**？因此，如果我在内存池中请求具有一定大小的对象，它会返回给我一些分配的内存块，其大小与我的请求最接近。它应该用**C#**编写。谢谢，因为我真的不完全知道，这个和最佳算法的最佳集合是什么。在 C++ 中有一些解决方案，但 C# 没有内存池。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-12T12:55:04.273

.Net Framework 已经有这样的实现（由 Windows Communication Foundation 使用）。请参阅[缓冲区管理器](http://msdn.microsoft.com/en-us/library/system.servicemodel.channels.buffermanager.aspx)

```
var buffMgr = BufferManager.CreateBufferManager(
                 104857600, // use no more than 100 MB in total
                 10485760);  // allocate 10 MB max to each buffer
var buff = buffMgr.TakeBuffer(65535); // allocate a buffer enough to fit a 65 KB object
                           // note: this could return a buffer bigger than 65 KB 

//when done with the buffer:
buffMgr.ReturnBuffer(buff); 
```

# javascript - 将图像绘制到 html5 画布

> ID：13344019
> 
> 赞同：0
> 
> 时间：2012-11-12T12:49:37.377
> 
> 标签：javascript, html5-canvas

我正在尝试将图像绘制到 html5 画布上，但不太记得它是如何完成的。

我有以下html文档：

```
<html>
<head>
<title>Understanding Business</title>

<section hidden>
<img id = "startButton" src = "startButton.png" alt = "Start Button" height = "40" width = "50" href = "javascript:drawFirstGameElements();">
</section>
</head>

<body onLoad = "drawStartButton()">
<h1>Understanding Business</h1>
<canvas id ="gameCanvas" width = "1000" height= "500" style = "border:1px solid #000000;">Your browser does not support the HTML5 canvas.</canvas>

<script type = "text/javascript">
window.onload = function(){ 
var gameCanvas = document.getElementById("gameCanvas");
var context = gameCanvas.getContext("2d");
//gameCanvas.addEventListener('onclick', clickReporter, false);
gameCanvas.addEventListener('mouseMove', function(event){
    var mousePosition = getMouseCoords(gameCanvas, event);

});
/* Add some global variables */
var image = new Image();
var imageSource;
var imageX;
var imageY;

function drawStartButton(){
/*image.onload = function(){
    context.drawImage(image, 500, 250);
};
image.src = "startButton.png"; */
var startButtonImg = document.getElementById("startButton");
context.drawImage(startButtonImg, 500, 250);
}

function drawFirstGameElements(){
drawDescriptionBox1;
}
function drawDescriptionBox1(){
context.moveTo(100, 400);
context.lineTo(150, 400);
context.lineTo(150, 450);
context.lineTo(100, 450);
context.lineTo(100, 400);
context.moveTo(110, 425);
context.strokeText("Asset");
}

//Function to get mouse coordinates on canvas
function getMouseCoords(gameCanvas, event){
var rect = gameCanvas.getBoundingClientRect(), root = document.documentElement;

//return mouse position
var mouseX = event.clientX - rect.top - root.scrollTop;
var mouseY = event.clientY - rect.left - root.scrollLeft;
return{
    x: mouseX,
    y: mouseY
};
}
} 
```

由于某种原因，当我在浏览器中查看页面时，虽然显示了画布，但画布上没有显示“开始按钮图像”。自从我上次使用 HTML5 画布以来已经有一段时间了，我无法弄清楚我做错了什么......有人能指出我正确的方向吗？

干杯，

**编辑**

代码更新以反映建议的更改，但我仍然遇到同样的问题。还有其他建议吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-12T13:06:13.513

代码中的错字：

```
var gameCanvas = document.getElementById("gameCanvas");
var context = gameCanvas.getContext("2d");
//gameCanvas.addEventListener('onclick', clickReporter, false);
gameCanvas.addEventListener('mouseMove', function(event){
    var mousePosition = getMouseCoords(gameCanvas, event);

}); // HERE ADD );

/* Add some global variables */
var image = new Image();
var imageSource;
var imageX;
var imageY;
 //HERE DELETE THE } 
```

jsfiddle：http: [//jsfiddle.net/RqbPn/](http://jsfiddle.net/RqbPn/)

# php - 在 Dropbox 中运行一个 php 程序

> ID：13344020
> 
> 赞同：1
> 
> 时间：2012-11-12T12:49:39.120
> 
> 标签：php, xampp, dropbox

我今天开始学习php，在安装xampp（32位windows 7）后，我打开了netbeans并开始了经典的hello world。完成后，我通过 xampp 打开 apache 并尝试执行我的程序。首先我有一个

```
Object Not Found Error 
```

然后我给出了我的程序的路径，

```
http://localhost/C:/Users/zizzo/Dropbox/fraluigab/programming-luigi/php/Index.php 
```

这不是默认值，我得到了

```
Access Forbidden Error 403. 
```

现在我有两个问题：我可以把它作为我的默认路径而不是简单的 localhost 吗？然后，我怎样才能获得允许执行我的程序的访问权限？

谢谢

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-12T12:53:38.113

编辑`c:\xampp\apache\conf\httpd.conf`并查找：

```
DocumentRoot "C:/xampp/htdocs" 
```

改成：

```
DocumentRoot "C:/Users/zizzo/Dropbox/" 
```

同时寻找：

```
<Directory "C:/xampp/htdocs"> 
```

改成：

```
<Directory "C:/Users/zizzo/Dropbox/"> 
```

然后重新启动服务器。

然后你可以访问：

```
http://localhost/fraluigab/programming-luigi/php/Index.php 
```

* * *

## 回答 #2

> 赞同：-2
> 
> 时间：2012-11-12T13:40:02.083

```
http://localhost/C:/Users/zizzo/Dropbox/fraluigab/programming-luigi/php/Index.php 
```

您不能以这种方式访问​​目录。
按照 Luigi 的回答并以管理员权限运行 XAMPP，以避免任何有关权限的麻烦

# c# - 在（不适用于）Windows 8 ARM 平板电脑上编译 C#

> ID：13344024
> 
> 赞同：14
> 
> 时间：2012-11-12T12:49:42.100
> 
> 标签：c#, compiler-construction, ide, windows-runtime, arm

是否可以在 Windows 8 平板电脑 (WinRT)（ARM 处理器版本）上编码和编译 C#？

基本上可以归结为：

*   是否有在 ARM 上运行的 C# 编译器？
*   是否有可以在 WinRT 中运行的 IDE？

如果上述情况属实，我没有看到任何问题，但我目前无法找到 C# 编译器是否在 ARM 上运行（只有很多关于*为*ARM 编译的帖子）。我还查看了 SharpDevelop，发现他们的源代码编译为“任何 CPU”，根据这篇文章：[Windows RT 和 c#](https://stackoverflow.com/questions/12631363/windows-rt-and-c-sharp)，这意味着它将在 ARM 上运行。

然而，Sharpdevelop 需要 .NET 4.0“完整”运行时，我无法找到 WinRT 是否有。我打赌它不会，因为 WinRT 应该是一个真正轻量级的 Windows 版本。

作为旁注，我知道 Windows 平板电脑将有两个版本，一个用于 ARM，一个用于经典处理器。经典处理器将运行普通的 Windows 8 版本，这意味着它可以运行所有本机应用程序。在这里编译 C# 不会成为问题 - 所以问题是，我可以在 ARM 上做同样的事情吗？

* * *

这对于旅行和快速尝试新想法来说太棒了。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-11-12T18:04:34.920

目前：没有，也没有。

当然可以构建一个包含 IDE 和 C# 编译器的 Windows 应用商店应用程序。但是，您将无法运行使用此类应用程序构建的任何程序。Windows 应用商店应用程序在沙盒中以降低的权限运行。在此沙箱中，CLR 将仅加载系统程序集和应用程序包中包含的程序集。应用包是不可变的，不能在运行时修改。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-20T16:22:58.203

实际上，表面上的.Net框架包括csc.exe，即Csharp编译器。我已经获得了要编译的代码，但 WinRt 似乎不喜欢在没有正确签名的情况下运行它。

IDE 暂时不会出现，至少现在还不会。我确信通过正确的签名，可以运行已编译的可执行文件。

或者其他人可能是对的，这不仅仅是签约的问题。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-18T20:43:04.507

我已移植 SharpDevelop 以在未锁定的 Windows RT 设备上运行，它至少适用于 C# Windows Forms 应用程序。[http://chentiangemalc.wordpress.com/2013/03/18/sharpdevelop-rt-edition-beta-code-windows-forms-directly-on-windows-rt/](http://chentiangemalc.wordpress.com/2013/03/18/sharpdevelop-rt-edition-beta-code-windows-forms-directly-on-windows-rt/)

# python - 锁定多少以及何时锁定

> ID：13344028
> 
> 赞同：0
> 
> 时间：2012-11-12T12:50:11.773
> 
> 标签：python, concurrency, locking

我有一个应用程序，它以给定的间隔循环遍历项目列表（然后该列表的长度会有所不同），它为每个项目执行一个相当简单的操作，它不仅仅是添加一个值，也不是一些真正复杂的计算。

我想知道的是我应该像这样锁定每个项目（当前解决方案）：

```
def method_1:
    for item in the_list:
        do_operation(item);

def do_operation(item):
    lock()
    //do some stuff.
    unlock() 
```

或者我应该这样做：

```
def method_1:
    lock()
    for item in the_list:
        do_operation(item);
    unlock()

def do_operation(item):
    //do some stuff. 
```

我想这实际上很难回答，因为我认为这在很大程度上取决于“做一些事情”是什么以及需要多长时间。老实说，我不知道这需要多少时间。特别是与 python 获取锁所需的时间相比。

如果我能以某种方式改进我的问题，请在评论中告诉我。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-12T12:57:22.087

您通常希望尽可能短的锁定时间片。因此，您通常会在变量访问之前立即锁定并在之后立即将其删除。你不想阻塞一个完整的循环，因为它破坏了并发的主要原因。

在列表的情况下：您是否研究过专门用于线程执行的不同[队列类？](http://docs.python.org/2/library/queue.html)

jpm的评论是当场的。如果你的其他线程也做一些事情，你也希望它们受到保护。甚至可能存在线程饥饿问题。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-12T12:56:46.967

我建议锁定整个列表（选项 2）。如果您只锁定每个项目，则可以在操作过程中修改列表，这可能会出现问题，具体取决于您正在做什么。还有与每个锁定和解锁相关的开销。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-12T13:05:02.233

如果锁定只是为了保护列表（而不是项目本身），您也可以这样做

```
def method_1:
    lock()
    list = the_list[:]
    unlock()
    for item in list:
        do_operation(item); 
```

# orm - Laravel：我如何遍历 ORM 的字段和关系

> ID：13344030
> 
> 赞同：3
> 
> 时间：2012-11-12T12:50:19.730
> 
> 标签：orm, field, laravel, entity-relationship, laravel-3

在 Laravel 中，如果我为表创建 ORM，可以说页面

有没有办法列出/循环所有表字段及其值（来自数据库），最重要的是有一种方法可以列出/循环所有关系。

有没有办法访问 orm 对象的属性/字段，例如：

```
foreach($pages->fields_array as $f){
    //do something with field
} 
```

我想要做的是获取字段及其值的动态列表，以便我可以自动构建表单。

至于关系，我试图遍历所有相关表以创建链接表的下拉列表。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-08-08T22:06:43.783

在 Laravel 3 中，您可以使用 $page->attributes 循环

但不是在 Laravel 4 中。

只需这样做，然后为每一个都做。

```
$page->toArray(); // it will convert the model object into an array :) 
```

[http://laravel.com/docs/eloquent#converting-to-arrays-or-json](http://laravel.com/docs/eloquent#converting-to-arrays-or-json)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-12T13:00:33.873

这是我如何遍历一个对象及其关系（图像是本示例的关系）

```
$page = Page::with('images')->first();

// Laravel 4
foreach($page->attributes as $attr)
{
     dd($attr);
}

// Laravel 5
foreach($page->getAttributes() as $attr)
{
     dd($attr);
} 
```

# android - 使用 android 中的线程和服务每 10 秒重复一次任务

> ID：13344031
> 
> 赞同：-1
> 
> 时间：2012-11-12T12:50:28.730
> 
> 标签：android, multithreading, service

我在应用程序启动时调用了两个 Web 服务，它们在后台运行。

每项服务大约需要 35-40 秒。在这些服务完成之前，我会在单击每个选项卡时显示一个加载程序，我的 TabActiviy 中有 4 个活动。当这些服务完成时，我隐藏加载器并显示数据。

现在，我的问题是？如果网络出现故障，服务是否有机会在后台运行？，我必须如何通过对话框向用户提示该进程被网络中断。

我可以在 android 中每 10 秒或更短时间检查一次网络连接吗？这样我就可以通过对话与用户亲密并恢复服务？

提前致谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-12T13:10:56.020

试试下面的代码。

```
TimerTask refresher;

                  // Initialization code in onCreate or similar:

                  timer = new Timer();    
                  refresher = new TimerTask() {
                      public void run() {
                          handler.sendEmptyMessage(0);
                      };
                  };
                  // first event immediately,  following after 1 seconds each
                  timer.scheduleAtFixedRate(refresher, 0, 65); 

 @SuppressLint("HandlerLeak")
        final Handler handler = new Handler() {
             public void handleMessage(Message msg) {
                 switch (msg.what) {
                 case REFRESH:

                     break;
                 default:
                     break;
                 }
             }
         }; 
```

它对我来说就像一种魅力。希望这会对你有所帮助。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-12T13:00:13.633

当您使用 HTTP 连接时 - 用 try-catch 包围会阻止您的网络数据并在发生某些事情时显示错误消息。

将`Runnable`目标添加到您的`Service`

```
new Runnable() {

    @Override
    public void run() {
        while(true){
            if(socket.isConnected()){

            }else{
                // show error and call dialog
            }
        }
    }
}; 
```

如果你在使用套接字

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-12T13:01:06.540

您可以使用[Timer](http://developer.android.com/reference/java/util/Timer.html)和 Android [ConnectivityManager](http://developer.android.com/reference/android/net/ConnectivityManager.html)：

```
new Timer().scheduleAtFixedRate(checkCon, 10, 10);

private boolean checkCon() {
  ConnectivityManager conMgr =  (ConnectivityManager)getSystemService(Context.CONNECTIVITY_SERVICE);

  if ( conMgr.getNetworkInfo(0).getState() == NetworkInfo.State.DISCONNECTED 
      &&  conMgr.getNetworkInfo(1).getState() == NetworkInfo.State.DISCONNECTED) {
    return false;
  }
  return true;
} 
```

`checkCon()`如果与移动设备 ( conMgr.getNetworkInfo `false`(0)) 和 Wifi (conMgr.getNetworkInfo(1)) 的连接断开，则返回。

# ios - ios phonegap ) 我应该在哪里定位自定义推送通知声音？

> ID：13344035
> 
> 赞同：1
> 
> 时间：2012-11-12T12:50:45.530
> 
> 标签：ios, cordova

我发现我需要将我的自定义通知文件放到 xcode 项目中，但我不确定在哪里..

我应该把通知声音放在哪里？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-07-04T16:13:45.933

自定义通知声音可以任意命名，并将 .wav 文件放入 xcode 项目的 Resources 文件夹中。然后在推送通知的有效负载中指定名称。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-12T21:26:45.407

该文件必须命名`beep.wav`并放置在`www`文件夹中。

来自[科尔多瓦文档](http://docs.phonegap.com/en/edge/cordova_notification_notification.md.html#notification.beep)：

> *   iPhone 没有本机哔声 API。
>     *   Cordova 通过媒体 API 播放音频文件来实现哔声。
>     *   用户必须提供具有所需哔声的文件。
>     *   **该文件的长度必须小于 30 秒，位于 www/ 根目录中，并且必须命名为 beep.wav。**

# c# - C# ByteArray 到字符串的转换和返回

> ID：13344041
> 
> 赞同：6
> 
> 时间：2012-11-12T12:51:13.783
> 
> 标签：c#, type-conversion

我有一个 uint 值，我需要将其表示为 ByteArray 并转换为字符串。当我将字符串转换回字节数组时，我发现了不同的值。我正在使用标准的 ASCII 转换器，所以我不明白为什么我会得到不同的值。更清楚地说，这就是我正在做的事情：

```
byte[] bArray = BitConverter.GetBytes((uint)49694);
string test = System.Text.Encoding.ASCII.GetString(bArray);
byte[] result = Encoding.ASCII.GetBytes(test); 
```

bytearray 结果与第一个不同：

数组->

```
[0x00000000]: 0x1e
[0x00000001]: 0xc2
[0x00000002]: 0x00
[0x00000003]: 0x00 
```

结果->

```
[0x00000000]: 0x1e
[0x00000001]: 0x3f
[0x00000002]: 0x00
[0x00000003]: 0x00 
```

请注意，两个数组中的字节 1 是不同的。

谢谢你的支持。

问候

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2012-11-12T13:00:48.613

```
string test = System.Text.Encoding.ASCII.GetString(bArray);
byte[] result = Encoding.ASCII.GetBytes(test); 
```

因为原始数据**不是 ASCII**。`Encoding.GetString`仅当您正在解码*的数据是该编码中的文本数据***时才有意义**。其他任何东西：你破坏了它。如果您想将 a 存储为 a ，那么 base-n 是必要的 - 通常是 base-64，因为 a：它很方便（），并且 b：您可以将其放入 ASCII 中，因此您很少遇到代码页/编码问题. 例如：*`byte[]``string``Convert.{To|From}Base64String`*

 *```
byte[] bArray = BitConverter.GetBytes((uint)49694);
string test = Convert.ToBase64String(bArray); // "HsIAAA=="
byte[] result = Convert.FromBase64String(test); 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-11-12T12:53:01.300

```
Because c2 is not a valid ASCII char and it is replaced with '?'(3f) 
```

[正如@activwerx](https://stackoverflow.com/users/1033686/activwerx)在评论中建议的那样，使用将任何字节数组转换为字符串`SomeEncoding.GetString()`并不是一种安全的方法。而是使用,`Convert.FromBase64String``Convert.ToBase64String`*

# php - 在评论中查找不同样式的日期

> ID：13344045
> 
> 赞同：3
> 
> 时间：2012-11-12T12:51:21.597
> 
> 标签：php, mysql, regex

我还有一个问题`preg_match`。

我有一个表格，其中评论的日期写在评论本身中（手工），现在我需要提取该日期并放在不同的列中。

我发现，评论和日期的样式是这样的：

```
+-------+----------------------+--------------+
| id    | warning_sent         | warning_date |
+-------+----------------------+--------------+
|  6109 | 2011-06-28           | 0000-00-00   |
|  6123 | 2012 02 14           | 0000-00-00   |
|  6126 | Some text 18.11.10\n | 0000-00-00   | /* This is 2010-11-18 */
| 13750 | 2011-06-28\n         | 0000-00-00   |
|  8108 | 7-01-2010            | 0000-00-00   |
|  9954 | 2012.07.03           | 0000-00-00   |
|  6110 | Some text 21-02-2011 | 0000-00-00   |
+-------+----------------------+--------------+ 
```

现在，我唯一能想到的（并且*知道*该怎么做）就是寻找第一个数字，然后寻找最后一个数字。并且以某种方式分析中间的字符串，但是如果评论文本本身包含一个数字，这就会出现一个严重的问题。

所以问题是：**如何在评论中找到所有日期（每个评论中只有一个），并以我想要的 YYYY-MM-DD 格式将它们自动存储在另一列中？**

*编辑：*这行得通，thanx [@infinity](https://stackoverflow.com/users/464552/infinity)

```
$query = "SELECT id, warning_sent FROM data";
$result = qq( $query );

foreach( $result as $values )
{
    preg_match( '/[\d]{4}((-|\s|\.)[\d]{2}){2}|([\d]{1,2}(\.|-)){2}[\d]{2,4}/', $values['warning_sent'], $matches );

    $old_date = $matches[0];
    $new_date = '0000-00-00';

    /* 2011-06-28, 2012 02 14, 18.11.10, 7-01-2010, 2012.07.03, 21-02-2011, 20.10.2010 */
    $formattings = array( 'Y-m-d', 'Y m d', 'd.m.Y', 'd.m.y', 'j-m-Y', 'Y.m.d', 'd-m-Y' );

    for( $k=0; $k<sizeof( $formattings ); $k++ )
    {
        $sub_date = DateTime::createFromFormat( $formattings[$k], $old_date );
        $sub_date = (array)$sub_date;
        $timestamp = strtotime( $sub_date['date'] );
        $check_date = date( $formattings[$k], $timestamp );
        if( $old_date == $check_date ) $new_date = date( 'Y-m-d', $timestamp );
    }

    $warning_sent_date[$values['id']] = $new_date;

} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-12T12:58:58.113

如果您只有这 3 种格式可以使用

```
'/[\d]{4}((-|\s|\.)[\d]{2}){2}|([\d]{1,2}(\.|-)){2}[\d]{2,4}/' 
```

**更新正则表达式**

[http://regexr.com?32pbf](http://regexr.com?32pbf)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-12T13:04:45.963

您可以使用`preg_match`来*查找*注释中嵌入日期的行。其他人已经提出了这样做的方法。

但是，MySQL 没有执行正则表达式替换的内置函数。例如，Oracle dbms 提供 REGEXP_REPLACE（参见此处： [http](http://docs.oracle.com/cd/B19306_01/server.102/b14200/functions130.htm) ://docs.oracle.com/cd/B19306_01/server.102/b14200/functions130.htm ）但 MySQL 没有。

因此，您将不得不使用客户端代码来检索注释字段中带有日期的每一行，提取日期并更新该行。很麻烦吧？

# regex - 为什么这个简单的 RegEx 不适用于 sed？

> ID：13344049
> 
> 赞同：1
> 
> 时间：2012-11-12T12:51:44.097
> 
> 标签：regex, sed

这是一个非常简单的正则表达式，它不起作用，我不知道为什么。据此，[它](http://regexr.com?32pb9)应该工作。

我在 Mac (OS X 10.8.2) 上。

**脚本.sh**

```
#!/bin/bash
ZIP="software-1.3-licensetypeone.zip"
VERSION=$(sed 's/software-//g;s/-(licensetypeone|licensetypetwo).zip//g' <<< $ZIP)

echo $VERSION 
```

**终端**

```
$ sh script.sh
1.3-licensetypeone.zip 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-12T12:59:24.640

`sed`适用于简单的正则表达式。您必须使用反斜杠括号和竖线才能使其正常工作。

```
sed 's/software-//g;s/-\(licensetypeone\|licensetypetwo\)\.zip//g' 
```

请注意，我也反斜杠了点。否则，它将匹配任何字符。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-11-12T18:09:45.930

你可以在shell中做到这一点，不需要sed，参数扩展就足够了：

```
shopt -s extglob
ZIP="software-1.3-licensetypeone.zip"
tmp=${ZIP#software-}
VERSION=${tmp%-licensetype@(one|two).zip} 
```

使用最新版本的 bash（可能不随 OSX 提供），您可以使用正则表达式

```
if [[ $ZIP =~ software-([0-9.]+)-licensetype(one|two).zip ]]; then
    VERSION=${BASH_REMATCH[1]}
fi 
```

或者，如果您只想要连字符分隔的字符串中的第二个单词

```
VERSION=$(IFS=-; set -- $ZIP; echo $2) 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-11-14T03:19:50.657

查看 OS X 10.7.4的[正则表达式文档](https://developer.apple.com/library/mac/#documentation/Darwin/Reference/ManPages/man7/re_format.7.html#//apple_ref/doc/man/7/re_format)（但应适用于 OP 的 10.8.2），在最后一段中提到

> 过时的（基本）正则表达式在几个方面有所不同。`|`是一个普通的字符，它的功能没有等价物......
> 
> ...嵌套子表达式的括号是`\(' and` )'...

`sed`，没有任何选项，使用基本正则表达式 (BRE)。

要`|`在 OS X 或 BSD 中使用`sed`，您需要通过`-E`选项启用扩展正则表达式 (ERE)，即

```
sed -E 's/software-//g;s/-(licensetypeone|licensetypetwo).zip//g' 
```

p/s：`\|`在 BRE 中是一个 GNU 扩展。

* * *

提取版本号的替代方法

1.  斩波（参数扩展）

    ```
    VERSION=${ZIP#software-}
    VERSION=${VERSION%-license*.zip} 
    ```

2.  `sed`

    ```
    VERSION=$(sed 's/software-\(.*\)-license.*/\1/' <<< "$ZIP") 
    ```

    您不必将字符串与 shell 模式或正则表达式逐字匹配。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-11-12T13:03:08.127

```
$ man sed | grep "regexp-extended" -A2
       -r, --regexp-extended

              use extended regular expressions in the script. 
```

# iphone - replaceScene 期间性能缓慢

> ID：13344051
> 
> 赞同：0
> 
> 时间：2012-11-12T12:51:51.520
> 
> 标签：iphone, cocos2d-iphone

每当代码到达“replaceScene”时，我都会面临性能问题。它只发生在播放场景中。所以在游戏结束后，我会显示一个分数，然后是 CCDirector 执行 replaceScene 以返回主菜单的时候了。

等待大约 20 秒后，它终于显示主菜单。但不知何故这是不对的，玩家会觉得游戏突然挂了。然后我试着放了一些像预加载器这样的动画，它发生了同样的情况，预加载器图片做了一段时间的动画然后突然停止，我认为由于replaceScene触发了同样的问题，虽然它仍然会显示主菜单场景。注意给出一些提示如何加快所有不再需要的对象的释放。

希望在这里得到专家的解决方案。谢谢。

这是我的代码：

```
............
//button at the score pop up sprite

CCMenuItem *btContinue = [CCMenuItemImage itemFromNormalImage:BTCONTINUE 
                                                selectedImage:BTCONTINUE_ON 
                                                       target:self 
                                                     selector:@selector(goLoader)];
btContinue.anchorPoint = ccp(0,0);
btContinue.position = ccp(340, 40);

CCMenu *menu = [CCMenu menuWithItems:btContinue, nil];
menu.position = CGPointZero;

[self addChild:menu z:ZPOPUP_CONTENT];

//prepare the loader, but set visible to NO first
CCSprite *loaderBg = [CCSprite spriteWithFile:LOADER_FINISH];
loaderBg.anchorPoint = ccp(0,0);
loaderBg.position = ccp(0,0);
loaderBg.visible = NO;
[self addChild:loaderBg z:ZLOADER_BG tag:TAG_LOADER_BG];
NSLog(@"prepare loader finish");

//animate loader
CCSprite *loaderPic = [[CCSprite alloc] initWithSpriteFrame:[[CCSpriteFrameCache sharedSpriteFrameCache] 
                                                          spriteFrameByName:LOADER]];    
loaderPic.anchorPoint = ccp(0.5,0.5);
loaderPic.position = ccp(200,35);
loaderPic.visible = NO;
[self addChild:loaderPic z:ZLOADER_PIC tag:TAG_LOADER_PIC];

[loaderPic runAction:[CCRepeatForever actionWithAction:[CCRotateBy actionWithDuration:0.05f angle:10.0f]]];
}

-(void)goLoader {
NSLog(@"goMainMenuScene");
CCSprite *tmpBg = (CCSprite *) [self getChildByTag:TAG_LOADER_BG];
if (tmpBg != nil)
    tmpBg.visible = YES;

CCSprite *tmpPic = (CCSprite *) [self getChildByTag:TAG_LOADER_PIC];
if (tmpPic != nil)
    tmpPic.visible = YES;

double time = 2.0;
id delay = [CCDelayTime actionWithDuration: time];
id proceed = [CCCallFunc actionWithTarget:self selector:@selector(goMainMenuScene)];
id seq = [CCSequence actions: delay, proceed, nil];
[self runAction:seq];
}

-(void)goMainMenuScene {
[[GameManager sharedGameManager] runSceneWithID:SCENE_MAIN_MENU];
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-12T23:15:11.153

您的问题很可能是新场景，以及新场景及其子节点的 init 方法中发生的任何事情。加载资源文件可能需要很长时间。如果您推迟到 onEnter 执行此操作，您可能会看到更好的结果。但是20秒，已经很多了。检查你在做什么需要这么长时间。我敢打赌它正在加载大量资源，或者以极其低效的方式加载它们。众所周知，JPG 文件加载非常缓慢，如果您使用 JPG 将它们转换为 PNG。

# php - 如何在php中遍历xml

> ID：13344053
> 
> 赞同：1
> 
> 时间：2012-11-12T12:51:55.110
> 
> 标签：php, xml, xml-parsing

我正在使用以下功能

```
function file_get_contents_curl($url) {
    $ch = curl_init();

    curl_setopt($ch, CURLOPT_AUTOREFERER, TRUE);
    curl_setopt($ch, CURLOPT_HEADER, 0);
    curl_setopt($ch, CURLOPT_RETURNTRANSFER, 1);
    curl_setopt($ch, CURLOPT_URL, $url);
    curl_setopt($ch, CURLOPT_FOLLOWLOCATION, TRUE);       

    $data = curl_exec($ch);
    curl_close($ch);

    return $data;
}
$myTestingUrl = file_get_contents_curl("myUrl"); 
```

运行该功能后，我有

```
$myTestingUrl =
<?xml version="1.0" encoding="UTF-8"?>
<map>
    <entry key="keyName">
        <entry key="ActionUrl">http://www.my_actionUrl.com/</entry>
    </entry>
</map> 
```

您能告诉我如何遍历 $myTestingUrl 以获取 php 变量中的条目键“ActionUrl”（http://www.my_actionUrl.com/）的内容吗？

谢谢！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-12T12:56:14.023

尝试

```
$xml = simplexml_load_string($myTestingUrl );
$items = $xml->xpath('/map/entry/entry[@key="ActionUrl"]/text()');
echo $items[0]; 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-12T13:04:12.267

我更喜欢@air4x 的 XPath 方法，但这里没有 XPath - 目的是在[SimpleXML](http://uk3.php.net/manual/en/book.simplexml.php)中显示元素和属性访问：

[键盘演示](http://codepad.org/Xx31t4bM)

```
$obj = simplexml_load_string($myTestingUrl);

foreach($obj->entry as $entry)
{
    if(isset($entry->entry))
    {
        foreach($entry->entry->attributes() as $key => $value)
        {
            if($key == 'key' && $value == 'ActionUrl')
            {
                echo 'ActionUrl is: ' . (string)$entry->entry;
                break 1;
            }
        }
    }
} 
```

# iphone - 想要动态创建 UI LABEL

> ID：13344055
> 
> 赞同：0
> 
> 时间：2012-11-12T12:52:08.510
> 
> 标签：iphone, objective-c, ios5

我想动态创建标签例如，如果我有一个存储有 25 个字符的数组，我想为这些字符动态创建 25 个标签。我对管理 X 和 Y 坐标感到困惑。如何管理 X 和 Y 坐标. 谁能帮我 。任何帮助表示赞赏。

[http://www.chicagonow.com/improv-class-for-the-soul/files/2012/01/Puzzled-1-Quandaries_Enigmas.jpg](http://www.chicagonow.com/improv-class-for-the-soul/files/2012/01/Puzzled-1-Quandaries_Enigmas.jpg)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-12T13:01:26.647

```
 int x;
    int y,h,w;
    x=15,y=0,h=135,w=135;
    //int i = array.count;
    int i = CategoryArray.count;
    for (j=0; j<i; j++) {
        if (j==0) {
            x=15;
            y=25;
        }
        else{   
            if (j%2==0) {
                x=15;
                y=y+20+135;
                mainScrollView.contentSize = CGSizeMake(242, 416+y-80);
            }
            else{
                x=x+135+20;
            }
        }

        UILabel *lblFirst = [[UILabel alloc]init] ;
        lblFirst.frame = CGRectMake(x, y, h, w);
        //lblFirst.font=[UIFont boldSystemFontOfSize:16];
        lblFirst.font=[UIFont systemFontOfSize:13];
        lblFirst.backgroundColor = [UIColor clearColor];
        lblFirst.textColor = [UIColor blackColor];
        [lblFirst setText:[[CategoryArray objectAtIndex:j]valueForKey:@"i_name"]];
        [btnImage addSubview:lblFirst];

    }
} 
```

使用此代码将对您有所帮助。在 for 循环中，您制作了多个标签

# ruby-on-rails - Accepts_nested_attributes_for 在验证外键时遇到问题

> ID：13344059
> 
> 赞同：30
> 
> 时间：2012-11-12T12:52:18.257
> 
> 标签：ruby-on-rails, validation, activerecord, associations

我正在使用 Ruby on Rails v3.2.2。我想解决与使用`accepts_nested_attributes_for`和`validates_associated`RoR 方法时外键验证相关的问题。也就是说，我有以下模型类：

```
class Article < ActiveRecord::Base
  has_many :category_associations, :foreign_key => 'category_id'

  accepts_nested_attributes_for :category_associations, :reject_if => lambda { |attributes| attributes[:category_id].blank? }
  validates_associated :category_associations
end

class CategoryAssociation < ActiveRecord::Base
  belongs_to :article, :foreign_key => 'article_id'
  belongs_to :category, :foreign_key => 'category_id'

  validates :article_id, :presence => true
  validates :category_id, :presence => true
end 
```

...我有以下控制器操作：

```
class ArticlesController < ApplicationController
  def new
    @article = Article.new
    5.times { @article.category_associations.build }

    # ...
  end

 def create
   @article = Article.new(params[:article])

   if @article.save
     # ...
   else
     # ...
   end
 end
end 
```

使用上面的代码（受[嵌套模型表单第 1 部分](http://railscasts.com/episodes/196-nested-model-form-part-1?view=asciicast)Rails Cast 的“启发”） ，*我的意图是在创建文章时存储类别关联*（*注意*：类别对象已经存在于数据库中；在我的情况下，我只想存储-创建类别关联）。但是，当我从相关视图文件提交相关表单时，我收到以下错误（我正在记录错误消息）：

```
{:"category_associations.article_id"=>["can't be blank"], :category_associations=>["is invalid"]} 
```

为什么它会发生，因为它`validates_associated` [似乎](https://stackoverflow.com/questions/5176510/validates-associated-not-checking-existence-of-associations#comment5826558_5176607)运行了该方法`article.category_association.valid?`，但只有在`article.category_association.article_id`is *not* `nil`的情况下？如何解决`article_id`外键存在验证的问题？

`validates :article_id, :presence => true`但是，如果我在模型类中注释掉`CategoryAssociation`，它会按预期工作，但[它似乎*不是**不*验证外键的正确方法](https://stackoverflow.com/questions/13345250/is-it-really-needed-to-validate-foreign-keys/13346791#13346791)。

* * *

`validates_associated :category_associations`如果我在模型类中注释掉`Article`，我仍然会收到错误：

```
{:"category_associations.article_id"=>["can't be blank"]} 
```

* * *

## 回答 #1

> 赞同：45
> 
> 时间：2013-05-28T13:54:42.703

用于`inverse_of`链接关联，然后验证关联对象的存在，而不是实际外键的存在。

[文档](http://api.rubyonrails.org/classes/ActiveRecord/NestedAttributes/ClassMethods.html)中的示例：

```
class Member < ActiveRecord::Base
  has_many :posts, inverse_of: :member
  accepts_nested_attributes_for :posts
end

class Post < ActiveRecord::Base
  belongs_to :member, inverse_of: :posts
  validates_presence_of :member
end 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-06-25T02:22:57.050

由于您有一个带有accepts_nested_attributes_for 的可能嵌套表单，因此在CategoryAssociation 中您需要使验证成为有条件的，仅对更新要求存在：

`validates :article_id, presence: true, on: :update`

除了 Active Record 关联之外，您还应该在 db 级别有一个外键约束。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2021-04-05T20:19:32.300

如果您也遇到此类错误，请尝试替换：

```
validates :article_id, :presence => true
validates :category_id, :presence => true 
```

和：

```
validates :article, :presence => true
validates :category, :presence => true 
```

为我工作。

* * *

## 回答 #4

> 赞同：-2
> 
> 时间：2012-11-12T14:32:57.610

验证将在`create`or上运行`save`（如您所料），所以问问自己，“在其中的每一个上都有一个***保存***的实例被引用吗？”，因为没有保存，实例就没有 id，因为它是数据库分配ID。

* * *

编辑：就像我在评论中所说的那样，如果您要投反对票，请发表评论以说明原因。

# javascript - 在 for 循环中添加事件列表

> ID：13344061
> 
> 赞同：2
> 
> 时间：2012-11-12T12:52:43.500
> 
> 标签：javascript, dom

```
myDiv = document.getElementById('results');

div = myDiv.getElementsByTagName('div');

for (var i = 0; i < div.length; i++) {
    var division;
    division = div[i];

    // console.log(div[i]);

    division.addEventListener('mouseover', function () {
        division.style.fontWeight = "bold";
        division.style.background = "rgba(0, 7, 255, 0.29)";
    }, false);

    division.addEventListener('mouseout', function () {
        division.style.fontWeight = "";
        division.style.background = "";

    }, false); 
```

这是html代码：

```
<div id="results">
    <div>Resulat 1</div>
    <div>Resulat 2</div>

</div> 
```

我的脚本在某些文本上加粗并带有背景是当鼠标指针悬停在它上方时，它仅适用于第二个元素.. ( `<div>Resulat 2</div>`)

有人可以告诉我为什么，因为我所做的一切都适合我，即使我是 JS 初学者。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-12T12:54:48.453

你的里面有`division`什么`function()`？`division`它与您在每次迭代中更改的相同`division = div[i];`。在你的 for 循环完成之后`division`是`div[1]`. 这就是为什么您只更改第二个 div 的原因。

你可以使用闭包来解决这个问题，或者使用访问关联的对象`this`：

```
division.addEventListener('mouseover', function () {
    this.style.fontWeight = "bold";
    this.style.background = "rgba(0, 7, 255, 0.29)";
}, false);

division.addEventListener('mouseout', function () {
    this.style.fontWeight = "";
    this.style.background = "";
}, false); 
```

但是，使用 CSS 可以轻松实现您想要的效果：

```
#results > div:hover{
    font-weight:bold;
    background-color:rgba(0,7,255,0.29);
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-12T12:54:57.670

使用`this`：

```
division.addEventListener('mouseover', function() {
    this.style.fontWeight = "bold";
    this.style.background = "rgba(0, 7, 255, 0.29)";
}, false);

division.addEventListener('mouseout', function() {
    this.style.fontWeight = "";
    this.style.background = "";    
}, false);​ 
```

`division`由于循环，将保留最后一个 div。
[**现场演示**](http://jsfiddle.net/SRrm9/1/)

* * *

如有必要，另一种方法是为每次迭代创建一个私有作用域闭包。

```
for (var i = 0; i < div.length; i++) {
    (function() {
        var division = div[i];;

        division.addEventListener('mouseover', function() {
            division.style.fontWeight = "bold";
            division.style.background = "rgba(0, 7, 255, 0.29)";
        }, false);

        division.addEventListener('mouseout', function() {
            division.style.fontWeight = "";
            division.style.background = "";

        }, false);
    })();
}​ 
```

[**现场演示**](http://jsfiddle.net/SRrm9/)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-12T13:07:16.993

您正在引用最后一个将“除法”设置为带有事件侦听器的元素。做你想做的事，在它的地方使用“this”：

```
myDiv = document.getElementById('results');

div = myDiv.getElementsByTagName('div');

for (var i = 0; i < div.length; i++) {
    var division = div[i];

    division.addEventListener('mouseover', function (e) {
        this.style.fontWeight = "bold";
        this.style.background = "rgba(0, 7, 255, 0.29)";
    }, false);

    division.addEventListener('mouseout', function (e) {
        this.style.fontWeight = "normal";
        this.style.background = "inherit";
    }, false);
} 
```

# fluent-nhibernate - 带有额外列的 Fluent Nhibernate 多对多映射，更新

> ID：13344066
> 
> 赞同：0
> 
> 时间：2012-11-12T12:53:06.883
> 
> 标签：fluent-nhibernate, mapping, many-to-many

无法更新/插入数据到数据库这是我的表：

角色（ID、姓名、...）

特权（ID、姓名、...）

RolePrivilege（Id、RoleId、PrivilegeId、IsAllowed）

我有地图：

```
public class RoleWithPrivilegesEntityMap : ClassMap<RoleWithPrivilegesEntity>
{
        public RoleWithPrivilegesEntityMap()
        {
            Table( "ROLE" );
            Not.LazyLoad();
            Id( x => x.Id, "ID" ).GeneratedBy.Identity();
            Map( x => x.Name, "NAME" ).Not.Nullable().Length( 100 );
            HasMany(x => x.RolePrivileges)
                .Cascade.AllDeleteOrphan()
                .Inverse()
                .Fetch.Join().KeyColumn("RoleId");
        }
}

public class PrivilegeEntityMap : ClassMap<PrivilegeEntity>
{
    public PrivilegeEntityMap()
    {
        Table("PRIVILEGE");
        Id(x => x.Id, "ID").GeneratedBy.Identity();
        Map(x => x.Name, "NAME").Not.Nullable();
        HasMany(x => x.RolePrivileges)
            .Cascade.AllDeleteOrphan()
            .Inverse()
            .Fetch.Join().KeyColumn("PrivilegeId");
    }
}

public class RolePrivilegeEntityMap : ClassMap<RolePrivilegeEntity>
{
        public RolePrivilegeEntityMap()
        {
            Table("ROLEPRIVILEGE");
            Id(x => x.Id, "R_ID").GeneratedBy.Identity();
            Map(x => x.IsAllowed, "ISALLOWED").Not.Nullable();
            References(x => x.Role)
                .Not.Nullable()
                .Column("R_ID");
            References(x => x.Privilege)
                .Not.Nullable()
                .Column("P_ID");
        }
} 
```

我正在尝试更新现有记录

```
session.SaveOrUpdate(rolePrivilege) 
```

数据库使插入表 RolePrivilege，但我需要首先删除记录。

我究竟做错了什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-13T20:47:22.267

通常什么都不会进入数据库，因为你从不调用`session.Flush()`or `transaction.Commit()`。但是，使用 Id 生成身份，您基本上会强制 NHibernate 立即插入，因此您会看到 INSERT 语句。

您还可以摆脱 Id`RolePrivilegeEntity`并在 Role 和 Priviledge 上形成一个compositeId，这也将提高性能（无需立即插入）。

# android - Android 对还原数据库的担忧

> ID：13344069
> 
> 赞同：0
> 
> 时间：2012-11-12T12:53:19.970
> 
> 标签：android, database, database-backups

想象一下以下场景（我允许从我的应用程序备份/恢复，我正在备份/恢复整个 file.db）：

用户对数据库进行备份。将来我会更新我的应用程序，它有一个新版本的数据库。如果用户使用旧版本恢复数据库会发生什么？

我怎样才能避免这种问题？

使用 BackupHelper 是个好主意吗？我做了一个我的数据库最坏情况的模拟，给了20k，BackupHelper推荐小于1mb，用它会不会是个好主意？我认为我的应用程序永远不会超过 100kb。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-12T13:05:29.363

可能这不是最好的方法，但您可以这样做：

1-将数据库版本存储在数据库中。

2- 恢复数据库后，检查数据库版本并进行相应的更改。像

```
void afterRestoration()
{
   long dbVersion = get from db;
   if(dbVersion == 1)
   {
     alter table1 add column1;
   }
   else
   {
   }
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-12T13:10:26.103

您可以通过 a 访问 SQLite 数据库[`SQLiteOpenHelper`](http://developer.android.com/reference/android/database/sqlite/SQLiteOpenHelper.html)，它提供了三个回调`onCreate()`：`onUpgrade()`和`onOpen()`。

构造函数声明一个`version`参数，并在内部将数据库版本（存储在文件中）与提供的参数进行比较。如果请求的版本比文件的版本新，`onUpgrade(db, old, new)`则会调用您的版本，您将有机会更改表、填充行等。

恢复过程应该简单地关闭所有打开的游标和助手并复制新文件。

# html - 表在 IE 9 中未正确显示

> ID：13344071
> 
> 赞同：0
> 
> 时间：2012-11-12T12:53:27.710
> 
> 标签：html, internet-explorer, cross-browser

我的桌子有问题。FF 和 Chome 的表格看起来还不错，但 IE 在表格的顶部和下方显示了一些空间。无法弄清楚如何解决这个问题。有什么想法可以解决这个问题吗？谢谢

![IE 与 FF/Chrome 的区别](../Images/6bc42ddc4248cdf870c8fe22d1efdf72.png)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-17T11:30:23.463

你会两点。

1.  给`vertical-align:top;`边箱
2.  如果你给任何填充？IE 将采用双倍填充

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-12T12:57:21.353

尝试使用 reset.css，您可以向我们发布您的一些代码吗？

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-12T12:59:21.357

我的第一个猜测是你需要在第二个盒子上设置一个高度定义。如果这不起作用，我会查看填充定义。

# android - 从服务器访问数据时区分我的应用程序与克隆的应用程序

> ID：13344074
> 
> 赞同：2
> 
> 时间：2012-11-12T12:53:36.963
> 
> 标签：android, security, http

我有一个向移动应用程序提供数据的网站。
`Is there a way to identify myApp vs a cloned App?`
这样我就可以阻止任何克隆应用程序的访问。

在第一次使用 APP 时，我会生成一个`APP ID`, `PASS CODE`&`Access URL`
我经常更改的地方`PASS CODE`，但是如何在第一次访问时识别 myAPP 以确保我只向我自己的 APP 发出`APP ID`& 。`PASS CODE`

首次访问可以使用哪种加密方式？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-12T13:00:09.747

您可以在您的应用程序代码上拥有一个只有您的服务器知道的硬编码密钥。使用它来创建哈希签名，例如`md5(concat(key, deviceId))`. 当请求到达您的应用程序服务器时，您可以执行相同的操作并比较结果。克隆者无法通过嗅探您的应用请求来发现此密钥。获得它的唯一方法是拆卸它，但这要困难得多。

不过，这是一个简单的建议。如果您想要更复杂的解决方案，请查看[HMAC wiki](http://en.wikipedia.org/wiki/Hash-based_message_authentication_code)。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-22T09:57:03.803

[通过 Push 将令牌传递给应用程序（ Android 的 GCM](https://developer.android.com/google/gcm/index.html) ）是有意义的。使用该代码可以唯一标识应用程序，而克隆的应用程序无法访问该代码。

# objective-c - 类别和继承的区别和用途是什么？

> ID：13344075
> 
> 赞同：-3
> 
> 时间：2012-11-12T12:53:41.733
> 
> 标签：objective-c, inheritance, objective-c-category

> **可能重复：**
> [Objective-c 中继承和类别的区别](https://stackoverflow.com/questions/522341/difference-between-inheritance-and-categories-in-objective-c)

什么时候应该使用子类化，什么时候应该使用类别？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-12T13:01:49.730

当您想要扩展基础使用的功能时，子类化。

```
@interface MyObject: NSObject<SomeProtocol> 
```

当您想为您可能无法控制的代码添加便捷方法时，请添加一个类别。

```
@interface UIView (MyViewAdditions)

- (void)recursiveEnumerateSubviewsUsingBlock:(void (^)(UIView *view, BOOL *stop))block; 
```

# javascript - 为什么 appendChild 触发重新计算样式，而在 Chrome 上设置 innerHTML 不？

> ID：13344080
> 
> 赞同：3
> 
> 时间：2012-11-12T12:54:01.673
> 
> 标签：javascript, html, google-chrome, google-chrome-devtools

使用 Chrome 开发者工具中的时间轴，我使用这段小代码通过**innerHTML**和**appendChild**方法记录事件：

```
<!DOCTYPE html>

<html>
<head>
  <script>
    function testInnerHTML(){
      var wrap = document.getElementById('wrapper');
      wrap.innerHTML = "test";
    }
    function testAppendChild(){
      var wrap = document.getElementById('wrapper');
      wrap.appendChild(document.createTextNode("test"));
    }
  </script>
</head>

<body>
  <input type="button" value="innerHTML" onClick="testInnerHTML();"/>
  <input type="button" value="appendChild" onClick="testAppendChild();"/>
  <div id="wrapper"></div>
</body>
</html> 
```

我可以看到：

*   *innerHTML*触发*布局*事件 ![innertHTML 触发布局事件](../Images/51bb62a922bdf9b2a91c30ae7d88f1d9.png)
*   *appendChild*触发*布局*事件和*重新计算样式*事件 ![appendChild 触发布局并重新计算样式事件](../Images/cb769b11f290e2a8afcb8ff79dfdc830.png)

在这个示例中，每个事件几乎不需要任何处理，而且似乎或多或少是并行发生的，但是如果您使用一个大的 html 表执行此操作，您会看到重新计算样式可能需要几秒钟，并且布局会发生在那之后。所以如果我们能避免它，那就更好了！

我正在考虑使用带有文档片段的 appendChild 来避免 innerHTML 涉及的解析。但是以这种方式节省的时间被重新计算的样式丢失了......

我正在使用 Chrome 版本 23.0.1271.64 m

你知道为什么会这样吗？我应该向附加的节点添加一些内容以帮助浏览器不触发重新计算样式事件吗？

**PS：**如果对双解析事件有疑问，可以参考[Chrome上为什么一个点击设置innerHTML会触发两个解析事件？](https://stackoverflow.com/questions/13335999/why-does-a-click-setting-innerhtml-trigger-two-parsing-events-on-chrome/13343199#13343199)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-12T14:05:18.360

在 WebKit 中，`HTMLElement::setInnerHTML()`内部使用`replaceChildrenWithFragment()`，它有以下特殊情况：

```
if (hasOneTextChild(containerNode.get()) && hasOneTextChild(fragment.get())) {
    toText(containerNode->firstChild())->setData(toText(fragment->firstChild())->data(), ec);
    return;
} 
```

相反`ContainerNode::appendChild()`，它只是迭代地将节点插入容器并分派相应的事件（例如`DOMNodeInserted`。）

我同意这可能会使用一些优化。

# c# - 检索布尔值作为文本

> ID：13344081
> 
> 赞同：0
> 
> 时间：2012-11-12T12:54:05.180
> 
> 标签：c#, sql, gridview

在我的应用程序中，我有一个存储为布尔值的值。在网格视图中显示时，如何将该布尔值更改为文本。

我有这个 sql

```
SELECT     Driver.FirstName + Driver.LastName AS DriverName, Driver.PhoneNumber, 
           Booking.BookingId, Booking.DriverRating, Driver.CarId AS CarUsed 
FROM       Booking 
INNER JOIN Driver ON Booking.DriverId = Driver.DriverId 
WHERE      Booking.DriverRating = 0 
```

我正在检索所有错误（0）的驾驶员评分。现在，当我将它显示到网格视图时，我想将布尔值 false 更改为不令人满意。

我怎样才能在sql查询中做到这一点？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-12T12:57:46.327

Booking.DriverRating -> 案例 Booking.DriverRating 当 0 时为 'Unsatisfactory' 否则 'Satisfactory' 以 'Booking.DriverRating' 结尾

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-12T13:00:15.760

如何从服务器检索它作为开始的字符串？

例如

```
SELECT Driver.FirstName + Driver.LastName AS DriverName, Driver.PhoneNumber, Booking.BookingId,
 Case Booking.DriverRating When 0 then 'Unsatisfactory' else 'Satisfactory' end as DriverRating,   
Driver.CarId AS CarUsed 
FROM Booking 
INNER JOIN Driver ON Booking.DriverId = Driver.DriverId 
WHERE (Booking.DriverRating = 0) 
```

或者在您的情况下，因为您已经在使用 where 子句：

```
SELECT Driver.FirstName + Driver.LastName AS DriverName, Driver.PhoneNumber, Booking.BookingId, 
    'Unsatisfactory' as DriverRating,
    Driver.CarId AS CarUsed 
FROM Booking INNER JOIN Driver ON Booking.DriverId = Driver.DriverId 
WHERE (Booking.DriverRating = 0) 
```

# javascript - 文件上传接受头

> ID：13344082
> 
> 赞同：4
> 
> 时间：2012-11-12T12:54:15.417
> 
> 标签：javascript, extjs, http-headers

我有一个带有上传字段的 ExtJs 表单。当我提交表单时，Accept-header 是错误的。响应是 JSON，但发送的 Accept-header 是：

```
Accept:text/html,application/xhtml+xml,application/xml;q=0.9,*/*;q=0.8 
```

我有根据的猜测是它是浏览器的默认值。

在 Chrome 中，这会导致警告：资源解释为文档，但使用 MIME 类型应用程序/json 传输。

在 FireFox 中，这会导致文件下载。

结论：我必须将 Accept-header 更改/设置为`application/json`

Sencha 的[文档](http://docs.sencha.com/ext-js/4-1/#!/api/Ext.form.action.Submit-cfg-headers.)说它有一个`headers`参数，但我已经测试过，对于文件上传它不起作用。有评论说不支持。（在另一个[线程](http://www.sencha.com/forum/showthread.php?121750-How-can-I-add-headers-to-getForm.Submit%28%29-calls)中发现相同的结果）

摆脱文件下载/设置正确的Accept-header的任何建议......它不一定是ExtJs解决方案。如果你能给我一个简单的 javaScript 解决方案来在文件上传表单上设置接受标头，我可能可以将它塑造成 sencha 框架。

**更新：**

ExtJS 表单提交：

```
form.submit({
    url: API_URLS.addDocument,
    waitMsg: 'Uploading your document...',
    headers: {
        "Accept": 'application/json' //doesn't work
    },
    success: function() {
        ...
    },
    failure: function(){
        ...
    }
}); 
```

在幕后，它创建了一个与此类似的普通表单：

```
<form action="API_URLS.addDocument" enctype="multipart/form-data" method="post">
    <input type="file"/>
</form> 
```

可以通过javaScript( `submit()`)提交

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-11-12T14:16:16.677

标`Accept`头只是要求服务器以给定类型的数据进行响应。默认标题`*`中的 表示“或其他任何东西”（尽管 q 值的优先级低于此）。

如果响应是 JSON 并且您想要 JSON，那么您根本不需要触摸 Accept 标头。

问题是，如果我在两行之间正确阅读，您正在尝试使用 iframe 执行 Ajax 文件上传，而 Firefox 不会尝试将 JSON 文件呈现为文档。

有两种方法可以解决这个问题。

1.  将响应呈现为 HTML 而不是 JSON，然后使用 DOM 从中提取数据
2.  使用[XMLHttpRequest 2 和 File API](https://developer.mozilla.org/en-US/docs/Using_files_from_web_applications#Example.3A_Uploading_a_user-selected_file)上传文件而不是 iframe。（注意：这使用了浏览器支持有限的新 API）。

# c# - 实体框架，M:M 关系没有参照完整性

> ID：13344087
> 
> 赞同：0
> 
> 时间：2012-11-12T12:54:53.447
> 
> 标签：c#, entity-framework

我想做的是我有两个可以多对多链接的表，但是两边的对象可能还不存在。虽然这让我一想到它就感到不寒而栗，但这是我正在做的事情所必需的。

我以前从来没有用实体框架代码这样做过，我创建多对多关系没有问题，但只有当双方都存在时，所以我不能 100% 确定这是可能的，但希望有人会能够确定我如何实现这一目标。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-12T13:00:26.937

只要双方的实体都是可选的，您可以使用第三个实体来做到这一点：

```
public class Entity1
{
    public int Id { get; set; }
}

public class Entity2
{
    public int Id { get; set; }
}

public class Many2ManyRelationEntity
{
    public int Id { get; set; }
    public int? Entity1Id { get; set; }
    public int? Entity2Id { get; set; }
} 
```

# git - 更改 git 中的分支原点

> ID：13344101
> 
> 赞同：0
> 
> 时间：2012-11-12T12:55:49.060
> 
> 标签：git, branch, git-branch

我创建了三个分支。硕士，分期和发展。暂存和开发分支来自 master。现在，我想取出开发分支并对其进行更改，使其应该从暂存分支中出来。基本上我需要移动分支的原点。有什么办法吗？考虑到每个分支中没有代码，并且考虑到每个分支中都有一些代码。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-13T00:11:55.507

If you don't have anything committed to any of those branches, it's easy: They all point to the same commit. You don't have to do anything there.

However, if you do have some code in staging and you also have some in dev, and they both started from the same place. If you now want dev to start from the latest changes in staging, all you need to do is

```
git rebase staging 
```

when you have the dev branch checked out. For a good explanation of the workflow I think you are trying to achieve, have a read of my article here: [http://dymitruk.com/blog/2012/02/05/branch-per-feature/](http://dymitruk.com/blog/2012/02/05/branch-per-feature/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-12T15:07:49.183

你想使用[git-rebase](http://git-scm.com/docs/git-rebase)：

```
git checkout development
git rebase Staging 
```

更多详细信息，[Pro Git 电子书](http://git-scm.com/book/en/)对 git 进行了非常清晰的介绍：您可以查看[第 3.6 节：rebase](http://git-scm.com/book/en/Git-Branching-Rebasing)

检查stackoverflow上标签的[信息部分：](https://stackoverflow.com/tags/git/info)[什么是变基？](https://stackoverflow.com/questions/315911/git-for-beginners-the-definitive-practical-guide/5985070#5985070)`git`

# javascript - 在新的 HTML 页面上执行 Javascript

> ID：13344102
> 
> 赞同：0
> 
> 时间：2012-11-12T12:55:49.590
> 
> 标签：javascript, jquery, window

我有两个 HTML 页面（A.html 和 B.html）。在页面 A 上有一个名为“UploadButton”的按钮

```
<input id="UploadButton" type="button" value="Dateien auswählen" /> 
```

这连接到一些 jQuery 代码

```
<script language="javascript" type="text/javascript">
    $(function () {
        $().SPServices({
            operation: "GetList",
            listName: "Doc",
            async: false,
            completefunc: function (xData, Status) {
                id = $(xData.responseXML).find("List").attr("ID");
            }
        });

        reference = "./_layouts/Upload.aspx?List=" + id + "&amp;RootFolder=";

        $('#UploadButton').click(function (event) {
            NewItem2(event, reference);
            return false;
        });
    });
</script> 
```

到目前为止一切顺利... Button 或更接近的 NewItem2() 方法打开了一个新的 HTML 页面（页面 B）。在页面 B 上有一个我想点击的锚点。

所以我的问题是，如何使用页面 A 中的脚本单击页面 B 上的锚点。有可能这样做吗？我不知道如何正确地做到这一点。

NewItem2() 不是我亲笔写的，所以我不能告诉你那里发生了什么。我试图通过谷歌或论坛找到一些东西，但我不知道如何称呼我的问题，所以我什么也没找到，抱歉。

感谢所有的努力！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-12T13:07:01.687

简单 - 您不能在页面 B 上使用页面 A 的脚本变量。

当您只想单击 HTML 锚点时，为什么不简单地将#anchorname 添加到您的引用中以创建相同的效果？

在页面之间提交信息的最简单方法是[QueryString](http://en.wikipedia.org/wiki/Query_string)。只需传递您要单击的控件的 ID 并编写一些 javascript 来读取[QueryString](http://en.wikipedia.org/wiki/Query_string)并执行 .click()。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-12T13:06:12.217

应该通过将您的 JavaScript/jQuery 代码复制到另一个文件来使用外部 JavaScript 文件，并在最后将您的这个文件包含在两个页面（A.html 和 B.html）中设置扩展名 .js，如下所示。

```
<SCRIPT TYPE="text/javascript" SRC="|YOUR FILE NAME|" /> 
```

因此，您无需为执行相同类型操作的不同页面指定不同的方法。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-12T13:20:38.377

如果`window.open`用于打开该新窗口，则可以像这样引用该窗口：

```
var newWindow = window.open("...new window url here..."); 
```

而且，使用`newWindow`您可以访问其内容：

```
newWindow.$("#anchore_to_click").click() 
```

（假设 jquery 也可用）

# java - 将java日期转换为json日期

> ID：13344103
> 
> 赞同：0
> 
> 时间：2012-11-12T12:55:50.337
> 
> 标签：java, android, json

请有人帮我解决这个问题

我有一个简单的 Date 对象，例如：

```
Date dt = new Date(); 
```

我想将其转换为 json 日期格式，例如：

```
"\/Date(928164000000-0400)\/" 
```

怎么做。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-12T13:01:24.557

采用

```
Date dt = new Date();
"\/Date(" + dt.getTime() + "-0400)\/" 
```

您可能需要首先解析 getTime()，具体取决于您当前的日期格式。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-12T13:01:31.167

这是使用**com.google.gson.***

```
final JsonSerializer<Date> dateSerialize = new JsonSerializer<Date>()
    {

        @Override
        public JsonElement serialize(final Date src,
                final Type typeOfSrc,
                final JsonSerializationContext context)
        {
            final String dateString = "Date(" + src.getTime() + "-" + src.getTimezoneOffset()+")";
            return new JsonPrimitive(dateString);

        }

    };

Gson gson = GsonBuilder().registerTypeAdapter(Date.class, dateSerialize)                
            .create();

Date dt = new Date();*

gson.toJson(dt); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-12T13:03:38.743

[JSON](http://www.json.org/)中没有真正的日期格式，只有一些不通用的约定。

话虽如此，您的“日期”分为两部分：

*   自纪元以来的毫秒数。您可以使用 getTime() 方法在 UTC 中获取此信息
*   时区偏移

但是 java `Date`（与 a 相反`calendar`），就像 javascript 一样，不包含时间偏移量（`getTimezoneOffset()`已弃用）。因此，您必须决定要使用哪一个。或者，您可以像我一样，简单地发送带有零偏移量的 UTC 时间戳：

```
var jsonDateUTC = "Date("+javaDate.getTime()+"-0000)"; 
```

# c# - WCF Data Service provider against Code First Context using inheritance in models

> ID：13344109
> 
> 赞同：0
> 
> 时间：2012-11-12T12:56:10.293
> 
> 标签：c#, asp.net-mvc-3, wcf, entity-framework, wcf-data-services

We started out building an application which had a public side to submit forms. It is a code first EF based application, with models that have inheritance(Table per type, table per hierarchy and associations .

A decision was made to separate the concerns, the internal portal part of the application kept on an internal server, and the public form submissions on a separate server. So I was looking for the best way to let the public form submission still use the same EF Code First Models definitions that are on the internal side.

My initial thoughts were to create a WCF Data Service on the internal portal side and expose that to the app on the server that is hosting the public side, thus giving it the models. And then also expose a submission service on the internal portal, so that the public form can just submit straight to that. The public form also needs to get some lookup information from the database, which is behind the internal portal app, I was planning to serve that up by web service.

If anyone has any suggested best ways to accomplish what I'm after, possibly not even WCF Data Service then please help?

But I've started creating a WCF Data Service and tried it against a context which has a basic model, but whenever I try it against a model class which inherits then it just errors with:

```
Request Error
The server encountered an error processing the request. See server logs for more details. 
```

As this is a local development environment I can not see any logs. I've also tried WCF Data Services Version 5, same result. I have tried the settings [here](http://blogs.msdn.com/b/phaniraj/archive/2008/06/18/debugging-ado-net-data-services.aspx) to get more information on the error, but it doesn't show anything more.

So... 1\. Is there a better way to do what I'm trying to do with splitting things? 2\. Is there an issue with inheritance EF, Code First and WCF Data Services.

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-14T12:03:41.427

I was missing the connection string in the Web.Config of the WCF Data Service. It all started singing after that.

# python - 如何强制我的 ObjectListView 在新数据上刷新其列宽？

> ID：13344115
> 
> 赞同：0
> 
> 时间：2012-11-12T12:56:35.817
> 
> 标签：python, wxpython

我正在使用 ListCtrl 子类[ObjectListView](http://wiki.wxpython.org/ObjectListView)，我遇到的问题是，在将一些数据设置到列表后，所有列都设置为它们的最小宽度，直到我调整我的窗口大小，它们才会弹出到正确的宽度。更具体地说，我的一列设置为调整大小以填充剩余空间，并且在我调整窗口大小之前它不会这样做。

我该如何解决？

*（我在 OSX 10.8.1 Mountain Lion 上使用 wxPython 2.9）*

* * *

```
self.results_list = ObjectListView(self, style=wx.LC_REPORT)
self.results_list.SetColumns([
    ColumnDefn('Street name', 'left', valueGetter='streetname',
               minimumWidth=150),
    ColumnDefn('House number', 'left', valueGetter='housenumber',
               minimumWidth=100),
    ColumnDefn('Letter', 'left', valueGetter='letter',
               minimumWidth=75),
    ColumnDefn('Postal code', 'right', valueGetter='postalcode',
               minimumWidth=120),
    ColumnDefn('City', 'left', valueGetter='city', minimumWidth=100,
               isSpaceFilling=True),
]) 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-12T14:23:55.630

我会尝试在小部件的父级上调用 Layout 。有时是尺寸仪、面板或框架本身。我通常会尝试每一个，直到找到一个有效的。这在 Windows 和（我认为）Ubuntu 上对我有用。

# python - ComboBox 为空单元格绘制错误并在 OSX 上滚动

> ID：13344125
> 
> 赞同：0
> 
> 时间：2012-11-12T12:57:28.243
> 
> 标签：python, wxpython, wxwidgets

给定一个简单`wx.grid.Grid`的`wx.grid.GridCellChoiceEditor`默认单元格编辑器。现在尝试在网格中向下滚动并开始在空单元格上进行编辑。现在，如果单元格有值，一切都会好起来的。但是，当单元格为空时，ComboBox 的 TextCtrl 被绘制在错误的位置。似乎垂直滚动偏移量被减去了两次。[示例应用程序的源代码](https://gist.github.com/4059634/ac3784ef3e30aa3cf9969f10661c34e3abb11886)。

![正确渲染](../Images/d046a22010953156570be6e15e4716e4.png)

![渲染不正确](../Images/e59a0f3e07e5a667775095066d2a8132.png)

WX 版本 2.9.4.0

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-12T14:20:54.310

作为一种解决方法，我现在在即将显示编辑器时设置一个非空值。使用 a`wx.CallAfter`我将值再次设置为空，因此用户不会注意到任何内容。但是，网格中的值将保持为非空值（空格），因为在回调中更改它会触发不正确的重新渲染。

```
def __init__(...):
    # ...
    self.grid1.Bind(wx.grid.EVT_GRID_EDITOR_CREATED, self.editor_created)
    self.grid1.Bind(wx.grid.EVT_GRID_EDITOR_SHOWN, self.editor_shown)

def editor_created(self, event):
    self.control = event.GetControl()
    event.Skip()

def editor_shown(self, event):
    cursor = event.Row, event.Col
    value = self.grid1.GetCellValue(*cursor)
    if not value:
        self.grid1.SetCellValue(cursor[0], cursor[1], ' ')
        def unfix():
            self.control.SetValue(value)
            self.control.Popup()
            # @todo should set the cell value back to empty value here,
            # but that triggers the bug again.
        wx.CallAfter(unfix)
    event.Skip() 
```

还有一个工作示例的[源代码](https://gist.github.com/4059634/fb02f9edc6f08d29ac7e99eaf268e1ba3d6a0eeb)。

# java - 我可以使用 log4j 在 Java 方法中设置日志记录级别吗？

> ID：13344131
> 
> 赞同：9
> 
> 时间：2012-11-12T12:57:56.047
> 
> 标签：java, log4j

我在一个非常冗长的类中有一个方法，这使得日志难以阅读。我想通过仅更改该方法的级别来减少其日志记录，而使同一类中的其他方法保持不变。这可能吗？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-11-12T13:00:32.530

您可以更改该类的级别配置，但不能更改类中的特定方法。做你想做的事情的唯一方法是在该方法中使用不同的记录器，然后在不同的级别配置它。

希望这可以帮助。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-11-12T13:02:16.840

您不能基于每个方法更改日志记录级别。“记录器”是最精细的控制粒度级别。通常，记录器实例和类之间存在一对一的关系……尽管这取决于应用程序的编码方式。

如果您可以更改代码，我建议您为嘈杂的方法创建特殊的记录器对象，以便您可以独立于使用现有记录器的其他代码来控制它。（或者也许只是改变方法的记录器调用。）

如果您无法更改代码，您可能不得不求助于“hacks”，例如对日志文件进行后处理，或者编写和配置自定义`Appender`来抑制不需要的日志消息。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-12T13:00:51.687

我不认为直接为一个方法更改日志记录方法是可能的

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-11-12T13:30:51.330

这是可能的。请参阅我对 OP 的评论。

诀窍是创建一个自定义级别（小于 TRACE）（如此[处](http://jaitechwriteups.blogspot.it/2006/07/create-your-own-logging-level-in-log4j.html)所述）并在非常详细的方法中使用该日志级别。

Ofc 在该方法中，您不会使用 Logger 快捷方式来记录方法，但您应该使用 Logger.log(Level, Object) 和 Logger.log (Level, Object, Thowable) 方法。

# c++ - 将十六进制数的 char[] 转换为 ascii 表中十六进制数对应的字母的 char[] 并反转

> ID：13344134
> 
> 赞同：1
> 
> 时间：2012-11-12T12:58:11.843
> 
> 标签：c++

我有一个`char a[]`像这样的十六进制字符：

> “315c4eeaa8b5f8aaf9174145bf43e1784b8fa00dc71d885a804e5ee9fa40b16349c146fb778cdf2d3aff021dfff5b403b510d0d0455468aeb98622b137dae857553ccd8883a7bc37520e06e515d22c954eba5025b8cc57ee59418ce7dc6bc41556bdb36bbca3e8774301fbcaa3b83b220809560987815f65286764703de0f3d524400a19b159610b11ef3e”

我想将其转换为与每个十六进制数字对应的字母，如下所示：

```
68656c6c6f = hello 
```

并将其存储，`char b[]`然后执行相反的操作

我不想要代码块，我想要解释以及使用了哪些库以及如何使用它。

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-12T13:06:07.897

将十六进制字符串转换为字符串可以通过使用[`std::substr`](http://en.cppreference.com/w/cpp/string/basic_string/substr)获取十六进制字符串的下两个字符，然后使用[`std::stoi`](http://en.cppreference.com/w/cpp/string/basic_string/stol)将子字符串转换为整数。这可以强制转换为添加到`std::string`. 该`std::stoi`函数仅适用于 C++11，如果没有，可以使用 eg [`std::strtol`](http://en.cppreference.com/w/cpp/string/byte/strtol)。

要执行相反的操作，您循环输入字符串中的每个字符，将其转换为整数并将其放在[`std::ostringstream`](http://en.cppreference.com/w/cpp/io/basic_ostringstream)前面的操作符中，以使其显示为[两位数](http://en.cppreference.com/w/cpp/io/manip/setw)、[零前缀的](http://en.cppreference.com/w/cpp/io/manip/setfill) [十六进制数](http://en.cppreference.com/w/cpp/io/manip/hex)。附加到输出字符串。

如果需要，用于[`std::string::c_str`](http://en.cppreference.com/w/cpp/string/basic_string/c_str)获取旧式 C`char`指针。

没有外部库，只使用 C++ 标准库。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-12T13:09:23.427

假设你在谈论 ASCII 码。好吧，第一步是找到 的大小`b`。假设您有 2 个十六进制数字的所有字符（例如， a`tab`将是`09`），那么 size of`b`只是`strlen(a) / 2 + 1`。

完成后，您需要遍历`a`2 x 2 的字母，将它们转换为整数值并将其存储为字符串。写成一个公式，你有：

```
b[i] = (to_digit(a[2*i]) << 4) + to_digit(a[2*i+1])) 
```

where`to_digit(x)`转换`'0'-'9'`为`0-9`and`'a'-'z'`或`'A'-'Z'`to `10-15`。

请注意，如果下面的字符`0x10`仅显示一个字符（我能想到的唯一一个字符是`tab`，那么不要使用`2*i`as index to `a`，您应该`next_index`在循环中保留 a ，如果加 2，`a[next_index] < '8'`否则加 1 。在后一种情况下，`b[i] = to_digit(a[next_index])`。

这个操作的逆过程非常相似。每个字符`b[i]`都写成：

```
a[2*i] = to_char(b[i] >> 4)
a[2*i+1] = to_char(b[i] & 0xf) 
```

`to_char`的对立面在哪里`to_digit`。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-12T13:09:42.053

向前：

1.  从输入中读取两个十六进制字符。
2.  转换为 int (0..255)。（提示：sscanf 是一种方法）
3.  将 int 附加到输出 char 数组
4.  重复 1-3 直到没有字符。
5.  空终止数组

逆转：

1.  从数组中读取单个字符
2.  转换为 2 个十六进制字符（提示：sprintf 是一种方法）。
3.  从 (2) 连接缓冲区到最终输出字符串缓冲区。
4.  重复 1-3 直到没有字符。

差点忘了提。仅需要 stdio.h 和常规 C 运行时 - 假设您正在使用`sscanf`and `sprintf`. 您也可以创建一对可以从根本上加快转换速度的转换表。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-11-12T13:04:12.723

每个十六进制数字对应 4 位，因为 4 位有 16 个可能的位模式（并且有 16 个可能的十六进制数字，每个代表一个唯一的 4 位模式）。

因此，两个十六进制数字对应 8 位。

在当今的大多数计算机上（一些德州仪器数字信号处理器是一个例外），C++`char`是 8 位的。

这意味着每个 C++`char`都由 2 个十六进制数字表示。

因此，只需一次读取两个十六进制数字，转换为`int`使用例如 an `istringstream`，将其转换为`char`，并将每个`char`值附加到 a `std::string`。

另一个方向正好相反，但有一个扭曲。

因为`char`在大多数系统上都已签名，所以您需要先转换为，`unsigned char`然后再将该值转换为十六进制数字。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-11-12T13:11:37.493

可以使用 来完成与十六进制之间的转换`hex`，例如

```
cout << hex << x;
cin >> hex >> x; 
```

的合适定义`x`，例如`int x`

这也适用于字符串流。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-11-12T13:32:27.240

这是一个简单的代码来解决这个问题：

```
unsigned int hex_digit_value(char c)
{
    if ('0' <= c && c <= '9') { return c - '0'; }
    if ('a' <= c && c <= 'f') { return c + 10 - 'a'; }
    if ('A' <= c && c <= 'F') { return c + 10 - 'A'; }
    return -1;
}

std::string dehexify(std::string const & s)
{
    std::string result(s.size() / 2);

    for (std::size_t i = 0; i != s.size(); ++i)
    {
        result[i] = hex_digit_value(s[2 * i]) * 16
                  + hex_digit_value(s[2 * i + 1]);
    }

    return result;
} 
```

**用法：**

```
char const a[] = "12AB";

std::string s = dehexify(a); 
```

**笔记：**

*   正确的实现会添加检查输入字符串长度是否为偶数，并且每个数字实际上是有效的十六进制数字。

*   Dehexifying 与 ASCII 无关。它只是将*任何*半字节的十六进制序列转换为字节序列。我只是`std::string`用作一个方便的“字节容器”，这正是它的本质。

*   SO上有几十个答案向您展示如何走另一条路；只需搜索“hexify”。

# android - 在android中更改alertdialog的标题大小？

> ID：13344139
> 
> 赞同：7
> 
> 时间：2012-11-12T12:58:28.090
> 
> 标签：android, android-alertdialog

关于消息中的文字没有问题。我无法更改（个性化）警报对话框标题的颜色、字体、样式？

有什么办法？

谢谢！

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-11-12T13:02:18.783

关于字体大小，您可以使用：

```
SpannableStringBuilder ssBuilser = new SpannableStringBuilder("Sample");
StyleSpan span = new StyleSpan(Typeface.ITALIC);
ScaleXSpan span1 = new ScaleXSpan(1);
ssBuilser.setSpan(span, 0, 5, Spanned.SPAN_INCLUSIVE_INCLUSIVE);
ssBuilser.setSpan(span1, 0, 5, Spanned.SPAN_INCLUSIVE_INCLUSIVE);

AlertDialog.Builder builder = new AlertDialog.Builder(MainActivity.this);
   builder.setTitle(ssBuilser);
   builder.show(); 
```

或者

```
AlertDialog dialog = new AlertDialog.Builder(this).setMessage("Hello world").show();
TextView textView = (TextView) dialog.findViewById(android.R.id.message);
textView.setTextSize(40); 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-11-12T13:03:51.783

查看此链接：[创建对话框](http://developer.android.com/guide/topics/ui/dialogs.html)

这应该会有所帮助。

或者这个[警报对话框生成器](http://developer.android.com/reference/android/app/AlertDialog.Builder.html "警报对话框")

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-12T13:04:24.877

这是一个完整的示例，我将如何做到这一点。见最后一行代码。

```
AlertDialog.Builder alertDialogBuilder = new AlertDialog.Builder(cntx);
alertDialogBuilder
.setMessage(Html.fromHtml(cntx.getString(R.string.UltimateDemoText)))
.setCancelable(false)
.setPositiveButton(cntx.getString(R.string.Ok), new DialogInterface.OnClickListener() {
    public void onClick(DialogInterface dialog,int id) { 
    dialog.cancel(); 
    }
 });
AlertDialog alertDialog = alertDialogBuilder.create();    
alertDialog.show();

((TextView)alertDialog.findViewById(android.R.id.title)).setTextSize(TypedValue.COMPLEX_UNIT_SP, 9); 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2018-03-19T10:50:50.900

还有另一种方法可以将新的自定义视图设置为对话框标题。我们可以定义每个自定义视图，例如`TextView`并为其添加一些自定义属性并将其设置为对话框标题：

```
 AlertDialog.Builder builder = new AlertDialog.Builder(OrderItemsActivity.this);

TextView title_of_dialog = new TextView(getApplicationContext());
title_of_dialog.setHeight(50);
title_of_dialog.setBackgroundColor(Color.RED);
title_of_dialog.setText("Custom title");
title_of_dialog.setTextSize(TypedValue.COMPLEX_UNIT_SP, 15);
title_of_dialog.setTextColor(Color.WHITE);
title_of_dialog.setGravity(Gravity.CENTER);

builder.setCustomTitle(title_of_dialog);
builder.create().show(); 
```

在这里，我定义了一个动态`TextView`并为其设置了一些属性。最后，我使用`setCustomTitle()`.

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2014-02-26T12:11:09.017

让我们以这个自定义对话框为例。以下是用于制作它的文件：

**资源/布局/dialog.xml：**

```
<RelativeLayout xmlns:android="http://schemas.android.com/apk/res/android"
android:layout_width="wrap_content"
android:layout_height="wrap_content">  <EditText
    android:id="@+id/et_pc_forDialog"
    android:layout_width="fill_parent"
    android:layout_height="wrap_content"
    android:layout_alignParentLeft="true"
    android:layout_below="@+id/tv_pc_dialogTitle"
    android:layout_marginLeft="5dp"
    android:layout_marginRight="5dp"
    android:layout_marginTop="20dp"
    android:ems="10"
    android:paddingLeft="10dp"
    android:paddingRight="10dp"
    android:hint="Enter Something to search .."
    android:singleLine="true"
    android:textColor="#FFFFFF"  >
    <requestFocus />
</EditText>
<TextView
    android:id="@+id/tv_pc_dialogTitle"
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"
    android:layout_alignParentLeft="true"
    android:layout_alignParentTop="true"
    android:layout_centerHorizontal="true"
    android:layout_marginLeft="5dp"
    android:text="SEARCH"
    android:textColor="#FFFFFF"
    android:textAppearance="?android:attr/textAppearanceLarge" />
<Button
    android:id="@+id/bt_pc_goButton"
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"
    android:layout_below="@+id/et_pc_forDialog"
    android:layout_centerHorizontal="true"
    android:layout_marginTop="14dp"
    android:text="GO"
    android:textColor="#FFFFFF"
    android:textSize="25sp" /> </RelativeLayout> 
```

**资源/布局/activity_main.xml**

```
<RelativeLayout xmlns:android="http://schemas.android.com/apk/res/android"
xmlns:tools="http://schemas.android.com/tools"
android:layout_width="match_parent"
android:layout_height="match_parent"
android:paddingBottom="@dimen/activity_vertical_margin"
android:paddingLeft="@dimen/activity_horizontal_margin"
android:paddingRight="@dimen/activity_horizontal_margin"
android:paddingTop="@dimen/activity_vertical_margin"
tools:context=".MainActivity" >

<Button
    android:id="@+id/button1"
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"
    android:layout_alignParentTop="true"
    android:layout_centerHorizontal="true"
    android:layout_marginTop="177dp"
    android:text="Open Dialog" />
</RelativeLayout> 
```

**MainActivity.java ：**

```
package com.bhavit.stackoverflow;
import android.os.Bundle;
import android.app.Activity;
import android.app.Dialog;
import android.app.Dialog;
import android.graphics.Typeface;
import android.view.Menu;
import android.view.View;
import android.view.Window;
import android.widget.Button;
import android.widget.TextView;
import android.app.Dialog;
import android.graphics.Typeface;
import android.view.Menu;
import android.view.View;
import android.view.Window;
import android.widget.Button;
import android.widget.TextView;
public class MainActivity extends Activity {

@Override
protected void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.activity_main);

    Button openDialog = (Button) findViewById(R.id.button1);
    openDialog.setOnClickListener(new View.OnClickListener() {

        @Override
        public void onClick(View v) {

            Dialog dialog = new Dialog(MainActivity.this); // here write the name of your activity in place of "YourActivity"
            dialog.requestWindowFeature(Window.FEATURE_NO_TITLE);
            dialog.setContentView(R.layout.dialog);
            TextView tv = (TextView)dialog.findViewById(R.id.tv_pc_dialogTitle);
            Typeface tf = Typeface.createFromAsset(getAssets(), "fonts/GOTHIC.TTF"); // here GOTHIC.TTF is the font-file I have pasted in the asset/fonts folder in my project 
            tv.setTypeface(tf); // Set the typeface like this

            Button bt = (Button) dialog.findViewById(R.id.bt_pc_goButton);
            bt.setOnClickListener(new View.OnClickListener() {

                @Override
                public void onClick(View v) {

                    // Write here, what do you want to do on button click

                }
            });

            dialog.show();

        }
    });

    }
 } 
```

这就是您可以制作自定义对话框并自定义该对话框组件的方式。在这里，我为对话框的标题设置了自定义字体。

# iphone - 如何使查看他的背景透明

> ID：13344142
> 
> 赞同：0
> 
> 时间：2012-11-12T12:58:38.303
> 
> 标签：iphone, objective-c, ios, uiviewcontroller, transparency

我有一个视图控制器，可以在其中模拟视图。我有一个 firstViewController，我有 loginViewController。这是我如何在 firstViewcontroller 顶部弹出 loginViewontroller 的代码。

在 firstViewController.m

```
LoginViewController *login = [[LoginViewController alloc]initWithNibName:@"LoginViewController" bundle:NULL];

        [self presentModalViewController:login animated:YES]; 
```

在 loginViewController 我有以下功能。

```
-(void)initialDelayEnded {
    self.view.transform = CGAffineTransformScale(CGAffineTransformIdentity, 0.001, 0.001);
    self.view.alpha = 0.0;
    [UIView animateWithDuration:1.0/1.5 animations:^{
        self.view.transform = CGAffineTransformScale(CGAffineTransformIdentity, 1.1, 1.1);
    }completion:^(BOOL complete){
        [UIView animateWithDuration:1.0/2 animations:^{
            self.view.transform = CGAffineTransformScale(CGAffineTransformIdentity, 0.9, 0.9);
        }completion:^(BOOL complete){
            [UIView animateWithDuration:1.0/2 animations:^{
                self.view.transform = CGAffineTransformIdentity;
            }];
        }];
    }];

} 
```

在 firstViewcontroller 我有一个背景图像。我现在要做的是loginViewcontroller弹出图像仍然可见。

有谁能够帮助我？

提前致谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-12T13:11:11.180

您无法看穿视图控制器堆栈。最简单的解决方案是将您在 firstviewcontroller 中的背景图像传递给第二个并将其设置为背景。

在 LoginViewController.h 上有一个属性

```
@property (nonatomic, strong) UIImage* image; 
```

然后当你实例化控制器时

```
LoginViewController *login = [[LoginViewController alloc]initWithNibName:@"LoginViewController" bundle:NULL];
    login.image = self.backgroundImage; //Set the image to the background image
    [self presentModalViewController:login animated:YES]; 
```

最后，在`viewDidLoad`loginViewController.m 中

```
 self.view.backgroundColor = [UIColor colorWithPatternImage:self.image]; 
```

# xslt - XSLT：删除特定节点下的空元素

> ID：13344144
> 
> 赞同：1
> 
> 时间：2012-11-12T12:58:48.753
> 
> 标签：xslt

输入

```
 <person>
    <address>
       <city>NY</city>
       <state></state>
       <country>US</country>
    </address>
    <other>
       <gender></gender>
       <age>22</age>
       <weight/>
    </other>
 </person> 
```

我只想从“其他”节点中删除空元素，“其他”下的标签也不固定。

输出

```
<person>
    <address>
       <city>NY</city>
       <state></state>
       <country>US</country>
    </address>
    <other>
       <age>22</age>
    </other>
 </person> 
```

我是 xslt 的新手，所以请帮忙..

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-12T13:09:20.623

**这种转变：**

```
<xsl:stylesheet version="1.0" xmlns:xsl="http://www.w3.org/1999/XSL/Transform">
 <xsl:output omit-xml-declaration="yes" indent="yes"/>
 <xsl:strip-space elements="*"/>

 <xsl:template match="node()|@*">
     <xsl:copy>
       <xsl:apply-templates select="node()|@*"/>
     </xsl:copy>
 </xsl:template>

 <xsl:template match="other/*[not(node())]"/>
</xsl:stylesheet> 
```

**应用于提供的 XML 文档时：**

```
<person>
    <address>
        <city>NY</city>
        <state></state>
        <country>US</country>
    </address>
    <other>
        <gender></gender>
        <age>22</age>
        <weight/>
    </other>
</person> 
```

**产生想要的正确结果：**

```
<person>
   <address>
      <city>NY</city>
      <state/>
      <country>US</country>
   </address>
   <other>
      <age>22</age>
   </other>
</person> 
```

**说明**：

1.  **[身份规则](http://www.dpawson.co.uk/xsl/sect2/identity.html)**“按原样”复制每个匹配的节点，并为其选择执行。

2.  唯一覆盖标识模板的模板匹配任何作为其子`other`节点且没有子节点的元素（为空）。由于这个模板没有正文，这有效地“删除”了匹配的元素。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-13T16:12:06.053

```
<?xml version="1.0" encoding="UTF-8"?>
<xsl:stylesheet version="2.0" xmlns:xsl="http://www.w3.org/1999/XSL/Transform">
    <xsl:output method="xml"/>
    <xsl:template match="/">
        <xsl:apply-templates select="person"/>
    </xsl:template>
    <xsl:template match="person">
        <person>
            <xsl:copy-of select="address"/>
            <xsl:apply-templates select="other"/>
        </person>
    </xsl:template>
    <xsl:template match="other">
        <xsl:for-each select="child::*">
            <xsl:if test=".!=''">
                <xsl:copy-of select="."/>
            </xsl:if>
        </xsl:for-each>
    </xsl:template>
</xsl:stylesheet> 
```

# sql-server - 如果单独声明参数，则 EXEC sproc 不返回任何结果

> ID：13344149
> 
> 赞同：0
> 
> 时间：2012-11-12T12:59:08.707
> 
> 标签：sql-server

我很困惑为什么这会返回结果：

```
EXEC GTKT_SP_Attachments @Operation = N'GetAllPhotoIDs', @TicketID = 1 
```

但这不会：

```
DECLARE @Operation AS nvarchar(29) = N'GetAllPhotoIDs',
        @TicketID AS int = 1

EXEC GTKT_SP_Attachments @Operation, @TicketID 
```

有任何想法吗？

更新：**EXEC GTKT_SP_Attachments @TicketID，@Operation 不起作用，**因为 Operation 和 TicketID 之间有更多参数（错误：将数据类型 nvarchar 转换为 int 时出错）；**GTKT_SP_Attachments @Operation = @Operation, @TicketID = @TicketID**不会像原始调用那样返回任何内容

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-12T14:45:22.923

```
EXEC GTKT_SP_Attachments @Operation, @TicketID 
```

和打字是一样的

```
EXEC GTKT_SP_Attachments N'GetAllPhotoIDs', 1 
```

在你的例子中。正如 Mikael 在上面的评论中提到的，参数是按位置绑定的，而不是按名称绑定的。

采用

```
EXEC GTKT_SP_Attachments @Operation = @Operation, @TicketID = @TicketID 
```

# ruby-on-rails - 如何使用 Eclipse 启动和设置 Ruby On Rails 开发

> ID：13344154
> 
> 赞同：0
> 
> 时间：2012-11-12T12:59:29.173
> 
> 标签：ruby-on-rails

我在 Java 和 Eclipse 方面拥有出色的经验，但是对于 Ruby on Rails 来说是新手，任何人都可以指出最好的资源，或者我可以遵循的步骤来开始 Ruby On Rails 开发和 windows 环境设置。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-12T13:09:48.883

我认为这`Rails Tutorial`是您开始学习、设置环境和开发 Ruby on Rails 的最佳场所：

*   [Rails 教程](http://ruby.railstutorial.org/ruby-on-rails-tutorial-book)
*   [Rails 指南](http://guides.rubyonrails.org/)和关于[API](http://api.rubyonrails.org/)
*   一些视频[Rails Cast](http://railscasts.com/)
*   预订[Rails 3 方式](https://rads.stackoverflow.com/amzn/click/com/0321601661)

还有一件事，我认为很多 Rails 开发人员不会在 Window 上构建 Rails 应用程序。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-09-15T14:16:50.230

我一直很好用。您只需设置正确的运行配置即可运行 rails -s

# jquery - 使用 jQuery 进行 .append 并获取当前 index()

> ID：13344158
> 
> 赞同：1
> 
> 时间：2012-11-12T12:59:52.297
> 
> 标签：jquery, indexing, append

当我使用 jQuery 添加 div 时，我无法获取当前索引大小

**HTML：**

```
<div>
    <p>1</p>
</div>

<button>Add</button> 
```

**jQuery：**

```
$("button").live("click",function() {
    var index = $("div").index()+1;
    $("div").append('<p>'+index+'</p>');
}); 
```

游乐场：http: [//jsfiddle.net/uZwWg/](http://jsfiddle.net/uZwWg/)

我必须使用该`each`功能还是有其他解决方案？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-12T13:01:44.410

这将在每次点击时添加一个带有递增数字的 div：

```
$("button").click(function() {
    var index = $("div p").index()+1;
    $("div").append('<p>'+(index+1)+'</p>');
});​ 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-12T13:02:18.653

**[小提琴](http://jsfiddle.net/uZwWg/2/)**

您应该指向子元素以获取所需的索引
并使用`+2`（索引*从零开始*），因为您已经开始使用`1`

```
$("button").on("click",function() {
    var index = $("div p").index() +2;
    $("div").append('<p>'+index+'</p>');
}); 
```

# android - 重用 AlertDialog 标题布局

> ID：13344160
> 
> 赞同：1
> 
> 时间：2012-11-12T13:00:05.737
> 
> 标签：android, android-layout, android-alertdialog

问题很简单：我在哪里可以找到`AlertDialog`标题布局的名称，以便在我的应用程序布局中重复使用它？谷歌搜索对我帮助不大，所以我只希望有人能提供一个快速的答案。谢谢你。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-12T13:04:59.103

你的意思是你想要样式或布局`>@android:layout/alert_dialog_holo<`

```
<>/android-sdk/platforms/android-15/data/res/values/styles.xml

 <!-- Dialog styles -->

    <style name="AlertDialog.Holo" parent="AlertDialog">
        <item name="fullDark">@android:drawable/dialog_full_holo_dark</item>
        <item name="topDark">@android:drawable/dialog_top_holo_dark</item>
        <item name="centerDark">@android:drawable/dialog_middle_holo_dark</item>
        <item name="bottomDark">@android:drawable/dialog_bottom_holo_dark</item>
        <item name="fullBright">@android:drawable/dialog_full_holo_dark</item>
        <item name="topBright">@android:drawable/dialog_top_holo_dark</item>
        <item name="centerBright">@android:drawable/dialog_middle_holo_dark</item>
        <item name="bottomBright">@android:drawable/dialog_bottom_holo_dark</item>
        <item name="bottomMedium">@android:drawable/dialog_bottom_holo_dark</item>
        <item name="centerMedium">@android:drawable/dialog_middle_holo_dark</item>
        <item name="layout">@android:layout/alert_dialog_holo</item>
        <item name="listLayout">@android:layout/select_dialog_holo</item>
        <item name="progressLayout">@android:layout/progress_dialog_holo</item>
        <item name="horizontalProgressLayout">@android:layout/alert_dialog_progress_holo</item>
        <item name="listItemLayout">@android:layout/select_dialog_item_holo</item>
        <item name="multiChoiceItemLayout">@android:layout/select_dialog_multichoice_holo</item>
        <item name="singleChoiceItemLayout">@android:layout/select_dialog_singlechoice_holo</item>
    </style> 
```

# mysql - 在我的查询结果中获取 2 列

> ID：13344169
> 
> 赞同：2
> 
> 时间：2012-11-12T13:00:27.347
> 
> 标签：mysql, pivot

我有一个如下所示的表

```
PIN    QuestionNum     Response
1111   1               1
1111   2               3
2222   1               4
2222   2               3
3333   2               5 
```

我的查询的预期输出是：

```
PIN   Question1   Question2
1111  1           3
2222  4           3
3333  null        5 
```

我不知道是否可以使查询的输出看起来像这样。

任何人都可以请告知这是否可能。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-12T13:02:23.243

这基本上是一个`PIVOT`但 MySQL 没有的`PIVOT`功能。因此，您将希望使用聚合函数和`CASE`语句来复制它。如果您知道`QuestionNum`您拥有的值的数量，那么您可以对查询进行硬编码，如下所示：

```
select pin,
  max(case when QuestionNum = 1 then response end) Question1,
  max(case when QuestionNum = 2 then response end) Question2
from yourtable
group by pin 
```

请参阅[带有演示的 SQL Fiddle](http://sqlfiddle.com/#!2/7d3fa/1)

现在，如果您有未知数量的值`QuestionNum`，那么您可以使用准备好的语句来生成此查询的动态版本：

```
SET @sql = NULL;
SELECT
  GROUP_CONCAT(DISTINCT
    CONCAT(
      'max(case when QuestionNum = ''',
      QuestionNum,
      ''' then response end) AS Question',
      QuestionNum
    )
  ) INTO @sql
FROM yourtable;

SET @sql = CONCAT('SELECT pin, ', @sql, ' 
                  FROM yourtable 
                  GROUP BY pin');

PREPARE stmt FROM @sql;
EXECUTE stmt;
DEALLOCATE PREPARE stmt; 
```

请参阅[带有演示的 SQL Fiddle](http://sqlfiddle.com/#!2/7d3fa/3)

两者都会产生相同的结果：

```
|  PIN | QUESTION1 | QUESTION2 |
--------------------------------
| 1111 |         1 |         3 |
| 2222 |         4 |         3 |
| 3333 |    (null) |         5 | 
```

# python - 如何在sqlite django ORM中实现have子句

> ID：13344182
> 
> 赞同：24
> 
> 时间：2012-11-12T13:01:15.127
> 
> 标签：python, django, orm, django-models, sqlite

我编写了 django sqlite orm 语法来检索特定的记录集：

```
from django.db.models.aggregates import Count

JobStatus.objects.filter(
    status='PRF'
).values_list(
    'job', flat=True
).order_by(
    'job'
).aggregate(
    Count(status)__gt=3
).distinct() 
```

但这给了我一个错误，并且这种语法的 sql 等效项对我来说很好。

这是我的 sql 等价物。

```
SELECT *
  FROM tracker_jobstatus
 WHERE status = 'PRF'
 GROUP BY job_id
HAVING COUNT(status) > 3; 
```

我得到的结果如下

```
+----+--------+--------+---------+---------------------+---------+
| id | job_id | status | comment | date_and_time       | user_id |
+----+--------+--------+---------+---------------------+---------+
| 13 |      3 | PRF    |         | 2012-11-12 13:16:00 |       1 |
| 31 |      4 | PRF    |         | 2012-11-12 13:48:00 |       1 |
+----+--------+--------+---------+---------------------+---------+ 
```

我找不到与此等效的 django sqlite。

如果有人能提供帮助，我将不胜感激。

* * *

## 回答 #1

> 赞同：46
> 
> 时间：2012-11-12T13:17:35.367

最后我设法弄清楚了。ORM 语法是这样的。

```
from django.db.models.aggregates import Count

JobStatus.objects.filter(
    status='PRF'
).values_list(
    'job', flat=True
).order_by(
    'job'
).annotate(
    count_status=Count('status')
).filter(
    count_status__gt=1
).distinct() 
```

* * *

## 回答 #2

> 赞同：9
> 
> 时间：2012-11-13T20:09:26.917

对此更一般的规则：您需要创建新列 (by `annotate`)，然后过滤该新列。此查询集将转换为`HAVING`关键字。

# php - 上传后创建拇指/PHP Codeigneter

> ID：13344186
> 
> 赞同：0
> 
> 时间：2012-11-12T13:01:27.683
> 
> 标签：php, codeigniter

我需要您的帮助才能在我的网站中混合使用两种功能。我的目的是上传和调整图像大小。我有一个功能可以很好地处理用户图片，我还有另一个用于上传图片（列表或广告图片），但此功能不会创建缩略图。它只是上传它。我喜欢做的是像功能专用用户图片一样上传和调整大小。

希望您能够帮助我。这是有关用户图片的功能（拇指调整大小工作）

```
public function photo($id = "") {
    $target_path = realpath(APPPATH . '../images/users');
    //echo $target_path;

    if (!is_writable(dirname($target_path))) {
        $this->session->set_flashdata('flash_message', $this->Common_model->flash_message('error', 'Sorry! Destination folder is not writable.'));
        redirect('users/edit', 'refresh');
    } else {
        if (!is_dir(realpath(APPPATH . '../images/users') . '/' . $id)) {
            //echo $this->path.'/'.$id;
            mkdir(realpath(APPPATH . '../images/users') . '/' . $id, 0777, true);
        }

        $target_path = $target_path . '/' . $id . '/userpic.jpg';

        if ($_FILES['upload123']['name'] != '') {
            move_uploaded_file($_FILES['upload123']['tmp_name'], $target_path);

            $thumb1 = realpath(APPPATH . '../images/users') . '/' . $id . '/userpic_thumb.jpg';
            GenerateThumbFile($target_path, $thumb1, 107, 78);

            $thumb2 = realpath(APPPATH . '../images/users') . '/' . $id . '/userpic_profile.jpg';
            GenerateThumbFile($target_path, $thumb2, 209, 209);

            $thumb3 = realpath(APPPATH . '../images/users') . '/' . $id . '/userpic_micro.jpg';
            GenerateThumbFile($target_path, $thumb3, 36, 36);

            $this->session->set_flashdata('flash_message', $this->Common_model->flash_message('success', 'Your profile photo updated successfully.'));
            redirect('users/edit', 'refresh');
        } else {
            $this->session->set_flashdata('flash_message', $this->Common_model->flash_message('error', 'Please browse your profile photo.'));
            redirect('users/edit', 'refresh');
        }
    }
} 
```

这是实现 resize 的函数 id ：

```
if ($this->input->post()) {
    $listId = $param;
    $images = $this->input->post('image');
    $is_main = $this->input->post('is_main');

    $fimages = $this->Gallery->get_imagesG($listId);
    if ($is_main != '') {
        foreach ($fimages->result() as $row) {
            if ($row->id == $is_main)
                $this->Common_model->updateTableData('list_photo', $row->id, NULL, array("is_featured" => 1));
            else
                $this->Common_model->updateTableData('list_photo', $row->id, NULL, array("is_featured" => 0));
        }
    }

    if (!empty($images)) {
        foreach ($images as $key => $value) {
            $image_name = $this->Gallery->get_imagesG(NULL, array('id' => $value))->row()->name;
            unlink($this->path . '/' . $listId . '/' . $image_name);

            $conditions = array("id" => $value);
            $this->Common_model->deleteTableData('list_photo', $conditions);
        }
    }

    if (isset($_FILES["userfile"]["name"])) {
        $insertData['list_id'] = $listId;

        if (!is_dir($this->path . '/' . $listId)) {
            //echo $this->path.'/'.$id;
            mkdir($this->path . '/' . $listId, 0777, true);
            $insertData['is_featured'] = 1;
        }

        $config = array(
            'allowed_types' => 'jpg|jpeg|gif|png',
            'upload_path' => $this->path . '/' . $listId,
            'encrypt_name' => TRUE,
            'remove_spaces' => TRUE
        );

        //echo $this->path.'/'.$id;
        $this->load->library('upload', $config);
        $data = $this->upload->do_upload();
        if ($data) {
            $this->outputData['file'] = $this->upload->data();
            $insertData['name'] = $this->outputData['file']['file_name'];
            $insertData['created'] = local_to_gmt();

            if ($this->outputData['file']['file_name'] != '')
                $this->Common_model->insertData('list_photo', $insertData);
        }
    }
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-12T20:50:03.410

下部代码中没有任何内容可以生成拇指文件。

你需要这样的东西：

```
$this->thumb_path   = realpath(APPPATH . '../directory/in/codeigniter/site/image/thumb'); 
```

然后在 $this->upload->data() 中完成图像上传后，您将需要生成拇指（调整您的设置）

```
$thumb_config = array(
    'source_image' => $data['full_path'],
    'new_image' => $this->thumb_path,
    'maintain_ratio' => true,
    'width' => 200,
    'height' => 200,
    'quality' => '100%'
  );

  $this->load->library('image_lib', $thumb_config);
  $this->image_lib->resize(); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2018-03-16T09:18:24.290

生成您需要使用[图像处理 (ImageMagick)的图像拇指](http://php.net/manual/en/book.imagick.php)

我提供以下代码来生成图像缩略图。

```
function GenerateThumbnails($sourcePath1 = NULL, $destinationPath1 = NULL, $fileNames = NULL, $width = NULL, $height = NULL) {
try {
    $sourcePath = $sourcePath1;
    $destinationPath = $sourcePath . $destinationPath1 . "/";
    if (isset($_POST['sourcePath'])) {
        //$sourcePath = $_SERVER["DOCUMENT_ROOT"] . $_POST['sourcePath'];
        $sourcePath = $_POST['sourcePath'];
    }
    if (isset($_POST['destinationPath'])) {
        //$destinationPath = $_SERVER["DOCUMENT_ROOT"] . $_POST['destinationPath'];
        $destinationPath = $_POST['destinationPath'];
    }
    if (isset($_POST['fileNames'])) {
        $fileNames = json_decode($_POST['fileNames']);
    }
    if (isset($_POST['width'])) {
        $width = $_POST['width'];
    }
    if (isset($_POST['height'])) {
        $height = $_POST['height'];
    }
    foreach ($fileNames as $fileName) {
        if (is_dir($sourcePath)) {
            if (file_exists($sourcePath . $fileName)) {
                $fetchFileExtension = array_values(array_filter(explode(".", $fileName)));
                $fileExtension = end($fetchFileExtension);
                $sourcePathFileName = $sourcePath . $fileName;
                $destinationPathFileName = $destinationPath . $fileName;
                $image = new Imagick();
                $image->readImage($sourcePathFileName);
                $image->scaleImage(1000, 0);
                $image->setImageColorspace(255);
                $image->setImageFormat('jpg');
                $image = $image->flattenImages();
                $image->thumbnailImage($width, $height, true);
                (is_dir($destinationPath)) ? $image->writeImage($destinationPathFileName) : (createDirectory($destinationPath) AND $image->writeImage($destinationPathFileName));
                chmod($destinationPathFileName, 0777);
                $image->clear();
                $image->destroy();
                list($width1, $height1) = getimagesize($destinationPathFileName);
                $data['orientation'] = ($width1 > $height1) ? 1 : 2;
                $data['thumbnailChecksum'] = md5_file($destinationPathFileName);
                $data['message'] = "Thumbnail created successfully .";
            } else {
                $data['message'] = "Thumbnail creation failed.";
            }
        }
    }
    return $data;
} catch (Exception $ex) {
    print $ex->getMessage();
    return false;
} 
```

}

# visual-c++ - 如何调试从另一个dll调用的dll

> ID：13344187
> 
> 赞同：1
> 
> 时间：2012-11-12T13:01:27.410
> 
> 标签：visual-c++

我正在开发从另一个 B.dll（实际上是 COM）调用的 A.dll，该 B.dll 是从应用程序 C.exe（如 COM）调用的。我正在尝试设置我的 VC++ 2010 来调试 A.dll。我将项目->配置属性->调试->命令设置为C.exe。不幸的是，我的程序没有通过断点。如何使这个调试系统工作？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-12T15:18:53.730

确保使用调试信息构建 A.dll：Properties > Linker > Debugging > Generate Debug Info = "Yes"

![为非托管项目启用 PDB](../Images/2567620d9236d4849de77a01acaa8677.png)

然后将 dll 和 pdbs 复制到应用程序输出文件夹并开始调试。确保已加载 A.dll 的 pdb。

转到调试 -> Windows -> 模块。验证 A 的 pdb 是否已加载。否则右键单击并单击“加载符号从”-> 符号路径并将其指向存在 A.dll 的 pdb 的应用程序文件夹。

![在此处输入图像描述](../Images/80c2d42c359b50b6ffa44aa89782ebe1.png)

# objective-c - 需要有关可可内存管理的帮助

> ID：13344188
> 
> 赞同：-1
> 
> 时间：2012-11-12T13:01:31.053
> 
> 标签：objective-c, ios, cocoa, memory

我有一个类“TestA”，并将其对象放在主函数的 NSMutable 字典中。第二个名为“ThreadClass”的类有一个线程。在这个线程中，我从字典中获取对象并使用它。当我运行这个程序时，仪器向我显示了这个线程中的内存泄漏。但我不明白为什么内存泄漏，因为我没有使用任何新的或分配、复制或保留。我在主类中附加了我的程序的完整代码。需要有关内存管理的快速帮助。

我还有一个问题，如果我有一个以 NSString 作为数据成员的类。如果我将 this 的对象放在 NSMutabledictionary 中，那么我将如何处理它的内存管理。谢谢

```
#import <Cocoa/Cocoa.h>

@interface TestA : NSObject {

@public

    NSString *strTemp1;
}
@end

#import "TestA.h"

/////////////////////////////////////////////
//Implementation class

@implementation TestA

-(id)init
{
self = [super init];

if (self != nil) 
{       
    //strTemp1 = [[NSString alloc] init];
    //printf("\n Temp 1 %d \n", [strTemp1 retainCount]);
}
return self;
}
@end

//Thread Class

#import <Cocoa/Cocoa.h>

#import "TestA.h"
@interface ThreadClass : NSObject {

}
@end

#import "ThreadClass.h"

extern NSMutableDictionary *clData;

@implementation ThreadClass

-(void)Initialize
{
[NSThread detachNewThreadSelector:@selector(AnimateThread:) toTarget:self  withObject:nil];
printf("\n<<<<<<<<<<<<<<< Start Animator Thread Called >>>>>>>>>>>>>>>>>>>>>\n");
}

//==========================================================================
- (void) AnimateThread:(id) inObject
{
    NSAutoreleasePool *Pool = [[NSAutoreleasePool alloc] init];

NSDate *timeToSleep = [NSDate dateWithTimeIntervalSinceNow:(NSTimeInterval)5];

while (1) 
{
    //NSAutoreleasePool *threadPool = [[NSAutoreleasePool alloc] init];

    printf("\n Collection Size:%d \n", [clData count]);
    TestA *obj1 = [clData objectForKey:@"abc"];

    printf("\nThread Memory Counter:%d \n", [obj1 retainCount]);
    printf("\nThread Memory Counter:%s \n", [obj1->strTemp1 UTF8String]);

    //Sleep Thread for 5 Seconds
    [timeToSleep release];
    timeToSleep = [NSDate dateWithTimeIntervalSinceNow:(NSTimeInterval)5];
    [NSThread sleepUntilDate:(NSDate *)timeToSleep];
    //[timeToSleep release];

    //[threadPool release];
}

[Pool release];
}   
@end

//////////////////////////
Main Class

#import <Cocoa/Cocoa.h>
#import "TestA.h"
#import "ThreadClass.h"

NSMutableDictionary *clData = nil;
int main(int argc, char *argv[])
{
NSAutoreleasePool *pool = [[NSAutoreleasePool alloc] init];

clData = [[NSMutableDictionary alloc] init];

//Creating Thread Class
ThreadClass *obj = [ThreadClass new];
[obj Initialize];
[obj release];

TestA *obj1 = [[TestA alloc] init];
NSString *strKey =[NSString new];
strKey = @"abc";

printf("\n Memory Counter:%d \n", [obj1 retainCount]);
printf("\n Memory Counter:%d \n", [obj1->strTemp1 retainCount]);

NSString *strTemp = @"Test Program";
obj1->strTemp1 = [NSString stringWithFormat:@"%s", [strTemp UTF8String]];
[obj1->strTemp1 retain];

printf("\n Memory Counter:%s \n", [obj1->strTemp1 UTF8String]);

[clData setObject:obj1 forKey:strKey];

printf("\nAfter Memory Counter:%d \n", [obj1 retainCount]);
printf("\nAfter Memory Counter:%d \n", [obj1->strTemp1 retainCount]);

[strKey release];
[obj1 release];

[pool release];

return NSApplicationMain(argc,  (const char **) argv);
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-12T16:08:31.123

该代码有很多问题。远远超出内存管理。

我建议从[Objective-C 语言指南](http://www.google.com/url?sa=t&rct=j&q=&esrc=s&source=web&cd=1&ved=0CDIQFjAA&url=http://developer.apple.com/documentation/Cocoa/Conceptual/ObjectiveC/&ei=aR2hUOOHJ8KfiALBuoD4BQ&usg=AFQjCNFR-4nUahyAELKcHUZDWKv3liXPEA)开始，然后转到[iOS 应用程序架构指南](http://developer.apple.com/library/ios/#documentation/iphone/conceptual/iphoneosprogrammingguide/Introduction/Introduction.html)或 OS X 应用程序的[Cocoa 指南](https://developer.apple.com/library/mac/#documentation/Cocoa/Conceptual/CocoaFundamentals/Introduction/Introduction.html)。

一些错误的快速列表：

• 通常，您不应直接使用线程，并且任何线程都不应使用`while(1) {...sleep(..);...}`轮询构造。应该使用运行循环、队列和 GCD。

•`retainCount`完全没用。不要叫它。有关详细信息，请参阅[http://www.whentouseretaincount.com](http://www.whentouseretaincount.com)。

• 不要通过 访问实例变量`->`。两者都破坏了封装，并且在非常罕见的情况（有时是复制对象）之外，根本不是 Objective-C 中使用的模式。

• 这种模式没有意义：`NSString *strKey =[NSString new]; strKey = @"abc";`。它会泄漏一个空的实例`NSString`（或者无论如何，如果它不是为了在 Foundation 中进行优化）。没有必要做第一个任务。

• 用一堆代码构建应用程序`main()`，然后将控制权交给 Cocoa 是没有意义的。编写基于 Foundation 的命令行工具或适当的 Cocoa 应用程序。

• 方法名称以小写字母开头并且是驼峰式。

• 看起来您可能正在走在 Cocoa 应用程序中做一些动画的道路上？如果是这样，您将需要阅读[Core Animation](https://developer.apple.com/library/mac/#documentation/cocoa/conceptual/coreanimation_guide/introduction/introduction.html)。

• 如果这是一个新项目，请使用 ARC。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-12T14:49:14.157

使用属性。在标题中：

```
@interface TestA : NSObject
{
   NSString *strTemp1_;
}
@property (nonatomic, copy) NSString* strTemp1;
@end 
```

在实施中：

```
@synthesize strTemp1=strTemp1_;

-(id)init
{
    self = [super init];

    if (self != nil) 
    {     
        strTemp1_=@"MyString";
    }
    return self;
}

//since your not using ARC you need to make sure that the property is NIL'd so that it will be released properly.
- (void) dealloc
{
    self.strTemp1=NULL;
} 
```

# java - Android从资源中获取颜色列表

> ID：13344191
> 
> 赞同：10
> 
> 时间：2012-11-12T13:01:41.777
> 
> 标签：java, android, xml, resources

我有一个颜色列表

```
<?xml version="1.0" encoding="utf-8"?>
<resources>
 <color name="white">#FFFFFF</color>
 <color name="yellow">#FFFF00</color>
 <color name="fuchsia">#FF00FF</color>
 <color name="red">#FF0000</color>
 <color name="silver">#C0C0C0</color>
 <color name="gray">#808080</color>
 <color name="olive">#808000</color>
 <color name="purple">#800080</color>
 <color name="maroon">#800000</color>
 <color name="aqua">#00FFFF</color>
 <color name="lime">#00FF00</color>
 <color name="teal">#008080</color>
 <color name="green">#008000</color>
 <color name="blue">#0000FF</color>
 <color name="navy">#000080</color>
 <color name="black">#000000</color>
</resources> 
```

（我从有人问的另一个问题中获取了这个列表）

我想要做的是获取所有颜色名称。我想要这个列表，然后我可以在微调器中填充很多。伪代码将是这样的。

```
List ofColours = getListOfColors(R.color);
for(int i = 0 ; i < ofColours.size() ; i ++)
{
  String colour = getResources().getColor(ofColours.get(i));
  addColourToSpinner(colour);
} 
```

我想要的是颜色列表。我希望能解释它为所有帮助干杯

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-11-12T13:20:10.387

您可以使用反射访问颜色列表：

```
Field[] fields = Class.forName(getPackageName()+".R$color").getDeclaredFields();
for(Field field : fields) {
    String colorName = field.getName();
    int colorId = field.getInt(null);
    int color = getResources().getColor(colorId);
    Log.i("test", colorName + " => " + colorId + " => " + color);
} 
```

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2013-08-05T02:06:37.163

我被困在我的项目中。制作这个花了很长时间，我希望它可以帮助一些人。我最终结合了这里的一个例子

[http://www.ipcas.com/blog/2011/12/android-color-picker/](http://www.ipcas.com/blog/2011/12/android-color-picker/)

以及从这里提供的颜色列表

[Android 颜色 xml 资源文件中的 Web 颜色](https://stackoverflow.com/questions/3769762/android-color-xml-resource-file)

只需删除您不需要的颜色并制作您喜欢的任何颜色。（比自己制作快得多）

这是我的 Strings.xml

```
<?xml version="1.0" encoding="utf-8"?>
<resources>

<string name="app_name">AppName</string>
<string name="action_settings">Settings</string>
<string name="hello_world">Hello world!</string>
<string name="title_activity_visitor">Visitor</string>
<!--  Translation: Hint: White, Blue, Red...-->
<string name="accolor">Hint: White, Blue, Red&#8230;</string>

<integer name="colorGridColumnWidth">65</integer>

 <color name="AliceBlue">#F0F8FF</color>
 <color name="AntiqueWhite">#FAEBD7</color>
 <color name="aqua">#00FFFF</color>
 <color name="Aqua">#00FFFF</color>
 <color name="Aquamarine">#7FFFD4</color>
 <color name="Azure">#F0FFFF</color>
 <color name="Beige">#F5F5DC</color>
 <color name="Bisque">#FFE4C4</color>
 <color name="black">#000000</color>
 <color name="Black">#000000</color>
 <color name="BlanchedAlmond">#FFEBCD</color>
 <color name="Blue">#0000FF</color>
 <color name="BlueViolet">#8A2BE2</color>
 <color name="Brown">#A52A2A</color>
 <color name="BurlyWood">#DEB887</color>
 <color name="CadetBlue">#5F9EA0</color>
 <color name="Chartreuse">#7FFF00</color>
 <color name="Chocolate">#D2691E</color>
 <color name="Coral">#FF7F50</color>
 <color name="CornflowerBlue">#6495ED</color>
 <color name="Cornsilk">#FFF8DC</color>
 <color name="Crimson">#DC143C</color>
 <color name="Cyan">#00FFFF</color>
 <color name="DarkBlue">#00008B</color>
 <color name="DarkCyan">#008B8B</color>
 <color name="DarkGoldenrod">#B8860B</color>
 <color name="DarkGray">#A9A9A9</color>
 <color name="DarkGreen">#006400</color>
 <color name="DarkKhaki">#BDB76B</color>
 <color name="DarkMagenta">#8B008B</color>
 <color name="DarkOliveGreen">#556B2F</color>
 <color name="DarkOrange">#FF8C00</color>
 <color name="DarkOrchid">#9932CC</color>
 <color name="DarkRed">#8B0000</color>
 <color name="DarkSalmon">#E9967A</color>
 <color name="DarkSeaGreen">#8FBC8F</color>
 <color name="DarkSlateBlue">#483D8B</color>
 <color name="DarkSlateGray">#2F4F4F</color>
 <color name="DarkTurquoise">#00CED1</color>
 <color name="DarkViolet">#9400D3</color>
 <color name="DeepPink">#FF1493</color>
 <color name="DeepSkyBlue">#00BFFF</color>
 <color name="DimGray">#696969</color>
 <color name="DodgerBlue">#1E90FF</color>
 <color name="dullwhite">#FFDDDDDD</color>
 <color name="FireBrick">#B22222</color>
 <color name="FloralWhite">#FFFAF0</color>
 <color name="ForestGreen">#228B22</color>
 <color name="fuchsia">#FF00FF</color>
 <color name="Fuchsia">#FF00FF</color>
 <color name="Gainsboro">#DCDCDC</color>
 <color name="GhostWhite">#F8F8FF</color>
 <color name="Gold">#FFD700</color>
 <color name="Goldenrod">#DAA520</color>
 <color name="gray">#808080</color>
 <color name="Gray">#808080</color>
 <color name="green">#008000</color>
 <color name="Green">#008000</color>
 <color name="GreenYellow">#ADFF2F</color>
 <color name="Honeydew">#F0FFF0</color>
 <color name="HotPink">#FF69B4</color>
 <color name="IndianRed">#CD5C5C</color>
 <color name="Indigo">#4B0082</color>
 <color name="Ivory">#FFFFF0</color>
 <color name="Khaki">#F0E68C</color>
 <color name="Lavender">#E6E6FA</color>
 <color name="LavenderBlush">#FFF0F5</color>
 <color name="LawnGreen">#7CFC00</color>
 <color name="LemonChiffon">#FFFACD</color>
 <color name="LightBlue">#ADD8E6</color>
 <color name="LightCoral">#F08080</color>
 <color name="LightCyan">#E0FFFF</color>
 <color name="LightGoldenrodYellow">#FAFAD2</color>
 <color name="LightGreen">#90EE90</color>
 <color name="LightGrey">#D3D3D3</color>
 <color name="LightPink">#FFB6C1</color>
 <color name="LightSalmon">#FFA07A</color>
 <color name="LightSeaGreen">#20B2AA</color>
 <color name="LightSkyBlue">#87CEFA</color>
 <color name="LightSlateGray">#778899</color>
 <color name="LightSteelBlue">#B0C4DE</color>
 <color name="LightYellow">#FFFFE0</color>
 <color name="lime">#00FF00</color>
 <color name="Lime">#00FF00</color>
 <color name="LimeGreen">#32CD32</color>
 <color name="Linen">#FAF0E6</color>
 <color name="Magenta">#FF00FF</color>
 <color name="maroon">#800000</color>
 <color name="Maroon">#800000</color>
 <color name="MediumAquamarine">#66CDAA</color>
 <color name="MediumBlue">#0000CD</color>
 <color name="MediumOrchid">#BA55D3</color>
 <color name="MediumPurple">#9370DB</color>
 <color name="MediumSeaGreen">#3CB371</color>
 <color name="MediumSlateBlue">#7B68EE</color>
 <color name="MediumSpringGreen">#00FA9A</color>
 <color name="MediumTurquoise">#48D1CC</color>
 <color name="MediumVioletRed">#C71585</color>
 <color name="MidnightBlue">#191970</color>
 <color name="MintCream">#F5FFFA</color>
 <color name="MistyRose">#FFE4E1</color>
 <color name="Moccasin">#FFE4B5</color>
 <color name="NavajoWhite">#FFDEAD</color>
 <color name="navy">#000080</color>
 <color name="Navy">#000080</color>
 <color name="OldGold">#CFB53B</color>
 <color name="OldLace">#FDF5E6</color>
 <color name="olive">#808000</color>
 <color name="Olive">#808000</color>
 <color name="OliveDrab">#6B8E23</color>
 <color name="Orange">#FFA500</color>
 <color name="OrangeRed">#FF4500</color>
 <color name="Orchid">#DA70D6</color>
 <color name="PaleGoldenrod">#EEE8AA</color>
 <color name="PaleGreen">#98FB98</color>
 <color name="PaleTurquoise">#AFEEEE</color>
 <color name="PaleVioletRed">#DB7093</color>
 <color name="PapayaWhip">#FFEFD5</color>
 <color name="PeachPuff">#FFDAB9</color>
 <color name="Peru">#CD853F</color>
 <color name="Pink">#FFC0CB</color>
 <color name="Plum">#DDA0DD</color>
 <color name="PowderBlue">#B0E0E6</color>
 <color name="purple">#800080</color>
 <color name="Purple">#800080</color>
 <color name="red">#FF0000</color>
 <color name="Red">#FF0000</color>
 <color name="RosyBrown">#BC8F8F</color>
 <color name="RoyalBlue">#4169E1</color>
 <color name="SaddleBrown">#8B4513</color>
 <color name="Salmon">#FA8072</color>
 <color name="SandyBrown">#F4A460</color>
 <color name="SeaGreen">#2E8B57</color>
 <color name="Seashell">#FFF5EE</color>
 <color name="Sienna">#A0522D</color>
 <color name="silver">#C0C0C0</color>
 <color name="Silver">#C0C0C0</color>
 <color name="SkyBlue">#87CEEB</color>
 <color name="SlateBlue">#6A5ACD</color>
 <color name="SlateGray">#708090</color>
 <color name="Snow">#FFFAFA</color>
 <color name="SpringGreen">#00FF7F</color>
 <color name="SteelBlue">#4682B4</color>
 <color name="Tan">#D2B48C</color>
 <color name="teal">#008080</color>
 <color name="Teal">#008080</color>
 <color name="Thistle">#D8BFD8</color>
 <color name="Tomato">#FF6347</color>
 <color name="Turquoise">#40E0D0</color>
 <color name="Violet">#EE82EE</color>
 <color name="Wheat">#F5DEB3</color>
 <color name="white">#FFFFFFFF</color>
 <color name="White">#FFFFFF</color>
 <color name="WhiteSmoke">#F5F5F5</color>
 <color name="yellow">#FFFF00</color>
 <color name="Yellow">#FFFF00</color>
 <color name="YellowGreen">#9ACD32</color>

<array name="colorNameList">
    <item>AliceBlue</item>
    <item>AntiqueWhite</item>
    <item>Aqua</item>
    <item>Aquamarine</item>
    <item>Azure</item>
    <item>Beige</item>
    <item>Bisque</item>
    <item>Black</item>
    <item>BlanchedAlmond</item>
    <item>Blue</item>
    <item>BlueViolet</item>
    <item>Brown</item>
    <item>BurlyWood</item>
    <item>CadetBlue</item>
    <item>Chartreuse</item>
    <item>Chocolate</item>
    <item>Coral</item>
    <item>CornflowerBlue</item>
    <item>Cornsilk</item>
    <item>Crimson</item>
    <item>Cyan</item>
    <item>DarkBlue</item>
    <item>DarkCyan</item>
    <item>DarkGoldenrod</item>
    <item>DarkGray</item>
    <item>DarkGreen</item>
    <item>DarkKhaki</item>
    <item>DarkMagenta</item>
    <item>DarkOliveGreen</item>
    <item>DarkOrange</item>
    <item>DarkOrchid</item>
    <item>DarkRed</item>
    <item>DarkSalmon</item>
    <item>DarkSeaGreen</item>
    <item>DarkSlateBlue</item>
    <item>DarkSlateGray</item>
    <item>DarkTurquoise</item>
    <item>DarkViolet</item>
    <item>DeepPink</item>
    <item>DeepSkyBlue</item>
    <item>DimGray</item>
    <item>DodgerBlue</item>
    <item>FireBrick</item>
    <item>FloralWhite</item>
    <item>ForestGreen</item>
    <item>Fuchsia</item>
    <item>Gainsboro</item>
    <item>GhostWhite</item>
    <item>Gold</item>
    <item>Goldenrod</item>
    <item>Gray</item>
    <item>Green</item>
    <item>GreenYellow</item>
    <item>Honeydew</item>
    <item>HotPink</item>
    <item>IndianRed</item>
    <item>Indigo</item>
    <item>Ivory</item>
    <item>Khaki</item>
    <item>Lavender</item>
    <item>LavenderBlush</item>
    <item>LawnGreen</item>
    <item>LemonChiffon</item>
    <item>LightBlue</item>
    <item>LightCoral</item>
    <item>LightCyan</item>
    <item>LightGoldenrodYellow</item>
    <item>LightGreen</item>
    <item>LightGrey</item>
    <item>LightPink</item>
    <item>LightSalmon</item>
    <item>LightSeaGreen</item>
    <item>LightSkyBlue</item>
    <item>LightSlateGray</item>
    <item>LightSteelBlue</item>
    <item>LightYellow</item>
    <item>Lime</item>
    <item>LimeGreen</item>
    <item>Linen</item>
    <item>Magenta</item>
    <item>Maroon</item>
    <item>MediumAquamarine</item>
    <item>MediumBlue</item>
    <item>MediumOrchid</item>
    <item>MediumPurple</item>
    <item>MediumSeaGreen</item>
    <item>MediumSlateBlue</item>
    <item>MediumSpringGreen</item>
    <item>MediumTurquoise</item>
    <item>MediumVioletRed</item>
    <item>MidnightBlue</item>
    <item>MintCream</item>
    <item>MistyRose</item>
    <item>Moccasin</item>
    <item>NavajoWhite</item>
    <item>Navy</item>
    <item>OldGold</item>
    <item>OldLace</item>
    <item>Olive</item>
    <item>OliveDrab</item>
    <item>Orange</item>
    <item>OrangeRed</item>
    <item>Orchid</item>
    <item>PaleGoldenrod</item>
    <item>PaleGreen</item>
    <item>PaleTurquoise</item>
    <item>PaleVioletRed</item>
    <item>PapayaWhip</item>
    <item>PeachPuff</item>
    <item>Peru</item>
    <item>Pink</item>
    <item>Plum</item>
    <item>PowderBlue</item>
    <item>Purple</item>
    <item>Red</item>
    <item>RosyBrown</item>
    <item>RoyalBlue</item>
    <item>SaddleBrown</item>
    <item>Salmon</item>
    <item>SandyBrown</item>
    <item>SeaGreen</item>
    <item>Seashell</item>
    <item>Sienna</item>
    <item>Silver</item>
    <item>SkyBlue</item>
    <item>SlateBlue</item>
    <item>SlateGray</item>
    <item>Snow</item>
    <item>SpringGreen</item>
    <item>SteelBlue</item>
    <item>Tan</item>
    <item>Teal</item>
    <item>Thistle</item>
    <item>Tomato</item>
    <item>Turquoise</item>
    <item>Violet</item>
    <item>Wheat</item>
    <item>WhiteSmoke</item>
    <item>Yellow</item>
    <item>YellowGreen</item>
</array>

 <array name="colorNumberList">
    <item>@color/AliceBlue</item>
    <item>@color/AntiqueWhite</item>
    <item>@color/Aqua</item>
    <item>@color/Aquamarine</item>
    <item>@color/Azure</item>
    <item>@color/Beige</item>
    <item>@color/Bisque</item>
    <item>@color/Black</item>
    <item>@color/BlanchedAlmond</item>
    <item>@color/Blue</item>
    <item>@color/BlueViolet</item>
    <item>@color/Brown</item>
    <item>@color/BurlyWood</item>
    <item>@color/CadetBlue</item>
    <item>@color/Chartreuse</item>
    <item>@color/Chocolate</item>
    <item>@color/Coral</item>
    <item>@color/CornflowerBlue</item>
    <item>@color/Cornsilk</item>
    <item>@color/Crimson</item>
    <item>@color/Cyan</item>
    <item>@color/DarkBlue</item>
    <item>@color/DarkCyan</item>
    <item>@color/DarkGoldenrod</item>
    <item>@color/DarkGray</item>
    <item>@color/DarkGreen</item>
    <item>@color/DarkKhaki</item>
    <item>@color/DarkMagenta</item>
    <item>@color/DarkOliveGreen</item>
    <item>@color/DarkOrange</item>
    <item>@color/DarkOrchid</item>
    <item>@color/DarkRed</item>
    <item>@color/DarkSalmon</item>
    <item>@color/DarkSeaGreen</item>
    <item>@color/DarkSlateBlue</item>
    <item>@color/DarkSlateGray</item>
    <item>@color/DarkTurquoise</item>
    <item>@color/DarkViolet</item>
    <item>@color/DeepPink</item>
    <item>@color/DeepSkyBlue</item>
    <item>@color/DimGray</item>
    <item>@color/DodgerBlue</item>
    <item>@color/FireBrick</item>
    <item>@color/FloralWhite</item>
    <item>@color/ForestGreen</item>
    <item>@color/Fuchsia</item>
    <item>@color/Gainsboro</item>
    <item>@color/GhostWhite</item>
    <item>@color/Gold</item>
    <item>@color/Goldenrod</item>
    <item>@color/Gray</item>
    <item>@color/Green</item>
    <item>@color/GreenYellow</item>
    <item>@color/Honeydew</item>
    <item>@color/HotPink</item>
    <item>@color/IndianRed</item>
    <item>@color/Indigo</item>
    <item>@color/Ivory</item>
    <item>@color/Khaki</item>
    <item>@color/Lavender</item>
    <item>@color/LavenderBlush</item>
    <item>@color/LawnGreen</item>
    <item>@color/LemonChiffon</item>
    <item>@color/LightBlue</item>
    <item>@color/LightCoral</item>
    <item>@color/LightCyan</item>
    <item>@color/LightGoldenrodYellow</item>
    <item>@color/LightGreen</item>
    <item>@color/LightGrey</item>
    <item>@color/LightPink</item>
    <item>@color/LightSalmon</item>
    <item>@color/LightSeaGreen</item>
    <item>@color/LightSkyBlue</item>
    <item>@color/LightSlateGray</item>
    <item>@color/LightSteelBlue</item>
    <item>@color/LightYellow</item>
    <item>@color/Lime</item>
    <item>@color/LimeGreen</item>
    <item>@color/Linen</item>
    <item>@color/Magenta</item>
    <item>@color/Maroon</item>
    <item>@color/MediumAquamarine</item>
    <item>@color/MediumBlue</item>
    <item>@color/MediumOrchid</item>
    <item>@color/MediumPurple</item>
    <item>@color/MediumSeaGreen</item>
    <item>@color/MediumSlateBlue</item>
    <item>@color/MediumSpringGreen</item>
    <item>@color/MediumTurquoise</item>
    <item>@color/MediumVioletRed</item>
    <item>@color/MidnightBlue</item>
    <item>@color/MintCream</item>
    <item>@color/MistyRose</item>
    <item>@color/Moccasin</item>
    <item>@color/NavajoWhite</item>
    <item>@color/Navy</item>
    <item>@color/OldGold</item>
    <item>@color/OldLace</item>
    <item>@color/Olive</item>
    <item>@color/OliveDrab</item>
    <item>@color/Orange</item>
    <item>@color/OrangeRed</item>
    <item>@color/Orchid</item>
    <item>@color/PaleGoldenrod</item>
    <item>@color/PaleGreen</item>
    <item>@color/PaleTurquoise</item>
    <item>@color/PaleVioletRed</item>
    <item>@color/PapayaWhip</item>
    <item>@color/PeachPuff</item>
    <item>@color/Peru</item>
    <item>@color/Pink</item>
    <item>@color/Plum</item>
    <item>@color/PowderBlue</item>
    <item>@color/Purple</item>
    <item>@color/Red</item>
    <item>@color/RosyBrown</item>
    <item>@color/RoyalBlue</item>
    <item>@color/SaddleBrown</item>
    <item>@color/Salmon</item>
    <item>@color/SandyBrown</item>
    <item>@color/SeaGreen</item>
    <item>@color/Seashell</item>
    <item>@color/Sienna</item>
    <item>@color/Silver</item>
    <item>@color/SkyBlue</item>
    <item>@color/SlateBlue</item>
    <item>@color/SlateGray</item>
    <item>@color/Snow</item>
    <item>@color/SpringGreen</item>
    <item>@color/SteelBlue</item>
    <item>@color/Tan</item>
    <item>@color/Teal</item>
    <item>@color/Thistle</item>
    <item>@color/Tomato</item>
    <item>@color/Turquoise</item>
    <item>@color/Violet</item>
    <item>@color/Wheat</item>
    <item>@color/WhiteSmoke</item>
    <item>@color/Yellow</item>
    <item>@color/YellowGreen</item>

</array>
</resources> 
```

接下来我使用了由提供的 ColorPickerDialog

[http://www.ipcas.com/blog/2011/12/android-color-picker/](http://www.ipcas.com/blog/2011/12/android-color-picker/)

```
public class ColorPickerDialog extends Dialog {

    public ColorPickerDialog(Context context) {
        super(context);
        this.setTitle("ColorPickerDialog");
    }

    @Override
    protected void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.color_picker);

        GridView gridViewColors = (GridView) findViewById(R.id.gridViewColors);
        gridViewColors.setAdapter(new ColorPickerAdapter(getContext()));

        // close the dialog on item click
        gridViewColors.setOnItemClickListener(new OnItemClickListener() {
            @Override
            public void onItemClick(AdapterView<?> parent, View view, int position, long id) {
                ColorPickerDialog.this.dismiss();
            }
        });
    }
} 
```

也有这个。

```
public class ColorPickerAdapter extends BaseAdapter {

    private Context context;
    // width of grid column
    int colorGridColumnWidth;
    //array of color values
    int[] colorNumberarray; 
    // array of color names
    String[] colorNameArray; 

    public ColorPickerAdapter(Context context) {
        this.context = context;

        // defines the width of each color square
        colorGridColumnWidth = context.getResources().getInteger(R.integer.colorGridColumnWidth);

        //fill  colorNumberarray with values from the colorNumberList Array in strings.xml  
        colorNumberarray = context.getResources().getIntArray(R.array.colorNumberList);
        //fill  colorNameArray with values from the colorNameArray Array in strings.xml 
        colorNameArray = context.getResources().getStringArray(R.array.colorNameList);

        //Show results in verbose Log
        for (int i = 0; i < colorNumberarray.length; i++) {
            Log.v("Test", colorNumberarray[i] + "");
            Log.v("Test", colorNameArray[i] + "");

        }

    }

    public View getView(int position, View convertView, ViewGroup parent) {
        ImageView imageView;

        // can we reuse a view?
        if (convertView == null) {
            imageView = new ImageView(context);
            // set the width of each color square
            imageView.setLayoutParams(new GridView.LayoutParams(colorGridColumnWidth, colorGridColumnWidth));

        } else {
            imageView = (ImageView) convertView;
        }

        imageView.setBackgroundColor(colorNumberarray[position]);
        imageView.setId(position);

        return imageView;
    }

    public int getCount() {
        return colorNumberarray.length;
    }

    public Object getItem(int position) {
        return null;
    }

    public long getItemId(int position) {
        return 0;
    }
} 
```

希望这可以为人们节省一些时间。

接下来你启动对话框，

```
 IBcolorpicker.setOnClickListener(new View.OnClickListener() {
        Dialog dialog;
        @Override
        public void onClick(View v) {
            // Clicked!
            // Make a new dialog.
            dialog = new ColorPickerDialog(Visitor.this);
            dialog.show();
        }
    }); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-12T13:19:27.037

为什么不简单地在您的`strings.xml`or中创建两个数组`arrays.xml`。像这样的东西：

```
<?xml version="1.0" encoding="utf-8"?>
<resources>
    <string-array name="items">
        <item>white</item>
        <item>yellow</item>
        <item>fuchsia</item>
        <item>red</item>
    </string-array>
    <string-array name="values">
        <item>#FFFFFF</item>
        <item>#FFFF00</item>
        <item>#FF00FF</item>
        <item>#FF0000</item>
    </string-array>
</resources> 
```

您可以在这里按照 developer.android.com 上的一个简单示例进行操作：http: [//developer.android.com/guide/topics/ui/controls/spinner.html](http://developer.android.com/guide/topics/ui/controls/spinner.html)。

这是另一个教程：[http ://www.dcpagesapps.com/developer-resources/android/21-android-tutorial-spinners?start=1](http://www.dcpagesapps.com/developer-resources/android/21-android-tutorial-spinners?start=1)

那应该让你开始。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2020-08-20T05:47:58.497

您可以根据一般方案重命名颜色

```
<?xml version="1.0" encoding="utf-8"?>
<resources>
 <color name="color1">#FFFFFF</color>
 <color name="color2">#FFFF00</color>
 ...
</resources> 
```

然后按名称遍历它们

```
var i = 1
while (true) {
    val colorId = resources.getIdentifier("color$i", "color", packageName)
    if (colorId != 0) {
        // color exists
        ContextCompat.getColor(applicationContext, colorId)
    } else {
        break
    }
    i++
} 
```

无反射

# exchange-server - 如何在 EWS Java API 中验证凭据

> ID：13344193
> 
> 赞同：1
> 
> 时间：2012-11-12T13:01:47.667
> 
> 标签：exchange-server, exchangewebservices, ewsjavaapi

我正在使用 EWSJavaAPI 1.1.5。我正在尝试使用无效凭据登录，但没有任何异常。

请告知如何检测和处理无效登录。

这是我的代码：

```
String host = "myhost";
ExchangeService service = null;
try {
    service = new ExchangeService();
    ExchangeCredentials credentials = new WebCredentials("wrongemail",
        "wrongpass");
    service.setCredentials(credentials);
    service.setUrl(new java.net.URI("https://" + host
        + "/EWS/Exchange.asmx"));
} catch (Exception e) {
    e.printStackTrace();
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-12T13:18:22.927

找到它，我必须将服务绑定到一个文件夹：

```
Folder.bind(service, WellKnownFolderName.Inbox); 
```

如果凭据错误，则抛出**HttpErrorException**。

# javascript - 有没有办法使用“填充”和“描边”作为区域缩放颜色的属性？

> ID：13344196
> 
> 赞同：2
> 
> 时间：2012-11-12T13:01:54.603
> 
> 标签：javascript, jvectormap

我正在使用 jVectorMap v1.1，并且我有这段相关的代码：

```
var america = "#d84148";
var europe = "#0060d0";
var africa = "#44984d";
var asia = "#e3a430";
var oceania = "#2ecdd0";

series: {
    regions: [{
        values: data['colours'],
        scale: {
            "America" : america,
            "Europe" : europe,
            "Africa" : africa,
            "Asia" : asia,
            "Oceania" : oceania
        },
        normalizeFunction: 'linear',
        attribute: 'fill'
    }]
} 
```

我得到的矢量数据是来自 naturalearth.com 的 world_mill_en，它包含每个国家的 1px 分隔，作为该国家的边界​​。我正在构建的应用程序必须显示整个大陆，因此不允许有边界。

On`attribute`我只能设置`fill`or`stroke`作为参数，我可以在使用时为边框设置纯色`fill`。

我想知道是否可以同时使用`fill`AND`stroke`作为属性。或者，如果有一种方法可以将区域的笔画设置为与其相应区域的颜色相同。IE。

```
if (stroke == "none") 
{
    stroke = "that region's colour"
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-13T09:40:52.847

在搜索了各种示例后，我在此链接上找到了我的解决方案：

[https://github.com/bjornd/jvectormap/blob/master/tests/markers.html](https://github.com/bjornd/jvectormap/blob/master/tests/markers.html)

我需要做的就是：

```
var america = "#d84148";
var europe = "#0060d0";
var africa = "#44984d";
var asia = "#e3a430";
var oceania = "#2ecdd0";

series: {
    regions: [{
        values: data['colours'],
        scale: {
            "America" : america,
            "Europe" : europe,
            "Africa" : africa,
            "Asia" : asia,
            "Oceania" : oceania
        },
        normalizeFunction: 'linear',
        attribute: 'fill'
    }, {
        values: data['colours'],
        scale: {
            "America" : america,
            "Europe" : europe,
            "Africa" : africa,
            "Asia" : asia,
            "Oceania" : oceania
        },
        normalizeFunction: 'linear',
        attribute: 'stroke'
    }]
} 
```

就这样，问题解决了。复制区域数组内的整个部分，包括大括号，将填充更改为描边。

# c++ - 线程中 TCP 套接字的奇怪行为

> ID：13344197
> 
> 赞同：0
> 
> 时间：2012-11-12T13:01:57.200
> 
> 标签：c++, sockets, tcp, winsock

我们有一个应用程序，我们通过 TCP 套接字发送数据。为此，我们使用 8 个 TCP 连接。套接字发送和接收在后台线程中调用。只有一个线程遍历套接字数组以通过所有套接字发送数据（顺序）。

发件人线程中的代码类似于：

```
for(i = 0; i < 8; i++) {

    nBytesWrriten = send (tcpsock[i], data2, nleft, 0))
    //error handling and process more data

} 
```

接收者线程是这样的：

```
for(i = 0; i < 8; i++) {

    sz[i] = recv (tcpsock[i], data, MAX_UDT_SIZE, 0);
    //process data
} 
```

一切正常，数据被传输，但有时需要的时间太长。在检查日志时，我发现在大多数情况下，发送者线程工作得很好，但有时，在“发送”调用之前和之后，时间戳会有很大的延迟（有时超过一秒）。

所有发送和接收操作都发生在工作线程中。这与在发送调用之前/期间抢占线程有关吗？我可以避免在发送调用之前抢占线程吗？或者是接收线程在发送更多数据时没有收到套接字上的数据，因此导致延迟？

由于发送数据花费的时间太长，我该如何优化？

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-12T13:07:22.773

您应该使用非阻塞套接字进行发送。可能发生的情况是一个（或多个）不能立即发送，所以它会等到它可以发送一些数据，可能是缓冲区已满或其他什么。

使用非阻塞套接字它不会停止，但您必须检查数据是否未发送到某些套接字并稍后重试。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-12T13:31:54.903

在发送之前对每个套接字执行一个`select`操作，看看您是否可以在不阻塞的情况下进行写入，否则您将阻塞其他套接字上的发送。你会想在读取端做同样的事情，或者缺乏可读性可能会阻止其他人的可用读取。

# permissions - 没有 Google Drive API writersCanInvite 等价物？

> ID：13344198
> 
> 赞同：0
> 
> 时间：2012-11-12T13:01:58.253
> 
> 标签：permissions, migration

随着 Docs API 的弃用和 Drive API 中的一些不错的新功能，我正在努力更新我的一些文件迁移脚本。但是，我发现似乎没有与 Docs API v3 中的 writersCanInvite 参数等效的 Drive API。能够在文件上设置此属性在迁移场景中非常重要，因为没有它，迁移的文件将保持开放状态，让编辑者进一步共享它。

除了无法查看 ACL 的电子邮件地址（或某些唯一 ID）之外，没有可用的 writersCanInvite 正在阻止我将迁移脚本完全移植到 Drive API v2。

多谢你们，

周杰伦

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-05T13:34:14.147

看起来我们现在有一个 writersCanShare 属性来控制它： [https ://developers.google.com/drive/v2/reference/files#resource](https://developers.google.com/drive/v2/reference/files#resource)

目前，它没有被标记为可写，但我没有问题将它设置为 False 对于新文档，所以我猜这只是一个文档问题。

# c++ - c++ stringstream转换成不同类型的变量

> ID：13344209
> 
> 赞同：1
> 
> 时间：2012-11-12T13:02:24.940
> 
> 标签：c++, c, dynamic, casting, type-conversion

我得到一个包含需要转换为整数的原始二进制数据的字符串。问题是这些值并不总是以相同的顺序出现，也不总是出现。因此，二进制数据的格式在配置文件中进行了描述，并且从二进制数据中读取的值的类型在编译时是未知的*。*

我正在考虑类似的解决方案：

```
enum BinaryType {
  TYPE_UINT16,
  TYPE_UNIT32,
  TYPE_INT32
};

long convert(BinaryType t, std::stringstream ss) {
  long return_value;
  switch(t) {
    case TYPE_UINT16:
      unsigned short us_value;
      ss.read(&us_value, sizeof(unsigned short));
      return_value = short;
    break;
    case TYPE_UINT32:
      unsigned int ui_value;
      ss.read(&ui_value, sizeof(unsigned int));
      return_value = ui_value;
    break;
    case TYPE_INT32:
      signed int si_value;
      ss.read(&si_value, sizeof(signed int));
      return_value = si_value;
    break;
  }
  return return_value;
} 
```

目标是以十进制输出这些值。

我的问题是：

*   这段代码非常重复。有没有更简单的解决方案？（模板？）
*   我应该使用标准类型，例如`signed int`值是否需要为 32 位？改用什么？字节序？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-12T13:23:53.480

一个简单的解决方案：为转换器定义一个基类：

```
class Converter {
public:
virtual int_64 convert(std::stringstream& ss) = 0;
} 
```

接下来为每个二进制类型定义一个具体的转换器。具有从二进制类型标识符到转换器的映射/数组映射，例如：

```
Converter* converters[MAX_BINARY_TYPES];
converters[TYPE_UINT16] = new ConverterUINT16;
... 
```

现在，您可以像这样使用它（在您的函数转换中定义的变量）：

```
cout << converters[t]->convert(ss) 
```

为了可移植性，您应该使用 int32_t、int64_t 而不是 int、long 等基本类型，它们保证在所有系统上都是相同的。

当然，如果您的代码旨在处理不同的字节序，则需要明确处理它。对于上面的示例代码，您可以有两个不同的转换器集，一个用于小端数据解码，另一个用于大端数据解码。您可以做的另一件事是为 std::stringstream 编写一个包装类，我们称之为 StringStream，它定义了用于读取 int32、uint32 等的函数，如果字节序与您的系统架构不同，则交换字节代码正在运行。您可以将类设为模板并使用以下两者之一对其进行实例化：

```
class SameByteOrder {
public:
    template<typename T> static void swap(T &) {}
};

class OtherByteOrder {
public:
    template<typename T> static void swap(T &o)
    {
        char *p = reinterpret_cast<char *>(&o);
        size_t size = sizeof(T);
        for (size_t i=0; i < size / 2; ++i)
            std::swap(p[i], p[size - i - 1]);
    }
}; 
```

然后使用 StringStream 函数中的交换函数来交换（或不交换）字节。

# mysql - phpmyadmin 错误的数字排序

> ID：13344213
> 
> 赞同：1
> 
> 时间：2012-11-12T13:02:41.820
> 
> 标签：mysql, phpmyadmin, numbers

可能是个愚蠢的问题，

但是如果我想通过一个名为 的字段进行排序`CODE`，那么它的排序如下：

```
1, 101, 102, 1010, 2, 201, 2003 
```

我想像这样订购它们：

```
1, 2, 101, 102, 201, 1010, 2003 
```

代码字段是：*VAR(4)*。（Var，因为 INT 将零作为起始数字切断，这使得 0110 变为 110，这不好。）我正在订购：`ORDER BY code ASC`。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-12T13:11:58.460

如果您的代码数据类型是 varchar 并且您使用以下命令对数据进行排序：“order by code asc”，则数据的顺序将基于 ASCII。尝试使用：“按长度排序（代码），代码”

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-12T13:11:45.713

```
SELECT CODE FROM tableName ORDER BY CONVERT(INT,CODE) ASC; 
```

# android - Android应用内购买，将orderid作为十进制值？

> ID：13344215
> 
> 赞同：2
> 
> 时间：2012-11-12T13:02:49.700
> 
> 标签：android, in-app-purchase

在以下来自应用内购买 api 的 json 数据中，订单 id 以十进制值形式出现，以前它仅以整数值形式出现。（请假设“X”为某个数字）

```
{
    "notificationId":"87356XXXXXX684814",
    "orderId":"12999763169XXXX758.13774087XXXX934",
    "packageName":"tst.package.name",
    "productId":"p8787p_31908503",
    "purchaseTime":1352692129000,
    "purchaseState":0,
    "purchaseToken":"pswjwhvxxxxxxxsyhlfbxuxpt"
}, 
```

那么任何人都可以确认`orderId`应该始终是整数而不是小数，如果它是小数，那么它有什么问题吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-30T09:16:18.127

有关详细信息，请参阅[http://developer.android.com/google/play/billing/billing_admin.html 。](http://developer.android.com/google/play/billing/billing_admin.html)

*对于日期为 2012 年 12 月 5 日或之后的交易，Google Checkout 会分配商家订单号（而不是 Google 订单号）并将商家订单号报告为 orderID 的值。*

# jquery - 从 url 获取哈希值

> ID：13344221
> 
> 赞同：25
> 
> 时间：2012-11-12T13:03:21.603
> 
> 标签：jquery, url, hash

单击链接后，我试图获取哈希值。有任何想法吗？

例如

链接

```
index.html#needThis 
```

这是我的结果：

```
index.htmlneedThis 
```

如何删除 'index.html' ？

```
$('#myselector').on('click', 'a', function(){
    var hash = $(this).attr('href').replace('#', '') //get url
    console.log(hash);
}) 
```

* * *

## 回答 #1

> 赞同：70
> 
> 时间：2012-11-12T13:08:23.630

**更新**

现代浏览器（*不确定它是如何返回的*`hash`）可以直接从锚元素中提取（*所以我添加了#5*）

* * *

随便挑吧。。

1.  `var hash = $(this).attr('href').split('#')[1];`
2.  `var hash = $(this).attr('href').replace(/^.*?#/,'');`
3.  `var href = $(this).attr('href'), hash = href.substr(href.indexOf('#')+1);`
4.  `var hash = $(this).attr('href').match(/#(.*$)/)[1];`
5.  `var hash = this.hash.substr(1);`

* * *

**更新**

刚刚重新审视了这一点，我相信＃2可以改进为

```
$(this).attr('href').replace(/^.*?(#|$)/,''); 
```

这样，如果不存在哈希，它将返回空而不是整个 url..

* * *

## 回答 #2

> 赞同：16
> 
> 时间：2012-11-12T13:05:16.260

只需使用`var hash = window.location.hash`.

它返回 # 之后的所有内容

或者，如果您有一个包含 url 的变量：

```
$(this).attr('href').substring($(this).attr('href').indexOf('#')) 
```

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2012-11-12T13:08:04.520

您可以尝试使用窗口位置哈希。

```
$('#myselector').on('click', 'a', function(){
    var hash = $(this).attr('href').replace('#', '') //get url
    var hash2 = window.location.hash ;
    console.log(hash2);
}) 
```

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2016-02-08T17:51:18.420

为什么不简单地使用：

```
window.location.hash 
```

对我来说效果很好。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-11-12T13:10:47.913

试试这个，

```
$('#myselector').on('click', 'a', function(){
    var url = $(this).attr('href') //get url
    var arr = url.split('#');
    alert(arr[0]); //URL without hash #
    var hash = arr[1];
    console.log(hash);
})​ 
```

# dependencies - 安装不在存储库中并包含所有依赖项的新版本应用程序

> ID：13344222
> 
> 赞同：0
> 
> 时间：2012-11-12T13:03:24.927
> 
> 标签：dependencies, deb

我要解决的问题是我想从源代码安装应用程序。

当我尝试安装该应用程序时，它说它需要`valac-0.16`，但是当我尝试`valac`从终端安装时，它只安装旧版本，`valac-0.14`. 然后我尝试下载新版本`valac-0.16`并尝试安装它，但仍然显示依赖不满足。

如何安装不在存储库中的应用程序的新版本？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-22T10:53:24.793

如果我正确理解您的问题，您想安装一个软件包，尽管您下载并安装了上游源代码`Depends: valac (>= 0.16)`，但它以某种方式拒绝安装。`valac`

如果您有一个声明了无法满足的依赖项的包，`dpkg`将拒绝安装它，直到`dpkg`知道该依赖项已满足。有三种可能的修复方法；

1.  `dpkg --force-depends-version -i package`即使声明它需要> = 0.16，也会`dpkg`接受0.14。更一般地说，包含有关如何以各种有趣且有时有用的方式使自己在脚上射击的各种提示。如果您不直接使用，可以通过、等传递这些选项。`valac``package``dpkg --force-help``dpkg``dpkg``apt-get``aptitude`

2.  如果`valac`有一个`debian`目录，或者您知道如何从您下载的 0.16 源代码创建一个包，则只需构建并安装一个`deb`包。 `debuild -us -uc -rfakeroot -b`如果碎片在那里（最值得注意的是，）应该是你所需要的`debian/rules`。或者，您可以将`apt-get source valac`0.14 包源代码树中的 0.16 上游源代码拼凑在一起，然后重新构建。

3.  如果你有一个本地安装的包可以满足依赖，但`dpkg`不知道它，你可以创建一个虚拟包并安装它；那么`dpkg`就会满足。该[`equivs`](http://www.debian.org/doc/manuals/apt-howto/ch-helpers.en.html)包允许您轻松创建一个像这样的虚拟包。

# java - Solr 地理空间搜索返回错误的距离

> ID：13344223
> 
> 赞同：4
> 
> 时间：2012-11-12T13:03:31.820
> 
> 标签：java, solr, geolocation, geospatial, distance

我正在使用带有 SOLR-2155 补丁的 Solr 3.6.1 Webapp 来支持 geohash 字段。我按照此处所述设置了所有内容：[https ://github.com/dsmiley/SOLR-2155](https://github.com/dsmiley/SOLR-2155)

搜索不时会为每次命中返回一个完全错误的距离。刷新结果无济于事。如果我更改搜索的偏移量（例如列出第二页），一切都很好。即使回到第一页现在也会显示正确的距离。

这不是 webapp，因为我直接从 Solr 获得的 json 流包含与结果分数相同的距离。就我而言，它始终是 20015,12km。

这是我的查询：

```
fq={!geofilt}
&fl=internalid,score
&start=0
&rows=10
&sort=geodist()+asc
&sfield=location
&pt=53.6,10.11
&d=50
&q={!func}geodist() 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-12T15:26:46.267

我写了 SOLR-2155。我对其中的距离排序代码不是特别满意；似乎有什么我忽略了。我认为这不应该是某种数学问题，而是某种 Lucene 内部问题。如果每个文档只有一个点，请使用 solr.LatLonType。如果你有多个然后.... :-( 我不知道问题是什么。在 Solr 4 中，这个替换代码称为 SpatialRecursivePrefixTreeFieldType 并且它使用不同的代码但它是相似的，所以我不确定是否问题会消失与否。但即使在这种情况下，我对实施也一点也不满意。我知道我想如何正确地做这件事，但它现在不在我的 TODO 列表的顶部。

顺便说一句，您基本上是在报告错误，报告错误的正确位置是相关项目的问题跟踪器——在这种情况下，就是 GitHub SOLR-2155。StackOverflow 对此没有意义。

# string - 使用变量在 ksh 中查找和替换包含正斜杠的字符串

> ID：13344232
> 
> 赞同：3
> 
> 时间：2012-11-12T13:04:11.357
> 
> 标签：string, variables, replace, ksh

在一个文件 ( `file1.txt`) 中，我有`/path1/|value1`（一个路径，后跟一个值）。我需要找到包含该（唯一）路径的行，然后更改值。因此，该行应以：`/path1/|value2`.

挑战在于`/path1/`和部分都包含在变量中`value1`。`value2`

当我不使用变量时，我可以使用（[感谢此页面](http://sed.sourceforge.net/sedfaq3.html)）：

```
sed '/path1/s/value1/value2/g' file1.txt > copyfile1.txt 
```

（这会创建原始文件的副本，我以后可以使用 . 覆盖原始文件`mv`。）

这只是搜索`path1`。要搜索`/path1/`我可以使用：

```
sed '/\/path1\//s/value1/value2/g' file1.txt > copyfile1.txt 
```

使用[关于提取子字符串的这个问题的答案，](https://stackoverflow.com/questions/12730664/how-can-i-extract-a-substring-after-a-certain-string-in-ksh)我可以将`/path1/`,`value1`和`value2`部分放入变量中。

所以我目前的代码是：

```
sed '/'"${PATH}"'/s/'"${PREVIOUS_VALUE}"'/'"${NEW_VALUE}"'/g' file1.txt > copyfile1.txt 
```

但这不起作用，因为 PATH 变量包含正斜杠。使用[此处](http://www.unix.com/shell-programming-scripting/130495-sed-variable-backslash.html)的信息，我首先尝试进行如下替换：

```
FORMATTED_PATH=$(echo "${PATH}" | sed 's/\//\/\//g') 
```

首先，然后使用`FORMATTED_PATH`代替，`PATH`但随后查找和替换不起作用（没有错误消息，新文件为空）。在日志记录中`FORMATTED_PATH = //path1//`（我认为是正确的）。

如何使用包含正斜杠的变量来查找和替换？

（我[通过这个答案](https://stackoverflow.com/questions/584894/sed-scripting-environment-variable-substitution)发现我需要关闭单引号，在变量周围使用双引号，然后再次打开单引号。但这对正斜杠没有帮助。）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-12T16:24:21.713

代码几乎是正确的。代替：

```
FORMATTED_PATH=$(echo "${PATH}" | sed 's/\//\/\//g') 
```

我应该有：

```
FORMATTED_PATH=$(echo "${PATH}" | sed 's/\//\\\//g') 
```

然后，这会产生正确的日志记录：`FORMATTED_PATH = \/path1\/`

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-12T17:58:24.027

awk 也可以：

```
awk -F '|' -v path="$paht" -v new="$new_value" '{
    if ($1 == path) {print path FS new}
    else {print}
}' file1.txt > copyfile1.txt 
```

另外，不要对你的 shell 变量使用全大写：你已经清除了`PATH`用于查找程序的 shell 变量。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-11T08:41:04.657

通常`sed`'`s`命令（如`s///`）支持使用除`/`. 例如：

```
$ echo '/path1/|value1' | sed 's,\(/path1/|\).*,\1value2,'
/path1/|value2
$ 
```

这在处理包含`/`字符的文件路径名时非常方便。

# ios - 搜索 plist 文件 (xcode) 中已存在的图像

> ID：13344237
> 
> 赞同：1
> 
> 时间：2012-11-12T13:04:16.223
> 
> 标签：ios, xcode, uiimageview, plist, uisearchbar

我是一个新的 iphone 开发人员，我目前正在做一个项目。**首先我有一个包含图像的 plist 文件。这些图像有自己的 id。例如。image1 的 id 是 '100'，image2 的 id 是 '101'。我的应用程序中还有一个搜索栏。当我在搜索栏中输入数字（id）时，我想从 plist 文件中获取图像，并将其显示在 UIImageView.For ex。我在搜索栏中输入了“100”。id 为 '100' 的图像将显示在 UIImageView 中。**实际上我不知道如何使用 xcode 来做到这一点。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-12T13:47:14.417

这是从 plist 获取这些图像的方法。进入数组后，您可以使用 NSPredicate 或从数组中搜索以获得所需的结果。

```
 NSString *path = [[NSBundle mainBundle] pathForResource:@"EventAddress" ofType:@"plist"]; 
  NSMutableDictionary *myDictionary = [[NSMutableDictionary alloc] initWithContentsOfFile:path];
  NSArray* allmyKeys = [myDictionary  allValues]; 
```

# gmail - PHPMailer 遇到问题

> ID：13344239
> 
> 赞同：17
> 
> 时间：2012-11-12T13:04:35.190
> 
> 标签：gmail, php

我正在尝试使用 PHPMailer 发送 gmail 电子邮件。我关注了这篇[文章](https://stackoverflow.com/questions/4982821/send-email-from-localhost-with-gmailwindows)

为了做到这一点，我设置了一个如下所示的函数：

```
function sendEmail($email, $name) {
    $mail = new PHPMailer();
    $mail->IsSMTP(); // send via SMTP
    //IsSMTP(); // send via SMTP I commented it cos it gives an error
    $mail->SMTPAuth = true; // turn on SMTP authentication
    $mail->Username = 'email@gmail.com'; // Changed my email
    $mail->Password = "password";// Changed my password
    $mail->From = 'email@gmail.com';
    $mail->FromName = 'FROM NAME';

    $mail->AddAddress($email);

    $mail->IsHTML(true); // send as HTML
    $mail->Subject = "Subject";
    $mail->Body = "Body";

    if (!$mail->Send()) {
        return false;
    } else {
        return true;
    }
} 
```

**不幸的是，它一直返回错误。你能告诉我代码有什么问题吗？**

编辑：我得到的错误如下所示：

```
SMTP -> ERROR: Failed to connect to server: A connection attempt failed because the connected party did not properly respond after a period of time, or established connection failed because connected host has failed to respond

SMTP Error: Could not connect to SMTP host. 
```

更新代码：

```
 $Mail = new PHPMailer();
    $Mail->IsSMTP(); // Use SMTP
    $Mail->Host = "smtp.gmail.com"; // Sets SMTP server
    $Mail->SMTPDebug = 2; // 2 to enable SMTP debug information 
    $Mail->SMTPAuth = TRUE; // enable SMTP authentication
    $Mail->SMTPSecure = "tls"; //Secure conection
    $Mail->Port = 587; // set the SMTP port
    $Mail->Username = EMAIL; // SMTP account username
    $Mail->Password = PASS; // SMTP account password
    $Mail->Priority = 1; // Highest priority - Email priority (1 = High, 3 = Normal, 5 = low)
    $Mail->CharSet = 'UTF-8';
    $Mail->Encoding = '8bit';
    $Mail->Subject = 'SUB';
    $Mail->ContentType = 'text/html; charset=utf-8\r\n';
    $Mail->From = EMAIL;
    $Mail->FromName = 'FROM NAME';
    $Mail->WordWrap = 900; // RFC 2822 Compliant for Max 998 characters per line

    $Mail->AddAddress($email); // To:
    $Mail->isHTML(TRUE);
    $Mail->Body = "Hi";
    $Mail->AltBody = "Hi";
    $Mail->Send();
    $Mail->SmtpClose(); 
```

* * *

## 回答 #1

> 赞同：21
> 
> 时间：2012-11-20T08:40:57.527

**这是一个工作示例：**

```
<?php
function SendMail( $ToEmail, $MessageHTML, $MessageTEXT ) {
  require_once ( 'class.phpmailer.php' ); // Add the path as appropriate
  $Mail = new PHPMailer();
  $Mail->IsSMTP(); // Use SMTP
  $Mail->Host        = "smtp.gmail.com"; // Sets SMTP server
  $Mail->SMTPDebug   = 2; // 2 to enable SMTP debug information
  $Mail->SMTPAuth    = TRUE; // enable SMTP authentication
  $Mail->SMTPSecure  = "tls"; //Secure conection
  $Mail->Port        = 587; // set the SMTP port
  $Mail->Username    = 'MyGmail@gmail.com'; // SMTP account username
  $Mail->Password    = 'MyGmailPassword'; // SMTP account password
  $Mail->Priority    = 1; // Highest priority - Email priority (1 = High, 3 = Normal, 5 = low)
  $Mail->CharSet     = 'UTF-8';
  $Mail->Encoding    = '8bit';
  $Mail->Subject     = 'Test Email Using Gmail';
  $Mail->ContentType = 'text/html; charset=utf-8\r\n';
  $Mail->From        = 'MyGmail@gmail.com';
  $Mail->FromName    = 'GMail Test';
  $Mail->WordWrap    = 900; // RFC 2822 Compliant for Max 998 characters per line

  $Mail->AddAddress( $ToEmail ); // To:
  $Mail->isHTML( TRUE );
  $Mail->Body    = $MessageHTML;
  $Mail->AltBody = $MessageTEXT;
  $Mail->Send();
  $Mail->SmtpClose();

  if ( $Mail->IsError() ) { // ADDED - This error checking was missing
    return FALSE;
  }
  else {
    return TRUE;
  }
}

$ToEmail = 'Name@example.com';
$ToName  = 'Name';

$Send = SendMail( $ToEmail, $MessageHTML, $MessageTEXT );
if ( $Send ) {
  echo "<h2> Sent OK</h2>";
}
else {
  echo "<h2> ERROR</h2>";
}
die;
?> 
```

我试过这个脚本，发送几条消息没有问题。

**更新：**

这是 Gmail 对成功的典型回应：

```
SMTP -> FROM SERVER:220 mx.google.com ESMTP 20sm6345523qek.6
SMTP -> FROM SERVER: 250-mx.google.com at your service, [181.155.13.39]
                     250-SIZE 35882577
                     250-8BITMIME
                     250-STARTTLS
                     250 ENHANCEDSTATUSCODES
SMTP -> FROM SERVER:220 2.0.0 Ready to start TLS
SMTP -> FROM SERVER: 250-mx.google.com at your service, [181.155.13.39]
                     250-SIZE 35882577
                     250-8BITMIME
                     250-AUTH LOGIN PLAIN XOAUTH XOAUTH2
                     250 ENHANCEDSTATUSCODES
SMTP -> FROM SERVER:250 2.1.0 OK 20sm6345523qek.6
SMTP -> FROM SERVER:250 2.1.5 OK 20sm6345523qek.6
SMTP -> FROM SERVER:354 Go ahead 20sm6345523qek.6
SMTP -> FROM SERVER:250 2.0.0 OK 1353474062 20sm6345523qek.6
SMTP -> FROM SERVER:221 2.0.0 closing connection 20sm6345523qek.6 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-19T16:16:25.977

您的代码不起作用，因为您没有设置帐户所需的`SMTPSecure`选项`ssl``gmail`

```
include_once "/lib/phpmailer/PHPMailer.class.php";
include_once "/lib/phpmailer/SMTP.class.php";
include_once "/lib/phpmailer/POP3.class.php";

$mail = new PHPMailer(true);
$mail->IsSMTP();

try {
    $mail->Host = "smtp.gmail.com"; 
    $mail->SMTPDebug = 2; 
    $mail->SMTPSecure = 'ssl'; //<----------------- You missed this 
    $mail->SMTPAuth = true; 
    $mail->Host = "smtp.gmail.com"; 
    $mail->Port = 465; // 
    $mail->Username = "xxxxxx@gmail.com";
    $mail->Password = "xxxxxx";
    $mail->AddAddress('to@example.com', 'John Doe');
    $mail->SetFrom('xxxxxx@gmail.com', 'First Last');
    $mail->Subject = 'This is a TEST message';
    $mail->AltBody = 'To view the message, please use an HTML compatible email viewer!';
    $body = "To view the message, please use an HTML compatible email viewer!"; // automatically
    $mail->MsgHTML($body);
    $mail->Send();
    echo "Message Sent OK</p>\n";
} catch ( phpmailerException $e ) {
    echo $e->errorMessage(); 
} catch ( Exception $e ) {
    echo $e->getMessage(); 
} 
```

输出

```
SMTP -> FROM SERVER:220 mx.google.com ESMTP q22sm2927759bkv.16 
SMTP -> FROM SERVER: 250-mx.google.com at your service, [62.173.54.190] 250-SIZE 35882577 250-8BITMIME 250-AUTH LOGIN PLAIN XOAUTH XOAUTH2 250 ENHANCEDSTATUSCODES 
SMTP -> FROM SERVER:250 2.1.0 OK q22sm2927759bkv.16 
SMTP -> FROM SERVER:250 2.1.5 OK q22sm2927759bkv.16 
SMTP -> FROM SERVER:354 Go ahead q22sm2927759bkv.16 
SMTP -> FROM SERVER:250 2.0.0 OK 1353341553 q22sm2927759bkv.16 
Message Sent OK 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-14T21:06:36.363

在此类问题中，重要的是在部署到生产之前检查它在开发环境中的运行方式，因为有许多服务器问题可能与该问题相关。

因此，在将 debug 设置为 true 并检查您收到的消息之前。

```
$mail->SMTPDebug = 1; 
```

也就是说，在这种情况下，常见的服务器问题如下。

1.  PHP 缺乏 SSL 支持。您必须启用它。

2.  某种防火墙可能会阻止您连接到出站套接字。您可以使用 PHP 进行检查。

-

```
$p = fsockopen( '127.0.0.1', <port number>, $errno, $errstr, 5 );
if ( !$p )
    // port is closed or blocked
else
    // port is open and available
    fclose( $p );` 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-11-12T13:33:25.520

尝试...

```
<?php
require_once('class.phpmailer.php');
//include("class.smtp.php"); // optional, gets called from within class.phpmailer.php if not already loaded

$mail = new PHPMailer(true); // the true param means it will throw exceptions on errors, which we need to catch

$mail->IsSMTP(); // telling the class to use SMTP

try {
  $mail->Host       = "smtp.gmail.com"; // SMTP server
  $mail->SMTPDebug  = 2;                     // enables SMTP debug information (for testing)
  $mail->SMTPAuth   = true;                  // enable SMTP authentication
  $mail->Host       = "smtp.gmail.com"; // sets the SMTP server
  $mail->Port       = 465;                    // set the SMTP port for the GMAIL server
  $mail->Username   = "yourname@yourdomain"; // SMTP account username
  $mail->Password   = "yourpassword";        // SMTP account password
  $mail->AddReplyTo('name@yourdomain.com', 'First Last');
  $mail->AddAddress('whoto@otherdomain.com', 'John Doe');
  $mail->SetFrom('name@yourdomain.com', 'First Last');
  $mail->AddReplyTo('name@yourdomain.com', 'First Last');
  $mail->Subject = 'This is a TEST Message';
  $mail->AltBody = 'To view the message, please use an HTML compatible email viewer!'; // optional - MsgHTML will create an alternate automatically
  $mail->MsgHTML($obdy);
  $mail->AddAttachment('images/phpmailer.gif');      // attachment
  $mail->AddAttachment('images/phpmailer_mini.gif'); // attachment
  $mail->Send();
  echo "Message Sent OK</p>\n";
} catch (phpmailerException $e) {
  echo $e->errorMessage(); //Pretty error messages from PHPMailer
} catch (Exception $e) {
  echo $e->getMessage(); //Boring error messages from anything else!
}
?> 
```

只需替换为您的配置，设置 require_once('class.phpmailer.php'); 指向正确的位置并替换“contents.html”您的 HTML 模板。

*或者*

如果您选择不使用 HTML 模板，请使用此代码...

```
<?php

$body ='Your HTML message should go here';

require_once('class.phpmailer.php');
//include("class.smtp.php"); // optional, gets called from within class.phpmailer.php if not already loaded

$mail = new PHPMailer(true); // the true param means it will throw exceptions on errors, which we need to catch

$mail->IsSMTP(); // telling the class to use SMTP

try {
  $mail->Host       = "smtp.gmail.com"; // SMTP server
  $mail->SMTPDebug  = 2;                     // enables SMTP debug information (for testing)
  $mail->SMTPAuth   = true;                  // enable SMTP authentication
  $mail->Host       = "smtp.gmail.com"; // sets the SMTP server
  $mail->Port       = 465;                    // set the SMTP port for the GMAIL server
  $mail->Username   = "yourname@yourdomain"; // SMTP account username
  $mail->Password   = "yourpassword";        // SMTP account password
  $mail->AddReplyTo('name@yourdomain.com', 'First Last');
  $mail->AddAddress('whoto@otherdomain.com', 'John Doe');
  $mail->SetFrom('name@yourdomain.com', 'First Last');
  $mail->AddReplyTo('name@yourdomain.com', 'First Last');
  $mail->Subject = 'This is a TEST message';
  $mail->AltBody = 'To view the message, please use an HTML compatible email viewer!'; // optional - MsgHTML will create an alternate automatically
  $mail->MsgHTML($body);
  $mail->AddAttachment('images/phpmailer.gif');      // attachment
  $mail->AddAttachment('images/phpmailer_mini.gif'); // attachment
  $mail->Send();
  echo "Message Sent OK</p>\n";
} catch (phpmailerException $e) {
  echo $e->errorMessage(); //Pretty error messages from PHPMailer
} catch (Exception $e) {
  echo $e->getMessage(); //Boring error messages from anything else!
}
?> 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-09-17T08:12:35.297

```
$mail = new PHPMailer();

                // Set up SMTP
                $mail->IsSMTP();                // Sets up a SMTP connection
                $mail->SMTPDebug  = 0;          // This will print debugging info
                $mail->SMTPAuth = true;         // Connection with the SMTP does require authorization
                $mail->SMTPSecure = "tls";      // Connect using a TLS connection
                $mail->Host = "smtp.gmail.com";
                $mail->Port = 587;
                $mail->Encoding = '7bit';       // SMS uses 7-bit encoding
                $mail->IsHTML(true);            // Set email format to HTML

                // Authentication
                $mail->Username   = "xxx@xxx.xxx.xx"; // Login
                $mail->Password   = "xxxxxx"; // Password

                //$to=
                $to = "zzz@zzz.zzz.zz";
                $mail->Subject = "Outstanding Balance Notification ";     // Subject (which isn't required)
                $mail->Body =  "Dear Sir / Madam";
                $mail->FromName = "stackoverflow";
                $mail->From = "noreply@xxx.xxx.xx";

                $mail->AddAddress($row["Email1"]); 
```

试试这个.. ：）

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2014-03-30T10:34:03.247

我已经从本地主机的 xampp 服务器发送邮件

这段代码对我来说非常有用

[1：从https://github.com/PHPMailer/PHPMailer](https://github.com/PHPMailer/PHPMailer)下载 phpmailer

2：去xampp搜索php.ini

3 在php.ini中搜索

```
;extension=php_openssl.dll    
 remove(;)       
 extension=php_openssl.dll 
```

然后保存并重新启动电脑它的工作

```
<%php <br/>
require_once("C:\\xampp\\phpMailer\\PHPMailer-master\\class.phpmailer.php"); <br/>

$mail = new PHPMailer(); <br/>
$mail->IsSMTP();  // telling the class to use SMTP    <br/>
$mail->SMTPAuth = true;         // Enable SMTP authentication  <br/>
$mail->SMTPSecure = 'ssl' ;   <br/>
$mail->Host    = "smtp.gmail.com" ;// SMTP server <br/>
$mail->Port = 465; // or 587   <br/>

$mail->Username = 'senderemailid@gmail.com';    // SMTP username <br/>
$mail->Password = 'senderpassword';     // SMTP password   <br/>

$mail -> IsHTML(true);  <br/>
$mail->From    = 'senderemailid@gmail.com'; <br/>
$mail->FromName = 'sendername';   <br/>
$mail->addAddress('receiveremailid@domain.com','receivername');  <br/>

$mail->WordWrap = 50;  <br/>

$mail->Subject  = "This mail send from  PhP code xampp"; <br/>
$mail->Body     = "Hi! \n\n This is my first e-mail sent through PHPMailer."; <br/>

if(!$mail->Send()) {   <br/>
echo 'Message was not sent.';   <br/>
echo 'Mailer error: ' . $mail->ErrorInfo;  <br/>

} else    <br/>
 {   <br/>
echo 'Message has been sent.';  <br/>
}  <br/>
?>  <br/> 
```

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2019-01-29T00:39:25.317

**2019 使用 Gmail 更新 phpMailer**

我知道这是一个老问题，但它仍然出现在谷歌中，我需要更新这个答案。

`IsSMTP()`如果您在使用 phpmailer 时遇到问题（很多人会遇到），它仅在您尝试使用 gmail 的 SMTP时注释掉时才有效，那么这就是原因。

当您注释掉时，`IsSMTP()`您是在告诉 phpmailer 不要使用 SMTP，默认情况下 phpmailer 会将请求发送到您的本地`mail()`。如果您查看此时发送的电子邮件并查看电子邮件的标题，您会发现它来自您的本地服务器，而不是您尝试发送的地址/域。所以是的，注释掉`IsSMTP()`会让它起作用，但事实并非如此。从未正确设置的本地服务器发送很可能会导致您的电子邮件成为垃圾邮件。

**那么我该如何解决这个问题**

简单明了，您很可能使用的是旧版本的 phpmailer，您需要更新版本。说明这一点的简单方法是您如何设置`From`地址。如果它看起来像这样，`$mail->From = "name@example.com"`那么您使用的是旧版本。

最新版本的 phpmailer 将 From 定义为`$mail->setFrom("name@example.com", "First Last")`. 如果你看到了，那么你正在使用更新版本的 phpmailer。

**如何正确地做到这一点并使其真正发挥作用**

1.  请确保您的防火墙上有 587 的 TCP OUT 端口

2.  SMTP Gmail 仅适用于 tls/587 而不是 ssl/465（ssl 是 1990 年代）

3.  确保您在 gmail 中正确设置了[允许安全性较低的应用程序。](https://devanswers.co/allow-less-secure-apps-access-gmail-account/)如果您使用的是 G Suite 帐户，那么您必须让您的管理员启用它（如果尚未启用）。

4.  [这是一个完美的例子，如何将新的 phpmailer 与 gmail smtp 一起使用](https://github.com/PHPMailer/PHPMailer/blob/master/examples/gmail.phps)（是的，它确实有效，如果没有，那么你的结果有问题）

**如何安装phpmailer**

先[下载](https://github.com/PHPMailer/PHPMailer)最新版的phpmailer

有两种安装方法。作曲家或手册。您所需要的手动方式是

```
use PHPMailer\PHPMailer\PHPMailer; <-- make sure these are not in a function
use PHPMailer\PHPMailer\Exception;

require 'path/src/Exception.php';
require 'path/src/PHPMailer.php';
require 'path/src/SMTP.php'; 
```

**例子**

```
<?php
/**
 * This example shows settings to use when sending via Google's Gmail servers.
 * This uses traditional id & password authentication - look at the gmail_xoauth.phps
 * example to see how to use XOAUTH2.
 * The IMAP section shows how to save this message to the 'Sent Mail' folder using IMAP commands.
 */

//Import PHPMailer classes into the global namespace
use PHPMailer\PHPMailer\PHPMailer;
use PHPMailer\PHPMailer\Exception;

require 'path/src/Exception.php';
require 'path/src/PHPMailer.php';
require 'path/src/SMTP.php';

//Create a new PHPMailer instance
$mail = new PHPMailer;

//Tell PHPMailer to use SMTP
$mail->isSMTP();

//Enable SMTP debugging
// 0 = off (for production use)
// 1 = client messages
// 2 = client and server messages
$mail->SMTPDebug = 2;

//Set the hostname of the mail server
$mail->Host = 'smtp.gmail.com';
// use
// $mail->Host = gethostbyname('smtp.gmail.com');
// if your network does not support SMTP over IPv6

//Set the SMTP port number - 587 for authenticated TLS, a.k.a. RFC4409 SMTP submission
$mail->Port = 587;

//Set the encryption system to use - ssl (deprecated) or tls
$mail->SMTPSecure = 'tls';

//Whether to use SMTP authentication
$mail->SMTPAuth = true;

//Username to use for SMTP authentication - use full email address for gmail
$mail->Username = "username@gmail.com";

//Password to use for SMTP authentication
$mail->Password = "yourpassword";

//Set who the message is to be sent from
$mail->setFrom('from@example.com', 'First Last');

//Set an alternative reply-to address
$mail->addReplyTo('replyto@example.com', 'First Last');

//Set who the message is to be sent to
$mail->addAddress('whoto@example.com', 'John Doe');

//Set the subject line
$mail->Subject = 'PHPMailer GMail SMTP test';

//Read an HTML message body from an external file, convert referenced images to embedded,
//convert HTML into a basic plain-text alternative body
$mail->msgHTML(file_get_contents('contents.html'), __DIR__);

//Replace the plain text body with one created manually
$mail->AltBody = 'This is a plain-text message body';

//Attach an image file
$mail->addAttachment('images/phpmailer_mini.png');

//send the message, check for errors
if (!$mail->send()) {
    echo "Mailer Error: " . $mail->ErrorInfo;
} else {
    echo "Message sent!";
    //Section 2: IMAP
    //Uncomment these to save your message in the 'Sent Mail' folder.
    #if (save_mail($mail)) {
    #    echo "Message saved!";
    #}
}

//Section 2: IMAP
//IMAP commands requires the PHP IMAP Extension, found at: https://php.net/manual/en/imap.setup.php
//Function to call which uses the PHP imap_*() functions to save messages: https://php.net/manual/en/book.imap.php
//You can use imap_getmailboxes($imapStream, '/imap/ssl') to get a list of available folders or labels, this can
//be useful if you are trying to get this working on a non-Gmail IMAP server.
function save_mail($mail)
{
    //You can change 'Sent Mail' to any other folder or tag
    $path = "{imap.gmail.com:993/imap/ssl}[Gmail]/Sent Mail";

    //Tell your server to open an IMAP connection using the same username and password as you used for SMTP
    $imapStream = imap_open($path, $mail->Username, $mail->Password);

    $result = imap_append($imapStream, $path, $mail->getSentMIMEMessage());
    imap_close($imapStream);

    return $result;
}
?> 
```

# cordova - PhoneGap 与 BlackBerry 和 Symbain 的集成

> ID：13344246
> 
> 赞同：0
> 
> 时间：2012-11-12T13:05:05.160
> 
> 标签：cordova, blackberry, symbian

我需要一些有关为 BlackBerry 和 Symbian OS 集成 phonegap 的帮助。

我曾尝试使用 BB 和 Symbian 的 phonegap 插件，但它不起作用。有人可以向我发送有关如何完成的链接吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-13T04:42:49.653

这里有一些有用的链接，

[PhoneGap 入门（黑莓）](http://phonegap.pbworks.com/w/page/16494777/Getting%20Started%20with%20PhoneGap%20%28BlackBerry%29 "黑莓指南：phonegap.pbworks.com")

[PhoneGap 入门](http://www.netmagazine.com/tutorials/getting-started-phonegap "PhoneGap 入门：.netmagazine.com")

[塞班入门](http://docs.phonegap.com/en/2.1.0/guide_getting-started_symbian_index.md.html "Symbian 入门：docs.phonegap.com")

# oracle - Oracle JDBC 异常消息语言为德语

> ID：13344247
> 
> 赞同：4
> 
> 时间：2012-11-12T13:05:09.430
> 
> 标签：oracle, jdbc

我通过 JDBC 收到来自 Oracle 的德语异常消息。我怎样才能把它改成英文？

```
java.sql.SQLException: Die Zeitzone f³r die Datenbank-Session ist nicht festgelegt
        at oracle.jdbc.driver.SQLStateMapping.newSQLException(SQLStateMapping.java:70)
        at oracle.jdbc.driver.DatabaseError.newSQLException(DatabaseError.java:133)
        at oracle.jdbc.driver.DatabaseError.throwSqlException(DatabaseError.java:199)
        at oracle.jdbc.driver.DatabaseError.throwSqlException(DatabaseError.java:263)
        at oracle.jdbc.driver.DatabaseError.throwSqlException(DatabaseError.java:271)
        at oracle.jdbc.driver.DatabaseError.throwSqlException(DatabaseError.java:445)
        at oracle.jdbc.driver.TimestampltzAccessor.getString(TimestampltzAccessor.java:94)
        at oracle.jdbc.driver.T4CTimestampltzAccessor.getString(T4CTimestampltzAccessor.java:256)
        at oracle.jdbc.driver.OracleResultSetImpl.getString(OracleResultSetImpl.java:971) 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-12T13:41:10.337

对于 NLS 设置，它将是客户端。看到类似[JDBC 瘦驱动程序的 NLS_LANG 设置了吗？](https://stackoverflow.com/questions/1079985/nls-lang-setting-for-jdbc-thin-driver)关于如何在 JDBC 端进行设置。

# jakarta-ee - 用非英文文件名保存文件

> ID：13344248
> 
> 赞同：1
> 
> 时间：2012-11-12T13:05:10.517
> 
> 标签：jakarta-ee

我使用 Servlet+JasperReport 生成一个带有可变文件名的 pdf 文件。`fileName`但如果变量（第六行）包含非英文字符，则文件名无法正确显示。

我得到的文件是`---.pdf`or `--english--or--number--.pdf`。

这是我的代码：

```
byte[] pdf = JasperRunManager.runExportToPdf(report, params, datasource);
FacesContext context = FacesContext.getCurrentInstance();
HttpServletResponse response = (HttpServletResponse) context.getExternalContext().getResponse();

response.setContentType("application/pdf");
response.setCharacterEncoding("UTF-8");
response.setHeader("Content-disposition", "attachment; filename=\"" + fileName + ".pdf\"");

ServletOutputStream sos = responser.getOutputStream();

sos.write(pdf);
sos.flush();
sos.close();
context.responseComplete(); 
```

我做了很多搜索，但找不到正确显示非英文字符的解决方案。这似乎有点愚蠢而且很容易做，但我想要你的答案。谢谢你。

环境：debian（测试不稳定）+jsf++maven+spring+hibernate+java7.

# c# - C# 和图遍历的委托：如何提高代码的重用性

> ID：13344252
> 
> 赞同：0
> 
> 时间：2012-11-12T13:05:48.653
> 
> 标签：c#, oop, graph, delegates

我正在研究图形实现。我的 Graph 类如下所示：

```
public class Graph<VERTEX_TYPE, EDGE_TYPE, IDENTIFIER_TYPE> 
    where VERTEX_TYPE : Identifier<IDENTIFIER_TYPE>
    where EDGE_TYPE : Identifier<IDENTIFIER_TYPE>
    where IDENTIFIER_TYPE : IConvertible
{
...
} 
```

（请不要关心实现的接口，它们与问题无关）。

Vertex 和 Edge 类都包含一些可以通过这种方式访问​​的通用数据：

```
public class Vertex<VERTEX_TYPE,EDGE_TYPE,IDENTIFIER_TYPE>  
    where VERTEX_TYPE : Identifier<IDENTIFIER_TYPE>
    where EDGE_TYPE : Identifier<IDENTIFIER_TYPE>
{
    public VERTEX_TYPE Data{get;private set;}
    ....
}

public class Edge<EDGE_TYPE,VERTEX_TYPE,IDENTIFIER_TYPE> 
    where EDGE_TYPE : Identifier<IDENTIFIER_TYPE>
    where VERTEX_TYPE : Identifier<IDENTIFIER_TYPE>
{

    public EDGE_TYPE Data{get;private set;}
    ....
} 
```

现在我有一个实现一些算法的 GraphVisitor 类。当遍历图形时，我希望在算法当前遍历的边和顶点上调用一些代表。

我定义了 2 对代表，一对与必须在图形元素上执行的操作有关，例如`Vertex<VERTEX_TYPE,EDGE_TYPE,IDENTIFIER_TYPE>`. 第二对委托与仅对持有的数据执行的操作有关。

```
public class GraphVisitor<VERTEX_TYPE, EDGE_TYPE, IDENTIFIER_TYPE> 
    where VERTEX_TYPE : Identifier<IDENTIFIER_TYPE>
    where EDGE_TYPE : Identifier<IDENTIFIER_TYPE>
    where IDENTIFIER_TYPE : IConvertible

{
    public delegate void VertexDataOperation(VERTEX_TYPE vertex);
    public delegate void EdgeDataOperation(EDGE_TYPE vertex);
    public delegate void VertexOperation(Vertex<VERTEX_TYPE,EDGE_TYPE,IDENTIFIER_TYPE> vertex);
    public delegate void EdgeOperation(Edge<EDGE_TYPE,VERTEX_TYPE,IDENTIFIER_TYPE> vertex);
       .....
} 
```

我已经实现了 BFS 算法（我避免发布整个实现），将两个委托作为参数：

```
public void BFS(VertexOperation op, EdgeOperation edgeOp)
{
...      
Vertex<VERTEX_TYPE,EDGE_TYPE,IDENTIFIER_TYPE> currentVertex;
op(currentVertex);

foreach (Edge<EDGE_TYPE,VERTEX_TYPE,IDENTIFIER_TYPE> e in currentVertex.NeighBors())
{
    edgeOp(e);
    ...
}
... 
```

`VertexDataOperation`我正在尝试为and编写 BFS 版本`EdgeDataOperation`，当我意识到我最终应该复制所有 BFS 代码以使用 2 个不同的委托参数类型时：

```
public void BFS(VertexDataOperation op, EdgeDataOperation edgeOp)
...
Vertex<VERTEX_TYPE,EDGE_TYPE,IDENTIFIER_TYPE> currentVertex;
op(currentVertex.Data); //method differs only here

foreach (Edge<EDGE_TYPE,VERTEX_TYPE,IDENTIFIER_TYPE> e in currentVertex.NeighBors())
{
    edgeOp(e.Data);//method differs only here
    ...
} 
```

我想避免相同方法的相同实现。唯一改变的是方法签名和调用该方法的对象。

有没有人有任何想法来改进这段代码的设计？

编辑：

我可以将所有 4 个委托传递给一个函数，但在每次遍历期间我只会使用其中的一对，所以它看起来不太干净。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-12T17:20:38.213

首先，我强烈建议您更改类型参数的命名。约定是使用`T`前缀，然后使用 PascalCased 名称，例如`TVertex`and `TEdge`。

接下来，如果你发现自己想要几个相关的委托，那听起来你真的想要一个包含多个方法的接口。如果您想使用 lambda 表达式来表达操作，您始终可以创建接口的无操作实现以仅允许覆盖一个方法 - 甚至提供从委托创建具体实现的实例的静态方法。

这基本上就是 Reactive Extensions 对[`IObserver<T>`](http://msdn.microsoft.com/en-us/library/dd783449.aspx)界面所做的事情，而且效果很好。

# wpf - 按类型改变 xaml 模板

> ID：13344259
> 
> 赞同：0
> 
> 时间：2012-11-12T13:06:15.370
> 
> 标签：wpf, xaml, mvvm, datatemplate

下面是一段 DataTemplate，它定义了一条用于联系客户的命令（带图像的按钮）。目前为电话联系人定义，还有几个命令，所以我想将它重用于其他类型的联系方式（电子邮件等）

它和它背后的视图模型的设计方式，只有两件事需要改变才能做到这一点：

1.  ContactCommand 按钮的图像和工具提示
2.  整个最后一个按钮

似乎最可重用的方法是让整个按钮本身成为一个 DataTemplate，并在本文底部定义一个 DataType，但我不知道原始 DataTemplate 将如何使用它。我也从未使用过 DataTemplateSelector，尽管这听起来很有希望。

最好的方法是什么？代码看起来如何？

干杯，
贝里尔

# 当前数据模板

```
<DataTemplate x:Key="TelecomNumbersControlCommands">

    <DataTemplate.Resources>

        <!-- Image Style -->
        <Style TargetType="{x:Type Image}">
            <Setter Property="Height" Value="16" />
            <Setter Property="Width" Value="16" />
        </Style>

    </DataTemplate.Resources>

    <StackPanel Orientation="Horizontal" Margin="5,0,5,0">

        <Button Command="{Binding AddCommand}" >
            <Image Source="{resx:Resx Key=Img_Simplicio_Add, ResxName=Presentation.Resources.MasterDetail}" />
            <Button.ToolTip>
                <TextBlock>
                    <TextBlock.Text>
                        <resx:Resx Key="Subject_AddNew_ToolTip" BindingPath="SubjectVm.DisplayName" ResxName="Presentation.Resources.MasterDetail"/>
                    </TextBlock.Text>
                </TextBlock>
            </Button.ToolTip>
        </Button>

        <Button Command="{Binding ContactCommand}" >
            <Image Source="{resx:Resx Key=Img_Telephone, ResxName=Smack.Parties.Presentation.Resources.PartyDetailView}" />
            <Button.ToolTip>
                <TextBlock>
                    <TextBlock.Text>
                        <resx:Resx Key="ContactCommand_Telephone_Tooltip" BindingPath="SelectedVm" ResxName="Smack.Parties.Presentation.Resources.PartyDetailView"/>
                    </TextBlock.Text>
                </TextBlock>
            </Button.ToolTip>
        </Button>

        </Button>

        <Button Command="{Binding SetDefaultAreaCodeCommand}" >
            <Image Source="{resx:Resx Img_Widget, ResxName=Presentation.Resources.MasterDetail}" />
            <Button.ToolTip>
                <TextBlock>
                    <TextBlock.Text>
                        <resx:Resx Key="Subject_Settings" BindingPath="SubjectVm.DisplayName" ResxName="Presentation.Resources.MasterDetail"/>
                    </TextBlock.Text>
                </TextBlock>
            </Button.ToolTip>
        </Button>

        ...

    </StackPanel>

</DataTemplate> 
```

# 对于雷切尔

# 带有隐式数据模板的修订按钮

```
<Button Command="{Binding ContactCommand}" >
    <Button.Resources>
        <DataTemplate DataType="{x:Type CmTypes:TelecomNumberPcmShellVm}">
            <Image Source="{resx:Resx Key=Img_Telephone, ResxName=Presentation.Resources.PartyDetailView}" >
                <Image.ToolTip>
                    <TextBlock>
                        <TextBlock.Text>
                            <resx:Resx 
                                Key="ContactCommand_Telephone_Tooltip" 
                                BindingPath="SelectedVm" ResxName="Presentation.Resources.PartyDetailView"/>
                        </TextBlock.Text>
                    </TextBlock>
                </Image.ToolTip>
            </Image>
        </DataTemplate>
    </Button.Resources>
        <DataTemplate DataType="{x:Type CmTypes:EmailPcmShellVm}">
            <Image Source="{resx:Resx Key=Img_Email, ResxName=Presentation.Resources.PartyDetailView}" >
                <Image.ToolTip>
                    <TextBlock>
                        <TextBlock.Text>
                            <resx:Resx 
                                Key="ContactCommand_Email_Tooltip" 
                                BindingPath="SelectedVm" ResxName="Presentation.Resources.PartyDetailView"/>
                        </TextBlock.Text>
                    </TextBlock>
                </Image.ToolTip>
            </Image>
        </DataTemplate>
</Button>

Object Model

public class PcmShellVm<TCm> : SatelliteViewModel<Party, HashSet<PartyContactMechanism>> 
    where TCm : ContactMechanism
{
    // commands...
}

public class TelephoneNumberPcmShellVm : PcmShellVm<Telephone>
{
    ...
}

public class EmailPcmShellVm : PcmShellVm<Email>
{
    ...
} 
```

# 对象模型

```
public class PcmShellVm<TCm> : SatelliteViewModel<Party, HashSet<PartyContactMechanism>> 
    where TCm : ContactMechanism
{
    // commands...
}

public class TelephoneNumberPcmShellVm : PcmShellVm<Telephone>
{
    ...
}

public class EmailPcmShellVm : PcmShellVm<Email>
{
    ...
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-12T20:05:18.510

您`DataTemplate`在最后一个代码块中不起作用，因为您正在`DataTemplate`将`Button.Content`. 如果你把它放进去`<Button.Resources>`，它应该工作提供`Button.Content`是类型`CmTypes:TelecomNumberPcmShellVm`

此外，您需要切换到 以`Image.ToolTip`向图像添加工具提示，因为`Button.ToolTip`这不是您的有效属性`DataTemplate`

```
<Button Command="{Binding ContactCommand}">
    <Button.Resources>
        <DataTemplate DataType="{x:Type CmTypes:TelecomNumberPcmShellVm}">
            <Image Source="{resx:Resx Key=Img_Telephone, ResxName=Presentation.Resources.PartyDetailView}">
                <Image.ToolTip>
                    <TextBlock>
                        <TextBlock.Text>
                            <resx:Resx Key="ContactCommand_Telephone_Tooltip" 
                                       BindingPath="SelectedVm" 
                                       ResxName="Presentation.Resources.PartyDetailView"/>
                        </TextBlock.Text>
                    </TextBlock>
                </Image.ToolTip>
            </Image>
        </DataTemplate>
    </Button.Resources>
</Button> 
```

如果您确实想设置`Button.ToolTip`而不是`Image.ToolTip`，那么您可能需要将其设置在`DataTrigger`in 中`Button.Style`。通常对于这种情况，我有一个返回的转换器`typeof(value)`，所以我`DataTrigger`看起来像这样：

```
<DataTrigger Binding="{Binding Converter={StaticResource ObjectToTypeConverter}}" 
             Value="{x:Type CmTypes:TelecomNumberPcmShellVm}">
    <Setter Property="ToolTip" ... />
</DataTrigger> 
```

这也可以用于设置`Button.ContentTemplate`而不是使用隐式数据模板，如上所示。

# c - 返回一个字符串指针

> ID：13344260
> 
> 赞同：0
> 
> 时间：2012-11-12T13:06:23.627
> 
> 标签：c, linux, posix

我开始学习C，但我不明白我做错了什么。这是一个返回 pid+".data" 的函数的简单代码。

```
#include <stdio.h>
#include <stdlib.h>
#include <unistd.h>

char * getfilename(){
    char name[60];
    sprintf(name,"%i.data",getpid());
    return name;
}

void main(){
    char* name = getfilename();
    printf("%s",name);
} 
```

输出：`��#�a`。

所以我想我做错了什么。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-12T13:07:52.323

```
char * getfilename(){
    char name[60];
    sprintf(name,"%i.data",getpid());
    return name;
} 
```

返回后您无法访问`name`对象`getfilename`。自动对象的生命周期最后`name`结束。在函数返回后访问它是未定义的行为。`getfilename``}`

作为临时修复，您可以指定`name`as`static`并且它将起作用。但是您应该做的是让`getfilename`函数接受将写入文件名的指针参数。

**编辑：**

为什么我不建议使用`strdup`？

*   `strdup`不是标准 C 函数。`strdup`生活在 POSIX 世界中。出于可移植性的原因，我更喜欢使用标准 C 函数。
*   `strdup`执行隐藏`malloc`呼叫，您不必忘记执行`free`. `malloc`这与标准 C 库中从不调用（或实际上从未*出现*调用）的所有函数相反`malloc`。`strdup`是一个糟糕的 API 设计。
*   `strdup`正在执行字符串的副本。为什么需要执行额外的复制？只需将字符串写在您可以检索它的地方。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-11-12T13:11:48.023

一种解决方案是使用[strdup](http://linux.die.net/man/3/strdup)，即更改：

```
return name; 
```

到：

```
return strdup(name); 
```

这会使用动态内存分配（即[malloc](http://linux.die.net/man/3/strdup)）复制您的临时（本地）字符串。

当然，您必须确保在完成后[释放](http://linux.die.net/man/3/free)该字符串。

你需要：

```
#include <string.h> // strdup()
#include <stdlib.h> // free() 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-12T13:10:10.887

```
char name[60] 
```

存在于堆栈上，但只要在其内部`getfilename()`被释放，因此对它的任何引用（也由返回`getfilename()`）将变为无效。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-11-12T13:10:58.143

`char name[60]`是一个局部变量，在函数调用时分配，返回时释放。当您尝试返回它时，您实际上是在返回它的地址（毕竟数组主要是指针算术的语法糖）。现在，您的调用者有一个指向已空闲内存块的指针，因此可能包含垃圾。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-11-12T13:15:36.397

你不能`name`从你的函数返回数组`getfilename`，因为它是一个（常规）局部变量，当函数返回时这些变量会被清除。因此，当您返回`main`并尝试打印返回值时，`name`那里的指针指向已被重用于其他目的的内存块。

这个问题有几种解决方案：

1.  `name`进`getfilename` `static`。_ 这将确保它的调用寿命更长`getfilename`并且可以安全地返回，但缺点是所有调用都`getfilename`使用相同的缓冲区。
2.  动态分配数组`malloc`（完成后不要忘记清理`free`它）
3.  传递缓冲区以将值存储为参数。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-11-12T14:20:31.303

如其他答案中所述，您不能返回指向函数堆栈中某处的指针。

您可以简单地将分配的数组传递给`getfilename()`函数。您可以按如下方式重写程序。

```
#include <stdio.h>
#include <stdlib.h>
#include <unistd.h>

void getfilename(char * name)
{

    sprintf(name,"%i.data",getpid());
}

int main(void)
{
    char name[60];
    getfilename(name);
    printf("%s\n",name);
    return 0;
} 
```

这应该可以正常工作。

# javascript - Node.js 收到 POST 请求但给出客户端错误

> ID：13344265
> 
> 赞同：0
> 
> 时间：2012-11-12T13:06:35.240
> 
> 标签：javascript, ajax, node.js

我通过 AJAX 成功地将 POST 请求发送到在端口 8080 上运行的 node.js 服务器：

```
$.ajax({
    url: 'http://127.0.0.1:8080',
    type: 'post',
    dataType: 'text',
    data: 'test'
}); 
```

我可以在请求上使用事件侦听器读取和使用数据服务器端：

```
request.setEncoding('utf8');

request.addListener('data', function(chunk) {
   console.log(chunk);
});

request.addListener('end', function() {
   response.end();
}); 
```

但是，我的客户端仍然出现错误，例如 AJAX 调用不成功。我得到的错误是：

```
XMLHttpRequest cannot load http://127.0.0.1:8080/. Origin http://127.0.0.1 is not allowed by Access-Control-Allow-Origin. 
```

我还注意到没有响应，并且标题也丢失了。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-12T13:15:49.420

您从哪个页面发送 ajax 请求？它需要与服务器位于同一域 - 尝试使用相对 URL 并将客户端页面托管在同一服务器和端口上。

# html - 编辑 HTML 选择按钮的 CSS 样式

> ID：13344267
> 
> 赞同：3
> 
> 时间：2012-11-12T13:07:00.610
> 
> 标签：html, css, forms, button

> **可能重复：**
> [是否可以设置选择框的样式？](https://stackoverflow.com/questions/1072239/is-it-possible-to-style-a-select-box)

我想知道是否可以使用 CSS 更改 HTML 选择字段的样式。我想使带有内部箭头的按钮透明但将箭头保留在那里，所以基本上删除了箭头的按钮外观。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-12T13:13:22.527

仅使用 CSS 是不可能实现跨浏览器的。

要获得好看的选择字段，您必须使用 javascript。

为此有几个库：

[http://www.emblematiq.com/lab/niceforms/](http://www.emblematiq.com/lab/niceforms/)

[http://uniformjs.com/](http://uniformjs.com/)

我敢肯定，如果你只是用谷歌搜索的话，你可以找到更多。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-12T13:13:57.063

[http://bavotasan.com/2011/style-select-box-using-only-css/](http://bavotasan.com/2011/style-select-box-using-only-css/)

请务必阅读评论，这可能不适用于旧（er）浏览器，jquery 是更好的解决方案

# android - Android DDMS 错误：AMI_IsWindowSearch()

> ID：13344270
> 
> 赞同：3
> 
> 时间：2012-11-12T13:07:15.913
> 
> 标签：android, debugging, ddms

我已经编写了一个 android 应用程序，它在我刚刚开始测试的 LG 手机上生成了一个奇怪的异常。在 DDMS 中，标签是“ISP_LOG_MW_DEBUG”，文本是“AMI_IsWindowSearch()”。它在应用程序运行时每秒生成约 10 次。它似乎不会干扰程序本身，但我宁愿没有这个错误。但我在网上找不到任何关于此的信息。

如果单击主页按钮（应用程序继续在后台运行）并再次启动应用程序（新 UI，使用旧服务），这些消息的数量每次都会增加。因此可以合理地假设它们是由 UI 中的某些东西生成的。

有没有人遇到过这个错误或知道如何避免它？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-27T15:15:27.483

真实设备有时会发出很大的噪音。有时供应商只是打开了很多调试。如果您的应用程序没有崩溃或显示性能问题，我会说忽略它是安全的。

另外，尝试使用其他设备，或尝试使用模拟器。如果您在其他设备或模拟器上没有看到这些错误，我认为可以肯定地说 LG 设备的供应商开发人员只是懒惰并且没有像优秀的开发人员那样关闭所有调试。:D

D b

# mysql - 将第三方数据库“复制”到中央 mySQL 中并使 mySQL 保持最新

> ID：13344273
> 
> 赞同：2
> 
> 时间：2012-11-12T13:07:37.580
> 
> 标签：mysql, replication

我有一个我认为相当复杂的问题，想看看像你们这样的专家对我的解决方案有何看法。

**问题：**

我正在将来自多个第三方的数据收集到一个中央 mySQL 数据库中。第三方可以拥有任何数据库产品（mySQL、Oracle、postgreSQL 等）。我将需要执行以下两项任务：

1.  首次启动时，将整个数据库复制到中央 mySQL 数据库
2.  随着对第三方数据库的更改，增量更新中央 mySQL 数据库

**建议的解决方案：**

1.  我打算在 C# 中为每个第三方数据库创建数据库爬虫。例如，假设第三方之一有一个 oracle 数据库。我打算创建一个类，它将查询 oracle 数据库的定义和数据，并以编程方式创建要由中央 mySQL 数据库执行的 sql 查询。例如：创建表 XYZ（id1 int，id2 int），插入 XYZ 值（1,2）等。
2.  这是给我最大的悲痛的问题。我想知道是否有人曾经查询过数据库以有效地询问“您的最新更改是什么”，或者自 dd-mm-yyyy hh:MM:ss 以来您的更改是什么。我所说的更改是指数据更改和数据定义更改。例如：添加新列、更新 [row][column] 值、插入新行等。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-12T13:48:01.673

如果您可以访问数据库编写器程序，您不能只注入一个生成/将数据写入中央数据库（又名 LOGGER）的代码吗？

我的意思是你可以把你的中央数据库变成一个“日志数据库”。如果由于某种原因第三方数据库需要数据库回滚，您可以将命令从当前时间戳更改为 timestamp-rollback_days，然后从 INSERT 更改为 DELETE，DELETE 更改为 INSERT 等。

这样，您的数据库不会因为复制整个数据库而受到太大影响：)

# c# - String.Format 异常

> ID：13344276
> 
> 赞同：2
> 
> 时间：2012-11-12T13:07:54.100
> 
> 标签：c#, string-formatting

我可能是一个大白痴，因为没有看到非常明显的东西，但我不知道我现在可以检查什么。

问题是这样的。如果我有这个代码

```
decimal d = 45550M;
string s = string.Format("{0}", d); 
```

结果有时是`"45550,00"`而不是`"45550"`. 而且我不知道是什么原因造成的。

我可以检查什么？什么会导致 String.Format 的行为不总是相同？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-11-12T13:30:15.183

[十进制值](http://msdn.microsoft.com/en-us/library/system.decimal%28v=vs.110%29.aspx)具有一定的比例因子。根据您对十进制值执行的操作，比例因子可能会发生变化。

> 十进制数是一个浮点值，它由一个符号、一个数值中的每个数字的范围从 0 到 9 以及一个比例因子组成，该比例因子表示分隔整数和小数部分的浮点小数点的位置的数值。

除非您指定小数位数，否则小数位数默认匹配小数值的比例因子。

> 缩放因子还保留 Decimal 数字中的任何尾随零。尾随零不会影响算术或比较运算中的 Decimal 数的值。但是，如果应用了适当的格式字符串，则 ToString 方法**可以显示尾随零。**

*例子：*

```
var x = 100m;
var y = x * 1.00m;

string s1 = string.Format("{0}", x); // "100"
string s2 = string.Format("{0}", y); // "100.00" 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-11-12T13:09:55.400

结果会因机器而异，因为您没有指定用于格式化的显式文化，因此运行时将使用当前线程文化，这实际上是机器上配置的文化。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-11-12T13:10:10.413

`string.Format("{0:0}", d);`应始终输出 0 个小数（“45550”）

# left-join - adquery 左连接别名

> ID：13344279
> 
> 赞同：1
> 
> 时间：2012-11-12T13:08:02.387
> 
> 标签：left-join, alias

所以我从[这里](http://blog.webactivedirectory.com/2011/06/08/joining-active-directory-data-with-sql-server-data-cannot-fetch-a-row-from-ole-db-provider-yourprovider-for-linked-server-yourlinkedserver/#comment-334)得到以下代码：

```
BEGIN
--Create a temp table for the AD results.
DECLARE @ADTest TABLE (Column0 varchar(200), Column1 varchar(200), Column2 varchar(200))
--Get the AD data using the stored procedure.
INSERT INTO @ADTest
EXEC sp_QueryAD 'SELECT adspath, samAccountName, objectGUID FROM ''LDAP://OU=IT,OU=Us,OU=We,OU=Tg,OU=Ts,DC=co,DC=te,DC=com'' WHERE objectclass=''user''', 1
--Join the temp table and production table from SQL Server to join the AD results SQL Data
select alias.* from dbo.ad_users alias LEFT JOIN @ADTest adresult on adresult.Column0 = alias.GUID
END 
```

我从 exec sp_queryAD 得到结果，但是当我尝试加入这两个表时得到 0 个结果。我对 sql 很陌生，所以任何帮助都将不胜感激。我将表 dbo 设置为 TeamDFW-TEST，将表设置为 ad_users。但我不确定他的桌子应该如何设置。

任何想法..谢谢....

# postgresql - OLAP 和 postgresql- 工具或方法？

> ID：13344281
> 
> 赞同：2
> 
> 时间：2012-11-12T13:08:05.773
> 
> 标签：postgresql, olap, aggregation, bigdata

我正在查看一些文档以使我的数据库性能更好，并且遇到了“OLAP”预聚合术语。我想知道 OLAP 是否是一种工具或方法或方法。例如，我的 DBMS 是 postgresql，我正在开发一个大数据库。为了加快速度，我必须使用一些聚合和预聚合方法。OLAP 如何提供帮助？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-12T13:14:16.137

OLAP 是一个数据库角色。在数据库中存储 OLAP 数据时，通常您不会在数据库之外运行实时事务信息，而是出于分析和商业智能的原因将其保留。

它不是工具。它也不是一种方法，因为 OLAP 需要一些方法，但有些方法在事务环境中也很有帮助。

一般来说，您不应该考虑通过将 OLAP 合并到应用程序中来加速应用程序。相反，您会考虑将报告功能分离到单独的数据库服务器中，并定期导入数据，然后将数据馈送与操作数据存储区分开来，等等。这是一个与事务性应用程序开发非常不同的领域。

# c# - 向linux中的另一个应用程序发送消息

> ID：13344283
> 
> 赞同：0
> 
> 时间：2012-11-12T13:08:08.827
> 
> 标签：c#, linux, cross-platform, sendmessage, cross-application

我想将消息从一个应用程序发送到另一个应用程序。在 Windows 中，我会为 PostMessage 或 SendMessage 使用 DllImprt。

我可以在 linux 中做什么？有没有在 Windows 中不使用 PostMessage 或 SendMessage 的选项？

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-12T13:18:02.303

看看 D-Bus： [http ://www.freedesktop.org/wiki/Software/dbus](http://www.freedesktop.org/wiki/Software/dbus)

不确定它是否适用于 Windows，但它在 Linux 应用程序中非常流行。

# linux - 匹配 bash case 语句中的字符串并查找当前无线网络

> ID：13344285
> 
> 赞同：0
> 
> 时间：2012-11-12T13:08:20.840
> 
> 标签：linux, bash, wireless, iwconfig

我有一个 bash 脚本（供个人使用），其中一部分会根据我连接的网络打印一条消息。作为其中的一部分，我想查看当前连接的无线网络的 ID。

我正在做的是从输出中解析无线名称，`iwconfig`并且我想打印出名称或某些网络的特殊消息：

```
SSID=`iwconfig wlan0|grep "ESSID:" | sed "s/.*ESSID:\"\(.*\)\"/\1/"` 2>/dev/null
case "$SSID" in
    StaffOnly)
        echo "Staff only network at Work" ;;
    *)
        echo "You're on a wireless network called $SSID"
esac 
```

第二部分（打印我连接到的任何网络的名称）有效，但在 StaffOnly 网络上的特殊情况不匹配并通过另一个。

我想知道我在`case`声明中做错了什么。而且，如果有更好的方法来做到这一点。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-12T13:44:36.317

该`sed`命令缺少尾随`.*`. 它应该是：

```
SSID=`iwconfig wlan0|grep "ESSID:" | sed "s/.*ESSID:\"\(.*\)\".*/\1/"` 2>/dev/null
                                                              ^^ HERE! 
```

否则，您将把行尾留在里面，它显然包含一些导致您不匹配的空格。

几个相关说明：

*   重定向应该*在*反引号内：

    ```
    SSID=`iwconfig wlan0|grep "ESSID:" | sed "s/.*ESSID:\"\(.*\)\".*/\1/" 2>/dev/null` 
    ```

*   `$()`通常比反引号更受欢迎，因为它可以嵌套：

    ```
    SSID=$(iwconfig wlan0|grep "ESSID:" | sed "s/.*ESSID:\"\(.*\)\".*/\1/" 2>/dev/null) 
    ```

*   在进行调试打印时，始终在变量内容周围添加一些分隔符，以便您看到任何前导和尾随空格。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-11-12T13:51:45.673

你不需要`sed`。这一切都可以使用`grep`如下方式完成：

```
SSID=$(iwconfig wlan0 | grep -oP '(?<=ESSID:")[^"]*') 
```

# c# - 数字时钟不显示

> ID：13344288
> 
> 赞同：0
> 
> 时间：2012-11-12T13:08:27.433
> 
> 标签：c#, winforms, clock

这真的让我很困惑。

我想做的就是在 Windows 窗体上创建一个数字时钟，所以我用谷歌搜索并尝试了这段代码，但它拒绝显示在标签中。

```
 private void timer1_Tick(object sender, EventArgs e)
    {
        label1.Text = DateTime.Now.ToString("HH:mm:ss");
    } 
```

我究竟做错了什么？

感谢您提前提供的所有帮助

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-12T13:11:35.713

您需要设置[`timer1.Interval`](http://msdn.microsoft.com/en-us/library/system.windows.forms.timer.interval.aspx)一个合理的值，例如 1000。

你还需要设置[`timer1.Enabled = true;`](http://msdn.microsoft.com/en-us/library/system.windows.forms.timer.enabled.aspx)

最后，您需要确保您的事件处理程序`timer1_Tick`连接到[`timer1.Tick`](http://msdn.microsoft.com/en-us/library/system.windows.forms.timer.tick.aspx)现有计时器的事件。

# java - 如何在 Java 中为组布局设置 Scrollable TextArea？

> ID：13344289
> 
> 赞同：2
> 
> 时间：2012-11-12T13:08:27.063
> 
> 标签：java, swing, jframe, jtextarea, keylistener

我有个问题。每次，当我向 TextArea 添加更多符号（数字）时，它都不会使其可滚动。编辑：现在它可以按我的意愿工作。我只需要更改 2 个单词。谢谢。

```
class NumOnly extends KeyAdapter {  

    private String Atlauts = "[^0-9]";  //Allowed Buttons.
    public void keyReleased(KeyEvent e) {   //Key event. What happens when the button is pressed
        String curText = ((JTextComponent) e.getSource()).getText();  //Current text
        curText = curText.replaceAll(Atlauts, ""); 

        ((JTextComponent) e.getSource()).setText(curText);  
    }  
}  

public class kursadarbs{

    public static void main(String[] args) {

        JFrame frame= new JFrame();
        JPanel panel= new JPanel();

        frame.setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);

        //components
        JLabel label1= new JLabel("Insert first number: ");

        final JTextField textbox1= new JTextField(10);
        textbox1.addKeyListener(new NumOnly());

        JLabel label2= new JLabel("Insert second number: ");

        final JTextField textbox2= new JTextField(10);
        textbox2.addKeyListener(new NumOnly());

        JButton button= new JButton("Calculate");

        final JTextArea textarea= new JTextArea(20,20); //Result is stored in there
        textarea.setEditable(false);
        textarea.setLineWrap(true);
        JScrollPane scroll= new JScrollPane(textarea);
        scroll.setVerticalScrollBarPolicy(JScrollPane.VERTICAL_SCROLLBAR_ALWAYS);
        textarea.setWrapStyleWord(true);
        textarea.setBorder(new TitledBorder(new EtchedBorder(), "Result"));

        GroupLayout groupLayout = new GroupLayout(panel);
        panel.setLayout(groupLayout);  
        groupLayout.setAutoCreateGaps(true);      
        groupLayout.setAutoCreateContainerGaps(true); 

        GroupLayout.SequentialGroup HorSGroup= groupLayout.createSequentialGroup(); 
        GroupLayout.SequentialGroup VerSGroup= groupLayout.createSequentialGroup(); 

        GroupLayout.ParallelGroup HParallelGroup1= groupLayout.createParallelGroup(GroupLayout.Alignment.LEADING);
        GroupLayout.ParallelGroup HParallelGroup2= groupLayout.createParallelGroup(GroupLayout.Alignment.LEADING);
        GroupLayout.ParallelGroup HParallelGroup3= groupLayout.createParallelGroup(GroupLayout.Alignment.LEADING);

        HParallelGroup1.addComponent(label1); //adding components to the group
        HParallelGroup1.addComponent(label2);
        HParallelGroup2.addComponent(textbox1);
        HParallelGroup2.addComponent(textbox2);
        HParallelGroup2.addComponent(scroll);
        HParallelGroup3.addComponent(button);

        HorSGroup.addGroup(HParallelGroup1);
        HorSGroup.addGroup(HParallelGroup2);
        HorSGroup.addGroup(HParallelGroup3);

        GroupLayout.ParallelGroup VerPGroup1= groupLayout.createParallelGroup(GroupLayout.Alignment.BASELINE); //Vertical group
        GroupLayout.ParallelGroup VerPGroup2= groupLayout.createParallelGroup(GroupLayout.Alignment.BASELINE);
        GroupLayout.ParallelGroup VerPGroup3= groupLayout.createParallelGroup(GroupLayout.Alignment.BASELINE);

        VerPGroup1.addComponent(label1); //adding components to groups
        VerPGroup1.addComponent(textbox1);
        VerPGroup1.addComponent(button);
        VerPGroup2.addComponent(label2);
        VerPGroup2.addComponent(textbox2);
        VerPGroup3.addComponent(scroll);

        VerSGroup.addGroup(VerPGroup1);
        VerSGroup.addGroup(VerPGroup2);
        VerSGroup.addGroup(VerPGroup3);

        groupLayout.setHorizontalGroup(HorSGroup);
        groupLayout.setVerticalGroup(VerSGroup);

        Dimension dimension = Toolkit.getDefaultToolkit().getScreenSize();
        int x = (int) (dimension.getWidth()/4);
        int y = (int) (dimension.getHeight()/4);
        frame.setLocation(x, y); //Places the program almost in the middle

        button.addActionListener(new ActionListener() {

            public void actionPerformed(ActionEvent e)
            {
               //what happens when "calculate" is pressed.
                String first = null, second = null; 
                int first1=0, second1=0;

               first= textbox1.getText();  //getting textbox1 value.
               second= textbox2.getText();

               if(!first.isEmpty() && !second.isEmpty()) //If fields are not empty..
               {
                   first1= Integer.parseInt(first);  //string to integer.
                   second1= Integer.parseInt(second);

                   if(first1<second1){ //Check, if the first number is bigger than second.
                   System.out.println(first1);                 
                   textarea.append(first+"\n");
                   }// Ja ir pareizi 
                   else 
                   {
                       JOptionPane.showMessageDialog(null,"Incorrect data. " );
                   }
               } else 
               {
                   JOptionPane.showMessageDialog(null,"Incorrect data." );
               }
            }
        });

        frame.add(panel); //add the panel
        frame.setSize(500, 500); //program size in pix
        frame.setResizable(false); //putting that the frame can't change size
        frame.setTitle("Kursa darbs");
        frame.setVisible(true);

    }

} 
```

好吧，主要问题是Textarea。如您所见，英语不是我的母语，我是 JFrame 的初学者。我已经尝试了一切......请帮忙。

已经谢谢你了。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-12T23:13:29.300

而不是添加`JTextArea`到组中，*添加`JScrollPane`包含它*的！

```
 //HParallelGroup2.addComponent(textarea);
    HParallelGroup2.addComponent(scroll);
    HParallelGroup3.addComponent(button);

    HorSGroup.addGroup(HParallelGroup1); //Horizontālās grupas tiek pievienotas sakārtotajai grupai
    HorSGroup.addGroup(HParallelGroup2);
    HorSGroup.addGroup(HParallelGroup3);

    GroupLayout.ParallelGroup VerPGroup1= groupLayout.createParallelGroup(GroupLayout.Alignment.BASELINE); //Izveido Vertikālās grupas.
    GroupLayout.ParallelGroup VerPGroup2= groupLayout.createParallelGroup(GroupLayout.Alignment.BASELINE);
    GroupLayout.ParallelGroup VerPGroup3= groupLayout.createParallelGroup(GroupLayout.Alignment.BASELINE);

    VerPGroup1.addComponent(label1); //Pievieno objektus
    VerPGroup1.addComponent(textbox1);
    VerPGroup1.addComponent(button);
    VerPGroup2.addComponent(label2);
    VerPGroup2.addComponent(textbox2);
    //VerPGroup3.addComponent(textarea);
    VerPGroup3.addComponent(scroll); 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-11-12T13:13:28.387

*   永远不要为[JTextComponents使用](http://docs.oracle.com/javase/tutorial/uiswing/components/text.html)[KeyListener](http://docs.oracle.com/javase/tutorial/uiswing/events/keylistener.html)

*   改用[DocumentListener](http://docs.oracle.com/javase/tutorial/uiswing/events/documentlistener.html)（允许插入`String`, `Copy-Paste`, `SystemClipBoard`, ei）

*   用于过滤不需要`char(s)`的使用[DocumentFilter](https://stackoverflow.com/a/9430683/714968)

*   使用[JFormattedTextField](http://docs.oracle.com/javase/tutorial/uiswing/components/formattedtextfield.html) with`Number formatter`而不是从[JTextField](http://docs.oracle.com/javase/tutorial/uiswing/components/textfield.html)解析数字或添加`DocumentFilter`with `Pattern`to`JTextField`仅过滤数字

# javascript - 南非身份证号码验证并获取年龄和性别

> ID：13344294
> 
> 赞同：7
> 
> 时间：2012-11-12T13:08:37.433
> 
> 标签：javascript, jquery, validation

我对此进行了研究，但我使用的代码似乎都不起作用。南非身份证号码包含出生日期和性别。我想要的只是在他们的 ID 号输入到输入字段时提取该信息并验证它，最好是在 jQuery 或 javascript 中

任何帮助表示赞赏，

大卫

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-11-12T16:48:32.493

您可以使用 Koenyn 的正则表达式验证，不太确定输入中的一位数（0-9？）如何代表性别，但基于您提供的[这个工具](http://www.legalcity.net/Index.cfm?fuseaction=tools.idcheck)和 David Russell 的[Using Javascript to validate South Africa ID Numbers](http://daverussell.co.za/wordpress/2010/03/02/using-javascript-to-validate-south-african-id-numbers/)，这是一个未经测试的试图：

**更新 1：** 关注此线程后，[南非身份证号码是由什么组成的？](http://www.sadev.co.za/content/what-south-african-id-number-made)，我更新了我的实施以包括性别和公民身份测试。

**更新 2：**`id_month + 1`忘记在日期字符串 中包含月份编号增量`fullDate`，使用 Dawid 的修复更新解决方案。

**HTML 标记**：

```
<div id="error"></div>

<form id="idCheck">
    <p>Enter the ID Number: <input id="idnumber" /> </p>
    <p> <input type="submit" value="Check" /> </p>
</form>

<div id="result"> </div> 
```

**Javascript**：

```
function Validate() {
    // first clear any left over error messages
    $('#error p').remove();

    // store the error div, to save typing
    var error = $('#error');

    var idNumber = $('#idnumber').val();

    // assume everything is correct and if it later turns out not to be, just set this to false
    var correct = true;

    //Ref: http://www.sadev.co.za/content/what-south-african-id-number-made
    // SA ID Number have to be 13 digits, so check the length
    if (idNumber.length != 13 || !isNumber(idNumber)) {
        error.append('<p>ID number does not appear to be authentic - input not a valid number</p>');
        correct = false;
    }

    // get first 6 digits as a valid date
    var tempDate = new Date(idNumber.substring(0, 2), idNumber.substring(2, 4) - 1, idNumber.substring(4, 6));

    var id_date = tempDate.getDate();
    var id_month = tempDate.getMonth();
    var id_year = tempDate.getFullYear();

    var fullDate = id_date + "-" + (id_month + 1) + "-" + id_year;

    if (!((tempDate.getYear() == idNumber.substring(0, 2)) && (id_month == idNumber.substring(2, 4) - 1) && (id_date == idNumber.substring(4, 6)))) {
        error.append('<p>ID number does not appear to be authentic - date part not valid</p>');
        correct = false;
    }

    // get the gender
    var genderCode = idNumber.substring(6, 10);
    var gender = parseInt(genderCode) < 5000 ? "Female" : "Male";

    // get country ID for citzenship
    var citzenship = parseInt(idNumber.substring(10, 11)) == 0 ? "Yes" : "No";

    // apply Luhn formula for check-digits
    var tempTotal = 0;
    var checkSum = 0;
    var multiplier = 1;
    for (var i = 0; i < 13; ++i) {
        tempTotal = parseInt(idNumber.charAt(i)) * multiplier;
        if (tempTotal > 9) {
            tempTotal = parseInt(tempTotal.toString().charAt(0)) + parseInt(tempTotal.toString().charAt(1));
        }
        checkSum = checkSum + tempTotal;
        multiplier = (multiplier % 2 == 0) ? 1 : 2;
    }
    if ((checkSum % 10) != 0) {
        error.append('<p>ID number does not appear to be authentic - check digit is not valid</p>');
        correct = false;
    };

    // if no error found, hide the error message
    if (correct) {
        error.css('display', 'none');

        // clear the result div
        $('#result').empty();
        // and put together a result message
        $('#result').append('<p>South African ID Number:   ' + idNumber + '</p><p>Birth Date:   ' + fullDate + '</p><p>Gender:  ' + gender + '</p><p>SA Citizen:  ' + citzenship + '</p>');
    }
    // otherwise, show the error
    else {
        error.css('display', 'block');
    }

    return false;
}

function isNumber(n) {
    return !isNaN(parseFloat(n)) && isFinite(n);
}

$('#idCheck').submit(Validate); 
```

**演示**：http: [//jsfiddle.net/chridam/VSKNx/](http://jsfiddle.net/chridam/VSKNx/)

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2012-11-12T13:26:20.913

这是我们公司的验证正则表达式：

```
string IdExpression = @"(?<Year>[0-9][0-9])(?<Month>([0][1-9])|([1][0-2]))(?<Day>([0-2][0-9])|([3][0-1]))(?<Gender>[0-9])(?<Series>[0-9]{3})(?<Citizenship>[0-9])(?<Uniform>[0-9])(?<Control>[0-9])"; 
```

至于使用正则表达式，它真的很简单 [http://www.w3schools.com/jsref/jsref_obj_regexp.asp](http://www.w3schools.com/jsref/jsref_obj_regexp.asp)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2016-08-24T08:51:44.463

您可以使用一个 jQuery 插件。在[http://www.verifyid.co.za/jqueryid 查看](http://www.verifyid.co.za/jqueryid)

# tfs - 如何在 TFS 中重命名团队项目和区域路径？

> ID：13344295
> 
> 赞同：18
> 
> 时间：2012-11-12T13:08:41.337
> 
> 标签：tfs, azure-devops

如何重命名托管在 Microsoft Team Foundation Service 中的团队项目？以及如何重命名区域路径？

* * *

## 回答 #1

> 赞同：29
> 
> 时间：2012-11-12T17:30:04.037

不幸的是，这在 TFS 2005、2008、2010、2012 或 2013 中是不可能的。但是完成这项工作的工作已经完成，现在可以在 VSO 上使用，并将在 TFS 2015 中发布。

[http://blogs.msdn.com/b/bharry/archive/2015/04/24/team-project-rename-available-on-vs-online.aspx](http://blogs.msdn.com/b/bharry/archive/2015/04/24/team-project-rename-available-on-vs-online.aspx)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2015-04-24T20:57:18.263

您现在可以在 Visual Studio Online 和即将发布的 TFS 2015 中重命名团队项目：[https ://www.visualstudio.com/en-us/news/2015-apr-24-vso](https://www.visualstudio.com/en-us/news/2015-apr-24-vso)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2015-03-16T18:03:06.127

[创意](https://visualstudio.uservoice.com/forums/121579-visual-studio/suggestions/2037605-rename-project-in-tfs)状态更改为已**开始**

Visual Studio 团队（Microsoft 产品团队）于 2015 年 2 月 27 日回复：

> 我很高兴地宣布，今天我们计划为 TFS 2015 启用项目重命名。我们还没有 Visual Studio Online 的 ETA。
> 
> 如果您想了解我们的进展，请访问[http://www.visualstudio.com/en-us/news/release-archive-vso](http://www.visualstudio.com/en-us/news/release-archive-vso)上的未来功能开发页面。
> 
> Ewald Hofman TFS 项目经理

# android - 安卓PDF阅读器

> ID：13344304
> 
> 赞同：4
> 
> 时间：2012-11-12T13:09:13.637
> 
> 标签：android, pdf, pdf-reader

我想使用 Android pdf 库[http://andpdf.sourceforge.net/](http://andpdf.sourceforge.net/)，但我有同样的错误。日志：

```
 ST='file 'no file selected' not found'
 ST='reading page 1, zoom:1.0' 
```

我的课程：

```
public class Reader extends PdfViewerActivity {

 public int getPreviousPageImageResource() { return R.drawable.left_arrow; }
 public int getNextPageImageResource() { return R.drawable.right_arrow; }
 public int getZoomInImageResource() { return R.drawable.zoom_in; }
 public int getZoomOutImageResource() { return R.drawable.zoom_out; }
 public int getPdfPasswordLayoutResource() { return R.layout.pdf_file_password; }
 public int getPdfPageNumberResource() { return R.layout.dialog_pagenumber; }
 public int getPdfPasswordEditField() { return R.id.etPassword; }
 public int getPdfPasswordOkButton() { return R.id.btOK; }
 public int getPdfPasswordExitButton() { return R.id.btExit; }
 public int getPdfPageNumberEditField() { return R.id.pagenum_edit; }
} 
```

和

```
public class StartScreen extends Activity {
@Override
protected void onCreate(Bundle savedInstanceState) {
    // TODO Auto-generated method stub
    super.onCreate(savedInstanceState);
    Intent intent = new Intent(this, Reader.class);
     intent.putExtra(PdfViewerActivity.EXTRA_PDFFILENAME, "/sdcard/test.pdf");
     startActivity(intent);
}
} 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-12T13:17:20.877

这里一些谷歌代码有一些很好的源代码，用于在 android 中阅读 pdf。

[链接1](http://code.google.com/p/apv/)

[链接2](http://code.google.com/p/vudroid/)

[一个很棒的例子](http://code.google.com/p/apdfviewer/)

[链接 4](http://code.google.com/p/droidreader/)

[链接 5](http://code.google.com/p/android-pdf/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2016-01-14T08:22:42.377

现在我们有了这个很棒的 PDF 查看库：

[https://github.com/JoanZapata/android-pdfview](https://github.com/JoanZapata/android-pdfview)

它使用起来非常简单，并且有很多功能：

> Android PDFView 是一个库，它为 Android 提供了一个快速的 PDFView 组件，包括动画、手势和缩放。它基于 VuDroid 解码 PDF 文件。

只需在您的 XML 中包含视图并按如下方式使用它：

```
pdfView.fromAsset(pdfName)
    .pages(0, 2, 1, 3, 3, 3)
    .defaultPage(1)
    .showMinimap(false)
    .enableSwipe(true)
    .onDraw(onDrawListener)
    .onLoad(onLoadCompleteListener)
    .onPageChange(onPageChangeListener)
    .load(); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2016-04-28T12:45:46.833

使用[PdfViewPager](https://github.com/voghDev/PdfViewPager)，您可以轻松加载和显示 PDF 文件。您需要的所有代码是：

```
PdfViewPager pdfViewPager = new PDFViewPager(this, "sample.pdf");
setContentView(pdfViewPager); 
```

或者你可以像这样将它嵌入到你的布局中：

```
<es.voghdev.pdfviewpager.library.PDFViewPager
  android:id="@+id/pdfViewPager"
  android:layout_width="match_parent"
  android:layout_height="match_parent"
  app:assetFileName="sample.pdf"/> 
```

如果您想了解更多信息，请查看 lib。

# android - pro Guard 不显示 admob 广告

> ID：13344305
> 
> 赞同：11
> 
> 时间：2012-11-12T13:09:15.773
> 
> 标签：android, admob, proguard

我开发了 android 应用程序并使用 admob sdk 6.2.1 来显示广告，当我在我的真实设备和模拟器上测试该应用程序时，会显示广告。但是当我对我的应用程序应用 pro Guard 并在我的设备上进行测试时（我也在其他设备上测试过）广告没有出现，请帮忙！

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2012-11-12T18:58:23.857

将此添加到您的proguard：

```
-keep class com.google.ads.** # Don't proguard AdMob classes
-dontwarn com.google.ads.** # Temporary workaround for v6.2.1\. It gives a warning that you can ignore 
```

编辑 2020：

一段时间以来，Google 移动广告 SDK 已经发布了自己的 proguard 规则，这些规则将清单合并到您的应用程序中，因此您无需自己添加任何内容。合并的规则还保留了来自第三方中介适配器的方法，这些方法是使中介工作所需的。

* * *

## 回答 #2

> 赞同：11
> 
> 时间：2013-12-13T21:52:13.537

[从文档](https://developers.google.com/mobile-ads-sdk/docs/admob/android/faq)：

> 要在 Google 移动广告中安全使用 ProGuard，请将以下内容添加到您的 ProGuard 配置中：

```
-keep public class com.google.android.gms.ads.** {
    public *;
}

-keep public class com.google.ads.** {
    public *;
} 
```

> 这将防止公共类上的所有公共方法被混淆。
> 
> 如果您将 AdMob 中介与其他广告网络一起使用，则还应为每个 SDK 和适配器库保留来自公共类的公共方法。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2019-02-18T11:00:22.433

**Android 中 Admob 的 Proguard 规则**

```
-keep public class com.google.android.gms.ads.**{
   public *;
}

# For old ads classes
-keep public class com.google.ads.**{
   public *;
}

# For mediation
-keepattributes *Annotation*

# Other required classes for Google Play Services
# Read more at http://developer.android.com/google/play-services/setup.html
-keep class * extends java.util.ListResourceBundle {
   protected Object[][] getContents();
}

-keep public class com.google.android.gms.common.internal.safeparcel.SafeParcelable {
   public static final *** NULL;
}

-keepnames @com.google.android.gms.common.annotation.KeepName class *
-keepclassmembernames class * {
   @com.google.android.gms.common.annotation.KeepName *;
}

-keepnames class * implements android.os.Parcelable {
   public static final ** CREATOR;
} 
```

# php - PHP根据总值将行数据分为2组

> ID：13344308
> 
> 赞同：2
> 
> 时间：2012-11-12T13:09:23.587
> 
> 标签：php

下面是我拥有的数据集

```
ID | Dept | Value

1  | 0    | 50.58

2  | 0    | 75.64

3  | 0    | 32.57

4  | 0    | 187.57

5  | 0    | 354.54 
```

我将如何将其拆分为 2 部门和 1 部门的 2 组，其中的细分将基于价值。即，价值接近总值的一半。

在上面的示例中，ID 1-4 将在第 1 组中，总数为 346.36，ID 5 将在第 2 组中，总数为 354.54。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-12T13:14:02.743

这是一个非常困难的问题。有很多算法可以完成这种“装箱”解决方案（即尝试在各种容器中平均分割各种尺寸）。这本质上是一样的。查看[填充量算法](https://stackoverflow.com/questions/6988300/fill-volume-algorithm)以获取更多信息。

简而言之，这并不容易，充其量只能获得最佳解决方案的近似值。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-12T13:26:10.230

这段代码应该做你想做的事。

```
<?php 
// Your records stored as arrays
$records = array(
        array(1, 0, 50.58),
        array(2, 0, 75.64),
        array(3, 0, 32.57),
        array(4, 0, 187.57),        
        array(5, 0, 354.54)
);

// Blank value for total value
$total_value = 0;

// Calculate half way of total
foreach ($records AS $record)
{
    $total_value += $record[2];
}

// Get the half way point
$half_way = $total_value / 2;

// Create array for each department
$dept_1 = array();
$dept_2 = array();

// Split the records in to department
foreach ($records AS $record)
{
    if ($record[2] >= $half_way)
    {
        // Put in to department 1
        array_push($dept_2, $record);
    }
    else
    {
        // Put in to department 2
        array_push($dept_1, $record);
    }
}

// Show each departments contents
var_dump($dept_1);
var_dump($dept_2);
?> 
```

它产生两个数组`$dept_1`，`$dept_2`取决于它们的值是高于还是低于总数的一半：

```
array(4) {
  [0]=>
  array(3) {
    [0]=>
    int(1)
    [1]=>
    int(0)
    [2]=>
    float(50.58)
  }
  [1]=>
  array(3) {
    [0]=>
    int(2)
    [1]=>
    int(0)
    [2]=>
    float(75.64)
  }
  [2]=>
  array(3) {
    [0]=>
    int(3)
    [1]=>
    int(0)
    [2]=>
    float(32.57)
  }
  [3]=>
  array(3) {
    [0]=>
    int(4)
    [1]=>
    int(0)
    [2]=>
    float(187.57)
  }
}

array(1) {
  [0]=>
  array(3) {
    [0]=>
    int(5)
    [1]=>
    int(0)
    [2]=>
    float(354.54)
  }
} 
```

# java - 如何发送电子邮件非活动？

> ID：13344315
> 
> 赞同：0
> 
> 时间：2012-11-12T13:10:07.850
> 
> 标签：java, android, android-intent

我需要发送电子邮件，所以我创建了一个类，但 startActivity(intent) 中出现错误。此代码在 Main Activity 中运行良好。这里的代码：

```
public class SendEmail extends Activity {
private String emailTo;
private String subject;
private String message;

public SendEmail(String AEmailTo, String ASubject, String AMessage) {
    this.emailTo = AEmailTo;
    this.subject = ASubject;
    this.message = AMessage;
}

public void Send(){
     try {          
        Intent intent = new Intent(Intent.ACTION_SEND);
        intent.setType("application/octet-stream");
        intent.putExtra(Intent.EXTRA_SUBJECT, this.subject);
        intent.putExtra(Intent.EXTRA_TEXT, this.message);
        intent.putExtra(Intent.EXTRA_EMAIL, new String[] {this.emailTo});
        intent.addFlags(Intent.FLAG_ACTIVITY_NEW_TASK);
        startActivity(intent);
       } catch (Exception e) {   
         Log.e("SendMail", e.getMessage(), e);   
       }
    } 
```

}

日志猫：

```
11-12 10:54:56.783: E/SendMail(19773): null
11-12 10:54:56.783: E/SendMail(19773): java.lang.NullPointerException
11-12 10:54:56.783: E/SendMail(19773):  at    android.app.Activity.startActivityForResult(Activity.java:2817)
11-12 10:54:56.783: E/SendMail(19773):  at    android.app.Activity.startActivity(Activity.java:2923)
11-12 10:54:56.783: E/SendMail(19773):  at   idealbrasil.forcav.android.SendEmail.Send(SendEmail.java:52)
11-12 10:54:56.783: E/SendMail(19773):  at idealbrasil.forcav.android.util.funcoes.SendEmail(funcoes.java:221)
11-12 10:54:56.783: E/SendMail(19773):  at idealbrasil.forcav.android.util.TrataErro$1.onClick(TrataErro.java:136)
11-12 10:54:56.783: E/SendMail(19773):  at com.android.internal.app.AlertController$ButtonHandler.handleMessage(AlertController.java:158)
11-12 10:54:56.783: E/SendMail(19773):  at android.os.Handler.dispatchMessage(Handler.java:99)
11-12 10:54:56.783: E/SendMail(19773):  at android.os.Looper.loop(Looper.java:123)
11-12 10:54:56.783: E/SendMail(19773):  at android.app.ActivityThread.main(ActivityThread.java:4627) 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-12T13:49:03.177

startActivity() 的上下文为空，这就是您收到空指针异常的原因。看起来您是 Android 新手，并且该过程不符合编码约定。

您可以在类中使用 onCreate() 方法，然后使用类 startActivity()，或者将上下文传递给该函数，然后调用

`context.startActivity(intent);`

# java - 从 byte [] 一个 FileInputStream、File 或 POIFSFileSystem

> ID：13344322
> 
> 赞同：-1
> 
> 时间：2012-11-12T13:10:36.307
> 
> 标签：java, byte, fileinputstream

使用alfresco的实用方法可以找到一个。doc 文件并将其放入我的目标的字节数组中，并通过此字节数组成功生成其中之一：

```
java.io.File;
java.io.FileInputStream;
org.apache.poi.poifs.filesystem.POIFSFileSystem 
```

然后通过org.apache.poi.hwpf.HWPFDocument这个类来阅读和编辑

请帮帮我谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-12T13:15:19.647

A [HWPFDocument](http://poi.apache.org/apidocs/org/apache/poi/hwpf/HWPFDocument.html)接受 a `InputStream`，所以答案就是用 a 构造它`ByteArrayInputStream`：

```
byte[] buf = ... // loaded by Alfresco
HWPFDocument doc = new HWPFDocument(new ByteArrayInputStream(buf)); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-12T13:13:35.370

好吧，如果您的意思是将 .doc 文件放入字节数组中，那么试试这个....

```
File fKey = new File("d:/MyKey.doc");
FileInputStream fi = new FileInputStream(fKey);
byte[] decode =  new byte[(int)fKey.length()];
fi.read(decode); 
```

# vb6 - 无法设置richtextbox控件的属性

> ID：13344325
> 
> 赞同：1
> 
> 时间：2012-11-12T13:10:45.903
> 
> 标签：vb6, richtextbox

在一台计算机`'A'`（win vista 32 位）上，如果我在调试模式下运行我的程序，所有richtextbox 控件都会抛出`'property cannot be set'`错误。我可以继续构建`exe`（没有错误）和完整的应用程序，但是当我在这台计算机或计算机（win xp）上安装并运行应用程序`'B'`时，两者都会出现相同的问题。

但是，如果我在计算机“”上以调试模式运行完全相同的代码，`B`则没有错误。如果我在计算机“ ”上构建并安装应用程序，`B`它工作正常。如果我在计算机上安装此应用程序' `A`'它也可以正常工作。将应用程序放在一起进行分发时，两台计算机使用相同的副本`richtx32.ocx`（它与代码一样，是从同一个存储库中签出的）。

如果我在计算机''上查看以前的代码副本`A`（以前表现良好），它们现在也会出现与最新版本的代码相同的问题。

我不知道发生了什么，请帮忙！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-16T18:41:56.543

我看到多个引用[在 Visual Studio 6.0 Service Pack 4](http://support.microsoft.com/kb/212733)`Property cannot be set`中分发的富文本控件版本中解析的消息，以及[在 SP5 中修复的](http://support.microsoft.com/kb/199722)另一条消息。`Property cannot be set`

首先，确保至少安装了 SP5；我会选择SP6。

作为参考，我的 Microsoft Rich Textbox Control 6.0 (SP6) 位于`C:\Windows\System32\RICHTX32.OCX`，版本为**6.1.97.82**。

我知道您说两台机器都安装了相同的控件副本；为了完整起见，您可能需要仔细检查新控件是否在安装后注册。

**编辑：**

我导出了`HKEY_CLASSES_ROOT\CLSID\{3B7C8860-D78F-101B-B9B5-04021C009402}`reg 密钥：

```
Windows Registry Editor Version 5.00

[HKEY_CLASSES_ROOT\CLSID\{3B7C8860-D78F-101B-B9B5-04021C009402}]
@="Microsoft Rich Textbox Control 6.0 (SP6)"

[HKEY_CLASSES_ROOT\CLSID\{3B7C8860-D78F-101B-B9B5-04021C009402}\Control]

[HKEY_CLASSES_ROOT\CLSID\{3B7C8860-D78F-101B-B9B5-04021C009402}\Implemented Categories]

[HKEY_CLASSES_ROOT\CLSID\{3B7C8860-D78F-101B-B9B5-04021C009402}\Implemented Categories\{0DE86A52-2BAA-11CF-A229-00AA003D7352}]

[HKEY_CLASSES_ROOT\CLSID\{3B7C8860-D78F-101B-B9B5-04021C009402}\Implemented Categories\{0DE86A53-2BAA-11CF-A229-00AA003D7352}]

[HKEY_CLASSES_ROOT\CLSID\{3B7C8860-D78F-101B-B9B5-04021C009402}\Implemented Categories\{0DE86A57-2BAA-11CF-A229-00AA003D7352}]

[HKEY_CLASSES_ROOT\CLSID\{3B7C8860-D78F-101B-B9B5-04021C009402}\Implemented Categories\{40FC6ED4-2438-11CF-A3DB-080036F12502}]

[HKEY_CLASSES_ROOT\CLSID\{3B7C8860-D78F-101B-B9B5-04021C009402}\Implemented Categories\{40FC6ED5-2438-11CF-A3DB-080036F12502}]

[HKEY_CLASSES_ROOT\CLSID\{3B7C8860-D78F-101B-B9B5-04021C009402}\Implemented Categories\{7DD95802-9882-11CF-9FA9-00AA006C42C4}]

[HKEY_CLASSES_ROOT\CLSID\{3B7C8860-D78F-101B-B9B5-04021C009402}\InprocServer32]
@="C:\\Windows\\system32\\RICHTX32.OCX"
"ThreadingModel"="Apartment"

[HKEY_CLASSES_ROOT\CLSID\{3B7C8860-D78F-101B-B9B5-04021C009402}\MiscStatus]
@="0"

[HKEY_CLASSES_ROOT\CLSID\{3B7C8860-D78F-101B-B9B5-04021C009402}\MiscStatus\1]
@="131473"

[HKEY_CLASSES_ROOT\CLSID\{3B7C8860-D78F-101B-B9B5-04021C009402}\ProgID]
@="RICHTEXT.RichtextCtrl.1"

[HKEY_CLASSES_ROOT\CLSID\{3B7C8860-D78F-101B-B9B5-04021C009402}\Programmable]

[HKEY_CLASSES_ROOT\CLSID\{3B7C8860-D78F-101B-B9B5-04021C009402}\ToolboxBitmap32]
@="C:\\Windows\\system32\\RICHTX32.OCX, 1"

[HKEY_CLASSES_ROOT\CLSID\{3B7C8860-D78F-101B-B9B5-04021C009402}\TypeLib]
@="{3B7C8863-D78F-101B-B9B5-04021C009402}"

[HKEY_CLASSES_ROOT\CLSID\{3B7C8860-D78F-101B-B9B5-04021C009402}\Version]
@="1.2"

[HKEY_CLASSES_ROOT\CLSID\{3B7C8860-D78F-101B-B9B5-04021C009402}\VersionIndependentProgID]
@="RICHTEXT.RichtextCtrl" 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-18T09:11:53.330

system32 目录中的一个坏richtx32.oca 文件似乎是造成这种情况的原因。

[以下](http://support.microsoft.com/kb/149429)是 .oca 文件的作用：

> 控件的一些属性由框架提供，一些由控件本身提供。以编程方式，来自框架和控件的属性都显示为控件的属性。
> 
> 为了使这些属性出现，Visual Basic 在控件加载到工具箱时创建一个扩展类型库。因为读取控件的类型库和创建扩展类型库的过程非常耗时，Visual Basic 将扩展类型库信息缓存到 OCA 文件中。
> 
> 如果删除 Visual Basic 识别的控件的 OCA 文件，则在加载需要该控件的项目时，Visual Basic 将重新创建 .OCA 文件。这个娱乐过程伴随着时间惩罚。

So it seems that having a bad .oca file in existence can mean that the properties of the control both in the IDE and in the compiled .exe will be affected. The solution is to delete the .oca file in the system32 folder and then load the project again.

# iphone - 取消新的 CoreData 对象？

> ID：13344327
> 
> 赞同：2
> 
> 时间：2012-11-12T13:10:47.913
> 
> 标签：iphone, objective-c, core-data

在我的应用程序中，我有我的主视图控制器，它显示了我所有的 coredata 对象。

当用户添加一个对象时，它会运行并打开下一个详细视图以输入新对象的详细信息：

```
-(IBAction)addPerson:(id)sender
{
    Person *p = (Person *)[NSEntityDescription insertNewObjectForEntityForName:@"Person" inManagedObjectContext:managedObjectContext];
    PersonDetailViewController *vc = [self.storyboard instantiateViewControllerWithIdentifier:@"PersonDetail"];
    vc.managedObjectContext = fetchedResultsController.managedObjectContext;
    vc.person = p;
    vc.isNewPerson = YES;
    [self.navigationController pushViewController:vc animated:YES];
} 
```

现在我在详细视图中有一个删除按钮，它调用它：

```
[managedObjectContext deleteObject:person];
    NSError *err;
    if (![managedObjectContext save:&err])
    {
        // Update to handle the error appropriately.
        NSLog(@"Unresolved error %@, %@", err, [err userInfo]);
        exit(-1);  // Fail
    } 
```

这就是我目前取消新 coredata 对象的方式。但是我遇到了问题。

您如何建议我最好取消创建新对象？创建和删除，或者在确认之前永远不要创建它？我不确定。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-12T13:54:47.387

在确认之前，我实际上永远不会创建托管对象！

但首先，我将重写`PersonDetailViewController`为根本不依赖`Person`实体（松散耦合）。相反，我会为您想要设置/编辑`PersonDetailViewController`的对象的各种属性定义属性，然后在保存委托方法左右处理托管对象的创建。使用这种方法，您还可以取消创建用例一半，而无需创建新的托管对象等。`Person``Person`

为了更好地说明，委托方法看起来有点像这样：

```
- (void) personDidSave: (PersonDetailViewController*) controller {
        // Create a new Person object with the values from the controller
        // and add persist it to core data
        Person *p = (Person *)[NSEntityDescription insertNewObjectForEntityForName:@"Person" inManagedObjectContext:managedObjectContext];
        p.name = controller.name;
        p.surname= controller.surname; 
        // etc.

        // save to core data

        // Refresh the table or whatever view
    } 
```

# c# - LINQ to xml 查询访问未知的标题元素

> ID：13344332
> 
> 赞同：0
> 
> 时间：2012-11-12T13:10:59.890
> 
> 标签：c#, xml, linq, linq-to-xml

我有一个以下结构的 xml 文档，我正在尝试使用 LINQ to xml 在 C# 中查询

```
<recurrence>
    <rule>
        <firstDayOfWeek>mo</firstDayOfWeek>
        <repeat>
            <weekly mo="TRUE" fr="TRUE" weekFrequency="1" />
        </repeat>
    <repeatForever>FALSE</repeatForever>
    </rule>
</recurrence> 
```

我正在尝试查询它以确定有关 xml 中包含的内容的信息并基于此构建对象。

在“重复”元素中，元素的标题可以是每周（如示例中）每天、每月或每年。

我在选择每周元素时遇到问题。因为我不确定它会被每周调用一次，所以我试图在下面

```
XDocument info = XDocument.Parse(source.RecurrenceData);

var data = from d in info.Descendants("recurrence").Descendants("rule").Descendants("repeat") 
           select d;

var element = data.Elements().First(); 
```

这总是以空值出现。对我来说，选择这个元素最简单的方法是什么，无论是每日、每周、每月还是每年的元素，然后确定其中可能包含或不包含的各种属性？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-12T13:15:40.220

我已将以下代码放在控制台应用程序中，并且该元素不为空。你确定你`source.RecurrenceData`是对的吗？

```
string xml = @"<recurrence>
                <rule>
                    <firstDayOfWeek>mo</firstDayOfWeek>
                    <repeat>
                        <weekly mo=""TRUE"" fr=""TRUE"" weekFrequency=""1"" />
                    </repeat>
                <repeatForever>FALSE</repeatForever>
                </rule>
            </recurrence>";

XDocument info = XDocument.Parse(xml);

var data = from d in info.Descendants("recurrence").Descendants("rule").Descendants("repeat") select d;

var element = data.Elements().First(); 
```

# javascript - 渲染后应用 jQuery 插件的 Meteor 模板

> ID：13344333
> 
> 赞同：3
> 
> 时间：2012-11-12T13:11:05.350
> 
> 标签：javascript, meteor

我在 Meteor 应用程序中显示了一组“消息”。当我的模板“消息”被渲染时，我应用了这个名为“gridalicious”的 jQuery 插件，它基本上以类似 pinterest 的格式显示消息。

一切正常，但是当我插入新消息时，该新消息会显示两次。当我刷新浏览器时，副本消失了。

我正在应用插件如下

```
Template.messages.rendered = ->
  $("#message_box").gridalicious
    width:250
    animate:false
    selector:".message"
    gutter:0 
```

基本上，如果我摆脱这个插件，事情消息会正确显示，没有任何重复。

我不确定是什么导致了这个问题。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-12T14:00:43.273

是的，我有类似的概率。对于这个插件或相同的情况，为了避免它重复你的模板实例，你可以尝试创建一个全局变量来处理你的消息框状态，添加一些条件来确定这个新消息的 id 是否已经在你的全局状态处理程序中并且已经被渲染, 然后不要渲染它两次。

# 全局范围

```
isAlreadyBeenReneredId = null 
```

# 消息的模板实例

```
Template.messages.rendered = ->
    if isAlreadyBeenReneredId isnt @data._id
        isAlreadyBeenReneredId = @data._id
        options =
            width: 250
            gutter: 0
        $("#message_box").gridalicious options 
```

不是真正的代码，而是您可能想尝试的一些想法。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-13T13:21:40.707

据我所知，Meteor 不会一次又一次地渲染所有东西，而只会渲染差异。所以我认为问题在于，您在同一个元素上多次调用 jQuery 插件。

我不知道插件，但似乎有一种[`append`](http://suprb.com/apps/gridalicious/#example3)方法，也许这可能有用？

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-08T19:01:45.760

试试这个：

```
if (Meteor.isClient) {
  Meteor.startup(function () {
    $(document).ready(function (){
     $("#message_box").gridalicious({
        width:250,
        animate:false,
        selector:".message",
        gutter:0
     });
    });
  });
} 
```

抱歉，我不知道如何在 coffescript 中编写等效项。

# ios4 - NSIndexPath 没有行值。在 iOs 4.3 中完美运行，但在 6.0 中没有

> ID：13344335
> 
> 赞同：1
> 
> 时间：2012-11-12T13:11:10.487
> 
> 标签：ios4, ios6, nsindexpath

我和我`UITableViewController`一起工作时遇到了一个奇怪的问题`NSIndexPath`。在我的`UITableView`我已经实现了一个自定义 OptionCell 淡入点击的单元格下方，然后淡出。使用 iOs 4.3，它可以完美运行。

我最近更新到了新的 xCode 和 iOs 6。我更改了项目中的相关点并且一切正常，除了每当我尝试删除 customCell 时出现的崩溃。

它崩溃了：

> -[NSIndexPath 行] 中的断言失败
> 
> [...]
> 
> *** 由于未捕获的异常“NSInternalInconsistencyException”而终止应用程序，原因：“与 UITableView 一起使用的索引路径无效。传递给表视图的索引路径必须恰好包含两个指定节和行的索引。如果可能，请使用 UITableView.h 中 NSIndexPath 上的类别。

我已经对此错误进行了一些研究。我发现[了这个问题](https://stackoverflow.com/questions/9644359/assertion-failure-for-uitableview-selectrowatindexpath)，检查了上述步骤，但没有帮助。

在调试时，我发现每次检查`row`. `indexPathToDelete`它不是 NIL，应该有一个（适用于旧的 iOs 版本）。他们是否在版本之间更改了 NSIndexPath 的某些内容？我已经检查了所有我能想到的...

![崩溃前调试器最后一步的屏幕截图](../Images/eb2954118718767e13c60b5fd31b9977.png)

我在以下代码段中标记了错误：

```
- (void)tableView:(UITableView *)tableView didSelectRowAtIndexPath:(NSIndexPath *)indexPath
{
    if (indexPath.row == 0) {

        /* if user tapped the same row twice get rid of the OptionCell */
        if([indexPath isEqual:self.tappedIndexPath]){
            [tableView deselectRowAtIndexPath:indexPath animated:YES];
        }

        /* update the indexpath if needed...*/
        indexPath = [self modelIndexPathforIndexPath:indexPath];

        /* pointer to delete the control cell */
        NSIndexPath *indexPathToDelete = self.controlRowIndexPath;

        /* if same row is tapped twice => clear tapping trackers */
        if([indexPath isEqual:self.tappedIndexPath]){
            self.tappedIndexPath = nil;
            self.controlRowIndexPath = nil;
        }
        /* otherwise update them appropriately */
        else{
            self.tappedIndexPath = indexPath; /* the row the user just tapped. */
            /* Now set the location of where I need to add the option cell */
            self.controlRowIndexPath = [NSIndexPath indexPathForRow:indexPath.row + 1 inSection:indexPath.section];
        }

        /* all logic is done, lets start updating the table */
        [tableView beginUpdates];

        /* lets delete the control cell, either the user tapped the same row twice or tapped another row */

        if(indexPathToDelete){

/* CRASH APPEARS HERE!: */

            [self.tableView deleteRowsAtIndexPaths:[NSArray arrayWithObject:indexPathToDelete]
                                  withRowAnimation:UITableViewRowAnimationRight];
        }
        /* lets add the new control cell in the right place */
        if(self.controlRowIndexPath){
            [self.tableView insertRowsAtIndexPaths:[NSArray arrayWithObject:self.controlRowIndexPath]
                                  withRowAnimation:UITableViewRowAnimationLeft];
//          [self.tableView scrollToRowAtIndexPath:self.controlRowIndexPath atScrollPosition:UITableViewScrollPositionMiddle animated:YES];

        }

        /* and we are done... */
        [tableView endUpdates];
    } else {
        if (self.controlRowIndexPath) {

            indexPath = [self modelIndexPathforIndexPath:indexPath];
            NSIndexPath *indexPathToDelete = self.controlRowIndexPath;
            self.tappedIndexPath = nil;
            self.controlRowIndexPath = nil;
            if(indexPathToDelete){
                [self.tableView deleteRowsAtIndexPaths:[NSArray arrayWithObject:indexPathToDelete]
                                      withRowAnimation:UITableViewRowAnimationFade];
            }
        }

        VerwaltungViewController* verwaltungViewController;
        verwaltungViewController = [[VerwaltungViewController alloc] init];
        [self.navigationController pushViewController:verwaltungViewController animated:YES];
    }
} 
```

**编辑：** modelIndexPathforIndexPath：

```
- (NSIndexPath *)modelIndexPathforIndexPath:(NSIndexPath *)indexPath
{
    int whereIsTheControlRow = self.controlRowIndexPath.row;
    if(self.controlRowIndexPath != nil && indexPath.row > whereIsTheControlRow)
        return [NSIndexPath indexPathForRow:indexPath.row - 1 inSection:0];
    return indexPath;
} 
```

# google-maps - 如何使用路线服务中的绿色标记实时移动

> ID：13344336
> 
> 赞同：1
> 
> 时间：2012-11-12T13:11:09.927
> 
> 标签：google-maps, geolocation, google-maps-markers, directions

我正在使用 Google 的 Geolocation API 制作项目。当您选择布多瓦（英文建筑）然后选择布多瓦的数量时，您将获得通往这座建筑的路。我想进行实时导航并每 3000 毫秒更新一次绿色 A 点。有什么解决办法吗？这是我的网址：http: [//vyvoj.nwt.cz/navigace2_zaloha/](http://vyvoj.nwt.cz/navigace2_zaloha/)

# html - 固定大小的单元格被另外两个带边框的单元格包围

> ID：13344339
> 
> 赞同：1
> 
> 时间：2012-11-12T13:11:33.267
> 
> 标签：html, css, web

我需要创建一个具有以下特征的表：

****__ *_* __ *_* __** 100% 的窗口宽度***_* __ *_* __ *_* _****

 **| 自动宽度 | 860 像素宽度，边框 | 自动宽度，边框

* * *

换句话说：一个 860 像素的居中单元格，每侧被一个其他单元格包围。右侧单元格还必须设置边框。

我想不出对所有（甚至是旧的 IE6）浏览器都友好的东西。兼容性对我来说很重要。我真的不在乎它是桌子还是一堆div。你有什么想法？

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-12T14:06:03.773

很抱歉这个非常古怪的标记，但它看起来像你所描述的那样：

编辑：添加表格布局：为表格固定，为中央 td 添加宽度 =“860”：

```
<style type="text/css">
table{ table-layout: fixed; }
.w860{ width:858px; }
.brdr{ border-style:dashed; border-width:1px; }
.td860{ background-color:#eee; }
</style>

<table width="100%" cellspacing="0" cellpadding="0" border="0">
<tr>
    <td><div></div></td>
    <td width="860" class="td860">
        <div class="w860 brdr">
            content
        </div>
    </td>
    <td>
        <div class="brdr"> also some content</div>
    </td>
</tr>
</table> 
```

在 FF、IE6+（quirksmode 和标准）、Safari for windows 中测试。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-12T13:46:48.083

```
<style>
table{
width:100%;
}
 .auto{
width:auto;
}
.fixed{
width:860px;
}
.bordered{
border: 1px #ff0000 dashed;
}
</style>

<table>
<tr>
<td class="auto">11&nbsp;</td>
<td class="fixed">111&nbsp;</td>
<td class="auto bordered">111&nbsp;</td>
</tr>
</table> 
```**

# c# - 取消任务中的任务

> ID：13344340
> 
> 赞同：10
> 
> 时间：2012-11-12T13:11:33.873
> 
> 标签：c#, task-parallel-library, task

我试图通过在任务中调用 CancellationTokenSource.Cancel() 方法来取消 Task<>，但我无法让它工作。

这是我正在使用的代码：

```
TaskScheduler ts = TaskScheduler.Current;

CancellationTokenSource cts = new CancellationTokenSource();

Task t = new Task( () =>
{
    Console.WriteLine( "In Task" );
    cts.Cancel();
}, cts.Token );

Task c1 = t.ContinueWith( antecedent =>
{
    Console.WriteLine( "In ContinueWith 1" );
}, CancellationToken.None, TaskContinuationOptions.OnlyOnRanToCompletion, ts );

Task c2 = c1.ContinueWith( antecedent =>
{
    Console.WriteLine( "In ContinueWith 2" );
}, TaskContinuationOptions.NotOnCanceled );

t.Start();

Console.ReadKey();

Environment.Exit( 1 ); 
```

此打印输出：

```
In Task
In ContinueWith 1
In ContinueWith 2 
```

我的预期是这样的：

```
In Task 
```

我在这里错过了什么吗？只能在任务**之外**取消任务吗？

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-11-12T14:52:45.910

仅在以下情况下才将任务视为“已取消”

*   它的取消令牌在开始执行*之前被取消。*
*   它的取消令牌在执行时被取消，代码通过抛出 OperationCancelledException（通常通过代码调用`cts.Token.ThrowIfCancellationRequested()`）共同观察取消

如果您在 then`cts.Token.ThrowIfCancellationRequested()`之后添加一行，`cts.Cancel()`那么事情将按照您的预期进行。在您的示例中，取消发生在任务运行时，但任务没有观察到取消，并且任务的操作运行完成。因此，该任务被标记为“Ran to Completion”。

您可以通过检查延续 ( `cts.Token.IsCancellationRequested`) 中的取消标记来检查“运行到完成”但被取消（在任务完成期间或之后）的任务情况。有时会有所帮助的另一个选项是使用原始取消令牌作为延续的取消令牌（这样，如果先前的任务没有注意到取消，它至少会受到延续的尊重）——因为 TPL将在它有机会运行之前将延续标记为已取消。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-12T13:53:29.883

此代码段按您的预期工作。

```
var cts = new CancellationTokenSource();

            var t = new Task(() =>
            {
                Console.WriteLine("In Task");
                cts.Cancel();
            }, cts.Token);

            Task c1 = t.ContinueWith(antecedent =>
            {
                Console.WriteLine("In ContinueWith 1");
            }, CancellationToken.None, TaskContinuationOptions.OnlyOnCanceled/* by definition from MSDN here must be NotOnCanceled*/, TaskScheduler.Current);

            c1.ContinueWith(antecedent =>
            {
                Console.WriteLine("In ContinueWith 2");
            }, TaskContinuationOptions.NotOnCanceled);

            t.Start();
            Console.ReadKey();

            Environment.Exit(1); 
```

`TaskContinuationOptions`但似乎枚举中存在错误。

> NotOnCanceled 指定如果其前件被取消，则不应安排继续任务。此选项对多任务延续无效。
> 
> OnlyOnCanceled 指定仅当其前件被取消时才应安排继续任务。此选项对多任务延续无效。

# json - Node.js eval var json 解析

> ID：13344341
> 
> 赞同：0
> 
> 时间：2012-11-12T13:11:34.650
> 
> 标签：json, bash, node.js

我正在尝试制作一个小型解析器，它接收 json 字符串和获取路径：

```
var args = process.argv;
var jsonToBeParsed = args[2];
var path = args[3];

var result = JSON.parse(jsonToBeParsed);

console.log(result);
console.log(result.path); 
```

我打电话给这个

```
node parser.js '{"asd":"123", "qwe":"312"}' 'asd' 
```

它给了我`undefined`

我认为必须使用一些 eval 函数来完成，但我对 node/JS 没有太多经验。我该如何解决这个问题？，我需要从命令行获取结果。

编辑：我期待第二个日志中出现“123”。谢谢@Esailija，这个问题不太清楚......

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-11-12T13:22:01.010

我认为您正在尝试使用动态属性，您不能使用`.path`，因为这字面意思是`.path`属性。

尝试这个：

```
console.log(result);
console.log(result[path]); 
```

如果`path === "asd"`，那么它将起作用，这在静态上等效于`result["asd"]`or`result.asd`

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-12T13:25:21.197

To add to @Esailija's answer:

```
node parser.js '{"path": "123"}' 'asd' 
```

Would return `123`. The dot notation expects the property name. If you have a dynamic property name, you need to use the square brackets notation.

```
console.log(result['ads']);
// But what you want is:
console.log(result[path]); // 'path' is a variable with the correct string 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-02-12T22:54:51.120

我想将 json 解析器嵌入到 git 别名中，在 bash 中获取 json 节点（使用节点）

`node -e "console.log(JSON.parse(process.argv[1]).foo.bar)" '{"foo":{"bar":"Hello World"}}'`

# facebook - 如何使用 multifriendselector 在 facebook 上发送自定义网址

> ID：13344343
> 
> 赞同：0
> 
> 时间：2012-11-12T13:11:34.183
> 
> 标签：facebook, facebook-javascript-sdk, multi-friend-selector

我有这个代码

```
<script src="http://connect.facebook.net/en_US/all.js"></script>

<p>
<input type="button"
  onclick="sendRequestViaMultiFriendSelector(); return false;"
  value="Send Request to Many Users with MFS"
/>
</p>

<script>
  FB.init({
    appId  : '308928229202619',
    frictionlessRequests: true
  });

  function sendRequestViaMultiFriendSelector() {
    FB.ui({method: 'apprequests',
      message: 'Invite user to play and you will get a chance to win.'
    }, requestCallback);
  }

  function requestCallback(response) {
      alert("this is the response");
      alert(response);
    // Handle callback here
  }
</script> 
```

我希望在 facebook 上，当用户发送请求时，这个 url 将被发送出去，例如

```
 Send_url:
  http://www.abc.com/send_invite_by.php?code=abc OR
  http://www.abc.com/send_invite_by.php?code=zyx 
```

依赖于自动生成的 id

它会在这个 URL 上返回

```
 return_url http://www.abc.com/recieved_invite.php?code=zyx 
```

我想知道谁在这个行为上发送了邀请，我必须在接受的邀请上给用户积分。

请帮忙。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-12T14:09:27.227

> 我想要什么 我想知道谁发出了邀请

当您通过 API 查找 request_id（当用户接受请求时传递给您）时，您将获得该信息 - 它有一个`from`包含发件人姓名和 ID 的字段。

有关详细信息，请参阅[https://developers.facebook.com/docs/requests/#request_format](https://developers.facebook.com/docs/requests/#request_format)。

# android - 在 Android 中创建类似“Google 云端硬盘应用程序”的布局的最佳方法是什么？

> ID：13344348
> 
> 赞同：0
> 
> 时间：2012-11-12T13:11:43.093
> 
> 标签：android, android-layout, google-drive-api

我是 Android 应用程序的新手，现在我被困在试图获得类似这种布局的东西......

[http://cloud.addictivetips.com/wp-content/uploads/2012/04/Google-Drive-for-Android-Home.jpg](http://cloud.addictivetips.com/wp-content/uploads/2012/04/Google-Drive-for-Android-Home.jpg)

我已经开始使用RelativeLayout，但我不知道如何做这个可爱的按钮。我使用带有背景图像的按钮没有成功。我已经看到有另一种布局......你会用什么来实现这些？或者我在哪里可以按照一个很好的例子来讨论布局和按钮，因为我找不到任何有趣的东西:(

在此先感谢，对我的英语感到抱歉

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-12T15:24:57.940

听起来您基本上有两个问题：

1.  如何创建此布局？
2.  如何创建或从哪里获得这些按钮？

要尝试回答第一个问题，有多种方法可以创建布局，例如您提供的布局。既然您提到您是“新手”，我将向您介绍一种简单的方法，那就是使用线性布局。

```
> <?xml version="1.0" encoding="utf-8"?>
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:layout_width="match_parent"
    android:layout_height="match_parent"
    android:orientation="vertical" >

    <TextView
        android:id="@+id/TextView03"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:drawableLeft="@drawable/4_collections_collection"
        android:gravity="center"
        android:text="My Drive" />

    <View
        android:layout_width="fill_parent"
        android:layout_height="1dip"
        android:layout_above="@id/your_image_view_id"
        android:layout_centerVertical="true"
        android:background="#808080" />

    <TextView
        android:id="@+id/TextView01"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:drawableLeft="@drawable/6_social_group"
        android:gravity="center"
        android:text="Shared with me" />

    <View
        android:layout_width="fill_parent"
        android:layout_height="1dip"
        android:background="#808080" />

    <TextView
        android:id="@+id/TextView04"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:drawableLeft="@drawable/3_rating_important"
        android:gravity="center"
        android:text="Starred" />

    <View
        android:layout_width="fill_parent"
        android:layout_height="1dip"
        android:background="#808080" />

    <TextView
        android:id="@+id/TextView04"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:drawableLeft="@drawable/10_device_access_alarms"
        android:gravity="center"
        android:text="Recent" />

    <View
        android:layout_width="fill_parent"
        android:layout_height="1dip"
        android:background="#808080" />

    <TextView
        android:id="@+id/TextView04"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:drawableLeft="@drawable/9_av_make_available_offline"
        android:gravity="center"
        android:text="Offline" />

</LinearLayout> 
```

这里的关键部分是：

*   android:drawableLeft - textview 有一个名为 android:drawableLeft 的属性，它允许您分配一个图标并将其轻松放置在左侧。
*   视图 - 此处的视图用于绘制水平线。

该布局的另一个重要部分是操作栏。为此，您可以使用以下参考：[developer.android.com 上的操作栏参考](http://developer.android.com/guide/topics/ui/actionbar.html)

The regarding the second question, the icon/buttons can be attained in the [download section of developer.android.com](http://developer.android.com/design/downloads/index.html). Of course you in developing applications it will become necessary to use a graphics program to design your own icons and buttons.

Hope this helps you get going in the right direction.

# bash - 调整大小/裁剪和附加 4 个图像

> ID：13344351
> 
> 赞同：7
> 
> 时间：2012-11-12T13:11:53.190
> 
> 标签：bash, imagemagick

我目前正在使用此命令使用 imagemagick 调整图像大小：

```
 convert \( ${files[0]} ${files[1]} -append \) \( ${files[2]} ${files[3]} -append \) +append $dir.jpg 
```

![在此处输入图像描述](../Images/a4e4fabf1e9b694080e6a4c8fa71dc42.png)

处理第二张图片中尺寸不同的图像的最佳方法是什么？我可以指定特定的宽度或高度，并让图像调整大小并裁剪到该大小，如果它更小，如果它真的很高，则裁剪中心，所以我总是得到第一张图片中的结果？

谢谢！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-15T03:56:04.443

尝试将图像大小调整为相同大小。

```
for i in *.jpg; do convert $i -resize 80x80 -quality 90 $i.jpg; done 
```

现在您可以附加图像。

在调整大小之前附加图像

![在此处输入图像描述](../Images/9dbd1970d0542e871d8b53dcf3c26f5e.png)

调整大小后附加图像

![在此处输入图像描述](../Images/d8a8ce2c027ac85877357824a13d9a4a.png)

# java - 有没有办法在不创建 File 对象的情况下转换 DataHandler（带有压缩内容）来获取 InputStream？

> ID：13344352
> 
> 赞同：2
> 
> 时间：2012-11-12T13:11:57.023
> 
> 标签：java, stream, zip, java-io, zipfile

我想省略创建`File`。我的`DataHandler`对象包含一个 zip 文件，里面有一个条目。我需要正确`InputStream`读取压缩内容。

实际上，我的“流程”如下：DataHandler -> File -> ZipFile -> first ZipEntry.getInputStream()。

有没有办法不创建`File/ZipFile`对象？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-12T13:21:43.230

是的，您可以改用[ZipInputStream](http://docs.oracle.com/javase/7/docs/api/java/util/zip/ZipInputStream.html)。

编辑：这取决于您的压缩内容如何存储在`DataHandler`.

如果它存储在字节数组中......

```
byte[] zippedContent = dataHandler.getContent();
InputStream in = new ByteArrayInputStream(zippedContent);
ZipInputStream zipIn = new ZipInputStream(in)
ZipEntry zipEntry = zipIn.getNextEntry(); 
```

如果它提供访问`InputStream`...

```
ZipInputStream zipIn = new ZipInputStream(dataHandler.getInputStream());
ZipEntry zipEntry = zipIn.getNextEntry(); 
```

现在您可以像读取任何其他 InputStream 一样从 ZipInputStream 读取扩展内容。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-12T14:37:21.013

解决方案是：

```
DataHandler dh = ... 
ZipInputStream zis = new ZipInputStream(dh.getInputStream());
ZipEntry entry = zis.getNextEntry(); 
```

**...之后，`zis`当前设置在第一个 zip 条目的开头。**

感谢@aetheria 和@Janoz 的`ZipInputStream`提示。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-12T13:25:14.917

You are probably looking for [`ZipInputStream`](http://docs.oracle.com/javase/6/docs/api/java/util/zip/ZipInputStream.html)

# magento - Magento URL 索引和 core_url_rewrite 表

> ID：13344354
> 
> 赞同：6
> 
> 时间：2012-11-12T13:12:02.733
> 
> 标签：magento, indexing, magento-1.7

任何人都可以阐明 Magento 如何确定是否为产品创建新的 URL 重写？每次我运行 Catalog URL Rewrite reindex 过程时，core_url_rewrite 中的行数都会增加大约 10,000 行。由于同时没有修改产品数据，为什么会生成一个新的 URL？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2015-01-09T10:59:14.733

这个问题在 Magento 1.7 中仍然存在，但我不知道 1.8 或 1.9。Magento 似乎不会删除旧条目。这会严重降低您的数据库速度。解决这个问题的最简单方法是截断表并重新索引它。

*   登录到 mysql 并选择（使用）正确的数据库
*   执行以下查询：`truncate table core_url_rewrite;`
*   转到您的 magento 根目录（命令行）中的 shell 文件夹并执行以下命令：`php -f indexer.php -- -reindex catalog_url`
*   或者，您可以在管理员中执行此操作：系统 > 索引管理；重新索引目录 URL 重写

然后在 admin 中检查：Catalog > URL Rewrite Management，并查看是否已创建新条目。如果这显示没有项目，则 URL 重写将不起作用！

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-12T20:22:41.613

您可以运行以下 SQL 来找出哪些 URL 属于不存在的产品：

```
SELECT `cur`.`product_id`
FROM `core_url_rewrite` AS `cur`
LEFT OUTER JOIN `catalog_product_entity` AS `cpe`
ON `cur`.`product_id` = `cpe`.`entity_id`
WHERE `cpe`.`entity_id` IS NULL
AND `cur`.`product_id` IS NOT NULL 
```

...你应该看到一个不存在的 entity_ids 列表

```
`catalog_product_entity` 
```

EcomDev 有一个免费的 URL 重写模块 ( [http://shop.ecomdev.org/url-rewrite-indexer.html](http://shop.ecomdev.org/url-rewrite-indexer.html) )，我发现它很有用。

**编辑**

为了回答这个问题，会生成新的 URL，因为当 URL 重新索引被触发时：

```
Mage_Catalog_Model_Indexer_Url::reindexAll() 
```

...这是一个包装：

```
Mage_Catalog_Model_Url::refreshRewrites 
```

...如果数据已更改，则不进行检查。如果这是您需要的，您可以覆盖该类并重新编写功能以比较差异。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2015-03-11T15:14:11.807

我正在使用 Magento 1.8，我的 core_url_rewrite 表有大约 5 百万！！！！记录。最后，我覆盖了 Mage_Catalog_Model_Product_Attribute_Backend_Urlkey 中的 beforeSave 函数，并从产品名称的前五个单词中生成了我自己的 url 键。如果前 5 个单词不是唯一的，我会附加一些数字。如果有人对我的代码感兴趣，我可以发布一些片段。

在覆盖 Mage_Catalog_Model_Product_Attribute_Backend_Urlkey 后，我截断了 core_url_rewrite 并重建了索引。最后我得到了大约 60.000 个 URL...并且重新索引过程不会添加新的。

但是您必须记住，在截断和重建 core_url_rewrite 表时，自定义 url 重写会丢失。也许您的 seo 主管遇到了一些意想不到的问题。导致所有 302er 重定向都丢失了

干杯

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2017-02-05T00:07:29.983

此问题是由于 Magento 企业版和社区版的早期版本中产品和类别索引系统中的一个已知错误造成的。

可以在[Magento core_url_rewrite table too large 中找到对根本原因分析的完整解释以及为 Category 和 Product URLs 提供的研究和解决方案的额外确认](https://magento.stackexchange.com/questions/17553/magento-core-url-rewrite-table-excessively-large?rq=1)

# flash - 在线 Flash 创作者

> ID：13344357
> 
> 赞同：1
> 
> 时间：2012-11-12T13:12:26.823
> 
> 标签：flash, api

是否有用于在线创建 Flash 文件的 API 或插件？我的目标是创建一个在线编辑器，访问者可以在其中导入他们的图像、添加文本和动画属性并将其保存为 swf 文件。我怎样才能做到这一点？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-12T19:51:31.857

如果您使用的是 PHP，您可以尝试使用[SWF 函数。](http://www.php.net/manual/en/swf.examples-basic.php)还有[FreeMovie](http://freemovie.sourceforge.net/)和[Ming](http://www.libming.org/)。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-12T19:44:57.613

你见过[http://wonderfl.net](http://wonderfl.net)

它可能不是您正在寻找的东西，但它很接近。

# prism - 使用 Prism 和 Unity 在不同模块中的视图之间切换

> ID：13344358
> 
> 赞同：4
> 
> 时间：2012-11-12T13:12:26.543
> 
> 标签：prism, unity-container

我正在使用 Prism 4 和 Unity 制作概念验证 WPF 应用程序，但遇到了一些基本问题。

在我们的解决方案中，我们有以下项目：

```
-AppName.Desktop
-AppName.Modules.ModuleA
-AppName.Modules.ModuleB 
```

在学习了一些教程，探索了一些示例并搜索了互联网之后，我无法找到一个非常初级问题的合适答案；如何在**不同 DLL 中的**两个视图之间切换。

在 ModuleA 的 Initialize 方法中加载第一个视图（ModuleAView）：

```
public void Initialize()
{ 
    regionManager.RegisterViewWithRegion("MainRegion", typeof(Views.ModuleAView));
} 
```

当我单击 ModuleAView（或 ModuleAView 中的按钮）时，我想切换到 ModuleBView。

```
public bool SomeEventInModuleAView(SomeEventParams e)
{
    Uri viewNav = new Uri("ModuleBView", UriKind.Absolute);
    regionManager.RequestNavigate(RegionNames.MainRegion, viewNav);
} 
```

显然这是行不通的，因为 ModuleA 不知道在哪里可以找到 ModuleBView。我已阅读有关使用 pack/application/component 等更改 URI 的信息，但我似乎无法使其工作。

我在想这样的事情：

```
Uri("pack://application:,,,/AppName.Modules.ModuleB;component/Views/ModuleBView.xaml",   UriKind.Absolute); 
```

由于从不同的程序集加载模块是 Prism 的目的之一，我认为奇怪的是，在 Prism 下载中没有任何示例来说明它是如何工作的。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-13T07:16:18.570

我找到了答案。我完全忘了注册第二个视图。

在此处查看解决方案：http: [//compositewpf.codeplex.com/discussions/402860#post940396](http://compositewpf.codeplex.com/discussions/402860#post940396)

# javascript - IE 中 Facebook Canvas 应用程序中的 Javascript 到 Flash 通信

> ID：13344363
> 
> 赞同：2
> 
> 时间：2012-11-12T13:12:43.293
> 
> 标签：javascript, facebook, flash, facebook-canvas

我正在开发一个具有 2 路 Javascript 到 Flash 通信的应用程序。这在一定程度上可以正常工作。

闪存是使用带有 wmode = window 的 swfObject 嵌入的，它必须用于性能目的。然而，这意味着我必须在 FB.init 中使用 hideFlashCallback。这是为了在 Facebook 对话框或聊天窗口打开时处理应用程序的暂停。

问题是，（仅在 Internet Explorer 中），在关闭对话框窗口等并使用 hideFlashCallback 再次显示 Flash 后，我无法再从 Javascript 与 Flash 进行通信。

我用于通信的代码是：

```
function getFlashMovie(movieName) {
var isIE = navigator.appName.indexOf("Microsoft") != -1;
return (isIE) ? window[movieName] : document[movieName];
}
getFlashMovie("swfContainer2").sendToActionscript(value); 
```

我已经研究了几个小时，看不出有什么原因会发生这种情况。我知道在 IE9 中你应该使用 document[movieName] 而不是 window[movieName]，但这仍然不能解决问题。正如我所说，在 hideFlashCallback 之前一切正常。

似乎由于某种原因，document[movieName] 找不到 Flash 对象，即使它显然在页面上。

任何关于为什么这可能不起作用以及如何解决它的想法将不胜感激！

# input - 按钮用作链接

> ID：13344365
> 
> 赞同：0
> 
> 时间：2012-11-12T13:12:54.853
> 
> 标签：input, semantic-markup

我维护一个我没有为汽车保险建立的网站。每个页面的横幅中都有一个输入，可将您带到带有要填写表格的页面。我不明白为什么使用输入而不是链接，是否有这样做的有效和语义原因？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-12T13:32:15.813

有时，人们这样做是因为他们想要一个“看起来像按钮”的链接。然而，这是一个糟糕的设计。

这从来都不是一个好主意，但在过去至少有一些理由：它为链接提供了按钮感觉和功能。但是，对于现代网页设计，无需这样做：只需适当地设置普通链接的样式即可创建相同的功能。

另一方面，这可能更多的是风格问题而不是真正的问题。如果您正在维护现有站点，则可能不值得更改它。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-20T18:51:55.900

使用`button`or`input type="button"`是设置 Ajax 请求的原始方式。也就是说，由于它将用户带到另一个页面，听起来他们不知道自己在做什么和/或想要@dan1111 提到的样式

# asp.net-mvc - EntityFramework 和 ont-to-many CRUD 操作

> ID：13344371
> 
> 赞同：0
> 
> 时间：2012-11-12T13:13:35.473
> 
> 标签：asp.net-mvc, entity-framework, one-to-many, objectcontext

我真的很努力将我的项目中的所有内容都与 EF 一起使用，但这确实变得越来越困难，有时它让我怀疑这是否真的是明智之举（依靠 EF 来编写数据库的所有进出）。好吧，我的问题仍然与 1-N 创建/编辑/删除功能有关（应该很简单，对吧？）。

好的，我在这里粘贴一些与我的代码等价的简单代码。

对于实体，我的主要课程为：

```
[Table("OLIM_LOTE")]
public class Lote
{
    [Key]
    [Column("LOTE_ID_LOTE")]
    public int? IDLote { get; set; }

    [Column("LOTE_TX_OBS")]
    public string Obs {get;set;}

    [Column("LOTE_TX_DOCUMENTO_EXTRA")]
    public string DocumentoExtra { get; set; }

    [NotMapped]
    public List<DocumentoLote> Documentos { get; set; }

    public void LoadLists()
    {
        OlimpiqueDBContext myDbContext = new OlimpiqueDBContext();
        var docs = (from doc in myDbContext.DocumentosLote
                     where doc.IDLote == this.IDLote
                     select doc);
        this.Documentos = docs.ToList<DocumentoLote>();
    }

} 
```

[注意我使用了可为空的 int？for Key - 否则它会抛出我验证异常，要求创建值]

对于儿童班，我得到了这个：

```
[Table("OLIM_DOCUMENTO_LOTE")]
public class DocumentoLote
{
    [Key]
    [Column("DOLO_ID_DOCUMENTO_LOTE")]
    public int? IDDocumentoLote { get; set; }

    [Column("DOCU_ID_DOCUMENTO")]
    [ForeignKey("Documento")]
    public int IDDocumento { get; set; }

    public virtual Documento Documento { get; set; }

    [Column("LOTE_ID_LOTE")]
    [ForeignKey("Lote")]
    public int IDLote { get; set; }

    public virtual Lote Lote { get; set; }
} 
```

[请注意，子类具有对所有者类的引用，它们是“IDLote”和“Lote”属性，并且所有者类具有子类实例的列表-所以我得到了双向引用-我假设这在某种程度上与问题有关]

我得到了一个由 VS2012 自动生成的控制器和视图，具有与 Lote 类相关的读/写功能。我在 View 中所做的可以描述为：我使用了一个 Jquery DataTable 来管理子类数据（用户可以在 DataTable 上添加“N”个实例）。我将 Post Button 替换为调用 JS 方法，该方法只是从 Form 和 DataTable 中获取所有数据，并将其包装在 JSon 对象中，然后通过 Ajax 将其发送到控制器。

接收它的控制器方法可以简化如下：

```
 [HttpPost]
    public JsonResult Edit(Lote lote)
    {
        try
        {
            if (ModelState.IsValid) //<< HAVING PROBLEMS HERE... DETAILS BELOW
            {
                if (lote.IDLote.HasValue)
                {
                    //Separete updates/inserts from deletes
                    List<int?> dbDocs = db.DocumentosLote
                                    .Where(dt => dt.IDLote == lote.IDLote)
                                    .Select(dt => dt.IDDocumentoLote)
                                    .ToList();

                    List<int?> postedDocs = lote.Documentos
                        .Select(pt => pt.IDDocumentoLote)
                        .ToList();

                    List<int?> deletedDocs = dbDocs
                        .Except(postedDocs).ToList();

                    //Perform deletes
                    foreach (var delDocId in deletedDocs)
                    {
                        if (delDocId.HasValue)
                        {
                            DocumentoLote delDoc = db.DocumentosLote
                                .Where(dt => dt.IDLote == lote.IDLote && dt.IDDocumentoLote == delDocId)
                                .Single();

                            db.Entry(delDoc).State = EntityState.Deleted;
                        }
                    }

                    //Perform insert and updates
                    foreach (var doc in lote.Documentos)
                    {
                        if (doc.IDDocumentoLote.HasValue)
                        {
                            db.Entry(doc).State = EntityState.Modified;
                        }
                        else
                        {
                            db.Entry(doc).State = EntityState.Added;
                            doc.IDLote = (int)lote.IDLote;
                        }
                    }
                }
                else
                {
                    db.Lotes.Add(lote);
                }
                db.SaveChanges();

                // If Sucess== 1 then Save/Update Successfull else there it has Exception
                return Json(new { Success = 1, ex = "" });
            }
            else
            {
                return Json(new { Success = 0, ex = "Falha ao tentar salvar os dados" });
            }
        }
        catch (Exception ex)
        {
            // If Sucess== 0 then Unable to perform Save/Update Operation and send Exception to View as JSON
            return Json(new { Success = 0, ex = ex.Message.ToString() });
        }
    } 
```

问题：嗯，我真的经历了很多，现在，我只遇到了两个问题。首先是创建抛出了一个验证异常，说它需要一个 IDLote（对于子类 - 但无论如何，如果所有者类本身在创建时仍然没有 Id，我将如何拥有它？）第二个问题：删除根本不起作用！不管我如何编码，它都会引发异常“无法定义对象，因为它们附加到不同的 ObjectContext 对象”。我真的觉得这与所有者子类之间的双向引用有关，但是仍然不知道到底发生了什么以及如何解决它

我开始觉得这里真的很失落。对此的任何想法将不胜感激。谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-10-29T00:50:21.587

由于对这个老问题有很多看法，现在我确实有一些答案，所以我将它们发布以供参考：

Q - 关于`int?`关键属性的类型： A - 它根本不必是可为空的 int。实体可以用一个简单的 int 属性声明为键，当从 View 发布 JSon 对象时，返回到某个控制器方法，该属性（键）可以用值“0”填充。EF 将在持久化对象后立即生成正确的值。

Q - 关于导航属性以及当两个类都没有在 this 键上获得值（非零）时如何实现它们之间的关系： A - 要返回的 JSon 对象可以实现精确的导航关系他们。Wehn 控制器将发布的数据绑定到它应该接收的模型，它将“理解”它们的关系，并且一旦生成键的值，它们就会正确地相互引用。

Q - 关于 delete 方法尝试中描述的错误： A - 当对象应该与其他对象交互，并且这些交互应该由 EF 以任何方式持久化或“理解”时，它们必须已经获得、生成或附加到相同的数据库上下文。EF 依赖 DB 上下文来创建此交互的树，因此，当对象不存在于同一 DB 上下文中时，无法构建此树。

# php - 使用 php 在框中下载文件

> ID：13344376
> 
> 赞同：1
> 
> 时间：2012-11-12T13:13:57.767
> 
> 标签：php, api, curl, box-api

我正在尝试使用 API 从 Box 下载文件，但没有得到任何响应。

这是我的代码：

```
$ch = curl_init();
curl_setopt($ch, CURLOPT_URL, "https://api.box.com/2.0/files/3934151224/content");
curl_setopt($ch, CURLOPT_HEADER, false); 
curl_setopt($ch, CURLOPT_HTTPGET,true);
curl_setopt($ch, CURLOPT_SSL_VERIFYPEER, false);
curl_setopt($ch, CURLOPT_RETURNTRANSFER,true);
curl_setopt($ch, CURLOPT_HTTPHEADER, array("Authorization: BoxAuth api_key={myAPIkey}&auth_token={myToken}"));
$result = curl_exec($ch);
curl_close($ch);
print_r ($result); 
```

当我尝试运行它时，我得到一个空白页，没有任何响应，也没有“另存为”窗口。

我错过了什么。请帮忙。提前致谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-12T13:35:36.373

How big is the file? You're probably running out of memory, for one of two reasons (or both):

1.  You are storing the entire response in memory by assigning it to a variable. Consider writing the cURL output to a file, using the CURLOPT_FILE option, and a valid file resource.
2.  You *may* have output buffering enabled, which would also hold all of the output in memory AGAIN, when you print_r the result. You can easily check this by doing a print ob_get_level(); right before your cURL call.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-29T03:48:15.210

我来到了这个解决方案：

```
//set the headers
$headers = array('Authorization: BoxAuth api_key=API_KEY&auth_token=AUTH_TOKEN');

//set the options
curl_setopt($curl, CURLOPT_URL, "https://api.box.com/2.0/files/".$fileid."/content");
curl_setopt($curl, CURLOPT_HTTPHEADER, $headers);
curl_setopt($curl, CURLOPT_RETURNTRANSFER, true); //returns to a variable instead of straight to page
curl_setopt($curl, CURLOPT_HEADER, true); //returns headers as part of output
curl_setopt($curl, CURLOPT_SSL_VERIFYPEER, FALSE); //I needed this for it to work
curl_setopt($curl, CURLOPT_SSL_VERIFYHOST, 2); //I needed this for it to work

$headers = curl_exec($curl); //because the returned page is blank, this will include headers only

//parses the headers string into an array
$items = array();
$item = strtok($headers, " ");

while ($item !== false) {
  $items[] = $item;
  $item = strtok(" ");
}

//redirects to the 14th item in the array (link value) - 17 characters because of
//dodgy header parsing above.
header('Location: '.substr($items[14], 0, -17));

echo curl_error($curl);

curl_close($curl); 
```

这是因为 Box API 实际上返回了一个带有 302 重定向标头的空白页面，而不是文件内容。通过这种方式，您可以获取标题并对其进行修改，而不必在发送到客户端之前将文件下载到服务器上。

我知道我处理标题字符串的方式有点hacky，但这不是重要的一点，我稍后会清理它。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2015-05-14T19:15:11.933

我正在使用以下代码下载框文件

```
 $url = "https://api.box.com/2.0/files/$fileId/content?access_token=$accessToken"

    $ch = curl_init();
    curl_setopt($ch, CURLOPT_URL, $url);
    curl_setopt($ch, CURLOPT_FOLLOWLOCATION, true);
    curl_setopt($ch, CURLOPT_RETURNTRANSFER, true);
    curl_setopt($ch, CURLOPT_SSL_VERIFYPEER, false);
    $contents = curl_exec($ch);

    set_time_limit(0);
    header('Content-Description: File Transfer');
    header('Content-Type: application/octet-stream');
    header('Content-disposition: attachment; filename='.$filename);
    header('Cache-Control: must-revalidate, post-check=0, pre-check=0');
    header('Expires: 0');
    header('Pragma: public');
    header('Content-Length: '.$filesize);

    print $contents; 
```

# java - Java 域类填充数据

> ID：13344378
> 
> 赞同：2
> 
> 时间：2012-11-12T13:14:02.150
> 
> 标签：java, mocking

我有一些域类，我想用示例**硬编码**数据初始化并填充这些类，有什么方法可以用任何框架填充数据吗？

例如： `List<Customer>`应该填充一些模拟数据

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-12T13:20:15.137

考虑以 JSON 结构维护您的测试数据，并使用框架（例如[google-gson](http://code.google.com/p/google-gson/)）将数据反序列化为值对象。

如果您希望自动生成随机数据，您可能需要查看[Quickcheck](http://java.net/projects/quickcheck/pages/Home)之类的东西，它似乎是 Java 的 .NET 框架[Autofixture](http://autofixture.codeplex.com/)等价物。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-12T13:15:50.720

您可以将硬编码数据放入构造函数中。

如果它是您所追求的模拟框架（正如您在评论中指出的那样），那么看看例如[Mockito](http://code.google.com/p/mockito/)。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-12T13:18:34.903

1.  正如@ipavlic 所写，您可以让构造函数在创建对象时生成一些随机数据。
2.  您可以将数据存储在数据库或简单的文本文件中，并在填写列表时从那里读取。
3.  您可以结合方法 1 和 2 并将可能的字段值存储在文件或其他地方，并用这些随机选择的预定义值填充对象字段。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-11-12T13:19:44.977

如果你想填写客户列表，有这个方法[Collections.fill(java.util.List, T)](http://docs.oracle.com/javase/6/docs/api/java/util/Collections.html#fill%28java.util.List,%20T%29)来填写列表。此方法替换列表中的当前对象。如果列表为空，则不会填充。

# c# - 另一个视图状态下拉列表问题

> ID：13344379
> 
> 赞同：0
> 
> 时间：2012-11-12T13:14:03.380
> 
> 标签：c#, asp.net, webforms, viewstate

`Page_Load`我在Web 表单的方法中有以下代码：

```
protected void Page_Load(object sender, EventArgs e)
{
    CountrySelectButton.Click += new EventHandler(CountrySelectButton_Click);

    if (HomePage.EnableCountrySelector) //always true in in this case
    {
        if(!IsPostBack)
            BindCountrySelectorList();
    }
} 
```

该`BindCountrySelectorList`方法如下所示：

```
private void BindCountrySelectorList()
{
    NameValueCollection nvc = HttpUtility.ParseQueryString(HomePage.CountryList);

    var ds = nvc.AllKeys.Select(k => new { Text = k, Value = nvc[k] });

    CountrySelector.DataSource = ds;
    CountrySelector.DataTextField = "Text";
    CountrySelector.DataValueField = "Value";
    CountrySelector.DataBind();
} 
```

我有一个`LinkButton`点击事件处理程序，它`SelectedValue`从以下获取`SelectList`：

```
void CountrySelectButton_Click(object sender, EventArgs e)
{
    //get selected
    string selectedMarket = CountrySelector.SelectedValue; //this is always the first item...

    //set cookie
    if (RememberSelection.Checked)
        Response.Cookies.Add(new HttpCookie("blah_cookie", selectedMarket) { Expires = DateTime.MaxValue });

    //redirect
    Response.Redirect(selectedMarket, false);
} 
```

**编辑：**

这是 DDL 和 LinkBut​​ton 定义：

```
<asp:DropDownList runat="server" ID="CountrySelector" />
<asp:LinkButton runat="server" ID="CountrySelectButton" Text="Go" /> 
```

结果标记：

```
<select name="CountrySelector" id="CountrySelector">
    <option value="http://google.com">UK</option>
    <option value="http://microsoft.com">US</option>
    <option value="http://apple.com">FR</option>
</select>
<a id="CountrySelectButton" href="javascript:__doPostBack('CountrySelectButton','')">Go</a> 
```

**结束编辑**

ViewState 已启用，但该`SelectedValue`属性只返回列表中的第一个项目，而不管实际选择了哪个项目。我确定我遗漏了一些明显的东西，但我找不到问题；任何帮助深表感谢。

提前致谢。

戴夫

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-12T16:55:08.370

您是正确的，您的问题源于 jquery ui 对话框...您可以通过使用隐藏字段记录下拉列表的值来解决此问题。然后在您的代码中，引用隐藏字段。

前端可能如下所示：

```
<div id="myModal" style="display: none;">
        <asp:DropDownList runat="server" ID="SelectList" />
        <asp:LinkButton runat="server" ID="MyButton" Text="Go" />
    </div>
    <input type="hidden" id="countryVal" runat="server" />
    <a id="choose" href="#">Choose</a>
    <script type="text/javascript">
        $(document).ready(function () {

            $('#choose').click(function () {
                $('#myModal').dialog({
                });
                return false;
            });

            $('#<%= SelectList.ClientID %>').change(function () {
               var country = $(this).val();
               $('#<%= countryVal.ClientID %>').val(country);
            });
        }); 
    </script> 
```

然后你的代码在后面：

```
var selected = countryVal.Value; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-12T14:40:37.590

将 MyButton.Click+=... 语句包装在 (!IsPostBack) 中，如

```
if(!IsPostBack)
{
   MyButton.Click += new EventHandler(MyButton_Click);
   BindSelectList();
} 
```

# python - 在一系列 Python 版本中支持 unittest2 功能的最 Pythonic 方式是什么？

> ID：13344380
> 
> 赞同：2
> 
> 时间：2012-11-12T13:14:03.910
> 
> 标签：python, unittest2

我可以想到两种方法来确保我可以在各种 Python 版本中使用 unittest 库中的现代特性：

```
try:
    from unittest2 import TestCase
except ImportError:
    from unittest import TestCase 
```

或者

```
import sys
if sys.verson_info.major>=2 and sys.version_info.minor>=7:
    from unittest import TestCase
else:
    from unittest2 import TestCase 
```

其中哪一个更 Pythonic？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-12T13:50:17.573

我会使用该`try`声明。这是一个经常使用的成语。你的`sys`版本对于 python3.3 也是错误的：

```
>>> if sys.version_info.major>=2 and sys.version_info.minor>=7:
...     from unittest import TestCase
... else:
...     from unittest2 import TestCase
... 
Traceback (most recent call last):
  File "<stdin>", line 4, in <module>
ImportError: No module named 'unittest2' 
```

虽然它应该是：

```
>>> import sys
>>> major, minor = sys.version_info.major, sys.version_info.minor
>>> if (major >= 2 and minor >= 7) or (major >= 3 and minor >= 2):
...     from unittest import TestCase
... else:
...     from unittest2 import TestCase
... 
>>> 
```

这也表明该`try`版本在 python 的版本中更加健壮。

当我有一个用 C 编写的模块的“加速”版本时，我经常使用该`try`变体，在文件末尾我放了一个：

```
try:
    from _accelerated import *
except ImportError:
    pass 
```

用加速的覆盖python实现。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-12T13:14:03.910

我不喜欢在第二个版本中我们必须导入另一个模块（`sys`），所以我更喜欢第一个版本：

```
try:
    from unittest2 import TestCase
except ImportError:
    from unittest import TestCase 
```

编辑：

事实证明，`pyflakes`并且`flake8`对上面的版本不满意，并且会报告“重新定义未使用的'import' from line ...”错误或“W402 'TestCase'导入但未使用”错误。他们似乎更喜欢这样写：

```
try:
    import unittest2
    TestCase = unittest2.TestCase
except ImportError:
    import unittest
    TestCase = unittest.TestCase 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2015-04-20T17:10:53.827

对于我们这些避免使用`from ... import ...`成语的人来说，这会以对其余代码透明的方式导入正确的单元测试：

```
import sys
if sys.version_info < (2, 7):
    import unittest2 as unittest
else:
    import unittest 
```

# r - 如何使用 RInside 创建 TCP 服务器？

> ID：13344382
> 
> 赞同：1
> 
> 时间：2012-11-12T13:14:08.233
> 
> 标签：r, tcp, rinside

有没有人有在 C++ 中创建 TCP 服务器以调用 R 函数并将结果提供给客户端的经验？

我使用 POCO C++ 库实现了我自己的，但收到一条错误消息，让我看到 RInside 不能在多线程应用程序中使用。

我认为这是无稽之谈。好的，R 本身是单线程的，但应该有一种在 C++ 和 RInside 中创建服务器的方法。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-12T13:23:41.317

You probably want [Rserve](http://rforge.net/Rserve) which has been doing this for a decade, rather than starting something new with our [RInside](http://dirk.eddelbuettel.com/code/rinside.html) -- though you could look at my RInside/Wt example for a webapp...

# wordpress - 内容功能忽略更多标签

> ID：13344383
> 
> 赞同：0
> 
> 时间：2012-11-12T13:14:11.447
> 
> 标签：wordpress, wordpress-theming

我正在做二十一个主题的“帖子页面”。问题是 the_content 函数会忽略更多标签并显示整个帖子。它在索引页面中工作得很好。我的代码：

```
 /*
    Template Name: Page Of Posts
    */
    ?>
     <?php get_header(); ?>
     <div id="primary">
     <div id="content" role="main">
     <?php
      $args= array(
  'category_name' => '');
      query_posts($args);
        if ( have_posts() ) : ?>

            <?php twentyeleven_content_nav( 'nav-above' ); ?>

            <?php /* Start the Loop */ ?>
            <?php while ( have_posts() ) : the_post(); ?>               
                <?php get_template_part( 'content', get_post_format() ); ?>

            <?php endwhile; ?>

            <?php twentyeleven_content_nav( 'nav-below' ); ?>

        <?php else : ?>

            <article id="post-0" class="post no-results not-found">
                <header class="entry-header">
                    <h1 class="entry-title"><?php _e( 'Nothing Found', 'twentyeleven' ); ?></h1>
                </header><!-- .entry-header -->

                <div class="entry-content">
                    <p><?php _e( 'Apologies, but no results were found for the requested archive. Perhaps searching will help find a related post.', 'twentyeleven' ); ?></p>
                    <?php get_search_form(); ?>
                </div><!-- .entry-content -->
            </article><!-- #post-0 -->

        <?php endif; ?>

        </div><!-- #content -->
    </div><!-- #primary --> 
```

请帮忙！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-12T13:38:33.090

您能否列出您请求的文件`get_template_part('content', get_post_format() )`应该位于名为 content-gallery.php（或任何其他 post_format）的主题文件夹中。

无论如何，您可以尝试旧的：

```
<?php global $more; $more = 0; ?> 
```

将其放在内容调用之前。

# json - 使用backbone.js 从视图访问模型数据

> ID：13344385
> 
> 赞同：1
> 
> 时间：2012-11-12T13:14:19.077
> 
> 标签：json, backbone.js, views, models

我有以下代码，但我很难让我的视图呈现模板而不是我的模型。如果我通过我的模型渲染车把模板但想将我的代码分离到视图中，这一切都很好。

```
var DataModel = Backbone.Model.extend({
    initialize: function () {
        $.getJSON('js/data.json',function(data){
            $('.one-wrapper').append(Handlebars.compile($('#one-template').html())(data));
            $('.one-asset-loader').fadeOut('slow');
        });
    },

    defaults : function () {

    },

});

var StructureView = Backbone.View.extend ({
    initialize: function () {
    }
});

var structureView = new StructureView({model: new DataModel()}); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-12T14:53:46.320

您可以使用 访问视图内的模型`this.model`。

您的代码应类似于：

```
var StructureView = Backbone.View.extend ({
    initialize: function () {
        _.bindAll(this);
        this.render();
        this.model.on('change',this.render);
    },
    render: function() {
        $('.one-wrapper').empty().append(Handlebars.compile($('#one-template').html())( this.model.toJSON() ));
    }
}); 
```

假设您的模型实际上包含数据，这将起作用。为此，您需要使用`model.url`and `model.fetch()`(not `$.getJSON`)

# c# - 在 C# winform 中将所选项目从一个列表框移动到另一个列表框

> ID：13344387
> 
> 赞同：12
> 
> 时间：2012-11-12T13:14:38.390
> 
> 标签：c#, winforms, listbox

我正在尝试将列表框 1 中的选定项目移动到列表框 2，反之亦然。我有两个按钮，`>>`和`<<`。当我在 listbox1 中选择项目然后单击`>>`项目时，应从 listbox1 移动到 listbox2。

```
private void MoveListBoxItems(ListBox source, ListBox destination)
{
    ListBox.SelectedObjectCollection sourceItems = source.SelectedItems;
    foreach (var item in sourceItems)
    {
        destination.Items.Add(item);
    }
    while (source.SelectedItems.Count > 0)
    {
        source.Items.Remove(source.SelectedItems[0]);
    }
}

private void button2_Click_1(object sender, EventArgs e)
{
    MoveListBoxItems(listbox , lstActivity);
} 
```

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2012-11-12T13:38:16.850

你的代码工作正常。我测试了它。您的问题是“我尝试将列表框 1 中的**选定**项目移动到列表框 2。”

我认为你的 button2 有问题。删除 button2 和下面的代码

```
private void button2_Click_1(object sender, EventArgs e)
{
    MoveListBoxItems(listbox , lstActivity);
} 
```

然后创建其他按钮并创建点击事件。

完整来源：

```
private void MoveListBoxItems(ListBox source, ListBox destination)
{
    ListBox.SelectedObjectCollection sourceItems = source.SelectedItems;
    foreach (var item in sourceItems)
    {
        destination.Items.Add(item);
    }
    while (source.SelectedItems.Count > 0)
    {
        source.Items.Remove(source.SelectedItems[0]);
    }
}

private void first2second_Click(object sender, EventArgs e)
{
    MoveListBoxItems(FirstListbox, LastListbox);
}

private void second2first_Click(object sender, EventArgs e)
{
    MoveListBoxItems(LastListbox, FirstListbox);
} 
```

这段代码是有效的。如果要选择多个项目更改属性 SelectionMode = MultiSimple;

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-12T13:19:36.230

```
private void buttonMoveToListBox1_Click(object sender, EventArgs e)
{
    if(listBox1.SelectedIndex != -1)
    {
        listBox2.Items.Add(listBox1.SelectedValue);
        listBox1.Items.Remove(listBox1.SelectedValue);
    }
}

private void buttonMoveToListBox2_Click(object sender, EventArgs e)
{
    if(listBox2.SelectedIndex != -1)
    {
        listBox1.Items.Add(listBox2.SelectedValue);
        listBox2.Items.Remove(listBox2.SelectedValue);
    }
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-12T13:21:56.203

每个删除的行都会有冲突，因此请使用以下代码：

**>>**

```
 for (int intCount = ListBox1.SelectedItems.Count - 1; intCount >= 0; intCount--) 
     {
        ListBox2.Items.Add(ListBox1.SelectedItems[intCount]);
        ListBox1.Items.Remove(ListBox1.SelectedItems[intCount]);
     } 
```

**<<**

```
 for (int intCount = ListBox2.SelectedItems.Count - 1; intCount >= 0; intCount--)
     {
        ListBox1.Items.Add(ListBox2.SelectedItems[intCount]);
        ListBox2.Items.Remove(ListBox2.SelectedItems[intCount]);
     } 
```

如果上述方法不起作用，请尝试以下操作：

```
while (ListBox1.SelectedItems.Count > 0) 
{ 
    ListBox2.Items.Add(ListBox1.SelectedItems[0].Text);  
    ListBox1.SelectedItems[0].Remove(); 
} 
```

有关更多类型的答案，您可以使用此[**链接**](https://stackoverflow.com/q/13067331/1577396)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2017-05-18T11:22:08.143

[这里有两个列表框。当我从左侧列表框中选择名称并单击“>>”按钮时，数据将移动到右侧列表框](https://i.stack.imgur.com/VnNRl.png)

代码.. currentItemText = LeftListBox.SelectedValue.ToString(); currentItemIndex = LeftListBox.SelectedIndex;

```
 RightListBox.Items.Add(currentItemText);
        if (myDataList != null)
        {
            myDataList.RemoveAt(currentItemIndex);
        }
        ApplyDataBinding(); 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2018-06-28T14:57:22.473

我用这段代码解决了：

```
private void MoveListBoxItems(ListBox poSource, ListBox poDestination)
{
    while (poSource.SelectedItems.Count > 0)
    {
        poDestination.Items.Add(poSource.SelectedItems[0]);
        poSource.Items.Remove(poSource.SelectedItems[0]);
    }
} 
```

* * *

## 回答 #6

> 赞同：-2
> 
> 时间：2013-02-23T10:21:17.980

```
<script type="text/javascript">
        $(document).ready(function() {
            // > arrow
            $('#SingleRightMove').click(function() {                    
                    $('#fromBox option:selected').remove().appendTo('#toBox');  
                    //$("#tobox option").attr("selected", false);        
                    $('#toBox').find("option").attr("selected", false); 

            });
            // < arrow
            $('#SingleLeftMove').click(function() {
                 $('#toBox option:selected').remove().appendTo('#fromBox');
                 $("#fromBox option").attr("selected", false);
            });
            // >> arrow
            $('#AllRightMove').click(function() {            
                 $('#fromBox option').remove().appendTo('#toBox');
                 $("#toBox option").attr("selected", false);
            });
            // << arrow
            $('#AllLeftMove').click(function() {           
                 $('#toBox option').remove().appendTo('#fromBox');
                 $("#fromBox option").attr("selected", false);
            });

        });

    </script> 
```

* * *

## 回答 #7

> 赞同：-2
> 
> 时间：2014-03-05T20:16:35.437

获取使用下面的 listbox2 和 3 等 2 个列表框创建的 >> 和 << 按钮...首先通过 get-content 或 get-adcomputer 等获取列表框 2 中的项目。

```
$buttonMOVERight_Click={
    foreach ($Srv in $listbox2.selectedItems)
        {$selectedServers=$Srv}
    $listbox3.BeginUpdate()
    foreach($TSrv in $Srv)
        {$listbox3.Items.Add($TSrv);
        $listbox2.Items.Remove($TSrv);}                         
    $listbox3.EndUpdate()
}

$buttonMoveLeft_Click={
        #TODO: Place custom script here
        foreach ($Srvs in $listbox3.selectedItems)
        {$ServersinRt=$Srvs}
    $listbox2.BeginUpdate()
    foreach($rSRv in $Srvs)
        {$listbox2.Items.Add($rSRv);
        $listbox3.Items.Remove($Srvs);}
        $listbox2.EndUpdate()
} 
```

# java - 如何从支持 bean 获取 JSF 2.0 组件生成的 HTML 的 DOM？

> ID：13344388
> 
> 赞同：1
> 
> 时间：2012-11-12T13:14:49.547
> 
> 标签：java, jakarta-ee, jsf-2, primefaces

我有一个 JSF 页面，它只包含一个 PrimeFaces 日历组件，由一个视图范围的 bean 支持。

```
<p:calendar value="#{calendarBean.today}" mode="inline" showOtherMonths="true" pages="1" binding="#{calendarBean.model}" /> 
```

为这个组件生成的 HTML 包含一个我想调整的表格。更具体地说，我想通过在目标日期的 td-tags 下添加一些 HTML 代码来动态地将图标放入此日历中。

从 CalendarBean 中，我可以从某些服务中获取代表“带有图标”的天数的对象列表。我需要这个列表来决定在表格中更改哪些日期。我试图在我的支持 bean 中获取 HTML DOM，但我不明白如何。UIComponent 树（我通过绑定属性获得）仅包含 JSF 组件，而不包含生成的 HTML。我开始怀疑这是否是解决问题的方法。

我的谷歌技能似乎在这里不足。有谁能够帮我？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-12T13:23:47.933

The concrete functional requirement is not entirely clear, so it's hard to propose the *right* way for this, but there are in general varous ways to alter the look'n'feel of the JSF/PrimeFaces-generated HTML.

1.  Use custom CSS. Icons could simply be set as CSS background images.

2.  Use custom JS. JS has instant access to the entire HTML DOM tree.

3.  Use custom JSF renderer. Extend the PrimeFaces `CalendarRenderer` class and override the `encodeXxx()` method(s) accordingly.

The backing bean is supposed to be the controller between the view (the XHTML file) and the model (the javabean entity class holding the data which is to be presented to the enduser or to capture the submitted data from enduser). It isn't supposed to manipulate the HTML.

# pom.xml - 如何在 Eclipse maven 中更改自动生成的 pom.xml 文件的模板

> ID：13344389
> 
> 赞同：2
> 
> 时间：2012-11-12T13:14:56.317
> 
> 标签：pom.xml, maven-eclipse-plugin

每当我在 Eclipse Juno 中创建一个新的 Maven 项目时，它都会默认创建一个 pom.xml 文件。该文件有一些依赖项，例如 Junit 3.8.1 我想更改此自动生成文件的模板，因此默认情况下创建的依赖项是针对 JUnit 4 而不是 JUnit3。

# java - 复合规则的 ANTLR 评估

> ID：13344390
> 
> 赞同：1
> 
> 时间：2012-11-12T13:14:59.620
> 
> 标签：java, antlr

以下是我一直在研究的 ANTLR 语法的片段：

```
compoundEvaluation returns [boolean evalResult]
  : singleEvaluation (('AND'|'OR') singleEvaluation)*
;

//overall rule to evaluate a single expression
singleEvaluation returns [boolean evalResult]
  : simpleStringEvaluation {$evalResult = $simpleStringEvaluation.evalResult;} 
  | stringEvaluation {$evalResult = $stringEvaluation.evalResult;}
  | simpleDateEvaluation {$evalResult = $simpleDateEvaluation.evalResult;}
  | dateEvaluatorWithModifier1 {$evalResult = $dateEvaluatorWithModifier1.evalResult;}
  | dateEvaluatorWithoutModifier1 {$evalResult = $dateEvaluatorWithoutModifier1.evalResult;}
  | simpleIntegerEvaluator {$evalResult = $simpleIntegerEvaluator.evalResult;}
  | integerEvaluator {$evalResult = $integerEvaluator.evalResult;}
  | integerEvaluatorWithModifier {$evalResult = $integerEvaluatorWithModifier.evalResult;}
  ; 
```

以下是其中一个评估规则的示例：

```
simpleStringEvaluation returns [boolean evalResult]
: op1=STR_FIELD_IDENTIFIER operator=(EQ|NE) '"'? op2=(SINGLE_VALUE|INTEGER) '"'?
{
  // I don't want these to be equal by default
  String op1Value = op1.getText();
  String op2Value = op2.getText();
  try {
    // get the values of the bean property specified by the value of op1 and op2
    op1Value = BeanUtils.getProperty(policy,op1.getText());
  } catch (NoSuchMethodException e) {
    e.printStackTrace();
  } catch (InvocationTargetException e) {
    e.printStackTrace();
  } catch (IllegalAccessException e) {
    e.printStackTrace();
  }

String strOperator = operator.getText();
if (strOperator.equals("=")) {
  evalResult = op1Value.equals(op2Value);
} 
if (strOperator.equals("<>")) {
  evalResult = !op1Value.equals(op2Value);
}
}
; 
```

显然我是一个新手，因为我没有构建一棵树，但是代码有效，所以我对它相当满意。但是，下一步是对多个 singleEvaluation 语句执行逻辑评估。由于我将代码嵌入语法中，我希望有人能指出我正确的方向，以弄清楚如何评估 0 个或更多结果。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-13T20:25:24.333

无需将值存储在集合中。

为什么不简单地做这样的事情：

```
compoundOrEvaluation returns [boolean evalResult]
  :          a=singleEvaluation { $evalResult   = $a.evalResult; } 
    ( ('OR') b=singleEvaluation { $evalResult ||= $b.evalResult; } )*
  ; 
```

?

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-12T15:15:05.483

这就是我的做法。我创建了一个 Set 作为成员，然后在每个语句的 @init 中，我重新初始化了 Set。当语句被评估时，它填充了集合。由于该集合的唯一合法值是真或假，因此我最终得到了一个包含 0、1 或两个成员的集合。

OR 评估如下所示：

```
compoundOrEvaluation returns [boolean evalResult]
  @init {evaluationResults = new HashSet<Boolean>();}
  : a=singleEvaluation {evaluationResults.add($a.evalResult);} (('OR') b=singleEvaluation {evaluationResults.add($b.evalResult);})+
  {
    if (evaluationResults.size()==1) {
      evalResult = evaluationResults.contains(true);
    } else {
      evalResult = true;
    }
  }
  ; 
```

AND 评估仅在 else 语句中有所不同，其中 evalResult 将设置为 false。到目前为止，这通过了我可以提交的单元测试。

最终我可能会使用一棵树和一个访问者类，但代码目前可以工作。

# c# - DataGridView 设置滚动条样式

> ID：13344391
> 
> 赞同：-1
> 
> 时间：2012-11-12T13:15:13.370
> 
> 标签：c#, winforms, datagridview

我正在使用`WinForms`和`DataGridView`.

我已经设置了应用程序的样式以利用`FlatAppearance`并且一切看起来都很好。

我唯一的问题是尝试将样式设置`Scrollbars`为单一的平面颜色并且没有视觉样式。

有没有办法覆盖这个默认行为？

此外，这也可以为 DataGridViews 标题行完成吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-12T13:27:14.927

我会回答你的第二个问题。您可以使用此代码自定义 Headers 字体和颜色：

```
void DataGridView_CellPainting(object sender, DataGridViewCellPaintingEventArgs e)
        {
            Brush gradientBrush;
            var grd = (DataGridView)sender;

            //header
            if (e.RowIndex == -1)
            {
                gradientBrush = new LinearGradientBrush(...gradientParams..);
                e.CellStyle.Font = new Font(...FontParams...);

            }
        e.Graphics.FillRectangle(gradientBrush, e.CellBounds);
        gradientBrush.Dispose();

        // paint rest of cell
        e.Paint(e.CellBounds, DataGridViewPaintParts.Border | DataGridViewPaintParts.ContentForeground);
        e.Handled = true;
        } 
```

# email - 带有通配符的许多服务器的 SPF 记录

> ID：13344393
> 
> 赞同：5
> 
> 时间：2012-11-12T13:15:20.047
> 
> 标签：email, spf

我给很多人发了电子邮件（他们都要求提供电子邮件，别担心），我们将在三台服务器上分割电子邮件发送过程。

电子邮件将从 web1.mydomain.com、mail1.mydomain.com 或 mail2.mydomain.com 发送

我想更改 web1 的 SPF 记录以允许 mail1 或 mail2 发送电子邮件，但我寻找建议的每个站点似乎都在说不同的东西。

到目前为止，我有

```
v=spf1 mx a:web1.mydomain.com a:mail1.mydomain.com a:mail2.mydomain.com -all 
```

那正确吗？有什么办法可以添加通配符以防我添加更多服务器，也许像

```
v=spf1 mx a:web1.mydomain.com a:mail[0-9].mydomain.com -all 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-10-07T20:24:04.967

您可以配置解析为多个 IP 的主机名。然后，您可以在 SPF 条目中指定该主机。如下定义 A 记录。

```
mail.example.com.       3600    IN  A   127.0.01
mail.example.com.       3600    IN  A   127.0.02
mail.example.com.       3600    IN  A   127.0.03 
```

定义 SPF 记录如下。

```
example.com.        3600    IN  TXT "v=spf1 a ~all" 
```

查看域 bitcointalk.org，它的配置与此非常相似。您可以在此处检查任何域的 SPF 配置：http: [//spf.myisp.ch](http://spf.myisp.ch)

我会避免定义 FAIL (-)。请改用 SOFTFAIL (~)，因为 SPF 条目通常会导致邮件转发出现问题。

# javascript - 当我将对象传递给 JavaScript 函数时，该对象是否通过引用传递？

> ID：13344394
> 
> 赞同：1
> 
> 时间：2012-11-12T13:15:23.370
> 
> 标签：javascript, jquery, typescript

我有一个看起来像下面的函数的函数。它接受一个名为 的对象 `link`，调用`getAdminParams`然后使用该调用的返回值来更改链接对象中的属性：

```
function checkParams(link: Link) {
    var rtn : IAdminParams = null,
        table = null;
    if (link.Action === "Create") {
        if (link.Params == null) {
            rtn = getAdminParams(link.Entity);
            if (rtn.Success) {
                link.Url = link.Href + rtn.Param;
                table = rtn.Table;
            } else {
                link.$Link.prop('disabled', false);
                return;
            }
        } else {
            link.Url = link.Href + link.Params;
            table = link.Entity;
        }
    } else {
        link.Url = link.Href;
    }
} 
```

我正在调用如下函数。

```
function adminDialog($link: JQuery) {
    var link = new Link($link);
    checkParams(link);
    doDialogAjax(link);
} 
```

当我将链接的值传递给`checkParams(link)`时，它会通过引用传递吗？换句话说，我在`checkParams(link: Link)` 函数中所做的更改是否可用于链接对象，以便它们可以在`doDialogAjax` 函数中使用？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-12T13:33:33.463

是的，没有。

> “当我将链接的值传递给 checkParams(link) 时，它会通过引用传递吗？”

不。

> “我在 checkParams(link: Link) 函数中所做的更改是否可用于链接对象，以便它们可以在 doDialogAjax 函数中使用？”

是的。

该变量不是通过*引用*传递的。它是按值传递的，但该值是一个引用。

如果变量是通过引用传递的，则函数可以更改变量。这不会发生：

```
function change(obj) {
  // change the object
  obj.value = 42;
  // replace it with a new object
  obj = { value: 1 };
}

// create an object
var a = { value: 0 };

// create another variable, to use in the call to the function
var b = a;

change(b);

alert(a.value); // shows 42, as the function changes the object passed in
alert(b.value); // shows 42, not 1, as the variable b is not changed by the function 
```

演示：http: [//jsfiddle.net/sCJHu/](http://jsfiddle.net/sCJHu/)

如果变量是通过引用传递的，`b`则将被函数中创建的新对象替换，并且`b.value`将是`1`.

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-12T13:16:14.343

是的，您在接收对象的函数中所做的更改在对象的其他用途中是可见的。

简单测试：

```
​function increment(obj) {
    obj.a++;    
}
var myobj = {a:3};
increment(myobj);
document.write(myobj.a); // prints 4 
```

[示范](http://jsfiddle.net/dystroy/deSsR/)

回答评论：数组是对象，它[的工作原理是一样的](http://jsfiddle.net/dystroy/crGmH/)。

在这种精确的情况下，您可能会将传递模式视为*“通过引用传递”*，但这只是使用另一种语言的一些词汇：您传递变量的值，对象的变量值是它们的引用。这个词汇的问题体现在 Archer 的错误中：你不能替换变量的值：

```
​function increment(obj) {
    obj = {a:4}; // doesn't change the passed object, just the local variable obj
}
var myobj = {a:3};
increment(myobj);
document.write(myobj.a); // prints 3 because myobj isn't changed 
```

换句话说：一个函数可以**修改**一个对象，该对象是传递给它的外部变量的值，它不能**替换**它。因为您没有像在 C 中那样传递对原始变量的引用。

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2012-11-12T13:18:12.950

> 当我将对象传递给 javascript 函数时，该对象是否通过引用传递？

对对象的引用被传递给函数（这*不是*“通过引用传递”，这完全是另一回事）。一个更简单的例子有助于说明这一点：

```
function foo(o1) {
    console.log("foo1: o1.a = " + o1.a);
    o1.a = "updated";    // <=== MODIFYING the object
    console.log("foo2: o1.a = " + o1.a);
}
function bar(o2) {
    console.log("bar1: o2.a = " + o2.a);
    o2 = {a: "updated"}; // <=== Pointing to a DIFFERENT object (no effect outside function)
    console.log("bar2: o2.a = " + o2.a);
}

var x = {a: "original x"};
foo(x);           // Logs "foo1: o1.a = original x",
                  // then "foo2: o1.a = updated"
console.log(x.a); // Logs "updated"

var y = {a: "original y"};
bar(y);           // Logs "bar1: o2.a = original y",
                  // then "bar2: o2.a = updated"
console.log(y.a); // Logs "original y", *NOT* "updated" 
```

请注意，这是**按值传递**；与对象有关的值是对象引用。您可能会看到人们称其为“通过引用传递”，但这是根本错误的。如果变量是“按引用传递”，则意味着您可以*在调用代码*中更改变量的值。例如，这意味着我们的函数可以改变什么`x`和`y`引用。但他们不能，正如我们从`bar`上面看到的那样。它们只能更改`x`和`y`引用的对象的属性，`x`而不能更改它们`y`本身。

# c# - Windows phone 8 将控件的高度更改为视图高度

> ID：13344396
> 
> 赞同：1
> 
> 时间：2012-11-12T13:15:28.393
> 
> 标签：c#, windows-phone-8

W8 和 C# 中有一个简单的任务，由于某种原因不能共谋。我希望我的 WebBrowser 高度等于我的视图高度，以编程方式。（我能够使用带有停靠属性的 VS2008 执行此任务）我尝试过：

```
MainPage mainView = new MainPage();
webBrowser1.Height = mainView.WindowHeight; 
```

我这样做的原因是因为当我将设备更改为 720x1280 时，我的视图的高度被放大了，但我的网络浏览器控件的高度相同。任何帮助或代码建议都会很棒。谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-01T07:45:17.427

尝试这个：

```
 WebBrowser webBrowser1 = new WebBrowser();
    public MainPage()
    {
        InitializeComponent();

        this.Loaded += delegate
        {
            webBrowser1.Height = this.ActualHeight;

            //if you want to add the web browser to main page,uncomment the next line.
            //this.LayoutRoot.Children.Add(webBrowser1);
        };
    } 
```

希望这可以帮到你。

# system-requirements - 有替代的要求

> ID：13344401
> 
> 赞同：1
> 
> 时间：2012-11-12T13:15:48.143
> 
> 标签：system-requirements

在我目前正在从事的项目中，要求是这种形式：

1.  系统必须...
2.  系统必须...

只要没有替代方案，它就可以正常工作。但是，如果系统的工作方式因发生的情况而有所不同，我应该如何编写？

```
if ScenarioA Then do This
elseif ScenarioB Then do That 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-22T22:59:06.887

您正在混合需求和设计（更具体地说，是用例）。需求描述了系统应该能够提供的高级功能。用例是需求的衍生物。所以你的要求可以是：

```
1\. For scenarioA do this
2\. For scenarioB do that 
```

请注意，这些要求与上下文无关，并且本质上描述了功能。

从这些需求中，可以定义一个描述某种动态行为的用例（甚至几个）：

```
a. Step 1
b. Step 2
...
n. [ScenarioA] do this
n1\. [ScenarioB] do that (alternate path)
... 
```

这里，`n`和`n1`步骤是在用例上下文的范围内定义的，没有其他意义。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-06T11:05:39.033

你为什么不试试用户故事？

用户故事（与需求相反）是描述系统需要为某些用户做的事情的简要意图陈述。

**作为**关闭应用程序的用户，**我希望**系统提示我保存自上次保存以来发生的任何更改，**以便**我可以保留有用的工作并丢弃错误的工作。

> 1.  对于方案A，请执行此操作
> 2.  对于方案B，这样做

1.  **作为**执行方案 A 的用户，**我想要**这个，**以便**我可以打开我的应用程序。
2.  **作为**执行方案 B 的用户，**我想要**这样，**以便**我可以关闭我的应用程序。

# obfuscation - 自定义构建配置的 Eazfuscator.NET 错误

> ID：13344404
> 
> 赞同：2
> 
> 时间：2012-11-12T13:15:55.940
> 
> 标签：obfuscation, eazfuscator

我在我的项目中使用 Eazfuscator 有一段时间了，一切正常，直到我创建了一个名为“Release-Internal”的发布构建配置的副本。我还更新了构建后事件并将脚本更改为“if /I "$(ConfigurationName)" NEQ "Debug"..."。现在我的所有项目都可以混淆，没有任何问题，但只有一个项目显示以下错误：

> （发生 EF-1099 错误。
> 
> 4> 混淆器无法加载输入程序集或其依赖项之一。
> 
> 4> 要解决此问题，您可以：
> 
> 4> - 指定探测路径
> 
> 4> - 在输入文件附近放置一个缺失的程序集
> 
> 4> 更多信息可以在 Eazfuscator.NET 文档中找到
> 
> 4> 故障排除 -> 错误代码知识库 -> EF-1099 章节。）

有趣的部分是如果我将活动配置更改为“发布”相同的项目混淆没有任何问题。“Release”和“Release-Internal”配置的区别只是“Release-Internal”有一个额外的条件编译符号，称为INTERNAL。

我还使用“Release-Internal”配置构建项目，而不会混淆。应用程序构建成功并按原样执行。

此致，

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-22T20:49:26.617

从构建输出来看，您似乎正在并行构建项目。

我认为在 Eazfuscator.NET 尝试加载您的程序集时缺少依赖项。

我建议尝试在 Visual Studio IDE > 工具 > 选项 > “项目和解决方案”中将“最大并行项目构建数”设置为 1，然后重试。

事件查看器可能有更多信息（例如并排错误）。

您还可以尝试启用程序集绑定失败日志记录，以尝试识别无法找到哪些特定依赖项。请参阅：[如何在 .NET 中启用程序集绑定失败日志记录 (Fusion)](https://stackoverflow.com/questions/255669/how-to-enable-assembly-bind-failure-logging-fusion-in-net/1527249#1527249)

它可以像在项目的缺少依赖项的引用属性中将“复制本地”设置为 true 一样简单。

您可以在“Eazfuscator.NET Documentation.chm”>“疑难解答”>“错误代码知识库”中阅读“EF-1099：无法加载输入程序集，反射加载失败”帮助主题。Eazfuscator.NET 3.2.278.32704 的帮助文档在同一帮助主题中有“关于启用 Eazfuscator.NET 的体系结构中性加载模式的说明”。

# console-application - 区分手动启动或按计划启动

> ID：13344405
> 
> 赞同：2
> 
> 时间：2012-11-12T13:16:03.427
> 
> 标签：console-application

我正在构建一个控制台应用程序，它将由 Windows 任务调度程序在晚上运行。当用户在中午手动开始时，还应该有一个选项，用户应该用它来解析日期时间。

我的问题：如果应用程序是手动启动还是由任务调度程序启动，是否有某种方法可以区分控制台应用程序内部的差异？

# c# - 删除 dataGridView 的最后一个空行

> ID：13344407
> 
> 赞同：1
> 
> 时间：2012-11-12T13:16:10.910
> 
> 标签：c#, .net, winforms, datagridview

我有一些空的datagridview，它使用数据源是List through BindingSource。因为 AllowUserToAddRows = true，最初 datagridview 有一个空行。当我只选择这一行并关闭表单时，datagridview 会创建新的空对象。为什么会这样做？如何防止这种情况？谢谢。

选择空行： ![在此处输入图像描述](../Images/246f52063718f82445ec880dbb8e9aca.png) 我得到这个： ![在此处输入图像描述](../Images/e0e1afa775bb358fa7dce1fb2e98fe59.png)

**结论：**经过多次尝试找到解决方案后，我决定使用 datagridview 和两个按钮（添加行和删除行）创建 UI 控件。在这一点上，我停止尝试按计划进行，但我仍然很高兴知道解决方案。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-11-12T13:21:01.657

您可以处理`RowValidating`事件以验证行是否为空。如果是这样，则不会添加取消事件和行。

```
if (gridView[0, e.RowIndex].Value == null)
    e.Cancel = true; 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-12T13:51:42.103

我建议确保您没有增加`RowCount`事件处理程序中的属性值`RowLeave`，例如`CellLeave`等。

例如：

```
DataGridView1.RowCount += 1; 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2017-12-05T05:33:52.380

是的，DataGridView 的底部总会有一个空行。它允许用户在运行时添加新数据；他们所要做的就是开始在新行中输入。

要禁用它，您还需要阻止用户添加新行。通过将 DataGridView 控件的 AllowUserToAddRows 属性设置为 False 来执行此操作：

**myDataGridView.AllowUserToAddRows = false;**

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2016-01-27T19:22:22.040

在 FormClosing 事件处理程序中尝试显式清除 DataSource。

```
private void Form1_FormClosing(object sender, FormClosingEventArgs e)
{
    dataGridView1.DataSource = null;
} 
```

保留在内存绑定中可能会导致此问题。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2020-08-07T04:12:23.370

[![在此处输入图像描述](../Images/d54fce2151f3bc1d732ab314d7398651.png)](https://i.stack.imgur.com/SaiF1.png) 您可以在此处禁用“启用添加”

# c# - DevExpress 中的 XtraGrid 和类？

> ID：13344410
> 
> 赞同：1
> 
> 时间：2012-11-12T13:16:20.180
> 
> 标签：c#, devexpress

我正在尝试使用包含`List<MyiTems>`. 编译网格时，它对我有用，如下面的第一张图片所示。

现在他确实希望在播放某行 Grid 时他展开 1 Table 并查看它们的内容作为样本图像 2（我需要），就像我可以做这个？

*   表：[http ://www.sendspace.com/file/pwxjuy](http://www.sendspace.com/file/pwxjuy)
*   网格：[http ://www.sendspace.com/file/kpo1lj](http://www.sendspace.com/file/kpo1lj)

这是一个新的

J. Steen，我需要玩的是一行网格，我在下面的表格中显示了一个数组，如图所示的其中一个 URL，我明白...

表格网址 [url]http://www.sendspace.com/file/pwxjuy[/url] 我需要在您按下的行下方显示此表格 Grids URL [url]http://www.sendspace.com/file/kpo1lj [/url] 代码 [url]http://www.sendspace.com/file/s46ryp[/url]

亚历克斯

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-16T14:24:38.257

为此，您需要在 MyiTems 中添加对此列表/表格的引用

```
Class MyiTems
{
    //some values
    List<SomeClass> ChildElements;
} 
```

# django - 在 Django UserProfile 模型中继承组权限

> ID：13344420
> 
> 赞同：3
> 
> 时间：2012-11-12T13:17:58.343
> 
> 标签：django, django-models, django-permissions

假设我有一个项目，我事先知道我将只有三个用户组。我可以提前从 GroupParent 继承定义它们，然后使用这些组选择向我的 UserProfile 添加一个字段吗？这基本上是我想做的：

```
class GroupParent(??):
    class Meta:
        permissions = (
            ('do_something', 'Can do something'),
            ('edit_task', 'Can edit task'),
     );

class GroupAdmin(GroupParent):
    class Meta:
        // I want to inherit the permissions from the Mixin and add a few
        // I know this would only overwrite... how do I do it?
        permissions = (
            ('do_fancy_tasks', 'Can do fancy tasks'),
         )

class GroupCoordinator(GroupParent):
     class Meta:
     // inherit from GroupParent and add my own
         permissions = (
            ('open_file', 'Can open files'),
         )

class GroupNormal(GroupParent):
     class Meta:
     // inherit from GroupParent and add my own
         permissions = (
            ('open_file', 'Can open files'),
            ('edit_file', 'Can edit files'),
         )

class UserProfile(models.Model):
    user = models.OneToOneField(User)
    has_manager = models.BooleanField()
    ...
    ...
    group = models.CharField(max_length=2, choices=GROUP_CHOICES) // how?? 
```

这甚至是一种合理的方法，还是应该在构建应用程序后（或在构建应用程序时）放弃并设置组+权限？

另外......使用 django-guardian 与 django 的默认权限功能相比有什么优势，如果我打算将它与这些模型一起使用，我应该记住什么？谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-12T15:52:13.043

简单的元组加法怎么样？

```
class GroupParent(object):
    class Meta:
        permissions = (
            ('do_something', 'Can do something'),
            ('edit_task', 'Can edit task'),
        )

class GroupAdmin(GroupParent):
    class Meta:
        permissions = GroupParent.Meta.permissions + (
            ('do_fancy_tasks', 'Can do fancy tasks'),
         ) 
```

这没关系，因为 GroupParent 只是一个 mixin。如果 GroupParent 是 Django 模型，则必须使用`GroupParent._meta.permissions`.

# jquery - Jquery Cycle 正在复制导航

> ID：13344423
> 
> 赞同：1
> 
> 时间：2012-11-12T13:18:13.723
> 
> 标签：jquery, html, jquery-plugins

您好，我在幻灯片中使用 jQuery 循环插件，但我遇到了一个小问题，因为它在我的代码中重复了导航的数量。

**滑动 ：**

```
$('#slide-imgs').cycle({
    fx:     'scrollLeft',
    pager : "#nav-slide",
    cleartype: true,
    cleartypeNoBg: true,
    pagerAnchorBuilder: function(idx, slide) {
        return '<a class="bullet-slide" href="#" rel="'+ idx +'" > </a>';
    }
});

<div id="nav-slide" class="navigation-slide" > </div>

<div id="slide-imgs" >
    <img src="<?php echo base_url( 'jobs/nome-job-0.jpg' ) ?>" alt="nome-job" />
    <img src="<?php echo base_url( 'jobs/nome-job-0.jpg' ) ?>" alt="nome-job" />
</div> 
```

我的幻灯片中有两张图片，但它在我的导航中返回了 4 个链接……这可能是什么？

# android - 手动使用 Android ProgressBar

> ID：13344426
> 
> 赞同：1
> 
> 时间：2012-11-12T13:18:39.457
> 
> 标签：android, android-progressbar

我不需要线程，我只想通过单击按钮手动增加进度条的值。

这是 XML 代码

```
<ProgressBar
    android:id="@+id/progressBar1"
    style="?android:attr/progressBarStyleHorizontal"
    android:layout_width="match_parent"
    android:layout_height="wrap_content" /> 
```

在我的Java文件中

```
 ProgressBar pb;

    ...

    pb = (ProgressBar)findViewById(R.id.progressBar1);
    pb.setMax(100);
    pb.setProgress(0); 
```

现在在单击按钮时调用的方法中，我想将进度增加一

```
public void increment(View view) {

    int progress = pb.getProgress();
    pb.setProgress(progress++);

} 
```

这会导致程序崩溃。我怎样才能像这样从 Java 程序控制 ProgressBar？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-12T13:48:19.210

2个选项：

`final ProgressBar pb = (ProgressBar)findViewById(R.id.progressBar1);`

或者

`private ProgressBar pb = null;`放置为全局变量。

# c# - 使用 Interop 读取 Excel 并保存在 DataTable 中的最快方法

> ID：13344427
> 
> 赞同：0
> 
> 时间：2012-11-12T13:18:41.517
> 
> 标签：c#, excel, datatable, export

在 Internet 上搜索并尝试了一些代码后，我使用 Interop 将数据从 Excel 导出到 Datatable。问题是，它非常慢。有人可以给我一个钥匙，我怎样才能用 Interop 更快地完成它，而不是 OLEDB 或其他任何东西？

我的代码：

```
object misValue = System.Reflection.Missing.Value;

Excel.Application xlApp = new Excel.Application();
Excel.Workbook xlWorkbook = xlApp.Workbooks.Open(userSelectedFilePath2);
Excel._Worksheet xlWorksheet1 = xlWorkbook.Sheets[1];
Excel.Range xlRange1 = xlWorksheet1.UsedRange;

DataTable excelTb1 = new DataTable();

for (int j = 1; j <= xlRange1.Columns.Count; j++) // Header Names
{
    excelTb1.Columns.Add(xlRange1.Cells[1, j].Value2.ToString());
}

DataRow dataRow = null;

for (int row = 2; row < xlRange1.Rows.Count + 1; row++)
{
    dataRow = excelTb1.NewRow();

    for (int col = 1; col <= xlRange1.Columns.Count; col++)
    {
        dataRow[col - 1] = (xlRange1.Cells[row, col] as Excel.Range).Value2;
    }
    excelTb1.Rows.Add(dataRow);
}

xlWorkbook.Close(true, misValue, misValue);
xlApp.Quit();
dataGridView1.DataSource = excelTb1; 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-12T13:24:14.430

I'll give you an answer to a question you didn't ask. Use [NPOI library](http://code.google.com/p/npoi/downloads/list).

*   it will be faster
*   you won't have problems with forgetting to close your resources
*   Excel will not be required or used in the background

Here's the relevant code for that: [NPOI : How To Read File using NPOI](https://stackoverflow.com/questions/5855813/npoi-how-to-read-file-using-npoi) . For `xlsx` formats, use `XSSFWorkbook` instead (it is available starting from version 2.0).

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-12T14:21:07.200

我对此的第一个想法是，您正在循环遍历 Excel 工作表并在数组中逐个转换值以填充您的结构。

尝试更多类似的东西（原谅我的 VB，但我相信 oyu 会理解我的建议）：

```
Dim SpreadsheetVals(,) as object
SpreadhseetVals = xlWorksheet1.UsedRange 
```

然后在你的数组中循环。

这应该会大大提高速度。

# java - Jena/Fuseki：加载 com.hp.hpl.jena.graph.impl.GraphBase 的自定义实现？

> ID：13344429
> 
> 赞同：3
> 
> 时间：2012-11-12T13:18:56.073
> 
> 标签：java, rdf, jena, fuseki

我写了一个[com.hp.hpl.jena.graph.impl.GraphBase的实现](http://grepcode.com/file/repo1.maven.org/maven2/com.hp.hpl.jena/jena/2.6.4/com/hp/hpl/jena/graph/impl/GraphBase.java)

```
package mygraph;
import (...)

public class MyGraph extends GraphBase
   {
   public MyGraph()
            {

            }
   @Override
   protected ExtendedIterator<Triple> graphBaseFind( TripleMatch m )
            {
            return //(...)
            }
   } 
```

现在，我想将此图加载到[Apache Fuseki](http://jena.apache.org/documentation/serving_data/index.html)中。我已经阅读了有关[汇编程序](http://jena.apache.org/documentation/tdb/assembler.html)和配置 (*.ttl) 文件的信息，但我迷路了。我应该如何告诉 Fuzeki 将我的图表添加/加载到它的数据集中？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-12T14:40:16.560

[查看此处](http://mail-archives.apache.org/mod_mbox/jena-dev/201210.mbox/%3C506D90DE.3020001@apache.org%3E)列出的步骤。

此外，查看 TDB 的源代码以了解它是如何注册的（com.hp.hpl.jena.tdb.assembler 包）。

# date - 为什么nlog不能读取当前日期

> ID：13344430
> 
> 赞同：3
> 
> 时间：2012-11-12T13:19:02.500
> 
> 标签：date, formatting, nlog

我正在使用 Nlog 将一些日志记录写入文本文件。部分 nlog.config：

```
 <target name="file" xsi:type="File" fileName="${basedir}/MBWRunner_log.txt"
             layout="${date} (${level}): ${message}
Exception: ${exception:format=Method, ToString}"/> 
```

日志文件中的行如下所示：

> 0001-01-01 00:00:00（跟踪）：MBWRunner 开始

如您所见，日期和时间均为 0。我测试了 {longdate} 和 {date:format=yyyyMMddHHmmss}，结果相同。

该应用程序是一个控制台应用程序，从提升的命令行运行。

有什么线索吗？

[编辑] 我已经在组织内的 2 台机器上对此进行了测试，结果相同。请帮忙！

使用的代码：

```
 static Logger _logger = LogManager.GetCurrentClassLogger();

public static void Log(string message, LogLevel priority)
    {
      LogEventInfo eventinfo = new LogEventInfo(); ;
      eventinfo.Message = message;
      eventinfo.Level = priority;
      Log(eventinfo);
    }

static void Log(LogEventInfo logentry)
{     
  _logger.Log(logentry);
} 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-12-03T20:03:58.847

更新：

@edosoft 我认为问题在于您使用了 LogEventInfo 的默认构造函数。如果您在此处查看 LogEventInfo 的来源

[https://github.com/NLog/NLog/blob/master/src/NLog/LogEventInfo.cs](https://github.com/NLog/NLog/blob/master/src/NLog/LogEventInfo.cs)

您将看到使用默认构造函数不会填充该`.TimeStamp`字段，因此该字段可能只是默认为 DateTime 的默认值，我假设它是`DateTime.MinValue`. 您应该使用其他构造函数之一或 Create 方法之一。由于您只设置 Message 和 Level 字段，我建议：

```
var logEvent = new LogEventInfo(priority, "", message); //Second param is logger name. 
```

或者

```
var logEvent = LogEventInfo.Create(priority, "", message); 
```

`DateLayoutRenderer`从（从[这里](https://github.com/NLog/NLog/blob/master/src/NLog/LayoutRenderers/DateLayoutRenderer.cs)）的 NLog 源中，我们可以看到作为日志流的一部分写入的日期值是这样计算的：

```
 protected override void Append(StringBuilder builder, LogEventInfo logEvent)
    {
        var ts = logEvent.TimeStamp;
        if (this.UniversalTime)
        {
            ts = ts.ToUniversalTime();
        }

        builder.Append(ts.ToString(this.Format, this.Culture));
    } 
```

这里发生的`DateLayoutRenderer`是从对象中获取`TimeStamp`值`LogEventInfo`（NLog 每次使用`Logger.Trace`, `Logger.Debug`,`Logger.Info`等方法时都会创建其中一个。您也可以`LogEventInfo`自己创建对象并使用该`Logger.Log`方法记录它们）。

默认情况下，当一个`LogEventInfo`对象被创建时，它的`TimeStamp`字段是这样设置的（来自`LogEventInfo` [here](https://github.com/NLog/NLog/blob/master/src/NLog/LogEventInfo.cs)的源代码）（注意使用`CurrentTimeGetter.Now`）：

```
 public LogEventInfo(LogLevel level, string loggerName, IFormatProvider formatProvider, [Localizable(false)] string message, object[] parameters, Exception exception)
    {
        this.TimeStamp = CurrentTimeGetter.Now;
        this.Level = level;
        this.LoggerName = loggerName;
        this.Message = message;
        this.Parameters = parameters;
        this.FormatProvider = formatProvider;
        this.Exception = exception;
        this.SequenceID = Interlocked.Increment(ref globalSequenceId);

        if (NeedToPreformatMessage(parameters))
        {
            this.CalcFormattedMessage();
        }
    } 
```

该`TimeStamp`字段是`LogEventInfo`使用属性在构造函数中设置的`TimeSource.Current.Now`，其实现可以在[这里](https://github.com/NLog/NLog/blob/master/src/NLog/Time/TimeSource.cs)看到。

（更新 - 在某些时候，NLog 从使用更改`CurrentTimeGetter`为更通用的方法，`TimeSource`即拥有一个具有多种风格的对象（其中一种，`CachedTimeSource`，本质上与 相同`CurrentTimeGetter`））。

为了省去浏览链接的麻烦，这里是源代码`CachedTimeSource`：

```
public abstract class CachedTimeSource : TimeSource
{
    private int lastTicks = -1;
    private DateTime lastTime = DateTime.MinValue;

    /// <summary>
    /// Gets raw uncached time from derived time source.
    /// </summary>
    protected abstract DateTime FreshTime { get; }

    /// <summary>
    /// Gets current time cached for one system tick (15.6 milliseconds).
    /// </summary>
    public override DateTime Time
    {
        get
        {
            int tickCount = Environment.TickCount;
            if (tickCount == lastTicks)
                return lastTime;
            else
            {
                DateTime time = FreshTime;
                lastTicks = tickCount;
                lastTime = time;
                return time;
            }
        }
    }
} 
```

此类的目的是使用相对便宜的操作 ( `Environment.Ticks`) 来限制对相对昂贵的操作 ( `DateTime.Now`) 的访问。如果 Ticks 的值在每次调用（从一条记录的消息到下一条）中没有变化，那么这次`DateTime.Now`检索的值将与这次检索的 DateTime.Now 的值相同，所以只需使用最后一次检索到的值。

使用所有这些代码（并且日期/时间日志显然适用于大多数其他人），您的问题的一种可能解释是您正在使用该`Logger.Log`方法来记录您的消息并且您正在`LogEventInfo`自己构建对象。默认情况下，如果您只是新建一个`LogEventInfo`对象，该`TimeStamp`属性的自动设置应该可以正常工作。它仅取决于`Environment.Ticks`、`DateTime.Now`和重用最后一个`DateTime.Now`值的逻辑（如果适用）。

您是否有可能正在创建一个`LogEventInfo`对象，然后将其`TimeStamp`属性设置为`DateTime.MinValue`？我问是因为记录的日期是`DateTime.MinValue`.

我能想到的唯一其他解释是如果`Environment.Ticks`出于某种原因返回 -1。如果是这样，那么`CurrentTimeGetter`将始终返回 lastDateTime 私有成员变量的初始值。我无法想象`Environment.Ticks`会返回-1的场景。

# php - 使用 htacess 文件重写动态 url

> ID：13344433
> 
> 赞同：2
> 
> 时间：2012-11-12T13:19:07.710
> 
> 标签：php, .htaccess, url

我想显示这个网址

```
http://localhost/project/sites/sample/cat.php?typ=Politics 
```

喜欢这个

```
http://localhost/project/sites/sample/Politics.html 
```

我的 htaccess 代码是

```
RewriteEngine on
RewriteRule (.*)\.html$ cat.php?typ=$1 
```

当我在浏览器上手动提供 url 时它正在工作，但 url 没有动态加载。如果我单击第一个 url，我想动态显示第二个 url。谢谢你的帮助

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-12T13:23:21.147

Change `RewriteRule` to `Redirect`:

```
RewriteEngine on
Redirect (.*)\.html$ cat.php?typ=$1 
```

[*By the way, "typ" is written as "type"]

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-12T13:28:13.347

如果您手动键入新链接，它可以正常工作吗？

只需将您的 html 链接指向“Politics.html”而不是“cat.php?typ=Politics”，htaccess 将负责其余部分

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-12T13:22:22.607

试试这个规则：

```
RewriteEngine on
RewriteRule (.*).html$ cat.php?typ=$1 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-11-12T13:25:22.250

如果要将第一个 URL 重定向到第二个 URL：

```
RewriteCond %{QUERY_STRING} ^typ=([a-zA-Z0-9_-]+)$
RewriteRule ^cat\.php$ cat/%1/? [R,L] 
```

如果您想编辑 HTML 中的链接，您可以尝试`mod_substitute`（确保`mod_filter`也已启用）：

```
AddOutputFilterByType SUBSTITUTE text/html
Substitute s|/?cat\.php\?typ=([a-zA-Z0-9_-]+)|/cat/$1/|i 
```

# ios5 - 如何在完成一个视频后播放另一个视频，因为用户在 uipickerview 中选择了视频名称

> ID：13344434
> 
> 赞同：1
> 
> 时间：2012-11-12T13:19:11.423
> 
> 标签：ios5, video, mpmovieplayercontroller

我的目标是将视频文件放在`uipicker`. 我已在数组中添加了我的视频文件名并成功提取了视频文件名和扩展名，但现在我的目标是当用户点击选择器行时，从数组中选择的视频将被传递给`mpmovieplayercontroller`对象，然后将播放电影请让我知道如何在一个文件完成后编写代码来播放另一个选定的文件，即 1mpmovieplaybackfinished`

我播放单个视频文件的代码如下。

让我知道如何从数组中播放另一个视频：

```
-(IBAction)play:(id)sender
{
for (i = 0;i<[arrayofvideo count];i++) {<br /> NSLog(@"%d",i);

NSString *fullFileName = [NSString stringWithFormat:@"%@",[arrayofvideo objectAtIndex:i]];
NSString *filename = [fullFileName stringByDeletingPathExtension];

NSLog(@"%@",filename);
NSString *extension = [fullFileName pathExtension];
NSLog(@"%@",extension);

NSURL *url = [NSURL fileURLWithPath:[[NSBundle mainBundle]
pathForResource:@"filename"
ofType:@"extension"]];
movieplayer = [[MPMoviePlayerController alloc]initWithContentURL:url];
movieplayer.movieSourceType = MPMovieSourceTypeFile;
movieplayer.controlStyle = MPMovieControlStyleDefault;

movieplayer.view.frame = CGRectMake(0,0,300,400);
[self.view addSubview:movieplayer.view];
[[NSNotificationCenter defaultCenter]
addObserver:self
selector:@selector(movieFinishedCallback:)
name:MPMoviePlayerPlaybackDidFinishNotification
object:movieplayer];

//---play movie---
[movieplayer play];
}

-(void)movieFinishedCallback:(NSNotification*) aNotification 
{
MPMoviePlayerController *player = [aNotification object];
[[NSNotificationCenter defaultCenter]
removeObserver:self
name:MPMoviePlayerPlaybackDidFinishNotification
object:player];
[player stop];
// self.view removeFromSuperView;
[self.view removeFromSuperview];

//call the play button again
// pls tell me what to write here to call play function

} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-12T14:31:40.273

您需要重组代码。

您发布的代码从您的视频路径名数组构建路径名，然后使用@“文件名”的固定文件名。那是不对的。

您应该编写一个方法“playFileAtIndex”，在特定索引处查找文件名并播放该文件。我建议在该方法中添加一个 BOOL 参数 playMultipleVideos。如果标志为真，该方法将设置一个movieFinishedCallback 来增加索引并开始播放下一个电影。

然后让您的按钮 IBAction 方法为所选行设置一个索引 iVar 并调用 playFileAtIndex 方法。

# primefaces - 动态更新 primefaces 水印消息

> ID：13344437
> 
> 赞同：1
> 
> 时间：2012-11-12T13:19:18.927
> 
> 标签：primefaces

我正在尝试根据从 jsf selectOneMenu 中选择的值动态更新水印消息。用于水印组件的 id 是“waterMark1”。水印组件链接到输入文本字段。在 valueChange 上，我收到一条错误消息，指出无法找到 id waterMarkID1。我尝试根据 selectOneMenu 选择更新 outputText 并将 id 保持为 WatermarkID1。它与 outputText 一起工作正常。

有没有办法根据 bean 值显示水印消息。任何帮助将不胜感激。

```
<h:selectOneMenu value="#{RequestBean.searchonType}" valueChangeListener="# {RequestBean.getValidateMsg}" id="searchUser">
                                <f:selectItems value="#{RequestBean.searchonTypeList}" />
                                <f:ajax event="change" update="waterMarkID1"  render="waterMarkID1"/>
                          </h:selectOneMenu>

                          <h:inputText id="searchTxt" styleClass="text_small" size="50" value="#{RequestBean.searchTxt}"/>

                          <p:watermark id="waterMarkID1" for="searchTxt" value="#{RequestBean.waterMarkID}"/> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-12T21:38:25.660

看来您不能`p:watermark`直接更新组件。但是，更新包含该组件的容器也会更新您的水印消息：

```
<p:panel id="panel1">
    <h:selectOneMenu value="#{RequestBean.searchonType}" valueChangeListener="# {RequestBean.getValidateMsg}" id="searchUser">
        <f:selectItems value="#{RequestBean.searchonTypeList}" />
        <f:ajax event="change" render="panel1"/>
    </h:selectOneMenu>

    <h:inputText id="searchTxt" styleClass="text_small" size="50" value="#{RequestBean.searchTxt}"/>
    <p:watermark id="waterMarkID1" for="searchTxt" value="#{RequestBean.waterMarkID}"/>
</panel> 
```

请注意，您可以将 括起来的元素归约`p:panel`，例如，to `h:inputText`and `p:watermark`only。关键是更新容器，而不是水印组件。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2018-07-20T15:25:02.620

我不建议更新包含水印的容器。在某些情况下，您可能必须更新整个表单组件，如果您从表单内部更新表单组件，您将陷入无限循环。您可以通过将水印包含在 a 中来绕过它，然后不渲染面板。

```
<p:outputPanel id="watermark"  style="display:block">
     <p:watermark/>
</p:outputPanel> 
```

然后只需更新 outputPanel。

# php - 删除excel文件phpexcel任何属性的技术

> ID：13344444
> 
> 赞同：1
> 
> 时间：2012-11-12T13:19:28.943
> 
> 标签：php, phpexcel

我有一个文件，我想在 excel 2007 中压缩或删除任何类型的格式。我的文件大小是 450kb，但是当我在新工作簿中导出所有工作表时，大小现在是 104kb。phpexcel中有没有办法压缩文件或只是将工作表导出到工作簿中。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-18T16:55:54.877

如果您对 PHPExcel 生成的文件大小有此类问题，那么您最好寻找使用 MS Excel 本身的替代解决方案，例如 COM

# java - LinkedList 迭代器移除

> ID：13344447
> 
> 赞同：6
> 
> 时间：2012-11-12T13:19:32.437
> 
> 标签：java, iterator, linked-list

> **可能重复：**
> [在迭代集合时删除元素的有效等效项](https://stackoverflow.com/questions/223918/efficient-equivalent-for-removing-elements-while-iterating-the-collection)

```
private LinkedList flights; 
```

……

```
public void clear(){

    ListIterator itr = flights.listIterator();

    while(itr.hasNext()){

        flights.remove(itr.next());

    }

} 
```

……

```
Exception in thread "main" java.util.ConcurrentModificationException
    at java.util.LinkedList$ListItr.checkForComodification(Unknown Source)
    at java.util.LinkedList$ListItr.next(Unknown Source)
    at section1.FlightQueue.clear(FlightQueue.java:44)
    at section1.FlightTest001.main(FlightTest001.java:22) 
```

它出什么问题了？完全不明白为什么会出现错误，我确信我在数组列表或数组上使用了相同的代码并且它已经工作了。

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2012-11-12T13:20:17.213

在遍历元素时，您不能直接从集合中删除项目，因为这会导致`ConcurrentModificationException`. `Iterator.remove()`是在迭代期间修改集合的公认安全方法。为避免看到`IllegalStateException`，请务必致电`Iterator.next()`：

```
while (itr.hasNext()) {
   itr.next();
   itr.remove();
} 
```

或者您只是希望删除 中的所有元素`Collection`，您可以使用：

```
flights.clear(); 
```

请参阅：[在迭代集合时删除元素的有效等效项](https://stackoverflow.com/questions/223918/efficient-equivalent-for-removing-elements-while-iterating-the-collection)

# c - 如何在c中添加char类型整数

> ID：13344448
> 
> 赞同：3
> 
> 时间：2012-11-12T13:19:33.790
> 
> 标签：c, char, ascii

这是我的程序的示例代码，我必须在其中添加两个字符串类型 integer `(ex: "23568" and "23674")`。所以，我正在尝试单次`char`加法。

```
char first ='2';
char second ='1'; 
```

我正在尝试这样..

```
i=((int)first)+((int)second);
printf("%d",i); 
```

我得到输出**99**，因为它添加了两者的**ASCII**值。**任何人都请建议我，在C**中添加 char 类型编号的方法应该是什么。

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-11-12T13:29:30.957

由于您的示例将两个单个字符添加在一起，因此您可以确信知道两件事

1.  总数永远不会超过 18 个。
2.  您可以完全通过库调用避免任何转换。该标准要求“0”到“9”是连续的（实际上它是标准规定的唯一字符序列）。

所以;

```
char a = '2';
char b = '3';

int i = (int)(a-'0') + (int)(b-'0'); 
```

将**永远**有效。即使在 EBCDIC 中（如果您不知道那是什么，请认为自己很幸运）。

如果您的意图是实际添加两个当前以字符串形式（“12345”，“54321”）的多个数字，那么**[strtol()](http://www.cplusplus.com/reference/clibrary/cstdlib/strtol/)**是您最好的选择。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-11-12T13:23:46.893

```
i=(first-'0')+(second-'0'); 
```

无需将 char 转换为 int。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-12T13:28:44.747

如果你想添加字符的数字表示，我会使用“（first - '0'）+（second - '0'）;”

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-11-12T14:34:07.747

这个问题似乎很有趣，虽然它会比它更容易，但添加“字符串数字”有点棘手（更不用说我使用的丑陋方法）。

此代码将添加两个任意长度的字符串，它们不需要与从后面开始添加的长度相同。您提供两个字符串，足够长度的缓冲区，并确保字符串仅包含数字：

```
#include <stdio.h>
#include <string.h>

char * add_string_numbers(char * first, char * second, char * dest, int dest_len)
{
    char * res = dest + dest_len - 1;
    *res = 0;

    if ( ! *first && ! *second )
    {
        puts("Those numbers are less than nothing");
        return 0;
    }

    int first_len = strlen(first);
    int second_len = strlen(second);

    if ( ((first_len+2) > dest_len) || ((second_len+2) > dest_len) )
    {
        puts("Possibly not enough space on destination buffer");
        return 0;
    }

    char *first_back = first+first_len;
    char *second_back = second+second_len;

    char sum;
    char carry = 0;

    while ( (first_back > first) || (second_back > second) )
    {
        sum = ((first_back  > first)  ? *(--first_back) : '0')
            + ((second_back > second) ? *(--second_back) : '0')
            + carry - '0';

        carry = sum > '9';
        if ( carry )
        {
            sum -= 10;
        }

        if ( sum > '9' )
        {
            sum = '0';
            carry = 1;
        }

        *(--res) = sum;
    }

    if ( carry )
    {
        *(--res) = '1';
    }

    return res;
}

int main(int argc, char** argv)
{
    char * a =              "555555555555555555555555555555555555555555555555555555555555555";
    char * b = "9999999999999666666666666666666666666666666666666666666666666666666666666666";
    char r[100] = {0};

    char * res = add_string_numbers(a,b,r,sizeof(r));

    printf("%s + %s = %s", a, b, res);

    return (0);
} 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-11-12T13:30:27.947

好吧...您*已经*在添加 char 类型，正如您所指出的那样 49 [10]和 50 [10]应该给您 99 [10]

如果你问如何添加两个字符的 reperserented 值，即`'1' + '2' == 3`你可以减去 base `'0'`：

```
printf("%d",('2'-'0') + ('1'-'0')); 
```

这将 3 作为 int 给出，因为：

```
'0' = ASCII 48<sub>10</sub>
'1' = ASCII 49<sub>10</sub>
'2' = ASCII 50<sub>10</sub> 
```

所以你在做：

```
printf("%d",(50-48) + (49-48)); 
```

如果你想做一个更长的数字，你可以使用[atoi()](http://www.cplusplus.com/reference/clibrary/cstdlib/atoi/)，但此时你必须使用字符串：

```
int * first = "123";
int * second = "100";
printf("%d", atoi(first) + atoi(second));

>> 223 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-11-12T13:37:10.607

事实上，您甚至不需要键入强制转换字符来执行此操作`char`：

```
 #include <stdlib.h>
 #include <stdio.h>
 int main(int argc, char* argv[]) {
     char f1 = '9';
     char f2 = '7';
     int v = (f1 - '0') - (f2 - '0');
     printf("%d\n", v);

     return 0;
 } 
```

将打印`2`

但**请注意**，它不适用于十六进制字符

* * *

## 回答 #7

> 赞同：-1
> 
> 时间：2012-11-12T13:27:29.267

如果你想逐个扫描数字，简单的[atoi](http://www.cplusplus.com/reference/clibrary/cstdlib/atoi/)函数就可以了

* * *

## 回答 #8

> 赞同：-2
> 
> 时间：2012-11-12T13:33:05.907

你可以使用 atoi() 函数

```
#include <stdio.h>
#include <stdlib.h>
void main(){
    char f[] = {"1"};
    char s[] = {"2"};
    int i, k;
    i = atoi(f);
    k = atoi(s);
    printf("%d", i + k);
    getchar();
} 
```

希望我回答了你的问题

# java - Jax-RS 和 Xmlhttp 通信

> ID：13344452
> 
> 赞同：3
> 
> 时间：2012-11-12T13:20:02.467
> 
> 标签：java, javascript, xmlhttprequest, jax-rs

我有一个 Java JAX-RS 中的 REST 服务器和一个 HTML 页面。

我想通过 `xmlhttp`POST 请求从 HTML 页面发送一个 JSON 数组、一个用户名和一个 accountID，方法是将它们全部设为一个大字符串，以便我可以使用该`xmthttp.send()`方法。

HTML发送代码为：

```
function sendData() {   
    var req = createRequest();
    var postUrl = "rest/hello/treeData";

    var dsdata = $("#treeview").data("kendoTreeView").dataSource.data();
    var accID = "onthespot";
    var username = "alex";

    req.open("post", postUrl, true);
    req.setRequestHeader("Content-type","text/plain");

    req.send("data=" + JSON.stringify(dsdata) + "&username=" + username + "&accID=" + accID);

    req.onreadystatechange = function() {
        if (req.readyState != 4) {
            return;
        }
        if (req.status != 200) {
            alert("Error: " + req.status);
            return;
        }
        alert("Sent Data Status: " + req.responseText);
    }
} 
```

服务器 JAX-RS 代码是：

```
@Path("/treeData")
@POST
@Consumes(MediaType.TEXT_PLAIN)
@Produces(MediaType.TEXT_PLAIN)
public String storeTreeData(
        @QueryParam("data") String data,
        @QueryParam("username") String username,
        @QueryParam("accID") String accID) {

        System.out.println("Data= " + data + "\nAccID= " + accID + "\nUsername= " + username);

        return "Done";
} 
```

问题是所有的变量都被打印为 null..`storeTreeData`函数应该找到`data`, `username`,`accID`变量`@QueryParam`并存储它们不是吗？

有人知道这里有什么问题吗？

PS：xmlhttp请求初始化正确并建立连接但参数未在服务器上传递。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-12T13:41:24.563

**你试图做什么：**

[`@QueryParam`](http://jsr311.java.net/nonav/releases/1.1/javax/ws/rs/QueryParam.html)用于从请求的查询中获取参数：

```
http://example.com/some/path?id=foo&name=bar 
```

在此示例中`id`，并且`name`可以作为`@QueryParam`.

但是您正在发送请求*正文中的参数。*

**你应该做什么：**

要从正文中获取参数，您应该[`@FormParam`](http://jsr311.java.net/nonav/releases/1.1/javax/ws/rs/FormParam.html)与 一起使用[`application/x-www-form-urlencoded`](http://jsr311.java.net/nonav/releases/1.1/javax/ws/rs/core/MediaType.html#APPLICATION_FORM_URLENCODED_TYPE)：

```
@Path("/treeData")
@POST
@Consumes(MediaType.APPLICATION_FORM_URLENCODED)
@Produces(MediaType.TEXT_PLAIN)
public Response storeTreeData(
        @FormParam("data") String data,
        @FormParam("username") String username,
        @FormParam("accID") String accID) {

    // Build a text/plain response from the @FormParams.
    StringBuilder sb = new StringBuilder();
    sb.append("data=").append(data)
      .append("; username=").append(username)
      .append("; accId=").append(accID);

    // Return 200 OK with text/plain response body.
    return Response.ok(sb.toString()).build();
} 
```

**编辑：**

您还应该使用

```
req.setRequestHeader("Content-type","application/x-www-form-urlencoded"); 
```

在您的 JavaScript 代码中。

# javascript - 如何使 JavaScript 仅在特定标签之间产生影响

> ID：13344453
> 
> 赞同：0
> 
> 时间：2012-11-12T13:20:03.997
> 
> 标签：javascript

我有这个 JavaScript。在 jquery 移动。我希望它只显示在这个 div 中。现在当我运行它时，它不显示任何样式或 jquery。只显示javascript。

```
 <%@ Page Title="" Language="VB" MasterPageFile="~/MasterPage.master" AutoEventWireup="false"
        CodeFile="phonedirectory.aspx.vb" Inherits="phonedirectory" %>

    <asp:Content ID="Content1" ContentPlaceHolderID="head" runat="Server">
    <meta name="viewport" content="width=device-width, initial-scale=1">
        <div class="timeline" id="lists" data-role="content">
                   </asp:Content>
<asp:Content ID="Content2" ContentPlaceHolderID="ContentPlaceHolder1" runat="Server">
    <div data-role="page">
        <div data-role="header" data-theme="c">
            <center>
                <a href="Default.aspx">
                    <img src="Content/images/logo.png" /></a></center>
        </div>
          <script language="javascript" type="text/javascript">
                        if (window.XMLHttpRequest) {// code for IE7+, Firefox, Chrome, Opera, Safari
                            xmlhttp = new XMLHttpRequest();
                        }
                        else {// code for IE6, IE5
                            xmlhttp = new ActiveXObject("Microsoft.XMLHTTP");
                        }
                        xmlhttp.read
                        xmlhttp.open("GET", "xml.aspx", false);
                        xmlhttp.send();
                        xmlDoc = xmlhttp.responseXML;

                        document.write("<ul id='employee' data-role='listview' data-filter='true'>");
                        var x = xmlDoc.getElementsByTagName("employee");
                        for (i = 0; i < x.length; i++) {
                            document.write("<li class='ui-screen-hidden'>")
                            document.write("<a href='info.aspx?ID=");
                            document.write(x[i].getElementsByTagName("ID")[0].childNodes[0].nodeValue);
                            document.write("'>")
                            document.write(x[i].getElementsByTagName("Name")[0].childNodes[0].nodeValue);
                            document.write("</a></li>");
                        }
                        document.write("</ul>");

                </script>
                </div> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-12T13:23:29.757

Firstly, you don't close the script tag.

Secondly, if you're writing JavaScript in an HTML page, you should use single quotes to avoid clashing with the double quotes used for HTML markup, or escape your double quotes.

# fft - Octave 中的 FFT 挂起

> ID：13344456
> 
> 赞同：1
> 
> 时间：2012-11-12T13:20:09.193
> 
> 标签：fft, octave

我在 Ubuntu ubuntu 11.10 中使用 Octave。

我正在尝试在 Octave 中找到大型数据点的 FFT

当我输入一个大数字（大约 1000 到 1500）的向量时，八度音程正在挂起。

```
 x=[1 2 3 4.....1500] 
```

有没有人面临同样的问题，或者它通常很慢。

# c++ - 在 C/C++ 中拆分输出以进行重定向

> ID：13344458
> 
> 赞同：2
> 
> 时间：2012-11-12T13:20:10.473
> 
> 标签：c++, c, stdout, io-redirection, ostream

假设我有类似的代码

```
#include <iostream>
using namespace std;

int main() {
    cout << "Redirect to file1" << endl;
    cout << "Redirect to file2" << endl;
    return 0;
} 
```

我想将第一个输出重定向到 file1，将第二个输出重定向到 file2。那可能吗？

我认为在 C 中，`fclose(stdout)`重新打开`stdout`可能会有所帮助，但我不确定如何重新打开它或它是否有效。

谢谢

更新：为了什么？

我有一个程序 A，它从用户那里读取输入并生成相应的输出。现在我想检查它是否正确，我有一个程序 B，它为 A 生成输入，以及正确的输出。B 将一次生成一组测试数据。我将进行数千次测试。

在我的机器上，一千倍的`./B > ``mktemp a.XXX```效果比使用`ofstream`. 使用`fstream`数千次，我的硬盘灯疯狂闪烁。但不是在重定向到临时文件时。

更新2：

在 C++ 中，流行的答案似乎`cout`是`cerr`.

除了 C 之外`stderr`，我可以关闭`stdout`并重新打开它吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-12T13:23:45.817

为什么不使用文件流？这样，无论 shell 重定向如何，它很可能都可以工作：

```
#include <fstream>
#include <fstream>
using namespace std;
// opeen files
ofstream file1 ( "file1");
ofstream file2 ( "file2");
//write
file1 << "Redirect to file1" << endl;
file2 << "Redirect to file2" << endl;
//close files
file1.close();
file2.close(); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-12T13:24:31.547

您可以使用 cout 和 cerr。

```
cout << "Redirect to file1" << endl;
cerr << "Redirect to file2" << endl; 
```

cerr 进入标准错误

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-12T13:23:55.113

您始终可以将**标准错误流**用于例如错误消息。

```
#include <iostream>
using namespace std;

int main() {
    cout << "Redirect to file1" << endl;
    cerr << "Redirect to file2" << endl;
} 
```

例如，使用 Windows [cmd.exe] 命令解释器和 Visual C++`cl`编译器：

```
[D:\开发\测试]
> ***type con >streams.cpp*** 
***#include <iostream>*** 
***using namespace std;***

***int main() {*** 
 ***cout << "重定向到 file1" << endl;*** 
 ***cerr << "重定向到文件2" << endl;*** 
***}*** 
***^Z***

[D:\开发\测试]
> ***cl 流.cpp***
流.cpp

[D:\开发\测试]
>***流 1>a.txt 2>b.txt***

[D:\开发\测试]
>***键入 a.txt***
重定向到文件 1

[D:\开发\测试]
>***键入 b.txt***
重定向到文件 2

[D:\开发\测试]
> _

```

* * *

编辑：添加了彩色代码和粗体强调。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-11-12T13:28:13.280

另一种方法是这样使用`cout.rdbuf()`：

```
#include <iostream>
#include <fstream>
using namespace std;

int main () {
    ofstream cfile1("test1.txt");
    ofstream cfile2("test2.txt");

    cout.rdbuf(cfile1.rdbuf());        
    cout << "Redirect to file1" << endl;

    cout.rdbuf(cfile2.rdbuf());        
    cout << "Redirect to file2" << endl; 

    return 0;
} 
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-11-12T13:30:22.707

代码：

```
#include <iostream>
using namespace std;

int main() {
    cout << "Redirect to file1" << endl;
    cerr << "Redirect to file2" << endl;
    return 0;
} 
```

安慰：

```
test > 1.txt 2> 2.txt 
```

1.txt：

```
Redirect to file1 
```

2.txt：

```
Redirect to file2 
```

# jquery - Jquery UI 资产管理与asset_url

> ID：13344459
> 
> 赞同：2
> 
> 时间：2012-11-12T13:20:10.963
> 
> 标签：jquery, user-interface, symfony, assetic

我`asset_url`在使用 jQuery UI 时遇到问题，因为 Symfony2 Assetic 没有找到图像。

```
{% macro css(file) %}
<link rel="stylesheet" href="{{ file }}" type="text/css" />
{% endmacro %}

{% stylesheets
  '@ClientResultBundle/Resources/public/css/ui-lightness/jquery-ui-1.9.1.custom.min.css'
   filter='cssrewrite'
%}

{{ imp.css(asset('bundles/clientresult/css/ui-lightness/jquery-ui-1.9.1.custom.min.css')) }} 
```

当我`asset`只使用时，它似乎可以工作，所以为什么不使用`asset_url`它更优雅，我认为（因为我们可以一次传递多个资源）。

```
<link rel="stylesheet" href="{{ asset(file) }}" type="text/css" /> 
```

提前致谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-12T13:25:11.103

your asset url has to be inside the stylesheets block

```
{% stylesheets filter='cssrewrite'
    '@ClientResultBundle/Resources/public/css/ui-lightness/jquery-ui-1.9.1.custom.min.css'
%}
    <link href="{{ asset_url }}" type="text/css" rel="stylesheet" media="screen" />
{% endstylesheets %} 
```

# matlab - Weka 多层感知器分类器输出到代码

> ID：13344462
> 
> 赞同：3
> 
> 时间：2012-11-12T13:20:17.423
> 
> 标签：matlab, machine-learning, neural-network, weka

我是使用 weka 和神经网络的新手。在将 weka 输出转换为代码级别时，我有点困惑。这是经过训练的多层感知器的 weka 输出。

```
=== Classifier model (full training set) ===

Sigmoid Node 0
    Inputs    Weights
    Threshold    -7.728242643484787
    Node 2    9.643254844595948
    Node 3    -8.919025399127651
Sigmoid Node 1
    Inputs    Weights
    Threshold    7.728242205764689
    Node 2    -9.643254376294452
    Node 3    8.91902493707197
Sigmoid Node 2
    Inputs    Weights
    Threshold    21.0918376938558
    Attrib mean    -19.54425890349859
    Attrib std    36.730369650588976
Sigmoid Node 3
    Inputs    Weights
    Threshold    16.25280971170097
    Attrib mean    -17.677516091162413
    Attrib std    14.141388386397688
Class valid
    Input
    Node 0
Class invalid
    Input
    Node 1 
```

这就是我如何转换为 MATLAB 代码

```
node3 = sdev * 14.141388386397688 +  avg *-17.677516091162413;
node3 = 1 / (1 + exp(-node3));
if(node3 < 16.25280971170097)
    node3 = 0;
end

node2 = sdev * 36.730369650588976 +  avg * -19.54425890349859;
node2 = 1 / (1 + exp(-node2));
if(node2 < 21.0918376938558)
    node2 = 0;
end

node1 = node3 * 8.91902493707197 +  node2 * -9.643254376294452;
node1 = 1 / (1 + exp(-node1));
if(node1 < 7.728242205764689)
    node1 = 0;
end

node0 = node3 * -8.91902493707197 +  node2 * 9.643254376294452;
node0 = 1 / (1 + exp(-node0));
if(node0 < -7.728242205764689)
    node0 = 0;
end 
```

但是我使用这个得到了一些奇怪的输出，任何人都可以帮助我将 weka 生成的输出转换为功能神经网络。

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2012-11-12T13:42:33.407

您目前从 Weka 获得的是一个网络本身（它的权重和属性）。AFAIK，Weka 可以为分类器生成 Java 源代码，列在[这个页面上](http://weka.sourceforge.net/doc.stable/weka/classifiers/Sourcable.html)。我不确定你的分类器是这些类之一。如果它确实支持这一点，那么只需选择`Classify`-> `More options`-> `Output source code`。这是[来自 Weka 邮件列表的一些解释](https://list.scms.waikato.ac.nz/pipermail/wekalist/2011-June/052649.html)。

# vb.net - 检查是否打开了任何对话框

> ID：13344468
> 
> 赞同：0
> 
> 时间：2012-11-12T13:20:42.090
> 
> 标签：vb.net, winforms

有人在这里看到我的错误吗？

我无法识别表单是否在我的应用程序中显示为对话框。

```
Public Class Form1

  Private m As Form2

  Private Sub Timer1_Tick(ByVal sender As Object, ByVal e As EventArgs) Handles Timer1.Tick
    Me.Text = DateTime.Now.ToLongTimeString & " " & IsAnyDialogShown()
  End Sub

  Public Function IsAnyDialogShown() As Boolean
    For Each f As Form In Me.OwnedForms
       If f.Owner Is Me Then
         Return True
       End If
    Next
  End Function

  Private Sub Button1_Click(ByVal sender As Object, ByVal e As EventArgs) Handles Button1.Click
    m = New Form2
    m.ShowDialog()
  End Sub

End Class 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-12T14:10:45.837

您正在寻找的是属性模式。

检查表单的 modal 属性是否为真（即表单用 ShowDialog 显示）

```
For Each f As Form In Me.OwnedForms 
   If  f.Modal=True Then 
     'your code here
   End If
Next 
```

现在对于您的错误（我现在还没有 Visual Studio 尝试它）但是您的 IsAnyDialogShown()，它似乎总是返回 true ：

```
For Each f As Form In Me.OwnedForms ' (So f belongs to Me)
   If f.Owner Is Me Then 'f.Owner is always me because you are seaching in forms that have as owner the Me form
     Return True
   End If
Next 
```

希望我能帮上一点忙。告诉我我是否可以做更多的事情

所以在你的评论之后。
试试这个：

```
 For Each frm as Form In Application.OpenForms
            If frm.Modal=True Then
            'do something 
            'Actually you should have only one form because only one can be in modal state
            end if
        Next 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-12T13:26:34.087

您需要检查表单的 Visible 属性，即布尔值。如果为真，则显示形式，否则隐藏。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-12T13:32:09.440

那只是在做我拥有的表格。与它们是否是对话框形式无关。即它会选择正常的形式。

此外，如果您希望它按预期工作，您应该在传递所有者的地方使用重载。

如在`m.ShowDialog(Me);`

不是我做过的事情，但如果我在 Me.OwnedForms 中所有者不是我，我希望我的钱回来。

# mfc - MFC CString“查找”返回码，微软网站已关闭

> ID：13344470
> 
> 赞同：0
> 
> 时间：2012-11-12T13:21:04.147
> 
> 标签：mfc, cstring

URL [http://msdn.microsoft.com/en-us/library/aa314323(v=vs.60).aspx](http://msdn.microsoft.com/en-us/library/aa314323(v=vs.60).aspx)对我不起作用，所以我无法阅读。

如果有人可以帮助我，当尝试在 CString（例如 int location = obj.find(",")）中找到一个字符时，如果它没有在该行中找到 ","，那么 int-location 会返回什么？-1？
我现在无法构建和测试我的程序来验证它是否返回 -1。

谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-12T13:43:29.833

[Windows CE](http://msdn.microsoft.com/en-us/library/ms928981.aspx)版本的文档表明 -1 确实是搜索失败时的返回值。

# python - Sympy nsolve 函数和多种解决方案

> ID：13344471
> 
> 赞同：5
> 
> 时间：2012-11-12T13:21:07.127
> 
> 标签：python, math, solver, sympy

我在 python 中做了这个小测试程序，看看它是如何`solve`工作`nsolve`的。

```
from sympy import *

theta = Symbol('theta')
phi = Symbol('phi')

def F(theta,phi):
    return sin(theta)*cos(phi)+cos(phi)**2
def G(phi):
    return ((1 + sqrt(3))*sin(phi) - 4*pi*sin(2*phi)*cos(2*phi))
solution1 = solve(F(pi/2,phi),phi)
solution2 = solve(G(phi),phi)
solution3 = nsolve(G(phi),0)
solution4 = nsolve(G(phi),1)
solution5 = nsolve(G(phi),2)
solution6 = nsolve(G(phi),3)
print solution1, solution2, solution3, solution4, solution5, solution6 
```

我得到这个输出：

```
[pi/2, pi] [] 0.0 -0.713274788952698 2.27148961717279 3.14159265358979 
```

第一次调用solve给了我对应函数的两​​个解。但不是第二个。我想知道为什么？`nsolve`似乎可以使用初始测试值，但根据该值，它会给出不同的数值解。`nsolve`有没有办法在一行中获取所有带有或带有另一个函数的数值解的列表？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-11-12T14:31:28.810

> 第一次调用solve给了我对应函数的两​​个解。但不是第二个。我想知道为什么？

通常，您无法*以符号方式求解方程*，并且显然`solve`可以这样做。换句话说：如果`solve`能解出你的方程，就认为自己很幸运，典型的技术应用没有解析解，即无法符号解。

因此，后备选项是从初始点开始以*数值方式求解方程。*`nsolve`在一般情况下，即使存在解决方案，也不能保证会找到解决方案。

> 有没有办法在一行中使用 nsolve 或其他函数获取所有数值解的列表？

一般来说，没有。不过，您可以`nsolve`从一些初始猜测开始，并跟踪找到的解决方案。您可能希望在感兴趣的区间内均匀分布您的初始猜测。这称为**多启动方法**。

# java - Java 小程序没有完全刷新

> ID：13344481
> 
> 赞同：4
> 
> 时间：2012-11-12T13:22:29.697
> 
> 标签：java, applet

我一直在研究一个在 java 小程序中玩的游戏。一切正常，直到您尝试刷新页面。它似乎经常“保留”它迄今为止使用的小程序，并在同一个小程序中重新启动游戏。没有创建新进程，内存使用量猛增（~250mb 而不是~140mb），同样的控制台用于小程序。绘图过程也相当滞后；它通常会在再次绘制之前跳过大约 0.5 秒的帧。

它只是有时会完全刷新小程序；创建了一个新进程（如 Windows 的任务管理器中所示），一个新的控制台打开，它使用更少的内存；它只是从头开始。

当我在重用小程序时遇到问题时，我想强制它在每次刷新时创建新进程。有没有办法做到这一点？或者当它没有完全刷新时我可以以某种方式解决问题吗？

我正在开发的游戏可以在[http://patrickdev.nl/galaxy048/](http://patrickdev.nl/galaxy048/)上看到。运行后，按“f”切换 fps 和内存详细信息。

先感谢您。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-12T15:39:54.063

小程序支持强制它在新 jvm 中运行小程序的参数。这在刷新页面后也有效，这正是我想要的——它从头开始。只需将此参数添加到您的小程序标签：

`<param name="separate_jvm" value="true" />`

更多信息，[请访问 http://www.oracle.com/technetwork/java/javase/plugin2-142482.html#SEPARATE_JVM](http://www.oracle.com/technetwork/java/javase/plugin2-142482.html#SEPARATE_JVM)

# git - 撤消 git push 到 Assembla

> ID：13344483
> 
> 赞同：4
> 
> 时间：2012-11-12T13:22:34.580
> 
> 标签：git, push, undo, assembla

所以 - 今天我想做一件好事并重新排列我的存储库中的文件。提交并推送到我的`Assembla`存储库。

![GIT GUI 中的情况](../Images/0dff1565f76dbdcb74ef7eabdca577ef.png)

由于我没有使用 git 移动命令，所有文件都丢失了历史记录。我意识到自己的错误，并想摆脱不必要的改变，这样我就可以在之后做出正确的举动。我尝试了[这里](https://stackoverflow.com/questions/1270514)显示的方法，但我得到了：

```
$ git push -f origin 49bcfdceb30a1e9cfab0f0e7e39bfa04dc726b78:master
Total 0 (delta 0), reused 0 (delta 0)
remote: error: denying non-fast-forward refs/heads/master (you should pull first)
To git@git.assembla.com:myproject.git
 ! [remote rejected] 49bcfdceb30a1e9cfab0f0e7e39bfa04dc726b78 -> master (non-fast-forward)
error: failed to push some refs to 'git@git.assembla.com:myproject.git' 
```

信息：

```
% 49bcfdceb30a1e9cfab0f0e7e39bfa04dc726b78 is the one tagged 'beforerearrange' 
```

有关如何解决此问题的任何建议？

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2012-11-12T14:52:48.917

当被问到时，我不知道它可能与`Assembla`.

由于这是一次性交易，因此我选择了以下有效的方法：

引用@michael-mior 提到的[链接](http://forum.assembla.com/forums/2-Subversion/topics/3201-force-push-to-git)中 Assembla 的最后一条评论（现在已过时，但您仍然可以在[回程机器中找到它）在 Git-Settings 页面中现在有一个“允许强制推送”选项，所以](http://archive.org/web/)

1.  访问**Assembla.com**
2.  转到您的项目 ->**源代码/Git -> 设置**
3.  选中复选框**“允许 --force push”**
4.  强制推送正确的节点：

    ```
    git push -f origin 49bcfdceb30a1e9cfab0f0e7e39bfa04dc726b78:master 
    ```

5.  清理当地的烂摊子。
6.  返回**Assembla.com**并禁用**“允许 --force push”**

结果：

![在此处输入图像描述](../Images/484902133fcdee700241a37cd2faf714.png)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-12T14:04:37.677

似乎 Assembla 否认强制推动。（[此线程](http://forum.assembla.com/forums/2-Subversion/topics/3201-force-push-to-git)建议您必须联系支持人员。）

因为它只是几个提交，你最好的选择可能只是用来`git revert`依次撤消它们。

# .htaccess - 我如何使用 htaccess Kohana 3.2 应用程序保护文件夹

> ID：13344487
> 
> 赞同：0
> 
> 时间：2012-11-12T13:22:51.273
> 
> 标签：.htaccess, kohana

大家好，我需要一个帮助，我在我的应用程序 Kohana 中使用，并为 imgs、css 和 js 创建了一个名为 media 的根文件夹，所以我想在没有 url 的情况下保护对它的访问以使网站正常运行，是这样做的吗？

**例子：**

*   应用程序文件夹
*   系统文件夹
*   模块文件夹
*   媒体**新文件夹**（我需要保护这个文件夹）
*   索引.php

我在根目录中的文件 .htaccess 是：

```
# Turn on URL rewriting
RewriteEngine On

# Installation directory
RewriteBase /

# Protect hidden files from being viewed
<Files .*>
    Order Deny,Allow
    Deny From All
</Files>

# Protect application and system files from being viewed
RewriteRule ^(?:application|modules|system)\b.* index.php/$0 [L]

# Allow any files or directories that exist to be displayed directly
RewriteCond %{REQUEST_FILENAME} !-f
RewriteCond %{REQUEST_FILENAME} !-d

# Rewrite all other URLs to index.php/URL
RewriteRule .* index.php/$0 [PT] 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-12T16:00:17.150

You are talking about [hotlinking](http://en.wikipedia.org/wiki/Hotlink).

Return 403 Forbidden with .htaccess (assuming example.com is your domain name):

```
RewriteEngine On 
RewriteCond %{HTTP_REFERER} !^http://(www\.)?example\.com/ [NC] 
RewriteCond %{HTTP_REFERER} !^$ 
RewriteRule \.(jpe?g|gif|bmp|png|js|css)$ - [F] 
```

Here is a special generator: [http://www.htaccesstools.com/hotlink-protection/](http://www.htaccesstools.com/hotlink-protection/)

# javascript - Post to Twitter from a web client after @Anywhere is sunsetted

> ID：13344489
> 
> 赞同：2
> 
> 时间：2012-11-12T13:22:57.437
> 
> 标签：javascript, twitter, oauth

My current web app uses the @Anywhere API to allow users to post messages to Twitter(which are formatted and have a hash tag appended to them) Works pretty well with no intervention necessary on the server-side, but it seems Twitter is deprecating the @Anywhere API and their OAuth 1 replacement does not seem to replace much of the functionality of @Anywhere

With the new API, is it possible to post to a user's timeline using a 100% client-side flow like we are currently doing with @Anywhere or Twitter boxes? If so, how can I do it?

For performance and implementation reasons, I would rather not post from the server if at all possible.

# sql - 获取列名

> ID：13344493
> 
> 赞同：0
> 
> 时间：2012-11-12T13:23:12.790
> 
> 标签：sql, sql-server, sql-server-2008, columnname

```
Sr. ID   FName    LName    Mark
1   P1   amar     ranjan   100
2   P2   sameer   kumar    200
3   P1   amar     ranjan   200 
```

在这里，我更新了`Mark`列的第一行。

在对单行的每次更新时，我正在创建具有更新值的新行（参见第 3 行）。是否可以获取表中已更新的列名？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-12T13:30:19.540

由于您使用的是 SQL Server 2008，因此您可以使用该[**`OUTPUT`**](http://msdn.microsoft.com/en-us/library/ms177564.aspx)子句来获取更新的数据。就像是：

```
UPDATE TableName
  SET Sr = 'foo',
      ID    = someid,
      FName = 'bar',
      LName = 'other foo',
      Mark  = someid
OUTPUT
  inserted.FName,
  deleted.FName AS oldFName,
  inserted.FName AS newFName
WHERE SR = 1; -- for mark; 
```

但是，如果您需要将它插入到另一个表`History`中，您可以创建一个`AFTER UPDATE`[**`TRIGGER`**](http://msdn.microsoft.com/en-us/library/ms189799.aspx)通过更新的数据更新历史表的数据，例如：

```
USE DatabaseName;
GO
IF OBJECT_ID ('Sch.TableNameTrigger', 'TR') IS NOT NULL
   DROP TRIGGER Sch.TableNameTrigger;
GO
CREATE TRIGGER Sch.TableNameTrigger
ON FirstTable
AFTER UPDATE
AS 
    INSERT INTO HistoryTable
    SELECT * FROM DELETED
GO 
```

## [SQL 小提琴演示](http://www.sqlfiddle.com/#!3/bb4eb/1)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-12T15:04:42.623

我以 Mahmoud Gamal 的回答和 SQL Fiddle 演示为起点。

您需要的是可能的，但是如果您有权访问更新过程，我建议您在任何将更改直接保存在表中的存储过程中管理更新。

如果你需要一个触发器，这样的东西可以工作，但正如你所看到的，它有它自己的缺点：两个临时表，因为范围和一个游标。

它基本上每次都会为每一列生成一个检查，并将一列的新旧值插入历史表中。

（也建议将 ID 列更改为 Primary Key 和 Identity）

我还做了一个[SQL FIDDLE](http://www.sqlfiddle.com/#!3/ad98b/1)演示

```
CREATE TABLE TableName (Sr INT, ID VARCHAR(10), FName VARCHAR(50),
LName VARCHAR(50), Mark VARCHAR(50));

CREATE TABLE HistoryTable (ID VARCHAR(10), ColumnName VARCHAR(50),
PrevValue VARCHAR(50), NewValue VARCHAR(50));

INSERT INTO TableName VALUES
(1, 'P1', 'amar', 'ranjan' , 100),
(2, 'P2', 'sameer', 'kumar', 200),
(3, 'P1', 'amar', 'ranjan', 200);

CREATE TRIGGER TableNameTrigger
ON TableName
AFTER UPDATE
AS 

SELECT * INTO #Deleted  FROM Deleted 
SELECT * INTO #Inserted FROM Inserted  

DECLARE @ColName varchar(64)
DECLARE columnCursor CURSOR FOR
SELECT COLUMN_NAME
FROM INFORMATION_SCHEMA.COLUMNS
WHERE TABLE_NAME = 'TableName' AND TABLE_SCHEMA='dbo'

OPEN columnCursor

FETCH NEXT FROM columnCursor INTO @ColName

WHILE (@@FETCH_STATUS <> -1)
BEGIN

EXEC(N'INSERT INTO HistoryTable 
     SELECT Deleted.Sr, ''' + @ColName + ''', Deleted.'+ @ColName + ',' + 'Inserted.' + @ColName +' 
     FROM #Deleted Deleted
     INNER JOIN #Inserted Inserted ON Inserted.Sr = Deleted.Sr
     WHERE Deleted.'+ @ColName + ' != Inserted.' + @ColName)

FETCH NEXT FROM columnCursor INTO @ColName

END

DROP TABLE #Deleted 
DROP TABLE #Inserted 

CLOSE columnCursor

DEALLOCATE columnCursor

GO 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-12T13:31:52.310

我想说，创建另一个名为 history 的表并存储更新的内容和时间。

在一个表中制作重复条目是糟糕的设计。另外我不确定您如何处理重复条目？

假设您想打印数据以`P1`了解您的处理方式？

* * *

## 编辑 1

在我的一个网站中，客户想知道谁添加/编辑/删除了什么以及何时。所以我创建了一个名为 HISTORY 的新表，一旦添加/编辑/删除完成，我就会在该表中输入它。为一个用户创建多行是糟糕的设计。

# java - 如何实现与对象的接口。克隆冲突方法

> ID：13344494
> 
> 赞同：5
> 
> 时间：2012-11-12T13:23:18.110
> 
> 标签：java, methods, interface, java-5

我想创建这个[XQPart](http://documentation.progress.com/output/Sonic/8.5.1/Docs8.5/api/esb_api/com/sonicsw/xq/XQPart.html)接口的模拟。问题是它扩展了一个名为[XQCloneable](http://documentation.progress.com/output/Sonic/8.5.1/Docs8.5/api/esb_api/com/sonicsw/xq/XQCloneable.html)的接口，它有一个[克隆](http://documentation.progress.com/output/Sonic/8.5.1/Docs8.5/api/esb_api/com/sonicsw/xq/XQCloneable.html#clone%28%29)方法。

当我在 Eclipse 中创建一个将此集作为接口的新类时，我得到了这个类：

```
public class Part implements XQPart {} 
```

`Part`在说下面有一个红色的错误

> Object.clone() 的 throws 子句中的 CloneNotSupportedException 与 XQCloneable.clone() 不兼容

我可以在这里做什么？有没有办法实现这个接口？

* * *

***注意：****我确实尝试实现该方法，但没有意识到我可以跳过[接受答案](https://stackoverflow.com/a/13344651/39321)`throws`中告知的声明，因此一直收到该错误。*

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-11-12T13:32:39.713

你的类继承`Object.clone`，它被声明为 throw `CloneNotSupportedException`。另一方面，你的类实现了`XQCloneable`，它`clone`没有`throws`子句。如果您只是创建一个空声明`public Object clone() { return null; }`，它将使您的类与接口兼容。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-12T13:25:37.267

如果您正在为单元测试制作模拟对象，则需要实现该方法（即使它是无操作的）。模拟接口将需要空方法来匹配接口的要求。只要确保您正在测试的单元不需要无操作方法即可。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-12T13:33:44.363

正如@Emmerich 所说，发生错误是因为`XQCloneable`扩展了[`Cloneable`](http://docs.oracle.com/javase/6/docs/api/java/lang/Cloneable.html)接口，这是一种有趣的混合物，因为该`clone()`方法实际上并未在其中定义，而是在`Object`类中定义！

语义是应该可以创建实现的类的逐个属性副本，`Cloneable`并且这些类必须`@Override`是`clone()`方法，因为`Object`版本只是抛出`CloneNotSupportedException`.

您的模拟和 uni 测试是否需要创建实现的副本/克隆由`XQPart`您决定/确定 - 在大多数情况下，我不希望如此，只是让方法返回 null 或标识。

干杯，

# ruby - 在 jekyll 上运行砌体

> ID：13344498
> 
> 赞同：0
> 
> 时间：2012-11-12T13:23:31.323
> 
> 标签：ruby, yaml, jekyll

我只是想在 jekyll 上启动砌体，基本设置如 github [https://github.com/desandro/masonry](https://github.com/desandro/masonry)

这是一个 _config.yml 文件：

```
nname: jQueryM
auto: false
permalink: /:categories/:title.html
pygments: true
masonry_js: jquery.masonry.min.js
jquery_js: js/jquery-1.7.1.min.js
exclude: [ minify.sh, notes.mdown ] 
```

但不断收到此错误：

```
localhost:masonry macin$ jekyll --server
Configuration from /Users/macin/Sites/masonry/_config.yml
Building site: /Users/macin/Sites/masonry -> /Users/macin/Sites/masonry/_site
/usr/local/rvm/rubies/ruby-1.9.3-p194/lib/ruby/1.9.1/psych.rb:203:in `parse': (<unknown>): found character that cannot start any token while scanning for the next token at line 10 column 14 (Psych::SyntaxError)
from /usr/local/rvm/rubies/ruby-1.9.3-p194/lib/ruby/1.9.1/psych.rb:203:in `parse_stream'
from /usr/local/rvm/rubies/ruby-1.9.3-p194/lib/ruby/1.9.1/psych.rb:151:in `parse'
from /usr/local/rvm/rubies/ruby-1.9.3-p194/lib/ruby/1.9.1/psych.rb:127:in `load'
from /usr/local/rvm/gems/ruby-1.9.3-p194/gems/jekyll-0.11.2/lib/jekyll/convertible.rb:33:in `read_yaml'
from /usr/local/rvm/gems/ruby-1.9.3-p194/gems/jekyll-0.11.2/lib/jekyll/post.rb:39:in `initialize'
from /usr/local/rvm/gems/ruby-1.9.3-p194/gems/jekyll-0.11.2/lib/jekyll/site.rb:163:in `new'
from /usr/local/rvm/gems/ruby-1.9.3-p194/gems/jekyll-0.11.2/lib/jekyll/site.rb:163:in `block in read_posts'
from /usr/local/rvm/gems/ruby-1.9.3-p194/gems/jekyll-0.11.2/lib/jekyll/site.rb:161:in `each'
from /usr/local/rvm/gems/ruby-1.9.3-p194/gems/jekyll-0.11.2/lib/jekyll/site.rb:161:in `read_posts'
from /usr/local/rvm/gems/ruby-1.9.3-p194/gems/jekyll-0.11.2/lib/jekyll/site.rb:128:in `read_directories'
from /usr/local/rvm/gems/ruby-1.9.3-p194/gems/jekyll-0.11.2/lib/jekyll/site.rb:98:in `read'
from /usr/local/rvm/gems/ruby-1.9.3-p194/gems/jekyll-0.11.2/lib/jekyll/site.rb:38:in `process'
from /usr/local/rvm/gems/ruby-1.9.3-p194/gems/jekyll-0.11.2/bin/jekyll:250:in `<top (required)>'
from /usr/local/rvm/gems/ruby-1.9.3-p194/bin/jekyll:19:in `load'
from /usr/local/rvm/gems/ruby-1.9.3-p194/bin/jekyll:19:in `<main>'
from /usr/local/rvm/gems/ruby-1.9.3-p194/bin/ruby_noexec_wrapper:14:in `eval'
from /usr/local/rvm/gems/ruby-1.9.3-p194/bin/ruby_noexec_wrapper:14:in `<main>' 
```

我不知道我在这里做错了什么。我检查了 _config.yml 是否有其他帖子中建议的任何选项卡，但仍然无法正常工作。谢谢你的帮助

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-12T17:07:06.757

大概在这一行：

```
permalink: /:categories/:title.html 
```

冒号在 YAML 中具有含义（将键与值分开），因此在值中使用它们可能会变得混乱。用双引号将值括起来：

```
permalink: "/:categories/:title.html" 
```

# python - 使用 Qt 和 Python 显示一系列缩略图的正确方法

> ID：13344499
> 
> 赞同：1
> 
> 时间：2012-11-12T13:23:31.440
> 
> 标签：python, qt, pyqt, thumbnails

我正在用 Qt 和 Python 做一个项目。根据一组参数，我从一个文件夹中检索一组图像。

我想在我的 Qt UI 中将结果图像显示为一组缩略图。我想要的输出是这样的：

```
Image1    Image2    Image3
Image4    Image5    ......
......    ......    ImageN 
```

我有一个缩略图而不是每个字符串。我怎样才能实现这样的目标？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-14T09:14:10.507

[QGridLayout](http://www.riverbankcomputing.co.uk/static/Docs/PyQt4/html/qgridlayout.html)似乎是您正在寻找的。引用文档：

> QGridLayout 类在网格中布置小部件。
> 
> QGridLayout 获取可用的空间（通过其父布局或通过 parentWidget()），将其划分为行和列，并将其管理的每个小部件放入正确的单元格中。

# r - 如何使用 R 为数据框的第一侧左列提供标题？

> ID：13344501
> 
> 赞同：0
> 
> 时间：2012-11-12T13:23:41.893
> 
> 标签：r, header, dataframe

这可能是一个很小的问题，但我需要一些帮助。

假设我在**R**中有一个数据框（df），内容如下：

```
 X   Y   Z
Ras 56  89  76
Jyo 76  90  00
Abi 45  88  34
Poo 78  98  54 
```

我希望给第一列一个标题并将其命名为“名称”，以便获得以下输出。

```
Names   X   Y   Z
Ras 56  89  76
Jyo 76  90  00
Abi 45  88  34
Poo 78  98  54 
```

当我检查时，它给了我以下标题：

```
> names(df)[1]
X
> names(df)[2]
Y
> names(df)[3]
Z 
```

所以我尝试了类似的东西，

```
> names(df)[0] <- "Names" 
```

但这并没有做任何事情。谁能帮助我如何使用**R**给出这个“名称”标题？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-12T13:55:44.233

第一个“列”实际上不是列，而是行名。您可以使用创建一个新列`df$names <- rownames(df)`。然后，您可能希望将行名称更改为简单的索引：`rownames(df) <- NULL`. 行名是`data.frame`结构的一部分；所以不可能完全删除它们。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-12T14:17:00.983

如果 df 是您的数据框，那么您将使用：

```
df <- data.frame("names"=rownames(df), df) 
```

# cuda - 在 cuda 中控制一个流多处理器的工作

> ID：13344505
> 
> 赞同：-1
> 
> 时间：2012-11-12T13:23:49.330
> 
> 标签：cuda

我正在使用一个 cuda 程序，我设法将一个工作分配给一个流多处理器。例如，我有作品 A 和 B，我的 GPU 有 2 个 SM（SM0 和 SM1）。有没有办法将工作 A 精确分配给 SM0，将工作 B 分配给 SM1？

你能建议我一些方法吗？

谢谢你的帮助。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-12T13:45:14.837

一种方法是在（比如说）kernelA 中实现工作 A，在 kernelB 中实现工作 B，并在单独的流中作为 1*1 网格启动，因为在 Fermi 和 Kepler GPU 上，这样的内核可以同时运行。1*1 网格启动的原因是，如果您有多个块，那么这些块可能在不同的 SM 上执行，在这种情况下，两个内核不能同时执行（即只有一个内核/SM）

```
cudaStream_t stream1, stream2;
cudaStreamCreate ( &stream1 );
cudaStreamCreate ( &stream2 );
kernelA<<<1, 512, 0, stream1>>>(...);
kernelB<<<1, 512, 0, stream2>>>(...);
... 
```

有关详细信息，请参阅[此 NVIDIA 演示文稿](http://developer.download.nvidia.com/CUDA/training/StreamsAndConcurrencyWebinar.pdf)

# asp.net - Link JQuery click methodto Button click event

> ID：13344512
> 
> 赞同：0
> 
> 时间：2012-11-12T13:24:11.137
> 
> 标签：asp.net

On my web page I have a button, and some JQuery code. The problem is that when I click the button, the JQuery code is not executed. Clicking the button still does a postback, and seems to ignore the JQuery code. Here is my button:

```
<button id="btnCancel" class="button" runat="server" ><span>Cancel</span></button> 
```

Here is my JQuery Code:

```
 $(document).ready(function () {
    $('#btnCancel').click(function () {
        alert('hello');
    });
}); 
```

what I would like to achieve is that when the button is clicked, a message must be displayed showing "Hello". Am I missing something here?

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-12T14:31:38.457

人们在这里所说的将起作用。确保你已经把所有的部分放在一起。

添加 jQuery

```
<head>
 ....
 <script src="//ajax.googleapis.com/ajax/libs/jquery/1.8.0/jquery.min.js" type="text/javascript"></script>
</head> 
```

添加您的代码

```
<button id="btnCancel" class="button" runat="server" ><span>Cancel</span></button>
<script type="text/javascript">
     $(document).ready(function () {
         $('#<%= btnCancel.ClientID %>').click(function () {
             alert('hello');
             return false;
         });
     });
</script> 
```

我添加了一个“return false;” 如果您只想运行 javascript，则可以在其中防止页面回发。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-12T13:40:25.877

由于当页面呈现时，控件的 id 被更改为其他内容，我认为您需要使用

```
$('#<%=btnCancel.ClientID %>').click(); 
```

或者

```
<button id="btnCancel" class='btnCancel' text="cancel"></button>

$(document).ready(function () {
    $('.btnCancel').click(function () {
        alert('hello');
    });
}); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-12T13:28:52.707

脚本没问题。请检查您是否正确加载了 jQuery。使用任何开发工具，例如 firebug。

在标题中添加这样的 JQuery。

在您的页面中添加 jQuery 文件，如下所示，其中 Scripts 是文件夹并且`jQuery.js`是 jQuery 文件。如果您已经将其包含在您的页面中，请使用任何开发人员工具检查它是否正确加载。

```
<header>    
    <script src="Scripts/jQuery.js" type="text/javascript"></script>    
</header>
<body>
   <button id="btnCancel" text="cancel"></button>
</body> 
```

或者从 CDN 添加 jQuery

```
<script src="//ajax.googleapis.com/ajax/libs/jquery/1.8.0/jquery.min.js" type="text/javascript"></script> 
```

编辑：我认为您需要`vsdoc`jQuery 版本的文件。请检查以下链接，它应该可以直接工作。如果你想下载它，只需复制并保存为`jquery-1.8.2-vsdoc.js`文件。

```
http://ajax.aspnetcdn.com/ajax/jQuery/jquery-1.8.2-vsdoc.js 
```

# sql - How to Use If and Else to Check the hour and run a specific query

> ID：13344514
> 
> 赞同：1
> 
> 时间：2012-11-12T13:24:22.213
> 
> 标签：sql, sql-server, if-statement

I'm looking to use either the IF/ELSE or the CASE functions to write a specific code. I'm wanting to have it check a column named DATEMODIFIED and see what hour it is. So basically I'm wanting to grab data from the hours of 1800 to 0600 the next morning. I was going to use the `WHERE (Datemodified BETWEEN DATEADD(hour, - 12, GETDATE()) AND DATEADD(day, 0, GETDATE()))` but that will go back 12 hours when when the query is ran. I don't want it to pull data past 1800 hours. So say its ran at 2200 hours, I want it to look back 4 hours and run a specific query. If it's ran at say 0200 the next morning, I want it to only look back 8 hours. I was messing around with the IF/ELSE and was unsuccessful.

Here is the query I've been using, but like I said, it pulls info way beyond 1800 hours depending on when it's ran. This query is designed only to be running at 6am in the morning, which will grab back 12 hours of data(1800-0600 hrs). Please help if you can! Thanks all!!

```
SELECT Assignment
, Datemodified
, General
, IncNumber
, NextSteps
, PDCRStatus
, RootCause
, Status
, Summary
, Timings
, UserID 
FROM Turnover 
WHERE (Datemodified BETWEEN DATEADD(hour, - 12, GETDATE()) AND DATEADD(day, 0, GETDATE())) 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-12T13:42:19.133

```
Create Function dbo.PreviousDateHour (@RefDate as datetime, @Hour as int) Returns DateTime As
Begin
    Declare @ret datetime = null
    If @Hour Is Not Null And @RefDate Is Not Null
    Begin
        Set @ret = DateAdd(Day, DateDiff(Day, 0, @RefDate), 0) -- truncate to 00:00:00
        Set @ret = DateAdd(Hour, @Hour, @ret) -- Set correct hours
        If @ret > @RefDate
            Set @ret = DateAdd(Day, -1, @ret)
    End

    Return @ret
End 
```

然后使用`dbo.PreviousDateHour(GetDate(), 18)`获取您想要的日期。

示例：[http ://sqlfiddle.com/#!3/b264d/1](http://sqlfiddle.com/#!3/b264d/1)

如果您使用的是 SQL 2012，那么[DateTimeFromParts](http://technet.microsoft.com/en-us/library/hh213233.aspx "DateTimeFromParts")可能会使函数更简单。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-12T14:10:44.183

```
select ... from Turnover
where Datemodified between 
dateadd(day, datediff(day, 0,dateadd(hour, -18, getdate())), '1900-01-01 18:00')
and dateadd(day, datediff(day, 0,dateadd(hour, -18, getdate())), '1900-01-02 06:00') 
```

# javascript - Implementing a Singleton on Javascript

> ID：13344515
> 
> 赞同：0
> 
> 时间：2012-11-12T13:24:23.767
> 
> 标签：javascript

> **Possible Duplicate:**
> [Simplest/Cleanest way to implement singleton in JavaScript?](https://stackoverflow.com/questions/1479319/simplest-cleanest-way-to-implement-singleton-in-javascript)

Here is a code snippest that tries to implement a singleton object.

```
Game.Score = (

    function () {
        ....
        var currentScorePolicy = {
            onBrickHitCorrectBasket: function () { alert("defaultScorePolicy::onBrickHitCorrectBasket called"); },
            onBrickHitWrongBasket: function () { },
            onBrickMissAllBaskets: function () { }
        };
        ...
        return {
             ....
             applyScorePolicyWithBonusEnabled: function (scorePerQuestion, maxBonusFactor) {
                currentScorePolicy = {
                    onBrickHitCorrectBasket: function () {
                       // alert("applyScorePolicyWithBonusEnabled::onBrickHitCorrectBasket called");
                        raise();
                        enlargeBonus();

                    },
                    onBrickHitWrongBasket: function () {
                        reduce();
                        resetBonus();
                    },
                    onBrickMissAllBaskets: function () { }
                };

               // alert("applyScorePolicyWithBonusEnabled called");
                that.currentScorePolicy.onBrickHitCorrectBasket();
            },

            applyScorePolicyWithBonusDisabled: function (scorePerQuestion) {
                currentScorePolicy = {
                    onBrickHitCorrectBasket: function () {
                        raise(scorePerQuestion); 
                    },
                    onBrickHitWrongBasket: function () {
                        reduce(scorePerQuestion);
                    },
                    onBrickMissAllBaskets: function () { }
                };
            },

            onBrickHitCorrectBasket: currentScorePolicy.onBrickHitCorrectBasket,
            onBrickHitWrongBasket: currentScorePolicy.onBrickHitWrongBasket,
            onBrickMissAllBaskets: currentScorePolicy.onBrickMissAllBaskets

        }

    })(); 
```

It's a score object for my game when the scoring policy may change during a game. The Score object expose two methods: `applyScorePolicyWithBonusEnabled` and `applyScorePolicyWithBonusDisabled`, thier goal is to alter the currentScorePolicy field.

Now, when I start my app I initialize Score and call `applyScorePolicyWithBonusEnabled`. Later on I call Score.onBrickHitCorrectBasket expecting that `ScorePolicyWithBonus.onBrickHitCorrectBasket` will execute, but in fact what is running is the original stub `currentScorePolicy.onBrickHitCorrectBasket` is called. I can tell by the alerts calls I planted there.

What's wrong? why does the call `applyScorePolicyWithBonusEnabled()` did not assigned the new object to `currentScorePolicy`?

# c - How to do proper initialization and allocation of the composite struct?

> ID：13344517
> 
> 赞同：4
> 
> 时间：2012-11-12T13:24:28.897
> 
> 标签：c

I need to create and implement usage of the struct that contains an array inside it. How to do proper initialization and allocation of the struct and array? Here's my current implementation that seems to work. However, not sure is it proper way and where is the struct allocated (on stack or on heap memory). IMHO a call to malloc makes to store an array on heap, however not sure about remaining struct members. Here are my structs:

```
typedef struct {

  uint8_t objectSize;
  double objectDepth; 

} ObjectData;

typedef struct {

  ObjectData *objectList;
  double startMark;
  double endMark;

} MyDataPacket; 
```

Here is the function that fills and returns the struct:

```
void getMyPacket(MyDataPacket *myDataPacket, uint8_t objectNum)
{
  myDataPacket->startMark = 10.0; 
  myDataPacket->endMark = 60.0; 
  myDataPacket->objectList = malloc(objectNum * sizeof(MyDataPacket));

  uint8_t x;
  for (x = 0; x < objectNum; x++)
  { 
    myDataPacket->objectList[x].objectSize = x; // just test values
    myDataPacket->objectList[x].objectDepth = x; // just test values
  }
} 
```

Here's function calling part:

```
uint8_t objectNum = 10;
MyDataPacket myDataPacket;
getMyPacket(&myDataPacket, objectNum); 
```

Does the struct data is mixed and placed both on stack and heap, or everything resides at one place?

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-12T13:34:17.963

如果`myDataPacket`是在堆上分配的，那么它将全部在堆上：

```
MyDataPacket *myDataPacket = malloc(sizeof(MyDataPacket)); 
```

如果`myDataPacket`是一个自动变量，它将*全部*存在于堆栈中，包括`objectList`指针本身，*它指向*的内存，但是，将在堆上：

```
MyDataPacket myDataPacket; //this is all on the stack
myDataPacket->objectList = malloc(...) //memory allocated here is on the heap 
```

如果是全局变量`zero`，就*看*是否初始化了，是否`.bss`初始化`data`为像往常一样堆。

如果您担心效率，请检查这个 SO 问题：

[哪个更快：堆栈分配或堆分配](https://stackoverflow.com/questions/161053/c-which-is-faster-stack-allocation-or-heap-allocation)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-12T13:27:59.100

回答你的问题：如果`myDataPacket`是函数内部的局部变量，那么它将被放置在堆栈上，而`myDataPacket.objectList`将被放置在堆上（并且也需要被释放）。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-12T14:11:04.943

改变

```
myDataPacket->objectList = malloc(objectNum * sizeof(MyDataPacket)); 
```

至

```
myDataPacket->objectList = malloc(objectNum * sizeof(ObjectData)); 
```

那应该可以解决您的问题。您当前正在分配一些 MyDataPackets 而不是 ObjectData。

# c# - Generic Type Parameter constraints in C# .NET

> ID：13344518
> 
> 赞同：9
> 
> 时间：2012-11-12T13:24:30.310
> 
> 标签：c#, .net, generics, constraints

Consider the following Generic class:

```
public class Custom<T> where T : string
{
} 
```

This produces the following error:

> 'string' is not a valid constraint. A type used as a constraint must be an interface, a non-sealed class or a type parameter.

Is there another way to constrain which types my generic class can use?

Also, can I constrain to multiple types?

E.G.

> T can only be string, int or byte

* * *

## 回答 #1

> 赞同：19
> 
> 时间：2012-11-12T13:28:14.767

```
public class Custom<T> where T : string 
```

是不允许的，因为**唯一** `T`满足的是：`string`( `string`is `sealed`) - 使它作为泛型毫无意义。

> 另外，我可以限制为多种类型吗？

否 - 除非您在运行时通过反射而不是在约束中执行此操作（静态构造函数是执行此操作的一种方法 - 如果使用不正确则引发异常）

> `T can only be string, int or byte`

您*可能会*使用类似的东西`IEquatable<T>`，但这并没有像您想要的那样限制它，所以最终：不。

您*可以*做的是通过重载工厂访问它：

```
public abstract class Custom
{
    public static Custom Create(int value)
    { return new CustomImpl<int>(value); }
    public static Custom Create(byte value)
    { return new CustomImpl<byte>(value); }
    public static Custom Create(string value)
    { return new CustomImpl<string>(value); }
    private class CustomImpl<T> : Custom
    {
        public CustomImpl(T val) { /*...*/ }
    }
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-12T13:31:48.427

根据我的经验，我会说我理解您为什么想要拥有，`string`并且`int`......因为通用基类的**ID**类型为 string 或 int

但可以肯定的是，这是不可能的。正如这个 msdn 描述所说：http: [//msdn.microsoft.com/en-us/library/d5x73970%28v=vs.80%29.aspx](http://msdn.microsoft.com/en-us/library/d5x73970%28v=vs.80%29.aspx)

我们可以有一个约束`class`(reference object like string) 或`struct`(ValueType like int) 所以混合 string 和 int 是不可能的

注意：字符串的错误是有意义的，因为字符串是密封的，所以它不必是通用的 -**字符串 ID**是我们需要的

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-12T13:45:02.980

在查看了这里的答案并在自己身上玩了一点之后，我提出了以下实现，它在运行时而不是编译时检查约束。

```
// This example takes 3 parameters...
public class GenericConstraint<T1, T2, T3>
{
    public GenericConstraint(Type type)
    {
        if (!(type is T1) || !(type is T2) || !(type is T3))
        {
            throw new Exception("This is not a supported type");
        }
    }
} 
```

现在我从我的自定义类继承了这个......

```
public class Custom<T> : GenericConstraint<string, int, byte>
{
    public Custom() : base(typeof(T))
    {
    }
} 
```

这现在会引发错误：

```
Custom<long> item = new Custom<long>(); 
```

这不！

```
Custom<byte> item2 = new Custom<byte>(); 
```

正如 Marc Gravell 所说，这不是对继承或泛型的良好使用。从逻辑上考虑，通过继承 GenericConstraint，这只是将继承限制在 this 上，并且也没有正确使用类型层次结构。就泛型的使用而言，这实际上是毫无意义的！

因此，我有另一种解决方案，它作为一种辅助方法来在运行时约束类型。这将对象从继承中释放出来，因此对类型层次结构没有影响。

```
public static void ConstrainParameterType(Type parameterType, GenericConstraint constraintType, params Type[] allowedTypes)
        {
            if (constraintType == GenericConstraint.ExactType)
            {
                if (!allowedTypes.Contains<Type>(parameterType))
                {
                    throw new Exception("A runtime constraint disallows use of type " + parameterType.Name + " with this parameter.");
                }
            }
            else
            {
                foreach (Type constraint in allowedTypes)
                {
                    if (!constraint.IsAssignableFrom(parameterType))
                    {
                        throw new Exception("A runtime constraint disallows use of type " + parameterType.Name + " with this parameter.");
                    }
                }
            }
        }

public enum GenericConstraint
    {
        /// <summary>
        /// The type must be exact.
        /// </summary>
        ExactType,

        /// <summary>
        /// The type must be assignable.
        /// </summary>
        AssignableType
    } 
```

这现在允许对通用对象进行多种类型约束，即使类型是密封的等等。

> “公共类 Custom where T : string ... 是不允许的，因为唯一符合条件的 T 是： string （字符串是密封的）——使它作为泛型毫无意义。”

是的，这是没有意义的，但是在某些情况下，您可能希望限制一个对象以允许，例如；字符串、StringBuilder 和 SecureString。虽然这不提供编译时约束，但它确实提供了运行时约束，以及可以在约束中使用哪些类型的一些灵活性。

# html - SharePoint 2010 how to display a picture within a picture

> ID：13344520
> 
> 赞同：0
> 
> 时间：2012-11-12T13:24:33.510
> 
> 标签：html, sharepoint, sharepoint-2010

I have a map of the UK that I have broken down by region. What I want to do is click on an area of the map which will then open a window to a zoomed in picture of the region selected. Clicking on locations will give me details.

I believe that I should use Iframes but have never done this. I do not have access to SharePoint Designer 2010 just 2007\. I also do not have access to Google Maps etc.

I know how to use the hot spots and have already created hot spots in my regional maps, I just need to know how to combine the map within the map. I also need to know how to load it into SharePoint.

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-12T16:53:33.967

将图像放在内容编辑器 Web 部件中。

然后在html中创建一个图像映射

[http://www.javascriptkit.com/howto/imagemap.shtml](http://www.javascriptkit.com/howto/imagemap.shtml)

应该做的伎俩。然后点击区域再次构建图像​​地图并使用javascript显示信息

# android - out of memory exception during fast scrolling of listview

> ID：13344521
> 
> 赞同：1
> 
> 时间：2012-11-12T13:24:35.400
> 
> 标签：android

I am using listview to display facebook profile picture,name,message,postedpicture.

I used scrollviewListener to load the next page data.But when I scrolled fastly,without waiting to load the data completely I am getting java.lang.OutOfMemoryError.bitmap size exceeds VM budget.

I am getting this error at my ImageLoader class where the bitmap is returned.Did I need to change anything to deallocate memory.

The most important is I am calling another webservice when listview scroll reaches the bottom of screen.

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-12T13:30:07.357

您应该查看Android 文档站点的[高效显示位图。](http://developer.android.com/training/displaying-bitmaps/index.html)

他们专门用了几页来解决这个确切的问题：`java.lang.OutofMemoryError: bitmap size exceeds VM budget.`

# r - Get vector from vector of vectors

> ID：13344524
> 
> 赞同：1
> 
> 时间：2012-11-12T13:24:41.340
> 
> 标签：r

When I have a vector of vectors in R, how do I select a vector that contains one element from each outer vector?

For example, given this data:

```
> data<-c("1,2","3,4","5,6")
> data<-strsplit(data,",")
> data
[[1]]
[1] "1" "2"

[[2]]
[1] "3" "4"

[[3]]
[1] "5" "6" 
```

How do I get a vector containing (1,3,5) and nothing else?

Thanks!

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-11-12T13:29:20.153

一种方法是使用[`sapply`](http://stat.ethz.ch/R-manual/R-patched/library/base/html/lapply.html)：

```
> sapply( data, "[[", 1 )
[1] "1" "3" "5" 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-12T16:52:41.740

您可以使用以下递归函数，即使您的列表深度超过 2 级，该函数也可以使用

```
getElemsR <- function(dat, Index, Lev=2)  {
  if ((Lev <- (Lev - 1)) > 1)  {
    inds <- seq(length(dat[[1]]))
    dat <- unlist(lapply(inds, function(i) getElemsR(dat, i, Lev)), recursive=F)
  } 
  sapply(dat, "[[", Index, USE.NAMES=T, simplify=F)
}

# get the 2nd element of every 2nd-Level list
getElemsR(myData, 3)  # Lev=2 by default

# get the 2nd element of every 3rd-Level list
getElemsR(myData, 2, 3)

# if needed as a vector:
unlist(getElemsR(myData, 2, 3)) 
```

* * *

或者，如果您的列表只有两层深，您可以使用简单的 sapply 正如@Romain 指出的那样。您可以将其包装在一个函数中

```
getElems <- function (dat, Index)  {
  sapply(dat, "[[", Index)
}

# get the 2nd element of every 2nd-level list
getElems(data1, 2) 
```

* * *

样本数据

```
data1 <- lapply(1:3, paste0, c("A","B"))
data2 <- lapply(4:6, paste0, c("A","B"))
names(data1) <- names(data2) <- c("_sub1", "_sub2", "_sub3")
myData <- list(Lev1A=data1, Lev1B=data2) 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-12T15:34:01.317

这将返回一个数字向量，因为 read.table 会将其测试应用于列：

```
> read.table(text=data, sep=",")$V1
[1] 1 3 5 
```

为向量使用名称“数据”可能是不明智的，因为它也是基本函数的名称。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-11-12T18:27:41.303

由于您的示例使用`strsplit`我假设这是您首先获取数据集的方式？如果是这样，使用正则表达式也可以，并且可能会稍微快一些。例如

```
data <- c("1,2","3,4","5,6")

# Remove everything after ,:
gsub(",.*","",data)

# Select first number:
regmatches(data,regexpr("\\d+",data)) 
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-11-12T16:11:44.823

另一种解决方案：

```
unlist(data)[c(TRUE, rep(FALSE, length(data[[1]]) - 1))]

[1] "1" "3" "5" 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-11-12T15:06:34.063

或这个 ：-） ：

```
foo<- unlist(data)
matrix(foo,nrow=length(data),byrow=TRUE)[,1] 

[1] "1" "3" "5" 
```

# javascript - Editing Rows Dynamically Using Javascript

> ID：13344527
> 
> 赞同：0
> 
> 时间：2012-11-12T13:25:08.177
> 
> 标签：javascript, dynamic, edit

This code is having two containers, one on right and other on the left. The left one contains the form like structure where a user enter details and presses "Save" button and the details gets saved on the right container which has "Excel-like" format...

The right container can contain many rows and limited number of columns... And every row has their respective "Edit/Delete" buttons to update or delete it..

The problem is I want to send the "row's" details to the left container form to edit it again and send it back to the right side container....

What should I do with the button here?? Or is there any other way out? I'm smashing my head on the desk because of this code from last 8 hours..

Any help would be greatly appreciated.

```
var cell9 = row.insertCell(7);
        var element2 = document.createElement("input");
        element2.type = "button";
        element2.value = "Edit";
        element2.onclick = ? 
```

Please somebody help me...

```
<!DOCTYPE html PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<html>
<head>
<meta http-equiv="Content-Type" content="text/html; charset=ISO-8859-1">
<title>Ass6</title>

<script type="text/javascript">

function addRow(tableID) {

    if("" == document.getElementById("crw").value) {     
        var table = document.getElementById(tableID);
        var rowCount = table.rows.length;
        var row = table.insertRow(rowCount);
        alert(rowCount);
        var cell1 = row.insertCell(0);

        var element1 = document.createElement("input");
        element1.type = "checkbox";
        cell1.appendChild(element1);

        var cell3 = row.insertCell(1);
        cell3.innerHTML = document.ass6.e1.value; 

        var cell4 = row.insertCell(2);
        cell4.innerHTML = document.ass6.en1.value;

        var cell5 = row.insertCell(3);
        cell5.innerHTML = document.ass6.ed1.value;

        var cell6 = row.insertCell(4);
        cell6.innerHTML = document.ass6.et1.value;

        var cell7 = row.insertCell(5);
        cell7.innerHTML = document.ass6.ep1.value;

        if(document.getElementById("eg1").checked) {
                var cell8 = row.insertCell(6);
                cell8.innerHTML = document.ass6.eg1.value;
            }
            if(document.getElementById("eg2").checked) {
                var cell8 = row.insertCell(6);
                cell8.innerHTML = document.ass6.eg2.value;
            }
            document.getElementsByTagName("INPUT")[0].setAttribute("onclick",""); 
        var cell9 = row.insertCell(7);
        var element2 = document.createElement("input");
        element2.type = "button";
        element2.value = "Edit";
        element2.onclick = 

        }
        cell9.appendChild(element2);

        var element3 = document.createElement("input");
        element3.type = "button";
        element3.value = "Delete";
        cell9.appendChild(element3);

    //Clearing the form
    document.ass6.e1.value = "";
    document.ass6.en1.value = "";
    document.ass6.ed1.value = "";
    document.ass6.et1.value = "";
    document.ass6.ep1.value = "";
}
    //To update
    if(document.getElementById("crw").value) {
        var table = document.getElementById(tableID);
        var rowCount = table.rows.length;

        var i = document.getElementById("crw").value;
        alert(i);

                  table.rows[i].cells["1"].innerHTML = document.getElementById("e1").value;
                  table.rows[i].cells["2"].innerHTML = document.getElementById("en1").value;
                  table.rows[i].cells["3"].innerHTML = document.getElementById("ed1").value;
                  table.rows[i].cells["4"].innerHTML = document.getElementById("et1").value;
                  table.rows[i].cells["5"].innerHTML = document.getElementById("ep1").value;

                 document.getElementById("crw").value = i;

                //Clearing the form
                    document.ass6.e1.value = "";
                    document.ass6.en1.value = "";
                    document.ass6.ed1.value = "";
                    document.ass6.et1.value = "";
                    document.ass6.ep1.value = "";
}    
}

//Editing the row
function edt(tableID) {
    try {
        var table = document.getElementById(tableID);
        var rowCount = table.rows.length;

        for(var i=1; i<rowCount; i++) {
             var row = table.rows[i];
             var chkbox = row.cells[0].childNodes[0];
             if(null != chkbox && true == chkbox.checked) {
                 document.getElementById("e1").value = table.rows[i].cells["1"].innerHTML;
                 document.getElementById("en1").value = table.rows[i].cells["2"].innerHTML;
                 document.getElementById("ed1").value = table.rows[i].cells["3"].innerHTML;
                 document.getElementById("et1").value = table.rows[i].cells["4"].innerHTML;
                 document.getElementById("ep1").value = table.rows[i].cells["5"].innerHTML;

                 document.getElementById("crw").value = i;

             }
        }
        }catch(e) {
            alert(e);
        }
}

//Deleting the row
function deleteRow(tableID) {
    try {
    var table = document.getElementById(tableID);
    var rowCount = table.rows.length;

    for(var i=0; i<rowCount; i++) {
        var row = table.rows[i];
        var chkbox = row.cells[0].childNodes[0];
        if(null != chkbox && true == chkbox.checked) {
            table.deleteRow(i);
            rowCount--;
            i--;
        }
}
    }catch(e) {
        alert(e);
    }
}

</script>
</head>
<body>
    <div style="margin-top: 200px; margin-left: 150px; width: 300px; background-color: lightblue;">
        <form name="ass6">
            <table>
                <tr>
                    <td>EmployeeId</td> <td><input type="text" id="e1"></td>
                </tr>
                <tr>
                    <td>Employee Name</td> <td><input type="text" id="en1"></td>
                </tr>
                <tr>
                    <td>Designation</td> <td><input type="text" id="ed1"></td>
                </tr>
                <tr>
                    <td>Team</td> <td><input type="text" id="et1"></td>
                </tr>
                <tr>
                    <td>Phone no.</td> <td><input type="text" id="ep1"></td>
                </tr>
                <tr>
                    <td>Gender</td> <td>Male <input type="radio" id="eg1" value="Male" name="gen"> Female<input type="radio" id="eg2" value="Female" name="gen"></td>
                </tr>
                <tr>
                    <td></td> <td></td>
                </tr>
                <tr>
                    <td></td> <td></td>
                </tr>
            </table>
        </form>
        <INPUT type="button" value="Add Row" onclick="addRow('dataTable')" />
    </div>

 <div style="margin-top: -200px; margin-left: 500px; width: 480px; background-color: lightgreen;"> 
 <TABLE id="dataTable" width="350px" border="1">
        <TR>
            <td></td>
            <td>ID</td>
            <td>Name</td>
            <td>Designation</td>
            <td>Team</td>
            <td>Phone no.</td>
            <td>Gender</td>
            <td>Action</td>
        </TR>
    </TABLE>

    <INPUT type="button" value="Delete Row" onclick="deleteRow('dataTable')" />
  <INPUT type="button" value="Edit" onclick="edt('dataTable')" />
  <input type="hidden" id="crw">
 </div>   
</body>
</html> 
```

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2014-04-28T04:24:09.943

这正是您想要的，每一行都有一个编辑和删除功能[http://www.amitpatil.me/add-edit-delete-rows-dynamically-using-jquery-php/](http://www.amitpatil.me/add-edit-delete-rows-dynamically-using-jquery-php/)

# css - CSS3 transform: rotateY and keyframe animation does not work in Chrome

> ID：13344528
> 
> 赞同：0
> 
> 时间：2012-11-12T13:25:08.890
> 
> 标签：css, transform, css-animations

Please consider this jsFiddle: [http://jsfiddle.net/K6pmH/3/](http://jsfiddle.net/K6pmH/3/)

Clicking on the blue box flips it using `@keyframes` animations and the flip side gets visible. After ~3s it is turned back into its initial position.

This works for me on Firefox (16.0.2) and Safari (6.0 (7536.25)) but fails on Chrome (Chromium 22.0.1229.94 (161065)). I'm on a Mac (10.7.4).

On Chrome, only the flip side is visible (with mirrored text). Nothing happens on click.

Any ideas what I'm missing?

# python - 如何清理与 send_file 一起使用的临时文件？

> ID：13344538
> 
> 赞同：20
> 
> 时间：2012-11-12T13:25:54.080
> 
> 标签：python, flask, web-frameworks

我目前正在开发一个服务器端 json 接口，其中有几个临时文件在请求期间进行操作。

我当前在请求结束时清理这些文件的解决方案如下所示：

```
@app.route("/method",methods=['POST'])
def api_entry():
    with ObjectThatCreatesTemporaryFiles() as object:
        object.createTemporaryFiles()
        return "blabalbal" 
```

在这种情况下，清理在 object.__exit__() 中进行

但是在某些情况下，我需要向客户端返回一个临时文件，在这种情况下，代码如下所示：

```
@app.route("/method",methods=['POST'])
def api_entry():
    with ObjectThatCreatesTemporaryFiles() as object:
        object.createTemporaryFiles()
        return send_file(object.somePath) 
```

这目前不起作用，因为当我进行清理时，烧瓶正在读取文件并将其发送给客户端。¨ 我该如何解决这个问题？

编辑：我忘了提到这些文件位于临时目录中。

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2015-08-21T03:44:18.297

我使用的方法是在响应完成后使用弱引用删除文件。

```
import shutil
import tempfile
import weakref

class FileRemover(object):
    def __init__(self):
        self.weak_references = dict()  # weak_ref -> filepath to remove

    def cleanup_once_done(self, response, filepath):
        wr = weakref.ref(response, self._do_cleanup)
        self.weak_references[wr] = filepath

    def _do_cleanup(self, wr):
        filepath = self.weak_references[wr]
        print('Deleting %s' % filepath)
        shutil.rmtree(filepath, ignore_errors=True)

file_remover = FileRemover() 
```

在烧瓶电话中，我有：

```
@app.route('/method')
def get_some_data_as_a_file():
    tempdir = tempfile.mkdtemp()
    filepath = make_the_data(dir_to_put_file_in=tempdir)
    resp = send_file(filepath)
    file_remover.cleanup_once_done(resp, tempdir)
    return resp 
```

这是相当普遍的，并且作为一种方法可以在我使用的三个不同的 python web 框架中工作。

* * *

## 回答 #2

> 赞同：11
> 
> 时间：2012-11-12T14:12:09.213

如果您使用的是 Flask 0.9 或更高版本，您可以使用[`after_this_request`](http://flask.pocoo.org/docs/api/#flask.after_this_request)装饰器：

```
@app.route("/method",methods=['POST'])
def api_entry():
    tempcreator = ObjectThatCreatesTemporaryFiles():
    tempcreator.createTemporaryFiles()

    @after_this_request
    def cleanup(response):
        tempcreator.__exit__()
        return response

    return send_file(tempcreator.somePath) 
```

**编辑**

由于这不起作用，您可以尝试[`cStringIO`](http://docs.python.org/2/library/stringio.html#module-cStringIO)改用（这假设您的文件足够小以适合内存）：

```
@app.route("/method", methods=["POST"])
def api_entry():
    file_data = dataObject.createFileData()
    # Simplest `createFileData` method:  
    # return cStringIO.StringIO("some\ndata")
    return send_file(file_data,
                        as_attachment=True,
                        mimetype="text/plain",
                        attachment_filename="somefile.txt") 
```

或者，您可以像现在一样创建临时文件，但*不*依赖于您的应用程序来删除它们。相反，设置一个 cron 作业（或计划任务，如果您在 Windows 上运行）每隔一小时左右运行一次，并删除半小时前创建的临时目录中的文件。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2014-04-23T04:07:30.870

有点晚了，但这是我使用[madjar 的](https://stackoverflow.com/users/981855/madjar)建议所做的（以防其他人遇到此问题）。这是我使用的一个小辅助函数（它以 PyExcelerate Workbook 对象作为参数），您可以根据自己的情况进行调整。只需更改创建/构建 tempfile.TemporaryFile 的方式即可！在 Windows 8.1 和 Ubuntu 12.04 上测试。

```
def xlsx_to_response(wb, filename):
    f = tempfile.TemporaryFile()
    wb._save(f)
    f.seek(0)
    response = send_file(f, as_attachment=True, attachment_filename=filename,
                         add_etags=False)

    f.seek(0, os.SEEK_END)
    size = f.tell()
    f.seek(0)
    response.headers.extend({
        'Content-Length': size,
        'Cache-Control': 'no-cache'
    })
    return response 
```

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2012-11-12T14:15:10.953

我有两个解决方案。

* * *

第一个解决方案是在`__exit__`方法中删除文件，但不关闭它。这样，文件对象仍然可以访问，您可以将其传递给`send_file`.

这仅在您不使用时才有效`X-Sendfile`，因为它使用文件名。

* * *

第二种解决方案是依赖垃圾收集器。您可以传递给`send_file`将在删除时清理文件的文件对象（`__del__`方法）。这样，只有在从 python 中删除文件对象时才会删除文件。[`TemporaryFile`](http://docs.python.org/2/library/tempfile.html#tempfile.TemporaryFile)如果你还没有，你可以使用它。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2021-07-01T09:18:36.787

## Windows / Linux / Mac 兼容解决方案

我尝试过weakrefs、flask 内置装饰器，但没有任何效果。

唯一适用于每个系统的想法是使用 io.BytesIO 在内存中创建一个临时文件

```
import os
import io
import tempfile
from multiprocessing import Process

import flask

def background_job(callback):
    task = Process(target=callback())
    task.start()

def send_temp_file(file_path: str, temp_dir: tempfile.TemporaryDirectory, remove_dir_after_send=True):
    with open(file_path, "rb") as f:
        content = io.BytesIO(f.read())
    response = flask.send_file(content,
                               as_attachment=True,
                               attachment_filename=os.path.split(file_path)[0])
    if remove_dir_after_send:
        background_job(temp_dir.cleanup)
    return response

app = flask.Flask(__name__)

@app.route("/serve_file/", methods=["GET"])
def serve_file():
    temp_dir = tempfile.TemporaryDirectory()
    file_path = os.path.join(temp_dir.name, "test.txt")
    with open(file_path, "w") as f:
        f.write("Hello World!")

    return send_temp_file(file_path, temp_dir)

if __name__ == "__main__":
    app.run(port=1337) 
```

# iphone - NSManagedObject 自定义必需规则？

> ID：13344548
> 
> 赞同：1
> 
> 时间：2012-11-12T13:26:38.220
> 
> 标签：iphone, objective-c, core-data, nsmanagedobject

在我的应用程序中，我对 NSManagedObject 的属性有自定义要求。

所以我的实体是`Person`并且`Person`具有属性，`firstName`并且`lastName`.

我通常不需要在我的数据模型中勾选所需的复选框，而是只需要一个。因此，如果 a`firstName`存在，`lastName`则不需要，反之亦然。

我怎样才能做到这一点？谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-12T14:00:05.170

您可以通过在托管对象子类中实现`validateForInsert:`和来做到这一点。`validateForUpdate:`

这在“核心数据编程指南”中[的属性间验证](https://developer.apple.com/library/mac/documentation/Cocoa/Conceptual/CoreData/ObjectValidation.html#//apple_ref/doc/uid/TP40001075-CH20-SW1)中记录（带有示例） 。

# c# - Thread.start 紧随其后的是 Thread.join - 有用吗？

> ID：13344549
> 
> 赞同：6
> 
> 时间：2012-11-12T13:26:40.203
> 
> 标签：c#, multithreading

在别人写的一个项目中，我在很多地方都遇到过这样的代码，我仍然不明白为什么有人会写这样的代码。

考虑下面的代码（这段代码在 C# 中，但我认为它也适用于许多语言——可能只是语法不同，或者类名和执行方式不同——你明白了。）：

```
Thread thread;

thread = new Thread(new ThreadStart(method));
thread.Start();
thread.Join(); 
```

据我了解，这段代码意味着启动一个线程并运行`method`，然后这个线程等待新启动的线程完成，而不做任何其他事情。

如果是这样，为什么我不直接调用该方法，即

```
method() 
```

**谁能向我解释我的理解是否正确？第一个代码片段在功能上与第二个相同吗？**

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-11-12T13:35:01.087

*通常*，你是对的，这不是一件很有用的事情。

但有时，您可能希望操作在单独的线程上运行，因为它修改或依赖于某些每个线程的状态。

该函数可能正在处理线程本地数据，或者它可能会调用本机 COM 代码，并且 COM 的线程单元是在每个线程的基础上初始化的，因此为了避免这受到调用代码更改的影响，您可以只想分拆一个新线程来调用该函数。

当然，在这种情况下，一个小的代码注释来*解释*为什么要做一些看起来毫无用处的事情，可能是个好主意。;)

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-11-12T13:36:44.493

从功能上讲，两段代码是相同的。线程案例只是将调用委托给高价。但是存在一些有用的情况：

*   您的线程有另一个安全上下文，但您希望默认执行。模拟可能花费与从池中分配线程几乎相同的处理器时间
*   您的线程具有比当前更大（或有时更低）的优先级 - 所以关键的一小部分代码可以在接近运行时执行。对于低优先级，您假设需要等待（例如来自用户输入）

# c# - 字符串替换未按预期工作

> ID：13344550
> 
> 赞同：2
> 
> 时间：2012-11-12T13:26:41.060
> 
> 标签：c#, regex, foreach, output, ini

我的问题是：

我有一个 .ini 文件，我正在阅读如下：

```
 StreamReader sr = new StreamReader(txtb_path.Text, Encoding.Default);

    StringBuilder content = new StringBuilder();

    // schreibt Zeile für Zeile auf den StringBuilder bis das Ende der Datei erreicht ist
    while (!sr.EndOfStream)
        content.AppendLine(sr.ReadLine());

    // StringBuilder als String an die TextBox übergeben
    this.textBox1.Text = content.ToString(); 
```

然后我应用以下正则表达式：

```
 string regex = @"^FensterGemerkt.+?\d+\.\d+\.\d+\,\ \d{2}:\d{2}:\d{2}\ :\ -{1}?\d+\,.*?$"; //@"^Fenster.*$";

    RegexOptions options = RegexOptions.Multiline;

    // search in
    string input = content.ToString();
    //txtb_count.Text = "anzahl zeilen: " + Convert.ToString(content.Capacity);

    // run regex
    MatchCollection matches = Regex.Matches(input, regex, options);              

    // MessageBox.Show(Convert.ToString(matches.Count));
    txtb_count.Text = Convert.ToString(matches.Count);
    string cleanup ="";          

    foreach (Match match in matches)
    {
        // clean the ini
        cleanup = Regex.Replace(input, match.Value, "");

        // Output all matches                    
        textBox2.Text = textBox2.Text + "\n" + match.Value;
    } 
```

.ini 文件如下所示：

```
1
FensterGemerkt=12.11.2012, 10:42:37 : -32000,32744--31840,32768
Fenster=-32000,32744,160,24

2
FensterGemerkt=12.11.2012, 10:49:46 : 0,44-1024,768
Fenster=0,44,1024,724 
```

我想要的是，如果正则表达式匹配第一个条目：

```
FensterGemerkt=12.11.2012, 10:42:37 : -32000,32744--31840,32768 
```

...然后更换或删除它。

我的应用程序有效，但仅适用于 .ini 文件中的最后一个条目。我认为我的 . 有问题`foreach`，但我无法弄清楚。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-12T13:40:45.063

有更好的方法可以做到这一点，但对您的问题最简单的答案是因为您正在重置`cleanup`以始终替换最后一个值。

尝试

```
 string cleanup =input;          

    foreach (Match match in matches)
    {
        // clean the ini
        cleanup = Regex.Replace(cleanup, match.Value, "");

        // Output all matches                    
        textBox2.Text = textBox2.Text + "\n" + match.Value;
    } 
```

更好的解决方案是使用 Linq：

```
 Regex regex=new Regex(@"^FensterGemerkt.+?\d+\.\d+\.\d+\,\ \d{2}:\d{2}:\d{2}\ :\ -{1}?\d+\,.*?$"; //@"^Fenster.*$",RegexOptions.MultiLine);
  string cleanup=regex.Replace(input,string.Empty);
  string[] matches=regex.Matches(input).OfType<Match>().Select(m=>m.Value).ToArray();
  txtb_count.Text = Convert.ToString(matches.Length);
  textBox2.Text = string.Join('\n',matches); 
```

# javascript - 三个简单的 jQuery 步骤不起作用 - 设置变量、打印变量、比较变量

> ID：13344552
> 
> 赞同：1
> 
> 时间：2012-11-12T13:27:01.690
> 
> 标签：javascript, jquery, variables

定义变量：

```
// Define Autocomplete Location Variable
var ac_location; 
```

设置变量：

```
// Set Autocomplete Location Variable Equal to input id "loc"
$("#loc").val(ac_location); 
```

打印变量：

```
// Print Autocomplete Variable
alert(ac_location); 
```

比较变量：

```
// Compare "#loc" input with ac_location variable
if (ac_location.val() != $("#loc")) {
// Print Autocomplete Variable
alert(ac_location);
} else {
alert("No match");
} 
```

我试图使用来自 jquery 帮助和谷歌的信息来做到这一点。这是完整的代码：

[http://jsfiddle.net/NY3nG/2/](http://jsfiddle.net/NY3nG/2/)

我的步骤有什么问题，因为控制台说我的 val 未定义并且它没有打印出警报框中的变量。任何帮助将不胜感激。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-12T13:35:55.280

```
// Set Autocomplete Location Variable Equal to input id "loc"
$("#loc").val(ac_location); 
```

只需将元素的值设置`#loc`为`ac_location`，反之亦然。做

```
ac_location = $("#loc").val(); 
```

并正确编写`if`，您的 jquery 对象`#loc`不是`ac_location`

```
if ($("#loc").val() != ac_location) 
```

`alert("No match");`更重要的是，在您的`if`陈述***匹配***后比较您。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-12T13:36:24.467

如果 ac_location 值未定义，则 val 函数不会设置其值，因为 undefined 被视为好像你没有给它任何输入变量 - > jQuery 认为它是一个 getter 调用

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-12T13:40:03.150

我正在更正您的代码：

定义变量：

```
// Define Autocomplete Location Variable
// This is not a jquery object, just an ordinary js variable.
var ac_location; 
```

设置变量：

```
// Set Autocomplete Location Variable Equal to input id "loc"
// You want to take the value of #loc to ac_location
ac_location = $("#loc").val(); 
```

打印变量：

```
// Print Autocomplete Variable
alert(ac_location); 
```

比较变量：

```
// Compare "#loc" input with ac_location variable
// ac_location is a string, compare it with value of #loc field:
if (ac_location != $("#loc").val()) {
    // Print Autocomplete Variable
    alert(ac_location);
} else {
    alert("No match");
} 
```

# c# - WPF MVVM 页面大小

> ID：13344555
> 
> 赞同：0
> 
> 时间：2012-11-12T13:27:17.270
> 
> 标签：c#, wpf, xaml, mvvm

我有分页视图，但是不同分辨率的窗口大小不同，所以我不知道我需要从 wcf 服务方法询问多少数据才能填满整个屏幕，我试图将行一一放入集合中并检查是否scrobbviewer 的 ComputedVerticalScrollBarVisibility 将变为可见，但它不起作用，我也无法获得控件的大小，所以我什至无法计算页面大小。也许是因为我在新视图的构造函数中做了所有这些，而我正在使用 Catel 3.2 来做这件事。有没有简单的方法来获取页面大小？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-11-23T11:35:37.593

在 LayoutUpdated 上向命令添加事件解决了这个问题，是的，添加 1 个项目来测量项目高度也很有帮助

# spring - 在命名空间中使用 Spring 配置文件

> ID：13344564
> 
> 赞同：5
> 
> 时间：2012-11-12T13:28:03.907
> 
> 标签：spring, cxf, jax-rs

你不需要知道 CXF 来回答这个问题。

假设我有以下 XML 声明，它使用 CXF 创建一个 JAXRS 服务器

```
 <jaxrs:server id="customerService" address="/service1">
    <jaxrs:serviceBeans>
      <ref bean="serviceBean1" />
      <ref bean="serviceBean2" />
      <ref bean="serviceBean3" />
    </jaxrs:serviceBeans>
  </jaxrs:server> 
```

现在我需要找到一种方法来为每个环境定制这个 JAXRS 服务器，使用 Spring 配置文件机制。我可以做类似的事情：

```
 <beans profile="dev">
    <jaxrs:server id="jaxrsServer" address="/service1">
      <jaxrs:serviceBeans>
        <ref bean="serviceBean2" />
        <ref bean="serviceBean3" />
      </jaxrs:serviceBeans>
    </jaxrs:server>
  </beans>

  <beans profile="prod">
    <jaxrs:server id="jaxrsServer" address="/service1">
      <jaxrs:serviceBeans>
        <ref bean="serviceBean1" />
        <ref bean="serviceBean2" />
      </jaxrs:serviceBeans>
    </jaxrs:server>
  </beans> 
```

但这不是我想要的，因为我的真实世界的 JAXRS 服务器比我的示例要复杂一些。

**我正在寻找的是这样的：**

```
<jaxrs:server id="jaxrsServer" address="/service1">
  <jaxrs:serviceBeans>
    <beans profile="dev">
      <ref bean="serviceBean1" />
      <ref bean="serviceBean2" />
    </beans>
    <beans profile="dev">
      <ref bean="serviceBean2" />
      <ref bean="serviceBean3" />
    </beans>
  </jaxrs:serviceBeans>
</jaxrs:server> 
```

但它不起作用。

* * *

我试图将我的列表创建外部化：

```
 <bean id="serviceBeansList" class="java.util.ArrayList">
    <constructor-arg>
      <list>
        <ref bean="serviceBean1"/>
        <ref bean="serviceBean2"/>
      </list>
    </constructor-arg>
  </bean>

<jaxrs:server id="jaxrsServer" address="/service1">
  <jaxrs:serviceBeans>
      <ref bean="serviceBeansList" />
  </jaxrs:serviceBeans>
</jaxrs:server> 
```

它仍然不起作用，因为 CXF 命名空间处理程序不会“展平”列表，因此它不是处理 2 个 serviceBeans 对象的列表，而是处理 1 个 ArrayList 的列表，这不是 CXF 处理的类型。

Spring XML 解析尝试获取一个列表。我发现在 CXF 命名空间处理代码中：

```
if ( "serviceBeans".equals(name) ) {
            List<?> list = ctx.getDelegate().parseListElement(el, bean.getBeanDefinition());
            bean.addPropertyValue(name, list);
} 
```

* * *

除了引用 bean 之外，难道不能用 Spring 或其他可以工作的东西来引用“xml 声明片段”吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-13T08:34:49.573

您是否尝试过使用别名 + 配置文件

```
<jaxrs:server id="jaxrsServer" address="/service1">
  <jaxrs:serviceBeans>
    <ref bean="serviceBeanA" />
    <ref bean="serviceBeanB" />
  </jaxrs:serviceBeans>
</jaxrs:server>

<beans profile="profile1">
  <alias name="serviceBean1" alias="serviceBeanA"/>
  <alias name="serviceBean2" alias="serviceBeanB" />
</beans>
<beans profile="profile2">
  <alias name="serviceBean3" alias="serviceBeanA"/>
  <alias name="serviceBean4" alias="serviceBeanB" />
</beans> 
```

免责声明：这个答案纯属幻想，但评论有些有限 - 如果它不起作用，我会删除

# java - Spring Security 注释禁用登录表单功能

> ID：13344565
> 
> 赞同：1
> 
> 时间：2012-11-12T13:28:09.893
> 
> 标签：java, spring, security, annotations

我正在尝试通过注释使用 Spring Security 来保护我的 RESTful Web 服务的一种方法调用。在我的方法上放置 @Secured 注释时，我遇到了一个奇怪的行为，防止登录表单被重定向到，而是立即得到 403 响应。

我把我的配置放在下面，你能解释一下有什么问题吗？

```
<?xml version="1.0" encoding="UTF-8"?>
<beans:beans xmlns="http://www.springframework.org/schema/security"
         xmlns:beans="http://www.springframework.org/schema/beans"
         xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
         xsi:schemaLocation="http://www.springframework.org/schema/beans
       http://www.springframework.org/schema/beans/spring-beans-3.0.xsd
       http://www.springframework.org/schema/security
       http://www.springframework.org/schema/security/spring-security-3.1.xsd">

<global-method-security secured-annotations="enabled" />

<http auto-config="true">
    <http-basic/>
    <form-login/>

    <!-- With the following line login form is shown -->
    <!--<intercept-url pattern="/rest/secured/" access="ROLE_USER"/>-->

</http>

<authentication-manager alias="myAuthenticationManager">
    <authentication-provider>
        <user-service>
            <user name="user" password="user" authorities="ROLE_USER"/>
        </user-service>
    </authentication-provider>
</authentication-manager>

</beans:beans> 
```

这是我的服务接口：

```
@Produces({"application/xml"})
public interface KinoteatrService
{
    @GET
    @Path("/secured")
    @Secured("ROLE_USER")
    String testSecuredMethod();
} 
```

这是一个实现：

```
@Path("/")
public class KinoteatrServiceImpl implements KinoteatrService
{
    @Override
    public String testSecuredMethod() {
        return "<html><body>Success, timestamp: " + new Date() + "</body></html>";
    }
} 
```

我试图调查原因并启用日志记录的调试级别，这就是我所拥有的......我不确定我是否正确阅读了日志，但似乎它说客户端已经注册为匿名所以它立即抛出 403 错误代码。

```
2012-11-12 15:00:56,545 DEBUG [phase.PhaseInterceptorChain] : Invoking handleMessage on interceptor org.apache.cxf.ws.policy.PolicyInInterceptor@55d0f2b6
2012-11-12 15:00:56,545 DEBUG [phase.PhaseInterceptorChain] : Invoking handleMessage on interceptor org.apache.cxf.transport.https.CertConstraintsInterceptor@78e9282b
2012-11-12 15:00:56,545 DEBUG [phase.PhaseInterceptorChain] : Invoking handleMessage on interceptor org.apache.cxf.jaxrs.interceptor.JAXRSInInterceptor@6c29b061
2012-11-12 15:00:56,547 DEBUG [utils.JAXRSUtils] : Trying to select a resource class, request path : /secured/
2012-11-12 15:00:56,547 DEBUG [utils.JAXRSUtils] : Trying to select a resource operation on the resource class com.kinoteatr.ua.service.KinoteatrServiceImpl
...
...
2012-11-12 15:00:56,558 DEBUG [utils.JAXRSUtils] : Resource operation testSecuredMethod on the resource class com.kinoteatr.ua.service.KinoteatrServiceImpl has been selected
2012-11-12 15:00:56,559 DEBUG [interceptor.JAXRSInInterceptor] : Request path is: /secured/
2012-11-12 15:00:56,559 DEBUG [interceptor.JAXRSInInterceptor] : Request HTTP method is: GET
2012-11-12 15:00:56,559 DEBUG [interceptor.JAXRSInInterceptor] : Request contentType is: */*
2012-11-12 15:00:56,559 DEBUG [interceptor.JAXRSInInterceptor] : Accept contentType is: text/html,application/xhtml+xml,application/xml;q=0.9,*/*;q=0.8
2012-11-12 15:00:56,559 DEBUG [interceptor.JAXRSInInterceptor] : Found operation: testSecuredMethod
2012-11-12 15:00:56,559 DEBUG [phase.PhaseInterceptorChain] : Invoking handleMessage on interceptor org.apache.cxf.interceptor.OneWayProcessorInterceptor@2221deec
2012-11-12 15:00:56,559 DEBUG [phase.PhaseInterceptorChain] : Invoking handleMessage on interceptor org.apache.cxf.interceptor.ServiceInvokerInterceptor@8eeb6be
2012-11-12 15:00:56,561 DEBUG [aopalliance.MethodSecurityInterceptor] : Secure object: ReflectiveMethodInvocation: public java.lang.String com.kinoteatr.ua.service.KinoteatrServiceImpl.testSecuredMethod(); target is of class [com.kinoteatr.ua.service.KinoteatrServiceImpl]; Attributes: [ROLE_USER]
2012-11-12 15:00:56,561 DEBUG [aopalliance.MethodSecurityInterceptor] : Previously Authenticated: org.springframework.security.authentication.AnonymousAuthenticationToken@9055e4a6: Principal: anonymousUser; Credentials: [PROTECTED]; Authenticated: true; Details: org.springframework.security.web.authentication.WebAuthenticationDetails@957e: RemoteIpAddress: 127.0.0.1; SessionId: null; Granted Authorities: ROLE_ANONYMOUS
2012-11-12 15:00:56,562 DEBUG [vote.AffirmativeBased] : Voter: org.springframework.security.access.vote.RoleVoter@13961789, returned: -1
2012-11-12 15:00:56,562 DEBUG [vote.AffirmativeBased] : Voter: org.springframework.security.access.vote.AuthenticatedVoter@62e32d6a, returned: 0
2012-11-12 15:00:56,563 DEBUG [support.DefaultListableBeanFactory] : Returning cached instance of singleton bean 'cxf'
2012-11-12 15:00:56,566 DEBUG [phase.PhaseInterceptorChain] : Invoking handleMessage on interceptor org.apache.cxf.interceptor.OutgoingChainInterceptor@701f7886
2012-11-12 15:00:56,566 DEBUG [interceptor.OutgoingChainInterceptor] : Interceptors contributed by bus: [org.apache.cxf.interceptor.LoggingOutInterceptor@315b222e, org.apache.cxf.ws.policy.PolicyOutInterceptor@56211352]
2012-11-12 15:00:56,566 DEBUG [interceptor.OutgoingChainInterceptor] : Interceptors contributed by service: []
2012-11-12 15:00:56,566 DEBUG [interceptor.OutgoingChainInterceptor] : Interceptors contributed by endpoint: [org.apache.cxf.interceptor.MessageSenderInterceptor@65640d91, org.apache.cxf.transport.common.gzip.GZIPOutInterceptor@bb6de98]
2012-11-12 15:00:56,566 DEBUG [interceptor.OutgoingChainInterceptor] : Interceptors contributed by binding: [org.apache.cxf.jaxrs.interceptor.JAXRSOutInterceptor@12cfd32a]
2012-11-12 15:00:56,567 DEBUG [phase.PhaseInterceptorChain] : Chain org.apache.cxf.phase.PhaseInterceptorChain@a4553e4 was created. Current flow:
    setup [PolicyOutInterceptor]
    prepare-send [MessageSenderInterceptor, GZIPOutInterceptor]
    pre-stream [LoggingOutInterceptor]
    marshal [JAXRSOutInterceptor]

2012-11-12 15:00:56,567 DEBUG [phase.PhaseInterceptorChain] : Invoking handleMessage on interceptor org.apache.cxf.ws.policy.PolicyOutInterceptor@56211352
2012-11-12 15:00:56,567 DEBUG [policy.PolicyOutInterceptor] : No binding operation info.
2012-11-12 15:00:56,567 DEBUG [phase.PhaseInterceptorChain] : Invoking handleMessage on interceptor org.apache.cxf.interceptor.MessageSenderInterceptor@65640d91
2012-11-12 15:00:56,567 DEBUG [phase.PhaseInterceptorChain] : Adding interceptor org.apache.cxf.interceptor.MessageSenderInterceptor$MessageSenderEndingInterceptor@43300672 to phase prepare-send-ending
2012-11-12 15:00:56,567 DEBUG [phase.PhaseInterceptorChain] : Chain org.apache.cxf.phase.PhaseInterceptorChain@a4553e4 was modified. Current flow:
   setup [PolicyOutInterceptor]
   prepare-send [MessageSenderInterceptor, GZIPOutInterceptor]
   pre-stream [LoggingOutInterceptor]
   marshal [JAXRSOutInterceptor]
   prepare-send-ending [MessageSenderEndingInterceptor]

2012-11-12 15:00:56,567 DEBUG [phase.PhaseInterceptorChain] : Invoking handleMessage on interceptor org.apache.cxf.transport.common.gzip.GZIPOutInterceptor@bb6de98
2012-11-12 15:00:56,567 DEBUG [gzip.GZIPOutInterceptor] : Response role, checking accept-encoding
2012-11-12 15:00:56,567 DEBUG [gzip.GZIPOutInterceptor] : Accept-Encoding header: [gzip,deflate,sdch]
2012-11-12 15:00:56,567 DEBUG [gzip.GZIPOutInterceptor] : gzip permitted: YES
2012-11-12 15:00:56,567 DEBUG [phase.PhaseInterceptorChain] : Invoking handleMessage on interceptor org.apache.cxf.interceptor.LoggingOutInterceptor@315b222e
2012-11-12 15:00:56,567 DEBUG [phase.PhaseInterceptorChain] : Invoking handleMessage on interceptor org.apache.cxf.jaxrs.interceptor.JAXRSOutInterceptor@12cfd32a
2012-11-12 15:00:56,567 DEBUG [phase.PhaseInterceptorChain] : Invoking handleMessage on interceptor org.apache.cxf.interceptor.MessageSenderInterceptor MessageSenderEndingInterceptor@43300672
2012-11-12 15:00:56,567 INFO  [interceptor.LoggingOutInterceptor] : Outbound Message
---------------------------
ID: 2
Response-Code: 403
Content-Type: text/xml
Headers: {Date=[Mon, 12 Nov 2012 13:00:56 GMT], Content-Length=[0]}
--------------------------------------
2012-11-12 15:00:56,567 DEBUG [gzip.GZIPOutInterceptor] : Message is smaller than compression threshold, not compressing.
2012-11-12 15:00:56,567 DEBUG [context.HttpSessionSecurityContextRepository] : SecurityContext is empty or contents are anonymous - context will not be stored in HttpSession.
2012-11-12 15:00:56,567 DEBUG [servlet.ServletController] : Finished servicing http request on thread: Thread[http-bio-8080-exec-64,5,main]
2012-11-12 15:00:56,567 DEBUG [access.ExceptionTranslationFilter] : Chain processed normally
2012-11-12 15:00:56,567 DEBUG [context.SecurityContextPersistenceFilter] : SecurityContextHolder now cleared, as request processing completed 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-12T20:35:24.917

登录页面仅针对**安全 URL**显示，而不针对**安全方法显示**

安全方法是保护您的应用程序的附加层，它要求用户已经过身份验证。因此，您必须使用*intersept-url ...*来显示登录页面。

PS以防万一。如 Spring Security 文档中所述：

注释的方法**将只对定义为 Spring bean 的实例进行保护**（在启用方法安全的同一应用程序上下文中）。如果您想保护不是由 Spring 创建的实例（例如，使用 new 运算符），那么您需要使用 AspectJ。

# java - 如何获取 hyper-v 虚拟机的总 cpu 使用率

> ID：13344570
> 
> 赞同：1
> 
> 时间：2012-11-12T13:28:21.313
> 
> 标签：java, cpu-usage, hyper-v

我的问题正如标题中所说，我想在客户机上运行 java 或 c 程序，它可以获得 hyper-v 主机信息或虚拟机实际 cpu 使用情况。实际的 cpu 使用情况可以解释为 (guest_overall_cpu_usage / host_overall_cpu_usage)。我知道可以在hyper-v管理工具中看到cpu使用情况，但我需要使用程序来获取它。任何帮助将不胜感激。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-16T19:39:42.670

[在OpenStack Hyper-V 驱动程序](https://github.com/openstack/nova/blob/master/nova/virt/hyperv/vmops.py)中有一个如何获取来宾 VM 的 CPU 负载的示例。请注意，代码是用 Python 编写的，因为可以使用易于使用的包装器来访问 WMI API。如果您打算用 Java 或 C 编写调用，请记住这一点

# iphone - 使用 UIPopover 作为评论按钮

> ID：13344574
> 
> 赞同：1
> 
> 时间：2012-11-12T13:28:37.777
> 
> 标签：iphone, ios, uipopovercontroller

我必须创建`UITableView`一个社交网站

现在我卡在了`uitableview`包含评论按钮的单元格上。

单击该评论按钮时，我想创建一个弹出框（用户可以在其中键入和发布）。

注意：这是一个 iPhone 应用程序而不是 iPad

有可能吗？如果是这样，请帮助我。也请告诉我是否有任何好的教程/示例代码。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-12T13:34:37.700

您不能`UIPopover`在 iPhone 上使用本机，但您可以调整一些第三方实现以满足您的需要。

*   [TSPopover](http://www.cocoacontrols.com/platforms/ios/controls/tspopover)类似于原生
*   [WEPopover](http://www.cocoacontrols.com/platforms/ios/controls/wepopover)与 一起使用`UITableView`，这可能更适合您
*   [DDPopoverBackgroundView](http://www.cocoacontrols.com/platforms/ios/controls/ddpopoverbackgroundview)可能接近您发表评论所需的内容，但评论很糟糕

查看[Cocoa Controls](http://www.cocoacontrols.com)了解更多信息。我认为您不必从头开始。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-12T13:38:21.513

有可能的。然而，由于您使用的是 iPhone，因此您需要一个 3 方弹出框类（很可能是 WEPopover（[https://github.com/werner77/WEPopover](https://github.com/werner77/WEPopover)）

然后，您可以设置弹出框并通过按钮显示它。

作为一个简单的 iPad 示例，这是我创建的一个类，用于简化创建 UIPopover ：

```
+(UIPopoverController*)displayPopoverForRowIndex:(NSInteger)index inView:(UIView*)view fromRect:(CGRect)rect withTitle:(NSString*)title permittedArrowDirections:(UIPopoverArrowDirection)direction
{
    UIViewController *contentVC = [[NDSearchDetailsController alloc] initWithIndex:index];
    UINavigationController *navVC = [[UINavigationController alloc] initWithRootViewController:contentVC];

    tableVC.navigationController = navVC;

    UIPopoverController *popover = [[UIPopoverController alloc] initWithContentViewController:navVC];
    tableVC.popoverController = popover;

    popover.delegate = tableVC;

    if (view) [popover presentPopoverFromRect:rect inView:view permittedArrowDirections:direction animated:YES];

    return popover;
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-12T13:39:26.753

[Popover 控制器专用于 iPad 设备。尝试在其他设备上创建一个会导致异常。](http://developer.apple.com/library/ios/#documentation/uikit/reference/UIPopoverController_class/Reference/Reference.html)

您可以创建一个看起来像 popover 的背景视图，并通过更改视图 alpha 来模拟显示和隐藏的 popover 行为。

# java - dynamodb 中项目的生存时间

> ID：13344577
> 
> 赞同：20
> 
> 时间：2012-11-12T13:28:46.237
> 
> 标签：java, amazon-dynamodb

我从过去几天开始使用 amazon dynamodb no-sql 数据库，并想知道是否有项目的任何特征***生存时间 (TTL)***，以便当项目达到该值时，它会根据***TTL***值自动从表中删除，而不是手动批量删除项目。

* * *

## 回答 #1

> 赞同：29
> 
> 时间：2017-03-03T21:07:39.940

是的，亚马逊于 2017 年 2 月向 DynamoDb 发布了生存时间 (TTL) 功能。您只需在控制台上访问 DynamoDb。选择您的表。然后单击**概述**并在那里启用它。

[![在表详细信息下](../Images/99860c50f3519f4faa8476cc3d0ae224.png)](https://i.stack.imgur.com/ZUpIF.png)

[![管理 TTL](../Images/ca10fcf76d9eca8ca1dbe79d6dab57d3.png)](https://i.stack.imgur.com/sK0to.png)

TTL 属性应该是您的列/属性，它将决定该行何时过期/删除。

**注意：** ttl 属性应该是数字数据类型（因为 DynamoDb 不支持日期时间数据类型）。所以它应该是**EPOCH**时间格式。

例如：
- Linux 终端：`date +%s`
- Python：`import time; long(time.time())`
- Java：`System.currentTimeMillis() / 1000L`
- JavaScript：`Math.floor(Date.now() / 1000)`

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2012-11-12T14:15:06.150

编辑：AWS 于 2017 年 2 月发布了 DynamoDb TTL 功能。

不幸的是，答案很简短：不

事实上，DynamoDB 的设计初衷就是为了简单。没有花哨的功能。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2019-04-05T10:01:33.110

您可以使用 AWS DynamoDB 控制台来完成，就像[Manjan 的回答](https://stackoverflow.com/a/42588445/5042169)所说的那样。

如果您更喜欢使用命令，还可以使用 AWS DynamoDB CLI 命令：

```
aws dynamodb update-time-to-live
--table-name demoTable
--time-to-live-specification Enabled=true,AttributeName=ttl 
```

您可以查看这篇[文章](https://medium.com/@jun711.g/how-to-set-time-to-live-attribute-for-amazon-dynamodb-entries-6b10ed16281)以获取更多信息。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2017-02-28T06:05:54.373

是的，他们最近发布了这个功能。浏览以下文档 [https://aws.amazon.com/about-aws/whats-new/2017/02/amazon-dynamodb-now-supports-automatic-item-expiration-with-time-to-live-ttl /](https://aws.amazon.com/about-aws/whats-new/2017/02/amazon-dynamodb-now-supports-automatic-item-expiration-with-time-to-live-ttl/)

# javascript - SlickGrid 2.0 无法更改奇数索引中的行背景颜色

> ID：13344583
> 
> 赞同：5
> 
> 时间：2012-11-12T13:29:03.870
> 
> 标签：javascript, slickgrid

我正在尝试使用以下代码更改背景颜色：

```
 data.getItemMetadata = function (index)
  {
       if (index === 5)
       {
           return  {cssClasses: "Unverified"};
       }      
   } 
```

只要索引是偶数，它就可以完美运行。但是对于奇数索引，它对背景颜色没有影响（它对字体样式有影响）。我怀疑它与斑马效应有关？（我不知道如何禁用它）

谢谢。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-02-14T18:24:25.477

您的`Unverified`CSS 类被应用，但没有任何效果，因为它的特异性低于中定义的`slick-default-theme.css`：

```
.slick-row.odd {
  background: #fafafa;
} 
```

请注意，选择器使用两个类的组合，这比您的单个`Unverified`类更具体，因此它具有优先权。

你有两个选择：

1.  删除现有规则。
2.  `.slick-row`通过添加规则并将其放置在文档中现有规则之后，或者`! important`在样式声明的末尾添加来增加规则的特异性。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-09-18T16:00:56.373

Tin 的两个答案都不适合我。

我正在使用：

```
.slick-row[row$="1"], .slick-row[row$="3"], .slick-row[row$="5"], .slick-row[row$="7"], .slick-row[row$="9"] {
  background: #E2E4FF; 
```

}

但是将它添加到我的 CSS 中确实：

```
.slick-row.odd {
  background: #E2E4FF;
} 
```

# c++ - Visual Studio 2010 查看程序流程 (C++)

> ID：13344584
> 
> 赞同：0
> 
> 时间：2012-11-12T13:29:13.067
> 
> 标签：c++, visual-studio-2010

我可以在 VS2010 中以图形或类似的方式查看程序流程吗？如果不是 - 分析代码最有效的方法是什么？（理解它！）

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-12T13:51:20.403

Visual Studio 一直有工具让您以树状显示查看哪些函数调用了哪些函数。我已经有 15 年没有使用过它了，我不会通过这个缓慢的连接下载 VS 2010 来了解鼠标点击等的细节，但请四处看看。但是，请记住，我没有使用该功能的原因主要是它的价值非常有限。

*而且一般来说，用于理解*代码的工具支持非常有限，因为理解是基于智能的，通常不能通过简单的规则或工具可以做的事情来捕捉。

如果可以，那么程序员就会失业！

理解代码的第一步是了解哪种抽象最重要。例如，如果你的重点是控制流，而代码主要是面向对象的，重点是状态，那么你可能很难理解它——因为控制显然是随意的。相应地，如果您的重点是状态，并且代码主要是程序性的，那么再次将很难理解。

我认为最好的工具是**纸和笔**。

绘制控制流图，绘制数据流，创建关联图，绘制类框，绘制对象层次结构，*任何看起来相关*的东西。

不要犹豫，把你用过的一张纸弄碎，捏成一个紧密的球，然后扔进废纸篓。:-)

它通常也有助于*与他人*谈论它（当你已经研究它足够有很好的见解和问题时），并*尝试解释*它。对于后者，您不一定需要其他人听您的。你可以坐下来试着写下你的想法，就好像在写一个教程一样。

祝你好运！

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-12T13:47:21.367

对于大型 C++ 项目，我总是使用[http://www.scitools.com/的“理解 C++”。](http://www.scitools.com/)这个工具非常擅长跟踪代码，尽管不是在运行时。

# javascript - 什么是 AjaxAdapter，什么是 query()？

> ID：13344588
> 
> 赞同：0
> 
> 时间：2012-11-12T13:29:19.717
> 
> 标签：javascript

我有一个代码：

```
req = new AjaxAdapter;
req.dataType = 'json';

return req.query('GET', url, request, function(responseServer, status, xhr) {
        var json;
        json = responseServer.data;
        return response(json);
    }, function(jqXHR, textStatus, errorThrown) {
        var exception;
        exception = jQuery.parseJSON(jqXHR.responseText);
        return showError(exception);
    }); 
```

我不明白。那么它的`query()`功能是什么？我在 jQuery 文档中找不到它。在我的示例中看到此函数有 5 个参数：

*   得到
*   网址
*   要求
*   返回数据的函数（响应）
*   出错时调用的函数

什么是请求？我在哪里可以找到`query()`函数的文档？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-12T13:31:22.450

该`query`函数在 jQuery 中不存在

您必须使用另一个库

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-12T13:31:22.790

这不是 jquery，但你可以试试

```
console.log(AjaxAdapter.query) 
```

看看函数做了什么

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-12T13:32:29.360

改用 jQuery $.ajax

```
var request = $.ajax({
  url: "script.php",
  type: "POST",
  data: {id : menuId},
  dataType: "html"
});

request.done(function(msg) {
  $("#log").html( msg );
});

request.fail(function(jqXHR, textStatus) {
  alert( "Request failed: " + textStatus );
}); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-11-12T13:34:02.777

这不是 jQuery。至于`query`方法的作用，看它的签名：

```
req.query( 'GET', url, request, function( responseServer, status, xhr ) 
```

它以 post-type 作为第一个参数，URL 作为第二个参数，您的请求数据作为第三个参数，以及请求完成时的回调函数。

您的回调返回服务器的响应、指示响应类型的状态代码以及用于发出请求的查询方法的 XHR 对象。

# android - android：访问单选按钮中可绘制的按钮

> ID：13344595
> 
> 赞同：2
> 
> 时间：2012-11-12T13:29:35.777
> 
> 标签：android, radio-button, drawable

只是一个关于 Android 中单选按钮的简单问题：

我知道我可以使用以下方法为单选按钮设置一个可绘制的自定义按钮：RadioButton.setButtonDrawable(Drawable)。

但是，如果您想访问放置在此单选按钮中的可绘制按钮怎么办？

在我的应用程序中，我实际上是在尝试使单选按钮动画的按钮部分，我将 AnimationDrawable 对象传递给单选按钮，但是由于我不知道如何访问该对象，所以我无法调用start() 方法让它开始动画。

提前致谢。

# android - Android：layout_weight 在以编程方式设置时不起作用

> ID：13344599
> 
> 赞同：4
> 
> 时间：2012-11-12T13:29:57.220
> 
> 标签：android, android-layout

`TableRow` `layout_weight`以编程方式设置时出现问题。以下代码是`TableLayout`膨胀的 in`table_body`元素：

```
<TableLayout
     android:layout_width="match_parent"
     android:layout_height="0px"
     android:layout_weight="1"
     android:weightSum="1">
<TableLayout> 
```

我只想在`TableLayout`.. 中显示 10 行，为此我使用以下代码以**编程**`TableRow`方式添加元素：

 **```
while(i<10){
    TableRow row = (TableRow) ((Activity) context).getLayoutInflater().
        inflate(R.layout.body_row, table_body, false);

    TableRow.LayoutParams row_params = 
        new TableRow.LayoutParams(LayoutParams.MATCH_PARENT, 0, 0.1f);

    table_body.addView(row, row_params);

    i++;
} 
```

body_row.xml 有这个代码：

```
<TableRow>
    <TextView 
        android:text="row1"
        android:layout_width="match_parent"
        android:layout_height="match_parent"/>
</TableRow> 
```

使用此代码`TableLayout`不会分成 10 个相等的空间（如我所愿），但行仅用最后一行的末尾和 TableLayout 的末尾之间的空白空间的结果来包装它们的内容。我做错了什么？谢谢！！

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-11-14T07:15:18.703

要使权重机制起作用，您需要使用适当`LayoutParams`的充气`TableRow`小部件。由于`TableRow`是 a的父级，`TableLayout`因此您需要使用`TableLayout.LayoutParams`：

```
TableLayout.LayoutParams row_params = new TableLayout.LayoutParams(LayoutParams.MATCH_PARENT, 0, 0.1f);
table_body.addView(row, row_params); 
```**

# php - 令人费解的 php 递归

> ID：13344602
> 
> 赞同：3
> 
> 时间：2012-11-12T13:30:08.803
> 
> 标签：php, recursion, while-loop, conditional-statements

我将此代码与 php 一起使用：

```
while (0 != $date1 || $this->counter < 5 ) {
    // if ($this->true_cahce_failure ) {
    $this->url= $this->adjust_url_with_www_add($this->url);
    // $this->counter=2;
    // }

    $this->cache_debug("Date".$date1." ".$this->url,"Recursion ".$this->counter);
    $date1 = $this->get_date();
    $this->counter++;
}
$this->cache_debug("Date: ".$date1." ".$this->url,"Loop Done "); 
```

基本上循环应该继续直到`$date`大于`not 0`或`counter`不大于`5`. 有时`date1`有`0`但有时没有。如果不是，它应该在 while 评估中返回，并停止迭代。但它没有这样做，迭代继续。

它只会在计数器达到 5 时停止。这是为什么呢？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-12T13:32:30.700

我认为你想`&&`在你的条件下使用而不是`||`.

如果任一条件为真，您编写它的方式将继续运行，因此只有当它们都为假时才会停止。

**编辑：**在仔细阅读您的问题后，我认为您需要使用

```
while (0 == $date1 && $this->counter < 5 ) { 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-12T13:33:22.243

它可能不会停止，因为你的`$this->counter`is still `< 5`when `$date1`is not `0`。如果您查看这些语句的`true/false`值，您的`while`条件将变为：

```
while( false || true ) 
```

while`$this->counter`是`< 5`并且对于 的任何值`$date`，这将使执行继续。

您可能希望将其切换到

```
while( 0==$date1 && $this->counter<5 ) 
```

使用`&&`是因为您希望两个条件都是`true`，而不仅仅是一个。在比较日期时也切换`!=`到，所以当你有一个非 0 日期时它也会停止。`==``0`

# css - chrome上的按钮之间的间隙

> ID：13344608
> 
> 赞同：2
> 
> 时间：2012-11-12T13:30:30.177
> 
> 标签：css, firefox, google-chrome, twitter-bootstrap

我正在使用引导程序创建一个 btn 组，充当单选按钮（javascript 组件）。

这在 Firefox 中看起来很棒，但在 chrome 中存在差距：

![在此处输入图像描述](../Images/9478bfff5d158b1a5c990314a9c30473.png)

这是一个错误还是我在某处有一些额外的标记？

HTML 代码：

```
 <div id="loadOptions">
            <div class="btn-group" data-toggle="buttons-radio">
                <button type="button" value="0" class="btn btn-primary" data-toggle="button">All hashtags</button>
                <button type="button" value="1" class="btn btn-primary" data-toggle="button" id="any">Any hashtag</button>
            </div>
        </div> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-12T13:45:10.517

我能够通过以下方式解决问题：

```
button
{
    margin: 0;
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-12T15:17:25.120

只是不要按 enter 并将第二个按钮标签放在第一个按钮标签的前面，间隙会消失：

```
<div id="loadOptions">
    <div class="btn-group" data-toggle="buttons-radio">
        <button type="button" value="0" class="btn btn-primary" data-toggle="button">All hashtags</button><button type="button" value="1" class="btn btn-primary" data-toggle="button" id="any">Any hashtag</button>
    </div>
</div> 
```

# android - 在android中解码JSON

> ID：13344609
> 
> 赞同：0
> 
> 时间：2012-11-12T13:30:38.557
> 
> 标签：android, json

我从 JSON 获取解码字符串时遇到问题。我与 Web 服务连接并获取 JSON：`{"pdf":"JVBERi0xLjQKJeLjz9MKNyAwIG9iaiAKPDwKL0ZpbHRlciAvRmxhdGVE...` 这是字符串，但以 Base64 编码。我尝试使用以下方法解码：

```
 JSONObject jsonMap = new JSONObject(out.toString());
                String json =jsonMap.getJSONObject("pdf").toString();
                byte temp[];
                Base64 b = null;

                temp = b.decode(json.getBytes(), 0); 
```

但这个解决方案不起作用。有任何想法吗？这是错误日志：

```
11-12 14:36:30.257: W/System.err(12374): org.json.JSONException: Value JVBERi0xLjQKJeLjz9MKNyAwIG9iaiAKPDwKL0ZpbHRlciAvRmxhdGVEZWNvZGUKL0xlbmd0aCAyNTMKPj4Kc3RyZWFtCnicXZDLbsMgEEX3fAXLZBHhR+JsLKQoUSQv+lDdfgCGsYtUA8J44b/vAGkrdQE6w8yd4Q67drfO6MBevZU9BDpqozwsdvUS6ACTNqSsqNIyPKJ0y1k4wlDbb0uAuTOjbVvC3jC3BL/R3UXZAfaEvXgFXpuJ7j6uPcb96twXzGACLQjnVMGIfZ6EexYzsKQ6dArTOmwHlPwVvG8OaJXiMn9FWgWLExK8MBOQtig4be93TsCof7lzVgyj/BQeK0usLIq65MhV4qaOXOf3KvIxc3o/ZT5GbjKfIp8zN2nmo3ucHtfz44rK1Xt0lHaYrEQT2sDvmp11UZXON+CCezgKZW5kc3RyZWFtIAplbmRvYmogCjkgMCBvYmogCjw8Ci9GaWx0ZXIgL0ZsYXRlRGVjb2RlCi9MZW5ndGggOTYyMQovTGVuZ3RoMSAxNzQ1Mgo+PgpzdHJlYW0KeJzte3tglMW1+JmZb9/Z7GbzfpD9djcJIZsXmwQSHsnmKRAWAgRNkEhCsiHBkIQ8QHwBKlWD1rQ+QVvwbdWWzQZxAZFc8V0VrG2lSiFq2vqKUC/YW4XsPTO7BLD0Yn/3j/vHr/tx5pyZc+a85szMt0no6ep1QwhsAAbOxlUNnbEKnRoA3gIgpsY1PfINf/7idqSHAdQpzZ0rVjU2y2cAtCij+HpF27pmKUK7AMBwGkAT0eJuaKrryw4FiDWijiktODBnbJ0K+7Own9SyqueaR2h6GPbbsB/T1tHYQNSJqCv2FuybVjVc02ljhPcfwL7c3rDK/emM0E7s+wCiDZ0d3T0HIMkPkP0653d2uTsfnnFDEvY/BQgvxjGCD/+EIKnkfcokhVIF/99+FD8Gs2KugAR2D8QD+D9CGEH4dGyO/7TiarCNrfQPs3BMVlIAgp9kuAWS4FO4D/ZDHfyaMignmVADEomBWKCkACqJEaJBQbSQCjaohCqIhDnwJ6KHHTAZPicVsJEkw3x4CKwwD6KgGH4C28ll/s9gI7xHWuEZnP0UccJEmEtm+Y/BAqjyP482AKbD/bCVhIIZOVpi8x9FDd1wK+yB34MflsADiu2opQoWQrv/eVgK75Il5Ep/AsyGdrgRHoCHYR+MkNvIkKTw10MeLIcuoiLhJJXd5H8K8hWHNc/5X/YfAiPKP4xav6R2qcL/FTjhU4n4W3A3hEMOPu3wCOyCIySG5LFSCIVctFUH18MOloo+zoLbMbY95Dqyg4X6H8NopkIjrIdhcg0ZohbFYcUJ/7Vgwvhy0dM+eAz+Aw7AF6itglSzVWNF/nlYr2qwQzlaugV+BL/CzL2Ez8vEQCxkNmr+D3KUfMTa2Z9R85MwCt/Af5FU0kpupEX0JoXjzEb/c5CCETpRx2y4AtrgWZJCnORKnPsQXUtvpOvZLnZESpWO+/P9B0AJWSh7EzyNcb0D78H7uF4VxEV+T29kg4of+a9Df7OgBaO4BR6H3XCKKIiGhJAIIpMcMhUju44MkY/oBGqjNWw526G4w7/OfydYsFbqwI0zV8LNsAmeh4PwMXwBoyQOZ2bhzCJSRe4kd5GX6UF2BVvK7pOc0n3SM9JL0mlFmOKlsXfHhjHrXE82uPCpg2a4FnPtw+cAfEAYiSeJqGkmmYOalpFmcj3pJ/eSR8kTZBd5jRwin5Hj5O80ht5B76F76Sv0ID3EJrA0Vsa2sbcki/SB9J2q4cyEsf1jx/06v92f4+/3P+T/0D8qViEBK74ISrG6rsbz8Bboh3vhZ5jznfA2/A7r7ph4RuAErsF3RInVFIseWYmNTCTpGN0VpIasJX3kbvIYeZV8REbIaQo0hFrxSaNT6By6lN5Ev6SnmZbZWDG7ht3PfsO+ldYpHPg8o3hOcUI5okpWv3X6wTNHx2Csdey+sQf9eViLSqy8cNxzuVCCNTcHV7kJVuPTBWtgLeboWsz4Q1g5O8ALe+F1PL0P4vMhHBH+8uczXImTcAbGCMX1VBA1PgHfs3FlSrFa6okb1zbwXEduIreTB/B5kPycPIz5fZf8hrxHjpFPyCmMCWgGLaaXYURV9Epah88y2kg30s10Jz7v0N/TD+nH9FtmZGHMzCaycraC3cb6mIftZL9lv5NSpGJplnS19Jr0LkY+SzFbsUzRqNiseFjxqOIlxZuKEYVfebfyEaVP+alKq5qiqlJVq25X/UK1V3VE5VdPxHpyofeTzjvm7iZXSlm0n/ipD+N+kfawX9N7yDMXnIR96EETLKM+to/+7Pp+9jF7lt4EIJUJ9kw8xd6CF+AtxXtSpOJTeI3GwVd4Ht7DGuiLdAuNIVPYdGmT9BaeOuvQz0fpMaqiO1DiC1yNZbCYxMLX0uVwHPN/UNGHOa2gR8kz9FU6Byv5MDxG98IW2A5uMhW9a4Ln4Fv4CdnNZLIL6249HIIvYfict1LWmRJapIyha5TTcIV2kwX+1+gk/xe46z8im+BD9i3W/uVkHsmCJ+ATXPXfkVxilsakeHgXT75EeBCr9i8wiHvwTSkJd9Ap2M1yYYk0jGuedeaNsTJFD7uZfEOLcTmjxck9n5/GeAY/gGcVP0dDYQdWAp4iYkd/AW8TK2bxPeUHsBXugj0sEpLZ43QD9bPXJRl+CsNsLlq9Ac+nBJKLmlZBK8Yh+/889hhqWAn5kE+WkyVQhpxZkOhfhZ4/gWeR07/Uv0VRq7DDO2QuiYT9eHrFYBbvU2jGRlFyJ+7DD2EW2QyDY00whPdKDEkmDqymUcUaRb/iacVOxYuKt5WT4RrctQ/iKn4MJ/HWkEkj5uJz+BvWegnunnTcP8XoxSy8w9poLdsHpSQOOvEMTMVzuwRzsARXshu13AR34H56HO+Qd+AEMZKl8CIcxp0Tjfu8Ee2rUU8lLMZV74Yn8HS8mQziSBMkQhrm6VsSSvJpD9rj5+x9eM4OoU9H4M94cviFX+lkOinD1WuEv/G9jBamQBUZwDt5FxTgTVnG3oI/QRLeriW4Rx/DefVYG6EwAQoUnxAK6WPz/Pm0le0jUXgbhmJVVePNPpOsRi8MGMcZiCTzIW/sMtT2DJ5lVYrH8fa1480QSSOlKxSL0e8P8CZ7B7r8NWSrCneAs2RxtbOocOaM6dMK8qfm5eY4JmdnZWak29MmpU5MSU6yWS2yOXFCQnxcbEx0VGREuCnMaAjVh+i0GrVKqZAYJZBebquolz0p9R4pxTZrVgbv2xpwoOG8gXqPjEMVF8p45HohJl8o6UTJ5u9JOgOSznFJYpRnwIyMdLncJnveLrPJPrJkQQ3Sd5bZamXPqKBdgu4XtB5piwUnyOUxLWWyh9TL5Z6KNS195fVlqG5Apy21lbq1GekwoNUhqUPKE23rHCDRhUQQNLp82gAFtR6d8sTZyso9sbYy7oGHJZc3NHmqFtSUl8VbLLUZ6R5S2mhb7gFbicdgFyJQKsx4lKUelTAjt/JoYLM8kD7Ud4fPCMvr7SFNtqaGpTUe1lDLbYTZ0W6ZJ/rakZhzXVRuKq259XxuPOsrj2mVebev71bZs31BzflcC29ra1EHzqXJFfV9FWj6Dkxi5SIZrdFNtTUesglNyjwSHlUgPretnI/Ur5Q9GluJraVvZT0uTVyfBxaus3jj4py7/cMQVy73VdfYLJ6ieFttQ1nCQAT0LVw3GOuUYy/kZKQPGMMCiR0INQSJEP35hHucJyghzqnKheOZJdwj22wsCI/cKKMnNTaMKZ837nzoa8xHMfzUEpzlacIVafVoSuv7jNP4OJ/vUSQbbXLfKcAKsI1+eeFIQ3BEmWw8BZzkdTJeasg/S3vsdk9aGi8RVSmuKfpYKPp5GelrfHSbrdMoI8L0QRXmtqF2Wham32LhC7zZ54Tl2PFsWFAT6MuwPN4Lzix7rYfWc87QWU7kYs7ZcJYzPr3ehpW8U3zrifSoU8b/GYxR4eUt0zwk6n9guwP8ykW2ygVLauTyvvpgbiurL
11-12 14:36:30.257: W/System.err(12374):    at org.json.JSON.typeMismatch(JSON.java:100)
11-12 14:36:30.257: W/System.err(12374):    at org.json.JSONObject.getJSONObject(JSONObject.java:573)
11-12 14:36:30.257: W/System.err(12374):    at pdf2app.models.Magazine.<init>(Magazine.java:74)
11-12 14:36:30.257: W/System.err(12374):    at pdf2app.activities.DownloaderService.parsePdfs(DownloaderService.java:490)
11-12 14:36:30.257: W/System.err(12374):    at pdf2app.activities.DownloaderService.getPDFs(DownloaderService.java:416)
11-12 14:36:30.257: W/System.err(12374):    at pdf2app.activities.DownloaderService.onHandleIntent(DownloaderService.java:183)
11-12 14:36:30.257: W/System.err(12374):    at android.app.IntentService$ServiceHandler.handleMessage(IntentService.java:65)
11-12 14:36:30.257: W/System.err(12374):    at android.os.Handler.dispatchMessage(Handler.java:99)
11-12 14:36:30.257: W/System.err(12374):    at android.os.Looper.loop(Looper.java:137) 
```

这是 out.toString()：

```
11-12 14:27:37.027: V/Loggggg(12308): {"pdf":"JVBERi0xLjQKJeLjz9MKNyAwIG9iaiAKPDwKL0ZpbHRlciAvRmxhdGVEZWNvZGUKL0xlbmd0aCAyNTMKPj4Kc3RyZWFtCnicXZDLbsMgEEX3fAXLZBHhR+JsLKQoUSQv+lDdfgCGsYtUA8J44b\/vAGkrdQE6w8yd4Q67drfO6MBevZU9BDpqozwsdvUS6ACTNqSsqNIyPKJ0y1k4wlDbb0uAuTOjbVvC3jC3BL\/R3UXZAfaEvXgFXpuJ7j6uPcb96twXzGACLQjnVMGIfZ6EexYzsKQ6dArTOmwHlPwVvG8OaJXiMn9FWgWLExK8MBOQtig4be93TsCof7lzVgyj\/BQeK0usLIq65MhV4iZxnd+ryMfMdeRT5mPkJvMp8jlzk2Y+usfpcT0\/rqhcvUdHaYfJSjShDfyu2VkXVel8A990ezYKZW5kc3RyZWFtIAplbmRvYmogCjkgMCBvYmogCjw8Ci9GaWx0ZXIgL0ZsYXRlRGVjb2RlCi9MZW5ndGggMTAwMDIKL0xlbmd0aDEgMTc4NjAKPj4Kc3RyZWFtCnic7Xt7YJPHkfjs7ifpk2RZsvwStrE+WbYxll9INn5gbPkZwAgMmMQmONj4gQ3GNn5AyAtISpOYpOEuzQNIC2meLWmRZUJECMFXck0fSSBNe6FNCiShbV4OXAvpNQHrZlfCQEqP9Hd\/3B+\/6mN2ZmdmZ2ZnZ3c\/2Xigb7ANwmAjMHC3rG7unaTSywDwGgAxt6wdUG7\/wyf3In0SQE5t712xuqVduQCgQx3Vn1Z0rW\/vzipWAIznkfejjrbm1sahnHCAuOfQxvQOZMwaX6\/B\/insJ3esHri5jnypA4jnPqK6elqaO\/SbeT8B++bVzTf35jKCsvgc7CvdzavbPiwO78V+LUCssbenf+AwJAcAnE1c3tvX1vt48e3J2N8IEFmGPIIP\/4QhqeZ9yiSVWgP\/335U3wKraq6ABPZtiAcIvIeA6xH4cHxO4LxqFdjHVwZOskhMVnIQQp8U+AYkw4fwMByCRvgFZVBFsqAeJGKBSUBJIdQQE8SCiuggDexQA7UQDXPg98QAe2AafEyqYRNJgfnwGCTBPIiBMvgX2EWuC3wEm+At0gm7cfSzxA1TYC6ZFTgBC6A28AL6AJgBj8B2Eg5WlOiIPXAcLfTD3fAi\/AcEYAk8qtqFVmphIXQHXoCl8CZZQm4MJMBs6IY74FF4HA7CKXIPGZVUgSbIg+XQRzQkkqSxOwPPQoHqmPb5wCuBo2BC\/cfR6qfUIVUHPgM3fCiRQAfuhkhw4dMN34N98C6xkDxWAeGQi74a4TbYw9IwxllwL87tRXIr2cPCA0\/ibPKhBTbASXIzGaU21THVmcAtYMb55WKkQ\/Ak\/Bschk\/QWjWpY6vHSwPzsF5lcEAVevoGfBN+hJn7MT6vECOxkdlo+d\/IcfIe62Z\/QMvPwBh8Dv9F0kgnuYOW0jtVzgubAs9DKs7QjTZmww3QBc+RVOImN+LYx+g6egfdwPaxd6U06XSgIHAY1JCNunfCD3Beb8Bb8DauVzXxkP+gd7AR1TcDt2K82dCBs\/gGPAX74RxRES0JI1FEIS6SjzO7lYyS9+hkaqf1bDnbo7ovsD5wP9iwVhqhDUeuhLtgM7wAR+B9+ATGSByOzMaRpaSW3E8eIK\/QI+wGtpQ9LLmlh6Xd0o+l86oI1Y\/H3xw\/iVnndnLAg08jtMMtmGs\/Pofht4SReJKIlmaSOWhpGWknt5Gt5CHyBHma7COvkqPkI3Ka\/JVa6H302\/QA\/Xd6hB5lk1k6q2Q72WuSTfqt9KWm+cLk8UPjpwP6gCPgCmwNPBZ4JzAmViEBK74UKrC6VuF5+A3YCg\/BdzDne+F1+DXW3QnxnIIzuAZfEjVW0ySMKInYyRSSgbO7gdSTdWSIPEieJD8h75FT5DwFGkaT8Emn0+kcupTeST+l55mO2VkZu5k9wn7JvpDWq5z47FY9rzqjPqVJkV87v+PC8XEY7xx\/eHxHIA9rUY2VF4l7LhfKsebm4Cq3whp8+mAtrMMc3YIZfwwrZw\/44AD8FE\/vI\/i8A++KePnzEa7EWbgA44TieqqIjE8w9hxcmQqslibShmsbfG4ld5J7yaP47CDfJY9jft8kvyRvkRPkA3IO5wQ0k5bR63BGtfRG2ojPMtpCN9EtdC8+b9D\/oO\/Q9+kXzMQimJVNYVVsBbuHDTEv28t+xX4tpUpl0ixplfSq9CbOfJZqtmqZqkW1RfW46gnVj1U\/V51SBdQPqr+n9qs\/1Og00zW1mjrNvZrvaw5o3tUE5ClYTx6Mfuplx9yD5EYpm24lAerHeb9MB9gv6LfJ7itOwiGMoBWWUT87SL9z21b2PnuO3gkgVQrxTDzFXoOX4DXVW1K06kN4lcbBZ3gefps105fpNmoh09kMabP0Gp466zHOJ+gJqqF7UOMTXI1lsJhMgj9J18NpzP8R1RDmtJoeJ7vpT+gcrORj8CQ9ANtgF7SRfIyuFZ6HL+BfyH6mkH1YdxvgKHwKJy9FK2VfKKelagtdqy7CFdpPFgRepVMDn+Cuf49shnfYF1j715N5JBuehg9w1X9NcolVGpfi4U08+RJhB1btH2EE9+DPpWTcQedgP8uFJdJJXPPsCz8br1QNsLvI57QMlzNWnNzz+WmMZ\/CjeFbxczQc9mAl4CkidvQn8DpJwiy+pf4tbIcH4EUWDSnsKbqRBthPJQX+FU6yuej1djyfEkguWloNnTgPJfCH8SfRwkoogAKynCyBSpTMgsTAaoz8aTyL3IGlgW2qBpUD3iBzSTQcwtPLgll8WKUdH0PNvbgP34FZZAuMjLfCKN4rFpJCnFhNY6q1qq2qH6j2ql5Wva6eBjfjrt2Bq\/g+nMVbQyEtmIuP4S9Y6+W4ezJw\/5RhFLPwDuuiDewgVJA46MUzMA3P7XLMwRJcyX60cifch\/vpKbxD3oAzxESWwstwDHdOLO7zFvQvo50aWIyr3g9P4+l4FxlBTiskQjrm6QsSTgroAPrj5+zDeM6OYkzvwh\/w5AiIuDLIDFKJq9cCf+F7GT1Mh1oyjHfyPijEm7KSvQa\/h2S8Xctxjz6J45qwNsJhMhSqPiAUMsbnBQpoJztIYvA2DMeqqsObfSZZg1EYcR4XIJrMh7zx69DabjzLalVP4e3rwJshmkZLN6gWY9y\/xZvsDegL1JPtGtwB7vLFde7SkpnFM4oKC\/Lzcl3OaTnZWZkZjvSpaVNSU5LtSTbFmjg5IT5ukiU2Jjoq0hxhMoYbwvQ6raxRqyRGCWRU2aubFG9qk1dKtc+alcn79mZkNF\/GaPIqyKq+UserNAk15UpNN2q2f0XTHdR0T2gSk1IMxZkZSpVd8b5eaVf8ZMmCeqTvr7Q3KN4xQXsEvVXQBqRtNhygVFk6KhUvaVKqvNVrO4aqmirR3LBeV2GvaNNlZsCwTo+kHilvrL13mMSWEEHQ2KqiYQqyAYPyxtkrq7yT7JU8Ai9LqWpu9dYuqK+qjLfZGjIzvKSixb7cC\/Zyr9EhVKBCuPGqK7wa4Ubp5LOBLcpwxujQfX4TLG9yhLXaW5uX1ntZcwP3EeFAv5Xe2FtOWS510bi5ov7uy6XxbKjK0qnw7tDQ3Yp314L6y6U23jY0oA0cS1Oqm4aq0fV9mMSaRQp6o5sb6r1kM7pU+Ez4rILza7NXcU7TSsWrtZfbO4ZWNuHSxA15YeF6my8uzr0\/cBLiqpShunq7zVsab29orkwYjoKhhetHJrmVSVdKMjOGTRHBxA6HG0NEmOFyom1CJiihzqmahROZJTwi+2wsCK\/SomAk9XacUwFv2gpgqKUA1fDTQHCUtxVXpNOrrWgaMhVxPh\/vVaWY7MrQOcAKsI99eiWnOcRRp5jOASd5nUyUGsov0l6Hw5uezktEU4FrijGWiH5eZsZaP91p7zUpiDB9UIu5bW4oysb022x8gbf43bAcO96NC+qDfQWWx\/vAne1o8NImLhm9KIlezCUbL0omhjfZsZL3im890 
```

看起来问题出在一行：`String json =jsonMap.getJSONObject("pdf").toString();`因为在该行之后的调试器中我收到错误

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-12T13:42:27.530

好像解析错了

```
 JSONObject jsonMap = new JSONObject(out.toString());
            String json =jsonMap.getString("pdf"); 
```

然后进行base64解码。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-12T13:41:27.633

而不是`jsonMap.getJSONObject("pdf")`你应该使用`jsonMap.getString("pdf")`

# delphi - 如何使 JclAppInstances 独立于应用程序文件版本？

> ID：13344615
> 
> 赞同：0
> 
> 时间：2012-11-12T13:30:53.097
> 
> 标签：delphi, jedi

我正在尝试使用 JclAppInstances 控制我的应用程序实例。它工作正常，直到我不在项目设置中更改我的文件版本。如何使 JclAppInstances 独立于应用程序文件版本，因此即使版本不同也不会让用户启动应用程序的多个副本？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-12T16:37:59.033

据我所知，您所说的课程并不关心应用程序*版本*。它基于应用程序*路径*，但前提是您自己没有指定唯一的应用程序 ID。

该`TJclAppInstances.InitData`方法使用此代码来初始化内部应用程序 ID：

```
if ExplicitUniqueAppId <> '' then
  FUniqueAppID := JclAIPrefix + ExplicitUniqueAppId
else
  FUniqueAppID := AnsiUpperCase(JclAIPrefix + ParamStr(0)); 
```

`ExplicitUniqueAppId`是一个开始为空的全局变量。如果它没有设置为任何其他值，那么您可以看到代码用于`ParamStr(0)`设置应用程序 ID。`ParamStr(0)`返回应用程序的完整路径和文件名。如果您安装了多个版本的程序，那么它们必须位于不同的位置，这就是为什么您的程序似乎关心应用程序版本的原因。事实上，只是它们在不同的位置；具体版本无关。

要设置`ExplicitUniqueAppId`为非空值，您需要**调用`JclAppInstances`**. 它希望参数是特定于应用程序的 GUID（您可以通过在 IDE 中按`Ctrl`++来生成`Shift`）`G`，但它实际上可以是您选择的任何字符串，只要它唯一地标识您的应用程序即可。

# android - 从操作栏菜单项获取视图

> ID：13344616
> 
> 赞同：26
> 
> 时间：2012-11-12T13:30:54.480
> 
> 标签：android

我有一个`PopupWindow`我想锚定到一个操作栏菜单项，但似乎无论如何都无法获得`View`我想要单击的项目。这是该`PopupWindow` `showAsDropDown()`方法所必需的。

有谁知道如何实现这一目标？

* * *

## 回答 #1

> 赞同：43
> 
> 时间：2012-11-12T13:32:41.080

您可以使用菜单项 id 获取视图，方法是在`onOptionsItemSelected`..

```
findViewById(R.id.menu_item); 
```

* * *

## 回答 #2

> 赞同：39
> 
> 时间：2013-08-25T09:24:37.997

findViewById 不必在 onOptionsItemSelected 上运行以获取操作项的视图。

但是，请注意，有时操作项会位于溢出菜单内，因此您可能会得到一个空值。

那么，你怎么能做到呢？

这是一个示例代码：

```
public boolean onCreateOptionsMenu(final Menu menu) {
  getSupportMenuInflater().inflate(R.menu.main, menu);
  new Handler().post(new Runnable() {
    @Override
    public void run() {
      final View menuItemView = findViewById(R.id.menu_action_item);
      ... 
```

这是在 android 4.1.2 和 android 2.3.5 上使用 actionBarSherlock 库时测试的。

另一种选择是使用更广泛的方式，在[showcaseView 库](https://github.com/Espiandev/ShowcaseView)上使用，[here](https://github.com/Espiandev/ShowcaseView/blob/master/library/src/com/github/espiandev/showcaseview/ShowcaseView.java)。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2016-07-03T11:22:54.600

**每个地方都调用：**

```
activity.findViewById(R.id.menu_item); 
```

如果您在**片段**中的代码不使用：

```
getView().findViewById(R.id.menu_item); 
```

它将返回*null*。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2016-10-21T08:55:30.943

我也遇到了这个问题， findViewById 应该在我身边工作，这里是示例代码：

```
private void setDrawable(final Menu menu) {
    if (menu == null || menu.size() == 0) return;

    Utils.postToUiHandler(new Runnable() {
        @Override
        public void run() {
            int size = menu.size();
            for (int i = 0; i < size; i++) {
                MenuItem menuItem = menu.getItem(i);
                if (menuItem != null) {
                    View view = activity.findViewById(menuItem.getItemId());
                    if (view != null) {
                        Drawable drawable = ThemeDrawables.get(ThemeWorker.Segment.DEFAULT).actionbarButton();
                        if (drawable != null && view.getBackground() != drawable) {
                            int sdk = android.os.Build.VERSION.SDK_INT;
                            if (sdk < android.os.Build.VERSION_CODES.JELLY_BEAN) {
                                view.setBackgroundDrawable(drawable);
                            } else {
                                view.setBackground(drawable);
                            }
                        }

                    }
                }
            }
        }
    });

} 
```

请注意，我在 UI 线程中创建了 findViewById，因为 menuitem 的视图没有膨胀，因此应该在 UI 线程中运行

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2019-12-29T15:28:36.953

只需调用`findViewById`（您的菜单 ID），但请记住不要调用，`OnCreate(...)`因为此时菜单没有膨胀，而是调用它`onOptionsItemSelected`

# php - 选择 * 从 $category

> ID：13344617
> 
> 赞同：0
> 
> 时间：2012-11-12T13:30:56.827
> 
> 标签：php, mysql, performance, mongodb

我想做一个在 mysql 中的请求，比如 `SELECT * FROM '.$category.'`<-- from 表是随机的，它通过 POST 给出。我该怎么做`MongoDB`？

我开始喜欢：

```
$db->$category->

$category = $_POST['category'];
$category = $liste[$category]; 
```

谁能帮帮我吗？顺便提一句。：

性能问题：

***在 mongodb 中做一个以上的集合是否有任何理由更快？例如，我放了 10 个集合，每个集合 100 万，或者 1 个集合 1000 万？***

亲切的问候

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-12T13:37:46.507

`$db->selectCollection( $category )->find();`

这将为您提供来自某个集合的所有结果作为 MongoCursor 对象。不确定您还在寻找什么。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-12T14:09:16.867

> 在 mongodb 中做一个以上的集合是否有任何理由更快？例如，我放了 10 个集合，每个集合 100 万，或者 1 个集合 1000 万？

与许多数据库一样，MongoDB 可以水平扩展，不仅如此，MongoDB 在这些问题上的内部结构更喜欢在 DB 级别上工作（即它有一个 DB 级别的锁，虽然读锁是并发的）。

这是一个经典问题：如何扩展数据库？

这是一个巨大的话题，在规模和广度上几乎是无形的。我建议您出于某种原因首先在“数据库扩展”或更具体的“mongodb 扩展”上进行 Google 搜索。

MongoDB 和 MySQL 都可以轻松地在一个集合中处理 1000 万条记录，并且将它们分开可能绝对不会带来前所未有的性能提升。

您最好只拥有两个集合：-`post`并且您可以通过类别文档`category`选择一个帖子，如下所示：`_id`

```
$db->post->find(array('category' => new MongoId('blah'))); 
```

我想如果您要获得疯狂（边界线愚蠢）的并发写入量并且您要使单个数据库上的锁饱和，那么您会将集合（数据）拆分为单独的数据库，但是，我非常怀疑您永远需要那个。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-12T14:09:39.037

我建议您花几分钟时间阅读 mongodb php 扩展的基础知识 [http://www.php.net/manual/en/mongocollection.find.php](http://www.php.net/manual/en/mongocollection.find.php)

它很容易上手，您可以按照示例进行操作。

关于性能，这在很大程度上取决于您的设置。

我创建了两个集合并填充了演示数据：

一百万：

```
for (var i=0; i<100000; i++) { cat = { name : 'category'+i }; db.onemillion.save(cat); } 
```

一千万：

```
for (var i=0; i<10000000; i++) { cat = { name : 'category'+i }; db.tenmillion.save(cat); } 
```

在我的设置/硬件上，这些是查询类别名称的结果：

一百万：

```
> db.onemillion.find({'name':'category12345'}).explain();
{
    "cursor" : "BasicCursor",
    "isMultiKey" : false,
    "n" : 1,
    "nscannedObjects" : 1000000,
    "nscanned" : 1000000,
    "nscannedObjectsAllPlans" : 1000000,
    "nscannedAllPlans" : 1000000,
    "scanAndOrder" : false,
    "indexOnly" : false,
    "nYields" : 1,
    "nChunkSkips" : 0,
    "millis" : 331,
    "indexBounds" : {

    },
    "server" : "station7.local:27017"
}
> 
```

一千万：

```
> db.tenmillion.find({'name':'category12345'}).explain();
{
    "cursor" : "BasicCursor",
    "isMultiKey" : false,
    "n" : 1,
    "nscannedObjects" : 10000000,
    "nscanned" : 10000000,
    "nscannedObjectsAllPlans" : 10000000,
    "nscannedAllPlans" : 10000000,
    "scanAndOrder" : false,
    "indexOnly" : false,
    "nYields" : 4,
    "nChunkSkips" : 0,
    "millis" : 3301,
    "indexBounds" : {

    },
    "server" : "station7.local:27017"
}
> 
```

正如预期的那样。

您可以使用它来测试您的案例。

我无法想象一千万个类别集合的用例。

因此，如果您能提供更多信息，那就更好了。

# jquery - 创建下拉组合框的问题

> ID：13344618
> 
> 赞同：1
> 
> 时间：2012-11-12T13:30:57.413
> 
> 标签：jquery, css

我正在尝试制作一个下拉组合框（这一次不想尝试 JQuery 插件）。

这是我的 HTML：

```
<div style="display: table-cell; width:150px; z-index:-1;" id="supdiv">
        <input size='10' id='supinput'>
            <div id='supsel' style='position:absolute;z-index:0;background-color:#b0c4de;'>
            <input type ='checkbox' value='0' id = 'supplier[]' name='supplier'>A</br>
            <input type ='checkbox' value='1' id = 'supplier[]' name='supplier'>A</br>
            <input type ='checkbox' value='2' id = 'supplier[]' name='supplier'>A</br>
            <input type ='checkbox' value='3' id = 'supplier[]' name='supplier'>A</br>

            <input type='button' value='OK' id='supclose'>
            </div>
</div> 
```

当页面加载时，我隐藏了 supsel div。

```
$('#supsel').hide(); 
```

当焦点来到支持输入时，我会显示 div。另外，单击“确定”按钮时，我会隐藏 div。

```
$('#supinput').focus(function(){
            $('#supsel').show()
    }); 
 $('#supclose').click(function(){
            $('#supsel').hide()
    }); 
```

现在我的问题是，如果用户单击页面上的其他任何位置或焦点移动到任何其他输入或区域，我想隐藏 div，但我希望 div 一直显示到用户选择复选框或重点是 SUPSEL。我怎么做？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-12T13:39:57.970

## *[jsBin 演示](http://jsbin.com/egasov/1/edit)*

`</br>`应该`<br />`
和`<input>`应该是`<input />`

而不仅仅是添加：

```
$('#supdiv').on('click',function(e){
    e.stopPropagation(); // prevent clicks on your parent div to propagate to doc.
});
$(document).on('click focusout',function(event){   // register clicks focusouts
  if(event.target.id !== 'supdiv'){  // if click was not on your parent bropbox
    $('#supsel').hide();             // than do something about it! ;)
  }  
}); 
```

# javascript - VisualSearch.js 子构面

> ID：13344620
> 
> 赞同：0
> 
> 时间：2012-11-12T13:31:01.857
> 
> 标签：javascript, cakephp, backbone.js

我正在尝试实现一个 VisualSearch.js 查询框，可用于搜索特定对象的属性。VisualSearch.js 提供了可以有类别的 Facets，但有人知道我可以为模型名称加载一个 facet 的方法。例如“用户”）然后一旦点击/选择加载第二个子 facet 之前的属性列表让用户有机会最终点击将通过 JSON 调用加载的值。我已经搜索并找不到任何对此类功能的引用，但我可能只是使用了不正确的术语“Sub Facet”。

这是我一直在玩的 JSFiddle。 [http://jsfiddle.net/Savvy84/HRuAP/13/](http://jsfiddle.net/Savvy84/HRuAP/13/)

```
var visualSearch = VS.init({
    container: $('#visual_search'),
    query: '',
    callbacks: {
        search: function(query, searchCollection) {},
        facetMatches: function(callback) {
            callback([
                {
                value: 'user.email',
                label: 'users.email',
                category: 'Users'},
                 {
                value: 'job.name',
                label: 'job.name',
                category: 'Jobs'},
                 {
                value: 'job.startDate',
                label: 'job.startDate',
                category: 'Jobs'}
            ]);
        },
        valueMatches: function(facet, searchTerm, callback) {
            if (searchTerm.length > 0) {
                //pass the facet to the search and let the server deal with it.
                switch (facet) {
                case 'user.email':
                    callback([
                        {
                        label: 'john.smith@example.com'},
                           {
                        label: 'jane.doe@example.com'}
                        ]);
                        break;
                }
            }
        }
    } }); 
```

非常感谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-14T13:28:13.450

阅读完源代码后，我可以看到要创建这个功能，我必须派生 VisualSearch.js 并编辑它的一些类。

[http://documentcloud.github.com/visualsearch/docs/search_facet.html](http://documentcloud.github.com/visualsearch/docs/search_facet.html)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-12-24T13:16:59.067

可能我现在回答这个问题太晚了，但它可能对某些人有所帮助。我同意@andrewsavil 的观点，即您需要修改视觉搜索库本身。

您需要将以下代码添加到 setupAutocomplete 函数内的 search_facet.js 文件中：-

```
// Renders the results grouped by the categories they belong to.
this.box.data('uiAutocomplete')._renderMenu = function(ul, items) {
    var category = '';
    _.each(items, _.bind(function(item, i) {
      if (item.category && item.category != category) {
        ul.append('<li class="ui-autocomplete-category">'+item.category+'</li>');
        category = item.category;
      }

      if(this._renderItemData) {
        this._renderItemData(ul, item);
      } else {
        this._renderItem(ul, item);
      }

    }, this));
  }; 
```

# java - 给定空间中的一组点，从集合中确定最接近空间中另一个点的点（不在集合中）

> ID：13344622
> 
> 赞同：-1
> 
> 时间：2012-11-12T13:31:12.360
> 
> 标签：java, algorithm, math, graphics

我最近被要求实现两个代表`Point2D`点和`Point3D`点的类。距离和其他方法工作正常，但只剩下一个需要实现，我无法弄清楚算法。它是这样声明的：

**“给定空间中的一组点，从集合中确定最接近空间中另一个点的点（不在集合中）”**

下面是两个类。有人可以帮我解决最后需要的算法吗？

```
 public class Point2D {
    protected double x;
    protected double y;

    public Point2D() { }

    public Point2D(double x, double y)
    {
        this.x = x;
        this.y = y;
    }

    public double getX() { return x; }
    public void setX(double x) { this.x = x; }
    public double getY() { return y; }
    public void setY(double y) { this.y = y; }

    public double Point2DDistance(Point2D punct)
    {
        double px = this.x - punct.x;
        double py = this.y - punct.y;

        return Math.sqrt((px * px) + (py * py));
    }

    public String toString() {
        return "(" + x + ", " + y + ")";
    } 
}

public class Point3D extends Point2D {
    private double z;

    public Point3D() { }

    public Point3D(double x, double y, double z)
    {
        super(x, y);
        this.z = z;
    }

    public double getZ() { return z; }
    public void setZ(double z) { this.z = z; }

    public double Point3DDistance(Point3D punct)
    {
        double pz = this.z - punct.z;

        return this.Point2DDistance(punct) + Math.sqrt(pz * pz);
    }

    public String toString() {
        return "(" + this.x + ", " + this.y + ", " + this.z + ")";
    }
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-12T13:39:07.313

遍历这些点。

对于每个点，

*   如果这是第一个点，则设置`min_distance`= 该点到未设置点*P*的距离，并将该点复制到`closestP`, 和

*   否则，如果该点到*P*的距离小于`min_distance`，则设置`min_distance`为该点的距离，并将该点复制到`closestP`。

现在`closestP`保存最近的点，并`min_distance`保存它与*P*的距离。

欢呼！

# c# - Process.Start 找不到现有文件

> ID：13344625
> 
> 赞同：5
> 
> 时间：2012-11-12T13:31:36.677
> 
> 标签：c#, .net, file, process, io

*   我有一个可执行文件 ( `C:\Test\n4.TestConsole.exe`) 的路径。
*   `File.Exists(path)`返回`true`。
*   `File.OpenRead(path)`给我它的流没有问题。
*   `Process.Start(path)`抛出`System.ComponentModel.Win32Exception`此消息：

    > 该系统找不到指定的文件。

我究竟做错了什么？

[Windows 8 专业版 x64 - .NET Framework 4.5]

* * *

**编辑：**这是代码。

```
public partial class Form1 : Form
{
    public string Path { get; set; }

    public Form1()
    {
        InitializeComponent();
    }

    private void button1_Click(object sender, EventArgs e)
    {
        // I put a breakpoint here and verify the Path's value is
        // C:\Test\n4.TestConsole.exe.

        // File.Exists returns true.
        MessageBox.Show(File.Exists(Path));

        // File.OpenRead doesn't throw an exception.
        using (var stream = File.OpenRead(Path)) { }

        // This throws the exception.
        Process.Start(Path);
    }
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-12T16:12:36.280

它可能是缺少 DLL 或其他依赖项。您可能想比较 PATH 环境变量，当您直接通过运行它`Process.Start(exe_path)`时，当您通过运行它时`Process.Start("cmd", "/k " + exe_path)`。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-12T16:17:00.223

尝试这个：

```
private void button1_Click(object sender, EventArgs e)
{
    ProcessStartInfo psi = new ProcessStartInfo();
    psi.WorkingDirectory = @"C:\Test";
    psi.FileName = "n4.TestConsole.exe";
    Process.Start(psi);
} 
```

# android - 分屏样式

> ID：13344634
> 
> 赞同：0
> 
> 时间：2012-11-12T13:31:57.113
> 
> 标签：android, user-interface

我正在开发一个屏幕布局与此处显示的 GMail 屏幕截图类似的应用程序

[http://newbestgadget.com/wp-content/uploads/2012/09/GoTab-GTi8.jpg](http://newbestgadget.com/wp-content/uploads/2012/09/GoTab-GTi8.jpg)

我的问题是如何在左侧列表视图（？）的行上实现样式。我假设这是通过使用背景图像来实现的？这是实现这一目标的最佳方式吗？

所选项目的背景图像会是什么样子？

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-12T14:04:04.077

是的，这是一个背景图像技巧。右手边有一个带有一点阴影的白色九边形。您在所选列表项的最右侧看到的小三角形部分也是与右侧区域匹配的九块图像。这是仅对选定项目可见的虚拟视图的背景（右对齐，位于项目布局的其余部分之上）。这样，当您滚动列表时，三角形也会随之移动。

详细答案：[https ://stackoverflow.com/a/14032449/1531054](https://stackoverflow.com/a/14032449/1531054)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-12T14:01:35.077

你需要利用[`Fragments`](http://marakana.com/s/post/1250/android_fragments_tutorial). 它是设计交互式屏幕的新方法。

# actionscript-3 - 为什么 Adob e Air 中的 CameraUI 有时会在我的设备上崩溃

> ID：13344635
> 
> 赞同：0
> 
> 时间：2012-11-12T13:32:02.460
> 
> 标签：actionscript-3, crash, camera

我建立了一个动作脚本项目，并在其中添加了cameraUI来拍照，有时它工作正常，有时在启动时，应用程序自行崩溃，我很确定这是他们代码中某处的内存泄漏，谁能帮忙我解决问题？

我的设备是最新 iOS 6.0.1 的 iPhone 4s

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-13T07:58:56.820

我可能已经知道问题出在我的设备上，我认为必须不时重置内存，我只是重新启动设备，它工作正常，但无论如何都应该处理。

# python - 为什么在 python 中使用 len(list) 而不是 list.len()？

> ID：13344644
> 
> 赞同：6
> 
> 时间：2012-11-12T13:32:27.190
> 
> 标签：python, list

可能是个奇怪的问题。但是我一直在摸索，为什么如果你想得到一个列表的长度，你不能简单地说 list.len() 并且你必须将列表传递给 len() 来获得它的大小？这个 len() 实际上是从哪里来的？

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-11-12T13:33:59.353

你可以得到很多项目的长度。列表、字典、集合、其他集合。因此，内部调用的[内置`len()`](http://docs.python.org/2/library/functions.html#len)`type(obj).__len__(obj)`函数为您提供了一个标准 API 来获取长度。

如果所有这些集合类型都有一个`len()`直接调用的方法，那么没有什么可以阻止某人创建使用例如`.length()`或`.length`属性的自定义集合类。

[以下](http://mail.python.org/pipermail/python-3000/2006-November/004643.html)是 Python 的创造者 Guido van Rossum 的解释：

> 首先，我出于 HCI 的原因选择`len(x)`了（来晚得多）。实际上有两个相互交织的原因，都是 HCI：`x.len()``def __len__()`
> 
> (a) 对于某些运算，前缀符号比后缀读起来更好——前缀（和中缀！）运算在数学中有着悠久的传统，它喜欢视觉帮助数学家思考问题的符号。将我们重写公式的简单性与使用原始 OO 表示法做同样事情的笨拙进行比较`x*(a+b)`。`x*a + x*b`
> 
> (b) When I read code that says `len(x)` I *know* that it is asking for the length of something. This tells me two things: the result is an integer, and the argument is some kind of container. To the contrary, when I read `x.len()`, I have to already know that x is some kind of container implementing an interface or inheriting from a class that has a standard `len()`. Witness the confusion we occasionally have when a class that is not implementing a mapping has a `get()` or `keys()` method, or something that isn't a file has a `write()` method.
> 
> Saying the same thing in another way, I see 'len' as a built-in *operation*. I'd hate to lose that. I can't say for sure whether you meant that or not, but 'def len(self): ...' certainly sounds like you want to demote it to an ordinary method. I'm strongly -1 on that.

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-11-12T13:33:28.030

它实际上来自`__len__()`：

```
In [15]: lis=[1,2,3]

In [16]: lis.__len__()
Out[16]: 3 
```

[`object.__len__(self)`：](http://docs.python.org/2/reference/datamodel.html#object.__len__)

> 调用以实现内置函数 len()。应返回对象的长度，整数 >= 0。此外，未定义**非零**() 方法且其**len** () 方法返回零的对象在布尔上下文中被认为是假的。

# magento - 为 magento 商店配置分析

> ID：13344650
> 
> 赞同：1
> 
> 时间：2012-11-12T13:32:37.287
> 
> 标签：magento, google-analytics

几个月来，我一直在维护一个 magento 商店的技术方面，并且仍在学习。谷歌分析显示访问者和来源的数量，但没有关于内容的信息。当我进入管理部分时，我惊讶地发现启用了谷歌分析，但我们仍然可以看到访问者数量和其他基本信息。

在浏览代码时，我看到分析脚本被硬编码在网站的页脚中。所有，我想知道的是，这是为 magento 站点配置分析的正确方法。如果是，那么为什么我看不到有关网站页面的任何内容详细信息。

或者我应该只是从页脚中删除硬编码代码并通过 admin > sales > google api 启用分析。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-12T14:18:17.830

Magento 中的集成分析运行良好（并且可能比在模板中包含跟踪代码更有意义）。但是，由于 Magento 使用单页结帐流程，因此默认情况下您无法在结帐流程上进行漏斗可视化。

我不得不手动修改 \skin\frontend\base\default\js\optcheckout.js 中的跟踪功能（在 Magento 1.7 安装文件中的第 110 行附近）。

找到函数 gotoSection 并包含一个虚拟网页浏览：

```
gotoSection: function(section)
{
    try {
        _gaq.push(['_trackPageview', '/checkout/onepage/' + section + '/']);
    } catch(err) {
        // do nothing
    }
    var sectionElement = $('opc-'+section);
    section = $('opc-'+section);
    sectionElement.addClassName('allow');
    this.accordion.openSection('opc-'+section);
    this.reloadProgressBlock(section);
}, 
```

这样，结账的每一步（帐单地址、送货地址等）都将在 Analytics 后端显示为单个网页浏览量，您可以为结账设置目标和渠道，以查看访问者退出结账流程的位置。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-12T13:39:36.940

你是对的，因为 Magento 配置中已经有一个部分，你只需要插入帐号。验证和跟踪您的商店可能需要几分钟时间。

刚刚找到这个教程，请查看以下链接：

[http://www.magentocommerce.com/knowledge-base/entry/setting-up-google-analytics](http://www.magentocommerce.com/knowledge-base/entry/setting-up-google-analytics)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-05-21T15:31:17.903

基于 Eike 回答的附加信息：如果您使用的是 Universal Analytics，则应在 gotoSection 中使用此脚本：

```
gotoSection: function (section, reloadProgressBlock) {

    try {
        ga('send', 'pageview', '/checkout/onepage/' + section + '/');
    } catch(err) {
        // do nothing
    }

    if (reloadProgressBlock) {
        this.reloadProgressBlock(this.currentStep);
    }
    this.currentStep = section;
    var sectionElement = $('opc-' + section);
    sectionElement.addClassName('allow');
    this.accordion.openSection('opc-' + section);
    if(!reloadProgressBlock) {
        this.resetPreviousSteps();
    }
}, 
```

# java - 用 Ant 脚本替换正则表达式

> ID：13344655
> 
> 赞同：2
> 
> 时间：2012-11-12T13:33:07.020
> 
> 标签：java, ant

我有一些问题`replaceregexp`。为了更容易理解，我将使用简单的示例，而不是真实的代码。

所以假设我有 2 个 java 文件：

第一类.java

```
/**
 * UNDESIRABLE COMMENTS ABCDEFGHIJ ABCDEFGHIJ ABCDEFGHIJ ABCDEFGHIJ ABCDEFGHIJ
 * ABCDEFGHIJABCDEFGHIJABCDEFGHIJABCDEFGHIJABCDEFGHIJABCDEFGHIJ
 */
public class firstClass{
    public String firstFunction(){
         <instructions>
    }

    /**
    * My function's description that I want to keep
    */
    public String secondFunction(){
         <instructions>
    }
} 
```

第二类.java

```
/**
 * UNDESIRABLE COMMENTS ABCDEFGHIJ ABCDEFGHIJ ABCDEFGHIJ ABCDEFGHIJ ABCDEFGHIJ
 * ABCDEFGHIJABCDEFGHIJABCDEFGHIJABCDEFGHIJABCDEFGHIJABCDEFGHIJ
 */
public class secondClass{
    public String firstFunction(){
         <instructions>
    }
} 
```

所以我想删除我项目中每个java文件的“不受欢迎的评论”部分，但我想用ANT来做，而不是手动。为此，我正在使用这个：

```
<replaceregexp flags="s">
    <regexp pattern="UNDESIRABLE COMMENTS.+\*/"/>
    <substitution expression="*/"/>
    <fileset dir=".">
        <filename name="*.java"/>
    </fileset>
 </replaceregexp> 
```

我想要的是得到这个代码：

第一类.java

```
/**
 */
public class firstClass{
    public String firstFunction(){
         <instructions>
    }

    /**
    * My function's description that I want to keep
    */
    public String secondFunction(){
         <instructions>
    }
} 
```

第二类.java

```
/**
 */
public class secondClass{
    public String firstFunction(){
         <instructions>
    }
} 
```

它适用于 secondClass.java 但不适用于第一个文件。当有其他注释时会出现问题，例如函数的描述。文件 secondClass.java 结果很好，但在 firstClass.java 我得到了这个：

```
/**
    */
    public String secondFunction(){
         <instructions>
    }
} 
```

从“不受欢迎的评论”开始到我的第二个功能描述结束之间的所有内容都被删除了。

所以问题是：当我的 replaceregexp 找到更多 */ 时，它会停在最后一个，并删除“UNDESIRABLE COMMENTS”和最后一个 */ 之间的所有内容。

您有什么解决方案可以删除“不良评论”和找到的第一个 */ 之间的内容吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-12T13:39:42.230

您的问题是`+`正则表达式中的量词是[greedy](http://docs.oracle.com/javase/6/docs/api/java/util/regex/Pattern.html#greedy) ，并且在仍然匹配的同时会消耗尽可能*多的输入。*尝试

```
UNDESIRABLE COMMENTS.+?\*/ 
```

取而代之 -`+?`表示与`+`但[不情愿](http://docs.oracle.com/javase/6/docs/api/java/util/regex/Pattern.html#reluc)相同，即它将尽可能*少*地匹配，同时仍会产生整个表达式的整体匹配。

# xcode - 从 UIViewcontroller 链接到 UITabBarController 页面

> ID：13344660
> 
> 赞同：4
> 
> 时间：2012-11-12T13:33:22.980
> 
> 标签：xcode, uiviewcontroller, uitabbarcontroller

我有一个链接问题，我使用的是 xib，而不是故事板。

我有一个 UITabBarController 系统和一些其他视图控制器，它们远离标签栏系统。我的问题是我可以使用按钮从其中一个视图控制器链接回 UITabBarController 上的某个页面吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-12T22:40:49.203

UITabBarController 是父级，选项卡下的 ViewControllers 是子级。您可以使用 parentViewController 属性从 childViewControllers 访问 TabBarController。

因此，如果您有一个带有 2 个选项卡的 UITabBarController，其中包含 ViewController1 和 ViewController2，您可以在其中任何一个中使用此行。

```
UITabBarController* tabBarController = (UITabBarController*)self.parentViewController;
// So if for example you have a button in ViewController2 and you need to show
// ViewController1 when it is pressed, you can do the following
tabBarController.selectedIndex = 0; 
```

# php - Yii CActiveDataProvider 多对多

> ID：13344664
> 
> 赞同：3
> 
> 时间：2012-11-12T13:33:38.983
> 
> 标签：php, yii, yii-relations

我不明白如何在 CActiveDataProvider 中实现多对多关系。

起初的情况，我有一个具有以下关系的模型“公司”：

```
return array(

        'owner'     => array(self::HAS_ONE, 'User', 'user_id'),
        'admins'    => array(self::MANY_MANY, 'User', '{{company_user}}(company_id,user_id)', 'condition' => 'is_admin = 1'),
        'members'   => array(self::MANY_MANY, 'User', '{{company_user}}(company_id,user_id)'),
        'standard_members' => array(self::MANY_MANY, 'User', '{{company_user}}(company_id,user_id)', 'condition' => 'is_admin = 0'),
); 
```

现在我想获得一家公司的所有管理员。通常我会这样做：

```
$company = Company::model()->find('company_id=1');
var_dump($company->with('admins')->findAll()); 
```

所以我有一家公司的所有管理员。

但是我没有解析，如何使用 CActiveDataProvider 来完成。

```
$dataProvider_admins = new CActiveDataProvider('Company', array(

'criteria' => array(

    'with' => array(

        'admins' => array('condition' => 'company_id='.$company->id)
    ),
),
'pagination' => array(

    'pageSize' => 20,
),
));

var_dump($dataProvider_admins->getData()); 
```

但是通过这种方式，我得到了所有管理员的公司记录，而不是包含所有管理员的数组。

更新：我可以为关系表创建一个模型`{{company_user}}`并使用它，但我认为它不是正确的方法，不是吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-12T13:47:03.007

您可以尝试以下操作：

```
$dataProvider_admins = new CActiveDataProvider('Company', array(
    'criteria' => array(
        'with' => array('admins'),
        'condition' => 'company_id=:id', 
        'params' => array("id" => $company->id) 
    ),
    'pagination' => array(
        'pageSize' => 20,
    ),
)); 
```

编辑：上面将创建将返回公司模型列表的数据提供者。如果要获取用户列表，则需要指定“用户”模型。'with' 属性使用关系来构建连接条件。

您可以像在其他答案中一样使用连接条件，也可以在用户模型中定义关系，然后重用关系。

尝试如下操作，请检查公司关系是否在用户模型上定义。

```
$dataProvider_admins = new CActiveDataProvider('User', array(
    'criteria' => array(
        'with' => array('companies'),
        'condition' => 'companies.company_id=:id and is_admin = 1', 
        'params' => array("id" => $company->id) 
    ),
    'pagination' => array(
        'pageSize' => 20,
    ),
)); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-13T10:39:14.350

我找到了一个很好的解决方案。我使用我想要展示的模型。在这种情况下，管理员是用户。

现在我手动加入表格。

```
$dataProvider_admins = new CActiveDataProvider('User', array(

    'criteria' => array(

        'join' => 'LEFT JOIN `{{company_user}}` ON `id` = `user_id` AND `company_id` = '.intval($company->id),
        'with' => array('profile'),
    ),
    'pagination' => array(
        'pageSize' => 20,
    ),
)); 
```

整个 CActiveDataProvider 会被`Company`模型返回，所以是逻辑封装的。

```
$dataProvider = Company::model()->find('id=5')->adminsDataProvider; 
```

我希望解决方案对某人有所帮助。

# java - IBM RFT 突然变慢了

> ID：13344672
> 
> 赞同：0
> 
> 时间：2012-11-12T13:34:11.803
> 
> 标签：java, user-interface, testing, rft

我使用 IBM 的 RFT 已经有一段时间了，播放速度非常快（几乎快到无法观看）。然后我浏览了一个教程并稍微更改了 RFT 配置（菜单中的选项）（但不是响应时间），现在它在步骤之间的暂停时间更长。我已经在配置中将所有内容恢复为标准，但它仍然很慢。

有人知道为什么吗？

我的猜测是默认安装值比“标准”值快？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-12T14:27:12.223

RFT 重启解决了这个问题。似乎它有时会变慢。

# wix - 错误 2753 特征树..如何避免？

> ID：13344673
> 
> 赞同：2
> 
> 时间：2012-11-12T13:34:13.643
> 
> 标签：wix, windows-installer, custom-action

有没有办法可以避免这个错误 2753 ？我想在安装期间取消选择一些功能，如果我取消选择，我会收到此错误。我如何避免这种情况并且仍然能够选择我想要的功能：

提前致谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-12T14:31:49.220

这表明您有一个自定义操作正在引用某个功能安装的文件。您需要为自定义操作提供一个条件，将其调用限制在安装该组件文件的时间。否则在执行自定义操作时您会收到错误，因为该文件不可用。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-13T08:49:55.747

```
<CustomAction Id="StartAppOnExit" FileKey="VcredistEXE" 
ExeCommand="" Execute="deferred" Return="asyncNoWait" Impersonate="no" />
<InstallExecuteSequence>
<Custom Action="StartAppOnExit" Before="InstallFinalize">!SOMECOMPONENTID=3</Custom>
</InstallExecuteSequence>

<CustomAction Id="StartAppOnExit1" FileKey="InterUMIEXE" 
 ExeCommand="" Execute="deferred" Return="asyncNoWait"  Impersonate="no" />
<InstallExecuteSequence>
 <Custom Action="StartAppOnExit1" Before="InstallFinalize"/>
 </InstallExecuteSequence>

 <CustomAction Id="StartAppOnExit2" FileKey="Python" 
ExeCommand="" Execute="deferred" Return="check" Impersonate="no" />
 <InstallExecuteSequence>
 <Custom Action="StartAppOnExit2"  Before="InstallFinalize"  />
 </InstallExecuteSequence>
 <InstallExecuteSequence>
 <WriteEnvironmentStrings>EnableEV=1</WriteEnvironmentStrings>
 </InstallExecuteSequence> 
```

# ios - 添加图像后 UIButtonTypeCustom 不再起作用

> ID：13344675
> 
> 赞同：0
> 
> 时间：2012-11-12T13:34:21.603
> 
> 标签：ios, uibutton, uiimage

我有一个带有图像的按钮，当我按下按钮时，我想弹出一个窗口。当按钮为空，内部没有图像时，一切正常，我现在添加了图像，按钮不再起作用。Button 对应一个 IBAction，通过一个 IBOutlet 连接到 XIB。我能做些什么？

```
 - (void)viewDidLoad
 {      
      //.....
      self.myButton = [UIButton buttonWithType:UIButtonTypeCustom];

     if(UI_USER_INTERFACE_IDIOM()== UIUserInterfaceIdiomPhone){

        self.myButton.frame = CGRectMake(160, 502, 73, 33);
       [self.myButton setImage:[UIImage imageNamed:@"iphone_legenda.png"] 
                                           forState:UIControlStateNormal];
        self.myButton.contentMode = UIViewContentModeScaleToFill;

     }else{

       self.myButton.frame = CGRectMake(330, 917, 182, 68);
       [self.myButton setImage:[UIImage imageNamed:@"ipad_legenda.png"] 
                                         forState:UIControlStateNormal];
       self.myButton.contentMode = UIViewContentModeScaleToFill;
     }

 [self.view addSubview:self.myButton]; 
 /*The problem arose in this line, without addSubview the image  you could not see 
  but the button worked, added addSuview the image you see but the button does not 
  work anymore*/

  NSLog(@"The button is %@", self.myButton);

 /*The button is <UIButton: 0x80f1e90; frame = (330 917; 182 68); opaque = NO; 
  layer = <CALayer: 0x80f1210>>*/

     //.......

 }

 -(IBAction)pressedButton:(id)sender{
      //This method initially worked
 } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-12T15:21:04.193

如果该按钮已在 XIB 中定义，则您的代码将创建另一个不同的按钮，而没有附加任何事件 (IBAction)。

您可以将代码更改为：

```
- (void)viewDidLoad
{      
  //.....

 if(UI_USER_INTERFACE_IDIOM()== UIUserInterfaceIdiomPhone){

    self.myButton.frame = CGRectMake(160, 502, 73, 33);
   [self.myButton setImage:[UIImage imageNamed:@"iphone_legenda.png"] 
                                       forState:UIControlStateNormal];
    self.myButton.contentMode = UIViewContentModeScaleToFill;

 }else{

   self.myButton.frame = CGRectMake(330, 917, 182, 68);
   [self.myButton setImage:[UIImage imageNamed:@"ipad_legenda.png"] 
                                     forState:UIControlStateNormal];
   self.myButton.contentMode = UIViewContentModeScaleToFill;
 }

} 
```

其他选择是拥有两个 XIB。一个用于 iPad，另一个用于 iPhone。

# wpf - 更改了 TextBox 样式中的 SolidColorBrush

> ID：13344678
> 
> 赞同：0
> 
> 时间：2012-11-12T13:34:34.363
> 
> 标签：wpf, xaml, styles, brush

我已经尝试过询问，但可能我没有提供足够的信息。我正在尝试创建自己的 WPF 主题。一切都很好，直到我创造了这种风格。

```
 <Style TargetType="{x:Type TextBox}">
    <Setter Property="Template">
        <Setter.Value>
            <ControlTemplate TargetType="{x:Type TextBox}">
                <Grid>
                    <VisualStateManager.VisualStateGroups>
                        <VisualStateGroup x:Name="CommonStates">
                            <VisualState x:Name="Normal"/>
                            <VisualState x:Name="Disabled">
                                <Storyboard>
                                    <DoubleAnimationUsingKeyFrames Storyboard.TargetProperty="(UIElement.Opacity)" Storyboard.TargetName="PART_ContentHost">
                                        <EasingDoubleKeyFrame KeyTime="0" Value="0.5"/>
                                    </DoubleAnimationUsingKeyFrames>
                                    <ColorAnimationUsingKeyFrames Storyboard.TargetProperty="(Shape.Fill).(SolidColorBrush.Color)" Storyboard.TargetName="Background">
                                        <EasingColorKeyFrame KeyTime="0" Value="Red"/>
                                    </ColorAnimationUsingKeyFrames>
                                    <ColorAnimationUsingKeyFrames Storyboard.TargetProperty="(Shape.Stroke).(SolidColorBrush.Color)" Storyboard.TargetName="Background">
                                        <EasingColorKeyFrame KeyTime="0" Value="Yellow"/>
                                    </ColorAnimationUsingKeyFrames>
                                </Storyboard>
                            </VisualState>
                            <VisualState x:Name="ReadOnly"/>
                            <VisualState x:Name="MouseOver"/>
                        </VisualStateGroup>
                    </VisualStateManager.VisualStateGroups>
                    <Rectangle x:Name="Background" Fill="{StaticResource OniiControlBackgroundBrush}" Stroke="{StaticResource OniiNormalBrush}" RadiusX="2" RadiusY="2"/>
                    <ScrollViewer x:Name="PART_ContentHost" Margin="2" SnapsToDevicePixels="{TemplateBinding SnapsToDevicePixels}" FontFamily="{TemplateBinding FontFamily}"/>
                </Grid>
            </ControlTemplate>
        </Setter.Value>
    </Setter>
    <Setter Property="Foreground" Value="Black"/>
    <Setter Property="SnapsToDevicePixels" Value="True"/>
</Style> 
```

当 TextBox 被禁用时，它应该改变 TextBox Background 和 BorderBrush 的颜色。

颜色在同一个 ResourceDictionary 中定义

```
<Color x:Key="MainColor">#FF595959</Color>
<Color x:Key="OniiControlBackgroundColor">#FF333333</Color>

<SolidColorBrush x:Key="OniiNormalBrush" Color="{StaticResource MainColor}"/>
<SolidColorBrush x:Key="OniiControlBackgroundBrush" Color="{StaticResource OniiControlBackgroundColor}" /> 
```

我不知道我真正的问题是什么。我知道的：

*1/“当 TextBox 被禁用时，它会将所有使用 OniiControlBackgroundBrush 的颜色更改为红色”*

*   OniiControlBackgroundBrush 在其他样式中被引用为 StaticResource

*2/“当我切换这些颜色时，仍然只有 OniiControlBackgroundBrush 被更改，但这次变为黄色”*

```
<Rectangle x:Name="Background" Fill="{StaticResource OniiNormalBrush}" Stroke="{StaticResource OniiControlBackgroundBrush}" RadiusX="2" RadiusY="2"/> 
```

*   OniiNormalBrush 在其他样式中也被引用为 StaticResource

*3/ “一切都在一个资源字典中定义”*

```
 <Application.Resources>
    <ResourceDictionary Source="Theme/OniiResourceDictionary.xaml">
    </ResourceDictionary>
</Application.Resources> 
```

*4/“我尝试在较小的解决方案中使用较少的自定义样式重现此问题，但我没有成功”*

*   我使用了相同的 TextBox 样式。

    ```
    <TextBox Height="32" HorizontalAlignment="Left" Margin="38,51,0,0" Name="textBox1" VerticalAlignment="Top" Width="215" />
    <CheckBox Content="Enabled" Height="16" HorizontalAlignment="Left" Margin="259,51,0,0" Name="checkBox1" VerticalAlignment="Top" Checked="checkBox1_Checked" Unchecked="checkBox1_Unchecked" />
    <Border Height="148" HorizontalAlignment="Left" Margin="254,126,0,0" Name="border1" VerticalAlignment="Top" Width="98" />
    <Rectangle Fill="{StaticResource OniiNormalBrush}" StrokeThickness="20" Stroke="{StaticResource OniiControlBackgroundBrush}" Height="148" HorizontalAlignment="Left" Margin="358,126,0,0" Name="rectangle5" VerticalAlignment="Top" Width="99" /> 
    ```

*   文本框被 CheckBox 禁用和启用，Border 使用自定义样式，两种颜色都作为 StaticResources

*5/“当我在原始解决方案中添加以下代码时，问题消失了”*

```
<Rectangle Height="71" HorizontalAlignment="Left" Margin="130,131,0,0" Name="rectangle2" StrokeThickness="20" Stroke="{StaticResource OniiControlBackgroundBrush}" Fill="{StaticResource OniiNormalBrush}" VerticalAlignment="Top" Width="98" /> 
```

我真的错过了什么吗？还是我真的很愚蠢？无论如何，您的帮助将不胜感激。我真的迷路了。好吧，最后一件事我不想使用 x:Shared="false" 主要是因为我看到更改 OniiNormalBrush 没有问题。谢谢你。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-12T14:55:39.720

问题似乎在于您的资源绑定。当您使用 StaticResource 时，这意味着资源在窗口初始化时被加载，然后再也不会被加载。因此，在大多数情况下，当您修改资源时，绑定到它的控件不会意识到更改。

在 #4 中，您没有遇到问题，因为您使用了 DynamicResource，它允许在运行时更新资源。

编辑：在第二次查看事物时，它看起来可能是两件事之一。

一..颜色的静态绑定不允许更新。将颜色绑定到画笔时从静态更改为动态是否可以解决问题？

```
<Color x:Key="MainColor">#FF595959</Color>
<Color x:Key="OniiControlBackgroundColor">#FF333333</Color>

<SolidColorBrush x:Key="OniiNormalBrush" Color="{DynamicResource MainColor}"/>
<SolidColorBrush x:Key="OniiControlBackgroundBrush" Color="{DynamicResource OniiControlBackgroundColor}" /> 
```

二...动画正在设置画笔上的颜色..这实际上是通过为其分配直接颜色来清除绑定。我会假设当动画结束时颜色会被设置回绑定，但情况可能并非如此。这有什么影响：

```
<SolidColorBrush x:Key="OniiNormalBrush" Color="#FF595959"/>
<SolidColorBrush x:Key="OniiControlBackgroundBrush" Color="#FF333333" /> 
```

# c# - 自动建议使用 AJAX

> ID：13344680
> 
> 赞同：1
> 
> 时间：2012-11-12T13:34:40.853
> 
> 标签：c#, asp.net, ajaxcontroltoolkit

我正在尝试为文本框实现自动建议。我检查了其他帖子似乎对我没有任何作用。我在 Web 应用程序和网站中都尝试过。请找出我的代码中的错误。当我在文本框中输入字母时什么都没有发生。我可以在浏览器中看到网络服务结果。

删除.aspx

```
 <%@ Page Language="C#" AutoEventWireup="true" CodeBehind="Delete.aspx.cs"
   Inherits="WebApplication2.Delete" %>
  <%@ Register TagPrefix="ajaxToolkit" Namespace="AjaxControlToolkit" 
  Assembly="AjaxControlToolkit"%>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org 
 TR/xhtml1/DTD/xhtml1-transitional.dtd">
    <html xmlns="http://www.w3.org/1999/xhtml">
    <head id="Head1" runat="server">
    <title>Untitled Page</title>
    </head>

<body>  
  <form id="form1" runat="server">  
    <div> 
     <asp:ScriptManager ID="ScriptManager1" EnablePageMethods="true" 
      EnablePartialRendering="true" 
      runat="server">
     </asp:ScriptManager>  
           <asp:TextBox ID="myTextBox" runat="server" Width="400px" ></asp:TextBox> 
           <ajaxToolkit:AutoCompleteExtender  runat="server"    ID="autoComplete1" 
             TargetControlID="myTextBox"
             ServiceMethod="Information"
             ServicePath="~/WebService1.asmx"
             OnClientItemOut="Information"
             MinimumPrefixLength="1" 
             CompletionInterval="1000"
             EnableCaching="true"
             CompletionSetCount="5"   
             ShowOnlyCurrentWordInCompletionListItem="true">
               </ajaxToolkit:AutoCompleteExtender> 
        </div>  
         </form>
         </body> 
```

webservice1.asmx

```
 using System;
   using System.Collections.Generic;
   using System.Linq;
   using System.Web;
   using System.Web.Services;

   namespace WebApplication2
   {

   [WebService(Namespace = "http://tempuri.org/")]
   [WebServiceBinding(ConformsTo = WsiProfiles.BasicProfile1_1)]
   [System.ComponentModel.ToolboxItem(false)]

public class WebService1 : System.Web.Services.WebService
{

    [System.Web.Services.WebMethod]
    public string HelloWorld()
    {
        return "Hello World";
    }

    [System.Web.Services.WebMethod]
    [System.Web.Script.Services.ScriptMethod]
    public string[]Information(string prefixText)
    {

        RDFEntities db = new RDFEntities();
        var allrows = from s1 in db.RDFMatch_v where s1.RIC.StartsWith(prefixText) select s1.RIC;

        return allrows.ToArray();

    }
} 
```

}

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-12T13:46:10.170

`OnClientItemOut="Information"`从您的 ASPX 中删除该行。您的 JavaScript 中没有定义信息处理程序。

然后将`[ScriptService]`属性添加到您的 Web 服务。

检查正在发生的事情的一个方便的工具是[Fiddler](http://www.fiddler2.com/fiddler2/)。它将向您显示发送到您的服务器的请求和响应。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-12T13:40:23.757

而不是 asp.net ScriptManager，尝试像这样使用 ToolkitScriptManager：

```
<ajaxToolkit:ToolkitScriptManager ID="sm1" runat="server" /> 
```

# javascript - 将使用 https 阻止客户端访问 JavaScript 中的任何机密数据

> ID：13344683
> 
> 赞同：2
> 
> 时间：2012-11-12T13:34:52.363
> 
> 标签：javascript, asp.net, asp.net-mvc

我正在开发一个 asp.net mvc Web 应用程序，鉴于我编写了以下调用外部 Web 服务的 JavaScript：-

```
<script type="text/javascript">
$(function() {
$.getJSON("https://MyERPsystem.com/jw/web/json/hr/getsalary/byid?master_username=superadmin&password_hash=9449B5ABCFA9AFDA36B801351ED3DF66&employeeid=A200121",
  {
//code goes here
  },
  function(data) {
    $.each(data.items, function(i,item){
//code goes here
    });
});
}) </script> 
```

那么如果外部web服务实现了https，那么这是否意味着javaScript里面的master_username和password_hash不能被外部用户看到呢？最好的祝福

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-11-12T13:36:41.233

HTTPS 在它离开浏览器时保护一切，直到它进入服务器。

数据在传输过程中受到保护，因此外部用户无法访问它。

它不会保护控制浏览器的人的数据，即合法用户和破坏用户系统的任何人。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-12T13:36:48.070

使用 HTTPS 意味着无法实现 MITM 之类的攻击（至少不是*那么*容易）。无论如何，请记住，最终在客户端的数据仍然可以从机器本身访问。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-12T22:56:54.257

我认为只有 http 请求的内部是加密的。实际的 URL 和 Querystring 信息不是。可能值得仔细检查。尝试使用提琴手或钢丝鲨之类的东西来检查 http 请求内部

# c# - How to Invoke the Thread in a for loop

> ID：13344687
> 
> 赞同：0
> 
> 时间：2012-11-12T13:35:09.837
> 
> 标签：c#, multithreading, delegates

Hi I want to pass sleeptime and the Thread Object to a method and call the method in a for loop. Pls see the code below

```
public delegate void PasParamsToThrdFunc(int integer, object obj2);
class Program
{
    Thread[] newThread=new Thread[10];

    static void Main(string[] args)
    {
        Program pr = new Program();
        pr.ThreadDeclaration();
        Console.Read();
    }

    public void ThreadDeclaration()
    {
        int time = 5000;
        for(int i=1;i<3;i++)
        {
            time = time * i;
            string s = i.ToString();
            ThreadStart starter = () => PasParamsToThrdFunc(time, newThread[i]);
            newThread[i] = new Thread(starter);
            newThread[i].Name = i.ToString();
            newThread[i].Start();
        }

    }

    public void PasParamsToThrdFunc(int waitTime, Thread obj)
    {
        Thread.Sleep(waitTime);
        Console.WriteLine("" + waitTime + " seconds completed and method is called for thread"+obj.Name+"");
        obj.Abort();
    }
  } 
```

I want the 1st thread to be invoked after 5 seconds and shall kill the object and shall do the same for the 2nd thread and kill it at 10 seconds. Please help... Thanks in advance.

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-12T13:51:24.230

我可以看到一些问题：

*   您正在使用传递给线程函数的参数访问修改后的闭包（传递它们后不应修改这些参数）。
*   您将线程的句柄传递给自身，然后使用它来中止自身。不需要这样做，因为它会在睡眠后退出。
*   您计算的时间不正确，每次迭代时将自身乘以 i，而不是使用时间间隔 * i。

尝试这样的事情：

```
using System;
using System.Threading;

namespace Demo
{
    class Program
    {
        static void Main(string[] args)
        {
            Program pr = new Program();
            pr.ThreadDeclaration();
            Console.Read();
        }

        public void ThreadDeclaration()
        {
            int timeInterval = 5000;

            for (int i=1; i<3; i++)
            {
                int time = timeInterval * i;
                ThreadStart starter = () => PasParamsToThrdFunc(time);
                var thread = new Thread(starter) {Name = i.ToString()};
                thread.Start();
            }
        }

        public void PasParamsToThrdFunc(int waitTime)
        {
            Thread.Sleep(waitTime);
            Console.WriteLine("" + waitTime + " seconds completed and method is called for thread" + Thread.CurrentThread.Name);

        }
    }
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-12T13:47:55.973

1-当你传递`newThread[i]`给`PasParamsToThrdFunc`它时为空。将其更改为`i`

2-您可能需要避免[*关闭*](https://stackoverflow.com/questions/8898925/is-there-a-reason-for-cs-reuse-of-the-variable-in-a-foreach)变量[和](https://stackoverflow.com/questions/8898925/is-there-a-reason-for-cs-reuse-of-the-variable-in-a-foreach)`i``time`

```
public void ThreadDeclaration()
{
    int time = 5000;
    for (int i = 1; i < 3; i++)
    {
        int J = i; // <----
        int timez = time * i; // <----
        string s = i.ToString();

        ThreadStart starter = () => PasParamsToThrdFunc(timez, J);
        newThread[i] = new Thread(starter);
        newThread[i].Name = i.ToString();
        newThread[i].Start(); 
    }

}

public void PasParamsToThrdFunc(int waitTime, int i )
{
    Thread.Sleep(waitTime);
    Console.WriteLine("" + waitTime + " seconds completed and method is called for thread" + newThread[i].Name + "");
    newThread[i].Abort(); // <-- No need
} 
```

# c# - Timezone conversion and daylight saving

> ID：13344693
> 
> 赞同：4
> 
> 时间：2012-11-12T13:35:39.163
> 
> 标签：c#, .net, datetime, timezone, dst

We have a scheduler application. Using this application an user can schedule a task to run at 8 AM PT daily for the next 30 days. We convert the time to UTC and store it in the databse as we have users from various time zones. We use the following function to convert the time to UTC:

```
public static DateTime ToAccountLocalTime(this DateTime dt)
{
    return TimeZoneInfo.ConvertTimeFromUtc(dt, TimeZoneInfo.FindSystemTimeZoneById("user time zone"));
} 
```

Now if the user scheduled a task to run at 8 AM PT daily for the next 30 days on 1st Nov 2012 then in the database 30 entries are made for each of the 30 days with time set to 4 PM UTC (as returned by the above method).

The problem occurred on Nov 4th when daylight saving ended. The task started running at 7 AM instead of 8 AM as the scheduler service runs all times based on UTC.

To solve this we need the above method to return 4 PM UTC for dates from 1st Nov to 3rd Nov and 3 PM UTC for dates after 4th Nov. What changes should I make to achieve this?

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-13T00:59:01.553

您需要为 30 天中的每一天进行转换，因此请为每个, = ..调用`ToUtc`（或调用与您在问题中粘贴的例程相反的任何内容）并存储这些结果。`localDate.AddDays(n)``n``1``30`

如果`ToUtc`定义类似于：

```
return TimeZoneInfo.ConvertTimeToUtc(dt, TimeZoneInfo.FindSystemTimeZoneById("user time zone")); 
```

它应该在指定的时间迎合 DST。（注意模棱两可或无效时间的例外情况。）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-12T13:46:38.350

如果本地时间很重要，我会存储本地时间 + 时区，并在需要 UTC 时将其转换为 UTC。

然后您存储太平洋时间上午 8 点，它将根据当前是否为 DST 转换为下午 3 点或 4 点 UTC。

您将遇到的问题取决于您的数据库，它可能不支持时区。我可能会存储您传入的字符串`FindSystemTimeZoneById`。如果你想变得花哨，你可以制作一个表格，列出所有具有标识列的人并存储 Id。

# xna - Farseer 创建矩形宽度高度

> ID：13344695
> 
> 赞同：0
> 
> 时间：2012-11-12T13:35:43.020
> 
> 标签：xna, height, width, box2d, farseer

基于Box2D的Farseer XNA4.0 C#物理引擎

如果我使用 BodyFactory.CreateRectangle(world, w, h, density, new Vector2(x, y)); 创建body的方法

我怎样才能从身体中恢复宽度和高度？

目前我正在保存宽度和高度，但我想知道是否可以从夹具或形状或其他东西中检索它。做了一些尝试，但没有成功。它会为我创建的每个实体节省两个浮点数。

谢谢你的帮助。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-12T19:20:03.913

我先说我从未使用过 Farseer，但看看类定义，似乎没有一种简单的方法可以得到你想要的东西。如果您查看 BodyFactory.CreateRectangle 方法，它不会直接存储 Height 或 Width 值：

```
 public static Body CreateRectangle(World world, float width, float height, float density, Vector2 position,
                                       object userData)
    {
        if (width <= 0)
            throw new ArgumentOutOfRangeException("width", "Width must be more than 0 meters");

        if (height <= 0)
            throw new ArgumentOutOfRangeException("height", "Height must be more than 0 meters");

        Body newBody = CreateBody(world, position);
        Vertices rectangleVertices = PolygonTools.CreateRectangle(width / 2, height / 2);
        PolygonShape rectangleShape = new PolygonShape(rectangleVertices, density);
        newBody.CreateFixture(rectangleShape, userData);

        return newBody;
    } 
```

相反，它创建了一组顶点，将其分配给身体的形状（在本例中为矩形），但是，粗略的一瞥并没有看出有办法到达这些顶点。

这么长的答案，我找不到直接的方法可以为您提供矩形高度或宽度的直接浮点值。您可能能够以某种方式获取顶点并将其计算出来，但这需要您获取 Body 并解析其夹具列表并确定哪个是您的矩形。

归根结底，如果您需要直接获取高度和宽度，我建议您只创建一个自定义类并将主体与浮点值一起存储，并使用 getter/setter。与遍历对象上的每个固定装置并尝试确定哪个是您的矩形然后计算出来相比，这可能是一个更便宜的操作。

# sql - 重置存储过程变量

> ID：13344697
> 
> 赞同：0
> 
> 时间：2012-11-12T13:35:54.937
> 
> 标签：sql, sql-server

好吧，显然这不起作用。我收到“'=' 附近的语法错误”错误。是否可以在存储过程中多次更改变量的值？

与此示例类似：

```
 DECLARE @columnCounter INT
    SET @columnCounter = 0

    DECLARE @columnName VARCHAR(255)
    SET @columnName = 'A'

    WHILE (@columnCounter < 4)
    BEGIN
        IF (@columnCounter == 1)
        BEGIN
            SET @columnName = 'B'
        END
        IF (@columnCounter == 2)
        BEGIN
            SET @columnName = 'C'
        END
        IF (@columnCounter == 3)
        BEGIN
            SET @columnName = 'D'
        END
    END 
```

谢谢你。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-12T13:38:49.280

是[`==`](http://msdn.microsoft.com/en-us/library/ms175118%28v=sql.100%29.aspx). Transact-SQL 使用 simple`=`进行相等比较，如下所示：

```
DECLARE @columnCounter INT;
SET @columnCounter = 0;

DECLARE @columnName VARCHAR(255);
SET @columnName = 'Set_To_Value_ID';

WHILE (@columnCounter < 4)
BEGIN
    IF (@columnCounter = 1)
    BEGIN
        SET @columnName = 'Set_To_Variable_ID';
    END
    IF (@columnCounter = 2)
    BEGIN
        SET @columnName = 'Changed_In_SP';
    END
    IF (@columnCounter = 3)
    BEGIN
        SET @columnName = 'Set_To_Comment_Input';
    END
    set @columnCounter += 1;
END 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-12T13:39:16.547

```
IF (@columnCounter == 1) 
```

比较应该只是`=`,`==`是多种语言的通用语法，但不是 t-sql。

[http://msdn.microsoft.com/en-us/library/ms175118(v=sql.100).aspx](http://msdn.microsoft.com/en-us/library/ms175118(v=sql.100).aspx)

# jquery - 使用 Google Maps Geometry 记住点

> ID：13344707
> 
> 赞同：1
> 
> 时间：2012-11-12T13:36:31.253
> 
> 标签：jquery, google-maps, google-maps-api-3

我正在使用一个名为[GeoPortal](http://maps.co.mecklenburg.nc.us/geoportal/)的 Google Maps Geometry 插件来对建筑物的屋顶进行测量。

我已经让插件在我的应用程序中正常工作，它获取上一页的经度和纬度，它们是从输入的地址动态创建的。

我遇到的问题是人们需要能够在应用程序中前后导航，这意味着需要记住区域图，因此当他们导航回该页面时，他们不必每次都重新绘制区域。

例如，当用户导航回页面时，我需要记住这个绘图布局：

![在此处输入图像描述](../Images/f37b66d989c089a778e6d3e1f4381aef.png)

*我的代码如下：*

**jQuery**

```
var map;

var measure = {
    mvcLine: new google.maps.MVCArray(),
    mvcPolygon: new google.maps.MVCArray(),
    mvcMarkers: new google.maps.MVCArray(),
    line: null,
    polygon: null
};

jQuery(document).ready(function() {

    map = new google.maps.Map(document.getElementById("map"), {
        zoom: 21,
        center: new google.maps.LatLng(51.502378,-0.114348),
        mapTypeId: google.maps.MapTypeId.HYBRID,
        draggableCursor: "crosshair" 
    });

    google.maps.event.addListener(map, "click", function(evt) {
        measureAdd(evt.latLng);
    });

});

function measureAdd(latLng) {

    var marker = new google.maps.Marker({
        map: map,
        position: latLng,
        draggable: true,
        raiseOnDrag: false,
        title: "Drag me to change shape",
        icon: new google.maps.MarkerImage("http://maps.co.mecklenburg.nc.us/geoportal/img/measure-vertex.png", new google.maps.Size(9, 9), new google.maps.Point(0, 0), new google.maps.Point(5, 5))
    });

    measure.mvcLine.push(latLng);
    measure.mvcPolygon.push(latLng);

    measure.mvcMarkers.push(marker);

    var latLngIndex = measure.mvcLine.getLength() - 1;

    google.maps.event.addListener(marker, "mouseover", function() {
        marker.setIcon(new google.maps.MarkerImage("http://maps.co.mecklenburg.nc.us/geoportal/img/measure-vertex-hover.png", new google.maps.Size(15, 15), new google.maps.Point(0, 0), new google.maps.Point(8, 8)));
    });

    google.maps.event.addListener(marker, "mouseout", function() {
        marker.setIcon(new google.maps.MarkerImage("http://maps.co.mecklenburg.nc.us/geoportal/img/measure-vertex.png", new google.maps.Size(9, 9), new google.maps.Point(0, 0), new google.maps.Point(5, 5)));
    });

    google.maps.event.addListener(marker, "drag", function(evt) {
        measure.mvcLine.setAt(latLngIndex, evt.latLng);
        measure.mvcPolygon.setAt(latLngIndex, evt.latLng);
    });

    google.maps.event.addListener(marker, "dragend", function() {
        if (measure.mvcLine.getLength() > 1) {
            measureCalc();
        }
    });

    if (measure.mvcLine.getLength() > 1) {

        if (!measure.line) {

            measure.line = new google.maps.Polyline({
                map: map,
                clickable: false,
                strokeColor: "#FF0000",
                strokeOpacity: 1,
                strokeWeight: 3,
                path:measure. mvcLine
            });

        }

        if (measure.mvcPolygon.getLength() > 2) {

            if (!measure.polygon) {

                measure.polygon = new google.maps.Polygon({
                    clickable: false,
                    map: map,
                    fillOpacity: 0.25,
                    strokeOpacity: 0,
                    paths: measure.mvcPolygon
                });

            }

        }

    }

    if (measure.mvcLine.getLength() > 1) {
        measureCalc();
    }

}

function measureCalc() {

    var length = google.maps.geometry.spherical.computeLength(measure.line.getPath());
    jQuery("#span-length").text(length.toFixed(1))

    if (measure.mvcPolygon.getLength() > 2) {
        var area = google.maps.geometry.spherical.computeArea(measure.polygon.getPath());
        jQuery("#span-area").text(area.toFixed(1));
        document.getElementById('RoofArea').value = area.toFixed(1); 
        document.getElementById('submit').disabled = false;
    }

}

function measureReset() {

    if (measure.polygon) {
        measure.polygon.setMap(null);
        measure.polygon = null;
    }
    if (measure.line) {
        measure.line.setMap(null);
        measure.line = null
    }

    measure.mvcLine.clear();
    measure.mvcPolygon.clear();

    measure.mvcMarkers.forEach(function(elem, index) {
        elem.setMap(null);
    });
    measure.mvcMarkers.clear();

    jQuery("#span-length,#span-area").text(0);
    document.getElementById('submit').disabled = true;

} 
```

**HTML/CSS**

```
<style>
    #map {
    width: 500px;
    height: 400px;
    margin: 0 auto; 
    border: 5px solid #2F4B9E;
    }
</style>

<div>
    <div id="map"></div>
    <p>Length (red line): <span id="span-length">0</span> mt<br />
    Area (grey area): <span id="span-area">0</span> mt&sup2;<br /> 
    <a href="javascript:measureReset();">Reset Measure</a></p>
</div> 
```

**[jsFiddle](http://jsfiddle.net/uwhmJ/1/)**

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-12T13:39:36.460

您不应该创建一个登录系统并将所有内容存储在数据库中吗？如果您没有能力这样做，您可以查看 HTML5 的本地存储。

这是一个教程： [http ://diveintohtml5.info/storage.html](http://diveintohtml5.info/storage.html)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-14T11:12:59.627

我实际上回答了我自己的问题，所以为了结束这个问题，我将在这里发布我的解决方案。我也用过 ColdFusion。

在`measureAdd()`函数中，我在下面添加了这段代码 `measure.mvcMarkers.push(marker);`

```
var toJSON = JSON.stringify(latLng);
var toOutput = $.parseJSON(toJSON);

    $.ajax({
        type: "POST",
        url: "panels_plot.cfc",
        data: {
            method: "setLatLon",
            theLat: toOutput.$a,
            theLon: toOutput.ab
        },
        dataType: "json"
    }); 
```

发布到我创建的这个 .cfc

```
<cfcomponent>
  <cffunction name="setLatLon" access="remote">
    <cfargument name="theLat" type="any" required="yes">
    <cfargument name="theLon" type="any" required="yes">
    <cfif NOT IsDefined('SESSION.latLon')>
        <cfset SESSION.latLon = ArrayNew(1)> 
    </cfif>
    <cfset st = StructNew()> 
    <cfset st.theLat = theLat>
    <cfset st.theLon = theLon>
    <cfset ArrayAppend(SESSION.latLon, st)>
  </cffunction>
</cfcomponent> 
```

然后，在第一个声明的顶部`map`，我添加了这个`cfloop`

```
 <cfif IsDefined('SESSION.latLon')>
        <cfloop from="1" to="#ArrayLen(SESSION.latLon)#" index="i">
            <cfoutput>
            var jsonObj = new google.maps.LatLng(#SESSION.latLon[i].theLat#, #SESSION.latLon[i].theLon#);

            var marker#i# = new google.maps.Marker({
                map: map,
                position: jsonObj,
                draggable: true,
                raiseOnDrag: false,
                title: "Drag me to change shape",
                icon: new google.maps.MarkerImage("../admin/measure-vertex.png", new google.maps.Size(9, 9), new google.maps.Point(0, 0), new google.maps.Point(5, 5))
            });

            measure.mvcLine.push(jsonObj);
            measure.mvcPolygon.push(jsonObj);

            measure.mvcMarkers.push(marker#i#);

            var latLngIndex#i# = measure.mvcLine.getLength() - 1;

            google.maps.event.addListener(marker#i#, "mouseover", function() {
                marker#i#.setIcon(new google.maps.MarkerImage("../admin/measure-vertex-hover.png", new google.maps.Size(15, 15), new google.maps.Point(0, 0), new google.maps.Point(8, 8)));
            });

            google.maps.event.addListener(marker#i#, "mouseout", function() {
                marker#i#.setIcon(new google.maps.MarkerImage("../admin/measure-vertex.png", new google.maps.Size(9, 9), new google.maps.Point(0, 0), new google.maps.Point(5, 5)));
            });

            google.maps.event.addListener(marker#i#, "drag", function(evt) {
                measure.mvcLine.setAt(latLngIndex#i#, evt.latLng);
                measure.mvcPolygon.setAt(latLngIndex#i#, evt.latLng);

            });

            google.maps.event.addListener(marker#i#, "dragend", function() {
                if (measure.mvcLine.getLength() > 1) {
                    measureCalc();
                }
            });

            if (measure.mvcLine.getLength() > 1) {

                if (!measure.line) {

                    measure.line = new google.maps.Polyline({
                        map: map,
                        clickable: false,

                    });

                }

                if (measure.mvcPolygon.getLength() > 2) {

                    if (!measure.polygon) {

                        measure.polygon = new google.maps.Polygon({
                            clickable: false,
                            map: map,
                            strokeColor: "##FF0000",
                            strokeOpacity: 1,
                            strokeWeight: 3,
                            paths: measure.mvcPolygon
                        });

                    }

                }

            }

            if (measure.mvcLine.getLength() > 1) {
                measureCalc();
            }
            </cfoutput>
        </cfloop>
    </cfif> 
```

这很好地解决了我的问题。

# svn - Branching Externals and Trunk together

> ID：13344708
> 
> 赞同：2
> 
> 时间：2012-11-12T13:36:31.750
> 
> 标签：svn, tags, branch, externals

I have' ExternalFolder' and 'trunk'in my SVN. 'trunk' has an empty folder linked to ExternalFolder (as written below). I want to create a script that will take branch the trunk, tag (or branch) the ExternalFolder and connect the 'externals' in the newly branched trunk and connect it to the newly tagged ExternalFolder as in the following example:

*   trunk
    *   Project1
        *   Externals (linked to *ExternalsFolder*)
*   *ExternalsFolder*
*   Branches
    *   Project1_BranchA
        *   TaggedExternalsFolder
        *   Project1
            *   Externals (linked to Project1_BranchA\TaggedExternalsFolder)

If this is complicated to achieve, I can also have the new tagged or branched 'ExternalFolder' to be located in a different location. Putting them both in the same dir is just for ease of access. Is there an easy way to achieve this? Do I need to write a script?

Thanks, Guy

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-13T09:15:39.593

我遇到了和你类似的问题。我使用[pysvn](http://pysvn.tigris.org/)使用 python 脚本解决了它：

1.  递归地抓取我项目的所有外部
2.  冻结每个外部，在外部属性中显式设置修订（比为每个外部创建分支/标签更容易）
3.  然后创建标签或分支

# android - 我想了解 SFTP 服务器上文件的位置

> ID：13344711
> 
> 赞同：1
> 
> 时间：2012-11-12T13:36:36.277
> 
> 标签：android, sftp, jsch

我需要一个用于学习服务器上文件位置的代码。我可以学习文件的名称，但我不学习位置。例如，我想学习 abc.txt，例如 (\home\user1\desktop\abc.txt)

```
try {
JSch jsch = new JSch();
Session session = null;
session = jsch.getSession("***", "***.***.***.***",22);
session.setConfig("StrictHostKeyChecking", "no");
session.setPassword("****");
session.connect();                  
Channel channel = session.openChannel("sftp");
channel.connect();
ChannelSftp sftpChannel = (ChannelSftp) channel;
sftpChannel.exit(); 
session.disconnect(); }catch(JSchException e){writeToSDFile(" "+e.toString());} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-12T16:55:32.630

使用`pwd()`and `lpwd()`（`ChannelSFTP`类的操作）检索本地和远程工作目录。有关更多信息，请查看[JSch 的 API](http://epaul.github.com/jsch-documentation/javadoc/)。

要完成您的代码示例：

```
JSch jsch = new JSch();
Session session = null;
session = jsch.getSession("***", "***.***.***.***",22);
session.setConfig("StrictHostKeyChecking", "no");
session.setPassword("****");
session.connect();                  
Channel channel = session.openChannel("sftp");
channel.connect();
ChannelSftp sftpChannel = (ChannelSftp) channel;

System.out.println(sftpChannel.pwd());
System.out.println(sftpChannel.lpwd());

sftpChannel.exit(); 
session.disconnect(); }catch(JSchException e){writeToSDFile(" "+e.toString());} 
```

# javascript - 有没有办法在测验中为 div 设置简单的标志来隐藏问题？

> ID：13344718
> 
> 赞同：1
> 
> 时间：2012-11-12T13:36:55.367
> 
> 标签：javascript, jquery, jquery-mobile, css-transitions

我想要一个简单的预加载 Html 移动测验，通过 jQuery 使用显示/隐藏 div 一次在屏幕上显示一个问题

当用户需要跳过一两个问题时，问题就来了，我想通过设置标志来做到这一点，如果我应该根据用户选择/选项值/答案显示该 div

我在这里找到了解决方案，但我真正需要的是一种带有标志的简单方法来知道是否应该显示下一个 `q2skipped=true` div `q2skipped=false`

如果它没有显示，那么它会去测试`q3skipped`标志

[我在这里](http://jsfiddle.net/panRa/)在 jsfiddle 中做了一个例子：

```
<div class="question" id="question1">Q.1 Do you like Milk 
    <select name="1" onchange="displayElements(this.value);" >
        <option value="yes">Yes</option>
        <option value="no">No</option>
        <option >Goto Next Question</option>
        <option value="q2skipped=true">Skip Next Question</option>
        <option value="q2skipped=true;q3skipped=true">Skip Next 2 Questions</option>
    </select><br>
    <div> 
        <input type="submit" id="button" value="Submit" onclick='doSubmit(this)'>
    </div>
</div> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-12T15:11:16.897

似乎需要一种更可重复的方法。硬编码所有问题的所有值是一项烦人的任务，如果您必须创建一个新测验，您将不得不重复这一点。

我不了解您的应用程序的全部范围，但我会给您一些一般性提示，以帮助您走上更清洁的解决方案。

(1) 使用类来设计你的问题。例如，您可以使用以下 CSS：

```
 .answered { background-color: green;  }
 .skipped  { background-color: yellow; } 
```

如果您在回答后隐藏问题，CSS 将无关紧要，但它确实有助于证明我的观点。

(2) 避免在 HTML 中使用硬编码值（当然问题编号除外） 类似：

```
<div class="question" id="question1">Q.1 Do you like Milk 
    <select class="answer">
        <option value="yes">Yes</option>
        <option value="no">No</option>
        <option value="skip">Goto Next Question</option>
        <option value="skip_one">Skip Next Question</option>
        <option value="skip_two">Skip Next 2 Questions</option>
    </select><br>
    <div> 
        <input type="submit" value="Submit" onclick='doSubmit(1)'>
    </div>
</div> 
```

我看到你`id="button"`在提交按钮上使用。这是一个相当糟糕的主意，因为 ID 应该是唯一的。如果不需要，最好的方法是不要在按钮上提及 ID。

另请注意，按钮的 onclick 事件现在传递问题的 ID。以后会清楚的。

我在选择中添加了一个“答案”类，以便您稍后可以轻松检索用户的答案。

我还用选择按钮省略了 onclick 和 name 属性。我不确定 onclick 事件应该做什么（与这个问题无关？）并且 name 属性在这里似乎并不需要（同样，如果这个问题中没有提到的东西需要它，你可以添加它再次）。

(3) 使用 javascript/jQuery 来定义应该发生的事情。

```
$(document).ready(function() {
    //These things should occur on page load:

    $(".question").hide(); //Hides all questions
    $("#question1").show(); //Bring back the first question.
});

//The rest will be done in the doSubmit() function:

function doSubmit (questionID) {
    //get the value from the <select> in the div
    var question = $("#question"+questionID);
    var answer = question.find(".answer").val();

    var nextquestionID = 0; //will be set in the switch case.

    switch(answer) {

        case "yes":
            question.addClass("answered");
            nextquestionID = questionID + 1;
            break;

        case "no":
            question.addClass("answered");
            nextquestionID = questionID + 1;
            break;

        case "skip":
            question.addClass("skipped");
            nextquestionID = questionID + 1;
            break;

        case "skip_one":
            question.addClass("skipped");
            var skippedquestionID = questionID + 1; //the next one will be marked as skipped
            $("#question" + skippedquestionID ).addClass("skipped");

            nextquestionID = questionID + 2;

            break;

        case "skip_two":
            question.addClass("skipped");
            var skippedquestionID = questionID + 1; //the next one will be marked as skipped
            $("#question" + skippedquestionID ).addClass("skipped");
            var skippedquestionID_2 = questionID + 2; //also the next one will be marked as skipped
            $("#question" + skippedquestionID_2 ).addClass("skipped");

            nextquestionID = questionID + 3;
            break;

    }

    //Whatever was selected, now the original question must be hidden, and the new question (ID is contained in nextquestionID ) should be shown:
    question.hide();
    $("#question" + nextquestionID).show();
} 
```

这应该让您进一步构建一个可重复的过程来处理用户的答案。我希望我能够说得足够清楚，以便您理解；如果没有，请随时询问:-)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-12T13:42:12.083

您可以根据需要使用 jquery .addClass()、.removeClass() 和 .hasClass() 函数来装饰 div。

IE

```
 $('#q1').addClass('skipped')    //when they skip a question
  $('#q1').removeClass('skipped') //when they finally answer it

  if ($('#q1').hasClass('skipped')===true) //test if a question was skipped.
  {

  }  .... etc 
```

# python - Detecting gestures using python

> ID：13344722
> 
> 赞同：0
> 
> 时间：2012-11-12T13:37:06.883
> 
> 标签：python

I thought to use my macbook's trackpad gestures to interact with my python programs,for example trigger a particular function for two finger tap or three finger swipe etc.Are there any python modules for detecting mac's trackpad gestures?

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-12T13:45:43.013

有些事情可以让你看到它会发生什么。

见[这里](http://blog.sendapatch.se/2009/november/macbook-multitouch-in-python.html)。

但我真的很惊讶苹果会让人们乱用它。不是真正的家庭政策

我可能错了，周围似乎有[一些黑客攻击](http://www.apartmenttherapy.com/apple-magic-trackpad-hacks-and-158167)。不过，您肯定需要开发人员的许可证才能获得任何相关信息。

# android - Android 中的 Wifi IP 地址和 Wi-Fi 锁

> ID：13344725
> 
> 赞同：1
> 
> 时间：2012-11-12T13:37:10.050
> 
> 标签：android, ip-address, android-wifi

有人可以让我知道`WiFi IP address`android 设备什么时候会发生变化吗？

如果我获得了 WiFi 锁，在我断开连接之前 IP 地址会保持不变吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-12T13:42:12.817

您的 IP 地址会根据 AP 子网而变化，就像任何带有网络适配器的硬件一样。

`WifiLock`允许应用程序保持 Wi-Fi 处于唤醒状态（如果设备处于待机状态...）而不是指 IP 更改

# javascript - See progress of downloaded images of website?

> ID：13344728
> 
> 赞同：2
> 
> 时间：2012-11-12T13:37:30.047
> 
> 标签：javascript, html

I want to see how far the download of an image has come.

I have a big image that is sprited, and I want to see how the download of that image goes, is that even possible?

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-12T13:56:27.087

[这里](https://stackoverflow.com/questions/4999703/preload-with-percentage-javascript-jquery)已经讨论过一种使用 jQuery 插件的方法。

还有[一个](https://stackoverflow.com/questions/399641/ajax-page-download-progress)基于 'Content-Length' 响应头的实现，但它不适用于 IE，因为 IE 的 XHR 对象没有实现 readyState 3。

最后一种方法主要包括轮询 XHR 对象并询问它的长度以及已经下载的响应。您可能会适应使用下载图像，但同样，它不是浏览器证明的：

```
var myTrigger;
var progressElem = $('#progressCounter');

$.ajax ({
    beforeSend: function (thisXHR)
    {
            myTrigger = setInterval (function ()
            {
                    if (thisXHR.readyState > 2)
                    {
                            var totalBytes  = thisXHR.getResponseHeader('Content-length');
                            var dlBytes     = thisXHR.responseText.length;
                            (totalBytes > 0)? progressElem.html (Math.round ((dlBytes/totalBytes) * 100) +"%"):progressElem.html (Math.round (dlBytes /1024) + "K");
                    }
            }, 200);
    },

}); 
```

我希望它有所帮助。干杯

# sql - 在 Postresql 中使用 group by 子句和多个内部联接选择查询

> ID：13344732
> 
> 赞同：3
> 
> 时间：2012-11-12T13:37:41.047
> 
> 标签：sql, postgresql, group-by, having-clause

我有 3 个具有以下定义的表格

```
people
------
- wid 
- name

types
-----
- guid
- type

mapping
-------
- guid
- wid 
```

people 表有人员列表

类型表显示人员表中存在的每一行的类型信息。如果一个人属于多个类型，则类型表中存在两行。

映射表提供人员和类型表之间的映射。

现在要找出谁是“政治家”类型的人，我可以使用以下查询。

```
select name from people inner join 
(mapping inner join types on mapping.guid = types.guid) 
on people.wpid = mapping.wpid where types.type = 'politician' 
```

但现在我想知道政治家属于哪些其他类型。我知道我必须使用`group by`and`having`子句。但我无法提出查询。如何编写这个查询？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-12T13:45:29.393

必须使用 group by 来给出一组值的聚合函数的结果（例如接收不同类型的计数或值的总和）。如果您也只需要获取一个人属于哪一组类型，则可以使用这样的单个查询。

```
select name, types
from people inner join 
(mapping inner join types on mapping.guid = types.guid) 
on people.wpid = mapping.wpid
where people.wpid in (select people.wpid from people inner join 
(mapping inner join types on mapping.guid = types.guid) 
on people.wpid = mapping.wpid where types.type = 'politician') 
```

一个分组将有助于了解一个政治家进入了多少个群体

```
select name, count(types)
from people inner join 
(mapping inner join types on mapping.guid = types.guid) 
on people.wpid = mapping.wpid
where people.wpid in (select people.wpid from people inner join 
(mapping inner join types on mapping.guid = types.guid) 
on people.wpid = mapping.wpid where types.type = 'politician')
group by name 
```

**编辑：避免 IN 子查询**

如果你知道*政治*团体的指导，你可以做这样的事情。我没有测试查询，但想法是使用与*映射表的联接过滤**人员*表，其中 guid 等于政治家 guid

 *```
select p.name, count(t.types)
from people p inner join mapping m1
on p.wid = m1.wid and m1.guid = [politician guid]
inner join mapping m2
on p.wid = m2.wid
inner join types t
in m2.guid = t.guid 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-12T14:01:37.680

尝试：

```
select p.name, t2.type
from types t1
join mapping m1 on m1.guid = t1.guid
join people p on p.wpid = m1.wpid 
join mapping m2 on p.wpid = m2.wpid 
join types t2 on m2.guid = t2.guid
where t1.type = 'politician'
order by 1, 2 
```

- 获取所有政客及其所属类型的列表。

或者，如果您只想要所有政治家的列表以及他们所属的不同类型的*数量，请尝试：*

```
select p.name, count(*)
from mapping m1
join people p on p.wpid = m1.wpid 
join mapping m2 on p.wpid = m2.wpid 
where m1.guid = 1 /* replace 1 with appropriate guid for politicians */
group by p.name
order by 1 
```*

# objective-c - HexDex Colour :Converting String to int removing 0

> ID：13344733
> 
> 赞同：1
> 
> 时间：2012-11-12T13:37:42.700
> 
> 标签：objective-c

I have a colour class set up where it takes red/blue/green values and uses them to create a hex string which is then used to return a colour. It can be initialized by providing a red, blue and green colour like this

```
 Colour *col = [[Colour alloc] initWithRed:200 Green:100 Blue:05]; 
```

The problem with this method is, if I pass in a value like 05, the 0 is stripped off, and just a 5 is passed in, so the blue will set to just be 5 rather than 05\. My method to return a valid hex string is this

```
 -(NSString *)getHexString
    {
        NSString *hexString = [NSString stringWithFormat:@"#%x%x%x", iRed_i,iGreen_i,iBlue_i];
        hexString = [hexString uppercaseString];
        return hexString;
    } 
```

It is expecting 2 values for each number to return the correct colour code, but the 0 is being stripped off meaning it returns an incorrect colour.

The other method I use to create a colour is to initialise the colour object with a hex string like this:

```
Colour *colour = [[Colour alloc] initWithHex:@"#782402"]; 
```

I then use scanner to separate the 3 values like so

```
if ([sHex_p hasPrefix:@"#"]) sHex_p = [sHex_p substringFromIndex:1];
            unsigned int outVal;
            NSString *sRed  = [sHex_p substringToIndex:2];
            NSScanner* scanner = [NSScanner scannerWithString:sRed];

            [scanner scanHexInt:&outVal];
            [self setRed:outVal];

            NSString *sGreen  = [[sHex_p substringFromIndex:2] substringToIndex:2];
            scanner = [NSScanner scannerWithString:sGreen];
            [scanner scanHexInt:&outVal];
            [self setGreen:outVal];

            NSString *sBlue = [sHex_p substringFromIndex:4];
            scanner = [NSScanner scannerWithString:sBlue];

            [scanner scanHexInt:&outVal];

            [self setBlue:outVal];
        } 
```

But again same problem, in the hex string I provided the last 2 values are 02, but when converting from int to string, that 0 will be stripped out, so just a 2 will be passed, again ending up with an incorrect colour.

I really am unsure as what the best way to solve this is. Would be really grateful if someone could be point in the right direction.

I have been testing it using this site here

[http://www.colorpicker.com/](http://www.colorpicker.com/)

Quick example I am trying to create this hex string "#DB4200". It requires red = 219 green = 66, blue = 00

But as the blue is just set to 0 when converts from string to int, ends up returning an incorrect colour, hex string ends up as "#DB420"

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-12T13:47:14.843

那么，这实际上涉及三种不同的情况。首先，05 只是 5，无论是十六进制还是十进制。在这种情况下，问题不在于您的输入，而可能在于输出。但是，请记住这是一个十进制文字，因此如果您想`#101010` 表示每种颜色的 255 种中的 16 种，请使用十六进制常量，例如`0x10`.

第二：关于输出。您使用的格式字符串不会在每种颜色中强制使用 2 位数字，这就是为什么您的`05`成为 just `5`. `%02x`您可以通过使用而不是强制将整数（十六进制形式）输出为用零填充的两位数字`%x`。

第三，其实是第一。看起来您的方法有效，但输出错误。修复格式字符串应该可以解决这个问题。无论如何，这是使用`sscanf`.

```
- (void)interpretHexString(NSString *str)
{
    int r,g,b;
    const char *s = [str cStringUsingEncoding:NSUTF8StringEncoding];

    if (sscanf(s, "#%02x%02x%02x", &r, &g, &b) != 3) {
        /* problem with input */
    } else {
        /* set ivars */
        [self setRed:r];
        [self setGreen:g];
        [self setBlue:b];
    }
} 
```

# jquery - 使用 jQuery 查找 < 到 <

> ID：13344738
> 
> 赞同：1
> 
> 时间：2012-11-12T13:38:11.000
> 
> 标签：jquery, replace

我需要将图像标签添加到 WP eCommerce 的自定义元字段，但是当我添加它时，它会将其作为文本拉出。因此，我想使用 Jquery 来查找和替换 < > 括号，以便它确实呈现为标签。

这是我的源代码：

```
<div class="custom_meta">
<strong>CODE: </strong>JL16<br>
<strong>Colour: </strong>&lt;img src="http://localhost:81/live_products/shop/wp-content/uploads/blue.gif" /&gt;<br>
<strong>COLOURS: </strong>BLACK, WHITE, GREY, CORAL, BLUE<br>
<strong>FABRIC: </strong>LYCRA<br>
</div> 
```

这是我认为它应该在 jQuery 中工作的方式：

```
jQuery(document).ready(function(){

    // Remove "" from meta image
    jQuery(".custom_meta").replace(/&lt;/g, '<');
    jQuery(".custom_meta").replace(/&gt;/g, '>');

}); 
```

这将是替换`&lt;`to < 和`&gt;`to > 的正确方法吗？

谢谢你。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-12T13:42:03.470

这应该这样做

```
jQuery(".product_description").html(function(i, currenthtml){
   return currenthtml.replace(/&lt;/g, '<').replace(/&gt;/g, '>');
}); 
```

在[文档中阅读更多关于`.html()`](http://api.jquery.com/html/#html2)

# r - 在图例中写 x̄（意思是平均值）以及如何防止换行？

> ID：13344740
> 
> 赞同：4
> 
> 时间：2012-11-12T13:38:19.543
> 
> 标签：r, legend, plotmath, legend-properties

再会！

我对 R 不是很熟悉，所以我很乐意得到一些帮助。

假设我有以下最小示例：

```
test <- c(10,20,40,80,80)
avg <- mean(test)
avg <- format(avg,digits=2)

plot(test, xlab="x", ylab="y", pch = 4)
legend("topleft", legend= c("Average: ", avg)) 
```

我想写 x̄ 而不是“平均” - 想知道这是否可能，因为它不是常规符号 - 只是两个的组合（字母加上划线）。

我想摆脱的另一件事是“平均”一词之后的换行符（见下图中的箭头）：

![输出](../Images/760502cf444c254d2e0193e1c8bcd356.png)

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-11-12T14:02:02.513

这里有两个问题。第一个是这是`?plotmath`在 R 中使用处理的。您要查找的运算符是`bar()`. 这*不是*`plotmath`一个函数，而是可以理解的标记。

第二个是您需要一个表达式，在其中`avg`转换为其值。你需要一个表达式，因为这是`plotmath`可以使用的。这个问题有几种解决方案，但我在下面使用的一个是`bquote()`. 你为它提供一个表达式，任何包含在其中的东西都`.( )`将通过评估`.( )`.

这是您的代码和经过适当修改的`legend()`调用：

```
test <- c(10,20,40,80,80)
avg <- mean(test)
avg <- format(avg,digits=2)

plot(test, xlab="x", ylab="y", pch = 4)
legend("topleft", legend = bquote(bar(x)*":" ~ .(avg))) 
```

请注意，这将准确插入`avg`. 你可能需要做

```
avg <- round(avg) 
```

或其他一些格式修复，以获得漂亮和像样的东西。

# visual-studio-2008 - 无法打开包含文件 assert.h matlab system()

> ID：13344746
> 
> 赞同：1
> 
> 时间：2012-11-12T13:38:52.090
> 
> 标签：visual-studio-2008, matlab, opencv

我正在尝试在预装了 Microsoft Visual Studio 2008 的 Windows 7（64 位）上运行 Matlab 代码。Matlab 代码具有需要使用 opencv 编译的 .cpp 文件。

我在用着：

```
system('"C:\Program Files (x86)\Microsoft Visual Studio 9.0\VC\bin\amd64\cl.exe"  /I"C:\OpenCV2.1\include\opencv"  camshift_wrapper.c'); 
```

我收到错误消息：

```
Microsoft (R) C/C++ Optimizing Compiler Version 15.00.21022.08 for x64 
Copyright (C) Microsoft Corporation.  All rights reserved. 

camshift_wrapper.c

c:\opencv2.1\include\opencv\cxtypes.h(52) : fatal error C1083: Cannot open include file: 'assert.h': No such file or directory 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-12T13:44:24.337

尝试添加`/I "C:\Program Files (x86)\Microsoft Visual Studio 9.0\VC\include`到系统命令的参数字符串。

# django - Django Sentry 安装步骤错误

> ID：13344747
> 
> 赞同：0
> 
> 时间：2012-11-12T13:38:55.727
> 
> 标签：django, sentry

我想在我的测试服务器上记录我的 Django 应用程序发生的事情，所以我安装了 Django Sentry。

我已经按照官方文档的快速入门指南中的所有内容完成了所有操作，但是当我尝试初始化 Web 服务时，会出现此错误：

```
sentry.conf.py start
Performing upgrade before service startup...
Syncing...
Creating tables ...
Installing custom SQL ...
Installing indexes ...
Installed 0 object(s) from 0 fixture(s)
Migrating...
Running migrations for djcelery:
- Nothing to migrate.
 - Loading initial data for djcelery.
Installed 0 object(s) from 0 fixture(s)
Running migrations for django:
- Nothing to migrate.
 - Loading initial data for django.
Installed 0 object(s) from 0 fixture(s)
Running migrations for django:
- Nothing to migrate.
 - Loading initial data for django.
Installed 0 object(s) from 0 fixture(s)
Running migrations for sentry:
- Nothing to migrate.
 - Loading initial data for sentry.
Installed 0 object(s) from 0 fixture(s)

Synced:
 > django.contrib.auth
 > django.contrib.admin
 > django.contrib.contenttypes
 > django.contrib.sessions
 > django.contrib.sites
 > django.contrib.messages
 > crispy_forms
 > sentry.plugins.sentry_mail
 > sentry.plugins.sentry_servers
 > sentry.plugins.sentry_urls
 > sentry.plugins.sentry_user_emails
 > sentry.plugins.sentry_useragents
 > social_auth
 > south

Migrated:
 - djcelery
 - kombu.transport.django
 - raven.contrib.django
 - sentry
Running service: 'http'
Traceback (most recent call last):
  File "/usr/bin/sentry", line 8, in <module>
    load_entry_point('sentry==5.0.21', 'console_scripts', 'sentry')()
  File "/usr/lib/python2.5/site-packages/sentry/utils/runner.py", line 150, in main
    initializer=initialize_app,
  File "/usr/lib/python2.5/site-packages/logan/runner.py", line 136, in run_app
    management.execute_from_command_line([runner_name, command] + command_args)
  File "/usr/lib/python2.5/site-packages/django/core/management/__init__.py", line 443, in execute_from_command_line
    utility.execute()
  File "/usr/lib/python2.5/site-packages/django/core/management/__init__.py", line 382, in execute
    self.fetch_command(subcommand).run_from_argv(self.argv)
  File "/usr/lib/python2.5/site-packages/django/core/management/base.py", line 196, in run_from_argv
    self.execute(*args, **options.__dict__)
  File "/usr/lib/python2.5/site-packages/django/core/management/base.py", line 232, in execute
    output = self.handle(*args, **options)
  File "/usr/lib/python2.5/site-packages/sentry/management/commands/start.py", line 78, in handle
    service.run()
  File "/usr/lib/python2.5/site-packages/sentry/services/http.py", line 46, in run
    call_command('run_gunicorn', **self.options)
  File "/usr/lib/python2.5/site-packages/django/core/management/__init__.py", line 134, in call_command
    klass = load_command_class(app_name, name)
  File "/usr/lib/python2.5/site-packages/django/core/management/__init__.py", line 69, in load_command_class
    module = import_module('%s.management.commands.%s' % (app_name, name))
  File "/usr/lib/python2.5/site-packages/django/utils/importlib.py", line 35, in import_module
    __import__(name)
  File "/usr/lib/python2.5/site-packages/gunicorn/management/commands/run_gunicorn.py", line 10, in <module>
    from gunicorn.app.djangoapp import DjangoApplicationCommand
  File "/usr/lib/python2.5/site-packages/gunicorn/app/djangoapp.py", line 9, in <module>
    from gunicorn.app.base import Application
  File "/usr/lib/python2.5/site-packages/gunicorn/app/base.py", line 15, in <module>
    from gunicorn.config import Config
  File "/usr/lib/python2.5/site-packages/gunicorn/config.py", line 241
    except ImportError as e:
                        ^
SyntaxError: invalid syntax 
```

谢谢你的帮助！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-12T14:30:25.633

gunicorn 需要 Python 2.6 - 它添加了`except T as e`语法（参见[http://www.python.org/dev/peps/pep-3110/](http://www.python.org/dev/peps/pep-3110/)）。您至少需要切换到 Python 2.6。

请注意，gunicorn 的文档在某些地方说它支持 Python 2.5，但事实[并非如此](https://github.com/benoitc/gunicorn/issues/427)。

# tridion - 在 SiteEdit 和 Experience Manager 之间进行选择的标准是什么

> ID：13344748
> 
> 赞同：7
> 
> 时间：2012-11-12T13:38:58.593
> 
> 标签：tridion, tridion-2011, siteedit

在 Tridion 2011 SP1 系统上，您可以选择实施 SiteEdit 2009 SP3 和更新的“SDL Tridion 2011 SP1 用户界面更新”（也称为 Experience Manager）。做出这个选择的重要标准是什么，为什么？

例如：

1.  实施的难易程度/成本
2.  基础设施
3.  许可费用
4.  未来的支持
5.  改进的功能

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-11-12T14:27:31.467

我将增加 2 美分的成本 - 在我的大多数实施中，安装和测试 SiteEdit 2009 通常每个环境只需不到半天的时间。确保您应用了来自 SDL Tridion World 的所有热修复程序，以使其与最新的浏览器一起工作。

新的 UI 可以选择使用称为“会话预览”（以实现快速发布）的东西，它利用了 OData 等多种内容交付技术。如果您还没有在您的实施中使用这些，那么它们可能是对基础设施/应用程序设计的可观投资，以使其设计/安装/工作/测试（我听说过这需要一个多月的案例），这短期内，Experience Manager 的实施成本会大大增加。如果您不使用“会话预览”功能，（正如弗兰克已经说过的）实施时间/成本是相似的，但您不会从新产品的新快速发布功能中受益。

至于功能 - 这两种环境的外观和感觉非常不同。Experience Manager 显然是产品发展的方向，并提供了更流畅的界面。因此，如果您的客户是 SDL Tridion 的新手，我建议您使用它，但如果他们是长期使用过 SiteEdit 1.3 或 2009 的 SDL Tridion 客户，并且您不打算利用一些较新的功能在短期内，我很想继续使用 SE 2009，并在升级到 SDL Tridion 2013 时转向 Experience Manager。

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2012-11-12T13:53:44.503

我的想法（顺便说一句，我仍在调用新产品 UI）：

*   UI 仅适用于 2011 Sp1 Hr1
*   SiteEdit 现在已经很老了，UI 是后来的产品……你为什么要选择安装不是最新软件的东西？

你的观点：

1.  当您必须在不久之后安装 UI 时，安装 2009 的成本将是一种浪费:)
2.  UI 不再有代理，它是 CM 机器的一部分。设置站点要容易得多 3/4。不知道许可证成本，我想 SDL 不支持 SE2009，所以我会问 SDL。
3.  UI 真的很棒，我不打算写一篇关于新东西的文章，但我认为你的清单上没有的要点应该是：

**“最终用户如何看待这两个系统？”**

这是一个用户编辑工具、基础设施、技术细节的实现，我相信你可以解决任何一个问题（如果你必须这样做），如果你要放入一个用户使用的工具并且你有一个做出的选择，不应该是他们一致认为效果最好的那个吗？

* * *

## 回答 #3

> 赞同：7
> 
> 时间：2012-11-12T14:17:43.303

SiteEdit 2009 SP3 和 Experience Manager 都是当前受支持的产品。但很明显，SDL 未来的重点是进一步扩展 Experience Manager，而不是 SiteEdit 2009。

在简单的场景中，SiteEdit 2009 可能更容易实施，因为 Experience Manager 对内容交付系统的影响更大，因为它的会话预览机制的先决条件。然而，当我在没有 Session Preview 的情况下安装 Experience Manager 时，我发现设置 SiteEdit 2009 所需的时间并不多——我安装的次数要多得多。

但由于 Experience Manager 不使用服务器端代理这一事实，它通常会导致更少的集成问题。许多更高级的身份验证方案应该可以简单地与 Experience Manager 一起使用，而 SiteEdit 2009 已经证明它们具有挑战性。

我认为以上内容涵盖了您问题的第 1 点至第 4 点。我将把第 5 项留给其他人，尽管我已经提到“会话预览”是 Experience Manager 中的一项重要新功能。

# android - 如何在不启动 Activity 的情况下使用通知中的操作

> ID：13344756
> 
> 赞同：31
> 
> 时间：2012-11-12T13:39:17.647
> 
> 标签：android, android-notifications, android-pendingintent, mediaplayback

所以我正在开发一个简单的音乐播放器。顾名思义，音乐播放器可以播放歌曲、暂停播放、前进到下一首歌曲、返回上一首歌曲以及完全停止播放。播放歌曲时，会显示艺术家姓名和歌曲名称的通知；此通知还具有三个按钮（操作）：停止、暂停和下一步。

我遇到的问题是确保单击任一操作时，都会触发与该操作相关的播放控件，而且，我完全不知道该怎么做。我搜索了 Android 通知： http: [//developer.android.com/guide/topics/ui/notifiers/notifications.html](http://developer.android.com/guide/topics/ui/notifiers/notifications.html)，但它没有澄清或提供太多关于通知操作的信息。

下面是一个简单的动作示例（应该与单击通知的“下一步”按钮相关联：**注意：**下面描述的所有代码都写在以下包下：**com.deadpixels.light.player**并且调用了 Activity :**玩家活动**

```
public void nextSong() {
    if (position == songs.size() -1) {
        Toast.makeText(this, "No more songs on queue", Toast.LENGTH_SHORT).show();
        if(mPlayer.isPlaying()) {
            return;
        }
        else {
            buttonPlay.setImageResource(R.drawable.button_play);
        }
        return;
    }
    else {
        position++;
        playSong(songs.get(position));
    }
} 
```

这是我试图做的：

```
Intent nextIntent = new Intent(KEY_NEXT);
PendingIntent nextPendingIntent = createPendingResult(0, nextIntent, 0); 
```

NextIntent 的操作在哪里：

```
public static final String KEY_NEXT = "com.deadpixels.light.player.PlayerActivity.nextSong"; 
```

然后我通过 addAction() 将其添加到通知中：

```
mBuilder.addAction(R.drawable.not_action_next, "Next", nextPendingIntent); 
```

你们知道我还能尝试什么吗？使用我上面解释的内容根本没有任何作用，会显示通知，并具有三个操作按钮，但单击它们对我没有任何作用。

有一次我想，如果我添加了带有动作名称的意图过滤器，但后来我想，好吧，它们都在同一个命名空间上，我为什么要这样做？

* * *

## 回答 #1

> 赞同：45
> 
> 时间：2012-11-13T18:36:23.173

我已经使用广播解决了这个问题。例如，要发送前进到下一首歌曲的广播，您可以使用以下命令：

```
Intent nextIntent = new Intent(KEY_NEXT);
PendingIntent nextPendingIntent = PendingIntent.getBroadcast(this, 0, nextIntent, 0); 
```

然后，`BroadcastReceiver`在您的`Activity`:

```
IntentFilter filter = new IntentFilter();
filter.addAction(KEY_NEXT);
// Add other actions as needed

receiver = new BroadcastReceiver() {
    @Override
    public void onReceive(Context context, Intent intent) {
        if (intent.getAction().equals(KEY_NEXT)) {
            nextSong();
        } else if (...) {
            ...
        }
        ...
    }
}

registerReceiver(receiver, filter); 
```

如果您使用服务来管理后台播放，那么您需要`BroadcastReceiver`在服务而不是活动中注册。确保将`receiver`实例存储在某处，以便在活动或服务关闭时可以取消注册。

# matlab - 如何计算字节二元组的香农熵

> ID：13344760
> 
> 赞同：2
> 
> 时间：2012-11-12T13:39:31.680
> 
> 标签：matlab, statistics

我已将图像文件读入这样的数组

```
A = imread(fileName); 
```

现在我想计算香农熵。在 maltab 中发现的香农熵实现是一种字节级熵分析，它认为一个文件由 256 个字节级组成。

```
wentropy(x,'shannon') 
```

但是我需要执行一个二元熵分析，这需要将一个文件视为由 65536 个级别组成。任何人都可以建议我实现这一目标的好方法。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-11-12T16:19:50.633

随机变量的熵可以使用以下公式计算： ![在此处输入图像描述](../Images/52742cb80fef3e0a6b5f4d7a2f55ffa3.png)

`p(x)`在哪里`Prob(X=x)`。

给定一组`n`观察结果`(x1, x2, .... xn)`然后您计算`P(X=x)`所有 x 值的范围（在您的情况下，它将介于所有值之间`(0 and 65535)`，然后对所有值求和。最简单的方法是使用`hist`

```
byteLevel = 65536
% count the observations

observationHist = hist(observations, byteLevel);
% convert to a probability
probXVal = observationHist ./ sum(observationHist);  

% compute the entropy
entropy = - sum( probXVal .* log2(probXVal) ); 
```

在文件交换上有几个值得一试的实现。

**注意**：你从哪里得到`wentropy`使用 256 字节级别的？我在码头的任何地方都没有看到？请记住，在 Matlab 中，彩色图像的像素有 3 个通道（R、G、B），每个通道需要 8 位（或 256 字节级别？）。

此外，由于每个通道都绑定在您之间，`[0 256)`您可以创建一个从`P(R=r,G=g,B=b)`to的映射，`P(X=x)`如下所示：

```
data = imageData(:,:,1);
data = data + (imgData(:,:,2) * 256);
data = data + (imgData(:,:,3) * 256 * 256); 
```

我相信您可以使用它`data`来计算每个通道独立的图像的总熵。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2017-03-05T09:14:04.417

将具有“65536”级别的彩色图像转换为具有“256”级别的灰度图像并考虑熵评估。

# aptana - 将外部浏览器添加到 Apanta Studio 3

> ID：13344761
> 
> 赞同：1
> 
> 时间：2012-11-12T13:39:35.723
> 
> 标签：aptana

我正在尝试从首选项/Web 浏览器中添加一个外部浏览器到 Aptana Studio 3，然后是 NEW，这给了我“添加外部浏览器”对话框。

当使用“浏览”选项将 Aptana 指向应用程序文件夹中的 Safari 时，它给了我一个“位置值不是有效的路径名”错误。

位置显示为：/Applications/Safari.app

如果我将其更改为： /Applications/Safari/Contents/MacOs/Safari.app 它仍然会给我错误。

正确的路径名应该是什么？

谢谢

**好的找到它：**

```
/Applications/Safari.app/Contents/MacOS/Safari
/Applications/Google Chrome.app/Contents/MacOS/Google Chrome
/Applications/Firefox.app/Contents/MacOS/firefox-bin 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-05-18T19:01:26.327

不知何故，OP的解决方案对我来说并不奏效。但是，如果您使用编辑启动配置`Run > Run configurations...`并选择启动配置，在主选项卡中显示“浏览器可执行文件”，它实际上会接受类似的内容`/Applications/Google Chrome.app`（只需使用浏览按钮）

# jquery - 根据输入值使用 jquery 过滤 .json 数据

> ID：13344776
> 
> 赞同：1
> 
> 时间：2012-11-12T13:40:34.317
> 
> 标签：jquery, json, filter

我需要建立一个航班搜索引擎，数据存储在一个 .json 文件中。我有一个表单，当用户选择四个字段 [从、到和两个日期（开始返回）] 并按提交时，我需要返回具有上述条件的结果。我怎样才能做到这一点。请帮忙。

# asp.net - 使用 TransactionScope 和 MS DTC 的偶然 System.ArgumentNullException

> ID：13344778
> 
> 赞同：1
> 
> 时间：2012-11-12T13:40:57.607
> 
> 标签：asp.net, .net, transactionscope, msdtc

我偶尔会在我们的生产服务器上遇到这个异常：

```
System.ArgumentNullException: Value cannot be null.
   at System.Threading.Monitor.Enter(Object obj)
   at System.Data.ProviderBase.DbConnectionPool.TransactedConnectionPool.TransactionEnded(Transaction transaction, DbConnectionInternal transactedObject)
   at System.Data.SqlClient.SqlDelegatedTransaction.SinglePhaseCommit(SinglePhaseEnlistment enlistment)
   at System.Transactions.TransactionStateDelegatedCommitting.EnterState(InternalTransaction tx)
   at System.Transactions.CommittableTransaction.Commit()
   at System.Transactions.TransactionScope.InternalDispose()
   at System.Transactions.TransactionScope.Dispose()
   //... continues here with references to my DAL code 
```

**发生此异常的原因是什么？**

我已经对此进行了一些研究，但还没有取得具体的成功。我也在这里阅读了这个问题：

*   [使用 TransactionScope 的间歇性 System.ArgumentNullException](https://stackoverflow.com/questions/12427591/intermittent-system-argumentnullexception-using-transactionscope)
*   [TransactionScope 在某些机器上自动升级到 MSDTC？](https://stackoverflow.com/questions/1690892/transactionscope-automatically-escalating-to-msdtc-on-some-machines)

现在我知道，如果我能**避免将我的交易升级到 DTC**，我就会摆脱这个问题。**但如果我不能呢？**我有多个数据库要在一个事务中更新或读取，所以我必须使用 DTC。我偶尔会在通常运行良好的操作上收到此错误。

**技术背景**

*   它是 .NET 3.5 上的 ASP MVC2 和 LINQ2SQL 应用程序
*   我们有三个基于 IP 地址的负载平衡虚拟机，每个都有 IIS7
*   使用 SQL Server 2008 的单一虚拟机 - 它由 Web 服务器共享

我应该指出，我也无法在我的开发机器（开发服务器 + SQL express 2008）和我们的测试机器（与单个 IIS7 和 SQL server 2008 一起虚拟）上重现此异常。

我怀疑我们的生产服务器配置存在一些线程/处理问题（就像两个进程试图使用相同的连接）。

**更新**

我找到了另一个链接。它说明 ado.net 连接处理错误可能又回来了。但遗憾的是最终没有解决方案，我发现没有其他人描述类似的问题。

*   [http://social.msdn.microsoft.com/Forums/nl-BE/adodotnetdataproviders/thread/388a7965-9385-4f5c-a261-1894aa73c16e](http://social.msdn.microsoft.com/Forums/nl-BE/adodotnetdataproviders/thread/388a7965-9385-4f5c-a261-1894aa73c16e)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-21T07:05:24.657

根据 [http://support.microsoft.com/kb/960754](http://support.microsoft.com/kb/960754)，System.Data.dll 的 2.50727.4016 版本存在问题。

如果您的服务器有这个旧版本，我会尝试从 Microsoft 获取更新的版本。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-12T16:20:38.867

它看起来像一个错误，因为它是 .NET 内部代码，与您自己的代码无关。

如果您使用反射器（或任何其他 IL 工具）查看内部`TransactedConnectionPool.TransactionEnded`方法，您会发现它的实现在 .NET 3 和 .NET 4 之间发生了变化……我想当时它不是线程安全的。您可以尝试将其报告给[Microsoft Connect](http://connect.microsoft.com/)。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-12T14:17:29.597

根据 doco [MSDN System.Transactions.TransactionScope](http://msdn.microsoft.com/en-us/library/system.transactions.transactionscope.dispose%28v=vs.100%29.aspx)该方法是同步的，因此它使用监视器。doco 并没有说该方法是线程安全的，所以我认为您可能以某种方式从多个线程对同一个 Transaction 范围对象调用 dispose 。您可以使用 transactionscope 对象的静态属性`System.Transactions.Transaction.Current`来找出您所指的事务。也许在处理您的事务范围之前的日志消息可能会暴露发生这种情况的位置......

如果这不是线程问题，那么您很可能会发现一个在 .Net 中引发错误的极端案例。我发现 MSDTC 在出现问题时的行为充其量是不愉快的。

# java - 覆盖 java.lang.Enum.values() 上的 Javadoc 注释

> ID：13344780
> 
> 赞同：8
> 
> 时间：2012-11-12T13:41:03.360
> 
> 标签：java, enums, overriding, javadoc

[我对方法java.lang.Enum](http://docs.oracle.com/javase/6/docs/api/java/lang/Enum.html) .values()有一个非常具体的问题。

我想覆盖它的javadoc。非常准确地说，在我创建了自己的枚举之后，当前的 javadoc 是：

```
public static MyClass.MyEnum[] values()

  ... 
  This method may be used to iterate over the constants as follows:

    for (MyClass.MyEnum c : MyClass.MyEnum.values())
    System.out.println(c);

  Returns:
    ... 
```

但在我的公司，`System.out`电话被认为是不好的做法，所以我不希望它显示出来。我的第一次尝试是覆盖`values()`，但这显然是不可能的。还有其他方法可以做到这一点吗？还是唯一可能更新生成的文档？

我也很好奇为什么`values()`不可覆盖。[我在其他问题](https://stackoverflow.com/questions/7662424/how-do-i-reimplement-valueof-on-enumeration)上读到“它是由编译器生成的”。但是有人可以更精确吗？它似乎是从枚举的名称生成的，但它没有解释原因。

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-11-12T14:00:28.353

`values`是一种静态方法，不会被覆盖。您不能提供自己的方法来替换生成的方法，这是通过[规范](http://docs.oracle.com/javase/specs/jls/se7/html/jls-8.html#jls-8.9.2)。

没有标准机制来替换您无法控制其源代码的方法的 Javadoc，但是您可能会弄乱构建工具，或者如果所有其他方法都失败，则使用最终的 Javadoc HTML。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-12T13:51:25.397

我认为这是不可能的，但如果您愿意，您可以提交 JDK 问题并提供 OpenJDK 修复。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-12T14:03:36.087

来自[Oracle Java 教程](http://docs.oracle.com/javase/tutorial/java/javaOO/enum.html)：

> 枚举声明定义了一个类（称为枚举类型）。枚举类主体可以包括方法和其他字段。编译器在创建枚举时会自动添加一些特殊方法。例如，它们有一个静态值方法，该方法返回一个数组，该数组按照声明的顺序包含枚举的所有值。

因此，方法值不能被覆盖，因为它是编译器创建的特殊方法。当您尝试这样做时，Eclipse IDE 会生成此错误：

> 枚举（你的枚举）已经隐式定义了方法 values()

# javascript - 如何禁用工具提示功能？

> ID：13344783
> 
> 赞同：0
> 
> 时间：2012-11-12T13:41:14.767
> 
> 标签：javascript, jquery, tooltip

我正在使用工具[提示](http://ara-abcarians.com/jquery/atooltip/)库形式的工具提示，但我无法在其文档中找到如何禁用它。我在按点击计数的图像点击上使用不同的文本。`0 = '1st text', 1 = '2nd text', 2 = 'disabled'`

```
 $("#toolt").aToolTip({   
            tipContent: 'Pažymėkite kairę akį'  
        }); 
        $(".bg_image").click(function(e) {
            nrOfClicks++;
            var offset = $(this).offset();
            var relativeX = (e.pageX - offset.left);
            var relativeY = (e.pageY - offset.top);    

            if (nrOfClicks == 1){
                $("#toolt").aToolTip({   
                    tipContent: 'Pažymėkite dešinę akį'  
                }); 
            }   
            if (nrOfClicks == 2){
                $('.bg').remove();
                $("#toolt").unbind('mouseover');
                $(".bg_image").css('cursor', 'default');
            } 
            if (nrOfClicks <= 2){   
                $(this).each(function() {
                    x_coords[nrOfClicks] = relativeX;
                    y_coords[nrOfClicks] = relativeY;
                });

                $('<div>', {
                    'class':'point',
                    'css': {
                        'position': 'absolute',
                        'left':     relativeX +'px',
                        'top':      relativeY +'px',
                        'width':    '3px',
                        'height':   '3px',
                        'background-color': '#fff'
                    }
                })
                .appendTo('#output');
            } 
        }); 
```

尝试第二次单击以删除 id `#toolt`，但工具提示仍然有效。有什么建议吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-12T23:16:07.623

我找到了一种如何禁用 aToolTip 事件的 hacky 方法。

```
 $(".bg_image").unbind();
            $('#aToolTip').hide(); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-12T13:47:15.410

您需要取消绑定 mouseover 事件：

```
$("#toolt").unbind('mouseover') 
```

# c# - watin 附加到手动启动的窗口不断失败

> ID：13344784
> 
> 赞同：1
> 
> 时间：2012-11-12T13:41:18.920
> 
> 标签：c#, watin

```
IList<string> values = new List<string>();
var instance = Find.By("hwnd", "110CC");
    ...
if(instance != null)
{
   var ie = Browser.AttachTo<IE>(instance); 
```

浏览器实例由测试人员手动启动，以防万一。
这对我不起作用我不断收到来自 watin 的异常说它找不到具有该句柄的窗口。我得到了 Spy++ 的处理。
我也尝试按窗口标题或窗口网址搜索，但也没有用。有没有办法做到这一点？谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-15T22:00:14.590

以下按预期工作/没有错误。观看 2.1、IE9、Win7

在运行代码之前，打开一个 IE 浏览器并指向 cnn.com

```
 IE browser = Browser.AttachTo<IE>(Find.ByUrl("www.cnn.com"));
    browser.TextField("hdr-search-box").TypeText("searchy"); 
```

# asp.net - asp.net mvc3 razor 语法转换

> ID：13344787
> 
> 赞同：0
> 
> 时间：2012-11-12T13:41:51.847
> 
> 标签：asp.net, asp.net-mvc-3, razor

如何以剃刀语法转换此网格视图，我在 (data => { %>) 内有大括号？

```
<%Html.GridView<Employee>(
      Model,
      data => { %>
        <table class="grid" cellpadding="0" cellspacing="0">
            <tr>
                <th>&nbsp;</th>
                <th>&nbsp;</td>
                <th>&nbsp;</td>
                <th>Name</th>
                <th>E-mail</th>
            </tr>
      <% },
      (item, css) => { %>
        <tr class="<%=css%>">
            <td><%=Html.ActionImage("Edit", "Home", new { Id = item.Id }, "~/Content/edit.gif", "Edit")%></td>
            <td><%=Html.ActionImage("Delete", "Home", new { Id = item.Id }, "~/Content/delete.gif", "Delete")%></td>
            <td>&nbsp;</td>
            <td><%=item.Name%></td>
            <td><%=item.Email%></td>
        </tr>
      <% },
      "item",
      "item-alternating",
      item => { %>
        <%using (Html.BeginForm("Save", "Home", new { Id = item.Id }, FormMethod.Post, new { id = "editForm" })) {%>
            <tr class="item-edit">
                <td><input type="image" runat="server" id="save" src="~/Content/ok.gif" alt="Update" /></td>
                <td><%=Html.ActionImage("Index", "Home", null, "~/Content/cancel.gif", "Cancel")%></td>
                <td>&nbsp;</td>
                <td><%=Html.TextBox("Name", item.Name)%></td>
                <td><%=Html.TextBox("Email", item.Email)%></td>
            </tr>
        <% } %>
      <% },
      data => { %> 
            <tr>
                <td colspan="5"><hr /></td>
            </tr>       
            <tr class="paging">      
                <td colspan="5">
                    <% if (data.PagedList.IsPreviousPage) { %>
                        <%=Html.ActionImage("Show", "Home", new { page = data.PagedList.PageIndex - 1 }, "~/Content/previous.gif", "Previous page")%>
                    <% } %>

                    <%=data.PagedList.TotalCount.ToString()%> records

                    <% if (data.PagedList.IsNextPage) { %>
                        <%=Html.ActionImage("Show", "Home", new { page = data.PagedList.PageIndex + 1 }, "~/Content/next.gif", "Next page")%>
                    <% } %>
                </td>
            </tr>  
            <tr>
                <td colspan="5">&nbsp;</td>
            </tr>
            <%using (Html.BeginForm("Add", "Home", FormMethod.Post, new { id = "addForm" })) {%>
                <tr>
                    <th>&nbsp;</th>
                    <th>&nbsp;</td>
                    <th>&nbsp;</td>
                    <th>Name</th>
                    <th>E-mail</th>
                </tr>
                <tr>
                    <td><input type="image" runat="server" id="add" src="~/Content/add.gif" alt="Add" /></td>
                    <td>&nbsp;</td>
                    <td>&nbsp;</td>
                    <td><%=Html.TextBox("Name", "")%></td>
                    <td><%=Html.TextBox("Email", "")%></td>
                </tr>
            <% } %>  
            </tr>
        </table>
      <% });%> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-12T19:17:34.853

`<% ... %>`Razor仅用`@`符号替换括号。例如，这条线

```
<%=Html.TextBox("Email", "")%> 
```

变成

```
@Html.TextBox("Email", "") 
```

基本上就是这样。你只需要删除所有的`<% ... %>`括号。

# c# - 如何以编程方式创建列表视图到网格

> ID：13344788
> 
> 赞同：0
> 
> 时间：2012-11-12T13:41:59.597
> 
> 标签：c#, wpf, listview

我有一个定义列和行的网格。通过知道 x 数量的项目，我可以将它添加到我的 xaml 没问题。不幸的是，我想以编程方式创建列表视图，因为我想根据执行 SP 时获得的 x 项来填充它们。这是我的 xaml。标签也用于从 SP 结果中分配给定的内容。有人可以告诉我如何以编程方式创建它吗？

```
<Grid Name="grdItems" Width="939" Grid.Row="1" HorizontalAlignment="Left" DataContext="{Binding}" Margin="5">
    <Grid.RowDefinitions>
        <RowDefinition Height="25"></RowDefinition>
        <RowDefinition Height="auto"></RowDefinition>
        <RowDefinition Height="5"></RowDefinition>
        <RowDefinition Height="25"></RowDefinition>
        <RowDefinition Height="auto"></RowDefinition>
        <RowDefinition Height="5"></RowDefinition>
    </Grid.RowDefinitions>
    <Grid.ColumnDefinitions>
        <ColumnDefinition Width="231"></ColumnDefinition>
        <ColumnDefinition Width="5"></ColumnDefinition>
        <ColumnDefinition Width="231"></ColumnDefinition>
        <ColumnDefinition Width="5"></ColumnDefinition>
        <ColumnDefinition Width="231"></ColumnDefinition>
        <ColumnDefinition Width="5"></ColumnDefinition>
        <ColumnDefinition Width="231"></ColumnDefinition>
    </Grid.ColumnDefinitions>

    <Label Name="lblItem" Grid.Row="0" Grid.Column="0" Content="item label" />
    <ListView Name="lstFirstItem" HorizontalAlignment="Left" VerticalAlignment="Top" 
                    Height="auto" Margin="0,0,0,0" ItemsSource="" FontWeight="Regular" 
                    Grid.Column="0" Grid.Row="1">
        <ListView.View>
            <GridView>
                <GridView.ColumnHeaderContainerStyle>
                    <Style>
                        <Setter Property="FrameworkElement.Visibility" Value="Collapsed"/>
                    </Style>
                </GridView.ColumnHeaderContainerStyle>
                <GridViewColumn Width="58" DisplayMemberBinding="{Binding ItemName}"></GridViewColumn>
                <GridViewColumn Width="174.25" DisplayMemberBinding="{Binding ItemDescription}"></GridViewColumn>
            </GridView>
        </ListView.View>
    </ListView>
</Grid> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-12T14:16:02.937

我们可以从后面的代码中动态添加行或列。

为了添加行：

```
 GridLength rowheight = new GridLength(100);  //your own value we can give *,Auto as well  
    RowDefinition rowDef = new RowDefinition {Height = rowheight };    
    mainGrid.RowDefinitions.Add(rowDef); 
```

为了添加列：

```
 GridLength columnwidth = new GridLength(100);        
    ColumnDefinition colDef = new ColumnDefinition { Width = columnwidth};        
    mainGrid.ColumnDefinitions.Add(colDef ); 
```

为了在特定行、列添加文本块

```
 TextBlock textBlock = new TextBlock();        
    textBlock.Text = "Some Value";       
    Grid.SetRow(textBlock, rowNum);        
    Grid.SetColumn(textBlock, colNum);
    mainGrid.Children.Add(textBlock); 
```

希望这能回答你的问题

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2016-10-20T16:04:51.757

这对我来说非常有用：

```
 ListView Lv_Report = new ListView();
        Lv_Report.Name = "Lv_Report";
        Lv_Report.FontSize = 14;
        Lv_Report.Height = 300;
        Lv_Report.Width = 800;
        Canvas.SetTop(Lv_Report, 10);
        Canvas.SetLeft(Lv_Report, 30);
        Cv_Scheduler.Children.Add(Lv_Report);
        Lv_Report.Background = null;

        LinearGradientBrush myLinearGradientBrush = new LinearGradientBrush();
        myLinearGradientBrush.StartPoint = new System.Windows.Point(0, 0);
        myLinearGradientBrush.EndPoint = new System.Windows.Point(0, 1);
        Color color = (System.Windows.Media.Color)System.Windows.Media.ColorConverter.ConvertFromString("#7FFFFFFF");
        myLinearGradientBrush.GradientStops.Add(new GradientStop(color, 0.02));
        color = (System.Windows.Media.Color)System.Windows.Media.ColorConverter.ConvertFromString("#BFBADF69");
        myLinearGradientBrush.GradientStops.Add(new GradientStop(color, 0.19));
        color = (System.Windows.Media.Color)System.Windows.Media.ColorConverter.ConvertFromString("#7FF9FCF2");
        myLinearGradientBrush.GradientStops.Add(new GradientStop(color, 1));
        color = (System.Windows.Media.Color)System.Windows.Media.ColorConverter.ConvertFromString("#BEB9DE67");
        myLinearGradientBrush.GradientStops.Add(new GradientStop(color, 0.83));
        Style style = new Style(typeof(GridViewColumnHeader));
        style.Setters.Add(new Setter()
        {
            Property = GridViewColumnHeader.BackgroundProperty,
            Value = myLinearGradientBrush
        });

        var Lvitems = new List<string>();
            Lvitems.Add("WorkOrder");
            Lvitems.Add("Module1");

        GridView Gv = new GridView();

        foreach (String item in Lvitems)
        {
            DataTemplate Dtemplate = new DataTemplate();
            var markup =

            "<DataTemplate xmlns=\"http://schemas.microsoft.com/winfx/2006/xaml/presentation\" xmlns:x=\"http://schemas.microsoft.com/winfx/2006/xaml\" xmlns:local=\"clr-namespace:SubMeteringElectric;assembly=SubMeteringElectric\">"
             + "<StackPanel>"
             + "<Label Content =\"{Binding Lv_RSH_" + item + "}\" Width = \"100\" Height = \"30\" HorizontalContentAlignment = \"Center\" FontSize = \"14\" />"
             + "</StackPanel>"
             + "</DataTemplate>";

            byte[] byteArray = Encoding.UTF8.GetBytes(markup);
            MemoryStream stream = new MemoryStream(byteArray);

            Dtemplate = (DataTemplate)XamlReader.Load(stream);

            GridViewColumn Gvc_item = new GridViewColumn();
            Gvc_item.Header = item;
            Gvc_item.Width = 150;

            Gvc_item.CellTemplate = Dtemplate;

            Gv.Columns.Add(Gvc_item);
        }

        Gv.ColumnHeaderContainerStyle = style;
        Lv_Report.View = Gv;
    } 
```

# c# - 如何使用 lambda 表达式过滤具有多列的实体框架结果

> ID：13344793
> 
> 赞同：1
> 
> 时间：2012-11-12T13:42:22.020
> 
> 标签：c#, linq, entity-framework-4, lambda

我有下表：

![在此处输入图像描述](../Images/fcbea21d1ae0d57aa213cabd766ea534.png)

以及以下数据：

![在此处输入图像描述](../Images/bed4aca927d9388dbb476960d965f550.png)

我如何过滤结果，以便我只能从每个中获取最新行`omraade_id`（按降序排序`timestamp`）？

在这种情况下，将是具有 id: 的行`1010`和`1005`

--

从@lazyberezovsky 的回答中，我创建了以下表达式：

```
dbConnection = new ElecEntities();

            var query = from data in dbConnection.Valgdata
            orderby data.timestamp descending
            group data by data.omraade_id into g
            select g.FirstOrDefault();

            return query.ToList(); 
```

它返回 ID 为 3 和 4 的两行，它们是数据库中的前两行，也是时间戳最低的行。知道为什么吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-12T14:12:32.770

```
var query = dbConnection.Valgdata
                        .GroupBy(x => x.omraade_id)
                        .Select(g => g
                             .OrderByDescending(x => x.timestamp)
                             .FirstOrDefault()); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-12T14:45:20.737

我没有使用 EF 的经验，所以我不确定是否只有 SQL 风格的 linq 可以在这里工作。一个普通的 C#-ish：

```
var query = dbConnection.Valgdata.GroupBy(u => u.omraade_id)
      .Select(x => x.FirstOrDefault(y => x.Max(p => p.timestamp) == y.timestamp)); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-12T13:46:17.387

```
var query = from v in dbConnection.Valgdata
            orderby v.timestamp descending
            group v by v.omraade_id into g
            select g.First(); 
```

这将只返回每个 omraade_id 具有最大时间戳的记录。

*上面的UPDATE*查询对我来说很好（至少对于 MS SQL Linq 提供程序）。你也不需要这样做`FirstOrDefault`- 如果 omraade_id 被分组，那么它肯定至少有一行。

```
var query = from v in dbConnection.Valgdata
            group v by v.omraade_id into g
            select g.OrderByDesc(x => x.timestamp).First(); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-11-12T14:05:45.440

您已在每个项目上放置了过滤器。它应该应用于完整的查询结果，而不是每个项目。

以下是更新的查询。

```
 var query = (from data in dbConnection.Valgdata
        orderby data.timestamp descending
        group data by data.omraade_id into g
        select g).FirstOrDefault(); 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-11-12T14:36:20.407

到目前为止，这是我的解决方案：

```
var data = dbConnection.Valgdata.Where(x => x.godkendt == false).ToList();
var dataGrouped = data.GroupBy(x => x.omraade_id).ToList();

List<Valgdata> list = new List<Valgdata>();

 foreach (var grpdata in dataGrouped)
            {
                var dataGroup = grpdata.OrderByDescending(x => x.timestamp).ToList();
                list.Add(dataGroup.FirstOrDefault());
            }
return list; 
```

我不知道它是否最有效，但它确实有效。

# joomla - 来自禁用的 Joomla 模块的参数

> ID：13344796
> 
> 赞同：1
> 
> 时间：2012-11-12T13:42:27.963
> 
> 标签：joomla, parameters, module

是否可以从外部 PHP 文件中禁用的 Joomla 模块加载参数？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-12T13:59:48.743

```
$module = &JModuleHelper::getModule('example'); //Get the module (in this case "example")
$moduleParams = new JParameter($module->params); //Retrieve this modules parameters
$param = $moduleParams->get('paramName', 'defaultValue'); //Get the specific parameter 
```

此代码应检索文章参数（无论是否禁用）。如果它是 Joomla 之外的外部 php 文件，您还需要使用以下方法加载 Joomla 类：

```
//init Joomla Framework
define( '_JEXEC', 1 );
define( 'DS', DIRECTORY_SEPARATOR );
define( 'JPATH_BASE', realpath(dirname(__FILE__).DS.'..'.DS.'..'.DS.'..'));
require_once ( JPATH_BASE .DS.'includes'.DS.'defines.php' );
require_once ( JPATH_BASE .DS.'includes'.DS.'framework.php' );
$mainframe = JFactory::getApplication('site'); 
```

请参阅[此处](http://www.themepartner.com/blog/25/retrieving-plugin-module-component-and-template-parameters/)了解更多信息

# asp-classic - 来自另一台服务器的经典 ASP HTTP Post

> ID：13344797
> 
> 赞同：-1
> 
> 时间：2012-11-12T13:42:32.160
> 
> 标签：asp-classic, http-headers, http-post, http-get

我有点困惑，我想保护经典 asp 中的一页不被 Get Method 访问。有人可以将数据从另一台服务器发布到我的页面吗？

如果是，如何检测并只允许从我的服务器发布。

感谢帮助。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-13T03:11:46.627

如果您当前正在使用 Request("ParameterName") 来检索参数，那么您应该更改为 Request.Form("ParameterName") ，它只会在参数被 POST 时获取。

或者，您可以从 Request.ServerVariables 集合中查找用于访问页面的方法，如果不是 POST，则结束脚本。这是一个例子：

```
If Request.ServerVariables("REQUEST_METHOD") <> "POST" Then Response.End 
```

我注意到您还说您只想接受来自您服务器的帖子。上述更改仍将允许将另一个网页设置为 POST 到您的页面。如果您想确保只有您的网页可以发布，那么您将需要添加更多保护。这是一种方法。

1）当您呈现表单时，创建一个随机数并创建一个由随机数命名的会话变量，并带有一个值以供稍后检查。

```
Randomize
strVarName = Int((999999 - 100000 + 1) * Rnd() + 100000)
Session(strVarName) = "Authorised" 
```

2）在您的表单中添加一个带有随机数值的隐藏字段。

```
<input type="hidden" name="varname" value="<%= strVarName %>" /> 
```

3) 在处理已发布表单的脚本中，获取隐藏字段的值。

```
strVarName = Request.Form("varname") 
```

4) 检查会话变量是否已设置且值为 True。

```
If Session(strVarName) <> "Authorised" Then
    'Failed! Either show the user an error message or stop processing
    Response.End
End If 
```

5) 删除会话变量，使相同的表单无法重新提交。

```
Session.Items.Remove(strVarName) 
```

You don't need the random number but using it means that the same user can have multiple forms open in different windows/tabs and each one will work.

# xcode4.5 - Xcode 4.5 info.plist

> ID：13344799
> 
> 赞同：1
> 
> 时间：2012-11-12T13:42:41.780
> 
> 标签：xcode4.5, info.plist

我正在使用 Xcode 4.5 并尝试向 info.plist 添加键（使用下拉列表中的**添加行命令，或单击****加**号按钮）。

问题是 plist 没有添加我需要的任何额外键。它仅在我在选项卡之间切换时更新：摘要和构建设置。我的意思是当我向 plist 添加新行时，它必须将其添加到自身，在我的情况下它不会这样做。我在运行时看不到任何更新。你有同样的问题吗？

我在我所在的位置附上了文件。当我按下此按钮时，我的 plist 没有任何反应，但 plist 应该添加新行（将存储在 xml 中的键），就像我想的那样。

![在此处输入图像描述](../Images/c33970a3800f20009957143e6d40a45c.png)

我还添加了[视频](http://www.youtube.com/watch?v=i7NLcB3nN_w&feature=youtu.be)它是如何工作的。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-13T15:40:04.480

您正在尝试使用`info.plist`具有一组固定支持值的应用程序。

我认为您需要在您的 Xcode 项目中添加一个自定义 plist，它可以保存您想要的任何值。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-12-24T00:31:23.893

如果您不想创建自己的下拉值，则必须创建一个定义结构，这是一种 Xcode 插件。这是另外两个很好地解释它的讨论。

[Apple 如何让 info.plist 显示其“信息属性列表”？](https://stackoverflow.com/questions/321933/how-does-apple-make-the-info-plist-display-its-information-property-list)

[我可以创建自定义 plist 结构定义吗？](https://stackoverflow.com/questions/2428768/can-i-create-a-custom-plist-structure-definition)

# c++ - 移动构造函数可以是隐式的吗？

> ID：13344800
> 
> 赞同：15
> 
> 时间：2012-11-12T13:42:42.423
> 
> 标签：c++, visual-c++, c++11, visual-studio-2012, move-semantics

考虑以下类：

```
class A
{
public:
   std::string field_a;
   std::string field_b;
} 
```

现在考虑以下复制结构：

```
A a1(a2); 
```

`A`尽管缺少显式复制构造函数，复制构造仍将充分复制，因为`std::string`编译器生成的隐式复制构造函数将调用 for 的复制构造函数。

我想知道的是，搬家施工也是如此吗？

**编辑**：[这里](http://ideone.com/1tBOpe)的测试表明：

```
A a2(std::move(a1)); 
```

实际上会导致复制构造，除非特定的移动构造函数：

```
A( A && other ) : a(std::move(other.a)) {} 
```

被定义为。

**编辑 编辑** 我联系了 Stephan T Lavavej 并问他为什么 VC 2012 似乎没有遵循 12.8 草案关于隐式移动构造函数生成的规定。他好心解释：

> 它更像是一个“尚未实现的功能”而不是一个错误。VC 目前实现了我所说的右值引用 v2.0，其中移动 ctors/assigns 永远不会隐式生成，也不会影响复制 ctors/assigns 的隐式生成。C++11 指定右值引用 v3.0，这是您正在查看的规则。

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2012-11-12T14:34:15.733

是的，来自 C++11 草案，12.8：

> 如果类 X 的定义没有显式声明移动构造函数，当且仅当

> *   X 没有用户声明的复制构造函数，
> *   X 没有用户声明的复制赋值运算符，
> *   X 没有用户声明的移动赋值运算符，
> *   X 没有用户声明的析构函数，并且
> *   移动构造函数不会被隐式定义为已删除。

最后一个条件将在稍后更详细地指定：

> 隐式声明的复制/移动构造函数是其类的内联公共成员。如果 X 具有以下属性，则类 X 的默认复制/移动构造函数被定义为已删除 (8.4.3)：

> *   具有非平凡对应构造函数的变体成员，并且 X 是类联合类，
> *   类类型 M（或其数组）的非静态数据成员，因为重载决议 (13.3) 应用于 M 的相应构造函数时，会导致歧义或从默认值中删除或无法访问的函数，因此无法复制/移动构造函数，
> *   无法复制/移动的直接或虚拟基类 B，因为应用于 B 的相应构造函数的重载解析 (13.3) 会导致歧义或从默认构造函数中删除或无法访问的函数，
> *   具有从默认构造函数中删除或不可访问的析构函数的类型的任何直接或虚拟基类或非静态数据成员，
> *   对于复制构造函数，右值引用类型的非静态数据成员，或
> *   对于移动构造函数，非静态数据成员或直接或虚拟基类，其类型没有移动构造函数且不可轻易复制。

简而言之，如果出现以下情况，将隐式声明移动构造函数：

1.  该类没有用户声明的任何其他特殊成员函数。
2.  移动构造函数可以通过移动它的所有成员和基数来实现。

你的班级显然符合这些条件。

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-11-12T14:01:20.103

如果可以并且没有用户定义的复制构造函数，编译器会合成一个移动构造函数。如果存在复制构造函数，则不合成移动构造函数的限制旨在避免破坏现有代码。当然，所有成员都需要是可移动的。确切的规则涉及更多。

# rdf - 将大型 RDF 加载到三重存储的跨平台方法

> ID：13344801
> 
> 赞同：2
> 
> 时间：2012-11-12T13:42:47.177
> 
> 标签：rdf, bigdata, triplestore, virtuoso

目前，我们使用 Virtuoso 来存储 RDF 三元组。我们想要一种将 RDF 文件加载到数据库的自动化方式。数据可能非常大，所以目前我们是依靠 Virtuoso[批量数据加载器](http://www.openlinksw.com/dataspace/dav/wiki/Main/VirtBulkRDFLoader)来加载数据；但是，将来我们可能会切换到其他一些三联商店，所以我不想依赖这样的特定于平台的解决方案。是否有更通用的跨平台方式将大型 RDF 文件加载到三重存储中？

我们的大部分编程都是在 Python 中完成的，因此最好使用 Python 绑定的解决方案。

我对语义网络技术很陌生，所以如果我的问题不够详细，请告诉我，我会尽力提供更多信息。谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-12T17:39:05.943

在[http://virtuoso.openlinksw.com/dataspace/dav/wiki/Main/VirtRDFInsert](http://virtuoso.openlinksw.com/dataspace/dav/wiki/Main/VirtRDFInsert)中详细介绍了许多 Virtuoso RDF 插入方法，其中大部分是 Virtuoso 特有的，部分原因是 Virtuoso 独有的功能，如 WebDAV 和 ODS或在其他商店中以不同方式实现或根本没有实现的功能。

在您的情况下，最通用的方法可能是将数据集读入 Python 并使用 SPARQL 1.1 更新（[http://www.w3.org/TR/sparql11-update/](http://www.w3.org/TR/sparql11-update/)）命令将数据插入/加载到 Virtuoso 或任何其他支持 SPARQL 1.1 更新的三重商店，我想大多数人现在都会这样做。这种方法的主要缺点是必须在 Python 中管理插入过程，以确保一致地加载数据、处理死锁、回滚等，这将使这种方法变得更慢，并且对于非常大的数据集可能无法忍受。这就是为什么大多数供应商提供他们自己的“批量加载器”方法，其中数据一致性和死锁等在内部处理得更快。

# extjs4 - 在按钮上单击获取选定的网格行数据

> ID：13344803
> 
> 赞同：0
> 
> 时间：2012-11-12T13:42:51.450
> 
> 标签：extjs4

我有一个关于从选定网格行获取数据的问题。

这是存储数据库信息的网格面板：

```
gridHoldingPanel = _ui.createGrid({
                extClass: 'Ext.grid.Panel',
                width: windowSettings.gridPanel.width,
                height: windowSettings.gridPanel.height,
                id: _id.archiveHistoryGrid,
                title: null,
                selModel: 'rowmodel',
                store: ds,
                columns: [{
                    header: 'Archived at',
                    dataIndex: 'archived_at',
                    width: 120
                }, {
                    header: 'Calls Starting',
                    dataIndex: 'date_from',
                    width: 120
                }, {
                    header: 'Calls Ending',
                    dataIndex: 'date_to',
                    width: 120
                }, {
                    header: 'Calls Archived',
                    dataIndex: 'total_calls',
                    width: 90
                }, {
                    header: 'Database',
                    dataIndex: 'db_archived',
                    width: 70
                }, {
                    header: 'Archive Path',
                    dataIndex: 'path',
                    width: 200
                }],
                stripeRows: true,
                listeners : {
                    itemdblclick: function(dv, record, item, index, e) {
                        var win = _restoreCallsWindow(), field= win.down('textfield');
                        field.setValue(record.get('path'));
                        win.show();
                    }
                }
            }) 
```

这是带有按钮的面板，它与网格位于同一窗口中：

```
buttonsPanel = _ui.createPanel({
                border: false,
                width: windowSettings.buttonsPanel.width,
                height: windowSettings.buttonsPanel.height,
                id: _id.archiveHistoryButtons,
                items: [{
                    layout: 'hbox',
                    border: false,
                    margin: '5px 5px 5px 5px',
                    items: [
                    //Refresh button
                    _ui.createButton({
                        text: 'text_auto_refresh',
                        cls: 'sense-archive-button-buttons',
                        id: _id.arHistoryRefresh,
                        handler: function() {
                            ds.load();
                        }
                    }),
                    //Restore button
                    _ui.createButton({
                        text: 'text_restore',
                        margin: '0px 0px 0px 5px',
                        cls: 'sense-archive-button-buttons',
                        id: _id.arHistoryRestore,
                        handler: function(grid, rowIndex, colIndex) {
                            var row = gridHoldingPanel.getSelectionModel().getSelection();
                            console.log(row);
                        }
                    }),
                    //Close window button
                    _ui.createButton({
                        text: 'text_close',
                        margin: '0px 0px 0px 5px',
                        cls: 'sense-archive-button-buttons',
                        id: _id.arHistoryClose,
                        handler: function ( ) {
                            _historyWindow().close();
                        }
                    })]
                }]
            }) 
```

我想要做的是，当单击恢复按钮时，它会打开另一个包含文本输入字段的窗口，打开时我想显示数据网格中所选行的路径值。

正如您目前所看到的，我在恢复按钮中的代码将行值作为整个对象返回给我，当我尝试从对象中获取数据时`record.data`返回给我`undefined`。

有人可以帮我弄这个吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-12T14:02:39.253

问题是您将按钮处理程序参数与项目单击事件函数混合在一起。因此，对于处理程序，您将只有按钮作为参数。getSelection 函数返回一个选择数组，因此如果您有单个 select ，则该行实际上是第一个元素。简单的修复将是：

```
handler: function(btn) {
                            var records = gridHoldingPanel.getSelectionModel().getSelection();
                            console.log('the selected record path' +records[0].data.path);
                        } 
```

# java - 终止线程池中的线程

> ID：13344804
> 
> 赞同：0
> 
> 时间：2012-11-12T13:42:59.380
> 
> 标签：java, threadpool

我有一个可能有多个线程的应用程序。基本上线程应该这样工作：

*   主线程
*   计算线程
*   计算线程
*   计算线程

将这些线程添加/执行到 FixedThreadPool 不是问题。Thread 本身调用 Mainthread 中的某个函数来提交结果。在这一步之后，线程应该休眠，直到它再次被调用以进行下一次计算。

Mainthread 持有对 CalculationThread 的引用以向线程提交更新并将其读取到池中以开始下一次计算。

我的问题：如何强制某个线程超时？如果发生无限循环，此超时的强制执行也必须有效

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-12T13:46:07.233

如果没有线程的合作，您不能强制超时，至少不能以一种理智的方式。您应该对计算任务进行编码，使其符合 Java 中断机制。基本上，这意味着偶尔检查`Thread.interrupted`返回值并中止`true`.

唯一的其他选择是笨拙的 - 并且已弃用 - `Thread.stop`，它可能会造成一般混乱，尤其是在池管理的线程上完成时。

# java - 数学问题（在一个循环中增加和减少两个变量）

> ID：13344808
> 
> 赞同：3
> 
> 时间：2012-11-12T13:43:15.850
> 
> 标签：java, math, graphics

我有一个 for 循环，在那个整数 x 内将从 533 增加到 813。这意味着 280 个增量。在同一个循环中，当发生上述情况时，我想将 y 的值从 300 减少到 200。这意味着当 x 为 533 时，y 必须为 300，而当 x 为 813 时，y 必须为 200。我知道这可以通过在每次迭代中将 y 的值减少 100/280 来实现。但两者都是整数。

这是我使用的一些代码示例，但它不起作用。：

```
for(int i = 0; i < b.getSize(); i++) {
            x = b.getCar(i).getPosX();
            b.getCar(i).setPosX(++x);
            if(x >= ((getWidth() / 2) - 140) && x < ((getWidth() / 2) + 140)){
                y = b.getCar(i).getPosY();
                y = (double)(y - (10.0f / 28.0f));
                b.getCar(i).setPosY((int)y);                    
            }
        } 
```

我怎么可能做到这一点。谢谢！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-12T13:48:08.467

有两种解决方案，一种简单的，一种复杂的。最简单的一个：

```
y = yoff + (int)( (double) height * x / width ) 
```

哪里`yoff = 300, height = -100, width = 813-533`。基本上，您进行浮点运算，然后对结果进行四舍五入。

或者，可以使用[Bresenham 线算法](http://en.wikipedia.org/wiki/Bresenham%27s_line_algorithm)使用纯整数数学来完成相同的操作，但这需要更多的代码。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-11-12T13:45:32.163

`y`必须是 a`double`或 a`float`并且您需要在要使用它时对其值进行四舍五入。

* * *

如果你想做动画，看看插值器。您可以抽象计算极值之间的值的逻辑。

基本上在一开始，你给你的插值器开始和结束值。

然后，您给插值器一个时间，它会返回该时间值的开始和结束之间的值。

**奖励**：它将允许您更改动画的外观和感觉，而无需触及其余代码。（您尝试做的实际上是线性插值，但使用正弦函数或其他一些算法（如弹跳、二次等）看起来会更好。）

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-11-12T13:46:46.627

它看起来像画线的逻辑。Bresenham 算法应该是最好的选择。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-11-12T13:48:45.930

保留一个帮助变量`double dy`来跟踪 y 的*精确*值。在每次迭代中，使用您的公式更新 dy，然后通过取 dy 的舍入/截断值更新 y。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-11-12T13:49:30.713

不知道你喜欢做什么，但你当前的解决方案是从浮点数舍入到整数。为避免这种情况，请使用浮点数/双精度数进行计算，并在设置位置时将它们转换为整数。

# java - 支持 JDK 1.5 和 JDK 1.6 的 SQL Server JDBC 驱动程序 4.0

> ID：13344809
> 
> 赞同：0
> 
> 时间：2012-11-12T13:43:23.447
> 
> 标签：java, jdbc

[Microsoft JDBC Driver 4.0](http://www.microsoft.com/en-us/download/details.aspx?displaylang=en&id=11774)提供了sqljdbc.jar 和 sqljdbc4.jar。根据发行说明，sqljdbc.jar 可以与 Java 5 一起使用，sqlserver4.jar 可以与 Java 6 和 7 一起使用。

我当前的项目使用 Java5 编译，因此我们的客户可以根据他们的 Web/应用程序服务器支持在 Java5 或 Java6 或 Java7 中运行它们。目前我为所有 web/app 服务器创建了一个 war 文件。由于 Microsoft 为各种 JDK 提供了不同的 jar，有没有办法根据 Java 版本使用单个部署包加载适当的 sqljdbc jar？

我可以为 Java5 和 Java6 创建单独的 war 文件，这可以解决问题，但想与其他人一起检查是否有其他选项。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-12T14:02:22.173

问题是 JDBC 4 添加了额外的接口、`SQLException`子类等。所以你肯定不能`sqljdbc4.jar`与 Java 5 一起使用，相反的方法可能是可能的，但是（这是一个强大的但是），如果应用程序或应用程序服务器尝试访问 JDBC 4 中定义的方法之一，然后它将失败并严重失败。

换句话说：要么创建特定于 Java 版本的 WAR，要么单独部署驱动程序，而不是作为应用程序的一部分。

# javascript - 根据下拉值自动填充文本框

> ID：13344814
> 
> 赞同：1
> 
> 时间：2012-11-12T13:43:47.143
> 
> 标签：javascript, php, jquery, mysql, jquery-events

这可能是一个愚蠢的问题，但我想澄清一下如何解决这个问题。我遇到过不少文章，它们允许根据使用 jQuery 和 Ajax 在下拉菜单中所做的选择来设置文本框的值。我的问题是当我尝试根据 5 个下拉菜单中的选择做同样的事情时。我将 Id 值存储在数据库中，该值应用于填充文本框。任何人都可以指导如何通过多个下拉菜单解决这个问题。到目前为止，这是我的代码：

```
 <?php
     $sql1="SELECT Schlungen  FROM schulung as s"; 
     $result=mysql_query($sql1); 
     echo "<p align='left'> <strong>Schulung 1</strong> <select name='Schlungen1'>           <option value default></option>";
     while ($row = mysql_fetch_array($result)) 
     {
     echo "<option value='" . $row['Schlungen'] . "'>" . $row['Schlungen'] . "   </option>";
      }
      echo "</select>";
      ?>

      <?php
      error_reporting(0);
      //Drop Down for Schulung 2
      $sql2="SELECT Schlungen  FROM schulung as s"; 
      $result=mysql_query($sql2); 
      echo "<p align='left'> <strong>Schulung 2</strong> <select name='Schlungen2'>  <option value default></option>";
      while ($row = mysql_fetch_array($result)) 
      {
      echo "<option value='" . $row['Schlungen'] . "'>" . $row['Schlungen'] . " </option>";
       }
      echo "</select>";
      ?>

      <?php
      error_reporting(0);
      //Drop Down for Schulung 3 
      $sql3="SELECT Schlungen  FROM schulung as s"; 
      $result=mysql_query($sql3); 
      echo "<p align='left'> <strong>Schulung 3</strong> <select name='Schlungen3'> <option value default></option>";
      while ($row = mysql_fetch_array($result)) 
      {
      echo "<option value='" . $row['Schlungen'] . "'>" . $row['Schlungen'] . "</option>";
       }
      echo "</select>";
      ?>

      <?php
      error_reporting(0);
      //Drop Down for Schulung 4 
      $sql4="SELECT Schlungen  FROM schulung as s"; 
      $result=mysql_query($sql4); 
      echo "<p align='left'> <strong>Schulung 4</strong> <select name='Schlungen4'><option value default></option>";
      while ($row = mysql_fetch_array($result)) 
      {
      echo "<option value='" . $row['Schlungen'] . "'>" . $row['Schlungen'] . " </option>";
       }
      echo "</select>";
      ?>

      <?php
      error_reporting(0);
      //Drop Down for Schulung 5  
      $sql5="SELECT Schlungen  FROM schulung as s"; 
      $result=mysql_query($sql5); 
      echo "<p align='left'> <strong>Schulung 5</strong> <select name='Schlungen5'><option value default></option>";
      while ($row = mysql_fetch_array($result)) 
      {
      echo "<option value='" . $row['Schlungen'] . "'>" . $row['Schlungen'] . " </option>";
      }
      echo "</select>";
      ?>   
      <p align="left"><strong>Access_level </strong> 
      <input type="text" name="a_level" disabled="disabled">
      </p> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-12T15:04:20.177

为了实现自动完成，您可以在 html 文件中创建一个选择字段，在 keyup 事件上调用 javascript 函数并使用 jQuery 调用您的 php 文件

```
<html>
<head>
    <script>
        $('.autosuggest').keyup(function(){
         $.post("<your file.php>",{any data you need},function(data){
          //echo the data
        //echo "<option value='" . $row['Schlungen'] . "'>" . //$row['Schlungen'] ."   </option>";
        $('.result').html(data)

});
        });
        $('.result option').click(function(){
            var rValue = $(this).text();
            $('.autosuggest').attr('value',rValue);        
            $('.result').html('');
        });

    </script>
</head>
<body>
    <input type='text' class='autosuggest'/>
    <select class='result'>
    </select>
</body>
</html> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-12T14:06:20.223

尝试将每个 html 选择选项的值设置为该文本的 id

所以回声应该是

```
echo "<option value='" . $row['id'] . "'>" . $row['Schlungen'] . " </option>"; 
```

然后在 html 上选择添加事件**onchange**并添加 JS 函数 foo() 通过使用 JQuery 或 Javascript 从页面获取所有选定的 id 来填充隐藏的输入

您还必须为每个 html 选择添加 id 或类以轻松获取其选定值

```
$("#select1").val();
$("#select2").val(); ... 
```

然后将这些值插入隐藏输入字段中，以便隐藏输入现在包含所有选定的 id

# android - SQLiteException：靠近 /TABLE_NAME/：语法错误

> ID：13344818
> 
> 赞同：1
> 
> 时间：2012-11-12T13:43:57.243
> 
> 标签：android, sqlite, syntax, tablename

请帮我。我收到此错误：

```
Caused by: android.database.sqlite.SQLiteException: near "values": syntax error: CREATE TABLE values (_id INTEGER PRIMARY KEY AUTOINCREMENT, name text, caption text, lines integer , photo_url text, type text); 
```

这是我尝试创建数据库表的方式：

```
private static final String TABLE_VALUES_CREATE =
    "CREATE TABLE " + DATABASE_TABLE_VALUES +
           " (_id INTEGER PRIMARY KEY AUTOINCREMENT, "
          + ValueTemplate.KEY_NAME + " text, "
          + ValueTemplate.KEY_CAPTION + " text, "
          + ValueTemplate.KEY_LINES + " integer , "
          + ValueTemplate.KEY_PHOTOURL + " text, "
          + ValueTemplate.KEY_TYPE + " text);";

   //ValueTemplate class:
   // VALUE TEMPLATES

      public static final String KEY_CAPTION = "caption";
      public static final String KEY_NAME = "name";
      public static final String KEY_TYPE = "type";
      public static final String KEY_LINES = "lines";
      public static final String KEY_PHOTOURL = "photo_url"; 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-12T13:46:19.567

我认为因为 (values) 是保留名称，所以重命名您的表..

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-12T13:46:08.923

表名 ( `values`) 是 SQLite 保留的关键字。

有关关键字列表，请参见此处：[http ://www.sqlite.org/lang_keywords.html](http://www.sqlite.org/lang_keywords.html)

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-11-12T13:56:54.403

如果您坚持保持完全相同的表名，请尝试`[values]`，否则最好将其重命名为`tblValues`

# node.js - Apache Thrift 与 nodejs 示例

> ID：13344819
> 
> 赞同：5
> 
> 时间：2012-11-12T13:43:59.997
> 
> 标签：node.js, serialization, deserialization, thrift

我正在尝试使用 Apache Thrift 在以不同语言实现的应用程序之间传递消息。它不一定用作 RPC，而更多用于序列化/反序列化消息。一个应用程序位于 node.js 中。我试图弄清楚 Apache thrift 如何与 node.js 一起工作，但我找不到太多文档和示例，除了一个关于 Cassandra 的小文档和示例： [https ://github.com/apache/thrift/tree/主干/lib/nodejs](https://github.com/apache/thrift/tree/trunk/lib/nodejs)

同样，我不需要在 .thrift 文件中声明的任何过程，我只需要序列化一个简单的数据结构，例如：

```
struct Notification {
   1: string subject,
   2: string message
 } 
```

谁能帮我举个例子？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-11-25T22:54:51.063

在仅仅通过查看 nodejs 的库浪费了很多时间之后，我终于找到了这个问题的答案。

```
//SERIALIZATION:
var buffer = new Buffer(notification);
var transport = new thrift.TFramedTransport(buffer);
var binaryProt = new thrift.TBinaryProtocol(transport);
notification.write(binaryProt); 
```

此时，可以在 transport.outBuffers 字段中找到字节数组：

```
var byteArray = transport.outBuffers; 
```

对于反序列化：

```
var tTransport = new thrift.TFramedTransport(byteArray);
var tProtocol = new thrift.TBinaryProtocol(tTransport);
var receivedNotif = new notification_type.Notification();
receivedNotif.read(tProtocol); 
```

为了节俭，还需要将以下几行添加到 nodejs 库中的 index.js 文件中：

```
exports.TFramedTransport = require('./transport').TFramedTransport;
exports.TBufferedTransport = require('./transport').TBufferedTransport;
exports.TBinaryProtocol = require('./protocol').TBinaryProtocol; 
```

另外，nodejs 库中也至少存在一个错误。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-08-05T23:56:23.487

上面的答案是错误的，因为它试图直接使用 outBuffers，它是一个缓冲区数组。这是一个使用 thrift 和 nodejs 的工作示例：

```
var util = require('util');
var thrift = require('thrift');

var Notification = require('./gen-nodejs/notification_types.js').Notification;

var TFramedTransport = require('thrift/lib/thrift/transport').TFramedTransport;
var TBufferedTransport = require('thrift/lib/thrift/transport').TBufferedTransport;
var TBinaryProtocol = require('thrift/lib/thrift/protocol').TBinaryProtocol;

var transport = new TFramedTransport(null, function(byteArray) {
  // Flush puts a 4-byte header, which needs to be parsed/sliced.
  byteArray = byteArray.slice(4);

  // DESERIALIZATION:
  var tTransport = new TFramedTransport(byteArray);
  var tProtocol = new TBinaryProtocol(tTransport);
  var receivedNotification = new Notification();
  receivedUser.read(tProtocol);

  console.log(util.inspect(receivedNotification, false, null));
});

var binaryProt = new TBinaryProtocol(transport);

// SERIALIZATION:
var notification = new Notification({"subject":"AAAA"});
console.log(util.inspect(notification, false, null));
notification.write(binaryProt);
transport.flush(); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2014-10-09T17:41:19.107

DigitalGhost 是对的，前面的例子是错误的。恕我直言，outBuffers 是传输类的私有属性，不应访问。

# .net - 带有项目转换的 Msbuild 副本不起作用

> ID：13344820
> 
> 赞同：0
> 
> 时间：2012-11-12T13:44:10.987
> 
> 标签：.net, tfs, msbuild

我有一个 msbuild proj 文件，如下所示。

```
<Project xmlns="http://schemas.microsoft.com/developer/msbuild/2003"   DefaultTargets="Demo">

 <ItemGroup>
   <AllFiles Include="src\**\*" ></SrcFiles>
 </ItemGroup>

 <PropertyGroup>
  <DestFolder>copy\</DestFolder>
 </PropertyGroup>

 <ItemGroup>
  <Transform01
   Include="@(AllFiles >'$(DestFolder)%(RecursiveDir)%(Filename)%(Extension)')" />
  </ItemGroup>

 <Target Name="Demo">
  <Message Text="%40(Transform01):" Importance="high" />
   <Message Text="@(Transform01)" />
   <Message Text="===== Copying files =====" Importance="high" />
   <Copy SourceFiles="@(AllFiles)" DestinationFiles="@(Transform01)" />
   <Copy SourceFiles="@(AllFiles)" DestinationFiles="@(AllFiles >'$(DestFolder)%(RecursiveDir)%(Filename)%(Extension)')" />
 </Target>

 </Project> 
```

上述目标中指定的两次复制过程抛出错误如下第一次复制抛出错误如下

```
 (error MSB3094: "DestinationFiles" refers to 1 item(s), and "SourceFiles" refers to 14   item(s). They must have the same number of items.) 
```

第二个副本抛出错误如下

```
error MSB3021: Unable to copy file "..\Data\Files\dll\1.dll" to "@(AllFiles >'copy\dll\1.dll')".Illegal characters in path. 
```

但是，如果我编写如下所示的复制过程，复制将不会出错

```
<Copy SourceFiles="@(AllFiles)" DestinationFiles="$(DestFolder)%(RecursiveDir)%(Filename)%(Extension)" /> 
```

为什么会这样？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-12T18:09:13.737

您的转换中可能缺少 - 字符。

```
 <Copy SourceFiles="@(AllFiles)" DestinationFiles="@(AllFiles ->'$(DestFolder)%(RecursiveDir)%(Filename)%(Extension)')" /> 
```

以下也应该有效。

```
<Copy SourceFiles="@(AllFiles)" DestinationFolder="$(DestFolder)\%(AllFiles.RecursiveDir)" /> 
```

来源：http: [//msdn.microsoft.com/en-us/library/3e54c37h.aspx](http://msdn.microsoft.com/en-us/library/3e54c37h.aspx)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-12T15:55:29.267

看看这里，调试 MSBuild 文件的一种非常简单的方法：http: [//blogs.msdn.com/b/visualstudio/archive/2010/07/06/debugging-msbuild-script-with-visual-studio.aspx](http://blogs.msdn.com/b/visualstudio/archive/2010/07/06/debugging-msbuild-script-with-visual-studio.aspx)

# ruby-on-rails - 调用“rails new demo”创建了一个名为“new”的文件夹？

> ID：13344821
> 
> 赞同：3
> 
> 时间：2012-11-12T13:44:17.333
> 
> 标签：ruby-on-rails

我在 Ubuntu 中使用 apt-get 安装了 Ruby 和 Rails。然后，当我测试我的安装时，就会发生这种情况。

当我`rails server`在 rails-created-folder 中调用时，rails 为我创建了一个名为“server”的新文件夹，具有正确的文件夹结构，包括`controller`文件夹、文件`app`夹、`gemlock`文件等。

怎么可能发生？我将尝试重新安装 RoR，但有人遇到过这种情况吗？

上次，我使用 RVM，但每当我创建一个新应用程序时，我都必须等待 rails 重新下载所有捆绑文件，但在这次安装中，我不必这样做。你能帮我解释一下吗？

感谢你并致以真诚的问候

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-12T15:19:56.730

正如评论中所指出的，听起来您的 rails 可执行文件是 rails 2。

1.  尝试`gem uninstall rails`，选择所有版本。

2.  运行`rails -v`。如果此命令有效，则您有一个 RVM 未处理的系统版本的 rails。顺便说一句，这就是为什么许多 Rails 开发人员从 RVM 转向 rbenv + bundler 的原因。

3.  如果您之后仍然有导轨`gem uninstall`，请运行`sudo gem uninstall rails`。在 RVM 上，sudo 可以访问您的系统 gem。您可能希望 sudo gem 卸载所有内容，这样以后就不会发生这种冲突。

4.  `gem install rails`，你应该得到版本 3.2.8。

5.  再试`rails new my_app`一次。它应该工作。如果这不起作用，请尝试以下操作：

为您的 Rails 项目创建一个父目录，例如`~/rails`. 然后创建一个`GEMFILE`看起来像这样的：

```
source :rubygems
gem 'rails', '~>3.2.8' 
```

然后在里面`~/rails`跑`bundle exec rails new app_name`。

如果这不起作用......我猜你有某种更大的系统配置问题。

# uiview - 没有 UIViewController 的 UIView

> ID：13344826
> 
> 赞同：0
> 
> 时间：2012-11-12T13:44:36.477
> 
> 标签：uiview, uiviewcontroller, ios

当设备旋转发生变化而不必控制视图时，如何以及在何处调用实例`- setNeedsLayout`的方法？基本上，这可以归结为在没有控制器的情况下通常理解视图生命周期......`UIView``UIViewController`

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-14T13:38:43.113

我猜想`UIViewController`当用户与视图交互时（例如界面方向更改等）代表视图执行的某些操作可能会通过注册到`UIApplicationDidChangeStatusBarOrientationNotification`in`UIView`来处理。

# javascript - iUI 虚拟键盘 GO 按钮

> ID：13344827
> 
> 赞同：0
> 
> 时间：2012-11-12T13:44:37.007
> 
> 标签：javascript, asp.net, iui

我正在使用 asp.net 和 iUI 制作一个非常简单的 webapp。一切正常，除了一个问题。我有一个登录表单，用户必须在其中输入电子邮件和密码，然后按登录按钮。因为用户正在智能手机中输入数据，所以他/她可以按 GO 按钮而不是隐藏键盘并按登录按钮。
问题是，如果用户按下 GO 按钮，蚂蚁登录数据是错误的，页面回发并显示第二个工具库标题。如果登录数据良好，iUI 在第二页显示两个工具栏。
我怎么解决这个问题？

PS 对于按钮，我使用的是 LinkedButton，因为我必须在代码隐藏中做一些工作（检查数据库中的登录数据）。

# c# - 在 Windows 应用商店应用程序中使用 BCL 类

> ID：13344830
> 
> 赞同：1
> 
> 时间：2012-11-12T13:44:52.317
> 
> 标签：c#, windows-8, windows-store-apps, windows-store

我正在尝试移植一个**严重依赖**于`System.Security.Cryptography`Windows Store 应用程序运行的库。在为 Windows 应用商店开发应用程序时，此命名空间完全缺失。

我应该在这里采取哪种方法来确保任何使用移植库的应用程序都可以被商店批准，并且希望不涉及通过删除受影响的命名空间来重新架构整个库？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-12T13:48:15.390

在 WinRT 中，您可以使用[Cryptography API: Next Generation (CNG)](http://msdn.microsoft.com/en-us/library/windows/desktop/aa375276.aspx)。这是受支持的，并将用于任何功能开发。

如果您查看以下WinRT [API 列表](http://msdn.microsoft.com/en-us/library/windows/apps/br211377.aspx)，您可以在安全性下找到您需要的内容。

# python - 检测数组中的更改并运行命令以获取新值

> ID：13344831
> 
> 赞同：0
> 
> 时间：2012-11-12T13:44:52.653
> 
> 标签：python, arrays, events

我有一系列不时更改的 IP，我希望每个出现的新 IP 都可以运行命令。

我的代码是：

```
while (network.status!="connected"):
    p=network.connections  
    for i in p:
        print i.ip  #checks the IP's in the array i
    time.sleep(10) 
```

所以我想每当数组中有一个新值时我就运行一个特定的命令。在 python 中执行此操作的最有效方法是什么。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-11-12T13:47:58.757

使用 a[`set`](http://docs.python.org/2/library/stdtypes.html#set)并查看每个循环中的差异：

```
old = set()
while network.status != "connected":
    p = set(network.connections)
    for i in p - old:
        print i.ip # new ips that were added
    for i in old - p:
        print i.ip # old ips that were removed
    old = p
    time.sleep(10) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-12T13:57:40.170

将列表子类化并将其连接到某个处理程序怎么样？看看这里： [https](https://stackoverflow.com/a/12203829/1091116) ://stackoverflow.com/a/12203829/1091116 您想要做的是重命名“验证”并使其对添加列表中的项目做出反应。

# android - android中的模态活动，防止模糊集中的活动

> ID：13344843
> 
> 赞同：0
> 
> 时间：2012-11-12T13:45:34.540
> 
> 标签：android, windows, android-intent, android-activity

我有一个基于 windows 原则的应用程序，并且不遵循 android 方式。. .

不要问为什么，这只是一个要求，我知道不应该那样做......

这是问题所在：

我有一个应用程序可以触发两个透明活动，即活动 A 和活动 B。

如果显示活动 A 比应该显示活动 B 没问题，因为活动 B 将超过活动 A。但是如果显示透明活动 B，那么如果我触发一个意图，则活动 A 将超过活动 A活动 B ，.. :(，业务逻辑是，如果显示 B，那么 A 也应该显示但在 A 后面。然后用户关闭 B，只有这样 A 才会可见...

我希望我描述这个好，据我所知这是不可能的，但我想问更多有经验的人

是否有可能开始一些其他活动未涵盖的活动

注意：我说的是只阻止我的应用程序的活动

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-12T13:53:26.910

让 A 在其 Intent extras 中搜索一个特殊的命令关键字，如果找到，A 也会从其`onCreate()`. 因此，要启动 A，请使用 A 的简单意图；要启动 B，将特殊关键字放在 A 的意图中，A 将启动并同时启动 B。

# php - 无法联系 ldap_bind($con, $rdn, $pwd) 上的 LDAP 服务器

> ID：13344852
> 
> 赞同：3
> 
> 时间：2012-11-12T13:46:12.010
> 
> 标签：php, zend-framework, active-directory, ldap

一段时间以来，我正在摆弄与 Active Directory 服务器的 LDAP 连接以进行身份​​验证。我尝试了这种 PHP 原生方式，也使用了 Zend 框架。即使`ldap_connect()`工作正常，只要我绑定一些东西，ldapConnection 似乎就会崩溃。这是我试过的脚本

```
error_reporting(E_ALL | E_STRICT);
putenv('LDAPTLS_REQCERT=never');

$ldapcon = ldap_connect("FQSN", 636);

ldap_set_option($ldapcon, LDAP_OPT_PROTOCOL_VERSION, 3);
ldap_set_option($ldapcon, LDAP_OPT_REFERRALS, 0);

$anon = ldap_bind($ldapcon, "CN=WebTestuserAW,OU=Benutzer,OU=DOM,DC=dom,DC=de", "Sommer2012");
//also tried: 
//$anon = ldap_bind($ldapcon, 'WebTestuserAW@dom.de', 'Sommer2012');

echo ldap_error($ldapcon); 
```

使用上面我得到**Can't contact LDAP server**。执行 a`var_dump($ldapcon)`返回资源链接。尝试使用 Zend Framework 方法连接时，错误可能有更多提示，因为给出了一些额外的连接参数

```
2012-11-12T14:37:39+01:00 DEBUG (7): Ldap: 1: host=FQHN,port=636,bindRequiresDn=1,baseDn=OU=Benutzer,OU=DOM,DC=dom,DC=de,accountFilterFormat=(sAMAccountName=%s),useSsl=1,useStartTls=,accountDomainName=dom.de,username=CN=WebTestuserAW,password=*****
2012-11-12T14:37:39+01:00 DEBUG (7): Ldap: 2: /var/www/html/login/library/Zend/Ldap.php(850): 0x1: Failed to retrieve DN for account: stosic@dvv.de [0x51 (Can't contact LDAP server): ldaps://FGHN:636]
2012-11-12T14:37:39+01:00 DEBUG (7): Ldap: 3: #0 /var/www/html/login/library/Zend/Auth/Adapter/Ldap.php(316): Zend_Ldap->bind('username@dom.de', '*****') 
```

我真的不知道了。我用谷歌搜索了一下，使用了 LDAP 协议版本，使用了请求证书选项，但没有任何帮助。与服务器的连接本身可以正常工作，`ldap_connect`但是一旦您绑定了某些内容，它就不再起作用了。对于匿名绑定也是如此。

在办公室没有人有任何线索，我也没有。因此，如果有人对我仍然可以尝试的方法有任何建议，我将非常感激！提前致谢。

附加信息：

*   服务器 LDAP 配置：
    *   启用 LDAP 支持
    *   RCS 版本 $Id：ldap.c 299434 2010-05-17 20:09:42Z pajoye $
    *   总链接 0/无限制
    *   API 版本 3001
    *   供应商名称 OpenLDAP
    *   供应商版本 20343
    *   启用 SASL 支持
*   ldap:// 和 ldaps:// 都已经过测试
*   ldap_connect() 返回一个资源链接
*   ldap_bind() 不起作用，ldap_errno() 返回 -1（无法连接到 LDAP 服务器）
*   LDAPTLS_REQCERT 和 TLS_REQCERT

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-12T14:57:04.620

默认情况下，AD 中未启用 ldaps。您是否尝试通过端口 389 连接？您是否能够使用一些 LDAP 工具（如[Apache Directory Studio](http://directory.apache.org/studio/)）连接到它？

这就是我对它为什么不起作用的猜测......但也尝试使用 DC 的 FQDN，或者甚至是 IP。

# objective-c - 子类和类别之间的区别？

> ID：13344855
> 
> 赞同：0
> 
> 时间：2012-11-12T13:46:29.817
> 
> 标签：objective-c

> **可能重复：**
> [Objective-c中继承和类别](https://stackoverflow.com/questions/522341/difference-between-inheritance-and-categories-in-objective-c)
> [的区别类别和继承有什么区别和用途？](https://stackoverflow.com/questions/13344075/whats-the-difference-and-use-of-categories-and-inheritance)

感谢您的回复，例如我们有 nsstring 类，如果我们想向该类添加方法，则无需为此创建类别，我们可以将其子类化，但为什么我们使用类别？请帮助

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-11-12T13:49:35.273

类别为特定类添加了一些额外的功能（例如`NSString`）。您无需使用该特定类名声明 Object。您只需导入该类别，所有对象都隐式成为该类别的实例，所有实现现在都可供他们使用。

当子类化时，（有时您需要重写现有的行为/方法，或者您也可以添加额外的功能。）您显式声明该 Object 的类型为

```
MyCustomString *string; 
```

然后所有方法都变得可见。

# mongodb - 将长值导入 mongodb

> ID：13344856
> 
> 赞同：7
> 
> 时间：2012-11-12T13:46:31.023
> 
> 标签：mongodb, mongoimport

如何`NumberLong`使用 将 a 导入 MongoDB `mongoimport`？

不幸的是，json 文件中的这些条目会导致错误：

```
{"_id": NumberLong(123)}
{"_id": NumberLong("123")} 
```

结果：

```
Mon Nov 12 14:41:46 Assertion: 10340:Failure parsing JSON string near: "_id": Num
0xaf6b21 0xabe459 0xabe5dc 0x7b93ad 0x56160d 0x5630f4 0xabb412 0x5546bc 0x7f961b79776d 0x554549 
 mongoimport(_ZN5mongo15printStackTraceERSo+0x21) [0xaf6b21]
 mongoimport(_ZN5mongo11msgassertedEiPKc+0x99) [0xabe459]
 mongoimport() [0xabe5dc]
 mongoimport(_ZN5mongo8fromjsonEPKcPi+0x56d) [0x7b93ad]
 mongoimport(_ZN6Import8parseRowEPSiRN5mongo7BSONObjERi+0xa2d) [0x56160d]
 mongoimport(_ZN6Import3runEv+0x1314) [0x5630f4]
 mongoimport(_ZN5mongo4Tool4mainEiPPc+0x1712) [0xabb412]
 mongoimport(main+0x2c) [0x5546bc]
 /lib/x86_64-linux-gnu/libc.so.6(__libc_start_main+0xed) [0x7f961b79776d]
 mongoimport(__gxx_personality_v0+0x419) [0x554549]
Mon Nov 12 14:41:46 exception:BSON representation of supplied JSON is too large: Failure parsing JSON string near: "_id": Num
Mon Nov 12 14:41:46 
Mon Nov 12 14:41:46 imported 0 objects
Mon Nov 12 14:41:46 ERROR: encountered 1 error 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-12T13:54:23.007

NumberLong 是一个 Javascript Shell 输出唯一的东西，表明 MongoDB 已经存储了一个 64 位整数。对于导入，您可以使用：

`{ "_id": 123 }`

它会自动使用普通数字（int32），或者如果它太大，使用 NumberLong（int64）。对于 MongoDB 中的操作，存储为 in32 还是 int64 都没有关系。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-09T22:02:10.597

如果使用`mongodump`，则需要使用`mongorestore`。我不小心最终输入了`mongoimport`一个使用`mongodump`. 它会失败并说这样的话：

```
Wed Jan  9 16:47:23 exception:BSON representation of supplied JSON is too large: Failure parsing JSON string near: <h2></h2>
Wed Jan  9 16:47:23 
Wed Jan  9 16:47:23 Assertion: 10340:Failure parsing JSON string near: <h3>The He
0xafda51 0xac5399 0xac551c 0x7bbecd 0x561a8d 0x563574 0xac1b8b 0x554b3c 0x3b9801ecdd 0x5549c9 
 mongoimport(_ZN5mongo15printStackTraceERSo+0x21) [0xafda51]
 mongoimport(_ZN5mongo11msgassertedEiPKc+0x99) [0xac5399]
 mongoimport() [0xac551c]
 mongoimport(_ZN5mongo8fromjsonEPKcPi+0x56d) [0x7bbecd]
 mongoimport(_ZN6Import8parseRowEPSiRN5mongo7BSONObjERi+0xa2d) [0x561a8d]
 mongoimport(_ZN6Import3runEv+0x1314) [0x563574]
 mongoimport(_ZN5mongo4Tool4mainEiPPc+0x16cb) [0xac1b8b]
 mongoimport(main+0x2c) [0x554b3c]
 /lib64/libc.so.6(__libc_start_main+0xfd) [0x3b9801ecdd]
 mongoimport(_
_gxx_personality_v0+0x419) [0x5549c9] 
```

不是您期望的响应，因此请注意如何将数据移入/移出 Mongo。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-11-17T22:18:06.467

这是旧的，但位置很好:)

我有一些绝对必须导入的 mongo 数据。ISODate 和 NumberLong 必须替换为它们的 mongo 内部等效项。所以我这样做了：

```
perl -ape 'BEGIN {$\=""} s/ISODate\((.*)\)/ { "\$date": $1 }/g; s/NumberLong\(\s*\"?(\d+)\"?\s*\)/ { "\$numberLong" : \"$1\" }/g; chop' data.json > data2.json 
```

这被吞下没有问题：

```
mongoimport --db mydb --collection mycoll   --file data2.json  --jsonArray 
```

# maven - 使用 maven 部署 Akka java 微内核

> ID：13344863
> 
> 赞同：1
> 
> 时间：2012-11-12T13:46:57.037
> 
> 标签：maven, akka

我正在尝试 JCranky 的关于使用 maven 和 tbt 启动脚本分发 akka 微内核的教程[click](http://jcranky.com/2012/07/13/akka-microkernel-with-maven/#comment-1607)。从descriptor.xml 文件中，我想程序集插件要创建四个目录。

下面是descriptor.xml文件

```
<id>akka</id>

  <formats>
    <format>zip</format>
  </formats>

  <fileSets>
    <fileSet>
      <directory>${project.build.directory}</directory>
      <outputDirectory>/deploy</outputDirectory>
      <includes>
        <include>*.jar</include>
      </includes>
    </fileSet>
  </fileSets>

  <dependencySets>
    <dependencySet>
      <outputDirectory>/lib</outputDirectory>
    </dependencySet>
  </dependencySets>

  <files>
    <file>
      <source>src/main/start</source>
      <outputDirectory>/bin</outputDirectory>
    </file>

    <file>
      <source>src/main/resources/application.conf</source>
      <outputDirectory>/config</outputDirectory>
    </file>
  </files>

</assembly> 
```

在 zip 文件夹中创建以下目录。那是 lib、config 和 bin 目录。从 descriptor.xml 文件中读取，看起来必须创建部署目录。不知道我是否遗漏了什么。很高兴得到澄清。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-12T15:14:12.540

您`directory`在文件集中有错误。

改成：

```
<directory>${project.build.directory}</directory> 
```

它在您所说的位置找不到任何文件。因此，没有文件被复制，`deploy`也不必创建目录。

# css - 相同的css在不同的浏览器中定位不同的结果

> ID：13344866
> 
> 赞同：0
> 
> 时间：2012-11-12T13:47:05.657
> 
> 标签：css

当在这 3 个差异中看到时，表单中文本字段的垂直位置怎么可能有 3 px 的差异。浏览器？

我要疯了。尝试在 CSS 中修复它是不好的，因为如果我更改它，它在一个中很好，但在其他中则不行。

```
#pricefromR 

{width:75px;
position:relative;
right:40px;
top: 50px;
}

#pricetoR 

{width:75px;
position:relative;
right:-45px;
top: 24px;
} 
```

因此，这对应于两个应该是平行的 texfields，彼此处于相同的水平，但它们不在不同的浏览器中，相差 3 px，并且它与每个在 LI 中的其他对发生相同

```
<li>
        <input type ="text" id = "areafromR" placeholder="area from" name = "areafrom" maxlength = "5">&nbsp;
        <input type ="text" id = "areatoR" placeholder="area to" name = "areato" maxlength = "5">
    </li> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-12T13:53:26.657

所有浏览器都不同，它们有不同的默认值，以及不同的 wu=idths/heights。我所知道的最好的方法是使用百分比，但这可能会变得复杂。您可以为不同的浏览器制作单独的 CSS。例如......那是针对Internet Explorer的

* * *

## 回答 #2

> 赞同：-2
> 
> 时间：2012-11-12T13:53:27.920

您应该尝试[重置您的 CSS](https://cssreset.com/what-is-a-css-reset/)

> 如果您不知道，每个浏览器都有自己的默认“用户代理”样式表，它用于使无样式的网站看起来更清晰。例如，大多数浏览器默认将链接设为蓝色，将访问链接设为紫色，为表格提供一定数量的边框和填充，对 H1、H2、H3 等应用可变字体大小，并为几乎所有内容设置一定数量的填充。有没有想过为什么提交按钮在每个浏览器中看起来都不一样？它限制了浏览器之间的差异

使用 CSS 重置，您可以强制每个浏览器将其所有样式重置为 null，从而减少跨浏览器差异

使用此代码：

```
/**
* Eric Meyer's Reset CSS v2.0 (http://meyerweb.com/eric/tools/css/reset/)
* http://cssreset.com
*/
html, body, div, span, applet, object, iframe,
h1, h2, h3, h4, h5, h6, p, blockquote, pre,
a, abbr, acronym, address, big, cite, code,
del, dfn, em, img, ins, kbd, q, s, samp,
small, strike, strong, sub, sup, tt, var,
b, u, i, center,
dl, dt, dd, ol, ul, li,
fieldset, form, label, legend,
table, caption, tbody, tfoot, thead, tr, th, td,
article, aside, canvas, details, embed,
figure, figcaption, footer, header, hgroup,
menu, nav, output, ruby, section, summary,
time, mark, audio, video {
margin: 0;
padding: 0;
border: 0;
font-size: 100%;
font: inherit;
vertical-align: baseline;
}
/* HTML5 display-role reset for older browsers */
article, aside, details, figcaption, figure,
footer, header, hgroup, menu, nav, section {
display: block;
}
body {
line-height: 1;
}
ol, ul {
list-style: none;
}
blockquote, q {
quotes: none;
}
blockquote:before, blockquote:after,
q:before, q:after {
content: '';
content: none;
}
table {
border-collapse: collapse;
border-spacing: 0;
} 
```

一种常见的做法是将其放在另一个 CSS 文件中。

# javascript - 有人知道他们做了冷菜单效果或类似的东西吗？

> ID：13344867
> 
> 赞同：-6
> 
> 时间：2012-11-12T13:47:07.600
> 
> 标签：javascript, jquery

当您滚动时，请参阅[http://colrd.com/上的注册登录。](http://colrd.com/)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-12T13:49:52.717

他们只需将类“滚动”添加到更改 CSS 属性的 div 容器“介绍”。

```
#introduction.scroll {
position: fixed;
top: 45px;
width: 100%;
z-index: 1000;
border-radius: 0;
-moz-border-radius: 0;
-webkit-border-radius: 0;
font-size: inherit;
font-weight: bold;
border-bottom: 1px solid white;
box-shadow: 0px 1px 5px black;
-moz-box-shadow: 0px 1px 5px #000;
-webkit-box-shadow: 0px 1px 5px black;
border-bottom-color: rgba(255, 255, 255, .5);
min-width: 1054px;
} 
```

# javascript - 等效于使用 CSS3 过渡时的 jQuery.animate 步进函数

> ID：13344872
> 
> 赞同：4
> 
> 时间：2012-11-12T13:47:21.807
> 
> 标签：javascript, jquery, css, css-transitions

我正在使用 CSS 过渡来为屏幕周围的圆圈（节点）设置动画。

CSS：

```
.circle {-webkit-transition: all 0.8s ease-in-out; } 
```

JS：

```
 $('.circle').css({ webkitTransform: "translate3d(20px, 20px, 0px)" }) 
```

我希望能够随时了解翻译属性，以便更新连接节点的线。

如果我使用 jQuery 动画，我可以使用“step”函数。CSS过渡中有类似的东西吗？我已经看到了“webkitTransitionEnd”事件，但没有针对单个动画步骤。

还是我必须用计时器来做？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-12T14:50:21.697

理论上，您可以使用计时器并获取动画元素的计算值，但它几乎可以保证运行缓慢。我从来没有觉得需要逐步访问计算值，并且只是同时启动了 2 个或更多动画。

如果你想为更复杂的东西制作动画，比如在它们之间有线条的圆圈，你应该考虑使用像[raphael](http://raphaeljs.com/)这样的画布库。

已经有一些类似的演示，比如你想要完成的，比如[这个](http://raphaeljs.com/gear.html)。

# java - 出现不可预测的弹出窗口 - 如何使用 Selenium (Java) 处理这个问题？

> ID：13344873
> 
> 赞同：0
> 
> 时间：2012-11-12T13:47:21.850
> 
> 标签：java, selenium, selenium-rc, selenium-webdriver

这是场景。

我正在使用页面对象设计模式（Web 驱动程序 + TestNG）。在运行时，某些页面上会随机出现一个弹出窗口。请注意，它们随机出现在任何页面上，我什至不确定触发器（开发和 QA 团队在地理上是分开的，由于团队的规模和时间，还有其他一些关于触发器的复杂情况需要了解。）。

**好消息是**：虽然手动重现弹出窗口非常困难，但这些弹出窗口可以被 Web 驱动程序识别，并且它们是 html 对象（不是框架）

**问题是**：我在每次新页面转换时都添加了检查页面事件。如果出现此弹出窗口，我正在检查每个页面加载。但是，Web 驱动程序会等待页面默认超时来检查每个 SINGLE 页面中是否出现了弹出窗口。这在运行时需要很长时间。想象一下如果页面超时是 120 秒。Web 驱动程序等待 120 秒来检查每个页面中是否出现弹出窗口。

不知道如何处理这种情况。我需要在弹出窗口出现时（随机）关闭它并继续在 Page 上执行。

请帮忙。如果您需要更多详细信息，请告诉我。

在此先感谢，迈克

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-13T06:52:43.343

也许您可以通过使用主页句柄并在每次页面加载后将焦点切换到它来简单地忽略弹出窗口？

这篇关于[如何在 Selenium 中处理弹出窗口的](http://www.thoughtworks-studios.com/twist/2.3/help/how_do_i_handle_popup_in_selenium2.html)文章可能会对您有所帮助。

# c# - 场景背景——启动wcf服务

> ID：13344878
> 
> 赞同：2
> 
> 时间：2012-11-12T13:47:40.340
> 
> 标签：c#, specflow, topshelf

我正在使用 specflow 和 nunit 测试 WCF 服务方法；我的场景如下所示：

```
Feature: GetAccount
    Testing API method 'get account'

Background: 
    Given Server is running

Scenario: Succesful Get
    Given An Existing Account
    When I call the GetAccount API method With password = "123"
    Then the result should be Success 
```

我不确定如何实施后台步骤；
服务器可以使用 Topshelf- 作为控制台/Windows 服务运行

```
private static void Main()
    {

      Host host = HostFactory.New(config =>
                                    {
                                      config.Service<ServiceInitializer>(service =>
                                                                      {
                                                                        service.ConstructUsing(s => new ServiceInitializer());
                                                                        service.WhenStarted((s, control) => s.Start(control));
                                                                        service.WhenStopped((s, control) => s.Stop(control));
                                                                      });
                                      config.RunAsPrompt();

                                    });
      host.Run();
    }

public class ServiceInitializer : ServiceControl

  {
    private readonly ILog m_log;

    public ServiceInitializer()
    {
      log4net.Config.XmlConfigurator.Configure();
      m_log = LogManager.GetLogger("Server");
    }

    public bool Start(HostControl hostControl)
    {
      try
      {
        var host = new IoCServiceHost(typeof(MyService));

        host.Open();
        m_log.Info("Server is now open.");

        return true;
      }
      catch (Exception exception)
      {
        m_log.Fatal("Initialization of service failed",exception);
        return false;
      }
    }

    public bool Stop(HostControl hostControl)
    {
      m_log.Info("Server has closed");
      return true;
    }

  } 
```

`ServiceInitializer`我应该只执行 .exe 服务文件，还是可以以某种方式使用我的？也许我可以使用 nUnit 的`[SetUpFixture]`？是否有任何 Specflow 最佳实践？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-03T14:04:55.203

让我们考虑一下您要测试的内容。

*   您是否需要测试 Windows 是否正确运行服务？
*   您是否需要测试 Topshelf 是否正确启动服务？
*   或者您只是想测试 GetAccount 是否有效？

我敢打赌，您使用 Topshelf 是为了让您的生活更轻松，所以这样做并*相信*他们的代码可以在 Windows 中运行。这是一个有效的假设，因为那里的代码将在许多地方使用，并且它们可能有自己的测试套件，如果您的假设是错误的，请稍后在您发现问题时对其进行测试。

所以你真正需要的是

```
[BeforeFeature]
public void Background()
{
  FeatureContext.Current["Host"] =new MyHostObject();
}

[When("I call GetAccount API method with password =\"(\.*)\"")]
public void WhenICallGetAccount(string password)
{
  var host = (MyHostObject)FeatureContext.Current["Host"];
  ScenarioContext.Current["Account"] = host.GetAccount(password);
}

[Then("the result should be success")]
public void ThenTheResultShouldBeSuccessful()
{
  var account = (MyAccount)ScenarioContext.Current["Account"];
  //assuming using Should;
  account.ShouldNotBeNull();
} 
```

# mysql - MySql 多选和分组结果。如何正确地做到这一点？

> ID：13344879
> 
> 赞同：1
> 
> 时间：2012-11-12T13:47:49.203
> 
> 标签：mysql, search

我有一个用 PHP 编写的带有搜索表单的网站。这个站点有很多部分和 mySql 表。

客户抱怨结果，因为它们没有分组，并希望根据站点部分对它们进行分组，如下所示：

```
Results in "About" Page:
<the results>

Results in "Blog":
<the results> 
```

... 等等。

我必须为它实现一个快速的解决方案，所以我做了几个查询并分别运行它们......并使用 foreach 迭代结果并打印它们。

好吧，它有效，但我对此并不满意，因为它很慢，我想知道我将来是否会遇到性能问题。

我自己不是 mysql 天才，我刚开始我的后端程序员生涯，所以我希望有人能告诉我如何以更专业的方式处理这个问题。

我正在考虑使用联接，但我不知道如何使用这种方法对结果进行分组。

任何帮助将不胜感激。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-12T13:52:47.313

我真的怀疑加入会以任何方式帮助您。由于您说每个部分都针对不同的表，因此您无法在仍然有意义的同时加入它们。您可以做的最好的事情是将这些查询写成一个句子，然后一次性获取所有需要的信息，从而节省数据发送的时间，`php <=> mysql`因为您将执行一次并返回一次。看看[这里](http://php.net/manual/en/mysqli.multi-query.php)，看看你如何做到这一点。我真的不认为有什么更好的地方可以改进:)

**响应**：显然，您执行的请求越多，您的脚本执行的时间就越长。你有没有试过使用命令`ping google.com`在cmd中？您会看到，即使您发送了非常少量的数据，也无法获得超过 30 毫秒左右的响应速度。这是您为任何请求支付的价格。另外，发送的数据量也会增加时间。所以一一执行你会打很多不必要的电话。此外，您可以随时自己尝试，无论哪种方式编写都不难。并输出任务花费的时间。重复几次。如果发送数据所花费的时间非常微不足道，您可以保持简单的方式。但请记住，如果您的应用程序变得更大，每丢失一毫秒就会累加。将它乘以一千个请求，您可能会浪费一分钟甚至更多的时间。无论如何，绝对不要采用 UNION 方式，因为您很可能会浪费最多的时间来分析您收到的数据。任何一个

关于那个功能：我自己从来没有想过需要使用那个功能，所以要么是我要么你在读它——我们都会从头开始读它。唯一的区别是我知道存在这样的功能:) 奇怪的是，这方面的信息很少。C# 的数据集非常好，可以轻松处理数据。在我看来，PHP 落后了 :/ 我现在都在 C# 中，所以我对 php 的了解越来越少。如果我是你，我会从我提供的链接中复制粘贴示例，然后创建一个可重用的类以供以后使用。希望我至少有一点帮助:)

# jquery - 将用户输入限制在 jquery 自动完成中的可用列表中

> ID：13344883
> 
> 赞同：2
> 
> 时间：2012-11-12T13:48:01.587
> 
> 标签：jquery, jquery-ui, autocomplete

我正在使用 jquery ui(1.8.11) 自动完成插件。

它有一个简单的自定义行为来检查可用列表中是否存在该值。那是因为我想限制用户使用列表中可用的内容。如果输入不在列表中，它将删除框的内容。它工作正常。

但是下面的实现仍然允许用户编写任何不在选项中的内容。我宁愿不让他写一些不存在的东西。

那么有没有办法在没有选项时删除用户会写的字符？或者最好只让他在列表中有查找的字符序列。

到目前为止，这是我的代码

```
$("#autocomplete").autocomplete({
    autoFocus: true,
    delay: 200,
    source: function (request, response) {
        $.ajax({
            url: "/Country/Find", type: "GET", dataType: "json",
            data: { search: request.term, maxResults: 10 },
            success: function (data) {
                response($.map(data, function (item) {
                    return { label: item, value: item }
                }))
            }
        })
    },
    change: function (event, ui) {
        if (!ui.item) {
            $(this).val('');
        }
    }
}); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-12T14:56:19.580

我发现这个问题是为了检索下拉列表的选择！[使用 JavaScript 在下拉列表中获取选定值？](https://stackoverflow.com/questions/1085801/how-to-get-the-selected-value-of-dropdownlist-using-javascript)但是要删除最后一个字符不知道...

```
$("#autocomplete").autocomplete({
autoFocus: true,
delay: 200,
source: function (request, response) {
    $.ajax({
        url: "/Country/Find", type: "GET", dataType: "json",
        data: { search: request.term, maxResults: 10 },
        success: function (data) {
            response($.map(data, function (item) {
                    var e = document.getElementById("ddlViewBy");
                    var strUser = e.options[e.selectedIndex].value;
                    if(strUser  != null)
                    {
                        return { label: item, value: item }
                    }
                    else
                    {
                        //remove last char 
                    }
            }))
        }
    })
}); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-12T15:51:04.823

我是这样做的：

```
$("#autocomplete").autocomplete({
    autoSelect: true,
    autoFocus: true,
    delay: 200,
    source: function (request, response) {
        $.ajax({
            url: "/Country/Find", type: "GET", dataType: "json",
            data: { search: request.term, maxResults: 10 },
            success: function (data) {
                //Check the length of the returned list if it's empty 
                if (data.length == 0) {
                    //Remove the last character from the input
                    $("#autocomplete").val(function (index, value) {
                        return value.substr(0, value.length - 1);
                    })
                    //Rerun search with the modified shortened input
                    $("#autocomplete").autocomplete("search");
                }
                response($.map(data, function (item) {
                    return { label: item, value: item }
                }))
            }
        })
    }
}); 
```

# php - 一个简单的mySQL语句要问

> ID：13344885
> 
> 赞同：1
> 
> 时间：2012-11-12T13:48:04.560
> 
> 标签：php, mysql

我有一个关于 mysql 的问题要问，我正在创建一个供应商页面，该页面需要列出所有供应商的详细信息及其产品（为每个供应商随机选择 3 个产品），所以我们必须将 2 个表连接在一起，一个是供应商，另一个是产品，我可以知道如何在单个 mysql 语句中呈现它们吗？

## 表 1 - 供应商

```
id      corp_name      product_count
---------------------------------------
AD0728   John Smith     187
AD0729   JayJay         1983 
```

## 表 2 - 产品

```
pid      cid        p_name      quantity
---------------------------------------
1      AD0728     Body Shampoo     10
2      AD0728     glass            10
3      AD0728     pen              10
4      AD0728     pencil           10
5      AD0728     eraser           10
6      AD0728     speaker          10
7      AD0729     monitor          10
8      AD0729     keyboard         10
9      AD0729     mouse            10
10     AD0729     processor        10
11     AD0729     box              10
12     AD0729     sunglass         10 
```

## 输出

```
id      corp_name      pid          p_name          quantity
----------------------------------------------------------------
AD0728   John Smith     1           Body Shampoo       10
AD0728   John Smith     2           glass              10
AD0728   John Smith     3           pen                10
AD0729   JayJay         10          processor          10
AD0729   JayJay         11          box                10
AD0729   JayJay         12          sunglass           10 
```

感谢大家。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-11-12T13:51:35.970

对于 SQL Server 2005 或更高版本，您可以使用`ORDER BY NEWID()`随机顺序，并且可以使用`ROW_NUMBER`来获取您的分区：

```
WITH CTE AS
(
   SELECT 
       s.id, s.corp_name, p.pid, p.p_name, p.quantity
     , RN = ROW_NUMBER() OVER (PARTITION BY s.id ORDER BY NEWID())
    FROM suppliers s
    INNER JOIN products p ON s.id = p.cid
)
SELECT id, corp_name, pid, p_name, quantity
FROM CTE WHERE RN <= 3 
```

这是小提琴（感谢@MahmoudGamal）：[http ://www.sqlfiddle.com/#!3/a26c6/17/0](http://www.sqlfiddle.com/#!3/a26c6/17/0)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-12T14:17:18.893

在 MYSQL 这工作：[http ://sqlfiddle.com/#!2/8b291/10](http://sqlfiddle.com/#!2/8b291/10)

```
SET @rank=0;
SELECT *, @rank:=@rank+1 AS rank
FROM suppliers s
LEFT JOIN products p ON p.cid = s.id
GROUP BY s.id, @rank % 3 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-12T14:07:56.040

检查这个[SQL Fiddle 代码](http://sqlfiddle.com/#!3/5e93e/28)。它将按要求返回每个供应商的前 3 个产品。它适用于 SQL2005 及更高版本，因为它使用 SQL2005 引入的 CTE（[公用表表达式](http://msdn.microsoft.com/en-us/library/ms190766%28v=sql.105%29.aspx)）。

无论哪种方式，这里是代码：

```
;WITH myCTE AS (
 SELECT p.*, ROW_NUMBER() OVER (PARTITION BY p.cid ORDER BY NEWID()) AS r
   FROM products p)
SELECT sup.id,sup.corp_name,c.pid,c.p_name,c.quantity
  FROM myCTE c JOIN suppliers sup ON c.cid = sup.id
 WHERE c.r <= 3 
```

# r - 在输出中显示 <<..>>=

> ID：13344891
> 
> 赞同：5
> 
> 时间：2012-11-12T13:48:15.253
> 
> 标签：r, knitr

我想在 LaTeX 文档中演示带有 knitr <<..>>= 序言的 R 代码示例。这是我想要的输出示例：

![代码片段](../Images/ddb8a46e88cd19406a2a9881fe97c43b.png)

它必须很简单 - 但我错过了一些东西。我检查了文档并扫描了堆栈溢出 - 但没有运气。这是一个MWE：

```
 \documentclass{article}
    \begin{document}
    <<mychunk, cache=TRUE, eval=FALSE, dpi=100>>=
    "hello world" 
    @
    \end{document} 
```

建议？我尝试在 LaTex 中缩进代码并包装在一个`verbatim`块中，但只得到了错误。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-11-12T14:50:30.647

我刚刚检查了knitr的手册。这就是包作者解决问题的方式：

```
<<use-ext-chunk, echo=FALSE, comment=NA>>=
cat('<<Q1, echo=TRUE, tidy=TRUE>>=','@',sep='\n')
@ 
```

[它产生如 knitr手册](http://cloud.github.com/downloads/yihui/knitr/knitr-manual.pdf)第 9 页所示的输出

这是一个最小的例子：

```
\documentclass[a4paper]{article}
\begin{document}

<<use-ext-chunk, echo=FALSE, comment=NA>>=
  cat('<<Q1, echo=TRUE, tidy=TRUE>>=','@',sep='\n')
@

\end{document} 
```

产生附加的输出。

![在此处输入图像描述](../Images/3e56369c27b1c8661b03d25110cc5b7b.png)

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-11-12T14:22:45.790

一年前我在 tex.stackexchange.com 上遇到了同样的问题，并得到了一些不错的回复：[https](https://tex.stackexchange.com/q/35485/3419) ://tex.stackexchange.com/q/35485/3419 。这是为了，`Sweave`但我认为它在`knitr`.

我想我最终只是在逐字环境中使用`\Sexpr{"<<>>="}`和。`\Sexpr{"@"}`例如：

```
\documentclass{article}
\begin{document}
\begin{verbatim}
\Sexpr{"<<mychunk, cache=TRUE, eval=FALSE, dpi=100>>="}
"hello world" 
\Sexpr{"@"}
\end{verbatim}
\end{document} 
```

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-11-13T23:10:29.430

只是快速跟进：此功能已在`knitr`（[开发版本](https://github.com/yihui/knitr/)> = 0.8.15）中实现；请参阅[Rnw](https://github.com/yihui/knitr-examples/blob/master/062-chunk-wrapper.Rnw)和[Rmd](https://github.com/yihui/knitr-examples/blob/master/062-chunk-wrapper.md)的示例。另一种解决方案在[`knitr`FAQ](https://github.com/yihui/knitr/blob/master/FAQ.md)中。

# c++ - 了解“模板参数无效”错误消息

> ID：13344897
> 
> 赞同：4
> 
> 时间：2012-11-12T13:48:46.503
> 
> 标签：c++, gcc, c++11, template-meta-programming, sfinae

考虑代码：

```
#include <type_traits>
#include <iostream>

struct test1 {
    void Invoke() {};
};

struct test2 {
    template<typename> void Invoke() {};
};

enum class InvokableKind {
    NOT_INVOKABLE,
    INVOKABLE_FUNCTION,
    INVOKABLE_FUNCTION_TEMPLATE
};

template<typename Functor, class Enable = void>
struct get_invokable_kind {
    const static InvokableKind value = InvokableKind::NOT_INVOKABLE;
};

template<typename Functor>
struct get_invokable_kind<
  Functor,
  decltype(Functor().Invoke())
  >
{
    const static InvokableKind value = InvokableKind::INVOKABLE_FUNCTION;
};

template<typename Functor>
struct get_invokable_kind<
  Functor,
  decltype(Functor().Invoke<void>())
  >
{
    const static InvokableKind value = InvokableKind::INVOKABLE_FUNCTION_TEMPLATE;
};

int main() {
    using namespace std;

    cout << (get_invokable_kind<test1>::value == InvokableKind::INVOKABLE_FUNCTION) << endl;
    cout << (get_invokable_kind<test2>::value == InvokableKind::INVOKABLE_FUNCTION_TEMPLATE) << endl;

} 
```

* * *

我要做的是创建一个元函数来测试“可调用性”的特定定义。现在我在 GCC 4.5.3 上遇到了这个[编译错误：](http://ideone.com/lN4qoA)

> prog.cpp:37:3：错误：模板参数 2 无效

这是什么意思？为什么我可以专精`decltype(Functor().Invoke())`，却不能专精`decltype(Functor().Invoke<void>())`？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-11-12T13:53:06.973

`template`由于解析歧义，您需要对其进行限定：

```
 decltype(Functor().template Invoke<void>())
                    ^^^^^^^^ 
```

相关：[我必须在哪里以及为什么要放置“模板”和“类型名称”关键字？](https://stackoverflow.com/questions/610245/where-and-why-do-i-have-to-put-the-template-and-typename-keywords)

另外，考虑使用`std::declval`而不是`Functor()`构造函数。

# android - Android 日历提供程序同步 - SYNC_DATA 列？

> ID：13344898
> 
> 赞同：5
> 
> 时间：2012-11-12T13:48:49.773
> 
> 标签：android, calendar, sync, android-contentprovider

我想在内部 Android 日历和我的应用程序之间进行同步。我正在使用从 Android API 14 开始提供的 CalendarContract。

内容提供者“com.android.calendar”的任何更改都会调用我的同步适配器的 onPerformSync(..)。但是，此时，事件的所有行都设置为 DIRTY = 0。这意味着，Google 日历同步必须将 DIRTY FLAG 设置为零，然后我的同步适配器才能访问它们。

CalendarContract.EventsColumns.SYNC_DATA1 - SYNCDATA10 被称为内容提供者的列，用于同步适配器。有谁知道这些列的用途是否有一些约定？我已经意识到在我的设备上 SYNC_DATA5 存储了上次修改的日期，而 SYNC_DATA1 似乎存储了 Google 事件 ID。因此，每当日历应用程序与 Google 日历同步时，这些列似乎都会被修改。

但是，如果我选择为我的同步适配器使用这些列之一，我如何确保另一个应用程序不使用相同的列并且它们相互覆盖？

如果谷歌日历总是使用 SYNC_DATA5 来存储上次修改的日期，我可以将它用于我的同步逻辑，我只需要确定这是一个约定。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-09-19T22:21:08.120

这些`SYNC_DATA`列可用于任何值。我不确定谷歌日历是如何做到的，但它们适用于与您的同步适配器相关的东西，不同步日历的应用程序不得使用它们。因此，您可以安全地使用任何列（假设您没有在应用程序的版本之间更改它，或者您必须编写迁移代码），因为您的日历上不应该有任何其他同步适配器工作。

不是同步适配器时不能依赖`SYNC_DATA`列，当日历不是“你的”时不要使用它们。

* * *

但是，我有一种强烈的感觉，你没有正确同步。要同步日历，**您必须使用单独的日历**，而不是由谷歌或任何其他第三方应用程序同步的任何日历。我还将列出我认为您执行的其他一些步骤，但可能对其他人有帮助。

您还需要[将一些参数附加到您](http://developer.android.com/guide/topics/providers/calendar-provider.html#sync-adapter)对系统的任何请求中，以便您可以访问同步适配器字段。[`AbstractThreadedSyncAdapter`此外，您应该仅从实现](http://developer.android.com/training/sync-adapters/creating-sync-adapter.html)同步您的日历。为此，如果您还没有验证器，您还需要提供验证器（这样用户将能够在帐户的同步首选项中启用/禁用您的同步适配器）。可以[在此博客文章](http://udinic.wordpress.com/2013/07/24/write-your-own-android-sync-adapter/)中找到有关同步适配器的概述。

如果您没有服务器端帐户且只有一个日历，则在第一次启动时需要做一些事情：

1.  创建一个帐户
2.  创建绑定到该帐户的日历
3.  启用您的同步适配器

之后，Android 将不时执行您的同步适配器，您可以访问`SYNC_DATA`没有冲突的列（在您创建的日历中），并且`DIRTY`正确提供标志。

# apache-flex - 如何在 flex4 移动应用程序中保存 .pdf 格式的文件：

> ID：13344900
> 
> 赞同：0
> 
> 时间：2012-11-12T13:48:56.267
> 
> 标签：apache-flex, flex4

我想在 flex4 移动应用程序中以 .pdf 格式保存文件，但问题是当我使用我的 flash builder 4.5 中的模拟器运行应用程序时，它以 .pdf 格式保存文件，但它没有将文件保存在移动设备，意味着当我在 android 设备中运行应用程序的构建时，它不会保存文件。

使用文件引用类的 save() 方法保存文件。他们还有其他方法可以将任何文件以 PDF 格式保存在移动设备中吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-12T15:05:09.627

使用移动 AIR；您应该能够使用[File](http://help.adobe.com/en_US/FlashPlatform/reference/actionscript/3/flash/filesystem/File.html)类来保存文件。我认为您需要使用[FileStream](http://help.adobe.com/en_US/FlashPlatform/reference/actionscript/3/flash/filesystem/FileStream.html)将 PDF 二进制文件写入 File 类的实例。

# android - 如何将谷歌地图上的标记添加到地图上的用户选择

> ID：13344904
> 
> 赞同：0
> 
> 时间：2012-11-12T13:49:06.027
> 
> 标签：android, android-layout, android-mapview

我正在尝试将自定义标记添加到地图上的用户选择中。这是我现在拥有的代码，但似乎在“mapView.getOverlays().add(mapView);”的“add”下出现错误 我希望用户选择各种图标并将它们放置在它们所在的地图上。

```
import java.util.List;

import com.google.android.maps.GeoPoint;
import com.google.android.maps.MapActivity;
import com.google.android.maps.MapController;
import com.google.android.maps.MapView;
import com.google.android.maps.Overlay;
import com.google.android.maps.OverlayItem;
import android.graphics.drawable.Drawable;
import android.os.Bundle;
import android.view.MotionEvent;

 public class MainActivity extends MapActivity {

@Override
  public void onCreate(Bundle savedInstanceState) {
 super.onCreate(savedInstanceState);
 setContentView(R.layout.activity_main);
 MapView mapView = (MapView) findViewById(R.id.mapview);
 mapView.setBuiltInZoomControls(true);
 List<Overlay> mapOverlays = mapView.getOverlays();
 Drawable drawable = this.getResources().getDrawable(R.drawable.androidmarker);
 CustomOverlay itemizedoverlay = new CustomOverlay(drawable, this);
 GeoPoint point = new GeoPoint((int)(24.0110 * 1E6), (int)(31.4850 * 1E6));
 MapController controller = mapView.getController();
 controller.setCenter(point);
 controller.setZoom(11);
 OverlayItem overlayitem = new OverlayItem(point, "Hello!", "Guess where I am?")
 itemizedoverlay.addOverlay(overlayitem);
 mapOverlays.add(itemizedoverlay);

 }

public boolean onTouchEvent(MotionEvent event, MapView mapView) {
    if (event.getAction() == 1) {
        GeoPoint p = mapView.getProjection().fromPixels((int) event.getX(),
                (int) event.getY());
        MainActivity Overlay = new MainActivity(); 
        mapView.getOverlays().add(mapView);

        mapView.invalidate();
        GeoPoint point = mapView.getProjection().fromPixels((int) event.getX(),(int) event.getY ());
        Drawable srcdrawable = getApplicationContext().getResources().getDrawable (R.drawable.icon);
        CustomOverlay srcitemizedOverlay = new CustomOverlay(srcdrawable, getApplicationContext ());
        OverlayItem srcoverlayitem = new OverlayItem(p, "Hello!", "This is your Location.");
        srcitemizedOverlay.addOverlay(srcoverlayitem);
        mapView.getOverlays().clear();
        mapView.getOverlays().add(srcitemizedOverlay);

    }
    return false;
 }

 @Override
 protected boolean isRouteDisplayed() {
 return false;
 }
 } 
```

我在写轨道上吗？我的代码正确吗？有人可能有一个关于如何做到这一点的教程的链接。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-12T14:35:36.443

您正在尝试将 a 添加`MapView`到`Overlay`您的`mapView`. 因此，在这一行上`mapView.getOverlays().add(mapView);`替换`mapView`为`Overlay`您要添加的。但是你不需要那个，因此，你`onTouchEvent()`应该是这样的：

```
public boolean onTouchEvent(MotionEvent event, MapView mapView) {
    if (event.getAction() == 1) {
        GeoPoint point = mapView.getProjection().fromPixels((int) event.getX(),(int) event.getY ());
        Drawable srcdrawable = getApplicationContext().getResources().getDrawable (R.drawable.icon);
        CustomOverlay srcitemizedOverlay = new CustomOverlay(srcdrawable, getApplicationContext ());
        OverlayItem srcoverlayitem = new OverlayItem(point, "Hello!", "This is your Location.");
        srcitemizedOverlay.addOverlay(srcoverlayitem);
        mapView.getOverlays().clear();
        mapView.getOverlays().add(srcitemizedOverlay);

    }
    return false;
 } 
```

# box-api - 使用 box api v1 重命名文件

> ID：13344906
> 
> 赞同：1
> 
> 时间：2012-11-12T13:49:15.813
> 
> 标签：box-api

在 box.net 中上传到我的帐户时可以重命名文件吗？我正在使用 1.0 版本和下一个网址：

[https://upload.box.net/api/1.0/upload/myauth/myfolderid?share=1](https://upload.box.net/api/1.0/upload/myauth/myfolderid?share=1)

我知道可以使用 ajax 重命名文件，但是 API 中没有任何内容，例如“共享”之类的选项可以做到这一点？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-12T21:07:24.603

没有办法重命名文件并在 V1 中的同一个 API 调用中上传，但您可以使用第二个 API 调用重命名文件：http: [//developers.box.net/w/page/12923947/ApiFunction_rename](http://developers.box.net/w/page/12923947/ApiFunction_rename)

# sql-server - 使用脚本的事务复制

> ID：13344910
> 
> 赞同：4
> 
> 时间：2012-11-12T13:49:31.453
> 
> 标签：sql-server, sql-server-2008, replication, sql-server-agent, transactional-replication

我能够使用 SSMS 配置事务复制并且它工作正常。但我想使用脚本对其进行配置，以便从我的 c#/vb 应用程序中使用它。

有没有办法做到这一点？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-12T14:16:42.887

```
DECLARE @returncode int
EXEC @returncode = xp_cmdshell 'dtexec /f "C:\thePackage.dtsx"' 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-12T15:13:11.047

如果您使用 SSMS 完成事务复制的所有步骤，那么使用脚本并不复杂。

请仔细观察，当您配置分发、发布和订阅时，SSMS 为您提供了在每个步骤中生成脚本的选项。

您可以使用该生成的脚本。

但唯一的区别是当您将文章添加到出版物时。您可以使用以下代码添加文章

```
declare @name nvarchar(50)
declare curname cursor for
select name from sysobjects where type = 'U'
open curname
fetch next from curname into @name
while @@FETCH_STATUS = 0
begin
if exists(select * from INFORMATION_SCHEMA.TABLE_CONSTRAINTS where CONSTRAINT_TYPE = 'PRIMARY KEY' AND TABLE_NAME = @name AND TABLE_SCHEMA = 'dbo')
begin
exec sp_addarticle
@publication = N'publication_name', @article = @name, @source_owner = N'dbo',
@source_object = @name, @type = N'logbased', @description = null, @creation_script = null,
@pre_creation_cmd = N'drop', @schema_option = 0x000000000803509F,
@identityrangemanagementoption = N'manual', @destination_table = @name,
@destination_owner = N'dbo', @vertical_partition = N''
end
fetch next from curname into @name
end
close curname
deallocate curname 
```

或者，您可以查看[https://hasibarnab.wordpress.com/category/sql-server/replication/](https://hasibarnab.wordpress.com/category/sql-server/replication/)

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-11-13T02:07:08.007

查看 BOL 中的 sp_addpublication、sp_addarticle 和 sp_addsubscription。

# forms - 带有 optgroup 的 Symfony2 选择字段中的实体映射

> ID：13344915
> 
> 赞同：9
> 
> 时间：2012-11-12T13:49:39.180
> 
> 标签：forms, symfony, entities

假设**Symfony2**中有一个实体，它有一个字段`bestfriend`，它是从满足复杂要求`User`的实体列表中选择的一个实体。`User`您可以通过指定它是[实体字段类型](http://symfony.com/doc/current/reference/forms/types/entity.html#basic-usage)来在表单中呈现此字段，即：

```
$builder->add('bestfriend', 'entity', array(
   'class' => 'AcmeHelloBundle:User',
   'property' => 'username',
)); 
```

此表单字段呈现为 `<select>`，其中每个显示的值都在表单中：

```
<option value="user_id">user_username</option> 
```

因此，可以通过使用`<optgroup>`标签来突出显示朋友的这种特殊功能。

按照这个原则，我创建了一个字段类型，即，它创建了[这个答案](https://stackoverflow.com/questions/12244376/select-with-optgroup-in-symfony-2-0)`FriendType`中的选择数组，呈现如下：

```
$builder->add('bestfriend', new FriendType(...)); 
```

该类`FriendType`创建了一个`<select>`具有相同`<option>`s 但在`<optgroup>`s 下组织的组织。

我来解决问题了！提交表单时，框架会识别出用户字段不是 User 的实例，而是一个整数。**如何让 Symfony2 理解传递的 int 是 User 类型实体的 id？**

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-11-12T14:21:29.913

以下是我的解决方案。*请注意， Symfony2 官方文档*中没有提到它，但它确实有效！我利用了实体字段类型[是`choice`](http://symfony.com/doc/current/reference/forms/types/entity.html).

因此，您可以将数组`choices`作为参数传递。

```
$builder->add('bestfriend', 'entity', array(
   'class' => 'AcmeHelloBundle:User',
   'choices' => $this->getArrayOfEntities()
)); 
```

其中函数`getArrayOfEntities()`是一个函数，它用我的朋友的朋友填充选择列表，由我的朋友组织：

```
private function getArrayOfEntities(){
    $repo = $this->em->getRepository('AcmeHelloBundle:User');
    $friends = $repo->findAllFriendByComplexCriteria(...);
    $list = array();
    foreach($friends as $friend){
        $name = $friend->getUsername();
        if(count($friend->getFriends())>0){
            $list[$name] = array();
            foreach($friend->getFriends() as $ff){
                $list[$name][$ff->getUsername()] = $ff;
            }
        }
    }
    return $list;
} 
```

I know the example could be meaningless, but it works...

PS: You need to pass the entity manager to let it working...

# matlab - MATLAB：在一张图中绘制不同的数值近似值

> ID：13344919
> 
> 赞同：1
> 
> 时间：2012-11-12T13:50:05.653
> 
> 标签：matlab, plot, numerical-methods

我有以下 matlab 代码，用于通过欧拉法逼近微分方程：

```
% Eulermethod

a=0;
b=0.6;
Steps=6;
dt=(b-a)/Steps;
x=zeros(Steps+1,1);

x(1,1)=1;
y=zeros(Steps+1,1);

for i=1:Steps
    x(i+1,1)=x(i,1)+dt*(x(i,1)*x(i,1)+1);
end
plot(x) 
```

我希望能够在一个图中为几个不同的 Steps 值绘制解图，并让 x 轴从 0 到 0.6 而不是从例如 1 到 100 000 等。可以这样做吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-12T14:01:18.137

如果您使用该`hold on`命令，这将允许您在同一个图形上实现多个绘图。同样，如果您将数据分成`x`和向量，您可以通过传递 2 个向量而不是一个`y`向量来将它们相互绘制。`plot`例如

```
figure
hold on
for i=1:m
    x = [];
    y = [];
    %% code to populate your vectors
    plot(x,y)
end 
```

您现在应该在同一个图形上同时看到所有绘图。如果要`x`由`n`0 到 0.6 之间的等距元素组成，可以使用以下`linspace`命令：

```
 x = linspace(0.0,0.6,n); 
```

为了区分您的图，您可以将额外的参数传递给函数。例如

```
 plot(x,y,'r+') 
```

将数据绘制为一系列红色`+`符号。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-12T14:02:35.903

Plot 可以接受更多参数： plot(x_axis,values, *modifiers* ); 如果*x 轴*是 M 个元素的向量，则值可以是 MxN 个元素的矩阵，每个元素都用单独的颜色绘制。

# c# - 加载配置文件时出错：访问路径 c:\Program Files (x86)\... 被拒绝

> ID：13344921
> 
> 赞同：7
> 
> 时间：2012-11-12T13:50:08.633
> 
> 标签：c#, windows, file, config

我有一个应用程序，我使用 Windows 7 上的 Visual Studio 2010 中的安装程序部署该应用程序。该程序在 Windows 7 和 XP 上部署和运行良好，但是当我在 Windows 8 系统上部署它时，我收到有关访问配置文件的错误.

该程序安装在 c:\Program Files (x86)[Company Name][App Name]\ 中，被引用的文件是一个临时文件，其名称类似于 Windows GetTempFile 生成的机器，例如 x4q0toqw.tmp。此文件夹中不存在，然后引用 exe 配置文件（myapp.exe.config，确实存在）

如果我在 Windows 8 系统上构建和运行代码，它安装并运行良好，我不会收到错误消息，但是如果我在 Windows 7 上部署 Window 8 编译的应用程序，我会收到关于访问配置文件的相同错误. 两台机器都是 64 位的，但会生成一个 32 位的应用程序。

我不打算发布两个二进制文件。谁能告诉我发生了什么？我正在尝试设置 JIT 调试，以便在它引发异常时附加到 exe，因为本机调试它对我没有帮助，因为我没有得到异常。

这是在两台不同的机器上，但我在两台机器上都以同一个用户登录到同一个域，并且是管理员。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-12-06T03:45:01.983

也许您的应用程序在加载期间正在重写您的应用程序配置，这将导致系统质疑访问权限......如果是这样，您可以更改应用程序（已安装）的属性以拥有管理员权限......这将使您的应用程序自动有权以编程方式编辑应用程序配置。

或者......您可以忘记应用程序配置重写并将所有内容放在默认的应用程序配置脚本中。但这会暴露您的应用程序数据库安全性...

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2015-01-01T08:17:21.443

我有同样的错误。这是因为临时文件是在`C:\Program Files (x86)\[Company Name]\[App Name]`文件夹中创建的，而普通用户（PC 名称\用户）没有修改此文件夹的权限。一旦我添加了修改权限，它就开始正常工作。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2016-11-21T10:27:27.800

通过提升运行我的服务的帐户权限，我在 Win 7 上的 Visual Studio 2010 中解决了一个非常类似的问题。[请参阅此处的](https://msdn.microsoft.com/en-us/library/zt39148a%28v=vs.110%29.aspx#Adding%20Installers%20to%20the%20Service)第 9 步：

> 将`Account`属性设置为`LocalSystem.`

当我`serviceProcessInstaller1`在帐户下运行时，我遇到`LocalService`了像您这样的错误。但是更改帐户以`LocalSystem`解决此问题。然后我安装的服务能够写入其`C:\Program Files (x86)\[Company Name]\[App Name]\[App Name].exe.Config`文件。即使`Just me`在我运行服务的安装程序时选中了 install for 复选框也是如此。

请记住[这里](https://msdn.microsoft.com/en-us/library/system.serviceprocess.serviceaccount%28v=vs.110%29.aspx#Remarks)的评论：

> 该`LocalSystem`值定义了一个高特权帐户，但大多数服务不需要这种提升的特权级别。

# jquery - jQuery 可选择和检查所有冲突

> ID：13344922
> 
> 赞同：0
> 
> 时间：2012-11-12T13:50:16.087
> 
> 标签：jquery, conflict

我有一个关于 checkall 的问题，jQuery 中有一个“可选”方法和“checkall”事件。

如果我选择下面的两个复选框，它将被取消选中（上图），但如果我更改我的“td”的名称，它就会起作用。

```
(   cancel:'td:not(.**isaretle**)',) 
```

你能帮我么？

这是一个演示：http: [//jsfiddle.net/aldimeola1122/xUU4p/1/](http://jsfiddle.net/aldimeola1122/xUU4p/1/)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-21T03:29:06.993

我想这就是你要找的：

```
(function ($) {
    'use strict';
    $(document).ready(function () {
        $('.checkAll').live('change', function () {
            var self = $(this),
                isChecked = self.is(':checked'),
                checked = isChecked ? 'checked' : '',
                text = isChecked ? 'Uncheck All' : 'Check All';
            $('.chc').attr('checked', checked);
            self.next().text(text);
        });
        $('.chc').live('change', function () {
            var chcLen = $('.chc').length,
                checkedLen = $('.chc:checked').length,
                lenMatches = chcLen === checkedLen,
                checked = lenMatches ? 'checked' : '',
                text = lenMatches ? 'Uncheck All' : 'Check All';
            $('.checkAll').attr('checked', checked).next().text(text);
        });
        $("#slctble").selectable({
            "filter": "td:not(.isaretle)",
            "stop": function () {
                $(".ui-selected input", this).each(function () {
                    this.checked = !this.checked;
                }); //end-ui-selected input
            } //endStopFunction
        }); //endSelectable
    }); //endWindowsLoad
}(jQuery.noConflict())); //end Function 
```

更新小提琴：http: [//jsfiddle.net/xUU4p/28/](http://jsfiddle.net/xUU4p/28/)

# linux - 汇编程序中的插入排序不起作用

> ID：13344925
> 
> 赞同：2
> 
> 时间：2012-11-12T13:50:24.523
> 
> 标签：linux, assembly, nasm, insertion-sort

我必须在 NASM 中插入数字。我有一个文件，它生成随机数并生成带有二进制形式数字的输出文件。我的程序将其加载为输入文件，并应使用插入排序（也以二进制形式）提供带有数字的输出。

我的代码：

```
; Template assembler source file

section .text
global _start

_start:
    ; put your code here
    mov eax, 3
    mov ebx, 0
    mov ecx, array
    mov edx, 4*32768
    int 80h
    mov [fileLength], eax   
    shr eax,2
    dec eax
    mov [number], eax

    mov ebx, 1 
    outerloop:
        mov ecx,[array + 4*ebx]
        mov [item],ecx 

        mov ecx,ebx 
        interloop:
        mov edx,ecx 
        dec edx
        mov esi, [array + 4*edx]
        cmp esi,[array + 4*ecx]     
        jb koniec 
            mov eax,[array + 4*edx]
            mov [array + 4*ecx],eax 
        loop interloop
        koniec:

    mov edx,[item]
    mov [array + 4*ecx],edx 

    inc ebx
    cmp ebx,[number] 
    jne outerloop

    mov eax, 4
    mov ebx, 1
    mov ecx, array
    mov edx, [fileLength]
    int 80h

    ; exit to linux
    mov eax,1
    mov ebx,0
    int 80h

; initialized data section
; use directives DB (byte), DW (word), DD (doubleword), DQ (quadword)
section .data

; uninitialized data section
; use directives RESB (byte), RESW (word), RESD (doubleword), RESQ (quadword)
section .bss
    fileLength resd 1   
    number resd 1   

    array resd 32768
    item resd 1 
```

我用来写插入排序的伪代码：

```
for i ← 1 to i ← length(A)-1
   {
     // A[ i ] is added in the sorted sequence A[0, .. i-1]
     // save A[i] to make a hole at index iHole
     item ← A[i]
     iHole ← i
     // keep moving the hole to next smaller index until A[iHole - 1] is <= item
     while iHole > 0 and A[iHole - 1] > item
       {
         // move hole to next smaller index
         A[iHole] ← A[iHole - 1]
         iHole ← iHole - 1
       }
     // put item in the hole
     A[iHole] ← item
   } 
```

来源：[http ://en.wikipedia.org/wiki/Insertion_sort](http://en.wikipedia.org/wiki/Insertion_sort)

我对它的了解很少，我不知道出了什么问题。它有时会对前几个数字进行排序，但其余数字排序不正确。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-12T14:45:14.393

你必须换行

```
cmp esi, [array + 4*edx] 
```

到

```
cmp esi, [item] 
```

并`dec eax`在您的`outerloop`. 它应该工作。

# python - 如何在模板中显示具有外键关系的元素？

> ID：13344926
> 
> 赞同：0
> 
> 时间：2012-11-12T13:50:27.183
> 
> 标签：python, django, django-models, views

我正在尝试显示用户保存为播放列表一部分的每个视频的视频网址。用户还可以保存多个播放列表（视图中的第一行显示所有播放列表）。不过，我正在努力弄清楚如何在每个播放列表中显示视频。有什么建议吗？

# 视图.py

```
def profile(request):
    playlist = UserPlaylist.objects.filter(profile=request.user)

    return render_to_response('reserve/templates/profiles.html', {'playlist':playlist},
        context_instance=RequestContext(request)) 
```

# 模型.py

```
class Playlist(models.Model):
    playlist = models.CharField('Playlist', max_length = 2000, null=True, blank=True)
    def __unicode__(self):
        return self.playlist

class Video(models.Model):
    video_url = models.URLField('Link to video', max_length = 200, null=True, blank=True)
    def __unicode__(self):
        return self.video_url

class UserPlaylist(models.Model):
    profile = models.ForeignKey(User)
    playlist = models.ForeignKey(Playlist)
    def __unicode__(self):
        return unicode(self.playlist)

class Videoplaylist(models.Model):
    video = models.ForeignKey(Video)
    playlist = models.ForeignKey(UserPlaylist)
    def __unicode__(self):
        return unicode(self.playlist) 
```

# 模板：profiles.html

```
{% for feed in playlist %}

    {{feed}}

    <br>

{% endfor %} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-12T13:54:29.100

可以使用`.`跨关系访问外键关系

`{{ feed.playlist.playlist }}`

`{{ feed.profile.username }}`

因为这是一个`UserPlaylist`对象的查询集，它们有一个`profile`或`playlist`属性。

不过要小心！我确实相信每次您访问外部关系时都会进行单独的查询。我不确定，但值得在调试工具栏或其他东西上查看。

根据 Victor 'Chris' Cabral 的说法，您可以使用向后跨越关系

`[model_you_want_to_span]_set.all`

你也可以在你的视图中使用

`vpls = Videoplaylist.objects.filter(playlist__profile=request.user)`

```
{% for feed in playlist %}    
    {{feed}}
    {% for vpl in feed.videoplaylist_set.all %}    
      {{ vpl.video.video_url }}    
    {% endfor %}    
    <br>    
{% endfor %} 
```

# php - php中有关图像/音频/视频上传的查询

> ID：13344936
> 
> 赞同：2
> 
> 时间：2012-11-12T13:51:35.680
> 
> 标签：php, image, upload

我想以这样一种方式对图像文件（`.jpg`, `.png`, `.gif`）进行验证，如果用户将 html 的扩展名更改为 jpeg，那么系统将限制他该文件的格式无效。我已经实现了对文件扩展名的验证，但我也想实现这个验证。

我也在上传视频（`.wav`, `.flv`, `.mp4`）和音频（`.mp3`）文件，如果有人上传扩展名错误的文件，系统会限制他。我怎么能做到这一点？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-12T14:23:02.213

尝试[了 finfo_file](http://www.php.net/manual/en/function.finfo-file.php) - 需要 pecl 文件信息，php 5.3 及更高版本，
此函数将返回上传文件的 REAL mime 类型，
基于此信息，您可以进行比较并阻止任何不需要的扩展名（mime）

# security - 限制对 Jenkins Web 仪表板的访问

> ID：13344937
> 
> 赞同：3
> 
> 时间：2012-11-12T13:51:38.953
> 
> 标签：security, login, passwords, jenkins

目前，我在我的 Mac Mini 上运行 Jenkins，我本地网络中的每个人都可以通过地址访问 Web 仪表板`http://<JenkisIP>:8080`。如何设置用户名和密码凭据以限制对其的访问？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-11-12T14:08:18.473

您想在配置菜单中检查启用安全功能，选择“Jenkins 自己的用户数据库”作为安全领域，然后更改安全矩阵以满足您的要求。

在第一次运行时，为每个人提供完全访问权限。允许用户注册，创建您自己的帐户（如果您没有帐户），然后授予该帐户完全权限并删除所有匿名权限。

您需要的所有信息都应该在这里找到： [https ://wiki.jenkins-ci.org/display/JENKINS/Standard+Security+Setup](https://wiki.jenkins-ci.org/display/JENKINS/Standard+Security+Setup)

# c++ - 如何在 C 中访问 SOAP 标头

> ID：13344941
> 
> 赞同：0
> 
> 时间：2012-11-12T13:51:56.010
> 
> 标签：c++, c, onvif

我是 SOAP 新手，正在尝试实现用户身份验证，我请求一些帮助，

这是从客户端发送的 XML 请求

```
<soapenv:Envelope xmlns:soapenv="http://schemas.xmlsoap.org/soap/envelope/"
            xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
    xmlns:xsd="http://www.w3.org/2001/XMLSchema"
            xmlns:tt="http://www.onvif.org/ver10/schema"
            xmlns:wsse="http://docs.oasis-open.org/wss/2004/01/oasis-200401-wss-wssecurity-secext-1.0.xsd"
            xmlns:wsu="http://docs.oasis-open.org/wss/2004/01/oasis-200401-wss-wssecurity-utility-1.0.xsd"
            xmlns:tds="http://www.onvif.org/ver10/device/wsdl">
    <soapenv:Header>
              <wsse:Security>
                <wsse:UsernameToken>
                  <wsse:Username>username</wsse:Username>

        <wsse:Password Type="http://docs.oasis-open.org/wss/2004/01/oasis-200401-wssusername-token-profile-
            1.0#PasswordDigest">tuOSpGlFlIXsozq4HFNeeGeFLEI=</wsse:Password>
            <wsse:Nonce>LKqI6G/AikKCQrN0zqZFlg==</wsse:Nonce>
            <wsu:Created>2010-09-16T07:50:45Z</wsu:Created>
            </wsse:UsernameToken>
          </wsse:Security>
        </SOAP-ENV:Header>
      <SOAP-ENV:Body>
        <tds:SetHostname>
          <tds:Name>camera1</tds:Name>
       </tds:SetHostname>
     </SOAP-ENV:Body>
    </SOAP-ENV:Envelope> 
```

我想访问`username`在这个 XML 请求中发送的内容

在 Soap 生成的 SoapServer.c 中，它有一个名为

```
 `SOAP_FMAC5 int SOAP_FMAC6 soap_serve___tds__SetHostname(struct soap *soap) 
```

下面的函数是将 xml 解析为 SOAP 结构的地方，

`

```
SOAP_FMAC5 int SOAP_FMAC6 soap_serve___tds__SetHostname(struct soap *soap) {

struct __tds__SetHostname soap_tmp___tds__SetHostname;
struct _tds__SetHostnameResponse tds__SetHostnameResponse;
soap_default__tds__SetHostnameResponse(soap, &tds__SetHostnameResponse);
soap_default___tds__SetHostname(soap, &soap_tmp___tds__SetHostname);
soap->encodingStyle = NULL;
if (!soap_get___tds__SetHostname(soap, &soap_tmp___tds__SetHostname, "-tds:SetHostname", NULL))
    return soap->error;
if (soap_body_end_in(soap)
 || soap_envelope_end_in(soap)
 || soap_end_recv(soap))
    return soap->error;
soap->error = __tds__SetHostname(soap, soap_tmp___tds__SetHostname.tds__SetHostname, &tds__SetHostnameResponse);
if (soap->error)
    return soap->error;
soap_serializeheader(soap);
soap_serialize__tds__SetHostnameResponse(soap, &tds__SetHostnameResponse);
if (soap_begin_count(soap))
    return soap->error;
if (soap->mode & SOAP_IO_LENGTH)
{   if (soap_envelope_begin_out(soap)
     || soap_putheader(soap)
     || soap_body_begin_out(soap)
     || soap_put__tds__SetHostnameResponse(soap, &tds__SetHostnameResponse, "tds:SetHostnameResponse", NULL)
     || soap_body_end_out(soap)
     || soap_envelope_end_out(soap))
         return soap->error;
};
if (soap_end_count(soap)
 || soap_response(soap, SOAP_OK)
 || soap_envelope_begin_out(soap)
 || soap_putheader(soap)
 || soap_body_begin_out(soap)
 || soap_put__tds__SetHostnameResponse(soap, &tds__SetHostnameResponse, "tds:SetHostnameResponse", NULL)
 || soap_body_end_out(soap)
 || soap_envelope_end_out(soap)
 || soap_end_send(soap))
return soap->error;
return soap_closesock(soap);
  } 
```

` 所以尝试用这种方法访问/打印用户名（从现在开始的基本访问开始）

```
fprintf(stderr,"%s\n",soap->header->wsse__Security->UsernameToken->Username); 
```

但这每次都会打印一些垃圾值，通过指向结构访问用户名也是完全正确的，如果有人给出一些关于如何访问 SOAP 标头的指针，这将是有帮助的。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-15T11:28:06.667

这取决于您在哪里尝试打印此用户名，因为它会在最后删除结构。如果您只想将用户名从客户端发送到服务器，则将其作为参数发送到 soap_send / soap_call（根据同步/异步函数）函数。检查soap客户端服务器通信以获取更多详细信息。一方面，您只是发送信息，而另一端接收肥皂将在内部处理的其他事情。

# jquery - 编写 jQuery 插件以更 oop 方式执行函数的新方法

> ID：13344943
> 
> 赞同：0
> 
> 时间：2012-11-12T13:52:06.660
> 
> 标签：jquery

我一直在阅读有关 jQuery 插件的文章，并尝试以更 oop 的方式实现我们的插件。我的经理是 ac# 家伙，讨厌 jQuery UI 调用方法的方式。我想使用下面的方法，想知道您对此的看法。告诉我我正在尝试使用的优缺点。好的，这是一个简单的示例。它有工作要做，但开始：

```
if(typeof Object.create !== 'function')
{
    Object.create = function(o)
    {
        function F()
        {
        }
        F.prototype = o;
        return new F();
    };
}
var Car = (function()
{
    var openDoor = function(doorNum)
    {
        alert("door #" + doorNum + " opened");
    };
    return {
        openDoor: openDoor
    };
}
)();
(function($, window, document, undefined)
{
    $.fn.car = function(options)
    {
        if(this.length)
        {
            return this.each(function() {

                var myCar = Object.create(Car);
                $.data(this, 'car', myCar);

                for(var prop in Car)
                {
                    if($.fn[prop] == null)
                    {
                        $.fn[prop] = function(params)
                        {
                            return this.each(function () {
                                if($.data(this, "car") == null)
                                {
                                    throw Error("not implemented function");
                                }
                                $.data(this, "car")[prop](params);
                            }
                            );
                        };   
                    }
                }

            });
        }
    };
})(jQuery, window, document);

$("#test").on("click", function()
              {
                $("#test").car().openDoor(1).css({color: 'red'});
              }); 
```

这是小提琴链接
[http://jsfiddle.net/6zHP7/8/](http://jsfiddle.net/6zHP7/8/)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-28T20:01:58.167

大业！我和你的老板有同样的怪癖，我觉得 jQuery 的插件界面对于高级插件来说是不够的。

我已经为此目的启动了一个 GitHub 项目：为 jQuery 插件提供更多的 OOP API，同时保持向后兼容。

[https://github.com/adamovsky/jQuery-Plugin-Pattern](https://github.com/adamovsky/jQuery-Plugin-Pattern)

我还开始写一篇与之相关的博客文章：

[http://milan.adamovsky.com/2012/12/jquery-plugin-pattern-30.html](http://milan.adamovsky.com/2012/12/jquery-plugin-pattern-30.html)

随时加入努力并做出贡献。

我在您的模式中看到的一些问题在我的模式中得到解决 - 例如使用 .data()。我看到的另一个问题是每次调用你的插件都会实例化这个类。

总而言之，这是一件雄心勃勃的事情，而且比看起来更困难，因为边缘用例很容易让你的插件崩溃和烧毁，如果不解决（正如我在早期尝试将 OOP 与 jQuery 结合时发现的那样） .

米兰

# php - 将特殊的 PHP 文件重定向到子域

> ID：13344944
> 
> 赞同：2
> 
> 时间：2012-11-12T13:52:10.917
> 
> 标签：php, .htaccess

我在*foo.com/articles/中有很多文章*

像这样：

```
foo.com/articles/banana.php
foo.com/articles/strawberry.php 
```

并希望将 SEO 重定向到这样的子目录：

```
banana.foo.com
strawberry.foo.com 
```

**编辑**

当我输入 (banana.foo.com) 时，显示 (foo.com/articles/banana.php)。

只显示而不是真正重定向

我无法通过 Cpanel 创建许多子域，因此 (banana.foo.com) 不通过 Cpanel 创建

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-12T14:05:29.783

把它放在你的 .htaccess 文件中（不要忘记用你的域名替换“yourdomain”）

```
Options +FollowSymLinks
Options +SymLinksIfOwnerMatch

RewriteEngine On
RewriteBase /

RewriteCond %{HTTP_HOST} ^(.*).yourdomain.com$
RewriteRule (.*) yourdomain.com/articles/%1.php [L] 
```

现在当你请求

```
banana.foo.com 
```

结果将来自

```
foo.com/articles/banana.php 
```

等等

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-12T14:03:18.303

在 .htaccess 中，您可以执行以下操作：

```
RewriteRule ^foo.com/articles/([a-z0-9-]+).php $1.foo.com [PT,L] 
```

您需要安装 mod rewrite，并且需要在 DNS 服务器中设置通配符子域。 [http://en.wikipedia.org/wiki/Wildcard_DNS_record](http://en.wikipedia.org/wiki/Wildcard_DNS_record)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-12T14:03:25.320

您可能会执行以下操作：

```
if (preg_match('#.*/articles/([a-z0-9\-_]+)\.php#i', $_SERVER['PHP_SELF'], $match)) {
    header('Location: http://' . $match[1] . '.foo.com');
    exit;
} 
```

请记住在任何其他输出之前粘贴此代码，否则您将收到错误消息。

或通过`.htaccess`启用`mod_rewrite`和`RewriteEngine ON`：

```
RewriteRule ^.*/articles/([a-z0-9\-_]+)\.php$ http://$1.foo.com [R,L] 
```

**编辑**

反过来是这样的：

```
if (preg_match('#^http://([a-z0-9\-_]+)\.foo\.com.*$#i', $_SERVER['HTTP_HOST'], $match)) {
    header('Location: http://foo.com/articles/' . $match[1] . '.php');
    exit;
} 
```

并与`.htaccess`：

```
RewriteCond %{HTTP_HOST} ^([a-z0-9\-_]+).foo.com$
RewriteRule .* http://foo.com/articles/%1.php [R,L] 
```

# javascript - 检票口上的ajax请求后未加载Cufon

> ID：13344946
> 
> 赞同：1
> 
> 时间：2012-11-12T13:52:25.103
> 
> 标签：javascript, ajax, request, wicket, cufon

我的检票口网站中有一个列表视图，它会动态更新，所以我不需要刷新整个页面。问题是，当列表视图动态添加行时，javascript“cufon”似乎停止工作，并且我的列表视图的字体更改为标准字体。我正在使用检票口 6.2.0。我怎样才能解决这个问题？？谢谢您的帮助。

# php - Smarty 3 如何与 Zend Framework 2 一起使用？

> ID：13344951
> 
> 赞同：6
> 
> 时间：2012-11-12T13:52:53.643
> 
> 标签：php, include, zend-framework2, smarty3, zend-autoloader

我很久以前使用 PHP5，目前正在尝试更新我的知识并用 Zend Framework 2 和 Smarty 3 的知识来扩充它，以实现一个可能的项目。

我目前正在尝试弄清楚如何使用 Smarty 3 作为 Zend Framework 2 的替代/补充。

我可以通过谷歌找到关于这个主题的所有内容：

1.  已过时（例如 Zend Framework 1）
2.  假设我对 Zend 和 Smarty 的工作知识比我实际掌握的更深入。

有人可以**向**我解释一下，就好像我是**9**一样，使用 Zend Skeleton Application 作为我的起点：

1.  在哪个目录/文件夹（使用完全限定的路径）中，我应该解压缩 Smarty-3.1.12 包？

2.  我需要创建什么类，它们究竟需要包含什么，它们应该存储在哪里？

3.  需要修改哪些文件，以及如何使 Smarty 可以在我的模块中查看？

4.  参考上述创建的类，如何/应该如何从 AZ 使用它们（例如，包括在适当的类中、分配值、创建输出）？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-11-12T14:37:53.257

有相当不错的模块[SmartyModule](https://github.com/MurgaNikolay/SmartyModule)

绝对使用 composer 来安装它，它让你的生活更轻松:-)

[和示例应用程序](https://github.com/MurgaNikolay/ZendSkeletonApplication)

# javascript - 表单标签的 SEO

> ID：13344952
> 
> 赞同：1
> 
> 时间：2012-11-12T13:52:58.573
> 
> 标签：javascript, forms, seo

我试图让我的动态内容对搜索引擎可见。我明白我需要使用`method="get"`以获得最佳效果。安全性不是我论坛的这一部分的问题，我只是重新加载主页的一个部分，其中包含来自数据库的只读内容。

它可以工作，但我希望 Google 能够在按下各种按钮后抓取在主页中重新加载的自定义内容。

因此，对于 SEO，如果我使用以下内容，我注定要失败：

```
 <form name="aspnetForm" method="get" action="default.aspx" 
    onkeypress="javascript:return  WebForm_FireDefaultButton(event, 
    'ctl00_btnLoginImage')" id="aspnetForm"> 
```

我担心使用 JavaScript 会确保所有后续内容对机器人/蜘蛛不可见。我注意到我的 URL 在按键后并没有像我希望的那样改变 - 它仍然是主目录。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-06-12T16:05:48.937

我从 MSDN 中找到了一组很好的答案：http: [//msdn.microsoft.com/en-us/magazine/dd942833.aspx](http://msdn.microsoft.com/en-us/magazine/dd942833.aspx) 基本上我需要更改为 MVC 或找出将 URL 映射到唯一内容的方法.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-12T13:55:44.823

谷歌确实解析了一些 JS，但你确实需要不同的 URL 来处理不同的内容。

该代码看起来像我写过的任何东西，任何与我/为我一起工作的人都不会被允许提交。

在更牢固的基础上构建您的网站。

# javascript - 选择一个选项将选择另一个选项

> ID：13344955
> 
> 赞同：0
> 
> 时间：2012-11-12T13:53:08.827
> 
> 标签：javascript, selection, option

例如，如果您选择带有`id="chocolate-yes"`或`id="vanilla-yes"`的选项，带有 的选项`id="icecreamcone-yes"`也将被选中。

任何人都知道可以做到这一点的Javascript？

***注1：带有的选项`id="sprinkles-yes"`不生效`id="icecreamcone-yes"`。
注意 2：id 名称不能更改，也不能为元素添加更多属性。
注意 3：不能使用 jQuery。***

```
<ul id="icecream" style="list-style:none;line-height:30px;">
  <li>
    <select id="icecreamcone">
      <option value="addicecreamcone">Would you like an ice cream cone?</option>
      <option id="icecreamcone-yes" value="yes">Yes</option>
      <option id="icecreamcone-no" value="no">No thanks</option>
    </select>
  </li>
  <li>
    <select id="vanilla">
      <option value="addvanilla">Would you like to add vanilla ice cream?</option>
      <option id="vanilla-yes" value="yes">Yes</option>
      <option id="vanilla-no" value="no">No thanks</option>
    </select>
  </li>
  <li>
    <select id="chocolate">
      <option value="addchocolate">Would you like to add chocolate ice cream?</option>
      <option id="chocolate-yes" value="yes">Yes</option>
      <option id="chocolate-no" value="no">No thanks</option>
    </select>
  </li>
  <li>
    <select id="sprinkles">
      <option value="addsprinkles">Would you like to add sprinkles on top?</option>
      <option id="sprinkles-yes" value="yes">Yes</option>
      <option id="sprinkles-no" value="no">No thanks</option>
    </select>
  </li>
</ul> 
```

![](../Images/9109ef602f961b68e5fa9c31eaeca0f8.png)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-12T14:02:29.830

试试这个。

```
document.getElementById("chocolate").onchange = function(){
  if(document.getElementById("chocolate").options[1].selected == true) {
    document.getElementById("icecreamcone").options[1].selected = true
  }
} 
```

当您将选择巧克力冰淇淋选择为是时，它也会自动将冰淇淋锥设置为是。

# apache - Mono (mod_mono) & Apachen Debian 不处理 aspx 页面

> ID：13344956
> 
> 赞同：2
> 
> 时间：2012-11-12T13:53:13.003
> 
> 标签：apache, mono, debian, mod-mono

我正在尝试开发一个简单的网站并部署在 Apache + mod_mono + debian 上。

Apache 无法呈现带有编译器错误的 aspx 页面。这是 aspx 代码和错误详细信息。System.Web.Compilation.CompilationException：未处理的异常：描述：编译服务此请求所需的资源时出错。查看您的源文件并对其进行修改以修复此错误。

详细信息：：未处理的异常：

错误来源：编译器

错误源文件：/dev/one.aspx

异常堆栈跟踪：

在 System.Web.Compilation.AssemblyBuilder.BuildAssembly (System.Web.VirtualPath virtualPath, System.CodeDom.Compiler.CompilerParameters 选项) [0x00000] 在 System.Web.Compilation.AssemblyBuilder.BuildAssembly (System.Web.VirtualPath virtualPath ) [0x00000] in :0 在 System.Web.Compilation.BuildManager.GenerateAssembly (System.Web.Compilation.AssemblyBuilder abuilder, System.Web.Compilation.BuildProviderGroup 组, System.Web.VirtualPath vp, Boolean debug) [0x00000] in :0 在 System.Web.Compilation.BuildManager.BuildInner (System.Web.VirtualPath vp, Boolean debug) [0x00000] in :0

版本信息：3.0.0（master-experimental/3f84403 Wed Oct 24 20:38:33 CEST 2012）；ASP.NET 版本：4.0.30319.1

我是 Linux 环境的新手。任何帮助是极大的赞赏

# jmeter - JMeter HTTP请求中参数的连续更改值

> ID：13344959
> 
> 赞同：3
> 
> 时间：2012-11-12T13:53:21.463
> 
> 标签：jmeter

我想创建一个测试计划来测试给定的网络，使用 JMeter。该测试中有两个参数：X 和 Y。

每个循环，我给一个从 0 到 50 的随机数`${__Random(0,50,)}`作为参数 X，然后给 Y 的值如下：`Y=[0,10,20...50]`连续（X 保持不变）。

我在这里使用了一个计数器，但每次都得到不同的 X。而用户参数似乎不适合这个问题。或者也许我只是不知道如何正确使用它们。

有什么方法可以解决这个问题吗？我是这个工具的新手，所以它可能是一些基本的东西。

提前致谢

这是我的测试计划的截图： ![在此处输入图像描述](../Images/578f15814cecc204374677d323fa328e.png)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-12T22:33:54.123

添加一个 csv 数据集作为测试计划的子项，并放入您将从中引用的文件

```
 0
 10
 20
 30
 40
 50 
```

将 y 设置为 var 并使用 ${y} 作为 Y 值

# c# - 在 IIS 中使用带有连接字符串的 Windows 身份验证连接到 SQL 2008 R2

> ID：13344968
> 
> 赞同：3
> 
> 时间：2012-11-12T13:53:48.763
> 
> 标签：c#, iis-7, connection-string

我正在 IIS7 上使用 MVC4 制作模型优先网站。

目前我的连接字符串如下所示：

```
<add name="VaultEntities"  
    connectionString="metadata=res://*/Models.VaultDB.csdl|res://*/Models.VaultDB.ssdl|res://*/Models.VaultDB.msl;provider=System.Data.SqlClient;
         provider connection string=&quot;
         data source=sqlserver\instance;
         initial catalog=vault;
         integrated security=True;
         multipleactiveresultsets=True;
         App=EntityFramework&quot;" 
         providerName="System.Data.EntityClient" /> 
```

当我通过 Model First 方法添加数据库时，Visual Studio 2011 会自动生成连接。该查询在我的开发机器上本地完美运行。但它在 IIS 服务器上不起作用。

我的猜测是，这是因为我的开发机器上的用户帐户可以访问 SQL 服务器，而当 IIS 尝试访问 SQL 服务器时，它的用户帐户被拒绝。

在一个完美的世界中，我会在 SQL 服务器上添加一个用户并使用

```
User Id=myUsername;Password=myPassword; 
```

在我的连接字符串中，不幸的是我没有那个选项。

无需详细说明，dba 的...很难...使用。

那么有什么方法可以在连接字符串中使用我的 AD 帐户登录到 SQL 服务器......或者我可以让 IIS 将自己标识为我吗？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-11-12T14:03:46.330

> 有什么方法可以在连接字符串中使用我的 AD 帐户登录到 SQL 服务器...或者我可以让 IIS 将自己标识为我吗？

您可以让应用程序池使用您想要的任何 AD 用户。

我不建议使用您自己的用户名。在过去 12 个月中，您锁定了多少次用户名，离开后会发生什么？

创建/使用服务 AD 帐户，将其映射到应用程序池中，并让 DBA 使用受信任的连接向该用户授予 DB 访问权限。抱歉，您必须与 DBA 交谈！:-)

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-11-12T14:17:10.323

好的，有两个选择。1\. 您可以将您的应用程序池身份更改为对数据库具有 AD 访问权限的身份，这也可以通过使用`impersonation`您网站的 web.config 文件中的部分来完成（检查此[链接](http://msdn.microsoft.com/en-us/library/aa292118%28v=vs.71%29.aspx)）。2\. 要么将 sql 帐户添加到连接字符串。正如我所看到的，您使用的是 EF 连接字符串，它与标准 sql 连接字符串有点不同。但仍然有与 sql 凭据相同的部分，只需替换`integrated security = true`为`used id =...;password=...`. 就这样。

希望这可以帮助。

# ajax - 错误页面上的错误报告表

> ID：13344969
> 
> 赞同：3
> 
> 时间：2012-11-12T13:53:55.660
> 
> 标签：ajax, jsf, exception-handling, omnifaces

我在 JBoss 7.1 和 Richfaces 4.1 中有一个 JSF Web 应用程序。我尝试在 web.xml 中配置自定义错误页面，但遇到了问题，这不适用于 AJAX 请求。作为一种解决方案，我尝试使用[Omnifaces FullAjaxExceptionHandler](http://balusc.blogspot.co.at/2012/03/full-ajax-exception-handler.html)来很好地显示错误页面。

但是，我想添加一个表单，允许用户输入其他信息并将其与例外一起作为电子邮件发送给我。问题是在错误页面上，提交按钮不起作用。当我单击它时，错误页面刚刚重新加载。在下一次单击时，一切都按预期工作。

错误页面模板中的小菜单中的 h:commandlinks 也会出现同样的问题。

我对 JSF 很陌生，所以我真的不知道为什么会发生这种情况以及如何解决它。还是有更好的方法来实现这一点？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-12T14:53:42.387

这与[JSF 规范问题 790](http://java.net/jira/browse/JAVASERVERFACES_SPEC_PUBLIC-790)相关，归结为 ajax 更新某些组件，而该组件又包含一个或多个`<h:form>`组件，不能正确更新这些表单的新视图状态标识符。

此问题已在即将发布的 JSF 2.2 中修复，但在此之前，您必须使用以下基于 JavaScript 的解决方法。

```
jsf.ajax.addOnEvent(function(data) {
    if (data.status == "success") {
        var viewState = getViewState(data.responseXML);

        if (viewState) {
            for (var i = 0; i < document.forms.length; i++) {
                var form = document.forms[i];

                if (!hasViewState(form)) {
                    createViewState(form, viewState);
                }
            }
        }
    }
});

function getViewState(responseXML) {
    var updates = responseXML.getElementsByTagName("update");

    for (var i = 0; i < updates.length; i++) {
        var update = updates[i];

        if (update.getAttribute("id") == "javax.faces.ViewState") {
            return update.firstChild.nodeValue;
        }
    }

    return null;
}

function hasViewState(form) {
    for (var i = 0; i < form.elements.length; i++) {
        if (form.elements[i].name == "javax.faces.ViewState") {
            return true;
        }
    }

    return false;
}

function createViewState(form, viewState) {
    var hidden;

    try {
        hidden = document.createElement("<input name='javax.faces.ViewState'>"); // IE6-8.
    } catch(e) {
        hidden = document.createElement("input");
        hidden.setAttribute("name", "javax.faces.ViewState");
    }

    hidden.setAttribute("type", "hidden");
    hidden.setAttribute("value", viewState);
    hidden.setAttribute("autocomplete", "off");
    form.appendChild(hidden);
} 
```

只需将其包含在错误页面的`<h:outputScript name="some.js" target="head">`内部即可。`<h:body>`如果您不能保证页面使用 JSF ，那么您可能需要在调用之前`<f:ajax>`添加额外的`if (typeof jsf !== 'undefined')`检查。`jsf.ajax.addOnEvent()`

JSF 组件库 PrimeFaces 已经在其核心 ajax 引擎中解决了这个问题，所以如果您碰巧已经使用它，您可能希望用`<f:ajax>`PrimeFaces 替换所有链接/按钮。

### 也可以看看：

*   [JSF 2.0 中的通信 - 包含另一种表单的内容的 Ajax 呈现](http://balusc.blogspot.com/2011/09/communication-in-jsf-20.html#AjaxRenderingOfContentWhichContainsAnotherForm)

# c# - WPF Listview 文本框突出显示

> ID：13344971
> 
> 赞同：0
> 
> 时间：2012-11-12T13:54:01.347
> 
> 标签：c#, wpf

我有一个绑定客户信息的列表视图。我通过在文本框中输入来突出显示列表视图项。例如，当我在文本框中键入“PET”时，它会突出显示列表视图项中的“PET”。它的工作原理和亮点。

但在那之后，当我点击突出显示的项目时，它会给出一个错误。但有趣的是，当我单击它工作的列表视图项目中的空闲位置时。例如，它突出显示了 PETER HEINZ。如果我单击 PETER 或 HEINZ，则会出现错误。但是，如果我点击 PETER HEINZ 之间的空格，它会起作用。这是什么错误？错误信息是

**System.InvalidOperationException 未处理 Message="'System.Windows.Documents.Run' 不是 Visual 或 Visual3D。"**

源代码如下：

```
private void HighlightText(Object itx)
    {
 if (itx != null)
        {
            if (itx is TextBlock)
            {
                Regex regex = new Regex("(" + textBox1.Text + ")", RegexOptions.IgnoreCase);
                TextBlock tb = itx as TextBlock;
                if (textBox1.Text.Length == 0)
                {
                    string str = tb.Text;
                    tb.Inlines.Clear();
                    tb.Inlines.Add(str);
                    return;
                }
                string[] substrings = regex.Split(tb.Text);
                tb.Inlines.Clear();
                foreach (var item in substrings)
                {
                    if (regex.Match(item).Success)
                    {
                        Run runx = new Run(item);
                        runx.Background = Brushes.LightGray;
                        tb.Inlines.Add(runx);
                    }
                    else
                    {
                        tb.Inlines.Add(item);
                    }
                }
                return;
            }
            else
            {
                for (int i = 0; i < VisualTreeHelper.GetChildrenCount(itx as DependencyObject); i++)
                {
                    HighlightText(VisualTreeHelper.GetChild(itx as DependencyObject, i));
                }
            }
        }

    } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-13T13:58:25.383

这是一个修订。你能把它粘贴到你的上面，看看它在你的应用程序中是否更好用吗？

关键点：

*   添加保护以不让非可视对象进入 GetChild 递归
*   添加了对 textbox1 为空的检查
*   琐碎：移动 tb.inlines.clear 以减少代码重复
*   琐碎：反转 itx 空值检查以减少嵌套

.

```
private void HighlightText(Object itx)
{
    //safety checks
    if (itx == null)
        return;        
    if (String.isNullOrEmpty(textBox1.Text)
        return; //just in case the box is empty
    if (! (itx is Visual || itx is System.Windows.Media.Media3D.Visual3D)
        return;  //prevent from getting children on non-visual element

    if (itx is TextBlock)
    {
        Regex regex = new Regex("(" + textBox1.Text + ")", RegexOptions.IgnoreCase);
        TextBlock tb = itx as TextBlock;
        tb.Inlines.Clear();
        if (textBox1.Text.Length == 0)
        {
            string str = tb.Text;
            tb.Inlines.Add(str);
            return;
        }
        string[] substrings = regex.Split(tb.Text);
        foreach (var item in substrings)
        {

            if (!regex.Match(item).Success)
            {
                Run runx = new Run(item);
                runx.Background = Brushes.LightGray;
                tb.Inlines.Add(runx);
            }
            else
            {
                tb.Inlines.Add(item);
            }
        }
        return;
    }
    else
    {
        for (int i = 0; i < VisualTreeHelper.GetChildrenCount(itx as DependencyObject); i++)
        {
            HighlightText(VisualTreeHelper.GetChild(itx as DependencyObject, i));
        }
    }
} 
```

# c# - 缺少 System.Security.dll 程序集

> ID：13344978
> 
> 赞同：2
> 
> 时间：2012-11-12T13:54:10.317
> 
> 标签：c#, windows-phone-7, cryptography, windows-phone-7.1, .net-assembly

我试图在我的 Windows Phone 7 项目中使用 System.Security.Cryptography 命名空间。当然“保护”类不可用，我认为我必须将我的 7 应用程序升级到 7.1。

我这样做了，但我仍然看不到该命名空间上的类。然后我想我必须引用 System.Security.dll 程序集，然后它可能会起作用。问题是..我找不到程序集

我右键单击该项目，选择“添加引用”，然后在 .NET 选项卡下没有任何内容。

有什么帮助吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-12T14:01:37.337

你绝对确定它不存在吗？我刚刚检查了 .NET 部分中的参考文件，并且 System.Security 绝对包含在 .NET 4.0 中。您可以按名称（升序或降序）对程序集进行排序，也可以按照原始帖子的评论建议进行搜索。如果不存在，您使用的是哪个版本的 .NET 框架和 Visual Studio？

# java - 当应用程序是代理时，如何在 Mac OS X 中取消关机？

> ID：13344980
> 
> 赞同：3
> 
> 时间：2012-11-12T13:54:13.350
> 
> 标签：java, macos, desktop

我有一个需要对 Dock 隐藏的 Java 应用程序，并且我还需要能够中断。这就是我处理关机的方式：

```
import com.apple.eawt.AppEvent.QuitEvent;
import com.apple.eawt.QuitHandler;
import com.apple.eawt.QuitResponse;
import com.apple.eawt.Application;

public class MacOSXCustomizer {
    public void init() {
        Application application = Application.getApplication();
        application.setQuitHandler(new QuitHandler() {
            public void handleQuitRequestWith(QuitEvent qe, QuitResponse qr) {
                if(Main.prepareForExit()) {
                    qr.performQuit();
                } else {
                    qr.cancelQuit();
                }
            }
        });
    }
} 
```

我使用自己的 Java 启动器，并将应用程序包与我自己的 Java 启动器二进制文件一起使用。我将 LSUIElement 设置为 YES，这解决了我的 Dock 图标问题，但随后关闭挂钩停止工作。我的方法在关机期间被调用（我可以记录它），但即使调用 qr.cancelQuit() 也会终止应用程序。似乎系统没有等待响应。即使正在运行一些操作（2 秒长），它也没有完成。它会导致数据丢失。

我尝试将 LSUIElement 设置回 NO，然后在调用 qr.cancelQuit() 时系统取消关机。没有进行其他更改。

我还尝试创建仅实现一种方法的简单 Cocoa 应用程序：

```
- (NSApplicationTerminateReply)applicationShouldTerminate:(NSApplication *)sender
{
    return NSTerminateCancel;
} 
```

它显示对话框“应用程序 ShutdownTest 取消注销”。但无论如何用户会话已注销。

我的问题是如何解决在 Dock 和菜单栏中没有图标并能够取消/中断关机序列的问题？

*编辑：*它是否是 Java 应用程序无关紧要。本机应用程序具有相同的行为。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-19T22:01:01.490

我与 Apple 技术支持讨论过，我要求的行为是不可能的。设计为代理的应用程序（例如通过将 LSUIElement 设置为 YES）不允许中断关机或注销序列。系统根本不等待响应，也不费心去阅读和尊重返回值。

后台应用程序（没有 Dock 图标和菜单栏）不允许与用户交互，也不允许取消他的关机序列。

Apple 技术支持表示无法隐藏 Dock 图标和菜单栏并成为前台应用程序。

# c# - AvalonEdit :TextEditor 是否具有快速搜索/替换功能？

> ID：13344982
> 
> 赞同：16
> 
> 时间：2012-11-12T13:54:20.443
> 
> 标签：c#, search, avalonedit

我用`AvalonEdit:TextEditor`. 我可以为此控件启用快速搜索对话框（例如在 Ctrl-F 上）吗？或者，也许有人有将搜索词转换为 `AvalonEdit:TextEditor`文本的代码？

* * *

## 回答 #1

> 赞同：26
> 
> 时间：2013-12-18T23:54:54.830

关于它的文档不多，但 AvalonEdit 确实有一个内置的[SearchPanel](https://github.com/icsharpcode/SharpDevelop/blob/master/src/Libraries/AvalonEdit/ICSharpCode.AvalonEdit/Search/SearchPanel.cs)类，听起来与您想要的完全一样。甚至还有一个[SearchInputHandler](https://github.com/icsharpcode/SharpDevelop/blob/master/src/Libraries/AvalonEdit/ICSharpCode.AvalonEdit/Search/SearchCommands.cs)类，可以轻松地将其连接到您的编辑器、响应键盘快捷键等。下面是一些将标准搜索逻辑附加到编辑器的示例代码：

```
myEditor.TextArea.DefaultInputHandler.NestedInputHandlers.Add(new SearchInputHandler(myEditor.TextArea)); 
```

这是它的外观截图（取自使用 AvalonEdit的[ILSpy ）。](http://ilspy.net/)您可以在右上角看到搜索控件、它支持的搜索选项以及它对匹配结果所做的自动突出显示。

![使用 SearchPanel 在 ILSpy 中搜索](../Images/2f46f873e6c49f63672dc17ddae6c2d6.png)

不支持替换...但是如果您只需要搜索，这可能是一个很好的解决方案。

* * *

## 回答 #2

> 赞同：22
> 
> 时间：2016-02-01T17:33:22.993

对于 Avalon Edit 5.0.1.0 及更高版本，只需执行以下操作：

```
SearchPanel.Install(XTBAvalonEditor); 
```

其中 XTBAvalonEditor 是 WPF AvalonEdit 控件名称。

确保添加这个 using 语句：

```
using ICSharpCode.AvalonEdit.Search; 
```

然后当编辑器获得焦点时，按 CTL-F：您会看到右上角弹出查找控件。

[![在此处输入图像描述](../Images/c651699f11dac1be1d076dd1cf4bcccf.png)](https://i.stack.imgur.com/ddmw4.png)

* * *

## 回答 #3

> 赞同：11
> 
> 时间：2014-11-17T07:24:14.947

在 ICSharpCode.AvalonEdit 项目的 TextEditor 构造函数中，添加 SearchPanel.Install(this.TextArea); 瞧，使用 ctrl+f 打开搜索窗口。

（使用 Stephen McDaniel 的帖子中的行（将 myEditor 替换为此）也可以，但正在删除对 SearchInputHandler 的支持）

（与 MVVM 的 AvalonDock 中的 AvalonEdit 配合使用效果很好）

从：

```
public TextEditor() : this(new TextArea())
{
} 
```

到：

```
public TextEditor() : this(new TextArea())
{
  SearchPanel.Install(this.TextArea);
} 
```

* * *

## 回答 #4

> 赞同：4
> 
> 时间：2012-11-20T05:15:19.193

我最后一次检查它是“否”。您将必须实现自己的搜索/替换功能。

[http://community.icsharpcode.net/forums/p/11536/31542.aspx#31542](http://community.icsharpcode.net/forums/p/11536/31542.aspx#31542)

您可以从这里快速添加查找/替换 - [http://www.codeproject.com/Articles/173509/A-Universal-WPF-Find-Replace-Dialog](http://www.codeproject.com/Articles/173509/A-Universal-WPF-Find-Replace-Dialog)

* * *

## 回答 #5

> 赞同：4
> 
> 时间：2013-09-16T21:30:26.637

**ICSharpCode.AvalonEdit 4.3.1.9429**

搜索并突出显示项目。

```
private int lastUsedIndex = 0;
        public void Find(string searchQuery)
        {
            if (string.IsNullOrEmpty(searchQuery))
            {
                lastUsedIndex = 0;
                return;
            }

            string editorText = this.textEditor.Text;

            if (string.IsNullOrEmpty(editorText))
            {
                lastUsedIndex = 0;
                return;
            }

            if (lastUsedIndex >= searchQuery.Count())
            {
                lastUsedIndex = 0; 
            }

            int nIndex = editorText.IndexOf(searchQuery, lastUsedIndex);
            if (nIndex != -1)
            {
                var area = this.textEditor.TextArea;
                this.textEditor.Select(nIndex, searchQuery.Length);
                lastUsedIndex=nIndex+searchQuery.Length;
            }
            else
            {
                lastUsedIndex=0;
            }
        } 
```

更换操作：

```
public void Replace(string s, string replacement, bool selectedonly)
        {
            int nIndex = -1;
            if(selectedonly)
            {
                nIndex = textEditor.Text.IndexOf(s, this.textEditor.SelectionStart, this.textEditor.SelectionLength);           
            }
            else
            {
                nIndex = textEditor.Text.IndexOf(s);
            }

            if (nIndex != -1)
            {
                this.textEditor.Document.Replace(nIndex, s.Length, replacement);

    this.textEditor.Select(nIndex, replacement.Length);
        }
        else
        {
            lastSearchIndex = 0;
            MessageBox.Show(Locale.ReplaceEndReached);
        }
    } 
```

# java - 格式化（字符串）数组作为 bean 验证消息的一部分

> ID：13344985
> 
> 赞同：2
> 
> 时间：2012-11-12T13:54:27.917
> 
> 标签：java, bean-validation

我创建了我的第一个自定义验证注释，其中验证器类作为内部类（我发现它安排得很好）。它看起来像这样：

```
@Target( { ElementType.TYPE })
@Retention(RetentionPolicy.RUNTIME)
@Constraint(validatedBy = {OneOfGroupNotNull.Validator.class})
@Documented
public @interface OneOfGroupNotNull {

    // custom annotation properties
    String[] fields();

    // required by JSR-303
    String message() default "One of group must be not null. {fields}";
    Class<?>[] groups() default {};
    Class<? extends Payload>[] payload() default {};

    public class Validator implements ConstraintValidator<OneOfGroupNotNull, Object> {

        private String[] fields;

        @Override
        public boolean isValid(Object bean, ConstraintValidatorContext cvc) {

            int countNotNull = 0;

            for (String field : fields) {
                try {
                    String property = BeanUtils.getProperty(bean, field);
                    if (property != null) {
                        countNotNull++;
                    }
                } catch (Exception ex) {
                    throw new RuntimeException("Validation for field " + field + " of type " + bean.getClass()+ " raised exception.", ex);
                }
            }

            return countNotNull == 1;
        }

        @Override
        public void initialize(OneOfGroupNotNull a) {
            fields = a.fields();
        }
    }
} 
```

使用此验证器注释的 bean 类可能如下所示：

```
@OneOfGroupNotNull(fields = {"a", "b", "c"})
public interface MyBean {
    String getA();
    Rarity getB();
    Boolean getC();
} 
```

问题是我找不到格式化字符串数组“字段”的方法。它只是采用 to string 方法，结果如下：其中一个组必须不为空。[Ljava.lang.String;@157d954

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-12T14:37:56.457

如果您将类型`fields`从更改为`String[]`，`String`则带有字段名称的消息将正确显示。要获得约束中的字段名称，只需`split()`使用逗号即可。

另一种选择是在约束内生成自定义消息，如下所示：

```
cvc.disableDefaultConstraintViolation();
cvc.buildConstraintViolationWithTemplate("error message")
    .addNode("field name with error")
    .addConstraintViolation(); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-12T14:53:39.290

您正在使用哪种 Bean Validation 实现？如果您使用的是 Hibernate Validator 4.3，这应该可以正常工作。另请参阅[https://hibernate.onjira.com/browse/HV-506](https://hibernate.onjira.com/browse/HV-506)。

作为一种解决方法，为什么不使用*List*？那里默认的*toString*更明智。

# vim - 如何在（并且仅在）Vim 的可视模式中激活相对行号？

> ID：13344987
> 
> 赞同：6
> 
> 时间：2012-11-12T13:54:28.320
> 
> 标签：vim, editor

当我进入可视模式时，我试图让 Vim 切换到相对行编号，然后再切换回绝对编号。我注意到有`InsertEnter`和`InsertLeave`autocmd 事件，我可以这样使用：

```
autocmd InsertEnter :set rnu
autocmd InsertLeave :set nu 
```

问题是，我似乎找不到视觉模式的等价物。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-11-12T14:24:17.503

视觉模式没有此类事件（尚未实现；您可以提交补丁）。要进入可视模式，您可以简单地覆盖进入可视模式的几个命令：

```
:nnoremap <silent> v v:<C-u>set nonu rnu<CR>gv
:nnoremap <silent> V V:<C-u>set nonu rnu<CR>gv
:nnoremap <silent> <C-v> <C-v>:<C-u>set nonu rnu<CR>gv 
```

的恢复`'number'`比较困难，因为除了通过显式退出之外`<Esc>`，还有很多命令会停止可视模式。我能想到的最好的方法是触发`CursorMoved`：

```
vnoremap <Esc> <Esc>:set nu<CR>
:autocmd CursorMoved * if mode() !~# "[vV\<C-v>]" | set nu | endif 
```

# c# - ASP.NET 构建 - Bin 文件夹与 CodeBehind 文件

> ID：13344992
> 
> 赞同：1
> 
> 时间：2012-11-12T13:54:42.067
> 
> 标签：c#, asp.net, .net

假设有一个 asp.net 4.0 Web 应用程序，其中有一个 default.aspx 和 default.aspx.cs 文件。在我构建项目之后，一个以 bin 文件夹中创建的项目命名的 dll。那么dll包含什么？文件编译后的所有代码版本？

如果 aspx 文件仍然引用它的 CodeBehind 文件，如下所示，那么用于此 aspx 文件的 dll 或仍然隐藏的代码是否有效运行项目？

```
<%@ Page Title="Home Page" Language="C#" MasterPageFile="~/Site.master" AutoEventWireup="true"
    CodeBehind="Default.aspx.cs" Inherits="WebApplication3._Default" %> 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-11-12T14:02:52.440

在**Web 应用程序**中，所有 C# 代码都包含在 bin 目录中的 DLL 中。有几个例外，例如您依赖的 DLL，它们存在于 GAC 中。使用 Web 应用程序（您的问题说这就是您正在使用的），您不需要在文件后面部署您的 *.cs 代码。

一个**网站**是不同的。动态检测并重新编译更改。创建网站类型项目时，您需要包含 C# 文件代码隐藏文件。

[ASP.NET 网站还是 ASP.NET Web 应用程序？](https://stackoverflow.com/questions/398037/asp-net-web-site-or-web-application)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-12T13:58:53.567

DLL 是一个库，其中包含可由多个程序同时使用的代码和数据：

[什么是 DLL？](http://support.microsoft.com/kb/815065?wa=wsignin1.0)

[代码隐藏](http://msdn.microsoft.com/en-us/magazine/cc163675.aspx)是指包含在单独的类文件中的 ASP.NET 页面的代码。这允许您的 HTML 与您的演示逻辑完全分离：

[ASP.NET 代码隐藏模型概述](http://support.microsoft.com/kb/303247)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-12T13:59:16.703

代码被编译到您的 Web 项目生成的程序集中。作为项目选项的一部分，您可以更改其名称和默认命名空间。

据我了解，只有在项目被标记为可更新时才使用 ASPX 文件，否则它只是一个占位符文件。

# mysql - MySQL 5.6 DATETIME 不接受毫秒/微秒

> ID：13344994
> 
> 赞同：46
> 
> 时间：2012-11-12T13:54:44.863
> 
> 标签：mysql

运行据称支持[时间值小数秒的](http://dev.mysql.com/doc/refman/5.6/en/fractional-seconds.html)MySQL 5.6.7-rc 。对...

在 MySQL Workbench 5.2.44 中试试这个：

```
CREATE TABLE T (dt DATETIME);
INSERT INTO T (dt) VALUES ('2012-11-12 13:54:00.123');
SELECT dt FROM T; 
```

输出是这样的：

```
2012-11-12 13:54:00 
```

**我在这里想念什么？**

* * *

## 回答 #1

> 赞同：86
> 
> 时间：2012-11-12T13:58:50.127

找到了答案。数据类型应`DATETIME(6)`为微秒和`DATETIME(3)`毫秒。

`TIME`和`TIMESTAMP`列类型也支持具有相同语法的小数秒。

有关更多信息，请参阅[MySQL Reference on Fractional Seconds](http://dev.mysql.com/doc/refman/5.6/en/fractional-seconds.html)。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-11-12T14:02:28.943

要在 mysql 中获得微秒，请调用

```
SELECT MICROSECOND(dt) FROM T; 
```