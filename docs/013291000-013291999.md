# StackOverflow 问答 13291000-13291999

# oracle - 通过 SQL/AUTO 跟踪执行 DML 语句会自动提交吗？

> ID：13291000
> 
> 赞同：0
> 
> 时间：2012-11-08T14:31:37.407
> 
> 标签：oracle, query-optimization

当我们检查任何 sql 语句的 Autotrace 或 SQL 跟踪时，它首先执行该语句。

我想知道它何时执行任何 DML 语句，它将被自动提交还是我们需要提交或回滚该语句？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-08T14:45:26.467

设置跟踪不会导致提交。在 sql*plus 中，影响自动提交的参数是“set autocommit on”。因此，当您跟踪 DML 语句时，您必须自己回滚或提交它，除非您打开了自动提交。

# blackberry-10 - Android 运行时中的 Appworld 市场链接

> ID：13291002
> 
> 赞同：2
> 
> 时间：2012-11-08T14:31:38.407
> 
> 标签：blackberry-10, appworld, blackberry-android

我在 appworld 上有一个应用程序，我想在我的应用程序中添加一个指向它的链接，以便人们可以更轻松地对其进行评分。通常在android市场上我会做类似的事情：

```
Uri uri = Uri.parse("market://details?id=com.example.test");
Intent intent = new Intent(Intent.ACTION_VIEW, uri);
startActivity(intent); 
```

或者在亚马逊上我会这样做：

```
Uri uri = Uri.parse("http://www.amazon.com/gp/mas/dl/android?p=com.example.test");
Intent intent = new Intent(Intent.ACTION_VIEW, uri);
startActivity(intent); 
```

但是当我尝试以下它不起作用时：

```
Uri uri = Uri.parse("appworld://content=000000");
Intent intent = new Intent(Intent.ACTION_VIEW, uri);
startActivity(intent); 
```

它弹出一个浏览器，然后我收到一条关于无法执行此操作或其他内容的消息。我还尝试启动到 appworld 网站页面，但 appworld 没有抓住它。处理此链接的正确方法是什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-17T16:43:51.990

正常的 market:// 链接实际上应该可以工作。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-16T22:56:51.307

正常的`market://`URI 对我不起作用。BlackBerry World 应用程序将始终显示错误：

```
There was a problem loading this Page due to a network error. 
```

修复是检测我的应用程序何时在 BlackBerry 设备上运行，然后使用不同的 URI：

```
if (java.lang.System.getProperty("os.name").equals("qnx")){
    marketUri = "appworld://content/1234567"
} else {
    //normal Google Play URI
} 
```

您可以通过单击应用程序旁边的“编辑”链接从[BlackBerry World Vendor Portal](https://appworld.blackberry.com/isvportal/home.do)获取您的内容 ID 。ID 显示在第一个字段中。

# sql - SQL Server 2012 将两个表中的列合并为一个

> ID：13291007
> 
> 赞同：-1
> 
> 时间：2012-11-08T14:32:25.087
> 
> 标签：sql, tsql, sql-server-2012

我在不同的地方有两张桌子

最终结果必须是

```
VendorName  InvoiceNumber  InvoiceTotal 
```

`VendorName`在一个名为的表中`Vendors`

`InvoiceNumber`并且`InvoiceTotal`在一个名为的表中`Invoices`

即使供应商没有任何发票，它也需要在结果中显示所有供应商，首先显示最大的发票总数 DESC 并按字母顺序对供应商名称进行排序。

我试图将发票加入我的

```
SELECT VendorName FROM Vendors 
```

但我无法弄清楚语法：/

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-08T14:40:30.577

尝试：

```
SELECT Vendors.VendorName, Invoices.InvoiceNumber, Invoices.InvoiceTotal 
FROM Vendors LEFT JOIN Vendors.VendorID on Invoices.VendorId 
ORDER BY Invoices.InvoiceTotal DESC 
```

您是否希望将您的供应商组合在一起，或者供应商是否可以在结果集中出现超过 1 次？例如，您可以使用 SUM(Invoices.InvoiceTotal) 来获取 InvoiceTotals 的总数。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-08T14:37:19.610

你需要一个[`OUTER JOIN`](http://www.sqlteam.com/article/writing-outer-joins-in-t-sql). 假设 PK/FK 为`VendorID`：

```
SELECT v.VendorName, i.InvoiceNumber, i.InvoiceTotal
FROM Vendors v
LEFT OUTER JOIN Invoices i ON v.VendorID = i.VendorID
ORDER BY v.VendorName   ASC
      ,  i.InvoiceTotal DESC 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-08T14:36:37.987

您将希望使用 a`LEFT JOIN`在关联两个表的列上连接两个表。使用`LEFT JOIN`将返回所有，`vendors`即使它们在表中没有条目`invoices`：

```
select v.vendorname,
    i.invoicenumber,
    i.invoicetotal
from vendors v
left join invoices i
    on v.vendorid = i.vendorid  -- this is the column relating the two tables
order by i.invoicetotal DESC, v.vendorname ASC 
```

如果您在学习`JOIN`语法方面需要帮助，这里有一个很好[的连接可视化解释](http://www.codinghorror.com/blog/2007/10/a-visual-explanation-of-sql-joins.html)

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-11-08T14:34:36.637

使用 a`LEFT JOIN`包括那些没有发票的供应商，如下所示：

```
SELECT 
  v.VendorName, i.InvoiceNumber, i.InvoiceTotal
FROM Vendors v
LEFT JOIN Invoices i ON v.Id = i.VendorID
ORDER BY i.InvoiceTotal DESC, v.VendorName ASC 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-11-08T14:35:43.343

你的意思是这样的：

```
select VendorName
      ,Count(InvoiceAmount) As InvoiceNumber
      ,Sum(InvoiceAmount) As InvoiceTotal
  from Vendor
  left join Invoices on Vendor.VendorId = Invoices.VendorId
 group by VendorName
 order by 3 Desc 
```

# android - 删除和重新添加后接近警报触发两次

> ID：13291009
> 
> 赞同：4
> 
> 时间：2012-11-08T14:32:43.793
> 
> 标签：android, locationmanager

我遇到了接近警报的问题。我在我的 android 应用程序上有设置，用户可以在其中禁用/启用某些位置的接近警报。当他们禁用接近警报时，一切正常，他们不会收到通知，但如果他们禁用并重新启用接近警报，它会再次添加，当他们到达某个位置时，他们会收到两次通知，依此类推。所以基本上每次他们重新启用它时，它都会创建一个新的接近警报。

这是我用来删除接近警报的代码：

```
private void removeProximityAlert(int id) {
    final LocationManager manager = (LocationManager) getSystemService( Context.LOCATION_SERVICE );
    Intent intent = new Intent(PROX_ALERT_INTENT + id);
    PendingIntent proximityIntent = PendingIntent.getBroadcast(this, id, intent, PendingIntent.FLAG_CANCEL_CURRENT);
    manager.removeProximityAlert(proximityIntent);
} 
```

这是我用来添加接近警报的代码：

```
private void addProximityAlert(double latitude, double longitude, int id, int radius, String title) {
    final LocationManager manager = (LocationManager) getSystemService( Context.LOCATION_SERVICE );
    Intent intent = new Intent(PROX_ALERT_INTENT + id);
    PendingIntent proximityIntent = PendingIntent.getBroadcast(this, id, intent, PendingIntent.FLAG_CANCEL_CURRENT);
    manager.addProximityAlert(
           latitude,
           longitude,
           radius,
           -1,
           proximityIntent
    );

    IntentFilter filter = new IntentFilter(PROX_ALERT_INTENT + id);
    registerReceiver(new ProximityIntentReceiver(id, title), filter);
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-08T15:20:13.587

我的理解`FLAG_CANCEL_CURRENT`是它告诉系统旧的待处理意图不再有效，它应该取消它，然后创建一个新的。如果我错了，请纠正我。我相信，这就是为什么您在每次取消和创建时都复制接近警报的原因。

**解析度：**

在您的`removeProximityAlert`我会更改以下行

```
PendingIntent proximityIntent = PendingIntent.getBroadcast(this, id, intent, PendingIntent.FLAG_CANCEL_CURRENT); 
```

至：

```
PendingIntent proximityIntent = PendingIntent.getBroadcast(this, id, intent, PendingIntent.FLAG_UPDATE_CURRENT).cancel(); 
```

`FLAG_UPDATE_CURRENT`如果有的话，返回现有的。`cancel()`应该为您处理其余的事情。

* * *

**编辑**

如果我将其`cancel()`分成单独的行，我不会收到任何错误。尝试这个：

```
PendingIntent proximityIntent = PendingIntent.getBroadcast(this, id, intent, PendingIntent.FLAG_UPDATE_CURRENT);
proximityIntent.cancel(); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-05-22T18:03:04.320

问题是您每次添加警报时都在注册接收器。您应该只注册一次。

# ubuntu - 如何更正virtualbox安装

> ID：13291015
> 
> 赞同：63
> 
> 时间：2012-11-08T14:32:52.877
> 
> 标签：ubuntu, virtualbox, apt-get

`virtualbox`如果我从终端运行，这是错误输出的样子。如何纠正它？我在 Ubuntu 12.10 64 位机器上。

```
virtualbox
WARNING: The character device /dev/vboxdrv does not exist.
     Please install the virtualbox-ose-dkms package and the appropriate
     headers, most likely linux-headers-generic.

     You will not be able to start VMs until this problem is fixed. 
```

编辑：

我有最新的`linux-headers-generic`和`virtualbox-ose-dkms`包

* * *

## 回答 #1

> 赞同：76
> 
> 时间：2012-11-14T16:54:05.973

在尝试运行之前，请确保当前运行的内核头文件已安装在您的系统上。如果不这样做，您将收到一条错误消息，指示您需要安装它们或使用 --kernelsource 选项指向所述标头。

遵循此[博客文章](http://blog.erikaheidi.com/2012/10/30/solving-virtualbox-problem-in-ubuntu-gnome-remix-12-10/)中的指示对我有所帮助。基本上在安装这两个软件包之后，您还需要进行重新配置：

```
sudo dpkg-reconfigure virtualbox-dkms

sudo dpkg-reconfigure virtualbox 
```

* * *

## 回答 #2

> 赞同：23
> 
> 时间：2013-06-07T00:06:21.857

在这两个`dpkg-reconfigure`命令之后，我还需要运行：

```
sudo modprobe vboxdrv 
```

并修复 eth0：

```
sudo modprobe vboxnetflt 
```

* * *

## 回答 #3

> 赞同：8
> 
> 时间：2013-05-09T17:13:31.350

如果您在 ubuntu 12.04 中遇到同样的问题，上述解决方案可能不起作用（至少它对我和另外两个不起作用 - 请参阅我在下面的 note#1 中遇到的错误）。[然而，安装 Oracle 版本的 Virtualbox](https://www.virtualbox.org/wiki/Linux_Downloads)工作得很好。

* * *

注意＃1：我收到以下错误：

```
ndemou  ~ dkms status
virtualbox, 4.1.12: added
ndemou  ~ sudo dkms install virtualbox/4.1.12
Kernel preparation unnecessary for this kernel.  Skipping...

Building module:
cleaning build area....
make KERNELRELEASE=3.5.0-28-generic -C /lib/modules/3.5.0-28-generic/build M=/var/lib/dkms/virtualbox/4.1.12/build.....(bad exit status: 2)
Error! Bad return status for module build on kernel: 3.5.0-28-generic (i686)
Consult /var/lib/dkms/virtualbox/4.1.12/build/make.log for more information. 
```

# asp.net-mvc-4 - 在 web.config 中使用凭据设置配置成员资格提供程序

> ID：13291016
> 
> 赞同：5
> 
> 时间：2012-11-08T14:32:59.393
> 
> 标签：asp.net-mvc-4, membership-provider

我正在尝试在 ASP.NET MVC4 应用程序中实现表单身份验证，并且我只有一个用户将通过身份验证来执行一些管理活动。

```
<authentication mode="Forms">
  <forms timeout="2880" loginUrl="~/Admin/Login" slidingExpiration="true">
    <credentials passwordFormat="Clear">
      <user name="user" password="password"/>
    </credentials>
  </forms>
</authentication> 
```

当我尝试使用该`FormsAuthentication.ValidateUser`方法时，我得到一个过时的警告，我应该使用 now`Membership`类。

我的问题是如何在 web.config 中配置成员资格提供程序以使用 web.config 中的凭据设置？我应该在`name`属性中指定什么提供者？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-30T14:28:23.173

不幸的是，没有内置的成员资格提供程序用于将凭据存储在您所描述的 web.config 中的机制。您可以编写自己的方法来调用[FormsAuthentication.Authenticate](http://msdn.microsoft.com/en-us/library/system.web.security.formsauthentication.authenticate.aspx)方法，或者从您自己的自定义登录控件的代码隐藏中调用它。

# php - CSRF 提示和解决方案

> ID：13291018
> 
> 赞同：1
> 
> 时间：2012-11-08T14:32:06.530
> 
> 标签：php, security, projects-and-solutions

因此，我创建了一个以所有形式自动插入的类：`<input type="hidden" name="csrf" value="csrf_value_uniq_id" />`

现在我的问题是，我将密钥设置为在 5 分钟后过期，但是如果您停留在页面上，或者您回来后去吃饭并提交表单，则 csrf 密钥将不匹配。

现在，我可以将其设置为在 24 小时内到期，但我不知道这是否会像预期的那样安全。我在邮寄表格上使用它。

那么最好的解决方案是什么我应该怎么做呢？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-08T17:29:27.130

不需要服务器端状态并因此超时的解决方案是*签名令牌*。您创建一个包含在表单中的随机值，然后使用只有您知道的秘密*签署该令牌：*

```
$secret    = 'weufiwu93tu2b248hg24';
$token     = uniqid('', true);
$signature = sha1($secret . ':' . $token); 
```

然后，您将令牌和签名嵌入到表单中。再次收到表单后，您使用`SHA1(secret:token)`表单中的令牌重复操作，并将结果与​​表单中的签名进行比较。如果你有一个精心挑选的随机秘密和一个健壮的散列，那么除了知道秘密的人之外，没有人能够签署令牌，因此你已经证明令牌来自你。

此外，您可以在表单/签名中包含时间戳以限制令牌的有效性（使其超过 5 分钟，但不足以使令牌永远可用），用户 id 将令牌绑定到特定用户，防止表单字段注入的预期表单字段以及您可能想要检查的任何其他内容。例如：

```
signature = SHA1(secret:token:timestamp:userid:[form_field_name[:...]]) 
```

对于上述签名，您在表单中嵌入了签名、令牌、时间戳和显然的表单字段；提交后，您检查提交的时间戳是否在某个窗口内，从服务器获取秘密和用户 ID，使用所有这些部分重新创建签名，并根据提交的签名进行检查。

请注意，上面的*代码*只是一个示例，您的令牌应该使用更好的随机性来源并且更长，并且您的散列函数应该是更健壮的东西，例如 HMAC 或 bcrypt。这里是为了传达*想法*，而不是实现细节。

* * *

可以在此处找到实际实现：[Kunststube\CSRFP](https://github.com/deceze/Kunststube-CSRFP)。我把它放在一起来回答这个问题，因为无论如何我都需要类似的东西。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-08T17:37:43.430

攻击者可以通过两种可能的方式获取有效令牌：

1.  他能够猜测/预测令牌，或
2.  他能够从客户那里获得它。

前者可以通过使用具有足够熵的适当随机源来缓解。后者可以通过保护传输（即 HTTPS）和防止攻击（如可用于获取用户令牌的跨站点脚本）来建立。

如果你两者都做，你甚至可以让它永不过期（或在用户会话结束时）。

# php - 提交并单击链接后丢失选择值

> ID：13291023
> 
> 赞同：0
> 
> 时间：2012-11-08T14:33:16.023
> 
> 标签：php, html, post

您好，我有一个问题，我`$_POST['id']`在单击 href 后从选择标签中失去了价值。那么代码在这里：

```
$page = 1;
if (isset($_POST['id'])){
    $id = $_POST['id'];
}

echo $id[0];
?>

<ul>
    <li><a href="?show=all">Show All</a></li>
    <li><a href="?show=submitted">Show Submitted</a></li>
    <li><a href="?show=pending">Show Pending</a></li>
    <li><a href="?show=not">Show Not Submitted</a></li>
</ul>

<form action="" method="post">
    <select name="id">
        <option value="1">one</option>
        <option value="2">two</option>
        <option value="3">three</option>
        <option value="4">four</option>
        <option value="5">five</option>
        <option value="6">six</option>
        <option value="7">seven</option>
        <option value="8">eight</option>
    </select>
    <input type="submit" name="mode" value="Select" />
</form> 
```

这个想法是，当我从选定字段中选择了一些值后，我需要将该值保留在变量中，并且我还需要进一步过滤 SQL 查询，该查询在`<a href="">`. 在提交表单后的那一刻，我得到选择值，但在进一步过滤按下任何`<a href="">`链接`$_POST`值消失后......按下任何链接后如何保持该值？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-08T14:35:36.527

通过将其保存在某个地方。例如，您有这些选项

*   将其存储为所有 url 上的查询参数（在其他答案中列出）
*   将其存储到[cookie中](http://php.net/cookies)
*   将其存储在[会话中](http://www.php.net/manual/en/features.sessions.php)

如果它需要储存更长的时间

*   将其存储在[数据库中](http://www.php.net/manual/en/book.pdo.php)

如果只需要一次，查询参数应该没问题。如果对于几次点击/页面流，更持久的地方将是合适的。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-08T14:36:53.187

链接点击总是产生 GET 请求，默认不提交表单。因此，您必须将其作为查询参数传递：

```
 <li><a href="?show=all<?=isset($id) ? '&id=' . $id : '' ?>">Show All</a></li>
    <li><a href="?show=submitted<?=isset($id) ? '&id=' . $id : '' ?>">Show Submitted</a></li>
    <li><a href="?show=pending<?=isset($id) ? '&id=' . $id : '' ?>">Show Pending</a></li>
    <li><a href="?show=not<?=isset($id) ? '&id=' . $id : '' ?>">Show Not Submitted</a></li> 
```

`$_GET`而且，当然，在这种情况下，您需要将其取出。但是你可以从两者中得到它`$_POST`，`$_GET`你可以`$_REQUEST`在这里使用：

```
if (isset($_REQUEST['id'])){
    $id = $_REQUEST['id'];
} 
```

# java - 从 PDF 中提取的图像水平碎片化

> ID：13291024
> 
> 赞同：6
> 
> 时间：2012-11-08T14:33:16.063
> 
> 标签：java, image, pdf, extract

我必须从包含技术图纸的公司 PDF 文件中提取图像。PDF 文件符合 PDF/A 格式。

我正在使用 Apache 的 pdfbox 的方法，这是我从这个[问题](https://stackoverflow.com/questions/7007917/how-to-extract-images-from-a-pdf-with-itext-in-the-correct-order)中学到的。

```
/**
 * 
 * @param filename pdf file
 * @param res folder, where images are extracted
 * @throws IOException
 * @throws DocumentException
 */
public class ExtractImages {

    public static void extractImages(String filename, String res)
            throws IOException, DocumentException {
        int pageNo = 0;

        PDDocument document = null;
        document = PDDocument.load(filename);
        List<PDPage> pages = document.getDocumentCatalog().getAllPages();
        Iterator<PDPage> iter = pages.iterator();

        while (iter.hasNext()) {
            pageNo++;
            PDPage page = iter.next();
            PDResources resources = page.getResources();
            Map<String, PDXObjectImage> pageImages = resources.getImages();
            if (pageImages != null) {
                Iterator<String> imageIter = pageImages.keySet().iterator();
                while (imageIter.hasNext()) {
                    String key = (String) imageIter.next();
                    PDXObjectImage image = (PDXObjectImage) pageImages.get(key);
                    image.write2file(res + "_page_" + pageNo + "_" +     key);  
                }
            }
        }
        if (document != null)
            document.close();
    }
} 
```

我现在的问题是，对于某些文件，提取的图像被水平分割成最多 3 个切片。由于我不想手动将它们拼接在一起，如果有人有一些建议，我会很高兴。

**编辑 - 方法 1**

我想到的一种解决方案是为每个图像创建文件夹，然后将所有片段放在相应的文件夹中，遍历文件夹并合并内容。这需要我做一些分类工作，但我认为它可以工作。

```
String key = (String) imageIter.next(); 
```

返回 Im< *number* >，*number*表示每页图像的顺序。所以文件夹中的片段已经是有序的，合并程序可以很容易地找出哪个部分在上面，等等。

**编辑 - 方法 2**

我能想到的另一种方法：片段在文件名中的顺序在该模式中*`pdfname_page_[\d]_Im[\d][\.][tiff|png]`*。所以我可以对与该顺序对应的图像进行排序，然后将具有相同宽度的所有片段合并到一行中。我检查了这些片段，似乎几乎所有图像都有不同的尺寸。

你对这些方法有什么看法？

**编辑3**

由于时间不多了，我和我的同事不得不手动提取图像。我仍然感兴趣，但我必须在空闲时间解决这个问题。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-08T17:43:37.007

提取的图像被分成 3 个切片，因为嵌入的图像也是如此。这是 PDF 生成软件最有可能自动执行的操作。（例如，很少有 InDesign 文档设计者故意这样做。）

因此，没有可靠的方法可以用来自动将片段拼接在一起。

您可以尝试的是 - 但前提是您有可用的 Adob​​e Acrobat (Pro?) 版本：

*   使用内置的*“PDF 优化器”*。
*   在*“删除对象”*面板中，激活*“检测图像片段并合并它们”*选项。

（抱歉，上面的菜单和 UI 条目是我根据德国 Acrobat Pro 安装的记忆翻译的，因此它们肯定与英文 UI 不完全匹配。）

但是，根据我的经验，这种方法不会非常可靠地工作。在 PDF 中的大多数图像碎片情况下，它根本不起作用。:-(

# c# - 找到多个与请求 Web API 匹配的操作？

> ID：13291025
> 
> 赞同：27
> 
> 时间：2012-11-08T14:33:26.250
> 
> 标签：c#, asp.net-web-api

我正在使用 Web API，我是新手。我陷入了路由问题。我有一个具有以下操作的控制器：

```
 // GET api/Ceremony
    public IEnumerable<Ceremony> GetCeremonies()
    {
        return db.Ceremonies.AsEnumerable();
    }

    // GET api/Ceremony/5
    public Ceremony GetCeremony(int id)
    {
        Ceremony ceremony = db.Ceremonies.Find(id);
        return ceremony;
    }

    public IEnumerable<Ceremony> GetFilteredCeremonies(Search filter)
    {
        return filter.Ceremonies();
    } 
```

当我将操作添加`GetFilteredCeremonies`到我的控制器时，就会出现问题。添加此内容后，当我进行 ajax 调用`GetCeremonies`操作时，它会返回带有以下消息的异常：

```
"Message":"An error has occurred.","ExceptionMessage":"Multiple actions were 
 found that match the request 
```

*仅供参考：参数`Search`是包含属性和函数名称仪式的模型类。*

**编辑**

路线：

```
config.Routes.MapHttpRoute(
                name: "DefaultApi",
                routeTemplate: "api/{controller}/{id}",
                defaults: new { id = RouteParameter.Optional }
            ); 
```

* * *

## 回答 #1

> 赞同：22
> 
> 时间：2012-11-10T06:27:25.353

如果您不需要使用使用`api/{controller}/{id}`路由的 REST 服务并尝试基于方法**GET** / **POST** / **DELETE** / **PUT**解决操作，则可以将路由修改为经典 MVC 路由`api/{controller}/{action}/{id}`，它将解决您的问题。

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2012-11-08T14:47:39.453

这里的问题是您的 2`Get`种方法将解决，`api/Ceremony`而 MVC 不允许参数重载。此类问题的快速解决方法（不一定是首选方法）是使您的`id`参数可以为空，例如

```
// GET api/Ceremony
public IEnumerable<Ceremony> GetCeremonies(int? id)
{
    if (id.HasValue)
    {
        Ceremony ceremony = db.Ceremonies.Find(id);
        return ceremony;
    }
    else
    {
        return db.Ceremonies.AsEnumerable();
    }
} 
```

但是，当您尝试查询单个仪式时，当您使用 1 项时，您将返回一个仪式列表 - 如果您可以忍受，那么它可能是您的解决方案。

推荐的解决方案是将您的路径适当地映射到正确的操作，例如

```
context.Routes.MapHttpRoute(
    name: "GetAllCeremonies",
    routeTemplate: "api/{controller}",
    defaults: new { action = "GetCeremonies" }
);

context.Routes.MapHttpRoute(
    name: "GetSingleCeremony",
    routeTemplate: "api/{controller}/{id}",
    defaults: new { action = "GetCeremony", id = UrlParameter.Optional }
); 
```

* * *

## 回答 #3

> 赞同：6
> 
> 时间：2015-11-11T01:18:29.900

幸运的是，现在有了 WEB API2，您可以使用[Attribute Routing](http://www.asp.net/web-api/overview/web-api-routing-and-actions/attribute-routing-in-web-api-2)。微软已经大规模开源，然后一位名叫 Tim McCall 的向导从社区贡献了它。因此，从 2013 年末、2014 年初开始，您可以`[Route("myroute")]`在 WEB API 方法上添加属性。请参见下面的代码示例。

尽管如此 - 正如我刚刚发现的那样 - 你必须确保使用`System.Web.Http.Route`而不是`System.Web.Mvc.Route`。否则，您仍然会收到错误消息`Multiple actions were found that match the request`。

```
using System.Web.Http;
...

[Route("getceremonies")]
[HttpGet]
// GET api/Ceremony
public IEnumerable<Ceremony> GetCeremonies()
{
    return db.Ceremonies.AsEnumerable();
}

[Route("getceremony")]
[HttpGet]
// GET api/Ceremony/5
public Ceremony GetCeremony(int id)
{
    Ceremony ceremony = db.Ceremonies.Find(id);
    return ceremony;
}

[Route("getfilteredceremonies")]
[HttpGet]
public IEnumerable<Ceremony> GetFilteredCeremonies(Search filter)
{
    return filter.Ceremonies();
} 
```

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2014-03-04T03:00:57.830

这是我的控制器：

```
public class PhoneFeaturesController : ApiController
{
    public List<PhoneFeature> GetbyPhoneId(int id)
    {
        var repository = new PhoneFeatureRepository();
        return repository.GetFeaturesByPhoneId(id);
    }

    public PhoneFeature GetByFeatureId(int id)
    {
        var repository = new PhoneFeatureRepository();
        return repository.GetFeaturesById(id);
    }        
} 
```

这是我的api路由：

```
 config.Routes.MapHttpRoute(
            name: "ApiWithId", 
            routeTemplate: "Api/{controller}/{id}",
            defaults: new { id = RouteParameter.Optional },
            constraints: new { id = @"^[0-9]+$" });

        config.Routes.MapHttpRoute(
            name: "ApiWithAction", 
            routeTemplate: "api/{controller}/{action}/{name}",
            defaults: null,
            constraints: new { name = @"^[a-z]+$" });

        config.Routes.MapHttpRoute(
            name: "ApiByAction",
            routeTemplate: "api/{controller}/{action}/{id}",
            defaults: new { action = "Get" },
            constraints: new { id = @"^[0-9]+$" });

        config.Routes.MapHttpRoute(
            name: "DefaultApi",
            routeTemplate: "api/{controller}/{id}",
            defaults: new { id = RouteParameter.Optional }
        ); 
```

我是这样测试的：

```
/api/PhoneFeatures//api/PhoneFeatures/GetFeatureById/101

/api/PhoneFeatures/GetByFeatureId/12 
```

它在任何情况下都能顺利运行:)

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2018-03-23T19:06:01.543

我发现了另一个不需要将方法移出控制器或更改路由映射配置的修复程序。只需将`[NonAction]`属性添加到要排除的方法中：

```
[NonAction]
public IEnumerable<Ceremony> GetFilteredCeremonies(Search filter) 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2014-03-04T05:21:06.897

我希望您在调用时正在执行 HttpGet`GetFilteredCeremonies(Search filter)`

在这种情况下，您不能像传递的那样在 GET 请求中传递复杂的对象`Search`。

如果出于某种原因，您肯定想在 get 请求中获取复杂类型，则有一些解决方法。您可能需要编写自定义模型绑定器，然后设置属性。请参考[这篇文章](http://www.codeproject.com/Articles/701182/A-Custom-Model-Binder-for-Passing-Complex-Objects)。

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2013-07-10T18:17:47.790

请检查您有两个名称不同但参数相同的方法。

如果是这样，请删除任何方法并尝试。

出现此错误是因为有两种方法正在寻找相同的参数。尝试删除其中任何一个并尝试...

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2017-04-07T15:42:36.827

在项目根目录的**App_Start**文件夹中编辑您的**WebApiConfig.cs ，并将*****{action}***添加到MapHttpRoute 方法中的*routeTemplate*参数，如下所示：

 ****```
 config.Routes.MapHttpRoute(
            name: "DefaultApi",
            routeTemplate: "api/{controller}/{action}/{id}",
            defaults: new { id = RouteParameter.Optional }
        ); 
```****

# xml - tinyMCE 编辑 XML 标签的问题

> ID：13291027
> 
> 赞同：1
> 
> 时间：2012-11-08T14:33:29.727
> 
> 标签：xml, tinymce, editing

我正在尝试使用 tinyMCE 来编辑和保存一些包含 XML 标记的文本。当我尝试保存文本时，一些信息会丢失。

例如，如果我尝试相同的文本是 First Name 在第一次保存时正确保存，如果我尝试编辑标签将丢失。仅当标记位于句子末尾时才会发生这种情况。此外，有时它会被保存，但只有当我再次点击编辑时才会显示。

我的编辑器初始化为：

```
tinyMCE.init({
    mode: "textareas",
    theme: "advanced",
    theme_advanced_buttons1 : "bold,italic,underline,separator,strikethrough,justifyleft,justifycenter,justifyright,justifyfull,bullist,numlist,indent,outdent,separator,undo,redo,first_name",
    theme_advanced_buttons2 : "",
    theme_advanced_buttons3 : "",
    theme_advanced_toolbar_location : "top",
    theme_advanced_toolbar_align : "left",
    convert_newlines_to_brs : true,
    convert_fonts_to_spans : false,
    valid_elements : '*[*]',
    //    media_strict: false,
    //    encoding : "xml",
    inline_styles: false,
    verify_html : false,
    setup : function(ed) {
        ed.addButton('currentyear', {
            title : 'Tag to be replaced with the current year',
            image : 'pages/images/ed_tag_current_year.gif',
            onclick : function() {
                ed.focus();
                ed.selection.setContent('&lt;first_namer&gt;');
            }
        });
    }
}); 
```

# android - 将 listView 与组合元素一起使用

> ID：13291029
> 
> 赞同：0
> 
> 时间：2012-11-08T14:33:32.263
> 
> 标签：android, listview

我正在尝试创建一个`listView`，以便列表中的每个项目都由一个`TextView`和一个（或多个）组成`ImageView`。

到目前为止，我已经设法使用`listView`仅`TextViews`通过使用 a`ArrayList<String>`和`ArrayAdapter<String>`适配器的项目。

有没有办法实现我想要的？还有其他方法会更容易吗？（就像使用 TableRows，但我不确定它们是否可以配置为具有 onClickListener）

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-08T14:49:13.437

您应该使用自定义列表视图。 [http://www.androidpeople.com/android-custom-listview-tutorial-part-1](http://www.androidpeople.com/android-custom-listview-tutorial-part-1)。看看链接。

```
 @Override
   public int getItemViewType(int position) 
   {
    int type;
    if (ID.get(position)== 0){
    type = TYPE_ITEM1;  //type 0 for image
   } 
     else if (ID.get(position) == 1){
    type = TYPE_ITEM2; //type 1 for text
   }else {
    type = TYPE_ITEM3; //type 2 for videos
 }
 return type;
 }
 @Override
  public int getViewTypeCount() {
 return 3;    //three different layouts to be inflated
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-08T14:56:20.663

您可以通过 ListView 的 Arraydapter 提供自定义视图（您可以扩展 ArrayAdapter 以创建自己的）。关于您的另一个问题，是的，可以使 TableRows 可点击（例如，您可以在 XML 布局文件上执行此操作）。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-08T15:05:28.877

创建一个具有如下布局的`list_items.xml`：

```
<LinearLayout
    android:orientation="horizontal"
    [...]
     <ImageView
        [...]
        android:id="@+id/myimage"/>
     <TextView
        [...]            
        android:id="@+id/mytext"/>
</LinearLayout> 
```

然后创建一个 BaseAdapter：

```
 class MyAdapter extends BaseAdapter {

     private Context context;
     private LayoutInflater inflater;
     private ViewHolder holder;
     private ArrayList<HashMap<String, String>> data;

     public MyAdapter(Context context, ArrayList<HashMap<String, String>> data) {
         this.context = context;
         this.data = data;
         inflater = LayoutInflater.from(context);
     }

     // Below the Magic
     public View getView(int position, View convertView, ViewGroup parent) {
         inflater = (LayoutInflater)    context.getSystemService(Activity.LAYOUT_INFLATER_SERVICE);

          if(convertView == null || convertView.getTag() == null) {
              // Here you load the list_items.xml an inflate your Layout with it
              convertView = inflater.inflate(R.layout.list_items, null);

              holder = new ViewHolder();
              holder.text = (TextView) convertView.findViewById(R.id.mytext);
              holder.image = (ImageView) convertView.findViewById(R.id.myimage);

              convertView.setTag(holder);

           } else {             
              holder = (ViewHolder) convertView.getTag();
           }

           // We get the HashMap for our current Position in the ListView 
           row = data.get(position);

           if(row != null) {
               holder.text.setText(row.get("test"));
               // Below could be setImageBitmap, setImageResource,...
               // depends on how you get your image
               holder.image.setImageBitmap(getImage(row.get("image"));
           }

           return convertView;
       }

       class ViewHolder {
           TextView text;
           ImageView image;
       }

 }

 public getImage(String image) {
      // Get your image from where you want it SD, drawable, internet)
 } 
```

一个这样的称呼：

```
MyAdapter myAdapter = new MyAdapter(this, data);
myListView.setAdapter(myAdapter); 
```

我假设您将数据传递到 ArrayList 中，其中包含每行的 HashMap：

```
 #ListItem1 = data(0) - data.get(0).get("title"), data.get(0).get("image")
   #ListItem2 = data(1) - data.get(1).get("title"), data.get(1).get("image") 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-11-09T17:37:49.240

我已经从我的应用程序上传了所有可能满足您需求的代码。随意下载和使用：

[https://github.com/billmcnamara/BarcelonaTravelGuide.Android](https://github.com/billmcnamara/BarcelonaTravelGuide.Android)

# java - 总重量。在 onFailure() 中抛出异常

> ID：13291031
> 
> 赞同：0
> 
> 时间：2012-11-08T14:33:40.303
> 
> 标签：java, gwt

可以在`onFailure()`GWT 的 RPC 调用的方法内抛出异常吗？因为这个方法稍后会被调用，在服务器响应之后，我很抱歉这里可能会发生一些不好的事情..

例如：

```
public void method() {
       try {
            rpc.invoke(new AsyncCallback<Void>() {
               @Override
               public void onSuccess(Void arg0) {}

               @Override
               public void onFailure(Throwable arg0) {
                throw new RuntimeException("Error message");    //HERE
               }
            });
       }
       catch (Exception e) {
           Window.alert(e.getMessage());   // AND CATCH ABOVE EXCEPTION HERE
       }

    } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-08T20:16:36.520

我通常在我的 GWT 项目中使用以下方法：

1）创建一个MyExceptionsHandler：

```
@Singleton
public class MyExceptionsHandler implements 
    GWT.UncaughtExceptionHandler,
    RpcFailureEvent.Handler, // create corresponding GwtEvent-s 
    AnyOtherErrorEvent.Handler {

  public MyExceptionsHandler(EventBus evenBus) {
    eventBus.addHandler(RpcFailureEvent.TYPE, this);
    eventBus.addHandler(AnyOtherErrorEvent.TYPE, this);
  } 

  // implement corresponding methods for interfaces

} 
```

2）在入口点：

```
GWT.setUnchaughtExceptionHandler(myExceptionHandler); 
```

3）在任何其他地方你有一个错误，你不知道如何处理：

```
rpc.invoke(new AsyncCallback<Void>() {
   @Override
   public void onSuccess(Void arg0) {}

   @Override
   public void onFailure(Throwable arg0) {
     eventBus.fireEvent(new RpcFailureEvent(<any context info you think helpful>));
   }
}); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-08T15:21:25.767

是的，这是可能的。

```
@Override
public void onFailure(Throwable arg0) {
  throw new RuntimeException(arg0);
} 
```

此代码绝对有效。但是你创建和抛出一个新实例的目的是什么`RuntimeException`？

那如果你写

```
new RuntimeException("Error message") 
```

您将丢失有关已发生异常的所有信息。

不要忘记，在 GWT 中，所有从客户端到远程服务的调用都是异步处理的。而[onFailure()](http://google-web-toolkit.googlecode.com/svn/javadoc/2.5/com/google/gwt/user/client/rpc/AsyncCallback.html#onFailure%28java.lang.Throwable%29)回调方法在异步调用无法正常完成时立即调用。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-08T15:03:16.570

不，你不能。好吧，您可以抛出异常，但它不会由您定义的 catch 块处理，因为 AsyncCallback 是一个匿名类，它不在同一范围内运行，并且不会与您的 catch 块同时调用。

但是，您可以尝试使用 GWT.setUncaughtExceptionHandler()，请参阅[http://google-web-toolkit.googlecode.com/svn/javadoc/latest/com/google/gwt/core/client/GWT.html](http://google-web-toolkit.googlecode.com/svn/javadoc/latest/com/google/gwt/core/client/GWT.html)中的详细信息。

# php - PHP同时运行多个函数

> ID：13291035
> 
> 赞同：0
> 
> 时间：2012-11-08T14:33:45.280
> 
> 标签：php, concurrency

这是我第一个具有多线程概念的应用程序。

文件夹包含 10 多个平面文件，每个平面文件为 4 GB。

我的脚本几乎花了 1 个小时来处理 1 个平面文件，那么如何实现并行处理，并在多线程中执行所有文件。

我如何从文件夹中读取文件？只需使用while循环，在while内调用SP，平面文件是SP的输入。

我想要的是：一次执行所有平面文件。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-08T14:37:05.557

PHP 不**支持**多线程。但是您可以控制流程。

看看[http://www.php.net/manual/en/ref.pcntl.php](http://www.php.net/manual/en/ref.pcntl.php)

你也可以使用[`cUrl`](http://www.php.net/manual/en/book.curl.php)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-08T14:40:49.643

不知道您是否可以控制此应用程序的任何前端部分，但您可以使用 AJAX ：

*   修改您的脚本，使其接受确定要处理的平面文件的 GET 或 POST 参数（如果需要）
*   构建一个快速的 JS 脚本（使用 jQuery 或等效的）并根据需要运行尽可能多的异步（默认行为）AJAX 调用，在按钮单击或任何东西上触发。

您可能不得不玩弄 AJAX 超时（我猜 PHP 和您的 Web 服务器都很好，因为您能够执行第一个长达一小时的执行）。

# objective-c - sqlite3_prepare_v2 exc_bad_access

> ID：13291036
> 
> 赞同：5
> 
> 时间：2012-11-08T14:33:47.927
> 
> 标签：objective-c, ios, database, multithreading, sqlite

在 iOS 上为 sqlite 使用多个阅读器时，我得到了 exc_bad_access。数据库上启用了 WAL 并且 sqlite3_threadsafety 返回 2 所以这应该不是问题。

我使用的代码在大多数情况下对于 100k+ 用户都可以正常工作，但是有某些多线程竞争条件会导致 sqlite3_prepare_v2 具有 exc_bad_access。基本上，当我产生两个线程来进行一堆读取时，它会崩溃。

使用 WAL 和线程安全 sqlite，多线程应该不是问题，但无法弄清楚是什么导致了这个 exc_bad_access。

提前致谢。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-06-13T13:26:21.827

从这个意义上说，SQLite3 不是线程安全的，[请参阅 SQLite 文档](https://www.sqlite.org/cvstrac/wiki?p=MultiThreading)

> “线程安全”是指您可以同时在不同线程中使用不同的 SQLite 数据库连接。在多个线程中同时使用同一个数据库连接从来都不是安全的。如果您使用 sqlite3_prepare() API 创建预准备语句，则每个预准备语句都被视为派生它的数据库连接的一部分。因此，您不能同时在不同线程中运行源自同一数据库连接的两条准备好的语句。

# facebook - Graph Api：作为用户发布到我的页面提要，而不是作为页面

> ID：13291037
> 
> 赞同：9
> 
> 时间：2012-11-08T14:33:54.377
> 
> 标签：facebook, facebook-graph-api, publish, facebook-feed

从今天早上开始，我一直在努力使用图形 API。

我正在尝试将消息发布到我的 facebook 页面，但**不是**作为页面，作为我自己（用户）。

当我尝试发布到朋友的页面时，一切正常并且消息已发布，但是当我尝试发布到我的页面（我是管理员）时，它要求获得 manage_pages 权限，如果我授予此权限，它只会发布消息作为页面，而不是我自己！

有没有办法指定：是的，我想发布到我的页面墙上，是的，我是管理员，但我想以用户身份发布？

```
public function postToWall($pageId, $msg) {
    if($pageId) {
        $this->callAPI('/'.$pageId.'/feed', 'POST', array(
            'message' => $msg
        ));
    }
}

/**
 * @param $path
 * @param string $method default to GET
 * @param array $params additional params
 * @return mixed
 */
public function callAPI($path, $method = 'GET', $params = array()) {
    $params = array_merge(array('access_token' => $this->getAccessToken()), $params);
    return $this->api($path, $method, $params);
} 
```

它返回：

```
Uncaught OAuthException: (#283) Requires extended permission: manage_pages 
```

我已经检查过了，access_token 是我的用户访问令牌。

我有“publish_stream”权限。

任何帮助，将不胜感激 ！谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-05-24T15:47:59.153

尝试请求“publish_actions”权限。还要确保您在 Facebook 上使用页面作为用户而不是页面本身。

* * *

## 回答 #2

> 赞同：-2
> 
> 时间：2012-11-08T15:28:10.863

在 FB 文档中，您可以阅读有关 publish_stream 的信息：

“使您的应用能够向用户的信息流和用户朋友的信息流发布内容、评论和点赞。”

因此，此权限无法授予您的应用在页面墙上发布的权限。您必须使用“manage_pages”权限。以下是更多信息：

[https://developers.facebook.com/docs/reference/login/page-permissions/](https://developers.facebook.com/docs/reference/login/page-permissions/)

# .net - Node JS 和 MS 构建 - 这可能吗？

> ID：13291041
> 
> 赞同：1
> 
> 时间：2012-11-08T14:34:01.927
> 
> 标签：.net, node.js, msbuild, compression, uglifyjs

我正在为 JavaScript 压缩编写 MS Build 任务，我希望我可以使用 Uglify 作为我的压缩提供程序。

由于 Uglify 是用 JavaScript 编写的，我显然需要一个 .NET 端口。幸运的是，似乎至少有两种可能的选择[——Uglify CS](http://uglifycs.codeplex.com/SourceControl/changeset/view/808ccbe561db)和[Uglify.NET](https://github.com/asbjornu/Uglify.NET/tree/master/lib)。不幸的是，去年两者都没有看到一次提交，因此我想他们不支持 Uglify 的新版本 2 :)

考虑到这一点，我想知道有没有办法以某种方式从 .NET 构建任务中评估原始代码？或者更笼统地说，有没有办法从 .NET 调用 Node.JS？

我可以想象从我的任务中调用 Node.JS 服务，但是，这似乎是一种矫枉过正。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-09T14:29:47.853

我已经在构建任务中完成了此操作（预构建可能是您想要的。）只需添加对节点“my-script-to-uglify.js”的调用，每次构建时...... presto！

此外，就我而言，我实际上在项目中包含了一个节点二进制文件（所有开发人员都在相同的架构上，并非所有人都有节点）

# c# - Mono for Android Html 敏捷包

> ID：13291042
> 
> 赞同：0
> 
> 时间：2012-11-08T14:34:04.633
> 
> 标签：c#, android, html, html-parsing

这里的一位用户给了我一个适用于 Android 的 HtmlAgilityPack。我的问题是如何在 MonoDevelop (Mono for Android - C#) 中使用它？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-18T07:27:00.363

您必须从代码中编译它
下载源代码

进入

```
\htmlagilitypack-99964\Branches\1.4.0\HtmlAgilityPack 
```

`csproj`将更改编辑为

```
<Import Project="$(MSBuildExtensionsPath)\Novell\Novell.MonoDroid.CSharp.targets" /> 
```

保存并加载

修正错误

跟踪 -> 调试

删除块

```
 if (!SecurityManager.IsGranted(new DnsPermission(PermissionState.Unrestricted)))
        {
            //do something.... not at full trust
            try
            {
                RegistryKey reg = Registry.ClassesRoot;
                reg = reg.OpenSubKey(extension, false);
                if (reg != null) contentType = (string)reg.GetValue("", def);
            }
            catch (Exception)
            {
                contentType = def;
            }
        } 
```

删除块

```
 if (SecurityManager.IsGranted(new RegistryPermission(PermissionState.Unrestricted)))
        {
            try
            {
                RegistryKey reg = Registry.ClassesRoot;
                reg = reg.OpenSubKey(@"MIME\Database\Content Type\" + contentType, false);
                if (reg != null) ext = (string)reg.GetValue("Extension", def);
            }
            catch (Exception)
            {
                ext = def;
            }
        } 
```

使用文件夹`dll`中的`bin/debug`

# sql - 从文件夹和子文件夹中获取分离的数据库的脚本

> ID：13291043
> 
> 赞同：1
> 
> 时间：2012-11-08T14:34:06.817
> 
> 标签：sql, sql-server, database

除了转到每个 .mdf 的属性并检查它是否已附加之外，有没有办法找出是否从具有许多子文件夹的目录附加了 SQL Server 数据库？

是否有脚本可以检查文件夹/子文件夹并写入文件来完成此操作？

谢谢大家。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-08T15:39:50.907

这应该很容易做到：

首先，我将查询数据库服务器 sysdatabase 表以找到您附加的所有数据库以及相应的文件名并存储在临时表中。

使用 xp_cmdshell 函数 exec a dos DIR 命令列出所有 MDF/LDF 文件，并使用正确的开关来导航文件夹并将结果存储在另一个临时表中

比较这些表，您将能够找到未附加的文件。

我之前做过类似的任务，同时使用过 SSIS 和 Direct Transact-SQL

吨

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-08T16:51:59.183

当您需要从 T-SQL 读取文件系统时，我发现 CLR 具有最大的灵活性。它们使您可以完全访问 system.io 命名空间以及对表值函数的支持。

查看[SQL Server CLR IO 实用程序](http://www.wisesoft.co.uk/articles/sql_server_clr_io_utility.aspx)。[这里有一个完整的解决方案，它启用了](http://www.iderware.com/sql-security-disable-sql-xp_cmdshell)xp_cmdshell所不具备的文件系统功能。

表值函数 SQLIO_fnGetFiles 可用于连接到 sys.master_files 表并返回不再附加到数据库的文件。在此示例中，CLR 部署到名为 CLRS 的数据库中：

```
USE master

SELECT fs.PATH FileSystemPath
     , FileIsAttached = CASE WHEN d.name IS NULL THEN 'YES' ELSE 'NO' END
     , d.name DatabaseName
     , mf.name FileLogicalName
     , mf.physical_name DatabaseFilePath
     , FileType = CASE mf.type_desc WHEN 'ROWS' THEN 'DATA' ELSE mf.type_desc END

FROM CLRS.dbo.SQLIO_fnGetFiles('L:\MSSQL\','*df',1) fs
LEFT OUTER JOIN sys.master_files mf ON fs.PATH = mf.physical_name
LEFT OUTER JOIN sys.databases d ON d.database_id = mf.database_id 
```

There are also other methods (powershell, .net, ssis,...) to accomplish this. My experience is that once you deploy the IO Utility solution, you'll find many other time saving uses for it.

# sql - 更新表以按日期对子记录进行排序

> ID：13291046
> 
> 赞同：0
> 
> 时间：2012-11-08T14:34:07.853
> 
> 标签：sql, ms-access

我有两张桌子：

父母（电子邮件、姓名、其他）
孩子（电子邮件、DOC_DOC_ID、DOWNLOAD_DATE、RANK）

我需要生成一个将更新 CHILD.RANK 字段的查询，其数字排序将按下载日期对每个不同的 DOC_ID 进行排名（1 = 最新的文档下载）

```
SELECT
    P.EMAIL,
    C.DOC_ID,
    MAX(C.DOWNLOAD_DATE)
FROM
    PARENT P,
    CHILD C
WHERE
    P.EMAIL = C.EMAIL 
```

请不要嘲笑我到目前为止的想法！...我想我的大脑已经炸了！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-08T16:43:53.170

如果您将 Rank_ID 用于显示（应该留给查询），您的设计可能会出现问题。

您是否考虑过如果您今天检查 DOC_ID = 1，然后运行更新以将其排名为 1，然后明天发生同样的事情，您现在有两条 DOC_ID = 1 的记录，其中 RANK 为 1？

您可以使用类似的方法以正确的顺序显示记录。 **查询 1**只会按顺序显示记录。**查询 2**将添加一个排名值（需要第一个查询）。

```
QUERY 1:
SELECT
    LAST(EMAIL) AS EMAIL,
    DOC_DOC_ID,
    Max(DOWNLOAD_DATE) AS DOWNLOAD_DATE
FROM 
    CHILD
GROUP BY 
    DOC_DOC_ID
ORDER BY 
    Max(DOWNLOAD_DATE) DESC;

QUERY 2:
SELECT 
    testing.EMAIL, 
    testing.DOC_DOC_ID, 
    testing.DOWNLOAD_DATE, 
    (select 
         count(*)
     from
         Query1
     where
         DOWNLOAD_DATE>testing.DOWNLOAD_DATE)+1 AS RANK
FROM
    Query1 as testing
ORDER BY
    testing.DOWNLOAD_DATE DESC; 
```

# c# - 为什么这会抛出 OutOfMemory？

> ID：13291047
> 
> 赞同：2
> 
> 时间：2012-11-08T14:34:22.730
> 
> 标签：c#, .net, memory-management

我正在尝试 Marshal.AllocHGlobal 并发现令人费解的是这段代码不会成功，而是会引发 OutOfMemory 异常：

```
namespace HAlloc
{
    using System;
    using System.IO;
    using System.Runtime.InteropServices;

    class Program
    {
        static void Main(string[] args)
        {
            // large file ~ 800MB
            string fileName = @"largefile.bin";
            FileInfo fileInfo = new FileInfo(fileName);

            // allocation succeeds
            IntPtr p = Marshal.AllocHGlobal((int)fileInfo.Length);

            // OutOfMemory exception thrown here:
            Marshal.Copy(File.ReadAllBytes(fileName), 0, p, (int)fileInfo.Length);
            Marshal.FreeHGlobal(p);
        }
    }
} 
```

为什么 AllocHGlobal 调用成功时会出现 OutOfMemory？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-11-08T14:36:50.060

原因`File.ReadAllBytes(fileName)`还必须读取导致额外〜800 MB的文件

# c++ - 开发数据解析器，不知道从哪里开始？

> ID：13291048
> 
> 赞同：2
> 
> 时间：2012-11-08T14:34:25.413
> 
> 标签：c++, asp.net, windows, parsing

我在工作中被要求为我们的支持团队开发一些内部软件，自从我离开大学以来的过去 18 个月里，我没有做过太多的编程，那时我从来没有真正投入过太多的时间，但现在我'我真的很想花一些认真的时间来学习编程。我仍然记得我所教的所有基础知识。我用得最多的语言是 Java，虽然我花了一些时间用 Objective-C 开发 iOS。

有问题的程序似乎相对简单，我们有 .dat 文件，其中包含我们经常与报告进行比较的信息，我被要求创建一个数据解析器类型程序，其中文件被加载并输出为人类可读的格式首选项列，就目前而言，它的原始形式是一长串数字和字母。

有人告诉我，C++ 将是一个很好的前进方向，尽管在从开发人员那里借了几本书之后，他们告诉我，使用基于 Web 的语言可能会更好。

我真的无法决定走哪条路，从这里开始的任何输入将不胜感激。

# android - 图像未在 Imageview 小部件中显示为其大小

> ID：13291052
> 
> 赞同：0
> 
> 时间：2012-11-08T14:34:39.740
> 
> 标签：android, facebook

我得到了尺寸为 960*540 像素的图像，但是当我将图像视图的宽度和高度设置为 wrap_content 时，它显示的尺寸非常小。

我从 facebook api 获得了 facebook 的图片，例如下面提到的 url [https://fbcdn-photos-a.akamaihd.net/hphotos-ak-prn1/66547_4971955335921_1754998366_n.jpg](https://fbcdn-photos-a.akamaihd.net/hphotos-ak-prn1/66547_4971955335921_1754998366_n.jpg) 我使用 imageloader 类将此图像设置为我的 imageview就像我在下面提到的

```
ImageView postimg= (ImageView) rowView.findViewById(R.id.picpost);
ImageLoader imageLoader;
imageLoader.DisplayImage(postimage.get(position).replace(" ", "%20"), postimg) ; 
```

我使用的xml是

```
<ImageView
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:layout_below="@+id/msg"
        android:id="@+id/picpost"
        android:layout_alignParentLeft="true"
        android:layout_marginTop="5dp"/> 
```

但我的图像非常小。我真的不明白为什么会这样。提前致谢

# python - 如果进入孩子，不应触发 PyGTK 离开通知事件

> ID：13291055
> 
> 赞同：1
> 
> 时间：2012-11-08T14:34:59.787
> 
> 标签：python, pygtk

请参阅此代码示例：

```
import gtk

class MenuBox(gtk.EventBox):
    def __init__(self):
        super(MenuBox, self).__init__()
        self.set_visible_window(False)
        self.connect('enter-notify-event', self._on_mouse_enter)
        self.connect('leave-notify-event', self._on_mouse_leave)

        btn = gtk.Button('x')
        btn.set_border_width(12)
        self.add(btn)

    def _on_mouse_enter(self, wid, event):
        print '_on_mouse_enter'

    def _on_mouse_leave(self, *args):
        print '_on_mouse_leave'

def main():
    win = gtk.Window()
    win.connect('destroy', gtk.main_quit)
    win.add(MenuBox())
    win.show_all()
    gtk.main()

if __name__ == '__main__':
    main() 
```

如果我从父母到孩子再回来，我希望不会触发进入和离开事件。我知道在这种特殊情况下，我可以使用`event.detail`. 但如果没有边界，这不起作用。如果我删除边框，则根本不会触发事件。

在我的真实代码中，我有一个更复杂的小部件（基于 gtk.Fixed），它在开头有边框但在结尾没有边框。因此，仅仅将事件转移给孩子也不会奏效。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-23T07:41:41.913

```
#        self.set_visible_window(False)
        self.connect('enter-notify-event', self._on_mouse_enter)
        self.connect('leave-notify-event', self._on_mouse_leave)

        btn = gtk.Button('x')
#        btn.set_border_width(12) 
```

那是你需要的吗？

# php - 修改 PyroCMS 页面模块中的默认块数

> ID：13291073
> 
> 赞同：1
> 
> 时间：2012-11-08T14:35:40.393
> 
> 标签：php, codeigniter, pyrocms

创建新页面时，我希望有 2 个默认块而不是 1 个。

原因是，我的主模板分为 2 个部分，我想从 2 个块开始。

我想做的是编辑页面模块，这样每当用户创建一个新页面时，他们总是从我命名和定义的 2 个块开始。

为了实现这一目标，我需要修改什么？

注意：我已经修改了页面模块和数据库以添加一些自定义字段。我认为这是相同的交易，但我找不到初始块的创建位置......

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-08T18:46:50.413

如果您查看 pages 模块的管理控制器中的第 340 行，就会在`$pages->chunks`属性中创建一个数组。我通过添加另一个数组/对象将其修改如下，这将创建具有两个块的页面，称为“default”和“default2”。

```
$page->chunks = array((object) array(
    'id' => 'NEW',
    'slug' => 'default',
    'body' => '',
    'type' => 'wysiwyg-advanced',
),
(object) array(
        'id' => 'NEW2',
        'slug' => 'default2',
        'body' => '',
        'type' => 'wysiwyg-advanced',
    ),
); 
```

老实说，我不确定 id 的作用，但最好确保它是唯一的。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-08T20:11:51.107

感谢@nick-pyett。这是对我有用的代码。

这是最终代码：

```
$page->chunks = array(array(
'id' => 'NEW',
'slug' => 'default',
'class' => '',
'body' => '',
'type' => 'wysiwyg-advanced',
),
array(
'id' => 'NEW2',
'slug' => 'default2',
'class' => '',
'body' => '',
'type' => 'wysiwyg-advanced',
),
); 
```

我查看了 id 的结束位置。它似乎被附加到每个元素的名称上。像这样：

> chunk_slug[NEW2]

实际的 slug 进入块的第一个输入，这将是您在页面中用来调用它的 slug。

> {{ pages:chunk id="{{ page:id }}" name="default2" }}

# java - Java 枚举 - 为什么使用 toString 而不是名称

> ID：13291076
> 
> 赞同：186
> 
> 时间：2012-11-08T14:35:56.507
> 
> 标签：java, enums

如果您查看 enum api 的方法[`name()`](https://docs.oracle.com/javase/10/docs/api/java/lang/Enum.html#name() "枚举的 Javadoc")，它会说：

> 返回此枚举常量的名称，与其枚举声明中的声明完全相同。大多数程序员应该优先使用 toString 方法，因为 toString 方法可能会返回一个对用户更友好的名称。此方法主要设计用于正确性取决于获取确切名称的特殊情况，该名称不会因版本而异。

为什么更好用`toString()`？我的意思是当 name() 已经是 final 时，可能会覆盖 toString。因此，如果您使用 toString 并且有人覆盖它以返回一个硬编码的值，那么您的整个应用程序就会关闭......此外，如果您查看源代码，则 toString() 方法会准确返回名称，并且只返回名称。这是同一件事。

* * *

## 回答 #1

> 赞同：225
> 
> 时间：2012-11-08T14:37:43.653

这实际上取决于您要对返回值做什么：

*   如果您需要获取用于声明枚举常量的确切名称，则应使用`name()`as`toString`可能已被覆盖
*   如果您想以用户友好的方式打印枚举常量，您应该使用`toString`可能已被覆盖（或不被覆盖！）。

当我觉得可能会造成混淆时，我提供了一个更具体的`getXXX`方法，例如：

```
public enum Fields {
    LAST_NAME("Last Name"), FIRST_NAME("First Name");

    private final String fieldDescription;

    private Fields(String value) {
        fieldDescription = value;
    }

    public String getFieldDescription() {
        return fieldDescription;
    }
} 
```

* * *

## 回答 #2

> 赞同：59
> 
> 时间：2012-11-08T14:37:37.407

`name()`当您想要进行比较或将硬编码值用于代码中的某些内部用途时使用。

`toString()`当您想向用户（包括查看日志的开发人员）提供信息时使用。永远不要在你的代码中依赖于`toString()`给出一个特定的值。切勿针对特定字符串对其进行测试。如果您的代码在有人正确更改`toString()`返回时中断，那么它已经被破坏了。

来自javadoc（强调我的）：

> 返回对象的字符串表示形式。通常，toString 方法返回一个“以**文本方式表示”**该对象的字符串。结果应该是一个简洁但信息丰富的表示，易于**人们阅读**。**建议所有子类重写此方法。**

* * *

## 回答 #3

> 赞同：27
> 
> 时间：2012-11-08T14:41:06.880

`name()`是 的“内置”方法`enum`。它是最终的，你不能改变它的实现。它返回写入时枚举常量的名称，例如大写，不带空格等。

比较`MOBILE_PHONE_NUMBER`和`Mobile phone number`。哪个版本更易读？我相信第二个。这就是区别：`name()`总是返回`MOBILE_PHONE_NUMBER`，`toString()`可能被覆盖为返回`Mobile phone number`。

* * *

## 回答 #4

> 赞同：17
> 
> 时间：2017-03-17T03:06:21.177

虽然大多数人盲目地遵循 javadoc 的建议，但在某些非常特殊的情况下，您实际上希望避免使用 toString()。例如，我在 Java 代码中使用枚举，但它们需要序列化到数据库，然后再返回。如果我使用 toString() 那么我将在技术上受到其他人指出的被覆盖的行为的影响。

此外，还可以从数据库中反序列化，例如，这应该始终在 Java 中工作：

`MyEnum taco = MyEnum.valueOf(MyEnum.TACO.name());`

而这不能保证：

`MyEnum taco = MyEnum.valueOf(MyEnum.TACO.toString());`

顺便说一句，我发现 Javadoc 明确地说“大多数程序员应该”是很奇怪的。我在枚举的 toString 中发现很少用例，如果人们将其用作“友好名称”，这显然是一个糟糕的用例，因为他们应该使用与 i18n 更兼容的东西，在大多数情况下，使用 name() 方法。

* * *

## 回答 #5

> 赞同：7
> 
> 时间：2016-03-11T22:44:43.893

当 name() 和 toString() 有意义时，一个实际示例是使用单值枚举来定义单例的模式。起初看起来令人惊讶，但很有意义：

```
enum SingletonComponent {
    INSTANCE(/*..configuration...*/);

    /* ...behavior... */

    @Override
    String toString() {
      return "SingletonComponent"; // better than default "INSTANCE"
    }
} 
```

在这种情况下：

```
SingletonComponent myComponent = SingletonComponent.INSTANCE;
assertThat(myComponent.name()).isEqualTo("INSTANCE"); // blah
assertThat(myComponent.toString()).isEqualTo("SingletonComponent"); // better 
```

* * *

## 回答 #6

> 赞同：5
> 
> 时间：2015-08-07T21:05:46.213

name() 实际上是枚举的 java 代码中的文本名称。这意味着它仅限于可以实际出现在您的 java 代码中的字符串，但并非所有理想的字符串都可以在代码中表达。例如，您可能需要一个以数字开头的字符串。name() 将永远无法为您获取该字符串。

* * *

## 回答 #7

> 赞同：2
> 
> 时间：2019-06-26T20:09:41.433

您也可以使用类似下面的代码。我使用 lombok 来避免为 getter 和构造函数编写一些样板代码。

```
@AllArgsConstructor
@Getter
public enum RetroDeviceStatus {
    DELIVERED(0,"Delivered"),
    ACCEPTED(1, "Accepted"),
    REJECTED(2, "Rejected"),
    REPAIRED(3, "Repaired");

    private final Integer value;
    private final String stringValue;

    @Override
    public String toString() {
        return this.stringValue;
    }
} 
```

# c - UNIX 共享内存

> ID：13291078
> 
> 赞同：0
> 
> 时间：2012-11-08T14:36:01.963
> 
> 标签：c, unix, shared-memory

> **可能重复：**
> [Unix Programming Shared Memory 奇怪的结果](https://stackoverflow.com/questions/13234990/unix-programming-shared-memory-strange-results)

我已经做了两个星期并学习如何使用共享内存，并且在一个较小的练习中我可以使它工作但现在我在以下代码中遇到了与我制作的其他顺序代码相关的问题......输出只是是相同的，并且不像顺序版本那样进行计算......并且代码是相同的......

这是共享内存代码：

```
#define MAX_SIZE 20

#include <stdio.h>
#include <stdio.h>
#include <stdlib.h>
#include <unistd.h>
#include <sys/ipc.h> 
#include <sys/shm.h>
#include <stdio.h>
#include <sys/fcntl.h>
#include <semaphore.h>
#include <sys/wait.h>

#define MAXCHILDS 2
#define MAX_SIZE 20
#define MAX_WRITES 100
#define ALIVE 1
#define DEAD 0

typedef struct{
    int m[MAX_SIZE][MAX_SIZE];
    int h[MAX_SIZE][MAX_SIZE];
}matrix;

pid_t child[MAXCHILDS];
matrix*sh_mem;
int shmid;
int gen = 5; 

void calculate() { // filhos checks if the cells around obey these rules are changed to 1 or 0 
        int tableB[MAX_SIZE][MAX_SIZE];
        int neighbor, height, width;

        for (height = 0; height < MAX_SIZE; height++) {
                for (width = 0; width < MAX_SIZE; width++) {
                        neighbor = getNeighborCount(sh_mem->m, height, width);
                        if (neighbor==3) {
                                tableB[height][width] = ALIVE;
                        } else if (neighbor == 2 && sh_mem->m[height][width] == ALIVE) {
                                tableB[height][width] = ALIVE;
                        } else {
                                tableB[height][width] = DEAD;
                        }
                }
        }

        for (height = MAX_SIZE; height < MAX_SIZE; height++) {
                for (width = MAX_SIZE; width < MAX_SIZE; width++) {
                        sh_mem->m[height][width] = tableB[height][width];
                }
        }
}
int getNeighborValue(int table[MAX_SIZE][MAX_SIZE], int row, int col) { // gets the neighborvalue
        if (table[row][col] == ALIVE) 
        { 
                return 1;
        } else {
                return 0;
        }
}
int getNeighborCount(int table[MAX_SIZE][MAX_SIZE], int row, int col) { // gets the cells around 
        int neighbor = 0;

        neighbor += getNeighborValue(table, row - 1, col - 1);  //top left
        neighbor += getNeighborValue(table, row - 1, col);  //top
        neighbor += getNeighborValue(table, row - 1, col + 1);  //top right
        neighbor += getNeighborValue(table, row, col - 1);  //left
        neighbor += getNeighborValue(table, row, col + 1);  //right
        neighbor += getNeighborValue(table, row + 1, col - 1);  //below left
        neighbor += getNeighborValue(table, row + 1, col);   // below
        neighbor += getNeighborValue(table, row + 1, col + 1);  //below right

        return neighbor;
}
void printTable(int table[MAX_SIZE][MAX_SIZE]) {
        int height, width;

        for (height = 0; height < MAX_SIZE-1; height++) {
                for (width = 0; width < MAX_SIZE-1; width++) {
                        if (table[height][width] == 1) {
                                printf(" X ");
                        } else {
                                printf(" . ");
                        }
                }
                printf("\n");
        }
        printf("\n");
}
void init(){

    /*initialize shared memory */
    shmid = shmget(IPC_PRIVATE,sizeof(matrix),IPC_CREAT|0777);
    /*map shared memory*/
    sh_mem = (matrix*)shmat(shmid,NULL,0);
    if(sh_mem == (matrix*)(-1)){
        perror("shmat");
    }
}
void terminate() {
  shmctl(shmid, IPC_RMID, NULL);
}

void initarray() {
  int i,j; 
  for (i=0; i<MAX_SIZE-1; i++){
    for (j=0; j<MAX_SIZE-1; j++){
        if(drand48()>0.5){
            sh_mem->m[i][j] = 1;
        }
        else{
            sh_mem->m[i][j] = 0;
        }
    }
  }
} 

int matchArray(){ // funcao para o parent // checks the matrix for differences with previous matrix
        int count = 0;
        int height,width,flag=0;
        for(height = 0; height<MAX_SIZE; height++){
                for(width = 0; width<MAX_SIZE; width++){
                        if(sh_mem->m[height][width] != sh_mem->h[height][width]){
                                count++;
                        }
                }
        }
        if(count>0){
                flag = 1;
        }
        return flag;
}

int main(int argc, char **argv)
{   
    int i,k;
    int generation = 0;
    int height,width;
    int flag = 0;
    init();
    initarray(sh_mem->m);
    printTable(sh_mem->m);
    printf("Test data as Generation 0\n");
    printf("-----------\n");

      for(i=0; i<gen; i++)
    {
                for (height = 0; height < MAX_SIZE; height++) {
                    for (width = 0; width < MAX_SIZE; width++) {
                            sh_mem->h[height][width] = sh_mem->m[height][width];
                    }
                }
                calculate();
                flag = matchArray();
                printf("The flag value is:%d\n",flag);
                if(flag == 0){
                    break;
                }
                        printTable(sh_mem->m);
                printf("\n======================================\n");
                printTable(sh_mem->h);
                        printf("Generation %d\n", ++generation);
        }

    return 0;
} 
```

连续版本是：

```
#include <stdio.h>
#include <stdlib.h>
#include <malloc.h>
#include <math.h>
#include <sys/time.h>

#define ALIVE 1
#define DEAD 0

int **array = NULL;
int **history = NULL;
int HEIGHT;
int WIDTH;

double gettime(void) {
  struct timeval tval;

  gettimeofday(&tval, NULL);

  return( (double)tval.tv_sec + (double)tval.tv_usec/1000000.0 );
}

//Its showing answer with small size matrices, but not with bigger ones

int **allocarray(int P, int Q) {
  int i;
  int *p, **a;
  p = (int *)malloc(P*Q*sizeof(int));
  a = (int **)malloc(P*sizeof(int*));
  if (p == NULL || a == NULL) 
    printf("Error allocating memory\n");
  /* for row major storage */
  for (i = 0; i < P; i++)
    a[i] = &p[i*Q];
  return a;
}
void initarray() {
  int i,j; 
  for (i=1; i<HEIGHT-1; i++){
    for (j=1; j<WIDTH-1; j++){
        if(drand48()>0.5){
            array[i][j] = 1;
        }
        else{
            array[i][j] = 0;
        }
    }
  }
} 
void printTable(int **table) {
        int height, width;

        for (height = 1; height < HEIGHT-1; height++) {
                for (width = 1; width < WIDTH-1; width++) {
                        if (table[height][width] == ALIVE) {
                                printf(" X ");
                        } else {
                                printf(" 0 ");
                        }
                }
                printf("\n");
        }
        printf("\n");
}

//to clear up everything

void clearTable() {
        int height, width;
        for (height = 0; height < HEIGHT; height++) {
                for (width = 0; width < WIDTH; width++) {
                        array[height][width] = DEAD;
                }
        }
}

int getNeighborValue(int **table, int row, int col) {
        if (table[row][col] == ALIVE) 
        { 
                return 1;
        } else {
                return 0;
        }
}

int getNeighborCount(int **table, int row, int col) {
        int neighbor = 0;

        neighbor += getNeighborValue(table, row - 1, col - 1);  //top left
        neighbor += getNeighborValue(table, row - 1, col);  //top
        neighbor += getNeighborValue(table, row - 1, col + 1);  //top right
        neighbor += getNeighborValue(table, row, col - 1);  //left
        neighbor += getNeighborValue(table, row, col + 1);  //right
        neighbor += getNeighborValue(table, row + 1, col - 1);  //below left
        neighbor += getNeighborValue(table, row + 1, col);   // below
        neighbor += getNeighborValue(table, row + 1, col + 1);  //below right

        return neighbor;
}

void calculate() {
        int **tableB = NULL;
        int neighbor, height, width;
        tableB = allocarray(HEIGHT, WIDTH);

        for (height = 1; height < (HEIGHT-1); height++) {
                for (width = 1; width < (WIDTH-1); width++) {
                        neighbor = getNeighborCount(array, height, width);
                        if (neighbor==3) {
                                tableB[height][width] = ALIVE;
                        } else if (neighbor == 2 && array[height][width] == ALIVE) {
                                tableB[height][width] = ALIVE;
                        } else {
                                tableB[height][width] = DEAD;
                        }
                }
        }

        for (height = 1; height < (HEIGHT-1); height++) {
                for (width = 1; width < (WIDTH-1); width++) {
                        array[height][width] = tableB[height][width];
                }
        }
}

int matchArray(){
        int count = 0;
        int height,width,flag=0;
        for(height = 0; height<HEIGHT; height++){
                for(width = 0; width<WIDTH; width++){
                        if(array[height][width] != history[height][width]){
                                count++;
                        }
                }
        }
        if(count>0){
                flag = 1;
        }
        return flag;
}

int main(int argc, char *argv[]) {
        int generation = 0;
        int i;
        double starttime, endtime, time;
        int height,width;
        int flag = 0;
    if (argc!=3)
        printf("You need to enter the size of the matrix and the number of generations in the comment line arguement\n");
    else
    {
        printf("The matrix size given is:%s\n",argv[1]);
        HEIGHT = atoi(argv[1])+2;
        WIDTH = HEIGHT;
        array = allocarray(HEIGHT, WIDTH);
        history = allocarray(HEIGHT, WIDTH);
        clearTable();
        // askUser(table);
        //loadTestData(array);
        initarray();
        printTable(array);
        printf("Test data as Generation 0\n");
        printf("-----------\n");
        starttime= gettime();
        printf("Starttime= %f", starttime);
        for(i=0; i<(atoi(argv[2])); i++)
    {
                for (height = 0; height < HEIGHT; height++) {
                    for (width = 0; width < WIDTH; width++) {
                            history[height][width] = array[height][width];
                    }
                }
                calculate();
                flag = matchArray();
                printf("The flag value is:%d\n",flag);
                if(flag == 0){
                    break;
                }
                        printTable(array);
                printf("\n======================================\n");
                printTable(history);
                        printf("Generation %d\n", ++generation);
        }
    endtime= gettime();
    printf("Endtime= %f", endtime);

    time= (endtime-starttime);
    printf("Time taken= %1f\n", time); 
    } 
        return 0;
} 
```

现在的问题是第二个版本运行良好，矩阵通过我在计算函数中定义的规则演变，但在第一个代码中它总是相同的......甚至根本不涉及......这两个版本正在工作并且准备编译...如果你能帮我解决这个问题，我将不胜感激。

# c# - GroupBox 包含控件，如何获取这些控件的名称？

> ID：13291081
> 
> 赞同：5
> 
> 时间：2012-11-08T14:36:08.990
> 
> 标签：c#, .net, winforms

我在我的表单页面（WinForms）上使用 GroupBox 控件。

GroupBox 包含五个控件（RadioButtons）。

知道如何获取 GroupBox 控件中控件的名称和状态吗？

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2012-11-08T14:41:30.093

您可以使用在 GroupBox[`Enumerable.OfType`](http://msdn.microsoft.com/en-us/library/bb360913.aspx)中查找和投射您的：`RadioButtons`

```
var radioButtons = groupBox1.Controls.OfType<RadioButton>();
foreach (RadioButton rb in radioButtons)
{
    bool state = rb.Checked;
    string name = rb.Name;
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-08T14:40:43.293

```
 var grpBox = new GroupBox();
        if (grpBox.HasChildren)
        {
            var name = grpBox.Controls[0].Name;
        } 
```

# git - git 下载一个“匿名”zip 文件，其中仅包含从日期 (SHA) 开始更改的文件并更新服务器

> ID：13291082
> 
> 赞同：1
> 
> 时间：2012-11-08T14:36:36.713
> 
> 标签：git, shell, operating-system, sha

我需要更新一个旧网站。

我的想法是只将修改后的文件上传到 FTP 服务器以节省连接带宽。

同时我想对文件进行匿名处理，将它们放入不包含任何操作系统信息的“白板”或匿名存档中（这些信息中的大部分都包含在隐藏文件中，如文件日志列表、系统信息，图标数据等），任何操作系统都需要几秒钟才能写入任何下载的文件夹，但它无法访问存档或压缩文件夹。

有没有办法告诉 Git 将自特定修订号 (SHA) 到最新版本 (HEAD) 以来提交（修改）的所有文件和文件夹打包（zip 存档）？

假设我在最后一次提交中提交了三个文件，每个文件都位于不同的文件夹中。

我只想将这三个文件导出到存档中：

```
changed_files-from-[SHA]-to-HEAD-[SHA].zip 
```

目的是通过 ftp 将此存档文件上传到服务器，并使用服务器上的 shell 命令从正确的文件夹中解压缩它。

然后，这将仅用三个新文件覆盖现有文件。

# java - 如何使用 LWUIT 在我的 j2me 程序中更改本地化？

> ID：13291084
> 
> 赞同：1
> 
> 时间：2012-11-08T14:36:37.790
> 
> 标签：java, mobile, java-me, lwuit

我使用 LWUIT 资源编辑器在项目的 res 文件中创建了一个本地化表。但事实证明，我不知道如何切换不同的本地化。如何为我的程序设置全球语言？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-14T07:49:59.510

此代码可以将两个不同的本地化合并为一个。（默认保存在捆绑中并与新的本地化合并 mergeL10N（这些对象是 hashTable））

```
if (themeName != null && !themeName.equals(this.currThemeName)) {
            try {
                if (themeName.equals(DEFAULT_THEME_NAME)) {
                    defaultTheme = Resources.open(DEFAULT_THEME_NAME);
                    bundle = null;
                } else {
                    defaultTheme = Resources.open(DEFAULT_THEME_NAME);
                    bundle = Resources.open(themeName);
                }
               mergeL10N = defaultTheme.getL10N("Localization (L10N) 1", "iw");
                if (bundle != null) {
                  mergeHashtable(mergeL10N, bundle.getL10N("Localization (L10N) 1", "iw"));
                 }
                  UIManager.getInstance().setResourceBundle(mergeL10N);

                                      }
            } catch (Exception e) {
                e.printStackTrace();
            }
        } 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-09T19:52:22.043

您必须打开您的资源并使用您要使用的表格，在这里您可以找到一个示例

```
try {
        Constants.res = Resources.open("/Lang.res");
    } catch (Exception e){
        System.err.println("can't load resource file:" + e);
    }
Hashtable h = Constants.res.getL10N("English.res","en"); 
```

# android - 从 SQLite DB 设置 android 通知

> ID：13291085
> 
> 赞同：1
> 
> 时间：2012-11-08T14:36:43.133
> 
> 标签：android, android-notifications

我正在构建一个提醒应用程序，用户在其中将事件输入 SQLite DB。主屏幕列出了每个提醒的标题，单击一个项目会显示它的详细信息。所有这一切都很好。

现在我想允许用户为每个项目设置通知，可以选择在活动安排前 15 分钟、30 分钟或 1 小时设置提醒。

我不知道如何去做，也找不到任何好的教程。谁能给我一些关于如何实现它的想法？

谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-08T14:40:35.303

使用[AlaramManager](http://developer.android.com/reference/android/app/AlarmManager.html)触发广播，告诉您的应用程序向用户显示有关事件的通知。

下面是一个使用它的例子：[Alarm Manager Example](https://stackoverflow.com/questions/4459058/alarm-manager-example)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-08T14:40:40.097

从数据库中获取事件的日期后，它就像任何其他通知一样简单，只需记住您要减去日期的时间量（15、30、60 分钟）。

```
Timer timer = new Timer();
SimpleDateFormat formatter = new SimpleDateFormat("MM/dd/yyyy HH:mm");
Date date = formatter.parse("11/08/2012 16:39");
timer.schedule(timerTask, date); 
```

这会将活动安排到活动时间，我知道您希望在活动实际发生之前得到提醒。为此，您可以创建一个日历对象以您需要的方式修改日期。请记住删除之前的日程安排，否则您将收到两个提醒（一次提醒，另一个作为提醒）。

```
Calendar cal = Calendar.getInstance();
         cal.setTime(date);
         cal.add(Calendar.MINUTE, -15);//Or whatever
//Then schedule it.
time.schedule(timerTask,cal.getTime()); 
```

`timerTask`两种方法都使用可能是这样的变量，涉及`createNotification`实际上将创建待处理通知的方法调用。

```
TimerTask timerTask = new TimerTask(){
   @Override
   public void run(){
       createNotification(title,  text,  tickerText,  millisec);
   }
}; 
```

**你有一个潜在的问题**。如果应用程序已关闭，我相信计时器会随之消失，因此根据您的应用程序的性质，您可能希望`AlarmManager`按照其他人的建议使用。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-08T14:41:59.607

您将使用 AlarmManager 设置要在特定日期/时间触发的操作。（有很多关于如何使用 AlarmManager 的教程）

警报管理器事件总是触发 PendingIntent。根据这个意图，您可以进行广播或启动服务。（您必须创建广播接收器或服务）

然后在广播接收器或服务上建立并显示通知。

我建议使用广播接收器路由，它更干净，更无缝。您可能还需要一个用于 onBoot 事件的广播接收器，以便在用户重新启动设备的情况下重新安排警报管理器上的事件。

# git - 如何在修改后的 master 和远程 master 上的分支之间获取差异？

> ID：13291092
> 
> 赞同：3
> 
> 时间：2012-11-08T14:36:57.220
> 
> 标签：git

什么是“分叉”项目的最佳方式，与维护者的变化保持联系并开发自己的功能，同时仍然能够轻松地回馈任何一旦被接受的功能？

这是我所做的，但遇到了问题。

我克隆了一个存储库，在 Feature1 分支中做了一些工作，然后合并了从 origin 到 feature1 的更改，然后是 origin... 然后我开发了 feature2，当然，它也包含 feature1 代码。下面的艺术描绘了这个场景（希望如此）。

我在我的主人中有所有上游的变化，并在它们之上发展。但是，我不能回馈 Feature2，因为它还包含 Feature1 代码。我能做些什么？如何获得针对“aaa”的 feature2 补丁？

Rebase Feature2 和cherry-pick 以排除 Feature1 提交？没有太大的解决办法。

`git format-patch f2..f4`然后`git am`呢？所有补丁都必须手动应用！

```
 Feature1                                    Feature2
          a---b---c---d---e---f---g-----h---i         f2---f3---f4
         /                 \             \   \        /
    --------x'---y'---z'----1---o'---p'---2---3---q'-----r'---t'---l'---aaa'
     /     /    /    /        /    /             /      /    /    /
origin----x----y----z--------o----p-------------q------r----t----l---aaa 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-09T00:46:06.333

如果要保留图中描述的合并工作流。

```
git rebase --onto q Feature2
git checkout aaa
git merge Feature2 
```

如果我正确理解了图表，这会将您的本地存储库转换为如下内容：

```
 Feature1
        a---b---c---d---e---f---g------h---i
       /                 \              \   \ 
      ------x'---y'---z'--1----o'---p'---2---3----aaa'
     /     /    /    /        /    /
origin----x----y----z--------o----p-------------q----r----t----l---aaa
                                                 \    \    \    \
                                                  \----r'---t'---l'---4---aaa''
                                                   \                 /
                                                    f2---f3---f4-----
                                                    Feature2 
```

如果 Feature2 不依赖于 Feature1 中所做的任何更改，这就是您需要做的所有事情。如果 Feature2 确实依赖于 Feature1 的一些更改，那么您也必须将这些更改挑选到 Feature2 分支上。

*替代解决方案*

另一种方法是忘记所有合并，并将 Feature2 直接重新定位到适当的上游提交 (aaa)。如果你愿意，你可以对 Feature1 做同样的事情。

```
git rebase --onto aaa Feature1
git rebase --onto aaa Feature2 
```

这将使您的本地存储库看起来像这样：

```
 a---b---(...)---aaa'   Feature1
                              /
origin---x---(...)---t---l---aaa
                              \
                               f2---f3---f4---aaa''   Feature2 
```

同样，这仅在 Feature2 在逻辑上不依赖于 Feature1 时才有效。如果是这样，您仍然必须从 Feature1 到 Feature2 挑选这些东西。

# persistent - Fuse Fabric：如何从配置文件中删除配置 PID？

> ID：13291093
> 
> 赞同：1
> 
> 时间：2012-11-08T14:36:58.360
> 
> 标签：persistent, ident, fusefabric

我开始修改个人资料，并在此过程中犯了一些错误。

因此，我想完全删除配置文件中的 PID。

这些可以`fabric:profile-display default`在本文底部显示的输出中看到。

他们是：

`http:`

`patch.repositories=http:`

`org.ops4j.pax.url.mvn.repositories=http:`

我找不到删除它的正确命令。我试过了：

`config:delete org.ops4j.pax.url.mvn.repositories=http:`

成功完成。但是`default`配置文件仍然列出了这个 pid。

我也试过：

`fabric:profile-edit --delete -p org.ops4j.pax.url.mvn.repositories=http: default`

失败了：

`Error executing command: String index out of range: -1`

这表示`/property`必须指定属性路径。

附加也根本`/`不起作用。

另一个问题是我有一个看似空名称的 pid，如下行所示：

`PID:` （此输出前缀后面没有任何内容）。

### 输出`fabric:profile-display default`：

```
Profile id: default
Version   : 1.0
Parents   : 
Associated Containers : 

Container settings
----------------------------
Repositories : 
        mvn:org.fusesource.fabric/fuse-fabric/7.0.1.fuse-084/xml/features

Features : 
        fabric-agent
        karaf
        fabric-jaas
        fabric-core

Agent Properties : 
          patch.repositories =  http://repo.fusesource.com/nexus/content/repositories/releases,
                 http://repo.fusesource.com/nexus/content/groups/ea
          org.ops4j.pax.url.mvn.repositories =  http://repo1.maven.org/maven2,
                 http://repo.fusesource.com/nexus/content/repositories/releases,
                 http://repo.fusesource.com/nexus/content/groups/ea,
                 http://repository.springsource.com/maven/bundles/release,
                 http://repository.springsource.com/maven/bundles/external,
                 http://scala-tools.org/repo-releases
          org.ops4j.pax.url.mvn.defaultRepositories =   file:${karaf.home}/${karaf.default.repository}@snapshots,
                file:${karaf.home}/local-repo@snapshots

Configuration details
----------------------------
PID: 

PID: org.ops4j.pax.url.mvn
  org.ops4j.pax.url.mvn.useFallbackRepositories false
  org.ops4j.pax.url.mvn.disableAether true
  org.ops4j.pax.url.mvn.repositories ${profile:org.fusesource.fabric.agent/org.ops4j.pax.url.mvn.repositories}
  org.ops4j.pax.url.mvn.defaultRepositories ${profile:org.fusesource.fabric.agent/org.ops4j.pax.url.mvn.defaultRepositories}

PID: patch.repositories=http:

PID: org.ops4j.pax.url.mvn.repositories=http:

PID: http:

PID: org.fusesource.fabric.zookeeper
  zookeeper.url ${zk:root/ip}:2181 
```

如果有人能指出正确的命令，我将不胜感激。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-06-17T10:51:11.580

我查看了`fabric:profile-edit`with的命令行代码`--delete`，不幸的是，这个函数似乎是为从 PID 中删除键/值对而设计的，而不是删除 PID 本身。

（这里是github 上[ProfileEdit.java的代码）](https://github.com/jboss-fuse/fuse/blob/master/fabric/fabric-commands/src/main/java/org/fusesource/fabric/commands/ProfileEdit.java)

所以基本上你可以使用该命令来“清空”PID，但不能删除它们。

```
fabric:profile-edit --delete --pid mypid/mykey=myvalue myprofile 
```

知道这对你没有多大帮助，我问了坐在我旁边的同事（比我聪明得多），他推荐了以下内容：

1.  启用熔断器管理控制台`container-add-profile root fmc`

2.  在浏览器中运行 fmc（我的位于 localhost 的 8181 端口），转到`Profiles`页面，从列表中选择您的个人资料

3.  转到`Config Files`选项卡，找到您要核对的 PI​​D，然后单击十字 (X)。

等等，pid 应该消失了。有兴趣知道这是否适合您，包括在“空白”个人资料中...

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2016-05-18T12:04:01.183

以下适用于 Fuse 6.2：

1) 用于属性文件（成为 PID 对象）

```
# create
profile-edit --resource foobar.properties default

# delete
profile-edit --delete --pid foobar default 
```

2) 对于任意文件

```
# create
profile-edit --resource foobar.xml default

#delete
only via hawtio web console, see screenshot: 
```

[![在此处输入图像描述](../Images/7dc847450db312c60a344113b8066daa.png)](https://i.stack.imgur.com/6NyNR.png)

# ruby-on-rails - 写入包含宏的现有 Excel .xls 文件

> ID：13291094
> 
> 赞同：6
> 
> 时间：2012-11-08T14:36:59.113
> 
> 标签：ruby-on-rails, ruby, linux, spreadsheet, export-to-excel

我想在 Linux 下使用 Ruby 将数据插入现有的 Excel (.xls) 文件。这个文件已经有数据，它有一些格式属性，它包含宏。

我尝试使用电子表格 gem 将数据插入文件，但是当我保存修改时，文件的格式和所有宏都丢失了。

这是我遇到此问题的简单修改示例：

```
book = Spreadsheet.open('myOriginalFile.xls')
sheet = book.worksheet 0
sheet.write('C12','hello')
book.write('myModifiedFile.xls') 
```

我尝试了很多东西，在论坛和网络上进行了研究，但我没有找到解决方案......有人有想法吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-19T10:17:39.347

我找到了一个解决方案：

我使用 Apache 的[POI](http://poi.apache.org/)库，它是用[rjb](http://rjb.rubyforge.org/) gem（Ruby Java Bridge，它允许将 java 库与 ruby​​ 一起使用）用 java 编写的。POI 允许保留现有 xls 文件的宏和公式并对其进行修改。

对于那些需要的人，这里是设置 rjb 以使用 POI 的方法：

```
 # JVM loading
    apache_poi_path = File.dirname(__FILE__)+'/poi-3.8/poi-3.8-20120326.jar'
    Rjb::load("#{apache_poi_path}", ['-Xmx512M'])

    # Java classes import 
    @file_class = Rjb::import('java.io.FileOutputStream')
    @workbook_class = Rjb::import('org.apache.poi.hssf.usermodel.HSSFWorkbook')
    @poifs_class = Rjb::import('org.apache.poi.poifs.filesystem.POIFSFileSystem')
    Rjb::import('org.apache.poi.hssf.usermodel.HSSFCreationHelper')
    Rjb::import('org.apache.poi.hssf.usermodel.HSSFFormulaEvaluator')
    @cell_reference_class = Rjb::import('org.apache.poi.hssf.util.CellReference')
    @cell_class = Rjb::import('org.apache.poi.hssf.usermodel.HSSFCell')
    # You can import all java classes that you need

    # Java classes utilisation :
    @file_input_class = Rjb::import('java.io.FileInputStream')
    @file_input = @file_input_class.new(model_file_path)
    @fs = @poifs_class.new(@file_input)
    @book = @workbook_class.new(@fs)

    @worksheet = @book.getSheet('worksheet')
    # ...
    # You can use your objects like in Java but with a ruby syntax 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-08T14:49:05.527

您需要将修改后的文件写入新的文件名。看看[这个](http://spreadsheet.ch/2011/10/20/modifying-an-exiting-workbook-with-several-worksheets-with-the-ruby-spreadsheet-library/)

如果您有多个工作表，则需要重写其他工作表

XLS 有几张工作表，但只修改其中一张工作表（并且不要接触其他数据），没有办法，电子表格“记住”其他工作表中的内容。您还必须编写未修改的表格，否则会发生意想不到的事情。

尔格：在修改带有多个工作表的电子表格的 XLS 时，编写修改后的工作表并再次编写完整的未修改工作表。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-09-17T18:45:00.933

您只需打开现有文件，将更改写入文件并用另一个名称保存。例如在服务器上你有 template.xls 文件。

简单的工作示例（需要在您的 .rb 文件附近有 template.xls）：

```
 #edit_xls.rb
require 'rubygems'
require 'spreadsheet'

book = Spreadsheet.open 'template.xls'
sheet = book.worksheet 0
sheet[0,0] = 'qweqeqw'
book.write 'edited.xls' 

```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-11-08T17:19:27.143

可能想看看`Axlsx`它是否能够编辑一个普通的 .xls，但几周前我用它做了一些工作，它为我正在使用的 xlsx 创造了奇迹。

# mysql - 如何对单个空格进行字符串比较

> ID：13291098
> 
> 赞同：7
> 
> 时间：2012-11-08T14:37:06.303
> 
> 标签：mysql, sql

我想检查一列是否有任何值是单个空格字符。

我一开始以为

```
WHERE my_column = ' ' 
```

会是明智的。但不是。由于某种原因，这也将匹配具有多个空格的列：

```
SELECT '    ' = ' '           => true 
```

所以我可以使用正则表达式或十六进制编码来测试：

```
WHERE HEX(my_column) = '20'
WHERE my_column REGEXP '^\ $' 
```

两者都有效。但我怀疑两者（当然是后者）效率很低。

有没有更好的办法？

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-11-08T14:41:33.433

完全匹配需要比较[`BINARY`两个字符串](http://dev.mysql.com/doc/refman/5.0/en/charset-binary-op.html)

在正常情况下，比较中不考虑尾随空格，但`BINARY`运算符强制它为：

> BINARY 还会导致尾随空格很重要。

```
mysql> SELECT BINARY '   ' = ' ';
+--------------------+
| BINARY '   ' = ' ' |
+--------------------+
|                  0 |
+--------------------+ 
```

顺便说一句，受尾随空格问题影响的不仅仅是空格比较：

```
mysql> SELECT 'abc   ' = 'abc';
+------------------+
| 'abc   ' = 'abc' |
+------------------+
|                1 |
+------------------+ 
```

...但...

```
mysql> SELECT BINARY 'abc   ' = 'abc';
+-------------------------+
| BINARY 'abc   ' = 'abc' |
+-------------------------+
|                       0 |
+-------------------------+ 
```

...更令人困惑的是，前导空格*很*重要：

```
mysql> SELECT ' abc   ' = 'abc';
+-------------------+
| ' abc   ' = 'abc' |
+-------------------+
|                 0 |
+-------------------+ 
```

### 关于索引：

`BINARY`将阻止在字符列上使用索引。但是，[文档上的注释](http://dev.mysql.com/doc/refman/5.0/en/charset-binary-op.html)表明，如果将运算符应用于比较的字符串文字端，*则将使用索引，如下所示：*`BINARY`

```
SELECT * FROM `tbl` WHERE `col` = BINARY 'string   ' 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-11-08T14:39:21.203

```
where my_column = ' ' and LENGTH(my_column) = 1 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-08T14:44:45.463

> **SELECT CASE WHEN COL_NAME=' `' THEN 'yes' ELSE 'no' END AS SPACE_INDICATOR FROM Table_NAME WHERE LENGTH(COL_NAME)=1;`**

# database - Django：如何存储和显示日期时间

> ID：13291113
> 
> 赞同：1
> 
> 时间：2012-11-08T14:38:03.467
> 
> 标签：database, django, timezone

使用 Django，有人可以向我解释 DateTimes 是如何存储在模型/数据库中的，以及确保它正确显示给用户的最佳方法是什么？我的用户都在同一个时区，但我们有夏季/冬季时间。

我认为 DateTimes 应该保存为 GMP+1，但没有夏季/冬季时间。如果一条记录的 DateTime 比另一条多 1 小时，那么它也应该在 1 小时后发生。但是如何确保用户看到该位置的正确时间？我不想在他们的个人电脑上使用系统时间；所有用户都应该看到相同的日期/时间，无论他们身在何处。他们会知道现在是这个家庭位置的时候了。

settings.py 有 TIME_ZONE，我猜这是数据库如何存储 DateTime，但这是有还是没有夏令时？然后我使用其他设置（模板标签？）来转换时间？哪个？或者这也是在setting.py中设置的？

我的应用程序是由 webfacional 托管的，所以我想我不受 Windows 系统的限制，这显然需要使用系统时间。

# java - 为什么我可以在三元运算中将原始类型设置为 null

> ID：13291117
> 
> 赞同：12
> 
> 时间：2012-11-08T14:38:26.377
> 
> 标签：java, null, ternary-operator, raw-types

我一直认为 Java 中的原始类型不能`null`，因为如果我尝试执行以下操作，则会出现编译时错误：

```
int test = null; 
```

但是在三元运算中，似乎是允许的：

```
int test = something != 0 ? 5 : null; 
```

三元运算不就是（在这种情况下）的缩写吗：

```
int test;
if (something != 0){
    test = 5;
} else {
    test = null
} 
```

这当然不应该被允许。`NullPointerException`如果该条件失败，由于自动装箱，它将自动抛出一个。那么为什么 java-compiler 不获取这样的废话呢？

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2012-11-08T14:46:04.100

`:`发生的情况是 Java 编译器首先尝试使表达式的类型位于相等的两侧。在这种情况下，它将自动装箱`5`到`Integer`; 请注意，这`null`是 的有效值`Integer`。整个三元表达式的结果是`Integer`。您将其分配给 ，`int`然后`Integer`自动拆箱。

本质上，编译器应用了自动装箱和 -unboxing，因此该行将如下所示：

```
int test = (something != 0 ? Integer.valueOf(5) : null).intValue(); 
```

事实上，自动拆箱`null`会导致`NullPointerException`.

> 那么为什么 java-compiler 不获取这样的废话呢？

因为 Java 语言的设计者以这样的方式定义了该语言，使其像这样工作并且没有决定必须将其视为错误......

[Java 语言规范的第 15.25 节](http://docs.oracle.com/javase/specs/jls/se7/html/jls-15.html#jls-15.25)解释了如何确定整个表达式的类型。

# python - 将 numpy 数组及其大小写入二进制文件

> ID：13291118
> 
> 赞同：4
> 
> 时间：2012-11-08T14:38:31.023
> 
> 标签：python, file, numpy, binary, tuples

我需要将 2D numpy 数组写入文件，包括其尺寸，以便我可以从 C++ 程序中读取它并创建相应的数组。

我已经编写了一些简单的代码来保存数组并且可以从 C++ 中读取它，但是如果我尝试先写入数组的大小，它总是会给我一个错误。

这是我的简单python代码：

```
1 file = open("V.bin","wb")
2 file.write(V.shape)
3 file.write(V)
4 file.close() 
```

第二行给出了错误，我也试过：

```
n1, n2 = V.shape
file.write(n1)
file.write(n2) 
```

但它也不起作用。

我正在添加它显示的错误：

Traceback（最近一次调用）：file.write(V.shape[0]) TypeError: must be string or buffer, not int

谢谢！

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-11-08T14:43:20.730

您可以使用以二进制形式保存的[numpy.save()](http://docs.scipy.org/doc/numpy/reference/generated/numpy.save.html)。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-08T14:44:51.443

`numpy.savetext`如果你想将它保存为 ascii， 你可以使用它。

或者（因为看起来您正在处理二进制数据），如果您想保存原始数据流，您可以使用`ndarray.tostring`获取可以直接转储到文件的字节字符串。

这种方法的优点是您可以创建自己的文件格式。缺点是您需要创建一个字符串才能将其实际写入文件。

* * *

既然你说你在第二行得到一个错误，这是一个错误，因为`f.write`需要一个字符串。你试图通过它 a`tuple`或`int`s。你可以`struct.pack`用来解决这个问题：

```
f.write(struct.pack('2i',*array.shape)) 
```

# iphone - 在音频应用程序中使用 Novocaine

> ID：13291119
> 
> 赞同：5
> 
> 时间：2012-11-08T14:38:32.120
> 
> 标签：iphone, objective-c, ios, avaudioplayer

我正在构建一个 iPhone 应用程序，它通过以“caf”格式播放单个录制的吉他音符来生成随机吉他音乐。这些音符的持续时间从 3 秒到 11 秒不等，具体取决于延音量。

我最初使用 AVAudioPlayer 进行播放，在模拟器中以 120 bpm 播放 16 分音符，它唱得很好，但在我的手机上，只要我将速度提高到 60 bpm 以上，只播放 1/4 个音符，它就跑起来像一条狗，不会及时赶上。我的兴高采烈很短暂。

为了减少延迟，我尝试使用 Apple MixerHost 项目作为音频引擎的模板通过 Audio Units 实现播放，但在我将其固定并连接所有内容后，一直出现错误的访问错误。

经过几个小时的努力，我放弃了这种想法，转而使用 Novocaine 音频引擎。

我现在遇到了一堵砖墙，试图将它与我的模型连接起来。

在最基本的层面上，我的模型是一个包含 Note 对象的 NSDictionary 的 Neck 对象。

每个 Note 对象都知道它所在的吉他琴颈的琴弦和音品，并包含自己的 AVAudioPlayer。

我构建了一个半音吉他琴颈，其中包含 122 个音符（6 弦 x 22 品）或 144 个音符（6 弦 x 24 品），具体取决于用户偏好中选择的琴颈尺寸。

我使用这些音符作为我的单一事实点，因此音乐引擎生成的所有标量音符都是指向这个半音音符桶的指针。

```
@interface Note : NSObject <NSCopying>
{
    NSString *name;
    AVAudioPlayer *soundFilePlayer;
    int stringNumber;
    int fretNumber; 
} 
```

我总是从所选音阶的根音符或和弦开始播放，然后生成要播放的音符，所以我总是在生成的音符后面播放一个音符。这样，下一个要播放的音符总是排队等待播放。

这些音符的播放控制是通过以下代码实现的：

```
- (void)runMusicGenerator:(NSNumber *)counter
{
if (self.isRunning) {
    Note *NoteToPlay;
    // pulseRate is the time interval between beats
    // staticNoteLength = 1/4 notes, 1/8th notes, 16th notes, etc.

    float delay = self.pulseRate / [self grabStaticNoteLength];

    // user setting to play single, double or triplet notes. 
    if (self.beatCounter == CONST_BEAT_COUNTER_INIT_VAL) {
        NoteToPlay = [self.GuitarNeck generateNoteToPlayNext];
    } else {
        NoteToPlay = [self.GuitarNeck cloneNote:self.GuitarNeck.NoteToPlayNow];
    }

    self.GuitarNeck.NoteToPlayNow = NoteToPlay;

    [self callOutNoteToPlay];

    [self performSelector:@selector(runDrill:) withObject:NoteToPlay afterDelay:delay];
}

- (Note *)generateNoteToPlayNext
{
    if ((self.musicPaused) || (self.musicStopped)) {
        // grab the root note on the string to resume
        self.NoteToPlayNow = [self grabRootNoteForString];

        //reset the flags
        self.musicPaused = NO;
        self.musicStopped = NO;
    } else {
        // Set NoteRingingOut to NoteToPlayNow
        self.NoteRingingOut = self.NoteToPlayNow;

        // Set NoteToPlaNowy to NoteToPlayNext
        self.NoteToPlayNow = self.NoteToPlayNext;
        if (!self.NoteToPlayNow) {
            self.NoteToPlayNow = [self grabRootNoteForString];

            // now prep the note's audio player for playback
            [self.NoteToPlayNow.soundFilePlayer prepareToPlay];
        }        
    }

    // Load NoteToPlayNext
        self.NoteToPlayNext = [self generateRandomNote];
    }

    - (void)callOutNoteToPlay
    {    
        self.GuitarNeck.NoteToPlayNow.soundFilePlayer.delegate = (id)self;
        [self.GuitarNeck.NoteToPlayNow.soundFilePlayer setVolume:1.0];
        [self.GuitarNeck.NoteToPlayNow.soundFilePlayer setCurrentTime:0];
        [self.GuitarNeck.NoteToPlayNow.soundFilePlayer play];
    } 
```

每个 Note 的 AVAudioPlayer 加载如下：

```
- (AVAudioPlayer *)buildStringNotePlayer:(NSString *)nameOfNote
{
    NSString *soundFileName = @"S";
    soundFileName = [soundFileName stringByAppendingString:[NSString stringWithFormat:@"%d", stringNumber]];
    soundFileName = [soundFileName stringByAppendingString:@"F"];

    if (fretNumber < 10) {
        soundFileName = [soundFileName stringByAppendingString:@"0"];
    }
    soundFileName = [soundFileName stringByAppendingString:[NSString stringWithFormat:@"%d", fretNumber]];

    NSString *soundPath = [[NSBundle mainBundle] pathForResource:soundFileName ofType:@"caf"];
    NSURL *fileURL = [NSURL fileURLWithPath:soundPath];
    AVAudioPlayer *audioPlayer = [[AVAudioPlayer alloc] initWithContentsOfURL:fileURL error:nil];

    return notePlayer;
} 
```

这是我来收割机的地方。

根据 Novocaine Github 页面...

播放音频

```
Novocaine *audioManager = [Novocaine audioManager];
[audioManager setOutputBlock:^(float *audioToPlay, UInt32 numSamples, UInt32 numChannels) {
    // All you have to do is put your audio into "audioToPlay".
}]; 
```

但是在下载的项目中，您使用以下代码来加载音频...

```
// AUDIO FILE READING OHHH YEAHHHH
// ========================================
NSURL *inputFileURL = [[NSBundle mainBundle] URLForResource:@"TLC" withExtension:@"mp3"];

fileReader = [[AudioFileReader alloc]
              initWithAudioFileURL:inputFileURL
              samplingRate:audioManager.samplingRate
              numChannels:audioManager.numOutputChannels];

[fileReader play];
fileReader.currentTime = 30.0;

[audioManager setOutputBlock:^(float *data, UInt32 numFrames, UInt32 numChannels)
{
    [fileReader retrieveFreshAudio:data numFrames:numFrames numChannels:numChannels];
    NSLog(@"Time: %f", fileReader.currentTime);
}]; 
```

这是我真正开始感到困惑的地方，因为第一种方法使用浮点数，而第二种方法使用 URL。

你如何将“caf”文件传递给浮点数？我不知道如何实施 Novocaine - 它在我的脑海中仍然很模糊。

我希望有人可以帮助我的问题如下...

1.  Novocaine 对象是否类似于 AVAudioPlayer 对象，只是更通用并调整到最大以实现最小延迟？即独立的音频播放（/录音/生成）单元？

2.  我可以在我的模型中原样使用 Novocaine 吗？即每个半音音符 1 个 Novocaine 对象，还是我应该有 1 个包含所有半音音符的 novocain 对象？还是我只是将 URL 存储在便笺中并将其传递给 Novocaine 播放器？

3.  当我的音频是“caf”文件并且“audioToPlay”浮动时，如何将音频放入“audioToPlay”？

4.  如果我在 Note.m 中包含并声明了 Novocaine 属性，我是否必须将类重命名为 Note.mm 才能使用 Novocaine 对象？

5.  如何同时演奏多个 Novocaine 对象以重现和弦和音程？

6.  我可以循环播放 Novocaine 对象吗？

7.  我可以设置音符的播放长度吗？即只播放 1 秒的 10 秒音符？

8.  我可以修改上面的代码来使用 Novocaine 吗？

9.  我用于 runMusicGenerator 的方法是否正确，以保持符合专业标准的节奏？

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-12-26T23:10:17.830

Novocaine 无需手动设置 RemoteIO AudioUnit，让您的生活更轻松。这包括必须痛苦地填充一堆 CoreAudio 结构并提供一堆回调，例如这个音频处理回调。

`static OSStatus PerformThru(void *inRefCon, AudioUnitRenderActionFlags *ioActionFlags, const AudioTimeStamp *inTimeStamp, UInt32 inBusNumber, UInt32 inNumberFrames, AudioBufferList *ioData);`

相反，Novocaine 在其实现中处理它，然后调用您通过这样做设置的块。

`[audioManager setOutputBlock: ^(float *audioToPlay, UInt32 numSamples, UInt32 numChannels){} ];`

无论你写什么`audioToPlay`都会被播放。

1.  Novocaine 为您设置 RemoteIO AudioUnit。这是一个低级的 CoreAudio API，与高级的 AVFoundation 不同，并且延迟非常低。你说得对，Novocaine 是独立的。您可以实时录制、生成和处理音频。

2.  Novocaine 是一个单例，您不能拥有多个 Novocaine 实例。一种方法是将您的吉他声音/声音存储在单独的类或数组中，然后编写一堆方法，使用 Novocaine 来播放它们。

3.  你有很多选择。您可以使用 Novocaine 的 AudioFileReader 为您播放 .caf 文件。按照示例代码，您可以通过分配 AudioFileReader 然后传递您要播放的 .caf 文件的 URL 来执行此操作。`[fileReader retrieveFreshAudio:data numFrames:numFrames numChannels:numChannels]`然后，按照示例代码，你坚持你的块。每次调用您的块时，AudioFileReader 都会从磁盘中抓取并缓冲一大块音频，并将其放入`audioToPlay`随后播放的音频中。这有一些缺点。对于简短的声音（例如我假设的吉他声音）重复调用`retrieveFreshAudio`是一个性能打击。将整个文件同步、顺序读取到内存中通常是一个更好的主意（对于简短的声音）。Novocaine 还没有提供这样做的方法。您必须使用 ExtAudioFileServices 来执行此操作。Apple 示例项目 MixerHost 详细说明了如何执行此操作。

4.  如果您使用的是 AudioFileReader 是的。`#import`仅当您从 Obj-C++ 头文件或C++ 头文件中重命名为 .mm 时`#include`。

5.  如前所述，只允许 1 个 Novocaine 实例。您可以通过混合多个音频源来实现复音。这只是将缓冲区添加在一起。如果您以不同的音高制作了同一吉他声音的多个版本，只需将它们全部读入记忆中，然后混音即可。如果您只想拥有一种吉他声音，那么您必须实时更改您正在演奏的许多音符的播放速率，然后进行混音。

6.  Novocaine 与您实际演奏的内容无关，也不关心您演奏样本的时间。为了循环声音，您必须保持对已经过去的样本数进行计数，检查您是否处于声音的末尾，然后将该计数设置回 0。

7.  是的。假设 44.1k 采样率，1 秒的音频 = 44100 个样本。然后，当它达到 44100 时，您将重置您的计数。

8.  是的。它看起来像这样。假设您有 4 个单声道且长度超过 1 秒的吉他声音，并且您已将它们读入内存`float *guitarC`, `*guitarE`, `*guitarG`, `*guitarB;`(jazzy CMaj7 chord w00t)，并希望将它们混合 1 秒并以单声道循环播放：

> ```
> [audioManager setOutputBlock:^(float *data, UInt32 numFrames, UInt32 numChannels){
>     static int count = 0;
>     for(int i=0; i<numFrames; ++i){
>         //Mono mix each sample of each sound together. Since result can be 4x louder, divide the total amp by 4\. 
>         //You should be using `vDSP_vadd` from the accelerate framework for added performance.
>         data[count] = (guitarC[count] + guitarE[count] + guitarG[count] + guitarB[count]) * 0.25;
>         if(++count >= 44100) count = 0;    //Plays the mix for 1 sec
>     }
> }]; 
> ```

1.  不完全是。`performSelector`不能保证在 runloop 或线程上使用或调度的任何机制是精确的。例如，当 CPU 负载波动时，您可能会遇到时序不规则。如果您想要采样准确的时序，请使用音频块。

# git - git-svn 创建名称中带有“@”（at 符号）的重复标签

> ID：13291121
> 
> 赞同：2
> 
> 时间：2012-11-08T14:38:33.913
> 
> 标签：git, svn, tags, git-svn

> **可能重复：**
> [git-svn clone | 虚假分支](https://stackoverflow.com/questions/11356901/git-svn-clone-spurious-branches)

克隆 SVN 存储库时，`git svn`创建有趣的标签：对于 SVN 存储库中的许多（但不是全部）标签，会创建两个 git 标签，一个带有 at 符号。例如：

*   发布-1.0
*   发布-1.0@1523
*   发布-1.1
*   发布-1.1@1783

等等

每个标签的数字都不同，但显然它是创建标签时的 SVN 修订版，减 1。

有趣的是，创建的标签指向不同的提交对象，但两个提交对象具有相同的树（即标签包含相同的文件）。

这很烦人，因为 a) 它弄乱了标签列表，b) 它在 Eclipse 中使 EGit 崩溃（看起来[JGit/EGit 在分支删除/创建时崩溃](https://stackoverflow.com/questions/12727333/jgit-egit-crashing-on-branch-deletion-creation)是同样的问题）。

我在 git-svn 文档或谷歌搜索中没有找到任何关于此的信息。知道这些标签来自哪里，以及如何避免它们吗？

* * *

更多信息： git-svn 输出中的每个有趣标签都有有趣的日志条目（经过一些处理）：

```
Found possible branch point: [...]
Initializing parent: refs/remotes/tags/release-1.0@1523
W: Ignoring error from SVN, path probably does not exist: (160013): 
Filesystem has no item: File not found: revision 101, path [...] 
```

# facebook - 未经许可发布测验结果？

> ID：13291127
> 
> 赞同：0
> 
> 时间：2012-11-08T14:38:59.210
> 
> 标签：facebook, facebook-wall

我在 Facebook 上做了一个应用程序，它就像一个小测验。您只需要回答 4 个问题，然后您就会得到三个可能的结果之一。

现在我想要一个按钮，人们可以在其中发布他们的结果，但我不想在应用程序开始时出现一个人们必须同意某事的弹出窗口。

我不想自动在用户墙上发布一些东西——只要他们点击按钮，他们就会得到另一个 Facebook 弹出窗口，他们可以在其中决定是否要将模板发布在他们自己的墙上......

是否可以 ？如果是……怎么办？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-08T16:51:04.673

是的，您可以使用 Feed 对话框执行此操作。[查看https://developers.facebook.com/docs/reference/dialogs/feed/](https://developers.facebook.com/docs/reference/dialogs/feed/)上的直接 URL 示例，并将链接附加到应用程序中的按钮。

# asp.net-mvc - 使用 mvc 使用数据库中的数据的 highcharts 示例

> ID：13291129
> 
> 赞同：1
> 
> 时间：2012-11-08T14:38:56.303
> 
> 标签：asp.net-mvc, highcharts

有没有人有一个使用 DotNet.Highcarts 用 MS SQL DB 中的数据填充 Highchart 的简单示例？

我有使用静态数据的演示

```
Highcharts chart = new Highcharts("chart")
        .SetCredits(new Credits { Enabled = false })
        .InitChart(new Chart { DefaultSeriesType = ChartTypes.Column })
        .SetTitle(new Title { Text = "Membership Overview" })
        .SetXAxis(new XAxis { Categories = new[] { "Paid Members", "Active Members", "Retained Members", "New Members", "Lapsed Members" } })
        .SetYAxis(new YAxis
        {
            Min = 0,
            Title = new YAxisTitle { Text = "Total Members" }
        })
        .SetTooltip(new Tooltip { Formatter = "function() { return ''+ this.series.name +': '+ this.y +''; }" })
        .SetPlotOptions(new PlotOptions { Bar = new PlotOptionsBar { Stacking = Stackings.Normal } })
        .SetSeries(new[]
                   {
                       new Series { Name = "Total", Data = new Data(new object[] { 441, 441, 22, 30, 610 }) }
                    }); 
```

如何更改系列以接受来自我的数据库的数据？

假设我需要像这样连接到数据库：

```
var newcustomer = db.Customer; 
```

然后做这样的事情：

```
new Series
{
    Name = "Total",
    Data = new Data(newcustomer.Select(x => ............ 
```

任何帮助，将不胜感激！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-12T17:34:32.910

对于其他有类似问题的人...

```
var paidmembers = (from c in db.Customer
                   where c.CustomerStatusID == 1
                   select c).Count();

var activemembers = (from c in db.Customer
                     where c.CustomerStatusID == 2
                     select c).Count();

new Series {
            Name = "Category",
            Data = new Data(new object[] {paidmembers, activemembers})
} 
```

# flash - Safari 和 Mountain Lion (OSX 10.8) 的 Flash Builder 4.5 调试器超时

> ID：13291130
> 
> 赞同：2
> 
> 时间：2012-11-08T14:39:00.593
> 
> 标签：flash, debugging, safari, flash-builder

我知道以前版本的 MacOS 有一个修复程序，Mountain Lion 有什么东西吗？

[Flash Builder 4.5 调试器终止| 苹果浏览器](https://stackoverflow.com/questions/7478465/flash-builder-4-5-debugger-terminates-safari)

Safari 的答案就在那里：对于 Safari - 使用 SafariNoTimeout （来自[http://www.unsanity.com](http://www.unsanity.com)） - 不在 OSX 10.8 上运行

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-30T03:52:20.313

好的，所以我看到了关于 Webkit nightly build 以及如何关闭超时的参考。所以，我想……嗯 Safari……Webkit……我尝试了同样的方法。没用。所以时间流逝......没有答案......和你说话，不理智说nada......所以我一时兴起又试了一次。

它工作它工作它工作它工作

打开控制台并输入：

默认写入 com.apple.Safari WebKitDisablePluginProcessMessageTimeout YES

# java - 如何有条件地隐藏 ah:outputLink？

> ID：13291132
> 
> 赞同：0
> 
> 时间：2012-11-08T14:39:13.610
> 
> 标签：java, jsf, jakarta-ee

如何隐藏`h:ouputLink`基于支持 bean 中的布尔值？

为了禁用我会这样：

```
<h:commandButton disabled="#{backing.property}" /> 
```

但是我怎么能完全隐藏呢？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-08T14:45:17.370

和：

```
<h:commandButton id="myComponent" rendered="#{backing.property}" /> 
```

对不起，我的错。您正在搜索 h:outputLink。因为*h:outputLink*和*h:commandButton*都派生自[UIComponentBase](http://docs.oracle.com/javaee/6/api/javax/faces/component/UIComponentBase.html#isRendered%28%29)，所以这两个派生类都有该方法`isRendered()`，您不需要将 commandLink 包装在某种面板中。

```
<h:outputLink rendered="#{backing.property}" /> 
```

**更新**

*myComponent*将被“隐藏”，因为它不会被渲染。不**渲染** *myComponent*意味着您需要对*myComponent*周围的 UIComponent 进行更新（例如使用 ajax 请求） ，如下所示：

```
<h:panelGrid id="myPanelGrid">
  ....
  <h:outputLink id="myComponent" rendered="#{backing.property}" />
  ....
<h:panelGrid>

<h:commandButton value="show" action="#{backing.setPropertyToTrueMethod}" update="myPanelGrid" /> 
```

有关 API 规范，请参阅：[JavaTM 平台，企业版 6 API 规范](http://docs.oracle.com/javaee/6/api/)

# amazon-web-services - 在短时间内启动 AWS 实例

> ID：13291134
> 
> 赞同：1
> 
> 时间：2012-11-08T14:39:15.973
> 
> 标签：amazon-web-services

我需要 AWS 实例，但只需要很短的时间，例如每 20 分钟 1 分钟。这意味着，启动一个实例，做一些工作几分钟，然后关闭 20 分钟。

AWS 是否会收取额外费用或限制遵循此行为的账户？

来自 AWS 页面的报价：定价是每个实例消耗的每个实例小时，从实例启动到终止。消耗的每个部分实例小时将按整小时计费。

这是否意味着每 2 分钟的会话将按一小时计费？我猜不是，但我不能确定。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-08T15:06:51.570

每次您运行或启动一个实例时，您都需要为至少一小时的运行时间付费（如果您让它运行超过 60 分钟，显然会更多）。

每小时启动和停止实例 3 次，而不是让实例全时运行，您需要支付三倍的费用。

这是我在 2010 年进行的一个实验，展示了这种计费怪癖：

*   [EBS 启动实例停止+启动在 EC2 上开始新的一小时收费](http://alestic.com/2010/10/ec2-stop-start)

# ios - 在 uiwebview 中关闭 PDF 时崩溃

> ID：13291139
> 
> 赞同：0
> 
> 时间：2012-11-08T14:39:26.987
> 
> 标签：ios, uiwebview, uiwebviewdelegate

我从按钮 hulp 打开 PDF

这是代码：

```
-(IBAction)hulp;
{
NSString *path = [[NSBundle mainBundle] pathForResource:@"Handleiding" ofType:@"pdf"];
NSURL *targetURL = [NSURL fileURLWithPath:path];
NSURLRequest *request = [NSURLRequest requestWithURL:targetURL];
UIWebView *webView = [[UIWebView alloc] initWithFrame:CGRectMake(0, 0, 320, 480)];
webView.tag=55;
[[webView scrollView] setContentOffset:CGPointMake(0,500) animated:YES];
[webView stringByEvaluatingJavaScriptFromString:[NSString stringWithFormat:@"window.scrollTo(0.0, 50.0)"]];
[webView loadRequest:request];
[self.view addSubview:webView];
[webView release];

UIButton *button = [UIButton buttonWithType:UIButtonTypeRoundedRect];
[button addTarget:self
           action:@selector(aMethod:)
 forControlEvents:UIControlEventTouchDown];
[button setTitle:@"Close" forState:UIControlStateNormal];
button.frame = CGRectMake(80, 425, 160, 40);
[button addTarget:self action:@selector(close:) forControlEvents:UIControlEventTouchUpInside];
[webView addSubview:button];

}

- (IBAction)close:(id)sender {

[[self.view viewWithTag:55] removeFromSuperview];

} 
```

有谁看到我做错了什么：

```
 *** Terminating app due to uncaught exception 'NSInvalidArgumentException', reason: '-[LocationTestViewController aMethod:]: unrecognized selector sent to instance 0x8087c60'
  *** First throw call stack:
 (0x1f26012 0x15e8e7e 0x1fb14bd 0x1f15bbc 0x1f1594e 0x15fc705 0x38c920 0x38c8b8 0x44d671 0x44dbcf 0x44c872 0x3bc16d 0x3bc552 0x39a3aa 0x38bcf8 0x22badf9 0x22baad0 0x1e9bbf5 0x1e9b962 0x1eccbb6 0x1ecbf44 0x1ecbe1b 0x22b97e3 0x22b9668 0x38965c 0x244d 0x2385)
  libc++abi.dylib: terminate called throwing an exception
 (lldb) 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-08T14:50:25.623

该指令的用途是：

```
[button addTarget:self
           action:@selector(aMethod:)
 forControlEvents:UIControlEventTouchDown]; 
```

去掉它。

# java - Java/Android：用于索引的 SQLite 或文件？

> ID：13291140
> 
> 赞同：1
> 
> 时间：2012-11-08T14:39:36.990
> 
> 标签：java, android, sqlite, indexing

我的 Android 应用程序需要扫描目录中的文件并将它们全部写入一个 ArrayList。对于 1273 个文件，该算法目前需要大约 630 毫秒。由于文件数量很可能会增加（达到 3500 及以上），因此我需要提高性能。

所以我在考虑索引。在我把时间浪费在低效的代码上之前：为文件编写索引类是否值得付出努力和时间？如果是这样，使用 SQLite 或默认的 *.whatever-File 会更快吗？

提前致谢。

问候

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-08T15:38:25.313

请参阅[http://www.sqlite.org/optoverview.html](http://www.sqlite.org/optoverview.html)上的索引部分。

如果需要，请尝试从另一个线程进行延迟加载。

# google-app-engine - GWT 上传照片

> ID：13291141
> 
> 赞同：1
> 
> 时间：2012-11-08T14:39:39.483
> 
> 标签：google-app-engine, gwt, uibinder

我正在使用 Google App Engine (1.7) 将我的实体存储在 Datastore 和 GWT 2.4 上来构建界面。一些实体有一个图像字段，因此用户在提交新实体（例如“产品”）时可以上传她的一张（产品的）图像。

所以我的问题是如何创建一个上传字段，当用户单击一个元素时，浏览窗口将出现在该字段中，并且在上传过程之后，该图像的缩略图将出现在该元素中！

有什么建议么？？？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-09T11:26:52.337

“GWT Upload”是我找到的最佳选择。我在 GAE 之外（在我自己的应用程序服务器中）使用过它，但我认为它也支持 GAE。基本上要让它工作，您需要将“GWT Upload control”放到您的页面上，编写服务器端上传器（扩展提供的一个）添加一些行到 web.xml，就是这样。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-08T19:05:20.863

看看这个教程。我认为它完全符合您的需求： [GWT、Blobstore、新的高性能图像服务 API](http://ikaisays.com/2010/09/08/gwt-blobstore-the-new-high-performance-image-serving-api-and-cute-dogs-on-office-chairs/)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-08T15:44:34.500

查看 GWT FileUpload 组件。

# c - 如何在C中对包含“％”的字符串执行strcmp？

> ID：13291142
> 
> 赞同：2
> 
> 时间：2012-11-08T14:39:44.613
> 
> 标签：c, linux, unix

我有一个解析配置文件的 C 程序。配置文件允许格式中的一些通配符 `option=%any`。

问题是当我使用 strcmp 比较值时，我得到一个非法指令错误。

示例程序来说明这一点：

```
char str1[10];
sprintf(str1,"%any");

if(strcmp(str1,"%any") == 0) 
        printf("match\n");

return 0; 
```

输出：

```
$ ./a.out
Illegal instruction 
```

printf 也会引发此错误。

用 printf("%s\n",str1);

输出是：

```
$ ./a.out
0x0.07fff00000001p-1022ny
Illegal instruction 
```

我尝试转义，即在 sprintf 中使用“\%any”而不是“%any”；但这无济于事。

在 C++ 中，使用 std::string == 比较，使用 cout 打印似乎工作正常。

有人可以帮我找出如何用 C 来做到这一点。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-11-08T14:40:59.270

它来自`sprintf`.

```
#include <stdio.h>

sprintf(str1, "%%any"); 
```

正如*Paul R.*所说，您可以使用而`strcpy`不必担心这些格式。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-08T15:05:40.280

在这种情况下，您可能应该编写以下内容之一：

```
char str1[10] = "%any";
char str1[] = "%any"; // str1 has size 5
const char *str1 = "%any"; // str1 points to a string literal 
```

`%a`在格式化字符串中是十六进制浮点格式。除了您没有提供`double`参数（导致未定义的行为）这一事实之外，这可能会写入超过 10 个字节并因此超出您的缓冲区`str1`（导致未定义的行为）。

这就是为什么您会看到`0x0.07fff00000001p-1022ny`，它是一个十六进制浮点值`0x0.07fff00000001p-1022`，后跟`ny`. 您得到的非法指令错误可能是因为您破坏了存储在堆栈中的返回地址，因此当您的函数返回时，它会跳转到无效地址。

根据经验，如果您使用其中一个`printf`函数并且没有在格式字符串后指定至少一个可变参数，那么您很有可能做错了什么。`f`in的含义`printf`是该函数进行*格式化*，但是当您没有任何要格式化的内容时，您正在使用它。所以它只是一个字符串副本，有额外的机会出错。

如果您想使用`printf`函数系列中的一个来编写字符串，那么您可以避免意外指定您不希望这样的格式：

```
sprintf(str1, "%s", SOME_STRING); 
```

或利用长度检查：

```
#define STR1_SIZE 10
char str1[STR1_SIZE];

if (snprintf(str1, STR1_SIZE, "%s", SOME_STRING) >= STR1_SIZE) {
    // error-handling here
} 
```

如果您以某种方式知道它`SOME_STRING`适合您的缓冲区，那么您可以省略错误处理和/或`strcpy`改用。但是当你这样做并且弄错长度时，你看起来很愚蠢。

您还可以使用数组（因为它在这里）而不是指针（因为它在大多数字符串处理代码中）`sizeof(str1)`来代替`STR1_SIZE`提供的。`str1`

> 我尝试转义，即在 sprintf 中使用“\%any”而不是“%any”；但这无济于事。

不错的尝试，没有雪茄 ;-)

反斜杠用于转义*字符串文字中的*特殊字符。由于`%`在字符串文字中没有任何特殊含义，因此转义它没有任何效果。结果字符串是五个字符`%`, `a`, `n`, `y`, `\0`。

稍后您将该字符串传递给`sprintf`. *现在*具有`%`特殊含义，并且有不同的转义方式：`%%`.

# php - PHP 重构数组 Paypal TransactionSearch 函数

> ID：13291145
> 
> 赞同：1
> 
> 时间：2012-11-08T14:39:49.423
> 
> 标签：php, arrays, paypal

我正在调用 Paypals API TransactionSearch，我正在取回一组平面数据。我需要重建这个数组。这是我从贝宝得到的结构：

```
 array(36){
[
    "L_TIMESTAMP0"
]=>string(28)"2012%2d09%2d18T22%3a10%3a13Z"[
    "L_TIMESTAMP1"
]=>string(28)"2012%2d09%2d18T19%3a55%3a41Z"[
    "L_TIMESTAMP2"
]=>string(28)"2012%2d09%2d18T19%3a55%3a41Z"[
    "L_TIMEZONE0"
]=>string(3)"GMT"[
    "L_TIMEZONE1"
]=>string(3)"GMT"[
    "L_TIMEZONE2"
]=>string(3)"GMT"[
    "L_TYPE0"
]=>string(7)"Payment"[
    "L_TYPE1"
]=>string(7)"Payment"[
    "L_TYPE2"
]=>string(7)"Payment"[
    "L_EMAIL0"
]=>string(26)"XXXXX%40hotmail%2ecom"[
    "L_EMAIL1"
]=>string(31)"XXXX%40lvcoxmail%2ecom"[
    "L_EMAIL2"
]=>string(23)"XXXXt%2ecom"[
    "L_TRANSACTIONID0"
]=>string(17)"13E586955G649992Y"[
    "L_TRANSACTIONID1"
]=>string(17)"8LH96897T3119113R"[
    "L_TRANSACTIONID2"
]=>string(17)"87U867057E085230E"[
    "L_STATUS0"
]=>string(9)"Completed"[
    "L_STATUS1"
]=>string(9)"Completed"[
    "L_STATUS2"
]=>string(9)"Completed"[
    "L_AMT0"
]=>string(7)"85%2e00"[
    "L_AMT1"
]=>string(7)"85%2e00"[
    "L_AMT2"
]=>string(7)"85%2e00"[
    "L_CURRENCYCODE0"
]=>string(3)"USD"[
    "L_CURRENCYCODE1"
]=>string(3)"USD"[
    "L_CURRENCYCODE2"
]=>string(3)"USD"[
    "L_FEEAMT0"
]=>string(9)"%2d2%2e17"[
    "L_FEEAMT1"
]=>string(9)"%2d2%2e17"[
    "L_FEEAMT2"
]=>string(9)"%2d2%2e17"[
    "L_NETAMT0"
]=>string(7)"82%2e83"[
    "L_NETAMT1"
]=>string(7)"82%2e83"[
    "L_NETAMT2"
]=>string(7)"82%2e83"[
    "TIMESTAMP"
]=>string(28)"2012%2d11%2d08T14%3a24%3a30Z"[
    "CORRELATIONID"
]=>string(13)"52c22d68648cd"[
    "ACK"
]=>string(7)"Success"[
    "VERSION"
]=>string(6)"51%2e0"[
    "BUILD"
]=>string(7)"4137385" 
```

}

我需要将数组重置为以下内容： ["L_STATUSn"]=>string(9)"Completed" ["L_TRANSACTIONIDn"]=>string(17)"8LH96897T3119113R"

'n' 是数字，是贝宝返回的数组键号。

这是我正在使用的代码，它很糟糕。

```
 $i = 0;
    $c = 0;
    foreach ($comparison AS $aKey => $v) {
        $findme1 = 'L_TIMESTAMP'.$i++;
        $findme2 = 'L_STATUS'.$c++;
        $txid = $myarray[$findme1];
        $status = $myarray[$findme2];
        $TXid = array_search('$findme1', $aKey);
        $Status = array_search('$findme2', $aKey);
        $TxID[] = array('Status' => $aStatus, 'TransactionID' => $aTransactionID);
        } 
```

感谢更好的方法来重建这个数组，我尝试使用的方法似乎不太有效。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-05-22T13:03:53.673

有点晚了，但也许其他人也有这个要求。所以这里是：

```
function process_response($str)
{
    $data = array();
    $x = explode("&", $str);

    foreach($x as $val)
    {
        $y = explode("=", $val);

        preg_match_all('/^([^\d]+)(\d+)/', $y[0], $match);

        if (isset($match[1][0]))
        {
            $text = $match[1][0];
            $num = $match[2][0];

            $data[$num][$text] = urldecode($y[1]);
        }
        else
        {
            $text = $y[0];
//          $data[$text] = urldecode($y[1]);
        }
    }

    return $data;
} 
```

只需将 curl 调用的结果输入其中，并将结果作为格式化数组。

注意注释掉的行，有一些字段是全局的，例如版本，如果你想要这些，取消注释，但是你可能需要在下游调整一些格式代码。

如果你想把它输入 PHPExcel 对象，你可以这样做：

```
 $index = 1;
    foreach($data as $row)
    {
        $objPHPExcel->setActiveSheetIndex(0)
            ->setCellValue('A'.$index, $row['L_TIMESTAMP'])
            ->setCellValue('B'.$index, $row['L_TIMEZONE'])
            ->setCellValue('C'.$index, $row['L_TYPE'])
            ->setCellValue('D'.$index, $row['L_EMAIL'])
            ->setCellValue('E'.$index, $row['L_NAME'])
            ->setCellValue('F'.$index, $row['L_TRANSACTIONID'])
            ->setCellValue('G'.$index, $row['L_STATUS'])
            ->setCellValue('H'.$index, $row['L_AMT'])
            ->setCellValue('I'.$index, $row['L_CURRENCYCODE'])
            ->setCellValue('J'.$index, $row['L_FEEAMT'])
            ->setCellValue('K'.$index, $row['L_NETAMT']);
        $index++;
    } 
```

# php - 按输入字段将mysql获取的结果显示到按行组织的表中？

> ID：13291147
> 
> 赞同：0
> 
> 时间：2012-11-08T14:40:04.403
> 
> 标签：php, html, mysql

我有一个名为 mysql 的表`product`，其结构如下：

```
CREATE TABLE product (
    id int(6) unsigned NOT NULL auto_increment,
    name varchar(100) NOT NULL default '',
    image varchar(255) NOT NULL default '',
    link varchar(255) NOT NULL default '',
    price decimal(3,2) NOT NULL default '0.00',
    PRIMARY KEY (id)
); 
```

我想将检索到的结果可视`{product1,...,product5}`化为一个 3 列的 html/php 表，该表还具有以下结构：

```
<table border="1" cellpadding="2" cellspacing="2" width="100%">
    <tr>
       <td>product1.image</td>   <td>product2.image</td>   <td>product3.image</td>
    </tr>
    <tr>
       <td>product1.name</td>    <td>product2.name</td>    <td>product3.name</td>
    </tr>
    <tr>
       <td>product1.link</td>    <td>product2.link</td>    <td>product3.link</td>
    </tr>

    <tr> 
         <td colspan="3">&nbsp;</td>
    </tr>

    <tr>
       <td>product4.image</td>   <td>product5.image</td>  <td>&nbsp;</td>
    </tr>
    <tr>
        <td>product4.name</td>   <td>product5.name</td>  <td>&nbsp;</td>
    </tr>
    <tr>
        <td>product4.link</td>   <td>product5.link</td>  <td>&nbsp;</td>
    </tr>
</table> 
```

请注意，给定条目的字段（例如`product1.{image,description,link}`）显示在不同的行中。下面的代码说明了如何显示某些产品的图像。

```
$table = 'product';
$result = mysql_query("SELECT id, image, description, link FROM {$table}");
if (!$result) {
    die("Query to show fields from table failed");
}

$fields_num = mysql_num_fields($result);

echo "<h1>Table: {$table}</h1>";
echo "<table border='1' cellpadding='2' cellspacing='2' width='100%'><tr>";
// printing table headers
for($i=0; $i<$fields_num; $i++)
{
    $field = mysql_fetch_field($result);
    echo "<td> <img src="$field->image" border="0"></td>";

    if($i%3==0){echo"</tr><tr>";}
}
echo "</tr></table>"; 
```

任何建议表示赞赏！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-08T16:20:27.347

所以你想要一个 html 结构，它总是显示三个产品并排显示，并且每个产品都将图像放在链接上方的描述之上。

...而且我不会为此使用桌子。

我假设您知道如何[从数据库中获取数据](http://www.w3schools.com/php/php_mysql_select.asp)。您可以根据需要循环遍历结果表和显示：

```
$counter = 1;
while ($row = mysql_fetch_array($result, MYSQL_ASSOC)) {
    echo "<span><div>".$row["image"]."</div><div>".$row["description"]."</div><div>".$row["link"]."</div></span>;
    $counter += 1;
    if($counter % 3 = 0)
    {
        echo "</br>
    }
} 
```

这为您提供了一组彼此相邻的 3 个元素，其中包含彼此上方的 3 个 div 元素，每个元素都包含有关您的产品的详细信息。

下面是使用环绕表的代码：

```
echo "<h1>Table: {$table}</h1>";
echo "<table border='1' cellpadding='2' cellspacing='2' width='100%'><tr>";
$counter = 1;
while ($row = mysql_fetch_array($result, MYSQL_ASSOC)) {
    echo "<td><div>".$row["image"]."</div><div>".$row["description"]."</div><div>".$row["link"]."</div></td>;
    $counter += 1;
    if($counter % 3 = 0)
    {
        $echo "</tr><tr>";
    }
}
echo "</tr></table>"; 
```

...这是您在问题中要求的：

```
echo "<h1>Table: {$table}</h1>";
echo "<table border='1' cellpadding='2' cellspacing='2' width='100%'>";
$counter = 1;
$htmlHolder1 = "<tr>";
$htmlHolder2 = "<tr>";
$htmlHolder3 = "<tr>";
while ($row = mysql_fetch_array($result, MYSQL_ASSOC)) {
    $htmlHolder1 .= "<td>".$row["image"]."</td>";
    $htmlHolder2 .= "<td>".$row["description"]."</td>";
    $htmlHolder3 .= "<td>".$row["link"]."</td>";
    $counter += 1;
    if($counter % 3 = 0)
    {
        echo $htmlHolder1."</tr>";
        echo $htmlHolder2."</tr>";
        echo $htmlHolder3."</tr>";

        $htmlHolder1 = "<tr>";
        $htmlHolder2 = "<tr>";
        $htmlHolder3 = "<tr>";
    }
}
if($counter % 3 != 0)
{
    echo $htmlHolder1."</tr>";
    echo $htmlHolder2."</tr>";
    echo $htmlHolder3."</tr>";
}
echo "</table>"; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-08T14:58:19.763

一个循环来构建单元格，边走边计算每个单元格，然后每隔 XX（使用您的示例的第三个）关闭该行并打开一个新行。

不确定您是否需要更多，但这是基础。

# html - 为什么我在锚标签中出现小破折号？

> ID：13291150
> 
> 赞同：12
> 
> 时间：2012-11-08T14:40:24.977
> 
> 标签：html, anchor, image

```
<a href="service.html">
<img width="175" height="40" style="margin-left:20px; margin-top:10px; margin-bottom:10px;" src="image/Sea Freight.png"/>
</a>  &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
<a href="airfreight.html" >
<img width="175" height="40" style="margin-left:20px; margin-top:10px; margin-bottom:10px;" src="image/Air Freight.png">
</a>  &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
<a href="projectcargo.html">
<img width="175" height="40" style="margin-left:20px; margin-top:10px; margin-bottom:10px;" src="image/Project Cargo.png">
</a>
<br/>
<a href="customclearance.html" >
<img width="175" height="40" style="margin-left:20px; margin-top:10px; margin-bottom:10px;" src="image/Custom Clearance.png">
</a>   &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
<a href="transportation.html" >
<img width="175" height="40" style="margin-left:20px; margin-top:10px; margin-bottom:10px;" src="image/Domestic Transportation.png">
</a>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
<a href="thirdparty.html" >
<img width="175" height="40" style="margin-left:20px; margin-top:10px; margin-bottom:10px;" src="image/Warehousing and Distribution.png">
</a>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
</br>
<a href="coastalcargo.html" >
<img width="175" height="40" style="margin-left:20px; margin-top:10px; margin-bottom:10px;" src="image/Coastal Cargo.png">
</a>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
<a href="veseelchartering.html" >
<img width="175" height="40" style="margin-left:20px; margin-top:10px; margin-bottom:10px;" src="image/Vessel Chertring.png">
</a>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
</br> 
```

我通过在锚点中使用 img 标签来创建按钮。为什么我在右角得到小破折号？？

提前致谢

* * *

## 回答 #1

> 赞同：28
> 
> 时间：2012-11-08T14:50:07.303

有一个`text-decoration:underline`与锚`<a>`标记关联的默认值。由于 中有一个空格`<a> </a>`，所以下划线就是你看到的那条线。

使用`text-decoration:none`on `<a>`，应该可以解决。

```
a {
    text-decoration: none;
} 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2015-02-21T19:05:22.393

这似乎发生在以下情况：

*   结束锚标记与元素的其余部分位于不同的行上
*   并且锚的可见文本是图像
*   并且您在同一行上有多个图像
*   而且锚点/图像不是水平系列中的最后一项

    在以下示例中，您不会在第三张和第五张图像之后看到破折号，但其他图像将在图像/链接的右侧显示破折号：

```
<p>
	<a href="#">
	<img src="image.jpg" alt="Test 1" />
	</a>

	<a href="#"><img src="image.jpg" alt="Test 2" />
	</a>

	<a href="#">
	<img src="image.jpg" alt="Test 3" /></a>

	<a href="#"><img src="image.jpg" alt="Test 4" />
	</a>

	<a href="#"><img src="image.jpg" alt="Test 5" />
	</a>
</p>
```

我找不到任何信息来说明这是否违反了关于跨多行拆分元素的 HTML 规则。我在 Chrome、Firefox 和 IE 11 中复制了同样的问题。

我只能猜测在图像之后添加了一个空格，因为结束标记位于单独的行上。这与上面给出的答案有关 - 空间正在自动设置下划线样式。但我不知道为什么在图像之后而不是在文本之后添加空格，或者为什么这只发生在图像在同一行时。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2016-10-06T20:53:08.657

`<a>`是一个内联元素。如果您在封闭的元素和`</a>`元素之间留有空格，它将自动格式化，并带有下划线。

# express - 匹配和验证来自 socket.io 连接的 Express 3/Connect 2 会话密钥

> ID：13291151
> 
> 赞同：2
> 
> 时间：2012-11-08T14:40:28.600
> 
> 标签：express, socket.io

我在 Express 3 [http://notjustburritos.tumblr.com/post/22682186189/socket-io-and-express-3](http://notjustburritos.tumblr.com/post/22682186189/socket-io-and-express-3)

这个想法是让我从 socket.io 连接回调中获取会话对象，`connect-redis`在这种情况下通过存储会话。

所以，在`app.configure`我们有

```
var db = require('connect-redis')(express)
....
app.configure(function(){
     ....
     app.use(express.cookieParser(SITE_SECRET));                                                                                                      
     app.use(express.session({ store: new db })); 
```

在应用程序代码中有

```
var redis_client = require('redis').createClient()

 io.set('authorization', function(data, accept) {
     if (!data.headers.cookie) {
         return accept('Sesssion cookie required.', false)
     }

     data.cookie = require('cookie').parse(data.headers.cookie);
     /* verify the signature of the session cookie. */
     //data.cookie = require('cookie').parse(data.cookie, SITE_SECRET);
     data.sessionID = data.cookie['connect.sid']

     redis_client.get(data.sessionID, function(err, session) {
         if (err) {
             return accept('Error in session store.', false)
         } else if (!session) {
             return accept('Session not found.', false)
         }
         // success! we're authenticated with a known session.
         data.session = session
         return accept(null, true)
     })
 }) 
```

会话正在保存到 redis，键如下所示：

```
redis 127.0.0.1:6379> KEYS *
1) "sess:lpeNPnHmQ2f442rE87Y6X28C"
2) "sess:qsWvzubzparNHNoPyNN/CdVw" 
```

并且这些值是未加密的 JSON。到现在为止还挺好。

但是，cookie 标头包含类似

```
{ 'connect.sid': 's:lpeNPnHmQ2f442rE87Y6X28C.obCv2x2NT05ieqkmzHnE0VZKDNnqGkcxeQAEVoeoeiU' } 
```

所以现在 SessionStore 和`connect.sid`不匹配，因为签名部分（在 之后`.`）从 SessionStore 版本中剥离。

问题是，仅截断 cookie 的 SID 部分（lpeNPnHmQ2f442rE87Y6X28C）并基于此进行匹配是否安全，或者是否应该验证签名部分？如果是这样，怎么做？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-08T18:38:27.643

而不是使用私有方法和 Connect 的内部结构，这不应该以这种方式使用，这个 NPM 很好地包装`socket.on`了一个拉入会话的方法，并解析和验证 [https://github.com /functioncallback/session.socket.io](https://github.com/functioncallback/session.socket.io)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-08T08:31:16.463

只需按照 Connect 的 utils.js 中的注释行的建议使用 cookie-signature 模块。

var cookie = require('cookie-signature');

//假设您已经将来自客户端的会话 ID 放在名为“sid”的 var 中

```
var sid = cookies['connect.sid'];
sid = cookie.unsign(sid.slice(2),yourSecret);
if (sid == "false") {
   //cookie validation failure
   //uh oh. Handle this error
} else {
   sid = "sess:" + sid;
    //proceed to retrieve from store
} 
```

# apache-camel - Fuse 源 ESB 中的 xmlBeans 依赖关系 - 如何解决？

> ID：13291152
> 
> 赞同：0
> 
> 时间：2012-11-08T14:40:28.253
> 
> 标签：apache-camel, fuseesb, xmlbeans

我们正在尝试将进入路由的数据从 java 对象转换为 XML。为此，我们需要 xmlBeans 并且依赖于`DataFormatResolver`.

当我们尝试部署项目时，包没有启动，状态显示为`GracePeriod`。

在错误日志中，我们收到以下消息：

```
 11:00:24,210 | ERROR | rint Extender: 1 | BlueprintContainerImpl 
 | 10 -     org.apache.aries.blueprint - 0.3.1.fuse-70-097 
 | Unable to start blueprint container for bundle POC-3.0 due to 
   unresolved dependencies (&(dataformat=xmlBeans)  
   (objectClass=org.apache.camel.spi.DataFormatResolver)) 
```

我们试图在 POM 文件中添加这个类作为依赖项，但是在 Fuse 中有一个重复的类！

请问有什么想法吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-09T16:35:48.213

您可能必须重新打包 jar 以删除重复的类。我们不得不对 Tika jar 执行此操作，因为它包含许多过时的依赖项，包括与我们的类路径冲突的 XmlBeans。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-20T07:31:22.373

您需要先安装 camel-xmlbeans 功能。

在 Fuse ESB shell 中，您可以键入

```
features:install camel-xmlbeans 
```

然后在安装后，您可以安装并启动您的捆绑软件。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2015-05-26T17:13:13.253

我意识到这是旧的，但克劳斯的回答是正确的，应该被接受。作为附录，请注意您可能希望为您的业务逻辑创建一个（或多个）<feature>，然后创建一个依赖于所有的顶级 <feature>。就像是：

```
(features.xml)

...

<feature name="com.yourbusiness::Application_Name">
    ...
    <feature>camel-xmlbeans</feature>
    <feature>com.yourbusiness::feature_one</feature>
    <feature>com.yourbusiness::feature_two</feature>
    ...
</feature>

<feature name="com.yourbusiness::feature_one">
    ...
</feature>

<feature name="com.yourbusiness::feature_two">
    ...
</feature>

... 
```

希望能提供一些额外的见解。

干杯，
汉斯

# asp.net-mvc - ASP.NET MVC 3 Cookie 丢失

> ID：13291159
> 
> 赞同：1
> 
> 时间：2012-11-08T14:40:44.523
> 
> 标签：asp.net-mvc, asp.net-mvc-3, cookies, session-cookies

我正在将域 cookie 从一个站点发送到我的 asp.net mvc 应用程序，在那里我设置了身份验证 cookie，

在我的操作过滤器中，我看不到 cookie 出现，但如果我查看 global.asax 的 BeginRequest 事件，那里有 cookie。任何想法为什么 cookie 在前往操作过滤器的途中会丢失？

谢谢。

添加的

```
 <machineKey validationKey="4B79DF965DC586D2B267BDECB4580D40EE6811EE171AC65D929BECD8865C09ED8681B92F2177FE9F72B8E822B26914C79C1FF590CCEE65469CBC6FACD7D9F203" decryptionKey="SOmeKey" validation="SHA1" /> 
```

没有帮助...

不知道该怎么办... Update2：我可以在 Application_BeginRequest - 2 cookies 中看到，然后当断点到达我的自定义操作过滤器时

```
public class SecurityFilter : FilterAttribute, IAuthorizationFilter
    {
        public void OnAuthorization(AuthorizationContext filterContext)
        { 
```

在这里，我的第一个 cookie 消失了，第二个仍然存在。两个 cookie 的 Expire 属性设置相同，除了 value 之外的每个属性在两个 cookie 中都相同，为什么第一个会丢失？第二个是存在吗？阅读有关 ASP.NET MVC 请求管道的信息并没有让我大开眼界，请任何人 :-)

# java - 从 Java 监听系统鼠标点击

> ID：13291161
> 
> 赞同：3
> 
> 时间：2012-11-08T14:40:49.390
> 
> 标签：java, swing, java-native-interface, mouseevent, jna

我的主要目标是计算特定应用程序上的鼠标点击次数。

想象一下，我在 PC 上打开了 Microsoft Word 和 Web 浏览器。我的 Java 代码应该告诉我在 Word 和 Web 浏览器上单击了多少次。我需要应用程序名称和点击次数。

我怎样才能做到这一点？任何解决方案都必须适用于 MAC、Linux 和 Windows。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-11-08T14:44:56.297

您可以尝试使用 jnativehook 之类的库：[http](http://code.google.com/p/jnativehook/) ://code.google.com/p/jnativehook/ 。[在此页面上](http://code.google.com/p/jnativehook/wiki/examples)查看他们的示例。

该库使用本机功能来提供对鼠标事件的访问，而这在纯 Java 中是不可能实现的。它似乎支持 Mac、Linux 和 Windows。

# node.js - 如何解决猫鼬的排序错误？

> ID：13291163
> 
> 赞同：1
> 
> 时间：2012-11-08T14:40:55.573
> 
> 标签：node.js, mongoose

我在通过猫鼬进行排序时收到此错误：TypeError：无效排序值：{field：submittedDate} 我的代码部分是：

```
var image = mongoose.model('Image');
var allImages =  image.find({reviewed:true },null,{sort:{"submittedDate":-1}}, function (err, images)
    {
        if(err)
        {
            logger.info("Error occured");
            throw err;
        }
        else
        {
            logger.info("images sorted are:",images);
            cb(images);
        }

    }); 
```

任何帮助将不胜感激。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-08T16:08:12.647

我通过这种方式排序解决了我的问题：

```
image.find({reviewed:true },{limit:10},{sort:{"submittedDate":-1}}，函数（错误，图像）{
}

```

# actionscript-3 - AS3 'drawPath' 简单形状无法正确绘制 - 为什么？

> ID：13291175
> 
> 赞同：0
> 
> 时间：2012-11-08T14:41:25.883
> 
> 标签：actionscript-3, flash, graphics

我想在 ActionScript 3 中绘制一个简单的三角形。

我使用“图形”类的“drawPath”方法。

这是代码片段：

```
stage.stage.quality = StageQuality.LOW;         // Change quality to low so no anti-aliasing occurs
var trianglePoints:Vector.<Number> = new Vector.<Number>();

trianglePoints.push(0);     trianglePoints.push(0);     // Coordinate (0,0)
trianglePoints.push(20);    trianglePoints.push(0);     // Coordinate (20,0)
trianglePoints.push(20);    trianglePoints.push(20);    // Coordinate (20,20)
trianglePoints.push(0);     trianglePoints.push(0);     // Coordinate (0,0) - tried with and without this coordinate return

var commands:Vector.<int> = new Vector.<int>(4);
commands.push(1);   // Move to
commands.push(2);   // Line to
commands.push(2);   // Line to
commands.push(2);   // Line to

var drawSprite:Sprite = new Sprite();

drawSprite.graphics.beginFill(0xFFFF0000);          // Color Red
drawSprite.graphics.drawPath(commands, trianglePoints); // Draw the path
drawSprite.graphics.endFill();

var bd:BitmapData = new BitmapData(100, 100, true, 0x0000FF00);
bd.draw(drawSprite);

var pngBytes:ByteArray = PNGEnc.encode(bd);
var fileReference:FileReference = new FileReference();
fileReference.save(pngBytes,"bd_custom_draw.png");

stage.stage.quality = StageQuality.HIGH; 
```

我不知道为什么 - 而不是三角形的点在：

*   (0,0)
*   (20,0)
*   (20,20)

绘制的三角形在 处有点：

*   (0,0)
*   (19,0)
*   (19,19)

这是我从 Paint-Brush 中截取的[屏幕截图，其中显示了像素：](http://s8.postimage.org/7npsvhvpv/alpha_Bitmap_Data_custom_draw.png)

[![图片](../Images/ea2beb40fed9aaefa5d0172c24d8cd50.png)](https://i.stack.imgur.com/uqZ24.png)

为什么三角形没有在正确的坐标中绘制？

.

.

**更新：**

我试图在“drawPath”之前添加这一行：

```
currentMask.graphics.lineStyle(1, 0xFFFF0000); 
```

这是我得到的[结果：](http://s8.postimage.org/x6hn1g183/alpha_Bitmap_Data_custom_draw_with_line.png)

[![结果](../Images/5b99bd9a95fc09950426381093dcf8d7.png)](https://i.stack.imgur.com/OUf7k.png)

我似乎无法得到我需要的结果！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-08T15:32:00.543

试试 currentMask.graphics.lineStyle(1, 0xFFFF0000,1,true); - 将 lineStyle 线条粗细设置为 1

# django - 会话到期时的Django运行功能

> ID：13291176
> 
> 赞同：0
> 
> 时间：2012-11-08T14:41:27.037
> 
> 标签：django, session

我知道当用户关闭浏览器时我可以将会话设置为过期，这很好。现在我需要下一步。问题是这样的：可以通过单击“开始”按钮来开始一个动作。这将创建一个存储在数据库中的元组。这有一个名为“status”的字段，设置为 IN PROGRESS。当用户按下“结束”按钮时，我将状态值更改为 FINISHED

现在，如果在“开始”和“结束”之间用户关闭浏览器，则会话过期。我想要做的是能够拦截会话已过期并从数据库中删除元组。

基本上我想要做的是在会话到期时运行一个函数。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-08T14:44:35.853

会话通过浏览器上的 cookie 过期而“过期”，因此您的 django 服务器实际上不会知道这种情况何时发生。

在您的情况下，我会做的是定期删除 cron 或 celery 作业中的旧数据。

# php - 在非对象 PDO 上调用成员函数 setFetchMode()

> ID：13291181
> 
> 赞同：0
> 
> 时间：2012-11-08T14:41:36.470
> 
> 标签：php, sql, pdo

> **可能重复：**
> [PDO 数据库访问 WHERE title = $title](https://stackoverflow.com/questions/5223304/pdo-database-access-where-title-title)

这是 $message 的内容示例：

> String(108) "\n cc je t'ai envoy.une 邀请 A 加 :p\n "

这是错误消息：

> 致命错误：在第 101 行对 B:\wamp\www\messages.php 中的非对象调用成员函数 setFetchMode()

我的请求不起作用：

```
 $resultats = $connexion->query("SELECT * FROM messages WHERE message LIKE '%$message%'");
    $resultats->setFetchMode(PDO::FETCH_OBJ);
    $occurences= $resultats->rowCount(); 
```

为什么这个有效？（我将 $message 更改为 a）：

```
 $resultats = $connexion->query("SELECT * FROM messages WHERE message LIKE '%a%'");
        $resultats->setFetchMode(PDO::FETCH_OBJ);
        $occurences= $resultats->rowCount(); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-08T14:47:17.817

尝试使用 PDO 准备。这“几乎”等同于 mysql_real_escape_string()。这可能会消除由于特殊字符引起的大部分（如果不是全部）错误。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-08T14:52:11.763

简单地使用 PDO 和使用的相同技术对`mysql_*`你没有任何好处，你需要利用它的[参数化查询](http://php.net/manual/en/pdo.prepared-statements.php)：

```
$query = $connexion->prepare("SELECT * FROM messages WHERE message LIKE ?");
$query->setFetchMode(PDO::FETCH_OBJ);
if($query->execute(array('%'.$message.'%'))) {
    // process
}
else {
    // only for debugging purposes, not a live app
    var_dump($connexion->errorInfo());
} 
```

它会自动为您正确地对您通过该方法传递的参数执行*所有必要的转义。*`execute()`

* * *

至于`I used addslashes`：那**不安全**。如上所示，使用准备好的语句。

除非您正在生成 SQL（实际的 SQL 逻辑，而不是用用户生成的内容填充空白），否则您*永远*不需要 SQL 中的 PHP 变量。

# git - 没有标签的 git 日志

> ID：13291182
> 
> 赞同：22
> 
> 时间：2012-11-08T14:41:47.160
> 
> 标签：git, git-log

所以我正在做类似的事情

```
 git log --graph --pretty='%h %d %s' -n10 
```

获取我最近提交的简要历史记录。

我唯一的问题是大多数时候我对查看标签不感兴趣，只对分支感兴趣。但是 %d 同时显示标签和分支。有什么方法可以只显示分支名称而不显示标签吗？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2017-06-21T14:59:00.067

`git log --format="%C(auto) %h %s"`

[![在此处输入图像描述](../Images/4781495b728c0b355826b0f0776dd079.png)](https://i.stack.imgur.com/ONZW9.png)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2022-02-21T03:48:07.897

聚会有点晚了，但我刚刚遇到了同样的问题。

这应该显示除标签之外的所有内容：
`git log --decorate-refs-exclude=refs/tags --pretty='%h %d %s' -n10`

* * *

## 回答 #3

> 赞同：-2
> 
> 时间：2012-11-08T15:34:57.480

将此添加到您的`.gitconfig`

```
[alias]
        blog = log --graph --oneline --pretty=format:'%Cred%h%Creset - %C(yellow)%s%Creset %C(green)<%an>%Creset %C(blue)@%d%Creset' --abbrev-commit 
```

通过这种方式，您只能获得提交编号、提交方式以及提交方式的消息。你只需要打字`git blog`就可以随时查看颜色

如果你真的只有分支名称就可以：

`git log --graph --oneline --pretty=format:'%C(blue)@%d%Creset'`

* * *

## 回答 #4

> 赞同：-2
> 
> 时间：2020-01-15T17:54:13.463

检查`git log --help`并特别`%d`选择：

```
%d: ref names, like the --decorate option of git-log(1) 
```

这是你的标签。所以你所要做的就是从你的命令中删除它，即：

```
git log --graph --pretty='%h %s' -n10 
```

# php - 如何为特定目录设置 open_basedir

> ID：13291185
> 
> 赞同：14
> 
> 时间：2012-11-08T14:41:47.953
> 
> 标签：php, apache

我有一个目录`/htdocs/unsecured`，我想限制该目录或其子目录中的任何内容访问该目录之外的任何内容。我只在哪里以及如何设置`open_basedir`这个目录？

* * *

## 回答 #1

> 赞同：17
> 
> 时间：2012-11-08T14:45:35.990

您可以`open_basedir`在 Apache 配置文件 php.ini 或 .htaccess 文件中进行设置。

我通常在 /etc/httpd/conf/httpd.conf 之类的 apache 配置文件中设置它。

您将拥有当前域/虚拟主机的目录结构，您可以直接在其中添加该行：

```
<VirtualHost 123.123.123.123:80>
    <Directory /htdocs/unsecured>
        php_admin_value open_basedir "C:/htdocs/unsecured"
    </Directory>
</VirtualHost> 
```

*注意：*`123.123.123.123`是您的域的 IP 地址，此*示例*块可能会为此配置遗漏*大量*`open_basedir`数据，仅显示.

在 php.ini 中，您可以在更一般的级别上执行此操作（它将应用于您服务器上的*每个*域）：

```
open_basedir = "/htdocs/unsecured" 
```

在 .htaccess 中，您应该能够使用以下内容（尽管我没有测试过）：

```
php_value open_basedir "/htdocs/unsecured" 
```

**编辑**（Windows 路径）
根据评论，您正在 Windows 上运行 xammp（而不是使用虚拟主机）。有了这些信息，我建议将您的`open_basedir`规则放入您的`php.ini`文件中。这应该（希望）对您有用：

```
open_basedir = "C:\xampp\htdocs\unsecured" 
```

在 linux 中，a`:`是字段分隔符。在 Windows 中，`;`是分隔符 - 所以这*应该可以*工作，但我无法亲自测试它。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-08T14:45:14.780

您可以在 php.ini、httpd.conf 或运行时[更改 open_basedir 。](http://www.php.net/manual/en/ini.core.php#ini.open-basedir)

# google-maps - 谷歌地图为 InfoWindow 设置宽度

> ID：13291195
> 
> 赞同：0
> 
> 时间：2012-11-08T14:42:28.313
> 
> 标签：google-maps, google-maps-api-3

嗨，我正在使用 InfoWindow 在谷歌地图上获取自定义弹出窗口，但我无法设置它的宽度，我尝试将其设置为内联包装标签，但它不起作用。在这种情况下，我需要它是 750px。

这是 jsfiddle： http: [//jsfiddle.net/xxast/](http://jsfiddle.net/xxast/) ，这是 html 文件：[http ://www.mediafire.com/view/?66dbe6xzn1mul10](http://www.mediafire.com/view/?66dbe6xzn1mul10)

这是设置 InfoWindow 内容的方法：

```
 function getContent(parts, kmlEvent) {

                var content = ""+
       "<div id='width800' class='google-infobox-content' >" +
            "<div class='image'>" +
                "<img src='http://maps.google.com/maps/api/staticmap?center=" + kmlEvent.latLng.Ya + "," + kmlEvent.latLng.Za + "&amp;zoom=13&amp;size=150x150&amp;maptype=roadmap&amp;sensor=false&amp;language=&amp;markers=color:red|label:none|48.7758013,9.2529132' title='' width='150' height='150' >" +
                "<br />" +
                "<a href='https://maps.google.com/maps?sensore=true&daddr=" + kmlEvent.latLng.Za + "," + kmlEvent.latLng.Ya + "' target='_blank' >Full Google Map</a>" +
                "<a href='http://maps.google.com/help/maps/directions/Somewhere' target='_blank' >Directions</a>" +
            "</div>" +
            "<div class='location'>" +
                "<p>" + parts[0] + "</p>" +
                "<p>" + parts[1] + "</p>" +
                "<p>" + parts[2] + "</p>" +
                "<br/>" +
                "<p>" + parts[3] + "</p>" +
            "</div>" +
            "<div class='contact'>" +
                "<p>" + parts[4] + "</p>" +
                "<p>" + parts[5] + "</p>" +
                "<a href='mailto:" + parts[6] + "' >" + parts[6] + "</a>" +
                "<a href='" + parts[7] + "' target='_blank' >" + parts[7] + "</a>" +
            "</div>" +
            "<div class='others'>" +
                "<p><b>Product line</b></p>" +
                "<p>" + parts[8] + 
                "</p>" +
            "</div>" +                
        "</div>";

                return content;
            }​ 
```

**此处更新** 的是更新的 jsfiddle，其中设置了包装标记的 maxWidth 和内联宽度，但它仍然不起作用：http: [//jsfiddle.net/xxast/3/](http://jsfiddle.net/xxast/3/)

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-11-08T15:29:01.143

[google.maps.InfoWindowOptions](https://developers.google.com/maps/documentation/javascript/reference#InfoWindow)对象`width`中没有。

在您的信息窗口内创建一个`div`，并设置其宽度。
信息窗口将调整大小以适应内部`div`。

我在这里有一个工作示例：http: [//jsfiddle.net/RASG/vA4eQ/](http://jsfiddle.net/RASG/vA4eQ/)

## 编辑

一些额外的信息：

我[在一个谷歌群组](https://groups.google.com/forum/?fromgroups=#!topic/google-maps-js-api-v3/G0pHpaeqK7o)中发现了一个非常有趣的信息，[由谷歌员工撰写](https://groups.google.com/d/msg/google-maps-js-api-v3/G0pHpaeqK7o/V4GBDa6cuuEJ)。

> 信息窗口大小取决于两个因素：
> 
> *   内容的大小
> *   地图的大小（不是浏览器）

要摆脱这种情况，您必须实现自己的信息窗口。

这里有一些例子：

*   [http://gmaps-samples-v3.googlecode.com/svn/trunk/infowindow_custom/infowindow-custom.html](http://gmaps-samples-v3.googlecode.com/svn/trunk/infowindow_custom/infowindow-custom.html)
*   [http://gmaps-samples-v3.googlecode.com/svn/trunk/smartinfowindow/smartinfowindow.html](http://gmaps-samples-v3.googlecode.com/svn/trunk/smartinfowindow/smartinfowindow.html)

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-10-13T10:03:01.097

Google v3 Api 附带：

```
var iw = new google.maps.InfoWindow({ content: some_text, maxWidth: 200 }); 
```

更多细节在这里：[控制谷歌地图信息窗口的宽度](https://stackoverflow.com/questions/3844314/controlling-the-width-of-a-google-maps-infowindow)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2016-03-05T09:31:19.287

```
 Use as below in your google map script

  //content = anything you like to show
  var content = '<div id="content" align="center">'+          
              '<h1 id="firstHeading" class="firstHeading" style="margin:0;color:#ff6600;">Your Title</h1>'+ 
              '<p style="color:#0d6585;font-weight:700;">Your Description'+
              '</p>'+
              '</div>';
  var infowindow = new google.maps.InfoWindow({
     content: content,
     maxWidth: 300 //your desired width
  }); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-11-08T15:12:13.907

在 infoWinfow 选项中，尝试将 maxWidth 设置为 750。此外，为了确保默认情况下不会覆盖样式，goole 值将 google-infobox-content 重命名为不同的名称。您可以尝试使用自定义信息窗口库：http: [//google-maps-utility-library-v3.googlecode.com/svn/trunk/infobubble/examples/example.html](http://google-maps-utility-library-v3.googlecode.com/svn/trunk/infobubble/examples/example.html)

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-11-09T05:35:57.130

制作一个`div`并将其设置为使用`setcontent`它的信息窗口肯定有效

# asp.net-mvc - 对控制器方法的 Ajax 调用不传递参数

> ID：13291196
> 
> 赞同：0
> 
> 时间：2012-11-08T14:42:28.933
> 
> 标签：asp.net-mvc, jquery

我正在尝试对控制器方法进行 AJax 调用，无论我尝试什么，参数都是 null。我已经关注了所有类似的 SO 帖子，但无济于事。对不起，如果答案在那里，我找不到它。我的代码是...

**阿贾克斯调用**

```
 var sguid = $(nTr).attr('id');
    $.ajax({
    url: "/Dashboard/Reporting/GetBlacklistedSoftwareItems",
    type: 'POST',
    dataType: 'json',
    data: JSON.stringify({guid: sguid}),
    statusCode: {
        404: function() {
    alert("page not found");
        }
    },
    success: function (data) {
    //DO Something
    },
    error: function () {
        alert("error");
    }
}); 
```

**控制器方法**

```
public JsonResult GetBlacklistedSoftwareItems(string guid)
{
    List<DeviceSoftware> ldevice = new List<DeviceSoftware>();
    Guid i = Guid.Parse(guid);
    ReportMethods reportingMethods = new ReportMethods();
    ldevice = reportingMethods.GetNonCompliantApplicationReport(CompanyId);

    DeviceSoftware ds = ldevice.Find(x => x.Device.Guid == i);
    List<DeviceApplication> da = new List<DeviceApplication>();
    if (ds != null)
    {
        da = ds.DeviceApplications;
    }

    return Json(da, JsonRequestBehavior.AllowGet);
} 
```

该方法正在被击中，它只是`guid`一直`null`。 `sguid`确实保存了我试图传递的数据。有人能告诉我我错过了什么吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-08T14:58:35.420

反对我读到的一切，我改变了

`data: JSON.stringify({guid: sguid}),`

到

`data: {guid: sguid},`

工作中。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-08T14:59:33.953

弗雷德，

您需要将 GetBlacklistedSoftwareItems 设为 post 方法....

试试这个...

[HttpPost] public JsonResult GetBlacklistedSoftwareItems(string guid) {

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-25T03:47:28.930

需要做一些小的改变。

```
var sguid = $(nTr).attr('id');
    $.ajax({
    url: "/Dashboard/Reporting/GetBlacklistedSoftwareItems",
    contentType: "application/json; charset=utf-8" ,//This is very important 
    type: 'POST',
    dataType: 'json',
    Data: JSON. stringify ({guild: squid}),
    statusCode: {
        404: function() {
    alert("page not found");
        }
    },
    success: function (data) {
    //DO Something
    },
error: function () {
    alert("error");
} 
```

});

将***contentType: "application/json; charset=utf-8"***添加到 $.Ajax 调用中。:)

# iphone - 在 .m 上声明代表

> ID：13291198
> 
> 赞同：0
> 
> 时间：2012-11-08T14:42:34.380
> 
> 标签：iphone, ios, ipad, cocoa-touch, cocoa

我对 Objective-C 比较陌生。

我在网上找到了一个代码，它在 rootViewController.m 上有类似的东西（这是一个基于 navigationController 的应用程序）。

```
@interface RootViewController (CManagerDelegate) <CManagerDelegate>
@end

@interface RootViewController (PViewDelegate) <PViewDelegate>
@end 
```

两个问题：

1.  这些行在 rootViewController.m 的开头做了什么
2.  这些行在代码中做了什么？在这种特殊情况下，请解释括号中和 <> 之间的内容。

谢谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-08T15:28:30.807

一句话：您发布的代码使`RootViewController`该类私下符合某些委托协议。

委托协议用于让一个类声明它理解来自另一个类对象的消息这一事实。例如，视图控制器可以声明它理解手势识别器的委托消息。

该类在内部使用手势识别器这一事实通常是与该类的其他客户端无关的实现细节。最好不要在公共接口中发布这个事实，而是将其放入实现（.m 文件）中。

类别（和类扩展）让您可以做到这一点：使类符合协议而不更改 main `@interface`。

一个漂亮而优雅的解决方案！

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-08T15:11:11.270

阅读类别：

[http://developer.apple.com/library/ios/#documentation/cocoa/conceptual/objectivec/chapters/occategories.html](http://developer.apple.com/library/ios/#documentation/cocoa/conceptual/objectivec/chapters/occategories.html)

和协议：

[http://developer.apple.com/library/mac/#documentation/cocoa/conceptual/objectivec/chapters/ocProtocols.html](http://developer.apple.com/library/mac/#documentation/cocoa/conceptual/objectivec/chapters/ocProtocols.html)

事实上，在继续之前，请阅读所有 Apple 的 Objective-c 文档：

[http://developer.apple.com/library/mac/#documentation/cocoa/conceptual/objectivec/Introduction/introObjectiveC.html](http://developer.apple.com/library/mac/#documentation/cocoa/conceptual/objectivec/Introduction/introObjectiveC.html)

祝你好运。

# python - 管道到 unistd.h 读取段错误

> ID：13291199
> 
> 赞同：2
> 
> 时间：2012-11-08T14:42:38.343
> 
> 标签：python, c, linux, piping, unistd.h

我试图通过管道进入读取，但在第二次输入后它会继续出现段错误。我究竟做错了什么？提前致谢。

```
 $ ./read < <(python -c 'print "BBA\nBBADD\n",')
 Please enter your first name: 
 buf=
 BBA
 BBA
 Please enter your last name: 
 buf=
 Segmentation fault (core dumped) 
```

* * *

我附上了 read 的代码作为参考，重要的部分是 read()

```
//read.c
#include <stdio.h>
#include <string.h>

void prompt_name(char *name, char *msg){
    char buf[4096];

    puts(msg);

    read(0, buf, sizeof buf);
puts("buf=");
puts(buf);
    *strchr(buf, '\n') = 0;

puts(buf);
    strncpy(name, buf, 20);
puts(name);
}

void prompt_full_name(char *fullname) {
    char last[20];
    char first[20];

    prompt_name(first, "Please enter your first name: ");
    prompt_name(last, "Please enter your last name: ");

    strcpy(fullname, first);
    strcat(fullname, " ");
    strcat(fullname, last);
}

int main(int argc, char **argv){
    char fullname[42];

    prompt_full_name(fullname);
    printf("Welcome, %s\n", fullname);

    return 0;
} 
```

`

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-08T14:57:39.490

`read`对字符串一无所知，因此它只是愉快地读取`sizeof(buf)`字符而无需 NUL-terminating `buf`。然后调用`puts(buf)`会导致未定义的行为。

您不应该将此类低级函数用于简单的字符串 I/O；`getline`而是更喜欢。如果您确实想使用`read`，则读取较小的块，检查每次调用的返回值并使用它；它告诉你读了多少。

# ios - MapView Pin Annotation 的问题 - 当地图缩放/平移/区域更改时，Pin 会失去颜色

> ID：13291201
> 
> 赞同：2
> 
> 时间：2012-11-08T14:42:48.983
> 
> 标签：ios, mkmapview, mkannotation, mkannotationview

我有一个显示现金点位置的地图视图。注释被删除，并且可以单击标注以转到包含有关该位置的更多详细信息的页面。现金点有两类，免费和付费，免费现金点针是绿色的，另一个是红色的。当别针掉落时，它们是正确的颜色。一切正常，直到我放大到用户位置或地图的其他区域，然后当我回到图钉时，它们已经失去了颜色格式并且都是原始的红色。

我认为这与地图在下载图块时重新加载并且没有正确重新加载图钉有关，尽管我可能是错的。

任何帮助都感激不尽。

这是我的代码：

```
#import "CashPointMapViewController.h"
#import "PinDrop.h"
#import "CashPointDetailViewController.h"

@implementation CashPointMapViewController
@synthesize app, theCashList, mapview, ann, count, myArray, pinColor;

- (IBAction) getlocation { 

    MKCoordinateRegion region;
    region.center = self.mapview.userLocation.coordinate;
    region.span.longitudeDelta = 0.01f;
    region.span.longitudeDelta = 0.01f;
    [mapview setRegion:region animated:YES];
}

- (void)viewDidLoad {

    [super viewDidLoad];

    mapview.showsUserLocation = YES;

    [mapview setMapType:MKMapTypeStandard];
    [mapview setZoomEnabled:YES];
    [mapview setScrollEnabled:YES];

    MKCoordinateRegion region = { {0.0, 0.0 }, {0.0, 0.0 } };
    region.center.latitude = 53.801279;
    region.center.longitude = -1.548567;
    region.span.longitudeDelta = 0.3f;
    region.span.longitudeDelta = 0.3f;
    [mapview setRegion:region animated:YES];

    app = [[UIApplication sharedApplication]delegate];

    UIImage *locate = [UIImage imageNamed:@"location arrow white.png"];

    UIBarButtonItem *userlocatebutton = [[UIBarButtonItem alloc] initWithImage:locate     style:UIBarButtonItemStylePlain target:self action:@selector(getlocation)];

    self.navigationItem.rightBarButtonItem = userlocatebutton;

    [self performSelectorInBackground:@selector(annloop) withObject:self];

}

-(void) annloop {

    int i;
    for (i=0; i<=count-1; i = i+1) {
    theCashList = [myArray objectAtIndex:i];

    NSString *trimlat = [theCashList.lat stringByTrimmingCharactersInSet:[NSCharacterSet whitespaceAndNewlineCharacterSet]];
    NSString *trimlon = [theCashList.lon stringByTrimmingCharactersInSet:[NSCharacterSet whitespaceAndNewlineCharacterSet]];

    double latdouble = [trimlat doubleValue];
    double londouble = [trimlon doubleValue];

    CLLocationCoordinate2D coord = {(latdouble),(londouble)};

    ann = [[PinDrop alloc] init];

    ann.index = i;

    ann.title = [theCashList.name stringByTrimmingCharactersInSet:[NSCharacterSet whitespaceAndNewlineCharacterSet]];

    NSString *street = [theCashList.street stringByTrimmingCharactersInSet:[NSCharacterSet whitespaceAndNewlineCharacterSet]];
    NSString *town = [theCashList.town stringByTrimmingCharactersInSet:[NSCharacterSet whitespaceAndNewlineCharacterSet]];
    NSString *postcode = [theCashList.postcode stringByTrimmingCharactersInSet:[NSCharacterSet whitespaceAndNewlineCharacterSet]];

    NSString *address = [[NSString alloc] initWithFormat:@"%@, %@, %@", street, town, postcode];

    ann.subtitle = address;
    ann.coordinate = coord;

    NSString *trimprice = [theCashList.price stringByTrimmingCharactersInSet:[NSCharacterSet whitespaceAndNewlineCharacterSet]];

    if ([trimprice isEqualToString:@"Free"])
    {
        ann.price = 1;
    }
    else
    {
        ann.price = 0;
    }
    [mapview performSelectorOnMainThread:@selector(addAnnotation:) withObject:ann waitUntilDone:YES];
    }
}

-(MKAnnotationView *)mapView:(MKMapView *)mapView viewForAnnotation:(id<MKAnnotation>)annotation {

    if ([annotation isKindOfClass:[MKUserLocation class]])
    return nil;

    MKPinAnnotationView *mypin = [[MKPinAnnotationView alloc]initWithAnnotation:ann reuseIdentifier:@"current"];
    mypin.backgroundColor = [UIColor clearColor];
    UIButton *goToDetail = [UIButton buttonWithType:UIButtonTypeDetailDisclosure];
    mypin.rightCalloutAccessoryView = goToDetail;
    mypin.draggable = NO;
    mypin.animatesDrop = TRUE;
    mypin.canShowCallout = YES;

    if (ann.price == 1)
    {
        mypin.pinColor = MKPinAnnotationColorGreen;
    }
    else
    {
        mypin.pinColor = MKPinAnnotationColorRed;
    }
    return mypin;
    }

- (void)mapView:(MKMapView *)mapView annotationView:(MKAnnotationView *)view
calloutAccessoryControlTapped:(UIControl *)control {

   PinDrop *annView = view.annotation;
    CashPointDetailViewController *detailView = [[CashPointDetailViewController alloc]init];
    theCashList = [myArray objectAtIndex:annView.index];
    detailView.theCashList = theCashList;
    [self.navigationController pushViewController:detailView animated:YES];

}

- (void)viewDidUnload {

    [super viewDidUnload];
}

- (BOOL)shouldAutorotateToInterfaceOrientation:   (UIInterfaceOrientation)interfaceOrientation {
    return (interfaceOrientation == UIInterfaceOrientationPortrait);
}

@end 
```

编辑：如果有帮助，这是我的 .h。

```
#import <UIKit/UIKit.h>
#import "AppDelegate.h"
#import "CashPointList.h"
#import <MapKit/MapKit.h>
#import "PinDrop.h"

@interface CashPointMapViewController : UIViewController  {

    MKMapView *mapview;
    PinDrop *ann;
}

    @property (nonatomic, retain) AppDelegate *app;
    @property (nonatomic, retain) CashPointList *theCashList;
    @property (nonatomic, retain) PinDrop *ann;
    @property (nonatomic, retain) IBOutlet MKMapView *mapview;
    @property (nonatomic, readwrite) int count;
    @property (nonatomic, retain) NSMutableArray *myArray;
    @property (nonatomic) MKPinAnnotationColor pinColor;

    -(IBAction) getlocation;

@end 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-08T15:10:16.550

这不是与地图重新加载图块相关的问题。

问题是`viewForAnnotation`委托中的代码使用`ann`对象时错误地假设类实例级`ann`对象将与调用委托方法时同步。

`viewForAnnotation`委托不一定按照添加注解的顺序调用，如果地图需要在重新显示注解时重新显示注解，则可以为同一个注解多次*调用*该委托。

当为先前添加的注释再次调用委托方法时，`ann`不再`annotation`指向同一个对象。 `ann`现在可能指向最后添加的注释，因此所有注释都更改为它的颜色。

在该委托方法中，您必须使用`annotation`参数，该参数是对地图视图希望*在当前调用中*查看的注释的引用（这可能与您的外部循环完全无关）。

所以这一行：

```
MKPinAnnotationView *mypin = [[MKPinAnnotationView alloc] 
    initWithAnnotation:ann reuseIdentifier:@"current"]; 
```

应该：

```
MKPinAnnotationView *mypin = [[MKPinAnnotationView alloc] 
    initWithAnnotation:annotation reuseIdentifier:@"current"];
                       ^^^^^^^^^^ 
```

并且在检查注释的属性时，使用`annotation`参数（并将其转换为您的自定义类以获取自定义属性）：

```
PinDrop *ann = (PinDrop *)annotation;
//Note that this local "ann" is NOT the same as the class-level "ann".
//May want to use a different name to avoid confusion.
//The compiler may also warn you about this.

if (ann.price == 1)
... 
```

一个单独的、不相关但强烈推荐的建议是通过使用`dequeueReusableAnnotationViewWithIdentifier`. 当您有大量注释时，这将提高性能。

# javascript - 了解 BackboneJS

> ID：13291203
> 
> 赞同：0
> 
> 时间：2012-11-08T14:42:50.667
> 
> 标签：javascript, backbone.js, underscore.js

我刚开始学习 BackboneJS，我正在做一个小样本文档来测试它的工作方式。但是我很难理解它，此时它根本没有任何意义:)

所以，我有下一个文件结构：

```
/* application.js */
var Application = Application || {};

;(function ( $, window, document, undefined ) {

    new Application.ApplicationView();

})( jQuery, window, document );

/* sample.js */
var Application = Application || {};

;(function ( $, window, document, undefined ) {

    Application.ApplicationView = Backbone.View.extend({

    });

})( jQuery, window, document );

/* utilities.js */
var Application = Application || {};

;(function ( $, window, document, undefined ) {

Application.ApplicationUtilities = Backbone.Collection.extend({

    polyfillize : function(tests) {

        return _.each(tests, function(obj){
            console.log(obj);
            Modernizr.load([{
                test : _.reduce(obj.test, function(initial_value, current_value){
                    return initial_value && current_value;
                }, 1),
                nope : obj.polyfill,
                callback: function(url, result, key) {
                    console.log('Polyfill : ', [ url ]);
                }
            }]);
        });
    }

});

})( jQuery, window, document );

/* options.js */
var Application = Application || {};

;(function ( $, window, document, undefined ) {

Application.ApplicationOptions = Backbone.Model.extend({

    version : [ 1 ],

    prettify : true,

    libraries : {

        google_code_prettyfier : 'assets/js/libraries/google/prettify.js' 

    },

    dependencies : {

        google_code_prettyfier : function() {
            return Modernizr.load([{
                test : this.prettify,
                yep : [ this.libraries.google_code_prettyfier ],
                callback: function(url, result, key) {
                    return window.prettyPrint && prettyPrint();
                }
            }]);
        }
    },

    polyfills : {
        json_polyfill_url : 'http://cdn.chaoscod3r.com/code/polyfills/json3_polyfill.js',
        storage_polyfill_url : 'http://cdn.chaoscod3r.com/code/polyfills/localstorage_polyfill.js'
    }

});

})( jQuery, window, document );

/* polyfills.js */
var Application = Application || {};

;(function ( $, window, document, undefined ) {

Application.ApplicationPolyfills = Backbone.Model.extend({

    loadPolyfills : function() {
        return Application.ApplicationUtilities.polyfillize([
            {
                test        : [Modernizr.localstorage, Modernizr.sessionstorage],
                polyfill    : [Application.ApplicationOptions.polyfills.storage_polyfill_url]
            },
            {
                test        : [Modernizr.json],
                polyfill    : [Application.ApplicationOptions.polyfills.json_polyfill_url]
            }
        ]);
    }

});

})( jQuery, window, document ); 
```

每个模型都放在它自己的模型文件夹中，每个集合都放在它的集合文件夹中，依此类推。然后我在 DOM 中加载所有脚本，首先是集合，然后是模型、视图，最后是`application.js`.

我想要做的是能够将集合用作我可以随时在视图或模型中使用的函数集合，这些选项应该在任何级别和任何集合/模型/视图中都可用。所以就像我的`sample.js`文件将包含主视图，它将初始化所有需要在 DOM 加载上运行的东西，比如在必要时加载所有的 polyfill，启用 google 代码美化器等等。

显然在这种状态下没有任何效果，所以如果可能的话，我希望有人更有经验来帮助我，或者可能指向一些与我现在正在尝试做的事情相匹配的教程:)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-09T08:46:04.320

您似乎对 Backbone 集合的全部内容感到有些困惑。

[Backbone](http://backbonejs.org/#Collection)中的集合是（Backbone）模型的集合：

> **Backbone.Collection**
> 
> 集合是有序的模型集。[...]

当你这样说时：

```
var C = Backbone.Collection.extend({
    method: function() { ... }
}); 
```

您正在创建一个“类”，并且`method`在您创建一个新实例后将作为“实例方法”使用，但您不能`method`直接调用，`C`因为[`extend`](http://backbonejs.org/#Collection-extend)puts `method`on`C.prototype`是为了继承：

```
C.method(); // This doesn't work, you'll just get an error.
var c = new C;
c.method(); // This works 
```

你这么说

> 将它放在一个集合中是有意义的，一个实用函数的集合:)

但是，不幸的是，仅仅因为某些事情有意义并不意味着它真的是明智的:)

您没有任何模型，`Application.ApplicationUtilities`因此它不是 Backbone 意义上的集合。我认为您只想将对象用作命名空间：

```
Application.ApplicationUtilities = {
    polyfillize: function(tests) { /* ... */ }
}; 
```

# kivy - 画布收到的 on_touch_up 事件。不知道为什么

> ID：13291204
> 
> 赞同：1
> 
> 时间：2012-11-08T14:42:55.740
> 
> 标签：kivy

不知道为什么在释放按钮时会触发 on_touch_up。其他两个事件 on_touch_down 和 on_touch_move 不会被触发。

```
from kivy.app import App
from kivy.uix.widget import Widget
from kivy.uix.button import Button

class MyPaintWidget(Widget):

    def on_touch_down(self, touch):
        print "on_touch_down"

    def on_touch_move(self, touch):
        print "on_touch_move"

    def on_touch_up(self, touch):
        print "on_touch_up"

class MyPaintApp(App):

    def build(self):
        parent = Widget()

        painter = MyPaintWidget()
        btn = Button(text='Click Me')

        parent.add_widget(painter)
        parent.add_widget(btn)

        return parent

if __name__ == '__main__':
    MyPaintApp().run() 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-11T17:07:06.173

您已经重载了 MyPainterWidget 的 up、down 和 move 方法，它们在单击小部件时按定义执行。

uix.Button 没有 on_touch_up 方法，因此事件会向上传播到小部件树。您可以通过更改顺序来进一步调查

```
parent.add_widget(painter)
parent.add_widget(btn) 
```

至

```
parent.add_widget(btn)
parent.add_widget(painter) 
```

我们现在看到“on_touch_up”和“on_touch_down”都打印到控制台，即使单击uix.Button，而不仅仅是“on_touch_up”。

这些是 kivy 如何处理事件的各个方面，[可以在此处找到详细信息](http://kivy.org/docs/guide/events.html)

# sql - 如何在sql server中格式化日期

> ID：13291207
> 
> 赞同：0
> 
> 时间：2012-11-08T14:43:10.603
> 
> 标签：sql, sql-server, sql-server-2008, formatting, sql-update

我正在尝试更新表中的日期字段，但会将日期格式转换为 dd/mm/yy。我已经尝试过这种方法，但它仍然显示像这样 yyyy-mm-dd

```
 UPDATE MyTable 
        SET MyField = convert (varchar,GETDATE(), 101)
       where ID = '221' 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-08T14:45:19.667

插入时不应考虑格式化。由于`MyField`是数据类型`datetime`，因此只需`GETDATE()`像这样更新它：

```
 UPDATE MyTable 
 SET MyField =  GETDATE()
 where ID = '221' 
```

日期不以格式存储。

您应该将日期/日期时间值存储到[`date`或`datetime`数据类型中。](http://msdn.microsoft.com/en-us/library/ff848733.aspx)

然后，在选择这些日期值时，您可以[**`CONVERT`**](http://msdn.microsoft.com/en-us/library/ms187928.aspx)像在问题中那样使用该函数来格式化日期。您将在此页面中找到所有代码及其格式。选择适合你的。就像是：

```
SELECT
  CONVERT(VARCHAR(10), myfield, 120) 'With formatting'
FROM @table; 
```

## [演示](https://data.stackexchange.com/stackoverflow/query/edit/84468)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-08T14:55:39.357

萌，

SQL 中的 date 和 datetime 存储时没有格式。插入/更新时使用格式没有意义......仅在选择时。

# c++ - 在 C/C++ 中实现实时最佳拟合内存分配算法

> ID：13291209
> 
> 赞同：0
> 
> 时间：2012-11-08T14:43:16.627
> 
> 标签：c++, c, linux, memory, operating-system

我们有一种称为“最佳匹配”的算法，操作系统使用该算法将内存分配给需要它的进程。所以我想做的是，编写一个 C 代码，它可以像任何操作系统一样，实时找到系统内存中的漏洞并为其匹配进程。我正在尝试在 Linux 系统上实现它。我知道 /dev/mem 充当物理内存的接口，所以我将尝试使用 /dev/mem 的 hexdump 以某种方式获取系统中的漏洞记忆。但我不知道这是否是最好的方法。那么，有人可以帮我指出如何实施这样的事情的正确方向吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-08T14:52:40.373

我想，您可以使用优先搜索树来实现简单的最佳拟合或首次拟合算法。您可以在此处阅读优先搜索树：[http](http://www.cise.ufl.edu/~sahni/cop5536/presentations.htm) ://www.cise.ufl.edu/~sahni/cop5536/presentations.htm （第 35 讲的演讲）

算法实现将在下一讲（36 的演讲）中解释。

# sql - 在 Rails ActiveRecord 中生成序列号

> ID：13291211
> 
> 赞同：0
> 
> 时间：2012-11-08T14:43:22.427
> 
> 标签：sql, ruby-on-rails, activerecord

在 Rails 应用程序中，我需要一个唯一的、连续的（无间隙）整数源用作序列号。它必须是持久的并允许并发访问。

数据库自动增量是不够的，因为大多数不保证“无间隙”属性。

在直接的 SQL 中，我将创建一个单行表并说（在 PostgreSQL 中）类似：

```
update sequence set value = value + 1 returning value 
```

这显然是 SQL 世界中的标准做法。存在参考。

在 ActiveRecord 中，我轻松地创建了模型`.increment!`并`.increment_counter`在文档中找到了模型。但我不知道如何以*原子*方式检索增加的值。锁和交易似乎没有帮助。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-09T03:46:40.927

由于`update ... returning`作为输出目的的选择，事实证明您可以`find_by_sql`在一个操作中同时使用更新和获取更新的值。

```
class SequenceNumber < ActiveRecord::Base
  attr_accessible :tag, :value
  validates :tag, :uniqueness => true

  def self.get_next(tag)
    find_by_sql("update sequence_numbers 
                 set value = value + 1 
                 where tag = '#{tag}' 
                 returning value").first.value
  end
end 
```

剩下的问题是这是完全不可移植的，因为`returning`它是一个 pgsql 扩展。也许 ActiveRecord 开发人员会注意到这一点。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-08T15:45:22.617

如果你想使用 redis（也许你已经因为 Resque 或 Sidekiq），你可以`INCR`在一个键上做一个键，这是原子的并返回新值。

# css - 对话框使背景更高

> ID：13291217
> 
> 赞同：0
> 
> 时间：2012-11-08T14:43:43.317
> 
> 标签：css, html

在[http://associationtsunami.github.com/tsunami/](http://associationtsunami.github.com/tsunami/)上，当您按下左箭头键“<”时，框会旋转，您会看到“(i)”信息图标。当您单击它时，您会打开“关于”对话框。

而且整个页面的高度也增加了！这个额外的高度是从哪里来的？

这是 index.html 文件：

```
<!DOCTYPE html>
<html>
<head>
  <meta charset="UTF-8" />
  <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1" />
  <title>Association Tsunami</title>
  <link rel="stylesheet" type="text/css" href="css/cube.css" />
  <script src="http://cdnjs.cloudflare.com/ajax/libs/jquery/1.8.2/jquery.min.js" type="text/javascript" charset="utf-8"></script>
  <script src="http://cdnjs.cloudflare.com/ajax/libs/jqueryui/1.9.1/jquery-ui.min.js" type="text/javascript" charset="utf-8"></script>
  <script src="http://cdnjs.cloudflare.com/ajax/libs/d3/2.10.0/d3.v2.min.js" type="text/javascript" charset="utf-8"></script>
  <script src="js/cube.js" type="text/javascript" charset="utf-8"></script>
  <script src="js/client.js" type="text/javascript" charset="utf-8"></script>
  <!--[if lt IE 9]><script src="http://cdnjs.cloudflare.com/ajax/libs/html5shiv/3.6.1/html5shiv.js"></script><![endif]-->
  <script>
  $(document).ready(function () {
    windowResize();
  });

  $(window).resize(function () {
    windowResize();
  });

  window.onorientationchange = function () {
    windowResize();
  };
  </script>
</head>
<body class="body_content">
  <div id="wrapper">
    <!--Cube Code from here-->
    <article class="viewport">
      <section class="cube">
        <div id="top">
          <h1>UNSONPARLA 2012 -></h1>
          <p>Info about the Festival</p>
          <p>Festival, Festival, Festival</p>
        </div>
        <div id="face">
          <h1>Association Tsunami</h1>
          <p>L'association Tsunami a pour but de développer la musique électronique hors norme, la musique acousmatique et la musique contemporaine instrumentale et mixte.</p>
          <p>L'association gère:</p>
          <ul>
            <li>Le festival des musiques d'aujourd'hui Un son par là> qui existe depuis 2007 avec 2 années à Carré d'Art et 3 années dans les temples de la ville de Nîmes.</li>
            <li>Le SPAM (Station Polymorphe d'Acoustique musicale) 2bis rue du grand couvent 30000 Nîmes qui est un lieu de résidence d'artistes liés au son, un lieu de présentation, un lieu de concert et de convivialité mais aussi un lieu de formation sur des programmes informatiques liés au son (pour novices, compositeurs ou DJ), le but étant de faire découvrir de nouveaux horizons de recherches sonores, et enfin un lieu d'ateliers pour la composition et la recherche et l'initiation à de nouvelles formes artistiques (tous public) ...</li>
            <li>L'Ensemble O.Y.A.A.T.O qui est un ensemble de musicien qui interprète des œuvres du répertoire de la musique contemporaine, acousmatique, électronique et aussi d'art sonore.</li>
            <li>L'Acousmonium SPAM (orchestre de haut parleurs) avec une quarantaine d'enceintes autonomes gérée par un pupitre de diffusion; ce qui permet la projection sonore et la mise en espace du son. L'Acousmonium SPAM fait partie des 10 plus gros acousmoniums d'Europe.</li>
          </ul>
        </div>
        <div id="side3"></div>
        <div id="side4">
          <h1>Another link Page</h1>
          <p>&#8220;A 3D cube can be created solely in CSS, with all six faces.&#8221;</p>
          Sample div containing Links:
          <a href="http://www.yahoo.com">Yahoo</a>
        </div>
        <div id="side5">
          <h1>Page 5</h1>
          <p>Some text</p>
          <p>Festival, Festival, Festival</p>
          <p>Festival, Festival, Festival</p>
          <p>Festival, Festival, Festival</p>
          <p>Festival, Festival, Festival</p>
          <p>Festival, Festival, Festival</p>
          <p>Festival, Festival, Festival</p>
          <p>Festival, Festival, Festival</p>
          <p>Festival, Festival, Festival</p>
          <p>Festival, Festival, Festival</p>
        </div>
        <div id="bottom">
          <h1>We can add an image</h1>
          <img src="image/tsunami-bg.png"/>
        </div>
      </section>
    </article>
  </div>
  <div id="about" title="About" style="display:none;">
    <p>Asisium was established in 2012 by a group of experienced professionals in the construction industry with diverse but complimentary backgrounds in project management, engineering, construction, quantity surveying, architecture and law.</p>
    <p>Led by two founding partners with over 35 years experience, we offer a range of consultancy services for the property development and construction industry. Our head office is based in London, UK, but we provide our services internationally throughout Europe, USA, Hong Kong, U.A.E and Myanmar (Burma).</p>  
  </div>
  <div id="equipe" title="Equipe" style="display:none">
    Direction artistique : 
    JLuc Gergonne (Compositeur et Musicien)
    Communication : 
    JMarie Bernard (Infographie)
    Carolle Gaillac (Chargée de communication)
    Technique : 
    Camille Giuglaris (ingénieur du son et musicien)
    Norman Khine (Développeur de projets informatiques)
    Pédagogie : 
    JMichel Olivares (ingénieur du son et formateur)
    Administration:
    Marie-Hélène Mas (Comptabilité/Administration)
    Carole Bourgognon (Assistante à la coordination de projet)
  </div>
</body>
</html> 
```

其余代码可以在[https://github.com/AssociationTsunami/tsunami找到](https://github.com/AssociationTsunami/tsunami)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-08T14:57:58.933

您的#about div 中有两个`<p>`标签。第二段中的文字空间不足，导致它在#about 下方突出，超过了 315 像素的高度。您可以将样式添加`overflow: auto;`到`overflow-y: auto;`#about。这将添加一个滚动条，而不是让文本使页面变大。

这张照片显示了它现在的样子。我在#about 周围添加了一个绿色边框，以表明 div 保持其指定的高度，但段落不会保持在其范围内。

![前](../Images/9cc13c70fea2f55e9c8c3f340cd7c7b6.png)

`overflow-y: auto;`应用于#about，它可以让用户滚动内容；给它去的地方。

![在此处输入图像描述](../Images/a9943795af6a24d38b2cb6ecbf0522bf.png)

# java - 不带参数从 java 调用 cmd.exe

> ID：13291224
> 
> 赞同：0
> 
> 时间：2012-11-08T14:44:14.563
> 
> 标签：java, io, java-io

我正在编写一些程序来使用附加命令调用 cmd.exe 并使用 java 收集从相同生成的输出。下面是一个示例程序——

```
public class LoadShell {
    public static void main(String[] args) throws Exception {
    //Line1
        String [] command ={"cmd.exe","/c","dir"};      
    ProcessBuilder probuilder = new ProcessBuilder( command );             
        Process process = probuilder.start();       
        InputStream inputstream1 = process.getInputStream();        
        InputStreamReader inputstreamreader1 = new InputStreamReader(inputstream1);
        BufferedReader bufferedreader = new BufferedReader(inputstreamreader1);      
        String line="";
        while ((line = bufferedreader.readLine()) != null) {
            System.out.println(line);
        }

  }
} 
```

这些程序按预期运行良好。现在我有一个更简单的要求。我想在没有任何参数的情况下调用 cmd.exe 并将输出收集为字符串。这是因为我想将流程对象引用和字符串发送到另一个方法以用于某些项目特定目的。所以我在 Line1 中修改了我的代码，如下所示——

```
public class LoadShell {
    public static void main(String[] args) throws Exception {
          //Line1
      String [] command ={"cmd.exe"};
      ProcessBuilder probuilder = new ProcessBuilder( command );             
          Process process = probuilder.start(); 
          InputStream inputstream1 = process.getInputStream();        
          InputStreamReader inputstreamreader1 = new InputStreamReader(inputstream1);
          BufferedReader bufferedreader = new BufferedReader(inputstreamreader1);
          int intch;     
        String line="";
        while ((line = bufferedreader.readLine()) != null) {
            System.out.println(line);
        }

       }
} 
```

但在这种情况下，该`readLine`方法在打印后无限期挂起——

Microsoft Windows [版本 6.1.7601] 版权所有 (c) 2009 Microsoft Corporation。版权所有。

所以我也尝试过使用 read of`BufferedReader`而不是`readline`如下 -

```
while ((intch = bufferedreader.read()) != -1) {
            int ch = (char) intch;
            System.out.println(ch);
          } 
```

但是在读取对应的字节后，即使读取也挂起-

```
 Microsoft Windows [Version 6.1.7601]
Copyright (c) 2009 Microsoft Corporation.  All rights reserved. 
```

有什么方法可以得到下面的完整输出而不会导致我的程序挂起——

```
Microsoft Windows [Version 6.1.7601]
Copyright (c) 2009 Microsoft Corporation.  All rights reserved.

C:\Users\devshankhasharm> 
```

任何想法，将不胜感激。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-08T14:46:48.480

可能是因为没有该`/c`标志，您只是打开了一个 shell 窗口，而该外部进程现在正坐在`C:\>`提示符处等待发出命令。因为你从不发送任何东西，它会一直呆在那里，直到你杀死它。

# textarea - Textarea与Inline的不同中断？

> ID：13291225
> 
> 赞同：0
> 
> 时间：2012-11-08T14:44:16.437
> 
> 标签：textarea, inline, line-breaks

我正在开发一个扩展的 Textarea，例如[http://podio.github.com/jquery-mentions-input/](http://podio.github.com/jquery-mentions-input/) 在那里您可以看到一个透明的 Textarea，其背景中有一个元素模拟突出显示。

您还可以在那里看到问题：输入一些长文本，例如“iiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiii”（注意末尾的空格），然后输入“@ke”并选择第一个联系人。您将看到背景中断与文本区域中的文本不同。我发现这不是因为尺寸不同！

任何想法如何避免这种情况？

PS：我不想让你满足。对于测试，我使用了 chrome（用点测试！）和 firefox。我认为这种技术也经常用于自动计算文本区域高度，他们一定有同样的问题？！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-10T15:52:00.407

我自己找到了一个不同的解决方案：手动计算换行符。

我从这个线程修改和改进了[换行符：在文本区域中找到“换行符”，它是自动换行的阿拉伯文](https://stackoverflow.com/questions/4719777/finding-line-breaks-in-textarea-that-is-word-wrapping-arabic-text#answer-4722395) 本 最大的区别：这个函数只检索中断的值而不应用中断，因为它使用了一个临时元素复制。

我认为它可以帮助别人！

```
function getApplyLineBreaks(strTextAreaId) 
{
    var strRawValue = $('#' + strTextAreaId).val();
    var measureClone = $('#' + strTextAreaId).clone();
    measureClone.attr('id', 'value_break_mess_clone');
    measureClone.val('');
    measureClone.css('overflow', 'hidden');
    measureClone.removeAttr('onchange').removeAttr('onclick').removeAttr('onkeydown').removeAttr('onkeyup').removeAttr('onblur').removeAttr('onfocus');
    measureClone.height(10);
    measureClone.insertAfter('#' + strTextAreaId);

    var lastScrollWidth = measureClone[0].scrollWidth;
    var lastScrollHeight = measureClone[0].scrollHeight;
    var lastWrappingIndex = -1;
    var tolerancePixels = 5; //sollte kleiner als font-size
    var addedSpace = false;
    var debug_c = 0;

    for (var i = 0; i < strRawValue.length; i++) 
    {
        var curChar = strRawValue.charAt(i);
        if (curChar == ' ' || curChar == '-' || curChar == '+')
            lastWrappingIndex = i;
        measureClone.val(measureClone.val() + curChar);
        addedSpace = false;
        if (i != strRawValue.length - 1 && strRawValue.charAt(i + 1) != "\n")
        {
            measureClone.val(measureClone.val() + ' '); //this is only 90% zero-width breaker unnoticed
            addedSpace = true;
        }

        if (((measureClone[0].scrollWidth - tolerancePixels) > lastScrollWidth) || ((measureClone[0].scrollHeight - tolerancePixels) > lastScrollHeight))
        {
            if (addedSpace)
                measureClone.val(measureClone.val().substr(0, measureClone.val().length - 1));
            var buffer = "";
            if (lastWrappingIndex >= 0) 
            {
                for (var j = lastWrappingIndex + 1; j < i; j++)
                    buffer += strRawValue.charAt(j);
                lastWrappingIndex = -1;
            }
            buffer += curChar;
            measureClone.val(measureClone.val().substr(0, measureClone.val().length - buffer.length));

            if (curChar == "\n")
            {
                if (i == strRawValue.length - 1)
                    measureClone.val(measureClone.val() + buffer + "\n");
                else
                    measureClone.val(measureClone.val() + buffer);
            }
            else
            {
                measureClone.val(measureClone.val() + "\n" + buffer);
            }
            lastScrollHeight = measureClone[0].scrollHeight;
        }
        else if (addedSpace)
        {
            measureClone.val(measureClone.val().substr(0, measureClone.val().length - 1));
        }
    }

    var returnText = measureClone.val();
    measureClone.remove();
    return returnText;
} 
```

唯一的一点：长文本速度很慢。欢迎提出优化建议。

# ios - IOS 上的 XMPP：我如何请求更多存在

> ID：13291226
> 
> 赞同：0
> 
> 时间：2012-11-08T14:44:17.017
> 
> 标签：ios, xmpp

我正在制作一个 IOS 应用程序来与其他 Facebook 用户聊天。

*   我打开连接。
*   验证用户。
*   上网将存在发送到服务器。
*   接收其他用户的存在。

问题是：服务器只向我发送 8 个用户。

如何使用 IOS 框架发出 XMPP 请求以获得更多存在？XMPP有自动请求吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-12T03:04:56.287

我假设你有超过 8 个朋友？您是否尝试过其他客户？如果您看到超过 8 个用户的存在，那么这绝对是您的客户。如果您仔细观察，您可能会发现在收到第一个 IP 数据包后，您不再从套接字读取；8 个存在可能只是线路上大约 1500 字节（1 个典型 MTU）的开销。

# tridion - 错误 XMLConfigurationReader - 使用架构“schemas/cd_ambient_conf.xsd”验证文件“cd_ambient_conf.xml”时出错

> ID：13291227
> 
> 赞同：4
> 
> 时间：2012-11-08T14:44:18.747
> 
> 标签：tridion, tridion-2011, tridion-content-delivery, ambient

我在我的暂存网站中为 Tridion UI 2012 配置了环境数据框架。但在日志文件中，它记录了以下错误 -

2

```
012-11-08 11:42:20,095 WARN  AmbientDataContext - There is no current ambient data context - the ambient data framework is not properly initialised
2012-11-08 11:42:20,204 ERROR XMLConfigurationReader - Error while validating file 'cd_ambient_conf.xml' with schema 'schemas/cd_ambient_conf.xsd'. cvc-complex-type.2.4.a: Invalid content was found starting with element 'ClaimStoreProvider'. One of '{Cookies}' is expected. 
```

但是在文档中没有提到启用 cookie 标签。问题与我之前问题的第二部分完全相似 - [为内容交付 Web 服务配置环境数据框架时出错](https://stackoverflow.com/questions/13263631/error-in-configuring-ambient-data-framework-for-content-delivery-web-service) （请参阅编辑 - 关于 CDA 应用程序）。这个问题的答案适合我以前的一个案例。所以请从那里参考我的配置文件。这个新问题接触广泛受众的唯一目的。之后，我倾向于将其标记为前一个的副本，或者我将剪切并粘贴这个公共部分。早期的帮助将不胜感激。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-11-08T20:40:23.063

`Tridion SP1`当您混合 和 的 jar 文件时，我看到了这个错误`Tridion SP1#HR1`。您很可能（很确定）从**cd_core.jar**`Tridion SP1`而**不是**从`Tridion SP1 HR1`.

`Tridion SP1 HR1` 是 Tridion UI/XM 2012 的先决条件。您需要替换 Tridion SP1 HR1 中的所有 jar 文件并重新启动预览站点的 AppPool。复制后，您将在日志中看到如下消息，而不是错误。

```
WARN  AmbientDataContext - There is no current ambient data context - the ambient data framework is not properly initialised
DEBUG AmbientDataContext - Setting current ambient data context: com.tridion.ambientdata.web.WebContext
INFO  AmbientDataConfig - Found claimStoreProvider definition in configuration file: com.tridion.siteedit.preview.PreviewClaimStoreProvider. 
```

# algorithm - 使用recursion的矩阵转置

> ID：13291231
> 
> 赞同：0
> 
> 时间：2012-11-08T14:44:30.463
> 
> 标签：algorithm, recursion, matrix, transpose

你能给我一些使用递归的矩阵转置的伪代码吗？如果它在一个功能中，那就太好了。

PS：这可能不是问题，但我无法在任何地方找到信息。如果你知道一个关于递归伪代码的网站，那就太棒了。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-08T14:52:35.880

对于方形 MxM 矩阵：

```
function transpose (x0, y0, x1, y1)
    if (M > 1)
        transpose (0, 0, M/2, M/2) // A
        transpose (0, M/2, M/2, M) // B
        transpose (M/2, 0, M, M/2) // C
        transpose (M/2, M/2, M, M) // D
        swap blocks B and C
    endif

transpose (0, 0, M, M) 
```

# php - 在表单中显示西班牙语字符

> ID：13291235
> 
> 赞同：0
> 
> 时间：2012-11-08T14:44:49.870
> 
> 标签：php, html, forms, character-encoding

我有一个表单，在一个文本区域中，我想显示一些具有一些西班牙字符但编码为 html 的文本。问题是它显示的不是西班牙语字符，而是 html 代码。我正在使用 htmlentities 在表单中显示它。我要显示的代码是：

```
<?php echo htmlentities($string, ENT_QUOTES, "UTF-8") ?> 
```

有什么想法，或者我不应该在表单中使用 htmlentities？谢谢！

**编辑** 让我们说`$string = 'á'`

当我做`<?php echo $string ;?>`我得到`á` 如果我做`<?php echo htmlentities($string, ENT_QUOTES, "UTF-8") ?>`我得到`&aacute;`

我很混乱！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-08T14:53:08.317

如果我理解正确，您需要使用...

```
<meta charset="utf-8"> 
```

在您的页眉中，然后...

```
<?php echo html_entity_decode($string, ENT_QUOTES); ?> 
```

这会将您的 HTML 实体转换回正确的字符

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-08T16:56:32.237

您可以尝试在文件顶部显式添加内容类型，如下所示

```
<meta http-equiv="Content-Type" content="text/html; charset=utf-8" /> 
```

如果它已经编码为 html 那么你现在需要解码它..你可以使用`html_entity_decode($string);`

您要在表单中回显的字符串应该是`&aacute;` 从数据库返回的，而不是`á`

```
$string = '&aacute;'; // your string as fetched from database
echo html_entity_decode($string);// this will display á in the textarea 
```

在保存到数据库之前，您需要

```
htmlentities($_POST['txtAreaName'], ENT_QUOTES, "UTF-8"); // return `&aacute;` 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-08T19:22:55.950

您可能正在寻找 htmlspecialchars。

```
echo htmlspecialchars('<á>', ENT_COMPAT | ENT_HTML5, "UTF-8"); 
```

输出`&lt;á&gt;`。

# architecture - 批处理/离线处理设计书/文档

> ID：13291239
> 
> 赞同：4
> 
> 时间：2012-11-08T14:44:56.850
> 
> 标签：architecture, batch-processing

是否有书籍或任何文档描述了设计用于在两方之间共享数据的批处理（离线）流程的最佳实践？

我在 spring 批处理站点上找到了一些有用的信息，但它的级别很低： [批处理策略](http://static.springsource.org/spring-batch/batch-processing-strategies.html)和[批处理原则指南](http://static.springsource.org/spring-batch/batch-principles-guidelines.html)。

批处理有很多注意事项，例如：

1.  数据传输方法（例如文件）
2.  双方控制协议
3.  错误处理
4.  文件命名约定（如果使用文件进行传输）
5.  同步双方之间的截止时间
6.  等等

如果有一些权威文件或清单可以确保设计遵循该领域的最佳实践，那就太好了。

* * *

**更新：**

当我遇到它们时，我会在本节中添加答案。

## 一般批处理/离线处理信息

本节取自 @user1813068 的回答。

[您可以在此链接](http://mike2.openmethodology.org/wiki/Architecture_Patterns_for_Partner-to-Partner_Integration)以及此[链接](http://mike2.openmethodology.org/wiki/Architecture_Patterns_for_Data_Synchronisation)中找到一些架构设计模式，这些模式描述了合作伙伴之间的集成和数据同步的方法。

此维基百科页面还提供了架构模式的高级概述，并包括数据集成模式：[架构模式](http://en.wikipedia.org/wiki/Architectural_pattern)。

《[数据集成蓝图和建模](https://rads.stackoverflow.com/amzn/click/com/0137084935)》一书也非常好。

## 数据文件

本节的大部分内容都来自这里：[source](http://www.e-dss.org)

使用页眉和页脚进行平面文件交换被认为是最佳实践。平面文件可以在没有页眉和页脚的情况下进行交换，并且文件的命名可以概括一些与页眉相同的信息。使用分隔文件时，始终需要字段列表标题。

### 标头

在系统之间交换数据时，接收方准确了解正在发送的数据类型非常重要。确保这一点的一种方法是提供一个标题行，其中包含有关数据内容及其处理方式的相关信息。

在处理平面文件时，文件名本身也可用于通知接收方文件的内容。但是，标题行为所有可用选项提供了更好的支持。

使用 API 时，可以以类似的方式提供这些标头字段。实施将由 API 服务的开发者决定。

如果包含标头，则它由一组数据组成，并且必须始终是文件中的第一个数据。

### 页脚

当使用基于文件的格式时，可能会提供页脚以指示没有更多数据需要处理。

处理时，应忽略在页脚行之后找到的数据。此外，在创建数据时，请注意页脚行之后的任何数据都将被忽略。

### 数据格式

分隔文件

事实上的行业标准是分隔文件。

逗号分隔（CSV 或逗号分隔值）文件通常需要数据封装，通常使用双引号 (")；然后必须使用反斜杠 () 或双双引号 ("") 对双引号进行转义。由于针对 CSV 实现中的不一致，建议使用制表符作为分隔符，不进行封装。在这种情况下，必须从数据中删除制表符。分隔文件通常可以更快地处理 XML 文件。

XML 文件

业内有些人更喜欢 XML 文件。XML 允许更清晰地表示信息，因为它支持嵌套数据。许多公司对这种格式的支持有限或不支持，因此不推荐。

### 编码

UTF-8 编码

所有数据都应采用 UTF-8 编码，以确保所有系统之间的最大兼容性。

日期和时间

建议对所有日期和时间字段使用 UTC 时间，以防止混淆。

* * *

更多最佳实践：[EDI 调度和文件传输](http://ediacademy.com/EDISchedulingAndFileTransferBestPractices.html)

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-11-10T14:58:34.963

[您可以在此链接](http://mike2.openmethodology.org/wiki/Architecture_Patterns_for_Partner-to-Partner_Integration)以及此[链接](http://mike2.openmethodology.org/wiki/Architecture_Patterns_for_Data_Synchronisation)中找到一些架构设计模式，这些模式描述了合作伙伴之间的集成和数据同步的方法。

此维基百科页面还提供了架构模式的高级概述，并包括数据集成模式：[架构模式](http://en.wikipedia.org/wiki/Architectural_pattern)。

《[数据集成蓝图和建模](https://rads.stackoverflow.com/amzn/click/com/0137084935)》一书也非常好。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-09T18:42:23.953

根据您的要求，您可以查看数据复制系统以按原样传输数据。周围有很多商业和开源工具。可以看一下[SymmetricDS的源代码和文档](http://www.symmetricds.org/)

如果您需要进行一些转换和处理，您可以查看 ETL（提取、转换、加载）工具。大多数数据仓库书籍都有关于该主题的章节，一个例子是[Here](http://onlinelibrary.wiley.com/doi/10.1002/9780470604137.ch12/summary)

# .htaccess - 即使文件存在也将请求重定向到不同的 URL

> ID：13291241
> 
> 赞同：0
> 
> 时间：2012-11-08T14:45:00.850
> 
> 标签：.htaccess, redirect

好的，所以我需要将所有对 javascript 文件的请求重定向到我创建的压缩系统。

所以 admin/js/_global.js 会重定向到 _lib/compress.php?file=admin/js/_global.js

我已经尝试了位于站点根目录中的以下 htaccess 代码，但它不起作用。

```
Options +FollowSymlinks
RewriteEngine on
RewriteRule ^admin/js/(.*)\.js$ _lib/compress\.php?f=admin/js/$1\.js [R=301,L] 
```

有人有想法么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-08T15:06:38.107

试试这个：（不要忘记清除浏览器缓存）

```
RewriteEngine on
RewriteBase /
RewriteRule ^(admin/js/.*\.js)$ _lib/compress.php?file=$1 [L,R=301] 
```

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-11-08T14:51:29.283

尝试：

```
RedirectMatch 301 ^admin/js/.*$  _lib/compress\.php?f=admin/js/$1\.js 
```

# php - 处理多选列表框以设计电子邮件布局

> ID：13291243
> 
> 赞同：0
> 
> 时间：2012-11-08T14:45:03.800
> 
> 标签：php, forms, multi-select

我目前正在尝试修改其他人创建的联系表格。当前表单处理php文件使用了本文提到的一个函数：[http](http://www.gerd-riesselmann.net/archives/2005/09/sending-spam-through-contact-forms) ://www.gerd-riesselmann.net/archives/2005/09/sending-spam-through-contact-forms 。

这是格式化要发送的电子邮件的代码段。

```
 if($_POST["txtEmail"]!=""){
    $xm="info@xxx.co.uk";
    $pem=$_POST["txtEmail"];
    $sb="Chauffer Inquiry";
    $txt='  <table border="1" cellpadding="3" cellspacing="0" style="border-collapse: collapse">
        <tr>
          <td align="right"><strong>Name:</strong></td>
          <td width="250">'.preprocessHeaderField($_POST["txtName"]).'</td>
        </tr>
<tr>
      <td align="right"><strong>Date of booking:</strong></td>
      <td width="250">'.preprocessHeaderField($_POST["date"]).'</td>
    </tr> 
```

我的问题是在此格式化部分中处理具有多选功能的列表框。我已经使用数组在表单中正确创建了它，但我仍然无法弄清楚如何在这段代码中处理它。有人可以解释如何在这里包含一个 for 语句吗？在 if 语句之前，我正在捕获这两个语句的选定项目数。

```
$aCars = $_POST['Cars'];
$nCars = count($aCars); 
```

我确实到处寻找，但找不到将 for 语句嵌入上述代码的方法。请放轻松，因为我的 php 技能不是那么好。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-08T18:47:10.817

假设一切正常（$aCars 和 $nCars）都有值，并且您想知道选择了哪些值。

您需要将数组转换为字符串以便打印。看看内爆函数。该函数允许您将数组元素“粘合”到一个字符串中。

```
$carString = implode(",", $aCars); // $carString will be 'Car1,Car2,Car3' 
```

从那里您可以将其附加到 $txt。

```
$txt .= "<tr><td>Car names</td><td>".$carString. "</td></tr>"; 
```

# php - 多个站点上的 APC 用户缓存密钥冲突

> ID：13291244
> 
> 赞同：3
> 
> 时间：2012-11-08T14:45:07.043
> 
> 标签：php, caching, apc

使用 APC 进行用户缓存，避免在同一服务器上运行的多个站点之间发生密钥冲突的最佳选择是什么？

我遇到了两个或多个站点使用相同的缓存键并期望在其下存储不同类型的项目的问题——一个期望一个 json 字符串，另一个期望一个数组，另一个期望一个对象。

他们是按站点划分 APC 的方法吗？

顺便说一句：我将 APC 与运行 prefork 和 mod_php 的 Apache 一起使用。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-11-08T14:55:01.027

也许您可以将服务器主机名附加到密钥中，您可以定义一个常量或创建一些模型来处理您的 APC：

```
<?php 
define('APC_HOST_KEY',$_SERVER['HTTP_HOST']);

apc_store(APC_HOST_KEY.'_value_key', $value);
?> 
```

# php - 在 XML DOM (PHP) 中获取段落

> ID：13291250
> 
> 赞同：2
> 
> 时间：2012-11-08T14:45:19.433
> 
> 标签：php, xml, dom, rss

我正在尝试从 boomkat.com RSS 提要创建新版本的数据库。Feed 位于此处： [链接](http://rss.boomkat.com/boomkat_downloads_just_arrived)

现在，我在选择段落标签内的内容时遇到了问题。

RSS 提要中的一段如下所示：

```
<p>GOAT<br/><a href="http://boomkat.com/downloads/601228-goat-world-music">World Music</a><br/>ROCKET RECORDINGS<br/>INDIE / ROCK / ALTERNATIVE<br/>MP3 Release</p> 
```

到目前为止我所做的是：

```
<?php

$dom = new DOMDocument;
$dom->validateOnParse = true;
$dom->load("http://feeds.boomkat.com/boomkat_downloads_just_arrived");
$content = $dom->getElementsByTagName('content');
foreach ($content as $result) {
    echo $result->nodeValue, PHP_EOL;
}
?> 
```

但这给了我全部的饲料。在 getElementsByTagName 中写入 'p' 不起作用。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-08T14:58:25.530

我建议使用 DOMDocument::loadHTMLFile() 方法而不是 DOMDocument::load() （因为 load() 严格用于读取 XML，而不是 HTML）。

您获取整个文档的原因是因为您正在查询整个文档以查找称为“内容”的元素。没有这样的 HTML 元素。相反，您应该使用

```
$dom->getElementsByTagName('p'); 
```

这将抓取 HTML 文档中的所有标签，然后您可以遍历它。使用“p”查询标签不起作用的主要原因是您需要将文档加载为严格的 HTML，而不是使用默认的 XML。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-09T17:00:50.533

好的，我不明白您为什么会遇到问题，但我只是尝试了您提供的 URL 的建议，并正确打印了每个 <p> 标记的所有文本。

这是代码：

```
$doc = new DOMDocument();
$doc->loadHTMLFile("http://boomkat.com/downloads/601228-goat-world-music");
$content = $doc->getElementsByTagName("p");

foreach($content as $element) {
    Util::debug($element->textContent); // helper method similar to PHP's var_dump()
} 
```

这是我能够打印到屏幕上的结果：

```
string(91) "Residual Echoes have come up with a really rather lovely disc of psychedelic folk goodness."

string(8) "MAMMATUS"

string(8) "Mammatus"

string(17) "ROCKET RECORDINGS"

string(45) "MP3 Download // £2.95FLAC Download // £3.95"

string(0) ""

string(19) "SERPENTINA SATELITE"

string(16) "Mecanica Celeste"

string(17) "ROCKET RECORDINGS"

string(45) "MP3 Download // £3.95FLAC Download // £4.95"

string(0) ""

string(12) "SUNCOIL SECT"

string(25) "One Note Obscures Another"

string(17) "ROCKET RECORDINGS"

string(45) "MP3 Download // £6.99FLAC Download // £7.99"

string(0) ""

string(16) "TEETH OF THE SEA"

string(10) "Hypnoticon"

string(17) "ROCKET RECORDINGS"

string(45) "MP3 Download // £2.50FLAC Download // £3.50"

string(52) "Proggy kosmiche rock from London's Teeth Of The Sea."

string(16) "TEETH OF THE SEA"

string(21) "Orphaned By the Ocean"

string(17) "ROCKET RECORDINGS"

string(45) "MP3 Download // £5.99FLAC Download // £6.99" 
```

这是您在代码中所做的事情吗？

# xcode - Xcode：在问题导航器中不显示警告

> ID：13291251
> 
> 赞同：1
> 
> 时间：2012-11-08T14:45:21.933
> 
> 标签：xcode, xcode4

我有一个带有大量警告的 Xcode 项目（我知道这很糟糕）。

但是我想使用问题导航器来定位错误？问题是所有警告实际上都在污染 Navigator，因此它无法使用。

有没有办法做到这一点？

请不要回答我应该删除此警告。我想这样做，但暂时不能。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-05T08:29:12.930

我最近找到了解决方案。导航器屏幕底部有一个小按钮。它正是我需要的。 ![在此处输入图像描述](../Images/a071e8d653e7814a4896a6dfdd4f01b8.png)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-08T16:14:37.043

您可以编辑您的 Xcode 项目设置并添加自定义编译器标志`-w`来禁止所有警告。

不过，你的处境很糟糕……

# jquery - 使用 Nuget 获取 jQuery

> ID：13291255
> 
> 赞同：3
> 
> 时间：2012-11-08T14:45:27.603
> 
> 标签：jquery, asp.net, visual-studio-2010, nuget

我是 ASP.NET 的新手，但对 Web 编程不熟悉（直到现在我才使用 PHP）。在处理我的第一个 ASP.NET 项目（实际上是维护一个现有项目）时，我想使用 jQuery。我听说它在 VS2010 中非常容易使用 - 只需使用 Nuget 安装它并使用它。所以我用 Nuget 安装了它，现在我不知道如何使用它！

我如何真正让它在我的 HTML 中可用？它似乎只是坐在 Scripts 文件夹中无所事事！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-08T14:49:42.773

只需在需要它的页面上添加对要使用的脚本的引用，例如，在 head-tag 中：

```
<head>
    <script type="text/javascript" src="/Scripts/jquery.min.js"></script>
</head> 
```

当然，`src`应该是相对于你的页面和脚本。

* * *

如果您使用的是 ASP.NET MVC 和 Razor 引擎，则可以使用：

```
<script type="text/javascript" src="@Url.Content("~/Scripts/jquery.min.js")"></script> 
```

理想情况下，您会将其添加到`_layout`文件`Views > Shared`夹中的文件中。这样它就会出现在所有页面（视图）上。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-08T14:51:52.763

我认为如果您使用的是 Visual Studio 2010，则默认应用程序模板已经包含 jQuery，因此无需使用 NuGet。

只需将 jQuery 脚本的引用添加到您需要的页面，就可以了：

```
<head runat="server">
    <script src="~/Scripts/jquery-1.4.1.js" type="text/javascript"></script>
</head> 
```

![在此处输入图像描述](../Images/bf587b68792704293317a4dc186f8c02.png)

对于 IntelliSense：还添加`jquery-1.4.1-vsdoc.js`.

![在此处输入图像描述](../Images/3e71290d5f75705acedfa85d7470b8b9.png)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-08T14:49:39.887

NuGet 只需下载 jQuery 库。您需要将脚本文件从顶部拖动到您的页面，VS 将自动创建表单的脚本引用：

```
<script src="~/Scripts/jquery... /> 
```

然后你就可以开始使用它了。

* * *

## 回答 #4

> 赞同：-2
> 
> 时间：2012-11-08T14:49:23.543

如果您的问题是如何在您的 html 中获取 JQuery，只需在 HTML 的头部添加一个脚本标签，因为您使用的是 VS2010，您应该能够将脚本文件拖放到 HTML 文件中，它将创建脚本标签

# java - Iterator.hasNext 应该没有副作用吗？

> ID：13291258
> 
> 赞同：2
> 
> 时间：2012-11-08T14:45:37.557
> 
> 标签：java

我正在编写一个迭代器，它通过委托给“当前”列表自己的迭代器来迭代列表列表。（不，我不是，但这是一个简单的例子）。现在，当我到达一个列表的末尾时，我需要更新委托以指向下一个列表的迭代器。我可以在“hasNext”中执行此操作吗？还是在返回给调用者之前在“下一步”中实施更好？我觉得“hasNext”最好是没有副作用的。您对此有何看法？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-11-08T14:47:54.577

`hasNext`只要从外部无法察觉，产生副作用是可以的。最重要的是，它必须是**幂等**的。实际上经常`hasNext`出现不获取就无法知道是否有next的情况，即使可以“取消获取”，缓存也是可以的。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-11-08T14:59:55.057

番石榴就是[`Iterators.concat`](http://guava-libraries.googlecode.com/svn-history/r46/trunk/javadoc/com/google/common/collect/Iterators.html#concat%28java.util.Iterator%29)这样做的。从javadocs，它：

> `public static <T> Iterator<T> concat(Iterator<? extends Iterator<? extends T>> inputs)`
> 
> 将多个迭代器组合成一个迭代器。返回的迭代器遍历 {@code 输入} 中每个迭代器的元素。输入迭代器只有在必要时才会轮询。

如果您查看[源代码](http://code.google.com/p/guava-libraries/source/browse/guava/src/com/google/common/collect/Iterators.java)，您将看到该`hasNext`方法将`current`迭代器更改为下一个迭代器，即它并非没有副作用，因此这种方法是可以的。

# c++ - Linux：如何测量进程内线程的内存使用情况？

> ID：13291260
> 
> 赞同：4
> 
> 时间：2012-11-08T14:45:55.407
> 
> 标签：c++, c, linux, multithreading

我想测量进程中每个线程的内存使用情况。是否可以？我试图找出哪个线程泄漏内存。

编辑 1\. 泄漏过程的 pmap 显示 [ anon ] 分配了 ~600

```
...
63b00000    772K rw---    [ anon ]
63bc1000    252K -----    [ anon ]
63c00000    772K rw---    [ anon ]
63cc1000    252K -----    [ anon ]
63d00000    772K rw---    [ anon ]
... 
```

关于下一步做什么的建议？

编辑 2\. 只有虚拟内存泄漏，例如物理内存使用稳定。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-11-08T14:48:01.170

不，这是不可能的，因为内存不是附加到线程而是附加到进程的。线程和内存的某些部分之间没有链接。

您似乎需要的是一个分析器，它将指向分配点。其中之一（在过去十年中没有使用过）是[Rational Purify](http://en.wikipedia.org/wiki/IBM_Rational_Purify)。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-09T11:09:09.930

您通常无法识别线程的内存使用情况，因为内存所有权可以在线程之间自由移动。内核映射表将向您展示整个进程的使用情况，即为所有线程分配的内存。

线程编程*很难*。除非你真的需要在线程之间自由共享指针和内存——这是一种相当讨厌的代码味道——如果你将程序重新设计为通过 IPC 通信的一群进程，那么调试可能会更容易，这也将迫使你考虑需要共享哪个状态。作为奖励，如果泄漏进程被证明是一个相对短暂的进程，则内存将返回到系统中，`exit()`而无需定位和修补泄漏。

# c# - 即使应用程序没有正常结束，也要关闭 RabbitMQ 连接

> ID：13291264
> 
> 赞同：6
> 
> 时间：2012-11-08T14:46:05.610
> 
> 标签：c#, rabbitmq

我将 RabbitMQ.Client（运行时版本 v2.0.50727，版本 2.8.1.0）与 C# .NET 应用程序一起使用。

我创建这样的连接：

```
using (IConnection connection = _factory.CreateConnection())
{
    using (IModel channel = connection.CreateModel())
    {
        // code...
    }
} 
```

如果我正确关闭应用程序，它只会关闭通道和连接。但如果应用程序被错误地关闭（例如按下 PC 上的重新启动按钮），则不是。我想确保在我启动我的应用程序之前关闭所有不必要的连接（来自以前的会话甚至其他应用程序，如果错误地应用程序的其他实例正在其他地方运行）。

我知道我可能会使用心跳，但我的应用程序可能需要很长时间才能开始做任何事情（打开连接数小时且未使用）。所以我认为心跳不是最好的事情。

如何关闭 RMQ 的所有打开的连接？（或者，更好的是，所有打开的连接，一个给定的 IP 除外）？

问候！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-12-19T11:26:09.173

我遇到了和你一样的问题。我尝试了很多方法来关闭这些连接。

这些方法，有些是作品，有些只是部分作品。也许你可以试一试。

1.  使用 rabbitmqctl 命令删除队列，然后使用 RMQ 的管理网站关闭连接。这意味着当前打开的队列将在 1 秒（1000 毫秒）后过期。这样所有队列都被删除。然后你可以关闭连接。

    **命令：**

    > rabbitmqctl set_policy expiry ".*" '{"expires":1000}' --apply-to 队列

    队列生存时间政策--> [https://www.rabbitmq.com/ttl.html](https://www.rabbitmq.com/ttl.html)

    这种方法部分有效。

2.  搜索后，想到原因可能是：

    您的生产者正在等待返回 ACK，在您发送 ACK 确认作业已完成之前，它不会被销毁。

3.  突然的方式。作品。RMQ 在其 DB menisa 中保存连接信息。

    **Step1：**先停止rabbitmq-server，通过'ps aux | kill rabbitmq线程 grep rabbitmq' 找到它的 pid 然后杀死所有 rabbitmq 线程。

    查找 RMQ DB mensia 位置 (1)。$> cd /var/lib/rabbitmq/

    **Step2：**将mensia文件重命名为“删除”（2）。$> mv mensia mensia-bak

    **Step3：**重启rabbitmq-server

    **第三种**方法现在对我有用。它可以关闭所有打开的连接。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-14T03:42:25.077

听起来 Heartbeats 是您最好的解决方案。出于同样的原因（不正常的关闭），我向我的 RabbitMQ 应用程序添加了心跳。消息之间的时间间隔很长并不重要，心跳只会验证双方的连接是否仍然打开。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2015-12-18T14:12:14.397

当我在控制台中打开工作程序并使用 ctrl+c 停止它时，我遇到了同样的问题。之后进程关闭，但连接仍然存在，并且在管理面板中可见。

*   **一种解决方案是在 RabbitMQ 管理面板中关闭连接**
*   或者您可以找到该进程并手动终止它**sudo kill -9 pid**
*   或者当你打开一个连接集**HEARTBEAT**。阅读[[死 TCP 连接]](https://www.rabbitmq.com/heartbeats.html)

# objective-c - 如何连续旋转图像

> ID：13291266
> 
> 赞同：6
> 
> 时间：2012-11-08T14:46:16.573
> 
> 标签：objective-c, ios, uiimageview, caanimation

我有一个 .png 格式的轮子图像，我想知道如何制作动画以使其连续旋转，我在 stackoverflow 上进行了搜索，发现某些代码片段可以帮助我旋转图像，但它不会连续旋转，它会只需旋转几秒就停止，代码如下

**viewdidload**中的代码

 **```
UIImageView *imageToMove =
[[UIImageView alloc] initWithImage:[UIImageimageNamed:@"horo_circle.png"]];
[self.view addSubview:imageToMove];

[self rotateImage:imageToMove duration:5.0 
            curve:UIViewAnimationCurveEaseIn degrees:180]; 
```

和动画

```
- (void)rotateImage:(UIImageView *)image duration:(NSTimeInterval)duration 
          curve:(int)curve degrees:(CGFloat)degrees
{
    // Setup the animation
    [UIView beginAnimations:nil context:NULL];
    [UIView setAnimationDuration:duration];
    [UIView setAnimationCurve:curve];
    [UIView setAnimationBeginsFromCurrentState:YES];

    // The transform matrix
    CGAffineTransform transform = 
    CGAffineTransformMakeRotation(DEGREES_TO_RADIANS(degrees));
    image.transform = transform;

    // Commit the changes
    [UIView commitAnimations];
} 
```

以及导入后的以下几行

```
#define M_PI   3.14159265358979323846264338327950288   /* pi */

#define DEGREES_TO_RADIANS(angle) (angle / 180.0 * M_PI) 
```

* * *

## 回答 #1

> 赞同：49
> 
> 时间：2012-11-08T14:54:42.073

你最好这样做`CABasicAnimation`：

```
if ([self.spinnerOverlay animationForKey:@"SpinAnimation"] == nil) {
    CABasicAnimation* animation = [CABasicAnimation animationWithKeyPath:@"transform.rotation.z"];
    animation.fromValue = [NSNumber numberWithFloat:0.0f];
    animation.toValue = [NSNumber numberWithFloat: 2*M_PI];
    animation.duration = 10.0f;
    animation.repeatCount = INFINITY;
    [self.spinnerOverlay.layer addAnimation:animation forKey:@"SpinAnimation"];
} 
```

在此代码中，我检查动画是否已设置好，无需再次设置。在`spinnerOverlay`您的情况下，`UIImageView`您要旋转。

停止动画：

```
 [self.spinnerOverlay.layer removeAnimationForKey:@"SpinAnimation"]; 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2015-05-27T23:37:26.410

下面的代码将持续旋转一个名为**iconView的****UIImageView**直到**rotate == NO**。

 ****图像将始终返回其原始位置。

```
- (void)performRotationAnimated
{
    [UIView animateWithDuration:0.5
                          delay:0
                        options:UIViewAnimationOptionCurveLinear
                     animations:^{

                         self.iconView.transform = CGAffineTransformMakeRotation(M_PI);
                     }
                     completion:^(BOOL finished){

                         [UIView animateWithDuration:0.5
                                               delay:0
                                             options:UIViewAnimationOptionCurveLinear
                                          animations:^{

                                              self.iconView.transform = CGAffineTransformMakeRotation(0);
                                          }
                                          completion:^(BOOL finished){

                                              if (_rotate) {

                                                  [self performRotationAnimated];
                                              }
                                          }];
                     }];
} 
```

这是同一主题的变体。

（总持续时间：2 * 0.5 = 1 秒旋转）

***像魔术一样工作！***

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2016-05-03T22:51:19.863

这是使用计时器的另一种方法。在您的 viewController.h 文件中，您需要声明您的计时器和图像：

```
@interface ViewController : UIViewController

{

    IBOutlet UIImageView *spinningImage;

    NSTimer *spinTimer;

} 
```

接下来，在您的 ViewController.m 中，添加此代码，并可以通过降低时间间隔或增加变换间隔来加快旋转速度。

```
-(void) viewDidLoad {
    spinTimer = [NSTimer scheduledTimerWithTimeInterval:.01 target: self selector:@selector(spinVoid) userInfo:nil repeats:YES];
}

-(void) spinVoid {

    spinningImage.transform = CGAffineTransformRotate(spinningImage.transform, 0.001);

} 
```

希望这可以帮助！

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-11-08T14:53:20.327

现在我们在 iOS6，请考虑切换到基于块的动画（自 iOS 4.0 起可用）而不是经典方法。尝试这个：

```
[UIView animateWithDuration:duration delay:0.0 options:UIViewAnimationOptionRepeat animations:^{

image.transform = CGAffineTransformMakeRotation(DEGREES_TO_RADIANS(degrees));

    } completion:nil]; 
```

* * *

## 回答 #5

> 赞同：-1
> 
> 时间：2012-11-08T14:54:34.020

使用您为动画选择的方法：

```
 [UIView setAnimationRepeatCount:10000000]; 
```

或者，您可以`UIViewAnimationOptionRepeat`在 blocks 方法中指定标志`animateWithDuration:delay:options:animations:completion:`******

# c# - 使用 ATL/COM 将托管字节 [] 转换为非托管字节数组

> ID：13291267
> 
> 赞同：3
> 
> 时间：2012-11-08T14:46:19.303
> 
> 标签：c#, c++, com, unmanaged, managed

我想使用 ATL/COM 将一些图像数据从 C# 代码传递到非托管 C++

从 C# 代码方面我做这样的事情：

```
void SendFrame([In, MarshalAs(UnmanagedType.SafeArray, SafeArraySubType=VarEnum.VT_UI1)] ref byte[] frameData); 
```

但我不确定我应该如何在我的 C++ 代码中处理这个函数。

现在我有这样的事情：

```
_ATL_FUNC_INFO OnSendFrameDef = { CC_STDCALL, VT_EMPTY, 1, { VT_SAFEARRAY | VT_UI1 } };

void __stdcall OnSendFrame(SAFEARRAY* ppData)
{
   BYTE* pData;
   SafeArrayAccessData(ppData, (void **) &pData);

   // Doing some stuff with my pData

   SafeArrayUnaccessData(ppData);
} 
```

谁能给我一些建议，让我如何让这件事发挥作用？

谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-09T11:51:20.543

我已经成功实现了我的目标！对于那些有兴趣的人：

我的事件处理程序描述符如下所示：

```
_ATL_FUNC_INFO Stream::OnStreamFrameCallbackDef = { CC_STDCALL, VT_EMPTY, 1, { VT_DISPATCH } }; 
```

我的 C++ 函数：

```
void __stdcall Stream::OnStreamFrameCallback(IDispatch* pFrame)
{
   // NOTE that this "IStreamFramePtr" is COM's Ptr of my "IStreamFrame"
   MyCOM::IStreamFramePtr pStreamFrame = pFrame;

   // Thanks casperOne♦ for this:
   CComSafeArray<byte> array;
                   array.Attach(pStreamFrame->GetBuffer());

   // Now I can do stuff that I need...
   byte* pBuffer = &array.GetAt(0);
} 
```

我的 .tlh 文件中的“IStreamFrame”如下所示：

```
struct __declspec(uuid("1f6efffc-0ac7-3221-8175-5272a09cea82"))
IStreamFrame : IDispatch
{
    __declspec(property(get=GetWidth))
    long Width;
    __declspec(property(get=GetHeight))
    long Height;
    __declspec(property(get=GetBuffer))
    SAFEARRAY * Buffer;

    long GetWidth ( );
    long GetHeight ( );
    SAFEARRAY * GetBuffer ( );
}; 
```

在我的 C# 代码中，我有这样的东西：

```
[ComVisible(true)]
[InterfaceTypeAttribute(ComInterfaceType.InterfaceIsIDispatch)]
public interface IStreamFrame
{
    int     Width   { [return: MarshalAs(UnmanagedType.I4)]         get; }
    int     Height  { [return: MarshalAs(UnmanagedType.I4)]         get; }
    byte[]  Buffer  { [return: MarshalAs(UnmanagedType.SafeArray, SafeArraySubType=VarEnum.VT_UI1)]  get; }
};

[ComVisible(false)]
public delegate void StreamFrameCallback(IStreamFrame frame);

[ComVisible(true)]
[InterfaceTypeAttribute(ComInterfaceType.InterfaceIsIDispatch)]
public interface IMyCOMStreamEvents
{
    [DispId(1)]
    void OnStreamFrameCallback([In, MarshalAs(UnmanagedType.IDispatch)] IStreamFrame frame);
} 
```

事情似乎工作得很好。但如果有人有任何建议或注意到我做错了什么，请告诉我。

谢谢。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-08T16:52:18.437

由于[`SAFEARRAY`](http://msdn.microsoft.com/en-us/library/windows/desktop/ms221482%28v=vs.85%29.aspx)已经编组到您的非托管代码，*并且*您正在使用 ATL，因此您可以使用[`CComSafeArray`class](http://msdn.microsoft.com/en-us/library/3xzbsee8%28v=vs.110%29.aspx)`SAFEARRAY` ，因为它在使用实例时处理所有清理工作：

```
_ATL_FUNC_INFO OnSendFrameDef = { CC_STDCALL, VT_EMPTY, 1, 
    { VT_SAFEARRAY | VT_UI1 } };

void __stdcall OnSendFrame(SAFEARRAY* ppData)
{
    // Wrap in a CComSafeArray.
    // On the stack means all calls to cleanup
    // will be cleaned up when the stack
    // is exited.
    CComSafeArray<byte> array;
    array.Attach(ppData);

    // Work with the elements, get the first one.
    byte b = array.GetAt(0);

    // And so on.  The destructor for CComSafeArray
    // will be called here and cleaned up.
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-10T16:29:56.373

我强烈建议您创建一个[IDL 文件](http://msdn.microsoft.com/en-us/library/windows/desktop/ms690150(v=vs.85).aspx)来[设计您的 COM 接口](http://msdn.microsoft.com/en-us/library/windows/desktop/ms688488(v=vs.85).aspx)。

鉴于您在回答中的示例，一个相当小的 IDL 文件可能是这样的：

```
import "oaidl.idl"; 

[object,
 uuid(1f6efffc-0ac7-3221-8175-5272a09cea82),
 dual,
 oleautomation]
interface IStreamFrame : IDispatch {
    [propget]
    HRESULT Width([out, retval] long *pWidth);

    [propget]
    HRESULT Height([out, retval] long *pHeight);

    [propget]
    HRESULT Buffer([out, retval] SAFEARRAY(byte) *pBuffer);
};

[uuid(1f6efffc-0ac7-3221-8175-5272a09cea83)]
library ContosoStreamFrame {
    importlib("stdole32.tlb");

    interface IStreamFrame;
}; 
```

然后，您可以使用[`midl.exe`](http://msdn.microsoft.com/en-us/library/windows/desktop/aa367300(v=vs.85).aspx)C/C++ 接口生成 .h、用于 C/C++ 链接的 CLSID 和 IID 常量的 _i.c、用于 RPC 注册的 dlldata.c、带有代理和存根编组的 _p.c 以及.tlb 通常是 .idl 文件的解析表示。[这在文档](http://msdn.microsoft.com/en-us/library/windows/desktop/aa366830(v=vs.85).aspx)中有更好的描述。

编辑：似乎[没有办法避免 C/C++ 文件生成](https://stackoverflow.com/q/6255268/800524)。

EDIT2：我刚刚找到了一种解决方法，`nul`用作您不想要的输出文件。例如，以下命令仅生成`file.tlb`：

```
midl.exe /header nul /iid nul /proxy nul /dlldata nul file.idl 
```

注意：如果您的`IStreamFrame`接口不打算跨进程使用，请将`local`属性添加到接口。

在 C/C++ 中，您可以使用生成的特定文件或[`#import`](http://msdn.microsoft.com/en-us/library/8etzzkb6.aspx)TLB 文件。在 .NET 中，您可以[`tlbimp.exe`](http://msdn.microsoft.com/en-us/library/tt0cf3sx.aspx)在生成 .NET 程序集的 TLB 文件上运行。

[`tlbexp.exe`](http://msdn.microsoft.com/en-us/library/hfzzah2c.aspx)如果您的项目以 .NET 为中心，您也可以使用。但是，这将要求您了解 .NET COM 注释以及它们在 IDL 方面的含义，因此我不确定以牺牲大量装饰为代价以另一种语言保存一个额外的源文件是否有任何好处接口和类定义中的噪音。如果您想在源代码级别完全控制类和接口，并且希望在 .NET 代码上尽可能简单（阅读、优化可用性和速度），这可能是一个不错的选择。

最后，您可以通过创建项目在 Visual Studio 中自动执行所有这些操作。如果您使用 IDL 方法，请添加一个自定义构建步骤，该步骤调用`midl.exe`并使`tlbimp.exe`依赖项目依赖此项目以获得正确的构建顺序。如果您使用 .NET 方法，请添加一个自定义构建步骤，该步骤调用`tlbexp.exe`并使依赖的 C/C++ 项目依赖于该项目。

编辑：如果您不需要从中生成的 C/C++ 文件`midl.exe`，您可以将`del`命令添加到特定输出文件的自定义构建步骤中。

EDIT2：或使用上述`nul`解决方法。

当类型库已经存在时，一种常用的方法是使用 Visual Studio 将其导入 .NET。但是这样一来，如果您更新 IDL 文件，您必须记住重新生成 TLB 并再次导入它。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-11-08T16:33:55.317

你考虑过 C++/CLI 吗？在您的 C++/CLI 中`ref class`，您将编写一个成员函数：

```
void SendFrame(cli::array<System::Byte> frameData)
{
    pin_ptr<System::Byte> p1 = &frameData[0];
    unsigned char *p2 = (unsigned char *)p1;

    // So now p2 is a raw pointer to the pinned array contents
} 
```

# wpf - 在为 UserControls 创建 VM 时，应该由谁来创建和设置 VM？

> ID：13291269
> 
> 赞同：1
> 
> 时间：2012-11-08T14:46:23.220
> 
> 标签：wpf, mvvm

我对如何在 MVVM 中布局我的代码感到有些困惑——如果我有一个带有相应 VM 类的 UserControl，其他控件应该如何使用我的 UserControl？

消费者应该直接绑定到 VM，还是应该只复制这些属性的子集，我想实际用作 UserControl 的 DependencyProperties？

就此而言，应该将 UserControl 的 VM 注入到 UserControl 的代码隐藏中，还是应该将使用此 UserControl 的任何控件的 VM 包含它作为依赖项并将其绑定到 UserControl？

为了清楚起见：假设我在 UserControl 中有一个 ListBox，并在已经用 MVVM 实现的 Window 中使用它。但我对 UserControl VM 和相应绑定的实现感到困惑。

我认为理想的解决方案是通过 UserControl 中的依赖属性公开 ListBox 的 SelectedItems，然后使用 UserControl 的 Window 将绑定到这些。

或者 Window 的 VM 是否应该将 VM 作为属性进行引用，是否将其注入并直接绑定到其上的属性？

依赖属性应该只在 UserControls 中定义还是可以/应该在 VM 中定义？

我认为窗口会从窗口的 XAML 中绑定，或者通过

```
{Binding ElementName=myUserControl, Path=SelectedItems} 
```

或者

```
{Binding Path=MyViewModel.SelectedItems} 
```

通过前者似乎更有意义，因为后者要求 View 知道另一个 VM？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-08T15:34:08.477

使用 WPF 和 MVVM 时请记住，您的`View`图层只是一种用户友好的方式来绘制您的`Models`and `ViewModels`，并且您`View`实际上并不是您的应用程序。您`View`实际上必须了解有关数据层的基础知识，以便它可以定义如何绘制它。

因此，如果您的应用程序需要显示`Items`并维护 a的列表`SelectedItem`，那么它应该在您的 ViewModel 或 Model 的某个地方，而不是在实际的 View 层中。

通常对我来说，UserControls 是以下两种情况之一：

*   `UserControl`可以在任何地方使用而无需特定的独立，`DataContext`并且可以公开`DependencyProperties`任何特定于控件的值。示例是`Calendar`控件或`Popup`控件之类的东西

    ```
    <local:MyUserControl Items="{Binding SomeItemList}" 
                         SelectedItem="{Binding SomeItem}" /> 
    ```

*   或者它们是`UserControl`用于特定的`ViewModel`。这对我来说更常见。ViewModel 是数据层某处的一个属性，我通常`DataTemplate`在应用程序中的某个地方隐含告诉 WPF 在`UserControl`它需要呈现特定的任何时候使用它`ViewModel`

    ```
    <DataTemplate DataType="{x:Type local:SomeViewModel}">
        <local:MyUserControl />
    </DataTemplate>

    <ContentPresenter Content="{Binding SomeViewModelProperty}" /> 
    ```

此外，任何时候都不应从内部设置`DataContext`a ，因为 UI 层仅是数据层（您的/ ）的 UI 表示，并且通过从内部设置数据层`UserControl``UserControl``Models``ViewModels``UserControl`您正在制作它以便`UserControl`不能用于绘制任何其他数据对象。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-08T14:57:01.457

*> 其他控件应该如何使用我的 UserControl？*

仅通过用户控件上的暴露依赖属性。

*> 消费者应该直接绑定到 VM，还是应该只复制这些属性的子集，我想实际用作 UserControl 的 DependencyProperties？*

每个控件都应该是一个独立的实体，不应该有任何秘密握手（来往或来自）来使用该控件。把你的设计想象成微软，许多不同的用户会使用你的控件。所以答案＃1同样相关；认为一个独立的实体。

*>我认为理想的解决方案是通过 UserControl 中的依赖属性公开 ListBox 的 SelectedItems，然后使用 UserControl 的窗口将绑定到这些。*

托管您的控件的窗口将有一个视图模型，其中包含一个可观察的数据项列表。这将保存用户控件将通过其依赖属性绑定的数据。将其视为具有许多消费者的生产者模式。消费者是控制者。控件是否有虚拟机与主程序的运行无关；因为每个控件都是它自己的岛。

# c++ - 带有模板类的函数模板特化

> ID：13291270
> 
> 赞同：4
> 
> 时间：2012-11-08T14:46:27.760
> 
> 标签：c++, function, templates, specialization, partial-specialization

> **可能重复：**
> [函数模板的部分特化](https://stackoverflow.com/questions/2215365/partial-specialization-of-function-template)

我在任何地方都找不到我的问题的解决方案，因为如果我用我想出的关键字进行搜索，我会得到适合不同问题的解决方案。我知道这必须以前问过，只是找不到解决方案。

假设我有一个函数模板：

```
template<class any> print(any value); 
```

我可以像这样专门化它，比如说`int`：

```
template<> print<int>(int value)
{
    std::cout << value;
} 
```

但是现在的问题是，我希望它也可以与向量一起使用。由于向量类是模板类，因此变得很困难。

像这样专门化功能：

```
template<class any> print<vector<any> >(vector<any> value) {} 
```

会产生以下错误（MinGW g++）：

```
FILE: error: function template partial specialization 'print<vector<any> >' is not allowed 
```

**请注意，函数 print 只是一个示例。**

我该如何解决这个问题？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-11-08T14:54:15.833

有一个通用的解决方法，其中函数模板只是将作业委托给类模板成员函数：

```
#include <vector>
#include <iostream>

template <typename T> struct helper {
    static void print(T value) { std::cout << value; }
};
template <typename T> struct helper<std::vector<T>> {
    static void print(std::vector<T> const &value) { }
};

template <typename T>
void print (T const &value) {
    // Just delegate.
    helper<T>::print (value);
}

int main () {
    print (5);
    std::vector<int> v;
    print (v);
} 
```

但是，如果您可以通过简单的函数重载来实现（如 ecatmur 和 Vaughn Cato 所建议的那样），请这样做。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-08T14:50:11.367

不要尝试专门化功能模板。改用重载

```
void print(int value)
{
    std::cout << value;
} 
```

和

```
template<class any>
void print(vector<any> value) {} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-08T14:52:02.077

不允许函数模板部分特化，因为它会导致违反单一定义规则。您通常可以只使用重载：

```
template<class any> print(vector<any> value) {} 
```

# javascript - 如何使用 javascript 更改所有链接

> ID：13291272
> 
> 赞同：12
> 
> 时间：2012-11-08T14:46:41.533
> 
> 标签：javascript, url, redirect, hyperlink

我想更改我网站的所有链接。假设 .Example [http://www.google.com/](http://www.google.com/)给出的链接更改为[http://www.mysite.com/?redirect=http://www.google.com/](http://www.mysite.com/?redirect=http://www.google.com/)

我有自己的重定向器，只是我需要通过 javascript 更改所有 url 的链接

* * *

## 回答 #1

> 赞同：30
> 
> 时间：2012-11-08T14:59:24.150

```
var anchors = document.getElementsByTagName("a");

for (var i = 0; i < anchors.length; i++) {
    anchors[i].href = "http://www.mysite.com/?redirect=" + anchors[i].href
} 
```

然后，您可以通过将代码包装在链接到 window.onload 事件的函数中来使代码在页面加载时运行：

```
window.onload = function() {
       /* onload code */
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-08T15:04:32.153

如果您在没有框架的情况下使用 javascript，则可以使用以下行：

```
var links, i, le;
links = document.getElementsByTagName('a');
for (i = 0, le = links.length; i < le; i++) {
    links[i].href = "http://www.mysite.com/?redirect=" + encodeURIComponent(links[i].href);
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-08T15:08:15.060

只是另一个版本，对本地链接进行了一些检查，[`.forEach()`](https://developer.mozilla.org/en-US/docs/JavaScript/Reference/Global_Objects/Array/forEach)

```
var links = [].slice.apply(document.getElementsByTagName("a"));
links.forEach(function(link) {
    var href = link.href;

    if (href.length && href.substring(0, 1) !== "#" && href.substring(0, 1) !== "/") {
        link.href = "http://www.mysite.com/?redirect=" + encodeURIComponent(link.href);
        console.log(link.href);
    }
}); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-11-08T14:58:14.593

```
$('a').each(function(i, e)
{
    var current = $(this);

    current.attr('href', 'http://www.mysite.com/?redirect=' + encodeURIComponent(current.attr('href')))
}); 
```

# http - 拦截来自 WebBrowser 控件的流量并在 WP8 上提供我自己的数据

> ID：13291279
> 
> 赞同：2
> 
> 时间：2012-11-08T14:46:55.703
> 
> 标签：http, webbrowser-control, windows-phone, windows-phone-8

在我的 Windows Phone 8 应用程序中，我有一个 WebBrowser 控件，我希望能够重新路由所有 http 流量，这意味着我拦截了 http GET 并从我的应用程序提供数据。不仅是 html，而且是所有流量（图像等）。我尝试使用 WebRequest.RegisterPrefix 注册我自己的 IWebRequestCreate 以提供我自己的 WebRequest。但是，我注册的 IWebRequestCreate 似乎仅用于我在自己的代码中实例化的 WebClient，而不是由 WebBrowser 控件使用。

我找到了这个线程：

[如何使用 WebBrowser 控件注册自己的协议？](https://stackoverflow.com/questions/4689237/how-to-register-own-protocol-using-the-webbrowser-control)

但似乎这种方法是不可能的。至少在 Windows Phone 7 中没有。我希望 WP8 能有更好的运气。或者也许一种完全不同的方法可以奏效？

有人可以帮帮我吗？

编辑：正如下面 Josh Mackey 所建议的那样。我也许可以通过代理运行一切。不幸的是，我不确定如何通过 Windows Phone 上的代码设置要在 webBrowser 控件上使用的代理。WP 上似乎既没有 WebRequest.DefaultWebProxy 也没有 wininet.dll。有人知道如何实现吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-10T04:03:38.887

正如您引用的链接所说：“WebBrowser 控件将使用 Windows Phone Internet Explorer 浏览器的 HTTP 堆栈”，因此您无法拦截它。但是，也许代理方法可能有效？

使用套接字创建一个简单的 Web 服务器，您可以告诉 WebBrowser 控件访问它吗？

我从这里得到了这个想法：[Windows phone WebBrowser.Navigating event form data](https://stackoverflow.com/questions/7301605/windows-phone-webbrowser-navigating-event-form-data)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-13T19:33:26.277

使用 WebBrowser 的 Navigating 事件（可以取消）等更简单的解决方案怎么样？

您必须在提供内容时提供自己的 HTML（我认为这不会触发此事件），但您可以执行以下操作

```
private void webBrowser_Navigating(object sender, NavigatingEventArgs e)
{
    if (e.Uri.ToString().StartsWith("myprotocol://", StringComparison.InvariantCultureIgnoreCase))
    {
         e.Cancel = true; // Cancels the request
         // my custom code here 
         // (where I go get the content and push it into the browser control by
         //     webBrowser.NavigateToString("MyContent");
         // )
    }
} 
```

这实际上应该适用于 WP7 和 8。

其他几件事：

1）您可能必须使用自己的忙碌小部件来指示应用程序忙碌，因为一旦取消导航，内置的小部件将不会出现

2）您需要记住将 Web 浏览器上的“IsScriptEnabled”属性设置为 true（也就是说，如果您需要启用 JavaScript。它默认为 false，IMO 很容易错过）

3）如果您需要在页面上进行后期处理，您还可以处理 Navigated 事件，该事件可让您在内容返回时覆盖内容（或对其进行更改）

# php - 从php中的pdf数据流中提取文本

> ID：13291280
> 
> 赞同：0
> 
> 时间：2012-11-08T14:46:57.090
> 
> 标签：php, pdf, text

> **可能重复：**
> [使用 PHP 从 pdf 中提取内容](https://stackoverflow.com/questions/1783066/extracting-content-from-pdf-using-php)

我有一个 url，它返回一个带有一些 pdf 数据和 html 的页面...我删除了 HTML 部分，现在数据字符串包含 pdf 格式的数据。我需要从这个字符串中提取 pdf 文件的文本内容。有吗一种在 php 中做到这一点的方法？我用谷歌搜索并发现没有可行的方法来做到这一点..数据以 %PDF 开头并以 EOF .B/w 结尾，有一些无法识别的字符（可能是二进制数据）

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-08T14:49:24.880

您可以使用[pdftotext](http://www.cyberciti.biz/faq/converter-pdf-files-to-text-format-command/)应用程序来获取 pdf 的内容。

# android - 缩放 WebView 以适应 Android 上的屏幕

> ID：13291282
> 
> 赞同：1
> 
> 时间：2012-11-08T14:47:09.197
> 
> 标签：android, html, webview

我有一个使用 HTML 帮助文件的应用程序，每个 Activity 一个文件。

WebView 以半透明方式出现在 Activity 之上。

我在尝试使 html 内容适合不同设备的屏幕时遇到一些问题

在我的 HTML 文件中，我有

```
<meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1"> 
```

我通过 addContentView 将我的 HelpView 添加到当前视图（带有布局参数 MATCH_PARENT ， MATCH_PARENT）

某些设备可以，但其他某些设备不行。

我也尝试覆盖 onDraw 方法来缩放绘图矩阵，但我得到了一些意外的结果。

在所有设备上将我的 html 作为全屏显示的任何建议（我不介意它是否有点拉伸）

# numpy - 可以增加使用 numpy 的有效位数吗？

> ID：13291289
> 
> 赞同：0
> 
> 时间：2012-11-08T14:47:37.270
> 
> 标签：numpy

当我减少代码中系数的值时，某些东西会停止工作。我可以除以零而没有错误消息吗？这可以通过增加有效数字的数量来解决吗？如何增加 numpy 中的有效位数？谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-08T14:59:55.173

Numpy 不支持任意精度。[看这里](http://trac.sagemath.org/sage_trac/ticket/8054)。他们拥有的标量类型[是这些](http://docs.scipy.org/doc/numpy/reference/arrays.scalars.html#arrays-scalars-built-in)。

考虑使用[分数模块](http://docs.python.org/2/library/fractions.html)或其他任意精度的库......

# c++ - 使用令牌和特权进行编程

> ID：13291292
> 
> 赞同：1
> 
> 时间：2012-11-08T14:47:42.753
> 
> 标签：c++, security, methods, token

我想创建一个权限有限的 C++ 程序。我在互联网上进行了一些研究，发现我必须创建一个令牌，然后使用 AdjustTokenPrivileges() 方法来更改其权限。

但是，我不太明白如何做到这一点。有人可以为我提供一个如何创建令牌并禁用其权限的示例吗？谢谢 ：）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-08T14:51:31.030

您是否查看了[使用 C++ 执行特权操作](http://msdn.microsoft.com/en-us/library/windows/desktop/aa390429%28v=vs.85%29.aspx)中的示例？似乎您只需要在使用 GetTokenInformation() 函数后弄清楚哪些令牌是哪些，然后禁用其中一些。

[编辑] 更详细地解释一下。

*   第一次调用 GetTokenInformation() 获取令牌特权信息对象的长度，以字节为单位。
*   然后，您实际上在堆上构建了一个该大小的缓冲区。
*   第二个调用检索令牌信息对象并将其存储在您的缓冲区中。
*   然后您将缓冲区重新转换为 TOKEN_PRIVILEGES*，这样您就可以正确解释它。
*   然后循环访问该对象的 Privileges 成员并将不同的属性设置为允许。

下面是[关于 TOKEN_PRIVILEDGES 结构的细节](http://msdn.microsoft.com/en-us/library/windows/desktop/aa379630%28v=vs.85%29.aspx)。[对于 Priviledges 数组的每个成员，您可以使用LookupPrivilegeName](http://msdn.microsoft.com/en-us/library/windows/desktop/aa379176%28v=vs.85%29.aspx)查找权限的名称。

这是[特权名称和描述](http://msdn.microsoft.com/en-us/library/windows/desktop/bb530716%28v=vs.85%29.aspx)的列表。

在您知道它是什么特权之后（即通过检查名称），您可以将 Priviledges[i] 成员的属性设置为以下之一

*   SE_PRIVILEGE_ENABLED
*   SE_PRIVILEGE_ENABLED_BY_DEFAULT
*   SE_PRIVILEGE_REMOVED
*   SE_PRIVILEGE_USED_FOR_ACCESS

在你的情况下，我认为它将主要是第三个。

# perl - Perl，Image::Magick，写入时丢失字节

> ID：13291293
> 
> 赞同：1
> 
> 时间：2012-11-08T14:47:43.110
> 
> 标签：perl, imagemagick

晚上好。

这儿存在一个问题。

```
my $image = Image::Magick->new;
$image->Read($upload->tempname . '[0]');
$image->Write(filename => $upload_file_name, compression => 'None'); 
```

执行后文件大小（$upload->tempname 和 $upload_file_name）不匹配。图像格式为 jpg（$upload->tempname 为 JPEG，$upload_file_name 为 JPEG）。可能有什么问题？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-08T14:52:17.223

Image::Magick 可能会重新编码图像，而不是使用与最初编码时完全相同的算法和参数。

如果您只是重命名文件，为什么还要使用 Image::Magick 呢？

# javascript - 选择 div 的内容 javascript 选择比需要更多的文本

> ID：13291298
> 
> 赞同：1
> 
> 时间：2012-11-08T14:48:02.870
> 
> 标签：javascript

我正在使用这个脚本来选择可选择的内容。但是它选择了比它应该选择的更多的文本，在这种情况下，应该只选择 URL。

[http://jsfiddle.net/PcvRK/2/](http://jsfiddle.net/PcvRK/2/)

```
function selectText() {
    if (document.selection) {
        var range = document.body.createTextRange();
        range.moveToElementText(document.getElementById('selectable'));
        range.select();
    } else if (window.getSelection) {
        var range = document.createRange();
        range.selectNode(document.getElementById('selectable'));
        window.getSelection().addRange(range);
    }
} 
```

任何想法如何解决这一问题？

我使用的是 Chrome，没有在其他浏览器中测试。

# process - 进程同步

> ID：13291300
> 
> 赞同：2
> 
> 时间：2012-11-08T14:48:06.473
> 
> 标签：process, synchronization, operating-system, critical-section

### 将一段代码指定为关键部分的因素

据我了解，`process synchronization`使用内核数据结构（例如`semaphores`）来防止`critical section`对代码的并发访问。**一般来说，我认为定义是，“关键部分是可以访问共享数据（或）共享资源的一段代码”。所以问题是：**

*   共享数据是一个用户空间实体。因此，用户进程有责任确保其访问的一致性。
*   我认为多个进程对资源的并发访问是内核应该注意的事情。那里需要什么样的用户级同步？
*   决定用户空间程序中的一段代码成为关键部分的因素是什么。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-09T04:51:47.287

You are mixing "kernel space/user space" with "critical section".
Kernel/User space only defines what kind of privilege does a process possess. If a thread is executing in user space it cannot access the physical memory directly. It has to go through kernel's virtual memory management.
On the other hand, critical section is part of the code that if executed by two processes in parallel could result in data corruption. This would be happening because of the fact that the code is accessing some shared resource.
Those two concept are independent. Critical section can be either in user space or kernel space. Some kind of synchronization is needed inorder for avoiding the corruption of a shared resource. Even in the case where two process/thread are running in kernel mode and want to access a shared resource, they need to apply some sort of synchronization mechanism(spinlocks or mutex).

I hope this explains helps.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-08T15:22:05.190

进程间同步可以通过命名的同步对象来实现。Windws[同步函数](http://msdn.microsoft.com/en-us/library/windows/desktop/ms686360%28v=vs.85%29.aspx#private_namespace_functions)提供例如命名互斥锁和命名信号量。请参阅Linux 的[此答案](https://stackoverflow.com/questions/9389730/is-it-possible-to-use-mutex-in-multiprocessing-case-on-linux-unix)。

多个进程的共享资源例如可以是共享内存。

使用`critical section`问题中完成的方式这个术语有点误导，因为有[关键部分对象](http://msdn.microsoft.com/en-us/library/windows/desktop/ms682530%28v=vs.85%29.aspx)（Windows）处理线程同步。

我怀疑您的意思更笼统，因为您也明确指出了流程。

但是，任何共享资源，无论是共享内存还是任何其他对象，都应在处理时受到保护以防止并发访问。

# android - ActionBarSherlock + HoloEverywhere + SlidingMenu EditText 问题

> ID：13291301
> 
> 赞同：0
> 
> 时间：2012-11-08T14:48:06.587
> 
> 标签：android, android-actionbar, actionbarsherlock, android-holo-everywhere

我最近一直在玩弄这些令人惊叹的库`ActionBarSherlock`：`HoloEverywhere`和`SlidingMenu`.

然后我偶然发现了这个奇怪的问题：当我在视图中添加一个 EditText 时，HoloEverywhere 主题工作正常。但是当我将 EditText 添加到 ActionBarSherlock 时，HoloEverywhere 主题不会覆盖默认主题。

这就是我将 EditText 添加到 ActionBarSherlock 的方式：

```
<RelativeLayout 
xmlns:android="http://schemas.android.com/apk/res/android"
android:layout_width="fill_parent" android:layout_height="wrap_content">

    <EditText 
    android:id="@+id/collapsibleEditText" 
    android:layout_width="fill_parent" 
    android:layout_height="wrap_content" 
    android:hint="@string/widget_searchview_title" 
    android:imeOptions="actionSearch" 
    android:inputType="text" android:paddingRight="35dip" />

    <Button 
    android:id="@+id/clearButton" 
    android:layout_width="30dip" 
    android:layout_height="30dip" 
    android:layout_alignParentRight="true" 
    android:layout_centerVertical="true" 
    android:layout_marginRight="5dip" 
    android:background="@drawable/navigation_cancel" />

</RelativeLayout> 
```

和

```
menu.add("Search")
.setIcon(R.drawable.ic_action_search)
.setActionView(R.layout.collapsible_edittext)
.setShowAsAction(MenuItem.SHOW_AS_ACTION_ALWAYS | 
    MenuItem.SHOW_AS_ACTION_COLLAPSE_ACTION_VIEW); 
```

这就是在模拟器上运行的样子（因为我手边没有预蜂窝设备）： ![演示](../Images/882289442fa1537fd81bbc7f300c0dd3.png)

这是一个已知的问题？我确信我在实施过程中搞砸了。谁能指导我解决这个问题？谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-08T23:19:23.697

最后，我认为 HoloEverywhere 对我的应用程序来说太重了，并决定手动包含并应用我需要使用的样式，这解决了我遇到的问题。

该解决方案基于此 SO 帖子： [https ://stackoverflow.com/a/10903421/690917](https://stackoverflow.com/a/10903421/690917)

# expressionengine - 具有 GWcode 类别的动态深度

> ID：13291302
> 
> 赞同：3
> 
> 时间：2012-11-08T14:48:09.923
> 
> 标签：expressionengine

我无法解决如何在 ExpressionEngine中创建具有[GWcode 类别的动态菜单。](http://gwcode.com/add-ons/gwcode-categories)我希望菜单仅针对当前`{segment_2}`（父）类别和其余父类别的深度保持为 1。

例如，如果 url 是：domain.com/products/medical-tables-cabinets/eta-classic-series/ 它将输出：

```
<ul class="nav-menu">
    <li><a href="#">Power Tables</a></li>
    <li class="active submenu"><a href="#">Medical Tables & Cabinets</a>
        <ul class="nav-submenu">
            <li><a href="#">ETA Alpha Series</a></li>
            <li class="active submenu"><a href="#">ETA Classic Series</a>
                <ul class="nav-submenu">
                    <li><a href="#">Entry A</a></li>
                    <li><a href="#">Entry B</a></li>
                    <li><a href="#">Entry C</a></li>
                </ul>
            </li>
            <li><a href="#">Style Line Cabinet Models</a></li>
            <li><a href="#">Echo Image Series</a></li>
            <li><a href="#">Bariatric Series</a></li>
            <li><a href="#">Family Practice</a></li>
            <li><a href="#">Treatment &amp; Bedside Cabinets</a></li>
            <li><a href="#">Managed Care Quick Cabinets</a></li>
            <li><a href="#">Recovery Couches</a></li>
        </ul>
    </li>
    <li><a href="#">Pediatric Equipment</a></li>
    <li><a href="#">Medical Seating</a></li>
    <li><a href="#">Blood Drawing Chairs</a></li>
    <li><a href="#">Tubular Steel & Accessories</a></li>
    <li><a href="#">Physical Therapy Equipment</a></li>
    <li><a href="#">Kangoo by Clinton</a></li>
    <li><a href="#">Training Room Furnishings</a></li>
    <li><a href="#">Index by Model #</a></li>
    <li><a href="#">Clinton-Eco Tables</a></li>
</ul> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-08T16:05:06.703

我得到了它的工作，但我仍然需要更深入一点。这是基本概念：

```
{exp:gwcode_categories
   channel="products"
   style="linear"
}
   {if depth1_start AND segment_2 != cat_url_title}
      <li><a href="/products/{complete_path}">{cat_name}</a></li>
   {/if}

   {if depth1_start AND segment_2 == cat_url_title}
      <li class="active submenu"><a href="/products/{complete_path}">{cat_name}</a>
         <ul class="nav-submenu">
   {/if}

         {if depth == 2 AND segment_2 == parent_url_title}
            <li{if segment_3 == cat_url_title} class="active"{/if}><a href="/products/{complete_path}">{cat_name}</a></li>
         {/if}

   {if depth1_end AND segment_2 == parent_url_title}
         </ul>
      </li>
   {/if}
{/exp:gwcode_categories} 
```

# javascript - THREE.js 通过鼠标矢量旋转对象

> ID：13291305
> 
> 赞同：1
> 
> 时间：2012-11-08T14:48:29.907
> 
> 标签：javascript, rotation, three.js, quaternions, onmousemove

我想用 THREE.js 构建一些类似的东西（http://www.goat1000.com/tagcanvas.php）（通过 Mouse-Vector 连续旋转 Objekt，没有任何抖动、间隙、中断或其他东西）...

我没有进入它 - 尝试了一些不同的场景（只需自己旋转每个轴，尝试 slerp 和四元数）。

你会发现我在提琴手上的一些实验。Slerp（看起来与 lookAt() 完全一样）：http: [//jsfiddle.net/DLta8/](http://jsfiddle.net/DLta8/)

```
var v = new THREE.Vector3( mouse2D.y, -mouse2D.x, 0 );
var q = new THREE.Quaternion().setFromEuler( v );
var newQuaternion = new THREE.Quaternion();
THREE.Quaternion.slerp( mesh.quaternion, q, newQuaternion, 0.07 );
mesh.quaternion = newQuaternion;
mesh.quaternion.normalize(); 
```

四元数（看起来不错，但重置为 quaternion.set( 0, 0, 0, 1 ) 很烂）：http: [//jsfiddle.net/vYvmk/](http://jsfiddle.net/vYvmk/)

```
var step = .025;    
var rotateQuaternion = new THREE.Quaternion();
rotateQuaternion.setFromAxisAngle( vector, step );
mesh.quaternion.multiplySelf( rotateQuaternion );
mesh.quaternion.normalize(); 
```

有什么提示吗？

# javascript - underscore.js 的替代解决方案

> ID：13291307
> 
> 赞同：1
> 
> 时间：2012-11-08T14:48:38.210
> 
> 标签：javascript, jquery, underscore.js

我创建了一个基于填充单词的网格的游戏

在我的代码中，我有一点 underscore.js，它可以帮助我的文字适应网格中的可用空间，而不会破坏网格障碍。

我知道它是非常强大的 java 脚本，个人对此没有任何问题。但是我的团队经理想为一些 jQuery 摆脱它，这将提供与只有一个函数相同的解决方案，并且可以节省我拥有一个完整的库。我将如何用一些 jQuery 替换它？

```
function getWordToFitIn(spaceAvail, wordlist) {
    var foundIndex = -1;
    var answer = _.find(wordlist, function (word, index) {
        if (word.length <= spaceAvail) {
            foundIndex = index;
            return true;
        }
    });
    if (foundIndex == -1) {
        answer = getXSpaces(spaceAvail);
        _.find(wordlist, function (word, index) {
            if (word[0] == " ") {
                foundIndex = index;
                return true;
            }
        });
    }
    if (foundIndex != -1) {
        wordlist.splice(foundIndex, 1);
    }
    return answer;
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-08T15:07:36.030

据我所知，您使用的唯一下划线方法是`_.find`. 但我认为您没有按预期使用它。看起来您只是在满足条件时循环并返回 true。

`forEach`如果您没有旧版支持，则可以使用本机，或者使用 shim。或者您可以使用该`jQuery.each`方法。

第一个循环*可能*（我不是 100% 确定`answer`变量）可以这样写：

```
var answer;
$.each(wordlist, function(index, word) {
    if (word.length <= spaceAvail) {
        foundIndex = index;
        answer = word;
        return false; // stops the loop
    }
}); 
```

第二个：

```
$.each(wordlist, function (index, word) {
    if (word[0] == " ") {
        foundIndex = index;
        return false;
    }
}); 
```

# r - 生成具有特定相关性的数字

> ID：13291308
> 
> 赞同：8
> 
> 时间：2012-11-08T14:48:43.920
> 
> 标签：r

如何生成一个数字序列，它具有特定的相关性（例如 0.56），并且将由……说 50 个数字与 R 程序组成？泰。

* * *

## 回答 #1

> 赞同：24
> 
> 时间：2012-11-08T15:05:06.583

## 假设您的意思是两个具有相关性 0.56 的值的正态/高斯向量

我们可以`mvrnorm()`从包**MASS中使用**

```
require(MASS)
out <- mvrnorm(50, mu = c(0,0), Sigma = matrix(c(1,0.56,0.56,1), ncol = 2),
               empirical = TRUE) 
```

这使

```
> cor(out)
     [,1] [,2]
[1,] 1.00 0.56
[2,] 0.56 1.00 
```

该`empirical = TRUE`位很重要，否则实现的实际相关性也受到随机性的影响，并且不会完全是规定的值，对于较小的样本具有较大的差异。

## 假设您的意思是 0.56 和高斯随机变量的滞后 1 相关性

为此，您可以使用以下`arima.sim()`功能：

```
> arima.sim(list(ar = 0.56), n = 50)
Time Series:
Start = 1 
End = 50 
Frequency = 1 
 [1]  0.62125233 -0.04742303  0.57468608 -0.07201988 -1.91416757 -1.11827563
 [7]  0.15718249  0.63217365 -1.24635896 -0.22950855 -0.79918784  0.31892842
[13]  0.33335688 -1.24328177 -0.79056890  1.08443057  0.55553819  0.33460674
[19] -0.33037659 -0.65244221  0.70461755  0.61450122  0.53731454  0.19563672
[25]  1.73945110  1.27119241  0.82484460  1.58382861  1.81619212 -0.94462052
[31] -1.36024898 -0.30964390 -0.94963216 -3.75725819 -1.77342095 -1.20963799
[37] -1.76325350 -1.20556172 -0.94684678 -0.85407649  0.14922226 -0.31109945
[43]  0.39456259  0.89610859 -0.70913792 -2.27954408 -1.14722464  0.39140446
[49]  0.66376227  1.63275483 
```

* * *

## 回答 #2

> 赞同：9
> 
> 时间：2012-11-08T15:57:21.523

如果您不想指定这些矩阵，其他选项`corgen`来自`ecodist`：

```
library("ecodist")
xy <- corgen(len = 50, r = 0.56, epsilon = 0.01) 
```

或滚动你自己的：

```
simcor <- function (n, xmean, xsd, ymean, ysd, correlation) {
    x <- rnorm(n)
    y <- rnorm(n)
    z <- correlation * scale(x)[,1] + sqrt(1 - correlation^2) * 
             scale(resid(lm(y ~ x)))[,1]
    xresult <- xmean + xsd * scale(x)[,1]
    yresult <- ymean + ysd * z
    data.frame(x=xresult,y=yresult)
} 
```

测试

```
> r <- simcor(n = 50, xmean = 12, ymean = 30, xsd = 3, ysd = 4, correlation = 0.56)
> cor(r$x,r$y)
[1] 0.56 
```

* * *

## 回答 #3

> 赞同：7
> 
> 时间：2012-11-08T14:55:57.123

使用`rmvnorm`from `mvtnorm`package 从多元正态分布中采样。例如对于 0.56 的相关性：

```
library("mvtnorm")
foo <- rmvnorm(10000,c(0,0),matrix(c(1,0.56,0.56,1),2,2)) 
```

测试：

```
> cor(foo[,1],foo[,2])
[1] 0.5611207 
```

# c++ - Qt 应用程序标题

> ID：13291310
> 
> 赞同：17
> 
> 时间：2012-11-08T14:48:51.317
> 
> 标签：c++, linux, qt, user-interface, gnome

我正在开发一个 Qt 应用程序

我设法使用方法设置主窗口标题

```
setWindowTitle("my title"); 
```

但是，这会更改应用程序顶部栏中的名称，它不会影响 gnome shell (ubuntu) 顶部栏中显示的标题，也不会影响执行 alt+tab 时显示的标题。

如何改变它？

我尝试在我的 .pro 文件中使用 DEPLOYMENT.display_name 变量

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-11-08T14:51:27.197

尝试在主代码中使用 QCoreApplication::setApplicationName("your title") 。

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2016-07-14T09:56:57.850

一旦以编程方式正确设置，要获取用作标题的应用程序名称，只需使用静态 getter 方法[`QCoreApplication::applicationName()`](http://doc.qt.io/qt-5/qcoreapplication.html#applicationName-prop)或[`QtGUIApplication::applicationDisplayName()`](http://doc.qt.io/qt-5/qguiapplication.html#applicationDisplayName-prop)（自 V5 起）。

从 V5 开始，如果未设置该属性，这些将回退到可执行文件名称。

示例使用：

```
QCoreApplication::setApplicationName( QString("My Application") );
setWindowTitle( QCoreApplication::applicationName() ); 
```

或者，使用 Qt Designer 设置窗口标题并使用`windowTitle()`.

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2019-06-02T12:12:55.337

*应用程序名称*与*窗口标题*不同。*窗口管理器通常将窗口标题*绘制到（主）窗口的*标题栏中*，而*应用程序名称*由（例如Gnome）用来表示*应用程序*本身。

Qt 似乎将其*构造函数签名**的第一个参数的第一项*传递给底层窗口管理器：

 *```
app = QApplication(('My Application Name',)) 
```

`QApplication.applicationName`似乎主要用于[应用程序内部目的](https://srinikom.github.io/pyside-docs/PySide/QtCore/QCoreApplication.html#PySide.QtCore.PySide.QtCore.QCoreApplication.applicationName)。

* * *

一个更完整（基本）的设置看起来像这样（在 Python 中，C++ 将是类似的）——而不是调用`MyQApplication`' 的超类的构造函数：

```
from PySide import QtCore, QtGui
import sys

class MyQApplication(QtGui.QApplication):
    def __init__(self, app_name):
        super(MyQApplication, self).__init__((app_name,))

        self.setApplicationName(app_name)

        self.main_window = QtGui.QMainWindow()
        self.main_window.setWindowTitle("My Application's Main Window")
        self.main_window.show()

if __name__ == '__main__':
    app = MyQApplication("My Application's Name")
    sys.exit(app.exec_()) 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2015-08-28T07:17:53.677

您可以在 Qt Creator 中的 Designer 并更改右侧的设置中的对象的标题。*

# sed - 给定目标字符串在该行中使用 sed、awk 等出现的次数的重复行

> ID：13291311
> 
> 赞同：0
> 
> 时间：2012-11-08T14:48:59.187
> 
> 标签：sed, awk

我想通过以下方式转换文件：

输入：

```
LOC100132062,LOC100133331   0.37927964653622    0.434306394092769   
ATAD3A,ATAD3B,ATAD3C    14.9379319811031    15.6244071876106    14.2514567745956    
MMP23A,SLC35E2  1.23714660156378    0.99559795831378    1.47869524481378    
.
.
. 
```

首选输出：

```
LOC100132062,LOC100133331   0.37927964653622    0.434306394092769
LOC100132062,LOC100133331   0.37927964653622    0.434306394092769
ATAD3A,ATAD3B,ATAD3C    14.9379319811031    15.6244071876106    14.2514567745956
ATAD3A,ATAD3B,ATAD3C    14.9379319811031    15.6244071876106    14.2514567745956
ATAD3A,ATAD3B,ATAD3C    14.9379319811031    15.6244071876106    14.2514567745956
MMP23A,SLC35E2  1.23714660156378    0.99559795831378    1.47869524481378
MMP23A,SLC35E2  1.23714660156378    0.99559795831378    1.47869524481378 
```

即对于每行中出现的每个字符串（此处为逗号），我想对其进行计数，然后将同一行复制相同的出现次数。所以在第一行有一个逗号，所以复制一次，在第二行有两个逗号，所以复制该行两次，等等。

理想情况下，第一列将是最初用逗号分隔的唯一字符串，但我对上面的内容也很满意！必须有一个简单的解决方案，但我似乎无法弄清楚。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-08T15:03:35.663

一种方法是为每个逗号分隔的字段打印一次，就像这样

```
awk -F, '{for (i=0;i<NF;i++) print }' input 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-10T09:49:38.663

在我看来，您要求进行中间步骤，而您想要的是：

```
perl -ne 's/(\S++)//;$a=$1;unshift(@b,$1)while s/(\S++)//;print"$_\t@{[pop@b]}\n"for split/,/,$a;@b=()' FILENAME 
```

当给出这个输入时：

```
LOC100132062,LOC100133331   0.37927964653622    0.434306394092769   
ATAD3A,ATAD3B,ATAD3C    14.9379319811031    15.6244071876106    14.2514567745956    
MMP23A,SLC35E2  1.23714660156378    0.99559795831378    1.47869524481378 
```

产生以下输出：

```
LOC100132062    0.37927964653622
LOC100133331    0.434306394092769
ATAD3A  14.9379319811031
ATAD3B  15.6244071876106
ATAD3C  14.2514567745956
MMP23A  1.23714660156378
SLC35E2 0.99559795831378 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-08T15:06:09.760

要从 Perl 获取输出，您可以使用

```
perl -ape 'print $_ x $F[0] =~ y/,//' 
```

标量上下文中的翻译返回出现次数。

如果您只想每行保留一个逗号分隔的字符串，您可以将其更改为

```
perl -ane 's/.*?\s//; for my $s (0 .. $F[0] =~ tr/,//) {print +(split /,/, $F[0])[$s], " $_"}' 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-11-08T15:26:38.490

这可能对您有用（GNU sed）：

```
sed 'h;:a;G;s/^[^,]*\n//;t;s/^[^,]*,//;ta' file 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-11-08T15:00:46.683

```
awk '{i=gsub(",",",");for (x=0;x<=i;x++) print $0}' x.dat 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-11-08T16:02:39.540

另一个使用 Perl：

```
perl -F"," -ane 'print $_ x @F;' file 
```

# string - 在 Excel VBA 项目中匹配相似但不精确的文本字符串

> ID：13291313
> 
> 赞同：4
> 
> 时间：2012-11-08T14:49:04.933
> 
> 标签：string, excel, vba, merge, match

好的，我一直在尝试为此找到解决方案，但我似乎无法做到。我什至无法正确分解问题。这就是想法。

我有两张多行的表（一张有 800 行，另一张有 300,000 行）。每行包含一个名称列，然后是几个包含有关此名称的信息的列。每张表都有不同种类的信息。

我想将这两个工作表合并到一个基于它们都有的 Name 列的主工作表中，因此合并功能非常适合。现在的问题是名称不完全匹配。

例如 Sheet1 包含

“公司 BV”、“信息 #1”
“公司总数”、“信息 #2”
“公司有限公司”、“信息 #3”

第 2 页包含

“公司和公司”、“信息 #4”
“公司和公司”、“信息 #5”

表 1 包含将要使用的所有名称（大约 100，但如上所述以不同的形式），表 2 包含多行中的所有这些 100 以及不在 100 列表中的名称，因此我不关心。

我将如何制作一个 VBA 代码项目，最终结果将是这样的，主表：

“公司”、“信息#1”、“信息#2”、“信息#3”、“信息#4”、“信息#5”

对于那里的每一个“公司”（100 名单）？

我确实希望有一个解决方案。我对 VBA 项目还很陌生，但我以前做过一些最小的编码。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-12T18:46:52.177

我会将宏放在您的个人部分，这样宏在所有工作表中都可用。通过录制一个虚拟宏并选择将其存储在个人宏工作簿中来做到这一点。现在您可以在此个人工作簿中手动添加新的宏和功能。

我刚试过这个（不知道原始来源），效果很好。

公式如下所示： =PERSONAL.XLSB!FuzzyFind(A1,B$1:B$20)

代码在这里：

```
Function FuzzyFind(lookup_value As String, tbl_array As Range) As String
Dim i As Integer, str As String, Value As String
Dim a As Integer, b As Integer, cell As Variant
For Each cell In tbl_array
  str = cell
  For i = 1 To Len(lookup_value)
    If InStr(cell, Mid(lookup_value, i, 1)) > 0 Then
      a = a + 1
      cell = Mid(cell, 1, InStr(cell, Mid(lookup_value, i, 1)) - 1) & Mid(cell, InStr(cell, Mid(lookup_value, i, 1)) + 1, 9999)
    End If
  Next i
  a = a - Len(cell)
  If a > b Then
    b = a
    Value = str
  End If
  a = 0
Next cell
FuzzyFind = Value
End Function 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-11-09T06:25:45.127

您可以 Google Excel UDF 模糊查找或 Levensthein 距离。有一些 UDF 浮动，微软也有一个模糊查找/匹配插件（当我使用它时，它很容易崩溃并且不直观）。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2015-11-24T12:39:12.697

我使用了罗伯特解决方案，它对我来说很好。我正在为那些不熟悉 excel 但知道编码的人发布完整的解决方案：

虽然这个线程很旧，但我从另一个线程中获取了一些代码并尝试过，看起来解决方案给出了近似匹配。在这里，我试图将 sheet1 的一列与 sheet2 的一列匹配：

1.  在excel中添加命令按钮
2.  输入以下代码并单击/运行按钮和函数为您提供选定列的结果

```
 Private Sub CommandButton21_Click()
     Dim ws As Worksheet
     Dim LRow As Long, i As Long, lval As String

   '~~> Change this to the relevant worsheet
    Set ws = ThisWorkbook.Sheets("Sheet1")

With ws
    '~~> Find Last Row in Col G which has data
    LRow = .Range("D" & .Rows.Count).End(xlUp).Row

    If LRow = 1 Then
        MsgBox "No data in column D"
    Else
        For i = 2 To LRow

             lval = "D"
            .Range("G" & i).Value = FuzzyFind(lval & i, .Range("PWC"))
        Next i
    End If
    End With

    End Sub

    Function FuzzyFind(lookup_value As String, tbl_array As Range) As String
    Dim i As Integer, str As String, Value As String
    Dim a As Integer, b As Integer, cell As Variant

    For Each cell In tbl_array
     str = cell
     For i = 1 To Len(lookup_value)
      If InStr(cell, Mid(lookup_value, i, 1)) > 0 Then
     a = a + 1
     cell = Mid(cell, 1, InStr(cell, Mid(lookup_value, i, 1)) - 1) & Mid   (cell, InStr(cell, Mid(lookup_value, i, 1)) + 1, 9999)
    End If
     Next i
     a = a - Len(cell)
     If a > b Then
       b = a
       Value = str
    End If
       a = 0
    Next cell
      If Value <> "" Then
         FuzzyFind = Value
      Else
         FuzzyFind = "None"
      End If
End Function 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-11-08T22:24:08.603

看看[这个 DDoE 帖子](http://www.dailydoseofexcel.com/archives/2012/09/13/string-diffing/)上的功能。您可以生成一个最长的公共序列字符串并将其长度与原始字符串进行比较。给它一些已知的匹配和一些接近的不匹配，看看你是否能看到它们之间的清晰分界线。

这些函数用于比较，而不是查找紧密匹配，但它们可能对您有用。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2018-04-05T21:44:38.487

不完全正确但类似，处理***我的***问题的人可能会在搜索时找到***此***页面。

**任务：**一份曾遭遇车祸的患者名单，包括街道地址。根据相同的街道地址查找相关帐户。该列表最多可能有 120 条记录——因此***部分***人工审查是现实的。

**问题：**街道地址相似但不相同，例如 123 JONES LANE 和 123 JONES LN 或 72 MAIN STREET #32 和 72 MAIN STREET #32。

***部分***解决方案是仅比较街道号码。对于这样大小的列表，具有相同街道编号的两个不同地址是不常见的（例如，123 JONES LANE 和 123 MAIN STREET）。

**注意：**您不能使用 VAL() 来提取街道号码。试试 167 E 13 ST。VBA 将其视为 167^13，如果您将 Street_Num 作为整数输出，则会崩溃。因此，您必须使用循环将数字拉入新字符串并在第一个非数字字符处停止。

# wcf - WCF 联合自托管与 IIS 托管设置差异

> ID：13291316
> 
> 赞同：2
> 
> 时间：2012-11-08T14:49:13.293
> 
> 标签：wcf, iis-7.5, wif, federation

我在 .NET 4.0 下有一个 WCF 服务，它使用 WIF 3.5 和 ws2007FederationHttpBinding 绑定。目前它作为自托管服务运行（成功），但我希望它在 IIS7.5 下运行。但是我无法让它工作。

我对此没有深入的了解或经验，因此我通过简单地将适用于自托管的配置复制到 web.config 来解决此问题。它们几乎相同，除了`behaviors\servicebehaviors\behavior\serviceCredentials\serviceCertificate`在 IIS 托管的情况下似乎需要添加，但对于自托管则不需要（我不知道为什么）。两种服务设置的客户端配置也相同（除了端点地址）。测试自托管和 IIS 托管服务发生在同一台机器上，我已经尝试使用 VS 开发服务器、IIS Express 和常规 IIS 来测试 IIS 托管服务。客户端在同一台机器上。STS 在另一台机器上。

涉及 3 个 (x509) 证书。服务的证书和 STS 使用的签名证书，都在自签名根证书下。DefaultAppPool（托管 Web 服务的地方）可以访问这两个证书。据我所知，没有涉及 SSL。

我可以让 IIS 托管服务运行，并且可以请求元数据。当我提出实际请求时会发生错误。客户端错误似乎很笼统：

```
An unsecured or incorrectly secured fault was received from the other party. See the inner FaultException for the fault code and detail.
  An error occurred when verifying security for the message. 
```

客户端的 svc 跟踪日志说的几乎相同。

服务器错误不会引发错误，但 svc 日志会显示：

```
The X.509 certificate CN=sts.public.example.com chain building failed. The certificate that was used has a trust chain that cannot be verified. Replace the certificate or change the certificateValidationMode. The revocation function was unable to check revocation for the certificate.

System.IdentityModel.Selectors.X509CertificateChain.Build(X509Certificate2 certificate)
System.IdentityModel.Selectors.X509CertificateValidator.ChainTrustValidator.Validate(X509Certificate2 certificate)
System.IdentityModel.Selectors.X509SecurityTokenAuthenticator.ValidateTokenCore(SecurityToken token)
System.IdentityModel.Selectors.SecurityTokenAuthenticator.ValidateToken(SecurityToken token)
System.IdentityModel.Selectors.SamlSecurityTokenAuthenticator.ResolveClaimSet(SecurityToken token)
System.IdentityModel.Selectors.SamlSecurityTokenAuthenticator.ValidateTokenCore(SecurityToken token)
System.IdentityModel.Selectors.SecurityTokenAuthenticator.ValidateToken(SecurityToken token)
System.ServiceModel.Security.ReceiveSecurityHeader.ReadToken(XmlReader reader, SecurityTokenResolver tokenResolver, IList`1 allowedTokenAuthenticators, SecurityTokenAuthenticator&amp; usedTokenAuthenticator)
System.ServiceModel.Security.ReceiveSecurityHeader.ReadToken(XmlDictionaryReader reader, Int32 position, Byte[] decryptedBuffer, SecurityToken encryptionToken, String idInEncryptedForm, TimeSpan timeout)
System.ServiceModel.Security.ReceiveSecurityHeader.ProcessEncryptedData(EncryptedData encryptedData, TimeSpan timeout, Int32 position, Boolean eagerMode, Boolean&amp; primarySignatureFound)
System.ServiceModel.Security.ReceiveSecurityHeader.ExecuteFullPass(XmlDictionaryReader reader)
System.ServiceModel.Security.ReceiveSecurityHeader.Process(TimeSpan timeout, ChannelBinding channelBinding, ExtendedProtectionPolicy extendedProtectionPolicy)
System.ServiceModel.Security.MessageSecurityProtocol.ProcessSecurityHeader(ReceiveSecurityHeader securityHeader, Message&amp; message, SecurityToken requiredSigningToken, TimeSpan timeout, SecurityProtocolCorrelationState[] correlationStates)
System.ServiceModel.Security.SymmetricSecurityProtocol.VerifyIncomingMessageCore(Message&amp; message, String actor, TimeSpan timeout, SecurityProtocolCorrelationState[] correlationStates)
System.ServiceModel.Security.MessageSecurityProtocol.VerifyIncomingMessage(Message&amp; message, TimeSpan timeout, SecurityProtocolCorrelationState[] correlationStates) 
```

sts.public.example.com 是 STS 的签名证书。我不知道在哪里放置这个 certificateValidationMode 以及为什么它应该与 IIS 不同。

身份模型有一个自定义 issuerNameRegistry 和 claimAuthorizationManager ，服务行为有 serviceAuthorizationManager ，但在错误之前甚至没有一个被击中。因此，当服务器从客户端接收到签名的令牌并且 IIS 本身以某种方式无法验证证书（疯狂的随机猜测）时，可能会发生错误。

我会给你配置文件和代码示例，但是因为我不知道究竟什么是相关的，什么不是，所以这一切都很多，但如果需要任何澄清，我会尽快添加。

我尝试尽可能关闭证书验证和吊销检查，并摆弄了许多我几乎不了解的设置，但毫无结果。[这篇文章](http://social.msdn.microsoft.com/Forums/en-US/windowscardspace/thread/b0216a9d-ddcb-46af-b207-b860a7346376)似乎有片刻的希望，但我真的不知道建议的解决方案适合哪里，并且考虑到它可能不再相关的日期。

如果有人能指出解决方案的方向和/或解释自托管和 IIS 托管服务之间的设置/配置要求的差异，那将非常有帮助。

# javascript - Firefox 中奇怪的选择框行为

> ID：13291320
> 
> 赞同：4
> 
> 时间：2012-11-08T14:49:21.230
> 
> 标签：javascript, html, css

我遇到了一个仅在 Firefox (v.16.0.2) 中出现的问题，并且仅在某些选择框中出现。单击选择框时，下拉部分显示在页面底部，而不是直接在选择框下方（参见问题末尾的图片）。

所有的框都是直接的 HTML，如下所示：

```
<select name="province" id="Province">
    <option value="0">Please Select...</option>
    <option value="1">Alberta</option>
    <option value="2">British Columbia</option>
</select> 
```

我们在整个系统中都有这些类型的输入，但它只出现在某些页面上 - 然后只出现在这些页面上的一些选择框上。例如，如果一个页面有一个省/州选择框和一个国家选择框，那么只有省/州一个会被破坏。

我已经比较了页面之间的 CSS 和 Javascript，并选择了有效和无效的选择框，我看不出有任何区别。有没有人见过这种类型的问题？

![显示选择框异常的图像](../Images/eb2076ccabd436fa1d2ae503bff2c25d.png)

编辑：如果我打开了 Firebug，下拉部分会跳来跳去（下到页面底部，然后回到选择框本身），但它确实返回并正常运行。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-08T14:58:05.027

有针对此问题的错误修复：[https](https://bugzilla.mozilla.org/show_bug.cgi?id=807174) ://bugzilla.mozilla.org/show_bug.cgi?id=807174 。截至 11 月 5 日，该修复程序似乎在他们的 beta 版本中。我想它很快就会上市。

# macos - 在 OS X 上使用 cocos2d 捕获显示（以及 Kiosk 模式问题）？

> ID：13291322
> 
> 赞同：1
> 
> 时间：2012-11-08T14:49:23.547
> 
> 标签：macos, cocos2d-iphone, kiosk

我用 cocos2d 为 Mac 构建了一个应用程序，并实现了[Apple 为 Kiosk 应用程序推荐的步骤](http://developer.apple.com/library/mac/#technotes/tn2062/_index.html)。我的目标是拥有一个不允许退出应用程序并捕获所有键盘输入的全屏应用程序。

问题是，在扩展键盘上，Kiosk 模式不会捕获控制 iTunes 的功能键或 F4 Launchpad 键。在禁用进程切换的情况下，用户仍然可以通过按 F4 来切换进程。（我为此提交了一个雷达，因为它应该在 Kiosk 模式下被禁止。）我尝试子类化 NSApplication。我可以使用以下代码检测这些键的按下：

```
- (void)mediaKeyEvent: (int)key state: (BOOL)state repeat: (BOOL)repeat
{
    switch( key )
    {
        case NX_KEYTYPE_PLAY:
            if( state == 0 )
                NSLog(@"Play pressed and released"); //Play pressed and released
            break;

        case NX_KEYTYPE_FAST:
            if( state == 0 )
                NSLog(@"Next pressed and released"); //Next pressed and released
            break;

        case NX_KEYTYPE_REWIND:
            if( state == 0 )
                NSLog(@"Previous pressed and released"); //Previous pressed and released
            break;

        case NX_KEYTYPE_LAUNCH_PANEL:
            if( state == 0 )
                NSLog(@"Launchpad pressed and released"); //Previous pressed and released
            break;
    }
} 
```

我试图通过自定义实现来拦截它们`- (void)sendEvent: (NSEvent*)event`，但无论我在那里做什么，它们都会被发送到系统。

[根据Apple 编程说明](https://developer.apple.com/library/mac/#documentation/graphicsimaging/Conceptual/QuartzDisplayServicesConceptual/Articles/DisplayCapture.html)，解决方案似乎是“捕获显示” 。当您捕获显示时，应用程序会拦截所有键盘输入，并且不会将任何键盘输入进一步发送到系统。这一切都很好，我已经能够在香草应用程序中做到这一点。

`CCGLView.m`然而，在我的 cocos2d OS X 应用程序中，OpenGL 和 GLView 的控制是在几个核心 cocos2d 文件中处理的，即`CCDirectorMac.m`. 我花了几个小时试图调整这些文件以捕获显示，但无法使其工作。

作为参考，这是我正在做的（在 中`AppDelegate.m`）进入 Kiosk 模式：

```
- (void)applicationDidFinishLaunching:(NSNotification *)aNotification
{
    ...

    NSApplicationPresentationOptions options = NSApplicationPresentationHideDock + NSApplicationPresentationDisableProcessSwitching + NSApplicationPresentationHideMenuBar;
    NSNumber *presentationOptions = [NSNumber numberWithUnsignedLong:options];
    NSArray *keys   = [NSArray arrayWithObjects:@"NSFullScreenModeAllScreens", @"NSFullScreenModeApplicationPresentationOptions", nil];
    NSArray *values = [NSArray arrayWithObjects:[NSNumber numberWithBool:YES], presentationOptions, nil];
    NSDictionary *fullScreenOptions = [[NSDictionary alloc] initWithObjects:values forKeys:keys];

    [glView_ enterFullScreenMode:[NSScreen mainScreen] withOptions:fullScreenOptions];

    [director runWithScene:[MyLayer scene]];
} 
```

如何***在 cocos2d 中***捕获显示（注意：这与截屏不同！）并防止功能键与我的应用程序以外的任何内容对话？

* * *

**附加信息：** `-enterFullScreenMode:withOptions:`确实捕获显示，但前提是您不`NSFullScreenModeApplicationPresentationOptions`作为选项之一发送。Apple 文档在 NSView 和 Kiosk 模式文档中指定了这一点：

> 当您传递给的选项字典 `enterFullScreenMode:withOptions:`确实包含 的值时 `NSFullScreenModeApplicationPresentationOptions`，AppKit 不会捕获任何显示，因为这样做会阻止显示 PresentationOptions 控制的 UI 元素，例如菜单栏和 Dock。

尽管如此，当您捕获显示时，媒体/iTunes/音量功能键不会被截获，这是我在写这个问题时试图回答的问题的一部分。我向 Apple 提出了技术支持问题，因为似乎无法禁用它们。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-18T20:35:42.440

切换`fn`和普通键功能：

*   系统偏好
*   键盘
*   使能够`Use all F1, F2, etc. keys as normal keys`

然后，您可以使用+访问正常`F`功能（提高音量、降低音量）并捕获正常键。`fn``F12``F`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-19T07:26:33.643

您可能需要查看 CarbonEvents.h 以获取有关使用`PushSymbolicHotKeyMode`/ `PopSymbolicHotKeyMode`with的信息`kHIHotKeyModeAllDisabled`。

* * *

## 回答 #3

> 赞同：-2
> 
> 时间：2017-01-26T20:05:27.337

3.  进入命令行：launchctl unload -w /System/Library/LaunchAgents/com.apple.rcd.plist

# c++ - 如何使用 QSignalMapper 发送自定义结构的实例？

> ID：13291328
> 
> 赞同：0
> 
> 时间：2012-11-08T14:49:42.547
> 
> 标签：c++, qt, struct, signals-slots

我有一个自定义结构，它的哪些实例与**QAction**实例相关联。我希望在执行操作时使用我的结构的相应实例执行一个插槽。

我设法使用**QSignalMapper通过对****QObject**进行子类化来封装我的结构的实例来使其工作。但是，当它们到达插槽时，我的结构的所有值都不正确 - 它们似乎未初始化。

如果我发送一个原始类型（例如**int**代替结构），甚至发送类似**QAction**的东西，一切正常。

有可能做我想做的事吗？如果是这样，我错过了什么？

谢谢，艾伦

**编辑：添加代码示例**

以下是我如何连接 QSignalMapper。注意：STRUCT_WRAPPER 派生自 QObject。

```
/* Connect signal mapper to selected slot */
connect(signalMapper, SIGNAL(mapped(QObject *)), this, 
    SLOT(on_selected(QObject *)));

/* For all structures */
for(x = 0; x < structureCount; x++)
{
    /* Create action */
    QAction * action = ui.menu->addAction("Name");

    /* Get current structure */
    MY_STRUCT myStruct = structList[x];

    /* Create wrapper */
    STRUCT_WRAPPER * structWrapper = new STRUCT_WRAPPER(this, myStruct);

    /* Map struct to action */
    signalMapper->setMapping(action, structWrapper);
} 
```

这是我获得未初始化值的位置：

```
void on_selected(QObject * object)
{
    /* Get structure wrapper */
    STRUCT_WRAPPER * structWrapper = (STRUCT_WRAPPER *)object;

    /* Get structure */
    MY_STRUCT myStruct = structWrapper->GetStruct();

    /* ID is always uninitialised */
    int id = myStruct.ID;
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-08T15:50:17.213

不要使用 QSignalMapper，它会强制您创建自定义 STRUCT_WRAPPER，而是尝试使用[QAction::setData](http://doc.qt.digia.com/qt/qaction.html#setData)方法，它接受任何 QVariant

此外，请确保使用[Q_DECLARE_METATYPE将您的结构注册到 Qt 元类型系统](http://doc.qt.digia.com/qt/qmetatype.html#Q_DECLARE_METATYPE)

然后，只需将所有 QAction 连接到同一个插槽，并使用[http://qt-project.org/doc/qt-4.8/qobject.html#sender](http://qt-project.org/doc/qt-4.8/qobject.html#sender)检索发出信号的 QAction：

```
void MyWindow::on_selected() {
    QAction *action = qobject_cast<QAction *>(sender());
    Q_ASSERT(action);

    MY_STRUCT myStruct = action->data().value<MY_STRUCT>();
} 
```

另外，避免使用 C 风格的强制转换。如果您正在向下转换 QObjects，请改用 qobject_cast（它依赖于 MetaObject 信息并且不需要额外的 RTTI 功能）：

```
STRUCT_WRAPPER * structWrapper = qobject_cast<STRUCT_WRAPPER *>(object;) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-08T14:59:12.970

你为什么不只是使用自定义类来完成这项工作？通过从 qobject 派生它并使用一些插槽/信号，它会做你想要的。

我不知道为什么你的结构得到无效值，所以最好得到一些代码作为例子:)

Soo long zaiborg

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-08T15:32:32.587

```
void on_selected(QObject * structWrapper)
{
    /* Get structure */
    MY_STRUCT myStruct = structWrapper->GetStruct();

    /* ID is always uninitialised */
    int id = myStruct.ID;
} 
```

我认为问题是，QObject* 不知道 GetStruct() 应该做什么......它应该在编译 oO 时抛出错误

也许试试

```
MY_STRUCT myStruct = <dynamic_cast>(STRUCT_WRAPPER*)->GetStruct(); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-11-13T10:56:24.707

感谢所有有用的指针。

最后，我意识到唯一需要映射的信息是结构数组中的索引。通过使数组全局化，我可以使用传递的索引从我的插槽中访问它。

在这种情况下，我不想使用 Q_DECLARE_METATYPE，因为我宁愿在我的 API 库上没有 QT 依赖项。否则，八进制的建议也会奏效。

# c++ - D3DX11CreateShaderResourceViewFromFile 链接器错误

> ID：13291329
> 
> 赞同：1
> 
> 时间：2012-11-08T14:49:55.947
> 
> 标签：c++, linker, textures, linker-errors, directx-11

我正在开发一个 directX 11 项目，但遇到了一个奇怪的链接错误。函数 D3DX11CreateShaderResourceViewFromFile 引发 LNK2019 错误。

有没有我想念的图书馆？我可以找到 d3d11tex.h 中的声明，但程序没有找到实现。

我错过了什么？似乎我已经包含并引用了我需要的所有内容......此外，正如我所提到的，我可以达到声明。

**错误：**

错误 1 ​​错误 LNK2019：未解析的外部符号 _D3DX11CreateShaderResourceViewFromFileW@24 在函数“public: __thiscall Texture2d::Texture2d(struct ID3D11Device *,wchar_t *)”中引用 (??0Texture2d@@QAE@PAUID3D11Device@@PA_W@Z) Z:\Year 4\Coursework\Coursework\Coursework\Texture2d.obj 课程

**这是代码（.cpp），包括：**

```
#include <d3d11.h>
#include <d3dx11.h>

Texture2d::Texture2d(ID3D11Device* device, WCHAR* fileName)
{
    D3DX11CreateShaderResourceViewFromFile(device, fileName, NULL, NULL, &m_texture, NULL);
} 
```

**库目录：** C:\Program Files (x86)\Microsoft DirectX SDK（2010 年 6 月）\Lib\x86

**包含目录：** C:\Program Files (x86)\Microsoft DirectX SDK（2010 年 6 月）\Include C:\Program Files (x86)\Microsoft DirectX SDK（2010 年 6 月）\Samples\C++\Effects11\Inc

**编辑！** 我忘了显示我的图书馆链接，但有人想出了一个解决方案，甚至没有看它。实际上，它缺少 d3dx11.lib。

```
#pragma comment(lib, "d3d11.lib")
#pragma comment(lib, "d3dcompiler.lib")
#pragma comment(lib, "dxerr.lib")
#pragma comment(lib, "Effects11.lib") 
```

# css - 在 html div 中用逗号而不是空格来包装单词

> ID：13291332
> 
> 赞同：5
> 
> 时间：2012-11-08T14:50:00.737
> 
> 标签：css, word-wrap

我需要使用逗号（，）换行文本。有没有办法使用 CSS 或其他方法来做到这一点。

```
Nomal A1, High A2(4), Low A3 
```

如果空间不够，应该这样换行，逗号应该是唯一换行的地方。

```
Nomal A1, High A2(4),
Low A3 
```

这不应该像这样包装

```
Nomal A1, High A2(4), Low
A3 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-11-08T15:01:05.077

将每一对包裹在跨度中，并将它们设计成不会断裂，就像这样。

html

```
<div class="paired-text">
<span>Nomal A1,</span> <span>High A2(4),</span>
        <span>Low A3</span>
</div> 
```

CSS

```
.paired-text span{ white-space: nowrap; } 
```

`&nbsp;`或者，您可以在要粘在一起的每对单词之间呈现一个不间断的空格 ( )。我更喜欢我提供的第一个想法，它更干净。

```
Nomal&nbsp;A1, High&nbsp;A2(4), Low&nbsp;A3 
```

它有点难看，但代码更少。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-08T17:16:24.233

最安全的方法是使用[`nobr`标记](http://www.cs.tut.fi/~jkorpela/html/nobr.html)（它从未出现在任何规范中，但一直是最可靠的方法）：

```
<nobr>Nomal A1,</nobr> <nobr>High A2(4),</nobr> <nobr>Low A3</nobr> 
```

使用更详细的`span`标记和 CSS 代码`white-space: nowrap`几乎同样可靠，但自然会失败，例如在浏览器中禁用 CSS 支持时。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-08T14:51:58.630

虽然 CSS 有一个[`word-wrap`](https://developer.mozilla.org/en-US/docs/CSS/word-wrap)属性，但没有基于字符的换行选项。一般来说，CSS 仅限于样式。

您需要使用能够识别视口并可以操纵 DOM 的客户端技术（即 JavaScript）来执行此操作。

# c - fseek 在 EOF 字符上

> ID：13291334
> 
> 赞同：0
> 
> 时间：2012-11-08T14:50:10.510
> 
> 标签：c, eof, fseek

我目前正在使用`fgetc()`循环读取整个文件。

但我需要`EOF`在这个循环的两次迭代中检测。我知道`EOF`不能使用`ungetc()`.

怎么用

```
fseek(file, -1, SEEK_CUR) 
```

`EOF`在使用之前获取`fseek`并再次阅读它是否安全且便携？

谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-08T14:52:40.657

在大多数操作系统上，`EOF`不是文件中存在的物理字符。它只是一个虚拟的“带外”字符，`fgetc()`它返回表示没有更多输入的信号。

为什么你需要`EOF`再次获得？文件中没有更多数据，那么“备份”再次到达文件末尾有什么意义呢？

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-08T15:34:39.463

您可以使用

```
fseek(file, 0, SEEK_END) 
```

如果您尝试从中读取，您将获得第二个 EOF。

**编辑：**

更仔细地阅读参考资料：**“允许库实现无意义地支持 SEEK_END（因此，使用它的代码没有真正的标准可移植性）。”**

我想您的解决方案在可移植性方面是最好的。

小心 fseek （作为一个注释，因为我相信这不是你的情况）：[使用 fseek 回溯](https://stackoverflow.com/questions/780303/using-fseek-to-backtrack?rq=1)

# php - 我应该在重新填写表单时使用 xss_clean 还是 htmlentities？

> ID：13291336
> 
> 赞同：0
> 
> 时间：2012-11-08T14:50:16.203
> 
> 标签：php, security, codeigniter, xss

正如标题所说，我确实像这样补充我的输入：

```
<input type="text" name="my_input" value="<?= $this->input->post('my_input') ?>"/> 
```

但这安全吗？按照 CodeIgniter 用户指南，我可以将 的第二个参数设置为`$this->input->post()`，`TRUE`然后输入将通过该`xss_clean`函数进行过滤，但这真的有必要吗？或者也许我应该`htmlentities()`在这样做的时候使用函数？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-05T20:48:19.950

CodeIgniter 有一个 prep_for_form() 函数，特别是为此。我没有看过代码，但如果我是你，我会去那里看。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-09T13:52:32.687

每次您将希望被视为文本的字符串输出到 HTML 标记中时，都必须使用 HTML 转义函数。出于实际原因，我会推荐`htmlspecialchars()`过去`htmlentities()`，但它们在质量上并没有什么不同。对于您引用的示例代码，这绝对是正确的做法。

CI`xss_clean`是一种用于输入处理的清理功能。就我个人而言，我认为这是一个笨拙的、被误解的不一致的包，它会不必要地破坏你的输入并导致奇怪的错误。但无论哪种方式，它都是一种深度防御措施，并不能免除您对 HTML 转义的责任。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-08T14:52:52.443

我建议改为[消毒过滤器](http://www.php.net/manual/en/filter.filters.sanitize.php)。

# c# - 将字符串转换为 unicode 表示

> ID：13291339
> 
> 赞同：20
> 
> 时间：2012-11-08T14:50:20.073
> 
> 标签：c#, .net, string

> **可能重复：**
> [将 Unicode 字符串转换为转义的 ascii 字符串](https://stackoverflow.com/questions/1615559/converting-unicode-strings-to-escaped-ascii-string)

我怎样才能转换`ä...`成类似的东西 `\u0131...`？

有什么功能可以做到这一点吗？

ps：

除此之外：[对不起@Kendall Frey :-)]

```
char a = 'ä';
string escape = "\\u" + ((int)a).ToString("X").PadLeft(4, '0'); 
```

* * *

## 回答 #1

> 赞同：28
> 
> 时间：2012-11-08T14:57:51.937

这是一个将 char 转换为转义序列的函数：

```
string GetEscapeSequence(char c)
{
    return "\\u" + ((int)c).ToString("X4");
} 
```

它不会比单线更好。

不，据我所知，没有内置功能。

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2012-11-08T15:04:42.667

没有内置函数 AFAIK。这是一个非常愚蠢的解决方案。但是 Kendall Frey 提供了更好的变体。

```
string GetUnicodeString(string s)
{
    StringBuilder sb = new StringBuilder();
    foreach (char c in s)
    {
        sb.Append("\\u");
        sb.Append(String.Format("{0:x4}", (int)c));
    }
    return sb.ToString();
} 
```

# ajax - Wicket 1.5 - 在 Target Ajax 之后 timePicker 丢失

> ID：13291342
> 
> 赞同：0
> 
> 时间：2012-11-08T14:50:25.973
> 
> 标签：ajax, wicket, timepicker

我有一个带有“timePicker”作为 CSS 类的 TextField。Wicket 在 TimePicker 中更改此输入（以选择小时和分钟）。

此输入位于 WebMarkupContaner 内。在特定的 Ajax 事件之后，整个容器都是 Targeted

```
target.add(container); 
```

所以里面的输入。不幸的是，输入失去了 timePicker 实用程序成为一个简单的文本字段。

我已经尝试使用浏览器 Javascript 调试来启动：

```
$("#inputId").timePicker(); 
```

并且输入返回为 TimePicker。我推断 Wicket 仅在第一页呈现时附加该行为。

如何在 Ajax 目标之后添加 .timePicker() 行为？

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-08T19:03:17.770

你可以尝试两件事：

1) 将您的 JavaScript 代码添加到 <script /> 标记内容器的 HTML 标记中：

```
<script type="text/javascript">
    $("#inputId").timePicker();
</script> 
```

2) 将 JavaScript 附加到 AJAX 调用以呈现整个容器：

```
target.add(container);
// append initialization JavaScript to AJAX call
target.appendJavascript("$(\"#inputId\").timePicker();"); 
```

# scala - 在 scala 中调用 akka 演员的方法

> ID：13291346
> 
> 赞同：10
> 
> 时间：2012-11-08T14:50:46.580
> 
> 标签：scala, akka, actor

我有一个这样定义的演员：

```
class nodeActor(ID: String) extends Actor 
```

其中包含一个方法，用于在启动之前设置参与者：

```
def addRef(actor:ActorRef) 
```

我这样实例化这个演员：

```
val node1 = system.actorOf(Props(new nodeActor("node1")), name="node1") 
```

它返回给我一个 ActorRef。编译器不允许我在 ActorRef 上调用“addRef”，因为它是子类型的成员。所以我使用以下方法投射节点：

```
node1.asInstanceOf[nodeActor].addRef(link1) 
```

这让编译器很高兴。然后在运行时我得到

```
java.lang.ClassCastException: akka.actor.LocalActorRef cannot be cast to ActorStressTest.nodeActor 
```

这对我来说似乎没有意义，因为它是一个子类型，我应该能够转换它。

想法？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-11-14T16:18:56.650

如果您想这样做以进行测试，那么在创建演员时，您可以这样做：

```
import akka.testkit.TestActorRef
val actorRef = TestActorRef[MyActor]
val actor = actorRef.underlyingActor 
```

然后你可以在actor上运行方法

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-11-08T16:23:13.213

你不应该直接从另一个类调用演员的方法。它打破了系统的整体设计，即

*   通过仅与`ActorRef`通过调用`actorOf`或`actorFor`
*   使用可用的 ( `!`, `?`) 方法将参与者之间的通信限制为消息传递

如果您需要创建`ActorA`对另一个的引用，`ActorB`您可以：

*   [在http://doc.akka.io/docs/akka/2.0.3/scala/actors.html](http://doc.akka.io/docs/akka/2.0.3/scala/actors.html)`ActorB`中`ActorA`的初始化代码中创建 ref
*   将`ActorB`' 引用`ActorA`作为特定消息发送。然后`ActorA`可以将引用存储在`receive`实现中

如果您需要调用方法来满足接口/特征约束，请查看[Typed Actors](http://doc.akka.io/docs/akka/2.0.3/scala/typed-actors.html)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-08T16:27:05.343

您可以将任何内容强制转换为任何内容，编译器会很乐意这样做，但如果不可能，运行时的检查将失败。`ActorRef`不是您的类的实例或`Actor`它的子类型。

当你这样做时：

```
system.actorOf(Props(new nodeActor("node1")), name="node1") 
```

您会返回一个`ActorRef`您应该只向其发送消息的地方。除此之外，当您调用 时，actor 会立即启动`system.actorOf`，因此在实例启动之前尝试调用实例上的方法`Actor`是不可能的。

这是来自[Akka Docs](http://doc.akka.io/docs/akka/2.0.3/general/actors.html)的 Actor 描述，解释了 Actor 引用。

# ruby-on-rails - 我修复了失败的 Rails 迁移，但为什么这个修复有效？

> ID：13291347
> 
> 赞同：2
> 
> 时间：2012-11-08T14:50:55.977
> 
> 标签：ruby-on-rails, ruby

我生成了一个新的 rails 迁移：

```
rails generate migration some_new_column_to_table 
```

**编辑：** ——

运行迁移：

```
rake db:migrate 
```

更新的测试数据库：

```
rake db:test:prepare 
```

意识到我没有在更改方法中添加任何内容，然后

更新了迁移文件：

```
class AddSomeColumnToTable < ActiveRecord::Migration
  def change
    add_column :table, :some_column, :string
    add_index :table, :some_column
  end
end 
```

运行迁移（再次）：

```
rake db:migrate 
```

更新的测试数据库（再次）：

```
rake db:test:prepare 
```

运行这些命令后，“some_column”尚未添加到数据库中。我在这里找到了解决这个问题的方法：[rake db:migrate is not working](https://stackoverflow.com/questions/9896488/rake-dbmigrate-is-not-working)

```
rake db:drop:all
rake db:create:all
rake db:migrate 
```

为什么这解决了问题？以后如何预防？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-08T15:25:35.323

目前尚不清楚您的问题是什么。但是您的最后一条命令确实可以解决问题。

```
rake db:drop:all  << drop the database
rake db:create:all  << create the database (not the tables)
rake db:migrate << build up the database based on the migrations 
```

根据我的经验，迁移不会“停止工作”，它们完全按照布局进行，因为它们只不过是单独的命令。但是，它们需要按顺序执行，因此如果您开始编辑迁移，则必须知道迁移是否已运行。迁移问题通常是我们乱序编辑的结果。最安全的方法是不要编辑已经运行的迁移。首先执行以下任一操作：

```
rake db:rollback  << rollback the last migration (you can do this multiple times)
rake db:migrate VERSION=00000   << This will rollback to a specific migration
rake db:rollback STEP=2 << rollback 2 migrations 
```

希望这会有所帮助。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-08T15:31:54.307

我不能说这个问题是肯定的，但值得一试。

你可能搞砸了迁移。

编辑迁移是不安全的，除非它在任何计算机上都没有被迁移过。

例如，假设您创建了一个添加字段的迁移，就像您所做的那样。然后您意识到不再需要该字段，并将其从迁移中取出。

但是，如果您已经运行了迁移，它会将文件保留在您的数据库或您的案例中，它不会添加该字段。

因此，在使用迁移时，尽量不要编辑旧的迁移。总是创造新的。

# solr - 获取对给定字段具有特定值的 solr 文档的唯一字段

> ID：13291352
> 
> 赞同：0
> 
> 时间：2012-11-08T14:51:14.347
> 
> 标签：solr, solrj

我正在检索我的 solr 数据库中所有文档的字段列表。这是以简单的方式完成的：

```
NamedList<Object> queryResult = solrServer.request(new LukeRequest()); 
```

但是，我的要求略有变化，现在我需要类似但有一个限制的东西。我想将字段限制为仅将给定字段设置为特定值的文档字段：

给我所有将“foo”字段设置为“bar”的文档的唯一字段。

我可以通过 LukeRequest 实现这一目标吗？如果是这样，怎么做？如果现在，还有其他方法可以达到这个结果吗？

Somebackground：我的架构中有许多动态字段，并从各种数据源导入文档。每个数据源都有一个我真正知道的字段，该字段对于数据源是唯一的，但动态字段因数据源而异。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-08-07T15:29:40.127

你应该能够使用类似的东西来获得它：

```
HttpSolrServer server = new HttpSolrServer(url);
SolrQuery solrQuery = new SolrQuery().setQuery("foo:bar");  
QueryResponse rsp = server.query(solrQuery); 
```

# c - ISO C90 禁止在 C 中混合声明和代码

> ID：13291353
> 
> 赞同：93
> 
> 时间：2012-11-08T14:51:25.743
> 
> 标签：c, variables

我以这种方式声明了一个变量：

```
int i = 0; 
```

我收到警告：

> ISO C90 禁止混合声明和代码

我该如何解决？

* * *

## 回答 #1

> 赞同：146
> 
> 时间：2012-11-08T14:53:40.873

我认为您应该将变量声明移到块的顶部。IE

```
{
    foo();
    int i = 0;
    bar();
} 
```

到

```
{
    int i = 0;
    foo();
    bar();
} 
```

* * *

## 回答 #2

> 赞同：41
> 
> 时间：2012-11-08T16:22:06.387

在 C99 标准之前，所有声明都必须位于块中的任何语句之前：

```
void foo()
{
  int i, j;
  double k;
  char *c;

  // code

  if (c)
  {
    int m, n;

    // more code
  }
  // etc.
} 
```

C99 允许混合声明和语句（如 C++）。许多编译器仍然默认使用 C89，并且一些编译器（例如 Microsoft 的）根本不支持*C99*。

因此，您将需要执行以下操作：

1.  确定您的编译器是否支持 C99 或更高版本；如果是，请对其进行配置，使其编译 C99 而不是 C89；

2.  如果您的编译器不支持 C99 或更高版本，您将需要找到支持它的其他编译器*，*或者重写您的代码，以便所有声明都位于块中的任何语句之前。

* * *

## 回答 #3

> 赞同：11
> 
> 时间：2012-11-08T15:46:03.050

只需使用编译器（或为其提供所需的参数），以便为 C 标准的更新版本 C99 或 C11 进行编译。例如，对于 GCC 编译器系列，它将是`-std=c99`.

* * *

## 回答 #4

> 赞同：5
> 
> 时间：2013-05-09T09:05:17.667

确保变量位于块的顶部，如果您使用 编译它，请`-ansi-pedantic`确保它看起来像这样：

```
function() {
    int i;
    i = 0;

    someCode();
} 
```

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2012-11-08T23:48:15.180

要诊断真正触发错误的原因，我会首先尝试删除`= 0`

*   如果错误被触发，那么很可能声明在代码之后。

*   如果没有错误，那么它可能与 C 标准执行/编译标志或 ...其他东西有关。

在任何情况下，都要在当前作用域的开头声明变量。然后您可以单独初始化它。事实上，如果这个变量值得拥有自己的范围 - 在 {} 中划定它的定义。

如果 OP 可以澄清上下文，那么就会有更直接的回应。

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2018-10-30T12:16:29.467

**`-Wdeclaration-after-statement`最小可重现示例**

主程序

```
#!/usr/bin/env bash

set -eux

cat << EOF > main.c
#include <stdio.h>

int main(void) {
    puts("hello");
    int a = 1;
    printf("%d\n", a);
    return 0;
}
EOF 
```

发出警告：

```
gcc -std=c89 -Wdeclaration-after-statement -Werror main.c
gcc -std=c99 -Wdeclaration-after-statement -Werror main.c
gcc -std=c89 -pedantic -Werror main.c 
```

不要发出警告：

```
gcc -std=c89 -pedantic -Wno-declaration-after-statement -Werror main.c
gcc -std=c89 -Wno-declaration-after-statement -Werror main.c
gcc -std=c99 -pedantic -Werror main.c
gcc -std=c89 -Wall -Wextra -Werror main.c
# https://stackoverflow.com/questions/14737104/what-is-the-default-c-mode-for-the-current-gcc-especially-on-ubuntu/53063656#53063656
gcc -pedantic -Werror main.c 
```

警告：

```
main.c: In function ‘main’:
main.c:5:5: warning: ISO C90 forbids mixed declarations and code [-Wdeclaration-after-statement]
     int a = 1;
     ^~~ 
```

在 Ubuntu 16.04、GCC 6.4.0 上测试。

# java - 创建线程以在有限计数循环中打印出消息

> ID：13291357
> 
> 赞同：0
> 
> 时间：2012-11-08T14:51:30.370
> 
> 标签：java

我不是在要求答案，我知道这可能会得到很多反对，但我走了。我从哪里开始？我对并发编程的大部分笔记都是红色的，但仍然不明白他们想从我这里得到什么。你们知道有什么好的教程吗？关于我使用 join、sleep 还是 isAlive 方法的问题？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-08T14:55:14.957

是的，请查看文档中的示例：

[http://docs.oracle.com/javase/tutorial/essential/concurrency/simple.html](http://docs.oracle.com/javase/tutorial/essential/concurrency/simple.html)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-08T14:58:11.280

我建议您从头到尾阅读此[Java 并发教程](http://www.vogella.com/articles/JavaConcurrency/article.html)。然后你可以创建一个 Callable 任务并提交给执行者。新的 Callable 任务的职责是无限运行打印出消息...下面的示例代码

```
while (true)
{
  System.out.println("I am going to print this forever")
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-08T15:01:44.810

我建议您在尝试使用低级功能之前学习[高级并发对象。](http://docs.oracle.com/javase/tutorial/essential/concurrency/highlevel.html)

# c - 如何使用c显示字符`£`？

> ID：13291359
> 
> 赞同：0
> 
> 时间：2012-11-08T14:51:30.393
> 
> 标签：c, encoding, iso-8859-1

参考 ISO 8859-1 标准后，我知道字符`£`有值`0xa3`，我想用 c 显示它，所以我写了这个程序：

```
#include <stdio.h>

int main()
{
        printf( "\\xa3 is: %c.\n", '\xa3' );
        printf( "£ is: %c.\n", '£' );

        return 0;
} 
```

我将此源代码文件保存为 iso 8859-1 编码。我希望我的程序在遇到每个`£`时显示两次。`printf``%c`

但是，它不起作用，为什么？如何修改我的程序以实现我的目标。

我正在使用Linux。

**编辑：**

它的显示是这样的：

```
\xa3 is: �.
£ is: �. 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-08T15:02:36.167

看起来您的终端运行的是 UTF-8 而不是 8859-1。尝试这个：

```
#include <stdio.h>

int main(void)
{
    printf("\\xC2\\xA3 is: %s.\n", "\xC2\xA3");
    printf("£ is: %s.\n", "£");
    return 0;
} 
```

在我的 Mac（终端以 UTF-8 运行）上，输出为：

```
\xC2\xA3 is: £.
£ is: £. 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-08T15:00:18.757

您需要确保输出终端与您（随机）为此字符选择的[编码匹配。](http://en.wikipedia.org/wiki/Character_encoding)如果您使用的是[ISO 8859-1](http://en.wikipedia.org/wiki/ISO/IEC_8859-1)，但您的终端期待例如[UTF-8](http://en.wikipedia.org/wiki/UTF-8)，您可能会得到您所看到的结果。

# javascript - 不存在的行上的 Javascript 错误

> ID：13291360
> 
> 赞同：3
> 
> 时间：2012-11-08T14:51:36.000
> 
> 标签：javascript, error-handling, runtime-error

我的应用程序使用 AJAX 报告我的用户收到的所有 Javascript 错误。有时，不存在的行上会出现错误。关于这可能是什么，有什么暗示吗？

例如：

> 消息：未捕获的类型错误：无法读取 null 的属性“表单”（/mysite/ 第 11823 行）
> 脚本：/mysite/
> 行：11823
> 用户代理：Mozilla/5.0（Windows NT 6.1）AppleWebKit/537.4（KHTML，如 Gecko）Chrome /22.0.1229.94 Safari/537.4

它所指的源文件是一个 HTML 页面，除了`$(document).ready()`. 所有其他 JS 都通过脚本标签包含在内。

我不完全确定那条线是从哪里来的。我总共没有 12k 行 JS。我有一个 9k 行的缩小的“all.js”文件。

# javascript - 存储和收集数据以进行分析的最佳方式是什么？

> ID：13291361
> 
> 赞同：1
> 
> 时间：2012-11-08T14:51:37.607
> 
> 标签：javascript, architecture, analytics

作为序言，我意识到这是一个非常高级的问题，但我正在寻找有关如何最好地构建解决方案而不是如何实现它的输入。

到目前为止，我所拥有的如下：

1.  由于我们使用多个跟踪供应商，每个供应商的跟踪代码都包装在一个标准化跟踪方法的对象中。这个想法是，无论使用哪个跟踪供应商，都始终可以调用某些方法，从而使供应商基本上可以互换。
2.  每个供应商包装器都接受一个跟踪规则对象，该对象提供有关跟踪内容和时间的说明。*例如，跟踪规则对象包括在适当时间执行的 onDOMReady、onFormSubmit 和 onDOMChange 方法。*

我目前正在努力的是收集事件数据的最佳方法。过去，规则对象总是通过以下方式收集数据：

*   解析当前 URL *（基于已知的 URL 结构）*。
*   *为标签（如 h1 或标题）*和属性*（如表单名称）*中的值抓取 DOM
**   挖掘各种实例化的 JS 对象以搜索其他数据。*例如从 user.current.id 中提取用户的 id。**

 *这在过去很有用，因为它允许在幕后执行跟踪。当然，收集方法首先要求人们小心他们更改的内容，因为更改对象和 DOM 结构看似安全，可能会对跟踪产生巨大影响。由于有很多不同的人为代码做出贡献，我们正在寻找一种更好的方式来处理数据收集。

一些已经浮出水面的想法是：

*   使用数据绑定将所有跟踪信息存储在 DOM 中。这具有透明的优点，但缺点是导致冗长。此外，如果单独使用，则需要将仅存在于 JS 对象中的数据传输到 DOM。
*   继续使用我们的非侵入式方法，但编写更广泛的单元测试。*（这很简单，但我很乐意将其与更清洁的数据收集过程配对，以使其成为一项不那么艰巨的任务）*

是否有任何可能有帮助的最佳实践、理念或建议？*

# css - 在 Eclipse CSS 格式化程序中保留换行符

> ID：13291362
> 
> 赞同：5
> 
> 时间：2012-11-08T14:51:39.120
> 
> 标签：css, eclipse

在 Eclipse (3.8) CSS 格式化程序中，例如

```
.aaa,
.bbb,
.ccc,
.ddd {
    xxx
} 
```

变得

```
.aaa,.bbb,.ccc,.ddd {
    xxx
} 
```

是否可以要求 Eclipse 保留换行符？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-19T13:10:33.653

```
Preferences Java > Code Style > Formatter 
```

请参阅“换行和注释”选项卡上的“从不加入行”选项。

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2014-11-25T19:18:56.743

在，

窗口 > 首选项 > Web > CSS 文件 > 编辑器

取消标记在属性之间插入换行符

线宽设置为 999。

# c# - 如何检查哪个RequiredFieldValidator 失败？

> ID：13291363
> 
> 赞同：-1
> 
> 时间：2012-11-08T14:51:45.663
> 
> 标签：c#, .net, validation, requiredfieldvalidator

代码 ：

```
Page.Validate();
if (!Page.IsValid)
{
    Page.RegisterStartupScript("ko", "<script>alert('Failed');</script>");
    return;
} 
```

在这个控件上，一些验证器失败了！我怎样才能检查哪一个？谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-08T15:15:45.833

您可以获得一组验证器并检查哪个无效

```
foreach (var item in Validators)
{
     if (!((IValidator)item).IsValid)
     {
          //do something
      }
 } 
```

# ruby - 在 Ruby 中设置测试套件

> ID：13291372
> 
> 赞同：5
> 
> 时间：2012-11-08T14:52:16.360
> 
> 标签：ruby, unit-testing, watir

我正在尝试在 Ruby 中设置一个测试套件来自动化 WebUI 的测试（使用 Watir）

各个测试都很好，并且都运行正常，但是我在使用套件时遇到了问题。

例如，如果我的一项测试是（其中 BaseTestClass 扩展了 Test::Unit::TestCase）

```
class Test3_1_3_1_2 < BaseTestClass
  def testHeightOfMainPanel
    assert(false, 'Not implemented')
  end
end 
```

在我的 RunAllTests 脚本中，我正在尝试执行以下操作

```
require 'test/unit'

Test::Unit.at_start do
  #Lets create our own user for these tests
  createCCUser(User, Password)
end

Test::Unit.at_exit do
  #Delete our own user
  deleteUser(User)
end

Dir["./**/Test*.rb"].each{|s|
  puts s.to_s
  load s
} 
```

所以基本上我想做的是在测试开始时创建一个新用户，运行测试然后删除用户。这是必要的，因为系统是单点登录（有点），如果我们为每个人使用相同的用户，则无法保证测试将正确执行（即其他人可以同时运行测试，然后第一个用户将被踢出）

我得到的错误是：未定义的方法`at_start' and private method`at_exit' 调用

我知道我做错了什么，但是对于 Ruby 来说还很陌生，很难看出在哪里。基本上我需要的是一种执行一些设置的方法，运行所有可以找到的测试，然后进行清理。每个测试都有自己独立的设置和拆卸方法

我还应该补充一点，我已经尝试了上述相同的许多变体，例如

```
require 'test/unit'

class Temp < Test::Unit::TestCase
  Test::Unit.at_exit do
    #Delete our own user
    deleteUser(User)
  end

  Test::Unit.at_start do
    #Lets create our own user for these tests
    createCCUser(User, Password)
  end

  Dir["./**/Test*.rb"].each { |s|
    puts s.to_s
    load s
  }
end 
```

我还是不明白。任何帮助，将不胜感激

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-11-08T15:27:48.810

我认为问题在于，假设您使用的是 Ruby 1.9.3，那么对于`require 'test/unit'`.

在 Ruby 1.9.3 中，`require 'test/unit'`将需要“Minitest” gem。此 gem 中不存在您要使用的方法。

和方法存在于[测试单元](http://test-unit.rubyforge.org/)gem 中`at_start`。`at_exit`

假设您同时拥有 Minitest gem（默认安装在 Ruby 1.9 中）和 Test-Unit gem（使用 手动安装`gem install test-unit`），您需要明确说明您想要 test-unit gem。

在要求 test/unit 之前，指定 test-unit gem 的用法：

```
gem 'test-unit'
require 'test/unit' 
```

# javascript - 我们可以在其更改事件中更改 jQuery UI 滑块的最小/最大值吗？

> ID：13291375
> 
> 赞同：0
> 
> 时间：2012-11-08T14:52:23.417
> 
> 标签：javascript, jquery, jquery-ui

我正在使用这个滑块。[http://docs.jquery.com/UI/API/1.8/Slider](http://docs.jquery.com/UI/API/1.8/Slider)

当我移动滑块时，我得到了更新的最大限制。现在我也需要将这个新的最大值应用到滑块。如果我这样做会改变它：

```
$("#slider").slider({
    change: function () {
        .....
        .....
        var btn = document.getElementById('<%=btnUpdate.ClientID%>');
        btn.click();
        $("#slider").slider( "option", "max", newValue);
        .....
} 
```

在这里，我在`btnUpdate`点击和后面的代码中使用异步回发，我正在为隐藏字段设置新的最大限制（我需要将其应用于滑块）。`btn.click();`在声明之后，我是否能够做到这一点，`change`以防万一。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-08T15:34:39.347

更改方法将起作用，但在您停止拖动后 max 将被重置。

如果要在拖动时更改最大值，则应使用“滑动”事件而不是更改。这里的例子：http: [//jsfiddle.net/nxtwrld/gvSu6/1/](http://jsfiddle.net/nxtwrld/gvSu6/1/)

```
 slide: function( event, ui ) {
           $(this).slider("option", "max", newValue);
        } 
```

但我建议不要这样做，因为滑块将尝试根据新的最大值固定手柄位置，这将与拖动手柄发生碰撞并开始跳跃 - 正如在 jsfiddle 中所见。

# json - 带有 JSON 的 REST 可以在没有显式发送标头应用程序/json 的情况下工作吗？

> ID：13291377
> 
> 赞同：0
> 
> 时间：2012-11-08T14:52:29.743
> 
> 标签：json, jersey, jax-ws

我有一个使用球衣的 REST 服务，并且不想在每个请求中都发送“Content-Type”=“application/json”。

我可以将此设置为我的服务的默认设置吗？

现在我收到错误*415 Unsupported Media Type*因为我没有发送此标头。

我的服务就像

```
@Path("/insert")
@POST
@Consumes({MediaType.APPLICATION_JSON})
public Response test(Foo request) {....} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-08T14:56:20.243

您不能在*服务器上设置**客户端*的默认值。

 *不过，您可以使用[`*/*`](http://jsr311.java.net/nonav/releases/1.1/javax/ws/rs/core/MediaType.html#WILDCARD_TYPE)：

```
@Consumes({MediaType.WILDCARD_TYPE}) 
```

但是，如果客户端在`application/json` *没有*设置正确的`Content-Type` 标头的情况下实际发送，服务器将接受请求但无法反序列化内容。

因此，请为每个请求和响应设置正确的标头。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-12T20:16:56.693

部分解决。

我改变了签名

```
public Response test(Foo request) {} 
```

至

```
public Response test(@QueryParam("body") String request) {} 
```

并手动反序列化 JSON

```
Foo requestObj = new ObjectMapper().readValue(request, Foo.class); 
```

并将 POST 更改为 GET（因为我不关心 REST 规范）

注意：在我的情况下，这取决于*jackson-mapper-asl-1.9.2.jar*。*

# jsf-2 - JSF 2 selectOneRadio 依赖验证

> ID：13291384
> 
> 赞同：3
> 
> 时间：2012-11-08T14:52:36.470
> 
> 标签：jsf-2, validation

我有一个非常简单的 jsf 页面，其中包含三个 selectOneRadio 组件。其中两个在一个 panelGroup 中。

```
<t:selectOneRadio id="first" value="#{myBean.first}" required="true" requiredMessage="Please make a choice!">
<f:selectItem itemLabel="yeah" itemValue="true"/>
<f:selectItem itemLabel="no!" itemValue="false"/>
<f:ajax render="myform" execute="myform" />
</t:selectOneRadio>

<h:panelGroup rendered="#{not myBean.first}">
  <t:selectOneRadio id="second" value="#{myBean.second}" required="true" requiredMessage="Please make a choice!">
  <f:selectItem itemLabel="yeah" itemValue="true"/>
  <f:selectItem itemLabel="no!" itemValue="false"/>
  <f:ajax render="myform" execute="myform" />
  </t:selectOneRadio>

  <t:selectOneRadio id="third" value="#{myBean.third}" required="true" requiredMessage="Please make a choice!">
  <f:selectItem itemLabel="yeah" itemValue="true"/>
  <f:selectItem itemLabel="no!" itemValue="false"/>
  <f:ajax render="myform" execute="myform" />
  </t:selectOneRadio>
</h:panelGroup> 
```

我的问题是，取决于第一个按钮的值，是否应该显示面板。如果它出现，其他两个无线电选择将被验证。

当前的行为是，如果我在第一个 selectOneRadio 中选择某些内容，则会显示其他两个所需的消息。

有没有人如何避免这种情况并验证依赖于值一的二和三？

提前致以诚挚的问候和感谢:-)

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-08T15:14:46.617

找到了答案...有时我是盲人:-)

将执行属性设置为当前单选按钮解决了它：

```
<t:selectOneRadio id="first" value="#{myBean.first}" required="true" requiredMessage="Please make a choice!">
<f:selectItem itemLabel="yeah" itemValue="true"/>
<f:selectItem itemLabel="no!" itemValue="false"/>

<f:ajax render="myform" execute="first" />

</t:selectOneRadio> 
```

# java - 有什么方法可以关闭 JFrame 而无需使用 Cancel jButton 退出整个应用程序？

> ID：13291385
> 
> 赞同：2
> 
> 时间：2012-11-08T14:52:37.413
> 
> 标签：java, swing, jbutton, jform

有没有办法在不退出整个应用程序的情况下使用取消按钮关闭框架。我试过关注

```
setDefaultCloseOperation(javax.swing.WindowConstants.HIDE_ON_CLOSE); 
```

上面的行仅在我按下 X 关闭按钮关闭框架时才有效。有没有其他好的方法来实现一个 JButton 来执行相同的操作

```
import java.awt.BorderLayout;
import java.awt.EventQueue;

import javax.swing.JFrame;
import javax.swing.JPanel;
import javax.swing.border.EmptyBorder;
import javax.swing.JButton;
import java.awt.event.ActionListener;
import java.awt.event.ActionEvent;

public class CloseTestForm extends JFrame {

    private JPanel contentPane;

    /**
     * Launch the application.
     */
    public static void main(String[] args) {
        EventQueue.invokeLater(new Runnable() {
            public void run() {
                try {
                    CloseTestForm frame = new CloseTestForm();
                    frame.setVisible(true);
                } catch (Exception e) {
                    e.printStackTrace();
                }
            }
        });
    }

    /**
     * Create the frame.
     */
    public CloseTestForm() {
        setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);
        setBounds(100, 100, 450, 300);
        contentPane = new JPanel();
        contentPane.setBorder(new EmptyBorder(5, 5, 5, 5));
        setContentPane(contentPane);
        contentPane.setLayout(null);

        JButton btnSave = new JButton("Save");
        btnSave.setBounds(64, 141, 89, 23);
        contentPane.add(btnSave);

        JButton btnCancel = new JButton("Cancel");
        btnCancel.addActionListener(new ActionListener() {
            public void actionPerformed(ActionEvent arg0) {

                //??
            }
        });
        btnCancel.setBounds(64, 192, 89, 23);
        contentPane.add(btnCancel);
    }
} 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-08T14:55:01.010

使用任何东西作为`setDefaultCloseOperation`例外`EXIT_ON_CLOSE`。

然后，对于取消按钮，只是`dispose()`窗口。如果应用程序有另一个正在运行的线程，它不会退出。您也可以通过调用隐藏窗口`setVisible(false)`。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-08T14:56:36.120

**调用`Window.dispose()`摆脱框架。**

您必须添加按钮并在按钮上添加 actionListener。然后在该`actionPerformed`动作侦听器的方法中，调用`.dispose()`要摆脱的帧上的方法。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-08T14:57:40.553

*   不要扩展`JFrame`，将其创建为局部变量

*   然后你可以打电话`myFrame.setVisible(false)`

*   以这种形式（此处发布的代码）当前的 JVM 永远不会过期，直到 PC 重新启动或关闭

*   不要创建第二个或更多`JFrame`的，而是使用 JDialog

# jquery - Salesforce 中的内联编辑对话框

> ID：13291397
> 
> 赞同：1
> 
> 时间：2012-11-08T14:53:16.580
> 
> 标签：jquery, autocomplete, salesforce, visualforce

我正在尝试从主页（背景）中的 jquery 脚本位置访问对话框中的输入元素，但我无法这样做。当我双击主页中的帐单地址字段时，会弹出此对话框。

请让我知道如何从主页访问对话框中的表单元素？

编辑：

实际上，当加载联系页面详细信息页面时，您不会找到 ID 为 con19country 的字段，但只有在您双击邮件地址后，该字段才会在 DOM 中可用。此外，包含在双击邮寄地址时变为可见的字段的 div(id=InlineEditDialog) 在 HTML 中也是灰色的。在此处查看图片：http: [//i.stack.imgur.com/7cdd4.jpg](http://i.stack.imgur.com/7cdd4.jpg)

再次编辑：

我终于能够访问对话框了..

```
 j$("[id*=_ilecell]").bind('dblclick', function(){
        var elementID = j$(this).attr('id');
        if (!sfdcPage.editMode)
        sfdcPage.activateInlineEditMode();

        if (!sfdcPage.inlineEditData.isCurrentField(sfdcPage.getFieldById(elementID)))
        sfdcPage.inlineEditData.openField(sfdcPage.getFieldById(elementID));
        stateCountryAutocomplete();
    });
}); 
```

您还可以参考此博客以获得更多帮助：[http ://blog.force365.com/2012/07/30/ui-tips-and-tricks-country-list/](http://blog.force365.com/2012/07/30/ui-tips-and-tricks-country-list/)

问候山姆

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-08T20:16:46.910

您可以在您选择的浏览器中轻松使用 Firebug（或任何其他开发人员工具）来学习这些内容。

在这个例子中，BillingStreet 可以通过`$('#acc17street').html()`

![萤火虫示例](../Images/ff60aaa7dc7d1f444e91b34048296e3f.png)

但不要害怕，有已知标准字段 ID 的编译列表。例如在这里滚动一下：http: [//phollaio.tumblr.com/post/22058016777/how-to-obtain-a-field-id](http://phollaio.tumblr.com/post/22058016777/how-to-obtain-a-field-id)并考虑为这个人留下一个很好的评论，这样它看起来不像我偷了他在这个问题上的辛勤工作没有任何回报；）

* * *

编辑 :) 你到底在追求什么？你想捕捉这个盒子的内容吗？还是一般的地址详细信息？或者点击确定后做些什么？我认为当您将鼠标悬停在地址字段上时，您必须检查可见的功能。

```
<td 
onmouseover="if (window.sfdcPage && window.sfdcPage.hasRun) sfdcPage.mouseOverField(event, this);" 
onmouseout="if (window.sfdcPage && window.sfdcPage.hasRun) sfdcPage.mouseOutField(event, this);" 
onfocus="if (window.sfdcPage && window.sfdcPage.hasRun) sfdcPage.mouseOverField(event, this);" 
ondblclick="if (window.sfdcPage && window.sfdcPage.hasRun) sfdcPage.dblClickField(event, this);" 
onclick="if (window.sfdcPage && window.sfdcPage.hasRun) sfdcPage.clickField(event, this);" 
onblur="if (window.sfdcPage && window.sfdcPage.hasRun) sfdcPage.mouseOutField(event, this);" id="con19_ilecell"
class="dataCol col02 inlineEditWrite">
    <div id="con19_ileinner">2335 N. Michigan Avenue, Suite 1500<br>Chicago, IL 60601, USA<br> </div>
</td> 
```

尝试查找此 sfdcPage 的定义，如果您可以使用“无论他们最初在做什么+您的行为”来覆盖某些功能？它是一个从原型构造的对象`DetailPage`，您可以在`/jslibrary/(some timestamp)/sfdc/main.js`

# dwolla - Dwolla 交易统计：成功的响应包括空值

> ID：13291405
> 
> 赞同：0
> 
> 时间：2012-11-08T14:54:06.643
> 
> 标签：dwolla

我正在向 Dwolla API Transaction Stats 发出以下 URL 请求：

[https://www.dwolla.com/oauth/rest/transactions/stats?oauth_token=xxx&startDate=11-08-2012](https://www.dwolla.com/oauth/rest/transactions/stats?oauth_token=xxx&startDate=11-08-2012) 00:00:00&types=money_received

并收到此回复

```
{"Success":true,"Message":"Success","Response":{"TransactionsCount":null,"TransactionsTotal":null}} 
```

我期待一个计数和总数，但接收的是空值。您能否解释导致此问题的原因以及是否需要更改我的请求？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-08T15:00:31.147

我认为您收到空响应的原因是因为您本质上是在要求 API 服务器不为那些返回值...意思是，Transactions/Stats() 方法接受“types”参数，该参数指定哪个您希望收到的两个响应中的一个 - 有效选项是 TransactionsCount 和 TransactionsTotal。types 参数默认包括所有统计信息。“money_received”类型实际上属于不同的请求......

# php - 自日期起 7 年

> ID：13291410
> 
> 赞同：0
> 
> 时间：2012-11-08T14:54:24.350
> 
> 标签：php, date, strtotime

我正在尝试从日期中减去 7 年...

我试过了，但没有用:(我做错了什么？

```
strtotime("-7 year", strtotime(date("Y"))) 
```

这将呼应`1131498720`我正在寻找的答案是`2005`

我忘了提到“-7”是一个变量`$x = -7`

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-11-08T14:56:55.860

strtotime 返回一个 unix 时间戳（自 1970 年 1 月 1 日以来的秒数）。1131498720 对应于 2005 年 11 月 8 日，即 7 年前。

既然你只是减去年份，为什么不简单地

```
$seven_years_ago = date('Y') - 7; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-08T14:57:04.013

尝试：

```
$str = date('Y', strtotime(date('Y') . " -7year"));
echo $str; 
```

[演示](http://codepad.org/nX5kL5gF)

# ember.js - TextField 类的 Ember.js 事件是什么

> ID：13291411
> 
> 赞同：6
> 
> 时间：2012-11-08T14:54:25.257
> 
> 标签：ember.js

刚开始使用 Ember.js，通过阅读代码，我遇到了以下几行：

```
Em.TextField.extend({
    insertNewline: function() {
        ....
    }
}); 
```

据我了解，`insertNewLine`是在字段内单击“输入”时发生的事件，但在[文档中查找`TextField`](http://emberjs.com/api/classes/Ember.TextField.html)我未能找到有关此事件以及其他事件的信息`TextField`。

支持哪些事件？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-11-08T16:52:26.497

根本不是菜鸟问题！

Ember TextField 继承自 Ember 的 TextSupport。TextSupport 基本上是一个可以共享文本字段（输入）和文本区域功能的类。

如果您查看 TextSupport (https://github.com/emberjs/ember.js/blob/master/packages/ember-handlebars/lib/controls/text_support.js)，您会在底部看到一个键映射的文件。将在每个按键事件上查询此映射，尝试将按键与功能匹配。两个默认函数是 insertNewline (enter) 和 cancel (esc)。您可以在此处添加任意数量的内容。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-31T23:10:10.297

keyUp 和 focusOut 方法也非常有用。我经常将它们用于编辑表单上的数据验证类型目的。

[https://github.com/emberjs/website/pull/30](https://github.com/emberjs/website/pull/30)

# c# - 制作清单 > 适合装订

> ID：13291413
> 
> 赞同：1
> 
> 时间：2012-11-08T14:54:29.810
> 
> 标签：c#, winforms, data-binding, .net-4.0, infragistics

我有一个`List<List<string>>`外部列表将是网格的行，而内部列表将是列值。

如何包装`List<List<string>>`它，使其成为网格的合适数据源，它接受`IList`or `IBindingList`？

实际上，我希望它被视为具有将字符串公开为用于绑定的公共属性的类`List<MyObject>`。`MyObject`

我无法更改列表，并且它可以有大量的行，因此复制数据并不理想。

差异的一个简单示例是以下代码，其中包含`DataGridView`a `WinForm`：

```
 public class SupplierEntry
    {
        public string SupplierCode
        {
            get
            {
                return "SUPPLIERCODE";
            }
        }

        public string SupplierTitle
        {
            get
            {
                return "SUPPLIERTITLE";
            }
        }
    }

    private void Test()
    {
        List<string> supplierEntryString = new List<string>();
        supplierEntryString.Add("SUPPLIERCODE");
        supplierEntryString.Add("SUPPLIERTITLE");            

        List<List<string>> supplierListStrings = new List<List<string>>();
        supplierListStrings.Add(supplierEntryString);

        List<SupplierEntry> supplierListObjects = new List<SupplierEntry>();

        SupplierEntry supplierEntryObject = new SupplierEntry();
        supplierListObjects.Add(supplierEntryObject);

        //this can't handle the nested collections, instead showing a Capacity and Count column 
        dataGridView1.DataSource = supplierListStrings;

        //this works giving you a supplier code and title column
        //dataGridView1.DataSource = supplierListObjects;
    } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-08T22:21:02.713

设置 DataGridView 的 DataSource 时，DataGridView 会将提供的对象视为`IList<something>`，其中每个对象都`something`将使用反射来查找所有公共可读属性。a 的公共可读属性`List<string>`是容量和计数。

为了让您的字符串出现在 DataGridView 中，它们必须作为属性呈现。您至少可以通过三种方式做到这一点：创建自己的类（就像您已经使用 所做的那样`SupplierEntry`）、使用`Tuple`或使用匿名类型。

允许您在`List<List<string>>`不复制任何数据的情况下使用源的折衷方案是提供一个包装类，该类仅将数据呈现为属性：

```
// Provide named properties which really just read elements 
// from the List<string> provided with the constructor
public class ListBasedRecord {
    public string SupplierName { get { return source[0]; } }
    public string SupplierCode { get { return source[1]; } }
    private List<string> source;
    public ListBasedRecord(List<string> source) { this.source = source; }
}

private void ListTest() {
    // ... same as above, you get your List<List<string>> ...
    // Succinctly create a SupplierEntryWrapper for each "record" in the source
    var wrapperList = supplierListStrings
                      .Select(x => new SupplierEntryWrapper(x)).ToList();
    dataGridView1.DataSource = wrapperList;
} 
```

# c# - NET 世界的码头

> ID：13291415
> 
> 赞同：6
> 
> 时间：2012-11-08T14:54:34.847
> 
> 标签：c#, .net, f#, managed

我正在寻找 Net Framework 世界中的 Jetty 等价物——托管代码。它存在吗？我想使用 F#/C#/VB.net 应用程序中的库。“不要在 Jetty 中部署你的应用程序，在你的应用程序中部署 Jetty。”

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-11-08T17:32:41.033

您正在寻找多复杂的 API？对于简单的任务，我认为您只需使用标准`HttpListener`类型就可以走得更远。有一个 MSDN 示例用 F# 代理封装它（[第 3 部分](http://msdn.microsoft.com/en-us/library/hh297120.aspx)），然后使用它创建一个简单的聊天服务器（[第 4 部分](http://msdn.microsoft.com/en-us/library/hh297106.aspx)）。

聊天服务器的核心部分看起来相当简单：

```
let handleRequest (context:HttpListenerContext) = async { 
    match context.Request.Url.LocalPath with 
    | "/post" -> 
        // Send message to the chat room
        room.SendMessage(context.Request.InputString)
    | "/chat" -> 
        // Get messages from the chat room (asynchronously!)
        let! text = room.AsyncGetContent()
        context.Response.Reply(text)
    | s ->
        // Omitted: handle file request } 
```

可用于 F# 的更高级的库可能是[Frack](https://github.com/panesofglass/frack)（Open Web Interface for .NET (OWIN) 的实现，一个 .NET Web 服务器网关接口，用 F# 编写。）这看起来也很容易使用。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-11-09T00:32:54.790

[ServiceStack](http://www.servicestack.net)还在 Win/.NET 或 Mono/Linux（除了 ASP.NET 主机）中的自托管 HttpListener 应用程序中运行。

有关在 C# 或 F# 控制台应用程序中运行 ServiceStack 的简单示例，请参阅[自托管 wiki 页面](https://github.com/ServiceStack/ServiceStack/wiki/Self-hosting)。

# java - javax.servlet.jsp.JspTagException：无效的 JSP 文件 %2e%2e/%2e%2e/%2e%2e/%2e%2e/system/autoexec.ncf

> ID：13291418
> 
> 赞同：0
> 
> 时间：2012-11-08T14:54:46.520
> 
> 标签：java, jsp

我们在 tomcat 6.0 中部署了一个 Web 应用程序，当我们请求 URL 时，我们在日志文件中收到以下错误。你能帮我找出错误吗

```
SEVERE: Servlet.service() for servlet jsp threw exception
    javax.servlet.jsp.JspTagException: Invalid JSP file     %2e%2e/%2e%2e/%2e%2e/%2e%2e/system/autoexec.ncf
    at examples.ShowSource.doEndTag(ShowSource.java:41)
    at org.apache.jsp.jsp.source_jsp._jspService(source_jsp.java:87)
    at org.apache.jasper.runtime.HttpJspBase.service(HttpJspBase.java:70)
    at javax.servlet.http.HttpServlet.service(HttpServlet.java:717)
    at org.apache.jasper.servlet.JspServletWrapper.service(JspServletWrapper.java:388)
    at org.apache.jasper.servlet.JspServlet.serviceJspFile(JspServlet.java:313)
    at org.apache.jasper.servlet.JspServlet.service(JspServlet.java:260)
    at javax.servlet.http.HttpServlet.service(HttpServlet.java:717) 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-08T14:59:32.893

这与[此 NetWare 6.0 特定 expolit](https://my.controlscan.com/threats/details.cgi?id=112119)相关。

> ### 112119：Novell NetWare 6.0 Tomcat Source.jsp 遍历任意文件访问
> 
> **风险 4：网络软件**
> 
> 随 NetWare 6.0 分发的 Apache Tomcat 服务器存在目录遍历漏洞。因此，可以从 NetWare 服务器获取敏感信息，例如位于 AUTOEXEC.NCF 中的 RCONSOLE 密码。
> 
> **例子 ：**
> 
> ```
> http://target/examples/jsp/source.jsp?%2e%2e/%2e%2e/%2e%2e/%2e%2e/system/autoexec.ncf 
> ```
> 
> **解决方案：**
> 
> 将 Tomcat 升级到最新版本，如果不需要，则禁用该服务。从 Web 服务器中删除默认文件。此外，确保 RCONSOLE 密码已加密，并使用受密码保护的屏幕保护程序进行控制台访问。
> 
> **参考：**
> 
> *   [CVE-2000-1210](http://cve.mitre.org/cgi-bin/cvename.cgi?name=CVE-2000-1210)
> *   [OSVDB-7203](http://www.osvdb.org/7203)
> 
> **CVSS 信息：**
> 
> 低攻击复杂性，完全保密影响
> 
> **信用：**
> 
> 成立时间：2009-12-04

修补您的服务器。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-08T14:58:50.397

这个

```
%2e%2e/%2e%2e/%2e%2e/%2e%2e/system/autoexec.ncf 
```

url解码为

```
../../../../system/autoexec.ncf 
```

这可能是攻击您的服务器的尝试。

# actionscript-3 - 为什么状态转换在 flex 移动应用程序中不起作用？

> ID：13291420
> 
> 赞同：0
> 
> 时间：2012-11-08T14:54:52.897
> 
> 标签：actionscript-3, apache-flex, transition, flex4.6

我想在这样的 flex 移动应用程序中更改状态时添加转换：

```
<s:states>
    <s:State name="State1"/>

    <s:State name="resultsState"/>
</s:states>
<fx:Declarations>
    <!-- Place non-visual elements (e.g., services, value objects) here -->
    <s:Transition fromState="''" toState="resultsState">
        <s:Sequence duration="2000">
            <s:Fade target="{myTitle}"/>
            <s:Move targets="{[cityNameInput,searchBtn]}"/>
            <s:AddAction target="{''}"/>
            />

        </s:Sequence>
    </s:Transition>
</fx:Declarations>
<s:Button id="about_state" includeIn="resultsState" label="About"
              click="result_state()" icon="@Embed('assets/About.png')"
              /> 
```

// 功能代码是：

```
private function result_state():void{
     currentState = 'resultsState';
} 
```

请帮忙。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-08T15:15:40.937

您必须在组件的`<s:transitions/>`数组属性中声明您的转换，而不是在`<fx:Declarations/>`块中声明它：

```
<s:states>
    <s:State name="State1"/>
    <s:State name="resultsState"/>
</s:states>

<s:transitions>
    <s:Transition fromState="*" toState="resultsState">
        <s:Sequence duration="2000">
            <s:Fade target="{myTitle}"/>
            <s:Move targets="{[cityNameInput,searchBtn]}"/>
        </s:Sequence>
    </s:Transition>
</s:transitions>
<s:Button id="about_state" includeIn="resultsState" label="About"
              click="result_state()" icon="@Embed('assets/About.png')"/> 
```

[Adobe 文档站点上](http://help.adobe.com/en_US/flex/using/WS2db454920e96a9e51e63e3d11c0bf69084-7f6a.html)有大量示例。

# sql - SQL Server 2005 导入和导出向导

> ID：13291423
> 
> 赞同：1
> 
> 时间：2012-11-08T14:55:00.133
> 
> 标签：sql, sql-server-2005

参考导入和导出向导，在 SQL Server 2005 环境中，我想收到一些关于如何选择最佳字段分隔符的建议：我需要导出为平面文件的表例如包含其中带有逗号的列，所以我不能使用逗号作为字段分隔符。

我曾考虑在所有表中搜索不存在的 ASCII 字符 (0-255) 是什么，并将此字符用作分隔符，但此搜索操作的计算量很大。

*   我可以使用什么类型的字符将表格导出为平面文件？
*   例如，我可以使用几个字符`,$` 吗？
*   是否最好使用固定长度的字段？

任何建议将不胜感激。

最好的建议将被接受。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-08T15:04:44.290

标准做法是使用分隔符（通常是逗号，）和文本限定符（通常是双引号“）

那么输出是：

“字段 A”、“字段 B”、“字段与，逗号”

使用文本限定符意味着您无需担心字段中出现的分隔符。而且我不会费心使用固定宽度，如果您更改表格的设计并忘记更新所有导出脚本，这可能会导致稍后截断。

使用 csv 扩展名 (file.csv)，以便其他程序识别文件类型。CSV 代表逗号分隔值。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-08T14:59:26.410

我建议你使用 TABS ，“|” 字符或“;”

这些是常用的

干杯!

# php - Fuel php orm 配置文件之类的

> ID：13291427
> 
> 赞同：0
> 
> 时间：2012-11-08T14:55:04.597
> 
> 标签：php, orm, fuelphp, social-media-like

首先真的很抱歉，如果这是一个愚蠢的问题，但我是初学者。

所以我最近开始使用fulephp，我有一个小网站，希望让用户能够喜欢其他用户的个人资料。

但是我在这方面有点缺乏经验。所以我有一张桌子`users_like`

```
id | users_id | liked_by
1  | 5        | 1
2  | 5        | 3
3  | 1        | 2
4  | 1        | 9 
```

`user_id`谁得到了赞，谁`liked_by`给了赞

所以我在用户个人资料上有一个赞按钮

```
<button class="like btn btn-primary" data-like="<?php echo $user->profile['user_id']; ?>">Like</button> 
```

`data-like`包含获得喜欢的用户ID

插入看起来像这样

PHP 函数

```
public function action_like($id)
    {
        if(Input::is_ajax()):

            $response = Response::forge();

                $like = Model_Like::forge();
                $like->user_id = $id;
                $like->liked_by = Session::get('sentry_user');
                $like->save();

                $response->body(json_encode(array(
                    'status' => 'liked',
                )));

            return $response;

        endif;// is ajax
    } 
```

jQuery ajax 帖子

```
$('button.like').on('click', function(){
    var likeId = $(this).data('like');
    $.ajax({
        type: "POST",
        url: siteUrl + "profile/like/" + likeId,
        dataType: "json",
        context: this,
        beforeSend: function()
        {
            $(this).attr('disabled', 'disabled');
        },

        success: function(data)
        {
            if(data.status === "liked") {
                $(this).removeClass('like')
                .addClass('unlike')
                .text('Un-Like');

            }
        }, 

        complete: function()
        {
            $(this).removeAttr('disabled', 'disabled');
        }
    });
}); 
```

所以实际上我的逻辑是这样的。

orm retuns 用户喜欢，我正在考虑这样做

```
if(Session::get('sentry_user') != $like['liked_by']) {
  <button class="like btn btn-primary" data-like="<?php echo $user->profile['user_id']; ?>">Like</button>
}
else {
  <button class="unlike btn btn-primary" data-like="<?php echo $user->profile['user_id']; ?>">Un-Like</button>

} 
```

因此，如果登录的用户 id 不等于，则`liked_by`显示按钮 Like 否则显示按钮不像，并且如果他们单击该功能将删除 like

但是我很傻，因为我忘记了这实际上返回了数组，所以这是一个禁忌

所以我的问题是，我应该以某种方式使用 jquery cookie 来实现以下目标。

当用户单击 Like some 如何让用户喜欢该配置文件并将按钮更改为不同时。

或者请有人给我这个解决方案的一点提示，只是一个提示或建议。

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2012-11-08T17:04:48.707

在我看来，我做这个任务是这样的：

1）用户登录，我们将其保存到会话数据中

2）当用户请求某个页面时，我们返回按钮“喜欢”或“不喜欢”（建议输出 2 个按钮一个隐藏，见下文）

3）当用户点击“喜欢”时：通过 jquery 发布喜欢并在成功后您必须更改为按钮以不同于它可以通过更改样式、文本、事件等来完成，但我建议您隐藏“喜欢”按钮和显示“不一样”

4）当用户点击“不喜欢”时：与3）相同，但成功时更改为“喜欢”按钮

PS：在服务器端，我建议在成功或失败时返回真或假。

# c# - 初始化的只读字段为空，为什么？

> ID：13291428
> 
> 赞同：7
> 
> 时间：2012-11-08T14:55:06.083
> 
> 标签：c#

谁能解释一下，为什么`private readonly Int32[] _array = new[] {8, 7, 5};`可以`null`？

在此示例中，它有效，但`_array`始终无效`null`。但是在我的公司代码中，我有一个类似的代码，并且`_array`始终是`null`. 所以我被迫将其声明为静态的。

该类是我的 WCF 合同中的部分代理类。

```
using System;
using System.ComponentModel;

namespace NullProblem
{
    internal class Program
    {
        private static void Main(string[] args)
        {
            var myClass = new MyClass();

            // Null Exception in coperate code
            int first = myClass.First;
            // Works
            int firstStatic = myClass.FirstStatic;
        }
    }

    // My partial implemantation
    public partial class MyClass
    {
        private readonly Int32[] _array = new[] {8, 7, 5};
        private static readonly Int32[] _arrayStatic = new[] {8, 7, 5};

        public int First
        {
            get { return _array[0]; }
        }

        public int FirstStatic
        {
            get { return _arrayStatic[0]; }
        }
    }

    // from WebService Reference.cs
    public partial class MyClass : INotifyPropertyChanged 
    {
        // a lot of Stuff

        #region Implementation of INotifyPropertyChanged

        public event PropertyChangedEventHandler PropertyChanged;

        #endregion
    }

} 
```

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-11-08T15:00:10.003

WCF 不运行构造函数（包括字段初始值设定项），因此由 WCF 创建的任何对象都将具有该 null。您可以使用序列化回调来初始化您需要的任何其他字段。特别是`[OnDeserializing]`：

```
[OnDeserializing]
private void InitFields(StreamingContext context)
{
    if(_array == null) _array = new[] {8, 7, 5};
} 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2015-03-25T08:55:40.003

我最近也遇到了这个问题。我也有一个带有静态只读变量的非静态类。他们总是出现`null`。**我认为这是一个错误**。

**通过向类添加静态构造函数来修复它：**

```
public class myClass {
    private static readonly String MYVARIABLE = "this is not null";

    // Add static constructor
    static myClass() {
       // No need to add anything here
    }

    public myClass() {
       // Non-static constructor
    }

     public static void setString() {
       // Without defining the static constructor 'MYVARIABLE' would be null!
       String myString = MYVARIABLE;
    }
} 
```

# java - 强制 IntelliJ 在 NonNull 违规时使编译失败

> ID：13291432
> 
> 赞同：4
> 
> 时间：2012-11-08T14:55:23.737
> 
> 标签：java, intellij-idea, findbugs

我有下面的简单代码用于测试 IntelliJ 中的 NonNull 注释。

然后我转到：IntelliJ -> 文件 -> 设置 -> 检查 -> 可能的错误 -> 恒定条件和异常，然后设置严重性：作为错误。

这样做，它会标记行“print(null);” 作为预期的错误。但是，执行 IntelliJ -> Build -> Rebuild 项目，它可以工作，并且没有显示任何错误，也没有显示任何警告。

为什么会这样？为什么 IntelliJ 在构建项目时不抱怨？

如何查看 NonNull 违规列表？

如果发现 NonNull 违规，有没有办法强制 IntelliJ 使编译失败？

* * *

注意：IntelliJ 设置为考虑到 firebug 注释（默认情况下）；此外，使用 org.jetbrains.annotations.NotNull 会产生完全相同的结果。

* * *

src/main/java/test/Hello.java

```
package test;
import edu.umd.cs.findbugs.annotations.NonNull;
public class Hello {
    static public void print(@NonNull Object value) {
        System.out.println("value: " + value.toString());
    }

    static public void main(String[] args) {
        if (args.length > 0) {
            print(args[0]);
        } else {
            print(null);
        }
    }
} 
```

和 pom.xml 文件：

```
<?xml version="1.0" encoding="UTF-8"?>
<project xmlns="http://maven.apache.org/POM/4.0.0"
         xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
         xsi:schemaLocation="http://maven.apache.org/POM/4.0.0 http://maven.apache.org/xsd/maven-4.0.0.xsd">
  <modelVersion>4.0.0</modelVersion>

  <groupId>hello</groupId>
  <artifactId>hello</artifactId>
  <version>1.0</version>

  <dependencies>
    <dependency>
      <groupId>net.sourceforge.findbugs</groupId>
      <artifactId>annotations</artifactId>
      <version>1.3.2</version>
    </dependency>
    <dependency>
      <groupId>net.sourceforge.findbugs</groupId>
      <artifactId>jsr305</artifactId>
      <version>1.3.7</version>
    </dependency>
  </dependencies>
</project> 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-09T15:56:45.983

代码检查不是编译器错误，目前如果检查报告了一些问题，即使严重级别设置为 ，也无法编译失败`error`。

要获得项目范围内的结果，请使用`Analyze`| `Inspect Code`具有适当的检查配置文件。

IDEA 项目问题跟踪器中有[类似的功能请求](http://youtrack.jetbrains.com/issue/IDEA-65742)，但似乎不是很受欢迎（几乎 2 岁和零票）。

# java - 在 java 中寻找音频控制的开源 gui 组件

> ID：13291433
> 
> 赞同：4
> 
> 时间：2012-11-08T14:55:27.470
> 
> 标签：java, user-interface, audio

我需要相当简单的音频分析器 gui 组件来播放音频，我可以在其中查看不同的通道、控制通道增益、查看简单的音频波形等。

我知道我的措辞很糟糕，因此请查看这些屏幕截图以了解我需要的那种东西：

[例子](http://www.hongkiat.com/blog/25-free-digital-audio-editors/)

是否有任何可用的音频项目开源 gui 框架？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-08T15:50:52.843

我不认为有一个特定的项目，但也许你可以使用其他项目的东西。

[Tarsos 项目](https://github.com/JorenSix/Tarsos)是一个由音乐家和计算机科学家领导的项目，用于用 Java 进行声音分析。它包含一些用于绘制波形的摆动元素，您可以尝试在自己的项目中使用它们。他们拥有的一些东西：

*   [WaveForm](https://github.com/JorenSix/Tarsos/blob/master/src/be/hogent/tarsos/ui/WaveForm.java)类，它似乎处理了一些关于波形的 GUI 内容，比如缩放和播放选择部分。
*   [CommandPanel](https://github.com/JorenSix/Tarsos/blob/master/src/be/hogent/tarsos/ui/pitch/CommandPanel.java)，它使用 JSlider。您可以将这些用于通道增益。

还有[Java Media Component/Framework](http://www.oracle.com/technetwork/java/javase/tech/index-jsp-140239.html)，它似乎为 GUI 编程提供了一些[与音频/视频相关的东西](http://grack.com/downloads/school/enel619.10/report/java_media_framework.html)（相当老的文章）。JavaFX 似乎更好地支持它，但是[这个人](http://www.matthicks.com/2009/05/java-media-components-jmc-in-swing.html)设法在 Swing 应用程序中使用它。[这家伙](http://vsathishkumar.wordpress.com/2010/12/02/java-media-components/)也展示了一些使用 JMC 的代码。

在您发送的页面中，有[Eisenkraut](http://sourceforge.net/projects/eisenkraut)，它是用 Java 制作的。您可以尝试重用它的一些组件。

# xslt - XSLT 乘法返回不正确的结果

> ID：13291434
> 
> 赞同：2
> 
> 时间：2012-11-08T14:55:29.763
> 
> 标签：xslt, xslt-1.0

我有以下代码用于使用 xslt1 执行简单的乘法

```
<observedRate>
<xsl:value-of select="Input * 100"/>
</observedRate> 
```

但是，当 Input = 0.0107 时，上述返回 1.069999999999999999998 而不是 1.07。

我过去曾遇到过一次或两次这个问题，并设法通过执行以下操作来克服它（在这种情况下有效）

```
<observedRate>
<xsl:value-of select="( Input div 10) * 1000"/>
</observedRate> 
```

我对这个解决方案有几个问题，即

1.  它是一个黑客，看起来不太好
2.  我不确定它是否可以处理所有可能的值，因为“输入”的值可以是任意小数位

那么有没有一个很好的使用 xslt1 进行乘法运算的解决方案，它适用于输入变量不是定义长度的所有情况？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-08T15:05:43.573

尝试这个：

```
<xsl:value-of select='format-number(Input * 100, "#.00")' /> 
```

[http://www.w3schools.com/xsl/func_formatnumber.asp](http://www.w3schools.com/xsl/func_formatnumber.asp)

希望这可以帮助！

# telerik - CodedUI Telerik 选项卡

> ID：13291437
> 
> 赞同：3
> 
> 时间：2012-11-08T14:55:52.227
> 
> 标签：telerik, silverlight-5.0, coded-ui-tests

我在 Silverlight 中的选项卡的 Telerik 控件的 CodedUI 中遇到问题。我可以使用 CodedUI 记录我在选项卡中所做的事情，但是当我执行 CodedUI 测试时，它无法挑选出 Telerik Tab Control 容器中的控件。

基本上我拥有的是 Telerik Tab Container 中的一个文本框。我尝试在文本框中添加文本作为 CodedUI 测试。

我不确定这里是否有工作。我制作了一个快速的 Visual Studio 解决方案来复制我遇到的问题。我正在使用 Telerik Silverlight 控件版本 2012.2.725.1050。

这是异常消息

```
"BasicMessage=The playback failed to find the control with the given search properties." 
```

我可以根据要求包含堆栈跟踪，如果需要，甚至可以包含 VS 解决方案。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-03-05T15:01:43.190

我没有使用 Silverlight，但我发现 Telerik for Windows Forms 使用 c# 也会发生同样的事情。

我执行以下操作以避免出现该错误：

属性中的控件应该有一个“EnableCodedUITests”属性。

如果确实存在，则应将其设置为 true。冲洗并重复所有具有该属性的控件，您应该通过测试。

# ruby-on-rails - 将 self 类添加到模型 rails 3

> ID：13291445
> 
> 赞同：0
> 
> 时间：2012-11-08T14:56:22.183
> 
> 标签：ruby-on-rails, ruby, ruby-on-rails-3

我有 3 个模型：

```
Class Model1

end

Class Model2

end

Class Model3

end 
```

我有这个代码：

```
scope :created_between, lambda { |start_time, end_time| where(:created_at => (start_time...end_time)) }

class << self
 ## Class methods for calculating searches
 def created_today
  today = Time.zone.now
  created_between(today.beginning_of_day, today.end_of_day)
 end

 def created_yesterday
  yesterday = Time.zone.now - 1.day
  created_between(yesterday.beginning_of_day, yesterday.end_of_day)
 end

 def created_last_week
  start_time = (Time.zone.now - 1.week).beginning_of_day
  end_time = Time.zone.now
  created_between(start_time, end_time)
 end

 def created_last_month
  start_time = (Time.zone.now - 1.month).beginning_of_day
  end_time = Time.zone.now
  created_between(start_time, end_time)
 end

 def created_last_year
  start_time = (Time.zone.now - 1.year).beginning_of_day
  end_time = Time.zone.now
  created_between(start_time, end_time)
 end 
```

结尾

我需要将此代码添加到 3 个模型，但我不想在每个模型中重复代码。

我该怎么做？

非常感谢！

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-11-08T15:04:01.763

尝试这个：

```
module CommonClassFunctions

 def self.included(base)
   base.send :extend, ClassMethods
 end

 module ClassMethods
   ## Class methods for calculating searches
   def created_today
    today = Time.zone.now
    created_between(today.beginning_of_day, today.end_of_day)
   end

   def created_yesterday
    yesterday = Time.zone.now - 1.day
    created_between(yesterday.beginning_of_day, yesterday.end_of_day)
   end

   def created_last_week
    start_time = (Time.zone.now - 1.week).beginning_of_day
    end_time = Time.zone.now
    created_between(start_time, end_time)
   end

   def created_last_month
    start_time = (Time.zone.now - 1.month).beginning_of_day
    end_time = Time.zone.now
    created_between(start_time, end_time)
   end

   def created_last_year
    start_time = (Time.zone.now - 1.year).beginning_of_day
    end_time = Time.zone.now
    created_between(start_time, end_time)
   end
  end
end

Class Model1
  include CommonClassFunctions
end

Class Model2
  include CommonClassFunctions
end

Class Model3
  include CommonClassFunctions
end 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-11-08T15:00:51.523

您可以使用此方法定义一个模块，然后将其包含在 3 个模型中。

喜欢 ：

```
module Searcheable
  def created_today
    .
    . 
    .
    .
    .
  end
end 
```

然后在课堂上：

```
class Model1
  extend Searcheable
end

class Model2
  extend Searcheable
end

class Model3
  extend Searcheable
end 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-08T15:03:32.467

你可以通过继承来做到这一点

```
class Model
  class << self
    def created_today
      puts "created today from Model"
    end
  end
end

class Model1 < Model

end

class Model2 < Model

end

class Model3 < Model

end

Model1.created_today
# output: created today from Model 
```

# r - 根据另一个变量中的 TRUE 或 FALSE 重新编码

> ID：13291447
> 
> 赞同：4
> 
> 时间：2012-11-08T14:56:34.610
> 
> 标签：r

我正在根据另一个的 TRUE/FALSE 状态计算一个新变量：

```
value<-c(2, 4, 5, 8, 2, 3, 1)
tf<-c(TRUE, FALSE, FALSE, FALSE, TRUE, FALSE, TRUE)
df<-data.frame(value, tf) 
```

以下代码可以满足我的需要（如果 'tf' 为 TRUE，则将 'value' 减半）...

```
df$newVals[which(df$tf)]<-df$value[which(df$tf)]/2
df$newVals[which(!df$tf)]<-df$value[which(!df$tf)] 
```

...但感觉太复杂了。有没有更简单的方法？

谢谢

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-11-08T15:12:11.893

这是一个非常简单的解决方案，没有`ifelse`：

```
df$newVals <- with(df, value / (tf + 1)) 
```

*这个怎么运作？*

如果布尔值（如`tf`）与数学运算符一起使用，则会将它们转换为数值（`FALSE`转换为`0`并`TRUE`转换为`1`）。因此，该命令`tf + 1`创建了一个`1`s 和`2`s 的数值向量。中的值`value`除以这个新向量中的值。除以一不会改变原始值。

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-11-08T14:59:17.463

你可以这样做`ifelse`：

```
value<-c(2, 4, 5, 8, 2, 3, 1)
tf<-c(TRUE, FALSE, FALSE, FALSE, TRUE, FALSE, TRUE)
df<-data.frame(value, tf)

df$newVals <- with(df, ifelse(tf, value/2, value)) 
```

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2012-11-08T14:59:57.993

使用`ifelse`并将`transform`为您完成

```
 transform(df, newVals=ifelse(tf, value/2,value))
      value    tf newVals
    1     2  TRUE     1.0
    2     4 FALSE     4.0
    3     5 FALSE     5.0
    4     8 FALSE     8.0
    5     2  TRUE     1.0
    6     3 FALSE     3.0
    7     1  TRUE     0.5 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-11-08T15:15:30.300

略有不同的策略；只需更新需要更改的值而不是所有值，然后使用`ifelse()`. 例如

```
value<-c(2, 4, 5, 8, 2, 3, 1)
tf<-c(TRUE, FALSE, FALSE, FALSE, TRUE, FALSE, TRUE)
df<-data.frame(value, tf)

df <- transform(df, newVals = value) ## task a copy of `value`
df[df$tf, "newVals"] <- df[df$tf, "value"] / 2 ## update only ones we want
df 
```

给予

```
> df
  value    tf newVals
1     2  TRUE     1.0
2     4 FALSE     4.0
3     5 FALSE     5.0
4     8 FALSE     8.0
5     2  TRUE     1.0
6     3 FALSE     3.0
7     1  TRUE     0.5 
```

如果您不喜欢所有索引，则可以将其分解一下-只需创建`ind`包含以下行的索引的`tf`索引`TRUE`：

```
df <- transform(df, newVals = value)
ind <- with(df, which(tf))
df[ind, "newVals"] <- df[ind, "value"] / 2
df

> df
  value    tf newVals
1     2  TRUE     1.0
2     4 FALSE     4.0
3     5 FALSE     5.0
4     8 FALSE     8.0
5     2  TRUE     1.0
6     3 FALSE     3.0
7     1  TRUE     0.5 
```

# opengl-es - 将 iPhoneOSGameView 捕获为图像

> ID：13291448
> 
> 赞同：2
> 
> 时间：2012-11-08T14:56:35.190
> 
> 标签：opengl-es, xamarin.ios, drawing

我正在编写一个签名控制器，用户将在其中写下他的签名，然后我将签名作为图像保存并将其发布回服务器。

我很快找到了这个出色的示例： [https ://github.com/xamarin/monotouch-samples/blob/master/GLPaint-GameView/PaintingView.cs](https://github.com/xamarin/monotouch-samples/blob/master/GLPaint-GameView/PaintingView.cs)

但是我无法将绘画的结果保存为图像。下面的代码只提供了一张没有实际绘图的黑色图片，那么如何将绘图结果绘制到图像上下文中呢？

```
PaintingView drawingView; 
```

...

```
UIGraphics.BeginImageContext(drawingView.Frame.Size); 
var ctx = UIGraphics.GetCurrentContext();
drawingView.Layer.RenderInContext(ctx);
UIImage img = UIGraphics.GetImageFromCurrentImageContext();                         
UIGraphics.EndImageContext(); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-08T15:54:37.817

使用 OpenGL 时，可以按照本[技术说明](https://developer.apple.com/library/ios/#qa/qa2010/qa1704.html)中的 Apple 说明进行截屏。

可以按照此[说明](https://developer.apple.com/library/ios/#qa/qa2010/qa1703.html)进行正常（非 OpenGL）捕获。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-29T23:09:03.553

MonoTouch 在使用 UIKit 或 OpenGL 运行时提供屏幕捕获便捷方法来捕获屏幕内容。

UIKit 应用程序

```
 var screenshot = UIScreen.MainScreen.Capture (); 
```

GLKit 应用程序

```
 var screenshot = iPhoneOSGameView.Capture (); 
```

# perl - 从 perl cgi 动态输出 json 数据

> ID：13291449
> 
> 赞同：2
> 
> 时间：2012-11-08T14:56:34.770
> 
> 标签：perl, extjs, cgi

我有一个简单的 perl cgi，我在我的 extjs 项目中使用，这样写：

```
use JSON;

print "Content-type: application/json\n\n";

my $node_hash = {
data => [{
     "Week",1145,
         "Sev_Logged", "3_major"
},{
    "Week", 1146,
        "Sev_Logged", "4_minor"
}]};
print to_json($node_hash); 
```

它返回以我用来生成图表的 json 格式编写的数据。我还有一个表单，其中包含一个带有值的组合框：“3_major”和“4_minor”对应于“Sev_Logged”字段。现在我想要的是，每当用户选择“4_minor”时，我的 perl cgi 只会返回第 1146 周，因此我的图表将只包含第 1146 周的数据。

这可能吗？如何？谢谢

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-08T15:10:53.180

我不知道您的数据来自哪里，但您可以执行以下操作：

```
use strict;
use warnings;
use CGI;
use JSON;

my $q = CGI->new;
print $q->header("application/json");

my $Sev_Logged = $q->param('Sev_Logged');

my $data = [
  {
    "Week" => 1145,
    "Sev_Logged" =>"3_major",
  },
  {
    "Week" => 1146,
    "Sev_Logged" => "4_minor",
  },
];

my $node_hash = {
  data => [
    grep { $_->{'Sev_Logged'} eq $Sev_Logged } @$data,
  ]
};
print to_json($node_hash); 
```

你可以这样称呼它：`GET script.pl?Sev_Logged=3_major`

* * *

无论如何，我认为如果您已经传输了所有数据，则应该仅使用 JavaScript 在客户端对其进行过滤。我认为不需要 AJAX 调用。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-08T15:11:15.253

我愿意[`use CGI`](https://metacpan.org/module/CGI)为此提供帮助。简而言之，您需要通过表单和 GET 或 POST 请求将组合框字段传递给此 CGI 脚本。然后，此 CGI 脚本需要通过参数读取组合框的值。如果使用 CGI 模块，可以通过`param`方法获取参数。

# database - 为什么autovacuum进程没有取回内存

> ID：13291451
> 
> 赞同：2
> 
> 时间：2012-11-08T14:56:40.087
> 
> 标签：database, postgresql, memory-management, database-performance

我只是在经历一种情况，我根本没有得到我的问题的线索。

我有一张名为名称的表（带有列名称和时间）。该表每分钟插入大量行。这些插入的记录会在特定的时间间隔内被删除。所以，最后我停止插入数据并从表中删除所有行。

**我的数据库版本详细信息**

```
impss=# SELECT  version();
                                           version                                            
----------------------------------------------------------------------------------------------
 PostgreSQL 8.3.7 on i486-pc-linux-gnu, compiled by GCC gcc-4.3.real (Debian 4.3.2-1.1) 4.3.2
(1 row) 
```

但是当我发出查询以查找表的大小时，我仍然得到一些大小。

```
impss=# SELECT  pg_size_pretty( pg_total_relation_size('names')) ;
 pg_size_pretty 
----------------
 1504 kB
(1 row) 
```

第一个问题为什么它仍然显示一些大小，尽管我已经从表中删除了所有记录。

要查找上次 autovacuum 完成的时间，我发出了以下查询：

**当前时间是**

```
impss=# select now(); 
               now                
----------------------------------
 2012-11-08 20:21:10.550434+05:30
(1 row)

impss=# SELECT last_autovacuum  from pg_stat_user_tables where relname='names';
         last_autovacuum          
----------------------------------
 2012-11-08 17:51:31.995618+05:30 
```

第二个问题：为什么在这段时间之后还没有执行 autovacuum 过程，尽管我的数据库不是很忙，而且我已经停止了对该表的所有事务。

所以，请告诉我是否需要做任何特定的配置来进行频繁的清理，以便在记录被删除后我可以取回所有空间。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-11-08T18:37:17.007

第一个查询 - autovacuum 不会调用 VACUUM FULL - 所以它不会影响关系大小（通常，但是当在执行真空时没有其他访问关系的请求时，它可以从头到尾修剪关系文件） , 第二个查询 - 当 autovacuum_vacuum_threshold 行被修改并且修改的行/所有行高于 autovacuum_vacuum_scale_factor 时执行 autovacuum。这两个值都在 postgresql.conf 中，默认值为 50 行和 20%。

Autovacuum 执行不依赖于当前的数据库负载 - 它只依赖于更新/删除的行数。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-09T01:37:57.993

您正在使用 8.3 系列的一个非常旧的版本，它已经过时并且很快就会结束生命。请参阅 postgresql.org/support/versioning。紧急升级到 8.3.21，然后准备升级到更新的主要版本。阅读每个主要版本的发行说明，尤其是“迁移”部分。

在您的情况下，版本是相关的，因为自 8.3 以来 autovacuum 已经改进了很多。例如，8.4 摆脱了对空闲空间地图的手动管理。在 8.3 及更低版本中，您需要保持[`max_fsm_pages`](http://www.postgresql.org/docs/8.3/static/runtime-config-resource.html#GUC-MAX-FSM-PAGES)（注意：有意链接到 8.3 文档）足够高，`vacuum`以便跟踪表中的所有可用空间。如果您超出范围`max_fsm_pages`，您将开始失去空间并需要进行`VACUUM FULL`恢复。当然，8.3`VACUUM FULL`很烂，速度很慢，而且你有时需要在`REINDEX`之后，所以你最好使用`CLUSTER`.

`VACUUM`通常不会移动元组以允许它截断文件，但是在没有可用空间映射问题的较新版本上，错误的`max_fsm_pages`设置不太可能导致无限的表增长；它会稳定下来。

严重地。升级。

为了缓解，计划一些停机时间。检查日志中的警告`max_fsm_pages`并在需要时增加它，然后是`CLUSTER`你的表。准备好这需要一段时间。还要调整 autovacuum 以更积极地运行。

# java - 如何在 Android 的相机预览框上添加按钮？

> ID：13291452
> 
> 赞同：0
> 
> 时间：2012-11-08T14:56:43.973
> 
> 标签：java, android, android-layout, android-camera

我只是在相机预览帧上拖放按钮，但是当我在设备上执行应用程序时按钮不可见，我看不到按钮。请帮助解决此问题。我想在相机预览上添加一个 Flash 按钮。这是 XML 代码。

```
 <FrameLayout
      android:id="@+id/camera_preview"
      android:layout_width="fill_parent"
      android:layout_height="0dip"
      android:layout_weight="1.05" >

      <Button
          android:id="@+id/button1"
          android:layout_width="wrap_content"
          android:layout_height="wrap_content"
          android:text="@string/flash_button" />

  </FrameLayout>

  <Button
    android:id="@+id/button_capture"
    android:text="@string/capture_button"
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"
    android:layout_gravity="center"
    />
 </LinearLayout> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-08T16:24:00.927

我认为您需要将其更改`LinearLayout`为`RelativeLayout`.

这是我正在使用的工作 XML：

```
<RelativeLayout 
    xmlns:android="http://schemas.android.com/apk/res/android"
    xmlns:tools="http://schemas.android.com/tools"
    android:layout_width="match_parent"
    android:layout_height="match_parent" >

<FrameLayout
    android:id="@+id/camera_preview"
    android:layout_width="match_parent"
    android:layout_height="wrap_content" >
</FrameLayout>

<FrameLayout
    android:id="@+id/indicator"
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"
    android:layout_centerHorizontal="true"
    android:layout_centerVertical="true"
    android:background="@drawable/ind" >
</FrameLayout>

<Button
    android:id="@+id/button_switchcam"
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"
    android:background="@drawable/btn_switch_button"
    tools:ignore="HardcodedText" />

<Button
    android:id="@+id/button_capture"
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"
    android:layout_alignParentRight="true"
    android:layout_centerVertical="true"
    android:background="@drawable/btn_capture_button"
    tools:ignore="HardcodedText" />

</RelativeLayout> 
```

# android - 为什么小部件在不同版本的android中显示不同？

> ID：13291457
> 
> 赞同：-2
> 
> 时间：2012-11-08T14:57:01.133
> 
> 标签：android, widget, datepickerdialog

我有一个具有 DatePickerDialog 的应用程序。当我在不同的设备上运行相同的代码运行不同的机器人时，我得到一个不同的对话框。我理解这样一个事实，即在不同版本的 android 中，相同的小部件在外观上可能会有所不同，但为什么 wigets 功能与相同的源代码不同。

下面是两个小部件，第一个是 android 2.3.3，第二个是 Android 4.0.4。我知道它们看起来不同，但我希望在小部件顶部反映日期，因为它在 2.3.3 版本中，但在 4.0.4 中。为什么 4.0.4 中不显示“Thursday, 08/Nov/2012”？

![2.3.3](../Images/3fa52a44721fd809e521fba101c04293.png)

![4.0.4](../Images/b19555fa230dc2a457b5c72ea94d15b3.png)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-08T15:01:12.157

> 为什么 4.0.4 中不显示“Thursday, 08/Nov/2012”？

只有做出这个决定的人才能回答。如果我不得不尝试一下，我猜他们认为它更漂亮。

您当然可以自由地创建自己的日期选择器对话框，以显示您想要的所有信息。如果您希望让您的应用程序在所有 API 版本中保持 100% 一致，那么这可能是最佳途径。

**编辑：**

[这是 DatePickerDialog 的源代码](http://grepcode.com/file/repository.grepcode.com/java/ext/com.google.android/android/2.0_r1/android/app/DatePickerDialog.java)

看起来您可以覆盖 DatePickerDialog 的 onDateChanged() 以获得您想要的效果。我正在编写一个示例代码块，以便现在发布。

**再次编辑：**

好的，这是一个使其在我可以访问的 4.0.3 设备上正常工作的片段。

```
 df = DateFormat.getDateInstance(DateFormat.FULL);
   mCal = Calendar.getInstance();
   // Create a date picker dialog
   DatePickerDialog datePickerDialog = new DatePickerDialog(this,datePickerDialogListener, year, month, day){
       @Override
       public void onDateChanged(DatePicker view, int year,int month, int day){
           mCal.set(Calendar.YEAR, year);
            mCal.set(Calendar.MONTH, month);
            mCal.set(Calendar.DAY_OF_MONTH, day);
           setTitle(df.format(mCal.getTime()));
       }
   }; 
```

您必须在显示对话框之前第一次添加代码以设置它。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-08T15:03:33.037

最初（2.3 和更早的 [honeycomb?]）标题会自动更新为当前日期。我认为他们意识到这可能并不总是需要的（例如，我知道在 2.3 中设置“纯文本”标题很痛苦）所以他们将其更改为纯文本。您可以检查两个版本的代码：[2.3](http://grepcode.com/file/repository.grepcode.com/java/ext/com.google.android/android/2.3.7_r1/android/app/DatePickerDialog.java#DatePickerDialog.updateTitle%28int%2Cint%2Cint%29)和[4.0](http://grepcode.com/file/repository.grepcode.com/java/ext/com.google.android/android/4.0.3_r1/android/app/DatePickerDialog.java#DatePickerDialog)。我相信让它看起来像 2.3 比 4.0 更容易，但你将不得不对其进行自定义。

# objective-c - 在 iOS 中设置标题

> ID：13291461
> 
> 赞同：0
> 
> 时间：2012-11-08T14:57:13.440
> 
> 标签：objective-c, ios

我正在使用带有情节提要的 iOS 5。我有一个根`Navigation Controller`并附`Tab Bar Controller`有两个`Tab Bar`项目。我正在尝试手动或以编程方式`Tab Bar`在顶部导航栏上的一项中设置标题。

以下是我尝试过的一些有趣的东西，`ViewDidLoad`但标题仍然没有出现。

```
self.navigationController.navigationItem.title = @"Item List";
self.navigationItem.title = @"Item List";
self.tabBarItem.title = @"Item List";
[self.tabBarItem setTitle: @"Item List"];
[self.navigationItem setTitle:@"Item List"];
[[self.parentViewController.tabBarController.tabBar.items objectAtIndex:0] setTitle: @"Item List"]; 
```

你如何在 iOS 5 中设置标题？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-08T15:00:22.423

你试过 self.title = @"Item List" 吗？:)

```
-(void) viewDidLoad {
    [super viewDidLoad];
    self.title = @"Item List";
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-08T18:06:42.783

谢谢你们的评论。我发现正确的说法是

self.tabBarController.navigationItem.title = @"项目列表";

在 ViewDidLoad 中调用。

# ruby - 如何使用 pry 访问 Rack 中间件实例？

> ID：13291463
> 
> 赞同：1
> 
> 时间：2012-11-08T14:57:15.933
> 
> 标签：ruby, sinatra, rack, pry

我是使用[Pry](https://rubygems.org/gems/pry)的新手，尽我所能，我找不到正确的命令来访问使用 Sinatra 应用程序运行的机架中间件实例。我已经`binding.pry`在应用程序的一部分中设置了错误，但问题在于没有返回任何结果的助手，它从中间件放入 env 的信息中获取结果。我尝试`cd`进入`Rack::GeoIPCity`，但它没有让我访问任何实例信息。

所以，我可以检查本地人、助手和环境——**我如何** ***从 Sinatra 应用程序的代码中***获取中间件？

例如

```
class App < Sinatra::Base
  # inside the Sinatra app
  use Rack::GeoIPCity, :db => File.expand_path( File.join(File.dirname(__FILE__), "assets/GeoLiteCity.dat"))

  def geo_city_info
    h = {}
    env.select{|x| x =~ /^GEOIP/ }.each {|k,v|
      h[k.split("GEOIP_").last.downcase] = v
    }
    OpenStruct.new( h )
  end

  get "/home" do
    geo = geo_city_info
    binding.pry
  end

end 
```

所以在`binding.pry`被调用的地方我可以很容易地访问`geo`, `env`（这是 Sinatra 为 Rack 的 env 提供的一个助手），`geo_city_info`如果我愿意的话，我可以很容易地在里面添加一个绑定。但是，我无法`Rack::GeoIPCity`从这些绑定中访问。我希望有一个命令可以帮助我导航到那个，因为它必须是加载的应用程序代码的一部分。

当然，我可以打开中间件的代码文件并放入 pry 绑定（因为我使用 Bundler 将所有依赖库安装到 /vendor 中），但如果我知道如何做到这一点而不求助于那。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-08T16:33:33.853

不知道你想做什么，但你可以

*   Monkey 修补中间件类以在里面使用 pry

*   直接从源代码连接（我理解你不想要的）

*   使用 Sinatra 的“使用”方法从中间件堆栈访问您想要的中间件

这是我的想法，希望对你有帮助

编辑后：

看看[这个](https://github.com/sinatra/sinatra/blob/master/lib/sinatra/base.rb#L1389-1393)，你可以访问@middleware 实例变量来获取使用的中间件

# java - Java，领域，Tomcat，登录。

> ID：13291464
> 
> 赞同：1
> 
> 时间：2012-11-08T14:57:16.080
> 
> 标签：java, tomcat

我在使用 Realm 运行带有 mysql 的 tomcat 服务器创建登录时遇到了一些麻烦。我已经创建了 web.xml、context.xml，它适用于受限页面的 j_security_form。

我的问题是我无法弄清楚如何制作一个已经有登录表单的页面并重定向到同一页面。唯一不同的是显示用户已登录并且菜单更改。但是我该怎么做，因为 action=j_security_form 不指向特定页面（索引页面）这就是我想要的。这是怎么做到的？我试图用谷歌搜索它的狗屎。但是他们中必须写关于玻璃鱼的文章，但找不到我的内容。

只需要在会话中使用用户名或类似的“简单”登录重定向到同一页面。我卡住了：/

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-08T19:39:06.997

您可能需要重新阅读第 13.6.3 节（在 3.0 规范中），其中概述了所有这些内容的工作原理：

1.  用户请求受保护的页面
2.  容器呈现登录页面
3.  用户提交凭据
4.  成功认证后，用户被发送到步骤#1中请求的页面

如果您想允许“路过”登录——也就是说，跳过第 1 步——您必须自己完成所有操作。如果您使用的是 3.0-spec webapp，那么您编写自己的 servlet 来处理登录尝试：使用新`HttpServletRequest.login`方法访问`Realm`的身份验证功能并在适当时执行您自己的重定向。

如果您没有使用 3.0-spec webapp，那么您必须自己编写所有内容或使用类似[security filter](http://securityfilter.sourceforge.net/)的东西。

# php - MYSQL：查询中大型比较的 WHERE IN () 速度问题

> ID：13291466
> 
> 赞同：2
> 
> 时间：2012-11-08T14:57:24.580
> 
> 标签：php, mysql

我对 mysql 查询中的 WhERE IN () 条件有一个严重的问题。我正在从两个不超过 10 个字段的表中获取 RESULT。我在两者中都创建了主要字段。

我需要使用 WHERE IN () 来查看可能超过 500 或更长的登录 ID。因此，它创建了一个繁重的查询，并且它获取记录的速度太慢。当 login_in ID 小于 20 左右时，它很好，但当它们超过 50 或 100 或更多时，它变得更慢并且需要很长时间来处理。

所以，我的问题是如何让它快速？我使用了错误的技术吗？我的意思是我应该在 IN() 的地方使用其他东西吗？任何想法将不胜感激。

```
SELECT subscriber. * , track . * 
FROM track, subscriber 
WHERE track.type =1 AND 
      track.logged_in IN ( 2803, 2806, 54, 54, 64, 383, 833, 2808, 2809, 2810, 56, 2811, 2812, 2813, 2814, 2815, 2816, 2817, 2818, 2819, 2820, 2821, 2822, 2823, 2824, 2825, 2826, 2827, 2828, 2829, 2830, 2831, 2832 ) AND 
      subscriber.post_id = track.post_id AND 
      track.nmade = subscriber.nmade AND 
      subscriber.userid =  '54' 
ORDER BY track.date_created DESC 
LIMIT 5 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-08T15:00:22.877

mysql 中的 IN 子句的速度并不出名……也许如果你用你想要的 id 创建一个临时表，并且你用 track 表做一个 JOIN，那么操作会更快。

临时表是每个会话的，因此您无需花费精力在使用后删除它们，当您关闭与 mysql 的连接时，它们将被 mysql 删除。

无论如何，如果您想在 JOIN 操作中获得合理的性能，您将需要索引 logged_in 字段。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-08T15:11:46.627

你可以试试这样的，应该会更快。这不是最好的方法，但可能最容易在您的 PHP 中实现。

```
SELECT subscriber. * , track . * 
FROM track, subscriber
JOIN (
    SELECT 2803 as logged_in
    UNION
    SELECT 2806
    UNION
    SELECT 54
    UNION
    SELECT 64
    ) list
ON track.logged_in = list.logged_in

WHERE track.type =1 AND 
      subscriber.post_id = track.post_id AND 
      track.nmade = subscriber.nmade AND 
      subscriber.userid =  '54' 
ORDER BY track.date_created DESC 
LIMIT 5 
```

# asp.net - GridView未在asp.net底部显示所有页码列表

> ID：13291468
> 
> 赞同：2
> 
> 时间：2012-11-08T14:57:26.743
> 
> 标签：asp.net

`GridView`我有一个包含大量数据的 ASP.NET控件，它创建的页码如下：

> 1,2,3,4,5,6,7……

`GridView`我需要在底部显示所有页码，而不是句点。谁能看到我的代码有什么问题？

```
<asp:GridView ID="gvContact" 
              runat="server" 
              AllowPaging="True"
              PageSize="1000" 
              AutoGenerateColumns="False"
              CellPadding="4"
              ForeColor="#333333"
              GridLines="None"
              OnRowCancelingEdit="GridView1RowCancelingEdit"
              OnRowEditing="GridView1RowEditing"
              Width="960px" 
              OnRowUpdating="GridView1RowUpdating"
              OnPageIndexChanging="GrvDetailsPageIndexChanging" 
              OnRowDeleting="GridView1RowDeleting"> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-08T15:45:59.527

将[PageButtonCount](http://msdn.microsoft.com/en-us/library/system.web.ui.webcontrols.pagersettings.pagebuttoncount.aspx)与`Mode="NumericFirstLast"`GridView 的设置一起使用，例如在 GridView 中添加以下行：

```
<PagerSettings Mode="NumericFirstLast"  PageButtonCount="1000"  /> 
```

# c++ - OpenCV 2.4.3 中的阴影去除

> ID：13291469
> 
> 赞同：4
> 
> 时间：2012-11-08T14:57:36.127
> 
> 标签：c++, image-processing, opencv, background, shadow

我正在使用 OpenCV 2.4.3（最新版本）使用内置的[GMG](http://docs.opencv.org/modules/gpu/doc/video.html?highlight=gmg#gpu%3a%3aGMG_GPU)算法从视频流中检测前景。结果效果很好，但我还想删除前景阴影，在我的例子中，是一个移动的人的阴影。我在opencv2.4.2中找不到类似于MoG的“阴影检测参数”的参数来去除阴影。我已经为此阅读了原始[论文](http://goldberg.berkeley.edu/pubs/acc-2012-visual-tracking-final.pdf)，发现“启发式置信模型”部分可能会有所帮助，但仍然无法在我的代码中处理它。有人可以帮忙吗？谢谢。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-26T16:26:23.473

我不能直接帮助你，但我可以向你指出[Graham Finlayson](http://www.uea.ac.uk/computing/People/Faculty/Graham+Finlayson)的工作，他在从彩色图像中去除阴影方面做了很多工作。参见例如：

*   [阴影去除的熵最小化](http://link.springer.com/article/10.1007/s11263-009-0243-z)
*   [关于图像阴影的去除](http://www.computer.org/csdl/trans/tp/2006/01/i0059-abs.html)

# ruby-on-rails - 如何运行一个不同于其他开发者共享同一个 repo 的数据库引擎？

> ID：13291470
> 
> 赞同：0
> 
> 时间：2012-11-08T14:57:34.753
> 
> 标签：ruby-on-rails, ruby, gem, bundler, gemfile

看到[如何为每个开发人员定制 Gemfile？](https://stackoverflow.com/questions/4244182/how-to-customize-gemfile-per-developer)，但它并没有真正做到我想要的，而且它很旧。

用例：我想使用 Postgres，而其他开发人员正在使用 SQLite。

一种解决方案是修改我的 Gemfile 并且不提交它，但是如果有人对其进行任何更改，它将不同步。无论如何，它会在一段时间后意外提交。

有没有一种干净的方法可以删除 SQLite gem 并在我的环境中添加 Postgres gem，而不影响其他开发人员的环境和 Gemfile 中的其他 gem？

FWIW，这些更改仅影响开发和测试环境。不是分期或生产。

或者，也许根本不需要更改 Gemfile。是否可以同时安装 gem 并打开 db 配置文件？如果是这样，如何设置每个开发人员的数据库配置？

编辑：不需要更改 Gemfile。只需安装 pg gem 并更改 database.yml 配置文件。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-08T15:02:45.340

对于您的情况，正确的方法是在 gemfile 中包含任何开发人员使用的所有 gem，并为`database.yml`每个开发人员提供一个单独的文件。您可以简单地将 database.yml 保留为非源代码控制，并提供示例配置文件 (database.yml.sample) 供开发人员根据需要复制和修改到他们的环境中。

正如其他人指出的那样，在开发人员之间使用不同的数据库并不是很好的做法，因为这些差异可能会在非原始环境中产生意想不到的后果。在需要支持多个数据库的情况下，这可能不是一个坏主意，但在这种情况下，每个开发人员都应该可以访问所有目标数据库系统，以便每个人都可以进行全面的测试。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-08T15:04:30.123

运行与其他开发人员不同的数据库确实不是一个好主意，尤其是与生产系统相比。这个想法是您的开发环境尽可能地反映部署目标上使用的软件。

有时需要支持多个数据库，因为您的产品部署在许多不同的数据库上。这听起来不像这里的情况。

如果您使用 Postgres，则无法保证您的新代码完全可以与 SQLite 一起使用。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-08T15:12:26.780

嗯，不建议这样做，因为开发必须尽可能地模仿生产环境，所以在两个数据库引擎中开发......很棘手。无论如何，您唯一的限制是 database.yml 文件和 db 适配器。正如 PinnyM 所说，您不应该与其他开发人员共享您的 database.yml 文件，但您还应该从 Gemfile 中删除您正在使用的数据库适配器 gem。

将此添加到您的 Gemfile 中：

```
group(:production) do
  gem "sqlite" 
end 
```

您将拥有一个仅在生产中配置的适配器。不要忘记你还需要一个 database.yml 。这就是为什么这样做很棘手。或者只是手动设置数据库设置（database.yml 只是在这一步被解析，但这并不意味着你不能用普通的 ruby​​ 来做）。

# c# - 如何在不传入连接名称的情况下在实体 ObjectContext 上设置 EF Trace

> ID：13291471
> 
> 赞同：17
> 
> 时间：2012-11-08T14:57:35.593
> 
> 标签：c#, linq-to-entities

我正在编写一个可重用的基础存储库类，开发人员将在其中传递一个表示 的泛型，`ObjectContext`并且基础存储库将使用`Activator.CreateInstance`. 调试时我想使用 nuget 包`CommunityEFProviderWrappers.EFTracingProvider`。所以我设置对象上下文的代码如下所示：

```
 public void RenewDataContext()
    {
#if DEBUG
        // get the default container name
        var containerName = Activator.CreateInstance<T>().DefaultContainerName;

        // create an instance of the object context using EF Trace
        Context = (T)Activator.CreateInstance(typeof(T), EFTracingProviderUtils.CreateTracedEntityConnection(containerName));
        Context.EnableTracing();

#else
        Context = Activator.CreateInstance<T>();
#endif
    } 
```

问题是，当它尝试创建具有以下内容的实例时，它总是抛出以下错误： “指定`ObjectContext`的*架构无效。错误：\r\n(0,0)：错误 0175：指定的存储提供程序不能在配置中找到，或者无效。”*`EFTracingProvider`

 *如果我用 web 配置中的连接字符串的名称替换*containerName*并且不做第一个，`Activator.CreateInstance<T>()`那么它工作正常。所以这个问题与我创建第一个实例然后是第二个的事实有关。

这是我尝试过的：

1.  处置并清除第一个实例。
2.  在第一个实例上关闭连接。
3.  将第一个实例放在*using*语句中。
4.  在启动项目的 web.config 中的连接字符串中显式定义包含 ObjectContext 的程序集（[使用 Entity Framework Entity Connection 时的 MetadataException](https://stackoverflow.com/questions/1074337/metadataexception-when-using-entity-framework-entity-connection)）

我试图避免让开发人员传入`ObjectContext`连接字符串的泛型类型和名称。这似乎有点多余。

所以我的问题是：**如何从表示对象上下文的泛型中获取连接名称，并且仍然能够使用它来使用 EF Trace 生成的 EntityConnection 创建对象上下文的实例？**

*我的问题是关于为什么这种方法不起作用，而不是关于可能的解决方法。*

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-18T10:22:37.960

这是您的解决方案，将以下代码添加到您的配置文件中：

```
<system.data>
  <DbProviderFactories>
    <add name="EF Caching Data Provider"
         invariant="EFCachingProvider"
         description="Caching Provider Wrapper"
         type="EFCachingProvider.EFCachingProviderFactory, EFCachingProvider, Version=1.0.0.0, Culture=neutral, PublicKeyToken=def642f226e0e59b" />
    <add name="EF Tracing Data Provider"
         invariant="EFTracingProvider"
         description="Tracing Provider Wrapper"
         type="EFTracingProvider.EFTracingProviderFactory, EFTracingProvider, Version=1.0.0.0, Culture=neutral, PublicKeyToken=def642f226e0e59b" />
    <add name="EF Generic Provider Wrapper"
         invariant="EFProviderWrapper"
         description="Generic Provider Wrapper"
         type="EFProviderWrapperToolkit.EFProviderWrapperFactory, EFProviderWrapperToolkit, Version=1.0.0.0, Culture=neutral, PublicKeyToken=def642f226e0e59b" />
  </DbProviderFactories>
</system.data> 
```

问题出现在`EFTracingProviderUtils.CreateTracedEntityConnection`方法中。它搜索*.Net Framework Data Provider - EFTracingProvider*，它必须在您的配置文件中指定。当它找不到它时，它不能为其目的构建这样的连接字符串：

" **metadata=reader://998e0526-8372-4bf9-83d3-949dececce96; provider=EFTracingProvider; 提供者连接字符串=\"wrappedProvider=;data source=.\SQLEXPRESS;attachdbfilename=|DataDirectory|\database.mdf; 综合安全=真；连接超时=30；用户实例=真；多个活动结果集=真；应用=实体框架\";** "

如您所见，元数据阅读器指定了它这个连接字符串，这里将是当 EF 找不到 EFTracingProvider 时抛出的 MetadataException。只是第三方方法的问题。

您可以调用 next 方法并接收相同的结果，而无需对配置进行任何更改：

```
EntityConnectionWrapperUtils.CreateEntityConnectionWithWrappers(containerName, new string[]{}); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-07-09T05:54:05.427

我的朋友是如此简单以至于被忽视，它的配置文件不是在同一个项目视图（启动项目）中的连接字符串，如果不在 asp.net web.config 中并且如果 windows 窗体不在 app.config 项目中（视图）窗口窗体（UI）。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-20T10:22:58.153

不是很直接的答案。

我不建议硬编码假设存在这样的配置：

```
(T)Activator.CreateInstance(typeof(T), EFTracingProviderUtils.CreateTracedEntityConnection(containerName)); 
```

当人们以默认名称将 EF 连接字符串存储到配置文件时，存在非常罕见的情况（除了简单示例之外）。我认为接受连接字符串或应用某种约定可能会更好。

供参考。`DbContext`不`DefaultContainerName`直接暴露。你需要先得到`ObjectContext`它。*

# wpf - Blend 的 Assets 列表为空

> ID：13291474
> 
> 赞同：7
> 
> 时间：2012-11-08T14:57:44.877
> 
> 标签：wpf, visual-studio, visual-studio-2012, expression-blend, blend

Blend to Visual Studio 2012 有一个空的资产列表。它显示的是 sendwatch 游标，而不是项目。

我没有找到任何方法来修复或恢复它。

我试过谷歌但没有结果。

UP：这似乎与项目相关，因为在另一个项目正在编辑时所有工作正常。

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2013-09-17T03:49:35.607

尝试在不同的解决方案中分离 Windows 应用商店和 Windows Phone 项目。你试过这个吗？我已经尝试过了，它在我的机器上运行良好。

可悲的事实是，Expression Blend 5 for Visual Studio 可能无法在同一解决方案中分离 Windows Store 和 Windows Phone 应用程序的资产。

# sql - SQL Server 2012 计算含税总额

> ID：13291491
> 
> 赞同：-5
> 
> 时间：2012-11-08T14:58:39.393
> 
> 标签：sql, sql-server, tsql, math, calculator

需要有 3 列

税率必须为 13%

税额需要添加到 InvoiceTotal 它添加的金额需要放在税列中，并且 InvoiceTotal 需要添加税额并放入总计列，但前提是 InvoiceTotal 大于 0$也就是如果有欠款

InvoiceTotal 是唯一需要从中提取数据的地方，InvoiceTotal 是表中称为 Invoices 的列

结构如下：

InvoiceTotal 税收总额

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-08T15:07:28.557

听起来你想要这个：

```
select invoicetotal,
    invoicetotal * .13 as tax,
    invoicetotal * 1.13 as total
from invoices
where invoicetotal > 0 
```

# javascript - 使用 this.addClass (Jquery)

> ID：13291492
> 
> 赞同：3
> 
> 时间：2012-11-08T14:58:41.793
> 
> 标签：javascript, jquery

我正在 jquery 中尝试 this.addclass 向 DIV 添加一个类，这可能是未知的。可以通过这种方式解决吗？

```
<style>.classOne { font-size:24px; color:#009900;}</style>

<script>
function hello()
{   alert();
$(this).addClass('classOne');
}
</script>

<div class="something"  onclick="hello();"> Test information </div> 
```

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2012-11-08T15:05:17.733

尽可能避免使用内联 javascript，而是执行以下操作：

```
<style>.classOne { font-size:24px; color:#009900;}</style>

<script type="text/javascript">
$(function() {
    $('.something').on('click', function() {
        alert('hello');
        $(this).addClass('classOne');
    });
});
</script>

<div class="something"> Test information </div> 
```

[**小提琴**](http://jsfiddle.net/H7Eqq/)

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2012-11-08T15:01:50.080

您对“this”的引用无效，请改用这个

```
<style>.classOne { font-size:24px; color:#009900;}</style>

<script>
function hello(ojecttRef)
{   
     alert();
     $(ojecttRef).addClass('classOne');
}
</script>

<div class="something"  onclick="hello(this);"> Test information </div> 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-11-08T15:02:57.337

这样会更好...

```
//Bind a click event to the div
$('div').on('click', function(){
     $(this).addClass('classOne');
});

//No Onclick needed here
<div class="something"> Stuff Here </div> 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2019-05-09T21:00:52.733

改为使用`$('this').addClass('classOne');`。

`this`自己不能一个人去。需要在`$()`

# salesforce - 将分隔的数据文件导入 Salesforce 时防止重复记录

> ID：13291493
> 
> 赞同：1
> 
> 时间：2012-11-08T14:58:42.427
> 
> 标签：salesforce, duplicates

我需要将数百个联系人从仅包含名字、姓氏、街道地址 1、街道地址 2、城市、州和 zip 的分隔文件加载到 salesforce 数据库中。我的理解是，您只能使用姓名或电子邮件地址来查看销售人员数据库中是否已经存在联系人。

我希望能够匹配姓名、街道地址 1 和城市，以便可以限制数据库中的重复记录。

这在销售人员中可能吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-08T20:40:54.360

有一些选择……我会把它做成一个社区 wiki 帖子，这样任何人都可以参与进来。

**装载前/装载期间的检查**

`{!Contact.Name} + ' ' + {!Contact.MailingStreet} + ' ' + {!Contact.MailingCity}`有一种方法可以创建一个文本字段并将其标记为唯一或外部 id，然后编写一个工作流规则，当插入联系人或任何这些参考字段发生更改时，该规则将填充它。但是，您必须以某种方式为您已经拥有的所有联系人填写此信息（这并非完全不可能：导出包含所有联系人的报告，填写该字段，然后将其导入并设置为联系人 ID 的重复检查）。

如果这是一次性操作，也许你最好不要创建这个字段。从 SF 报告中导出数据，然后在 Excel 等中进行一些匹配并加载回来？

您可以为重复数据删除编写触发器，但这是一个有点讨厌的解决方案（默认情况下，整个加载失败，它更多地用于标记为错误而不是以某种方式合并数据）。我不认为你想那样做（你可以使用顶点代码还是你的 SF 版本有限？）

**加载后检查**

您可以决定将它们全部加载并稍后处理重复项。然后运行一个按这 3 个字段对联系人进行分组的报告，当一个组包含超过 1 个时 - 您有一个合并联系人的候选人（这是联系人记录上的一个按钮）。

您也可以[使用 AppExchange 工具](http://appexchange.salesforce.com/results?keywords=duplicates)，它们有很多！

**其他随机胡言乱语；）**

如果他们是您可能与之开展业务但您不确定的人，您可能希望将他们加载为潜在客户。将潜在客户记录想象为您在某个贸易博览会上获得的名片。这里可能有机会，也可能根本不起作用。所以加载它们，然后您可以单击潜在客户上的“转换”按钮 - 这可能会创建多达 3 条记录（帐户、联系人、机会）或合并到现有数据中，我认为这也是您的一个选项。

# regex - 用正则表达式匹配连字符之间的文本

> ID：13291494
> 
> 赞同：7
> 
> 时间：2012-11-08T14:58:49.007
> 
> 标签：regex, hyphen

目前我有这个字符串

```
"RED-CURRENT_FORD-something.something" 
```

我需要捕捉连字符之间的单词。在这种情况下，这个词`CURRENT_FORD`

我写了以下内容

```
\CURRENT_.*\B-\ 
```

哪个返回`CURRENT_FORD-`哪个在两个层面上是错误的。

1.  这意味着连字符之间的所有内容都以`CURRENT`
2.  它包括最后的连字符。

有没有更有效的方法来捕获连字符之间的单词而不明确说明第一个单词？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-11-08T15:00:49.107

您可以使用分隔符来帮助绑定您的模式，然后用括号*捕获*您想要的内容。

```
/-([^-]+)-/ 
```

然后，您可以修剪连字符。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-11-08T15:01:44.857

您可以使用这些正则表达式

```
(?<=-).*?(?=-)//if lookaround is supported 
```

**或者**

```
-(.*?)-//captured in group1 
```

* * *

`.*?`匹配任何字符 ie `.`0 到多次 ie `*`lazily ie`?`

`(?<=-)`是一个零宽度的后视断言，它将匹配所需匹配之前的字符，`-`即是一个零宽度的前瞻断言，它匹配匹配后的字符`.*?``(?=-)``-``.*?`

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-08T15:05:54.597

```
(?<=-)\w+(?=-) 
```

本身不参与捕获的连字符之间的任何序列或“单词”字符（后视和前瞻条件）

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-11-08T15:24:17.293

尝试使用单词边界选项：

```
/^.*-\b(\w+)\b-.*$/ 
```

这实际上是 3 个（嗯，2 个）部分：

```
^.*-\b 
```

表示从标记开头到破折号后跟单词边界的所有字符（“单词字符”和非“单词字符”之间的不可见边界）

```
(\w+) 
```

捕获破折号之间的位并将其放入匹配的模式变量中（这就是括号的用途）

最后一部分只是第一部分的重复，以匹配破折号后的任何其他字符。

# javascript - MongoDB - 将数据存储在分片集中并测量时间

> ID：13291496
> 
> 赞同：0
> 
> 时间：2012-11-08T14:58:55.327
> 
> 标签：javascript, mongodb, benchmarking

我想将数据存储在 MonogoDB 上。因此，我有一个 mongos、三个 configserver 和一个由两个副本集组成的分片集（每个副本集都有 prim./sec./arbiter）。

我有两个问题

1) 衡量存储所有数据所需时间的最佳方法是什么？

现在我通过mongos执行“time mongo 141.100.55.72:25001/mydb --quiet /data/javascript/insert.js”（insert.js是后面描述的javascript）

我想测量多个操作 - 将每个输出存储在文件中的好方法是什么（在 ubuntu 服务器上工作）

2）测量的时间真的很慢-例如：执行大约需要5分钟。对于 100.000 个数据对象..

如何加快性能？

javascript 看起来像这样：（我正在创建 testdata ；分片键是仅用于测试的迭代（键：x）-这会导致性能低下吗？）

```
var amount = 100000/4;
var x=1;
var doc= "";

for (i=0; i<amount; i++)
{
doc = { datetime: '1119528044', att2: '...', key: x,...} //14 attributes
db.mycol.insert(doc);
x=x + 1
}

for (i=0; i<amount; i++)
{
doc = { datetime: '1219268044', att2: '...', key: x,...} //14 attributes
db.mycol.insert(doc);
x=x + 1
}

for (i=0; i<amount; i++)
{

doc ={ datetime: '1355851700', att2: '...', key: x,...} //14 attributes
db.mycol.insert(doc);
x=x + 1

}

for (i=0; i<amount; i++)
{ 
doc = { datetime: '1444851704', att2: '...' key: x,...} //14 attributes
db.mycol.insert(doc);
x=x + 1
} 
```

此外，我不确定如何检查数据是否在两个副本集上 - 最好的检查方法是什么？

最好的祝福

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-12T15:29:04.357

通过运行`time mongo`，您将在打开、建立连接和完成整个脚本的过程中增加大量额外时间。

这就是你想要测量的吗？或者每个插入复制/存储在分片中所需的数量？

如果要在 shell 中运行脚本：

```
function measure_time() {
 ...
}
> var d = new Date(); measure_time(); print('it took', Math.abs(d-new Date().getTime()).toString(), 'ms'); 
```

以及测量需要多长时间。

# php - 从 MySQL 数组为 JQPlot 在 PHP 中格式化 JSON

> ID：13291499
> 
> 赞同：2
> 
> 时间：2012-11-08T14:59:00.777
> 
> 标签：php, mysql, json, jqplot

我已经查看了有关传递 JSON 数据以提供 JQPlot 的其他主题，但似乎无法找到我需要的内容。问题是我无法正确格式化 JSON 数据。（是的，这是我第一次格式化和使用 JSON）我尝试了各种组合，但我仍在寻找合适的组合。

JQPlot 希望将数据视为

```
[[x,y],[x,y],[x,y],[x,y]] 
```

但我能输出的最好的是

```
[x,y][x,y][x,y][x,y] 
```

我希望有人能告诉我我错过了什么。我的代码如下...

```
$sql = "SELECT client_id, SUM(gross) FROM s_pr_wcomp GROUP BY client_id ORDER By SUM(gross) DESC LIMIT 10";
$result = mysqli_query($mysql,$sql) or die(mysqli_error('Top 10 Query Failed!'));

// Encode Top 10

while($row = mysqli_fetch_array($result)){ 
$grossTop = array(
    $grossTop[] = $row['client_id'],
    $grossTop[] = '$'.number_format($row['SUM(gross)'], 2)
);

header('ContentType: application/json; charset=utf-8');
echo json_encode($grossTop);
} 
```

谢谢！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-08T15:08:54.573

您需要将数组附加到`$grossTop`数组中。在你的while循环中有类似的东西：

```
while($row = mysqli_fetch_array($result)){ 
    $grossTop[] = array(
        $row['client_id'],
        '$'.number_format($row['SUM(gross)'], 2)
    );
}
header('ContentType: application/json; charset=utf-8');
echo json_encode($grossTop); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-08T15:05:23.850

快速浏览一下，将 $grossTop 的每次迭代包装在另一个数组中。

```
while($row = mysqli_fetch_array($result)){ 
$grossTop = array(array(
    $grossTop[] = $row['client_id'],
    $grossTop[] = '$'.number_format($row['SUM(gross)'], 2))
); 
```

# python - BeautifulSoup 是具有转义字符的 HTML 转义字符串

> ID：13291500
> 
> 赞同：2
> 
> 时间：2012-11-08T14:59:05.793
> 
> 标签：python, escaping, beautifulsoup, html-escape-characters

我正在从文件中读取一个字符串：

```
a = '<script>closedSign: \'<img src="/static/images/drop-down.png" style="margin-top: -3px;"  />\'</script>' 
```

现在，当我跑步时

```
BeautifulSoup(a)

<script>closedSign: '&lt;img src="/static/images/drop-down.png" style="margin-top: -3px;"   /&gt;'</script> 
```

因此，`<img`被 HTML 转义到`&lt;img`

我怎样才能避免这种情况？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-18T11:55:03.167

使用 BeautifulSoup 3.2.0 而不是 3.2.1 来解决这个问题。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-08T15:35:49.663

查看[Beautiful Soup 文档](http://www.crummy.com/software/BeautifulSoup/bs3/documentation.html)的“实体转换”部分。

```
soup = BeautifulSoup(html, convertEntities=BeautifulSoup.HTML_ENTITIES) 
```

# ruby-on-rails - 在 Rails 中创建新的多对多嵌套模型

> ID：13291501
> 
> 赞同：0
> 
> 时间：2012-11-08T14:59:06.147
> 
> 标签：ruby-on-rails, ruby-on-rails-3, nested-attributes

我有一个典型的基本问题，我找不到一个好的解决方案。让我们看一下 Rails 中典型的多对多关系，连接表用于赋值：

```
Recipe
    has_many :recipe_ingredients
    has_many :ingredients, :through => :recipe_ingredients
    accepts_nested_attributes_for :recipe_ingredients

Ingredient
    has_many :recipe_ingredients
    has_many :recipes, :through => :recipe_ingredients

RecipeIngredient
    belongs_to :recipe
    belongs_to :ingredient
    attr_accessible :quantity 
```

这里没有什么奇怪的。假设现在我想一次性创建一个包含新成分的新食谱。我有一些 JSON 像这样发送到服务器：

```
{"recipe"=>
    {"name"=>"New Recipe", 
     "ingredients"=>
        [{"name" => "new Ingr 1", "quantity"=>0.1},
         {"name" => "new Ingr 2", "quantity"=>0.7}]
    }
} 
```

我认为我可以导航参数并一个一个地创建对象，但我正在研究利用多对多关联，最重要的是`accepts_nested_attributes_for`，因此能够做类似的事情`Recipe.create(params[:recipe])`并为我创建对象树。如果这意味着更改正在发送的 JSON，那不是问题。:)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-08T15:43:46.767

JSON 密钥应为`"ingredients_attributes"`：

```
Recipe
  has_many :recipe_ingredients
  has_many :ingredients, :through => :recipe_ingredients
  attr_accessible :ingredients
  accepts_nested_attributes_for :ingredients # note this 
```

和

```
{"recipe"=>
  {"name"=>"New Recipe", 
    "ingredients_attributes"=>
      [{"name" => "new Ingr 1", "quantity"=>0.1},
       {"name" => "new Ingr 2", "quantity"=>0.7}]
  }
} 
```

# c - 为什么我在 C 中的行数不起作用？

> ID：13291505
> 
> 赞同：4
> 
> 时间：2012-11-08T14:59:21.173
> 
> 标签：c, line-count

我正在尝试读取一个文本文件，但在此之前我想知道我要读取多少个元素。所以我需要计算文本文件的行数。到目前为止，我有这个：

```
int getLinecount (char *file) 
{
    int ch, count = 0;
    FILE *fp = fopen(file, "r");
    if(fp == NULL)
    {
        return -1;
    }
    while((ch = fgetc(fp)) != EOF)
    {
        if (ch == '\n'); 
        {
            count++;
        }
    }
    fclose(fp);
    return count;
} 
```

这工作得很好。我没有对文本文件进行任何更改，尽管该文件只有 10,000 行，但它仍然打印 130,000。我在正文中唯一写的是：

```
linecount = getLinecount("..."); 
```

我真的很好奇错误在哪里。另外，是否有更好的选择来获取行数？

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-11-08T15:01:18.383

`;`您的语句后面有一个分号`if`。然后，块总是被执行：

```
{
    count++;
} 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-11-08T15:03:02.373

改变

```
if (ch == '\n'); 
```

到：

```
if (ch == '\n') 
```

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-11-08T15:01:25.807

:后面的分号`if`将其删除。使用尾随分号，代码等效于：

```
if (ch == '\n') {}
count++; 
```

这意味着`count`对于循环的每次迭代（`char`文件中的每个）都会递增。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-11-08T15:02:54.713

你有尾随分号要删除`if`

对于读取文件，最好使用以下代码：

```
while((fgets(blahblahblah)) != NULL) {
  counter++;
} 
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-11-08T15:58:50.613

一切都很好，除了分号 ( `;`)，应该从行中删除

```
if (ch == '\n') 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-11-08T15:04:49.953

除了`;`其他人提到的问题，可以在[这篇](https://stackoverflow.com/a/4278875)文章中找到一个替代解决方案，因为他解释了为什么他会以他的方式做事。

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2012-11-08T15:06:27.067

您可能需要考虑用于创建和查看此文件的操作系统。

[从PHP Echo Line Breaks](https://stackoverflow.com/questions/255511/php-echo-line-breaks)复制：

*   '\n' 是 linux/unix 换行符
*   '\r' 是一个经典的 mac 换行符 [OS X 使用上面的 unix \n]
*   '\r'+'\n' 是windows换行符

# php - 具有不同语言 utf8 的 Rss 提要

> ID：13291510
> 
> 赞同：0
> 
> 时间：2012-11-08T14:59:27.387
> 
> 标签：php, utf-8, rss

我正在尝试使用以下提要。[http://www.amaderbarisal.com/feed](http://www.amaderbarisal.com/feed)

所以你可以在孟加拉国看到它。

বরিশাল::বরিশালেপ্রশাসনিককয়েকটিরদবদলকরা。。বৃহস্পতিবার জনপ্রশাসন</p>

我正在运行此功能以从 rss 提要中提取数据。

```
$source_xml = utf8_encode(file_get_contents($url));
$source_xml = simplexml_load_string(str_replace('content:encoded', 'description', $source_xml), 'SimpleXMLElement', LIBXML_NOCDATA);

echo "<pre>";
    print_r($source_xml);
echo "<pre>"; 
```

好的，在简单的 xml 函数中发生了一些事情，它正在改变所有数据，因为我被输出到跟随。

Ã Â¦Â¬Ã Â¦Â°Ã Â¦Â¿Ã Â¦Â¶Ã Â¦Â¾Ã Â¦Â² :: Ã Â¦Â¬Ã Â¦Â°Ã Â¦Â¿Ã Â¦Â¶Ã Â¦Â¾Ã Â¦Â²Ã Â§Â‡ Ã Â¦ÂªÃ Â§ÂÃ Â¦Â°Ã Â¦Â¶Ã Â¦Â¾Ã Â¦Â¸Ã Â¦Â¨Ã Â¦Â¿Ã Â¦Â• Ã Â¦Â•Ã Â§ÂŸÃ Â§Â‡Ã Â¦Â•Ã Â¦Â

有人可以解释为什么会发生这种情况吗？？？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-08T15:20:43.677

这是[utf8_encode()](http://php.net/utf8_encode)的描述：

> utf8_encode — 将 ISO-8859-1 字符串编码为 UTF-8

您在 ISO-8859-1 中的输入是否符合此功能的要求？在 Firefox 中，您只需使用上下文菜单中的“查看页面信息”条目，它就会显示*UTF-8*。总结一下：

*   您无法*从 ISO-8859-1*转换，因为源文本不使用这种编码。
*   您不需要转换*为 UTF-8*，因为源文本已经在使用这种编码。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-08T15:07:44.047

检查 php.ini 中的字符编码设置。这设置为默认的标准拉丁编码 (ISO-8859)。如果您还没有，您将需要更改它。

您是否在支持孟加拉语字符的字体环境中输出？

# jquery - 使用 HttpContext.RewritePath() 时，脚本服务在 VS 开发服务器上返回 405？

> ID：13291516
> 
> 赞同：2
> 
> 时间：2012-11-08T14:59:36.640
> 
> 标签：jquery, http-status-code-405, rewritepath, scriptservice, vs-devserver

我似乎遇到了一个非常具体的问题，对于问题的长度表示歉意。

我有一个脚本服务，实际居住在`/somepath/service.asmx`. 我正在使用 url 重写模块 (UrlRewritingNet v2.0) 来重写来自`/service.asmx`我的物理位置的调用。该模块使用 .Net 的`HttpContext.RewritePath()`功能。

我的服务公开了 method `dosomething`，并且在我的页面上有一个脚本调用：

```
$.ajax({
  type: "POST",
  url: "/service.asmx/dosomething",
  data: JSON.stringify(inputData),
  contentType: "application/json; charset=utf-8",
  dataType: "json"
}); 
```

当我在 IIS 中运行此代码时 - 它返回状态代码`200`，但当我在 VS 开发服务器上运行此代码时 - 它返回`405 Method Not Allowed`。来自堆栈跟踪的错误消息是：

```
"The HTTP verb POST used to access path '/somepath/service.asmx/dosomething' is not allowed." 
```

请注意，在此消息中，路径似乎已正确路由。

有趣的是——我几乎可以肯定这是一个路由问题，因为当我将我的 ajax 调用更改为完整的 url 时`/somepath/service.asmx/dosomething`——IIS 和 VS 开发服务器都可以正常工作。

任何想法如何避免405？

# c# - 图表 X 轴移动

> ID：13291517
> 
> 赞同：4
> 
> 时间：2012-11-08T14:59:40.303
> 
> 标签：c#, charts, visual-studio-2012

我在尝试创建带有移动 x 轴的 ac# 图表时遇到问题。

我想要的是添加一个新的 Y 值并使 x 轴向左移动，删除第一个数据点。

我可以在右手边加点罚款，

```
 DataPoint dp2 = new DataPoint(x, rnd.Next(100));
 chart1.Series[0].Points.Add(dp2);
 x++; 
```

我可以很好地删除左侧的第一个点

```
chart1.Series[0].Points.RemoveAt(0); 
```

但是如果我同时尝试两者都行不通，它会在图表的开头添加空格并离开右侧而不是留在图表区域内？

```
DataPoint dp2 = new DataPoint(x, rnd.Next(100));
chart1.Series[0].Points.RemoveAt(0);
chart1.Series[0].Points.Add(dp2);
x++; 
```

我的问题的完整演示：-（制作一个图表，3 个按钮和 3 个计时器，将我的代码粘贴到 form1.cs 的顶部，然后将按钮（鼠标单击）和计时器（滴答声 1000 毫秒）事件连接到我的代码事件处理程序。）

```
using System;
using System.Windows.Forms;
using System.Windows.Forms.DataVisualization.Charting;

namespace test_chart2
{
    public partial class Form1 : Form
    {
        double x = 16;
        Random rnd = new Random();
        public Form1()
        {
            InitializeComponent();

            DrawToGraph1();

        }

        private void DrawToGraph1()
        {
            chart1.Series[0].Points.Clear();
            for (int g = 5; g <= 15; g++)
            {
                DataPoint dp = new DataPoint(g, rnd.Next(100));
                chart1.Series[0].Points.Add(dp);
            }
        }
        private void timer1_Tick(object sender, EventArgs e)
        {
            DataPoint dp2 = new DataPoint(x, rnd.Next(100));
            chart1.Series[0].Points.Add(dp2);
            x++;
        }
        private void timer2_Tick(object sender, EventArgs e)
        {
            chart1.Series[0].Points.RemoveAt(0);
        }

        private void timer3_Tick(object sender, EventArgs e)
        {
            DataPoint dp2 = new DataPoint(x, rnd.Next(100));
            chart1.Series[0].Points.RemoveAt(0);
            chart1.Series[0].Points.Add(dp2);
            x++;
        }
        private void button2_MouseClick(object sender, MouseEventArgs e)
        {
            timer1.Enabled = false;
            timer2.Enabled = true;
            timer3.Enabled = false;
        }
        private void button3_MouseClick(object sender, MouseEventArgs e)
        {
            timer1.Enabled = false;
            timer2.Enabled = false;
            timer3.Enabled = true;
        }
        private void button1_MouseClick(object sender, MouseEventArgs e)
        {
            timer1.Enabled = true;
            timer2.Enabled = false;
            timer3.Enabled = false;
        }
    }
} 
```

如果我使用它确实有效

```
series1.IsXValueIndexed = true; 
```

但我不能使用这个，因为我的项目有一个时间 X 轴，当我使用这个选项时，它不会产生一个很好的时间线（轴标签不像通常那样四舍五入到最近的小时），它也会导致对齐问题我的辅助 X 轴在图表顶部显示日期。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-08T18:02:32.230

请试试这个并告诉我会发生什么：

```
private void timer3_Tick(object sender, EventArgs e)
{
  DataPoint dp2 = new DataPoint(x, rnd.Next(100));
  Series mySeries = chart1.Series[0];
  chart1.Series.Clear();
  mySeries.Points.RemoveAt(0);
  mySeries.Points.Add(dp2);
  chart1.Series.Add(mySeries);
  x++;
} 
```

也就是说，您可以尝试删除系列，对其进行修改，然后将其添加回图表。我无法自己运行它，因为我无法在 Visual Studio 中轻松地重建您的项目。希望能帮助到你。

# android - BalloonItemizedOverlay 是一个库吗？

> ID：13291529
> 
> 赞同：1
> 
> 时间：2012-11-08T15:00:15.543
> 
> 标签：android, map, balloon

我是一名 android 编程初学者。我想在地图上创建一个气球。[我在此链接https://github.com/jgilfelt/android-mapviewballoons](https://github.com/jgilfelt/android-mapviewballoons)上阅读了 mapViewBalloon-example但我不知道，BalloonItemizedOverlay 是一个库吗？我应该将它添加到程序中还是应该在程序中编写 BalloonItemizedOverlay 类？我读了这门课，但我看不懂这门课的大部分代码:(

感谢帮助。

* * *

## 回答 #1

> 赞同：-2
> 
> 时间：2012-11-08T15:22:58.887

添加一个类扩展 ItemizedOverlay （未完全编码，您应该完成所有操作。）

```
public class MyItemizedOverlay extends ItemizedOverlay<OverlayItem> {

//it gives abstract methods one of them is onTap (onTap will show dialog 
//when user tap overlay item).
  @Override
  protected boolean onTap(int index) {
      AlertDialog.Builder dialog = new AlertDialog.Builder(context);
    dialog.setTitle(item.getTitle());
    dialog.setMessage(item.getSnippet());
    dialog.setCancelable(true);
    dialog.setNegativeButton(dissmis, new OnClickListener() {

        public void onClick(DialogInterface dialog, int which) {
            // TODO Auto-generated method stub
            dialog.dismiss();
        }
    });
  }

} 
```

你我添加 alertDialog 来处理气球。如果您想取消等选项，请添加一些按钮。您还可以为显示的信息（文本）添加标题和消息。

# c# - 使用便携式 imagemagick 转换程序

> ID：13291537
> 
> 赞同：-1
> 
> 时间：2012-11-08T15:00:34.380
> 
> 标签：c#, windows, shell, imagemagick, cmd

鉴于我知道所有文件路径，如何将图像文件路径传递给 convert.exe？

ImageMagick 没有安装，只是在我的项目文件夹中。我认为我不应该通过 cmd 提示符传递图像文件路径。

这是我目前的尝试。我没有从中得到任何错误——但是一个 cmd 提示会迅速弹出并迅速消失——当它启动时我已经打印了屏幕，[它说的是关于 userparams 的一些东西](http://imgur.com/ftQ7I)……这显然与 ImageMagick 有某种关系。

当我在没有 Unity 的命令提示符下直接运行相同的命令时（这是我用来运行下面的代码的），我得到以下信息：

```
Microsoft Windows XP [Version 5.1.2600]
(C) Copyright 1985-2001 Microsoft Corp.

    F:\Documents and Settings\Administrator>F:\ImageMagickTest\ImageMagick\convert.e
    xe F:\ImageMagickTest\PDFs\Appointment.pdf F:\ImageMagickTest\ConvertedPDFs\Appo
    intment.png
    Unrecoverable error: rangecheck in .setuserparams
    Operand stack:
        --nostringval--  --nostringval--  --nostringval--
    START 0 2588256 1246519 1476808 192904 true 1139 5 <3>
    END PROCS 0 2588256 1257818 1476808 194288 true 1138 5 <3>
    gs_std_e.ps 0 2608352 1263873 1496904 199000 true 1138 5 <6>
    gs_il1_e.ps 0 2608352 1266056 1496904 199000 true 1138 5 <9>
    END FONTDIR/ENCS 0 2608352 1266234 1496904 199000 true 1138 5 <15>
    END DEVS 0 2611856 1273266 1496904 199000 true 1138 5 <15>
    END STATD 0 2611856 1280422 1496904 200624 true 1138 5 <39>
    END GS_FONTS 0 2641800 1309596 1496904 200624 true 1139 5 <45>
    END BASIC COLOR 15 2661896 1319485 1496904 200624 true 1137 5 <48>
    END LEVEL 1 COLOR 15 2661896 1321213 1496904 200624 true 1137 5 <51>
    END IMAGE 15 2661896 1324515 1496904 200624 true 1137 5 <54>
    gs_btokn.ps 15 2661896 1327957 1496904 200624 true 996 4 <57>
    gs_dps1.ps 15 2661896 1329302 1496904 200624 true 996 4 <57>
    gs_dps2.ps 15 2661896 1331309 1496904 200624 true 996 4 <57>
    gs_type1.ps 15 2681992 1336187 1496904 200624 true 996 4 <57>
    While reading gs_lev2.ps:
    %%[ Error: invalidaccess; OffendingCommand: put ]%%
    START 322159 2736608 1402076 1496904 202880 true 1000 7 <92>
    END PROCS 322159 2756704 1416711 1496904 204264 true 998 7 <92>
    gs_std_e.ps 322159 2756704 1419438 1496904 205648 true 998 7 <95>
    gs_il1_e.ps 322159 2756704 1421621 1496904 205648 true 998 7 <98>
    END FONTDIR/ENCS 322159 2756704 1421799 1496904 205648 true 998 7 <104>
    END DEVS 322159 2760208 1428831 1496904 205648 true 998 7 <104>
    END STATD 322159 2780304 1439315 1496904 207272 true 998 7 <128>
    END GS_FONTS 322159 2800400 1466811 1496904 207272 true 998 7 <134>
    END BASIC COLOR 322159 2820496 1476700 1496904 207272 true 996 7 <137>
    END LEVEL 1 COLOR 322159 2820496 1478428 1496904 207272 true 996 7 <140>
    END IMAGE 322159 2820496 1481730 1496904 207272 true 996 7 <143>
    gs_btokn.ps 322159 2820496 1485172 1496904 207272 true 996 7 <146>
    gs_dps1.ps 322159 2820496 1486517 1496904 207272 true 996 7 <146>
    gs_dps2.ps 322159 2820496 1488524 1496904 207272 true 996 7 <146>
    gs_type1.ps 322159 2820496 1490098 1496904 207272 true 996 7 <146>
    While reading gs_lev2.ps:
    %%[ Error: invalidaccess; OffendingCommand: put ]%%

    F:\Documents and Settings\Administrator> 
```

无论如何，如前所述，我不确定我做错了什么。这是导致相同问题的软件中的代码：

```
 string currDir = System.Environment.CurrentDirectory;
    string convertPath = currDir + @"\ImageMagick\convert.exe";
    string convertedDir = currDir + @"\ConvertedPDFs\";
    string pdfFolder = currDir + @"\PDFs\";
    string fileName = "Appointment";
    //System.IO.Directory.CreateDirectory(currDir + @"\" + convertedDirName);
    string argumentForImageMagick;

    argumentForImageMagick = pdfFolder + fileName + ".pdf" + " " + convertedDir + fileName + ".png";
    ProcessStartInfo info = new ProcessStartInfo {Arguments = argumentForImageMagick , FileName = convertPath};
    System.Diagnostics.Process.Start(info).WaitForExit(); 
```

当我打印 ProcessStartInfo 实例的参数和文件路径时，我得到

```
F:\ImageMagickTest\PDFs\Appointment.pdf
F:\ImageMagickTest\ConvertedPDFs\Appointment.png 
```

对于论点，和

```
F:\ImageMagickTest\ImageMagick\convert.exe 
```

对于文件路径。

出了什么问题？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-09T04:32:08.563

好的，我已经解决了部分问题——我必须安装 Ghostscript。这对我不起作用，因为我无法在主机上安装任何软件......但我想现在我知道出了什么问题！谢谢。

我的下一个问题基本上是我是否可以在不将其安装在主机上的情况下运行 ghostscript...

# javascript - Three.js - 2D + 3D 网格

> ID：13291538
> 
> 赞同：1
> 
> 时间：2012-11-08T15:00:35.090
> 
> 标签：javascript, three.js

是否可以使用 Canvas2D 在场景中绘制？或者，更准确地说，可以绘制与相机的位置/旋转/缩放无关的形状和/或网格。我们需要在应用程序中进行一些绘图（不是 GUI，因为已经有 Three.js 组件可用于该功能）。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-08T15:27:50.173

您可以在three.js 中绘制多个场景。如果你想要一个静态场景，它有几个对象并且不与另一个场景相机/灯光/等一起移动 - 只需制作两个：

```
 window.scene = new THREE.Scene()
        window.sceneStatic = new THREE.Scene() 
```

有一个 Chrome Experiments 的例子在他们的人口地球上这样做。他们正在使用第二个场景在全球范围内营造氛围：[http ://workshop.chromeexperiments.com/globe/](http://workshop.chromeexperiments.com/globe/)

# python - 在Python中将double转换为float

> ID：13291539
> 
> 赞同：8
> 
> 时间：2012-11-08T15:00:43.693
> 
> 标签：python, floating-point, double

在 Python 程序中，我有以下两个值：

```
v1 = 0.00582811585976
v2 = 0.00582811608911 
```

我的**假设**是 v1 是 64 位浮点值，而 v2 是 v1 转换为 32 位浮点值。我怎样才能**验证**这一点？

详细信息：
第一个值来自以 64 位精度计算的硬件板。该板将值发送到 PC，但它还应将值转换为 32 位精度并将其发送到另一块板，然后再将其发送到 PC。我只是想验证这是否真的发生了，而我所拥有的只是两个大数组。

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-11-08T15:05:46.190

您可以使用[struct 模块](http://docs.python.org/2/library/struct.html)来玩数字表示：

```
import struct

>>> struct.unpack("f", struct.pack("f", 0.00582811585976))
(0.005828116089105606,) 
```

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2012-11-08T15:03:27.583

看起来很有道理：

```
>>> v1 = 0.00582811585976
>>> v2 = 0.00582811608911
>>> import numpy as np
>>> np.float32(v1)
0.0058281161
>>> float(np.float32(v1))  #convert to 32bit and then back to 64bit
0.005828116089105606       #This rounds to v2 if you're printing 14 places of precision ...
>>> '%.14f'%np.float32(v1)
'0.00582811608911'
>>> '%.14f'%np.float32(v1) == '%.14f'%v2
True 
```

# c++ - Qt：从类 MainWindow 访问函数：其他文件中的公共 QMainWindow

> ID：13291543
> 
> 赞同：1
> 
> 时间：2012-11-08T15:00:47.617
> 
> 标签：c++, qt, function, user-interface

所以我有`mainwindow.h`：

```
#ifndef MAINWINDOW_H
#define MAINWINDOW_H

#include <QMainWindow>

namespace Ui {
class MainWindow;
}

class MainWindow : public QMainWindow
{
    Q_OBJECT

public:
    explicit MainWindow(QWidget *parent = 0);
    ~MainWindow();

    void SetBoxTest(const QString &Text);

[...] 
```

并在`mainwindow.cpp`：

```
void MainWindow::SetBoxTest(const QString &Text) {
    ui->plainTextEdit->setPlainText(Text);
} 
```

1.  我想访问`SetBoxTest`其他**文件** `.cpp`。我包括在内`mainwindow.h`，现在呢？如何正确访问`SetBoxTest`功能？

2.  以这种方式访问​​ UI 是否正确？

3.  我也在某个地方看到了这个`const QString &Text`，为什么我不应该只`QString Text`输入这样的函数类型（在文本框中设置文本）？什么更好？

**编辑：** 当我尝试这样做时：

```
MainWindow.SetBoxTest(DataString); 
```

或者

```
MainWindow.SetBoxTest(DataString); 
```

它说我是`missing ; before .`

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-08T15:23:08.043

1.  你到底想做什么？如果您想从其他 UI 文件修改 MainWindow PlainTextEdit，您可以发出信号。

2.  是的。

3.  这就是所谓的“对 const 的左值引用”。它表示对 const 对象（这里是 QString）的引用。事实是，如果你只写：

    ```
    void SetBoxTest(QString Text); 
    ```

由于您的 QString 是按值传递的，因此它将被**复制**。有了引用，它根本不会被复制（引用只是一个别名）。引用比按值传递更有效。

然而，Qt 试图通过使用他们所谓的[隐式共享来优化副本](http://doc.qt.digia.com/qt/implicit-sharing.html)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-08T15:22:18.890

1.  如果您的`MainWindow`对象名称是窗口，如果您使用的是指针，只需执行`window.SetBoxTest();`或使用`->`
2.  `ui->plainTextEdit`...我没有看到 ui 定义...您是否使用 qt creator 创建表单？
3.  `const QString &Text`通过[引用传递](http://publib.boulder.ibm.com/infocenter/lnxpcomp/v8v101/index.jsp?topic=/com.ibm.xlcpp8l.doc/language/ref/cplr233.htm)。

学习C++基础知识，这些点大部分都和qt没有关系

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-08T15:23:56.627

> 我想在其他 .cpp 文件中访问 SetBoxTest。我包括了“mainwindow.h”，现在呢？如何正确访问 SetBoxTest 函数？

除了包含“mainwindow.h”，你只需要一个指向你的主窗口的指针，然后你就可以调用`window->SetBoxTest("Hello World");`

> 以这种方式访问​​ UI 是否正确？

这是一个非常重要的问题。我的意见是肯定的，这比让其他类直接访问主窗口的 UI 要好得多。

> 我还在某处看到了这个“const QString &Text”，为什么我不应该为这种函数类型（在文本框中设置文本）放置“QString Text”？什么更好？

通常，`const QString &text`更好，因为您正在传递引用，并且比`QString text`传递副本花费的时间更少。请参阅[此处](https://stackoverflow.com/questions/270408/is-it-better-in-c-to-pass-by-value-or-pass-by-constant-reference)以获取解释。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-11-08T15:20:22.743

1.  另一个 cpp 文件中是否有一个正在运行的主窗口实例？
2.  也许......我们会看到你的第一个答案是什么;）
3.  `const QString&`只是更安全。如果您从代码中删除 const，它不会改变任何东西，但它可以确保您无法更改它/如果您尝试会出现编译错误。参考是这样你有一个 qstring 并将其提供给函数......不仅仅是创建它，因为你需要它。

//edit: 并且该引用可能会为您节省一些内存，因为它不会仅复制指针的整个字符串。

苏龙仔

# xpages - xpage 设计器中的持续锁定？

> ID：13291550
> 
> 赞同：0
> 
> 时间：2012-11-08T15:01:07.837
> 
> 标签：xpages

我们的团队经历了设计师的不断锁定。我们可能会好一两个小时，然后 Notes 就会锁定。它要求您使客户端崩溃并重新启动，但随后您会在几个小时内回到原来的位置。

我们正在运行 8.5.3 修订版 20110916.0921（版本 8.5.3）Windows XP（是 XP）我们都有戴尔笔记本电脑，3G 内存

有没有办法通过配置设置来解决这个问题，或者它是一个错误？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-11-08T17:10:44.330

听起来 JVM 内存不足？请更改 jvm.properties。它位于 /framework/rcp/deploy/jvm.properties。

如果您从未编辑过该文件，则它应具有以下值：

```
vmarg.Xmx=-Xmx256m
vmarg.Xms=-Xms48m
vmarg.Xmca=-Xmca8k 
```

请将其更改为以下值：

```
vmarg.Xmx=-Xmx1024m
vmarg.Xms=-Xms512m
vmarg.Xmca=-Xmca512k 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-08T19:31:09.740

确保您已从防病毒按访问扫描程序/实时扫描中排除 .ntf/.nsf/.jar 文件。还可以考虑在 Windows 中禁用驱动器索引。在此处查看更多信息[http://public.dhe.ibm.com/software/dw/lotus/ImprovingNotesClientPerformanceStabilityFinal.pdf](http://public.dhe.ibm.com/software/dw/lotus/ImprovingNotesClientPerformanceStabilityFinal.pdf)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-08T15:58:35.703

不确定这是否有帮助，但如果您启用了“自动构建”，我建议您在菜单“项目 - 自动构建”中将其关闭。我还将 WinXP 与 8.5.3 和 ExtLib 以及相当相似的硬件规范一起使用。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-11-08T18:11:59.703

我认为你不能超过 1024 但也许丹可以验证..

# matlab - 如何解决matlab中的散点图错误

> ID：13291553
> 
> 赞同：-1
> 
> 时间：2012-11-08T15:01:11.820
> 
> 标签：matlab, matrix, scatter

以下是我正在编写的代码的一部分，

```
for ii=1:length(k31)

B   = [k31(ii);k32(ii)];

X=abs( pinv(A)*B);

g1(ii)=X(1,:);

g2(ii)=X(2,:);

g3(ii)=X(3,:);

end

scatter(x(1:end-1), y(1:end-1), 5, g1); 
```

但是我无法绘制数据，错误如下

```
??? Error using ==> scatter at 79

C must be a single color, a vector the same length as X, or an M-by-3 matrix. 
```

x 和 y 与 k31 具有相同的尺寸......但它仍然显示这样的错误

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-08T15:23:13.270

您正在喂食[`scatter`](http://www.mathworks.com/help/matlab/ref/scatter.html)4 个参数：`scatter(X, Y, S, C)`. 您的错误指出：

> `C`必须是单色、长度与 相同的向量`X`或 M×3 矩阵。

这意味着第四个参数`g1`与第一个参数的维度不同。

这里可能发生的是您没有`g1`在循环之前重新初始化，因此它保留了以前的大小。将以下行放在`for`-loop 之前：

```
g1 = zeros(size(k31)); 
```

它应该可以工作。

# javascript - javascript中的动态变量名称

> ID：13291554
> 
> 赞同：18
> 
> 时间：2012-11-08T15:01:14.517
> 
> 标签：javascript, variables, dynamic

我有变量：

```
var variableDynamic = 1;
// or    
var variableDynamic = 1 + i++; 
```

有没有办法使用它来创建动态变量名，例如这样的：

```
var variableName + variableDynamic = {};
// or
var (variableName + variableDynamic) = {}; 
```

我知道我上面写的很荒谬，但这是为了解释这个想法。可能吗？

* * *

好的，每次用户单击添加新文件组时，我想要创建元素（上传表单），一切正常，除了我使用的插件需要每个上传表单的特殊变量来触发上传按钮（.uploadStoredFiles ();)。

这是我做的粗略代码：

```
 $('#addOneMoreFileOrGroup').on('click', function(){

    var latestFileUploaderId = parseInt($('.well-large .file-uploader').last().attr('id').split('-')[2]) + 1;

    $('.well-large .control-group:last').after('<div class="control-group deal-type-online">  \
        <label class="control-label">File / File Group Title:</label> \
        <div class="controls"> \
            <input class="span4 file-title" type="text"> \
            <span class="question label label-warning" data-title="File / Group Name:" data-content="Name for your file or group of related files (for example your brand logotype in different file formats)." data-original-title="">?</span> \
            <div id="file-uploader-' + latestFileUploaderId + '" class="file-uploader"></div> \
        </div> \
    </div>');

    var HERE_I_NEED_DYNAMIC_VAR = new qq.FileUploader({
        element: document.getElementById('file-uploader-' + latestFileUploaderId + ''),
        action: 'do-nothing.htm',
        autoUpload: false,
        debug: true,
        uploadButtonText: '<i class="icon icon-plus"></i> Select Files...',
        onSubmit: function() {

            $('#file-uploader-' + latestFileUploaderId + ' .qq-uploader').after('<button id="file-uploader-trigger-' + latestFileUploaderId + '" class="btn btn-primary"><i class="icon-upload icon-white"></i> Upload now</button>');

            $('#file-uploader-trigger-' + latestFileUploaderId + '').on('click', function() {

                if($(this).parent().parent().parent().parent().find('.file-title').val() !== '') {
                    HERE_I_NEED_DYNAMIC_VAR.uploadStoredFiles();
                } else {

                    $(this).parent().parent().parent().addClass('error');

                }

            });

        }
    });

});

} 
```

* * *

## 回答 #1

> 赞同：31
> 
> 时间：2012-11-08T15:04:36.330

在 JavaScript 中，可以通过`obj.prop`或访问对象的属性`obj['prop']`。

在全局范围内，所有变量都是`window`属性的子级。因此，您将能够：

```
var variableDynamic = 'Test';
window['variableName' + variableDynamic] = 'your value'; 
```

看看[这个小提琴](http://jsfiddle.net/DUpsL/)。

但是，如果您想将此变量的范围限制为函数，则必须定义一个父对象并使用 this 代替`window`.

* * *

## 回答 #2

> 赞同：16
> 
> 时间：2012-11-08T15:11:57.453

您可以使用`eval`.

```
eval("dynamic" + i + " = val[i]"); 
```

也看看这个：[在 JavaScript 中使用动态变量名](https://stackoverflow.com/questions/5117127/javascript-dynamic-variable-name)

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2015-01-17T23:02:04.230

要添加到 FAngels 答案，您可以在任何地方使用括号表示法。这意味着除了使用之外`window['var']`，您还可以使用`this['var']`.

* * *

## 回答 #4

> 赞同：4
> 
> 时间：2012-11-08T15:04:07.287

为此，您可以使用`eval()`. 但却`eval()`是邪恶的。你应该为这样的事情使用一个数组。

例子：

```
var i = 1337;
eval('var myvar' + i + ' = \'value\';');

alert(myvar1337); 
```

* * *

## 回答 #5

> 赞同：4
> 
> 时间：2015-07-28T13:26:07.610

我认为`eval()`不一定是邪恶的——它有时会被滥用。它的工作是获取一个字符串并将其“评估”到 JavaScript 代码 ( **MDN** ) 中，因此[如果](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/eval "Mozilla 开发者网络")**您**确实需要动态设置变量`eval()`是这样做的一种方法：

```
var t = 't';
var four = '4';
eval('var ' + (t + four) + ' = "some value";');
console.log(t4);

// returns "some value" to the console 
```

可能有更好的方法来影响动态变量+值对，尤其是因为**评估**代码字符串是在全局级别实现的，但上述方法确实有效。问题是，它是否是您想要实现的最佳方法（？）。有关“eval()”的讨论，请参阅[NCZOnline 的这篇 2013 年博客文章。](http://www.nczonline.net/blog/2013/06/25/eval-isnt-evil-just-misunderstood/ "www.nczonline.net")

* * *

## 回答 #6

> 赞同：3
> 
> 时间：2012-11-08T15:04:23.730

不确定如何在函数范围内完成，但可以像这样创建全局变量：

```
window[variableName + variableDynamic] = {} 
```

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2012-11-08T15:05:07.343

我不认为您可以在 javascript 中创建动态变量名称，但您可以通过字符串设置对象属性。因此，如果您将动态变量创建为对象的属性，则可以实现您的目标。

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2021-05-04T18:43:47.280

您可以使用 eval 功能

```
var data = "anyVariableName";
eval("var temp_" + data + "=123;");
alert(temp_anyVariableName); 
```

或者您可以使用全局`window`对象，或者`this`：

窗户：

```
var data = "anyVariableName";
window["temp_" + data] = 123;
alert(window["temp_" + data]); //123 
```

或使用点

```
var data = "anyVariableName";
window.data = 123;
alert(window.data); //123 
```

这个：

```
ar data = "anyVariableName";
this["temp_" + data] = 123;
alert(this["temp_" + data]); //123 
```

或使用点

```
var data = "anyVariableName";
this.data = 123;
alert(this.data); //123 
```

一个真实的例子：

```
var tasksTableNameRandom = 'tasksTable_' + Math.random().toString(36).substr(2, 5);
console.log('Tasks Table Object name: ' + tasksTableNameRandom);
this.tasksTableNameRandom = $('#tasks-data-table').DataTable({
..
}); 
```

# regex - c# Regex - 匹配模式 XXX||XXX（双管道前后的文本）

> ID：13291566
> 
> 赞同：0
> 
> 时间：2012-11-08T15:01:56.527
> 
> 标签：regex

我有下面的字符串：

```
"g1_fim[7,8] || '/' || g1_fim[5,6] || '/' || g1_fim[1,4] dt_final, campo1, campo2 WHERE **d1_fim || d2_teste** = 'sadasd'" 
```

我想要一个正则表达式来匹配 X||X（双管道前后的文本）

结果应该类似于这两个匹配：

```
 1\. g1_fim[7,8]||'/'||g1_fim[5,6]||'/'||g1_fim[1,4]
 2\. d1_fim||d2_teste 
```

我试过用这个表达`.*?(\|\|).*?(?=\s)`

但是结果是：

```
 1\. g1_fim[7,8]||'/'||g1_fim[5,6]||'/'||g1_fim[1,4]  ( its ok !!! )
 2\.  dt_final, campo1, campo2 WHERE d1_fim||d2_teste  (it´s not ok, I´d like to return here only the 'd1_fim||d2_teste' ) 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-08T20:55:35.480

这对你有用吗：`\S+(?:\s*\|\|\s*\S+)+`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-08T15:08:48.137

在我看来，您需要第一个“单词”直到空格，然后是 WHERE 和 = 之间的内容。本质上，我的建议是在这种情况下寻找更简单的模式匹配标准。

# ios - 移动 Xcode .xarchive 归档文件

> ID：13291567
> 
> 赞同：2
> 
> 时间：2012-11-08T15:01:56.680
> 
> 标签：ios, xcode

我们刚刚更换了硬盘。在替换它之前，我备份了所有 Xcode 的 *.xarchive 文件。这些是您在构建之后和签署分发之前获得的档案。

安装新硬盘后，我将档案移回并重新导入 Xcode 并从其中制作了一个分发 .ipa 以查看它们是否仍在工作。但是当我尝试安装新的 .ipa 时，它会抱怨“已添加已签名的资源已修改或删除”。

（我确实意识到“签名的资源已修改”错误有很多线程，但在这种情况下，我更想知道是否有正确的方法来移动存档文件或修复它们。）

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-08T15:20:58.317

*.xarchive 并不是一个真正的文件，它是一个显示为文件的捆绑文件夹。它包含您的二进制文件和应用程序中的所有资源，如果其中一个被更改，则可能是问题所在。

因此，我们在备份 xarchive 文件夹之前对其进行压缩。

存档中的二进制文件也已签名并包含配置文件。可以替换配置文件以使用不同的密钥或不同的配置文件辞职。

# c# - Telerik 网格中的复选框

> ID：13291568
> 
> 赞同：2
> 
> 时间：2012-11-08T15:02:04.107
> 
> 标签：c#, asp.net-mvc-3, telerik-grid

**目标：**

为 Telerik Grid 的每一行插入一个复选框，当用户按下提交时，将所有复选框更改为控制器。

我正在使用 C# ASP.net MVC3

**问题：**

*   我正在寻找在线教程和 Telerik 帮助，但他们总是使用 javascript 来发送所选项目的 ID，我不确定是否可以直接绑定到模型并自动保存复选框更改以避免使用 javascript。

**编码：**

```
@(Html.Telerik().Grid<Article>()
.Name("ArticleGrid")
.DataKeys(keys =>
{
    keys.Add(article => article.Code);
})
.Columns(columns =>
{
    columns.Bound(c => c.Code);
    columns.Bound(c => c.Description)
    columns.Bound(article => article.Selected).Width("35px")
            .ClientTemplate("<input type='checkbox' value='<#= Code #>' id='IsSelected<#= Code #>' />")
            .Title("")
            .HtmlAttributes(new { style = "text-align:center" });
})
.DataBinding(dataBinding => dataBinding.Ajax().Select( "_SelectArticlesAjax", Controllers.Valoration})
)
) 
```

# hadoop - 开始学习大数据的书籍

> ID：13291569
> 
> 赞同：26
> 
> 时间：2012-11-08T15:02:04.420
> 
> 标签：hadoop, hbase, hive, pentaho, bigdata

我想开始学习大数据技术。我将来想在这个领域工作。有没有人知道好书开始学习它？Hadoop，HBase。

初级-中级-高级-

提前致谢

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-11-08T15:28:26.103

我认为Coursera的[大数据课程是初学者的良好开端](https://www.coursera.org/course/bigdata)

例如，我学习了 MapReduce 技术的基础知识。

* * *

## 回答 #2

> 赞同：11
> 
> 时间：2012-11-08T16:01:03.900

Hadoop怎么样[：权威指南](http://shop.oreilly.com/product/0636920021773.do)，来自 O'Reilly Media。它涵盖了与 Hadoop、MapReduce、HDFS 等相关的所有内容。

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2012-11-08T15:58:11.243

除了这些资源，我强烈推荐你[O'Reilly](http://oreilly.com/)`Cloudera`的参考书：

*   Hadoop：权威指南
*   编程猪
*   编程蜂巢
*   HBase：权威指南

您也可以查看它的[数据科学工具包](http://shop.oreilly.com/category/get/data-science-kit.do)。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-11-08T17:06:32.647

我建议与技术部分一起学习机器学习[https://www.coursera.org/course/ml](https://www.coursera.org/course/ml)。学习统计学也很重要。

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2012-11-09T08:28:10.120

如果您对 Hive 和 Pig 感兴趣，还有更多关于这些技术的专业书籍：

*   [编程蜂巢](http://shop.oreilly.com/product/0636920023555.do)
*   [编程猪](http://chimera.labs.oreilly.com/books/1234000001811/index.html)

# python - 在没有安装 django 的情况下运行 django 项目

> ID：13291576
> 
> 赞同：7
> 
> 时间：2012-11-08T15:02:26.977
> 
> 标签：python, mysql, django

我已经在 Linux OS（Ubuntu 12.04）中使用**Django 框架（python 和 mysql DB）**开发了一个项目，我想在**另一台**使用 Linux（Ubuntu 12.04）的机器上的 localhost 中运行这个项目，而不在这里安装 Django，是否可以**运行 django没有安装 django 的项目。**有什么办法可以这样运行吗？

提前致谢。

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-11-08T15:37:11.843

为了能够使用常规 Django，必须安装它，因为您必须能够执行`import django`. 然而，将 Django 安装为系统级 Python 包从来都不是一个好主意。使用 virtualenvs 总是最好的。它们允许您处理多个项目，其中每个项目可能需要安装不同的包，并且不同的项目可能需要使用同一包的不同版本。除了用于开发之外，即使您没有 root 权限，virtualenvs 对于在远程机器上安装软件包也非常有用。

您所要做的就是下载[virtualenv.py](https://raw.github.com/pypa/virtualenv/master/virtualenv.py)，然后在远程机器上执行以下操作：

```
$ wget https://raw.github.com/pypa/virtualenv/master/virtualenv.py
$ python virtualenv.py venv
$ cd venv
$ source bin/activate
$ pip install django 
```

这将创建一个 virtualenv，您可以在其中安装任何 Python 包，而无需 root 权限。更多关于 virtualenv[的信息](http://www.virtualenv.org/en/latest/)。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-11-08T15:14:11.830

您可以尝试[DjangoOnAStick](https://code.djangoproject.com/wiki/DjangoOnAStick)或[portablepython](http://www.portablepython.com/)。两者都不需要安装即可工作。您也可以尝试[PyRun](http://www.egenix.com/products/python/PyRun/)，它是一个单一文件 Python 运行时，也不需要安装，您可以观看创建者提供的[有关它的视频](http://pyvideo.org/video/1300/pyrun-the-one-file-python-runtime-environment)。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2015-12-16T11:40:49.547

对于 Windows：

我们可以编写以下 4 个语句来使用 django 并检查它是否已安装。

`import sys sys.path.insert(0,r'C:\Python34\django-master') import django print (django.get_version())`

C:\Python34\django-master 是从[https://github.com/django/django](https://github.com/django/django)下载的 django 设置保存在 Windows 7 机器上的路径。

# android - 如何用印尼语本地化 Android 应用程序

> ID：13291578
> 
> 赞同：41
> 
> 时间：2012-11-08T15:02:38.820
> 
> 标签：android, localization

我需要将我的应用本地化为**印度尼西亚语**。我的应用程序的资源文件夹包含每种语言的“values”子文件夹列表，例如“values-fr”文件夹。

但我阅读了有关[Android 开发人员文档](http://developer.android.com/reference/java/util/Locale.html)的令人困惑的信息。

> 请注意，Java 使用了几个已弃用的两字母代码。希伯来语（“he”）语言代码被改写为“iw”，印尼语（“id”）改写为“in”，意第绪语（“yi”）改写为“ji”。即使您构造自己的 Locale 对象，这种重写也会发生，而不仅仅是各种查找方法返回的实例。

这个怎么理解？基本上，我应该将我的文件夹命名为“values-in”还是“values-id”，以便它在印度尼西亚语言环境的设备上正确显示印度尼西亚文本？

* * *

## 回答 #1

> 赞同：55
> 
> 时间：2013-02-06T14:17:19.443

Android 上印尼语的资源文件夹应命名为：

*   生的
*   价值观

# c++ - Netbeans IDE 7.2.1：如何添加 c++ boost 库

> ID：13291582
> 
> 赞同：6
> 
> 时间：2012-11-08T15:02:44.797
> 
> 标签：c++, boost, netbeans

对于我的下一个任务，我需要 C++ 中的线程，并且已经阅读了用于线程的 boost 库工作得相当好。我从未向 Netbeans 添加自定义库，并希望有人可以为我提供一些可遵循的步骤，以便让我#include 它并在我的课堂上使用它。

到目前为止，我已经下载了以下内容： Boost library from here: [http://sourceforge.net/projects/boost/files/boost/1.52.0/](http://sourceforge.net/projects/boost/files/boost/1.52.0/) （不确定我在哪里提取它是否重要..我是假设我需要将 NetBeans 设置为在我的包属性中的某个位置指向它？）

适用于 Windows 的 NetBeans 7.2.1 C/C++ 安装程序，来自此处：[http ://netbeans.org/downloads/start.html?platform=windows&lang=en&option=cpp](http://netbeans.org/downloads/start.html?platform=windows&lang=en&option=cpp)

编译：MinGW

任何帮助都会很棒。谢谢！

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-11-08T15:38:01.660

链接库：

> 项目 -> 属性 -> 链接器 -> 库 -> 添加选项 -> 其他 -> -l%libname%

图书馆路径：

> 项目 -> 属性 -> 链接器 -> 附加库目录

包括：

> 项目 -> 属性 -> C++ 编译器 -> 包含目录 -> %paths_to_boost%

# objective-c - 从网络服务器读取 json 以获取 quickDialog

> ID：13291587
> 
> 赞同：0
> 
> 时间：2012-11-08T15:03:01.423
> 
> 标签：objective-c, ios, webserver, quickdialog

我正在使用 QuickDialog 库，这太棒了！到目前为止，我设法将一个 json 文件放入我的项目中并显示它。但是知道我想从网络服务中读取它。但是该函数需要一个字符串。您可以在此处查看该功能。

```
- (QRootElement *)initWithJSONFile:(NSString *)jsonPath {
    self = [self initWithJSONFile:jsonPath andData:nil];
    return self;
} 
```

我要做的是以下。

```
[sectionSamples addElement:[[QRootElement alloc] initWithJSONFile:@"loginform"]];
[sectionSamples addElement:[[QRootElement alloc] initWithJSONFile:[NSURL URLWithString:[NSString stringWithFormat:@"%@",@"http://192.168.0.102/testWeb/callback2.json"]]]]; 
```

就像你可以看到我的第一个元素只是加载了一个 json（登录表单），它位于我项目的某个地方。但是当我想要加载第二种形式（callback2.json）时。它说*dataparameter 是 nil*。

当我在浏览器中浏览到 url 时，它会正确显示。

有谁能够帮助我？

亲切的问候。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-08T17:46:38.237

QuickDialog 目前不执行您想要执行的操作。initWithJSONFile 方法接受一个字符串作为本地文件的名称，或者一个带有数据的对象结构（它应该遵循 JSON 格式，就像你自己在代码中读取文件一样。dataParameter 需要在方法中传递，它可以只是一个空字典。

现在，您必须首先自己下载文件，然后解析它并将其传递给该方法，而不仅仅是 NSURL。

我一直在考虑将它直接添加到项目中，但从经验来看，似乎每个应用程序都需要以不同的方式做事（比如，我们是否应该显示加载屏幕，如果有，我们是否应该显示消息错误与否，等等），所以直接在应用程序中使用它不会帮助很多人。

随意跳上 Google 组的 QuickDialog 与其他人讨论这个问题！

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-09T07:59:00.127

好的，所以解决方案是重写函数 initWithJsonFile，它以 NSURL 作为参数。

```
- (QRootElement *)initWithJSONURL:(NSURL *)jsonPath andData:(id)data{

    Class JSONSerialization = [QRootElement JSONParserClass];
    NSAssert(JSONSerialization != NULL, @"No JSON serializer available!");

    NSError *jsonParsingError = nil;
    //NSString *filePath = [[NSBundle mainBundle] pathForResource:jsonPath ofType:@"json"];
    NSDictionary *jsonRoot = [JSONSerialization JSONObjectWithData:[NSData dataWithContentsOfURL:jsonPath] options:0 error:&jsonParsingError];

    self = [self initWithJSON:jsonRoot andData:data];
    return self;
} 
```

# c# - 带有参数列表的 Dapper 查询

> ID：13291589
> 
> 赞同：14
> 
> 时间：2012-11-08T15:03:03.543
> 
> 标签：c#, mysql, database, dapper

我正在尝试使用具有一组已知参数的 Dapper 运行查询，但使用这些参数的值列表。我正在尝试做的一个简单示例是：

```
DateTime endDate = DateTime.Now;
DateTime startDate = endDate.AddHours(-24);

string query = "select COUNT(*) from Test where Status = @Status AND DateCreated <= @Hour;";
var stuff = con.Query(query, (startDate).ByHourTo(endDate).Select(hour => new
{
     Status = 1,
     Hour = hour,
})); 
```

Dapper 抛出异常，“必须定义参数 '@Status'”。我知道 Dapper 在进行批量插入和更新时可以处理参数列表，但它不能对选择执行此操作吗？

* * *

## 回答 #1

> 赞同：24
> 
> 时间：2012-11-08T15:08:05.280

试试这个：

```
List<string> names = new List<string> { "Bob", "Fred", "Jack" };
string query = "select * from people where Name in @names";
var stuff = connection.Query<ExtractionRecord>(query, new {names}); 
```

* * *

## 回答 #2

> 赞同：9
> 
> 时间：2012-11-08T16:46:09.530

啊，我想我明白你的意思了……

是的，我们支持的一种场景`Execute`是 Query 不支持的，特别是：使用一系列不同的参数值顺序运行相同的操作。这对于 是有意义的`Execute`，但对于查询，它可能意味着您应该使用 . 查看不同的查询`in`。或者，只需循环和连接。

相反，它正在查看单个参数对象并寻找公共值 - 可枚举没有任何适合 dapper 的参数值。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2015-12-11T19:16:14.230

我知道我参加这个聚会已经很晚了，但是我想我理解这个请求意味着您只想传递一些属性并根据这些动态属性生成您的查询。

使用下面的代码，我可以使用任何类型，然后只需填充并传入一个设置了一些值的类型的对象（我称之为我的查询对象），然后将生成查询以查找与以下值匹配的对象您在查询对象中设置。

*注意布尔值和具有默认值的东西。

**动态查询示例**

```
 public IEnumerable<T> Query<T>(T templateobject) {
        var sql = "SELECT * From " + typeof(T).Name + " Where ";

        var list = templateobject.GetType().GetProperties()
             .Where(p => p.GetValue(templateobject) != null)
             .ToList();

        int i = 0;

        Dictionary<string, object> dbArgs = new Dictionary<string, object>();

        list.ForEach(x =>
        {
            sql += x.Name + " = @" +  x.Name;

            dbArgs.Add(x.Name, x.GetValue(templateobject));

            if (list.Count > 1 && i < list.Count - 1) {
                sql += " AND ";
                i++;
            }
        });

        Debug.WriteLine(sql);

        return _con.Query<T>(sql, dbArgs).ToList();
    } 
```

**用法**

*repo 是包含上述函数的类

```
var blah = repo.Query<Domain>(new Domain() { Id = 1, IsActive=true }); 
```

**输出**

```
SELECT * From Domain Where Id = @Id AND IsActive = @IsActive 
```

然后它会吐出与上述查询匹配的任何“域”。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2016-08-04T20:59:40.963

```
DECLARE @Now datetime
SET @Now = getdate()

SELECT
    DATEADD( hh, -n, @Now ) AS StartDate,
    DATEADD( hh, -n+1, @Now ) AS EndDate
INTO
    #DateRanges
FROM 
    Numbers
WHERE
    n <= 24

SELECT
    COUNT(*) AS [Count],
    #DateRanges.StartDate
FROM
    Test
        JOIN
    #DateRanges
        ON Test.DateCreated >= #DateRanges.StartDate
        AND Test.DateCreated < #DateRanges.EndDate
GROUP BY
    #DateRanges.StartDate 
```

我就是这样做的，但这假设一件事：您的数据库中有一个名为“Numbers”的表，其中包含任意数量的整数，每行一个，从 1 开始，其中至少有 24 个数字。

也就是说，表格如下所示：

```
n
-----
1
2
3
4
5
... 
```

如果你没有这样的表，那么只为这个命令制作一个非常快速和容易：

```
CREATE TABLE #Numbers
(
    n int
)

SET NOCOUNT ON

INSERT #Numbers values (1);
GO
INSERT #Numbers SELECT n + (SELECT COUNT(*) FROM #Numbers) FROM #Numbers
GO 16 --execute batch 16 times to create 2^16 integers. 
```

存储过程中不能有多个批次，但可以在文本命令中。`GO 16`运行前一批 16 次。如果您在存储过程中需要这个，您可以`INSERT`多次重复第二个命令，而不是使用批处理。2^16 整数对于这个特定的查询来说太过分了，但它是我在需要时复制和粘贴的命令，而且 2^16 通常就足够了，而且速度如此之快，以至于我通常不会费心去改变它。`GO 5`将产生 32 个整数，足以满足 24 个日期范围。

这是一个完整的脚本来说明这个工作：

```
--Create a temp table full of integers. This could also be a static 
--table in your DB. It's very handy.
--The table drops let us run this whole script multiple times in SSMS without issue.
IF OBJECT_ID( 'tempdb..#Numbers' ) IS NOT NULL
    DROP TABLE #Numbers

CREATE TABLE #Numbers
(
    n int
)

SET NOCOUNT ON

INSERT #Numbers values (1);
GO
INSERT #Numbers SELECT n + (SELECT COUNT(*) FROM #Numbers) FROM #Numbers
GO 16 --execute batch 16 times to create 2^16 integers.

--Create our Test table. This would be the real table in your DB, 
-- so this would not go into your SQL command.
IF OBJECT_ID( 'tempdb..#Test' ) IS NOT NULL
    DROP TABLE #Test

CREATE TABLE #Test
(
    [Status] int,
    DateCreated datetime
)

INSERT INTO 
    #Test 
SELECT 
    1, 
    DATEADD( hh, -n, getdate() )
FROM 
    #Numbers
WHERE
    n <= 48

--#Test now has 48 records in it with one record per hour for 
--the last 48 hours.

--This drop would not be needed in your actual command, but I 
--add it here to make testing this script easier in SSMS.
IF OBJECT_ID( 'tempdb..#DateRanges' ) IS NOT NULL
    DROP TABLE #DateRanges

--Everything that follows is what would be in your SQL you send through Dapper 
--if you used a static Numbers table, or you might also want to include
--the creation of the #Numbers temp table.
DECLARE @Now datetime
SET @Now = getdate()

SELECT
    DATEADD( hh, -n, @Now ) AS StartDate,
    DATEADD( hh, -n+1, @Now ) AS EndDate
INTO
    #DateRanges
FROM 
    #Numbers
WHERE
    n <= 24

/* #DateRanges now contains 24 rows that look like this:

StartDate               EndDate
2016-08-04 15:22:26.223 2016-08-04 16:22:26.223
2016-08-04 14:22:26.223 2016-08-04 15:22:26.223
2016-08-04 13:22:26.223 2016-08-04 14:22:26.223
2016-08-04 12:22:26.223 2016-08-04 13:22:26.223
...

Script was run at 2016-08-04 16:22:26.223\. The first row's end date is that time. 
This table expresses 24 one-hour datetime ranges ending at the current time. 
It's also  easy to make 24 one-hour ranges for one calendar day, or anything
similar.
*/

--Now we just join that table to our #Test table to group the rows those date ranges.

SELECT
    COUNT(*) AS [Count],
    #DateRanges.StartDate
FROM
    #Test
        JOIN
    #DateRanges
        ON #Test.DateCreated >= #DateRanges.StartDate
        AND #Test.DateCreated < #DateRanges.EndDate
GROUP BY
    #DateRanges.StartDate

/*
Since we used two different getdate() calls to populate our two tables, the last record of 
our #Test table is outside of the range of our #DateRange's last row by a few milliseconds,
so we only get 23 results from this query. This script is just an illustration.
*/ 
```

# ios - Facebook sdk - 错误：http 状态码 400

> ID：13291591
> 
> 赞同：4
> 
> 时间：2012-11-08T15:03:08.753
> 
> 标签：ios, facebook

所以我试图让 facebook 与我的新应用程序一起工作，但我无法弄清楚这一点。我完成了所有事情，就像他们网站上的教程文档一样。当我启动应用程序时，我得到一个“错误：HTTP 状态代码 400”；仅此而已。我到处读到这是 facebook 上的服务器端错误，但认真的吗？有些人有这个工作？

无论如何，这是我的代码：

```
FBSession* pFacebookSession = [[FBSession alloc] init];
[FBSession setActiveSession: pFacebookSession];
if (FBSession.activeSession.state == FBSessionStateCreatedTokenLoaded)
{        
     NSLog(@"openWithCompletionHandler start.");
     [FBSession.activeSession openWithCompletionHandler:^(FBSession *session,
                                                                FBSessionState status,
                                                                NSError *error)
                 {

                     NSLog(@"openWithCompletionHandler FINISHED!");
                 }];    

   } 
```

不确定这是否就是它的样子。

# linux - 用于确定文件中出现哪些字符的命令

> ID：13291599
> 
> 赞同：0
> 
> 时间：2012-11-08T15:03:34.090
> 
> 标签：linux, file, character

我正在寻找一个 Linux/UNIX 命令来确定文件中的不同字符。字符数会很好，但不是必需的。例如，如果我对包含此数据的文件运行命令...

```
This is
my data
file. 
```

...它会给我这个作为输出...

```
T h i s m y d a t f l e . 
```

...甚至更好，这个。

```
T:1 h:1 i:3 s:2 m:1 y:1 d:1 a:2 t:1 f:1 l:1 e:1 .:1 
```

在输出中，字符的顺序无关紧要，它们是否用空格、制表符、行等分隔也无关紧要。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-08T15:14:11.627

要打印唯一字符：

```
$ grep -o . file | sort -u | tr -d '\n'
 .Tadefhilmsty 
```

要计算每个字符的出现次数：

```
$ grep -o . file | sort | uniq -c
      2
      1 .
      1 T
      2 a
      1 d
      1 e
      1 f
      1 h
      3 i
      1 l
      1 m
      2 s
      1 t
      1 y 
```

我会把格式留给你。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-08T15:12:00.477

我不知道有任何 unix 命令可以做到这一点，但是可以使用一个小的 python 脚本来获得你想要的东西

```
#!/usr/bin/env python

import collections, sys
d = collections.defaultdict(int)
for line in sys.stdin:
    for c in line:
        d[c] += 1
print dict(d) 
```

会给出结果

```
{'a': 2, ' ': 2, 'e': 1, 'd': 1, 'f': 1, 'i': 3, 'h': 1, '\n': 2, 'm': 1, 'l': 1, '.': 1, 's': 2, 'T': 1, 'y': 1, 't': 1} 
```

# mysql - SQL。根据一个字段从结果中删除一些行

> ID：13291601
> 
> 赞同：1
> 
> 时间：2012-11-08T15:03:40.500
> 
> 标签：mysql, database

发出此 sql 请求后：

```
SELECT user.id, campaign_id, user_id
FROM `user`
LEFT OUTER JOIN `email_solus`
ON email_solus.user_id=user.id 
```

我有这张桌子。

```
id campaign_id user_id
------ ----------- ---------
 1   3         1
 1   5         1
 1   6         1
 2 (NULL) (NULL)
 3 (NULL) (NULL)
 4 (NULL) (NULL)
 5 (NULL) (NULL)
 7 (NULL) (NULL)
 8 (NULL) (NULL)
 9 (NULL) (NULL)
10 (NULL) (NULL)
12 (NULL) (NULL)
13 (NULL) (NULL)
14 (NULL) (NULL)
15 (NULL) (NULL)
16 (NULL) (NULL)
17 (NULL) (NULL) 
```

我想做的是取消选择所有带有campaign_id = 3的元素，以及所有常见的ID。在这种情况下，我需要删除所有 id=1 的元素，有一个像这样的表：

```
id campaign_id user_id
------ ----------- ---------
 2 (NULL) (NULL)
 3 (NULL) (NULL)
 4 (NULL) (NULL)
 5 (NULL) (NULL)
 7 (NULL) (NULL)
 8 (NULL) (NULL)
 9 (NULL) (NULL)
10 (NULL) (NULL)
12 (NULL) (NULL)
13 (NULL) (NULL)
14 (NULL) (NULL)
15 (NULL) (NULL)
16 (NULL) (NULL)
17 (NULL) (NULL) 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-08T15:06:01.400

```
SELECT user.id, campaign_id, user_id
FROM user
LEFT JOIN email_solus
ON email_solus.user_id=user.id
WHERE user.id NOT IN
(
    SELECT user_id
    FROM email_solus
    WHERE campaign_id = 3
) 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-08T15:07:26.437

您可以使用`NOT EXISTS`进行过滤，如下所示：

```
SELECT user.id, campaign_id, user_id
FROM `user`
LEFT OUTER JOIN `email_solus` ON email_solus.user_id=user.id
WHERE NOT EXISTS (
    SELECT * FROM `email_solus` es WHERE es.user_id=user_id AND es.campaign_id=3
) 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-08T15:07:07.423

```
SELECT user.id, campaign_id, user_id
FROM `user`
LEFT OUTER JOIN `email_solus`
ON email_solus.user_id=user.id
where user.id not in
  (select user.id from 'user'
  where campaign_id = 3) 
```

应该可以工作，尽管如果你有一个大型数据集，“不在”可能效率低下

# ios - 无法识别的选择器发送到实例 UIBarButtonItem

> ID：13291602
> 
> 赞同：1
> 
> 时间：2012-11-08T15:03:42.100
> 
> 标签：ios, uibarbuttonitem, unrecognized-selector, uibarbuttonitemstyle

我正在尝试自定义导航栏及其 AppDelegate 文件中的按钮：

```
// first I am customizing the done button

    [[UIBarButtonItem appearance] setBackgroundImage:buttonDone forState:UIControlStateNormal style:UIBarButtonItemStyleDone barMetrics:UIBarMetricsDefault];
    [[UIBarButtonItem appearance] setBackgroundImage:buttonDonePressed forState:UIControlStateHighlighted style:UIBarButtonItemStyleDone barMetrics:UIBarMetricsDefault];

//and then I am customizing the back button

    [[UIBarButtonItem appearance] setBackButtonBackgroundImage:buttonBack forState:UIControlStateNormal barMetrics:UIBarMetricsDefault];
    [[UIBarButtonItem appearance] setBackButtonBackgroundImage:buttonBackPressed forState:UIControlStateHighlighted barMetrics:UIBarMetricsDefault]; 
```

我正在`[_UIBarItemAppearance setBackgroundImage:]: unrecognized selector sent to instance`等待完成按钮。奇怪的是，后退按钮的自定义有效，而完成按钮的自定义使应用程序崩溃。任何想法为什么？

* **PS** *buttonDone、buttonDonePressed、buttonBack 和 buttonBackPressed 是我创建的四个 UIImage-s* *

**更新：在 iOS 5.0 模拟器上，应用程序崩溃，但在 6.0 上它可以工作。关于我可以做些什么来避免 5.0 崩溃的任何建议？**

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-08T15:17:56.470

从文档中，此签名仅适用于 iOS 6.0+

您可以通过以下方式测试对象方法的可用性：

```
[obj respondsToSelector:@selector(<methodName>)] 
```

所以尝试：

```
id item = [UIBarButtonItem appearance];
if ([item respondsToSelector:@selector(setBackgroundImage:forState:style:barMetrics:)]) {
   // Use new signature
 } else {
   // Use old signature
 } 
```

# database - 如何在数据库 ER 建模中添加关系关联

> ID：13291607
> 
> 赞同：0
> 
> 时间：2012-11-08T15:04:13.400
> 
> 标签：database, database-design, entity-relationship

我有一个在 StarUML 中创建的 ER 模型。

我已经研究出如何在两个类之间设置我的多重性值。我想知道如何陈述每个实体之间的关系。

例如，如果您查看下图： ![在此处输入图像描述](../Images/a68fc486f9b39efaf8d53ad5da33db3e.png)

在这里我想说的是，学生“*有*”住宿，而住宿“容纳*”*了学生。我该怎么做呢？

谢谢彼得

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-08T22:14:45.960

您可以在连接学生和住宿的线上放置一颗钻石。钻石图关系。在钻石内，您可以放置​​“拥有/容纳”。

还有其他方法可以绘制关系图。当关系是二元的（仅涉及两个实体）时，许多 ER 建模者不会使用菱形。如果关系是三元、四元等，菱形对于防止图表变成意大利面条变得至关重要。

# php - 需要正确的 SQL 查询

> ID：13291609
> 
> 赞同：0
> 
> 时间：2012-11-08T15:04:17.247
> 
> 标签：php, mysql, sql

桌子：

```
+----+----------+-----------+---------+
| id | topic_id | from_user | to_user |
+----+----------+-----------+---------+
|  6 |        5 | 4         | 5       |
|  2 |        6 | 5         | 2       |
|  3 |        5 | 2         | 5       |
|  4 |        4 | 5         | 4       |
|  5 |        4 | 5         | 4       |
|  7 |        6 | 5         | 2       |
|  8 |        5 | 2         | 5       |
|  9 |        5 | 4         | 5       |
| 10 |        0 | 2         | 5       |
| 11 |        6 | 5         | 2       |
| 12 |        3 | 5         | 2       |
| 13 |        0 | 5         | 2       |
+----+----------+-----------+---------+ 
```

这是消息表（类似于私人消息），from_user 和 to_user 是自我描述的，topic_id 对此并不重要

现在，我需要选择将在当前登录用户的收件箱中显示的消息列表。我将使用会话变量引用此用户`$this_user = $_SESSION['id']`

我有这个查询：

```
SELECT * 
FROM messages 
WHERE from_user = '$this_user' OR 
      to_user = '$this_user' 
```

但这将需要重复消息，例如 4 - 5、5 - 4、5 - 4、

我尝试使用 DISTINCT 但也不起作用

任何帮助

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-08T15:06:52.260

不确定您如何使用 DISTINCT（显示查询），但或者这也应该有效：

```
SELECT * FROM messages 
   WHERE from_user = '$this_user' OR to_user = '$this_user'
   GROUP BY `id` 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-08T15:07:16.800

采用`UNION ALL`

```
SELECT 'From You' type, * FROM messages m WHERE from_user = '$this_user'
UNION ALL
SELECT 'To You', * FROM messages m WHERE to_user = '$this_user' 
```

## [SQL 小提琴演示](http://www.sqlfiddle.com/#!2/815eb/8)

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-11-08T15:09:33.580

试试这个，

```
select least(from_user, to_user) as x, greatest(from_user, to_user) as y
from   tableName
WHERE  from_user = '$this_user' OR to_user = '$this_user'
group by x, y 
```

*   [**SQLFiddle 演示**](http://sqlfiddle.com/#!2/6b0d7/3)

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-11-08T15:23:41.443

您肯定需要在`topic_id`列上使用分组吗？使用这样的查询：

```
SELECT * FROM messages
WHERE from_user = '$this_user' OR to_user = '$this_user'
GROUP BY `topic_id` 
```

给我我相信你正在寻找的结果。有关示例，请参阅此[SQLFiddle](http://sqlfiddle.com/#!2/6b0d7/7)。

# javascript - 没有固定宽度的省略号

> ID：13291620
> 
> 赞同：0
> 
> 时间：2012-11-08T15:04:44.550
> 
> 标签：javascript, html, css, ellipsis

我正在尝试做这样的事情：

![图像](../Images/d62157593a986847762f54c395dbc1e0.png)

我有三个没有固定宽度的 div。左侧（红色）和右侧（蓝色）区域的宽度应与其内容（图像）完全相同。左右区域可以有不同的宽度。

中心 div 将有一些文本，这些文本可能比 div 大，并且应该有一个省略号。

困难在于我不知道任何宽度，我想避免使用 javascript。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-08T15:48:30.290

**HTML：**

```
<div style="width:600px;"> <!-- 600px or the total desired width of the table -->
    <div class="column" style="border-color:red;">
        <img src="http://i.imgur.com/w57Lk.png" />
    </div>
    <div class="column" style="width:100px;">
        lorem ipsum dolor sit amet, lorem ipsum dolor sit amet, 
        lorem ipsum dolor sit amet, lorem ipsum dolor sit amet
    </div>
    <div class="column" style="border-color:blue;">
        <img src="http://i.imgur.com/aPlq6.png" />
    </div>
</div> 
```

​CSS **：**

```
​.column {
    text-overflow: ellipsis;
    height:400px; /* or whatever */
    float:left;
    border:1px solid black;
    overflow:hidden;
    white-space: nowrap; 
}​ 
```

这使用 CSS3，因此它可能具有有限的浏览器支持。

* * *

# 编辑：

如果您不知道中间列的所需宽度，我不知道没有至少一些 JavaScript 的任何方法。幸运的是，JS 应该很简单。使用 jQuery，并且没有`style="width:100px;"`上面 HTML 中的部分：

```
(function($) {
    var containerWidth = $('.column').parent().width()                         
        - $('.column:first').width() 
        - $('.column:last').width()
        - 6; //6 because the borders add 1px per side, per column
    $('.column:nth-child(2)').width(containerWidth);
})(jQuery);​ 
```

**jsFiddle 上的工作演示：http:** [//jsfiddle.net/qPbfw/](http://jsfiddle.net/qPbfw/)

# jquery - 从 ScriptSharp 读取 XML 字符串

> ID：13291622
> 
> 赞同：2
> 
> 时间：2012-11-08T15:04:49.823
> 
> 标签：jquery, xml, script#, parsexml

我正在尝试将 XML 字符串转换为 XML 对象以遍历其属性和子节点。

* * *

常规 C# 中的类似内容：http: [//msdn.microsoft.com/en-us/library/system.xml.xmldocument.loadxml.aspx](http://msdn.microsoft.com/en-us/library/system.xml.xmldocument.loadxml.aspx)

但是，Script# 的 System.Xml 库与 .Net 的库不同，我无法实例化新的 XmlDocument（没有公共构造函数）。

* * *

或者像这样使用 jQuery： [如何使用 jQuery 解析 XML？](https://stackoverflow.com/questions/7228141/how-to-parse-xml-using-jquery)

但是我不知道如何在 ScriptSharp 的 jQuery 中调用非静态 ParseXml(string) 函数。

**编辑：**

使用 ParseXml 函数：

```
XmlDocument doc = jQuery.Instance.ParseXml(objDictionaryItem.Body); 
```

但我在 WebKit 中得到错误：

> $p1: "对象函数 (a,b){return new c.fn.init(a,b)} 没有方法 'parseXml'"

* * *

有什么想法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-04T15:01:29.793

很简单：

```
XmlDocument xmlDoc = XmlDocumentParser.Parse(@"<note>
                                                <to>Tove</to>
                                                <from>Jani</from>
                                                <heading>Reminder</heading>
                                                <body>Don't forget me this weekend!</body>
                                               </note>"); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-08T17:12:11.567

让它以最简单的方式工作:)

根据这篇文章：[https](https://stackoverflow.com/a/649655/1809564) : //stackoverflow.com/a/649655/1809564 我可以将简单的 jQueryObject (var) 视为 XML 文件，只要它格式正确。

因此，如果我的 objDictionaryItem.Body 变量是格式良好的 XML 字符串，如下所示：

```
<ItemBody>
    <Key>132515840</Key>
    <Revision>1</Revision>
    <Name>Line</Name>
    <TestParameters>
        <TestParameterKey Key="132646912" DisplayString="Success">Success</TestParameterKey>
        <TestParameterKey Key="132646913" DisplayString="Downstrea">Downstream</TestParameterKey>
        <TestParameterKey Key="132646914" DisplayString="Upstream">Upstream</TestParameterKey>
        <TestParameterKey Key="132646915" DisplayString="Attenuation">Attenuation</TestParameterKey>
    </TestParameters>
</ItemBody> 
```

我可以简单地使用它来解析它：

```
jQueryObject xmlDoc = jQuery.FromObject(objDictionaryItem.Body);
Script.Alert(xmlDoc.Find("Revision").GetText()); 
```

并使用此处描述的相同 jQuery 方法：[http ://www.switchonthecode.com/tutorials/xml-parsing-with-jquery](http://www.switchonthecode.com/tutorials/xml-parsing-with-jquery)

# javascript - EmberJS：设置仅绑定到 IE 中的视图的集合属性时出错

> ID：13291623
> 
> 赞同：1
> 
> 时间：2012-11-08T15:04:50.577
> 
> 标签：javascript, ember.js

我有一个带有绑定到模板的集合属性的 ember 对象。当我尝试像这样设置此属性时：

```
processingJob.set("logMessages", updatedProcessingJob.logMessages) 
```

我只在 IE 中得到这个异常，所有其他浏览器都可以正常工作：

> SCRIPT5022：断言失败：Ember.CollectionView 的内容必须实现 Ember.Array。你通过了 [object Object],[object Object],[object Object]

它像这样绑定到模板：

```
{{#each content.logMessages}}
    {{#isWorkflowError}}
        <li class="error"><i class="icon-thumbs-down"></i> {{message}}</li>
    {{else}}
        <li><i class="icon-thumbs-up"></i> {{message}}</li>
    {{/isWorkflowError}}
{{/each}} 
```

当我删除模板时，我没有收到错误。我应该使用 Ember.CollectionView 还是什么？或者这是一个 IE 错误？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-10T13:51:18.410

I found a resolution to this problem and posted it here: [https://github.com/emberjs/ember.js/issues/1525](https://github.com/emberjs/ember.js/issues/1525)

I'm using SignalR to push updates to my ember app, my code to do this looks like:

```
App.ProcessingJobArray = Ember.ArrayProxy.extend
    init: ->
        @set("content", Ember.A())
        if $.connection
            @client = $.connection.processingJobHub
            @client.processingJobUpdated = (updatedProcessingJob) =>                
                processingJob = @get("content").find((item) ->
                    item.get("id") == updatedProcessingJob.id
                )
                if not processingJob
                    processingJob = App.ProcessingJob.create()
                    @get("content").pushObject(processingJob)
                processingJob.setProperties(updatedProcessingJob)
            $.connection.hub.start() 
```

The updatedProcessingJob JSON object contains an array logMessages and in IE I was getting an error because there's no meta hash for this array. To fix the issue I did a deep copy of updatedProcessingJob:

```
updatedProcessingJob = $.extend(true, {}, updatedProcessingJob) 
```

# java - 如何使用 java 解析 pdf，其中使用 Latex 生成（以获得章节或部分的结构）

> ID：13291624
> 
> 赞同：4
> 
> 时间：2012-11-08T15:04:50.747
> 
> 标签：java, parsing, pdf, latex, structure

我有个问题。我正在尝试从 pdf 文档中提取结构化文本。由于 pdf 通常没有结构，我想我可以开始解析用乳胶生成的 pdf，它应该有一些结构。

您知道我可以使用 Latex 生成的 pdf 文件中的任何模式来解析 pdf 吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-08T15:11:41.613

查看[PDF Box](http://pdfbox.apache.org/index.html)，用于从 PDF 文档中解析文本。或者您可以使用[Apache Tika](http://tika.apache.org/)，它提供对多种文档类型的解析，具有标准接口（可能有点矫枉过正）。我不建议尝试手动执行此操作。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-07-07T13:55:37.067

**商业解决方案 Infty 阅读器**

[http://www.sciaccess.net/en/InftyReader/index.html](http://www.sciaccess.net/en/InftyReader/index.html)

在试用模式下，每次识别限制为一页，每天识别五页。

**与终端**

*   快速而肮脏的解决方案，这可能需要大量的尝试和错误。

    1.  你的 pdf 必须是可解析的

        *   `pdftotext 'your-file.pdf' your-file.txt`
    2.  你需要在你的 pdf 中有一个模式（就像每张幻灯片上的版权一样）

        *   `sed -n '/<PATTERN>/{n;n;n;p}' your-file.txt | awk '!x[$0]++' > your-file-structure.txt`
        *   更改`{n;n;n;p}`，因为它当前正在您的模式之后打印`p`下一个下一行`n;n;n`
        *   `awk '!x[$0]++'`删除重复项

# android - 无法在android中使用videoview播放rtsp

> ID：13291632
> 
> 赞同：3
> 
> 时间：2012-11-08T15:05:22.463
> 
> 标签：android, rtsp

我已经使用 VLC 设置了一个 RTSP 服务器。然后我写了一个应用程序，这是我的代码：

```
package com.ashley.work;

import android.os.Bundle;
import android.app.Activity;
import android.view.Menu;
import android.view.MenuItem;
import android.support.v4.app.NavUtils;
import android.app.Activity;  
import android.net.Uri;  
import android.os.Bundle;  
import android.view.View;  
import android.widget.Button;  
import android.widget.EditText;  
import android.widget.VideoView;  

public class TestPlayRTSP extends Activity {

Button playButton ;  
VideoView videoView ;  

@Override
public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.activity_test_play_rtsp);

    videoView = (VideoView)this.findViewById(R.id.myvideoview);  

    playButton = (Button)this.findViewById(R.id.button1);  
    playButton.setOnClickListener(new Button.OnClickListener(){  
    public void onClick(View v) {  
    PlayRtspStream("rtsp://140.xxx.xxx.xxx:8554/");  
    }  
    });  

}

private void PlayRtspStream(String rtspUrl){  
    videoView.setVideoURI(Uri.parse(rtspUrl));  
    videoView.requestFocus();  
    videoView.start();  
}  

@Override
public boolean onCreateOptionsMenu(Menu menu) {
    getMenuInflater().inflate(R.menu.activity_test_play_rtsp, menu);
    return true;
} 
```

}

我已经设置了权限。但是这个还是不能玩。单击按钮后没有任何反应。但是，如果我将 rtsp 替换为其他这两个：

1.  rtsp://218.204.223.237:554/live/1/66251FC11353191F/e7ooqwcfbqjoo80j.sdp

2.  rtsp://v5.cache1.c.youtube.com/CjYLENy73wIaLQnhycnrJQ8qmRMYESARFEIJbXYtZ29vZ2xlSARSBXdhdGNoYPj_hYjnq6uUTQw=/0/0/0/video.3gp

该应用程序将正常播放。谁能告诉我为什么？有没有办法播放 VLC 流？？？

谢谢你

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-08T15:19:38.850

Android 仅支持正确设置 MOOV atom 的 mpeg 4 编码基线配置文件。较新的设备支持其他方法（HLS 和更高配置的 mpeg4 类型），但并非所有设备都能以这种方式工作。您的 rtsp 流必须使用基线配置文件进行编码。

如果您在[VLC](http://www.videolan.org)中打开您的 RTSP 流并打开您的网络流，然后打开媒体信息，您可以看到您的流用于音频和视频的编解码器

以下是有关 android 和支持的媒体的更明确信息：http: [//developer.android.com/guide/appendix/media-formats.html#recommendations](http://developer.android.com/guide/appendix/media-formats.html#recommendations)

# java - 不使用循环搜索字符串数组

> ID：13291635
> 
> 赞同：3
> 
> 时间：2012-11-08T15:05:26.940
> 
> 标签：java, arrays, string, search

我有以下数组

```
String[] arrKey  = new String[] {"A","B","C","D","E",......"Y","Z"}; 
```

我想搜索数组并给我字母所在位置的索引。比如说我想搜索字母“E”，当我搜索数组时，它应该给我“E”的位置，所以我应该得到索引位置 4。我不想在循环中这样做。可能吗？我一直在四处寻找，找不到答案。

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2012-11-08T15:07:38.983

> 我不想循环执行此操作。

*某处*必须有一个循环- 在您的代码或库代码中。

所以是的，你可以使用

```
int index = Arrays.asList(arrKey).indexOf("E"); 
```

...但这会在幕后循环。

如果您知道您的数组已排序开始，您可以使用：

```
int index = Arrays.binarySearch(arrKey, "E"); 
```

这将更有效率 - 但它仍然是一个循环......

当然，如果您知道您的数组*始终*是AZ，那么您*可以*在没有循环的情况下执行此操作 - 但我假设您的实际情况更笼统......

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-08T15:09:58.020

如果您必须处理`char`s 而不是字符串，请查看[getNumericValue](http://docs.oracle.com/javase/1.4.2/docs/api/java/lang/Character.html#getNumericValue%28char%29)方法。

如果您想要更通用的解决方案，您应该考虑使用 a`Map<String,Integer>`而不是数组。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2016-12-13T17:28:24.727

这基本上是一个面试问题，以测试你的递归技巧，这就是你的做法。

```
private static <T> int findIndex(T[] items, T item, int index) {
    if (items.length == index) {
        return -1;
    }
    if (items[index].equals(item)) {
        return index;
    }
    return findIndex(items, item, index+1);
} 
```

这是运行它的方法

```
int val = findIndex(new String[]{"A","B","C"}, "C", 0); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-11-09T08:54:57.383

这是我正在处理的代码。这就是我目前所拥有的。这对我来说只是练习 JAVA 和理解 Ceaser Cipher 的练习轮。

```
public class CeaserCipher
{
public static void main (String [] args) {
    Scanner keyboard = new Scanner(System.in);
    System.out.println("Enter test letters for Caesar cipher in capitals");
    String input = keyboard.nextLine();
    char[] strArray = input.toCharArray();

    System.out.print("What is the key: "); 
    int key = keyboard.nextInt();
    //String[] arrKey  = new String[] {"A","B","C","D","E","F","G","H","I","J","K","L","M","N","O","P","Q","R","S","T","U","V","W","X","Y","Z"};
    String c  = "ABCDEFGHIJKLMNOPQRSTUVWXYZ";
    char[] arrKey = c.toCharArray();

    for (int i = 0; i < strArray.length ; i++){

        char cipherValue = strArray[i];
        int index = Arrays.binarySearch(arrKey, cipherValue);
        int j = (key + index)%26;
        System.out.print(arrKey[j]);

    }
}
} 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-11-08T15:14:22.047

使用 indexOf

```
 return arrKey.get(arrKey.indexOf("E")); 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-11-08T15:16:08.067

仅当您假设您拥有此数组（或类似数组）时才有可能，因为您可以计算索引。

```
String s = "E";
int index = s.charAt(0) - 'E'; // == 4 
```

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2012-11-08T15:08:38.023

使用[indexOf](http://docs.oracle.com/javase/6/docs/api/java/util/List.html#indexOf%28java.lang.Object%29)

[Java - 获取数组中的元素位置](https://stackoverflow.com/questions/7581363/java-get-element-position-in-array)

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2021-02-03T19:56:20.393

您可以在这种情况下使用递归：

```
let arr = ["A","B","C","D","E","Y","Z"];
let index = 0;

function find(str){
  if(str[0] === "E")
  { 
    return str[0];
  }
  else {
    str.shift(); 
```

> //从str数组中删除第一个元素并再次调用该函数

```
 index++;
        return find(str);
      }
    }

    console.log("Found",find(arr));
    console.log("at Index:",index);
    console.log("Peace Out! XD"); 
```

# sql - TSQL 简单正则表达式匹配

> ID：13291639
> 
> 赞同：0
> 
> 时间：2012-11-08T15:05:37.797
> 
> 标签：sql, sql-server, regex, tsql

我需要检查变量是否为 10.00 到 10.09 之间的值。我怎样才能通过正则表达式做到这一点？

```
IF SomeRegExFunction(@var, '10.0*')
    print 'It worked' 
```

有没有办法做到这一点？

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-08T15:19:44.983

您可以使用以下内容：

```
declare @var as varchar(10)
set @var = '11.07'

if @var like '10.0[0-9]'
    print 'It worked'
else
    print 'not a match' 
```

请参阅[带有演示的 SQL Fiddle](http://sqlfiddle.com/#!3/d41d8/5956)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-08T15:18:50.607

SQL Server 的`like`简单表达式语法：

```
if @var like '10.0[0-9]' or @var = '10.0'
    print 'Hello World!' 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-08T15:12:40.537

[PATINDEX](http://msdn.microsoft.com/en-us/library/ms188395.aspx)怎么样。我认为你正在寻找这样的东西。

# android - Webview shouldOverrideUrlLoading 在之前的 android 版本中工作，除了 4.1.x jellybean

> ID：13291648
> 
> 赞同：8
> 
> 时间：2012-11-08T15:06:01.450
> 
> 标签：android, webview, android-4.2-jelly-bean

以下代码在所有运行 android 2.x 的设备中都可以正常工作，但在 Nexus 7 平板电脑中却没有 4.1.2

问题是 shouldOverrideUrlLoading 永远不会运行。onPageFinished 运行正常

我将不胜感激任何可用的帮助。

```
wv = (WebView) root_view.findViewById(R.id.wv);
wv.setBackgroundColor(res.getColor(R.color.def_bgr_color));
wv.setScrollBarStyle(View.SCROLLBARS_OUTSIDE_OVERLAY);
wv.setWebViewClient(new MyWebViewClient() );

WebSettings web_settings = wv.getSettings();
web_settings.setJavaScriptEnabled(true);
web_settings.setLoadWithOverviewMode(true);
web_settings.setUseWideViewPort(false);
web_settings.setPluginsEnabled(true);
web_settings.setSupportZoom(true);
web_settings.setLayoutAlgorithm(LayoutAlgorithm.SINGLE_COLUMN);

public class MyWebViewClient extends WebViewClient {
    public MyWebViewClient() {
    }

    @Override
    public boolean shouldOverrideUrlLoading(WebView view, String url) {
        Log.i(TAG, "RUN shouldOverrideUrlLoading" );
        return true;

    }

    @Override
    public void onPageFinished(WebView view, String url) {
        super.onPageFinished(view, url);
        Log.i(TAG, "RUN onPageFinished" );
    }
}

String html_str = ... something html ...

wv.loadDataWithBaseURL("file:///android_asset/", html_str, "text/html", "utf-8", null); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-24T06:26:49.577

您是否尝试在普通桌面 chrome 浏览器上将 html_str 加载为 html 文件？如果不尝试，它可能会带你到某个地方。

在早期版本的 android 跨域脚本是允许的，但在最新版本的 android 中出于安全原因，基于 webkit 的 webview 会阻止跨域脚本。这可能会阻止您的页面加载 [在此处进行疯狂猜测！]。

# c# - 这是以编程方式在两个数据库之间同步数据的唯一且好方法吗

> ID：13291654
> 
> 赞同：1
> 
> 时间：2012-11-08T15:06:25.177
> 
> 标签：c#, asp.net, mysql, windows-services, sync

我有 2 个相同的数据库。一个在生产中，另一个在本地。我正在尝试编写 c# windows 服务以不时将数据从生产数据库同步到本地数据库。这是我的数据同步服务的代码片段

```
 private static bool StartDataSync(string tableName, string connectionStringLive, string connectionStringLocal,string databaseName)
    {
        bool status = false;

        DataSet dsResult = new DataSet();

        Int64 maxId = 0;
        MySqlConnection conLocal = new MySqlConnection(connectionStringLocal);
        MySqlCommand cmdLocal = new MySqlCommand("pr_GetMaxIdFromTable", conLocal);
        cmdLocal.CommandType = CommandType.StoredProcedure;
        MySqlParameter[] parameters = new MySqlParameter[4];
        parameters[0] = new MySqlParameter("vTableName", tableName);
        parameters[0].Direction = ParameterDirection.Input;
        parameters[1] = new MySqlParameter("vMaxId", MySqlType.BigInt);
        parameters[1].Direction = ParameterDirection.Output;
        parameters[2] = new MySqlParameter("vExist", "0");
        parameters[2].Direction = ParameterDirection.InputOutput;
        parameters[3] = new MySqlParameter("vDatabaseName", databaseName);
        parameters[3].Direction = ParameterDirection.Input;

        foreach (MySqlParameter param in parameters)
        {
            cmdLocal.Parameters.Add(param);
        }

        conLocal.Open();
        cmdLocal.ExecuteNonQuery();
        int ifExist = 0;
        ifExist = Convert.ToInt32(parameters[2].Value);
        if (ifExist == 1)
        {

            maxId = Convert.ToInt64(parameters[1].Value);

            MySqlConnection conLive = new MySqlConnection(connectionStringLive);
            MySqlCommand cmdLive = new MySqlCommand("Select * from " + tableName + " where Id>" + maxId, conLive);

            MySqlDataAdapter adp = new MySqlDataAdapter(cmdLive);
            adp.Fill(dsResult);

            MySqlCommand cmdLocalInsert = null;
            string insertValues = string.Empty;
            foreach (DataRow dr in dsResult.Tables[0].Rows)
            {
                insertValues = string.Empty;
                foreach (DataColumn dc in dsResult.Tables[0].Columns)
                {
                    insertValues = insertValues + Convert.ToString(dr[dc]) + ",";
                }
                insertValues = insertValues.Substring(0, insertValues.Length - 1);
                cmdLocalInsert = new MySqlCommand("Insert into " + tableName + " Values(" + insertValues + ")", conLocal);
                if (conLocal.State != ConnectionState.Open)
                {
                    conLocal.Open();
                }
                cmdLocalInsert.ExecuteNonQuery();
            }
        }

        return status;
    } 
```

我不知道这是否是这样做的唯一方法，或者这是否会在将来导致任何其他问题。如果有人可以建议任何其他方法，将不胜感激。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-08T15:18:41.527

我建议你们两个使用**Microsoft Sync Framework**。令人惊奇的是，它允许您以一种方式或两种方式同步两个数据库。

我们在工作中使用它，因为一旦您配置了表，它就会像魅力一样发挥作用。快速有效

你可以在这里查看更多信息：

[Microsoft Sync Framework 数据库同步](http://msdn.microsoft.com/en-us/sync/bb887608)

[微软同步框架开发者中心](http://msdn.microsoft.com/en-us/sync/bb736753.aspx)

# c# - 命名空间“Google.Apis.Samples”中不存在类型或命名空间名称“Helper”

> ID：13291657
> 
> 赞同：0
> 
> 时间：2012-11-08T15:06:35.803
> 
> 标签：c#

我已经添加了命名空间`using Google.Apis.Samples.Helper;`，但是在运行代码之后我遇到了错误，我必须添加哪个 dll？

> > 命名空间“Google.Apis.Samples”中不存在类型或命名空间名称“Helper”

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-08T15:20:43.403

不是谷歌开发人员，但您的程序集似乎可以[在谷歌下载](http://code.google.com/p/google-api-dotnet-client/source/browse/Tools/Lib/Google.Apis.Samples.Helper.dll?r=ba22a0c3def9e76c5b2d727abad351bbed7f3002)

# javascript - 如何简化这个 jQuery JavaScript 代码？

> ID：13291659
> 
> 赞同：1
> 
> 时间：2012-11-08T15:06:35.803
> 
> 标签：javascript, jquery

我对使用 jQuery / JavaScript 编码有点陌生。我已经设法编写了下面的代码，但我认为有一种更简单的方法可以将其写下来。有人可以告诉我怎么做吗？

```
$(document).ready(function(){
$(".btn_home").click(function(){
$("#article1").fadeIn();
$("#article2").fadeOut();
$("#article3").fadeOut();
$("#article4").fadeOut();

$("#blended").fadeOut();
$("#contact").fadeOut();
});

$(".btn_prt").click(function(){
$("#article1").fadeOut();
$("#article2").fadeIn();
$("#article3").fadeOut();
$("#article4").fadeOut();

$("#over").fadeIn();
$("#blended").fadeOut();
$("#contact").fadeOut();
});

$(".btn_blog").click(function(){
$("#article1").fadeOut();
$("#article2").fadeOut();
$("#article3").fadeIn();
$("#article4").fadeOut();

$("#over").fadeOut();
$("#blended").fadeIn();
$("#contact").fadeOut();
});

$(".btn_abt").click(function(){
$("#article1").fadeOut();
$("#article2").fadeOut();
$("#article3").fadeOut();
$("#article4").fadeIn();

$("#over").fadeOut();
$("#blended").fadeOut();
$("#contact").fadeIn();
}); 
}); 
```

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-11-08T15:08:47.727

您可以组合项目：

```
$("#foo, #bar, #baz").fadeIn(); 
```

或者你可以使用类

```
$('.notneeded').fadeOut(); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-08T15:17:58.097

这里的问题是代码重复。您需要使用带有参数的函数来帮助解决这个问题。

```
$(document).ready(function() {
    $(".btn_prt").click(function(){
        fadeAllBut("#article2, #over");
    });

    $(".btn_blog").click(function(){
        fadeAllBut("#article3, #blended");
    });

    $(".btn_abt").click(function(){
        fadeAllBut("#article4, #contact");
    }); 
});

function fadeAllBut(itemsToFadeIn) {
    $(".fades").fadeOut();
    $(itemsToFadeIn).stop().fadeIn();
} 
```

当然，您需要将 CSS 类赋予`fades` 您想要淡入或淡出的所有项目。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-08T23:54:46.207

```
$(document)
.ready(function () {
$(".btn_home")
    .click(function () {
    $("#article1")
        .fadeIn(), $("#article2")
        .fadeOut(), $("#article3")
        .fadeOut(), $("#article4")
        .fadeOut(), $("#blended")
        .fadeOut(), $("#contact")
        .fadeOut()
}), $(".btn_prt")
    .click(function () {
    $("#article1")
        .fadeOut(), $("#article2")
        .fadeIn(), $("#article3")
        .fadeOut(), $("#article4")
        .fadeOut(), $("#over")
        .fadeIn(), $("#blended")
        .fadeOut(), $("#contact")
        .fadeOut()
}), $(".btn_blog")
    .click(function () {
    $("#article1")
        .fadeOut(), $("#article2")
        .fadeOut(), $("#article3")
        .fadeIn(), $("#article4")
        .fadeOut(), $("#over")
        .fadeOut(), $("#blended")
        .fadeIn(), $("#contact")
        .fadeOut()
}), $(".btn_abt")
    .click(function () {
    $("#article1")
        .fadeOut(), $("#article2")
        .fadeOut(), $("#article3")
        .fadeOut(), $("#article4")
        .fadeIn(), $("#over")
        .fadeOut(), $("#blended")
        .fadeOut(), $("#contact")
        .fadeIn()
})
}) 
```

# javascript - 检查日期是否在范围内

> ID：13291661
> 
> 赞同：5
> 
> 时间：2012-11-08T15:06:38.107
> 
> 标签：javascript, date, range

我正在尝试检查 mm.dd.yyyy 格式的日期是否大于今天并且小于从今天起 6 个月后的日期。

这是我的代码：

```
var isLinkExpiryDateWithinRange = function(value) {
    var monthfield = value.split('.')[0];
    var dayfield = value.split('.')[1];
    var yearfield = value.split('.')[2];
    var inputDate = new Date(yearfield, monthfield - 1, dayfield);
    var today = new Date();     
    today = new Date(today.getFullYear(), today.getMonth(), today.getDate());
    alert(inputDate > today);//alert-> true
    var endDate = today;
    endDate.setMonth(endDate.getMonth() + 6);
    alert(inputDate > today);//alert-> false
    if(inputDate > today && inputDate < endDate) {
        alert('1');
    } else {
        alert('2');/always alert it
    }
} 
```

如果我执行`isLinkExpiryDateWithinRange('12.08.2012')`，我希望它会显示 1，因为它在范围内，但它显示 2。此外，第一个警报显示为真，第二个警报显示为假。

谁能解释发生了什么？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-11-08T15:11:38.243

改变：

```
var endDate = today; 
```

到：

```
var endDate = new Date(today); 
```

有关如何引用和更改对象，请参阅[此处](https://stackoverflow.com/questions/518000/is-javascript-a-pass-by-reference-or-pass-by-value-language)的帖子。有一些非常好的例子可以帮助解释这个问题，特别是：

> 相反，情况是传入的项目是按值传递的。但是按值传递的项目本身就是一个引用。

[JSFiddle 示例](http://jsfiddle.net/ChaseWest/WmvW4/)

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2012-11-08T15:12:24.403

```
function isLinkExpiryDateWithinRange( value ) {
    // format: mm.dd.yyyy;
    value = value.split(".");
    var todayDate = new Date(),
        endDate = new Date( todayDate.getFullYear(), todayDate.getMonth() + 6, todayDate.getDate() +1 );
        date = new Date(value[2], value[0]-1, value[1]);

    return todayDate < date && date < endDate;
}

isLinkExpiryDateWithinRange("12.24.2012"); // true
isLinkExpiryDateWithinRange("12.24.2020"); // false 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2014-08-06T01:47:41.160

下面的函数检查所选日期是否在从今天起 5 天内。使用的日期格式为“DD-MM-YYYY”，您可以通过更改 value.split('-')[1] 顺序和拆分字符来使用任何格式。

```
function showMessage() {
        var value = document.getElementById("invoiceDueDate").value;
        var inputDate = new Date(value.split('-')[2], value.split('-')[1] - 1, value.split('-')[0]);
        var endDate = new Date();
        endDate.setDate(endDate.getDate() + 5);// adding 5 days from today
        if(inputDate < endDate) {
            alert("If the due date selected for the invoice is within 5 days, and express settlement fee will apply to this transaction.");
        }

    } 
```

# java - 消失的 JTextField 的摆动问题

> ID：13291664
> 
> 赞同：0
> 
> 时间：2012-11-08T15:06:45.927
> 
> 标签：java, swing, jtextfield

我在 NetBeans 工作，试图做我的项目，但我遇到了一个问题。基本上，我正在构建一个数字计时器，毫秒显示为 7 个文本字段，以 8 的形状排列。

像这样：

```
 _
|     |
   _
|     |
   _ 
```

对于每一毫秒，我使某些文本字段不可见以显示不同的数字。比我有一个一秒钟的显示，它（当毫秒数到 10 时）显示秒，例如 1、2、3 ......但由于某种原因，当毫秒达到 10 时，中间的文本字段消失并且不再显示。我不知道是什么导致了这个问题。

这是我的代码：

```
/*
 * To change this template, choose Tools | Templates
 * and open the template in the editor.
 */

/**
 *
 * 
 */
public class TimerFrame extends javax.swing.JFrame {

    /**
     * Creates new form TimerFrame
     */
    public TimerFrame() {
        initComponents();
    }

    /**
     * This method is called from within the constructor to initialize the form.
     * WARNING: Do NOT modify this code. The content of this method is always
     * regenerated by the Form Editor.
     */
    @SuppressWarnings("unchecked")
    // <editor-fold defaultstate="collapsed" desc="Generated Code">
    private void initComponents() {

        digitValue = new javax.swing.JTextField();
        jTextField1 = new javax.swing.JTextField();
        jTextField2 = new javax.swing.JTextField();
        jTextField3 = new javax.swing.JTextField();
        jTextField4 = new javax.swing.JTextField();
        jTextField5 = new javax.swing.JTextField();
        jTextField6 = new javax.swing.JTextField();
        jTextField7 = new javax.swing.JTextField();
        showDigit = new javax.swing.JButton();
        AddOne = new javax.swing.JButton();
        oneSecs = new javax.swing.JTextField();
        showOneSecs = new javax.swing.JButton();
        oneSecsDisplay = new javax.swing.JButton();

        setDefaultCloseOperation(javax.swing.WindowConstants.EXIT_ON_CLOSE);
        setTitle("Digital Timer");
        setBackground(new java.awt.Color(70, 70, 70));
        setCursor(new java.awt.Cursor(java.awt.Cursor.DEFAULT_CURSOR));

        digitValue.setText("000");

        jTextField1.setBackground(new java.awt.Color(255, 0, 0));
        jTextField1.setText("     ");

        jTextField2.setBackground(new java.awt.Color(255, 0, 0));
        jTextField2.setText("  ");

        jTextField3.setBackground(new java.awt.Color(255, 0, 0));
        jTextField3.setText("  ");

        jTextField4.setBackground(new java.awt.Color(255, 0, 0));
        jTextField4.setText("     ");

        jTextField5.setBackground(new java.awt.Color(255, 0, 0));
        jTextField5.setText("  ");

        jTextField6.setBackground(new java.awt.Color(255, 0, 0));
        jTextField6.setText("  ");
        jTextField6.addActionListener(new java.awt.event.ActionListener() {
            public void actionPerformed(java.awt.event.ActionEvent evt) {
                jTextField6ActionPerformed(evt);
            }
        });

        jTextField7.setBackground(new java.awt.Color(255, 0, 0));
        jTextField7.setText("     ");

        showDigit.setText("Show the Digit");
        showDigit.addActionListener(new java.awt.event.ActionListener() {
            public void actionPerformed(java.awt.event.ActionEvent evt) {
                showDigitActionPerformed(evt);
            }
        });

        AddOne.setText("Add One");
        AddOne.addActionListener(new java.awt.event.ActionListener() {
            public void actionPerformed(java.awt.event.ActionEvent evt) {
                AddOneActionPerformed(evt);
            }
        });

        oneSecs.setText("0");

        showOneSecs.setText("Show One Secs");
        showOneSecs.addActionListener(new java.awt.event.ActionListener() {
            public void actionPerformed(java.awt.event.ActionEvent evt) {
                showOneSecsActionPerformed(evt);
            }
        });

        org.jdesktop.layout.GroupLayout layout = new org.jdesktop.layout.GroupLayout(getContentPane());
        getContentPane().setLayout(layout);
        layout.setHorizontalGroup(
            layout.createParallelGroup(org.jdesktop.layout.GroupLayout.LEADING)
            .add(layout.createSequentialGroup()
                .add(60, 60, 60)
                .add(layout.createParallelGroup(org.jdesktop.layout.GroupLayout.LEADING)
                    .add(layout.createSequentialGroup()
                        .add(226, 226, 226)
                        .add(layout.createParallelGroup(org.jdesktop.layout.GroupLayout.LEADING)
                            .add(layout.createSequentialGroup()
                                .add(8, 8, 8)
                                .add(oneSecsDisplay, org.jdesktop.layout.GroupLayout.PREFERRED_SIZE, 96, org.jdesktop.layout.GroupLayout.PREFERRED_SIZE)
                                .add(62, 62, 62)
                                .add(layout.createParallelGroup(org.jdesktop.layout.GroupLayout.LEADING)
                                    .add(layout.createParallelGroup(org.jdesktop.layout.GroupLayout.TRAILING, false)
                                        .add(layout.createSequentialGroup()
                                            .add(jTextField2, org.jdesktop.layout.GroupLayout.PREFERRED_SIZE, 13, org.jdesktop.layout.GroupLayout.PREFERRED_SIZE)
                                            .addPreferredGap(org.jdesktop.layout.LayoutStyle.RELATED, org.jdesktop.layout.GroupLayout.DEFAULT_SIZE, Short.MAX_VALUE)
                                            .add(jTextField3, org.jdesktop.layout.GroupLayout.PREFERRED_SIZE, 13, org.jdesktop.layout.GroupLayout.PREFERRED_SIZE))
                                        .add(layout.createSequentialGroup()
                                            .add(jTextField5, org.jdesktop.layout.GroupLayout.PREFERRED_SIZE, 13, org.jdesktop.layout.GroupLayout.PREFERRED_SIZE)
                                            .add(28, 28, 28)
                                            .add(jTextField6, org.jdesktop.layout.GroupLayout.PREFERRED_SIZE, 13, org.jdesktop.layout.GroupLayout.PREFERRED_SIZE)))
                                    .add(layout.createSequentialGroup()
                                        .add(10, 10, 10)
                                        .add(layout.createParallelGroup(org.jdesktop.layout.GroupLayout.LEADING)
                                            .add(jTextField7, org.jdesktop.layout.GroupLayout.PREFERRED_SIZE, 34, org.jdesktop.layout.GroupLayout.PREFERRED_SIZE)
                                            .add(org.jdesktop.layout.GroupLayout.TRAILING, layout.createSequentialGroup()
                                                .add(layout.createParallelGroup(org.jdesktop.layout.GroupLayout.LEADING)
                                                    .add(org.jdesktop.layout.GroupLayout.TRAILING, jTextField4, org.jdesktop.layout.GroupLayout.PREFERRED_SIZE, 34, org.jdesktop.layout.GroupLayout.PREFERRED_SIZE)
                                                    .add(org.jdesktop.layout.GroupLayout.TRAILING, jTextField1, org.jdesktop.layout.GroupLayout.PREFERRED_SIZE, org.jdesktop.layout.GroupLayout.DEFAULT_SIZE, org.jdesktop.layout.GroupLayout.PREFERRED_SIZE))
                                                .add(10, 10, 10))))))
                            .add(layout.createSequentialGroup()
                                .add(showOneSecs)
                                .add(6, 6, 6)
                                .add(AddOne)
                                .addPreferredGap(org.jdesktop.layout.LayoutStyle.RELATED)
                                .add(showDigit)
                                .addPreferredGap(org.jdesktop.layout.LayoutStyle.RELATED)
                                .add(digitValue, org.jdesktop.layout.GroupLayout.PREFERRED_SIZE, org.jdesktop.layout.GroupLayout.DEFAULT_SIZE, org.jdesktop.layout.GroupLayout.PREFERRED_SIZE)))
                        .addContainerGap(org.jdesktop.layout.GroupLayout.DEFAULT_SIZE, Short.MAX_VALUE))
                    .add(layout.createSequentialGroup()
                        .add(272, 272, 272)
                        .add(oneSecs, org.jdesktop.layout.GroupLayout.PREFERRED_SIZE, org.jdesktop.layout.GroupLayout.DEFAULT_SIZE, org.jdesktop.layout.GroupLayout.PREFERRED_SIZE)
                        .add(0, 0, Short.MAX_VALUE))))
        );
        layout.setVerticalGroup(
            layout.createParallelGroup(org.jdesktop.layout.GroupLayout.LEADING)
            .add(org.jdesktop.layout.GroupLayout.TRAILING, layout.createSequentialGroup()
                .addContainerGap(104, Short.MAX_VALUE)
                .add(oneSecs, org.jdesktop.layout.GroupLayout.PREFERRED_SIZE, org.jdesktop.layout.GroupLayout.DEFAULT_SIZE, org.jdesktop.layout.GroupLayout.PREFERRED_SIZE)
                .addPreferredGap(org.jdesktop.layout.LayoutStyle.RELATED)
                .add(layout.createParallelGroup(org.jdesktop.layout.GroupLayout.TRAILING)
                    .add(oneSecsDisplay, org.jdesktop.layout.GroupLayout.PREFERRED_SIZE, 120, org.jdesktop.layout.GroupLayout.PREFERRED_SIZE)
                    .add(layout.createSequentialGroup()
                        .add(jTextField1, org.jdesktop.layout.GroupLayout.PREFERRED_SIZE, 13, org.jdesktop.layout.GroupLayout.PREFERRED_SIZE)
                        .addPreferredGap(org.jdesktop.layout.LayoutStyle.RELATED)
                        .add(layout.createParallelGroup(org.jdesktop.layout.GroupLayout.BASELINE)
                            .add(jTextField3, org.jdesktop.layout.GroupLayout.PREFERRED_SIZE, org.jdesktop.layout.GroupLayout.DEFAULT_SIZE, org.jdesktop.layout.GroupLayout.PREFERRED_SIZE)
                            .add(jTextField2, org.jdesktop.layout.GroupLayout.PREFERRED_SIZE, org.jdesktop.layout.GroupLayout.DEFAULT_SIZE, org.jdesktop.layout.GroupLayout.PREFERRED_SIZE))
                        .addPreferredGap(org.jdesktop.layout.LayoutStyle.RELATED)
                        .add(jTextField4, org.jdesktop.layout.GroupLayout.PREFERRED_SIZE, 13, org.jdesktop.layout.GroupLayout.PREFERRED_SIZE)
                        .addPreferredGap(org.jdesktop.layout.LayoutStyle.RELATED)
                        .add(layout.createParallelGroup(org.jdesktop.layout.GroupLayout.BASELINE)
                            .add(jTextField6, org.jdesktop.layout.GroupLayout.PREFERRED_SIZE, org.jdesktop.layout.GroupLayout.DEFAULT_SIZE, org.jdesktop.layout.GroupLayout.PREFERRED_SIZE)
                            .add(jTextField5, org.jdesktop.layout.GroupLayout.PREFERRED_SIZE, org.jdesktop.layout.GroupLayout.DEFAULT_SIZE, org.jdesktop.layout.GroupLayout.PREFERRED_SIZE))
                        .add(7, 7, 7)
                        .add(jTextField7, org.jdesktop.layout.GroupLayout.PREFERRED_SIZE, 13, org.jdesktop.layout.GroupLayout.PREFERRED_SIZE)))
                .addPreferredGap(org.jdesktop.layout.LayoutStyle.RELATED)
                .add(layout.createParallelGroup(org.jdesktop.layout.GroupLayout.LEADING)
                    .add(org.jdesktop.layout.GroupLayout.TRAILING, showOneSecs)
                    .add(org.jdesktop.layout.GroupLayout.TRAILING, layout.createParallelGroup(org.jdesktop.layout.GroupLayout.BASELINE)
                        .add(digitValue, org.jdesktop.layout.GroupLayout.PREFERRED_SIZE, org.jdesktop.layout.GroupLayout.DEFAULT_SIZE, org.jdesktop.layout.GroupLayout.PREFERRED_SIZE)
                        .add(showDigit)
                        .add(AddOne)))
                .addContainerGap())
        );

        pack();
    }// </editor-fold>

    private void jTextField6ActionPerformed(java.awt.event.ActionEvent evt) {
        // TODO add your handling code here:
    }

    private void showDigitActionPerformed(java.awt.event.ActionEvent evt) {
        // showDigit
        int digit1 = Integer.parseInt(digitValue.getText());
        jTextField1.setVisible(true);
        jTextField2.setVisible(true);
        jTextField3.setVisible(true);
        jTextField4.setVisible(true);
        jTextField5.setVisible(true);
        jTextField6.setVisible(true);
        jTextField7.setVisible(true);
            if (digit1 == 0) {
                jTextField4.setVisible(false);
            } else if (digit1 == 1) {
                jTextField1.setVisible(false);
                jTextField2.setVisible(false);
                jTextField4.setVisible(false);
                jTextField5.setVisible(false);
                jTextField7.setVisible(false);
            } else if (digit1 == 2) {
                jTextField2.setVisible(false);
                jTextField6.setVisible(false);
            } else if (digit1 == 3) {
                jTextField2.setVisible(false);
                jTextField5.setVisible(false);
            } else if (digit1 == 4) {
                jTextField1.setVisible(false);
                jTextField5.setVisible(false);
                jTextField7.setVisible(false);
            } else if (digit1 == 5) {
                jTextField3.setVisible(false);
                jTextField5.setVisible(false);
            } else if (digit1 == 6) {
                jTextField3.setVisible(false);
            } else if (digit1 == 7) {
                jTextField2.setVisible(false);
                jTextField4.setVisible(false);
                jTextField5.setVisible(false);
                jTextField7.setVisible(false);
            } else if (digit1 == 9) {
                jTextField5.setVisible(false);
            }
    }

    private void AddOneActionPerformed(java.awt.event.ActionEvent evt) {
        // Add One
        int addOne = Integer.parseInt(digitValue.getText());
        addOne = addOne + 1;
        if (addOne == 10) { 
            addOne = 0;
            int oneSecond = Integer.parseInt(oneSecs.getText());
            oneSecond = oneSecond + 1;
            String oneSeconds = Integer.toString(oneSecond);
            oneSecs.setText(oneSeconds);
            showOneSecsActionPerformed(evt);
        }
        String myString = Integer.toString(addOne);
        digitValue.setText(myString);
        showDigitActionPerformed(evt);
    }

    private void showOneSecsActionPerformed(java.awt.event.ActionEvent evt) {
        // Show One Secs
        int ones = Integer.parseInt(oneSecs.getText());
            if (ones == 0) {
                oneSecsDisplay.setIcon(new javax.swing.ImageIcon("0.jpg"));
            } else if (ones == 1) {
                oneSecsDisplay.setIcon(new javax.swing.ImageIcon("1.jpg"));
            } else if (ones == 2) {
                oneSecsDisplay.setIcon(new javax.swing.ImageIcon("2.jpg"));
            } else if (ones == 3) {
                oneSecsDisplay.setIcon(new javax.swing.ImageIcon("3.jpg"));
            } else if (ones == 4) {
                oneSecsDisplay.setIcon(new javax.swing.ImageIcon("4.jpg"));
            } else if (ones == 5) {
                oneSecsDisplay.setIcon(new javax.swing.ImageIcon("5.jpg"));
            } else if (ones == 6) {
                oneSecsDisplay.setIcon(new javax.swing.ImageIcon("6.jpg"));
            } else if (ones == 7) {
                oneSecsDisplay.setIcon(new javax.swing.ImageIcon("7.jpg"));
            } else if (ones == 8) {
                oneSecsDisplay.setIcon(new javax.swing.ImageIcon("8.jpg"));
            } else if (ones == 9) {
                oneSecsDisplay.setIcon(new javax.swing.ImageIcon("9.jpg"));
            }
    }

    /**
     * @param args the command line arguments
     */
    public static void main(String args[]) {
        /* Set the Nimbus look and feel */
        //<editor-fold defaultstate="collapsed" desc=" Look and feel setting code (optional) ">
        /* If Nimbus (introduced in Java SE 6) is not available, stay with the default look and feel.
         * For details see http://download.oracle.com/javase/tutorial/uiswing/lookandfeel/plaf.html 
         */
        try {
            for (javax.swing.UIManager.LookAndFeelInfo info : javax.swing.UIManager.getInstalledLookAndFeels()) {
                if ("Nimbus".equals(info.getName())) {
                    javax.swing.UIManager.setLookAndFeel(info.getClassName());
                    break;
                }
            }
        } catch (ClassNotFoundException ex) {
            java.util.logging.Logger.getLogger(TimerFrame.class.getName()).log(java.util.logging.Level.SEVERE, null, ex);
        } catch (InstantiationException ex) {
            java.util.logging.Logger.getLogger(TimerFrame.class.getName()).log(java.util.logging.Level.SEVERE, null, ex);
        } catch (IllegalAccessException ex) {
            java.util.logging.Logger.getLogger(TimerFrame.class.getName()).log(java.util.logging.Level.SEVERE, null, ex);
        } catch (javax.swing.UnsupportedLookAndFeelException ex) {
            java.util.logging.Logger.getLogger(TimerFrame.class.getName()).log(java.util.logging.Level.SEVERE, null, ex);
        }
        //</editor-fold>

        /* Create and display the form */
        java.awt.EventQueue.invokeLater(new Runnable() {
            public void run() {
                new TimerFrame().setVisible(true);
            }
        });
    }
    // Variables declaration - do not modify
    private javax.swing.JButton AddOne;
    private javax.swing.JTextField digitValue;
    private javax.swing.JTextField jTextField1;
    private javax.swing.JTextField jTextField2;
    private javax.swing.JTextField jTextField3;
    private javax.swing.JTextField jTextField4;
    private javax.swing.JTextField jTextField5;
    private javax.swing.JTextField jTextField6;
    private javax.swing.JTextField jTextField7;
    private javax.swing.JTextField oneSecs;
    private javax.swing.JButton oneSecsDisplay;
    private javax.swing.JButton showDigit;
    private javax.swing.JButton showOneSecs;
    // End of variables declaration
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-09T00:53:24.157

对于初学者，我不得不说这是一个非常不寻常的数字显示实现。更改元素的可见性可能会导致组件重新布局并发生此类问题。

该问题是由更改按钮上的图标的调用引起的，`oneSecsDisplay`因为可以看到注释掉对`showOneSecsActionPerformed`. 布局重新打包了所有内容，并且中间的 JTextField 消失了。

我不是 GroupLayout 方面的专家，但一个可能的简短解决方案是将所有这些 TextFields 放入它自己的面板中。从长远来看，我同意@whiskeyspider 推荐[绘图替代方案](http://docs.oracle.com/javase/tutorial/2d/index.html)。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-09T02:31:40.603

正如 madth3 所指出的，一旦组件变得不可见，大多数布局管理器在计算布局时就不再考虑它。

虽然我可以想出 100 种不同的方法来解决这个问题，但下面的示例使用了一个简单`JPanel`的片段，它使用了一个时髦的 alpha 颜色技巧来“隐藏”不影响现有布局的片段。

![在此处输入图像描述](../Images/c48dd39d13babb98643e467c46d6d06a.png)

```
public class Clock {

    public static void main(String[] args) {
        new Clock();
    }

    public Clock() {
        EventQueue.invokeLater(new Runnable() {
            @Override
            public void run() {
                try {
                    UIManager.setLookAndFeel(UIManager.getSystemLookAndFeelClassName());
                } catch (ClassNotFoundException ex) {
                } catch (InstantiationException ex) {
                } catch (IllegalAccessException ex) {
                } catch (UnsupportedLookAndFeelException ex) {
                }

                JFrame frame = new JFrame();
                frame.setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);
                frame.setLayout(new BorderLayout());
                frame.add(new TimerPane());
                frame.pack();
                frame.setLocationRelativeTo(null);
                frame.setVisible(true);
            }
        });
    }

    public class TimerPane extends JPanel {

        private List<Segment> segments;
        private int tick = 0;

        public TimerPane() {
            setBorder(new EmptyBorder(9, 9, 9, 9));
            setLayout(new GridBagLayout());

            segments = new ArrayList<>(7);
            segments.add(new Segment(false));
            segments.add(new Segment(true));
            segments.add(new Segment(true));
            segments.add(new Segment(false));
            segments.add(new Segment(true));
            segments.add(new Segment(true));
            segments.add(new Segment(false));

            GridBagConstraints gbc = new GridBagConstraints();
            gbc.gridx = 1;
            gbc.gridy = 0;
            add(segments.get(0), gbc);
            gbc.gridx = 0;
            gbc.gridy++;
            add(segments.get(1), gbc);
            gbc.gridx = 2;
            add(segments.get(2), gbc);

            gbc.gridx = 1;
            gbc.gridy++;
            add(segments.get(3), gbc);
            gbc.gridy++;
            gbc.gridx = 0;
            add(segments.get(4), gbc);
            gbc.gridx = 2;
            add(segments.get(5), gbc);

            gbc.gridx = 1;
            gbc.gridy++;
            add(segments.get(6), gbc);

            Timer clock = new Timer(1000, new ActionListener() {
                @Override
                public void actionPerformed(ActionEvent e) {
                    List<Segment> active = new ArrayList<Segment>(segments);
                    switch (tick) {
                        case 0:
                            active.remove(segments.get(3));
                            break;
                        case 1:
                            active.remove(segments.get(0));
                            active.remove(segments.get(1));
                            active.remove(segments.get(3));
                            active.remove(segments.get(4));
                            active.remove(segments.get(6));
                            break;
                        case 2:
                            active.remove(segments.get(1));
                            active.remove(segments.get(5));
                            break;
                        case 3:
                            active.remove(segments.get(1));
                            active.remove(segments.get(4));
                            break;
                        case 4:
                            active.remove(segments.get(0));
                            active.remove(segments.get(4));
                            active.remove(segments.get(6));
                            break;
                        case 5:
                            active.remove(segments.get(2));
                            active.remove(segments.get(4));
                            break;
                        case 6:
                            active.remove(segments.get(2));
                            break;
                        case 7:
                            active.remove(segments.get(1));
                            active.remove(segments.get(3));
                            active.remove(segments.get(4));
                            active.remove(segments.get(6));
                            break;
                        case 8:
                            break;
                        case 9:
                            active.remove(segments.get(4));
                            active.remove(segments.get(6));
                            break;
                    }

                    List<Segment> inactive = new ArrayList<>(segments);
                    inactive.removeAll(active);

                    color(active, true);
                    color(inactive, false);

                    tick++;
                    if (tick > 9) {
                        tick = 0;
                    }

                    repaint();

                }

                protected void color(List<Segment> segments, boolean isActive) {
                    for (Segment segment : segments) {
                        segment.setActive(isActive);
                    }
                }
            });
            clock.setInitialDelay(0);
            clock.setRepeats(true);
            clock.start();

        }
    }

    public class Segment extends JPanel {

        protected Color alpha = new Color(0, 0, 0, 0);

        private boolean vertical;
        private boolean active;

        public Segment(boolean vertical) {
            this.vertical = vertical;
            setActive(false);
        }

        public void setActive(boolean value) {
            if (active != value) {
                active = value;
                if (active) {
                    setBackground(Color.LIGHT_GRAY);
                    setBorder(new LineBorder(Color.DARK_GRAY));
                } else {
                    setBackground(alpha);
                    setBorder(new LineBorder(alpha));
                }
            }
        }

        public boolean isActive() {
            return active;
        }

        @Override
        public Dimension getPreferredSize() {
            Dimension size = super.getPreferredSize();
            if (vertical) {
                size = new Dimension(5, 15);
            } else {
                size = new Dimension(15, 5);
            }
            return size;
        }
    }
} 
```

# vim - 如何在 CtrlP 中保留上一个目录？

> ID：13291665
> 
> 赞同：4
> 
> 时间：2012-11-08T15:06:46.003
> 
> 标签：vim, ctrlp

使用 CtrlP 插件，我输入`..`了几次以进入项目的根目录，然后从那里执行搜索。

但是，在我重新打开 CtrlP 后，它仍然会在当前文件的目录中搜索。

我怎样才能让它坚持我最初设置的目录？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-11-08T15:18:44.723

当然，通过阅读它的文档。

*   如果您希望 CtrlP*始终*在项目的根目录中打开（如果适用），只需将此行添加到您的`~/.vimrc`:

    ```
    let g:ctrlp_working_path_mode=2 
    ```

*   但是您也可以同时使用它们`:CtrlP`来浏览当前目录和`:CtrlpRoot`浏览项目的根目录。

*   或者干脆使用`:CtrlPLastMode`在……最后一种模式下启动 CtrlP。

*   如果你的项目不符合 CtrlP 对项目的定义，一个简单的映射就足够了：

    ```
    nnoremap <key> :CtrlP /path/to/project<cr> 
    ```

    或者您可以使用此选项：

    ```
    let g:ctrlp_root_markers = [''] 
    ```

***编辑***

我的回答是基于我机器上当前安装的 CtrlP 版本。

最新版本向`:CtrlPLastMode`:添加了一个可选参数，`--dir`它完全符合您的要求：

```
:CtrlPLastMode --dir 
```

`g:ctrlp_working_path_mode`价值观也不同。我相信`r`相当于`2`.

# objective-c - ParseKit 没有像我预期的那样调用方法

> ID：13291666
> 
> 赞同：3
> 
> 时间：2012-11-08T15:06:50.837
> 
> 标签：objective-c, ios, parsing, bnf, parsekit

我正在使用 Parse Kit，但我对语法有疑问。

这是我的语法字符串如下：

```
 self.grammar = @" \
    @start     = sentence+; \
    sentence   = adjectives subjects will verbs subjects '.'; \
    subjects   = 'i' | 'you' | 'he' | 'she' | 'it' | 'they' | 'we' | 'who else' | 'Apples QA' | 'Hitler' | 'dance';\
    verbs      = 'eat' | 'sleep' | 'dance' | 'kill' | 'care'; \
    will       = 'will'; \
    adjectives = 'awesome' | 'red' | 'beautiful' | 'odd' | 'useless' | 'temporary';"; 
```

所以，我想我可以创建包含我所有术语规则的句子。

喜欢排队：`"sentence = adjectives subjects will verbs subjects '.';"`

所以来自用户的输入字符串看起来像这样：**“awesome you will care Apples QA”**

我已将委托（汇编器）方法添加到我的汇编器中，如下所示：

*   (void)didMatchSentence:(PKAssembly *)a
*   (void)didMatchAdjectives:(PKAssembly *)a
*   (void)didMatchWill:(PKAssembly *)a
*   (void)didMatchSubject:(PKAssembly *)a
*   (void)didMatchVerb:(PKAssembly *)a

但是解析器只调用了其中两个：didMatchAdjectives 和 didMatchWill

怎么会？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-08T17:23:30.097

你有一个错字：术语调用“主题”，但方法是 didMatchSubject，而不是 didMatchSubjects

# java - NoClassDefFoundError 使用 mahout

> ID：13291671
> 
> 赞同：2
> 
> 时间：2012-11-08T15:06:54.427
> 
> 标签：java, mahout, recommendation-engine, mahout-recommender

我开始学习 mahout，但在第一步中，我的程序中出现了一个奇怪的错误。我正在尝试用几行代码构建一个简单的推荐器：

```
import java.util.List;
import java.io.File;
import org.apache.mahout.cf.taste.model.DataModel;
import org.apache.mahout.cf.taste.impl.model.file.FileDataModel;
import org.apache.mahout.cf.taste.similarity.UserSimilarity;
import org.apache.mahout.cf.taste.impl.similarity.PearsonCorrelationSimilarity;
import org.apache.mahout.cf.taste.neighborhood.UserNeighborhood;
import org.apache.mahout.cf.taste.impl.neighborhood.NearestNUserNeighborhood;
import org.apache.mahout.cf.taste.recommender.Recommender;
import org.apache.mahout.cf.taste.recommender.RecommendedItem;
import org.apache.mahout.cf.taste.impl.recommender.GenericUserBasedRecommender;
/**
 */
public class RecommenderIntro {
    public static void main(String[] args) throws Exception {
        // TODO code application logic here
        DataModel model =
                new FileDataModel (new File("intro.csv"));
        UserSimilarity similarity =
                new PearsonCorrelationSimilarity (model);
        UserNeighborhood neighborhood =
                new NearestNUserNeighborhood (2, similarity, model);
        Recommender recommender = new GenericUserBasedRecommender (
                model, neighborhood, similarity);
        List<RecommendedItem> recommendations =
                recommender.recommend(1, 1);
        for (RecommendedItem recommendation : recommendations) {
            System.out.println(recommendation);
        }
    }
} 
```

但我得到这个错误

```
Exception in thread "main" java.lang.NoClassDefFoundError: org/slf4j/LoggerFactory
    at org.apache.mahout.cf.taste.impl.model.file.FileDataModel.<clinit>(FileDataModel.java:119)
    at recommenderintro.RecommenderIntro.main(RecommenderIntro.java:28)
Caused by: java.lang.ClassNotFoundException: org.slf4j.LoggerFactory
    at java.net.URLClassLoader$1.run(URLClassLoader.java:217)
    at java.security.AccessController.doPrivileged(Native Method)
    at java.net.URLClassLoader.findClass(URLClassLoader.java:205)
    at java.lang.ClassLoader.loadClass(ClassLoader.java:321)
    at sun.misc.Launcher$AppClassLoader.loadClass(Launcher.java:294)
    at java.lang.ClassLoader.loadClass(ClassLoader.java:266)
    ... 2 more
Java Result: 1 
```

这段代码有什么问题？我是从书上抄来的！

* * *

但是使用所有这些 jar 文件我得到以下错误：

```
SLF4J: Class path contains multiple SLF4J bindings.
SLF4J: Found binding in [jar:file:/home/omid/Desktop/slf4j-1.7.2/slf4j-jcl-1.7.2.jar!/org/slf4j/impl/StaticLoggerBinder.class]
SLF4J: Found binding in [jar:file:/home/omid/Desktop/slf4j-1.7.2/slf4j-jdk14-1.7.2.jar!/org/slf4j/impl/StaticLoggerBinder.class]
SLF4J: Found binding in [jar:file:/home/omid/Desktop/slf4j-1.7.2/slf4j-log4j12-1.7.2.jar!/org/slf4j/impl/StaticLoggerBinder.class]
SLF4J: Found binding in [jar:file:/home/omid/Desktop/slf4j-1.7.2/slf4j-nop-1.7.2.jar!/org/slf4j/impl/StaticLoggerBinder.class]
SLF4J: Found binding in [jar:file:/home/omid/Desktop/slf4j-1.7.2/slf4j-simple-1.7.2.jar!/org/slf4j/impl/StaticLoggerBinder.class]
SLF4J: See http://www.slf4j.org/codes.html#multiple_bindings for an explanation.
SLF4J: Detected both jcl-over-slf4j.jar AND slf4j-jcl.jar on the class path, preempting StackOverflowError. 
SLF4J: See also http://www.slf4j.org/codes.html#jclDelegationLoop for more details.
Exception in thread "main" java.lang.ExceptionInInitializerError
    at org.slf4j.impl.StaticLoggerBinder.<init>(StaticLoggerBinder.java:73)
    at org.slf4j.impl.StaticLoggerBinder.<clinit>(StaticLoggerBinder.java:42)
    at org.slf4j.LoggerFactory.bind(LoggerFactory.java:128)
    at org.slf4j.LoggerFactory.performInitialization(LoggerFactory.java:107)
    at org.slf4j.LoggerFactory.getILoggerFactory(LoggerFactory.java:295)
    at org.slf4j.LoggerFactory.getLogger(LoggerFactory.java:269)
    at org.slf4j.LoggerFactory.getLogger(LoggerFactory.java:281)
    at org.apache.mahout.cf.taste.impl.model.file.FileDataModel.<clinit>(FileDataModel.java:119)
    at recommenderintro.RecommenderIntro.main(RecommenderIntro.java:28)
Caused by: java.lang.IllegalStateException: Detected both jcl-over-slf4j.jar AND slf4j-jcl.jar on the class path, preempting StackOverflowError. See also http://www.slf4j.org/codes.html#jclDelegationLoop for more details.
    at org.slf4j.impl.JCLLoggerFactory.<clinit>(JCLLoggerFactory.java:55)
    ... 9 more
Java Result: 1 
```

我在使用额外的 jar 文件吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-08T15:11:56.890

您需要类路径中的[slf4j](http://www.slf4j.org/)项目中的 jar。

下载地址：[http ://www.slf4j.org/download.html](http://www.slf4j.org/download.html)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-09T06:53:10.980

请获取源代码，或者至少`pom.xml`从[带有源代码的存储库中获取示例](https://github.com/tdunning/MiA)。这`pom.xml`指定了所有依赖项，并且所有内容都经过测试，可用于不同 Mahout 的版本。请查看这篇关于如何开始使用示例的[博客文章。](http://alexott.blogspot.de/2012/07/getting-started-with-examples-from.html)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-09T12:05:00.220

谢谢大家。

在这个问题上困惑了这么多，我终于解决了这个问题！我只是 web 到 mahout 目录并将所有 jar 文件添加`"mahout/utils/target/dependency/"`到类路径中。

由于我使用 maven 安装 mahout，因此我还可以使用文件`".m2/"`夹中的 jar 文件作为依赖项，但第一个解决方案要简单得多。

# c++ - Visual Studio 2008 cl.exe 属性 openmp

> ID：13291672
> 
> 赞同：0
> 
> 时间：2012-11-08T15:07:01.730
> 
> 标签：c++, openmp

我需要为编译器 cl.exe /openmp 设置属性。

请告诉我，我该如何以及在哪里可以做到这一点？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-08T15:35:07.280

假设您要为 Visual Studio C++ 项目设置此项：请参阅[知识库中的这篇文章](http://support.microsoft.com/kb/311065/en-us)等。

![在此处输入图像描述](../Images/8290cddf3bdc2644afbff4a4bef9b21f.png)

# javascript - swfobject.embedSWF youtube 视频覆盖在 chrome 中，不透明度不起作用

> ID：13291674
> 
> 赞同：4
> 
> 时间：2012-11-08T15:07:06.653
> 
> 标签：javascript, flash, google-chrome, prototypejs, swfobject

我在 chrome 中使用 youtube 覆盖视频时遇到问题，覆盖的不透明度为 0.8，但是在 chrome 中，youtube 视频也应用了不透明度，因此您可以看穿它。

我在此任务中使用 swfobject.embedSWF 和 ProtoTube 插件，但无法弄清楚为什么会发生这种情况，有什么想法吗？

功能是：

```
getVideoEmbed: function(wrapper) {
        var wrapperID = wrapper.identify();
        var flashvars = {
            fs: this.options.fs,
            autoplay: this.options.autoplay,
            loop: this.options.loop,
            hd: this.options.hd,
            showinfo: this.options.showinfo,
            rel: this.options.rel

        };
        var params = { 
            wmode: "transparent",
            allowScriptAccess: "always",
            allowFullScreen: true,
            menu: false
        };
        var atts = { };
        swfobject.embedSWF(this.options.youtubeVideoUrl+this.videoID, wrapperID, this.options.playerWidth, this.options.playerHeight, "9", null, flashvars, params);
    }, 
```

可以在此处找到问题的示例 URL：http: [//tinyurl.com/b48u39c](http://tinyurl.com/b48u39c)（单击 chrome 主图像上的播放视频链接以查看问题）

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-15T21:27:50.890

在`{opacity: 0.8}`Firefox 16.0.2 和 IE 9 中，电影看起来与 Chrome 23 中的完全一样（半透明，通过它可以看到图像和文本）。在 Opera 12.02 中，电影看起来有点漂白（混合了大量的白色）。

所以恕我直言，这不是 Chrome 的特定错误。这是浏览器的行为 - 以某种方式将元素的不透明度应用于嵌套对象（因为`object`嵌套在您的`div class="overlay"`.

更新：将您的 swf 播放器放在*更高* `div class="overlay"`的位置`z-index`（例如`{z-index: 5001;}`，不在覆盖范围*内*。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-12T20:46:36.457

我最终使用了 rgba(0, 0, 0, 0.8) ，它在 CSS 中修复了它

# facebook - 如何检索当前用户发布的所有操作

> ID：13291676
> 
> 赞同：0
> 
> 时间：2012-11-08T15:07:06.717
> 
> 标签：facebook, facebook-graph-api, facebook-javascript-sdk, facebook-php-sdk, facebook-opengraph

是否可以获得已发布到当前用户时间轴的操作列表？例如，通过我的应用程序发布到用户时间轴中的所有阅读操作 (news.reads)。

我知道如何使用 Graph API 发布内置读取操作，但不知道如何获取某人已经发布的所有操作。这个想法是创建一个当前用户曾经发布过的所有动作的列表，然后让他决定他想从他的时间轴中删除哪些动作。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-08T15:36:56.230

**对于内置操作，您可以使用适当的**[Open Graph Permission](https://developers.facebook.com/docs/reference/login/open-graph-permissions/)检索所有收听、阅读和观看（以及游戏活动）。您可以通过简单的 Graph API 调用来执行此操作，例如：

`https://graph.facebook.com/me/news.reads?access_token=USERACCESSTOKEN`

在此处查看更多信息： [https ://developers.facebook.com/docs/opengraph/actions/builtin/](https://developers.facebook.com/docs/opengraph/actions/builtin/)

**对于自定义操作**，应用程序只能[检索](https://developers.facebook.com/docs/opengraph/actions/#read)它已发布的任何操作。在这种情况下，`user_actions:APP_NAMESPACE`必须向用户请求权限，然后 Graph API 调用将类似于：

`https://graph.facebook.com/me/mycookingapp:eat?access_token=USERACCESSTOKEN`（`mycookingapp`应用名称空间在哪里，`eat`自定义操作在哪里）。

您可以通过转到应用[程序仪表板](https://developers.facebook.com/apps/)的 Open Graph 部分并单击相关操作类型旁边的“获取代码”来查看用于读取所有特定自定义操作类型的 Graph API 调用。

# ios - iOS Facebook SDK openActiveSessionWithReadPermissions 永远不会在某些 FB 应用程序上返回

> ID：13291683
> 
> 赞同：1
> 
> 时间：2012-11-08T15:07:33.133
> 
> 标签：ios, facebook, facebook-ios-sdk

我们正在编写一个与 Facebook 集成的原生 iOS 应用程序。几个月前，我们通过 developers.facebook.com 建立了一个占位符 FB 应用程序，并一直通过它进行所有测试。现在我们离发布更近了，我想我应该设置一个新的、干净的、“正确的”FB 应用程序，其中包含所有正确的应用程序描述/URL 字段/等。

作为第一步，我将新应用程序设置为与旧应用程序尽可能相似，并创建了一个新的测试用户。旧应用程序运行良好，所以我有理由相信我们的 iOS 代码是正确的（是的，我已经在 XCode 项目中切换了应用程序 ID 等等），但是当我们使用集成的新应用程序运行时，我们会得到这种行为尝试向用户授权应用程序时：

如果 iOS Facebook 应用已安装且测试用户已登录：

1.  在调用 openActiveSessionWithReadPermissions（请求@"email" 权限）时，iOS Facebook 应用程序启动并向用户显示我们应用程序的基本信息授权页面。
2.  用户单击页面顶部的“登录”按钮。
3.  FB 应用程序会弹出另一个空白窗口，左上角有一个“取消”按钮。
4.  从此时起，用户所做的任何事情都不会让 Facebook 将控制权交还给我们的 iOS 应用程序。
5.  但是之后检查测试用户的页面显示该应用程序*已*被授权。

如果我从设备上卸载 Facebook 应用程序，从而强制在 Safari 中显示请求屏幕，我们会得到相同的行为，除了上面的第 (3) 点被替换为：

3) 设备提示“Safari 无法打开页面，因为地址无效”。这是它试图打开的地址：[https](https://m.facebook.com/dialog/permissions.request?_path=permissions.request&app_id=) ://m.facebook.com/dialog/permissions.request?_path=permissions.request&app_id= <*our_app_id*>&redirect_uri=fb<*our_app_id*>%3A%2F%2Fauthorize&sdk =ios&display=touch&type=user_agent&perms=email&fbconnect=1&sso=iphone-safari&from_login=1&client_id=<*our_app_id*>&refid=9

我发现这种行为在 iOS 5.1 和 6.0 硬件设备以及 6.0 模拟器上是相同的。使用旧的 FB 应用程序，授权正确返回。我敢肯定，在应用程序管理页面中，我只是没有正确设置一个神奇的、几乎没有记录的选项复选框，但我真的不知道如何找出问题所在。

感谢您的任何建议！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-12T20:12:14.550

由于它没有返回到您的应用程序，您可能忘记将 URL 方案添加到您的 Info.plist。您应该有一个新条目，这是它的 XML 表示形式：

```
<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE plist PUBLIC "-//Apple//DTD PLIST 1.0//EN" "http://www.apple.com/DTDs/PropertyList-1.0.dtd">
    <plist version="1.0">
        <array>
        <dict>
                <key>CFBundleURLSchemes</key>
                <array>
                    <string>fbYOUR_APP_ID</string>
                </array>
        </dict>
        </array>
    </plist> 
```

# bash - 如何使开源脚本“可安装”？

> ID：13291687
> 
> 赞同：0
> 
> 时间：2012-11-08T15:07:45.660
> 
> 标签：bash

我已经完成了一个用 Bash 编写的有用脚本，托管在 github 上。它已经过测试和记录。现在，我为如何制作而苦苦挣扎`installable`，即我应该把它放在哪里以及如何制作。

似乎其他此类项目使用 make 和 configure 但我真的找不到任何关于如何为 bash 脚本执行此操作的信息。

另外我不确定将我的脚本放在哪个目录中。

我知道如何让它自己可用，但如果用户下载它，我想为他提供轻松安装它的方法。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-08T16:11:03.863

这没有标准，因为大多数时候，项目不是单个脚本文件。单文件脚本也不需要构建步骤（脚本已经是可执行形式）并且配置通常来自外部配置文件（因此也不需要`configure`脚本）。

但我建议在文件顶部附近添加注释，解释它的作用以及如何安装它（即`chmod +x`+ 复制到文件夹）。

或者，您可以创建一个安装程序脚本，其中包含您的原始脚本和一个标题，该标题询问用户她想在哪里安装真正的脚本以及执行所有操作（`mkdir`、设置权限`sudo`等），但在您的情况下，这真的感觉有点矫枉过正。

如果您想使其可安装以便包管理器可以轻松地安装和删除（！）它，您需要查看[rpm](http://www.ibm.com/developerworks/library/l-rpm1/)或[Debian 打包](http://wiki.debian.org/IntroDebianPackaging)的文档。这是两个最常用的包管理器，但它们不能为每个用户安装一个脚本（所以它可能最终会在`/usr/bin`）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2018-02-09T06:00:53.450

指示他们在他们的主目录中创建一个以脚本命名的文件，chmod ug+x 文件以便它具有可执行权限而不是将脚本放入文件中，不要忘记 #!/bin/bash 顶部的 vim . 这个例子是一个复制文件的脚本，存档复制的文件而不是删除复制的文件，只留下原始文件和存档文件。

```
#!/bin/bash
#### The following will copy the desired file
cp -r /home/wes/Documents/Hum430 /home/wes/docs

#### Next archives the copied file
tar -zcvf Hum430.tar.gz /home/wes/docs

#### and lastly removes the un-archived copy leaving only the original and the archived file.
rm -r /home/wes/docs
### run the file with ./filename (whatever the file is named) 
```

# web - 如何防止未经授权的计算机访问网站

> ID：13291688
> 
> 赞同：0
> 
> 时间：2012-11-08T15:07:48.680
> 
> 标签：web, security, restrictions

我为一家公司开发了一个 Web 应用程序。由于公司在全国所有州都设有办事处，因此网络应用程序将上传到互联网。

是否可以将访问 Web 应用程序的权限限制为只知道公司使用的计算机；也许通过使用他们的`MAC`地址？

或者有没有一种有效的方法来限制对网站的访问仅限于识别的计算机？感谢您的任何建议。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-08T15:16:08.690

如果公司有专用的 IP 地址池，您可以阻止来自该地址池之外的计算机的访问。否则，您最好的选择是授权有权访问您的应用程序的人员。

# sql - 在 SQL 中使用 EXIST

> ID：13291693
> 
> 赞同：0
> 
> 时间：2012-11-08T15:08:08.387
> 
> 标签：sql, postgresql

如何修改此查询以使用存在？

```
SELECT allele.allele as allele,site.allele_id as allele_id, site.genome_site_id as genome_site_id, popl.popl_id as popl_id,popl.frequency as frequency 
FROM kref.allele as allele 
    join kref.genome_site_allele as site using (allele_id) 
    LEFT JOIN kref.genome_site_allele_popl as popl USING (ref_genome_id, allelism_start, allelism_end, chrom_id, allele_id) 
WHERE ref_genome_id= 2 AND allelism_start=25710014 AND allelism_end=25710015 
    AND chrom_id ='22' 
    AND site.allele_id IN (
        SELECT allele_id 
        from kref.allele 
        where allele IN ('-','C' )
    ) 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-08T15:15:14.247

无论出于何种原因，您可能想要这样，这里有一个使用 EXISTS 的语义等效查询：

```
SELECT allele.allele as allele,site.allele_id as allele_id,
       site.genome_site_id as genome_site_id, popl.popl_id as popl_id,
       popl.frequency as frequency
  FROM kref.allele as allele
  JOIN kref.genome_site_allele as site using (allele_id)
  LEFT JOIN kref.genome_site_allele_popl as popl
      USING (ref_genome_id, allelism_start, allelism_end, chrom_id, allele_id)
 WHERE ref_genome_id= 2 
   AND allelism_start=25710014
   AND allelism_end=25710015
   AND chrom_id ='22'
   AND EXISTS (
     SELECT TRUE
     FROM kref.allele
     WHERE allele IN ('-','C')
     AND allele_id = site.allele_id
   ) 
```

# xml - XML 到制表符分隔的文本

> ID：13291694
> 
> 赞同：7
> 
> 时间：2012-11-08T15:08:10.287
> 
> 标签：xml, xslt

需要 XML、XSLT 专家的帮助。

我有 2 个以 XML 格式从系统导出的示例记录，如下所示。我喜欢使用 XSLT 将数据转换为制表符分隔的文本，如下所示[https://docs.google.com/spreadsheet/ccc?key=0AgOV9Or8-zdzdG8yWTlRb1hWeUhzZG02MHA5TGxqR2c](https://docs.google.com/spreadsheet/ccc?key=0AgOV9Or8-zdzdG8yWTlRb1hWeUhzZG02MHA5TGxqR2c)

对于 XML 新手来说，转换有点复杂。如果有人可以通过创建 XSL 文件来帮助我，我将不胜感激。

谢谢。

```
<?xml version="1.0" encoding="ISO-8859-1" standalone="yes"?>
<Results productTitle="XYZ DB/TextWorks" productVersion="11.00" xmlns:inm="http://www.xyz.com/webpublisher/query">
<Recordset setCount="2">
<Record setEntry="0">
<ID>282</ID>
<TIL>TIL value</TIL>
<SET>SET value</SET>
<NOA>NOA value</NOA>
<NOQ>NOQ value 1, NOQ value 2, NOQ value 3, NOQ value 4</NOQ>
<LAN>LAN value</LAN>
<CAL>CAL value</CAL>
<INP>INP value</INP>
<SUT>SUT value</SUT>
<SUG>SUG value</SUG>
<EDI>EDI value</EDI>
<MEP />
<NOG>NOG value</NOG>
<IDX>IDX value</IDX>
<SAU />
<Database>Database value</Database>
<Format>Format value 1</Format>
<Format>Format value 2</Format>
<Format>Format value 3</Format>
<Format>Format value 4</Format>
<DES />
<TYP />
<UTI />
<SUR />
<DATE />
<SystemID>530</SystemID>
</Record>
<Record setEntry="1">
<ID>373</ID>
<TIL>TIL value</TIL>
<SET>SET value</SET>
<NOA>NOA value</NOA>
<NOQ>NOQ value 1, NOQ value 2, NOQ value 3, NOQ value 4</NOQ>
<LAN>LAN value 1</LAN>
<LAN>LAN value 2</LAN>
<LAN>LAN value 3</LAN>
<CAL>CAL value</CAL>
<INP>INP value</INP>
<SUT>SUT value</SUT>
<SUG />
<EDI>EDI value</EDI>
<MEP />
<NOG>NOG value</NOG>
<IDX>IDX value</IDX>
<SAU />
<Database>Database value</Database>
<Format>Format value</Format>
<DES />
<TYP />
<UTI />
<SUR />
<DATE />
<SystemID>611</SystemID>
</Record>
</Recordset>
</Results> 
```

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2012-11-08T15:22:35.087

像这样的东西应该是一个很好的起点

```
<?xml version="1.0" encoding="UTF-8"?>
<xsl:stylesheet version="1.0" xmlns:xsl="http://www.w3.org/1999/XSL/Transform" xmlns:xs="http://www.w3.org/2001/XMLSchema" exclude-result-prefixes="xs">
<xsl:output method="xml" encoding="UTF-8" indent="yes"/>
<xsl:template match="//Recordset">
<xsl:for-each select="Record">
        <xsl:value-of select="ID"/>
        <!-- tab char -->
        <xsl:text>&#x9;</xsl:text>
        <xsl:value-of select="TIL"/>
        <xsl:text>&#x9;</xsl:text>
        <xsl:value-of select="SET"/>
        <xsl:text>&#x9;</xsl:text>
        <!-- all other fields... -->
        <xsl:value-of select="SystemID"/>
        <!-- line feed char -->
        <xsl:text>&#10;</xsl:text>
        </xsl:for-each>
  </xsl:template>
</xsl:stylesheet> 
```

# matlab - 如何将TDMS文件导入MATLAB环境？

> ID：13291695
> 
> 赞同：2
> 
> 时间：2012-11-08T15:08:09.053
> 
> 标签：matlab

[这是](http://www.mathworks.cn/matlabcentral/fileexchange/28771-converttdms-v9)程序的链接。

[这是](http://vdisk.weibo.com/s/hBvz5)原始波形的链接。

[这是](http://vdisk.weibo.com/s/hBvyA)导入波形的链接。

[这是](http://vdisk.weibo.com/s/hBvyP)比例。

奇怪的是，导入的波形和原来的波形一模一样，本来以为用原来的数据会得到一个标量比。/导入的数据，没想到比例点这么分散。有没有人可以告诉我为什么？或者向我推荐一个导入 TDMS 文件的程序。

# android - Android IllegalArgumentException：已添加

> ID：13291697
> 
> 赞同：8
> 
> 时间：2012-11-08T15:08:17.273
> 
> 标签：android, facebook, dalvik

我创建了一个使用`android-support-v4.jar`. 现在，当我向该项目添加一个 android 库时，我在构建时收到此错误：

```
UNEXPECTED TOP-LEVEL EXCEPTION:
java.lang.IllegalArgumentException: already added: Landroid/support/v4/accessibilityservice/AccessibilityServiceInfoCompat$AccessibilityServiceInfoIcsImpl;
[2012-11-08 16:02:31 - ShoppingApp Android] Conversion to Dalvik format failed with error 1 
```

我要添加的库是 Facebook SDK，它也恰好使用 android-support-v4.jar。我发现这个错误的唯一解决方案是从一个构建路径中删除库，但我不能这样做 - 当我选择这个 jar 时，所有选项都被禁用。

这是完整的错误跟踪：

```
UNEXPECTED TOP-LEVEL EXCEPTION:
java.lang.IllegalArgumentException: already added: Landroid/support/v4/accessibilityservice/AccessibilityServiceInfoCompat$AccessibilityServiceInfoIcsImpl;
    at com.android.dx.dex.file.ClassDefsSection.add(ClassDefsSection.java:123)
    at com.android.dx.dex.file.DexFile.add(DexFile.java:163)
    at com.android.dx.command.dexer.Main.processClass(Main.java:486)
    at com.android.dx.command.dexer.Main.processFileBytes(Main.java:455)
    at com.android.dx.command.dexer.Main.access$400(Main.java:67)
    at com.android.dx.command.dexer.Main$1.processFileBytes(Main.java:394)
    at com.android.dx.cf.direct.ClassPathOpener.processArchive(ClassPathOpener.java:245)
    at com.android.dx.cf.direct.ClassPathOpener.processOne(ClassPathOpener.java:131)
    at com.android.dx.cf.direct.ClassPathOpener.process(ClassPathOpener.java:109)
    at com.android.dx.command.dexer.Main.processOne(Main.java:418)
    at com.android.dx.command.dexer.Main.processAllFiles(Main.java:329)
    at com.android.dx.command.dexer.Main.run(Main.java:206)
    at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
    at sun.reflect.NativeMethodAccessorImpl.invoke(Unknown Source)
    at sun.reflect.DelegatingMethodAccessorImpl.invoke(Unknown Source)
    at java.lang.reflect.Method.invoke(Unknown Source)
    at com.android.ide.eclipse.adt.internal.build.DexWrapper.run(DexWrapper.java:180)
    at com.android.ide.eclipse.adt.internal.build.BuildHelper.executeDx(BuildHelper.java:703)
    at com.android.ide.eclipse.adt.internal.build.builders.PostCompilerBuilder.build(PostCompilerBuilder.java:577)
    at org.eclipse.core.internal.events.BuildManager$2.run(BuildManager.java:728)
    at org.eclipse.core.runtime.SafeRunner.run(SafeRunner.java:42)
    at org.eclipse.core.internal.events.BuildManager.basicBuild(BuildManager.java:199)
    at org.eclipse.core.internal.events.BuildManager.basicBuild(BuildManager.java:321)
    at org.eclipse.core.internal.events.BuildManager.build(BuildManager.java:396)
    at org.eclipse.core.internal.resources.Project$1.run(Project.java:618)
    at org.eclipse.core.internal.resources.Workspace.run(Workspace.java:2344)
    at org.eclipse.core.internal.resources.Project.internalBuild(Project.java:597)
    at org.eclipse.core.internal.resources.Project.build(Project.java:124)
    at com.android.ide.eclipse.adt.internal.project.ProjectHelper.doFullIncrementalDebugBuild(ProjectHelper.java:1000)
    at com.android.ide.eclipse.adt.internal.launch.LaunchConfigDelegate.launch(LaunchConfigDelegate.java:147)
    at org.eclipse.debug.internal.core.LaunchConfiguration.launch(LaunchConfiguration.java:855)
    at org.eclipse.debug.internal.core.LaunchConfiguration.launch(LaunchConfiguration.java:704)
    at org.eclipse.debug.internal.ui.DebugUIPlugin.buildAndLaunch(DebugUIPlugin.java:1047)
    at org.eclipse.debug.internal.ui.DebugUIPlugin$8.run(DebugUIPlugin.java:1251)
    at org.eclipse.core.internal.jobs.Worker.run(Worker.java:53)
[2012-11-08 16:02:31 - ShoppingApp Android] Dx 1 error; aborting
[2012-11-08 16:02:31 - ShoppingApp Android] Conversion to Dalvik format failed with error 1 
```

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-11-08T15:12:18.400

构建过程会检查每个 jar 的校验和，如果 jar 被找到两次并且 jar 具有不同的校验和，则会引发此错误。

这意味着您有两次相同的库，但有两个不同版本的 jar 文件，这没有任何意义。

如果你添加了一个库项目，你的应用中不需要支持库，你可以删除它，因为它是从项目库继承的。

您可能希望将支持库的 jar 更新到库项目中。

编辑：您不再使用构建路径，您的库文件夹应该是“libs”，它将在项目中显示为“Android 依赖项”。然后，您从应用程序的 libs 文件夹中删除 jar，并可能从库项目中更新该 jar。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-14T09:13:53.050

此错误意味着您的构建中包含不止一次的某些类。通过取消选中项目配置/Java 构建路径/导出中的“导出 maven decencies”，我已经解决了与 eclipse 中的 mvn 依赖项完全相同的问题。

# python - 大量行的 MySQLdb 错误的 executemany

> ID：13291700
> 
> 赞同：5
> 
> 时间：2012-11-08T15:08:30.427
> 
> 标签：python, mysql, executemany

我目前正在运行一个脚本，使用 execute many 函数将值（元组列表）插入 MySQL 数据库。当我使用少量行（`1000）时，脚本运行良好。

当我使用大约 40,000 行时，我收到以下错误：

```
cursor.executemany( stmt, trans_frame)
Traceback (most recent call last):
  File "C:\Python27\lib\site-packages\IPython\core\interactiveshell.py", line 2538, in run_code
    exec code_obj in self.user_global_ns, self.user_ns
  File "<ipython-input-1-66b44e71cf5a>", line 1, in <module>
    cursor.executemany( stmt, trans_frame)
  File "C:\Python27\lib\site-packages\MySQLdb\cursors.py", line 253, in executemany
    r = self._query('\n'.join([query[:p], ',\n'.join(q), query[e:]]))
  File "C:\Python27\lib\site-packages\MySQLdb\cursors.py", line 346, in _query
    rowcount = self._do_query(q)
  File "C:\Python27\lib\site-packages\MySQLdb\cursors.py", line 310, in _do_query
    db.query(q)
OperationalError: (2006, 'MySQL server has gone away') 
```

有什么建议么？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-08T15:37:42.520

您可以尝试[仅为一个会话](https://stackoverflow.com/a/8062996/190597)`max_allowed_packet`设置参数：

```
sql ='SET SESSION max_allowed_packet=500M'
cursor.execute(sql)
sql = ...
args = ...
cursor.executemany(sql, args) 
```

如果这可行，您可以保留代码原样，或更改您的 my.cnf 文件（知道这可以解决 executemany 问题）。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2016-11-15T09:20:09.457

```
sql ='SET GLOBAL max_allowed_packet=500*1024*1024'
cursor.execute(sql) 
```

# java - ActionBar 导航列表 - 在多个活动中使用相同的 ActionBar；在一处初始化

> ID：13291705
> 
> 赞同：4
> 
> 时间：2012-11-08T15:08:50.180
> 
> 标签：java, android, android-actionbar, actionbarsherlock

我发现自己在 3 个单独的活动中为我的 actionBar (actionBarSherlock) 列表重写了相同的代码。所有 3 都使用相同的 actionBar，它有 3 个启动活动 #1、#2、#3 的项目。

```
getSupportActionBar().setNavigationMode(ActionBar.NAVIGATION_MODE_LIST);
ArrayAdapter<CharSequence> list = ArrayAdapter
    .createFromResource(this, R.array.action_list, android.R.layout.simple_dropdown_item_1line);
list.setDropDownViewResource(android.R.layout.simple_spinner_dropdown_item);

getSupportActionBar().setListNavigationCallbacks(list, this);
getSupportActionBar().setListNavigationCallbacks(adapter, this);
getSupportActionBar().setSelectedNavigationItem(position); 
```

我有 2 个问题：

1.  在这种情况下，我应该使用 1 个活动和 3 个片段吗？我的活动是列表视图、地图视图和表单视图。我不确定这是否是使用 Fragments 的正确案例，因为在我的案例中，这些视图中的每一个都使用整个屏幕。

2.  使用 3 个不同的活动，我可以创建一个新类，其唯一目的是使用上面的代码为我配置我的 ActionBar，以便初始化代码只在一个地方？

就像是：

```
public class setupActionBar {
    private ActionBar myBar;
    public setupActionBar(ActionBar myBar){
        this.myBar = myBar;
        //Do Initialization on myBar;
    }

    public ActionBar getMyBar(){
        return myBar;
    }
} 
```

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-11-08T16:44:40.640

观看[此视频](http://www.youtube.com/watch?v=C8QIubc_9CY&feature=context-shows&list=SL&safety_mode=true&persist_safety_mode=1&safe=active)。他创建了一个`BaseActivity`子类化程序中使用的所有活动。巧妙的小技巧；）

你可以稍后感谢我 :D

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-10T01:53:03.027

使用@aindurti 建议的优秀教程，我能够使用扩展 SherlockActivity 的 BaseActivity，然后使用扩展 BaseActivity 的 Activity1 来完成这项工作。

但是，我遇到了奇怪的行为。当我从微调器中选择 Activity #3 时，它会立即返回到 Activity#1，`onNavigationItemSelected`并被调用 3 次。对代码的想法？我应该`onNavigationItemSelected`进入每个活动吗？我认为这将是一种简洁而统一的方式。

在 BaseActivity.java 中：

```
@Override
public boolean onNavigationItemSelected(int itemPosition, long itemId) {
    //Tell user the FROM and TO navigationIndex   
    Toast.makeText(getApplicationContext(), "Selected: " + itemPosition + " from" + currentNavigationIndex, Toast.LENGTH_SHORT).show();

    Intent myIntent;
    if(itemPosition != currentNavigationIndex){
        if(itemPosition == 0){ //Activity#1 Selected
            myIntent = new Intent(BaseActivity.this, Activity1.class);
        } else if (itemPosition == 1){ //Activity#2 Selected
            myIntent = new Intent(BaseActivity.this, Activity2.class);
        } else if (itemPosition == 2){ //Activity#3 Selected
            myIntent = new Intent(BaseActivity.this, Activity3.class);
        }
        BaseActivity.this.startActivity(myIntent);
    }
    return true;
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-08T16:24:24.763

有几种方法可以做到这一点。你可以在某处创建一个静态函数来进行初始化，或者你可以为一个活动创建一个基类。

例如：

```
public class Bob
{
   public static void dance(Dance someDance)
   {
      someDance.doBadDance();
   }
} 
```

您可以将其与 Bob.dance(); 任何地方。不确定课程是否必须是最终的

# asp.net - 新邮件服务器的邮件发送问题

> ID：13291706
> 
> 赞同：0
> 
> 时间：2012-11-08T15:08:52.223
> 
> 标签：asp.net, .net, email, sendmail

我用于发送邮件我的 smtp 服务器是“xxx.xx.x”，它工作正常。但现在我正在更改电子邮件的邮件服务器。我正在使用新的邮件 smtp 服务器 ip 地址是“xxxxxxx.xxx.xxx”，在这种情况下会收到类似“服务器拒绝一个或多个收件人地址。服务器响应是：554 5.7.1：客户端主机”的错误

我正在使用下面的代码

将电子邮件变暗为 MailMessage = 新 MailMessage

```
 eMail.To = "xxxxxxx"
    eMail.BodyFormat = MailFormat.Html
    eMail.From = "xxxxxxxx"
    eMail.Subject = "intermedia mail test using 127.0.0.1"
    eMail.Body = sMsg
   SmtpMail.SmtpServer = "xxxxxxx 'AppSettings("MailServer")
    SmtpMail.Send(eMail) 
```

提前致谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-13T14:47:03.053

您收到此错误是因为邮件服务器配置为仅从某些域发送邮件，或者客户端不在其接受的发件人列表中。

您需要与邮件服务器管理员联系，并要求他们允许应用程序所在机器的 IP 地址或使用正确域中的地址发送邮件。

[http://www.ietf.org/rfc/rfc1893.txt](http://www.ietf.org/rfc/rfc1893.txt)

# sql-server-2008 - 如何等待查询返回结果？

> ID：13291710
> 
> 赞同：2
> 
> 时间：2012-11-08T15:09:00.120
> 
> 标签：sql-server-2008, tsql, sql-server-2008-r2

是否可以让查询等到它有结果而不是立即返回一个空的结果集。例如：

```
SELECT Column1 FROM Table1 
```

如果`Table1`为空，则查询将返回空结果集。但是，我希望它不返回，而是等到至少一行可用，最好有某种超时。如果可能的话，我宁愿在不涉及 Service Broker 的情况下这样做。

**澄清：**

在服务器上启用了 CLR，但调用来自独立于平台的 C++ 程序，通过 SQLAPI++/ODBC。因此，没有 C#/.NET 技巧是可能的。目标是调用存储过程，指定超时并且在数据可用（并由存储过程返回）或指定的超时到期之前不返回。

例如：

```
EXEC GetData @Timeout=2000 -- Wait for upto 5000 milliseconds for a result set to be 
                           -- available 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-08T16:41:01.137

丑陋，但有效。只要正在执行的查询是低成本的，例如等待行出现在一个空表中，这不应该是太多的资源猪。

```
declare @Timeout as Int = 5000 -- Milliseconds.

-- Start and end times.
declare @Now as DateTime = GetDate()
declare @TimeoutExpiration as DateTime = DateAdd( ms, @Timeout, @Now )

-- Set the delay interval to the smaller of  @Timeout / 10   or   1 second.
declare @DelayInterval as Time = DateAdd( ms, @Timeout / 10, 0 )
if @DelayInterval > '00:00:01.000'
  set @DelayInterval = '00:00:01.000'
declare @WaitForDelay as VarChar(12) = Cast( @DelayInterval as VarChar(12) )  -- WaitFor insists on a truncated string for the delay.

select @Timeout as 'Timeout (ms)', @Now as 'Now', @TimeoutExpiration as 'TimeoutExpiration', @DelayInterval as 'DelayInterval'

declare @Result as Table ( Foo Int ) -- Modify to match the schema of your expected results.

-- Execute the query in a loop until either a result is returned or the timeout expires.
declare @RowCount as Int = 0
declare @Iterations as Int = 0
while @TimeoutExpiration >= GetDate() and @RowCount = 0
  begin
  -- Randomly decide to insert a row into the results.  (Replace with your query.)
  insert into @Result
    select 42 as Foo
      where Rand() > 0.8
  -- Handle the query result.
  set @RowCount = @@RowCount
  if @RowCount = 0
    waitfor delay @WaitForDelay
  set @Iterations = @Iterations + 1
  end

-- Return the result.
select @Iterations as 'Iterations' -- Just for demonstration purposes.
select *
  from @Result 
```

# java - 强制 maven 在非空违规情况下构建失败

> ID：13291713
> 
> 赞同：4
> 
> 时间：2012-11-08T15:09:05.027
> 
> 标签：java, maven, findbugs

我有下面的简单代码，用于使用 maven 测试 findbugs NonNull 注释。

我执行“mvn clean install site”，得到一个目录 target/site/css 和 target/site/images，但仅此而已。我期待收到一份报告，说 println(null) 违反了 NonNull 条件。

我需要做什么才能获得该报告？

另外，如果有 NonNull 违规，有没有办法防止“mvn clean install”成功？

* * *

注意：我知道我可以通过 Sonar 获得此类报告；但是，如果出现此类错误，我希望“mvn clean install”失败，之后无需使用可选的声纳工具。

* * *

src/main/java/test/Hello.java

```
package test;
import edu.umd.cs.findbugs.annotations.NonNull;
public class Hello {
    static public void print(@NonNull Object value) {
        System.out.println("value: " + value.toString());
    }

    static public void main(String[] args) {
        if (args.length > 0) {
            print(args[0]);
        } else {
            print(null);
        }
    }
} 
```

和 pom.xml 文件：

```
<?xml version="1.0" encoding="UTF-8"?>
<project xmlns="http://maven.apache.org/POM/4.0.0"
         xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
         xsi:schemaLocation="http://maven.apache.org/POM/4.0.0 http://maven.apache.org/xsd/maven-4.0.0.xsd">
  <modelVersion>4.0.0</modelVersion>

  <groupId>hello</groupId>
  <artifactId>hello</artifactId>
  <version>1.0</version>

  <dependencies>
    <dependency>
      <groupId>net.sourceforge.findbugs</groupId>
      <artifactId>annotations</artifactId>
      <version>1.3.2</version>
    </dependency>
    <dependency>
      <groupId>net.sourceforge.findbugs</groupId>
      <artifactId>jsr305</artifactId>
      <version>1.3.7</version>
    </dependency>
  </dependencies>

  <reporting>
    <plugins>
      <plugin>
        <groupId>org.codehaus.mojo</groupId>
        <artifactId>findbugs-maven-plugin</artifactId>
        <version>2.5.2</version>
      </plugin>
    </plugins>
  </reporting>
</project> 
```

## ---

**更新，解决方案**

解决方案，基于 Augusto 的回答：将其添加到项目下的 pom.xml 文件中：

```
 <build>
    <plugins>
      <plugin>
        <groupId>org.apache.maven.plugins</groupId>
        <artifactId>maven-compiler-plugin</artifactId>
        <configuration>
          <source>1.6</source>
          <target>1.6</target>
        </configuration>
      </plugin>
      <plugin>
        <groupId>org.codehaus.mojo</groupId>
        <artifactId>findbugs-maven-plugin</artifactId>
        <version>2.5.2</version>
        <configuration>
          <includeTests>true</includeTests>
        </configuration>
        <executions>
          <execution>
            <phase>compile</phase>
            <goals>
              <goal>check</goal>
            </goals>
          </execution>
          <execution>
            <id>findbugs-test-compile</id>
            <phase>test-compile</phase>
            <goals>
              <goal>check</goal>
            </goals>
          </execution>
        </executions>
      </plugin>
    </plugins>
  </build> 
```

这样，如果存在 NonNull 违规，“mvn clean install”将失败。

报告对我不起作用，因为我使用的是 maven 3，并且报告功能在 maven 3 中发生了变化（现在它使用普通的 maven 插件）

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-08T16:52:22.303

大卫，

您的问题的答案在[findbugs maven 插件文档](http://gleclaire.github.io/findbugs-maven-plugin/)中（请参阅 findbugs:check）

# ios - 在哪里可以找到 UIButton 的光泽背景图像？

> ID：13291714
> 
> 赞同：1
> 
> 时间：2012-11-08T15:09:09.323
> 
> 标签：ios, user-interface, graphics, uibutton

我想在我的 iPhone 应用程序中有一个有光泽的按钮（采用黑色工具栏的样式）。但是，众所周知，这些并不包含在 SDK 中。

所以我想知道是否有人知道在哪里准备使用按钮图像。

我当然已经搜索过，但我找不到任何有用的图形。我对按钮图形的要求是：

*   应该与黑色工具栏/标题栏中使用的 Apple 风格相匹配
*   应该有足够高的分辨率用于视网膜设备
*   应该可以用于商业用途（不需要是免费的）

我还查看了一些编程解决方案，例如 Michael Heyeck 的[Shiny Red Buttons](http://www.mlsite.net/blog/?page_id=372)，它们做得很好。但是，我希望有一个简单的 png 文件用作按钮背景图像。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-08T15:13:14.920

你可以试试[这里](http://maniacdev.com/2010/07/cre/)的链接——它可能会有所帮助。

# c#-2.0 - 发生错误：System.NotSupportedException

> ID：13291715
> 
> 赞同：0
> 
> 时间：2012-11-08T15:09:11.633
> 
> 标签：c#-2.0

我有一个网站已经运行了将近 6 个月。网站上有一个部分，用户最多可以上传 5 个属性图像。对于每 10 个用户，我有一个用户会遇到 System.NotSupportedException 问题。由于并非所有用户都发生这种情况，而且我似乎无法重现此错误，因此我不确定如何找到解决方案。查看错误消息，我认为这可能与他们机器上的网络配置有关，但我不能 100% 确定。任何想法/建议将不胜感激。

这是上传图像的代码。

```
private void UploadPhotos()
{
    Stream objStream;
    HttpFileCollection uploads = HttpContext.Current.Request.Files;
    for (int i = 0; i < uploads.Count; i++)
    {
        if (uploads[i].ContentLength == 0)
            continue;
        try
        {
            string fileName = Path.Combine(image + "-" + i.ToString(), uploads[i].FileName);
            //uploads[i].SaveAs(Server.MapPath("~/ExtendedImages/") + fileName);
            using (new Impersonator("serverusername", @"serverlocation", "serverpassword!"))
            {
                try
                {
                    uploads[i].SaveAs(@"serverlocation" + fileName);
                }
                catch (NotSupportedException ex)
                {
                    uploads[i].SaveAs(Server.MapPath("~/ExtendedImages/") + fileName);
                }
            }
            //uploads[i].SaveAs(Server.MapPath("~/ExtendedImages/") + fileName);
            byte[] myimage = new byte[uploads[i].ContentLength];
            objStream = uploads[i].InputStream;
            objStream.Read(myimage, 0, uploads[i].ContentLength);

            System.Drawing.Image Image1;
            System.Drawing.Image Thumbnail;

            Image1 = new Bitmap(objStream);

            Image1.RotateFlip(System.Drawing.RotateFlipType.Rotate180FlipNone);
            Image1.RotateFlip(System.Drawing.RotateFlipType.Rotate180FlipNone);

            int NewWidth = 380;
            int MaxHeight = 400;

            if (Image1.Width <= NewWidth)
            {
                NewWidth = Image1.Width;
            }

            int NewHeight = Image1.Height * NewWidth / Image1.Width;

            if (NewHeight > MaxHeight)
            {
                NewWidth = Image1.Width * MaxHeight / Image1.Height;
                NewHeight = MaxHeight;
            }
            System.Drawing.Image NewImage = Image1.GetThumbnailImage(NewWidth, NewHeight, null, IntPtr.Zero);
            Thumbnail = Image1.GetThumbnailImage(100, 80, null, IntPtr.Zero);
            MemoryStream ms = new MemoryStream();
            MemoryStream ms2 = new MemoryStream();
            Thumbnail.Save(ms, System.Drawing.Imaging.ImageFormat.Jpeg);
            NewImage.Save(ms2, System.Drawing.Imaging.ImageFormat.Jpeg);
            Photos photos = new Photos();
            photos.ID = HomeTourSession.HometourName;
            photos.AdId = (int)Session["adid"];
            photos.FullPhoto = ms2.ToArray();
            photos.ThumbnailPhoto = ms.ToArray();
            photos.AlternateText = "";
            photos.Insert();
        }
        catch (Exception exp)
        {
            throw new Exception("Error occured: " + exp);
        }
    }
} 
```

这是一些用户遇到的错误。

> 发生错误：System.NotSupportedException：不支持给定路径的格式。在 System.Security.Util.StringExpressionSet.CanonicalizePath(String path, Boolean needFullPath) 在 System.Security.Util.StringExpressionSet.CreateListFromExpressions(String[] str, Boolean needFullPath) 在 System.Security.Permissions.FileIOPermission.AddPathList(FileIOPermissionAccess 访问， System.Security.Permissions.FileIOPermission..ctor（FileIOPermissionAccess 访问，AccessControlActions 控件，String[] pathList，布尔 checkForDuplicates，布尔 needFullPath）在 System.IO .FileStream.Init(String path, FileMode mode, FileAccess access, Int32 rights, Boolean useRights, FileShare share,

# iphone - 在另一个应用程序中打开本机 ios 应用程序？

> ID：13291717
> 
> 赞同：0
> 
> 时间：2012-11-08T15:09:22.013
> 
> 标签：iphone, objective-c, ios, xcode

我有这个愚蠢的问题。

1.  有没有办法在应用程序的视图控制器中打开另一个 ios 应用程序。
2.  我知道如果我们有 url 架构并且调用应用程序进入后台并且被调用应用程序进入后台，我们可以打开另一个 Ios 应用程序。

有什么办法吗？？我刚刚有一个梦想，所以我问我们可以做到吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-08T21:06:27.220

您可以使其在越狱设备上运行。

但是如果你想调用像 facebook 或 twitter 这样的原生社交应用程序，你应该使用这个代码。它有效并且苹果批准了它。

```
NSURL *fbNativeAppURL = [NSURL URLWithString:@"fb://"];

    if ( [[UIApplication sharedApplication] canOpenURL:fbNativeAppURL])
    {
        [[UIApplication sharedApplication] openURL:fbNativeAppURL];
    } 
```

或者

```
NSURL *twNativeAppURL = [NSURL URLWithString:@"twitter://"];

    if ( [[UIApplication sharedApplication] canOpenURL:twNativeAppURL])
    {
        [[UIApplication sharedApplication] openURL:twNativeAppURL];
    } 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-08T15:11:23.397

使用 iPhone SDK 无法做到这一点。您可以通过使用私有 API 来做到这一点。

# java - 通过反射 API 在 ClassLoaders 之间传递参数

> ID：13291724
> 
> 赞同：0
> 
> 时间：2012-11-08T15:09:38.637
> 
> 标签：java, reflection, classloader

我正在使用自定义类加载器来创建和返回类的实例，这似乎可以正常工作，但是当我尝试调用方法（通过反射 API）并传入自定义对象时，如下所述，我得到`NoSuchMethodException`：

假设自定义类加载器创建并返回一个实例，如下所示：

```
Object obj = customClassLoader.load(String className,Class[] paramTypes,Object[] param) 
```

然后我调用一个方法（通过反射）并传入一个自定义对象：

注意：这是导致错误的行

```
Method m = obj.getClass.getDeclaredMethod("mName",new Class[]{aCustomObject.class}) 

m.invoke(obj,new Object[]{new CustomObject() }) 
```

我对可能导致异常的原因感到困惑，因为确实存在采用指定自定义对象的方法，我已经通过使用反射列出所有方法来确认这一点。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-08T22:14:23.107

您的自定义加载程序的 load() 方法如何实例化它要返回的对象？也许`NoSuchMethodException`在试图找到正确的构造函数时出现？

这个例子似乎可以正常工作：

```
package com.pholser;

import java.lang.reflect.Method;

public class ClassLoading {
    public static class CustomLoader extends ClassLoader {
        public Object load(String className, Class<?>[] paramTypes, Object[] params) throws Exception {
            Class<?> loaded = loadClass(className);
            return loaded.getConstructor(paramTypes).newInstance(params);
        }
    }

    public static class ACustomObject {
    }

    public void foo(ACustomObject a) {
        System.out.println("foo");
    }

    public static Object newCustomObject() throws Exception {
        return new CustomLoader().load("com.pholser.ClassLoading$ACustomObject", new Class<?>[0], new Object[0]);
    }

    public static void main(String[] args) throws Exception {
        ClassLoading obj = new ClassLoading();

        Method m = obj.getClass().getDeclaredMethod("foo", ACustomObject.class);

        m.invoke(obj, newCustomObject());
    }
} 
```

# security - 我的信用卡页面安全吗？保障查询

> ID：13291726
> 
> 赞同：1
> 
> 时间：2012-11-08T15:09:46.547
> 
> 标签：security, logic, checkout

https：xyz dot com/authenticate/cc.php

这是我注册的第 3 页……我的会员在此输入他们的信用卡。这与我的 authorize.net 帐户相关联。

我最近注意到的一件事是，只需输入 URL 即可单独访问此页面。没有必要的预 URL 可以引导它。这似乎不安全，但无论是否有人想滥用它，他们都可以通过注册过程并继续提交错误的 CC 号码.. 花钱对吗？

我不记得我们是否对它设置了 IP 限制，或者如果这甚至是 100% 保护。我很确定我们做了一些事情，如果他们使用他们的号码（临时存储）输入万事达卡并且它被退回为无效它将匹配并且不允许他们继续输入错误的 16 位数号码。我是否应该让该页面可访问而无需特定页面允许访问并担心 IP 限制？难道不能有人只是继续切换他们的 ip 并使用不正确的 CC 或假的 CC 提交此页面吗？

考虑到我/失去我的商家帐户可能会面临风险，保护此页面的正确方法是什么？

先感谢您

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-10T15:01:19.107

奇怪的是，您允许直接访问流程的第三步，用户名、地址等所有其他数据在哪里？

这是我要做的一些想法，一个完全安全的系统（可能不存在）将比我的简单步骤复杂得多。

**请注意**，您可能希望首先允许用户注册一些您可以*知道*他们是谁的信息（经过验证的电子邮件、经过验证的电话号码等），然后才进行信用卡操作，如果他们不断输入错误或无效的号码，您可以执行其他操作，例如将他们列入黑名单、打电话给他们、侮辱他们等。

**note 2**我花了很长时间写这个，我越读越想它似乎越糟糕，但既然已经写了，我还是会发布它。

开始前的一些注意事项：

*   只有一个地址，例如/authenticate/auth.php
*   该过程具有“状态”，并且根据此，它将显示/执行不同的操作。
*   对于不同的州，还有其他额外的文件，*具体*取决于州。
*   进程启动后，会创建一个会话并将其与用户 IP、进程状态和有关用户的任何其他可识别信息（例如“User-Agent”）相关联，这些数据将保存在服务器中。
*   似乎您想使用不同的页面显示不同的状态，所以会是这样。但实际上我会在一个页面中使用 ajax 调用。
*   没有**可疑**IP 地址的黑名单（正常或错误或完全错误的请求太多），如果需要可以添加，但复杂性会增加。你可能想也可能不想这样做，也许一个验证码就足够了，但是..
*   在某些情况下没有**验证**码可能会有所帮助，但我在此处描述的会话处理可能需要更改。
*   没有您可能想做的电子邮件验证**。**

假设进程状态是 ask_name、ask_address、ask_cc 等...

因此，当对 auth 页面 (/authenticate/auth.php) 有任何请求时，我们可以这样做：

> 1 如果“Referer”不是来自可能的流程启动器之一（主页等）或此页面（/authenticate/auth.php），我们*将重定向*到主页。**结束**。

第一步可以避免人们直接写地址或来自不受信任的页面。

> 2 如果没有此请求的会话信息：
> 
> 2.1 如果有'user_name'参数并且'Referer'是这个页面（/authenticate/auth.php）
> 
> 2.1.1 如果该用户名已经注册，则显示（包括，不重定向）'ask_name.php'，并附加“用户已注册”的额外通知。**结束**。
> 
> 2.1.2 为该用户创建一个会话，将其与它的IP、用户代理等、其他数据相关联。
> 
> 2.1.3 设置状态为ask_address（第二个）并显示'ask_address.php'。**结束**。
> 
> 2.2 Else（无参数或'Referer'错误）
> 
> 2.2.1 显示“ask_name.php”。**结束**。

第二步显示第一个屏幕（ask_user）或第二个屏幕（ask_name），它会延迟会话的创建，直到我们确定用户想要做一些真实的事情。

它有几个问题：

*   一些用户（或程序）在没有会话但使用“用户名”的情况下连续发送请求，因此迫使您始终检查用户是否有效，并且可能会减慢速度。这可以使用几种不同的技术来避免，例如使用验证码或将某些 IP 列入黑名单一段时间。
*   有可能一个用户使用不存在的“user_name”启动该过程，但他很慢并且需要一些时间来完成该过程，而在这种情况下，第二个用户开始并以相同的方式完成该过程'user_name'，所以当第一个用户要完成时，它会在最后一步失败。这可以通过几种不同的技术来避免，这些技术留作练习。

> 3 如果有这个请求的会话信息（这是上一步的*else*）
> 
> 3.1 如果referer不是这个页面或者服务器中存储的IP和当前请求不一样或者其他一些数据比如User Agent不同或者状态无效（不在状态列表中），删除会话ID请求（因此浏览器将其删除）并显示“ask_name.php”以及额外的通知“看起来您的设备已更改！！！”。**结束**。
> 
> 3.2“包含”*状态*页面：
> 
> 3.2.1 如果参数通过且正确，则将状态设置为*-next-state*，并为其显示页面。如果是最后一个状态，做一些适合最后一个状态的事情。**结束**。
> 
> 3.2.2 显示此状态的相同页面，并显示错误消息供用户重试。**结束**。

最后一步尝试确保请求不是来自其他计算机和/或会话密钥被盗。

# java - Android 图像处理 - 应用过滤器

> ID：13291735
> 
> 赞同：0
> 
> 时间：2012-11-08T15:10:10.750
> 
> 标签：java, android, bitmap, android-image, colormatrix

我正在尝试将图像过滤器应用于 Android 中的位图。我所有的滤镜都存储在 Photoshop 曲线 (.crv) 文件中，但这并不重要。

根据[https://raw.github.com/WeemoApps/filteriser/master/iOS/filteriser/filteriser/UIImage+Filterise.m](https://raw.github.com/WeemoApps/filteriser/master/iOS/filteriser/filteriser/UIImage+Filterise.m)（Objective-C 代码），可以使用拉格朗日多项式因子对我的图像“按像素”进行着色：

```
newRValue = -0.000093*data[index]*data[index]*data[index]+0.031603*data[index]*data[index]-0.992382*data[index];
newGValue = -0.000058*data[index+1]*data[index]*data[index+1]+0.021061*data[index+1]*data[index+1]-0.620401*data[index+1];
newBValue = 0.000013*data[index+2]*data[index+2]*data[index+2]-0.004366*data[index+2]*data[index+2]+1.275243*data[index+2]; 
```

在 Java 上的 Android 中做同样的事情并不难，但它太慢了。我正在寻找快速的东西（也许`ColorMatrix`像下面的代码一样工作）。

感谢帮助。

# jboss - JBoss AS7：如何使用 JMX 读取数据源池统计信息

> ID：13291736
> 
> 赞同：1
> 
> 时间：2012-11-08T15:10:10.513
> 
> 标签：jboss, statistics

在 JBossAS4 中，MBean jboss.jca.ManagedConnectionPool 允许访问数据源的已使用连接数和可用连接数等。这个 MBean 在 JBossAS7 中不再可用。

如何在 JBossAS7 中访问这些值？似乎有一种方法：JBoss 管理控制台提供了这些值。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-11T16:00:02.887

有一个`jboss.as:subsystem=datasources,xa-data-source=DATASOURCENAME_Pool`具有所有配置属性的 MBean，但它不具有统计信息。根据这个[线程](https://community.jboss.org/thread/195949)，统计信息只暴露给管理 API（使用 JSON 导出的 http 访问）。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-08-14T20:04:19.230

好的，在 Windows 或 Linux 上，您可以使用 Jboss cli（客户端界面）。这是在 JBOSS AS 7.1.3 上

在我的 Windows 框中，这就是我所做的（我的 jboss 主页是 C:\jboss-eap-6.0）

执行以下批处理文件

```
C:\jboss-eap-6.0\bin\jboss-cli.bat 
```

它会带你到一个提示

```
[disconnected /] 
```

您此时已断开连接。键入“connect”以连接到服务器，或键入“help”以获取支持的命令列表。现在输入连接。对于所有其他命令，请尝试帮助。这将允许您浏览 JMX 树（可能是我的术语可能是错误的）。

```
[disconnected /]connect

[standalone@rama-local:9999] 
```

假设我的数据池名称是“OracleSampleDS”然后您可以使用以下命令查询统计信息

```
/subsystem=datasources/data-source=OracleSampleDS/statistics=pool:read-resource(include-runtime=true) 
```

这是我得到的输出

```
{
    "outcome" => "success",
    "result" => {
        "ActiveCount" => "0",
        "AvailableCount" => "20",
        "AverageBlockingTime" => "0",
        "AverageCreationTime" => "0",
        "CreatedCount" => "0",
        "DestroyedCount" => "0",
        "MaxCreationTime" => "0",
        "MaxUsedCount" => "0",
        "MaxWaitTime" => "0",
        "TimedOut" => "0",
        "TotalBlockingTime" => "0",
        "TotalCreationTime" => "0"
    }
} 
```

如果您在 jboss 安装期间将主机名更改为 localhost 以外的任何内容，您可以编辑 jboss-cli.xml

我使用**jboss-cl.sh在 linux 上尝试了相同的命令**

如果您有单独的配置文件（主要是如果您使用域模式），请指定配置文件名称，如下所示。

```
/profile=full-ha/subsystem=datasources/data-source=OracleSampleDS/statistics=jdbc:read-resource(include-runtime=true) 
```

这里我在域模式下使用的配置文件是**“full-ha”**

连接到 Jboss 命令行工具后，您可以使用一些命令，例如

*   ls
*   密码
*   连接
*   辞职

（试试看）

还有

```
http://loclahost:9990/management/subsystem/datasources/data-source/OracleSampleDS/statistics/pool?include-runtime=true 
```

我不同的端口请查看您的 hosts.xml（如果您使用域模式）或 Standalone.xml，通过检查查看您公开的管理端口查看**http-interface security-realm="ManagementRealm"部分**

# sdk - [警告] 当前工作目录（C:\xampp\htdocs\sencha 文件夹）不是可识别的 Sencha SDK 或应用程序文件夹。

> ID：13291742
> 
> 赞同：16
> 
> 时间：2012-11-08T15:10:35.787
> 
> 标签：sdk, command, xampp, extjs

我是 Sencha 的新手。但是安装后..真的很头疼..

我不知道如何解决这个问题..我下载了-

*   sencha-touch-2.1.0-commercial - （我认为它的 SDK）
*   SenchaSDKTools-2.0.0-beta3-windows（这些是 SDK 工具）
*   Xampp（用于 Web 服务）

*   我安装了xampp。

*   将 sencha touch 提取到 xampp 下的 htdocs 文件夹中。
*   安装 senchSDKTools

    并开始从 CMD 应用命令

*   我输入了 sencha 并按下回车键...
*   但我收到以下错误。

-

```
C:\xampp\htdocs\sencha-touch-2.1.0-commercial>sencha
[WARN] The current working directory (C:\xampp\htdocs\sencha-touch-2.1.0-commercia
l) is not a recognized Sencha SDK or application folder. Running in backwards comp
atible mode.

    Sencha Command v2.0.0 Beta 3
Copyright (c) 2012 Sencha Inc.
usage: sencha COMMAND [ARGS]

The available commands are:
   build                        build a JSB project
   create bootstrapdata         generate boostrap data
   create jsb                   generate a minimal JSB project for an app
   create locale                        generate a template locale file from sourc
e
   create manifest              generate classes manifest
   package                      package your Touch web app into a native bundle
   slice theme                  slice a custom theme's images for IE

See 'sencha help COMMAND' for more information on a specific command.

C:\xampp\htdocs\sencha-touch-2.1.0-commercial> 
```

-我已经搜索了几个网站..但无法获得解决方案..请帮助我..谢谢

* * *

## 回答 #1

> 赞同：21
> 
> 时间：2012-11-09T00:02:30.320

**问题：**无法通过 Sencha SDK 识别`cmd`

**错误：**

> [警告] 当前工作目录 (c:\xampp\htdocs\sencha-touch-2.1.0-commercial) 不是可识别的 sencha sdk 或应用程序文件夹。以向后兼容模式运行。

**问题：**问题的出现是因为 Sencha 用于创建、更新、打包应用程序的 cmd 过时。输入时检查上述命令`sencha`，显示当前安装的cmd版本为：

```
sencha command v2.0.0 beta 3 
```

**解决方案：** Sencha 命令已更新到 v3.0.0，具有更多功能，例如 v2.0.0 不支持的“生成”命令。只需从下面的链接下载并安装它（在 SDK 工具的 bin 文件夹中，而不是触摸 SDK）。就是这样。现在转到 Sencha touch 文件夹并再次通过它运行`sencha`。你现在会得到的是：

```
sencha cmd v3.0.0.250 
```

您也可以触发此命令

```
$ sencha generate app gs ../gs 
```

它也有效！

**注意：** Sencha 并没有说您需要更新 Sencha cmd，而是更新了他们的文档。许多人都没有运气面对这个煎茶问题。希望人们摆脱它，这花了我整整一个晚上:)

* * *

## 回答 #2

> 赞同：10
> 
> 时间：2012-11-11T06:28:05.457

我在 Windows 上遇到了同样的错误。所以我卸载 Current SDK Tool 2.0 版并安装新的 sdk 工具（3.0 版）。它工作正常。

新版本的下载链接。 [http://www.sencha.com/products/sencha-cmd/download](http://www.sencha.com/products/sencha-cmd/download)

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2012-12-18T14:50:45.337

请按照以下步骤操作：-

1.  下载最新的 Sencha SDK [http://www.sencha.com/products/touch/download/](http://www.sencha.com/products/touch/download/)
2.  下载最新的 Sencha 命令行 [http://www.sencha.com/products/sencha-cmd/download](http://www.sencha.com/products/sencha-cmd/download)
3.  在 Windows 中安装 Sencha 命令行默认位置是 C:\Users\XXX\bin
4.  安装 CMD 后，进入步骤 1 中的 SDK 文件夹安装/解压
5.  运行以下命令（我在 Windows 上使用 GIT Bash 运行此命令）

    /c/Users/SMAK/bin/Sencha/Cmd/3.0.0.250/sencha 生成应用程序 MyApp ../MyApp

**注意：- 我们需要 Sencha SDK 和 CMD，你必须从 SDK 文件夹运行命令**

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-12-26T09:28:27.093

我对 Sencha Cmd 有同样的问题。我通过卸载“SenchaSDKTools”解决了这个问题。

至于我，它现在工作正常。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-03-04T07:35:20.697

我得到了同样的信息。我的网络服务器是 IIS。sdk 工具：SenchaSDKTools-2.0.0-beta3 按照 office url [http://dev.sencha.com/deploy/sencha-touch-2.0.1/docs/#!/guide/command](http://dev.sencha.com/deploy/sencha-touch-2.0.1/docs/#!/guide/command)

我通过**以管理员身份执行 cmd**解决了这个问题。

这个对我有用

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2014-10-10T10:43:37.353

```
export PATH=~/bin/Sencha/Cmd/ << your sencha cmd version >>  :$PATH 
```

这可能会解决您的问题。`generate`如果在其他平台上创建或者没有使用命令创建 Sencha 文件夹，Sencha 有时会找不到新的 Sencha cmd 路径。

* * *

## 回答 #7

> 赞同：-1
> 
> 时间：2012-11-19T12:37:19.167

我有同样的问题。在 Windows 上下载了最新的 Sencha SDK 和最新的 SDK 工具，得到了这个警告信息。

这里的问题是文件`.senchasdk`丢失了。

简单的解决方案：创建一个名为`.senchasdk`

之后一切正常。

# ruby-on-rails - Thinking_sphinx 启动但 rake 仍然失败

> ID：13291743
> 
> 赞同：1
> 
> 时间：2012-11-08T15:10:42.943
> 
> 标签：ruby-on-rails, rake, thinking-sphinx

我正在使用 Rails 3.0.7 和 Thinking_sphinx 2.0.13。

背景：

我正在尝试创建一个部署脚本（capistrano），其中 sphinx 将在 capistrano 更新代码之前停止，然后在更新完成后再次启动。

但是，thinking_sphinx:start 的 rake 任务失败。

以下命令按此确切顺序运行。

```
$ rake thinking_sphinx:stop

Stopped search daemon (pid 54117).
searchd is not running 
```

```
$ ps aux | grep searchd
xx  54597   0.0  0.0  2434892    532 s002  R+    4:04PM   0:00.00 grep searchd 
```

```
$ rake thinking_sphinx:start
Started successfully (pid 54618).
rake aborted!
searchd is already running.

Tasks: TOP => thinking_sphinx:start
(See full trace by running task with --trace) 
```

```
$ ps aux | grep searchd
xx  54637   0.8  0.0  2434892    448 s002  R+    4:06PM   0:00.00 grep searchd
xx  54618   0.0  0.0  2442992    396 s002  S     4:05PM   0:00.02 searchd --pidfile --config /Users/emil/code/wd/config/development.sphinx.conf 
```

所以是的，它开始了，但是 rake 任务失败了。当我在“cap deploy”中运行这些命令时，capistrano 将回滚我更新的代码，因为 rake 任务失败。

我该如何解决这个问题？我没有任何想法。

# javascript - 类似于 facebook 的模态库

> ID：13291745
> 
> 赞同：0
> 
> 时间：2012-11-08T15:10:51.710
> 
> 标签：javascript, facebook, modal-dialog

我需要一个类似于 facebook 的好的模态库。我想在侧面显示一张照片和一些信息。你知道吗？我看到的大多数人都有照片。

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-08T15:19:07.297

这些被称为“灯箱”，数量太多了。一个例子是这个：http: [//leandrovieira.com/projects/jquery/lightbox/](http://leandrovieira.com/projects/jquery/lightbox/)

编辑：如果您想要一个功能更全面的解决方案，您需要某种模式窗口插件，并自己在窗口内构建模板。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-08T15:25:04.873

我写了一个模态库 [https://github.com/mikesilvis/mikes-modal-library](https://github.com/mikesilvis/mikes-modal-library)我认为这就是你要找的。它模仿 facebook 和 google plus，让您能够在左侧拥有任意大小的图片，然后在右侧拥有评论区。

其他很酷的功能包括动态缩放到窗口大小的图片。

如果您需要任何帮助实施我会更乐意分享！

# php - 我可以在字符串中添加变量名吗？

> ID：13291747
> 
> 赞同：1
> 
> 时间：2012-11-08T15:10:55.640
> 
> 标签：php, string, variables, literals

我正在创建一个 OpenCart 扩展，管理员可以在其中使用管理面板中的用户界面更改他的电子邮件模板。

我希望用户可以选择将变量添加到他的自定义电子邮件模板中。例如，他可以输入：

您好`$order['customer_firstname']`，您的订单已处理完毕。

此时 $order 将是未定义的，用户只是告诉定义要发送的消息。这将被存储到数据库中，并在发送电子邮件时调用。

问题是，我如何让“ `$order['customer_firstname']`”变成文字字符串，然后在必要时转换为变量？

谢谢彼得

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-11-08T15:13:07.603

如果我正确理解您的问题，您可以执行以下操作：

客户有textarea或类似的输入模板

> 亲爱的 %NAME%，胡说八道 %SOMETHING%

那么你可以有

```
$values = array('%SOMETHING%' => $order['something'], '%NAME%' => $order['name']);
$str = str_replace(array_keys($values), array_values($values), $str); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-08T15:23:19.650

> 用户将使用大约 40 个变量。有没有办法可以为每个“%VARIABLE%”设置它？

是的，您可以借助回调函数轻松地为每个变量执行此操作。

这允许您使用您选择的函数处理每个匹配，返回所需的替换。

```
$processed = preg_replace_callback("/%(\S+)%/", function($matches) {
        $name = $matches[1]; // between the % signs
        $replacement = get_replacement_if_valid($name);
        return $replacement;
    },
    $text_to_replace_in
); 
```

从这里，你可以做任何你喜欢的事情，**点符号**，例如：

```
function get_replacement_if_valid($name) {
    list($var, $key) = explode(".", $name);
    if ($var === "order") {
        $order = init_oder(); // symbolic
        if(array_key_exists($key, $order)) {
            return $order[$key];
        }
     }
     return "&lt;invalid key: $name&gt;";
} 
```

这种简单的实现允许您处理替换，例如`%order.name%`用`$order['name']`.

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-08T15:14:16.650

您可以将其存储为`Hello $order['customer_firstname']`并在访问时确保您有双引号`"`" 以将变量转换为其相应的值。

```
 echo "Hello $order['customer_firstname']"; 
```

**编辑：**根据评论，Prash 回答的一个变体，

```
str_replace('%CUSTOMERNAME%', $order['customer_name'], $str); 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-11-08T15:18:56.567

如果您想保留 PHP 语法，那么正则表达式将适合过滤它们：

```
$text = preg_replace(
            "/   [$] (\w+)  \[ '? (\w+) \'? \]   /exi",
            "$$1['$2']",    # basically a constrained eval
            $text
        ); 
```

请注意，它需要在与 $order 定义相同的范围内执行。其他（最好）使用[`preg_replace_callback`](http://php.net/preg_replace_callback)来获得最大的灵活性。

您也可以通过这种方式允许另一种语法。例如`{order[customer]}`or`%order.customer%`比 PHP 语法更常见并且可能更容易使用。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-11-08T15:21:15.157

您可以定义自己的简单模板引擎：

```
function template($text, $context) {
    $tags = preg_match_all('~%([a-zA-Z0-9]+)\.([a-zA-Z0-9]+)%~', $text, $matches);

    for($i = 0; $i < count($matches[0]); $i++) {
        $subject = $matches[0][$i];
        $ctx = $matches[1][$i];
        $key = $matches[3][$i];
        $value = $context[$ctx][$key];

        $text = str_replace($subject, $value, $text);
    }

    return $text;
} 
```

这使您可以像这样转换字符串：

```
$text = 'Hello %order.name%. You have %order.percent%% discount. Pay a total ammount of %payment.ammount% using %payment.type%.';

$templated = template($text, array(
    'order' => array(
        'name' => 'Alex',
        'percent' => 20
    ),

    'payment' => array(
        'type' => 'VISA',
        'ammount' => '$299.9'
    )
));
echo $templated; 
```

进入这个：

```
Hello Alex. You have 20% discount. Pay a total ammount of $299.9 using VISA. 
```

这允许您定义任意数量的变量。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-11-08T15:20:16.470

您正在寻找的是：

`eval("echo \"" . $input . "\";");`

但是请不要那样做，因为这样可以让用户运行他想要的任何代码。

更好的方法是自定义模板系统，您可以在其中提供可用值列表供用户使用`%user_firstname%`. 然后，您可以使用`str_replace`和朋友将这些标签与实际值交换出来，但您仍然可以扫描任何类型的恶意代码。

这就是为什么 Markdown 和类似的东西很受欢迎的原因；它们使用户可以控制其内容的呈现，同时仍然可以轻松扫描 HTML/JS/PHP/SQL 注入/他们可能试图潜入的任何其他内容，因为白名单比黑名单更容易。

* * *

## 回答 #7

> 赞同：-1
> 
> 时间：2012-11-08T15:23:18.153

也许你可以有一个这样的模板：

```
$tpl = "Hello {$order['customer_firstname']}, your order has been processed.". 
```

如果 $order 并且该特定键不为空，则可以`echo $tpl`直接使用并在文本中显示`'customer_firstname'`键的内容。关键是这里的花括号。

# batch-file - 批处理文件读取第一行未使用的文本，然后标记为已使用

> ID：13291748
> 
> 赞同：4
> 
> 时间：2012-11-08T15:10:59.960
> 
> 标签：batch-file, cmd

我需要在 Windows 批处理文件中，从文本文件中读取第一个可用行，将其传递给变量并将名称\行标记为已使用

该文件的示例如下。

苹果
梨
橙

该脚本将以“apple”开头，将“apple”传递给稍后在脚本中使用的变量（我知道该怎么做），然后写回该行以读取 &apple，“&”作为标记说它已被使用。

该文件将如下所示：

&苹果
梨
橙

下次运行批处理文件时，它将使用“pear”，将其传递给变量并用 & 标记它，使其看起来像：

&苹果
&梨
橙

我首先尝试查找“&”，然后尝试移至下一行，但尝试了大约 12 小时后我失败了。这是我到目前为止所得到的......不多：

for /f "tokens=1" %l in ('name.txt') do (Find /v "&" /v "^---- ^$") (For /F %n in (%l) do (设置新名称=%n))

谢谢

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-11-08T15:36:39.013

运行它`the.file`会依次修改每一行；

```
@echo off
setlocal enabledelayedexpansion
type nul > the.file.temp
set last=
for /F "tokens=*" %%A in (the.file) do (
    set line=%%A
    if "!line:~0,1!" neq "&" if "!last!" equ "" (
        set last=!line!
        set line=^&!line!
    )
    echo !line! >> the.file.temp
)

echo last value is !last!
type the.file.temp > the.file 
```

（如果该行不以开头`&`且变量`last`为空，则将该行放入`last`& 修改`line`前导`&`。始终附加`line`到临时文件，完成后重命名）

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-11-08T19:33:48.813

亚历克斯·K。有一个很好的答案，在大多数情况下可能都很好。（我投了赞成票。）

但是，它会损坏任何包含`!`. 可以通过在循环内打开和关闭延迟扩展来修复该限制。

对于大多数合理大小的文件，该解决方案可能足够快。但是对于大文件，FOR 循环可能会变得非常慢。

我测试了一个包含 2817 行的 190kb 文件，Alex K. 解决方案一次运行需要 20 秒。

这是一个完全不同的解决方案，不使用在 0.07 秒内处理相同 190kb 文件的任何循环 - 快 285 倍 :)

```
@echo off
setlocal enableDelayedExpansion
set "file=test.txt"
findstr /bv "$ &" "%file%" >"%file%.available"
set "var="
<"%file%.available" set /p "var="
if defined var (
  >"%file%.new" (
    findstr /b "&" "%file%"
    <nul set /p "=&"
    type "%file%.available"
  )
  move /y "%file%.new" "%file%" >nul
)
del "%file%.available"

echo var=!var! 
```

***更新：***根据评论中的要求，这里是代码的重注释版本。

```
@echo off
setlocal enableDelayedExpansion

:: Define the file to process
set "file=test.txt"

:: Write the unused lines to a temporary "available" file. We don't want any
:: empty lines, so I strip them out here. There are two regex search strings;
:: the first looks for empty lines, the second for lines starting with &.
:: The /v option means only write lines that don't match either search string.
findstr /bv "$ &" "%file%" >"%file%.available"

:: Read the first available line into a variable
set "var="
<"%file%.available" set /p "var="

:: If var defined, then continue, else we are done
if defined var (

  REM Redirect output to a "new" file. It is more efficient to redirect
  REM the entire block once than it is to redirect each command individulally
  >"%file%.new" (

    REM Write the already used lines to the "new" file
    findstr /b "&" "%file%"

    REM Append the & without a new line
    <nul set /p "=&"

    REM Append the unused lines from the "available" file. The first appended
    REM line is marked as used because of the previously written &
    type "%file%.available"
  )

  REM Replace the original file with the "new" content
  move /y "%file%.new" "%file%" >nul
)

:: Delete the temp "available" file
del "%file%.available"

:: Display the result
echo var=!var! 
```

我没有对此进行测试，但我刚刚意识到我可以编写写入可用行的行来查找以以下字符开头的行`&`：

```
findstr "^[^&]" "%file%" >"%file%.available" 
```

# java - 如何将 Oracle JBoss 数据源定义为只读？

> ID：13291749
> 
> 赞同：0
> 
> 时间：2012-11-08T15:11:04.850
> 
> 标签：java, oracle, jboss

**有没有办法使用 JBoss 和 Oracle 定义真正的只读数据源？**

我想坚持使用单个默认模式用户，但将应用程序的某些部分限制为只读，以避免 SQL 注入问题。如果 JBoss 中没有这种方法，我将不得不在 Oracle 中创建另一个具有有限权限的用户。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-08T15:29:17.567

无论您是否可以在 JBoss 中执行此操作，您都应该创建第二个用户。

数据库权限应在数据库层设置；不要试图在代码中应用它们。该数据库旨在确保无法写入您没有写入权限的表。如果您在应用程序中实现这一点，则只需稍作更改或一个小错误即可打破此限制。

如果您不想引用另一个模式中的表，您始终可以在自己的模式中创建一个指向它的同义词。

您可能会发现一个[相关的程序员问题很有趣。](https://softwareengineering.stackexchange.com/questions/171024/never-do-in-code-what-you-can-get-the-sql-server-to-do-well-for-you-is-this)简单地说*“永远不要在代码中做你可以让 SQL 服务器为你做好的事情”*。没有提到这个特定的场景，但我认为它适用。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-09T08:53:26.250

要完成此操作...我使用以下 SQL 创建了另一个用户：

```
-- USER SQL
CREATE USER MYUSER_READONLY IDENTIFIED BY password 
DEFAULT TABLESPACE "USERS"
TEMPORARY TABLESPACE "TEMP";

-- ROLES
GRANT "AUTHENTICATEDUSER" TO MYUSER_READONLY;
GRANT "CONNECT" TO MYUSER_READONLY;
GRANT "EJBCLIENT" TO MYUSER_READONLY;
GRANT SELECT ANY TABLE TO MYUSER_READONLY;
GRANT ALTER SESSION TO MYUSER_READONLY; 
```

为了在我的 Java 代码中简化此用户的使用，我们使用以下语句初始化每个 SQL 会话：

```
ALTER SESSION SET CURRENT_SCHEMA = MYUSER; 
```

这允许我们查询该其他用户的表，就好像它是同一个用户一样。

而已。

# gdata-api - 如何减轻用户向 Google 电子表格添加空白行从而破坏 ListFeed API 的情况？

> ID：13291753
> 
> 赞同：0
> 
> 时间：2012-11-08T15:11:17.807
> 
> 标签：gdata-api, google-spreadsheet-api

我们使用 Google 电子表格收集研究数据，并允许用户将数据直接输入到实际生成的电子表格中。在用户在数据行之间输入一个空白行之前，这一直工作得很好！他们可能会这样做是为了便于阅读，或者他们可能已经删除了一行，无论如何......

谷歌的文档对此很清楚：

[https://developers.google.com/google-apps/spreadsheets/#retrieving_a_list-based_feed](https://developers.google.com/google-apps/spreadsheets/#retrieving_a_list-based_feed)

> 列表提要包含从第一行到第一个空白行的所有行。

所以问题是我有“收割机”脚本，可以翻阅这些电子表格，收集用于存档/本地数据库的数据。这些脚本使用 ListFeed，因此当到达空白行并丢失数据时它们会停止！

文档建议：

> 如果 Feed 中未显示预期数据，请手动检查工作表以查看数据中间是否有意外的空白行。

手动！喘气，我有数百张纸 :) 除了每当我看到这种情况发生时对用户大喊大叫之外，您是否有减轻这种情况的建议！谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-23T17:19:12.937

这是我认为我们甚至可以接近电子表格 API 的唯一方法。这不是完整的代码，它在我编写的函数中，但你明白了......它在 C# 中：

使用示例：

```
--row 1 = header row
--row 2 = data
--row 3 = data
--row 4 = totally blank
--row 5 = data
--row 6-100 = totally blank 
```

用英语讲：

1.  获取工作表的 ListFeed.Entries.Count。ListFeeds 忽略标题行，因此在此示例中计数为“2”。

2.  获取工作表的 CellFeed 以循环浏览单元格。CellFeeds DO 包括标题行作为第 1 行，因此在示例中，从 CellFeed 的角度来看，第一个空白行必须是第 4 行（标题=1，然后是 2 个数据行，然后是终止 ListFeed 集的第一个空白行） ，因此我们应该开始在第 5 行及以后的单元格中查找任何非空的单元格：

```
 foreach (WorksheetEntry entry in wsFeed.Entries)
    {
    //Get the worksheet CellFeed:
    CellQuery cellQuery = new CellQuery(entry.CellFeedLink);
    CellFeed cellFeed = service.Query(cellQuery);

    //Get the worksheet ListFeed to compare with the CellFeed:
    AtomLink listFeedLink = entry.Links.FindService(
                                         GDataSpreadsheetsNameTable.ListRel, null
                                     );
    ListQuery listQuery = new ListQuery(listFeedLink.HRef.ToString());
    //need to have service object already created for this... see API docs
    ListFeed listFeed = service.Query(listQuery);

     //Now to check if there is data after the ListFeed
     //set which would indicate a blank line in the data set (not allowed)
        foreach (CellEntry cell in cellFeed.Entries)
        {
             //start looking in cells in the row after what would be the first blank row
             if (cell.Row > listFeed.Entries.Count + 2)
             {
                 if (cell.Value != "")
                 {
                     MessageBox.Show("ERROR:  There appears to be a blank row +
                                     in the middle of the data set in worksheet: " +
                                     entry.Title.Text + ".  Completely blank rows " +
                                     "are not allowed in between data rows.  Each row " +
                                     "within the data set must have at least one " +
                                     "value in at least one cell.  There CAN and " +
                                     "should be blank rows after the data set at " +
                                     "the bottom of the worksheet.");
                     return false;
                 }

             }
        }
    } 
```

# c# - 起订量：使用 Setup() 时，如何确定方法参数的相等性？

> ID：13291760
> 
> 赞同：12
> 
> 时间：2012-11-08T15:11:44.130
> 
> 标签：c#, unit-testing, mocking, moq

我正在使用该`Setup()`方法来设置接口的模拟实例的行为。

我正在设置的方法（我们称之为它`DoSomething()`）接受一个类的实例（我们称之为类`Foo`）。

```
Foo foo = // Existing foo instance
Mock<IMyInterface> mock = new Mock<IMyInterface>();
mock.Setup(x => x.DoSomething(foo)).Returns(1); 
```

我遇到的问题是，当我使用模拟时，它永远不会与设置匹配，所以永远不会返回 1。

任何人都可以帮忙吗？Moq 如何确定提供给设置方法的参数是否相等？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-11-16T17:11:44.647

我的问题的答案是 Moq 用来`.Equals`确定设置方法的参数是否相等。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2020-02-19T10:53:55.690

对于更详细的答案，Moq 使用[`ConstantMatcher`](https://github.com/moq/moq4/blob/v4.13.1/src/Moq/Matchers/ConstantMatcher.cs)（链接到当前最新版本 4.13.1）。该匹配器的实现是

1.  采用`object.Equals`
2.  如果`object.Equals`失败并且值实现`IEnumerable`使用`SequenceEqual<object>`（`object.Equals`用于每个元素）
3.  如果以上都失败返回`false`

# cakephp - 根据所选页面禁用 CakePHP 中的特定 div

> ID：13291762
> 
> 赞同：0
> 
> 时间：2012-11-08T15:11:46.107
> 
> 标签：cakephp

我是 CakePHP 的新手，我需要你的帮助。我需要在特定页面（即我的主页）上以 div 的形式显示特定的小部件，并在其余页面上禁用。本质上，我已经能够根据登录状态专门显示特定的 div，如下所示：

```
 <?php if (!$this->Session->read('Auth.User.id')): ?>
                <div class="register link right <?php if ($active == 'register') echo 'active'; ?>"><?php echo $html->link('Register', array('controller' => 'users', 'action' => 'register')); ?></div>
                <div class="login link right <?php if ($active == 'login') echo 'active'; ?>"><?php echo $html->link('Login', array('controller' => 'users', 'action' => 'login')); ?></div>
            <?php else: ?>
                <div class="logout link right"><?php echo $html->link('Logout', array('controller' => 'users', 'action' => 'logout')); ?></div>
                <div class="myaccount link right <?php if ($active == 'myaccount') echo 'active'; ?>"><?php echo $html->link('My account', array('controller' => 'account', 'action' => 'summary')); ?></div>
            <?php endif; ?> 
```

我正在寻求有关根据我的主页选择显示特定 div 的任何帮助。

下面的伪代码表明了我解决这个问题的思路：

```
 <?php if (the selected page is homepage or default.ctp)?> 
     // set the display property for the desired div to none
 <?php else: ?>
     // do not set the display property for the desired div to none
 <?php endif; ?> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-08T15:34:07.273

在 cakephp 中，您不能直接`$this->Session->read('Auth.User.id')`在视图中使用，最好在控制器中执行此操作：

```
$this->set('authUser', $this->Auth->user()); 
```

进入你的视野

```
if (!$authUser)
{
    //not logged
}
else{
    //logged
} 
```

如果您想检查哪个页面，您可以尝试类似的操作

```
echo Router::url($this->last, true); 
```

是你想要的吗？

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-08T18:00:08.453

在您的控制器中，您可以定义如下内容：

```
$this->set('pageName', $pageName); 
```

然后您可以在您的视图中执行以下操作：

```
$class='';
if($pageName=='homepage') {
    $class=' hide';
}
echo $this->Html->div($class, 'your content here'); 
```

还要考虑一下为什么在您的观点中需要这种结构。如果视图不需要内容，也许您可​​以不提供内容？因此，您在控制器中做出决定。这使得大多数时候视图更清晰，视图中所需的数据量最少。

# mysql - mysql max() 无法分组

> ID：13291770
> 
> 赞同：2
> 
> 时间：2012-11-08T15:12:10.693
> 
> 标签：mysql, sql

我正在尝试返回 foo 的所有值以及 bar 的最大值，其中 foo.val > bar.val

```
CREATE TABLE `foo` (
  `id` int(11) NOT NULL AUTO_INCREMENT,
  `val` int(11) DEFAULT NULL,
  PRIMARY KEY (`id`)
);

CREATE TABLE `bar` (
  `id` int(11) NOT NULL AUTO_INCREMENT,
  `val` int(11) DEFAULT NULL,
  PRIMARY KEY (`id`)
);

insert into foo (val) values (3), (5), (7), (10);
insert into bar (val) values (1), (1), (2), (3), (4), (5), (6), (7), (8), (20); 
```

预期的输出如下：

```
+--------+---------+------------------------+
| foo.id | foo.val | max(bar.val) < foo.val |
+--------+---------+------------------------+
|  1     | 3       | 2                      |
|  2     | 5       | 4                      |
|  3     | 7       | 6                      |
|  4     | 10      | 8                      |
+--------+---------+------------------------+ 
```

这可以通过单个查询而不是在代码域中循环来完成吗？

```
SELECT max(val) from bar where val < 3;
SELECT max(val) from bar where val < 5;
SELECT max(val) from bar where val < 7;
SELECT max(val) from bar where val < 10; 
```

有人对此有任何想法吗？

如果有人想尝试，小提琴就在这里[http://sqlfiddle.com/#!2/de0f9/7](http://sqlfiddle.com/#!2/de0f9/7)

提前致谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-08T15:13:39.880

```
select  foo.id
,       foo.val
,       max(bar.val)
from    foo
left join
        bar
on      bar.val < foo.val
group by
        foo.id
,       foo.val 
```

[SQL Fiddle 的示例](http://sqlfiddle.com/#!2/de0f9/11/0)（感谢 JohnWhoo）

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-08T15:20:00.780

```
select  foo.id,
        foo.val,
        (select MAX(bar.val) from bar where bar.val < foo.val) as barval
from foo 
```

它将在 bar 中找不到更小的值时返回 null，如果您需要一个值，可以使用 coalesce。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-08T15:21:22.613

```
SELECT f.id, f.val, (SELECT MAX(b.val) FROM bar b WHERE b.val<f.val) FROM foo f; 
```

# javascript - 如何在 HTML/Javascript 中创建活动/非活动缩略图

> ID：13291778
> 
> 赞同：1
> 
> 时间：2012-11-08T15:12:26.203
> 
> 标签：javascript, html, css

我正在为网站的主页设置“广告牌”。广告牌将显示一个活动图像，并且右侧的缩略图将用于更改广告牌上的图像。

像这样的东西：

![广告牌](../Images/0778c5332881de93b0ff0bc2d5b89dfa.png)

目前我像这样交换图像：

```
 <div id="_bbImage">
        <img src="images/bill1.png" class="bbImage" id= "MainBB"/>
        </div><!--_bbImage-->

        <div id="_bbTab1" class="inactiveTab">
        <a href="images/bill2.png" onclick="swap(this); return false;">
            <img src="images/bbtab1.png" class="bbTabImg" id="bbTabImg1"  />
        </a>
        </div><!--bbTab1--> 
```

JavaScript 函数如下所示：

```
function swap(image){document.getElementById("MainBB").src = image.href;} 
```

但是现在，我希望缩略图在选中或“活动”时具有不同的类以实现此效果： ![在此处输入图像描述](../Images/239d7db7a2aff9a54015b0e83801f293.png)

我需要完成类切换到活动，但我还需要确保之前选择的选项卡再次设置回“非活动”类。

我试过这样的事情：

```
function inactiveTab(name){document.getElementById(name).className = "inactiveTab";}
function activeTab(name){document.getElementById(name).className = "activeTab";}
function inactiveTabAll(){
inactiveTab("_bbTab1");
inactiveTab("_bbTab2");
inactiveTab("_bbTab3");
inactiveTab("_bbTab4");
inactiveTab("_bbTab5");
inactiveTab("_bbTab6"); 
```

}

和：

```
<div id="_bbTab1" class="inactiveTab">
        <a href="images/bill1.png" onclick="swap(this); inactiveTabAll(); activeTab("_bbTab1"); return false;">
            <img src="images/bbtab2.png" class="bbTabImg" id="bbTabImg1"  />
        </a>
</div><!--bbTab1--> 
```

但这似乎不起作用，当我单击缩略图时，我只是链接到显示“image/bill2.png”图像的空白页面。

有谁知道实现这一目标的好方法，或者任何人都可以指出我正确的方向。

提前致谢，

抢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-08T15:19:23.337

在我看来，你可以看看下面的 jquery 方法：

[http://api.jquery.com/hover/](http://api.jquery.com/hover/)

它具有回调函数，您可以在其中使您的内容可见/不可见。

而不是你的“inactivateTab” - 功能，你可以使用“隐藏” - 方法：

[http://api.jquery.com/hide/](http://api.jquery.com/hide/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-08T15:23:09.807

问题是您对标签内的图像使用href。标记最初是指向给定 url 的链接，将 href="xx.png" 替换为 href="javascript:swap(this); inactiveTabAll(); activeTab("_bbTab1");"

我不明白 href 在您的代码中的原始作用是什么，但您似乎并没有使用它

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-08T15:33:29.670

代替`img`元素，使用`div`s 并将图像放入背景（使用`background-image`样式）。这允许您定义应在纯 CSS 中显示的图像。您还可以通过添加/删除类来交换图像：

```
.bbTabImg { background-image: url(images/bbtab1-inactive.png); }
.bbTabImg.active { background-image: url(images/bbtab1.png); } 
```

至于非活动，使用这个jQuery：

```
$('.active').removeClass('active'); 
```

这会找到该类的所有元素`active`并将其关闭。现在您可以再次将其中一个设置为活动状态，上面的 CSS 将加载正确的图像。

# c# - 如何获取 dll 函数的 id（内存地址）？

> ID：13291783
> 
> 赞同：12
> 
> 时间：2012-11-08T15:12:36.623
> 
> 标签：c#, dll, memory-address, queryinterface, nvapi

我想在 C#“NvAPI_DRS_EnumProfiles”中使用来自 nvapi 的函数。我必须使用函数的 id 调用 QueryInterface(id) 。一切正常，我在网上找到了我需要的其他功能的 id，但我找不到这个单一功能的 id，我不知道如何获得它。我尝试了很多东西，甚至一个打印内存地址的 c 程序都不起作用。

我的代码看起来像这样：[http ://www.drivenbynostalgia.com/files/SOP.cs](http://www.drivenbynostalgia.com/files/SOP.cs)

谢谢您的帮助 ：）

* * *

## 回答 #1

> 赞同：34
> 
> 时间：2013-05-11T12:49:34.003

保密协议版本的库

```
_NvAPI_Initialize   150E828h
_NvAPI_Unload   0D22BDD7Eh
_NvAPI_GetErrorMessage  6C2D048Ch
_NvAPI_GetInterfaceVersionString    1053FA5h
_NvAPI_GetDisplayDriverVersion  0F951A4D1h
_NvAPI_SYS_GetDriverAndBranchVersion    2926AAADh
_NvAPI_EnumNvidiaDisplayHandle  9ABDD40Dh
_NvAPI_EnumNvidiaUnAttachedDisplayHandle    20DE9260h
_NvAPI_EnumPhysicalGPUs 0E5AC921Fh
_NvAPI_EnumLogicalGPUs  48B3EA59h
_NvAPI_GetPhysicalGPUsFromDisplay   34EF9506h
_NvAPI_GetPhysicalGPUFromUnAttachedDisplay  5018ED61h
_NvAPI_CreateDisplayFromUnAttachedDisplay   63F9799Eh
_NvAPI_GetLogicalGPUFromDisplay 0EE1370CFh
_NvAPI_GetLogicalGPUFromPhysicalGPU 0ADD604D1h
_NvAPI_GetPhysicalGPUsFromLogicalGPU    0AEA3FA32h
_NvAPI_GetAssociatedNvidiaDisplayHandle 35C29134h
_NvAPI_DISP_GetAssociatedUnAttachedNvidiaDisplayHandle  0A70503B2h
_NvAPI_GetAssociatedNvidiaDisplayName   22A78B05h
_NvAPI_GetUnAttachedAssociatedDisplayName   4888D790h
_NvAPI_EnableHWCursor   2863148Dh
_NvAPI_DisableHWCursor  0AB163097h
_NvAPI_GetVBlankCounter 67B5DB55h
_NvAPI_SetRefreshRateOverride   3092AC32h
_NvAPI_GetAssociatedDisplayOutputId 0D995937Eh
_NvAPI_GetDisplayPortInfo   0C64FF367h
_NvAPI_SetDisplayPort   0FA13E65Ah
_NvAPI_GetHDMISupportInfo   6AE16EC3h
_NvAPI_DISP_EnumHDMIStereoModes 0D2CCF5D6h
_NvAPI_GetInfoFrame 9734F1Dh
_NvAPI_SetInfoFrame 69C6F365h
_NvAPI_SetInfoFrameState    67EFD887h
_NvAPI_GetInfoFrameState    41511594h
_NvAPI_Disp_InfoFrameControl    6067AF3Fh
_NvAPI_Disp_ColorControl    92F9D80Dh
_NvAPI_DISP_GetVirtualModeData  3230D69Ah
_NvAPI_DISP_OverrideDisplayModeList 291BFF2h
_NvAPI_GetDisplayDriverMemoryInfo   774AA982h
_NvAPI_GetDriverMemoryInfo  2DC95125h
_NvAPI_GetDVCInfo   4085DE45h
_NvAPI_SetDVCLevel  172409B4h
_NvAPI_GetDVCInfoEx 0E45002Dh
_NvAPI_SetDVCLevelEx    4A82C2B1h
_NvAPI_GetHUEInfo   95B64341h
_NvAPI_SetHUEAngle  0F5A0F22Ch
_NvAPI_GetImageSharpeningInfo   9FB063DFh
_NvAPI_SetImageSharpeningLevel  3FC9A59Ch
_NvAPI_D3D_GetCurrentSLIState   4B708B54h
_NvAPI_D3D9_RegisterResource    0A064BDFCh
_NvAPI_D3D9_UnregisterResource  0BB2B17AAh
_NvAPI_D3D9_AliasSurfaceAsTexture   0E5CEAE41h
_NvAPI_D3D9_StretchRectEx   22DE03AAh
_NvAPI_D3D9_ClearRT 332D3942h
_NvAPI_D3D_CreateQuery  5D19BCA4h
_NvAPI_D3D_DestroyQuery 0C8FF7258h
_NvAPI_D3D_Query_Begin  0E5A9AAE0h
_NvAPI_D3D_Query_End    2AC084FAh
_NvAPI_D3D_Query_GetData    0F8B53C69h
_NvAPI_D3D_Query_GetDataSize    0F2A54796h
_NvAPI_D3D_Query_GetType    4ACEEAF7h
_NvAPI_D3D_RegisterApp  0D44D3C4Eh
_NvAPI_D3D9_CreatePathContextNV 0A342F682h
_NvAPI_D3D9_DestroyPathContextNV    667C2929h
_NvAPI_D3D9_CreatePathNV    71329DF3h
_NvAPI_D3D9_DeletePathNV    73E0019Ah
_NvAPI_D3D9_PathVerticesNV  0C23DF926h
_NvAPI_D3D9_PathParameterfNV    0F7FF00C1h
_NvAPI_D3D9_PathParameteriNV    0FC31236Ch
_NvAPI_D3D9_PathMatrixNV    0D2F6C499h
_NvAPI_D3D9_PathDepthNV 0FCB16330h
_NvAPI_D3D9_PathClearDepthNV    157E45C4h
_NvAPI_D3D9_PathEnableDepthTestNV   0E99BA7F3h
_NvAPI_D3D9_PathEnableColorWriteNV  3E2804A2h
_NvAPI_D3D9_DrawPathNV  13199B3Dh
_NvAPI_D3D9_GetSurfaceHandle    0F2DD3F2h
_NvAPI_D3D9_GetOverlaySurfaceHandles    6800F5FCh
_NvAPI_D3D9_GetTextureHandle    0C7985ED5h
_NvAPI_D3D9_GpuSyncGetHandleSize    80C9FD3Bh
_NvAPI_D3D9_GpuSyncInit 6D6FDAD4h
_NvAPI_D3D9_GpuSyncEnd  754033F0h
_NvAPI_D3D9_GpuSyncMapTexBuffer 0CDE4A28Ah
_NvAPI_D3D9_GpuSyncMapSurfaceBuffer 2AB714ABh
_NvAPI_D3D9_GpuSyncMapVertexBuffer  0DBC803ECh
_NvAPI_D3D9_GpuSyncMapIndexBuffer   12EE68F2h
_NvAPI_D3D9_SetPitchSurfaceCreation 18CDF365h
_NvAPI_D3D9_GpuSyncAcquire  0D00B8317h
_NvAPI_D3D9_GpuSyncRelease  3D7A86BBh
_NvAPI_D3D9_GetCurrentRenderTargetHandle    22CAD61h
_NvAPI_D3D9_GetCurrentZBufferHandle 0B380F218h
_NvAPI_D3D9_GetIndexBufferHandle    0FC5A155Bh
_NvAPI_D3D9_GetVertexBufferHandle   72B19155h
_NvAPI_D3D9_CreateTexture   0D5E13573h
_NvAPI_D3D9_AliasPrimaryAsTexture   13C7112Eh
_NvAPI_D3D9_PresentSurfaceToDesktop 0F7029C5h
_NvAPI_D3D9_CreateVideoBegin    84C9D553h
_NvAPI_D3D9_CreateVideoEnd  0B476BF61h
_NvAPI_D3D9_CreateVideo 89FFD9A3h
_NvAPI_D3D9_FreeVideo   3111BED1h
_NvAPI_D3D9_PresentVideo    5CF7F862h
_NvAPI_D3D9_VideoSetStereoInfo  0B852F4DBh
_NvAPI_D3D9_SetGamutData    2BBDA32Eh
_NvAPI_D3D9_SetSurfaceCreationLayout    5609B86Ah
_NvAPI_D3D9_GetVideoCapabilities    3D596B93h
_NvAPI_D3D9_QueryVideoInfo  1E6634B3h
_NvAPI_D3D9_AliasPrimaryFromDevice  7C20C5BEh
_NvAPI_D3D9_SetResourceHint 905F5C27h
_NvAPI_D3D9_Lock    6317345Ch
_NvAPI_D3D9_Unlock  0C182027Eh
_NvAPI_D3D9_GetVideoState   0A4527BF8h
_NvAPI_D3D9_SetVideoState   0BD4BC56Fh
_NvAPI_D3D9_EnumVideoFeatures   1DB7C52Ch
_NvAPI_D3D9_GetSLIInfo  694BFF4Dh
_NvAPI_D3D9_SetSLIMode  0BFDC062Ch
_NvAPI_D3D9_QueryAAOverrideMode 0DDF5643Ch
_NvAPI_D3D9_VideoSurfaceEncryptionControl   9D2509EFh
_NvAPI_D3D9_DMA 962B8AF6h
_NvAPI_D3D9_EnableStereo    492A6954h
_NvAPI_D3D9_StretchRect 0AEAECD41h
_NvAPI_D3D9_CreateRenderTarget  0B3827C8h
_NvAPI_D3D9_NVFBC_GetStatus 0BD3EB475h
_NvAPI_D3D9_IFR_SetUpTargetBufferToSys  55255D05h
_NvAPI_D3D9_GPUBasedCPUSleep    0D504DDA7h
_NvAPI_D3D9_IFR_TransferRenderTarget    0AB7C2DCh
_NvAPI_D3D9_IFR_SetUpTargetBufferToNV12BLVideoSurface   0CFC92C15h
_NvAPI_D3D9_IFR_TransferRenderTargetToNV12BLVideoSurface    5FE72F64h
_NvAPI_D3D10_AliasPrimaryAsTexture  8AAC133Dh
_NvAPI_D3D10_SetPrimaryFlipChainCallbacks   73EB9329h
_NvAPI_D3D10_ProcessCallbacks   0AE9C2019h
_NvAPI_D3D10_GetRenderedCursorAsBitmap  0CAC3CE5Dh
_NvAPI_D3D10_BeginShareResource 35233210h
_NvAPI_D3D10_BeginShareResourceEx   0EF303A9Dh
_NvAPI_D3D10_EndShareResource   0E9C5853h
_NvAPI_D3D10_SetDepthBoundsTest 4EADF5D2h
_NvAPI_D3D10_CreateDevice   2DE11D61h
_NvAPI_D3D10_CreateDeviceAndSwapChain   5B803DAFh
_NvAPI_D3D11_CreateDevice   6A16D3A0h
_NvAPI_D3D11_CreateDeviceAndSwapChain   0BB939EE5h
_NvAPI_D3D11_BeginShareResource 121BDC6h
_NvAPI_D3D11_EndShareResource   8FFB8E26h
_NvAPI_D3D11_SetDepthBoundsTest 7AAF7A04h
_NvAPI_GPU_GetShaderPipeCount   63E2F56Fh
_NvAPI_GPU_GetShaderSubPipeCount    0BE17923h
_NvAPI_GPU_GetPartitionCount    86F05D7Ah
_NvAPI_GPU_GetMemPartitionMask  329D77CDh
_NvAPI_GPU_GetTPCMask   4A35DF54h
_NvAPI_GPU_GetSMMask    0EB7AF173h
_NvAPI_GPU_GetTotalTPCCount 4E2F76A8h
_NvAPI_GPU_GetTotalSMCount  0AE5FBCFEh
_NvAPI_GPU_GetTotalSPCount  0B6D62591h
_NvAPI_GPU_GetGpuCoreCount  0C7026A87h
_NvAPI_GPU_GetAllOutputs    7D554F8Eh
_NvAPI_GPU_GetConnectedOutputs  1730BFC9h
_NvAPI_GPU_GetConnectedSLIOutputs   680DE09h
_NvAPI_GPU_GetConnectedDisplayIds   78DBA2h
_NvAPI_GPU_GetAllDisplayIds 785210A2h
_NvAPI_GPU_GetConnectedOutputsWithLidState  0CF8CAF39h
_NvAPI_GPU_GetConnectedSLIOutputsWithLidState   96043CC7h
_NvAPI_GPU_GetSystemType    0BAAABFCCh
_NvAPI_GPU_GetActiveOutputs 0E3E89B6Fh
_NvAPI_GPU_GetEDID  37D32E69h
_NvAPI_GPU_SetEDID  0E83D6456h
_NvAPI_GPU_GetOutputType    40A505E4h
_NvAPI_GPU_GetDeviceDisplayMode 0D2277E3Ah
_NvAPI_GPU_GetFlatPanelInfo 36CFF969h
_NvAPI_GPU_ValidateOutputCombination    34C9C2D4h
_NvAPI_GPU_GetConnectorInfo 4ECA2C10h
_NvAPI_GPU_GetFullName  0CEEE8E9Fh
_NvAPI_GPU_GetPCIIdentifiers    2DDFB66Eh
_NvAPI_GPU_GetGPUType   0C33BAEB1h
_NvAPI_GPU_GetBusType   1BB18724h
_NvAPI_GPU_GetBusId 1BE0B8E5h
_NvAPI_GPU_GetBusSlotId 2A0A350Fh
_NvAPI_GPU_GetIRQ   0E4715417h
_NvAPI_GPU_GetVbiosRevision 0ACC3DA0Ah
_NvAPI_GPU_GetVbiosOEMRevision  2D43FB31h
_NvAPI_GPU_GetVbiosVersionString    0A561FD7Dh
_NvAPI_GPU_GetAGPAperture   6E042794h
_NvAPI_GPU_GetCurrentAGPRate    0C74925A0h
_NvAPI_GPU_GetCurrentPCIEDownstreamWidth    0D048C3B1h
_NvAPI_GPU_GetPhysicalFrameBufferSize   46FBEB03h
_NvAPI_GPU_GetVirtualFrameBufferSize    5A04B644h
_NvAPI_GPU_GetQuadroStatus  0E332FA47h
_NvAPI_GPU_GetBoardInfo 22D54523h
_NvAPI_GPU_GetRamType   57F7CAACh
_NvAPI_GPU_GetFBWidthAndLocation    11104158h
_NvAPI_GPU_GetAllClockFrequencies   0DCB616C3h
_NvAPI_GPU_GetPerfClocks    1EA54A3Bh
_NvAPI_GPU_SetPerfClocks    7BCF4ACh
_NvAPI_GPU_GetCoolerSettings    0DA141340h
_NvAPI_GPU_SetCoolerLevels  891FA0AEh
_NvAPI_GPU_RestoreCoolerSettings    8F6ED0FBh
_NvAPI_GPU_GetCoolerPolicyTable 518A32Ch
_NvAPI_GPU_SetCoolerPolicyTable 987947CDh
_NvAPI_GPU_RestoreCoolerPolicyTable 0D8C4FE63h
_NvAPI_GPU_GetPstatesInfo   0BA94C56Eh
_NvAPI_GPU_GetPstatesInfoEx 843C0256h
_NvAPI_GPU_SetPstatesInfo   0CDF27911h
_NvAPI_GPU_GetPstates20 6FF81213h
_NvAPI_GPU_SetPstates20 0F4DAE6Bh
_NvAPI_GPU_GetCurrentPstate 927DA4F6h
_NvAPI_GPU_GetPstateClientLimits    88C82104h
_NvAPI_GPU_SetPstateClientLimits    0FDFC7D49h
_NvAPI_GPU_EnableOverclockedPstates 0B23B70EEh
_NvAPI_GPU_EnableDynamicPstates 0FA579A0Fh
_NvAPI_GPU_GetDynamicPstatesInfoEx  60DED2EDh
_NvAPI_GPU_GetVoltages  7D656244h
_NvAPI_GPU_GetThermalSettings   0E3640A56h
_NvAPI_GPU_SetDitherControl 0DF0DFCDDh
_NvAPI_GPU_GetDitherControl 932AC8FBh
_NvAPI_GPU_GetColorSpaceConversion  8159E87Ah
_NvAPI_GPU_SetColorSpaceConversion  0FCABD23Ah
_NvAPI_GetTVOutputInfo  30C805D5h
_NvAPI_GetTVEncoderControls 5757474Ah
_NvAPI_SetTVEncoderControls 0CA36A3ABh
_NvAPI_GetTVOutputBorderColor   6DFD1C8Ch
_NvAPI_SetTVOutputBorderColor   0AED02700h
_NvAPI_GetDisplayPosition   6BB1EE5Dh
_NvAPI_SetDisplayPosition   57D9060Fh
_NvAPI_GetValidGpuTopologies    5DFAB48Ah
_NvAPI_GetInvalidGpuTopologies  15658BE6h
_NvAPI_SetGpuTopologies 25201F3Dh
_NvAPI_GPU_GetPerGpuTopologyStatus  0A81F8992h
_NvAPI_SYS_GetChipSetTopologyStatus 8A50F126h
_NvAPI_GPU_Get_DisplayPort_DongleInfo   76A70E8Dh
_NvAPI_I2CRead  2FDE12C5h
_NvAPI_I2CWrite 0E812EB07h
_NvAPI_I2CWriteEx   283AC65Ah
_NvAPI_I2CReadEx    4D7B0709h
_NvAPI_GPU_GetPowerMizerInfo    76BFA16Bh
_NvAPI_GPU_SetPowerMizerInfo    50016C78h
_NvAPI_GPU_GetVoltageDomainsStatus  0C16C7E2Ch
_NvAPI_GPU_ClientPowerTopologyGetInfo   0A4DFD3F2h
_NvAPI_GPU_ClientPowerTopologyGetStatus 0EDCF624Eh
_NvAPI_GPU_ClientPowerPoliciesGetInfo   34206D86h
_NvAPI_GPU_ClientPowerPoliciesGetStatus 70916171h
_NvAPI_GPU_ClientPowerPoliciesSetStatus 0AD95F5EDh
_NvAPI_GPU_WorkstationFeatureSetup  6C1F3FE4h
_NvAPI_SYS_GetChipSetInfo   53DABBCAh
_NvAPI_SYS_GetLidAndDockInfo    0CDA14D8Ah
_NvAPI_OGL_ExpertModeSet    3805EF7Ah
_NvAPI_OGL_ExpertModeGet    22ED9516h
_NvAPI_OGL_ExpertModeDefaultsSet    0B47A657Eh
_NvAPI_OGL_ExpertModeDefaultsGet    0AE921F12h
_NvAPI_SetDisplaySettings   0E04F3D86h
_NvAPI_GetDisplaySettings   0DC27D5D4h
_NvAPI_GetTiming    0AFC4833Eh
_NvAPI_DISP_GetMonitorCapabilities  3B05C7E1h
_NvAPI_EnumCustomDisplay    42892957h
_NvAPI_TryCustomDisplay 0BF6C1762h
_NvAPI_RevertCustomDisplayTrial 854BA405h
_NvAPI_DeleteCustomDisplay  0E7CB998Dh
_NvAPI_SaveCustomDisplay    0A9062C78h
_NvAPI_QueryUnderscanCap    61D7B624h
_NvAPI_EnumUnderscanConfig  4144111Ah
_NvAPI_DeleteUnderscanConfig    0F98854C8h
_NvAPI_SetUnderscanConfig   3EFADA1Dh
_NvAPI_GetDisplayFeatureConfig  8E985CCDh
_NvAPI_SetDisplayFeatureConfig  0F36A668Dh
_NvAPI_GetDisplayFeatureConfigDefaults  0F5F4D01h
_NvAPI_SetView  957D7B6h
_NvAPI_GetView  0D6B99D89h
_NvAPI_SetViewEx    6B89E68h
_NvAPI_GetViewEx    0DBBC0AF4h
_NvAPI_GetSupportedViews    66FB7FC0h
_NvAPI_GetHDCPLinkParameters    0B3BB0772h
_NvAPI_Disp_DpAuxChannelControl 8EB56969h
_NvAPI_SetHybridMode    0FB22D656h
_NvAPI_GetHybridMode    0E23B68C1h
_NvAPI_Coproc_GetCoprocStatus   1EFC3957h
_NvAPI_Coproc_SetCoprocInfoFlagsEx  0F4C863ACh
_NvAPI_Coproc_GetCoprocInfoFlagsEx  69A9874Dh
_NvAPI_Coproc_NotifyCoprocPowerState    0CADCB956h
_NvAPI_Coproc_GetApplicationCoprocInfo  79232685h
_NvAPI_GetVideoState    1C5659CDh
_NvAPI_SetVideoState    54FE75Ah
_NvAPI_SetFrameRateNotify   18919887h
_NvAPI_SetPVExtName 4FEEB498h
_NvAPI_GetPVExtName 2F5B08E0h
_NvAPI_SetPVExtProfile  8354A8F4h
_NvAPI_GetPVExtProfile  1B1B9A16h
_NvAPI_VideoSetStereoInfo   97063269h
_NvAPI_VideoGetStereoInfo   8E1F8CFEh
_NvAPI_Mosaic_GetSupportedTopoInfo  0FDB63C81h
_NvAPI_Mosaic_GetTopoGroup  0CB89381Dh
_NvAPI_Mosaic_GetOverlapLimits  989685F0h
_NvAPI_Mosaic_SetCurrentTopo    9B542831h
_NvAPI_Mosaic_GetCurrentTopo    0EC32944Eh
_NvAPI_Mosaic_EnableCurrentTopo 5F1AA66Ch
_NvAPI_Mosaic_SetGridTopology   3F113C77h
_NvAPI_Mosaic_GetMosaicCapabilities 0DA97071Eh
_NvAPI_Mosaic_GetDisplayCapabilities    0D58026B9h
_NvAPI_Mosaic_EnumGridTopologies    0A3C55220h
_NvAPI_Mosaic_GetDisplayViewportsByResolution   0DC6DC8D3h
_NvAPI_Mosaic_GetMosaicViewports    7EBA036h
_NvAPI_Mosaic_SetDisplayGrids   4D959A89h
_NvAPI_Mosaic_ValidateDisplayGridsWithSLI   1ECFD263h
_NvAPI_Mosaic_ValidateDisplayGrids  0CF43903Dh
_NvAPI_Mosaic_EnumDisplayModes  78DB97D7h
_NvAPI_Mosaic_ChooseGpuTopologies   0B033B140h
_NvAPI_Mosaic_EnumDisplayGrids  0DF2887AFh
_NvAPI_GetSupportedMosaicTopologies 410B5C25h
_NvAPI_GetCurrentMosaicTopology 0F60852BDh
_NvAPI_SetCurrentMosaicTopology 0D54B8989h
_NvAPI_EnableCurrentMosaicTopology  74073CC9h
_NvAPI_QueryNonMigratableApps   0BB9EF1C3h
_NvAPI_GPU_QueryActiveApps  65B1C5F5h
_NvAPI_Hybrid_QueryUnblockedNonMigratableApps   5F35BCB5h
_NvAPI_Hybrid_QueryBlockedMigratableApps    0F4C2F8CCh
_NvAPI_Hybrid_SetAppMigrationState  0FA0B9A59h
_NvAPI_Hybrid_IsAppMigrationStateChangeable 584CB0B6h
_NvAPI_GPU_GPIOQueryLegalPins   0FAB69565h
_NvAPI_GPU_GPIOReadFromPin  0F5E10439h
_NvAPI_GPU_GPIOWriteToPin   0F3B11E68h
_NvAPI_GPU_GetHDCPSupportStatus 0F089EEF5h
_NvAPI_SetTopologyFocusDisplayAndView   0A8064F9h
_NvAPI_Stereo_CreateConfigurationProfileRegistryKey 0BE7692ECh
_NvAPI_Stereo_DeleteConfigurationProfileRegistryKey 0F117B834h
_NvAPI_Stereo_SetConfigurationProfileValue  24409F48h
_NvAPI_Stereo_DeleteConfigurationProfileValue   49BCEECFh
_NvAPI_Stereo_Enable    239C4545h
_NvAPI_Stereo_Disable   2EC50C2Bh
_NvAPI_Stereo_IsEnabled 348FF8E1h
_NvAPI_Stereo_GetStereoCaps 0DFC063B7h
_NvAPI_Stereo_GetStereoSupport  296C434Dh
_NvAPI_Stereo_CreateHandleFromIUnknown  0AC7E37F4h
_NvAPI_Stereo_DestroyHandle 3A153134h
_NvAPI_Stereo_Activate  0F6A1AD68h
_NvAPI_Stereo_Deactivate    2D68DE96h
_NvAPI_Stereo_IsActivated   1FB0BC30h
_NvAPI_Stereo_GetSeparation 451F2134h
_NvAPI_Stereo_SetSeparation 5C069FA3h
_NvAPI_Stereo_DecreaseSeparation    0DA044458h
_NvAPI_Stereo_IncreaseSeparation    0C9A8ECECh
_NvAPI_Stereo_GetConvergence    4AB00934h
_NvAPI_Stereo_SetConvergence    3DD6B54Bh
_NvAPI_Stereo_DecreaseConvergence   4C87E317h
_NvAPI_Stereo_IncreaseConvergence   0A17DAABEh
_NvAPI_Stereo_GetFrustumAdjustMode  0E6839B43h
_NvAPI_Stereo_SetFrustumAdjustMode  7BE27FA2h
_NvAPI_Stereo_CaptureJpegImage  932CB140h
_NvAPI_Stereo_CapturePngImage   8B7E99B5h
_NvAPI_Stereo_ReverseStereoBlitControl  3CD58F89h
_NvAPI_Stereo_SetNotificationMessage    6B9B409Eh
_NvAPI_Stereo_SetActiveEye  96EEA9F8h
_NvAPI_Stereo_SetDriverMode 5E8F0BECh
_NvAPI_Stereo_GetEyeSeparation  0CE653127h
_NvAPI_Stereo_IsWindowedModeSupported   40C8ED5Eh
_NvAPI_Stereo_AppHandShake  8C610BDAh
_NvAPI_Stereo_HandShake_Trigger_Activation  0B30CD1A7h
_NvAPI_Stereo_HandShake_Message_Control 315E0EF0h
_NvAPI_Stereo_SetSurfaceCreationMode    0F5DCFCBAh
_NvAPI_Stereo_GetSurfaceCreationMode    36F1C736h
_NvAPI_Stereo_Debug_WasLastDrawStereoized   0ED4416C5h
_NvAPI_Stereo_ForceToScreenDepth    2D495758h
_NvAPI_Stereo_SetVertexShaderConstantF  416C07B3h
_NvAPI_Stereo_SetVertexShaderConstantB  5268716Fh
_NvAPI_Stereo_SetVertexShaderConstantI  7923BA0Eh
_NvAPI_Stereo_GetVertexShaderConstantF  622FDC87h
_NvAPI_Stereo_GetVertexShaderConstantB  712BAA5Bh
_NvAPI_Stereo_GetVertexShaderConstantI  5A60613Ah
_NvAPI_Stereo_SetPixelShaderConstantF   0A9657F32h
_NvAPI_Stereo_SetPixelShaderConstantB   0BA6109EEh
_NvAPI_Stereo_SetPixelShaderConstantI   912AC28Fh
_NvAPI_Stereo_GetPixelShaderConstantF   0D4974572h
_NvAPI_Stereo_GetPixelShaderConstantB   0C79333AEh
_NvAPI_Stereo_GetPixelShaderConstantI   0ECD8F8CFh
_NvAPI_Stereo_SetDefaultProfile 44F0ECD1h
_NvAPI_Stereo_GetDefaultProfile 624E21C2h
_NvAPI_Stereo_Is3DCursorSupported   0D7C9EC09h
_NvAPI_Stereo_GetCursorSeparation   72162B35h
_NvAPI_Stereo_SetCursorSeparation   0FBC08FC1h
_NvAPI_VIO_GetCapabilities  1DC91303h
_NvAPI_VIO_Open 44EE4841h
_NvAPI_VIO_Close    0D01BD237h
_NvAPI_VIO_Status   0E6CE4F1h
_NvAPI_VIO_SyncFormatDetect 118D48A3h
_NvAPI_VIO_GetConfig    0D34A789Bh
_NvAPI_VIO_SetConfig    0E4EEC07h
_NvAPI_VIO_SetCSC   0A1EC8D74h
_NvAPI_VIO_GetCSC   7B0D72A3h
_NvAPI_VIO_SetGamma 964BF452h
_NvAPI_VIO_GetGamma 51D53D06h
_NvAPI_VIO_SetSyncDelay 2697A8D1h
_NvAPI_VIO_GetSyncDelay 462214A9h
_NvAPI_VIO_GetPCIInfo   0B981D935h
_NvAPI_VIO_IsRunning    96BD040Eh
_NvAPI_VIO_Start    0CDE8E1A3h
_NvAPI_VIO_Stop 6BA2A5D6h
_NvAPI_VIO_IsFrameLockModeCompatible    7BF0A94Dh
_NvAPI_VIO_EnumDevices  0FD7C5557h
_NvAPI_VIO_QueryTopology    869534E2h
_NvAPI_VIO_EnumSignalFormats    0EAD72FE4h
_NvAPI_VIO_EnumDataFormats  221FA8E8h
_NvAPI_GPU_GetTachReading   5F608315h
_NvAPI_3D_GetProperty   8061A4B1h
_NvAPI_3D_SetProperty   0C9175E8Dh
_NvAPI_3D_GetPropertyRange  0B85DE27Ch
_NvAPI_GPS_GetPowerSteeringStatus   540EE82Eh
_NvAPI_GPS_SetPowerSteeringStatus   9723D3A2h
_NvAPI_GPS_SetVPStateCap    68888EB4h
_NvAPI_GPS_GetVPStateCap    71913023h
_NvAPI_GPS_GetThermalLimit  583113EDh
_NvAPI_GPS_SetThermalLimit  0C07E210Fh
_NvAPI_GPS_GetPerfSensors   271C1109h
_NvAPI_SYS_GetDisplayIdFromGpuAndOutputId   8F2BAB4h
_NvAPI_SYS_GetGpuAndOutputIdFromDisplayId   112BA1A5h
_NvAPI_DISP_GetDisplayIdByDisplayName   0AE457190h
_NvAPI_DISP_GetGDIPrimaryDisplayId  1E9D8A31h
_NvAPI_DISP_GetDisplayConfig    11ABCCF8h
_NvAPI_DISP_SetDisplayConfig    5D8CF8DEh
_NvAPI_GPU_GetPixelClockRange   66AF10B7h
_NvAPI_GPU_SetPixelClockRange   5AC7F8E5h
_NvAPI_GPU_GetECCStatusInfo 0CA1DDAF3h
_NvAPI_GPU_GetECCErrorInfo  0C71F85A6h
_NvAPI_GPU_ResetECCErrorInfo    0C02EEC20h
_NvAPI_GPU_GetECCConfigurationInfo  77A796F3h
_NvAPI_GPU_SetECCConfiguration  1CF639D9h
_NvAPI_D3D1x_CreateSwapChain    1BC21B66h
_NvAPI_D3D9_CreateSwapChain 1A131E09h
_NvAPI_D3D_SetFPSIndicatorState 0A776E8DBh
_NvAPI_D3D9_Present 5650BEBh
_NvAPI_D3D9_QueryFrameCount 9083E53Ah
_NvAPI_D3D9_ResetFrameCount 0FA6A0675h
_NvAPI_D3D9_QueryMaxSwapGroup   5995410Dh
_NvAPI_D3D9_QuerySwapGroup  0EBA4D232h
_NvAPI_D3D9_JoinSwapGroup   7D44BB54h
_NvAPI_D3D9_BindSwapBarrier 9C39C246h
_NvAPI_D3D1x_Present    3B845A1h
_NvAPI_D3D1x_QueryFrameCount    9152E055h
_NvAPI_D3D1x_ResetFrameCount    0FBBB031Ah
_NvAPI_D3D1x_QueryMaxSwapGroup  9BB9D68Fh
_NvAPI_D3D1x_QuerySwapGroup 407F67AAh
_NvAPI_D3D1x_JoinSwapGroup  14610CD7h
_NvAPI_D3D1x_BindSwapBarrier    9DE8C729h
_NvAPI_SYS_VenturaGetState  0CB7C208Dh
_NvAPI_SYS_VenturaSetState  0CE2E9D9h
_NvAPI_SYS_VenturaGetCoolingBudget  0C9D86E33h
_NvAPI_SYS_VenturaSetCoolingBudget  85FF5A15h
_NvAPI_SYS_VenturaGetPowerReading   63685979h
_NvAPI_DISP_GetDisplayBlankingState 63E5D8DBh
_NvAPI_DISP_SetDisplayBlankingState 1E17E29Bh
_NvAPI_DRS_CreateSession    694D52Eh
_NvAPI_DRS_DestroySession   0DAD9CFF8h
_NvAPI_DRS_LoadSettings 375DBD6Bh
_NvAPI_DRS_SaveSettings 0FCBC7E14h
_NvAPI_DRS_LoadSettingsFromFile 0D3EDE889h
_NvAPI_DRS_SaveSettingsToFile   2BE25DF8h
_NvAPI_DRS_CreateProfile    0CC176068h
_NvAPI_DRS_DeleteProfile    17093206h
_NvAPI_DRS_SetCurrentGlobalProfile  1C89C5DFh
_NvAPI_DRS_GetCurrentGlobalProfile  617BFF9Fh
_NvAPI_DRS_GetProfileInfo   61CD6FD6h
_NvAPI_DRS_SetProfileInfo   16ABD3A9h
_NvAPI_DRS_FindProfileByName    7E4A9A0Bh
_NvAPI_DRS_EnumProfiles 0BC371EE0h
_NvAPI_DRS_GetNumProfiles   1DAE4FBCh
_NvAPI_DRS_CreateApplication    4347A9DEh
_NvAPI_DRS_DeleteApplicationEx  0C5EA85A1h
_NvAPI_DRS_DeleteApplication    2C694BC6h
_NvAPI_DRS_GetApplicationInfo   0ED1F8C69h
_NvAPI_DRS_EnumApplications 7FA2173Ah
_NvAPI_DRS_FindApplicationByName    0EEE566B2h
_NvAPI_DRS_SetSetting   577DD202h
_NvAPI_DRS_GetSetting   73BF8338h
_NvAPI_DRS_EnumSettings 0AE3039DAh
_NvAPI_DRS_EnumAvailableSettingIds  0F020614Ah
_NvAPI_DRS_EnumAvailableSettingValues   2EC39F90h
_NvAPI_DRS_GetSettingIdFromName 0CB7309CDh
_NvAPI_DRS_GetSettingNameFromId 0D61CBE6Eh
_NvAPI_DRS_DeleteProfileSetting 0E4A26362h
_NvAPI_DRS_RestoreAllDefaults   5927B094h
_NvAPI_DRS_RestoreProfileDefault    0FA5F6134h
_NvAPI_DRS_RestoreProfileDefaultSetting 53F0381Eh
_NvAPI_DRS_GetBaseProfile   0DA8466A0h
_NvAPI_Event_RegisterCallback   0E6DBEA69h
_NvAPI_Event_UnregisterCallback 0DE1F9B45h
_NvAPI_GPU_GetCurrentThermalLevel   0D2488B79h
_NvAPI_GPU_GetCurrentFanSpeedLevel  0BD71F0C9h
_NvAPI_GPU_SetScanoutIntensity  0A57457A4h
_NvAPI_GPU_SetScanoutWarping    0B34BAB4Fh
_NvAPI_GPU_GetScanoutConfiguration  6A9F5B63h
_NvAPI_DISP_SetHCloneTopology   61041C24h
_NvAPI_DISP_GetHCloneTopology   47BAD137h
_NvAPI_DISP_ValidateHCloneTopology  5F4C2664h
_NvAPI_GPU_GetPerfDecreaseInfo  7F7F4600h
_NvAPI_GPU_QueryIlluminationSupport 0A629DA31h
_NvAPI_GPU_GetIllumination  9A1B9365h
_NvAPI_GPU_SetIllumination  254A187h
_NvAPI_D3D1x_IFR_SetUpTargetBufferToSys 473F7828h
_NvAPI_D3D1x_IFR_TransferRenderTarget   9FBAE4EBh 
```

* * *

## 回答 #2

> 赞同：12
> 
> 时间：2013-01-22T19:53:16.140

有一种方法可以获取这些 ID。我用 VS dumpbin 工具反汇编了 nvapi.lib 并分析了结果。以下是当前函数及其 ID 的完整列表：

```
 NvAPI_GetUnAttachedAssociatedDisplayName  -  4888D790
                              NvAPI_Stereo_Disable  -  2EC50C2B
                       NvAPI_GPU_GetPCIIdentifiers  -  2DDFB66E
                         NvAPI_GPU_GetECCErrorInfo  -  C71F85A6
                       NvAPI_Disp_InfoFrameControl  -  6067AF3F
                       NvAPI_Mosaic_GetCurrentTopo  -  EC32944E
                                      NvAPI_Unload  -  D22BDD7E
                 NvAPI_EnableCurrentMosaicTopology  -  74073CC9
                          NvAPI_DRS_GetNumProfiles  -  1DAE4FBC
                    NvAPI_DRS_LoadSettingsFromFile  -  D3EDE889
                 NvAPI_Stereo_SetFrustumAdjustMode  -  7BE27FA2
                       NvAPI_Mosaic_SetCurrentTopo  -  9B542831
                      NvAPI_DRS_GetApplicationInfo  -  ED1F8C69
                             NvAPI_Stereo_Activate  -  F6A1AD68
                 NvAPI_Stereo_GetFrustumAdjustMode  -  E6839B43
                    NvAPI_D3D_SetFPSIndicatorState  -  A776E8DB
                NvAPI_GetLogicalGPUFromPhysicalGPU  -  ADD604D1
              NvAPI_GetAssociatedNvidiaDisplayName  -  22A78B05
                                   NvAPI_GetViewEx  -  DBBC0AF4
                      NvAPI_Stereo_CapturePngImage  -  8B7E99B5
               NvAPI_Stereo_GetSurfaceCreationMode  -  36F1C736
                                 NvAPI_GPU_GetEDID  -  37D32E69
NvAPI_Stereo_CreateConfigurationProfileRegistryKey  -  BE7692EC
                                  NvAPI_VIO_Status  -  0E6CE4F1
                 NvAPI_DRS_GetCurrentGlobalProfile  -  617BFF9F
                              NvAPI_VIO_GetPCIInfo  -  B981D935
                NvAPI_GetSupportedMosaicTopologies  -  410B5C25
                            NvAPI_VIO_SetSyncDelay  -  2697A8D1
                         NvAPI_GPU_SetIllumination  -  0254A187
                                NvAPI_VIO_GetGamma  -  51D53D06
                           NvAPI_Disp_ColorControl  -  92F9D80D
                           NvAPI_GetSupportedViews  -  66FB7FC0
                            NvAPI_DRS_LoadSettings  -  375DBD6B
                       NvAPI_DRS_CreateApplication  -  4347A9DE
                             NvAPI_EnumLogicalGPUs  -  48B3EA59
               NvAPI_Stereo_SetSurfaceCreationMode  -  F5DCFCBA
                       NvAPI_DISP_GetDisplayConfig  -  11ABCCF8
                    NvAPI_GetCurrentMosaicTopology  -  F60852BD
                             NvAPI_DisableHWCursor  -  AB163097
                  NvAPI_D3D9_AliasSurfaceAsTexture  -  E5CEAE41
                            NvAPI_GPU_GetBusSlotId  -  2A0A350F
                          NvAPI_GPU_GetTachReading  -  5F608315
                        NvAPI_Stereo_SetSeparation  -  5C069FA3
                        NvAPI_GPU_GetECCStatusInfo  -  CA1DDAF3
               NvAPI_VIO_IsFrameLockModeCompatible  -  7BF0A94D
                     NvAPI_Mosaic_EnumDisplayGrids  -  DF2887AF
                       NvAPI_DISP_SetDisplayConfig  -  5D8CF8DE
                 NvAPI_DRS_EnumAvailableSettingIds  -  F020614A
                               NvAPI_VIO_SetConfig  -  0E4EEC07
                     NvAPI_GPU_GetPerfDecreaseInfo  -  7F7F4600
                       NvAPI_SYS_GetLidAndDockInfo  -  CDA14D8A
                            NvAPI_GPU_GetPstates20  -  6FF81213
                           NvAPI_GPU_GetAllOutputs  -  7D554F8E
                  NvAPI_GPU_GetConnectedSLIOutputs  -  0680DE09
                               NvAPI_VIO_IsRunning  -  96BD040E
                                  NvAPI_Initialize  -  0150E828
                                   NvAPI_VIO_Close  -  D01BD237
                     NvAPI_Stereo_GetStereoSupport  -  296C434D
                              NvAPI_GPU_GetGPUType  -  C33BAEB1
                     NvAPI_Stereo_CaptureJpegImage  -  932CB140
                          NvAPI_DRS_GetProfileInfo  -  61CD6FD6
         NvAPI_Stereo_SetConfigurationProfileValue  -  24409F48
                        NvAPI_VIO_SyncFormatDetect  -  118D48A3
                         NvAPI_VIO_GetCapabilities  -  1DC91303
                       NvAPI_GPU_GetCurrentAGPRate  -  C74925A0
                                    NvAPI_I2CWrite  -  E812EB07
                        NvAPI_Stereo_GetSeparation  -  451F2134
                        NvAPI_GPU_GetPstatesInfoEx  -  843C0256
                 NvAPI_DRS_SetCurrentGlobalProfile  -  1C89C5DF
                         NvAPI_Mosaic_GetTopoGroup  -  CB89381D
           NvAPI_GPU_GetCurrentPCIEDownstreamWidth  -  D048C3B1
                       NvAPI_D3D9_RegisterResource  -  A064BDFC
            NvAPI_DRS_RestoreProfileDefaultSetting  -  53F0381E
                            NvAPI_VIO_GetSyncDelay  -  462214A9
                     NvAPI_GPU_GetVbiosOEMRevision  -  2D43FB31
                            NvAPI_GetVBlankCounter  -  67B5DB55
                     NvAPI_GetDisplayDriverVersion  -  F951A4D1
                            NvAPI_DRS_EnumSettings  -  AE3039DA
                NvAPI_GPU_QueryIlluminationSupport  -  A629DA31
                    NvAPI_GetLogicalGPUFromDisplay  -  EE1370CF
                        NvAPI_DRS_EnumApplications  -  7FA2173A
                    NvAPI_Mosaic_EnableCurrentTopo  -  5F1AA66C
                          NvAPI_Stereo_IsActivated  -  1FB0BC30
                                    NvAPI_VIO_Stop  -  6BA2A5D6
                          NvAPI_SYS_GetChipSetInfo  -  53DABBCA
                        NvAPI_GPU_GetActiveOutputs  -  E3E89B6F
                    NvAPI_DRS_GetSettingNameFromId  -  D61CBE6E
         NvAPI_GetPhysicalGPUFromUnAttachedDisplay  -  5018ED61
                 NvAPI_Mosaic_GetSupportedTopoInfo  -  FDB63C81
                                  NvAPI_GPU_GetIRQ  -  E4715417
                           NvAPI_GPU_GetOutputType  -  40A505E4
                            NvAPI_Stereo_IsEnabled  -  348FF8E1
                               NvAPI_Stereo_Enable  -  239C4545
                           NvAPI_GPU_GetSystemType  -  BAAABFCC
                                 NvAPI_GPU_SetEDID  -  E83D6456
               NvAPI_GetPhysicalGPUsFromLogicalGPU  -  AEA3FA32
                               NvAPI_VIO_GetConfig  -  D34A789B
                   NvAPI_GetInterfaceVersionString  -  01053FA5
                       NvAPI_GPU_ResetECCErrorInfo  -  C02EEC20
                    NvAPI_SetCurrentMosaicTopology  -  D54B8989
              NvAPI_DISP_GetDisplayIdByDisplayName  -  AE457190
                                     NvAPI_GetView  -  D6B99D89
NvAPI_Stereo_DeleteConfigurationProfileRegistryKey  -  F117B834
                          NvAPI_DRS_DestroySession  -  DAD9CFF8
                 NvAPI_GPU_WorkstationFeatureQuery  -  004537DF
                           NvAPI_VIO_QueryTopology  -  869534E2
              NvAPI_DRS_EnumAvailableSettingValues  -  2EC39F90
                          NvAPI_DRS_GetBaseProfile  -  DA8466A0
                   NvAPI_OGL_ExpertModeDefaultsGet  -  AE921F12
                     NvAPI_DRS_DeleteApplicationEx  -  C5EA85A1
                       NvAPI_D3D1x_CreateSwapChain  -  1BC21B66
                  NvAPI_GPU_GetConnectedDisplayIds  -  0078DBA2
                       NvAPI_DRS_FindProfileByName  -  7E4A9A0B
                     NvAPI_D3D9_UnregisterResource  -  BB2B17AA
                            NvAPI_DRS_EnumProfiles  -  BC371EE0
                             NvAPI_VIO_EnumDevices  -  FD7C5557
                           NvAPI_DRS_CreateProfile  -  CC176068
                          NvAPI_D3D9_StretchRectEx  -  22DE03AA
                              NvAPI_DRS_GetSetting  -  73BF8338
                       NvAPI_Stereo_InitActivation  -  C7177702
                     NvAPI_EnumNvidiaDisplayHandle  -  9ABDD40D
      NvAPI_GPU_GetConnectedSLIOutputsWithLidState  -  96043CC7
                  NvAPI_Stereo_DecreaseConvergence  -  4C87E317
                              NvAPI_GPU_GetBusType  -  1BB18724
                   NvAPI_DRS_FindApplicationByName  -  EEE566B2
                                NvAPI_D3D9_ClearRT  -  332D3942
               NvAPI_GPU_GetVirtualFrameBufferSize  -  5A04B644
                        NvAPI_GPU_GetAllDisplayIds  -  785210A2
                              NvAPI_DRS_SetSetting  -  577DD202
                       NvAPI_Stereo_GetConvergence  -  4AB00934
                        NvAPI_GPU_GetCurrentPstate  -  927DA4F6
                                  NvAPI_VIO_SetCSC  -  A1EC8D74
          NvAPI_CreateDisplayFromUnAttachedDisplay  -  63F9799E
                      NvAPI_DRS_SaveSettingsToFile  -  2BE25DF8
                           NvAPI_DRS_DeleteProfile  -  17093206
                   NvAPI_Stereo_Trigger_Activation  -  0D6C6CD2
                      NvAPI_GPU_GetThermalSettings  -  E3640A56
               NvAPI_Stereo_SetNotificationMessage  -  6B9B409E
             NvAPI_Stereo_CreateHandleFromIUnknown  -  AC7E37F4
                   NvAPI_Stereo_DecreaseSeparation  -  DA044458
               NvAPI_GPU_ValidateOutputCombination  -  34C9C2D4
             NvAPI_Stereo_ReverseStereoBlitControl  -  3CD58F89
                     NvAPI_GPU_GetConnectedOutputs  -  1730BFC9
                    NvAPI_DRS_GetSettingIdFromName  -  CB7309CD
                            NvAPI_EnumPhysicalGPUs  -  E5AC921F
                                  NvAPI_VIO_GetCSC  -  7B0D72A3
                        NvAPI_GPU_GetVbiosRevision  -  ACC3DA0A
               NvAPI_SYS_GetDriverAndBranchVersion  -  2926AAAD
                              NvAPI_SetDisplayPort  -  FA13E65A
              NvAPI_GPU_GetPhysicalFrameBufferSize  -  46FBEB03
                           NvAPI_DRS_CreateSession  -  0694D52E
                       NvAPI_VIO_EnumSignalFormats  -  EAD72FE4
                 NvAPI_GPU_GetECCConfigurationInfo  -  77A796F3
                     NvAPI_Mosaic_GetOverlapLimits  -  989685F0
                          NvAPI_GetHDMISupportInfo  -  6AE16EC3
                     NvAPI_Mosaic_EnumDisplayModes  -  78DB97D7
      NvAPI_Stereo_DeleteConfigurationProfileValue  -  49BCEECF
                           NvAPI_OGL_ExpertModeSet  -  3805EF7A
                  NvAPI_GetPhysicalGPUsFromDisplay  -  34EF9506
      NvAPI_Mosaic_GetDisplayViewportsByResolution  -  DC6DC8D3
                                    NvAPI_VIO_Open  -  44EE4841
                            NvAPI_DRS_SaveSettings  -  FCBC7E14
                        NvAPI_D3D9_CreateSwapChain  -  1A131E09
                    NvAPI_GPU_GetHDCPSupportStatus  -  F089EEF5
NvAPI_DISP_GetAssociatedUnAttachedNvidiaDisplayHandle  -  A70503B2
                        NvAPI_Stereo_DestroyHandle  -  3A153134
                      NvAPI_DRS_RestoreAllDefaults  -  5927B094
                                NvAPI_VIO_SetGamma  -  964BF452
                            NvAPI_GPU_GetBoardInfo  -  22D54523
                          NvAPI_DRS_SetProfileInfo  -  16ABD3A9
                 NvAPI_DISP_GetGDIPrimaryDisplayId  -  1E9D8A31
                        NvAPI_Stereo_SetDriverMode  -  5E8F0BEC
                      NvAPI_D3D_GetCurrentSLIState  -  4B708B54
                                   NvAPI_SetViewEx  -  06B89E68
                                     NvAPI_I2CRead  -  2FDE12C5
                   NvAPI_DRS_RestoreProfileDefault  -  FA5F6134
                          NvAPI_GetDisplayPortInfo  -  C64FF367
                                   NvAPI_VIO_Start  -  CDE8E1A3
                           NvAPI_OGL_ExpertModeGet  -  22ED9516
           NvAPI_EnumNvidiaUnAttachedDisplayHandle  -  20DE9260
          NvAPI_SYS_GetGpuAndOutputIdFromDisplayId  -  112BA1A5
                           NvAPI_Stereo_Deactivate  -  2D68DE96
                             NvAPI_GPU_GetFullName  -  CEEE8E9F
                    NvAPI_DRS_DeleteProfileSetting  -  E4A26362
                   NvAPI_OGL_ExpertModeDefaultsSet  -  B47A657E
                             NvAPI_GetErrorMessage  -  6C2D048C
                      NvAPI_SetRefreshRateOverride  -  3092AC32
                   NvAPI_Stereo_IncreaseSeparation  -  C9A8ECEC
                         NvAPI_GPU_GetGpuCoreCount  -  C7026A87
          NvAPI_SYS_GetDisplayIdFromGpuAndOutputId  -  08F2BAB4
                         NvAPI_GPU_GetIllumination  -  9A1B9365
                                     NvAPI_SetView  -  0957D7B6
            NvAPI_GetAssociatedNvidiaDisplayHandle  -  35C29134
                                NvAPI_GPU_GetBusId  -  1BE0B8E5
                       NvAPI_DRS_DeleteApplication  -  2C694BC6
                         NvAPI_Stereo_SetActiveEye  -  96EEA9F8
                          NvAPI_GPU_GetAGPAperture  -  6E042794
                NvAPI_GetAssociatedDisplayOutputId  -  D995937E
                              NvAPI_EnableHWCursor  -  2863148D
                     NvAPI_Stereo_GetEyeSeparation  -  CE653127
                 NvAPI_DISP_GetMonitorCapabilities  -  3B05C7E1
                       NvAPI_Stereo_SetConvergence  -  3DD6B54B
                 NvAPI_GPU_WorkstationFeatureSetup  -  6C1F3FE4
         NvAPI_GPU_GetConnectedOutputsWithLidState  -  CF8CAF39
                  NvAPI_Stereo_IncreaseConvergence  -  A17DAABE
                 NvAPI_GPU_GetDynamicPstatesInfoEx  -  60DED2ED
                   NvAPI_GPU_GetVbiosVersionString  -  A561FD7D
                     NvAPI_GPU_SetECCConfiguration  -  1CF639D9
                         NvAPI_VIO_EnumDataFormats  -  221FA8E8 
```

调用约定可以在 nvapi 库参考中找到

希望这可以帮助 ;）

问候，尼基

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2015-09-01T00:11:04.180

我已经对照 nvapi.dll 交叉引用了 NVIDIA 的运输驱动程序 (nView.map) 的一部分，以提出以下附加枚举数。

### 有些现在可能已经过时了（这是来自 2009 年的驱动程序版本）：

```
NvAPI_GetPhysicalGPUFromDisplay                 1890E8DA
NvAPI_GetPhysicalGPUFromGPUID                   5380AD1A
NvAPI_GetGPUIDfromPhysicalGPU                   6533EA3E
----
NvAPI_GetInfoFrameStatePvt                      7FC17574
NvAPI_GPU_GetMemoryInfo                         07F9B368
----
NvAPI_LoadMicrocode                             3119F36E
NvAPI_GetLoadedMicrocodePrograms                919B3136
NvAPI_GetDisplayDriverBuildTitle                7562E947
NvAPI_GetDisplayDriverCompileType               988AEA78
NvAPI_GetDisplayDriverSecurityLevel             9D772BBA
NvAPI_AccessDisplayDriverRegistry               F5579360
NvAPI_GetDisplayDriverRegistryPath              0E24CEEE
NvAPI_GetUnAttachedDisplayDriverRegistryPath    633252D8
NvAPI_GPU_GetRawFuseData                        E0B1DCE9
NvAPI_GPU_GetFoundry                            5D857A00
NvAPI_GPU_GetVPECount                           D8CBF37B
----
NvAPI_GPU_GetTargetID                           35B5FD2F
----
NvAPI_GPU_GetShortName                          D988F0F3
----
NvAPI_GPU_GetVbiosMxmVersion                    E1D5DABA 
NvAPI_GPU_GetVbiosImage                         FC13EE11
NvAPI_GPU_GetMXMBlock                           B7AB19B9
----
NvAPI_GPU_SetCurrentPCIEWidth                   3F28E1B9
NvAPI_GPU_SetCurrentPCIESpeed                   3BD32008
NvAPI_GPU_GetPCIEInfo                           E3795199
NvAPI_GPU_ClearPCIELinkErrorInfo                8456FF3D
NvAPI_GPU_ClearPCIELinkAERInfo                  521566BB
NvAPI_GPU_GetFrameBufferCalibrationLockFailures 524B9773
NvAPI_GPU_SetDisplayUnderflowMode               387B2E41
NvAPI_GPU_GetDisplayUnderflowStatus             ED9E8057
----
NvAPI_GPU_GetBarInfo                            E4B701E3
----
NvAPI_GPU_GetPSFloorSweepStatus                 DEE047AB
NvAPI_GPU_GetVSFloorSweepStatus                 D4F3944C
NvAPI_GPU_GetSerialNumber                       14B83A5F
NvAPI_GPU_GetManufacturingInfo                  A4218928
----
NvAPI_GPU_GetRamConfigStrap                     51CCDB2A
NvAPI_GPU_GetRamBusWidth                        7975C581
----
NvAPI_GPU_GetRamBankCount                       17073A3C
NvAPI_GPU_GetArchInfo                           D8265D24
NvAPI_GPU_GetExtendedMinorRevision              25F17421
NvAPI_GPU_GetSampleType                         32E1D697
NvAPI_GPU_GetHardwareQualType                   F91E777B
NvAPI_GPU_GetAllClocks                          1BD69F49
NvAPI_GPU_SetClocks                             6F151055
NvAPI_GPU_SetPerfHybridMode                     7BC207F8
NvAPI_GPU_GetPerfHybridMode                     5D7CCAEB
----
NvAPI_RestartDisplayDriver                      B4B26B65
NvAPI_GPU_GetAllGpusOnSameBoard                 4DB019E6
----
NvAPI_SetTopologyDisplayGPU                     F409D5E5
NvAPI_GetTopologyDisplayGPU                     813D89A8
NvAPI_SYS_GetSliApprovalCookie                  B539A26E
----
NvAPI_CreateUnAttachedDisplayFromDisplay        A0C72EE4
NvAPI_GetDriverModel                            25EEB2C4
NvAPI_GPU_CudaEnumComputeCapableGpus            5786CC6E
NvAPI_GPU_PhysxSetState                         4071B85E
NvAPI_GPU_PhysxQueryRecommendedState            7A4174F4
NvAPI_GPU_GetDeepIdleState                      1AAD16B4
NvAPI_GPU_SetDeepIdleState                      568A2292
----
NvAPI_GetScalingCaps                            8E875CF9
NvAPI_GPU_GetThermalTable                       C729203C
NvAPI_GPU_GetHybridControllerInfo               D26B8A58
NvAPI_SYS_SetPostOutput                         D3A092B1 
```

*作为非 NDA 开发人员，我不知道任何这些函数的任何数据结构或参数，它们仅在它们被证明对其他人有用的情况下才在此处列出，就像 sergeyklenov 的回答对我所做的那样。*

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2017-04-16T20:15:52.020

此处提供了 R375 x64 库的完整内存地址列表：

[https://github.com/falahati/NvAPIWrapper/blob/master/NvAPIWrapper/Native/Helpers/FunctionId.cs](https://github.com/falahati/NvAPIWrapper/blob/master/NvAPIWrapper/Native/Helpers/FunctionId.cs)

但是，这是一个很大的列表，不应该在这里发布。但是，要回答真正的问题，有一个脚本可以使用以下`dumpbin`命令为您提供相同的结果：

[https://github.com/falahati/NvAPIWrapper/blob/master/FunctionIdExtractor.ps1](https://github.com/falahati/NvAPIWrapper/blob/master/FunctionIdExtractor.ps1)

您应该能够使用它来获取所有函数及其内存地址的列表。

```
$filename = "R375-developer\amd64\nvapi64.lib"
$dumpbinAddress = "$Env:VS140COMNTOOLS..\..\VC\bin\dumpbin.exe"
$dumpbinParameter = "/DISASM $filename"
Start-Process $dumpbinAddress $dumpbinParameter -Wait -WindowStyle Hidden -RedirectStandardOutput "$filename.asm"
$content = Get-Content "$filename.asm"
$functionName = ""
foreach ($line in $content)
{
    if (!$line)
    {
        $functionName = ""
        continue;
    }
    if ($functionName -eq "" -and $line.EndsWith(":") -and ($line.StartsWith("NvAPI_") -or $line.StartsWith("?Module_InitializeHelper")))
    {
        $functionName = $line.TrimEnd(':')
        if ($functionName.StartsWith("?Module_InitializeHelper"))
        {
            $functionName = "NvAPI_Initialize"
        }
        continue;
    }
    $leadingPattern = "ecx,"
    if ($functionName -ne "" -and $line.Contains($leadingPattern) -and $line.EndsWith("h"))
    {
        $functionAddress = $line.Substring($line.IndexOf($leadingPattern) + $leadingPattern.Length).TrimEnd('h')
        $functionAddressNumberic = 0
        if ([int32]::TryParse($functionAddress, 
            [System.Globalization.NumberStyles]::HexNumber, 
            [System.Globalization.CultureInfo]::CurrentCulture, 
            [ref] $functionAddressNumberic))
        {
            $functionAddress = $functionAddressNumberic.ToString("X")
            Write-Host "$functionName = 0x$functionAddress,"
            $functionName = ""
            continue;
        }
    }
}
Remove-Item "$filename.asm" 
```

# python - 云管理或基础架构管理中的自动化语言

> ID：13291785
> 
> 赞同：0
> 
> 时间：2012-11-08T15:12:41.393
> 
> 标签：python, ruby, automation, cloud, iaas

我的问题与为云计算中的自动化任务学习的语言有关。它会是 python 还是 ruby​​ 或其他东西。我想成为云和数据中心/公司基础设施的自动化工程师。

谢谢和问候，你的朋友。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-08T15:29:06.000

有关 Puppert/Chef 的有趣 Python 对应物，请参阅[Ansible](http://ansible.cc/faq.html)。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-08T15:18:51.723

# c# - LINQ查找值的数组索引

> ID：13291788
> 
> 赞同：66
> 
> 时间：2012-11-08T15:12:47.773
> 
> 标签：c#, linq

假设我有以下字符串数组：

```
string[] str = new string[] {"max", "min", "avg", "max", "avg", "min"} 
```

是否可以使用 LINQ 获取与一个字符串匹配的索引列表？

例如，我想搜索字符串“avg”并获取一个包含

> 2、4

这意味着“avg”可以在 str[2] 和 str[4] 中找到。

* * *

## 回答 #1

> 赞同：126
> 
> 时间：2012-11-08T15:15:57.053

`.Select`有一个很少使用的产生索引的重载。你可以像这样使用它：

```
str.Select((s, i) => new {i, s})
    .Where(t => t.s == "avg")
    .Select(t => t.i)
    .ToList() 
```

结果将是一个包含 2 和 4 的列表。

[文档在这里](http://msdn.microsoft.com/en-us/library/bb534869.aspx)

* * *

## 回答 #2

> 赞同：23
> 
> 时间：2012-11-08T15:16:38.317

你可以这样做：

```
str.Select((v,i) => new {Index = i, Value = v}) // Pair up values and indexes
   .Where(p => p.Value == "avg") // Do the filtering
   .Select(p => p.Index); // Keep the index and drop the value 
```

关键步骤是使用为你的仿函数提供当前索引[的重载。`Select`](http://msdn.microsoft.com/en-us/library/bb534869.aspx)

* * *

## 回答 #3

> 赞同：7
> 
> 时间：2012-11-08T15:18:43.830

您可以使用`Enumerable.Select`传递索引的重载，然后`Enumerable.Where`在匿名类型上使用：

```
List<int> result = str.Select((s, index) => new { s, index })
                      .Where(x => x.s== "avg")
                      .Select(x => x.index)
                      .ToList(); 
```

如果您只想查找第一个/最后一个索引，您还可以使用内置方法[`List.IndexOf`](http://msdn.microsoft.com/en-us/library/e4w08k17.aspx)和`List.LastIndexOf`：

```
int firstIndex = str.IndexOf("avg");
int lastIndex = str.LastIndexOf("avg"); 
```

（或者您可以使用带有起始索引的[此重载](http://msdn.microsoft.com/en-us/library/s8t42k5w.aspx)来指定起始位置）

* * *

## 回答 #4

> 赞同：4
> 
> 时间：2014-10-29T14:02:11.457

首先，您的代码实际上并没有迭代列表两次，它只迭代一次。

也就是说，您的 Select 实际上只是获取所有索引的序列；使用 Enumerable.Range 更容易做到这一点：

```
 var result = Enumerable.Range(0, str.Count)
                 .Where(i => str[i] == "avg")
                 .ToList(); 
```

理解为什么列表实际上没有迭代两次需要一些时间来适应。我将尝试给出一个基本的解释。

您应该将大多数 LINQ 方法（例如 Select 和 Where）视为管道。每种方法都做了一些微小的工作。在 Select 的情况下，你给它一个方法，它本质上是说，“每当有人问我下一个项目时，我会首先向我的输入序列询问一个项目，然后使用我必须将其转换为其他东西的方法，然后把那个东西交给任何使用我的人。” 或多或少是在说，“每当有人问我要一个项目时，我会向我的输入序列询问一个项目，如果函数说它很好，我会传递它，如果不是，我会继续要求项目直到我得到一个通过。”

因此，当您将它们链接起来时，会发生 ToList 询问第一项，它转到 Where to 作为它的第一项， Where 转到 Select 并询问它的第一项， Select 转到列表以询问它的第一项物品。然后列表提供它的第一项。Select 然后将该项目转换为它需要吐出的内容（在这种情况下，只是 int 0）并将其提供给 Where。Where 获取该项目并运行它的函数，该函数确定它是真的，因此向 ToList 吐出 0，它将它添加到列表中。然后整个事情又发生了9次。这意味着 Select 最终将只要求列表中的每个项目一次，并将其每个结果直接提供给 Where，后者会将“通过测试”的结果直接提供给 ToList，后者将它们存储在列表中.

Note that, while this seems complicated at first to you, it's actually pretty easy for the computer to do all of this. It's not actually as performance intensive as it may seem at first.

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2012-11-08T15:23:57.607

虽然您可以使用 和 的组合`Select`，`Where`但这可能是制作您自己的函数的好选择：

```
public static IEnumerable<int> Indexes<T>(IEnumerable<T> source, T itemToFind)
{
    if (source == null)
        throw new ArgumentNullException("source");

    int i = 0;
    foreach (T item in source)
    {
        if (object.Equals(itemToFind, item))
        {
            yield return i;
        }

        i++;
    }
} 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2014-04-19T01:26:00.830

您需要一个组合的 select 和 where 运算符，与接受的答案相比，这会更便宜，因为不需要中间对象：

```
public static IEnumerable<TResult> SelectWhere<TSource, TResult>(this IEnumerable<TSource> source, Func<TSource, bool> filter, Func<TSource, int, TResult> selector)
        {
            int index = -1;
            foreach (var s in source)
            {
                checked{ ++index; }
                if (filter(s))
                    yield return selector(s, index);
            }
        } 
```

# mysql - OSGi 和 Hibernate - 不适合的驱动程序

> ID：13291789
> 
> 赞同：4
> 
> 时间：2012-11-08T15:12:53.187
> 
> 标签：mysql, hibernate, osgi, apache-felix, apache-karaf

我得到了以下情况。我`Apache Felix`用作 OSGi 服务实现和`Apache Karaf`OSGi 容器。有一个包`karaf`应该通过休眠将一些数据保存到数据库中，但我总是得到一个`SQLException: No Suitable Driver found.` 我部署`mysql-connector-bundle`到`karaf`. 在我看来，问题是休眠是否导入`mysql-driver-packages`应该映射的类或我的类。但我不知道如何解决这个问题。我很熟悉 eclipse rcp ，其中伙伴策略修复了此类问题，对于这个问题是否有任何最佳实践`felix`和`karaf`？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-08T16:20:41.727

你用的是什么版本的休眠？只有从 Hibernate 4 开始，hibernate 才知道 OSGi 类加载器，但它仍然没有完整的 OSGi 支持。请参阅例如[https://hibernate.onjira.com/browse/HHH-7527](https://hibernate.onjira.com/browse/HHH-7527)，它计划用于 Hibernate 4.2。

我们使用 Gemini JPA 和 eclipselink 作为 OSGi 中的 JPA 提供程序。

在 karaf 生态系统中，有 Aries JPA，主要与 OpenJPA 一起使用。请参阅[Apache Aries 托管 JPA 支持哪些 JPA 提供程序？](https://stackoverflow.com/questions/10157556/which-jpa-providers-are-supported-by-apache-aries-managed-jpa)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-08T17:02:28.733

Hibernate 无法访问来自其他包的数据和类（至少在 3.x 版中；我不知道版本 4）。只有当所有（使用休眠、pojos、映射文件、所有库的方法）都在同一个包中时，它才能轻松工作。它无法访问其他捆绑包中的资源。

另请参阅[我在此线程中的回答](https://stackoverflow.com/questions/12471804/osgi-fragment-bundle-with-hibernate-having-runtime-pojos/12480876#12480876)。

# git - 从 windows 到 mac 获取 git repo

> ID：13291791
> 
> 赞同：1
> 
> 时间：2012-11-08T15:12:54.793
> 
> 标签：git

尝试简单的克隆：

```
192-168-0-100:shop nonamez$ git clone "user@76.242.151.105/var/www/html/s1"
fatal: repository 'user@76.242.151.105/var/www/html/s1' does not exist
192-168-0-100:shop nonamez$ git clone "git://user@76.242.151.105/var/www/html/s1"
fatal: could not create work tree dir 's1'.: No such file or directory 
```

仅适用于 windows 版本

```
git.exe clone   --progress -v  "user@76.242.151.105:/var/www/html/s1" "C:\Users\Desktop\Projektai\s11" 
```

但它会创建带有名称的文件`C:\Users\Desktop\Projektai\s11`

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-08T17:19:16.150

而不是`user@76.242.151.105/var/www/html/s1`，您可能想要`user@76.242.151.105:/var/www/html/s1`或`ssh://user@76.242.151.105/var/www/html/s1`。

我提供的这两种表示是等效的。注意第一个表示中的冒号。第一个本质上是第二个的简写。这两个都使用 ssh 作为底层协议。`git://`是另一种使用本机协议的协议。

有关 git url 的更多详细信息，请键入`git help clone`或访问[此处](http://www.kernel.org/pub/software/scm/git/docs/git-clone.html)，然后转到“GIT URLS”部分。

# ios - 从两个 UIView 中的每一个中的三个点计算 CGAffineTransform 的值？

> ID：13291796
> 
> 赞同：3
> 
> 时间：2012-11-08T15:13:04.423
> 
> 标签：ios, objective-c, linear-algebra, cgaffinetransform, affinetransform

我有两个`UIView`s，每个都包含一个对象的视觉表示。我`CGPoint`在每个中都有三个已知的 s，`UIView`它们对应于该对象上的相同位置。我需要对其中一个视图应用变换，以便这三个点与另一个视图中的对应点完美对齐。

我需要处理缩放、旋转和平移，即仿射变换，并且我知道计算这种平移的参数的数学方法（参见[这个问题](https://stackoverflow.com/questions/2755771/affine-transformation-algorithm)）。我不明白的是如何在 Obj-C 中实际执行这些计算并将正确的数字插入`CGAffineTrasnformMake`. 看起来应该很明显，但出于某种原因，我认为我只是在这里遗漏了一些概念。

所以简而言之，给定 A 中`CGPoint`的 s (X1a,Y1a), (X2a,Y2a), (X3a,Y3a)`UIView`和 B 中的 (X1b,Y1b), (X2b,Y2b), (X3b,Y3b) `UIView`，怎么办我这样做是为了让自己 A`CGAffineTransform`我可以申请`UIView`B 吗？所以它与`UIView`A对齐？

顺便说一下，我的部署目标是 iOS 5；我不需要更早地支持任何东西。

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-06-12T06:52:58.090

我在 iOS 中需要完全相同的东西。这是我最终想出的……我知道代数计算，但我不知道如何使用 LAPACK。您需要添加 Accelerate 框架来计算矩阵逆。假设您在原始 UIView 中有点 p1、p2、p3，在转换后的 UIView 中有 q1、q2、q3：

```
CGPoint p1, p2, p3, q1, q2, q3;

// TODO: initialize points

double A[36];

A[ 0] = p1.x; A[ 1] = p1.y; A[ 2] = 0; A[ 3] = 0; A[ 4] = 1; A[ 5] = 0;
A[ 6] = 0; A[ 7] = 0; A[ 8] = p1.x; A[ 9] = p1.y; A[10] = 0; A[11] = 1;
A[12] = p2.x; A[13] = p2.y; A[14] = 0; A[15] = 0; A[16] = 1; A[17] = 0;
A[18] = 0; A[19] = 0; A[20] = p2.x; A[21] = p2.y; A[22] = 0; A[23] = 1;
A[24] = p3.x; A[25] = p3.y; A[26] = 0; A[27] = 0; A[28] = 1; A[29] = 0;
A[30] = 0; A[31] = 0; A[32] = p3.x; A[33] = p3.y; A[34] = 0; A[35] = 1;

int err = matrix_invert(6, A);
assert(err == 0);

double B[6];

B[0] = q1.x; B[1] = q1.y; B[2] = q2.x; B[3] = q2.y; B[4] = q3.x; B[5] = q3.y;

double M[6];

M[0] = A[ 0] * B[0] + A[ 1] * B[1] + A[ 2] * B[2] + A[ 3] * B[3] + A[ 4] * B[4] + A[ 5] * B[5];
M[1] = A[ 6] * B[0] + A[ 7] * B[1] + A[ 8] * B[2] + A[ 9] * B[3] + A[10] * B[4] + A[11] * B[5];
M[2] = A[12] * B[0] + A[13] * B[1] + A[14] * B[2] + A[15] * B[3] + A[16] * B[4] + A[17] * B[5];
M[3] = A[18] * B[0] + A[19] * B[1] + A[20] * B[2] + A[21] * B[3] + A[22] * B[4] + A[23] * B[5];
M[4] = A[24] * B[0] + A[25] * B[1] + A[26] * B[2] + A[27] * B[3] + A[28] * B[4] + A[29] * B[5];
M[5] = A[30] * B[0] + A[31] * B[1] + A[32] * B[2] + A[33] * B[3] + A[34] * B[4] + A[35] * B[5];

NSLog(@"%f, %f, %f, %f, %f, %f", M[0], M[1], M[2], M[3], M[4], M[5]);

CGAffineTransform transform = CGAffineTransformMake(M[0], M[2], M[1], M[3], M[4], M[5]); // Order is correct... 
```

这是 matrix_inverse 的定义，它是一个 C 函数。它是从另一个[SO 答案](https://stackoverflow.com/questions/11282746/how-to-perform-matrix-inverse-operation-using-the-accelerate-framework/11321499#11321499)修改而来的：

```
#import <Accelerate/Accelerate.h>
#include <stdlib.h>

int matrix_invert(long N, double *matrix) {

    long error=0;
    long *pivot = malloc(N*N*sizeof(long));
    double *workspace = malloc(N*sizeof(double));

    dgetrf_(&N, &N, matrix, &N, pivot, &error);

    if (error != 0) {
        // NSLog(@"Error 1");
        return error;
    }

    dgetri_(&N, matrix, &N, pivot, workspace, &N, &error);

    if (error != 0) {
        // NSLog(@"Error 2");
        return error;
    }

    free(pivot);
    free(workspace);
    return error;
} 
```

[这是 github 上的源代码](https://gist.github.com/laoyang/5763181)，稍后我可能会将其重构为一个采用 NSArray 的 CGPoints 的函数。

如果超过 3 个点，则需要通过最小二乘拟合求解。Matrix inverse 可以，但不是数值稳定的（结果可能会偏离很多），我以后可能还会将此解决方案添加到要点中。正确的方法是使用奇异值分解，我不知道如何使用 LAPACK。

# html - 检索 XSL 文件中的 XML 变量，如果找到则说“是”

> ID：13291798
> 
> 赞同：0
> 
> 时间：2012-11-08T15:13:10.177
> 
> 标签：html, xml, xslt, xpath

Xpath 表达式 test="$roles/roles/role='HOBSCS1GB'" 有问题。谁能帮忙解决。谢谢

```
<?xml version="1.0" encoding="UTF-8"?> 

<xsl:stylesheet version="1.0" xmlns:xsl="http://www.w3.org/1999/XSL/Transform" xmlns:fo="http://www.w3.org/1999/XSL/Format"> 

  <xsl:template match="/"> 

    <xsl:variable name="roles"> 
  <roles> 
    <role>HOBSCS1ROI</role> 
    <role>HOBSCS1GB</role> 
    <role>HOBSCS1FT</role> 
  </roles> 
    </xsl:variable> 

    <xsl:if test="$roles/roles/role='HOBSCS1GB'">
      <xsl:value-of select="'YES'"/>
    </xsl:if> 

  </xsl:template> 
</xsl:stylesheet> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-08T15:20:23.590

假设您要查找`roles`元素是否具有一个或多个角色元素，其中 text = 'HOBSCS1GB'：（在撒克逊工作）

```
<xsl:if test="$roles/roles[role='HOBSCS1GB']">
  <xsl:value-of select="'YES'"/>
</xsl:if> 
```

请注意，某些解析器（如 Microsoft）可能会要求您通过`$roles`使用 告诉解析器这是一个结果树片段，`node-set()`如下所示：（在 msxsl 中工作）

```
<xsl:stylesheet ... xmlns:msxsl="urn:schemas-microsoft-com:xslt" ... />

<xsl:if test="msxsl:node-set($roles)/roles[role='HOBSCS1GB']">
  <xsl:value-of select="'YES'"/>
</xsl:if> 
```

或者在 xsltproc 中：

```
<xsl:stylesheet ... xmlns:exsl="http://exslt.org/common" ... />

<xsl:if test="exsl:node-set($roles)/roles[role='HOBSCS1GB']">
  <xsl:value-of select="'YES'"/>
</xsl:if> 
```

# javascript - 如何使用 Hammer.js 和 JQuery 顺利移动元素？

> ID：13291800
> 
> 赞同：4
> 
> 时间：2012-11-08T15:13:21.363
> 
> 标签：javascript, jquery, html, css, hammer.js

我目前正在开发一个网络应用程序，它必须在计算机系统和平板电脑上运行。甚至可能是智能手机。现在，菜单在一页上，水平相邻。这个想法是你可以通过滑动内容来切换菜单，就像你可以在平板电脑和智能手机上做的那样。此外，还有一些供计算机用户使用的按钮，用于切换菜单。

菜单内容将使用 JQuery 的 AJAX 函数加载，菜单移动通过 JQuery 的动画函数。

现在我想知道如何正确制作这个动画。滑动时，我需要考虑速度、方向和距离。单击按钮时，应应用静态速度。

有人有什么想法吗？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-12-21T04:22:09.510

使用hammer.js 进行定制非常容易。如果您只是浏览他们提供的示例，它将使您对功能有一个公平的了解。但是，[此示例](http://jsfiddle.net/UzNhx/3/)将使您了解转换的方式。

如果你坚持使用 animate/hammer.js，这个结构会有所帮助::

```
 $('#elementID').hammer().on('swipe', function(e){
    e.preventDefault();
   $('#your-content-ID').animate({
       opacity: 0.25,
       left: '+=50',
       height: 'toggle'

     }, 5000, function() {
        // Animation complete.
       });

    }); 
```

# gwt - 包含 AutoBeanFactoryMagic 的 Jar

> ID：13291801
> 
> 赞同：0
> 
> 时间：2012-11-08T15:13:36.277
> 
> 标签：gwt, autobean

我应该包含什么 jar 来使用这个包：

```
import com.google.gwt.autobean.server; 
```

我尝试在 servlet 上使用以下类：

> AutoBeanFactoryMagic

我使用 GWT 2.4

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-08T15:24:06.293

[http://google-web-toolkit.googlecode.com/svn/javadoc/2.3/com/google/gwt/autobean/server/AutoBeanFactoryMagic.html](http://google-web-toolkit.googlecode.com/svn/javadoc/2.3/com/google/gwt/autobean/server/AutoBeanFactoryMagic.html)

注意注释：AutoBeans 已移至 com.google.web.bindery.autobeans。这个包将在 GWT 的未来版本中删除。

可能你正在寻找错误的东西......

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-08T15:35:30.790

它现在`AutoBeanFactorySource`在`com.google.web.bindery.autobean.vm`包中被调用，在`requestfactory-server.jar`, `requestfactory-client.jar`,`gwt-user.jar`和`gwt-servlet.jar`（我们正在致力于模块化以避免这种重复）。

# android - Errno 97 与 Android NDK 套接字编程

> ID：13291804
> 
> 赞同：1
> 
> 时间：2012-11-08T15:13:50.863
> 
> 标签：android, sockets, android-ndk

我在谷歌上搜索过，找不到解决这个问题的方法：

我正在尝试在我的 Android 设备上进行一些基本的套接字编程（客户端/服务器应用程序），但我没有任何运气来启动服务器应用程序。在我的本机代码中，我调用了 bind(...)，我从日志中看到它返回 -1。当我检查errno时，值为97（EAFNOSUPPORT），表示“协议不支持地址族”。当我检查 sin_family 的值时，它是 AF_INET，即 IPv4。Android NDK 不支持吗？如果不是，还有什么可能是导致此错误的原因？

套接字初始化为：

```
sock = socket(AF_INET, SOCK_STREAM, IPPROTO_TCP)); 
```

listenAddr 是一个 sockaddr_in 结构，初始化为：

```
sin_family = AF_INET;
sin_port = htons(9099);
sin_addr.s_addr = INADDR_NONE; 
```

调用绑定：

```
bindResult = bind(sock, (sockaddr *)listenAddr, sizeof(listenAddr)) 
```

绑定结果返回-1。对 errno 的后续调用返回 97。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-10T02:56:52.850

使用 INADDR_ANY（或特定接口的地址）而不是 INADDR_NONE。

INADDR_NONE 是一个无符号常量，其位模式与有符号值 -1 相同，作为来自某些调用的错误指示而返回。

# api - 如何正确设计一个RESTful API来使缓存失效？

> ID：13291805
> 
> 赞同：17
> 
> 时间：2012-11-08T15:13:53.153
> 
> 标签：api, rest, admin

我有一个应用程序需要来自 Service2 的数据，它将永远为给定的请求返回相同的答案，除非它的支持数据库被更新。数据库很少更新，比如说每年两次。

我想设计一个解决方案，以便应用程序缓存来自 Service2 的答案，但在外部提供一个功能以使应用程序的缓存无效。我想过从应用程序中公开一个 RESTful web 服务，但我对如何正确设计它感到困惑。

`/application/cache/invalidate`是一个非 RESTful URL - 我正在考虑`/application/cache/`使用 HTTP POST 调用。但是，在我看来，对于正确的 RESTful 设计，当使用 POST 更新资源时，要更新的内容应该包含在请求的正文中。

设计“InvalidateCache”宁静网络服务的正确方法是什么？

* * *

## 回答 #1

> 赞同：18
> 
> 时间：2012-11-08T16:21:28.553

考虑使用`DELETE`而不是`POST`和 url：

```
/application/cache/ 
```

在 REST 中，两者`PUT`和`DELETE`都被认为是幂等操作。也就是说，它们可以以相同的结果资源状态重复多次。在这种情况下，您的缓存是资源，多个`DELETE`' 将导致相同的状态，即清除缓存。

您可以考虑在您的 url 中添加一个描述符，以澄清您正在清除缓存的内容而不是删除缓存对象本身。就像是

```
/application/cache/contents 
```

也许，但这取决于你。走这条路还可能让您在必要时有选择地从缓存中删除。

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-11-08T20:38:27.287

这可能无法直接回答您的问题，但您可能还想查看[HTTP ETags](http://en.wikipedia.org/wiki/HTTP_ETag)，它非常适合在 RESTful 设计中进行缓存。

这个想法是应用程序将从 Service2 获取资源，这将返回资源以及 ETag 标头（它可以是最后修改的时间戳或哈希）。然后应用程序将该资源与 ETag 一起缓存。

当应用程序需要再次使用该资源时，它可以向 Service2 发送一个 HTTP GET，并带有它在缓存中的 ETag 标头。

*   如果 Service2 发现该资源自第一次返回给 Application 以来没有发生变化，则返回一个空响应，HTTP 状态为 304（未修改），表示 Application 可以使用缓存中的数据。
*   如果数据已更新，Service2 将返回带有新 ETag 标头（和 HTTP 状态 200）的新资源。

如果您不介意通过 HTTP GET 来查看资源是否已更改，并且 Service2 可以确定资源是否已更改（无需加载）是否容易，这种方法效果很好。

优点是 Service2 不必使其客户端（应用程序）的缓存无效，这可能不是一个很好的做法（如果您有很多客户端，可能很难做到）。

# php - 根据是否设置了变量 1 打印变量 1 或变量 2

> ID：13291807
> 
> 赞同：0
> 
> 时间：2012-11-08T15:14:01.470
> 
> 标签：php

如果设置了变量，我想`echo`变量，如果变量没有设置，我想变量。`$a``echo``$b``$a`

我尝试了一些东西，但它没有按预期工作：

```
 <?
    $a = "FOO";
    $b = "BAR";
    $c = $a OR $b;
    echo $c; #output : FOO

    //

    $a = false;
    $b = "BAR";
    $c = $a OR $b;
    echo $c; #output : 
  ?> 
```

我可以使用一个函数来做到这一点，比如

```
 function F($a,$b) {
      if($a) return $a;
      return $b;
   } 
```

或使用这个：

```
 $c = $a ? $a : $b; 
```

但**也许有更好的方法来做到这一点。我想要最快的方法来完成这个。**

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-08T15:18:55.577

你问对了`if it is set`<--`isset()`

所以

> $c = isset($a) ？$a : isset($b) ? $b : '两者都没有设置';

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-08T15:18:59.180

这是最接近您尝试做的事情：

```
$c = $a ?: $b; 
```

（它类似于`$c = $a || $b`JavaScript。）

请注意，这假设变量是实际设置的。如果它们没有设置（即，根本不存在），你真的应该使用`isset`.

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-08T15:19:00.427

据我说 $c = $a ？$a : $b; 是最好的方法

# asp.net - 使用 Jquery Ajax 带来部分数据

> ID：13291812
> 
> 赞同：0
> 
> 时间：2012-11-08T15:14:16.290
> 
> 标签：asp.net, jquery

我是 Jquery 的新手。我在 aspx 页面上有一个文本框。当输入 2 个字母时，文本框使用 jquery ajax 从 sql server 数据库中获取土耳其邮政编码。但是如果有超过 900 条记录要从 sql server 返回，jquery 会给出“internal server error”。我认为将数据带到文本框需要更多时间，但 jquery 不允许这样做并给出内部错误。现在我希望在第一次请求时提供部分数据。例如; 如果用户在文本框中输入 34，ajax 将不会带来所有以 34 开头的数据。它会带来前 100 个结果。然后当用户将滚动条滑动到记录的末尾时，将查询新记录并显示给用户。就像脸书帖子一样。有可能吗？如果是这样，如果您与我们分享示例代码，我会很高兴。

Javascript

```
$(function() {
$(".tb").autocomplete
        ({
             source: function(request, response) {
                $.ajax({
                    type: "POST",
                    url: "WebService_GetData.asmx/GetCmbPostaKod",
                    dataType: "json",
                    //data: "{ 'filterKey': '" + request.term + "','select1': '" + $('#cmbLogisticType').val() + "' }",
                    data: JSON.stringify({filterKey: request.term, lojtype:$('#cmbLogisticType').val(), ulke:$asp('ulke').val()}),
                    contentType: "application/json; charset=utf-8",
                    dataFilter: function(data) { return data; },
                    success: function(data) {
                        response($.map(data.d, function(item) {
                        return { value: item.PostaKodu, label: item.SemtAdi + ' / ' + item.IlceAdi + ' / ' + item.IlAdi + ' - ' + item.PostaKodu }
                        }))
                    },
                    error: function(XMLHttpRequest, textStatus, errorThrown) {
                        alert(errorThrown);
                    }
                });
            },
            minLength: 2,
            multiple: true,
            matchContains: true,
            formatItem: formatItem,
            formatResult: formatResult
        });
    }); 
```

aspx.cs 背后的代码

```
 [WebMethod]
    public List<PostaKod> GetCmbPostaKod(string filterKey, string lojtype, string ulke)
    {

        string stmt;
        DataTable dt;
        //myToolKit.AddValueToCombo(cmbVergiDairesi, "0", "Seçiniz");
        //myToolKit.AddValueToCombo(cmbSatisElemani, "0", "Seçiniz");
        FunctionsToolkit.InjectionKontrolEt(ref filterKey);
        mySqlKit.DoConnect();
        /*
        stmt = string.Format(@"SELECT ILADI, ILCEADI, SEMTADI, POSTAKODU, ULKEKODU FROM TBLPOSTAKODLARI (NOLOCK)
                               WHERE POSTAKODU LIKE '{0}%' AND ULKEKODU='{1}' ORDER BY POSTAKODU", filterKey, (lojtype=="3")?ulke:lojtype);
        */
        stmt = string.Format(@"EXEC sp_get_postakodu '{0}','{1}'",filterKey,(lojtype=="3")?ulke:lojtype);
        dt = mySqlKit.DoDTstr(stmt);
        mySqlKit.DoDisconnect();
        return mySqlKit.ComboDList(dt);
    } 
```

页面 aspx

```
 <div id="panel1">
       Nakliye Tipini Seçiniz* :
       <select name="LogisticType" id="cmbLogisticType" onchange="toggle(this.value)">
           <option value="1" selected="selected"> Seçiniz </option>
           <option value="90"> Şehiriçi </option>
           <option value="90"> Şehirlerarası </option>
           <option value="3"> Uluslararası </option>
        </select>
        <!--
       <asp:DropDownList ID="cmbPostaKodu" name="cmbPostaKodu" runat="server" class="combo">
       </asp:DropDownList>
       <select ID="cmbIl" name="cmbIl" runat="server" onchange="ilceGetir(this.options[this.options.selectedIndex].value)" class="combo"></select>
       <select ID="cmbIlce" name="cmbIlce" runat="server" class="combo"></select>-->
    </div>
    <div class="slidingDiv">
        <div class="slidingDiv2">
              Hareket Noktası (Ülke):
                <div class="ui-widget">
                    <div class="text1">
                        <asp:TextBox ID="ulke" class="tb" runat="server" onfocus="this.value = ( this.value == this.defaultValue ) ? '' : this.value;return true;">Ülke Seçiniz</asp:TextBox>
                    </div>
                </div>

                 Varış Noktası (Ülke):
                <div class="ui-widget">
                    <div class="text1">
                        <asp:TextBox ID="ulke2" class="tb" runat="server" onfocus="this.value = ( this.value == this.defaultValue ) ? '' : this.value;return true;">Ülke Seçiniz</asp:TextBox>
                    </div>
                </div>
        </div>
        Hareket Noktası (Posta Kodu):
        <div class="ui-widget">
            <div class="text1">
                <asp:TextBox ID="city" class="tb" runat="server" onfocus="this.value = ( this.value == this.defaultValue ) ? '' : this.value;return true;">Posta Kodu Giriniz</asp:TextBox>
            </div>
        </div>
        Varış Noktası (Posta Kodu): 
          <div class="ui-widget">

            <div class="text1">  
                <asp:TextBox ID="city2" class="tb" runat="server" onfocus="this.value = ( this.value == this.defaultValue ) ? '' : this.value;return true;">Posta Kodu Giriniz</asp:TextBox>
            </div>
        </div>
    </div> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-08T15:18:17.420

`TOP n`对您来说最简单的方法是使用（假设您使用 SQL Server）限制您的服务器端查询结果集。做`n`一个对你有意义的数字。没有用户会浏览 900 个选项。让它，比如说，20。

如果用户想要更多选项，则需要更多输入。

# javascript - Chrome JavaScript 调试：如何在值更改时中断

> ID：13291814
> 
> 赞同：17
> 
> 时间：2012-11-08T15:14:22.470
> 
> 标签：javascript, debugging, google-chrome

我正在调试一个大型 JavaScript 代码库，其中，在某些时候，刷新页面时“控制台”变量为空。

`(console == null)`有没有办法在控制台上设置监视并在该值更改（或条件为真）时使 JavaScript 中断执行？

我在 Windows 7 上使用 Chrome。

* * *

## 回答 #1

> 赞同：22
> 
> 时间：2012-11-08T15:20:22.757

下面的答案不起作用，`window.console`因为`console`（像其他浏览器原生环境变量一样）被特殊对待。任何试图将值分配给`console`仅“掩盖”原始值的尝试；它不会取代它。您无法检测到`console`值何时更改，但您可以`delete window.console`恢复原始环境提供的值。

对于其他值，用于[`Object.defineProperty`](https://developer.mozilla.org/en-US/docs/JavaScript/Reference/Global_Objects/Object/defineProperty)为一些全局定义自定义设置器`window.foobar`。`window.foobar`每当分配一个新值时，setter 函数就会运行：

```
(function() {
    var actualFoobar = window.foobar;

    Object.defineProperty(window, "foobar", {
        set: function(newValue) {
            if(newValue === null) { 
                alert("someone is clobbering foobar!"); // <-- breakpoint here!
            }

            // comment out to disallow setting window.foobar
            actualFoobar = newValue;
        },

        get: function() { return actualFoobar; }
    });

})(); 
```

然后，在该 setter 函数中放置一个断点。

这种方法适用于全局变量或任何对象属性（只需更改`window`为具有该属性的对象）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-08T15:18:22.240

浏览器实现的函数不能为空！从技术上讲。

如果`window.console.log`分配了功能`null`，则只需将其恢复删除即可！

```
delete console.log 
```

这将完成这项工作:)

编辑：这不是您的主要问题的答案，但我认为您的问题来自您寻找调试方法，所以这个答案基本上跳过了检测 var 更改的需要。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-08T15:20:20.327

你不能碰那个`console`物体……永远，永远。唯一可能发生的情况是，`console`在全局范围之外的范围/命名空间中声明了一个变量，从而隐藏了全局控制台。不过，您仍然可以使用 访问它`window.console`。除此之外，我能想到的唯一原因是：

*   您已在控制台覆盖中设置用户代理以模拟不支持的 IE 版本`console`
*   由于您的代码存在其他问题，您的代码会引发错误
*   正如@alexandernst 指出的那样：您正在覆盖控制台对象的属性。删除你无法访问的方法就可以了

* * *

要找出您需要在代码中查看的位置[设置条件断点](https://developers.google.com/chrome-developer-tools/docs/scripts-breakpoints)并观察几个表达式，并*使用**暂停未捕获异常**按钮*

# c# - 如何优化代码以运行并通过按钮 C# 调用它

> ID：13291815
> 
> 赞同：-6
> 
> 时间：2012-11-08T15:14:24.183
> 
> 标签：c#, user-interface, optimization, unity3d

在使用按钮做组合框时，我突然想到了，是否可以制作类似：“想要更多？好的。按下并得到它:)”例如，我有一个带有水果、蔬菜、浆果的组合框。因此，我选择了水果、蔬菜、浆果，并且我想重复相同的组合框，其中包含水果、蔬菜、浆果的列表。可能我可能需要“添加新水果、蔬菜、浆果”之类的东西。所以我的问题是：是否可以“添加新的水果、蔬菜、浆果”，如果可以，请提供一些反馈：D 问候，蒂姆

这是一个代码示例代码：

```
using UnityEngine;
using System.Collections;

public class hibye: MonoBehaviour 
{

    public string slectedItem = "None";
    private bool editing = false;

     public string slectedItem2 = "None";
    private bool editing2 = false;

    public string slectedItem3 = "None";
    private bool editing3 = false;

    private void OnGUI()
    {   
        if ( GUILayout.Button(slectedItem))
        {
            editing = true;
        }

        if (editing)
        {
         string[] sig = {"Banana","Apple","Orange"};

            for (int x = 0; x < sig.Length ; x++)
            {
                if (GUILayout.Button(sig[x]))
                {
                    slectedItem = sig[x];
                    editing = false;

                }
            }
        }
          if ( GUILayout.Button(slectedItem2))
        {
            editing2 = true;
        }

        if (editing2)
        {
         string[] sig = {"Cabbage","Potato","Paprika"};

            for (int x = 0; x < sig.Length ; x++)
            {
                if (GUILayout.Button(sig[x]))
                {
                    slectedItem2 = sig[x];
                    editing2 = false;

                }
            }
        }
          if ( GUILayout.Button(slectedItem3))
        {
            editing3 = true;
        }

        if (editing3)
        {
         string[] sig = {"Baneberry","Blackberry","Grape"};

            for (int x = 0; x < sig.Length ; x++)
            {
                if (GUILayout.Button(sig[x]))
                {
                    slectedItem3 = sig[x];
                    editing3 = false;

                }
            }
        }

    }

} 
```

我想让代码最短并添加另一个 GUILayout.Button，它允许我再次选择现有项目而不更改现有选择的项目。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-08T15:33:02.353

是的，可以满足您明确列出的范围要求。祝你旅途愉快。

# expressionengine - expresso 商店修饰符

> ID：13291817
> 
> 赞同：4
> 
> 时间：2012-11-08T15:14:29.940
> 
> 标签：expressionengine, custom-fields, modifiers, expresso-store

我正在为一家花店工作。花束有时有不止一种尺寸。我想在下拉菜单中提供不同的尺寸（即常规 = 30 英镑，中号 = 50 英镑，大号 = 70 英镑）。我想将此字段设置为自定义字段而不是修饰符，因为它适用于几乎所有花束（但不是全部），并且我的客户不得不将自己添加到产品输入表单中（离开措辞/样式错误的余地也太大了）。我可以使用自定义矩阵字段设置条目，但是如何对模板进行编码，以便商店在将价格添加到购物车时正确读取价格？

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-09T14:34:51.897

目前无法使用矩阵字段或类似字段来覆盖价格。您必须为每个产品单独输入修饰符（除非它们只是“文本修饰符，但不能根据需要调整价格）。我们正在寻找支持这一点的方法（同时仍然保持安全且不允许用户只需在表格中发布自己的价格）。

使用 PHP 可以做到这一点。有人已经在[批量折扣附加组件](http://devot-ee.com/add-ons/store-bulk-discount)中设法做到这一点- 这似乎使用 Matrix 来存储值。我没有机会看到这是如何完成的，但如果你想编写一些代码来解决你的问题，那将是一个很好的起点。

# python - Python Win32Gui 自动化 - 发送 WM_COPYDATA 从 BSPlayer 获取数据

> ID：13291818
> 
> 赞同：1
> 
> 时间：2012-11-08T15:14:34.247
> 
> 标签：python, automation, sendmessage, win32gui, wm-copydata

我正在拼命地尝试从我的脚本中自动化 BSPlayer。我成功地将简单的命令 ID 发送到 BSPlayer 窗口（音量增大/减小、播放/暂停等），但是我无法取回文件名。

[这](http://rtelsignal.narod.ru/bsplayer_api_pas.html)是 BSPlayer API。我能够在 python 中模拟第一部分，但是 WM_COPYDATA 不起作用。

这是我的 Python 代码：

```
copyDataCmd = COPYDATASTRUCT()
copyDataCmd.dwData = self.BSP_GetFileName
copyDataCmd.lpData = ""
copyDataCmd.cbData = 4                
win32gui.SendMessage(self.playerWindowHandler, win32con.WM_COPYDATA, 
                     ownHandler, copyDataCmd); 
```

显然 .lpData 返回 "" ...

我想效仿的：

```
cds:TCOPYDATASTRUCT; 
buf:array[0..MAX_PATH-1] of char; 
adr:pointer; // 
adr:=@buf; 
cds.dwData:=BSP_GetFileName; 
cds.lpData:=@adr; 
cds.cbData:=4; 
SendMessage(bsp_hand,WM_COPYDATA,appHWND,lParam(@cds)); 
// available in BSPlayer version 0.84.484+ // 
// appHWND is calling application window handle 
// File name will be copied to buf // 
// Get open file name 
BSP_GetFileName = $1010B; 
```

更详细地说，我试图从 BSPlayer 窗口中获取文件名。为此，我试图模拟上面的代码。我希望某种类型的缓冲区被我想要的字符串填充，但它是空的。所以，再次，我想要上面代码的 Python 等价物。

例如，此代码已成功模拟：

```
status := SendMessage(bsp_hand,WM_BSP_CMD,BSP_GetStatus,0); 
// available in BSPlayer version 0.84.484+ // 
// Return player status // 0 - STOP // 1 - PAUSE 
// 2 - PLAY // 4 - No movie   open        
BSP_GetStatus = $10102; 
```

提前致谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-09T13:29:22.957

您无法`WM_COPYDATA`在 Python 代码中复制它。它只能在进程内使用，例如插件。

示例 Delphi 代码是在假定调用`WM_COPYDATA`来自与接收消息的窗口相同的进程的情况下编写的。那是因为`WM_COPYDATA`用于复制指针，并且指针仅在分配内存的进程内有效。您不能跨进程边界发送指针。

在我看来，界面的设计者在滥用`WM_COPYDATA`. 它旨在用于解决进程之间传输数据的确切问题。它是可用的最简单最轻量级的进程间通信。然后使用它来传输指针会破坏该过程。

# html - PNG的HTML 3层

> ID：13291830
> 
> 赞同：0
> 
> 时间：2012-11-08T15:15:33.540
> 
> 标签：html, image, magento, html-table

一张桌子上可以有 3 层 png 吗？我正在尝试这样做： ![在此处输入图像描述](../Images/cf44378930da18cbe55298d24289e02c.png)

这是一个有 6 列的表。

*   灰色箭头 - 表背景图像
*   红色箭头 - 表格中的 PNG
*   蓝色箭头 - 热门产品横幅悬停

我在photoshop中做了这个渲染，我很好奇这是否可能我有一个可以使用蓝色和灰色的设置，但是让那个上面写着Top Products的栏似乎是一个挑战。请注意，这是在 Magento CMS 页面中完成的

编辑：这是我到目前为止的代码

```
<table width="900" border="0" cellpadding="0" cellspacing="0">
<tr>
<td width="150" height="120" background="http://the-garage.net/homefiles/background/section1.jpg"><img src="http://www.the-garage.net/homefiles/testproduct.png" height="130" /></td>
<td  width="150" height="120" background="http://the-garage.net/homefiles/background/section2.jpg"><img src="http://www.the-garage.net/homefiles/testproduct.png" height="130" /></td>
<td width="150" height="120" background="http://the-garage.net/homefiles/background/section3.jpg"><img src="http://www.the-garage.net/homefiles/testproduct.png" height="130" /></td>
<td  width="150" height="120" background="http://the-garage.net/homefiles/background/section4.jpg"><img src="http://www.the-garage.net/homefiles/testproduct.png" height="130" /></td>
<td  width="150" height="120" background="http://the-garage.net/homefiles/background/section5.jpg"><img src="http://www.the-garage.net/homefiles/testproduct.png" height="130" /></td>
<td  width="150" height="120" background="http://the-garage.net/homefiles/background/section6.jpg"><img src="http://www.the-garage.net/homefiles/testproduct.png" height="130" /></td>
</tr>
<tr>
<td> Description</td>
<td> Description</td>
<td> Description</td>
<td> Description</td>
<td> Description</td>
<td> Description</td>
</tr>

</table> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-08T15:28:57.067

确保您的表格使用绝对位置：

```
table {
position:absolute;
} 
```

之后，设置顶部、左侧、右侧或底部值以设置要放置表格的位置。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-08T15:33:23.117

您可以将该表放在包装器中，使包装器位置相对。然后添加顶级产品横幅并将其绝对定位。确保为横幅提供高 z-index 或将其放在包装器的最后。

# scala - 什么时候在 Scala 中使用 val、def 和 lazy val？

> ID：13291831
> 
> 赞同：3
> 
> 时间：2012-11-08T15:15:37.757
> 
> 标签：scala

> **可能重复：**
> [为什么在 Scala 中使用 def 和 val，反之亦然](https://stackoverflow.com/questions/12787670/why-use-def-and-val-in-scala-or-vice-versa)

显然，当有参数时，如果值依赖于可变对象，或者值依赖于 trait 成员，则必须使用 def。如果表达式可能引发异常，则不能使用 val。但如果两者都不是呢？更具体地说，在这种情况下是否有理由使用 def ？使用 val （当表达式不会抛出异常时）和惰性 val （当表达式可以抛出异常时）是否更可取？

例如：

```
class FifthElement(seq: Seq[Element]) {
  def hasFifthElement = seq.length > 5 // is it better to use val than def?
  def fifthElement = seq(5) // is it better to use lazy val than def?
} 
```

# ios - IOS UIWebView：在 safari 中打开链接

> ID：13291836
> 
> 赞同：3
> 
> 时间：2012-11-08T15:15:46.787
> 
> 标签：ios, uiwebview

我创建了自定义类，文件是 showBlock.h 和 showBlock.m，用于以编程方式加载 UIWebView，showBlock.m 的实现是

```
#import "showBlock.h"

@implementation showBlock;

@synthesize mainViewContObj;

- (void) showView {
    UIWebView *aWebView = [[UIWebView alloc] initWithFrame:CGRectMake(0, 0, 320, 50)];
    aWebView.autoresizesSubviews = YES;
    aWebView.autoresizingMask = (UIViewAutoresizingFlexibleHeight | UIViewAutoresizingFlexibleWidth);
    [aWebView setDelegate:[self mainViewContObj]];
    NSString *urlAddress = @"http://localhost/test/index.php";
    NSURL *url = [NSURL URLWithString:urlAddress];
    NSURLRequest *requestObj = [NSURLRequest requestWithURL:url];

    [aWebView loadRequest:requestObj];

    UIView *view = [[UIView alloc] initWithFrame:CGRectMake(0, 0, 0, 0)];
    [[[self mainViewContObj] view] addSubview:aWebView];

}
@end 
```

它工作正常，并加载带有 html 内容的 index.php 文件，但我想在 safari 浏览器中打开这个 html 文件的链接，我需要为此做些什么？

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-11-08T15:22:53.350

您需要在 ShowBlock.m 中添加下面的委托方法实现

```
- (BOOL)webView:(UIWebView *)webView shouldStartLoadWithRequest:(NSURLRequest *)request
 navigationType:(UIWebViewNavigationType)navigationType {
    // This practically disables web navigation from the webView.
    if (navigationType == UIWebViewNavigationTypeLinkClicked) {
        [[UIApplication sharedApplication] openURL:[request URL]];
        return FALSE;
    }
    return TRUE;
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-08T15:19:04.687

实现`UIWebViewDelegate`协议并设置`aWebView.delegate = self`.

然后实施

```
- (BOOL)webView:(UIWebView *)webView shouldStartLoadWithRequest:(NSURLRequest *)request navigationType:(UIWebViewNavigationType)navigationType; 
```

单击链接时将调用此方法。从请求中获取 URL。

使用下面的代码在 safari 中打开一个链接：

```
[[UIApplication sharedApplication] openURL:[NSURL URLWithString: @\"http://www.google.com"]]; 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-08T15:21:05.393

在您`UIWebView`委托中，定义`webView:shouldStartLoadWithRequest`方法：

```
- (BOOL)webView:(UIWebView*)webView shouldStartLoadWithRequest:(NSURLRequest*)request navigationType:(UIWebViewNavigationType)navigationType {

    if ([[request URL] checkCondition]) 
       [[UIApplication sharedApplication] openURL:[request URL]];
        return NO;
    }
    return YES;

} 
```

`checkCondition`是一种检查 URL 是否应由 safari 打开的方法（您可以根据域或其他内容进行检查）。在最简单的情况下，始终调用`openURL`（删除`if`）

# objective-c - 无法检查 iPhone 上是否存在配置文件

> ID：13291846
> 
> 赞同：4
> 
> 时间：2012-11-08T15:16:33.573
> 
> 标签：objective-c, ios, security, xcode4.5

我正在尝试检查 iPhone 上是否存在配置文件，我找到了以下关于如何操作的教程：http: [//alex.tapmania.org/2011/09/check_conf_prof_is_installed_ios.html](http://alex.tapmania.org/2011/09/check_conf_prof_is_installed_ios.html)

对我来说，它转化为以下代码：

```
NSString * certPath = [[NSBundle mainBundle] pathForResource:@"certificate" ofType:@"mobileconfig"];
    SecTrustRef trust;
    NSData * certData = [NSData dataWithContentsOfFile:certPath];
    SecCertificateRef cert = SecCertificateCreateWithData(NULL, (__bridge CFDataRef) certData);
    SecPolicyRef policy = SecPolicyCreateBasicX509();
    OSStatus err = SecTrustCreateWithCertificates((__bridge CFArrayRef) [NSArray arrayWithObject:(__bridge id)cert],policy, &trust);

    SecTrustResultType  trustResult = -1;
    err = SecTrustEvaluate(trust, &trustResult);

    if (trustResult ==4) {
        label.text=@"Profile installed";
    }
    else{
        label.text=@"Profile not installed";
    } 
```

应用程序在以下行崩溃：

```
OSStatus err = SecTrustCreateWithCertificates((__bridge CFArrayRef) [NSArray arrayWithObject:(__bridge id)cert],policy, &trust); 
```

我还注意到在这个阶段`cert`没有分配任何内存。

怎么了？这是正确的程序吗？如果没有，还有其他更有益的教程吗？

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-12-11T11:25:20.150

我最近解决了你遇到的同样的问题。您发布的代码和链接中的建议确实可用于检查配置文件是否存在。您遇到的障碍无疑是您的证书问题。

我使用 ShiningLight 的 openSSL for win32 创建了我的一对证书。可以在此处找到有关如何操作的完整说明：[http ://www.dylanbeattie.net/docs/openssl_iis_ssl_howto.html](http://www.dylanbeattie.net/docs/openssl_iis_ssl_howto.html)

但是请注意，有几个问题：

1.  创建根证书时，配置文件中的 basicconstraints=CA 设置必须设置为 TRUE（其他证书需要 FALSE）。

2.  为了让 IO 能够读取它们，两个证书都必须使用 DER 进行编码。要使用 openssl 执行此操作，您需要在两个证书上运行类似于**openssl x509 -in certs/cert.cer -out certs/certDER.cer -outform DER**的命令。我强烈怀疑是错误的编码导致您的代码崩溃。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-12T18:30:28.047

我不确定您为什么要通过代码执行此操作。已经有 Mac OSx 应用程序可以为您执行此操作。如果您打算做的事情不需要涉及代码，您可以从这个[Apple 链接下载这个名为](http://support.apple.com/kb/dl1465)**iPhone Configuration Utility**的 Mac 应用程序。具有许多功能，包括配置/查看/等安装在 iPhone 上的配置文件。

# coldfusion - 显示目录及其文件

> ID：13291847
> 
> 赞同：0
> 
> 时间：2012-11-08T15:16:34.540
> 
> 标签：coldfusion, cfdirectory

我正在尝试对指定路径中所有目录的输出以及每个目录中的文件进行分组。目前，我有：

```
 <cfset local.baseWebPath = ExpandPath( "./upload/views/files/" ) />
    <cfset custID = session.authUser.getuser_custid() />
    <cfset filters = "*.pdf|*.zip|*.doc*|*.ppt*|*.pps*|*.ai*|*.eps*|*.xls*|*.swf|*.rtf|*.psd|*.jpg|*.png|*.tif">

    <!---display directory for specific customer--->
        <cfdirectory 
            action = "list"
            directory = "#local.baseWebPath##left(custID, 5)#"
            name = "getFiles"
            filter = "#filters#" 
            recurse = "no"
            />
<cfoutput query="getFiles">
     <!---get the file name--->
     <cfset fname = ListFirst(getFiles.name, "." )>
     <!---get the file extenstion--->
     <cfset exten = ListLast(getFiles.name, ".")>
     <cfif getFiles.type eq "file" and getFiles.name neq "thumbs.db">
          <tr>
               <td align="absmiddle"><a href="#buildUrl('main.attachDownload?filename=#getFiles.name#')#">#fname#</a></td>
               <td align="absmiddle"><img src="/art/assets/images/fileTypes/#fileIcon#" title="#exten#"/></td>
               <td align="absmiddle">
                    <!---convert the file size from bytes into mb and kb--->
                    <cfif getFiles.size GT "1000000">
                         #numberformat(getFiles.size*.000001, 9.99)#Mb
                    <cfelse>
                         #numberformat(getFiles.size*.001, 9)#kb
                    </cfif>
               </td>
               <td align="absmiddle">#getFiles.dateLastModified#</td>
               <td align="absmiddle"><a href="#buildUrl('main.deleteFile?filename=#getFiles.name#')#" onClick="alert('Are you sure you want to delete this file?')"><img src="/art/assets/images/delete.png" title="delete file" /></a></td>
          </tr>
      </cfif> 
</cfoutput>    

    <!---display all directories and their files for admin--->
        <cfdirectory 
            action="list" 
            directory="#local.baseWebPath#" 
            name="allDirectories" 
            recurse="true"
            /> 
```

显示单个客户目录效果很好。但是，当管理员登录时，应显示所有目录以及按客户分组的文件。我怎样才能做到这一点？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-08T15:28:43.497

您可以使用 Query of Queries 正确排序

```
<cfquery name="getFiles" dbtype="query">
SELECT name, size, datelastmodified, directory
FROM getFiles
ORDER BY directory
</cfquery> 
```

然后你可以使用

```
<cfoutput query="getFiles" group="directory">
 #getFiles.directory# <!--- format to show only the custID --->
  <cfoutput>
   <!--- outupt table here --->
  </cfoutput>         
</cfoutput> 
```

# wxwidgets - wxGrid：如何在小网格周围放置外部窗口？

> ID：13291848
> 
> 赞同：0
> 
> 时间：2012-11-08T15:16:34.213
> 
> 标签：wxwidgets

**摘要：**我不知道如何设置主窗口尺寸，以便在 wxGrid 周围不使用滚动条而不更改列的默认宽度。

我想写一个简单的应用程序，用户可以看到有限数量的数字，她可以更正其中的一些并保存新内容。应用程序应该是一种简约。行数和单元格的数量足够小，无需滚动条即可放入窗口。这是一个简化的代码：

```
wxGrid *grid = new wxGrid(this, wxID_ANY, wxDefaultPosition, wxDefaultSize);
grid->CreateGrid(21, 12);

// Setting the column labels and filling the grid with some numbers.

grid->Fit(); 
```

网格下方会有一些按钮。目前，唯一的 sizer 包含唯一的控件——网格：

```
wxBoxSizer *topSizer = new wxBoxSizer(wxVERTICAL);
topSizer->Add(grid, 1, wxEXPAND);
SetSizer(topSizer); 
```

代码被放入我的`AppFrame`类的构造函数中。最后，我调用以下命令：

```
topSizer->Fit(this);
topSizer->SetSizeHints(this); 
```

它几乎完全符合我的需要，但有些列的标签更长，并且`Fit`列的宽度会发生变化。视觉上不好看。我应该调用什么而不是`Fit`获得相同的效果但不改变统一的列宽？

**更新：**实际上，我之前没有注意到，这也在`grid->Fit();`我的代码中被调用（现在添加到上面的示例中）。删除它后，网格不会在内部设置其尺寸并且窗口非常小（即使是左上角窗口的高度也不是完全可见的，宽度也比它多一点。然后我还`SetColSize`为每一列添加了（到我设置列格式的同一个地方）：

```
for (int i = 0; i < 12; ++i)
{
    grid->SetColSize(i, WXGRID_DEFAULT_COL_WIDTH);
    grid->SetColFormatFloat(i, -1, 3);
} 
```

这没有帮助，窗口比想要的要小。所以，问题可能应该改写：*填充网格如何捕获自己的尺寸以报告给外包装？*

**更新 2：**它仍然不起作用。构造函数的完整代码。（我知道，在椅子和键盘之间的某个地方...... :) 我个人认为 ia 有点脏代码（至少对于幻数而言） - 可能稍后会清理：

```
AppFrame::AppFrame() :
    wxFrame(NULL, wxID_ANY, "Month rates of Euro")
{
    InitDefaultRates();

    wxGrid *grid = new wxGrid(this, wxID_ANY, wxDefaultPosition, wxDefaultSize);

    // Fixed grid for 12 months (columns) and the years 2000 to 2020 (rows).
    //
    grid->CreateGrid(21, 12);

    grid->BeginBatch();

    // Set the column labes (in Czech -- to lazy to translate).
    //
    grid->SetColLabelValue(0,  "leden");
    grid->SetColLabelValue(1,  "únor");
    grid->SetColLabelValue(2,  "březen");
    grid->SetColLabelValue(3,  "duben");
    grid->SetColLabelValue(4,  "květen");
    grid->SetColLabelValue(5,  "červen");
    grid->SetColLabelValue(6,  "červenec");
    grid->SetColLabelValue(7,  "srpen");
    grid->SetColLabelValue(8,  "září");
    grid->SetColLabelValue(9,  "říjen");
    grid->SetColLabelValue(10, "listopad");
    grid->SetColLabelValue(11, "prosinec");

    // Float with 3 decimal places for each of the columns.
    //
    for (int i = 0; i < 12; ++i)
    {
        grid->SetColFormatFloat(i, -1, 3);
    }

    // Filling with the default values calculated from 
    // http://www.ecb.europa.eu/stats/eurofxref/eurofxref-hist.zip.
    // Index zero is for the year 2000.
    //
    for (int year = 0; year < 21; ++year)
    {
        ostringstream oss;
        oss << 2000 + year;
        grid->SetRowLabelValue(year, oss.str().c_str());

        for (int month = 0; month < 12; ++month)
        {
            double default_value = default_rates[year][month];
            double value = default_value;

            oss.str("");
            oss << setprecision(3) << fixed << value;

            // Problem with decimal point separator. Replace the locale
            // comma by dot.
            //
            wxString s(oss.str().c_str());
            string::size_type pos = s.find_first_of('.');
            if (pos != string::npos)
                s[pos] = ',';

            grid->SetCellValue(year, month, s);

            if (value == 0.0)
                grid->SetCellTextColour(year, month, *wxLIGHT_GREY);
            else if (value == default_value)
                grid->SetCellTextColour(year, month, *wxBLUE);
        }
    }

    // Setting the initial size of the grid.
    //
    grid->SetInitialSize(grid->GetBestSize());

    // Vertical size will be the top one.
    //
    wxBoxSizer *topSizer = new wxBoxSizer(wxVERTICAL);
    topSizer->Add(grid, 1, wxEXPAND);
    SetSizer(topSizer);

    // I do not understand this (could be a problem). From wxBook p. 196.
    //
    topSizer->Fit(this);
    topSizer->SetSizeHints(this);

    // Allow redraw.
    //
    grid->EndBatch();

    // Set cursor to the current month.
    //
    int year = wxDateTime::GetCurrentYear() - 2000;
    int month = wxDateTime::GetCurrentMonth();
    grid->GoToCell(year, month);
} 
```

感谢您的时间和经验，彼得

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-08T19:27:04.520

这是一个完整的工作程序：

```
#include "wx/app.h"
#include "wx/frame.h"
#include "wx/grid.h"
#include "wx/datetime.h"

class MyFrame : public wxFrame
{
public:
    MyFrame()
        : wxFrame(NULL, wxID_ANY, "Chronological data")
    {
        wxGrid *grid = new wxGrid(this, wxID_ANY);
        grid->CreateGrid(21, 12);

        for ( wxDateTime::Month m = wxDateTime::Jan; m < wxDateTime::Inv_Month; wxNextMonth(m) )
        {
            grid->SetColLabelValue(m, wxDateTime::GetMonthName(m));
            for ( int y = 0; y < 21; y++ )
            grid->SetCellValue(y, m, wxString::Format("%.2f", (float)rand() / RAND_MAX));
        }

        grid->InvalidateBestSize();
        SetClientSize(grid->GetBestSize());
    }
};

class MyApp : public wxApp
{
public:
    virtual bool OnInit()
    {
        (new MyFrame)->Show();
        return true;
    }
};

wxIMPLEMENT_APP(MyApp); 
```

请注意，对我来说，“September”不适合默认列宽，要么调用`AutoSizeColumns()`（但你不喜欢这样），要么只是统一增加列宽。

# php - PHP循环记录非常慢

> ID：13291851
> 
> 赞同：1
> 
> 时间：2012-11-08T15:16:40.967
> 
> 标签：php, mysql, loops, pdo, query-optimization

我正在使用 PDO。所以我有一个语句准备一个查询来选择一堆记录。例子：

```
 //select duplicates
   $stmt = $this->db->prepare('SELECT Name COUNT( * ) AS CNT
            FROM  `Test`
            GROUP BY Name
            HAVING CNT > 1');

   $stmt2 = $this->db->prepare('SELECT * FROM Test2 WHERE TName = ?'); 
```

请注意，我确实需要选择所有数据，而不是某些列。该表包含 5k 条记录，有时甚至更多。我需要选择所有 5k 记录，并且对于每个记录，我需要执行另一个查询来选择其他内容。

```
 $arr = array();
   while ($row = $stmt->fetch(DB::FETCH_ASSOC)) {
       $stmt2->execute($row['Name']);
       $arr[] = $stmt2->fetchAll(DB::FETCH_ASSOC);
   } 
```

我知道我可以使用连接，但对于我的情况，连接不起作用，因为我需要遍历数据并为每个 stmt1 行执行 stmt2。

当我运行它时，它最多需要 10-15 分钟，这是我不能允许的，我需要它更快。谁能告诉我问题是什么？5k 条记录似乎没有那么多循环。

```
 STMT1 returns up to 5.5k records 
```

我需要返回每个重复的数据：

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-11-08T15:23:45.257

加盟不行吗？高度怀疑：

```
SELECT test2.*, count(test.name) AS cnt
FROM test
LEFT JOIN test2 ON test2.id = test.id
GROUP BY test.name
HAVING (cnt > 1) 
```

考虑到 OP 的麻烦，再试一次：

```
SELECT *
FROM test2
WHERE name IN (
   SELECT DISTINCT name
   FROM test
   GROUP BY name
   HAVING (count(*) > 1)
) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-08T15:26:18.353

如果由于某种原因您不能使用 JOINS，请创建一个存储过程，它将以 id 作为参数并返回您需要的数据。

您还可以为您的 使用字典编码`Name`，因为使用整数的操作要快得多。

# windows-7 - 在 Windows 8 上运行的 Windows 7 桌面应用程序中的 Directory.CreateDirectory() 不会创建新目录

> ID：13291852
> 
> 赞同：1
> 
> 时间：2012-11-08T15:16:44.057
> 
> 标签：windows-7, windows-8

几个月前，我为 Windows 7 编写了一个 .NET 4.0 应用程序。现在，我在 Windows 8 上运行它，发现`Directory.CreateDirectory()`它不会创建新目录并且不会引发异常。我花了 2 天时间解决这个问题，但我没有找到解决方案。我使用 VS2010 和 Windows 7 来构建应用程序，使用 Windows 8 来检查是否正确执行。

我的代码如下所示：

```
try
{
    string folderName = Environment.GetFolderPath(Environment.SpecialFolder.Personal) + "\\New_Folder";
    //this works fine e.g. folderName is assigned 'C:\Users\neUser\New_Folder'
    if (!Directory.Exists(folderName))//this works fine too
    {
        Directory.CreateDirectory(folderName); //not creating directory 'New_Folder'
    }
}
catch(Exception)
{
    //do smothing
} 
```

请，有人可以帮我解决这个问题并解释什么是错的吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-08T15:19:05.210

您确定您拥有执行此操作的正确权限吗？尝试在目标位置手动创建一个文件夹。尝试以管理员身份运行应用程序。

# directx - d3d11.lib 和 d3dx11.lib 之间的根本区别

> ID：13291853
> 
> 赞同：0
> 
> 时间：2012-11-08T15:16:53.277
> 
> 标签：directx, libraries, directx-11

感谢 StackOverflow，我解决了一个困扰我一段时间的链接器错误。我假设库 d3d11 包含 d3dx11 的功能，这导致了混乱。

这两个库有什么区别？d3dx11 是否在其描述中仅提及“D3DX 实用程序库”。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-08T15:20:13.197

对于 directX 标头，但我认为 lib 应该是相同的：

> 这些文件包括不同的东西。d3d11.h 文件包含 Direct3D 的核心部分。d3dx11.h 文件包含 Direct3D 的扩展，这些扩展对于图形库来说不是必需的，但在编写游戏或其他图形程序时会派上用场。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2021-03-08T08:38:58.423

`d3d11.lib`是 Direct3D 11 API，它包含在您的 Windows 操作系统中。可以在[Windows SDK](https://developer.microsoft.com/en-us/windows/downloads/sdk-archive/)中找到最新版本的`d3d11*.h`头文件和库。`d3d11.lib`

这`d3dx11.lib`是 Direct3D 11 的“帮助”库，其中包括`D3DX11CreateTextureFromFile`和`D3DX11SaveTextureToFile`. 它是可选的，并且运行时 DLL*不是*Windows 操作系统的一部分——必须部署它才能让您的应用程序运行。

*Direct3D 9*（又名 D3DX9）的 D3DX 具有精灵、图案线、网格、字体、纹理加载/保存、BC (DXT1-5) 压缩、邻接计算、D3DXmath 和效果 (FX) 库的功能。它包括 HLSL 编译器。它还具有 MSR 的其他功能，例如渐进式网格、顶点缓存优化、uvatlas 等高线图和预计算辐射传输 (PRT)。

*Direct3D 10*（又名 D3DX10）的 D3DX 比 D3DX9 稍微精简一些，并利用 Windows 映像组件 (WIC) 进行图像 I/O。它支持 BC1-5 压缩。文件格式已`.x`被弃用，因此虽然 D3DX10 有一个网格对象，但它没有办法从磁盘创建或保存一个。包含 D3DXMath，与 D3DX9 版本相同。Direct3D 10 (FX10) 的效果系统被放入操作系统。HLSL 编译器被拆分为[D3DCompile](https://walbourn.github.io/hlsl-fxc-and-d3dcompile/) API。

*Direct3D 11*（又名 D3DX11）的 D3DX 是一个比以前版本小得多的库。它主要只是通过 WIC 和 BC1-7 压缩加载/保存纹理。D3DXMath 被 DirectXMath[取代](https://docs.microsoft.com/en-us/windows/win32/dxmath/directxmath-portal)。Direct3D 11 (FX11) 的效果已被弃用，运行时已成为[开源](https://github.com/Microsoft/FX11)项目。Direct2D 支持“模式线”和演示图形功能，并且 DirectWrite 应该替换字体功能。

[根据Microsoft Docs](https://docs.microsoft.com/en-us/windows/win32/directx-sdk--august-2009-)，D3DX9、D3DX10 和 D3DX11 连同旧版 DirectX SDK 均已弃用。

D3DX11有很多替代品，其中大部分是开源的。有关完整列表，请参阅[没有 D3DX 的生活。](https://walbourn.github.io/living-without-d3dx/)

> 对于需要 D3DX9/D3DX10/D3DX11 的旧代码库，您可以使用[Microsoft.DXSDK.D3DX](https://www.nuget.org/packages/Microsoft.DXSDK.D3DX) NuGet 包，而不是使用旧版 DirectX SDK。

# sql-server - 使用 INNER JOIN 从两个表中获取值时列名无效

> ID：13291855
> 
> 赞同：2
> 
> 时间：2012-11-08T15:17:01.807
> 
> 标签：sql-server, tsql, join, inner-join

我有两张桌子：

tbl_profiles_and_users：

```
[id] [int] IDENTITY(1,1) NOT NULL,
[profile_id] [int] NOT NULL,
[user_id] [nvarchar](50) NULL 
```

tbl_profiles_and_activities：

```
[id] [int] IDENTITY(1,1) NOT NULL,
[profile_id] [int] NOT NULL,
[user_id] [nvarchar](50) NOT NULL,
[activity_name] [nvarchar](50) NULL,
[check] [int] NULL,
[preferred] [int] NULL 
```

两个表中都有条目，我试图仅从指定的配置文件中选择用户和活动。

我正在尝试通过以下加入来做到这一点：

```
use [dbName]

SELECT p1.user_id AS User_ID, [p2.activity_name] as [Activity_Name]
FROM tbl_profiles_and_users AS p1 
INNER JOIN tbl_profiles_and_activities AS p2 
ON p1.user_id = p2.user_id AND p1.profile_id = p2.profile_id 
```

但我收到消息 Invalid column name 'p2.activity_name' 我做错了什么？我可以通过 Join 达到预期的结果吗？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-11-08T15:18:27.653

因为您正在转义整个列，因此服务器将其读取`[p2.activity_name]`为*整个*列名，这与`[p2].[activity_name]`

```
SELECT p1.user_id AS User_ID, [p2].[activity_name] as [Activity_Name]
FROM .... 
```

# angularjs - angularjs设置默认值以在评估之前显示

> ID：13291856
> 
> 赞同：5
> 
> 时间：2012-11-08T15:17:06.083
> 
> 标签：angularjs

我在现有网站上使用 angularJs 来实现非常简单的功能。

是这样的

```
<div ng-app>
    <div ng-controller="TermsController">
        <input type="checkbox" ng-model="terms.agree" />
        <input type="submit" value="{{terms.label}}" .. />
    </div>
</div> 
```

我将 angular 插入页面中间，一切正常，除了 angular 加载速度很慢，用户可以在 angular 评估其值之前看到 {{terms.label}} 片刻。

我试图做类似的事情

```
<input type="submit" value="Default value" ng-model="terms.label" .. /> 
```

但它从未更新提交按钮的值。无论如何，我敢打赌我见过这样的东西，但也许输入字段没有值属性，只有模型。

任何关于如何在加载 angularJs 之前设置模板的指导都值得赞赏。

我知道我可以设置一些预加载器并在加载 angular 后替换它，但对于这个简单的任务来说，这似乎是一种矫枉过正。

感谢帮助

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-11-08T16:12:45.630

`ng-cloak`您可以在加载期间隐藏具有该属性的元素：

```
<div ng-app>
    <div ng-controller="TermsController" ng-cloak>
        <input type="checkbox" ng-model="terms.agree" />
        <input type="submit" value="{{terms.label}}" .. />
    </div>
</div> 
```

参考：[http ://docs.angularjs.org/api/ng.directive:ngCloak](http://docs.angularjs.org/api/ng.directive:ngCloak)

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2012-11-08T18:12:50.710

对我们来说，使用 AngularJS 的现有版本可以做的最好的事情就是[ng-bind](http://docs.angularjs.org/api/ng.directive:ngBind)指令。从其文档中：

> 曾经使用 ngBind 优于 {{ expression }} 绑定的场景是，需要将绑定放入模板中，该模板在 Angular 编译之前由浏览器暂时以其原始状态显示。由于 ngBind 是一个元素属性，它使绑定在页面加载时对用户不可见。

要`ng-bind`在您的情况下进行工作，您必须将`input`标签更改为如下标签`button`：

```
<div ng-controller="TermsController">
    <input type="checkbox" ng-model="terms.agree">
    <button type="submit" ng-bind="terms.label">Before</button>
</div> 
```

这是一个有效的 jsFiddle：http: [//jsfiddle.net/TL33r/2/](http://jsfiddle.net/TL33r/2/)

您可以使用`ng-cloak`（有关更多信息，请参阅[另一个问题](https://stackoverflow.com/q/12866447/1418796)`ng-cloak`），但会隐藏整个 DOM 元素（及其子元素），而我相信您已经要求在 AngularJS 启动时将“默认”值更改为绑定。

# android - 为什么在使用 scrollBy 或 scrollTo 时会裁剪布局？

> ID：13291857
> 
> 赞同：3
> 
> 时间：2012-11-08T15:17:08.513
> 
> 标签：android, android-layout, scroll

我正在尝试使用该功能在自定义视图[`View::scrollBy(int, int)`](http://developer.android.com/reference/android/view/View.html#scrollBy%28int,%20int%29)中滚动 a `LinearLayout`。问题是，当在其中添加的视图高度时，`LinearLayout`内容`WRAP_CONTENT`在滚动时被剪裁。但是，当视图具有固定高度（例如 20 像素）时，不会发生此问题。我想使用`WRAP_CONTENT`固定高度的 instade。我怎样才能做到这一点？

我写了这个简单的代码来重现这个问题。您可以在此图像中看到问题：

![剪裁线性布局](../Images/4a9e180640df15fb3acbe00003367f18.png)

编码：

```
public class Scroll extends LinearLayout {
    private final Context context;

    private int currentY;

    public Scroll(Context context, AttributeSet attrs) {
        super(context, attrs);
        this.context = context;

        LayoutInflater.from(context).inflate(R.layout.scroll, this, true);

        LayoutParams params1 = new LinearLayout.LayoutParams(LinearLayout.LayoutParams.MATCH_PARENT, LinearLayout.LayoutParams.WRAP_CONTENT);
        LayoutParams params2 = new LinearLayout.LayoutParams(LinearLayout.LayoutParams.MATCH_PARENT, 19);

        fillRow((LinearLayout) findViewById(R.id.ll1), params1);
        fillRow((LinearLayout) findViewById(R.id.ll2), params2);
    }

    private void fillRow(LinearLayout linearLayout, LinearLayout.LayoutParams layoutParams) {
        for (int i = 0; i < 100; i++) {
            TextView textView = new TextView(context);
            textView.setBackgroundResource(android.R.color.white);
            textView.setLayoutParams(layoutParams);
            textView.setText(i + "");
            linearLayout.addView(textView);
        }
    }

    @Override
    public boolean onTouchEvent(MotionEvent event) {
        // Idea: https://stackoverflow.com/a/4991692/842697
        switch (event.getAction()) {
            case MotionEvent.ACTION_DOWN: {
                currentY = (int) event.getRawY();
                break;
            }

            case MotionEvent.ACTION_MOVE: {
                int y2 = (int) event.getRawY();
                int scrollY = currentY - y2;
                currentY = y2;

                findViewById(R.id.ll1).scrollBy(0, scrollY);
                findViewById(R.id.ll2).scrollBy(0, scrollY);

                break;
            }
            case MotionEvent.ACTION_UP: {
                break;
            }
        }
        return true;
    }
} 
```

`R.layout.scroll`这个 XML在哪里：

```
<?xml version="1.0" encoding="utf-8"?>
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:layout_width="match_parent"
    android:layout_height="match_parent"
    android:orientation="horizontal" >

    <LinearLayout
        android:id="@+id/ll1"
        android:layout_width="0dip"
        android:layout_height="match_parent"
        android:layout_weight="1"
        android:background="#FF0000"
        android:orientation="vertical" />

    <LinearLayout
        android:id="@+id/ll2"
        android:layout_width="0dip"
        android:layout_height="match_parent"
        android:layout_weight="1"
        android:background="#00FF00"
        android:orientation="vertical" />

</LinearLayout> 
```

[@Anne Droid](https://stackoverflow.com/users/1211663/anne-droid)在这个[相关问题](https://stackoverflow.com/q/12050935/842697)中评论了一个解决方法。但我不喜欢它的附带问题。

# d3.js - 如何处理 D3 中嵌套多个级别的数据？

> ID：13291858
> 
> 赞同：5
> 
> 时间：2012-11-08T15:17:19.137
> 
> 标签：d3.js

我有以下数据结构

```
 { key: 'a', 
   values: { key: 'a0', 
             values: { key: 'a00',
                       values: {...}
                     },
                     { key: 'a01',
                       values: {...}
                     }
           },
           { key: 'a1', 
             values: {...}
           }
 }, 
 { key: 'b',
   values: {...}
 } 
```

我看到了处理两级嵌套的示例，并且可以按照它们来处理数据。我只需要为每个具有 key 属性的元素绘制矩形，并根据该对象的其他一些属性确定其颜色和位置。这是接近我想做的示例代码

```
var data = [
    {
        key : 'dept1',
        values : [
            {
                key : 'group-1-1',
                values : [
                    {
                        key : 'emp-1-1-1',
                        salary : 10000
                    },
                    {
                        key : 'emp-1-1-2',
                        salary : 20000
                    },
                    {
                        key : 'emp-1-1-3',
                        salary : 30000
                    },
                    {
                        key : 'emp-1-1-4',
                        salary : 40000
                    }
                ]
            },
            {
                key : 'group-1-2',
                values : [
                    {
                        key : 'emp-1-2-1',
                        salary : 10000
                    },
                    {
                        key : 'emp-1-2-2',
                        salary : 20000
                    },
                    {
                        key : 'emp-1-2-3',
                        salary : 30000
                    },
                    {
                        key : 'emp-1-2-4',
                        salary : 40000
                    }
                ]
            }
        ]
    },
    {
        key : 'dept2',
        values : [
            {
                key : 'group-2-1',
                values : [
                    {
                        key : 'emp-2-1-1',
                        salary : 10000
                    },
                    {
                        key : 'emp-2-1-2',
                        salary : 20000
                    },
                    {
                        key : 'emp-2-1-3',
                        salary : 30000
                    },
                    {
                        key : 'emp-2-1-4',
                        salary : 40000
                    }
                ]
            },
            {
                key : 'group-2-2',
                values : [
                    {
                        key : 'emp-2-2-1',
                        salary : 10000
                    },
                    {
                        key : 'emp-2-2-2',
                        salary : 20000
                    },
                    {
                        key : 'emp-2-2-3',
                        salary : 30000
                    },
                    {
                        key : 'emp-2-2-4',
                        salary : 40000
                    }
                ]
            }
        ]
    },
    {
        key : 'dept3',
        values : [
            {
                key : 'group-3-1',
                values : [
                    {
                        key : 'emp-3-1-1',
                        salary : 10000
                    },
                    {
                        key : 'emp-3-1-2',
                        salary : 20000
                    },
                    {
                        key : 'emp-3-1-3',
                        salary : 30000
                    },
                    {
                        key : 'emp-3-1-4',
                        salary : 40000
                    }
                ]
            },
            {
                key : 'group-3-2',
                values : [
                    {
                        key : 'emp-3-2-1',
                        salary : 10000
                    },
                    {
                        key : 'emp-3-2-2',
                        salary : 20000
                    },
                    {
                        key : 'emp-3-2-3',
                        salary : 30000
                    },
                    {
                        key : 'emp-3-2-4',
                        salary : 40000
                    }
                ]
            }

        ]
    }
];

var svg = d3.select("body").append("svg").attr("width", "100%").attr("height", "100%");

var width = 200, height = 20, gap = 4, space = width + 2 * gap;

var sel = svg.selectAll("g").data(data).enter()
    .append("g")
    .attr("transform", function(d, i) {return 'translate(' + space * i + ', 0)'});

sel.append("rect").attr("x", gap).attr('y', gap).attr('width', width).attr('height', height)
    .attr('fill', 'green')
    .append('title').text(function(d) {return d.key});

var width1 = width/2 - gap;

var sel1 = sel.selectAll('g').data(function(d) {return d.values}).enter()
    .append('rect')
    .attr('x', function(p, i) {return gap + i * (width1+gap)}).attr('y', 2*gap + height)
    .attr('width', width1).attr('height', height)
    .attr('fill', 'blue')
    .append('title').text(function(p) {return p.key});

var width1 = width/4 - 3 * gap;

var sel2 = sel1.selectAll('g').data(function(d) {return d.values}).enter()
    .append('rect').text(function(k) {return k.key})
    .attr('x', function(p, i) {return gap + i * width1}).attr('y', 3*gap + 2*height)
    .attr('width', width1).attr('height', height)
    .attr('fill', 'cyan')
    .append('title').text(function(p) {return p.key}); 
```

我期待绘制三行矩形。在此代码中，前两行正确显示，但第三行根本不显示。我查看了 javascript 控制台，看起来第三行矩形被附加到第二行矩形的标题上。希望这有助于展示我在这里的要求。这是我应该在这里循环的方式还是有更好的方法？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-26T17:17:31.410

也许您可以使用类似于@nautat 发布的递归解决方案来回答我关于使用 d3 嵌套 HTML 表的问题？[https://stackoverflow.com/a/13412059/658053](https://stackoverflow.com/a/13412059/658053)一旦掌握了递归的要点，我就可以对其进行修改以适应我的实际数据和规格。

诀窍是您`.filter`在某些条件下执行 a ，或者`.call`在与过滤器匹配的单元格上执行递归函数，或者在与不同类型的过滤器匹配的项目上处理基本情况。

祝你好运！

# c - 哪些类型通过引用传递，哪些通过值传递？

> ID：13291862
> 
> 赞同：2
> 
> 时间：2012-11-08T15:17:32.070
> 
> 标签：c, types, ref

如果我传递一个 int ，它将按值传递。
`void something(int i)`
如果我传递某种类型的数组，它将通过引用传递。
`void something(int i[])`
或者 `void something(int *i);`

像 int 这样的类型将通过值传递，数组将作为引用传递。

第一个问题是，是否还有更多类型可以通过引用传递？第二个问题是，数组的第一遍和第二
遍有什么区别？`(int i[])``(int *i)`

编辑：我会澄清我的问题。您传递给函数的其他类型（例如数组）将在函数内部进行更改。（正如您所解释的，这并不完全是通过引用传递）。

```
void something(int i[])
{
i[0]=5;
}

something(i); 
```

这不仅会在本地更改数组。

结构呢？工会？指向它们的指针也通过了吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-08T15:19:31.557

在 C 中，所有类型都按值传递。数组实际上并没有在函数调用中传递——当你声明一个数组参数时，编译器会默默地用一个指针替换数组，当你调用它时，你传递数组的地址第一个元素。

指针也按值传递。只是当你复制一个指针时，你仍然可以修改指向的值，所以它与传递引用非常相似（但不完全相同）。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-11-08T15:44:47.800

一切都是按价值传递的，期间。

不同之处在于 C 如何处理数组*表达式*。除非它是、 或 一元运算符的操作数`sizeof`，或者是用于在声明中初始化另一个数组的字符串文字，否则“N-element array of ”类型的表达式将被转换（“decay”）为类型为“pointer to ”的表达式，表达式的值将是数组第一个元素的地址。`_Alignof``&``T``T`

所以给出一个像这样的声明

```
int a[10] = {0}; 
```

每当表达式`a`出现在代码中除`&a`,`sizeof a`或之外的任何位置时`_Alignof a`，它将被转换为指针表达式，并且表达式的值将是 的地址`a[0]`，无论表达式是否被传递给函数。

所以在像这样的函数调用中

```
foo(a); 
```

将表达式`a`转换为指针表达式，并将*指针表达式*( `&a[0]`) 的值传递给函数。

同样，在函数参数声明中，`T a[]`和`T a[N]`被解释为`T *a`; 无论数组表示法如何，参数都被声明为指针，而不是数组。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-11-08T15:19:46.897

*C 中的所有*内容都是按值传递的。数组不是通过引用传递的，而是衰减到一个指针，就像所有其他指针一样，它是按值传递的。

按值传递指针意味着它所保存的地址被复制，并且在您使用此副本操作的函数中，该副本指向与外部指针相同的数据。但是，尝试在函数中更改指针本身的值不会影响调用者传递的指针：

```
void fn (int *ptr)
{
  // this is OK and the data that the pointer points to will be updated, 
  // even though the pointer itself is a copy
  *ptr = 5;

  // this will not have an effect out of the function since ptr is merely a copy
  ptr = NULL;
} 
```

在上面的示例中，如果要更改 的值`ptr`，则必须将函数声明为具有`int **`参数，而不是`int *`：

```
void fn (int **ptr)
{
  *ptr = NULL;
}
...
int *x;
// at this point, x is uninitialised
fn(&x);
// x is now NULL 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-11-08T15:19:05.397

所有类型都按值传递，但（在函数调用上下文中）数组名称的值是第一个元素的地址。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-11-08T15:20:07.530

您可以想到的任何数据类型（甚至是您枚举的数据类型）都可以作为引用或值传递。

# android - 在 View 上创建视频屏蔽外观

> ID：13291864
> 
> 赞同：0
> 
> 时间：2012-11-08T15:17:38.767
> 
> 标签：android, android-view, android-video-player

我正在创建一个将播放来自网络的视频文件的活动。那部分运作良好。

在视频中的某些点，我需要在视频上叠加视图。视图将具有基本的 UI 元素，主要是按钮和一些文本（无法预先确定）。

我希望覆盖看起来好像是视频的一部分，而不一定是本机 UI 元素。我遇到的主要问题是，由于视频质量有些低，它有很多“阻塞”，而 UI 元素的绘制非常清晰。

谁能建议如何向 UI 元素添加“阻止”？

我的想法是我可以覆盖`draw()`父元素并以某种方式使用过滤器来创建效果，但我将如何做到这一点超出了我的范围。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-09T15:25:51.257

最后，我找到了一个适合我的解决方案。它涉及将视图作为位图抓取，将其缩小，然后使用将其拉伸回原始大小。这给出了块状、像素化的外观。我可以通过更改缩放时的大小差异来精确控制块的获取方式。

确保`this.setDrawingCacheEnabled(true);`在构造函数中设置。

```
private static final float RESAMPLE_QUALITY = 0.66f; // less than 1, lower = worse quality

public void draw(Canvas canvas) {
    super.draw(canvas);
    Bitmap bitmap_old = this.getDrawingCache();
    Bitmap bitmap_new = Bitmap.createScaledBitmap(bitmap_old, Math.round(bitmap_old.getWidth() * RESAMPLE_QUALITY), Math.round(bitmap_old.getHeight() * RESAMPLE_QUALITY), true);
    Rect from = new Rect(0, 0, bitmap_new.getWidth(), bitmap_new.getHeight());
    RectF to = new RectF(0, 0, bitmap_old.getWidth(), bitmap_old.getHeight());
    canvas.drawBitmap(bitmap_new, from, to, null);
} 
```

# c# - 如何找到输入的密钥代码

> ID：13291866
> 
> 赞同：-2
> 
> 时间：2012-11-08T15:17:48.017
> 
> 标签：c#

如何在 c# .net 页面加载中找到输入的密钥代码。我想检查输入的密钥是否是“ENTER”键。我尝试了一些但没有工作

```
ConsoleKeyInfo info = Console.ReadKey();
if (info.Key == ConsoleKey.Enter)
{
    Console.WriteLine("You pressed enter!");
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-08T15:22:13.400

尝试这个

```
 private void name(object sender, KeyPressEventArgs e)
    {
        if (e.KeyChar == 13)
        {
            Console.WriteLine("Enter Pressed");                
        }
    } 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-08T15:23:39.493

您可以使用 Jquery 将 keydown 事件附加到复选框并检查 event.keycode == 13 (Enter)：

```
var input = $("#textBox");
$(input).keydown(function (event) {
  if (event.keyCode == 13) {
    alert("Enter!")
  }
}); 
```

把它带到你的 c# 是另一回事，因为它不清楚你正在使用什么框架。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-08T15:41:39.093

我用它来确定用户是否在文本框中按下“Enter”键，但你可以将它应用到任何东西上。

```
private void textBox1_KeyPress(object sender, KeyPressEventArgs e)
{
    /* Check if the user hit the 'ENTER" key */
    if (e.KeyChar == (char)Keys.Return)
    {
        /* Do Something */
    }
} 
```

# java - 从 JButton 的 addActionListener 关闭 JFame

> ID：13291870
> 
> 赞同：0
> 
> 时间：2012-11-08T15:18:02.043
> 
> 标签：java, swing, jframe, jbutton

如何在 JButton`setVisible(false)`的函数中调用 JFrame `addActionListener`（如下所示）：

```
jButton.addActionListener(new ActionListener() {
  public void actionPerformed(ActionEvent arg0) {
   //here           
  }
}); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-08T15:21:41.450

假设你有一个声明如下的变量：

```
JFrame frame; 
```

你只需要打电话：

```
frame.setVisible(false); 
```

否则，如果您在扩展类中`JFrame`，则必须：

```
NameOfClass.this.setVisible(false); 
```

或者甚至比使用`setVisible(false)`, you ca `dispose()`it 更好。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-08T15:27:46.883

您只需要在定义按钮操作的位置可访问框架。您可以通过制作`JFrame`final 或将其作为`Action`定义的类中的字段来做到这一点：

```
import java.awt.event.*;
import javax.swing.*;

public class CloseFrame extends JPanel{

    public CloseFrame(final JFrame frame){

        JButton button = new JButton("Hide Screen");
        button.addActionListener(new ActionListener(){

            @Override
            public void actionPerformed(ActionEvent e) {
                //What you asked for:
                frame.setVisible(false);
                // What you should use instead of the above:
                //frame.dispose(); 
            }});

        add(button);
    }

    public static void main(String[] args){
        final JFrame frame = new JFrame();
        frame.setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);
        frame.add(new CloseFrame(frame));
        frame.pack();
        frame.setSize(400, 300);
        frame.setLocationRelativeTo(null);
        frame.setVisible(true);
    }
} 
```

**编辑**

另请注意，`JFrame.dispose()`如果您真的想关闭应用程序，您可能应该使用。

# mysql - MYSQL联合查询查找另一个表？

> ID：13291873
> 
> 赞同：0
> 
> 时间：2012-11-08T15:18:15.127
> 
> 标签：mysql, count, union

我有一个查询（如下），它将检查 3 个表中的匹配项。所有 3 个表都有 UID 和 IPADDRESS 列；第三个表也有 USERNAME。如何更改下面的查询以使用与 ipaddress 匹配的唯一用户名列表填充变量 $username？

因此，在每个表中，ipaddress 匹配的 UID 可能是 2、3、6、6、23、2、6，因为有多个条目，并且有人可能欺骗了其他 ip。我想要的是用与 UID 2、3、6、23（唯一列表）匹配的用户名填充 $username 的查询。我必须告诉你我对 MySQL 和查询完全陌生。这是查询：

```
error_reporting(E_ALL & ~E_NOTICE & ~8192);
$UAM = strtoupper($_SERVER['HTTP_USER_AGENT']);
$ips = strtoupper($_SERVER['REMOTE_ADDR']);

$myquery= "select sum(total)
FROM (SELECT count(*) as total,userid
      FROM " .TABLE_PREFIX."memberviews v
      where v.ipaddress = '$ips'
      union all
      SELECT count(*) as total,userid
      FROM " .TABLE_PREFIX."membervisits v1
      where v1.ipaddress = '$ips'
      union all
      SELECT count(*) as total,userid
      FROM " .TABLE_PREFIX."user v3
      where v3.ipaddress = '$ips'
      )src";

$result = mysql_query($myquery);
$rowCount = mysql_num_rows($myquery);
$row = mysql_fetch_array($myquery);
$username = $row['userid'];

    If($rowCount !=0){
      $fp = fopen("logtext.txt", "a");
$DateOfRequest = date('m-d-Y H:i:s');
fwrite($fp, "Registration Attempt\n\nDate: . $DateOfRequest . \nMatched Member: . $username . \nWith User Agent:  . $UAM . \nIP: . $ips . \n\n");
    }
mysql_free_result($myquery); 
```

当前，查询的工作量与写入文件的时间一样多。所有帮助表示赞赏:)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-08T15:39:52.757

如果我正确理解您的问题，这将为您提供与 IP 地址关联的用户名列表：

```
SELECT username
  FROM uses AS u
  JOIN (SELECT userid
          FROM memberviews AS v1
         WHERE v1.ipaddress = $ips
        UNION
        SELECT userid
          FROM membervisits AS v2
         WHERE v2.ipaddress = $ips
        UNION
        SELECT userid
          FROM user AS v3
         WHERE v3.ipaddress = $ips
       ) AS v ON u.userid = v.userid 
```

在大多数情况下，我对 SQL 进行了非 PHP 处理——`$ips`标记了需要 IP 地址的位置。UNION（没有 ALL）消除了重复的用户 ID 值；唯一用户 ID 列表与 User 表连接以生成相应的用户名。

请注意，这将生成多行，每个用户名一行。您的问题在输出中的用户 ID 和用户名之间不明确；如果你只需要数字，你只需要UNION子查询作为主查询。有一些 MySQL 机制，例如 GROUP_CONCAT，可以从列表中创建单个值。阅读手册。

# css - 在 IE7 中，具有相对定位子项的父项与子项一起移动

> ID：13291876
> 
> 赞同：0
> 
> 时间：2012-11-08T15:18:20.400
> 
> 标签：css, internet-explorer-7, position, css-position

我设置了一个`<nav>`包含无序列表的链接，并在每个`<li>`.

因为我使用的字体在每个字符上方都有很大的空间，所以我设置`position: relative`了链接，并将它们向上推了 6 个像素，因此它们与 parent 的边框紧密`<li>`。

除了 IE7（可能在下面）之外，这在任何地方都可以正常工作，其中整个`<li>`及其子`<a>`项似乎向上推了 6 个像素，这使我的导航偏离了位置。

这是一个 jsfiddle 来显示我的代码：http: [//jsfiddle.net/SD3Xj/](http://jsfiddle.net/SD3Xj/)

如果您想查看实时站点以了解它在 IE7 中的外观，请访问[http://jasonbradberry.com](http://jasonbradberry.com)

有什么建议可以解决这个问题吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-08T21:59:17.603

这些 CSS 规则将解决您遇到的问题：

```
nav { margin-top: -80px; padding-bottom: 33px; }

nav ul { float: right; position: relative; }

nav li { float:left; display:inline; border-top: 10px solid #7a7a7a; margin-right: 16px; }

nav li.active { border-top: 20px solid #29cf86;}

nav a {} 
```

只需简单地将 CSS 规则替换为上述规则即可。

# javascript - 可调整大小的元素

> ID：13291884
> 
> 赞同：0
> 
> 时间：2012-11-08T15:18:42.940
> 
> 标签：javascript, jquery, html, jquery-ui, jquery-resizable

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-11-08T15:23:04.080

`resizable()`仅适用于块元素。`A`是一个内联元素。

此链接的样式需要包括`display:block;`

# html - 如何将项目符号转换为水平列表？

> ID：13291891
> 
> 赞同：7
> 
> 时间：2012-11-08T15:18:51.600
> 
> 标签：html, css, list

我想在我的水平列表中显示光盘项目符号。

我知道一旦我们在 CSS:`display: inline;`中定义，类定义：`list-style-type: disc`就不起作用了。

所以这一直是我的解决方案：

```
 <ul>
                    <li>· EN</li>
                    <li>· ES</li>
                    <li>· ES</li>
                    <li>· DE</li>
                    <li>· FR</li>
                </ul> 
```

我已经手动将符号圆盘项目符号点放在我的水平列表中，然后我在我的头部声明了这一点：`<meta http-equiv="content-type" content="text/html;charset=utf-8" />`.

在我的 coda 编辑器预览中，它们看起来不错，但如果我尝试浏览它，我会得到 - 这个。

为什么？我怎样才能找出问题所在？否则，在水平列表中显示光盘项目符号的最佳解决方案是什么？

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2012-11-08T15:20:52.327

您可以将它们保留为块并执行以下操作，而不是`display:inline`为您选择：`li`

```
li {
    float:left; 
} 
```

然后，您可以根据需要调整边距。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-11-08T15:21:22.113

试试**display:inline-block**

**CSS**

```
ul li{
    display:inline-block;
} 
```

在 IE6 和 IE7 中工作：

**CSS**

```
ul li{
    display:inline-block;
    zoom:1;
} 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-11-08T17:04:20.010

你方法的问题是双重的。首先，您使用的字符“·”不是子弹；它是具有多种用途的中间点，主要用作文本中的分隔符。BULLET “•”字符更合适。其次，您声明了 UTF-8，这很好，但是您的文档实际上需要进行 UTF-8 编码，而且显然是（相反，从这里看，它可能是 windows-1252 编码的）。

但作为不需要解决编码问题的快速解决方案，您可以使用实体引用编写 BULLET `&bull;`，例如`<li>&bull;&nbsp;EN</li>`.

当然还有其他方法。但是如果你设置`display: inline`了 ，那么浏览器将不会生成项目符号，因为它们只会对`display: list-item`. 您需要将项目符号包含到元素内容中，或者使用生成的内容（使用`:before`伪元素）。

# groovy - 迄今为止的 Groovy 字符串

> ID：13291892
> 
> 赞同：0
> 
> 时间：2012-11-08T15:18:51.903
> 
> 标签：groovy, soapui, simpledateformat

我正在尝试使用 SimpleDateFormat 解析字符串，但生成的日期似乎偏离了几个月（星期几、时间（不同时区）和年份是正确的）。

```
def headers = messageExchange.getResponseHeaders() 
def String dateHeader = headers.get("Date",null)

log.info "DATE:" + dateHeader

SimpleDateFormat dateFormat = new SimpleDateFormat("[EEE, dd MMM YYYY HH:mm:ss zzz]")
Date c = dateFormat.parse(dateHeader)

log.info c 
```

输出：

```
DATE:[Thu, 08 Nov 2012 14:08:22 GMT]
INFO: Thu Jan 05 15:08:22 CET 2012 
```

欢迎所有想法！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-08T15:51:10.773

年份的日期格式应使用“y”而不是“Y”。

# javascript - ReferenceError: ajaxCall 未定义

> ID：13291901
> 
> 赞同：1
> 
> 时间：2012-11-08T15:19:06.317
> 
> 标签：javascript, html, ajax

我有点迷路了……我有一个网站，里面有很多 AJAX 调用。我尝试了一些 JavaScript 文本字段格式，但这太难处理了，所以我决定在没有它的情况下恢复正常。但是现在我的 Ajax 调用都没有工作，我不知道为什么......我得到的只是这个错误：

```
ReferenceError: name-of-the-call is not defined 
```

这些调用位于“scripts.js”文件中，并且从一开始就包含在标题中。

这是我现在的标题，带有上传脚本和输入字段之间的箭头键导航。

```
<head>
<title>The title</title>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8" />
<link rel="stylesheet" type="text/css" href="style.css" />
<link rel="stylesheet" type="text/css" href="/scripts/uploadify.css">
<script type="text/javascript" src="http://ajax.googleapis.com/ajax/libs/jquery/1.7.1/jquery.min.js"></script>
<script type="text/javascript" src="/scripts/jquery.uploadify.min.js"></script>
<script type="text/javascript" src="scripts.js"></script>
<script type="text/javascript" src="/scripts/ajaxsubmit.js"></script>
    <script type="text/javascript">
        <?php $timestamp = time();?>
        $(function() {
            $('#file_upload').uploadify({
                'formData'     : {
                    'timestamp' : '<?php echo $timestamp;?>',
                    'token'     : '<?php echo md5('unique_salt' . $timestamp);?>'
                },
                'height'   : 25,
                'buttonText' : 'bla bla...',
                'onUploadSuccess' : function(file, data, response) {
                    document.getElementById("uploadedId").innerHTML+='<p style="margin: 0px;"><img width="25px" src="/img/success.png" /><b>' + data + '</b></p>';
                    var str = document.getElementById("uploadedFiles").value;
                    if(str == ""){
                        document.getElementById("uploadedFiles").value=data;
                    }else{
                        document.getElementById("uploadedFiles").value+=',' + data;
                    }
                },
                'swf'      : '/scripts/uploadify.swf',
                'uploader' : '/scripts/uploadify.php'
            });
        });
    </script>
    <script type="text/javascript">
        $(document).ready(function(){
            $('body').on('keyup', 'input', function(e){
                if(e.which==39)
                    $(this).closest('td').next().find('input').focus();
                else if(e.which==37)
                    $(this).closest('td').prev().find('input').focus();
                else if(e.which==40)
                    $(this).closest('tr').next().find('td:eq('+$(this).closest('td').index()+')').find('input').focus();
                else if(e.which==38)
                    $(this).closest('tr').prev().find('td:eq('+$(this).closest('td').index()+')').find('input').focus();
            });
        });
    </script>
</head> 
```

这是 JS 代码（其中之一，因为没有一个是 fowrking...）不想工作的（这是在 scripts.js 中）：

```
function companyVatnr(str){

if (str.length==0)
  {
  document.getElementById("companysearch").innerHTML="";
  document.getElementById("companysearch").style.border="0px";
  return;
  }
if(str.length>7){
if (window.XMLHttpRequest)
  {// code for IE7+, Firefox, Chrome, Opera, Safari
  xmlhttp=new XMLHttpRequest();
  }
else
  {// code for IE6, IE5
  xmlhttp=new ActiveXObject("Microsoft.XMLHTTP");
  }
xmlhttp.onreadystatechange=function()
  {
  if (xmlhttp.readyState==4 && xmlhttp.status==200)
    {
    document.getElementById("companysearch").innerHTML=xmlhttp.responseText;
    document.getElementById("companysearch").style.border="1px solid #A5ACB2";
    }
  }
xmlhttp.open("GET","ajaxcompany.php?q="+str,true);
xmlhttp.send();
}
} 
```

有人可以帮助我吗，这里可能是什么问题？

非常感谢你！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-09T09:38:17.957

scripts.js 中存在语法错误，导致我的所有函数都不起作用。修复后，一切恢复正常。

# jquery - 条件选择和正常选择

> ID：13291903
> 
> 赞同：2
> 
> 时间：2012-11-08T15:19:13.883
> 
> 标签：jquery, select

我有一个运行良好的条件选择，带有两个选择框。但是，我希望能够将第一个选择用作普通选择，并显示具有特定类名的项目，然后，如果用户想要缩小范围，他可以使用子选择以便仅显示一项。

[请参阅此处的 jsfiddle](http://jsfiddle.net/aCahZ/)。

如果您选择“Apple”，那么您需要在子选择中选择其中一种 Apple 型号。如果您在第一个选择框中选择“Apple”，我希望能够显示所有 Apple 型号（例如 class="apple"）。

我试图写一些代码开始 - 但它不工作。：

```
 var selectedprod = $("#selectprod").val();
 $(".ct-content-container-box").hide();
 $('.' + selectedprod).parent('.ct-content-container-box').fadeToggle("slow", "linear");
 $('#selector').blur(); 
```

谁能帮我一把？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-08T16:21:48.967

看一下这个。没有 switch 语句的不同方法。[我的小提琴](http://jsfiddle.net/Qwy3g/)

```
$selectprod = $('#selectprod');
$selector = $('#selector');

$selectprod.change(function() {
    $options = $('.ct-content-container-box.skin-white');
    $selector.empty();
    $selector.append("<option value='showall'>Sub select</option>");

    $options.show();
    $currentSelection = $(this).val();
    if ($currentSelection != "showallprod") {
        $options.children().each(function() {
            if (!($(this).hasClass($currentSelection))) {
                $(this).parent($options).hide();
            } else {
                $selector.append("<option value='" + $(this).attr('id') + "'>" + $(this).text() + "</option>");
            }
        });
    }
}); 
```

此外，没有理由手动添加子选择选项，因为这些值已经存在于 HTML 中。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-08T15:31:13.120

我认为这里唯一的问题是区分大小写。您的值以大写字母开头，但相应的类没有。刚刚添加`.toLowerCase()`，它似乎正在工作：

```
$('#selectprod').change(function() {

    var selectedprod = $(this).val().toLowerCase();
    $(".ct-content-container-box").hide();
    $('.' + selectedprod).parent('.ct-content-container-box').fadeToggle("slow", "linear");
    $('#selector').blur();

});​ 
```

请参阅更新[的 FIDDLE](http://jsfiddle.net/aCahZ/2/)。

# c# - 在 Visual Studio C# 中创建视图

> ID：13291904
> 
> 赞同：0
> 
> 时间：2012-11-08T15:19:17.727
> 
> 标签：c#, database, visual-studio-2010

我正在将我在 Visual Basic 中制作原型的程序转换为 Visual Studio 2010 中的 C#，但我遇到了数据库问题。具体来说，我无法创建视图。服务器资源管理器中没有视图文件夹，我无法保存查询。有没有办法保存我没有看到的视图？还是有不同的事情可以做 View 所做的事情？

# optimization - CPLEX 中的这个 forall 语句有什么问题？

> ID：13291906
> 
> 赞同：0
> 
> 时间：2012-11-08T15:19:23.250
> 
> 标签：optimization, linear-programming, cplex

我试图在[这里](https://stackoverflow.com/questions/13231528/how-can-i-do-functions-in-cplex)回答但错误：

```
 forall(t in 0..4){
    a[t]<=z[t];
    -a[t]<=z[t];
    x[t+1]==x[t]+v[t];
    v[t+1]==v[t]+a[t];
   } 
```

![在此处输入图像描述](../Images/4b9c4237b9cc919bb27a49f44be862ff.png)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-14T12:45:06.820

递归方程进入未初始化区间，因此索引异常。你可以通过调整来避免这个错误：初始化不需要的估值并将它们分配为零。

这会产生一些开销，但会简化逻辑，无法想到任何更简单的方法来做到这一点。

# php - Codeigniter 路由混淆

> ID：13291907
> 
> 赞同：0
> 
> 时间：2012-11-08T15:19:28.087
> 
> 标签：php, codeigniter, routes, uri

我正在建立一个 URL 缩短器网站。

这是我的`config/routes.php`文件：

```
$route['default_controller'] = "main";
$route['404_override'] = '';
$route['(\w{2})/(.*)']        = '$2';
$route['(\w{2})']             = $route['default_controller'];

$route['join']                = 'main/join';
$route['activate/(:any)']     = "main/activate/$1";
$route['login']               = 'main/login';
$route['logout']              = 'main/logout';
$route['main/login']          = 'main/login';
$route['main/join']           = 'main/join';
$route['url/short']           = 'url/short';
$route['user']                = 'user/index';
$route['user/index']          = 'user/index';
$route['user/index/(:num)']   = 'user/index/$1';
$route['profile']             = 'user/profile'; 
$route['user/delete/(:any)']  = "user/delete/$1";

$route['(:any)']              = "url/go/$1"; 
```

好吧，如您所见，我实现了 CI Wiki 中提到的[语言](https://github.com/EllisLab/CodeIgniter/wiki/URI-Language-Identifier)。

但是现在最后一行路线无法正常运行。

```
$route['(:any)']              = "url/go/$1"; 
```

例如，`myshortner.com/as34v`应该与上面的路由匹配并重定向到完整的 URL，但它会重定向到`0.0.0.1`! 我怎样才能解决这个问题？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-08T15:48:11.600

首先，您应该有一个带有“go”函数的 URL 控制器，该函数接受一个保存在 $1 中的参数。确保存在。

# excel - Excel VBA奇数数学结果

> ID：13291914
> 
> 赞同：0
> 
> 时间：2012-11-08T15:19:48.377
> 
> 标签：excel, vba

我在案例选择中遇到了一些逻辑语句的问题。但是，我已经通过 excel 将其归结为一些奇怪的数学。当我期望它为假时，以下公式在即时窗口中评估为真

```
?(0.09 /0.1)<0.9 
```

谁能解释为什么会这样？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-08T16:07:32.210

[浮点运算](http://support.microsoft.com/kb/78113)可能会在 Excel 中给出不准确的结果。

如需更深入的文章，请阅读[每位计算机科学家应了解的浮点运算知识](http://docs.oracle.com/cd/E19957-01/806-3568/ncg_goldberg.html)。

这是StackOverflow 上的一个[相关问题。](https://stackoverflow.com/questions/2245017/excel-floating-point-arihmetic-what-type-does-it-actually-use)

@scott 在他的评论中有解决方案：

```
? round((0.09/0.1),1)<0.9 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-08T15:25:21.610

这可能是因为 vb 将表达式转换为解析为零的整数。尝试

```
 ?  CDBL((0.09/0.1) < 0.9 
```

# iphone - 仅有效地检测对 UIImageView 的非透明像素的触摸

> ID：13291919
> 
> 赞同：26
> 
> 时间：2012-11-08T15:20:07.690
> 
> 标签：iphone, ios, image-processing, uiimageview, hittest

您将如何有效地检测仅对 a 的非透明像素的触摸`UIImageView`？

考虑如下图所示的图像，显​​示为`UIImageView`。目标是使手势识别器仅在触摸发生在图像的非透明（本例中为黑色）区域时做出响应。

![在此处输入图像描述](../Images/17229e6cbfd9e4e9f9d28cf342be7af4.png)

## 想法

*   覆盖[`hitTest:withEvent:`](http://developer.apple.com/library/ios/documentation/uikit/reference/uiview_class/uiview/uiview.html#//apple_ref/occ/instm/UIView/hitTest:withEvent:)or [`pointInside:withEvent:`](http://developer.apple.com/library/ios/documentation/uikit/reference/uiview_class/uiview/uiview.html#//apple_ref/occ/instm/UIView/pointInside:withEvent:)，尽管这种方法可能非常低效，因为这些方法在触摸事件期间被多次调用。
*   检查单个像素是否透明可能会产生意想不到的结果，因为手指大于一个像素。检查命中点周围的圆形像素区域，或尝试找到通向边缘的透明路径可能会更好。

## 奖金

*   区分图像的外部和内部透明像素会很好。在示例中，零内的透明像素也应该被认为是有效的。
*   如果图像有变换会发生什么？
*   图像处理可以硬件加速吗？

* * *

## 回答 #1

> 赞同：19
> 
> 时间：2012-11-08T17:42:55.857

这是我的快速实现：（基于[Retrieving a pixel alpha value for a UIImage](https://stackoverflow.com/questions/1042830/retrieving-a-pixel-alpha-value-for-a-uiimage)）

```
- (BOOL)pointInside:(CGPoint)point withEvent:(UIEvent *)event {
    //Using code from https://stackoverflow.com/questions/1042830/retrieving-a-pixel-alpha-value-for-a-uiimage

    unsigned char pixel[1] = {0};
    CGContextRef context = CGBitmapContextCreate(pixel,
                                                 1, 1, 8, 1, NULL,
                                                 kCGImageAlphaOnly);
    UIGraphicsPushContext(context);
    [image drawAtPoint:CGPointMake(-point.x, -point.y)];
    UIGraphicsPopContext();
    CGContextRelease(context);
    CGFloat alpha = pixel[0]/255.0f;
    BOOL transparent = alpha < 0.01f;

    return !transparent;
} 
```

这假设图像与`point`. 如果继续缩放，您可能必须`point`在检查像素数据之前进行转换。

对我来说似乎工作得很快。我正在测量大约。此方法调用需要 0.1-0.4 毫秒。它不做内部空间，并且可能不是最佳的。

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-11-08T15:26:25.760

在 github 上，您可以找到[Ole Begemann 的一个项目，](http://github.com/ole/OBShapedButton)该项目进行了扩展`UIButton`，以便仅检测按钮图像不透明的触摸。

由于`UIButton`是 的子类`UIView`，因此对其进行调整`UIImageView`应该很简单。

希望这可以帮助。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-11-08T19:16:44.633

好吧，如果你需要非常快地完成它，你需要预先计算掩码。

以下是如何提取它：

```
UIImage *image = [UIImage imageNamed:@"some_image.png"];
NSData *data = (NSData *) CGDataProviderCopyData(CGImageGetDataProvider(image.CGImage));
unsigned char *pixels = (unsigned char *)[data bytes];
BOOL *mask = (BOOL *)malloc(data.length);
for (int i = 0; i < data.length; i += 4) {
  mask[i >> 2] = pixels[i + 3] == 0xFF; // alpha, I hope
}
// TODO: save mask somewhere 
```

或者您可以使用 1x1 位图上下文解决方案来预先计算掩码。拥有一个掩码意味着您可以使用一次索引内存访问的成本检查任何点。

至于检查大于一个像素的区域 - 我会检查以触摸点为中心的圆圈上的像素。圆圈上大约 16 个点应该足够了。

还检测内部像素：另一个预计算步骤 - 您需要找到掩码的凸包。您可以使用“格雷厄姆扫描”算法[http://softsurfer.com/Archive/algorithm_0109/algorithm_0109.htm](http://softsurfer.com/Archive/algorithm_0109/algorithm_0109.htm)来做到这一点， 然后在掩码中填充该区域，或保存多边形并改用多边形点测试。

最后，如果图像有变换，则需要将点坐标从屏幕空间转换为图像空间，然后只需检查预先计算的蒙版即可。

# zshrc - 在 zsh 提示符下打卡

> ID：13291922
> 
> 赞同：2
> 
> 时间：2012-11-08T15:20:15.427
> 
> 标签：zshrc

我见过一堆不同的 zsh 提示，但我想知道如何添加时钟？

我想要一个简单的时钟，而不是太复杂的自我更新的东西。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-08T15:22:11.683

`export RPROMPT=$'%F{cyan}%*%f'`在屏幕右侧创建一个简单的蓝色时钟。

转到此处了解更多信息[Zsh 提示](http://zsh.sourceforge.net/Doc/Release/Prompt-Expansion.html#SEC59)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2014-06-04T11:31:05.533

你可以使用这个： [liquidprompt](https://github.com/nojhan/liquidprompt)

也许与 [抗原结合](https://github.com/zsh-users/antigen)

# ios - 当我以编程方式进行时，有什么方法可以在 IB 中绘制 segues？

> ID：13291923
> 
> 赞同：1
> 
> 时间：2012-11-08T15:20:13.430
> 
> 标签：ios, interface-builder, storyboard, segue

我对xcode很陌生。我一直在做一个项目，我有一个主标签栏控制器和几个导航控制器。我想将我的以下 VC 保留在“导航堆栈”中，所以我使用以下呈现视图控制器的方法：

```
- (IBAction)buttonClick:(id)sender {
   SomeViewController *pViewController = [self.storyboard instantiateViewControllerWithIdentifier:@"ponViewController"];
    //initialize some "public variables of that controller
    [self.navigationController pushViewController:pViewController animated:YES];} 
```

但是，当我的 Storyboard 上有大约 6 个视图控制器时，我达到了状态，但它们在视觉上没有连接。我的同事很困惑，因为当他们想查看哪个 VC 连接到另一个时，他们必须查看代码......

因此我的问题......有什么方法可以在不创建任何特定类型的 segue（模态、推送、自定义）的情况下连接 InterfaceBuilder（故事板）中的 ViewController。只是为了演示视图控制器之间的连接？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-08T15:29:45.017

如果你想使用 segues，你不必使用 pushViewController 方法来展示你的下一个视图控制器。您可以在 Interface Builder 中设计所有内容，并将视图控制器与 push segues 连接起来。你应该给每个 segue 一个唯一的标识符。然后在你的 buttonClick: 方法中，你可以使用

> performSegueWithIdentifier:(NSString *)segueIdentifier sender:(id)sender

显示视图控制器。

如果在推送视图控制器之前您需要做任何事情，您可以在

> prepareForSegue:(UIStoryboardSegue *)segue sender:(id)sender

# asp.net - 如何将附件从 dotnet 应用程序发送到 WCF 服务？

> ID：13291925
> 
> 赞同：1
> 
> 时间：2012-11-08T15:20:15.947
> 
> 标签：asp.net, wcf

我的解决方案文件中有两个项目，一个是 Webui（一个 .NET 应用程序），另一个是 WCF 服务项目。

该场景是每当用户在 Webui 中上传文件时，该文件都需要发送到 WCF 服务。谁能建议我如何将附件从 Webui 发送到 WCF 服务？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-08T15:32:13.943

上传您需要传输的文件作为字节流。您需要使用 WCF 流。例如

[如何通过 WCF 上传文件](http://kjellsj.blogspot.com/2007/02/wcf-streaming-upload-files-over-http.html)

# windows-8 - 我应该从我的 TextBlocks 中删除“运行”吗？

> ID：13291929
> 
> 赞同：0
> 
> 时间：2012-11-08T15:20:21.493
> 
> 标签：windows-8, winrt-xaml, textblock

我有一些看起来像这样的 TextBlock：

```
 <TextBlock>
                <Run Text="Prev"/>
        </TextBlock> 
```

然而，当我创建它们时，它们并没有“奔跑”爵士乐。这是由工具添加的吗？如果是，为什么？我应该删除它/Run 的理由是什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-08T19:04:25.910

您问题中描述的文本框也可以通过使用来实现

```
<TextBlock Text="Prev"/> 
```

`Run`只是另一种设置文本框文本的方法。当您想在文本框中格式化文本的某些部分时，使用可能会变得更加明显，例如

```
<TextBlock>
    <Run Text="Number: " FontStyle="Bold" />
    <Run Text="1" />
</TextBlock> 
```

这可能会显示类似

**数量：** 1

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-05T04:45:22.490

我注意到在 Designer 视图中编辑 TextBlock 控件中的文本（在 VS2012 或 Blend 中）可以通过插入 Runs 来修改 TextBlock。运行可能非常有用，但它们对于最简单的解决方案来说太过分了，而且设计时编辑器有时会弄乱标记。因此，我倾向于只在 XAML 中编辑 TextBlocks。

# .htaccess - .htaccess 内部服务器错误 500

> ID：13291933
> 
> 赞同：1
> 
> 时间：2012-11-08T15:20:34.130
> 
> 标签：.htaccess, internal-server-error

我有一个 .htaccess 文件。内容是：

```
<IfModule mod_rewrite.c>
   RewriteEngine on
   RewriteRule (.*\.(png|gif|jpg|jpeg|js|css|swf))$ webroot/img_handler.php?arg=$1 [L] 
   RewriteRule    ^$ webroot/    [L]
   RewriteRule    (.*) webroot/$1 [L]
</IfModule>
# test 5

# disable directory browsing -IMPORTANT, do NOT remove.
Options -Indexes

# protect the htaccess file
<files .htaccess>
order allow,deny
deny from all
</files>

# disable the server signature
ServerSignature Off

# protect php.ini
<files *.ini>
order allow,deny
deny from all
</files> 
```

这是导致内部服务器错误，有什么问题？

thx: 像素

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-08T15:26:30.227

这是因为这条线：

```
RewriteRule    (.*) webroot/$1 [L] 
```

重写引擎循环直到 URI 停止更改，并且`(.*)`模式匹配*所有内容*，包括`webroot/whatever`. 尝试在它前面添加一个条件：

```
RewriteCond %{REQUEST_URI} !webroot
RewriteRule    (.*) webroot/$1 [L] 
```

# java - 拆分后打印一个值（java）

> ID：13291938
> 
> 赞同：0
> 
> 时间：2012-11-08T15:20:49.363
> 
> 标签：java, arraylist, split

这是代码：

```
ArrayList<String> listSell = new ArrayList<String>();

listSell.add("hello : world : one");
listSell.add("hello : world : one");
listSell.add("hello : world : one");

String splitSell[] = null;

for (int i = 0; i < listSell.size(); i++){
    splitSell = (listSell.get(i)).split(":");
    System.out.println(splitSell[0]);
} 
```

当我使用 splitSell[0] 时，这将打印所有值：

```
hello 
hello 
hello 
```

我怎样才能只打印一个值？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-08T15:28:30.260

如果您的意思是，您想在拆分后删除重复的元素。将拆分的元素添加到 Set 实现类中并对其进行迭代。

```
 Set<String> set = new LinkedHashSet<>();
for (int i = 0; i < listSell.size(); i++){
    splitSell = (listSell.get(i)).split(":");
    set.add(splitSell[0]);
}

   for(String s: set){
     System.out.println(s);
     } 
```

java.util.Set 实现类不接受重复元素，因此在您的示例中只会打印一次“hello”。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-08T17:04:53.593

不确定你想要什么。但这里有一些选择。

```
ArrayList<String> listSell = new ArrayList<String>();

listSell.add("hello : world : one");
listSell.add("hello : world : one");
listSell.add("hello : world : one");

String splitSell[] = null;
Set<String> split1 = new TreeSet<String>();
Set<String> split2 = new TreeSet<String>();
Set<String> split3 = new TreeSet<String>();

for (String listItem : listSell) {
    splitSell = listItem .split(":");
    split1.add(splitSell[0]);
    split2.add(splitSell[1]);
    split3.add(splitSell[2]);
}

//Prints all the first values
for (String string1 : split1) {
    System.out.println(string1);
}

//Prints all the second values
for (String string2 : split2) {
    System.out.println(string2);
}

//Prints all the third values
for (String string3 : split3) {
    System.out.println(string3);
} 
```

请注意，该`add`方法仅在元素不在`Set`. 请参阅[设置文档](http://docs.oracle.com/javase/6/docs/api/java/util/Set.html#add%28E%29)。

# javascript - JavaScript/JQuery 中的外部 SQLite 数据库

> ID：13291939
> 
> 赞同：0
> 
> 时间：2012-11-08T15:20:50.433
> 
> 标签：javascript, jquery, sqlite

我想知道有没有办法在网站中使用 JavaScript/JQuery 使用外部（我自己的）SQLite 数据库？有什么好的例子吗？我已经做了一些搜索，但找不到任何好的文章！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-08T17:48:08.920

不，JavaScript 运行客户端，无法在客户端沙箱环境之外进行配置。

这方面的工作以受控形式进行，例如：[http ://html5doctor.com/introducing-web-sql-databases/](http://html5doctor.com/introducing-web-sql-databases/)

# python - 在 matplotlib 子图上重置默认轴抽动

> ID：13291942
> 
> 赞同：2
> 
> 时间：2012-11-08T15:20:52.883
> 
> 标签：python, matplotlib

我想使用相同的 x 轴在单个列中创建任意数量的图。

这是一个例子：

```
import numpy as np
from matplotlib import pyplot as plt

N=1000
x = np.linspace(-.5,1.5,num=N)
xshift = x-0.5
Bz = 30*np.exp(-xshift**8/0.00125)*np.sin(xshift*2.*np.pi)
Np = 30*np.exp(-xshift**10/0.00125)+5
Vx = 200*np.exp(-xshift**10/0.00125)+400

fig = plt.figure()

#list of tuples of the form `(data, label)`    
data_list = [(Bz,"B_z"),(Vx,"V_x"),(Np,"N_p")]

for i,(data,lab) in enumerate(data_list,1):
    ax = fig.add_subplot(len(data_list),1,i)
    ax.set_ylabel("$\mathrm{%s}$"%lab)
    ax.get_xaxis().set_ticklabels([])
    ax.plot(x,data)
else:
    #Reset default tick labels here on ax
    pass

plt.show() 
```

对于这个图，最后一个图显示 xtic 标签是合乎逻辑的，而所有其他图都保留了该信息。我*可以*弹出最后一项`data_list`并明确地拼写出来，但这对我来说似乎很老套。有没有一种优雅的方法来告诉 matplotlib Axes 它应该恢复默认`xticlabel`设置？

（一些[文件](http://matplotlib.org/api/axes_api.html#matplotlib.axes.Axes.set_xticklabels)）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-08T16:24:02.890

我认为这可以满足您的要求，但我认为它可能像您担心的那样“骇人听闻”。我也认为这可能是正确的方式。:)

```
import numpy as np
from matplotlib import pyplot as plt

N=1000
x = np.linspace(-.5,1.5,num=N)
xshift = x-0.5
Bz = 30*np.exp(-xshift**8/0.00125)*np.sin(xshift*2.*np.pi)
Np = 30*np.exp(-xshift**10/0.00125)+5
Vx = 200*np.exp(-xshift**10/0.00125)+400

fig = plt.figure()

#list of tuples of the form `(data, label)`    
data_list = [(Bz,"B_z"),(Vx,"V_x"),(Np,"N_p")]

left = .15
height = .2
width = .7
bottom = .0
axes_ticks = []
axes = []
for i,(data,lab) in enumerate(data_list,1):
    ax = fig.add_subplot(len(data_list),1,i)
    bottom += height
    ax.set_position((left, bottom, width, height))

    ax.set_ylabel("$\mathrm{%s}$"%lab)
    axes_ticks.append(ax.get_xaxis().get_ticklocs())
    ax.get_xaxis().set_ticks([])
    ax.plot(x,data)
    axes.append(ax)
else:
    #Reset default tick labels here on ax
    axes[0].get_xaxis().set_ticks(axes_ticks[0])

plt.show() 
```

# c# - Winforms 组合框在 lostfocus 上失去自动完成值

> ID：13291945
> 
> 赞同：4
> 
> 时间：2012-11-08T15:21:02.103
> 
> 标签：c#, winforms, combobox, lost-focus

当用户切换到下一个控件时，我遇到了 Winforms 组合框丢失在自动完成期间找到的值的问题。

这是一个代码示例（作为将弹出一个表单的 Nunit 测试）：

```
[Test]
[STAThread]
public void Testing_AsDropDownList()
{
    var comboBox = new ComboBox();
    comboBox.DropDownStyle = ComboBoxStyle.DropDownList;
    comboBox.AutoCompleteSource = System.Windows.Forms.AutoCompleteSource.ListItems;
    comboBox.AutoCompleteMode = System.Windows.Forms.AutoCompleteMode.SuggestAppend;
    comboBox.Items.Add(new ComboPair("aaa", "ItemAAA"));
    comboBox.Items.Add(new ComboPair("bbb1", "ItemBBB1"));
    comboBox.Items.Add(new ComboPair("bbb2", "ItemBBB2"));
    comboBox.Items.Add(new ComboPair("bbb3", "ItemBBB3"));
    comboBox.Items.Add(new ComboPair("ccc", "ItemCCC"));
    var textBox = new TextBox{ Multiline = true };        
    comboBox.Leave += (sender, args) => textBox.Text = "On Leave: " + comboBox.SelectedItem;
    comboBox.LostFocus += (sender, args) => textBox.Text += " ... On LostFocus: " + comboBox.SelectedItem;
    var frm = new Form();
    frm.Width = 300;
    frm.Height = 100;
    comboBox.Dock = System.Windows.Forms.DockStyle.Top;
    textBox.Dock = System.Windows.Forms.DockStyle.Bottom;
    frm.Controls.Add(comboBox);
    frm.Controls.Add(textBox);
    Application.EnableVisualStyles();
    Application.Run(frm);
} 
```

为了重现错误，请执行以下步骤：

1.  运行测试 将弹出以组合框为重点的表单...
2.  现在键入“bbb3”以选择具有自动完成功能的相应项目。您现在将看到文本框已更新为“bbb3”作为您选择的项目。
3.  现在按 TAB

您现在将看到文本框具有焦点，并且组合选择已更改为“bbb1”。另请注意，在文本框中，它向您显示当离开事件被触发时选定的值仍然是“bbb3”，但是当失去焦点事件被触发时它是“bbb1”。

如果您单击组合框以使其失去第 3 步的焦点，则会看到相同的行为。

如果您在第 3 步执行任何其他操作，则不会出现此问题。即，如果您：

*   按“输入”
*   按“上”然后“下”返回“bbb3”
*   点击项目
*   等等

有任何想法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2017-04-06T11:52:46.373

该值在 WM_KILLFOCUS 消息中丢失。在 ComboBox 的子类中覆盖 WndProc 为我解决了这个问题（除了单击以松开焦点......但我想这可以解释为像在网站的对话框中一样解散）。不幸的是，我手头只有 VB.NET 代码：

```
Protected Overrides Sub WndProc(ByRef m As Message)
    If m.Msg = &H8 Then  'WM_KILLFOCUS
        Dim sText As String = Me.Text
        MyBase.WndProc(m)
        Me.Text = sText
        Exit Sub
    End If

    MyBase.WndProc(m)
End Sub 
```

# sql - SQL 表的联合，但仅采用 ID 的第一个实例

> ID：13291949
> 
> 赞同：0
> 
> 时间：2012-11-08T15:21:11.670
> 
> 标签：sql, ms-access, duplicates, union

我有三个具有相同列的表，我需要将它们合并到一个表中。一些 ID 出现在多个表中，我需要首先使用编号最小的表中的 ID，并在任何后续表中忽略该 ID。请注意，只有 ID 相同，表之间没有任何重复的行。

举个例子，这三个表需要转换为最终表：

```
**Table 1**
+----+----+----+
| ID | C1 | C2 |
+----+----+----+
| 01 | AA | BB |
| 02 | CC | DD |
| 03 | EE | FF |
+----+----+----+

**Table 2**
+----+----+----+
| ID | C1 | C2 |
+----+----+----+
| 03 | GG | HH |
| 04 | II | JJ |
| 05 | KK | LL |
+----+----+----+

**Table 3**
+----+----+----+
| ID | C1 | C2 |
+----+----+----+
| 01 | MM | NN |
| 04 | OO | PP |
| 06 | QQ | RR |
+----+----+----+

**Resulting Table**
+----+----+----+
| ID | C1 | C2 |
+----+----+----+
| 01 | AA | BB |
| 02 | CC | DD |
| 03 | EE | FF |
| 04 | II | JJ |
| 05 | KK | LL |
| 06 | QQ | RR |
+----+----+----+ 
```

我对使用左连接和“IS NULL”条件的解决方案有一个模糊的想法，但这可能会很快变得复杂，尤其是在表数量增加的情况下。

有没有办法只在一列上指定重复项，而不是在整行上？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-08T16:19:07.810

由于您使用的是 Access，因此您可以使用 FIRST 功能，我认为您只需要这个：

```
SELECT ID, First(C1) As C1, First(C2) as C2
FROM (
  SELECT * FROM Table1 UNION SELECT * FROM Table2 UNION SELECT * FROM Table3 )
GROUP BY ID 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-08T15:28:03.377

如果 NULL 值不计算在内，则可以应用此逻辑：

*   获取 3 个表中存在的所有 ID（这是联合部分）
*   左连接所有表，并使用 COALESCE，找到每列的第一个非空值

在~~使用权~~微软 SQL：

```
select ids.ID, COALESCE(t1.C1,t2.C1,t3.C1) C1, COLAESCE(t1.C2,t2.C2,t3.C2) C2 
from
(SELECT ID FROM Table1
UNION
SELECT ID FROM Table2
UNION
SELECT ID FROM Table3) AS ids
left join Table1 t1 on ids.id=t1.id
left join Table2 t2 on ids.id=t2.id
left join Table3 t3 on ids.id=t3.id 
```

但遗憾的是 Access[不支持 COALESCE](https://stackoverflow.com/questions/247858/coalesce-alternative-in-access-sql) ......它有 NZ：

```
select ids.ID, NZ(NZ(t1.C1,t2.C1),t3.C1) C1, NZ(NZ(t1.C2,t2.C2),t3.C2) C2 
from
(SELECT ID FROM Table1
UNION
SELECT ID FROM Table2
UNION
SELECT ID FROM Table3) AS ids
left join Table1 t1 on ids.id=t1.id
left join Table2 t2 on ids.id=t2.id
left join Table3 t3 on ids.id=t3.id 
```

（虽然我目前无法测试它没有手头的 MS Access）

旁注：在 Oracle 中，您可以这样做（我不想删除它）：

```
select ids.ID, NVL(NVL(t1.C1,t2.C1),t3.C1) C1, NVL(NVL(t1.C2,t2.C2),t3.C2) from
(SELECT ID FROM Table1
UNION
SELECT ID FROM Table2
UNION
SELECT ID FROM Table3) ids
left join Table1 t1 on ids.id=t1.id
left join Table2 t2 on ids.id=t2.id
left join Table3 t3 on ids.id=t3.id 
```

然而，如果 NULL 值被认为是有效的，那就有点问题了，因为[MS Access 不支持 CASE-WHEN 语句](http://www.techonthenet.com/access/functions/advanced/case.php)——除非在 VBA 中......

在 Oracle 中，这样做可以：

```
select ids.ID,
CASE WHEN t1.ID IS NOT NULL THEN t1.C1 
     WHEN t1.ID IS NULL AND t2.ID IS NOT NULL THEN t2.C1
     ELSE t3.C1 END C1,
CASE WHEN t1.ID IS NOT NULL THEN t1.C2 
     WHEN t1.ID IS NULL AND t2.ID IS NOT NULL THEN t2.C2
     ELSE t3.C2 END C2
from
(SELECT ID FROM Table1
UNION
SELECT ID FROM Table2
UNION
SELECT ID FROM Table3) AS ids
left join Table1 t1 on ids.id=t1.id
left join Table2 t2 on ids.id=t2.id
left join Table3 t3 on ids.id=t3.id 
```

# javascript - 将 ajax 与超链接一起使用

> ID：13291951
> 
> 赞同：0
> 
> 时间：2012-11-08T15:21:15.053
> 
> 标签：javascript, html, ajax

我创建了一个书签页面，它从数据库中检索链接并显示它。我可以登录，添加新链接并删除它们。但是，当我删除一个条目时，它会显示*delete.php*而不是将页面加载到自身上（查询确实有效）。

在这一点上，我很可能使我的代码过于复杂，并且可能忽略了一些简单的东西，因为我已经为页面的其他元素使用了很多 JavaScript。

条目是动态添加的，因此这部分 HTML 被附加：

```
<h2>
    <a href="delete.php?URL='+url+'">[x]</a>
</h2>
<a href="'+url+'" target="iFrame" class="linkURL">
    <div class="bookmark">
        <h3 style="float: left;">'+title+'</h3>
        <br />
        <p>'+desc+'</p>
    </div>
</a> 
```

JavaScript：

```
//  DELETE FUNCTION
$("h2 a").click(function() {
    return false;
    var action = $(this).attr('href');
    var form_data = {
        URL: $("#linkURL").attr('href'),
        is_ajax: 1
    }; // form_data
    $.ajax({
        type: "POST",
        url: action,
        data: form_data,
        success: function(response){
            if(response == 'success') {
                alert('Successful delete!');
            } else { // if
                alert('Delete failed.');
            } // else
        } // function(response)
    }); // ajax
    return false;
}); // h2 
```

该页面位于此处：[http](http://samaradionne.com/links6/) ://samaradionne.com/links6/如果更容易查看整个内容。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-08T15:28:41.357

您同时使用锚标记`a`和点击事件。您将获得实际的 delete.php 页面，因为当您单击锚标记时，它就像任何常规链接一样工作。您的代码中没有任何地方说“嘿，实际上不要像往常一样遵循此链接”。

要不点击链接，您*需要*

```
<a href="yoururl" onclick="return false;">[x]</a> 
```

此外，您将 jQuery click 事件附加到`h2`，这本身还不错，只是令人困惑，因为其意图是实际单击链接。在这种情况下，您需要：

```
$("h2 a").click(function(){}); 
```

最后，要将所有这些结合在一起，您可以执行以下操作：

```
 $("h2 a").click(function(){
     // your normal logic

     return false; // don't follow link
 }); 
```

然后你就不必`onclick`在锚标签里面了。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-09T20:06:37.390

由于我的链接是动态生成的，因此我的 .h2 一次点击会附加到尚不存在的东西上。我在调用删除函数的追加函数中添加了一个事件触发器。

问题解决了。

# sql - SQL 查询将运费拆分到多个项目/行

> ID：13291954
> 
> 赞同：0
> 
> 时间：2012-11-08T15:21:22.137
> 
> 标签：sql, sql-server, sql-server-2005, split

我正在尝试创建一个查询，该查询将允许我将单个图形拆分为多行。

例如，采购订单 x 可能有 15 个项目分配给它。例如，运费是 9.95。如何计算 9.95 的 1/15，然后用 1/15 的运费更新库存的成本价格？

因此，该项目的成本价格将从 4.50 增加到 5.16 (4.50 + 0.66)。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-08T15:30:53.320

这是 SQL Server 的解决方案：

```
update  ol
set     price = price + 5.0 / ol.LineCount
from    [Order] o
join    (
        select  *
        ,       count(*) over () as LineCount
        from    OrderLine
        ) ol
on      o.ID = ol.OrderID
where   o.OrderNr = 'Ord1'; 
```

[SQL Fiddle 上的实时示例。](http://sqlfiddle.com/#!6/f0c0a/5/0)

如果您使用的是其他 DBMS，请更新您的帖子！

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-08T15:38:38.580

我创建了一个产品表并更新了商品的运费。希望这就是你要找的。

```
INSERT INTO [TravelAgentDB].[dbo].[Product]
           ([ID]
           ,[Name]
           ,[Price]
           ,[shippingPrice])
     VALUES
          (1,'Nexus 7' , 250 , 20),
          (2,'Nexus 7 case' , 50 , 20),
          (3,'Nexus 7 headphone' , 20 , 20)
GO

select * from product
Declare @itemsCount int
Select @itemsCount = count(*) From product where id in (1,2,3)
Declare @totalShippingPrice Decimal(18,2) = 9.95
Declare @shippingPriceperItem Decimal(18,2) = @totalShippingPrice / @itemsCount

Update Product 
set [shippingPrice] = @shippingPriceperItem
Where id in (1,2,3)
select * from product 
```

# interface - Go 是否允许为具有特定键类型的地图指定接口？

> ID：13291958
> 
> 赞同：2
> 
> 时间：2012-11-08T15:21:28.940
> 
> 标签：interface, go

我写了一个函数，它会从 map[string]Foo 返回一个排序的字符串切片。我很好奇创建一个通用例程的最佳方法是什么，该例程可以从任何类型的以字符串为键的映射返回一个排序的字符串切片。

有没有办法使用接口规范来做到这一点？例如，有没有办法做类似的事情：

```
type MapWithStringKey interface {
    <some code here>
} 
```

要实现上面的接口，类型需要字符串作为键。然后我可以编写一个通用函数，它返回一个排序的键列表以实现类型。

这是我目前使用反射模块的最佳解决方案：

```
func SortedKeys(mapWithStringKey interface{}) []string {
    keys := []string{}
    typ := reflect.TypeOf(mapWithStringKey)
    if typ.Kind() == reflect.Map && typ.Key().Kind() == reflect.String {
        switch typ.Elem().Kind() {
        case reflect.Int:
            for key, _ := range mapWithStringKey.(map[string]int) {
                keys = append(keys, key)
            }
        case reflect.String:
            for key, _ := range mapWithStringKey.(map[string]string) {
                keys = append(keys, key)
            }
            // ... add more cases as needed
        default:
            log.Fatalf("Error: SortedKeys() does not handle %s\n", typ)
        }
        sort.Strings(keys)
    } else {
        log.Fatalln("Error: parameter to SortedKeys() not map[string]...")
    }
    return keys
} 
```

[点击Go Playground版本](http://play.golang.org/p/ROsq9u40PP)

我被迫为每种支持的类型编写类型断言，即使在编译时，我们应该知道 mapWithStringKey 参数的确切类型。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-11-08T16:07:10.883

您不能制作部分类型。但是您可以定义一个服务于您的目的的接口：

```
type SortableKeysValue interface {
    // a function that returns the strings to be sorted
    Keys() []string
}

func SortedKeys(s SortableKeysValue) []string {
    keys := s.Keys()
    sort.Strings(keys)
    return keys
}

type MyMap map[string]string

func (s MyMap) Keys() []string {
    keys := make([]string, 0, len(s))
    for k, _ := range s {
        keys = append(keys, k)
    }
    return keys
} 
```

在这里试试：[http ://play.golang.org/p/vKfri-h4Cp](http://play.golang.org/p/vKfri-h4Cp)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-07-30T12:50:17.397

希望有帮助（go-1.1）：

```
package main

import (
    "fmt"
"reflect"
)

var m = map[string]int{"a": 3, "b": 4}

func MapKeys(m interface{}) (keys []string) {
    v := reflect.ValueOf(m)
    for _, k := range v.MapKeys() {
        keys = append(keys, k.Interface().(string))
    }
    return
}

func main() {
    fmt.Printf("%#v\n", MapKeys(m))
} 
```

# jquery - 在 jquery ajax 调用 wcf 服务时从 http 移动到 https 时出错

> ID：13291960
> 
> 赞同：4
> 
> 时间：2012-11-08T15:21:41.353
> 
> 标签：jquery, asp.net, wcf, https

我有一个托管在 .NET 3.5 Web 应用程序内的 IIS 6.0 中的 wcf 服务，它在 http 上运行良好，但是当我尝试实现 https/ssl 时，我收到一个 415 错误，并显示以下错误消息。我将 json 用于请求和响应。

“无法处理消息，因为内容类型 'application/json' 不是预期的类型 'application/soap+xml; charset=utf-8'。”

下面是我的客户端 jquery.ajax 调用、服务合同和 web.config。我在这里想念什么？

Jquery.ajax 调用：

```
 $.ajax({
    type: "POST",
        url: "DataShare.svc/GetProgramsByEventType",
        data: '{"eventTypeIds": "' + eventTypeId + '"}',
        contentType: "application/json",
        dataType: "json",
        async: false, //async needs to be false to work with programs dropdown
        success: function (data, status) {
            var programs = data.GetProgramsByEventTypeResult;
            var html = "";
            for (var i = 0; i < programs.length; i++) {
                html += "<li><a href='#'>" + programs[i].m_ProgramLongDesc + "<span class='value'>" + programs[i].m_ProgramID + "</span></a></li>"
            }
            $("#ddlProgramItems").html(html);
        },
        error: function (request, status, error) {
            alert("Error - Status: " + request.status + "\nStatusText: " + request.statusText + "\nResponseText: " + request.responseText);
     }
}); 
```

WCF服务合同：

```
<ServiceContract()> _
Public Interface IDataShare
    <OperationContract()> _
    <WebInvoke(Method:="POST",
               BodyStyle:=WebMessageBodyStyle.Wrapped,
               RequestFormat:=WebMessageFormat.Json,
               ResponseFormat:=WebMessageFormat.Json)> _
    Function GetProgramsByEventType(eventTypeIds As String) As List(Of WF.DataContracts.Program.Program) 
```

网络配置：

```
 <system.serviceModel>
    <behaviors>
      <serviceBehaviors>
        <behavior name="ServiceBehavior">
          <serviceMetadata httpsGetEnabled="true"/>
          <serviceDebug includeExceptionDetailInFaults="true" />
        </behavior>
      </serviceBehaviors>
      <endpointBehaviors>
        <behavior name="EndpointBehavior">
        </behavior>
      </endpointBehaviors>
    </behaviors>
    <bindings>
    <wsHttpBinding>
      <binding name="TransportSecurity" sendTimeout="00:10:00" maxReceivedMessageSize="2147483647">
        <readerQuotas maxDepth="2147483647" maxStringContentLength="2147483647" maxArrayLength="2147483647" maxBytesPerRead="2147483647" maxNameTableCharCount="2147483647" />
        <security mode="Transport">
          <transport clientCredentialType="None"  />
          <!--<message clientCredentialType="Certificate"  negotiateServiceCredential="true"/>-->
        </security>
      </binding>
    </wsHttpBinding>
    </bindings>
    <services>
      <service behaviorConfiguration="ServiceBehavior"
               name="DataShare">
        <endpoint address=""
                  binding="wsHttpBinding"
                  contract="IDataShare"
                  bindingConfiguration="TransportSecurity"
                  behaviorConfiguration="EndpointBehavior"/>
        <endpoint address="mex" binding="mexHttpsBinding" contract="IMetadataExchange" />
      </service>
    </services>
  </system.serviceModel> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-01T13:30:12.630

我认为您的 web.config Tone 中需要一个带有 webHttpBinding 的端点。

```
<endpoint address=""
              binding="webHttpBinding"
              contract="IDataShare"
              bindingConfiguration="TransportSecurity"
              behaviorConfiguration="EndpointBehavior"/> 
```

请参阅[在 WCF 服务中公开 webHttpBinding 端点](https://stackoverflow.com/questions/3036012/expose-webhttpbinding-endpoint-in-a-wcf-service)

和[WCF 服务方法返回 json 或 soap](https://stackoverflow.com/questions/5752975/wcf-service-method-to-return-json-or-soap)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-03-30T10:07:46.153

请在 Ajax 调用中指定以下内容

内容类型：“应用程序/json；字符集=utf-8”

# asp.net - 如何将博客软件集成到asp.net网站的aspx页面中

> ID：13291966
> 
> 赞同：-1
> 
> 时间：2012-11-08T15:22:09.197
> 
> 标签：asp.net, blogs, blog-engine

我的任务是将博客软件集成到 asp.net 网站中的 sample.aspx 页面。

我不明白这是什么意思。

如果我在我的系统上安装博客软件，那么我如何集成到 aspx 页面 Web 应用程序。我在这一步很困惑。请任何人帮助。

谢谢

**更新** 我在我的系统上安装了 BlogEngine.Net，但是当我浏览它时，它会作为一个单独的网站打开。我不想这样。

我想要的是在我的 asp.net 应用程序中有一个页面 sample.aspx 和菜单上此页面的导航链接。因此，当单击此链接时，此页面将打开，并且博客软件应在此页面上运行。

哪种博客软件最适合这种情况？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-08T19:04:20.097

我认为最好的选择，如果它甚至是一个选项，是让网站和博客引擎成为单独的 url，但在网站和博客中使用相同的主题。这样，用户将无法真正分辨出除了 url 更改之外的区别。（还有多少人真的看这个网址了？）

但是试图将博客网站“放入”网站并没有多大意义。

# decode - 在扫描的 PDF 中解码 QR 码

> ID：13291967
> 
> 赞同：0
> 
> 时间：2012-11-08T15:22:10.203
> 
> 标签：decode, qr-code

我正在尝试解码 PDF 中的二维码（由 Scan2Mail 和 Canon iR 扫描仪生成）。我知道质量很差（见附图），但是对于每个用于二维码扫描的**iOS应用程序，我可以在几毫秒内****成功地扫描**代码，并用 iPhone cam 拍摄下面的图像。

我尝试使用**zbarimg**和**zxing**进行扫描，但没有任何效果。你有什么想法吗？也许用 imagemagick 以某种方式增强图像？

![二维码](../Images/e02681a06eaef4bab03c6ae9a74fef95.png)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-08T17:08:24.067

当原始图像没有解码时，图像的图像解码似乎违反直觉。应用程序正在查看图像的略有不同版本的流。原件已损坏和变形。当相机捕捉到它时产生的模糊实际上可以帮助消除噪点。是的，zxing 可以很好地解码——来自 Barcode Scanner 应用程序。

尝试先通过光模糊滤镜运行它。

# java - 立即执行 hsqldb

> ID：13291970
> 
> 赞同：1
> 
> 时间：2012-11-08T15:22:14.117
> 
> 标签：java, sql, hsqldb

我有一个带有存储过程的 HSQL 2.x 数据库。此过程生成我要执行的动态 SQL 字符串。在 Oracle 上，我使用*执行立即*命令执行此操作。我很难找到 HSQLDB 的等价物。有人可以帮忙吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-08T17:16:35.360

HSQLDB 不直接支持 SQL/PSM 语言例程中的动态 SQL。

执行此操作的方法是使用从 SQL 存储过程调用的 Java 存储过程来执行 SQL 字符串。

Java 存储过程有一个字符串 (VARCHAR) 参数，即 SQL 语句。它使用`jdbc:default:connection`来创建 JDBC 语句并执行在 String 参数中传递的 SQL。

SQL 过程可能如下所示：

```
CREATE PROCEDURE SQL_SP( ... ) LANGUAGE SQL ... BEGIN ATOMIC
  DECLARE SQL_STRING VARCHAR(1000);
  -- sql is generated here

    CALL JAVA_SP(SQL_STRING);    
  END 
```

# blackberry - 黑莓浏览器域没有打开任何网页

> ID：13291973
> 
> 赞同：0
> 
> 时间：2012-11-08T15:22:28.667
> 
> 标签：blackberry, blackberry-simulator

我是一个新手，只是想在 Blackberry 模拟器 9860 os 7.1 的浏览器字段中打开简单的网站。我的 MDS 仍在运行，它发出请求失败...~120000 错误。我已按照许多网站的说明进行操作，但无法在黑莓浏览器中打开网页。该网址也可以在模拟器浏览器中使用，但不能在我自己的浏览器中使用。请提前帮助和感谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-08T17:18:03.033

如果您在模拟器中进行测试，我建议您在真实设备中进行检查。

在 Eclipse 插件中查看 Blackberry 提供的示例中的 browserfield Demo。

```
<Directory>:\Eclipse\plugins\net.rim.ejde.componentpack<JDE version>\components\samples\com\rim\samples\device\browser 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-08T16:59:25.237

在 BrowserField 中使用 BrowserFieldErrorHandler 尝试捕获错误

# java - 当 url 中存在查询字符串时，java webstart 重新下载 jnlp

> ID：13291975
> 
> 赞同：4
> 
> 时间：2012-11-08T15:22:28.407
> 
> 标签：java, jnlp, java-web-start

我正在使用 tomcat 来提供 webstart 应用程序。我有一个 servlet，它根据发送到 tomcat 的 url 写出一个 jnlp，以允许将参数传递给 main。当请求没有查询字符串的 jnlp 时，我看到 tomcat 提供了一次 jnlp，但是一旦我向 url 添加查询字符串，我看到 tomcat 提供了两次 jnlp：

```
0:0:0:0:0:0:0:1 - - [08/Nov/2012:09:10:44 -0600] "GET /javastart/testapp.jnlp HTTP/1.1" 200 2062 
```

对比

```
0:0:0:0:0:0:0:1 - - [08/Nov/2012:09:01:48 -0600] "GET /javastart/testapp.jnlp?56 HTTP/1.1" 200 2103
127.0.0.1 - - [08/Nov/2012:09:01:48 -0600] "GET /javastart/testapp.jnlp HTTP/1.1" 200 2062 
```

如果我删除 jnlp 元素的 href 属性，则不会发生这种情况。这让我相信 webstart 出于某种原因再次请求 jnlp 文件。这是正确的吗？如果是这样，为什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-04T17:19:41.550

我找不到关于此的可靠文档，但似乎这与 jnlp 标记的 href 属性以及 webstart 如何确保它具有最新的 jnlp 密切相关。如果生成的 jnlp 中的 url 与用于初始请求的 url 不匹配，webstart 将使用刚刚下载的 jnlp 的 jnlp 标签中的 url 再次请求 jnlp。在我们的设置中，jnlp 标记中的 href 属性是静态的，并且不会生成以匹配在查询字符串中传递的属性。由于给定 webstart 的 jnlp url 与它在 jnlp 中找到的 url 不同，它再次请求 jnlp 但没有查询字符串。

# jquery - 使用 jquery 解析的最后一个 fm json 提要的显示名称

> ID：13291978
> 
> 赞同：0
> 
> 时间：2012-11-08T15:22:37.267
> 
> 标签：jquery, json, last.fm

我正在尝试获取 json 提要并显示艺术家的姓名。在 element.artist 的行上，它显示 [object Object],[object Object],[object Object] 。我对此很陌生。我将如何显示这些对象的内容？

```
<script type="text/javascript">
    $(document).ready(function() {
    $.ajax({ 
        type: 'GET', 
        url: 'http://ws.audioscrobbler.com/2.0/?method=artist.getsimilar&artist=richie%20hawtin&api_key=53c21030b0e4c4ff051083aacdc6dc54&format=json', 
        data: { get_param: 'value' }, 
        dataType: 'json',
        success: function (data) { 
            $.each(data, function(index, element) {
                $('body').append($('<div>', {
                    text: element.artist
                }));
            });
        }
    });
    });
</script> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-08T15:24:24.783

那是因为`element.artist`是一个对象。可能一个艺术家会有一个像`element.artist.name`. 在浏览器开发工具中放置一个断点并检查对象以查看可用属性。

**更新**

我刚刚测试了你的电话。将您的成功回调更改为：

```
success: function(data) {
    $('body').append($('<div>', {
        text: data.similarartists.artist.map(function(elem) {
            return elem.name;
        }).join(", ")
    }));
} 
```

在这里，有一个工作小提琴：http: [//jsfiddle.net/adrianonantua/tU2JA/](http://jsfiddle.net/adrianonantua/tU2JA/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-08T15:33:35.347

在这一点上，您可以做两件事来帮助在紧要关头进行调试。

1.  打开你的 JS / 开发者控制台（通常是 F12。如果使用 FF，获取 FireBug）。在文本上设置断点：element.artist 行。然后重新运行页面，当断点被命中时，查看“watch”或“variable”（取决于您使用的浏览器）窗口中的元素标记。这将让您在断点被击中时看到完整的层次结构。
2.  在您的 $('body') 行添加“window.element = element;”之前更“hackish” 然后，仍然在您的开发者控制台中，您可以直接在控制台中输入 JS，输入“元素”并回车。这将为您提供单击/展开对象并查看其详细信息的链接。
3.  RTFM :) 可能有一个文档解释了数据的布局。在这种情况下，您甚至可以让它变得更简单：只需在浏览器中加载[http://ws.audioscrobbler.com/2.0/?method=artist.getsimilar&artist=richie%20hawtin&api_key=53c21030b0e4c4ff051083aacdc6dc54&format=json](http://ws.audioscrobbler.com/2.0/?method=artist.getsimilar&artist=richie%20hawtin&api_key=53c21030b0e4c4ff051083aacdc6dc54&format=json)，它就会显示完整的JSON 文档层次结构。在这种情况下，艺术家是艺术家的数组。所以如果你想输出第一个的名字：element.artist[0].name。在你的循环中，正如其他人所建议的那样，它是 element.artist.name

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-08T15:25:22.973

您可以使用

```
JSON.stringify(value [, replacer] [, space]) 
```

将您的数据对象转换为字符串。

[http://msdn.microsoft.com/en-us/library/cc836459(v=VS.94).aspx](http://msdn.microsoft.com/en-us/library/cc836459(v=VS.94).aspx)

# php - 通过 $data 变量传递 DIV，但使用字符串中的 Echo 语句

> ID：13291982
> 
> 赞同：1
> 
> 时间：2012-11-08T15:22:57.153
> 
> 标签：php, codeigniter, codeigniter-2

对标题感到困惑？呵呵。不知道如何解释这个，但我认为我的代码片段应该更容易解释一些事情。

这就是我试图通过`$data`变量传递的内容。`div`显示应该是，但`echo`里面的语句（我需要）没有显示。

我在哪里搞砸了？

`$data['packagename'] = '<div class="somedoodoo"> echo $row->subscription </div>';`

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-08T15:25:25.313

您可以只使用字符串连接：

```
$data['packagename'] = '<div class="something">' . $row->subscription . '</div>'; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-08T15:24:59.730

你不能在这样的字符串中执行代码，另外，这是错误的引号：

```
$data['packagename'] = <<<EOL
<div class="somedoodoo">{$row->subscription}</div>
EOL; 
```

heredocs 上的相关文档：http: [//php.net/heredoc](http://php.net/heredoc)

# html - 响应式堆叠 div

> ID：13291993
> 
> 赞同：4
> 
> 时间：2012-11-08T15:23:34.063
> 
> 标签：html, css

我正在开发一个响应式网站，当在桌面/大屏幕上时，它将采用以下布局。

1.  标题
2.  菜单
3.  内容

然后当它在手机/小屏幕上时

1.  标题
2.  内容
3.  菜单

怎么能做到这一点？我见过的例子似乎都使用了绝对定位，但我希望它是动态的屏幕大小和大小/动态移动。

谢谢！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-08T15:49:26.987

您可以使用 CSS3 **flexbox** `box-direction: reverse;`属性。像这样写：

```
.flex{
    display: -moz-box;
    -moz-box-orient:vertical;
    -webkit-box-orient:vertical;
    display: -webkit-box;
    box-orient:vertical;
    display:box;
    width:100%;
}
.flex div, .header{
    border:1px solid red;
    height:100px;    
}

@media screen and (max-width : 400px){
    .flex{
    -moz-box-direction: reverse;
    -webkit-box-direction: reverse;
    box-direction: reverse;
}
} 
```

检查这个[http://jsfiddle.net/Hj5pz/](http://jsfiddle.net/Hj5pz/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-08T15:27:36.833

CSS 不能重新排列 HTML 元素的顺序，这就是在这种情况下使用绝对定位的原因。

或者，您可能需要有一个部分的隐藏副本，该部分在一种格式中可见，而在另一种格式中不可见，反之亦然。

# asp.net - 我的服务器是否缺少存储空间？

> ID：13291996
> 
> 赞同：0
> 
> 时间：2012-11-08T15:23:42.613
> 
> 标签：asp.net, sql-server, windows, timeout

我有两个使用托管在专用 Windows 2003 服务器上的 SQL Server 2005 的 ASP.Net Web 应用程序。其中一个应用程序每天只收到大约 100 个独特的点击，但是，另一个应用程序平均每天收到 6,000 个独特的点击。这两个应用程序已经运行了大约 4 年，没有任何问题。

最近我注意到这两个应用程序都变慢了很多，页面加载需要很长时间，比平时长得多。我还注意到其中一个应用程序可能每天出现一次或两次以下错误

> System.Data.SqlClient.SqlException：超时已过期。在操作完成之前超时时间已过或服务器没有响应。在 System.Data.SqlClient.SqlConnection.OnError(SqlException 异常，Boolean breakConnection) 在 System.Data.SqlClient.SqlInternalConnection.OnError(SqlException 异常，Boolean breakConnection) 在 System.Data.SqlClient.TdsParser.ThrowExceptionAndWarning(TdsParserStateObject stateObj) 在 System .Data.SqlClient.TdsParser.Run（RunBehavior runBehavior，SqlCommand cmdHandler，SqlDataReader dataStream，BulkCopySimpleResultSet bulkCopyHandler，TdsParserStateObject stateObj）

两个数据库的容量加起来约为 3 Gig，服务器上的 C 盘约为 20 Gig。但是，C 驱动器上的当前可用空间为 3 Gig。

我最初认为超时错误来自我的代码中的连接泄漏，但现在我不太确定，因为如前所述，这些应用程序已经运行了 4 年，没有出现这样的问题。

您认为问题可能出在我的服务器上吗？