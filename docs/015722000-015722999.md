# StackOverflow 问答 15722000-15722999

# c# - 在 Metro 应用程序 C# 中存储应用程序数据

> ID：15722001
> 
> 赞同：1
> 
> 时间：2013-03-30T18:34:08.180
> 
> 标签：c#, database, microsoft-metro, storage

我对 Windows 8 编程完全陌生，我现在正在 C# 上为 Windows 8 编写日记应用程序。它存储用户写的日记笔记。问题如下：我如何存储这些笔记，以便用户（和程序）可以通过日期轻松访问它们中的任何一个？我曾考虑将它们中的每一个存储在一个单独的文件中，或者将它们全部存储在一个文件中，但这对我来说似乎不是一个好主意。使用某种本地数据库会很好，但是在内置的 Metro 开发工具中有这样的东西吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-30T22:20:01.530

您可以使用 SQLite 作为您的数据库：[http ://timheuer.com/blog/archive/2012/08/07/updated-how-to-using-sqlite-from-windows-store-apps.aspx](http://timheuer.com/blog/archive/2012/08/07/updated-how-to-using-sqlite-from-windows-store-apps.aspx)

# ember.js - 在ember中渲染与嵌套路由关联的视图时出现问题

> ID：15722002
> 
> 赞同：0
> 
> 时间：2013-03-30T18:34:11.400
> 
> 标签：ember.js

我遇到了 ember.js 的问题。使用以下路由设置，我无法让条目/新路由正常工作。索引工作正常，但条目/新模板只是拒绝呈现。我认为这是我试图在 renderTemplate 中渲染视图的地方，但我不确定我做错了什么。您的帮助将不胜感激。

```
Journal.Router.map ->
    @resource 'entries', {path: '/' }, ->
        @route 'new'
        return
    return

Journal.EntriesNewRoute = Ember.Route.extend
    renderTempalte: ->
        @render 'entriesNew', {
            into: 'application'
        }
    setupController: (controller) ->
        controller.set 'heading', 'new entry'
        return

Journal.EntriesNewView = Ember.View.extend
    className: ['entries-new']
    templateName: 'entries/new'

Journal.EntriesNewController = Ember.Controller.extend
    heading: "New Journal Entry"

    createEntry: ->
        title = @get 'newTitle'
        content = @get 'newContent'

        if !title.trim()  and !content.trim() then return null

        Journal.Entry.createRecord
            title: title
            content: content

        @get('store').commit()
        return 
```

以及条目/新模板

```
{{ heading }}

{{view Ember.TextField id="entry-title" placeholder="Enter a title" valueBinding="newTitle"}}

{{view Ember.TextArea id="entry-content" placeholder="What do you have to say?" valueBinding="newContent"}}

<button {{action "createEntry"}} class="save">Save</button> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-08T01:25:51.623

在您的路线中，'into' 应该针对有您的 {{outlet}} 的路线

```
renderTempalate: ->
    @render 'entriesNew', {
        into: 'entries'
    } 
```

虽然 renderTemplate 钩子的默认操作是渲染到它的资源出口，但只要您的 Entries 模板中有一个 {{outlet}} 并且您遵守严格的命名约定，您根本不需要定义该钩子。

If that's not the issue maybe post your Entries template

# html - 如何在表单中创建选择范围？

> ID：15722005
> 
> 赞同：0
> 
> 时间：2013-03-30T18:34:25.047
> 
> 标签：html, ajax, forms, expressionengine, safecracker

我正在使用 expressionengine 和 safecraker 为调度应用程序创建一个 Web 表单，该应用程序允许用户选择他们想要的轮班时间（例如：早上 6 点到晚上 8 点）。我希望表格知道开始和结束，并选中中间的所有框以填写范围。

我打算放一堆 if 语句来更改复选框状态，但这似乎很笨拙。有没有人知道这样做的 jquery 工具？或者最好的方法是什么，我似乎找不到任何关于创建它的信息。

我也想更新表格，但不提交。

谢谢！

*更新

我没有任何示例代码，因为我仍处于研究阶段。我不知道从哪里开始，然后显示当天的整个时间表，并且每天都是一个复选框（我当然会添加 css 看起来更好）。举个例子，我希望它像旅游网站一样工作。当您选择出境航班和回程航班时，它会突出显示其间的所有日子。

*解决方案

除了 Trym 的示例之外，我还发现了一个如何在[此处](http://marcneuwirth.com/blog/2010/02/21/using-a-jquery-ui-slider-to-select-a-time-range/)实现它的示例，我认为我太坚持它必须与日历合并。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-30T18:53:26.277

复选框不是获取范围的方法。尝试这样的[事情](http://jqueryui.com/slider/#range)。我认为对于用户和写作来说，这将是一个更流畅的体验。每个示例都有一个非常复杂的[API和源代码。](http://api.jqueryui.com/slider/)我相信您会弄清楚的，但我建议您不要使用复选框。

T。

# class - 创建一个新的类来运行游戏

> ID：15722010
> 
> 赞同：1
> 
> 时间：2013-03-30T18:34:44.690
> 
> 标签：class, methods

我创建了一个做纸石剪刀的课程。

```
public class RPS {

    private char cAns;

    public RPS()
    {
        reset();
    }

    public String promptShoot()
    {
        return "Rock, Paper, Scissors, Shoot! (r/p/s)\n";
    }

    public void AI()
    {
        double temp = Math.random();
        int num = (int)(temp * 2.99);

        switch(num) 
        {
            case 0: 
                cAns = 'r';
                break;
            case 1:
                cAns = 'p';
                break;
            case 2:
                cAns = 's';
                break;
        }
    } 
```

全班随机选择电脑。然后它使用扫描仪要求人工输入。

```
 public int shoot(char hAns)
    {
        if(hAns == cAns)
            return 0;
        else if((cAns == 'r' && hAns == 'p')
                || (cAns == 'p' && hAns == 's')
                || (cAns == 's' && hAns == 'r'))
            return 1;
        else
            return -1;
    } 
```

一旦双方都选择了他们的选择，它就会宣布获胜者：

```
 public String winner(int won)
    {
        if(won == 1)
            return "The human won!!! All hail the human!!!";
        else if(won == -1)
            return "The computer won!!! Humans must die!!!";
        else
            return "Tie!";
    }

    public void reset()
    {
        cAns = 'a';
    }
} 
```

我认为这是可行的，但我没有意识到我需要创建一个单独的类来运行这个 RPS 类。

到目前为止我有这个

```
import java.util.Scanner;

public class game
{
    public static void main(String[] args)
    {
        Scanner scan = new Scanner(System.in);

        RPS choice = new RPS();

        choice.AI();

        System.out.print(choice.promptShoot());
        choice.hAns(scan.nextInt());

        scan.close();
    }
} 
```

我认为这会初始化游戏，但它不起作用。有什么建议或者我可以指出正确的方向吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-30T18:47:45.577

添加`static`到`winner`和`shoot`方法。把它放在最后：

```
System.out.println(winner(shoot(scan.nextLine().charAt(0)))); 
```

消除`choice.hAns(scan.nextInt());`

# javascript - 如何在`datepickr.js`中禁用过去的日期？

> ID：15722013
> 
> 赞同：1
> 
> 时间：2013-03-30T18:34:55.637
> 
> 标签：javascript, jquery, datepicker, datepickr.js

正如标题所说，我想在日期选择器脚本中禁用过去的日期。

这是我创建它的方法：

```
new datepickr('datepick', {
  fullCurrentMonth: true,
  dateFormat: 'j-m-Y',
  minDate: 0 ,
  weekdays: [
    'Lunedì', 'Martedì', 
    'Mercoledì', 'Giovedì', 
    'Venerdì', 'Sabato', 
    'Domenica' 
  ],
  months: [ 
    'Gennaio', 'Febbraio',
    'Marzo', 'Aprile',
    'Maggio', 'Giugno',
    'Luglio', 'Agosto',
    'Settembre', 'Ottobre',
    'Novembre', 'Dicembre' 
  ],
}); 
```

这是整个脚本（来自互联网，我不记得我在哪里找到的）。

```
/*
datepickr - pick your date not your nose
Copyright (c) 2012
*/

var datepickr = (function() {
  var datepickrs = [],
  currentDate = new Date(),
  date = {
    current: {
      year: function() {
        return currentDate.getFullYear();
      },
      month: {
        integer: function() {
          return currentDate.getMonth();
        },
        string: function(full) {
          var date = currentDate.getMonth();
          return monthToStr(date, full);
        }
      },
      day: function() {
        return currentDate.getDate();      
      }
    },
    month: {
      string: function(full, currentMonthView) {
        var date = currentMonthView;
        return monthToStr(date, full);
      },
      numDays: function(currentMonthView, currentYearView) {
        // checks to see if february is a leap year otherwise return the respective # of days
        return (currentMonthView == 1 && !(currentYearView & 3) && (currentYearView % 1e2 || !(currentYearView % 4e2))) ? 29 : daysInMonth[currentMonthView];
      }
    }
  },
  weekdays = ['Dom', 'Lun', 'Mar', 'Mer', 'Gio', 'Ven', 'Sab'],
    months= ['Gennaio', 'Febbraio', 'Marzo', 'Aprile', 'Maggio', 'Giugno', 'Luglio', 'Agosto', 'Settembre', 'Ottobre', 'Novembre', 'Dicembre'],
  daysInMonth = [31, 28, 31, 30, 31, 30, 31, 31, 30, 31, 30, 31],
  suffix = { 1: 'st', 2: 'nd', 3: 'rd', 21: 'st', 22: 'nd', 23: 'rd', 31: 'st' },
  buildCache = [],
  handlers = {
    calendarClick: function(e) {
      if(e.target.className) {
        switch(e.target.className) {
          case 'prev-month':
          case 'prevMonth':
            this.currentMonthView--;
            if(this.currentMonthView < 0) {
              this.currentYearView--;
              this.currentMonthView = 11;
            }
            rebuildCalendar.call(this);
          break;
          case 'next-month':
          case 'nextMonth':
            this.currentMonthView++;
            if(this.currentMonthView > 11) {
              this.currentYearView++;
              this.currentMonthView = 0;
            }
            rebuildCalendar.call(this);
          break;
          case 'day':
            this.element.value = formatDate(new Date(this.currentYearView, this.currentMonthView, e.target.innerHTML).getTime(), this.config.dateFormat);
            this.close();
          break;
        }
      }
    },
    documentClick: function(e) {
      if(e.target != this.element && e.target != this.calendar) {
        var parentNode = e.target.parentNode;
        if(parentNode != this.calender) {
          while(parentNode != this.calendar) {
            parentNode = parentNode.parentNode;
            if(parentNode == null) {
              this.close();
              break;
            }
          }
        }
      }
    }
  };

  function formatDate(milliseconds, dateFormat) {
    var formattedDate = '',
    dateObj = new Date(milliseconds),
    format = {
      d: function() {
        var day = format.j();
        return (day < 10) ? '0' + day : day;
      },
      D: function() {
        return weekdays[format.w()].substring(0, 3);
      },
      j: function() {
        return dateObj.getDate();
      },
      l: function() {
        return weekdays[format.w()] + 'day';
      },
      S: function() {
        return suffix[format.j()] || 'th';
      },
      w: function() {
        return dateObj.getDay();
      },
      F: function() {
        return monthToStr(format.n(), true);
      },
      m: function() {
        var month = format.n() + 1;
        return (month < 10) ? '0' + month : month;
      },
      M: function() {
        return monthToStr(format.n(), false);
      },
      n: function() {
        return dateObj.getMonth();
      },
      Y: function() {
        return dateObj.getFullYear();
      },
      y: function() {
        return format.Y().toString().substring(2, 4);
      }
    },
    formatPieces = dateFormat.split('');

    foreach(formatPieces, function(formatPiece) {
      formattedDate += format[formatPiece] ? format[formatPiece]() : formatPiece;
    });

    return formattedDate;
  }

  function foreach(items, callback) {
    var i = 0, x = items.length;
    for(i; i < x; i++) {
      if(callback(items[i], i) === false) {
        break;
      }
    }
  }

  function addEvent(element, eventType, callback) {
    if(element.addEventListener) {
      element.addEventListener(eventType, callback, false);
    } else if(element.attachEvent) {
      var fixedCallback = function(e) {
        e = e || window.event;
        e.preventDefault = (function(e) {
          return function() { e.returnValue = false; }
        })(e);
        e.stopPropagation = (function(e) {
          return function() { e.cancelBubble = true; }
        })(e);
        e.target = e.srcElement;
        callback.call(element, e);
      };
      element.attachEvent('on' + eventType, fixedCallback);
    }
  }

  function removeEvent(element, eventType, callback) {
    if(element.removeEventListener) {
      element.removeEventListener(eventType, callback, false);
    } else if(element.detachEvent) {
      element.detachEvent('on' + eventType, callback);
    }
  }

  function buildNode(nodeName, attributes, content) {
    var element;

    if(!(nodeName in buildCache)) {
      buildCache[nodeName] = document.createElement(nodeName);
    }

    element = buildCache[nodeName].cloneNode(false);

    if(attributes != null) {
      for(var attribute in attributes) {
        element[attribute] = attributes[attribute];
      }
    }

    if(content != null) {
      if(typeof(content) == 'object') {
        element.appendChild(content);
      } else {
        element.innerHTML = content;
      }
    }

    return element;
  }

  function monthToStr(date, full) {
    return ((full == true) ? months[date] : ((months[date].length > 3) ? months[date].substring(0, 3) : months[date]));
  }

  function isToday(day, currentMonthView, currentYearView) {
    return day == date.current.day() && currentMonthView == date.current.month.integer() && currentYearView == date.current.year();
  }

  function buildWeekdays() {
    var weekdayHtml = document.createDocumentFragment();
    foreach(weekdays, function(weekday) {
      weekdayHtml.appendChild(buildNode('th', {}, weekday.substring(0, 2)));
    });
    return weekdayHtml;
  }

  function rebuildCalendar() {
    while(this.calendarBody.hasChildNodes()){
      this.calendarBody.removeChild(this.calendarBody.lastChild);
    }

    var firstOfMonth = new Date(this.currentYearView, this.currentMonthView, 1).getDay(),
    numDays = date.month.numDays(this.currentMonthView, this.currentYearView);

    this.currentMonth.innerHTML = date.month.string(this.config.fullCurrentMonth, this.currentMonthView) + ' ' + this.currentYearView;
    this.calendarBody.appendChild(buildDays(firstOfMonth, numDays, this.currentMonthView, this.currentYearView));
  }

  function buildCurrentMonth(config, currentMonthView, currentYearView) {
    return buildNode('span', { className: 'current-month' }, date.month.string(config.fullCurrentMonth, currentMonthView) + ' ' + currentYearView);
  }

  function buildMonths(config, currentMonthView, currentYearView) {
    var months = buildNode('div', { className: 'months' }),
    prevMonth = buildNode('span', { className: 'prev-month' }, buildNode('span', { className: 'prevMonth' }, '&lt;')),
    nextMonth = buildNode('span', { className: 'next-month' }, buildNode('span', { className: 'nextMonth' }, '&gt;'));

    months.appendChild(prevMonth);
    months.appendChild(nextMonth);

    return months;
  }

  function buildDays(firstOfMonth, numDays, currentMonthView, currentYearView) {
    var calendarBody = document.createDocumentFragment(),
    row = buildNode('tr'),
    dayCount = 0, i;

    // print out previous month's "days"
    for(i = 1; i <= firstOfMonth; i++) {
      row.appendChild(buildNode('td', null, '&nbsp;'));
      dayCount++;
    }

    for(i = 1; i <= numDays; i++) {
      // if we have reached the end of a week, wrap to the next line
      if(dayCount == 7) {
        calendarBody.appendChild(row);
        row = buildNode('tr');
        dayCount = 0;
      }

      var todayClassName = isToday(i, currentMonthView, currentYearView) ? { className: 'today' } : null;
      row.appendChild(buildNode('td', todayClassName, buildNode('span', { className: 'day' }, i)));

      dayCount++;
    }

    // if we haven't finished at the end of the week, start writing out the "days" for the next month
    for(i = 1; i <= (7 - dayCount); i++) {
      row.appendChild(buildNode('td', null, '&nbsp;'));
    }

    calendarBody.appendChild(row);

    return calendarBody;
  }

  function buildCalendar() {
    var firstOfMonth = new Date(this.currentYearView, this.currentMonthView, 1).getDay(),
    numDays = date.month.numDays(this.currentMonthView, this.currentYearView),
    self = this;

    var inputLeft = inputTop = 0,
    obj = this.element;

    if(obj.offsetParent) {
      do {
        inputLeft += obj.offsetLeft;
        inputTop += obj.offsetTop;
      } while (obj = obj.offsetParent);
    }

    var calendarContainer = buildNode('div', { className: 'calendar' });
    calendarContainer.style.cssText = 'display: none; position: absolute; top: ' + (inputTop + this.element.offsetHeight) + 'px; left: ' + inputLeft + 'px; z-index: 100;';

    this.currentMonth = buildCurrentMonth(this.config, this.currentMonthView, this.currentYearView)
    var months = buildMonths(this.config, this.currentMonthView, this.currentYearView);
    months.appendChild(this.currentMonth);

    var calendar = buildNode('table', null, buildNode('thead', null, buildNode('tr', { className: 'weekdays' }, buildWeekdays())));
    this.calendarBody = buildNode('tbody');
    this.calendarBody.appendChild(buildDays(firstOfMonth, numDays, this.currentMonthView, this.currentYearView));
    calendar.appendChild(this.calendarBody);

    calendarContainer.appendChild(months);
    calendarContainer.appendChild(calendar);

    document.body.appendChild(calendarContainer);

    addEvent(calendarContainer, 'click', function(e) { handlers.calendarClick.call(self, e); });

    return calendarContainer;
  }

  return function(elementId, userConfig) {
    var self = this;

    this.element = document.getElementById(elementId);
    this.config = {
      fullCurrentMonth: true,
      dateFormat: 'F jS, Y'
    };
    this.currentYearView = date.current.year();
    this.currentMonthView = date.current.month.integer();

    if(userConfig) {
      for(var key in userConfig) {
        if(this.config.hasOwnProperty(key)) {
          this.config[key] = userConfig[key];
        }
      }
    }

    this.documentClick = function(e) { handlers.documentClick.call(self, e); }

    this.open = function(e) {
      addEvent(document, 'click', self.documentClick);

      foreach(datepickrs, function(datepickr) {
        if(datepickr != self) {
          datepickr.close();
        }
      });

      self.calendar.style.display = 'block';
    }

    this.close = function() {
      removeEvent(document, 'click', self.documentClick);
      self.calendar.style.display = 'none';
      document.getElementById("abb").focus();
    }

    this.calendar = buildCalendar.call(this);

    datepickrs.push(this);

    if(this.element.nodeName == 'INPUT') {
      addEvent(this.element, 'focus', this.open);
    } else {
      addEvent(this.element, 'click', this.open);
    }
  }
})(); 
```

我已经尝试过，`minDate: 0`但没有奏效。

一些想法？谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-30T18:41:38.763

查看 datepicker [http://api.jqueryui.com/datepicker/](http://api.jqueryui.com/datepicker/)如何使用**minDate**的文档。

当您使用 datepicker.js 时，您必须使用库中已经提供的**minDate属性。**

[`jsFiddle`](http://jsfiddle.net/UE4rD/)链接我发现谷歌搜索。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-30T18:47:20.660

试试这样：

```
minDate:'0d'

$("#id").datepicker({ changeYear: true, dateFormat: 'dd/mm/yy', showOn: 'none', showButtonPanel: true,  minDate:'0d' }); 
```

并在之后检查

```
alert( $("#id").datepicker( "option", "minDate" )); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-30T20:28:42.990

您可以像这样将 minDate 参数传递给新的 Datepicker obj：

```
new datepickr('datepick',
{
     fullCurrentMonth : true,
     dateFormat : 'j-m-Y',
     minDate: new Date(2007, 0, 1), //The format to pass in is: Year, Month (starting at 0), day
     weekdays : [ 'Lunedì', 'Martedì',
             'Mercoledì', 'Giovedì',
             'Venerdì', 'Sabato',
             'Domenica' ],
     months : [ 'Gennaio', 'Febbraio',
             'Marzo', 'Aprile',
             'Maggio', 'Giugno',
             'Luglio', 'Agosto',
             'Settembre', 'Ottobre',
             'Novembre', 'Dicembre' ],

 }); 
```

# scala - Does TypeSafe Slick work on Scala 2.9.3?

> ID：15722014
> 
> 赞同：0
> 
> 时间：2013-03-30T18:35:07.730
> 
> 标签：scala, slick

Does TypeSafe Slick work on Scala 2.9.3? I get

```
[ERROR] exception when typing query.list
exception when typing query.listscala.tools.nsc.symtab.Types$TypeError: class file needed by StatementInvoker is missing.
[INFO] class file needed by StatementInvoker is missing.
[INFO] reference type Either of object package refers to nonexisting symbol. 
```

which goes away when I use Scala 2.10.x, but I'm too new to Scala to understand why.

```
import slick.session.Database
import scala.slick.jdbc.StaticQuery
import Database.threadLocalSession
import com.typesafe.config.ConfigFactory

object PostgresDao {

  protected val conf = ConfigFactory.load

  def findFoo(a: Int, b: String): Option[Int] = {

    Database.forURL("jdbc:postgresql://localhost/bar", driver = "org.postgresql.Driver") withSession {

      val query = StaticQuery.query[(Int, String), Int](
        """
        select some_int
        from some_table t
        where t.a = ? and t.b = ?
        """.stripMargin)

      val list: List[Int] = query.list((a, b))

      if (list.isEmpty) {
        None
      }
      else {
        Some(list.head)
      }
    }
  } 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-30T18:37:50.713

I shamelessly copy-past official doc here:

> [Slick requires Scala 2.10.](http://slick.typesafe.com/doc/1.0.0/introduction.html#composable) (For Scala 2.9 please use [ScalaQuery](http://scalaquery.org/), the predecessor of Slick).

# matlab - MATLAB - display figure only when everything has been plotted

> ID：15722016
> 
> 赞同：1
> 
> 时间：2013-03-30T18:35:15.607
> 
> 标签：matlab, plot

I'm trying to plot a 2d finite element solution and am plotting triangle-by-triangle like so:

```
for i=1:K
    figure(1)
    fill3(x,y,z,c)
    hold on
end 
```

The problem with this is that when I run the code, it literally draws them all in real time so I can see each triangle being drawn. What I want it to just have the finished figure pop up once it's all done.

My friend has coded the same thing except she's not having this issue at all and we can't find any differences in the code. My computer is very fast so it's not an issue of lag. I'm thinking maybe there's a setting in MATLAB that I'm missing?

Edit: I found the problem. Apparently, putting 'figure(1)' inside the loop makes a huge difference. I timed it with 'tic' and 'toc' and it took 54 seconds with the 'figure(1)' label inside the loop and 2 seconds when it was moved just before the loop. Go figure...

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-30T18:49:10.383

When you start the figure, set the `visible` property to `'off'`; when you are done plotting, set the visibility to `'on'`.

```
h = figure('visible','off');
hold on;
for i=1:K    
    fill3(x,y,z,c);
end
hold off;
set(h,'visible','on'); 
```

Also, I'm not entirely sure how the event queue works in MATLAB, but I'm fairly sure the fact you have a fast computer is effecting this. You can simulate what's happening with your computer by using `drawnow` on your friends slower comp within the for-loop.

# algorithm - 通过巧克力的回合数

> ID：15722017
> 
> 赞同：0
> 
> 时间：2013-03-30T18:35:19.427
> 
> 标签：algorithm, combinatorics

我们正在玩一个游戏，其中有 n 个孩子围成一圈坐着。他们每个人都有一些巧克力。巧克力的总数使得它们可以平均分配给所有孩子。

在一轮中，任何一个孩子向左或向右传递一颗巧克力。我们需要回答，至少需要多少轮这样的轮次才能让所有人拥有相同数量的巧克力。

给出了孩子的数量 n 和每个孩子的巧克力数量。

我们应该应用什么算法？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-30T18:58:43.193

我的启发式是：

```
while (not equally divided)
    find kid A with the most chocolates
    while (A has more that he should)
        find closest kid B with fewer than he should
            pass one from A to B and add to the number of moves (taking distance into account) 
```

# extjs - 分解煎茶架构师 2 生成的代码

> ID：15722023
> 
> 赞同：0
> 
> 时间：2013-03-30T18:35:33.057
> 
> 标签：extjs

我想将 sencha 架构师 2 生成的代码分解为不同的类我想要的是在另一个类中声明一个 tabpanel 并在下面的代码中使用实例化类。

```
Ext.define('MyApp.view.MyWindow', {
extend: 'Ext.window.Window',

height: 430,
width: 748,
layout: {
    type: 'fit'
},
title: 'Add New Business Unit',
modal: true,

initComponent: function() {
    var me = this;

    Ext.applyIf(me, {
        items: [
            {
                xtype: 'tabpanel',
                frame: true,
                activeTab: 0,
                items: [
                    { 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-30T20:05:16.367

我想我明白你想要做什么。因此，我没有输入答案（我今天感到很懒惰......），而是创建了一个简短的截屏视频，希望能解释您想要实现的目标。[http://screencast.com/t/RhiMAreJBTwb](http://screencast.com/t/RhiMAreJBTwb)

# entity-framework - Linq to entity - Join with multiple contidions

> ID：15722027
> 
> 赞同：0
> 
> 时间：2013-03-30T18:36:02.510
> 
> 标签：entity-framework, linq-to-entities

I`m using Entity Framwork and i have the next projection:

```
 var items = from mapsDsc in DbContext.MapsDesc
                    join mapCat in DbContext.MapsCategories on mapsDsc.MapID equals mapCat.MapID
                    join mainCat in DbContext.MainCategories on mapCat.MainCategory equals mainCat.MainCatID
                    join subCat in DbContext.SubCategories on mapCat.SubCategory equals subCat.SubCatID
                    select new DataModel.ComplexEntities.MapsDescExt
                    {
                        MapID = mapsDsc.MapID,
                        MapName = mapsDsc.MapName,
                        MapLink = mapsDsc.MapLink,
                        Note = mapsDsc.Note,
                        MainCategoryID = mapCat.MainCategory,
                        MainCategoryName = mainCat.Category,
                        SubCategoryID = mapCat.SubCategory,
                        SubCategoryName = subCat.Category
                    }; 
```

Please notice that this projection filling strong type and not anonymous one. I need to customize this projection a little bit but i don`t know how.

At my last join i need to implement the next condition with "or" operator:

```
join subCat in DbContext.SubCategories on mapCat.SubCategory equals subCat.SubCatID or subCat.SubCatID equals "0" 
```

How can I do it? All the exampels I seen relate to anonymous types and it`s not good for me. Thanks

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-31T00:01:16.323

You don't *have* to use the join syntax, you can do the same by a manual `where` and then slip in an extra condition:

```
var items = from mapsDsc in DbContext.MapsDesc
            join mapCat in DbContext.MapsCategories on mapsDsc.MapID
                                                equals mapCat.MapID
            join mainCat in DbContext.MainCategories on mapCat.MainCategory
                                                 equals mainCat.MainCatID
            from subCat in DbContext.SubCategories
/* here */  where mapCat.SubCategory == subCat.SubCatID || subCat.SubCatID == "0"
            select new DataModel.ComplexEntities.MapsDescExt
            {
            ... 
```

(Note that `mapCat.SubCategory` should be an id field, you probably know which).

# mysql - 纬度，经度，人口的最佳数据库模式？

> ID：15722028
> 
> 赞同：4
> 
> 时间：2013-03-30T18:36:06.073
> 
> 标签：mysql, database, maps, gis

我正在开发一个需要查询一个非常大的人口密度数据库的 Web 应用程序。数据基本上是纬度、经度和人口数量（您可以将其抽象为*lat, lon, pop*）。

我将为此使用 MySQL 和 PHP。数据非常精细，因此点的总数非常大——大约数十亿。（老实说，我现在还不知道它有多大；我还没有完整的数据，只是可以玩的样本。）服务器只是一个廉价的服务器农场机器（例如 Bluehost）。

该应用程序将尝试聚合以特定纬度和经度坐标为中心的任意半径圆圈的人口数据。所以基本上我会说，“告诉我一个以*lat, lon*为中心的半径为*x*的圆的总人口。” 这可能只涉及编写一个非常简单的求和函数。

 *鉴于上述所有情况，以及希望尽可能快速和高效的愿望，我的问题是：**最好的数据库模式是什么？**我看过[这里](https://stackoverflow.com/questions/1370170/database-sql-how-to-store-longitude-latitude-data "这里")并学习了一些关于这种数据存储的很好的基础知识（浮点数适用于纬度/经度数据，BETWEEN 语句比 < 和 > 运算符快），但我想知道，如果对于大量数据，有一个比拥有数十亿行和三个字段（例如*lat、lon、pop*）的表更好的方法。

我想到的可能的想法是将所有主要的经度标题分开到单独的表格中，但我不知道这是否真的会加快速度。*（除了索引之外，我对 MySQL 优化了解不多。）另一个相关的想法是为各种数据“块”（例如特定的lat* x *lon*正方形）存储超长的十六进制数据字符串。另一种选择是本质上使用大的二进制位图并动态解码它们（但是，这让我觉得我的相对便宜的服务器管理起来不切实际）。

但我不是 DBA，甚至不是真正的程序员（我不是初学者，但我不是专业人士），所以我很想听听有关如何做到这一点的任何其他建议，并且考虑到当前的服务器处理能力，这是否是一个疯狂的想法。*

# c++ - Is there a guava like library for c++?

> ID：15722034
> 
> 赞同：5
> 
> 时间：2013-03-30T18:36:38.803
> 
> 标签：c++, guava

Is there a c++ library like guava (java), extending the standard library with a couple of useful methods, classes and shortcuts.

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2013-03-30T18:39:52.120

Hell yeah. It's called [boost](http://www.boost.org).

> ..one of the most highly regarded and expertly designed C++ library projects in the world. — Herb Sutter and Andrei Alexandrescu, C++ Coding Standards

# php - Content/ Site share on Blogger and Tumblr

> ID：15722040
> 
> 赞同：3
> 
> 时间：2013-03-30T18:37:02.923
> 
> 标签：php, wordpress, share, tumblr, blogger

Can any body tell me how to share Url or content of a site by PHP on Blogger and Tumblr as how we can share on Facebook with

```
<a href="http://www.facebook.com/sharer.php?u=sitename/pagabc" target="blank"><img src="images/fbshare.png" /></a> 
```

or Twitter

```
<a href="http://twitter.com/share?text=TestText&url=sitename/pagabc" target="_blank"><img src="images/twittershare.png" /></a> 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-01T18:32:45.907

Try following and I hope your problem will be solved.

For Tumblr

```
http://tumblr.com/share?s=&v=3&t=[Share Name Title/PHP ECHO Share Name Title]&u=[URL/PHP ECHO URL] 
```

For Blogger

```
http://blogger.com/blog-this.g?t=[TEXT]&n=[Share Name Title/PHP ECHO Share Name Title]&u=[URL/PHP ECHO URL] 
```

# python - Python Requests library GET/POST gives ConnectionError: HTTPConnectionPool with proxy

> ID：15722046
> 
> 赞同：0
> 
> 时间：2013-03-30T18:37:31.430
> 
> 标签：python, rest, proxy, python-requests

I'm using the Python library Requests to write an API wrapper for my company's server software. I'm writing a test script using Python 2.7 on Windows 7 64\. We use a proxy to connect to my work network, we'll call the IP x.x.x.x:8080\. My script is as follows:

```
import requests

ssHost = 'localhost'
ssPort = 3700
aci_Action = 'GetStatus'

aci_params = {'Action':aci_Action}
aci_RequestUrl = 'http://' + ssHost + ':' + str(ssPort)

aci_response = requests.get(aci_RequestUrl, params=aci_params)

print(aci_response.text) 
```

This is supposed to send a GET request to `http://localhost:3700/Action=GetStatus` and it works fine when I'm on my work network. However, when I get home and I am not using a proxy to connect, I get the following when I run the script:

> ConnectionError: HTTPConnectionPool(host='x.x.x.x', port=8080): Max retries exceeded with url: `http://localhost:3700/?Action=GetStatus` (Caused by : [Errno 10060] A connection attempt failed because the connected party did not properly respond after a period of time, or established connection failed because connected host has failed to respond)

I'm sure I've turned off the proxy using the settings in Internet Explorer but I'm still getting this error. The thing is, the proxy address that the error displays is an old one that I don't use anymore. I'm trying to figure out where this proxy is set. There are things going on here that I don't understand and if anyone can point me in the right direction as far as troubleshooting I would be grateful. Thanks!

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-30T23:11:07.227

Double-check the proxy settings in the Internet Options, and also check if an environment variable `http_proxy` exists.

# android - 使用 asyncTask 填充 ListView

> ID：15722048
> 
> 赞同：1
> 
> 时间：2013-03-30T18:37:48.000
> 
> 标签：android, android-listview, android-asynctask

您好，我在使用 asyncTask 填充惰性 ListView 时遇到问题。所以我在寻求你的帮助。

这是我的活动课程：

```
import java.util.ArrayList;

import org.json.JSONArray;
import org.json.JSONException;
import org.json.JSONObject;

import android.app.Activity;
import android.os.AsyncTask;
import android.os.Bundle;
import android.util.Log;
import android.view.View;
import android.view.View.OnClickListener;
import android.widget.EditText;
import android.widget.ImageView;
import android.widget.ListView;

import com.outsoucefarm.musicagratis.functions.AlbumLazyAdapter;
import com.outsoucefarm.musicagratis.functions.JSONParser;
import com.outsoucefarm.musicagratis.objects.Albums;
import com.outsoucefarm.musicagratis.objects.Songs;
import com.outsourcefarm.musicagratis.R;

public class LatestAlbums extends Activity {

    // widgets
    private ListView list;
    private ImageView back;
    private EditText find;

    // URL to make request
    private static String url = "http://someurl.com/data.json";

    // JSON Node names
    private static final String TAG_ALBUMS = "albums";
    private static final String TAG_ID = "id";
    private static final String TAG_NAME = "name";
    private static final String TAG_SINGER = "singer";
    private static final String TAG_GENRE = "genre";
    private static final String TAG_MIX = "mix";
    private static final String TAG_THUMB = "thumb";
    private static final String TAG_SONGS = "songs";
    private static final String TAG_SONG_TITLE = "song";
    private static final String TAG_SONG_ARTIST = "artist";
    private static final String TAG_SONG_MP3 = "mp3";
    private static final String TAG_SONG_MP4 = "mp4";
    private static final String TAG_SONG_THUMB = "thumb";

    // albums JSONArray
    private JSONArray albums = null;
    private JSONArray sngs = null;

    private ArrayList<Albums> albumsArray;
    private ArrayList<Songs> songsArray;
    private AlbumLazyAdapter adapter;

    @Override
    protected void onCreate(Bundle savedInstanceState) {
        // TODO Auto-generated method stub
        super.onCreate(savedInstanceState);
        setContentView(R.layout.latest_albums);
        try {
            loadJSON();
        } catch (JSONException e) {
            // TODO Auto-generated catch block
            e.printStackTrace();
        }
        // initWidgets();
    }

    private void initWidgets() {
        list = (ListView) findViewById(R.id.listView1);
        back = (ImageView) findViewById(R.id.latest_back_img);
        find = (EditText) findViewById(R.id.latest_search_et);
        back.setOnClickListener(new OnClickListener() {

            @Override
            public void onClick(View v) {
                finish();
            }
        });
        adapter = new AlbumLazyAdapter(this, albumsArray);
        list.setAdapter(adapter);
    }

    public void loadJSON() throws JSONException {
        AsyncTask<Void, Void, Void> task = new AsyncTask<Void, Void, Void>() {

            @Override
            protected Void doInBackground(Void... params) {
                // Creating JSON Parser instance
                JSONParser jParser = new JSONParser();

                // getting JSON string from URL
                JSONObject json = jParser.getJSONFromUrl(url);

                JSONObject theJSON;

                try {
                    // Getting Array of albums
                    theJSON = json.getJSONObject("json");
                    albums = theJSON.getJSONArray(TAG_ALBUMS);
                    // sngs=theJSON.getJSONArray(TAG_SONGS);
                    // looping through All albums
                    for (int i = 0; i < albums.length(); i++) {
                        JSONObject c = albums.getJSONObject(i);

                        // Storing each json item in variable
                        String album_id = c.getString(TAG_ID);
                        String album_name = c.getString(TAG_NAME);
                        String album_singer = c.getString(TAG_SINGER);
                        String album_mix = c.getString(TAG_MIX);
                        String album_genre = c.getString(TAG_GENRE);
                        String album_thumb = c.getString(TAG_THUMB);
                        albumsArray.add(new Albums(album_id, album_name,
                                album_singer, album_genre, album_mix,
                                album_thumb));
                        Log.v("--", "Albums" + " " + album_id + " "
                                + album_name + " " + album_genre + " "
                                + album_singer + " " + album_thumb + " "
                                + album_mix);
                        sngs = c.getJSONArray(TAG_SONGS);

                        // getting songs for the album
                        for (int j = 0; j < sngs.length(); j++) {
                            JSONObject songs = sngs.getJSONObject(j);
                            String song_artist = songs
                                    .getString(TAG_SONG_ARTIST);
                            String song_mp3 = songs.getString(TAG_SONG_MP3);
                            String song_mp4 = songs.getString(TAG_SONG_MP4);
                            String song_thumb = songs.getString(TAG_SONG_THUMB);
                            String song_title = songs.getString(TAG_SONG_TITLE);
                            Log.v("--", "Songs: " + j + " " + song_artist + " "
                                    + song_mp3 + " " + song_mp4 + " "
                                    + song_thumb + " " + song_title);
                            songsArray.add(new Songs(song_title, song_artist,
                                    song_mp3, song_mp4, song_thumb));
                        }

                    }

                } catch (JSONException e) {
                    e.printStackTrace();
                }
                return null;
            }
            @Override
            protected void onPostExecute(Void result) {
                super.onPostExecute(result);
                initWidgets();
                adapter.notifyDataSetChanged();
            }

        }; task.execute();

    }

} 
```

这是我从 logCat 中得到的：

```
03-30 19:44:48.352: E/AndroidRuntime(2474): FATAL EXCEPTION: AsyncTask #1
03-30 19:44:48.352: E/AndroidRuntime(2474): java.lang.RuntimeException: An error occured while executing doInBackground()
03-30 19:44:48.352: E/AndroidRuntime(2474):     at android.os.AsyncTask$3.done(AsyncTask.java:278)
03-30 19:44:48.352: E/AndroidRuntime(2474):     at java.util.concurrent.FutureTask$Sync.innerSetException(FutureTask.java:273)
03-30 19:44:48.352: E/AndroidRuntime(2474):     at java.util.concurrent.FutureTask.setException(FutureTask.java:124)
03-30 19:44:48.352: E/AndroidRuntime(2474):     at java.util.concurrent.FutureTask$Sync.innerRun(FutureTask.java:307)
03-30 19:44:48.352: E/AndroidRuntime(2474):     at java.util.concurrent.FutureTask.run(FutureTask.java:137)
03-30 19:44:48.352: E/AndroidRuntime(2474):     at android.os.AsyncTask$SerialExecutor$1.run(AsyncTask.java:208)
03-30 19:44:48.352: E/AndroidRuntime(2474):     at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1076)
03-30 19:44:48.352: E/AndroidRuntime(2474):     at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:569)
03-30 19:44:48.352: E/AndroidRuntime(2474):     at java.lang.Thread.run(Thread.java:856)
03-30 19:44:48.352: E/AndroidRuntime(2474): Caused by: java.lang.NullPointerException
03-30 19:44:48.352: E/AndroidRuntime(2474):     at com.outsourcefarm.musicagratis.activities.LatestAlbums$2.doInBackground(LatestAlbums.java:116)
03-30 19:44:48.352: E/AndroidRuntime(2474):     at com.outsourcefarm.musicagratis.activities.LatestAlbums$2.doInBackground(LatestAlbums.java:1)
03-30 19:44:48.352: E/AndroidRuntime(2474):     at android.os.AsyncTask$2.call(AsyncTask.java:264)
03-30 19:44:48.352: E/AndroidRuntime(2474):     at java.util.concurrent.FutureTask$Sync.innerRun(FutureTask.java:305)
03-30 19:44:48.352: E/AndroidRuntime(2474):     ... 5 more 
```

这是在第 116 行：

```
albumsArray.add(new Albums(album_id, album_name,
                                album_singer, album_genre, album_mix,
                                album_thumb)); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-30T18:41:24.213

可能忘记调用启动 AsyncTask`AsyncTask.execute()`的`loadJSON`方法。在你的罐子里，你需要把`task.execute();`最后一条语句放在`loadJSON()`方法中

# javascript - 未捕获的类型错误：无法调用未定义的方法“getLayer”

> ID：15722054
> 
> 赞同：0
> 
> 时间：2013-03-30T18:38:34.460
> 
> 标签：javascript, kineticjs

我正在使用 KineticJS，但是当我尝试在舞台上的一个图层上删除两个组件（一个 Kinetic.Image 实例和一个 Kinetic.Text 实例）时，我得到了未捕获的类型错误，即使我已经将我的代码放在了 try catch 块中.

是什么导致了错误？

这是相关代码

```
var arr = myStage.getChildren()[1].get(".sceneComponents");

for (var i =0; i<arr.length; i++)
{
    try
    {
        //arr[i].setVisible(false);   // Setting its visibility to false works absolutely fine
        arr[i].remove();  //Trying to remove like this throws the uncaught error
    }
    catch(ex)
    {
        console.log(ex);
    }
} 
```

这是完整的错误日志。

```
Uncaught TypeError: Cannot call method 'getLayer' of undefined kinetic.js:37
Kinetic.Node.getLayer kinetic.js:37
Kinetic.Shape.drawHit kinetic.js:42
Kinetic.Container.drawHit kinetic.js:41
Kinetic.Layer.drawHit kinetic.js:44
Kinetic.Container.drawHit kinetic.js:41
Kinetic.Container.draw kinetic.js:41
tick mainScript.js:221 //This is refering to the myStage.draw() line in my code 
```

更新：

当我用它来删除组件时-

```
layer.arr[i].remove(); 
```

我在同一行收到以下错误

```
TypeError: Cannot read property '0' of undefined 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-30T20:03:31.543

例如，当您创建一个矩形时，您可以像这样删除它：

```
//create stage have a div with id container:
var stage = new Kinetic.Stage({
                container: 'container',
                width: CANVAS_WIDTH,
                height: CANVAS_HEIGHT
            });

//add layer
var myLayer = new Kinetic.Layer();
stage.add(myLayer);

//add black rectangle to layer
var myRect = new Kinetic.Rect({
x: yourX,
y: yourY,
width: yourWitdh,
height: yourHeight,
fill: 'black'
});
myLayer.add(myRect);

//remove rectangle from layer
myRect.remove();
myLayer.draw() 
```

如果要删除层调用中的所有内容：

```
myLayer.removeChildren(); 
```

您还可以隐藏和显示形状：

```
rect.show();
rect.hide(); 
```

可见属性将设置为真或假。如果为假，则不会绘制。看：

[https://github.com/ericdrowell/KineticJS/blob/master/src/Shape.js](https://github.com/ericdrowell/KineticJS/blob/master/src/Shape.js)

```
if(drawFunc && this.isVisible()) {
                context.save();
                canvas._applyOpacity(this);
                canvas._applyLineJoin(this);                
                canvas._applyAncestorTransforms(this);
                drawFunc.call(this, canvas);
                context.restore();
            } 
```

# git - 带有 2 台电脑/mac 的 Git 工作流程

> ID：15722057
> 
> 赞同：1
> 
> 时间：2013-03-30T18:38:46.243
> 
> 标签：git, workflow

我在运输过程中使用我的 macbook 和在家中使用我的电脑进行开发。我的项目文件夹包含所有 php 文件和 .git 文件夹。问题是，在我对我的 macbook 进行更改后，尝试使用 rsync 同步文件夹时遇到了很多冲突。

完成该工作流程的最佳方法是什么？只同步提交的文件，所以没有冲突？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-30T19:48:04.373

您可能会遇到很多冲突，因为您的配置`core.autocrlf`可能设置为原生，自动将行尾转换为 CR+LF (PC) 或 LF (Mac)。

参见例如“[如何在 GIT 存储库中修复 CRLF 以避免合并冲突](https://stackoverflow.com/questions/7187189/how-to-repair-crlf-in-git-repository-to-avoid-merge-conflicts)”。

我建议仅`.gitattributes`用于管理 eol 样式，如“ [What's the best CRLF handling strategy with git？](https://stackoverflow.com/questions/170961/whats-the-best-crlf-handling-strategy-with-git) ”。

请参阅“[如何在不同操作系统之间使用 git core.autocrlf 进行行尾转换](https://stackoverflow.com/questions/3206843/how-line-ending-conversions-work-with-git-core-autocrlf-between-different-operat)”的更多详细信息

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-30T18:47:36.397

您不应尝试 rsync 未提交的文件或本地暂存的文件。使用 git 来暂存这些东西。您始终可以将它们提交到开发分支并将其合并回主线。Git 已经解决了这个问题。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-30T20:53:07.297

忘记 rsync。只需将更改提交到本地 git 存储库，然后`git pull --rebase`在另一台计算机上吸收更改（在将其远程设置为指向第一台计算机之后）。

但是，这确实意味着每次同步时都必须连接计算机，这很乏味。一种不那么乏味的方法是在您控制的某个服务器上设置一个中间 git repo，然后从每台计算机同步到该联网服务器的 git 实例。

例如，如果您获得一个具有普通 shell 访问权限的 VPS 主机帐户，那么在其上安装 git 后，创建网络存储库就像`git init --bare`. 然后从你的每台机器上克隆它，你就可以开始了，只需推拉到中间仓库以在机器之间同步更改。

例如：如果您的 VPS 用户名在 IP 1.2.3.4 上运行的服务器上是“myuserid”，并且您在 VPS 主目录中创建了“mybarerepo”，那么要将其克隆到您的本地计算机上，请键入：`git clone ssh://myuserid@1.2.3.4/~/mybarerepo`

# sql - SQL - 主键选择

> ID：15722059
> 
> 赞同：1
> 
> 时间：2013-03-30T18:38:52.353
> 
> 标签：sql, database-design, primary-key

如果有一个表 ORGANIZATION，我可以使用 license_number 作为主键吗？我知道主键应该是不可变的，但我不知道许可证是否如此。此外，两个组织是否有可能拥有一个许可证？如果不是，我应该使用哪个主键？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-30T18:41:01.090

如果您不是**100%**肯定`license_number`是唯一的，请不要将其用作主键。

`primary key`应该是一个唯一值，可用于引用表中的特定行。为了安全起见，为什么不使用`auto increment`字段？

我会做这样的事情：

```
CREATE TABLE organization
(
organization_id int NOT NULL AUTO_INCREMENT,
license_number varchar(100) -- Set accordingly
another_attribute varchar(255) NOT NULL,
PRIMARY KEY (organization_id )
) 
```

如果`one`组织可以`many` `license numbers`创建另一个名为`org_license_numbers`并跟踪`organization_id`该表和相应`foreign key`的表`organization``license number`

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-30T18:51:43.953

简短的回答：不要使用*外星人*号码作为 PK：

*   The numbering is not under your control, it could change (maybe a prefix will be added if the key space is exhausted), they could even be brutally renumbered
*   since it is not under your controll, uniqueness is not guaranteed. This could also change in time.
*   an extra key element could be added, for instance because the same companies could exist in other countries, too
*   maybe you don't know the ORGANISATION_id (yet), but you still need to create a record
*   The PK *could* function as a foreign key to this table in other tables, changes to the number would cause updates there, too.

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-30T18:45:14.380

好吧，关于公司许可证号的唯一性，您必须咨询您所在国家/地区的律师。

无论如何，您始终可以创建新的、不相关的 ID 列 (INT IDENTITY) 并将其用作主键和聚集索引键。

另请注意，在 SQL Server 中，设计器默认将主键列也设为聚集索引。这并不总是最好的行为。例如，如果您选择许可证号作为主键 - 它可能不是连续的，这意味着数据库引擎必须在现有行之间插入新行，这将导致页面拆分和集群索引的高碎片，这可能会影响性能沉重（特别是如果桌子很大）。因此，请确保即使您选择将许可证号作为主键，也要选择更好的聚集索引键。例如：在表中创建行的日期时间。

祝你好运。

# java - 如何在 Spring 中使用可变属性文件名？

> ID：15722062
> 
> 赞同：1
> 
> 时间：2013-03-30T18:39:06.993
> 
> 标签：java, spring

我正在尝试将应用程序的配置文件与其战争分开。我想将所有属性文件保存在磁盘上的目录中。然后，战争中唯一需要的属性就是配置目录的路径（假设它在一个名为 的文件中`config.properties`）：

```
config.dir = /home/me/config 
```

现在在 spring 配置中，我想加载这个文件（以便我知道其他文件在哪里），然后是外部文件：

```
<bean id="propertySourcesPlaceholderConfigurer"
 class="org.springframework.context.support.PropertySourcesPlaceholderConfigurer">
    <property name="locations">
        <list>
            <value>classpath:META-INF/config.properties</value>
            <value>${config.dir}/other.properties</value>
        </list>
    </property>
</bean> 
```

但这不起作用，占位符未解决：

```
java.io.FileNotFoundException: class path resource [${config.dir}/config.properties] cannot be opened because it does not exist 
```

我还尝试使用单独的 bean 类型`PropertySourcesPlaceholderConfigurer`- 它没有多大帮助。

你知道我怎么能做到这一点吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-30T19:27:49.810

The problem is that the configurer bean has to be fully constructed before it can resolve placeholders in the other bean definitions in the context, so you can't use a placeholder expression in the definition of the configurer that would need to be resolved by the configurer itself.

You could instead put the path to your config dir into `web.xml` as a `context-param`

```
<context-param>
  <param-name>configDir</param-name>
  <param-value>/home/me/config</param-value>
</context-param> 
```

and then access it as `#{contextParameters.configDir}` in your Spring config

```
<bean id="propertySourcesPlaceholderConfigurer"
 class="org.springframework.context.support.PropertySourcesPlaceholderConfigurer">
    <property name="locations">
        <list>
            <value>#{contextParameters.configDir}/other.properties</value>
        </list>
    </property>
</bean> 
```

Or you may be able to do it with two separate configurer beans with different values of `placeholderPrefix`, one loading the `config.properties` and then filling in the `@{config.dir}` placeholder in the other, which then loads the external config file.

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-30T19:31:58.237

This can be resolved by registering a [PropertySource](http://static.springsource.org/spring/docs/3.2.x/javadoc-api/org/springframework/core/env/PropertySource.html) for the default environment. One of the ways this can be done is using Java Configuration:

```
@Configuration
@PropertySource("classpath:META-INF/config.properties")
public class MyConfig {

} 
```

With this in place the placeholder should get resolved:

```
<bean id="propertySourcesPlaceholderConfigurer"
 class="org.springframework.context.support.PropertySourcesPlaceholderConfigurer">
    <property name="locations">
        <list>
            <value>${config.dir}/other.properties</value>
        </list>
    </property>
</bean> 
```

# android - 创建活动时崩溃

> ID：15722065
> 
> 赞同：0
> 
> 时间：2013-03-30T18:39:16.037
> 
> 标签：android, listview, android-activity, crash

在我的应用程序中更改为单独的活动时遇到一些问题。被调用的活动被添加到清单中，所以这不是问题（太容易了，对吧？）

这是我的主要活动，称为麻烦活动：

```
public class MainMenu extends Activity {

@Override
protected void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.activity_main_menu);
}

public void onBtnClick(final View view) {
    Intent intent = null;
    switch (view.getId()) {
    case R.id.btn_Start:
        ...//Working fine
        break;
    case R.id.btn_Options:
        ...//Also working
        break;
    case R.id.btn_Highscores:
        intent = new Intent(this, ScoresMenu.class);
        startActivity(intent);
        break;
    }
}
} 
```

这就是所谓的活动：

```
public class ScoresMenu extends Activity {

String[] content;

@Override
protected void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.activity_scores_menu);

    MyDB db = new MyDB(this);

    ListView lv = (ListView) findViewById(R.id.lv_Scores);

    content = db.getScores(); 
    //This returns a String[20], currently with one entry at [0]

    ArrayAdapter<String> scoreList = new ArrayAdapter<String>(this, 
            android.R.layout.simple_list_item_1, content);
    lv.setAdapter(scoreList);
    db.close();
}
} 
```

这是请求的 getScores()：

```
public String[] getScores() { 

String[] scoreList = new String[20];

SQLiteDatabase db = this.getReadableDatabase(); 
Cursor cursor = db.query(
                TABLE_SCORES, 
                new String[] {KEY_ID, KEY_NAME, KEY_X, KEY_Y, KEY_A, KEY_TIME}, 
                null, null, null, null, 
                KEY_TIME + " ASC", 
                null);

if (cursor.moveToFirst()) { 
    int i = 1; 
    do { 
        String score; 
        String name = cursor.getString(1); 
        int x = Integer.valueOf(cursor.getString(2)); 
        int y = Integer.valueOf(cursor.getString(3)); 
        int a = Integer.valueOf(cursor.getString(4)); 
        String t = cursor.getString(5);

        if(i < 10) 
            score = "0" + i; 
        else 
            score = "" + i; score = score + ") " + name + " (" + x + "x" + y + " Felder mit " + a + " Minen in " + t + ")";

            scoreList[i] = score; i++;
    } while (cursor.moveToNext()); 
}
cursor.close(); 
return scoreList; 
} 
} 
```

到目前为止，我使用 LogCat 解决了这个问题，一切都运行到“lv.setAdapter(scoreList);”之后。所以我猜有一些错误，用 scoreList 填充 ListView ...

LogCat 本身给了我以下信息：

```
03-30 19:04:12.289: W/dalvikvm(9014): threadid=1: thread exiting with uncaught exception (group=0x40d7d8a8)
03-30 19:04:15.221: E/AndroidRuntime(9014): FATAL EXCEPTION: main
03-30 19:04:15.221: E/AndroidRuntime(9014): java.lang.NullPointerException
03-30 19:04:15.221: E/AndroidRuntime(9014):     at android.widget.ArrayAdapter.createViewFromResource(ArrayAdapter.java:394)
03-30 19:04:15.221: E/AndroidRuntime(9014):     at android.widget.ArrayAdapter.getView(ArrayAdapter.java:362)
03-30 19:04:15.221: E/AndroidRuntime(9014):     at android.widget.AbsListView.obtainView(AbsListView.java:2340)
03-30 19:04:15.221: E/AndroidRuntime(9014):     at android.widget.ListView.makeAndAddView(ListView.java:1793)
03-30 19:04:15.221: E/AndroidRuntime(9014):     at android.widget.ListView.fillDown(ListView.java:678)
03-30 19:04:15.221: E/AndroidRuntime(9014):     at android.widget.ListView.fillFromTop(ListView.java:739)
03-30 19:04:15.221: E/AndroidRuntime(9014):     at android.widget.ListView.layoutChildren(ListView.java:1638)
03-30 19:04:15.221: E/AndroidRuntime(9014):     at android.widget.AbsListView.onLayout(AbsListView.java:2170)
03-30 19:04:15.221: E/AndroidRuntime(9014):     at android.view.View.layout(View.java:13846)
03-30 19:04:15.221: E/AndroidRuntime(9014):     at android.view.ViewGroup.layout(ViewGroup.java:4466)
03-30 19:04:15.221: E/AndroidRuntime(9014):     at android.widget.LinearLayout.setChildFrame(LinearLayout.java:1649)
03-30 19:04:15.221: E/AndroidRuntime(9014):     at android.widget.LinearLayout.layoutVertical(LinearLayout.java:1507)
03-30 19:04:15.221: E/AndroidRuntime(9014):     at android.widget.LinearLayout.onLayout(LinearLayout.java:1420)
03-30 19:04:15.221: E/AndroidRuntime(9014):     at android.view.View.layout(View.java:13846)
03-30 19:04:15.221: E/AndroidRuntime(9014):     at android.view.ViewGroup.layout(ViewGroup.java:4466)
03-30 19:04:15.221: E/AndroidRuntime(9014):     at android.widget.FrameLayout.onLayout(FrameLayout.java:448)
03-30 19:04:15.221: E/AndroidRuntime(9014):     at android.view.View.layout(View.java:13846)
03-30 19:04:15.221: E/AndroidRuntime(9014):     at android.view.ViewGroup.layout(ViewGroup.java:4466)
03-30 19:04:15.221: E/AndroidRuntime(9014):     at android.widget.LinearLayout.setChildFrame(LinearLayout.java:1649)
03-30 19:04:15.221: E/AndroidRuntime(9014):     at android.widget.LinearLayout.layoutVertical(LinearLayout.java:1507)
03-30 19:04:15.221: E/AndroidRuntime(9014):     at android.widget.LinearLayout.onLayout(LinearLayout.java:1420)
03-30 19:04:15.221: E/AndroidRuntime(9014):     at android.view.View.layout(View.java:13846)
03-30 19:04:15.221: E/AndroidRuntime(9014):     at android.view.ViewGroup.layout(ViewGroup.java:4466)
03-30 19:04:15.221: E/AndroidRuntime(9014):     at android.widget.FrameLayout.onLayout(FrameLayout.java:448)
03-30 19:04:15.221: E/AndroidRuntime(9014):     at android.view.View.layout(View.java:13846)
03-30 19:04:15.221: E/AndroidRuntime(9014):     at android.view.ViewGroup.layout(ViewGroup.java:4466)
03-30 19:04:15.221: E/AndroidRuntime(9014):     at android.view.ViewRootImpl.performLayout(ViewRootImpl.java:2156)
03-30 19:04:15.221: E/AndroidRuntime(9014):     at android.view.ViewRootImpl.performTraversals(ViewRootImpl.java:1914)
03-30 19:04:15.221: E/AndroidRuntime(9014):     at android.view.ViewRootImpl.doTraversal(ViewRootImpl.java:1134)
03-30 19:04:15.221: E/AndroidRuntime(9014):     at android.view.ViewRootImpl$TraversalRunnable.run(ViewRootImpl.java:4616)
03-30 19:04:15.221: E/AndroidRuntime(9014):     at android.view.Choreographer$CallbackRecord.run(Choreographer.java:747)
03-30 19:04:15.221: E/AndroidRuntime(9014):     at android.view.Choreographer.doCallbacks(Choreographer.java:567)
03-30 19:04:15.221: E/AndroidRuntime(9014):     at android.view.Choreographer.doFrame(Choreographer.java:536)
03-30 19:04:15.221: E/AndroidRuntime(9014):     at android.view.Choreographer$FrameDisplayEventReceiver.run(Choreographer.java:733)
03-30 19:04:15.221: E/AndroidRuntime(9014):     at android.os.Handler.handleCallback(Handler.java:615)
03-30 19:04:15.221: E/AndroidRuntime(9014):     at android.os.Handler.dispatchMessage(Handler.java:92)
03-30 19:04:15.221: E/AndroidRuntime(9014):     at android.os.Looper.loop(Looper.java:153)
03-30 19:04:15.221: E/AndroidRuntime(9014):     at android.app.ActivityThread.main(ActivityThread.java:4987)
03-30 19:04:15.221: E/AndroidRuntime(9014):     at java.lang.reflect.Method.invokeNative(Native Method)
03-30 19:04:15.221: E/AndroidRuntime(9014):     at java.lang.reflect.Method.invoke(Method.java:511)
03-30 19:04:15.221: E/AndroidRuntime(9014):     at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:821)
03-30 19:04:15.221: E/AndroidRuntime(9014):     at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:584)
03-30 19:04:15.221: E/AndroidRuntime(9014):     at dalvik.system.NativeStart.main(Native Method)
03-30 19:04:15.257: I/Process(9014): Sending signal. PID: 9014 SIG: 9 
```

任何人都可以在这里找出问题吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-30T19:16:43.033

问题在于传递给 ArrayAdapter 的“内容”。

*   尝试记录内容变量并查看它是否具有预期值
*   检查是否调用了 'db' 的 open() 方法

# angularjs - Does AngularJS really need jQuery?

> ID：15722066
> 
> 赞同：47
> 
> 时间：2013-03-30T18:39:16.443
> 
> 标签：angularjs

I was reading that AngularJS comes with a lite version of jQuery. However I keep hearing reference to people who talk about Angular and jQuery going together. I even checked out [ng-grid](http://angular-ui.github.com/ng-grid/) and noticed that it says:

> Angular Data Grid written in AngularJS and jQuery by the AngularUI Team

So if I do use Angular just when would I need jQuery and what does the version that comes as part of AngularJS not provide?

* * *

## 回答 #1

> 赞同：74
> 
> 时间：2013-03-31T00:23:02.773

jQLite is a very stripped-down version of jQuery. jQLite is enough for angular to work. This is to minimize dependencies.

Yet, if you load jQuery *before* angular, then angular will use jQuery.

大多数时候，您不需要使用 jQuery。即便如此，对于初学者来说，还是建议完全放弃 jQuery，因为当有一种简单/有角度的方式时，就会倾向于使用 jQuery。这方面有很多例子（主要是通过 jQuery 显示和隐藏元素，当有`ngShow`和`ngHide`指令时）。

稍后，当您开始编写指令时，您可能需要添加 jQuery。

`ngGrid`可能会做很多`jqLite`做不到的事情。因此，他们使用了`jQuery`.

jqLit​​e 的文档和功能：http: [//docs.angularjs.org/api/angular.element](http://docs.angularjs.org/api/angular.element)

# jquery - 表单序列化不起作用

> ID：15722067
> 
> 赞同：11
> 
> 时间：2013-03-30T18:39:20.870
> 
> 标签：jquery, forms, serialization, twitter-bootstrap

我有以下 ICanHaz 表单模板：

```
<script id="outcomeFormTemplate" type="text/html">
    <form id="xyz" class="form-horizontal well" data-async data-target="#outcomeFormDialog" method="POST">
        <div class="modal-header">
            <button type="button" class="close" data-dismiss="modal">×</button>
            <h3 id="myModalLabel">Add outcome</h3>
        </div>
        <div class="modal-body">
            <fieldset>
                <label>Amount</label>
                <div class="input-append">
                    <input type="text" placeholder="00.01" />
                    <span class="add-on">{{ currency }}</span>
                </div>
                {{>UserSelectTemplate}}
                {{>CategorySelectTemplate}}
                <label>Comment</label>
                <input type="text" placeholder="Comment here..." />
            </fieldset>
        </div>
        <div class="modal-footer">
            <button class="btn" data-dismiss="modal">Close</button>
            <button type="submit" class="btn btn-primary">Save outcome</button>
        </div>
    </form>
</script> 
```

它呈现如下：

```
<form id="xyz" class="form-horizontal well" data-async="" data-target="#outcomeFormDialog" method="POST">
        <div class="modal-header">
            <button type="button" class="close" data-dismiss="modal">×</button>
            <h3 id="myModalLabel">Add outcome</h3>
        </div>
        <div class="modal-body">
            <fieldset>
                <label>Amount</label>
                <div class="input-append">
                    <input type="text" placeholder="00.01">
                    <span class="add-on">zł</span>
                </div>
                <label>User</label>
    <select>
        <option>choose user</option>
                <option value="pmc">Paul McCartney</option>
                <option value="jl">John Lennon</option>
                <option value="gh">George Harrison</option>
                <option value="rs">Ringo Starr</option>
        </select>
                <label>Category</label>
    <select>
        <option>choose category</option>
                <option value="1">food</option>
                <option value="2">bills</option>
                <option value="3">electronics</option>
                <option value="4">entertainment</option>
                <option value="5">travels</option>
                <option value="6">bread</option>
                <option value="7">bar</option>
                <option value="8">fruits &amp; vegs</option>
                <option value="9">press</option>
                <option value="10">transport</option>
                <option value="11">lunch</option>
                <option value="12">books</option>
                <option value="13">chemistry</option>
                <option value="14">hygiene</option>
                <option value="15">household goods</option>
                <option value="16">house</option>
                <option value="17">rent</option>
                <option value="18">internet</option>
                <option value="19">repairs</option>
                <option value="20">presents</option>
                <option value="21">tools</option>
                <option value="22">cinema</option>
                <option value="23">footwear</option>
                <option value="24">clothing</option>
                <option value="25">| Chmielewskiego</option>
                <option value="26">flowers</option>
                <option value="27">gas</option>
                <option value="28">electricity</option>
                <option value="29">phones</option>
                <option value="30">meds</option>
                <option value="31">meat</option>
                <option value="32">takeaway</option>
                <option value="33">cosmetics</option>
                <option value="34">education</option>
                <option value="45">theatre</option>
                <option value="47">alcohol</option>
                <option value="48">barber</option>
                <option value="49">health</option>
                <option value="50">doctor</option>
                <option value="51">collectibles</option>
                <option value="52">fish</option>
                <option value="53">handout</option>
                <option value="55">souvenirs</option>
        </select>
                <label>Comment</label>
                <input type="text" placeholder="Comment here...">
            </fieldset>
        </div>
        <div class="modal-footer">
            <button class="btn" data-dismiss="modal">Close</button>
            <button type="submit" class="btn btn-primary">Save outcome</button>
        </div>
    </form> 
```

问题是`.serialize()`返回空字符串。这是为什么？我的 html 结构有问题吗？

```
$("#xyz").serialize()
"" 
```

* * *

## 回答 #1

> 赞同：38
> 
> 时间：2013-03-30T18:41:04.073

您需要设置表单字段的名称。否则它不知道如何命名字段。我从来没有尝试过，所以我不知道通常会发生什么，但这是有道理的。

例如：

```
<select name="user"> 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2013-10-07T07:24:37.697

**[serialize()](http://api.jquery.com/serialize/%E2%80%8E)**查找输入的名称属性，因此在它起作用的输入中使用名称属性。

```
<label>Amount</label>
<div class="input-append">
    <input type="text" name='amt' placeholder="0.01">
    <span class="add-on">zł</span>
</div> 
```

如上所述，在输入中使用 name 属性。

# java - java中的正则表达式

> ID：15722070
> 
> 赞同：0
> 
> 时间：2013-03-30T18:39:29.117
> 
> 标签：java, regex

我想通过正则表达式在字符串中搜索“$_POST['something']”。使用以下正则表达式通过文本板进行了尝试。`".*$_POST\['[a-zA-z0-9]*'\].*"`

当在java中使用相同时，它现在正在工作。?

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-30T18:42:56.887

您不需要开头和结尾`.*`，但您确实需要转义 ，`$`因为它具有字符串零宽度结尾的特殊含义。

```
\\$_POST\\['[a-zA-Z0-9]*'\\] 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-30T18:42:21.527

用这个：

```
"\\$_POST\\['([a-zA-Z0-9]*)'\\]" 
```

像这样的符号`$`在正则表达式中有特定的含义。因此，您需要在它们前面加上`\`

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-30T18:51:59.330

您可以将作为字符串给出的正则表达式模式与[String 类的](http://docs.oracle.com/javase/6/docs/api/java/lang/String.html#matches%28java.lang.String%29)[match(...) 方法](http://docs.oracle.com/javase/6/docs/api/java/lang/String.html#matches%28java.lang.String%29)一起使用。它返回一个.`boolean`

```
String a = "Hello, world! $_POST['something'] Test!";
String b = "Hello, world! $_POST['special!!!char'] Test!";
String c = "Hey there $_GET['something'] foo bar";

String pattern = ".*\\$_POST\\['[A-Za-z0-9]+'\\].*";

System.out.println ("a matches? " + Boolean.toString(a.matches(pattern)));
System.out.println ("b matches? " + Boolean.toString(b.matches(pattern)));
System.out.println ("c matches? " + Boolean.toString(c.matches(pattern))); 
```

您还可以使用[Pattern](http://docs.oracle.com/javase/6/docs/api/java/util/regex/Pattern.html)和 Matcher 对象来重用模式以供多种用途：

```
String[] array = {
    "Hello, world! $_POST['something'] Test!",
    "Hello, world! $_POST['special!!!char'] Test!",
    "Hey there $_GET['something'] foo bar"
};

String strPattern = ".*\\$_POST\\['[A-Za-z0-9]+'\\].*";
Pattern p = Pattern.compile(strPattern);

for (int i=0; i<array.length; i++) {
    Matcher m = p.matcher(array[i]);
    System.out.println("Expression:  " + array[i]);
    System.out.println("-> Matches?  " + Boolean.toString(m.matches()));
    System.out.println("");
} 
```

输出：

```
Expression:  Hello, world! $_POST['something'] Test!
-> Matches?  true

Expression:  Hello, world! $_POST['special!!!char'] Test!
-> Matches?  false

Expression:  Hey there $_GET['something'] foo bar
-> Matches?  false 
```

# iphone - Image not resizing using CapInsets correctly

> ID：15722072
> 
> 赞同：1
> 
> 时间：2013-03-30T18:39:42.787
> 
> 标签：iphone, ios, objective-c, ios5, uiimage

I have created a singup button as follows:

```
signupButton = [[UIButton alloc] initWithFrame:CGRectMake(10,(facebookLoginButton.bounds.size.height + 40),300,50)];
signupButton.autoresizingMask = UIViewAutoresizingFlexibleWidth | UIViewAutoresizingFlexibleTopMargin;
UIImage *signupButtonImage = [[UIImage imageNamed:@"Signup"]
                              resizableImageWithCapInsets:UIEdgeInsetsMake(0, 10, 0, 10)];
[signupButton setBackgroundImage:signupButtonImage forState:UIControlStateNormal]; 
```

The frame for the button is 300x50 per the above. I have created an image (for Retina devices) as 22(w)x100(h)px.

The image is 22 pixels which includes 10px rounded corners and 2px which are for the repeatable middle section.

I have tried to implement the stretch per the above code with insets as 0,10,0,10 but this does not stretch as expected.

![enter image description here](../Images/567777a45dd1a4a5f00485b8a5c627cf.png)

![Actual image](../Images/c2b4cf44f6c8321d5477cd280dce463d.png)

Can someone explain what the insets should be? Also how to work these out, I cannot find any useful information on how to actually calculate what the insets should be? I have read the Apple documentation on this, but I do not understand how to work these out.

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-31T01:06:19.520

Your image has size `22x100` but it is a retina image.

That means the point size is `11x50`.
The insets should be `UIEdgeInsetsMake(5.0f, 5.0f, 5.0f, 5.0f)`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-31T05:45:32.727

Create stretchable Image using following code and assign it to respective UIImageView

```
UIImage *bgImage = [[UIImage imageNamed:@"Signup"] stretchableImageWithLeftCapWidth:10 topCapHeight:10]; 
```

you need to calculate TopCap and LeftCap of your 9 patch image properly. Good luck.

# java - Getting user input without typing in a Java console

> ID：15722082
> 
> 赞同：1
> 
> 时间：2013-03-30T18:40:15.027
> 
> 标签：java

I am trying to get user keyboard input but I can't seem to get it to work without using the console.

**What I am trying to achieve is to have the program to capture a user entering 12345 from the keyboard, without having to enter it in the console. And then return the integer captured.**

```
public class InputWithoutConsoleTest {

public static void main(String[] args) {
    System.out.println(scanNumber());;
}

private static int scanNumber() {
    try {
        BufferedReader br = new BufferedReader(new InputStreamReader(System.in));
        return Integer.parseInt(br.readLine());
    } catch (IOException e) {
        e.printStackTrace();
    }
    return 0;
}
} 
```

**Edit: The input source is a barcode scanner. It will scan a barcode and sends it to the program in the format of 1234567890{enter}. How can I capture this input in java?**

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-30T19:29:43.943

[Jnativehook](http://code.google.com/p/jnativehook/) is a nice library which provides global keyboard (and mouse) input (at least I think this is what you mean by "without having to enter it in the console"). You don't need a GUI or anything else for it to work, so it is independent of the keyboard focus or other things that could prevent your application from getting keyboard input. With jnativehook you can simply register a global key listener which will be notified of any key-press happening in the system, like this (based on the [examples from the project's wiki](http://code.google.com/p/jnativehook/wiki/examples)):

```
public class GlobalKeyListenerExample implements NativeKeyListener {
    public void nativeKeyPressed(NativeKeyEvent e) {
            System.out.println("Key Pressed: " + NativeKeyEvent.getKeyText(e.getKeyCode()));
    }

    public void nativeKeyReleased(NativeKeyEvent e) {
            System.out.println("Key Released: " + NativeKeyEvent.getKeyText(e.getKeyCode()));
    }

    public void nativeKeyTyped(NativeKeyEvent e) {
            System.out.println("Key Typed: " + e.getKeyText(e.getKeyCode()));
    }

    public static void main(String[] args) {
        try {
            GlobalScreen.registerNativeHook();

            GlobalKeyListenerExample listener = new GlobalKeyListenerExample()
            GlobalScreen.getInstance().addNativeKeyListener(listener);

        } catch (NativeHookException ex) {
            System.err.println(ex.getMessage());
        }
    }
} 
```

Note: jnativehook uses platform specific native code to get global access to keyboard and mouse events, but it provides this for Windows, Mac OS and Linux, so it should work for most cases. If there are problems with your platform, report it on the project's bug tracker.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-30T19:28:21.470

I can easily capture keyboard input into [JTextField or JTextArea](http://docs.oracle.com/javase/tutorial/uiswing/components/textfield.html)

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2013-03-30T19:00:02.287

Java is sandboxed so I don't think you can just record keystrokes outside of a window. You would be much better off using a different language for this.

If you are really insistent on doing it in Java, you will probably have to do something with Swing like Hovercraft Full of Eels is talking about.

Something I am imagining is an invisible window, that is being focused/brought to the front would capture your keystrokes. I'm not entirely sure if this is possible in Java.

If you are okay with having some sort of visible window as long as it isn't the console, you can just create a Jframe and add a TextBox with swing.

# .htaccess - How to hide filename from url by using .htaccess

> ID：15722088
> 
> 赞同：0
> 
> 时间：2013-03-30T18:40:50.700
> 
> 标签：.htaccess

I was wondering how I could hide filename completetely from url using .htaccess.

Currently it is like: mysite.com/foldername/filename

And I would like it to be like: mysite.com/foldername

At the moment I use .htacces file for removing only file extensios from url and I would like to upgrade it to only show folder name. We have not leader anything about .htacces yet so I would appreciate pretty direct codes and hints, thank you! :)

```
RewriteOptions inherit
RewriteEngine On

RewriteCond %{REQUEST_FILENAME} !-d 
RewriteCond %{REQUEST_FILENAME}\.php -f 
RewriteRule ^(.*)$ $1.php

RewriteCond %{REQUEST_FILENAME} !-d 
RewriteCond %{REQUEST_FILENAME}\.html -f 
RewriteRule ^(.*)$ $1.html

RewriteCond %{REQUEST_FILENAME} !-d 
RewriteCond %{REQUEST_FILENAME}\.htm -f 
RewriteRule ^(.*)$ $1.htm

RewriteCond %{HTTP_HOST} ^.*$
RewriteRule ^/?$ "http\:\/\/tjmediaproductions\.com\/quiz\/" [R=301,L] 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-30T18:54:33.667

```
RewriteOptions inherit
RewriteEngine On  # enables url rewriting

RewriteCond %{REQUEST_FILENAME} !-d  # if requested uri is not directory (!-d)
RewriteCond %{REQUEST_FILENAME}\.php -f # and if there is a file named URI+'.php' (-f)
RewriteRule ^(.*)$ $1.php # then if there is any thing in uri then rewrite it as uri+'.php' 
```

others are the same
and about the las part idont know.

```
<br />
<br /> 
```

and there is another point and question
as you said
Currently it is like: mysite.com/foldername/filename
And I would like it to be like: mysite.com/foldername
tell me what kind of rule is behind it?
do you want to have this

```
    mysite.com/something

```

insted of

```
    mysite.com/something/something.php

```

or use

```
    mysite.com/something

```

insted of

```
    mysite.com/something/anotherthing.php

```

if you want to use first way.
you can use this may be works

```
    RewriteCond %{REQUEST_FILENAME} -d  # if requested uri is directory (-d)
    RewriteCond %{REQUEST_FILENAME}\.php !-f # and if there is not a file (!-f)
    RewriteRule ^([A-Za-z0-9-]+)/?$ $1/$1.php [NC,L] # foldername/foldername.php

```

or maybe this

```
    RewriteCond %{REQUEST_FILENAME} !-d  # if requested uri is not directory (!-d)
    RewriteRule ^([A-Za-z0-9-]+)/?$ $1/$1.php [NC,L] # foldername/foldername.php

```

# sas - 使用 Fast LOAD 将 SAS 数据集加载到 Teradata 表中

> ID：15722089
> 
> 赞同：2
> 
> 时间：2013-03-30T18:40:51.147
> 
> 标签：sas, teradata

我正在尝试使用 FASTLOAD 实用程序将 SAS 数据集加载到 teradata 表中。这在某些情况下可以正常工作，但我想分离错误表并在我自己/其他数据库中的 teradata 环境中创建它们。

有人可以为我提供如何使其成为可能的语法（我知道但它不起作用）吗？

任何方法都可以使用`proc sql command`或`proc append command`。提前致谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-31T14:44:59.677

您可以使用`LOGDB`libname 选项告诉 SAS 应该在哪个数据库中创建日志文件。默认情况下，它们与正在创建的表在同一个数据库中创建（命名为目标表，加上您发现的三个字符后缀）。使用您评论中提供的信息，试试这个：

```
/* Delete any exisiting log files for table TPT_LD_TEST */
libname TPTLOAD TERADATA 
                SERVER=TDServ DATABASE=TPTLOAD 
                USER=tduser PASSWORD=tdpasswd1
                ;
proc delete data=TPTLOAD.TPT_LD_TEST_ET;
run;
proc delete data=TPTLOAD.TPT_LD_TEST_UV;
run;
proc delete data=TPTLOAD.TPT_LD_TEST_RS;
run;
libname TPTLOAD clear;

/* Define connection to target database */
LIBNAME TDSERV  TERADATA 
                SERVER=TDServ 
                USER=tduser PASSWORD=tdpasswd1
                LOGDB=TPTLOAD;

/* Truncate target table if necessary */
proc sql noprint;
   delete from TDSERV.TPT_LD_TEST;
quit;

proc append base=TDSERV.TPT_LD_TEST(fastload=yes tpt=yes)
            data=work.FastLoad;
run; 
```

我添加了一些代码来删除目标表中的任何现有行（对于 的要求`FASTLOAD`）。

如果您对目标数据库拥有`DROP TABLE`和`CREATE TABLE`权限，则删除并重新创建表可能会更安全，这样您就可以保证结构并明确命名表索引。

```
/* Delete target table if it exists */
proc delete data=TDSERV.TPT_LD_TEST;
run;

data TDSERV.TPT_LD_TEST 
            (fastload=yes tpt=yes
             dbcreate_table_opts='primary index(index_column_name)'
            )
   set work.FastLoad;
run; 
```

无论哪种情况，请务必从源数据集中删除任何重复记录；这些将被写入您的错误文件（以及任何未通过其他约束的记录）。

`PROC DELETE`是一个方便的设备，因为如果目标表不存在，它不会产生错误。

# javascript - 从 Javascript 控制台模拟按键事件

> ID：15722096
> 
> 赞同：8
> 
> 时间：2013-03-30T18:41:37.303
> 
> 标签：javascript, jquery, console, keypress

我想使用 Javascript 控制台模拟 Keypress 事件。我看到很多使用输入元素的答案。我不想使用输入元素。我只想将一些代码粘贴到 Javascript 控制台中并模拟一个按键事件（特别是退格按钮）。

欢迎使用 jQuery 回答。

* * *

## 回答 #1

> 赞同：21
> 
> 时间：2013-03-30T18:43:15.993

jQuery 有一个[`.keypress`](http://api.jquery.com/keypress/#keypress)不接受任何参数的方法来模拟按键。

```
$("#target").keypress(); 
```

将触发按键`#target`

如果您还想选择按下哪个键，您可以使用`.trigger`. 这个例子来自[文档](http://api.jquery.com/category/events/event-object/)：

```
var e = $.Event("keydown", { keyCode: 8}); //"keydown" if that's what you're doing
$("body").trigger(e); 
```

键码 8 是JavaScript[中退格键的键码。](http://www.cambiaresearch.com/articles/15/javascript-char-codes-key-codes)

让我知道这对你有用:)

# c# - 从 PDF 嵌入字体解码 Flate 的问题

> ID：15722099
> 
> 赞同：1
> 
> 时间：2013-03-30T18:41:48.780
> 
> 标签：c#, pdf, itextsharp, pdfbox, embedded-fonts

好的，在我们开始之前。我在一家公司工作，该公司拥有从各种出版商以任何媒体形式重新分发 PDF 文件的许可证。因此，话虽如此，从给定的 PDF 文件中提取嵌入字体不仅是合法的，而且对演示文稿也至关重要。

我正在使用在这个网站上找到的代码，但是我不记得作者了，当我找到它时，我会参考它们。我在包含嵌入字体的 PDF 文件中找到了流，我已将此编码流隔离为字符串，然后将其隔离为`byte[]`. 当我使用以下代码时出现错误

```
Block length does not match with its complement. 
```

代码（错误出现在`while`下面一行）：

```
private static byte[] DecodeFlateDecodeData(byte[] data)
{
    MemoryStream outputStream;
    using (outputStream = new MemoryStream())
    {
        using (var compressedDataStream = new MemoryStream(data))
        {
            // Remove the first two bytes to skip the header (it isn't recognized by the DeflateStream class)
            compressedDataStream.ReadByte();
            compressedDataStream.ReadByte();

            var deflateStream = new DeflateStream(compressedDataStream, CompressionMode.Decompress, true);
            var decompressedBuffer = new byte[compressedDataStream.Length];
            int read;

            // The error occurs in the following line
            while ((read = deflateStream.Read(decompressedBuffer, 0, decompressedBuffer.Length)) != 0)
            {
                outputStream.Write(decompressedBuffer, 0, read);
            }
            outputStream.Flush();
            compressedDataStream.Close();
        }

        return ReadFully(outputStream);
    }
} 
```

使用常用工具（Google、Bing、此处的存档）后，我发现发生这种情况的大部分时间是当一个人没有消耗编码流的前两个字节时——但这是在这里完成的，所以我找不到源这个错误。下面是编码流：

```
H‰LT}lg?7ñù¤aŽÂ½ãnÕ´jh›Ú?-T’ÑRL–¦
ëš:Uí6Ÿ¶“ø+ñ÷ùü™”ÒÆŸŸíóWlÇ±“ºu“°tƒ¦t0ÊD¶jˆ
Ö   m:$½×^*qABBï?Þç÷|ýÞßóJÖˆD"yâP—òpgÇó¦Q¾S¯9£Û¾mçÁçÚ„cÂÛO¡É‡·¥ï~á³ÇãO¡ŸØö=öPD"d‚ìA—$H'‚DC¢D®¤·éC'Å:È—€ìEV%cÿŽS;þÔ’kYkùcË_ZÇZ/·þYº(ýÝ‡Ã_ó3m¤[3¤²4ÿo?²õñÖ*Z/Þiãÿ¿¾õ8Ü    ?»„O Ê£ðÅ­P9ÿ•¿Â¯*–z×No˜0ãÆ-êàîoR‹×ÉêÊêÂulaƒÝü 
```

请帮忙，我在这里撞墙！

注意：上面的流是 Arial Black 的编码版本 - 根据 PDF 中的规范：

```
661 0 obj
<< 
/Type /FontDescriptor 
/FontFile3 662 0 R 
/FontBBox [ -194 -307 1688 1083 ] 
/FontName /HLJOBA+ArialBlack 
/Flags 4 
/StemV 0 
/CapHeight 715 
/XHeight 518 
/Ascent 0 
/Descent -209 
/ItalicAngle 0 
/CharSet (/space/T/e/s/t/a/k/i/n/g/S/r/E/x/m/O/u/l)
>> 
endobj
662 0 obj
<< /Length 1700 /Filter /FlateDecode /Subtype /Type1C >> 
stream
H‰LT}lg?7ñù¤aŽÂ½ãnÕ´jh›Ú?-T’ÑRL–¦
ëš:Uí6Ÿ¶“ø+ñ÷ùü™”ÒÆŸŸíóWlÇ±“ºu“°tƒ¦t0ÊD¶jˆ
Ö   m:$½×^*qABBï?Þç÷|ýÞßóJÖˆD"yâP—òpgÇó¦Q¾S¯9£Û¾mçÁçÚ„cÂÛO¡É‡·¥ï~á³ÇãO¡ŸØö=öPD"d‚ìA—$H'‚DC¢D®¤·éC'Å:È—€ìEV%cÿŽS;þÔ’kYkùcË_ZÇZ/·þYº(ýÝ‡Ã_ó3m¤[3¤²4ÿo?²õñÖ*Z/Þiãÿ¿¾õ8Ü    ?»„O Ê£ðÅ­P9ÿ•¿Â¯*–z×No˜0ãÆ-êàîoR‹×ÉêÊêÂulaƒÝü 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-31T15:07:10.200

Is there a particular reason why you're not using the [GetStreamBytes()](http://sourceforge.net/p/itextsharp/code/535/tree/trunk/src/core/iTextSharp/text/pdf/PdfReader.cs#l2298) method that is provided with iText? What about `data`? Are you sure you are looking at the correct bytes? Did you create the `PRStream` object correctly and did you get the bytes with `PdfReader.GetStreamBytesRaw()`? If so, why decode the bytes yourself? Which brings me to my initial counter-question: is there a particular reason why you're not using the [GetStreamBytes()](http://sourceforge.net/p/itextsharp/code/535/tree/trunk/src/core/iTextSharp/text/pdf/PdfReader.cs#l2298) method?

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-31T21:15:32.503

Looks like GetStreamBytes() might solve your problem out right, but let me point out that I think you're doing something dangerous concerning end-of-line markers. The PDF Specification in 7.3.8.1 states that:

> The keyword stream that follows the stream dictionary shall be followed by an end-of-line marker consisting of either a CARRIAGE RETURN and a LINE FEED or just a LINE FEED, and not by a CARRIAGE RETURN alone.

In your code it looks like you always skip two bytes while the spec says it could be either one or two (CR LF or LF).

You should be able to catch whether you are running into this by comparing the exact number of bytes you want to decode with the value of the (Required) "Length" key in the stream dictionary.

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-16T17:47:55.277

Okay, for anyone who might stumble across this issue themselves allow me to warn you - this is a rocky road without a great deal of good solutions. I eventually moved away from writing all of the code to extract the fonts myself. I simply downloaded MuPDF (open source) and then made command line calls to mutool.exe:

```
 mutool extract C:\mypdf.pdf 
```

This pulls all of the fonts into the folder mutool resides in (it also extracts some images (these are the fonts that could not be converted (usually small subsets I think))). I then wrote a method to move those from that folder into the one I wanted them in.

Of course, to convert these to anything usable is a headache in itself - but I have found it to be doable.

As a reminder, font piracy IS piracy.

# android - 并非所有安卓客户端都接收 GCM 推送通知

> ID：15722103
> 
> 赞同：2
> 
> 时间：2013-03-30T18:42:14.087
> 
> 标签：android, google-cloud-messaging

我有一个 android 应用程序作为客户端和 ASP.Net + ADO.Net 托管在 GoDaddy 服务器上。

尽管 GCM 消息发送成功，但并非所有客户端都收到通知。我有三个客户端：mini galaxi，nexus 7 (android 4.2.1) nexus 4 (android 4.2.2)。我通过 GCM 向所有客户发送推送通知。消息在不同的时间发送。mini galaxi 和 nexus 7 收到大约 95% 的通知，但 nexus 4 收到大约 10%。

另一个有趣的信息：当 android 应用程序@nexux 4 关闭并在收到通知后重新打开时，收到通知的百分比显着上升。

可能是什么原因？

该怎么做才能解决这个问题？

弥敦道

# mysql - 在相关/查找表上选择不相关的 id

> ID：15722110
> 
> 赞同：1
> 
> 时间：2013-03-30T18:42:53.787
> 
> 标签：mysql, foreign-keys, set-operations

我已经看到了各种各样的例子，但是我找不到一个明确的例子来说明如何在没有给定值的情况下返回所有与行无关`table_A`的行。我能找到的最接近的匹配是：`table_B``table_A_B``table_A.id``table_B.id`

1.  获取`A`与一个或多个行不相关`B`但不知道 B 中的哪个值是问题的列表。

2.  获取`A`与 given 无关的列表`B`。

3.  获取`A`以逗号分隔的无关字段列表`B`（不确定我是否看到了这一点，但似乎一个示例可以这样扩展）。

4.  `A`一个s 和s的列表，`B`彼此不相关，但没有指明哪个不相关。

我还可以获得所有潜在`A_B`元组的列表：

```
SELECT A.id, B.id  FROM A
INNER JOIN B ON A.id <> B.id 
```

而且我可以假设对关联表使用一种`EXCEPT`解决方法（我认为），但是所有尝试都失败了，我想一旦该连接返回了数百万个潜在组合，它的效率无论如何都会低得多。

所以给定表值：

```
A
id | name
 1 | X
 2 | y
 3 | z

B
id | name
 7 | e
 8 | f
 9 | g

A_B
id | a_id | b_id
 1 |    1 |    7
 2 |    1 |    8
 3 |    1 |    9
 1 |    2 |    7
 2 |    2 |    8
 1 |    3 |    7 
```

是否有会返回的查询：A | 乙 2 | 9 3 | 8 3 | 9

甚至更好：

```
 A | B 
 y | g
 z | f
 z | g 
```

还是这是自找麻烦？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-30T18:51:49.050

从 A 和 B 之间的交叉连接开始以获得所有可能的对。然后对关系表进行左连接并选择不匹配的位置：

```
select driver.aID, driver.bID
from (select a.id as aID, b.id as bID
      from table_A A cross join table_B B
     ) driver left outer join
     table_A_B ab
     on ab.aID = driver.aID and ab.bID = bID
where ab.aID is null 
```

这可行，假设 id 永远不会为 NULL。

I haven't tested the SQL so it might have syntax errors.

This version gets you the names:

```
select driver.aName, driver.bName
from (select a.id as aID, b.id as bID, a.name as aName, b.name as Bname
      from table_A A cross join table_B B
     ) driver left outer join
     table_A_B ab
     on ab.aID = driver.aID and ab.bID = bID
where ab.aID is null 
```

# java - 我需要帮助调试一个 Java 猜谜游戏应用程序

> ID：15722111
> 
> 赞同：-1
> 
> 时间：2013-03-30T18:42:56.430
> 
> 标签：java, debugging, for-loop, nested-loops

我做了这个猜谜游戏，但我发现了一个错误，我不知道如何修复它。也许你们可以帮忙？

问题是，我只会输入 9 个错误的数字，但它会告诉我我猜了 10 次。我没有。

如果您发现任何其他错误，您能告诉我如何修复这些错误吗？如果你能告诉我下次我可以使用的任何提示/技术，那就太好了。

```
import java.util.Scanner;

public class main {

/**
 * @param args
 */
public static void main(String[] args) {
    // TODO Auto-generated method stub
    int number_to_guess = 3;
    int guess;
    //int number_of_guesses = 0;
    Scanner input = new Scanner(System.in);

    System.out.println("Hello, please enter a number between 1 and 10\. You only have 10 guesses, so be be smart!!");

    for(int number_of_guesses = 1; number_of_guesses<=10;){
        guess = input.nextInt();
        if (guess >=1 && guess <=10){//is it between 1 and 10

            if(guess == number_to_guess){//is it the right number
                number_of_guesses++;//increase guess number
                System.out.println("Congradulations!!! You guessed the number in " + number_of_guesses + " tries");
                break;//exit the loop
            }

            else{//if its not the right number, then try again
                System.out.println("I'm sorry. Thats not it. Please try again.");
                number_of_guesses++;
                if (number_of_guesses == 10){
                    System.out.println("I'm sorry, but it appears you have guessed 10 times and didn't get the right number. The number was " + number_to_guess);

                    break;
                }
            }
        }

        else{//invalid number entry

            System.out.println("I'm sorry, but your number that you have enter is invalid. Please make sure it is between 1 and 10");
            number_of_guesses--;//the count will go up, even though the guessed an invalid number, so set it back to what it was before
        }
    }

} 
```

}

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-30T18:47:22.913

您需要将其移出范围，因为 10 仍然有效

if (number_of_guesses == 10){ System.out.println("对不起，你猜了 10 次，但没有得到正确的数字。数字是 " + number_to_guess); 休息; }

# ubuntu - 在 Linux 中使用 sed 交换两个单词

> ID：15722114
> 
> 赞同：0
> 
> 时间：2013-03-30T18:43:07.740
> 
> 标签：ubuntu, sed

伙计们！我试图在一行中交换两个单词，但它不起作用。例如：“今天是我上大学的第一天”应该是“我是今天上大学的第一天”

这是我尝试过的：

```
sed 's/\([a-zA-z0-9]*\)\([a-zA-z0-9]*\)\([a-zA-z0-9]*\)/\3\2\1/' filename.txt 
```

我究竟做错了什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-30T19:06:30.840

我开始使用`\s`这意味着任何空格字符。
我用它来匹配每个`[^\s]*`匹配所有内容但不匹配空格的单词。
我有`\s*`匹配单词之间的空格。并且不要忘记重写替换空间。

以这个为例：

```
sed 's#\([^ ]*\)\s+#\1 #' 
```

（我用`#`代替`/`）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-30T19:39:36.737

尝试这个：

```
sed -rn 's/(\w+\s)(\w+\s)(\w+\s)(.*)/\3\2\1\4/p' filename.txt 
```

-n 禁止自动打印图案空间

-r 在脚本中使用扩展的正则表达式

\s 表示空格

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-31T13:57:02.373

这可能对您有用（GNU sed）：

```
sed -r 's/(\S+)\s+(\S+)\s+(\S+)/\3 \2 \1/' file 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-30T20:31:33.580

```
sed -r 's/^(\w+)(\s+\w+\s+)(\w+)(.*)/\3\2\1\4/' 
```

用你的例子：

```
kent$  echo "Today is my first day of university"|sed -r 's/^(\w+)(\s+\w+\s+)(\w+)(.*)/\3\2\1\4/'                                                                           
my is Today first day of university 
```

对于您的问题， awk 更简单：

```
awk '{t=$1;$1=$3;$3=t}1' 
```

相同的输入：

```
kent$  echo "Today is my first day of university"|awk '{t=$1;$1=$3;$3=t}1'                       
my is Today first day of university 
```

* * *

## 回答 #5

> 赞同：-1
> 
> 时间：2013-03-30T18:48:51.080

您没有考虑空格。

在单词之间使用 [ \t]+。

# python - 名称错误和其他？

> ID：15722118
> 
> 赞同：0
> 
> 时间：2013-03-30T18:44:11.903
> 
> 标签：python

基本上我现在正在学习 Python，所以我只是使用其他人的模板并编辑它们。到目前为止，我已经了解到 Python 中的缩进非常挑剔。但是我被卡住了，我认为我的所有内容都正确缩进并正确定义，但我的控制台中仍然出现此错误。（视窗）

（是的，我知道它还没有完成）

```
"...\documents\python_files>python calc.py
Traceback (most recent call last):
  File "calc.py", line 20, in <module>
    class Calculator(wx.Dialog):
  File "calc.py", line 46, in Calculator
    b = wx.Button(self, -1, label)
NameError: name 'self' is not defined" 
```

这是我的代码（我*想*我把它以代码格式放在这里）：

```
# -*- coding: utf-8 -*-
from __future__ import division

__author__ = 'Sean'
__version__ = '0.0.2'

#Calculator GUI:

# ____________v
#[(][)][^][log]
#[C][±][√][%]
#[7][8][9][/]
#[4][5][6][*]
#[1][2][3][-]
#[0][.][+][=]

import wx
from math import *

class Calculator(wx.Dialog):
    '''Main calculator dialog'''
    def __init__(self):
        title = 'Calculator version %s' % __version__
        wx.Dialog.__init__(self, None, -1, title)
        sizer = wx.BoxSizer(wx.VERTICAL) # Main vertical sizer

        # ____________v
        self.display = wx.ComboBox(self, -1)
        sizer.Add(self.display, 0, wx.EXPAND)

    #[(][)][^][log]
    #[C][±][√][%]
    #[7][8][9][/]
    #[4][5][6][*]
    #[1][2][3][-]
    #[0][.][+][=]
    gsizer = wx.GridSizer(4,6)
    for row in (("(",")","^","log"),
    ("C","±","√","%"),
    ("7", "8", "9", "/"),
    ("4", "5", "6", "*"),
    ("1", "2", "3", "-"),
    ("0", ".", "+", "=")):
        for label in row:
            b = wx.Button(self, -1, label)
            gsizer.Add(b)
            self.Bind(wx.EVT_Button,self.OnButton, b)
            sizer.Add(gsizer, 1, wx.EXPAND)

    b = wx.Button(self, -1, "=")
    self.Bind(wx.EVT_BUTTON, self.OnButton, b)
    sizer.Add(b, 0, wx.EXPAND)
    self.equal = b

    self.SetSizer(sizer)
    sizer.Fit(self)
    self.CenterOnScreen()

def OnButton(self, evt):
    '''Handle button click event'''
    label = evt.GetEventObject().GetLabel()

    if label == '=':
        try:
            compute = self.display.GetValue()
            if not compute.strip():
                return

            result = eval(compute)

            self.display.Insert(compute, 0)

            self.display.SetValue(str(result))
        except Exception as err:
            wx.LogError(str(err))
            return

    elif label == 'C':
        self.display.SetValue('')

    else:
        self.display.SetValue(self.display.GetValue() + label)
        self.equal.SetFocus()

if __name__ == '__main__':
    app = wx.PySimpleApp()
    dlg = Calculator()
    dlg.ShowModal()
    dlg.Destroy() 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-30T18:51:55.970

您对部分`__init__`方法的缩进是错误的：

```
class Calculator(wx.Dialog):
    '''Main calculator dialog'''
    def __init__(self):
        title = 'Calculator version %s' % __version__
        wx.Dialog.__init__(self, None, -1, title)
        sizer = wx.BoxSizer(wx.VERTICAL) # Main vertical sizer
        self.display = wx.ComboBox(self, -1)
        sizer.Add(self.display, 0, wx.EXPAND)
        # This part was indented wrong
        gsizer = wx.GridSizer(4,6)
        for row in (("(",")","^","log"),
                    ("C","±","√","%"),
                    ("7", "8", "9", "/"),
                    ("4", "5", "6", "*"),
                    ("1", "2", "3", "-"),
                    ("0", ".", "+", "=")):
        for label in row:
            b = wx.Button(self, -1, label)
            gsizer.Add(b)
            self.Bind(wx.EVT_Button,self.OnButton, b)
            sizer.Add(gsizer, 1, wx.EXPAND)
        b = wx.Button(self, -1, "=")
        self.Bind(wx.EVT_BUTTON, self.OnButton, b)
        sizer.Add(b, 0, wx.EXPAND)
        self.equal = b 
```

你应该阅读 Python。来自[Python 2 教程](http://docs.python.org/2/tutorial/introduction.html)：

> 请注意，基本块中的每一行必须缩进相同的数量。

要阅读的另一件事是[Python 样式指南](http://www.python.org/dev/peps/pep-0008/)。

# xml - 课程表的 XML 模式定义

> ID：15722122
> 
> 赞同：0
> 
> 时间：2013-03-30T18:44:40.730
> 
> 标签：xml, xsd

因此，我的任务是编写一个 XML 模式定义来存储我当前学期的学习时间表。我应该包括我的姓名和班级年份以及每个学术课程的其他元素。我需要强制执行规则，我必须至少有四个班级并且不超过八个班级。对于每个班级，我需要一个代号、课程名称、讲师姓名和当前的总体百分比。我还需要确保它们都是合适的数据类型。

我的问题似乎在于将部分名称和班级年份。目前，我有：

```
<?xml version="1.0" encoding="UTF-8"?>
<xs:schema xmlns:xs="http://www.w3.org/2001/XMLSchema" elementFormDefault="qualified" attributeFormDefault="unqualified">

<xs:element name="classSchedule">               
    <xs:complexType>
        <xs:attribute name="name" type="xs:string"/>
        <xs:attribute name="classYear" type="xs:int"/>
            <xs:sequence minOccurs="4" maxOccurs="8">
                <xs:element name="class">
                    <xs:complexType>
                        <xs:all>
                            <xs:element name="courseDesignator" type="xs:string"/>
                            <xs:element name="courseName" type="xs:string"/>
                            <xs:element name="instructorName" type="xs:string"/>
                            <xs:element name="currentGrade" type="xs:float"/>
                        </xs:all>
                    </xs:complexType>
                </xs:element>
            </xs:sequence>
        </xs:complexType>       
    </xs:element>
</xs:schema> 
```

现在，我收到一个错误，即`sequence`标签不能位于`complexType`标签下方。

姓名和班级年份是关于学生的信息，每个学生将有 4 到 8 个班级；现在我无法弄清楚为什么我在输入姓名和班级年份时遇到了麻烦。当我取出姓名和班级年份的两行时，XSD 正确保存而没有错误。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-30T18:56:46.660

您的模式大部分都很好，但是[complexType](http://www.w3schools.com/schema/el_complextype.asp)节点的定义要求属性位于序列之后。例如：

```
<xs:complexType>
  <xs:sequence minOccurs="4" maxOccurs="8">
    <xs:element name="class">
      <xs:complexType>
        ...
      </xs:complexType>
    </xs:element>
  </xs:sequence>
  <xs:attribute name="name" type="xs:string"/>
  <xs:attribute name="classYear" type="xs:int"/>
</xs:complexType> 
```

# jsp - 如何将 JSP 浏览器重定向到 Servlet 中的给定 url

> ID：15722125
> 
> 赞同：0
> 
> 时间：2013-03-30T18:45:02.987
> 
> 标签：jsp, servlets, webservice-client

我想制作一个 servlet，它将使用我的 Web 服务 ( `String flag(string country)`)，接收一个国家/地区的名称并返回带有该国家/地区图像的 URL！该功能运行良好，它的接收器正确并返回正确的数据：

返回字符串->“ [http://www.oorsprong.org/WebSamples.CountryInfo/Images/Poland.jpg](http://www.oorsprong.org/WebSamples.CountryInfo/Images/Poland.jpg) ”，我想将我的浏览器重定向到这个URL。

为此，它应该与 JSP、XML 代码一起发送，我尝试了本教程[http://www.tutorialspoint.com/jsp/jsp_page_redirect.htm](http://www.tutorialspoint.com/jsp/jsp_page_redirect.htm)中的一个示例，

```
<%@ page import="java.io.*,java.util.*" %>
<html>
<head>
<title>Page Redirection</title>
</head>
<body>
<center>
<h1>Page Redirection</h1>
</center>
<%
   // New location to be redirected
   String site = new String("http://www.photofuntoos.com");
   response.setStatus(response.SC_MOVED_TEMPORARILY);
   response.setHeader("Location", site); 
%>
</body>
</html> 
```

当我直接输入我的 JSP 输入代码时它就可以工作。

但是在输出的 JSP 上，我无法重定向标志的 URL，因为代码无法将其识别为要执行的内容，因此会显示为结果。

它只是打印我想要执行的行。

这是我使用的代码：

```
/*
 * To change this template, choose Tools | Templates
 * and open the template in the editor.
 */
package flag.servlet;

import flag_c.FlagCountry_Service;
import java.io.IOException;
import java.io.PrintWriter;
import javax.servlet.ServletException;
import javax.servlet.annotation.WebServlet;
import javax.servlet.http.HttpServlet;
import javax.servlet.http.HttpServletRequest;
import javax.servlet.http.HttpServletResponse;
import javax.xml.ws.WebServiceRef;

/**
 *
 * @author I
 */
@WebServlet(name = "Flag_Servlet", urlPatterns = {"/Flag_Servlet"})
public class Flag_Servlet extends HttpServlet {
    @WebServiceRef(wsdlLocation = "WEB-INF/wsdl/localhost_8080/WS2_Flag/Flag_Country.wsdl")
    private FlagCountry_Service service;
    private String TextArea1;

    /**
     * Processes requests for both HTTP
     * <code>GET</code> and
     * <code>POST</code> methods.
     *
     * @param request servlet request
     * @param response servlet response
     * @throws ServletException if a servlet-specific error occurs
     * @throws IOException if an I/O error occurs
     */
    protected void processRequest(HttpServletRequest request, HttpServletResponse response)
            throws ServletException, IOException {
        response.setContentType("text/html;charset=UTF-8");
        PrintWriter out = response.getWriter();
        try {
            /* TODO output your page here. You may use following sample code. */
           out.println("<!DOCTYPE html>");

            String TextArea = request.getParameter("TextArea1");

            //Initialize WS operation arguments
            java.lang.String bodyText = TextArea;
            String flag_url = flag(bodyText);  
            //Until here it's ok, receives the string with the country, and returns
           //the flag's url in a string
           //Now i want to out.println my xml, with the code to redirect the flag's url

            out.println("<html>");
            out.println("<head>");
            out.println("<title><font color ='red'> Servlet Flag_Servlet </font></title>");            
            out.println("</head>");
            out.println("<body>");
            out.println("<h1>Servlet Flag_Servlet at " + request.getContextPath() + "</h1>");

           //I Added code here , flag_url as my flag's url..........
            out.println("<%= " + flag_url +" %>"); // Here is my answer flag_url
            out.println(" "                        // Here the code for the xml output
                    + "<%\n" +
"                    // New location to be redirected\n" +
"                    response.setStatus(response.SC_MOVED_TEMPORARILY);\n" +
"                    response.setHeader(\"Location\","+ flag_url +"\");\n" +
"                   %>");
           //.......................................................

            out.println("</body>");
            out.println("</html>");
        } finally {            
            out.close();
        }
    }

    // <editor-fold defaultstate="collapsed" desc="HttpServlet methods. Click on the + sign on the left to edit the code.">
    /**
     * Handles the HTTP
     * <code>GET</code> method.
     *
     * @param request servlet request
     * @param response servlet response
     * @throws ServletException if a servlet-specific error occurs
     * @throws IOException if an I/O error occurs
     */
    @Override
    protected void doGet(HttpServletRequest request, HttpServletResponse response)
            throws ServletException, IOException {
        processRequest(request, response);
    }

    /**
     * Handles the HTTP
     * <code>POST</code> method.
     *
     * @param request servlet request
     * @param response servlet response
     * @throws ServletException if a servlet-specific error occurs
     * @throws IOException if an I/O error occurs
     */
    @Override
    protected void doPost(HttpServletRequest request, HttpServletResponse response)
            throws ServletException, IOException {
        processRequest(request, response);
    }

    /**
     * Returns a short description of the servlet.
     *
     * @return a String containing servlet description
     */
    @Override
    public String getServletInfo() {
        return "Short description";
    }// </editor-fold>

    //Returns the country's flag "on" a url
    //This is the service from the Web Service

    private String flag(java.lang.String country) {
        flag_c.FlagCountry port = service.getFlagCountryPort();
        return port.flag(country);
    }

} 
```

# php - 谷歌浏览器：找不到 URL

> ID：15722127
> 
> 赞同：0
> 
> 时间：2013-03-30T18:45:09.260
> 
> 标签：php, javascript, jquery, concrete5

我有一个包含许多硬编码页面的大型网站。如果有一个损坏的 URL，Firefox 似乎不在乎。但是谷歌浏览器和 IE 似乎显示了一个可怕的占位符框（好像应该有一个图像在它的位置）。

扫描损坏图像页面的最佳解决方案是什么？并分配`display:none`给图像以阻止占位符出现？

```
function imgError(image){
    image.onerror = "";
    image.src = "/images/noimage.gif";
    return true;
}

<img src="someimage.png" onerror="imgError(this);"/> 
```

我找到了上面的客户端解决方案。但是 PHP 有没有办法在页面加载之前做到这一点？我正在使用混凝土5

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-30T20:20:39.280

对于这种情况，请使用“alt”HTML 标签。此标签用于显示 img 的描述，以防找不到。

```
<img src="myPath.png" alt="Here was my broken image"> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-30T21:42:59.273

如果图像在同一台服务器上，则尝试`file_exists`检查是否有图像的功能。如果不显示其他内容。

这是可以帮助您的代码：

```
if(file_exists("../img/logo.png")) {
echo '<img src="../img/logo.png" />';
} else {
 //something else
} 
```

# java - 如何使用 jar 分发本机库？

> ID：15722142
> 
> 赞同：1
> 
> 时间：2013-03-30T18:46:51.713
> 
> 标签：java, dll, jar, extract, webcam

![在此处输入图像描述](../Images/bde68dab58bd7cf94c0c382984987309.png)

这是我最终部署软件时要创建的目录结构。它是一个具有网络摄像头功能的 Java 聊天客户端，对于网络摄像头，我使用的是 LTI-CIVIL。

有人告诉我，我不能直接从 JAR 中使用 DLL，我必须将它们提取到某个地方。都很酷。但是，我无法理解的是*如何让它发挥作用*？

LTI 在他们的网站上提供了大量的 zip 文件。如果您使用的是 Eclipse，则需要为本地库设置适当文件夹的路径。但是，这限制了我使用 Eclipse 并阻止我将 JAR 分发给我的朋友。显然，我现在必须指向该文件夹，并可能以编程方式加载文件

我是初学者，所以如果有人可以[下载 LTI-CIVIL](http://lti-civil.org/download.php)，请查看目录结构并让我知道如何实现我想要做的事情，那将不胜感激。AFAIK，对于我的 32 位 Windows，我需要指向`native/win32-x86`文件夹。

我想要做的是在内存中加载适当的文件，以便我可以提供网络摄像头设施。我想避免安装程序，只需提供具有上述目录结构的 zip 文件，以便人们可以从文件夹中提取、运行 jar 文件并开始聊天。

*澄清：我正在尝试发送一个**带有**jar 文件而不是jar**的**库。我知道从 jar 中提取和使用 dll 很困难*

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-30T19:11:40.920

我假设加载本机库（System.load）的不是您自己的代码，它们是由第三方`jar`（lti-civil）加载的。

`LD_LIBRARY_PATH`在这种情况下，您必须在 lti-civil 尝试加载本机库之前适当地设置环境变量。

任何一个：

*   使用**启动器**脚本（例如 .bat），在运行 java 之前设置变量，或设置系统属性，例如：

    ```
    java -jar your.jar -Djava.library.path=/path/to/native/folder 
    ```

*   在**运行时**。在程序的入口点。这有点“hackish”，但它有效。

    检查此链接，例如：

    [http://nicklothian.com/blog/2008/11/19/modify-javalibrarypath-at-runtime/](http://nicklothian.com/blog/2008/11/19/modify-javalibrarypath-at-runtime/)

由于您事先不知道确切的路径，因此在这两种情况下，您还必须找到本机库所在的正确路径。

如果库的路径相对于 jar/launcher 的路径，则查找可执行文件的当前路径：

*   在 .bat 启动器中： [获取正在执行的批处理文件的目录路径](http://weblogs.asp.net/whaggard/archive/2005/01/28/get-directory-path-of-an-executing-batch-file.aspx)

*   在 java 中： [如何获取正在运行的 JAR 文件的路径？](https://stackoverflow.com/questions/320542/how-to-get-the-path-of-a-running-jar-file)

然后，您可以假设库位于相对于此的路径（../native）中，只需计算路径（并可能将其扩展为绝对路径）。

计算绝对路径后，按照答案第一部分中的说明设置环境/系统属性。

# javascript - 从 iFrame 错误中获取元素：域、协议和端口必须匹配

> ID：15722145
> 
> 赞同：3
> 
> 时间：2013-03-30T18:47:14.430
> 
> 标签：javascript, jquery, iframe, dns

嗨，我从 iFrame 获取元素时遇到问题。当我尝试从网站获取元素时，我在控制台中收到此错误。

> 不安全的 JavaScript 尝试从 URL 为 www.tv.nu/ 的框架访问具有 URL localhost/website 的框架。域、协议和端口必须匹配。

如何删除它，以便我可以将元素 html 放入我的字符串中？

这是我的代码，我每秒从 iFrame 获取元素。

```
<script type="text/javascript">
   function GetFrameData() {
        var $MyFrame = $("#iframeid");
        var frameBody = $MyFrame.contents().find('body');
        var inf = frameBody.find('.theid').html();
}
setInterval(GetFrameData, 1000);
</script> 
```

此致

丹尼尔

# mysql - 如何使用 Hibernate 执行 select into outfile 查询？

> ID：15722147
> 
> 赞同：2
> 
> 时间：2013-03-30T18:47:17.967
> 
> 标签：mysql, hibernate

我正在尝试在 Hibernate 中执行以下代码以从 mySQL 数据库创建一个 .csv 文件。：

```
String sql = 
"SELECT * INTO OUTFILE 'table.csv' FIELDS TERMINATED BY ','" +
" OPTIONALLY ENCLOSED BY '\"' LINES TERMINATED BY '\\n' " +
"FROM match INNER JOIN totala ON match_code= match"; 
```

.csv 文件已正确创建，但随后出现以下错误：

```
Exception in thread "main" org.hibernate.exception.GenericJDBCException: could not execute query
at org.hibernate.exception.SQLStateConverter.handledNonSpecificException(SQLStateConverter.java:140)
at org.hibernate.exception.SQLStateConverter.convert(SQLStateConverter.java:128)
at org.hibernate.exception.JDBCExceptionHelper.convert(JDBCExceptionHelper.java:66)
at org.hibernate.loader.Loader.doList(Loader.java:2536)
at org.hibernate.loader.Loader.listIgnoreQueryCache(Loader.java:2276)
at org.hibernate.loader.Loader.list(Loader.java:2271)
at org.hibernate.loader.custom.CustomLoader.list(CustomLoader.java:316)
at org.hibernate.impl.SessionImpl.listCustomQuery(SessionImpl.java:1842)
at org.hibernate.impl.AbstractSessionImpl.list(AbstractSessionImpl.java:165)
at org.hibernate.impl.SQLQueryImpl.list(SQLQueryImpl.java:157)
at datuak.DatuBasea.sortu_csv_fitxategia(DatuBasea.java:101)
at sortzailea.csv_sortzailea.Csv.Sortu(Csv.java:8)
at html_erauzlea.Nagusia.main(Nagusia.java:34)
Caused by: java.sql.SQLException: ResultSet is from UPDATE. No Data
at com.mysql.jdbc.ResultSet.next(ResultSet.java:2491)
at org.hibernate.loader.Loader.doQuery(Loader.java:825)
at org.hibernate.loader.Loader.doQueryAndInitializeNonLazyCollections(Loader.java:274)
at org.hibernate.loader.Loader.doList(Loader.java:2533)
... 9 more 
```

我认为问题在于我正在执行一个不返回任何值的选择查询，它只创建一个 .csv 文件，并且该方法期望返回一个 ResultSet。

那么，有人可以提出一些建议吗？

提前致谢

# php - $_FILES 不为空，但 move_uploaded_file 返回 false

> ID：15722153
> 
> 赞同：2
> 
> 时间：2013-03-30T18:47:37.623
> 
> 标签：php, file-upload

我有个问题。从几个小时开始，我试图让上传脚本工作。我还阅读了有关 stackoverflow 的其他一些问题，但没有任何帮助。webspace 允许 file_upload 并且文件的大小不会太大。移动下载的目录也存在。我的html代码是：

```
Upload: <input type="file" name="file"> 
```

我的PHP代码是：

```
if ($_FILES['file']['error'] == 0) {
    $tmp_name = $_FILES["file"]["tmp_name"];
    $name_file = $_FILES["file"]["name"];
    move_uploaded_file($tmp_name, "upload/" . $name_file);
} 
```

我回显了 $_FILES 并且文件在那里并且没有错误。每次我尝试上传文件（我也尝试上传其他文件和文件类型）时 move_uploaded_file 返回 false。

编辑：该文件夹现在是可写的。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-02T13:44:05.883

好的，我解决了我的问题。我启用`error_resporting()`了，因为任何原因都没有设置权限。现在它们是 777，我可以移动文件。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-03-30T19:02:55.530

通过设置权限 755，文件夹上传不会被其他人写入。您可以通过 chmod 命令设置权限至少 666，或者更好地为 apache 用户设置上传文件夹的所有权。

我像这样在Ubuntu上设置它

```
sudo chown www-data:www-data upload 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-03-30T18:58:24.333

将文件夹权限设置`upload`为`666`。这应该确保目录是正确可写的。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2016-04-28T08:01:27.410

希望这可以帮助某人。

我遇到了同样的问题，我`$_FILES['file']['tmp_name']`有适当的回报而`move_uploaded_file($_FILES['file']['tmp_name'],$destination_dir)`没有回报。所以我运行了这个检查：

```
if(!is_writable($destination_dir)){ echo "error in dir"; } 
```

并收到消息“目录中的错误”。连我`$destination_dir`的in`move_uploaded_file`都设置为777，找了好久才找到这个[答案](https://stackoverflow.com/questions/29343809/php-is-writable-function-always-returns-false-for-a-writable-directory)。所以这两个命令解决了我的问题：

```
sudo chmod -R 777 Ad_images/
sudo chcon -R -t httpd_sys_rw_content_t Ad_images/ 
```

现在`is_writable($destination_dir)`返回1，上传成功。

**TL;DR: Make sure your destination directory is writable for php.**

# c# - 具有派生泛型类型的列表的奇怪行为

> ID：15722155
> 
> 赞同：2
> 
> 时间：2013-03-30T18:47:47.767
> 
> 标签：c#, generics

所以我有一个基本类型的列表。这个基类型有两个派生类，其中一个是泛型​​的。我试图遍历列表并发现了这种奇怪的行为。

```
public static void Test<T>()
{
    List<Base> myList = new List<Base>();

    myList.Add(new aDerived());
    myList.Add(new tDerived<T>());

    foreach (tDerived<T> lGen in myList as List<tDerived<T>>)
    {
        // This is fine
    }

    foreach (aDerived lDerived in myList as List<aDerived>)
    {
        // Error: Can't convert... via a reference conversion etc 
    }
}

//Simple classes to repro:
class Base
{

}

class aDerived : Base
{

}

class tDerived<T> : Base
{

} 
```

这会报告错误[CS0039](http://msdn.microsoft.com/en-us/library/8s92a6fk%28v=vs.100%29.aspx)如果指定了类型，即我没有使用参数方法将 T 替换为 int，那么我在第一个循环中也会遇到相同的错误。

问：为什么会这样。我看不到任何本质上不可能的事情，毕竟我可以`as`对每次迭代的返回类型进行操作。另一方面，如果事物是​​模板类，为什么它会起作用，似乎这不应该帮助它起作用。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-30T19:22:56.023

以下操作均不能进行。不确定，但只要编译器知道`aDerived`类型，它就会通知您它无法完成（编译时错误）。但是在第二种情况下，编译器没有关于确切类型的足够信息`tDerived<T>`（因为它将在运行时指定 - 因为您的方法是通用方法），所以它不会通知您。但是在运行代码时会抛出异常。

```
var result1 = myList as List<aDerived>;     //Compile-time error
var result2 = myList as List<tDerived<T>>   //null 
```

**更有趣：**这可以在没有编译时错误的情况下完成：

```
List<Base> myList = new List<Base>();
var result = myList as List<T>;             //No Compile-time error 
```

此链接也可能有用：[Covariance and Contravariance](http://blogs.msdn.com/b/csharpfaq/archive/2010/02/16/covariance-and-contravariance-faq.aspx)。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-30T19:35:26.857

This issue is you are trying to convert a list of aDerived and tDerived into one or the other. This wont work as its like trying to convert a list of fruit (bananas and apples) into a list of apples. What you can do however is use the OfType extension to iterate over the items of the correct type:

```
foreach (tDerived<T> lGen in myList.OfType<tDerived<T>>())
{
    Console.WriteLine("tDerived found!");
}

foreach (aDerived lDerived in myList.OfType<aDerived>())
{
    Console.WriteLine("aDerived found!");
} 
```

MSDN OfType: [http://msdn.microsoft.com/en-us/library/bb360913(v=vs.100).aspx](http://msdn.microsoft.com/en-us/library/bb360913(v=vs.100).aspx)

# javascript - 使用 MagicSuggest 将变量发送到服务器

> ID：15722156
> 
> 赞同：2
> 
> 时间：2013-03-30T18:47:51.733
> 
> 标签：javascript, jquery, html, magicsuggest

我使用[这个](http://nicolasbize.github.com/magicsuggest/)很棒的 jquery 插件来处理文本框上的自动完成，我使用这个脚本得到了一切工作：

```
 var ms1;
        $(document).ready(function() {
                ms1 = $('#ms1').magicSuggest({
                data: 'http://punctis.com/app_dev.php/ajax/autocompletefeed/1/city',
                sortOrder: 'name',
                minChars: 2,
                maxResults: false,
                allowFreeEntries: false,
                selectionPosition: 'right',
                groupBy: 'utenti',
                maxDropHeight: 200
            });
        }); 
```

而这个HTML：

```
<form name="email_form">
  <input id="test_normalValue" name="test_normalValue" type="text" class="input-large">
  <input id="ms1" name="ms1" type="text" class="input-large">
</form> 
```

但是当我 POST 或 GET 表单时，没有发送任何值，只是 test_normalValue。有没有人也遇到这个问题？

PS：根据[这个线程](https://github.com/nicolasbize/magicsuggest/issues/4)，这个功能从 1.1.2 开始存在（我使用 1.2.3）

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-30T22:41:58.230

您需要在配置中添加名称属性：

```
 var ms1;
    $(document).ready(function() {
            ms1 = $('#ms1').magicSuggest({
            data: 'http://punctis.com/app_dev.php/ajax/autocompletefeed/1/city',
            sortOrder: 'name',
            minChars: 2,
            maxResults: false,
            name: 'ms1',
            allowFreeEntries: false,
            selectionPosition: 'right',
            groupBy: 'utenti',
            maxDropHeight: 200
        });
    }); 
```

您应该检索 $_POST['ms1'] 中的值，它实际上是一个城市 ID 数组。

[编辑] 如果您需要城市名称而不是城市 ID，您可以在配置属性中指定 valueField 并将其设置为“名称”，如下所示：

```
 var ms1;
    $(document).ready(function() {
            ms1 = $('#ms1').magicSuggest({
            data: 'http://punctis.com/app_dev.php/ajax/autocompletefeed/1/city',
            sortOrder: 'name',
            valueField: 'name',
            minChars: 2,
            maxResults: false,
            name: 'ms1',
            allowFreeEntries: false,
            selectionPosition: 'right',
            groupBy: 'utenti',
            maxDropHeight: 200
        });
    }); 
```

That way the component will use the names as IDs instead of the ids themselves.

If you need both the IDs and the names for whatever reason, you can use the beforeload event to set additional custom POST parameters.

# python - checkboxCtrlMixin show selected values

> ID：15722158
> 
> 赞同：0
> 
> 时间：2013-03-30T18:48:08.703
> 
> 标签：python, checkbox, wxpython, checkboxlist, listctrl

I have a checkboxCtrlmixin, and what I want is to show the selected values of the checkboxCtrlmixin. Is there any special function in checkboxctrlmixin that shows what values are selected?

My code:

```
class TestListCtrl(wx.ListCtrl, listmix.CheckListCtrlMixin, listmix.ListCtrlAutoWidthMixin):
def __init__(self,*args,**kwargs):
wx.ListCtrl.__init__(self,*args,**kwargs)
listmix.CheckListCtrlMixin.__init__(self)
listmix.ListCtrlAutoWidthMixin.__init__(self)
self.setResizeColumn(3)

class rulesFrame(wx.Frame):##open about frame
""""""

#----------------------------------------------------------------------
def __init__(self):
    """Constructor"""
    wx.Frame.__init__(self, None, wx.ID_ANY, "Choose Rules")
panel = wx.Panel(self)##create panel
prules=subprocess.check_output("perl ruleFinder.pl dataset24819.arff rules_test1Fold0w4_sample00ll1.dat", shell=True)
prules = prules.split()
ruleiden = [x for x in prules if x!='159']
ruleiden = list(set(ruleiden))
sortrule = [int(x) for x in ruleiden]
sortrule.sort()
with open('rules_test1Fold0w4_sample00ll1.dat') as fileobj:
    lines = list(fileobj)
actualrules=''
##sortrule=[item+1 for item in sortrule]
##print sortrule
for index in sortrule:
    actualrules += lines[index]

actualrules = actualrules.split('\n')

wx.Button(panel,label="Show Selected Rules",pos=(170,520),size=(200,25))

self.list = TestListCtrl(panel,size=(1000,500), style = wx.LC_REPORT)

self.list.InsertColumn(0,'Rules')
self.list.SetColumnWidth(0,500)

for i in actualrules:

    self.list.InsertStringItem(sys.maxint,i) 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-31T01:02:57.247

To find out if an item is checked use the following method of your listctrl

```
IsChecked(self, index) 
```

which will return True/False for given index.

# android - Android NETWORK_PROVIDER 返回 null。直到手机重启

> ID：15722166
> 
> 赞同：1
> 
> 时间：2013-03-30T18:49:33.897
> 
> 标签：android, android-location

我正在完成一个 Android 应用程序，我在其中观察 gps 和网络提供商的位置变化。我的问题是我已经正确启用了两个提供商，并且我正在请求每个提供商的位置更新。（我正在实际手机上进行测试，而不是模拟器来澄清。）GPS 在大多数情况下都可以正常工作，除非我无法获得 GPS 锁定（这是预期的）。我一直在琢磨为什么网络位置有时会在某些手机上返回 null 并且似乎只是在手机重新启动后才开始接收“网络”的位置更新（不理想）。我启用了wifi。所有正确的权限互联网，粗略和精细。Gps 更新工作正常。我尝试从侦听器中删除更新，然后在收到 null 的设定时间后再次请求。我在S3上看到过这个，一个 X、galaxy nexus 和一个摩托罗拉 Droid M。起初我以为是硬件问题。似乎这里的一些帖子与同一主题相关。我只是想看看是否有人遇到过修复或解决方法？

# primefaces - JSF Primefaces 树节点初学者

> ID：15722167
> 
> 赞同：1
> 
> 时间：2013-03-30T18:49:38.760
> 
> 标签：primefaces

我尝试使用来自 primefaces.org 的展示 tuts 示例。我在我的 xhtml 文件以及 TreeBean.java 中复制了完全相同的文本

但是树形结构永远不会出现在浏览器中（m 使用 IE9）。出现一个空块而不是树。使用树节点时有什么需要注意的吗？

```
!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN"      
"http://www.w3.org/TR/html4/loose.dtd">

<html xmlns="http://www.w3.org/1999/xhtml"
  xmlns:h="http://java.sun.com/jsf/html"
  xmlns:f="http://java.sun.com/jsf/core"
  xmlns:ui="http://java.sun.com/jsf/facelets"
  xmlns:p="http://primefaces.org/ui">

<f:view contentType="text/html">
    <h:head>
        <f:facet name="first">
            <meta content='text/html; charset=UTF-8' http-equiv="Content-Type"/>
            <title>PrimeFaces</title>
        </f:facet>
    </h:head>

    <h:body>

        <p:layout fullPage="true">

            <p:layoutUnit position="north" size="100" resizable="true" closable="true" collapsible="true">
                Header
            </p:layoutUnit>

            <p:layoutUnit position="south" size="100" closable="true" collapsible="true">
                Footer
            </p:layoutUnit>

            <p:layoutUnit position="west" size="175" header="Left" collapsible="true">
                <h:form id="form">
                    <p:tree value="#{treeBean.root}" var="node" id="tree">
                        <p:treeNode id="treeNode">
                            <h:outputText value="#{node}" id="lblNode"/>
                        </p:treeNode>
                    </p:tree>
                </h:form> 
            </p:layoutUnit>

            <p:layoutUnit position="center">
                Welcome to PrimeFaces
            </p:layoutUnit>

        </p:layout>

    </h:body>

</f:view> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-06-23T00:30:55.433

您还必须创建和复制一个 TreeBean 类。它适用于 primefaces 展示网站上的每个示例，位于 xhtml 的源代码旁边。要使其对 EL 可见，您必须另外注释它 @Named 或 @ManagedBean，并为其提供一些合理的生命周期范围。

//编辑：

```
@Named
@javax.enterprise.context.SessionScoped
public class TreeBean {  ... } 
```

# javascript - 根据解析的 XML 纬度和经度值将 Google 地图居中

> ID：15722169
> 
> 赞同：0
> 
> 时间：2013-03-30T18:49:48.977
> 
> 标签：javascript, jquery, google-maps, xml-parsing

这段 Javascript 解析一个 xml 文件，其中包含起点和终点的纬度和经度坐标。我可以很好地在地图上找到标记，我遇到的问题是地图没有以点为中心（最终它会调用 Google Directions Service 并在两点之间绘制一条路线，所以最好让地图很好地围绕两个点而不是仅仅以其中一个点为中心）。

目前地图是使用硬编码的 lat 和 long 值创建的，所以我知道需要更改，但我尝试输入“起点”和“终点”无济于事，地图无法加载，所以我猜我在下面做的方式是不正确的。

```
 jQuery(document).ready(function($) {  

          downloadUrl("xml.php", function(data) {
            var xml = data.responseXML;
            var markers = xml.documentElement.getElementsByTagName("marker");
            for (var i = 0; i < markers.length; i++) {
                var name = markers[i].getAttribute("title");
                var startpoint = new google.maps.LatLng(
                    parseFloat(markers[i].getAttribute("startlat")),
                    parseFloat(markers[i].getAttribute("startlng")));
                var endpoint = new google.maps.LatLng(
                    parseFloat(markers[i].getAttribute("endlat")),
                    parseFloat(markers[i].getAttribute("endlng")));
                var html = "<b>" + name;
                var icon = customIcons || {};
                var startmarker = new google.maps.Marker({
                    map: map,
                    position: startpoint,
                    icon: icon.icon,
                    shadow: icon.shadow
                });
                bindInfoWindow(startmarker, map, infoWindow, html);
                var endmarker = new google.maps.Marker({
                    map: map,
                    position: endpoint,
                    icon: icon.icon,
                    shadow: icon.shadow
                });
                bindInfoWindow(endmarker, map, infoWindow, html);
            }
        });

        var map = new google.maps.Map(document.getElementById("map_canvas"), {
            center: new google.maps.LatLng(startpoint, endpoint),
            zoom: 13,
            mapTypeId: 'roadmap'
        });
        var infoWindow = new google.maps.InfoWindow;

    }); 
```

这是 XML 的输出...

```
<markers>
     <marker title="Journey" description="Lorem Ipsum..." startlat="53.403023" startlng="-2.130801" endlat="53.414257" endlng="-2.094128"/>
</markers> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-30T19:07:57.827

`LatLng`期望`latitude`和`longtude`您想要将地图居中的点。这就是为什么下面的代码不起作用的原因。

```
 center: new google.maps.LatLng(startpoint, endpoint), 
```

显示地图中心两点之间的路线。您可以尝试找到起点和终点之间的中间点。

这是计算中间点的java实现，更多信息 - [Haversine_formula](http://en.wikipedia.org/wiki/Haversine_formula)

```
public static void midPoint(double lat1,double lon1,double lat2,double lon2){

   double dLon = Math.toRadians(lon2 - lon1);

   //convert to radians
   lat1 = Math.toRadians(lat1);
   lat2 = Math.toRadians(lat2);
   lon1 = Math.toRadians(lon1);

   double Bx = Math.cos(lat2) * Math.cos(dLon);
   double By = Math.cos(lat2) * Math.sin(dLon);
   double lat3 = Math.atan2(Math.sin(lat1) + Math.sin(lat2), Math.sqrt((Math.cos(lat1) + Bx) * (Math.cos(lat1) + Bx) + By * By));
   double lon3 = lon1 + Math.atan2(By, Math.cos(lat1) + Bx);

   //print out in degrees
   System.out.println(Math.toDegrees(lat3) + " " + Math.toDegrees(lon3));
} 
```

**编辑：**

*Javascript 实现*

```
function middlePoint(lat1,lon1,lat2,lon2){

   var dLon = toRad(lon2 - lon1);

   lat1 = toRad(lat1);
   lat2 = toRad(lat2);
   lon1 = toRad(lon1);

   var Bx = Math.cos(lat2) * Math.cos(dLon);
   var By = Math.cos(lat2) * Math.sin(dLon);
   var lat3 = Math.atan2(Math.sin(lat1) + Math.sin(lat2), Math.sqrt((Math.cos(lat1) + Bx) * (Math.cos(lat1) + Bx) + By * By));
   var lon3 = lon1 + Math.atan2(By, Math.cos(lat1) + Bx);

   var middlePoint = new Object();
   middlePoint.latitude=lat3;
   middlePoint.longitude=lon3;
   return middlePoint;

}
function toRad(Value) {
    return Value * Math.PI / 180;
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-30T21:04:46.613

如果您使用起点和终点生成边界，则可以调整地图以显示该边界。

```
var map = new google.maps.Map(document.getElementById("map_canvas"), {
   zoom: 13,
   mapTypeId: 'roadmap'
});

var bounds = new google.maps.LatLngBounds();
bounds.extend(startpoint);
bounds.extend(endpoint);
map.fitBounds(bounds); 
```

# mysql - 将集合论思想转化为 SQL

> ID：15722170
> 
> 赞同：-2
> 
> 时间：2013-03-30T18:49:57.493
> 
> 标签：mysql, sql, relational-division

假设我有以下数据库表：

```
╔═════════════════╦════════════╗
║ ADVERTISEMENTID ║ CATEGORYID ║
╠═════════════════╬════════════╣
║               1 ║ A          ║
║               1 ║ C          ║
║               2 ║ A          ║
║               2 ║ B          ║
║               3 ║ A          ║
╚═════════════════╩════════════╝ 
```

给定作为参数传递的类别列表，假设**`A, C`**我只想查找仅属于这两个类别的广告，在上述情况下，只有广告**1**会匹配。

谁能帮我把它翻译成SQL？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-30T19:14:55.027

```
select advertismentid
from the_table
where categoryid in ('A', 'C')
group by  advertismentid
having count(*) = 2; 
```

SQLFiddle：[http ://sqlfiddle.com/#!12/b94d6/1](http://sqlfiddle.com/#!12/b94d6/1)

这假定不能将相同的 categoryid 多次分配给相同的 advertismentid。它还将包括具有 A、C 和其他类别的广告。

如果您想要那些**恰好**具有A 类和 C 类的广告，您需要排除那些具有更多类别的广告：

```
select advertismentid
from the_table
where categoryid in ('A', 'C')
group by  advertismentid
having count(*) = 2;
intersect
select advertismentid
from the_table
group by advertismentid
having count(*) = 2; 
```

SQLFiddle: [http://sqlfiddle.com/#!12/8901c/4](http://sqlfiddle.com/#!12/8901c/4)
The SQLFiddle also has another solution using `except` instead of `intersect`

If your DBMS is limited and you cannot use `except` or `intersect`, you can use this alternative:

```
select t1.advertismentid
from the_table t1
where t1.categoryid in ('A', 'C')
group by t1.advertismentid
having count(*) = 2
and count(*) = (select count(*) 
                from the_table t2
                where t2.advertismentid = t1.advertismentid) 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-30T19:14:15.540

```
SELECT DISTINCT advertisementid 
FROM tft t1
WHERE t1.categoryid IN ('A','C')
AND EXISTS (
  SELECT * FROM tft t2
  WHERE t2.advertisementid = t1.advertisementid
  AND t2.categoryid IN ('A','C')
  AND t2.categoryid <> t1.categoryid
  ); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-30T20:47:30.327

It seems I came late, but here is my solution anyway:

```
SELECT advertisement
FROM   advertisement_childcare_types t1
LEFT JOIN (
       SELECT childcare_types ct
       FROM   table_childcare_types tct
       WHERE  childcare_types IN (0, 1, 3)
          ) AS mytypes
ON     t1.childcare_types = mytypes.ct
GROUP BY advertisement
HAVING SUM(IF(mytypes.ct IS NULL, -1, 1)) = 3; 
```

You can test in your sqlfiddle using this modified version:

```
SELECT advertisement
FROM   advertisement_childcare_types t1
LEFT JOIN (SELECT 0 as ct UNION SELECT 1 UNION SELECT 3) AS mytypes
ON     t1.childcare_types = mytypes.ct
GROUP BY advertisement
HAVING SUM(IF(mytypes.ct IS NULL, -1, 1)) = 3; 
```

# sdl - SDL2 & SDL_ttf - Best Practice

> ID：15722171
> 
> 赞同：1
> 
> 时间：2013-03-30T18:50:12.720
> 
> 标签：sdl, sdl-2, sdl-ttf

I have some basics set up in my game but I came to a point where I want to include font rendering (initially for debug output to the screen).

Looking at various tutorials and the SDL_ttf library I require clarification on something. The SDL_ttf will give you an SDL_Surface which you can then create a texture from to allow for hardware rendering. The whole process though requires a font file loading.

My main question is - Is it safe to leave the font file open until the font is no longer needed?

I saw a tutorial which closed the font file immediately after creating the SDL_Texture. My thoughts were if this was used for frequently updated text e.g. a frame rate counter, this would be highly inefficient and it would be better to hold the font file open (assuming there is no negative impact).

And the follow up from this would be if the font file is held open, would it be locked so no other font could use it?

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-30T19:40:27.283

From feedback it is now clear that when opening a font file using `TTF_OpenFont` the file on disk does not remain open. Therefore once the font has been opened it is in memory for use as normal and can then be released with `TTF_CloseFont` when no longer required.

The initial question was a result of confusion around the file remaining open (or not as it turned out) after the call to `TTF_OpenFont`

Credit to @Armin for this

# c++ - 带有 Visual Studio 2012 的 TCC

> ID：15722172
> 
> 赞同：2
> 
> 时间：2013-03-30T18:50:13.043
> 
> 标签：c++, visual-studio, visual-c++, visual-studio-2012, tcc

我正在尝试以将 C 函数（作为字符串）发送到 tcc 编译器（libtcc.dll）中的方式集成 Visual C++ 2012 和 TCC。我已经添加了 libtcc.h 头文件，但我不确定如何添加 libtcc.dll，因为没有相应的 .lib 文件。我使用 TCC 发行版中的 libtcc_test.c 文件作为我的 Win32 main() 函数。

这是我的主要内容：

```
#include <stdlib.h>
#include <stdio.h>
#include <string.h>
#include "stdafx.h"
#include "libtcc.h"

int add(int a, int b)
{
    return a + b;
}

char my_program[] =
"int fib(int n)\n"
"{\n"
"    if (n <= 2)\n"
"        return 1;\n"
"    else\n"
"        return fib(n-1) + fib(n-2);\n"
"}\n"
"\n"
"int foo(int n)\n"
"{\n"
"    printf(\"Hello World!\\n\");\n"
"    printf(\"fib(%d) = %d\\n\", n, fib(n));\n"
"    printf(\"add(%d, %d) = %d\\n\", n, 2 * n, add(n, 2 * n));\n"
"    return 0;\n"
"}\n";

int main(int argc, char **argv)
{
    TCCState *s;
    int (*func)(int);

    s = tcc_new();
    if (!s) {
        fprintf(stderr, "Could not create tcc state\n");
        exit(1);
    }

    /* if tcclib.h and libtcc1.a are not installed, where can we find them */
    if (argc == 2 && !memcmp(argv[1], "lib_path=",9))
        tcc_set_lib_path(s, argv[1]+9);

    /* MUST BE CALLED before any compilation */
    tcc_set_output_type(s, TCC_OUTPUT_MEMORY);

    if (tcc_compile_string(s, my_program) == -1)
        return 1;

    /* as a test, we add a symbol that the compiled program can use.
        You may also open a dll with tcc_add_dll() and use symbols from that */
    tcc_add_symbol(s, "add", add);

    /* relocate the code */
    if (tcc_relocate(s, TCC_RELOCATE_AUTO) < 0)
        return 1;

    /* get entry symbol */
    func = tcc_get_symbol(s, "foo");
    if (!func)
        return 1;

    /* run the code */
    func(32);

    /* delete the state */
    tcc_delete(s);

    return 0;
} 
```

当我尝试运行它时，我在 Visual Studio 2012 中收到以下错误：

```
error C3861: 'exit': identifier not found
error C3861: 'memcmp': identifier not found
error C2440: '=' : cannot convert from 'void *' to 'int (__cdecl *)(int)' 
```

有人对此有解决方案吗？

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-30T19:43:56.613

我认为最简单的方法是制作一个 .lib 文件，然后将其用于链接。请参阅位于[http://msdn.microsoft.com/en-us/library/0b9xe492.aspx](http://msdn.microsoft.com/en-us/library/0b9xe492.aspx)的 MSDN 页面，了解如何从 .def 文件创建 .lib 文件。在此之后，您可以使用常规方式指定要链接的 .lib。

# vbscript - 将文件添加到启动列表

> ID：15722177
> 
> 赞同：0
> 
> 时间：2013-03-30T18:50:36.597
> 
> 标签：vbscript, startup

我有一个 vbs 应用程序，我希望它在启动时自动添加到启动中。我怎样才能做到这一点？

这是代码：

```
Do 
    Set objIE = CreateObject("InternetExplorer.Application") 
    objIE.Visible = 1 
    objIE.Navigate "xxxxxxx"
objIE.ToolBar        = False
    objIE.Resizable      = False
    objIE.StatusBar      = False 
objIE.FullScreen = True
objIE.Width = 275
objIE.Height = 230

    Do Until VarType(objIE) = 9 
        WScript.Sleep 1000 
    Loop 

    Set objIE = Nothing 
Loop 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-30T20:19:07.993

您的意思是您希望脚本在每次启动时都将自己添加到用户的启动文件夹中？您所要做的就是在该文件夹中创建脚本[的快捷方式。](http://msdn.microsoft.com/en-us/library/xsy6k3ys%28v=vs.84%29.aspx)不过，我不建议这样做。我不知道其他任何人，但如果某些脚本在我每次启动它时都试图强行进入我的自动启动，我会非常恼火。

# java - Java: Find latest report and output to screen

> ID：15722179
> 
> 赞同：0
> 
> 时间：2013-03-30T18:50:38.393
> 
> 标签：java, text, io, report, java-7

I have a program that generates reports. It places every report in the same directory. Each report is a different file, with a naming syntax: `report*number*.txt`Java: print contents of text file to screen. The latest report will have the largest number. How do I have my program find the latest report and output it to the screen when the application is executed?

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-30T18:55:33.533

you can get the latest modified file, try this:

```
public static File lastFileModified(String dir) {
    File fl = new File(dir);
    File[] files = fl.listFiles(new FileFilter() {          
        public boolean accept(File file) {
            return file.isFile();
        }
    });
    long lastMod = Long.MIN_VALUE;
    File choise = null;
    for (File file : files) {
        if (file.lastModified() > lastMod) {
            choise = file;
            lastMod = file.lastModified();
        }
    }
    return choise;
} 
```

# ruby-on-rails - 路由错误没有路由匹配 {:action=>"show", :controller=>"dashboard"}

> ID：15722182
> 
> 赞同：0
> 
> 时间：2013-03-30T18:50:55.910
> 
> 标签：ruby-on-rails, ruby, controller, routes

我希望当管理员登录时，他应该被重定向到“仪表板”页面，如果普通用户登录，他们应该被重定向到应用程序的根目录，即“posts#index”。当普通用户注册时，它完美地工作意味着它将用户带到应用程序的根路径。但是当管理员登录时，它显示“路由错误没有路由匹配 {:action=>"show", :controller=>"dashboard"}" 错误。我在管理员的用户表中添加了 is_Admin 列。

应用控制器.rb

```
class ApplicationController < ActionController::Base
  protect_from_forgery
  def after_sign_in_path_for(user)
    if current_user.is_Admin?
      redirect_to  dashboard_path
    else
      :root
    end
  end
end 
```

Dashboard_controller.rb

```
class DashboardController < ApplicationController
  def index
    @users = User.all
  end
end 
```

视图/仪表板/index.html.erb

```
<h2>Admin Area</h2>
<table>
  <tr>
    <th> User Email </th>
    <th> User Registered Time</th>
    <th> Login Count</th>
  </tr>
  <% @users.each do |user| %>
    <tr>
      <td><%= user.email %></td>
      <td><%= user.created_at %></td>
      <td><%= user. sign_in_count %></td>
    </tr>
  <% end %>
</table> 
```

路线.rb

```
Infra::Application.routes.draw do
  devise_for :users

  resources :posts
  root :to => "posts#index"
  #match "dashboard" => "dashboard#index"

  resources :dashboard 
end 
```

rake 路由输出如下：

```
 rake routes
       new_user_session GET    /users/sign_in(.:format)       devise/sessions#new
           user_session POST   /users/sign_in(.:format)       devise/sessions#create
   destroy_user_session DELETE /users/sign_out(.:format)      devise/sessions#destroy
          user_password POST   /users/password(.:format)      devise/passwords#create
      new_user_password GET    /users/password/new(.:format)  devise/passwords#new
     edit_user_password GET    /users/password/edit(.:format) devise/passwords#edit
                        PUT    /users/password(.:format)      devise/passwords#update
ancel_user_registration GET    /users/cancel(.:format)        devise/registrations#cancel
      user_registration POST   /users(.:format)               devise/registrations#create
  new_user_registration GET    /users/sign_up(.:format)       devise/registrations#new
 edit_user_registration GET    /users/edit(.:format)          devise/registrations#edit
                        PUT    /users(.:format)               devise/registrations#update
                        DELETE /users(.:format)               devise/registrations#destroy
                  posts GET    /posts(.:format)               posts#index
                        POST   /posts(.:format)               posts#create
               new_post GET    /posts/new(.:format)           posts#new
              edit_post GET    /posts/:id/edit(.:format)      posts#edit
                   post GET    /posts/:id(.:format)           posts#show
                        PUT    /posts/:id(.:format)           posts#update
                        DELETE /posts/:id(.:format)           posts#destroy
                   root        /                              posts#index
        dashboard_index GET    /dashboard(.:format)           dashboard#index
                        POST   /dashboard(.:format)           dashboard#create
          new_dashboard GET    /dashboard/new(.:format)       dashboard#new
         edit_dashboard GET    /dashboard/:id/edit(.:format)  dashboard#edit
              dashboard GET    /dashboard/:id(.:format)       dashboard#show
                        PUT    /dashboard/:id(.:format)       dashboard#update
                        DELETE /dashboard/:id(.:format)       dashboard#destroy 
```

堆栈树

```
Started POST "/users/sign_in" for 127.0.0.1 at 2013-03-31 01:28:36 +0530
Processing by Devise::SessionsController#create as HTML
  Parameters: {"utf8"=>"✓", "authenticity_token"=>"j5KOmGDpI7Xwit4U7JUysB3EqhIogljjCDlSIK158/s=", "user"=>{"email"=>"vieenaysiingh@gmail.com", "password"=>"[FILTERED]", "remember_me"=>"0"}, "commit"=>"Sign in"}
  [1m[36mUser Load (1.0ms)[0m  [1mSELECT "users".* FROM "users" WHERE "users"."email" = 'vieenaysiingh@gmail.com' LIMIT 1[0m
  [1m[35m (0.0ms)[0m  begin transaction
  [1m[36m (2.0ms)[0m  [1mUPDATE "users" SET "last_sign_in_at" = '2013-03-30 19:44:14.252484', "current_sign_in_at" = '2013-03-30 19:58:37.089835', "sign_in_count" = 50, "updated_at" = '2013-03-30 19:58:37.091835' WHERE "users"."id" = 1[0m
  [1m[35m (195.0ms)[0m  commit transaction
Redirected to http://localhost:3000/dashboard
Completed 500 Internal Server Error in 423ms

AbstractController::DoubleRenderError (Render and/or redirect were called multiple times in this action. Please note that you may only call render OR redirect, and at most once per action. Also note that neither redirect nor render terminate execution of the action, so if you want to exit an action after redirecting, you need to do something like "redirect_to(...) and return".):
  actionpack (3.2.12) lib/action_controller/metal/rendering.rb:15:in `render'
  actionpack (3.2.12) lib/action_controller/metal/instrumentation.rb:40:in `block (2 levels) in render'
  activesupport (3.2.12) lib/active_support/core_ext/benchmark.rb:5:in `block in ms'
  c:/RailsInstaller/Ruby1.9.3/lib/ruby/1.9.1/benchmark.rb:295:in `realtime'
  activesupport (3.2.12) lib/active_support/core_ext/benchmark.rb:5:in `ms'
  actionpack (3.2.12) lib/action_controller/metal/instrumentation.rb:40:in `block in render'
  actionpack (3.2.12) lib/action_controller/metal/instrumentation.rb:83:in `cleanup_view_runtime'
  activerecord (3.2.12) lib/active_record/railties/controller_runtime.rb:24:in `cleanup_view_runtime'
  actionpack (3.2.12) lib/action_controller/metal/instrumentation.rb:39:in `render'
  actionpack (3.2.12) lib/action_controller/metal/implicit_render.rb:10:in `default_render'
  actionpack (3.2.12) lib/action_controller/metal/responder.rb:232:in `default_render'
  actionpack (3.2.12) lib/action_controller/metal/responder.rb:160:in `to_html'
  actionpack (3.2.12) lib/action_controller/metal/responder.rb:153:in `respond'
  actionpack (3.2.12) lib/action_controller/metal/responder.rb:146:in `call'
  actionpack (3.2.12) lib/action_controller/metal/mime_responds.rb:239:in `respond_with'
  devise (2.2.3) app/controllers/devise/sessions_controller.rb:18:in `create'
  actionpack (3.2.12) lib/action_controller/metal/implicit_render.rb:4:in `send_action'
  actionpack (3.2.12) lib/abstract_controller/base.rb:167:in `process_action'
  actionpack (3.2.12) lib/action_controller/metal/rendering.rb:10:in `process_action'
  actionpack (3.2.12) lib/abstract_controller/callbacks.rb:18:in `block in process_action'
  activesupport (3.2.12) lib/active_support/callbacks.rb:458:in `_run__176658777__process_action__917642946__callbacks'
  activesupport (3.2.12) lib/active_support/callbacks.rb:405:in `__run_callback'
  activesupport (3.2.12) lib/active_support/callbacks.rb:385:in `_run_process_action_callbacks'
  activesupport (3.2.12) lib/active_support/callbacks.rb:81:in `run_callbacks'
  actionpack (3.2.12) lib/abstract_controller/callbacks.rb:17:in `process_action'
  actionpack (3.2.12) lib/action_controller/metal/rescue.rb:29:in `process_action'
  actionpack (3.2.12) lib/action_controller/metal/instrumentation.rb:30:in `block in process_action'
  activesupport (3.2.12) lib/active_support/notifications.rb:123:in `block in instrument'
  activesupport (3.2.12) lib/active_support/notifications/instrumenter.rb:20:in `instrument'
  activesupport (3.2.12) lib/active_support/notifications.rb:123:in `instrument'
  actionpack (3.2.12) lib/action_controller/metal/instrumentation.rb:29:in `process_action'
  actionpack (3.2.12) lib/action_controller/metal/params_wrapper.rb:207:in `process_action'
  activerecord (3.2.12) lib/active_record/railties/controller_runtime.rb:18:in `process_action'
  actionpack (3.2.12) lib/abstract_controller/base.rb:121:in `process'
  actionpack (3.2.12) lib/abstract_controller/rendering.rb:45:in `process'
  actionpack (3.2.12) lib/action_controller/metal.rb:203:in `dispatch'
  actionpack (3.2.12) lib/action_controller/metal/rack_delegation.rb:14:in `dispatch'
  actionpack (3.2.12) lib/action_controller/metal.rb:246:in `block in action'
  actionpack (3.2.12) lib/action_dispatch/routing/route_set.rb:73:in `call'
  actionpack (3.2.12) lib/action_dispatch/routing/route_set.rb:73:in `dispatch'
  actionpack (3.2.12) lib/action_dispatch/routing/route_set.rb:36:in `call'
  actionpack (3.2.12) lib/action_dispatch/routing/mapper.rb:42:in `call'
  journey (1.0.4) lib/journey/router.rb:68:in `block in call'
  journey (1.0.4) lib/journey/router.rb:56:in `each'
  journey (1.0.4) lib/journey/router.rb:56:in `call'
  actionpack (3.2.12) lib/action_dispatch/routing/route_set.rb:601:in `call'
  warden (1.2.1) lib/warden/manager.rb:35:in `block in call'
  warden (1.2.1) lib/warden/manager.rb:34:in `catch'
  warden (1.2.1) lib/warden/manager.rb:34:in `call'
  actionpack (3.2.12) lib/action_dispatch/middleware/best_standards_support.rb:17:in `call'
  rack (1.4.5) lib/rack/etag.rb:23:in `call'
  rack (1.4.5) lib/rack/conditionalget.rb:35:in `call'
  actionpack (3.2.12) lib/action_dispatch/middleware/head.rb:14:in `call'
  actionpack (3.2.12) lib/action_dispatch/middleware/params_parser.rb:21:in `call'
  actionpack (3.2.12) lib/action_dispatch/middleware/flash.rb:242:in `call'
  rack (1.4.5) lib/rack/session/abstract/id.rb:210:in `context'
  rack (1.4.5) lib/rack/session/abstract/id.rb:205:in `call'
  actionpack (3.2.12) lib/action_dispatch/middleware/cookies.rb:341:in `call'
  activerecord (3.2.12) lib/active_record/query_cache.rb:64:in `call'
  activerecord (3.2.12) lib/active_record/connection_adapters/abstract/connection_pool.rb:479:in `call'
  actionpack (3.2.12) lib/action_dispatch/middleware/callbacks.rb:28:in `block in call'
  activesupport (3.2.12) lib/active_support/callbacks.rb:405:in `_run__395807340__call__550232966__callbacks'
  activesupport (3.2.12) lib/active_support/callbacks.rb:405:in `__run_callback'
  activesupport (3.2.12) lib/active_support/callbacks.rb:385:in `_run_call_callbacks'
  activesupport (3.2.12) lib/active_support/callbacks.rb:81:in `run_callbacks'
  actionpack (3.2.12) lib/action_dispatch/middleware/callbacks.rb:27:in `call'
  actionpack (3.2.12) lib/action_dispatch/middleware/reloader.rb:65:in `call'
  actionpack (3.2.12) lib/action_dispatch/middleware/remote_ip.rb:31:in `call'
  actionpack (3.2.12) lib/action_dispatch/middleware/debug_exceptions.rb:16:in `call'
  actionpack (3.2.12) lib/action_dispatch/middleware/show_exceptions.rb:56:in `call'
  railties (3.2.12) lib/rails/rack/logger.rb:32:in `call_app'
  railties (3.2.12) lib/rails/rack/logger.rb:16:in `block in call'
  activesupport (3.2.12) lib/active_support/tagged_logging.rb:22:in `tagged'
  railties (3.2.12) lib/rails/rack/logger.rb:16:in `call'
  actionpack (3.2.12) lib/action_dispatch/middleware/request_id.rb:22:in `call'
  rack (1.4.5) lib/rack/methodoverride.rb:21:in `call'
  rack (1.4.5) lib/rack/runtime.rb:17:in `call'
  activesupport (3.2.12) lib/active_support/cache/strategy/local_cache.rb:72:in `call'
  rack (1.4.5) lib/rack/lock.rb:15:in `call'
  actionpack (3.2.12) lib/action_dispatch/middleware/static.rb:62:in `call'
  railties (3.2.12) lib/rails/engine.rb:479:in `call'
  railties (3.2.12) lib/rails/application.rb:223:in `call'
  rack (1.4.5) lib/rack/content_length.rb:14:in `call'
  railties (3.2.12) lib/rails/rack/log_tailer.rb:17:in `call'
  rack (1.4.5) lib/rack/handler/webrick.rb:59:in `service'
  c:/RailsInstaller/Ruby1.9.3/lib/ruby/1.9.1/webrick/httpserver.rb:138:in `service'
  c:/RailsInstaller/Ruby1.9.3/lib/ruby/1.9.1/webrick/httpserver.rb:94:in `run'
  c:/RailsInstaller/Ruby1.9.3/lib/ruby/1.9.1/webrick/server.rb:191:in `block in start_thread'

  Rendered c:/RailsInstaller/Ruby1.9.3/lib/ruby/gems/1.9.1/gems/actionpack-3.2.12/lib/action_dispatch/middleware/templates/rescues/_trace.erb (3.0ms)
  Rendered c:/RailsInstaller/Ruby1.9.3/lib/ruby/gems/1.9.1/gems/actionpack-3.2.12/lib/action_dispatch/middleware/templates/rescues/_request_and_response.erb (4.0ms)
  Rendered c:/RailsInstaller/Ruby1.9.3/lib/ruby/gems/1.9.1/gems/actionpack-3.2.12/lib/action_dispatch/middleware/templates/rescues/diagnostics.erb within rescues/layout (103.0ms) 
```

我在 application_controller.rb 中定义了“def after_sign_in_path_for(user)”，它根据用户类型决定重定向到哪里。我想，问题就在这里。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-30T20:10:56.023

方法 after_sign_in_path_for 应该返回路径，而不是重定向。

```
class ApplicationController < ActionController::Base
  protect_from_forgery
  def after_sign_in_path_for(user)
    if current_user.is_Admin?
      dashboard_index_path
    else
      :root
    end
  end
end 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-30T18:57:28.697

改变

```
resources :dashboard 
```

到

```
resource :dashboard 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-30T19:01:04.587

1) - 每当您更改路线时，您可能应该重新启动 rails 进程

然后我会尝试使用匹配来代替仪表板的资源（猜你不需要所有的 CRUD 操作？）

```
match "dashboard" => "dashboard#index" 
```

重定向应该是

```
redirect_to dashboard_path 
```

如果您确实使用资源，它将是`redirect_to dashboards_path`（索引操作的复数）

路线的顺序也很重要，也许让你的比赛更靠近路线的顶部？

另见： http: [//guides.rubyonrails.org/routing.html](http://guides.rubyonrails.org/routing.html)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2016-02-05T08:05:09.483

使用它来让它工作：

```
 redirect_to main_app.root_path 
```

将 main_app 添加到您的路由路径

# java - “___ 中的方法 ___() 在不可访问的类或接口中定义”编译错误

> ID：15722184
> 
> 赞同：20
> 
> 时间：2013-03-30T18:50:57.777
> 
> 标签：java, compiler-errors

我发现了一个奇怪的编译限制，我无法解释，我不明白这个限制的原因。

**示例 1：**

考虑这些类：

在`package e1;`：

```
public class C1 {
    enum E1 { A, B, C }
    public E1 x;
} 
```

在`package e2;`：

```
import e1.C1;
public class C2 {
    public String test(C1 c1) {
        return c1.x.toString();    // here compilation error
    } 
} 
```

这会导致以下编译错误：

> 错误：（5,20）java：`toString()`in`java.lang.Enum`被定义在一个不可访问的类或接口中

**示例 2：**

考虑这些类：

在`package i1;`：

```
public interface I1 {
    int someMethod();
}

public class C1 {
    static class I2 implements I1 {
        public int someMethod() {
            return 1;
        }
    }
    public I2 x = new I2();
} 
```

在`package i2;`：

```
import i1.C1;
import i1.I1;
public class C2 {
    public static void main(String[] args) {
        C1 c1 = new C1();
        System.out.println(c1.x.someMethod());  // compilation error
    }
} 
```

这也会导致相同的编译错误，但如果我们将违规行更改为：

```
System.out.println(((I1)c1.x).someMethod()); 
```

然后可以编译并正常工作。

* * *

所以，问题是：

**为什么需要这种可访问性限制？**

**是的，我知道`C1.E`example-1) 和`C1.I2`example-2) 中的类是包私有的。**但同时很明显，没有人可以为基接口（`I1`of `Object`）的方法分配较弱的访问权限，因此将对象直接转换为其基接口并获得对受限方法的访问总是安全的。

有人可以解释这种限制的目的和原因吗？

**更新**：[assylias](https://stackoverflow.com/users/829571/assylias)指出 JLS [§6.6.1](http://docs.oracle.com/javase/specs/jls/se7/html/jls-6.html#jls-6.6.1)：

> 引用（类、接口或数组）类型的成员（类、接口、字段或方法）或类类型的构造函数只有在类型可访问时才可访问...

看起来这是限制，但它没有解释**为什么**需要这个限制（在上述示例的情况下）......

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2013-04-04T11:38:18.070

对于实例方法的调用，使用[invokevirtual](http://docs.oracle.com/javase/specs/jvms/se7/html/jvms-6.html#jvms-6.5.invokevirtual)指令。要调用此方法，类必须具有对此方法的已解析引用

从invokevirtual规范：

> 链接异常
> 
> 在解析对方法的符号引用期间，可以抛出与方法解析（第**5.4.3.3 节）有关的任何异常。**

**5.4.3.3** . 方法解析：

> 要将未解析的符号引用从 D 解析到类 C 中的方法，首先解析由方法引用给出的对 C 的符号引用（第**5.4.3.1 节**）。

**5.4.3.1**。类和接口解析：

> 如果 D 无法访问 C（**第 5.4.4 节**），则类或接口解析会引发 IllegalAccessError。

**5.4.4** . 访问控制：

> 当且仅当以下任一条件为真时，类或接口 D 才能访问类或接口 C：
> 
> *   C是公开的。
>     
>     
> *   C 和 D 是同一运行时包的成员（第 5.3 节）。

C 和 D 不是来自同一个包。所以即使java为你编译了这段代码，它也会在调用过程中抛出一个IllegalAccessError。编译器足够聪明，可以防止这种明显的错误。**这些限制来自 java 的类解析过程的要求。**

调用实例方法JVM需要两件事：对对象的引用和对象的描述（类或接口）。描述是通过[解析过程](http://docs.oracle.com/javase/specs/jvms/se7/html/jvms-5.html#jvms-5.4.3)访问的。如果失败，则调用失败。

> 如果在解析符号引用期间发生错误，则必须在程序中（直接或间接）使用符号引用的点处抛出 IncompatibleClassChangeError（或子类）的实例。

在您的情况下，C2 可以访问 I1。所以接口调用效果很好。但 C2 无权访问 I2 类。这就是为什么 IllegalAccessError 如果此代码编译在运行时可能会抛出的原因。

**如何重现 IllegalAccessError**：

1.  例如，将内部类公开并在 IDE 中编译所有内容
2.  将内部类包设为私有并使用命令行中的 javac 对其进行编译。
3.  用 cmd 生成的类替换 IDE 生成的类
4.  你会看到类似的东西：

> 线程“主”java.lang.IllegalAccessError 中的异常：试图从 Test.main 的类 Test 访问类 qq.Test1$I2（Test.java:30）

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-03T09:20:22.500

访问控制（私有、受保护、公共、包）都定义良好，并为程序员提供了很大的灵活性来控制对类、变量、方法等的访问。您的问题只是说明了应用这些访问控制的一个特定示例. 你写包的方式`i1`，你说大家都可以看interface `I1`，但不是大家都可以看class `I2`。这允许您向`I2`不公开的类添加功能，同时仍然允许访问`I2`implementation的位`I1`。例如，如果我将包本地整数添加到类`I2`

```
public class C1 {
    static class I2 implements I1 {
        int i;
        public int xxx() {
            return 1;
        }
    }
    public I2 x = new I2();
} 
```

那么您可以访问包内的 int ，但不能访问包外的 int ，而在包外，您无法通过强制转换来解决这个问题:-)。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-03T10:01:50.137

`E1`在这些示例中，来自示例 1 和`I2`示例 2 的调用者均不可见。所以我很清楚，编译器说它不知道如何处理它。你的意图是模棱两可的。或者反过来说：JVM 应该如何处理这种对不可见类的调用？投射到界面？哪一个，作为一个类可以实现几个。

也许可以让编译器在特殊情况下向其接口添加强制转换，但这只是：特殊情况而不是一般规则。除此之外，对于开发人员来说，获取一个无法访问的类的实例（想想框架）会非常混乱。

如果你想隐藏内部，你宁愿使用（公共）接口，而不是包私有实现。

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2013-04-03T12:41:21.783

我将尝试通过使用您的示例 2 并对其进行一些更改来解释它。

假设班级`C1`是这样的

```
public class C1 {
    static class I2 implements I1 {
        public int xxx() {
            return 1;
        }

        public int hello(){
            return 1;
        }
    }
    public I2 x = new I2();
} 
```

我刚刚向 I2 类添加了另一个公共方法 hello()。

在

```
package i2;:

import i1.C1;
import i1.I1;
public class C2 {
    public static void main(String[] args) {
        C1 c1 = new C1();

        c1.x.hello(); // Will not compile.
        c1.x.toString(); //Will not compile.             

        Object mObject=(Object)c1.x;
        mObject.toString(); //Will compile.
    }
} 
```

现在，回答你为什么要限制的问题。该限制允许程序员阻止访问类的公共方法`I2`。由于访问说明符 of`I2`是默认访问说明符，因此它的任何方法都不应该在包外可用，因此受到限制。如果没有限制，即使具有默认访问说明符，我们也可以`hello()`从（在不同的包中）访问该方法。`C2``I2`

转换`c1.x`为`Object`有效，因为现在编译器将其视为 class 的对象`Object`。因此我们可以访问它的`toString()`方法。因此，`mObject.toString()`有效， `c1.x.toString()`而不`I2`能从 class 访问 class `C2`。

* * *

## 回答 #5

> 赞同：-1
> 
> 时间：2013-04-06T23:43:03.377

在这两个示例中，您都使用内部类/接口。内部类不能被定义它们的类之外的任何对象访问。

Hence, you have to cast them to objects (or any other supertype of your inner class). You have to do this cast manually because the JDK does not know of any implicit casts.

The way to deal with this is to turn your inner classes into regular classes. Inner classes are very useful, but only for very specific tasks.

# qt - qt崩溃时boost线程中断

> ID：15722185
> 
> 赞同：0
> 
> 时间：2013-03-30T18:51:00.153
> 
> 标签：qt, boost-thread

我有一个运行着几个 boost 线程的 qt 应用程序。当我在我的一个 qt 事件处理程序中遇到未处理的异常（例如 std::runtime_error）时，boost 线程也会捕获 thread_interrupted 异常。

为什么会这样？我已经尝试在所有中断点周围捕获块，例如增强睡眠，所以我无法弄清楚 thread_interrupted 异常来自哪里（即使所有记录为中断点的调用都已经在线程函数中捕获了异常包裹在 try-catch 块中）。

运行时或 qt 是否以某种方式终止了 boost 线程并导致 thread_interrupted 异常？

理想情况下，我希望 qt 中任何未处理的异常都出现在主线程中，而不是在 boost 线程中。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-04T09:33:15.540

解决了。我在障碍物上发现了一个不受保护的等待。当 Qt 插槽中发生异常时，Qt 开始清理并调用应用程序析构函数。这反过来又导致我的线程被中断，那些等待屏障的线程然后抛出异常。

# collision-detection - 使用分离轴定理时的多次碰撞

> ID：15722186
> 
> 赞同：0
> 
> 时间：2013-03-30T18:51:01.810
> 
> 标签：collision-detection, collision

我正在制作一个小型 2D 引擎，并决定使用分离轴定理进行练习。我对玩家对象进行了碰撞检测和平移，但是当游戏与多个对象发生碰撞时，它会停止玩家的移动。这是我的问题的一个例子：

玩家沿着墙壁移动，将自己向下和向右推。一旦玩家到达两个瓷砖之间的交叉点，他就不能再向下移动，因为他下方的瓷砖会检测到碰撞，并将在玩家直接向右的瓷砖将他推向左侧之前将玩家向上推。我认为问题在于玩家下方的瓷砖正在测试其他瓷砖之前的碰撞，但我不知道如何解决这个问题。

这是我认为需要更改的代码部分：

```
protected override void Update(GameTime gameTime)
    {
        gameCamera.Update(new Vector2(player._boundingBox.X, player._boundingBox.Y));

        foreach (Layer l in currentLevel.Layers)
        {
            foreach (GameObject gameObject in l.layerMapObjects)
            {
                gameObject.Update(gameTime);
            }
        }

        player.Update(gameTime);

        foreach (Layer l in currentLevel.Layers)
        {
            foreach (GameObject gameObject in l.layerMapObjects)
            {
                if (gameObject._isCollidable)
                {
                    Vector2 vectorTranslation = Collision(player._boundingBox, gameObject._boundingBox);
                    player._boundingBox.X += (int)vectorTranslation.X;
                    player._boundingBox.Y += (int)vectorTranslation.Y;
                }
            }
        }

        base.Update(gameTime);
    } 
```

我现在所有的碰撞都在矩形之间，并且 Collision() 函数将检测碰撞并返回移动玩家所需的平移（如果有的话）。我希望有人可以帮助我解决这个问题。谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-30T19:48:51.517

如果问题是您的播放器在检测到所有冲突之前正在更新，请尝试批处理该过程。那是; 而不是立即应用 vectorTranslations 来创建它们的列表，然后当检测到所有碰撞时，将翻译列表应用于播放器。

# assembly - my .com file won't open port COM 1, assembly

> ID：15722188
> 
> 赞同：0
> 
> 时间：2013-03-30T18:51:09.860
> 
> 标签：assembly, x86, serial-port, nasm, dos

I'm programming a chat between 2 computer using the serial cable, this is my first time using assembly. I've been working so far on the interface without problems, i'm using NASM to compile the .asm into .com files and then run them.

Now I started working with the serial port and wrote this simple program to send a string character by character and check using hyperterminal if it does in fact gets sent.

```
org 0x0100

    mov ah, 0
    mov al, 0xe3            ;port parameters
    mov dx, 0               ;port numbe (COM 1)
    int 0x14                ;initialize port

    mov si, msg
    mov cx, [length]

l:  mov ah,0x1
            lodsb           ;loads next character
    int 0x14                ;sends character
    loop l

    mov ax,0x4c00
    int 0x21

    msg: db 'hello world'

    length: dw 11 
```

But when i run the .com file i get this msg:"the system cannot open com1 port requested by the application". I read that running it in compatibility might fix this.

So, is it possible to run a .com file in compatibility mode? Will i have to make .exe file to run in compatibility mode? If so, i know that you have to generate a .obj before the .exe but nasm won't let me do a .obj of the code above, i believe the code needs a different format like a main use instead of the org0x0100 but that's not clear for me, as i have looked it up but everybody does different things.

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-30T19:00:49.657

In your code , you use the so called DOS interrupts (e.g. int 0x21 for program termination to the screen) so you must work under x86 RealMode , there is a nifty tool for emulating DOS application (like the one you use) and its called [DOSBox](http://www.dosbox.com/), please use it.

# elasticsearch - Updating indexed document in Elasticsearch

> ID：15722197
> 
> 赞同：19
> 
> 时间：2013-03-30T18:52:09.470
> 
> 标签：elasticsearch, full-text-search

I am trying to understand how you update an indexed document in Elasticsearch. I don't understand how it works? What is the `ctx` that the API is referring to doing? Let say you have a document with nested documents what do you have to do to update it?

And what is the difference between deleting the document and then index the "updated" version, vs a plain update?

* * *

## 回答 #1

> 赞同：39
> 
> 时间：2013-03-30T19:20:39.670

The update request retrieve source from Elasticsearch, modifies it and indexes it back to Elasticsearch. If you already have a copy of the document using update makes little sense. It would be generally faster to just index the new version. However, if you don't have the document readily available but you know which changes you would like to make to the document, it might be more efficient to use update.

For example, if I don't have a copy of the car document, but I want to add a new creator I can do something like this:

```
curl -XDELETE localhost:9200/test

curl -XPUT localhost:9200/test -d '{
    "settings": {
        "index.number_of_shards": 1,
        "index.number_of_replicas": 0
    },
    "mappings": {
        "car": {
            "properties": {
                "creators" : {
                    "type": "nested",
                    "properties": {
                        "name": {"type":"string"}
                    }
                }
            }
        }
    }
}
'

curl -XPOST localhost:9200/test/car/1 -d '{
    "creators": [{
        "name": "Steve"
    }]
}
'

echo
curl -XPOST localhost:9200/test/car/1/_update -d '{
    "script" : "ctx._source.creators += new_creator",
    "params" : {
        "new_creator" : {"name": "John"}
    }
}'

echo
curl "localhost:9200/test/car/1?pretty=true"
echo 
```

In the update script `ctx` is a special variable that allows you to access the source of the object that you want to update. The `ctx._source` is a writable version of the source. You can modify this document in the script and the modified source will be persisted as the new version of the document.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2019-08-13T17:12:48.030

Here is how to update a document with nested customer documents in ElasticSearch 7.3:

```
POST /myindex/_doc/mypartid/_update
{
    "script" : {
        "source": "ctx._source.customers.add(params.newcust)",
        "params" : {
            "newcust" : {"customer": "cust3"}
        }
    }
} 
```

Results in:

```
GET /myindex/_doc/mypartid
{
    "_index": "myindex2",
    "_type": "_doc",
    "_id": "mypartid",
    ...
    "_source": {
        "part": "my part",
        "customers": [
            {"customer": "cust1"},
            {"customer": "cust3"}
        ],
        "machines": [
            {"machine": "mach7"},
            {"machine": "mach2"}
        ]
    }
} 
```

So, for ES7+ the URL has changed as have the way you do scripts and which operations an array can have (`+=` does not work).

# jquery - remove the builtin tool tip on hover?

> ID：15722201
> 
> 赞同：1
> 
> 时间：2013-03-30T18:53:01.587
> 
> 标签：jquery, html, css

I made a tool tip using html, jquery, and css. The Tool tip uses the title attribute in order to show its contents.

```
<a href="#" class="tooltip" title="Hello">Hover Me</a> 
```

When I hover the link I see the tool tip and its working fine. The problem is that I also see the built in html tool tip. Is there any way to disable that html tool tip ? OR is there any other attribute that I can use to solve this problem ?

![enter image description here](../Images/85eb0ca58c0089a10bc7497d47f256a5.png)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-30T18:55:48.650

You can also define an arbitrary attribute that you target for your purpose. This is easy to do using JQuery.

ex: `<a href="#" class="tooltip" data-tooltip="Hello">Hover Me</a>`

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-30T19:00:47.157

To maintain SEO and so forth, I'd just remove the `title` attribute temporarily, and then add it back in; something like this:

```
$('element').hover(function() {
    var title = $(this).prop('title');  
    $(this).data('orig-title', title).prop('title', '');
}, function() {  
    $(this).prop('title', $(this).data('orig-title'));
}); 
```

# algorithm - 对于 O(1) 中的一系列数字，如何创建一个返回相同值的函数？

> ID：15722205
> 
> 赞同：1
> 
> 时间：2013-03-30T18:53:27.370
> 
> 标签：algorithm

例如

```
H: [0, 20] -> "a"
H: [21: 25] -> "y"
H: [26: 132] -> "z" 
```

无论我输入多少范围，如何制作 H 以便函数花费恒定时间（以及插入恒定时间）？这甚至可能吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-30T19:38:36.403

您可以为此使用一个简单的数组：

```
[0] -> "a"
[1] -> "a"
[2] -> "a"
[3] -> "a"
[4] -> "a"
[5] -> "a"
...
[20] -> "a"
[21] -> "y"
[22] -> "y"
[23] -> "y"
[24] -> "y"
[25] -> "y"
[26] -> "z"
...
[132] -> "z" 
```

这为您提供 O(1) 查找。您可以对键是索引的哈希表执行相同的操作，但性能会差得多。这种方法有多种变体（例如使用哈希表或一些延迟加载的构造），但它们都处理一对一的映射。

如果由于内存限制而无法进行一对一映射，则无法使用 O(1) 执行此操作，因为您将始终必须遍历已注册的范围，因此充其量可以是 O(log (n)) 其中 n 是范围数。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-30T19:03:15.757

是的，只需使用查找表。使用您希望由该范围表示的值初始化每个范围的表，然后返回索引处的值。像这样的东西：

```
const char *lookup(int index)
{
    static const char *table[] = {
        "foo",
        "foo",
        "foo",
        "foo",
        "bar",
        "bar",
        "quirk",
        "quirk",
        "quirk"
    };
    return table[index];
} 
```

这将返回`"foo"`range `[0, 3]`、`"bar"`range`[4, 5]`和`"quirk"`range `[6, 8]`。

# javascript - 输入无效时如何不提交表单。

> ID：15722209
> 
> 赞同：0
> 
> 时间：2013-03-30T18:54:01.293
> 
> 标签：javascript, html

我试图阻止表单在“名称”字段未填写时提交，但它继续提交，即使 submitForm 函数返回 false。当用户输入名称失败时，submitForm 函数将 Name 字段变为黄色（当我在浏览器上按回时可以看到），但警报永远不会出现，并且表单仍然提交。有任何想法吗？

```
function submitForm() {
var valid = true;
var rform = document.forms[0];

if (testLength(rform.name)==false) valid=false;

if ((rform.member[0].checked || rform.member[1].checked)== false) {
  rform.member[0].style.backgroundColor="yellow";
  rform.member[1].style.backgroundColor="yellow";
  valid=false;
}

if (valid == false) alert("Enter all required information in the appropriate format");

return valid;
} 
```

和形式。

```
<form id="reg" method="GET" action="processorder.php">
<input id="btnSubmit" type="submit" value="Submit Form" onclick="return submitForm();"/></p> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-30T18:58:58.613

尝试使用表单元素的 onsubmit 事件：

```
<form id="reg" method="GET" onsubmit="return submitForm();" action="processorder.php">
    <input id="btnSubmit" type="submit" value="Submit Form"/></p>
</form> 
```

# session - PHP Session not working and immidietly expires

> ID：15722215
> 
> 赞同：0
> 
> 时间：2013-03-30T18:54:51.517
> 
> 标签：session, php

I'm new to PHP and I learn sessions right now, so I tried to to create two files, one that creates the session var and one who prints it.. here's the code: session1.php

```
<?php session_start(); $_SESSION['a'] = 1;  echo 'The session right now is: ' . $_SESSION['a']; ?> 
```

session2.php

```
<?php
session_start();
if(isset($_SESSION['a']))
{
    echo $_SESSION['a'];
}
else
{
echo 'but the output here is false';
}
?> 
```

First I enter to session1.php to create the session, then I go to session2.php and the output is false.. This only happens when this files are uploaded to the web hosting, you are welcome to try it yourself in this url: wwww.pzwhatsup.com/session1.php and wwww.pzwhatsup.com/session2.php. When trying this in my computer with wamp, it works perfectly..

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-30T19:15:58.200

Does your hosting company allow Sessions, and did they give a valid path with the proper rights for storing the sessions?

It happens.

Else, do you request the two files right after each other (include or somthing), or is there a page switch in between?

Cause when you set a Session value and request it right after (miliseconds) your value isn't always set properly.

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-30T19:17:28.577

Some web hosters dont create the session's repertory, so try to read your webhoster's terms of using, maybe you would find something about creating your own session repertory.

# qt - configure 和 qmake 的区别

> ID：15722218
> 
> 赞同：2
> 
> 时间：2013-03-30T18:55:06.347
> 
> 标签：qt, build, configure, qmake

我正在研究 QT 库的构建脚本：

```
@echo off

echo Setting up a MinGW/Qt only environment...
echo -- QTDIR set to E:\QT\4.8.4
echo -- PATH set to E:\QT\4.8.4\bin
echo -- Adding e:\MinGW\bin to PATH
echo -- Adding %SystemRoot%\System32 to PATH
echo -- QMAKESPEC set to win32-g++

set QTDIR=E:\QT\4.8.4
set PATH=E:\QT\4.8.4\bin
set PATH=%PATH%;e:\MinGW\bin
set PATH=%PATH%;%SystemRoot%\System32
set QMAKESPEC=win32-g++

if not "%1"=="compile_debug" goto END
cd %QTDIR%
echo This will configure and compile qt in debug.
echo The release libraries will not be recompiled.
pause
configure -plugin-sql-sqlite -plugin-sql-odbc -qt-libpng -qt-libjpeg
REM cd %QTDIR%\src
REM qmake
REM mingw32-make debug
:END 
```

为了确定特定命令的功能，我已经注释了文件的其余部分。我注意到 configure.exe 命令遍历 QT 源代码的目录结构，并为它找到的每个项目文件 *.pro 创建生成文件。从[文档](http://qt-project.org/doc/qt-4.8/qmake-manual.html)中我记得这应该是 qmake 工具的任务：

`qmake automates the generation of Makefiles`

configure.exe 和 qmake.exe 有什么区别？构建脚本中的 qmake 调用不是多余的吗？我有点困惑。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-30T22:02:38.567

`qmake`确实主要运行 Makefile 生成过程，但它也与该`moc`过程相关联，而不仅仅是生成 Makefile。

# c# - Extension of StartsWith that searches in all words

> ID：15722221
> 
> 赞同：4
> 
> 时间：2013-03-30T18:55:25.127
> 
> 标签：c#, linq, search, autosuggest, startswith

**Is there an extension of string's StartsWith that it searches at the start of every word in the string?**

Something like: `"Ben Stiller".StartsWithExtension("Sti")` returning true

I want this so I can make a predicate for searching.

Lets say there's a list called Persons, `ICollection<Person>`
Each person has a property Name, with values like "Ben Stiller" or "Adam Sandler".

I want to be able to do predicates like:

`Persons.Where(p => p.Name.StartsWithExtension(query))`

Thanks (Other better ways of achieving this are welcome)

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-03-30T19:04:09.413

You can split the string up by words first, like this:

```
var result = "Ben Stiller".Split(new string[] { " " }, StringSplitOptions.RemoveEmptyEntries)
                          .Any(x => x.StartsWith("Sti")); 
```

Of course you could write this as you're own extension method, like this:

```
public static bool AnyWordStartsWith(this string input, string test)
{
    return input.Split(new string[] { " " }, StringSplitOptions.RemoveEmptyEntries)
                .Any(x => x.StartsWith(test));
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-30T19:10:33.623

Probably the most succinct approach is to use regex:

```
public static bool StartsWithExtension(this string value, string toFind)
{
    return Regex.IsMatch(value, @"(^|\s)" + Regex.Escape(toFind));
} 
```

This is also more reliable than splitting the source string on the character ' ', since it can handle other whitespace characters.

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-30T19:04:12.983

Why not instead create a "ToWords" method, then feed the results of that to StartsWith?

In fact, "ToWords" already kind of exists:

Edit: for giggles, let's have it work on multiples

```
 var someNames = new []{ "Sterling Archer", "Cyril Figgus" };
 var q = someNames
    .Select(name => name.Split(' '))
    .SelectMany( word => word)
     // the above chops into words
    .Where(word => word.StartsWith("Arch")); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-30T19:07:43.110

Well you can even check it this way :

```
bool flag = (sample_str.StartsWith("Sti" ) || sample_str.Contains(".Sti") || sample_str.Contains(" Sti")) 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-03-30T19:22:41.017

```
 public static bool ContainsWordStartingWith(this string aString, string startingWith)
    {
        return aString.Split(' ').Any(w => w.StartsWith(startingWith));
    } 
```

# python - Python list_of_tuples: sum second val of each tuple, only if first val of tuple == something

> ID：15722222
> 
> 赞同：2
> 
> 时间：2013-03-30T18:55:26.427
> 
> 标签：python, list, set, tuples

I have a list of "tagged" tuples...where each tuple is (tag_id, value)...like so:

```
my_list = [(tag_A, 100), (tag_A, 200), (tag_A, 300), (tag_A, 400), (tag_B, 400), (tag_B, 600)] 
```

I want to sum the values of each tuple with the same tag...so that:

```
sum_of_all_values_with_tag_A() = 1000

sum_of_all_values_with_tag_B() = 1000 
```

I can't figure out a simple Pythonic way of doing that.

```
sum(set(value for tag_id, value in my_list)) 
```

...returns the sum of ALL the values.

I suppose I can wrap that with a for or a while loop, so that only tuples with the tag I want to sum are touched by that expression...? I need to sum the values associated with both tags...resulting in two different totals, differentiated as above. But can't quite grok an elegant syntax for such a thing.

This is happening inside of a pre-existing function. Would be great to do it without nesting functions.

Any suggestions are appreciated!

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-03-30T18:56:35.150

Use a generator expression to sum per tag:

```
sum(val for tag, val in my_list if tag == tag_A) 
```

You could *sort* on the tags then use `itertools.groupby` to create per-tag groups and sums:

```
from itertools import groupby
from operator import itemgetter

key = itemgetter(0)  # tag
sums = {tag: sum(tup[1] for tup in group)
        for tag, group in groupby(sorted(my_list, key=key), key=key)} 
```

This would produce a dictionary mapping tags to per-tag sum:

```
>>> from itertools import groupby
>>> from operator import itemgetter
>>> tag_A, tag_B = 'A', 'B'
>>> my_list = [(tag_A, 100), (tag_A, 200), (tag_A, 300), (tag_A, 400), (tag_B, 400), (tag_B, 600)]
>>> key = itemgetter(0)  # tag
>>> sums = {tag: sum(tup[1] for tup in group)
...         for tag, group in groupby(sorted(my_list, key=key), key=key)}
>>> print sums
{'A': 1000, 'B': 1000} 
```

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2013-03-30T19:14:21.343

# Approach

Put your data into a `defaultdict(list)`. Summarize that.

# Code

```
from collections import defaultdict
my_list = [('tag_A', 100), ('tag_A', 200), ('tag_A', 300), ('tag_A', 400), ('tag_B', 400), ('tag_B', 600)]

d = defaultdict(list)
for tag, num in my_list:
    d[tag].append(num) 
```

# Test

```
>>> from collections import defaultdict
>>> my_list = [('tag_A', 100), ('tag_A', 200), ('tag_A', 300), ('tag_A', 400), ('tag_B', 400), ('tag_B', 600)]
>>> 
>>> d = defaultdict(list)
>>> for tag, num in my_list:
...     d[tag].append(num)
... 
>>> from pprint import pprint
>>> pprint(dict(d))
{'tag_A': [100, 200, 300, 400], 'tag_B': [400, 600]}
>>> 
>>> pprint({k: sum(v) for k, v in d.iteritems()})
{'tag_A': 1000, 'tag_B': 1000} 
```

# Alternative summary routine

```
def summarize_by_tag(d):
    for k, v in d.iteritems():
        print k, sum(v)

>>> summarize_by_tag(d)
tag_A 1000
tag_B 1000 
```

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2013-03-31T00:00:16.993

As in other answers I would just use the `defaultdict` but unless you need the groups again later. Just sum them as you group. my_list could then be a very large iterable and you're not storing the whole thing in memory.

```
from collections import defaultdict
my_list = [('tag_A', 100), ('tag_A', 200), ('tag_A', 300), ('tag_A', 400), ('tag_B', 400), ('tag_B', 600)]
result = defaultdict(int)
for tag, value in my_list:
    result[tag] += value
print result

defaultdict(<type 'int'>, {'tag_A': 1000, 'tag_B': 1000}) 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-03-30T21:30:14.790

without importing anything. .

```
mysum={}
my_list = [('tag_A', 100), ('tag_A', 200), ('tag_A', 300), ('tag_A', 400), ('tag_B', 400), ('tag_B', 600)]
for x in my_list:
    mysum.setdefault(x[0],0)
    mysum[x[0]]+=x[1]
print mysum 
```

output::

```
{'tag_A': 1000, 'tag_B': 1000} 
```

# mobile - 使模块也可以与移动主题一起使用

> ID：15722224
> 
> 赞同：0
> 
> 时间：2013-03-30T18:55:35.047
> 
> 标签：mobile, module, prestashop

我希望我的构建模块也可以加载到移动主题中。我的模块在完整主题上正常工作。如何让我的模块与移动主题挂钩？

我尝试了公共函数 hookMobileHeader($params)，但它不起作用。

谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-01-06T19:55:35.093

您可以将您的钩子放在您的主题示例 {hook h="hook_of_your_module"} for hookMobileHeader 的移动文件夹中的 index.tpl 中，您可以为您的模块分配 js 和 css 文件。

# php - 在数组中查找键，并在该键中使用 array_push

> ID：15722227
> 
> 赞同：0
> 
> 时间：2013-03-30T18:56:01.490
> 
> 标签：php, arrays, multidimensional-array

我有一个带有随机键的数组（它是一个要推送到 json 的菜单构建器）。所以在这个多维中我试图 array_push 一些更多的细节。但事情是这样的，我不知道数组中的键或维度。我只知道钥匙。

所以我想做的是下面。

```
$arr[unique_key1] = value;
$arr[unique_key1][unique_key2] = 'value';
$arr[unique_key1][unique_key2][unique_key3] = 'value';
$arr[unique_key1][unique_key2][unique_key3][unique_key4] = 'value';

$key = unique_key4; // (example) key to look for and array push

if (array_key_exists($key, $arr)) { // check to be sure, should be there
    // here I want to loop until i found the specific key, and on that place array_push
}
else {
    // error handeling
} 
```

此示例中的 $arr 很简单，但真正的 $arr 在不同的层中包含大约 800 个条目。

所以总结一下：

1.  在大数组中查找键（它仍然是唯一的）
2.  array_push 到数组的那一部分。

非常感谢

编辑：解释得更详细，不够清楚

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-30T19:48:17.310

我认为这就是你想要的......从下面的代码中你会知道关键并做你想做的......

```
 if ($array_in_which_we_can_add = multi_array_key_exists($key, $arr)) { 
        array_push($array_in_which_we_can_add, 'crap I want to add');
    }
    else {
        // error handeling
    }

function multi_array_key_exists( $needle, $haystack ) {

foreach ( $haystack as $key => $value ) :

    if ( $needle == $key )
        return $key;

    if ( is_array( $value ) ) :
         if ( multi_array_key_exists( $needle, $value ) == true )
            return true;
         else
             continue;
    endif;

endforeach;

return false;} 
```

**编辑：**

这将完全符合您的要求

```
if ($array_in_which_we_can_add = multidimensionalArrayMap($needle, $haystack)) { 
   print_r($array_in_which_we_can_add);
}
else {
    // error handeling
}

$flag = 0;

function multidimensionalArrayMap( $needle, $haystack ) {
    $newArr = array();

    foreach( $haystack as $key => $value )
    {
        if($key == $needle)
        $flag = 1;
        $newArr[ $key ] = ( (is_array( $value ) && $key != $needle)  ? multidimensionalArrayMap($needle, $value ) :'crap I want to add' );
    }

    if($flag)
    return $newArr;

    return false;

    } 
```

# character-encoding - 使用 wget 更改文本编码下载文件

> ID：15722228
> 
> 赞同：5
> 
> 时间：2013-03-30T18:56:05.473
> 
> 标签：character-encoding, wget

我想要得到的网页有 windows-1251 字符集编码。有没有一种方法不仅可以简单地下载此页面，而且可以自动.. 嗯.. 将里面的文本转换为 uft-8？

我试图向 wget 添加其他参数，例如

```
--header='Accept-Charset: utf-8' 
```

但没有运气。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-30T19:07:12.467

您可以使用

```
iconv -f ISO-8859-1 -t UTF-8 ./index.html > ./utf.html 
```

转换编码。见[https://wiki.archlinux.org/index.php/Convert_a_text_file%27s_encoding](https://wiki.archlinux.org/index.php/Convert_a_text_file%27s_encoding)

# php - 解码 JSON $_POST

> ID：15722231
> 
> 赞同：1
> 
> 时间：2013-03-30T18:56:27.910
> 
> 标签：php, mysql, arrays, http-post

好的，我会再试一次，多次询问，但似乎并没有让自己清楚。

首先，我在网页上运行了一个 AJAX 脚本，允许我从游戏中提取数据。

然后使用 POST 方法将此数据发送到 PHP 'api' 页面。

我可以在浏览器的控制台中看到数据实际上正在运行。

这是数据流示例：[https ://docs.google.com/document/d/1FLHiWBSBqqm7N8LvzISmiedQKxsqYM572iAT4CQpjP8/edit?usp=sharing](https://docs.google.com/document/d/1FLHiWBSBqqm7N8LvzISmiedQKxsqYM572iAT4CQpjP8/edit?usp=sharing)

现在这是我的问题：

我可以看到数据正在被解析为 PHP。PHP代码如下：

```
<?php
        // set headers for API
        header('Access-Control-Allow-Origin: '.$_SERVER['HTTP_ORIGIN']);
        header('Access-Control-Allow-Methods: POST, GET, OPTIONS');
        header('Access-Control-Max-Age: 1000');
        header('Access-Control-Allow-Headers: Content-Type');
        header('Content-type: application/json');

$m = false;

if(preg_match('/http\:\/\/prodgame([0-9]+)\.lordofultima\.com/',$_SERVER['HTTP_ORIGIN'],$m))
    { $m = $m[1]; }

if(empty($m)) { die('Invalid Origin.'); }

if(!empty($_POST['data_type']))
        {
        $sender     = $_POST['sender'];
        $alliance   = $_POST['alliance'];
        $request    = $_POST['data_type'];
        $data       = $_POST['data'];

        // Response to Alliance Info Exporter
        $json       = array(
            'message'   => 'recieved.',
            'data'      => array(),
            'error'     => false
        );

        // handle data types

        switch($request)
            {
            case 'connection_test': $json['message'] = 'Welcome to our server2\. Your are connected!'; break;
            case 'member'   : /* Code for member request */         break;
            case 'city' :   /* Code for member request */ break;
            case 'support'  : /* Code for support request */        break;
            default         :  $json['message'] = 'Nothing Done.';  break;
            }

        // Respond
        die(json_encode($json));
        }
die('No Access.');

?> 
```

数据是从我在玩这个在线游戏时在本地运行的 .js 文件中解析出来的。创建者发布了 PHP 示例，显然是希望使用它的人将所需的代码添加到 switch/case 语句中以操作数据。

现在，我尝试使用带有各种选项（$_POST 或 $POST('data' 或 PHP 中定义的变量）的 json_decode 来提取数据，只是为了验证数据。没有任何效果。

var_dump 对我不起作用，因为客户端 js 确实使我无法根据提供的内容修改服务器端 PHP 上的代码 - 客户端在我触发发送到服务器功能之前会查找响应。

我可能做错了什么。正如您从 google 链接数据中的 HTML POST 输出中看到的那样，*正在*传输数据。如何访问和操作这些数据？我的最终目标是在数据进入 SQL 数据库时对其进行解析，但我需要确保首先处理它。

我的环境 - 现在在开发中我正在使用本地机器，在 Linux 操作系统上运行的 Apache 上的 PHP。我也加载了 mySql，但现在没有播放。所有最新版本，昨天刚刚安装了开发环境。

更多信息 - 我尝试在 case 语句以及文档前面的代码中插入此代码，使用此或 var_export 获得的最佳输出是 0 字节文件或仅显示 NULL 的文件：

```
$data1 = json_decode($_POST, $assoc = null);
$f = fopen("/var/www/aix/data/alliance6.txt", "w");
fwrite($f, $data1);
fclose($f); 
```

另一点信息 - 从我可以看出 javascript 中的发送到服务器函数的调用如下：

```
// send to server
req = main.ajax.send({
alliance : {
    id : a.id,
    name : a.name,
    members : a.members,
    score : a.total_score                                       
},
data_type:type,
data:json
});                 
if(req){
req.success(function(x){
main.aix.set_loading(tab.index,"Data sent to server!",1000);
main.aix.get_saved(id,type).sent = true;

});
}
});
}
else
{ main.aix.set_loading(tab.index,"This data has already been sent.",2000); }
}
if(typeof callback == "function")
{ callback(json); }
}
}, 
```

所以对上面的更新：下面 Wayne 提供的 echo 命令确实给了我 $data 变量的数据结构。现在是一个后续问题：如何将我获取的所有数据（发送方、数据阵列等）转换为 SQL 表？如果定期更新/刷新我创建的表，我将如何对数据库中的数据进行重复数据删除？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-30T19:08:47.723

如果我理解您的问题，您将无法阅读 $_POST []。您确定 javascript 正在发送正确的数据吗？如果没有，我会使用 jquery：

```
$.post("script.php",$("#FormForExample").serialize()); 
```

这将发送正确的数据。如果这不是你的问题，请原谅。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-30T19:11:39.133

我想你自己有点糊涂了。您正在尝试解码未以 JSON 编码的 POST 变量。JSON 在脚本末尾输出：

```
// Respond
die(json_encode($json)); 
```

基本上，您会担心 JSON，即使您的脚本在所有处理完成后将其转储到页面上时才处理 JSON。

如果您希望操作传入的数据，您应该更仔细地查看 $data 数组：

```
$sender     = $_POST['sender'];
$alliance   = $_POST['alliance'];
$request    = $_POST['data_type'];
$data       = $_POST['data']; 
```

顺便说一句，从您链接的 POST 数据来看， $data 将是一个多维数组。

执行以下操作，您应该会看到正在处理的结构类型：

```
$sender     = $_POST['sender'];
$alliance   = $_POST['alliance'];
$request    = $_POST['data_type'];
$data       = $_POST['data'];

echo '<pre>';
var_dump($data);
echo '</pre>; 
```

或者试试这个：

```
foreach($data as $dataInfo){
    foreach($dataInfo as $key => $info){
        echo $key . ': ' . $info . '<br>';
    }
    echo '<hr>';
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-02T15:53:42.423

经过一些实验，我发现这很好用

```
$log_to_file = print_r($_POST,$return=true);
$f = fopen("/var/www/aix/data/member.txt", "w");
fwrite($f, $log_to_file);
fclose($f); 
```

通过运行它并使用已知的较小数据集，我能够提取正在解析的数组的完整结构。我不得不使用一个较小的数据集，因为 print_r() 有一个它返回的行缓冲区，之后它会被切断。我确信有办法解决这个问题，但我现在得到了我需要的东西，所以不得不推迟进一步的实验。

```
Array
(
    [alliance] => Array
        (
            [id] => 134
            [name] => Alliance1
            [members] => 9
            [score] => 17187
        )

    [data_type] => city
    [data] => Array
        (
            [0] => Array
                (
                    [id] => 16515340
                    [owner_id] => 3475
                    [owner] => Player1
                    [coords] => '268:252
                    [name] => AC2013
                    [score] => 11863
                    [city_type] => castle
                    [location] => land
                )

            [1] => Array
                (
                    [id] => 16515335
                    [owner_id] => 3475
                    [owner] => Player1
                    [coords] => '263:252
                    [name] => AC2013
                    [score] => 7
                    [city_type] => castle
                    [location] => water
                )

            [2] => Array
                (
                    [id] => 17891610
                    [owner_id] => 3523
                    [owner] => Player2
                    [coords] => '282:273
                    [name] => City of Repoman9900
                    [score] => 1978
                    [city_type] => castle
                    [location] => water
                )

            [3] => Array
                (
                    [id] => 10616856
                    [owner_id] => 73
                    [owner] => Player2
                    [coords] => '024:162
                    [name] => 1killer
                    [score] => 1308
                    [city_type] => castle
                    [location] => water
                )

            [4] => Array
                (
                    [id] => 10813465
                    [owner_id] => 2862
                    [owner] => Player3
                    [coords] => '025:165
                    [name] => City of vuvuzea991
                    [score] => 1091
                    [city_type] => castle
                    [location] => land
                )

            [5] => Array
                (
                    [id] => 17367317
                    [owner_id] => 84
                    [owner] => Player4
                    [coords] => '277:265
                    [name] => Dreadland
                    [score] => 776
                    [city_type] => castle
                    [location] => water
                )

            [6] => Array
                (
                    [id] => 2162850
                    [owner_id] => 2989
                    [owner] => Player5
                    [coords] => '162:033
                    [name] => City of Dinoeyez
                    [score] => 157
                    [city_type] => castle
                    [location] => water
                )

            [7] => Array
                (
                    [id] => 2818192
                    [owner_id] => 556
                    [owner] => Player6
                    [coords] => '144:043
                    [name] => City of wildfire123
                    [score] => 7
                    [city_type] => castle
                    [location] => water
                )

        )

    [sender] => Array
        (
            [world] => Array
                (
                    [id] => 232
                    [name] => Server 4 
                    [number] => NaN
                )

            [alliance] => Array
                (
                    [id] => 2
                    [name] => Alliance2
                )

            [player] => Array
                (
                    [id] => 98
                    [name] => SuperUser
                )

            [browser] => Array
                (
                    [type] => Chrome
                    [version] => 25.0.1364.160
                )

            [aix_version] => 1.00
        )

) 
```

# c# - 如何使用 BackgroundWorker c# 实现暂停和恢复功能

> ID：15722232
> 
> 赞同：1
> 
> 时间：2013-03-30T18:56:28.227
> 
> 标签：c#, backgroundworker, manualresetevent

我想用 BackgroundWorker 实现暂停恢复和取消功能。我有一个用户控件，并且所有与后台工作人员相关的代码都写在用户控件中。我只是在流布局控件上添加用户控件，就像用户单击按钮一样多。我无法 使用**ManualResetEvent实现****暂停和恢复功能**，但无论如何我无法做到。所以在这里我粘贴我的用户控件类相关代码和我的表单代码。

 **```
public partial class ucBackgroundWorker : UserControl
{
    System.ComponentModel.BackgroundWorker bgWorker = null;
    public event Action<string, EventArgs> Done;
    public event Action<string, EventArgs> Cancel;
    private static bool m_continue = true;
    private ManualResetEvent _resetEvent = new ManualResetEvent(false);
    //Semaphore sWaiter = new Semaphore(0, 1);

    public ucBackgroundWorker()
    {
        InitializeComponent();
        bgWorker = new System.ComponentModel.BackgroundWorker();
        bgWorker.WorkerSupportsCancellation = true;
        bgWorker.WorkerReportsProgress = true;
        bgWorker.DoWork += new DoWorkEventHandler(backgroundWorker1_DoWork);
        bgWorker.RunWorkerCompleted += new RunWorkerCompletedEventHandler(backgroundWorker1_RunWorkerCompleted);
        bgWorker.ProgressChanged += new ProgressChangedEventHandler(backgroundWorker1_ProgressChanged);
    }

    public void Run(int counter)
    {
        if (!bgWorker.IsBusy)
        {
            bgWorker.RunWorkerAsync(counter);
        }
        _resetEvent.Set();
    }

    private void backgroundWorker1_DoWork(object sender, DoWorkEventArgs e)
    {
        int input = int.Parse(e.Argument.ToString());

        this.BeginInvoke((MethodInvoker)delegate
        {
            lblStatus.Text = "Running";
        });

        for (int i = 1; i <= input; i++)
        {
            _resetEvent.WaitOne();
            Thread.Sleep(500);
            (sender as System.ComponentModel.BackgroundWorker).ReportProgress(i * 10);
            if ((sender as System.ComponentModel.BackgroundWorker).CancellationPending)
            {
                this.BeginInvoke((MethodInvoker)delegate
                {
                    lblStatus.Text = "Cancel";
                });

                e.Cancel = true;
                return;
            }
        }
        Thread.Sleep(1000);
    }

    // This event handler deals with the results of the 
    // background operation. 
    private void backgroundWorker1_RunWorkerCompleted(object sender, RunWorkerCompletedEventArgs e)
    {
        // First, handle the case where an exception was thrown. 
        if (e.Error != null)
        {
            MessageBox.Show(e.Error.Message);
        }
        else if (e.Cancelled)
        {
            if (Cancel != null)
                Cancel(this.Name, EventArgs.Empty);
        }
        else
        {
            this.BeginInvoke((MethodInvoker)delegate
            {
                lblStatus.Text = "Done";
            });

            if (Done != null)
                Done(this.Name, EventArgs.Empty);
        }
        _resetEvent.Reset();
    }

    // This event handler updates the progress bar. 
    private void backgroundWorker1_ProgressChanged(object sender, ProgressChangedEventArgs e)
    {
        pBar.Refresh();
        pBar.Value = e.ProgressPercentage;
    }

    private void btnCancel_Click(object sender, EventArgs e)
    {
        if (bgWorker.IsBusy)
        {
            bgWorker.CancelAsync();
        }
    }

    private void btnPause_Click(object sender, EventArgs e)
    {
        if (bgWorker.IsBusy)
        {
            if (btnPause.Text.ToUpper() == "PAUSE")
            {
                btnPause.Text = "Resume";
                m_continue = false;
                _resetEvent.Reset();
            }
            else if (btnPause.Text.ToUpper() == "RESUME")
            {

                btnPause.Text = "Pause";
                m_continue = true;
                _resetEvent.Set();

            }
        }
    }
}

    public partial class Form3 : Form
        {
            ucBackgroundWorker ucBgWorker = null;

            public Form3()
            {
                InitializeComponent();
            }

            private void btnStart_Click(object sender, EventArgs e)
            {
                ucBgWorker = new ucBackgroundWorker();
                ucBgWorker.Done += new Action<string, EventArgs>(Worker_Done);
                ucBgWorker.Cancel += new Action<string, EventArgs>(Worker_Cancel);
                flowLayoutPanel1.Controls.Add(ucBgWorker);
                ucBgWorker.Run(10);
            }

            void Worker_Done(string arg, EventArgs evtarg)
            {
                label1.Text =arg + " Done One";
                //System.Threading.Thread.Sleep(1000);
            }

            void Worker_Cancel(string arg, EventArgs evtarg)
            {
                label1.Text = arg + " Cancel Click";
                //System.Threading.Thread.Sleep(1000);
            }

        } 
```

在这里，我附上了 mu UI 的图片。 ![在此处输入图像描述](../Images/9a8288e26d76b4acc7ebeb9bb1f9b460.png)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-30T19:04:42.630

将属性添加到您的类中，该属性将持有 bool-Sleep 。订阅该更改，如果它是 true，则将 thread.sleep 设置为某个大数字，然后订阅该数字变为 0，如果 bool 仍然为 True，则再次将其设置为大数字。这就是我现在想到的，现在肯定有更好的方法。**

# c++ - 两个类的公共类和变量 C++ 可以有相同的名称集吗？

> ID：15722233
> 
> 赞同：-2
> 
> 时间：2013-03-30T18:56:29.837
> 
> 标签：c++, class

我没有使用继承或多态性。创建每个类的实例并访问它们的公共类和变量会导致问题吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-30T19:08:54.767

### 简短的答案）

你似乎问了一个问题，然后问了它的反面。以下是答案：

> 两个类的公共类和变量 C++ 可以有相同的名称集吗？

是的。

> 创建每个类的实例并访问它们的公共类和变量会导致问题吗？

不。

* * *

### 长答案

在命名空间或类型（例如类类型）内声明的名称被*封装*。*它们与在其他*命名空间或类型中声明的名称不冲突。唯一的例外是它们的*使用*，在某些情况下可能会模棱两可。

# javascript - 替换推文按钮图标

> ID：15722237
> 
> 赞同：1
> 
> 时间：2013-03-30T18:56:35.303
> 
> 标签：javascript, twitter

我有一个动态创建的 Twitter 分享按钮：

html:

```
 <a id="twitter_publish" href="https://twitter.com/share" class="twitter-share-button" data-via="3imit" data-count="none"></a>
    <script>!function(d,s,id){var js,fjs=d.getElementsByTagName(s)[0];if(!d.getElementById(id)){js=d.createElement(s);js.id=id;js.src="//platform.twitter.com/widgets.js";fjs.parentNode.insertBefore(js,fjs);}}(document,"script","twitter-wjs");</script> 
```

Javascript：

```
function tweetSetup() {
    $("#twitter_publish").remove();
    $(".twitter-share-button").remove();
    var tweet = $('<a>')
        .attr('href', "https://twitter.com/share")
        .attr('id', "twitter_publish")
        .attr('class', "twitter-share-button")
        .attr('data-lang', "en")
        .attr('data-via', "3imit")
        .attr('data-count', "none")
        .attr('data-text', "Take a look at this:")
        .attr('data-url', $("#some_link").val())
        .text('Tweet');

    $("#facebook_publish").after(tweet);
    twttr.widgets.load();
    $("#twitter-share-button").show();
} 
```

我想用我自己的图标替换默认的推文图标。我怎样才能做到这一点？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-30T19:05:25.127

[Twitter 在这里](https://dev.twitter.com/docs/tweet-button)有一个如何做到这一点的例子（滚动到底部，“建立你自己的推文按钮”）：

```
<style type="text/css" media="screen">
  #custom-tweet-button a {
    display: block;
    padding: 2px 5px 2px 20px;
    background: url('https://twitter.com/favicons/favicon.ico') 1px center no-repeat;
    border: 1px solid #ccc;
  }

</style>

<div id="custom-tweet-button">
  <a href="https://twitter.com/share?url=https%3A%2F%2Fdev.twitter.com%2Fpages%2Ftweet-button" target="_blank">Tweet</a>
</div> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-29T22:21:30.700

检查我对这个问题的回答：

[twitter 按钮，带有事件和自定义设计](https://stackoverflow.com/questions/15413159/twitter-button-with-events-and-custom-design)

您可以有一个自定义链接并仍然使用 javascript API。对于您的情况，**您的链接应指向** [https://twitter.com/intent/tweet](https://twitter.com/intent/tweet) ，并且**您应该将所需的查询参数添加**到 url，例如：

```
<a href="https://twitter.com/intent/tweet?url=http%3A%2F%2Fwww.yoururl.com&text=your%20text">Tweet</a> 
```

# php - 添加评论后，字母会出现在php网站的评论框中。如何限制每行显示的字母？

> ID：15722242
> 
> 赞同：0
> 
> 时间：2013-03-30T18:57:21.453
> 
> 标签：php, css

我在这里做了一个网站：http: [//aasiskos.webpages.auth.gr/1905_YPA/Rating.php](http://aasiskos.webpages.auth.gr/1905_YPA/Rating.php)。您可以通过输入以下内容在登录框中进入系统：

用户：mpa@mpa.com 通行证：123a

如果您按下绿色框，您可以添加评论。问题是，如果你写了很多信，那么它们似乎不在评论框中。我已经尝试了所有方法，但我找不到任何有用的标签来解决问题。如果你向下滚动页面，你会看到我所做的评论的字母，出现在盒子外面。我将如何解决它以及在哪个页面？当前页面（Rating.php），添加新评论页面（new_comment.php）还是在css中？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-30T19:00:22.690

添加`word-wrap:break-word`到您的 CSS。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-30T19:07:19.543

你的代码一开始就有一些错误；

*   根据 JS 标准，ID 必须是唯一的
*   你的 div 没有关闭`</div>`

但这是你的派对

并添加到 CSS：

```
word-wrap:break-word 
```

祝你好运！

# java - How to make a Calculator that add automaticly

> ID：15722243
> 
> 赞同：2
> 
> 时间：2013-03-30T18:57:23.730
> 
> 标签：java, string, netbeans, int, settext

In Java, NetBeans, I'm trying to make a calculator that adds automatically when you press a button. So for example when you hit 1 the previous amount on the calculator is added by 1\. If you hit 2 the previous amount is added by 2\. etc.

int a = 3;

However on the display.setText(a + display); it comes up with the error that they have to be strings, so how do I add 2 strings together?

In theory it should be 3 as display is = to 0.

How would I display the value of both the numbers?

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-30T19:00:13.443

You'll need to cast `Strings` to `Integers` to perform math. To display the result, you'll want to convert the Integer result back to a String. For example

```
String a = "42";
String b = "6";

int addition = Integer.parseInt(a) + Integer.parseInt(b);
display.setText(Integer.toString(addition)); 
```

Given that this is a calculator and you know that they can only type numbers, then you should be fine converting these arbitrary Strings to numbers. But, note that in general, `Integer.parseInt()` may fail if the input is not a number.

UPDATE: basic blueprint for implementing integer calculator

```
int currentValue = 0; //at the beginning, the user has not typed anything

//here, I am assuming you have a method that listens for all the button presses, then you could
//call a method like this depending on which button was pressed
public void buttonPressed(String value) {
    currentValue += Integer.parseInt(value);
    calculatorLabelDisplay.setText(Integer.toString(currentValue));
}

//here, I am assuming there is some button listener for the "clear" button
public void clearButtonPressed() {
    currentValue = 0;
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-30T19:04:39.627

If `display` is a Swing GUI component, for example a JLabel, you cannot use it in arithmetic expressions. You can't add or substract labels or textfields. You have to do these steps:

1.  Read the text input as a String
2.  Convert the String into a numeric variable, e.g. Integer
3.  Calculate your term using the Integer created in step (2)

You can try it like this:

```
String textFieldInput = display.getText();

int sum = 10;   // This might become a private attribute of your object instead of a local var?

int newNumber = 0;
try {
    newNumber = Integer.parseInt(textFieldInput);
} catch (Exception ex) {
    // Watch out: Parsing the number string can fail because the user can input anything, like for example, "lol!", which isn't a number
    System.out.println("Error while trying to parse the number input. Did you enter your name or something?!");
}

sum += newNumber;

System.out.println ("New sum = " + sum);
display.setText(Integer.toString(sum)); 
```

# grails - 从 grails 中删除 log4j

> ID：15722248
> 
> 赞同：0
> 
> 时间：2013-03-30T18:57:31.963
> 
> 标签：grails

我正在使用 grails 2.1.1。我想完全删除 log4j，因为它会产生问题。从我的 grails 应用程序中删除 log4j 的最佳方法是什么？我想暂时没有日志记录

# jquery - jQuery - 以同一类为目标的特定元素

> ID：15722254
> 
> 赞同：0
> 
> 时间：2013-03-30T18:58:23.013
> 
> 标签：jquery

如果我不够清楚，我是 jq 的新手，请原谅。

小提琴：

```
http://jsfiddle.net/tWHpA/1/ 
```

在悬停时，两个 div 都向上滑动，我如何让它只向上滑动悬停的 div？

html:

```
<div class="span1 green 1"><div class="hover">tile title</div><a href="#page2" rel="ajax"></a></div>
<div class="green 2"><div class="hover">tile1 title</div></div> 
```

CSS：

```
.green {width: 100px; height: 100px; background: red; color: white; position: relative; z-index:100;}      
.hover {width: 100px; height: 50px; background: yellow; position: absolute; bottom:0; display:none; z-index:-1;   } 
```

jq:

```
$(document).ready(function() {

    $('.green').addClass('.hover');

   $('.green').hover(function() {

          $('.hover').stop(true, true).slideDown('1000')

    },

    //Mouseout, fadeOut the hover class

    function() {

        $('.hover').stop(true, true).slideUp('1000');

    }).click(function() {

        //Add selected class if user clicked on it
        $(this).addClass('selected');

    });
}); 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-30T18:59:26.663

在您的事件处理程序中，使用`$(this)`而不是`$(".hover")`.

这将仅对正在接收事件的元素而不是所有元素进行操作。 `this`由 jQuery 设置为触发事件的元素。

```
$('.green').hover(function() {
    $(this).stop(true, true).slideDown('1000')
},function() {
    $(this).stop(true, true).slideUp('1000');
}).click(function() {
    //Add selected class if user clicked on it
    $(this).addClass('selected');
}); 
```

我认为你有一个逻辑问题，因为一旦你向上滑动，不再悬停的元素，那么就没有办法再次将鼠标放在它上面让它下降。

稍微改变你的逻辑后，你可以在这里看到它的工作原理：http: [//jsfiddle.net/jfriend00/6Szyb/](http://jsfiddle.net/jfriend00/6Szyb/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-30T19:11:26.320

试试这个：

```
$(document).ready(function () {

    $('.green').addClass('.hover');
    $('.green').hover(function () {
        $(this).find('.hover').stop(true, true).slideDown('1000')
    },

    function () {
        $(this).find('.hover').stop(true, true).slideUp('1000');

    }).click(function () {

        //Add selected class if user clicked on it
        $(this).addClass('selected');
    });
}); 
```

# javascript - java 6 与 java 7 string.matches 与正则表达式

> ID：15722257
> 
> 赞同：4
> 
> 时间：2013-03-30T18:58:33.467
> 
> 标签：javascript, regex, url, gxt

我在使用 string.matches(regex) 时遇到了 url 验证器的问题。以下在 Java 6 中工作，但在 Java 7 中不工作。

```
regex = "^http[s]?://(([^/:\\.[:space:]]+(\\.[^/:\\.[:space:]]+)*)|([0-9](\\.[0-9]{3})))(:[0-9]+)?((/[^?#[:space:]]+)(\\?[^#[:space:]]+)?(\\#.+)?)?$" 
```

此代码位于客户端，使用 GWT/GXT 在将用户输入发送到服务器端之前对其进行验证。

至少可以说令人费解。

这是方法：

```
public boolean validateURL(String url) {
    return ((url != null) && url.matches(VALID_URL_REGEX));
} 
```

其中 VALID_URL_REGEX 等于上面的正则表达式

下面是调用 validateURL 方法的代码：

```
 this.serverUrlTextField.addValidator(new AbstractValidator<String>() {
        @Override
        public List<EditorError> validate(Editor<String> field, String value) {
            String url = serverUrlTextField.getText();
            if (!Util.validateURL(url)) {
                okButton.setEnabled(false);
                return createError(new DefaultEditorError(field, INVALID_URL, value));
            }
            okButton.setEnabled(true);
            return null;
        }
    }); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-30T21:24:41.773

看起来 GXT 有一个`com.google.gwt.regexp.shared.RegExp`与 JavaScript 更兼容的特殊类。我还以应该在 JavaScript 中工作的方式修改了正则表达式。

```
String p = "^(http[s]?://)?(([^/:\\.\\s]+(\.[^/:\\.\\s]+)*)|([0-9](\\.[0-9]{3})))(:[0-9]+)?((/[^?#\\s]+)(\\?[^#\\s]+)?(\\#.+)?)?$";
RegExp r = RegExp.compile(p, "i");
String url = serverUrlTextField.getText();
if (!r.test(url)) {
    okButton.setEnabled(false);
    return createError(new DefaultEditorError(field, INVALID_URL, value));
}
okButton.setEnabled(true);
return null; 
```

# symfony - 嵌入式样式是不好的做法吗？

> ID：15722258
> 
> 赞同：1
> 
> 时间：2013-03-30T18:58:34.447
> 
> 标签：symfony

我的项目中有许多模板，它们彼此略有不同。我发现在我的 css 文件中创建新的“部分”来适应这一点很麻烦。

在我的模板中放这样的东西会皱眉吗？

```
{% block stylesheets %}
{{ parent() }}
<style>

  #chart {
    height: 350px;
  }
  .aside h4 {
    margin: 0;
    padding-bottom: 10px;
  }

</style>
{% endblock %}

{% block content %]
... 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-30T19:03:37.417

无论是否不满意，请始终保持[干燥](http://en.wikipedia.org/wiki/Don%27t_repeat_yourself)！如果您有可能在其他地方使用代码行，请将其移到可参考的块中。CSS应该很容易保持干燥。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-30T19:06:40.233

没有嵌入式样式表也不错。这取决于具体情况。根据您的说法，如果您可以从头开始编写css文件，则应该这样做或依赖模板的css，最好使用嵌入式（如果项目很小）。

如果您发现编写嵌入式样式 css 需要时间，您可以为某些元素（如标题、输入字段、按钮）编写通用 css。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-30T19:11:00.437

通常，我使用这种技术：

1）每个模板在正文中生成特定的类或一些封装的DIV

```
 <body class="myTemplate">...

 <body class="otherTemplate">... 
```

2）我指定一般风格，如

```
h1 { color: red; } 
```

3）然后我使用上下文选择器为特定模板指定特殊样式：

```
.myTemplate h1 { color: green; }
.otherTemplate h1 { color: blue; } 
```

这样我就避免了动态样式表，因为将它们引入项目通常是个坏主意。它是许多错误的来源，并且动态代码往往会变得无法控制。

# ruby - Compare strings and print out matches (Ruby)

> ID：15722265
> 
> 赞同：2
> 
> 时间：2013-03-30T18:59:17.193
> 
> 标签：ruby, arrays, string

Say I have an array of 3 strings:

```
strings = ["/I/love/bananas", "/I/love/blueberries", "/I/love/oranges"] 
```

I want to compare my 3 strings and print out this new string:

```
new_string = "/I/love" 
```

I don't want to match char by char, only word by word. Do anyone have a smart way to do that?

As a token of good will I have made this ugly code to show what functionality I am looking for:

```
strings = ["/I/love/bananas", "/I/love/blueberries", "/I/love/oranges"]
benchmark = strings.first.split("/")
new_string = []

strings.each_with_index do |string, i|
  unless i == 0
    split_string = string.split("/")
    split_string.each_with_index do |elm, i|
      final_string.push(elm) if elm == benchmark[i] && elm != final_string[i]
    end
  end
end

final_string = final_string.join("/")

puts final_string # => "/I/love" 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-30T20:04:45.267

You can try the below:

```
p RUBY_VERSION
strings = ["/I/love/bananas", "/I/love/blueberries", "/I/love/oranges"]
a = strings.each_with_object([]) { |i,a| a << i.split('/') }
p (a[0] & a[1] & a[2]).join('/') 
```

*or*

```
strings = ["/I/love/bananas", "/I/love/blueberries", "/I/love/oranges"]
a = strings.each_with_object([]) { |i,a| a << i.split('/') }.reduce(:&).join('/')
p a 
```

*Output:*

```
"2.0.0"
"/I/love" 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-03-30T21:27:36.297

This is the same basic approach as @iAmRubuuu, but handles more than three strings in the input and is more concise and functional.

```
strings.map{ |s| s.split('/') }.reduce(:&).join('/') 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-30T19:37:00.910

```
str = ["/I/love/bananas", "/I/love/blueberries", "/I/love/oranges"]

tempArr = []

str.each do |x|
    tempArr << x.split("/")
end
(tempArr[0] & tempArr[1] & tempArr[2]).join('/') #=> "/I/love" 
```

# deployment - Torque box - deploy additional jar file (rvm)

> ID：15722266
> 
> 赞同：1
> 
> 时间：2013-03-30T18:59:17.720
> 
> 标签：deployment, db2, jrubyonrails, torquebox

I have Jruby on rails application connected with DB2 C-Express. My problem is that the torquebox is not able to find the additional jar driver which I am using to connect the database and the application.

I have [found](http://markmail.org/thread/vt5hexswp3ofgrgg#query%3a+page:1+mid%3azaovqokxjerpi3l7+state%3aresults) that if you have torque box install you should add this jar in the

```
torquebox-current/jboss/server/default/lib 
```

folder. The problem is that when I install the torque box following the official [documentation](http://torquebox.org/builds/getting-started/first-steps.html#first-steps-mac-linux) I use the "First Steps with RVM" way and I have not got the folder mention above - I just have the torque box gem.

What's the way to point the torque box gem where the jar is?

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-17T20:01:30.227

After deep looking through the jboss and TorqueBox files I was not able to solve the issue. Fortunately, I've got some help from torque box - [IRC Channel](http://torquebox.org/community/).

If you want to use db2 with WEBRICK you need to copy db2jcc.jar and db2jcc_license_cu.jar to jruby/lib (~/.rvm/rubies/jruby-*/lib) directory.

The good thing about TorqueBox is that

> TorqueBox automatically adds any jar files under the applications lib/ directory to the classpath of your application

So, just copy these files into your application lib/ directory.

# symfony - Sonata admin 覆盖的用户类

> ID：15722272
> 
> 赞同：3
> 
> 时间：2013-03-30T18:59:48.637
> 
> 标签：symfony, sonata-admin, sonata-user-bundle

我使用 SonataEasyExtendsBundle 扩展了 SonataUserBundle 并删除了一些字段。数据库表已正确创建。问题是尝试在管理界面中添加用户时（使用 SonataAdminBundle）。我正进入（状态：

> 请定义字段的`phone`类型`Sonata\UserBundle\Admin\Entity\UserAdmin`

这使我得出结论，Admin Bundle 没有选择我的自定义类，它使用默认类。

我的 config.yml：

```
sonata_user:
    security_acl:     false
    manager_type:     orm
    class:
        user:         Application\Sonata\UserBundle\Entity\User
        group:        Application\Sonata\UserBundle\Entity\Group 
```

我的应用程序\奏鸣曲\UserBundle\Resources\services.xml

```
<service id="sonata.user.admin.user" class="Application\Sonata\UserBundle\Admin\Entity\UserAdmin">
    <tag name="sonata.admin" manager_type="orm" group="%sonata.user.admin.groupname%" label="users" label_catalogue="SonataUserBundle" label_translator_strategy="sonata.admin.label.strategy.underscore" />
    <argument />
    <argument>Application\Sonata\UserBundle\Entity\User</argument>
    <argument>SonataAdminBundle:CRUD</argument>
    <call method="setUserManager">
        <argument type="service" id="fos_user.user_manager" />
    </call>
    <call method="setTranslationDomain">
        <argument>%sonata.user.admin.user.translation_domain%</argument>
    </call>
</service> 
```

问题是如何向 Sonata Admin 注册我的用户类，并最终取消注册默认类？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2014-04-13T19:13:43.970

我通过将正确的导入添加到 /app/config/config.yml 文件中解决了这个问题。

```
#/app/config/config.yml
imports:
    - { resource: parameters.yml }
    - { resource: security.yml }
    - { resource: '@ApplicationSonataUserBundle/Resources/config/services.xml' } 
```

新类是在上面发布的服务文件中定义的，它不是自动拾取的。

# c - 如何使用 win32 API 将标准输入重定向到 C 中的文件？

> ID：15722273
> 
> 赞同：2
> 
> 时间：2013-03-30T18:59:50.227
> 
> 标签：c, winapi, io-redirection

我正在尝试将 stdin 重定向到我选择的文件，在 C 程序（win32 API）内留下重定向 stderr 或 stdout 的可能性。

我正在编写一个我在 cygwin 上运行的 shell，期望的效果是让 cat < file 工作。

到目前为止，这是我的代码：

```
 static HANDLE createinputHandle(PCSTR filename, SECURITY_ATTRIBUTES sa)
    {
            return CreateFile(
                 filename,
                 GENERIC_READ,
                 FILE_SHARE_READ,
                 NULL,
                 OPEN_ALWAYS,
                 FILE_ATTRIBUTE_NORMAL,
                 NULL);
    }

    static VOID RedirectHandle(STARTUPINFO *psi, HANDLE hFile, INT opt)
    {
        if (hFile == INVALID_HANDLE_VALUE)
            return;

        psi->dwFlags |= STARTF_USESTDHANDLES;

        switch (opt) {
        case STD_INPUT_HANDLE:
            psi->hStdInput = GetStdHandle(STD_INPUT_HANDLE);
            psi->hStdInput = hFile;
            break;
        case STD_OUTPUT_HANDLE:
            psi->hStdOutput = GetStdHandle(STD_OUTPUT_HANDLE);
            psi->hStdOutput = hFile;
            break;
        case STD_ERROR_HANDLE:
            psi->hStdError = GetStdHandle(STD_ERROR_HANDLE);
            psi->hStdError = hFile;
            break;
        }

command_func() {
 STARTUPINFO si;
 PROCESS_INFORMATION pi;
 bool result;
 DWORD wait_result;
 HANDLE inHandle, outHandle, errHandle;
 SECURITY_ATTRIBUTES sa;

 ZeroMemory(&si, sizeof(si)); //macro to init with zero's
 si.cb = sizeof(si);
 ZeroMemory(&pi, sizeof(pi));
 ZeroMemory(&sa, sizeof(sa));
 sa.bInheritHandle = TRUE;

 inHandle = INVALID_HANDLE_VALUE;
 outHandle = INVALID_HANDLE_VALUE;
 errHandle = INVALID_HANDLE_VALUE;

     if(inputFile != NULL) {

        inHandle = createinputHandle(inputFile, sa);
            SetHandleInformation(inHandle, HANDLE_FLAG_INHERIT, HANDLE_FLAG_INHERIT);
            //added
        RedirectHandle(&si, inHandle, STD_INPUT_HANDLE);

     }

result = CreateProcess(
            NULL,
            cmd, /*if you want to test this, you need to change cmd to something like "ls -l" */
            NULL,
            NULL,
            TRUE,
            0,
            NULL,
            NULL,
            &si,
            &pi); 
} 
```

这个标准输入重定向不起作用，我做错了什么？

谢谢 ！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-30T19:19:39.803

你快到了:) 使用：`::SetHandleInformation(inHandle, HANDLE_FLAG_INHERIT, HANDLE_FLAG_INHERIT);`

# css - css: margin 属性同时使用 px 和 rem

> ID：15722274
> 
> 赞同：0
> 
> 时间：2013-03-30T18:59:54.997
> 
> 标签：css, pixel, css-rem

考虑以下 css 类定义，取自 wrpdress 212 主题：

```
.entry-header {
   margin-bottom: 24px;
   margin-bottom: 1.714285714rem;
} 
```

为什么`margin-bottom`定义两次，一次是单位`px`，一次是`rem`单位？浏览器会选择哪个单位？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-30T19:02:08.250

我认为是因为`rem`并非所有浏览器都支持。

查看[`caniuse`](http://caniuse.com/rem)详细的浏览器支持。

因此，他们将其定义`px`为旧版本和`rem`支持它的版本。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2014-05-13T22:24:01.273

有两种字体大小声明，因为开发人员更喜欢浏览器使用“rem”单位，但如果浏览器不支持 rem，它将回退到使用标准的“px”单位。

不支持“rem”单位的旧浏览器将忽略该声明。

较新/当前的浏览器将使用“级联”并使用最后声明的任何度量单位。在这种情况下，使用 'rem's 进行尺寸调整。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-30T19:01:55.883

并非所有浏览器都支持该`rem`单元 - 直到现在我才听说过！不支持它的浏览器将使用该`px`值。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-30T19:04:10.070

rem 是 CSS3 中的一个新单元，它定义了根元素（通常是文档的 HTML 元素）的字体大小。由于它是一个新单位，并非所有浏览器都支持它，请参阅[http://caniuse.com/#feat=rem](http://caniuse.com/#feat=rem)，因此提供 px 值作为后备。如果支持 rem，将使用该值，否则使用 px 值。

有关 CSS 长度单位的详细信息，请参阅[https://developer.mozilla.org/en-US/docs/CSS/length](https://developer.mozilla.org/en-US/docs/CSS/length)。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-03-30T19:05:41.523

用简单的话...

**Px**用于在所有浏览器而不是 IE 中进行修复。因为IE不具备使用浏览器功能改变大小的能力。

**Em**整个无法在 IE 中调整文本大小一直令人沮丧。为了解决这个问题，我们可以使用 em 单位。

CSS3 引入了一些称为“rem”的新单位，它代表“root em”。em 单位与父级的字体大小相关，这会导致复合问题。rem 单位是相对于根元素或 html 元素的。

# java - 如果数组只有一维，如何使用for循环获取行和列

> ID：15722277
> 
> 赞同：5
> 
> 时间：2013-03-30T19:00:12.343
> 
> 标签：java, arrays, for-loop

我已经习惯了`Matlab`可以制作矩阵并获取`A[i][j]`诸如此类的东西的功能。现在我正在使用 Java，我们只能使用一维数组。我想使用嵌套的 for 循环修改条目（i：for 行和 j：for 列），但如果它们存储在一维数组中，我不确定如何访问它们。有人可以帮我吗？有多难？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-03-30T19:06:46.673

```
 int rows = 3;
 int cols = 4;
 int[] array = new int[rows*cols];
 int[] currentRow = new int[cols];
 for (int i = 0; i < rows; ++i) {
     for (int j = 0; j < cols; ++j) {
         currentRow[j] = array[i*cols + j];
     }
 } 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2013-03-30T19:15:39.350

```
private int getElem(int[] arr, int i, int j){
  return arr[i*colNum+j];
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-30T19:06:09.577

请注意，在 Java 中，您还可以像这样使用 2D 数组：

```
int[][] my2DArr = new int[4][3]; //creates a 2D array with 4 rows and 3 columns
int value = my2DArr[2][1]; //gets the value at row 2 and column 1 
```

现在，如果您必须使用表示二维数组的一维数组，如果您知道列数和行数，您可以做一些简单的数学运算来找出给定行、列对的位置。请参见此处： [将 2D 数组转换为 1D 数组](https://stackoverflow.com/questions/8935367/convert-a-2d-array-into-a-1d-array)

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-03-30T19:10:51.277

我希望我能正确理解这一点。

假设您有一个 10x10 二维数组，并且您希望它是一维的。

您可以使 array[0] 到 array[9] 成为二维数组的第一行。那么array[10]到array[19]就是二维数组的第二行。

可能有一种更有效的方法来做到这一点。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2013-03-30T19:38:20.720

计算机跟踪的所有数组都是一维的，因为它们存储在其中的顺序内存位置（C 编程：现代方法 - KNKing）。因此，如果您想像使用二维数组一样使用一维数组，只需执行以下操作：（使用字符串数组的示例）

```
String str[] = {"a", "b", "c", "d", "e", "f"}; 
```

这就像：

```
String str[][] = {{"a", "b", "c"}, {"d", "e", "f"}}; 
```

因此，您可以手动指定有多少行和列，因此在上面`str[][]`有 2 行和 3 列或数字的任何其他排列（1 和 6、3 和 2、6 和 1）。只需像这样编写代码：

```
int rows = 2;
int cols = (str.length / rows);
for (int i = 0; i < rows*cols; i+=cols)
    for (int j = 0; j < cols; j++)
        System.out.println(str[(i + j)]); 
```

and replace the `println()` with whatever code you want and i+j will always be the row and column location as long as your rows variable is how many rows you are working with.

# javascript - 协助将 json 重新绑定到淘汰模型

> ID：15722282
> 
> 赞同：0
> 
> 时间：2013-03-30T19:00:27.703
> 
> 标签：javascript, jquery, knockout.js, knockout-2.0

我是新手，需要一些帮助。

我有一个 mvc asp.net 页面，当它加载时，我对返回 json 的控制器操作进行客户端调用，我从中创建一个视图模型并将其绑定到一些带有敲除的标记。

这是一些示例代码：

Javascript

```
 var CartViewModel = function (d) {

    var self = this,
        showCartInner = function () {
            // code to show a container
        },
        hideCart = function () {
            // code to hide a container
        };

    self.showCart = function () {  
        showCartInner();
    };

    ko.mapping.fromJS(d, {}, self);

    self.hasItems = ko.computed(function () {
        return self.NumberOfItems() > 0;
    });

    self.count = ko.computed(function () {
        return self.NumberOfItems();
    });

    self.qualified = ko.computed(function () {
        return self.Qualified().length > 0;
    });

    return self;
};

$(document).ready(function () {

    $.getJSON("/getcart", function (data) {
        ko.applyBindings(new CartViewModel(data), window.document.getElementById("cart"));
    });

}); 
```

HTML

```
<div id="cart">
<div style="display: none;" data-bind="css: { content: !hasItems() }">
empty Cart
</div>

<div style="display: none;" data-bind="css: { content: hasItems() }">
    <span class="loading">
      Look at your items
    </span>
</div>

<div style="display: none;" id="hidden_menu">
    <div id="hidden_cart">
        <div class="cart-item">
            <div class="thumb-img inline">
                <img data-bind="attr: { src: Product.Image, alt: Product.Name }" />
            </div>
            <div class="product-desc inline">
                <span class="name" data-bind="text: Product.Name"></span>
            </div>
            <div class="product-price" data-bind="text: Product.Price"></div>
        </div>
        <div class="cart-offers" data-bind="visible: qualified()">
            <div class="triangle-up-gray"></div>

            <div class="cart-offer" data-bind="visible: qualified()">
                <div id="qualified" data-bind="foreach: { data : Qualified }">
                    <div class="cart-offer-desc" data-bind="text: Description"></div>
                    <a class="cart-offer-action" data-bind="href: Url">View More</a>
                </div>
            </div>
        </div>
    </div>
</div> 
```

当页面加载时，调用检索购物车并绑定到标记，见上文。

现在，当用户通过调用控制器操作更新页面上的购物车时，从它返回的是相同的 json 对象。此时我想用新的 json 对象更新我的标记。

为了实现这一目标，我需要对上述内容进行哪些更改？如何传递 json 对象而不必重新应用绑定并且标记显示更改？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-31T03:49:10.070

你可以再次调用 ko.mapping.fromJS

```
var viewModel = null;

$(document).ready(function () {

    $.getJSON("/getcart", function (data) {
        viewModel = new CartViewModel(data);
        ko.applyBindings(viewModel, window.document.getElementById("cart"));
    });

});

function afterSomeUpdate(dataFromServer){
   ko.mapping.fromJS(dataFromServer, viewModel);
} 
```

See this link: [http://knockoutjs.com/documentation/plugins-mapping.html](http://knockoutjs.com/documentation/plugins-mapping.html) (Example: Using ko.mapping)

# google-maps - 谷歌地图航点问题

> ID：15722283
> 
> 赞同：0
> 
> 时间：2013-03-30T19:00:29.697
> 
> 标签：google-maps, routes

我有一个输入表单，允许用户创建一条包含起点、终点和 8 个航路点的路线。一切正常，但我的问题是必须填写所有输入才能渲染路线。我不知道如何解决此问题，以便用户只能输入：

1.  起点和终点，或
2.  起点和终点以及航点（根据需要，不超过 8 个，以创建路线）。

这是我的代码：

```
<!DOCTYPE html>
<html>
<head>
<meta name="viewport" content="initial-scale=1.0, user-scalable=no">
<meta charset="utf-8">
<title></title>
<link href="map_style.css" rel="stylesheet">
<script src="https://maps.googleapis.com/maps/api/js?v=3.exp&sensor=false"></script>
<script>
  var directionDisplay;
  var directionsService = new google.maps.DirectionsService();
  var map;

  function initialize() {
    directionsDisplay = new google.maps.DirectionsRenderer();
    var chicago = new google.maps.LatLng(37.09, -95.71);
    var mapOptions = {
      zoom: 4,
      mapTypeId: google.maps.MapTypeId.ROADMAP,
      center: chicago
    }
    map = new google.maps.Map(document.getElementById('map-canvas'), mapOptions);
    directionsDisplay.setMap(map);
  }

  function calcRoute() {
    var start = document.getElementById('start').value;
    var end = document.getElementById('end').value;
    var stop1 = document.getElementById("stop1").value;
    var stop2 = document.getElementById("stop2").value;
    var stop3 = document.getElementById("stop3").value;
    var stop4 = document.getElementById("stop4").value;
    var stop5 = document.getElementById("stop5").value;
    var stop6 = document.getElementById("stop6").value;
    var stop7 = document.getElementById("stop7").value;
    var stop8 = document.getElementById("stop8").value;
    var waypts= [{ location: stop1 }, { location: stop2 }, { location: stop3 },  { location: stop4 },  { location: stop5 },  { location: stop6 },  { location: stop7 },  { location: stop8 }];

    var request = {
        origin: start,
        destination: end,
        waypoints: waypts,
        optimizeWaypoints: true,
        travelMode: google.maps.DirectionsTravelMode.DRIVING
    };
    directionsService.route(request, function(response, status) {
      if (status == google.maps.DirectionsStatus.OK) {
        directionsDisplay.setDirections(response);
        var route = response.routes[0];
        var summaryPanel = document.getElementById('directions_panel');
        summaryPanel.innerHTML = '';
        // For each route, display summary information.
        for (var i = 0; i < route.legs.length; i++) {
          var routeSegment = i + 1;
          summaryPanel.innerHTML += '<b>Route Segment: ' + routeSegment + '</b><br>';
          summaryPanel.innerHTML += route.legs[i].start_address + ' to ';
          summaryPanel.innerHTML += route.legs[i].end_address + '<br>';
          summaryPanel.innerHTML += route.legs[i].distance.text + '<br><br>';
        }
      }
    });
  }
 </script>
 </head>
 <body onload="initialize()">
<div id="map-canvas" style="float:left;width:70%;height:100%;"></div>
<div id="control_panel" style="float:right;width:30%;text-align:left;padding-top:20px">
<div style="margin:20px;border-width:2px;">

<label for="start">Start :</label>
  <input type="text" id="start" name="start" /><br /><br />

<i>Add multiple Stops along the route (Optional)</i> <br /><br />
<label for="stop1">Stop 1 :</label>
  <input type="text" id="stop1" name="stop1" /><br />
<label for="stop2">Stop 2 :</label>
  <input type="text" id="stop2" name="stop2" /><br />
<label for="stop3">Stop 3 :</label>
  <input type="text" id="stop3" name="stop3" /><br />
<label for="stop4">Stop 4 :</label>
  <input type="text" id="stop4" name="stop4" /><br />
<label for="stop4">Stop 5 :</label>
  <input type="text" id="stop5" name="stop5" /><br />
<label for="stop6">Stop 6 :</label>
  <input type="text" id="stop6" name="stop6" /><br />
<label for="stop7">Stop 7 :</label>
  <input type="text" id="stop7" name="stop7" /><br />
<label for="stop8">Stop 8 :</label>
  <input type="text" id="stop8" name="stop8" /><br /><br />

<label for="end">Stop :</label>
  <input type="text" id="end" name="end" /><br />
<br />
  <input type="submit" value="Create Route" onclick="calcRoute();">
 </div>
 <div id="directions_panel" style="margin:20px;background-color:#FFEE77;"></div>
 </div>
 </body>
 </html> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-30T19:07:29.187

检查空字段并在那里复制前一个字段的值。当它被渲染时，你会有许多相互重叠的航点，但我怀疑你看不到。这可能是需要对您的代码进行最少更改的方法。更广泛的更改将使表单动态化，在用户填写时添加更多字段。

下面的代码片段似乎接近你想要的......我用一个和两个航点测试了它，它表现得很好。我仍然无法让地图渲染 - 但我相信这是由于与 .css 文件相关的另一个问题（您的评论中的格式有点混乱......）

```
function calcRoute() {
    var start = document.getElementById('start').value;
    var end = document.getElementById('end').value;    
    var waypts = [];
    for (var ii = 0; ii< 8; ii++) {      
        var thisStop = document.getElementById("stop" + (ii+1)).value;
        if (thisStop.length > 0) {
            waypts[ii] = {location: thisStop};
        }
    } 
```

// 接下来的几行被删除；再次从以下位置获取：

```
var request = { 
```

# arrays - 按数组中元素的数量对数组哈希中的键进行排序

> ID：15722286
> 
> 赞同：2
> 
> 时间：2013-03-30T19:00:45.907
> 
> 标签：arrays, perl, sorting, hash

我有一个数组哈希。

```
%HoA = (
    'C1' =>  ['1', '3', '3', '3'],
    'C2' => ['3','2'],
    'C3' => ['1','3','3','4','5','5'],
    'C4'  => ['3','3','4'],
    'C5' => ['1'],
); 
```

数组中的值本身并不重要。我想按数组的大小按降序对键进行排序。输出应该看起来像。

```
C3  # this key contains an array with the most elements
C1
C4
C2
C5  # this key contains an array with the least elements 
```

我不知道为什么这不起作用。

```
foreach my $key ( sort { $HoA{$b} <=> $HoA{$a}} keys %HoA ) {
    print "$key\n";
} 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-30T19:18:59.527

您必须比较数组大小：

```
foreach my $key ( sort { scalar @{$HoA{$b}} <=> scalar @{$HoA{$a}}} keys %HoA ) {
    print "$key\n";
} 
```

# java - android设备上的java服务器推送图像

> ID：15722292
> 
> 赞同：0
> 
> 时间：2013-03-30T19:01:10.257
> 
> 标签：java, android, tcp, android-ui

我正在尝试制作一个 java tcp 服务器，它将向所有连接的 android 设备发送图像。

然后设备应将此图像设置为背景。我知道如何将图像从 java 服务器发送到 android 设备。但我想让 android 一直监听传入的流，每当它获取图像时，它都会将其设置为背景。

```
public void listenForIncomingImage() {
        Thread InComImage = new Thread(new Runnable() {

            @Override
            public void run() {
                while (true) {
                    try {
                        inComImageBitmap = BitmapFactory.decodeStream(mySocket
                                .getInputStream());
                        MainActivity.setImage(inComImageBitmap, true);
                        Log.d("Bitmap", "Bitmap receviced and sent to method");
                    } catch (IOException e) {
                        // TODO Auto-generated catch block
                        e.printStackTrace();
                    }

                }
            }
        });
        InComImage.start();

    } 
```

这是在 android 端，它将图像发送到 Mainactivity。

```
public void imageUpdate() {
        new Thread(new Runnable() {
            @Override
            public void run() {
                while (true) {
                    runOnUiThread(new Runnable() {
                        public void run() {
                            while(imageCheck = true)
                            myImage.setImageBitmap(finalImage);
                            imageCheck = false;

                        }
                    });
                }
            }
        }).start();
    } 
```

这是我在 mainactivity 中用来更新 UI 的步骤，但是应用程序不会更新并且它会崩溃。我认为线程过度加载内存并导致应用程序崩溃。

知道发生了什么吗？或更好的实施方式。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-30T20:34:19.327

我不确定您要做什么，但您的循环中有一些错误：

```
 while(imageCheck = true)
     myImage.setImageBitmap(finalImage);
     imageCheck = false; 
```

1 你分配 imageCheck= true 而不是检查 imageCheck==true

2 你不使用 paranteses {} 所以 imageCheck=false 不在你的 while 循环内

3 你的循环可以永远运行

4 您正在对 runOnUIThread 进行无休止的调用，因为“while(true)”将继续运行：您需要这个 while 循环吗？

# python - 如何使用 .open() 将 XMLHttprequest 中的值传递到 python 脚本中

> ID：15722299
> 
> 赞同：0
> 
> 时间：2013-03-30T19:02:10.863
> 
> 标签：python, xmlhttprequest

我想做这个：

使用 out of javascipt 运行 python scipt：

```
 function getDescription() {
        <!-- var snd_name = document.getElementById("name").value;  -->
        var url = '/cgi-bin/events.py?name=1';

        if (window.XMLHttpRequest) {
            req = new XMLHttpRequest();
        } else if (window.ActiveXObject) {
            req = new ActiveXObject("Microsoft.XMLHTTP");
        }
        printEvent('Client','Sent request ...');
        req.onreadystatechange = processRequest;
        req.open("GET", url, true);
        req.send(null);
    } 
```

函数 getDescription 在其他地方被调用。

现在我通过 req.open 将包含参数的 URL 传递给 python 脚本。

在 python 脚本中，我喜欢这样的事情：

```
import time
import cgi
import sys
import cgitb; cgitb.enable()
import urlparse
import urllib

result = READ_THE_PARAMETERS... I have no clue what to do here...

a = result[name]

print[a] 
```

而在一个我应该是“1”。

这可能很容易，但对我来说不是今天。请帮忙。

谢谢彼得

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-30T19:10:36.533

```
parameters = cgi.FieldStorage()
a = parameters[name]
print a 
```

# php - imagecolortransparent in PHP not working

> ID：15722301
> 
> 赞同：5
> 
> 时间：2013-03-30T19:02:18.603
> 
> 标签：php, image, image-processing

I want to change white color in image ([http://www.arso.gov.si/vreme/napovedi%20in%20podatki/radar.gif](http://www.arso.gov.si/vreme/napovedi%20in%20podatki/radar.gif)) to transparent. I think that code looks right, there is no error logs but picture stays unchanged. I double checked if color in image is really white and it is. Please help.

```
<?php
    $im = imagecreatefromgif("http://www.arso.gov.si/vreme/napovedi%20in%20podatki/radar.gif");

    imagealphablending($im, false);
    imagesavealpha($im, true);

    $white = imagecolorallocate($im, 255, 255, 255);

    imagecolortransparent($im, $white);

    imagegif($im, './image_radar_tran.gif');
    imagedestroy($im);
?>
<body style="background-color: lightgoldenrodyellow;">
    <img src="./image_radar_tran.gif" />
</body> 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-30T19:29:55.943

Change:

```
$white = imagecolorallocate($im, 255, 255, 255); 
```

To:

```
$white = imagecolorexact($im, 255, 255, 255); 
```

And it will work. The reason is that the color 'white' is already defined in the index of the gif you are using, so you can't allocate a new index for that color. Instead, using `imagecolorexact`, you get the existing index for the white color to use and can then change it to transparent.

# javascript - 如何从 Kinetic.Rect 固有

> ID：15722304
> 
> 赞同：1
> 
> 时间：2013-03-30T19:02:35.383
> 
> 标签：javascript, kineticjs

我正在使用[Kineticjs](http://kineticjs.com/)绘制栅格。这适用于 Kinetic.Rect。现在我想使用[Kinetic.Rect](http://kineticjs.com/docs/symbols/Kinetic.Rect.php)以外的其他对象。在这个对象中，我应该能够保存光栅中位置的 x 和 y。我必须遵循以下代码：

```
function Tile(rasterX, rasterY, occupied, config) {
    Kinetic.Rect.call(this, config);
    this.rasterX = rasterX;
    this.rasterY = rasterY;
    this.occupied = occupied;
}

Tile.prototype = new Kinetic.Rect();

Tile.prototype.constructor = Tile; 
```

现在我更改了创建的 Kinetic.Rect 的代码（这有效）：

```
var tile = new Kinetic.Rect({
                                width: drawWidth,
                                height: drawHeight,
                                stroke: 'black',
                                fill: 'grey',
                                x: x,
                                y: j * drawHeight
                            }); 
```

到：

```
var tile = new Tile(j, i, false, {
                            width: drawWidth,
                            height: drawHeight,
                            stroke: 'black',
                            fill: 'grey',
                            x: x,
                            y: j * drawHeight
                        }); 
```

不知何故，配置没有正确传递给 Kinetic.Rect 构造函数，因为创建的所有图块的 x 和 y 都是相同的（画布的右下角）。然而，颜色在那里。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-31T11:30:15.683

Here is how I extend Kinetic objects

```
MyCircle = function(config) {
        Kinetic.Circle.call(this, $.extend({
            x: 0,
            y: 0
        }, config));
};
MyCircle.prototype = {
        myFunc: function() {
        }
}
Kinetic.Global.extend(MyCircle, Kinetic.Circle); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-30T19:15:07.870

嗯，是不是`Kinetic.Rect`构造函数逻辑改变了对象的某些部分，导致这种奇怪的行为？

尝试使用`Tile.prototype = Object.create(Kinetic.Rect.prototype);`for 继承。

The difference is that `Object.create` will return a new object with the specified prototype while the `new` operator when doing `Tile.prototype = new Kinetic.Rect();` also sets up the prototype chain, but also runs the constructor logic wich might have undesireble side-effects.

# clojure - 瞬态与原子

> ID：15722306
> 
> 赞同：1
> 
> 时间：2013-03-30T19:02:55.413
> 
> 标签：clojure

我想了解瞬态与原子的优缺点。典型的用例是什么？

特别是，我关心的是转换从 MySQL 数据库返回的集合。每个实体最多有 4 行。我想将它恢复为每个实体的一个映射键并对值进行一些处理。

先感谢您 -

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-30T19:12:35.157

出于性能原因，瞬态旨在提供非常局部可变的集合 - 如果您不需要性能，则没有理由使用它们，因为它们的 API 旨在匹配正常的、不可变的 clojure 集合，除了更麻烦。

原子提供具有显式并发/多线程特性的潜在全局可变状态。

您不需要进行基本的数据转换或处理。第 1 步：首先让您的程序使用标准的不可变集合。几乎不需要第 2 步。

# php - php smtp 服务器

> ID：15722312
> 
> 赞同：2
> 
> 时间：2013-03-30T19:03:43.397
> 
> 标签：php, smtp, telnet

我想通过 telnet 发送一封带有 PHP 的电子邮件，但这里出了点问题。

```
$telnet = array();
$telnet[0] = "telnet 10.0.50.6 25\r\n";
$telnet[1] = "HELO osiris.com\r\n";
$telnet[2] = "MAIL FROM:$replyTo\r\n";
$telnet[3] = "RCPT TO:$emailsTo\r\n";
$telnet[4] = "DATA\r\n";
$telnet[5] = "From:$headers<$replyTo> \r\n To:$emailsTo\r\n Subject:$emailSubject\r\n        $body\r\n\r\n .\r\n";

@$fp = fsockopen('10.0.50.6', 25);

$count=0;

if (!$fp){
echo 'connection fail';

return false;   
}else{

    foreach ($telnet as $current) {         
    fwrite($fp, $current);
    $smtpOutput=fgets($fp);
    $g=substr($smtpOutput, 0, 3);

        if (!(($g == "220") || ($g == "250") || ($g == "354")|| ($g == "500"))) {
        echo 'connection 2 fail';
             return false; 
    }else{
        $count=$count+1;
        echo $count.'<br>';
        if ($count>5){
            fclose($fp);
            return true;
        }
    } 
```

**结果是：**

```
telnet 10.0.50.6 25 
220 afcc-ex-il1.rsa-otms.com Microsoft ESMTP MAIL Service ready at Sat, 30 Mar 2013 19:01:12 +0000 
220
1
HELO osiris.com 
500 5.3.3 Unrecognized command 
500
2
MAIL FROM:afcc@rsa.com 
250 afcc-ex-il1.rsa-otms.com Hello [10.0.70.22] 
250
3
RCPT TO:cfir@carmeli.me 
250 2.1.0 Sender OK 
250
4
DATA 
250 2.1.5 Recipient OK 
250
5
From:cfir To:cfir@carmeli.me Subject:test test
354 Start mail input; end with . 
354
6 
```

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2013-12-05T13:55:42.743

您已完成所有操作，但在 \r\n 的下一行中只有一个额外的空格**。\r\n**

```
$telnet[5] = "From:$headers<$replyTo> \r\n To:$emailsTo\r\n Subject:$emailSubject\r\n        $body\r\n\r\n .\r\n"; 
```

# php - 无法从 php 连接到 Postgres -> 调用未定义的函数 pg_connect()

> ID：15722313
> 
> 赞同：5
> 
> 时间：2013-03-30T19:03:48.540
> 
> 标签：php, apache, xampp

我在预览帖子中发布这个问题作为答案对我没有帮助。我正在尝试从我的本地计算机连接到位于远程服务器上的 DB postgres。我正在使用 Xampp 和 Netbeans IDE。

下面是我试图运行的代码：

```
 //attempt a connection
    $dbh = pg_connect("host=server_name port=5432 dbname=prototype1 user=leonidz password=****");
    if (!$dbh) {
    die("Error in connection: " . pg_last_error());
               } 
```

这是错误消息：

```
Fatal error: Call to undefined function pg_connect() in C:\xampp\htdocs\PhpProject1\index.php on line 10 
```

在 php.ini 中我未提交：extension=php_pgsql.dll 和 extension=php_pdo_pgsql.dll

我还映射了 extension_dir = "C:\xampp\php\ext\" 并在更改后重新启动了 Apache 服务器。

我不知道我还能做什么，请帮助。

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2016-05-18T11:30:24.950

在 C:\xampp\php\php.ini 中，取消注释这些：

```
extension=php_pdo_pgsql.dll
extension=php_pgsql.dll 
```

**完成此操作后需要重新启动您的 xampp**

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2018-09-03T11:25:12.163

在 php.ini 中你需要取消注释

扩展=php_pdo_pgsql.dll

扩展=php_pgsql.dll

和

扩展="pgsql.so"

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2019-12-06T15:15:25.073

转到 PHP dir oepn php.ini 文件，在那里你会找到这两行，只需从左侧删除分号，保存文件。接下来，停止 xampp 服务器并再次重新启动它会正常工作

```
;extension=pdo_pgsql
;extension=pgsql 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2020-07-22T06:22:50.853

`Fatal error: Uncaught Error: Call to undefined function pg_connect() in C:\xampp\htdocs\postgresql_dbcon\connection1.php:5 Stack trace: #0 C:\xampp\htdocs\postgresql_dbcon\view.php(4): include() #1 {main} thrown in C:\xampp\htdocs\postgresql_dbcon\connection1.php on line 5`

connection1.php 文件

```
<?php
    $db = pg_connect("host=localhost port=5432 dbname=db_test user=postgres password=123abc");//line 5
    if($db){
        echo "Connected\n";
    } else {
        echo "Error NotConnected\n";
    }
?> 
```

查看.php 文件

```
<?php include "connection1.php";?>
<?php 
    $query = 'Select * FROM table2';
    $result = pg_query($db, $query);
    if (!$result) {
  echo "An error occurred.\n";
  exit;
}
while ($row = pg_fetch_row($result)) {
  $dbdata[]=$row;
}
$myJSON = json_encode($dbdata);
    echo $myJSON;
?> 
```

如果您在 Windows 操作系统中使用 XAMPP，请转到安装 XAMPP 的目录。按照路径，即`xampp/php/php.ini`。在编辑器中打开`php.ini`文件并搜索`";extension=pdo_mysql"`并将其`"extension=pdo_mysql"`替换`";extension=pdo_pgsql"`为`"extension=pdo_mysql"`. 然后保存文件并重新启动 XAMPP。

# php - 教义 findBy() 无法在表中找到一行

> ID：15722316
> 
> 赞同：0
> 
> 时间：2013-03-30T19:04:06.810
> 
> 标签：php, mysql, doctrine-1.2, doctrine-query

我正在尝试使用 Doctrine 作为我编写的 MVC 框架应用程序的“模型”。

我有一种情况，我想为每个“机架”记录存储一个“可用空间”记录。我希望能够从 rack_id 获取可用空间记录。

这是我的桌子。

```
create table if not exists freespace (
    id int(11) unsigned not null auto_increment,
    rack_id int(11) unsigned not null,
    -- other fields
    primary key (id),
    unique key (rack_id)
); 
```

我掀起了一些教义课......

BaseFreespace.php

```
abstract class BaseFreespace extends Doctrine_Record {
    public function setTableDefinition()
    {
        $this->setTableName('freespace');
        $this->hasColumn('id', 'integer', 11, array(
            'type' => 'integer',
            'length' => 11,
            'fixed' => false,
            'unsigned' => true,
            'primary' => true,
            'autoincrement' => true,
        ));
        $this->hasColumn('rack_id', 'integer', 11, array(
           'type' => 'integer',
           'length' => 11,
           'fixed' => false,
           'unsigned' => true,
           'primary' => false,
           'notnull' => true,
           'notblank' => true,
           'autoincrement' => false,
        ));
        // other fields
    }
} 
```

自由空间.php

```
class Freespace extends BaseFreespace {
    public function findByRackId($rack_id = 0) {
        //die(var_dump($rack_id));
        $res = $this->getTable()->findBy('rack_id', $rack_id);
        die(var_dump($res));
    }
} 
```

从客户端代码，如果我说：

```
$freespace = new Freespace();
$rackFreeSpace = $freespace->findByRackId($rack_id); 
```

...然后*它挂起，直到 Apache 重置连接*。如果我注释掉 die(var_dump($rack_id)) 它马上就死在那里。

我试过了：

```
$res = $this->getTable()->findBy(array('rack_id', $rack_id)); 
```

在他们的文档中在线看到了这一点 - 但 Doctrine 不希望这样的参数 - 一定是错误的文档版本。

我试过了：

```
$q = Doctrine_Query::create()
    ->from('Freespace')
    ->where('rack_id = ?', $rack_id);
$result = $q->fetchOne(); 
```

但这也挂了。

我正在失去理智。我究竟做错了什么？

# jquery - 如果不合适，如何在文本末尾添加“...阅读更多”锚

> ID：15722321
> 
> 赞同：2
> 
> 时间：2013-03-30T19:04:40.163
> 
> 标签：jquery, html, css, overflow

如果多行文本的高度超过 8em，我正在寻找一种将“...阅读更多”超链接添加到多行文本可见部分末尾的方法。

我尝试了下面的代码，但`... read more`没有出现，只有最后一行高度的一半可见。如何让它出现并允许用户点击它？

就像是：

```
asd sadas sads asda dfdsf
dfds sdf ... read more 
```

使用 jquery 和 ASP.NET MVC2。

```
.description
{
    max-height: 8em;
    overflow: hidden;
    font-size: small;
    text-overflow: "<a href='details'>... read more</a>";
}

<p class='description'>dsdsa sakldlka asld slkskldsdlks ewekesdsdjkdj skskssk skssksk skssksks sksksks sksksjs sksks kassaksk skdksk skdskdj askdasj asdkasjd asldksa lasd askla dasl asldaksd lad askdal adslkaskd lads askaldka alsdkaslda  adkalsdk adsdkasl adklasdl kaldakd aas dasdklasdask asldkaslsdk asldsakdl
kassaksk skdksk skdskdjff askdasj asdkasjd asldksa lasd askla dasl asldaksd lad askdal adslkaskd lads askaldka alsdsdkaslda  adkalsdk adsdkasl adklasdl kaldakd aas dasdklasdask asldkaslsdk asldsakdl
sad kassaksk skdksk skdskdj askdasj asdkasjd asldksa lasd askla dasl asldaksd lad askdal adslkaskd lads askaldka alsdkaslda ff adkalsdk fffadsdkasl adklasdl kaldakd aas dasdklasdask asldkaslsdk asldsakdl
fddfkassaksk skdfdfksk skdskdj askdasj asdkasjd asldksa lasd askla dasl asldaksd lad askdal adslkaskd lads askaldka alsdkaslda  adkalsdk adsdkasl adklasdl kaldakd aas dasdklasdask asldkaslsdk asldsakdl</p> 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-30T19:35:50.827

这感觉有点笨拙，并且需要对 DOM 进行一些操作，但我建议：

```
$('p').each(function (i, e) {
    var that = $(this);
    that.contents().wrapAll('<span class="pWrap" />');
    var span = that.find('span.pWrap'),
        sHeight = span.height();
    that.data({
        'fullHeight': sHeight,
            'minHeight': that.height()
    });
    if (that.height() < sHeight) {
        $('<a />', {
            'href': '#',
                'text': 'read more',
                'class': 'readMore'
        }).appendTo(that);
    }
}).on('click', 'a.readMore', function (e) {
    var that = $(this),
        p = $(this).closest('p'),
        fullHeight = p.data('fullHeight') + 40,
        minHeight = p.data('minHeight'),
        toHeight = p.height() == fullHeight ? minHeight : fullHeight;
    p.animate({
        'max-height': toHeight,
            'height': toHeight
    }, 1000);
    that.text(function (i, t) {
        return t == 'read more' ? 'show less' : 'read more';
    });
}); 
```

[JS Fiddle demo](http://jsfiddle.net/davidThomas/uRajF/1/).

References:

*   [`animate()`](http://api.jquery.com/animate/).
*   [`appendTo()`](http://api.jquery.com/appendTo/).
*   [`contents()`](http://api.jquery.com/contents/).
*   [`data()`](http://api.jquery.com/data/).
*   [`each()`](http://api.jquery.com/each/).
*   [`find()`](http://api.jquery.com/find/).
*   [`height()`](http://api.jquery.com/height/).
*   [`on()`](http://api.jquery.com/on/).
*   [`text()`](http://api.jquery.com/text/).
*   [`wrapAll()`](http://api.jquery.com/wrapAll/).

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-30T19:24:18.847

为此，您将需要 jQuery /（服务器端语言）。它不能用纯 css 完成。

[dotdotdot](http://dotdotdot.frebsite.nl/)是用于相同目的的非常好的 jquery 插件。（`Read more`例如滚动底部）

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-30T19:17:28.377

这是我为此编写的一个 PHP 函数，不确定您要使用哪种语言：

```
<?php
function read_more($article_text, $limit=50)
{
  $breakpoint = 0;
   if(strlen($article_text) > $limit)
   {
      if( ($breakpoint = strpos($article_text, ".", $limit)) !== false )
      {
         if( $breakpoint < strlen($article_text) - 1 )
         {
            $article_text = substr($article_text, 0, $breakpoint) . '... <span class="read_more">[&nbsp;<a href="'.$article_link.'">Read&nbsp;More</a>&nbsp;]</span>';
         }
      }
   }
   return $article_text;
}
?> 
```

# python - M×N 形状 numpy.ndarray 的滑动窗口

> ID：15722324
> 
> 赞同：54
> 
> 时间：2013-03-30T19:04:45.570
> 
> 标签：python, numpy, time-series, sliding-window

我有一个形状为 (6,2) 的 Numpy 数组：

```
[[ 0, 1],
 [10,11],
 [20,21],
 [30,31],
 [40,41],
 [50,51]] 
```

我需要一个具有步长`1`和窗口大小的滑动窗口，`3`如下所示：

```
[[ 0, 1,10,11,20,21],
 [10,11,20,21,30,31],
 [20,21,30,31,40,41],
 [30,31,40,41,50,51]] 
```

我正在寻找一个 Numpy 解决方案。如果您的解决方案可以参数化原始数组的形状以及窗口大小和步长，那就太好了。

* * *

我找到了这个相关的答案[Using strides for an Effective Moving Average Filter](https://stackoverflow.com/questions/4936620/using-strides-for-an-efficient-moving-average-filter)但我看不到如何在那里指定步长以及如何将窗口从 3d 折叠到连续的 2d 数组。还有这个[滚动或滑动窗口迭代器？](https://stackoverflow.com/questions/6822725/rolling-or-sliding-window-iterator-in-python)但那是在 Python 中，我不确定它的效率如何。此外，它支持元素，但如果每个元素都有多个特征，则最终不会将它们连接在一起。

* * *

## 回答 #1

> 赞同：74
> 
> 时间：2017-02-15T19:18:41.400

**您可以使用精美的索引在 numpy 中创建矢量化滑动窗口。**

```
>>> import numpy as np

>>> a = np.array([[00,01], [10,11], [20,21], [30,31], [40,41], [50,51]])

>>> a
array([[ 0,  1],
       [10, 11],
       [20, 21],                      #define our 2d numpy array
       [30, 31],
       [40, 41],
       [50, 51]])

>>> a = a.flatten()

>>> a
array([ 0,  1, 10, 11, 20, 21, 30, 31, 40, 41, 50, 51])    #flattened numpy array

>>> indexer = np.arange(6)[None, :] + 2*np.arange(4)[:, None]

>>> indexer
array([[ 0,  1,  2,  3,  4,  5],
       [ 2,  3,  4,  5,  6,  7],            #sliding window indices
       [ 4,  5,  6,  7,  8,  9],
       [ 6,  7,  8,  9, 10, 11]])

>>> a[indexer]
array([[ 0,  1, 10, 11, 20, 21],
       [10, 11, 20, 21, 30, 31],            #values of a over sliding window
       [20, 21, 30, 31, 40, 41],
       [30, 31, 40, 41, 50, 51]])

>>> np.sum(a[indexer], axis=1)
array([ 63, 123, 183, 243])         #sum of values in 'a' under the sliding window. 
```

**解释这段代码在做什么。**

`np.arange(6)[None, :]`创建一个 0 到 6 的行向量，并创建`np.arange(4)[:, None]`一个 0 到 4 的列向量。这会产生一个 4x6 矩阵，其中每行（其中 6 个）代表一个窗口，行数（其中 4 个）代表视窗。2 的倍数使滑动窗口一次滑动 2 个单位，这是在每个元组上滑动所必需的。使用 numpy 数组切片，您可以将滑动窗口传递到展平的 numpy 数组中，并像 sum 一样对它们进行聚合。

* * *

## 回答 #2

> 赞同：38
> 
> 时间：2013-03-30T19:22:31.720

```
In [1]: import numpy as np

In [2]: a = np.array([[00,01], [10,11], [20,21], [30,31], [40,41], [50,51]])

In [3]: w = np.hstack((a[:-2],a[1:-1],a[2:]))

In [4]: w
Out[4]: 
array([[ 0,  1, 10, 11, 20, 21],
       [10, 11, 20, 21, 30, 31],
       [20, 21, 30, 31, 40, 41],
       [30, 31, 40, 41, 50, 51]]) 
```

你可以把它写成一个函数：

```
def window_stack(a, stepsize=1, width=3):
    n = a.shape[0]
    return np.hstack( a[i:1+n+i-width:stepsize] for i in range(0,width) ) 
```

* * *

这并不真正取决于原始数组的形状，只要`a.ndim = 2`. 请注意，我从不在交互式版本中使用任何一种长度。形状的第二维无关紧要；每一行可以任意长。感谢@Jaime 的建议，您可以在不检查形状的情况下做到这一点：

```
def window_stack(a, stepsize=1, width=3):
    return np.hstack( a[i:1+i-width or None:stepsize] for i in range(0,width) ) 
```

* * *

## 回答 #3

> 赞同：33
> 
> 时间：2017-09-13T13:35:13.210

一种解决方案是

`np.lib.stride_tricks.as_strided(a, shape=(4,6), strides=(8,4))`.

当您开始考虑指针/地址时，使用 strides 是很直观的。

该`as_strided()`方法有 3 个参数。

1.  数据
2.  形状
3.  大步前进

`data`是我们要操作的数组。

要`as_strided()`用于实现滑动窗口函数，我们必须事先计算输出的形状。在问题中，(4,6) 是输出的形状。如果尺寸不正确，我们最终会读取垃圾值。这是因为我们通过将指针移动几个字节（取决于数据类型）来访问数据。

确定正确的值`strides`对于获得预期结果至关重要。在计算步幅之前，使用 找出每个元素占用的内存`arr.strides[-1]`。在本例中，一个元素占用的内存为 4 个字节。Numpy 数组以行主要方式创建。下一行的第一个元素紧邻当前行的最后一个元素。

前任：

```
0 , 1 | 10, 11 | ... 
```

10 就在 1 旁边。

想象一下将 2D 数组重新整形为 1D（这是可以接受的，因为数据以行主要格式存储）。输出中每一行的第一个元素是一维数组中的奇数索引元素。

```
0, 10, 20, 30, .. 
```

因此，从 0 到 10、10 到 20 等等，我们需要在内存中采取的步数是`2 * mem size of element`。每行的步幅为`2 * 4bytes = 8`. 对于输出中的给定行，所有元素在我们想象的一维数组中彼此相邻。要获取一行中的下一个元素，只需迈出一个等于元素大小的步幅。列步幅的值为 4 个字节。

所以，`strides=(8,4)`

另一种解释：输出的形状为 (4,6)。列步幅`4`。因此，第一行元素从索引开始`0`，有 6 个元素，每个元素间隔 4 个字节。收集完第一行后，第二行开始距离当前行开头 8 个字节。第三行开始距离第二行起点 8 个字节，依此类推。

形状决定了我们需要的行数和列数。strides 定义了开始行和收集列元素的内存步骤

* * *

## 回答 #4

> 赞同：9
> 
> 时间：2017-10-12T00:44:56.027

^(使用1)可以进行简短的列表理解：[`more_itertools.windowed`](https://more-itertools.readthedocs.io/en/latest/api.html)

**给定**

```
import numpy as np
import more_itertools as mit

a = [["00","01"],
     ["10","11"],
     ["20","21"],
     ["30","31"],
     ["40","41"],
     ["50","51"]]

b = np.array(a) 
```

**代码**

```
np.array([list(mit.flatten(w)) for w in mit.windowed(a, n=3)]) 
```

或者

```
np.array([[i for item in w for i in item] for w in mit.windowed(a, n=3)]) 
```

或者

```
np.array(list(mit.windowed(b.ravel(), n=6))) 
```

输出

```
array([['00', '01', '10', '11', '20', '21'],
       ['10', '11', '20', '21', '30', '31'],
       ['20', '21', '30', '31', '40', '41'],
       ['30', '31', '40', '41', '50', '51']], 
      dtype='<U2') 
```

`n=3`创建并展平大小的滑动窗口。请注意，默认步长为`more_itertools.windowed(..., step=1)`.

* * *

**表现**

作为一个数组，接受的答案是最快的。

```
%timeit np.hstack((a[:-2], a[1:-1], a[2:]))
# 37.5 µs ± 1.88 µs per loop (mean ± std. dev. of 7 runs, 10000 loops each)
%timeit np.hstack((b[:-2], b[1:-1], b[2:]))
# 12.9 µs ± 166 ns per loop (mean ± std. dev. of 7 runs, 100000 loops each)

%timeit np.array([list(mit.flatten(w)) for w in mit.windowed(a, n=3)])
# 23.2 µs ± 1.73 µs per loop (mean ± std. dev. of 7 runs, 10000 loops each)
%timeit np.array([[i for item in w for i in item] for w in mit.windowed(a, n=3)])
# 21.2 µs ± 999 ns per loop (mean ± std. dev. of 7 runs, 10000 loops each)
%timeit np.array(list(mit.windowed(b.ravel(), n=6)))
# 43.4 µs ± 374 ns per loop (mean ± std. dev. of 7 runs, 10000 loops each) 
```

^([[实现itertool 配方](https://docs.python.org/3/library/itertools.html#itertools-recipes)和许多有用工具的第三方库。])

* * *

## 回答 #5

> 赞同：8
> 
> 时间：2020-12-25T10:24:10.460

从 开始`Numpy 1.20`，使用 new[`sliding_window_view`](https://numpy.org/devdocs/reference/generated/numpy.lib.stride_tricks.sliding_window_view.html#numpy-lib-stride-tricks-sliding-window-view)滑动/滚动元素窗口，并基于与[user42541 的答案](https://stackoverflow.com/a/42258242/9297144)相同的想法，我们可以这样做：

```
import numpy as np
from numpy.lib.stride_tricks import sliding_window_view

# values = np.array([[0,1], [10,11], [20,21], [30,31], [40,41], [50,51]])
sliding_window_view(values.flatten(), window_shape = 2*3)[::2]
# array([[ 0,  1, 10, 11, 20, 21],
#        [10, 11, 20, 21, 30, 31],
#        [20, 21, 30, 31, 40, 41],
#        [30, 31, 40, 41, 50, 51]]) 
```

其中`2`是子数组和`3`窗口的大小。

* * *

中间步骤的详细信息：

```
# values = np.array([[0,1], [10,11], [20,21], [30,31], [40,41], [50,51]])

# Flatten the array (concatenate sub-arrays):
values.flatten()
# array([ 0,  1, 10, 11, 20, 21, 30, 31, 40, 41, 50, 51])

# Slide through windows of size 2*3=6:
sliding_window_view(values.flatten(), 2*3)
# array([[ 0,  1, 10, 11, 20, 21],
#        [ 1, 10, 11, 20, 21, 30],
#        [10, 11, 20, 21, 30, 31],
#        [11, 20, 21, 30, 31, 40],
#        [20, 21, 30, 31, 40, 41],
#        [21, 30, 31, 40, 41, 50],
#        [30, 31, 40, 41, 50, 51]])

# Only keep even rows (1 row in 2 - if sub-arrays have a size of x, then replace 2 with x):
sliding_window_view(values.flatten(), 2*3)[::2]
# array([[ 0,  1, 10, 11, 20, 21],
#        [10, 11, 20, 21, 30, 31],
#        [20, 21, 30, 31, 40, 41],
#        [30, 31, 40, 41, 50, 51]]) 
```

* * *

## 回答 #6

> 赞同：3
> 
> 时间：2021-01-27T16:07:17.757

从 NumPy 版本开始，`1.20.0`这可以使用

```
np.lib.stride_tricks.sliding_window_view(arr, winsize) 
```

例子：

```
>>> arr = np.arange(0, 9).reshape((3, 3))
>>> np.lib.stride_tricks.sliding_window_view(arr, (2, 2))

array([[[[0, 1],
         [3, 4]],

        [[1, 2],
         [4, 5]]],

       [[[3, 4],
         [6, 7]],

        [[4, 5],
         [7, 8]]]]) 
```

[你可以在这里](https://numpy.org/devdocs/reference/generated/numpy.lib.stride_tricks.sliding_window_view.html)阅读更多关于它的信息。

* * *

## 回答 #7

> 赞同：2
> 
> 时间：2019-10-03T10:48:22.680

## 这是使用 Numpy >= v1.17 的单线

```
rowsJoined = 3

splits = np.vstack(np.split(x,np.array([[i, i + rowsJoined] for i in range(x.shape[0] - (rowsJoined - 1))]).reshape(-1))).reshape(-1, rowsJoined * x.shape[1]) 
```

## 测试

```
x = np.array([[00,1],
              [10,11],
              [20,21],
              [30,31],
              [40,41],
              [50,51]]) 
```

## 结果

```
[[ 0  1 10 11 20 21]
 [10 11 20 21 30 31]
 [20 21 30 31 40 41]
 [30 31 40 41 50 51]] 
```

## 大型阵列上的测试性能

```
import numpy as np
import time

x = np.array(range(1000)).reshape(-1, 2)
rowsJoined = 3

all_t = 0.
for i in range(1000):
    start_ = time.time()
    np.vstack(
        numpy.split(x,np.array([[i, i + rowsJoined] for i in range(x.shape[0] - (rowsJoined - 1))])
                    .reshape(-1))).reshape(-1, rowsJoined * x.shape[1])
    all_t += time.time() - start_

print('Average Time of 1000 Iterations on Array of Shape '
      '1000 x 2 is: {} Seconds.'.format(all_t/1000.)) 
```

## 表现结果

```
Average Time of 1000 Iterations on Array of Shape 1000 x 2 is: 0.0016909 Seconds. 
```

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2019-05-17T13:22:31.963

这是一个纯 Python 实现：

```
def sliding_window(arr, window=3):
    i = iter(arr)
    a = []
    for e in range(0, window): a.append(next(i))
    yield a
    for e in i:
        a = a[1:] + [e]
        yield a 
```

一个例子：

```
# flatten array
flatten = lambda l: [item for sublist in l for item in sublist]

a = [[0,1], [10,11], [20,21], [30,31], [40,41], [50,51]]
w = sliding_window(a, width=3)
print( list(map(flatten,w)) )

[[0, 1, 10, 11, 20, 21], [10, 11, 20, 21, 30, 31], [20, 21, 30, 31, 40, 41], [30, 31, 40, 41, 50, 51]] 
```

**基准**

```
import timeit
def benchmark():
  a = [[0,1], [10,11], [20,21], [30,31], [40,41], [50,51]]
  sliding_window(a, width=3)

times = timeit.Timer(benchmark).repeat(3, number=1000)
time_taken = min(times) / 1000
print(time_taken)

1.0944640007437556e-06 
```

# ruby-on-rails - how and when are Ruby variables instantiated

> ID：15722325
> 
> 赞同：7
> 
> 时间：2013-03-30T19:04:54.127
> 
> 标签：ruby-on-rails, ruby

from rails console:

```
development environment (Rails 3.2.9)
1.9.2p320 :001 > defined?(kol)
 => nil 
1.9.2p320 :002 > if 1==2
1.9.2p320 :003?>   kol = 'mess'
1.9.2p320 :004?>   end
 => nil 
1.9.2p320 :005 > defined?(kol)
 => "local-variable" 
1.9.2p320 :006 > kol
 => nil 
```

my question is, why the does variable `kol` get instantiated to `nil` even though the condition (1==2) fails?

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-03-30T19:18:43.083

It has to do with the way the Ruby interpreter reads the code.

> The assignment to the variable doesn't have to be executed; the Ruby interpreter just needs to have seen that the variable exists on the left side of an assignment. (Programming Ruby 1.9 & 2.0)

```
a = "never used" if false
[99].each do |i|
  a = i # this sets the variable in the outer scope
end
a # => 99 
```

> "Ruby interpreter creates the variable even though the assignment isn't actually executed." [http://www.jacopretorius.net/2012/01/block-variable-scope-in-ruby.html](http://www.jacopretorius.net/2012/01/block-variable-scope-in-ruby.html)

# lua - Lua how to fix "name conflict for module"?

> ID：15722328
> 
> 赞同：0
> 
> 时间：2013-03-30T19:05:17.303
> 
> 标签：lua

I have LuaForWindows installed and simple script file containing

```
require('LuaXml') 
```

works fine under SciTE or from cmd. However when I trying to execute script containing only this line under my program using lua51.dll I have error `name conflict for module 'xml'`. Folder with script contains `lua/LuaXml.lua` and `clibs/LuaXML_lib.dll`. When I renaming this folders program stops seeing this files and I have errors like `module 'LuaXML_lib' not found` or `module 'LuaXml' not found` so lua51.dll actually looking for files and able to find. And there is no other instances of this files visible.

```
print(package.path) 
```

returns `;.\?.lua;D:\Projects\Lua\FdbTool\bin\lua\?.lua;D:\Projects\Lua\FdbTool\bin\lua\?\init.lua;D:\Projects\Lua\FdbTool\bin\?.lua;D:\Projects\Lua\FdbTool\bin\?\init.lua;C:\Program Files\Lua\5.1\lua\?.luac` where `D:\Projects\Lua\FdbTool\bin` is folder of executable and lua51.dll.

How to solve this issue? And, if possible, what actually this error means (can't understand from Lua docs)?

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-30T19:17:35.377

Oops, it was `xml` function built-in with my program

```
lua_register(FL, PAnsiChar('xml'), funcaddr) 
```

so `xml` already was in global table.

# ruby - 红宝石封装

> ID：15722331
> 
> 赞同：1
> 
> 时间：2013-03-30T19:05:46.113
> 
> 标签：ruby, class, global-variables, encapsulation

我正在研究“ [Beginning Ruby](http://beginningruby.org/) ”一书，一切都很好，直到我开始封装。我知道这段代码在做什么，我只是不知道为什么用方法来设置它。

对于那些感兴趣的人[，这是本书中封装页面的链接](http://books.google.nl/books?id=A78bYfzYKZ4C&lpg=PP1&hl=nl&pg=PA131#v=onepage&q&f=false)。

```
class Person
    def initialize(name)
        set_name(name)
    end

    def name
        @first_name + ' ' + @last_name
    end

    def set_name(name)
        first_name, last_name = name.split(/\s+/)
        set_first_name(first_name)
        set_last_name(last_name)
    end

    def set_first_name(name)
        @first_name = name
    end

    def set_last_name(name)
        @last_name = name
    end
end

p = Person.new("Fred Bloggs")
puts p.name 
```

在我看来，这样的事情可以达到同样的效果：

```
class Person
    def initialize(name)
        @first_name, @last_name = name.split(/\s+/)
    end

    def name
        @first_name + ' ' + @last_name
    end
end

p = Person.new("Fred Bloggs")
puts p.name 
```

为什么要在单独的方法中设置对象变量？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-30T19:28:31.980

假设您有一个类似于您的用户名的名称。在这种情况下，只有这两种方法的类不可用，而在原始类中，您只需执行类似的操作

```
Person.new("Stephan").set_last_name("de Vries") 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-30T19:08:11.053

Setter 方法对于修改已存在对象的状态很有用。在您的情况下，人的名字是“某种”不可变的。你不能改变人的名字，你只能用新名字创建一个新人。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-30T19:09:58.150

在这里你可以找到类似的解释——[`Classes in Ruby Using Getters and Setters`](http://justintallant.com/classes-in-ruby-using-getters-and-setters/?doing_wp_cron=1364673990.6173729896545410156250)

```
p RUBY_VERSION

class Person
    def initialize(name)
        set_name(name)
    end

    def name
        @first_name + ' ' + @last_name
    end

    def set_name(name)
        first_name, last_name = name.split(/\s+/)
        set_first_name(first_name)
        set_last_name(last_name)
    end

    def set_first_name(name)
        @first_name = name
    end

    def set_last_name(name)
        @last_name = name
    end
end

John = Person.new("Fred Bloggs")
p John.name # now suppose you misrepresented the last name at time of `John` object creation. Then what would you do?

John.set_last_name "roy" # this setter method would then help you out to update the last name.

p John.name 
```

***说明：***如果您在创建对象时设置了人名，如果您在创建时输入了错误信息，则无法更改。因为您的代码的第二部分中没有设置器。

*输出：*

```
"2.0.0"
"Fred Bloggs"
"Fred roy" 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-03-30T19:16:52.293

他们几乎在教你实例变量的 getter 和 setter 的基础知识。假设您想以编写代码的方式更改变量，您必须直接访问实例变量。相反，它们创建允许您访问这些变量的方法，以便您可以在类之外使用它们，而无需完全访问实例变量。

我假设它们将通向`attr_accessor`, `attr_reader`, ，`attr_writer`它们就像为您的实例变量动态创建访问器的宏。

# c# - C# 应用程序中的类似 msaccess 的表单

> ID：15722333
> 
> 赞同：4
> 
> 时间：2013-03-30T19:05:53.100
> 
> 标签：c#, vba, ms-access

我正在使用 ms-access 开发数据库管理的前端解决方案。我必须承认 ms-access VBA 对大型应用程序的开发是一个坚实的限制，这就是为什么我一直在改变使用 c# 而不是 VBA 的想法。

事实上，很容易摆脱 ms-access 中的所有内容，除了一个东西：表单。这些在数据显示和编辑方面特别快速和高效。在最新版本的 ms-access 中，表单的行为类似于类，因此您可以在运行时专门管理同一表单的一个或多个实例。在连续模式下使用时，它们可用于“以 excel 方式”操作数据，具有行和列显示、过滤和排序的可能性。简而言之，我喜欢它。

当然可以在 c#（或其他类似语言）下对该表单对象进行逆向工程，但这可能已经完成：您是否曾经使用过库、activeX 控件或任何其他类型的附加组件可以在 c# 中操作类似 msacces 的表单吗？

编辑：根据 Renaud 的评论，我承认仅转换表单的布局部分没有兴趣，也无法转换其自定义/VBA 部分。在我们的具体情况下，我们很久以前就停止在表单中使用自定义的 VBA 代码了，表单的属性、方法和事件都是从模块中管理的。[这甚至在这里讨论过](https://stackoverflow.com/a/70572/11436)。

事实上，我们所有的表单都依赖于一个通用模板，并且自动构建在一个“表单”和一个“控件”表之外。所有底层事件管理代码的生成都是自动化的：根据它们的类型，控件与选定的事件相关联，并且事件的代码提供给应用程序模块中保存的标准\通用过程。这就是让我认为可以将我们的“ms-access 表单技术”转移到 .NET 平台的原因。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-03-31T07:58:29.003

我不知道有任何项目可以让您使用 Access 应用程序并在 .Net 或其他任何东西中重建它。我相信有一些很好的理由说明这些工具只能提供非常有限的功能。

仅转换表单布局的工具将非常缺乏用途：在 .Net 中手动（重新）创建功能布局非常容易，无论是 WinForms 还是 WPF。
每个屏幕可能需要几个小时，但速度足够快，可行。

但是，自动化工具很难将 Access 表单翻译成在 .Net 中看起来不错：
许多 Access 应用程序在 UI 方面设计不佳，控件位置选择不佳，依赖自定义配色方案和技巧来弯曲有限访问控制一个人的意志。
最重要的是，您有很多非常特定于 Access 的对象属性，如果不需要大量额外的支持代码，就无法很好地转换为 .Net。

But I think the elephant in the room is VBA: most complex Access forms are customized with VBA controlling the UI and Business logic, and that can't be translated into .Net without some significant efforts.
The fact that MS Access apps are built around a procedural, module-centric approach rather than object oriented, and that Access apps invariably have very poor separation of UI and Business logic, doesn't help the cause.
Direct translation -if it was possible at all- would just create a crappy .Net application.

There are frameworks for building simple/complex business apps that are similar to Access in many ways.

[Developer Express](http://devexpress.com) have [eXpressApp Framework](http://www.devexpress.com/Products/NET/Application_Framework/) which allows you to build and customize UI, generating the database, manage users, security, etc and will easily allow you to construct data views with close to no code (you can add as much code as you need though, it's all .Net). The UI uses their excellent controls, which are far superior in terms of behaviour and being customizable than those in Access.
That framework targets both desktop and web (you make a single project and you get both automatically). Alas, it's not really cheap you must have a Universal Subscription that costs $2200 at this date (yearly renewal is $800).

Another product, free or cheap, depending on your MSDN subscription, is [LightSwitch](http://msdn.microsoft.com/en-US/vstudio/ff796201).
LightSwitch is being viewed by some as a modern, developer-centric- successor of Access. It was originally targeting Silverlight for easy deployment in the enterprise, but recent versions are also targeting HTML5, so you can 'run your app anywhere', even tablets.
The principle here is to easily construct decent data-oriented forms and views that allow fast data entry and customized reports.

Like you, I regularly think about how existing MS Access apps could be converted into .Net, but the more I think about the details, the hairier it gets, and then you look at what people have been doing with Access, and you know that for any tool to be successful, it would have to handle all the horrible ways that office users have constructed their apps, and that's just insane.
There are just too many ways to build an Access application, and most of them are very poor and have no chance of allowing an easy conversion without changing paradigm completely, usually forcing a complete rewrite.

# jquery - Spring + Jersey + Access-Control-Allow-Origin deployed on AppFog

> ID：15722334
> 
> 赞同：1
> 
> 时间：2013-03-30T19:05:53.960
> 
> 标签：jquery, spring, servlets, jersey

Im not sure why this error is thrown while making a server call on JQuery using Ajax.

My server code is

```
@POST
@Path("/update")
@Produces({ "application/json "})
public Response update(String json) {
    ......
    ResponseBuilder builder = Response.ok("test");
    builder.header("Access-Control-Allow-Origin", "*");
    builder.header("Access-Control-Allow-Headers", "*");
    return builder.build(); 
```

And my Jquery code is

```
var URL = "http://........";

$.ajax
({
    type: "POST",
    //the url where you want to sent the userName and password to
    url: URL,
    dataType: 'json',

    success: function (data) {
    alert("ok"); 
    }
}); 
```

NOTE: The same code is working fine on Google App Engine.....

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-31T12:15:53.637

Try in Firefox, Safari or IE. I had the same issue.

# java - resultSet.next() 抛出空指针异常

> ID：15722335
> 
> 赞同：2
> 
> 时间：2013-03-30T19:05:56.587
> 
> 标签：java, sql, database, postgresql, resultset

我正在使用 JDBC 在 java 中对数据库执行查询。出于某种原因，这段代码：

```
public static void checkAllFlights() {
    String SQLStatement = "SELECT Flight.FlightID,"
                            +"(CASE WHEN (SUM(NumSeats) > 0) THEN SUM(NumSeats) ELSE 0 END)"
                            +"AS Booked_Seats,"
                            +"(CASE WHEN (MaxCapacity-SUM(NumSeats) > 0) THEN MaxCapacity-SUM(NumSeats) ELSE MaxCapacity END) AS Available_Seats,"
                            +"MaxCapacity"
                            +"FROM Flight LEFT JOIN FlightBooking ON Flight.FlightID = FlightBooking.FlightID"
                            +"GROUP BY Flight.FlightID, Flight.MaxCapacity"
                            +"ORDER BY Flight.FlightID";

    try {
        dbAccess.getConnection();
        ResultSet resultSet = dbAccess.runSimpleQuery(SQLStatement);
        System.out.println("FlightID "+"Booked_Seats "+"Available_Seats "+"Max_Capacity");      
        while (resultSet.next()) {
            int ID = resultSet.getInt(1);
            System.out.println(ID);
        }
        DBAccess.disconnect();
    } catch (Exception e) {
        e.printStackTrace(System.err);
    } 
} 
```

正在向我抛出错误：

```
java.lang.NullPointerException
        at databases2.Databases2.checkAllFlights(Databases2.java:245)
        at databases2.Databases2.main(Databases2.java:26) 
```

（“245”行指的是“while (resultSet.next())”）

resultSet.next() 和 resultSet.close() 本身也会产生相同的错误。

我已经使用基本相同的代码进一步循环结果集，它工作正常，我直接运行 SQL 并返回正确的结果，所以我很困惑为什么 resultSet.next() 可能会抛出空指针异常？

runSimpleQuery 方法：

```
public ResultSet runSimpleQuery(String sql)
        throws Exception {

    try {
        // Create a statement variable to be used for the sql query
        statement = connection.createStatement();

        // Perform the update
        return statement.executeQuery(sql);
    } catch (SQLException e) {
        // Problem encountered
        statement = null;
        return null;
    } 
```

更新：在逐步完成之后，runSimpleQuery 确实返回了 null，这是它不应该做的事情，除非抛出 sql 异常......

**Update:** Solved. Whilst the query was right, apparently I messed up my string concatenation so that it didn't include spaces where it should and it worked when testing because I was an idiot and tested the query by copy-pasting from code rather than pulling the actual variable out of the debugger....

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-09-19T10:40:22.377

I ran into the same issue and I discovered that if other thread uses the same connection the ResultSet will throw a NullPointerException after the other sql is executed.

```
sys.scheduler 06:28:00,017 [SchedulerReloader] ERROR - java.lang.NullPointerException
sys.scheduler 06:28:00,018 [SchedulerReloader] ERROR - com.mysql.jdbc.ResultSetImpl.next(ResultSetImpl.java:7009) 
```

My process is a long running process with 200k rows... I will use a particular connection for this and discard it after the process is done.

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-30T19:56:07.307

Have you checked `connection` object? is it returning proper `connection` ? it might be possible that connection is `null`..and it caught in `catch block` and returning null. You should debug that .. by printing the `exception` in catch block ..so that you may come to know the exact reason for this `null`

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-30T19:13:11.097

Debug your runSimpleQuery method, it returns null, that's why resultset.getNext() throw NullPointerException

# javascript - 从对该变量调用的方法中获取一个变量，而不使用参数

> ID：15722338
> 
> 赞同：0
> 
> 时间：2013-03-30T19:06:12.243
> 
> 标签：javascript, parameters, monkeypatching

我是 javascript 新手，有一个可能很愚蠢的问题。

**语境**

`or`是我自己通过猴子修补为 String 类编写的一种方法。

**问题**

我希望能够`or`像这样调用该方法：

```
'dog'.or('cat') 
```

问题是该`or`方法需要知道调用它的字符串。

无论如何可以`'dog'`从`or`方法内部访问而不将其作为参数传递？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-30T19:08:57.847

您可以使用`this`关键字访问它。[阅读更多。](https://developer.mozilla.org/en-US/docs/JavaScript/Reference/Operators/this)

这是一个例子：

```
String.prototype.show = function ()
{
    alert(this);
}
"Hello, World!".show(); 
```

[在行动中看到它。](http://jsfiddle.net/kendfrey/WmACS/)

# javascript - Dynamically synchronize scolling between two divs using jQuery draggable

> ID：15722345
> 
> 赞同：1
> 
> 时间：2013-03-30T19:06:54.187
> 
> 标签：javascript, jquery, vertical-scrolling

I have been trying to create a synchronized scrolling between two divs using jQuery draggable but I am having trouble figuring out the correct "equation" to get it to work properly.

Basically, I have two sides – left and right. The left side is going to hold information (small scale...the orange rectangle in my example) as well as a "magnifier" (the purple and black box in my example) which the user will be able to drag up and down over the information using jQuery draggable. The right side is going to hold a copy of that same information, only at a much larger scale (the tall pink box in my example).

I am attempting to make it so that when dragging the "magnifier" over the information on the left hand side, the larger scale of the information on the right hand side scrolls up and down in sync with the "magnifier". **My problem** is getting the position of the large scale div (*in relation to the main wrapper*) to match up with the position of the *center* of the "magnifier" (*in relation to the smaller div that hold the small scale information*). This needs to work dynamically as in no matter what size either divs are, it is always the correct relation.

我还希望主包装的中心充当大规模信息的“顶部”或焦点......所以当放大镜位于小规模信息的顶部时，大规模信息的顶部是与主包装的垂直中心对齐。任何帮助表示赞赏，如果有任何问题，请告诉我。谢谢！

这是一个工作示例的链接：http: [//people.rit.edu/bjc7188/](http://people.rit.edu/bjc7188/)

这是我一直在编写的一些脚本：

```
$(document).ready(function() {

        $("#dragMe").draggable({ 

            axis: "y",
            drag: function(event, ui)
            { 
                var $target = ($("#toZoom").height()/2) - ((($("#dragMe").position().top + $("#dragMe").height()/2)*($("#scroller").height()/$("#toZoom").height()))); 

                $("#scroller").css({ top: ($target + $("#dragMe").height()/2) + "px" });
            }, 
        });

    }); 
```

这有点草率，但它确实适用于我正在尝试做的事情**。**但是，当左侧橙色 div 的大小发生更改时，它不起作用。无论粉红色或橙色 div 的大小如何，我都需要一个能够动态工作的方程。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-30T19:44:18.470

我们去吧。

```
$(document).ready(function() {

function adjustPositions(){
    var wrapperObj=$("#wrapper");
    var magnifierObj=$("#dragMe");
    var scrollerObj=$("#scroller");
    var zoomObj=$("#toZoom");

    var magCenterPosition=magnifierObj.offset().top+magnifierObj.height()/2-zoomObj.offset().top;        
    var magRelativePosition=magCenterPosition/zoomObj.height();

    var newScrollerPosition=wrapperObj.height()/2-magRelativePosition*scrollerObj.height();
    scrollerObj.css("top",newScrollerPosition+"px");
}

$("#dragMe").draggable({                 
    axis: "y",
    containment: $("#wrapper"),
    drag: function(event, ui)
    { 
        adjustPositions();
    } 
});

}); 
```

**Here's a [working jsFiddle example](http://jsfiddle.net/opherv/dLyP2/).**

The example presents some sliders for playing with orange box\magnifier height.

Notice that I've changed some of your CSS to reflect the flexibility on box sizing. Mainly, the wrapper container now doesn't have a set height. Also the orange box is now relatively positioned, with margins the size of half the magnifier height, to correctly adjust the height of the wrapper container.

# c# - 如何强制数字文本框控件不接受空字符串？

> ID：15722346
> 
> 赞同：0
> 
> 时间：2013-03-30T19:07:04.060
> 
> 标签：c#, numeric-textbox

我有一个winform应用程序。

我正在使用数字文本框控件。我的问题是我可以删除该值并离开控制权。当我这样做时 - 我删除它之前的值是控件的值，但显示的是一个空值。重要的是要提到 - 控件的默认值是 0。我想如果用户删除控件的值，我想将控件的值设置为 0。

我的问题是：

如何强制数字文本框控件不显示空值？

谢谢 。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-30T19:09:43.977

好吧，你可以写一个简单的验证

```
private void textBox1_TextChanged(object sender, EventArgs e)
{
    if (String.IsNullOrEmpty(textBox1.Text))
    {
        textBox1.Text = "0";
    }
} 
```

# c++ - 在 C++ 中使用向量进行二进制搜索

> ID：15722348
> 
> 赞同：0
> 
> 时间：2013-03-30T19:07:10.817
> 
> 标签：c++, algorithm, binary-search

我正在为大学作业编写二进制搜索方法，虽然我觉得这是正确的做法，但我觉得运行时间比它应该的要长.. 有人看到这有什么错误吗？`iterator`是一个自定义类，没有什么花哨的，可以满足您的期望。`vec`是一个迭代器向量，它指向一个更大的链接列表，其中包含我“真正”搜索的内容

```
iterator searchVec(const I& item)
{
    int left = 0;
    int right = (int)vec.size()-1;
    int mid = (right+left)/2;

    while(*vec.at(left) != *vec.at(right)){
        mid = (right+left)/2;
        if (mid == 0 || mid == vec.size()-1){
            //nothign else to search, we didnt find anything
            return *vec.end();
        }
        if (*vec.at(mid) == item){
            return vec.at(mid);
        }
        else if (item > *vec.at(mid)){
            left = mid;
        }
        else if (item < *vec.at(mid)){
            right = mid;
        }
    }
    return vec.at(mid);
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-30T22:49:06.243

一些想法：

*   您正在`std::vector::at`使用[与`std::vector::operator[]`](https://stackoverflow.com/questions/3269809/stdvectorat-vs-operator-surprising-results-5-to-10-times-slower-f).
*   您不能取消引用`vec.end()`. 通常，如果您想向调用者发出未找到任何项目的信号，则会返回它。但是在这里，由于您不返回 的迭代器`vec`，也许您应该使用布尔输出参数或异常来发出信号。
*   循环条件对我来说看起来不正确。它似乎应该`left <= right`代替`*vec[left] != *vec[right]`. 然后循环的目的是选择项目。如果我们跳出循环，则找不到任何项目。
*   如评论中所述，退出条件是无用的，并且会阻止查找第一个和最后一个元素。

    ```
     if (mid == 0 || mid == vec.size()-1)
            //nothign else to search, we didnt find anything
            return *vec.end();
        } 
    ```

这是一个稍微更正的代码：

```
iterator searchVec(const I& item)
{
    int left = 0;
    int right = (int)vec.size()-1;
    int mid = (right+left)/2;

    while(left <= right) // corrected condition
    {
        mid = (right+left)/2;
        iterator it = vec[mid]; // avoid recomputing vec[mid]
        if (*it == item) // this can be moved in a else {} statement,
            return it;   // after the else if (no impact on performances I think)
        else if (item > *it)
            left = mid + 1; // you were not strictly decreasing the interval
        else if (item < *it)
            right = mid - 1; // same here
    }
    throw not_found();
} 
```

# html - 溢出和浮动

> ID：15722351
> 
> 赞同：0
> 
> 时间：2013-03-30T19:07:13.917
> 
> 标签：html, css

我有这些 html 标记

```
 <div class="chatbar">
        <div class="chatbox" style="margin-right:0px"> first</div>
        <div class="chatbox" style="margin-right:5px"> chatbox</div>
        <div class="chatbox" style="margin-right:10px"> chatbox</div>
        <div class="chatbox" style="margin-right:15px"> chatbox</div>
             <div class="chatbox" style="margin-right:20px"> chatbox</div>
              <div class="chatbox" style="margin-right:25px"> chatbox</div>

    </div> 
```

我想拥有带有水平滚动条的聊天栏 div .. 但它不起作用，这是我的 css

```
 .chatbox{
 float:right;

   height: 180px;
 width: 250px;
 margin-right:10px;
border-right:1px solid red;
border-left:1px solid red;
}

.chatbar {
border: 1px solid blue;
  overflow-x:scroll;
overflow-y:hidden;
width: 980px;
height: 200px;
position: relative;
bottom:10px;

 float:right;//

} 
```

元素相互附加。希望找到解决方案。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-30T19:08:46.363

尝试在您的 .chatbox CSS 中添加“位置：相对”？

```
 .chatbar { width:200px; overflow-x:auto; overflow-y:hidden; } 
    .wrapper { width: 600px; } 
    .chatbox { width:100px; float:left; } 

    <div class="chatbar"> 
        <div class="wrapper"> 
            <div class="chatbox"> first</div> 
            <div class="chatbox"> chatbox</div> 
            <div class="chatbox"> chatbox</div> 
            <div class="chatbox" > chatbox</div> 
            <div class="chatbox" > chatbox</div> 
            <div class="chatbox" > chatbox</div>  
       </div> 
   </div> 
```

# gtk3 - 如何动态插入和删除行

> ID：15722357
> 
> 赞同：1
> 
> 时间：2013-03-30T19:07:49.610
> 
> 标签：gtk3, vala

我正在寻找一个可以动态调整大小的小部件。我需要追加和删除行。Grid 提供了一些方法，例如**gtk_grid_insert_row**或**gtk_grid_insert_next_to**，但我没有找到任何**xxx_remove_xxx**方法。

我正在开发一个简单的 http 客户端（用于测试 api）。我正在添加动态附加和删除“GET”变量的可能性。

UI 由包含组合框（用于变量选择）、条目（用于其值）和最后一行的删除按钮的行组成。

每次我设置一个变量时，都会附加一个新行（新的可用变量）。每次我取消设置变量时，都会删除相应的行。

![在此处输入图像描述](../Images/073b584b11a81d6fdeb2e833b04dc269.png)

谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-08-17T09:08:07.517

我认为您正在寻找的小部件是[Gtk.ListBox](https://developer.gnome.org/gtk3/stable/GtkListBox.html)。它是一个容器，因此您可以轻松地[添加](https://developer.gnome.org/gtk3/stable/GtkContainer.html#gtk-container-add)和[删除](https://developer.gnome.org/gtk3/stable/GtkContainer.html#gtk-container-remove)行。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-03T00:50:53.313

Gtk.Grid 没有 remove 方法；但 Gtk.Container 可以。由于 Grid 是一个 Container，您可以使用 gtk_container_remove。

相关文档在这里： [https ://developer.gnome.org/gtk3/3.8/GtkContainer.html#gtk-container-remove](https://developer.gnome.org/gtk3/3.8/GtkContainer.html#gtk-container-remove)

# linux - linux shell中case中的复杂表达式

> ID：15722359
> 
> 赞同：1
> 
> 时间：2013-03-30T19:08:00.130
> 
> 标签：linux, shell

我想做类似的事情.. 如果标记在 80-100 之间，它将显示 A+ 如果标记在 70-79 之间，它将显示 A 等

我想用“case in esac”而不是 if-elif-fi

但是我该如何做复杂的表达以防万一

```
echo “enter mark”
read mark
case $mark in
(( mark>=80 && mark<=100 ))) echo “A+”
..
..
..
esac 
```

我试过这个。使用 if-elif-fi 很容易，但在“案例”中我应该做什么谢谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-30T19:24:42.530

您没有指定外壳，所以让我插入`zsh`：

```
#!/bin/zsh

echo “enter mark”
read mark
case $mark in
    <80-100>) echo "A+" ;;
    <70-79>) echo "A" ;;
    ...
esac 
```

也就是说，POSIX`case`语句（以及`case`大多数 shell 中的语句）旨在匹配文本模式，而不是算术比较。您*可以*使用`case`语句，但它可能会变得丑陋。

```
case $mark in
    [89]?|100) echo "A+" ;;
    7?) echo "A" ;;
    ...
esac 
```

在这种情况下，情况还不错，因为您没有像 那样`65-74`的范围，但是`if`声明会更好。

```
if (( mark >=80 && mark <=100 )); then
    echo "A+"
elif (( mark >=70 )); then
    echo "A"
elif ...; then
    ...
else
    ...
fi 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-30T19:15:02.010

如果条件更容易使用

```
if [[ ${mark} -ge 80 && ${mark} -le 100 ]]; then
        echo "A+"
fi 
```

但是如果你仍然需要大小写，那么你需要指定一个模式

```
case ${mark} in
8[0-9]|9[0-9]|100)
        echo  "A+"
esac 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-30T19:36:21.720

在常规的 POSIX-ish shell 中：

```
echo "enter mark"
read mark
case "$mark" in
([89][0-9]|100) echo "A+";;
(7[0-9])        echo "Grade";;
(6[0-9])        echo "Grade";;
...
esac 
```

表达式的前导左括号是可选的。

# c# - 在文件末尾追加字节数组

> ID：15722365
> 
> 赞同：0
> 
> 时间：2013-03-30T19:08:47.707
> 
> 标签：c#, file, filestream, offset, filewriter

我想将字节数组附加到现有文件。它**必须**在文件的末尾。我已经可以设法在文件的开头写了。（感谢stackoverflow ;)）。

代码：

```
public bool ByteArrayToFile(string _FileName, byte[] _ByteArray)
{
   try
   {
      // Open file for reading
      System.IO.FileStream _FileStream = 
         new System.IO.FileStream(_FileName, System.IO.FileMode.Create,
                                  System.IO.FileAccess.Write);
  // Writes a block of bytes to this stream using data from
  // a byte array.
  _FileStream.Write(_ByteArray, 0, _ByteArray.Length);

  // close file stream
  _FileStream.Close();

  return true;
   }
catch (Exception _Exception)
{
  // Error
  Console.WriteLine("Exception caught in process: {0}",
                    _Exception.ToString());
}

// error occured, return false
return false; 
```

}

从这里得到它：

[关联](https://stackoverflow.com/questions/6397235/write-bytes-to-file)

但我需要在文件末尾

提前致谢。

找到了解决方案：

```
FileStream writeStream;
        try
        {
            writeStream = new FileStream(_FileName, FileMode.Append,FileAccess.Write);
            BinaryWriter writeBinay = new BinaryWriter(writeStream);
            writeBinay.Write(_ByteArray);
            writeBinay.Close();
        }
        catch (Exception ex)
        {
            Console.WriteLine(ex.ToString());
        } 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-30T19:10:19.793

而不是使用`System.IO.FileMode.Create`，使用`System.IO.FileMode.Append`- 它完全符合您的需要。

来自MSDN 上的[`FileMode`枚举：](http://msdn.microsoft.com/en-us/library/system.io.filemode.aspx)

> Append: Opens the file if it exists and seeks to the end of the file, or creates a new file. This requires `FileIOPermissionAccess.Append` permission. `FileMode.Append` can be used only in conjunction with `FileAccess.Write`. Trying to seek to a position before the end of the file throws an `IOException` exception, and any attempt to read fails and throws a `NotSupportedException` exception.

# c# - 在 c# 中打印 LevenshteinDistance 矩阵

> ID：15722371
> 
> 赞同：1
> 
> 时间：2013-03-30T19:09:08.417
> 
> 标签：c#, algorithm

我已经在 c# 中实现了 LevenshteinDistance 算法，如下所示。这段代码运行良好。但出于调试目的，我想打印矩阵但无法决定应该在哪里放置 Print 语句。

```
using System;
using System.Collections.Generic;
using System.Linq;
using System.Text;

namespace _Levenshtein_
{
    class Program
    {
        public static void Print(int[,] data)
        {
            for (int i = 0; i < data.GetUpperBound(0); i++)
            {
                for (int j = 0; j < data.GetUpperBound(1); j++)
                {
                    Console.Write(data[i, j] + " ");
                }
            }
            Console.WriteLine();
        }
        public static int LevenshteinDistance(string source, string target)
        {
            if (String.IsNullOrEmpty(source))
            {
                if (String.IsNullOrEmpty(target)) return 0;
                {

                    return target.Length;
                }
            }
            if (String.IsNullOrEmpty(target)) return source.Length;

            if (source.Length > target.Length)
            {
                var temp = target;
                target = source;
                source = temp;
            }

            var m = target.Length;
            var n = source.Length;
            var distance = new int[2, m + 1];
            // Initialize the distance 'matrix'
            for (var j = 1; j <= m; j++) distance[0, j] = j;

                Console.Write(target + " ");

            var currentRow = 0;
            for (var i = 1; i <= n; ++i)
            {
                currentRow = i & 1;
                distance[currentRow, 0] = i;
                var previousRow = currentRow ^ 1;
                Console.WriteLine(source[i-1] + " " );
                for (var j = 1; j <= m; j++)
                {
                    var cost = (target[j - 1] == source[i - 1] ? 0 : 1);

                    distance[currentRow, j] = Math.Min(Math.Min(distance[previousRow, j] + 1,distance[currentRow, j - 1] + 1),distance[previousRow, j - 1] + cost);
                    Print(distance);        
                }
                Console.WriteLine();
            }
            return distance[currentRow, m];
        }
        static void Main(string[] args)
        {
            LevenshteinDistance("Sunday", "Saturday");
        }
    }
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-30T19:24:32.013

我添加了注释以打印距离矩阵。

```
// `target` string in first ROW, each char in 4 width
// for (var j = 0; j <=target.Length; j++)
//    Console.Write(target[j] + "   ") 
for (var i = 1; i <= n; ++i)
{
    currentRow = i & 1;
    distance[currentRow, 0] = i;
    var previousRow = currentRow ^ 1;
    // print: `source[i]`  ith char only one Console.Write(source[i] + " ")
    // Console.Write(source[i] + " ") 
    for (var j = 1; j <= m; j++)
    {
        var cost = (target[j - 1] == source[i - 1] ? 0 : 1);
        distance[currentRow, j] = Math.M........);
        // write distance in 3 width
           //Console.Write(distance[currentRow, j] + " ")  
    }       

      // Console.Write("\n")
} 
```

**编辑**：

长度“星期日”= 6
长度“星期六”= 8

```
if (source.Length > target.Length){  // target is large .
    // swap means 
} 
```

所以目标是“星期六”字符串。（水平字符串）
和“星期日”是垂直的

您将获得如下图所示的输出：
![在此处输入图像描述](../Images/88b10aab82009c561389c9578d162d91.png)

在[**Codepade**](http://codepad.org/04LTcxrS)上是我的工作 C 代码，可以打印编辑距离矩阵，如：

```
 S  a  t  u  r  d  a  y  

S     0  1  2  3  4  5  6  7
u     1  1  2  2  3  4  5  6
n     2  2  2  3  3  4  5  6
d     3  3  3  3  4  3  4  5
a     4  3  4  4  4  4  3  4
y     5  4  4  5  5  5  4  3 
```

# c++ - pthread executes after expected

> ID：15722373
> 
> 赞同：0
> 
> 时间：2013-03-30T19:09:16.740
> 
> 标签：c++, linux, multithreading, ubuntu, posix

I'm trying to compress a file consisting of 1's and 0's as part of an assignment. I have succeeded in doing this, however to get a feel for threads I'm trying to display a simple progress display using a pthread. The problem is that the thread executes AFTER the compression is complete. Here is my program:

```
 void* compressShow(void *)
    {
        pthread_setcancelstate(PTHREAD_CANCEL_ENABLE, NULL);
        pthread_setcanceltype(PTHREAD_CANCEL_ASYNCHRONOUS, NULL);

    cout<<"Compressing";

    while(1)
    {
        sleep(1);
        cout<<".";  
        sleep(1);
        cout<<".";
        sleep(1);
        cout<<".";
        sleep(1);
        cout<<".";  
        cout<<"\b\b\b\b";
    }

}

void compression(char *buffer, ofstream &outFile)
{
    //Some Compression code. Function executes each time a new line is lifted off the file. 
}  

int main(int argc, char *argv[])
{   

    if(argc < 3)
    {
        cout<<"You entered an insufficient number of command line arguments."<<endl;
    }

    else
    {
        ifstream inFile;
        inFile.open(argv[1], ios::in);
        ofstream outFile(argv[2]);

        char buffer[100] = {NULL};

        pthread_t thread;
        pthread_attr_t attribute;

        pthread_attr_init(&attribute);
        pthread_attr_setdetachstate(&attribute, PTHREAD_CREATE_DETACHED);

        pthread_create(&thread, &attribute, compressShow, (void *)5);

        while(inFile.good())
        {
     `     inFile.getline(buffer, 100, '\n');
           compression(buffer, outFile);
        }

        pthread_cancel(thread);
        //pthread_join(thread, NULL);
    }

    return 0;

} 
```

Since I'm creating the thread BEFORE the while loop, I expect it to run concurrently with the loop that is doing the compression.

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-30T20:03:59.057

This has nothing to do with threads. See the same effect with

```
int main()
{
    compressShow(0);
} 
```

Try sending the `flush` manipulator from time to time.

# javascript - 嵌入式事件列表代码占据整页

> ID：15722374
> 
> 赞同：0
> 
> 时间：2013-03-30T19:09:25.670
> 
> 标签：javascript, eventbrite

当我嵌入 EventBrite 提供的代码以显示我在我的网站上组织的事件时，页面加载正常，但随后 JavaScript 扩展以占据整个页面。

我该如何阻止这种情况发生？我已经输入了我的组织者 ID 和 API 密钥。以下是提供的示例代码：

```
<script type='text/javascript' src="//ajax.googleapis.com/ajax/libs/jquery/1.7.2/jquery.min.js"></script>
<script type='text/javascript' src="http://evbdn.eventbrite.com/s3-s3/static/js/platform/Eventbrite.jquery.js"></script>
<script type='text/javascript'>
$(document).ready(function(){
  Eventbrite({'app_key': $APP_KEY}, function(eb){
    eb.organizer_list_events( {'id': 561037966, 'statuses': "live,started"}, function( response ){
      document.write(eb.utils.eventList( response, eb.utils.eventListRow ));
    });
  });
});​
</script> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-04T21:20:50.363

这与 Evenbrite javascript API 无关。布局由页面的标记和 CSS 样式决定。该`eventList`方法返回 HTML，因此您可以将其放入特定元素并适当地设置样式。例如：

```
<head>
  <script>
    $(document).ready(function(){
      Eventbrite({'app_key': $APP_KEY}, function(eb){
        eb.organizer_list_events( {'id': 561037966, 'statuses': "live,started"}, function( response ){
          var event_list_html = eb.utils.eventList( response, eb.utils.eventListRow );
          $("#event-list").html(event_list_html);
        });
      });
    });
  </script>

  <style>
    #event-list {
      width: 400px;
      border: 1px solid black;
    }   
  </style>
</head>

<body>
  <div id="event-list"></div>
</body> 
```

# java - 坏 xml 块 3 线性布局和 2 日历

> ID：15722380
> 
> 赞同：3
> 
> 时间：2013-03-30T19:10:10.187
> 
> 标签：java, android, xml, android-layout, android-widget

嗨，我正在尝试创建一个 xml 文件，其中包括 1-标签“任务”和用于用户输入的文本视图 2-标签“价格”和用于用户输入的文本视图 3-标签“类别”和带有 6 个选项的组合框 4-标签“结束日期”和旁边的日历 5-标签“提醒日期”和旁边的日历 最后一个用于保存问题的按钮是我在 Eclipse 上找不到组合框，第二个日历和按钮不出现在这里是代码

xml文件

```
 <?xml version="1.0" encoding="utf-8"?> 
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:layout_width="match_parent"
    android:layout_height="match_parent"
    android:orientation="vertical" >
<!-- Name Label -->
    <TextView android:layout_width="fill_parent"
        android:layout_height="wrap_content"
        android:text="@string/tsk"
        android:paddingLeft="10dip"
        android:paddingRight="10dip"
        android:paddingTop="10dip"
        android:textSize="17dip"/>

     <!-- Input Name -->
    <EditText 
        android:layout_width="fill_parent"
        android:layout_height="wrap_content"
        android:layout_margin="5dip"
        android:layout_marginBottom="15dip"
        android:singleLine="true"/> 

      <!-- Price Label -->
    <TextView android:layout_width="fill_parent"
        android:layout_height="wrap_content"
        android:text="@string/price"
        android:paddingLeft="10dip"
        android:paddingRight="10dip"
        android:paddingTop="10dip"
        android:textSize="17dip"/> 

    <!-- Input Price -->
    <EditText 
        android:layout_width="fill_parent"
        android:layout_height="wrap_content"
        android:layout_margin="5dip"
        android:layout_marginBottom="15dip"
        android:singleLine="true"
        android:inputType="numberDecimal"/> 

    <!-- category Label -->
    <TextView android:layout_width="fill_parent"
        android:layout_height="wrap_content"
        android:text="@string/cat"
        android:paddingLeft="10dip"
        android:paddingRight="10dip"
        android:paddingTop="10dip"
        android:textSize="17dip"/> 

    <!-- Input category -->

    <EditText
        android:layout_width="fill_parent"
        android:layout_height="32dp"
        android:layout_margin="5dip"
        android:layout_marginBottom="15dip"
        android:gravity="top"
        android:lines="4" />

<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:orientation="horizontal"
    android:paddingTop="4dip"
    android:paddingBottom="6dip"
    android:layout_width="fill_parent"
    android:layout_height="fill_parent">
    <TextView
        android:layout_width="90dip"
        android:layout_height="wrap_content"
        android:layout_weight="0.00"
        android:text="@string/de" />
    <Calender
        android:layout_width="wrap_content"
        android:layout_height="36dp" />
      </LinearLayout>

<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:orientation="horizontal"
    android:paddingTop="4dip"
    android:paddingBottom="6dip"
    android:layout_width="fill_parent"
    android:layout_height="fill_parent">
    <TextView
        android:layout_width="90dip"
        android:layout_height="wrap_content"
        android:layout_weight="0.00"
        android:text="@string/de" />
    <Calender
        android:layout_width="wrap_content"
        android:layout_height="66dp" />
      </LinearLayout>

<!-- Button Create task -->
    <Button 
        android:layout_width="fill_parent"
        android:layout_height="wrap_content"
        android:text="@string/save"/> 

</LinearLayout> 
```

并且有很多错误

```
[2013-03-30 21:46:01 - checklist] W/ResourceType(12304): Bad XML block: header size 301 or total size 0 is larger than data size 0
[2013-03-30 21:46:01 - checklist] C:\Users\Najd\workspace\checklist\res\values\strings.xml:4: error: Found tag id where item is expected
[2013-03-30 21:46:01 - checklist] C:\Users\Najd\workspace\checklist\res\layout\add_task.xml:7: error: Error: No resource found that matches the given name (at 'text' with value '@string/tsk').
[2013-03-30 21:46:01 - checklist] C:\Users\Najd\workspace\checklist\res\layout\add_task.xml:24: error: Error: No resource found that matches the given name (at 'text' with value '@string/price').
[2013-03-30 21:46:01 - checklist] C:\Users\Najd\workspace\checklist\res\layout\add_task.xml:42: error: Error: No resource found that matches the given name (at 'text' with value '@string/cat').
[2013-03-30 21:46:01 - checklist] C:\Users\Najd\workspace\checklist\res\layout\add_task.xml:67: error: Error: No resource found that matches the given name (at 'text' with value '@string/de').
[2013-03-30 21:46:01 - checklist] C:\Users\Najd\workspace\checklist\res\layout\add_task.xml:80: error: Error: No resource found that matches the given name (at 'text' with value '@string/save').
[2013-03-30 21:46:01 - checklist] C:\Users\Najd\workspace\checklist\res\menu\activity_main_task.xml:3: error: Error: No resource found that matches the given name (at 'title' with value '@string/menu_settings'). 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-31T17:53:00.200

我使用了一种线性布局，现在就足够了

```
<?xml version="1.0" encoding="utf-8"?> 
    <LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
        android:layout_width="match_parent"
        android:layout_height="match_parent"
        android:orientation="vertical" >

     <!-- Name Label -->

    <TextView
        android:layout_width="fill_parent"
        android:layout_height="wrap_content"
        android:paddingLeft="10dip"
        android:paddingRight="10dip"
        android:paddingTop="10dip"
        android:text="@string/tsk"
        android:textSize="17dip"
        android:gravity="right" />

    <!-- Input Name -->

    <EditText
        android:layout_width="fill_parent"
        android:layout_height="wrap_content"
        android:layout_margin="5dip"
        android:layout_marginBottom="15dip"
        android:singleLine="true" />

    <!-- Price Label -->

    <TextView
        android:layout_width="fill_parent"
        android:layout_height="wrap_content"
        android:paddingLeft="10dip"
        android:paddingRight="10dip"
        android:paddingTop="10dip"
        android:text="@string/price"
        android:textSize="17dip" 
        android:gravity="right"/>

    <!-- Input Price -->

    <EditText
        android:layout_width="fill_parent"
        android:layout_height="wrap_content"
        android:layout_margin="5dip"
        android:layout_marginBottom="15dip"
        android:inputType="numberDecimal"
        android:singleLine="true" />

    <!-- category Label -->

    <TextView
        android:layout_width="fill_parent"
        android:layout_height="wrap_content"
        android:paddingLeft="10dip"
        android:paddingRight="10dip"
        android:paddingTop="10dip"
        android:text="@string/cat"
        android:textSize="17dip"
        android:gravity="right" />

    <!-- Input category -->

    <EditText
        android:layout_width="fill_parent"
        android:layout_height="32dp"
        android:layout_margin="5dip"
        android:layout_marginBottom="15dip"
        android:gravity="top"
        android:lines="4" />

    <TextView
        android:layout_width="match_parent"
        android:layout_height="wrap_content"
        android:gravity="right"
        android:text="@string/de" />

    <CalendarView
        android:id="@+id/calendarView1"
        android:layout_width="wrap_content"
        android:layout_height="59dp"
        android:gravity="right" />

    <TextView
        android:layout_width="match_parent"
        android:layout_height="wrap_content"
        android:layout_weight="0.20"
        android:gravity="right"
        android:text="@string/dr" />

    <CalendarView
        android:id="@+id/calendarView2"
        android:layout_width="wrap_content"
        android:layout_height="40dp"
        android:layout_weight="0.39"
        android:gravity="right" />

    <Button
        android:layout_width="fill_parent"
        android:layout_height="wrap_content"
        android:text="@string/save" />

</LinearLayout> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-30T21:26:56.587

我想，你打错了：string.xml 应该重命名为 strings.xml

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-30T19:15:48.107

您指的是诸如等之类的字符串 `@string/save`，`@string/de`但它们不存在。将它们添加到您的 strings.xml 文件中：

```
<string name="save">Save</string> 
```

# javascript - 使用新数据和刻度标签重绘 JQplot 条形图

> ID：15722383
> 
> 赞同：1
> 
> 时间：2013-03-30T19:10:25.807
> 
> 标签：javascript, jquery, json, jqplot

我的代码成功绘制了一个图表，其中包含作为`JSON`对象检索的数据和刻度标签`PHP`。现在我想刷新图表，但数据和刻度标签略有不同，但不创建新图表。

```
$.jqplot.config.enablePlugins = true;
    var freqs1 = [];
    var freqlabels1 = [];

    var dataRendered1 = $.ajax({
        async: false,
        url: 'MY_URL',
        dataType: 'json',
        success: function(data) {
            if (data.length) {
                freqs1 = data[0];
                freqlabels1 = data[1];
            }
        }
    });

    var plot1 = $.jqplot('chartdiv', [freqs1], {
        animate: !$.jqplot.use_excanvas,
        seriesDefaults:{
            renderer:$.jqplot.BarRenderer,
            pointLabels: {
                show: true
            },
            rendererOptions: {
                barWidth: 12
            }
        },
        title:'Test',
        axes: {
            xaxis: {
                renderer: $.jqplot.CategoryAxisRenderer,
                ticks: freqlabels1,
                label: "Test 1",
                tickOptions:{textColor : 'rgb(39, 125, 175)', fontSize: '9pt'}
            },
            yaxis: {
                label: "Test 2",
                labelRenderer: $.jqplot.CanvasAxisLabelRenderer,
                tickOptions:{textColor : 'rgb(39, 125, 175)', fontSize: '9pt'}
            }
        },
        highlighter: { show: true }
    }); 
```

现在，当单击按钮时，可以说我有一个 ajax 调用来获取新数据和刻度标签

```
 $(document).on('click', '#refresh_new', function() {
     $.ajax({
        async: false,
        url: 'MY_URL',
        dataType: 'json',
        success: function(data) {
                 var newData = data[0];
                 var newTicks = data[1];

                 //HOW DO I REFRESH CHART WITH NEW DATA AND TICKS FOR x-AXIS
        }
    });
 }); 
```

# ios - UITextField control events: UIControlEventEditingChanged vs. UIControlEventAllEditingEvents

> ID：15722387
> 
> 赞同：1
> 
> 时间：2013-03-30T19:10:46.247
> 
> 标签：ios, objective-c

What is the difference between these two `UIControlEvents`?

The documentation says:

```
UIControlEventAllEditingEvents   // All editing touches for UITextField objects.
UIControlEventEditingChanged     // A touch making an editing change in a UITextField object. 
```

Especially `UIControlEventAllEditingEvents` is not clear to me, as I don't get what *'all editing touches'* mean.

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-30T19:13:24.543

Presumably, the event `UIControlEventAllEditingEvents` occurs whenever one of these occur:

```
UIControlEventEditingDidBegin 
UIControlEventEditingChanged
UIControlEventEditingDidEnd 
UIControlEventEditingDidEndOnExit 
```

# jax-ws - jaxws-api 2.2 not loaded in maven build

> ID：15722399
> 
> 赞同：4
> 
> 时间：2013-03-30T19:12:41.193
> 
> 标签：jax-ws, cxf, maven-3, endorsed

I have generated Java code with Apache CXF tool wsdl2java. In the comments of my service it says that I should endorse Jaxws API 2.2 but don't know what it means. In my Maven POM I have this:

```
<dependency>
        <groupId>javax.xml.ws</groupId>
        <artifactId>jaxws-api</artifactId>
        <version>2.2</version>
</dependency> 
```

On build, I get these errors in Maven:

> cannot find symbol symbol : constructor Service(java.net.URL,javax.xml.namespace.QName,javax.xml.ws.WebServiceFeature[])

I have checked JAX-WS API 2.2 and it actually has this constructor...what should I do?

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-03-30T19:16:08.817

JAX-WS is part of the JDK. To use a newer version, you have to put it in the endorsed directory. To do that with Maven, you have to configure it with the maven-compiler-plugin.

[This page](http://jax-ws-commons.java.net/jaxws-maven-plugin/usage.html) has the gory details.

The critical snippet is:

```
 <!-- Don't forget to use endorsed with JAX-WS 2.2 on Java 6 !! -->
  <plugin>
    <artifactId>maven-compiler-plugin</artifactId>
    <configuration>
      <source>1.6</source>
      <target>1.6</target>
      <compilerArguments>
        <endorseddirs>${project.build.directory}/endorsed</endorseddirs>
      </compilerArguments>
    </configuration>
  </plugin>
  <plugin>
    <groupId>org.apache.maven.plugins</groupId>
    <artifactId>maven-dependency-plugin</artifactId>
    <version>2.3</version>
    <executions>
      <execution>
        <phase>validate</phase>
        <goals>
          <goal>copy</goal>
        </goals>
        <configuration>
          <outputDirectory>${project.build.directory}/endorsed</outputDirectory>
          <silent>true</silent>
          <artifactItems>
            <artifactItem>
              <groupId>javax.xml.bind</groupId>
              <artifactId>jaxb-api</artifactId>
              <version>2.2.4</version>
              <type>jar</type>
            </artifactItem>
            <artifactItem>
              <groupId>javax.xml.ws</groupId>
              <artifactId>jaxws-api</artifactId>
              <version>2.2.8</version>
              <type>jar</type>
            </artifactItem>
          </artifactItems>
        </configuration>
      </execution>
    </executions>
  </plugin> 
```

# c# - How to make a child thread sleep without freezing UI thread in WPF application?

> ID：15722400
> 
> 赞同：2
> 
> 时间：2013-03-30T19:12:45.113
> 
> 标签：c#, wpf, multithreading, sleep, thread-sleep

I have a WPF application and I have individual threads running to accomplish tasks and I would like to have the current thread to go to sleep something like,

> Thread.CurrentThread.Sleep(10000)

I do see it in Java but not in C#. I do know that I only have only one UI thread, so if I use Thread.Sleep(10000) my UI thread will be block. I am using async and await from .NET 4.5.

> var words = await Task.Factory.StartNew(() => { StringMgr.TextToUniqueWords(File.ReadAllText(filename));
> 
> // I want to be able to sleep this thread for 10 seconds, without the UI freezing
> 
> });

So how do I put a child thread to sleep without freezing the UI thread in a WPF application?

Thanks!

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-31T00:34:13.690

Since you're already using `async`, you can just do it the asynchronous way:

```
var words = await Task.Run(async () =>
{
  StringMgr.TextToUniqueWords(File.ReadAllText(filename));
  await Task.Delay(TimeSpan.FromSeconds(10));
}); 
```

However, I suspect that sleeping is the wrong solution for the actual problem you're trying to solve. If you'd like to post another question with your actual problem, you may find a better solution.

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-03-30T19:51:32.870

Have you tried it? `Sleeping thread inside a Task won't freeze your GUI` but it will make the current background thread to go in sleep mode and your UI will remain responsive always -

```
 Task.Factory.StartNew(() =>
            {
                Thread.Sleep(5000000); // this line won't make UI freeze.
            });
        Thread.Sleep(5000000); // But this will certainly do. 
```

# java - Phones with API >= 11?

> ID：15722401
> 
> 赞同：-1
> 
> 时间：2013-03-30T19:12:47.550
> 
> 标签：java, android

I'm planning to use the pop up menu API. However it is only for API 11 and above. I don't want to use it if there are still a significant number of phones out there with API<11\. However I have no idea of the current state of API levels on android phones. Would it be safe to say that the majority of phones out there can use this or can update to it?

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-30T19:16:42.730

Not sure what is this "popup menu", but you can simply set the minSdk to 11 in the manifest if you want to support only devices that have API 11 and above :

```
<uses-sdk android:minSdkVersion="11" android:targetSdkVersion="17" /> 
```

Also, for statistics of the Android about the API number, check [this website](http://developer.android.com/about/dashboards/index.html) . Currently, a little less than 50% of the android devices run on API 11 and above.

I would recommend to try to make your app run on older devices, at least from API 8 or 9\. There are many compatibility libraries out there that could help you.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-30T19:20:06.177

1.  According to [http://developer.android.com/about/dashboards/index.html](http://developer.android.com/about/dashboards/index.html), there are currently 44% of devices on the Android market that have Gingerbread r2 (API level 10). So no, it does not look like you can rely on the API level being higher than 11.

2.  You could search whether another library, be it Google's [Android support library](http://developer.android.com/tools/extras/support-library.html) or a third party one, like e.g. [ActionBarSherlock](http://actionbarsherlock.com/), has the support for the API you want. However, it seems neither of these two implements [PopupMenu](http://developer.android.com/reference/android/widget/PopupMenu.html).

3.  根据 Stack Overflow 的其他答案（[Android 2.1 API 7 中](https://stackoverflow.com/questions/9275228/popupmenu-in-android-2-1-api-7)的 Pre-Honeycomb和PopupMenu 的[适当替代方案](https://stackoverflow.com/questions/9878916/appropriate-alternative-to-popupmenu-for-pre-honeycomb)），PopupMenu 似乎不是为小手机屏幕设计的。

# neo4j - get all nodes and relationships properties within closed circle

> ID：15722402
> 
> 赞同：1
> 
> 时间：2013-03-30T19:12:49.127
> 
> 标签：neo4j, cypher, gremlin

Lets asume that John is selling goods to Met , Met is selling goods To both Bob and Alen , and Alen sells goods to John again . What I need is a Cypher query that returns all the closed circles like in this example John..Met..Alen because Alen sells goods to John again making it a closed circle displaying also the lowest amount of relationship property (amount) .How do I do this from entire database , get me all the closed circles and min amounths .Thanks!

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-31T01:26:00.697

Starting with Stefans answer, for the minimum you would want to take the lengths of the paths into account.

```
start n=node(*) 
match p=n-[:SELLS_TO*1..5]->n 
return p, lenght(p) 
```

To just the the shortest path length per node

```
start n=node(*) 
match p=n-[:SELLS_TO*1..5]->n 
return n, min(lenght(p)) 
```

if you want to get the shortest path:

```
start n=node(*) 
match p=n-[:SELLS_TO*1..5]->n 
with n, collect(nodes(p)) as nodes, min(length(nodes(p))) as l
return n, head(filter(p in nodes : length(p) = l)) as shortest_circle,l 
```

See the Neo4j console for an example: [http://console.neo4j.org/r/wrm522](http://console.neo4j.org/r/wrm522)

Something you'll note there is that if you scan the whole graph you will get the same circle multiple times for each node of the circle.

This uses the nodes, length, collect, head and filter functions and the min aggregate. see: [http://docs.neo4j.org/chunked/milestone/query-function.html](http://docs.neo4j.org/chunked/milestone/query-function.html)

As Stefan already said, scanning over all nodes is very probably quite expensive.

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-30T19:38:53.170

You could do a query like:

```
start n=node(*) 
match p=n-[:SELLS_TO*1..5]->n 
return p 
```

where 5 ist the maximum depth for a loop.

See an example in [Neo4j console](http://console.neo4j.org/?id=2pk1ae). However using "node(*)" triggers a global query which scales linearly wiht the size of your graph.

# actionscript-3 - ASC2.0 and Frame metatag

> ID：15722403
> 
> 赞同：3
> 
> 时间：2013-03-30T19:12:52.413
> 
> 标签：actionscript-3

Apparently, the new ActionScript Compiler 2.0 no longer supports the old [frame] metatag which allowed you to add preloaders to pure actionscript projects.

I've verified this IntelliJ - switching the "Prefer ActionScript Compiler 2.0 for pure ActionScript build configurations" makes a difference between the preloader being instantiated and executed, and the main class being instantiated and executed.

Googling yield no result, so is there currently any way around this issue - use ASC2.0 but have the benefits of the Frame metatag?

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-05-03T17:06:50.547

This still works when using the `mxmlc` commandline tool;

```
mxmlc Loader.as -frame=ContentFrame,Main 
```

(produces a 2-frame SWF; the first has no name and contains Loader, the second is named ContentFrame and contains Main).

# php - preg_grep matching incorrectly?

> ID：15722405
> 
> 赞同：0
> 
> 时间：2013-03-30T19:13:08.160
> 
> 标签：php, javascript, regex, pcre

My code:

```
$q = array('r%and_dy', 'cat09', '##$%%^');

$result = preg_grep('/[a-zA-Z0-9]+/', $q);

print_r($result); 
```

Using the same regular expression with javascript will only match 'cat09', but in php this returns:

```
Array
(
    [0] => r%and_dy
    [1] => cat09
) 
```

What do I have to write so that it only returns 'cat09'?

EDIT: you want to see the javascript. The javascript match function with the 'g' flag is the equivalent function of preg_grep in php, but it doesn't accept an array - here's a fiddle, which each item as a separate line. [http://jsfiddle.net/64A5w/](http://jsfiddle.net/64A5w/)

EDIT: jsfiddle is down, so here is the the javascript equivalent. First I should mention, `preg_grep` only accepts arrays, and automatically returns global matches (it does not accept a g flag). Javascript `match` only accepts strings, and g must be specified.

```
var str = 'r%and_dy';
var result = str.match(/[a-zA-Z0-9]+/g);
document.write(result); 
```

which displays: `r,and,dy`. The php equivalent would be passing preg_grep `$str = array('r%and_dy')`. It should return the same array But it returns `r%and_dy` as a single match (as shown above).

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-30T19:56:26.200

Your problem is that you are matching strings that *contain* one or more alphanumeric character. Try:

```
$q = array('r%and_dy', 'cat09', '##$%%^');
$result = preg_grep('/^[a-zA-Z0-9]+$/', $q);    
print_r($result); 
```

The `^` and `$` mean the start and the end of the string respectively.

From the [manual](http://php.net/manual/en/function.preg-grep.php):

> Returns the array consisting of the elements of the input array that match the given pattern.

# tomcat - Unicode 字符不会在 clojure repl 中打印（也不会通过环 http 响应）

> ID：15722409
> 
> 赞同：4
> 
> 时间：2013-03-30T19:13:15.310
> 
> 标签：tomcat, clojure, jvm

我在 Tomcat 7 内运行的 aws ec2 实例（3.2.30-49.59.amzn1.x86_64）上的 clojure repl 中有以下问题：

```
user=> (println "Tiësto")
Ti�sto 
```

自然，我验证我的文件编码是 utf-8：

```
user=> (get (System/getProperties) "file.encoding")
"UTF-8" 
```

... 到目前为止，一切都很好。也许它是一个 repl 输入问题，所以我转义了输入：

```
user=> (println "Ti\u00ebsto")
Ti�sto 
```

...现在我尝试将其打印到日志中

```
user=> (info "Tiësto")
output from the log:
2013-03-30 19:04:06.569 INFO  default    user - Tiësto 
```

伟大的！虽然通过环处理程序吐出“Tiësto”时这个问题仍然存在：

```
{
 ...
  artists: ["Ti�sto"],
 ...
} 
```

这些问题都没有发生在我的开发环境中（当然）。任何人都知道可能会发生什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-06-16T06:55:35.547

您是否尝试过设置内容类型和字符编码：

```
response.setContentType("text/html;charset=UTF-8");  
response.setCharacterEncoding("UTF-8");  
out.println(Tiësto); 
```

# javascript - assistance with javascript regexp to replace string

> ID：15722412
> 
> 赞同：0
> 
> 时间：2013-03-30T19:13:36.950
> 
> 标签：javascript, jquery, regex

I have some javascript that I need assistance with where I want to update a string with javascript.

Original string:

```
987654321-200x200-1_This+is+text.jpg 
```

Want it to end up to be:

```
not_found-200x200.jpg 
```

So `987654321` gets replaced with not_found and `-1_This+is+text` with nothing.

Note the original string is fully dynamic with only the `- x - _ +` constant in all.

I have tried something like this:

```
'987654321-200x200-1_This+is+text.jpg'.replace(/\_\d{0,}[A-Za-z]*/, '_not_found') 
```

but need help with the regexp to achieve this. Anyone help?

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-30T19:16:26.877

Not sure if this will do, but if all you're looking for is `200x200` you could just split on `-` and use that :

```
var str = '987654321-200x200-1_This+is+text.jpg';
var not = 'not_found-' + str.split('-')[1] + '.jpg'; 
```

# android - 两个 Android 应用程序之间的数据共享

> ID：15722414
> 
> 赞同：0
> 
> 时间：2013-03-30T19:13:52.320
> 
> 标签：android, data-sharing

我一直在研究如何在两个应用程序之间共享数据。这是我想要完成的事情。我有一个 ocr 应用程序和一个 XMPP 应用程序。XMPP 应用程序已连接到 openfire 服务器，并成功从 android 手机发送消息到我笔记本电脑上的 spark 客户端信使。现在我想做的是通过 ocr 应用程序中的相机拍照，然后将其转换为存储在字符串中的文本。现在我想将该字符串提供给我手机上的 XMPP 客户端应用程序，以便它可以将该文本发送到我笔记本电脑上的 spark 客户端信使。我已经成功地在这里解释了我的情况。我尝试使用套接字编程来做到这一点，但失败了。然后我看到有人说可以通过 sharedpreferences 对象来做到这一点，但是 xmpp 应用程序如何知道现在 ocr 应用程序已经转换了文本并且我应该接收它是没有意义的。请帮我解决这个问题。解释以及一些代码将不胜感激！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-30T19:41:35.597

使用广播接收器 ( [http://developer.android.com/reference/android/content/BroadcastReceiver.html](http://developer.android.com/reference/android/content/BroadcastReceiver.html) ) 跨应用程序发送数据。

这可能有助于 [如何在 Android 的不同应用程序中使用广播接收器？](https://stackoverflow.com/questions/2749893/how-to-use-broadcast-receiver-in-different-applications-in-android)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-12-04T08:09:18.883

您的问题是：如何将数据从运行手机的 ocr 应用程序发送到运行在同一部手机中的 xmpp 应用程序。

基本上，您正在寻找关于两个应用程序（进程）如何通信的解决方案。

**解决方案：**

先决条件1：有一个同意广播ocr和xmpp应用程序的ACTION。

先决条件2：在您的 ocr 应用程序中创建一个数据库表来存储您的文本。

先决条件3：在您的数据库之上创建一个内容提供者

现在，一旦在您的 ocr 应用程序中拍摄一些照片，将相机转换的文本数据放入您的数据库表中。使用上述约定的 ACTION 发送广播，以便 XMPP 应用程序了解您的数据已准备好。在发送此广播时，发送您已在其中放置要共享的文本的表的 URI。

另一方面，一旦xmpp app在其receiver中接收到广播，根据URI，它可以通过内容解析器从ocr app的表中查询和获取数据。

注意：您可以直接将您的相机图片存储在sd卡中，并且可以将该图片的路径放入您的数据库表中。而不是将图片转换为文本格式。

这只是我对如何做到这一点的随机想法。也许你可以获得比这更好的技术。

您可以研究的其他想法是：

1.  在两个应用程序之间放置一个公共共享内存。将共享数据放入该内存区域并访问它。（比如活页夹如何在内部工作）

2.  为 ocr 和 xmpp 应用程序提供相同的用户 id，以便 xmpp 可以直接访问 ocr 应用程序的数据库表的数据。如果两个应用程序具有相同的 linux 用户 ID，则两者都可以共享共享的首选项文件或数据库文件。

希望能帮助到你。

# android - 使用适用于 Android 的 google map api2 风格化地图

> ID：15722418
> 
> 赞同：3
> 
> 时间：2013-03-30T19:14:12.153
> 
> 标签：android, google-maps

有没有办法用 google map api2 for **android对地图进行****风格化**？我所需要的只是将背景设为灰色，道路设为白色，并关闭一些标记，如公共汽车站。

 **我知道谷歌 javaScript maps api v3 可以做到这一点。它是这样工作的：

```
 var pinkParksStyles = [
{
 featureType: "all",
 stylers: [
  { saturation: -80 }
 ]
},
{
 featureType: "poi.park",
 stylers: [
  { hue: "#ff0023" },
  { saturation: 40 }
 ]
}
];

map.setOptions({styles: pinkParksStyles}); 
```

[https://developers.google.com/maps/documentation/javascript/styling#styling_the_default_map](https://developers.google.com/maps/documentation/javascript/styling#styling_the_default_map)

但我无法为 android 找到类似的东西。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-05-20T18:48:11.990

Styled maps are not currently supported for the Google Maps Android API**

# math - 不同类型的平滑物体运动

> ID：15722421
> 
> 赞同：0
> 
> 时间：2013-03-30T19:14:36.953
> 
> 标签：math

在游戏中，我有一个特定的对象和该对象将移动的两个位置。我已经有了在特定时间计算当前位置的功能。

它是这样工作的：

输入 0 会将对象移动到位置 1。

输入 1 会将对象移动到位置 2。

输入 0.5 将在两个位置的中间移动对象。

ETC...

（在下面的示例中，时间从 0 到 1 变化）当我想缓慢启动对象并在快速移动时停止它，我使用：

```
MoveObject(sin(time * 90)) 
```

当我想快速启动对象并在它变慢时停止它，我使用：

```
MoveObject(1 - cos(time * 90)) 
```

没有效果，它是：

```
MoveObject(time) 
```

如何使对象开始缓慢移动，在两个位置的中心快速移动，然后在到达第二个位置时变慢？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-30T19:29:09.850

这将是：

```
MoveObject((time) * (time) * (3 - 2 * (time))) 
```

[sol.gfxile.net/interpolation](http://sol.gfxile.net/interpolation)

# ios - 将 iPhone 连接到本地服务器以在 XCode 上进行测试？-- 不使用 WiFi

> ID：15722423
> 
> 赞同：2
> 
> 时间：2013-03-30T19:14:45.813
> 
> 标签：ios, xcode, ejabberd

所以我在我的 MacBook 上设置了一个 ejabberd (XMPP) 服务器。与模拟器连接良好，仅在设备上间歇性连接。它没有连接的两次是在有 Wi-Fi 登录网关的咖啡馆。我对网络一无所知，但我猜这是防火墙的事情？

我想如果没有精心设计的解决方法，我就无法绕过防火墙。

我发现关闭两个设备上的 Wi-Fi 并打开网络共享，以便两个设备都通过数据进行通信。但是，我宁愿不这样做，因为我的数据计划是有限的，而且我想在工作时自由地上网。

有没有办法设置 XCode 让手机使用 USB 连接访问 MacBook 上的服务器？或者也许是我想不到的其他方式？

蓝牙不工作。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-31T21:36:44.893

我不认为问题出在网络上的某种防火墙...<br> 尝试使用本地 IP 地址而不是主机名，它会因网络而异。要获取它，您可以打开网络实用程序

![网络工具](../Images/9e873c75fbc624db713e5e75a927a49c.png)

在这种情况下，它将是`[xmppStream setHostName:@"172.16.1.2"];`

# opengl - Bad openGL version for GLSL shaders

> ID：15722424
> 
> 赞同：0
> 
> 时间：2013-03-30T19:14:46.237
> 
> 标签：opengl, shader, fragment-shader, vertex-shader

I just want to make an OpenGL program using GLSL shader. But when I'm compiling it I have the following error message :

Version number not supported by GL2.

Here's my vertex shader code :

```
#version 400

in vec3 Color;
out vec4 FragColor;

void main() {
    FragColor = vec4(Color, 1.0);
} 
```

My device config is the following :

GL render : ATI Radeo HD 4600 Series

GL version : 2.1.8787

GLSL version : 1.30

So I need opengl version 4.3 if it's possible. But I downloaded lots of versions but I didn't find the last one. Plus, I should have GLSL version 4\. Does anyone know a link to download the last version of OpenGL?

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-31T01:05:21.287

As Nicol Bolas indicated, this is most likely due to generic or outdated drivers.

> Does anyone know a link to download the last version of OpenGL?

OpenGL is not an traditional API with a centralized implementation but rather it is a specification of a feature set that multiple vendors (NVIDIA,AMD, etc..) implement. This allows specific vendors to utilize unique features of their graphics hardware while still providing programmers with a consistent, hardware independent API.

AMD's complete driver catalog can be queried [here](http://support.amd.com/us/psearch/Pages/psearch.aspx?type=2.4.1&product=2.4.1.3.37&contentType=KB%20Article&ostype=&keywords=&items=20).

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-31T06:21:58.550

> GL render : ATI Radeo HD 4600 Series

The HD 4xxx series of graphics cards doesn't support OpenGL 4.x at all. They're limited to OpenGL 3.x. So download the latest available drivers (sadly, AMD stopped making new drivers for this card last year, so you'll be stuck with the 12.6's), and switch to version 3.30.

# javascript - 为什么 idiomatic.js 和 jQuery 建议局部变量使用 `variable === undefined`

> ID：15722425
> 
> 赞同：0
> 
> 时间：2013-03-30T19:14:46.900
> 
> 标签：javascript, undefined

我正在查看[idiomatic.js](https://github.com/rwldrn/idiomatic.js/)并注意到类型检查部分中的以下几行：

### 不明确的：

**全局变量：**

```
typeof variable === "undefined" 
```

**局部变量：**

```
variable === undefined 
```

本节似乎最初基于[jQuery 样式指南](http://contribute.jquery.org/style-guide/js/)

我被告知第一种形式更安全，因为`undefined`可以重新定义为另一个值。我也不知道第一种形式不适用于局部变量的任何原因。

它似乎在这个[小提琴](http://jsfiddle.net/T5zab/)中工作正常。谁能解释为什么这种风格有意义？

```
var undefined = 2;

function test(){
  var x;

    alert("1: " + (typeof x == "undefined"));
    alert("2: " + ( x  === undefined)); 

}

test();  //alerts "1: true", then  "2: false" 
```

# javascript - 响应 jquery 改变宽度

> ID：15722429
> 
> 赞同：0
> 
> 时间：2013-03-30T19:15:03.257
> 
> 标签：javascript, jquery, html, css, responsive-design

我正在学习响应式设计，我认为这对于简单的网络来说很容易并且很有用，所以我尝试重新构建我的网络以使其具有响应性。当我的网站启动时，我用 javascript 更改宽度以产生效果。

好吧，我的问题是，当我使用 javascript 更改宽度时，我的响应式 css 不起作用。

例如，当我这样做时：

```
$(document).ready(function() {  
    $('#content').width(800);
} 
```

我的 CSS 不起作用：

```
/* Media Queries */
@media screen and (max-width: 480px) {

#content
{
    /*height: 450px;*/
    width: 100%;
    background-color: rgba(0,0,0, .1);
    position: relative;
    margin:20px auto;
    z-index: 0;
    left: -10px;
    border-radius: 5px;
    -moz-border-radius: 5px;
    -webkit-border-radius: 5px;
    padding: 10px;
    color: rgb(90, 90, 90);

    transition-timing-function: cubic-bezier(0.42,0,1,1);
    -moz-transition-timing-function: cubic-bezier(0.42,0,1,1);
    -webkit-transition-timing-function: cubic-bezier(0.42,0,1,1);
    -o-transition-timing-function: cubic-bezier(0.42,0,1,1);

    transition:width 2s;
    -moz-transition:width 2s; /* Firefox 4 */
    -webkit-transition:width 2s; /* Safari and Chrome */
    -o-transition:width 2s; /* Opera */

} 
```

我该如何解决？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-30T19:29:56.677

`media screen`是屏幕宽度的条件，如果`screen width > max-width`css 不起作用。

```
max-width:480px; /* is for Smartphones (portrait and landscape) */ 
```

和

```
max-width:1224px; /* is for Desktops and laptops. */ 
```

这是[jsFiddle](http://jsfiddle.net/u47su/)预览。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-30T19:15:57.023

您的媒体查询正在查看浏览器的窗口宽度，而不是 div 的宽度。因此，您必须调整浏览器窗口的大小（这在现代浏览器中使用 JavaScript 是不可能的）。

# javascript - Javascript copy array to new array

> ID：15722433
> 
> 赞同：55
> 
> 时间：2013-03-30T19:15:18.133
> 
> 标签：javascript

I want to form an array from an existing array so I can modify the new array without affecting the old. I realise arrays are mutable and this is why the new array affects the old.

E.g.

```
old = ["Apples", "Bananas"];
new = old;

new.reverse(); 
```

Old has also been reversed.

In Python, I can just do `new = list(old)`, but doing `new = new Array(old);` puts the old list inside a list.

* * *

## 回答 #1

> 赞同：111
> 
> 时间：2013-03-30T19:16:22.467

You can use the [`.slice`](https://developer.mozilla.org/en-US/docs/JavaScript/Reference/Global_Objects/Array/slice) method:

```
var old = ["Apples", "Bananas"];
var newArr = old.slice(0);
newArr.reverse(); 
// now newArr is ["Bananas", "Apples"] and old is ["Apples", "Bananas"] 
```

Array.prototype.slice returns a shallow copy of a portion of an array. Giving it 0 as the first parameter means you are returning a copy of all the elements (starting at index 0 that is)

* * *

## 回答 #2

> 赞同：9
> 
> 时间：2013-03-30T19:16:58.213

Try the following

```
newArray = oldArray.slice(0); 
```

# c++ - Why is this name ambiguous?

> ID：15722440
> 
> 赞同：1
> 
> 时间：2013-03-30T19:16:04.153
> 
> 标签：c++, visual-studio, namespaces

I lately decided to include the JavaScript V8 Engine in my project. After compiling and linking to it, I wanted to run the example from the [Getting Started](https://developers.google.com/v8/get_started) guide.

It works in general, but for some reasons there are namespace conflicts when I do not specify the `v8` namespace in front of each class name. Visual Studio 2012 tells me for example, that the name `Context` would be ambiguous. But I do not understand why.

![example code from the Getting Started guide](../Images/d5b7415bccde7350231346ca14dfcca9.png)

The only namespaces I include in this file are `std` and `v8`. It is a header file and before you ask, it's meant to be so since it claims to be a header-only library.

```
#pragma once

#include <string>
#include <vector>
#include <map>
#include <unordered_map>
#include <functional> 
#include <memory>
#include <typeindex>
#include <iostream>
#include <fstream>
#include <V8/v8.h>

namespace library_name
{
    using namespace std;
    using namespace v8;

    // here comes the example code and more...
} 
```

To find out where a symbol with the name `Context` might be defined too, I used the `Find Definition` command in Visual Studio, available in the context menu. This is the list of results.

[![definitions of the name Context](../Images/ad19113d800be789bc63d6a1ef95535f.png)](https://i.stack.imgur.com/TVaBk.png)

It lists for example `sf::Context` which I use in the project but not in that header. There are also definitions in cryptic namespaces located at files in a directory named `Windows Kits`. I neither know what they are for nor have I included them intentionally. I don't include other header files except from the standard library and JavaScript V8 as shown above.

Why do the `Context`s from different namespaces collides with each other? How can I fix this collisions to use the `v8` namespace?

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-30T19:23:10.760

Try actually compiling the code. The compiler should list the actual conflicting symbols, possibly including where they are actually defined. You will need to either remove one of your usings or fully qualify the identifier.

# javascript - JS中的动态表

> ID：15722444
> 
> 赞同：0
> 
> 时间：2013-03-30T19:16:25.353
> 
> 标签：javascript, dynamic, onclick

这是我的代码片段...

```
 if (xmlhttp.readyState==4 && xmlhttp.status==200)
    {   
        s=xmlhttp.responseText;
        info=s.split("!");
        elem=document.getElementById("add_players1");
        for (var i = 0 ;i < (info.length-1);i++ ) 
        {
        var row=elem.insertRow(-1); //here is where I need to call a function when I click on the element
        var x=row.insertCell(-1);
        var y=row.insertCell(-1);
        var z=row.insertCell(-1);
        temp=info[i].split(",");
        name=temp[0];
        val=temp[1];
        pos=temp[2];
        x.innerHTML=name;
        y.innerHTML=val;
        z.innerHTML=pos;

    } 
```

基本上我所做的是从我的 PHP 文件中接收一些数据并动态创建一个表，但我想要的是当我单击表的单个元素时运行一个函数。我被困在这里，因为我动态创建了一个表，因此不知道如何进行函数调用......请指教

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-30T19:24:24.797

您可以使用元素上的 onclick 属性将事件附加到 javascript 中的元素，

```
var myfunction = function()
{
    alert("row clicked, id "+ this.id+", text"+this.innerHTML);
}

function addRow(){
   if (xmlhttp.readyState==4 && xmlhttp.status==200)
    {   
        s=xmlhttp.responseText;
        info=s.split("!");
        elem=document.getElementById("add_players1");
        for (var i = 0 ;i < (info.length-1);i++ ) 
        {
        var row=elem.insertRow(-1); 
        row.onclick = myfunction;
        temp=info[i].split(",");
        for (j = 0; j < 3; i++) {
               appendDiv(row.insertCell(j), temp[j] , 'divStyle');
        }
    }
}

function appendDiv(cell, text, style) {
    var div = document.createElement('div'), 
        txt = document.createTextNode(text); 
    div.appendChild(txt);                    
    div.setAttribute('className', style);    
    cell.appendChild(div);                   
} 
```

# java - Java Servlet Web 开发问题

> ID：15722452
> 
> 赞同：2
> 
> 时间：2013-03-30T19:16:57.413
> 
> 标签：java, jsp, servlets

在过去的几年里，我一直在使用 PHP 进行 Web 开发，并且和很多人一样，我非常不喜欢 PHP。我也做过很多 Java 开发，但从来没有做过 Web 开发。由于对 Java 有很好的了解，我决定尝试使用 JSP 进行 Web 开发。我已经阅读了几篇文章，但我并没有完全“理解”它。我的第一个问题是，JSP（Java Servlet Page）和 servlet 有什么区别？JSP 不只是一个包含 servlet 和 HTML 的文件吗？我的第二个问题是 Servlet 可以像 PHP 一样轻松地与 HTML 元素交互吗？我可以使用 POST/GET 等检查 HTML 表单输入吗？

我还想知道 Servlet 是否可以使用“本机”Java 代码。通过这个，我的意思是我可以使用我在桌面应用程序中使用的相同代码/使用我已经制作的相同方法和类。我想要得到的是，servlet 可以（几乎）做任何桌面应用程序可以做的事情。我可以访问服务器文件系统来删除/修改文件吗？我可以在我的 JSP 中使用第三方 Java 库吗？如果有人可以为我解决这个问题，那就太好了！提前致谢！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-30T19:21:25.017

JSP 是一种用于生成 servlet 的模板语言。每个 JSP 都被编译成一个 servlet。您可以使用 JSP 执行的所有操作都可以编写为 servlet。

不，JSP 不包含 servlet。它被编译成 servlet Java 代码，然后被编译成 Java 字节码。

Servlet 可以与所有 HTML 元素交互。它们是 HTTP 侦听器。

我强烈建议您不要在 servlet 中使用本机代码。

您不应该将 scriptlet 代码放入 JSP 中。那是一种 90 年代的 JSP 编写风格，这种风格已经名誉扫地。使用 JSTL。JSP 仅用于显示。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-30T19:26:18.847

在基本概念层面：

JSP 与 PHP 的相似之处在于它们为标准 HTML 页面提供服务器端标记脚本，从而允许页面中的动态内容。JSP 使用的语言类似于 HTML，但如果没有经过 Apache Tomcat 等 Web 容器的预处理，它就不是有效的 HTML。JSP 可以包含 Java 代码，尽管由于关注点分离，在大型系统中通常不鼓励这样做。

Servlet 是完全用 Java 编写的独立文件，用于处理客户端请求的操作。发送到 servlet 的请求可以采用任何 HTTP 操作类型的形式，即 GET/POST/PUT/等。servlet 在技术上可以做 JSP 页面可以做的所有事情（甚至更多），但是 JSP 提供的标记语言更适合在表示层上工作。

例如：您的 JSP 中可能有一个 HTML 表单，您将其发布到 servlet，然后它可能会使用发布的表单数据来发送安全电子邮件。发送电子邮件后，servlet 可能会将您重定向到成功/失败页面，而该页面又可能是另一个 JSP 页面。最近，使用 XMLHttpRequest API，Javascript 已成为与 servlet 交互的更常见方式。

看看[这个指南](http://www.tutorialspoint.com/jsp/jsp_quick_guide.htm)，特别是提供的图表。

# c# - Read text file from C# Resources

> ID：15722455
> 
> 赞同：24
> 
> 时间：2013-03-30T19:17:17.650
> 
> 标签：c#, file-io, resources, streamreader

I need to read a file from my resources and add it to a list. my code:

```
private void Form1_Load(object sender, EventArgs e)
{
    using (StreamReader r = new StreamReader(Assembly.GetExecutingAssembly().GetManifestResourceStream("myProg.myText.txt")))
    {
        //The Only Options Here Are BaseStream & CurrentEncoding
    }
} 
```

Ive searched for this and only have gotten answers like `"Assembly.GetExecutingAssembly...."` but my program doesnt have the option of Assembly.?

* * *

## 回答 #1

> 赞同：40
> 
> 时间：2013-03-30T19:23:17.433

Try something like this :

```
string resource_data = Properties.Resources.test;
List<string> words = resource_data.Split(new[] {Environment.NewLine}, StringSplitOptions.RemoveEmptyEntries).ToList(); 
```

Where

![enter image description here](../Images/b93714134cd0ad22ed0f88777a6810e9.png)

* * *

## 回答 #2

> 赞同：11
> 
> 时间：2013-03-30T19:23:32.777

You need to include `using System.Reflection;` in your header in order to get access to Assembly. This is only for when you mark a file as "Embedded Resource" in VS.

```
var filename = "MyFile.txt"
System.Reflection.Assembly.GetExecutingAssembly().GetManifestResourceStream("YourNameSpace." + filename)); 
```

As long as you include 'using System.Reflection;' you can access Assembly like this:

```
Assembly.GetExecutingAssembly().GetManifestResourceStream("YourNamespace." + filename); 
```

Or if you don't need to vary filename just use:

```
Assembly.GetExecutingAssembly().GetManifestResourceStream("YourNamespace.MyFile.txt"); 
```

The full code should look like this:

```
using(var reader = new StreamReader(Assembly.GetExecutingAssembly().GetManifestResourceStream("myProg.m‌​yText.txt"))
{
    string line;
    while ((line = reader.ReadLine()) != null)
    {
        // Do some stuff here with your textfile
    }
} 
```

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2013-09-10T13:16:09.860

Just to follow on this, AppDeveloper solution is the way to go.

```
string resource_data = Properties.Resources.test;
string [] words = resource_data.Split(new[] {Environment.NewLine}, StringSplitOptions.RemoveEmptyEntries);
foreach(string lines in words){
.....
} 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2014-09-09T16:01:28.620

```
 [TestCategory("THISISATEST")] 
        public void TestResourcesReacheability() 
        { 
            byte[] x = NAMESPACE.Properties.Resources.ExcelTestFile; 
            string fileTempLocation = Path.GetTempPath() + "temp.xls"; 
            System.IO.File.WriteAllBytes(fileTempLocation, x);   

            File.Copy(fileTempLocation, "D:\\new.xls"); 
        } 
```

You get the resouce file as a byte array, so you can use the WriteAllBytes to create a new file. If you don't know where can you write the file (cause of permissions and access) you can use the Path.GetTempPath() to use the PC temporary folder to write the new file and then you can copy or work from there.

# php - facebook getLogoutUrl 返回一个带有 access_token=0 的 URL，点击后重定向到 Facebook 用户的主页

> ID：15722456
> 
> 赞同：5
> 
> 时间：2013-03-30T19:17:21.740
> 
> 标签：php, facebook, facebook-graph-api, facebook-php-sdk

我正在将 Facebook 与我的网站集成，并添加了一个注销按钮，其 URL 来自：

```
$facebook->getLogoutUrl(array('next' => 'http://mydomain.com/logout.php')); 
```

问题是`logout.php`从未调用过。相反，在单击注销按钮时，它会重定向到登录用户的 Facebook 主页。它不会让用户退出 Facebook，也不会调用我的`next`URL。

我注意到生成的 URL`getLogoutURL()`如下所示：

```
https://www.facebook.com/logout.php?next=http://mydomain.com/logout.php&access_token=0 
```

注意有一个**access_token=0**。该值不应该为零吗？这是我能想到的唯一可能导致问题的事情。

我已经将我的 FB 应用程序的站点 URL 设置为`http://mydomain.com`. 在本地测试时，我还编辑了我的`hosts`文件。我也google了很多，我还没有找到解决方案。唯一有效的是`onclick`使用`FB.logout()`. 但我需要使用 PHP。

关于为什么注销 URL 不起作用的任何想法？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-30T19:38:48.190

好的，我通过创建自己的注销 URL 并添加访问令牌解决了这个问题

```
$logoutUrl = 'https://www.facebook.com/logout.php?next=http://mydomain.com/logout.php&access_token=' . $facebook->getAccessToken(); 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-05-16T04:32:40.210

我希望你找到了解决办法！但如果没有，请尝试使用以下代码。它对我有用！

```
$facebook->getLogoutUrl(array('next' =>'http://example.com/logout.php', 'access_token'=>$facebook->getAccessToken()));` 
```

If you check out the official documentation you'll see it says nothing about setting the access token option in the parameter array but it really works! Good Luck!!

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2014-01-14T18:09:57.123

The problem is that you need to call getAccessToken BEFORE ask for the logout url.

```
$facebook->getAccessToken(); 
```

Don't need to call it inside as a getLogoutURL parameter. Just call it one line before:

```
$user = $facebook->getUser();
$access_token = $facebook->getAccessToken();
$logoutUrl = $facebook->getLogoutUrl(); 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-05-15T20:23:18.407

我也遇到了同样的问题（access_token=0），但后来我意识到我在调用 getLogoutURL() 之前正在清除 Facebook cookie。如果您首先获得 getLogoutURL() 结果，则 access_token 不应为零。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2018-03-20T08:09:15.403

In v5.0.0 the first parameter of getLogoutUrl() is the access token of the Facebook user's session.

```
public string getLogoutUrl(string $accessToken, string $next, string $separator = '&amp;') 
```

Pass it and Facebook will add it to your "next" URL.

[Source](https://developers.facebook.com/docs/php/FacebookRedirectLoginHelper/5.0.0)

# c - Reading and Writing Files in C using read(...) write(...)

> ID：15722457
> 
> 赞同：0
> 
> 时间：2013-03-30T19:17:22.203
> 
> 标签：c

These commands are supposed to return bytes read or written. Currently, I am trying to read and write 100 characters at a time. When I use read(fd, buffer, 100) I get 99 characters read. When I use read(fd, buffer, 101) I get 100 characters read. What is the problem?

I am supposed to read 100 characters from a source code and write them to a destination1\. Then, I am supposed to read 50 characters from same source into destination2\. The reading and passing is inaccurate after the first few loops. Problems arise on the third loop. Please check it out:

```
 [Step 2] Prcs_P2.c: Copy the contents of source.txt into destination1.txt and 
  destination2.txt as per the following procedure.

  1\. Read the next 100 characters from source.txt, and among characters read, 
  replace each character ’1’ with character ’A’ and all characters are then 
 written in destination1.txt
 2\. Then the next 50 characters are read from source.txt, and among characters
 read, replace each character ’2’ with character ’B’ and all characters are
 then written in destination2.txt
 3\. The previous steps are repeated until the end of file source.txt.
 The last read may not have 100 or 50 characters.
 -------------
 It's copying characters irregularly. sometimes more than 100 | 50 and sometimes less.

 int main() {

    //const int sizeBuff=100;

    char buffer[105];   //used to carry information in packets of 10
    int temp=0;     //temp variable to check for errors
    int charCount=0;

    int i=0;

//----------------------------------------
    //charCount=read(sourceFile, buffer , 101 );
    while( charCount=read(sourceFile, buffer , 100) >0){    //needed 101 as last arg instead of 100\. DUnno why?

        i=0;
        while(i<charCount){
            if (buffer[i]=='1')
                buffer[i]='A';
            i++;
        }

        if(write( destinationFile, buffer,charCount)==-1)       //write(...) returns the number of bytes written to destinationFile
                                //-1 depicts error in the function and 0 is returned upon end of file
        {
            printf("\nWrite fail.\n");
            perror("Error");                //Prints error, if found while writing.
        }
        memset(buffer, 0, 105);     //CLEARS BUFFER

        i=0;
        charCount=read(sourceFile, buffer , 50 );   //reads 50 bytes at a time      //need flag for error
        while(i<charCount){
            if (buffer[i]=='2')
                buffer[i]='B';
            i++;
        }

        temp=write( destinationFile2, buffer, charCount);       //write(...) returns the number of bytes written to destinationFile
        if(temp==-1)                        //-1 depicts error in the function and 0 is returned upon end of file
        {
            printf("\nWrite fail.\n");
            perror("Error");                //Prints error, if found while writing.
        }

        memset(buffer, 0, 105);
    }//while loop ends

    close(destinationFile);
    close(destinationFile2);
    close(sourceFile);
    //------PART 1 ENDS-------------

    //------PART 2 STARTS------------

} 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-30T19:28:54.923

```
charCount=read(sourceFile, buffer , 100) >0 
```

This sets `charCount` to 0 or 1\. You want

```
(charCount = read(sourceFile, buffer , 100)) > 0 
```

# node.js - can't install/unpublish npm package version 0.0.1

> ID：15722463
> 
> 赞同：0
> 
> 时间：2013-03-30T19:17:44.390
> 
> 标签：node.js, npm

I've got the strange 0.0.1 version in my package, and now I can't install it...

```
$ npm install nodejs
npm http GET https://registry.npmjs.org/nodejs
npm http 304 https://registry.npmjs.org/nodejs
npm WARN engine nodejs@0.0.1: wanted: {"node":"~0.6.6"} (current: {"node":"v0.8.15","npm":"1.1.66"})
nodejs@0.0.1 node_modules/nodejs 
```

Also, I can't unpublish it:

```
$ npm unpublish --force nodejs@0.0.1
npm http GET https://registry.npmjs.org/nodejs
npm http 304 https://registry.npmjs.org/nodejs
npm http DELETE https://registry.npmjs.org/nodejs/-rev/3-9656e170167cee5a40e53aa02ac52080
npm http 500 https://registry.npmjs.org/nodejs/-rev/3-9656e170167cee5a40e53aa02ac52080
npm http DELETE https://registry.npmjs.org/nodejs/-rev/3-9656e170167cee5a40e53aa02ac52080
npm http 500 https://registry.npmjs.org/nodejs/-rev/3-9656e170167cee5a40e53aa02ac52080
npm http DELETE https://registry.npmjs.org/nodejs/-rev/3-9656e170167cee5a40e53aa02ac52080
npm http 500 https://registry.npmjs.org/nodejs/-rev/3-9656e170167cee5a40e53aa02ac52080
npm ERR! Error: case_clause {[]}: nodejs/-rev/3-9656e170167cee5a40e53aa02ac52080
npm ERR!     at RegClient.<anonymous> (/usr/local/Cellar/node/0.8.15/lib/node_modules/npm/node_modules/npm-registry-client/lib/request.js:259:14) 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-30T19:45:07.160

Try running

```
npm cache clean 
```

That particular version of nodejs is probably now in your cache. Take a look at ~/.npm and look at the package.json file in the nodejs directory before running the command. I suspect it will say 0.0.1.

# documentation - 与 Common Lisp 等效的 Pydoc

> ID：15722466
> 
> 赞同：2
> 
> 时间：2013-03-30T19:18:08.163
> 
> 标签：documentation, common-lisp

我用通用 lisp 编程已经有一段时间了，我喜欢在线上有这么多方便的语言文档；问题是我经常离线，在我最需要的时候无法访问它。

是否有我可以在 shell 中下载和使用的通用 lisp 的 PyDoc 等价物（甚至只是该语言的手册页）？

提前喝彩。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-30T20:02:12.380

您可以下载 CLHS 并以各种方式安装它。

[http://www.cliki.net/CLHS](http://www.cliki.net/CLHS)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2017-04-14T17:30:35.847

这是一个老问题……</p>

**编辑**：正如[Cookbook中所引用的，我们可以使用 Dash (MacOS)、](https://lispcookbook.github.io/cl-cookbook/) [Zeal](https://zealdocs.org/) (GNU/Linux) 或 Velocity (Windows)离线阅读 HyperSpecs 。

*   我们可以在 devdocs 上询问或添加它：[https ://devdocs.io/](https://devdocs.io/)
*   并获取 CL Ultra Spec 的数据：[website](http://phoe.tymoon.eu/clus/doku.php) , [data](https://github.com/phoe/clus-data)

当然，还可以使用 Emacs 浏览内置文档（Ch，请参阅菜单）。

# c++ - 尝试链接 Boost 1.53 时出现错误 LNK2005

> ID：15722472
> 
> 赞同：3
> 
> 时间：2013-03-30T19:19:02.047
> 
> 标签：c++, boost, linker-errors, lnk2005

我目前正在尝试链接到 boost lib

```
libboost_regex-vc90-mt-gd-1_53.lib 
```

这是从此命令行创建的

```
b2^
 --stagedir=%BOOST_OUTPUT_DIR%^
 --build-dir=%BOOST_BUILD_DIR%^
 toolset=msvc-9.0^
 link=static^
 variant=release,debug^
 threading=multi^
 runtime-link=shared^
 stage 
```

但我收到以下链接错误（其中之一）：

```
msvcprtd.lib(MSVCP90D.dll) : error LNK2005: "public: __thiscall std::basic_string<char,struct std::char_traits<char>,class std::allocator<char> >::~basic_string<char,struct std::char_traits<char>,class std::allocator<char> >(void)" (??1?$basic_string@DU?$char_traits@D@std@@V?$allocator@D@2@@std@@QAE@XZ) déjà défini(e) dans TrailerContest.Reflection.obj 
```

我增加了链接器的详细程度以了解有关此错误的更多信息，这就是我得到的：

```
Searching c:\Program Files (x86)\Microsoft Visual Studio 9.0\VC\lib\msvcprtd.lib :
1>      "__declspec(dllimport) public: __thiscall std::basic_string<char,struct std::char_traits<char>,class std::allocator<char> >::~basic_string<char,struct std::char_traits<char>,class std::allocator<char> >(void)" (__imp_??1?$basic_string@DU?$char_traits@D@std@@V?$allocator@D@2@@std@@QAE@XZ) found
1>        Referenced in libboost_date_time-vc90-mt-gd-1_53.lib(greg_month.obj)
1>        Referenced in libboost_random-vc90-mt-gd-1_53.lib(random_device.obj)
1>        Referenced in libboost_thread-vc90-mt-gd-1_53.lib(thread.obj)
1>        Referenced in libboost_regex-vc90-mt-gd-1_53.lib(instances.obj)
1>        Referenced in libboost_regex-vc90-mt-gd-1_53.lib(regex.obj)
1>        Referenced in libboost_regex-vc90-mt-gd-1_53.lib(w32_regex_traits.obj)
1>        Referenced in libboost_system-vc90-mt-gd-1_53.lib(error_code.obj)
1>        Loaded msvcprtd.lib(MSVCP90D.dll)
1>msvcprtd.lib(MSVCP90D.dll) : error LNK2005: "public: __thiscall std::basic_string<char,struct std::char_traits<char>,class std::allocator<char> >::~basic_string<char,struct std::char_traits<char>,class std::allocator<char> >(void)" (??1?$basic_string@DU?$char_traits@D@std@@V?$allocator@D@2@@std@@QAE@XZ) already defined in TrailerContest.Reflection.obj 
```

似乎所有 boost 库都尝试从 MSVCP90D.dll 导入 std::string 函数

```
__imp_??1?$basic_string@DU?$char_traits@D@std@@V?$allocator@D@2@@std@@QAE@XZ 
```

而我自己的程序似乎嵌入了 std::string 代码，因此尝试在内部进行链接。

```
 ??1?$basic_string@DU?$char_traits@D@std@@V?$allocator@D@2@@std@@QAE@XZ 
```

我想我在这里有两个选择，要么我让 boost 嵌入 std::string 代码，所以 boost 和我的程序在两个 objs 中都有相同的声明，并且可以实现链接。我的程序必须像 boost 一样从 MSVCP90D.dll 导入 std::string 代码。

问题是我不知道如何在不导入 std::string 代码的情况下要求 boost 进行编译。而且我不知道如何强制我的程序从 MSVCP90D.dll 导入 std::string，有人知道吗？

我必须说我的程序显然是用 /MDd 选项编译的。Boost 也应该使用此选项编译，行**runtime-link=shared**

# java - Array Null Pointer Exception

> ID：15722474
> 
> 赞同：0
> 
> 时间：2013-03-30T19:19:10.433
> 
> 标签：java, arrays, string, nullpointerexception

I'm getting a null pointer exception at line

`if(names[j].compareTo(names[j+1]) > 0)`

and I can't figure out why. It might have something to do with the initialization but I really don't know what it could be

```
public static void item3(Profitable[] movies, Scanner input) {
    int j;
    boolean flag = true;
    String temp;
    String search;
    int low = 0;
    int high;
    int mid;

    String[] names = new String[6];

    for(int i = 0; i < 5; i++) {
        names[i] = ((Movie)movies[i]).getTitle();
    }

    high = names.length - 1;
    mid = (low + high) / 2;

    while(flag)
    {
        flag = false;
        for(j = 0; j < names.length - 1; j++)
        {

            if(names[j].compareTo(names[j+1]) > 0) {
                temp = names[j];
                names[j] = names[j+1];
                names[j+1] = temp;
                flag = true;
            }
        }
    }

    System.out.print("Enter your search term: ");
    search = input.nextLine();

} 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-30T19:21:35.263

This loop:

```
for(int i = 0; i < 5; i++) {
    names[i] = ((Movie)movies[i]).getTitle();
} 
```

only initializes the first five elements, but the last one does not get initialized.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-30T19:21:14.853

```
for(int i = 0; i < 5; i++) { // only 5 iterations while names contain 6 elements
    names[i] = ((Movie)movies[i]).getTitle();
} 
```

It's always better to use `i < names.length` rather than an explicit integer.

```
for(int i = 0; i < names.length; i++) 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-31T12:02:10.233

You could also use `i <= 5` but it's always better to use the length field.

# iphone - iOS : 创建普通的 Singleton UIView

> ID：15722480
> 
> 赞同：0
> 
> 时间：2013-03-30T19:20:04.443
> 
> 标签：iphone, ios, ipad, uiview, uiviewcontroller

如何为我的项目创建单例 UIView。

我想在所有 UIViewController 中使用这个常见的 UIView 作为子视图，所以如果它是单例的，这就是为什么没有内存消耗的原因。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-30T19:30:02.367

不，您不能在多个超级视图之间共享一个视图。您将需要视图的多个实例。

# google-fusion-tables - Selected placemarkers from fusion table not showing up in google earth

> ID：15722484
> 
> 赞同：0
> 
> 时间：2013-03-30T19:20:23.610
> 
> 标签：google-fusion-tables, google-earth

I have a Google fusion table which defines an "icon" column which selects one of the standard placemarker names for each row, e.g. 'large_blue'. You can see that this is working on this map view:

[https://www.google.com/fusiontables/DataSource?docid=1JJHwwJLW1CqrG3PZv3kMBrRJio-5f_28g_rJrYU#map:id=3](https://www.google.com/fusiontables/DataSource?docid=1JJHwwJLW1CqrG3PZv3kMBrRJio-5f_28g_rJrYU#map:id=3)

But when I export that as KML, the markers are all the default yellow pushpin. Shouldn't the selected markers carry over into the KML? Is there something else I need to do to make that happen?

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-31T19:44:42.517

It is supposed to work, but the exported KML from your map is lacking style tags entirely. This appears to be a bug. Please email googletables-feedback@google.com with a description of the problem and we'll take a look.

# java - HashSet 存储相等的对象

> ID：15722485
> 
> 赞同：4
> 
> 时间：2013-03-30T19:20:25.607
> 
> 标签：java, equals, hashset, duplicate-removal

下面是从对象列表中查找重复对象的代码。但是由于某种原因，哈希集甚至存储了相等的对象。

我当然在这里遗漏了一些东西，但是当我检查哈希集的大小时，它会出现 5。

```
import java.util.ArrayList;
import java.util.HashSet;

public class DuplicateTest {

public static void main(String args[]){
    ArrayList<Dog> dogList = new ArrayList<Dog>();
    ArrayList<Dog> duplicatesList = new ArrayList<Dog>();
    HashSet<Dog> uniqueSet = new HashSet<Dog>();

    Dog a = new Dog();
    Dog b = new Dog();
    Dog c = new Dog();
    Dog d = new Dog();
    Dog e = new Dog();

    a.setSize("a");
    b.setSize("b");
    c.setSize("c");
    d.setSize("a");
    e.setSize("a");

    dogList.add(a);
    dogList.add(b);
    dogList.add(c);
    dogList.add(d);
    dogList.add(e);

    if(a.equals(d)){
        System.out.println("two dogs are equal");
    }
    else System.out.println("dogs not eqal");

    for(Dog dog : dogList){
        uniqueSet.add(dog);
    }

    System.out.println("number of unique dogs="+ uniqueSet.size());
    /*for(Dog dog:uniqueSet){
        System.out.println("uniqueset ="+dog.getSize());
    }

    for(Dog dog : duplicatesList){
        System.out.println("duplicate dog="+dog.getSize());
    }*/

}

} 
```

这里是 Dog 类

```
public class Dog implements Animal, Comparable<Dog>{

String size;

public void makeNoise(){
    System.out.println("woof woof");
}

public String getSize() {
    return size;
}

public void setSize(String size) {
    this.size = size;
}

public int compareTo(Dog d){
    return this.size.compareTo(d.size);
}

public boolean equals(Dog d){
    return this.size.equals(d.size);
}

@Override
public int hashCode() {
    // TODO Auto-generated method stub
    return super.hashCode();
}
} 
```

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-03-30T19:27:15.240

此代码不能满足您的需要：

```
public boolean equals(Dog d){
    return this.size.equals(d.size);
} 
```

这不是覆盖 Object.equals，这是 HashSet 使用的。你需要：

```
@Override
public boolean equals(Object d){ 
    if (!(d instanceof Dog)) {
        return false;
    }
    Dog dog = (Dog) d;
    return this.size.equals(dog.size);
} 
```

请注意，通过使用`@Override`注释，您是在要求编译器*验证*您实际上是在覆盖一个方法。

编辑：如前所述，您*还*需要以`hashCode`与您的方法兼容的方式覆盖`equals`。鉴于您正在根据大小检查相等性，最简单的选择是：

```
@Override
public int hashCode() {
    return size.hashCode();
} 
```

# python - Python UDP 套接字在环回地址上没有收到消息

> ID：15722487
> 
> 赞同：3
> 
> 时间：2013-03-30T19:20:29.153
> 
> 标签：python, sockets, udp, loopback

我在使用带有 Python 的 UDP 套接字发送和接收消息时遇到问题。

问题是当我尝试使用此代码发送和接收消息时，我没有收到任何内容：Receiver.py：

```
import socket

UDP_IP = "127.0.0.1"
UDP_PORT = 55681
sock = socket.socket(socket.AF_INET, socket.SOCK_DGRAM)
sock.bind((UDP_IP, UDP_PORT))
while True:
     data, addr = sock.recvfrom(1024) # buffer size is 1024 bytes
print "received message:", data 
```

发件人.py：

```
import socket

UDP_IP = "192.168.1.161"
UDP_PORT = 55681
MESSAGE = "Hello, World!"

print "UDP target IP:", UDP_IP
print "UDP target port:", UDP_PORT
print "message:", MESSAGE

sock = socket.socket(socket.AF_INET, # Internet                                 
                 socket.SOCK_DGRAM) # UDP                                   
sock.bind((UDP_IP, UDP_PORT))
sock.sendto(MESSAGE, (UDP_IP, UDP_PORT)) 
```

但是，如果我通过以下方式更改接收器的代码：

```
import socket

UDP_IP = "192.168.1.161"
UDP_PORT = 55681

sock = socket.socket(socket.AF_INET, # Internet                                                                                                                       
                 socket.SOCK_DGRAM) # UDP                                                                                                                         
sock.bind((UDP_IP, UDP_PORT))

while True:
    data, addr = sock.recvfrom(1024) # buffer size is 1024 bytes                                                                                                      
print "received message:", data 
```

它完美地工作。如果我将 127.0.0.1 作为两个程序中的地址也是同样的情况。为什么？

我使用 python 2.7 在 linux 上工作，这是 ifconfig 的结果：

```
lo        Link encap:Local Loopback  
      inet addr:127.0.0.1  Mask:255.0.0.0
      inet6 addr: ::1/128 Scope:Host
      UP LOOPBACK RUNNING  MTU:16436  Metric:1
      RX packets:12252 errors:0 dropped:0 overruns:0 frame:0
      TX packets:12252 errors:0 dropped:0 overruns:0 carrier:0
      collisions:0 txqueuelen:0 
      RX bytes:1528301 (1.5 MB)  TX bytes:1528301 (1.5 MB)

wlan0     Link encap:Ethernet  HWaddr 00:21:6a:5b:b4:dc  
      inet addr:192.168.1.161  Bcast:192.168.1.255  Mask:255.255.255.0
      inet6 addr: XXXX::XXX:XXXX:XXXX:XXXX/64 Scope:Link
      UP BROADCAST RUNNING MULTICAST  MTU:1500  Metric:1
      RX packets:532561 errors:0 dropped:0 overruns:0 frame:0
      TX packets:318747 errors:0 dropped:0 overruns:0 carrier:0
      collisions:0 txqueuelen:1000 
      RX bytes:629969205 (629.9 MB)  TX bytes:32669218 (32.6 MB) 
```

提前感谢您的回答。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-03-30T19:31:15.700

当您在接收器中执行此行时：

```
sock.bind((UDP_IP, UDP_PORT)) 
```

您仅绑定到`UDP_IP`. 因此，您的套接字将只接收发送到该地址的数据包。这就是当您匹配发件人和收件人的地址时它起作用的原因。

If you want to receive packets on any address, bind like this instead:

```
sock.bind(('', UDP_PORT)) 
```

As [documented](http://docs.python.org/2/library/socket.html), specifying `''` makes `bind` bind to all available addresses.

# numpy - 窗口上的距离矩阵（通过访问周围的框架）

> ID：15722488
> 
> 赞同：1
> 
> 时间：2013-03-30T19:20:29.930
> 
> 标签：numpy, scipy, distance

我是 scipy 的新手，最近了解到`cdist`我们可以在哪里传递我们自己的自定义函数来计算距离。但是，`cdist`仅计算单个点的距离（因此，自定义函数必须计算两点之间的距离）。这适用于大多数情况，但在我的情况下，要计算一组点之间的距离。（您可以将其视为滑动窗口，例如大小为 3）。一个例子可以清楚地说明这一点：

```
def f(*a, **kw):
    print(a, kw)
    return 0

# Consider it a set of points: [p0, p1, p2, ...]
a = numpy.array([[1,2,3],[10,11,12],[20,21,22],[30,31,32]]) 

# Consider it a set of points: [q0, q1, q2, ...]
b = numpy.array([[4,5,6],[14,15,16],[24,25,26],[34,35,36],[44,45,46]]) 
```

现在，如果我只是这样做`scipy.spatial.distance.cdist(a, b, f)`，则每次`f`调用时，每个数组中只有 1 个条目被传递给`f`. 所以函数调用（和传递的值）看起来像：

```
1st call: p0, q0
2nd call: p0, q1
3rd call: p0, q2
4th call: p0, q3
5th call: p0, q4 <-- 
6th call: p1, q0
7th call: p1, q1
...and so on... 
```

但我想要的是（对于大小为 3 的窗口）：

```
1st call: [p0,p1,p2], [q0,q1,q2]
2nd call: [p0,p1,p2], [q1,q2,q3]
3rd call: [p0,p1,p2], [q2,q3,q4] <-- only till boundary
4th call: [p1,p2,p3], [q0,q1,q2]
5th call: [p1,p2,p3], [q1,q2,q3]
...and so on... 
```

我搜索了很多，还尝试了 scipy 的[通用过滤器](http://docs.scipy.org/doc/scipy/reference/tutorial/ndimage.html#generic-filter-functions)和[相关函数](http://docs.scipy.org/doc/scipy/reference/tutorial/ndimage.html#correlation-and-convolution)，但它们不提供该功能（据我了解）。有*没有办法*如上所述计算距离？

欢迎任何想法/建议。谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-30T22:08:46.543

由于您要计算所有距离，并且您使用的是自定义函数，因此除了方便之外，使用`cdist`.

首先，你需要窗口化你的观点，我建议使用`as_strided`：

```
import numpy as np
from numpy.lib.stride_tricks import as_strided

p = np.random.rand(4, 3)
q = np.random.rand(6, 3)
win = 3
win_p = as_strided(p, shape=(p.shape[0]-win+1, win)+p.shape[1:],
                   strides=p.strides[:1]*2+p.strides[1:])
win_q = as_strided(q, shape=(q.shape[0]-win+1, win)+q.shape[1:],
                   strides=q.strides[:1]*2+q.strides[1:]) 
```

现在：

```
>>> p
array([[ 0.8962062 ,  0.62471689,  0.1754708 ],
       [ 0.69104294,  0.66960955,  0.97012228],
       [ 0.32023353,  0.08146304,  0.7663883 ],
       [ 0.06276952,  0.1679428 ,  0.9419452 ]])
>>> win_p
array([[[ 0.8962062 ,  0.62471689,  0.1754708 ],
        [ 0.69104294,  0.66960955,  0.97012228],
        [ 0.32023353,  0.08146304,  0.7663883 ]],

       [[ 0.69104294,  0.66960955,  0.97012228],
        [ 0.32023353,  0.08146304,  0.7663883 ],
        [ 0.06276952,  0.1679428 ,  0.9419452 ]]]) 
```

从这里你可以简单地做显而易见的事情：

```
ps, qs = len(win_p), len(win_q)
dist = np.empty((ps, qs))
for j, pp in enumerate(win_p) :
    for k, qq in enumerate(win_q) :
        dist[j, k] = f(pp, qq) 
```

正如我所说，如果您定义自己的距离函数，我认为这不会比`cdist`.

根据您的距离函数的样子，您可以尝试对事物进行矢量化。这可能涉及创建一个中间数组 shape `(ps, win, 3, qs, win, 3)`，因此很可能需要大量内存。但是请随意张贴您对测量距离的想法，我很乐意看看。

# image - How do I keep initial image size after apply transformation in Matlab?

> ID：15722491
> 
> 赞同：2
> 
> 时间：2013-03-30T19:20:52.787
> 
> 标签：image, matlab, registration

My question is, after applying an image transformation such as

```
 T =  [1,  0,  0;
          0,  1,  0;
         -5, -5,  1]; 
```

My initial image of 128x128 becomes 123x123\. Is there a way I can keep the intial dimension of the image?

Here is how I am applying my transformation:

```
 Reg = imtransform(B, Tform,...
       'XData', [1 (size(B, 2)+Translation(3, 1))],...
       'YData', [1 (size(B, 1)+Translation(3, 2))],...
       'FillValues', 255); 
```

Thanks!

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-31T15:30:01.877

Thanks @jucestain, by adding the

```
 +Translation(3,1) ... 
```

portion, I was adding -5 to the initial dimension of 128!

I simply changed the code to

```
 Reg = imtransform(B, Tform,...
       'XData', [1 (size(B, 2))],...
       'YData', [1 (size(B, 1))],...
       'FillValues', 255); 
```

# jquery - unable to navigate to submenu, space between menu and submenu

> ID：15722496
> 
> 赞同：0
> 
> 时间：2013-03-30T19:20:58.883
> 
> 标签：jquery, html, css

I have two working sites and added css3 transition effect in menu

I stucked into one issue, i am not able to navigate to submenu. when mouse is on the menu 'our program' , following is the behavior of sites

[http://localhosting.asia/slimagain/](http://localhosting.asia/slimagain/)

it show menu , there is visually enough space in menu and submenu, so not able to navigate.

[http://localhosting.asia/slimagain1/](http://localhosting.asia/slimagain1/)

it show menu , there is visually no space in menu and submenu, i am easily navigate to submenu.

Both the navigation code is similar , there is no specific code for space.

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-30T19:35:07.203

Well, since this is tagged jQuery, do it with jQuery and add some delay before hiding the menu. :) Something like this:

```
var ddTimer;
$(document).on('mouseenter','#navigation > li', function() {
    $('.sub-menu').hide();
    clearTimeout(ddTimer);
    $(this).find('.sub-menu').show();
}).on('mouseleave','#navigation > li', function() {
    var $dropdown = $(this).find('.sub-menu');
    ddTimer = setTimeout(function() {
        $dropdown.hide();
    },500);
}).on('mouseenter','.sub-menu', function() {
    clearTimeout(ddTimer);
}); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-30T19:45:16.840

I am able to solve my problem , it was because of wrong value of top of submenu.

# php - 将字符串从表单转换为整数

> ID：15722499
> 
> 赞同：0
> 
> 时间：2013-03-30T19:21:20.277
> 
> 标签：php, type-conversion

需要一点帮助

我有

```
$_POST["zapremina"]=2000;
$_POST["starost"]="15%";
$_POST["namena"]="50%"; 
```

我想要简单的功能来做到这一点

```
$foo=(2000 - 15%) - 50%; 
```

怎么做？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-30T19:42:25.450

PHP 是松散类型的，因此您不必显式地转换类型或进行不必要的操作（例如 str_replace）

您可以执行以下操作：

```
$z = $_POST["zapremina"]; //$_POST["zapremina"]=2000;
$s = $_POST["starost"];   //$_POST["starost"]=15%;
$n = $_POST["namena"];    //$_POST["namena"]="50%;

$result = (($z - ($z *($s / 100))) - ($z * ($n / 100))); 
```

请记住使用括号来获得可读的代码和有意义的 var 名称。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-30T19:27:31.997

我会这样做：

```
 $zap = intval($_POST['zapremina']);
  $sta = intval($_POST['starost']);
  $nam = intval($_POST['namena']);
  $foo = ($zap * ((100-$sta)/100)) * ((100 - $nam)/100) 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-30T19:23:16.963

像这样：

```
$starostPercentage = (substr($POST["starost"], 0, -1) / 100);
$namenaPercentage = (substr($POST["namena"], 0, -1) / 100);

$foo = ($_POST["zapremina"] * (100 - $starostPercentage)) * $namenaPercentage; 
```

这就是它的作用以及原因：

*   将百分比（如`15%`）从它们的文本形式转换为它们的小数形式（`substr(15%)`= `15`，`15 / 100`= `0.15`）。
*   `$foo`用这些小数计算。`2000 - 15%`是你会写的（作为一个人），但在 PHP 中你需要把它写成`2000 * (100 * 0.15)`，意思是：2000 的 85%）。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-30T19:30:15.180

添加此函数，然后调用它

```
function calculation($a, $b, $c)
    {
        $b = substr($b, 0, -1) / 100;
        $c = substr($c, 0, -1) / 100;
        return (($a * $b) * $c);
    } 
```

现在你可以打电话了

```
$foo = calculation($_POST["zapremina"], $_POST["starost"], $_POST["namena"]); 
```

大多数时候都使用函数，因为它有助于可重用性。

# php - 如何使用ajax 传递给php 函数？

> ID：15722501
> 
> 赞同：-2
> 
> 时间：2013-03-30T19:21:27.290
> 
> 标签：php, javascript, ajax

我如何调用，`insertScore`以便我可以传递值。我认为它看起来像这样。`insertScore($name,$num_guess)`但我把它放在哪里？

这是**PHP 部分**：

```
function insertScore($name,$num_guess){
opendb();
$query = mysqli_query($GLOBALS['dbconn'],"INSERT INTO game VALUES (0,'$name',$num_guess");
closedb();} 
```

这是**Ajax 部分：**

```
$("#user .button ul li #submit").click( function(){
$.post("utilities.php",{
    user_name:$("#user_name").val(),
    num_guess:$("#num_guess").val()
  },
  function(response){
      $("#msgbox #msg").html("Score Submitted");
      $("#msgbox").slideUp().slideDown("slow");
  }
);
return false;
}); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-30T19:47:44.543

当您访问`.php`网页或向页面发送 ajax`POST`或`GET`请求`.php`时，当该`PHP`文件运行时，它可以访问两个重要的变量[$_POST](http://php.net/manual/en/reserved.variables.post.php)和[$_GET](http://php.net/manual/en/reserved.variables.get.php)。您可以在`PHP`文件中的任何位置访问这些变量。

您所做的是定义一个带有`insertScore`两个参数但从未被调用的函数。在文件主要执行的某个时刻，`utilities.php`您需要`insertScore`使用正确的参数进行调用。

[$_POST](http://php.net/manual/en/reserved.variables.post.php)变量是一个关联数组，可让您访问通过 AJAX 发送的数据（实际上其他东西可以将该数据沙到您的 PHP 文件中）。要访问 AJAX 请求发送的 user_name 和 num_guess，可以使用[$_POST](http://php.net/manual/en/reserved.variables.post.php)变量，如下所示：

```
$name = $_POST['user_name'];
$num_guess = $_POST['num_guess']; 
```

你可以使用这些变量，或者直接使用数组。你必须非常小心的是恶意的人。如果您要在 MySQL 查询中直接使用此处的输入，那么您很容易受到 SQL 注入攻击（这很常见），这将完全危及您的数据库服务器，因此您应该`mysqli_real_escape_string`事先使用您的数据。所以你的代码应该是这样的：

```
function insertScore($name,$num_guess){
  opendb();
  $name = mysqli_real_escape_string($GLOBALS['dbconn'],$name);
  $num_guess = mysqli_real_escape_string($GLOBALS['dbconn'],$num_guess);
  $query = mysqli_query($GLOBALS['dbconn'],"INSERT INTO game VALUES (0,'$name',$num_guess");
  closedb();
} 
```

然后在文件的其他地方，你应该把这个：

```
if(isset($_POST['user_name']) && isset($_POST['num_guess'])){
  insertScore($_POST['user_name'],$_POST['num_guess']);
} 
```

我建议进一步阅读数据库/网站安全性，有很多事情可以让你发现并让你容易受到攻击。这仍然不是写这篇文章的最佳方式，但它会让你开始。我建议查看[mysqli_prepare](http://php.net/manual/en/mysqli.prepare.php)以进一步阅读。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-30T19:25:31.613

好吧，如果你将你的 php 文件命名为*utility.php*并访问它，假设你有你的 insertScore 函数定义。您想在文件末尾添加对该函数的调用，并在函数内部访问[$_POST 变量](http://php.net/manual/en/reserved.variables.post.php)。您将在 JS 端的 $.post 中访问从 ajax 调用发送的数据。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-30T19:29:01.760

首先你的 php 代码不是一个有效的代码，因为 malconstructing `mysql query`。

那么您要询问的 php 代码必须在关闭`}`php 文件中的函数后存在

它会是这样的：`internetScore($_POST['user_name'],$_POST['num_guess']);`

请试试这个并告诉我这是否能解决您的问题:)

请应用我会说的话并告诉我这是否有效:)

像这样更新您的 jquery 代码：

```
$("#user .button ul li #submit").click( function(){
$.post("utilities.php",{
'user_name':$("#user_name").val(),
'num_guess':$("#num_guess").val()
},
function(response){
  $("#msgbox #msg").html("Score Submitted");
  $("#msgbox").slideUp().slideDown("slow");
}
);
return false;
}); 
```

唯一的修改是您发布的变量周围的引用，请让我知道这是否有效:)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-30T19:23:54.750

试试这个`utilities.php`-

```
insertScore($_POST['user_name'], $_POST['num_guess']); 
```

基本上，您可以使用超全局访问通过 post 请求发送的所有值`$_POST`。

但不要将此数据直接发送到您的数据库，因为它可能包含有害的[SQL 注入](http://en.wikipedia.org/wiki/SQL_injection)。您应该清理输入或使用[准备好的语句](http://en.wikipedia.org/wiki/Prepared_statement)。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-03-30T19:24:22.297

POST 参数可以使用 PHP`$_POST`超全局访问。你可以这样做`utilities.php`：

```
insertScore($_POST['user_name'], $_POST['num_guess']); 
```

但是，该函数容易受到 SQL 注入的影响。您应该确保正确转义或使用准备好的语句！我绝对推荐使用 PHPs 内置数据库访问[PDO](http://php.net/pdo)。和函数通常被认为是不好的做法`mysql_*`。`mysqli_*`

# asp.net - Visual Studio 2010：在构建/发布 Web 应用程序时创建单独的 App_global.asax.dll

> ID：15722504
> 
> 赞同：1
> 
> 时间：2013-03-30T19:22:16.397
> 
> 标签：asp.net, visual-studio-2010

在 Visual Studio 的 Web 应用程序项目中，当您发布/构建时，它会生成一个程序集。除了应用程序的编译程序集之外，我还想有一个单独的 app_global.asax.dll。这可能吗？

# python - Python, anticipating an endless loop

> ID：15722523
> 
> 赞同：2
> 
> 时间：2013-03-30T19:23:31.573
> 
> 标签：python, time, infinite-loop

I have code that can potentially have an endless loop. I would like to be able to stop this in code, is there somethng that can do that? Some thing like:

```
for i to range(0,5):
    timer = on
    run(x)
    #while run is running 
    if timer.time > 30:
        exit run(x)
        print("out of time ")
    print(timer.time) 
```

So the output could be: 3, 2, out of time 30, 2, out of time 30

I'm afraid this might require threading, which I have attempted in C and Java, for school, but never python.

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-30T19:29:20.737

A few options:

1.  If you can modify `run`'s "endless" loop, make it check for the time. This is probably the easiest.
2.  If on Linux/UNIX, you can use `signal.alarm` with a `SIGALRM` handler to get interrupted after a fixed period of time.
3.  You can spawn a separate thread and [kill the other thread](https://stackoverflow.com/questions/323972/is-there-any-way-to-kill-a-thread-in-python) when time elapses. This is rather nasty, and should only be used if you're on Windows (or care about portability) and have no way to modify `run`.
4.  You could spawn `run` into a separate process and kill the process when time expires (e.g. with `multiprocessing`).

Here's an example of interrupting a calculation using `signal.alarm`:

```
import signal

class TimeoutException(Exception):
    pass

def alarm_handler(*args):
    raise TimeoutException()

def tryrun(func, timeout=30):
    oldhandler = signal.signal(signal.SIGALRM, alarm_handler)
    try:
        signal.alarm(timeout)
        func()
    except TimeoutException:
        print "Timeout"
    else:
        print "Success"
    finally:
        signal.alarm(0) # disarm alarm
        signal.signal(signal.SIGALRM, oldhandler)

import time
tryrun(lambda: time.sleep(10), 5) # prints Timeout
tryrun(lambda: time.sleep(2), 5)  # prints Success 
```

# select - EJB JPA QL。需要查询以按 Collection 对象中的元素从 DB 获取数据

> ID：15722525
> 
> 赞同：0
> 
> 时间：2013-03-30T19:23:38.293
> 
> 标签：select, jpa, ejb-3.0

我正面临一个让我陷入困境的问题。我有课文章：

```
 @Entity
    @Table(name = "Articles")
    public class Article implements Serializable {
    private static final long serialVersionUID = 1L;
    @Id
    @GeneratedValue(strategy = GenerationType.AUTO)
    @Column(name="article_id")
    private Long id;

    @Column(name="a_name")
    private String name;

    @Column(name="a_content")
    private String content;

    @OneToMany
    @Column(name="a_tag")
    private Collection <Tags> tag;

  @Entity
  @Table(name = "Tags")
  public class Tags implements Serializable {
  private static final long serialVersionUID = 1L;
  @Id
  @GeneratedValue(strategy = GenerationType.AUTO)
  @Column(name="tag_id")
  private Long tag_id;

  @Column(name="tag_name",nullable=false)
  private String tag_name;

  @Column(name="tag_descr")
  private String tag_descr;

  //position 0 - supertag
  //position 1 - subsupertag
  //position 2 - subtags
  //Collection limited to 3 elements.(3 tags at most, necessaryly Super,subsuper,subtag
  @Column(name="super_tags")
  @OneToMany
  private Collection<Tags> supertags = new ArrayList<Tags>(3);

  //0-supertag 1-subsupertag 2- subtags
  @Column(name="tag_type")
  private int tag_type; 
```

我的标签系统是这样的，我有 Supertag、subsuprttag 和 subtag。Supertag 是 subsupertag 和 subtag 的 parent， subsupertag 是 subtag 的 parent。每篇文章都有super、subsuper和sub标签。

现在，我只想从数据库中获取具有特定标签的文章，但不知道如何引用，例如 Collection 标签中的元素 2（按名称或位置），（这将是子标签）。

```
final String q = "SELECT f FROM Article f WHERE f.a_tag= ..I m lost here ...
EntityManager em;
em.createQuery(q).getResultList(); 
```

我希望我的问题足够清楚。我尽力了））谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-01T14:05:44.050

您可以加入标签以在 JPQL 中访问它们，

见， [http ://en.wikibooks.org/wiki/Java_Persistence/JPQL#JOIN](http://en.wikibooks.org/wiki/Java_Persistence/JPQL#JOIN)

至于Tag的类型，该类型是如何存储在数据库中的呢？

# r - 如何在 R 中的情节图例中编写此文本？

> ID：15722527
> 
> 赞同：0
> 
> 时间：2013-03-30T19:23:48.770
> 
> 标签：r

我想在情节图例的文本（LaTeX 代码）下面写这个但是我试过了，我没能成功。有什么建议吗？‎R_2(‎\delta_{JS}(\bX,W),\theta)-R_2(\bX,W) ‎R_2(‎\delta_{JS}(\bX,W),\theta)\R_2(\ bX,W)

先感谢您。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-30T20:16:53.960

我不同意关闭投票的原因是，现在 tikzDevice 在行动中丢失了，我不知道一种自动的方式来进行 plotmath 的翻译，所以接下来的低效黑客可能会引发更好的如果有人有更好的方法在 R 图中生成乳胶，请回答。

您应该能够在 text() 的标签参数中使用等效的绘图。我的问题是我不阅读 LaTeX 或 TeX，所以我使用： http: [//www.codecogs.com/latex/eqneditor.php](http://www.codecogs.com/latex/eqneditor.php)来构建我可以阅读的东西。如果还有其他我可以使用的资源，我会很高兴听到它们。（我花费了相当多的时间来寻找这些资源，我一直在想我是否可以做得更好。）

![在此处输入图像描述](../Images/dbc22e7d2cf99910d9b3d70cd54f4421.png)

所以在 R 中这相当复杂，但我认为可行：

```
?plotmath
plot(1,1)
text(1.1, 1.2, labels=expression(R[2]*( delta[JS]*(phantom(0)*","*W)*","* theta)- 
                                  R[2]*(phantom(0)*","*W)*R[2]*( delta[JS]*(phantom(0)*
                                   ","*W)*","* theta)[2](phantom(0)*","*W)) ) 
```

![在此处输入图像描述](../Images/255dfc11cf732a8434fc97ee9ad3fc91.png) 如果你想要斜体：

```
text(1.1, 0.8, labels=expression( italic( R[2]*( delta[JS]*(phantom(0)*","*W)*","* theta)- 
                                  R[2]*(phantom(0)*","*W)*R[2]*( delta[JS]*(phantom(0)*
                                   ","*W)*","* theta)[2](phantom(0)*","*W)) ) ) 
```

如果您想要衬线字体，请将其添加到文本参数中`,family="serif"`

![在此处输入图像描述](../Images/86858ddbaa77acc840226c8af2a71db3.png)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-30T20:50:08.887

将表达式添加到绘图的 xlab 的示例（我猜这类似于添加 LaTeX 代码）：

```
library(ggplot2)
data(cars)
qplot(speed, dist, data=cars) + xlab(expression(alpha + frac(beta, gamma))) 
```

# objective-c - uiscrollview 触摸时休息

> ID：15722530
> 
> 赞同：0
> 
> 时间：2013-03-30T19:24:05.267
> 
> 标签：objective-c, uiscrollview

我有 UIScrollView 它有下一个按钮单击它运行此代码

```
-(IBAction)ScrollPage:(id)sender {

        NSLog(@"ScrollPage Called");
        NSInteger positionX;
        if ([sender tag] == 1) {
            positionX = AddNewScroll.contentOffset.x - 320;
        }else {
            positionX = AddNewScroll.contentOffset.x + 320;
        }
        [AddNewScroll setContentOffset:CGPointMake(positionX,0) animated:YES];

    } 
```

它会将滚动移动到新页面，然后我有按钮点击它会调用

```
-(IBAction)SelectImg:(id)sender {

    UIActionSheet *imgMenu = [[UIActionSheet alloc] initWithTitle:@"choose image"
                                                         delegate:self
                                                cancelButtonTitle:@"Cancel"
                                           destructiveButtonTitle:@"Camera"
                                                otherButtonTitles:@"Album",nil];
    imgMenu.actionSheetStyle = UIActionSheetStyleBlackTranslucent;
    [imgMenu showInView:[UIApplication sharedApplication].keyWindow];

}

- (void)actionSheet:(UIActionSheet *)actionSheet clickedButtonAtIndex:(NSInteger)buttonIndex {

    imgPicker = [[UIImagePickerController alloc] init];
    imgPicker.allowsEditing = YES;
    imgPicker.delegate = self;

    @try {
        if (buttonIndex == 0) {
            imgPicker.sourceType = UIImagePickerControllerSourceTypeCamera;
            [self presentModalViewController:imgPicker animated:YES];
        }

        if (buttonIndex == 1) {
            imgPicker.sourceType = UIImagePickerControllerSourceTypePhotoLibrary;

            //Start iPhone PhotoLibrary
            if ([[UIDevice currentDevice]userInterfaceIdiom] == UIUserInterfaceIdiomPhone){
                [self presentModalViewController:imgPicker animated:YES];

            } else
            //Start iPad  PhotoLibrary
            if ([[UIDevice currentDevice]userInterfaceIdiom] == UIUserInterfaceIdiomPad){
                aPopover = [[UIPopoverController alloc] initWithContentViewController:imgPicker];
                [aPopover presentPopoverFromRect:CGRectMake(250, 40, 300, 300) inView:self.view permittedArrowDirections:UIPopoverArrowDirectionAny animated:YES];

            }
        }
    } 
```

问题是当它调用 actionSheet 时 UIScrollView 本身转到第一页 contentOffset 为 0 然后调用 scrollViewDidScroll

附言。分页禁用

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-31T07:56:28.273

在方法`clickedButtonAtIndex`中，您正在重新分配 UIImagePickerController。这不就是它回到0的原因吗？

`AddNewScroll`另外，和之间有什么关系`imgPicker`？

# sql - 通过 category_list 查询 FQL

> ID：15722538
> 
> 赞同：1
> 
> 时间：2013-03-30T19:24:38.043
> 
> 标签：sql, facebook, facebook-graph-api, facebook-fql

我已经构建了以下 FQL 查询，但在添加过滤器时遇到了问题。

```
SELECT
 about,
 attire,
 categories,
 checkins,
 company_overview,
 culinary_team,
 description,
 fan_count,
 food_styles,
 founded,
 general_info,
 general_manager,
 hours,
 keywords,
 location,
 mission,
 name,
 page_id,
 page_url,
 parent_page,
 parking,
 payment_options,
 phone,
 price_range,
 products,
 public_transit,
 restaurant_services,
 restaurant_specialties,
 talking_about_count,
 TYPE,
 username,
 website,
 were_here_count,
 pic
FROM page
WHERE page_id IN
  (SELECT
     page_id,
     latitude,
     longitude
   FROM place
   WHERE distance(latitude, longitude, '-30.03852', '-51.17877') < 50000
   LIMIT 10) 
```

问题是我只想要与餐厅相关的页面。我想我可以通过页表中的“类别”对其进行过滤，但我不知道要使用哪种方法。

我怎样才能做到这一点？关于我可以使用的可用方法的文档在哪里（例如 categories.contains("Restaurant")）

谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-31T00:50:46.640

您要查找的内容包含在该`type`字段中。你写了`TYPE`，那是错误的。

> **type**（字符串）：页面的类型。例如产品/服务、计算机/技术

你需要做：

```
SELECT page_id, type, categories
FROM page
WHERE page_id IN
  (SELECT
     page_id,
     latitude,
     longitude
   FROM place
   WHERE distance(latitude, longitude, '-30.03852', '-51.17877') < 50000
   LIMIT 100)
AND type="RESTAURANT/CAFE" 
```

... 只为您提供餐厅：

```
"data": [
{
  "page_id": 202457279801080, 
  "type": "RESTAURANT/CAFE", 
  "categories": [
    {
      "id": 185459711490789, 
      "name": "Brazilian Restaurant"
    }, 
    {
      "id": 168976549819329, 
      "name": "French Restaurant"
    }, 
    {
      "id": 163300367054197, 
      "name": "Seafood Restaurant"
    }
  ]
}, 
```

Problem is that in many cases, the `type` field isn't set by page owners... so you are going to pass by entries which **are** restaurants:

```
"data": [
{
  "page_id": 216824565018619, 
  "type": "LOCAL BUSINESS", 
  "categories": [
    {
      "id": 134501539950711, 
      "name": "Sushi Restaurant"
    }
  ]
} 
```

I don't even know where these categories come from and how to set them. In my opinion, this field was used before and is now deprecated. Facebook kept the field so that every page keeps displaying this information.

According to [this post](https://stackoverflow.com/a/10325173/1515819), you can't filter categories through an FQL query.

I suggest you to request all the places around using your actual request and to make your own filtering by checking:

*   whether one of the categories contains keywords related to restaurants: `restaurant`, `bar`, `steakhouse`, etc.,
*   OR the `type` of the place is a `RESTAURANT/CAFE`.

# c++ - 修复 LNK2019：freeglut 无法解析的外部符号

> ID：15722540
> 
> 赞同：0
> 
> 时间：2013-03-30T19:24:42.473
> 
> 标签：c++, visual-c++, freeglut

使用[本手册](http://surflab.cise.ufl.edu/wiki/Getting_Started_with_OpenGL_in_VisualC++_2010)，我试图让 freeglut OpenGL 应用程序在我的计算机上编译。这意味着我：

*   将文件从 freeglut 存档复制到 MS 程序文件夹
*   `freeglut.lib`在附加依赖项中指定
*   在库文件夹中明确设置 freeglut.lib 路径

但一切都没有效果。C++ 头文件是正确的，但库不是 - 所以我得到这些错误：

```
1>OpenglTest.obj : error LNK2019: unresolved external symbol __imp__glutMainLoop@0 referenced in function _wmain
1>OpenglTest.obj : error LNK2019: unresolved external symbol __imp__glutSpecialFunc@4 referenced in function _wmain
1>OpenglTest.obj : error LNK2019: unresolved external symbol "void __cdecl specialKeys(int,int,int)" (?specialKeys@@YAXHHH@Z) referenced in function _wmain
1>OpenglTest.obj : error LNK2019: unresolved external symbol __imp__glutDisplayFunc@4 referenced in function _wmain
1>OpenglTest.obj : error LNK2019: unresolved external symbol __imp__glutInitDisplayMode@4 referenced in function _wmain
1>OpenglTest.obj : error LNK2019: unresolved external symbol __imp____glutInitWithExit@12 referenced in function _glutInit_ATEXIT_HACK@8
1>OpenglTest.obj : error LNK2019: unresolved external symbol __imp____glutCreateWindowWithExit@8 referenced in function _glutCreateWindow_ATEXIT_HACK@4
1>OpenglTest.obj : error LNK2019: unresolved external symbol __imp__glutSwapBuffers@0 referenced in function "void __cdecl display(void)" (?display@@YAXXZ) 
```

所以我的问题：

1.  你能猜出可能是什么问题吗？（不容易，但我显然无法找到这一点）
2.  是否有其他一些谷歌没有找到但比我使用的更好的手册？
3.  我应该下载其他档案吗？

我的 C++ 代码来自[这里](http://www.wikihow.com/Make-a-Cube-in-OpenGL)。所有函数都可以在 freeglut 头文件中找到。只是图书馆不见了。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-30T19:56:10.030

这似乎是一个`C vs C++`链接问题。您正在从[那里](http://www.wikihow.com/Make-a-Cube-in-OpenGL)`C source`编译代码（也许您使用 C++ 特定**扩展**保存它并且编译器假定它是 C++）。`C++ code`

 **C++ 将破坏函数名称。例如`__imp__glutMainLoop@0`，最有可能`glutMainLoop`在您的源代码中调用。

该库必须来自 C 代码。因此，它将有一个简单的函数的非损坏版本`glutMainLoop`。这就是它找不到的原因。

解决方案是将您的代码编译为 C 代码或使用[extern "C"](https://stackoverflow.com/questions/1041866/in-c-source-what-is-the-effect-of-extern-c)。

编辑：关于如何处理 C/C++ 链接问题的一些链接（从评论中移出）。

*   [http://www.thegeekstuff.com/2013/01/mix-c-and-cpp/](http://www.thegeekstuff.com/2013/01/mix-c-and-cpp/)
*   [结合 C++ 和 C - #ifdef __cplusplus 如何工作？](https://stackoverflow.com/questions/3789340/combining-c-and-c-how-does-ifdef-cplusplus-work)
*   [http://www.parashift.com/c++-faq-lite/c-calls-cpp.html](http://www.parashift.com/c++-faq-lite/c-calls-cpp.html)**

# php - 使用 MySQL/PHP 对列求和

> ID：15722542
> 
> 赞同：0
> 
> 时间：2013-03-30T19:25:16.763
> 
> 标签：php, mysql, sum

我的问题是，当我在浏览器中运行代码时，为什么 HW1/HW2/HW3 列有空白值？
Studentid 和 Sum 列正确显示了代码。任何理想的如何解决这个问题？

```
<?php

$result = mysqli_query($con,"SELECT studentid,SUM(hw1+hw2+hw3) 
FROM grade
GROUP BY studentid");

echo "<table border='1'>
<tr>
<th>StudentID</th>
<th>HW1</th>
<th>HW2</th>
<th>HW3</th>
<th>SUM</th>

</tr>";

while($row = mysqli_fetch_array($result))
 {
 echo "<tr>";
 echo "<td>" . $row['studentid'] . "</td>";
 echo "<td>" . $row['hw1'] . "</td>";
 echo "<td>" . $row['hw2'] . "</td>";
 echo "<td>" . $row['hw3'] . "</td>";
 echo "<td>" . $row['SUM(hw1+hw2+hw3)'] . "</td>";

 ;}

 echo "</table>";

 mysqli_close($con);
?> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-30T19:41:07.443

只需将您的查询更改为此

```
"SELECT studentid,hw1, hw2, hw3, SUM(hw1+hw2+hw3) as hw
FROM grade
GROUP BY studentid" 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-30T19:32:40.350

我不确定，因为你的问题写得不好。但我认为你只需要这样做来获取值：

选择学生ID,hw1,hw2,hw3,SUM(hw1+hw2+hw3)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-30T19:34:35.623

因为您没有选择列，请尝试：

```
$result = mysqli_query($con, 'SELECT `studentid`, `hw1`, `hw2`, `hw3`, SUM(`hw1`+`hw2`+`hw3`) as `sum` FROM `grade` GROUP BY `studentid`');

while($row = mysqli_fetch_array($result)) {
    echo "<tr>";
    echo "<td>" . $row['studentid'] . "</td>";
    echo "<td>" . $row['hw1'] . "</td>";
    echo "<td>" . $row['hw2'] . "</td>";
    echo "<td>" . $row['hw3'] . "</td>";
    echo "<td>" . $row['sum'] . "</td>";
} 
```

# ios - Facebook iOS SDK vs Social framework

> ID：15722543
> 
> 赞同：19
> 
> 时间：2013-03-30T19:25:22.287
> 
> 标签：ios, facebook, social-framework

I want to write app that is heavily integrated with Facebook. I'm not sure what shoud I use - sdk provided by Facebook or new Social Framework provided by Apple. Do you know some pros and cons of them?

**[EDIT]** I ended using Social Framework provided by Apple, because it's much easier to integrate, It will be develop in future, and I have access to device owner Facebook account, so user don't have to log in to Facebook when using my app. I want to do some custom stuff, so I get oauth token from ACAccountCredential and then I make requests with AFNetworing to Facebook's Graph API.

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2013-03-30T19:34:04.403

The Social Framework is designed for simple, site-neutral data manipulation. Examples might include getting the user's 'activity feed' (as described by the docs) or posting a new status or photo. It currently works with Twitter, Facebook and Weibo however, other than lack of features, the current main disadvantage is that it is limited to iOS 6, which won't be as much of a problem in the future.

On the other hand Facebook does have an iOS SDK that makes it reasonably easy to integrate Facebook into your app, and it is much more powerful than the Social Framework. Another benefit is that support goes back to iOS 4.3.

I'd recommend using the Facebook iOS SDK over writing your own custom one and using OAuth because Facebook has already done the work for you.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-06-25T16:16:24.560

I've struggled with this decision for a long time and came to this conclusion. If your app doesn't care for iOS 5 and older phones, then the iOS Social framework is the way to go, as it allows the user to share with any of the popular social outlets (Facebook, Twitter, email, Weibo, SMS...) just like one can do in mobile safari. According to Apple, 89% of the iDevices are already on iOS 7\. The percentage will be higher if you include iOS 6.

# jquery - The best way to store table data in javascript in case of undo

> ID：15722548
> 
> 赞同：0
> 
> 时间：2013-03-30T19:25:40.880
> 
> 标签：jquery, html

I have a html table, in which I'm erasing some `<td>s` and replacing them with `<td>Added!</td>` with ajax when a certain action is taken, like this:

```
 tr.find('.td2').replaceWith('<td>'+my_new_data+'</td>'); 
```

However, I want to have the option to `undo` the action and I need to put the original `td` data back.

I have a few options I know of:

### 1) Store the original value in an array

I don't know how to do this, however. The following doesn't work:

```
storedFoodData[id][2] = tr.find('.td2').html();
storedFoodData[id][3] = tr.find('.td3').html(); 
```

> Uncaught TypeError: Cannot read property '6' of undefined

### 2) Not replace the original TD, just hide() it and append() a new one after it

The problem here is that I'm not sure I can do this, semantically. It should break the html code if I understand it correctly.

Any ideas how to solve this situation?

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-30T19:31:50.530

You can use html5 `data-attributes`

Save `html()` of `td` in data attribute and mark that `td` as lastUpdated `td` by adding a particular class (I am using `active` class). Later on, if someone clicks undo, retrieve the content from data attribute and put that in `html()`

```
 $('.active').removeClass('.active');
    var td = tr.find('.td2');
    td.data('oldData',td.html());
    td.html(my_new_data).addClass('.active'); 
```

And on click of undo, use this,

```
var active = $('.active');
active.html(active.data('oldData')); 
```

# sql-server-2008 - Attach a remotely stored database

> ID：15722551
> 
> 赞同：3
> 
> 时间：2013-03-30T19:25:44.860
> 
> 标签：sql-server-2008, database-connection

Is it possible to attach a database that is stored on a remote server because when I mapped a drive and tried to attach it in management studio, the drive does not show up as an option. I moved it because of disk space and if I cannot what is the alternative suggestions?

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-30T20:09:37.160

You should be able to attach a database on UNC path (I wouldn't use a mapped drive - that drive is mapped for you, not the SQL Server service account), but you have to ensure that the SQL Server service account has read/write permissions on the remote folder, and you have to run trace flag 1807 ([please read Brent Ozar's post about this](http://www.brentozar.com/archive/2012/01/sql-server-databases-on-network-shares-nas/)).

Also don't use the GUI for this. Once you have the trace flag set, have restarted the service, and have configured permissions correctly, use a new query window, and run the following command:

```
CREATE DATABASE db_name 
ON (Filename = '\\uncpath\share\file.mdf'),
   (Filename = '\\uncpath\share\file.ldf')
FOR ATTACH; 
```

(The UI is never going to offer you a UNC path no matter what trace flags you have set or what permissions are enabled.)

Be prepared to handle a corrupted and possibly unrecoverable database should the network share go down, of course.

If that sounds scary to you, good! It should! This is not a good idea at all. Instead you should free up some space, add a drive, or host the database on a different instance.

# android - Android 2.3 API 不可用作 AVD 的目标选项

> ID：15722554
> 
> 赞同：1
> 
> 时间：2013-03-30T19:25:56.333
> 
> 标签：android, avd

我是 android 开发的新手，我正在尝试创建一个 AVD 来测试应用程序，然后再将其推送到我的手机（htc 希望运行 android 2.3.5）。

我正在使用 ADT 包，并使用 SDK 管理器下载了这些：

1.  4.2.2 (API 17)
2.  4.1.2 (API 16)
3.  2.3.3 (API 10)
4.  2.2 (API 8)

但是当尝试选择 AVD 的目标时，唯一可用的选项是 API 17,16 和 8。

怎么了？

**更新：** 我已经尝试删除并重新下载 API，它显示在 android-sdk/platforms 目录中。

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-08-17T10:33:26.663

安装包后重启eclipse我也有同样的问题重启eclipse后我在下拉列表中获得了所有api级别

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-04-11T22:39:29.337

我遇到了同样的问题，因为我已经下载了 sdk 两次，并且我的 SDK 管理器在我的 IDE 与另一个 SDK 一起工作时不断更新第一个 SDK。所以检查你的IDE的偏好，看看它是否指向正确的。（在 Eclipse 中转到 windows> 首选项> SDK 位置）

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-03-30T19:41:33.120

对于 Android 2.3.3，SDK 管理器中将有三个相关条目：

*   “SDK 平台”，对于较旧的 API 级别（如 10）将包含 ARM 仿真器映像

*   “Google APIs”，其中将包含一个模拟器图像，其中包含 Google 地图

*   “Intel Atom x86 System Image”，它将包含一个运行 x86 操作码而不是 ARM 操作码的仿真器映像（并且，通过正确设置您的开发机器，可以更快地运行仿真器）

如果您安装其中一个或多个，您应该获得 API 级别 10 出现一个用于设置 AVD 的选项。

如果这不起作用，您可以考虑编辑您的问题并发布您的 SDK 管理器（特别是 2.3.3 部分）和 AVD 管理器（特别是可用 API 级别的下拉菜单）的屏幕截图。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-03-30T19:31:46.660

尝试更新 2.3.3 API。如果您希望在您的设备上尝试之前先测试您的应用程序，您也可以尝试使用 BlueStacks。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-03-30T19:35:28.090

从 SDK Manager 中删除该 api 并重新下载。

# arrays - Setting array equal to JSON array - Xcode

> ID：15722556
> 
> 赞同：0
> 
> 时间：2013-03-30T19:26:13.913
> 
> 标签：arrays, json, uitableview, httprequest, afnetworking

I'm trying to figure out how to populate a table from a JSON array. So far, I can populate my table cells perfectly fine by using the following code:

```
self.countries = [[NSArray alloc]initWithObjects:@"Argentina",@"China",@"Russia",nil]; 
```

Concerning the JSON, I can successfully retrieve one line of text at a time and display it in a label. My goal is to populate an entire table view from a JSON array. I tried using the following code, but it still won't populate my table. Obviously I'm doing something wrong, but I searched everywhere and still can't figure it out:

```
NSURL *url = [NSURL URLWithString:@"http://BlahBlahBlah.com/CountryList"];
NSURLRequest *request = [NSURLRequest requestWithURL:url];

AFJSONRequestOperation *operation = [AFJSONRequestOperation JSONRequestOperationWithRequest:request success:^(NSURLRequest *request, NSHTTPURLResponse *response, id JSON)
{
    NSLog(@"%@",[JSON objectForKey:@"COUNTRIES"]);
    self.countries = [JSON objectForKey:@"COUNTRIES"];
}
failure:nil];
[operation start]; 
```

I am positive that the data is being retrieved, because the NSLog outputs the text perfectly fine. But when I try setting my array equal to the JSON array, nothing happens. I know the code is probably wrong, but I think I'm on the right track. Your help would be much appreciated.

EDIT: This is the text in the JSON file I'm using:

```
{
 "COUNTRIES": ["Argentina", "China", "Russia",]
} 
```

-Miles

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-30T21:42:27.907

It seems that you need some basic JSON parsing. If you only target iOS 5.0 and above devices, then you should use [NSJSONSerialization](http://developer.apple.com/library/ios/#documentation/Foundation/Reference/NSJSONSerialization_Class/Reference/Reference.html). If you need to support earlier iOS versions, then I really recommend the open source [JSONKit](https://github.com/johnezang/JSONKit) framework.

Having recommended the above, I myself almost always use the [Sensible TableView](http://sensiblecocoa.com) framework to fetch all data from my web service and automatically display it on a table view. Saves me a ton of manual labor and makes app maintenance a breeze, so it's probably something to consider too. Good luck!

# chaplinjs - ChaplinJS: Referencing a CollectionView property in its template

> ID：15722558
> 
> 赞同：0
> 
> 时间：2013-03-30T19:26:19.930
> 
> 标签：chaplinjs

I have a Collection in ChaplinJS that has the following initialization code:

```
Chaplin = require 'chaplin'
Collection = require 'models/base/collection'
Domain = require 'models/domain'
mediator = require 'mediator'

module.exports = class Domains extends Collection

  model: Domain

  # Initialize the SyncMachine
  _(@prototype).extend Chaplin.SyncMachine

  initialize: ->
    super
    @.totalHits = 0 
```

How can I reference `totalHits` in the template of its view? I am using handlebars templates, and writing `{{totalHits}}` returns nothing.

Incidentally, shouldn't I be able to rewrite the above code with:

```
module.exports = class Domains extends Collection

  model: Domain
  totalHits: 0 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-30T23:16:11.503

Found the solution:

In my `CollectionView` I can override `getTemplateData` and pass into it whatever I want, including the complete collection object:

```
 getTemplateData: ->
    templateData = super
    templateData.collection = @.collection
    templateData 
```

Then in the handlebars template I can do `{{collection.totalHits}}`

# c# - C# Load a .NET assembly from memory with parameters

> ID：15722561
> 
> 赞同：1
> 
> 时间：2013-03-30T19:26:38.087
> 
> 标签：c#

I would like to know how i can launch a .NET assembly from a byte array with parameters. I do not want to write it to the disk first. Could anyone give me an example on how to do this? Thank you.

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-30T22:36:37.677

This should do the trick.

```
Assembly program = Assembly.Load(ASSEMBLY_BYTES);

string[] args = new string[] { "-s" };

program.EntryPoint.Invoke(null, new object[] { args }); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-30T19:28:58.623

There is a [method](http://msdn.microsoft.com/en-us/library/aa329934%28v=vs.71%29.aspx): `Assembly.Load(Byte[])`.

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-30T23:18:12.540

I asked the question on another forum and they were able to help me, this is what i was looking for;

```
 Assembly program = Assembly.Load(ASSEMBLY_BYTES);

        string[] args = new string[] { "-s" };

        program.EntryPoint.Invoke(null, new object[] { args }); 
```

# symfony - 在 Symfony2 中的每个请求上为 Doctrine 过滤器设置参数

> ID：15722566
> 
> 赞同：2
> 
> 时间：2013-03-30T19:27:18.230
> 
> 标签：symfony, filter, doctrine-orm, doctrine

我在 Symfony2 项目中有一个 Doctrine 过滤器。我试图在每个请求上将过滤器的参数设置为某个值（取自会话）。问题是过滤器对象是在 Symfony 的 onKernelRequest 事件之后创建的，所以我不能从那里设置它。如果我尝试在 Doctrine 的 postConnect 事件循环依赖中设置它：

```
ServiceCircularReferenceException: Circular reference detected for service "doctrine.orm.private_entity_manager", path: "routing.loader -> assetic.asset_manager -> twig -> translator.default -> doctrine.orm.private_entity_manager -> doctrine.dbal.private_connection -> year_visibility.parameter_setter". 
```

问题是，我应该在哪里（或者更确切地说如何）设置过滤器的参数？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-04-03T15:54:00.040

您可以尝试手动定义过滤器并同时传递所需的参数。

```
services:
    app.filter_manager:
        class: App\Bundle\AppBundle\Filter\FilterManager
        arguments: [@doctrine.orm.entity_manager, @session]
        tags:
            - { name: kernel.event_listener, event: kernel.request, method: onKernelRequest } 
```

在过滤器管理器类中：

```
// ...

public function __construct(EntityManager $em, SessionInterface $session) 
{
    $this->em = $em;
    $this->session = $session;
}

// ...

public function onKernelRequest()
{
    $this->em->getConfiguration()->addFilter('filter_name', 'Filter/Class/Name/With/Ns');

    $filter = $this->em->getFilters()->enable('filter_name');
    $filter->setParameter('param_name', $this->session->get('param_name'));
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-04T11:25:14.023

如此处所示：[https](https://stackoverflow.com/a/14650403/244058) ://stackoverflow.com/a/14650403/244058 ，

您可以在内核启动时拥有 Filter 类的实例。因此，您的实例将**很**早就可用。

```
<?php

class MyBundle extends Bundle 
{
    public function boot()
    {
        $em = $this->container->get('doctrine.orm.default_entity_manager');
        $conf = $em->getConfiguration();
        $conf->addFilter(
            'filter_name',
            'Doctrine\Filter\TestFilter'
        );

        // either enable it here, or later in the event listener
        $em->getFilters()->enable('filter_name');
    }
} 
```

之后，只需添加一个 kernel.event_listener 来监听`kernel.request`并设置一个过滤器参数（类似这样）：

```
<?php

class DoctrineSqlFilterConfigurator
{
    private $em; // inject the entity manager somehow (ctor is a good idea)

    public function onKernelRequest(GetResponseEvent $event)
    {
        $filter = $this->em->getFilters()->enable('filter_name');
        $filter->setParameter('param_name', $event->getRequest()->getSession()->get('param_name'));
    }
} 
```

# php - PHP，将PDF文件读入字符串

> ID：15722568
> 
> 赞同：1
> 
> 时间：2013-03-30T19:27:28.680
> 
> 标签：php, pdf

我知道这个话题在这里讨论得太多了，但我找不到我想要的，我想用 PHP 将 PDF 文件读入字符串，例如在其中搜索关键字。

我曾经通过使用'pdftotext'命令来使用'XPDF'，它工作得很好，除了我在localhost以外的主机上没有成功，因为`shell_exec()`出于安全原因禁用了服务器上的功能。

[我尝试了其他一些方法，例如在' http://webcheatsheet.com](http://webcheatsheet.com) '上写了一个名为'pdf2text'的函数，但它不起作用，我一直得到一个空文件。

因此，我需要一种读取 PDF 文件以在其中进行搜索的方法，而不会出现任何安全错误，例如`shell_exec()`.

# java - 将自定义属性添加到 JTree 并打印它

> ID：15722573
> 
> 赞同：1
> 
> 时间：2013-03-30T19:27:50.523
> 
> 标签：java, swing, jtree

我正在尝试实现一个`FP-Tree`. 所以我使用了一个`JTree`. 我已经成功创建了我的树。但我需要向我的节点添加两个自定义属性，“Label”和“LabelCount”

而且我还需要在树中打印它。那可能吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-30T22:30:33.900

使用 DefaultMutableTreeNode 作为节点并向其添加用户对象，而不是将您自己的 TreeCellRenderer 实现添加到树中（setTreecellRenderer(...)
在您的 TreeCellRenderer 中实现 getTreeCellRendererComponent 方法。

```
Component getTreeCellRendererComponent(JTree tree,
                                 Object value,
                                 boolean selected,
                                 boolean expanded,
                                 boolean leaf,
                                 int row,
                                 boolean hasFocus) 
```

Object 值参数将是包含您的用户对象的 DefaultMutableTreeNode。

您可以只返回包含所需文本的 JLabel（或任何其他组件）。

出于性能原因，您可以重用您的 JLabel，无需在每次调用该方法时都创建一个新的。

# android - 当我从自定义快捷方式开始活动时，如何销毁所有以前的活动？

> ID：15722577
> 
> 赞同：0
> 
> 时间：2013-03-30T19:28:26.363
> 
> 标签：android, android-activity, shortcut

**我的步骤：**

1.  启动器快捷方式启动 Activity **A**；
2.  点击**主页**按钮；
3.  自定义快捷方式启动 Activity **B**；
4.  单击**BACK**按钮 - 向我显示 Activity **A**。

但是当我单击自定义快捷方式时，我希望我所有的旧活动都**关闭**。我怎样才能做到这一点？

**显现：**

```
activity A: android:launchMode="singleTop"
activity B: android:launchMode="singleTop" and android:exported="true" 
```

**爪哇：**

```
private void setShortCut() {
  Intent shortcutIntent = new Intent(getApplicationContext(), A.class);
  shortcutIntent.addFlags(Intent.FLAG_ACTIVITY_SINGLE_TOP | Intent.FLAG_ACTIVITY_CLEAR_TOP);
  shortcutIntent.setAction(Intent.ACTION_MAIN);
  Intent intent = new Intent();
  intent.putExtra(Intent.EXTRA_SHORTCUT_INTENT, shortcutIntent);
  intent.putExtra(Intent.EXTRA_SHORTCUT_NAME, "test");
  intent.putExtra(Intent.EXTRA_SHORTCUT_ICON, ((BitmapDrawable)imgLogo.getDrawable()).getBitmap());
  intent.setAction("com.android.launcher.action.INSTALL_SHORTCUT");
  sendBroadcast(intent);
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-30T22:10:49.973

```
activity A: android:finishOnTaskLaunch="true"
activity B: android:finishOnTaskLaunch="true" and android:exported="true" 
```

[来自http://developer.android.com/guide/topics/manifest/activity-element.html#finish](http://developer.android.com/guide/topics/manifest/activity-element.html#finish)的官方文档

“每当用户再次启动其任务（在主屏幕上选择任务）时，是否应该关闭（完成）活动的现有实例 - 如果应该关闭，则为“true”，如果不应该关闭，则为“false” . 默认值为“假”。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-01T11:18:59.427

我建议你也有你的自定义快捷方式 start **，**`ActivityA`但在. In和 in你可以检查额外的是否存在，如果存在，则启动并调用。这应该给你你想要的行为。**`Intent``ActivityA.onNewIntent()``ActivityA.onCreate()``ActivityB``finish()`**

 **例如，在创建自定义快捷方式时添加：

```
shortcutIntent.putExtra("customShortcut", true); 
```

并将此代码放入`onCreate()`和`onNewIntent()`中`ActivityA`：

```
if (getIntent().hasExtra("customShortcut")) {
    Intent intent = new Intent(this, B.class);
    intent.addFlags(Intent.FLAG_ACTIVITY_SINGLE_TOP);
    startActivity();
    finish();
    return;
} 
```**

# php - https 设置 - 链接显示目录列表而不是网页

> ID：15722580
> 
> 赞同：0
> 
> 时间：2013-03-30T19:28:43.690
> 
> 标签：php, apache, ssl, https, lampp

我正在尝试`https`根据本文在我的lampp服务器上启用

[http://incho.net/tools-frameworks/how-to-setup-http-protocol-with-ssl-on-lamp-environment/](http://inchoo.net/tools-frameworks/how-to-setup-http-protocol-with-ssl-on-lamp-environment/)

但是当我尝试访问“ [https://mywebsite.com](https://mywebsite.com) ”时，它会显示 htdocs 文件夹的目录列表。

虚拟主机配置

```
<Virtualhost mysite.com:443>
    DocumentRoot /opt/lampp/htdocs/myfolder/
    ServerName mysite.com:443
    ErrorLog /opt/lampp/logs/error_log
    TransferLog /opt/lampp/logs/access_log
    SetEnv APPLICATION_ENV development
    SSLEngine on
    SSLCipherSuite ALL:!ADH:!EXPORT56:RC4+RSA:+HIGH:+MEDIUM:+LOW:+SSLv2:+EXP:+eNULL
    SSLCertificateFile /opt/lampp/etc/ssl.crt/mysite.com.crt
    SSLCertificateKeyFile /opt/lampp/etc/ssl.key/mysite.com.key
    <filesmatch "\.(cgi|shtml|phtml|php)$">
        SSLOptions +StdEnvVars
    </filesmatch>
    <directory "/opt/lampp/htdocs/myfolder">
        SSLOptions +StdEnvVars
        Options Indexes FollowSymLinks MultiViews
        AllowOverride All
        Order allow,deny
        allow from all
    </directory>
    BrowserMatch ".*MSIE.*" \
    nokeepalive ssl-unclean-shutdown \
    downgrade-1.0 force-response-1.0
    CustomLog /opt/lampp/logs/ssl_request_log \
    "%t %h %{SSL_PROTOCOL}x %{SSL_CIPHER}x \"%r\" %b"
</Virtualhost> 
```

谢谢

# ios - Send JSON post data from iPhone Application Expressjs/Nodejs backend

> ID：15722582
> 
> 赞同：1
> 
> 时间：2013-03-30T19:28:44.767
> 
> 标签：ios, objective-c, node.js

This is my code for sending a post request to a nodejs backend.

```
CLLocation* location = [locationManager location];
CLLocationCoordinate2D coord = [location coordinate];
NSMutableURLRequest *request =
[NSMutableURLRequest requestWithURL:[NSURL URLWithString:@"http://50.63.172.74:8080/points"]];
//[request setValue:@"application/json" forHTTPHeaderField:@"Content-Type"];
[request setHTTPMethod:@"POST"];
NSDictionary* jsonDict = [NSDictionary dictionaryWithObjectsAndKeys:[NSNumber numberWithFloat:coord.latitude], @"lat", [NSNumber numberWithFloat:coord.longitude], @"lng", nil];//dictionaryWithObjectsAndKeys:coord.latitude, nil]
NSString *postString;
NSError *error;
NSData *jsonData = [NSJSONSerialization dataWithJSONObject:jsonDict
                                                   options:NSJSONWritingPrettyPrinted // Pass 0 if you don't care about the readability of the generated string
                                                     error:&error];

if (! jsonData) {
    NSLog(@"Got an error: %@", error);
} else {
   postString = [[NSString alloc] initWithData:jsonData encoding:NSUTF8StringEncoding];
}
[request setHTTPBody:[postString dataUsingEncoding:NSUTF8StringEncoding]];
(void)[[NSURLConnection alloc] initWithRequest:request delegate:self]; 
```

Using express I'm getting the request.body back on the server but it looks like this:

```
{ '{\n  "lat" : 0.0,\n  "lng" : 0.0\n}': '' } 
```

and I can't access it by just saying `request.body.lat` since it comes back as undefined. I want the body to look like:

```
{ "lat":0.0, "lng":0.0} 
```

Any idea on how to do that using express?

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-09-02T11:57:35.320

May this help you.

**Please replace 0.0 with your actual coordiantes**

```
NSArray *keys = [NSArray arrayWithObjects:@"lat", @"lng", nil];
        NSArray *objects = [NSArray arrayWithObjects:@"0.0",@"0.0", nil];

        NSDictionary *jsonDictionary = [NSDictionary dictionaryWithObjects:objects forKeys:keys];
        NSData *jsonData ;
        NSString *jsonString;
        if([NSJSONSerialization isValidJSONObject:jsonDictionary])
        {
            jsonData = [NSJSONSerialization dataWithJSONObject:jsonDictionary options:0 error:nil];
            jsonString = [[NSString alloc]initWithData:jsonData encoding:NSUTF8StringEncoding];
        }

        NSString *requestString = [NSString stringWithFormat:
                                   @"http://50.63.172.74:8080/points"];

        NSURL *url = [NSURL URLWithString:requestString];
        NSMutableURLRequest *request = [NSMutableURLRequest requestWithURL:url];
        [request setHTTPMethod:@"POST"];
        [request setHTTPBody: jsonData];
        [request setValue:@"application/json" forHTTPHeaderField:@"Content-Type"];
        [request setValue:[NSString stringWithFormat:@"%d", [jsonData length]] forHTTPHeaderField:@"Content-Length"];

        NSError *errorReturned = nil;
        NSURLResponse *theResponse =[[NSURLResponse alloc]init];
        NSData *data = [NSURLConnection sendSynchronousRequest:request returningResponse:&theResponse error:&errorReturned];

        if (errorReturned) {
            NSLog(@"Error %@",errorReturned.description);
        }
        else
        {
            NSError *jsonParsingError = nil;
            NSMutableArray *arrDoctorInfo  = [NSJSONSerialization JSONObjectWithData:data options:NSJSONReadingMutableContainers|NSJSONReadingAllowFragments error:&jsonParsingError];

            NSLog(@"Dict %@",arrDoctorInfo);
        } 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-31T01:33:29.950

The problem is that after you use `NSJSONSerialization` to obtain a NSData object containing your JSON data, you then create `postString` from that data. Eliminate that unnecessary step, and just do:

```
[request setHTTPBody:jsonData]; 
```

And you should get the expected JSON in your server-side code.

# html - 两个相邻的距离大 元素

> ID：15722583
> 
> 赞同：1
> 
> 时间：2013-03-30T19:28:50.440
> 
> 标签：html, css

我注意到当我在`<h2>`标签正下方有一个`<h1>`标签时，两者之间有很大的差距。没有设置填充或边距，我使用 normalize.css 对 css 进行了规范化。为什么会存在这个差距？

小提琴在这里：[小提琴](http://jsfiddle.net/eK823/)

这是一个屏幕截图：

![截屏](../Images/f603af29c4dee490837be5443f58c567.png)

**html**（normalize.css 在此 html 上处于活动状态）

```
<div class="header">
    <div class="wrapper">
        <h1>Portfolio of...</h1>    
        <h2>Jing Xue</h2>
    </div>
</div> 
```

**css**

```
.wrapper {
    width: 940px;
    margin: 0 auto 0 auto;
}

/* header ------------------------------------------------------------------ */

.header {
    text-align: center;
    padding: 40px 0 0 0;
    margin-bottom: 40px;
}

.header h1 {
    font-family: 'Delius Swash Caps', cursive;
    font-size: 250%;
    color: rgb(200,50,50);
    /* margin-bottom: -50px; */
}

.header h2 {
    font-family: 'Playfair Display SC', serif;
    font-size: 450%;
    color: rgb(59,67,68);
} 
```

* * *

**进一步的问题**

对于“...的投资组合”和“Jing Xue”之间如此大的差距的原因是什么，缩小差距以给出相应的负顶部/底部边距的正确方法是`<h..>`什么？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-30T19:31:19.487

`h1`通过`h4`标签具有默认边距。您需要在 CSS 中删除该边距。

```
.header h1 {
    font-family: 'Delius Swash Caps', cursive;
    font-size: 250%;
    color: rgb(200,50,50);
    margin:0;
}

.header h2 {
    font-family: 'Playfair Display SC', serif;
    font-size: 450%;
    color: rgb(59,67,68);
    margin:0;
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-30T19:31:57.293

这是这些元素的正常行为。

您忘记`margin-top`取消`h2`元素的默认设置。只需添加`margin-top:0px;`到您的`h2`班级。

**这是一个工作[jsFiddle](http://jsfiddle.net/eK823/1/)**。

您的课程现在应该如下所示：

```
.header h2 {
    font-family: 'Playfair Display SC', serif;
    font-size: 450%;
    color: rgb(59,67,68);
    margin-top:0px;
} 
```

这是来自**[W3](http://www.w3.org/TR/CSS21/sample.html)**的关于一些默认元素样式的图像：

![在此处输入图像描述](../Images/cf3db31061efc2811c063469c4a435a3.png)

**[在W3.org](http://www.w3.org/TR/CSS21/sample.html)上查看有关元素默认样式的更多信息。**

# facebook - 图搜索后如何获取 Facebook 帖子？

> ID：15722585
> 
> 赞同：3
> 
> 时间：2013-03-30T19:28:56.943
> 
> 标签：facebook, post

```
https://graph.facebook.com/search?access_token=xxxxxx&q=hello&type=post&fields=from,message,picture,link,name,caption,description,created_time&limit=1&locale=en_US&scope=publish_stream,offline_access,user_status,read_stream 
```

经过这样的图形搜索后，我得到了一些数据，例如：

```
{
   "data": [
      {
         "from": {
            "name": "Eric Fluegge",
            "id": "100000626293694"
         },
         "message": "Well, here's go nothing. Hello Tennessee.",
         "created_time": "2013-03-30T19:23:44+0000",
         "id": "100000626293694_567340783296793"
      }
   ],
   "paging": {
      "previous": "https://graph.facebook.com/search?fields=from,message,picture,link,name,caption,description,created_time&q=hello&limit=1&type=post&locale=en_US&access_token=XXXXXXXXXXXXX&since=1364671424&__previous=1",
      "next": "https://graph.facebook.com/search?fields=from,message,picture,link,name,caption,description,created_time&q=hello&limit=1&type=post&locale=en_US&access_token=XXXXXXXXXXXXX&until=1364671423"
   }
} 
```

那么，是`"id": "100000626293694_567340783296793"`帖子ID吗？如果是这样，如何使用这个post id，再次查询，只得到这个特定的post信息？我想存储`post id`到mysql表，然后我想以后随时查询帖子，谢谢。

**EIDT：**在应用程序设置中，我设置了`publish_stream,offline_access,user_status,read_stream`

**EIDT2：** 我尝试过`Graph API Explorer`，选择`read_stream`并生成一个万岁令牌。

```
SELECT post_id, actor_id, message, type, attachment FROM stream WHERE post_id = "100000626293694_567340783296793" 
```

结果还是空的。所以我不能得到一个帖子，因为我不是帖子作者的朋友？还是`100000626293694_567340783296793`不是帖子ID？还是其他原因？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-02T07:20:56.760

是的，这`"id": "100000626293694_567340783296793"`是一个帖子 ID，您可以使用以下 URL 再次查询其数据：`http://graph.facebook.com/100000626293694_567340783296793`

***注意力！***

您也应该请求**`read_stream`**许可/范围！否则你会得到以下错误：

```
{
   "error": {
       "message": "Unsupported get request.",
       "type": "GraphMethodException",
       "code": 100
   }
} 
```

当然，将 access_token 附加到您的 GET url。（也不要忘记 https）

您可以在此处查看 Graph API 参考：[发布 - Facebook 开发人员参考](https://developers.facebook.com/docs/reference/api/post/)

# ruby-on-rails - 轨道形式的形式

> ID：15722593
> 
> 赞同：0
> 
> 时间：2013-03-30T19:29:46.787
> 
> 标签：ruby-on-rails, forms

我想创建一个表单，其中包含一些用于其他事物的表单。

所以我有一个主窗体来创建一个项目。看起来像：

```
Project(name, date, info, ...) 
```

此外，这个项目有很多人与之相关。人们看起来像：

```
Person(name, age, ...) 
```

我有一个包含关系的表：

```
Relation(project_id, person_id, available) 
```

如果我创建一个新项目，我想要一些字段来填充项目的数据，例如名称等，并且我想要一个所有人的列表。如果我提交表单，则会在 Relation 表中创建 x 个条目，其中 x 是 People 的 aomunt。我怎样才能让它工作？表格应该是这样的

```
 PROJECT:
name    [      ]
date    [      ]
info    [      ]

Users:
user1  available?  [ ]
user2  available?  [x]
user3  available?  [ ]

and so on... 
            回答 #1

赞同：0

时间：2013-03-30T19:44:30.583

您可以使用嵌套表单解决此问题。看看这个截屏视频：
 [http ://railscasts.com/episodes/196-nested-model-form-revised](http://railscasts.com/episodes/196-nested-model-form-revised)

```

# android - 如何正确集成 Android SDK (Adt) 和 Maven：

> ID：15722594
> 
> 赞同：1
> 
> 时间：2013-03-30T19:29:48.103
> 
> 标签：android, eclipse, maven, adt, m2eclipse

我创建了一个基于 android-release 原型的 android 项目（通过 mvn CLI）。为了将其导入 Eclipse ADT（版本 21），我尝试了：

*   mvn 日食：日食

这种方法的问题在于创建的 eclipse 项目是一个 Java 项目，并且没有“android”特性。

所以我尝试了：

*   使用 M2E eclipse 插件（Eclipse 的 Maven 集成）导入 pom.xml

现在我有两个不同的问题：

*   gen 文件夹不是 maven 使用的文件夹，[我必须将其添加为源文件夹](https://stackoverflow.com/questions/9532045/gen-already-exists-but-is-not-a-source-folder)。
*   通过 eclipse 运行时单元测试类获取[ClassNotFoundException](https://stackoverflow.com/questions/5974432/classnotfoundexception-when-running-junit-unit-tests-within-eclipse-using-maven)。Maven 完全没有问题。

这是它应该如何工作的吗？我在这里做错了什么，还是我的期望太高了？

# android - 如何在 Android 设备中添加新密钥

> ID：15722601
> 
> 赞同：1
> 
> 时间：2013-03-30T19:30:18.090
> 
> 标签：android, linux, linux-kernel, embedded-linux

我有一个带有 Tao3530chip 的设备，上面有一个 Android 2.3.3 系统。我还在那个 Tao 芯片上的 gpio100 上有一个按钮。我想使用该按钮在高级应用程序中执行一些控制。

如果我将此 gpio 100 映射到 .kl 文件中的某个键值，假设值为 1 的 KEY_ESC，我需要更多的是更改对此键事件的高级响应。

但是，显然它不是一个好的映射。

另一方面，我不知道如何将我的 gpio100 映射到 .kl 文件中未使用的或用户定义的键值。我的理解是，也许我需要执行以下操作：

```
#define KEY_MYDEFINE 0x123 
```

（0x123 是未使用的值。）并将我的 gpio100 映射到 KEY_MYDEFINE。然后稍后为 KEY_MYDEFINE 编写高级响应。程序是否正确？

# gif - javax.imageio.ImageIO: "IIOException: Unsupported image type" error when loading a gif file

> ID：15722604
> 
> 赞同：2
> 
> 时间：2013-03-30T19:30:43.890
> 
> 标签：gif, javax.imageio

I want to load the following gif file using

```
ImageIO.read(new URL("http://logos.affili.net/120x40/10421.gif")) 
```

and this line throws

```
javax.imageio.IIOException: Unsupported Image Type 
```

Why? Is there a way to load such files? I only need to load them for determining image size (height and weight) in pixels.

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-06-27T08:23:16.997

The problem is:

a) The image in question `"http://logos.affili.net/120x40/10421.gif"` is not a GIF despite it's extension, it's a JPEG (this is actually OK for ImageIO, as it doen't look at the file extension anyway, but it's part of the analysis).

b) Further, the image is a CMYK (YCCK) JPEG. The standard `JPEGImageReader` does not handle CMYK JPEGs, and causes the exception you experience.

You can use my [JPEG ImageIO plugin](https://github.com/haraldk/TwelveMonkeys/tree/master/imageio/imageio-jpeg) to read such files, or look at the other alternatives like Sanselan/Commons Imaging, JAI etc.

See [Java ImageIO IIOException: Unsupported image type?](https://stackoverflow.com/questions/7177655/java-imageio-iioexception-unsupported-image-type) and [Pure Java alternative to JAI ImageIO for detecting CMYK images](https://stackoverflow.com/questions/6829428/pure-java-alternative-to-jai-imageio-for-detecting-cmyk-images) for more information.

# facebook - Send FB user a notification via App

> ID：15722605
> 
> 赞同：1
> 
> 时间：2013-03-30T19:30:49.017
> 
> 标签：facebook, facebook-graph-api, facebook-php-sdk

I'm getting an App access token via the Facebook API.

```
$app_id = "ID";
$app_secret = "SECRET";
$token_url = "https://graph.facebook.com/oauth/access_token?client_id=".$app_id."&client_secret=".$app_secret."&grant_type=client_credentials";
$app_token = file_get_contents($token_url); 
```

When $app_token is echoed, the following is displayed

```
access_token=xxxxxxxxxxxxxxxxxxxxxxxx // access token x'ed out for security. 
```

The "ID" is equal to my application ID (which I'm not silly enough to write). There's a vertical bar that separates the ID from another alphanumeric string.

I'm not very experienced with this aspect of the API, particularly doing what involves App access token rather than user access tokens.

So, when I tried to send a test notification in a php script

```
$url = "https://graph.facebook.com/".$fb_user_id."/notifications?href=".$url."&".$app_token;
$result = file_get_contents($url); 
```

$result gives me an error message as such:

```
{"error":{"message":"A user access token is required to request this resource.","type":"OAuthException","code":102}} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-16T11:57:27.727

As indicated on [https://developers.facebook.com/docs/concepts/notifications/](https://developers.facebook.com/docs/concepts/notifications/), you should using HTTP POST requests to send notification to the user of your apps, not HTTP GET requests.

# jquery - jQuery - 砌体显示没有错误但不工作？

> ID：15722606
> 
> 赞同：1
> 
> 时间：2013-03-30T19:30:56.267
> 
> 标签：jquery, layout, jquery-masonry

我已经尝试了 7 个多小时来整理布局，我希望最终产品看起来像这些方面的东西 - ！![希望它看起来像](../Images/c6f5f0dce52eee077d9b248e91e0d902.png)

相反，我得到了这个！![目前看起来像](../Images/0b520315f821e2addd6d9db2fe16a876.png)

这是正在使用的代码

HTML -

```
<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN"
"http://www.w3.org/TR/html4/loose.dtd">

<head>

<title>_Box</title>

<link href="styles.css" rel="stylesheet" type="text/css">

<body>

<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="masonry.js"></script>
<script>
  $(function(){
  $('#container').masonry({
    columnWidth: 150,
    itemSelector: 'div' 
    });
});
</script>

<div id="container" class="clearfix masonry">

<div class="item1"><img src="images/eventbox.png"></img></div>
<div class="item3"><img src="images/forumbox.png"></img></div>
<div class="item2"><img src="images/weekbox.png"></img></div>
<div class="item2"><img src="images/weekbox.png"></img></div>
<div class="item2"><img src="images/weekbox.png"></img></div>
<div class="item2"><img src="images/weekbox.png"></img></div>
<div class="item3"><img src="images/top10box.png"></img></div>
<div class="item1"><img src="images/eventbox.png"></img></div>

</div>

</head>
</body> 
```

CSS -

```
html {
  height:100%;
}

body {
  width:900px;
  height:100%;
  margin:0 auto;
  margin-top:100px;
  background-image: url(images/gridbg.png);
}

#container {
    width:900px;
}

.item1,.item2,.item3 {margin:5px;}
.item1 {width:350px;}
.item2 {width:175px;}
.item3 {width:150px;} 
```

有任何想法吗？因为似乎什么都行不通

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-30T21:31:02.150

好吧，这是我制作的[小提琴](http://jsfiddle.net/dozoisch/ctjh7/)。

我注意到，通过设置低列宽数，它改善了砌体的工作方式。

所以我将 Scrip 修改为类似的内容：

```
$(function () {
    $('#container').masonry({
        columnWidth: 1,
        itemSelector: 'div'
    });
}); 
```

此外，添加固定的体重/身高可能会有所帮助。特别是对于处理项目周围的边距，因为砌体似乎在元素之间的边距方面存在一些问题。

因此，如果您的大项目是 350 像素，请确保下方的项目不超过`(350 -(2*margin)) /2`px，以便正确放置它们。

# linq - rss feed retrieval using LINQ

> ID：15722620
> 
> 赞同：0
> 
> 时间：2013-03-30T19:32:07.960
> 
> 标签：linq, rss, rss-reader

I have a rss feed which is below format.

```
<response>
  <results>
  <game>
     <image>
       <icon_url>
          <![CDATA[
             http://-------------------
            ]]>
       </icon_url>
       <medium_url>
         <![CDATA[
           http://----
          ]]>
       </medium_url>
      </image>
   </game>
 </results>
</response> 
```

Now, I want to retrieve the medium_url using LINQ.

```
var items = from item in rssFeed.
            Elements("response").Elements("results").Elements("game")
            select new
            {
                Image1 = item.Element("image").Element("medium_url").value
            } 
```

This doesn't seem to work.

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-30T22:05:53.683

You just need to make a small change:

```
var items = from item in rssFeed.
            Elements("response").Elements("results").Elements("game")
            select new
            {
                Image1 = (string)item.Element("image").Element("medium_url")
            }; 
```

or

```
var items = from item in rssFeed.
            Elements("response").Elements("results").Elements("game")
            select new
            {
                Image1 = item.Element("image").Element("medium_url").Value
            }; 
```

# c++ - Fastest way to store internally sorted map elements

> ID：15722622
> 
> 赞同：1
> 
> 时间：2013-03-30T19:32:36.143
> 
> 标签：c++, algorithm

Are there any ordered container that allow O(n) in-ordered deletion and traversal? I'm trying to do the following:

```
Hello  -> 1,2,3,4,5,6
Hello1 -> 24,15,13,10,8,7 
```

I need to be able to insert and delete continuously from Hello or Hello1 as quickly as possible. I was thinking of using a priority queue, but each time I want to delete I spend O(logn) adjusting, so n deletions will cost me O(nlogn) time to keep the internal structure ordered. Are there any data structures that can accomplish this task in O(n) time?

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-30T19:38:44.997

Just use a `std::vector`, with some sorting pegged on top; don't use `std::sort` every time - use a merge sort.

Complexity is important, but when the data set is small the time taken for memory allocation and cache misses will far out way this. Generally, profile it, but I would conject in this case a `vector` will be fine.

Think carefully about if you need to keep the structure always sorted; can you insert a number of items before resorting? What about 2 vectors and merging on a lookup? Think carefully about your algorithms; you can delete any number of items in `O(n)`, for instance.

# java - 递归函数：检查Java中的回文

> ID：15722624
> 
> 赞同：4
> 
> 时间：2013-03-30T19:32:43.440
> 
> 标签：java, recursion, palindrome

我有一个检查字符串是否为回文的类。我有两个问题。

1）这是检查回文的最有效方法吗？2）这可以递归实现吗？

```
public class Words {

    public static boolean isPalindrome(String word) {
    String pal = null;
    word = word.replace(" ", "");
    pal = new StringBuffer(word).reverse().toString();
    if (word.compareTo(pal) == 0) {
        return true;
    } else {
        return false;
    }

    }

} 
```

有一个测试课来测试这个......怀疑它是否需要，但无论如何，如果有人愿意尝试它能够帮助我解决上述两个问题中的任何一个......

```
public class testWords {

    public static void main(String[] args) {
    if (Words.isPalindrome("a") == true) {
        System.out.println("true");
    } else {
        System.out.println("false");
    }
    if (Words.isPalindrome("cat") == true) {
        System.out.println("true");
    } else {
        System.out.println("false");
    }
    if (Words.isPalindrome("w o    w") == true) {
        System.out.println("true");
    } else {
        System.out.println("false");
    }
    if (Words.isPalindrome("   a  ") == true) {
        System.out.println("true");
    } else {
        System.out.println("false");
    }
    if (Words.isPalindrome("mom!") == true) {
        System.out.println("true");
    } else {
        System.out.println("false");
    }

    }

} 
```

在此先感谢您的帮助和/或输入:)

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-03-30T19:39:20.313

要递归实现“回文检查”，您必须比较第一个字符和最后一个字符是否相同。如果它们不相同，则字符串肯定不是回文。如果它们相同，则字符串可能是回文，您需要将第 2 个字符与倒数第 2 个字符进行比较，依此类推，直到您的字符串中要检查的字符严格少于 2 个。

递归算法如下所示：

```
public static boolean isPalindrome(String word) {
  //Strip out non-alphanumeric characters from string
  String cleanWord = word.replaceAll("[^a-zA-Z0-9]","");
  //Check for palindrome quality recursively
  return checkPalindrome(cleanWord);
}
private static boolean checkPalindrome(String word) {
  if(word.length() < 2) { return true;  }
  char first  = word.charAt(0);
  char last   = word.charAt(word.length()-1);
  if(  first != last  ) { return false; }
  else { return checkPalindrome(word.substring(1,word.length()-1)); }
} 
```

*   请注意，我的*递归*方法不是最有效的方法，但易于理解

*   **[Marimuthu Madasamy](https://stackoverflow.com/a/15722948/1465011)**有更高效的*递归*方法，但更难理解

*   **[Joe F](https://stackoverflow.com/a/15722738/1465011)**列出了一种等效有效的*迭代*方法
    ，这是**最好**的实现方法，因为它不会导致[堆栈溢出](http://en.wikipedia.org/wiki/Stack_overflow)错误

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2013-03-30T20:05:02.617

这是另一种递归解决方案，但使用数组可以在递归调用中为您提供优于字符串的性能优势（避免`substring`or `charAt`）。

```
private static boolean isPalindrome(final char[] chars, final int from,
        final int to) {
    if (from > to) return true;
    return chars[from] != chars[to] ? false 
                                    : isPalindrome(chars, from + 1, to - 1);
}

public static boolean isPalindrome(final String s) {
    return isPalindrome(s.toCharArray(), 0, s.length() - 1);
} 
```

The idea is that we keep track of two positions in the array, one at the beginning and another at the end and we keep moving the positions towards the center.

When the positions overlap and pass, we are done comparing all the characters and all the characters so far have matched; the string is palindrome.

At each pass, we compare the characters and if they don't match then the string is not palindrome otherwise move the positions closer.

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2013-03-30T19:42:25.150

实际上，只检查中间字符以确认它是回文就足够了，这意味着您可以将其简化为如下所示：

```
// Length of my string.
int length = myString.length();

// Loop over first half of string and match with opposite character.
for (int i = 0; i <= length / 2; i++) {
    // If we find one that doesn't match then return false.
    if (myString.charAt(i) != myString.charAt(length - 1 - i)) return false;
}

// They all match, so we have found a palindrome!
return true; 
```

递归解决方案是非常可能的，但它不会给您带来任何性能优势（并且可能不那么可读）。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-03-30T19:54:54.070

> 这可以递归实现吗？

**是**
这里是例子：

```
public static boolean palindrome(String str)
{
    if (str.length()==1 || str.length == 0)
    return true;
    char c1 = str.charAt(0);
    char c2 = str.charAt(str.length() - 1);
    if (str.length() == 2)
    {
        if (c1 == c2)
        return true;
        else
        return false;
    }
    if (c1 == c2)
    return palindrome(str.substring(1,str.length() - 1));
    else
    return false;
} 
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2014-03-21T06:00:25.423

My two cents. It's always nice to see the different ways people solve a problem. Of course this is not the most efficient algorithm memory or speed wise.

```
public static boolean isPalindrome(String s) {

    if (s.length() <= 1) { // got to the middle, no need for more checks
        return true;
    }

    char l = s.charAt(0); // first char
    char r = s.charAt(s.length() - 1); // last char

    if (l == r) { // same char? keep checking
        String sub = s.substring(1, s.length() - 1);
        return isPalindrome(sub);
    }

    return false;
} 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2019-07-03T11:12:08.407

The simplest way to check palindrome.

```
private static String palindromic(String word) {
    if (word.length() <= 1) {
        return "Polidramic";
    }else if (word.charAt(0) != word.charAt(word.length() - 1)) {
        return "Not Polidramic";
    }
    return palindromic(word.substring(1, word.length() - 1));
} 
```

# android - Android 示例代码崩溃

> ID：15722625
> 
> 赞同：2
> 
> 时间：2013-03-30T19:32:46.693
> 
> 标签：android, google-maps-android-api-2

[我在这个](http://www.javacodegeeks.com/2011/02/android-google-maps-tutorial.html)地址找到了谷歌地图教程。我下载了项目并更改了清单文件中的 API 授权代码。我连接了我的设备并尝试运行该应用程序，但它崩溃了。

我添加了 Google Play 服务库，我选择了 Google APIs (2.2)。

[这](http://pastebin.com/tEPMYjr5)是我的日志。什么会导致这个问题？

已经非常感谢了。

**编辑：**

这是我的 MainActivity.java 文件：

```
package in.wptrafficanalyzer.locationingooglemapv2;

import android.app.Dialog;
import android.location.Criteria;
import android.location.Location;
import android.location.LocationListener;
import android.location.LocationManager;
import android.os.Bundle;
import android.support.v4.app.FragmentActivity;
import android.view.Menu;
import android.widget.TextView;

import com.google.android.gms.common.ConnectionResult;
import com.google.android.gms.common.GooglePlayServicesUtil;
import com.google.android.gms.maps.CameraUpdateFactory;
import com.google.android.gms.maps.GoogleMap;
import com.google.android.gms.maps.SupportMapFragment;
import com.google.android.gms.maps.model.LatLng;

public class MainActivity extends FragmentActivity implements LocationListener {

    GoogleMap googleMap;

    @Override
    protected void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.activity_main);

        // Getting Google Play availability status
        int status = GooglePlayServicesUtil.isGooglePlayServicesAvailable(getBaseContext());

        // Showing status
        if(status!=ConnectionResult.SUCCESS){ // Google Play Services are not available

            int requestCode = 10;
            Dialog dialog = GooglePlayServicesUtil.getErrorDialog(status, this, requestCode);
            dialog.show();

        }else { // Google Play Services are available   

            // Getting reference to the SupportMapFragment of activity_main.xml
            SupportMapFragment fm = (SupportMapFragment) getSupportFragmentManager().findFragmentById(R.id.map);

            // Getting GoogleMap object from the fragment
            googleMap = fm.getMap();

            // Enabling MyLocation Layer of Google Map
            googleMap.setMyLocationEnabled(true);               

             // Getting LocationManager object from System Service LOCATION_SERVICE
            LocationManager locationManager = (LocationManager) getSystemService(LOCATION_SERVICE);

            // Creating a criteria object to retrieve provider
            Criteria criteria = new Criteria();

            // Getting the name of the best provider
            String provider = locationManager.getBestProvider(criteria, true);

            // Getting Current Location
            Location location = locationManager.getLastKnownLocation(provider);

            if(location!=null){
                    onLocationChanged(location);
            }

            locationManager.requestLocationUpdates(provider, 20000, 0, this);
        }

    }

    @Override
    public void onLocationChanged(Location location) {

        TextView tvLocation = (TextView) findViewById(R.id.tv_location);

        // Getting latitude of the current location
        double latitude = location.getLatitude();

        // Getting longitude of the current location
        double longitude = location.getLongitude();     

        // Creating a LatLng object for the current location
        LatLng latLng = new LatLng(latitude, longitude);

        // Showing the current location in Google Map
        googleMap.moveCamera(CameraUpdateFactory.newLatLng(latLng));

        // Zoom in the Google Map
        googleMap.animateCamera(CameraUpdateFactory.zoomTo(15));

        // Setting latitude and longitude in the TextView tv_location
        tvLocation.setText("Latitude:" +  latitude  + ", Longitude:"+ longitude );      

    }

    @Override
    public void onProviderDisabled(String provider) {
        // TODO Auto-generated method stub      
    }

    @Override
    public void onProviderEnabled(String provider) {
        // TODO Auto-generated method stub      
    }

    @Override
    public void onStatusChanged(String provider, int status, Bundle extras) {
        // TODO Auto-generated method stub      
    }

    @Override
    public boolean onCreateOptionsMenu(Menu menu) {
        // Inflate the menu; this adds items to the action bar if it is present.
        getMenuInflater().inflate(R.menu.activity_main, menu);
        return true;
    }
} 
```

这是我的 LogCat：

```
03-30 21:18:24.042: D/dalvikvm(18745): DexOpt: couldn't find field Landroid/content/res/Configuration;.smallestScreenWidthDp
03-30 21:18:24.042: W/dalvikvm(18745): VFY: unable to resolve instance field 23
03-30 21:18:24.042: D/dalvikvm(18745): VFY: replacing opcode 0x52 at 0x0012
03-30 21:18:24.042: D/dalvikvm(18745): VFY: dead code 0x0014-0018 in Lcom/google/android/gms/common/GooglePlayServicesUtil;.b (Landroid/content/res/Resources;)Z
03-30 21:18:24.102: W/dalvikvm(18745): Unable to resolve superclass of Lmaps/p/s; (425)
03-30 21:18:24.102: W/dalvikvm(18745): Link of class 'Lmaps/p/s;' failed
03-30 21:18:24.102: W/dalvikvm(18745): Unable to resolve superclass of Lmaps/y/bo; (3818)
03-30 21:18:24.102: W/dalvikvm(18745): Link of class 'Lmaps/y/bo;' failed
03-30 21:18:24.102: W/dalvikvm(18745): Unable to resolve superclass of Lmaps/i/k; (4206)
03-30 21:18:24.102: W/dalvikvm(18745): Link of class 'Lmaps/i/k;' failed
03-30 21:18:24.102: E/dalvikvm(18745): Could not find class 'maps.i.k', referenced from method maps.z.ag.a
03-30 21:18:24.102: W/dalvikvm(18745): VFY: unable to resolve new-instance 3538 (Lmaps/i/k;) in Lmaps/z/ag;
03-30 21:18:24.102: D/dalvikvm(18745): VFY: replacing opcode 0x22 at 0x006d
03-30 21:18:24.102: D/dalvikvm(18745): VFY: dead code 0x006f-007f in Lmaps/z/ag;.a (Landroid/view/LayoutInflater;Lcom/google/android/gms/maps/GoogleMapOptions;ZLjava/lang/String;)Lmaps/z/ag;
03-30 21:18:24.252: D/dalvikvm(18745): GC_EXTERNAL_ALLOC freed 836K, 49% free 3313K/6471K, external 2458K/2773K, paused 26ms
03-30 21:18:24.272: E/Google Maps Android API(18745): Failed to load map.  Could not contact Google servers.
03-30 21:18:24.292: D/AndroidRuntime(18745): Shutting down VM
03-30 21:18:24.292: W/dalvikvm(18745): threadid=1: thread exiting with uncaught exception (group=0x40018560)
03-30 21:18:24.292: E/AndroidRuntime(18745): FATAL EXCEPTION: main
03-30 21:18:24.292: E/AndroidRuntime(18745): java.lang.RuntimeException: Unable to start activity ComponentInfo{in.wptrafficanalyzer.locationingooglemapv2/in.wptrafficanalyzer.locationingooglemapv2.MainActivity}: java.lang.IllegalArgumentException: provider==null
03-30 21:18:24.292: E/AndroidRuntime(18745):    at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:1696)
03-30 21:18:24.292: E/AndroidRuntime(18745):    at android.app.ActivityThread.handleLaunchActivity(ActivityThread.java:1721)
03-30 21:18:24.292: E/AndroidRuntime(18745):    at android.app.ActivityThread.access$1500(ActivityThread.java:124)
03-30 21:18:24.292: E/AndroidRuntime(18745):    at android.app.ActivityThread$H.handleMessage(ActivityThread.java:968)
03-30 21:18:24.292: E/AndroidRuntime(18745):    at android.os.Handler.dispatchMessage(Handler.java:99)
03-30 21:18:24.292: E/AndroidRuntime(18745):    at android.os.Looper.loop(Looper.java:130)
03-30 21:18:24.292: E/AndroidRuntime(18745):    at android.app.ActivityThread.main(ActivityThread.java:3844)
03-30 21:18:24.292: E/AndroidRuntime(18745):    at java.lang.reflect.Method.invokeNative(Native Method)
03-30 21:18:24.292: E/AndroidRuntime(18745):    at java.lang.reflect.Method.invoke(Method.java:507)
03-30 21:18:24.292: E/AndroidRuntime(18745):    at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:839)
03-30 21:18:24.292: E/AndroidRuntime(18745):    at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:597)
03-30 21:18:24.292: E/AndroidRuntime(18745):    at dalvik.system.NativeStart.main(Native Method)
03-30 21:18:24.292: E/AndroidRuntime(18745): Caused by: java.lang.IllegalArgumentException: provider==null
03-30 21:18:24.292: E/AndroidRuntime(18745):    at android.location.LocationManager.getLastKnownLocation(LocationManager.java:1017)
03-30 21:18:24.292: E/AndroidRuntime(18745):    at in.wptrafficanalyzer.locationingooglemapv2.MainActivity.onCreate(MainActivity.java:61)
03-30 21:18:24.292: E/AndroidRuntime(18745):    at android.app.Instrumentation.callActivityOnCreate(Instrumentation.java:1047)
03-30 21:18:24.292: E/AndroidRuntime(18745):    at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:1660)
03-30 21:18:24.292: E/AndroidRuntime(18745):    ... 11 more
03-30 21:18:27.082: I/Process(18745): Sending signal. PID: 18745 SIG: 9
03-30 21:20:10.565: D/dalvikvm(18826): DexOpt: couldn't find field Landroid/content/res/Configuration;.smallestScreenWidthDp
03-30 21:20:10.565: W/dalvikvm(18826): VFY: unable to resolve instance field 23
03-30 21:20:10.565: D/dalvikvm(18826): VFY: replacing opcode 0x52 at 0x0012
03-30 21:20:10.565: D/dalvikvm(18826): VFY: dead code 0x0014-0018 in Lcom/google/android/gms/common/GooglePlayServicesUtil;.b (Landroid/content/res/Resources;)Z
03-30 21:20:10.625: W/dalvikvm(18826): Unable to resolve superclass of Lmaps/p/s; (425)
03-30 21:20:10.625: W/dalvikvm(18826): Link of class 'Lmaps/p/s;' failed
03-30 21:20:10.625: W/dalvikvm(18826): Unable to resolve superclass of Lmaps/y/bo; (3818)
03-30 21:20:10.625: W/dalvikvm(18826): Link of class 'Lmaps/y/bo;' failed
03-30 21:20:10.625: W/dalvikvm(18826): Unable to resolve superclass of Lmaps/i/k; (4206)
03-30 21:20:10.625: W/dalvikvm(18826): Link of class 'Lmaps/i/k;' failed
03-30 21:20:10.625: E/dalvikvm(18826): Could not find class 'maps.i.k', referenced from method maps.z.ag.a
03-30 21:20:10.625: W/dalvikvm(18826): VFY: unable to resolve new-instance 3538 (Lmaps/i/k;) in Lmaps/z/ag;
03-30 21:20:10.625: D/dalvikvm(18826): VFY: replacing opcode 0x22 at 0x006d
03-30 21:20:10.635: D/dalvikvm(18826): VFY: dead code 0x006f-007f in Lmaps/z/ag;.a (Landroid/view/LayoutInflater;Lcom/google/android/gms/maps/GoogleMapOptions;ZLjava/lang/String;)Lmaps/z/ag;
03-30 21:20:10.762: D/dalvikvm(18826): GC_EXTERNAL_ALLOC freed 835K, 49% free 3313K/6471K, external 2458K/2773K, paused 25ms
03-30 21:20:10.782: E/Google Maps Android API(18826): Failed to load map.  Could not contact Google servers.
03-30 21:20:10.792: D/AndroidRuntime(18826): Shutting down VM
03-30 21:20:10.792: W/dalvikvm(18826): threadid=1: thread exiting with uncaught exception (group=0x40018560)
03-30 21:20:10.792: E/AndroidRuntime(18826): FATAL EXCEPTION: main
03-30 21:20:10.792: E/AndroidRuntime(18826): java.lang.RuntimeException: Unable to start activity ComponentInfo{in.wptrafficanalyzer.locationingooglemapv2/in.wptrafficanalyzer.locationingooglemapv2.MainActivity}: java.lang.IllegalArgumentException: provider==null
03-30 21:20:10.792: E/AndroidRuntime(18826):    at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:1696)
03-30 21:20:10.792: E/AndroidRuntime(18826):    at android.app.ActivityThread.handleLaunchActivity(ActivityThread.java:1721)
03-30 21:20:10.792: E/AndroidRuntime(18826):    at android.app.ActivityThread.access$1500(ActivityThread.java:124)
03-30 21:20:10.792: E/AndroidRuntime(18826):    at android.app.ActivityThread$H.handleMessage(ActivityThread.java:968)
03-30 21:20:10.792: E/AndroidRuntime(18826):    at android.os.Handler.dispatchMessage(Handler.java:99)
03-30 21:20:10.792: E/AndroidRuntime(18826):    at android.os.Looper.loop(Looper.java:130)
03-30 21:20:10.792: E/AndroidRuntime(18826):    at android.app.ActivityThread.main(ActivityThread.java:3844)
03-30 21:20:10.792: E/AndroidRuntime(18826):    at java.lang.reflect.Method.invokeNative(Native Method)
03-30 21:20:10.792: E/AndroidRuntime(18826):    at java.lang.reflect.Method.invoke(Method.java:507)
03-30 21:20:10.792: E/AndroidRuntime(18826):    at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:839)
03-30 21:20:10.792: E/AndroidRuntime(18826):    at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:597)
03-30 21:20:10.792: E/AndroidRuntime(18826):    at dalvik.system.NativeStart.main(Native Method)
03-30 21:20:10.792: E/AndroidRuntime(18826): Caused by: java.lang.IllegalArgumentException: provider==null
03-30 21:20:10.792: E/AndroidRuntime(18826):    at android.location.LocationManager.getLastKnownLocation(LocationManager.java:1017)
03-30 21:20:10.792: E/AndroidRuntime(18826):    at in.wptrafficanalyzer.locationingooglemapv2.MainActivity.onCreate(MainActivity.java:61)
03-30 21:20:10.792: E/AndroidRuntime(18826):    at android.app.Instrumentation.callActivityOnCreate(Instrumentation.java:1047)
03-30 21:20:10.792: E/AndroidRuntime(18826):    at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:1660)
03-30 21:20:10.792: E/AndroidRuntime(18826):    ... 11 more
03-30 21:21:04.912: D/dalvikvm(18897): DexOpt: couldn't find field Landroid/content/res/Configuration;.smallestScreenWidthDp
03-30 21:21:04.932: W/dalvikvm(18897): VFY: unable to resolve instance field 23
03-30 21:21:04.932: D/dalvikvm(18897): VFY: replacing opcode 0x52 at 0x0012
03-30 21:21:04.932: D/dalvikvm(18897): VFY: dead code 0x0014-0018 in Lcom/google/android/gms/common/GooglePlayServicesUtil;.b (Landroid/content/res/Resources;)Z
03-30 21:21:05.012: W/dalvikvm(18897): Unable to resolve superclass of Lmaps/p/s; (425)
03-30 21:21:05.012: W/dalvikvm(18897): Link of class 'Lmaps/p/s;' failed
03-30 21:21:05.012: W/dalvikvm(18897): Unable to resolve superclass of Lmaps/y/bo; (3818)
03-30 21:21:05.012: W/dalvikvm(18897): Link of class 'Lmaps/y/bo;' failed
03-30 21:21:05.012: W/dalvikvm(18897): Unable to resolve superclass of Lmaps/i/k; (4206)
03-30 21:21:05.012: W/dalvikvm(18897): Link of class 'Lmaps/i/k;' failed
03-30 21:21:05.012: E/dalvikvm(18897): Could not find class 'maps.i.k', referenced from method maps.z.ag.a
03-30 21:21:05.012: W/dalvikvm(18897): VFY: unable to resolve new-instance 3538 (Lmaps/i/k;) in Lmaps/z/ag;
03-30 21:21:05.012: D/dalvikvm(18897): VFY: replacing opcode 0x22 at 0x006d
03-30 21:21:05.022: D/dalvikvm(18897): VFY: dead code 0x006f-007f in Lmaps/z/ag;.a (Landroid/view/LayoutInflater;Lcom/google/android/gms/maps/GoogleMapOptions;ZLjava/lang/String;)Lmaps/z/ag;
03-30 21:21:05.162: D/dalvikvm(18897): GC_EXTERNAL_ALLOC freed 839K, 49% free 3313K/6471K, external 2458K/2773K, paused 26ms
03-30 21:21:05.182: E/Google Maps Android API(18897): Failed to load map.  Could not contact Google servers.
03-30 21:21:05.202: D/AndroidRuntime(18897): Shutting down VM
03-30 21:21:05.202: W/dalvikvm(18897): threadid=1: thread exiting with uncaught exception (group=0x40018560)
03-30 21:21:05.202: E/AndroidRuntime(18897): FATAL EXCEPTION: main
03-30 21:21:05.202: E/AndroidRuntime(18897): java.lang.RuntimeException: Unable to start activity ComponentInfo{in.wptrafficanalyzer.locationingooglemapv2/in.wptrafficanalyzer.locationingooglemapv2.MainActivity}: java.lang.IllegalArgumentException: provider==null
03-30 21:21:05.202: E/AndroidRuntime(18897):    at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:1696)
03-30 21:21:05.202: E/AndroidRuntime(18897):    at android.app.ActivityThread.handleLaunchActivity(ActivityThread.java:1721)
03-30 21:21:05.202: E/AndroidRuntime(18897):    at android.app.ActivityThread.access$1500(ActivityThread.java:124)
03-30 21:21:05.202: E/AndroidRuntime(18897):    at android.app.ActivityThread$H.handleMessage(ActivityThread.java:968)
03-30 21:21:05.202: E/AndroidRuntime(18897):    at android.os.Handler.dispatchMessage(Handler.java:99)
03-30 21:21:05.202: E/AndroidRuntime(18897):    at android.os.Looper.loop(Looper.java:130)
03-30 21:21:05.202: E/AndroidRuntime(18897):    at android.app.ActivityThread.main(ActivityThread.java:3844)
03-30 21:21:05.202: E/AndroidRuntime(18897):    at java.lang.reflect.Method.invokeNative(Native Method)
03-30 21:21:05.202: E/AndroidRuntime(18897):    at java.lang.reflect.Method.invoke(Method.java:507)
03-30 21:21:05.202: E/AndroidRuntime(18897):    at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:839)
03-30 21:21:05.202: E/AndroidRuntime(18897):    at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:597)
03-30 21:21:05.202: E/AndroidRuntime(18897):    at dalvik.system.NativeStart.main(Native Method)
03-30 21:21:05.202: E/AndroidRuntime(18897): Caused by: java.lang.IllegalArgumentException: provider==null
03-30 21:21:05.202: E/AndroidRuntime(18897):    at android.location.LocationManager.getLastKnownLocation(LocationManager.java:1017)
03-30 21:21:05.202: E/AndroidRuntime(18897):    at in.wptrafficanalyzer.locationingooglemapv2.MainActivity.onCreate(MainActivity.java:61)
03-30 21:21:05.202: E/AndroidRuntime(18897):    at android.app.Instrumentation.callActivityOnCreate(Instrumentation.java:1047)
03-30 21:21:05.202: E/AndroidRuntime(18897):    at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:1660)
03-30 21:21:05.202: E/AndroidRuntime(18897):    ... 11 more
03-30 21:21:08.012: I/Process(18897): Sending signal. PID: 18897 SIG: 9
03-30 21:23:35.162: D/dalvikvm(18968): DexOpt: couldn't find field Landroid/content/res/Configuration;.smallestScreenWidthDp
03-30 21:23:35.182: W/dalvikvm(18968): VFY: unable to resolve instance field 23
03-30 21:23:35.182: D/dalvikvm(18968): VFY: replacing opcode 0x52 at 0x0012
03-30 21:23:35.182: D/dalvikvm(18968): VFY: dead code 0x0014-0018 in Lcom/google/android/gms/common/GooglePlayServicesUtil;.b (Landroid/content/res/Resources;)Z
03-30 21:23:35.322: W/dalvikvm(18968): Unable to resolve superclass of Lmaps/p/s; (425)
03-30 21:23:35.322: W/dalvikvm(18968): Link of class 'Lmaps/p/s;' failed
03-30 21:23:35.322: W/dalvikvm(18968): Unable to resolve superclass of Lmaps/y/bo; (3818)
03-30 21:23:35.322: W/dalvikvm(18968): Link of class 'Lmaps/y/bo;' failed
03-30 21:23:35.322: W/dalvikvm(18968): Unable to resolve superclass of Lmaps/i/k; (4206)
03-30 21:23:35.322: W/dalvikvm(18968): Link of class 'Lmaps/i/k;' failed
03-30 21:23:35.322: E/dalvikvm(18968): Could not find class 'maps.i.k', referenced from method maps.z.ag.a
03-30 21:23:35.322: W/dalvikvm(18968): VFY: unable to resolve new-instance 3538 (Lmaps/i/k;) in Lmaps/z/ag;
03-30 21:23:35.322: D/dalvikvm(18968): VFY: replacing opcode 0x22 at 0x006d
03-30 21:23:35.332: D/dalvikvm(18968): VFY: dead code 0x006f-007f in Lmaps/z/ag;.a (Landroid/view/LayoutInflater;Lcom/google/android/gms/maps/GoogleMapOptions;ZLjava/lang/String;)Lmaps/z/ag;
03-30 21:23:35.532: D/dalvikvm(18968): GC_EXTERNAL_ALLOC freed 839K, 49% free 3313K/6471K, external 2458K/2773K, paused 27ms
03-30 21:23:35.552: E/Google Maps Android API(18968): Failed to load map.  Could not contact Google servers.
03-30 21:23:35.572: D/AndroidRuntime(18968): Shutting down VM
03-30 21:23:35.572: W/dalvikvm(18968): threadid=1: thread exiting with uncaught exception (group=0x40018560)
03-30 21:23:35.572: E/AndroidRuntime(18968): FATAL EXCEPTION: main
03-30 21:23:35.572: E/AndroidRuntime(18968): java.lang.RuntimeException: Unable to start activity ComponentInfo{in.wptrafficanalyzer.locationingooglemapv2/in.wptrafficanalyzer.locationingooglemapv2.MainActivity}: java.lang.IllegalArgumentException: provider==null
03-30 21:23:35.572: E/AndroidRuntime(18968):    at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:1696)
03-30 21:23:35.572: E/AndroidRuntime(18968):    at android.app.ActivityThread.handleLaunchActivity(ActivityThread.java:1721)
03-30 21:23:35.572: E/AndroidRuntime(18968):    at android.app.ActivityThread.access$1500(ActivityThread.java:124)
03-30 21:23:35.572: E/AndroidRuntime(18968):    at android.app.ActivityThread$H.handleMessage(ActivityThread.java:968)
03-30 21:23:35.572: E/AndroidRuntime(18968):    at android.os.Handler.dispatchMessage(Handler.java:99)
03-30 21:23:35.572: E/AndroidRuntime(18968):    at android.os.Looper.loop(Looper.java:130)
03-30 21:23:35.572: E/AndroidRuntime(18968):    at android.app.ActivityThread.main(ActivityThread.java:3844)
03-30 21:23:35.572: E/AndroidRuntime(18968):    at java.lang.reflect.Method.invokeNative(Native Method)
03-30 21:23:35.572: E/AndroidRuntime(18968):    at java.lang.reflect.Method.invoke(Method.java:507)
03-30 21:23:35.572: E/AndroidRuntime(18968):    at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:839)
03-30 21:23:35.572: E/AndroidRuntime(18968):    at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:597)
03-30 21:23:35.572: E/AndroidRuntime(18968):    at dalvik.system.NativeStart.main(Native Method)
03-30 21:23:35.572: E/AndroidRuntime(18968): Caused by: java.lang.IllegalArgumentException: provider==null
03-30 21:23:35.572: E/AndroidRuntime(18968):    at android.location.LocationManager.getLastKnownLocation(LocationManager.java:1017)
03-30 21:23:35.572: E/AndroidRuntime(18968):    at in.wptrafficanalyzer.locationingooglemapv2.MainActivity.onCreate(MainActivity.java:61)
03-30 21:23:35.572: E/AndroidRuntime(18968):    at android.app.Instrumentation.callActivityOnCreate(Instrumentation.java:1047)
03-30 21:23:35.572: E/AndroidRuntime(18968):    at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:1660)
03-30 21:23:35.572: E/AndroidRuntime(18968):    ... 11 more 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-30T19:46:28.587

```
String provider = locationManager.getBestProvider(criteria, true); 
```

在这条线上，`getBestProvider`正在返回`null`。这可能是因为用户已经禁用了所有可能的`providers`. 您需要处理这种情况，并且仅`getLastKnownLocation`在`provider`非空时调用。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-30T19:58:42.067

以下几行在您的代码上创建标准

```
// Creating a criteria object to retrieve provider
        Criteria criteria = new Criteria(); 
```

from documentation which says about default constructor is following,

```
Constructs a new Criteria object. The new object will have no requirements on accuracy, power, or response time; will not require altitude, speed, or bearing; and will not allow monetary cost. 
```

And on the next line you are asking for provider which best matches requirement above

```
String provider = locationManager.getBestProvider(criteria, true); 
```

I guess their no such provider exist so your provider is null and eventually you are trying this

```
Location location = locationManager.getLastKnownLocation(null); 
```

and that is where your code is crashing.

# ruby - Cucumber/aruba 交互式测试

> ID：15722627
> 
> 赞同：3
> 
> 时间：2013-03-30T19:32:57.647
> 
> 标签：ruby, cucumber, command-line-interface, thor, aruba

嗨，我目前正在玩黄瓜/阿鲁巴测试，到目前为止真的很喜欢。但我偶然发现了一个交互性问题。

我的应用程序监视文件夹的更改，并在此刻简单地打印“文件已更改”之类的内容。

如果我键入`jsbreeze watchFolder foo`应用程序开始查看我的文件夹并将其打印到控制台：

“观看：foo”

我可以像这样用黄瓜/阿鲁巴轻松测试它：

```
Scenario: jsbreeze should be able to watch a folder
    Given a directory named "foo"
    When I run `jsbreeze watchFolder foo` interactively
    And I wait for output to contain "Watching: foo" 
```

但我实际上想测试它是否检测到变化，所以我希望我可以做这样的事情

```
Scenario: jsbreeze should be able to watch multiple folders
    Given a directory named "foo"
    When I run `jsbreeze watchFolder foo,.` interactively
    And I wait for output to contain "Watching: foo,."
    Then I run `touch foo/test.js`
    And I wait for output to contain "Change detected" 
```

但这似乎不起作用。我认为这是因为我的应用程序在那一刻以交互方式运行，所以我不能真正运行像 touch 这样的命令。有没有人遇到过这样的问题并且可能知道解决方法？

完整代码在github上： [github-link](https://github.com/playerwtf/ruby-observer)

非常感谢每一个帮助

**编辑：**我取得了一点进展

我创建了一个新步骤，它产生一个子进程，然后执行 touch 命令。我可以清楚地看到触摸文件是在 foo 文件夹中创建的，但我的场景仍然看不到输出。

我的步骤如下所示：

```
When /^I run "([^"]*)" in a new process$/ do |command|
    @process = ChildProcess.send(:build,*command.split(' '))
    @process.start
    sleep 10
end 
```

我的场景：

```
Scenario: jsbreeze should be able to watch multiple folders
    Given a directory named "foo"
    When I run `jsbreeze watchFolder foo,.` interactively
    And I run "touch tmp/aruba/foo/test.js" in a new process
    And I wait for output to contain "Change detected" 
```

# vb.net - 呼叫控制功能

> ID：15722633
> 
> 赞同：0
> 
> 时间：2013-03-30T19:33:28.380
> 
> 标签：vb.net

我有一个带有 2 个功能的控件：func1 和 func2 我有一个带有控件列表的表单。我想在我的表单上有一个函数（我称之为 MainFunc），它迭代列表中的所有控件并根据参数调用 func1 或 func2。我想它看起来像这样：

公共子 MainFunc(CalledFunc as ???)

```
for each IteratedControl as CustomControl in MyControlList
    IteratedControl.invoke(CalledFunc)
end for 
```

结束子

我不希望我的参数是一个枚举并根据它的值调用正确的函数，因为有很多函数，而不仅仅是上面示例中的 2 个。

请帮忙

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-30T20:37:59.203

```
For Each control In Me.Controls
  If TypeOf control Is CustomControl Then
  CType(control, CustomControl ).func1()                
  CType(control, CustomControl ).func2()                
  End If
Next 
```

# c# - kinect - 我可以轮询帧数据，但事件不起作用

> ID：15722638
> 
> 赞同：0
> 
> 时间：2013-03-30T19:33:52.193
> 
> 标签：c#, kinect, kinect-sdk

我正在为第一个 kinect 项目尝试一个基本的“hello world”应用程序，将视频数据流式传输到流中。代码在这里：[https ://github.com/fschwiet/HelloKinect/blob/8803b6b959ee6dba5f9284b9e732fb11a897dea4/HelloKinect/ShowCameraCommand.cs](https://github.com/fschwiet/HelloKinect/blob/8803b6b959ee6dba5f9284b9e732fb11a897dea4/HelloKinect/ShowCameraCommand.cs)

我发现我可以在循环中轮询帧数据，但我没有收到帧就绪事件。源代码如下。当 UsePolling 为真时，帧数据被发送到表单。当 UsePolling 为 false 时，有控制台输出“Hit return to exit”。表示一切都已运行，但从未收到任何事件。

我感觉这与 Windows 消息泵有关，我需要在警报状态下等待和/或泵出消息队列。我一直无法使它工作，但有人有任何提示吗？

```
public class ShowCameraCommand : ConsoleCommand
{
    static private Form EchoForm;
    private bool UsePolling;

    public ShowCameraCommand()
    {
        this.IsCommand("show-camera");
        this.HasOption("p", "Use polling to check frame data", v => UsePolling = true);
    }

    public override int Run(string[] remainingArguments)
    {
        var sensor = KinectSensor.KinectSensors.Where(s => s.Status == KinectStatus.Connected).FirstOrDefault();

        if (sensor == null)
        {
            Console.WriteLine("Kinect was not detected");
            Console.WriteLine();
            return -1;
        }

        EchoForm = new Form();

        EchoForm.Width = 640;
        EchoForm.Height = 480;

        EchoForm.Show();

        sensor.ColorStream.Enable(ColorImageFormat.RawYuvResolution640x480Fps15);

        if (!UsePolling)
        {
            sensor.ColorFrameReady += sensor_ColorFrameReady;
        }

        sensor.Start();

        if (UsePolling)
        {
            Console.WriteLine("Use any key to exit.");
            while (!Console.KeyAvailable)
            {
                using (var frame = sensor.ColorStream.OpenNextFrame(10 * 1000))
                {
                    HandleFrame(frame);
                }

                Thread.Sleep(50);
            }
        }
        else
        {
            Console.WriteLine("Hit return to exit.");
            Console.ReadLine();
        }

        return 0;
    }

    void sensor_ColorFrameReady(object sender, ColorImageFrameReadyEventArgs e)
    {
        Console.WriteLine("Frame received");
        using (ColorImageFrame frame = e.OpenColorImageFrame())
        {
            HandleFrame(frame);
        }
    }

    private void HandleFrame(ColorImageFrame frame)
    {
        var bitmap = ImageToBitmap(frame);

        using (var g = EchoForm.CreateGraphics())
        {
            g.DrawImage(bitmap, 0, 0);
            Console.WriteLine("Frame drawn");
        }
    }

    // http://stackoverflow.com/questions/10848190/convert-kinect-colorframe-to-bitmap
    Bitmap ImageToBitmap(ColorImageFrame Image)
    {
        byte[] pixeldata = new byte[Image.PixelDataLength];
        Image.CopyPixelDataTo(pixeldata);
        Bitmap bmap = new Bitmap(Image.Width, Image.Height, PixelFormat.Format32bppRgb);
        BitmapData bmapdata = bmap.LockBits(
            new Rectangle(0, 0, Image.Width, Image.Height),
            ImageLockMode.WriteOnly,
            bmap.PixelFormat);
        IntPtr ptr = bmapdata.Scan0;
        Marshal.Copy(pixeldata, 0, ptr, Image.PixelDataLength);
        bmap.UnlockBits(bmapdata);
        return bmap;
    }
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-30T19:53:56.160

哦，想通了。我需要调用 Application.Run() 来开始抽事件。

# ruby-on-rails - Heroku 应用程序在启动时立即崩溃，在本地运行良好，尝试了我能想到的一切

> ID：15722640
> 
> 赞同：1
> 
> 时间：2013-03-30T19:34:18.420
> 
> 标签：ruby-on-rails, heroku, carrierwave, cloudinary

**编辑：**所以我将我的文件复制到一个新目录，创建了一个新的 git repo，创建了一个新的 heroku 应用程序，推送到新的 heroku 应用程序，配置了一些 heroku 环境变量，然后 . . . 现在一切正常。完全相同的代码。任何人都知道是什么原因导致 Heroku 应用程序像这样损坏？如果在我们生产时发生这种情况，我们将遇到严重的麻烦。

我将 CarrierWave 和 Cloudinary 添加到我的应用程序中，在本地运行良好，在 Heroku 上崩溃。

奇怪的是，它在后来的 heroku push 上工作（在做了一个微不足道的改变之后），并且回滚到那个已知的工作版本仍然不能解决问题（仍然崩溃）。Heroku 支持人员正在查看它，但响应缓慢（他们的建议到目前为止还没有奏效）。这是 Heroku 日志文件要点的链接：

[https://gist.github.com/gosuto/5278659](https://gist.github.com/gosuto/5278659)

任何帮助将不胜感激，我正在拔头发。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-05T17:16:43.697

原来这是一个 NewRelic 问题。我的 Gemfile 中有 newrelic_rpm，显然这与 CarrierWave 或 Cloudinary 有冲突。我从我的 Gemfile 中删除了 newrelic_rpm，一切正常。

我正在等待 Heroku 和 NewRelic 回复我是否可以指定特定版本的 newrelic_rpm 来避免这个问题。一旦获得更多详细信息，我将更新此答案。

本

# django - How to install matplotlib on Elastic Beanstalk

> ID：15722641
> 
> 赞同：9
> 
> 时间：2013-03-30T19:34:31.133
> 
> 标签：django, numpy, amazon-web-services, matplotlib, amazon-elastic-beanstalk

Because matplotlib needs numpy to already be installed, I have run into an issue.

To install other python packages on my Elastic Beanstalk environment, I use the pip requirements.txt file. Because the setup configuration automatically installs the packages in alphabetical order, matplotlib always is installed first which causes an error.

Has anyone had this problem and know of a way to successfully fix it?

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-04-08T14:30:22.410

I have been beating my head against the wall with this for several days but it seems that if you want to install matplotlib/scipy/scikit-learn using a requirements.txt file you need to do things one module at a time.

What I have been able to understand is that on Elastic Beanstalk packages are not installed in the site-packages directory of the virtual environment until it has successfully worked its way through the entire requirements.txt file.

So for example if you try to install numpy and scipy at the same time, as I was doing, it will fail because scipy cannot find certain numpy modules (numpy.distutils.core specifically). Numpy is sitting in `/opt/python/run/venv/build` waiting to go but pip is looking in `/opt/python/run/venv/lib/python2.6/site-packages` and doesn't find numpy.

You need to make one commit with only numpy in your requirements.txt file and push this up to Elastic Beanstalk. If this succeeds the numpy module will be in the right place and then you can make a second commit with requirements updated to scipy or matplotlib in your case.

Be careful with your configuration file in .ebextensions, you need to have all the dependencies listed. Specifically, at the top of `.ebextensions/myapp.config` you should have

```
packages:
  yum:
    gcc-c++: []
    gcc-gfortran: []
    python-devel: []
    atlas-sse3-devel: []
    lapack-devel: []
    libpng-devel: []
    freetype-devel: []
    zlib-devel: [] 
```

`atlas-sse3-devel` and `lapack-devel` are needed if you want scipy and `libpng-devel`, `freetype-devel`, and `zlib-devel` are needed for matplotlib.

The other alternative is to SSH to the ec2 instance associated with your app on Elastic Beanstalk, start up the virtual environment (`source /opt/python/run/venv/bin/activate`) and pip install the packages yourself.

# php - HTTP Error 500 (Internal Server Error): An unexpected condition was encountered while the server was attempting to fulfill the request

> ID：15722643
> 
> 赞同：-2
> 
> 时间：2013-03-30T19:34:37.307
> 
> 标签：php, web

I am new in PHP and I am making a script. Can you help, where am I wrong? I would also like to understand it not only have the code because I am learning. It is an IP ban script (Or i want it to be :D )

```
<?php
mysql_connect('host', 'user', 'mypasss') or die(mysql_error()); 
mysql_select_db('databse')
$ip = (isset($_SERVER)) ? $_SERVER['REMOTE_ADDR'] : $HTTP_SERVER_VARS['REMOTE_ADDR']; 
echo "Your IP: ".$ip; 

$query = mysql_query("SELECT `ip` FROM `user` WHERE `ip` = '$ip'");
$row = mysql_fetch_array($query); 

$protocol = strpos(strtolower($_SERVER['SERVER_PROTOCOL']),'https') 
            === FALSE ? 'http' : 'https';

$host     = $_SERVER['HTTP_HOST'];

$script   = $_SERVER['SCRIPT_NAME'];
$params   = $_SERVER['QUERY_STRING'];

$currentUrl = $protocol . '://' . $host . $script . '?' . $params;

if ($row) {

   header("Location: $currentUrl/ban/ban.php"); 
   exit(); 
} else {
 $sql = mysql_query("INSERT  INTO user(ip) VALUES ('".$ip."') ");
 header("Location: $currentUrl/ban/ban.php");
}

?> 
```

Thanks for your help :)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-30T19:45:28.193

I think the error_reporting is off and therefore you get no error like "Cannot modify header information – headers already sent" because you make an `echo "Your IP: ".$ip;` before the `header()`-call and this usually will cause an error. See [http://www.php.net/manual/en/function.header.php](http://www.php.net/manual/en/function.header.php)

# css - 创建纯 CSS 下拉菜单至第 5 级时出现问题

> ID：15722647
> 
> 赞同：1
> 
> 时间：2013-03-30T19:35:05.807
> 
> 标签：css, drop-down-menu

我正在尝试使用纯 CSS 创建一个下拉菜单。它可以正常工作到第 4 级，但是当我尝试以某种方式添加第 5 级时，它无法按预期工作。这是我的代码链接：http: [//jsfiddle.net/pX6C6/5/](http://jsfiddle.net/pX6C6/5/)

CSS部分：

```
 #menu table {
    border-collapse:collapse;
    position:absolute;
    top:0;
    left:0;
    z-index:80;
    font-size:1em;
}
#menu li a {
    display:block;
    height:30px;
    font-family:arial, sans-serif;
    font-size:13px;
    letter-spacing:-1px;
    line-height:29px;
    width:125px;
    text-decoration:none;
    text-align:center;
}
#menu :hover {
    color:#ffffff;
    background:#5F90D0;
}
#menu :hover > a {
    color:#ffffff;
    background:#5F90D0;
}
#menu ul, #menu :hover ul ul, #menu :hover ul :hover ul ul, #menu :hover ul :hover ul:hover ul ul, #menu :hover ul :hover ul:hover ul:hover ul ul, #menu :hover ul :hover ul:hover ul:hover ul:hover ul, #menu :hover ul :hover ul:hover ul:hover ul:hover ul.left {
    position:absolute;
    left:-9999px;
    width:128px;
}

#menu :hover ul :hover ul, #menu :hover ul :hover ul :hover ul, #menu :hover ul :hover ul :hover ul:hover ul, #menu :hover ul :hover ul :hover ul:hover ul:hover ul, #menu :hover ul :hover ul :hover ul:hover ul :hover ul:hover ul {
    padding:0 3px;
    left:125px;
    top:-3px;
}
#menu :hover ul :hover ul.left, #menu :hover ul :hover ul :hover ul.left, #menu :hover ul :hover ul :hover ul:hover ul.left, #menu :hover ul :hover ul :hover ul:hover ul.left {
    padding:0 3px;
    left:-131px;
    top:-3px;
}
#menu {
    list-style-type:none;
    padding:0;
    margin:0;
}
#menu ul {
    list-style-type:none;
    padding:0;
    margin:0;
}
#menu li {
    float:left;
    background:#949494;
    margin:3px 3px 0 0;
    position:relative;
} 
```

有没有人对如何解决这个问题有任何建议？提前致谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-30T23:33:43.003

您希望菜单的行为如何？

TBH 我不想尝试修复您的代码，因为它看起来太复杂了。

简单的多级菜单可以这样完成：[jsfiddle.net/jPG3P/1/](http://jsfiddle.net/jPG3P/1/)

```
ul, li {
    margin: 0;
    padding: 0;
}

#menu li {
    list-style-type: none;
}

#menu li a {
    display: block;
    background: #aaf;
    height: 25px;
    width: 120px;
    line-height: 25px;
    text-decoration: none;
    color: #000;
    border: 1px solid #fff;
    border-bottom: 0;
}

#menu li a:hover {
    background: #ff7e00;
    color: #fff;
}

#menu li ul {
    display: none;
    margin: -26px 0 0 120px;
    position: absolute;
}

#menu li:hover>ul {
    display: block;
} 
```

可以通过添加以下内容来实现与您类似的另一个选项：http: [//jsfiddle.net/jPG3P/2/](http://jsfiddle.net/jPG3P/2/)

```
#menu>li {
    float: left;
}

#menu>li>ul {
    margin: 0;
} 
```

如果你添加这个，它将突出显示所有选择的项目：http: [//jsfiddle.net/jPG3P/4/](http://jsfiddle.net/jPG3P/4/)

```
li:hover>a {
    background: #ff9f33;
} 
```

# javascript - Truncate HTML to certain length of RENDERED characters

> ID：15722655
> 
> 赞同：1
> 
> 时间：2013-03-30T19:35:30.360
> 
> 标签：javascript, html

I'm receiving some HTML with an arbitrary number of tags that I need to truncate in order to fit within 25 characters, however I don't want to leave any open tags.

For example, if I receive `blah blah blah <a href="#">supercalifragilistic</a>` I need to truncate it to something like `blah blah blah <a href="#">superc...</a>` rather than `blah blah blah <a href="#">supercal...`

My best thoughts right now are to use javascript to strip and then reapply the tags after truncation, or to put it all in a div and hide overflow. Not sure what the best option is or if there's an even simpler one.

Thanks!

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-30T19:50:53.567

I would start off with `userInput.length` to return how many characters you actually received.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-03T20:20:31.507

I ended up using this JQuery plugin: [http://thepugautomatic.com/octopress/2008/02/jquery-html-truncate/](http://thepugautomatic.com/octopress/2008/02/jquery-html-truncate/)

Had to edit the code a little bit to get it to do what I want, but it works. Unfortunately it's a little slower than I'd prefer, but still good for many cases.

# .net - 在 Visual Basic 中遇到 TimeSpan 问题

> ID：15722656
> 
> 赞同：1
> 
> 时间：2013-03-30T19:35:40.990
> 
> 标签：.net, vb.net, timespan

在 VB.net 中，我一直在学习 Murach 的 Visual Basic 2010。在学习如何处理时间和字符串时，我遇到了时间跨度的问题。

我需要两个日期并找出它们之间的天数。

所以我声明了我的变量。

```
Dim currentDay As Date
Dim futureDate As Date
Dim timespan As TimeSpan = currentDay.Subtract(futureDate)
Dim strMsgText As String
Dim daysUntilDue = timespan.Days 
```

然后我为 currentDay 和 futureDate 设置格式

```
currentDay = Convert.ToDateTime(Now)
futureDate = Convert.ToDateTime(txtFutureDate.Text) 'input from user 
```

然后我设置我需要显示的数据

```
 strMsgText = "Current Date: " & currentDay.ToShortDateString() _
            & "Future Date: " & futureDate.ToShortDateString() _
            & "Days Util Due " & daysUntilDue 
```

接下来我提供了数据验证

```
If IsDate(txtFutureDate.Text) Then
   futureDate = CDate(txtFutureDate.Text)
End If 
```

最后我显示数据

```
MessageBox.Show(strMsgText) 
```

我没有收到来自 vb ide 的语法错误或错误，但是，当它计算日期时，它在消息框中给了我这个

前任。

```
Current Date: 3/30/2013

Future Date: 12/26/2013

 Days Until Due: 0 
```

我试图翻转计算中的日期

前任。而不是`currentDay.Subtract(futureDate)`我设置它`futureDate.Subtract(currentDay)`只是为了看看它是否会给我一个不同的结果。但是，唉，它仍然是 0。

我知道我做错了什么，但我无法找出IDE /编译器没有给我任何错误，这本书没有给我任何建议或知道如何让它正常工作.

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-30T19:41:54.033

问题在于，当时您正在设置时间跨度值`currentDay`并且`futureDate`尚未初始化并且具有 a 的默认值`DateTime`。这些的减法将始终为 0 `TimeSpan`。

在设置这两个日期`timespan` *后设置。*

```
Dim currentDay As Date
Dim futureDate As Date
Dim strMsgText As String

currentDay = Convert.ToDateTime(Now)
futureDate = Convert.ToDateTime(txtFutureDate.Text) 'input from user

Dim timespan As TimeSpan = currentDay.Subtract(futureDate)
Dim daysUntilDue = timespan.Days 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-30T19:53:34.550

由于您需要检查用户是否输入了有效日期，您可以使用 DateTime.TryParse 来确定：

```
Dim currentDay As Date = DateTime.Now
Dim futureDate As Date
Dim strMsgText As String
Dim daysUntilDue As Integer

currentDay = DateTime.Now

Dim ci As New Globalization.CultureInfo("en-US")

' check if a parseable date has been entered before doing the calculation
If DateTime.TryParse(txtFutureDate.Text, ci, Globalization.DateTimeStyles.AllowWhiteSpaces, futureDate) Then
    daysUntilDue = (futureDate - currentDay).Days
    strMsgText = "Current Date: " & currentDay.ToShortDateString() & " Future Date: " & futureDate.ToShortDateString() & " Days Until Due " & daysUntilDue.ToString
Else
    strMsgText = "I could not understand the future date as entered."
End If

MessageBox.Show(strMsgText) 
```

# php - sql更新语句失败

> ID：15722659
> 
> 赞同：1
> 
> 时间：2013-03-30T19:35:53.013
> 
> 标签：php, mysql, sql, mysqli

我有一个更新 sql 语句失败，我不知道原因..

有什么问题吗：

```
<?php
extract($_POST);
if ($req = $db->prepare("UPDATE {$sTable} SET ? = ? WHERE id=?")) {
    $req->bind_param("ssi", $columnName, $value, $id );
    $req->execute();
}
?> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-30T19:40:40.527

如果您将列绑定为字符串参数，您的查询将如下所示：

```
UPDATE some_table SET 'column' = 'value' WHERE id=1 
```

这当然是错误的。所以答案是您不能将列（或表）绑定为准备好的语句中的参数。

# python - 从 TkInter Slider 返回一个值 + 使滑块与类水平

> ID：15722660
> 
> 赞同：1
> 
> 时间：2013-03-30T19:35:54.267
> 
> 标签：python, slider, tkinter

我在打印滑块的值时遇到问题。我在滑块下方创建了一个按钮来执行此操作，但它在按下之前打印并且在按下时不打印。

我也有使滑块水平的问题。我知道它是“orient=HORIZONTAL”，当它不在课堂上时它可以工作，但是当它在课堂上时它给我带来了麻烦。

这是代码，和往常一样，非常感谢！:)

```
import Tkinter as tki # Tkinter -> tkinter in Python 3
import tkMessageBox

class GUI(tki.Tk):
        def __init__(self):
                tki.Tk.__init__(self)
                self.wm_title("Menu Title")
                RWidth=500
                RHeight=300
                self.geometry(("%dx%d")%(RWidth,RHeight))
                menubar = tki.Menu(self)

                # create a pulldown menu, and add it to the menu bar
                menu0 = tki.Menu(menubar, tearoff=0)
                menu0.add_command(label="Run Slider", command=self.slider_prompt)
                menu0.add_separator()
                menu0.add_command(label="Exit", command=self.quit)

        menubar.add_cascade(label="Slider", menu=menu0)

                # display the menu
                self.config(menu=menubar)

        def slider_prompt(self, msg='This is a slider'):
            slider_window= self.top = tki.Toplevel(self)
            slider_window.title("Slider Title")
            RWidth=300
            RHeight=200
            slider_window.geometry(("%dx%d")%(RWidth,RHeight))

            label0 = tki.Label(slider_window, text=msg)
            label0.pack()

            slider = tki.Scale(slider_window, from_=100, to=1000) # have to make horizontal
            slider.pack()

            #put button here that starts the program (pass the slider value)
            button_cheat = tki.Button(   slider_window, text='Print Value', command=self.print_slide_value(slider.get())   )
            button_cheat.pack()

            button_close = tki.Button(slider_window, text='Exit', command=lambda: self.top.destroy())
            button_close.pack()

    def print_slide_value(self, slider_value):
        print slider_value

gui = GUI()
gui.mainloop() 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-30T20:21:17.347

当您使用命令参数时，您必须在那里传递对可调用对象的引用。事件后将调用的函数。您正在做的是您将结果传递到那里`self.print_slide_value(slider.get())`，即`None`.

而是这样做：

```
def print_slide_value():
    print slider.get()
button_cheat = tki.Button(slider_window, text='Print Value', command=print_slide_value) 
```

我对此也没有任何问题：

```
slider = tki.Scale(slider_window, from_=100, to=1000, orient=tki.HORIZONTAL) 
```

# css - Extend element with fixed position to 100% height

> ID：15722662
> 
> 赞同：0
> 
> 时间：2013-03-30T19:35:59.060
> 
> 标签：css

I have a vertical nav bar with `fixed` position.

How can I make it **extend** all the way down **to the bottom** of the page?

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-30T19:50:16.973

You need to set html and body elements too.

```
html,body {
    margin:0;
    padding:0;
    height:100%;
} 
```

# iphone - 如何正确复制 NSMutableArray？

> ID：15722666
> 
> 赞同：0
> 
> 时间：2013-03-30T19:36:18.017
> 
> 标签：iphone, objective-c, nsmutablearray

我想用下面的代码复制一个 NSMutableArray：

```
SectionArray *newSectionArray = [[SectionArray alloc] init];    
NSMutableArray *itemsCopy = [self.sections mutableCopy];
newSectionArray.sections = [[NSMutableArray alloc] initWithArray:itemsCopy copyItems:YES]; 
```

但是当我尝试在这个新数组中设置一个对象时出现错误：

```
[[self.sections objectAtIndex:intSection] replaceObjectAtIndex:intRow withObject:object];

[__NSArrayI replaceObjectAtIndex:withObject:]: unrecognized selector sent to instance 0x7191720 
```

我也试过：

```
SectionArray *newSectionArray = [[SectionArray alloc] init];    
newSectionArray.sections = [[[NSMutableArray alloc] initWithArray:itemsCopy copyItems:YES] mutableCopy]; 
```

我的 SectionArray 类：

```
@implementation SectionArray

@synthesize sections;
@synthesize value;

- initWithSectionsForWayWithX:(int)intSections andY:(int)intRow {
    NSUInteger i;
    NSUInteger j;

    if ((self = [self init])) {
        sections = [[NSMutableArray alloc] initWithCapacity:intSections];
        for (i=0; i < intSections; i++) {
            NSMutableArray *a = [NSMutableArray arrayWithCapacity:intRow];
            for (j=0; j < intRow; j++) {
                Node * node = [[Node alloc] initNodeWithX:i  andY:j andValeur:0];
                [a insertObject:node atIndex:j];
            }
            [sections addObject:a];
        }
    }
    return self;
}

- (void)setObjectForNode:(Node *)object andX:(int)intSection andY:(int)intRow {

    [[sections objectAtIndex:intSection] replaceObjectAtIndex:intRow withObject:object];
}

- (SectionArray *) copy {
    ...
} 
```

@结尾

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-30T20:04:44.293

如果我没看错，那么它`sections`是一个可变数组，但它的元素

```
[sections objectAtIndex:intSection] 
```

是*不可变的数组*，所以你会在

```
[[sections objectAtIndex:intSection] replaceObjectAtIndex:intRow withObject:object]; 
```

原因是您在此处*复制*项目 ( `copyItems:YES`)：

```
newSectionArray.sections = [[NSMutableArray alloc] initWithArray:itemsCopy copyItems:YES]; 
```

所以即使`itemsCopy`是一个可变数组的数组，这些元素的副本也是不可变的。

*补充：*对于嵌套数组的“嵌套可变副本”，您可以按如下方式进行：

```
SectionArray *newSectionArray = [[SectionArray alloc] init];
newSectionArray.sections = [[NSMutableArray alloc] init];
for (NSUInteger i=0; i < [sections count]; i++) {
    NSMutableArray *a = [[sections objectAtIndex:i] mutableCopy];
    [newSectionArray.sections addObject:a];
} 
```

# github - Github Contributions calendar day start time

> ID：15722668
> 
> 赞同：10
> 
> 时间：2013-03-30T19:36:46.057
> 
> 标签：github

Few days ago Github launched their new feature ["Contributions"](https://github.com/blog/1360-introducing-contributions). I have a query that, what is the day start time of this calendar? is it using my local time or the UTC? and if it is using my local time then i have a related query, What will happen if go to some place where my time zone if different?

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-03-30T20:05:23.720

Update March 2014: starting March 10th, 2014, the contributions will be recorded in the **local timezone!**

See "[Timezone-aware contribution graphs](https://github.com/blog/1793-timezone-aware-contribution-graphs)":

> When counting commits, we use the timezone information present in the timestamps for those commits.
> Pull requests and issues opened on the web will use the timezone of your browser. If you use the API you can also specify your timezone.
> 
> We don't want to mess up your current contribution streaks, so only contributions after Monday 10 March 2014 ([Temps Universel Coordonné](http://en.wikipedia.org/wiki/Coordinated_Universal_Time)) will be timezone-aware.

* * *

Original answer (March 2013)

From what I can see on my own profile, it is using the time of my commits, recorded in PST, and not UTC (from this [bug report](https://answers.atlassian.com/questions/70929/github-jira-shows-incorrect-commit-times) or [this article](http://burgestrand.se/articles/github-pages-and-time-formats.html)).

That timestamp (using PST) is not link to the place from where you are using GitHub.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-03-13T01:10:11.350

Yes, from March 10th, 2014, I found it shows local time as calender time.

# javascript - 浏览器控制台中的 ajax 请求和活动

> ID：15722672
> 
> 赞同：0
> 
> 时间：2013-03-30T19:37:06.527
> 
> 标签：javascript, jquery, html, ajax

我通过在 chrome 中打开控制台来检查我的网站活动，并且有讨厌的 ajax 活动.. 但是当我在 chrome 中检查 stackoverflow 和 facebook 控制台时，没有任何活动.. 不，我想知道他们在做什么来发出 ajax 请求为什么是他们没有活动..

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-30T19:38:55.280

有一种东西叫做轮询。它被称为推送技术，服务器将代码从它推送到网页。这可以通过网络套接字来完成。

一些相关的事情可能是：

*   [推技术](http://en.wikipedia.org/wiki/Push_technology)
*   [什么是长轮询](http://www.quora.com/What-is-long-polling-in-a-web-framework)
*   [Ajax 长轮询](https://stackoverflow.com/questions/9103490/ajax-long-polling)
*   [彗星](http://en.wikipedia.org/wiki/Comet_(programming))
*   [如何实现基本的“长轮询”？](https://stackoverflow.com/questions/333664/simple-long-polling-example-code)

# git - CentOS: How do I go about setting up GIT on a CentOS server per the following

> ID：15722674
> 
> 赞同：0
> 
> 时间：2013-03-30T19:37:26.650
> 
> 标签：git, centos

I would like to setup git for a website taking the following into account:

I have a VPS setup where I plan on doing the following:

1.  Setup /home/site/public_html (Main Website)
2.  Setup /home/dev-site/public_html (Dev Site)
3.  Use an IDE on my Windows PC to make changes.

I would like to see the following happen:

1.  I make changes on my local PC
2.  Push to my DEV site (dev-site) for testing
3.  If everything works there, I would then push to my Main Website(LIVE)

What is the best approach to have something like this work.

I just now started to use GIT and it is getting a little confused.

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-31T16:02:20.620

Assuming you are using a central repo for your code (github, gitlab ect..)

Create two branches in git (master & dev)

Always checkout the dev branch for your work. (Never master)

```
windowsComupter$ git checkout dev 
```

When you are happy with the results, upload your commit

```
windowsComputer$ git commit
windowsComputer$ git push 
```

On your development site, pull down the latest dev repo

```
dev-site$ git pull origin dev 
```

When you have tested everything, merge dev into master

```
windowsComputer$ git checkout master
windowsComputer$ git merge dev 
```

Go to your production site, and checkout the latest master

```
productionServer$ git pull origin master 
```

Let me know if that doesn't answer your question and I'll expound further.

# perl - 如何确保查询成功执行

> ID：15722676
> 
> 赞同：1
> 
> 时间：2013-03-30T19:37:30.937
> 
> 标签：perl, dbi

我需要执行一个 select 语句查询并捕获返回的结果并将其存储在一个变量中。

执行没有返回任何数据。我检查了我的连接是否正确，因为它没有返回任何错误。

> $dbh = DBI->connect($data_source, $username, $password) or die $DBI::errstr;

以下是我的查询

```
my $sth = $dbh->prepare('select abc from pqr');
$sth->execute(); 
```

现在我正在检查它是否有一些数据

```
if($sth->rows) {
    print "We have data!\n";
} else {
    print"No Data";
} 
```

它总是打印`No Data`。

为了获取我正在使用的数据

```
while(my @data = $sth->fetchrow_array()) {
    print "$data[1]\n";
}
$dbh->disconnect; 
```

我没有得到任何数据。谁能建议我这里有什么问题？Same Query 给了我想要的 Java 结果。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-30T19:56:57.720

根据 DBI[文档](http://docstore.mik.ua/orelly/linux/dbi/appa_07.htm)

> $rv = $sth->行；
> 
> 返回受最后一个影响行的命令影响的行数，如果行数未知或不可用，则返回 -1。
> 
> 通常，您只能在非 SELECT 执行（对于某些特定操作，如 UPDATE 和 DELETE）或获取 SELECT 语句的所有行之后依赖行计数。

写你的：

```
while(my @data = $sth->fetchrow_array()) {
    print "$data[1]\n";
} 
```

询问行的第二个 ([1]) 元素对您的查询没有意义。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-31T13:53:10.933

如果您不处理大型结果集，那么获取所有内容会更快一些

```
my $rows = $db->selectall_arrayref(qq|Select abc from def|) or die "Can't select " . $db->errstr();
if (@$rows) {
    print "I have rows";
    foreach my $row (@$rows) {
        # do something with $row->[0]
    }
} else {
    print "I did not get any rows/data";
} 
```

只是另一种方式

# ios - iOS 动画块：旋转时图像的内容闪烁

> ID：15722678
> 
> 赞同：1
> 
> 时间：2013-03-30T19:37:33.397
> 
> 标签：ios, uiview, uiimage, block, uiviewanimation

我正在尝试在动画块中旋转图像（UIImageView）。图像在水平方向包含细线（例如，像记事本图像中的线条）。但是，在旋转图像中的线条时，它们会像 UITableView 一样上下滚动。图像的边缘没有锯齿状，因为我使用的是透明边框。我在谷歌上搜索了几天但无济于事。

在我看来，这一定已经发生在某人身上，但即使搜索不仅仅是 iOS 特定的答案，我也无法找到任何答案。

- - - - - - 更新 - - - - - - -

不只是旋转，即使使用以下代码在屏幕上移动图像而不旋转也会导致图像本身的线条出现狂野闪烁。

```
 UIImageView *notepad = [[UIImageView alloc] initWithFrame:(CGRect) {{0, 0}, 245, 256}];
notepad.image = [UIImage imageNamed:@"notepad.png"];

[UIView animateWithDuration:5.0
                      delay:0.0
                    options:UIViewAnimationOptionCurveEaseInOut
                 animations:^{notepad.center = (CGPoint){115.0f, 845.0f};}
                 completion:^(BOOL finished)
                 {
                    [UIView animateWithDuration:5.0
                                          delay:0.0
                                        options:UIViewAnimationOptionCurveEaseIn
                                     animations:^{
                                  notepad.center = (CGPoint) {423.0f, 23.0f};}
                                     completion:nil];
          }]; 
```

像这样的图像：http: [//www.wpclipart.com/education/supplies/paper/notepad_page.png.html](http://www.wpclipart.com/education/supplies/paper/notepad_page.png.html)

谢谢。

# java - 按文件类型禁用拼写检查？

> ID：15722679
> 
> 赞同：1
> 
> 时间：2013-03-30T19:37:39.197
> 
> 标签：java, eclipse, spell-checking, eclipse-wtp

是否可以禁用 Eclipse 对某些文件类型的拼写检查？例如，我不想在 XML 文件中进行拼写检查，因为其中几乎没有任何语言内容。

# html - 100% 宽度布局在流体布局中无法正常工作

> ID：15722681
> 
> 赞同：1
> 
> 时间：2013-03-30T19:37:48.170
> 
> 标签：html, css

第一个对不起，如果标题不是 100% 在桥上，我真的不知道如何撰写它。

无论如何，这是一个 100% 宽度布局的简单问题。我有一个位于流体容器内的表单，它有 - 1 个输入、1 个选择、1 个按钮，它们都是内联对齐（水平）

当我最小化窗口按钮然后选择列表它们向下移动时的问题。我不想要那个。

这是小提琴[http://jsfiddle.net/4GSLE/](http://jsfiddle.net/4GSLE/)中的一个示例，您可以最小化 html 部分，您将看到问题。

如何让他们在一条线上，而不是下移？

```
.main {
    max-width: 1200px;
    margin: 0px auto;
    background-color: #eee;
    line-height: 50px;
    padding: 10px;
}
form {
    padding: 0 0 0 0;
    margin: 0 0 0 0;
    display: block;
}
.clear {clear: both;}
input, select {
    float: left;
    height: 50px !important;
    padding: 0 10px;
    width: 66% !important;
    border: 1px solid #d6d8db;
    margin-right:  20px;
}
input.button {
    height: 54px !important;
    padding: 0 10px;
    margin-top: -1px !important;
    width: 125px !important;
    border: 1px solid #d6d8db !important;
    background: #333;
    cursor: pointer;
    color: #fff;
}
select {
    width: 200px !important;
    height: 52px !important;
} 
```

html:

```
<div class="main">
    <form>
        <input type="text" name="" value="search" />
        <select>
            <option>select</option>
        </select>
        <input type="submit" name="" value="Search now" class="button" />
    </form>
    <div class="clear"></div>
</div> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-30T19:47:54.470

对表单、输入和选择选择器进行一些 CSS 调整应该可以解决问题。

```
form {
    padding: 0;
    margin: 0;
    display: block;
    white-space: nowrap;
}
input, select {
    display: inline-block;
    height: 50px;
    padding: 0 10px;
    width: 66%;
    border: 1px solid #d6d8db;
    margin-right:  20px;
} 
```

`[**Demo Here**](http://jsfiddle.net/NotInUse/4GSLE/2/)`

Side note: Unless you really need them, all those `!important` declarations will end up causing more trouble than solving issues. I'd avoid `!important` as much as possible.

# html - 如何在 标签？

> ID：15722690
> 
> 赞同：-2
> 
> 时间：2013-03-30T19:38:26.143
> 
> 标签：html, css, html-lists

我正在使用精彩的 Slickmap 模板开始为朋友创建一棵树，但无法弄清楚如何在同一个`<li>`标​​签中包含多行文本。基本上前 5 个项目应该在同一个盒子里，然后最后两个在不同的盒子里。我已经尝试了所有`<br>`我能想到的变体，包括在`&nbsp;`之后添加一个，`<br>`但似乎没有任何效果。有可能吗？如果可以，怎么办？

```
<ul>
    <li><a href="/acceptance">Acceptance</a></br>
    <a href="/IPC-DRM-PTH">IPC-DRM-PTH</a></br>
    <a href="/IPC-A-610">IPC-A-610</a></br>
    <a href="/IPC-9191">IPC-9191</a></br>
    <a href="/IPC-DRM-SMT">IPC-DRM-SMT</a></br>
    <a href="/Posters">Posters</a></br>
    </li>
    <li><a href="/mission">Mission Statement</a></li>
    <li><a href="/principals">Principals</a></li>
</ul> 
```

[示例网页](http://fieldshypnotherapy.co.uk/SlickmapCSS/index.html)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-30T19:43:56.283

`</br>`应该`<br>`是。那你就好了。

意思是“关闭这个`</li>`li（列表项）元素”。br 元素不需要结束标记。由于它不能包含任何内容，因此它被隐式关闭。`<br/>`不过有时你可能会看到。这基本上归结为之后立即关闭的 br 元素。注意正斜杠的位置。

另请参阅[HTML 5：是 <br>、<br/> 还是 <br />？](https://stackoverflow.com/questions/1946426/html-5-is-it-br-br-or-br)

# java - Count the number of comparisons and the number of copies each sorting algorithm performs

> ID：15722691
> 
> 赞同：-1
> 
> 时间：2013-03-30T19:38:32.543
> 
> 标签：java, comparison, sorting

In Java, how do I take Bubble Sort, Insertion Sort, Merge Sort, Shell Sort, and Quick Sort and make a counter to tell me how many times they preform a comparison or copy.

I have all of the sorters made I just don't know how to make a counter.

Any ideas?

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-30T20:28:21.063

It's rather simple, unless I am much mistaken.

For X Sort:

```
private int copyCounter = 0;
private int comparisonCounter = 0;

public void XSort(){

     // Sorting logic start
     ....
     //Perform comparison operation
     comparisonCounter++;
     ....
     //Perform copy operation
     copyCounter++;
     ....
     //Sorting logic ends

     //Print the values of copyCounter here
} 
```

Once your method completes execution you will have the required counts. Assuming you have all the sorts implemented as separate classes you will need to modify your sort method in individual classes as above.

# php - Hiding the automatically generated last results of an input box

> ID：15722692
> 
> 赞同：1
> 
> 时间：2013-03-30T19:38:32.843
> 
> 标签：php, javascript, css, html

my question is how to hide those nasty results of your last input given to an input field. I made a picture of that and you can see how the marked result "e" hides the second input field. I dont want this to appear as I made my own livesearch and these result-set hides my live-results.

Edit for a clear question by Xenolithic: He doesn't want text boxes to show previous things entered into it after submitted. IE: If you enter elephant and submit, if you come back to it and enter e, elephant will show up in the dropdown.

Greetings and Thx

Picture: [http://www.imagebanana.com/view/fzajkh6s/Example.jpg](http://www.imagebanana.com/view/fzajkh6s/Example.jpg)

ANSWER:

Oh I found it out myself. You have to set the attribute "autocomplete" to "off" :)

```
<input type="text" autocomplete="off" /> 
```

Thx and greetings

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-30T19:56:31.357

You can use `autocomplete="off"` for input.

```
<input name="email" type="text" autocomplete="off" /> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-30T20:06:06.957

this is can be achieved using jquery

```
 $('input').attr('autocomplete','off'); 
```

# python - Unicode problems in Python

> ID：15722694
> 
> 赞同：1
> 
> 时间：2013-03-30T19:38:38.763
> 
> 标签：python, mysql, unicode, utf-8, character-encoding

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-30T19:54:43.487

If I try it in an interactive shell or from a .py file

```
#!/usr/bin/python
# -*- coding: utf-8 -*-
value_text1 = u'ąść'
print value_text1 
```

it works perfectly well for me, so I guess it's something with your server configuration.

BTW, make sure to use charset="utf-8" when connecting to the server.

# caching - 如何缓存一个几乎不会更改但经常添加的列表

> ID：15722701
> 
> 赞同：0
> 
> 时间：2013-03-30T19:39:04.567
> 
> 标签：caching

我有一个约会安排应用程序，它不断地添加约会。在任何一天，特定客户数据库中可能有 95% 的约会从未被触及。约会将被添加和更新，但绝大多数数据将保持不变。

客户不断在“约会日历”屏幕和“创建/更新约会”屏幕之间切换，所以如果每次创建或更新约会时整个缓存都失效，我可能根本不缓存任何东西。

我无法想象我的问题是独一无二的。是否有 a) 这个问题的名称，以及 b) 处理它的标准方法？

# ruby-on-rails - 如何在 Windows 中更新 ruby

> ID：15722703
> 
> 赞同：37
> 
> 时间：2013-03-30T19:39:21.767
> 
> 标签：ruby-on-rails, ruby, ruby-on-rails-4

我通过 rails 安装程序下载了 ruby​​，但我现在想要 ruby​​ 2.0.0 并且已经下载了它。我如何更新我的红宝石，因为我这样做

`ruby -v`

它仍然以 ruby​​ 版本 1.9.3 的形式出现。

* * *

## 回答 #1

> 赞同：38
> 
> 时间：2016-05-24T09:31:15.243

我推荐使用 Chocolatey 来管理你的 ruby​​ 安装。

这是一个适用于 Windows 的 unix 风格的包管理器。

安装非常简单，你可以在[他们的网站](https://chocolatey.org/install)上找到说明。

在 cmd.exe 中（以管理员身份运行）：

```
@powershell -NoProfile -ExecutionPolicy Bypass -Command "iex ((new-object net.webclient).DownloadString('https://chocolatey.org/install.ps1'))" && SET PATH=%PATH%;%ALLUSERSPROFILE%\chocolatey\bin 
```

然后你可以安装红宝石：

```
choco install ruby 
```

And upgrade it later:

```
choco upgrade ruby 
```

* * *

## 回答 #2

> 赞同：28
> 
> 时间：2013-03-30T19:42:39.020

对您来说最简单的方法可能是使用 RubyInstaller，它的 2.0.0-p0 版本现在可以作为安装程序下载。按照链接[http://rubyinstaller.org/](http://rubyinstaller.org/)了解更多信息。

* * *

## 回答 #3

> 赞同：-4
> 
> 时间：2015-05-08T06:07:26.400

您可以使用新的安装程序或使用“gem”（ruby 包管理器）进行更新。

# python - Paramiko: Creating a PKey from a public key string

> ID：15722704
> 
> 赞同：6
> 
> 时间：2013-03-30T19:39:23.590
> 
> 标签：python, ssh, paramiko, ssh-keys

I'm trying to use the SSH protocol at a low level (i.e. I don't want to start a shell or anything, I just want to pass data). Thus, I am using Paramiko's [`Transport`](http://www.lag.net/paramiko/docs/paramiko.Transport-class.html) class directly.

I've got the server side done, but now I'm hitting a wall over something silly. For the client to connect to the server, the `Transport`'s [`connect` method](http://www.lag.net/paramiko/docs/paramiko.Transport-class.html#connect) takes as two [`PKey`](http://www.lag.net/paramiko/docs/paramiko.PKey-class.html) objects as argument: The private key of the client (`pkey`), and the public key of the server (`hostkey`).

The [`PKey`](http://www.lag.net/paramiko/docs/paramiko.PKey-class.html) class is described as "Base class for public keys". Yet the problem is that I can't figure out how to create such a [`PKey`](http://www.lag.net/paramiko/docs/paramiko.PKey-class.html) object out of just an ssh public key (i.e. a string `ssh-whatever AAblablabla`). It has methods for building such an object out of a private key, but obviously I don't want the client to know the server's private key.

I feel like I'm overlooking something simple, but I can't find info on doing that on the web; most tutorials out there use the higher-level [`SSHClient` class](http://www.lag.net/paramiko/docs/paramiko.SSHClient-class.html) which loads the system's `known_hosts` keys.

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2014-06-15T21:34:53.987

Had to solve this problem again in another context that wasn't just for key comparison (it was for signature checking). Here's the proper way to do it. In retrospect it was pretty simple, but hardly documented at all.

```
# For a public key "ssh-rsa AAblablabla...":
key = paramiko.RSAKey(data=base64.b64decode('AAblablabla...'))
key.verify_ssh_sig(..., ...) 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-30T20:32:56.577

Worked around it by calling the individual methods described in the [`connect` method documentation](http://www.lag.net/paramiko/docs/paramiko.Transport-class.html#connect):

```
clientPrivateKey = paramiko.RSAKey.from_private_key_file(...)
transport = paramiko.Transport(...)
knownServerKey = 'ssh-rsa AAblablabla'.split(' ', 3)
transport.start_client()
serverKey = transport.get_remote_server_key()
if serverKey.get_name() == knownServerKey[0] and serverKey.get_base64() == knownServerKey[1]:
    # Valid key
    transport.auth_publickey('username', clientPrivateKey)
    channel = transport.open_channel('...')
else:
    # Invalid key 
```

This is more or less [what the `connect` method does anyway](http://www.lag.net/paramiko/docs/paramiko.transport-pysrc.html#Transport.connect-def).

I am still open to better/shorter suggestions though. As it stands, the `hostkey` parameter of the `connect` method seems unusable.

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2020-06-02T05:37:54.970

To add onto the solution provided for the Transport Client. Here is my solution for adding a string public key to the SSH Client:

```
my_pub_key = "xx.xx.xx.xx ecdsa-sha2-nistp256 mlzdHAyNT....."
my_host = my_pub_key.split(' ')[0]
password = 'myFavortitePassword'
username = 'myUsername'

ssh_client=paramiko.SSHClient()

host_key_policy = paramiko.MissingHostKeyPolicy()
host_key_policy.missing_host_key(ssh_client, my_host, my_pub_key)

ssh_client.connect(hostname= my_host
                            ,username=username
                            ,password=password
                            ,port=22
                            ,look_for_keys=False) 
```

# php - How to determine the environment in a cronjob

> ID：15722705
> 
> 赞同：3
> 
> 时间：2013-03-30T19:39:24.697
> 
> 标签：php, codeigniter, cron, environment

I've got an issue on how to determine the application's environment during a cronjob. I have currently have 2 environments: a production and a testing environment. They both use their own database.

I determine the current environment based on the URL. For example: dev.domain.com sets the environment to testing and domain.com sets it to production.

This works perfectly. However, this does not work for cronjobs. Because a cronjob does not get a domain.

How would I solve this and still keeping things dynamic?

This is what the code currently looks like:

```
if($_SERVER['SERVER_NAME'] == 'dev.domain.com' || $_SERVER['SERVER_NAME'] == 'domain.local') {
    define('ENVIRONMENT', 'development');
}else if ($_SERVER['SERVER_NAME'] == 'domain.com'){
    define('ENVIRONMENT', 'production');
} 
```

Thanks in advance.

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-30T19:43:18.090

You can pass server name in cron job. Example if your current php command look likes.

```
php a.php --uri="/foo" 
```

It will become

```
SERVER_NAME=dev.domain.com php a.php --uri="/foo" 
```

# jquery - Replace HTML element with function

> ID：15722706
> 
> 赞同：0
> 
> 时间：2013-03-30T19:39:33.267
> 
> 标签：jquery, json, jquery-mobile

I'm trying to replace the page_title div with the content of the `name` property. Below is what I have so far but it does not work. I'm new to jQuery any help. I'm using jquery Mobile.

```
 <script>
var siteData = {
    "name": "Site Name",
    "logo": "",
    "theme": "b",
    "fullSiteLink": "http://www.google.com",
    "pages": [{
            "id": "1364668689503",
            "name": "Page Title",
            "type": "basic",
            "components": {
                "img": "",
                "text": "Page content"
            }
        },
    }]
}
</script> 
```

UPDATE

```
 $(document).ready(function(siteData) {
     //site name
     $('#page_title').html(siteData["name"]);
 }); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-30T19:49:40.393

Here's a working **jsFiddle** example: [http://jsfiddle.net/Gajotres/gMAf3/](http://jsfiddle.net/Gajotres/gMAf3/)

```
$(document).on('pagebeforeshow', '#index', function(){      
    $(this).find('[data-role="header"] h3').html(siteData.name);
});

     var siteData = {

         "name": "Site Name",
             "logo": "",
             "theme": "b",
             "fullSiteLink": "http://www.google.com",
             "pages": [
         {
             "id": "1364668689503",
             "name": "Page Title",
             "type": "basic",
             "components": {
                 "img": "",
                 "text": "Page content"
             }
         }     ]

     } 
```

Don't use document ready with jQuery Mobile, it will usually trigger before page is inserted into the DOM. To find more about this problem take a look at this **[ARTICLE](http://www.gajotres.net/document-onpageinit-vs-document-ready/)**, or find it **[HERE](https://stackoverflow.com/a/14469041/1848600)**.

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-30T19:51:48.180

```
$(document).ready(function () {

    // Declare the object here
    var siteData = {....};

    // Set the title
    $('#page_title').text(siteData["name"]);
}); 
```

# c++ - 二叉搜索树成员函数

> ID：15722708
> 
> 赞同：1
> 
> 时间：2013-03-30T19:39:40.977
> 
> 标签：c++, tree, binary-tree, binary-search-tree

我无法编写代码来确定我的树中是否存在某些数据，这是 BinaryTreeNode 类

```
class BinaryTreeNode {
  public:
    Data * nodeData;
    BinaryTreeNode * left;
    BinaryTreeNode * right; 
```

我需要完成的功能是（不能改变这个定义）

```
bool BinaryTreeNode::member(Data * data) const { 
```

我试图创建一个像*currentnode = this 这样*的变量，并使用一个 while 循环来检查树的哪一侧向下推进，然后更新 currentnode，但我似乎无法让它工作。所以我在想也许它应该通过递归来完成？我试过了，但程序锁定了。

如果有人能指出我正确的方向，那将非常有帮助。

这是我的许多尝试之一（这个尝试递归）：

```
bool BinaryTreeNode::member(Data * data) const {
    if(nodeData == NULL) {
        return false;
    }
    else if (nodeData->compareTo(data) == 0) {
        return true;
    }
    while(this != NULL) {
        if(nodeData->compareTo(data) == 0) {
            return true;
        }
        else if(nodeData->compareTo(data) == 1) {
            return left->member(data);
        }
        else if(nodeData->compareTo(data) == -1) {
            return right->member(data);
        }
    }

    return false;
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-30T19:55:48.687

```
while(this != NULL) 
```

在第一次调用该函数时，`this`永远不会更改为`NULL`.

**You can outright remove that one line.** Then, just check for `NULL` in your two branches.

```
 if(left && nodeData->compareTo(data) == 1) {
        return left->member(data);
    }
    if(right && nodeData->compareTo(data) == -1) {
        return right->member(data);
    } 
```

Once you've recursively checked the left and right trees, you're done.

# php - 用撇号发布数据

> ID：15722709
> 
> 赞同：0
> 
> 时间：2013-03-30T19:39:51.170
> 
> 标签：php, mysql

我是一个完整的初学者，`PHP`但已经管理了一个简单的代码来将数据输入到表中。

代码是：

```
$query = "INSERT into $table (suggestion1) VALUES('$suggestion1')"; 
```

一切正常，但如果插入的数据包含撇号（例如不要），则查询失败。

我已经搜索了几个小时，但我得到的答案超出了我的知识范围。任何帮助或指示都会很棒！

史蒂文

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-30T20:02:13.697

您应该查看的是准备好的语句，其中使用参数编写查询，以及调用准备好的语句传递参数值并让驱动程序进行替换/转义。[这是使用 mysqli 的一个很好的起点](http://php.net/manual/en/mysqli.quickstart.prepared-statements.php)。

这是来自 PHP.net 的简化代码示例：

```
$mysqli = new mysqli("example.com", "user", "password", "database");

/* Prepared statement, stage 1: prepare */
if (!($stmt = $mysqli->prepare("INSERT INTO test(id) VALUES (?)"))) {
    echo "Prepare failed: (" . $mysqli->errno . ") " . $mysqli->error;
}

/* Prepared statement, stage 2: bind and execute */
$id = 1;
if (!$stmt->bind_param("i", $id)) {
    echo "Binding parameters failed: (" . $stmt->errno . ") " . $stmt->error;
}

if (!$stmt->execute()) {
    echo "Execute failed: (" . $stmt->errno . ") " . $stmt->error;
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-30T19:42:07.083

你想逃避你的输入：检查[文档](http://www.php.net/manual/en/mysqli.real-escape-string.php)。

基本上，发生的事情是这样的：当你把数据加上引号时，你会得到：

```
 INSERT INTO $table (suggestion1) VALUES ('it's great'); 
```

MySQL 对第二个引用感到困惑。当您“逃脱”时，您会得到以下信息：

```
 INSERT INTO $table (suggestion1) VALUES ('it\'s great'); 
```

MySQL 知道第二个引号是数据的一部分，而不是查询的一部分。

[维基百科](http://en.wikipedia.org/wiki/Escape_character)也有关于它的信息（更广泛，但值得阅读和理解）。

# javascript - 需要突出显示并将文本从谷歌文档查看器复制到剪贴板

> ID：15722712
> 
> 赞同：0
> 
> 时间：2013-03-30T19:40:19.540
> 
> 标签：javascript, html, iframe, google-docs, control-c

我必须创建一个向用户显示文档的过程，用户可以突出显示文本并从文档的某些部分复制（并最终粘贴）文本。

我在 iframe 中使用谷歌文档查看器（因为我需要一个免费的通用文档查看器 - 尽管我对查看器的其他想法持开放态度）。谷歌文档查看器可以满足我的需要，但似乎我无权访问 iframe 的内部来获取突出显示的内容。

我查看了许多与在 javascript 中触发副本 (cntl-c) 相关的链接，但在此过程中没有任何确定的。

理想情况下，我希望在 iframe 之外单击一个按钮，单击该按钮会将用户在 google doc 查看器中所做的选择复制到剪贴板。

关于如何实现这一目标的任何建议？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-31T06:16:10.213

利用`window.getSelection();`.

教程： http: [//mark.koli.ch/2009/09/use-javascript-and-jquery-to-get-user-selected-text.html](http://mark.koli.ch/2009/09/use-javascript-and-jquery-to-get-user-selected-text.html)

# php - CakePHP 自动化 i18n 从批处理文件中提取 shell 过程

> ID：15722716
> 
> 赞同：1
> 
> 时间：2013-03-30T19:40:39.943
> 
> 标签：php, cakephp, batch-file, internationalization, cakephp-2.0

为了为 CakePHP 2.3 i18n 创建默认的 pot 文件，我在 windows 中创建了一个像这样的 bat 文件。

```
CD F:\mywork\app\View
F:\mywork\lib\Cake\Console\cake.bat i18n extract 
```

但我得到这个错误：

```
Your database configuration was not found. Take a moment to create one.
---------------------------------------------------------------
Database Configuration:
---------------------------------------------------------------
Name:
[default] > 
```

但是在`app\Config\database.php`文件里面我有数据库配置，它们运行良好。所以我删除了提取参数。

我像这样创建了一个新的 bat 文件。

```
CD F:\mywork\app\View
F:\mywork\lib\Cake\Console\cake.bat i18n 
```

当我运行 bat 文件时，我得到了这个：

```
[E]xtract POT file from sources
[I]nitialize i18n database table
[H]elp
[Q]uit
What would you like to do? (E/I/H/Q) 
```

我选择**E**。我明白了：

```
Current paths: None
What is the path you would like to extract?
[Q]uit [D]one
[F:\mywork\app\View\] > 
```

我按**Enter**。我明白了：

```
Current paths: F:\mywork\app\View\
What is the path you would like to extract?
[Q]uit [D]one
[D] > 
```

我按**Enter**。我明白了：

```
Would you like to extract the messages from the CakePHP core? (y/n)
[n] > 
```

我按**Enter**。我明白了：

```
What is the path you would like to output?
[Q]uit
[F:\mywork\app\View\Locale] > 
```

我贴这个：`F:\mywork\app\Locale\eng\LC_MESSAGES`。比我得到这个：

```
Would you like to merge all domains strings into the default.pot file? (y/n)
[n] > 
```

我按**Enter**。cake 开始处理所有 View 文件。创建pot文件。然后我得到这个：

```
[E]xtract POT file from sources
[I]nitialize i18n database table
[H]elp
[Q]uit
What would you like to do? (E/I/H/Q) 
```

我按**Q**，程序结束。

是否有可能使这个过程自动化？预先设置路径而不是手动选择选项？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-05-16T14:25:26.133

只是在处理同样的问题。你需要开始

```
cake.bat i18n extract 
```

来自 /app 路径，而不是来自视图路径。对于逗号分隔的文件列表，该过程可以自动化：

```
cake i18n extract --files %ListOfFiles% --ignore-model-validation --output .\Locale\eng\LC_MESSAGES\ --paths .\View  --overwrite no --extract-core no --merge no 
```

也应该在没有文件列表的情况下工作：

```
cake i18n extract --ignore-model-validation --output .\Locale\eng\LC_MESSAGES --paths .\View  --overwrite no --extract-core no --merge no 
```

# asp.net - Formsauthentication.RedirectFromLoginPage 不断循环

> ID：15722718
> 
> 赞同：2
> 
> 时间：2013-03-30T19:40:56.000
> 
> 标签：asp.net, formsauthentication

这是我最后一个问题的延续（[质量中心授权之上的 ASP.net 自定义成员资格](https://stackoverflow.com/questions/15705130/asp-net-custom-membership-on-top-of-quality-center-authorization)）
开发 asp.net 应用程序以提供与惠普质量中心 (QC) 的自定义接口。它的登录页面将使用 QC'a API 来验证用户。还有一个 SQL 数据库，我在其中存储已注册到我的应用程序的 QC 用户（只需将 QC 用户 ID 存储在 DB 中，而不是密码，密码验证是使用 QC API 完成的）。

就像在 QC 中一样，我的登录页面有 2 组控件，
1\. 用户 ID 和密码文本框 - 用户输入用户 ID 和密码并点击“验证” - 点击时，我检查用户是否在我的数据库中，如果找到，提供的凭据是使用 QC API
2 进行验证。QC 域和项目下拉列表 - 一旦用户在步骤 1 中通过身份验证，用户有权访问的 QC 域和项目将使用 QC API 拉出并填充到相应的下拉列表中。
用户选择域/项目并单击登录按钮。单击登录按钮时，我想设置 Set FormAuthentication cookie 并将用户重定向到一个页面，例如 - 'Authenticated' 目录中的 welcome.aspx。

**问题**——

> 在步骤 2 中单击“登录”按钮后，当我调用“ *FormsAuthentication.RedirectFromLoginPage* ”时，它会返回登录页面，而不是去welcome.aspx。

下面是我的 web.config：

```
<authentication mode="Forms">
  <forms name=".AutoCenterAuth" loginUrl="~/Login.aspx" defaultUrl="~/authenticated/welcome.aspx" protection="None" timeout="30" requireSSL="false" slidingExpiration="true" cookieless="UseCookies" enableCrossAppRedirects="false"/>
  </authentication>
  <authorization>
    <allow users="*"/>
  </authorization>
  ..
  ..
  <location path="Authenticated">
     <system.web>
    <authorization>
        <deny users="?"/>
        </authorization>
     </system.web>
  </location> 
```

以下是 login.aspx 的 Login 按钮点击后的代码：

```
Private Sub btn_LoginToAC_Click(ByVal sender As Object, 
ByVal e As System.Web.UI.ImageClickEventArgs) Handles btn_LoginToAC.Click

    objQCSession = Session("QCUserSession")

    'FormsAuthentication.SetAuthCookie(objQCSession.UserName, False)
    FormsAuthentication.RedirectFromLoginPage(objQCSession.UserName, True)

 End Sub 
```

过去一天挠头想弄清楚出了什么问题，或者我是否错过了任何事情，但到目前为止没有成功，非常感谢任何帮助。

# php - Debugging In Netbeans With xDebug

> ID：15722719
> 
> 赞同：1
> 
> 时间：2013-03-30T19:41:05.193
> 
> 标签：php, debugging, netbeans, xdebug

Am learning debugging using Netbeans (PHP) with xDebug. I have set Breakpoint(s) in a php file am using but it seems anytime i start the debugging (clicking the start debug button) the system switches to the "index.php" file in the parent folder. The file am using is in a child folder of the folder containing the "index.php" file. How come the debugging goes to the "index.php" file?

What am i doing wrong? Am very new in using IDE debugging so help me out. I always use print statements to debug my code but i have decided to use professional debugging. Am just new in this area so help me know what is going on.

thanks.

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-31T00:42:28.840

Two things to look at:

1.  Tools->Options, PHP Section->Debugging Tab - Uncheck 'Stop at First Line'

2.  File->Project Properties - Run Configuration - Advanced - You can set the entry URL for the debugger. The default is to begin with the index page, but you can set it to ask for a url when the debugger is invoked.

# java - 在远程图像上绘制（用手指）并保存。（安卓）

> ID：15722721
> 
> 赞同：0
> 
> 时间：2013-03-30T19:41:08.210
> 
> 标签：java, android

我目前正在从目录加载远程图像列表。我希望用户能够选择一个，然后用手指在图像上绘制，然后保存。（最终，将目录中的现有图像替换为修改后的图像）

我喜欢这个指向正确方向的一些指示。

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-30T19:46:12.990

首先研究 graphics 文件夹下示例中的 fingerpaint.java。

您应该覆盖视图的 onDraw 方法。

screen_drawing_room.xml

```
 <?xml version="1.0" encoding="utf-8"?>
 <RelativeLayout xmlns:android="http://schemas.android.com/apk/res/android"
 android:id="@+id/rlid"
 android:layout_width="fill_parent"
 android:layout_height="fill_parent"
 android:orientation="vertical" >
 <LinearLayout   //set background for the bottom layout set image here.
    android:layout_width="fill_parent"
    android:layout_height="fill_parent"
    android:gravity="bottom"
    android:orientation="vertical"
    android:weightSum="1.0" >

    <LinearLayout
        android:id="@+id/view_drawing_pad"//your drawing pad on foreground
        android:layout_width="fill_parent"
        android:layout_height="fill_parent" >
    </LinearLayout>
</LinearLayout>
</RelativeLayout 
```

在您的活动 onCreate()

```
 Drawing View mDrawingView=new DrawingView(this);

    setContentView(R.layout.screen_drawing_room);    

    LinearLayout mDrawingPad=(LinearLayout)findViewById(R.id.view_drawing_pad);

    mDrawingPad.addView(mDrawingView); 
```

绘图视图.java

定义您的绘图视图。以下可用于手绘。修改相同以绘制线条、文本和填充颜色（封闭区域）。

您应该添加一个颜色选择器并将颜色设置为绘画对象，以允许用户选择绘画颜色。

对于洪水填充，请参阅链接[android using flood fill algorithm getting out of memory exception](https://stackoverflow.com/questions/12669740/android-using-flood-fill-algorithm-getting-out-of-memory-exception)中接受的答案。

```
 class DrawingView extends View
{
       Paint       mPaint;
        //MaskFilter  mEmboss;
        //MaskFilter  mBlur;
        Bitmap  mBitmap;
        Canvas  mCanvas;
        Path    mPath;
        Paint   mBitmapPaint;

    public DrawingView(Context context) {
        super(context);
        // TODO Auto-generated constructor stub
            mPaint = new Paint();
             mPaint.setAntiAlias(true);
            mPaint.setDither(true);
            mPaint.setColor(0xFFFF0000);
            mPaint.setStyle(Paint.Style.STROKE);
            mPaint.setStrokeJoin(Paint.Join.ROUND);
            mPaint.setStrokeCap(Paint.Cap.ROUND);
            mPaint.setStrokeWidth(20);

        mPath = new Path();
        mBitmapPaint = new Paint();
        mBitmapPaint.setColor(Color.RED);
    }
     @Override
        protected void onSizeChanged(int w, int h, int oldw, int oldh) {
            super.onSizeChanged(w, h, oldw, oldh);
            mBitmap = Bitmap.createBitmap(w, h, Bitmap.Config.ARGB_8888);
            mCanvas = new Canvas(mBitmap);
        }
    @Override
    public void draw(Canvas canvas) {
        // TODO Auto-generated method stub
        super.draw(canvas);
        canvas.drawBitmap(mBitmap, 0, 0, mBitmapPaint);
        canvas.drawPath(mPath, mPaint);
    }
    private float mX, mY;
    private static final float TOUCH_TOLERANCE = 4;

    private void touch_start(float x, float y) {
        //mPath.reset();
        mPath.moveTo(x, y);
        mX = x;
        mY = y;
    }
    private void touch_move(float x, float y) {
        float dx = Math.abs(x - mX);
        float dy = Math.abs(y - mY);
        if (dx >= TOUCH_TOLERANCE || dy >= TOUCH_TOLERANCE) {
            mPath.quadTo(mX, mY, (x + mX)/2, (y + mY)/2);
            mX = x;
            mY = y;
        }
    }
    private void touch_up() {
        mPath.lineTo(mX, mY);
        // commit the path to our offscreen
        mCanvas.drawPath(mPath, mPaint);
        //mPaint.setXfermode(new PorterDuffXfermode(PorterDuff.Mode.SCREEN));
        // kill this so we don't double draw
        mPath.reset();
       // mPath= new Path();
    }

    @Override
    public boolean onTouchEvent(MotionEvent event) {
        float x = event.getX();
        float y = event.getY();

        switch (event.getAction()) {
            case MotionEvent.ACTION_DOWN:
                touch_start(x, y);
                invalidate();
                break;
            case MotionEvent.ACTION_MOVE:
                touch_move(x, y);
                invalidate();
                break;
            case MotionEvent.ACTION_UP:
                touch_up();
                invalidate();
                break;
        }
        return true;
    }

}

} 
```

您的绘图视图已设置。在图形文件夹下的 sdk 上的示例中研究 fingerpaint.java。

结果快照。您在背景中看到的是图像。在前景我画了嗨。我在拐角处画线。如果你能认出它是红色的。

画出看起来像边框的线条。将油漆的描边宽度设置为您喜欢的任何值。同样，您可以通过更改 x1,y1 和 x2,y2 坐标来绘制所需的线条。

```
 Display display = ( (Activity) mcontext).getWindowManager().getDefaultDisplay();  
                float w = display.getWidth(); 
                float h = display.getHeight();
                canvas.drawBitmap(mBitmap, 0, 0, mBitmapPaint);
                canvas.drawLine(0, 0, w, 0,mBitmapPaint);
                canvas.drawLine(0, 0, 0, h,mBitmapPaint);
                canvas.drawLine(w,h,w,0,mBitmapPaint);
                canvas.drawLine(w, h, 0,h , mBitmapPaint); 
```

![在此处输入图像描述](../Images/abecc449e83e80f8fa161315e46c0b37.png)

保存

```
 AlertDialog.Builder editalert = new AlertDialog.Builder(DrawingRoomScreen.this);
 editalert.setTitle("Please Enter the name with which you want to Save");
 final EditText input = new EditText(DrawingRoomScreen.this);       LinearLayout.LayoutParams lp = new LinearLayout.LayoutParams(
                        LinearLayout.LayoutParams.FILL_PARENT,
                        LinearLayout.LayoutParams.FILL_PARENT);
                input.setLayoutParams(lp);
                editalert.setView(input);
                editalert.setPositiveButton("OK", new DialogInterface.OnClickListener() {
                    public void onClick(DialogInterface dialog, int whichButton) {
                        content.setDrawingCacheEnabled(true);
                        String name= input.getText().toString();
                        Bitmap bitmap = mDrawingPad.getDrawingCache();//root view

                     String path = Environment.getExternalStorageDirectory().getAbsolutePath(); 
                        File file = new File("/sdcard/"+name+".png");           
                        try 
                        {
                            if(!file.exists())
                        {
                            file.createNewFile();
                        }
                            FileOutputStream ostream = new FileOutputStream(file);
                            bitmap.compress(CompressFormat.PNG, 10, ostream);
                            System.out.println("saving......................................................"+path);
                            ostream.close();
                            //content.invalidate();                         
                        } 
                        catch (Exception e) 
                        {
                            e.printStackTrace();
                        }finally
                        {

                        }
                    }
                });

                editalert.show(); 
```

从图库中获取图像

```
 File fp;
  Drawable d;   

public void  setImagefrmGallery()
{
// To open up a gallery browser
Intent intent = new Intent();
intent.setType("image/*");
intent.setAction(Intent.ACTION_GET_CONTENT);
startActivityForResult(Intent.createChooser(intent, "Select Picture"),1);
// To handle when an image is selected from the browser, add the following to your Activity 
 }
@Override
public void onActivityResult(int requestCode, int resultCode, Intent data) {
if (resultCode == RESULT_OK) {
if (requestCode == 1) {
// currImageURI is the global variable I�m using to hold the content:// URI of the image
Uri currImageURI = data.getData();
System.out.println("Hello======="+getRealPathFromURI(currImageURI));
String s= getRealPathFromURI(currImageURI);
File file = new File(s);

    if (file.exists()) {
     fp=file.getAbsolutePath();
     d = Drawable.createFromPath(file.getAbsolutePath());
     mDrawingPad.setBackgroundDrawable(d);
   }
   else
   {
    System.out.println("File Not Found");
    }
}
}
}
// And to convert the image URI to the direct file system path of the image file
public String getRealPathFromURI(Uri contentUri) {
// can post image
String [] proj={MediaStore.Images.Media.DATA};
Cursor cursor = managedQuery( contentUri,
proj, // Which columns to return
null, // WHERE clause; which rows to return (all rows)
null, // WHERE clause selection arguments (none)
null); // Order-by clause (ascending by name)
int column_index = cursor.getColumnIndexOrThrow(MediaStore.Images.Media.DATA);
cursor.moveToFirst();
return cursor.getString(column_index); 
   } 
```

# scheme - 为什么这会返回一个列表 '(5) 而不是数字 5？

> ID：15722726
> 
> 赞同：1
> 
> 时间：2013-03-30T19:41:30.537
> 
> 标签：scheme, racket, sicp, mit-scheme

我正在通过 SICP 工作，我正在进行的练习要求一个返回列表中最后一个元素的过程。我实现了执行`last-pair`此操作的过程，但我很困惑为什么它返回一个列表而不是一个数字：

```
(define (last-pair alist)
  (cond ((null? (cdr alist))
         (car alist))        ; still happens if this is just "car alist)"
        (else
         (last-pair (cdr alist))))) 
```

当我在从 1 到 5 的整数列表上调用它时，我得到输出 '(5)：

```
> (last-pair (list 1 2 3 4 5))
'(5) 
```

我原以为`5`，怎么`(car (list 1 2 3 4 5))`会`1`不回来`'(1)`。

**为什么我得到`'(5)`而不是`5`？**

* * *

*我正在使用 DrRacket 5.3.3 和 Racket Scheme。*

编辑 1：MIT-Scheme 似乎没有这样做。`last-pair`返回`5`不`'(5)`。哪个是对的？！？

~~编辑 2：有趣的是，在 DrRacket 中（不在 MIT-Scheme 中），如果第二行`(cond ((null? (cdr alist))`缩进两个空格，则在调用过程时，它返回`'(5)`. 但是，当第二行没有缩进时，它会返回`5`. 这是一个故障吗？我相信 Scheme 解释器应该遵循的只是括号，对吗？~~

编辑 3：我开始认为这是 DrRacket 中的一个小故障。当我将过程定义放在*定义窗口*（通常是顶部编辑器窗格）中时，无论缩进如何，过程都将返回`5`. 但是，如果我在*界面窗口*中定义它，~~缩进会影响编辑 2 中所述的结果。~~（编辑 4）无论缩进如何，它都会返回`'(5)`.

<*用一些关于缩进差异的代码剪断了前面的部分；现在的问题是定义过程的地方，请参阅编辑 4* >

编辑4：好的，我已经简化了问题。

*   在 MIT-Scheme 中，`(last-pair (list 1 2 3 4 5))`返回`5`，其中`last-pair`定义如上。不管缩进。
*   在 DrRacket 中，当`last-pair`程序在定义窗口中定义时，然后我单击“运行”，`(last-pair (list 1 2 3 4 5))`返回`5`. 不管缩进。
*   在 DrRacket 中，当`last-pair`程序在界面窗口（REPL）中定义时，`(last-pair (list 1 2 3 4 5)) returns`'(5). 不管缩进。

这是一个屏幕截图： ![对于在不同窗口中定义的相同功能，Racket 给出不同的结果](../Images/decd240bea2ef6fc2f605f21449cd9b0.png)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-30T20:15:29.887

由于`(list 1 2 3 4 5)`返回`(cons 1 (cons 2 (cons 3 (cons 4 (cons 5 '())))))`最后一对是`(cons 5 '())`.

In your function, chnage `((null? (cdr alist)) (car alist))` to `((null? (cdr alist)) alist)` in order to retun the last pair (rather than the car of the last pair.

EDIT:

This explains the difference between the results you see in the definition and the interaction window. The main cause of the confusion is that `last-pair` is builtin. If you use the name `my-last-pair` you will see the same result in both windows.

In the definition window `(define (last-pair ...` is interpreted to mean that you want to redefine a builtin function. Therefore the `last-pair` refers recursively to you own definition of `last-pair`. This ultimately gives result 5 in your example

In the interaction window the recursive call to `last-pair` refers to the builtin version. So when `last-pair` is called with the list `(2 3 4 5)` the builtin version returns the last pair, which is `(cons 5 '())` and this value is printed as `(5)`.

In short: The confusion is due to redefining a builtin function in the interaction window. Redefinitions are handled as expected in the definition window. Although confusing there are reasons behind the way the interaction window behaves (fixing this problem, will in turn cause confusion elsewhere).

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-01T09:58:56.880

Better don't use the built-in name `last-pair`. I suggest using something more descriptive of what you expect, like `last-elem` for example.

When renaming your function, be sure to rename it throughout; i.e. change the name of the function not only at the definition site, but also at each call site, including of course inside its body, where it gets called *recursively*. Renaming must be performed diligently, it is very easy to introduce new errors otherwise.

* * *

About the strange behaviour at the REPL. My guess is, when you entered

```
(define (last-pair alist)             ;; definition
  (cond ((null? (cdr alist))
         (car alist))        
        (else
         (last-pair (cdr alist)))))   ;; call 
```

at the REPL, the `last-pair` at the call site still referred to the built-in definition from the "outer" environment, so this call wasn't *recursive*. If that is the case, REPL did redefine the built-in, it's just that the call wasn't recursive.

I'd expect making an internal definition with explicit `letrec` should fix it, even when entered at the REPL:

```
(define (last-pair alist)
  (letrec ((last-pair (lambda (alist)          ;; internal definition
             (cond ((null? (cdr alist))
                (car alist))        
              (else
                (last-pair (cdr alist)))))))   ;; recursive call
     (last-pair alist)))                       ;; first call 
```

because the first call now calls into the recursive internal version explicitly, being inside the `letrec` form. Or maybe it'll get screwed somehow too, but I'd be *really* surprised if it did. :) Translating `define`s without internal definitions as simple `lambda` forms is one thing; messing inside the explicit `letrec` is quite another.

* * *

If this indeed works it'll mean that the Racket REPL translates simple definitions like `(define (f x) ...body...)` as simple `lambda` forms, `(define f (lambda(x) ...body...))`, not as `letrec` forms, `(define f (letrec ((f (lambda(x) ...body...))) f))`. And also, that `define` at the Racket REPL does not alter the old binding in the global environment, but adds a new binding into it on top of the old, *shadowing* the old binding.

这提出了另一种在 REPL 中“修复它”的方法——使用`set!`：

```
> (define f #f)
> (set! f (lambda(x) ...body...))  ; alter the old binding explicitly 
> (f x) 
```

# titanium - 无法设置嵌套合金视图的样式

> ID：15722728
> 
> 赞同：1
> 
> 时间：2013-03-30T19:41:35.397
> 
> 标签：titanium, titanium-mobile

我有一个视图，它是 XML 文档中的另一个视图。这是顶级视图：

**windowBase.xml：**

```
<Alloy>
    <Window class="base">

        <Window class="content">

            <Label class="haveActivation" text="Have an activation code for this device?">

        </Window>
        <Require id="navigation1" class="navigation1" src="navigation" />

    </Window>
</Alloy> 
```

以下是该视图的样式：

**windowBase.tss：**

```
".navigation1": {
    top: 692,
    left: 100,
    height: 265
}

".content": {
    backgroundColor: "white",
    height: 692,
    top: 0
}

".haveActivation": {
    bottom: 10
} 
```

这是子导航视图：

**导航.xml：**

```
<Alloy>
    <View class="nav" id="nav" onClick="nav_click">

        <Label class="tabExample" text="Tab here">

    </View>
</Alloy> 
```

导航视图的样式：

**导航.tss：**

```
"#nav": {
    zIndex: 9999,
    backgroundImage: "Navigation-Background.png",
    width: 1024,
    height: 265
}

".tabExample": {
    color: "white"
}

".container": {
    backgroundColor: "white"
} 
```

您可以看到我已将所需的视图 (.navigation1) 顶部样式设置为 692。但是，当它显示时，它会将视图呈现在屏幕中间而不是底部。我能够让它在顶部呈现的唯一方法：692 是如果我将该样式放在导航视图的#nav 样式中，这似乎没有多大意义。我究竟做错了什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-01T15:54:54.220

我不相信你可以把一个类放在 Require 上。

将 .navigation1 类合并到 navigation.xml 中的 nav id 样式中，并删除 navigation1 类。无论如何，您的逻辑有点多余，通过尝试从包含设置样式，您不妨从包含的文件本身设置样式。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-03-30T10:49:21.310

以我的思路：</p>

1.  窗口不能在 .xml 文件中包含其他窗口（js 可以创建一个新窗口并打开它或在选项卡组中）
2.  窗口不能在 .xml 文件中包含合金（需要 .xml 文件，您应该删除合金标签）

# php - How to get an array of dates (specifically formatted) from today to a certain point in the past?

> ID：15722735
> 
> 赞同：0
> 
> 时间：2013-03-30T19:42:16.240
> 
> 标签：php, arrays, date, datetime

I would like to get an array containing strings like this: 2013-03, 2013-02, 2013-01, 2012-12, 2012-11... etc.

How would I go about it? I tried working with a loop and DateInterval class, but surprisingly 30.March -1month gives us 2.March, so that's not very useful.

```
$date = new DateTime();
$date->sub(DateInterval::createFromDateString('1 month')); 
```

Thanks!

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-30T20:03:08.217

Curiously, PHP returns the previous month of a date using the "next month" keyword :S

You can do the following:

```
<?php
$date = new DateTime();
// Subtract one month at a time
// until we reach 2009.
while ($date->format('Y') > 2009) {
    $date->sub(DateInterval::createFromDateString('next month'));
    var_dump($date->format('Y-m')); // Will print 2013-03 2013-02 [...]
};
?> 
```

# ios - 新 PayPal iOS SDK 中的实时凭据

> ID：15722740
> 
> 赞同：2
> 
> 时间：2013-03-30T19:42:30.687
> 
> 标签：ios, paypal

我们的 iPad 应用程序已使用 iOS SDK v1.0.4 在沙盒模式下成功处理付款。现在我们已经收到了我们的实时凭证。但是，使用这些我们只会看到一个通用警报“与 PayPal 服务器通信时出现问题”。

据我从文档和示例应用程序中得知，您只需将 clientID 和 receiverEmail 更改为实时 ID 和帐户电子邮件，并将环境设置为 PayPalEnvironmentProduction（或不设置）。我试过调用 prepareForPaymentUsingClientId 而不是调用它。

有人在直播模式下成功使用过新的SDK吗？是否有任何未记录的要求？我已经提交了支持请求，但没有得到任何回复。

谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-30T22:02:09.803

当前存在系统问题，我们正在解决此问题。将在[https://www.paypal.com/sitestatus](https://www.paypal.com/sitestatus)上发布一条消息，以便您继续查看问题何时解决。

**编辑：**这应该在格林威治标准时间上午 04:12（2013 年 3 月 31 日）解决。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-05-01T22:54:16.217

对不起我的错 - 万一有人有 1.0.4 版并且仍然收到警报。回到您的贝宝开发中心并完成注册。一旦你完成注册。它会给你一个你必须更换的活钥匙。

# ruby-on-rails-3 - How to model this rails relationship, "has two"?

> ID：15722741
> 
> 赞同：2
> 
> 时间：2013-03-30T19:42:32.633
> 
> 标签：ruby-on-rails-3, model, model-associations

Imagine a roster of characters in a game.

I need to let users vote on which character counters which character and be able to save that in the database.

`Batman is strong against Superman`

`Batman is strong against Joker`

`Batman is weak against The Riddler`

* * *

How can I model this relationship between two of the same type of models? `Batman, Superman and Joker` are all part of the same Model type `Superhero`.

If I were to create this same system on something like ASP.Net MVC, I would create a table called `Counterpicks` and have two fields `source_id` and `target_id` as int fields and use them as foreign keys towards the `Superhero` table. Do I need to create a `Counterpick` model in RoR?

Any suggestions?

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-30T22:03:34.970

Take a look at the paragraph on Self Joins in [A Guide to Active Record Associations](http://guides.rubyonrails.org/association_basics.html#self-joins) (Rails Guides). What you need is also a self join.

The difference between your case and the example on Rails Guides is that you need a many-to-many relationship inside the `Superhero` model, while the example shows a `has_many` type of relationship.

Both kinds of many-to-many associations in Rails (`has_and_belongs_to_many` and `has_many through`) need a join table in the database. The `Counterpicks` table you mentioned is precisely a join table.

In your case it's going to end up looking a bit like this:

```
class Superhero < ActiveRecord::Base
  has_and_belongs_to_many :losers, :class_name => "Superhero", :foreign_key => "winner_id"
  has_and_belongs_to_many :winners, :class_name => "Superhero", :foreign_key => "loser_id"
end 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-30T19:51:15.700

You can use your proposed table model and use the foreign key. Have a look at [http://api.rubyonrails.org/classes/ActiveRecord/Associations/ClassMethods.html#method-i-has_many](http://api.rubyonrails.org/classes/ActiveRecord/Associations/ClassMethods.html#method-i-has_many)

# netty - Errors in Netty 4 http snoop example, with apache benchmark

> ID：15722743
> 
> 赞同：0
> 
> 时间：2013-03-30T19:42:40.200
> 
> 标签：netty

I'm trying to understand enough Netty to create a lightweight yet fully functional web server. I started by copying the source code `examples/.../http/snoop`. I run my server, and when I hit it in the browser it works fine, but it doesn't seem to work with the Apache benchmark tool. I try this to send it 10 requests:

```
$ ab -n 10 http://localhost:8080/foo
This is ApacheBench, Version 2.3 <$Revision: 655654 $>
Copyright 1996 Adam Twiss, Zeus Technology Ltd, http://www.zeustech.net/
Licensed to The Apache Software Foundation, http://www.apache.org/

Benchmarking localhost (be patient)...apr_socket_recv: Connection reset by peer (54)
Total of 7 requests completed 
```

In the handler, there is code like this:

```
public void messageReceived(ChannelHandlerContext ctx, Object msg) throws Exception {
    if (msg instanceof HttpRequest) {
        HttpRequest request = this.request = (HttpRequest) msg;
        ...
        buf.append("WELCOME TO THE WILD WILD WEB SERVER\r\n"); 
```

I added an integer count variable in there, just to get a sense of what is getting called, and after the AB runs, the counter indicates that the `buf.append(...` line has run 1200 times. That doesn't seem right. Any ideas? Is something wrong?

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-30T21:27:12.660

This sounds related to the ab bug [1] of IPv6 hosts.

[1] [http://simon.heimlicher.com/articles/2012/07/08/fix-apache-bench-ab-on-os-x-lion](http://simon.heimlicher.com/articles/2012/07/08/fix-apache-bench-ab-on-os-x-lion)

# php - 我的动态下拉菜单不显示我的 mysql 数据库中的信息？

> ID：15722744
> 
> 赞同：0
> 
> 时间：2013-03-30T19:42:41.300
> 
> 标签：php, html, mysql, web-applications

当用户选择他的状态月份时，我试图创建一个动态下拉菜单，并且它搜索 mysql 数据库的年份，该数据库提取与状态、月份和年份相关的正确信息。当我单击提交按钮时，没有任何反应，我也没有在屏幕上收到任何错误。

我将不胜感激您能给我的任何建议和/或可能包含我需要的信息的网站。如果我应该以其他方式做，请告诉我。

```
 <?php

 error_reporting(E_ALL);
    ini_set('display_errors', '1');

require_once('members/connectvars.php');

// Connect to the database
  $dbc = @mysqli_connect(DB_HOST, DB_USER, DB_PASSWORD, DB_NAME);

  if (!$dbc) {
    trigger_error('Could not connect to MySQL: ' . mysqli_connect_error());

        if($_POST)
        {
        $state = $_POST['state']; 
        $month = $_POST['month']; 
        $year = $_POST['year']; 

$query = mysql_query("SELECT * FROM triathlons WHERE state = '".$state."' month     ='".$month."' year = '".$year."' ") or die(mysql_error());

$num = mysql_num_rows($query);

echo "$num results found!<br>";

while($result = mysql_fetch_assoc($query))
{
$day = $result['day'];
$date = $result['date'];
$city= $result['city'];
$racename= $result['racename'];
$park= $result['park'];
$website= $result['website'];

echo "<b> day</b> : $day<br>
<b>Last Name : </b> $date<br>
<b>city : </b>$city<br>
<b>state : </b>$state <br><br>";
}
}

} 
?>

 <form  method="POST" id="filtermainpage" action="<?php echo $_SERVER['PHP_SELF']; ?>">

      <label for="state">State:</label>
        <select name="state" id="state1">

        <option selected="selected" value="">All States</option>
          <option value="AL">Alabama</option>
          <option value="AK">Alaska</option>
          <option value="AZ">Arizona</option>
          <option value="AR">Arkansas</option>
          <option value="CA">California</option>
          <option value="CO">Colorado</option>
          <option value="CT">Connecticut</option>
          <option value="DC">D.C.</option>
          <option value="DE">Delaware</option>
          <option value="FL" >Florida</option>
          <option value="GA">Georgia</option>
          <option value="HI">Hawaii</option>
          <option value="ID">Idaho</option>
          <option value="IL">Illinois</option>
          <option value="IN">Indiana</option>
          <option value="IA">Iowa</option>
          <option value="KS">Kansas</option>
          <option value="KY">Kentucky</option>
          <option value="LA">Louisiana</option>
          <option value="ME">Maine</option>
          <option value="MD">Maryland</option>
          <option value="MA">Massachusetts</option>
          <option value="MI">Michigan</option>
          <option value="MN">Minnesota</option>
          <option value="MS">Mississippi</option>
          <option value="MO">Missouri</option>
          <option value="MT">Montana</option>
          <option value="NE">Nebraska</option>
          <option value="NV">Nevada</option>
          <option value="NH">New Hampshire</option>
          <option value="NJ">New Jersey</option>
          <option value="NM">New Mexico</option>
          <option value="NY">New York</option>
          <option value="NC">North Carolina</option>
          <option value="ND">North Dakota</option>
          <option value="OH">Ohio</option>
          <option value="OK">Oklahoma</option>
          <option value="OR">Oregon</option>
          <option value="PA">Pennsylvania</option>
          <option value="RI">Rhode Island</option>
          <option value="SC">South Carolina</option>
          <option value="SD">South Dakota</option>
          <option value="TN">Tennessee</option>
          <option value="TX">Texas</option>
          <option value="UT">Utah</option>
          <option value="VT">Vermont</option>
          <option value="VA">Virginia</option>
          <option value="WA">Washington</option>
          <option value="WV">West Virginia</option>
          <option value="WI">Wisconsin</option>
          <option value="WY">Wyoming</option>

        </select>

    </p>
    <br
    <br

      <label for="month">Month:</label>
        <select name="month" id="month1">

        <option selected="selected" value="0">All Months</option>
          <option value="1">January</option>
          <option value="2">February</option>
          <option value="3">March</option>
          <option value="4">April</option>
          <option value="5">May</option>
          <option value="6">June</option>
          <option value="7">July</option>
          <option value="8">August</option>
          <option value="9">September</option>
          <option value="10">October</option>
          <option value="11">November</option>
          <option value="12">December</option>

      </select>

      <label for="year">Year:</label>
      <select name="year" id="year1">
          <option value="2013">2013</option>
          <option value="2012">2012</option>
          <option value="2011">2011</option>

      </select>
      </label>
      </p>

    <p>
      <input type="submit" name="submit" id="button" value="submit">
    </p>
  </form> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-30T20:27:11.547

```
 if (!$dbc) {
        trigger_error('Could not connect to MySQL: ' . mysqli_connect_error());

            if($_POST) {
                $state = $_POST['state']; 
                $month = $_POST['month']; 
                $year = $_POST['year']; 
    [...] 
```

第一个 if 应该在检查是否发送之前关闭。否则，当您成功连接到数据库时，什么都不会发生。所以与其：

```
 if (!$dbc) {
        trigger_error('Could not connect to MySQL: ' . mysqli_connect_error());
    }

    else if ($_POST) {
         $state = $_POST['state']; 
         $month = $_POST['month']; 
         $year = $_POST['year']; 
    [...] 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-30T20:31:23.580

我建议你开始使用 PDO 类！

```
<?php
error_reporting(E_ALL);
ini_set('display_errors', '1');

require_once('members/connectvars.php');

// Connect to the database
require_once('databaseConnection.php'),

if(!empty($_POST)) {
    $state = $_POST['state']; 
    $month = $_POST['month']; 
    $year = $_POST['year']; 

    $req = $db->prepare('
                 SELECT * 
                 FROM triathlons 
                 WHERE state = :st 
                 AND month = :mnth 
                 AND year = :yr');

    $req->bindParam(':st', $state, PDO::PARAM_STR);
    $req->bindParam(':mnth', $month, PDO::PARAM_INT);
    $req->bindParam(':yr', $year, PDO::PARAM_INT);
    $req->execute();

    $num = $req->rowCount();
    echo $num . ' results found !<br />';

    while($result = $req->fetch()) {
        $day = $result['day'];
        $date = $result['date'];
        $city = $result['city'];
        $racename = $result['racename'];
        $park = $result['park'];
        $website = $result['website'];

        echo '<br />Day : ' . $day,
             '<br />Last Name : ' . $date,
             '<br />City : ' . $city,
             '<br />Website : ' . $website . '<br />';

    }
}
?>

<form method="POST" id="filtermainpage" action="#">
    <label for="state">State : </label>

    <select name="state" id="state1">
        <option selected="selected" value="">All States</option>
        <option value="AL">Alabama</option>
        <option value="AK">Alaska</option>
        <option value="AZ">Arizona</option>
        <option value="AR">Arkansas</option>
        <option value="CA">California</option>
        <option value="CO">Colorado</option>
        <option value="CT">Connecticut</option>
        <option value="DC">D.C.</option>
        <option value="DE">Delaware</option>
        <option value="FL" >Florida</option>
        <option value="GA">Georgia</option>
        <option value="HI">Hawaii</option>
        <option value="ID">Idaho</option>
        <option value="IL">Illinois</option>
        <option value="IN">Indiana</option>
        <option value="IA">Iowa</option>
        <option value="KS">Kansas</option>
        <option value="KY">Kentucky</option>
        <option value="LA">Louisiana</option>
        <option value="ME">Maine</option>
        <option value="MD">Maryland</option>
        <option value="MA">Massachusetts</option>
        <option value="MI">Michigan</option>
        <option value="MN">Minnesota</option>
        <option value="MS">Mississippi</option>
        <option value="MO">Missouri</option>
        <option value="MT">Montana</option>
        <option value="NE">Nebraska</option>
        <option value="NV">Nevada</option>
        <option value="NH">New Hampshire</option>
        <option value="NJ">New Jersey</option>
        <option value="NM">New Mexico</option>
        <option value="NY">New York</option>
        <option value="NC">North Carolina</option>
        <option value="ND">North Dakota</option>
        <option value="OH">Ohio</option>
        <option value="OK">Oklahoma</option>
        <option value="OR">Oregon</option>
        <option value="PA">Pennsylvania</option>
        <option value="RI">Rhode Island</option>
        <option value="SC">South Carolina</option>
        <option value="SD">South Dakota</option>
        <option value="TN">Tennessee</option>
        <option value="TX">Texas</option>
        <option value="UT">Utah</option>
        <option value="VT">Vermont</option>
        <option value="VA">Virginia</option>
        <option value="WA">Washington</option>
        <option value="WV">West Virginia</option>
        <option value="WI">Wisconsin</option>
        <option value="WY">Wyoming</option>
    </select>

    <br />
    <br />

    <label for="month">Month:</label>
    <select name="month" id="month1">
        <option selected="selected" value="0">All Months</option>
        <option value="1">January</option>
        <option value="2">February</option>
        <option value="3">March</option>
        <option value="4">April</option>
        <option value="5">May</option>
        <option value="6">June</option>
        <option value="7">July</option>
        <option value="8">August</option>
        <option value="9">September</option>
        <option value="10">October</option>
        <option value="11">November</option>
        <option value="12">December</option>
    </select>

    <label for="year">Year:</label>
    <select name="year" id="year1">
        <option value="2013">2013</option>
        <option value="2012">2012</option>
        <option value="2011">2011</option>
    </select>

    <p>
        <input type="submit" name="submit" id="button" value="submit">
    </p>
</form> 
```

* * *

## 在 databaseConnection.php 文件中：

```
try {
    $pdo_options = array();
    //Optional
    $pdo_options[PDO::ATTR_ERRMODE] = PDO::ERRMODE_EXCEPTION;
    $pdo_options[PDO::MYSQL_ATTR_INIT_COMMAND] = "SET NAMES utf8";

    $db = new PDO('mysql:host='.DB_HOST.';
                         dbname=' . DB_NAME, 
                         DB_USER, 
                         DB_PASSWORD, 
                         $pdo_options);
}
catch (Exception $e) {
    die('Error : ' . $e->getMessage());
} 
```

您可以顺便将数据库标识符放在 databaseConnection.php 文件中

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-30T20:31:28.517

安全性：请不要只在您的 sql 中使用 $_POST['foo']，验证它们是否是您期望的值，因为它会使您的系统受到许多攻击。

当您提交到同一页面时，您的表单中的操作现在是可选的。

您的 if (!$dbc) trigger_error 之后还缺少一个 }，因此请在 if 条件之后添加 } 或删除 {，因为 if 内的指令只有一行，大括号是可选的。

# speech-recognition - 语音识别，录制的音频去哪了？

> ID：15722745
> 
> 赞同：0
> 
> 时间：2013-03-30T19:42:48.757
> 
> 标签：speech-recognition, speech-to-text

我正在开发一个语音识别应用程序，用户会说一个句子或任何东西，它会被转换成文本......（语音到文本的转换是通过谷歌发生的）

我的问题是，当这个人说话时，保存或记录他的声音（语音）的文件/缓冲区在哪里？（在谷歌接受并转换之前）

是否有可能获得这个文件或缓冲区？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-30T23:41:09.957

是的，对于小于 4 的版本（不知道 3）它是 on `onBufferReceived(byte[] buffer)`。在第 4 版（ICS）中，那里没有任何回报。

# sql-server - Perform COUNT on joined tables without a GROUP BY

> ID：15722746
> 
> 赞同：0
> 
> 时间：2013-03-30T19:42:51.767
> 
> 标签：sql-server, count, group-by

Is there a way for me to perform a COUNT on joined tables without having to use the GROUP BY statement? I have to insert this SQL into a legacy application which is parsing this result but can't handle the GROUP BY part.

This is what I have now (works in sql-server, but not in the other app):

```
SELECT TOP 10 au.pref_language,au.username,am.IsOpenIdAccount,am.facebookid,au.sex,au.firstname,au.middlename,au.lastname,am.email,
c.id AS objectid,c.title AS objecttitle,c.friendlyurl as objecturl,c.objecttype,am.CreateDate,c.description_nl,c.description_en,
COUNT(distinct ap.id) as totalphotos,
COUNT(distinct ar.id) as totalreviews,
COUNT(distinct fm.id) as totalfreemedia
FROM locations c
INNER JOIN aspnet_users au on au.UserId=c.userid
INNER JOIN aspnet_membership am ON am.userid=au.userid 
LEFT JOIN location_photos ap on ap.objectid=c.id
LEFT JOIN location_reviews ar on ar.objectid=c.id
LEFT JOIN freemedia fm on fm.objectid=c.id AND fm.objecttype=c.objecttype
WHERE c.title<>''
GROUP BY au.pref_language,au.username,am.IsOpenIdAccount,am.facebookid,au.sex,au.firstname,au.middlename,au.lastname,am.email,
c.id ,c.title ,c.friendlyurl ,c.objecttype,am.CreateDate,c.description_nl,c.description_en 
```

And I need something like this:

```
SELECT TOP 10 au.pref_language,au.username,am.IsOpenIdAccount,am.facebookid,au.sex,au.firstname,au.middlename,au.lastname,am.email,
c.id AS objectid,c.title AS objecttitle,c.friendlyurl as objecturl,c.objecttype,am.CreateDate,c.description_nl,c.description_en,
COUNT(distinct ap.id) as totalphotos,
COUNT(distinct ar.id) as totalreviews,
COUNT(distinct fm.id) as totalfreemedia
FROM locations c
INNER JOIN aspnet_users au on au.UserId=c.userid
INNER JOIN aspnet_membership am ON am.userid=au.userid 
LEFT JOIN location_photos ap on ap.objectid=c.id
LEFT JOIN location_reviews ar on ar.objectid=c.id
LEFT JOIN freemedia fm on fm.objectid=c.id AND fm.objecttype=c.objecttype
WHERE c.title<>'' 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-30T19:45:14.533

Can you use a view in Sql then run a Select from it?

```
CREATE VIEW [dbo].[vwMyView]
AS
    SELECT TOP 10 au.pref_language,au.username,am.IsOpenIdAccount,am.facebookid,au.sex,au.firstname,au.middlename,au.lastname,am.email,
    c.id AS objectid,c.title AS objecttitle,c.friendlyurl as objecturl,c.objecttype,am.CreateDate,c.description_nl,c.description_en,
    COUNT(distinct ap.id) as totalphotos,
    COUNT(distinct ar.id) as totalreviews,
    COUNT(distinct fm.id) as totalfreemedia
    FROM locations c
    INNER JOIN aspnet_users au on au.UserId=c.userid
    INNER JOIN aspnet_membership am ON am.userid=au.userid 
    LEFT JOIN location_photos ap on ap.objectid=c.id
    LEFT JOIN location_reviews ar on ar.objectid=c.id
    LEFT JOIN freemedia fm on fm.objectid=c.id AND fm.objecttype=c.objecttype
    WHERE c.title<>''
    GROUP BY au.pref_language,au.username,am.IsOpenIdAccount,am.facebookid,au.sex,au.firstname,au.middlename,au.lastname,am.email,
    c.id ,c.title ,c.friendlyurl ,c.objecttype,am.CreateDate,c.description_nl,c.description_en

    GO 
```

Then from your App that parses simply type:

```
 SELECT 
        pref_language,
        username,
        IsOpenIdAccount,
        facebookid,
        sex,
        firstname,
        middlename,
        lastname,
        email,
        objectid,
        objecttitle,
        objecturl,
        objecttype,
        CreateDate,
        description_nl,
        description_en,
        totalPhotos,
        totalReviews,
        totalFreeMedia
    from [dbo].vwMyView 
```

# php - 错误 101 (net::ERR_CONNECTION_RESET)：连接已在 apache 2.2 服务器上重置

> ID：15722748
> 
> 赞同：2
> 
> 时间：2013-03-30T19:42:52.480
> 
> 标签：php, mysqli, apache2.2

我正在使用`apache 2.2`。我在尝试运行它时编写了此代码，我的浏览器无法运行它，它正在显示

```
 This webpage is not available
 The connection to localhost was interrupted.
 Error 101 (net::ERR_CONNECTION_RESET): The connection was reset. 
```

以下是我的php代码：

```
<?php
error_reporting(E_STRICT | E_ALL);
include_once $_SERVER['DOCUMENT_ROOT'].'/include/db.inc.php' ;
$sql="select post_id,post_title,post_desc,post_date,course,semester,firstname,lastname FROM wbut_forum_posts left join users on post_by = email ORDER BY post_id DESC LIMIT 25";
$result = mysqli_query($link,$sql );

if (!$result)
{
    include_once "wall.html.php";
    echo'<tr><td align="center"> OOOOPPPPPSSS!!!SORRY,UNABLE TO DISPLAY LATEST 25 TOPICS</td></tr>';
    exit();
}
$allposts = array();
while ($row = mysqli_fetch_array($result))
{
    $allposts[] = array( 'p_id' => $row['post_id'],'p_title' => $row['post_title'],'p_desc' => $row['post_desc'],'p_date' => $row['post_date'],'p_course' => $row['course'],'p_semester' => $row['semester'],'p_firstname' => $row['firstname'],'p_lastname' => $row['lastname']);
}
foreach ($allposts as $posts) :
?>

<table border="0" cellpadding="0px" cellspacing="0px">
<tr>
<td align="left"> <span class="style5"><?php echo $posts[p_firstname] . " " . $posts[p_laststname] ; ?></span></td>
<?php
 $id=urlencode($posts[p_id]);
 $title=urlencode($posts[p_title]);
 $date=urlencode($posts[p_date]);
 $course=urlencode($posts[p_course]);
 $semester=urlencode($posts[p_semester]);
 $firstname=urlencode($posts[p_firstname]);
 $lastname=urlencode($posts[p_lastname]);
 ?>
 <td align="center" >
        <a href="view.html.php?id=<?php echo "$id" ?>&amp;title=<?php echo "$title" ?>&amp;date=<?php echo "$date" ?>&amp;course=<?php echo "$course" ?>&amp;semester=<?php echo "$semester" ?>&amp;firstname=<?php echo "$firstname" ?>&amp;lastname=<?php echo "$lastname" ?>&amp;" title="VIEW POST">
            VIEW THE FULL POST AND REPLY HERE
        </a>
</td>
</tr>
<tr>
    <td>&nbsp;</td>
    <td>
        <span class="style6"><?php echo $posts[p_title] ; ?></span>
    </td>
</tr>
<tr>
    <td align="right"><?php echo $posts[p_date] ; ?></td>
    <td align="center">
        <PRE>RELATED COURSE  : <span class="style7"><?php echo $posts[p_course] ; ?></span> AND RELATED SEMESTER :  <?php echo $posts[p_semester] ; ?></PRE>
    </td>
</tr>
<tr>
    <td>&nbsp;</td>
    <td><span class="style17"><?php echo $posts[p_desc] ; ?></span></td>
</tr>
</table>
<?php endforeach; ?> 
```

**错误：**

**此网页不可用 与 localhost 的连接已中断。错误 101 (net::ERR_CONNECTION_RESET)：连接已重置。** 是我的apache的问题吗？？？如果是这样，那么如何解决它..

# ruby-on-rails-3 - 从 moped::colllection 中删除更新 - NoMethodError: undefined method `update' for # 我是使用 mongodb 和 mongoid 的新手。. 这是一个轨道应用程序，它在某个 pont 上的 mongoid 2 上，后来移到 mongoid 3 我正在尝试运行迁移，其中一个具有以下内容 Assessment 问问题 问问题 2013-03-30T19:43:56.543 1256 次 This question shows research effort; it is useful and clear 2 This question does not show any research effort; it is unclear or not useful Bookmark this question. Show activity on this post. 我是使用 mongodb 和 mongoid 的新手。. 这是一个轨道应用程序，它在某个 pont 上的 mongoid 2 上，后来移到 mongoid 3 我正在尝试运行迁移，其中一个具有以下内容 Assessment.collection.update({'result_access' => {'$exist' => false}}, {'$set' => {'result_access' => 'all'}}, {:multi => true}) 我不确定如何为 mongoid 3 更新这个 首先你必须找到你的选择器，让你改写代码 从 Assessment.collection.update({'result_access' => {'$exist' => false}}, {'$set' => {'result_access' => 'all'}}, {:multi => true}) 到 Assessment.collection.find('result_access' => {'$exist' => false}).update({'$set' => {'result_access' => 'all'}, {:multi => true}) 或更笼统地说： Assessment.collection.find("yourSelector").update("thingsToUpdate") ruby-on-rails-3mongodbmongoidmoped 4 1 回答 1 This answer is useful 6 首先你必须找到你的选择器，让你改写代码 从 Assessment.collection.update({'result_access' => {'$exist' => false}}, {'$set' => {'result_access' => 'all'}}, {:multi => true}) 至 Assessment.collection.find('result_access' => {'$exist' => false}).update({'$set' => {'result_access' => 'all'}, {:multi => true}) 或更笼统地说： Assessment.collection.find("yourSelector").update("thingsToUpdate") 于 2013-04-05T07:20:41.883 回答 Related 1 excel - Excel：如何根据 2 个下拉菜单中的选择操作值 4 c - gcc 编译器中结构的大小 1 jython - 如何（过程）为/在 ANDROID 设备上运行自动化脚本（使用 sikuli） 1 .net - LINQ 查询分组 1 windows-mobile - Windows Mobile 6.x 和 CDFS 0 asp.net-mvc - 如何从 System.Web.Mvc.WebViewPage 派生基类 3 android - 如何将数据从多个数组加载到列表视图？ 2 c# - 如何创建一个使用并返回泛型类型的方法？ 1 php - 从 jsonobject 获取数据 2 plone - 如何使用 browserlayer 在 Plone 中调试 viewlet 创建 Reference php × 1429865 c/c++ × 756500 nginx × 49975 mongodb × 159057 mybatis × 3233 anaconda × 13410 pycharm × 14671 python × 1902243 vscode × 56040 docker × 110988 github × 49000 flask × 49129 ffmpeg × 24037 jmeter × 16910 matplotlib × 63493 bootstrap × 54641

> ID：15722757
> 
> 赞同：2
> 
> 时间：
> 
> 标签：ruby-on-rails-3, mongodb, mongoid, moped

我是使用 mongodb 和 mongoid 的新手。. 这是一个轨道应用程序，它在某个 pont 上的 mongoid 2 上，后来移到 mongoid 3

我正在尝试运行迁移，其中一个具有以下内容

```
Assessment.collection.update({'result_access' => {'$exist' => false}}, {'$set' =>   {'result_access' => 'all'}}, {:multi => true}) 
```

我不确定如何为 mongoid 3 更新这个

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-04-05T07:20:41.883

首先你必须找到你的选择器，让你改写代码

从

```
Assessment.collection.update({'result_access' => {'$exist' => false}}, {'$set' =>   {'result_access' => 'all'}}, {:multi => true}) 
```

至

```
Assessment.collection.find('result_access' => {'$exist' => false}).update({'$set' =>   {'result_access' => 'all'}, {:multi => true}) 
```

或更笼统地说：

```
Assessment.collection.find("yourSelector").update("thingsToUpdate") 
```

# c# - Post redirect get solution for the double submit prevention

> ID：15722758
> 
> 赞同：1
> 
> 时间：2013-03-30T19:44:00.050
> 
> 标签：c#, asp.net

I have a `register.aspx` which takes some information from user and stores it in the database. However, I cannot solve the double submit problem when user refreshes the page. Here is my `registration.aspx` file:

```
<form id="form1" runat="server">
     <asp:TextBox ID="txtUserName" runat="server"></asp:TextBox>

     <asp:Button ID="btnRegister" runat="server" Text="Button" onclick="RegisterUser" />

     <asp:Label ID="lblErrorMessage" runat="server" Text=""></asp:Label>
</form> 
```

And here is the `registration.aspx.cs` file:

```
protected void RegisterUser(object sender, EventArgs e)
{
    if (txtUserName.Text.Length < 3)
    {
        lblErrorMessage.Text = "username should be minimum 3 characters, try again.";
    }
} 
```

However, I try to test it using my browser, chrome. When I use the text "a" for the username, it goes into the `RegisterUser` function and shows the error message. But sadly, when I try to refresh the page it asks for resubmission while I was expecting to refresh without any problem:

![enter image description here](../Images/635736fe1d3a3417885f8cf79aebf784.png)

I tried using `Response.Redirect` and it didn't work either.

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-30T20:17:08.290

I tried an easy way for you using UpdatePanel and Template:

change the code in your main page like this:

```
<form id="form1" runat="server" >

  <asp:UpdatePanel runat="server"><ContentTemplate>
     <asp:TextBox ID="txtUserName" runat="server"></asp:TextBox>
     <asp:Button ID="btnRegister" runat="server" Text="Button" onclick="RegisterUser" />
     <asp:Label ID="lblErrorMessage" runat="server" Text=""></asp:Label>
     <asp:ScriptManager ID="ScriptManager1" runat="server">
     </asp:ScriptManager>
     </ContentTemplate>
  </asp:UpdatePanel>
</form> 
```

I think that will solve your problem in an easier way. Let me know if you have any problem with it.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-30T20:32:23.560

please set causesvalidation="false" in your TextBox and button control

for try below code

```
<asp:TextBox ID="txtUserName" CausesValidation="false" runat="server"></asp:TextBox>
        <asp:Button ID="btnRegister"  CausesValidation="false" runat="server" Text="Button" onclick="RegisterUser" /> 
```

# asp.net - Allow Zero DateTime mysql connector web.config Entity Framework

> ID：15722761
> 
> 赞同：2
> 
> 时间：2013-03-30T19:44:17.327
> 
> 标签：asp.net, mysql, asp.net-mvc, entity-framework, web-config

I'm getting a MySqlConnectionException when i'm trying to connect retrieve data from my DBContext class because i have a date time entry line `0000-00-00 00:00:00`.

From what i understand i have to add a `Allow Zero Datetime=true` entry in my connection string, the one bellow.

```
<add name="A4LifeEntities" connectionString="metadata=res://*/A4LifeEntities.csdl|res://*/A4LifeEntities.ssdl|res://*/A4LifeEntities.msl;provider=MySql.Data.MySqlClient;provider connection string=&quot;server=localhost;password=pass;user id=userId;port=3330;Allow Zero Datetime=true; persist security info=True;database=aLife&quot;" providerName="System.Data.EntityClient"/></connectionStrings> 
```

As you can see i have already added it, but am i doing something wrong ? Do i have to add it somewhere else in the string ? Because it's not working.

Thank you

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2013-03-31T00:01:29.407

Use `Convert Zero Datetime=true;`, it's different in that it returns DateTime.MinValue instead of a MySqlDateTime.

# java - 在java中打印异常消息

> ID：15722763
> 
> 赞同：23
> 
> 时间：2013-03-30T19:44:22.780
> 
> 标签：java, exception-handling

有没有办法在没有异常的情况下在 Java 中打印异常消息？

当我尝试以下代码时：

```
try {
    // statements
} catch (javax.script.ScriptException ex) {
    System.out.println(ex.getMessage());
} 
```

输出是：

```
Invalid JavaScript code: sun.org.mozilla.javascript.internal.EvaluatorException:
missing } after property list (<Unknown source>) in <Unknown source>; 
at line number 1 
```

有没有办法打印没有异常信息、来源和行号信息的消息。换句话说，我想在输出中打印的消息是：

```
missing } after property list 
```

* * *

## 回答 #1

> 赞同：24
> 
> 时间：2013-03-30T19:58:21.817

输出对我来说是正确的：

```
Invalid JavaScript code: sun.org.mozilla.javascript.internal.EvaluatorException: missing } after property list (<Unknown source>) in <Unknown source>; at line number 1 
```

我认为`Invalid Javascript code: ..`是异常消息的开始。

通常堆栈跟踪不会与消息一起返回：

```
try {
    throw new RuntimeException("hu?\ntrace-line1\ntrace-line2");
} catch (Exception e) {
    System.out.println(e.getMessage()); // prints "hu?"
} 
```

因此，您调用的代码可能会捕获异常并重新抛出`ScriptException`. 在这种情况下，也许`e.getCause().getMessage()`可以帮助你。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2021-10-08T11:14:59.087

> 在 Java 中，有三种方法可以打印异常信息。

***1\. java.lang.Throwable.printStackTrace() 方法***

```
e.printStackTrace(); 
```

***2.toString() 方法：***

```
catch (Exception e)
        {
            System.out.println(e.toString());
        } 
```

***3\. java.lang.Throwable.getMessage() 方法***

```
catch (Exception e)
        {
            System.out.println(e.getMessage());

        } 
```

* * *

## 回答 #3

> 赞同：-11
> 
> 时间：2013-03-30T19:52:10.920

```
try {
} catch (javax.script.ScriptException ex) {
// System.out.println(ex.getMessage());
} 
```

# javascript - 使用 JavaScript 在服务器上保存文本文件

> ID：15722765
> 
> 赞同：29
> 
> 时间：2013-03-30T19:44:31.580
> 
> 标签：javascript, jquery, ajax, text

是否可以在不使用 PHP 的情况下使用 JavaScript/jQuery 将文本保存到新的文本文件？我要保存的文本可能包含我不想转义或使用 urlencode 的 HTML 实体、JS、HTML、CSS 和 PHP 脚本！

如果只能使用 PHP 来实现，我如何将文本传递给 PHP 而无需对其进行编码？

* * *

## 回答 #1

> 赞同：47
> 
> 时间：2013-03-30T21:28:44.467

您必须有一个服务器端脚本来处理您的请求，它不能使用 javascript 来完成。

要在没有 URIencoding 或转义特殊字符的情况下将原始数据发送到 php 并将其保存为新文件，您可以使用以下方法`txt`发送 ajax 请求：`post``FormData`

JS：

```
var data = new FormData();
data.append("data" , "the_text_you_want_to_save");
var xhr = (window.XMLHttpRequest) ? new XMLHttpRequest() : new activeXObject("Microsoft.XMLHTTP");
xhr.open( 'post', '/path/to/php', true );
xhr.send(data); 
```

PHP：

```
if(!empty($_POST['data'])){
$data = $_POST['data'];
$fname = mktime() . ".txt";//generates random name

$file = fopen("upload/" .$fname, 'w');//creates new file
fwrite($file, $data);
fclose($file);
} 
```

**编辑：**

As Florian mentioned below, the XHR fallback is not required since `FormData` is not supported in older browsers ([formdata browser compatibiltiy](https://developer.mozilla.org/en-US/docs/Web/API/FormData#Browser_compatibility)), so you can declare XHR variable as:

```
var xhr = new XMLHttpRequest(); 
```

Also please note that this works only for browsers that support `FormData` such as IE +10.

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2013-03-30T19:58:52.520

仅使用 JavaScript 和 jQuery 等客户端脚本无法将内容保存到网站，但通过在 AJAX POST 请求中提交数据，您可以非常轻松地在服务器端执行另一半。

但是，我不建议将原始内容（例如脚本）如此容易地写入您的主机，因为这很容易被利用。如果您想了解更多关于 AJAX POST 请求的信息，可以阅读 jQuery API 页面：

[http://api.jquery.com/jQuery.post/](http://api.jquery.com/jQuery.post/)

如果您仍想在主机上保存原始脚本文件，请注意以下几点。如果您要处理这样的文件，您必须非常小心安全！

文件上传（如果 javascript 可以选择文件名，大多数情况下也适用于发送纯文本） [http://www.developershome.com/wap/wapUpload/wap_upload.asp?page=security](http://www.developershome.com/wap/wapUpload/wap_upload.asp?page=security) [https://www.owasp .org/index.php/Unrestricted_File_Upload](https://www.owasp.org/index.php/Unrestricted_File_Upload)

# jquery - CSS3/Jquery auto rotate animation

> ID：15722767
> 
> 赞同：0
> 
> 时间：2013-03-30T19:44:54.190
> 
> 标签：jquery, css, animation

here is JS fiddle link: [http://jsfiddle.net/asif097/Vq8bp/](http://jsfiddle.net/asif097/Vq8bp/)

and CSS:

```
.hanging-div {
    transition:all 1s;
    -moz-transition:all 1s;
    -webkit-transition:all 1s;
    -o-transition:all 1s;
    transform-origin:0% 0%;
    -moz-transform-origin:0% 0%;
    -webkit-transform-origin:0% 0%;
    -ms-transform-origin:0% 0%;
    -o-transform-origin:0% 0%;
}

.hanging-div:hover {
    transform:rotate(30deg);
    -ms-transform:rotate(30deg);
    -moz-transform:rotate(30deg);
    -webkit-transform:rotate(30deg);
    -o-transform:rotate(30deg);
} 
```

The div animates while hover and hover out. I want it to keep it animated continuously (a little bit similar to pendulum). How can I achieve that?

**N.B.** Is there a way to achieve the same animation with jquery?

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-30T20:26:09.423

Why not simply use the CSS `@keyframes` to create an animation with an infinite `animation-iteration-count`:

```
@-moz-keyframes pendulum {
    50% {
        -moz-transform:rotate(30deg);
    }
}

@-ms-keyframes pendulum {
    50% {
        -ms-transform:rotate(30deg);
    }
}

@-o-keyframes pendulum {
    50% {
        -o-transform:rotate(30deg);
    }
}

@-webkit-keyframes pendulum {
    50% {
        -webkit-transform:rotate(30deg);
    }
}

@keyframes pendulum {
    50% {
        transform:rotate(30deg);
    }
}

.hanging-div {
    font-weight:600;
    text-align:center;
    color:#fff;
    margin:0 auto;
    display:block;
    width:200px;
    padding:50px 0;
    background:#f00;
    -moz-animation: pendulum;
    -moz-animation-iteration-count: infinite;
    -moz-animation-duration: 2s;
    -moz-transform-origin: top left;
    -ms-animation: pendulum;
    -ms-animation-iteration-count: infinite;
    -ms-animation-duration: 2s;
    -ms-transform-origin: top left;
    -o-animation: pendulum;
    -o-animation-iteration-count: infinite;
    -o-animation-duration: 2s;
    -o-transform-origin: top left;
    -webkit-animation: pendulum;
    -webkit-animation-iteration-count: infinite;
    -webkit-animation-duration: 2s;
    -webkit-transform-origin: top left;
    animation: pendulum;
    animation-iteration-count: infinite;
    animation-duration: 2s;
    transform-origin: top left;
} 
```

[JS Fiddle demo](http://jsfiddle.net/davidThomas/Vq8bp/4/).

# ant - Gradle Ant 无法添加任务 ':myproject:test' 作为具有该名称的任务已存在

> ID：15722768
> 
> 赞同：3
> 
> 时间：2013-03-30T19:45:04.360
> 
> 标签：ant, gradle

我正在尝试通过使用 Gradle 执行 Ant 构建来对我们的构建进行 Gradle 化。我正在使用 java 插件，所以我可以设置源/目标，我正在使用 ant.importBuild 'build.xml'。当我执行 Gradle 时，我得到了上面的错误。我知道 Ant 和 Gradle 都有这些共同的目标/任务：clean、jar、javadoc、test。一种选择是更改 build.xml 中的 Ant 目标名称，但我希望有一种更简单的方法，因为我有很多项目和构建文件。我找到了这个“包装器”解决方案（[http://issues.gradle.org/browse/GRADLE-771](http://issues.gradle.org/browse/GRADLE-771)），但这对我不起作用。我该如何解决这个问题？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-31T13:18:28.597

您的选择是：

*   不要将该插件应用于导入 Ant 构建的同一个项目。
*   重命名 Ant 构建脚本中的冲突目标。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2020-10-15T17:26:56.870

您可以重命名所有 ant 目标：

```
ant.importBuild('build.xml') { String oldTargetName ->
    return 'ant_' + oldTargetName
} 
```

# openmpi - Getting OpenMPI to work on Mac:

> ID：15722776
> 
> 赞同：1
> 
> 时间：2013-03-30T19:45:42.603
> 
> 标签：openmpi

I have installed OpenMPI via MacPorts on my OSX system (running Version 10.8.3). I found the C wrapper compiler in /opt/local/lib/openmpi/bin/mpicc, and

```
/opt/local/lib/openmpi/bin/mpicc test.c 
```

compiles normally. Following the ideas in [this](https://stackoverflow.com/questions/13909432/installed-openmpi-library-but-cannot-use-mpicc-command-in-linux) post, I issued the following command

```
PATH=$PATH:~/opt/local/lib/openmpi/bin 
```

which I thought would allow me to compile with

```
mpicc test.c 
```

However, this gives the following error:

```
-bash: mpicc: command not found 
```

What have I done wrong?

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-30T20:33:41.683

Just kidding: I should've used

```
PATH=$PATH:/opt/local/lib/openmpi/bin 
```

rather than

```
PATH=$PATH:~/opt/local/lib/openmpi/bin 
```

# ios - ipad 1 Crash - 我的应用程序在某处不好

> ID：15722777
> 
> 赞同：1
> 
> 时间：2013-03-30T19:45:48.940
> 
> 标签：ios, ipad, crash, imagenamed

我制作了一个应用程序，但在 ipad 1 上它在最后部分崩溃。在 ipad-higher 上它仍然可以工作，但我仍然认为我做错了什么，我真的需要让一些东西更经济地工作。但它是什么？

在最后部分，这一切都发生了。在此之前，几个屏幕相互叠加，在模拟器中，当您返回时，它们都被关闭。但是在 ipad 1 上，你甚至不会到达结尾部分的末尾。我将尝试解释发生了什么以及我对正在发生的事情的几个想法。

您可以在屏幕上滑动，视网膜图像（大图像）与可以选择的四个角交换，每个角都有不同的图像背景。有六个不同的场景，所以有 6x4 + 6x1 for-normal-0-situation，25 个大视网膜图像。只有 5 个帧在彼此之上工作（4 个角和 1 个背景），但我将不活动的东西设置为 nil 并使用 imageNamed 加载活动图像。它在模拟器上运行良好，但在 ipad 1 上崩溃，没有低内存警告或类似情况。

我研究了改进：a) 自动释放池 b) imageNamed 被 imageContentsOfFile 取代。自动释放池没有任何作用。imageNamed，我无法让 imageContentsOfFile 工作，所以我跳过了该操作。

任何关于什么是错误的想法以及可以应用什么样的想法来使其更经济地工作的任何想法，因为它最终在某个地方要求太多了。

```
- (void) touchesBegan:(NSSet *)touches withEvent:(UIEvent *)event
{
CGPoint tappedPt = [[touches anyObject] locationInView:self.view];

NSArray *subviews = [[NSArray alloc]init];

subviews = [self.view subviews];

// Return if there are no subviews
if ([subviews count] == 0) return;

for (UIView *subview in subviews) {
    if ([subview pointInside:[self.view convertPoint:tappedPt toView:subview]    withEvent:event]){

        [self checkAndChange:subview];

        [self modifyChoice:subview];
    }
}
}

- (void) touchesMoved:(NSSet *)touches withEvent:(UIEvent *)event
{
// Get the subviews of the view

CGPoint tappedPt = [[touches anyObject] locationInView:self.view];

NSArray *subviews = [[NSArray alloc]init];

subviews = [self.view subviews];

// Return if there are no subviews
if ([subviews count] == 0) return;

for (UIView *subview in subviews) {

    if ([subview pointInside:[self.view convertPoint:tappedPt toView:subview] withEvent:event]){

        [self checkAndChange:subview];

        [self modifyChoice:subview];

    }

}

}

-(void) modifyChoice:(UIView *)subview
{
if(subview==area1LinksBoven){[gekozenExpressieBijDimensie replaceObjectAtIndex:dimensie-1 withObject:[NSNumber numberWithInteger:1]];}
if(subview==area2RechtsBoven){[gekozenExpressieBijDimensie replaceObjectAtIndex:dimensie-1 withObject:[NSNumber numberWithInteger:2]];}
if(subview==area3RechtsOnder){[gekozenExpressieBijDimensie replaceObjectAtIndex:dimensie-1 withObject:[NSNumber numberWithInteger:3]];}
if(subview==area4LinksOnder){[gekozenExpressieBijDimensie replaceObjectAtIndex:dimensie-1 withObject:[NSNumber numberWithInteger:4]];}

if(maxChoice<dimensie){maxChoice=dimensie;
    if(maxChoice==1){headerGevuld.image = [UIImage imageNamed:@"TOP1.png"];}
    if(maxChoice==2){headerGevuld.image = [UIImage imageNamed:@"TOP2.png"];}
    if(maxChoice==3){headerGevuld.image = [UIImage imageNamed:@"TOP3.png"];}
    if(maxChoice==4){headerGevuld.image = [UIImage imageNamed:@"TOP4.png"];}
    if(maxChoice==5){headerGevuld.image = [UIImage imageNamed:@"TOP5.png"];}
    if(maxChoice==6){headerGevuld.image = [UIImage imageNamed:@"TOP6.png"];}
}
}

-(void) checkAndChange:(UIView *)subview{

if(subview==area1LinksBoven){
    area1LinksBoven.image = [UIImage imageNamed:@"SELECTION1.png"];
    area2RechtsBoven.image = nil;
    area3RechtsOnder.image = nil;
    area4LinksOnder.image = nil;
    footer.image = [UIImage imageNamed:@"FOOT1.png"];
    @autoreleasepool {
    if(dimensie==1){
        filmAchtergrond0.image = [UIImage imageNamed:@"1PassiefActiefOntspanning.jpg"];}
    if(dimensie==2){
        filmAchtergrond0.image = [UIImage imageNamed:@"1MakkelijkMoeilijkMaster.jpg"];}
    if(dimensie==3){
        filmAchtergrond0.image = [UIImage imageNamed:@"1VeiligGevaarlijkGeborgenheid.jpg"];}
    if(dimensie==4){filmAchtergrond0.image = [UIImage imageNamed:@"1NormaalBijzonderGeaard.jpg"];}
    if(dimensie==5){filmAchtergrond0.image = [UIImage imageNamed:@"1AlleenSamenUniek.jpg"];}
    if(dimensie==6){filmAchtergrond0.image = [UIImage imageNamed:@"1OrdeChaosDuidelijk.jpg"];}
    }
    [arrowRight setImage:[UIImage imageNamed:@"ARROW_RIGHT_ACTIVE.png"] forState:UIControlStateNormal];
}
if(subview==area2RechtsBoven){
    area1LinksBoven.image = nil;
    area2RechtsBoven.image = [UIImage imageNamed:@"SELECTION2.png"];
    area3RechtsOnder.image = nil;
    area4LinksOnder.image = nil;
    footer.image = [UIImage imageNamed:@"FOOT2.png"];
    @autoreleasepool {        
    if(dimensie==1){filmAchtergrond0.image = [UIImage imageNamed:@"2PassiefActiefEnergiek.jpg"];}
    if(dimensie==2){
        filmAchtergrond0.image = [UIImage imageNamed:@"2MakkelijkMoeilijkUitdagend.jpg"];}
    if(dimensie==3){
        filmAchtergrond0.image = [UIImage imageNamed:@"2VeiligGevaarlijkSpannend.jpg"];}
    if(dimensie==4){filmAchtergrond0.image = [UIImage imageNamed:@"2NormaalBijzonderWow.jpg"];}
    if(dimensie==5){filmAchtergrond0.image = [UIImage imageNamed:@"2AlleenSamenGezellig.jpg"];}
    if(dimensie==6){filmAchtergrond0.image = [UIImage imageNamed:@"2OrdeChaosImproviseren.jpg"];}
    }
    [arrowRight setImage:[UIImage imageNamed:@"ARROW_RIGHT_ACTIVE.png"] forState:UIControlStateNormal];
}
if(subview==area3RechtsOnder){
    area1LinksBoven.image = nil;
    area2RechtsBoven.image = nil;
    area3RechtsOnder.image = [UIImage imageNamed:@"SELECTION3.png"];
    area4LinksOnder.image = nil;
    footer.image = [UIImage imageNamed:@"FOOT3.png"];
    @autoreleasepool {
    if(dimensie==1){
        filmAchtergrond0.image = [UIImage imageNamed:@"3PassiefActiefUitputting.jpg"];}
    if(dimensie==2){
        filmAchtergrond0.image = [UIImage imageNamed:@"3MakkelijkMoeilijkFrustrerend.jpg"];}
    if(dimensie==3){
        filmAchtergrond0.image = [UIImage imageNamed:@"3VeiligGevaarlijkGevaarlijk.jpg"];}
    if(dimensie==4){
        filmAchtergrond0.image = [UIImage imageNamed:@"3NormaalBijzonderOnbegrijjpelijk.jpg"];}
    if(dimensie==5){filmAchtergrond0.image = [UIImage imageNamed:@"3AlleenSamenGroepsdruk.jpg"];}
    if(dimensie==6){filmAchtergrond0.image = [UIImage imageNamed:@"3OrdeChaosRommeltje.jpg"];}
    }
    [arrowRight setImage:[UIImage imageNamed:@"ARROW_RIGHT_ACTIVE.png"] forState:UIControlStateNormal];
}
if(subview==area4LinksOnder){
    area1LinksBoven.image = nil;
    area2RechtsBoven.image = nil;
    area3RechtsOnder.image = nil;
    area4LinksOnder.image = [UIImage imageNamed:@"SELECTION4.png"];
    footer.image = [UIImage imageNamed:@"FOOT4.png"];
    @autoreleasepool {
    if(dimensie==1){filmAchtergrond0.image = [UIImage imageNamed:@"4PassiefActiefApathie.jpg"];}
    if(dimensie==2){filmAchtergrond0.image = [UIImage imageNamed:@"4MakkelijkMoeilijkSaai.jpg"];}
    if(dimensie==3){
        filmAchtergrond0.image = [UIImage imageNamed:@"4VeiligGevaarlijkBeklemmend.jpg"];}
    if(dimensie==4){filmAchtergrond0.image = [UIImage imageNamed:@"4NormaalBijzonderSleur.jpg"];}
    if(dimensie==5){filmAchtergrond0.image = [UIImage imageNamed:@"4AlleenSamenEenzaam.jpg"];}
    if(dimensie==6){filmAchtergrond0.image = [UIImage imageNamed:@"4OrdeChaosRigide.jpg"];}
    }
    [arrowRight setImage:[UIImage imageNamed:@"ARROW_RIGHT_ACTIVE.png"] forState:UIControlStateNormal];
}

if(dimensie==1){headerPositie.image = [UIImage imageNamed:@"OUT1.png"];}
if(dimensie==2){headerPositie.image = [UIImage imageNamed:@"OUT2.png"];}
if(dimensie==3){headerPositie.image = [UIImage imageNamed:@"OUT3.png"];}
if(dimensie==4){headerPositie.image = [UIImage imageNamed:@"OUT4.png"];}
if(dimensie==5){headerPositie.image = [UIImage imageNamed:@"OUT5.png"];}
if(dimensie==6){headerPositie.image = [UIImage imageNamed:@"OUT6.png"];}
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-30T21:28:36.197

使用 UIImage imageWithContentsOfFile 加载图像：

```
NSString *filePath = [[NSBundle mainBundle] pathForResource:@"fileName" ofType:@"fileExtension"]; 
UIImage *img = [UIImage imageWithContentsOfFile:filePath]; 
```

`imageNamed`在这里查看和之间的区别：http `imageWithContentsOfFile`:
[//developer.apple.com/library/ios/#documentation/uikit/reference/UIImage_Class/Reference/Reference.html](http://developer.apple.com/library/ios/#documentation/uikit/reference/UIImage_Class/Reference/Reference.html)

# bitwise-operators - 在 LINQ 查询中使用按位运算

> ID：15722780
> 
> 赞同：5
> 
> 时间：2013-03-30T19:46:17.963
> 
> 标签：bitwise-operators

鉴于以下枚举

```
[Flags]
public enum Trans{
Purchase =1,
Sale=2,
All  = Purchase | Sale
}; 
```

和下面的课

```
public class Person
{
public string Name;
public Trans TransType;
} 
```

以及以下数据结构

```
var people = new List<Person>();
people.Add(new Person {Name="James", TransType = Trans.Purchase});
people.Add(new Person {Name="Nancy", TransType = Trans.Sale});
people.Add(new Person {Name="Heather", TransType = Trans.All});
people.Add(new Person {Name="Duane", TransType = Trans.All}); 
```

我正在尝试查询满足某些条件的人的列表。

让所有人使用 Trans.Purchase (James, Heather & Duane)

```
var query = from p in people where ( (p.TransType & Trans.Purchase) == Trans.Purchase) select p; 
```

通过 Trans.Sale 吸引所有人（南希、希瑟和杜安）

```
var query = from p in people where ( (p.TransType & Trans.Sale) == Trans.Sale) select p; 
```

我需要在 LINQ 查询的 where 子句中指定什么以返回带有**Trans.Purchase**、Trans.Sale**或两者**（即 Trans.All）的每个人？（詹姆斯。南希，希瑟和杜安）

**编辑** 一些上下文 - TransType 存储在数据库中，并且正在尝试编写用户指定 TransType 的屏幕，并且 SQL 查询提取上述数据

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2013-03-30T19:56:23.613

您可以使用此查询：

```
var query = from p in people 
            where (p.TransType.HasFlag(Trans.Purchase) || p.TransType.HasFlag(Trans.Sale)) 
            select p; 
```

The query could also be written this way:

```
var query = from p in people 
            where ((p.TransType & Trans.All) > 0) 
            select p; 
```

# java - Oracle current_date or sysdate without hours, minutes, seconds

> ID：15722785
> 
> 赞同：16
> 
> 时间：2013-03-30T19:46:34.370
> 
> 标签：java, sql, oracle

Is there any way to get rid of the time of day when using `current_date` or `sysdate`. I'm trying to only the store the date as `YYYY-MM-DD` , but current_date is giving me `YYYY-MM-DD HH:MM:SS:MS`

Or when comparing the dates, it only compares the date and not the time would be just as good. Any help would be awesome, thanks.

* * *

## 回答 #1

> 赞同：40
> 
> 时间：2013-03-30T19:55:46.793

Maybe you should try

```
trunc(sysdate) 
```

function.

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-30T20:04:13.707

Rusty answered the part of your question regarding stripping the time portion. The part about incorporating the time when comparing dates is often done like this.

```
where YourDateField >= StartDate
and YourDateField < TheDayAfterEndDate 
```

If you want to search on a specific date, StartDate and EndDate would be the same.

# android - Android 小部件 - 重置屏幕方向更改

> ID：15722786
> 
> 赞同：0
> 
> 时间：2013-03-30T19:46:35.730
> 
> 标签：android, android-widget, widget

我在屏幕上有一个小部件，单击小部件的按钮启用/禁用广播接收器......但是当我稍微转动手机时......小部件上的所有值都会重置并向用户提供错误信息......我尝试了大部分防止这种情况的事情如下：

1.  在清单中添加了**android:configChanges="orientation|screenSize"**

2.  在 mainavtivity 中添加了这个方法

    @Override public void onConfigurationChanged(Configuration newConfig) { super.onConfigurationChanged(newConfig); setContentView(R.layout.widget_layout); }

3.  我也看到了使用 onSaveInstanceState 和所有的建议，但是我无法从远程视图方法从我的小部件中获取 textview 数据来保存它..任何其他方式

---- 这是代码 ----------

在清单...

```
<receiver android:name="MyWidgetProvider"  >
            <intent-filter >
                <action android:name="android.appwidget.action.APPWIDGET_UPDATE" />
                <action android:name="com.makelifesimple.autopickmobiletracker.MyWidgetProvider.ACTION_WIDGET_ACTIVATE"/>
                <action android:name="com.makelifesimple.autopickmobiletracker.MyWidgetProvider.ACTION_WIDGET_DEACTIVATE"/>

           </intent-filter>

            <meta-data
                android:name="android.appwidget.provider"
                android:resource="@xml/widget_info" />
        </receiver>

        <activity
            android:name="com.makelifesimple.autopickmobiletracker.MainActivity"
            android:configChanges="orientation|screenSize"
            android:label="@string/app_name" >
            <intent-filter>
                <action android:name="android.intent.action.MAIN" />

                <category android:name="android.intent.category.LAUNCHER" />
            </intent-filter>
        </activity> 
```

--- 在 MyWidgetProvider 中 ---

```
public class MyWidgetProvider extends AppWidgetProvider {

    public static String ACTION_WIDGET_ACTIVATE = "ActivatePickup";
    public static String ACTION_WIDGET_DEACTIVATE = "DeactivatePickup";

    RemoteViews remoteViews;
  @Override
  public void onUpdate(Context context, AppWidgetManager appWidgetManager,int[] appWidgetIds) {

        Toast.makeText(context, "in onupdate", Toast.LENGTH_SHORT).show();

        remoteViews = new RemoteViews(context.getPackageName(), R.layout.widget_layout);

        Intent active = new Intent(context, MyWidgetProvider.class);
        active.setAction(ACTION_WIDGET_ACTIVATE);
        PendingIntent actionPendingIntent = PendingIntent.getBroadcast(context, 0, active, 0);
        remoteViews.setOnClickPendingIntent(R.id.button1, actionPendingIntent);

        active = new Intent(context, MyWidgetProvider.class);
        active.setAction(ACTION_WIDGET_DEACTIVATE);
        actionPendingIntent = PendingIntent.getBroadcast(context, 0, active, 0);
        remoteViews.setOnClickPendingIntent(R.id.button2, actionPendingIntent);

        appWidgetManager.updateAppWidget(appWidgetIds, remoteViews);

  }  

  @Override
  public void onEnabled(Context context){
      Toast.makeText(context, "in enables", Toast.LENGTH_SHORT).show();
      context.startService(new Intent(context, MyWidgetProvider.class));
  }

  @Override
  public void onDisabled(Context context){
      Toast.makeText(context, "in disable", Toast.LENGTH_SHORT).show();
      context.stopService(new Intent(context, MyWidgetProvider.class));
  }

  @Override
  public void onReceive(Context context, Intent intent) {
      Toast.makeText(context, "in onRecive", Toast.LENGTH_SHORT).show();
      RemoteViews remoteViews = new RemoteViews(context.getPackageName(), R.layout.widget_layout);
     if (intent.getAction().equals(ACTION_WIDGET_ACTIVATE)) {

          ComponentName receiver = new ComponentName(context, PhoneCallReceiver.class);
          PackageManager pm = context.getPackageManager();
          pm.setComponentEnabledSetting(receiver,PackageManager.COMPONENT_ENABLED_STATE_ENABLED,PackageManager.DONT_KILL_APP);
          //remoteViews.setTextViewText(R.id.button1,"ACTIVATED");
          remoteViews.setTextViewText(R.id.textView2,"ACTIVE");

      } else if (intent.getAction().equals(ACTION_WIDGET_DEACTIVATE)) {

          ComponentName receiver = new ComponentName(context, PhoneCallReceiver.class);
          PackageManager pm = context.getPackageManager();
          pm.setComponentEnabledSetting(receiver,PackageManager.COMPONENT_ENABLED_STATE_DISABLED,PackageManager.DONT_KILL_APP);

          remoteViews.setTextViewText(R.id.textView2,"INACTIVE");

          Intent headSetUnPluggedintent = new Intent(Intent.ACTION_HEADSET_PLUG);
          headSetUnPluggedintent.addFlags(Intent.FLAG_RECEIVER_REGISTERED_ONLY);
          headSetUnPluggedintent.putExtra("state", 0); // 0 = unplugged  1 = Headset with microphone 2 = Headset without microphone
          headSetUnPluggedintent.putExtra("name", "Headset");
          context.sendOrderedBroadcast(headSetUnPluggedintent, null);

      } 

        Intent active = new Intent(context, MyWidgetProvider.class);
        active.setAction(ACTION_WIDGET_ACTIVATE);
        PendingIntent actionPendingIntent = PendingIntent.getBroadcast(context, 0, active, 0);
        remoteViews.setOnClickPendingIntent(R.id.button1, actionPendingIntent);

        active = new Intent(context, MyWidgetProvider.class);
        active.setAction(ACTION_WIDGET_DEACTIVATE);
        actionPendingIntent = PendingIntent.getBroadcast(context, 0, active, 0);
        remoteViews.setOnClickPendingIntent(R.id.button2, actionPendingIntent);

      ComponentName thisWidget = new ComponentName( context, MyWidgetProvider.class );
      AppWidgetManager.getInstance( context ).updateAppWidget(thisWidget, remoteViews );

  }

} 
```

我在这里想念什么......请帮助

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-31T18:57:34.713

依靠`onUpdate`小部件提供程序来做更多的事情而不是捕捉小部件的创建和删除是非常冒险的。其他一切都应该从其他地方进行管理，通常是服务或线程，从`onUpdate`.

然后，您可以捕获方向更改（通过各种方法，无论是来自触发服务或其他线程的活动还是广播接收器），这将需要重做您在`onUpdate`.

其他要看的地方：

*   一个很好的教程在：[http](http://www.vogella.com/articles/AndroidWidgets/article.html) : //www.vogella.com/articles/AndroidWidgets/article.html，我只会在该教程中狡辩一点：通常建议不要使用 updatePeriod。
*   [谁（以及如何）创建 AppWidgetProvider 的实例](https://stackoverflow.com/questions/15665491/who-and-how-create-an-instance-of-appwidgetprovider/15667202#15667202)有更多细节？.
*   关于在一个应用程序中处理服务、活动和小部件的一些想法在[由 AlarmManager 重新创建的 Service 中](https://stackoverflow.com/questions/15435117/service-being-re-created-by-alarmmanager/15691054#15691054)。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-09-01T21:22:19.080

如在此处发布：[在小部件上的方向更改按钮没有响应后](https://stackoverflow.com/questions/4574054/after-orientation-change-buttons-on-a-widget-are-not-responding)，您可以通过在每次更新时应用所有小部件更改来避免这种情况，包括按钮单击处理程序。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-07-08T23:50:22.117

这段代码有几个错误。

首先，您的`onEnabled`和`onDisabled`方法尝试将其`AppWidgetProvider`视为服务。它不是：它是 a `BroadcastReceiver`，因此这些调用将失败，可能会终止您的应用程序。

然而，这不会发生。您在`onReceive`没有调用该`super`方法的情况下进行了覆盖，因此根本不会调用任何其他方法。

在尝试执行其他任何操作之前修复这些错误。您的`onEnabled`and`onDisabled`方法应该是空的，并且您`onReceive`应该如下所示，没有您现在拥有的重复的小部件更新代码。

```
if (ACTION_WIDGET_ACTIVATE.equals(intent.getAction()) {
    ...
} else if (ACTION_WIDGET_DEACTIVATE.equals(intent.getAction()) {
    ...
} else {
    super.onReceive(context, intent);
} 
```

* * *

## 回答 #4

> 赞同：-2
> 
> 时间：2013-03-30T20:55:52.730

对于 AppWidgets，实现`onUpdate`重绘小部件的内容是必不可少的。

# android - android.view.InflateException: Binary XML file line #7: Error inflating class fragment

> ID：15722787
> 
> 赞同：9
> 
> 时间：2013-03-30T19:46:40.837
> 
> 标签：android, android-fragments

我知道类似的问题已经得到解答，但我似乎已经完成了教程建议并阅读了其他帖子的内容，但我仍然收到 Inflator 错误。不知道我做错了什么。请检查代码。非常感谢。

编辑：我在一个活动中有两个片段。我在一个片段中有一个按钮，在另一个片段中有一个文本视图。我试图了解片段是如何工作的，所以我在阅读文档后自己编写了这段代码。当按钮在一个片段中被触发时，它会向活动中的另一个片段发送一个值。我无法让片段膨胀

**MainActivity.java**

```
 import com.transport.mbtalocpro.PredictedTimeFragment.ButtonClickListener;
        import android.os.Bundle;
        import android.support.v4.app.FragmentActivity;

        public class MainActivity extends FragmentActivity implements ButtonClickListener {

            @Override
            protected void onCreate(Bundle savedInstanceState) {
                super.onCreate(savedInstanceState);
                setContentView(R.layout.activity_main);
            }

            @Override
            public void sendCounter(int count) {
                TestFrag testF = (TestFrag) getSupportFragmentManager().findFragmentById(R.id.bottomHalf);
                if(testF != null) testF.setCounter(String.valueOf(count));

            }

        } 
```

**PredictedTimeFragment.java**

```
 import android.app.Activity;
            import android.os.Bundle;
            import android.support.v4.app.Fragment;
            import android.view.InflateException;
            import android.view.LayoutInflater;
            import android.view.View;
            import android.view.View.OnClickListener;
            import android.view.ViewGroup;
            import android.widget.Button;

            public class PredictedTimeFragment extends Fragment {

            ButtonClickListener bListener;

            public interface ButtonClickListener {
                public void sendCounter(int count);
            }

            public View onCreateView(LayoutInflater inflater, ViewGroup container, Bundle savedInstanceState) {
                super.onCreateView(inflater, container, savedInstanceState);
                try {
                    View view = inflater.inflate(R.layout.prediction_time, container, false);
                    Button button = (Button) view.findViewById(R.id.test);
                    button.setOnClickListener(new OnClickListener() {

                        @Override
                        public void onClick(View v) {
                            test(v);

                        }
                    });
                } catch(InflateException e) {
                    e.printStackTrace();
                    System.out.println("Predicted Time Fragment");
                }
                return super.onCreateView(inflater, container, savedInstanceState);
            }

            public void onAttach(Activity activity) {
                  super.onAttach(activity);
                  try {
                    bListener = (ButtonClickListener) activity;
                  } catch (ClassCastException e) {
                     System.out.println("must implemenet Listener");
                  }
                }

            public void test(View view) {
                bListener.sendCounter(23);
            }

        } 
```

**TestFrag.java**

```
 import android.os.Bundle;
        import android.support.v4.app.Fragment;
        import android.view.InflateException;
        import android.view.LayoutInflater;
        import android.view.View;
        import android.view.ViewGroup;
        import android.widget.TextView;

        public class TestFrag extends Fragment {

            @Override
            public View onCreateView(LayoutInflater inflator, ViewGroup container, Bundle savedInstanceState) {
                super.onCreateView(inflator, container, savedInstanceState);
                try {
                    View view = inflator.inflate(R.layout.test_frag, container, false);
                } catch(InflateException e) {
                    e.printStackTrace();
                    System.out.println("Test Fragment");
                }
                return super.onCreateView(inflator, container, savedInstanceState);
            }

            public void setCounter(String textS) {
                TextView text = (TextView) getView().findViewById(R.id.test1);
                text.setText((String) textS);
            }
        } 
```

**activity_main.xml**

```
 <?xml version="1.0" encoding="utf-8"?>
        <LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
            xmlns:tools="http://schemas.android.com/tools"
            android:layout_width="match_parent"
            android:layout_height="match_parent"
            android:orientation="vertical">

            <fragment 
                android:id="@+id/topHalf"
                android:layout_width="fill_parent"
                android:layout_height="0dp"
                android:layout_weight="0.5"
                android:name="com.transport.mbtalocpro.PredictedTimeFragment"/>

            <fragment
                android:id="@+id/bottomHalf"        
                android:layout_width="fill_parent"        
                android:layout_height="0dp"
                android:layout_weight="0.5"
                android:name ="com.transport.mbtalocpro.TestFrag"/>

        </LinearLayout> 
```

**预测时间.xml**

```
 <?xml version="1.0" encoding="utf-8"?>
        <LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
            android:layout_width="match_parent"
            android:layout_height="match_parent"
            android:orientation="vertical" >

            <Button 
                android:id="@+id/test"
                android:text="Test"
                android:layout_width="fill_parent"
                android:layout_height="30dp"
                />

        </LinearLayout> 
```

**test_frag.xml**

```
 <?xml version="1.0" encoding="utf-8"?>
        <LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
            android:layout_width="match_parent"
            android:layout_height="match_parent"
            android:orientation="vertical" >

            <TextView 
                android:id="@+id/test1"
                android:layout_width="fill_parent"
                android:layout_height="40dp"/>

        </LinearLayout> 
```

我也在尝试支持预蜂蜜梳版本，我想我正在导入所有支持库。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-11-11T20:54:34.447

删除您的导入语句：

```
import android.support.v4.app.FragmentActivity; 
```

并使用弹出的导入建议再次导入。我不知道为什么，但它总是对我有用。

```
import android.support.v4.app.FragmentActivity; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-07-21T23:07:08.957

在`onCreateView`回调中，您必须返回`view`您膨胀的 . 这样系统就知道`View`要绘制哪个。否则，如果你只是`super.onCreateView(...);`这样返回，将不会出现任何 UI。

尝试这个：

```
public View onCreateView(LayoutInflater inflater,
                         ViewGroup container,
                         Bundle savedInstanceState) {
    super.onCreateView(inflater, container, savedInstanceState);
    try {
        View view = inflater.inflate(R.layout.prediction_time, container, false);
        Button button = (Button) view.findViewById(R.id.test);
        button.setOnClickListener(new OnClickListener() {

            @Override
            public void onClick(View v) {
                test(v);
            }
        });
    } catch(InflateException e) {
        e.printStackTrace();
        System.out.println("Predicted Time Fragment");
    }
    return view;
} 
```

相应地更改另一个的返回值`Fragment`。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2015-05-29T12:00:52.250

要修复错误：

在清单中：

```
<application
        android:largeHeap="true" 
```

在 .xml 文件中，您必须删除以下代码：

```
android:src="@drawable..
android:background="@drawable... 
```

因为错误是内存不足错误

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-30T20:13:32.910

尝试用 android.support.v4.app.Fragment 替换 xml 中的片段

编辑：当您在 onCreateView 中完成视图时，也尝试调用 super ，即只调用一次。在开始时删除对超级的调用，看看是否有帮助

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2016-06-17T02:28:52.430

更改您的布局小部件 ID，它适用于我。

# php - Set tag selected value in PHP What would be the best way to set tag selected value? <select id="attr_field_10" name="config_eph_payment_type"><option value="5">First</option> <option value="1">Second</option> < ID：15722791 赞同：-1 时间：2013-03-30T19:47:18.950 标签：php, html 回答 #1 赞同：4 时间：2013-03-30T19:49:38.317 像这样的东西应该工作： $options = array( 5 => "First", 1 => "Second", ... 7 => "Sixth" ); echo "<select id=\"attr_field_10\" name=\"config_eph_payment_type\">"; foreach ($options as $k => $v) { echo "<option value=\"$k\""; if ($k == $config_eph_payment_type) echo " selected"; echo ">$v</option>"; } echo "</select>"; 我们基本上所做的是将选项存储到关联数组中。然后，我们循环遍历它并继续检查 value 是否等于 variable $config_eph_payment_type。 回答 #2 赞同：0 时间：2013-03-30T19:50:11.677 <option value="5"<?php if ($config_eph_payment_type == 5) print ' selected="selected"'; ?>>First</option> 这是最简单的方法。您也可以将 if 放在文件的开头，然后定义一个变量，这将使 HTML 代码更具可读性 <?php //at beginning if ($config_eph_payment_type==5) $fiveSelected = ' selected="selected"'; else $fiveSelected = ''; ?> 在你的代码中首先</select>

# asp.net - 'Image1' 未声明。由于权限级别错误，它可能无法访问

> ID：15722792
> 
> 赞同：1
> 
> 时间：2013-03-30T19:47:20.593
> 
> 标签：asp.net, vb.net, tsql, ms-access, ado.net

我有一个评论框，其中有一个看起来像这样的模板字段..

```
<asp:GridView ID="GridView2" runat="server" AutoGenerateColumns="False" DataSourceID="CommentsDataSource" Height="167px" Width="325px">
    <Columns>
        <asp:TemplateField HeaderText="Comments">
            <ItemTemplate>
                <div style="background-color:Silver">
                    <div class="avatar-frame">
                        <asp:Image ID="ProfilePic" runat="server"/>
                    </div>
                    <h1><%# Eval("TagLine")%></h1>
                    <h2><%# Eval("IfNonMemberUserName")%></h2>
                    <p><%# Eval("CommentBody")%></p>
                 </div>
            </ItemTemplate>
            <AlternatingItemTemplate>
                <div style="background-color:White">
                    <div class="avatar-frame">
                    </div>
                    <h1><%# Eval("TagLine")%></h1>
                    <h2><%# Eval("IfNonMemberUserName")%></h2>
                    <p><%# Eval("CommentBody")%></p>
                </div>
            </AlternatingItemTemplate>
        </asp:TemplateField>
    </Columns>
</asp:GridView>
<asp:SqlDataSource ID="CommentsDataSource" runat="server" ConnectionString="<%$ ConnectionStrings:BookMeetConnString %>" ProviderName="<%$ ConnectionStrings:BookMeetConnString.ProviderName %>"  SelectCommand="SELECT [IfNonMemberUserName], [UserAvatar], [TagLine], [CommentBody] FROM [comments] WHERE ([BookID] = ?)">
    <SelectParameters>
        <asp:QueryStringParameter Name="?" QueryStringField="ID" />
    </SelectParameters>
</asp:SqlDataSource> 
```

**一些背景知识：** 我有一个 MS Access 数据库，其中有一个名为“userprofiles”的表，其中有一个名为 AvatarURL 的字段。类似地，还有一个名为“comments”的表，其中有一个名为“UserAvatar”的查找字段，指的是“userprofiles”表的“AvatarURL”字段。

我在后面的代码中收到“'ProfilePic' 未声明。由于它的权限级别，它可能无法访问”错误。Intellisense 告诉我 ID 为“ProfilePic”的图像未声明（在 DisplayData 子例程中。

有问题的代码是：

```
Protected Sub DisplayData()
    Dim conn As OleDbConnection = New OleDbConnection(ConfigurationManager.ConnectionStrings("BookMeetConnString").ConnectionString)
    Dim sql = "SELECT * FROM userprofiles WHERE TravellerName=@f1"
    Dim cmd = New OleDbCommand(sql, conn)
    cmd.Parameters.AddWithValue("@f1", User.Identity.Name)
    conn.Open()
    Dim profileDr = cmd.ExecuteReader()
    profileDr.Read()
    If Not IsDBNull(profileDr("AvatarURL")) Then ProfilePic.ImageUrl = profileDr.Item("AvatarURL")
    conn.Close()
End Sub 
```

在运行时，detail.aspx 工作正常，但评论框中的头像根本不显示。我究竟做错了什么？

**编辑**：

我设法做到了这一点：

> ```
>  Protected Sub GridView2_RowDataBound(sender As Object, e As GridViewRowEventArgs)
>     Dim conn As OleDbConnection = New OleDbConnection(ConfigurationManager.ConnectionStrings("BookMeetConnString").ConnectionString)
>     Dim sql = "SELECT * FROM userprofiles WHERE TravellerName=@f1"
>     Dim cmd = New OleDbCommand(sql, conn)
>     cmd.Parameters.AddWithValue("@f1", User.Identity.Name)
>     conn.Open()
>     Dim profileDr = cmd.ExecuteReader()
>     profileDr.Read()
>     Dim ProfilePic
>     If e.Row.RowType = DataControlRowType.DataRow Then
>         ProfilePic = e.Row.FindControl("ProfilePic")
>         If Not IsDBNull(profileDr("AvatarURL")) Then ProfilePic.ImageUrl = profileDr.Item("AvatarURL")
>     End If
>     conn.Close()
> 
> End Sub 
> ```

但是，图像仍然不会在运行时出现。这有什么问题？我应该使用数据阅读器吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-30T19:59:40.503

引用 get at 的唯一方法`ProfilePic`是在 DataBind 时设置它。您需要通过添加`OnRowDataBound="GridView2_RowDataBound"`到您的`asp:GridView`标签来连接 GridView2_RowDataBound 事件。

然后，您将获取`RowDataBound`每一行的事件（甚至是页眉和页脚行，因此您需要测试当前触发事件的行类型。然后您可以`FindControl`在当前行项目上使用来查找当前行的`ProfilePic`. ' 必须将该函数的输出转换为`Image`.

```
protected void GridView2_RowDataBound(object sender, GridViewRowEventArgs e)
{
    if (e.Row.RowType == DataControlRowType.DataRow)
    {
        Image ProfilePic = (Image)e.Row.FindControl("ProfilePic");
        ProfilePic.ImageUrl = "stuff";
    }
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-30T19:59:54.677

As a control within a *template*, you can only access the control when binding, in particular in the `OnRowDataBound` event handler (for a `GridView`).

In this event handler you need to call `FindControl` with the `ID` of the wanted control and cast it to the right type (only if you need to access specific members of that type).

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-30T20:27:26.647

Try this

```
public string DisplayData()
    Dim conn As OleDbConnection = New OleDbConnection(ConfigurationManager.ConnectionStrings("BookMeetConnString").ConnectionString)
    Dim sql = "SELECT * FROM userprofiles WHERE TravellerName=@f1"
    Dim cmd = New OleDbCommand(sql, conn)
    cmd.Parameters.AddWithValue("@f1", User.Identity.Name)
    conn.Open()
    Dim profileDr = cmd.ExecuteReader()
    profileDr.Read() 
  string imagename= profileDr("AvatarURL")   
    conn.Close()
return imagename

End Sub 
```

and client side change for

```
<asp:Image ID="ProfilePic" **ImageUrl='<%# DisplayData()%>'** runat="server" /> 
```

# c++ - How to create a cookie with FastCGI (nginx) in C++

> ID：15722795
> 
> 赞同：5
> 
> 时间：2013-03-30T19:47:51.580
> 
> 标签：c++, session, cookies, nginx, fastcgi

I'm creating a website in C++ using FastCGI on nginx. My problem is now to track a user (aka session). I can read the HTTP_COOKIE out, but I have no clue how I can create a new cookie with a name and a value and send this to the client.

Looking up in Google I only found relevant stuff for PHP, Python and other scriptlanguages that try to run with CGI/fCGI.

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-03-30T19:58:45.550

you can use setcookie syntax.

```
 #include <stdio.h>
 #include <stdlib.h>

    int main(int argc, char** argv)
    {
        int count = 0;
        printf("Content-type: text/html\r\n"
               "Set-Cookie: name=value\r\n"
               "\r\n"
               "<title>CGI Hello!</title>"
               "<h1>CGI Hello!</h1>"
               "Request number %d running on host <i>%s</i>\n",
               ++count, getenv("SERVER_NAME"));
       return 0;
    } 
```

# php - phpexcel how get cell format

> ID：15722801
> 
> 赞同：1
> 
> 时间：2013-03-30T19:48:26.300
> 
> 标签：php, phpexcel

How I can get cell format? I Try

```
$E->getActiveSheet()->getCellByColumnAndRow(0, 24)->getCalculatedValue() 
```

but it rerurns '6', I need '6 бухта' (sorry for russian letters)

![enter image description here](../Images/a3c34b9813ee6633197c9e59f0afbb78.png)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-31T10:08:41.503

```
$E->getActiveSheet()->getCellByColumnAndRow(0, 24)
    ->getFormattedValue() 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2016-12-07T09:05:55.730

you can get the cell format by code,

```
var_dump($objPHPExcel->getActiveSheet()->getCell('D3')->getStyle()->getNumberFormat()->getFormatCode()); 
```

and output will be like:

## string(8) "mm-dd-yy"

# python-2.7 - How do I use python interface of Stanford NER(named entity recogniser)?

> ID：15722802
> 
> 赞同：14
> 
> 时间：2013-03-30T19:48:35.267
> 
> 标签：python-2.7, nlp, stanford-nlp, named-entity-recognition

I want to use Stanford NER in python using pyner library. Here is one basic code snippet.

```
import ner 
tagger = ner.HttpNER(host='localhost', port=80)
tagger.get_entities("University of California is located in California, United States") 
```

When I run this on my local python console(IDLE). It should have given me an output like this

```
 {'LOCATION': ['California', 'United States'],
 'ORGANIZATION': ['University of California']} 
```

but when I execut this, it showed empty brackets. I am actually new to all this.

* * *

## 回答 #1

> 赞同：27
> 
> 时间：2013-03-30T20:44:58.610

I am able to run the stanford-ner server in socket mode using:

```
java -mx1000m -cp stanford-ner.jar edu.stanford.nlp.ie.NERServer \
    -loadClassifier classifiers/english.muc.7class.distsim.crf.ser.gz \
    -port 8080 -outputFormat inlineXML 
```

and receive the following output from the command line:

```
Loading classifier from 
/Users/roneill/stanford-ner-2012-11-11/classifiers/english.muc.7class.distsim.crf.ser.gz 
... done [1.7 sec]. 
```

Then in python repl:

```
Python 2.7.2 (default, Jun 20 2012, 16:23:33) 
[GCC 4.2.1 Compatible Apple Clang 4.0 (tags/Apple/clang-418.0.60)] on darwin
Type "help", "copyright", "credits" or "license" for more information.
>>> import ner
>>> tagger = ner.SocketNER(host='localhost', port=8080)
>>> tagger.get_entities("University of California is located in California, United States")
{'ORGANIZATION': ['University of California'], 'LOCATION': ['California', 'United States']} 
```

# c++ - OpenGL 着色器错误 1282

> ID：15722803
> 
> 赞同：18
> 
> 时间：2013-03-30T19:48:46.913
> 
> 标签：c++, opengl

我正在尝试为我当前的简单立方体场景添加照明。设置我的制服后，我从 glGetError() 收到这段代码的 1282 错误

```
GLuint ambientHandle = glGetUniformLocation(program->getHandle(), "ambientProduct");
glUniform4fv( ambientHandle, 1, ambientProduct );
GLuint diffuseHandle = glGetUniformLocation(program->getHandle(), "diffuseProduct");
glUniform4fv( diffuseHandle, 1, diffuseProduct );
GLuint specularHandle = glGetUniformLocation(program->getHandle(), "specularProduct");
glUniform4fv( specularHandle, 1, specularProduct );
GLuint lightPosHandle = glGetUniformLocation(program->getHandle(), "lightPosition");
glUniform4fv( lightPosHandle, 1, light.position );
GLuint shinyHandle = glGetUniformLocation(program->getHandle(), "shininess");
glUniform1f( shinyHandle, materialShininess ); 
```

这是我的着色器：vertex.glsl

```
#version 120

attribute vec4 coord3d;
attribute vec3 normal3d;

// output values that will be interpretated per-fragment
varying  vec3 fN;
varying  vec3 fE;
varying  vec3 fL;

uniform vec4 lightPosition;
uniform mat4 mTransform;

void main()
{
    fN = normal3d;
    fE = coord3d.xyz;
    fL = lightPosition.xyz;

    if( lightPosition.w != 0.0 ) {
    fL = lightPosition.xyz - coord3d.xyz;
    }

    gl_Position = mTransform*coord3d;
} 
```

片段.glsl

```
// per-fragment interpolated values from the vertex shader
varying  vec3 fN;
varying  vec3 fL;
varying  vec3 fE;

uniform vec4 ambientProduct, diffuseProduct, specularProduct;
uniform mat4 mTransform;
uniform vec4 lightPosition;
uniform float shininess;

void main() 
{ 
    // Normalize the input lighting vectors
    vec3 N = normalize(fN);
    vec3 E = normalize(fE);
    vec3 L = normalize(fL);

    vec3 H = normalize( L + E );

    vec4 ambient = ambientProduct;

    float Kd = max(dot(L, N), 0.0);
    vec4 diffuse = Kd*diffuseProduct;

    float Ks = pow(max(dot(N, H), 0.0), shininess);
    vec4 specular = Ks*specularProduct;

    // discard the specular highlight if the light's behind the vertex
    if( dot(L, N) < 0.0 ) {
    specular = vec4(0.0, 0.0, 0.0, 1.0);
    }

    gl_FragColor = ambient + diffuse + specular;
    gl_FragColor.a = 1.0;
} 
```

产品和位置都是三个 GLfloat 的结构，而 shininess 是一个浮点数。我检查了句柄的所有值和我传递的值，它们似乎都是有效的。想法？

--编辑：我已将其范围缩小到 glUniform4fv 调用。它发生在每一个之后。我还仔细检查了 program->getHandle() 是否指向看起来有效的东西。

我检查了 program->getHandle 是一个有效的程序 以下是所有句柄的值： 程序句柄 3ambientHandle 0diffuseHandle 1 specularHandle 5 lightPosHandle 2 shinyHandle 4

所以他们看起来都很好。为了测试，我将注释掉环境产品下面的行。为了清楚起见，我明确地使用了这一行

```
glUniform4f( ambientHandle, ambientProd.x, ambientProd.y, ambientProd.z, ambientProd.w ); 
```

这些是执行该行时ambientProd 的值。x = 0.200000003，y = 0.0，z = 0.200000003，w = 1.0

该项目的一位合作者提出了 glUseProgram 的呼吁。感谢各位的帮助。

* * *

## 回答 #1

> 赞同：23
> 
> 时间：2013-03-30T20:03:10.413

错误号“1282”的描述性不是很好。

可能的错误代码`glGetUniformLocation`有：

```
GL_INVALID_VALUE
GL_INVALID_OPERATION 
```

没有固定值。尝试获取错误字符串`gluErrorString()`或查看这些`1282`映射的标题。

只是在黑暗中开枪：但是你...

*   检查你的着色器编译没有错误？

*   检查你的着色器链接没有错误？

顺便说一句：返回类型是 GLint 而不是 GLuint

“着色器编译和链接没有错误”嗯，这看起来很奇怪。

根据规范（请参阅：[http](http://www.opengl.org/sdk/docs/man/xhtml/glGetUniformLocation.xml) ://www.opengl.org/sdk/docs/man/xhtml/glGetUniformLocation.xml ）`GL_INVALID_OPERATION`，仅应在以下情况下生成：

*   程序不是程序对象

*   程序未成功链接

其他问题：

*   您确定您的对象所属`getHandle()`的类的方法返回正确的 id。`program`我的意思是在成功链接中使用的那个。

    您应该能够通过检查是否`glIsProgram(program-getHandle())`返回来验证`GL_TRUE`

**编辑：**啊 - 我错过`glUniform4fv`了你的例子中的那些电话。

正确的返回类型`glGetUniformLocation`仍然是`GLint`，但我认为这不是问题。

根据规范（参见：[http](http://www.opengl.org/sdk/docs/man/xhtml/glUniform.xml) ://www.opengl.org/sdk/docs/man/xhtml/glUniform.xml ）`GLUniformXX`生成`GL_INVALID_OPERATION`的原因有很多。对我来说，唯一可能适用的是：

*   没有当前程序对象

    你在打电话`glUseProgram (program->getHandle())`之前打电话了`glUniform()`吗？

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2019-03-25T10:30:16.810

通常，当您使用与 openGL 在创建着色器时生成的 programID 不同的 programID 时，会出现此错误号。这意味着您在绑定时使用了不同的 programID`vertexShader`或`fragmentShader`您正在使用的任何其他着色器。

# c# - OnGui 元素与其他 OnGui 元素交互

> ID：15722812
> 
> 赞同：0
> 
> 时间：2013-03-30T19:50:08.580
> 
> 标签：c#, unity3d, kinect

在我的 2d 游戏中，我希望有许多 OnGui 元素供用户选择，但是，我使用的光标是另一个 ongui 元素（使用 kinect 导航），这是可能的，目前我正在使用飞机但我会放大和缩小相机，所以基本上需要将它们连接到屏幕上。任何想法、建议或解决方法。这是目前我的光标。

```
using UnityEngine;
using System;
using System.Collections;

public class PillarAgent : MonoBehaviour {

public SkeletonWrapper sw;
public Vector3 distance;

public float progress =0f;

public Texture2D cursor;
public Texture2D load;

public Camera mainCam;

public float startTime;
private int roundedRestSecounds;

// Use this for initialization

    float differencex = 0;
    float differencey = 0;

void Start () {

    distance =new Vector3(0f,0f,0f);

}
float translate(float value, float leftMin, float leftMax, 
        float rightMin,float rightMax)
{
    float leftSpan = leftMax - leftMin;
    float rightSpan= rightMax - rightMin;

    float valueScaled = (value-leftMin)/(leftSpan);
    return rightMin+(valueScaled * rightSpan);
}
// Update is called once per frame
void Update () {
    if (sw.pollSkeleton())
    {
        distance.x=sw.bonePos[0,0].x - sw.bonePos[0,7].x;//5 is left shoulder
        distance.y=sw.bonePos[0,0].y -sw.bonePos[0,7].y;

        differencex=translate(distance.x,.6f,0,0,Screen.width);
        differencey=translate(distance.y,-.5f,0,0,Screen.height);
        //Debug.Log();

        float width = sw.bonePos[0,5].x+ sw.bonePos[0,9].x;
        float height =sw.bonePos[0,4].y- sw.bonePos[0,0].y;
        float heightdiv= (height/2)+sw.bonePos[0,0].y;        
    }    
}

void OnGUI() {
    //left top width height
    Rect r = new Rect(differencex,differencey,80,50);

    GUI.Label(r,cursor);
    GUI.BeginGroup(new Rect(differencex,differencey+50,50*Mathf.Clamp01(progress),15));
    //Debug.Log(progress);
    GUI.DrawTexture(new Rect(0,0,50,50),load);
    GUI.EndGroup();

    transform.position =mainCam.ScreenToWorldPoint(new Vector3(differencex,Screen.height-differencey,50));

    //mainCam.fieldOfView()    
}

void OnCollisionStay(Collision Other)
{
    startTime+=Time.deltaTime;

    if(Other.gameObject.GetComponent(typeof(TextControl)))
    {
        roundedRestSecounds=Mathf.CeilToInt(Time.time);

        progress = Time.time *0.2f;

        CurrentState=true;
    }
    else if(Other.gameObject.tag==("Scalpal")){

        progress = startTime *0.5f;
        //scallpall activated
        //    
    }        
}

void OnCollisionExit(Collision Other){
    startTime =0f;
    progress =0f;        
}

public Boolean CurrentState{get;set;}
} 
```

下一节课本质上是我拿起工具的课，目前这段代码不起作用（不知道为什么），但我想做的是选择一些显示在屏幕上的工具，以便我可以使用它们，因为例如拿起画笔开始画砖或什么不。目前我将工具放在飞机上，我希望在相机移动时始终将它们放在屏幕上。

```
using UnityEngine;
using System.Collections;

public class SelectTool : MonoBehaviour {

public Tools tools;
public float startTime;
public bool ScalpalSelected;
public GameObject selectedTool;

void Start()
{
    tools = this.GetComponent<Tools>(); //in order to use this tools muyst be attached to the game object
    //this is essentially saying  with regards to this game object get the component named tools
}
void update()
{

}
void OnCollisionStay(Collision Other)
{
    startTime +=Time.deltaTime;

    if(startTime >5f){
        if(Other.collider.tag==("Scalpal"))
        {
            selectedTool = Other.collider.gameObject;
            Debug.Log(selectedTool+" What in gods good name is:" +tools.utilities[0]);

        }
        else {
            selectedTool=null;
        }
        if(selectedTool){
            for(int i=0;i<tools.utilities.Length;i++)
            {

            }    
        }

            ScalpalSelected=true;
            renderer.material.color = Color.yellow;    
    }
}
void OncollisionStay(Collision other){

    startTime = 0f;
}

} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-10T14:57:25.657

从评论部分到问题，我假设您想知道如何执行此操作：

> “......你希望你的平面物体与相机一起移动......” - 史蒂文米尔斯
> 
> “谢谢@StevenMills，你有什么例子可以说明如何做到这一点吗？” 杰贝尔

虽然评论中提供的答案是*手动将飞机添加为相机的子项*（一种非常简单的手动方法），但我将通过脚本提供另一种方法（鉴于这可能会帮助其他人忽略某人使用此解决方案的可能性）。

这样做的想法是创建一个脚本（因此被附加到），它将使用[GameObject.FindGameObjectsWithTag](http://docs.unity3d.com/Documentation/ScriptReference/GameObject.FindGameObjectsWithTag.html)方法`MainCamera`搜索所有`GameObject`的。一旦我们拥有了所有相关的，我们就可以遍历数组并将附加脚本的父级添加到每个。`Object Hierarchy``GameObject``Tag``GameObject`

```
public class ParentGameObjects : MonoBehaviour {
    //The tag to search for on all game objects in the hierarchy
    public String objectTag;

    //The game objects that we will parent the main camera to
    private GameObject[] children;
    //It's not necessary to store references to the children but if you want to modify them at some point you will be able to

    void Start() {
        //Find all game objects with the tag we want
        children = GameObject.FindGameObjectsWithTag(objectTag);
        //Loop through all of the game objects found and parent this object's transform
        for(int i = 0; i < children.Length; i++) {
            children[i].transform.parent = transform;
        }
    }
} 
```

现在，您必须做一些事情才能使此脚本正常工作：

1.  Attach this script to any `GameObject` that you want to parent other objects to.
2.  In the `Inspector` of the `GameObject` that the script is attached to, enter in the name of the `Tag` you want to use.
3.  For all `GameObject`(s) in the `Hierarchy` that should be added as children, assign the same `Tag`.

Of course there are other things you can do like, for example, instead of only searching for one `Tag` be able to search for multiple but that requires a bit (not exactly much) more work. Nonetheless, I hope this will at least be useful information to someone on how parenting works via scripting.

# java - ArrayList of ArrayList - initialization of ArrayList and shuffling

> ID：15722815
> 
> 赞同：0
> 
> 时间：2013-03-30T19:50:20.427
> 
> 标签：java, data-structures, arraylist

I am writing a board game, and I defined my own linked Node class(to implement the order of positions).

There are 17 positions, and among them are three distinct special positions.

I want to implement this positions with ArrayList with "BLACK"s and "WHITE"s.

Since where the special positions are will be decided randomly for every game, I am considering using

```
private ArrayList<ArrayList<String>> _al = new ArrayList<ArrayList<String>>(18); 
```

so that I could shuffle the special positions

```
Collections.shuffle(_al);
HNode<ArrayList<String> _l1 = new HNode<ArrayList<String>>(_al.get(0), null, _l2);
HNode<ArrayList<String> _l2 = new HNode<ArrayList<String>>(_al.get(1), _l1, _l3); 
```

and so on. (HNode's constructor's parameters are (data, prev, next))

My questions are,

Would the following line automatically create 18 ArrayLists of String objects? Or should I (and could I) create them first and add them to _al?

```
private ArrayList<ArrayList<String>> _al = new ArrayList<ArrayList<String>>(18); 
```

Thank you.

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-30T23:10:44.123

Thank you everyone for replies. I decided to initialize everything separately, and add them and shuffle.

# mysql - 提高性能 javax.persistence 事务到远程数据库

> ID：15722819
> 
> 赞同：-1
> 
> 时间：2013-03-30T19:50:31.070
> 
> 标签：mysql, database, performance, jpa, eclipselink

在针对我的本地数据库开发应用程序时，事务速度没有问题，尽管每秒执行多个事务时 CPU 使用率始终保持在 30% 左右，并且在进行分析时，大部分时间都花在处理事务的 javax 方法中每笔交易平均需要 2.6 秒。因此，我使用 ArrayList 作为缓冲区，仅在缓冲区大小超过 300 个实例时才发送事务，这显着降低了 CPU 使用率。

当我将 persistence.xml 更改为使用远程数据库时（同时检查了 RDS 和个人的异地数据库），持久化/提交一批实例的最短时间约为 20 秒，这太高了，因为每 5 秒（平均）需要一次 300 个实例的事务。

我试图将 EntityManager 的刷新模式更改为，`FlushModeType.COMMIT`但它并没有明显改变性能。由于某些（对我而言）未知的原因，在发送之前增加缓冲区的大小会导致 javax.persistence 库的堆栈溢出。

**持久性.xml**

```
<persistence-unit name="PU-data" transaction-type="RESOURCE_LOCAL">
    <mapping-file>META-INF/orm.xml</mapping-file>
    ... // class, shared-cache-mode=none, validation-mode=none ...
    <properties>
        ... // Authentication ...
        <!-- Optimization attempts -->
        <property name="eclipselink.jdbc.bind-parameters" value="true" />
        <property name="eclipselink.jdbc.batch-writing" value="JDBC"/>
        <property name="eclipselink.jdbc.batch-writing.size" value="300" />
        <property name="eclipselink.jdbc.cache-statements" value="true" /> 
        <property name="eclipselink.cache.shared.default" value="false" />
        <property name="eclipselink.persistence-context.close-on-commit" value="true" />
        <property name="eclipselink.persistence-context.flush-mode" value="commit" />
        <property name="eclipselink.persistence-context.persist-on-commit" value="false" />
    </properties>
</persistence-unit> 
```

**处理事务的门面**

```
MouseFacade.bufferSemaphore.acquireUninterruptibly(1);
if (MouseFacade.buffer.size() >= 300) {
    EntityManager entityManager = EMF.getEntityManager();
    try {
        entityManager.getTransaction().begin();
        for (Mouse mouse : MouseFacade.buffer) {
            entityManager.persist(mouse);
        }
        entityManager.getTransaction().commit();
    } finally {
        if (entityManager.getTransaction().isActive()) {
            entityManager.getTransaction().rollback();
        }

        entityManager.close();
        MouseFacade.buffer.clear();
    }

}
MouseFacade.bufferSemaphore.release(1); 
```

**ORM 映射**

```
<entity-mappings version="2.1" xmlns="http://www.eclipse.org/eclipselink/xsds/persistence/orm" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance">
    <entity class="se.my.package.Mouse">
        <table-generator name="ORD_SEQ" allocation-size="300"/>
    </entity>
</entity-mappings> 
```

* * *

**更新**

我已经浏览了此页面上的建议，称为*如何将 JPA 性能提高 1,825%* ( [http://java-persistence-performance.blogspot.se/2011/06/how-to-improve-jpa-performance- by-1825.html](http://java-persistence-performance.blogspot.se/2011/06/how-to-improve-jpa-performance-by-1825.html)），但是没有什么区别，这让我想知道我是否错过了关于批处理写入和 MySQL 的关键点。我重写了实体以不依赖关系，并将整个应用程序的读取操作最小化为 1，以便只关注写入问题。

查看 EclipseLink 日志时，看起来根本没有使用批量写入，而是为每个似乎正确的实例写入了 2 个日志整体（300 个实例 * 2 个连接 * 24 延迟 = 14.4 秒）。

```
[EL Fine]: sql: 2013-03-31 01:35:29.249--ClientSession(1213059092)--Connection(662811604)--Thread(Thread[pool-1-thread-1,5,main])--SELECT LAST_INSERT_ID()
[EL Fine]: sql: 2013-03-31 01:35:29.274--ClientSession(1213059092)--Connection(662811604)--Thread(Thread[pool-1-thread-1,5,main])--INSERT INTO mouse (event, posX, posY, created, uid) VALUES (?, ?, ?, ?, ?)
    bind => [12, 241, 250, 1364690113727, 1]
[EL Fine]: sql: 2013-03-31 01:35:29.298--ClientSession(1213059092)--Connection(662811604)--Thread(Thread[pool-1-thread-1,5,main])--SELECT LAST_INSERT_ID()
[EL Fine]: sql: 2013-03-31 01:35:29.323--ClientSession(1213059092)--Connection(662811604)--Thread(Thread[pool-1-thread-1,5,main])--INSERT INTO mouse (event, posX, posY, created, uid) VALUES (?, ?, ?, ?, ?)
    bind => [12, 233, 296, 1364690113443, 1]
... 
```

**进步**

By changing to `@GeneratedValue(strategy = GenerationType.TABLE)` and `allocationSize=300` I've managed to reduce the number of requests by 50%, although it looks as if bind are still sent on their own when checking the EclipseLink log, even though batch writing is supposedly enabled.

```
[EL Fine]: sql: 2013-03-31 01:35:29.323--ClientSession(1213059092)--Connection(662811604)--Thread(Thread[pool-1-thread-1,5,main])--INSERT INTO mouse (event, posX, posY, created, uid) VALUES (?, ?, ?, ?, ?)
bind => [..., ..., ..., ..., ...]
bind => [..., ..., ..., ..., ...]
bind => [..., ..., ..., ..., ...]
bind => [..., ..., ..., ..., ...]
bind => [..., ..., ..., ..., ...]
bind => [..., ..., ..., ..., ...]
bind => [..., ..., ..., ..., ...]
bind => [..., ..., ..., ..., ...]
bind => [..., ..., ..., ..., ...]
bind => [..., ..., ..., ..., ...] 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-01T01:13:11.160

Change your sequencing to use table sequencing allowing sequence numbers to be preallocated. What you have now forces each insert into its own statement so that the id can be found right after - which prevents batching. Table and other strategies allowing preallocation will give better performance if matched up with the size of your batches. Optimization #6 in [http://java-persistence-performance.blogspot.se/2011/06/how-to-improve-jpa-performance-by-1825.html](http://java-persistence-performance.blogspot.se/2011/06/how-to-improve-jpa-performance-by-1825.html)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-30T20:42:49.630

Try enabling [JDBC batch writing](http://eclipse.org/eclipselink/documentation/2.4/jpa/extensions/p_jdbc_batchwriting.htm). I'm not sure what difference it would make, but it may be worth trying.

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-01T13:58:05.723

For batch writing in MySQL the MySQL JDBC driver does not batch statement unless you have set the following property in your conneciton URL,

```
?rewriteBatchedStatements=true 
```

i.e.

```
jdbc:mysql://localhost:3306/db1?rewriteBatchedStatements=true 
```

# scala - Define a function in Scala that takes an Array of a wildcard as a parameter

> ID：15722822
> 
> 赞同：2
> 
> 时间：2013-03-30T19:51:02.440
> 
> 标签：scala, generics, inheritance, collections

I have a seemingly very simple Scala question that's driving me crazy. This:

```
class A
class B extends A
class C { def foo(a: Array[_ <: A]) { a(0) = a(1) }} 
```

Doesn't compile. It says:

```
scala> class C { def foo(a: Array[_ <: A]) { a(0) = a(1) }}
<console>:8: error: type mismatch;
 found   : (some other)_$1(in method foo)
 required: _$1(in method foo)
       class C { def foo(a: Array[_ <: A]) { a(0) = a(1) }} 
```

I think I understand; is it because there's no guarantee that all elements of "A" are the same type? Is there anyway to make this work, or am I just doing something janky?

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-30T19:57:53.973

Maybe you mean

```
class C { def foo[T <: A](a: Array[T]) { a(0) = a(1) } } 
```

?

This will let foo operate on arrays of `A` or its descendants, and it will maintain the type (so if you have it typed as `B` only, it'll stay that way).

# php - PHP 准备好的语句更新表格

> ID：15722831
> 
> 赞同：0
> 
> 时间：2013-03-30T19:52:12.190
> 
> 标签：php, database, prepared-statement

我将把这个问题分成几段以便于参考；

1.  我有一个带有按钮的网站，该按钮将数据库中的当前数字与 1 相加。

2.  我现在使用“更新”表格来添加数据库中的数字。我已经使用准备好的语句来做到这一点：

    ```
    <?php
        require_once('connectvars.php');
        $mysqli = new mysqli(DB_HOST, DB_USER, DB_PASSWORD, DB_NAME);

            if (mysqli_connect_errno()) {
                echo 'Cannot connect.' . mysqli_connect_error(); 
                exit();
                }

            if ($stmt = $mysqli->prepare('UPDATE `javascriptbutton` SET `clicks`=? WHERE `id`=?')) { 

                $stmt->bind_param('ii', $clicks, $id);

                $clicks = $_POST['clicks'] + 1; 
                $id = 1;

                $stmt->execute();

                $stmt->close();

            } else {
                echo 'Woops, something went wrong.: ' . $mysqli->error;
            } 
    ```

    ?>

3.  当用户在 html 中按下一个按钮时，它会调用一个包含 Ajax 的脚本，该脚本引用了上面的 php 脚本。

4.  每次按下按钮时，这个 php 文件都必须从 id=1 的数据库列“clicks”中获取当前的“clicks”，并加上 1 并将其插入数据库。

5.  我一直在研究和查看我的代码，我可以得出结论，它与：

    $clicks = $_POST['clicks'] + 1;

The $_POST['clicks'] should be the current number in the database, and get plussed by 1.

Question: Do I have to create a select form to get the current clicks out of the database? Or how can I plus the current clicks with 1 and put the new number back into the database till next time a person presses the button?

If there are any of the 5 steps you want to deepen, please tell me.

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-30T19:56:06.570

You can just use:

```
$mysqli->prepare("UPDATE `javascriptbutton` SET `clicks`=`clicks`+1 WHERE `id`=?") 
```

EDIT Full code:

```
 if ($mysqli->prepare("UPDATE `javascriptbutton` SET `clicks`=`clicks`+1 WHERE `id`=?")) { 

        $stmt->bind_param('i', $id);
        $id = 1;

        $stmt->execute();

        $stmt->close();

    } 
```

# c++ - 当互斥锁/解锁深埋在函数调用中时，我是否需要栅栏或屏障或其他东西？

> ID：15722832
> 
> 赞同：6
> 
> 时间：2013-03-30T19:52:38.250
> 
> 标签：c++, concurrency, mutex, critical-section

我最近了解到编译器会通过重新排列指令来优化你的代码，这可以通过使用屏障来控制。

IIRC，锁定互斥锁会造成障碍，解锁互斥锁也会造成障碍，以防止关键部分内的代码流出。

所以 pthread_mutex_lock 和 pthread_mutex_unlock 必须隐含地成为这些“障碍”。如果我有这样一个包含互斥锁的类怎么办？

```
class IMutex {
public:
    virtual void lock() = 0;
    virtual void unlock() = 0;
}; 
```

在我看来，编译器不会知道我在 lock() 中调用 pthread_mutex_lock()，在 unlock() 中调用 pthread_mutex_unlock()，因为它们都是虚拟的。

这会导致错误吗？我是否需要以某种方式手动指定障碍？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-04-08T10:53:57.420

重新排序指令在各个级别上完成。最明显的是编译器，不太明显的是 CPU（运行中）。然而，同步函数几乎总是一个栅栏，它可以防止栅栏前后的指令重新排序。

因此，如果您的虚拟`lock`调用`pthread_mutex_*()`，那么您的虚拟功能包含一个栅栏。

所以简短的回答是：不，它不会导致错误。

还有 volatile 关键字，根据平台也可以生成栅栏。然而，使用 volatile 关键字会使检测这些栅栏变得更加困难，因为每次使用易失的函数或变量时，都会引入栅栏。所以建议你使用平台的同步功能。

The only time you need to be aware of fences is when you are not using concurrency objects to perform synchronization (like using a `bool` instead of a mutex).

# c++ - 保留不可构造对象的向量

> ID：15722834
> 
> 赞同：4
> 
> 时间：2013-03-30T19:53:20.167
> 
> 标签：c++, c++11

我有课`MyObject`。它的所有实例都应该由 a 拥有`MyObjectSet`，并且不能在其他任何地方构造它。在里面`MyObjectSet`，我使用 a`std::vector<MyObject>`来存储所有实例。

问题是，`std::vector<MyObject>`为了工作，移动构造函数必须是公共的（添加为 的朋友`MyObject`是不够的）。`std::vector<MyObject>``MyObject`

```
class MyObject {
    MyObject(int n);
    friend class MyObjectSet;
  public:
    MyObject(MyObject&&) = default; // without this, it doesn't compile
};

class MyObjectSet {
    std::vector<MyObject> MyObjects;
  public:
    MyObject& GetMyObject(int some_param);
}; 
```

但是，如果我将其公开，则可以`MyObject`从其他地方实例化。

```
void SomeUnrelatedFunc(MyObjectSet& set) {
    MyObject m(std::move(set.GetMyObject(0))); // this shouldn't be possible
} 
```

有没有办法解决这个问题？

可以在内部存储指向`MyObject`实例的指针`MyObjectSet`，但如果可能的话，我想避免这种情况。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-30T20:22:03.550

您需要声明`std::allocator<MyObject>`为好友：

```
class MyObject {

    MyObject(int n);
    friend class MyObjectSet;
    friend std::allocator<MyObject>;
}; 
```

然后用于`vector::emplace_back()`实际构造您的对象。

```
class MyObjectSet {
    std::vector<MyObject> MyObjects;

public:
    MyObject& GetMyObject(int some_param)
    {
        MyObjects.emplace_back( some_param );
        return MyObjects.back();
    }
}; 
```

`emplace_back()`具有调用 MyObject 构造函数，将 some_param 作为 int 参数传递给构造函数，并将创建的对象插入到列表的后面的效果。构造调用是从 std::allocator 内部完成的，因此需要它的友谊。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-30T21:38:30.507

您可以创建一个自定义分配器并将其作为第二个参数传递给您的`std::vector<>`. 让您的自定义分配器成为 MyObject 的朋友。您的自定义分配器不需要做任何特殊的事情——唯一的目的是以通常的方式（例如使用 new）分配 MyObjects，同时通过成为朋友来访问私有构造函数。

# scala - Parentheses Balancing in scala

> ID：15722836
> 
> 赞同：-5
> 
> 时间：2013-03-30T19:53:29.100
> 
> 标签：scala

I got a assignment for balancing parentheses using scala. I wrote this code:

```
def balance(chars: List[Char]): Boolean = {

def check(sent: List[Char], count: Int): Int =
  if (sent.isEmpty)
    count
  else if (sent.head == '(')
    check(sent.tail, count + 1)
  else if (sent.head == ')')
    check(sent.tail, count - 1)
  else
    check(sent.tail, count)

     check(chars, 0) == 0 } 
```

but this code fails in `"())("` any idea to implement this code correct?

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-30T20:02:55.913

Not giving any code away, just clarifying the likely spec. All your code is doing is counting the number of right and left parens, and making sure they are equal. That's a necessary condition, but not sufficient. For balanced parentheses, you also need to show that as you scan through the string, the number of '('s you have seen must always be greater than or equal to the number of ')'s seen.

# php - 我如何将完整的 php 文件添加/需要到函数中的变量中

> ID：15722838
> 
> 赞同：0
> 
> 时间：2013-03-30T19:53:46.170
> 
> 标签：php, wordpress, function, variables, require

我正在 Wordpress 中构建，并有一些使用 jQuery.load 加载的内容。

```
$item = '<h2>'. the_title() .'</h2><div>'. the_content() .'</div>';
//$item = include 'myrequire.php'; This doesn't seem to work. 
```

我想知道如何让 php 变量 $item 加载一个 php 文件 - 所以我可以保持 functions.php 的整洁，并且可以像这样编写文件：

```
<h2><?php the_title(); ?><h2> 
```

... 那有意义吗？

谢谢！

我遵循了本教程： [http ://tomsbigbox.com/wordpress-load-more-posts-on-page-scroll/](http://tomsbigbox.com/wordpress-load-more-posts-on-page-scroll/)

这是完整的片段：

```
function getArchives($count,$offset){
query_posts('posts_per_page='.$count.'&offset='.$offset);

$posts = array();

if(have_posts()) : while(have_posts()) : the_post();    

    $item = '<h2>'. the_title() .'</h2><div>'. the_content() .'</div>';
    //$item = include 'myrequire.php';

array_push($posts,$item); endwhile; endif;

return $posts;
}; 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-30T19:57:01.157

[http://www.php.net/manual/en/function.file-get-contents.php](http://www.php.net/manual/en/function.file-get-contents.php)

你想知道一个php文件的内容吗？

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-30T19:56:11.680

include 执行文件，你想要 file_get_contents

```
$var=file_get_contents($filename); 
```

您也可以使用 get_template_part 以 wordpress 方式进行操作，但这取决于您想要做什么。我会看一下法典[http://codex.wordpress.org/Function_Reference/get_template_part](http://codex.wordpress.org/Function_Reference/get_template_part)

# twitter-bootstrap - 将 Knockout foreach 与 Bootstrap 按钮组中的静态元素混合

> ID：15722845
> 
> 赞同：0
> 
> 时间：2013-03-30T19:54:17.113
> 
> 标签：twitter-bootstrap, knockout.js

我正在尝试将 a`foreach`与 Bootstrap btn 组中的静态元素混合，因为我希望某些按钮成为未来选项的占位符。所以我这样设置：

```
<div class="btn-group pull-right">
    <span data-bind="foreach: router.visibleRoutes">
        <a data-bind="css: { active: isActive }, attr: { href: hash }, text: name" href="#" class="btn btn-info"></a>
    </span>
    <div class="btn btn-info">Future Option</div>
    <div class="btn btn-info">Future Option</div>
</div> 
```

但是，这会导致`foreach`使用`btn-group`. `span`中断正常的按钮组样式。我还尝试了无容器组合：

```
<div class="btn-group pull-right">
    <!-- ko foreach: router.visibleRoutes -->
        <a data-bind="css: { active: isActive }, attr: { href: hash }, text: name" href="#" class="btn btn-info"></a>
    <!-- /ko -->
    <div class="btn btn-info">Future Option</div>
    <div class="btn btn-info">Future Option</div>
</div> 
```

但是`span`渲染时会产生相同的标签，所以效果是一样的。如果我将div`foreach`放在`btn-group`div 上，那将导致静态元素对 each 重复`router.visibleRoutes`，这是不可接受的。有没有办法解决？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-31T02:50:44.630

看来您的第二种方法有效。会不会是浏览器缓存问题？

见 jsfiddle：http: [//jsfiddle.net/ptw8a/](http://jsfiddle.net/ptw8a/)

```
<!-- ko foreach: visibleRoutes -->
    <a data-bind="css: { active: isActive }, attr: { href: hash }, text: name" href="#" class="btn btn-info"></a>
<!-- /ko --> 
```

我找不到您的第二种方法会生成跨度对象的任何原因。

# ios - 如何在地图上绘制地理围栏？

> ID：15722848
> 
> 赞同：0
> 
> 时间：2013-03-30T19:54:21.090
> 
> 标签：ios, objective-c, google-maps, geolocation, geofencing

有没有人有任何好的资源可供我阅读如何在 iOS 应用程序中的地图上绘制地理围栏？

我想学习如何在视图上冻结地图并允许用户绘制正方形、圆形或多边形来设置地理围栏。

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-01-02T20:59:24.017

从 iOS 7 开始，地理围栏 (CLRegion) 只能是圆形区域。
[CL圆形区域](https://developer.apple.com/library/ios/documentation/CoreLocation/Reference/CLCircularRegion_class/Reference/Reference.html)

如果要在地图视图上绘图，可以在地图视图之上添加一个透明的自定义视图，并在透明视图上处理触摸事件。

# android - Double.parseFloat 在较高数值上的奇怪行为

> ID：15722849
> 
> 赞同：0
> 
> 时间：2013-03-30T19:54:21.227
> 
> 标签：android, numberformatexception

我有一段代码，它接受在 EditText 字段中输入的数字值，将其解析为 Double，然后从另一个 Double 值（总和）中添加或删除它。这在大多数情况下都可以正常工作，除非输入的值（或添加的值）分别高于或低于 1000 或 -1000。

这里有一些注意事项：用户按下添加值的按钮会检查按钮按下时 EditText 字段是否为空白；如果是这样，它什么也不做，并通过 a 告诉用户`Toast`他们需要输入一个非空白值。另一方面，如果用户输入一个值（比如 999.99 或更小），它将清除 EditText 字段，将该值添加到前面提到的 sum 中，并将输入的值放入 ListView 适配器。

现在对于奇怪的行为：如果用户输入一个 1000 或更大的值，无论总和是多少（例如：500 减去 1000 的总和仍然会复制此问题），该金额会添加到 ListView，但sum 不变，EditText 保留输入的值（如果从总和中减去该值，则在前面附加一个减号），并通知用户他们需要输入一个非空白值。

通常，单击 ListView 中的项目会将其从列表中删除，并将该金额添加到总和或从总和中删除。如果尝试对 1000 或更大的值进行此操作，则应用程序崩溃并`NumberFormatException`引用“无效的 Double”。

我将在下面发布处理上述操作的代码以及 LogCat。如果有人可以帮助我解决这个问题，我将不胜感激，因为这是阻止我向公众发布我的应用程序的唯一原因。谢谢！

```
/**
     * Method to handle ListView clicks. It should ask the user if they want to
     * remove the clicked item, and on confirmation, should do so.
     */
    @Override
    protected void onListItemClick(ListView l, View v, final int position, long id){
        final String item = (String) getListAdapter().getItem(position).toString();
        final TextView allowance = (TextView) findViewById(R.id.main_textview_allowance);

        // Offer up a dialog window to ask if the user really wants to delete
        // the clicked item.
        AlertDialog.Builder deleteDialog = new AlertDialog.Builder(this);
        deleteDialog.setTitle("Confirmation");
        deleteDialog.setMessage("Are you sure you want to delete " + item + "?");
        deleteDialog.setPositiveButton("OK", new DialogInterface.OnClickListener(){
            public void onClick(DialogInterface arg0, int arg1){
                // Delete the item
                adapter.remove(item);
                adapter.notifyDataSetChanged();

                // We need to remove the deleted value from our allowance
                double subtraction = Double.parseDouble(item.toString());
                double newValue = Double.parseDouble(allowance.getText().toString()) - subtraction;
                allowance.setText(moneyFormat.format(newValue));

                Toast.makeText(MainActivity.this, item + " transaction deleted.", Toast.LENGTH_LONG).show();
            }
        });
        deleteDialog.setNegativeButton("Cancel", new DialogInterface.OnClickListener(){
            public void onClick(DialogInterface arg0, int arg1){
                // Do nothing
            }
        });
        deleteDialog.show();
    }// onListItemClick 
```

...

```
/**
     * Add an expense to the ListView
     * @param view The calling View object.
     */
    public void addExpense(View view){
        EditText expense = (EditText)findViewById(R.id.main_edittext_expenseentry);
        TextView allowance  = (TextView) findViewById(R.id.main_textview_allowance);

        // Invert the value given such that it subtracts the expense from the allowance,
        // not add to it. But first, if the field is blank, don't do anything and let
        // the user know they need to input a value first.
        try{
            double expenseValue = Double.parseDouble(expense.getText().toString()) * -1;

            expense.setText(moneyFormat.format(expenseValue));
            adapter.add(expense.getText().toString());
            adapter.notifyDataSetChanged();

            // We need to subtract the new value from our daily allowance
            double subtraction = Double.parseDouble(expense.getText().toString());
            double newValue = (Double.parseDouble(allowance.getText().toString())) + subtraction;
            allowance.setText(moneyFormat.format(newValue));
            expense.setText("");
        }catch(NumberFormatException e){
            Toast.makeText(this, "You need to enter a non-blank amount!", Toast.LENGTH_SHORT).show();
        }
    }

    /**
     * Add a credit to the ListView
     * @param view The calling View object.
     */
    public void addCredit(View view){
        EditText expense = (EditText)findViewById(R.id.main_edittext_expenseentry);
        TextView allowance  = (TextView) findViewById(R.id.main_textview_allowance);

        // Invert the value given such that it subtracts the expense from the allowance,
        // not add to it. But first, if the field is blank, don't do anything and let
        // the user know they need to input a value first.
        try{
            double expenseValue = Double.parseDouble(expense.getText().toString());

            expense.setText(moneyFormat.format(expenseValue));
            adapter.add(expense.getText().toString());
            adapter.notifyDataSetChanged();

            // We need to add the new value to our daily allowance
            double addition = Double.parseDouble(expense.getText().toString());
            double newValue = (Double.parseDouble(allowance.getText().toString())) + addition;
            allowance.setText(moneyFormat.format(newValue));
            expense.setText("");
        }catch(NumberFormatException e){
            Toast.makeText(this, "You need to enter a non-blank amount!", Toast.LENGTH_SHORT).show();
        }

        /** OLD CODE

        EditText expense = (EditText)findViewById(R.id.main_edittext_expenseentry);
        TextView allowance  = (TextView) findViewById(R.id.main_textview_allowance);

        expense.setText(moneyFormat.format(Double.parseDouble(expense.getText().toString())));
        expense.setTextColor(Color.GREEN);

        adapter.add(expense.getText().toString());
        adapter.notifyDataSetChanged();
        expense.setTextColor(Color.BLACK);

        // We need to add the new value from our daily allowance
        double addition = Double.parseDouble(expense.getText().toString());
        double newValue = (Double.parseDouble(allowance.getText().toString())) + addition;
        allowance.setText(moneyFormat.format(newValue));
        if(newValue < 0)
            allowance.setTextColor(Color.RED);
        else
            allowance.setTextColor(Color.BLACK);
        expense.setText("");
        */
    } 
```

日志猫：

```
03-30 15:51:36.831: E/AndroidRuntime(15713): FATAL EXCEPTION: main
03-30 15:51:36.831: E/AndroidRuntime(15713): java.lang.NumberFormatException: Invalid double: "1,000.00"
03-30 15:51:36.831: E/AndroidRuntime(15713):    at java.lang.StringToReal.invalidReal(StringToReal.java:63)
03-30 15:51:36.831: E/AndroidRuntime(15713):    at java.lang.StringToReal.parseDouble(StringToReal.java:269)
03-30 15:51:36.831: E/AndroidRuntime(15713):    at java.lang.Double.parseDouble(Double.java:295)
03-30 15:51:36.831: E/AndroidRuntime(15713):    at com.argusrho.budgeteer.MainActivity$1.onClick(MainActivity.java:249)
03-30 15:51:36.831: E/AndroidRuntime(15713):    at com.android.internal.app.AlertController$ButtonHandler.handleMessage(AlertController.java:166)
03-30 15:51:36.831: E/AndroidRuntime(15713):    at android.os.Handler.dispatchMessage(Handler.java:99)
03-30 15:51:36.831: E/AndroidRuntime(15713):    at android.os.Looper.loop(Looper.java:137)
03-30 15:51:36.831: E/AndroidRuntime(15713):    at android.app.ActivityThread.main(ActivityThread.java:5041)
03-30 15:51:36.831: E/AndroidRuntime(15713):    at java.lang.reflect.Method.invokeNative(Native Method)
03-30 15:51:36.831: E/AndroidRuntime(15713):    at java.lang.reflect.Method.invoke(Method.java:511)
03-30 15:51:36.831: E/AndroidRuntime(15713):    at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:793)
03-30 15:51:36.831: E/AndroidRuntime(15713):    at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:560)
03-30 15:51:36.831: E/AndroidRuntime(15713):    at dalvik.system.NativeStart.main(Native Method) 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-31T21:57:15.247

发生错误是因为 ParseDouble 不知道如何处理逗号 (,)。我发现解决此问题的最简单方法是在要事先解析的字符串上使用 ReplaceAll(",", "") 。

# cocoa-touch - 如何检测移动 UIImageView 上的触摸事件？

> ID：15722852
> 
> 赞同：0
> 
> 时间：2013-03-30T19:54:31.240
> 
> 标签：cocoa-touch, uiimageview, core-animation, calayer, uitouch

在研究“如何在移动的 UIImageView 上检测触摸事件？”时 我遇到了几个答案，并尝试将它们实施到我的应用程序中。我遇到的任何事情似乎都不起作用。我将解释我正在尝试做什么，然后发布我的代码。任何想法，建议，评论或答案都表示赞赏！

我的应用程序有几张卡片从左到右在屏幕上浮动。这些卡片有各种颜色，游戏的目标是将卡片向下拖动到颜色相似的对应容器中。如果用户没有足够快地触摸和拖动卡片，卡片将简单地从屏幕上飘出并且会丢失积分。正确容器中包含的卡片越多，得分就越高。

我使用核心动画编写了代码，让我的卡片从左到右浮动。这行得通。但是，当尝试触摸卡片并将其拖向容器时，它没有正确检测到我正在触摸卡片的 UIImageView。

为了测试我是否正确实现了移动卡片的代码，我还编写了一些代码允许移动非移动卡片。在这种情况下，我的触摸被检测到并相应地采取行动。

为什么我只能与固定卡片互动？在研究了很多之后，似乎代码：

```
 options:UIViewAnimationOptionAllowUserInteraction 
```

是让我的移动 UIImages 被检测到的关键因素。但是我试过这似乎没有任何效果。

我可能做错的另一件事是没有正确使用正确的表示层。我已经在我的项目中添加了这样的代码，而且我也只适用于非移动对象：

```
UITouch *t = [touches anyObject];
UIView *myTouchedView = [t view];
CGPoint thePoint = [t locationInView:self.view];
if([_card.layer.presentationLayer hitTest:thePoint])
{
    NSLog(@"You touched a Card!");
}
else{
    NSLog(@"backgound touched");
} 
```

在尝试了这些类型的事情之后，我陷入了困境。这是我的代码，可以更全面地理解这一点：

```
#import "RBViewController.h"
#import <QuartzCore/QuartzCore.h>

@interface RBViewController ()
@property (nonatomic, strong) UIImageView *card;

@end

@implementation RBViewController

- (void)viewDidLoad
{
srand(time (NULL)); // will be used for random colors, drift speeds, and locations of cards
[super viewDidLoad];

[self setOutFirstCardSet]; // this sends out 4 floating cards across the screen

// the following creates a non-moving image that I can move.  
_card = [[UIImageView alloc] initWithFrame:CGRectMake(400,400,100,100)];
_card.image = [UIImage imageNamed:@"goodguyPINK.png"];
_card.userInteractionEnabled = YES;
[self.view addSubview:_card];

} 
```

以下方法从屏幕左侧的随机位置发出卡片，并使用核心动画使卡片在屏幕上漂移。请注意卡片的颜色和漂移的速度也会随机生成。

```
-(void) setOutFirstCardSet 
{

for(int i=1; i < 5; i++) // sends out 4 shapes
{
    CGRect cardFramei;
    int startingLocation = rand()  % 325;

    CGRect cardOrigini = CGRectMake(-100,startingLocation + 37, 92, 87);

    cardFramei.size = CGSizeMake(92, 87);
    CGPoint origini;

    origini.y = startingLocation + 37;
    origini.x = 1200;
    cardFramei.origin = origini;

    _card.userInteractionEnabled = YES;
    _card = [[UIImageView alloc] initWithFrame:cardOrigini];

    int randomColor = rand() % 7;
    if(randomColor == 0)
    {
        _card.image = [UIImage imageNamed:@"goodguy.png"];
    }
    else if (randomColor == 1)
    {
        _card.image = [UIImage imageNamed:@"goodguyPINK.png"];
    }
    else if (randomColor == 2)
    {
        _card.image = [UIImage imageNamed:@"goodGuyPURPLE.png"];
    }
    else if (randomColor == 3)
    {
        _card.image = [UIImage imageNamed:@"goodGuyORANGE.png"];
    }
    else if (randomColor == 4)
    {
        _card.image = [UIImage imageNamed:@"goodGuyLightPINK.png"];
    }
    else if (randomColor == 5)
    {
        _card.image = [UIImage imageNamed:@"goodGuyBLUE.png"];
    }
    else if (randomColor == 6)
    {
        _card.image = [UIImage imageNamed:@"goodGuyGREEN.png"];
    }

    _card.userInteractionEnabled = YES;  // this is also written in my viewDidLoad method
    [[_card.layer presentationLayer] hitTest:origini]; // not really sure what this does
    [self.view addSubview:_card];

    int randomSpeed = rand() % 20;
    int randomDelay = rand() % 2;
    [UIView animateWithDuration:randomSpeed + 10
                          delay: randomDelay + 4
                        options:UIViewAnimationOptionAllowUserInteraction // here is the method that I thought would allow me to interact with the moving cards.  Not sure why I can't
                     animations: ^{
                         _card.frame = cardFramei;
                     }
                     completion:NULL];
    }
} 
```

请注意，以下方法是我放置 CALayer 并点击测试信息的地方。我不确定我是否正确执行此操作。

```
-(void)touchesBegan:(NSSet *)touches withEvent:(UIEvent *)event
 {

 UITouch *t = [touches anyObject];
 UIView *myTouchedView = [t view];
 CGPoint thePoint = [t locationInView:self.view];

 thePoint = [self.view.layer convertPoint:thePoint toLayer:self.view.layer.superlayer];
 CALayer *theLayer = [self.view.layer hitTest:thePoint];

 if([_card.layer.presentationLayer hitTest:thePoint])
 {
    NSLog(@"You touched a Shape!"); // This only logs when I touch a non-moving shape
 }
 else{
     NSLog(@"backgound touched"); // this logs when I touch the background or an moving shape.  
 }

if(myTouchedView == _card)
{
   NSLog(@"Touched a card");
    _boolHasCard = YES;
}
    else
    {
        NSLog(@"Didn't touch a card");
        _boolHasCard = NO;
    }

} 
```

我希望以下方法适用于移动形状。它仅适用于非移动形状。许多答案说要触摸询问该卡来自哪个班级。截至目前，我所有的卡片都属于同一类（viewController 类）。当试图让卡片成为他们自己的类时，我无法让该视图出现在我的主后台控制器上。我必须有来自不同类别的各种卡片才能使用它，还是我可以让它在不需要这样做的情况下工作？

```
-(void)touchesMoved:(NSSet *)touches withEvent:(UIEvent *)event  
{
UITouch *touch = [[event allTouches] anyObject];
if([touch view]==self.card)
{
    CGPoint location = [touch locationInView:self.view];
    self.card.center=location;
}
} 
```

如果用户开始移动卡片然后抬起卡片，则下一个方法会重置卡片的移动。

```
-(void) touchesEnded:(NSSet *)touches withEvent:(UIEvent *)event
{
 if(_boolHasCard == YES)
 {

 [UIView animateWithDuration:3
                      delay: 0
                    options:UIViewAnimationOptionAllowUserInteraction
                 animations: ^{
                     CGRect newCardOrigin = CGRectMake(1200,_card.center.y - 92/2, 92, 87);
                     _card.frame = newCardOrigin;
                 }
                 completion:NULL];
   }

}

@end 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-31T14:43:33.830

简短的回答是，你不能。

Core Animation 实际上并不沿着动画路径移动对象。它们移动对象层的表示层。

动画开始的那一刻，系统认为对象在它的目的地。

如果你想使用 Core Animation，这是没有办法的。

你有几个选择。

1.  您可以在视图控制器上设置 CADisplayLink 并滚动您自己的动画，在每次调用显示链接时将视图的中心移动少量。但是，如果您要为很多对象设置动画，这可能会导致性能不佳和动画不稳定。

2.  您可以将手势识别器添加到包含所有动画的父视图，然后在父视图的演示视图上使用图层命中测试来确定哪个动画图层被点击，然后获取该图层的委托，这将是视图你正在制作动画。我在 github 上有一个项目，展示了如何使用第二种技术。它只检测单个移动视图上的点击，但它会向您展示基础知识：[github 上的 Core Animation 演示项目](https://github.com/DuncanMC/iOS-CAAnimation-group-demo)。

（如果您觉得这篇文章有帮助，请务必支持投票）

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-01T17:22:50.497

在我看来，您的问题实际上只是对如何在坐标空间之间转换点的理解不完整。此代码完全按预期工作：

```
- (void)viewDidLoad
{
  [super viewDidLoad];

  CGPoint endPoint = CGPointMake([[self view] bounds].size.width, 
                                 [[self view] bounds].size.height);

  CABasicAnimation *animation = [CABasicAnimation 
                                        animationWithKeyPath:@"position"];
  animation.fromValue = [NSValue valueWithCGPoint:[[_imageView layer] position]];
  animation.toValue = [NSValue valueWithCGPoint:endPoint];
  animation.duration = 30.0f;

  [[_imageView layer] addAnimation:animation forKey:@"position"];
}

- (void)touchesBegan:(NSSet *)touches withEvent:(UIEvent *)event
{
  UITouch *t = [touches anyObject];
  CGPoint thePoint = [t locationInView:self.view];

  thePoint = [[_imageView layer] convertPoint:thePoint 
                                      toLayer:[[self view] layer]];

  if([[_imageView layer].presentationLayer hitTest:thePoint])
  {
    NSLog(@"You touched a Shape!");
  }
  else{
    NSLog(@"backgound touched");
  }

} 
```

特别注意这一行：

```
 thePoint = [[_imageView layer] convertPoint:thePoint 
                                      toLayer:[[self view] layer]]; 
```

当我在动画时点击图层图像视图时，我得到“你触摸了一个形状！” 在控制台窗口中，当我点击它时，我得到“背景触摸”。这就是你想要的对吗？

这是[Github 上的示例项目](https://github.com/perlmunger/MovingHitTest)

**更新**

为了帮助您在评论中提出后续问题，我编写了 touchesBegan 代码有点不同。想象一下，`imageViews`当您创建它们时，您已将所有图像视图添加到一个数组（巧妙地命名为 ）。你会改变你的代码看起来像这样：

```
- (void)touchesBegan:(NSSet *)touches withEvent:(UIEvent *)event
{
  UITouch *t = [touches anyObject];
  CGPoint thePoint = [t locationInView:self.view];

  for (UIImageView *imageView in [self imageViews]) {
    thePoint = [[imageView layer] convertPoint:thePoint 
                                        toLayer:[[self view] layer]];

    if([[imageView layer].presentationLayer hitTest:thePoint]) {
      NSLog(@"Found it!!");
      break; // No need to keep iterating, we've found it
    } else{
      NSLog(@"Not this one!");
    }
  }
} 
```

我不确定这有多贵，因此您可能需要对其进行分析，但它应该符合您的预期。

# ruby-on-rails - ember.js 区别路由文件夹和 router.js 文件

> ID：15722857
> 
> 赞同：1
> 
> 时间：2013-03-30T19:55:31.980
> 
> 标签：ruby-on-rails, ember.js, ember-rails

我正在尝试通过 ember-rails gem 在 rails 和 ember.js 中创建一个项目。我做了一个`rails generate ember:bootstrap`，我正在观察它在下面创建的树`assets/javascripts`。

`routes.js`我不明白我必须放在顶层文件中的东西和文件夹内的文件之间有什么区别`/routes`。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-30T22:01:56.293

在顶部的 routes.js 文件中，您将定义您的路由和资源，例如：

您可以使用此**[Rails 应用程序](https://github.com/mankind/ember-app/blob/master/app/assets/javascripts/app_router.js)**作为指南。我在这个答案中使用的代码来自那个 repo。

```
EmBlog.Router.map(function() {
  this.resource("posts", {path: '/posts'}, function(){
    this.route('new');
    this.route('show', {path: '/:post_id'}) ;
    this.route('edit', {path: '/:post_id/edit'});

 });
}); 
```

如果您想**自定义这些路由或资源中的任何一个**，则**在 /routes 文件夹中创建一个新文件**。例如，如果我们想通过定义一个事件来自定义**显示路由****以删除**该路由器中的帖子，并使用**模型钩子****自定义返回的数据**，那么我们需要在 **[/routes/posts/show_route 中创建一个文件。 js](https://github.com/mankind/ember-app/blob/master/app/assets/javascripts/routes/posts/show_route.js)**并在那里添加我们的代码：

 **```
EmBlog.PostsShowRoute = Ember.Route.extend({

 model: function(params) {
  return EmBlog.Post.find(params.post_id);
 },

 setupController: function(controller, model){
  controller.set('content', model);
 },

 events: {
  destroyPost: function(post) {
   post.deleteRecord();
   post.get('store').commit();
   this.transitionTo('posts');
  }
 }

}); 
```

拆分路由的想法是确保它不会变得太大或填充 100 行代码。如果您更喜欢在同一个文件中定义顶级路由及其自定义。你可以。这是**[另一个可以做到这一点的 Rails 应用程序](https://github.com/bcardarella/ember-railsapi/blob/master/app/assets/javascripts/routes.js.coffee)**。**

# php - PHP日期函数显示错误的日期

> ID：15722859
> 
> 赞同：2
> 
> 时间：2013-03-30T19:55:33.337
> 
> 标签：php, date

我正在尝试使用 PHP 日期函数来获取今天的日期，但它会在 2013 年 3 月 31 日返回，即明天。我已经尝试更改默认时区，但它仍然返回相同的。

```
 date_default_timezone_set('Europe/Dublin');
    echo date("d/m/Y"); 
```

有任何想法吗？

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2013-03-30T20:22:38.943

看起来像 php 5.3.2-1 中的错误。尝试运行错误报告中的 php 脚本并发布结果。

# javascript - Trying to understand JSONP on jquery

> ID：15722869
> 
> 赞同：1
> 
> 时间：2013-03-30T19:56:19.770
> 
> 标签：javascript, jquery, jsonp

Well i would like to know something about JSONP,

like when someone enter in my website and i do a ajax request with dataType JSONP,

this request will be done like when this same person enter direct in this page? i.e: this page that ajax will request with JSONP get the IP of the user,

it will get the real ip of this user? similar to a iframe i mean.

thanks.

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-30T19:58:03.863

Every request to a server contains the client's `IP` address. This also applies to `JSONP`, which is implemented using an HTTP `GET` request.

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-30T19:59:09.150

Yes, the call is made by the browser, so it will use the IP address and settings of the user.

A JSONP call is actually a script tag that makes the request, so it will look to the server just as any other script tag loading script from the server.

# lexical-analysis - 编译器设计 - 词法分析：\t 占用多少列？

> ID：15722870
> 
> 赞同：1
> 
> 时间：2013-03-30T19:56:22.820
> 
> 标签：lexical-analysis, compiler-construction

我必须为我的词法分析器保留一个标记的信息，例如它的行和列。如果我遇到这样的一些源代码： `\t \t int myInt;`，我怎么知道令牌的列？因为我不知道 \t 需要多少列。谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-30T20:06:25.267

实验证据表明，gcc 至少将制表符简单地计算为单个字符。

如果您想找到通常显示文本的列号，则必须选择制表符宽度（可能是 8 或 4）并向上舍入到第一个匹配的制表位。但问题当然是不同的用户选择不同的制表符宽度，让编译器任意选择自己的制表符宽度可能只会增加混乱。

# android - 比较android中的图像？

> ID：15722875
> 
> 赞同：0
> 
> 时间：2013-03-30T19:56:48.340
> 
> 标签：android

我正在尝试在 android 中创建一个应用程序，它将图像与特定文件夹中的所有其他图像进行比较。如果图像与任何其他图像匹配，它应该将这些图像识别为相似图像。我搜索了很多，但没有找到任何具体的或一个很好的基础。是否有任何库可以实现这一点？有谁知道如何做到这一点？任何帮助将非常明显。或者有人可以告诉我如何比较两张图像是否相似或不是。我是 android 的新手，任何帮助都是一个好的开始。谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-30T20:01:41.420

是的，[OpenCV](http://code.opencv.org/projects/opencv/wiki)可以为您做到这一点。

事实上，我们已经对此进行了多次[讨论](https://stackoverflow.com/search?q=%5Bopencv%5D%20compare%20images)。

# android - Android EditText setText 不更新文本

> ID：15722878
> 
> 赞同：7
> 
> 时间：2013-03-30T19:57:06.597
> 
> 标签：android, text, dialog, android-edittext, set

你好呀。我不知道发生了什么。我试图`EditText`在创建 a 时更改 a 的文本`DialogFragment`，但`EditText`并没有更新文本。如果我打电话`getText().length()`，我会注意到内容发生了`EditText`变化。但是，视觉保持不变，只是空的。

**为什么？**

预先感谢人们

这是代码：

```
public class ItemNameDialog extends DialogFragment {
    @Override
    public Dialog onCreateDialog(final Bundle bundle) {
        System.out.println("ON CREATE DIALOG WAS CALLED");   //This appears on LogCat, so this method is called.. the problem is not that

        AlertDialog.Builder builder = new AlertDialog.Builder(getActivity());
        builder.setTitle("Configure an item to count:");

        LayoutInflater inflater = getActivity().getLayoutInflater();

        View view = inflater.inflate(R.layout.itempick_layout, null);
        builder.setView(view);

        final CheckBox box = (CheckBox) view.findViewById(R.id.itemSenseCheckBox);
        final EditText itemNameBox = (EditText) view.findViewById(R.id.itemNameText);
        final Spinner spinner = (Spinner) view.findViewById(R.id.itemsDefault);
        final int viewIDClicked = getArguments().getInt(clickableViewID);
        final String actualName = getArguments().getString(actualNameItemView);

        System.out.println("H - before: " + itemNameBox.getText().toString().length());    //it appears on logcat "H - before: 0"
        itemNameBox.setText(actualName);
        System.out.println("H - after: " + itemNameBox.getText().toString().length());   //it appears on logcat "H - before: 3"  so why not changing ?

        return builder.create();
    }
} 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-30T21:00:10.317

我的问题是，在该代码下方，在 onCreateDialog 方法结束之前，我有一些方法可以控制微调器。
该微调器的第一项具有“不选择任何内容”的目的，在该项目选择中，我只是擦除了该编辑文本的内容，如下所示：

```
@Override
public void onItemSelected(AdapterView<?> parent, View view,
                int pos, long id) {

if(pos == 0){
    if(editText.length() != 0 )
        editText.setText("");
} 
```

And I didnt know that while creating the spinner, it does trigger the event "onItemSelected" and because of that, the edittext was everytime erased, even when I didnt click on that item of the spinner..

So I managed to overcome this by a simple boolean. Every time the method onCreateDialog I put the boolean to true, and then my onItemSelected just operate when that bolean is false.
Like the code below:

```
@Override
public void onItemSelected(AdapterView<?> parent, View view, int pos, long id) {

    if(firstGoingSpinner){
            firstGoingSpinner = false;

        }else{
            if(pos == 0){
                if(editText.length() != 0 )
                    editText.setText("");

            }else{
                editText.setText(""+parent.getItemAtPosition(pos));
                Editable etext = editText.getText();
                Selection.setSelection(etext, editText.length());
            }

        }
    } 
```

I hope this helps someone in the future ;)

# c# - 在字符串上构建表达式等于

> ID：15722880
> 
> 赞同：3
> 
> 时间：2013-03-30T19:57:45.127
> 
> 标签：c#, .net, c#-4.0, expression

下面的代码可以使用`StartsWith`，`Contains`但是当我尝试时，`Equals`我得到了这个异常：*'System.String' 类型上的多个方法 'Equals' 与提供的参数兼容*。

要恢复， CreatePredicate 可以构建 3 种类型的谓词，但只有以下`Equals`不起作用：

*   `AList.Where(x => x.MyField.StartsWith("ValueToSearch")); //OK`
*   `AList.Where(x => x.MyField.Contains("ValueToSearch")); //OK`
*   `AList.Where(x => x.MyField.Equals("ValueToSearch")); //Not OK`

..

```
public enum TypeSearch
        {
            StartsWith = 1,
            Contains = 2,
            Equals = 3
        }

    private static Expression<Func<T, bool>> CreatePredicate<T>(string member, object value, TypeSearch type)
    {
        var p = System.Linq.Expressions.Expression.Parameter(typeof(T));
        System.Linq.Expressions.Expression body = p;
        foreach (var subMember in member.Split('.'))
        {
            body = System.Linq.Expressions.Expression.PropertyOrField(body, subMember);
        }

        var res = System.Linq.Expressions.Expression.Lambda<Func<T, bool>>(
                System.Linq.Expressions.Expression.Call(
                    System.Linq.Expressions.Expression.Call(
                        body,
                        "ToUpper", null),
                    type.ToString(), null,
                    System.Linq.Expressions.Expression.Constant(value.ToString().ToUpper())
                ), p);

        return res;
    } 
```

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2013-03-30T20:27:46.023

正如错误消息所解释的，`Equals`在`string`类型 -[`Equals(object)`](http://msdn.microsoft.com/en-gb/library/fkfd9eh8.aspx)和[`Equals(string)`](http://msdn.microsoft.com/en-gb/library/858x0yyx.aspx). 由于您只是使用名称来定位您想要的方法，因此匹配是不明确的。

一种解决方案是将`MethodInfo`for 方法传递给`Expression.Call`例如

```
MethodInfo equalsMethod = typeof(string).GetMethod("Equals", new[] { typeof(string) });
Expression.Call(instanceExpr, equalsMethod, Expression.Constant(value.ToString().ToUpper())); 
```

# python - Python ImportError：Google 应用引擎项目中没有名为 main 的模块

> ID：15722882
> 
> 赞同：4
> 
> 时间：2013-03-30T19:57:58.270
> 
> 标签：python, google-app-engine

我有以下 app.yaml 文件

```
application: gtryapp
version: 1
runtime: python27
api_version: 1
threadsafe: yes

handlers:

- url: /images/(.*\.(gif|png|jpg))
  static_files: static/img/\1
  upload: static/img/(.*\.(gif|png|jpg))

- url: /css/(.*\.css)
  mime_type: text/css
  static_files: static/css/\1
  upload: static/css/(.*\.css)

- url: /js/(.*\.js)
  mime_type: text/javascript
  static_files: static/js/\1
  upload: static/js/(.*\.js)

- url: /(.*\.html)
  mime_type: text/html
  static_files: static/\1
  upload: static/(.*\.html)

- url: .*
  script: main.app

libraries:

- name: webapp2
  version: "2.5.2" 
```

和文件 app.py：

```
import webapp2

class MainPage(webapp2.RequestHandler):
def get(self):
    if self.request.url.endswith('/'):
        path = '%sindex.html'%self.request.url
    else:
        path = '%s/index.html'%self.request.url

    self.redirect(path)

    application = webapp2.WSGIApplication([('/.*', MainPage)],
                                     debug=True) 
```

我应该部署的文件只是 html 文件或 js 或图像，编译应用程序后出现以下错误：

raise ImportError('%s has no attribute %s' % (handler, name)) ImportError: has no attribute app

* * *

已解决：我不得不调用“应用程序”而不是“应用程序”！

```
 app = webapp2.WSGIApplication([('/.*', MainPage)],
                                     debug=True) 
```

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-03-30T20:08:28.693

您调用了文件 index.py，而不是 main.py。重命名它，或者`index.app`在 yaml 中使用。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-30T20:46:46.480

您遇到的问题是您的`app.yaml`文件没有正确描述您的代码。这是有问题的位：

```
- url: .*
  script: main.app 
```

This says that all URLs that were not matched by some previous entry should be handled by the `app` object of the `main` module, which should be a WSGI application object (see the WSGI standard).

This doesn't work because your code is set up differently. Your primary module is in `index.py` (the `index` module) and its interface with the server is via the CGI standard (though WSGI is used internally).

So, you need to change something. It could either be the `app.yaml` description of the app, or it could be the organization of your code.

Making your code work as a CGI-style program is easy. Just change `app.yaml` to point to `index.py` as the script. The `.py` part in this case is the file extension, and the file will be run as a script.

If instead you want to go with the newer, WSGI-compatible style (which is probably the best option), [the documentation](https://developers.google.com/appengine/docs/python/config/appconfig#Script_Handlers) suggests the following format:

```
import webapp2

class MainPage(webapp2.RequestHandler):
    def get(self):
        self.response.headers['Content-Type'] = 'text/plain'
        self.response.out.write('Hello, webapp World!')

app = webapp2.WSGIApplication([('/', MainPage)]) 
```

Your code is almost like this already. To make it work, get rid of your `main` function and `if __name__ == "__main__"` boilerplate. Replace it with:

```
app = webapp.WSGIApplication([('/.*', IndexHandler)],
                              debug=False) 
```

This creates an `app` object at the top level of your module. Now, either rename your `index.py` file to `main.py`, or change `app.yaml` to point to `index.app`. The `.app` part of this is different this time. Rather than a file extension, it represents Python member access (in this case, accessing a global variable in a module).

# ubuntu - Can't SSH as root into EC2 server - Please login as the user "ubuntu" rather than the user "root"

> ID：15722886
> 
> 赞同：24
> 
> 时间：2013-03-30T19:58:31.270
> 
> 标签：ubuntu, ssh, amazon-web-services, root

I am trying to SSH into my server via WinSCP, although the problem will occur with putty as well.

I have Ubuntu 12.04 I have edited `/etc/ssh/sshd_config` and added `PermitRootLogin without-password` to the bottom of the file. But this still doesn't seem to have changed my problem.

People have mentioned needed to restart ssh demon. I have tried:

```
 /etc/init.d/sshd reload
 reload sshd.service
 /etc/init.d/sshd reload 
```

All of the above are unrecognised.

I have then tried `Files ¬ Custom Commands ¬ sudo -s & su` No luck there either.

* * *

## 回答 #1

> 赞同：60
> 
> 时间：2013-03-30T20:06:23.973

[http://alestic.com/2009/04/ubuntu-ec2-sudo-ssh-rsync](http://alestic.com/2009/04/ubuntu-ec2-sudo-ssh-rsync) describes all the options available to you, and includes instructions for enabling SSH to root on EC2:

```
ssh -i KEYPAIR.pem ubuntu@HOSTNAME   'sudo cp /home/ubuntu/.ssh/authorized_keys /root/.ssh/' 
```

# c# - scraping 3rd node using htmlagilitypack

> ID：15722890
> 
> 赞同：0
> 
> 时间：2013-03-30T19:59:00.680
> 
> 标签：c#, html-agility-pack

In a webpage there are several nodes having class='inner'. But i need to the 3rd node having class='inner'. If i use

```
string x = textBox1.Text;
string q = "";

HtmlWeb web = new HtmlWeb();
HtmlAgilityPack.HtmlDocument doc = web.Load("myweb_link" + x);
HtmlNodeCollection nodes = doc.DocumentNode.SelectNodes("//div[@class='inner']");

if (nodes != null)
{

    foreach (HtmlNode n in nodes)
    {
        q = n.InnerText;
        q = System.Net.WebUtility.HtmlDecode(q);
        q = q.Trim();
        MessageBox.Show(q);
    }

}
else
    MessageBox.Show("nothing found "); 
```

it gives me all the nodes having `class='inner'`. i also know that.

But i want only the 3rd node. How can i get that???

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-30T20:02:56.567

Get the third node from the `nodes` variable using the indexer:

```
var thirdNode = nodes[2]; 
```

# r - 如何在 r 中创建设计矩阵

> ID：15722892
> 
> 赞同：6
> 
> 时间：2013-03-30T19:59:21.123
> 
> 标签：r

我有两个因素。因素 A 有 2 级，因素 B 有 3 级。

如何创建以下设计矩阵？

```
 factorA1 factorA2 factorB1 factorB2 factorB3
[1,]        1        0        1        0        0
[2,]        1        0        0        1        0
[3,]        1        0        0        0        1
[4,]        0        1        1        0        0
[5,]        0        1        0        1        0
[6,]        0        1        0        0        1 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-30T20:06:22.427

你有几个选择：

使用 base 并自己拼凑：

```
(iris.dummy<-with(iris,model.matrix(~Species-1))) 
(IRIS<-data.frame(iris,iris.dummy)) 
```

或者使用ade4包如下：

```
dummy <- function(df) {
    require(ade4)
    ISFACT <- sapply(df, is.factor)
    FACTS <- acm.disjonctif(df[, ISFACT, drop = FALSE])
    NONFACTS <- df[, !ISFACT,drop = FALSE]
    data.frame(NONFACTS, FACTS)
}

dat <-data.frame(eggs = c("foo", "foo", "bar", "bar"),  
    ham = c("red","blue","green","red"), x=rnorm(4)) 
dummy(dat)

##           x eggs.bar eggs.foo ham.blue ham.green ham.red
## 1 0.3365302        0        1        0         0       1
## 2 1.1341354        0        1        1         0       0
## 3 2.0489741        1        0        0         1       0
## 4 1.1019108        1        0        0         0       1 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-07-05T14:10:32.407

`model.matrix`是`lm`和其他人在后台使用的为您转换的过程。

```
dat <- data.frame(f1=sample(LETTERS[1:3],20,T),f2=sample(LETTERS[4:5],20,T),id=1:20)
dat

model.matrix(~dat$f1 + dat$f2) 
```

它将 INTERCEPT 变量创建为一列 1，但如果需要，您可以轻松删除它。

```
model.matrix(~dat$f1 + dat$f2)[,-1] 
```

*编辑：现在我看到这与其他评论之一基本相同，但更简洁。*

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-30T20:19:16.850

假设您的数据位于名为 的 data.frame 中`dat`，假设这两个因素在此示例中给出：

```
> dat <- data.frame(f1=sample(LETTERS[1:3],20,T),f2=sample(LETTERS[4:5],20,T),id=1:20)
> dat
   f1 f2 id
1   C  D  1
2   B  E  2
3   B  E  3
4   A  D  4
5   C  E  5
6   C  E  6
7   C  D  7
8   B  E  8
9   C  D  9
10  A  D 10
11  B  E 11
12  C  E 12
13  B  D 13
14  B  E 14
15  A  D 15
16  C  E 16
17  C  D 17
18  C  D 18
19  B  D 19
20  C  D 20
> dat$f1
 [1] C B B A C C C B C A B C B B A C C C B C
Levels: A B C
> dat$f2
 [1] D E E D E E D E D D E E D E D E D D D D
Levels: D E 
```

对于每个因素，您可以使用`outer`如您所展示的那样获取矩阵：

```
> F1 <- with(dat, outer(f1, levels(f1), `==`)*1)
> colnames(F1) <- paste("f1",sep="=",levels(dat$f1))
> F1
      f1=A f1=B f1=C
 [1,]    0    0    1
 [2,]    0    1    0
 [3,]    0    1    0
 [4,]    1    0    0
 [5,]    0    0    1
 [6,]    0    0    1
 [7,]    0    0    1
 [8,]    0    1    0
 [9,]    0    0    1
[10,]    1    0    0
[11,]    0    1    0
[12,]    0    0    1
[13,]    0    1    0
[14,]    0    1    0
[15,]    1    0    0
[16,]    0    0    1
[17,]    0    0    1
[18,]    0    0    1
[19,]    0    1    0
[20,]    0    0    1 
```

现在对第二个因素做同样的事情：

```
> F2 <- with(dat, outer(f2, levels(f2), `==`)*1)
> colnames(F2) <- paste("f2",sep="=",levels(dat$f2)) 
```

他们`cbind`得到最终结果：

```
> cbind(F1,F2) 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2015-11-30T04:25:06.600

扩展和概括@Ferdinand.kraft 的答案：

```
dat <- data.frame(
    f1 = sample(LETTERS[1:3], 20, TRUE),
    f2 = sample(LETTERS[4:5], 20, TRUE),
    row.names = paste0("id_", 1:20))

covariates <- c("f1", "f2") # in case you have other columns that you don't want to include in the design matrix
design <- do.call(cbind, lapply(covariates, function(covariate){
    apply(outer(dat[[covariate]], unique(dat[[covariate]]), FUN = "=="), 2, as.integer)
}))
rownames(design) <- rownames(dat)
colnames(design) <- unlist(sapply(covariates, function(covariate) unique(dat[[covariate]])))
design <- design[, !duplicated(colnames(design))] # duplicated colnames happen sometimes
design
#       C A B D E
# id_1  1 0 0 1 0
# id_2  0 1 0 1 0
# id_3  0 0 1 1 0
# id_4  1 0 0 1 0
# id_5  0 1 0 1 0
# id_6  0 1 0 0 1
# id_7  0 0 1 0 1 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2019-06-23T23:25:52.853

`model.matrix()`如果我们添加协变量和与因素的`x`相互作用，事情会再次变得复杂。`x`

```
a=rep(1:2,3)
b=rep(1:3,2)
x=1:6
df=data.frame(A=a,B=b,x=x)
# Lie and pretend there's a level 0 in each factor.
df$A=factor(a,as.character(0:2))

df$B=factor(b,as.character(0:3))

mm=model.matrix (~A + B + A:x + B:x,df)

print(mm)

  (Intercept) A1 A2 B1 B2 B3 A0:x A1:x A2:x B1:x B2:x B3:x
1           1  1  0  1  0  0    0    1    0    1    0    0
2           1  0  1  0  1  0    0    0    2    0    2    0
3           1  1  0  0  0  1    0    3    0    0    0    3
4           1  0  1  1  0  0    0    0    4    4    0    0
5           1  1  0  0  1  0    0    5    0    0    5    0
6           1  0  1  0  0  1    0    0    6    0    0    6 
```

`mm`截距也是如此，但现在`A:x`交互项具有不需要的级别`A0:x` 如果我们将 x 作为单独的项重新引入，我们将取消该不需要的级别

```
mm2=model.matrix (~ x + A +   B + A:x + B:x, df)
print(mm2)
  (Intercept) x A1 A2 B1 B2 B3 x:A1 x:A2 x:B1 x:B2 x:B3
1           1 1  1  0  1  0  0    1    0    1    0    0
2           1 2  0  1  0  1  0    0    2    0    2    0
3           1 3  1  0  0  0  1    3    0    0    0    3
4           1 4  0  1  1  0  0    0    4    4    0    0
5           1 5  1  0  0  1  0    5    0    0    5    0
6           1 6  0  1  0  0  1    0    6    0    0    6 
```

我们可以摆脱不需要的拦截和不需要的裸`x`词

```
dm2=as.matrix(mm2[,c(-1,-2)])
print(dm2)

  A1 A2 B1 B2 B3 x:A1 x:A2 x:B1 x:B2 x:B3
1  1  0  1  0  0    1    0    1    0    0
2  0  1  0  1  0    0    2    0    2    0
3  1  0  0  0  1    3    0    0    0    3
4  0  1  1  0  0    0    4    4    0    0
5  1  0  0  1  0    5    0    0    5    0
6  0  1  0  0  1    0    6    0    0    6 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2019-06-19T23:09:03.463

模型矩阵只允许对公式中的第一个因素进行所谓的“虚拟”编码。如果存在拦截，则它扮演该角色。为了获得冗余索引矩阵的预期效果（对应因子级别的每一列中都有 1，其他地方为 0），您可以撒谎`model.matrix()`并假装有一个额外的级别。然后修剪截距柱。

```
 > a=rep(1:2,3)
> b=rep(1:3,2)
> df=data.frame(A=a,B=b)
> # Lie and pretend there's a level 0 in each factor.
> df$A=factor(a,as.character(0:2))

> df$B=factor(b,as.character(0:3))

> mm=model.matrix (~A+B,df)

> mm
  (Intercept) A1 A2 B1 B2 B3
1           1  1  0  1  0  0
2           1  0  1  0  1  0
3           1  1  0  0  0  1
4           1  0  1  1  0  0
5           1  1  0  0  1  0
6           1  0  1  0  0  1
attr(,"assign")
[1] 0 1 1 2 2 2
attr(,"contrasts")
attr(,"contrasts")$A
[1] "contr.treatment"
attr(,"contrasts")$B
[1] "contr.treatment"

> # mm has an intercept column not requested, so kill it
> dm=as.matrix(mm[,-1])
> dm
  A1 A2 B1 B2 B3
1  1  0  1  0  0
2  0  1  0  1  0
3  1  0  0  0  1
4  0  1  1  0  0
5  1  0  0  1  0
6  0  1  0  0  1

> # You can also add interactions
> mm2=model.matrix (~A*B,df)
> dm2=as.matrix(mm2[,-1])
> dm2
  A1 A2 B1 B2 B3 A1:B1 A2:B1 A1:B2 A2:B2 A1:B3 A2:B3
1  1  0  1  0  0     1     0     0     0     0     0
2  0  1  0  1  0     0     0     0     1     0     0
3  1  0  0  0  1     0     0     0     0     1     0
4  0  1  1  0  0     0     1     0     0     0     0
5  1  0  0  1  0     0     0     1     0     0     0
6  0  1  0  0  1     0     0     0     0     0     1 
```

# c++ - Initialize static Array of functions with NULL values

> ID：15722899
> 
> 赞同：0
> 
> 时间：2013-03-30T20:00:21.540
> 
> 标签：c++, arrays, class, pointers, static

i have the following class:

```
class A
{
public:
    static void (*callbacks[6])();
}; 
```

And i need to initialize all values of callbacks, to NULL.

How is that done?

I have tried the following:

```
void (* )[6]() A::callbacks[6] = {
    NULL, NULL, NULL, NULL, NULL, NULL
}; 
```

But doesn't works

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-30T20:09:46.943

The syntax for your definition is wrong.

Change

```
void (* )[6]() A::callbacks[6] 
```

to

```
void (*A::callbacks[6])() 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-30T20:09:40.270

```
typedef void(*T)();
T A::callbacks[6] = {NULL,NULL,NULL,NULL,NULL,NULL}; 
```

# java - 修改字节码的特定部分

> ID：15722902
> 
> 赞同：1
> 
> 时间：2013-03-30T20:00:29.873
> 
> 标签：java, bytecode, bytecode-manipulation

如何修改字节码的特定部分以添加内容？

我的意思是我知道什么类，什么方法（或字段），以及我想要修改的行号，但我想知道我将如何实际修改特定行/字段的字节码一类。

假设我有一堂课，*GammaController*

```
public class GammaController {
    private int gamma = 60;

    public int getScreenGamma() {
        return gamma;
    }

    public void setScreenGamma(int gamma) {
        this.gamma = gamma;
    }
} 
```

但我想更改 GammaController.setScreenGamma() 以不允许超过 100 的值，而不编辑文件。我知道该方法在第 8 行（我们现在将忽略包），并且必须在第 9 行检查是否超过 100，将方法的一部分移到第 1 行。

假设我也知道将进行检查的字节码。我想要做的是运行一个针对包含 GammaController.class 的 jar 的应用程序，并让应用程序使用检查值的字节码修改类以确保它不超过 100。我将如何去做呢？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-30T20:27:08.293

[AspectJ](http://www.eclipse.org/aspectj/)（或任何 AOP 库）在这里可能会有一些用处。它允许您定义*切入点*，例如在调用特定方法时（或在其他情况中定义字段时）。然后您可以应用*建议*，这是您在连接点之前/之后执行的操作*（*连接点是应用切入点的位置）。

例如，

每当调用该方法时，应用验证 gamma 值 < 100 的建议。如果值无效，则抛出异常。如果有效，则照常继续。

如果您真的想修改不属于切入点可以处理的类别的单独代码行，您可以使用@DavidTitarenco 建议的 ASM 库

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-30T20:19:42.113

您需要使用[ASM 2.0](http://asm.ow2.org/doc/tutorial-asm-2.0.html)或 3.0/ [4.0](http://download.forge.objectweb.org/asm/asm4-guide.pdf)（取决于您的 Java 版本）。要执行我认为您想做的事情，您需要使用 a`ClassVisitor`并修改一些值（通过`VisitField`等）。然后，您将需要重新加载该类。

这很重要，但 ASM 人员提供了一些非常冗长的文档。快乐的黑客。

# php - 用数字对替换字符串中的数字求和

> ID：15722903
> 
> 赞同：0
> 
> 时间：2013-03-30T20:00:37.273
> 
> 标签：php, arrays, sum

假设我有这两个数组

```
 $letters = array('a','b','c', 'd', 'e');
   $replace = array( 1,  5,  10, 15 , 20);
   $text = "abd cde dee ae d" ;
   $re = str_replace($letters, $replace, $text) ;
   echo $re ;  //this output:

     1515 101520 152020 120 15 
```

现在我想对每个单词的上述数字求和，结果应该是这样的：

```
 21 45 55 21 15 
```

我尝试的是：

```
 $resultArray = explode(" ", $re); 

    echo array_sum($resultArray).'<br />' ; // but it output wrong result. 
                                           // it output this : 255190 
```

我怎样才能做到这一点？

非常感谢任何帮助。

编辑：

像这样的阿拉伯字母

```
 $letters = array('ا', 'ب','ج','د' ) ;
   $replace = array(1, 5, 10, 15 ) ;
   $text = "جا باب جب"; 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-30T20:03:26.763

将字符串转换为数组并使用[`array_sum`](http://php.net/manual/en/function.array-sum.php).

```
array_sum(explode(' ', $re)); 
```

**编辑**

不好意思，误会了：

```
$letters = array('a','b','c', 'd', 'e');

$replace = array( 1,  5,  10, 15 , 20);

$text = "abd cde dee ae d" ;

$new_array = explode(' ', $text);

$sum_array = array();

foreach ($new_array as $string)
{

  $nums = str_split($string);

  foreach ($nums as &$num)
  {
    $num = str_replace($letters, $replace, $num);
  }

  $sum_array[] = array_sum($nums);

}

echo implode(' ', $sum_array); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-30T20:13:49.103

我建议不要用数字替换字母，而是一次只查找替换数组中的字母：

**编辑**

```
<?php
    $text = "abd cde dee ae d";
    $replace = array('a' => 1, 'b' => 5, 'c' => 10, 'd' => 15, 'e' => 20);
    $letters = str_split($text);
    $sums = array(0);

    foreach ($letters as $letter) {
        // Add a new element to the sum array.
        if ($letter == ' ') {
            $sums[] = 0;
        } else {
            $sums[count($sums) - 1] += $replace[$letter];
        }
    }

    echo implode(" ", $sums);
?> 
```

这是一个工作示例： [http ://codepad.org/Cw71zuKD](http://codepad.org/Cw71zuKD)

# haskell - mplus 必须始终是关联的吗？Haskell wiki vs. Oleg Kiselyov

> ID：15722906
> 
> 赞同：26
> 
> 时间：2013-03-30T20:00:50.093
> 
> 标签：haskell, monads, monadplus

[Haskell](https://en.wikibooks.org/wiki/Haskell/MonadPlus#The_MonadPlus_laws) wikibook断言

> MonadPlus 的实例需要满足几个规则，就像 Monad 的实例需要满足三个 monad 定律一样。... 最重要的是 mzero 和 mplus 形成一个幺半群。

其结果是它`mplus`必须是关联的。[Haskell wiki](http://www.haskell.org/haskellwiki/MonadPlus)同意。

然而，Oleg 在[他的众多回溯搜索实现之一](http://okmij.org/ftp/continuations/Searches.hs)中写道

```
-- Generally speaking, mplus is not associative. It better not be,
-- since associative and non-commutative mplus makes the search
-- strategy incomplete. 
```

定义 non-associative 是否符合规定`mplus`？前两个链接非常清楚地表明如果不是关联的，您就没有真实的`MonadPlus`实例。`mplus`但是如果*Oleg*这样做了……（另一方面，在该文件中，他只是定义了一个名为 的函数`mplus`，并没有声称那*是* `mplus`of `mplus`。`MonadPlus`如果这是正确的解释，他选择了一个非常令人困惑的名称。）

* * *

## 回答 #1

> 赞同：30
> 
> 时间：2013-04-06T17:15:00.113

以下是奥列格本人的意见，以及我的评论和他的澄清。

**好的**首先，我想说明我与 Gabriel Gonzalez 的分歧。不是每个人都同意关于和`MonadPlus`应该是幺半群。报告对此只字未提。有许多令人信服的案例并非如此（见下文）。一般来说，代数结构应该适合任务。这就是为什么我们有群体，还有更弱的半群体或群体（岩浆）。它似乎 通常被视为搜索/非确定性单子。如果是这样，那么 的属性应该是那些有助于搜索和推理搜索的属性——而不是某些人出于任何原因喜欢的理想的临时属性。让我举个例子：设定法律很诱人`mplus``mzero``MonadPlus``MonadPlus`

```
m >> mzero === mzero 
```

然而，支持搜索并能产生其他效果（想想 `NonDeT m`）的 monad 不能满足该定律。例如，

```
print "OK" >> mzero  =/==  mzero 
```

因为左侧打印了一些东西，但右侧没有。同理，`mplus`不能是对称的：在同一模型中，`mplus m1 m2` 通常不同于,。`mplus m2 m1`

让我们来`mplus`。`mplus` 不需要关联的主要原因有两个。首先是搜索的完整性。考虑

```
ones = return 1 `mplus` ones

foo = ones `mplus` return 2
  === {- inlining ones -}
  (return 1 `mplus` ones) `mplus` return 2
  === {- associativity -}
  return 1 `mplus` (ones `mplus` return 2)
  ===
  return 1 `mplus` foo 
```

因此，看起来，和 foo 是相同的。这意味着，我们永远不会从 foo 得到答案 2。

该结果适用于任何可以由 表示的搜索，`MonadPlus`只要`mplus`是关联的和不可交换的。因此，如果`MonadPlus`是搜索的单子，那么的关联性`mplus`是不合理的要求。

这是第二个原因：有时我们希望进行概率搜索——或者，一般来说，加权搜索，当一些备选方案被加权时。很明显，概率选择算子不是关联的。`mplus`出于这个原因，我们的 JFP 论文特别避免`mzero`在`MonadPlus`.

[http://okmij.org/ftp/Computation/monads.html#lazy-sharing-nondet](http://okmij.org/ftp/Computation/monads.html#lazy-sharing-nondet) （参见论文图 1 的讨论）。

**R.C.** I think Gabriel and you agree on the fact that search monads do not exhibit the monoid structure. The argument boils down to whether `MonadPlus` should be used for search monads or should there be another class, let's call it `MonadPlus'`, which is just like `MonadPlus` but with more lax laws. As you say, the report doesn't say anything on this topic, and there's no authority to decide.

For the purpose of reasoning, I don't see any problem with that — one just has to state clearly her assumptions about the `MonadPlus` instances.

As for the rewrite rule that re-associates `mplus`'es, the mere existence and widespread use of `MonadPlus` instances that are not associative, regardless of whether they are "broken", means that one should probably abstain from defining it.

**O.K.** I guess I disagree with Gabriel's statement

> The monoid laws are the minimum requirement because without them the other laws are meaningless. For example, when you say `mzero >>= f = mzero`, you first need some sensible definition of `mzero` is, but without the identity laws you don't have that. The monoid laws are what keep the other proposed laws "honest". If you don't have the monoid laws then you have no sensible laws and what's the point of a theoretical type class that has no laws?

For example, LogicT paper and especially the JFP paper has lots of examples of equational reasoning about non-determinism, without associativity of `mplus`. The JFP paper omits all monoid laws for `mplus` and `mzero` (but uses `mzero >>= f === mzero`). It seems one can have "honest" and "sensible laws" for non-determinism and search without the monoid laws for `mplus` and `mzero`.

I'm also not sure I agree with the claim

> The two laws that everybody agrees that `MonadPlus` should obey are the identity and associativity laws (a.k.a. the monoid laws):

I'm not sure a poll has been taken on this. The Report states no laws for `mplus` (perhaps the authors were still debating them). So, I would say the issue is open — and this is the main message to get across.

* * *

## 回答 #2

> 赞同：22
> 
> 时间：2013-03-30T21:15:43.867

每个人都同意`MonadPlus`应该遵守的两条定律是恒等律和结合律（又名幺半群定律）：

```
mplus mempty a = a

mplus a mempty = a

mplus (mplus a b) c = mplus a (mplus b c) 
```

我总是假设它们在`MonadPlus`我使用的所有情况下都成立，并认为违反这些法律的情况是“破坏”的，无论它们是否由 Oleg 编写。

奥列格是对的，关联性不能很好地与广度优先搜索配合使用，但这只是意味着这`MonadPlus`不是他正在寻找的抽象。

为了回答您在评论中提出的观点，我始终认为您的重写规则是合理的。

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2013-03-30T20:34:39.430

实例违反关联性的情况很少见`MonadPlus`，但显然并非不可能。类型类只能在一定程度上满足“明显”的规律。例如，`MonadPlus` [这里讨论了](https://stackoverflow.com/questions/10167879/distinction-between-typeclasses-monadplus-alternative-and-monoid)另外四组可能的定律，而没有任何结论，并且图书馆遵循各种约定而没有具体说明哪一个。

显然，奥列格有理由不考虑关联性。它是“真正的`MonadPlus`实例”吗？谁知道呢，说的不够清楚。

# php - php从ajax div重新加载页面

> ID：15722907
> 
> 赞同：0
> 
> 时间：2013-03-30T20:00:52.310
> 
> 标签：php, ajax, jquery

我使用带有 Jquery 选项卡的页面，如果我在选项卡中提交其中一个表单，则只有该选项卡被提交并使用此 jquery 代码刷新：

```
$(document).on("submit", "#plaatsen_stap3", function(event) {
/* stop form from submitting normally */    

event.preventDefault();      
    $.ajax({
      type:"GET",
      url:"../plaatsen_advertentie/plaatsen_advertentie_stap3.php",
      cache: false,                 
      data: $("#plaatsen_stap3").serialize(),
      success:function(data){
        $("#tab2").html(data);
      }     
    });
}); 
```

但在必须付款的情况下，我想用付款页面重新加载页面。我想在 div 重新加载数据后这样做，因为我需要在数据库中使用来自 GET 的数据放置一个支付行。位置可以选择吗？如果我现在使用它，则只有 div (tab2) 会加载付款页面....

所以： 1.push submit 2.submit the form and load page/script in div by Ajax 3.check in php script (in the div) if payment is required 4.if yes,在数据库中添加支付数据行并重新加载整个带有付款页面的页面（在 url 中有一些 Get 数据（最后插入的 id）

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-30T20:09:48.560

```
 success:function(data){
    $("#tab2").html(data);
    location.href = "/yourpage.php";
  } 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-31T05:32:56.613

我认为 load() 是您正在寻找的。[http://api.jquery.com/load/](http://api.jquery.com/load/)

下面的代码旨在作为指导，我什至不确定它是否有效（我还没有测试过）。但我希望它会有所帮助。

我会做这样的事情：

```
//Step 1
$(document).on("submit", "#plaatsen_stap3", function(event) {
/* stop form from submitting normally */    

event.preventDefault();      
    $.ajax({
      type:"GET",
      url:"../plaatsen_advertentie/plaatsen_advertentie_stap3.php",
      cache: false,                 
      data: $("#plaatsen_stap3").serialize(),
      success:function(data){

   //Step 2 - submit the form and load page/script in div by Ajax 
   //Make sure array[] is an actual array that is sent to the test.php-script.
   $("#tab2").load("test.php", { 'array[]' , function() {
            //Step 3 - check in php script (within the div) if payment is needed (Do this from test.php - don't check the actual div but check values from array[])
            //Step 4 -  if yes,add row with payment data in database and reload entire page with payment page (with some Get data in the url (last inserted id)                     
            //Do this from test.php and use header-redirect to reload entire page   
           $("tab2").html(data); //Do this when test.php is loaded
       }

       } );

      }     
    });
}); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-30T20:32:27.740

既然您想在生成 HTML 后执行此操作，请给大约 5 秒的时间？

```
success:function(data){
    $("#tab2").html(data);
    setTimeout(function(){location.href = "/yourpage.php";}, 5000);
} 
```

这适用于您的用例。这不能从服务器端完成。

# ios - How to upload new version of application to apple store

> ID：15722909
> 
> 赞同：-1
> 
> 时间：2013-03-30T20:00:57.743
> 
> 标签：ios, app-store, provisioning-profile, ios-provisioning

My application is on apple store (1.0.0) , i am ready with my new build to upload a new version 1.0.1 on apple store.

I am stuck in provisioning profile section .

Do i need to again download

```
1\. Developer Profile
2\. Distribution profile 
```

I made both profiles 4 months back (for the uploaded version 1.0.0) ,one more thing- is the validity of application depends on that also ?

what is the difference bw uploading a new app and uploading its version ?

Thanks is advance :)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-30T20:06:33.067

No need to create a new developer profile or distribution profile. Make sure you validate it when archiving to make sure that apple is happy with your version number - you need to increment the build number otherwise this will fail also.

Just submit afterwards and the process is the same as the first time round. Good luck getting the update accepted!

# php - 预赛不工作

> ID：15722913
> 
> 赞同：0
> 
> 时间：2013-03-30T20:01:46.217
> 
> 标签：php, preg-match

我正在用preg_match检查用户名，但我做错了，只是我不知道我做错了什么，我尝试了很多次，但没有成功，所以如果你能帮助我，非常感谢你，这也是一个很好的给我上一课。这是我正在做的事情的来源：

```
<?php
  if(isset($_POST['submit'])) 
  {
?>
<html>
<head>
<script language="javascript" src="http://ajax.googleapis.com/ajax/libs/swfobject/2.2/swfobject.js" type="text/javascript"></script>
<script language="javascript" src="config.php?name=<?php echo $_POST['name']; ?>&amp;gender=<?php echo $_POST['gender']; ?>&amp;color=<?php echo $_POST['color']; ?>" type="text/javascript"></script>
</head>
<body>
<!-- Applet Start -->
<br /><div style="text-align: center;">
<div id="lightIRC" style="height:500px; text-align:center;"><p><a href="http://www.adobe.com/go/getflashplayer" title="Get flash player"><img src="http://www.adobe.com/images/shared/download_buttons/get_flash_player.gif" alt="Get Adobe Flash player" /></a></p></div>

<script type="text/javascript">swfobject.embedSWF("http://www.futurechat.nl/chat/lightIRC.swf", "lightIRC", "100%", "500", "10.0.0", "http://www.futurechat.nl/chat/expressInstall.swf", params);</script>
</div>
</body>
</html>
<?php
}
  else {
  print_form();
}
function print_form() {
// MAKE SURE USERNAME IS ALPHANUMERIC
$name = $_POST['name'];
if(preg_match('/[^A-Za-z0-9_-]/', $_POST['name']))
  echo "Invalid Username";
?>
<html>
<head>
<title>Login</title>
<style>
body {font-family: Verdana;}
</style>
</head>
<body>
<form action="chatlogin.php" method="post">
<table cellspacing="0" cellpadding="0" align="center" style="background: #cccccc;text-align: center;font-size: 13px;">
<tr valign="top">
<td>
Nickname: 
<input type="text" name="name">
<br /><br />
Gender: 
<input type="radio" name="gender" value="Male">Male <input type="radio" name="gender" value="Female">Female
<br /><br />
Applet Color: 
<select name="color">
  <option value="lightblue">Lightblue</option>
  <option value="blue">Blue</option>
  <option value="darkorange">Dark Orange</option>
  <option value="black">Black</option>
  <option value="yellow">Yellow</option>
  <option value="green">Green</option>
  <option value="pink">Pink</option>
  <option value="white">White</option>
</select> 
<br /><br />
<input type="submit" name="submit" value="Chat now!">
</td>
</tr></table>
</form>
</body>
</html>
<?php
}
?> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-30T20:20:30.127

更新：OP需要检测无效字符，然后，不需要匹配整个单词，他对这个模式是正确的：

```
/[^A-Za-z0-9_-]/ 
```

真正的问题可以通过删除这部分代码来解决：

```
$name = $_POST['name'];
if(preg_match('/[^A-Za-z0-9_-]/', $_POST['name']))
  echo "Invalid Username"; 
```

到页面的开头：

```
<?php
  if(isset($_POST['submit'])) 
  {
    $name = $_POST['name'];
    if(preg_match('/[^A-Za-z0-9_-]/', $_POST['name']))
      $error = "Invalid Username";
?> 
```

然后你可以`$error`在页面的任何地方回显

我也会在下面留下答案以获取一般信息。

* * *

您需要`+`在字符组末尾添加符号以匹配多个字符：

```
preg_match('/^[^A-Za-z0-9_-]+$/', $_POST['name']) 
```

您的模式将在任何地方仅匹配一个字符，因此，您还需要`^`在开头和`$`结尾添加以匹配整个单词

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-30T20:22:36.817

设置好的时候看源码`$_POST['name']`吗？看起来您正在`Invalid Username`文档的最顶部、`<html>`标签上方打印，这就是它不会显示在浏览器中的原因（因为它不是有效的 HTML）。您应该存储错误消息并将其打印在 HTML 中，或者在 HTML 中移动逻辑（由`<?php`和`?>`标签包围）

试试这个代码：

```
<?php
$ValidUsername = true;
if(isset($_POST['submit'])) {
    // MAKE SURE USERNAME IS ALPHANUMERIC
    $name = $_POST['name'];
    if(preg_match('/[^A-Za-z0-9_-]/', $name))
      $ValidUsername = false;
}
?>
<?php if(isset($_POST['submit']) && $ValidUsername): ?>
<html>
<head>
<script language="javascript" src="http://ajax.googleapis.com/ajax/libs/swfobject/2.2/swfobject.js" type="text/javascript"></script>
<script language="javascript" src="config.php?name=<?php echo $_POST['name']; ?>&amp;gender=<?php echo $_POST['gender']; ?>&amp;color=<?php echo $_POST['color']; ?>" type="text/javascript"></script>
</head>
<body>
<!-- Applet Start -->
<br /><div style="text-align: center;">
<div id="lightIRC" style="height:500px; text-align:center;"><p><a href="http://www.adobe.com/go/getflashplayer" title="Get flash player"><img src="http://www.adobe.com/images/shared/download_buttons/get_flash_player.gif" alt="Get Adobe Flash player" /></a></p></div>

<script type="text/javascript">swfobject.embedSWF("http://www.futurechat.nl/chat/lightIRC.swf", "lightIRC", "100%", "500", "10.0.0", "http://www.futurechat.nl/chat/expressInstall.swf", params);</script>
</div>
</body>
</html>

<?php else: ?>

<html>
<head>
<title>Login</title>
<style>
body {font-family: Verdana;}
</style>
</head>
<body>
<?php
if (!$ValidUsername)
    echo "<h1>Invalid Username</h1>";
?>
<form action="chatlogin.php" method="post">
<table cellspacing="0" cellpadding="0" align="center" style="background: #cccccc;text-align: center;font-size: 13px;">
<tr valign="top">
<td>
Nickname: 
<input type="text" name="name">
<br /><br />
Gender: 
<input type="radio" name="gender" value="Male">Male <input type="radio" name="gender" value="Female">Female
<br /><br />
Applet Color: 
<select name="color">
  <option value="lightblue">Lightblue</option>
  <option value="blue">Blue</option>
  <option value="darkorange">Dark Orange</option>
  <option value="black">Black</option>
  <option value="yellow">Yellow</option>
  <option value="green">Green</option>
  <option value="pink">Pink</option>
  <option value="white">White</option>
</select> 
<br /><br />
<input type="submit" name="submit" value="Chat now!">
</td>
</tr></table>
</form>
</body>
</html>
<?php endif; ?> 
```

此代码使用[替代语法](http://www.php.net/manual/en/control-structures.alternative-syntax.php)来封装 HTML 代码。我相信它更容易阅读......

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-30T20:52:36.907

In your regular expression, the dash needs to be the first character in order to be used literally. See Also [Allow - (dash) in regular expression](https://stackoverflow.com/questions/8833963/allow-dash-in-regular-expression)

# c++ - 从继承的类实例调用静态成员

> ID：15722919
> 
> 赞同：0
> 
> 时间：2013-03-30T20:02:25.613
> 
> 标签：c++, static, static-methods, static-members

我有两个类，`Y`和`X`，并`Y`拥有一些静态成员——我试图通过一个`X`实例访问它们：

```
template <class T>
class Y {
public:
    Y() {
        i = 0;
        v = std::vector<int>(10, 10);
    }
    static int value() {
        return v[i];
    }
private:
    static int i;
    static std::vector<int> v;
};

class X : public Y<X> {
public:
    X() {
    }
};

int main() {
    X *x(new X());
    std::cout << x->value() << std::endl;
} 
```

即使它编译，它也没有正确链接：

```
$ g++ t.cpp
/tmp/ccB4ijzw.o: In function `Y<X>::Y()':
t.cpp:(.text._ZN1YI1XEC2Ev[Y<X>::Y()]+0x11): undefined reference to `Y<X>::i'
t.cpp:(.text._ZN1YI1XEC2Ev[Y<X>::Y()]+0x4a): undefined reference to `Y<X>::v'
/tmp/ccB4ijzw.o: In function `Y<X>::value()':
t.cpp:(.text._ZN1YI1XE5valueEv[Y<X>::value()]+0x6): undefined reference to `Y<X>::i'
t.cpp:(.text._ZN1YI1XE5valueEv[Y<X>::value()]+0x10): undefined reference to `Y<X>::v'
collect2: ld returned 1 exit status 
```

* * *

**上下文**（如果重要）：

我正在尝试编写一个内存管理器——`class Y`它静态地保存一个内存池，以便所有实例都`class X`使用由`Y`.

我不确定这是否是我想要做的最好的方法，但这是我迄今为止想到的最优雅的方法。非常欢迎任何想法。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-30T20:05:43.797

必须定义和声明静态数据成员。如果这是一个普通的课程，你会这样做：

```
// header:
class C {
    static int i;
};

// source:
int C::i = 3; 
```

With a class template you don't ordinarily put the code in a source file, so you'd do this:

```
// header:
template <class T>
class C {
    static int i;
};

template <class T>
int C<T>::i = 3; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-30T20:07:24.600

Since the function `value` is static it is common to all instances of `class Y`. The way to call a static member function is like

```
std::cout << Y<X>::value() << std::endl; 
```

NOT (this is not illegal but it is just not a good practice. Why make the function static i you are going to do this anyway?.)

```
std::cout << x->value() << std::endl; 
```

In addition you have to define all the static members. Something like

```
template <class T>
int Y<T>::i = 0;

template <class T>
std::vector<int> Y<T>::v(0); 
```

# java - Objective-C 中的 Runnable (Java) 对应物是什么？

> ID：15722920
> 
> 赞同：0
> 
> 时间：2013-03-30T20:02:28.143
> 
> 标签：java, objective-c, grand-central-dispatch, runnable

在 Objective-C 的主线程上安排任务的好方法是什么？以下任何一种方式是否会创建一个新线程？

*   延迟后执行选择器
*   dispatch_after

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-30T20:10:11.230

两者都不会创建新线程。两者只是在当前的 NSRunLoop 上安排一个调用。

* * *

GCD 使用一个内部线程池，并且 dispatch_async 在这些线程中的任何一个上安排一个调用。这是 Runnable 的一个“对应物”（当与 Thread 对象/Threadpool 一起使用时）。

另一种“传统”方式是 NSThread 的 detachNewThreadWithSelector 或 performSelectorInBackground！:)

# ios - 我需要从 for 循环中获得倒数第二个结果

> ID：15722922
> 
> 赞同：2
> 
> 时间：2013-03-30T20:02:43.820
> 
> 标签：ios, objective-c, cllocationmanager

我有一个存储有纬度和经度值的航点数组。我创建了一个 for 循环来遍历数组并比较我当前的 CLLocation 位置纬度和经度，以找到我最接近的航点。我还需要获取第二个最近的航路点并存储此 ac sa CLLocation 对象，但无法使其正常工作。

逻辑是这样的

```
am I closest
     yes
move closest location to second closest
     set as second closest
loop again to get the closest point 
```

我的代码：

```
-(void)locationManager:(CLLocationManager *)manager didUpdateLocations:(NSArray *)locations{

    //set latestlocation as the last object from the locations array
    CLLocation *currentLocation = [locations lastObject];

    //declare a closestpoint object
    CLLocation *closestWayPointToCurrentLocation;

    //declare a second closest point object
    CLLocation *secondClosestWayPointToCurrentLocation;

    //set the distance to a high number
    float distance = 10000000;
    float secondClosestWaypointDistance = 10000000;

    //load in plist
    NSString *plistName = [self.mapsInfo objectForKey:@"plistName"];
    NSString *path = [[NSBundle mainBundle] pathForResource:@"Chester" ofType:@"plist"];
    NSString *path = [[NSBundle mainBundle] pathForResource:plistName ofType:@"plist"];

    //store in array called waypoints
    NSArray *waypoints= [NSArray arrayWithContentsOfFile:path];

    //declare a variable for locationNum (the waypoints)
    int locationNum = 0;

    for (NSDictionary *point in waypoints) {
        CLLocation *waypointLocation = [[CLLocation alloc]initWithLatitude:[(NSNumber *)[point  objectForKey:@"Lat"]floatValue] longitude:[(NSNumber *)[point objectForKey:@"Long"]floatValue]];

        float waypointDistanceFromCurrentLocation = [currentLocation distanceFromLocation:waypointLocation];

        //secondClosestWayPointToCurrentLocation = waypointLocation;

        if(waypointDistanceFromCurrentLocation < distance) {
            //todo: move the current closestWayPointToCurrentLocation into second postion
            //update the second closest waypoint distance variable also with distance

            distance = waypointDistanceFromCurrentLocation;
            closestWayPointToCurrentLocation = waypointLocation;

            if(closestWayPointToCurrentLocation == waypointLocation) {

            }

        }
        else
        {
            //check against the second position
        //if closer than second position, replace it with new waypoint with code similar to above
        } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-30T21:04:39.003

如果您确定您始终是倒数第二个，那么您可以像这样检索它

```
int totalNumberOfWaypoints = [waypoints count];

//Get penultimate waypoints
NSDictionary *penultimateWaypoint = [waypoints objectAtIndex:(totalNumberOfWaypoints - 2)]; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-30T21:08:28.403

你为什么不做一个排序的点数组，按距离升序排序？

```
NSMutableArray *waypoints= [NSArray arrayWithContentsOfFile:path];

    for (NSDictionary *point in waypoints) {

[waypoints sortUsingComparator: (NSComparisonResult) ^ (id obj1, id obj2) {
        CLLocation *waypointLocation1 = [[CLLocation alloc]initWithLatitude:[(NSNumber *)[obj1 objectForKey:@"Lat"]floatValue] longitude:[(NSNumber *)[obj1 objectForKey:@"Long"]floatValue]];
        CLLocation *waypointLocation2 = [[CLLocation alloc]initWithLatitude:[(NSNumber *)[obj2 objectForKey:@"Lat"]floatValue] longitude:[(NSNumber *)[obj2 objectForKey:@"Long"]floatValue]];

        float distance1 = [currentLocation distanceFromLocation:waypointLocation1];
        float distance2 = [currentLocation distanceFromLocation:waypointLocation2];

        if (distance1 < distance2) {
            return NSOrderedAscending;
        }
        else if (distance1 > distance2) {
            return NSOrderedDescending
        }
        else
            return NSOrderedSame;

}]; 
```

这样，您始终可以拥有最近的点`[waypoints objectAtIndex:0]`和第二最近的点，`[waypoints objectAtIndex:1]`依此类推。

更少的工作，更好的结果恕我直言

# python - 修复了用于打印进度条处理的 Python 的 ProcessingFlush 类中的闪烁效果

> ID：15722923
> 
> 赞同：0
> 
> 时间：2013-03-30T20:02:43.993
> 
> 标签：python, class, progress-bar

我有一个派生自上一篇文章的类[ProcessingFlush](https://stackoverflow.com/questions/15685063/print-a-progress-bar-processing-in-python)。我编写这个类是为了打印一系列点（由索引给出），以测试我的软件是否在数据大小未知时正在处理我的*数据*。

```
class ProcessingFlush(object):
    def __init__(self, index):
        if index > 70:
            raise ValueError("Index not valid")
        self.index = index

    def update(self, n):
        self._n = n
        self._display()

    def finish(self):
        sys.stdout.flush()

    def start(self):
        sys.stdout.write("Processing")

    def _display(self):
       sys.stdout.write("Processing %s%s\r" % ((n % index)* ".", (index - 1 - (n % index))* " "))
        sys.stdout.flush()

pr = ProcessingFlush(5)
pr.start()
for n in xrange(5000):
    pr.update(n)
pr.finish() 
```

这个类的限制是当处理真的很快时“处理中”的闪烁效果。我试图发展这个想法来解决这个问题，但没有结果。我希望创建一个模块启动

```
def start(self):
    sys.stdout.write("Processing") 
```

仅打印处理。

```
def _display(self):
        sys.stdout.write("%s%s%s\r" % ((" " * 10),(self._n % self.index)* ".", (self.index - 1 - (self._n % self.index))* " "))
        sys.stdout.flush() 
```

display 仅打印处理点。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-05T22:28:18.663

```
import sys

class progressBar:
    '''
    http://code.activestate.com/recipes/168639/
    Randy Pargman
    Improvements by Kelvie Wong

    Creates a text-based progress bar. Call the object with the `print'
    command to see the progress bar, which looks something like this:

    [=======>        22%                  ]

    You may specify the progress bar's width, min and max values on init.
    '''

    def __init__(self, minValue = 0, maxValue = 100, totalWidth=80):
        self.progBar = '[]'   # This holds the progress bar string
        self.min = minValue
        self.max = maxValue
        self.span = maxValue - minValue
        self.width = totalWidth
        self.amount = 0       # When amount == max, we are 100% done
        self.updateAmount(0)  # Build progress bar string

    def updateAmount(self, newAmount = 0):
        ''' Update the progress bar with the new amount (with min and max
            values set at initialization; if it is over or under, it takes the
            min or max value as a default. '''
        if newAmount < self.min: newAmount = self.min
        if newAmount > self.max: newAmount = self.max
        self.amount = newAmount

        # Figure out the new percent done, round to an integer
        diffFromMin = float(self.amount - self.min)
        percentDone = (diffFromMin / float(self.span)) * 100.0
        percentDone = int(round(percentDone))

        # Figure out how many hash bars the percentage should be
        allFull = self.width - 2
        numHashes = (percentDone / 100.0) * allFull
        numHashes = int(round(numHashes))

        # Build a progress bar with an arrow of equal signs; special cases for
        # empty and full
        if numHashes == 0:
            self.progBar = '[>%s]' % (' '*(allFull-1))
        elif numHashes == allFull:
            self.progBar = '[%s]' % ('='*allFull)
        else:
            self.progBar = '[%s>%s]' % ('='*(numHashes-1),
                                        ' '*(allFull-numHashes))

        # figure out where to put the percentage, roughly centered
        percentPlace = (len(self.progBar) / 2) - len(str(percentDone))
        percentString = str(percentDone) + '%'

        # slice the percentage into the bar
        self.progBar = ''.join([self.progBar[0:percentPlace], percentString,
                                self.progBar[percentPlace+len(percentString):]
                                ])

    def __str__(self):
        return str(self.progBar)

    def __call__(self, value):
        ''' Updates the amount, and writes to stdout. Prints a carriage return
            first, so it will overwrite the current line in stdout.'''
        print '\r',
        self.updateAmount(value)
        sys.stdout.write(str(self))
        sys.stdout.flush()

if __name__=='__main__':
    import time
    prog = progressBar(0, 100, 80)
    for i in xrange(101):
        prog.updateAmount(i)
        sys.stdout.write('{p}\r'.format(p=prog))
        sys.stdout.flush()
        time.sleep(.025)
    print 
```

# regex - 在 Java 正则表达式中提取第 n 次出现

> ID：15722926
> 
> 赞同：0
> 
> 时间：2013-03-30T20:03:06.863
> 
> 标签：regex

是否可以仅使用正则表达式（无需额外代码！）来匹配第 n 个匹配项？例如，我想匹配 \002 的第二、四、六、八、十、十二等次出现，但跳过以下字符串中的第一、三、五、七等：

"汽车" \002 "火车" \002 "船" \002 "自行车" \002 "房子" \002 "网球" \002 "床" \002 "厨房" \002 "爱情" \002 "快乐"

有没有人为此提供纯正则表达式解决方案？我需要这个，因为我无法更改使用正则表达式的代码，但我可以提供一个正则表达式。

提前致谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-30T20:09:07.267

好吧，是的，您只需将正则表达式加倍：

```
\002[^\002]*(\002) 
```

要通常匹配特定字符串的每 n 次出现，您可以使用`{}`：

```
(?:\002[^\002]*){n-1}(\002) 
```

# core-data - Core Data NSPredicate with to-Many Relationship

> ID：15722930
> 
> 赞同：5
> 
> 时间：2013-03-30T20:03:15.217
> 
> 标签：core-data, nspredicate, nsfetchedresultscontroller

I have two Entities in CoreData called User and Coupon, they are in Many-to-Many relationship. I wanted to fetch for all Coupons except those owned by user.userId = 1, where userId is NSString.

I used: `[NSPredicate predicateWithFormat:@"NOT(ANY couponOwners.userId = %@)", @"4"];` to be the predicate of my fetchedResultsController

but not filtering with correct results. One of the User in couponOwners of the Coupon is still having userId = 4\.

Could somebody please help? I have been stuck for quite a while. Thanks in advance.

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2013-03-30T20:39:35.913

Core Data predicates with "NOT ANY" do not work (that seem to be a Core Data bug). Actually

```
[NSPredicate predicateWithFormat:@"NOT(ANY couponOwners.userId = %@)", @"4"]; 
```

returns the same result set as

```
[NSPredicate predicateWithFormat:@"ANY couponOwners.userId != %@", @"4"]; 
```

which is of course wrong. As a workaround, you can use a SUBQUERY:

```
[NSPredicate predicateWithFormat:@"SUBQUERY(couponOwners, $c, $c.userId == %@).@count == 0", @"4"] 
```

# php - 每当我试图从我的 mysql 表中选择多个列时，我的 apache 都会被重置

> ID：15722932
> 
> 赞同：1
> 
> 时间：2013-03-30T20:03:28.770
> 
> 标签：php, mysqli, apache2.2

假设我现在有一个包含五列的表，`TABLE(a,b,c,d,e)` 如果我尝试获取多个列，例如

```
$sql="select a,b,c from TABLE";
$result = mysqli_query($link,$sql );
if (!$result)
{
 echo "something wrong";
 exit();
}
and so on................ 
```

**注意其余代码没有任何错误。因为选择1列时代码正常工作**

选择多列时会导致错误::

```
[Error 101 (net::ERR_CONNECTION_RESET): The connection was reset.] 
```

当仅选择多列时尤其会发生这种情况。***

> 有人告诉我这是我的 apache 配置问题...如果是这样，您能告诉我如何解决吗？

* * *

# javascript - Facebook 赞框未显示

> ID：15722939
> 
> 赞同：1
> 
> 时间：2013-03-30T20:04:18.243
> 
> 标签：javascript, facebook, facebook-javascript-sdk, facebook-social-plugins

我在我正在创建的网站上包含了一个 Facebook Like 框，它仅在他们登录 facebook 时显示。当他们退出时，类似框会消失，不允许任何新到该网站的人看到它。我已经包含了facebook告诉你输入的所有代码，但没有任何乐趣。

谁能帮帮我。

我使用的代码：

```
 <div id="fb-root"></div>
<script>(function(d, s, id) {
var js, fjs = d.getElementsByTagName(s)[0];
if (d.getElementById(id)) return;
js = d.createElement(s); js.id = id;
js.src = "//connect.facebook.net/en_GB/all.js#xfbml=1";
fjs.parentNode.insertBefore(js, fjs);
}(document, 'script', 'facebook-jssdk'));</script> 
```

HTML 代码

```
<div id="fb_like">
<fb:like-box href="https://www.facebook.com/pages/Emma-Nolan-Mobile-Beauty-    and-Holistic-Therapy/230397297018772" width="300" height="185" show_faces="true"     stream="false" header="false" border_color="#FFFFFF"></fb:like-box>
</div> 
```

该站点未使用 HTML5，因此我使用 XFBML。这与 Facebook 设置本身有关吗？这只是一个商业页面。

我已经将脚本放在 head 标签和页面底部以允许加载，也将它直接放在 Facebook 提到的 body 标签下。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-30T21:37:51.963

**将命名空间添加**到文档的 html 标记。

```
<html xmlns:fb="http://ogp.me/ns/fb#"> 
```

将此代码**直接添加到 <body> 标记下方**。注意：确保**将正确的应用程序 ID 附加**到 js sdk。

```
<div id="fb-root"></div>
<script>(function(d, s, id) {
  var js, fjs = d.getElementsByTagName(s)[0];
  if (d.getElementById(id)) return;
  js = d.createElement(s); js.id = id;
  js.src = "//connect.facebook.net/en_US/all.js#xfbml=1&appId=YourAppIdHere";
  fjs.parentNode.insertBefore(js, fjs);
}(document, 'script', 'facebook-jssdk'));</script> 
```

目标页面的 fb url 中有空格。

```
<div id="fb_like">
<fb:like-box href="https://www.facebook.com/pages/Emma-Nolan-Mobile-Beauty-and-Holistic-Therapy/230397297018772" width="300" height="185" show_faces="true" stream="false" header="false" border_color="#FFFFFF"></fb:like-box>
</div> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-05-16T21:12:52.120

我也一直在处理这个问题。cient/企业主是否为其页面设置了任何国家或年龄限制？当设置了人口统计限制（例如，只允许来自特定国家的访问者，或排除来自特定国家的访问者）时，Fb like 框将不会显示给未登录的用户。这是设置人口限制的结果，据我所知，除非打开页面并摆脱所有限制，否则无法解决。希望这可以帮助。在此处查看类似的线程：[Facebook Like Box 插件不会为已注销的用户显示；仅适用于登录用户](https://stackoverflow.com/questions/7268100/facebook-like-box-plugin-doesnt-show-up-for-logged-out-users-only-for-logged-i)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-08-08T06:38:54.167

我认为你没有在你的 head 标签中包含[javascript sdk](http://www.shoutingblogger.com/2013/01/add-facebook-like-button-in-blogger.html)，导致不正确的 fb 像按钮渲染。

# c++ - c++ winapi, get listview header text

> ID：15722941
> 
> 赞同：1
> 
> 时间：2013-03-30T20:04:32.600
> 
> 标签：c++, winapi, listview

I created a listview and after that I would like to get the header text, something like this:

```
HWND hwndHD = ListView_GetHeader(hListView);
HDITEM hdi;
Header_GetItem(hwndHD, 2, (LPHDITEMA) &hdi);
unsigned char HDtext[lMAX];
hdi.pszText = (LPSTR)HDtext;
SendMessage(hListView, HDM_GETITEM, (WPARAM) 0, (LPARAM) &hdi);
std::string str(HDtext, HDtext + sizeof(HDtext));
MessageBox(hwnd, str.c_str() , "CreateFile", MB_OK); 
```

But it didn't work, what am I do wrong?

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-30T20:08:45.570

You have to initialise the [`HDITEM`](http://msdn.microsoft.com/en-gb/library/windows/desktop/bb775247.aspx) parameter before you call the `Header_GetItem`. You must specify in the `mask` which information you are requesting.

In your case you want to do it like this:

```
char HDtext[lMAX];
HWND hwndHD = ListView_GetHeader(hListView);
HDITEM hdi = { 0 };
hdi.mask = HDI_TEXT;
hdi.pszText = HDtext;
hdi.cchTextMax = lMAX;
Header_GetItem(hwndHD, 2, &hdi); 
```

You have also completely neglected to include error checking in your code. You should add it.

You need to check the return value of every API call. Consult the documentation on MSDN to know how to interpret it.

Using the code above as an example, you would write:

```
HWND hwndHD = ListView_GetHeader(hListView);
if (hwndHD == NULL) {
    // handle error
}
....
if (!Header_GetItem(hwndHD, 2, &hdi)) {
    // handle error
} 
```

# php - How to Convert a linked image with rollover jquery to codeigniter

> ID：15722942
> 
> 赞同：0
> 
> 时间：2013-03-30T20:04:34.857
> 
> 标签：php, jquery, codeigniter

I created a html site that has images that are links, the images change on mouseover. I use a jquery function for this. It all works perfect in HTML, but Im not sure how to combine the anchor and base_url to them when converting them to codeigniter.

I have been at this all day Id really appreciate any help, I am new to codeigniter I could not find any answers on their page or with a google search.

HTML code (works fine):

```
<a href="hotel.html">
<img src="img/image.png" hover="img/hoverimage.png" class="rollover"/>
</a> 
```

I can get as far as linking the src image and can apply the class=rollover I just can not figure out how to add the hover="img/hoverimage.png"

```
<?php echo anchor('hotel', img('img/image.png'), array('class'=>'rollover' ));?> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-04T12:36:05.460

Finally got it working. In short, I had to put the full address of the images rather than calling the base_url within an anchor. Probably a more accurate way of doing it but I spent so much time on this I am just happy it works....

```
<?php echo anchor('homepg/page/hotel', '<img src="http://localhost/websitefolder/img/image1.png"  hover="http://localhost/websitefolder/img/imagehover.png" class="rollover"/>'); ?> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-30T21:57:11.923

First, you don't *need* to use CodeIgniter's helpers to generate HTML. If you have working HTML already, then use it. Sometimes using CI's helpers can make the code more complicated, especially if other people need to figure out what it's doing.

To answer your question, the `img()` function accepts an associative array for the image's attributes. So you can specify the attributes similar to the `anchor()` function.

```
echo anchor('hotel', img(array('src' => 'img/image.png', 'class' => 'hover', 'hover' => base_url('img/hoverimage.png')))); 
```

Note that this uses the `base_url()` function from the URL helper.

# java - 读取jar中的多个文件

> ID：15722963
> 
> 赞同：0
> 
> 时间：2013-03-30T20:06:57.040
> 
> 标签：java, jar

我想在我的 jar 文件中读取多个文件。但它不起作用。它只读取一个文件并停止。我真的不明白如何`Inputstream`和`Bufferedreader`工作。那部分代码是从另一篇文章中借来的。

```
for (int i = 0; i < numList; i++) { // numList is number of file I want to read
     int fileNum = i + 1;
     String fileaddress = "List" + fileNum + ".txt";
     //All the files have name like "List1.txt", "List2.txt", etc
     InputStream configStream = getClass().getResourceAsStream(fileaddress);
     BufferedReader wordReader = new BufferedReader(new InputStreamReader(configStream, "UTF-8"));
     //the following is to store values in the line in an String array
     //add the array to an ArrayList called masterList
     String[] line;
     while((line = wordReader.readLine().split(": ")) != null){
     masterList.add(line);
} 
```

# php - PHP - 数组中的 Strpos

> ID：15722965
> 
> 赞同：2
> 
> 时间：2013-03-30T20:07:12.700
> 
> 标签：php, arrays, foreach, strpos

所以目前我有以下两个数组：

```
Array ( [0] => image/jpeg [1] => image/png [2] => image/psd ) 
Array ( [0] => png [1] => jpeg [2] => jpg [3] => zip [4] => mov ) 
```

顶部数组是正在转发的 $_GET 数据，它们是上传的文件类型。第二个数组是允许的文件类型的逗号列表。基本上，我想要实现的是检查数组中的每个项目是否是允许的文件类型，如果不是则返回错误消息。

我的代码：

```
$fileTypes = $_GET['data']; // Get the JSON file types

$fileTypes = json_decode($fileTypes); // Decode the data

$allowedTypes = "png,jpeg,jpg,zip,mov"; // List of allowed file types
$allowedTypes = explode(",", $allowedTypes); // Explode the list to an array

// For each file type in the array
foreach ($fileTypes as $fileType) {

foreach($allowedTypes as $allowedType) { 

$pos = strpos($fileType, $allowedType); // Check if the allowed type is contained in the file type

if($pos == FALSE) { echo "False"; } else { echo "True"; }

} 
```

现在的问题是，这将返回以下内容：

```
False, True, False, False, False (Overall will still equate to False, even though it had a true)
True, False, False, False, False (Overall will still equate to False, even though it had a true)
False, False, False, False, False (Overall will equate to false which it should as it has no trues) 
```

现在正如您所看到的，当状态为真和假时，代码正在运行，但我需要对其进行整体评估。因此，如果每一行都有一个 true in，那么整体状态为 true，但是如果其中一行，如最后一行包含所有 false，则整体条件变为 false。

不确定这是否有意义？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-30T20:17:37.890

这似乎适用于 PENDO 的建议。

```
// For each file type in the array
$state = TRUE;

foreach ($fileTypes as $fileType) {

foreach($allowedTypes as $allowedType) { 

$pos = strpos($fileType, $allowedType); // Check if the allowed type is contained in the file type

if($pos === FALSE) { $state = FALSE; } else { $state = TRUE; break; }

}

}

echo $state; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-30T20:13:46.030

零也是假的，因此，如果 strpos 在位置零找到字符串，它将是假的：尝试使用相同的运算符 ===

```
if($pos === FALSE) 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-30T20:11:37.170

```
function trueOrFalse($fileTypes, $allowedTypes)
{
  foreach($fileTypes as $fileType) {
    foreach($allowedTypes as $allowedType) {

      $pos = strpos($fileType, $allowedType);
      if($pos == FALSE) return false;
    }
  }
  return true;
} 
```

也许这有帮助。一旦检测到错误的 $pos，函数就会停止并返回 false。否则，它将执行该函数直到结束，如果所有 $pos 检查为真，则返回真。

# java - 如何从其他类访问 jFrame 的组件？

> ID：15722972
> 
> 赞同：2
> 
> 时间：2013-03-30T20:08:11.973
> 
> 标签：java, swing, inheritance

我有两个类，第一个是 NewJFrame.java。它的代码是——

```
package javaapplication10;
import java.awt.Label;
public class NewJFrame extends javax.swing.JFrame {

    public NewJFrame() {
        initComponents();
    }

    private void initComponents() {

        jButton1 = new javax.swing.JButton();
        f = new javax.swing.JTextField();
        l = new java.awt.Label();

        setDefaultCloseOperation(javax.swing.WindowConstants.EXIT_ON_CLOSE);

        jButton1.setText("jButton1");
        jButton1.addActionListener(new java.awt.event.ActionListener() {
            public void actionPerformed(java.awt.event.ActionEvent evt) {
                jButton1ActionPerformed(evt);
            }
        });

        l.setText("label1");

        javax.swing.GroupLayout layout = new javax.swing.GroupLayout(getContentPane());
        getContentPane().setLayout(layout);
        layout.setHorizontalGroup(
            layout.createParallelGroup(javax.swing.GroupLayout.Alignment.LEADING)
            .addGroup(layout.createSequentialGroup()
                .addGap(139, 139, 139)
                .addGroup(layout.createParallelGroup(javax.swing.GroupLayout.Alignment.LEADING)
                    .addComponent(f, javax.swing.GroupLayout.PREFERRED_SIZE, 76, javax.swing.GroupLayout.PREFERRED_SIZE)
                    .addGroup(layout.createParallelGroup(javax.swing.GroupLayout.Alignment.TRAILING, false)
                        .addComponent(l, javax.swing.GroupLayout.Alignment.LEADING, javax.swing.GroupLayout.DEFAULT_SIZE, javax.swing.GroupLayout.DEFAULT_SIZE, Short.MAX_VALUE)
                        .addComponent(jButton1, javax.swing.GroupLayout.Alignment.LEADING, javax.swing.GroupLayout.DEFAULT_SIZE, javax.swing.GroupLayout.DEFAULT_SIZE, Short.MAX_VALUE)))
                .addContainerGap(185, Short.MAX_VALUE))
        );
        layout.setVerticalGroup(
            layout.createParallelGroup(javax.swing.GroupLayout.Alignment.LEADING)
            .addGroup(layout.createSequentialGroup()
                .addContainerGap()
                .addComponent(f, javax.swing.GroupLayout.PREFERRED_SIZE, javax.swing.GroupLayout.DEFAULT_SIZE, javax.swing.GroupLayout.PREFERRED_SIZE)
                .addGap(18, 18, 18)
                .addComponent(jButton1)
                .addGap(22, 22, 22)
                .addComponent(l, javax.swing.GroupLayout.PREFERRED_SIZE, javax.swing.GroupLayout.DEFAULT_SIZE, javax.swing.GroupLayout.PREFERRED_SIZE)
                .addContainerGap(186, Short.MAX_VALUE))
        );

        pack();
    }

    private void jButton1ActionPerformed(java.awt.event.ActionEvent evt) {                                         
        System.out.println("Calling");
        NewClass1 n = new NewClass1();
        n.st();

    }                                        

    public static void main(String args[]) {

        try {
            for (javax.swing.UIManager.LookAndFeelInfo info : javax.swing.UIManager.getInstalledLookAndFeels()) {
                if ("Nimbus".equals(info.getName())) {
                    javax.swing.UIManager.setLookAndFeel(info.getClassName());
                    break;
                }
            }
        } catch (ClassNotFoundException ex) {
            java.util.logging.Logger.getLogger(NewJFrame.class.getName()).log(java.util.logging.Level.SEVERE, null, ex);
        } catch (InstantiationException ex) {
            java.util.logging.Logger.getLogger(NewJFrame.class.getName()).log(java.util.logging.Level.SEVERE, null, ex);
        } catch (IllegalAccessException ex) {
            java.util.logging.Logger.getLogger(NewJFrame.class.getName()).log(java.util.logging.Level.SEVERE, null, ex);
        } catch (javax.swing.UnsupportedLookAndFeelException ex) {
            java.util.logging.Logger.getLogger(NewJFrame.class.getName()).log(java.util.logging.Level.SEVERE, null, ex);
        }

        java.awt.EventQueue.invokeLater(new Runnable() {
            public void run() {
                new NewJFrame().setVisible(true);
            }
        });
    }

    protected javax.swing.JTextField f;
    protected javax.swing.JButton jButton1;
    protected java.awt.Label l;

} 
```

我正在使用netbeans。主要代码行是 -

```
private void jButton1ActionPerformed(java.awt.event.ActionEvent evt) {                                         
            System.out.println("Calling");
            NewClass1 n = new NewClass1();
            n.st();

        } 
```

和变量声明

```
protected javax.swing.JTextField f;
protected javax.swing.JButton jButton1;
protected java.awt.Label l; 
```

我的第二个类是NewClass.java，它的代码是-package javaapplication10；

```
import java.awt.Label;
public class NewClass1 extends NewJFrame{

    public void st()

    {
        l.setText(f.getText());
    }

} 
```

我要做的是单击按钮（jbutton1），并且必须在标签（l）中设置写在文本字段（f）中的文本。当我单击按钮时，控制台上打印了“呼叫”，但标签上的文本没有改变。问题是什么？请帮忙。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-30T20:20:44.143

为什么不直接改文本`JLabel` `l`呢？通过以下方式：

```
private void jButton1ActionPerformed(java.awt.event.ActionEvent evt) 
{                                         
  System.out.println("Calling");
  //NewClass1 n = new NewClass1();
  //n.st();
   l.setText(f.getText());   
} 
```

**更新**
好吧，如果你想通过子类来做的话：

改成`jButton1ActionPerformed`这样：

```
private void jButton1ActionPerformed(java.awt.event.ActionEvent evt) 
{                                         
  System.out.println("Calling");
  NewClass1 n = new NewClass1(this);
  n.st();
} 
```

并将构造函数更改`NewClass`如下：

```
NewJFrame njf;
public NewClass(NewJFrame jf)
{
  this.nfj = jf;
}
public void st()
{
  nfj.l.setText(nfj.f.getText());
} 
```

# java - 地图旋转了 90 度？

> ID：15722973
> 
> 赞同：1
> 
> 时间：2013-03-30T20:08:18.960
> 
> 标签：java, arrays, multidimensional-array

我有一个类`Grid`，它管理所有地图功能。问题是，pacman 地图逆时针旋转了 90 度。

它看起来如何

![问题](../Images/ceab46c6412d1cc2dc1668c5b88e7c2d.png)

它应该是什么样子

![“固定”版本](../Images/e3fc1082f7d772ccfcda915386406e7d.png)

我通过换`grid[x][y]`到`grid[y][x]`里面得到了“固定”版本`isWall()`（一种不整洁、不正确的方法）

这是`Grid`该类的完整代码；

```
package com.jackwilsdon.pacman.game;

import org.newdawn.slick.Graphics;

public class Grid {
    public static final int BLOCK_SIZE = 20;

    public int[][] grid = null;

    public Grid()
    {
        grid = new int[][]  {   {0,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,0},
                                {0,1,0,0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,1,0},
                                {0,1,0,1,1,0,1,1,1,0,1,0,1,1,1,0,1,1,0,1,0},
                                {0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,0},
                                {0,1,0,1,1,0,1,0,1,1,1,1,1,0,1,0,1,1,0,1,0},
                                {0,1,0,0,0,0,1,0,0,0,1,0,0,0,1,0,0,0,0,1,0},
                                {0,1,1,1,1,0,1,1,1,0,1,0,1,1,1,0,1,1,1,1,0},
                                {0,0,0,0,1,0,1,0,0,0,0,0,0,0,1,0,1,0,0,0,0},
                                {0,0,0,0,1,0,1,0,1,1,0,1,1,0,1,0,1,0,0,0,0},
                                {0,0,0,0,1,0,0,0,1,0,0,0,1,0,0,0,1,0,0,0,0},
                                {0,0,0,0,1,0,1,0,1,1,1,1,1,0,1,0,1,0,0,0,0},
                                {0,0,0,0,1,0,1,0,0,0,0,0,0,0,1,0,1,0,0,0,0},
                                {0,1,1,1,1,0,1,0,1,1,1,1,1,0,1,0,1,1,1,1,0},
                                {0,1,0,0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,1,0},
                                {0,1,0,1,1,0,1,1,1,0,1,0,1,1,1,0,1,1,0,1,0},
                                {0,1,0,0,1,0,0,0,0,0,0,0,0,0,0,0,1,0,0,1,0},
                                {0,1,1,0,1,0,1,0,1,1,1,1,1,0,1,0,1,0,1,1,0},
                                {0,1,0,0,0,0,1,0,0,0,1,0,0,0,1,0,0,0,0,1,0},
                                {0,1,0,1,1,1,1,1,1,0,1,0,1,1,1,1,1,1,0,1,0},
                                {0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,0},
                                {0,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,0}     };
    }

    public boolean isWall(int x, int y)
    {
        if (x >= 0 && x < grid.length && y >= 0 && y < grid[0].length)
        {
            return grid[y][x] == 1;
        }

        return true;
    }

    public void draw(Graphics g)
    {
        for (int cX = 0; cX < grid.length; cX++)
        {
            for (int cY = 0; cY < grid[cX].length; cY++)
            {
                if (this.isWall(cX, cY))
                {
                    g.fillRect(cX*Grid.BLOCK_SIZE, cY*Grid.BLOCK_SIZE, Grid.BLOCK_SIZE, Grid.BLOCK_SIZE);
                }
            }
        }
    }
} 
```

我在代码中犯了一个愚蠢的错误吗？

我不想切换 x 和 y，因为这不再是二维数组的正确格式。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-30T20:24:07.767

我在您的代码中看到的问题是边界检查不正确。换句话说，这段代码：

```
if (x >= 0 && x < grid.length && y >= 0 && y < grid[0].length)
{
    return grid[y][x] == 1;
} 
```

实际上应该是

```
if (x >= 0 && x < grid[0].length && y >= 0 && y < grid.length)
{
    return grid[y][x] == 1;
} 
```

您当前的代码仅因为尺寸相等（地图是方形的）才有效。

`draw`您在功能上有相同的错误。换句话说，应该是

```
for (int cY = 0; cY < grid.length; cY++)
{
    for (int cX = 0; cX < grid[cY].length; cX++)
    {
        if (this.isWall(cX, cY))
        {
            g.fillRect(cX*Grid.BLOCK_SIZE, cY*Grid.BLOCK_SIZE, Grid.BLOCK_SIZE, Grid.BLOCK_SIZE);
        }
    }
} 
```

在任何情况下，`grid[y][x]`都是正确的，而不是`grid[x][y]`因为`grid[i]`指的是二维数组索引处的*行*`i`，而不是列。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-30T20:29:38.557

这只是`grid[i][j]`引用第th 子数组`j`中的第 th 元素的事实的症状，它实际上是格式化网格中第 th 列和第th 行的位置。`i``j``i`

由于您要`x`表示列并`y`表示行，`grid[y][x]`因此是访问数组中位置的正确方法。

# html - Fade text near end of div?

> ID：15722975
> 
> 赞同：11
> 
> 时间：2013-03-30T20:08:29.403
> 
> 标签：html, css

Is it possible to fade the text horizontally near the end of the div using the CSS.

For example like this:

![enter image description here](../Images/fefc486384ee8747efa26e0d3d085ab0.png)

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-03-30T20:14:54.973

CSS gradients and `rgba` will do the job for this

[**Demo**](http://jsfiddle.net/KTAGm/)

[**Extended Text Version**](http://jsfiddle.net/KTAGm/2/) (Updated)

```
div {
    position: relative;
    display: inline-block;
}

div span {
    display: block;
    position: absolute;
    height: 80px;
    width: 200px;    
    right: 0;
    background: linear-gradient(to right, rgba(255,255,255,.6) 30%,rgba(255,255,255,1) 100%);
    background: -webkit-gradient(linear, left top, right top, color-stop(0%,rgba(255,255,255,.6)), color-stop(100%,rgba(255,255,255,1)));
    background: -webkit-linear-gradient(left, rgba(255,255,255,.6) 30%,rgba(255,255,255,1) 100%);
    top: 0; 
```

}

> Note: I've stripped off cross-browser CSS gradient code, you can get it from [http://www.colorzilla.com/gradient-editor/](http://www.colorzilla.com/gradient-editor/)

About the `rgba()` it's introduced recently in CSS3 spec, where I hope you know what RGB stands for and `a` stands for alpha, so instead of using `HEX` I am using `RGBA` and am just playing with the alpha part here

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-03-30T20:17:59.947

Skipping IE9-, which may require an image or SVG, you can add a `position: absolute` div that covers the full width and has a partially-transparent gradient that fades to white. This div must be contained by the element you want to cover, which must be `position: relative`.

[http://jsfiddle.net/JcPAT/](http://jsfiddle.net/JcPAT/)

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-03-30T20:11:36.700

Not really cross browser friendly but you can use something like:

```
-webkit-mask-image: -webkit-linear-gradient(left, rgba(0,0,0,0.65) 0%, rgba(0,0,0,0.65) 20%, rgba(0,0,0,0) 100%);
mask-image: linear-gradient(left, rgba(0,0,0,0.65) 0%, rgba(0,0,0,0.65) 20%, rgba(0,0,0,0) 100%); 
```

# c# - 我无法使用 XmlSerializer 序列化 C# 中的对象列表

> ID：15722978
> 
> 赞同：4
> 
> 时间：2013-03-30T20:09:10.193
> 
> 标签：c#, xml-serialization, xmlserializer

我有许多测试实现接口 IDoTest 的列表，我想将它们存储在文件中。我也想从这个文件中读取。

**简单地使用XmlSerializer**将对象存储在我的 IDoTest 列表中似乎很自然。但是当我这样做时，我会感到模糊，很抱歉我不能在 System.Xml.Serialization.TypeDesc.CheckSupported() 附近犯那个错误

XmlSerializer 只能做一些琐碎的工作吗？还是我错过了什么？他们在 MSDN上谈论[自定义序列化。](http://msdn.microsoft.com/en-us/library/ms233843.aspx)这是我的简化代码示例。

```
using System;
using System.Collections.Generic;
using System.IO;
using System.Xml.Serialization;

namespace ConsoleApplication1
{
    public interface IDoTest
    {
        void DoTest();
        void Setup();
    }
    internal class TestDBConnection : IDoTest
    {
        public string DBName;
        public void DoTest()
        {
            Console.WriteLine("DoHardComplicated Test");
        }
        public void Setup()
        {
            Console.WriteLine("SetUpDBTest");
        }
    }
    internal class PingTest : IDoTest
    {
        public string ServerName;
        public void DoTest()
        {
            Console.WriteLine("MaybeDoAPing");
        }
        public void Setup()
        {
            Console.WriteLine("SetupAPingTest");
        }
    }     

    internal class Program
    {
        private static void Main(string[] args)
        {

            TestDBConnection Do1 = new TestDBConnection { DBName = "SQLDB" };
            PingTest Do2 = new PingTest { ServerName = "AccTestServ_5" };
            List<IDoTest> allTest = new List<IDoTest> { Do1, (Do2) };
            // Now I want to serialize my list. 
            // Its here where I get the error at allTest
            XmlSerializer x = new XmlSerializer(allTest.GetType());
            StreamWriter writer = new StreamWriter("mySerializedTestSuite.xml");
            x.Serialize(writer, allTest); 

        }
    }
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-30T20:22:46.400

`XmlSerializer`不能序列化一个`interface`，并且通过扩展，它不能序列化`List<>`某个接口的一个。它只能序列化具体的对象类型。

假设您可能希望在某个时候*反序列*化对象，并且如果它只输出与该接口有关的信息，则不能保证存在所有必要的数据来重建原始对象。

如果您能够使用抽象基类并显式提供可能出现在列表中的每种可能类型的对象，则[这篇文章显示了一种潜在的解决方法。](https://stackoverflow.com/a/3705115/120955)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-30T21:26:49.183

I followed the link that StriplingWarrior gave and found this excellent answer. [https://stackoverflow.com/a/15089253/648076](https://stackoverflow.com/a/15089253/648076) from [webturner](https://stackoverflow.com/users/350188/webturner)

I changed his implementation and made a class class ListOfToDo that implemented both List and IXmlSerializable. That worked! Here is my changed code.

```
using System;
using System.Collections.Generic;
using System.IO;
using System.Xml;
using System.Xml.Schema;
using System.Xml.Serialization;

namespace ConsoleApplication1
{
    public interface IDoTest
    {
        void DoTest();
        void Setup();
    }
    public class TestDBConnection : IDoTest
    {
        public string DBName;
        public void DoTest()
        {
            Console.WriteLine("DoHardComplicated Test");
        }
        public void Setup()
        {
            Console.WriteLine("SetUpDBTest");
        }
    }
    public class PingTest : IDoTest
    {
        public string ServerName;
        public void DoTest()
        {
            Console.WriteLine("MaybeDoAPing");
        }
        public void Setup()
        {
            Console.WriteLine("SetupAPingTest");
        }
    }

    public class ListOfToDo : List<IDoTest>, **IXmlSerializable**
    {    
        #region IXmlSerializable
        public XmlSchema GetSchema(){ return null; }

        public void ReadXml(XmlReader reader)

           {
               reader.ReadStartElement("ListOfToDo");
               while (reader.IsStartElement("IDoTest"))
            {
                Type type = Type.GetType(reader.GetAttribute("AssemblyQualifiedName"));
                XmlSerializer serial = new XmlSerializer(type);

                reader.ReadStartElement("IDoTest");
                this.Add((IDoTest)serial.Deserialize(reader));
                reader.ReadEndElement(); //IDoTest
            }
            reader.ReadEndElement(); //IDoTest
        }

        public void WriteXml(XmlWriter writer)
        {
            foreach (IDoTest test in this)
            {
                writer.WriteStartElement("IDoTest");
                writer.WriteAttributeString("AssemblyQualifiedName", test.GetType().AssemblyQualifiedName);
                XmlSerializer xmlSerializer = new XmlSerializer(test.GetType());
                xmlSerializer.Serialize(writer, test);
                writer.WriteEndElement();
            }
        }
         #endregion
    }

    internal class Program
    {
        private static void Main(string[] args)
        {

            TestDBConnection Do1 = new TestDBConnection { DBName = "SQLDB" };
            PingTest Do2 = new PingTest { ServerName = "AccTestServ_5" };
            ListOfToDo allTest = new ListOfToDo { Do1, (Do2) };

            // Now I want to serialize my list. 
            // Its here where I get the error at allTest
            XmlSerializer x = new XmlSerializer(allTest.GetType());
            StreamWriter writer = new StreamWriter("mySerializedTestSuite.xml");
            x.Serialize(writer, allTest); 
            writer.Flush();
            writer.Close();

            //Read it aka deserialize
            {
                var xmlSerializer = new XmlSerializer(typeof(ListOfToDo));
                var xmlReader = XmlReader.Create(new StreamReader("mySerializedTestSuite.xml"));
                ListOfToDo readWhatToTest = (ListOfToDo)xmlSerializer.Deserialize(xmlReader);
                xmlReader.Close();
            }

        }
    }
} 
```

Output will then be:

```
 <?xml version="1.0" encoding="utf-8"?>
<ListOfToDo>
  <IDoTest AssemblyQualifiedName="ConsoleApplication1.TestDBConnection, ConsoleApplication1, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null">
    <TestDBConnection xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xmlns:xsd="http://www.w3.org/2001/XMLSchema">
      <DBName>SQLDB</DBName>
    </TestDBConnection>
  </IDoTest>
  <IDoTest AssemblyQualifiedName="ConsoleApplication1.PingTest, ConsoleApplication1, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null">
    <PingTest xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xmlns:xsd="http://www.w3.org/2001/XMLSchema">
      <ServerName>AccTestServ_5</ServerName>
    </PingTest>
  </IDoTest>
</ListOfToDo> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-30T20:15:57.703

不确定这是否可能是您的问题的原因，但在这两个示例中，他们确实使用`typeof(T)`而不是`T.GetType()`

[http://msdn.microsoft.com/en-us/library/71s92ee1.aspx](http://msdn.microsoft.com/en-us/library/71s92ee1.aspx)

[我无法使用 XmlSerializer 序列化 C# 中的对象列表](https://stackoverflow.com/questions/15722978/i-cant-serialize-a-list-of-objects-in-c-sharp-with-xmlserializer)

# jquery - 正确使用 $(this).find

> ID：15722979
> 
> 赞同：0
> 
> 时间：2013-03-30T20:09:11.883
> 
> 标签：jquery, jquery-mobile

我正在尝试替换下面的数据主题的内容

在函数和页脚内部工作....

```
 $(this).find('[data-role="footer"] h4').html(siteData.name);
     $(this).find("data-theme").html(siteData.theme); 
```

HTML

```
<div data-role="page" id="index">
    <div data-theme="a" data-role="header">
        <h3></h3>

    </div>

    <div data-role="content">

    </div>

    <div data-role="footer">
        <h4>Page Footer</h4>
    </div><!-- /footer -->
</div> 
```

我要做的就是替换数据主题的“a”中的内容

正确的方法是什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-30T20:12:03.403

如果我理解，您正在尝试更改主题属性？

```
$(this).find("[data-theme]").attr("data-theme", "b") 
```

是对的吗？

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-30T20:16:57.783

这就是你要找的东西。替换数据属性的值？只是为了使其更具限制性，您可以添加上下文。

```
 alert($('div[data-theme]','#index').data('theme'));
    $('div[data-theme]','#index').data('theme','new');
    alert($('div[data-theme]','#index').data('theme')); 
```

[http://jsfiddle.net/uhRHD/](http://jsfiddle.net/uhRHD/)

更多信息：- [http://api.jquery.com/data/](http://api.jquery.com/data/)

```
As of jQuery 1.4.3 HTML 5 data- attributes will be automatically pulled in to jQuery's data object. The treatment of attributes with embedded dashes was changed in jQuery 1.6 to conform to the W3C HTML5 specification.
The data- attributes are pulled in the first time the data property is accessed and then are no longer accessed or mutated (all data values are then stored internally in jQuery). 
```

# iphone - iOS UIDatePicker 时区问题

> ID：15722989
> 
> 赞同：3
> 
> 时间：2013-03-30T20:10:14.427
> 
> 标签：iphone, ios, timezone, uidatepicker

我在使用 UIDatePicker 时遇到了一个非常令人沮丧的时区问题。

当我初始化我的日期选择器时，我将时区设置为系统时区，以允许该应用程序在多个国家/地区使用

```
[datePicker setTimeZone:[NSTimeZone systemTimeZone]]; 
```

然后用户选择一个日期。在保存日期（保存在 CoreData 中）时，从日期选择器返回的日期是正确的，但是我只想获取日期而不是时间，即时间为 00:00:00

当我在 GMT（而不是 BST）中选择日期时，日期可以正常工作。如果我在 BST（3 月 - 10 月）中选择日期，我会将日期延迟 1 小时。

这就是我拉日期的方式

```
NSDateFormatter *dateFormatter = [[NSDateFormatter alloc] init];
[dateFormatter setDateFormat:@"yyyy-MM-dd"];
[dateFormatter setTimeZone:[NSTimeZone systemTimeZone]];
NSDate *dateOfBirth = [dateFormatter dateFromString:[dateFormatter stringFromDate:      [dobDatePicker date]]]; 
```

我查了一下，系统时间肯定是格林威治标准时间，那么为什么 dateOfBirth 的值会返回错误

IE

```
[dobDatePicker date] = "1991-05-30 18:58:16 +0000"
dateOfBirth          = "1991-05-29 23:00:00 +0000" 
```

有什么建议么？我不想强制时区，因为我希望它超出手机时区。

我对时间不感兴趣的原因是我将此日期存储为出生日期并使用它来计算年龄和距离您生日的秒数等值，因此不希望日期选择器中的当前时间在我存储的日期中核心数据

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-04T22:56:23.263

在获取时间时使用以下内容，并让我知道它是否适合您。

```
[dateFormatter setTimeZone:[NSTimeZone localTimeZone]]; 
```

这将始终返回手机的时区。我认为 systemTimeZone 可能被窃听。干杯。

# ios - Need assistance regarding core data

> ID：15722992
> 
> 赞同：1
> 
> 时间：2013-03-30T20:10:38.413
> 
> 标签：ios, core-data

I am new to core data and trying to create a simple apps using core data. I am currently working on app to save data in to-many relationship, there are several questions and tutorials but I am still confused.

I have two entities **person** and **contactNumbers**, I am fetching person and its contact numbers from address book, person **A** has mobile number, iphone number, home, work, other... which creates to-many relationship.

In my code I didnt subclass any entity, Is it necessary to subclass entities to save data in relationship? I am asking this because I have read that its not necessary to subclass direct working with NSManagedObject class will do the job.

All I want is to save person **A** first name, last name in **person entity** and its contact numbers in **contactNumbers entity**. How to save data in to-many relationship using core data?

Please I request do not refer other stackoverflow questions, raywenderlich tutorial, app code blog tutorials etc.

Please provide a clearly understandable code with concepts to deal this situation. Thanks a lot.

***This is my model***

![This is my model](../Images/cc96f9dc97f5cdc92cfd6e9661503ba3.png)

if I Do this

```
NSManagedObject *person = [NSEntityDescription insertNewObjectForEntityForName:@"person" inManagedObjectContext:self.managedObjectContext];

[person setValue:@"first name A" forKey:@"firstName"];
[person setValue:@"last name B" forKey:@"lastName"];
[person setValue:@"123" forKey:@"mobile"]; 
```

I got this error

```
Terminating app due to uncaught exception 'NSUnknownKeyException', reason: '[<NSManagedObject 0x82abcc0> setValue:forUndefinedKey:]: the entity Person is not key value coding-compliant for the key "mobile". 
```

If i do this

```
NSManagedObject *person = [NSEntityDescription insertNewObjectForEntityForName:@"Person" inManagedObjectContext:self.managedObjectContext];
    [person setValue:@"first name A" forKey:@"firstName"];
    [person setValue:@"last name B" forKey:@"lastName"];    

    NSManagedObject *contactNumber = [NSEntityDescription insertNewObjectForEntityForName:@"ContactNumber" inManagedObjectContext:self.managedObjectContext];
    [contactNumber setValue:@"123" forKey:@"home"];
    [contactNumber setValue:@"456" forKey:@"iPhone"];
    [contactNumber setValue:@"789" forKey:@"mobile"];
    [contactNumber setValue:@"111" forKey:@"work"];
    [contactNumber setValue:@"112" forKey:@"other"]; 
```

its working fine, but how data got related to each other in two entities?

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-30T20:20:47.040

You don't need to subclass.

You just need relations.

Make a relation on `Person` named `contactNumbers` that points to the `ContactNumber` entity, and a matching relation on `ContactNumber` entity called `person` that points back to person.

The `contactNumber` relation should be one to many (because one person has many contacts), while the relation from `ContactNumber` going back to `Person` should be one to one (because each contact entry will appear in only one person).

When you get a `Person` entity then, you'll be able to get a set of ContactNumber objects from the `contactNumbers` property, and then look through elements in the set. Or you can search `ContactNumber` entities where the `person` ID matches the person relation going back to `Person`.

**Followup**: Your first code does not work because you cannot reference a single instance through a set.

Your second section of code is fine, just add the line

```
contactNumber.person = person; 
```

Then you can access the set of contacts from a person at any time with:

```
NSSet *contacts = person.contactNumbers; 
```

And get the contact number you want. You cannot go directly from a person to one contact without some very tricky keypath stuff.

I would EXTREMELY STRONGLY suggest using [Mogenerator](http://rentzsch.github.com/mogenerator/) to generate data objects after you set up the model, it makes the data clearer as to how you can use it. Using the setKey mechanism with Core Data is UTTERLY INSANE.

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-30T21:59:01.923

You do not need to do any subclassing at all to read and write Core Data relationships (or any other values for that matter). In Core Data, a relationship is represented as an NSMutableSet. Here is some sample code to show you how to retrieve this set and modify it:

```
// Assuming myPerson is an NSManagedObject instance of the Person entity
NSMutableSet *contactNumbers = [myPerson mutableSetValueForKey:@"contactNumbers"];

// Add numbers normally by calling the set's addObject property
[contactNumbers addObject:myNewNumber];
//etc. 
```

I would also highly recommend taking a look at the Sensible TableView framework if you haven't already done so. The framework will automatically generate the UI for you Core Data entities, including all relationships. It will also automatically handle adding/removing new relationship objects. I myself wouldn't imagine going back to doing stuff manually again without it. Good luck!

# javascript - Read Latitude and Longitude from a GeoJSON file, and then display each lat-long as a marker with Leaflet

> ID：15722994
> 
> 赞同：0
> 
> 时间：2013-03-30T20:10:53.163
> 
> 标签：javascript, leaflet, geojson, font-awesome

I'm new to Javascript and hence I'm a little lost. I am able to read from a GeoJSON file; however, I do not understand how to iterate through the file to get the Lat-Long of the points, and then display those points as markers in Leaflet. I am hoping to also use the plugin Awesome Markers (based on font-awesome, for Leaflet)

This is a sample of my GeoJSON file:

```
 { "type": "FeatureCollection",
      "features": [
         { "type": "Feature", "properties": { "Street Nam": "Aljunied Avenue 2", " Block": "118 Aljunied Avenue 2", " Postal Co": "380118", " Latitude": 1.320440, "Longitude": 103.887575 }, 
           "geometry": { "type": "Point", "coordinates": [ 103.887575, 1.320440 ] } }
      ,
      { "type": "Feature", "properties": { "Street Nam": "Aljunied Crescent", " Block": "97A Aljunied Crescent", " Postal Co": "381097", " Latitude": 1.321107, "Longitude": 103.886127 }, 
        "geometry": { "type": "Point", "coordinates": [ 103.886127, 1.321107 ] } }
    ]
    } 
```

Thank you for your attention and time =)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-31T22:16:14.950

Process the geojson as described in [the leaflet documentation](http://leafletjs.com/examples/geojson.html). Specify a pointToLayer function which creates a marker with an awesome icon:

```
L.geoJson(geoJson, {
    pointToLayer: function (feature, latlng) {
        return L.marker(latlng, 
            {icon: L.AwesomeMarkers.icon( 
                 << options based on feature.properties >> 
             )});
    }
}).addTo(map); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-30T20:33:47.060

After reading the file, you should have a javascript object that represents all the data in the file:

```
var geoData = JSON.parse(fileContents);
var features = geoData.features; 
```

and so on. The parsed data will be converted to objects or arrays depending on whether they are key/value dictionaries or just lists. So from the above

```
var feature = geoData.features[0]; 
```

will get you a reference to the first feature object in the list. If you write

```
console.log(geoData); 
```

and run with any recent browser you should be able to see an expandable description of the data to help make sense of it all.

# c - C and Allegro - How to detect shots in a top-view 2D shooter?

> ID：15722996
> 
> 赞同：0
> 
> 时间：2013-03-30T20:10:56.447
> 
> 标签：c, allegro

```
al_draw_rotated_bitmap(playerTux, defaultPlayer1.size / 2, defaultPlayer1.size / 2, 
        defaultPlayer1.pos[0], defaultPlayer1.pos[1], mousePos / mouseSensitivity, 0);
        al_draw_rotated_bitmap(playerTux, defaultPlayer2.size / 2, defaultPlayer2.size / 2, 
        defaultPlayer2.pos[0], defaultPlayer2.pos[1], 0, 0); 
```

This function draws the bitmap of the player at a given position and a given angle at every loop of a while-loop. The movement is altered due to the events in the keyboard and the angle of the player due to the movement of the mouse in the x axis. Ignore the division by mouseSensitivity (Which is an internal aspect). consider just that it is possible to spin the player perfectly in it's own axis by moving the mouse. (OBS: The image of the weapon is already on the image of the player, so the weapon spins together with the player).

```
if (state.buttons & 1) {
            al_draw_rotated_bitmap(pistolFire, defaultPlayer1.size / 8, defaultPlayer1.size / 2, 
            defaultPlayer1.pos[0], defaultPlayer1.pos[1], mousePos / mouseSensitivity, 0); } 
```

Now here, when the left button of the mouse is pressed, a "fire image" appears at the end of the weapon.

Considering all this, we have our player moving through the map (increassing and decreassing it's own xPos and yPos at every event of the W, A, S, D), and we have another player on the map that has the same capacity. When we fire the weapon (When we press the left button of the mouse), we must HIT the other player if he is inside the range of the angle of the weapon.

The question is: How can I do it?

```
if (state.buttons & 1) {
    detectShotColision(); } 
```

How could I write such a function, considering only the angle of the weapon and the x and y position of both players?

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-31T13:31:09.607

You can use atan2() to calculate the angle between the players. If it equals (within some acceptable delta) the angle the gun is facing, then the player was hit.

If there could be things in between the players that absorb the hit, then you'll need to walk a line in the direction the gun was fired. You may be able to combine the two for an optimized solution.

# jquery - JQuery 鼠标悬停图像叠加

> ID：15722997
> 
> 赞同：5
> 
> 时间：2013-03-30T20:11:18.573
> 
> 标签：jquery, image, html, overlay

只是想知道我怎样才能让这个工作 100% 正确。我想我快到了。

基本上，我有一个图像，当我将鼠标悬停时，我想要一个覆盖（这是一个彩色的 div）出现在顶部。

[我在这个小提琴](http://jsfiddle.net/AUzKE/7/)中有这个半工作。

```
<img src="http://mirrorchecker.com/images/rod_160.png" width="160"
class="company-image"/>
<div class="company-image-overlay"></div>

/* CSS */
.company-image
{
}
.company-image-overlay
{
width: 160px;
height: 160px;
background-color: #ffb00f;
z-index: 1;
opacity: 0.5;
    position: fixed;
    top: 0.5em;
    display:none;
}

/* JQUERY */
$('.company-image').mouseover(function()
     {
        $('.company-image-overlay').show();
     });
$('.company-image').mouseout(function()
     {
       $('.company-image-overlay').hide();
     }); 
```

问题似乎是当覆盖出现时，鼠标在技术上不再处于上方，`.company-image`因此我们会不断地循环结束/退出和闪烁的背景。

有任何想法吗？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-03-30T20:15:13.803

最简单的解决方案是为两个元素添加一个包装元素：

```
<div class="wrap">
    <img src="http://mirrorchecker.com/images/rod_160.png" width="160" class="company-image" />
    <div class="company-image-overlay"></div>
</div> 
```

并将`mouseover`/`mouseout`方法改为*该*元素：

```
$('.wrap').mouseover(function () {
    $('.company-image-overlay').show();
}).mouseout(function () {
    $('.company-image-overlay').hide();
}); 
```

[JS Fiddle demo](http://jsfiddle.net/davidThomas/AUzKE/8/).

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-03-30T20:13:54.220

而不是检查`.company-image`元素，您将要检查覆盖。试试下面的。

```
$('.company-image').on("mouseover", function () {
    $('.company-image-overlay').show();
});

$('.company-image-overlay').on("mouseout", function () {
    $('.company-image-overlay').hide();
}); 
```

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2013-03-30T23:50:05.083

If i were you i would use only css. Actually you do not need any kind of functions like `show()` or `hide()`. I used an tag for wrapping because some old Internet Explorer versions does know about `:hover` only on this tag.

You can check the trick [here](http://jsfiddle.net/stefanz/AUzKE/9/)