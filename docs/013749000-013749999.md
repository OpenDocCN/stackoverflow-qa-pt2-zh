# StackOverflow 问答 13749000-13749999

# jsp - EL有什么函数可以获取数字的绝对值吗？

> ID：13749001
> 
> 赞同：3
> 
> 时间：2012-12-06T17:20:03.550
> 
> 标签：jsp, jsf, jstl, el

我知道丑陋的方式

```
a>0 ? a : -a 
```

但是当 a 是一个相对较长的表达式时，这很烦人。

```
OBJ1["x"]-someVar>0 ? OBJ1["x"]-someVar : -(OBJ1["x"]-someVar) 
```

有没有更好的方法呢？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-13T16:15:14.110

对于纯 jsp，您可以创建一个自定义 EL 函数，该函数委托给[`Math#abs(int)`](http://docs.oracle.com/javase/6/docs/api/java/lang/Math.html#abs%28int%29).

如果您首先创建一个`/WEB-INF/functions.tld`如下所示的文件：

```
<?xml version="1.0" encoding="UTF-8" ?>
<taglib 
    xmlns="http://java.sun.com/xml/ns/javaee"
    xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
    xsi:schemaLocation="http://java.sun.com/xml/ns/javaee http://java.sun.com/xml/ns/javaee/web-jsptaglibrary_2_1.xsd"
    version="2.1">

    <tlib-version>1.0</tlib-version>
    <short-name>Custom_Functions</short-name>
    <uri>http://example.com/functions</uri>

    <function>
        <name>abs</name>
        <function-class>java.lang.Math</function-class>
        <function-signature>int abs(int)</function-signature>
    </function>
</taglib> 
```

然后你就可以按如下方式使用它：

```
<%@taglib uri="http://example.com/functions" prefix="f" %>
...
${f:abs(OBJ1["x"]-someVar)} 
```

此解决方案也适用于 JSF，但如果您使用的是 JSF，[OmniFaces](http://omnifaces.org/)通过提供其[importFunctions](http://showcase.omnifaces.org/taghandlers/importFunctions)为您简化了这一点（如果尚未将 OmniFaces 与 JSF 一起使用，您应该开始使用它）

```
<o:importFunctions type="java.lang.Math" var="m" />
...
#{m:abs(-10)} 
```

### 也可以看看：

*   [我们的 EL 维基页面](https://stackoverflow.com/tags/el/info)

# iphone - 应用商店中名称相似的应用

> ID：13749002
> 
> 赞同：0
> 
> 时间：2012-12-06T17:20:04.607
> 
> 标签：iphone, app-store, itunes-store, itunes-app

考虑一下我有一个名为 MyDiary 的应用程序，它（你猜对了）是一个数字日记，并于 6 个月前在 Apple AppStore 上发布。几个月后，有人开发了一款名为 MyDiary Free and Plus（付费）的应用程序，正如你想象的那样，它是一个数字日记。除了“更改您的应用名称”和“停止抱怨并继续生活”之外，在这方面可以实际做些什么？这绝对是侵犯知识产权！:(

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-06T17:24:23.680

你可以向苹果报告.. [iTunes 内容争议](http://www.apple.com/legal/itunes/appstorenotices/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-06T17:25:22.347

实际上，除非他们完全复制了您的应用程序，否则这听起来不像是知识产权犯罪，如果这与品牌宣传有关的话。

我已经看到我的 iPod/iPad 上的应用程序名称发生了很大变化，所以这些小应用程序名称冲突一定会一直发生。

专利、商标等可以得到保护……但你真的想经历这一切吗？

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-09T09:12:57.647

好吧，我真的不认为你可以说你想出了“我的”和“日记”。如果您尝试为此申请商标，它将被拒绝。它绝不是您提供的产品的原创和描述性内容。

继续前进，或者想出一个更好的名字。

# java - 在 Eclipse Java EE 上安装 Android SDK

> ID：13749006
> 
> 赞同：2
> 
> 时间：2012-12-06T17:20:29.263
> 
> 标签：java, android, jakarta-ee

我已经在我的 Eclipse JavaEE 上安装了 Android SDK。

![在此处输入图像描述](../Images/3bc6ba597fdab2a7797dd2504a661840.png)

问题是当我点击 windows 时，菜单栏中没有 Android SDK 和 ADV Manager。

你能帮我我错过了什么吗？

我已经完成了[Android SDK 安装](http://developer.android.com/sdk/index.html)中描述的所有步骤。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-06T17:22:51.110

你一定已经在你的 Eclipse 菜单栏上找到了

1) 窗口

2) 自定义视角

3) 复选框 android SDK 和 AVD 管理器上的命令组可用性选项卡检查它

4）点击确定

那应该行得通。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-06T17:31:17.947

我没有在点击窗口时显示。

请按照以下步骤操作

1）从 developer.android.com 安装 ADT 插件使用[这个](http://developer.android.com/tools/sdk/eclipse-adt.html)

2）转到帮助->安装新软件->并提供链接中提到的url或本地adt文件

3）安装后，您将在 eclipse 顶部看到 avd manager 和 sdk manager 图标

4) 点击 SDK 管理器图标更新 SDK 管理器。它将显示安卓版本

安装

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2016-06-04T17:04:56.380

转到 1) 菜单栏窗口 2) 透视图 3) 打开透视图 4) 单击 Java

# windows-8 - 是否有可供 ASP 开发人员参考的 Anti-CSRF 最佳实践？

> ID：13749016
> 
> 赞同：1
> 
> 时间：2012-12-06T17:21:13.290
> 
> 标签：windows-8, webforms, csrf

如果您想知道它是什么：

> ( [Wiki](http://en.wikipedia.org/wiki/Cross-site_request_forgery) ) 跨站请求伪造，也称为一键式攻击或会话骑乘，缩写为 CSRF（有时发音为 sea-surf [1](http://en.wikipedia.org/wiki/Cross-site_request_forgery)）或 XSRF，是一种恶意利用网站的类型，通过该攻击可以从网站传输未经授权的命令网站信任的用户。[2] 与利用用户对特定站点的信任的跨站点脚本 (XSS) 不同，CSRF 利用站点在用户浏览器中的信任。

无论如何，有人知道一些好的最佳实践参考文档吗？

具体来说，对于 Web 表单（如果这真的很重要）。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-06T17:53:02.733

我将从：[Web Application Security Overview](http://www.nsa.gov/applications/search/index.cfm?q=Cross-site%20request%20forgery)参考文献中有一些有用的链接，其中一些现在似乎已关闭。一个很好的参考是：[一堆参考](http://www.nsa.gov/ia/mitigation_guidance/security_configuration_guides/applications.shtml)

我还建议查看此搜索返回：[NIST gov](http://www.nist.gov/search-results.cfm?q=Cross-site+request+forgery&btng=Search&num=10&sortType=L&scopeType=0&datefrom=&dateto=)尤其是另一个很好的来源。

不确定您针对的是哪种技术，nsa.gov 有大量非常好的晦涩参考资料。

# python - 计算列表python中的不同数字

> ID：13749017
> 
> 赞同：1
> 
> 时间：2012-12-06T17:21:16.817
> 
> 标签：python, list, loops

大家好，这是我编程的第一年，我从 python 开始。我对编程非常了解，但我需要帮助解决这个家庭作业问题。

我必须使用一个列表作为我的参数，然后返回列表中不同值的数量。问题中的示例列表是`[1, 4, 1, 7, 6, 1, 4, 3]`，因此返回的值应该是 5。

现在我知道我解决它的方法可能不简洁或优雅，但如果有人可以帮助我并告诉我要改变什么以便它起作用，我将不胜感激。

```
def count(mylist):
    newlist = []
    newlist.append(mylist[0])
    stor = False
    for i in mylist:
        stor = False
        for j in newlist:
            if j == i:
                stor == True
        if not stor:
            newlist.append(i)
    return newlist 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-12-06T17:23:08.170

使用 a[`set()`](http://docs.python.org/2/library/stdtypes.html#set-types-set-frozenset)代替：

```
def count(myList):
    return len(set(myList)) 
```

一个集合只能保存每个值的*一个*副本，因此将列表转换为集合具有删除所有重复项的方便副作用。结果集的长度就是您要寻找的答案。

使用集合是最有效的方法；或者，您也可以使用[dict()](http://docs.python.org/2/library/stdtypes.html#mapping-types-dict)：

```
def count(myList):
     return len(dict.fromkeys(myList)) 
```

效率略低，因为它会为与键关联的值保留空间。

如果您只想使用一个列表（效率最低），请使用`not in`否定成员资格测试：

```
def count(myList):
    unique = []
    for item in myList:
        if item not in unique:
             unique.append(item)
    return len(unique) 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-06T17:23:00.703

你可以在这里使用集合：

```
In [1]: lis=[1, 4, 1, 7, 6, 1, 4, 3]

In [2]: len(set(lis))
Out[2]: 5 
```

帮助`set`：

```
set(iterable) -> new set object
Build an unordered collection of unique elements. 
```

使用 for 循环：

```
In [6]: def count(lis):
   ...:     mylis=[]
   ...:     for elem in lis:
   ...:         if elem not in mylis:  # append the element to
                                       # mylis only if it is not already present
   ...:             mylis.append(x)
   ...:     return len(mylis)        
   ...: 

In [7]: count(lis)
Out[7]: 5 
```

也看看[`collections.Counter()`](http://docs.python.org/2/library/collections.html#collections.Counter)，它返回一个 的子类`dict`，其中包含一个元素被重复的次数：

```
In [10]: from collections import Counter

In [11]: c=Counter(lis)

In [12]: c
Out[12]: Counter({1: 3, 4: 2, 3: 1, 6: 1, 7: 1})

In [13]: len(c)
Out[13]: 5 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-06T17:25:57.120

```
stor == True 
```

你实际上并没有设置`stor`到`True`这里。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-12-06T17:39:40.297

首先，您的程序的固定版本

```
def count(mylist):
    newlist = []
    newlist.append(mylist[0])
    stor = False
    for i in mylist:
        stor = False
        for j in newlist:
            if j == i:
                stor = True # stor == True test for equality
        if not stor:
            newlist.append(i)
    return len(newlist) # you do not want the list itself but its length 
```

这里有一些建议：

*   您不需要`stor`在外循环之外进行初始化。这在两行之后再次完成。
*   在内部循环中考虑 a `break`- 这会加快速度（无需进行不必要的比较）
*   `newlist`可以在不附加第一项的情况下初始化为空列表。算法保持有效（内循环第一次迭代为零）

这里作为代码示例：

```
def count(mylist):
    newlist = []
    for i in mylist:
        stor = False
        for j in newlist:
            if j == i:
                stor = True
                break
        if not stor:
            newlist.append(i)
    return len(newlist) 
```

更优雅（和 pythonic）：使用`in`-syntax ;)

```
def count(mylist):
    newlist = []
    for i in mylist:
        if i not in newlist:
            newlist.append(i)
    return len(newlist) 
```

基本上`item in something_iterable`返回 true，如果`item`可以在`something_iterable`. 大多数项目集合是可迭代的（例如列表、集合、字符串...`'a' in 'abc'`返回 true ）

和最 Pythonic 的方式，但没有 for/while 循环：

```
def count(mylist):
    return len(set(mylist)) 
```

请查看其他答案以获得解释。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-12-06T17:34:39.033

如果您应该使用循环，那么这就是方法（或其中之一）。:)

```
the_list = [1, 4, 1, 7, 6, 1, 4, 3]

def count(the_list):
    unique_list = []
    for item in the_list:
        if item not in unique_list:
            unique_list.append(item)
    return len(unique_list) 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-12-06T17:24:01.643

如果您不能使用`set`，请尝试

```
def count(mylist):
    mylist.sort()
    total = 0
    for k in range(1, len(mylist) -1 ):
        if mylist[k] != mylist[k + 1]:
            total += 1
    return total 
```

这对列表进行排序，然后在每次元素不等于下一个元素时递增计数器。

* * *

如果您不能使用排序，您通常会跟踪计数值。不过这太明显了，所以这里有一个有趣的方法来做到这一点，而无需保留您已经计算过的值列表：

```
def count(mylist):
    total = 0
    for k, value in enumerate(mylist):
        total += 1 / mylist.count(value)
    return total 
```

所以对于`[1, 4, 1, 7, 6, 1, 4, 3]`，权重是`[1/3, 1/2, 1/3, 1, 1, 1/3, 1/2, 1]`应该加起来的`5`。

这是一种比你的老师正在寻找的更棒的方法（尽管这种方法效率低下）。

# bash - Bash - 转换列表中的单位

> ID：13749027
> 
> 赞同：0
> 
> 时间：2012-12-06T17:22:02.020
> 
> 标签：bash

我有一个如下用户列表，我想将单位转换为千兆字节

```
user1@example.com   Mbox size: 7445440 Kb
user2@example.com   Mbox size: 6622275 Kb
user3@example.com   Mbox size: 4657973 Kb
user"n"@example.com     Mbox size: 3657673 Kb 
```

任何帮助，将不胜感激。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-06T17:32:48.477

对于计算，我喜欢使用 bash 脚本中嵌入的 awk。

将下面的脚本保存到一个文件中，例如 togb.sh 并使其可执行。如果您需要小数，只需调整 printf 格式。

```
#!/bin/bash - 
awk '{ printf("%5.3f\n", $4 / (1024*1024)); }' $1 
```

将数据存储在文件 data.txt 中并使用命令行调用脚本：

```
./togb.sh data.txt 
7
6
4
4 
```

要以相同的格式显示列表但单位有所更改，您可以使用这个稍作改动的脚本：

```
#!/bin/bash - 
awk '{ printf("%s %s %s %5.3f GB\n", $1, $2, $3, $4 / (1024*1024)); }' $1 
```

该脚本的输出将是：

```
user1@example.com Mbox size: 7.270 GB
user2@example.com Mbox size: 6.467 GB
user3@example.com Mbox size: 4.548 GB
user"n"@example.com Mbox size: 3.571 GB 
```

顺便说一句，awk 可以做的远不止这些，它实际上是处理存储在文本文件中的数据的理想选择。

# sql-server-2005 - 连接到 SQL Server 时出错

> ID：13749028
> 
> 赞同：0
> 
> 时间：2012-12-06T17:22:03.427
> 
> 标签：sql-server-2005, iis-7, windows-server-2008

我从一个网络应用程序中得到一个令人沮丧的错误。我已经追了两天了。在某些情况下，数据访问尝试期间会出现以下错误。发生错误时，它是对单击应用程序页面上的链接的响应。奇怪的是，在运行跟踪时，您会看到 SQL Server 正在使用适当的参数调用适当的存储过程。在其他情况下，数据访问执行得很好。

我发现好奇的一件事是应用程序事件日志警告的线程信息（如下）。*Is impersonating:*设置为 false，即使启用了 ASP.Net 模拟。当然，这可能只是我不知道我在说什么。

非常感谢您能提供的任何帮助或指导。

环境：Windows Server 2008 Standard、IIS7、.net 2.x、SQL Server 2005

```
=======================
=    Yellow Screen    =
=======================

A network-related or instance-specific error occurred while establishing a connection to SQL Server. The server was not found or was not accessible. Verify that the instance name is correct and that SQL Server is configured to allow remote connections. (provider: SQL Network Interfaces, error: 26 - Error Locating Server/Instance Specified) 
Description: An unhandled exception occurred during the execution of the current web request. Please review the stack trace for more information about the error and where it originated in the code. 

Exception Details: System.Data.SqlClient.SqlException: A network-related or instance-specific error occurred while establishing a connection to SQL Server. The server was not found or was not accessible. Verify that the instance name is correct and that SQL Server is configured to allow remote connections. (provider: SQL Network Interfaces, error: 26 - Error Locating Server/Instance Specified)

Source Error: 

Line 3892:
Line 3893:    Sub getRenewalInformation(ByVal EntityID As Integer)
Line 3894:        BLLParticipant.GetParticipantRenewalInformation(EntityID)
Line 3895:        BLLParticipant.GetAdditionalInfo(EntityID)
Line 3896:    End Sub

Source File: M:\VirtualWebs\Intranet\SafeAtHome\Participants.aspx.vb    Line: 3894 

Stack Trace: 

[SqlException (0x80131904): A network-related or instance-specific error occurred while establishing a connection to SQL Server. The server was not found or was not accessible. Verify that the instance name is correct and that SQL Server is configured to allow remote connections. (provider: SQL Network Interfaces, error: 26 - Error Locating Server/Instance Specified)]
   System.Data.SqlClient.SqlInternalConnection.OnError(SqlException exception, Boolean breakConnection) +6256377
   System.Data.SqlClient.TdsParser.ThrowExceptionAndWarning(TdsParserStateObject stateObj) +245
   System.Data.SqlClient.TdsParser.Connect(ServerInfo serverInfo, SqlInternalConnectionTds connHandler, Boolean ignoreSniOpenTimeout, Int64 timerExpire, Boolean encrypt, Boolean trustServerCert, Boolean integratedSecurity, SqlConnection owningObject) +6270399
   System.Data.SqlClient.SqlInternalConnectionTds.AttemptOneLogin(ServerInfo serverInfo, String newPassword, Boolean ignoreSniOpenTimeout, Int64 timerExpire, SqlConnection owningObject) +181
   System.Data.SqlClient.SqlInternalConnectionTds.LoginNoFailover(String host, String newPassword, Boolean redirectedUserInstance, SqlConnection owningObject, SqlConnectionString connectionOptions, Int64 timerStart) +6271242
   System.Data.SqlClient.SqlInternalConnectionTds.OpenLoginEnlist(SqlConnection owningObject, SqlConnectionString connectionOptions, String newPassword, Boolean redirectedUserInstance) +6271208
   System.Data.SqlClient.SqlInternalConnectionTds..ctor(DbConnectionPoolIdentity identity, SqlConnectionString connectionOptions, Object providerInfo, String newPassword, SqlConnection owningObject, Boolean redirectedUserInstance) +354
   System.Data.SqlClient.SqlConnectionFactory.CreateConnection(DbConnectionOptions options, Object poolGroupProviderInfo, DbConnectionPool pool, DbConnection owningConnection) +703
   System.Data.ProviderBase.DbConnectionFactory.CreatePooledConnection(DbConnection owningConnection, DbConnectionPool pool, DbConnectionOptions options) +54
   System.Data.ProviderBase.DbConnectionPool.CreateObject(DbConnection owningObject) +6272472
   System.Data.ProviderBase.DbConnectionPool.UserCreateRequest(DbConnection owningObject) +81
   System.Data.ProviderBase.DbConnectionPool.GetConnection(DbConnection owningObject) +1657
   System.Data.ProviderBase.DbConnectionFactory.GetConnection(DbConnection owningConnection) +88
   System.Data.ProviderBase.DbConnectionClosed.OpenConnection(DbConnection outerConnection, DbConnectionFactory connectionFactory) +6275911
   System.Data.SqlClient.SqlConnection.Open() +258
   SafeAtHome.DAL.Participant.GetParticipantRenewalInformation(Int32 EntityID) in C:\code\web\SafeAtHome2011\SafeAtHome.DAL\Participant.vb:42
   SafeAtHome.BLL.Participant.GetParticipantRenewalInformation(Int32 EntityID) in C:\code\web\SafeAtHome2011\SafeAtHome.BLL\Participant.vb:38
   Participant.getRenewalInformation(Int32 EntityID) in M:\VirtualWebs\Intranet\SafeAtHome\Participants.aspx.vb:3894
   Participant.BindCombinedParticipants(DataSet dst) in M:\VirtualWebs\Intranet\SafeAtHome\Participants.aspx.vb:3962
   Participant.grdParticipantSearchActive_Select(Object sender, DataGridCommandEventArgs e) in M:\VirtualWebs\Intranet\SafeAtHome\Participants.aspx.vb:959
   System.Web.UI.WebControls.DataGrid.OnBubbleEvent(Object source, EventArgs e) +88
   System.Web.UI.Control.RaiseBubbleEvent(Object source, EventArgs args) +70
   System.Web.UI.WebControls.DataGridItem.OnBubbleEvent(Object source, EventArgs e) +110
   System.Web.UI.Control.RaiseBubbleEvent(Object source, EventArgs args) +70
   System.Web.UI.Page.RaisePostBackEvent(IPostBackEventHandler sourceControl, String eventArgument) +29
   System.Web.UI.Page.ProcessRequestMain(Boolean includeStagesBeforeAsyncPoint, Boolean includeStagesAfterAsyncPoint) +2981

--------------------------------------------------------------------------------
Version Information: Microsoft .NET Framework Version:2.0.50727.5420; ASP.NET Version:2.0.50727.5420 

=======================================
=    Application Event Log Warning    =
=======================================

Event code: 3005 
Event message: An unhandled exception has occurred. 
Event time: 12/6/2012 8:53:00 AM 
Event time (UTC): 12/6/2012 2:53:00 PM 
Event ID: 52ff4f11e1d64e59b020623619f93fe9 
Event sequence: 6 
Event occurrence: 1 
Event detail code: 0 

Application information: 
    Application domain: /LM/W3SVC/1/ROOT/SafeAtHome-1-129992790193691690 
    Trust level: Full 
    Application Virtual Path: /SafeAtHome 
    Application Path: M:\VirtualWebs\Intranet\SafeAtHome\ 
    Machine name: SOSDEVINTRA 

Process information: 
    Process ID: 5068 
    Process name: w3wp.exe 
    Account name: IIS APPPOOL\ASP.NET 2.0 

Exception information: 
    Exception type: SqlException 
    Exception message: A network-related or instance-specific error occurred while establishing a connection to SQL Server. The server was not found or was not accessible. Verify that the instance name is correct and that SQL Server is configured to allow remote connections. (provider: SQL Network Interfaces, error: 26 - Error Locating Server/Instance Specified) 

Request information: 
    Request URL: .../safeathome/Participants.aspx
    Request path: /safeathome/Participants.aspx 
    User host address: ::1 
    User: test 
    Is authenticated: True 
    Authentication Type: Forms 
    Thread account name: IIS APPPOOL\ASP.NET 2.0 

Thread information: 
    Thread ID: 3 
    Thread account name: IIS APPPOOL\ASP.NET 2.0 
    Is impersonating: False 
    Stack trace:    at System.Data.SqlClient.SqlInternalConnection.OnError(SqlException exception, Boolean breakConnection)
   at System.Data.SqlClient.TdsParser.ThrowExceptionAndWarning(TdsParserStateObject stateObj)
   at System.Data.SqlClient.TdsParser.Connect(ServerInfo serverInfo, SqlInternalConnectionTds connHandler, Boolean ignoreSniOpenTimeout, Int64 timerExpire, Boolean encrypt, Boolean trustServerCert, Boolean integratedSecurity, SqlConnection owningObject)
   at System.Data.SqlClient.SqlInternalConnectionTds.AttemptOneLogin(ServerInfo serverInfo, String newPassword, Boolean ignoreSniOpenTimeout, Int64 timerExpire, SqlConnection owningObject)
   at System.Data.SqlClient.SqlInternalConnectionTds.LoginNoFailover(String host, String newPassword, Boolean redirectedUserInstance, SqlConnection owningObject, SqlConnectionString connectionOptions, Int64 timerStart)
   at System.Data.SqlClient.SqlInternalConnectionTds.OpenLoginEnlist(SqlConnection owningObject, SqlConnectionString connectionOptions, String newPassword, Boolean redirectedUserInstance)
   at System.Data.SqlClient.SqlInternalConnectionTds..ctor(DbConnectionPoolIdentity identity, SqlConnectionString connectionOptions, Object providerInfo, String newPassword, SqlConnection owningObject, Boolean redirectedUserInstance)
   at System.Data.SqlClient.SqlConnectionFactory.CreateConnection(DbConnectionOptions options, Object poolGroupProviderInfo, DbConnectionPool pool, DbConnection owningConnection)
   at System.Data.ProviderBase.DbConnectionFactory.CreatePooledConnection(DbConnection owningConnection, DbConnectionPool pool, DbConnectionOptions options)
   at System.Data.ProviderBase.DbConnectionPool.CreateObject(DbConnection owningObject)
   at System.Data.ProviderBase.DbConnectionPool.UserCreateRequest(DbConnection owningObject)
   at System.Data.ProviderBase.DbConnectionPool.GetConnection(DbConnection owningObject)
   at System.Data.ProviderBase.DbConnectionFactory.GetConnection(DbConnection owningConnection)
   at System.Data.ProviderBase.DbConnectionClosed.OpenConnection(DbConnection outerConnection, DbConnectionFactory connectionFactory)
   at System.Data.SqlClient.SqlConnection.Open()
   at SafeAtHome.DAL.Participant.GetParticipantRenewalInformation(Int32 EntityID) in C:\code\web\SafeAtHome2011\SafeAtHome.DAL\Participant.vb:line 42
   at SafeAtHome.BLL.Participant.GetParticipantRenewalInformation(Int32 EntityID) in C:\code\web\SafeAtHome2011\SafeAtHome.BLL\Participant.vb:line 38
   at Participant.getRenewalInformation(Int32 EntityID) in M:\VirtualWebs\Intranet\SafeAtHome\Participants.aspx.vb:line 3894
   at Participant.BindCombinedParticipants(DataSet dst) in M:\VirtualWebs\Intranet\SafeAtHome\Participants.aspx.vb:line 3962
   at Participant.grdParticipantSearchActive_Select(Object sender, DataGridCommandEventArgs e) in M:\VirtualWebs\Intranet\SafeAtHome\Participants.aspx.vb:line 959
   at System.Web.UI.WebControls.DataGrid.OnBubbleEvent(Object source, EventArgs e)
   at System.Web.UI.Control.RaiseBubbleEvent(Object source, EventArgs args)
   at System.Web.UI.WebControls.DataGridItem.OnBubbleEvent(Object source, EventArgs e)
   at System.Web.UI.Control.RaiseBubbleEvent(Object source, EventArgs args)
   at System.Web.UI.Page.RaisePostBackEvent(IPostBackEventHandler sourceControl, String eventArgument)
   at System.Web.UI.Page.ProcessRequestMain(Boolean includeStagesBeforeAsyncPoint, Boolean includeStagesAfterAsyncPoint) 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-07T15:07:18.517

尝试几件事

1.  检查网站在哪个帐户下运行。转到 AppPools，然后在高级设置中您应该能够更改它。将其更改为网络服务并尝试解决。

2.  检查访问 SQL Server 的帐户是否对 Sql Server 具有适当的权限。

# ruby-on-rails - Rails - 制作（反转）嵌套表单保存

> ID：13749029
> 
> 赞同：0
> 
> 时间：2012-12-06T17:22:13.920
> 
> 标签：ruby-on-rails, activerecord

我看到很多关于使用嵌套表单保存的东西，但它们都与我的关系相反。客户信息属于_to 用户，但我想从客户信息更新用户电子邮件。现在视图正在工作，只是没有保存。

我定义了以下关系：

```
class User < ActiveRecord::Base
    has_one :customer_info, dependent: :destroy
  accepts_nested_attributes_for :customer_info
end

class CustomerInfo < ActiveRecord::Base
  belongs_to :user
  attr_accessible :user, :email
  accepts_nested_attributes_for :user
end 
```

以及以下嵌套形式：

```
%h1 Editing customer_info

= form_for @customer_info, :validate => true do |f|
  - if @customer_info.errors.any?
    #error_explanation
      %h2= "#{pluralize(@customer_info.errors.count, "error")} prohibited this user from being saved:"
      %ul
        - @customer_info.errors.full_messages.each do |msg|
          %li= msg

  %h2 Your Profile

  = fields_for @user do |i|
    .field
      = i.label :email, 'Email'
      = i.text_field :email

  .field
    = f.label :username, "Username"
    = f.text_field :username

  .actions
    = f.submit 'Next' 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-06T21:23:33.767

虽然以这种方式做你想做的事是一种不寻常的方法，但我们需要知道你在控制器端的代码是什么。我假设你使用像这样的常用 Rails 脚手架

```
def update
  if @customer_info.update_attributes params[:customer_info]
    # the rest of the assumed code
  end
end 
```

如果是这样，请尝试向`autosave`您的关系添加选项`belongs_to :user`，以便在成功保存 CustomerInfo 后保存它，例如

```
 belongs_to :user, autosave: true 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-06T22:04:33.203

如果您使用accepts_nested_attributes_for 和attr_accessible，则必须在attr_accessible 行中包含user_attributes，否则您将无法更新用户记录

```
attr_accessible :user_attributes
accepts_nested_attributes_for :user 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-06T22:32:17.507

事实证明，它实际上是通过我在此过程中所做的一些事情来保存的，我只是在使用设计，所以它不能让我只更改数据库中的电子邮件，我必须确认。

感谢[Ahmad](https://stackoverflow.com/users/1856239/ahmad-sherif)鼓励我查看控制台以更好地了解正在发生的事情。

# asp.net - SQL 查询 web.config 文件

> ID：13749035
> 
> 赞同：0
> 
> 时间：2012-12-06T17:22:21.473
> 
> 标签：asp.net, sql, vb.net, web-config

我知道如何使用 ASP.net 在 web.config 文件中创建用户和设置授权的内置功能为某些页面设置权限。我目前遇到的问题是我被要求使用 MS Access 数据库来存储用户和用户角色，我不知道如何去找出如何在 web.config 文件中设置它。是否可以在 web.config 文件中查询数据库以找出特定角色的用户？如果是这样，我将如何去做？如果我使用了 ASP.NET 配置生成器工具，下面的代码就是我会写的。

```
 <location path="admin.aspx">
   <system.web>
     <authorization>
        <allow roles="Admin"/>
        <deny users="*"/>
     </authorization>
   </system.web>
</location> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-06T17:56:02.387

您应该查找 Membership Provider 模型。Microsoft SQL Server 有现成的提供程序作为后备存储，但您也可以使用提供的基类自行开发。

[这](http://www.asp.net/web-forms/videos/how-do-i/how-do-i-create-a-custom-membership-provider)是一个视频和一些其他材料，它们声称要讨论为自定义成员资格提供程序创建访问支持等内容。

# arrays - MODx mysql数组排序

> ID：13749037
> 
> 赞同：0
> 
> 时间：2012-12-06T17:22:22.427
> 
> 标签：arrays, sorting, modx

我需要为 MODx 页面制作过滤条目的排序列表。我在 db 中有几个条目，其中包含 'table1' 和列 'id'、'name'、'someparam1' 等。我可以在页面上打印整个列表

```
$companies = $modx->getCollection('Company'); 
foreach($companies as $company) {
    $fields = $company->toArray();
    $output .= $modx->getChunk('showEntryTpl', $fields);
}
return $output; 
```

但我仍然无法使用[推荐#1](https://stackoverflow.com/questions/9582932/php-sort-an-array-by-lastname-seperated-by-whitespace-in-modx)或[推荐#2](http://rtfm.modx.com/display/xPDO20/Retrieving+Objects)打印相同的列表：来自 MODx 文档的示例：

```
$c = $xpdo->newQuery('Box');
$c->innerJoin('BoxOwner','Owner'); // arguments are: className, alias
$c->where(array(
   'width' => 5,
   'Owner.user' => 2,
));
$c->sortby('name','ASC');
$c->limit(5);
$boxes = $xpdo->getCollection('Box',$c); 
```

以这种方式使用它

```
$sortingcriteria = 'id';

$s = $modx->newQuery('modResource');
$s->sortby($sortingcriteria,'ASC');
$out = $modx->getCollection('Company',$s);

return $out; 
```

不起作用。如何按所选列对列表进行排序然后过滤？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-06T18:43:43.517

```
$sortingcriteria = 'id';

$s = $modx->newQuery('Company'); // your mistake here. Need to use 'Company' instead 'modResource' 
```

然后您可以对条目进行排序和过滤

```
$s->sortby($sortingcriteria,'ASC');
$s->where(array(
   'column_name1' => 5,
   'column_name2' => 2,
));
$out = $modx->getCollection('Company',$s);

$output = '';
foreach ($out as $item) {
    $output .= $item->get('column_name') . '<br/>';
}

return $output; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-07T13:06:58.187

感谢 Vasis 和 Sean Kimball 的建议！此代码从 db 中提取几条记录，这些记录按 ASC/DESC 顺序排序并按某个值过滤：

```
$sortingcriteria = 'id';
$filter1 = 'free';
$s = $modx->newQuery('Company');
$s->sortby($sortingcriteria,'ASC');
$s->where(array(
   'pay_type' => $filter1,
));
$out = $modx->getCollection('Company',$s);
$output = '';
foreach ($out as $item) {
    $fields = $item->toArray();
    $output .= $modx->getChunk('showAllCompaniesTpl', $fields);
}

return $output; 
```

# java - YouTube GetUploadToken 请求使用 GWT RequestBuilder 后的状态 404

> ID：13749040
> 
> 赞同：3
> 
> 时间：2012-12-06T17:22:23.550
> 
> 标签：java, gwt, youtube-api

我正在尝试使用 RequestBuilder 从我的 GWT 应用程序的客户端发送一个 POST 请求以从 YouTube 获取上传令牌。

我正在尝试按照以下 YouTube API 文档的描述构建请求： [https ://developers.google.com/youtube/2.0/developers_guide_protocol_browser_based_uploading#Browser_based_uploading](https://developers.google.com/youtube/2.0/developers_guide_protocol_browser_based_uploading#Browser_based_uploading)

以下是我的客户端 GWT 代码：

```
// BODY
StringBuilder sb = new StringBuilder();
sb.append("<?xml version=\"1.0\"?>"
        + "<entry xmlns=\"http://www.w3.org/2005/Atom\""
        + "xmlns:media=\"http://search.yahoo.com/mrss/\""
        + "xmlns:yt=\"http://gdata.youtube.com/schemas/2007\">"
        + "<media:group>"
        + "<media:title type=\"plain\">MyTitle</media:title>"
        + "<media:description type=\"plain\">"
        + "My description."
        + "</media:description>"
        + "<media:category scheme=\"http://gdata.youtube.com/schemas/2007/categories.cat\">"
        + "People"
        + "</media:category>"
        + "<media:keywords>word1, word2</media:keywords>"
        + "</media:group>"
        + "</entry>");

String requestBody = sb.toString();

// HEADER
RequestBuilder rb = new RequestBuilder(RequestBuilder.POST, "https://" + YOUTUBE_HOST + "/action/GetUploadToken");
rb.setHeader("Host", YOUTUBE_HOST);
rb.setHeader("Content-Type", "application/atom+xml; charset=" + CHAR_ENCODING);
rb.setHeader("X-GData-Key", MY_CLIENT_KEY);
rb.setHeader("GData-Version", "2");
try {
    rb.setHeader("Content-Length", Integer.toString(requestBody.getBytes(CHAR_ENCODING).length));
}
catch (UnsupportedEncodingException e) {
    Window.alert(e.getMessage());
}
rb.setHeader("Authorization", "Bearer " + AUTHORIZATION_CODE);

// CALL
try {
    rb.sendRequest(requestBody, new RequestCallback() {
        @Override
        public void onResponseReceived(Request request, Response response) {
            Document dom = XMLParser.parse(response.getText());

            Node urlNode = dom.getElementsByTagName("url").item(0);
            String url = urlNode.getFirstChild().getNodeValue();

            Node tokenNode = dom.getElementsByTagName("token").item(0);
            String token = tokenNode.getFirstChild().getNodeValue();
        }

        @Override
        public void onError(Request request, Throwable t) {
            callback.onFailure(t.getMessage());
        }
    });
}
catch (RequestException e) {
    callback.onFailure(e.getMessage());
} 
```

以下是我在 Chrome 的开发者工具中显示的请求：

```
Request URL:https://gdata.youtube.com/action/GetUploadToken
Request Method:OPTIONS
Status Code:404 Not Found 
```

**请求标头**

```
:host:gdata.youtube.com
:method:OPTIONS
:path:/action/GetUploadToken
:scheme:https
:version:HTTP/1.1
accept:*/*
accept-charset:ISO-8859-1,utf-8;q=0.7,*;q=0.3
accept-encoding:gzip,deflate,sdch
accept-language:en-GB,en-US;q=0.8,en;q=0.6
access-control-request-headers:origin, x-gdata-key, authorization, content-type, gdata-version
access-control-request-method:POST
origin:http://127.0.0.1:8888
referer:http://127.0.0.1:8888/MyApp.html?gwt.codesvr=127.0.0.1:9997
user-agent:Mozilla/5.0 (Windows NT 6.1; WOW64) AppleWebKit/537.11 (KHTML, like Gecko) Chrome/23.0.1271.95 Safari/537.11 
```

**响应标头**

```
cache-control:no-cache, no-store, max-age=0, must-revalidate
content-encoding:gzip
content-length:117
content-type:text/html; charset=UTF-8
date:Thu, 06 Dec 2012 14:29:20 GMT
expires:Fri, 01 Jan 1990 00:00:00 GMT
pragma:no-cache
server:GSE
status:404 Not Found
version:HTTP/1.1
x-content-type-options:nosniff
x-frame-options:SAMEORIGIN
x-gdata-user-country:US
x-xss-protection:1; mode=block 
```

如上所示，我在发送请求后收到“404 Not Found”错误。

任何帮助将不胜感激！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-06T18:23:12.937

我对 GWT 不是很熟悉，但我注意到了一些奇怪的东西。Chrome 报告的请求实际上是一个`OPTIONS`请求，而不是`POST`YouTube API 所要求的。`OPTIONS`向此 URL 发送任意请求时，我能够重现 404 。

您的代码表明您正在尝试发送`POST`请求。但是，我假设这是一个跨域请求，它将受[Same Origin Policy](http://en.wikipedia.org/wiki/Same_origin_policy)的约束。看看[这个](https://developers.google.com/web-toolkit/doc/latest/tutorial/Xsite)使用 GWT 的跨站点请求示例。发送`OPTIONS`请求而不是`POST`请求的奇怪行为可能是由于代码将其视为同站点请求。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-06T19:52:26.577

YouTube API 的 CORS 支持已经中断了大约两周。工程团队向我保证，它会很快修复（希望是今天）。这就是导致您看到的错误的原因。

您可以关注[https://code.google.com/p/youtube-direct-lite/issues/detail?id=9](https://code.google.com/p/youtube-direct-lite/issues/detail?id=9)以获取更新。（它主要影响了 YouTube Direct Lite，因为依赖 CORS 的其他应用并不多。）

# php - php从链接动态生成新网页

> ID：13749042
> 
> 赞同：-2
> 
> 时间：2012-12-06T17:22:39.107
> 
> 标签：php, mysql, dynamic

我在这里需要认真的帮助！我正在建设这个网站：每篇文章的摘要都是从数据库中生成的，标题为链接，但我希望如果有人点击链接，文章的页面会自动生成而不会匆忙；因为我无法为数据库中的每篇文章编写一个页面！这是我生成摘要的代码：

```
<?php
        if(isset($_POST['search'])){
                $term = mysql_real_escape_string($_POST['keyword']);

                        $search = mysql_query("select * from article 
                        where match(title, body) against('$term') ");

                    if(mysql_num_rows($search)>0){  

                            echo "<div>"."Search Results For: "."<h3><u>".$term."</u></h3>"."</div>";

                            while($result = mysql_fetch_array($search)){

                                    echo "<div class=\"article\">".

                                    "<div class=\"title\"><a href=\"".$result['cat'].".php"."\">".$result['title']."</a></div>".
                                    "<div class=\"body\">".substr($result['body'], 0, 250)."</div>".
                                    "<div class=\"cat\"><a href=\"".$result['cat'].".php"."\">"."Category: ".$result['cat']."</a></div>".
                                    "<div class=\"author\">"."Author: ".$result['author']."</div>".
                                    "<div class=\"dateTime\">"."Date: ".$result['date']."</div>".

                                        "</div>";
                                }

                    }   

                    else{
                            echo "Sorry! The search for "."<h3>".$term."</h3>"." gave no results.";
                        }

                }

    ?> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-06T17:43:32.417

假设每篇文章都有其 ID。更改链接以转到动态页面，并传递该 ID：

```
"<div class=\"title\"><a href=\"dynamic_page.php?id=$result[id]\">$result[title]</a></div>" 
```

然后创建一个`dynamic_page.php`接受该 ID 并生成文章，如下所示：

```
if (isset($_GET['id'])) {
    $id = mysql_real_escape_string($_GET['id']);
    $q = "SELECT
            *
        FROM
            `article`
        WHERE
            `id` = '$id'
        LIMIT 1;";
    $q = mysql_query($q);
    if (mysql_num_rows($q) > 0) {
        $result = mysql_fetch_assoc($q);
        echo "<div class=\"article\">".
                "<div class=\"title\">".$result['title']."</div>".
                "<div class=\"body\">".$result['body']."</div>".
                "<div class=\"cat\"><a href=\"".$result['cat'].".php"."\">"."Category: ".$result['cat']."</a></div>".
                "<div class=\"author\">"."Author: ".$result['author']."</div>".
                "<div class=\"dateTime\">"."Date: ".$result['date']."</div>".
            "</div>";
    }
    else {
        /* Article not found */
    }
} 
```

请注意，这次`$result['body']`是完整显示的。我也建议`mysql_fetch_assoc()`在你的情况下使用。

代码在[这里](http://pastie.org/private/lyc9gio2xxlpv3dt3schwa)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-06T17:34:04.123

如果链接类似于，`page.com/article.php?id=20`那么您的查询将如下所示：

```
$id = mysql_real_escape_string($_GET['id']);
mysql_query("SELECT * FROM articles WHERE id = '$id'"); 
```

然后你可以使用 mysql_fetch_array 来显示数据。

# jena - 在 Apache Jena 中按插入时间插入和搜索记录

> ID：13749045
> 
> 赞同：2
> 
> 时间：2012-12-06T17:22:43.683
> 
> 标签：jena

我需要定期处理持续存储在 Jena 数据存储中的数据。插入数据时，有什么方法可以存储 RDF 记录的插入时间？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-07T08:41:31.577

RDF 的一个有趣且有用的特性是数据和元数据都存储在同一级别 - 本质上是在一个图中（尽管请参阅下面的警告）。因此，与其有一个单独的地方（例如附加到数据库表的元数据）来记录更新时间等内容，不如在 RDF 中将该信息作为三元组放在数据本身旁边。

所以假设我正在向`example:Book`我的三重商店添加资源。我可以简单地`dcTerms:modified`向资源本身添加一个属性，以对更改日期进行编码：

```
example:eloquent_ruby
    a example:Book ;
    dcTerms:title "Eloquent Ruby"@en ;
    dcTerms:modified "2012-12-07T08:00:00"^^xsd:dateTime. 
```

一个潜在的问题是，这样做时，我必须确信所有使用该存储的应用程序都明白`modified`三元组表示资源更新的时间，而不是书籍本身的最后一次更新。如果资源类型更明显地表示事物的描述而不是事物本身，则此模式可能会更好地工作 - 例如，如果主题资源是 a`example:PatientRecord`而不是`example:Book`.

我可以通过显式记录更新主题资源的*事件*来降低更新时间不明确的风险：

```
example:eloquent_ruby
    a example:Book ;
    dcTerms:title "Eloquent Ruby"@en ;
    dcTerms:identifier "0-321-58410-4".

<urn:uuid:6ba3f8ea-4048-11e2-82bc-ab86fea9a379> 
    a example:UpdateEvent ;
    example:about example:eloquent_ruby ;
    dcTerms:modified "2012-12-07T08:00:00"^^xsd:dateTime ;
    example:changed dcTerms:identifier , dcTerms:title. 
```

注意：您不必使用 UUID 作为更改记录的主题 - 任何其他合成 ID 甚至 bNode 都可以。这些天我个人较少使用 bNode，只是因为在 UI 中使用命名资源更容易。

如果在您的应用程序中，您不想将内容数据和出处元数据放在同一个 RDF 图中，您可以将更新记录放在不同的命名图中。这意味着您必须记住在您使用的任何 SPARQL 查询中使用图形名称（除非您依赖 Jena TDB 的[联合默认图形](http://jena.apache.org/documentation/tdb/assembler.html#union-default-graph)功能），但它确实允许您单独管理内容数据和元数据，并将其隐藏如有必要，来自某些用户。

# c++ - OpenCV 从网络摄像头流中分离出剪影

> ID：13749053
> 
> 赞同：1
> 
> 时间：2012-12-06T17:23:04.157
> 
> 标签：c++, opencv, cinder

我试图从未知的视频流中分离出一个人的剪影。（用户网络摄像头），使用`C++/Cinder/OpenCV`. 我已经识别和绘制轮廓，但我没有得到整个人的轮廓，只是元素（头发、眼睛等）

我正在使用：BackgroundSubtractorMOG2 删除背景。模糊以消除噪音。自适应阈值。查找和绘制具有一定复杂性的轮廓。

代码：

```
Surface surface;
surface = mCapture.getSurface();

// To texture for display
textureCapture = Texture( surface );

    // Greyscale
    Mat matGrey( toOcv( surface ) );

    // Output
    Mat matForeground, matBackground;

    // Build foreground & background
    mog( matGrey, matForeground, -1 );
    mog.getBackgroundImage( matBackground );

// Build countours
Mat matContourTemp = matForeground.clone();

    // Blur to remove noise
    Mat matBlurred = matContourTemp.clone();
    cv::GaussianBlur( matContourTemp, matBlurred, cv::Size( 9, 9 ), 0 );

    textureBlurred = Texture( fromOcv( matBlurred ) );

    // Adaptive threshold
    Mat matThresh = matContourTemp.clone();
    adaptiveThreshold( matBlurred, matThresh, 255, CV_ADAPTIVE_THRESH_MEAN_C, CV_THRESH_BINARY, 3, 0 );

    textureThreshold = Texture( fromOcv( matThresh ) );

    // Contours
    vector<cv::Vec4i> hierarchy;

        // Find
        contours.clear();
        findContours( matThresh, contours, hierarchy, CV_RETR_EXTERNAL, CV_CHAIN_APPROX_SIMPLE, cv::Point( 0, 0 ) );

        // Draw contours
        Mat matContourImage( matForeground.size(), CV_8UC3, cv::Scalar( 0, 0, 0 ) );

        Scalar colors[ 3 ];
        colors[ 0 ] = Scalar( 255, 255, 255 );

        for( size_t idx = 0; idx < contours.size(); idx++){

            if( contours[ idx ].size() > 40 ){

                cv::drawContours(
                        matContourImage, contours, idx,
                        colors[ 0 ], -3,
                        100,
                        hierarchy,
                        0,
                        cv::Point( 0, 0 ) );
                };
    };
    textureContour = Texture( fromOcv( matContourImage ) ); 
```

输出：（我在这里太初级，无法发布图片）

[http://barnabysheeran.com/outgoing/stackoverflow/ss_1.png](http://barnabysheeran.com/outgoing/stackoverflow/ss_1.png) [http://barnabysheeran.com/outgoing/stackoverflow/ss_2.png](http://barnabysheeran.com/outgoing/stackoverflow/ss_2.png)

我希望这是一个充满全身的剪影。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-03-19T06:45:31.117

您可以在阈值处理后使用[erode/](http://docs.opencv.org/doc/tutorials/imgproc/erosion_dilatation/erosion_dilatation.html) dilate ，这通常会消除噪声并拉伸白色区域，但我建议使用 [BGSlibrary](https://github.com/andrewssobral/bgslibrary)，我过去将它与 openFrameworks 结合使用，它确实是用于减去背景的不同算法的绝佳集合。

在分割之前进行一些图像处理可能会有所帮助，但这只是一个理论。

# jpa - OpenJPA QueryCache 缓存不可缓存的实体

> ID：13749057
> 
> 赞同：1
> 
> 时间：2012-12-06T17:23:38.290
> 
> 标签：jpa, caching, openjpa

我正在使用**glassfish 3.2.2**和**OpenJPA 2.2.1**

在我的 persistence.xml 我有：

```
<shared-cache-mode>ENABLE_SELECTIVE</shared-cache-mode>
<properties>
        <property name="openjpa.QueryCache" value="true(CacheSize=10000, SoftReferenceSize=1000)"/>
        <property name="openjpa.DataCache" value="true(CacheSize=20000, SoftReferenceSize=1000)"/>
        <property name="openjpa.RuntimeUnenhancedClasses" value="unsupported"/>
</properties> 
```

我只希望`@Cacheable`缓存具有注释的实体。

但是，在对没有`@Cacheable`注释的实体运行命名查询之后，如果我再次运行该命名查询，它将从查询缓存中返回结果。

如果我对实体进行直接查找，它不会从数据缓存中获取实体。

那么为什么`@Cacheable`阻止一个实体被放入数据缓存，却不阻止它被放入查询缓存呢？

有没有办法防止所有没有`@Cacheable`注释的实体被放入查询缓存中？

**伪代码**

**实体类：**

```
@NamedQueries ({ @NamedQuery(name="MyEntity.getByName", query="select e from MyEntity e where e.name = :name")})

@Entity
public class MyEntity
{
  @Id
  @Column
  private long id;

  @Column
  private String name;
} 
```

**EJB：**

```
@Stateless
public class MyEJB
{
  @PersistenceContext
  EntityManager em;

  public MyEntity getEntityByName(String name) {
    TypedQuery<MyEntity> namedQuery = em.createNamedQuery("MyEntity.getByName", MyEntity.class);
    namedQuery.setParameter("name", name); 
    return namedQuery.getSingleResult(); 
  }
} 
```

经进一步调查：

这个问题可能很难发现，因为只要你的查询返回相同的 id，无论它是否在查询缓存中，你都会得到相同的结果。

例如，如果我只是更新数据库中返回的行的数据，那么它将带回新数据。

在我的情况下，批处理正在删除该行，然后重新插入具有新 ID 的新行。所以查询缓存存储了行的原始 id，所以当我运行查询时，它现在返回 null，因为该 id 不再存在。如果我清除查询缓存，那么它会正确带回新行。

因此，如果没有`@Cacheable`注释的实体一开始就永远不会进入查询缓存，那就太好了。

# java - Android读取xml错误

> ID：13749059
> 
> 赞同：0
> 
> 时间：2012-12-06T17:23:41.763
> 
> 标签：java, php, android, xml, uri

我正在尝试从 android 应用程序读取 xml 文件，但 xml 文件正在从 php 立即生成（所以文件是 .php）

当我从 java 询问该 url 时，我收到此错误： URI 中的预期文件方案：“http://someserver.com/foo/bar/Myuri.php”

```
try {
          File file = new File(new URI("http://someserver.com/foo/bar/Myuri.php"));
          DocumentBuilderFactory dbf = DocumentBuilderFactory.newInstance();
          DocumentBuilder db = dbf.newDocumentBuilder();
          Document doc = db.parse(file);
          doc.getDocumentElement().normalize();
          System.out.println("Root element " + doc.getDocumentElement().getNodeName());
          NodeList nodeLst = doc.getElementsByTagName("employee");
          //System.out.println("Information of all employees");

          for (int s = 0; s < nodeLst.getLength(); s++) {

            Node fstNode = nodeLst.item(s);

            if (fstNode.getNodeType() == Node.ELEMENT_NODE) {

                   Element fstElmnt = (Element) fstNode;
              NodeList fstNmElmntLst = fstElmnt.getElementsByTagName("name");
              Element fstNmElmnt = (Element) fstNmElmntLst.item(0);
              NodeList fstNm = fstNmElmnt.getChildNodes();
              System.out.println("Name : "  + ((Node) fstNm.item(0)).getNodeValue());
              NodeList lstNmElmntLst = fstElmnt.getElementsByTagName("lastname");
              Element lstNmElmnt = (Element) lstNmElmntLst.item(0);
              NodeList lstNm = lstNmElmnt.getChildNodes();
              System.out.println("Last Name : " + ((Node) lstNm.item(0)).getNodeValue());
            }

          }
          } catch (Exception e) {
            alertDialog.setMessage(e.getMessage());
            alertDialog.show();
          } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-06T17:27:40.830

编辑：好的，现在我们有了一些代码，让我们看看重要的一行：

```
File file = new File(new URI("http://someserver.com/foo/bar/Myuri.php")); 
```

该类`File`用于文件。不是任意的 URI。它期望`file`URI 中有一个方案，例如`file://`.

基本上，你不能`File`用来从网上获取东西。这不是它的目的。使用 HTTP 库，例如[`HttpClient`](http://developer.android.com/reference/org/apache/http/client/HttpClient.html).

# database - Grails，在具有复合 ID 的域类上使用 read()

> ID：13749063
> 
> 赞同：2
> 
> 时间：2012-12-06T17:23:53.580
> 
> 标签：database, grails, groovy

我有一个不错的小域类，它由三个整数组成，但没有主键（因为糟糕的数据库设计......重写是不可能的）：

```
class Domain implements Serializable {

   Integer foo
   Integer bar
   Integer flag

    static mapping = {
        table 'domain'
        version false

        id  composite: ['foo', 'bar']
        foo column: 'foo_nbr'
        flag    column: 'value_I_want_flag'
        bar column: 'bar_nbr'   
    }
} 
```

我希望能够使用 foo 和 bar 的复合 id 通过 read 函数访问标志

如

```
Integer yayFlag = Domain.read(foo, bar).flag 
```

对此有最佳实践吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-06T17:39:56.007

根据[有关 this 的文档](http://grails.org/doc/2.1.0/guide/single.html#compositePrimaryKeys)，您应该能够通过`get()`带有原型对象的语法进行引用：

```
def d = Domain.get(new Domain(foo: 23, bar: 999)) 
```

请注意，它还建议实现`hashCode()`and `equals()`（使用 id 组件字段），并创建 class `Serializable`。

如果`read()`是要求，您可以尝试相同的方法，但我还没有搜索源以知道这是否有效（参考文档实际上并没有明确显示您可以执行上述操作，所以在参考[`get()`](http://grails.org/doc/2.1.1/ref/Domain%20Classes/get.html)中不要这么说[`read()`](http://grails.org/doc/2.1.1/ref/Domain%20Classes/read.html)文档不是决定性的）。我已经离开 Grails 一段时间了，但您也可以尝试`discard()`避免`get()`在刷新时写入数据库。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-06T18:09:36.167

你不能这样做，你需要像 Brian 提到的那样创建一个原型实例。您可以使用您想要使用的语法创建一个帮助器方法来为您工作：

```
static Domain read(int foo, int bar) {
   read new Domain(foo: foo, bar: bar)
} 
```

您可能也需要类似的`get`方法。

# apache - 通过 AJP 将 REMOTE_USER 转发到 tomcat（例如用于 shibboleth）

> ID：13749065
> 
> 赞同：5
> 
> 时间：2012-12-06T17:24:00.890
> 
> 标签：apache, authentication, tomcat, ajp, shibboleth

今天我只是遇到了以下问题： 1.我配置了 apache 进行基本身份验证（需要有效用户）；这有效。2\. 我进一步配置了 apache 以将某些路径的请求（在我的例子中是 /idp）转发到 tomcat servlet（shibboleth IDP）。

结果是，shibboleth IdP（ECP 配置文件）告诉我没有设置“REMOTE_USER”（它使用 httpRequest.getRemoteUser() 方法来检查它；它返回 null）。

我尝试了很多类似 SetEnv 和 RewriteRule 的东西，但没有成功。

解决方案很简单，但很难找到......所以我决定在这里发布它以帮助其他人解决这类问题。

问候斯特凡

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-12-06T17:24:00.890

好的，这是我的解决方案。我发现需要将 tomcat 配置为信任/接受 apache2 完成的身份验证...

为此，您必须编辑 tomcat 的 server.xml（应位于 /etc/tomcat6/server.xml 或类似位置）并将AJP 连接添加`tomcatAuthentication="false"`到您的 -Tag 中。`<Connector>`我的连接器标签现在看起来像这样：

```
<Connector port="8009" protocol="AJP/1.3" redirectPort="8443"
   tomcatAuthentication="false" /> 
```

现在你只需要重新启动tomcat ...完成。

希望这可以帮助！;-)

斯特凡

## 解释：

## "tomcatAuthentication" -- "如果设置为 true，则将在 Tomcat 中进行身份验证。否则，经过身份验证的主体将从本机 Web 服务器传播并用于 Tomcat 中的授权。默认值为 true。"

引自：http: [//tomcat.apache.org/tomcat-5.5-doc/config/ajp.html](http://tomcat.apache.org/tomcat-5.5-doc/config/ajp.html)

# objective-c - 如何为委托方法编写 GHunit 测试用例？

> ID：13749068
> 
> 赞同：0
> 
> 时间：2012-12-06T17:24:07.160
> 
> 标签：objective-c, gh-unit

我们可以为委托方法编写 GHunit 测试吗？我有一个委托方法，我正在尝试为该委托方法编写 GHUnit 测试。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-06T20:02:07.383

这取决于您要如何测试委托方法。如果您想测试在某个场景中 **是否调用了委托方法，那么您可以为此使用模拟对象。**[OCMock](http://ocmock.org)是 iOS 和 Mac OS 上用于模拟的典型框架。上次我检查它与 GHUnit 配合得很好。我现在只用SenTest，所以不能说权威。

如果您想测试委托方法的**功能**，没有什么可以阻止您直接从测试用例中调用委托方法。

# android - 播放音乐一次 CountDownTimer android

> ID：13749070
> 
> 赞同：0
> 
> 时间：2012-12-06T17:24:10.740
> 
> 标签：android, countdowntimer

我只想在一秒钟内播放一次声音文件，但是如果我将 countDownInterval 设置为 100 到 700，我会执行两到三次操作（由于舍入）。如果我将 countDownInterval 设置为从 700 到 1000，我会在 10 到 2 的范围内进行一次操作，但如果我设置在 1 秒内播放声音文件，我会播放两次，因为`onTick`四舍五入。是的，我知道[CountDownTimer 并不精确](https://stackoverflow.com/a/6811744/1878685)。感谢帮助！

```
 public void startTimer() {
          tCountDownTimer = new CountDownTimer(tTime * 1000, 1000) {    
      @Override
      public void onTick(long millisUntilFinished) {
          int seconds = (int) (millisUntilFinished / 1000);       
          int minutes = seconds / 60;
          int hours = minutes / 60;
          minutes = minutes % 60;
          seconds = seconds % 60;
          String curTime = hours + ":" + minutes + "::" + seconds;
          Log.v("log_tag", "Log is here Time is now" + curTime);
          tTimeLabel.setText(String.format("%02d:%02d:%02d", hours, minutes, seconds));
          runSec (seconds); 
          runMin (minutes);
          runHou (hours);
          if (seconds == 3) {
              playAlertSound(R.raw.beep1);
              }
          else if(seconds == 2){
              playAlertSound(R.raw.beep1);
              }
          else if(seconds == 1){
              playAlertSound(R.raw.beep1);
              }
          else if(seconds == 0){
              playAlertSound(R.raw.beep2);
              } 
```

如果我使用`int seconds = Math.round(millisUntilFinished / 1000);`

```
12-06 19:16:54.320: V/log_tag(1121): Log is here Time is now0:0::4
12-06 19:16:55.379: V/log_tag(1121): Log is here Time is now0:0::3
12-06 19:16:56.437: V/log_tag(1121): Log is here Time is now0:0::2
12-06 19:16:57.478: V/log_tag(1121): Log is here Time is now0:0::1 
```

如果我使用`int seconds = Math.round(millisUntilFinished / 1000f);`

```
12-06 19:20:14.851: V/log_tag(1167): Log is here Time is now0:0::5
12-06 19:20:15.885: V/log_tag(1167): Log is here Time is now0:0::4
12-06 19:20:16.931: V/log_tag(1167): Log is here Time is now0:0::3
12-06 19:20:17.973: V/log_tag(1167): Log is here Time is now0:0::2 
```

这是用户在驯服器上设置的时间：

```
protected int tTime = 0;

public void onClick(View v) {
    if(v == upTimesl && tTime <= (11*60*60+1*59*60+55))
      settTime(tTime + 5);
    else if(v == downTimesl && tTime > 5)
      settTime(tTime - 5);
    else if(v == downTimesl && tTime <= 5)
          settTime(tTime=0);
... 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-06T18:13:46.513

从数学上讲，您不是四舍五入，而是进行地板操作。如果`millisUntilFinished / 1000`实际上是 0.9999，那么您肯定会得到 0。您应该使用`Math.round()`：

```
int seconds = Math.round(millisUntilFinished / 1000f); 
```

（请注意，我除以`1000f`，将 long 除以整数仍然是地板操作。）

您当前的间隔是 100 毫秒，这没有意义，因为您的所有计算都是基于秒的。你应该使用：

```
tCountDownTimer = new CountDownTimer(tTime * 1000, 1000) { 
```

* * *

CountDownTimer 也有一些怪癖：它为每个间隔增加了几毫秒，并且经常在调用之前跳过最后一个间隔`onFinish()`。不久前，我对此类进行了一些更改，以消除[android CountDownTimer 中的这些错误 - 滴答之间的额外毫秒延迟](https://stackoverflow.com/a/12762416/1267661)。

# python - requests.exceptions.SSLError：[Errno 185090050]

> ID：13749073
> 
> 赞同：2
> 
> 时间：2012-12-06T17:24:15.913
> 
> 标签：python, ssl, python-requests

使用请求库时出现此错误。我知道这与证书例程有关，并且我需要密码 RC4-SHA1。当我执行 value = requests.get( url ) 时如何指定它

# android - 在 Android 中的 EditTextView 上应用样式

> ID：13749074
> 
> 赞同：0
> 
> 时间：2012-12-06T17:24:18.710
> 
> 标签：android, android-styles

我正在尝试为特定的 android 视图组件指定和设置样式，在这种情况下，该组件是 EditText。

这是我试图应用一组全局样式的样式

```
 <!-- style for the action bar backgrounds -->
<style name="MyActionBar" parent="@android:style/Widget.Holo.ActionBar">
    <item name="android:background">@color/lightBlue</item>
    <item name="android:paddingBottom">0dip</item>
</style>

<style name="ActivityStyleYellow">
    <item name="android:background">@color/brightYellow</item>
    <item name="android:textViewStyle">@style/textViewYellow</item>
    <item name="android:actionBarStyle">@style/MyActionBar</item>
    <item name="android:text">@style/editTextYellow</item>

</style>

 <style name="ActivityStyleBlue">
    <item name="android:background">@color/lightBlue</item>
    <item name="android:actionBarStyle">@style/MyActionBar</item>
    <item name="android:textViewStyle">@style/textViewBlue</item>
    <item name="android:EditTextViewStyle">@style/editTextBlue</item>
</style> 
```

这是我在单独的 xml 文件中的视图组件的样式

```
 <style name="textViewBlue" parent="@android:style/Widget.TextView">
            <item name="android:textColor">@color/darkBlue</item>
              <item name="android:paddingBottom">@dimen/text_padding</item>
        </style>

        <style name="textViewYellow" parent="@android:style/Widget.TextView">
            <item name="android:textColor">@color/darkYellow</item>
              <item name="android:paddingBottom">@dimen/text_padding</item>
        </style>

        <style name="editTextBlue" parent="@android:style/Widget.EditText">
            <item name="android:paddingBottom">@dimen/text_padding</item>
            <item name="android:textStyle">bold</item>
            <item name="android:textColor">@color/darkBlue</item>
        </style>

     <style name="editTextYellow" parent="@android:style/Widget.EditText">
        <item name="android:paddingBottom">@dimen/text_padding</item>
        <item name="android:textStyle">bold</item>
        <item name="android:textColor">@color/darkYellow</item>
    </style> 
```

问题是这一行：@style/editTextYellow

android:EditTextViewStyle 不存在，我找不到任何对它的引用。我认为会是这样，因为我还假设 textViewStyle 是什么并且有效。

我找不到 android:xxx 样式有效的定义列表，但我想 editText 肯定应该是？

是否有一个列表显示我可以为“android:xxx”使用哪些组件？我基本上想应用于特定的 View 组件类型。

这对editText可能吗？

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-06T18:02:39.597

您正在寻找的是 android:editTextStyle。例如：

```
<style name="AppTheme" parent="@android:style/Theme.NoTitleBar">
    <item name="android:editTextStyle">@style/Widget.Styled.EditText</item>
</style>

<style name="Widget.Styled.EditText" parent="@android:style/Widget.EditText">
    <item name="android:textColor">@color/black</item>
    <item name="android:textSize">@dimen/default_font_size</item>
    <item name="android:textColorHint">@color/default_grey</item>
    <item name="android:typeface">normal</item>
</style> 
```

# delphi - delphi中的双缓冲

> ID：13749075
> 
> 赞同：4
> 
> 时间：2012-12-06T17:24:21.360
> 
> 标签：delphi

使用 Delphi XE2 我想让一些按钮在 delphi 应用程序中移动。

我写了这段代码：

```
procedure TForm1.DoSomething;
var x : integer;
begin    
   for x := 200 downto 139 do begin
       // move two buttons
      Button1.Top := x;
      Button3.Top := x;
       // skip some repaints to reduce flickering
      if (x mod 7 = 1) then begin
          Form1.Repaint;
      Sleep(50);
   end;
end; 
```

不幸的是，运行此程序时它仍然显着闪烁。

这是我的问题：有什么方法可以使动画流畅（没有任何闪烁）？

**编辑：** 为了使动画更流畅，在 sleep(50) 中将 50 更改为更小的值并删除此行：

```
if(x mod 7 = 1) then begin 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-06T17:27:19.443

设置`Form1.DoubleBuffered`为`True`。您可以在代码中执行此操作，但我认为该属性已在 XE2 中发布，因此您也可以在 Object Inspector 中设置它。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-06T20:24:01.907

我发现最好决定你希望运动需要多长时间，而不是使用睡眠程序。这可以更好地适应不同速度的计算机，也可以适应不同的移动距离。如果您希望它在屏幕上移动需要 1 秒，则需要在重绘之间以较小的步长移动，而在屏幕上移动只需 0.5 秒。

我不记得确切原因，但我们还添加了代码来重新绘制父级。我认为我们遇到了当我们的对象在屏幕上移动时留下重影的问题。

这是我们正在使用的代码。这是一个可以在屏幕上移动和离开的组件内部。

```
procedure TMyObject.ShiftRight;
var
  TicksStart: int64;
  StartLeftValue: integer;
  EndLeftValue: integer;
  NewLeftValue: integer;
  LeftValueDif: integer;
  RemainingTicks: int64;

begin
  StartLeftValue := Self.Left;
  EndLeftValue := Self.Left + Self.Width;
  LeftValueDif := EndLeftValue - StartLeftValue;

  TicksStart := GetTickCount();
  RemainingTicks := FadeTime;  // Fade Time is a constants that dermines how long the 
                               // slide off the screen should take

  while RemainingTicks > 0 do
  begin
    NewLeftValue := (LeftValueDif * (FadeTime - RemainingTicks)) div FadeTime;
    Self.Left := Max(StartLeftValue, NewLeftValue);
    Self.Parent.Repaint;
    Self.Repaint;

    RemainingTicks := FadeTime - int64(GetTickCount - TicksStart);
  end;

  if Self.Left < EndLeftValue then
    Self.Left := EndLeftValue;

  Self.Parent.Repaint;    
  Self.Repaint;
end; 
```

# javascript - 仅使用 javascript 剥离网站效果

> ID：13749077
> 
> 赞同：1
> 
> 时间：2012-12-06T17:24:22.417
> 
> 标签：javascript

我已经看到使用 Flash（swf 文件）的角屏幕剥离效果。有谁知道仅使用 Javascript/css 执行此操作的代码？

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-06T17:29:58.080

看看这里的 jquery 插件演示 [一些例子](http://www.jquery4u.com/plugins/10-jquery-page-peel-plugins/)

# javascript - 静默跟踪 pdf 开口

> ID：13749080
> 
> 赞同：3
> 
> 时间：2012-12-06T17:24:28.477
> 
> 标签：javascript, flash, pdf

是否可以通过 .js 或 flash 在打开 .pdf 时静默提醒？此外，是否可以再次设置（闪存）cookie 以启用跟踪，而无需用户通知？

我很欣赏跟踪仅适用于互联网连接和支持脚本执行的 .pdf 阅读器。这并不是为了防弹。

我不是在寻找 DRM 解决方案，只是一种静默跟踪 .pdf 是否在超过 1 台 PC 上打开的方法。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-06T18:42:52.727

根据[Adob​​e Javascript 脚本指南](http://partners.adobe.com/public/developer/en/acrobat/sdk/AcroJSGuide.pdf)，您可以从 PDF 文件中的 JavaScript 操作调用 SOAP Web 服务方法。然后，您可以创建一个调用 Web 服务的 JavaScript 操作，并将其设置为 Catalog 字典的 OpenAction 事件，打开文件时将调用此事件。 [这](https://stackoverflow.com/a/6168091/501196)是另一个问题，我还建议使用 OpenAction 事件。

# c# - Android - 启动 Google Voice 应用程序并拨打号码

> ID：13749082
> 
> 赞同：2
> 
> 时间：2012-12-06T17:24:32.380
> 
> 标签：c#, java, android, xamarin.android, google-voice

我们正在开发一款仅适用于 Android 平板电脑的应用程序。我们需要能够以编程方式为某个电话号码启动 Google Voice 应用。

我们尝试了这个（如果我们的应用程序没有在平板电脑上运行，它可能会启动手机），但它不起作用：

```
var intent = new Intent (Intent.ActionView);
string uri = "tel:" + number;
intent.SetData (Uri.Parse (uri));
activity.StartActivity (intent); 
```

[此处](https://stackoverflow.com/questions/4275678/how-to-make-phone-call-using-intent-in-android)从 Java 移植的代码。

它所做的只是弹出一个框来将号码添加到联系人中——这不是我们想要的。

有任何想法吗？我们在网上找不到任何这样做的例子，我相信它会使用完全不同的 url 方案等。

*   注意：我们的应用程序是适用于 Android 的 Mono，但 Java 答案也适用于我们

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-10T13:35:16.863

根据我对 Google Voice 的检查，我怀疑这是可能的。它当然不受支持——它们不提供任何可能符合您需求的活动。

> 你能发布更多关于你如何看待现有应用程序的意图过滤器的信息吗？

Play 商店中有一个名为[AppXplore](https://play.google.com/store/apps/details?id=com.sonyericsson.androidapp.AppExplore)的便捷应用程序，来自 Sony。它使您可以检查有关已安装应用程序的各种详细信息，包括让它有效地从`PackageManager`.

因此，我安装了 Google Voice 并在 AppXplore 中检查它，筛选所有活动（有数以万计的活动）以寻找有趣的`<intent-filter>`元素。我有点惊讶他们没有提供`tel:`过滤器，而且我没有看到任何其他可能相关的东西。

# objective-c - 将枚举与多个值进行比较并且没有按位

> ID：13749083
> 
> 赞同：1
> 
> 时间：2012-12-06T17:24:33.297
> 
> 标签：objective-c, c, enums, comparison

如果枚举包含多个可能的值，我如何将枚举与变量进行比较？

例如：对于以下枚举

```
typedef enum {
    EnumValueA = 2,
    EnumValueB = 3,
    EnumValueC = 4,
    EnumValueD = (0 | -1)
} EnumValues; 
```

当比较像`BOOL result = (a == EnumValueD)`我这样的变量时`NO`if`int a = 0`和`YES`if `int a = -1`。

另外，这个枚举在一个组件内，所以我不能改变它..如何

我怎样才能使这个比较返回 YES`0`和`-1`？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-06T17:28:31.470

你的问题是基于一个误解。线

```
EnumValueD = (0 | -1) 
```

不*表示*“多个值”。那是一个“按位或”运算符：它对数字零和减一执行操作（按位），并且只产生*一个*答案。这是一段奇怪的代码（可能与整数字节大小问题有关），但您只需要针对 -1 进行测试。（如果你真的想要安全，你可以测试`(0|-1)`，我想。）

道德：不要将逻辑或`||`与按位或运算符混淆`|`。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-06T17:41:16.700

让它变成这样：

```
typedef enum {
    EnumValueA = 1,
    EnumValueB = 2,
    EnumValueC = 4,
    EnumValueD = 8
} EnumValues; 
```

因此，您可以使用逻辑或组合一个值，以便可以有多个值。
然后使用逻辑和检查是否包含单个值。
例如：

```
EnumValues val= EnumValueD | EnumValueC; 
```

然后读取值：

```
if(value & EnumValueA)
    actionA();
if(value & EnumValueB)
    actionB();
if(value & enumValueC)
    actionC();
if(value & enumValueD)
    actionD(); 
```

所以如果有多个值，就会执行多个动作。如果您愿意，您还可以放置一个包含多个值的值，而不是使用或：

```
typedef enum {
    EnumValueA = 1,
    EnumValueB = 2,
    EnumValueC = 4,
    EnumValueD = 8,
    EnumValueCAndD= 12
} EnumValues; 
```

# html - 最近使用的网站截图导致的火狐信息泄露

> ID：13749088
> 
> 赞同：14
> 
> 时间：2012-12-06T17:24:47.290
> 
> 标签：html, security, google-chrome, firefox, screenshot

在我的网络应用程序中，我注意到在“新标签”页面上，它显示了一系列我最近查看的带有屏幕截图的网站。

这里的问题是，其中一些屏幕截图显示了我网页中的敏感信息。

有没有办法阻止 Firefox 截取我的 Web 应用程序的屏幕截图，特别是不需要浏览器配置（在我的网站代码中）？

我相信 chrome 也有类似的功能，我也想阻止它。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-13T14:42:49.077

**[更新]**

简短的回答：**没有。**

长答案：

这显然超出了处理*浏览器 chrome*中内容呈现的**HTML**范围。这是一个示例，为什么浏览器尚不支持此类选项。

 *> 考虑记住文本字段中的类型的浏览器，从而在用户开始输入具有相同/相似类名/ID的文本字段时提供自动完成功能。
> 
> 现在 Gecko 浏览器提出了 [autocomplete="off"](https://developer.mozilla.org/en-US/docs/How_to_Turn_Off_Form_Autocompletion) 属性，让网页设计师控制表单的**呈现**。因此，虽然浏览器可能会为您提供管理网络浏览器上数据呈现的方法，但除了浏览器的 chrome（用于显示页面的浏览器部分）之外，没有办法管理页面的呈现。

为了澄清，可以参考[这里](http://www.w3.org/standards/webdesign/htmlcss)的 HTML 的正式定义。

现在排除了 HTML，让我们看一下[ECMA 脚本](http://www.ecma-international.org/publications/files/ECMA-ST/Ecma-262.pdf)。ECMA 脚本决定了 Javascript 能做什么和不能做什么。有不同的实现，但最终功能或多或少保持相同，以便实现符合*ECMA 标准*。从 ECMA 功能来看，它确认 Javascript 只会访问 cookie 和发出函数来间接控制浏览器历史记录。

这些[屏幕截图](http://support.mozilla.org/en-US/kb/thumbnails-on-new-tab-page-are-missing)由浏览器获取并缓存在本地磁盘上。它们使用如下链接进行缓存和访问：`moz-page-thumb://thumbnail?url=<url encoded>`例如。`moz-page-thumb://thumbnail?url=http%3A%2F%2Fstackoverflow.com%2F`

> 免责声明：以下结论基于我的理解，我无法提供任何参考。HTML 或 Javascript 在这里绝对帮不了你；浏览器特定的附加组件将是解决方案。一旦网页内容到达我的机器，网页设计师不应该能够控制它的使用，因为这会暗示侵犯隐私。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-20T17:23:46.563

也许您可以设置缓存控制标头。这将告诉浏览器尽一切可能不将页面保存在用户的计算机上。

```
Cache-control: no-store 
```

[http://en.wikipedia.org/wiki/List_of_HTTP_header_fields#Avoiding_caching](http://en.wikipedia.org/wiki/List_of_HTTP_header_fields#Avoiding_caching)

遗憾的是，这会对性能造成影响，因为用户每次调用都需要完全下拉每一页。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-06T19:12:20.567

查看我自己的 Firefox 的“新标签”窗口，似乎 FF 不会截取通过 https 访问的网页的屏幕截图。这些页面显示为空白矩形。这对我来说完全有道理，我希望这对我来说不仅仅是一个奇怪的巧合。

如果是这种情况，我认为网站中处理敏感信息的任何部分都应该受到保护，FF 不会捕获它的图像。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-12-06T19:19:08.570

阅读这个[新标签页——显示、隐藏和自定义热门网站](http://support.mozilla.org/en-US/kb/new-tab-page-show-hide-and-customize-top-sites)

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-12-20T17:55:53.170

我想这取决于您网站上显示敏感信息的位置。

解决方案 1：HTTPS。浏览器了解 https 站点需要更高的安全性，因此不会在快速拨号页面中包含 https 站点。（坦率地说，如果它是敏感信息，那么无论如何你都应该使用 https，因为除了查看屏幕截图之外，攻击者还可以通过多种方式读取 http 页面）。

解决方案 2：仅显示“非首屏”的敏感信息。屏幕截图是页面的顶部，因此如果有问题的信息在页面下方，则不会显示在屏幕截图中。

解决方案 3：每次打开包含敏感信息的页面时，都为其提供唯一的 URL。浏览器仅在快速拨号屏幕中显示打开次数最多的 URL，因此如果每次都使用不同的 URL，则永远不会显示。*

# c# - 从excel的列名中删除空格点（。）特殊字符到winform复选框

> ID：13749089
> 
> 赞同：-2
> 
> 时间：2012-12-06T17:25:03.333
> 
> 标签：c#, regex

在 C# 中将 excel 文件上传到 Winforms 期间，谁能帮我解决这个问题？

当我上传 Excel 文件时，如果有空格或 . 或 Excel 列名中存在特殊字符 (_,$,#)（如“ORD.No”或 DATE_JOIN、“emp name”），则该列将显示为 C# 中的“ORDNO”、DATEJOIN。

上传 Excel 文件后，我只是执行以下代码以使用以下代码在复选框中获取 COLUMN NAME

```
for (int c = 0; c < cnt; c++)
{
    cbox = new CheckBox();//cbox checkbox object
    cbox.Text = ds.Tables[0].Columns[c].ColumnName.Trim();
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-06T17:35:34.650

```
Regex reg = new Regex("[_$#.]"); // your unwanted characters inside the []
cbox.Text = reg.Replace(ds.Tables[0].Columns[c].ColumnName.Trim(), ""); 
```

# c# - 透明表格问题（表格显示为黑色，表格根本不显示）

> ID：13749090
> 
> 赞同：0
> 
> 时间：2012-12-06T17:25:14.593
> 
> 标签：c#, .net, winforms, graphics, mouse

我正在尝试创建一个仍会响应鼠标移动和单击事件的透明表单，以显示我们公司的徽标，直到用户单击鼠标，但我遇到了一些困难，因为有时表单和徽标不会'根本不会出现，在其他时候它们会出现，但背景是黑色的。

这是我如何称呼我的表格：

```
MouseAlertForm maf = new MouseAlertForm(Win32.GetCursorPosition());
maf.Show(); 
```

`maf.Show()`导致表单根本不显示（与 相同`Show(this)`），并`maf.ShowDialog()`导致黑色背景。这是`MouseAlertForm`.

```
public sealed partial class MouseAlertForm : Form
{
    private Image Logo;
    public Point MouseLocation { get; private set; }

    public MouseAlertForm(Point location)
    {
        InitializeComponent();
        MouseLocation = location; 

        // Allow transparent backgrounds.
        SetStyle(ControlStyles.SupportsTransparentBackColor, true);

        // Set up this form to be maximum size, with no borders, and have a nearly transparent background.
        this.TopMost = true;
        this.DoubleBuffered = true;
        this.ShowInTaskbar = false;
        this.FormBorderStyle = FormBorderStyle.None;
        this.WindowState = FormWindowState.Maximized;
        this.BackColor = Color.FromArgb(1,255,255,255);

        // Load the Image.
        var assemlby = Assembly.GetAssembly(new AssemblyTypeLinker().GetType());
        if (assemlby != null)
            Logo = Image.FromStream(assemlby.GetManifestResourceStream("MyProgram.MyLogo.png"));
    }

    /// <summary>
    /// Update the current mouse location, and invalidate the control causing a re-draw.
    /// </summary>
    /// <param name="e"></param>
    protected override void OnMouseMove(MouseEventArgs e)
    {
        base.OnMouseMove(e);

        MouseLocation = e.Location;
        Invalidate();
    }

    /// <summary>
    /// Release our logo, and close the form.
    /// </summary>
    /// <param name="e"></param>
    protected override void OnMouseClick(MouseEventArgs e)
    {
        base.OnMouseClick(e);

        Logo.Dispose();
        this.Close();
    }

    /// <summary>
    /// Clear what was previously drawn, and if we have a mouse location, draw the logo in that area.
    /// </summary>
    /// <param name="e"></param>
    protected override void OnPaint(PaintEventArgs e)
    {
        base.OnPaint(e);

        // Clear the background back to a nearly transparent white.
        e.Graphics.Clear(Color.FromArgb(1, 255, 255, 255));

        if (MouseLocation != Point.Empty)
        {
            // Draw our logo in the spot of the current mouse location.
            e.Graphics.DrawImage(Logo, MouseLocation.X - 100, MouseLocation.Y - 100, 200, 200);
        }
    }
} 
```

编辑：似乎即使在我认为是背景的情况下也会创建黑色背景。我将我`BackColor`的设置为完整的 255，并将其设为蓝色，然后将 alpha 分量慢慢降低到 0，只留下我看到的黑色背景。这是 ShowDialog 的特点吗？这个背景是从哪里来的？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-06T18:07:52.970

这是修复。首先，因为我现在覆盖`OnPaint`了 ，而在之前的实现中我没有，我使用`CreateGraphics()`了很多。但是由于我是重写`OnPaint`的，它带有自己的图形对象，当它无效时为我清除，因此我不需要自己清除它。

其次，我不知道为什么，但是以前使用`BackColor`a`TransparencyKey`导致`MouseMove`and`MouseClick`事件没有被注册，但是我再次相信，因为我覆盖它们而不是附加到它们，尽管`TransparencyKey`.

```
public sealed partial class MouseAlertForm : Form
{
    private Image Logo;
    public Point MouseLocation { get; private set; }

    public MouseAlertForm(Point location)
    {
        InitializeComponent();
        MouseLocation = location; 

        // Allow transparent backgrounds.
        SetStyle(ControlStyles.SupportsTransparentBackColor, true);

        // Set up this form to be maximum size, with no borders, and have a nearly transparent background.
        this.TopMost = true;
        this.DoubleBuffered = true;
        this.ShowInTaskbar = false;
        this.FormBorderStyle = FormBorderStyle.None;
        this.WindowState = FormWindowState.Maximized;

        this.BackColor = Color.Lime;
        this.TransparencyKey = Color.Lime;

        // Load the Image.
        var assembly = Assembly.GetAssembly(new AssemblyTypeLinker().GetType());
        if (assembly != null)
            Logo = Image.FromStream(assembly.GetManifestResourceStream("MyProgram.MyLogo.png"));
    }

    /// <summary>
    /// Update the current mouse location, and invalidate the control causing a re-draw.
    /// </summary>
    /// <param name="e"></param>
    protected override void OnMouseMove(MouseEventArgs e)
    {
        base.OnMouseMove(e);

        MouseLocation = e.Location;
        Invalidate();
    }

    /// <summary>
    /// Release our logo, and close the form.
    /// </summary>
    /// <param name="e"></param>
    protected override void OnMouseClick(MouseEventArgs e)
    {
        base.OnMouseClick(e);

        Logo.Dispose();
        this.Close();
    }

    /// <summary>
    /// Clear what was previously drawn, and if we have a mouse location, draw the logo in that area.
    /// </summary>
    /// <param name="e"></param>
    protected override void OnPaint(PaintEventArgs e)
    {
        base.OnPaint(e);

        if (MouseLocation != Point.Empty)
        {
            // Draw our logo in the spot of the current mouse location.
            e.Graphics.DrawImage(Logo, MouseLocation.X - 100, MouseLocation.Y - 100, 200, 200);
        }
    } 
```

# visual-studio-2010 - Visual Studio 解决方案资源管理器职位

> ID：13749095
> 
> 赞同：9
> 
> 时间：2012-12-06T17:25:26.550
> 
> 标签：visual-studio-2010, visual-studio, visual-studio-2012

有谁知道是否有办法让某个标签始终出现在顶部？我想在那里有解决方案资源管理器。

我知道我可以固定和取消固定，直到事情得到我想要的那样，但这可能会因为进一步固定和取消固定而变得混乱。

![在此处输入图像描述](../Images/95d4567ea58ceabedaa28da43afbb8f3.png)

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2015-07-07T10:29:52.053

1.  引脚解决方案资源管理器
2.  对于每个剩余的选项卡：将其固定，然后将其拖到解决方案资源管理器选项卡中，使其显示为解决方案资源管理器底部的选项卡。
3.  根据需要在解决方案资源管理器底部对选项卡进行排序。
4.  取消固定，您的标签顺序应该是您想要的。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2014-02-24T17:05:34.323

也许一个解决方案：

1.  随心所欲地排列你的标签
2.  通过 => 菜单/工具/设置导入和导出导出您的设置

完成后，您可以随时重新导入设置，这也将使用给定的设置重置窗口布局。您也可以使用“重置窗口布局”功能（菜单/窗口）

可以在 VS 2008 - 2012 上工作。也应该在 2013 年工作。

# c++ - arduino 上的 C++ 向量占用大量 RAM 空间

> ID：13749096
> 
> 赞同：1
> 
> 时间：2012-12-06T17:25:32.627
> 
> 标签：c++, memory-management, vector, arduino, ram

在任何地方都找不到解决方案。希望在这个问题上变得更加开明。

我想为 arduino 项目使用各种动态数组。[我在这里](https://github.com/maniacbug/StandardCplusplus)遇到了一个在 arduino 平台上使用向量的库。我使用了一个函数来监视我在[这里](http://www.controllerprojects.com/2011/05/23/determining-sram-usage-on-arduino/)找到的 arduino 上的可用 RAM 。

这是我的代码示例：

```
Serial.print("Starting RAM: ");
Serial.println(freeRam());
Serial.println();

vector<int> intVector;

Serial.print("Remaining RAM after intVector declaration: ");
Serial.println(freeRam());
Serial.println();

vector<char> charVector;

Serial.print("Remaining RAM after charVector declaration: ");
Serial.println(freeRam());
Serial.println();

Serial.print("sizeof(intVector) = ");
Serial.println(sizeof(intVector));
Serial.print("sizeof(charVector) = ");
Serial.println(sizeof(charVector)); 
```

这是输出：

```
Starting RAM: 1684

Remaining RAM after intVector declaration: 1618

Remaining RAM after charVector declaration: 1584

sizeof(intVector) = 7
sizeof(charVector) = 7 
```

似乎 intVector 分配占用了 RAM 的 66 字节块。看起来向量为此分配了 32*2 + 2 = 66 字节的内存。同样，charVector 分配占用了 34 个字节 (32*1 + 2)。似乎这种分配 32* `sizeof(type)`+ 更改的模式存在于其他数据类型（例如 char、float 等）。请注意，`sizeof(int) = 2`在arduino上。

我的问题是我想填充这些向量的对象大小在 10-20 字节之间。由于 ATMega328 上只有 2 kB 的 RAM，我将无法按照目前的设计运行我的程序。对于具有 的对象`segment`，`sizeof(segment) = 16`向量会占用 522 字节的 RAM 块。

所以我的问题是：

1.  当向量的大小只有 7 个字节时，尽管它的类型，为什么向量分配 32 * sizeof(type) 字节的 RAM？

2.  有没有更好的方法在 arduino 平台上使用某种动态数组？

3.  是否有内存管理技术可以让我使用向量？

谢谢，如果这个问题是重复的，请提前道歉！

编辑：

似乎该向量被初始化为容量为 32。

```
intVector.capacity() = 32; 
```

尝试使用

```
intVector.reserve(1); // or
intVector.resize(1); 
```

不会改变向量的容量。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-12-06T17:31:13.980

为了提高效率，向量一次分配的空间比它需要的多——你不希望它在每次尝试插入单个项目时都重新分配。即使它仍然是空的，它也很有可能以 32 个项目的容量进行初始化。

尝试打印`vec.capacity()`以找出它为多少元素保留了空间。

向量是标准容器中最节省空间的，它应该只使用每个元素所需的数量加上一些恒定的开销。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-06T17:50:41.827

快速浏览该`vector`实现会发现它总是保留额外`__UCLIBCXX_STL_BUFFER_SIZE__`的内存字节。该预处理器符号定义`32`为`system_configuration.h`.

因此，默认构造 a`vector`总是占用 32 个字节加上`vector`本身必须跟踪分配的内存、大小、容量等的任何开销。

您可以尝试将预处理器定义更改`system_configuration.h`为

```
#define __UCLIBCXX_STL_BUFFER_SIZE__ 0 
```

但是如果有任何依赖于这个空间的东西总是被分配，这可能会破坏代码。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-06T18:00:20.943

如另一个答案中所述， std::vector 总是提前分配一些内存，以防止每次插入时重新分配。向系统请求更多内存是一个代价高昂的过程，您应该尽可能避免。

**编写自定义分配器。**分配器是 std::vector 的可选模板参数，您可以使用它重新定义它如何获取内存（例如，使其预分配较小的数量，在每次插入时重新分配等）。有关这方面的更多信息，您可以在 STL 上查看 Nicolai Josuttis 的[网站。](http://www.cppstdlib.com/)有一个涵盖分配器的免费章节（侧栏中的标题“补充章节（PDF）”，还有[示例代码](http://www.cppstdlib.com/code/alloc/myalloc11.cpp.html)。

# wpf - WPF ToggleButton IsChecked 触发器

> ID：13749107
> 
> 赞同：6
> 
> 时间：2012-12-06T17:26:10.723
> 
> 标签：wpf, triggers, togglebutton

这让我发疯。我有一个简单的 WPF 切换按钮，带有两个 IsChecked 触发器。一个代表值为真，另一个代表值为假。未选中按钮时它工作正常，应用了我的 false 样式；但是，系统从不应用 IsChecked 为真时的样式。它总是只使用默认的蓝色 chrome windows 样式。有任何想法吗？

```
<ToggleButton Content="Control 1" Width="200" Margin="0,0,0,10" Focusable="False">
    <ToggleButton.Resources>
        <Style TargetType="{x:Type ToggleButton}">
            <Style.Triggers>
                <Trigger Property="IsChecked" Value="True">
                    <Setter Property="Background">
                        <Setter.Value>
                            <LinearGradientBrush EndPoint="0,1" StartPoint="0,0">
                                <GradientStop Color="#FFF3F3F3" Offset="1"/>
                                <GradientStop Color="LawnGreen" Offset="0.307"/>
                            </LinearGradientBrush>
                        </Setter.Value>
                    </Setter>
                </Trigger>
                <Trigger Property="IsChecked" Value="False">
                    <Setter Property="Background">
                        <Setter.Value>
                            <LinearGradientBrush EndPoint="0,1" StartPoint="0,0">
                                <GradientStop Color="#FFF3F3F3" Offset="1"/>
                                <GradientStop Color="Red" Offset="0.307"/>
                            </LinearGradientBrush>
                        </Setter.Value>
                    </Setter>
                </Trigger>
            </Style.Triggers>
        </Style>
    </ToggleButton.Resources>
</ToggleButton> 
```

任何帮助将不胜感激。我敢肯定，我只是忽略了一些显而易见的事情。

* * *

## 回答 #1

> 赞同：19
> 
> 时间：2012-12-06T17:46:50.420

切换时的布局`ToggleButton.IsChecked`似乎是模板的一部分。如果您覆盖模板，您应该能够正确设置值。请参阅[覆盖切换按钮样式](https://stackoverflow.com/questions/12416821/override-togglebutton-style)

例子：

```
<ToggleButton Content="Control 1" Focusable="False">
   <ToggleButton.Template>
      <ControlTemplate TargetType="{x:Type ToggleButton}">
         <Border CornerRadius="3" Background="{TemplateBinding Background}">
            <ContentPresenter Margin="3" 
               HorizontalAlignment="Center" 
               VerticalAlignment="Center"/>
         </Border>
         <ControlTemplate.Triggers>
            <Trigger Property="IsChecked" Value="True">
               <Setter Property="Background">
                  <Setter.Value>
                     <LinearGradientBrush EndPoint="0,1" StartPoint="0,0">
                        <GradientStop Color="#FFF3F3F3" Offset="1"/>
                        <GradientStop Color="LawnGreen" Offset="0.307"/>
                     </LinearGradientBrush>
                  </Setter.Value>
               </Setter>
            </Trigger>
            <Trigger Property="IsChecked" Value="False">
               <Setter Property="Background">
                  <Setter.Value>
                     <LinearGradientBrush EndPoint="0,1" StartPoint="0,0">
                        <GradientStop Color="#FFF3F3F3" Offset="1"/>
                        <GradientStop Color="Red" Offset="0.307"/>
                     </LinearGradientBrush>
                  </Setter.Value>
               </Setter>
            </Trigger>
            </ControlTemplate.Triggers>
         </ControlTemplate>
      </ToggleButton.Template>
   </ToggleButton> 
```

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2014-12-11T12:14:08.307

我知道，我的回答没有带来什么新东西，但是**newb**建​​议的模板对我来说似乎非常简化。所以我公开了我自己的 ControlTemplate 版本。它可能对某人有用。

```
<ToggleButton Width="100" Height="100">
    <ToggleButton.Template>
        <ControlTemplate TargetType="{x:Type ToggleButton}">
            <Border BorderBrush="Orange" 
                    BorderThickness="3" 
                    CornerRadius="3" 
                    Margin="1" 
                    Name="Border" 
                    Background="{TemplateBinding Background}">
                <Grid>
                    <Rectangle Name="FocusCue" 
                            Visibility="Hidden" 
                            Stroke="Black"
                            StrokeThickness="1" 
                            StrokeDashArray="1 2"
                            SnapsToDevicePixels="True" ></Rectangle>
                    <ContentPresenter  Margin="3" 
                                    HorizontalAlignment="Center" 
                                    VerticalAlignment="Center"/>
                </Grid>
            </Border>
            <ControlTemplate.Triggers>
                <Trigger Property="IsChecked" Value="True">
                    <Setter TargetName="Border" Property="Background" Value="IndianRed" />
                    <Setter TargetName="Border" Property="BorderBrush" Value="DarkKhaki" />
                </Trigger>
                <Trigger Property="IsChecked" Value="False">
                    <Setter TargetName="Border" Property="Background" Value="Red" />
                    <Setter TargetName="Border" Property="BorderBrush" Value="Orange" />
                </Trigger>
                <Trigger Property="IsKeyboardFocused" Value="True">
                    <Setter TargetName="FocusCue" Property="Visibility" Value="Visible" />
                </Trigger>
                <Trigger Property="IsMouseOver" Value="True">
                    <Setter TargetName="Border" Property="Background" Value="DarkRed" />
                </Trigger>
            </ControlTemplate.Triggers>
        </ControlTemplate>
    </ToggleButton.Template>
</ToggleButton> 
```

# sql - 如何通过 id 从 2 个表中选择数据

> ID：13749112
> 
> 赞同：0
> 
> 时间：2012-12-06T17:26:27.343
> 
> 标签：sql, xml, export

我有一个脚本可以从表中获取数据并导出到 xml，但我需要从 2 个不同的表中获取数据。

```
Table 1: Products

i have inside:

id code

Table 2: Stock

i have inside

id qty 
```

我的脚本是：

```
<?php
    $db_host = "localhost";

    $db_name = "test";
    $db_username = "root";
    $db_password = "";

    $dbh = mysql_connect($db_host, $db_username, $db_password) or die("Unable to connect to MySQL");
    mysql_query('SET NAMES "utf8"');
    mysql_select_db($db_name, $dbh) or die("Could not select $db_name");

    $sql = "select * from products ";

    $q = mysql_query($sql);
    $custom = '"';

    $xml = "\n";
    $xml .= "<XML>\n";
    while($r = mysql_fetch_assoc($q))
    {

        $xml .= "   <PRODUCT code=$custom " . $r["code"] . "$cusmot qty=$custom " . $r["qty"] . "$custom />\n";

    }
    $xml .= "</XML>";

    header("Content-type: text/xml");
    echo $xml;
?> 
```

需要帮助根据 Products 表上的 id 从 Stock 结果中获取数量。

欢迎任何帮助。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-06T17:29:45.120

```
SELECT p.id, p.code, s.qty
FROM products p
INNER JOIN stock s ON p.id = s.id 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-06T17:32:25.887

尝试更改您的 SQL 以从两个表中提取数据：`select p.code, s.qty from products p, stock s where p.id = s.id`. 有了这个改变，你的 PHP 看起来几乎（或完全）可以工作了！

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-06T17:29:13.943

您应该使用此查询而不是代码中存在的查询：

```
SELECT p.id, p.code, s.qty
FROM product p, stock s
WHERE p.id = s.id 
```

# sql-server-2008 - 参数从查询中获取值

> ID：13749114
> 
> 赞同：0
> 
> 时间：2012-12-06T17:26:35.857
> 
> 标签：sql-server-2008, reporting-services, ssrs-2008, reporting, query-builder

我有一个返回所有用户 ID 的数据集。有一个参数可以通过 SSRS 2008 R2 设置获取这些 ID 选项：

*   参数选项
*   -> 默认值
*   -> 从查询中获取值
*   -> 数据集...和值字段...。

然后我有另一个执行存储过程的数据集，带有一些参数（都是单值）。

隐藏桌子是没有问题的。问题是数据集只执行一次，只获取参数的第一个值的数据，而我希望为每个用户 ID 执行执行存储过程的数据集。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-07T10:12:14.887

对于您的情况，我至少可以看到两个选项：

*   [创建一个子报表](http://msdn.microsoft.com/en-us/library/ms160348%28v=sql.100%29.aspx)，并将其放在一个列表中。将列表绑定到用户 ID 数据集，并将用户 ID 作为参数传递给子报表。然后，子报表将为该用户 ID 执行其数据集。
*   更改存储过程，使其也返回一个用户 ID 列。它只会执行一次，并一次返回所有用户的所有数据。在您的表格或矩阵中，您可以对该列进行分组。

# jquery - Zend Jquery Ajax 将对象文字发布到 PHP 并解析它们

> ID：13749116
> 
> 赞同：0
> 
> 时间：2012-12-06T17:26:42.007
> 
> 标签：jquery, ajax, arrays, zend-framework

我有一个非常复杂的 Jquery 对象，类似于多维数组。这是使用 console.log 的样子

> [
> 
> [] id [“91900”] 位置 [“F43”，“F44”] prev_location [“F41”]，
> 
> [] id [“92305”] 位置 [“F38”，“F39”] prev_location [“F39”]，
> 
> [] id [“155972”] 位置 [“F35”] prev_location [“F45”]
> 
> ]

尝试使用 JQUERY/AJAX 将其发送到 Zend 控制器，我确实尝试对其进行字符串化，但当我将其发布到控制器上时它只是 Array。

> 数据 = JSON.stringify(big_array)
> 
> $.ajax({
> 
> ```
>  type: 'POST',
>             dataType: 'json', 
>             url: '/project/public/index/send', 
>             async: false,
>             data: {myJson:  data},
>             success: function(response) {
>             }
>             }); 
> ```

下面是控制器，试图输出一些东西，所以萤火虫可以在 HTML 响应上显示我至少一些东西，但除了 Array 什么都没有

> 公共函数发送动作（）{
> 
> ```
>  $data = $this->_request->getPost();
>     $data_array = json_decode($data['myJson'], true);
>     print_r($data_array);
> } 
> ```

有任何想法吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-06T18:38:55.313

我认为问题在于您的数据不容易表达为有效的 JSON。我建议将您的数据类型保留为 html 或 text，然后在 php.ini 中将其处理为 JSON（或您需要的任何格式）。

```
data = big_array;

$.ajax({

      type: 'POST',
        dataType: 'text', 
        url: '/project/public/index/send', 
        async: false,
        data: data,
           success: function(response) {
        }
}); 
```

或者，您可以使用以下内容：[http](http://phpjs.org/functions/base64_encode/) : //phpjs.org/functions/base64_encode/ 在 JSON 化数据之前对数组的块进行编码。但是，无论如何您都需要解码服务器上的块。

希望这可以帮助。

PS我很好奇你为什么使用async：false？

# java - 从子流返回后调用flowRedirect抛出异常

> ID：13749118
> 
> 赞同：3
> 
> 时间：2012-12-06T17:26:45.313
> 
> 标签：java, spring, spring-webflow, spring-webflow-2

```
<subflow-state id="callingSubflow" subflow="cz/fe/ui">
    <transition on="finish" to="goToResult"/>
</subflow-state>

<end-state id="goToResult" view="flowRedirect:cz/fe/ui/detail/flow"/> 
```

使用此配置，在子流中完成一些 webflow 逻辑后，不会发生 flowRedirect，仅刷新原始页面并且我得到“java.lang.IllegalStateException: No active FlowSession to access; this FlowExecution has end”异常。

当我没有从子流进入“goToResult”状态时，flowRedirect 会按预期工作。

当我在结束状态下不使用 flowRedirect 时，预期的页面会正确显示。

但是当我使用这两者的组合时，只会发生刷新和异常。

使用 Spring Web Flow 2.0.9

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-06T18:37:09.307

当您在子流中并处于最终状态流中时，视图参数将被忽略。尝试改用视图状态，看看是否能解决您的问题

# python - GAE 转换 API 的替代方案

> ID：13749126
> 
> 赞同：1
> 
> 时间：2012-12-06T17:27:18.310
> 
> 标签：python, google-app-engine

> **可能重复：**
> [现在转换 API 已停止，有没有办法将 PDF 文件转换为 appengine / python 中的图像？](https://stackoverflow.com/questions/14061732/now-that-the-conversion-api-is-discontinued-is-there-a-way-to-convert-pdf-files)

我需要 App Engine 中的 Conversion API 的替代方案，使用此 API 的那些在删除后最终会使用什么？

谢谢！

# mysql - 从 MySQL 表中获取外键约束

> ID：13749130
> 
> 赞同：1
> 
> 时间：2012-12-06T17:27:24.480
> 
> 标签：mysql, foreign-keys

我有一个带有外键约束的 MySQL 表，例如。

```
CREATE TABLE `yiingles_version` (
  `id` int(11) unsigned NOT NULL AUTO_INCREMENT,
  `package_id` int(11) NOT NULL,
  `version` varchar(64) NOT NULL DEFAULT '',
  `distUrl` varchar(255) DEFAULT NULL,
  PRIMARY KEY (`id`),
  KEY `package_id` (`package_id`),

  CONSTRAINT `yiingles_version_ibfk_1` 
    FOREIGN KEY (`package_id`) REFERENCES `yiingles_package` (`id`) 
    ON DELETE CASCADE ON UPDATE CASCADE

) ENGINE=InnoDB DEFAULT CHARSET=utf8; 
```

在这种情况下，如何以编程方式获取`ON DELETE`and的值？`ON UPDATE`**`CASCADE`**

我已经看到了这个[问题](https://stackoverflow.com/questions/12813168/get-mysql-primary-key-and-foreign-keys-constraints-from-php)，也查看了 MySQL 的`information_schema`数据库，但没有找到获取上述值的方法。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-06T17:33:33.170

看看`information_schema.referential_constraints`桌子。具体来说，`UPDATE_RULE`和`DELETE_RULE`列。

# java - 如何以编程方式模拟活动，使手机不会因不活动而进入睡眠状态？

> ID：13749132
> 
> 赞同：3
> 
> 时间：2012-12-06T17:27:25.923
> 
> 标签：java, android

首先，我知道[WakeLock](https://stackoverflow.com/a/3723649/1287251)和[setKeepScreenOn](https://stackoverflow.com/a/6553807/1287251)。我的需求有点不同，我什至不确定这是否可能。

我通过调用在一个线程中生成触摸事件，`MotionEvent.obtain()`然后使用`activity.dispatchTouchEvent()`. 这工作正常，除了设备可以进入睡眠状态，因为生成的触摸事件似乎没有被识别为用户活动，并且手机可以由于不活动而进入睡眠状态。

是否有可能，如果可以，如何告诉活动（或应用程序，或操作系统；无论需要告诉什么）“嘿，有活动”，所以它不会自动睡眠，但仍然允许手机自动睡眠如果足够长的时间没有任何活动（即如果我的线程在足够长的时间内没有生成并发送触摸事件），则正常？基本上，我希望这些生成的触摸事件能够像真正的触摸事件一样让手机保持清醒。`WakeLock`and的问题`setKeepScreenOn()`在于，由于不活动，它们会强制屏幕保持打开状态并且不允许其休眠（或任何用户设备的默认行为）。

# sql - Excel 导入 Access

> ID：13749134
> 
> 赞同：2
> 
> 时间：2012-12-06T17:27:30.590
> 
> 标签：sql, database, excel, ms-access

我有 3 个要导入 Access 的电子表格，但我在弄清楚它时遇到了问题。我什至不确定它是否可以按照我想要的方式完成。

一个电子表格如下所示：

```
StoreNum, SKU_1, SKU_2, SKU_3, ..., SKU_1000  
1, 0, 100, 25, ..., 1  
2, 5, 250, 15, ..., 5  
3, 78, 25, 12, ..., 15 
```

我怎样才能导入这个，所以我有 StoreNum、SKU、Qty？

其他的对我来说很容易理解

```
StoreNum, Address1, Address2, City, State, Zip 
```

和

```
Sku, Description, Notes, Size 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-06T18:05:54.740

我认为您想像这样将电子表格数据存储在 Access 中...

```
StoreNum  SKU Qty
       1    1   0
       1    2 100
       1    3  25
       1 1000   1
       2    1   5 
```

如果这就是你想要的，请继续阅读。如果不是你想要的，请说明你想要什么。

在 Access 中，创建指向 Excel 工作表的链接并将该链接命名为`ExcelSource`。

然后创建一个`SELECT`类似这样的查询：

```
SELECT
    StoreNum,
    1 AS SKU,
    SKU_1 AS Qty
FROM ExcelSource
UNION ALL
SELECT
    StoreNum,
    2 AS SKU,
    SKU_2 AS Qty
FROM ExcelSource
UNION ALL
SELECT
    StoreNum,
    3 AS SKU,
    SKU_3 AS Qty
FROM ExcelSource
UNION ALL
SELECT
    StoreNum,
    1000 AS SKU,
    SKU_1000 AS Qty
FROM ExcelSource; 
```

如果该`SELECT`查询的结果集为您提供所需的信息，请将其转换为“追加查询”以将这些数据存储在名为`YourTable`. 该查询的`SELECT`SQL 将是前面有一个`INSERT INTO ...`部分的 SQL：

```
INSERT INTO YourTable (StoreNum, SKU, Qty)
SELECT
    StoreNum,
    1 AS SKU,
    SKU_1 AS Qty
FROM ExcelSource
UNION ALL
SELECT
    StoreNum,
    2 AS SKU,
    SKU_2 AS Qty
FROM ExcelSource
UNION ALL
SELECT
    StoreNum,
    3 AS SKU,
    SKU_3 AS Qty
FROM ExcelSource
UNION ALL
SELECT
    StoreNum,
    1000 AS SKU,
    SKU_1000 AS Qty
FROM ExcelSource; 
```

如果您的 Excel 工作表包含 1000 个 SKU 列，请创建一系列较小的附加查询，每个查询都使用这 1000 个列的可管理子集。

这也可以使用 VBA 代码而不是查询来完成。我不想引导你通过那个选项，因为我什至不知道我是否在正确的轨道上。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-06T19:27:27.913

当您打开 Access 数据库时，单击；

> 文件
> 
> > 获取外部数据
> > 
> > > 进口

并遵循向导步骤。

几个注意点。确保所有 Excel 工作表具有相同的标题，并且不包含任何 Null、DIV 或任何其他类型的错误。快乐导入！！！

# asp.net - 返回 404 导致：XML Parsing Error: no element found

> ID：13749135
> 
> 赞同：0
> 
> 时间：2012-12-06T17:27:32.973
> 
> 标签：asp.net, html, asp.net-4.0

我在页面的代码隐藏中有以下内容：

```
HttpContext.Current.Response.Clear();
HttpContext.Current.Response.StatusCode = 404;
HttpContext.Current.Response.End(); 
```

但我得到（在浏览器中。Visual Web Developer 不会抛出任何异常）：

```
XML Parsing Error: no element found
Location: http://localhost:...
Line Number 1, Column 1: 
```

我尝试将这些行放入其中，`MasterPage`但没有任何区别。我什至尝试将它们放入`PreRenderComplete`事件处理程序中。

那么为什么会显示这个错误呢？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-23T11:48:46.827

我尝试将它上传到我的网络主机，它返回一个正常的 404。

所以它在 Visual Web Developer 中似乎有所不同。（或者也许它取决于主机，并且不会总是好的？）

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-12-06T17:31:21.847

响应对象允许您直接写入 HttpResponse。在您的示例中，您正在清除它。将其替换为状态 404 并结束。这意味着框架为您添加的任何内容（如页面内容）都已被删除。

不能只在 IIS 中配置 404 页面吗？

# asp.net-mvc-4 - ASP.NET 4.5 尚未在 Web 服务器上注册

> ID：13749138
> 
> 赞同：178
> 
> 时间：2012-12-06T17:27:44.440
> 
> 标签：asp.net-mvc-4, iis-7.5, sql-server-express, localdb

在我的 Win 7 开发机器上，为了使用 SQL Express 实例而不是默认安装的 localDB。我在 MVC 4 项目属性页面（Web 选项卡）中取消选中“使用 IIS Express”，然后出现以下错误：

**ASP.NET 4.5 尚未在 Web 服务器上注册。您需要为 ASP.NET 4.5 手动配置您的 Web 服务器，以便您的站点正确运行。**

我验证了 ASP.NET 已在 IIS 功能中激活。

请问可以做些什么来解决这个问题？

* * *

## 回答 #1

> 赞同：215
> 
> 时间：2012-12-06T17:31:54.310

也许您必须在***Visual Studio Tools***命令提示符下执行以下命令：

```
aspnet_regiis -i 
```

[您可以在此处](http://msdn.microsoft.com/en-us/library/k6h9cz8h%28v=vs.100%29.aspx)阅读有关**ASP.NET IIS 注册工具 (Aspnet_regiis.exe)** 的更多信息。

* * *

## 回答 #2

> 赞同：105
> 
> 时间：2013-09-15T20:03:54.457

在 Windows 8.1 上，由于 .NET 4.5 是内置的，修复方法是从管理命令提示符运行它：

```
dism.exe /Online /Enable-Feature /all /FeatureName:IIS-ASPNET45 
```

* * *

## 回答 #3

> 赞同：67
> 
> 时间：2015-05-20T14:35:53.397

如果您安装了 .NET Framework 4.6，您可能会因为 VS 错误而看到此错误。这里的解决方法和解决方案：

[http://blogs.msdn.com/b/webdev/archive/2014/11/11/dialog-box-may-be-displayed-to-users-when-opening-projects-in-microsoft-visual-studio-安装后的 microsoft-net-framework-4-6.aspx](http://blogs.msdn.com/b/webdev/archive/2014/11/11/dialog-box-may-be-displayed-to-users-when-opening-projects-in-microsoft-visual-studio-after-installation-of-microsoft-net-framework-4-6.aspx)

编辑：

正如一些评论中所指出的，这可能在升级到 Windows 10 或 Visual Studio 2015 后在幕后发生。

* * *

## 回答 #4

> 赞同：8
> 
> 时间：2014-09-07T09:21:22.493

对于 Windows 8 客户端计算机，在“Internet 信息服务 -> 万维网服务 -> 应用程序开发功能 -> ASP.NET 4.5”下的“打开/关闭 Windows 功能”中打开“IIS-ASPNET45”。

* * *

## 回答 #5

> 赞同：8
> 
> 时间：2015-10-08T14:32:41.063

.net 框架会覆盖 4.0 文件夹，因此请运行以下命令：

将 .net 框架注册到 IIS 转到
开始 -> 运行-> cmd -> 以管理员身份运行：

```
cd C:\Windows\Microsoft.NET\Framework\v4.0.30319
aspnet_regiis.exe -i 
```

* * *

## 回答 #6

> 赞同：2
> 
> 时间：2016-06-29T07:02:24.650

通过 VS 更新解决了它。

按照此链接（[https://blogs.msdn.microsoft.com/webdev/2014/11/11/dialog-box-may-be-displayed-to-users-when-opening-projects-in-microsoft-visual-微软网络框架安装后工作室 4-6/](https://blogs.msdn.microsoft.com/webdev/2014/11/11/dialog-box-may-be-displayed-to-users-when-opening-projects-in-microsoft-visual-studio-after-installation-of-microsoft-net-framework-4-6/)）

**解决方案**：Microsoft 已针对所有受影响的 Microsoft Visual Studio 版本发布了修复程序。

Visual Studio 2013 –</p>

下载 Visual Studio 2013 Update 4 有关 Visual Studio 2013 Update 4 的更多信息，请参考：Visual Studio 2013 Update 4 KB 文章 Visual Studio 2012

已发布针对 Microsoft Visual Studio 2012 解决此问题的更新：KB3002339 要直接从 Microsoft 下载中心安装此更新，请访问此处为 Visual Studio 2010 SP1

已发布针对 Microsoft Visual Studio 2010 SP1 解决此问题的更新：KB3002340 此更新可从 Windows 更新获得 要直接从 Microsoft 下载中心安装此更新，请点击此处

* * *

## 回答 #7

> 赞同：2
> 
> 时间：2017-03-03T12:33:34.023

不需要键入 c:\

开始 -> 运行 -> cmd -> 以管理员身份运行并执行以下命令

* * *

.NET Framework 版本 4（32 位系统）

## %windir%\Microsoft.NET\Framework\v4.0.30319\aspnet_regiis.exe -i

.NET Framework 版本 4（64 位系统）

## %windir%\Microsoft.NET\Framework64\v4.0.30319\aspnet_regiis.exe -i

或者使用 Visual Studio 工具中的命令提示符：C:\ProgramData\Microsoft\Windows\Start Menu\Programs\Microsoft Visual Studio 2012\Visual Studio Tools>VS2012 x86 Native Tools 命令提示符

版本可能会有所不同..希望这会有所帮助。

* * *

## 回答 #8

> 赞同：1
> 
> 时间：2015-01-06T14:41:30.333

尽管 ASP.NET 4.5 安装在“打开/关闭 Windows 功能”下，但我遇到了完全相同的问题。我尝试了一切，直到我最终从“打开/关闭 Windows 功能”下完全删除了 ASP.NET 3.5 和 4.5，重新启动我的电脑并再次重新安装它们。这解决了问题。

* * *

## 回答 #9

> 赞同：1
> 
> 时间：2015-07-30T19:33:54.000

我也遇到了这个问题。我尝试了上述解决方案，但对我不起作用。

我安装了视觉工作室更新，我的问题得到了解决。

从以下链接下载 Visual Studio 更新 [http://blogs.msdn.com/b/webdev/archive/2014/11/11/dialog-box-may-be-displayed-to-users-when-opening-projects -在-microsoft-visual-studio-安装后-of-microsoft-net-framework-4-6.aspx](http://blogs.msdn.com/b/webdev/archive/2014/11/11/dialog-box-may-be-displayed-to-users-when-opening-projects-in-microsoft-visual-studio-after-installation-of-microsoft-net-framework-4-6.aspx)

谢谢！

* * *

## 回答 #10

> 赞同：1
> 
> 时间：2016-02-09T01:35:33.160

**对于出现以下错误的 Windows 10** ：为 ASP.NET 4.5 配置 Web [http://localhost:64886/失败。](http://localhost:64886/)您必须为 ASP.NET 4.5 手动配置此站点，以便该站点正确运行。ASP.NET 4.0 尚未在 Web 服务器上注册。您需要为 ASP.NET 4.0 手动配置 Web 服务器，以便您的站点正确运行。解决方案： [https ://blogs.msdn.microsoft.com/webdev/2014/11/11/dialog-box-may-be-displayed-to-users-when-opening-projects-in-microsoft-visual-studio-安装后的 microsoft-net-framework-4-6/](https://blogs.msdn.microsoft.com/webdev/2014/11/11/dialog-box-may-be-displayed-to-users-when-opening-projects-in-microsoft-visual-studio-after-installation-of-microsoft-net-framework-4-6/)

* * *

## 回答 #11

> 赞同：1
> 
> 时间：2016-05-31T09:12:38.307

您需要通过程序和功能添加的内容。查看下面的链接解决了我的问题。只需按照以下步骤操作，您就应该得到它。

引用自链接：

> 进入“程序和功能”窗口后，点击左侧窗格中的“打开或关闭 Windows 功能”。
> 
> 现在向下滚动浏览树并找到：
> 
> Internet 信息服务 > 万维网服务 > 应用程序开发功能 ...然后检查您需要的所有相关功能。我选择了 .NET 3.5 和 4.6。

[http://modelrail.otenko.com/electronics/asp-net-4-5-has-not-been-registered-on-the-web-server](http://modelrail.otenko.com/electronics/asp-net-4-5-has-not-been-registered-on-the-web-server)

* * *

## 回答 #12

> 赞同：1
> 
> 时间：2017-07-29T04:38:33.313

**tl;博士; 单击确定是解决方法，之后一切都会正常工作。**

我也收到了这个错误信息。

> 为 ASP.NET 4.5配置 Web [http://localhost:xxxxx/](http://localhost:xxxxx/)失败。您必须为 ASP.NET 4.5 手动配置此站点，以便该站点正确运行。ASP.NET 4.0 尚未在 Web 服务器上注册。您需要为 ASP.NET 4.0 手动配置 Web 服务器，以便您的站点正确运行。

环境：Windows 10、IIS8、VS 2012 Web。

在找到此页面以及几个看似侵入性的解决方案后，我阅读了[https://support.microsoft.com/en-us/help/3002339/unexpected-dialog-box-appears-when-you-open上的修补程序选项-projects-in-visual-studio](https://support.microsoft.com/en-us/help/3002339/unexpected-dialog-box-appears-when-you-open-projects-in-visual-studio)在这里建议。

请避免做任何过于激烈的事情，并注意该页面中标有“解决方法”的部分，如下所示：

> ## 解决方法
> 
> * * *
> 
> 要解决此问题，请在创建新项目或打开现有网站项目或 Windows Azure 项目后出现对话框时单击确定。*完成此操作后，项目按预期工作*。

换句话说，单击对话框上的确定一次，消息就永远消失了。该项目将正常工作。

* * *

## 回答 #13

> 赞同：0
> 
> 时间：2015-04-03T17:53:37.197

我也有同样的问题。

`Turn Windows feature on or off`并得到了从菜单打开 ASP Net 的解决方案。

* * *

## 回答 #14

> 赞同：0
> 
> 时间：2015-05-23T12:36:14.260

我有同样的问题。经过长时间的搜索，我将应用程序池更改为`ASP.NET v4.x`IIS 管理器中的。

* * *

## 回答 #15

> 赞同：0
> 
> 时间：2015-09-15T04:18:09.767

此链接解释了问题的原因和问题的快速解决方法，它只是通过更新 Visual Studio 并提供更新的链接

[http://blogs.msdn.com/b/webdev/archive/2014/11/11/dialog-box-may-be-displayed-to-users-when-opening-projects-in-microsoft-visual-studio-安装后的 microsoft-net-framework-4-6.aspx](http://blogs.msdn.com/b/webdev/archive/2014/11/11/dialog-box-may-be-displayed-to-users-when-opening-projects-in-microsoft-visual-studio-after-installation-of-microsoft-net-framework-4-6.aspx)

* * *

## 回答 #16

> 赞同：0
> 
> 时间：2016-02-25T21:57:14.897

我在使用 Visual Studio 2012 时遇到了同样的问题。通过打开 IIS 功能只是无法正常工作，因为我仍然收到错误消息。尝试该[方法，但没有幸运。](https://superuser.com/questions/462078/not-all-features-were-successfully-changed-when-trying-to-add-application-deve)

我的解决方案是：

*   下载[修补程序。](https://support.microsoft.com/en-us/kb/3002339)
*   在命令行中，键入[重新启动 IIS](https://www.microsoft.com/technet/prodtechnol/WindowsServer2003/Library/IIS/003ed2fe-6339-4919-b577-6aa965994a9b.mspx?mfr=true)`iisreset /noforce YourComputerName`，然后按 ENTER。

* * *

## 回答 #17

> 赞同：0
> 
> 时间：2016-03-07T14:07:55.817

要启用的一些 IIS 功能：[参考](https://blogs.msdn.microsoft.com/habibh/2009/08/14/how-to-install-iis-7-5-on-windows-7-using-the-command-line/)

```
DISM /Online /FeatureName:IIS-ApplicationDevelopment 
/FeatureName:IIS-ASPNET /FeatureName:IIS-ASP 
/FeatureName:IIS-NetFxExtensibility 
/FeatureName:IIS-ISAPIExtensions /FeatureName:IIS-ISAPIFilter 
```

然后修复 ASP.NET 的 IIS 映射，运行 Aspnet_regiis.exe 实用程序。 [参考](https://support.microsoft.com/en-us/kb/306005)

* * *

## 回答 #18

> 赞同：0
> 
> 时间：2016-07-14T11:52:38.420

试试这个一旦转到程序和功能窗口->，点击左窗格中的“打开或关闭 Windows 功能”。

现在向下滚动浏览树并找到：

Internet Information Services 万维网服务应用程序开发功能...然后检查您需要的所有相关功能。我选择了 .NET 3.5 和 4.6。

如果不起作用，那么去让它做它的工作，然后你应该在不知不觉中回到 VS 中的快乐开发领域。如果不是，那么它实际上可能是 Visual Studio 中的一个错误。请检查您的 VS 版本的以下补丁：[VS2010](https://support.microsoft.com/en-us/kb/3002340)、[VS2012](https://support.microsoft.com/en-us/kb/3002339)或[VS2013](https://support.microsoft.com/en-us/kb/2994375)。这肯定会帮助你。

* * *

## 回答 #19

> 赞同：0
> 
> 时间：2017-06-09T12:47:01.187

以管理员权限运行visual studio并执行以下“commandaspnet_regiis -i”

# silverlight - Silverlight气泡图中依赖轴的字符串标签

> ID：13749139
> 
> 赞同：0
> 
> 时间：2012-12-06T17:27:49.660
> 
> 标签：silverlight, bubble-chart

我正在使用 silverlight 创建气泡图。从属轴仅采用 int 值，但我需要用字符串标记两个轴。我浏览了很多，找不到正确的答案。工具包图表也没有适当的 API。有人可以告诉我设置轴标签的工作原理以及执行此操作的所有步骤吗？非常感谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-04T19:50:30.587

这可以使用 BubbleSeries.DependentRangeAxis 来完成。在标签内部，LinearAxis.AxisLabelStyle 应该与绑定组件和转换器一起使用。

# ios - 如果您在 App Store 上更改应用程序的名称，短链接会更改吗？

> ID：13749141
> 
> 赞同：6
> 
> 时间：2012-12-06T17:27:52.250
> 
> 标签：ios, app-store

我们正在更改 iTunes App Store 中我们的一款应用的名称。

假设我们将我们的应用程序从`foo`, 重命名为`bar`。

目前，您可以从 下载该应用程序`http://itunes.com/app/foo`。名称更改后，短链接是否也会更改为，`http://itunes.com/app/bar`或者短链接是否与捆绑包 ID 相关联？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-12-11T02:34:26.540

我向Apple询问了详细信息，这是他们的回复：

> 我们了解您计划更新您的应用程序的名称，并希望确认应用程序的直接 URL。
> 
> 您的应用程序的 URL 将是 www.itunes.com/apps/XXXX，您将“XXXX”替换为您的应用程序名称，不带空格。一旦您的应用获得批准，您的直接链接应该会更新以反映您的新应用名称。此链接将在您的应用程序在 App Store 上线后 24 小时内生效。

**但是，在这个阶段，两个链接都有效。** 旧链接[http://www.itunes.com/apps/StoryBot](http://www.itunes.com/apps/StoryBot)和新链接[http://www.itunes.com/apps/BookBot](http://www.itunes.com/apps/BookBot)都有效（现阶段）。旧的可能会在某个时候过期（[试试看是否还没有](http://www.itunes.com/apps/StoryBot)），但在撰写本文时，它们都可以工作。

**更新**

一段时间后原链接停止工作，新链接生效。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-06T18:17:45.730

不，应用程序 URL 将保留第一个应用程序名称。

例如，如果您拥有`SuperGame`并提交了版本 2，那么您可以更改应用程序`SuperGame 2`，其 URL 仍将是`SuperGame`. 当然，只要捆绑 ID 相同。我在这里看到了一个答案，提到了同样的事情。

更新：

[https://stackoverflow.com/a/6177561/442695](https://stackoverflow.com/a/6177561/442695)

# c# - 在没有现有类属性的情况下，如何在运行类型上将 DataTable 转换为 List？

> ID：13749142
> 
> 赞同：1
> 
> 时间：2012-12-06T17:27:52.393
> 
> 标签：c#, .net, list, generics, reflection

我正在使用 VS2010 和 C#。我有一个要转换为列表的数据表。

```
Suppose:
Table dt; 
```

在运行时希望从数据表中创建类似的字段并在列表中填充字段。列表属性没有现有的类。

```
ListName=TableName
List property name=Table column name
List Property type=Table column type
List items=Table rows 
```

**注意：**最近在做EF。为了满足我的项目需求，需要灵活地使用在运行时输入和执行ESQL。我不想把这个执行结果放在datatable上`List<DataRow>`，或者想把这个结果放在list上。列表没有现有的类和属性，不想在列表类型上转换 DataTable 类型：DataRow

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-06T18:25:03.883

我们仍然不确定您要做什么，但是如果您想创建动态对象列表，您可以尝试`dynamic`

```
var dynamicList = new List<dynamic>(); 
```

然后你将不得不通过`ExpandoObject`

您必须将其转换`IDictionary`为将列名作为属性传递。

然后你可以访问这样的列表项`item.YourColumnName`

这是一个完整的例子：

```
 var dynamicList = new List<dynamic>();
            DataTable dt = new DataTable();
            dt.Columns.Add("Col1");
            dt.Columns.Add("Col2");
            dt.Rows.Add("val1","val2");
            dt.Rows.Add("val3", "val4");
            foreach (DataRow dr in dt.Rows)
            {
                dynamic myObj = new ExpandoObject();
                var p = myObj as IDictionary<string, object>;
                p[dr.Table.Columns[0].ColumnName] = dr[0];
                p[dr.Table.Columns[1].ColumnName] = dr[1];
                dynamicList.Add(p);
            }

            foreach (var item in dynamicList)
            {
                Console.WriteLine(item.Col1 + " " + item.Col2);
            } 
```

或 linq 当然也可以打印出值：

```
dynamicList.ForEach(x => Console.WriteLine(x.Col1 + " " + x.Col2)); 
```

该程序将打印出：

```
val1 val2
val3 val4 
```

# c++ - 我可以在 Visual C++ 2010 中使用不同颜色的注释吗？

> ID：13749143
> 
> 赞同：3
> 
> 时间：2012-12-06T17:28:00.387
> 
> 标签：c++, visual-studio-2010, comments, syntax-highlighting

过去我使用过 Notepad++，这使我可以根据我的编写方式为注释使用不同的颜色，例如：

```
// Two backspaces = first color
/// Three backspaces = second color
/* Multi-line comment
   = third color
*/ 
```

我发现这对于区分不同类型的注释非常有用，例如代码注释、文档、文件组织注释等。

有谁知道在 Visual C++ 2010 中实现这一目标的方法？我设法（部分）在VS2005中以某种方式做到了这一点，但这是一种解决方法，我忘记了诀窍，似乎无法在谷歌上再次找到答案。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-12-06T17:45:02.907

根据我在我的 Visual Studio 2010 版本中发现的内容：

*工具 > 选项 > 环境 > 字体和颜色*

然后：

*   *评论*是为了`//`和`/* */`
*   *文档注释*（或*XML 文档注释*）用于`///`

其他评论选项似乎对 C++ 没用

# assembly - 汇编语言：宏与过程

> ID：13749146
> 
> 赞同：6
> 
> 时间：2012-12-06T17:28:05.347
> 
> 标签：assembly, macros, procedures

我是汇编语言的新手，我想到了这个问题：对于构建我的代码、宏或过程，哪个是更好的解决方案？虽然宏中包含的代码只是被复制到需要的部分，并且允许执行代码而无需昂贵的跳转，但它确实添加了必须在程序执行时加载的额外指令。此外，在过程中，虽然它减少了需要加载到内存中的代码，但它也增加了昂贵的跳转，从一段鳕鱼到另一段。哪一个更好？宏还是程序？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-12-06T17:36:36.017

一般来说，你应该使用程序。过程有助于组织您的代码，可以更容易地调试并避免重复相同的代码。在为较小的任务创建通用语法时可以使用宏，使您的代码更易于阅读。

当然，如果您真正关心性能而不关心代码的大小，您可能会扩展这种通用方法以支持更多的宏使用。

最后，您必须查看每个具体案例。但我可以告诉你，在过度使用宏之前我已经继承了代码。它不仅复制了更多代码，而且还需要很长时间才能找出源代码，因为我必须追踪所有这些宏定义并弄清楚它们实际上在做什么。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-02-12T09:02:49.547

通常，过程使您的代码比宏更易于阅读，但请记住存在跳转成本。最重要的提示是这个；如果它是一小段代码（即您只想在代码主体中做一两件事），请使用宏，因为您对代码所做的事情不值得跳转/过程调用的成本。但是，如果您正在编写大量代码（即您在代码主体中做很多事情），那么您最好使用该过程，因为在这种情况下跳转的成本将非常小.

# xml - 谷歌网站管理员工具说站点地图有错误，它没有

> ID：13749147
> 
> 赞同：1
> 
> 时间：2012-12-06T17:28:13.083
> 
> 标签：xml, sitemap, google-search-console

所以一个客户有这个自动生成的站点地图：[http](http://nordwest-najad.se/sitemap.xml) ://nordwest-najad.se/sitemap.xml 当我尝试将它添加到谷歌网站管理员工具时，我收到了这个错误：

```
Missing XML tag
This required tag is missing. Please add it and resubmit. 
```

问题是xml标签在那里并且文档没有任何问题。
我已经通过这些网站验证了文档：
[http ://www.validome.org/google/](http://www.validome.org/google/)
[http://sitemapxml.net/sitemap-validator.php](http://sitemapxml.net/sitemap-validator.php)
[http://www.xml-sitemaps.com/validate-xml- sitemap.html](http://www.xml-sitemaps.com/validate-xml-sitemap.html)
并且所有三个站点都说没有错误。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2014-04-11T02:53:36.603

我为我的情况修复了它

我检查了[www.dhakalist.com/sitemap.xml](http://www.dhakalist.com/sitemap.xml)我正在工作但不是[dhakalist.com/sitemap.xml](http://dhakalist.com/sitemap.xml)

所以我在我的 .htaccess 文件中添加了这些行并解决了问题。

```
RewriteCond %{HTTP_HOST} !^www\.

RewriteRule ^(.*)$ http://www.%{HTTP_HOST}/$1 [R=301,L] 
```

现在谷歌正在使用站点地图。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-30T06:26:36.557

谷歌网站管理员工具显示正确的错误，因为您完全丢失了您的 XML 标记。因为你的起跑线

“http://www.google.com/schemas/sitemap/0.9/sitemap.xsd">”有错误。

改变它

http://www.sitemaps.org/schemas/sitemap/0.9/sitemap.xsd">

这对于验证定义元素和属性的过程是必要的。您可以根据 XML 架构指南在站点地图文件中进行定义。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-06T17:33:32.023

来自： http: [//support.google.com/webmasters/bin/answer.py ?hl=en&answer=183668](http://support.google.com/webmasters/bin/answer.py?hl=en&answer=183668)

您的站点地图文件必须指定以下 XML 命名空间：xmlns="http://www.sitemaps.org/schemas/sitemap/0.9"。

# php - 在 PHP 上运行 C++ 可执行文件

> ID：13749148
> 
> 赞同：1
> 
> 时间：2012-12-06T17:28:12.680
> 
> 标签：php, c++, linux, executable

我想编写 PHP 脚本，它在 Linux 机器上执行 C++ 可执行文件。我使用 exec() 或 system() PHP 函数。但它不执行 C++ 可执行文件。我的代码如下。Proc 是编译后的 C++ 可执行文件。完全相同的命令在 shell 中运行良好。

```
echo system('/var/www/image_proc/proc "/var/www/image_proc/images/original/5_1.png" 70 0 0 "/var/www/image_proc/images/processed/5_2.png"'); 
```

我检查了执行和写入文件的所有权限。而且我使用绝对路径来确保它不是路径问题。

有谁知道，可能是什么问题？任何帮助表示赞赏。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-06T17:56:25.790

我怀疑问题是使用引号。SHELL 可能会扩展/评估这些，但不会调用 system()。[libc系统](http://linux.die.net/man/3/system)

因此，建议的解决方案是：

```
<?php
    error_reporting(E_ALL);
    ini_set("display_errors", 1);
    $src = "/var/www/image_proc/images/original/5_1.png";
    $dst = "/var/www/image_proc/images/processed/5_2.png";
    $cmd = sprintf("/var/www/image_proc/proc %s 70 0 0 %s", $src, $dst);
    $result = system($cmd, $retval);
    printf("Result: '%s'\n\nReturn value: %d\n\n", $result, $retval);
?> 
```

这将输出命令的结果或有用的错误信息。尤其重要的是，这给了我们一个返回值，我们可以根据它找出发生了什么。

# css - 为什么将 type_of_element#id 放在 CSS 中？

> ID：13749150
> 
> 赞同：0
> 
> 时间：2012-12-06T17:28:28.023
> 
> 标签：css

你为什么要这样做：

```
h1#chapter1 { text-align: center } 
```

代替

```
#chapter1 { text-align: center } 
```

如果一个 id 在文档树中应该是唯一的？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-06T17:45:04.453

通常这样做是为了方便准确地分辨出哪种元素具有 ID，而无需离开样式表。我认为它还具有比#element 更高的特异性，因此您可以使用 div#element 覆盖标准的#element 选择器。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-06T17:30:21.500

我这样做是为了让下一个开发人员知道 ID 在哪个元素上。

我不会在 div、section 或任何“容器”上这样做。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-06T17:30:31.970

奇怪的问题，也许您在共享相同样式表的不同页面的不同元素上具有相同的 id？

例如在 home.html 你有`<h1 id="title">`

在 about.html 你有`<h2 id="title">`

但是它们都使用相同的样式表，并且您只想为主页标题应用样式..

此外，使不同类型的选择器之间的 CSS 语法不一致是没有意义的。会引起更多的混乱，这是值得的。

# java - 从 Regex Matcher 检索捕获组

> ID：13749152
> 
> 赞同：0
> 
> 时间：2012-12-06T17:28:46.907
> 
> 标签：java, regex

我将如何解析以下字符串中的两个数字：

```
String fName = "Run_1_vs_2_pw_optimal_mapping.txt"; 
```

我试过这样，但它不起作用：

```
 Pattern filePatt = Pattern.compile("Run_(\\d+)_vs_(\\d+)_", Pattern.CASE_INSENSITIVE);

    Matcher scanner = this.filePatt.matcher(fName);
    while (scanner.find()) {
            int groupSize = scanner.groupCount();
            if (groupSize == 2) {
                firstRun = Integer.parseInt(scanner.group(0));
                secondRun = Integer.parseInt(scanner.group(1));
            }
            break;
     } 
```

但是，这不起作用，因为scanner.group(0) 返回`Run_1_vs_2`。但为什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-06T17:34:21.643

请参阅[文档](http://docs.oracle.com/javase/1.4.2/docs/api/java/util/regex/Matcher.html#group%28int%29)。

> 捕获组从左到右进行索引，从一个开始。组 0 表示整个模式，因此表达式 m.group(0) 等价于 m.group()。

使用`group(1)`和`group(2)`。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-06T17:34:51.363

因为组号`0`对应全匹配。捕获数从 开始计算`1`。你想要的是捕获`1`（第一组括号）和`2`（第二组括号）。

# jquery - Ajax Heartbeat 使用 setInterval，防止同时调用多个

> ID：13749156
> 
> 赞同：6
> 
> 时间：2012-12-06T17:29:07.413
> 
> 标签：jquery, ajax, delayed-execution, heartbeat

我希望在后台使用 jQuery 作为“心跳”进行 AJAX 调用，以便我的 Web 应用程序可以检查新数据。例如每 10 秒。

我在其他帖子上看到，可以用来`setInterval()`调用每 X 毫秒调用一次的方法。

但是，如果我的 AJAX 调用时间超过 10 秒会怎样？我仍然希望它完成最后一个请求，并且我不希望在已经有一个呼叫正在进行时再发起另一个呼叫。这可能导致相同的信息被放置在页面上两次！

当原始 AJAX 调用可能尚未完成时，我的方法等待原始 AJAX 调用完成，而不是简单地“每 10 秒”一次，实现这一点的方法是什么。

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-12-06T17:34:31.093

尝试从您的 ajax 成功函数设置另一个超时：

```
function poll() {
    setTimeout( function() {
        $.ajax(.......).success( function(data) {
            poll();  //call your function again after successfully calling the first time.
        });
    }, 10000);
} 
```

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-12-06T17:31:46.557

而不是使用`setInterval`，在 AJAX 完成回调中调用以在前一个调用*完成*`setTimeout()`后 10 秒开始每个调用。

 ** * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-06T17:33:08.523

而不是使用 setInterval，而是计算请求时间（通常使用以秒为单位的 unix 时间戳），10 秒的多少，在服务器端，使用`setTimeout`剩余时间，所以它会因用户而异，在他们的 ping 时间（或网站的业务）

```
function heartbeat(){
  $.ajax({
    'url': '/where/',
    'success': function(data){
       setTimeout(heartbeat, parseInt(data) * 1000);
    }
  });
}
heartbeat(); // initialize it 
```

在服务器端，（就像在 PHP 中一样），你会做

```
<?php
// do your stuff
echo (time() - (int)$time_requested) + 10; // it will vary per user, so if it takes 2 second, it will be 12, if it returns imediately, returns 10 
```*

# php - php 的 mysql_pconnect 何时认为连接“可用”？

> ID：13749158
> 
> 赞同：1
> 
> 时间：2012-12-06T17:29:23.960
> 
> 标签：php, mysql, mysql-pconnect

我正在使用 php-fpm（一个 fastcgi php 管理器），并且对 php 何时认为使用 mysql_pconnect 创建的持久连接可用而不是创建新连接感到困惑。

每当我尝试启用 mysql_pconnect 与 mysql_connect 时，我与 mysql 服务器的打开连接都会攀升，直到达到允许的最大值。如果没有 mysql_pconnect，我一次可以打开 30-50 个 mysql 连接。我的 mysql wait_timeout 设置为 5。

感觉就像当我开始使用 mysql_pconnect 时，它只是不断地创建新的连接，而没有识别出任何可用的旧连接。php-fpm（或 fastcgi）会导致这种情况吗？

是否有关于 mysql_pconnect 如何将连接视为“可用”的任何详细信息？

谢谢。

# iphone - “壁球”动画效果

> ID：13749159
> 
> 赞同：1
> 
> 时间：2012-12-06T17:29:27.420
> 
> 标签：iphone, objective-c

我试图让我的图像看起来像是被踩踏或“压扁”。这是我必须到目前为止的代码，但不仅仅是挤压，它还将底部向上推（因为它是一个缩放动画）。有没有办法让图像简单地缩短而不是缩小？也许我需要使用两个图像？：

```
 [UIView animateWithDuration:0.25 delay:0 options:UIViewAnimationOptionCurveEaseInOut
                             animations:^{
                                 basketView.transform = CGAffineTransformScale(CGAffineTransformIdentity, 1, 0.9);}
                             completion:^(BOOL finished){if (finished){

                [UIView animateWithDuration:0.25 delay:0 options:UIViewAnimationOptionCurveEaseInOut
                                 animations:^{
                                     basketView.transform = CGAffineTransformScale(CGAffineTransformIdentity, 1.0, 1.0);}
                                 completion:NULL];}}]; 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-06T17:54:23.713

缩放将相对于视图的图层发生`anchorPoint`，默认情况下这是图层的中心。

因此选项是： - 更改锚点；- 将变换分为三个部分：（1）将锚点平移到底部；（2）规模；(3) 将锚点翻译回原来的位置；- 将变换分为两部分：（1）比例；(2) 将底部平移到原来的位置。

如果其他一切都相同，则更改锚点与翻译具有相同的效果，因此摘要版本是以某种形式添加翻译，无论您如何描述整个过程。最简单的事情可能是`center`在设置变换的同时设置图层。由于缩放和平移都是同时应用的线性变换，它们将完全同步。

所以例如你会改变：

```
basketView.transform = CGAffineTransformScale(CGAffineTransformIdentity, 1, 0.9); 
```

更像是：

```
CGFloat amountToScale = 0.9f;

CGAffineTransform transform =
            CGAffineTransformMakeTranslation(0.0f, 
                      (1.0f - amountToScale)*0.5f*basketView.bounds.size.height);

basketView.transform = CGAffineTransformScale(transform, 
                                    1.0f, amountToScale); 
```

在那种特定情况下，缩放到 0.9 将总共消除原始大小的 0.1。锚点位于中心，因此其中 0.05 来自顶部，其中 0.05 来自底部。您不希望任何东西从底部脱落，因此您将视图向下移动以抵消这种情况。

# iphone - 如何在单个 tableviewcontroller 中拥有主题和子主题？

> ID：13749161
> 
> 赞同：0
> 
> 时间：2012-12-06T17:29:33.970
> 
> 标签：iphone, ios, uitableview, ios5

我只是想使用 tableview 创建如下所示，但我不知道如何使它工作

```
 Sports (If it get touched it expands the subtopics) 
    Cricket (When it get Touched it push to next view controller)
    Football
    VolleyBall
 Bike (If it get touched it expands the subtopics)
    HeroHonda (When it get Touched it push to next view controller)
    Kawasaki
    Yamaha 
```

主题和子主题的数量是已知的。

有可能像我期待的那样做吗？如果表格视图无法实现，那么另一种方法是什么？

任何帮助深表感谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-06T18:33:44.253

按照[这个完美的解决方案](https://stackoverflow.com/a/1941766/869455)您需要重新加载部分以展开和折叠子主题。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-06T19:12:41.797

If you really need an expansion effect, I reccomend that you use some open-source solution such as [VPPDropDown](https://github.com/vicpenap/VPPDropDown) , or even [MPFoldTransition](https://github.com/mpospese/MPFoldTransition.git).

The simpler solution would be to just use UITableViewSections for categories and cells for items, e.g.

```
Section 0 : Sports
  - Row 0 : Cricket
  - Row 1 : Football

Section 1 : Bike
  - Row 0 : Yamaha
  - Row 1 : Kawasaki 
```

# iphone - Cocos2D CCSprite 对象移动太多

> ID：13749164
> 
> 赞同：0
> 
> 时间：2012-12-06T17:29:45.017
> 
> 标签：iphone, objective-c, ios, cocos2d-iphone

我将 CCSprite 子类化为一个僵尸对象。它只是加载一个僵尸图像并让用户移动它：

```
@implementation Zombie

@synthesize speed; // CGFloat

- (id) initWithPosition: (CGPoint) position
{
    if(self= [super initWithFile: @"zombie_icon.png"])
    {
        CCTouchDispatcher* dispatcher=[CCTouchDispatcher sharedDispatcher];
        self.position=position;
        self.scale= 0.25;
        speed= 50.0;
        [dispatcher addTargetedDelegate: self priority: 0 swallowsTouches: YES];
    }
    return self;
}

#pragma - mark Movements

- (NSTimeInterval) timeFromDestination: (CGPoint) destination
{
    CGFloat distance= sqrt( pow (fabs(self.position.x-destination.x),2) + pow (fabs(self.position.y-destination.y),2));
    return distance/speed;
}

- (BOOL) ccTouchBegan:(UITouch *)touch withEvent:(UIEvent *)event
{
    return YES;
}

- (void) ccTouchEnded:(UITouch *)touch withEvent:(UIEvent *)event
{
    CGPoint location=[self convertTouchToNodeSpace: touch];
    NSTimeInterval duration= [self timeFromDestination: location];
    [self runAction: [CCMoveTo actionWithDuration: duration position: location]];
}

@end 
```

所以在我的层我这样做：

```
Zombie* zombie=[[Zombie alloc]initWithPosition: CGPointMake(200, 250)];
[self addChild: zombie];
[zombie release]; 
```

僵尸有时移动正确，有时不正确。
例如僵尸在 (100,100)，我点击 (200,200)，它朝那个方向移动，但是当它到达 (200,200) 时，它会继续前进，直到它离开屏幕。
如果您说问题的描述不是很清楚，稍后我可以上传视频。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-06T17:54:21.343

您可能弄错了目的地（记录有帮助）。你的僵尸当前位置在父节点空间坐标中，你让它移动到僵尸节点空间符号中的目的地。

# php - 这甚至可以写吗

> ID：13749169
> 
> 赞同：-1
> 
> 时间：2012-12-06T17:30:03.510
> 
> 标签：php, javascript, ajax

我正处于我认为我应该放弃这个项目的地步。我每次尝试都遇到了死胡同。

基本概念是我有一个由我的主页读取的 INI 文件。我的主页有两个列表框，它们使用 php 从 INI 文件中获取选项信息。当在列表框一中选择一个选项时，我会调用一个 on change java 函数来更改列表框二。

我想我可以通过让 PHP 首先从 ini 创建所有列表框，并将它们设置为 display:none 来做到这一点。然后 Javascript 会根据列表框一中的选项选择将显示变为阻止。

我一直遇到的问题是 Javascript 无法直接从 INI 读取，并且 PHP 无法执行 onclick 事件，除非整个页面重新加载。

这甚至可能吗？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-12-06T17:31:50.393

是的，可以这样做；你只需要使用 AJAX 技术。您的 javascript 捕获事件，然后通过 XMLHttpRequest 向您的 PHP 发送请求。PHP 读取 INI 并回显信息，javascript 在其 responseText 中捕获该信息，然后相应地更新接口。

我强烈建议你研究 AJAX。这是好东西。

# c++ - 是否有可视化 Visual C++ 中的缓存的工具？

> ID：13749170
> 
> 赞同：1
> 
> 时间：2012-12-06T17:30:06.053
> 
> 标签：c++, visual-studio, memory-management

在进行优化或仅作为教育工具时，能够准确查看内存中的内容、可视化分配/解除分配等很有用。我知道 Valgrind 用于 Linux 世界。在 VS 中呢？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-06T17:45:45.220

你有很多选择

1.  [发光代码](http://www.glowcode.com/)
2.  [英特尔 VTune Amplify XE](http://software.intel.com/en-us/intel-vtune-amplifier-xe)
3.  Visual Studio 2012 团队版附带分析工具

以上都不是免费的

还有AMD：

1.  [AMD CodeAnalyst](http://developer.amd.com/tools/hc/CodeAnalyst/archive/Pages/default.aspx)这是免费的，但没有英特尔产品的所有花里胡哨

这也是一个[相关的帖子](https://stackoverflow.com/questions/67554/whats-the-best-free-c-profiler-for-windows-if-there-are)

# uri - URL 中带有编码 & 符号的间歇性行为

> ID：13749173
> 
> 赞同：0
> 
> 时间：2012-12-06T17:30:18.850
> 
> 标签：uri, encode

我正在测试如何使用数据抓取脚本从 Best Buy 的页面中抓取页面，并生成了如下链接：

```
http://www.bestbuy.com/site/searchpage.jsp?_dyncharset=ISO-8859-1&amp;_dynSessConf=1803033044744184095&amp;id=pcat17071&amp;type=page&amp;st=DOTD_2012126b&amp;sc=Global&amp;cp=1&amp;nrp=15&amp;sp=&amp;qp=&amp;list=n&amp;iht=y&amp;usc=All+Categories&amp;ks=960&amp;p=[promotion%2C+synonymns]&amp;pu=defaultusr&amp;pt=1354255201 
```

上面的链接失效了，我得到了一个`sorry, page not accessible error`。

但是，在手动用“&”替换那些与号 (&) 之后，它就起作用了。

另一个链接，也包括编码`&`的，有效。

```
http://www.bestbuy.com/site/PNY+-+32GB+Secure+Digital+High+Capacity+(SDHC)+Class+10+Memory+Card/2300602.p?id=1218318851702&amp;skuId=2300602&amp;st=2300602&amp;cp=1&amp;lp=1 
```

为什么它在第二种情况下有效？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-06T17:43:23.493

如果第二个有效，那是偶然的；这些链接发生的任何事情完全取决于网站。

链接应该`&amp;`在 html 页面文本中进行编码，但这只是为了允许`&`它们实际出现在页面上。实际的 URL 应该只有文字`&`。

由于这个编码问题，一个 html 标准的附录建议 urls 应该`;`用于分隔参数而不是. `&`这个建议几乎被普遍忽略（除了 CGI.pm，它惹恼了所有不得不忍受它的人）

# jquery - 点击后JQuery切换下一个div

> ID：13749178
> 
> 赞同：0
> 
> 时间：2012-12-06T17:30:25.183
> 
> 标签：jquery

我无法确定下一个 div 的目标是用 JQuery 显示/隐藏它。

JavaScript：

```
 $("a.more").live("click", function(event){
        event.preventDefault();
        $(this).next('.show-more').toggle();
    }); 
```

DOM：

```
 <p>
                {{beschreibung}}
                (<a class="more" href="{{id}}"><i class="icon-plus"></i>)
            </p>

            <div class="show-more" style="display:none;">
                <p>
                   {{beschreibung_lang}}
               </p>
            </div> 
```

任何想法问题出在哪里？

**屏幕和键盘之间的故障：错过了关闭标签（-;**

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-12-06T17:37:56.813

在事件处理程序中绑定的元素是锚点，并且锚点没有兄弟元素，即 next() 将不起作用。您需要首先遍历 DOM 到最近的段落，然后找到下一个 div 等。

`live()`已弃用，应替换`on()`为动态元素的委托版本，如下所示：

```
$(document).on("click", ".more", function(event){
    event.preventDefault();
    $(this).closest('p').next('.show-more').toggle();
}); 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-12-06T17:31:42.877

click 事件在 上触发`a`，当你使用`next`它时会搜索`a`sibbling 哪个类的`show-more`. 要修复它，请使用`parent`before `next`，因此您将搜索`show-more`which's after `p`。

`$(this).parent().next('.show-more').toggle();`

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-12-06T17:31:51.360

试试下面

```
 $("a.more").bind("click", function(event){
    event.preventDefault();
    $(this).parent().next('.show-more').toggle();
}); 
```

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-12-06T17:33:05.573

锚标签和 div 不是兄弟，所以你必须使用 parent() -

```
 $("a.more").live("click", function(event){
        event.preventDefault();
        $(this).parent().next('.show-more').toggle();
    }); 
```

# java - 使用spring将文件中的属性加载到静态变量中？

> ID：13749179
> 
> 赞同：1
> 
> 时间：2012-12-06T17:30:26.510
> 
> 标签：java, spring, properties, junit4

问题：我想将一个值（从属性文件）加载到 JUnit 测试的静态变量中，以便在类规则中使用它。

我不能在 spring 上下文中使用 PropertyPlaceholderConfigurator，因为它不会连接静态变量。使用时

```
@Value("${port}")
private static int port; 
```

春天抱怨

`2012-12-06 11:39:39 o.s.b.f.a.AutowiredAnnotationBeanPostProcessor [WARN] Autowired annotation is not supported on static fields: private static int OrderJobIT.port`

我可以使用 java.util.Properties 加载属性文件并从中提取值，但这不是一个干净的解决方案。有没有更好的方法使用弹簧来做到这一点？本质上，我想在 JUnit 类规则中使用属性值。

# java - 使用 Java 但不使用 Actionscript 或 Flex 技术在 Red5 服务器中创建共享对象

> ID：13749182
> 
> 赞同：0
> 
> 时间：2012-12-06T17:30:29.520
> 
> 标签：java, red5, shared-objects

我正在寻找一种仅使用 Java 技术在 Red5 服务器（安装在服务器机器上）中创建远程共享对象的方法。共享对象可以是任何东西（越简单越好），因为我的目的只是进行可行性研究。问题是我是 Java 新手，我很难过。。实际上，在 Internet 上有很多教程在 Red5 上构建应用程序，但是使用 Actionscript 等。谁能给我一些建议来实现一个迷你在 Eclipse 项目中创建和修改共享对象？非常感谢你，对不起我的英语:)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-07T03:17:31.320

我最近构建了一个 RTMPClient 来进行一些负载测试： [https ://svn.apache.org/repos/asf/incubator/openmeetings/trunk/singlewebapp/src/org/apache/openmeetings/test/rtmp/LoadTestRtmpClient.java](https://svn.apache.org/repos/asf/incubator/openmeetings/trunk/singlewebapp/src/org/apache/openmeetings/test/rtmp/LoadTestRtmpClient.java)

它只会建立 RTMP 连接并进行一些远程调用。为了创建共享对象，您可能需要扩展 RTMPClient 库。

塞巴斯蒂安

# mule - 首次运行后，聚合器之后的 Mule smtp 端点失败

> ID：13749186
> 
> 赞同：0
> 
> 时间：2012-12-06T17:30:43.267
> 
> 标签：mule

我正在设置一个流程以将数据从一个表中提取到另一个表中，标记已处理的行，然后通过电子邮件发送结果。我使用了聚合器（请参阅： [如何让 Mule 从 JDBC 查询中将多行作为单个事务返回？](https://stackoverflow.com/questions/13711950/how-do-i-get-a-mule-to-return-multiple-rows-from-a-jdbc-query-as-a-single-transa)）将所有行合并到一封电子邮件中，但是在添加聚合器后，SMTP 端点无法在一秒钟内运行迭代...

1.  启动骡流。
2.  插入导致流运行的行。
3.  SQL 脚本和 SMTP 端点运行。
4.  插入更多行，流程再次运行。
5.  只有 SQL 脚本运行... SMTP 端点根本不运行。

    ```
    <flow name="Invoice_Workflow2Flow1" doc:name="Ross_invoice_Workflow2Flow1" processingStrategy="asynchronous">
        <jdbc:inbound-endpoint queryKey="GetUnprocessedInvoices" queryTimeout="10000" pollingFrequency="10000" connector-ref="Database" doc:name="Get invoice run">
            <jdbc:query key="GetUnprocessedInvoices" value="SELECT        INVOICE_NUMBER, ROWID FROM            FIN.LHF_INVOICE_WORKFLOW WHERE        (STATUS_FLAG = 'N')"/>
        </jdbc:inbound-endpoint>
        <jdbc:outbound-endpoint exchange-pattern="one-way" queryKey="insert_invoice_run" queryTimeout="10000" connector-ref="SPTSQL01_APPS_custom_app_data" doc:name="Load to custom_app_data">
            <jdbc:query key="insert_invoice_run" value="INSERT INTO lhf_ros_invoice_workflow ([INVOICE_NUMBER]  VALUES #[map-payload:INVOICE_NUMBER])"/>
        </jdbc:outbound-endpoint>
        <jdbc:outbound-endpoint exchange-pattern="one-way" queryKey="MarkAsProcessed" queryTimeout="10000" connector-ref="DatabaseMuleLogin" doc:name="Mark Processed in Ross">
            <jdbc:query key="MarkAsProcessed" value="UPDATE       FIN.LHF_INVOICE_WORKFLOW SET                STATUS_FLAG = 'P' WHERE        (ROWID = #[map-payload:ROWID])"/>
        </jdbc:outbound-endpoint>
        <message-properties-transformer doc:name="Message Properties">
            <add-message-property key="MULE_CORRELATION_GROUP_SIZE" value="1000"/>
            <add-message-property key="MULE_CORRELATION_ID" value="1"/>
        </message-properties-transformer>
        <collection-aggregator timeout="1000" failOnTimeout="false" doc:name="Collection Aggregator"/>
        <smtp:outbound-endpoint host="mail.example.com" to="test@example.com" from="muleservice@example.com" subject="[Invoice Workflow] Exceptions" responseTimeout="10000" doc:name="SMTP"/>
    </flow> 
    ```

这是有用时会发生什么的日志...

（第一次运行正常，SMTP 端点运行）

INFO 2012-12-06 09:08:52,143 [[ross_invoice_workflow].DatabaseMuleLogin.dispatcher.02] org.mule.transport.jdbc.sqlstrategy.SimpleUpdateSqlStatementStrategy：执行 SQL 语句：1 行更新了 INFO 2012-12-06 09:08:52,159 [[ross_invoice_workflow].DatabaseMuleLogin.dispatcher.03] org.mule.transport.jdbc.sqlstrategy.SimpleUpdateSqlStatementStrategy：执行 SQL 语句：1 行更新了 INFO 2012-12-06 09:08:52,180 [ [ross_invoice_workflow].DatabaseMuleLogin.dispatcher.01] org.mule.transport.jdbc.sqlstrategy.SimpleUpdateSqlStatementStrategy：执行 SQL 语句：1 行更新了 INFO 2012-12-06 09:08:52,223 [[ross_invoice_workflow].SPTSQL01_APPS_custom_app_data。 dispatcher.01] org.mule.transport.jdbc.sqlstrategy.SimpleUpdateSqlStatementStrategy：执行 SQL 语句：1 行更新了 INFO 2012-12-06 09:08:52，223 [[ross_invoice_workflow].SPTSQL01_APPS_custom_app_data.dispatcher.03] org.mule.transport.jdbc.sqlstrategy.SimpleUpdateSqlStatementStrategy：执行 SQL 语句：1 行更新了 INFO 2012-12-06 09:08:52,223 [[ross_invoice_workflow]。 SPTSQL01_APPS_custom_app_data.dispatcher.02] org.mule.transport.jdbc.sqlstrategy.SimpleUpdateSqlStatementStrategy：执行 SQL 语句：更新了 1 行 **INFO 2012-12-06 09:08:53,131 [[ross_invoice_workflow].connector.smtp.mule.default.dispatcher.01] org.mule.transport.service.DefaultTransportServiceDescriptor：加载默认出站变压器：org.mule.transport.email .transformers.ObjectToMimeMessage 信息 2012-12-06 09:08:53,138 [[ross_invoice_workflow].connector.smtp.mule.default.dispatcher.01] org.mule.lifecycle.AbstractLifecycleManager：初始化：'connector.smtp.mule.default .dispatcher.1935379626'。对象是：SmtpMessageDispatcher INFO 2012-12-06 09:08:53,174 [[ross_invoice_workflow].connector.smtp.mule.default.dispatcher.01] org.mule.lifecycle.AbstractLifecycleManager：开始：'connector.smtp.mule.default .dispatcher.1935379626'。对象是：SmtpMessageDispatcher**

（插入更多行，SQL 端点运行但 SMTP 没有...）

INFO 2012-12-06 09:09:22,111 [[ross_invoice_workflow].DatabaseMuleLogin.dispatcher.03] org.mule.transport.jdbc.sqlstrategy.SimpleUpdateSqlStatementStrategy：执行 SQL 语句：1 行更新了 INFO 2012-12-06 09:09:22,129 [[ross_invoice_workflow].DatabaseMuleLogin.dispatcher.02] org.mule.transport.jdbc.sqlstrategy.SimpleUpdateSqlStatementStrategy：执行 SQL 语句：1 行更新信息 2012-12-06 09:09:22,146 [ [ross_invoice_workflow].DatabaseMuleLogin.dispatcher.01] org.mule.transport.jdbc.sqlstrategy.SimpleUpdateSqlStatementStrategy：执行 SQL 语句：1 行更新了 INFO 2012-12-06 09:09:22,168 [[ross_invoice_workflow].SPTSQL01_APPS_custom_app_data。 dispatcher.03] org.mule.transport.jdbc.sqlstrategy.SimpleUpdateSqlStatementStrategy：执行 SQL 语句：1 行更新了 INFO 2012-12-06 09:09:22，168 [[ross_invoice_workflow].SPTSQL01_APPS_custom_app_data.dispatcher.01] org.mule.transport.jdbc.sqlstrategy.SimpleUpdateSqlStatementStrategy：执行 SQL 语句：1 行更新了 INFO 2012-12-06 09:09:22,168 [[ross_invoice_workflow]。 SPTSQL01_APPS_custom_app_data.dispatcher.02] org.mule.transport.jdbc.sqlstrategy.SimpleUpdateSqlStatementStrategy：执行 SQL 语句：更新了 1 行

（插入更多行，同样的事情）

INFO 2012-12-06 09:09:22,111 [[ross_invoice_workflow].DatabaseMuleLogin.dispatcher.03] org.mule.transport.jdbc.sqlstrategy.SimpleUpdateSqlStatementStrategy：执行 SQL 语句：1 行更新了 INFO 2012-12-06 09:09:22,129 [[ross_invoice_workflow].DatabaseMuleLogin.dispatcher.02] org.mule.transport.jdbc.sqlstrategy.SimpleUpdateSqlStatementStrategy：执行 SQL 语句：1 行更新信息 2012-12-06 09:09:22,146 [ [ross_invoice_workflow].DatabaseMuleLogin.dispatcher.01] org.mule.transport.jdbc.sqlstrategy.SimpleUpdateSqlStatementStrategy：执行 SQL 语句：1 行更新了 INFO 2012-12-06 09:09:22,168 [[ross_invoice_workflow].SPTSQL01_APPS_custom_app_data。 dispatcher.03] org.mule.transport.jdbc.sqlstrategy.SimpleUpdateSqlStatementStrategy：执行 SQL 语句：1 行更新了 INFO 2012-12-06 09:09:22，168 [[ross_invoice_workflow].SPTSQL01_APPS_custom_app_data.dispatcher.01] org.mule.transport.jdbc.sqlstrategy.SimpleUpdateSqlStatementStrategy：执行 SQL 语句：1 行更新了 INFO 2012-12-06 09:09:22,168 [[ross_invoice_workflow]。 SPTSQL01_APPS_custom_app_data.dispatcher.02] org.mule.transport.jdbc.sqlstrategy.SimpleUpdateSqlStatementStrategy：执行 SQL 语句：更新了 1 行

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-07T19:29:04.700

问题来自于`MULE_CORRELATION_ID`设置为`1`. 由于该关联ID的群组已被处理，因此该群组下发后无法继续使用该ID。在我的条带化测试中，当我在第一组发布后尝试提供更多具有相同相关 ID 的事件时，我实际上收到了错误。

我建议您在选择查询中添加一列，该列为所有选定的行返回相同的值，但每次 Mule 运行查询时都会更改。例如，查询可以接收 Mule 生成的 UUID，其表达式为 like`#[java.util.UUID.randomUUID().toString()]`并返回列中的值。然后您可以将此值用作相关 ID，因为它对于所选记录组是相同的。

假设添加的列称为“CID”，那么配置将是：

```
<set-property propertyName="MULE_CORRELATION_GROUP_SIZE" value="3" />
<set-property propertyName="MULE_CORRELATION_ID" value="#[message.payload.CID]" /> 
```

（*请注意，这`set-property`是一个比 更具表现力的配置元素`message-properties-transformer`*）

# metrics - 项目列表及其代码行数据

> ID：13749193
> 
> 赞同：2
> 
> 时间：2012-12-06T17:31:02.767
> 
> 标签：metrics

Web 中的任何地方是否存在某个站点，您可以在其中找到带有提到的源代码行指示器的不同软件项目和应用程序的列表？
或者可能存在一些具有此类数据的学术论文？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-06T17:36:14.547

检查有关软件方法的各种论文，并遵循脚注。任何甚至对形式主义表示赞同的方法论都将基于对真实的、非平凡的项目的一些研究。这些项目应该在脚注中，并且其中至少有一些会在网络上。事实上，有些项目可能只是在附录中包含实际研究。

尝试 CiteSeer 作为初学者。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-06T17:38:32.510

对于开源项目[http://ohloh.net](http://ohloh.net)包含很多这样的数据。

# objective-c - iOS：如何使用情节提要交换视图以进行自动旋转？

> ID：13749194
> 
> 赞同：0
> 
> 时间：2012-12-06T17:31:07.570
> 
> 标签：objective-c, ios, ios6, orientation, autorotate

**免责声明**：我对 iOS 比较陌生。

我正在尝试通过单独的纵向和横向视图在我的应用程序中设置自动旋转，但我不确定从哪里开始。*在开始 iOS 5 开发：探索 iOS SDK*中，我读到这可以通过在 XIB 中复制视图来实现，但我使用的是故事板文件，而不是直接使用 XIB 文件。

如何在 iOS6 中使用情节提要交换视图以实现自动旋转？

# ios - RestKit 0.20pre2 请求后没有响应

> ID：13749196
> 
> 赞同：0
> 
> 时间：2012-12-06T17:31:11.650
> 
> 标签：ios, restkit

开始我的 RestKit 开发，尝试提出第一个请求。从 Github 获取此示例代码，针对我的课程进行了修改，但在设备上运行后，我没有看到任何活动迹象。即没有回调，没有崩溃，没有异常，没有日志输出。我拿错了吗？这是代码：

```
 RKObjectMapping *mapping = [RKObjectMapping mappingForClass:[FavoritePlace class]];

    [mapping addAttributeMappingsFromDictionary:@{@"name": @"name", @"placeId": @"id"}];

    NSIndexSet *statusCodes = RKStatusCodeIndexSetForClass(RKStatusCodeClassSuccessful); // Anything in 2xx

    RKResponseDescriptor *responseDescriptor = [RKResponseDescriptor responseDescriptorWithMapping:mapping pathPattern:@"/favoritePlace/:placeID" keyPath:@"id" statusCodes:statusCodes];

    NSURLRequest *request = [NSURLRequest requestWithURL:[NSURL URLWithString:@"https://my.internal.url/v20"]];

    RKObjectRequestOperation *operation = [[RKObjectRequestOperation alloc] initWithRequest:request responseDescriptors:@[responseDescriptor]];

    [operation setCompletionBlockWithSuccess:^(RKObjectRequestOperation *operation, RKMappingResult *result) {
        FavoritePlace *place = [result firstObject];
        NSLog(@"Mapped the place: %@", place);
    } failure:^(RKObjectRequestOperation *operation, NSError *error) {
        NSLog(@"Failed with error: %@", [error localizedDescription]);
    }]; 
```

如您所见，我正在使用 https - 是否支持？

作为奖励，任何人都可以提供 0.20 API 的最简单的代码示例，只是为了看看这个东西是否有效？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-06T20:54:27.717

在我看来，最好的开始方法是检查 RKTwitterCoreData 应用程序示例，它总是在进行新提交时更新。您可以在此处查看示例项目：[https ://github.com/RestKit/RestKit/tree/master/Examples/RKTwitterCoreData](https://github.com/RestKit/RestKit/tree/master/Examples/RKTwitterCoreData)

从您粘贴的内容来看，您的代码看起来不错。您是否在应用程序委托中初始化了 RestKit？见这里：[https ://github.com/RestKit/RestKit/blob/master/Examples/RKTwitterCoreData/Classes/RKTwitterAppDelegate.m](https://github.com/RestKit/RestKit/blob/master/Examples/RKTwitterCoreData/Classes/RKTwitterAppDelegate.m)

如果您使用 Core Data，则必须设置托管对象存储、持久存储等。

API 浏览器中还有很多文档，例如 RKObjectManager 此处：[http ://restkit.org/api/0.20.0-pre2/Classes/RKObjectManager.html](http://restkit.org/api/0.20.0-pre2/Classes/RKObjectManager.html)

# javascript - 在 WordPress 帖子中使用 JavaScript，最佳实践是什么？

> ID：13749200
> 
> 赞同：1
> 
> 时间：2012-12-06T17:31:20.320
> 
> 标签：javascript, wordpress

除了创建无限数量的模板之外，在 WordPress 帖子中使用 JavaScript 的最终最佳实践是什么？

将它放在 HTML 选项卡中会给我带来很多问题，因为WordPress 坚持插入的`p`and标签。`br`还有其他人遇到这个问题吗？

先感谢您！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-06T18:04:48.880

**去掉空格并在你的 JS 中返回，它会起作用。**这不会给 WP 编辑器任何添加中断和返回的东西。

**或者**，把它扔到functions.php中：

```
// <!-- noformat on --> and <!-- noformat off --> functions

function newautop($text)
{
    $newtext = "";
    $pos = 0;

    $tags = array('<!-- noformat on -->', '<!-- noformat off -->');
    $status = 0;

    while (!(($newpos = strpos($text, $tags[$status], $pos)) === FALSE))
    {
        $sub = substr($text, $pos, $newpos-$pos);

        if ($status)
            $newtext .= $sub;
        else
            $newtext .= convert_chars(wptexturize(wpautop($sub)));      //Apply both functions (faster)

        $pos = $newpos+strlen($tags[$status]);

        $status = $status?0:1;
    }

    $sub = substr($text, $pos, strlen($text)-$pos);

    if ($status)
        $newtext .= $sub;
    else
        $newtext .= convert_chars(wptexturize(wpautop($sub)));      //Apply both functions (faster)

    //To remove the tags
    $newtext = str_replace($tags[0], "", $newtext);
    $newtext = str_replace($tags[1], "", $newtext);

    return $newtext;
}

function newtexturize($text)
{
    return $text;   
}

function new_convert_chars($text)
{
    return $text;   
}

remove_filter('the_content', 'wpautop');
add_filter('the_content', 'newautop');

remove_filter('the_content', 'wptexturize');
add_filter('the_content', 'newtexturize');

remove_filter('the_content', 'convert_chars');
add_filter('the_content', 'new_convert_chars'); 
```

然后像这样在编辑器中将你的 JS 括起来：

```
<!-- noformat on -->

<script type="text/javascript">

blah blah blah

</script>

<!-- noformat off --> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-06T18:05:05.437

有一些技巧可以让你做到这一点，但最简单的方法是使用一个插件，它允许你将 javascript 添加到单个帖子中。谷歌拉起了[这个](http://wordpress.org/extend/plugins/allow-javascript-in-posts-and-pages/)，但我敢肯定还有更多。

或者，您可以编写一个“shell”javascript 文件，`<script>`根据页面的 URL 将标签注入到您的标头中。假设您要添加一个名为的脚本文件到一个名为.URL`testFile`的页面。将以下代码放入名为的 shell 文件中：`testPage``www.mydomain.com/testPage``shell.js`

```
 if (location.href === "http://www.mydomain.com/testPage") {
        var testFile = document.createElement("script");
        testFile.setAttribute("src","testFile.js");
        document.getElementsByTagName("head")[0].appendChild(testFile);
    } 
```

您需要`shell.js`使用自定义 javascript 为每个页面添加单独的脚本注入代码段。

然后`<script src='shell.js'></script>`使用 WordPress 的内置编辑器添加到您的标题模板。

Wordpress 也有一些[官方建议](http://codex.wordpress.org/Using_Javascript)。

# python - 带有大型示例库应用程序的 python GUI 用于 Windows

> ID：13749204
> 
> 赞同：0
> 
> 时间：2012-12-06T17:31:38.803
> 
> 标签：python, user-interface

不久前，我在 windows 中尝试了一个用于 python 的 GUI。它有一个非常大的预安装库，其中包含各种示例（树、滑块、选项卡……），您可以在其中使用代码查看结果并在准备好时将其重置。

自从我玩它已经有一段时间了，现在我在一台新电脑上。知道它是哪个 GUI 吗？

我刚刚安装了wxpython，但我似乎没有找到示例库...

谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-06T17:34:01.137

可能是[wxPython](http://www.wxpython.org/index.php)，它有一个非常令人印象深刻的演示。

# javascript - 使用 Casperjs 清除本地存储

> ID：13749213
> 
> 赞同：2
> 
> 时间：2012-12-06T17:32:12.977
> 
> 标签：javascript, local-storage, phantomjs, casperjs

我正在使用 casperjs 对使用 localstorage 的主干应用程序进行一些测试。

我的问题是使用 casperjs 进行测试时无法清除本地存储。

我一直在尝试`localStorage.clear();`在我的 casper 文件的开头使用，但没有清除任何内容。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-05-22T09:08:06.443

我通过删除以下目录之一中的文件 *.localstorage 找到了解决此问题的方法：

Windows c:\Users\YOUR_USER\AppData\Local\Ofi Labs\PhantomJS\

Mac OS X：/Users/YOUR_USER/Library/Application Support/Ofi Labs/PhantomJS

Linux：/home/YOUR_USER/.local/share/data/Ofi Labs/PhantomJS

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-12-07T17:03:12.543

加载页面后运行这个怎么样？

```
casper.evaluate(function() {
  localStorage.clear();
}, {}); 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2017-01-05T11:52:13.593

PhantomJS 没有正确清除本地存储。localStorage.clear(); 不起作用（至少不可靠）

您必须删除文件系统上的“.localstorage”文件。在打开页面之前必须调用 fs.remove 命令。Phantomjs 在页面打开时锁定该文件。

我在我们的项目中是这样做的：

```
function clearStorage() {
var fs = require('fs');
var system = require('system');
var myDomain = [I get this value from the commandline Parameter I give to CasperJS];

if(system.os.name === 'windows') {
    var userName = system.env['USERPROFILE'].split('\\')[2];
    var localstoragePath = 'C:/Users/' + userName + '/AppData/Local/Ofi Labs/PhantomJS/';
    var localStorageFilename = myDomain.replace('://', '_').replace('/', '') + '_0.localstorage';
} else {
    var userName = system.env['USER'];
    var localstoragePath = '/home/' + userName + '/.local/share/Ofi Labs/PhantomJS/';
    var localStorageFilename = myDomain.replace('://', '_') + '_0.localstorage'; //Linux does not have the last "/" so no replace needed for that
}

if(fs.exists(localstoragePath + localStorageFilename)) {
    fs.remove(localstoragePath + localStorageFilename, function(err) {
        if (err) {
            casper.echo(err);
        }
        casper.echo("File deleted successfully!");
    });
} 
```

}

# jquery - 使用 jQuery 验证 3 个表单字段

> ID：13749214
> 
> 赞同：0
> 
> 时间：2012-12-06T17:32:16.330
> 
> 标签：jquery, forms

我有一个表格要应用验证：

```
<form id="calculator">

            <div class="f-field">
                <label for="sale-price">Sale Price</label>
                <input id="sale-price" type="text" value=""/>
            </div>

            <div class="f-field">
                <label for="agent-commission">Highstreet agent commission</label>
                <input id="agent-commission" type="text" value=""/>
            </div>

            <div class="f-field">
                <label for="sale-time">Estimated sale time</label>
                <input id="sale-time" type="text" value=""/>
            </div>

            <div class="f-field">
                <input type="button" value="Calculate" id="calc-button"/>  
            </div>

        </form> 
```

到目前为止我的 jQuery：

```
 $(document).ready(function(){

        $('#calc-button').click(function(){

            var answer = 

            parseInt($('#sale-price').val()) / 
            parseInt($('#agent-commission').val()) + 
            parseInt($('#sale-time').val());

            var validate= false;
            $("#calculator input[type='text']").each(function(){
                if($(this).val() != '' || $(this).attr('checked'))
                    validate = true;
            });
            if(!validate){
                alert('Please select at least one filter');
                return false;
            }
            else { 
                $('#calc-val').html('£' + answer);
            }

        });
    }); 
```

有没有一种简单的方法可以在 3 个字段上设置验证，这些字段都只有数值。我想验证一个数字的存在，所以任何不是数字或根本没有任何东西的东西都会抛出一条消息。

我真的很想避免使用完整的 jQuery 插件，因为我确信有一种方法可以实现如此小的表单，但是我正在寻找这方面的建议。

*编辑*在我的 jQuery 中添加，尝试以下面提到的评论者的方式处理接受率。很抱歉没有早点做。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-06T17:40:48.463

这是一个有效的[**FIDDLE**](http://jsfiddle.net/videsignz/kU7Qt/)

这将在用户键入时删除任何不是数字的内容...

```
$("#sale-price, #agent-commission, #sale-time").on("keyup keypress keydown blur input change", function() {

    // Remove All Non Numbers
    $(this).val($(this).val().replace(/[^0-9]/gi, ""));

}); 
```

然后检查以确保 sumbit 上的值不为空

```
$('#calculator').on('submit', function(e) {
    e.preventDefault();

    if ( ($('#sale-price').val() && $('#agent-commission').val() && $('#sale-time').val() ) != '' ) {
        $(this).submit();
    }
    else {
        alert('Please Fill In All Fields');
    }
}); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-06T17:36:42.383

当然，只需将处理程序绑定到提交事件，并阻止表单提交，除非值与您想要的匹配。

像这样的东西：

```
$('#calculator').on('submit', function(e) {
    e.preventDefault();

    if ( isNumber( $('#sale-price').val() ) && isNumber( $('#agent-commission').val() ) && isNumber( $('#sale-time').val() ) ) {
        $(this).submit();
    }
    else {
        // errors in form
    }
});

// from http://stackoverflow.com/a/1830844/551093
function isNumber(n) {
  return !isNaN(parseFloat(n)) && isFinite(n);
} 
```

# javascript - 只允许输入数字

> ID：13749215
> 
> 赞同：0
> 
> 时间：2012-12-06T17:32:23.357
> 
> 标签：javascript

我有这个 JavaScript 代码只允许在文本框中输入数字

```
 function CheckNumeric(e) {

        if (window.event) // IE 
        {
            if ((e.keyCode < 48 || e.keyCode > 57) & e.keyCode != 8) {
                event.returnValue = false;
                return false;
            }
        }
        else { // Fire Fox
            if ((e.which < 48 || e.which > 57) & e.which != 8) {
                e.preventDefault();
                return false;
            }
        }
    } 
```

问题是它也阻止了“TAB”按钮！我喜欢允许。

我怎样才能做到这一点？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-06T17:43:27.627

我会将`CheckNumeric`函数更改为类似的内容并使用正则表达式来确定有效/无效输入。`/[0-9\t\b]+/`匹配数字、制表符和退格。如果您还想留出空间，请将其更改为`/[0-9\t\b\s]+/`

```
function CheckNumeric(e)
{
    var charCode = e.charCode || e.keyCode;
    var character = String.fromCharCode(charCode);
    if(!character.match(/[0-9\t\b]+/))
    {
        if(window.event)
            event.returnValue = false;
        else
            e.preventDefault();
        return false;
    }
    return true;
} 
```

此外，为了正确捕获键码，您应该绑定到`onKeyPress`事件，而不是`onKeyDown`因为它不会为数字键盘提供正确的键码。

```
<input type="text" onkeypress="CheckNumeric(event)"/> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-06T17:36:25.473

KeyCode 8 用于退格。不知道你是不是加错了：

```
function CheckNumeric(e) {

    if (window.event) // IE 
    {
        if ((e.keyCode < 48 || e.keyCode > 57) & e.keyCode != 8 & e.keyCode != 9) {
            event.returnValue = false;
            return false;
        }
    }
    else { // Fire Fox
        if ((e.which < 48 || e.which > 57) & e.which != 8  & e.which != 9) {
            e.preventDefault();
            return false;
        }
    }
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-06T17:41:10.047

我更喜欢在这里使用的方法（更简洁的代码，更简单的逻辑）是使用 html5 属性（`type="number"`或者`pattern="[0-9]*"`会很好用）。

请参阅[在 input type="number" 上禁用 webkit 的旋转按钮？](https://stackoverflow.com/questions/3975769/disable-webkits-spin-buttons-on-input-type-number)如果您决定使用`<input type="number">`并想要禁用微调器。

如果您确实需要支持具有此行为的旧版浏览器，请考虑使用支持 html5 表单属性的 shim。

# asp.net-mvc-3 - 仅实体框架属性描述符集合字段值

> ID：13749217
> 
> 赞同：0
> 
> 时间：2012-12-06T17:32:25.997
> 
> 标签：asp.net-mvc-3, entity-framework, edmx, typedescriptor, propertydescriptor

..嗨，我正在尝试连接来自任何实体的一些列值，如下所示：

```
var valor = "";

        PropertyDescriptorCollection objProperties = TypeDescriptor.GetProperties(obj);

        foreach (PropertyDescriptor objProperty in objProperties)
        {

            if (objProperty.Name != "AuditoriaUC" && objProperty.Name != "AuditoriaFC"
                && objProperty.Name != "AuditoriaIPC" && objProperty.Name != "AuditoriaUM"
                && objProperty.Name != "AuditoriaFM" && objProperty.Name != "AuditoriaIPM"
                && objProperty.Name != "AuditoriaEliminado")
            {
                valor = valor + " " + objProperty.Name + ": " + Convert.ToString(objProperty.GetValue(obj));
            }
        }

        return valor; 
```

但是，它也向我显示了列引用。换句话说，它也会在最后打印：

```
"ArchivosAdjuntos:System.Data.Objects.DataClasses.EntityCollection`1[XXX.MyProject.Model.Entities.ArchivosAdjuntos] 
 CorrelativoActualPorPeriodo: XXX.MyProject.Model.Entities.CorrelativoActualPorPeriodo
 CorrelativoActualPorPeriodoReference: System.Data.Objects.DataClasses.EntityReference`1[XXX.MyProject.Model.Entities.CorrelativoActualPorPeriodo] 
 EntityState: Modified 
 EntityKey: System.Data.EntityKey" 
```

我只想返回列值，我可以通过将最后一列值与硬编码字符串进行比较来打破 foreach 来实现。但我真的很想知道是否有更好的方法。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-06T19:29:58.003

First you could use the GetProperties method of the Type class, which allows some filtering like returning only public properties:

```
PropertyInfo[] props = obj.GetType().GetProperties(BindingFlags.Public 
                                                   | BindingFlags.Instance); 
```

Then you could use LINQ for filtering the reference type properties.For example you could remove all reference type properties (except strings) and iterate over them:

```
var valueProps = props.Where(p => !p.PropertyType.IsClass 
                                || p.PropertyType == typeof(string))
valueProps.ToList().ForEach(p => 
                           valor += p.Name + ": " 
                                 + (p.GetValue(obj) ?? "null")); 
```

Finally, for those properties that you are excluding using a hardcoded list, you could add that hardcoded list of property names into the filtering expression above. However you could also consider adding an attribute on the fields that you want to exclude and remove any property including that attribute from the properties list. This would be the attribute

```
[AttributeUsage(AttributeTargets.Property)]
public class ExcludeThisPropertyAttribute: Attribute
{
} 
```

You could set it on you classes like

```
public class YourClass
{
    public string PropertyThatIsIncluded { get; set; }
    public int ThisIsIncludedToo { get; set; }
    //more value type properties to be included ...

    [ExcludeThisProperty]
    public string AuditoriaUC { get; set; }
    [ExcludeThisProperty]
    public string AuditoriaFC { get; set; }
    //more value type properties explicitly excluded ...

    //reference type properties like this one will be automatically excluded
    public CorrelativoActualPorPeriodo CorrelativoActualPorPeriodo { get; set; }
} 
```

Then the expression to extract the value type attributes would be updated to exclude those that contain the attribute:

```
var valueProps = props.Where(p => 
               p.GetCustomAttributes(typeof(ExcludeThisPropertyAttribute), true) == 0
               &&(!p.PropertyType.IsClass 
                    || p.PropertyType == typeof(string))) 
```

In your case it seems you are using entity framework, so if your classes have been generated by EF, in order to be able to set attributes on properties you would need to follow an approach like using an [auxiliary metadata class](http://ardalis.com/adding-attributes-to-generated-classes)

# python - 将 Python dicts 与包含的浮点值进行比较

> ID：13749218
> 
> 赞同：7
> 
> 时间：2012-12-06T17:32:28.037
> 
> 标签：python

我想比较一对字典并使用“模糊”浮点比较或更好的方法`numpy.allclose()`。但是，使用默认值`==`或`!=`在 Python 中用于 dicts 不会这样做。

我想知道是否有办法改变浮点比较操作（可能使用上下文管理器进行安全清理）。

我相信一个例子在这里会有所帮助。我有一个包含各种值的深度嵌套的字典。其中一些值是浮点值。我知道“比较”浮点值等有很多陷阱。

```
d1 = {'a': {'b': 1.123456}}
d2 = {'a': {'b': 1.1234578}} 
```

如果唯一的区别是一定范围内的浮点数，我想`!=`用来比较这两个字典并让它返回。`True`例如，如果**接近**，则不要计算不同的值（不确定我想要的精度）。

我想我可以自己递归地遍历字典并手动仅`numpy.allclose()`用于浮点值并回退到所有其他类型的正常相等测试等。但是，这有点棘手且容易出错。我确实认为这将是一个可以接受的解决方案，我很想看到一个这样的解决方案。希望有更优雅的东西。

我脑海中的优雅解决方案如下所示。但是，我不知道这样的事情是否可能：

```
with hacked_float_compare:
    result = d1 != d2 
```

因此，在这个上下文管理器中，我将替换浮点比较（仅用于标准`float()`值，用我自己的比较或`numpy.allclose()`.

同样，我不确定这是可能的，因为猴子补丁`float()`不能真正完成，因为它是用`C`. 我还想避免将 dicts 中的每个浮点值更改为我自己的具有`__eq__()`. 也许这是**最好**的方法？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-12-06T20:02:38.907

避免子类化内置类型。当你发现你的对象由于某种未知原因改变了类型时，你会后悔的。改用委托。例如：

```
import operator as op

class FuzzyDict(object):
    def __init__(self, iterable=(), float_eq=op.eq):
        self._float_eq = float_eq
        self._dict = dict(iterable)

    def __getitem__(self, key):
        return self._dict[key]

    def __setitem__(self, key, val):
        self._dict[key] = val

    def __iter__(self):
        return iter(self._dict)

    def __len__(self):
        return len(self._dict)

    def __contains__(self, key):
        return key in self._dict

    def __eq__(self, other):
        def compare(a, b):
            if isinstance(a, float) and isinstance(b, float):
                return self._float_eq(a, b)
            else:
                return a == b
        try:
            if len(self) != len(other):
                return False
            for key in self:
                if not compare(self[key], other[key]):
                    return False
            return True
        except Exception:
            return False

    def __getattr__(self, attr):
        # free features borrowed from dict
        attr_val = getattr(self._dict, attr)
        if callable(attr_val):
            def wrapper(*args, **kwargs):
                result = attr_val(*args, **kwargs)
                if isinstance(result, dict):
                    return FuzzyDict(result, self._float_eq)
                return result
            return wrapper
        return attr_val 
```

以及一个示例用法：

```
>>> def float_eq(a, b):
...     return abs(a - b) < 0.01
... 
>>> A = FuzzyDict(float_eq=float_eq)
>>> B = FuzzyDict(float_eq=float_eq)
>>> A['a'] = 2.345
>>> A['b'] = 'a string'
>>> B['a'] = 2.345
>>> B['b'] = 'a string'
>>> B['a'] = 2.3445
>>> A == B
True
>>> B['a'] = 234.55
>>> A == B
False
>>> B['a'] = 2.345
>>> B['b'] = 'a strin'
>>> A == B
False 
```

即使嵌套它们也可以工作：

```
>>> A['nested'] = FuzzyDict(float_eq=float_eq)
>>> A['nested']['a'] = 17.32
>>> B['nested'] = FuzzyDict(float_eq=float_eq)
>>> B['nested']['a'] = 17.321
>>> B['b'] = 'a string'   # changed before
>>> A == B
True
>>> B['nested']['a'] = 17.34
>>> A == B
False 
```

一个完整的替代品`dict`需要更多的代码，并且可能需要一些测试来看看它有多健壮，但即使是上述解决方案也提供了许多`dict`功能（例如`copy`，、、`setdefault`等`get`）`update`

* * *

关于为什么你不应该继承一个内置的。

这个解决方案看起来简单而正确，但通常并非如此。首先，即使您可以对内置类型进行子类化，但这并不意味着它们被编写为用作子类，因此您可能会发现要使某些东西起作用，您必须编写比您想象的更多的代码。

此外，您可能希望使用内置方法，但这些方法将返回内置类型的实例而不是您的类的实例，这意味着您必须重新实现该类型的每个方法。此外，您有时必须实现内置未实现的其他方法。

例如，子类化`list`你可能会这样认为，因为`list`只实现了`__iadd__`，`__add__`你可以安全地重新实现这两个方法，但你错了！您还必须实现`__radd__`，否则表达式如下：

```
[1,2,3] + MyList([1,2,3]) 
```

将返回正常`list`而不是`MyList`.

总而言之，子类化一个内置函数比你一开始想的要多得多，并且由于类型或行为的变化，它可能会引入一些你没有预料到的不可预知的错误。调试也变得更加困难，因为您不能简单地在日志中打印对象的实例，表示是正确的！您确实必须检查周围所有对象的类以捕获这些细微的错误。

在您的特定情况下，如果您打算仅在单个方法内转换字典，那么您可能会避免 subclassing 的大多数缺点`dict`，但是在这一点上，您为什么不简单地编写一个函数并将`dict`s 与它进行比较呢？这应该很好用，除非您想将`dict`s 传递给进行比较的库函数。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-12-07T21:13:16.527

仅供参考，我认为在我的情况下，子类化并不是最好的方法。我已经制定了一个我很可能会[在这里](https://gist.github.com/4236551)使用的解决方案。

这不是公认的答案，因为它是基于我从该线程中学到的协作方法。只是想要一个其他人可以从中受益的“解决方案”。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-06T18:05:24.937

要覆盖比较运算符，您需要定义使用不同运算符的派生类。所以你不能按照你建议的方式去做。您可以做的是派生一个“模糊浮点”类（如@Null）建议，或者派生和类从`dict`并指定它对浮点数使用模糊比较：

```
class fuzzydict(dict):
    def __eq__(self, other):
        """Manually compare each element of `self` with `other`.
           Float values are compared up to reasonable precision.""" 
```

您必须自己处理字典比较的逻辑，它可能不会像内置比较那样快，但您可以编写`dict1 == dict2`代码。只要确保使用`fuzzydict`而不是`dict`所有可能包含浮点数的（嵌套）字典。

但是，我应该补充一点，您冒着不确定性的风险：您的字典将比较相等但包含略有不同的数字，因此后续计算可能会给您提供*不*相等的结果，具体取决于您使用的字典。在我看来，更安全（和更理智）的方法是在将浮点数插入字典时对其进行舍入，以便它们比较严格相等。

# android - 相对布局位置

> ID：13749220
> 
> 赞同：0
> 
> 时间：2012-12-06T17:32:35.667
> 
> 标签：android, layout

我有 3 个布局，第一个我以编程方式添加内容，第二个我以编程方式添加内容并将其放在底部，第三个我放置片段。问题出在底部布局中，如果我将高度设置`40dp`为显示的片段。但是如果我将它设置`wrap_content`为不显示片段...

```
<RelativeLayout
    xmlns:android="http://schemas.android.com/apk/res/android"
    xmlns:tools="http://schemas.android.com/tools"
    android:layout_width="match_parent"
    android:layout_height="match_parent"
    tools:context=".MainActivity" >

    <RelativeLayout
        android:id="@+id/tabs"
        android:layout_width="match_parent"
        android:layout_height="wrap_content"
        android:layout_alignParentTop="true" />

    <RelativeLayout
        android:id="@+id/acts"
        android:layout_width="match_parent"
        //android:layout_height="wrap_content" <-id/frame not show
        android:layout_height="40dp" <-id/frame show
        android:layout_alignParentBottom="true" />

    <FrameLayout
        android:id="@+id/frame"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:layout_below="@id/tabs"
        android:layout_above="@id/acts" />

</RelativeLayout> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-06T17:58:18.117

现在我已经设置了背景颜色并设置了最小高度以显示正在发生的事情，通过删除“@+id/acts”布局的最小高度来尝试这个。然后你会看到框架现在不在天空中:)

**更新**

```
<?xml version="1.0" encoding="utf-8"?>
<RelativeLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:layout_width="match_parent"
    android:layout_height="match_parent"
    android:orientation="vertical" >

    <RelativeLayout
        android:id="@+id/tabs"
        android:layout_width="match_parent"
        android:layout_height="wrap_content"
        android:minHeight="50dp"
        android:background="#f00"
        android:layout_alignParentTop="true" />

    <FrameLayout
        android:id="@+id/frame"
        android:layout_width="match_parent"
        android:layout_height="wrap_content"
        android:minHeight="50dp"
        android:background="#0f0"
        android:layout_above="@+id/acts"
        android:layout_below="@+id/tabs" />

    <RelativeLayout
        android:id="@+id/acts"
        android:layout_width="match_parent"
        android:layout_height="wrap_content"
        android:minHeight="50dp"
        android:background="#00f"
        android:layout_alignParentBottom="true" />

</RelativeLayout> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-06T19:13:18.767

I have fix it, just add the acts layout to bottom of fragment and now its work fine. Tanks for your help.

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-06T17:47:30.557

像这样设置

```
android:layout_above="@+id/frame" 
```

希望它会有所帮助。

# c# - 公共实例变量访问错误：“非静态字段、方法或属性需要对象引用...”

> ID：13749224
> 
> 赞同：3
> 
> 时间：2012-12-06T17:32:57.790
> 
> 标签：c#, .net, oop, error-handling, encapsulation

已解决：开发环境问题。重新启动开发环境，一切正常。

第一次问，如果我做错了，请告诉我。

我试图在 C# 中使用特定于实例的变量来解决问题。以下测试代码似乎应该可以工作，但会引发错误：

> 非静态字段、方法或属性需要对象引用...

执行此操作的正确方法是什么，以便我拥有一个对类的每个实例都是唯一的公共 var，并且可以在函数中设置该 var（静态或其他）？

```
using System;
using System.Collections.Generic;
using System.Linq;
using System.Text;

namespace AlchemyWebSocketsTest2
{
    class KHandler
    {
        public string name = "wut";
        static void KHandlerInstantiate()
        {
            name = "huh";
            Console.WriteLine("All Good.");
        }

    }
} 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-12-06T17:35:42.220

你需要一个 KHandler 的实例。注意作为类`handler`实例的对象`KHandler`。

```
namespace AlchemyWebSocketsTest2
{
   class KHandler
   {
     public string name = "wut";
     static void Main()
     {
        KHandler handler = new KHandler();
        handler.name = "huh";
        Console.WriteLine("All Good.");
     }

  }
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-06T17:36:54.287

您正在尝试访问静态函数内部的非静态成员。如果您声明`name`为`public static string name = "wut";`，那么您的代码应该可以编译。我建议看一下[静态类和方法](http://msdn.microsoft.com/en-us/library/79b3xss3%28v=vs.80%29.aspx)。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-06T17:37:33.783

您正在尝试在静态（类型）方法中分配非静态（实例）成员。要分配名称，您必须创建他 KHandler 类的实例

```
static void Main()
{
     var khandlerInstance = new KHandler();
     khandlerInstance.name = "huh";
     Console.WriteLine("All Good.");
} 
```

UPD。如果需要通过静态方法为每个实例分配一个变量，则必须将实例作为参数传递。

```
class KHandler
{
    string Name;
    public static void ChangeName(KHandler targetInstance, string newName)
    {
        targetInstance.Name = newName;
    }
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-12-06T17:56:56.697

好的，一些构造函数怎么样？

```
// a sample base class
class KBase  {
     public readonly int value;  // making it readonly means it can only be assigned to once, and that has to happen during a constructor.
     public KBase ( int startValue ) { value = startValue; }
}

class KHandler : KBase
{
    public readonly string name = "wut";

    // this is a parameterless constructor, whose implementation invokes another constructor ( the one below ) of this class
    public KHandler () : this ( "huh" ) {
    }

    // this is a 1 parameter constructor, whose implementation ensures KBase is properly initialized, and then proceeds to initialize its part of the new instance.
    public KHandler ( string val ) : base ( 3 ) { 
        name = val;
    }
}

class Test {
    static void Main()
    {
        // this next line calls the parameterless constructor I defined above
        KHandler handler = new KHandler();  

        // and this next line calls the 1 parameter constructor
        KHandler handler2 = new KHandler("something else");

        Console.WriteLine("All Good 1"+handler.name);
        Console.WriteLine("All Good 2"+handler2.name);
    }
} 
```

我认为你想要构造函数的基本机制，在分配新类实例并“归零”后，它们在稍微特殊的环境中运行。特殊环境是编译器/语言确保正确初始化所有基类和字段，并且允许在构造期间（仅）分配给只读成员。

构造函数可以调用基类构造函数来正确初始化这些基类；构造函数还可以在继续之前调用同一类的另一个构造函数。

每个类可以有多个构造函数——就像我上面的例子一样。如果您不指定构造函数，则编译器会有效地为您插入一个空白的无参数构造函数。如果您不想要这种行为，那么添加您自己的构造函数（任何参数列表）会取消编译器/语言自动创建空白无参数构造函数。（如果您添加了自己的参数化构造函数并且仍然想要无参数构造函数，则必须自己将其添加回来。）

第一个构造函数（无参数的）作为第一个 new KHandler() 的结果调用，第二个构造函数由第二个 new KHandler（字符串）调用。

一旦构建，对象就被认为可以使用了。无论如何，搜索构造函数的一般构造，您将获得更多信息。

# php - 如何在 Yii 中使用多个主键值进行查询

> ID：13749225
> 
> 赞同：1
> 
> 时间：2012-12-06T17:32:59.550
> 
> 标签：php, mysql, database, yii

所以我有一个简单的语言模型，它的数据库结构看起来像这样：

```
id | language
_____________

1  | english
2  | japanese
3  | russian
4  | german
5  | thai 
```

假设我有一个对象所具有的语言的逗号分隔值列表（即 1、4、5）。我将如何使用 Yii 进行数据库查询并将 (1,4,5) 返回到带有 (english, German, thai) 的数组中？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-06T17:41:57.617

[addInCondition()](http://www.yiiframework.com/doc/api/1.1/CDbCriteria#addInCondition-detail)应该适合您，例如：

```
$pkArray = array(1,4,5);

$criteria = new CDbCriteria;
$criteria->addInCondition('id',$pkArray);

$models = Languages::model()->findAll($criteria); 
```

**[编辑]**

或者，正如@jborch / @Paystey 下面建议的那样，对于主键查找，您可以像这样使用[findAllByPk()](http://www.yiiframework.com/doc/api/1.1/CActiveRecord#findAllByPk-detail)：

```
$pkArray = array(1,4,5);

$models = Language::model()->findAllByPk($pkArray); 
```

**[/编辑]**

应该返回一个活动记录模型的数组，所以你可以像这样循环：

```
foreach(array_keys($models) as $key)
{
    echo '<p>Language: '.$models[$key]->name.'</p>';
} 
```

或者，如果您需要一组名称，

```
CHtml::listData($models,'id','name'); 
```

会给你一个像这样的数组：

```
array(
    1 => 'english',
    4 => 'german',
    5 => 'thai'
) 
```

# vb6 - 基于 datetimepicker 控件选择记录

> ID：13749234
> 
> 赞同：0
> 
> 时间：2012-12-06T17:33:25.510
> 
> 标签：vb6

我正在使用 vb6（和后端的 MSAccess）并创建了一个包含一个 dtpicker 控件、一个按钮和两个文本框的表单。在数据库方面，有一个表，`id`其编号`dt`为日期时间列。

现在我想根据日期选择记录并在一个文本框上显示 id 并在另一个文本框上显示日期。

我在按钮单击时所做的是：

```
Private Sub Command1_Click()
    Set rs = con.Execute("Select * from table1 Where DateValue(dt) =#" & DateValue(DTPicker1.Value) & "#")
    Text1.Text = rs("id")
    Text2.Text = rs("dtpicker1")
End Sub 
```

正确显示 id 但不显示日期并引发错误“在与请求的名称或序号相对应的集合中找不到项目”。

我应该怎么办？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-06T17:54:07.293

更改`rs("dtpicker1")`为`rs("dt")`

```
Private Sub Command1_Click() 
    Set rs = con.Execute("Select * from table1 Where DateValue(dt) =#" & DateValue(DTPicker1.Value) & "#") 
    Text1.Text = rs("id") 
    'Text2.Text = rs("dtpicker1") ' old/bad code
    Text2.Text = rs("dt")         ' new/good code
End Sub 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-09-14T09:04:48.620

```
Private Sub CommandButton4_Click()
Dim intYear As Integer
Dim intMonth As Integer
Dim intDay As Integer
intYear = Year(TextBox1.Value)
intMonth = Month(TextBox1.Value)
intDay = Day(TextBox1.Value)`enter code here`
Date = DateSerial(intYear, intMonth, intDay)
End Sub 
```

# java - 依赖版本冲突maven

> ID：13749239
> 
> 赞同：0
> 
> 时间：2012-12-06T17:33:36.960
> 
> 标签：java, maven, maven-2, dependency-management

有两个项目：
一个----有一个lib commons vers。1.3.7 ---（取决于B）
B ----有lib commons vers。1.2.5

所以，我们正在构建项目 B，lib commons vers。1.2.5 将被包含并安装在本地存储库中，然后......如果我们执行 A 的构建（依赖于 B），Maven 决定 lib commons vers。必须包含 1.3.7，因为 lib 与树根的距离最小...我知道如果我们将工件的版本设置为：1.2.5 - 这是推荐的版本。但是如果我们把它放在 [] - 这是一个硬性要求，maven 应该应用另一种策略来解决版本冲突 - 包括该工件的推荐版本。但是当我尝试这样做时，它不起作用，因为 Maven 从 loc 存储库中获取工件，其中包含对 lib commons vers 的引用。清单文件中的 1.2.5，但包含的 lib - commons vers。1.3.7。你能告诉我如何解决这个问题，

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-06T17:51:48.197

您需要对依赖项使用排除项。类似的东西（它只是一个样本）：

```
<dependency>
<groupId>org.springframework.integration</groupId>
<artifactId>spring-integration-amqp</artifactId>
<version>2.1.0.RELEASE</version>
<exclusions>
    <exclusion>
        <artifactId>spring-beans</artifactId>
        <groupId>org.springframework</groupId>
    </exclusion>
</exclusions>
</dependency> 
```

如果您正在使用 Eclipse 并且不想手动操作，您可以通过打开一个 pom 文件并选择一个“依赖层次结构”选项卡来完成，在该选项卡下您可以看到所有依赖关系层次结构。然后您可以右键单击要排除的依赖项，然后单击“排除 Maven 工件”

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-06T17:50:23.473

你需要跑`mvn dependency:tree`

# html - 从页面跳转到页面时避免背景闪烁

> ID：13749243
> 
> 赞同：0
> 
> 时间：2012-12-06T17:33:52.607
> 
> 标签：html, css, browser

我们有简单的

```
body{background:black;} 
```

背景为黑色。当您只是从一个黑色背景页面跳转到另一个页面时，实际上在重新加载期间背景会在大约 0.1 秒内变白。当浏览器重新渲染所有页面时，它有点合乎逻辑。但是有可能以某种方式避免它吗？

# facebook - 获取其他人对 fb 用户供稿的更新

> ID：13749244
> 
> 赞同：1
> 
> 时间：2012-12-06T17:33:55.243
> 
> 标签：facebook, facebook-graph-api, real-time-updates

我需要知道另一个用户何时评论/喜欢了我的一个用户的帖子，或者他们是否标记/提到了我的一个用户，以便我可以对这些事件采取行动。

我有 fb 实时设置，但这只告诉我有些事情发生了变化。我知道我可以使用 FQL 进行查询，但我不知道如何说“在某个时间戳之后”。使用图形 API 获取提要的问题相同。我只是得到整个提要。

有没有办法从某个时间或某个我可以存储其 id 的其他事件之后获取更改？或者人们可以推荐实现这一目标的最佳实践吗？

# python - 使用 urllib2 循环浏览页面内容

> ID：13749252
> 
> 赞同：0
> 
> 时间：2012-12-06T17:34:14.937
> 
> 标签：python, urllib2

我对 python 比较陌生，所以这样的事情对我来说并不容易。

我只想循环浏览网页内容，然后暂时将每个出现的内容打印到控制台窗口，但显然我的循环错误。

```
import sys
import re
import urllib2
import urlparse

crawling = tocrawl.pop()
response = urllib2.urlopen(crawling)

msg = response.read()
endDiv = msg.find('</div>')
while endDiv != -1:
    endDiv = msg.find('</div>')
    startPos = msg.find('class="facultyname">', endDiv)
    if startPos != -1:
        nextPos = msg.find('.php">', startPos)
        endPos = msg.find('</a>', nextPos)
    if endPos != -1:
        name = msg[nextPos+6:endPos]
        print name, "   ",

    startPos = msg.find('function escramble()')
    if startPos != -1:
        nextPos = msg.find('b=', startPos)
        endPos = msg.find('c', nextPos)
    if endPos != -1:
        email = msg[nextPos+3:endPos-1]
        email = email[:-13] + '@email.com'
        print email

    endDiv = msg.find('</div>', endPos) 
```

我已经抓住了第一次出现，我只想循环到页面末尾并收集其余部分。

示例 HTML：

```
<div id="main-text">

   <p class="title">Research Scientists</p>

   <div class="space">&nbsp;</div>
   <img src="photos/icons/bastolaicon.jpg" class="faculty" width="53" height="71" alt="Bastola Photo" />

   <div class="facultyname">
     <strong><a href="people/bastola.php">person1</a>
     <br /><em>Post-Doctoral Scientist</em></strong>
     <br />
   </div>

   <div class="facultybody">
     Rm. 218A
     <br /><em><script type="text/javascript">

       <!--
       function escramble(){
       var a,b,c,d,e,f,g,h,i
       a='<a href=\"mai'
       b='person1'
       c='\">'
       a+='lto:'
       b+='@'
       e='</a>'
       f=''
       b+='email.com'
       g='<img src=\"'
       h=''
       i='\" alt="Email us." border="0">'

       if (f) d=f
       else if (h) d=g+h+i
       else d=b

       document.write(a+b+c+d+e)
       }
       escramble()
       //-->

       </script></em>

   </div>

   <div class="space">&nbsp;</div>

   <img src="photos/icons/person2icon.jpg" class="faculty" width="53" height="71" alt="person2 Photo" />

   <div class="facultyname">
     <strong><a href="people/person2.shtml">person2</a>
     <br /><em>Assistant Research Scientist</em></strong>
     <br />
   </div>

   <div class="facultybody">
     Rm. 227
     <br />(850) 645-1253
     <br /><em><script type="text/javascript">

       <!--
       function escramble(){
       var a,b,c,d,e,f,g,h,i
       a='<a href=\"mai'
       b='person2'
       c='\">'
       a+='lto:'
       b+='@'
       e='</a>'
       f=''
       b+='email.com'
       g='<img src=\"'
       h=''
       i='\" alt="Email us." border="0">'

       if (f) d=f
       else if (h) d=g+h+i
       else d=b

       document.write(a+b+c+d+e)
       }
       escramble()
       //-->

       </script></em>

   </div>

   <div class="spacer">&nbsp;</div> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-06T18:06:45.790

适用于您的样本数据的快速而肮脏的方法：

```
>>> res = re.findall(r"b\+?='(.*?)'", html)
>>> res
['person1', '@', 'email.com', 'person2', '@', 'email.com']
>>> emails [''.join(group) for group in zip(*[iter(res)]*3)]
['person1@email.com', 'person2@email.com'] 
```

既然这已经很可怕了，那么让我们真正地拼凑它：

```
>>> names = [name.split('>', 1)[1] for name in re.findall(r'href="people(.*?)</a>', html)]
>>> names
['person1', 'person2']
>>> zip(names, emails)
[('person1', 'person1@email.com'), ('person2', 'person2@email.com')] 
```

**注意 - 这仅适用于您的示例数据 - HTML 是变化无常的 - 所以不要指望它是健壮的 - 易于管理等等......等等......**

# php - 双击编辑 Kendo Grid incell 或内联编辑

> ID：13749254
> 
> 赞同：2
> 
> 时间：2012-12-06T17:34:16.943
> 
> 标签：php, jquery, kendo-ui

我在应用程序中使用 Kendo Grid。要求是使网格在双击时可编辑。我正在处理该`.dblclick`事件并以编程方式使单元格可使用`.editCell(cell)`. 问题是当有人在单元格外单击或按下输入或返回按钮时我需要保存更改并在有人单击 ESC 时撤消。此外，当日期无效时，我不应该保存它。

我尝试了聚焦，模糊，点击事件，但有些工作，有些没有，有些重叠并且不让单元格打开。

这是我的代码。

```
//code for double click;
$('#grid').delegate('tbody>tr>td','dblclick', function (e) {
        console.log("double clicked");
        if($(".k-grid-edit-row").length <= 0) {
            $("#grid").data("kendoGrid").editCell($(this));
           }
    });

$('#grid tbody').on('blur','input,select,textarea',saveGrid);
    $('#grid').delegate('tbody>tr>td','focusout',function() {
        console.log("inside focusout");
        if($(this).hasClass("k-edit-cell"))
            return;
        saveGrid();
    });
    $('#grid').delegate('tbody>tr>td','click', function(e){
        console.log("singleClick called");
        if($(this).hasClass("k-edit-cell"))
            return;
        saveGrid();
    });

    function saveGrid() {
        console.log("save grid called");
        var grid = $("#grid").data("kendoGrid");
        var editedCellIndex =grid.cellIndex(grid.tbody.find(">tr td.k-edit-cell"));
        console.log("this cell index:"+grid.cellIndex($(this)));
        console.log(" Edited cell index :"+editedCellIndex);
        if(editedCellIndex<0) {
            return false;
        } 
        if($(".k-grid-edit-row").hasClass("k-invalid")) {
            return false;
        }
        grid.closeCell();
        console.log("saving changes");
        grid.saveChanges();
    } 
```

如果您需要更多信息，请告诉我。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-28T09:41:37.820

要在有人按下网格时获取事件（调整函数以检查单元格外），请使用以下命令：

```
$('html').on('click', function (e) {
if (!$(e.target).parent().hasClass('k-master-row') && !$(e.target).hasClass('k-input')) {
    var grid = $("#Grid").data("kendoGrid")
    //use this if the row was selected
    //grid.clearSelection();

    //do something
    grid.saveChanges();
} 
```

});

请注意，这可能会弄乱其他点击事件，它会阻止我在我的项目中使用`.on()`任何其他 jQuery 代码（所以我使用 deprecated `.live()`），所以它不是一个理想的解决方案

# shell - 如何将主机名附加到来自局域网中不同服务器的单个文本文件

> ID：13749257
> 
> 赞同：0
> 
> 时间：2012-12-06T17:34:31.043
> 
> 标签：shell

我通过在多个服务器（比如 10 个）上运行脚本来安装应用程序，最后我需要获取在单个文件中运行的服务器列表。前任：

```
Server-1
Server-2
Server-3.....Server-10 
```

我试过这个，但它在本地机器上创建 agent_name_list.txt，只有那个主机名。

知道如何在一个地方获得通过脚本安装代理的服务器的综合列表吗？

```
agent_name='hostname'
nslookup $agent_name | grep Name | awk '{print $2}' >  /var/tmp/$agent_name_list.txt 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-06T23:53:07.663

我不清楚您要实现的确切输出，但我看到您需要对代码进行 2 个修复：

```
agent_name=$(hostname)
nslookup $agent_name | grep Name | awk '{print $2}' >  /var/tmp/${agent_name}_list.txt 
```

这可以进一步减少到

```
agent_name=$(hostname)
nslookup $agent_name | awk '/Name/{print $2}' >  /var/tmp/${agent_name}_list.txt 
```

awk 的众多功能之一是匹配模式，并将其操作限制为仅匹配的行。

* * *

**注释**

```
agent_name='hostname' 
```

在这里，您只是将 agent_name 的值设置为字符串值“主机名”。注意上面的方式，我使用 shell 命令替换功能来捕获命令的当前值`hostname`。

```
nslookup $agent_name | grep Name | awk '{print $2}' >  /var/tmp/$agent_name_list.txt 
```

在这里，您需要使用变量“包装器” `{}`，以便 shell 不会尝试将 $agent_name_list 评估为变量。因为您已为 agent_name 分配了一个值，所以 agent_name_list 没有值。假设一个前导 '$' 字符，`{}`包装器告诉外壳程序“这是一个变量名，值是什么？” ..

如果上面的更正示例不能完全解决您的问题，请考虑编辑您的消息以包含示例输入数据、给定示例数据所需的输出、您的当前代码和该当前代码的输出。

IHTH

# parsing - 使用 PHP Simple HTML DOM Parser 从 Div 类中获取内容

> ID：13749261
> 
> 赞同：4
> 
> 时间：2012-12-06T17:34:44.603
> 
> 标签：parsing, dom, simple-html-dom

如何使用[PHP Simple HTML DOM Parser](http://simplehtmldom.sourceforge.net/manual.htm)获取 Div 类中的内容。
在这里，我想从 div 类中获取内容，例如：

```
<div class="post" imposition="usermanual">Some Content </div> 
```

那么，使用这个 div 类获取内容的方法是什么`post`？我已经尝试过这段代码但不起作用：

```
$es = $html->find('.post');
$es = $html->find('div.post'); // also try this
$es = $html->find('div[class="post"]'); // also try this 
```

任何想法？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-12-06T17:46:13.160

在[How to access the HTML element's attributes的](http://simplehtmldom.sourceforge.net/manual.htm#section_access)*Magic Attributes*选项卡下，您将找到如何访问对象的属性。还有一处房产。`innertext``plaintext`

```
$es = $html->find('div[class="post"]', 0);
echo $es->innertext; // Some Content 
```

# c# - 如何使用 Common.Logging.Log4Net 记录分组的所有消息

> ID：13749272
> 
> 赞同：1
> 
> 时间：2012-12-06T17:35:29.583
> 
> 标签：c#, log4net

所以我使用 Common.Logging.Log4Net 进行日志记录，但由于代码是多线程的，因此消息经常混淆，例如：

来自线程 1 的消息 来自线程 2 的消息 来自线程 1 的消息 来自线程 1 的消息 来自线程 2 的消息

为了避免这种情况，我们试图将所有消息放在一起，并在执行完成时将它们全部打印出来。为此，我们基本上有一个 Action 委托列表，每个委托都包含日志行，例如：

```
 Log.DebugFormat("Handling..."); 
```

但不幸的是，这并没有解决任何问题，因为当我们写回日志时，消息仍然混杂在一起，因为我们所做的只是列表上的一个 foreach 并执行委托。那么有什么方法可以一次写入所有消息？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-06T17:55:01.140

听起来您正在寻找某种事务日志记录。从本质上讲，应用程序日志记录是顺序的。

我能想到的几个选项：

*   记录线程 ID。查看输出时使用更合适的日志分析器。如果您使用 CSV 或其他常见格式，Excel 可以正常工作。当您对某个线程的操作感兴趣时，请过滤线程 ID。我会先尝试这条路线。
*   将每个线程记录到单独的文件中。我见过微软偶尔会这样做。可能工作正常。必须以某种方式唯一标识每个文件。猜测 log4net 可以处理。

# php - 需要在 php 中以 urls 为键填充数组

> ID：13749274
> 
> 赞同：1
> 
> 时间：2012-12-06T17:35:33.447
> 
> 标签：php, arrays, url, multidimensional-array

我需要以下结构的数组：

```
Array
(
[www.example.com] => Array
    (
        [0] => http://www.example.com/
        [1] => http://www.example.com/something.html
        [2] => http://www.example.com/anything.html
    )

[www.beispiel.com] => Array
    (
        [0] => http://www.beispiel.com/product-services/
        [1] => http://www.beispiel.com/non-disclosure-agreement/
    )
 ) 
```

作为输入数组，我有以下两个

```
Array ( [0] => http://www.example.com/
        [1] => http://www.example.com/something.html
        [2] => http://www.example.com/anything.html
        [3] => http://www.beispiel.com/product-services/
        [4] => http://www.beispiel.com/non-disclosure-agreement/
      ) 
```

和

```
Array ( [0] => www.example.com [1] => www.beispiel.com ) 
```

此刻我有这样的事情：

```
Array
(
[0] => Array
    (
        [www.example.com] => http://www.example.com/
    )

[1] => Array
    (
        [www.example.com] => http://www.example.com/something.html
    )

[2] => Array
    (
        [www.example.com] => http://www.example.com/anything.html
    )

[3] => Array
    (
        [www.beispiel.com] => http://www.beispiel.com/product-services/
    )

[4] => Array
    (
        [www.beispiel.com] => http://www.beispiel.com/non-disclosure-agreement/
    )

) 
```

这是可能的还是我错过了一些关于 php 的信息（例如 key 不能是解析的 url（主机））？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-06T17:46:26.287

尝试：

```
$arr1 = array('http://www.example.com/','http://www.example.com/something.html','http://www.beispiel.com/product-services/' ...); // 1st input array
$arr2 = array('www.example.com', 'www.beispiel.com'); // 2nd input array
$arr1_val = array_values($arr1);
foreach($arr2 as $v) {
 foreach($arr1 as $m) {       
   if(strpos($m, $v) !== FALSE)
    $new_arr[$v][] = $m;
  }      
} 
```

[演示](http://codepad.org/fjL2ZDlK)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-06T17:41:29.120

这不可能。与变量一样，相同的命名规则适用于数组键。

# sql - 将本地时间与数据库服务器时间同步

> ID：13749277
> 
> 赞同：0
> 
> 时间：2012-12-06T17:35:54.370
> 
> 标签：sql, windows, delphi, firebird

我必须将我的本地日期和时间与从数据库返回的相同日期和时间同步。

sql：

```
select first 1 CURRENT_TIMESTAMP from RDB$DATABASE 
```

此 SQL 命令返回数据库服务器上的当前日期和时间。

现在，我需要缓存它并根据本地差异提供正确的时间。问题是可以再次更改本地日期和时间。

如何在不再次执行 SQL 的情况下保证正确的日期时间？

* * *

我找到了一个解决方案：

```
var
  SQLTimestamp: TDateTime=0;
  LocalTimestamp: TDateTime=0;

function SysUpTime : TDateTime;
var
  Count, Freq : int64;
begin
  QueryPerformanceCounter(count);
  QueryPerformanceFrequency(Freq);
  if (count<> 0) and (Freq <> 0) then
  begin
    Result := Count / Freq;
    Result := result / SecsPerDay;
  end
  else
    Result := 0;
end;

function RealTime: TDateTime;
var
  queryTime, dbTime: tdatetime;
begin
  if SQLTimestamp = 0 then
  begin
    queryTime := SysUpTime;
    dbTime := // SQL QUERY EXECUTION
    queryTime := SysUpTime - queryTime;

    LocalTimestamp := SysUpTime;
    SQLTimestamp := dbTime + queryTime;
  end;

  Result := SQLTimestamp + (SysUpTime - LocalTimestamp);
end; 
```

**现在我的问题是**：[QueryPerformanceCounter](http://msdn.microsoft.com/en-us/library/ms644904%28v=vs.85%29.aspx)和[QueryPerformanceFrequency与](http://msdn.microsoft.com/en-us/library/ms644905%28v=vs.85%29.aspx)[GetTickCount](http://msdn.microsoft.com/en-us/library/ms724408%28v=VS.85%29.aspx)有相同的限制吗？

```
 The elapsed time is stored as a DWORD value. Therefore, the time will wrap around to zero if the system is run continuously for 49.7 days. 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-07T07:28:40.760

任何缓存有什么作用？如果某些定义条件仍然成立，它会为您提供现成的结果，或者如果它们发生更改则重新查询/重新计算结果。

这也是您缓存必须做的事情。如果本地时间被覆盖，只需重新执行查询并在连续时使用缓存。

请重新执行查询，仅在需要时执行，而不是在每次尝试时执行。[http://msdn.microsoft.com/ru-ru/library/windows/desktop/ms725498.aspx](http://msdn.microsoft.com/ru-ru/library/windows/desktop/ms725498.aspx)

现在我真的很想知道如果服务器的时钟会改变，而不是本地时钟，你会怎么做。也许您真的会在 hdatabase 服务器上安装单独的时间同步服务？

# php - 在 session_set_cookie_params/session.gc_maxlifetime 结束时更新数据库

> ID：13749278
> 
> 赞同：0
> 
> 时间：2012-12-06T17:35:54.883
> 
> 标签：php

在 session_set_cookie_params/session.gc_maxlifetime 中设置的计时器用完后，是否有触发 sql 逻辑（本质上是包含 sql 逻辑的 php 函数）？例如，用户未正确注销并关闭了浏览器。所以数据库没有更新。

编辑：还有一个关于 session.gc_maxlifetime 的问题。由于用户与浏览器交互而未触发的自动 ajax 请求是否会重置其计时器？

# regex - URL 重写模式仅在没有特定文件夹的情况下匹配文件夹

> ID：13749281
> 
> 赞同：0
> 
> 时间：2012-12-06T17:36:14.367
> 
> 标签：regex, iis, url-rewriting, iis-7.5

请原谅这个糟糕的标题，但我不确定如何准确地表达这个词。这是我的场景：

我有这个模式：

`(.*)MySpecialFolder(.*)`

我需要重写为：

`{R:1}MyOtherFolder/MySpecialFolder{R:2}`

所以`http://localhost/MySpecialFolder/test.aspx`会改写为`http://localhost/MyOtherFolder/MySpecialFolder/test.aspx`

问题是在下一个请求时，它仍然尝试`MySpecialFolder`再次替换，所以它变成了`http://localhost/MyOtherFolder/MyOtherFolder/MySpecialFolder/test.aspx`，依此类推。

有没有办法可以更新我的正则表达式模式说：

“替换`MySpecialFolder`为`MyOtherFolder/MySpecialFolder`但仅当`MySpecialFolder`之前没有`MyOtherFolder/`”？所以基本上如果`MyOtherFolder/MySpecialFolder`已经在路径中，它不会将其视为“匹配”。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-06T18:00:36.343

添加条件以取消匹配 MyOtherFolder

# javascript - Twitter Bootstrap Scrollspy 与 Arrow Follow

> ID：13749282
> 
> 赞同：1
> 
> 时间：2012-12-06T17:36:18.097
> 
> 标签：javascript, twitter-bootstrap

Twitter Bootstrap 具有 scrollspy，它可以根据您在页面上的位置（锚点）自动将活动类添加到导航项。它工作得很好，但我想知道是否有人知道一种简单的方法来让 scrollspy 在导航和基于 scrollspy 活动类的幻灯片下有一个箭头图形。

一个例子是：[https](https://www.simple.com/) ://www.simple.com/ （主导航）

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-07T01:09:00.897

您可以监听 ScrollSpy 触发的**激活**事件，然后更新箭头 div 以匹配激活元素的位置。滑动可以通过 CSS 过渡来完成。

代码的主要部分是：

### HTML

```
<div class="navbar-wrapper">
  <div class="navbar">...</div>
  <div id="menu-arrow" class="top-arrow"></div>
</div> 
```

### CSS

```
.top-arrow {
  position: absolute;
  display: inline-block;
  width: 0;
  height: 0;
  border-color: transparent;
  border-style: solid;
  border-top-color: #aaa;
  border-width: 10px 10px 0;
  -webkit-transition: left 0.5s ease-in-out;
     -moz-transition: left 0.5s ease-in-out;
       -o-transition: left 0.5s ease-in-out;
          transition: left 0.5s ease-in-out;
}

.navbar-wrapper {
  position: relative;
} 
```

### JavaScript

```
$('body').on('activate', function (e) {
  var $item = $(e.target);
  $('#menu-arrow').css('left', $item.offset().left + $item.width() / 2 - 10 - $('.navbar-wrapper').offset().left);
}); 
```

您必须`.top-arrow`使用 CSS 进行一些初始定位，您可以在这个（不太强大的）示例中看到如何：

## [普朗克](http://plnkr.co/edit/W5bYZmeHEkxF72emg4f2?p=preview)

# ruby - Ruby 的“引发”是否修改异常？

> ID：13749295
> 
> 赞同：1
> 
> 时间：2012-12-06T17:37:44.187
> 
> 标签：ruby, exception

Ruby 的“引发”是否修改异常？

或者，是以下片段：

```
some_method(MyException.new) 
```

和

```
begin
  raise MyException.new
rescue MyException => e
  some_method(e)
end 
```

相等的？如果不是，有什么区别？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-06T18:03:18.867

不，它们不相等。

```
开始
  e = Exception.new "AAA"
  把e.backtrace.nil？
  提高e
救援异常 => e
  把e.backtrace.nil？
结尾

```

给

```
真的
错误的

```

有谁知道其他区别？

**编辑：**

`Kernel#raise`不会修改异常，除非`raise`在没有参数的情况下调用并定义（这意味着：除了在没有参数的子句中`$!`重新引发异常）。`rescue`在以下示例中：

```
开始
  提出“异常”#1
救援
  提高#2
结尾

```

异常将在 #1 raise 中被修改（其上下文和回溯已更改），但在 #2 raise 中保持不变。它将在任何其他情况下进行修改，包括使用一些参数重新引发异常，例如：

```
开始
  提出“异常”#1
救援异常 => e
  提高 e #2
结尾

```

这里的异常将在 #1 和 #2 中更改。

See [https://github.com/rubinius/rubinius/blob/master/kernel/delta/kernel.rb](https://github.com/rubinius/rubinius/blob/master/kernel/delta/kernel.rb) for details.

Above applies to Rubinius. It should be the same in MRI 1.9 and JRuby, but I haven't checked it.

# ruby-on-rails - 用一个 collection_select 分配两列

> ID：13749297
> 
> 赞同：0
> 
> 时间：2012-12-06T17:37:52.013
> 
> 标签：ruby-on-rails

我正在尝试使用 1 个 collection_select 将 user_id 分配给每个帖子的一列，并将 user_name 分配给另一列。

那可能吗？或者这是一个批量分配问题？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-07T04:34:16.410

[在MrYoshiji](https://stackoverflow.com/users/976775/mryoshiji)和[Levi Stanley](https://stackoverflow.com/users/1454117/levi-stanley)的帮助下解决了这个问题，他们回答了这篇[文章](https://stackoverflow.com/questions/13735164/hidden-field-working-with-two-models)：

```
 before_save :set_user_name

   def set_user_name
      self.user_name = usepacker.try(:p_name)
   end 
```

# email - 证书过期时数字签名失败

> ID：13749298
> 
> 赞同：2
> 
> 时间：2012-12-06T17:37:53.767
> 
> 标签：email, certificate, digital-signature, pki, smime

我最近遇到了一些让我非常困惑的事情。

我不知道这是 Outlook 的“问题”，还是设计使然，在这种情况下，我对数字证书的理解是错误的。

我正在使用 S/MIME 通过 Outlook 对我的外发电子邮件进行数字签名。我有一个 S-MIME 证书。来自受信任的权威，一切都很好。

几周前，我的证书已经过期（有效期为一年），所以我的 CA 又给了我一个。但是，现在所有由我发送并使用现已过期的旧证书签名的电子邮件都被标记为“无效签名”，表明证书已过期。

如果我现在尝试使用该旧证书发送新电子邮件，这种行为将完全没问题。但是那些电子邮件已经发送过去，当 cert. 仍然有效。Outlook 不应该检查该电子邮件的发送时间，而不是当前系统时间吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-06T18:02:07.113

如果签名没有时间戳，则无法知道消息何时签名（可以伪造消息时间）。

因此，邮件程序将此类签名消息显示为具有无效签名。

# javascript - 为 tumblr 访问计数器创建短行 JavaScript

> ID：13749300
> 
> 赞同：2
> 
> 时间：2012-12-06T17:37:57.730
> 
> 标签：javascript, tumblr, hitcounter

我与其他示例内容混合在一起，并提出了以下代码：

```
</head>    
    <li><a id="counter" href="/"><img src="http://s1.freehostedscripts.net/ghitcounter.php?site=ID294699&s=94"></a>
</ol> 
```

我希望它在我的 tumblr 页面上显示一个计数器，但是当它使用时，它会显示一个空白图像，而不是在实际链接上使用变化的图像。

任何帮助将不胜感激，我是 Java 的菜鸟，但我知道 Python 和一点 html。

所以，只是为了重复发生的事情，

![](../Images/66c1466bec22ba9dcde2d3994c138808.png)

我希望它显示计数器。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-06T17:47:43.563

这不是 Java 问题。上面的 url 指向一段 JavaScript，而不是图像。你想要这样的东西：

```
<script type="text/javascript" src="http://s1.freehostedscripts.net/ghitcounter.php?site=ID294699&s=94"></script> 
```

# java - 如何在 Blogger Google API 中指定访问令牌以插入帖子？

> ID：13749301
> 
> 赞同：1
> 
> 时间：2012-12-06T17:37:58.750
> 
> 标签：java, google-api, blogger

我正在探索 Google Blogger 的 API。我想插入来自 Java 独立应用程序的帖子。我设法生成了一个身份验证代码和一个访问令牌。

我正在尝试遵循[此处](https://developers.google.com/blogger/docs/3.0/reference/posts/insert)提供的代码示例，但它没有指定如何设置访问令牌。任何人都可以澄清这一点吗？你有一个操作代码示例要分享吗？

谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-06T17:42:02.330

您需要在 HTTP 请求的标头中指定访问令牌。

```
Authorization:  Bearer yourAccessTokenHere 
```

# excel - 在 Excel VBA 中测试范围对象中是否存在常量

> ID：13749302
> 
> 赞同：2
> 
> 时间：2012-12-06T17:38:22.090
> 
> 标签：excel, constants

我在类型设置为 xlCellTypeConstants 的给定目标范围上使用 Excel Range 对象的 SpecialCells 方法。当然，如果我检查的范围不包含任何常量，我会得到运行时错误 1004。

我可以通过使用“on error”语句捕获该错误来解决此问题，但我想尽可能避免这种情况。因此，在将 SpecialCells(xlCellTypeConstants) 方法应用于其中一个单元格之前，我正在寻找一些方法来检查我的目标范围是否存在常量。

我可以遍历目标范围内的每个单元格并分析其内容（不是 null 并且第一个字符不是等号），但我很确定会有更有效的方法来执行此操作。

有什么建议么？

# iis - 无法获取 IIS URL 重写规则来修复 URL 中的 %3F 和 %3D

> ID：13749307
> 
> 赞同：4
> 
> 时间：2012-12-06T17:38:58.517
> 
> 标签：iis, url-rewriting

我有许多由 Google 网站管理员工具报告的入站链接，其中包含导致 404 错误的实体。我想创建一些与 IIS 一起使用的 url 重写规则来解决这个问题。这些规则需要在任何页面上起作用，因为某些包含实体的链接可能是多个文件夹，并且是 index.php 以外的文件。

例如重写规则应该能够处理：

www.mysite.com/index.php%3Fpage%3Dtest

www.mysite.com/folder/somepage.php%3Fvariable%3Dtest

并将它们转换为：

www.mysite.com/index.php?page=test

www.mysite.com/folder/somepage.php?variable=test

我尝试创建自己的规则，但并没有走得太远。我找到了处理此问题的 Apache 规则，但使用 IIS 导入规则工具导入它们不起作用。

以下是适用于 Apache 的方法（现在我们只需要一个 IIS 版本）：

```
# If THE_REQUEST contains a URL-path with a percent-encoded "?" and/or a query string with one
# or more specific percent-encoded characters, and we're not already in the process of fixing
# it, then copy the client-requested URL-path-plus-query-string into the "MyURI" variable.
RewriteCond %{ENV:MyURI}>%{THE_REQUEST} ^>[A-Z]+\ /([^\ ]+)\ HTTP/
RewriteCond %1 ^([^?]*\?([^%]*(\%(25)*([^3].|.[^D]))*)*\%(25)*3D.*)$ [NC,OR]
RewriteCond %1 ^([^?]*\?([^%]*(\%(25)*([^2].|.[^6]))*)*\%(25)*26.*)$ [OR]
RewriteCond %1 ^(([^%]*(\%(25)*([^3].|.[^F]))*)*\%(25)*3F.*)$ [NC]
RewriteRule ^. - [NE,E=MyURI:%1]
#
# If any encoded question mark is present in the client-requested URI, and
# no unencoded question mark is present, replace the first encoded question
# mark, queue up a redirect, and then re-start mod_rewrite processing
RewriteCond %{ENV:MyURI} ^[^?]+$
RewriteCond %{ENV:MyURI} ^(([^%]*(\%(25)*([^3].|.[^F]))*)*)\%(25)*3F(.*)$ [NC]
RewriteRule ^. - [NE,E=MyURI:%1?%7,E=QRedir:Yes,N]
#
# If any encoded "=" sign follows the "?", replace it, queue
# up a redirect, and re-start mod_rewrite processing
RewriteCond %{ENV:MyURI} ^([^?]*\?([^%]*(\%(25)*([^3].|.[^D]))*)*)\%(25)*3D(.*)$ [NC]
RewriteRule ^. - [NE,E=MyURI:%1=%7,E=QRedir:Yes,N]
#
# If any encoded ampersand follows the "?", replace it, queue
# up a redirect, and then re-start mod_rewrite processing
RewriteCond %{ENV:MyURI} ^([^?]*\?([^%]*(\%(25)*([^2].|.[^6]))*)*)\%(25)*26(.*)$
RewriteRule ^. - [NE,E=MyURI:%1&%7,E=QRedir:Yes,N]
#
# If we get here, there are no more percent-encoded characters which can
# and should be replaced by the rules above, so do the external redirect
RewriteCond %{ENV:QRedir} =Yes [NC]
RewriteRule ^. http://www.example.com/%{ENV:MyURI} [NE,R=301,L] 
```

这至少让我们了解了在编写 IIS url 重写规则时需要考虑什么。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2017-07-29T17:36:05.240

此规则适用于您：

```
<rule name="3f and 3d redirect">
    <match url="(.*)(\?|\=)(.*)" />
    <action type="Redirect" url="{R:0}" />
</rule> 
```

# javascript - 是否可以从调用 window.open('page1.html' ,'_self') 的页面修改窗口对象？

> ID：13749311
> 
> 赞同：1
> 
> 时间：2012-12-06T17:39:06.443
> 
> 标签：javascript, window.open

我有一个页面调用 window.open('page1.html' ,'_self')。是否可以从调用页面修改新打开的窗口对象。例如，

例如，

```
var myObj = {/*a large complex object */};
var w = window.open('page1.html' ,'_self')'
w.obj = myObj; 
```

上面的代码不起作用，因为 w.obj 赋值似乎永远不会执行。

# jquery - 暂时禁用复选框

> ID：13749314
> 
> 赞同：0
> 
> 时间：2012-12-06T17:39:25.540
> 
> 标签：jquery

当用户选中或取消选中复选框时，我会进行 ajax 调用，保存设置更改。成功后，我会显示一个小标签，通知用户设置已应用，然后将其淡出。我想从单击它到我淡出消息的时间禁用该复选框。我该怎么做？

```
$('.role-checkbox').click(function () {
                var this_control = $(this);
                $.ajax({
                    url: _SITEURL + 'User/EnableDisableRole',
                    data: JSON.stringify({ data }),
                    contentType: "application/json;charset=utf-8",
                    type: 'POST',
                    success: function () {
                        var saved_label = $('<span class="label label-success">Saved</span>')
                            .hide().appendTo(this_control.parent()).fadeIn(500).delay(3000).fadeOut(500);

                    },
                    error: function () {
                        var saved_label = $('<span class="label label-important">Error Saving!</span>')
                            .hide().appendTo(this_control.parent()).fadeIn(500).delay(3000).fadeOut(500);
                    }
                });
            }); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-06T17:42:12.737

首先，您需要禁用该复选框：

```
$(this).prop('disabled',true); 
```

接下来，您需要在`fadeout`回调中取消禁用它：

```
var saved_label = $('<span class="label label-success">Saved</span>')
                  .hide()
                  .appendTo(this_control.parent())
                  .fadeIn(500)
                  .delay(3000)
                  .fadeOut(500, function(){
                      this_control.prop('disabled',false);
                  }); 
```

这是一个演示：http: [//jsfiddle.net/ezENq/](http://jsfiddle.net/ezENq/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-06T17:42:26.943

您只需在他们单击复选框时禁用复选框，然后在单击后删除禁用。

```
$('.role-checkbox').click(function () {
                var this_control = $(this);
                this_control.prop("disabled","disabled");
                $.ajax({
                    url: _SITEURL + 'User/EnableDisableRole',
                    data: JSON.stringify({ data }),
                    contentType: "application/json;charset=utf-8",
                    type: 'POST',
                    success: function () {
                        this_control.removeProp("disabled");
                        var saved_label = $('<span class="label label-success">Saved</span>')
                            .hide().appendTo(this_control.parent()).fadeIn(500).delay(3000).fadeOut(500);

                    },
                    error: function () {
                        this_control.removeProp("disabled");
                        var saved_label = $('<span class="label label-important">Error Saving!</span>')
                            .hide().appendTo(this_control.parent()).fadeIn(500).delay(3000).fadeOut(500);
                    }
                });
            }); 
```

# django - 自定义模型属性的属性错误

> ID：13749315
> 
> 赞同：0
> 
> 时间：2012-12-06T17:39:25.040
> 
> 标签：django

为了检查字段是否已更改，我在模型中添加了一个属性，如下[所述](https://stackoverflow.com/a/1793323/326849)：

```
class Person(models.Model):
  name = models.CharField()

  __original_name = None

  def __init__(self, *args, **kwargs):
    super(Person, self).__init__(*args, **kwargs)
    self.__original_name = self.name

  def save(self, force_insert=False, force_update=False, *args, **kwargs):
    if self.name != self.__original_name:
      # name changed - do something here

    super(Person, self).save(force_insert, force_update, *args, **kwargs)
    self.__original_name = self.name 
```

我已经有这个模型的实例（没有 __original_name 属性），当我想修改并保存一个时，我得到

```
'Person' object has no attribute '__original_name' 
```

有人可以帮忙吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-06T18:27:01.410

可以使用 访问该属性`self._Person__original_name`。

# eclipse - 显示原始 HTML 的 Eclipse 悬停文档

> ID：13749318
> 
> 赞同：1
> 
> 时间：2012-12-06T17:39:43.230
> 
> 标签：eclipse, code-assist

我在 RedHat 6 上运行 Eclipse Indigo x64，每当悬停文档弹出时，原始 HTML 都会显示为纯文本。我的 PHP 项目就是这种情况，在首选项 PHP > Code Style > Formatter (PDT Tools) 下，我创建了自己的 Active 配置文件。我注意到使用 Java Formatter 配置文件“Eclip [内置]”，在评论选项卡下，有一个选项框“格式化 HTML 标记”。PHP Formatter 配置文件没有评论选项卡，所以我相信这可能是问题所在。

有没有办法在配置文件中指定这个？

如果有人解决了这个问题，请告诉我。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-10-25T18:32:14.657

解决方案可能只是对`eclipse.ini`. 这是我为解决它所做`eclipse.ini`的在文本编辑器中打开（在 eclipse 文件夹中）并添加

```
-Dorg.eclipse.swt.browser.DefaultType=webkit 
```

如果它还没有具有不同的价值。

确保您的系统上至少安装`libwebkitgtk-1.0.0`或`libwebkitgtk-3.0.0`安装了两者。（你可以`sudo apt-get install libwebkitgtk-1.0.0`在 Ubuntu 上做）。

我的猜测是内容辅助视图依赖于内部 Web 浏览器来解析其 HTML 内容。因此，如果 eclipse（及其设置）未提供，则显示原始 HTML。此解决方案还解决了我在使用其他依赖于内部 Web 浏览器（如 Eclipse Colorer 主题插件）的插件时遇到的问题

希望它可以帮助某人！

# c# - 获取 Google Maps HTML 以嵌入我的网站

> ID：13749323
> 
> 赞同：0
> 
> 时间：2012-12-06T17:40:16.130
> 
> 标签：c#, asp.net, .net, http, google-maps

我有一个网站，一些用户在其中输入一些数据。地址是这些数据之一。我想得到这样的html。

```
<iframe width="425" height="350" frameborder="0" scrolling="no" marginheight="0" marginwidth="0" src="https://maps.google.com/?ie=UTF8&amp;ll=37.0625,-95.677068&amp;spn=51.708931,101.425781&amp;t=m&amp;z=4&amp;output=embed"></iframe><br /><small><a href="https://maps.google.com/?ie=UTF8&amp;ll=37.0625,-95.677068&amp;spn=51.708931,101.425781&amp;t=m&amp;z=4&amp;source=embed" style="color:#0000FF;text-align:left">View Larger Map</a></small> 
```

我想通过输入的地址进行一些网络请求，然后解析 html 并获取 html 进行嵌入。有更好的主意吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-06T18:02:20.750

对此有一个 JQuery 解决方案，即用户在文本框中输入地址，地址在地图中动态加载。

在此处尝试[DEMO](http://zhengjia.github.com/address-suggestion/demo/)并在此处尝试[CODE](https://github.com/zhengjia/address-suggestion/blob/master/demo)

```
$(document).ready(function(){
    var map = $('#map').acts_as_map_container();
    // params:
    // container is required
    // suggestion is the element which will contain the suggested address, default to #suggested
    // delay is the delay time for requesting google map api, default to 500ms
    var address = $('#address').acts_as_address({
        container: map,
        suggestion: '#suggestion',
        delay : 500
    });

}) 
```

# python - Python：在列表中拆分字符串的优雅且节省代码的方法

> ID：13749324
> 
> 赞同：2
> 
> 时间：2012-12-06T17:40:18.213
> 
> 标签：python, list, optimization, coding-style

我有一个字符串：

```
mydata
'POINT (558750.3267372231900000 6361788.0628051758000000)' 
```

我希望有一种代码保存方式将列表数字转换为

```
(g, (x,y)) 
```

在哪里：

```
g = geometry (POINT)
x = coordinates x
y = coordinates y 
```

我在用

```
mydata.split(" ")
['POINT', '(558750.3267372231900000', '6361788.0628051758000000)'] 
```

但在那之后我需要使用几行代码来获取 x 和 y

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-06T17:47:31.307

一步步：

```
>>> s = 'POINT (558750.3267372231900000 6361788.0628051758000000)'
>>> word, points = s.split(None, 1)
>>> word
'POINT'
>>> points
'(558750.3267372231900000 6361788.0628051758000000)'
>>> points = points.strip('()').split()
>>> points
['558750.3267372231900000', '6361788.0628051758000000']
>>> x, y = (float(i) for i in points)
>>> x
558750.3267372232
>>> y
6361788.062805176 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-12-06T17:50:04.347

正则表达式可以省去你在这里打字的时间：

```
In [1]: import re

In [2]: def nice_tuple(s):                                                    
    g, x, y, _ = re.split(' ?[()]?', s)
    return g, tuple(map(float, (x, y)))
   ...: 

In [3]: nice_tuple('POINT (558750.3267372231900000 6361788.0628051758000000)')
Out[3]: ('POINT', (558750.3267372232, 6361788.062805176)) 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-12-06T17:52:49.727

如果您的数据始终采用该精确格式，则很容易：

```
>>> def parse_data(d):
    geom, xs, ys = d.split()
    return (geom, (float(xs[1:]), float(ys[:-1])))

>>> mydata
'POINT (558750.3267372231900000 6361788.0628051758000000)'
>>> parse_data(mydata)
('POINT', (558750.32673722319, 6361788.0628051758)) 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-12-06T18:00:12.953

我会使用`.translate`和`.split`：

```
In [126]: mydata = 'POINT (558750.3267372231900000 6361788.0628051758000000)'

In [127]: mysplitdata = mydata.translate(None, '()').split()

In [128]: mysplitdata
Out[128]: ['POINT', '558750.3267372231900000', '6361788.0628051758000000']

In [129]: g,x,y = mysplitdata[0],float(mysplitdata[1]),float(mysplitdata[2])

In [130]: outdata = (g, (x,y))

In [131]: outdata
Out[131]: ('POINT', (558750.32673722319, 6361788.0628051758)) 
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-12-06T18:02:17.677

最近我在 python 中创建了一个应用程序，我做了几乎同样的事情。这是我为解析 wkt 文件而创建的一个类。

[关联](http://pastie.org/5489795)

希望你觉得它有用。有关用法，请参见第 136 行。您也可以使用此类来读取 Linestrings 和 Multilinestrings。

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2012-12-06T17:45:11.850

```
v = mydata.split()
g = v[0]
x = float(v[1].strip('('))
y = float(v[2].strip(')'))
(g, (x, y)) 
```

节省代码是的，优雅不是那么多

* * *

## 回答 #7

> 赞同：1
> 
> 时间：2012-12-06T17:46:13.770

使用`regex`：

```
In [59]: g,[x,y]=re.findall(r"[A-Za-z]+",mydata)[0],
                       [float(x) for x in re.findall(r"[\d+.]+",mydata)]

In [60]: g
Out[60]: 'POINT'

In [61]: x
Out[61]: 558750.3267372232

In [62]: y
Out[62]: 6361788.062805176 
```

使用`str.strip()`和`str.split()`：

```
In [35]: mydata='POINT (558750.3267372231900000 6361788.0628051758000000)'

In [39]: data=mydata.split(None,1)

In [40]: data
Out[40]: ['POINT', '(558750.3267372231900000 6361788.0628051758000000)']

In [41]: g,[x,y]=data[0], map(lambda x: float(x.strip("()")), data[1].split())

In [42]: g,x,y
Out[42]: ('POINT', 558750.3267372232, 6361788.062805176) 
```

* * *

## 回答 #8

> 赞同：1
> 
> 时间：2012-12-06T17:56:30.220

```
found = re.match(r'([a-zA-Z]*) \(([0-9\.]*) ([0-9\.]*)\)', mydata)
found.group(1), (float(found.group(2)), float(found.group(3))) 
```

那可能是最短的，不知道优雅。

# android - 为所有应用使用 1 个 admob 发布者 ID 或为每个应用使用多个 ID 哪个更好？

> ID：13749329
> 
> 赞同：1
> 
> 时间：2012-12-06T17:40:48.407
> 
> 标签：android, admob

我是和 android 开发人员，但我不知道 admob 如何根据展示次数计算收入和点击价格，所以最好只使用 1 个 admob ID Publisher 并将其用于所有应用程序，此 ID 的展示次数如此之多，或为每个应用程序使用应用不同的ID？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-06T18:14:01.763

为每个应用程序设置不同的 ID 有助于了解每个应用程序在请求和 eCPM 方面的表现。这可以让人们更好地了解他们的市场并根据需要调整应用程序。

# apache - htacess 重写规则适用于 IE，但不适用于 Firefox 和 chrome

> ID：13749335
> 
> 赞同：0
> 
> 时间：2012-12-06T17:41:09.920
> 
> 标签：apache

我在 apache 上有这个重写规则，并且可以完美地重定向到我想要在 ie 上但不是在 firefox 或 chrome 上的站点。我想知道为什么在这些浏览器上表现不同？？！！

这是我的 apache 重写配置

```
 RewriteEngine On
  RewriteLog "/opt/apache/logs/rewrite.log"
  RewriteLogLevel 1
  RewriteCond     %{HTTPS} !=on
  RewriteRule ^(.*)$ https://server/index.php [L,R] 
```

所以 apache 规则正确地重定向到“https://server/index.php”，但在 Firefox/chrome 上停止在“https://server”。我的 apache 重写配置有什么错误吗？

谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-07T17:44:18.057

清理 Firefox/chrome 缓存并重试。可能是有关浏览器的旧信息与新重定向冲突。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-07T03:09:15.037

**浏览器不重定向也不做重定向。Web 服务器会进行重定向。** 浏览器与它无关，无论是 Firefox、IE、Safari 还是其他任何东西。

# java - 将双精度值截断到小数点后 6 位

> ID：13749336
> 
> 赞同：1
> 
> 时间：2012-12-06T17:41:10.097
> 
> 标签：java, math, truncate

我正在解决一个需要截断输出的问题，令我惊讶的是，我无法找到一种方法来截断 java 中的数字。

输出需要是一个数字，后跟 6 个小数位。

我想要的是 `double truncate(double number,int places)`和输出是 `truncate(14/3.0) = 4.666666`.

但我得到的是

```
public static double round(double value, int places) {
    if (places < 0) throw new IllegalArgumentException();

    long factor = (long) Math.pow(10, places);
    value = value * factor;
    long tmp = Math.round(value);
    return (double) tmp / factor;
  }
// rounds( 14/3.0 , 6 ) = 4.666667 
```

随着`String.format`我得到

```
String.format("%.6f", 14/3.0) = 4.666667 
```

我还尝试了在 stackoverflow 上找到的解决方案，该解决方案建议使用 BigDecimal，并且给出了完全相同的答案。

`NumberFormat`似乎也以同样的方式工作

```
java.text.NumberFormat f = java.text.NumberFormat.getNumberInstance();
f.setMinimumFractionDigits(6);
System.out.println(f.format(14/3.0)); // 4.666667 
```

是否有内置方法可以做到这一点，或者我是否需要使用 BigInteger 之类的方法编写自己的方法？有什么我做错了吗？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-12-06T17:42:27.407

这是因为您不是截断而是四舍五入：

```
long tmp = Math.round(value); 
```

如果您使用演员表，它应该可以工作：

```
long tmp = (long) value; 
```

因此，下面的代码`4.666666`按您的预期输出：

```
public static void main(String[] args) throws Exception {
    System.out.println(truncate(14/3.0, 6));
}

public static double truncate(double value, int places) {
    if (places < 0) {
        throw new IllegalArgumentException();
    }

    long factor = (long) Math.pow(10, places);
    value = value * factor;
    long tmp = (long) value;
    return (double) tmp / factor;
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-07T00:50:25.460

双打没有小数位，所以你不能截断到任何特定的数字。他们有二进制的地方。如果您需要特定的十进制表示，请使用`DecimalFormat`或`BigDecimal.`

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2020-04-24T06:04:54.620

以下代码帮助我限制双精度值的小数位数（截断）。

```
public static Double truncate (double valueToTruncate, int numberOfDecimalPlaces) {

if (valueToTruncate > 0) {
    return new BigDecimal(String.valueOf(valueToTruncate)).setScale(numberOfDecimalPlaces, BigDecimal.ROUND_FLOOR).doubleValue();
} else {
    return new BigDecimal(String.valueOf(valueToTruncate)).setScale(numberOfDecimalPlaces, BigDecimal.ROUND_CEILING).doubleValue();
} 
```

}

希望这可以帮助某人:)

# c# - C# 引用类型问题

> ID：13749343
> 
> 赞同：3
> 
> 时间：2012-12-06T17:41:18.773
> 
> 标签：c#, pass-by-reference

```
 public class TreeNode
{
    public TreeNode Left;
    public TreeNode Right;
    public int Data { get; set; }

    public TreeNode(int data)
    {
        Left = null;
        Right = null;
        Data = data;
    }
}

   public class BinarySearchTree
{
    private TreeNode _root;

    public BinarySearchTree()
    {
        _root = null;
    }

    public void Insert(int data)
    {
        TreeNode tempNode = null;

        Insert(_root, tempNode);
    } 

    private void Insert(TreeNode treeNode, TreeNode newNode)
    {
        newNode = new TreeNode(3);
        treeNode = new TreeNode(4);
   } 
```

在这个例子中，public void`Insert(int data)`方法基本上只是调用了私有方法，我在方法的末尾设置了一个断点`public void Insert(int data)`。

并且通知`_root`仍然为空，并且`tempNode`是4。我不明白为什么？谁能解释一下？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-06T17:45:30.697

通过引用传递类使用`ref`关键字：

```
private void Insert(ref TreeNode treeNode, ref TreeNode newNode)
{
    newNode = new TreeNode(3);
    treeNode = new TreeNode(4);
} 
```

在您的原始方法中，仅传递对类的引用的**副本**，而不是通过引用传递。因此，如果您这样做`new`，您只是替换类引用的本地副本，但调用方法仍保留原始引用值。因此，新创建的值不会返回给调用者。

改变你的`Insert(data)`方法（没有`ref`关键字编译器会给你一个错误）：

```
public void Insert(int data)
{
    TreeNode tempNode = null;
    Insert(ref _root, ref tempNode);
} 
```

这实际上是编译器的要求，只是为了确保调用者知道在方法调用之后传递的对象可能被其他对象替换。

您可能还想了解`out`关键字。虽然`ref`参数应该在调用之前初始化，但参数应该`out`在方法内部进行初始化。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-06T17:45:43.987

您正在传递引用类型，但它实际上传递了引用的副本。更新该副本不会更新原始版本。

要解决此问题，请让方法返回新值。或者，您可以重新编写函数以使用 out 参数。

```
private void Insert(out TreeNode treeNode, out TreeNode newNode)
{
    newNode = new TreeNode(3);
    treeNode = new TreeNode(4);
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-06T17:46:15.577

查看参数的`out`, 和`ref`修饰符。例如，您可以

```
private void Insert(ref TreeNode treeNode, TreeNode newNode) 
```

# django - 根据需要具有更多字段的 Django 表单

> ID：13749347
> 
> 赞同：0
> 
> 时间：2012-12-06T17:41:22.750
> 
> 标签：django, django-forms

有没有办法指定一个 django 表单，以便用户可以向其中添加更多字段。

例如，用户需要列出 4 个名称，但页面上最初只有三个字段。然后，用户将能够按下按钮并为第四个名称添加另一个字段。

我目前正在使用 javascript 和 httprequest 执行此操作。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-06T17:53:42.203

你需要这样的东西：[django dynamic formsets](http://code.google.com/p/django-dynamic-formset/)

定义表单集，并根据需要使用 jquery 显示/隐藏它们

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-06T21:54:57.187

您可以按照建议使用简单的 javascript 解决此问题。

**但请记住，您的新字段（所有未在表单类中预定义的字段）将不会在 Django 验证中使用。**

因此，如果您打算将这些数据放入您的数据库中，您必须处理您自己的内容的清理和转义。

# intellij-idea - Intellij 12 不再支持 GWT 运行配置上的 Maven 资源过滤

> ID：13749349
> 
> 赞同：2
> 
> 时间：2012-12-06T17:41:37.697
> 
> 标签：intellij-idea

我的 pom.xml 中有以下内容...

```
<build>
    <resources>
        <resource>
            <directory>src/main/resources</directory>
            <filtering>true</filtering>
        </resource>
    </resources> 
```

然后在我的属性文件中

```
#Workspace Location
rp.config.workspace=${rp.config.workspace} 
```

这允许我在通过 Maven 构建时切换 Maven 配置文件，并将该环境的正确设置注入构建中。Intellij 10 和 11 在运行 GWT/Jetty/Tomcat/etc 类型的运行配置时都将遵循这种资源过滤机制，而无需指定目标“进程资源”首先在 Maven 中运行，这非常慢。

现在有了 Intellij 的新 v12，${rp.config.workspace} 之类的属性不会被所选 Maven 配置文件的标签中指定的正确值替代。

还有其他人遇到这个吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-06T18:13:30.093

将错误提交给 YouTrack，请[在那里观看/投票](http://youtrack.jetbrains.com/issue/IDEA-96854)。

# c++ - 模板和 g++ 4.7

> ID：13749350
> 
> 赞同：1
> 
> 时间：2012-12-06T17:41:39.337
> 
> 标签：c++, templates, g++, gcc4.7

我有这个代码

```
namespace MSL{

template <typename T> class TListNode;
template <typename T> class TList;
... 
```

和

```
template <typename T> 
int TList<T>::add(T v) {
TListNode<T>  *pn;  
pn = new TListNode<T>;
... 
```

和

```
class TMergeNode {
 public:

 inline      TMergeNode(int cluster1=-1, int cluster2=-1, TCMData mergeVal=0);
 inline      TMergeNode(TMergeNode &b);                // copy constructor
 ... 
```

它使用旧版本的 g++ 编译正常，但现在使用 4.7 版我收到以下错误：

```
./msl/MSL_List_Template.h: In instantiation of ‘int MSL::TList<T>::add(T) [with T = TMergeNode]’:
clustermerges.cpp:282:33:   required from here
./msl/MSL_List_Template.h:616:23: error: no matching function for call to ‘TMergeNode::TMergeNode(TMergeNode)’
./msl/MSL_List_Template.h:616:23: note: candidates are:
In file included from main.cpp:78:0:
clustermerges.cpp:70:8: note: TMergeNode::TMergeNode(TMergeNode&)
clustermerges.cpp:70:8: note:   no known conversion for argument 1 from ‘TMergeNode’ to ‘TMergeNode&’
clustermerges.cpp:68:8: note: TMergeNode::TMergeNode(int, int, MSL::TCMData)
clustermerges.cpp:68:8: note:   no known conversion for argument 1 from ‘TMergeNode’ to ‘int’ 
```

任何想法将不胜感激

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-06T18:22:57.993

在您的代码中，您尝试将临时绑定到非常量引用。这是不允许的。

复制构造函数的正确签名是：

```
class TMergeNode {
public:
 inline      TMergeNode(const TMergeNode &b);                // copy constructor
 //                     ^^^^^ 
```

# ibm-mq - 如何在 Websphere MQ 中收到消息后立即调用 OSB 提供的 Web 服务？

> ID：13749351
> 
> 赞同：1
> 
> 时间：2012-12-06T17:41:43.277
> 
> 标签：ibm-mq, oracle-service-bus

我正在使用 IBM Websphere 消息队列。我希望在消息队列收到新消息后立即调用 Oracle Service Bus 提供的 Web 服务。我该如何配置？

TIA,

阿潘乔杜里

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-15T21:28:33.813

创建 OSB 代理服务时，使用 MQ 作为协议并提供 MQ 详细信息。每当有消息推送到队列中时，OSB 代理服务就会被调用。

# c# - C# Timer 滴答声加速，可能是由于使用不正确

> ID：13749353
> 
> 赞同：1
> 
> 时间：2012-12-06T17:41:46.667
> 
> 标签：c#, visual-studio-2010, timer

*（注意：我知道有一个相关的 Q+A，但它与计时器结束有关，而我的与滴答声有关）*

此代码用于为在 2 点之间移动的矩形设置动画。目前，第一个动作是完美的，但之后每次调用动画都会变得越来越快。

我认为这是由于我对如何在每个刻度上调用矩形移动存在误解。

任何帮助将不胜感激！

本节启动计时器：

```
 if (floorNo == 2)
        {
            timerDown.Tick += new EventHandler(timer_LiftDown);
            timerDown.Interval = 10;
            timerDown.Enabled = true;
            timerDown.Start();
        } 
```

在每个刻度上调用此代码（对吗？）：

```
 void timer_LiftDown(object sender, EventArgs e)
    {
        rectangle1.Location = new Point(192, rectangle1.Location.Y + 2);
        if (rectangle1.Location.Y >= 196)
        {
            timerDown.Stop();
        }
    } 
```

我已经删除了一些不相关的代码（例如用当前状态更新文本框，更改 floorNo 变量等）。

谢谢你。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-06T17:44:50.070

您正在添加一个事件处理程序，但没有删除它。因此，每次调用动画时，都会添加另一个处理程序。因此，每个滴答都会被处理两次并导致动画加速。

您需要添加

```
timerDown.Tick -= new EventHandler(Timer_LiftDown); 
```

在您的代码中的某个时刻。不幸的是，从您提供的代码段中，尚不清楚可以在哪里安全地添加它。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-12-06T17:49:24.457

我建议不要每次都订阅和取消订阅事件，而是建议设置一次计时器，然后只调用它的启动/停止。

```
//Somewhere in a load event...
timerDown.Tick += new EventHandler(timer_LiftDown);
timerDown.Interval = 10;
timerDown.Enabled = true;

//More code...

if (floorNo == 2)
{
    timerDown.Start();
}

//More code...

void timer_LiftDown(object sender, EventArgs e)
{
    rectangle1.Location = new Point(192, rectangle1.Location.Y + 2);
    if (rectangle1.Location.Y >= 196)
    {
        timerDown.Stop();
    }
} 
```

这样，您只需初始化计时器并设置一次间隔，即可随意启动/停止。

# php - PHP + 在推文中发布链接 - 我需要检查推文的长度吗？

> ID：13749356
> 
> 赞同：0
> 
> 时间：2012-12-06T17:42:00.830
> 
> 标签：php, twitter, hyperlink, tweets

Twitter 使用自己的 URL 缩短器 - “20 chars long link”链接的结果。我很好奇 - 我想用 PHP 分享到 Twitter 上我的一些文章 - 我需要检查文章链接的长度吗？

真实示例 - 我的文章标题有 120 个字符。我的文章的链接有 25 个字符。推文的限制是 140 个字符。URL 缩短器将每个链接转换为 20 个字符。

在这种情况下，我是否需要解决推文的长度，我可以相信**推文中的每个链接 = 20 个字符**吗？

或者 Twitter 的 URL 缩短器仅在有人手动键入推文并且 URL 缩短器在他们的 API 中不起作用时才起作用？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-09-06T07:53:03.103

如果您包含链接 (https)，​​Twitter 现在将推文限制为 117 个字符，剩余 23 个字符将 url (https) 包装为 t.co 格式。实际上，在这里你得到 117 个字符的 https 链接和 118 个字符的非 https 链接。

来源链接：[http ://www.geek.com/news/twitter-now-limits-tweets-to-117-characters-if-you-include-a-link-1540340/](http://www.geek.com/news/twitter-now-limits-tweets-to-117-characters-if-you-include-a-link-1540340/)

# ruby-on-rails - 为什么 unicorn+mysql2 gem 不显示多工人产品设置的最新版本的模型数据？

> ID：13749358
> 
> 赞同：0
> 
> 时间：2012-12-06T17:42:00.310
> 
> 标签：ruby-on-rails, eventmachine, rainbows

我的模型似乎没有正确更新。

*   独角兽彩虹！在事件机器上
*   mysql2 宝石

我可以`production`在 8 个工作人员上以 1000 rpm 的速度在环境中重现。如果我`my_model`在 Rails 控制台中更新（调用`reload!`），一切正常。在本地我无法复制它。

从控制器：

```
# params[:my_model] = {:name => "new name"} 
def update
  @my_model = MyModel.first # {:name => "old name"}
  Rails.logger.info @my_model.name
  @my_model.update_attributes(params[:my_model])
  redirect_to :action => :index
end 
```

日志：

```
new name
old name
old name
old name
new name 
```

我错了什么？感谢提前！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-07T12:37:31.167

看起来根本原因是当服务器处于高负载状态时，操作之间的 sql 缓存没有清除，因为工作进程没有执行操作。
我在没有负载的服务器上进行了测试-没有重现问题。以下来自 ApplicationController 的代码解决了这个问题，但这个解决方案有点难看：

```
 before_filter do 
    MyModel.current.connection.clear_query_cache
  end 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-06T18:26:51.083

模型中的数据是否被某些工作人员缓存，以使数据在一个工作人员中*看起来*是**新名称**，而在另一个工作人员中显示为**旧名称**？

添加每个工作的 ID 并将其输出到您的日志可能会有所帮助。换句话说，当您的工作人员启动时，它应该为自己分配一个与其他工作人员不同的 ID（工作人员的 PID 将是一个很好的候选者）。通过这种方式，您可以查看是否有一个或多个工人一直有问题，是否是所有工人，或者有时只是一些工人。如果这被证明是一个缓存问题，那么您可能只需要等待对该对象的所有工作人员的捕获无效，并且它最终会为所有工作人员显示正确的更新值。

如果你不能在本地复现，是不是因为你在本地开发时只使用了一个 web 服务器实例（一个 worker）？

此外，请检查您`production`的日志并查看该词`CACHE`是否出现在显示**旧名称**的实例中。

# ios - NSManagedObjectContext 的单例？死板的？依赖注入？

> ID：13749361
> 
> 赞同：1
> 
> 时间：2012-12-06T17:42:08.477
> 
> 标签：ios, core-data, singleton

我有一个关于应用程序刚性的问题，因为苹果在[文档](http://developer.apple.com/library/ios/#documentation/DataManagement/Conceptual/CoreDataSnippets/Articles/stack.html)中说

> 这使得应用程序架构僵化

我可以同意。每个 uiviewcontroller 都应该......不依赖于当前的应用程序流，但 UIApplication 委托相当恒定，您始终可以调用该委托。

我听说的关于 nsmanagedobjectcontext 的第二个论点是依赖注入。每个对象都应该只有真正需要的对象，但是如果你必须通过几个不需要它们的控制器传递 managedobjectcontext 但它们被放置在所需的控制器和源控制器之间，这实际上不是依赖注入，我想更好的解决方案是单身人士。

你怎么看？也许您对通过控制器传递 managedobjectcontext 有其他想法？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-07T10:01:02.607

There is nothing wrong in principle with a singleton providing the managed object context. If you are going to use just one context in your app, it really does not matter.

However, if you are doing background fetches and saves, and if you use the core data concurrency methods with parent-child contexts, this approach quickly becomes problematic.

# java - 从 jaxb 类在内存模式中生成

> ID：13749362
> 
> 赞同：2
> 
> 时间：2012-12-06T17:42:10.757
> 
> 标签：java, validation, jaxb

我继承了一堆可怕的 XSD。我无法更改最终架构，但如有必要，我可以自己控制文件。

我有两个 XSD 文件（好吧，还有很多，但这是一个例子）（另外，我意识到我拼错了地址。客户现在正在使用它。我的错）

架构1：

```
<xsd:schema xmlns="http://Schema1" targetNamespace="http://Schema1" xmlns:s2="http://Schema2" xmlns:xsd="http://www.w3.org/2001/XMLSchema" elementFormDefault="qualified">
    <xsd:import namespace="http://Schema2" schemaLocation="Schema2.xsd.xsd"/>
    <xsd:element name="Adderess">
        <xsd:complexType>
            <xsd:sequence>
                <xsd:element ref="s2:StreetAddress" minOccurs="0"/>
            </xsd:sequence>
        </xsd:complexType>
    </xsd:element>
</xsd:schema> 
```

模式 2：

```
<xsd:schema xmlns="http://Schema2" targetNamespace="http://Schema2" xmlns:xsd="http://www.w3.org/2001/XMLSchema" elementFormDefault="qualified">
    <xsd:element name="StreetAddress" type="xsd:string" />
</xsd:schema> 
```

使用 JAXB RI，我在我的 java 类中得到了这个：

```
public static class Adderess
        implements Serializable
    {

        @XmlElement(name = "StreetAddress", namespace = "http://Schema2")
        protected String streetAddress;
 } 
```

在运行时，为了验证 XML 客户端发送，我使用：

```
final List<ByteArrayOutputStream> outs = new ArrayList<ByteArrayOutputStream>();

    try
    {
        jc.generateSchema(new SchemaOutputResolver(){
            @Override public Result createOutput(String namespaceUri, String suggestedFileName) throws IOException
            {
                // Stream the schema for this specified namespace

                ByteArrayOutputStream out = new ByteArrayOutputStream();
                outs.add(out);
                StreamResult streamResult = new StreamResult(out);
                streamResult.setSystemId("");
                return streamResult;                }

        });
    } 
```

但是.....产生这个：

```
<?xml version="1.0" encoding="UTF-8" standalone="yes"?>
<xs:schema version="1.0" targetNamespace="http://Schema1" xmlns:ns1="http://Schema2" xmlns:tns="http://Schema1" xmlns:xs="http://www.w3.org/2001/XMLSchema">
    <xs:import namespace="http://Schema2"/>
    <xs:element name="InputData" form="qualified">
        <xs:complexType>
            <xs:sequence>
                <xs:element name="StreetAddress" type="xs:string" form="qualified" minOccurs="0"/>
            <xs:sequence>
        <xs:complexType>
    <xs:element>
</xs:schema> 
```

关键是，当我从另一个命名空间引用复杂类型时，它在内存模式生成中运行良好。当我引用一个原始类型的元素（例如，在本例中为字符串）时，内存中生成的模式似乎没有得到它在另一个命名空间中，因此我的 XML 验证失败。

我可以做一些杂乱无章的事情，比如把它放在 Schema2 中：

```
<xsd:element name="StreetAddress">
    <xsd:complexType>
        <xsd:simpleContent>
            <xsd:extension base="xsd:string"></xsd:extension>
        </xsd:simpleContent>    
    </xsd:complexType>
</xsd:element> 
```

这会奏效，但我有很多这样的情况，这并不是一个很好的解决方案。

拜托，任何人，有什么想法吗？

# actionscript-3 - Flash Player + Google Chrome - 辅助功能键盘控制问题

> ID：13749363
> 
> 赞同：1
> 
> 时间：2012-12-06T17:42:11.427
> 
> 标签：actionscript-3, google-chrome, accessibility, flash

为了遵守一些辅助功能指南，我的最新项目（基于 AS3 Flash 的项目）必须同时具有键盘和鼠标控制。对于键盘控制，我创建了一个多框系统，允许用户在每个框之间切换以控制游戏中的角色。虽然您可以使用 TAB 键来执行此操作，但我还希望用户使用向上/向下箭头键。

我已经实现了这个系统并在所有现代浏览器上进行了测试，但是在 Google Chrome 的最新版本 (23.0.1271.95) 中，我发现虽然通过 TAB 键可以正常工作，但箭头键控制却不能。

向下键通过几个对象起作用，但随后重置回第一个对象。向上键什么都不做。

这是一个很奇怪的问题，有没有人见过类似的东西？我不认为我可以通过 AS3 做任何事情，但也许我可以通过我不知道的 HTML 设置像 flash 对象参数（无缝标签等）之类的东西？

我有一种不好的感觉，这是 Google Chrome 的 Flash 播放器的问题，希望不会！

提前致谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-06T17:51:54.403

每当有人报告仅在 Chrome 中发生的 Flash 问题时，我立即认为这是 Chrome 默认开始使用的有缺陷的“Pepper Flash”播放器。

Pepper Flash 是 Adob​​e/Google 为使 Flash 插件在 Linux 平台上保持活力而做出的努力。但是，默认情况下它也用于其他操作系统。它是新的，显然有很多问题。如果这是另一个，我不会感到惊讶。

要确认，请前往此处禁用 Pepper Flash（查找名称/路径中包含“pepper”的 Flash 插件）：

铬：//插件

您可能安装了常规的 Flash 插件，因此仅禁用 Pepper Flash 就足够了。但是，Chrome 可能会自行更新并在某个时候重新启用它。如果您没有常规的“netscape 风格”Flash 插件，您可以从 Adob​​e 下载它。

# c++ - C2664：在 64 位编译时

> ID：13749365
> 
> 赞同：0
> 
> 时间：2012-12-06T17:42:14.243
> 
> 标签：c++, visual-studio-2008, visual-c++, 64-bit

嗨，我有一个使用 vs2008 编译的 32 位源代码可以正常工作。现在我正在尝试以 64 位编译相同的源代码。对于这段代码：

```
if(EnumResourceLanguages(gHResources, RT_STRING, MAKEINTRESOURCE(1),EnumLangProc, 0) && (0 < gNumSupportedLangs)) 
```

我收到以下错误：

```
Error: error C2664: 'EnumResourceLanguagesA' : cannot convert parameter 4 from 'BOOL (__cdecl *)(HMODULE,LPCTSTR,LPCTSTR,WORD,LONG)' to 'ENUMRESLANGPROCA' 
```

任何人都可以帮助我如何摆脱它？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-06T17:48:36.787

您的回调使用`__cdecl`调用约定。相反，它需要使用`__stdcall`调用约定。适当的函数原型是：

```
BOOL CALLBACK EnumLangProc(HMODULE, LPCTSTR, LPCTSTR, WORD, LONG_PTR); 
```

`CALLBACK`本质上是`#define`d `__stdcall`。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-12-06T17:56:35.337

回调的第四个参数定义为`LONG`. `EnumResLangProc`期望作为第四`LONG_PTR`个参数。这是代码中的一个错误，但在 32 位`LONG`中的大小与`LONG_PTR`（4 字节）相同，因此可以正常编译。在 64 位`LONG_PTR`中是 8 个字节长，所以你会得到一个错误。将您的回调签名更改为接受`LONG_PTR`作为第 4 个参数，它将为 32 位和 64 位编译。

# javascript - 如果选中的复选框超过 3 个，如何取消选中一个复选框

> ID：13749368
> 
> 赞同：2
> 
> 时间：2012-12-06T17:42:27.337
> 
> 标签：javascript, checkbox, alert

我有这个表格：

```
<form name ='vote' action='' method='POST'>
    while ($row = mysql_fetch_array($result)){
       <input type='checkbox' name='things[]' value='".$row['name_song']."'
              name='send' onClick='anyCheck(this.form)'>
    } 
    <input type='submit' value='test' name='send'></form> 
```

我必须做些什么才能使人们可以投票的最大次数（ **t ）成为整数？**我希望将值传递给 anyCheck 函数，例如 $maxvotes。

```
<script type="text/javascript"> 
   function anyCheck(f, e) {
      e = e || window.event;
      var t = 0;
      var c = f['things[]'];
      for (var i = 0; i < c.length; i++) {
         c[i].checked ? t++ : null;
      }
      if (t == 3) {
         alert("Daugiausiai galite balsuoti už triks kūrinius")
         var targ = event.target || event.srcElement;
         targ.checked = false;
      }
   }
</script> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-06T17:52:24.670

由于`anyCheck`是从事件处理程序调用的，因此将`event`对象传递给`anyCheck()`函数，获取事件的目标，并将其`.checked`属性设置为`false`.

```
<input ...  onClick='anyCheck(this.form, event)'> 
```

* * *

```
function anyCheck(f, e) {

    var t = 0;
    var c = f['things[]'];
    for (var i = 0; i < c.length; i++) {
        c[i].checked ? t++ : null;
    }
    if (t == 3) {
        alert("You can choose a maximum of 2" + name + "haha");

        (event.target || event.srcElement).checked = false;
    }
} 
```

* * *

或者由于处理程序是直接绑定的，您可以`this`改为传递。

```
<input ...  onClick='anyCheck(this)'> 
```

* * *

```
function anyCheck(box) {

    var t = 0;
    var c = box.form['things[]'];
    for (var i = 0; i < c.length; i++) {
        c[i].checked ? t++ : null;
    }
    if (t == 3) {
        alert("You can choose a maximum of 2" + name + "haha");

        box.checked = false;
    }
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-06T17:57:48.300

此解决方案需要 jQuery，尽管您可以将其重新设计为不需要 jQuery 选择器：

```
<input type="checkbox">
<input type="checkbox">
<input type="checkbox">
<input type="checkbox">

<script type="text/javascript">
  $(document).on("click", "input[type=checkbox]", function(e) {
    var num_checked = $("input[type=checkbox]:checked").length;
    if (num_checked > 3) {
      alert("sorry, you have already selected 3 checkboxes!");        
      $(e.target).prop('checked', false);
    }
  });
</script>
​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​ 
```

作为一个jsfiddle：http: [//jsfiddle.net/RF5Ls/](http://jsfiddle.net/RF5Ls/)

# visual-studio - 使用 MSVS 2012 卸载项目非常慢

> ID：13749369
> 
> 赞同：2
> 
> 时间：2012-12-06T17:42:44.470
> 
> 标签：visual-studio, visual-studio-2012, windows-7, ide

我在 Win 7 上使用 MSVS 2012。我有一个包含约 270 个项目的解决方案。当我想卸载一些时，这个过程**非常**缓慢。所以这是我想重新加载一些的时候。有人知道如何解决这个问题吗？

多米尼克

# java - 扩展的 OverlayItem 导致程序因 NullPointerException 而崩溃

> ID：13749374
> 
> 赞同：1
> 
> 时间：2012-12-06T17:43:05.127
> 
> 标签：java, android, google-maps, nullpointerexception, itemizedoverlay

我有一个扩展 OverlayItem 以包含更多字段的类。我已经使用 PointOfInterest 类更改了程序中所有出现的 OverlayItem。

当我尝试运行适用于 OverlayItem 的同一程序时，在我的 ItemizedOverlay 类中调用**populate()后，它会因 nullpointerException 而崩溃。**日志打印出正确的值。这是它崩溃的方法。

```
protected void addOverlay(PointOfInterest pointOfInterest) {

    mapOverlays.add(pointOfInterest);
    setLastFocusedIndex(-1);
    Log.d("Add Overlay", pointOfInterest.getDescription());
    populate(); <-- Crashes here
} 
```

和错误

```
12-06 17:29:03.610: E/AndroidRuntime(1822): java.lang.NullPointerException
12-06 17:29:03.610: E/AndroidRuntime(1822):     at com.google.android.maps.ItemizedOverlay.populate(ItemizedOverlay.java:312)
12-06 17:29:03.610: E/AndroidRuntime(1822):     at com.example.mapproject.OurItemizedOverlay.addOverlay(OurItemizedOverlay.java:108)
12-06 17:29:03.610: E/AndroidRuntime(1822):     at com.example.mapproject.MainActivity.addPointToMap(MainActivity.java:211) 
```

有任何想法吗？谢谢 ！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-06T20:13:27.837

弄清楚了，我没有提到传递给 addOverlay 方法的 PointOfInterest 是从 JSON 字符串创建的，因此包含的构造函数

```
super(point, title, snippet) 
```

从未被调用。

我将此添加到似乎已对其进行排序的 addOverlay 方法中！

```
protected void addOverlay(PointOfInterest pointOfInterest) {

    PointOfInterest pointOfInterest2 = new PointOfInterest(pointOfInterest.title,pointOfInterest.title,pointOfInterest.type,pointOfInterest.point,pointOfInterest.privateField);
    mapOverlays.add(pointOfInterest2);
    setLastFocusedIndex(-1);
    Log.d("Add Overlay", pointOfInterest2.getSnippet());
    populate();

} 
```

# ruby-on-rails-3 - 用户仪表板的 ActiveAdmin 还是只有管理员？

> ID：13749377
> 
> 赞同：0
> 
> 时间：2012-12-06T17:43:20.783
> 
> 标签：ruby-on-rails-3, activeadmin

几天前我遇到了 ActiveAdmin，并对现有项目进行了几次测试。ActiveAdmin 真的很棒，我想知道将它用作以下用途是否有意义： - 用户仪表板（小部件方法） - 管理工具 例如，我可以只使用一个模型（用户）并添加角色属性（无或“管理员”）并仅授权管理员角色的管理任务。这会是一个好方法吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-06T21:22:15.020

Luc——我听说过很多关于 ActiveAdmin 的好消息，但我有过几次使用这样的“一体化”解决方案的经验。这里有*很多*代码（即使只是捆绑的 Devise 身份验证对许多人来说也是少数），因此您对代码的编写方式、维护的好坏以及它的灵活性做出了很大的承诺。

我们使用类似的东西来为应用程序获得一个漂亮的后端 UI，并且在最初的几个月里我们进展得很快。随着我们的需求变得越来越复杂，我们开始意识到我们有点被限制了。它没有定期维护，阻碍了我们使用新版本的 ruby​​ 和 Rails 的能力。我们最终分叉了代码，并在几年的过程中发现我们经常与它作斗争。有可能（甚至可能）这个 gem 设计得非常好并且功能强大……但它更像是一个应用程序框架，而不仅仅是一个小 gem。可以肯定的是，情况并非总是如此。

阅读代码并确保您充分理解它以知道它适合您。

# objective-c - 用 Mysql 内容填充 TableView

> ID：13749383
> 
> 赞同：0
> 
> 时间：2012-12-06T17:43:38.710
> 
> 标签：objective-c, xcode, uitableview

我想用我的数据库 mysql 中的一些数据填充我的 tableview！我下载这些数据没有问题！问题是当视图被加载时，我的数据还没有从网上下载，所以我的应用程序崩溃了，因为填充 tableView 的数组仍然是空白的！问题是......如何防止 tableViws 在开始时被填充？

对不起我的英语不好

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-11T09:35:49.733

如果应用程序由于您的数组为空白而崩溃，这可能意味着您尚未分配数组。如果数组只是空的，应该没有任何问题。在 viewDidLoad 方法中，您应该首先分配一个空数组，然后有一个从 mysql 数据库下载数据并将其添加到该数组的方法，一旦完成，只需执行 [self.tableView reloadData]。

# java - logback 在 appender 中打印完整的 MDC

> ID：13749395
> 
> 赞同：11
> 
> 时间：2012-12-06T17:44:56.920
> 
> 标签：java, logback, mdc

在 a 的 appender 中`logback.xml`是否可以执行任何操作，例如遍历 MDC、打印整个 MDC 等？我能想到的最简单的方法基本上是通过 java/groovy 代码（我还没有研究过如何去做），想知道是否有速记。

* * *

## 回答 #1

> 赞同：17
> 
> 时间：2016-02-03T11:34:10.757

如果您正在使用 patternlayout 使用`%mdc`应该工作。例如：

`"%d [%thread] %-5level %logger{36} - %msg %mdc%n"`

* * *

## 回答 #2

> 赞同：-2
> 
> 时间：2012-12-06T19:47:23.873

Logback 在[此处](http://logback.qos.ch/manual/mdc.html)包含有关 MDC 的故障扩展页面。

就我个人而言，我从未处理过它，但手册中的所有代码示例都显示它是通过 Java 代码访问的，事实上，在第 3 段之后，它开始介绍用于访问 MDC 的示例代码，这让我相信它没有简写.

[您可以在此处](http://www.slf4j.org/api/org/slf4j/MDC.html)访问 MDC 类的 Javadoc 。

# ios - 在 UICollectionView 中停止滚动

> ID：13749401
> 
> 赞同：5
> 
> 时间：2012-12-06T17:45:16.653
> 
> 标签：ios

我正在浏览 Apple 的 UICollectionView 示例代码，我想知道是否有人可以向我解释一些事情。他们使用此代码来停止集合视图中的水平滚动：

```
- (CGPoint)targetContentOffsetForProposedContentOffset:(CGPoint)proposedContentOffset withScrollingVelocity:(CGPoint)velocity
{
    CGFloat offsetAdjustment = MAXFLOAT;
    CGFloat horizontalCenter = proposedContentOffset.x + (CGRectGetWidth(self.collectionView.bounds) / 2.0);

    CGRect targetRect = CGRectMake(proposedContentOffset.x, 0.0, self.collectionView.bounds.size.width, self.collectionView.bounds.size.height);
    NSArray* array = [super layoutAttributesForElementsInRect:targetRect];

    for (UICollectionViewLayoutAttributes* layoutAttributes in array) {
        CGFloat itemHorizontalCenter = layoutAttributes.center.x;

        if (ABS(itemHorizontalCenter - horizontalCenter) < ABS(offsetAdjustment)) {
            offsetAdjustment = itemHorizontalCenter - horizontalCenter;
        }
    }    
    return CGPointMake(proposedContentOffset.x + offsetAdjustment, proposedContentOffset.y);
} 
```

我不明白他们想要做什么。我理解的唯一部分是创建 targetRect 并获取 targetRect 中这些元素的属性。但从那里开始，我不知道他们为什么要这么做。这个 offsetAdjustment 是从哪里来的？为什么使用 MAXFLOAT？任何想法将不胜感激。谢谢！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-28T01:15:41.597

代码的目的是调整滚动结束位置，使其“捕捉”到特定的单元格。这是通过`offsetAdjustment`. `MAXFLOAT`只是初始值；循环`offsetAdjustment`内迭代地减小到目标框架中心与最靠近目标框架中间的单元格之间的水平距离。

通过返回这个 x 量的目标帧偏移量，滚动将捕捉到这个最近的单元格。

# proof - 在 Coq 中，将目标从 `S x = S y` 更改为 `x = y` 的策略

> ID：13749403
> 
> 赞同：5
> 
> 时间：2012-12-06T17:45:27.763
> 
> 标签：proof, coq

我想将目标从 更改`S x = S y`为`x = y`。就像`inversion`，但为了目标而不是假设。

这样的策略似乎是合法的，因为当我们有 时`x = y`，我们可以简单地使用`rewrite`and`reflexivity`来证明目标。

目前我总是发现自己`assert (x = y)`用来引入一个新的子目标，但是写 when`x`和`y`are 复杂的表达式很乏味。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-12-08T21:56:11.613

对于任何构造函数或函数，该策略**`apply f_equal.`**都会做你想做的事。

引理`f_equal`表明，对于任何函数`f`，你总是有`x = y -> f x = f y`. 这使您可以将目标从 减少`f x = f y`到`x = y`：

```
Proposition myprop (x y: nat) (H : x = y) : S x = S y.
Proof.
  apply f_equal.  assumption.
Qed. 
```

（该`injection`策略实现了相反的含义——对于某些函数，特别是对于构造函数，`f x = f y -> x = y`.）

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-06T19:26:52.200

你可能想看看这个`injection`策略：[http ://coq.inria.fr/distrib/V8.4/refman/Reference-Manual011.html#@tactic126](http://coq.inria.fr/distrib/V8.4/refman/Reference-Manual011.html#@tactic126)

# visual-c++ - win32 api 中缺少函数 CancelIO() 和 GetOverlappedResult()

> ID：13749407
> 
> 赞同：0
> 
> 时间：2012-12-06T17:45:35.687
> 
> 标签：visual-c++, windows-mobile, smartphone, cancelio

我找不到函数 CancelIo 和 GetOverlappedResult

函数 CancelIO 描述为 CancelIO 函数取消调用线程为指定文件句柄发出的所有挂起的输入和输出 (I/O) 操作。该函数不会取消其他线程为文件句柄发出的 I/O 操作。

函数 GetOverlappedResult 被描述为检索对指定文件、命名管道或通信设备的重叠操作的结果。指定超时间隔或等待可警报线程。

它们没有在 windows.h 中定义。我在哪里可以找到它们的头文件？还是有等效功能可以代替它们？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-06T18:32:33.707

Windows CE 是 Windows Mobile 下的基本操作系统，不支持重叠 I/O。您必须重构代码以消除其使用。

# php - 在 Lithium 0.11 和 MongoDB 中读取/删除相关数据/实体

> ID：13749412
> 
> 赞同：2
> 
> 时间：2012-12-06T17:45:50.960
> 
> 标签：php, mongodb, mongodb-php, lithium

我有一个具有 One Itineraries 对象的假期模型。Itineraries 对象有一个 holiday_id 作为外键（由 Li3 约定暗示）和一个对象数组，用于存储行程中每一天的信息。我正在使用 Lithium 0.11 和 MongoDB。

```
 class Holidays extends \lithium\data\Model {

    public $hasOne = array('Itineraries'); 
}

   class Itineraries extends \lithium\data\Model {

    //Relationships
    public $belongsTo = array('Holidays');
} 
```

控制器：

```
 public function saveitinerary()
{   

    $holidays_id = $this->request->data['holidays_id'];
    $holiday = Holidays::find($holidays_id, array('with' => 'Itineraries'));

    if($holiday->Itineraries)
    {
        Itineraries::remove($holiday->itinerary._id);   
    }

    //save the new itinerary data with added holidays_id as FK.
    $a = array('holidays_id' => $this->request->data['holidays_id'], 'Itineraries' => $this->request->data['itineraries']);

    $success = false;
    $itinerary = Itineraries::create($a);
    $success = $itinerary->save();
    if(!$success) 
        $log->LogDebug("Could not add itinerary for in db for holiday id:" . $holidays_id );
    return $itinerary->to('array'); 
```

以下是事件的顺序： 1\. Holidays 文档在上一页的 MongoDB 集合中创建并成功保存。_id 被传递到基于主干的前端。创建 Holidays 对象时，Itineraries 对象为空（未添加/保存）。

1.  在随后的页面上，用户选择行程并对控制器 (saveitinerary) 进行 AJAX/JSON 调用，传入holiday_id 和对象数组。每个对象代表假期的每一天。

2.  saveitinerary() 获取 $holiday 中的当前 Holidays 文档，检查它是否有一个与之“相关”的 Itineraries 对象，如果是则删除它并从发布的新 JSON 中添加新行程。

问题：

1.  $holiday->Itineraries 是检查假期模型中“加入”数据的正确方法吗？

1a。Itineraries::remove($holiday->Itineraries._id) 是删除现有 hasOne 相关对象的正确方法吗？

1.  目前，它始终显示为 null，即使在数据库中创建带有 holiday_id 和其他属性的行程对象时也是如此。

2.  似乎几乎没有“创建”关系，因为从未拾取行程，即使文档是在行程集合中创建的（使用 MongoDB shell 验证）

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-09T12:34:38.660

AFAIK 关系没有为 MongoDb 实现，这很有意义，因为它是一个非关系 Db，但是，链接是一种常见的做法，当我研究你的例子时，这就是你想要做的，所以，$hasOne，$ hasMany 和 $belongs 仅适用于 MySQL 等 RDB。

另一方面，Nate Abele 发布了这个[要点](https://gist.github.com/3752547)，介绍了如何建立这种类型的一对一和一对多关系。它可能需要一些调整（DocumentArray 最初与 DocumentSet 合并）但会完成这项工作。

如果您需要有关该片段的帮助，请大声喊叫。

# sql - 从多个聚合函数中选择输出返回多行

> ID：13749413
> 
> 赞同：1
> 
> 时间：2012-12-06T17:46:03.613
> 
> 标签：sql, oracle

在下面的 SQL 语句中，为什么它返回多行计数正确而不是一行？

```
SELECT
  (
    SELECT COUNT(*) FROM schema.table t WHERE t.column IS NULL
  ) AS t_Inserts,
   (
    SELECT COUNT(*) FROM schema.table t WHERE t.column IS NOT NULL
  ) AS t_Updates
FROM
  schema.table t; 
```

注意：我使用的是 Oracle。

```
Output:
t_Inserts,t_Updates
100,200
100,200
100,200
100,200
100,200
... 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-06T17:51:30.743

您发布的`t_Inserts`查询`t_Updates`对`schema.table`. 由于您不使用子句进行查询`schema.table`，`WHERE`因此结果集必须包含尽可能多的行`schema.table`。如果你想要一行，你可以`SELECT`从`dual`表中

```
SELECT
  (
    SELECT COUNT(*) FROM schema.table t WHERE t.column IS NULL
  ) AS t_Inserts,
   (
    SELECT COUNT(*) FROM schema.table t WHERE t.column IS NOT NULL
  ) AS t_Updates
FROM
  dual 
```

但是，做类似的事情可能会更有效

```
SELECT SUM( CASE WHEN t.column IS NULL THEN 1 ELSE 0 END ) t_inserts,
       SUM( CASE WHEN t.column IS NOT NULL THEN 1 ELSE 0 END ) t_updates
  FROM schema.table t; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-06T17:57:13.210

@Justin 的答案 (+1) 的替代方案：

```
SELECT COUNT(*)-COUNT(column) AS t_Inserts, COUNT(column) AS t_Updates
FROM schema.table; 
```

# php - CakePHP 2.2.4：使用组件/帮助器的简单链接帮助

> ID：13749416
> 
> 赞同：0
> 
> 时间：2012-12-06T17:46:06.810
> 
> 标签：php, cakephp, components, helper

我制作了一个帮助器，它返回给定页面的 URL。

帮助文件：

```
 public function PageURL($link = null, $category = null, $page = null){

            if($link){
                $link = strtolower(str_replace(' ', '-', $link));
                $page_url = "http://www.domain.com/$link";
            }
            else{
                $page_url = "http://www.domain.com/$category/$page";
            }
                return $page_url;
        } 
```

（顺便说一句，我可以使用一个变量来代替[http://www.domain.com](http://www.domain.com)，例如 full_site_url、base_url 等吗？）

这是我将参数传递给助手时的视图：

```
<?php echo $this->Html->link($page['Page']['title'], $this->Custom->PageuRL($page['Page']['link'], $page['Category']['directory'], $page['Page']['id'])); ?> 
```

每次都要写这么多。

我创建了一个组件来获取我想要访问的页面的 URL。它目前在 AppController 上实现，因此我可以很好地显示当前页面的 URL，但我想在视图中或帮助器中使用它来显示另一个页面的 URL。

```
public function TestPageURL($page = null) {

App::uses('ClassRegistry', 'Utility');
$pagesModel = ClassRegistry::init('Page');
$matchedpage = $pagesModel->find('first', array(
    'conditions' => array('Page.id' => $page), 'recursive' => '0'
));

        if($matchedpage['Page']['link']){
            $pagelink = strtolower(str_replace(' ', '-', $matchedpage['Page']['link']));
            $page_url = "http://www.domain.com/" . $pagelink;
        }
        else{
            $page_url = "http://www.domain.com/" . $matchedpage['Page']['Category']['directory'] . $matchedpage['Page']['id'];

        }

        return $page_url;

} // end page url 
```

这样，我只需要将一个参数传递给组件。

我知道在帮助程序中使用组件是不好的，我不确定在这个版本的 CakePHP 中是否允许这样做，但它会使创建链接变得更加简单。有谁知道我如何在助手中使用此组件或使助手以与我只需要传递页面变量相同的方式行事？

**编辑：**好的，这对我有用，每个人都可能不赞成，因为它涉及在帮助程序中进行查询，但它确实简化了事情。我会看看它是否会减慢我的网站速度。

我仍然愿意接受有关如何改进这一点的建议。

```
 public function TestPageURL($page = null) {

    $pagesModel = ClassRegistry::init('Page');
    $matchedPage = $pagesModel ->find('first', array(
        'conditions' => array('Page.id' => $page), 'recursive' => '1'
    ));

           if($matchedPage ['Page']['link']){
                $link = strtolower(str_replace(' ', '-', $matchedPage['Page']['link']));
                $page_url = "http://www.domain.com/$link";
            }
            else{
                $page_url = "http://www.domain.com/" . $matchedPage['Page']['Category']['directory'] . '/' .$matchedPage['Page']['id'];
            }

            return $page_url;

    } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-06T20:45:52.687

我建议在控制器中获取数据时在模型中创建 URL。顺便说一句，您可以使用[`Router::url`](http://api.cakephp.org/class/router#method-Routerurl).

示例（未经测试）... 型号：

```
public function findPagesIncludingURLs()
{
    $pages = $this->find('all'); // or whatever you want to retreive

    $base = Router::url('/', true);
    foreach($pages as &$page)
    {
        $url = null;
        if($page['Page']['link'])
        {
            $url = strtolower(str_replace(' ', '-', $page['Page']['link']));
        }
        else
        {
            $url = $page['Page']['Category']['directory'] . '/' . $page['Page']['id'];
        }

        $page['Page']['url'] = $base . $url;
    }

    return $pages;
} 
```

控制器：

```
$this->set('pages', $this->Page->findPagesIncludingURLs()); 
```

看法：

```
echo $this->Html->link($page['Page']['title'], $page['Page']['url']); 
```

# php - php类和变量

> ID：13749425
> 
> 赞同：2
> 
> 时间：2012-12-06T17:46:41.973
> 
> 标签：php, class, variables, static, extend

说我有课

```
class person {
    public static function get_pk(){
        return self::$primary_key;
    }
} 
```

和一个扩展类

```
class user extends person {
    protected $primary_key = 'id';
} 
```

我想跑：

```
echo user::get_pk(); // should echo id 
```

每当我运行它时，它自然会失败，因为 $primary_key 不是静态变量。如何让它返回主键？

是的，我可以更改类结构、函数结构并使其成为非静态的，但出于所有意图和目的，假设我们唯一可以更改的是静态函数 get_pk 的内容

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-06T17:52:21.127

您不能从`static`方法访问非静态属性，因为要创建属性，需要实例化类。您可以自省该类以获取其定义的值：

```
public static function get_pk() {
    $class = new ReflectionClass(get_called_class());
    $props = $class->getDefaultProperties();
    return $props['primary_key'];
} 
```

但实际上，这非常混乱，我不建议将其用于生产用途。正确地构造你的类要么是要么`static`不是`static`。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-06T18:15:31.107

我可以看到完成此操作的唯一方法是在父类中声明 $primary_key 变量，然后在子类定义范围之外为其分配一个值。（注意，我添加了`abstract`运算符来指示类是静态的，并且将类名的第一个字母大写以遵循约定。）

```
<?

abstract class Person {
    public static $primary_key;
    public static function get_pk() {
        return self::$primary_key;
    }
}

abstract class User extends Person {
}

User::$primary_key = 'id';
echo User::get_pk();

/* End of file */ 
```

**更新**

Aram，如果您希望 $primary_key 保持非静态，那么该方法将需要是非静态的，并且根据[静态关键字手册](http://php.net/manual/en/language.oop5.static.php)，“伪变量 $this 在声明为静态的方法中不可用” 。

或者，您可以将代码转换为使用实例化的类对象：

```
<?

class Person {
    public function get_pk() {
        return $this->primary_key;
    }
}

class User extends Person {
    protected $primary_key = 'id';
}

$user = new User();
echo $user->get_pk();

/* End of file */ 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-06T17:52:07.233

静态变量/方法与类相关，即不需要创建对象。您的`primary_key`变量是为每个对象创建的。所以静态方法无法访问它，因为静态方法没有特定对象的概念，因此对`primary_key`. 静态方法没有定义变量`$this`（因此`self`）。

我想您最好的选择是查看[静态](http://php.net/manual/en/language.oop5.static.php)关键字。

# jquery - 使用 jQuery .each 显示 json 数组

> ID：13749431
> 
> 赞同：0
> 
> 时间：2012-12-06T17:47:05.250
> 
> 标签：jquery, json, each

我有一个要从中提取数据的 json 文件。当 json 文件不在数组中时，一切正常。我想问题是我不知道如何在我的 .each 函数中选择正确的数据。这是示例 json 文件：

```
{
   "chapter1": [
      {
         "title":"This is the title",
         "chapter":"1",
         "verse":"1",
         "text":"text goes here"
      },
      {
         "verse":"4",
         "text":"text goes here"
      },
      {
         "verse":"6",
         "text":"text goes here"
      }
   ],

   "chapter2": [
      {
         "title":"This is the title",
         "chapter":"2",
         "verse":"1",
         "text":"text goes here"
      },
      {
         "verse":"4",
         "text":"text goes here"
      },
      {
         "verse":"6",
         "text":"text goes here"
      }
   ]
} 
```

这是我显示数据的循环：

```
$.getJSON(passages, function(data) {
    $.each(data, function() {
        $('#chapter1 h2').append(this.title);
        $('#chapter1 h3').append(this.chapter);
        $('#verses').append('<li><p>' + this.verse + this.text + '</p></li>');    
    });
}); 
```

当我从 json 文件中删除“chapter2”数据时，一切正常。我想显示“第 1 章”内容和“第 2 章”内容。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-06T17:54:29.660

出于某种原因，它围绕每个元素的成员创建了一个数组。`title`假设这是一致的，您可以`chapter`像这样访问：

```
$("#chapter1 h2").append(this[0].title);
$("#chapter1 h3").append(this[0].chapter); 
```

编辑：如果您自己创建 JSON，您可能应该将其格式更改为如下所示：

```
"chapter": {
   "title": "the title",
   "chapter": "the chapter",
   "verses": [
      {"verse": "1", "text": "text 1"},
      {"verse": "4", "text": "text 2"}
   ]
} 
```

这将适用`$.each`于您的问题

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-06T18:13:30.223

json 格式不正确，每章的 json 应如下所示：

```
 "chapter1": {
       "title":"this is the title",
       "chapter":"1",
       "verses":[
          {
             "verse":"1",
             "text":"some text"
          },
          {
             "verse":"2",
             "text":"some other text"
          },
      ]
   } 
```

编辑：更改 JSON 后，您的代码应如下所示：

```
$.getJSON(passages, function(data) {
    $.each(data, function() {
        $('#chapter1 h2').append(this.title);
        $('#chapter1 h3').append(this.chapter);
        $.each(this.verses,function(){
           $('#verses').append('<li><p>' + this.verse + this.text + '</p></li>');     
        });
    });
}); 
```

# jquery - 选中或未选中输入复选框时，jquery检查并更改父节点背景颜色

> ID：13749432
> 
> 赞同：0
> 
> 时间：2012-12-06T17:47:05.787
> 
> 标签：jquery, input

[http://jsfiddle.net/2Wpfw/3/](http://jsfiddle.net/2Wpfw/3/)

我不确定我的问题标题是否是最好的描述。

我正在寻求一些 jquery 帮助，请通过某种方式检查 input="checkbox" 是否被选中，然后根据复选框状态添加或删除类。

无论如何，我的表单标记看起来像这样......

```
<form>

    <ul class="select-wrapper">

        <li class="select-area">

            <input type="checkbox" name="colour1" id="colour1" value="black">

            <label for="colour1">Number 1</label>

        </li>

    </ul>

</form> 
```

看看我极其糟糕的尝试的这个小提琴。[http://jsfiddle.net/2Wpfw/3/](http://jsfiddle.net/2Wpfw/3/)

正如您所看到的，当您将鼠标悬停在`<li>`它们上时，它们会变为红色，但如果输入已被检查或输入被实时选中，则不要保持红色。

我希望它们在页面上实时选择输入时保持红色，如果未选中它也返回黑色。该表单是基于 ajax 的，因此如果出现错误，我希望被选中的输入 li 显示为红色（我将通过在提交表单后再次运行该函数来做到这一点）。

我在添加和删除`.box-checked`类时使这些显示为红色。

任何人都可以看到可能的工作，因为我很迷失从哪里开始。

任何帮助将不胜感激。谢谢

[http://jsfiddle.net/2Wpfw/3/](http://jsfiddle.net/2Wpfw/3/)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-06T17:52:39.553

```
$(".select-area input[type='checkbox']").on('change', function() {
    $(this).closest('.select-area').toggleClass('box-checked', this.checked);
});
​ 
```

[**小提琴**](http://jsfiddle.net/2Wpfw/7/)

您还需要在 CSS 中更加具体，因为现在`.box-checked`样式不会覆盖原始样式，例如：

```
.select-area.box-checked {
    background: red;
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-06T18:00:41.663

试试下面的代码

```
$inputCB.bind('change', function (){

$(this).parent().toggleClass('box-checked',this.checked);
}); 
```

CSS 需要 !important 在小提琴中，因为选择区域应用“黑色”背景优先

[http://jsfiddle.net/2Wpfw/13/](http://jsfiddle.net/2Wpfw/13/)

# c++ - 错误推回对 const 向量元素的引用

> ID：13749434
> 
> 赞同：2
> 
> 时间：2012-12-06T17:47:08.093
> 
> 标签：c++, vector, constants

请考虑以下几点：

```
// from main file

// first arguement gets enc_array
Rock rock (voice.getEncArray());
// getEncArray() gets a vector of vectors:
// std::vector<std::vector<unsigned int> > enc_array;

// in rock.hpp file, consider members
Rock( const std::vector<std::vector<unsigned int> > &);

std::vector<std::vector<unsigned int> * > remaining;

const std::vector<std::vector<unsigned int> > * population;

// in rock.cpp
Rock::Rock ( const vector<vector<unsigned int> > & v) :
  population (&v),
  ....

// in one of the class member functions
for ( vector<vector<unsigned int> >::const_iterator ci = population->begin(); ci != population->end(); ++ci ) {
    // for some indexes...
    remaining.push_back (& (*ci));      // <------  PROBLEM
} 
```

gcc 报告：

```
error: no matching function for call to 'std::vector<std::vector<unsigned int>*>::push_back(const std::vector<unsigned int>*)'

note: void std::vector<_Tp, _Alloc>::push_back(const value_type&) [with _Tp = std::vector<unsigned int>*; _Alloc = std::allocator<std::vector<unsigned int>*>; std::vector<_Tp, _Alloc>::value_type = std::vector<unsigned int>*] <near match>

note:   no known conversion for argument 1 from 'const std::vector<unsigned int>*' to 'std::vector<unsigned int>* const&' 
```

我知道我正在尝试将`vector<int>`那些被认为`const`是非 const的地址推送`vector`。填满后`remaining`，没有其他方法会改变它的数据，所以实际上应该是`const`. 但我不能声明`remaining`为 a `const vector`，因为它会给出错误。

```
error: no matching function for call to 'std::vector<std::vector<unsigned int>*>::push_back(const std::vector<unsigned int>*) const'

note: candidate is:
note: void std::vector<_Tp, _Alloc>::push_back(const value_type&) [with _Tp = std::vector<unsigned int>*; _Alloc = std::allocator<std::vector<unsigned int>*>; std::vector<_Tp, _Alloc>::value_type = std::vector<unsigned int>*] <near match>

note:   no known conversion for argument 1 from 'const std::vector<unsigned int>*' to 'std::vector<unsigned int>* const&' 
```

我真的需要从 to 复制元素`population`吗`remaining`？或者我还能做些什么来避免这种开销？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-06T17:53:31.163

您正在获取 的元素的地址，`population`以后可能会更改它。这很糟糕，因为您指定`population`为`const`.

如果要更改 的元素，则应从定义中删除`const`关键字`population`，然后使用`iterator`代替.`const_iterator``population`

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-06T17:56:54.463

尝试

```
std::vector<const std::vector<unsigned int> *> remaining; 
```

# c# - 有没有更清晰简洁的方式来用更好的 LINQ 来表达这个语句？

> ID：13749436
> 
> 赞同：4
> 
> 时间：2012-12-06T17:47:11.120
> 
> 标签：c#, linq

我有两个元素集合。我正在尝试获取第一个集合中在第二个集合中具有匹配 ID 的所有元素，并对匹配的元素运行 CopyToDomain 方法。

下面的代码运行良好，但我对它的冗长感到有点惊讶。ReSharper 在这里不推荐任何东西，但我想知道是否对两个集合进行交集，然后将方法映射到元素上会更清楚吗？你会做出改变，还是我应该停止大惊小怪并保持原样？

```
Task task = new Task();
IList<TaskAttributeDto> taskAttributeDtos = new List<TaskAttributeDto>();
taskAttributeDtos.Add(new TaskAttributeDto{ ID = 1});
taskAttributeDtos.Add(new TaskAttributeDto{ ID = 2});

foreach (TaskAttributeDto taskAttributeDto in taskAttributeDtos)
{
    TaskAttribute matching = task.TaskAttributes.FirstOrDefault(t => t.ID == taskAttributeDto.ID);
    if (matching != null)
    {
        taskAttributeDto.CopyToDomain(matching);
    }
} 
```

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-12-06T17:52:49.467

你所做的基本上是一个连接，所以你可以使用 Linq 连接语法：

```
var matches =
    from dto in taskAttributesDtos
    join attribute in task.TaskAttributes on dto.ID equals attribute.ID
    select new { dto, attribute};

foreach (var m in matches)
    m.dto.CopyToDomain(m.attribute); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-06T18:06:56.600

```
foreach(TaskAttributeDto taskAttributeDto in taskAttributeDtos.Where(t1 => TaskAttributes .Any(t2 => t2.Id == t1.Id)))
{
    taskAttributeDto.CopyToDomain(taskAttributeDto);
} 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-12-06T18:58:19.160

如果您担心查询语法的可读性，可以尝试使用方法语法：

```
var matches = taskAttributesDtos.Join(task.TaskAttributes,
                                      a => a.ID,
                                      b => b.ID,
                                      (a, b) => new { dto = a, attribute = b } );

foreach (var m in matches)
    m.dto.CopyToDomain(m.attribute); 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-12-06T17:52:20.177

```
task.TaskAttributes.Where(t => taskAttributeDtos.Select(d => d.ID).Contains(t.ID))
    .ToList()
    .ForEach(t => taskAttributeDtos.First(d => d.ID == t.ID).CopyToDomain(t)); 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-12-07T03:17:04.433

原始代码找到第一个匹配项。加入会查找所有匹配项，组加入允许您从每个匹配组中选择获胜者。

```
var matches =
    from dto in taskAttributesDtos
    join attribute in task.TaskAttributes
      on dto.ID equals attribute.ID
      into attributeGroup  //into clause causes GroupJoin to be called.
    select new { dto, attribute = attributeGroup.First() };

foreach (var m in matches)
    m.dto.CopyToDomain(m.attribute); 
```

# sql - 从 Openquery 选择到 Oracle，缺少报价？

> ID：13749438
> 
> 赞同：1
> 
> 时间：2012-12-06T17:47:26.737
> 
> 标签：sql, oracle

我无法成功地将带有 openquery 的代码运行到 oracle 服务器。

请不要考虑字段名称/数据类型，因为我只需要展示整个过程的一部分。它很长。我相信问题出在引号等...

程序编译好了。每次我执行该过程时，都会发生错误：

Quote: Msg 105, Level 15, State 1, Line 53 字符串'SELECT TO_NUMBER(XYZ_1) XYZ_1, XYZ_2,

cast (''''0'''' as number(5)) as B1, cast(''''1753-01-01'''' as date) NULL_DATE

我迷路了——我到底应该把那些缺失的引号放在哪里？

代码：

代码：[全选] [显示/隐藏] CREATE TABLE #tmpXYZ Header ( [XYZ_1] [int] PRIMARY KEY, [XYZ_2] varchar, [XYZ_3] varchar, -- 更多字段
[XYZ_N] varchar )

声明 @sqlInv nvarchar(3000) 设置 @sqlInv =

```
 'insert into #tmpXYZ Header (
    [XYZ_1],
    [XYZ_2],
    [XYZ_3],
    -- more fields
    [XYZ_N]

)

select
    * FROM OPENQUERY(XYZ_ORACLE, 
    ''SELECT TO_NUMBER(XYZ_1) XYZ_1,
    XYZ_2,

    cast (''''0'''' as number(5)) as B1, 
    cast(''''1753-01-01'''' as date) NULL_DATE,
    -- more fields
    cast ('''' '''' as varchar(20)) as A19 

from XYZ.V_HEADER 
where

    (DATE >= ''''TO_DATE(''''' + @startDate + ''''', ''''YYYYMMDD'''')'''' AND 
    DATE <= ''''TO_DATE(''''' + @endDate + ''''', ''''YYYYMMDD'''')'''' AND 
    QWE = ''''0'''' AND
    ABC = ''''13'''' ) '' )
' 

exec sp_executesql @sqlInv 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-06T23:53:06.393

除非我错了，否则你正在传递一个字符串。因此，您以引用开始插入。

之后，您为 select to_number(XYZ_1) XYZ_1, ...... 我认为这是正确的，因为您再次将字符串传递给 openquery 命令。

但是你为什么要在 cast 语句之间加上 4 个引号。您只需输入 2 个引号即可转义引号。我认为这是你的错误，除非我弄错了。

# java - || 运算符不能在 equalsIgnoreCase() 方法参数中使用？

> ID：13749439
> 
> 赞同：0
> 
> 时间：2012-12-06T17:47:28.507
> 
> 标签：java

```
boolean hasTaxes(){
        return !state.equalsIgnoreCase("TX" || "NM" ||"VA" || "AZ" || "AK");
    } 
```

在上面的代码中，我得到了`The operator || is undefined for the argument type(s) java.lang.String, java.lang.String`错误......这是否意味着`||`运算符不能用于`equalsIgnoreCase()`参数？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-06T17:49:14.523

`||`期望`boolean`双方争论，而不是`String`，你可能想做

```
state.equalsIgnoreCase("TX") || state.equalsIgnoreCase("NM") || .. 
```

如果这些是您可能想要检查的固定代码，您应该将它们放入 Enum 并像使用它一样使用它

```
public enum StateCode{
 CA, TX;
} 
```

现在

```
TaxableStateCode stateCode = null;
try{
    stateCode = TaxableStateCode .valueOf(stringCode);
} catch(IlligalArgumentException ex){
   //log why it failed and other things you might want to do
}

if(stateCode == null){
  // invalid code was supplied for TaxableStateCode 
} 
```

如果预计它们会随着时间而变化，那么您应该将它们放在数据库或可配置属性文件中的某个位置，这样您就不必更改代码来应用效果

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-06T17:50:38.880

equalIgnoreCase() 的参数是一个字符串。"TX" || "纳米" ||"VA" || "AZ" || “AK”不是字符串，因此您将获得未定义的参数。我建议将所有这些状态放在一个数组中并检查数组是否包含文本，而不是对每个状态使用 equalIgnoreCase()

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-12-06T17:50:55.243

您正在尝试在`||`不起作用的字符串上使用运算符。试试这个

```
return !state.equalsIgnoreCase("TX") &&
!state.equalsIgnoreCase("NM" ) &&
!state.equalsIgnoreCase("VA") &&
!state.equalsIgnoreCase("AZ" ) &&
!state.equalsIgnoreCase("AK"); 
```

您必须将`||`运算符与布尔值一起使用，这是该`equalsIgnoreCase`方法返回的值。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-12-06T17:54:08.490

Java 不支持这样的想法（`||`是 java 的逻辑 OR 运算符），但是您可以这样做：

```
private static List<String> states = Arrays.asList("TX", "NM", "VA", "AZ", "AK"); 
```

然后在你的方法中：

```
return !states.contains(state.toUpperCase()); 
```

这或多或少地抓住了你的想法。

### 编辑：

我真的很想保持这个简单，这样我就不会吓到 OP，但是人们已经插话了，所以这里......

如果您想提高执行速度，`HashSet`将 a 用作集合类型将是更好的选择，因此您可以这样做：

```
private static Set<String> states = new HashSet(
    Arrays.asList("TX", "NM", "VA", "AZ", "AK")); 
```

如果你想对风格完全疯狂，你可以这样做：

```
private static final Set<String> STATES = Collections.unmodifiableSet(
    new HashSet(Arrays.asList("TX", "NM", "VA", "AZ", "AK"))); 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-12-06T17:54:23.363

`||`适用于`boolean`操作数，从不`String`s。

您可以以更简洁的方式重新表述您的代码，如下所示：

```
 enum Tax {TX, NM, VA, AZ, AK}

    boolean hasTaxes(String state) {
        for (Tax tax : Tax.values()) {
            if (state.equalsIgnoreCase(tax.name())) {
                return false;
            }
        }
        return true;
    } 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-12-06T17:56:14.193

我想你可以试试这个：

```
String states = "@TX@NM@VA@AZ@AK@";
if(noTaxStates.length() ==2 && 
                          states.indexOf("@"+noTaxStates.toUpperCase()+"@") >0){
     //state exist
} 
```

# objective-c - iOS：performSelectorOnBackground/MainThread：不更新标签

> ID：13749444
> 
> 赞同：0
> 
> 时间：2012-12-06T17:47:37.580
> 
> 标签：objective-c, ios

我有一个在后台运行的 while 语句。

```
- (IBAction)startButton
{
 [self performSelectorInBackground:@selector(Counter) withObject:nil];
 .....
}

- (void) Counter 
{
  while (round) {
     if (condition)
     {
     NSString *str;
     str = [NSString stringWithFormat:@"%d",counter];
     [self performSelectorOnMainThread:@selector(updateLabel:) withObject:str waitUntilDone:NO];      
     }
  }
}
- (void)updateLabel: (NSString*) str
 {
[self.label setText:str];
NSLog(@"I am being updated %@",str);
 } 
```

NSlog 让我得到正确的更新值，但标签永远不会更新。

我究竟做错了什么？

更新：

标签已连接，在 while 语句完成后，它会被更新。

我也初始化了标签。

```
- (void)viewDidLoad
{   [super viewDidLoad];  
label.text = @"0";
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-06T17:51:27.367

在 Interface Builder 中检查 IBOutlet 是否已连接

**编辑 3**

尝试使用`GCD`with调度请求`dispatch_async`，所以它变成

```
while (round) {
   if (condition)
   {
    NSString * str = [NSString stringWithFormat:@"%d",counter];
    dispatch_async(dispatch_get_main_queue(),^ {
      [self updateLabel:str];
    });
   }
} 
```

更新 a 的另一种方法`UILabel`是设置 a`NSTimer`每秒更新一次`x`（根据您的需要），而不是使用 a 循环`while`。

那会是这样的

```
NSTimer * updateLabelTimer = [NSTimer scheduledTimerWithTimeInterval:0.5 target:self selector:@selector(updateLabel) userInfo:nil repeats:YES];

-(void)updateLabel {
  if(condition) {
    self.label.text = [NSString stringWithFormat:@"%d", counter];
  }
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-06T18:26:01.177

您的主线程可能正在等待您的后台线程完成。你是如何在后台线程上启动任务的？

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-06T17:52:08.350

尝试

```
dispatch_after(DISPATCH_TIME_NOW, dispatch_get_main_queue(), ^(void){
    [self updateLabel:str];
}); 
```

我只是更喜欢这个`performSelectorOnMainThread:withObject:waitUntilDone:`。

如果没有帮助，请检查是否`label`不为零。如果是，那么过去更多的代码。

第一次评论后编辑：

`NSTimer`可能会有所帮助，但这也应该有效。

```
- (IBAction)startButton
{
    [self Counter];
}

- (void) Counter
{
    dispatch_async(dispatch_get_global_queue(DISPATCH_QUEUE_PRIORITY_DEFAULT, 0), ^{

        while (round) {
            if (condition)
            {
                NSString *str;
                str = [NSString stringWithFormat:@"%d",counter];

                dispatch_async(dispatch_get_main_queue(), ^{
                    [self updateLabel:str];
                });
            }
        }

    });

}
- (void)updateLabel: (NSString*) str
{
    [self.label setText:str];
    NSLog(@"I am being updated %@",str);
} 
```

# html - 如何使DIV绝对+固定？

> ID：13749450
> 
> 赞同：1
> 
> 时间：2012-12-06T17:48:09.200
> 
> 标签：html, scroll, fixed, absolute, scrollable

我想制作可以向下滚动的绝对 DIV，直到它到达页面顶部，然后它应该变得固定并保持在顶部，直到页面再次向上滚动。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-16T16:02:32.100

将此代码放在关闭 head 标签之前：

```
<script type="text/javascript" src="https://ajax.googleapis.com/ajax/libs/jquery/1.5.0/jquery.min.js"></script>
<script>
$(function() {
var top = $('.div').offset().top;
function scroll(){
var scroll = $(window).scrollTop(); 
if (scroll > top) { 
$('.div').css({ 'position': 'fixed', 'top':0 });
} else {
$('.div').css({ 'position': 'absolute','top': top }); 
} 
};
$(window).scroll(function() {
scroll();
});
});

</script>
<style>

body {height: 1000px;}
.header {height: 200px;}
.div {position: absolute;}

</style> 
```

并在正文中使用此代码：

```
<div class="header">Header or logo company</div>
<div class="div"> text or menu or other </div> 
```

# svn - Subversion 选择它自己的修订版来合并？

> ID：13749453
> 
> 赞同：1
> 
> 时间：2012-12-06T17:48:33.843
> 
> 标签：svn, branch, branching-and-merging

所以今天我被难住了，将主干的修订合并到一个分支工作副本中。

```
svn merge -r 7587:7735 http://OurProject/trunk
 --- Merging r7649 through r7735 into '.': 
```

看起来合并信息已损坏，因为它将主干中的合并列为

/主干：7446-7648

但我们只从 7446 合并到 7587。

那么为什么mergeinfo是错误的，这是怎么发生的呢？

谢谢

码头

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-06T20:11:44.827

从描述中很难弄清楚发生了什么。然而，Subversion 在跟踪更改方面确实做得很好，所以它可能做的是正确的事情。

作为结果列出的修订`svn merge`可能不一定与您给它的范围一致，因为这些修订可能不在主干上。这就是为什么它向您显示修订版 7649 而不是修订版 7587 作为合并的第一个修订版。

我不知道`svn:mergeinfo`您正在查看的是合并前还是合并后。但是，只要合并中涉及的分支具有***直接***的共同祖先，并且您没有做一些愚蠢的事情，例如删除分支上的所有文件并重新添加它们，那么合并应该一切都很好。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-27T18:54:08.960

好的，我自己回答了这个问题。

合并信息是正确的，我们搞砸并合并了所有这些修订（7587-7648），但随后在提交之前恢复了它们的所有实际更改，因此看起来SVN实际上已经扭曲了它的内裤这是正确的。

# jquery - jQuery - css 在更高的 Z-index 上禁用 div

> ID：13749458
> 
> 赞同：3
> 
> 时间：2012-12-06T17:48:47.780
> 
> 标签：jquery, html, z-index, mouseover, clickable

**我的问题：** 是否可以禁用一个 div（Z-index 2），使其仍然可见并使其被鼠标“不明显”，这样我就可以通过它（鼠标悬停，点击）实现鼠标操作到它下面的启用 div？这意味着您可以单击下面的 div，因为您的鼠标位于禁用的 div 顶部或将鼠标悬停在顶部的 div 上，并且它不会影响或影响其下方 div 调用的鼠标悬停动作。

**问题：** 我在网上和 stackoverflow 上进行了搜索，但找不到我正在寻找的简单答案。我有几个 div，有些在不同的 Z-index 上相互重叠，而上面的那些则弄乱了下面的动作。

**示例：** - -我在下部 div（Z-Index 1）中有一个漂亮的图形框，其中包含鼠标悬停动作。当鼠标悬停在框上时，它会触发动作。- - 我在新图层（Z-Index 2）上的 div 上的框上也有一些漂亮的图形文本，但这会干扰下面框上的鼠标悬停动作。它使我的鼠标看起来像是离开了盒子，但它不仅仅是在更高级别的 div 上。

**问题摘要：** *我可以禁用 div 使其不可点击或触发鼠标悬停调用，但仍然可见吗？*

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-12-06T17:50:15.133

是的，您可以使用以下 CSS 属性：

```
pointer-events: none; 
```

取决于您所针对的浏览器。不会说这个属性得到很好的支持。

见：[http ://caniuse.com/pointer-events](http://caniuse.com/pointer-events)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-06T17:59:38.480

您是否尝试让您的 2 级 div 实际上是 1 级的子级？您应该跟踪`mouseenter`/`mouseleave`而不是`mouseover`/`mouseout`

小解释：`mouseout`只要您的鼠标不在捕获的事件目标上，就会触发，即使您的指针越过目标的子对象也是如此。因为`mouseleave`它只会在您的鼠标指针离开目标元素及其任何子元素时触发。将其视为`mouseenter`类似于 CSS `:hover`。

# sql - SQL 为不同的值分配不同的颜色

> ID：13749463
> 
> 赞同：0
> 
> 时间：2012-12-06T17:49:02.613
> 
> 标签：sql, sql-server-2008, colors

我有一个看起来像这样的表：

```
| ID |  Order  | ... | Colour  |
|  1 |    A    | ... |   xxx   |
|  2 |    A    | ... |   xxx   |
|  3 |    A    | ... |   xxx   |
|  4 |    B    | ... |   xxx   |
|  5 |    B    | ... |   xxx   |
|  6 |    C    | ... |   xxx   |
|  7 |    A    | ... |   xxx   |
|  8 |    B    | ... |   xxx   |
|  9 |    B    | ... |   xxx   |
| 10 |    B    | ... |   xxx   | 
```

我需要为每个订单分配自己的颜色并返回值。不幸的是，我不知道订单名称是什么，所以我不能做一个简单的 CASE 语句。

我的问题是，最好、最有效的方法是什么，以使结果看起来像这样：

```
| ID |  Order  | ... | Colour   |
|  1 |    A    | ... |   Red    |
|  2 |    A    | ... |   Red    | 
|  3 |    A    | ... |   Red    |
|  4 |    B    | ... |   Blue   |
|  5 |    B    | ... |   Blue   |
|  6 |    C    | ... |   Green  |
|  7 |    A    | ... |   Red    |
|  8 |    B    | ... |   Blue   |
|  9 |    B    | ... |   Blue   |
| 10 |    B    | ... |   Blue    | 
```

非常感谢您的帮助，我整天都在困惑这个问题！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-06T18:44:13.750

如果没有回答评论中发布的问题，我无法确定这是您想要的。但是，这里...

```
DECLARE @paletteSize INT;

DECLARE @palette TABLE
    (    numVal INT IDENTITY(0, 1) PRIMARY KEY
        , colorVal VARCHAR(10)
    );

INSERT @palette
    ( colorVal )
VALUES 
    ( 'VIOLET' )
    ,( 'RED' )
    ,( 'BLUE' )
    ,( 'GREEN' )
    ,( 'ORANGE' )
    ,( 'YELLOW' );

SELECT @paletteSize = COUNT(*) FROM @palette;

DECLARE @source TABLE
    (    id INT IDENTITY(1, 1) PRIMARY KEY
        , orderVal CHAR(1)
    );
INSERT @source
    ( orderVal )
VALUES
    ( 'A' )
    ,( 'A' )
    ,( 'A' )
    ,( 'B' )
    ,( 'B' )
    ,( 'C' )
    ,( 'A' )
    ,( 'B' )
    ,( 'B' )
    ,( 'B');

SELECT
    sc.id
    , sc.orderVal
    , p.colorVal 
FROM 
    ( 
        SELECT 
            s.id
            , s.orderval
            , DENSE_RANK()
                OVER(    ORDER BY s.orderval ) % @paletteSize colorID
        FROM 
            @source s
    ) sc
JOIN 
    @palette p
    ON p.numVal = sc.colorID
ORDER BY 
    sc.id; 
```

如果您的不同订单值超过您的调色板，它会环绕。如果您想将订单绑定到一组数量的桶中以匹配您的调色板表的计数，您也可以使用 NTILE 而不是 DENSE_RANK。不同之处在于您是要在值上循环颜色还是将接近的值分组为一种颜色。

# css - 为什么在这种情况下没有发生保证金崩溃？

> ID：13749464
> 
> 赞同：1
> 
> 时间：2012-12-06T17:49:07.157
> 
> 标签：css, margin

[为什么在这种](http://jsfiddle.net/yR4hS/)情况下没有发生保证金崩溃？

```
<p> First </p>
<p id="second"> Second </p>

p {
    background-color:red;
    margin-top:10px;
    display:inline;
    margin-right:10px;
}
#second {
    margin-left:10px;
} 
```

这两者之间的边距最终为 20px，而不是 10px。为什么？​</p>

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-06T17:50:57.140

引用[文档](http://www.w3.org/TR/CSS2/box.html#collapsing-margins)：

> 水平边距永远不会塌陷。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-05-21T11:18:56.777

您总是可以将样式放在 HTML 中以确保安全工作..？还使用重置 CSS 吗？

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-05-21T07:39:32.420

边距折叠仅发生在 2 个垂直块元素之间。
你有水平元素，这两个都是内联元素。
因此，保证金崩溃不会发生。

# java - GWT - ScrollPane 外观

> ID：13749468
> 
> 赞同：0
> 
> 时间：2012-12-06T17:49:19.713
> 
> 标签：java, gwt

我只是想知道是否有使用 CSS 修改 ScrollPane 外观的最佳方法？我的意思是如何使它更窄或灰色或更改箭头按钮等？

还是有别的办法？

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-06T18:06:54.187

[自定义滚动面板是 gwt GWT CustomScrollPanel 示例](https://stackoverflow.com/questions/11020102/gwt-customscrollpanel-example)中最接近漂亮滚动面板的东西

默认滚动上的 CSS 样式很糟糕。Facebook、gmail、wave 等使用模拟滚动而不是浏览器原生滚动....

# cakephp - cakephp 2 中的两个注册表单

> ID：13749470
> 
> 赞同：0
> 
> 时间：2012-12-06T17:49:21.653
> 
> 标签：cakephp, authentication, cakephp-2.0

有没有办法在 Cakephp 2 中有两个注册表单？我有一个家庭和求职者的登记表。家庭正在寻找求职者，例如保姆或保姆。他们只能登录以编辑他们的姓名、地址等。求职者是那些正在寻找一个家庭来照顾的人，他们只能登录以编辑他们的个人资料。显然，这两个模型将连接起来，因为求职者可以与多个家庭一起工作。一个家庭也可以有多个求职者。

如果我只使用一个用户表/模型来存储两者，那将会非常混乱，特别是因为求职者和家庭可能有一些相似的字段和彼此不同的字段。我想要一个用户表（用于家庭）和另一个表（可能是求职者表？），我可以用于求职者，但也使用与用户表相同的登录和注册功能。

Cakephp 使用用户表作为他们的登录机制，我想要类似于我的 JObseeker 的东西。我不想为两种不同类型的用户使用同一张表。

有什么建议么？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-06T18:08:58.770

只需让用户只有用户信息（用户名、密码、姓名等），并为额外信息 job_seekers 和家庭创建另外两个表。两个表都有用户的外键（所以 JobSeeker 和 Family 属于用户）

您可以使用带有 Model.field 表示法（例如 JobSeeker.education）的额外字段来呈现表单，并使用 saveAll() 将所有数据单独存储，包括关系。

# java - 如何使用 Spring 在表单上制作选择框

> ID：13749473
> 
> 赞同：1
> 
> 时间：2012-12-06T17:49:32.927
> 
> 标签：java, spring, dojo, spring-webflow

我是 Java 和 Springs 框架的新手。这是我的问题，由 n00b 提出（对不起，如果我听起来像二年级学生）。我试图让一个选择下拉列表出现在我的表单上，其中包含可选国家列表。数据存储在 MySQL 表中，并包含带有国家名称的单个列。我显然做错了什么。我希望这只是一个我缺少的简单事情引起的错误。提前感谢您的帮助。

我们正在使用 WebFlow。我的流 XML 中有以下内容：

```
<on-start>
  <evaluate expression="flowControllerActions.retrieveMBSAddressInfo()" result="address" />
  <evaluate expression="flowControllerActions.retrieveCountryInfo()" 
       result="flowScope.countryListing" />
</on-start> 
```

**retrieveCountryInfo() 看起来像这样：**

```
public Map<String, String> retrieveCountryInfo() throws IOException {
    LOGGER.debug("inside retrieveMBSAddressInfo");
    Map<String, String> countryInfo = (Map<String, String>) coaService.getCountryInfo();
    return countryInfo;
} 
```

**coaService.getCountryInfo() 看起来像这样：**

```
 public Map<String, String> getCountryInfo() {
        ArrayList <Country> cList = coaDao.getSelectableCountries();
        LinkedHashMap<String, String> retval = new LinkedHashMap<String, String>();
        for ( Country c : cList){
            retval.put(c.getName(), c.getName());
            log.debug(c.getName());
        }
        return retval;
    } 
```

**填充列表的coaDao.getSelectableCountries()**看起来是这样的：

```
@SuppressWarnings("unchecked")
@Transactional(readOnly=true, propagation=Propagation.REQUIRED)
public ArrayList<Country> getSelectableCountries() {
    String myLike = "%";

    Session mySession = sessionFactory.getCurrentSession();

    ArrayList<Country> countries = (ArrayList<Country>) mySession
        .createCriteria(Country.class)
            .add(Restrictions.like("name", myLike)).list();

    return countries;
} 
```

最后，**JSP 页面**尝试像这样呈现 select 元素：

```
<td>
    <form:select path="country" id="country">
        <form:options items="${countryListing}"/>
    </form:select>
</td> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-07T12:39:11.583

我不确定，但尝试这样的事情，

```
<td>
<form:select path="country" id="country">
    <c:forEach items="${countryListing}" var="countryMap" varStatus="status">
    <option value="${countryMap.key}">${countryMap.value}</option>
</c:forEach>
</form:select> 
```

我希望这行得通！:)

# matlab - Matlab：贪婪视角的cumsum和详尽的唯一元素索引

> ID：13749475
> 
> 赞同：-1
> 
> 时间：2012-12-06T17:49:39.230
> 
> 标签：matlab, unique, brute-force, greedy, cumsum

[试图通过扩展我之前的问题](https://stackoverflow.com/questions/13728586/matlab-sum-column-elements-with-restrictions)来了解如何操作具有以下元素的两个矩阵（我将尝试简化我的问题以便更容易回答）：

第一个矩阵：

```
 8 2 5
Mat1 = [  3 7 8 ] 
          6 5 0 
```

第二个矩阵：

```
 Value(Mat1(1)) Value(Mat1(4)) Value(Mat1(7))
Mat2 = [ Value(Mat1(2)) Value(Mat1(5)) Value(Mat1(8)) ]
         Value(Mat1(3)) Value(Mat1(6)) Value(Mat1(9)) 
```

假设第二个矩阵值是：

```
 18 22 47
Val.Mat2 = [  28 84 82 ] 
              56 65 0 
```

现在我们对 Val.Mat2: 的值求和`VM2CS = cumsum(sort(Val.Mat2))`，并为每列设置一个汇总约束，并将`cstr = 100;`约束的结果收集在矩阵上：`result = sum(VM2CS <= cnstrn);`

```
 18  22   0
VM2CS =  46  87  47
        102 171 129 

result = 2 2 2 
```

* * *

**####################### 问题** *（复杂性递增的两个方面）* **#################**

* * *

*   看点一：cumsum如何忽略零（0）的元素；所以结果是： `result = 2 2 1`。我试过：`result = sum(cumsum(sort(VM2CS))<=cstr ~=0)`没有成功。
*   方面二：`Mat1`元素在`Mat2`矩阵内重复（pe Mat1(1) 元素与 Mat1(8) 相同，但值不同，分别为 18 和 82。Mat1(6) 和 Mat1(7) 也重复。）。我如何才能在具有透视的最终结果中仅使用一次相同的元素，以使每行具有尽可能多的唯一元素（不包括零（0））？预期结果应该是：

> ```
>  18 22 47
>  result_expected = [ 28 54  0 ]
>                       0  0  0 
> ```

我知道第二方面不容易回答，但指出解决方案也应该会有所帮助。[Thomas G. Robertazzi](http://web.ece.sunysb.edu/~tom/bio.html#biog)教授在*[规划电信网络](http://eu.wiley.com/WileyCDA/WileyTitle/productCd-0780347021.html)*中提出了同样有用的示例，但我现在没有这本书，我买不起。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-06T19:38:30.770

对于第一部分，只需使用：

```
result = sum((VM2CS <= cstr) & (VM2CS ~= 0)); 
```

对于第二部分，为什么值 56 消失了？

# anythingslider - 带有自定义 FX 的任何滑块在 Firefox 中随机停止和重新启动动画

> ID：13749476
> 
> 赞同：1
> 
> 时间：2012-12-06T17:49:39.433
> 
> 标签：anythingslider

我正在为 wordpress 主题编写代码，并使用任何带有自定义 FX 的滑块。它在除 Firefox 之外的所有浏览器中都能完美运行。它开始按预期工作，但经过一些循环后，它开始显示带有淡入淡出的幻灯片 - 淡出和时间为零。经过一些循环后，它会恢复正常行为。这种淡入淡出/显示 - 正常/显示过渡，仅出现在 Firefox 中。有什么建议吗？

该主题仍在开发中，可以在[这里找到](http://king-themes.com/talos/#&panel1-1&panel2-1)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-07T22:47:54.313

请尝试[最新版本](https://github.com/CSS-Tricks/AnythingSlider)（当前为 v1.8.7）。我认为这是已在所有主题中更新的面板的 z-index 问题。

# c# - 文件访问问题

> ID：13749478
> 
> 赞同：-1
> 
> 时间：2012-12-06T17:49:45.553
> 
> 标签：c#

> **可能重复：**
> [无法访问文件](https://stackoverflow.com/questions/13740452/cant-access-file)

我似乎无法访问我正在编写的程序中使用的文件。我不知道究竟是如何工作的，因为我希望我的程序打开您选择的文件，它确实如此，然后我希望它能够将信息接收到一个数组中，它会这样做，然后从那里，将该信息从数组写入您打开的文件。当我尝试一些代码开始处理它时，它告诉我，“该进程无法访问文件'文件'，因为它正在被另一个进程使用。” 这是我到目前为止所拥有的。请告诉我。谢谢你。有问题的区域是`Save_Click`我写“这是一个测试”的代码部分谢谢。

```
 public partial class ListingSearch : Form
{
    string line;
    DialogResult result;
    string fileName;
    int i = 0;
    string[] first = new string[100];
    string[] last = new string [100];
    string[] phone = new string [100];
    string[] grade = new string [100];

    public ListingSearch()
    {
        InitializeComponent();
        MessageBox.Show("Please be sure to open a file before beginning");
    }

    private void OpenFile_Click(object sender, EventArgs e)
    {
        using (OpenFileDialog filechooser = new OpenFileDialog())
        {
            result = filechooser.ShowDialog();
            fileName = filechooser.FileName;
            System.IO.StreamReader file =
                new System.IO.StreamReader(fileName);

            while ((line = file.ReadLine()) != null)
            {
                string[] words = File.ReadAllText(fileName).Split(new string[] { "\n", "\r\n", ":" }, StringSplitOptions.RemoveEmptyEntries);
                //firstName.Text = words[4];
                //lastName.Text = words[5];
                //telephone.Text = words[6];
                //GPA.Text = words[7];
            }
            Read.Enabled = true;
       }
    }

    private void Save_Click(object sender, EventArgs e)
    {
        File.AppendAllText(fileName, "This is a test");
    }

    private void Read_Click(object sender, EventArgs e)
    {
        MessageBox.Show(fileName);
        MessageBox.Show(File.ReadAllText(fileName));
    }

    private void info_Click(object sender, EventArgs e)
    {
        first[i] = firstName.Text;
        firstName.Text = " ";
        last[i] = lastName.Text;
        lastName.Text = " ";
        phone[i] = telephone.Text;
        telephone.Text = " ";
        grade[i] = GPA.Text;
        GPA.Text = " ";
        i++;
    }

    private void displayinfo_Click(object sender, EventArgs e)
    {
        if (i == 0)
            MessageBox.Show("Nothing to display!");
        else
        for (int j = 0; j < i; j++)
        {
            MessageBox.Show(first[j] + " " + last[j] + "\r" + phone[j] + "\r" + grade[j]);
        }
    } 
```

# linux - Linux内核空闲循环

> ID：13749479
> 
> 赞同：2
> 
> 时间：2012-12-06T17:49:58.917
> 
> 标签：linux, kernel, arm, cpu, python-idle

在 linux 内核空闲循环内部，对于相当多的架构（SH、ARM、X86 等。afaik）有以下几行：

```
if(cpuidle_idle_call())
    pm_idle(); 
```

我的疑问：

至少对于 ARM，默认的 pm_idle 函数由 WFI（等待中断）指令组成，但令人困惑的是，中断随后被禁用并在 WFI 指令执行后启用，当中断发生时 CPU 如何从 WFI 恢复联机禁用？

我尝试在各种版本的 linux 中搜索我的答案，但相关代码自 2.6.32（我提到的最后一个版本）以来没有变化，所以我更有可能遗漏了一些东西。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-06T20:52:50.350

即使中断被禁用，WFI 也会唤醒，但 ARM 内核在再次启用中断之前不会接收到中断。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-07T12:54:03.900

cpuidle_idle_call() 返回“错误”有几个原因。

1.  没有为 CPU 安装 cpuidle 驱动程序。
2.  cpuidle 被禁用
3.  驱动程序无法初始化

缺少驱动程序是最有可能发生的事情。但是在这种情况下，内核仍然必须以某种方式燃烧循环。所以它调用了 pm_idle，它在 arm 上默认映射到 default_idle。内核在那里检查 cpu 是否注册了 arm_pm_idle，可以将其视为轻量级 cpuidle 驱动程序。如果一切都失败了，它将回退到 cpu_idle，它必须被实现并且大部分时间会耗尽写入缓冲区并进入 WFI 模式。

整个过程中有很多冗余，但这允许开发人员编写简单的空闲驱动程序，并在必要时将它们变成完整的 cpuidle 驱动程序。

问题是不同的 SoC 提供不同的功能。例如，在 kirkwood 上，空闲驱动程序会将 DDR 设置为自刷新模式，然后再切换到 wfi 模式以保护一些电源。从理论上讲，它也可以扩展为将 cpu 切换到较慢的时钟。

对于你的另一个问题。禁用中断只会阻止 cpu 触发中断处理程序，它仍然需要注册中断发生，否则您可能会丢失数据。因此处理程序被禁用，但传入的中断仍会触发 WFI 的唤醒功能。

# c# - 如何在程序进程端运行代码

> ID：13749480
> 
> 赞同：0
> 
> 时间：2012-12-06T17:50:00.663
> 
> 标签：c#, process

我正在使用 VS 2010，winForm。

有人可以建议程序过程结束时如何运行方法吗？

我试过：[如何在程序退出之前运行代码？](https://stackoverflow.com/questions/2555292/how-to-run-code-before-program-exit) 解决方案，但它只能通过“关闭按钮”关闭表单，如果我在任务管理器中结束进程它没有被调用，是否可以处理此类事件？

```
static void Main()
{
    Application.EnableVisualStyles();
    Application.SetCompatibleTextRenderingDefault(false);
    Application.Run(new MainForm());
    AppDomain.CurrentDomain.ProcessExit += new EventHandler (OnProcessExit); 
}

public static void OnProcessExit(object sender, EventArgs e)
{
    if (Utils.RemindTime != DateTime.MinValue)
        Utils.SetStartup(true);
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-06T18:11:51.580

您使用另一个程序来启动该程序。假设您的应用程序是“记事本”：

```
class Program
{
    static void Main(string[] args)
    {
        var startInfo = new ProcessStartInfo("notepad.exe");
        var process = Process.Start(startInfo);
        process.WaitForExit();
        //Do whatever you need to do here
        Console.Write("Notepad Closed");
        Console.ReadLine();
    }
} 
```

您可以使用 Windows 上的批处理文件或 Linux 中的 shell 脚本。

当然，它不会让您访问您启动的程序的内部，但这是您确保在任务管理器终止进程后执行“某些代码”的唯一方法

# wpf - 在 WPF 中按下 XAML 按钮发送网格名称和类名称

> ID：13749483
> 
> 赞同：0
> 
> 时间：2012-12-06T17:50:05.980
> 
> 标签：wpf, xaml, reflection

我有一个生成多个 DataGrid 的 WPF 程序。我添加了使用此站点上的想法将每个网格导出到 Excel 的功能：http: [//www.codeproject.com/Articles/120480/Export-to-Excel-Functionality-in-WPF-DataGrid](http://www.codeproject.com/Articles/120480/Export-to-Excel-Functionality-in-WPF-DataGrid)

目前我在每个网格下都有一个按钮，它有自己的处理程序，看起来像这样：

```
private void m_btnExportTimePartitionToExcel_Click(object sender, RoutedEventArgs e)
    {
        try
        {
            ExportToExcel<SystemTimeRecordData, List<SystemTimeRecordData>> s = new ExportToExcel<SystemTimeRecordData, List<SystemTimeRecordData>>();
            ICollectionView view = CollectionViewSource.GetDefaultView(m_gridPartitionSystemTimeRecords.ItemsSource);
            s.dataToPrint = (List<SystemTimeRecordData>)view.SourceCollection;
            s.GenerateReport();
        }
        catch (Exception ex)
        {
            MessageBox.Show("Problem with exporting Excel. Error: " + ex.Message);
        }
    } 
```

我对每个网格都有一个类似的按钮处理程序。这一切都有效，但它“闻起来”。似乎应该有一种方法可以让每个按钮调用一个处理程序。也就是说，如果我可以传递与该按钮关联的网格以及相关的类。我可以从 XAML 中做到这一点吗？我已经搜索并看到了传递参数的示例，但不是网格本身，当然也不是类，我猜它必须作为类型传递？用类似的东西替换上面的代码会很好......

```
private void m_btnExportTimePartitionToExcel_Click(object sender, RoutedEventArgs e)
    {
        try
        {
                                    // some how get Type type, and grid from sender and/or e
            ExportToExcel<type, List<type>> s = new ExportToExcel<type, List<type>>();
            ICollectionView view = CollectionViewSource.GetDefaultView(m_grid.ItemsSource);
            s.dataToPrint = (List<type>)view.SourceCollection;
            s.GenerateReport();
        }
        catch (Exception ex)
        {
            MessageBox.Show("Problem with exporting Excel. Error: " + ex.Message);
        }
    } 
```

然后我可以只有一个按钮处理程序！有任何想法吗？谢谢，戴夫

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-06T20:57:19.893

您可以通过以下几种方式做到这一点：

*   您可以尝试传递 ，`DataGrid`如果`CommandParameter`您可以使用`ElementName`or`RelativeSource`绑定找到它

    ```
    <Button CommandParameter="{Binding ElementName=DataGridA}" ... />

    <!-- Will only work if this is inside the DataGrid somewhere, like in the footer -->
    <Button CommandParameter="{Binding RelativeSource={RelativeSource AncestorType={x:Type DataGrid}}" ... /> 
    ```

    然后你可以得到价值`((Button)sender).CommandParameter as DataGrid`

*   您可以传递`ItemsSource`a`CommandParameter`而不是整个 DataGrid

    ```
    <StackPanel>
        <DataGrid ItemsSource="{Binding SomeCollection}" ... />
        <Button CommandParameter="{Binding SomeCollection}" ... />
    </StackPanel> 
    ```

*   您可以导航 VisualTree 以找到最近的 DataGrid。[我的博客上](http://rachel53461.wordpress.com/2011/10/09/navigating-wpfs-visual-tree/)有一些帮手可以让这件事变得简单。这是将它们与上述 XAML 一起使用的示例：

    ```
    var parentPanel = VisualTreeHelpers.FindAncestor<StackPanel>((Button)sender);
    var datagrid = VisualTreeHelpers.FindChild<DataGrid>(parentPanel); 
    ```

我敢肯定还有其他方法，但这些是我想到的第一个方法:)

# c - linux中的头文件是如何组织的

> ID：13749486
> 
> 赞同：2
> 
> 时间：2012-12-06T17:50:21.320
> 
> 标签：c, linux

在linux上，很多文件夹下都有socket.h，如下图。

1.  如何决定存储在 asm 文件夹下 vs linux vs bits 下的内容。我假设 sys 下的所有内容都只是 libc

2.  gcc 以什么顺序解析头文件。例如，它是否从 sys 中选择 socket.h，然后是 linux，然后是 sys，然后是 bits 等等？

/usr/include/sys/socket.h，（由 libc 使用）

/usr/include/linux/socket.h

/usr/include/asm/socket.h

/usr/include/asm-generic/socket.h

/usr/include/bits/socket.h（包含在 libc 中）

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-08T21:13:58.443

1) 裸机`#include <socket.h>`在默认的 linux 配置中不起作用：

```
fatal error: socket.h: No such file or directory 
```

这意味着您还必须在 gcc 搜索路径中指定目录的子目录：（`#include <sys/socket.h>`相对于`/usr/include`，所以绝对路径是`/usr/include/sys/socket.h`）。要确定要使用的头文件，请查看`man socket`.

通常`/usr/include/sys`包含最终用户标头，而`bits`/`asm`包含中间标头，由 gcc 和其他标头使用。`/usr/include/linux`包含特定于 Linux 的头文件（通常与内核共享，因此它是对可能对用户空间编程有用的内核结构的描述）。

Libc 头文件通常分散在整个 /usr/include 中。特定于 Gcc 的标头通常位于诸如此类的地方`/usr/include/x86_64-linux-gnu`。

2) 在这里： http: [//gcc.gnu.org/onlinedocs/cpp/Search-Path.html](http://gcc.gnu.org/onlinedocs/cpp/Search-Path.html)您可以找到有关 GCC 搜索路径的更多信息。没有搜索任何猜测的目录，只是`/usr/include`链接列表中的其他目录。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-08T20:32:50.683

# 对于一般文件

如果您使用 gcc 编译器，这很容易做到

```
gcc -M filename.c 
```

这应该会显示已编译文件的完整依赖项列表。它将包括编译中包含的所有头文件的完整路径。

# 对于系统文件

另一方面，如果您正在寻找系统头文件，`socket.h`例如，您应该查看 socket 的手册页

```
man socket 
```

这应该向您显示类似[这样](http://linux.die.net/man/7/socket)的内容，这很清楚您要查找的文件是`/usr/include/sys/socket.h`

# delphi - 虚拟树视图拖放

> ID：13749495
> 
> 赞同：2
> 
> 时间：2012-12-06T17:50:41.237
> 
> 标签：delphi, drag-and-drop, virtualtreeview

如何在两个 virtualtreeview 之间复制以复制所有列，而不仅仅是第一个？

复制前：

![在此处输入图像描述](../Images/09bbda75f49a91c3ec1d198621e2b978.png)

复制后： ![在此处输入图像描述](../Images/841df8a2d2cc5619ae261c6f5e1bde74.png)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-06T19:38:09.817

树控件不保存任何数据。它不包含您要显示的列数据，因此*无法*复制它。相反，当树控件想要显示任何单元格的数据时，它会通过触发`OnCellText`事件来询问您的程序要显示什么。它显示您的程序告诉它的任何内容。

如果您的复制到控件没有显示您想要的内容，那是因为您`OnCellText`的该控件的事件处理程序没有为其提供必要的数据。

当您复制一个节点时，您有责任确保与源节点关联的信息存储在某个地方，以便目标控件的`OnCellText`事件知道在哪里可以找到目标节点的信息。有很多方法可以做到这一点。这一切都取决于您首先如何复制节点，以及您如何表示`OnCellText`事件使用的基础数据结构。在这些限制范围内，您可以按照自己的方式进行操作。

# xml - 确定以下同级是否包含具有相同值的节点

> ID：13749497
> 
> 赞同：1
> 
> 时间：2012-12-06T17:50:48.480
> 
> 标签：xml, xslt, xpath

我敢肯定这应该很简单——但我在上下文方面遇到了麻烦！

示例 XML：

```
<test>
<HtlSeg>
    <SegNum>1</SegNum>
    <StartDt>20130624</StartDt>
    <NumNights>2</NumNights>
    <Conf>28618</Conf>
</HtlSeg>
<CommentInfo>
    <CommentNum>1</CommentNum>
    <SegMatch>28618</SegMatch>
    <Comment>THIS IS A TEST</Comment>
</CommentInfo>
<CommentInfo>
    <CommentNum>2</CommentNum>
    <SegMatch>28618</SegMatch>
    <Comment>HOTEL BOOKED</Comment>
</CommentInfo>
<CommentInfo>
    <CommentNum>3</CommentNum>
    <SegMatch>28618</SegMatch>
    <Comment>NON REFUNDABLE</Comment>
</CommentInfo>
<CommentInfo>
    <CommentNum>4</CommentNum>
    <SegMatch>1459</SegMatch>
    <Comment>CAR BOOKING</Comment>
</CommentInfo>
<CommentInfo>
    <CommentNum>5</CommentNum>
    <SegMatch>1528</SegMatch>
    <Comment>AIR BOOKING</Comment>
</CommentInfo>
<CommentInfo>
    <CommentNum>6</CommentNum>
    <SegMatch>1528</SegMatch>
    <Comment>NON REFUNDABLE</Comment>
</CommentInfo>
<CommentInfo>
    <CommentNum>7</CommentNum>
    <SegMatch>1528</SegMatch>
    <Comment>NON SMOKING</Comment>
</CommentInfo> 
```

在 XSLT 中，我的上下文节点是`<HtlSeg>`.

我正在尝试访问`<CommentInfo>`节点`<SegMatch>`等于`<Conf>`.`<HotelSeg>`

我试过的xpath是`following-sibling::CommentInfo[SegMatch=Conf]/Comment`

但是不返回任何东西。我认为在 xpath 中使用“Conf”时我已经失去了上下文`<HotelSeg>`- 但我确信这在简单的 Xpath 中必须是可能的，而无需声明变量？

干杯达伦

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-06T18:23:14.873

使用[`current()`方法](http://www.w3.org/TR/xslt#misc-func)

```
[SegMatch=current()/Conf] 
```

# ruby-on-rails-3 - 包括 Capybara::DSL 会使我的所有测试都因错误数量的参数而崩溃

> ID：13749498
> 
> 赞同：2
> 
> 时间：2012-12-06T17:50:49.243
> 
> 标签：ruby-on-rails-3, capybara, rspec-rails, phantomjs, poltergeist

我仍在尝试解决这个问题中概述的基本问题：[Rails Phantomjs, poltergeist, and Capybara not playing well together](https://stackoverflow.com/questions/13572034/rails-phantomjs-poltergeist-and-capybara-not-playing-well-together/13721740#13721740)

基本上我的所有测试都运行良好，但我无法从我的 rspec 测试中使用 PhantomJS / Poltergeist / Capybara 获得有效的屏幕渲染。

使用@theSociable.me 提供的小脚本（如果我单独运行该测试），我**可以**通过 Poltergeist/Capbybara 获得我的一个屏幕的渲染！伟大的！

*但是*，当我将行**include Capybara::DSL**添加到我的测试中时，它们都开始失败并出现以下错误：

```
 Failure/Error: visit signin_path
     ActionView::Template::Error:
       wrong number of arguments (0 for 1) 
```

其中，如果我遵循回溯：

```
# ./app/models/user.rb:118:in `authenticate_with_salt'
# ./app/helpers/sessions_helper.rb:67:in `user_from_remember_token'
# ./app/helpers/sessions_helper.rb:25:in `current_user'
# ./app/helpers/sessions_helper.rb:31:in `signed_in?'
# ./app/views/layouts/_header.html.erb:9:in `_app_views_layouts__header_html_erb__1456931984656374710_70286761365040'
# ./app/views/layouts/application.html.erb:12:in `_app_views_layouts_application_html_erb___847298267570209394_70286745935080'
# ./spec/requests/parties_spec.rb:22:in `block (2 levels) in <top (required)>' 
```

**我的访问 signin_path**行似乎有问题

..任何想法为什么将 Capybara::DSL 包含到我的项目中突然导致所有这些围绕身份验证/登录的大规模失败？

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-28T20:06:19.597

戴夫，我必须查看您的请求规范的内容，但很可能您正在运行 Capybara 2.x，这需要将集成规范放在里面`spec/features`而不是`spec/requests`.

`spec/requests`现在保留用于 API 测试（直接 GET 请求、状态代码和重定向断言等），这就是它不会自动接收 Capybara DSL 的原因——而放置在其中的任何规范`spec/features`都可以。

我们在尝试将 Capybara DSL 的访问权限授予我们的请求规范时遇到了类似的问题，因为我们需要这样做（尽管我不相信这是一个好主意）。这是我最终得到的解决方案，它对我们有用。

您需要将其包含在 RSpec 配置块中，而不是将 Capybara DSL 包含在全局范围内，如下所示：

```
# spec/spec_helper.rb
RSpec.configure do |config|
  config.include Capybara::DSL, type: :request
end 
```

该`type: :request`部分确保 DSL 仅包含在与此特定类型匹配的测试中，基于我相信的目录结构。这似乎不会干扰其他可以访问 Capybara DSL 的测试（例如功能规范）。

希望它能解决你的问题。

# objective-c - 适用于 iOS 和 Mac OS X 的 MacBinary 转换器

> ID：13749502
> 
> 赞同：4
> 
> 时间：2012-12-06T17:50:58.537
> 
> 标签：objective-c, ios, macos, cocoa-touch, cocoa

我正在寻找在 iOS 和 Mac OS X 上转换 MacBinaryIII 编码文件的代码。我能找到的仅有两个是 Christopher Evans [MacBinaryIII](http://www.opensource.apple.com/source/zip/zip-6/unzip/unzip/macos/source/macbin3.h)和 Sean Hummels [MacBinaryIII OSAX 1.0.1](http://www.oocities.org/hummelsean/)，它们都使用 iOS 或 64 位上不可用的 API Mac OS X Obj-C 运行时。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-06T19:19:42.627

您处于一个令人羡慕的境地，不得不重新使用旧代码来处理这种编码，如果在这些日子里根本没有使用那么多的话。只需解码，您的任务就变得更容易了。

在`MacBinaryIII.c/.h`中，执行以下操作：

摆脱`EncodeMacBinaryFile()`, `EncodeMacBinaryFiles()`,`EncodeMacBinary()`和`FSpIsMacBinary()`.

摆脱`SetDesktopComment()`too，并删除它在`DecodeMacBinaryFiles()`and中的使用`DecodeMacBinary()`；如果你想要的只是转换后的文件，这是多余的。

虽然您已经大大简化了事情，但您需要转换代码，以便它与文件路径一起使用，而不是那些`FSSpec`在 Pascal 字符串中保存文件名的结构，最大限制为 31 个字符。为此：

使用 .m 扩展名而不是 .c 重命名文件以处理 Cocoa 内容。

要确定文件是否存在，您可以使用`-[NSFileManager fileExistsAtPath:]`.

对于读取文件，您可以使用`NSFileHandle`quick 和dirty 来获取文件内容进行转换。您将得到一个 NSData 回来，并且需要制作它的可变副本以转换其内容。为了写出转换后的数据，您可以利用 NSMutableData 写出文件的能力。

最后，在执行字节操作时要注意字节序问题。这段代码是在 68000（及其后代）硬件和 PowerPC：big-endian 的时代编写的。

我希望我有一些东西可以放在你的腿上，准备好出发了，但是鉴于这项特殊的任务，这就是我所能提供的。

祝你好运！

# javascript - jquery将光标放在淡入淡出元素中

> ID：13749503
> 
> 赞同：0
> 
> 时间：2012-12-06T17:50:59.263
> 
> 标签：javascript, jquery

如何将光标放在使用另一个函数调用的元素内并淡入？这是我现在拥有的功能：

```
 function ajax_cart() {
   var url = 'shoppingcart.php';    
   jQuery("#carttopcontainer").load(url);
   jQuery('html, body').animate({scrollTop:0}, 'slow');
   jQuery("#carttopcontainer").fadeIn(400);
   jQuery('#carttopcontainer').hoverIntent({
     over: startHover,
     out: endHover,
     timeout: 1000
    });
 } 
```

`#carttopcontainer`div 是一个小弹出窗口，显示使用 ajax post 添加项目后的购物车 div 容器。如果淡入，我想将鼠标光标放在该 div 内的任何位置。

谢谢你。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-06T17:52:50.050

您不能使用 JavaScript 移动用户的光标。如果你想聚焦一个元素，你可以使用[`element.focus()`](https://developer.mozilla.org/en-US/docs/DOM/element.focus)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-07T02:15:21.420

好的，我的问题可能不正确且难以理解，但这就是我想要做的：我有一个 div 出现，然后我需要在几秒钟后隐藏它，但前提是鼠标不在那个 div 上. 如果鼠标越过那个 div，它应该保持可见。此外，如果鼠标离开并快速返回，则可能是偶然的，因此 div 应该仍然可见。以下是我的实现方式：

```
$("#carttopcontainer").delay(3000).animate({height:"hide",opacity:"hide"}, 2000).mouseover(function() {
    $(this).stop(true, false).animate({height:"275px",opacity:1}, 200)}).mouseleave(function() {$(this).animate({height:"hide",opacity:"hide"}, 2000)}); 
```

我很确定有一些更好的解决方案，但是这个对我有用，所以我很高兴。

# mysql - 如果列值不存在，SQL INSERT 新行

> ID：13749511
> 
> 赞同：0
> 
> 时间：2012-12-06T17:51:32.347
> 
> 标签：mysql, sql

我的 SQL 查询遇到了一点问题，并且不断收到我无法弄清楚的语法错误。

有问题的查询是：

```
INSERT INTO $db (uuid, quest, stage, completion, quest_id, dstart) VALUES ('".$avatar_key."','".$quest_name."','".$quest_stage."','".$qc."','".$quest_id."','".$date."') WHERE NOT EXISTS (SELECT *
       FROM $db
       WHERE uuid = '$avatar_key' AND quest_id = '$quest_id'
       ) 
```

我要做的是检查表是否有一行，同时具有 $avatar_key 和 $quest_id 的确切值，如果这样的行不存在，那么我希望它插入一个新行。

我遇到了一个错误，但我似乎不知道如何解决；查询本身在我看来（虽然我是一个 SQL 新手）是 / 应该 / 工作。我正在使用 SQL 5.5，这是我收到的错误消息：

> 您的 SQL 语法有错误；检查与您的 MySQL 服务器版本相对应的手册，以在第 1 行的 'WHERE NOT EXISTS (SELECT * FROM sldb_quest WHERE uuid = '0089dcea-' 附近使用正确的语法

我知道拥有唯一标识符会有所帮助，但数据库将存储大量行，其中许多行将具有相同的值，唯一的唯一值将是 UUID，然后我必须将其与quest_id 以找到我想要的特定行。uuid 看起来像这样：“0089dcea-bf39-40f5-859e-d79bdc383f1b”并且是为每个用户唯一生成的。

任何关于我做错了什么的指针将不胜感激！我敢肯定这只是我设法错过的一个小细节，但我没有找到原因。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-06T18:00:44.603

子句在带有列表的a`WHERE`上无效。您可以使用，但我不确定更新是否是您想要的。`INSERT``VALUES`[`INSERT ... ON DUPLICATE UPDATE`](https://stackoverflow.com/questions/1218905/how-do-i-update-if-exists-insert-if-not-aka-upsert-or-merge-in-mysql)

如果`uuid`（有或没有`quest_id`）设置为唯一键，您可以尝试的最简单的方法是使用`IGNORE`.

```
INSERT IGNORE INTO $db (uuid, quest, stage, completion, quest_id, dstart) 
VALUES ('".$avatar_key."','".$quest_name."','".$quest_stage."','".$qc."','".$quest_id."','".$date."') 
```

如果您还没有唯一的密钥，我强烈建议您制作一个。

# android - Android BACK键点击两次

> ID：13749512
> 
> 赞同：1
> 
> 时间：2012-12-06T17:51:34.643
> 
> 标签：android, android-button

我想在单击一次 BACK 键时显示一些内容，并在单击两次时关闭应用程序。

```
@Override
public boolean onKeyDown(int keyCode, KeyEvent event) {
    if (keyCode == KeyEvent.KEYCODE_BACK) {
        if (/* BACK_KEY_was_clicked_once_again */) {
            finish();
        }
        else
        {
            text.setText(log);
        }

        return true;
    }
    return super.onKeyDown(keyCode, event);
} 
```

抱歉我没有解释清楚

我的应用程序的主要（假设）视图是：text.setText（日志），但是当我单击菜单中的“信息”按钮时：text.setText（信息）。当设置“信息”时，我希望返回按钮：text.setText(log)，当设置“日志”时，我希望返回按钮关闭我的应用程序。

现在我意识到我真正想做的事情，并将代码更改为：

```
public boolean onKeyDown(int keyCode, KeyEvent event) {
if (keyCode == KeyEvent.KEYCODE_BACK) {
  if (text.getText() == log) {
    finish();
  }
  else
  {
    text.setText(log);
  }
  return true;
}
return super.onKeyDown(keyCode, event);
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-06T17:55:20.293

使用类级别字段作为标志来检查是否按两次后退按钮：

```
 public static boolean backtwice=false;  //this is flag

@Override
public boolean onKeyDown(int keyCode, KeyEvent event) {
    if (keyCode == KeyEvent.KEYCODE_BACK) {
        if (backtwice) {
           backtwice=false;  //reset here
            finish();
        }
        else
        {
            text.setText(log);
           backtwice=true;  //set true if first time back pressed
        }

        return true;
    }
    return super.onKeyDown(keyCode, event);
} 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-12-06T17:56:08.017

不确定您要做什么，但是

```
private boolean backPressed = false;
@Override
public boolean onKeyDown(int keyCode, KeyEvent event) {
    if (keyCode == KeyEvent.KEYCODE_BACK) {
        if (backPressed == true) {
            finish();
        }
        else
        {
            backPressed = true;
            text.setText(log);
        }

        return true;
    }
    return super.onKeyDown(keyCode, event);
} 
```

可能会解决您的问题...？

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-07T07:50:38.930

只需添加活动：

```
private boolean doubleBackPressedOnce = false;

@Override
protected void onResume() {
    super.onResume();
    // .... other stuff in my onResume ....
    this.doubleBackPressedOnce = false;
}

@Override
public void onBackPressed() {
    if (doubleBackPressedOnce) {
        super.onBackPressed();
        return;
    }
    this.doubleBackPressedOnce = true;
    Toast.makeText(this, R.string.exit_press_back_twice_message, Toast.LENGTH_SHORT).show();
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-12-06T18:02:32.087

维护一个静态布尔标志

默认情况下将标志初始化为 false。

现在像这样更改代码

```
@Override
public boolean onKeyDown(int keyCode, KeyEvent event) {
if (keyCode == KeyEvent.KEYCODE_BACK) {
      if(flag == false)//indicates back button is pressed 1st time {                
           flag=true;
           //do operation for first back button press
           text.setText(log);              
       }
    else //indicating pressed 2nd time
   {
        finish();
    }
    return true;
}
return super.onKeyDown(keyCode, event);
} 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-12-06T18:13:55.447

```
private boolean twiBackToExitPressedOnce = false;

@Override
protected void onResume() {
    super.onResume();
    // .... other stuff in my onResume ....
    this.twiBackToExitPressedOnce= false;
}

@Override
public void onBackPressed() {
    if (twiBackToExitPressedOnce) {
        super.onBackPressed();
        return;
    }
    this.twiBackToExitPressedOnce= true;
    Toast.makeText(this, R.string.exit_press_back_twice_message, Toast.LENGTH_SHORT).show();
} 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2018-03-11T06:32:20.807

> 单击一次 BACK 键时显示某些内容，单击两次时关闭应用程序

这可以很容易地使用[`DoubleBackPress Android Library`](https://github.com/kaushikthedeveloper/DoubleBackPress), 为这种情况创建。它提供了易于使用的 API，没有任何处理麻烦。

只需执行以下操作：

```
FirstBackPressAction firstBackPressAction = new FirstBackPressAction() {
    @Override
    public void actionCall() {
        // TODO : whatever needs to be shown on the First Back key press 
    }
};

DoubleBackPressAction doubleBackPressAction = new DoubleBackPressAction() {
    @Override
    public void actionCall() {
        // TODO : Exit app code
    }
};

DoubleBackPress doubleBackPress = new DoubleBackPress()
        .withDoublePressDuration(3000)   // msec to wait for second back press
        .withFirstBackPressAction(firstBackPressAction)
        .withDoubleBackPressAction(doubleBackPressAction); 
```

最后，用所需的行为覆盖你的背压行为。

```
@Override
public void onBackPressed() {
    doubleBackPress.onBackPressed();
} 
```

[类似行为的示例 GIF](https://github.com/kaushikthedeveloper/DoubleBackPress#ToastDisplayExample)

# android - 如何在android中为每个产品添加复选框

> ID：13749513
> 
> 赞同：-1
> 
> 时间：2012-12-06T17:51:41.993
> 
> 标签：android, android-layout

当用户单击添加到购物车时，我有一个产品目录屏幕，它将被添加，下一个屏幕显示，其中产品描述和价格将通过删除按钮给出。我想为每个产品添加复选框，并且只有该产品将是删除将在复选框中选中，当用户单击删除按钮时，产品将被删除。我尝试添加复选框，请帮助我如何做到这一点？代码在其下方，包含删除按钮，并且在删除按钮上执行操作。但不是复选框，我怎么能这样做。非常感谢任何帮助。

```
public class CheckOutClass extends Activity implements OnClickListener{
public  static int finalPrice = 0;
int unitPrice=0 ;
int quantity =0 ;
int[] totalPrice = null;
ImageView[] btnRemove = null;
LinearLayout ll = null;
ScrollView sv  =null;
@Override
public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);

    sv = new ScrollView(this);
    ll = new LinearLayout(this);
    ll.setOrientation(LinearLayout.VERTICAL);
    sv.addView(ll);
    LoadUi();
}

public void LoadUi(){

    int lengthOfRecords = helper.vctrcategoryIds.size();
    btnRemove = new ImageView[lengthOfRecords];

    for(int i = 0; i < helper.vctrcategoryIds.size(); i++) {
            getPackageName());

    ImageView imgView = new ImageView(this);
    imgView.setImageBitmap(helper.vctrImages.elementAt(i));
    ll.addView(imgView);

    TextView txtDescription=  new TextView(this);
    txtDescription.setText(helper.vctrdescription.elementAt(i).toString());
    ll.addView(txtDescription);

    TextView txtPrice=  new TextView(this);
    txtPrice.setText("Unit Price: " + helper.vctrprice.elementAt(i));
    ll.addView(txtPrice);

    TextView txtQuantity=  new TextView(this);
    txtQuantity.setText("Quantity: "+ helper.vctrQuantity.elementAt(i));
    ll.addView(txtQuantity);

    //remove button

 btnRemove[i]=  new ImageView(this);
 btnRemove[i].setImageResource( R.drawable.remove );
 btnRemove[i].setMaxHeight(40);
 btnRemove[i].setMaxWidth(35);
 btnRemove[i].setAdjustViewBounds(true);
 btnRemove[i].setId(i);
 btnRemove[i].setOnClickListener(this);
 ll.addView(btnRemove[i]);

}

    totalPrice = new int[helper.vctrprice.size()];

    for(int i=0;i<helper.vctrprice.size();i++){

           String strPrice1 = helper.vctrprice.elementAt(i).toString();
           unitPrice = Integer.parseInt(strPrice1);
           String strQuantity1 = helper.vctrQuantity.get(i).toString();
           quantity = Integer.parseInt(strQuantity1);

           totalPrice[i] = unitPrice*quantity;

           System.out.println("Total price: per product: " + totalPrice[i]);
          }
                int finalPrice = 0;
                for(int i=0;i<totalPrice.length;i++){

                      finalPrice =  finalPrice + totalPrice[i];

                }

            System.out.println("final Price: " + finalPrice);
           helper.finalprice = finalPrice;

           String str =  Integer.toString(finalPrice);
           TextView txtfinalprice=  new TextView(this);
           txtfinalprice.setText("Total Price: " + str);

           ll.addView(txtfinalprice);

           ImageView btnAddMore = new ImageView(this);
           btnAddMore.setImageResource( R.drawable.moreprod );
           btnAddMore.setMaxHeight(40);
           btnAddMore.setMaxWidth(35);
           btnAddMore.setAdjustViewBounds(true);
           ll.addView(btnAddMore);

           btnAddMore .setOnClickListener(new OnClickListener() {

        public void onClick(View v) {
            // TODO Auto-generated method stub

            Intent i = new Intent("com.test.spinnerdem",null);
            startActivity(i);
        }
    });

    ImageView procedCheckout = new ImageView(this);
    procedCheckout.setImageResource( R.drawable.proceed );
    procedCheckout.setMaxHeight(40);
    procedCheckout.setMaxWidth(35);
    procedCheckout.setAdjustViewBounds(true);

        ll.addView(procedCheckout);

    procedCheckout.setOnClickListener(new OnClickListener() {

        public void onClick(View v) {
            // TODO Auto-generated method stub
            if(helper.userLoggedIn == null){
            Intent i = new Intent("com.test.androidlogin",null);
            startActivity(i);
            }
            else {

                   Toast.makeText(CheckOutClass.this, "User Logged In", Toast.LENGTH_LONG).show();
                   Intent i = new Intent("com.test.billing", null);
                   startActivity(i);

            }
        }
    });

    this.setContentView(sv);

}

public void onClick(View v) {
    // TODO Auto-generated method stub
    ll.removeAllViews();
    int Id = v.getId();
    System.out.println("Button Clicked"+ v.getId());
    helper.vctrIds.removeElementAt(Id);
    helper.vctrshopIds.removeElementAt(Id);
    helper.vctrcategoryIds .removeElementAt(Id);
    helper.vctrproducts.removeElementAt(Id);
    helper.vctrprice.removeElementAt(Id);
    helper.vctrdescription.removeElementAt(Id);
    helper.vctrImages.removeElementAt(Id);
    helper.vctrQuantity.removeElementAt(Id);

    LoadUi();

        }} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-06T17:58:31.063

看[这里的代码](https://stackoverflow.com/questions/1505751/android-binding-data-from-a-database-to-a-checkbox-in-a-listview)

您可以在列表视图中选择多个项目。[在这里](http://appfulcrum.com/?p=281)检查

# css - IE中的CSS下拉菜单缺少背景

> ID：13749516
> 
> 赞同：1
> 
> 时间：2012-12-06T17:51:49.700
> 
> 标签：css

这可能是 z-index 问题，但我无法诊断确切的问题。

要查看问题，请访问[http://beta.pancreaticcanceraction.org/](http://beta.pancreaticcanceraction.org/)

将“preview2012”添加到该 URL 的末尾以访问该站点（我不想放下整个链接以防它被抓取）。

这是我遇到困难的顶部导航。它在 Firefox 和 Chrome 上运行良好，但现在在 IE9 中进行测试我发现只出现了子导航的外壳。在边界内只有一个空白窗口。

我正在尝试各种各样的事情，但老实说，我还没有什么想法，需要更多的关注。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-06T18:48:57.800

您会很高兴知道修复相对简单。只需从您的规则中删除`position:relative`和，如下所示。不幸的是，IE 不能很好地使用and 。`z-index``nav``position:relative``filter`

```
nav{
    background:#403a76;
    background:-moz-linear-gradient(top,#483a76 0,#594990 100%);
    background:-webkit-gradient(linear,left top,left bottom,color-stop(0%,#483a76),color-stop(100%,#594990));
    background:-webkit-linear-gradient(top,#483a76 0,#594990 100%);
    background:-o-linear-gradient(top,#483a76 0,#594990 100%);
    background:-ms-linear-gradient(top,#483a76 0,#594990 100%);
    background:linear-gradient(to bottom,#483a76 0,#594990 100%);
    filter:progid:DXImageTransform.Microsoft.gradient(startColorstr='#483a76',endColorstr='#594990',GradientType=0);
    border-bottom:1px solid #393363;
    box-shadow:0 1px 1px #615d8d;
    height:5rem;
    position:relative; /* delete this */
    margin-bottom:0;
    z-index:10 /* delete this */
} 
```

# python - Google App Engine 中的页面重定向页面

> ID：13749517
> 
> 赞同：2
> 
> 时间：2012-12-06T17:51:53.177
> 
> 标签：python, google-app-engine, redirect, dns, webapp2

我最近更改了在 Google App Engine 上运行的 web 应用程序的域名，我想知道是否有一种简单的方法可以将页面从旧网站重定向到新域。代码方面的一切都保持不变，但我只是希望它进入新域。

我正在为 web 应用程序使用 python 和 webapp2 框架。

我知道我可以通过，并且为每个处理程序做：

```
webapp2.redirect('the specific url', permanent=True) 
```

但我希望有一个更优雅的解决方案。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-06T18:53:29.620

您可以只进行全局 url 重写。基本上，您的 web 应用程序已经匹配请求的 URL 并将其定向到`webapp2.WSGIApplication`对象中的适当代码，因此您可以简单地让所有 URL 匹配到相同的`class`，可能与`('/*', myclass)`或类似的东西，然后让该页面将用户重定向到相应的新网站的页面。例子：

```
import webapp2
newdomain = 'http://www.mynewdomain.com/'

class RedirectPage(webapp2.RequestHandler):
    def get(self, restofurl):
        return webapp2.redirect(newdomain + restofurl, permanent=True)

app = webapp2.WSGIApplication([webapp2.Route(r'/<restofurl:.*>', handler=RedirectPage, name='redirect_page')]) 
```

不幸的是，我目前无法对其进行测试以 100% 确定它是否有效，但我知道它至少在理论上会有效。理想情况下，我更喜欢 Apache URL 重写，但我认为您没有该选项。

# frequency - 每个 Bucket 中的 Oracle WIDTH_BUCKET 计数

> ID：13749519
> 
> 赞同：0
> 
> 时间：2012-12-06T17:52:00.457
> 
> 标签：frequency

我有像客户订单这样的父子表。每个订单必须属于一个且仅一个客户，一个客户有零个、一个或多个订单。

如何获得 COUNTS 个订单的频率分布。所以输出将是： 0-100 个订单的客户数量 101-200 个订单的客户数量 201-300 个订单的客户数量。

我不关心客户 ID，只关心订单数量。

我试图使用 WIDTH_BUCKET 函数，但它不会对每个存储桶中的项目数进行分组和计数。除了 WIDTH_BUCKET 之外，也许还有另一种方式。

谢谢亚历克斯

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-07T18:29:57.963

昨晚我对这个问题进行了一些研究，并且靠着上帝的恩典找到了一个解决方案，可以让您（好的，您的业务合作伙伴）定义存储桶大小，并计算分发频率计数。

在这里——（对不起，这个网站的格式不好）谢谢你的帮助！！亚历克斯

```
with starter as(
select cust.customer_id, count(o.order_id) as row_count
from CUSTOMER cust  LEFT JOIN ORDER o
using (customer_id)
where cust.last_update_user = 'MDM_ETL' and
o.last_update_user = 'MDM_ETL' -- and
group by cust.customer_id
order by row_count desc)
select 5 , '2000 or more' as cnt_of_orders, count(starter.customer_id) as          
nmb_customers_with_this_cnt from starter where starter.row_count >= 2000
union 
select 4, '1500 - 1999' as cnt_of_orders, count(starter.customer_id) as    
nmb_customers_with_this_cnt from starter where starter.row_count between 1500 and 1999
union 
select 3, '1000 - 1499' as cnt_of_orders, count(starter.customer_id) as    
nmb_customers_with_this_cnt from starter where starter.row_count between 1000 and 1499
union 
select 2, '500 - 999' as cnt_of_orders, count(starter.customer_id) as   
nmb_customers_with_this_cnt from starter where starter.row_count between 500 and 999
union 
select 1, '0 - 499' as cnt_of_orders, count(starter.customer_id) as    
nmb_customers_with_this_cnt from starter where starter.row_count between 0 and 499 
```

# ms-access - 删除Access中数字后面的空格

> ID：13749520
> 
> 赞同：3
> 
> 时间：2012-12-06T17:52:03.910
> 
> 标签：ms-access, ms-access-2007, sql-update

我有一列有 7 位数字。导入数据时，每个数字后面都导入了 3 个空格。我在更新/选择查询中尝试了几种不同版本的 Trim() ，但没有成功。我正在使用 Access 2007。

以下是我尝试过的不同方法：

选择查询

```
Expr1: Trim([Number])
Expr1: RTrim([Number]) 
```

和更新查询

```
UPDATE Table SET [Number] = Replace([Number], " ", ""); 
```

[http://office.microsoft.com/en-us/access-help/remove-spaces-from-the-beginning-and-end-of-a-text-value-HP001099033.aspx](http://office.microsoft.com/en-us/access-help/remove-spaces-from-the-beginning-and-end-of-a-text-value-HP001099033.aspx)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-06T18:23:16.307

虽然我不明白为什么这些努力失败了，但我建议你试试这个`UPDATE`说法。

```
UPDATE [Table] SET [Number] = RTrim([Number]) 
```

如果这不删除尾随空格，当您尝试它时会发生什么？有错误信息吗？您是否可能已经`SetWarnings`关闭了可以抑制错误消息的功能？

还要检查这些字段值是否包含不可见且可能干扰修剪空格的字符。例如，您可以检查每个字段中最后一个字符的 ASCII 值，如下所示：

```
SELECT Asc(Right([Number], 1)) AS ascii_value
FROM [Table]; 
```

空格字符是 ASCII 32。

最后，如果这些建议不能引导您找到解决方案，请检查以确认该字段包含您期望的内容。

```
SELECT [Number]
FROM [Table]
WHERE [Number] ALike '%   '; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-06T19:13:49.327

您可以使用正则表达式。这将过滤掉所有非数字。
您必须在 VBA 中创建一个从您的查询中调用的函数。所以，试试这个：

```
Function NumOnly(S As String) As String
   Dim regex As New RegExp
   regex.Pattern = "[^0-9.-]"
   regex.IgnoreCase = True
   regex.Global = True
   NumOnly = regex.Replace(S, "")
End Function 
```

并这样使用它：

```
UPDATE Table SET [Number] = NumOnly([Number]); 
```

# javascript - 在 Facebook 应用中插入 Mapbox

> ID：13749521
> 
> 赞同：2
> 
> 时间：2012-12-06T17:52:05.893
> 
> 标签：javascript, facebook, http, facebook-apps, mapbox

我正在尝试创建一个使用 Mapbox 地图的 Facebook 应用程序，但在我的第一次测试中我发现了一个问题，js 错误控制台：

[阻止] [https://xxx-7388.herokuapp.com/?fb_source=appcenter&fb_appcenter=1#/games的页面运行来自](https://xxx-7388.herokuapp.com/?fb_source=appcenter&fb_appcenter=1#/games)[http://a.tiles.mapbox.com/v3/xxx.map-e4gilw29](http://a.tiles.mapbox.com/v3/xxx.map-e4gilw29.jsonp?callback=grid)的不安全内容[.jsonp?callback=grid](http://a.tiles.mapbox.com/v3/xxx.map-e4gilw29.jsonp?callback=grid)。

我认为问题在于 mapbox.layer() 从 MapBox api 接收地图尾部 png 的调用：

```
 var map = mapbox.map('map');
    map.addLayer(mapbox.layer().id('xxx.map-e4gilw29')); 
```

在这一刻，我使用 ruby​​ facebook 应用程序的 heroku 模板创建了一个应用程序。

您是否认为没有对 MapBox api 的 https 调用无法解决问题？或者如果不使用包含地图和我的应用程序的 iframe 就不可能解决问题？

有人遇到过同样的问题，还是类似的？你有什么建议吗？

感谢关注。此致。（对不起我的英语）阿尔贝托

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-06T22:57:19.983

在[http://support.mapbox.com/](http://support.mapbox.com/)中回答了这个问题- 您需要使用 SSL。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-12-05T21:08:15.207

看起来您使用的是旧版本的 mapbox.js。你在打电话`L.mapbox.map()`吗？最新版本的 MapBox 仅使用 SSL。

# combobox - Ajax Combobox - SelectedIndex 删除后未更改

> ID：13749524
> 
> 赞同：0
> 
> 时间：2012-12-06T17:52:08.157
> 
> 标签：combobox, selectedindex

从 ajax 组合框中删除所有文本不会导致 selectedindex 更改。如果我选择第 0 项然后删除所有内容，或者只留下空格，它仍然说第 0 项被选中。有人知道解决方案吗？除了“下拉列表”，我越来越后悔试图用这种可怕的，可怕的，漂亮的，但可怕的控制来取代它......

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-06T20:14:02.723

```
$(".formcombobox :input[type=text]").each(function (i) {
  this.onblur = function () {
    var comboBox = $find(this.parentNode.parentNode.parentNode.parentNode.parentNode.id); // the combobox
    if (jQuery.trim(comboBox.get_textBoxControl().value) == "") { // if textbox is empty
      comboBox.set_selectedIndex(-1);                             // then set selected index to -1                       
    }
  }
}); 
```

假设组合框有 class="formcombobox"，这会将 onblur 事件附加到文本框，并且 set_selectedIndex() 函数会触发更改事件，因此这将在用户*留下*空白值时更正索引并允许我处理更改

我觉得可能有更好的方法来获得父母，但是，无论如何。对我来说已经足够了

我想知道如果有一个合法的空白选项会有所不同......

# mysql - 关系型数据库设计多用户类型

> ID：13749525
> 
> 赞同：11
> 
> 时间：2012-12-06T17:52:12.193
> 
> 标签：mysql, database-design, relational-database

我有 4 种类型的用户，每一种都有特定的数据，但他们也共享公共数据，比如`username`，`password`..

我的第一个想法是创建一个带有列的主`users`表。`user_type`然后在查询用户数据时，我可以先选择他们`user_type`，然后根据`output`运行不同的查询来获取“用户类型”特定数据。我不喜欢这个，因为我希望我可以通过一个查询获取所有与用户相关的数据，并且最好使用外键。

第二个想法是在表中没有`user_type`列，`users`而是使用来自特定用户类型表的外键将指向主`users`表的一行。我更喜欢这样，但我想我将不得不运行 N 个查询，其中 N 是每次我需要获取用户数据时的用户类型数。

还有其他选择吗？在这种情况下，好的做法是什么？

非常感谢

* * *

## 回答 #1

> 赞同：22
> 
> 时间：2012-12-06T20:50:36.290

您的案例看起来像类/子类的实例。

有两种经典的方式来设计 SQL 表来处理子类。每个都有优点和缺点。

一种方式称为“单表继承”。在此设计中，所有类型的用户都只有一个表。如果给定列不属于给定行，则交集为 NULL。可以添加一列来指示用户类型。

另一种方式称为“类表继承”。这很像 Nanego 给出的答案，只是做了一些小改动。有一个用户表，包含所有常见数据和一个 id 字段。每个子类都有一个表，其中包含与该子类相关的数据。id 字段通常设置为用户表中匹配行中 id 字段的副本。这样子类键就可以起到双重作用，既作为主键又作为引用用户表的外键。最后一种技术称为“共享主键”。它需要在插入时进行一些编程，但非常值得。它加强了关系的一对一性质，并加速了必要的连接。

您可以将所有这三种设计作为 SO 中的标签或作为网络上的文章查找。

[单表继承](/questions/tagged/single-table-inheritance "显示标记为“单表继承”的问题") [类表继承](/questions/tagged/class-table-inheritance "显示标记为“类表继承”的问题") [共享主键](/questions/tagged/shared-primary-key "显示标记为“共享主键”的问题")

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-12-06T18:17:27.967

虽然它更有效地利用了磁盘空间，但拆分成单独的表的问题是您实际上需要条件连接 - 基于 user_type 连接到用户类型特定的表。编写 SQL 代码是一件很痛苦的事情，而现在谁在乎磁盘空间？

更好的选择是让一个用户表具有足够的列来存储有关*任何*用户类型的信息，因为知道某些列不会用于某些用户类型。具有未使用列的“低效率”将在执行速度和查询简单性方面得到补偿。

它也很容易扩展，以防您获得另一种用户类型 - 添加列比添加表要容易得多，并且随着您添加更多用户类型，对新列的需求会减少（只是没有那么多不同关于您需要存储的用户的信息）

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-06T18:08:04.610

我的做法是创建一个包含公共字段的表“Person”，并为每种类型的用户创建一个表，并使用外键“person_id”。

在您的请求中，您只需使用 foreign_key 连接两个表，即可获取一种类型用户的所有数据。

你有多少类型的用户？

# eclipse - 在不使用 Eclipse 的情况下运行 Selenuim 测试用例/套件

> ID：13749527
> 
> 赞同：1
> 
> 时间：2012-12-06T17:52:14.530
> 
> 标签：eclipse, testing, selenium, selenium-grid

我一直在搜索运行导出的 selenium 测试/案例，我发现的只是在 Eclipse 中运行它并使用 TestNG 插件。有什么方法可以在不使用 eclipse 的情况下运行它们？就像通过命令行运行它一样。顺便说一下，我正在为我的 Selenium Grid 服务器和节点使用 Windows VM。非常感谢您的帮助。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-06T18:15:36.697

Testng 测试可以通过命令行调用。文档[在这里](http://testng.org/doc/documentation-main.html#running-testng)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-07T05:19:33.457

当然**，无论您使用的是 Junit 还是 TestNG 框架，您都可以使用命令行调用您的测试**。

**甚至您可以在不使用任何框架的情况下在 java 类的 main 方法中编写测试，**并像往常一样从命令行运行该 java 程序。

要通过命令行运行**Junit 测试用例，**请参阅此链接：[Junit from command line](http://junit.sourceforge.net/doc/faq/faq.htm#running_4)

要**通过命令行运行 TestNG 测试用例，**请参阅此链接：[从命令行运行 TestNG](http://testng.org/doc/documentation-main.html#running-testng)

# sql - 使用 2 个查询的结果构造一个表

> ID：13749533
> 
> 赞同：1
> 
> 时间：2012-12-06T17:52:26.450
> 
> 标签：sql, sql-server, sql-update

我有 2 个查询：

```
SELECT p.assetid, 
p.TagId, 
SUM(CASE WHEN p.isrepeat = 1  then 1 else 0 END) as 'Repeats',
SUM(CASE WHEN p.isrepeat = 0  then 1 else 0 END) as 'Non-Repeats',
CAST(SUM(CASE WHEN p.isrepeat =1 then 1 else 0 END) as DECIMAL)/COUNT(*)as 'Percent of Repeats'
from POSITION p
group by p.tagid, p.assetid
order by 1 
```

和

```
SELECT p.AssetID, p.tagid, COUNT(*)
from POSITION p,
TEMP t
where t.beginning_X = p.X
and t.beginning_Y = p.y
and p.isrepeat = 1
and t.AssetID = p.AssetID
and t.Total_Distance_Traveled > 1
group by p.AssetID, p.tagid
order by 1 
```

我想将他们的输出合并到一个包含以下列的结果表中：

> ```
> AssetID,
> TagID, 
> Repeats (from the first query),
> Non-Repeats (from the first query),
> % of Repeats (from the first query),
> Calc1 (difference of repeats in first query and count result from second query, grouped by asset id),
> Calc1% (Calc1 result/repeats from the first query, grouped by assetid),
> Calc2 (count result from the second query, grouped by assetid)
> Cacl2%(Calc2 result/repeats from the first query, grouped by assetid) 
> ```

我首先创建了一个临时表来保存结果，并且我可以成功插入第一个查询的结果，但我不知道如何使用第二个查询更新表并计算百分比列。我怎样才能让它工作？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-06T18:14:18.190

您可以使用一个查询来执行此操作，请参见下文

```
;WITH CTE AS (
SELECT 
--q1
p.assetid, 
p.TagId, 
SUM(CASE WHEN p.isrepeat = 1  then 1 else 0 END) as 'Repeats',
SUM(CASE WHEN p.isrepeat = 0  then 1 else 0 END) as 'Non-Repeats',
CAST(SUM(CASE WHEN p.isrepeat =1 then 1 
         else 0 END) as DECIMAL)/COUNT(*)as 'Percent of Repeats',

--q2
COUNT(t.AssetID) CNT2,

from POSITION p
LEFT OUTER JOIN TEMP t ON t.beginning_X = p.X 
                       and t.beginning_Y = p.y and t.AssetID = p.AssetID
                       AND p.isrepeat = 1 and t.Total_Distance_Traveled > 1

group by p.tagid, p.assetid
)

SELECT
Assetid, TagId, Repeats, Non-Repeats, [Percent of Repeats],
(repeats - cnt2) calc1, ((repeats - cnt2)/repeats [Per calc1],
(cnt2) calc2, (cnt2/repeats) [Per calc2]
FROM CTE 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-06T18:02:11.150

假设您分别在`@table1`和中获得了每个查询的结果`@table2`，那么这应该为您完成：

```
SELECT t1.AssetID, t1.TagID, t1.Repeats, t1.nonrepeats, t1.percentofrepeats,
    (t1.repeats - t2.count) AS 'Calc1',
    ((t1.repeats - t2.count) / t1.repeats) AS 'Calc1%',
    t2.count AS 'Calc2',
    (t2.count / t1.results) AS 'Calc2%'
FROM @table1 t1
JOIN @table2 t2 ON t1.assetid = t2.assetid AND t1.tagid = t2.tagid 
```

请注意，我使用的列名需要与您的源数据对齐（例如`percentofrepeat`），因此请注意这一点，并根据您的喜好调整名称。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-06T17:55:31.513

您可以从这两个查询创建一个视图并插入到视图中。所以基本上你需要创建3个视图

```
create view v1 as 
SELECT p.assetid, 
p.TagId, 
SUM(CASE WHEN p.isrepeat = 1  then 1 else 0 END) as 'Repeats',
SUM(CASE WHEN p.isrepeat = 0  then 1 else 0 END) as 'Non-Repeats',
CAST(SUM(CASE WHEN p.isrepeat =1 then 1 else 0 END) as DECIMAL)/COUNT(*)as 'Percent of Repeats'
from POSITION p
group by p.tagid, p.assetid
order by 1

create view v2 as
SELECT p.AssetID, p.tagid, COUNT(*)
from POSITION p,
TEMP t
where t.beginning_X = p.X
and t.beginning_Y = p.y
and p.isrepeat = 1
and t.AssetID = p.AssetID
and t.Total_Distance_Traveled > 1
group by p.AssetID, p.tagid
order by 1

create view v3 as 
select AssetID, TagID, Repeats, Non-Repeats, Percent of Repeats,calc1(do ur cal), calc2, calc2% from v1, v2 where ... 
```

希望能帮助到你！

# c++ - 如何以编程方式获取 Bada 中的 MEID/ESN？

> ID：13749536
> 
> 赞同：1
> 
> 时间：2012-12-06T17:52:32.803
> 
> 标签：c++, mobile, samsung-mobile, bada, serial-number

我正在尝试在三星的 Bada OS 上使用 C/C++ 访问 MEID/ESN。如果有人能指出我正确的方向（网站、文档等），我将不胜感激。

非常感谢！-卡姆兰

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-02T19:02:46.033

MEID和IMEI一样吗？后者可以通过以下方式检索`SystemInfo`：

```
String s;
Osp::System::SystemInfo::GetValue(L"IMEI", s); 
```

这没有记录，并且可能会在某个时候停止工作。

还有`Osp::Telephony::SimInfo`一个类返回一大堆三个字母的首字母缩写词。看看其中之一是否是您需要的。

# drupal - 如何更改 drupal7 文章中的字体和字号？

> ID：13749538
> 
> 赞同：-1
> 
> 时间：2012-12-06T17:52:46.550
> 
> 标签：drupal, drupal-7

我有这篇文章：

> 首先你要取出圣别针，然后你数到三，不多也不少。三是你要数的数，数的数是三。你不能算四，也不能算二，除非你接着算到三。五号就出来了。一旦达到第三个数字，即第三个数字，那么你将安提阿的神圣手榴弹向你的敌人投掷，他在我看来很顽皮，会扼杀它。”

我要做的就是控制字体属性。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-07T08:00:06.840

使用可用的几个检查器之一（Firebug、Dragonfly 等）并检查文章。

输出，尤其是右侧的输出是您正在寻找的。font-size 属性将与样式表和行号一起显示。调整为您想要的任何字体大小。

# c++ - std::map std::find 的问题

> ID：13749544
> 
> 赞同：0
> 
> 时间：2012-12-06T17:52:50.613
> 
> 标签：c++, debugging, gdb, daemon

我有工作的 C++ 守护进程。问题是守护程序每月崩溃一到两次。正如您从下面的 GDB 输出中看到的那样，当守护程序在容器中搜索`unsigned int`sessionID 时会发生这种情况。`std::map <unsigned int const, SessionID*>`我无法重现该问题，并认为它可能来自用户的数据有问题（可能`std::sting cookie_ssid`有一些意外数据，转换后`strtoul`出现问题。（*知道，这不是正确的获取方式`unsigned int`*）

`.core`守护进程崩溃后我只有文件。并在`if (!_M_impl._M_key_compare(_S_key(__x), __k))`. 任何想法如何解决这个问题？非常感谢。

GDB 输出：

```
#0  std::_Rb_tree<unsigned int, std::pair<unsigned int const, SessionID*>, std::_Select1st<std::pair<unsigned int const, SessionID*> >, std::less<unsigned int>, std::allocator<std::pair<unsigned int const, SessionID*> > >::find (this=0x529df15c, __k=@0x7f5fab7c)
    at stl_tree.h:1376
##########
1376            if (!_M_impl._M_key_compare(_S_key(__x), __k))
##########
#0  std::_Rb_tree<unsigned int, std::pair<unsigned int const, SessionID*>, std::_Select1st<std::pair<unsigned int const, SessionID*> >, std::less<unsigned int>, std::allocator<std::pair<unsigned int const, SessionID*> > >::find (
    this=0x529df15c, __k=@0x7f5fab7c) at stl_tree.h:1376
#1  0x0805e6be in TR::find_session (this=0x529df110,
    cookie_ssid=@0x47ef3614, ptr_to_ptr_session=0x7f5fac7c)
    at stl_map.h:542 
```

函数`TR::find_session`发布如下：

```
bool TR::find_session ( const std::string &cookie_ssid, SessionID **ptr_to_ptr_session )
{
    unsigned int uint_sessionid = std::strtoul ( cookie_ssid.c_str(),NULL,0);

MUTEX_map_sessionids.lock_reading();
    std::map<unsigned int, SessionID*>::iterator it_sessionids = map_sessionids.find( uint_sessionid );

    if ( it_sessionids != map_sessionids.end() )
    { // exists
        *ptr_to_ptr_session = it_sessionids->second;
        MUTEX_map_sessionids.unlock();
        return true;
    }

MUTEX_map_sessionids.unlock();  
return false;   
} 
```

**编辑** 我的清理功能，在分离线程（每分钟一次或 5 分钟）工作。根据评论的要求。我不确定这个功能。也许它的越野车......

```
void TR::cleanup_sessions () // not protected from multithread using! used only at one thread
{
std::list<SessionID*> list_to_clean; // tmplary store sessions to delete

MUTEX_map_sessionids.lock_reading();
std::map<unsigned int, SessionID*>::iterator it_sessionids = map_sessionids.begin();
MUTEX_map_sessionids.unlock();

while ( true )
{
    MUTEX_map_sessionids.lock_writing();
    if (it_sessionids == map_sessionids.end() )
    {
        MUTEX_map_sessionids.unlock();
        break;
    }

    SessionID *ptr_sessionid = it_sessionids->second;

    time_t secondsnow = time (NULL);

    ptr_sessionid->MUTEX_all_session.lock_reading();
    time_t lastaccesstime = ptr_sessionid->last_access_time;
    size_t total_showed = ptr_sessionid->map_showed.size(); 
    ptr_sessionid->MUTEX_all_session.unlock();

    if ( lastaccesstime and secondsnow - lastaccesstime > LOCALSESSION_LIFETIME_SEC ) // lifetime end!
    {
        // delete session from map
        map_sessionids.erase( it_sessionids++ ); // Increments the iterator but returns the original value for use by erase
        MUTEX_map_sessionids.unlock();              

        list_to_clean.push_back ( ptr_sessionid ); // at the end
    }
    else if ( total_showed == 0 and secondsnow - lastaccesstime > 36000 ) // not active for N secontes
    {
        map_sessionids.erase( it_sessionids++ ); // Increments the iterator but returns the original value for use by erase
        MUTEX_map_sessionids.unlock();

        // add pointer to list to delete it latter
        list_to_clean.push_back ( ptr_sessionid ); // at the end            
    }
    else
    {
        ++it_sessionids; // next
        MUTEX_map_sessionids.unlock();              
    }

}

// used? pause
if ( !list_to_clean.empty() ) 
{
    //sleep(1);
}

// cleanup session deleted from working map
while ( !list_to_clean.empty() )
{
    SessionID *ptr_sessionid_to_delete = list_to_clean.front();
    list_to_clean.pop_front();

    ptr_sessionid_to_delete->MUTEX_all_session.lock_writing(); // protected lock session mutex. can not delete session if its already locked. (additational protection)
    ptr_sessionid_to_delete->cleanup();
    delete ptr_sessionid_to_delete;
} 
```

}

**注意**，正如您在每次迭代中看到的那样，我锁定/解锁 map_sessions，因为此时其他线程会查找/插入新会话及其关键，因为用户不能等待。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-06T19:58:44.913

请注意，对映射的任何修改都可能使该映射中的任何迭代器无效。你有：

```
MUTEX_map_sessionids.lock_reading();
std::map<unsigned int, SessionID*>::iterator it_sessionids = map_sessionids.begin();
MUTEX_map_sessionids.unlock(); 
```

现在，在此解锁之后，其他一些线程可能会立即获取锁并执行一些使 无效的操作`it_sessionids`，这将使其处于后续代码将破坏映射的状态，从而导致以后的崩溃。

您需要在迭代器的整个生命周期内获取并持有一个锁。看起来你有读/写锁，所以你只需要一直持有读锁，当你想修改地图时将其升级为写锁，然后在修改后立即将其降级为读锁。长时间持有读锁只会阻塞其他想获取写锁的线程，不会阻塞其他只需要读锁的线程。

在评论中回答您的问题：

1.  如果你不能长时间持有锁，那么你就不能让迭代器在很长一段时间内保持有效。您可以做的一件事是偶尔记住您在地图中的大致位置，释放锁（给其他线程一个机会并使迭代器无效），然后重新获取锁并在大致相同的点创建一个新的迭代器。您可以在循环中间添加类似这样的内容：

    ```
    if (++count > limit) { // only do this every Nth iteration
        unsigned int now_at = it_sessionids->first;
        MUTEX_map_sessionids.unlock();
        // give others a chance
        MUTEX_map_sessionids.lock_reading();
        it_sessionids = map_sessionids.lower_bound(now_at);
        count = 0; } 
    ```

2.  将锁从只读升级为读/写是您的实现可能不支持的对读/写锁的原始操作。如果没有，那么你就不走运了，需要一直持有作家锁。

# javascript - 在 javascript 和 Jquery 中使用“this”

> ID：13749549
> 
> 赞同：0
> 
> 时间：2012-12-06T17:53:28.810
> 
> 标签：javascript, jquery, this

我正在尝试简化井字游戏的一些代码。

网格的每个扇区都有“tictactoe”类和指定其区域的 id，例如“upleft”。我的想法是，`onclick`在 html 元素中，将调用一个 JavaScript 函数，该函数将在该空间中显示一个 X。

所以这就是我所拥有的：

HTML 元素：

```
<td id="upleft" onclick="displayX()" class="tictactoe"></td> 
```

JavaScript/JQuery 函数：

```
 function displayX()
                {
                        $('#upleft').text("x");
                } 
```

基本上我想将函数更改为使用“this”而不是“#upleft”

但是，当我这样做时：

```
 function displayX()
                {
                        $(this).text("x");
                } 
```

不显示任何文本是指定的网格向上。首先，“this”函数是否将代码放入指定的id中？其次，我该如何解决这个问题？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-12-06T17:55:30.733

**定义函数 Inline**时需要将**DOM 元素**作为 a传递`argument to the function`

 **```
onclick="displayX(this)" 

function displayX(elem)
{
    $(elem).text("x");
} 
```

编写**内联 javascript 是个坏主意..** ..**避免它..**

最好将事件附加在`javascripe file..`

```
$("td").on('click', function () {
   $(this).text("x");
}); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-06T17:55:01.810

由于您使用的是 jQuery，您可以使用`.on`如下所示绑定处理程序，

```
$("#upleft").on('click', function () {
   $(this).text("x");
}); 
```

这比`onclick`在 html 上使用要好。如果您仍想使用 ，`onclick`则需要通过`this`. 见下文，

然后在你的js中，

```
 function displayX(obj) {
    $(obj).text("x");
 } 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-06T17:57:01.903

您可以使用 jquery 绑定事件。做

```
$("#upleft").click(function(event){displayX(event)});

function displayX(event)
{
    $(event.target).html("X");
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-12-06T17:56:36.807

更改您的 HTML 元素以传递`this`：

```
<td id="upleft" onclick="displayX(this)" class="tictactoe"></td> 
```

然后将您的功能修改为：

```
function displayX(el)
{
    $(el).text("x");
} 
```**

# file - 动态 Gnuplot 图

> ID：13749553
> 
> 赞同：5
> 
> 时间：2012-12-06T17:53:50.153
> 
> 标签：file, dynamic, graph, gnuplot

我有一个不断更新的数据文件。我想使用 Gnuplot 动态绘制更新数据文件，可能使用最后 100 个数据点的窗口。

是否可以？如果是这样，一些指针表示赞赏。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-06T21:42:29.030

这是使用 Gnuplot 和一些 bash 脚本完成它的一种方法：

```
# An updating data file
while :; do echo $((RANDOM%100)); sleep .1; done > datafile 
```

使用 plot 命令初始化 Gnuplot，并让其他更新来自 replot：

```
(
  echo "plot [0:100] [0:100] '< tail -n100 datafile' with lines";
  while :; do sleep .4; echo replot; done
) | gnuplot -persist 
```

这使得 Gnuplot`tail -n100 datafile`每 0.4 秒评估一次，并将结果用作数据集。tail 命令返回最后 100 行`datafile`.

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2021-04-01T17:10:40.107

# 使用[bash](/questions/tagged/bash "显示标记为“bash”的问题")和[gnuplot](/questions/tagged/gnuplot "显示标记为“gnuplot”的问题")的动态绘图：

## 只有 100 个最后的值

### 通过`gnuplot`脚本（快速演示）

只需尝试这两个命令：

.1 在后台填充动态数据文件

```
ping -i.2 google.com |
    sed -ue 's/.*seq=\([0-9]\+\) .*time=\([0-9.]\+\) .*/\1 \2/p;d' > file.dat & 
```

.2 使用内联脚本运行 gnuplot（随意替换`MAX=40`为`MAX=100`;-)

```
MAX=40
gnuplot -e "while(1){pause 0.1;stats 'file.dat' u 0 nooutput;
    lPnts=STATS_records<$MAX?0: STATS_records-$MAX;
    plot 'file.dat' using 1:2 skip lPnts title 'google' w st  }" 
```

您必须按`Ctrl`+`C`退出 gnuplot，**然后** `kill %%`停止运行`ping`。

### 通过[bash](/questions/tagged/bash "显示标记为“bash”的问题")脚本

有一个小[bash](/questions/tagged/bash "显示标记为“bash”的问题")脚本维护数据文件，只保留最后 100 个值。这只是使用一个计数器，然后在计数器达到限制后删除数据文件中的第一个值：

```
#!/bin/bash

declare TMPDIR=/tmp DEST=${1:-google.com} DELAY=${2:-.25} MAXDATA=100
[ -d /dev/shm ] && [ -w /dev/shm ] && TMPDIR=/dev/shm
read -r TMPDAT < <(mktemp -p "$TMPDIR" --suffix .dat plot-XXXXXXXXXX)

exec {PFD}> >(exec gnuplot)
closExit() { exec {PFD}>&- ; [ -f "$TMPDAT" ] && rm "$TMPDAT" ; exit ;}
trap closExit 0 1 2 3 6 15

getDatas() {
    read -r data < <(
        ping -c 1 -n "$DEST" 2>&1 |
            sed -u 's/^64.*time=\([0-9.]\+\) .*$/\1/p;d'
    )
    now=$EPOCHREALTIME
    printf '%.6f %s\n' >>"$TMPDAT" "$now" "$data"
    (( cnt++ > MAXDATA )) && sed -e 1d -i "$TMPDAT"
    printf ' %8d %(%a %b %d %T)T.%s %s\n' \
            "$cnt" "${now%.*}" "${now#*.}" "$data"
}
getDatas

echo >&$PFD "set term wxt noraise persist title 'Ping $DEST';"
echo >&$PFD "set xdata time;"
echo >&$PFD "set timefmt '%s';"

while ! read -rsn 1 -t "$DELAY" ;do
    getDatas
    echo >&$PFD "plot '$TMPDAT' using 1:2 with line title 'ping $DEST';"
done 
```

示例运行（加速大约 x15 动画 gif）：

[![Ping 图示例](../Images/c08d1ad9160d10a026da3a326fb1c4c1.png)](https://i.stack.imgur.com/ZrsZE.gif)

### 多进程演示脚本

我编写了一个可以动态运行 gnuplot（并将尽可能多的后台任务 ping 在一起）的多重[bash 脚本。](https://f-hauri.ch/vrac/multiping.sh.txt)

在这个脚本中，对 Nth last values 没有*限制*，但是这个脚本展示了如何从许多不同的流中读取数据，保持*STDIO*的交互性并寻址另一个流以将*绘图升级*到`gnuplot`子流程。

你可以运行：

```
multiping.sh -pci .3 www.google.com www.stackexchange.com 
```

目标是创建**交互式** [bash](/questions/tagged/bash "显示标记为“bash”的问题")脚本来管理不同的子进程，用于输入和/或输出。

***命令***

在运行时，您可以与：

*   `q`退出（关闭所有FD，终止所有子进程）
*   `p`开始使用新的`gnuplot`子流程进行绘图
*   `s`停止绘图
*   `r`重置控制台终端
*   `h`在控制台终端中打印标题行

***用法***

命令行`-h`开关将显示然后帮助：

```
Usage: multiping.sh [-[cdhp]] [-i N] <host or ip> [host or ip] [host or ip]...
  Options:
    -c      colors (red for no answer, green for higher "seq" number)
    -d      Debug this (by opening 2 xterm windows... look at script)
    -h      help (print this)
    -iN     Interval for ping command (min 0.2 in user mode)
    -p      Plot dynamically (require gnuplot)
    All following argument will be "target" for "ping" command. 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2021-04-02T05:37:32.613

这是一个*仅 gnuplot 的*版本，不需要外部脚本。它也适用于 gnuplot 4.6.0（OP 提出问题时的版本）。由于我缺少不断更新的数据源，因此我在 gnuplot 本身内创建数据文件。如果您的文件由另一个程序从外部更新，请跳过标有`# *skip`.

绘图在`while`循环中运行（检查`help while`），可以通过按停止`x`，检查`help bind`。通过设置适当的数字（检查`help pause`）来调整绘图之间的时间延迟。

**代码：**

```
### dynamic plotting of last 20 points
reset

FILE = 'Test.dat'

bind x 'stop = 1'   # stop loop via pressing x
stop = 0

N = 20
set yrange [0:3]

set print FILE          # *skip these lines if your file is updated by another program
set print FILE append   # *skip
idx = 0                 # *skip

while (!stop) {

    print sprintf("%g %g",idx=idx+1,sin(idx/3.)+rand(0)*0.5+1)   # *skip

    pause 0.05       # pause in seconds
    stats [*:*][*:*] FILE u 0 nooutput
    LastN = STATS_records<N ? 0 : STATS_records-N

    plot FILE u 1:2 every ::LastN w lp pt 7
}
set print               # *skip
### end of code 
```

**结果：（**使用来自 gnuplot 4.6.0 上的 wxt 终端的 ScreenToGif 进行屏幕捕获）

[![在此处输入图像描述](../Images/1fceae0bf8d804fdc020d1a7277f667d.png)](https://i.stack.imgur.com/PNZs6.gif)

# perl - 在 Perl 中解析 SNMP 结果

> ID：13749554
> 
> 赞同：2
> 
> 时间：2012-12-06T17:53:49.343
> 
> 标签：perl, parsing, snmp, cisco

我正在通过 Cisco 路由器上的 SNMP 查找收集器信息。我收集信息没有任何问题。问题出在我的 Perl 正则表达式中。

此处的阵列接收到 SNMP：

```
$ mystring = 'iso.3.6.1.2.1.2.2.1.2.2 = STRING: "GigabitEthernet1/2"
iso.3.6.1.2.1.2.2.1.2.3 = STRING: "GigabitEthernet3/1"
iso.3.6.1.2.1.2.2.1.2.4 = STRING: "GigabitEthernet3/2"
iso.3.6.1.2.1.2.2.1.2.5 = STRING: "GigabitEthernet3/3"
iso.3.6.1.2.1.2.2.1.2.6 = STRING: "GigabitEthernet3/4"
iso.3.6.1.2.1.2.2.1.2.7 = STRING: "GigabitEthernet3/5"
iso.3.6.1.2.1.2.2.1.2.8 = STRING: "GigabitEthernet3/6"
iso.3.6.1.2.1.2.2.1.2.9 = STRING: "GigabitEthernet3/7"
iso.3.6.1.2.1.2.2.1.2.10 = STRING: "GigabitEthernet3/8"
iso.3.6.1.2.1.2.2.1.2.11 = STRING: "GigabitEthernet3/9"
iso.3.6.1.2.1.2.2.1.2.12 = STRING: "GigabitEthernet3/10"
iso.3.6.1.2.1.2.2.1.2.13 = STRING: "GigabitEthernet3/11"
iso.3.6.1.2.1.2.2.1.2.14 = STRING: "GigabitEthernet3/12"
iso.3.6.1.2.1.2.2.1.2.15 = STRING: "GigabitEthernet3/13"
iso.3.6.1.2.1.2.2.1.2.16 = STRING: "GigabitEthernet3/14"
iso.3.6.1.2.1.2.2.1.2.17 = STRING: "GigabitEthernet3/15"
iso.3.6.1.2.1.2.2.1.2.18 = STRING: "GigabitEthernet3/16" ';
@ array = ($ mystring = ~ m /. ([0-9]|[1-9][0-9]|[1-9][0-9][0-9]) = / gms);
print join ("\ n", @ array); 
```

我有最新一期的 mib 但如何获取端口？例如

```
array(    
5->GigabitEthernet3/3
6->GigabitEthernet3/4
); 
```

在一张桌子上。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-06T17:58:12.530

你所说的数组实际上是一个关联数组。哈希表是关联数组的一种形式。

```
use strict; use warnings;
my %port_by_mib;
for (split /\n/, $mystring) {
    my ($mib) = /\.(\d+) / or die;
    my ($port) = /"([^"]+)"/ or die;
    $port_by_mib{$mib} = $port;
} 
```

### 解释：

*   `use strict`以更严格的模式运行 Perl。这不允许危险或容易出错的功能。`use warnings`将发出有助于调试脚本的警告。
*   `my`关键字声明词法变量。在严格模式下需要声明变量。如果您忘记声明名称，您将收到`global symbol "$foo" requires explicit package name ...`致命错误。
*   这`%`是哈希表的标志。Sigils 既是类型声明又是命名空间选择器。
*   `split``$mystring`正则表达式匹配时剪切。`for`循环遍历生成的子字符串列表并将每个部分分配给`$_`默认参数。
*   正则表达式`/\.(\d+) /`匹配并保存前面有一个点和后面有一个空格的任何数字序列。`die`当没有找到这样的匹配时，脚本s（即抛出一个致命错误）。赋值的左侧有一个列表上下文，因此 RHS 也在列表上下文中执行，导致`$mib`使用第一个捕获缓冲区进行初始化。
*   正则表达式`/"([^"]+)"/`匹配双引号中的文本，并提取该文本。
*   哈希表使用花括号访问，而不是像数组那样使用方括号。

# ruby-on-rails - 在 belongs_to ActiveRecord 关联上使用 through 选项

> ID：13749558
> 
> 赞同：3
> 
> 时间：2012-12-06T17:54:00.077
> 
> 标签：ruby-on-rails, ruby-on-rails-3, activerecord, ruby-on-rails-3.2, belongs-to

有没有办法`through`在 belongs_to 关系中使用该选项？[关于belongs_to](http://api.rubyonrails.org/classes/ActiveRecord/Associations/ClassMethods.html#method-i-belongs_to)的Rails 文档没有提到`through`作为一个选项，为什么不呢？我想做如下的事情：

```
class Lesson < ActiveRecord::Base
  attr_accessible :name, :lesson_group_id
  belongs_to :lesson_group
  belongs_to :level, through: :lesson_group
end

class LessonGroup < ActiveRecord::Base
  attr_accessible :name, :level_id
  belongs_to :level
  has_many :lessons
end

class Level < ActiveRecord::Base
  attr_accessible :number
  has_many :lesson_groups
end 
```

然后我可以做类似的事情`Lesson.first.level`。使用最新的稳定 Rails（截至目前为 3.2.9）。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-12-06T17:57:46.353

在您提供[的链接](http://api.rubyonrails.org/classes/ActiveRecord/Associations/ClassMethods.html#method-i-belongs_to)中：

> 指定与另一个类的一对一关联。**仅当此类包含外键**时才应使用此方法。

我认为您应该使用`has_one :level, through: :lesson_group`，如下所示：

```
class Lesson < ActiveRecord::Base
  attr_accessible :name, :lesson_group_id
  belongs_to :lesson_group
  has_one :level, through: :lesson_group
end

class LessonGroup < ActiveRecord::Base
  attr_accessible :name, :level_id
  belongs_to :level
  has_many :lessons
end

class Level < ActiveRecord::Base
  attr_accessible :number
  has_many :lesson_groups
end 
```

有关以下选项的文档的一部分`has_one`：

> **：通过**
> 
> 指定用于执行查询的连接模型。:class_name、:primary_key 和 :foreign_key 的选项被忽略，因为关联使用源反射。您只能通过连接模型上的 has_one 或 belongs_to 关联使用 :through 查询。

**他们在这里谈到了这**一点： [Rails has_one :through association](https://stackoverflow.com/questions/2116017/rails-has-one-through-association)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2021-03-11T18:24:58.900

在`Rails 6`, 中`Ruby 2.6`，我遇到了一个类似的问题，我有一个`User`可以属于许多`Organizations`的，但总是有一个是他们被分配到`primary_organization`的第一个。`Organization`最初我用以下方法设置了这个：

```
def primary_organization
  organizations.first
end 
```

然而，这最终破坏了我的作用域链。上述`primary_organization`方法可以重构为可链接的条件，而无需更改`user.primary_organization`语法：

**用户.rb**

```
# has_many: OrganizationUsers > Organizations
# ==================================================================================
has_many    :organization_users,
              class_name:     'OrganizationUser',
              inverse_of:     :user,
              dependent:      :destroy,
              autosave:       true,

has_many    :organizations,
              class_name:     'Organization',
              through:        :organization_users,
              inverse_of:     :organization_users,
              source:         :organization

# *** ADDED IN REFACTOR ***
# has_one: Organization
# shortcut for:
#   • `user.organization_users.first.organization`
#   • `user.organizations.first`
# ==================================================================================
has_one     :primary_organization_user,
              -> {
                order(
                  created_at: :desc
                ).limit(1)
              },
              class_name:     'OrganizationUser',
              inverse_of:     :user

has_one     :primary_organization,
              class_name:     'Organization',
              through:        :primary_organization_user,
              inverse_of:     :organization_users,
              source:         :organization 
```

**组织用户.rb**

```
# belongs_to: Organization
# ==================================================================================
belongs_to  :organization,
              class_name:     'Organization',
              inverse_of:     :organization_users

# belongs_to: User
# ==================================================================================
belongs_to  :user,
              class_name:     'User',
              inverse_of:     :organization_users 
```

**组织.rb**

```
# has_many: OrganizationUsers > Users
# ==================================================================================
has_many    :organization_users,
              class_name:     'OrganizationUser',
              inverse_of:     :organization,
              autosave:       true,
              dependent:      :destroy

has_many    :users,
              class_name:     'User',
              through:        :organization_users,
              inverse_of:     :organization_users,
              autosave:       true 
```

# javascript - 增加点击值

> ID：13749562
> 
> 赞同：0
> 
> 时间：2012-12-06T17:54:08.813
> 
> 标签：javascript, jquery, html

每次我点击一个按钮时，我都希望它的 z-index 一个一个增加。我该怎么做？

```
$('#Box').css('z-index', 'newindex'); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-06T17:56:44.840

对于[jQuery](http://en.wikipedia.org/wiki/JQuery) 1.6 及更高版本，请使用：

```
$('#Box').css('z-index','+=1'); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-06T17:55:48.990

尝试：

```
$('#Box').css('z-index',$('#Box').css('z-index') + 1); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-06T17:55:57.773

阅读索引。在索引中添加一个。使用新值重置索引。

```
var myElem = $('#Box');
var currentIndex = myElem.css('z-index') || 0;
myElem.css('z-index', currentIndex+1); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-12-06T17:56:45.823

您可以使用 jQuery 的`.css`方法来获取*和*设置特定值。

由于您想获取当前值并将其递增，因此您将首先使用`$('#Box').css('z-index')`获取该值，然后将其递增并将其传递给`$('#Box').css('z-index', newvalue)`.

# c# - 为什么 kmltreeview.nodemouseclick 在创建文件夹时会触发？

> ID：13749564
> 
> 赞同：0
> 
> 时间：2012-12-06T17:54:16.537
> 
> 标签：c#, events, google-earth-plugin

我有以下代码在 kmltreeview 中创建一个文件夹：

```
 var folder = ge1.createFolder("Mobiles");
            folder.setName("Mobiles");
            kmlTreeView1.ParseKmlObject(folder); 
```

由于某种原因，使用此代码，NodeMouseClick 函数将“Mobiles”节点作为“e”参数触发：

![代码片段](../Images/4fcb0c02b067f01152fbbdd9a822e4ec.png)

如果我注释掉代码，则事件不会触发。如果我添加更多文件夹，这些文件夹也会触发该事件。

（我没有点击任何东西 - 只需 F5 启动并让它运行。）

有什么想法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-07T02:13:14.640

当节点作为三态检查机制的一部分添加到 KmlTreeView 时，会触发 NodeMouseClick 事件。此模拟单击用于检查是否应选中、部分选中或取消选中 KmlContainer。当设置此状态时，会触发 NodeMouseClick 事件，但给定按钮为无。

因此，您可以通过查看按下哪个按钮来启动点击来轻松测试以筛选出此自动检查。

```
 var folder = ge1.createFolder("Mobiles");
  folder.setName("Mobiles");
  kmlTreeView1.ParseKmlObject(folder);
  kmlTreeView1.NodeMouseClick += (o, e) =>
  {
      if (e.Button == MouseButtons.None)
      {
        // no actual mouse click...
        return;
      }

      // handle user interactions
  }; 
```

# python - python中如何将第一个目录拆分出路径（如home/tom/cat >> tom/cat >> cat）？

> ID：13749566
> 
> 赞同：1
> 
> 时间：2012-12-06T17:54:21.133
> 
> 标签：python, linux, python-2.7, google-drive-api

作为标题中的示例，我想要结果：

目录：`home/tom/cat`

第一剪：`tom/cat`

第二次切割：`/cat`

最后一刀：`/`

如何在python中做到这一点？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-06T18:00:49.850

这是你要找的：

```
In [101]: dir = "home/tom/cat"

In [102]: dir.split('/')
Out[102]: ['home', 'tom', 'cat'] 
```

您可能还希望拆分`os.path.sep`为跨平台兼容

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-19T14:45:43.743

```
import os

def split_path(s):
    while os.sep in s:
        rv, s = s.split(os.sep, 1)
        yield s

for split in split_path("home/tom/cat"):
    print split

# prints
tom/cat
cat 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-06T18:57:49.740

这是你要找的吗？假设您的字符串看起来像那样（即没有前导斜杠），您可以尝试使用生成器。请注意，这与您上面的输出不匹配，因为我不确定为什么第一遍会返回`tom/cat`但第二遍会返回`/cat`（斜线在前面）。如果这是您想要的，您可以修改它以在循环完成时产生一个“默认”（例如`/`） 。`while`如果您的字符串将包含前导`/`，您可以通过从拆分中删除空元素来进行调整：

```
In [1]: def PathSplit(s):
   ...:     split_len = len(s.split('/'))
   ...:     yield s
   ...:     if split_len > 1:
   ...:         while split_len > 1:
   ...:             splitter = s.split('/', 1)[1]
   ...:             yield splitter
   ...:             s = splitter
   ...:             split_len = len(s.split('/'))
   ...:
   ...:

In [2]: for i in PathSplit('home/tom/cat'):
   ...:     print i
   ...:
   ...:
home/tom/cat
tom/cat
cat

In [3]: for i in PathSplit('home/tom/cat/another/long/dir'):
   ...:     print i
   ...:
   ...:
home/tom/cat/another/long/dir
tom/cat/another/long/dir
cat/another/long/dir
another/long/dir
long/dir
dir 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-12-06T18:04:01.180

比仅拆分“/”更安全的方法：

```
In [135]: import os

In [136]: dir = '/home/tom/cat'

In [137]: os.path.basename(dir)
Out[137]: 'cat' 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-12-06T18:04:26.463

这会剪切字符串中的第一个目录：

```
dir = 'home/tom/cat'
parts = dir.split('/')
print '/'.join(parts[1:]) 
```

它将字符串拆分为一个目录数组，然后将除第一个之外的所有目录再次连接在一起。删除每个剪切的第一个目录。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-12-06T18:04:27.583

您可以使用 os 模块拆分和重新加入：

```
import os

def cutPath(path):
    return os.path.join(os.path.split(path)[1:]) 
```

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2012-12-06T18:12:34.997

我可能会使用这样的东西来获取每个步骤的输出：

```
import os

path = "home/tom/cat"
while path:
    base = os.path.basename(path)
    path = path.rstrip(base)

    print base 
```

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2017-11-16T20:33:16.767

这是我在其他地方没有看到的一个干净的答案：

```
>>> mypath="first/second/third/fourth/fifth.txt"
>>> mypath.split('/',1)
['first', 'second/third/fourth/fifth.txt']
>>> mypath.split('/',1)[1]
'second/third/fourth/fifth.txt' 
```

split 可以在第一次拆分时拆分字符串。

# c++ - 为什么 std::pair 没有迭代器？

> ID：13749569
> 
> 赞同：19
> 
> 时间：2012-12-06T17:54:24.980
> 
> 标签：c++, stl, std-pair

为什么没有`std::pair`迭代器？

`std::pair`应该提供`iterator`and`const_iterator`以及`begin()`and `end()`-- 只为他们的两个成员。

我认为这会很有用，因为这样我们可以将它们传递给期望可迭代的模板函数，比如`vector`or `set`。

这有什么缺点吗？

* * *

## 回答 #1

> 赞同：27
> 
> 时间：2012-12-06T17:55:31.683

一个原因是一对中的两个元素可以是不同的类型。这不适合迭代器模型。

元组也是如此，拥有迭代器可能更具吸引力。

如果您需要一个固定长度的廉价*同质*容器，您可以使用`std::array<T, n>`.

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-06T18:46:12.310

我不认为有任何特别的缺点，除了它只适用于`pair<T,T>`，而不是`pair<T,U>`。

```
#include <utility>
#include <iterator>
#include <vector>
#include <iostream>

namespace itpair {
    template <typename T>
    struct pair_iterator : std::iterator<std::forward_iterator_tag, T> {
        std::pair<T,T> *container;
        int idx;
        pair_iterator(std::pair<T,T> *container, int idx) : container(container), idx(idx) {}
        T &operator*() const {
            return idx ? container->second : container->first;
        }
        T *operator->() const {
            return &*this;
        }
        friend pair_iterator &operator++(pair_iterator &self) {
            self.idx += 1;
            return self;
        }
        friend pair_iterator operator++(pair_iterator &self, int) {
            pair_iterator result = self;
            ++self;
            return result;
        }
        friend bool operator==(const pair_iterator &self, const pair_iterator &other) {
            return self.container == other.container && self.idx == other.idx;
        }
        friend bool operator!=(const pair_iterator &self, const pair_iterator &other) {
            return !(self == other);
        }
    };

    template <typename T>
    pair_iterator<T> begin(std::pair<T,T> &p) {
        return pair_iterator<T>(&p, 0);
    }
    template <typename T>
    pair_iterator<T> end(std::pair<T,T> &p) {
        return pair_iterator<T>(&p, 2);
    }
}

int main() {
    std::pair<int,int> p = std::make_pair(1, 2);
    using namespace itpair;
    std::vector<int> v(begin(p), end(p));
    std::cout << v[0] << " " << v[1] << "\n";
} 
```

当然你也想要一个`const_iterator`，接下来你会希望它是随机访问的（这意味着更多的操作员）。

就像每个人都说的那样，但这并不是真正`pair`的目的。它只是不是一个容器。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-12-06T17:57:55.477

的目的`std::pair`不是成为一个传统的容器，而是作为一个元组，允许将两个潜在的异构对象视为一个对象。

此外，因为您可以直接访问该对的两个部分，并且因为配对的类型可能不相同，所以迭代器没有意义。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2016-12-02T13:14:08.993

我想出了这个解决方案。不是很“性感”，但应该可以：

```
#include <type_traits>
#include <iterator>
#include <utility>

#include <boost/optional.hpp>

namespace pair_iterator {

template <class A, class B, class Pair>
class PairIterator {
public:
    using iterator_category = std::random_access_iterator_tag;
    using value_type = std::common_type_t<A, B>;
    using difference_type = std::ptrdiff_t;
    using pointer = std::add_pointer_t<value_type>;
    using reference = std::add_lvalue_reference_t<value_type>;
    using const_reference = std::add_lvalue_reference_t<const value_type>;
private:
    boost::optional<Pair &> pair = {};
    difference_type index = 2;
public:
    PairIterator(
        const boost::optional<Pair &> &pair = {},
        difference_type index = 2
    ) : pair(pair), index(index) {}

    // Iterator

    PairIterator(PairIterator&&) = default;
    PairIterator(const PairIterator&) = default;
    PairIterator &operator =(PairIterator&&) = default;
    PairIterator &operator =(const PairIterator&) = default;
    ~PairIterator() = default;

    void swap(PairIterator &other) {
        std::swap(pair, other.pair);
        std::swap(index, other.index);
    }

    reference operator *() {
        return index == 0 ? pair->first : pair->second;
    }

    const_reference operator *() const {
        return index == 0 ? pair->first : pair->second;
    }

    PairIterator &operator ++() {
        ++index;
        return *this;
    }

    // InputIterator

    bool operator ==(const PairIterator &other) const {
        return index == other.index;
    }

    bool operator !=(const PairIterator &other) const {
        return index != other.index;
    }

    PairIterator operator ++(int) const {
        return { pair, index+1 };
    }

    // ForwardIterator

    // BidirectionalIterator

    PairIterator &operator --() {
        --index;
        return *this;
    }

    PairIterator operator --(int) const {
        return { pair, index-1 };
    }

    // RandomAccessIterator

    PairIterator &operator +=(difference_type n) {
        index += n;
        return *this;
    }

    PairIterator operator +(difference_type n) const {
        return { pair, index+n };
    }

    PairIterator &operator -=(difference_type n) {
        index -= n;
        return *this;
    }

    PairIterator operator -(difference_type n) const {
        return { pair, index-n };
    }

    difference_type operator -(const PairIterator &other) const {
        return index - other.index;
    }

    reference operator [](difference_type n) {
        return (index+n) == 0 ? pair->first : pair->second;
    }

    const_reference operator [](difference_type n) const {
        return (index+n) == 0 ? pair->first : pair->second;
    }

    bool operator <(const PairIterator &other) const {
        return index < other.index;
    }

    bool operator >(const PairIterator &other) const {
        return index > other.index;
    }

    bool operator <=(const PairIterator &other) const {
        return index <= other.index;
    }

    bool operator >=(const PairIterator &other) const {
        return index >= other.index;
    }
};

template <class A, class B>
auto begin(std::pair<A, B> &pair) ->
PairIterator<A, B, std::pair<A, B>> {
    return { pair, 0 };
}

template <class A, class B>
auto end(std::pair<A, B> &pair) ->
PairIterator<A, B, std::pair<A, B>> {
    return { pair, 2 };
}

template <class A, class B>
auto begin(const std::pair<A, B> &pair) ->
PairIterator<const A, const B, const std::pair<A, B>> {
    return { pair, 0 };
}

template <class A, class B>
auto end(const std::pair<A, B> &pair) ->
PairIterator<const A, const B, const std::pair<A, B>> {
    return { pair, 2 };
}

} // namespace pair_iterator

namespace std {

using pair_iterator::begin;
using pair_iterator::end;

} // namespace std 
```

# java - 使用 log4j 记录不同的对象

> ID：13749570
> 
> 赞同：0
> 
> 时间：2012-12-06T17:54:28.110
> 
> 标签：java, log4j

我有一个简单的问题。我正在开发一个 Java 项目，其中同一类的一些对象在 MySQL 中注册它们的执行。我不明白为什么，但是当表中的解决方案数量是 500 的倍数时，程序会卡住并且在一段时间内找不到更多解决方案。

我认为登录不同的对象但使用 log4j 我只能有多个具有相同内容的日志。有人知道如何为同一类的不同对象制作不同的 FileAppenders 吗？

提前致谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-06T18:02:33.007

首先，您需要某种方法来标识该类的不同实例。

其次，log4j API 展示了如何按名称创建 Logger。您不必使用类的名称作为`Logger`. 您可以创建`Logger`具有因每个实例而异的名称的 's，例如：

```
Logger logger = Logger.getLogger("com.foo.Class" + idInstance); 
```

# c# - Access DB：操作必须使用可更新的查询

> ID：13749572
> 
> 赞同：2
> 
> 时间：2012-12-06T17:54:29.047
> 
> 标签：c#, visual-studio-2010, ms-access, oledb

我正在运行一个 ISS 服务器，我有一个访问文件位于 C:\WCF\Access\ 我正在使用这个查询来插入一些东西：

```
@"INSERT INTO Arbejdsindsats (MedarYdelID, StartTid, SlutTid) VALUES ('" + medarYdelID + "', '" + startTid + "', '" + slutTid + "')"; 
```

完整的代码是：

```
public String GemArbejdsIndsats(String medarYdelID, String startTid, String slutTid)
        {
            try{
            con.Open();
            String command = @"INSERT INTO Arbejdsindsats (MedarYdelID, StartTid, SlutTid) VALUES ('" + medarYdelID + "', '" + startTid + "', '" + slutTid + "')";
            cmd.CommandText = command;
            cmd.ExecuteNonQuery();
            con.Close();

                return "success: medarydelid: " + medarYdelID + " startTid: " + startTid + " slutTid: " + slutTid;
            } catch(Exception e)
                {
                    String k = e.Message;
                    return k;
                }
        } 
```

问题是这个错误：

> 操作必须使用可更新的查询

当我在自己的机器上进行本地测试时，它工作正常。只是不在IIS中。

奇怪的是有一个 laccdb 文件。它不会消失。也许数据库被锁定，这就是为什么我不能更新它？

权限应该不是问题：

[img http://img.ctrlv.in/50c0dbf8670d8.jpg](http://img.ctrlv.in/50c0dbf8670d8.jpg)

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-12-06T19:12:40.370

The user account must be able to write to the files and to the folder in which they are located; it should be able to create and delete files in the folder. The presence of the laccdb file does not necessarily mean that access has locked the database. Its presence could be the result of any of several circumstances, one of which could be that the user account doesn't have permission to delete files from the folder.

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2016-12-04T09:55:43.590

这个问题的解决方案非常简单。只需以管理员身份运行该应用程序。我试了 3 次，效果很好

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2018-03-08T22:42:15.407

此外，请确保该文件不是只读的。

# jquery - 如何在 JQuery 中隐藏一个 div 并更改另一个 div 的大小？

> ID：13749574
> 
> 赞同：0
> 
> 时间：2012-12-06T17:54:44.737
> 
> 标签：jquery

我希望能够单击特定链接，然后隐藏我的侧边栏`<section>`并调整内容大小`<section>`。目前我有隐藏机制工作，但我正在努力调整大小部分。

我的代码目前如下：

```
$(document).ready(function() {
        $('#sidebar-toggle-link').click(function() {
                $('#container-sidebar').toggle('slide');
        });
}); 
```

我尝试在第二个函数中添加它：

```
var toggle_width = $('#container-content').width() == 100 ? '74%' : '100%';
$('#container-content').animate({ width: toggle_width }); 
```

然而，这会将内容缩放`<section>`到 100%，但在第二次单击链接时不会再次返回 - 侧边栏重新出现，但内容`<section>`会转移到侧边栏下方，仍然是 100% 大小。

我如何在 JQuery 中做到这一点？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-06T17:57:43.060

试试这个：

```
var toggle_width = $('#container-content').width() == $(window).width() ? '74%' : '100%'; 
```

窗口或任何 100% 宽度的父对象。

你也可以试试这个，这取决于你元素的样式（例如填充、边距）

```
$('#container-content').outerWidth() == ... 
```

# c - MPI 和 C 中的矩阵向 量乘法

> ID：13749580
> 
> 赞同：5
> 
> 时间：2012-12-06T17:55:04.747
> 
> 标签：c, mpi, matrix-multiplication

我正在尝试使用 MPI 和 C 将方阵乘以向量。我必须使用 MPI_Allgather 将矩阵的所有部分发送到所有进程。这就是我到目前为止所拥有的

```
#include "mpi.h" 
#include <stdlib.h>
#include <stdio.h>
#include <math.h>
#include <string.h>
#include <time.h>
#define DIM 500

int main(int argc, char *argv[])
{

      int i, j, n; 
      int nlocal;        /* Number of locally stored rows of A */ 
      double *fb;
      double a[DIM*DIM], b[DIM], x[DIM];     /* Will point to a buffer that stores the entire vector b */ 
      int npes, myrank; 
      MPI_Status status; 

       MPI_Init(&argc,&argv);

     /* Get information about the communicator */ 
     MPI_Comm_rank(MPI_COMM_WORLD, &myrank);
     MPI_Comm_size(MPI_COMM_WORLD, &npes);  

     /* Allocate the memory that will store the entire vector b */ 
     fb = (double*)malloc(n*sizeof(double)); 

     nlocal = n/npes; 

     /* Gather the entire vector b on each processor using MPI's ALLGATHER operation */ 
     MPI_Allgather(b, nlocal, MPI_DOUBLE, fb, nlocal, MPI_DOUBLE, MPI_COMM_WORLD); 

     /* Perform the matrix-vector multiplication involving the locally stored submatrix */ 
     for (i=0; i<nlocal; i++) { 
       x[i] = 0.0; 
       for (j=0; j<n; j++) 
         x[i] += a[i*n+j]*fb[j]; 
     } 

     free(fb);

     MPI_Finalize();   
}//end main 
```

好的，现在可以了！它编译但我得到一个 mpi allgather 内部错误！我也尝试过其他解决方案。

```
Fatal error in MPI_Allgather: Internal MPI error!, error stack:
MPI_Allgather(961).......: MPI_Allgather(sbuf=0xa1828, scount=407275437, MPI_DOU                                                                                                                BLE, rbuf=0xf61d0008, rcount=407275437, MPI_DOUBLE, MPI_COMM_WORLD) failed
MPIR_Allgather_impl(807).:
MPIR_Allgather(766)......:
MPIR_Allgather_intra(560):
MPIR_Localcopy(357)......: memcpy arguments alias each other, dst=0xb8513d70 src                                                                                                                =0xa1828 len=-1036763800
Fatal error in MPI_Allgather: Internal MPI error!, error stack:
MPI_Allgather(961).......: MPI_Allgather(sbuf=0xa1828, scount=407275437, MPI_DOU                                                                                                                BLE, rbuf=0xf61d0008, rcount=407275437, MPI_DOUBLE, MPI_COMM_WORLD) failed
MPIR_Allgather_impl(807).:
MPIR_Allgather(766)......:
MPIR_Allgather_intra(560):
MPIR_Localcopy(357)......: memcpy arguments alias each other, dst=0x3cb9b840 src                                                                                                                =0xa1828 len=-1036763800
Fatal error in MPI_Allgather: Internal MPI error!, error stack:
MPI_Allgather(961).......: MPI_Allgather(sbuf=0xa1828, scount=407275437, MPI_DOU                                                                                                                BLE, rbuf=0xf61d0008, rcount=407275437, MPI_DOUBLE, MPI_COMM_WORLD) failed
MPIR_Allgather_impl(807).:
MPIR_Allgather(766)......:
MPIR_Allgather_intra(560):
MPIR_Localcopy(357)......: memcpy arguments alias each other, dst=0x7a857ad8 src                                                                                                                =0xa1828 len=-1036763800 
```

谁能帮我？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-08T09:27:34.120

使用一维（行或列主要）访问二维数组的任何方式，您都可以分配二维数组，`a[DIM*DIM]`而不`a[DIM][DIM]`是以线性方式访问它。这个解决方案对我有用。

# java - 在 servlet 中处理从 HTML 获取的结果集和其他数据的最佳方法

> ID：13749592
> 
> 赞同：0
> 
> 时间：2012-12-06T17:55:53.887
> 
> 标签：java, html, postgresql, servlets

好的，所以对于我们的 Uni 项目，我们正在创建一个网站来存储有关教堂的信息（我知道非常有趣 -.-）。

基本上，它只需要在数据库中有教堂信息，当用户点击或搜索教堂时，它需要从数据库中提取教堂信息和用户评论。

到目前为止，我有一个 HTML 表单，它向 servlet/数据库提供注释并使用结果集输出它。我只是想知道处理多个信息的最佳方法是什么，因为现在我正在尝试同时提供评论和教会信息，我对如何存储它有点迷茫。

提前致谢！

哦，这是我的参考代码：

HTML

```
 <form method="get" action="dbtest" id="form1">
        <fieldset>
        <p>Please enter you're Name:</p>
        <input type="text" name="author" size="10" id="name"/><br />
        <p>Please enter you're Email here:</p>
        <input type="text" name="author_email" size="10" id="email"/><br />
        <p>Please enter you're comment here:</p>
        <input type="text" name="comment_text" size="10" id="comment"/><br />
        <p>
        <input type="submit" value="Submit" name="submit_button" />
        </p>
        </fieldset>
    </form> 
```

小服务程序

```
import java.io.IOException;
import java.io.PrintWriter;
import java.sql.Connection;
import java.sql.DriverManager;
import java.sql.ResultSet;
import java.sql.Statement;
import javax.servlet.ServletException;
import javax.servlet.http.HttpServlet;
import javax.servlet.http.HttpServletRequest;
import javax.servlet.http.HttpServletResponse;

/**
 *
 * @author mxk12ycu
 */
public class dbtest extends HttpServlet {

    /**
     * Processes requests for both HTTP
     * <code>GET</code> and
     * <code>POST</code> methods.
     *
     * @param request servlet request
     * @param response servlet response
     * @throws ServletException if a servlet-specific error occurs
     * @throws IOException if an I/O error occurs
     */
    protected void processRequest(HttpServletRequest request, HttpServletResponse response)
            throws ServletException, IOException {
        response.setContentType("text/html;charset=UTF-8");
        PrintWriter out = response.getWriter();

        String authorName = request.getParameter("author");
        String authorEmail = request.getParameter("author_email");
        String commentText = request.getParameter("comment_text");

        try {
            //Holding SQL statement
            String SQL;
            String insertSQL;

            //insertSQL = "INSERT INTO comments VALUES('0002')" + authorName + authorEmail + commentText + ("('29 Nov 2012','002')");
            //insertSQL = "INSERT INTO comments VALUES (default,'Ryan H','Test@hotmail.com','TestComments','29 Nov 2012','1')";

           //insertSQL = "INSERT INTO comments (author, author_email, comment_text, comment_date, church_id) VALUES ('" + authorName + "'," + "'" + authorEmail + "'," + "'" + commentText + "', '29 Nov 2012', '1')";
           //insertSQL = "INSERT INTO comments VALUES ('Ryan Holder', 'test@hotmail.com', 'Comment here', '30 Nov 2012', 'default', '1')";
            insertSQL = "INSERT INTO comments VALUES (default, " + "'" + authorName + "'," + "'" + authorEmail + "'," + "'" + commentText + "', '29 Nov 2012', '1')";
            SQL = "SELECT * FROM churches, comments";

            Class.forName("org.postgresql.Driver");

            Connection connection = DriverManager.getConnection(
                    "jdbc:postgresql:ChurchSearch",
                    "postgres",
                    "*****");

            Statement statement = connection.createStatement();

            statement.executeUpdate(insertSQL);

            ResultSet resultSet = statement.executeQuery(SQL);

             /* TODO output your page here. You may use following sample code. */
            out.println("<html>");
            out.println("<head>");
            out.println("<title>Test Comment Servlet</title>");            
            out.println("</head>");
            out.println("<body>");
            out.println("<h1>Servlet test at " + request.getContextPath() + "</h1>");
            out.println("<h2>Comment Form</h2>");

            while (resultSet.next()) {
            out.println("<p>");
            out.println(resultSet.getString("author"));
            out.println("</p>");
            out.println("<p>");
            out.println(resultSet.getString("author_email"));
            out.println("</p>");
            out.println("<p>");
            out.println(resultSet.getString("comment_text"));
            out.println("</p>");
            }
            out.println("</body>");
            out.println("</html>");

            connection.close();
        } 
        catch (Exception e) {
            System.err.println("Error: " + e);
        }
        finally {            
            out.close();
        }
    } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-06T22:11:46.197

您可以使用[MVC 模式](http://en.wikipedia.org/wiki/Model%E2%80%93view%E2%80%93controller)。另一方面，您必须确保关闭与数据库的连接。

```
Connection conn = null;
try {
    conn = // get connection;

    // do database operations

} catch (final SQLException e) {
    throw new DAOException(e);
} finally {
    if (conn != null) {
        try {
            conn.close();
        } catch (final SQLException ex) {
            LOG.warning("message warning to log");
        }
    }
} 
```

这将释放连接使用的所有资源。

关于 MVC，您可以在[Integrating Servlets and JSP: The Model View Controller (MVC) Architecture](http://courses.coreservlets.com/Course-Materials/pdf/struts/MVC.pdf)中找到更多信息。您还可以使用像 Struts、Spring MVC 这样的框架。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-06T19:09:30.077

创建一个DAO（数据库访问对象）类..处理连接。

```
 public class DAO {

static private Connection conn = null;
static private String URL = "jdbc:mysql://localhost/<databse name>";
static private String USERNAME = "root";
static private String PASSWORD = "root";
static private String DRIVER = "com.mysql.jdbc.Driver";

private static Connection getConnection() throws ClassNotFoundException,
        SQLException {

    if (conn == null) {
        Class.forName(DRIVER);
        System.out.println("Driver Initailizing");
        conn = DriverManager.getConnection(URL, USERNAME, PASSWORD);
    }
    return conn;
}

public static ResultSet selectQuery(String query) throws SQLException,
        ClassNotFoundException {

    //Read the query from the servlet class only SQL query
    System.out.println(query);
    ResultSet rs = DAO.getConnection().createStatement().executeQuery(query);
            //return the result set back to servlet class
    return rs;
} 
```

谢谢，

帕万

# asp.net - asp.net 中的请求和响应

> ID：13749595
> 
> 赞同：2
> 
> 时间：2012-12-06T17:56:02.700
> 
> 标签：asp.net, asp.net-mvc, asp.net-mvc-3, asp.net-mvc-2

根据我的理解，两者之间的区别`Response and Request`如下

**请求**是 - 我们向服务器请求类似`.aspx`页面

**响应**是 - 我们`.aspx`从服务器获取页面

所以，我认为，请求是针对服务器的，而响应是我们得到的。

我们有以下条款

```
Request.QueryString
Request.RawUrl
Request.MapPath() 
```

所有这些似乎都首先进入服务器并带回相关数据。但是下面的术语是相反的吗？

```
Request.Cookies 
```

因为 cookie 在客户端创建，并且值部分也在客户端使用**Response.Cookies获取**

你的评论？

**查询 - 2** - 为什么使用创建/访问 cookie 很有用`Request/Response.cookies`？因为它可以在 JavaScript 的客户端创建/获取。

**查询 3** - Cookie 位于客户端。为什么我们向服务器发送请求？

**Query - 4** - 我们为什么要写作`Response.Cookies`？去服务器？为什么？它在客户端创建并从客户端访问。对？我们为什么要写作`Request.Cookies`？意味着`cookie`从服务器获取信息？Cookie 在客户端。对？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-06T18:33:25.120

“当浏览器向服务器发出请求时，它会随请求一起发送该服务器的 cookie。在您的 ASP.NET 应用程序中，您可以使用 HttpRequest 对象读取 cookie，该对象可用作页面的 Request 属性类。HttpRequest 对象的结构本质上与 HttpResponse 对象的结构相同，因此您可以从 HttpRequest 对象中读取 cookie，就像您将 cookie 写入 HttpResponse 对象一样。

[ASP.NET Cookie 概述](http://msdn.microsoft.com/en-us/library/ms178194%28v=vs.100%29.aspx)

“Cookies 通过 HttpResponse 对象发送到浏览器，该对象公开一个名为 Cookies 的集合。您可以将 HttpResponse 对象作为 Page 类的 Response 属性访问”

[ASP.NET Cookie 初学者指南](http://www.codeproject.com/Articles/31914/Beginner-s-Guide-To-ASP-NET-Cookies)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-06T18:02:26.693

每次您向服务器发送请求时，也会发送该服务器的 cookie。

此外，当服务器向您发送响应时，它可以包含您发送到的下一个请求的 cookie。

所以 Request.Cookies 和 Response.Cookies 非常有意义。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-06T18:02:34.947

对象`Request`和`Response`“活”在服务器中。所以`Request`保存由用户代理（浏览器，如 Chrome、IE 等）发送的数据。该数据的示例包括 POST 和 GET 变量、用户代理、语言、IP 地址等等。

`Response`是允许您向用户代理（浏览器）发送数据的对象，即网页、字节流（如可下载文件）等。

cookie 存在于客户端，没错，但是发送此信息的是浏览器，因此此数据来自`Request`对象。

您通过*接收*cookie `Request.Cookies`，但您在*服务器*中接收 cookie 。如果你用 C# 编码，代码是从服务器的角度来看的，所以接收的意思是，服务器接收。如果您想在客户端访问 cookie，您必须使用一些客户端编程语言，例如 JavaScript。

我希望这有帮助。

# java - “this”在下面的代码中做了什么

> ID：13749596
> 
> 赞同：0
> 
> 时间：2012-12-06T17:56:04.840
> 
> 标签：java, this

我正在尝试使用以下代码制作井字游戏板。我不明白什么

button.addActionListener(this);

正在做什么以及为什么`this`在那里使用。

```
package guicollection;

import java.awt.*;
import java.awt.event.*;
import javax.swing.*;

public class DrawTicTacToe extends GUIcollection
        implements ActionListener {

    private JButton button;
    private JPanel pane1;

    void drawTicTacToe() {

        DrawTicTacToe frame = new DrawTicTacToe();
        frame.setSize(400, 300);
        frame.createGUI();
        frame.setVisible(true);
    }

    private void createGUI() {
        setDefaultCloseOperation(EXIT_ON_CLOSE);

        Container window = getContentPane();
        window.setLayout(new FlowLayout());

        pane1 = new JPanel();

        pane1.setPreferredSize(new Dimension(300, 200));
        pane1.setBackground(Color.yellow);
        window.add(pane1);

        button = new JButton("Prss me");
        window.add(button);
        **button.addActionListener(this);**

    }

    public void actionPerformed(ActionEvent event) {
        Graphics paper = pane1.getGraphics();
        paper.drawLine(90, 30, 90, 120);
        paper.drawLine(135, 30, 135, 120);
        paper.drawLine(60, 60, 165, 60);
        paper.drawLine(60, 90, 165, 90);

    }

} 
```

为什么我不能`this`用 actionPerformed 替换？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-06T18:05:51.073

[http://www.java2s.com/Code/JavaAPI/javax.swing/JButtonaddActionListenerActionListeneract.htm](http://www.java2s.com/Code/JavaAPI/javax.swing/JButtonaddActionListenerActionListeneract.htm)

在提出问题之前，请务必阅读文档。

`JButton.addActionListener(ActionListener act)`需要一个 ActionListener 类型的参数，`actionPerformed`是一个方法集合，不是正确的类型。`this`是当前对象，它属于 DrawTicTacToe、GUIcolletion 和 ActionListener 类型（可能还有更多，取决于它们的超类是什么）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-06T18:07:39.973

它将您的 DrawTicTacToe 类的当前实例注册为该按钮的侦听器。单击按钮时，将调用您的 actionPerformed 方法。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-06T18:08:03.453

这里的“this”指的是由 DrawTicTacToe 类的当前实例实现的 ActionListener 接口。这意味着通过这行代码，我们已经将 ActionListener 与按钮绑定，以便每当按钮发生特定事件时，其 actionPerformed 方法将是叫

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-12-06T18:15:03.810

有时一个方法需要引用调用它的对象。为此，Java 定义了 ***this***关键字。***this***可以在任何方法中使用来引用当前对象。也就是说，***这***始终是对调用该方法的对象的引用。您可以在任何允许引用当前类类型的对象的地方使用***它。***

在您的情况下，**这**指的是 DrawTicTacToe 类对象。所以

```
 button.addActionListener(this); 
```

表示此 ActionListener 的动作可以在 DrawTicTacToe 中的此类中**找到**

# c++ - 下载 C++ 文件（没有外部库）

> ID：13749598
> 
> 赞同：0
> 
> 时间：2012-12-06T17:56:06.317
> 
> 标签：c++, download

可以使用 C++ 从 URL 下载文件而不添加外部资源，例如 libCURL？提前致谢！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-06T17:58:05.683

确实是。但这需要很多时间。

顺便说一句，你为什么不想使用 libCURL。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-06T17:59:06.550

当然，因为 libCURL 是写的。您需要自己实现它。检查套接字编程。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-12-06T18:03:37.740

如果您阅读 C++ 标准，那么到目前为止还没有用于网络的标准库。然而，有计划在未来版本的 C++ 标准中包含这样的库。

SG4（负责网络库的Study Group）最近[在Github上建立了一个wiki](https://github.com/SG4/draft/wiki)

# vba - Excel VBA：传递数组时类型不匹配

> ID：13749599
> 
> 赞同：4
> 
> 时间：2012-12-06T17:56:08.783
> 
> 标签：vba, excel

```
 myArray = Array("A", "B", "C", "D", "E")

    Call someSub(myArray) 
```

...

```
 Sub someSub(ByRef myArray() as String) 'Error here
       'contents here
    End Sub 
```

第二部分的类型不匹配错误——是什么原因造成的？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-12-06T18:06:14.377

您是否有任何机会忽略使用`Option Explicit`然后继续不指定 myArray 的类型？这将使它成为一个变体，你说`as String`这确实是一个类型不匹配。

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-12-06T18:07:39.197

想通了-必须将其作为普通变体传递

```
Sub someSub(myArray as Variant) 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-06T18:58:32.037

真的应该使用选项显式，然后将所有变量定义为特定类型。在这种情况下：

```
Option Explicit

Dim myArray(1 to 10) as String 'define the number of elements before you use it.
myArray(1) = 'A'
myArray(2) = 'B'
[etc etc] 
```

它有点长，但是类型安全会让你的代码运行得更快，并且更容易阅读。它还可以防止您遇到的错误...

# list - python中的自动递增列表索引

> ID：13749602
> 
> 赞同：0
> 
> 时间：2012-12-06T17:56:16.147
> 
> 标签：list, python-2.7

观看索引`n`( 和`y`)

```
n = 0
while(0 < y):
  result[ n += 1] = items[y -= 1] 
```

所以上面是公认的语法。有没有一种优雅的方式来做到这一点，按`Java`'s的顺序

```
result[ n++] = items[--y] 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-06T18:01:53.573

不，这是不被接受的语法。

如果我正确理解您要做什么，那么pythonic方式将是

```
result = items[::-1] 
```

或者

```
result = list(reversed(items)) 
```

（[`reversed`](http://docs.python.org/2/library/functions.html#reversed)函数本身返回一个迭代器，而不是一个列表）。

# html - 子元素继承父样式

> ID：13749603
> 
> 赞同：0
> 
> 时间：2012-12-06T17:56:19.877
> 
> 标签：html, css

我有三个要素。

CSS：

```
#parent {
    height: 300px;
    width: 580px;
    background-color: #f5f5f5;
    overflow: hidden;
}

#child {
    margin-right: auto;
    margin-left: auto;
    height: 300px;
    width: auto;
    overflow: auto;
}

#child img {
    height: auto;
    width: auto;
} 
```

的HTML：

```
<div id="parent">
    <div id="child">
        <img/>
    </div>
</div> 
```

现在，基本上，如果图像小于 580 像素（宽度），我希望它在父元素中居中。但是，由于某种原因，当我将 Child 的宽度设置为 auto 时，它会填充 Parent 元素的整个宽度。我希望它是照片的宽度，以便它可以在父 div 中居中。我怎样才能做到这一点？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-06T18:00:31.880

如果您希望在其父图像中居中图像，请尝试以下操作：

```
#child img {
    margin: 0 auto;
    display: block;
} 
```

无需使用 css 调整图像的宽度。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-06T17:59:32.263

将子项的显示设置`<div>`为`inline-block`，然后将父项的显示设置`text-align`为`center`：

```
#parent {
    height: 300px;
    width: 580px;
    background-color: #f5f5f5;
    overflow: hidden;
    text-align:center;
}

#child {
    display:inline-block;
    height: 300px;
    width: auto;
    overflow: auto;
} 
```

这是一个[JSFiddle](http://jsfiddle.net/vGgYK/)

# wcf - WCF Web 服务客户端超时值

> ID：13749606
> 
> 赞同：2
> 
> 时间：2012-12-06T17:56:27.360
> 
> 标签：wcf, web-services, timeout

我正在使用 WCF Web 服务客户端从非 WCF Web 服务发送和接收 SOAP 消息。我想控制超时，但对[MSDN](http://msdn.microsoft.com/en-us/library/ms405809.aspx)上提供的不同超时设置感到非常困惑。

是否有一个简单的 WCF 客户端设置列表（无论服务器如何——我知道服务器是否有更短的超时时间，他们会统治！）？绑定或合同（XmlSerizalizer 或 MessageContact）类型是否重要？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-06T20:58:32.633

你见过：[超时 WCF 服务](https://stackoverflow.com/questions/229760/timeouts-wcf-services)吗？我认为特定的问题/答案符合您的要求。

# java - Void 方法缺少返回值？

> ID：13749612
> 
> 赞同：15
> 
> 时间：2012-12-06T17:56:41.683
> 
> 标签：java, generics

以下代码给了我编译时错误：缺少返回值和缺少返回语句，我会为此返回什么值*`Void Type`*？

```
final SwingWorker<Void, Void> worker = new SwingWorker<Void, Void>() {
    @Override
    protected Void doInBackground() throws Exception {
        // some code
        if (something) {
            return;
        }
    }
} 
```

* * *

## 回答 #1

> 赞同：30
> 
> 时间：2012-12-06T17:57:43.047

`Void`不是`void`，如果您不想返回任何内容，请将其更改为 void 类型。

void 是一个类，void 是类型。

```
/**
 * The {@code Void} class is an uninstantiable placeholder class to hold a
 * reference to the {@code Class} object representing the Java keyword
 * void.
 *
 * @author  unascribed
 * @since   JDK1.1
 */ 
```

如果需要`Void`，则需要`return`在末尾添加语句。

例子：

```
protected Void doInBackground() throws Exception {
    // some code
    if (something) {
       return null;
    }
    return null;
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-06T18:02:20.687

检查这个。它要求`Void`用大写的“V”而不是简单的返回`void`

```
final SwingWorker<Void, Void> worker = new SwingWorker<Void, Void>() {
    @Override
    protected Void doInBackground() throws Exception {
        // my code here
        return null;
    }
} 
```

# linux - 如何测量进程的堆栈大小？

> ID：13749626
> 
> 赞同：10
> 
> 时间：2012-12-06T17:57:13.077
> 
> 标签：linux

如何找到进程的堆栈大小？/proc/5848/status 给了我 VmStk 但这并没有改变

无论我在我的测试程序中做了多少循环和递归，这个值几乎没有变化。

当我查看 /proc/pid/status 时，所有进程都有 136k 并且不知道该值来自哪里。

谢谢，

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-12-06T17:58:46.387

Linux 上确实没有“进程的堆栈大小”这样的东西。进程有一个起始堆栈，但正如您所见，它们很少从标准堆栈中分配太多。相反，进程只是从操作系统分配通用内存并将其用作堆栈。所以操作系统无法知道——这些细节只能从进程内部看到。

典型的现代操作系统可能具有操作系统强加的 8MB 堆栈大小限制。然而，进程通常会在其堆栈上分配更大的对象。这是因为应用程序正在使用一个纯粹由应用程序管理的堆栈，而不是就操作系统而言的堆栈。

这对于多线程进程总是如此。对于单线程进程，它们实际上可能只使用非常非常少的堆栈。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-12-06T18:48:38.000

也许您只是想获取某个进程的地址映射。对于进程 1234，依次读取`/proc/1234/maps`伪文件。对于您自己的过程，请阅读`/proc/self/maps`

尝试

```
 cat /proc/self/maps 
```

感受一下（上面的命令显示了`cat`执行它的进程的地址映射）。

有关详细信息，请阅读[proc(5)](http://www.kernel.org/doc/man-pages/online/pages/man5/proc.5.html)手册页。

您可能还对进程限制感兴趣，例如[getrlimit(2)](http://www.kernel.org/doc/man-pages/online/pages/man2/getrlimit.2.html)和相关的系统调用。

^(我不确定堆栈大小是否具有某种精确意义，尤其是对于多线程进程。)

也许你对[mmap(2)](http://www.kernel.org/doc/man-pages/online/pages/man2/mmap.2.html) -ed 段感兴趣`MAP_GROWSDOWN`。

# vba - VBA如果单元格空白，删除行，如果没有单元格空白，结束序列

> ID：13749628
> 
> 赞同：0
> 
> 时间：2012-12-06T17:57:22.797
> 
> 标签：vba, excel, excel-2007

我想我需要一个循环功能，但我不知道该怎么做。

其任务是查看特定列是否为空白，然后删除该行。但有时没有空白单元格，我得到一个结束调试错误。

这是我的代码：

```
Sub DeleteRow()
Dim lr As Long
Dim shCurrentWeek As Worksheet
Set shCurrentWeek = AciveWorkbook.Sheets("Current Week")
lr = shCurrentWeek.Range("A" & Rows.Count).End(xlUp).Row 

'Delete Row
shCurrentWeek.Range("B4:B" & lr).SpecialCells(xlCellTypeBlanks).EntireRow.Delete

End Sub 
```

有任何想法吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-06T18:04:25.307

`on error resume next`就在你的`Delete`线路之前怎么样？像这样：

```
On error resume next
shCurrentWeek.Range("B4:B" & lr).SpecialCells(xlCellTypeBlanks).EntireRow.Delete 
```

我假设您不在乎它是否失败，因此无需进行错误捕获。如果您对 的调用没有返回任何单元格，这将阻止显示错误消息`SpecialCells`。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-06T18:26:55.343

虽然 Daniel Cook 是对的，但您可以使用`On Error Resume Next`，这是另一种解决方法，因为 using`On Error Resume Next`确实是 VBA (IMO) 中的最后选择。

下面的代码在尝试使用该`SpecialCells`方法之前检查空格。

```
Option Explicit

Sub DeleteRow()

Dim lr As Long
Dim shCurrentWeek As Worksheet

Set shCurrentWeek = ActiveWorkbook.Sheets("Current Week")
lr = shCurrentWeek.Range("A" & Rows.Count).End(xlUp).Row

If Application.WorksheetFunction.CountBlank(shCurrentWeek.Range("B4:B" & lr)) <> 0 Then

    shCurrentWeek.Range("B4:B" & lr).SpecialCells(xlCellTypeBlanks).EntireRow.Delete

End If

End Sub 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-06T19:23:14.780

这是我用于该类型操作的一段代码。

> 子清除空白（）
> 
> > 暗淡我只要
> > 
> > > For i = Range("B65536").End(xlUp).Row To 8 Step -1
> > > If IsEmpty(Cells(i, 4)) Then Rows(i).Delete
> > > 
> > > 接下来我
> > 
> > 结束子

我希望这有帮助！

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-01-17T21:39:57.043

今天之前没有使用过 VBA，所以我确信有一种更简洁的方法......但是这段代码将删除任何包含至少一个空单元格的行。它假定您有一个标题行，并且第一列用于 ID，因此这些单元格不会被“查看”。

这个脚本的好处是它适用于**任何大小的电子表格**，因此您不需要每次都对值进行硬编码：

```
Sub DeleteIncompleteRows()
Dim row As Integer, col As Integer
Dim deleted As Integer
deleted = 0
Dim actualRow As Integer
Dim totalRows As Integer
Dim totalCols As Integer
totalRows = Application.CountA(Range("A:A"))
totalCols = Application.CountA(Range("1:1"))

For row = 2 To totalRows
actualRow = row - deleted
For col = 2 To totalCols
If ActiveSheet.Cells(actualRow, col).Value = "" Then
ActiveSheet.Rows(actualRow).Delete
deleted = deleted + 1
Exit For
End If
Next col
Next row
End Sub 
```

祝一切顺利，

斯科特

# r - 使用 Rcpp.package.skeleton 创建的包无法安装（g++: error: : No such file or directory）

> ID：13749629
> 
> 赞同：4
> 
> 时间：2012-12-06T17:57:24.777
> 
> 标签：r, rcpp

使用 R 12.15.2 和 Rcpp 0.10.1 gcc 版本 4.6.3 运行 Ubuntu 12.04

我通过以下方式创建了一个骨架包：

```
 Rcpp.package.skeleton( "mypackage" ) 
```

然后运行`R CMD INSTALL mypackage`给出错误消息：

```
 g++ -I/usr/share/R/include -DNDEBUG   -I"/usr/Rlocal/Rcpp/include"   -fpic  -O3 -pipe  -g  -c rcpp_hello_world.cpp -o rcpp_hello_world.o
   g++ -shared -o mypackage.so rcpp_hello_world.o  -L/usr/Rlocal/Rcpp/lib -lRcpp -Wl,-rpath,/usr/Rlocal/Rcpp/lib -L/usr/lib/R/lib -lR
   g++: error: : No such file or directory
   make: *** [mypackage.so] Error 1 
```

更改到 mypackage/src 目录并从上面手动运行 g++ 命令可以正常工作并且不会产生错误。然后我可以使用 R CMD INSTALL 成功安装包（但是任何导致重新编译的源更改都会导致再次发生相同的错误）。

# javascript - "和'的区别

> ID：13749630
> 
> 赞同：0
> 
> 时间：2012-12-06T17:57:28.373
> 
> 标签：javascript, node.js, express

> **可能重复：**
> [何时在 JavaScript](https://stackoverflow.com/questions/242813/when-to-use-double-or-single-quotes-in-javascript)
> [单引号中使用双引号或单引号与在 js 中使用双引号](https://stackoverflow.com/questions/559752/single-quotes-versus-double-quotes-in-js)

我正在尝试构建一个 Node.js Express Web 应用程序，并且在教程中他们使用`'`而不是`"`经常使用，但没有解释为什么。

有人可以解释一下区别吗？这是 JavaScript 特有的，还是也适用于其他语言？

例子：

```
app.configure('dev')

app.get("/", function (req, res) 
```

谢谢 ：）

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-12-06T17:58:50.183

在 JavaScript 中，两者是等价的。唯一的区别是在单引号字符串中你不必 escape `"`，反之亦然：

```
'dev' === "dev"
'd"v' === "d\"v"
'd\'v' === "d'v" 
```

大多数其他语言以某种方式区分这两者。例如，在 Bash 和 Perl 中，`''`防止变量在内部扩展，`'a$b'`实际的 string 也是如此`a$b`，而`"a$b"`由`a`加上 variable 的值组成的字符串也是如此`b`。在 C、C++、C# 和 Java 中，`''`用于创建单个字符常量，因此`'a'`表示字符`a`，而`"a"`表示包含该字符的字符串。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-06T17:58:56.717

Javascript 字符串文字可以用`'`or括起来`"`；它们之间没有区别（嵌套除外）。
在大多数其他语言中，情况并非如此。

# c# - 嵌套在模型中的集合不受 MVC 3 的约束（始终为空）

> ID：13749631
> 
> 赞同：1
> 
> 时间：2012-12-06T17:57:38.467
> 
> 标签：c#, asp.net-mvc-3, entity-framework

我有一个模型，它在 ASP.NET MVC 3 和 Entity Framework 5.0 中表示有关大学的各种信息。该模型具有另一个模型的 ICollection，称为 TrendModel。无论我做什么，这个集合似乎在任何时候都不会被 MVC 存储/绑定。

当我在运行时（从数据库中检索到它之后）手动将此集合设置为某个值时，该集合当然不再为空，但是无论我将其设置为然后存储在数据库中，趋势始终为空我从数据库中检索它。

大学型号：

```
public class UniversityModel
{
    [Key]
    public string univ_id { get; set; }

    public string ipeds_id { get; set; }
    public string name { get; set; }
    public bool religious { get; set; }

    #region Location Information

    public string city { get; set; }
    public string state { get; set; }
    public string urbanization { get; set; }
    public double latitude { get; set; }
    public double longitude { get; set; }

    #endregion

    public ICollection<TrendModel> trends { get; set; }
} 
```

趋势模型：

```
public class TrendModel
{
    [Key]
    public string id { get; set; }
    public ushort year { get; set; }
    public uint? capacity { get; set; }
    public uint? rate { get; set; }
    public uint? meals { get; set; }
    public bool? forProfit { get; set; }
    public bool? control { get; set; }
    public string degree { get; set; }
    public bool? landgrant { get; set; }
    public bool? athletic { get; set; }
    public string calendar { get; set; }
    public bool? required { get; set; }
} 
```

不确定它是否相关，但如果我为 UniversityModel 放入一个将趋势设置为空列表的构造函数，则趋势不再为空，而是一个空列表。

这是模型绑定问题，还是帖子问题或其他问题？抱歉，如果我完全偏离基础，我对 MVC 和 ASP.NET 还是很陌生。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-06T18:07:50.403

您尚未在趋势模型中包含外键。请尝试`univ_id`在您的`TrendModel`课程中添加。

```
public class TrendModel
{
    [Key]
    public string id { get; set; }
    .
    .
    .
    [ForeignKey("univ_id")]
    public string univ_id   {get;set;}
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-06T22:23:55.010

事实证明，我只是通过对趋势执行延迟加载来解决问题，因此该属性现在显示为：

```
public virtual ICollection<TrendModel> trends { get; set; } 
```

# asp.net-mvc - asp.net mvc jquerymobile redirectotroute 不会改变 url

> ID：13749636
> 
> 赞同：1
> 
> 时间：2012-12-06T17:57:46.277
> 
> 标签：asp.net-mvc, jquery-mobile

我有一个 mvc4/jquerymobile 应用程序，我很难弄清楚为什么在`RedirectToRoute(rvd)`从控制器操作返回 a 后，重定向到的 url 没有显示。

我在编辑页面上使用`http://localhost/Report/Params/9`. 我编辑表单，提交它，然后`Report`控制器`Params`[HttpPost] 动作启动。它验证表单值，稍微修改它们，然后将它们中的大部分以及我的控制器（“报告”）和新操作（“渲染”）属性添加到 RouteValueDictionary。

这一切都正确发生，我被带到“渲染”视图，但浏览器中显示的 URL 仍然存在`http://localhost/Report/Params/9`

我希望显示浏览器 url `http://localhost/Report/Params/9?p1=1&p2=2&p3=3`，因为我希望用户能够为参数集添加书签以供以后使用。

我错过了什么？我*认为*这个问题与 jquerymobile 对提交按钮点击的处理有关。我试图用 data-ajax=false 来缓解这种情况，但它似乎没有任何帮助。

```
 <button type="submit" data-theme="b" name="submit" value="submit-value" data-ajax="false">
        Submit
    </button> 
```

谢谢

***编辑***：这是我的重定向功能的近似副本...

```
public ActionResult Params(FormCollection Params ) {
    RouteValueDictionary rvd = new RouteValueDictionary();

    // example values //
    rvd.Add("controller", "Report");
    rvd.Add("action", "Render");
    rvd.Add("id", 10);  
    rvd.Add("p1", 1);
    rvd.Add("p2", 2);
    rvd.Add("p3", 3);

    RedirectToRouteResult rrr = RedirectToRoute(rvd);
    return rrr;
} 
```

# css - 尊重代码中的空间但忽略 CSS？

> ID：13749648
> 
> 赞同：3
> 
> 时间：2012-12-06T17:58:29.057
> 
> 标签：css

使用 CSS，我可以让浏览器忽略`&nbsp;`字符但尊重正常的空白吗？

所以这：

```
Some text &nbsp;&nbsp;More text 
```

显示如下：

一些文字 更多文字

不是：

一些文字 更多文字

更新我的代码中实际上有更多的空白。我需要默认行为，其中额外的空白不会在页面上呈现，所以我认为我不能使用 white-space: pre 或 pre-wrap

所以这不应该在最初的单词之前过度缩进。

```
 Some text &nbsp;&nbsp;More text 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-06T19:14:05.720

我不认为有一种纯 CSS 方法可以做到这一点，因为`&nbsp;`它是一个与文本编辑器中空格键创建的空格不同的实际字符（HTML 渲染器会忽略它）。但是，根据这些字符的显示方式，您可以使用脚本来搜索并删除任何看到的字符。

# java - JPanel 上的组件在 setLayout(null) 时不显示

> ID：13749654
> 
> 赞同：1
> 
> 时间：2012-12-06T17:58:44.260
> 
> 标签：java, swing, jpanel, layout-manager, absolutelayout

有人可以告诉为什么组合框没有显示？我有一个控制器：

```
public class TestController extends JPanel {

TestView cgView;

public TestController() 
{

    setLayout(null);

    cgView=new TestView();

    add(cgView);

}
public static void main(String[] args) {
    SwingUtilities.invokeLater(new Runnable() {
        public void run() {
             JFrame fr = new JFrame("testt");
                fr.setSize(1200,1000);
                fr.setResizable(false);

                TestController cgc=new TestController();
                fr.setBackground(Color.white);
                fr.setVisible(true);

                fr.setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);
                fr.add(cgc);

         }
        });
    }

} 
```

和一个视图

```
public class TestView extends JPanel{
    private static final long serialVersionUID = 1L;

    public JComboBox<String> comboBox; 

    public TestView() {

          comboBox= new JComboBox<>(new String[] {"option1", "option2" });
          comboBox.setBounds(100,500, 100, 20);
          add(comboBox);

    }
} 
```

由于 TestController 中的*setLayout(null)*，我看不到组合框。如果我将*add(cgView.comboBox) 添加*到我的 TestContoller()，它看起来像这样：

```
public TestController() 
    {

        setLayout(null);

        cgView=new TestView();

        add(cgView);
        add(cgView.comboBox);

    } 
```

比我能看到的。有人能说出为什么吗？

所以我的解决方案是总是在TestController中添加组件，或者将TestController作为属性传递给TestView（所以在TestView（）中我会像this.parentPanel.add（comboBox）一样添加它们。还有其他解决方案吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-06T18:02:04.067

*   几乎永远不要使用空布局
*   而是使用嵌套在 JPanel 中的最佳布局组合来为您的 GUI 实现令人愉悦的布局。
*   如果您确实使用空布局，那么您将完全负责设置添加到该容器的**所有组件的大小和位置。**
*   您当前的问题是您从未给 TestView 一个大小或位置，然后将其添加到使用空布局的容器中。
*   您不应该将一个组件（上面是您的 JComboBox）添加到多个容器中。
*   在添加所有组件并调用它之前***，***不要调用`setVisible(true)`JFrame 。*`pack()`*

 *例如，

```
import java.awt.*;
import javax.swing.*;

public class TestController extends JPanel {
   private static final int PREF_W = 1000;
   private static final int PREF_H = 800;
   TestView cgView;

   public TestController() {
      setLayout(null);
      cgView = new TestView();
      cgView.setSize(getPreferredSize());
      add(cgView);
   }

   @Override
   public Dimension getPreferredSize() {
      return new Dimension(PREF_W, PREF_H);
   }

   public static void main(String[] args) {
      SwingUtilities.invokeLater(new Runnable() {
         public void run() {
            JFrame fr = new JFrame("testt");
            // fr.setSize(1200, 1000);
            fr.setResizable(false);
            TestController cgc = new TestController();
            fr.setBackground(Color.white);
            // fr.setVisible(true);
            fr.setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);
            fr.add(cgc);
            fr.pack(); //!! added 
            fr.setVisible(true); // !! moved
         }
      });
   }
} 
```

但最好使用布局：

```
import java.awt.*;
import javax.swing.*;

public class TestController extends JPanel {
   private static final int PREF_W = 1000;
   private static final int PREF_H = 800;
   TestView cgView;

   public TestController() {
      //!!  setLayout(null);
      cgView = new TestView();
      //!! cgView.setSize(getPreferredSize());
      add(cgView);
   }

   @Override
   public Dimension getPreferredSize() {
      return new Dimension(PREF_W, PREF_H);
   }

   public static void main(String[] args) {
      SwingUtilities.invokeLater(new Runnable() {
         public void run() {
            JFrame fr = new JFrame("testt");
            // fr.setSize(1200, 1000);
            fr.setResizable(false);
            TestController cgc = new TestController();
            fr.setBackground(Color.white);
            // fr.setVisible(true);
            fr.setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);
            fr.add(cgc);
            fr.pack(); //!! added 
            fr.setVisible(true); // !! moved
         }
      });
   }
}

class TestView extends JPanel {
   private static final long serialVersionUID = 1L;
   public JComboBox<String> comboBox;

   public TestView() {
      comboBox = new JComboBox<String>(new String[] { "option1", "option2" });
      // comboBox.setBounds(100, 500, 100, 20);
      add(comboBox);
   }
} 
```

**编辑**
OP 在评论中询问：

> '几乎从不'？在哪些情况下您会使用它 [null 布局]？

我很少使用它，例如当我想通过动画或使用 MouseListener 移动组件时，但即便如此，许多人还是建议您创建自己的布局来处理这种情况，例如 Rob Camick 的[Drag Layout](http://tips4java.wordpress.com/2011/10/23/drag-layout/)*

# solr - MARC21 - 书目记录文件：创建新字段并将修改后的值放在那里的脚本

> ID：13749655
> 
> 赞同：0
> 
> 时间：2012-12-06T17:58:44.827
> 
> 标签：solr, marc

我有一个包含书目记录的 MARC 文件，其中包含具有值的不同字段。例如作者、标题、出版年份等。数据结构如下所示：

```
700  1   |a King, Robert Harlen 
852  L   |3 81TYD2565(2) 
852  L   |3 Ugk25 1:2B 
```

为了实现某个功能，我需要将字段 852|3 的值复制、修改并写入记录文件，如下所示：

```
852  L   |4 TYD
852  L   |4 Ugk25 
```

由于我是新手，我想知道是否有人知道这样做的最佳方法是什么？

ps: MARC 文件将被索引到 SolR 索引中。是否有可能在索引期间进行更改？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-28T04:30:40.533

有大量的[软件包可以与 MARC](http://wiki.code4lib.org/index.php/Working_with_MARC)一起用于各种编程语言。如果您要将 MARC 数据索引到 Solr，您应该查看[SolrMarc](https://code.google.com/p/solrmarc/)。如果您不需要将更改保留回 MARC 记录，则可以在索引过程中执行此操作 - SolrMarc 允许使用 Java 或 BeanShell 编写自定义索引脚本。

# payment-gateway - Authorize.Net ARB API 获取定期付款的状态

> ID：13749658
> 
> 赞同：2
> 
> 时间：2012-12-06T17:58:51.517
> 
> 标签：payment-gateway, payment, authorize.net, recurring-billing, authorize.net-arb

我正在使用 authorize.net 的 ARB api。

我想知道除了电子邮件和静默帖子之外，还有其他方法可以获取定期付款的状态吗？

如果我有以下情况：

发送静默发布请求时，我的服务器因维护而停机。我可以调用 ARB api 来获取已通过付款的状态吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-06T18:25:46.280

您可以将[交易详情 API](http://developer.authorize.net/api/transaction_details/)用于：

*   批量结算信息，包括按支付类型细分的统计信息。
*   特定批次请求的交易细节有限。
*   特定交易 ID 的完整交易详情。
*   未结算交易的交易细节有限。
*   指定批次 ID 按付款类型的批次统计。

这些组合可用于报告和核对交易，包括由订阅进行的交易。

# javascript - JavaScriptprototype.constructor 属性的构造函数不在规范中？

> ID：13749659
> 
> 赞同：4
> 
> 时间：2012-12-06T17:58:52.910
> 
> 标签：javascript, constructor, ecmascript-5

[我在JS 规范](http://www.ecma-international.org/publications/files/ECMA-ST/Ecma-262.pdf)中找不到函数的任何地方 - 调用时`new`应该将`constructor`其原型的属性设置为自己。

当然规范说内置构造函数（对象，数组，字符串，＆c）都将它们的`prototype.constructor`属性设置为自己（即`Object.prototype.constructor = Object`）但我找不到任何地方说这必须/应该发生在其他构造函数（似乎应该拼写在`[[Construct]]`(13.2.2 `[[Construct]]`) 部分中，但它不是：

```
function F() {};
var obj = new F();
Object.getPrototypeOf(obj).constructor == F;  // non-standard??  I can't find where in spec 
```

我问是因为我看到很多代码将构造函数的prototype.constructor 属性“重置”回自身 - 但是这个属性首先指向构造函数似乎是非标准的？

```
function F() {};
F.prototype = new Parent();
F.prototype.constructor = F;  // 'reset' it cuz it changed! (according to spec it should never have been set?  Except in Object.prototype. 
```

JS 程序员是否可以/应该依赖这种非标准（？）期望，即如果未设置原型属性，构造函数的prototype.constructor 属性将指向构造函数本身？

V8 肯定会这样做：

```
function F() {};
console.log(F.prototype.constructor === F); // true!  WHY???  not in spec?  Should be Object? 
```

希望这有模糊的意义 - 谢谢！标记

PS由于它们的可变性，我只会依赖`instanceof`而不是使用该`constructor`属性。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-06T18:08:15.637

所有函数都有一个`.prototype`指向对象的`.constructor`属性和一个指向函数的属性是标准的。

[13.2 创建函数对象](http://es5.github.com/#x13.2)

> 1) 创建一个新的原生 ECMAScript 对象并让其`F`成为该对象。
> 
> ...
> 
> 16) 令 proto 为创建新对象的结果，这将由表达式构造，`new Object()`其中 Object 是具有该名称的标准内置构造函数。
> 
> 17)使用 arguments 、 Property Descriptor和 false调用`[[DefineOwnProperty]]`proto 的内部方法。`"constructor"``{[[Value]]: F, { [[Writable]]: true, [[Enumerable]]: false, [[Configurable]]: true}`
> 
> 18) 调用with arguments 、Property Descriptor和false的`[[DefineOwnProperty]]`内部方法。`F``"prototype"``{[[Value]]: proto, { [[Writable]]: true, [[Enumerable]]: false, [[Configurable]]: false}`

所以你可以看到`F`是新函数并且`proto`是原型对象。`proto`获取`"constructor"`指向 的属性，`F`并`F`获取`"prototype"`指向`proto`对象的属性

# jquery - 无法让 HTML5 History API 正常工作

> ID：13749664
> 
> 赞同：1
> 
> 时间：2012-12-06T17:59:32.623
> 
> 标签：jquery, html

好吧，我试图让 html5 历史 API 正常工作（无需重新加载页面）

但我找不到我在路径中间出错的地方。

www2.madeinweb.com.br/inovacao/transitions/

这是我的演示页面。

```
$(function() {
    $(".external").click(function() {
        var href = $(this).attr('href');
        $(body).load(href);
        history.pushState( null, null, href );
        return false
    });

    $( window ).bind( "popstate", function( e ) {
        var returnLocation = history.location || document.location;
        alert( returnLocation.href );
    });
}); 
```

这是我现在正在使用的脚本。我不确定我现在使用的加载方法。这是最好的解决方法吗？

谢谢。

# javascript - onmouseup 事件未触发

> ID：13749667
> 
> 赞同：3
> 
> 时间：2012-12-06T17:59:40.813
> 
> 标签：javascript, html, events

我有一个包含 IFrame 的文档（所有源项目都来自同一个域），当我将 onmouseup 事件附加到 IFrame 中的 div 时，无论我是否仍在元素上，它都会在我的鼠标启动时触发我的光标。

但是，如果我让 IFrame 仍然按住鼠标然后松开，则事件不会触发。

有没有办法解决这个问题，也许知道用户何时从 IFrame 中取出鼠标光标

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-06T18:11:57.990

鼠标事件与窗口相关联，并且 iframe 被视为窗口，因此如果光标不在 iframe 上，则不会将 mouseup 事件触发到 iframe。您可以做的是像这样在文档上捕获父框架的 mouseup 事件。

```
$(parent.document).mouseup(functionToRun); 
```

或者没有 jQuery

```
parent.document.onmouseup = functionToRun; 
```

您可以将其放入 iframed 文档中。

# java - -jar 调用中的“<”符号是什么意思？

> ID：13749669
> 
> 赞同：2
> 
> 时间：2012-12-06T17:59:45.963
> 
> 标签：java, command, sh, popen

我在使用 popen 的 linux 服务器上从 php 调用 java 时遇到问题。

```
$java = '/usr/bin/java';
$cmd = "$java -jar javafiles/register.jar < $tmpFile"; 
```

$tmpFile 之前的 < 是什么意思？因为显然它是从磁盘加载 $tmpFile 的内容并将其直接输入到 register.jar 执行的控制台上。是这样吗？因为 $tmpFile 的内容具有特殊字符，并且这些字符没有被编码在正确的字符集中。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-06T18:06:24.473

这正是它的作用。具体来说，它运行程序并将 的内容发送`$tmpFile`到正在执行的程序的标准输入 (System.in)。

# ios - ios可以让玩家组成2人团队，在游戏中心玩其他2人团队

> ID：13749673
> 
> 赞同：1
> 
> 时间：2012-12-06T18:00:00.270
> 
> 标签：ios, game-center

> **可能重复：**
> [iOS 开发：如何在 Game Center 中自动匹配玩家？](https://stackoverflow.com/questions/4629203/ios-development-how-do-i-auto-match-players-in-game-center)
> [如何在游戏中心将玩家分组？](https://stackoverflow.com/questions/8948255/how-to-split-up-players-into-teams-on-game-center)

我试图弄清楚 ios 中的游戏中心是否允许匹配系统创建每组两名球员，并让这两名球员的球队与其他两名球员的球队比赛。有谁知道这是否可行，如果可行，是否有一个地方可以让我看看它是如何像网页一样完成的？这将是一个回合制游戏，团队中的两名玩家每回合一起玩。任何帮助将不胜感激。提前致谢。

# iphone - 如何在用户之间创建具有即时消息功能的 iPhone 应用程序

> ID：13749674
> 
> 赞同：0
> 
> 时间：2012-12-06T18:00:03.290
> 
> 标签：iphone, objective-c, ios, mobile, instant-messaging

我想知道如何通过套接字通信为 iOS 创建一个包含 IM 的应用程序：我需要什么代码，更重要的是，如何设置服务器。

我知道像“XMPP/Jabber Bot”这样的关键字，但我遇到的大部分信息都是桌面和移动应用程序之间的混合，我想创建一个移动应用程序。

服务器需要能够推送通知，在设备之间只发送文本，并处理登录/创建独立的用户帐户。我想自己制作这个服务器，所以我不必支付月费，我正在寻找使用 Raspberry Pi 之类的东西创建一个服务器。当然，我需要为用户信息创建一个数据库，据我所知，我需要 PHP 和 MySQL。我也不确定数据库是否是服务器的一部分，以及如何为服务器提供高存储或带宽。

所有信息都将非常有帮助，在此先感谢您。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-12-06T18:10:34.740

您需要的是实现[XMPP 协议](http://en.wikipedia.org/wiki/XMPP)。[Jabber](http://www.jabber.org/)是一个实现该协议的开源项目。您需要在您的机器上运行一个[eJabber](http://www.ejabberd.im/)服务器，并在您的客户端机器上运行一个符合 XMPP 的客户端。两个聊天的人之间的连接保持打开状态，消息被推送到服务器并从服务器推送到其他客户端。

检查此[为 iOS 构建 Jabber 客户端：XMPP 设置](http://mobile.tutsplus.com/tutorials/iphone/building-a-jabber-client-for-ios-xmpp-integration/)。它有足够的帮助让你继续前进......

# c# - 如何使用 SpreadsheetGear 以编程方式设置已定义名称的范围？

> ID：13749676
> 
> 赞同：2
> 
> 时间：2012-12-06T18:00:07.980
> 
> 标签：c#, excel, spreadsheetgear

在 SpreadsheetGear 中对定义名称的支持不如 Excel 的其他组件好。

这可以做到吗？如果是这样，怎么做？

当我从另一个工作簿复制工作表时，范围仅限于该工作表，我希望能够将其应用于整个工作簿。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-06T18:05:50.347

这是您定义具有工作簿范围的名称的方式

```
SpreadsheetGear.IWorkbook workbook = workbookView.ActiveWorkbook;
SpreadsheetGear.INames definedNames = workbook.Names;
definedNames.Add(name, refTo, SpreadsheetGear.ReferenceStyle.A1);
definedNames[name].Comment = "SomeComment";
definedNames[name].Visible = true; 
```

*“当我从另一个工作簿复制工作表时，范围仅限于该工作表”*

如果我理解你的正确，你不能做你想做的事，这在逻辑上是不可能的。定义的名称应始终具有“工作簿范围”，`workbook.Names`即保存定义的名称信息。现在基于这个事实，如果您将工作簿从工作簿 A 复制到工作簿 B，则工作表不包含该工作簿 ( `workbookA.Names`) 的定义名称，因此它永远无法保存它们的引用。

我希望这有帮助。

# ruby - 如何使用私钥加密完全加密 Ruby 中的数据？

> ID：13749677
> 
> 赞同：5
> 
> 时间：2012-12-06T18:00:09.480
> 
> 标签：ruby, security, encryption, private-key, public-key

首先，关于我们系统的一些信息，它基本上是建筑行业的电子招标解决方案。

所以：

*   项目清单
*   我们的系统有多家公司
*   每个公司都有多个用户
*   每个公司可以创建多个拍卖
*   然后其他公司可以为可用的拍卖提交他们的投标。投标由成百上千个单独的项目组成，我们只需要加密这些记录的“价格”部分。

我们面临的问题是，我们的大客户不希望我们获得投标价格，至少在投标进行时是这样，这是完全可以理解的。现在，我们只是通过对称加密对价格进行加密，所以即使价格在数据库中被有效加密，他们担心的是我们有解密价格的密钥。

因此，我们正在研究某种形式的公钥加密系统。以下是我们对解决方案的初步想法：

1.  当一家公司注册时，我们使用 OpenSSL 为其创建一个公钥/私钥对，并将其保存在 S3 中或直接保存到数据库中。为了真正有用，我们将强制用户对私钥使用强密码，当然不会将其保存在数据库中。
2.  当一家公司提交拍卖报价时，我们使用拍卖所有者公司的公钥对价格进行加密，并将其保存到数据库中。
3.  当拍卖投标期结束并且发行公司想要第一次生成报告时，我们要求他输入他的密码并使用该密码和他公司的私钥来解密价格。
4.  为了使后续流量更快，我们缓存了解密的数据（并且可能使用简单的对称加密系统对其进行加密）

所以这里是问题（不幸的是，我们不是安全专家，如果这些是愚蠢的问题，很抱歉）：

*   这是否有任何意义，还是完全荒谬或矫枉过正的解决方案？
*   我们会使用 OpenSSL、OpenPGP 还是其他解决方案生成密钥？
*   如果用户想要更改密码或生成新密钥会怎样？除了用新密钥对所有内容进行解密/重新编码之外，别无他法？
*   这个解决方案会有哪些陷阱？
*   您可以推荐任何更好的解决方案吗？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-12-07T21:30:37.897

所以这是我的建议，如果你想使用加密来解决这个问题......

*   每个用户*和*每个公司都应该生成[OpenPGP](http://openpgp.com)（或[GnuPG](http://gnupg.org)）[非对称](http://en.wikipedia.org/wiki/Public-key_cryptography)公钥/私钥对
*   这些公钥中的每一个都应上传到[公钥服务器](http://en.wikipedia.org/wiki/Key_server_%28cryptographic%29)
*   公司可以选择“[签署](http://en.wikipedia.org/wiki/Digital_signature)”个人用户的公钥，以指定与这些用户的信任关系（如果该关系发生变化，则撤销该签名）
*   拍卖师或无党派仲裁者还将生成一个密钥对并将该公钥推送到公钥服务器
*   作为拍卖注册过程的一部分，每个用户都将导入拍卖人的公钥，而拍卖人将导入每个用户的公钥
*   受信任的第三方（可能是拍卖商之外的[SaaS](http://en.wikipedia.org/wiki/Software_as_a_service)供应商）将提供服务，用户和拍卖商将通过该服务进行通信
*   出价用户将通过以下方式创建出价
    *   用他们的私钥签署他们的出价
    *   将他们提议的价格加密为*两个*密钥：他们自己的公钥*和*拍卖师的公钥
    *   将出价提交给受信任的第三方服务，这将需要对在拍卖到期之前检索出价的任何用户实施禁令
*   在拍卖结束时，并且*只有*在拍卖结束后，拍卖师才会检索所有的出价、解密它们并验证签名

几个关键点：

*   至关重要的是，永远不会在服务中共享或存储任何用户或公司私钥——这是我在您提出的问题中看到的唯一真正的“缺陷”。如果是这种情况，一个用户很有可能指责管理员“欺诈”或“篡改”投标，因为您的服务器管理员最终将有权访问所有用户的私钥，因为您已经自己生成它们。
*   沿着同样的思路，任何所有通信和“投标”都必须由每个用户使用*真正*的私钥进行加密“签名”。这就是您如何知道出价来自一个特定用户并且*仅*来自该用户，并且该出价不可能被篡改。
*   将投标加密到投标用户和拍卖人的公钥中，确保第三方 SaaS 供应商在拍卖开放期间的停电期间不会对投标本身进行内省。我相信这是解决您所描述的问题的最重要的一点。
*   请注意，如果按照设计您希望在拍卖结束后公开所有出价，则实际上可能更喜欢将每个出价加密到*所有出价用户的环中。*如上所述，这将是对我的算法的轻微修改。

为了充分披露和可能进行一些微妙的营销，我碰巧是一家名为[Gazzang](http://gazzang.com)的公司的架构师和首席技术官，该公司实施了一个名为[zTrustee](http://gazzang.com/products/ztrustee)的产品，该产品的运作方式与上述完全一样；-)

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-12-06T18:22:44.137

需要明确的是：我有一种预感，您的客户可能不愿意牺牲让您的系统管理某些密码学*所带来的所有便利；*您可能应该提出几个选项以及它们的弱点与便利性。

### 一般要点

首先，您从一个明确的[威胁模型](http://en.wikipedia.org/wiki/Threat_model)开始，涵盖您能想到的所有可能的攻击。即使您选择不解决某些攻击（处理所有事情是不现实的），您也会找出更明显的攻击，并且至少有一套基本的步骤来处理其他攻击。

### 回复：这有意义吗？

我认为一般前提虽然对您的客户来说有点矫枉过正，但从安全角度来看是有道理的。您的客户需要一个加密安全的系统；很公平。

但是，关于您提出的解决方案的一些要点：

*   通过允许客户通过网络传递他们的密码，攻击者（您的客户似乎认为可能是您）只需要在密码中间人就可以访问定价数据。

    *   SSL 有助于缓解这种情况，但是沿线某处的错误日志行很可能会意外暴露客户端的密码。

客户*确保*您无权访问定价数据的*唯一真正加密安全的方法（如我所见）是让他们对其进行加密，并且您的系统只是充当加密数据的代理。*实际上，这使您成为加密数据包和公钥的代理，但您的系统**永远不会看到**私钥。

 ***问题是：客户是否愿意管理自己的密钥，或者这对他们来说是否过于繁重？您至少可以自动化其中的大部分内容（客户端应用程序/网站将处理在本地存储私钥，并且还负责收集其他相关方的公钥以解密他们的加密投标）

### 回复：我们会使用 OpenSSL、OpenPGP 或其他解决方案生成密钥吗？

真的没那么重要；这些选项中的每一个仅定义公钥/私钥和任何元数据的容器格式。使用最适合您的语言/平台的任何一种。

主要决策点应该是在哪个加密算法和密钥强度：RSA-2048？RSA-4096？椭圆曲线？别的东西？

特定于 Ruby：您可能只想使用[OpenSSL](http://ruby-doc.org/stdlib-1.9.3/libdoc/openssl/rdoc/index.html)库，因为它是标准库的一部分。但是重申我上面的观点：如果您的服务器甚至从未看到私钥，那就更好了（如果客户端可以在更好的安全性和便利性之间进行权衡）

### Re: 如果用户想要更改密码或生成新密钥会怎样？

更改密码是微不足道的：私钥本身只是使用某种对称算法加密。更改密码涉及解密现有密钥，并使用新密钥重新加密。如果客户丢失密码，则无法恢复。

生成新密钥可能更安全，但需要您更加努力（加密的有效负载需要识别它们匹配的密钥，并且客户端一次可以有多个活动密钥）。不过，这是一件好事；定期轮换密钥是一种常见的做法，即使它们没有受到损害。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-12-07T09:35:23.640

> 当一家公司注册时，我们使用 OpenSSL 为其创建一个公钥/私钥对，并将其保存在 S3 中或直接保存到数据库中。为了真正有用，我们将强制用户对私钥使用强密码，当然不会将其保存在数据库中。

我对这一步有点怀疑。如果您（开发公司）生成用于加密的公钥和私钥，则意味着您有 50% 的能力可以破解加密。唯一可以保护您的客户的是密码，您可能可以暴力破解（我不是建议您这样做，但您有能力这样做）

如果您将使用 PKI（或您所描述的），您需要确保不会在您的系统上创建密钥。客户应该在他们的系统上创建对，然后向您提供他们的公钥，您将使用它来加密价格。然后，客户端将能够使用他们唯一控制的私钥进行解密

> 这个解决方案会有哪些陷阱？

陷阱是您正在制定一个复杂的解决方案。特别是如果您遵循我上面的建议，那么您信任客户不会“丢失”私钥（和/或密码），否则他们将无法解密价格。此外，如果密钥从他们那里泄露，很难证明你的应用程序是“无辜的”

> 我们会使用 OpenSSL、OpenPGP 还是其他解决方案生成密钥？

为了防止客户丢失密钥的陷阱，您可能需要研究 PGP（商业版本肯定会这样做）以及 ADK（附加解密密钥）和“拆分密钥”的概念。这个想法是，除了使用客户的公钥加密之外，您还使用“公司”密钥进行加密，该密钥只​​能在 x 人中的 y 人聚集在一起时使用（例如，10 人可以拥有部分密钥如果他们中的 6 个聚集在一起，他们可以重建密钥）。这些零件可以在您的公司、客户、他们的律师等之间共享***

# php - Zend 路由没有控制器和动作

> ID：13749680
> 
> 赞同：1
> 
> 时间：2012-12-06T18:00:25.330
> 
> 标签：php, zend-framework, url, routing, url-routing

在数据库中有给定的文章 URL（例如“article1”、“article2”、“article3”）。

当我输入 www.example.com/article1 时，我想路由到控制器：索引，操作：索引。

我的路线是：

```
//Bootstrap.php
public function _initRoute(){    
    $frontController = Zend_Controller_Front::getInstance();

    $router = $frontController->getRouter();
    $router->addRoute('index',
        new Zend_Controller_Router_Route('article1', array(
            'controller' => 'index',
            'action' => 'index'
        ))
    );
} 
```

但是当我点击另一个链接（之前的功能）时，我再次获得 www.example.com/article1。有什么方法可以为数据库中的所有 URL 通常执行此路由吗？就像是：

```
 $router->addRoute('index',
        new Zend_Controller_Router_Route(':article', array(
            'controller' => 'index',
            'action' => 'index'
        ))
    ); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-07T00:24:35.373

我通常设置一个 ini 文件，而不是采用 xml 路由或“new Zend_controller_Router_Route”的方式。在我看来，它更容易组织。这就是我做你正在寻找的东西的方式。我建议对您的路由进行一些更改，而不是使用 http://domain.com/article1 的路由，[而](http://domain.com/article1)更像[http://domain.com/article/1](http://domain.com/article/1)。无论哪种方式，这都是我在你的情况下会做的。

在您的 routes.ini 文件中

```
routes.routename.route = "route"
routes.routename.defaults.module = en
routes.routename.defaults.controller = index
routes.routename.defaults.action = route-name
routes.routename.defaults.addlparam = "whatevs"

routes.routename.route = "route2"
routes.routename.defaults.module = en
routes.routename.defaults.controller = index
routes.routename.defaults.action = route-name
routes.routename.defaults.addlparam = "whatevs2"

routes.route-with-key.route = "route/:key"
routes.route-with-key.defaults.module = en
routes.route-with-key.defaults.controller = index
routes.route-with-key.defaults.action = route-with-key 
```

在您的引导文件中

```
class Bootstrap extends Zend_Application_Bootstrap_Bootstrap
{

#... other init things go here ...

protected function _initRoutes() {

    $config = new Zend_Config_Ini(APPLICATION_PATH . '/configs/routes.ini');
    $front = Zend_Controller_Front::getInstance();
    $router = $front->getRouter();
    $router->addConfig($config,'routes');
    $front->setRouter($router);
    return $router;

    }

} 
```

在您的控制器中，您可以执行此操作

```
class IndexController extends Zend_Controller_Action {

    public function routeNameAction () {
        // do your code here.
        $key = $this->_getParam('addlparam');

    }

    public function routeWithKeyAction () {

        $key = $this->_getParam('key');

        // do your code here.

    }
} 
```

# html - w3c 规范中的视口与画布？

> ID：13749683
> 
> 赞同：2
> 
> 时间：2012-12-06T18:00:33.800
> 
> 标签：html, css, terminology, viewport

我正在阅读 w3c[规范](http://www.w3.org/TR/CSS21/intro.html#the-canvas)并试图了解画布和视口之间的区别。

他们说：

> 画布是呈现格式化结构的空间。

同时他们说：

> 视口是屏幕上的窗口或其他查看区域

这两个定义并没有明确什么是画布，什么是视口。谁能给出一个清晰或解释性的定义？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-06T18:04:28.210

视口是浏览器内边框之间的可见框；
画布是包含整个文档的框。如果画布的一部分不适合视口，则它可能是不可见的。

换句话说：

*   视口是屏幕上用于显示网页的分配区域。这个框的大小是固定的，只有在用户调整窗口大小时才能改变。
*   画布可以比视口大。在这种情况下，可能会出现滚动条。

# java - 单元测试打印方法

> ID：13749690
> 
> 赞同：1
> 
> 时间：2012-12-06T18:00:50.873
> 
> 标签：java

如何创建一个将一些东西添加到地图并显示它的类。

考虑到通常需要用单元测试覆盖所有代码，并且测试显示数据的方法是一个问题，我想知道最好的界面。

这是我的第一个想法：

```
class MyFirstProgram {
    private Map<String, String> map = new HashMap<String,String>();
    public int insertData(...) {...}
    public void displayData(...) {...}
} 
```

...但是无法测试有关检索的任何内容，并且有这种显示方法...所以我认为：

```
class MyFirstProgram {
    private Map<String, String> map = new HashMap<String,String>();
    public int insertData(...) {...}
    private Map<String, String> retrieveData(...) {...}
    public int displayData(...) {...call ; return status}
} 
```

在这种情况下，可以使用反射测试私有方法，但仍然有这种显示方法......

对设计有任何想法吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-06T18:09:06.853

您可以尝试为 Map 变量创建 getter 和 setter。

```
class MyFirstProgram {
    private Map<String, String> map = new HashMap<String,String>();
    public setMap(Map data) {...}
    public Map getMap(...) {...}
} 
```

然后无论您想在哪里打印地图值，都可以使用 getMap 方法。如果您不想使用 setter 和 getter，我们可以使用任何将 Map 作为输入并打印它的方法。

```
public void PrintMap(Map data){print(data)} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-06T19:21:31.640

务实的方法是允许访问 Map （通过带有注释的默认/包访问方法`// for unit tests`，并访问它。实际上，更好的是，命名该方法`forUnitTestGetMap()`以使其更加清晰并避免与标准 getXXX 命名约定混淆。我'通常只需调用`toString()`Map 并比较它应该是什么，YMMV 就可以了。如果你`insertData()`只是在 HashMap 上调用标准方法（例如 put()），那么你*可以而且应该*测试的东西不多，因为大多数该代码是Java库代码。

或者，在该`displayData()`方法中，它是否创建了数据的替代表示？例如 XML、JSON，也许是 JPanel？如果是这样，请查看以查看数据的内容是否正确。显然，XML 比 JPanel 容易得多，但您仍然可以执行检查 JPanel 是否有 3 个子项，第一个是名为“OK”的按钮...

# javascript - 从jquery返回到javascript？

> ID：13749692
> 
> 赞同：0
> 
> 时间：2012-12-06T18:01:01.020
> 
> 标签：javascript, jquery, return

所以我对 Javascript 还很陌生，对 jQuery 也很陌生。在处理这个项目 atm 时，我从 Javascript 开始，但我的问题的很多解决方案在 jQuery 中要容易得多。

所以我有一些javascript，如果所有表单都没有通过验证，它基本上会阻止用户按下提交。

所以这是我的领域。

```
<td><input type="password" maxlength="16" name="passwd" id="passwd" onblur="validatePassword(this.value)" /></td>
<td><span id="pMess"></span></td> 
```

这是我的提交。

```
<td><input type="submit" value="Register" onclick="return validate(this.form)"/></td>
<td><a href='Index.php'>Login?</a></td> 
```

正如您所看到的，当您按下提交时，它会进入验证功能，即：

```
function validate(theForm) {
    var valid = true;

    if ( !validateEmail(theForm.emailrec.value) ) valid = false;
    if ( !validatePassword(theForm.passwd.value) ) valid = false;
    if ( !validatePostcode(theForm.postcode.value) ) valid = false;
    if ( valid ) return true;
    else return false;
} 
```

最后，这是现场检查器。

```
function validatePassword(passwordString) {
   var valid = true;

   if ( passwordString == "" ) {
      feedback('pMess','Enter your password here');
      valid = false;
   } else if ( passwordString.length <= 5 ){
      feedback('pMess','Password too short');
      valid = false;
   } else feedback('pMess','Acceptable');

   if ( valid ) return true;
   else return false;
} 
```

我的用户名字段检查器与 jQuery 中的略有不同

```
$(document).ready(function() {
    $('#username').keyup(username_check);
});

function username_check() { 
    var username = $('#username').val();
    if(username == "" || username.length < 6){
        $('#username').css('border', '3px #CCC solid');
        $('#tick').hide();
        $('#cross').fadeIn();
    } else {
        jQuery.ajax({
            type: "POST",
            url: "check.php",
            data: 'username=' + username,
            cache: false,
            success: function(response){
                if(response == 1) {
                    $('#username').css('border', '3px #C33 solid'); 
                    $('#tick').hide();
                    $('#cross').fadeIn();
                } else {
                    $('#username').css('border', '3px #090 solid');
                    $('#cross').hide();
                    $('#tick').fadeIn();
                }
            }
        });
    }
} 
```

所以我想做的是让 username_check 像我的其他字段检查器一样返回。我只是在寻求关于我应该把退货和东西放在哪里的帮助。无论我尝试什么似乎都会破坏密码......

到目前为止我所拥有的一切

```
 if ( !check_username(theForm.username.value) ) valid = false; 
```

任何帮助我指出正确方向的帮助将不胜感激。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-06T18:31:45.443

问题不在于 jQuery。问题是您正在使用**异步**调用来进行一些验证。 `jQuery.ajax`是异步的，这意味着代码在获取`check.php`. 换句话说，当响应返回时，`username_check()`已经返回并提交了您的表单（或取消了提交）。

对于代码的非 AJAX 部分（长度检查），您可以这样做`return`：

```
function username_check() { 
    var username = $('#username').val();

    // NOTE: This is redundant, as "" has length 0
    if(username == "" || username.length < 6){ 
        $('#username').css('border', '3px #CCC solid');
        $('#tick').hide();
        $('#cross').fadeIn();
        return false;   // This will work here
    } else {
        // AJAX stuff
    }
} 
```

不幸的是，其余的变得有点棘手。您真正想要做的是等待提交您的表单，直到完成用户名检查，这意味着您的提交需要进入回调函数（即`success`您的 AJAX 的一部分）。如果你只有一个 AJAX 调用，这还不错。如果您有多个 AJAX 调用，则需要嵌套所有调用（这会使代码花费更长的时间，不是很漂亮，并且在一个失败后不会轻易进行其他检查）或者您需要使用[延迟对象](http://api.jquery.com/category/deferred-object/)（或类似的东西），这不是微不足道的（但非常有用）。

假设您对用户名有一个 AJAX 调用：

首先，在提交按钮中添加一个 ID。这使得从 jQuery 引用更容易：

```
<td><input id="mysubmit" type="submit" value="Register" onclick="return validate(this.form)"/></td>
<td><a href='Index.php'>Login?</a></td> 
```

其次，在所有其他检查之后进行用户名检查，并且仅在其他检查有效时才提交：

```
function validate(theForm) {
    var valid = true;

    if ( !validateEmail(theForm.emailrec.value) ) valid = false;
    if ( !validatePassword(theForm.passwd.value) ) valid = false;
    if ( !validatePostcode(theForm.postcode.value) ) valid = false;

    // The non-AJAX checks for username length:
    var username = theForm.username.value;
    if ( !validateUsername(username) ) valid = false;

    jQuery.ajax({
        type: "POST",
        url: "check.php",
        data: 'username=' + username,
        cache: false,
        success: function(response){
            if(response == 1) {
                $('#username').css('border', '3px #C33 solid'); 
                $('#tick').hide();
                $('#cross').fadeIn();
            } else {
                $('#username').css('border', '3px #090 solid');
                $('#cross').hide();
                $('#tick').fadeIn();

                // If the other checks were OK, submit the form manually
                if(valid) {
                    $("#mysubmit").submit();
                }
            }
        }
    });

    // ALWAYS return false.  
    // We will submit the form manually if the checks are OK
    // For now, prevent the submit
    return false;
} 
```

说得通？

笔记：

*   您可能希望在单击提交按钮后禁用它（并在失败时重新启用它。否则，如果 AJAX 需要一段时间，用户可能会在其回调之前更改字段值，从而允许在不检查的情况下提交错误数据.
*   另一个解决方案是进行检查`onsubmit`。 **目前，如果用户按下回车键，则不会调用您的检查。这是不好的！**

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-12-06T18:11:03.293

不确定我是否遵循，如果验证，您希望函数返回 true 或 false，对吗？

编辑：我的代码是废话，感谢烤了指出这一点。

所以，当你在做一个 ajax 调用时，你不能真正得到它在同一个函数中是否有效（真或假），你可能需要做一些不同的事情......

几个想法；- 使用您的 DOM（将“无效”类或类似的东西添加到表单字段，然后检查该值。

- 使用全局变量“valid_user”保存验证结果......（我知道全局变量很糟糕，这是一种不好的做法，但是，如果你有截止日期......）

然后，当您验证孔形式时，请检查这些内容，而不是再次调用 username_check。

希望这可以帮助！

# c# - 来自数组的 Sharepoint XML 查询

> ID：13749695
> 
> 赞同：0
> 
> 时间：2012-12-06T18:01:10.523
> 
> 标签：c#, loops, sharepoint-2010, caml

我有一个我在 SharePoint 2010 列表中搜索的**x人的列表。**如何在 XML 中构建类似于 if 语句的 or 语句

```
if( person1 || person2 || person3 || ... personx) 
```

由于每个`<Or>`人都必须有两个孩子，不多也不少，所以到目前为止我有这个：

```
query.InnerXml = "<Where>" +
                     "<Or>" +
                        "<Or>" +
                        "<Contains>" +
                            "<FieldRef Name=\"Member\" />" +
                            "<Value Type=\"Text\">" +
                                 "Person1" +
                            "</Value>" +
                        "</Contains>" +
                        "<Contains>" +
                            "<FieldRef Name=\"Member\" />" +
                            "<Value Type=\"Text\">" +
                                 "Person2" +
                            "</Value>" +
                         "</Contains>" +
                     "</Or>" +
                     "<Contains>" +
                         "<FieldRef Name=\"Member\" />" +
                         "<Value Type=\"Text\">" +
                              "Person3" +
                         "</Value>" +
                     "</Contains>" +
                 "</Or></Where>"; 
```

但是我想不出一个好方法来在循环浏览我的 x 人列表时做出所有其他或陈述

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-06T18:29:56.167

SharePoint 2010 添加了一个`In`子句，简化了这一点。

这是一个将所有人放入`Value`包装器的辅助方法：

```
public static string ValuesAsCAML(IEnumerable<string> values, string type)
{
    StringBuilder output = new StringBuilder();
    foreach (string value in values)
    {
        output.AppendFormat("<Value Type=`{0}`>{1}</Value>", type, value);
    }

    return output.ToString();
} 
```

有了它，您现在可以编写：

```
var people = new[] { "Person1", "Person2", "Person3" };
string values = ValuesAsCAML(people, "Text");

var query = string.Format(
@"<Where>
    <In>
        <FieldRef Name='Member` />
        <Values>
            {0}
        </Values>
    </In>
</Where>"
, values); 
```

# python - Python - 将字符串拆分成更小的块并分配一个变量

> ID：13749701
> 
> 赞同：10
> 
> 时间：2012-12-06T18:01:52.543
> 
> 标签：python

是否可以在 python 中拆分一个字符串并将每个拆分的部分分配给一个变量以供以后使用？如果可能的话，我希望能够按长度拆分，但我不确定使用 len() 将如何工作。

我试过了，但它没有得到我需要的东西：

```
x = 'this is a string'
x.split(' ', 1)
print x 
```

结果：['这个']

我想得到这样的结果：

```
a = 'this'
b = 'is'
c = 'a'
d = 'string' 
```

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-12-06T18:17:33.930

如果您想一次访问 3 个字符的字符串，则需要使用[slicing](https://stackoverflow.com/a/509295/600110)。

您可以使用这样的列表推导获取字符串的 3 个字符长片段的列表：

```
>>> x = 'this is a string'
>>> step = 3
>>> [x[i:i+step] for i in range(0, len(x), step)]
['thi', 's i', 's a', ' st', 'rin', 'g']
>>> step = 5
>>> [x[i:i+step] for i in range(0, len(x), step)]
['this ', 'is a ', 'strin', 'g'] 
```

重要的一点是：

```
[x[i:i+step] for i in range(0, len(x), step)] 
```

`range(0, len(x), step)`为我们获取每个`step`-character 切片开始的索引。 `for i in`将遍历这些索引。 `x[i:i+step]`获取`x`从索引开始`i`且`step`字符长的切片。

如果你知道你每次都会得到四件，那么你可以这样做*：*

```
a, b, c, d = [x[i:i+step] for i in range(0, len(x), step)] 
```

如果`3 * step < len(x) <= 4 * step`.

如果你没有正好四块，那么 Python 会给你一个`ValueError`尝试解压这个列表。因此，我认为这种技术非常脆弱，不会使用它。

你可以简单地做

```
x_pieces = [x[i:i+step] for i in range(0, len(x), step)] 
```

现在，你以前访问的地方`a`，你可以访问`x_pieces[0]`。对于`b`, 你可以使用`x_pieces[1]`等等。这使您具有更大的灵活性。

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-12-06T18:10:49.367

您可以使用解包

```
a,b,c,d=x.split(' '); 
```

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2012-12-06T18:54:23.580

**几个选择**

我通常不倾向于正则表达式，但要分块一个字符串，使用它还不错：

```
>>> s = 'this is a string'
>>> re.findall('.{1,3}', s)
['thi', 's i', 's a', ' st', 'rin', 'g'] 
```

而且矫枉过正

```
>>> t = StringIO(s)
>>> list(iter(lambda: t.read(3), ''))
['thi', 's i', 's a', ' st', 'rin', 'g'] 
```

* * *

## 回答 #4

> 赞同：4
> 
> 时间：2012-12-06T18:03:20.600

你可以尝试这样的事情：

```
In [77]: x = 'this is a string'

In [78]: a,b,c,d=[[y] for y in x.split()]

In [79]: a
Out[79]: ['this']

In [80]: b
Out[80]: ['is']

In [81]: c
Out[81]: ['a']

In [82]: d
Out[82]: ['string'] 
```

使用[`itertools.islice()`](http://docs.python.org/2/library/itertools.html#itertools.islice)：

```
In [144]: s = 'this is a string'

In [145]: lenn=len(s)//3 if len(s)%3==0 else (len(s)//3)+1

In [146]: it=iter(s)

In [147]: ["".join(islice(it,3)) for _ in range(lenn)]
Out[147]: ['thi', 's i', 's a', ' st', 'rin', 'g'] 
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-12-06T18:20:43.287

```
x = 'this is a string'
splitted = x.split()
count = 0
while count <= len(splitted) -1:
    print splitted[count]
    count = count + 1 
```

这将在一行中打印每个部分...在这里您还可以查看如何使用`len()`

while 循环将打印每一行，直到计数器达到最大长度

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2012-12-06T18:28:07.637

```
x, i = 'this is a string', 0 #assigning two variables at once
while i <= len(x):
   y = x[i: i + 3]
   print y
   i += 3  #i = i + 3 
```

这包括“空格”字符（“”）。

如果要保留每个数字，请将它们保存在列表中：

```
x, my_list, i = 'this is a string', [], 0
while i <= len(x):
   y = x[i : i + 3]
   my_list.append(y)
   i += 3 
```

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2012-12-06T19:17:30.430

```
 def tst(sentence):
    print sentence
    bn=sentence.split(" ");
    i=0
    for i in range(0,len(bn)):
          a= bn[i]
          i=i+1
          print a 
```

以这种方式测试它：

```
 if __name__ == '__main__':
      x="my name is good"
      tst(x) 
```

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2013-11-14T12:28:07.553

这将在字符串少于 27 个单词的约束下产生您想要的精确输出。如果您用完表示块的键，您始终可以使用[生成器。](https://wiki.python.org/moin/Generators)

```
x      = 'this is a string'
chunks = x.split(' ')
key    = 'a'
for chunk in chunks:
    print key + " = " + chunk
    key = chr(ord(key) + 1) 
```

# c# - Unity 工厂注入

> ID：13749706
> 
> 赞同：4
> 
> 时间：2012-12-06T18:02:07.717
> 
> 标签：c#, unity-container, castle

我有一个像下面这样的接口，我将它注入到统一容器中。

```
public interface IMyInstanceFactory
{
    IEnumerable<IMyInstance> GetAll();
} 
```

所有`IMyInstance`这些在运行前都是已知的，即它们可以在引导程序中设置并且可以从统一中检索。我的具体实现`IMyInstanceFactory`如下：

```
public class MyInstanceFactory:IMyInstanceFactory
{
    IUnityContainer _container;

    public MyInstanceFactory(IUnityContainer container)
    {
        _container = container;
    }
    public IEnumerable<IMyInstance> GetAll()
    {
        return _container.ResolveAll<IMyInstance>();
    }
} 
```

..在我的引导程序中，我做了这样的事情：

```
container.RegisterType<IMyInstance,MyInstance1>;
container.RegisterType<IMyInstance,MyInstance2>;
container.RegisterType<IMyInstance,MyInstance3>;
container.RegisterType<IMyInstanceFactory,MyInstanceFactory>; 
```

这很好地解决了一切。但是，我不想依赖容器本身或`IMyInstanceFactory`为此实现，有没有一种方法可以在不实现的情况下进行设置`IMyInstanceFactory`？Unity 是否为此提供了便利？

这种东西。。

```
container.RegisterType<IMyInstanceFactory,factory=>factory.GetAll()>().IsResolvedBy(unity.ResolveAll<IMyInstance>); 
```

我知道城堡可以做到这一点，Unity可以做类似的事情吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-06T20:42:18.740

有[一个用于 Unity 的 Castle Windsor Typed Factory 港口](http://outlawtrail.wordpress.com/2012/07/27/auto-generated-factories-with-unity/)。它将生成您的接口的实现并`ResolveAll`为您完成。

您的引导代码应如下所示：

```
container.RegisterType<IMyInstance,MyInstance1>("1");
container.RegisterType<IMyInstance,MyInstance2>("2");
container.RegisterType<IMyInstance,MyInstance3>("3");
container.RegisterType<IMyInstanceFactory>(new TypedFactory()); 
```

调用`GetAll`将被转换为容器调用`ResolveAll`。

该端口遵循为 Windsor 描述的相同约定。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-06T18:50:33.880

将容器传递给工厂没有任何问题，如果工厂作为单例公开，这样就可以很好地获取实例，而无需再次传递容器。

另一种选择是在工厂中使用服务定位器解析容器，因为定位器是单例的，这种方法类似于前者。

# c - 在 C 中打印整数的重要位置

> ID：13749711
> 
> 赞同：-1
> 
> 时间：2012-12-06T18:02:19.110
> 
> 标签：c, output

我想知道尝试将输出中的列排列起来，我想使用 %g 来打印，它必须用逗号分隔，但我很难让它们排列起来。

我目前正在打印所有双打：

```
fprintf(output, "|%-9.6g, |%-15.6g, |%-30.6g\n",x,data[2*Ndprime-value1+i],data[2*Ndprime-value1+i+1]); 
```

我的输出如下所示：

```
|-0.0859029, |506.929        , |-505.954                      
|-0.079767, |507.13         , |-506.212                      
|-0.0736311, |507.312        , |-506.451                      
|-0.0674952, |507.474        , |-506.671                      
|-0.0613592, |507.618        , |-506.872                      
|-0.0552233, |507.742        , |-507.053                      
|-0.0490874, |507.847        , |-507.216                      
|-0.0429515, |507.933        , |-507.359                      
|-0.0368155, |508            , |-507.484                      
|-0.0306796, |507.798        , |-507.839                      
|-0.0245437, |508.077        , |-508.675                      
|-0.0184078, |509.086        , |-509.242                      
|-0.0122718, |510.077        , |-508.79                       
|-0.00613592, |510.798        , |-507.569 
```

有没有办法排队 | 并且左边的数字和逗号之间没有空格？

我知道这是一个非常微不足道的问题，但我似乎找不到任何东西。提前致谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2014-09-07T05:25:25.543

诀窍是所寻求的间距取决于 a `double`，但间距出现*在*the`double`和逗号之后。建议分步打印，用 from 的返回值`fprintf()`控制下一个`"%*s"`。未经测试的代码思路如下：

`fprintf()`返回`char`打印（或`EOF`错误）的数量。

```
int len;
len = fprintf(output, "|%-9.6g,", x); 
len = (len > 13) 1 : 13 + 1 - len;
len = fprintf(output, "%*s|%-15.6g,", len, "", data[2*Ndprime-value1+i]); 
len = (len > 16) 1 : 16 + 1 - len;
fprintf(output, "%*s|%-30.6g\n", len, "", data[2*Ndprime-value1+i+1]); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-06T19:11:48.970

这就是我如何能够保持行左对齐，同时让逗号立即出现在数字之后。

```
 sprintf(str1, "%.6g,", othernumbers[i]);
 sprintf(str2, "%.6g,", numbers[i]);

 printf("|%-10s |%-16s |%-30.6g\n",str2,str1,-othernumbers[i]); 
```

但是要解决您的“|”问题 不排队你可能不得不考虑不使用 %g 而使用 %f 。

来自[http://www.cplusplus.com/reference/cstdio/printf/](http://www.cplusplus.com/reference/cstdio/printf/) discusing '.number'

> *   对于 a、A、e、E、f 和 F 说明符：这是要在小数点后打印的位数。
> *   对于 g 和 G 说明符：这是要打印的最大有效位数。

因此，对于数字 -0.00613592，由于小数点后有 2 个零，因此显示的最小宽度始终为 11。使用 %f 会将其减少到 -0.006135。使用 %g 您将始终有可能超出您的字段宽度。

# java - 我需要一位专家来让我了解 Java Throwable 的 addSuppressed 的作用？

> ID：13749714
> 
> 赞同：6
> 
> 时间：2012-12-06T18:02:20.520
> 
> 标签：java, exception, throwable

> **可能重复：**
> [JDK 1.7 Throwable `addSuppressed()` 方法](https://stackoverflow.com/questions/8946661/jdk-1-7-throwable-addsuppressed-method)

所以Java在[Throwable中有一个方法](http://docs.oracle.com/javase/7/docs/api/java/lang/Throwable.html#addSuppressed%28java.lang.Throwable%29)

```
public final void addSuppressed(Throwable exception) 
```

这就是它的作用：

> 将指定的异常附加到为传递此异常而被抑制的异常。此方法是线程安全的，通常由 try-with-resources 语句调用（自动和隐式）。

..我对此感到困惑，什么是“为传递此异常而被抑制的异常的指定异常”。?

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-06T18:13:42.373

文档中有一个很好的解释：[Throwable](http://docs.oracle.com/javase/7/docs/api/java/lang/Throwable.html#addSuppressed%28java.lang.Throwable%29)

> 除非通过构造函数禁用，否则会启用抑制行为。当抑制被禁用时，这个方法除了验证它的参数之外什么都不做。
> 
> 请注意，当一个异常导致另一个异常时，通常会捕获第一个异常，然后抛出第二个异常作为响应。换句话说，这两个例外之间存在因果关系。相反，在某些情况下，可以在同级代码块中引发两个独立的异常，特别是在 try-with-resources 语句的 try 块和关闭资源的编译器生成的 finally 块中。在这些情况下，只能传播引发的异常之一。在 try-with-resources 语句中，当有两个这样的异常时，将传播源自 try 块的异常，并将 finally 块的异常添加到由 try 块的异常抑制的异常列表中。作为一个异常展开堆栈，
> 
> 一个异常可能已经抑制了异常，同时也由另一个异常引起。异常是否有原因在其创建时在语义上是已知的，这与异常是否会抑制其他异常不同，这通常仅在抛出异常后才确定。
> 
> 请注意，程序员编写的代码也能够在存在多个同级异常且只能传播一个异常的情况下调用此方法。

# objective-c - NSPredicateEditor & NSExpression - 显示可以不同于谓词的值吗？

> ID：13749717
> 
> 赞同：6
> 
> 时间：2012-12-06T18:02:25.893
> 
> 标签：objective-c, cocoa, nspredicate, nspredicateeditor, nsexpression

我有一个谓词编辑器，模板是通过以下方式生成的：

```
 NSArray * test = [NSArray arrayWithObjects:
                      [NSExpression expressionForKeyPath: @"Abc"],
                      [NSExpression expressionForKeyPath: @"Def"],
                      nil];

    NSPredicateEditorRowTemplate * template = [[NSPredicateEditorRowTemplate alloc] initWithLeftExpressions: test
                                   rightExpressionAttributeType: NSStringAttributeType
                                                       modifier: NSDirectPredicateModifier
                                                      operators: [NSArray arrayWithObject:
                                                                 [NSNumber numberWithUnsignedInteger:NSContainsPredicateOperatorType]]
                                                        options:(NSCaseInsensitivePredicateOption|NSDiacriticInsensitivePredicateOption)]; 
```

因此，如果我填写这样的谓词编辑器： ![谓词编辑器](../Images/7631bafcbd025cd3dccdebcd3982e235.png)

当我注销生成的谓词时，我得到：

`Abc CONTAINS[cd] "abc" OR Def CONTAINS[cd] "def"`

我想知道我是否可以以某种方式让谓词编辑器模板显示与生成的谓词中设置的值不同。

EX：我希望输出谓词具有：

`Field1 CONTAINS[cd] "abc" OR Field2 CONTAINS[cd] "def"`

即使编辑器仍然显示`abc`和`def`作为字段。这可能吗？

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-12-07T05:12:05.843

是的，你可以这样做。

您希望左表达式数组成为最终谓词中的实际 keyPaths。在你的情况下，`"Field1"`和`"Field2"`。

至于在弹出窗口中显示不同的值，这里有一个令人费解的概念：

*您要将谓词编辑器本地化为英语*。

有两种方法可以做到这一点。

1.  使用 .strings 文件
2.  带着`NSDictionary`

**使用 .strings 文件**

在您的来源中，您将在评论中包含以下内容：

```
// NSLocalizedStringFromTable(@"%[Field1,Field2]@ %[contains]@ %@", @"PredicateEditor", @"") 
```

当您[`genstrings`](http://developer.apple.com/library/mac/#documentation/Darwin/Reference/ManPages/man1/genstrings.1.html)在源代码上运行时，这将生成一个`PredicateEditor.strings`包含以下条目的文件：

```
"%[Field1]@ %[contains]@ %@" = "%[Field1]@ %[contains]@ %@";
"%[Field2]@ %[contains]@ %@" = "%[Field2]@ %[contains]@ %@"; 
```

您可以将值更改为：

```
"%[Field1]@ %[contains]@ %@" = "%[Abc]@ %[contains]@ %@";
"%[Field2]@ %[contains]@ %@" = "%[Def]@ %[contains]@ %@"; 
```

然后，当您创建您的 时`NSPredicateEditor`，您将[`formattingStringsFileName`](http://developer.apple.com/library/mac/documentation/Cocoa/Reference/NSRuleEditor_class/Reference/Reference.html#//apple_ref/doc/uid/TP40004576-CH1-SW4)属性设置为`"PredicateEditor"`，编辑器将处理其余部分。

**带着`NSDictionary`**

这将遵循与 .strings 选项相同的基本概念，但您基本上会这样做：

```
NSDictionary *formatting = @{
  @"%[Field1]@ %[contains]@ %@" : @"%[Abc]@ %[contains]@ %@",
  @"%[Field2]@ %[contains]@ %@" : @"%[Def]@ %[contains]@ %@"
}
[myPredicateEditor setFormattingDictionary:formatting]; 
```

这就是你所要做的。

我很久以前[在博客上写过这个，其中包含更多您可能会发现有用的信息。](http://funwithobjc.tumblr.com/post/1482915398/localizing-nspredicateeditor)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-07T00:45:44.840

基本上，您想修改弹出按钮中菜单项的标题。这就是你需要做的。它不应该影响您返回的基础谓词。如果您在界面生成器中创建它，则可以轻松获取模板的菜单项并设置其标题。但是由于您是在代码中执行此操作的，因此您必须在代码中对其进行修复。

以下是您可以这样做的方法。在我的行模板类中，我想更改我的 NSTextFields 的宽度。所以在我的行模板类中，我寻找它们并像这样修改它们......

```
- (void)awakeFromNib {
    NSArray* views = [self templateViews];
    for (id view in views) {
        if ([[view class] isEqual:[NSTextField class]]) {
            NSRect tfFrame = [view frame];
            tfFrame.size.width = 600;
            [view setFrame:tfFrame];
        }
    }
} 
```

你可以看到我得到了 templateViews 并寻找 NSTextFields... 然后修改它们。你可以做类似的事情来寻找 NSPopupButtons。一旦你找到一个，检查他们的菜单项标题并寻找标题为“abc”和“def”的菜单项，并将它们的标题分别更改为“Field1”和“Field2”。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2017-01-08T05:36:53.983

`NSLocalizedString`与其使用特定格式的选项文字并生成本地化字符串，不如`genstrings`自己生成最终的本地化 .strings 文件字符串似乎更容易/更干净。

[从这篇博](http://funwithobjc.tumblr.com/post/1488710860/followup-to-localizing-nspredicateeditor)文中，我们可以使用 Private API`_generateFormattingDictionaryStringsFile`从 NSPredicateEditor 本身获取格式化字符串：

```
extension NSPredicateEditor {

    func formattingDictionaryStrings() -> String? {
        var strings: String? = nil

        if let formattingDictionaryData = self.perform(Selector("_generateFormattingDictionaryStringsFile"))?.takeRetainedValue() as? Data {
            strings = String(data: formattingDictionaryData, encoding: .utf16)
        }

        return strings
    }

} 
```

这会生成所有排列，而无需`genstrings`. 然后，您将 右侧的标记替换为`=`用户显示的字符串。

```
"%[ABC]@ %[is]@ %[123]@" = "%1$[ABC]@ %2$[is]@ %3$[123]@";
"%[ABC]@ %[is]@ %[456]@" = "%1$[ABC]@ %2$[is]@ %3$[456]@";
"%[ABC]@ %[is]@ %[789]@" = "%1$[ABC]@ %2$[is]@ %3$[789]@";
"%[ABC]@ %[contains]@ %[123]@" = "%1$[ABC]@ %2$[contains]@ %3$[123]@";
"%[ABC]@ %[contains]@ %[456]@" = "%1$[ABC]@ %2$[contains]@ %3$[456]@";
"%[ABC]@ %[contains]@ %[789]@" = "%1$[ABC]@ %2$[contains]@ %3$[789]@"; 
```

更好的是，您可以构建构建每个代码的代码，`NSPredicateEditorRowTemplate`以将谓词内部使用的键路径和该选项的本地化字符串作为输入。

然后，您的方法可以生成上面的字符串，但已经插入了正确的本地化。

注意：调用这个`_generateFormattingDictionaryStringsFile`私有 API 方法似乎会导致 NSPredicateEditor 中的随机崩溃：

> 此类与 key 的键值编码不兼容`rowType`。

因此，请务必在需要时运行一次，但不要在您正常运行或测试应用程序时使其处于活动状态。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2018-07-02T20:43:26.430

是的，这完全是本地化问题，这要归功于对象是菜单项这一事实。他们可以很容易地被对待。

你需要做的就是...

*   本地化您的应用程序。
*   然后输入 .strings 文件并将值更改为您想要显示的值或...使用管理/翻译本地化应用程序的工具。

这是直接在 .strings 文件中更改内容的示例：更改**为****ist**和**booktitle**为**Buchtitel**

```
/* Class = "NSMenuItem"; title = "is"; ObjectID = "G1c-st-GEK"; */
"G1c-st-GEK.title" = "ist";

/* Class = "NSMenuItem"; title = "booktitle"; ObjectID = "nQh-54-5Nx"; */
"nQh-54-5Nx.title" = "Buchtitel"; 
```

备注：查找要更改的行的最佳方法是查找**ObjectID**。UIB 身份检查器可以为每个 MenuItem 找到此信息：

[![在此处输入图像描述](../Images/2d4eb4898a0f7949527069d1c5441fc6.png)](https://i.stack.imgur.com/1o44q.png)

# windows - 使用 grep 比较文件中的差异似乎在 Windows 中不起作用

> ID：13749722
> 
> 赞同：0
> 
> 时间：2012-12-06T18:02:37.383
> 
> 标签：windows, grep, cygwin

几天前我安装了cygwin。我检查了 grep 是否已安装，因为我想在 emacs 中使用它。当我想获得两个文件之间的差异时，它似乎不起作用，所以我尝试了仅使用 cygwin 终端不起作用的最简单情况。

我有两个文件 temp1

```
1
2
3
4
5
6
7
8
9
0 
```

温度2

```
2
3
4
5 
```

环顾四周后，我发现正确的方法是这样的：

```
grep -v -f temp2 temp1 
```

当我在cygwin中这样做时，我得到

```
1
2
3
4
5
6
7
8
9
0 
```

而如果我在linux中这样做，我会得到正确的输出

```
1
6
7
8
9
0 
```

为什么会发生这种情况？它可能真的很愚蠢，但我似乎找不到原因，也找不到类似的东西。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-06T20:01:13.710

我的第一个想法是你的文件有 windows 行尾 (CRLF) 而不是 unix/linux 行尾 (LF)，这会影响 grep 解析文件的能力。尝试运行这个：

```
dos2unix temp1 temp2 
```

然后再次尝试您的 grep 语句。

额外说明：

如果您要广泛使用 cygwin，我强烈建议您为自己准备一个比记事本或写字板更好的文本编辑器。

[notepadd++](http://notepad-plus-plus.org/)是一个选项，可让您轻松使用 windows 或 unix/linux 行尾，以及无数其他功能。

# internet-explorer - 在 http 标头中询问用户名。IE

> ID：13749725
> 
> 赞同：0
> 
> 时间：2012-12-06T18:02:54.383
> 
> 标签：internet-explorer, http, active-directory

有没有办法要求在标题`browser(IE)`中传递访问网页的用户名？`HTTP`我想在没有登录页面的情况下限制对该页面的访问。这可能吗，因为我们在使用 AC 的公司网络上？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-06T19:21:40.270

您可以通过在 IIS 中为您的 Web 应用程序启用（集成或基本）身份验证来完成此操作。

当 IIS 收到对需要身份验证的资源（文件/目录/处理程序/等）的请求时，它会发回带有 HTTP 状态代码 401 的相关响应。当浏览器收到此响应时，它通常会将当前登录的用户发送到标头被调用`Authentication`，或者它首先弹出一个对话框，要求用户提供凭据（然后仍将`Authentication`标头与请求一起发送）。

# c - 在函数中使用 realloc 操作动态数组

> ID：13749727
> 
> 赞同：1
> 
> 时间：2012-12-06T18:03:17.200
> 
> 标签：c, arrays, malloc

使用我在这里学到的知识：[How to use realloc in a function in C](https://stackoverflow.com/questions/13748338/how-to-use-realloc-in-a-function-in-c)，我编写了这个程序。

```
int data_length; // Keeps track of length of the dynamic array.
int n; // Keeps track of the number of elements in dynamic array.

void add(int x, int data[], int** test)
{

    n++;

    if (n > data_length)
    {
        data_length++;
        *test = realloc(*test, data_length * sizeof (int));
    }

    data[n-1] = x;

}

int main(void)
{

    int *data = malloc(2 * sizeof *data);

    data_length = 2; // Set the initial values.
    n = 0;

    add(0,data,&data);
    add(1,data,&data);
    add(2,data,&data);

    return 0;
} 
```

该程序的目标是拥有一个动态数组`data`，我可以不断向其中添加值。当我尝试向 中添加一个值时`data`，如果它已满，则使用 realloc 增加数组的长度。

**问题**

该程序可以编译，运行时不会崩溃。但是，打印出`data[0]`, `data[1]`,`data[2]`给出`0,1,0`. 该号码`2`未添加到数组中。

这是因为我使用错误`realloc`吗？

**附加信息**

该程序稍后将与不同数量的“添加”和可能的“删除”功能一起使用。另外，我知道`realloc`应该检查它是否失败 (is `NULL`)，但为了简单起见，这里省略了。

我仍在学习和尝试 C。感谢您的耐心等待。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-06T18:12:00.600

您的问题在于您对 的使用 `data`，因为它指向旧数组的地址。然后，当您拨打电话时`realloc`，该区域将被释放。因此，您正试图在下一条指令上访问无效地址：这会导致未定义的行为。

你也不需要使用这个`data`指针。`test`足够了。

```
(*test)[n-1] = x; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-06T18:11:44.527

你不需要传递`data`两次到`add`.

你可以编码

```
void add(int x, int** ptr)
{
  n++;
  int *data = *ptr;
  if (n > data_length) {
    data_length++;
    *ptr = data = realloc(oldata, data_length * sizeof (int));
    if (!data) 
      perror("realloc failed), exit(EXIT_FAILURE);
  }
  data [n-1] = x;
} 
```

但这非常低效，您应该`realloc`偶尔调用一次。例如，您可以

```
 data_length = 3*data_length/2 + 5;
     *ptr = data = realloc(oldata, data_length * sizeof (int)); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-06T18:24:07.200

让我们看一下[POSIX realloc 规范](http://pubs.opengroup.org/onlinepubs/7908799/xsh/realloc.html)。

描述说：

> 如果内存对象的新大小需要移动对象，则释放对象先前实例化的空间。

返回值（强调添加）提到：

> 在大小不等于 0 的情况下成功完成后，realloc() 返回一个指向（**可能已移动**）分配空间的指针。

您可以检查指针是否发生变化。

```
int *old;
old = *test;
*test = realloc(*test, data_length * sizeof(int));
if (*test != old)
    printf("Pointer changed from %p to %p\n", old, *test); 
```

这种可能的更改可能会产生不良影响，因为您的代码通过两个不同的名称引用“相同”内存，`data`并且`*test`. 如果`*test`发生变化，`data`仍然指向旧的内存块。

# c# - 在 C# 中以编程方式将简体中文转换为繁体

> ID：13749732
> 
> 赞同：2
> 
> 时间：2012-12-06T18:03:35.427
> 
> 标签：c#, unicode

有没有一种可靠的方法可以在 C# 程序中将一组给定的简体中文字符转换为等效的繁体中文字符？

编辑：如果您使用谷歌翻译，从一个到另一个的转换非常可靠，但是，如何在 C# 中进行转换？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-06T18:06:14.770

使用 UNIHAN 数据库：[http ://www.unicode.org/charts/unihan.html](http://www.unicode.org/charts/unihan.html)

据说： Unihan 数据库组织了与 CJK 统一表意文字的属性有关的信息。UAX #38 中提供了 Unihan 数据库文档。

# c# - 使用证书加密

> ID：13749736
> 
> 赞同：7
> 
> 时间：2012-12-06T18:03:57.117
> 
> 标签：c#, certificate, public-key-encryption

我对所有这些加密事情都很陌生，我正在尝试做一个简单的应用程序来加密给定的字符串。这是我的代码：

```
public static X509Certificate2 getPublicKey()
{
    RSACryptoServiceProvider RSA = new RSACryptoServiceProvider();

    X509Certificate2 cert2 = new X509Certificate2("c:\\certificate.cer");

    return cert2;
}

public static string cipherRequest(byte[] stringToEncrypt)
{
    X509Certificate2 certificate = getPublicKey();

    RSACryptoServiceProvider rsa = certificate.PublicKey.Key as RSACryptoServiceProvider;

    byte[] cryptedData = rsa.Encrypt(stringToEncrypt, true);

    return Convert.ToBase64String(cryptedData);
}

public static void Main()
{

    try
    {

        ASCIIEncoding ByteConverter = new ASCIIEncoding();

        byte[] test = ByteConverter.GetBytes("stringtoencrypt");

        string first = cipherRequest(test);
        string second= cipherRequest(test);

        Console.WriteLine("first: {0}", first);
        Console.WriteLine("second: {0}", second);

    }
    catch(CryptographicException e)
    {
        Console.WriteLine(e.Message);
    }

} 
```

所以每次我调用`cipherRequest`它都会产生不同的结果。我已经检查过证书是否已加载，但它会产生不同的结果。

有什么想法吗？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-12-06T18:56:51.910

在实际加密之前添加随机填充以避免某些攻击。这就是为什么每次调用加密方法都会得到不同结果的原因。

有关更多信息，请参阅此帖子：

[C# 中的 RSA 不会为特定密钥生成相同的加密字符串？](https://stackoverflow.com/questions/9484508/rsa-in-c-sharp-does-not-produce-same-encrypted-string-for-specific-keys)

# excel - 使用 VC++ 创建 Excel 自动化插件

> ID：13749739
> 
> 赞同：0
> 
> 时间：2012-12-06T18:04:14.657
> 
> 标签：excel, visual-c++, automation, add-in

我是 Excel 插件和 Visual Studio 的新手。经过一番搜索，我想出了以下步骤来创建 Excel 自动化插件：（我使用的是 VS 2012）

1.  创建一个 C++ ATL 项目
2.  添加一个 STL 简单对象
3.  右键单击对象并添加一个方法（带有 IN 和 RETVAL 参数）
4.  构建解决方案
5.  使用 regsvr32 注册 dll

我能够成功注册dll。但该加载项未显示在 Excel 2010 的可用自动化服务器列表中（安装在我的 Windows 7 机器上）。Excel 是 32 位的。

提前致谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-04T21:31:32.937

我使用了错误的 regsvr32。由于我正在构建 32 位 dll，因此我应该使用 \Windows\SysWOW64 中的 regsvr32。

# php - 需要生成特定于设备 ID 的访问密钥（Android 应用程序的 android_id）

> ID：13749746
> 
> 赞同：2
> 
> 时间：2012-12-06T18:04:26.670
> 
> 标签：php, android, license-key

我需要生成特定于设备 id 的访问密钥（android_id 用于 android 设备）。该密钥只会解锁该设备上的应用程序。如何在服务器端生成此访问密钥？任何可用的 php 代码/库？应用程序端 (android) 需要做什么来读取/处理/解密访问密钥并解锁设备上的应用程序。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-06T19:19:08.090

如果您对使用随机生成的密钥感到满意，您可以在服务器上创建它并将其发送到设备或将其交给用户输入。或者，您可以在设备上生成它并将其发送到服务器进行存储。然后将与其相关的密钥和 id 存储在共享首选项的数据库中。当用户打开应用程序时，从首选项中提取 id 和密钥，将它们发送到服务器并让它验证它们是否正确。

**更新**

对于非随机代码，您可以使用`Settings.Secure.ANDROID_ID`，如[Android 开发者博客中所述](http://android-developers.blogspot.com/2011/03/identifying-app-installations.html)。[不过，正如此答案](https://stackoverflow.com/a/2785493/536986)的评论中所述，您需要小心处理。

# .htaccess - .htaccess 使用变量重定向

> ID：13749747
> 
> 赞同：1
> 
> 时间：2012-12-06T18:04:29.437
> 
> 标签：.htaccess

抱歉，我已经搜索了一些相关的问题/答案，但不确定如何继续。

我希望默认 index.html 文件自动转到 index.html?id=1

这可能吗？如果是这样，有人可以帮助我使用适当的 .htaccess 命令吗？

谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-06T18:19:46.240

```
RewriteEngine on
RewriteBase /
RewriteCond %{QUERY_STRING} !id=
RewriteRule ^index.html$ index.html?id=1 [R=301,QSA,L] 
```

如果查询字符串不包含 id 参数，用户将被重定向到查询字符串中带有 id 的版本。将保留查询字符串的任何其他元素。

# php - PHP按距离排序位置，不返回任何内容

> ID：13749749
> 
> 赞同：0
> 
> 时间：2012-12-06T18:04:44.933
> 
> 标签：php

我正在测试一些代码以按与特定点的距离对位置进行排序，得到了一些代码，但它什么也没返回......

我正在输入这个网址

```
http://localhost:8888/jsontest.php?category=all&long=-2.837275&lat=51.967825 
```

输入我的 lat 和 long 作为我当前位置的变量，这是查询：

```
mysql_query("SELECT *,  ( 3959 * acos( cos( radians('$lat') ) *  cos( radians( lat ) ) *  cos( radians( long ) -  radians('$lon') ) +  sin( radians('$lat') ) *  sin( radians( lat ) ) ) )  AS distance FROM LISTINGS ORDER BY distance ASC"); 
```

从 URL 获取变量：

```
$lon = $_GET["long"];
$lat = $_GET["lat"]; 
```

数据库表名是listings，lat和long列叫lat和long，谁能帮忙！

谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-06T18:17:29.303

不确定为什么要手动进行地理空间计算。当您需要 Near 、 Radios 、 Box 、 Polygon 或相对距离时，它会变得复杂。.... MySQL 有[空间扩展](http://dev.mysql.com/doc/refman/5.0/en/spatial-extensions.html)或更好的使用[MongoDB](http://www.mongodb.org/display/DOCS/Geospatial+Indexing)你所拥有的东西是一样的

```
db.places.find( { loc : { $near : [-2.837275,51.967825] } } ) 
```

上面的查询找到最近的点并按距离**排序**`(-2.837275,51.967825)`返回它们（不需要额外的**排序**参数）。

# android - android start activity from service without using .FLAG_ACTIVITY_NEW_TASK

> ID：13749751
> 
> 赞同：2
> 
> 时间：2012-12-06T18:04:45.447
> 
> 标签：android, service, android-activity, start-activity

I have a service which is making a call to a webserver from 30 to 30 seconds. If a certain value is returned i need to start a specific activity. the problem is for starting an activity from service I need to set intent.setFlags(Intent.FLAG_ACTIVITY_NEW_TASK);

By doing this, the activity is launched but it is closed after 3-4 seconds and the application keeps is normal flow.

how can I add the new activity to the top of stack?

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-06T18:21:23.133

Well i was calling the service in the launch of the application just for test. but if I navigate in my app after the 30 seconds, the new activity is brought to the front correctly.

# c++ - 从技术上讲，这不是删除最后一个节点的一种方式吗？LL C++

> ID：13749762
> 
> 赞同：1
> 
> 时间：2012-12-06T18:05:15.620
> 
> 标签：c++

```
node *head, *current, *temp;
current = head;
while(NULL != current){
  temp = current;
  current = current->next;
}
delete current;
current = temp;
current->next = NULL; 
```

我只是想知道我知道有这样的东西并且有递归，假设已经有一个链表并且我们不知道列表中有多少个节点。

删除我的意思是解除分配。

```
node *head, *current, *temp;
current = head;
while(NULL != current->next){
  temp = current;
  current = current->next;
}
if (NULL != current){
delete current;
current = temp;
current->next = NULL;
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-06T18:09:14.260

当指针为空并删除它时，您将退出循环。那是行不通的。

我猜你的意思是删除`temp`？这仍然不适用于您当前的代码。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-06T18:12:34.327

你的意思是这样的：

```
while (NULL != next) {
  prev = current;
  current = next;
  next = current->next;
}
delete current;
if (NULL != prev) {
  prev->next = NULL;
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-06T18:09:32.203

您的代码不执行任何操作：循环的退出条件是`NULL == current`，这意味着`delete current;`它将*始终*传递`NULL`给`delete`. 这没关系，但它不会取消分配任何东西。

您应该将循环更改为在 时停止`current->next == NULL`，但您必须格外小心，以确保`current`在它等于 时不取消引用`NULL`：

```
temp = 0;
while(current && current->next){
    temp = current;
    current = current->next;
}
if (temp) {
    delete current;
    temp->next = 0;
} 
```

**编辑：**您编辑的代码在很大程度上模仿了我的答案，除非您的代码在`head == NULL`. 如果列表只有一个节点，它也会失败，因为`temp`它将保持未分配状态。

# configuration - Glassfish 3.1.2 - default-config 和 server-config 之间的区别

> ID：13749765
> 
> 赞同：21
> 
> 时间：2012-12-06T18:05:22.937
> 
> 标签：configuration, glassfish-3

默认配置和服务器配置有什么区别？例如，如果我想调整线程池大小，我需要在两个地方都这样做吗？如果只有一个，是哪一个？

* * *

## 回答 #1

> 赞同：20
> 
> 时间：2012-12-20T00:53:25.643

Glassfish 似乎使用默认配置作为模板来创建其他配置，因此您实际想要在服务器上配置的任何内容都应该放在服务器配置中。

另请参阅[Glassfish 3 有两种配置](https://stackoverflow.com/questions/10188342/glassfish-3-has-two-configurations)

# javascript - 为什么表单提交验证没有遍历所有可能性？

> ID：13749767
> 
> 赞同：0
> 
> 时间：2012-12-06T18:05:27.057
> 
> 标签：javascript, html, forms, validation, onsubmit

第一次在这里发帖，最后的替代方法是对这种胡说八道感到更加沮丧。我认为此代码段没有任何问题，但即使我将字段留空（应当场验证），onsubmit 条件似乎总是返回为真。

注意：我的 JS 函数目前是空白的，还没有走那么远。

进一步调查说明：即使我写的最后一个案例也不起作用，它只是试图在我点击提交后立即到达结帐页面并完全忽略 onsubmit。

```
<?xml version = "1.0" encoding = "utf-8" ?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN"
"http://www.w3.org/TR/xhtml11/DTD/xhtml1-strict.dtd">

<html xmlns="http://www.w3.org/1999/xhtml">
<head>
    <title> Book registration. </title>
    <script type = "text/javascript" src = 'Script/main.js'></script>
</head>

<body>
    <form method = "POST" action = "Checkout" onsubmit = "validate(this)">      
        <fieldset>
        <legend> Book Registry Access </legend>

        <p> ISBN: <input type = "text" size = "14" name = "ISBN" onchange = "if(this.value != '') ajaxVerif('checkISBN', this.value, this.id);"> </p>
        <p> Title: <input type = "text" size = "32" id = "title" name = "title"> </p>
        <p> Author: <input type = "text" size = "32" id = "author" name = "author"> </p>
        <p> Edition: <input type = "text" size = "2" id = "edition" name = "edition" onchange = "if(this.value != '') ajaxVerif('checkEdi', this.value, this.id);"> </p>
        <p> <input type = "submit"> </p>

        </fieldset>
    </form>
</body>
</html>

    function validate(thisForm)
    {
    if (thisForm.ISBN.value == '') {
                    alert('Please enter a valid ISBN number in the form XXXX-YYYY-ZZZZ');
                    this.ISBN.focus();
                    return false;
                }
    if (thisForm.title.value == '') {
                    alert('Please fill in the title field.');
                    this.title.focus();
                    return false;
                }   
    if (thisForm.author.value == '') {
                    alert('Please fill in the author field.');
                    this.author.focus();
                    return false;
                }
    if (thisForm.edition.value == '') {
                    alert('Please enter a valid edition number.');
                    this.edition.focus();
                    return false;
                }
    alert('Success! This test form is working! (TO BE DELETED!!)');
    return false;
    } 
```

编辑：为清洁而编辑，仍然无法正常工作。所以现在一切都在验证方面起作用，显然除了返回的错误。它总是会尝试跳转到下一页（并且因为链接到一个虚拟页面而失败）。我不太清楚为什么，很确定我所有的回报都应该没问题。

最终编辑：已修复，我忘记将其写为 onsubmit = 'return validate(this)'>

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-06T18:13:35.003

首先，避免使用内联 JavaScript。

`}`通过保持干净的 JavaScript 代码，您会注意到缺失。

```
 if (this.title.value == '') {
    alert('Please fill in the title field.');
    this.title.focus();
    return false;
  }
--^-- 
```

* * *

## 更新

1.  你忘了 `return`, 和

    ```
    onsubmit = "return validate(this);"
             ---^^^^^^---         ---^--- 
    ```

2.  你也忘了`this`用`thisForm`.

# google-chrome - SVG 动画在 Chrome 版本 23.0.1271.95 中留下条带伪影

> ID：13749768
> 
> 赞同：0
> 
> 时间：2012-12-06T18:05:41.697
> 
> 标签：google-chrome, animation, svg, gpu, visual-artifacts

在测试 SVG 动画时，我在 Chrome 版本 23.0.1271.95 中遇到了渲染问题。

动画三角形似乎留下了一些黑色的垂直条纹。如果您从页面上移开并返回，或者如果您以其他方式强制重绘，这种情况就会消失。

你可以在这里找到动画测试：http: [//bit.ly/HexaGridTest](http://bit.ly/HexaGridTest)

这是一个屏幕截图： ![在此处输入图像描述](../Images/e290ff66a44f79d933fee816b235d8e1.png)

查看有关类似问题的其他帖子，似乎消除此与 GPU 加速相关的问题的唯一方法是在动画结束时强制重绘。

有人建议添加`-webkit-backface-visibility: hidden`到 SVG，但这并没有解决我的问题。

有没有其他选择？我可以设置任何标志或 CSS 属性来避免伪影吗？

# siri - 使用 Siri 自动提交表单输入

> ID：13749775
> 
> 赞同：0
> 
> 时间：2012-12-06T18:06:02.467
> 
> 标签：siri

我正在为 Iphone 开发一个简单的网络应用程序。我有一个带有输入文本的表单，我想使用语音进行搜索。

它可以工作，但我必须按下键盘的返回按钮。有没有办法自动提交 Siri 生成的查询？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-07-18T09:59:30.937

在 JavaScript 中你可以监听 onChange 事件然后 form.submit()

# git - 烧瓶文件夹应该是我项目的一部分吗？

> ID：13749776
> 
> 赞同：0
> 
> 时间：2012-12-06T18:06:03.270
> 
> 标签：git, web-applications, flask

我有一个`flask`网络应用程序。烧瓶文件夹很重。我是否需要将其添加到我的 git 存储库才能使该应用程序与 Heroku 一起使用？我应该将`flask`文件夹添加到 git ignore 而不是将其提交到我的 git 存储库吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-06T21:57:47.457

不，您可以在项目中使用[`pip`需求文件](https://devcenter.heroku.com/articles/python-pip)并指定您需要 Flask，Heroku 的构建过程将为您下载并安装 Flask：

```
# requirements.txt
Flask==0.9 
```

我建议阅读[Heroku 的关于在其平台上使用 Python 进行开发的教程，](https://devcenter.heroku.com/articles/python)以了解更多关于`pip`和`virtualenv`. 如果您继续使用 Python 2.x，您会发现它们都非常有用。

# image - 在matlab中制作一个平滑的3D矩阵

> ID：13749783
> 
> 赞同：-4
> 
> 时间：2012-12-06T18:06:23.850
> 
> 标签：image, matlab, image-processing, pattern-matching

我有 3D 矩阵，我想删除一些不连续性，我想更改统计属性。我的意思是，我不想更改全局统计属性。

有什么解决办法吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-06T20:03:12.943

我使用自制算法得到以下结果： ![在此处输入图像描述](../Images/475c5e17f8312dba5aed653414fb4d45.png)

想法如下：

*   我们首先使用边缘检测来检测不连续性，将两个方向和阈值的结果相加。
*   我们由此创建了两张图像：一张在每个方向都有线条。
*   我们使用一维高斯滤波器创建原始图像的两个低通版本：一个在每个方向上进行滤波。
*   我们还对包含线条的图像进行低通滤波：它们将用作权重。
*   我们通过计算组成最终图像： (low-pass_line_image) .* filtered_image + (1 - low-pass_line_image) .* original_image。我们在两个方向上执行此操作。

这是代码：

```
 % Load and treat image
    im = imread('...');
    im = im2double(im);
    im = rgb2gray(im);

    % Compute edges of the image
    bw = edge(im);

    % We want to find the positions of the strong lines in the image :
    % Since they go through the whole image, we sum among x and y directions
    % and then threshold.
    xedges = sum(bw);
    xedges = xedges > 1/3*max(xedges(:));
    yedges = sum(bw,2);
    yedges = yedges > 1/3*max(yedges(:));

    % We create images of the same size that the original one and containing
    % the horizontal and vertical lines
    [xedges, yedges] = meshgrid(xedges, yedges);

    % We create a 1D gaussian filter
    gaussian = gausswin(12);
    gaussian = gaussian / sum(gaussian);

    % We filter the image among both directions
    imfy = imfilter(im, gaussian);
    imfx = imfilter(im, gaussian');

    % We also filter the images with the lines to get the weights
    xedges = im2double(xedges);
    xedges = imfilter(xedges, gaussian');
    xedges = xedges / max(xedges(:));
    yedges = im2double(yedges);
    yedges = imfilter(yedges, gaussian);
    yedges = yedges / max(yedges(:));

    % We use the filtered versions of the images with lines as weights between
    % the original image and the filtered images
    imfinal = xedges.*imfx + (1-xedges).*im;
    imfinal = yedges.*imfy + (1-yedges).*imfinal;
    imshow(imfinal); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-06T18:44:10.257

也许，您可以使用 Efros 等人提出的纹理合成算法：

[http://graphics.cs.cmu.edu/people/efros/research/EfrosLeung.html](http://graphics.cs.cmu.edu/people/efros/research/EfrosLeung.html)

# html - 允许对问题和其他用户交互进行 HTML 嵌入的视频播放器

> ID：13749787
> 
> 赞同：3
> 
> 时间：2012-12-06T18:06:40.147
> 
> 标签：html, video, video-streaming

我正在寻找一个视频播放器，它允许 HTML 嵌入问题和其他用户交互，以构建一个类似于 Coursera 的教育网站。这个想法是让弹出测验和其他材料在做讲座时显示。

你能推荐一个适合这个的吗，或者如果不可能，请指出我如何构建它的正确方向？

非常感谢你

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-06T23:25:48.607

[popcorn.js](http://popcornjs.org/)可能值得一看：

> Popcorn.js 是一个用 JavaScript 编写的 HTML5 媒体框架，适用于电影制作人、Web 开发人员以及任何想要在 Web 上创建基于时间的交互式媒体的人。

我会查看[演示](http://popcornjs.org/demos)，因为其中一些可能正在做一些你想做的事情。我现在真的没有时间玩它，但是[这个](http://katehudsondesign.com/demos/popcornmacbeth/)试图通过提供当代翻译和视频阅读来教授莎士比亚的这个，看起来你可能会感兴趣。

# java - 试图保持教程

> ID：13749789
> 
> 赞同：-1
> 
> 时间：2012-12-06T18:06:44.890
> 
> 标签：java, google-maps, gwt

我正在尝试将 GWT 的教程 simpleMaps 保留在 gwt-maps3 库上，但是当启动应用程序时，会在浏览器上显示下一个错误：

```
java.lang.reflect.InvocationTargetException
at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:57)
at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
at java.lang.reflect.Method.invoke(Method.java:601)
at com.google.gwt.dev.shell.ModuleSpace.onLoad(ModuleSpace.java:406)
at com.google.gwt.dev.shell.OophmSessionHandler.loadModule(OophmSessionHandler.java:200)
at com.google.gwt.dev.shell.BrowserChannelServer.processConnection(BrowserChannelServer.java:526)
at com.google.gwt.dev.shell.BrowserChannelServer.run(BrowserChannelServer.java:364)
at java.lang.Thread.run(Thread.java:722)
Caused by: java.lang.ExceptionInInitializerError
at com.google.gwt.maps.client.MapOptions.<init>(MapOptions.java:40)
at com.map.juan.client.SimpleMap.onModuleLoad(SimpleMap.java:18)
... 9 more
Caused by: java.lang.RuntimeException: Deferred binding failed for 'com.google.gwt.maps.client.impl.MapOptionsImpl' (did you forget to inherit a required module?)
at com.google.gwt.dev.shell.GWTBridgeImpl.create(GWTBridgeImpl.java:53)
at com.google.gwt.core.shared.GWT.create(GWT.java:57)
at com.google.gwt.core.client.GWT.create(GWT.java:85)
at com.google.gwt.maps.client.impl.MapOptionsImpl.<clinit>(MapOptionsImpl.java:31)
... 11 more
Caused by: java.lang.IncompatibleClassChangeError: Found interface com.google.gwt.core.ext.typeinfo.JClassType, but class was expected
at com.google.gwt.jsio.rebind.JSWrapperGenerator.generate(JSWrapperGenerator.java:276)
at com.google.gwt.core.ext.IncrementalGenerator.generateNonIncrementally(IncrementalGenerator.java:40)
at com.google.gwt.dev.javac.StandardGeneratorContext.runGeneratorIncrementally(StandardGeneratorContext.java:657)
at com.google.gwt.dev.cfg.RuleGenerateWith.realize(RuleGenerateWith.java:41)
at com.google.gwt.dev.shell.StandardRebindOracle$Rebinder.rebind(StandardRebindOracle.java:79)
at com.google.gwt.dev.shell.StandardRebindOracle.rebind(StandardRebindOracle.java:276)
at com.google.gwt.dev.shell.ShellModuleSpaceHost.rebind(ShellModuleSpaceHost.java:141)
at com.google.gwt.dev.shell.ModuleSpace.rebind(ModuleSpace.java:595)
at com.google.gwt.dev.shell.ModuleSpace.rebindAndCreate(ModuleSpace.java:465)
at com.google.gwt.dev.shell.GWTBridgeImpl.create(GWTBridgeImpl.java:49)
... 14 more 
```

我该如何解决？

谢谢

添加了.java

```
public class SimpleMap implements EntryPoint 
{
private MapWidget mapWidget;

// GWT module entry point method.
public void onModuleLoad() 
{
    final MapOptions options = new MapOptions();
    // Zoom level. Required
    options.setZoom(8);
    // Open a map centered on Cawker City, KS USA. Required
    options.setCenter(new LatLng(39.509, -98.434));
    // Map type. Required.
    options.setMapTypeId(new MapTypeId().getRoadmap());

    // Enable maps drag feature. Disabled by default.
    options.setDraggable(true);
    // Enable and add default navigation control. Disabled by default.
    options.setNavigationControl(true);
    // Enable and add map type control. Disabled by default.
    options.setMapTypeControl(true);
    mapWidget = new MapWidget(options);
    mapWidget.setSize("800px", "600px");

    // Add the map to the HTML host page
    RootPanel.get("mapsTutorial").add(mapWidget);
} 
```

添加了.xml

```
<?xml version="1.0" encoding="UTF-8"?>

<!DOCTYPE module PUBLIC "-//Google Inc.//DTD Google Web Toolkit 2.5.0//EN"
"http://google-web-toolkit.googlecode.com/svn/tags/2.5.0/distro-source/core/src/gwt-   module.dtd">
<module rename-to='simplemap'>
<!-- Inherit the core Web Toolkit stuff.                        -->
<inherits name='com.google.gwt.user.User'/>

<inherits name='com.google.gwt.user.theme.clean.Clean'/>

<!-- Other module inherits                                      -->
<inherits name='com.google.gwt.maps.Maps' />    
<!-- <script src="http://maps.google.com/maps/api/js?sensor=false"></script> -->
 <script src="http://maps.google.com/maps? gwt=1&amp;file=api&amp;v=2.148" />
<!-- Specify the app entry point class.                         -->
<entry-point class='com.map.juan.client.SimpleMap'/>

<!-- Specify the paths for translatable code                    -->
<source path='client'/>
<source path='shared'/>

</module> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-07T14:05:01.303

好吧，问题是因为 GWT 2.2`JClassType`被转换为接口而不是抽象类。在您的情况下，您在使用 GWT 2.5 的项目中使用了一些已使用 GWT 2.1 编译的库。这就是您收到此错误的原因。

要解决此问题，您有两种选择：

1.  查找 gwt-map3 的源代码，并使用 GWT 2.5 SDK 手动构建
2.  将您的项目转换为使用 GWT 2.1 SDK

# android - 如何存储我的应用程序创建的任务？

> ID：13749797
> 
> 赞同：-3
> 
> 时间：2012-12-06T18:07:09.193
> 
> 标签：android, datetime, storage

我正在创建一个任务剩余应用程序，我需要存储我使用该应用程序创建的所有任务。哪个存储选项更适合此应用。以及如何通过将任务日期和时间与电话日期和时间进行比较来显示当前任务。通知消息是对话框还是警报。对不起，我是安卓新手。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-06T18:19:45.060

对于存储选项，我建议在 android 中使用 SharedPreference 选项，这是关键值

基于文件存储，按照[这个](http://marakana.com/forums/android/examples/63.html)

要使用时间作为参数显示当前任务，只需获取系统的当前时间

使用 java Calendar 类并将值与存储在 SharedPreference 中的值进行比较

与任务一起

通知消息是出现在 Android 屏幕示例顶部的警报，当您

收到一条短信，然后在 android 屏幕的顶部出现警报。

这实际上取决于您要存储的数据。

SQLite

大量相同的结构化数据应作为数据库存储在 SQLite 数据库中

专为此类数据而设计。由于数据是由数据库结构化和管理的，

可以使用查询来查询它以获取与某些条件匹配的数据子集

SQL 之类的语言。这使得在数据中进行搜索成为可能。当然管理和

搜索大量数据会影响性能，因此从数据库中读取数据可以

比从 SharedPreferences 读取数据要慢。

共享首选项

SharedPreferences 是一个键/值存储，您可以在其中将数据保存在某个键下。读书

来自存储的数据你必须知道数据的关键。这使得读取数据

好简单。但是，存储少量数据很容易，存储也很困难

并读取大型结构化数据，因为您需要为每个数据定义键，此外

除非您有特定的命名概念，否则您无法真正在数据中搜索

键。

因此，如果您有很多任务，那么您可以看看 Sqlite 存储选项作为数据库

是为大量数据而制作的。

# oracle - 在 Tomcat、JDBC 和 Eclipse 环境下工作时无法解析类型的连接

> ID：13749798
> 
> 赞同：1
> 
> 时间：2012-12-06T18:07:10.847
> 
> 标签：oracle, tomcat, jdbc, oracle11g

```
 <%
     String driver = "oracle.jdbc.OracleDriver";// 1\. 

Load the driver
    Class.forName(driver);
    // 2\. Define the connection URL
    String url = 

"jdbc:oracle:thin:@localhost:1521:orcl"; //orcl is the 

SID
    String myusername = "test4"; // Your DB login ID
    String mypassword = "test4"; //Your Db pass
    // 3\. Establish the connection
    Connection  conn = DriverManager.getConnection

(url, test4,test4);
    %> 
```

这是页面调用display.jsp的代码我使用oracle express，它的应用程序用户：系统

密码：systempw 模式用户：test4，密码：test4

我尝试连接到架构中的表之一

test4，表名为：update_time_schedule_reader

在查询中显示其内容，但我什至不能

建立连接....

我怎样才能做到这一点？我完全迷路了。如果可能，请提供分步说明。

我将不胜感激！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-06T19:17:07.087

您`web.xml`的 in`WEB-INF`应该具有数据源条目，例如

```
<context>
<!-- Specify a JDBC datasource -->  
<Resource name="jdbc/TestDB" auth="Container"  
    type="javax.sql.DataSource" username="test4" password="test4"  
    driverClassName="oracle.jdbc.driver.OracleDriver"  
    url="jdbc:oracle:thin:@xxx:1521:db"  
    maxActive="10" maxIdle="4" />  
</context> 
```

此外，JSP 页面应该类似于 -

```
<%@page import="java.sql.DriverManager"%>  
<%@page import="java.sql.ResultSet"%>  
<%@page import="java.sql.Statement"%>  
<%@page import="java.sql.Connection"%>  
<%@page import="javax.naming.Context"   %>  
<%@page import="javax.naming.InitialContext"   %>  
<%@page import="javax.naming.NamingException"   %>  
<%@page import="javax.sql.DataSource"   %> 

 <%  
 Context initCtx = new InitialContext();  
 DataSource ds = (DataSource) initCtx.lookup("java:comp/env/jdbc/TestDB");  
 Connection conn = ds.getConnection();  

     Statement stmt = conn.createStatement();  
     String query="select * from schema.table";  

    ResultSet result = stmt.executeQuery(query);  
    while (result.next())  
     {  
       //.....Loop through data set and do something
  %> 
```

通过[此](http://tomcat.apache.org/tomcat-4.0-doc/jndi-resources-howto.html)链接了解更多详细信息。

# php - 在for循环中打印内容导致PHP可能由于Apache而崩溃？

> ID：13749800
> 
> 赞同：0
> 
> 时间：2012-12-06T18:07:28.930
> 
> 标签：php, apache, foreach

我有一个 foreach 循环，它遍历注释，如下所示：

```
<?php 
    $comments = get_comments(array("status"=>"approve"));
    foreach ( $comments as $comment ) { ?>
    <div class="comment">
        <h2><? echo get_comment_meta( $comment->comment_ID, "subject", $single = true ); ?></h2>
        <p class="message"><?=$comment->comment_content;?></p>
    </div>
<? } ?> 
```

当我在实时服务器上运行它时，我收到以下错误：`Parse error: syntax error, unexpected end of file in D:\UniServer\www\apps\app_name\wp-content\themes\sube\page-feedback.php on line 53`

当我在本地运行站点时不会发生这种情况。所以我认为它是服务器配置错误。

此外，当我更改代码以使其回显内容时，它可以正常工作。例如：

```
<?php 
    $comments = get_comments(array("status"=>"approve"));
    foreach ( $comments as $comment ) {
    echo '<div class="comment">
        <h2>'; get_comment_meta( $comment->comment_ID, "subject", $single = true ); echo'</h2>
        <p class="message">'.$comment->comment_content.'</p>
    </div>';
 } ?> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-06T18:18:13.457

您的实时服务器可能没有`asp_tags`设置 php.ini 指令。根据[文档](http://php.net/manual/en/ini.core.php)，这就是启用可变值打印速记的原因。您还需要确保`short_open_tag`也已启用。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-06T18:18:50.317

> 当我在本地运行站点时不会发生这种情况。所以我认为它是服务器配置错误。

是的，这是因为一个名为[short_open_tag](http://php.net/manual/en/ini.core.php#ini.short-open-tag)的功能。必须启用该功能以允许您使用的短格式语法样式，例如`<?=`（它的缩写`<?php echo`）等。

正如您在手册中所读到的，如果您还打算`<?xml ?>`在 PHP 文件中逐字使用标签，那么短格式将导致冲突。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-06T18:28:14.670

摆脱`echo`眼前`get_comment_meta()`

# java - 用于 Java 的 C 兼容 printf 输出

> ID：13749802
> 
> 赞同：4
> 
> 时间：2012-12-06T18:07:36.200
> 
> 标签：java, c, floating-point, printf

我想在 Java 和 C 中将 float/double 转换为字符串，这样输出既**一致**又**用户友好**。

通过“用户友好”，我的意思是字符串应该是人类可读和健全的：有效数字的最大数量，以及在适当时自动切换到科学记数法（双精度可以跨越所有有效范围）。

“一致”是指字符串在 Java 和 C 中应该**完全相同**（如果它们真的很少见，我会容忍一些例外）。

为什么不简单地使用一些`printf`格式字符串，如`"%.5g"`？那行得通……几乎。但遗憾的是，精度字段的含义在 Java 和 C 中完全[不同](https://stackoverflow.com/a/13730799/277304)。此外，从科学记数法到科学记数法的切换也不是很一致，甚至格式本身也不是很一致（指数为 2 或 3 位数字......）。并且不同的 C 编译器有时会产生不同的结果。

差异示例`"%.5g"`

```
double                  Java %.5g         gcc %.5g      tcc %.5g
1234.0                  1234.0            1234          1234 
123.45678               123.46            123.45678     123.46
0.000123456             0.00012346        0.00012346    0.00012346
0.000000000000123456    1.2346e-13        1.2346e-13    1.2346e-013 
```

我可以用 C 或 Java（或两者）编写函数，但我想知道是否有人已经处理过这个问题。我不太关心性能，但是跨 C 编译器的可移植性是可以的。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-12-07T15:45:10.007

如果你真的想要以 10 为底的浮点输出，那么在`printf`这里为 C 编写一个 JNI 包装器可能是最简单的。Java 人决定他们需要自己做`printf`。除了你已经注意到的`%g`，他们决定以一种奇怪的方式改变舍入行为并截断输出。以机智：

```
System.out.printf("%.5g\n", 1.03125);
System.out.printf("%.5g\n", 1.09375);
1.0313
1.0938 
```

`gcc`正确四舍五入：

```
printf("%.5g\n", 1.03125);
printf("%.5g\n", 1.09375);
1.0312
1.0938 
```

请注意，1.03125 和 1.09375 可以精确地表示为双精度数，因为 1/32 = 0.3125。

Java 的 printf %g 格式错误地截断了它的输出：

```
double d = 1;
for (int i = 0; i < 1035; i++) d /= 2;
System.out.printf("%.20g\n%.20a\n", d, d);
2.7161546124360000000e-312
0x0.00080000000000000000p-1022 
```

这是正确的答案：

```
double d = 1;
for (int i = 0; i < 1035; i++) d /= 2;
printf("%.20g\n%.20a\n", d, d);
2.7161546124355485633e-312
0x0.00080000000000000000p-1022 
```

`1.0e-200`是正常的，但不能完全表示。Java 假装没有注意到：

```
System.out.printf("%.20g\n%.20a\n", 1.0e-200, 1.0e-200);
1.0000000000000000000e-200
0x1.87e92154ef7ac0000000p-665 
```

这是正确的答案：

```
printf("%.20g\n%.20a\n", 1.0e-200, 1.0e-200);
9.999999999999999821e-201
0x1.87e92154ef7ac0000000p-665 
```

因此，您要么必须忍受 printf 中奇怪的舍入行为，要么必须背负`gcc`和`glibc`工作。我不建议您尝试自己打印出浮点数。或者您可以只使用`%a`AFAIK 在 Java 中运行良好。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-12-06T22:01:32.057

好吧，我结束了编写自己的函数。在 double 的所有范围内使用 gcc 和 tcc 进行测试，给出完全相同的输出（除了极少数非常小的值，小于 1E-319）

我发布它以防有人发现它有用。

爪哇：

```
 /**
     * Returns a double with an adhoc formatting, compatible with its C counterpart
     * 
     * If the absolute value is not too small or too big (thresholdLow-thresholdHigh)
     * the floating format is used, elsewhere the scientific.
     * In addition 
     *  - trailing zeros in fractional part are removed
     *  - if the value (or mantisa) is integer, a trailing .0 is always included
     *  - the exponent in sci notation is two or three digits
     *  - positive and negative zero returns "0.0"
     *  - special vals: "NaN" "Infinite" "-Infinite"
     * 
     * Remember to set Locale.setDefault(Locale.US) in your program.
     * 
     * @param v double
     * @param formatFloat floating point format, suggested: "%.5f"
     * @param formatSci   scientific format, must use lowercase 'e' : "%.5e"   
     * @param thresholdLow 
     * @param thresholdHigh
     * @return formatted string
     */
    public static String sprintfDouble(double v, String formatFloat, String formatSci, double thresholdLow,
            double thresholdHigh) {
        if(v==0.0)
            return "0.0"; //dont care about negative zero 
        if(Double.isInfinite(v) || Double.isNaN(v))
            return String.format(formatFloat,v);

        boolean neg = false;
        if (v < 0) {
            v = -v;
            neg = true;
        }
        String e = "";
        String res;
        if (v > thresholdLow && v < thresholdHigh) {
            res = String.format(formatFloat, v);
        } else {
            res = String.format(formatSci, v);
            int sp = res.indexOf('e');
            e = res.substring(sp);
            res = res.substring(0, sp);
        }
        if (res.indexOf('.') < 0)
            res += "."; // add decimal point if not present
        res = res.replaceAll("0+$", ""); // trim trailing zeros 
        if (res.endsWith("."))
            res += "0"; // add traiing zero if nec
        res += e;
        if (neg)
            res = "-" + res;
        return res;
    }

    public static String sprintfDouble5(double v){
        return sprintfDouble(v, "%.5f","%.5e",0.01,1000000.0);
    } 
```

C：

```
char * sprintfDouble(char *buf, double v, const char *floatFormat, const char *sciFormat, double thresholdLow, double thresholdHigh) {
    char *p;
    char *pd; /* pointer to '.' */
    char *pe; /* pd=, pe=pointer to 'e' (or null terminator) */
    char *buforig;
    int trimmed;
    if(v != v) { /* nan */
        sprintf(buf,"NaN");
        return buf;
    }
    if(v == v && (v - v) != 0.0) { /* infinity */
        sprintf(buf, v <  0 ? "-Infinity" :"Infinity");
    return buf;
    } 
    if(v==0) { /* positive or negative zero, dont distinguish*/
        sprintf(buf, "0.0");
    return buf;
    }
    buforig = buf;
    if(v <0) {
        v = -v;
        buf[0] = '-';
        buf++;
    }
    if( v > thresholdLow && v < thresholdHigh ) {
        sprintf(buf,floatFormat, v);
        pe = buf+strlen(buf);
        pd = (char *) strchr(buf,'.');
        if(pd == NULL) { /* no decimal point? add it */
            pd = pe;
            *pe++ = '.';
            *pe++ = '0';
            *pe = 0;
        }
    } else {
        sprintf(buf,sciFormat, v);
        pe  =  (char *)strchr(buf,'e');
        pd =   (char *)strchr(buf,'.');
        if(pd ==NULL) { /* no decimal point with scientific notation? rare but... */
            p= buf+ strlen(buf);
            while(p>=pe) {
                *p = *(p-2);
                p--;
            }
            pd = pe;
            *pe++ = '.';
            *pe++ = '0';
            *pe = 0;
        }
        /* three digits exponent with leading zero? trim it */
        if( (*(pe+2) == '0' ) && ( strlen(buf) - (pe-buf))==5) {
            *(pe+2)=*(pe+3);
            *(pe+3)=*(pe+4);
            *(pe+4)=*(pe+5);
        }
    } /* now trim trailing zeros  */
    trimmed = 0;
    p=pe-1;
    while(*p =='0' ) {
        p--;
        trimmed++;
    }
    if(*p=='.') {
        trimmed--;    // dont trim the zero after the decimal point
        p++;
    }
    if(trimmed>0) {
        p = pe;
        while(1) {
            *(p-trimmed) = *p;
            if(*p==0) break;
            p++;
        }
    }
    return buforig;
}

char * sprintfDouble5(char *buf,double v) {
    return sprintfDouble(buf, v, "%.5f", "%.5e", 0.01, 1000000.0);
} 
```

测试代码。

爪哇

```
static void test() { 
    Locale.setDefault(Locale.US);
    double start = 1.0;
    double x=start;
    for(int i=0;i<367;i++) {
        System.out.println(sprintfDouble5(x));
        x*= -7.0;
    }
    x=start;
    for(int i=0;i<6;i++) {
        System.out.println(sprintfDouble5(x));
        x/= -5;
    }
    for(int i=0;i<200;i++) {
        System.out.println(sprintfDouble5(x));
        x/= -42.01;
    }
    x=Math.PI*0.0000001;
    for(int i=0;i<20;i++) {
        System.out.println(sprintfDouble5(x));
        x*=10;
    }
    System.out.println(sprintfDouble5(0.0));
    System.out.println(sprintfDouble5(-0.0));
    System.out.println(sprintfDouble5(0.0/0.0));
} 
```

C：

```
void test1() { 
    char buf[64];
    double start,x;
    int i;
    start = 1.0;
    x = start;
    for(i=0;i<367;i++) {
        printf("%s\n",sprintfDouble5(buf,x));
        x *= -7.0;
    }
    x = start;
    for(i=0;i<6;i++) {
        printf("%s\n",sprintfDouble5(buf,x));
        x /= -5;
    }
    for(i=0;i<200;i++) {
        printf("%s\n",sprintfDouble5(buf,x));
        x/= -42.01;
    }
    x = atan(1.0) * 4 * 0.0000001; /* PI */
    for(i=0;i<20;i++) {
        printf("%s\n",sprintfDouble5(buf,x));
        x *= 10;
    }
    printf("%s\n",sprintfDouble5(buf,0.0));
    printf("%s\n",sprintfDouble5(buf,-0.0));
    printf("%s\n",sprintfDouble5(buf,0.0/0.0));
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-06T18:37:27.337

这段代码

```
#include <stdio.h>

int main() {

    double v;
    char format[] = "%.5g\n";

    v = 1234.0;
    printf(format, v);

    v = 123.45678;
    printf(format, v);

    v = 0.000123456;
    printf(format, v);

    v = 0.000000000000123456;
    printf(format, v);

} 
```

给我

```
1234
123.46
0.00012346
1.2346e-13 
```

和这段代码

```
public class App13749802 {

    /**
     * @param args
     */
    public static void main(String[] args) {

        double v;
        String format = "%.5g";

        v = 1234.0;
        System.out.println(String.format(format, v));

        v = 123.45678;
        System.out.println(String.format(format, v));

        v = 0.000123456;
        System.out.println(String.format(format, v));

        v = 0.000000000000123456;
        System.out.println(String.format(format, v));
    }

} 
```

给我

```
1234,0
123,46
0,00012346
1,2346e-13 
```

逗号是因为我的区域设置。所以只有一个区别。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2021-07-12T02:31:07.367

我创建了一个小型库 Double2String 来解决这个特定问题：

[https://github.com/coconut2015/double2string](https://github.com/coconut2015/double2string)

# php - 如何通过 ajax 将 JSON 传递给 PHP？

> ID：13749804
> 
> 赞同：0
> 
> 时间：2012-12-06T18:07:36.900
> 
> 标签：php, ajax, json

我正在尝试通过 ajax 将 json 字符串传递给 php，而 php 没有正确解码它。解码后php中的vardump总是返回null。谁能告诉我我做错了什么。非常感谢！！！

```
var addObj= {"facility":"Baptist Medical Center",
     "osb":"Jacksonville",
     "office":"North Branch"};

var JSONstr = JSON.stringify(addObj);

xmlhttp=new XMLHttpRequest();

xmlhttp.onreadystatechange=function() {
  if (xmlhttp.readyState==4 && xmlhttp.status==200) {
    var rt = xmlhttp.responseText;
    alert(rt);
  }
}
xmlhttp.open("GET","jsontest.php?addObj="+JSONstr,true);
xmlhttp.send();

//php code in jsontest.php
<?php
var_dump(json_decode($_GET['addObj'], true));
?>

//php returns null 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-06T18:17:54.903

先试试`urldecode`参数：

```
var_dump(json_decode(urldecode($_GET['addObj']), true)); 
```

# java - 使用两个 android spinners 一个依赖于另一个

> ID：13749805
> 
> 赞同：2
> 
> 时间：2012-12-06T18:07:37.303
> 
> 标签：java, android, android-activity, android-spinner

我经历了这么多代码并试图找出我做错了什么，但我不及格并且在浪费时间。这将非常简单，但我无法弄清楚..

我正在开发一个 android 应用程序，需要在一个活动上放置 2 个微调器。第二个微调器将根据第一个微调器上选择的条目进行填充。听起来很简单吧？

所以这就是我想做的。如果用户选择Mobile，则`choosePersonalPlan`应该显示来自的内容，当用户选择Large business 时`chooseLargeBusplan`应该运行并且最终条目应该调用`chooseSmallMedPlan`。我得到的只是一直`ChooseSmallMedPlan`显示的项目。

这是我的代码。请让我知道我做错了什么！

# Java 文件

```
package com.example.mobilebillforecaster;

import java.util.ArrayList;
import java.util.List;

import android.app.Activity;
import android.os.Bundle;
import android.view.View;
import android.widget.AdapterView;
import android.widget.ArrayAdapter;
import android.widget.Spinner;
import android.widget.AdapterView.OnItemSelectedListener;

 public class Du_postpaid extends Activity {

    public Spinner catspinner,planspinner3,planspinner1,planspinner2;

    protected void onCreate(Bundle mbfSplash) {
            super.onCreate(mbfSplash);
            setContentView(R.layout.postpaid);

    chooseCategory();
    choosePersonalPlan();
    chooseLargeBusPlan();
    chooseSmallMedPlan();
    }

    public void chooseCategory() {

        catspinner = (Spinner) findViewById(R.id.catspinner);
        ArrayAdapter<CharSequence> catAdapter = ArrayAdapter.createFromResource(this, R.array.ducategory, android.R.layout.simple_spinner_item);
        catAdapter.setDropDownViewResource(android.R.layout.simple_spinner_dropdown_item);
        catspinner.setAdapter(catAdapter);

    }
    private void choosePersonalPlan(){
        planspinner1 = (Spinner) findViewById(R.id.planspinner);
        List<String> planlist = new ArrayList<String>();
        planlist.add("Elite Regular Plan");
        planlist.add("Elite Super Plans");
        planlist.add("Emirati Plan");
        planlist.add("Pay As You Go");
        planlist.add("Visitor Mobile Line");
        ArrayAdapter<String> planAdapter1 = new ArrayAdapter<String>(this,
            android.R.layout.simple_spinner_item, planlist);
        planAdapter1.setDropDownViewResource(android.R.layout.simple_spinner_dropdown_item);
        planspinner1.setAdapter(planAdapter1);

    }

    private void chooseLargeBusPlan(){

        planspinner2 = (Spinner) findViewById(R.id.planspinner);
        List<String> planlist1 = new ArrayList<String>();
        planlist1.add("Premier Plan");
        planlist1.add("The Executive Plan");
        planlist1.add("Business Circle Plan");
        planlist1.add("Business Diamond Plan");
        ArrayAdapter<String> planAdapter2 = new ArrayAdapter<String>(this,
            android.R.layout.simple_spinner_item, planlist1);
        planAdapter2.setDropDownViewResource(android.R.layout.simple_spinner_dropdown_item);
        planspinner2.setAdapter(planAdapter2);

    }
    private void chooseSmallMedPlan(){

        planspinner2 = (Spinner) findViewById(R.id.planspinner);
        List<String> planlist2 = new ArrayList<String>();
        planlist2.add("Business Super Plan");
        planlist2.add("Her Business Super Plan");
        planlist2.add("Business Circle Plan");
        planlist2.add("Pay As you Go® Plus");
        ArrayAdapter<String> planAdapter3 = new ArrayAdapter<String>(this,
            android.R.layout.simple_spinner_item, planlist2);
    planAdapter3.setDropDownViewResource(android.R.layout.simple_spinner_dropdown_item);
    planspinner2.setAdapter(planAdapter3);

    }

    public class planOnClickListener implements OnItemSelectedListener {

            @Override
            public void onItemSelected(AdapterView<?> parent, View v, int pos,
                    long id) {

                parent.getItemAtPosition(pos);  

                if (pos==0){
                choosePersonalPlan();   
                }else if (pos==1){
                chooseLargeBusPlan();
                } else if (pos==2){
                chooseSmallMedPlan();
}
            }
            @Override
            public void onNothingSelected(AdapterView<?> arg0) {
                // TODO Auto-generated method stub

            }
            }

 } 
```

## XML

```
<?xml version="1.0" encoding="utf-8"?>
<RelativeLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:layout_width="match_parent"
    android:layout_height="match_parent"
    android:gravity="left" >

    <TextView
        android:id="@+id/postp"
        android:layout_width="130dp"
        android:layout_height="50dp"
        android:layout_alignParentTop="true"
        android:layout_centerHorizontal="true"
        android:layout_marginTop="15dp"
        android:gravity="center"
        android:text="@string/postp"
        android:textSize="30dp"

        />

    <Spinner
        android:id="@+id/catspinner"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:layout_alignParentLeft="true"
        android:layout_below="@+id/postp"
        android:layout_marginTop="25dp"
        android:entries="@array/ducategory"
        android:prompt="@string/category_prompt"
        />

     <Spinner
        android:id="@+id/planspinner"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:layout_alignParentLeft="true"
        android:layout_below="@+id/catspinner" />

</RelativeLayout> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-06T18:15:14.187

省略选择个人计划（）；选择大巴士计划（）；选择小型医疗计划（）；

来自 onCreate() 方法

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-06T18:41:11.447

添加

```
catspinner.setOnItemSelectedListener(new planOnClickListener()); 
```

到

```
chooseCategory(); 
```

这是整个代码-

```
public class TemoActivity extends Activity {

public Spinner catspinner,planspinner3,planspinner1,planspinner2;

protected void onCreate(Bundle mbfSplash) {
        super.onCreate(mbfSplash);
        setContentView(R.layout.main);

chooseCategory();
choosePersonalPlan();
chooseLargeBusPlan();
chooseSmallMedPlan();
}

public void chooseCategory() {

    catspinner = (Spinner) findViewById(R.id.catspinner);
    ArrayAdapter<CharSequence> catAdapter = ArrayAdapter.createFromResource(this, R.array.ducategory, android.R.layout.simple_spinner_item);
    catAdapter.setDropDownViewResource(android.R.layout.simple_spinner_dropdown_item);
    catspinner.setAdapter(catAdapter);
    catspinner.setOnItemSelectedListener(new planOnClickListener());
}
private void choosePersonalPlan(){
    planspinner1 = (Spinner) findViewById(R.id.planspinner);
    List<String> planlist = new ArrayList<String>();
    planlist.add("Elite Regular Plan");
    planlist.add("Elite Super Plans");
    planlist.add("Emirati Plan");
    planlist.add("Pay As You Go");
    planlist.add("Visitor Mobile Line");
    ArrayAdapter<String> planAdapter1 = new ArrayAdapter<String>(this,
        android.R.layout.simple_spinner_item, planlist);
    planAdapter1.setDropDownViewResource(android.R.layout.simple_spinner_dropdown_item);
    planspinner1.setAdapter(planAdapter1);

}

private void chooseLargeBusPlan(){

    planspinner2 = (Spinner) findViewById(R.id.planspinner);
    List<String> planlist1 = new ArrayList<String>();
    planlist1.add("Premier Plan");
    planlist1.add("The Executive Plan");
    planlist1.add("Business Circle Plan");
    planlist1.add("Business Diamond Plan");
    ArrayAdapter<String> planAdapter2 = new ArrayAdapter<String>(this,
        android.R.layout.simple_spinner_item, planlist1);
    planAdapter2.setDropDownViewResource(android.R.layout.simple_spinner_dropdown_item);
    planspinner2.setAdapter(planAdapter2);

}
private void chooseSmallMedPlan(){

    planspinner2 = (Spinner) findViewById(R.id.planspinner);
    List<String> planlist2 = new ArrayList<String>();
    planlist2.add("Business Super Plan");
    planlist2.add("Her Business Super Plan");
    planlist2.add("Business Circle Plan");
    planlist2.add("Pay As you Go® Plus");
    ArrayAdapter<String> planAdapter3 = new ArrayAdapter<String>(this,
        android.R.layout.simple_spinner_item, planlist2);
planAdapter3.setDropDownViewResource(android.R.layout.simple_spinner_dropdown_item);
planspinner2.setAdapter(planAdapter3);

}

public class planOnClickListener implements OnItemSelectedListener {

         @Override
        public void onItemSelected(AdapterView<?> parent, View v, int pos,
                long id) {

            parent.getItemAtPosition(pos);  

            if (pos==0){
            choosePersonalPlan();   
            }else if (pos==1){
            chooseLargeBusPlan();
            } else if (pos==2){
            chooseSmallMedPlan();
 }
        }
        @Override
        public void onNothingSelected(AdapterView<?> arg0) {
            // TODO Auto-generated method stub

        }
        }
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-06T18:41:47.867

在您的代码中，您没有设置`planOnClickListener()`任何位置。我觉得你忘了像这样设置监听器 `catspinner.setOnItemSelectedListener(new planOnClickListener());`

# c# - F# 脚本调用 C# exe 时的 log4net 问题

> ID：13749807
> 
> 赞同：3
> 
> 时间：2012-12-06T18:07:40.647
> 
> 标签：c#, f#, log4net

我有一个写 log4net 日志的 C# exe。如果我直接运行此 exe，则日志记录工作正常。但是，如果我从 F# 脚本（扩展名为 fsx）调用 exe，则会出现错误

```
log4net:ERROR Failed to find configuration section 'log4net' in the application'
s .config file. Check your .config file for the <log4net> and <configSections> e
lements. The configuration section should look like: <section name="log4net" typ
e="log4net.Config.Log4NetConfigurationSectionHandler,log4net" /> 
```

有人可以帮忙吗？多谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-06T18:27:35.843

您应该将此 exe 文件的配置插入 f# 应用程序的配置文件或在代码中初始化记录器。我不确定当您运行 f# 脚本时是否有配置文件。

您可以尝试使用代码将配置设置为您的 c# exe 的配置文件：

```
AppDomain.CurrentDomain.SetData("APP_CONFIG_FILE", "c:/test.config); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-06T18:34:04.090

当您从 F# Interactive 调用 C# .exe 时，当前工作目录（.NET 将尝试从中加载 .config 文件的位置）是安装 F# Interactive 的目录。

在您的 F# 交互式脚本中，执行以下操作：

```
// Change the current directory to the directory where the
// C# assembly was loaded from.
System.Environment.CurrentDirectory <-
    // TODO : Change 'MyType' to any public type from your C# assembly
    typeof<FSharpx.Text.Lexing.Position>.Assembly.Location 
```

**编辑：**再想一想，我不知道上面的代码是否有效——它假设 .config 文件将被延迟加载（即按需加载）。如果 CLR 在加载 .exe 的同时加载 .config 文件，则需要执行以下操作：

```
// Change the current directory *before* referencing the C# assembly.
System.Environment.CurrentDirectory <- @"C:\blah";;

// Reference the C# assembly
#r @"C:\blah\foobar.exe";; 
```

# fortran - 2D FFT 使用 1D FFT 和 mpi

> ID：13749808
> 
> 赞同：3
> 
> 时间：2012-12-06T18:07:41.497
> 
> 标签：fortran, mpi, fftw

我正在尝试使用具有 fftw_mpi 子例程（版本 3.3.2）的维度（nxn）的复矩阵：所有行上的 1D FFT（复数到复数）和所有行的 1D FFT（复数到复数）之后列。首先，我在 Fortran 中制作了一个串行代码，一切正常，但是当我尝试使用 mpi 的 fftw 子例程时，结果与我预期的不同。1D FFT 变换的计划是如何创建的？下面是一个示例（仅行上的第一个 1D FFT）：

```
    ！获取本地数据大小并分配（维度反转）

    alloc_local = fftw_mpi_local_size_2d(M, L, MPI_COMM_WORLD, &
                                                local_M, local_j_offset)

    cdata = fftw_alloc_complex(alloc_local)
    调用 c_f_pointer(cdata, ldata, [L,local_M])
    调用 c_f_pointer(cdata, data, [L,local_M])
    ！创建 MPI 计划
    计划 = fftw_mpi_plan_many_dft(1, L*local_M, local_M, FFTW_MPI_DEFAULT_BLOCK, &
    FFTW_MPI_DEFAULT_BLOCK、ldata、数据、MPI_COMM_WORLD、FFTW_FORWARD、FFTW_ESTIMATE）
    做 j = 1, local_M
        我 = 1, L
     ldata(i,j)= my_function
    结束
    结束
    ！计算变换
     调用 fftw_mpi_execute_dft（计划、ldata、数据）
    调用 fftw_destroy_plan(plan)
    调用 fftw_free(cdata)
    调用 MPI_FINALIZE(mpi_err)

```

# python - 连接 SQL 语句字符串

> ID：13749812
> 
> 赞同：-1
> 
> 时间：2012-12-06T18:08:00.943
> 
> 标签：python

我试图连接一个动态插入语句（超过 100 个插入），而不是一个接一个地执行，我想将所有语句连接到一个变量中。

下面，一个基本的例子：

```
insert_ = " insert into table ( field,zone) values ('a','b'); "
insert_b = " insert into table ( field,zone) values ('c','d'); "
insert_c = " insert into table ( field,zone) values ('e','f'); "

list = []
list.append(insert_)
list.append(insert_b)
list.append(insert_c)
print list 
```

电流输出：

```
[" insert into table ( field,zone) values ('a','b'); ", " insert into table ( field,zone) values ('c','d'); ", " insert into table ( field,zone) values ('e','f'); "] 
```

期望的输出：

```
insert into table ( field,zone) values ('a','b'); insert into table ( field,zone) values ('c','d');  insert into table ( field,zone) values ('e','f'); 
```

谢谢阅读。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-12-06T18:17:03.050

```
c = db.cursor()
values_to_insert = [("a","b"),("c","d"),...]
c.execute_many("INSERT INTO table (val1,val2) VALUES (?,?)",values_to_insert  ) 
```

这就是 execute_many 的用途...

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-12-06T18:09:38.210

简单如`"".join(list)`. 或者根本不使用列表，只使用字符串连接，正如 Hemesh 所说。

另外，请不要将您的列表命名为“列表”。它是python中的一个保留关键字（我自己有时也会陷入这个陷阱，但这是一个非常糟糕的主意）。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-12-06T18:10:29.850

只需连接所有这些，无需使用列表。

```
insert = insert_ + insert_b + insert_c 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-12-06T18:13:33.227

由于`join`已经提出了简单的添加，这里有另一个完整性选项：

```
insert = '%s %s %s' % (insert_a, insert_b, insert_c) 
```

# javascript - Telerik 标签条

> ID：13749819
> 
> 赞同：0
> 
> 时间：2012-12-06T18:08:27.597
> 
> 标签：javascript, asp.net-mvc, telerik-mvc

我有一个包含许多标签的标签条。当我在选项卡 2 中进行一些更改时，会弹出一个确认消息，询问我是否要继续而不保存，如果我说是，我需要将选项卡 2 中修改字段的值重置为其原始值。请帮我做这件事。

请在下面找到我的示例代码

```
Html.Telerik().TabStrip().Name("TabStripEmployeeDetail")
       .Items(items =>
       {
           items.Add()
               .Text("tab1").HtmlAttributes(new { onclick = "return  warnOfChanges()" })
               .LoadContentFrom(......);
           items.Add().HtmlAttributes(new { onclick = "return  warnOfChanges()" })
               .Text("tab2")
               .LoadContentFrom(......);
           items.Add()
               .Text("tab3")
               .LoadContentFrom(.......);
           items.Add()
               .Text("tab4")
               .LoadContentFrom(....);
           items.Add() 
```

我有一个javascript函数

```
 function warnOfChanges()  {
        if(documentmodified) {
            return confirm('Changes have been made on this tab. Continue without saving?');
        }
        return true;
    }; 
```

我称之为标签的点击。请在这里帮忙

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-09T18:37:34.803

首先，我建议您使用 TabStrip 的 select 事件，而不是在选项卡项上附加相同的处理程序。

要真正重置这些设置（因为您使用 Ajax 加载它们），最简单的方法是刷新服务器的 TabFrom 内容。要刷新特定选项卡，您可以使用客户端 API 的**reload**方法。

查看文档以获取如何使用[reload](http://www.telerik.com/help/aspnet-mvc/telerik-ui-components-tabstrip-client-api-and-events.html#ClientAPI)方法的示例。

# javascript - 天空盒纹理未显示

> ID：13749823
> 
> 赞同：1
> 
> 时间：2012-12-06T18:08:50.020
> 
> 标签：javascript, three.js

我正在尝试学习 THREE.js，但无法显示一个简单的天空盒。我已经尝试了 100 种不同的方法，但似乎没有任何效果 - 太少的文档与许多不同版本的结合让我完全束手无策。我已经走到了尽头！

我认为这可能与加载图像所需的时间有关，但我尝试放入一些“加载器”代码无济于事（因为它似乎没有做太多，所以将其删除）。我愿意相信我只是没有以“正确的方式”去做——我很难找到适用于当前版本的示例。

```
<html>
  <head> <title>Skybox Demo</title> <style>canvas { width: 100%; height: 100% }</style>
  <body>
    <script src="https://raw.github.com/mrdoob/three.js/master/build/three.js"></script>
    <script>
        var container;
        var renderer;
        var cameraCube, sceneCube;
        var skyboxMesh;
        var cubeTarget;

        var mouseX = 0;
        var mouseY = 0;
        var windowHalfX = window.innerWidth / 2;
        var windowHalfY = window.innerHeight / 2;

        init();
        animate();

        function init() {

            container = document.createElement('div');
            document.body.appendChild(container);

            cameraCube = new THREE.PerspectiveCamera( 50, window.innerWidth / window.innerHeight, 1, 1000 );
            sceneCube = new THREE.Scene();

            // Load cube textures
            var path = "textures/cube/";
            var format = '.jpg';
            var urls = [ path + 'px' + format, path + 'nx' + format,
                        path + 'py' + format, path + 'ny' + format,
                        path + 'pz' + format, path + 'nz' + format ];
            var skyCubeTexture = THREE.ImageUtils.loadTextureCube(urls);
            skyCubeTexture.format = THREE.RGBFormat;

            // Cube shader
            var shader = THREE.ShaderUtils.lib["cube"];
            shader.uniforms["tCube"].texture = skyCubeTexture;
            var material = new THREE.ShaderMaterial({
                fragmentShader : shader.fragmentShader,
                vertexShader   : shader.vertexShader,
                uniforms       : shader.uniforms,
                depthWrite     : false,
                side           : THREE.BackSide
            });

            var skyboxMesh = new THREE.Mesh( new THREE.CubeGeometry(100, 100, 100), material);
            sceneCube.add(skyboxMesh);

            // Renderer
            renderer = new THREE.WebGLRenderer( {antialias:true});
            renderer.setSize(window.innerWidth, window.innerHeight);
            renderer.autoClear = false;
            container.appendChild( renderer.domElement );
        }

        function animate() {
            render();
            requestAnimationFrame( animate );
        }

        function render() {
            var timer = - new Date().getTime() * 0.0002;
            cameraCube.position.x = 10 * Math.cos( timer );
            cameraCube.position.z = 10 * Math.sin( timer );
            cameraCube.lookAt({x:0, y:0, z:0});
            renderer.clear();
            renderer.render(sceneCube, cameraCube);
        }
    </script>
  </body>
</html> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-06T19:11:28.880

从网上复制示例时要非常小心。

three.js 处于 alpha 阶段，网上流传的许多示例已经过时。

最好从“官方”three.js 示例开始，因为它们适用于当前库。

您需要正确分配纹理：

```
shader.uniforms["tCube"].value = skyCubeTexture; 
```

这是最近的变化。

三.js r.53

# jquery - Jquery PHP如何在提交表单后检查复选框是否已被选中

> ID：13749827
> 
> 赞同：2
> 
> 时间：2012-12-06T18:08:56.403
> 
> 标签：jquery, checkbox, checked

我有一个下拉菜单，用户必须在其中选择一个选项。如果该选项未在此处列出，则用户可以选中一个复选框，同时禁用下拉菜单并启用文本框。通过这种方式，用户可以编写菜单中未列出的选项。这很好用。但是，如果用户选中该框以键入另一个选项并按下提交，并且假设表单中的其他内容（验证）错误导致系统返回表单，如果用户已经选中该框，它应该现在显示为：下拉菜单已禁用，文本框已启用，其中包含用户键入的内容。我已经设法用 PHP 保留了这些信息，但问题是，即使复选框显示已选中，下拉菜单已启用而文本框未启用。

我怎样才能解决这个问题？？？

好吧，我已经得到了我希望这个脚本只使用 javascript 来做的事情。但是，我想知道如何使用 jQuery 实现这一点。有没有人知道的？？

同时，这是我运行良好的代码：

```
<?php   //checkbox2.php   header('Content-Type: text/html; charset=UTF-8'); ?> <html> <head> <meta http-equiv="content-language" content="es"> <meta http-equiv="Content-Type" content="text/html; charset=utf-8"> <meta name="generator" content="PhpED Version 7.0 (Build 7043)"> <title>checkbox enable disable</title> <meta name="author" content="Pathros Ibarra">
    <!-- Aqu? va la declaraci?n del script enable textbox when checkbox is checked-->    <SCRIPT LANGUAGE="JavaScript">
        function codename() 
        {
            if(document.forma_registro.checkboxname.checked)
            {
                document.forma_registro.grado_otro.disabled=false;
                document.forma_registro.grado.disabled=true;
            }

            else
            {
                document.forma_registro.grado_otro.disabled=true;     //textname
                document.forma_registro.grado.disabled=false;         //box
            }
        }

        //------------------------- en caso de que se haya escrito texto alternativo, entonces apl?quese la siguiente funci?n
        function codename2() 
        {
            if(document.forma_registro.checkboxname2.checked)
            {
                document.forma_registro.grado_otro2.disabled=false;
                document.forma_registro.grado2.disabled=true;
            }

            else
            {
                document.forma_registro.grado_otro2.disabled=true;
                document.forma_registro.grado2.disabled=false;
            }
        }

</SCRIPT> </head> <body> <?php if(empty($_POST)===false) {
    if((isset($_POST['checkboxname2'])===true && $_POST['checkboxname2']=="ON" ))//|| isset($_POST['checkboxname'])===true && $_POST['checkboxname']=="ON")
    {
        //2da forma
        echo '<p style="color: green; font: bold;">Ok in checkbox 2!</p>';
        if(empty($_POST['grado'])===false)
        {
            echo '<p style="color: purple; font: bold;">Se recibió un dato desde el menú y es: "'.$_POST['grado'].'"</p>';
        }
        else if(empty($_POST['grado_otro'])===false)
        {
            echo '<p style="color: purple; font: bold;">Se recibió un dato desde el cuadro de texto alternativo y es: "'.
            $_POST['grado_otro'].'"</p>';
        }
        else
        {
            echo '<p style="color: red; font: bold;">No data received in checkbox 2.</p>';
        } ?> <p style="color: green; text-decoration: blink; font: bold;"></p> <h4 style="color: blue;">Forma de ejemplo con checked</h4> <form action="" name="forma_registro" method="post"> <select name="grado2" <?php if(isset($_POST['grado_otro2'])===false) echo 'disabled="disabled"'; ?>> <!-- disabled="disabled" -->   <option value="">--Seleccione--</option>   <option value="volvo" <?php if(isset($_POST['grado2'])===true && $_POST['grado2']=='volvo') echo 'selected="selected"'; ?>>Volvo</option>   <option value="saab" <?php if(isset($_POST['grado2'])===true && $_POST['grado2']=='saab') echo 'selected="selected"'; ?>>Saab</option>   <option value="mercedes" <?php if(isset($_POST['grado2'])===true && $_POST['grado2']=='mercedes') echo 'selected="selected"'; ?>>Mercedes</option>   <option value="audi" <?php if(isset($_POST['grado2'])===true && $_POST['grado2']=='audi') echo 'selected="selected"'; ?>>Audi</option> </select>                <!-- aquí abajo iba el 2 --> <input type="checkbox" name="checkboxname2" onclick="codename2()" <?php if(isset($_POST['grado_otro'])===true) echo 'value="ON" checked="checked"'; ?>> Seleccionar si otro: <input type="text" name="grado_otro" <?php if(isset($_POST['grado_otro'])===true) echo 'value="'.$_POST['grado_otro'].'"'; ?>><br> <input type="submit" value="enviar">  </form> <?php

    }
    else 
    {
        echo '<p style="color: green; font: bold;">Ok in checkbox 1 uno!</p>';
        if(empty($_POST['grado'])===false)
        {
            echo '<p style="color: green; font: bold;">Se recibió un dato desde el menú y es: "'.$_POST['grado'].'"</p>';
        }
        else if(empty($_POST['grado_otro'])===false)
        {
            echo '<p style="color: green; font: bold;">Se recibió un dato desde el cuadro de texto alternativo y es: "'.
            $_POST['grado_otro'].'"</p>';
        }
        else
        {
            echo '<p style="color: orange; font: bold;">No data received in checkbox 1.</p>';
        }
     ?> <p style="color: green; text-decoration: blink; font: bold;"></p> <h4 style="color: blue;">Forma de ejemplo sin checked</h4> <form action="" name="forma_registro" method="post"> <select name="grado" <?php if(isset($_POST['grado_otro'])===true) echo 'disabled="disabled"'; ?>>   <option value="">--Seleccione--</option>  <option value="volvo" <?php if(isset($_POST['grado'])===true && $_POST['grado']=='volvo') echo 'selected="selected"'; ?>>Volvo</option>   <option value="saab" <?php if(isset($_POST['grado'])===true && $_POST['grado']=='saab') echo 'selected="selected"'; ?>>Saab</option>   <option value="mercedes" <?php if(isset($_POST['grado'])===true && $_POST['grado']=='mercedes') echo 'selected="selected"'; ?>>Mercedes</option>   <option value="audi" <?php if(isset($_POST['grado'])===true && $_POST['grado']=='audi') echo 'selected="selected"'; ?>>Audi</option> </select> <input type="checkbox" name="checkboxname" onclick="codename()" value="ON" <?php if(isset($_POST['grado_otro'])===true) echo 'checked="checked"'; ?>> Seleccionar si otro: <input type="text" name="grado_otro" <?php if(isset($_POST['grado_otro'])===false) echo 'disabled="disabled"'; ?> <?php if(isset($_POST['grado_otro'])===true) echo 'value="'.$_POST['grado_otro'].'"'; ?>><br> <input type="submit" value="enviar">  </form>

<!-- Si la forma del checkbox está en ON, entonces aplicará lo sig: if($_POST['checkboxname2']=="ON" || $_POST['checkboxname']=="ON") y con otra forma y el checkboxname2()  --> <?php
    }//fin del else }//fin del empty post     else {                                     ?> <h4 style="color: blue;">Forma de ejemplo sin checked (inicio)</h4> <form action="" name="forma_registro" method="post"> <select name="grado">   <option value="">--Seleccione--</option>   <option value="volvo" <?php if(isset($_POST['grado'])===true && $_POST['grado']=='volvo') echo 'selected="selected"'; ?>>Volvo</option>   <option value="saab" <?php if(isset($_POST['grado'])===true && $_POST['grado']=='saab') echo 'selected="selected"'; ?>>Saab</option>   <option value="mercedes" <?php if(isset($_POST['grado'])===true && $_POST['grado']=='mercedes') echo 'selected="selected"'; ?>>Mercedes</option>   <option value="audi" <?php if(isset($_POST['grado'])===true && $_POST['grado']=='audi') echo 'selected="selected"'; ?>>Audi</option> </select> <input type="checkbox" name="checkboxname" onclick="codename()" value="ON"> Seleccionar si otro: <input type="text" name="grado_otro" disabled="disabled" <?php if(isset($_POST['grado_otro'])===true) echo 'value="'.$_POST['grado_otro'].'"'; ?>><br> <input type="submit" value="enviar">  </form>

<?php } ?> </body> </html> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-08T14:20:29.553

这很简单：

```
$('#checkboxname').click(function() {

    if ($(this).is(':checked')) {
        $("#grado_otro").prop("disabled", false);
        $("#grado").prop("disabled", true);
    } else {
        $("#grado_otro").prop("disabled", true);
        $("#grado").prop("disabled", false);
    }
});​ 
```

**[在这里演示](http://jsfiddle.net/tmubp/)**

**更新**

这是您可以尝试的另一个简单版本：

```
$('#checkboxname').click(function () {
    $("#grado_otro").prop("disabled", !this.checked);
    $("#grado").prop("disabled", this.checked);
}); 
```

[**在这里演示**](http://jsfiddle.net/tmubp/22/)

# java - Spring MVC 在控制器之间传递数据

> ID：13749832
> 
> 赞同：4
> 
> 时间：2012-12-06T18:09:08.053
> 
> 标签：java, spring, spring-mvc

我正在使用 SpringMVC 编写 Web 应用程序。我想在用户注销之前保留一些数据。早些时候我是这样做的`@SessionAttributes("someData")`，但后来我不得不`@ModelAttribute("someData") someDataType someData`为每个请求映射方法输入参数。所以这就是我所做的：

我的 AccessData 类：

```
@Component
@Scope(value = "session")
public class AccessData {

    private long userID;

    private String userKey;

    public AccessData(long ID, String key) {
        this.userID = ID;
        this.userKey = key;
    }

    public long getUserID() {
        return userID;
    }

    public void setUserID(long userID) {
        this.userID = userID;
    }

    public String getUserKey() {
        return userKey;
    }

    public void setUserKey(String userKey) {
        this.userKey = userKey;
    }
} 
```

第一个控制器（这里我从表单获取并验证用户输入）：

```
@Controller
@Scope(value = "session")
public class LoginController {

    @ModelAttribute("accessData")
    public AccessData getAccessData() {
        return this.accessData;
    }

    private Utils utilsService;

    private LoginService loginService;

    @Autowired
    private AccessData accessData;

    @Autowired
    public LoginController(LoginService loginService, Utils utils) {
        this.loginService = loginService;
        this.utilsService = utils;
    }

    @RequestMapping(value = ControllerPaths.LOGIN, method = RequestMethod.POST)
    public ModelAndView showLoginStatus(
            @ModelAttribute(LOGINDATA) LoginData loginData) {
        try {
            accessData = loginService.validateLoginData(loginData);
        } catch (IncorrectLoginDataException e) {
            logger.trace("Showing fail login screen...");
            return utilsService.getShowView(ViewPaths.LOGIN_FAIL);
        } catch (HTTPException e) {
            return utilsService.getShowViewWithStringAttribute(
                    ViewPaths.INFO_VIEW, MESSAGE, CONNECTION_ERROR);
        }
        return utilsService.getShowView(ViewPaths.LOGIN_SUCCESS);
    }
} 
```

第二个控制器：

```
@Controller
@Scope(value = "session")
public class SecondController {

    @ModelAttribute("accessData")
    public AccessData getAccessData() {
        return this.accessData;
    }

    private Utils utilsService;

    private LoginService loginService;

    @Autowired
    private AccessData accessData;

    @Autowired
    public SecondController(LoginService loginService, Utils utils) {
        this.loginService = loginService;
        this.utilsService = utils;
    }

    @RequestMapping(value = ControllerPaths.SHOW_ACCESS_DATA, method =   RequestMethod.GET)
    public ModelAndView showAccessData(
        System.out.println(accessData.getUserKey());
        return utilsService.getShowView(ViewPaths.INDEX);
    }
} 
```

问题是当我在第二个控制器中打印 userKey 值时，该值为空。我检查了我是否从服务器中获取了正确的数据，`LoginController`没关系。那么我做错了什么？提前感谢您的帮助

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-07T08:12:10.510

问题是您正在为 accessData 变量分配一个新对象。相反，您应该更新它已经引用的对象的字段。

```
accessData = loginService.validateLoginData(loginData);

// Replace above line with something like this. Implement the copyProperties
// method to copy the attributes you need
AccessData newAccessData = loginService.validateLoginData(loginData);
copyPropteries(accessData,newAccessData); 
```

也不需要使控制器会话范围，添加`proxyMode=TARGET_CLASS`到`AccessData`类的范围注释。

# c# - 从 C# 中使用本机 DLL 的 out 参数

> ID：13749845
> 
> 赞同：3
> 
> 时间：2012-12-06T18:09:41.080
> 
> 标签：c#, dllimport

我需要在我的 C# 代码中使用本机 dll (WNSMP32.dll) 中的以下函数。

```
SNMPAPI_STATUS SnmpStartupEx( _Out_  smiLPUINT32 nMajorVersion,...); 
//Considering just one for purpose of discussion 
```

为此，我将 dllimport 声明为

```
[DllImport("wsnmp32.dll")]  internal static extern
Status SnmpStartupEx(out IntPtr majorVersion, ...); 
//Considering just one for purpose of discussion 
```

我正在使用该功能

```
IntPtr majorVersion = Marshal.AllocHGlobal(sizeof(UINT32))

status = SnmpStartupEx(out majorVersion, out minVersion, 
                       out level, out translateMode, out retransmitMode ) 
```

分配内存后，我正在打印 IntPtr 的值。

```
<<<DEBUG OUTPUT>>> IntPtr Value = 112235522816 
```

然而，在调用 之后，我发现 IntPtr 正在改变！

```
<<<DEBUG OUTPUT>>> IntPtr after calling SnmpStartupEx
<<<DEBUG OUTPUT>>> IntPtr Value = 111669149698 
```

1.  我应该在通话前通过 Marshal.AllocHGlobal 分配内存吗？
2.  调用后更改 IntPtr 的地址是否有效？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-12-06T18:17:00.317

尝试：

```
[DllImport("wsnmp32.dll")]
internal static extern Status SnmpStartupEx(out UInt32 majorVersion,
                                            out UInt32 minorVersion, 
                                            out UInt32 level,
                                            out UInt32 translateMode,
                                            out UInt32 retransmitMode); 
```

每个`out`参数实际上是一个指向函数覆盖的变量的指针。`out IntPtr`除非本机代码具有双指针，否则您不想编写。

你可以用`AllocHGlobal`一个普通的（按值传递，而不是`out`）`IntPtr`参数自己做所有这些......但是当编译器可以为你做这件事时，为什么还要麻烦呢（编译器会更快，因为它会获取堆栈上局部变量的地址，而不是动态分配缓冲区空间然后复制）？

# javascript - 在 RequireJS 的定义中使用 Require

> ID：13749847
> 
> 赞同：0
> 
> 时间：2012-12-06T18:09:56.760
> 
> 标签：javascript, dojo, requirejs, js-amd

是否可以在定义块中使用 require ？

我正在尝试加载 facebook JS API，但需要将其包装在具有不同上下文的 require 中，因为如果 Facebook 被防火墙阻止，我不希望整个应用程序停止加载。

我遇到的问题是如何从嵌套的 require() 调用中返回模块。

我的代码看起来像这样：

```
define( [ 'require' ], 
    function( require ) 
{
    var fbRequire = require( 
    { 
        context: 'fb',
        waitSeconds: 3
    } );

    fbRequire.onError = function()
    {
        console.warn( 'fbRequire.onError', arguments );
    };

    fbRequire( [ 'https://connect.facebook.net/en_US/all/debug.js' ], 
        function() 
    {
        console.log( 'facebook file now loaded' );

        // init the Facebook JS SDK
        var facebookSettings = {
            channelUrl: '//' + window.location.hostname + '/facebook-channel.html', // Channel File for x-domain communication
            status: true, 
            cookie: true, 
            xfbml: true,
            appId: '1234567890'
        };

        FB.init( facebookSettings );

        // this is the bit I'm confused about
        // how do I...
        return FB;
        // ...because it's asynchronous and needs to be returned from the define() call?
    } );
} ); 
```

这是一个 Dojo 项目，如果有帮助的话（我需要使用 dojo/Deferred 吗？）。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-08T23:27:37.963

我已经解决了这个问题，但是当 Facebook 被阻止时，无法让 Dojo 加载程序不失败。相反，我使用直接的 JS 来加载 SDK。希望这会对其他人有所帮助。

```
define( [ 'require' ], 
    function( require ) 
    {
        return {
            /**
             * Loads a facebook asynchronously using require() and a "bang" (!).
             * 
             * @example require( ['my-project/facebookLoader!'],    function( facebook ) { ... } );
             */
            load: function( store, require, callback )
            {
                // already loaded?
                if( window.FB !== undefined )
                {
                    console.log( 'facebook already loaded - using global FB object.' );
                    callback( window.FB );
                }
                else
                {
                    require( [ 'dojo/dom-construct', 
                        'dojo/_base/window', 
                        'dojo/on',
                        'dojo/_base/event' ], // remove "/debug" in live env
                    function( domConstruct, win, on, event ) 
                    {
                        // add Facebook div
                        domConstruct.create( 'div', { id:'fb-root' }, win.body(), 'first' );

                        // init the Facebook JS SDK
                        var facebookSettings = {
                            channelUrl: '//' + window.location.hostname + '/facebook-channel.html', // Channel File for x-domain communication
                            status: false, // check the login status upon init?
                            cookie: true, // set sessions cookies to allow your server to access the session?
                            xfbml: false    // parse XFBML tags on this page?
                        };

                        // app ID from the App Dashboard
                        if( window.location.hostname == 'localhost' )
                        {
                            facebookSettings.appId = '123456788'; 
                        }
                        else
                        {
                            facebookSettings.appId = '123456789'; 
                        }

                        // what do we do if Facebook is blocked or times out?
                        var loadFailed = function( errorEvent )
                        {
                            console.warn( 'Facebook failed to load. Some features will be unavailable. ' + ( errorEvent ? 'Script error.' : 'Timed out.' ) );

                            // scrap the timer (in case we got here from error event on script tag)
                            if( timerId )
                            {
                                window.clearTimeout( timerId );
                            }

                            if( errorEvent !== undefined )
                            {
                                event.stop( errorEvent );
                            }

                            window.fbAsyncInit = function(){}; // noop

                            // return fake Facebook object
                            callback( 
                            { 
                                getLoginStatus: function()
                                {
                                    return false;
                                }
                            } );

                        };

                        // give Facebook 5 seconds to load
                        var timerId = window.setTimeout( loadFailed, 5000 );

                        // hook into Facebook's load callback
                        window.fbAsyncInit = function() 
                        {
                            window.clearTimeout( timerId );
                            FB.init( facebookSettings );
                            callback(  window.FB );
                        };

                        // Load the SDK Asynchronously
                        ( function(d)
                        {
                            var js, id = 'facebook-jssdk', ref = d.getElementsByTagName('script')[0];
                            if (d.getElementById(id)) {return;}
                            js = d.createElement('script'); js.id = id; js.async = true;
                            js.src = "//connect.facebook.net/en_US/all/debug.js"; // dev version
                            //js.src = "//connect.facebook.net/en_US/all.js"; // production version
                            on( js, 'error', loadFailed );
                            ref.parentNode.insertBefore(js, ref);
                        }( document ) );

                    } );
                }
            }
        };
    } 
); 
```

# haskell - Haskell 不正确的缩进

> ID：13749850
> 
> 赞同：0
> 
> 时间：2012-12-06T18:10:06.713
> 
> 标签：haskell, indentation

我有一个错误提示“可能不正确的缩进”

```
boyerMooreSearch :: [Char] -> [Char] -> [Int] -> Int
boyerMooreSearch string pattern skipTable 
                                    | skip == 0                                     = 0
                                    | skip > 0 && (string length > pattern length)  = boyerMooreSearch (substring string skip (string length)) pattern skipTable
                                    | otherwise                                     = -1
                                    where 
                                    subStr = (substring 0 (pattern length)) 
                                    skip = (calculateSkip subStr pattern skipTable) 
```

它出什么问题了？谁能解释 Haskell 中的缩进规则？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-06T18:22:31.250

在与 的行上`substr`，您有一个空格字符串，后跟一个文字制表符，在与您的行上，`skip`您有相同的字符串，后跟四个空格。这些是不兼容的；实现这一点的一种强大、灵活的方法是在每行的开头使用完全相同的空白字符串将内容排列在一个块中。

但是，真正的规则是，正如您所问的那样，制表符将缩进级别提高到下一个八的倍数，而所有其他字符将缩进级别提高一。块中的不同行必须处于相同的缩进级别。`do`, `where`, `let`, 和`of`引入块（我可能忘记了一些）。

# objective-c - UIWebView 功能

> ID：13749851
> 
> 赞同：0
> 
> 时间：2012-12-06T18:10:07.180
> 
> 标签：objective-c, ios, caching, uiwebview

处理涉及`UIWebView`. 基本问题：- **Ui Webview**的行为与**safari**完全一样吗？

我们最后的场景是使用 ui webview 显示网络应用程序。可以使某些页面在离线模式下工作。如**用户上网->浏览网页。现在没有连接，safari 仍然可以从缓存中加载网页根据为该页面所做的设置**。（清单文件）。

但是，这种情况在我正在使用的应用程序中不起作用`UIWebView`。我正在使用 ASIHttp 请求绕过代理并提供凭据。

如何使用`UIWebView`.Caching 技术处理这种离线场景？请提供代码示例，因为我发现很难找到一些代码示例。

使用的代码如下：-

```
ASIHTTPRequest *request1 = [ASIHTTPRequest requestWithURL:navigationURL];

    [request1 setDownloadCache:[ASIDownloadCache sharedCache]];

    [[ASIDownloadCache sharedCache] setShouldRespectCacheControlHeaders:NO];

    [request1 setCachePolicy:ASIOnlyLoadIfNotCachedCachePolicy];

    [request1 setCacheStoragePolicy:ASICachePermanentlyCacheStoragePolicy];

    [request1 setDownloadDestinationPath:
     [[ASIDownloadCache sharedCache] pathToStoreCachedResponseDataForRequest:request1]];

 // ************   Network Status check   

 NetworkStatus status = [self.retrive1.internetreachbility currentReachabilityStatus];

    if (status == ReachableViaWiFi || status == ReachableViaWWAN) {

        [[ASIDownloadCache sharedCache] clearCachedResponsesForStoragePolicy:ASICachePermanentlyCacheStoragePolicy];        
    [request1 setShouldPresentProxyAuthenticationDialog:YES];
    [request1 setShouldPresentCredentialsBeforeChallenge:YES];
    [request1 setShouldPresentAuthenticationDialog:YES];
    [request1 setUsername:retrive1.username];
    [request1 setPassword:retrive1.password];

    [request1 setDelegate:self];

        [request1 setDidFinishSelector:@selector(webPageFetchSucceeded:)];

    [request1 startAsynchronous];

    }

    else

    {

        NSLog(@"app is offline");

        [request1 useDataFromCache];

        BOOL success = [request1 didUseCachedResponse];
        NSLog(@"------------>>>>>>> Success is %@\n", (success ? @"YES" : @"NO"));

        off_status.text = [NSString stringWithFormat:@"Success is %@", (success ? @"YES" : @"NO")];

// Not using this method .

        *NSData *responseData = [request1 responseData];

   [web loadData:responseData MIMEType:@"text/html" textEncodingName:@"utf-8" baseURL:nil];*

// Using this method 

        NSString *response = [NSString stringWithContentsOfFile:       
                              [request1 downloadDestinationPath] encoding:[request1 responseEncoding] error:nil];

    [web loadHTMLString:response baseURL:nil];

    } 
```

使用缓存中的数据时，图像不显示。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-06T18:17:03.127

`UIWebView`与 Safari 不相似。Safari 是一个成熟的网络浏览器，而 webView 更像是准系统。特别是因为从 Objective-C 代码与 javascript 交互是一件非常痛苦的事情。

要执行诸如离线浏览之类的操作，您需要自己实现。要么在objectiveC层做。即首先使用objective-C 下载内容，将其存储在本地cashe 中，然后将代码扔到uiwebview 中。下次从缓存中离线加载时。

或者您可以使用 javascript 尝试此操作。`uiwebview`支持 HTML5，因此您可以尝试使用`LocalStorage`并查看效果如何。我的信念是它看起来很老套。在这里查看更多信息 -[从本机 iPhone 应用程序访问 UIWebView 本地存储数据](https://stackoverflow.com/questions/3546852/accessing-uiwebview-local-storage-data-from-native-iphone-app)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-20T06:53:12.630

WebView 和 Safari 比较的一些问答可能对您有所帮助：

```
Does UIWebView use the same JavaScript engine as Mobile Safari? 
```

UIWebView 没有 Nitro Javascript 引擎，因此它执行 JS 比 Mobile Safari 慢。所以不一样。

```
Also, does UIWebView support all HTML5 features like Mobile Safari does? I am specifically concerned about Web SQL and Web Workers 
```

不确定这个。可能不是。至少 UIWebView 在某些功能上比 Safari 更严格一些。示例：通过 JS 设置宽/高样式时，需要在数字后面加上 'px'，而 Mobile Safari 则不需要。

```
If I have an app which is written purely in HTML and JS, should I wrap it up in a UIWebView or should I have it open in Mobile Safari 
```

如果您想在 App Store 上发布该应用程序，则必须对其进行包装。如果没有，你真的不必。

```
Are pure HTML and JS apps accepted on the Apple store? 
```

如果你把它包起来，是的。但它有一些限制......

# visual-studio - 结束 Visual Studio 调试会话时自动关闭 Chrome 或 Firefox 等 IE

> ID：13749861
> 
> 赞同：8
> 
> 时间：2012-12-06T18:10:50.383
> 
> 标签：visual-studio, google-chrome, firefox, integration, visual-studio-2017

当我在 Internet Explorer 中的 Visual Studio 中调试 Web 项目时，浏览器会在我结束调试会话时自动关闭。同样，当我先结束浏览器时，也会结束调试会话。我知道 IE 与 Visual Studio 有特殊的集成。

我的问题是：我可以在 Chrome 和 Firefox 上启用这种集成，或许可以使用浏览器或 Visual Studio 扩展？

我的研究：我在网上搜索了“firefox visual studio integration”、“close debug chrome visual studio”，但没有出现任何相关内容。在 Visual Studio 扩展管理器中搜索“chrome”或“firefox”不会产生任何结果。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-07-11T21:09:23.760

一点点谷歌搜索显示，右键单击您的 .apspx 文件，单击“Browse with ...”，选择 Chrome 或 Firefox，然后单击“设置为默认值”会将您选择的浏览器设置为您的默认调试浏览器，我假设它与调试会话一起打开和关闭。我看到您将此标记为 Visual Studio 2010 问题，但我还读到在 Visual Studio 2012 中，您可以从代码编辑器上的下拉框中选择要调试的浏览器。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2017-04-27T19:25:16.170

从 Visual Studio 2017 开始，完全支持 Chrome 调试。在撰写本文时，Firefox 和 Edge 将[在稍后推出](https://blogs.msdn.microsoft.com/webdev/2016/11/21/client-side-debugging-of-asp-net-projects-in-google-chrome/)（是的，微软在他们自己的 Edge 浏览器之前添加了对 Google Chrome 的支持）。

[![在此处输入图像描述](../Images/3e4e143910982b797e1934428adeb560.png)](https://i.stack.imgur.com/sxBH5.png)

# java - 在 Java 3d 中旋转对象

> ID：13749865
> 
> 赞同：1
> 
> 时间：2012-12-06T18:11:10.120
> 
> 标签：java, object, 3d, mouse

我尝试根据鼠标在 Java3D 中的移动对立方体进行旋转。无论立方体旋转，我希望当我向上拖动光标时，立方体以相同的方向旋转。这适用于所有可能的动作。

我该如何进行？我想它必须放在相机坐标中......

这是我的功能：

```
public void objectRotate(TransformGroup objectInInteraction, double dh,
        double dp, double dr) {

    Transform3D oldT3D = new Transform3D();
    objectInInteraction.getTransform(oldT3D);       

    Transform3D tx = new Transform3D();
    Transform3D ty = new Transform3D();
    Transform3D tz = new Transform3D();

    Transform3D tc = new Transform3D();
    //camera.getTransform(tc);

    double x = 0, y = 0, z = 0;
    x = Math.PI * dh / 180;
    y = Math.PI * dp / 180;
    z = Math.PI * dr / 180;

    tx.rotX(x);
    tc.mul(tx);

    ty.rotY(y);
    tc.mul(ty);

    tz.rotZ(z);     
    tc.mul(tz);

    oldT3D.mul(tc);

    objectInInteraction.setTransform(oldT3D);
} 
```

dh是左右运动，dp，上下

谢谢 ！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2014-04-29T08:48:36.023

这对我行得通...

```
public void objectRotate(TransformGroup objectInInteraction, double dh,
    double dp, double dr)
{

    // Transform3D oldT3D = new Transform3D();
    // objectInInteraction.getTransform(oldT3D);       

    Transform3D tx = new Transform3D();
    Transform3D ty = new Transform3D();
    Transform3D tz = new Transform3D();

    Transform3D tc = new Transform3D();
    //camera.getTransform(tc);

    double x = 0, y = 0, z = 0;
    x = Math.PI * dh / 180;
    y = Math.PI * dp / 180;
    z = Math.PI * dr / 180;

    tx.rotX(x);
    tc.mul(tx);

    ty.rotY(y);
    tc.mul(ty);

    tz.rotZ(z);     
    tc.mul(tz);

    // oldT3D.mul(tc);

    objectInInteraction.setTransform(tc);
} 
```

;-)

# linux - linux sed 语法

> ID：13749874
> 
> 赞同：1
> 
> 时间：2012-12-06T18:11:40.213
> 
> 标签：linux, sed

我正在尝试删除此字符串

```
;document.write('<iframe src="http://google.com" scrolling="auto" frameborder="no" align="center" height="11" width="11"></iframe>'); 
```

跨目录中的所有文件（包括子目录）。

我知道我必须转义字符或使用正则表达式。但是我对正则表达式很糟糕。任何见解表示赞赏。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-06T18:16:38.687

如果要删除固定字符串，则不需要使用正则表达式。您可以按原样将其放在 sed 命令中，但选择字符串中任何字符以外的分隔符（我`#`在这里使用）：

```
str=";document.write('<iframe src="'"http://google.com" scrolling="auto" frameborder="no" align="center" height="11" width="11"></iframe>'"');"
find . -type f -exec sed -i.bk -e "s#$str##g" {} \; 
```

# c# - LINQ 查询未显示在 DGV 中

> ID：13749877
> 
> 赞同：0
> 
> 时间：2012-12-06T18:11:49.567
> 
> 标签：c#, database, linq, datatable

我已经研究了一段时间，所以如果我在某个地方错过了一个主题，请指出我正确的方向并接受我的道歉。

我正在对传入的 DataTable 执行 LINQ 查询，并根据完成的过滤设置新列。传入的信息是包含以下列的单行：CompanyName、CustomerID、LastName、FirstName、ContactTitle。

我的问题是，我是否对信息进行了过度过滤，以至于它不会向 DGV 返回任何内容，还是我做错了什么？

我要做的是根据从 DataTable 传入的信息查询另一个表。这是我的查询：

```
 var query = (from id in IncomingOrderDetails.AsEnumerable()
                    from o in db.Orders
                    from c in db.Customers
                    from r in db.Regions
                    where (id.Field<int>("OrderID") == o.OrderID)
                    where (o.CustomerID == c.CustomerID)
                    where (c.Region == r.RegionDescription)
                    select new
                    {
                        CustomerID = c.CustomerID,
                        CompanyName = c.CompanyName,
                        ContactName = c.ContactName,
                        RegionDescription = r.RegionDescription,
                        Country = c.Country,
                        Phone = c.Phone
                    }).ToList();

        custInfoDGV.DataSource = query; 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-06T18:20:12.183

这一行：

```
 where (c.Region == r.RegionDescription) 
```

...看起来很可疑。如果`c.Region = r.RegionDescription`，你为什么需要引入`r`呢？您使用它的所有目的都是检索 RegionDescription。

I don't know your tables, but joining two fields that don't match would certainly produce 0 records returned. :)

# matlab - Matlab矩阵归属根据其他矩阵值

> ID：13749882
> 
> 赞同：0
> 
> 时间：2012-12-06T18:12:11.970
> 
> 标签：matlab, matrix

我有一个这样的矩阵*数据*：

```
 1      2    3  

1: 1.0    2.0  5.0 
2: 2.0    2.0  5.0              
3: 4.0    0    5.0 
```

还有另一个像这样的矩阵*测试*：

```
 1      2    3  

1: 3.0    0     0 
2: 0      5.0   0              
3: 0      0    3.0 
```

**问题：**设置数据使得： data(i,j) = 0 当 test(i,j) == 0

我的代码：

```
for i=1:N
        for j=1:M
                if test(i,j) == 0
                        data(i,j) = 0;
                end 
        end 
end 
```

**问题：**有没有一种无循环的方式来做到这一点/

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-06T18:15:21.633

是的。试试这个

```
 data(find(test==0)) = 0; 
```

或者正如@Peter 在下面的评论中所说，这种更简单的形式就足够了

```
 data(test==0) = 0; 
```

# javascript - Twitter Bootstrap Modal w/tabs 默认为第一个选项卡

> ID：13749883
> 
> 赞同：2
> 
> 时间：2012-12-06T18:12:21.063
> 
> 标签：javascript, jquery, html, twitter-bootstrap

使用包含选项卡的 Bootstrap 模式。该模式是从 php 生成的画廊名称表中调用的。

**表数据**

```
<td>
<a href="#" class="galName" data-target="#myModal" data-toggle="modal" id="update_<?php echo $gal['id']; ?>" >
<?php echo $gal['name']; ?>
</a>
</td> 
```

模式打开，第一个选项卡在初始触发时被选中。如果我导航到另一个选项卡关闭模式并选择不同的画廊，模式将打开到最后一个打开的选项卡。

如何确保打开模式时，它总是打开到第一个选项卡？

**模态标签**

```
<ul id="myTab" class="nav nav-tabs">
  <li class="active">
       <a href="#home" data-toggle="tab">Home</a>
  </li>
  <li class="">
       <a id="uploadRevision" href="#upload" data-toggle="tab">Upload Revision</a>
  </li>
  <li class="">
       <a href="#editRev" data-toggle="tab">Edit Revision</a>
   </li>
 </ul> 
```

.galName 触发一个 initUpdate 函数以将第一个选项卡设置为默认值。它设置选项卡，但不显示选项卡内容。

```
function initUpdate()
{ 
  $('#myModal a:first').tab('show');
} 
```

谢谢您的帮助。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-12-06T18:33:52.827

找到了解决方案。必须从 tab 和 tabContent 中删除 class="active"。感谢@merv - [https://stackoverflow.com/a/11762931/1214858](https://stackoverflow.com/a/11762931/1214858)

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2015-02-20T18:23:28.943

简单的; 使用“活动”类在加载时显示特定选项卡。

如下所示：

```
<!-- Nav tabs -->
<!-- content tabs --> 
```

删除上面 li 中的 class="tab-pane active" 选项卡导航和要使其处于活动状态的内容。

# ibm-connections - 在 IBM Social Business ToolKit 中禁用代理

> ID：13749884
> 
> 赞同：1
> 
> 时间：2012-12-06T18:12:22.460
> 
> 标签：ibm-connections, ibm-sbt

当我尝试使用 IBM Social Business ToolKit for IBM Connections 构建 OpenSocial Gadget 时，我遇到了 Access-Control-Allow-Origin 错误。

我有 3 台服务器参与此小工具：

*   连接：将托管小工具的 IBM Connections 4.0 服务器
*   IBMSBT：托管 Social Business Toolkit 脚本和应用程序的服务器
*   JESSE_API：我的应用服务器托管小工具将使用的 API

小工具 xml 由 CONNECTIONS 从 JESSE_API 加载。小工具的视图加载脚本并调用 JESSE_API。我想使用 Social Business Toolkit 来访问 Connections 的各个部分，因此小工具视图也会从 IBMSBT 加载这些组件。

我目前只是对此进行原型设计——我能够仅使用 Connections 4.0 API 来完成这项工作，但宁愿使用 SBT 库。

开始时，我只是将“获取我的社区 - 主窗口”片段放入我的小工具视图中，并包含以下脚本：

```
<script type="text/javascript">
    var djConfig = {
        parseOnLoad: true
    };
</script>

<script src="//IBMSBT/sbt.dojo180/dojo/dojo.js"></script>
<script src="//IBMSBT/sbt.sample.web/library?ver=1.8.0"></script> 
```

重新加载小工具会在控制台中出现以下错误：

```
XMLHttpRequest cannot load http://IBMSBT/sbt.sample.web/service/proxy/connections/http/CONNECTIONS/communities/service/atom/communities/my?ps=5 
```

由于我的小工具在 CONNECTIONS 服务器上运行，因此我不需要代理。我没有看到立即禁用此端点代理的方法，因此我只是在 Endpoint.js 中的第 160 行之前设置了一个断点，其中执行以下代码：

```
if(this.proxy) {
    args.url = this.proxy.rewriteUrl(args.url,this.proxyPath);
} 
```

当断点命中时，我设置 this.proxy = null 导致代理不被使用并且社区信息正确返回。

我的问题是我应该以不同的方式执行此操作，还是应该添加一种方法来绕过给定我当前使用的结构的代理的使用？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-07T11:44:27.727

在此环境中不需要使用 SDK 代理。作为支持 OAuth 工作的一部分，我们最近在这方面进行了一些更改。您需要做的是配置 SDK 库初始化，以便它知道它在 Gadget 上下文中运行。

看看 acme.social.sample.webapp：

1.  在 faces-config.xml 中，您将看到一个用于 OpenSocial 的环境

    ```
    <!-- 开放社会环境 -->
    <托管豆>
        <managed-bean-name>openSocial</managed-bean-name>
        <managed-bean-class>com.ibm.sbt.jslibrary.SBTEnvironment</managed-bean-class>
        <managed-bean-scope>应用程序</managed-bean-scope>
        <托管属性>
            <property-name>端点</property-name>
            <value>acmeAirOS:acmeAir</value>
        </托管属性>
    </托管豆>

    ```

2.  端点定义使用了一个小工具端点（在 faces-config.xml 的下方）

    ```
    <托管豆>
        <managed-bean-name>acmeAirOS</managed-bean-name>
        <managed-bean-class>com.ibm.sbt.services.endpoints.GadgetOAuthEndpoint</managed-bean-class>
        <managed-bean-scope>会话</managed-bean-scope>
        <托管属性>
            <property-name>url</property-name>
            <value>%{acme.url}</value>
        </托管属性>
    </托管豆>

    ```

3.  在加载库时在小工具 xml（或导入的 html）中传递一个参数以指示应使用 OpenSocial 环境

    ```
    <script type="text/javascript" src="../../library?ver=1.8.0&context=gadget&env=openSocial"></script>

    ```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-07T21:59:24.833

根据 Mark Wallace 提供的信息，我更仔细地了解了`/library/`端点在做什么。

我无法使它完全与该代码完全一致，但以下代码可以很好地工作：

```
<script data-dojo-config="parseOnLoad:true"
        src="//IBMSBT/sbt.dojo180/dojo/dojo.js.uncompressed.js"></script>

<script>
if(typeof _sbt=='undefined' || window._sbt_bridge_compat){
    _sbt=0;
    dojo.registerModulePath('sbt','http://IBMSBT/sbt/js/sdk/sbt');
    dojo.registerModulePath('sbt/_bridge','http://IBMSBT/sbt/js/sdk/_bridges/dojo-amd');
    dojo.registerModulePath('sbt/dojo','http://IBMSBT/sbt/js/sdk/dojo');
    define('sbt/config',['sbt/Proxy','sbt/_bridge/Transport','sbt/authenticator/Basic','sbt/Endpoint'],function(Proxy,Transport,Basic,Endpoint){
        window.sbt = {};
        sbt.Properties={
            "sbtUrl":"http:\/\/IBMSBT\/sbt\/js\/sdk"
        };
        sbt.Endpoints={
            'connections':new Endpoint({
                "baseUrl":"http:\/\/connectionsww.demos.ibm.com",
                "transport":new Transport({}),
                "authType":"basic",
                "authenticator":new Basic({}),
                "proxyPath":"connections"})
        };
        return sbt;
    });
}
</script> 
```

script 标签的内容基本上是`/library/`端点的输出。该`sbt.Endpoints.connections`定义最初包括我删除的已定义代理属性。

# graphviz - 在 twopi 中控制间距 (Graphviz)

> ID：13749885
> 
> 赞同：4
> 
> 时间：2012-12-06T18:12:24.670
> 
> 标签：graphviz

我是 Graphviz 的新手，我正在尝试绘制以实体为中心的树（我正在使用`twopi`命令）。

*   如果我把`overlap=true`它重叠，即使重叠标签周围有很多空间。
*   如果我放`overlap=false`，标签会变得太小。

我怎样才能在不重叠的情况下拥有第一种情况？

完整代码：

```
digraph g {
    graph [ fontname = "Helvetica",
        fontsize = 10,
        size = "500,500",
        splines=true,
        overlap=false,
        ratio=.5 ];
    node [  shape = plaintext,
        fontname = "Helvetica" ];

    root="owl:Thing";
    "owl:Thing" -> "Work";
    "Work" -> "WrittenWork";
    "Work" -> "Software";
    "Work" -> "Website";
    "Work" -> "Film";
    "owl:Thing" -> "Agent";
    "Agent" -> "Organisation";
    "Organisation" -> "Non-ProfitOrganisation";
    "Organisation" -> "GeopoliticalOrganisation";
    "Organisation" -> "SambaSchool";
    "Agent" -> "Person";
    "Person" -> "Athlete";
    "Person" -> "OfficeHolder";
    "Person" -> "Astronaut";
    "Person" -> "Philosopher";
    "Person" -> "Architect";
    "owl:Thing" -> "Drug";
    "owl:Thing" -> "Place";
    "Place" -> "SiteOfSpecialScientificInterest";
    "Place" -> "PopulatedPlace";
    "PopulatedPlace" -> "Country";
    "PopulatedPlace" -> "Continent";
    "PopulatedPlace" -> "Atoll";
    "Place" -> "ProtectedArea";
    "Place" -> "ArchitecturalStructure";
    "Place" -> "HistoricPlace";
    "Place" -> "NaturalPlace";
    "NaturalPlace" -> "Mountain";
    "NaturalPlace" -> "Volcano";
    "NaturalPlace" -> "MountainRange";
} 
```

谢谢，

阿莱西奥

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-12-06T20:35:56.560

对于这个特定的图表，您可以使用`overlap=true`然后递增`ranksep`，直到不再有标签重叠。`ranksep=1.3`似乎是一个很好的价值。

![应用了 rankep 的 twopi 输出](../Images/b19f3ce3e9beaa4b47d5a776920dc01c.png)

# bash - 通过 bash 脚本打开 cmus 启动 tmux

> ID：13749886
> 
> 赞同：2
> 
> 时间：2012-12-06T18:12:26.917
> 
> 标签：bash, tmux

我想打开一个新的 tmux 会话和带有 cmus 的窗口，或者，如果已经运行，则附加到它。在[Ubuntu 用户中](http://wiki.ubuntuusers.de/tmux)，我找到了应该执行此操作的脚本。

```
1\. #!/bin/bash
2\. SESSION=main
3\. tmux="tmux -2 -f tmux.conf"
4\. 
5\. # if the session is already running, just attach to it.
5\. $tmux has-session -t $SESSION
7\. if [ $? -eq 0 ]; then
8\.   echo "Session $SESSION already exists. Attaching."
9\.   sleep 1
10\.  $tmux attach -t $SESSION
11\.  exit 0;
12\.  fi 
```

我已经知道我可以手动完成

```
tmux new -n music cmus 
```

但是当我在脚本中使用它时，我只会得到消息

```
usage: new-session [-d] [-n window-name] [-s session-name] [-t target-session] [-x width] [-y height] [command] 
```

我也用新会话尝试过，但没有改变。我绝对不知道命令或脚本或两者都有什么问题

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-06T18:55:12.610

我解决这个问题的方法是有一个主 tmux 会话，像 mutt 或 cmus 这样的程序可以启动或连接。例如，对于 cmus，我有一个别名：

```
alias cmus='monkeys -n music cmus' 
```

猴子是以下脚本：

```
#! /bin/sh

name=monkeys

# make sure tmux server is running:
tmux start-server

# determine if monkeys session is running:
tmux has-session -t ${name}

# no monkeys running, create monkeys,
# if more than one argument, take it as a command to run 
# on monkeys, else just attach to monkeys
if [ "$?" != "0" ]; then
    tmux new-session -s ${name} $*
elif [ $# -gt 0 ]; then
    tmux new-window -t ${name} $*
else
    tmux a -t ${name}
fi 
```

# java - GZIPInputStream 无法读取连接的 .gz 文件错误已解决？

> ID：13749891
> 
> 赞同：0
> 
> 时间：2012-12-06T18:12:50.420
> 
> 标签：java, gzip, gzipinputstream

有谁知道这个错误 [http://bugs.sun.com/bugdatabase/view_bug.do?bug_id=2192186](http://bugs.sun.com/bugdatabase/view_bug.do?bug_id=2192186)

已经解决了吗？它导致我们在从档案馆或档案馆收集数据方面出现问题。看起来这是一个非常古老的问题： [http ://bugs.sun.com/bugdatabase/view_bug.do?bug_id=4691425](http://bugs.sun.com/bugdatabase/view_bug.do?bug_id=4691425)

如果解决了，请告诉我包含修复的 jvm 版本。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-06T20:40:39.220

我再次检查并发布该[错误](http://bugs.sun.com/bugdatabase/view_bug.do?bug_id=2192186)已修复（检查其状态和分辨率字段）。这是相关的[提交](http://bugs.sun.com/bugdatabase/view_bug.do?bug_id=2192186)。确保您使用的是最新的 Java 版本。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-02-14T00:36:47.450

很抱歉回答了一年多，迟到了，但我认为答案会对其他人有所帮助，因为我也有这个问题，我花了一段时间才找到哪个版本。

答案是 GZIPInputStream 连接错误修复已在 Java 6u21-rev-b08 [http://www.oracle.com/technetwork/java/javase/documentation/overview-156328.html中发布](http://www.oracle.com/technetwork/java/javase/documentation/overview-156328.html)

但是，看起来官方 Java 6u21 版本是基于 build 7 的，因此该修复可能直到 Java 6u22 才出现在官方版本中，即使它没有出现在发行说明中。

我认为这意味着它存在于 Java 7 的所有版本中，因为 6u22 在 Java 7 发布前一年问世。它肯定在最新的 Java 7 版本中。

# c++ - 是否有 inNull(sqlite3_stmt *, int col) 的布尔值允许我检查它？

> ID：13749893
> 
> 赞同：1
> 
> 时间：2012-12-06T18:13:00.447
> 
> 标签：c++, sql, sqlite

在我的数据库中，有很多选项在开始时需要输入 ISNT，因此它可以为空。我正在查看 SQLite3 的 C++ api，但乍一看（[http://www.sqlite.org/c3ref/funclist.html](http://www.sqlite.org/c3ref/funclist.html)）我没有找到任何关于如何处理这个问题的信息。我遇到的唯一一件事是当您请求列并且该列为空时返回的内容（此处显示：[http](http://www.sqlite.org/c3ref/column_blob.html) ://www.sqlite.org/c3ref/column_blob.html ）。

问题是，可能不会出现错误，因为 0 是许多常见事物的有效解决方案（作为程序员，我们通常从 0 开始计数）。

我想要做的是找到一个布尔语句（如果有的话），这样我就可以在提取数据之前检查是否为空。这样，可以返回一个正确的标志而不是 0。

其他人在这里有问题吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-06T18:17:37.877

您始终可以在获取数据之前检查列的类型（这将进行转换）。你用 来做[`sqlite3_column_type`](http://www.sqlite.org/c3ref/column_blob.html)，它返回`SQLITE_NULL`一个 NULL 值：

```
bool isNull(sqlite3_stmt *stmt, int iCol)
{
    return sqlite3_column_type(stmt, iCol) == SQLITE_NULL;
} 
```

# signalr - 将对象发送到 .net signalr 客户端时出错

> ID：13749897
> 
> 赞同：3
> 
> 时间：2012-12-06T18:13:14.003
> 
> 标签：signalr, signalr.client

我的理解是，使用信号器，我可以来回发送对象。我正在尝试设置一个 .net 客户端来接收已在网站上放置订单的通知。我正在尝试设置一个非常简单的示例，以便我理解这些概念。当我将字符串通知发送回客户端时效果很好，但是当我尝试发送对象时出现错误：

```
Microsoft.CSharp.RuntimeBinder.RuntimeBinderException was unhandled by user code
  HResult=-2146233088
  Message=The best overloaded method match for 'ConsoleHub.Program.DisplayOrder(ConsoleHub.Order)' has some invalid arguments
  Source=Anonymously Hosted DynamicMethods Assembly
  StackTrace:
       at CallSite.Target(Closure , CallSite , Type , Object )
       at System.Dynamic.UpdateDelegates.UpdateAndExecuteVoid2[T0,T1](CallSite site, T0 arg0, T1 arg1)
       at ConsoleHub.Program.<Main>b__6(Object o) in c:\Working\OrderNotifier\ConsoleHub\Program.cs:line 23
       at Microsoft.AspNet.SignalR.Client.Hubs.HubProxyExtensions.<>c__DisplayClass6`1.<On>b__4(JToken[] args)
       at Microsoft.AspNet.SignalR.Client.Hubs.Subscription.OnData(JToken[] data)
       at Microsoft.AspNet.SignalR.Client.Hubs.HubProxy.InvokeEvent(String eventName, JToken[] args)
       at Microsoft.AspNet.SignalR.Client.Hubs.HubConnection.OnReceived(JToken message)
       at Microsoft.AspNet.SignalR.Client.Connection.Microsoft.AspNet.SignalR.Client.IConnection.OnReceived(JToken message)
       at Microsoft.AspNet.SignalR.Client.Transports.HttpBasedTransport.ProcessResponse(IConnection connection, String response, Boolean& timedOut, Boolean& disconnected)
  InnerException: 
```

我的课：

```
public class Order
{
    public int OrderId { get; set; }
    public string Name { get; set; }
    public string OrderItem { get; set; }
} 
```

我的枢纽：

```
using Microsoft.AspNet.SignalR.Hubs;
using OrderNotifier.Models;
using System.Linq;
using System.Threading.Tasks;

namespace OrderNotifier.Hubs
{

    public class NotifierHub : Hub
    {
        OrderContext db = new OrderContext();

        public void Hello()
        {
            Clients.Caller.Welcome("hello");
        }

    }
} 
```

我的控制器动作：

```
 [HttpPost]
    public ActionResult Create(Order order)
    {
        if (ModelState.IsValid)
        {
            db.Orders.Add(order);
            db.SaveChanges();

            SendNotifier.SendOrderNotification(String.Format("{0} ordered {1}", order.Name, order.OrderItem), order);
            return RedirectToAction("Index");
        }

        return View(order);
    } 
```

SendNotifier - 这有点奇怪，因为我让它同时发送一个字符串版本和一个对象版本进行测试：

```
public class SendNotifier
{
    public static void SendOrderNotification(string message, Order order)
    {
        var context = GlobalHost.ConnectionManager.GetHubContext<NotifierHub>();
        context.Clients.All.Notify(message);
        context.Clients.All.Order(order);
    }
} 
```

还有我的控制台应用程序：

```
using Microsoft.AspNet.SignalR.Client.Hubs;
using OrderNotifier.Models;
using System;

namespace ConsoleHub
{
    class Program
    {
        static void Main(string[] args)
        {
            var hubConnection = new HubConnection("http://localhost:60692");

            var order = hubConnection.CreateHubProxy("NotifierHub");

            //
            // Set up action handlers
            //
            order.On("Welcome", message => Console.WriteLine(message));
            order.On("Notify", message => Console.WriteLine(message));
            order.On("Order", o => DisplayOrder(o));
            hubConnection.Start().Wait();

            order.Invoke("Hello").Wait();

            Console.WriteLine("Initialized...");
            Console.ReadLine();
        }

        public void DisplayOrder(Order o)
        {
            Console.WriteLine(String.Format("Order object received.../r/nOrderId: {0}/r/nName: {1}/r/nOrderItem: {2}", o.OrderId, o.Name, o.OrderItem));
            //Console.WriteLine(o);
        }
    }
} 
```

如果我将 DisplayOrder 参数更改为字符串，它就可以工作。我知道我可能可以使用 Json.Net 手动反序列化它，但我的理解是我应该能够将它作为一个对象使用并让信号器反序列化。我错过了什么？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-07T10:16:03.450

您正在使用 On 的动态对象重载。您需要指定类型：

```
order.On<Order>("Order", DisplayOrder); 
```

# visual-studio-2010 - Visual Studio 扩展：使用 IVsSolutionEvents OnAfterOpenSolution 等待所有项目完成加载

> ID：13749903
> 
> 赞同：8
> 
> 时间：2012-12-06T18:13:34.783
> 
> 标签：visual-studio-2010, visual-studio, visual-studio-2008, visual-studio-extensions, envdte

我正在寻找一个要使用的事件/界面，它会在打开解决方案后所有项目都加载到解决方案中后通知我。

我已经[`OnAfterOpenSolution`](http://msdn.microsoft.com/en-US/library/bb141391%28v=vs.80%29.aspx)在[`IVsSolutionEvents2`](http://msdn.microsoft.com/en-US/library/microsoft.visualstudio.shell.interop.ivssolutionevents2%28v=vs.80%29.aspx)界面中实现了。这会在解决方案打开后立即调用......所以我在 UI 线程上运行的任何代码，即使是异步的，都会在项目加载之前锁定 IDE。

是否有与实施[`OnAfterOpenSolution'](http://msdn.microsoft.com/en-US/library/bb141391%28v=vs.80%29.aspx)类似的技术，即在解决方案的所有项目都打开后调用？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-05-23T16:05:15.557

[IVsSolutionLoadEvents](http://msdn.microsoft.com/en-us/library/vstudio/ee232599%28v=vs.100%29.aspx)接口中的[OnAfterBackgroundSolutionLoadComplete](http://msdn.microsoft.com/en-us/library/vstudio/microsoft.visualstudio.shell.interop.ivssolutionloadevents.onafterbackgroundsolutionloadcomplete%28v=vs.100%29.aspx)事件在解决方案的所有项目完成加载后触发。为了使用 IVsSolution.AdviseSolutionEvents(..) 方法附加事件，此实现仍需要实现或扩展 IVsSolutionEvents 接口之一的实现。

在对该区域进行进一步调查后，仅当项目设置为在后台加载时才会发生 OnAfterBackgroundSolutionLoadComplete。如果后台加载已被禁用，则不会发生此事件。如果您打算依赖 OnAfterBackgroundSolutionLoadComplete 事件或根据用户设置加载优先级的方式进行切换，您可能还必须实现[IVsSolutionLoadManager并确保至少 1 个项目具有后台加载优先级。](http://msdn.microsoft.com/en-us/library/microsoft.visualstudio.shell.interop.ivssolutionloadmanager%28v=vs.100%29.aspx)

# javascript - 循环遍历内部 jquery 手风琴字段

> ID：13749905
> 
> 赞同：1
> 
> 时间：2012-12-06T18:13:43.873
> 
> 标签：javascript, jquery, jquery-ui

有没有办法为 jquery 手风琴中的 and 语句创建一个循环，这样我就可以遍历我的 JSON。

下面的代码使 JSON 工作，所以我希望 JSON 中的数据填充我的 jquery 手风琴。只是不知道如何处理手风琴需要的 h3 和 div 标签。

```
 <html>

<meta name="viewport" content="initial-scale=1.0, user-scalable=no" />
<head>

<link rel="stylesheet" href="jquery-ui-1.8.23.custom/development-bundle/themes/base/jquery.ui.all.css">
    <script src="jquery-ui-1.8.23.custom/development-bundle/jquery-1.8.0.js"></script>
    <script src="jquery-ui-1.8.23.custom/development-bundle/ui/jquery.ui.core.js"></script>
    <script src="jquery-ui-1.8.23.custom/development-bundle/ui/jquery.ui.widget.js"></script>
    <script src="jquery-ui-1.8.23.custom/development-bundle/ui/jquery.ui.mouse.js"></script>
    <script src="jquery-ui-1.8.23.custom/development-bundle/ui/jquery.ui.selectable.js"></script>
    <script src="jquery-ui-1.8.23.custom/development-bundle/ui/jquery.ui.accordion.js"></script>
    <link rel="stylesheet" href="jquery-ui-1.8.23.custom/development-bundle/demos/demos.css">
    <script type='text/javascript' src="http://code.jquery.com/ui/1.9.1/jquery-ui.js"></script>

<script>
    $(function() {
        $( "#accordion" ).accordion();
    });
</script><script>
    $(document).ready(function(){
            /* call the php that has the php array which is json_encoded */
            $.getJSON(ReturnPlacesJSON.php, function(data) {
                /* data will hold the php array as a javascript object */
                $.each(data, function(key, val) {
                    var latlng = new google.maps.LatLng(val.xcoord, val.ycoord);
                    var title = (val.title)?val.title:""
                    var icon = 'http://shanewmiller.com/Specials/images/beermug.png';
                    var special = val.Description;
                    var end = (val.endtime)?val.endtime:""
                    var start = (val.starttime)?val.starttime+" - ":""
                    var day = (val.day)?val.day:""
                    var html = val.name + val.address + special + day + start + end;

                    $('<h3 />').html(special).appendTo('#accordion');
                    $('<div />').html(val.name + ' ' + val.address).appendTo('#accordion');
                });
            });
        }); 

    </script>

</head>
<body>

<div id="accordion">
    </div>

</body></html> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-06T19:37:06.617

您要做的是在手风琴 div 内创建 h3 和 div 做什么`$('#accordion > h3').each()`和`$('#accordion > div').each()`做的是迭代手风琴内已经存在的 h3 和 div，这些都没有。

实际上，您需要做的是遍历 json - 您通过调用来完成`$.each(data, ...)`- 然后为每个项目创建一个新的 h3 和一个包含该内容的新 div。您使用 jQuery 创建元素，如下所示：

```
$('<h3 />').html(special).appendTo('#accordion');
$('<div />').html(val.name + ' ' + val.address).appendTo('#accordion'); 
```

我相信其余的代码必须进行微调。例如，我不确定调用`accordion()`，然后填充 div 会给你想要的效果。

# jquery - .when() 的数组和脚本在 DOM 中加载时的回调

> ID：13749909
> 
> 赞同：0
> 
> 时间：2012-12-06T18:13:54.873
> 
> 标签：jquery, asynchronous, callback, loading, asynccallback

我正在处理异步调用`$.getScript`，它将加载特定页面所需的脚本。我通过 AJAX 调用获取脚本以获取我需要的脚本，然后使用`$.when`函数按顺序加载它们，我不确定为什么会`.done()`立即调用，而不是在脚本完全加载并放置在 DOM 中准备好使用时.

例如，AJAX 调用返回：

```
['js/jquery.cookie.js', 'js/leaflet.js', 'js/index.js'] 
```

使用此代码：

```
var loadScripts = function(callback)
{
    $.getJSON('url.php', function(response)
    {
        $['when'].call(this, response).done(function()
        {
            callback();
        });
    });
}; 
```

通过以下方式调用它：

```
loadScripts(function()
{
    // All scripts are loaded and ready to use
    // but the callback is fired immediately

    // L is undefined
    var map = L.map('map-view').setView([51.505, -0.09], 13);
}); 
```

我不想使用 Head.js 或 Require.js 之类的库，我需要一个可以加载的简单脚本，并等待加载的函数就位后可以使用。请注意，脚本列表和顺序可能会发生变化，所以这样做`$.when($.getScript(), $.getScript()).done()`不是我想要的。

我该如何处理？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-06T18:43:36.780

您的 ajax 调用返回一个字符串数组，而不是延迟对象。您实际上需要通过请求这些字符串`jQuery.getScript`并存储返回值来使这些字符串成为延迟对象。

```
var loadScripts = function(callback) {
    $.getJSON('url.php', function(response) {
        var defArr = $.map(response,function(url) {
            return $.getScript(url);
        });
        $.when.apply($, defArr).done(callback);
    });
};​ 
```

# mysql - 选择最高的日期，即使重复

> ID：13749912
> 
> 赞同：0
> 
> 时间：2012-12-06T18:14:04.120
> 
> 标签：mysql, date

我有一个包含日期列的数据库。这些日期可能有所不同，有些日期相同。即使它们是重复的，我如何选择最高的日期组？

这就是我正在使用的，它只是提出第一个实例：

```
 SELECT data.Company,data.Eff_Date, data.Monthly_Rate, data.Plan,        
    zips.ZIP_LOOKUP_CODE AS Expr1, zips.State, zips.County, zips.City, zips.Zipcode
    FROM data INNER JOIN
    zips ON data.ZIP_LOOKUP_CODE = zips.ZIP_LOOKUP_CODE
    WHERE (zips.Zipcode = '27012') AND
    (data.Company_Old LIKE '%CSI%') AND
    (data.Plan IN ('A','C','F','F (High)','G','N')) AND
    (data.Gender = 'Female') AND
    (data.Age = '65') AND
    (data.Tobacco = 'Non-Tobacco') AND
    (data.State = 'NC')
    Order by max(data.Eff_Date); 
```

数据库日期示例：

```
 +------+------------+-----------+------------+------------+---------+-----
    | Company_Old | Plan | State | Tobacco | Eff_Date   | Age  | Gender  | ZIP_LOOKUP_CODE |
    +------+------------+-----------+------------+------------+---------+-----
    |    CSI      |   A  |   NC  |    No   | 2012-12-01 |  65  |  Male   | 123
    |    CSI      |   C  |   NC  |    No   | 2012-12-01 |  65  |  Male   | 123
    |    CSI      |   F  |   NC  |    No   | 2012-12-01 |  65  |  Male   | 123
    |    CSI      |   FH |   NC  |    No   | 2012-12-01 |  65  |  Male   | 123
    |    CSI      |   G  |   NC  |    No   | 2012-12-01 |  65  |  Male   | 123
    |    CSI      |   N  |   NC  |    No   | 2012-12-01 |  65  |  Male   | 123
    |    CSI      |   A  |   NC  |    No   | 2011-12-01 |  65  |  Male   | 123
    |    CSI      |   C  |   NC  |    No   | 2011-12-01 |  65  |  Male   | 123
    |    CSI      |   F  |   NC  |    No   | 2011-12-01 |  65  |  Male   | 123
    |    CSI      |   FH |   NC  |    No   | 2011-12-01 |  65  |  Male   | 123
    |    CSI      |   G  |   NC  |    No   | 2011-12-01 |  65  |  Male   | 123
    |    CSI      |   N  |   NC  |    No   | 2011-12-01 |  65  |  Male   | 123 
```

数据库 zip 的示例数据：

```
 +-----------------+-------+--------+------+------------+
    | ZIP_LOOKUP_CODE | STATE | COUNTY | CITY |  Zipcode   |           
    +-----------------+-------+--------+------+------------+
    |    123          |   NC  | BLah   | city |  27007     | 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-06T18:15:24.363

尝试这个 ：：

```
SELECT data.Company,

MAX(data.Eff_Date), data.Monthly_Rate, data.Plan,        
    zips.ZIP_LOOKUP_CODE AS Expr1, zips.State, zips.County, zips.City, zips.Zipcode
    FROM data INNER JOIN
    zips ON data.ZIP_LOOKUP_CODE = zips.ZIP_LOOKUP_CODE
    WHERE (zips.Zipcode = '27012') AND
    (data.Company_Old LIKE '%CSI%') AND
    (data.Plan IN ('A','C','F','F (High)','G','N')) AND
    (data.Gender = 'Female') AND
    (data.Age = '65') AND
    (data.Tobacco = 'Non-Tobacco') AND
    (data.State = 'NC')
    GROUP BYdata.Eff_Date 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-06T18:18:48.870

我可能会建议使用子查询来检索`max(eff_date)`每个公司，然后将该子查询加入其余的：

```
SELECT d.Company, 
  d.Eff_Date, 
  d.Monthly_Rate, 
  d.Plan,        
  z.ZIP_LOOKUP_CODE AS Expr1, 
  z.State, 
  z.County, 
  z.City, 
  z.Zipcode
FROM data d
INNER JOIN zips z
  ON d.ZIP_LOOKUP_CODE = z.ZIP_LOOKUP_CODE
INNER JOIN 
(
  select max(Eff_Date) Eff_Date, Company, Plan
  from data
  group by company, Plan
) d1
  on d.Eff_Date = d1.Eff_Date
  and d.company = d1.company
  and d.plan = d1.plan
WHERE (z.Zipcode = '27012') AND
    (d.Company_Old LIKE '%CSI%') AND
    (d.Plan IN ('A','C','F','F (High)','G','N')) AND
    (d.Gender = 'Female') AND
    (d.Age = '65') AND
    (d.Tobacco = 'Non-Tobacco') AND
    (d.State = 'NC')
Order by d.Eff_Date; 
```

# python - 在 Mac 上的 Python 中使用 lxml 时收到“ImportError：无法导入名称 etree”

> ID：13749916
> 
> 赞同：12
> 
> 时间：2012-12-06T18:14:15.917
> 
> 标签：python, macos, lxml, importerror

我在 Mac 上为 Python 正确安装 lxml 时遇到了困难。我按照[此处](http://lxml.de/installation.html#installation)的说明进行操作，安装后表明安装成功（但是，有一些警告。安装和警告的完整日志可以在[这里](https://docs.google.com/document/d/1Fqzal7ZRzuIWGm6zMjHeUqyvegVSnDDpDaj428yYLU8/edit)找到）

运行安装后，我尝试在 lxml 安装目录中运行 Test.py 以确保它正常工作。我立即收到错误提示：

```
ImportError"  cannot import name etree. 
```

此错误是由该行引起的`from lxml import etree`。

在看似成功的安装之后，我似乎无法弄清楚为什么它在这里失败了。请原谅我的无知，因为我通常不会用 Python 编程，当然也不会在 MAC 上编程（目前被迫这样做）。

以供参考：

*   Python版本：2.7.2
*   Mac OS X 10.8.2

提前感谢所有帮助。

* * *

## 回答 #1

> 赞同：17
> 
> 时间：2012-12-06T18:40:43.320

听起来你`lxml`的道路上有另一个。确保您引用的是正确的，它应该看起来像这样：

```
>>> import lxml
>>> lxml
<module 'lxml' from '/path/to/lib/python2.7/site-packages/lxml/__init__.pyc'> 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2017-09-12T19:15:16.190

我和你有同样的问题。

我的问题是我将我的 Python 文件之一命名为*lxml.py*。

您应该始终检查您的 Python 文件的名称是否与模块冲突。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2021-05-12T22:23:58.233

Microsoft 服务器 Spyder IDE Python 3.7 和 Python 3.9

记录这一点，因为我在 Google/StackOverflow 等上的任何地方都找不到解决方案。

关于 SharePlum、SharePoint 集成、问题

import from lxml import etree ImportError: cannot import name etree

我在尝试将 SharePlum 与 Spyder IDE 一起使用时遇到了同样的问题。

我尝试安装、卸载和安装以下版本但没有成功 pip install shareplum pip install lxml

我安装了 Python 3.9 和 Spyder IDE（我不知道，它也安装了它自己的 Python 3.7 版本——截至 2021 年 5 月 13 日的 Spyder 版本）.. [即使 Spyder IDE 设置为搜索所有 python 包库存（例如 ../Python39/Lib/Site-Packages）对于包] Python 从其他路径提取包似乎存在 Spyder 问题。

解决方案，我已卸载所有 Python 和 Spyder IDE 安装。

然后我只安装了 Spyder IDE（它在它的 PATH 中嵌套了一个 python 安装。然后我进入了 PATH ".../Spyder/Python" 在那里你可以找到所有熟悉的 Python.exe 和其他熟悉的 Python 文件。我不得不使用这个 Python 安装来安装 Pip，然后我可以“pip install -r requirements.txt” - 它安装 etree lxml 和其他好东西，如 SharePlum 等。

这似乎成功了！

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2021-08-17T17:28:48.180

我在 Python 3.8 中使用 PyCharm IDE v2021.2 时遇到了同样的问题

对我有用的是 PyCharm，

1.  转到首选项-> Python解释器，
2.  卸载 lxml 包，
3.  关闭并重新启动 PyCharm，
4.  安装 lxml 包

不知道为什么它有效，但它确实有效。

# matlab - 使用 MATLAB R2012a 生成 2 MB 向量时出现内存不足错误

> ID：13749922
> 
> 赞同：3
> 
> 时间：2012-12-06T18:14:54.637
> 
> 标签：matlab, memory

当我尝试在 MATLAB 中执行以下命令时：

```
zero_vector = zeros( 128*128*16 ); 
```

我收到以下消息：

```
Out of memory. Type HELP MEMORY for your options. 
```

我的 Red Hat Enterprise Linux Client 5.5 版平台上没有可用的 memory 命令。无论如何，我希望我应该能够在 MATLAB 7.14.0.739 (R2012a) 中创建一个 2 MB 的零向量。关于我做错了什么有什么建议吗？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-12-06T18:15:48.450

这将生成一个大方阵。

要生成向量，请执行以下操作：

```
zero_vector = zeros( 128*128*16 , 1 ); 
```

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-12-06T18:16:06.760

您正在生成一个方阵。

尝试：

```
zero_vector = zeros(128*128*16,1) 
```

# c++ - 我如何在 linux 中获取程序的版本

> ID：13749932
> 
> 赞同：3
> 
> 时间：2012-12-06T18:15:34.913
> 
> 标签：c++, linux, windows, port

在 Windows 中，您可以执行以下操作：

```
CSystemInfo info;
this->m_strVersion = info.GetFileVersion( CFileSystemHelper::GetApplicationPath() + _T("/test.exe") ); 
```

获取版本号。

我将如何在 Linux 上的 C++ 中做到这一点？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-06T18:34:35.400

Windows 采用具有标准 API 支持的版本资源系统，Linux 和 UNIX 出于从遗留到冗余的各种原因，没有这样的高级概念。

最好的选择是查询本地打包系统（RPM、APT 等），或者尝试使用[推荐的 GNU 标准](http://www.gnu.org/prep/standards/html_node/Command_002dLine-Interfaces.html)`--version`的命令行参数执行。

Samba 工具命令行上的示例 RPM 查询`smbget`：

> ```
> # rpm -q -f /usr/bin/smbget --queryformat '%{version}\n'
> 3.0.33 
> ```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-06T18:20:17.043

您可能想要检索当前执行的可执行文件的路径。

在 Linux 上，您可以使用`/proc/`伪文件系统。阅读[proc(5)](http://www.kernel.org/doc/man-pages/online/pages/man5/proc.5.html)手册页了解更多信息。

具体来说，您可能想做类似的事情

```
char myexepath[512];
memset (myexepath, 0, sizeof(myexepath);
readlink ("/proc/self/exe", myexepath, sizeof(myexepath)); 
```

（但你真的应该检查上面的运行时错误）

如果你只是想显示一个程序的版本，你应该有一个关于它的约定。通常接受`--version`作为程序的第一个参数。

我邀请您阅读[高级 Linux 编程](http://advancedlinuxprogramming.com/)。

# google-fusion-tables - 在谷歌融合表上查找最后修改日期

> ID：13749934
> 
> 赞同：0
> 
> 时间：2012-12-06T18:15:40.917
> 
> 标签：google-fusion-tables

寻找在谷歌融合表上查找上次修改日期的方法将我带到这篇文章：

[https://groups.google.com/d/topic/fusion-tables-users-group/NVEr2TVR88I/discussion](https://groups.google.com/d/topic/fusion-tables-users-group/NVEr2TVR88I/discussion)

有没有办法在将数据与 javascript 同步之前找出数据是否已更改？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-06T19:02:10.497

最后修改日期无法通过 Fusion Tables API 获得。但是，您应该能够通过 Drive API 获得最后修改日期（每个 Fusion Tables 都是 Google Drive 中的另一个文件）。

使用带有表 id 的 drive.files.get 方法。您可以使用 API 资源管理器进行尝试：

[https://developers.google.com/apis-explorer/#p/drive/v2/drive.files.get](https://developers.google.com/apis-explorer/#p/drive/v2/drive.files.get)

首先单击右上角的按钮“使用 OAuth 2.0 授权请求”。然后，在“fileid”字段中输入融合表ID，然后单击“执行”。你应该看到所有你想要的元数据。它还将向您展示您需要在应用程序中构建的 API 调用。

# vim - 恢复交换文件后丢失的颜色方案

> ID：13749936
> 
> 赞同：19
> 
> 时间：2012-12-06T18:15:58.460
> 
> 标签：vim, colors, swap

我已经搜索了一段时间，似乎没有人遇到我的问题。我已经将 vim 设置为使用我喜欢的颜色方案，并且一切正常，直到我打开一个有交换的文件。我收到了通常的消息，询问我是否要删除它、只读或恢复它。我选择了恢复，但这样做之后，我无法让那个文件显示我想要的颜色。

我已经尝试了通常的语法：打开，重新加载 .vimrc 以及获得亮点所需的每个正常步骤。奇怪的是，这个问题只存在于我从中恢复交换的目录中。我打开的任何其他文件的颜色都照常工作，如果我重命名麻烦的文件或将其放在另一个目录中，它会很好地加载颜色。

我认为 vim 必须将其路径存储在某个地方，但我不知道在哪里。我尝试删除 .viminfo 但什么也没做。非常感谢任何输入。

* * *

## 回答 #1

> 赞同：21
> 
> 时间：2013-03-22T02:18:21.987

抱歉，我是 Stackoverflow 的新手。我认为这对于我自己的问题的回答比评论更有用：

:colo 输出 "torte" 和 se ft? 输出“filetype =”我在其他文件上尝试了相同的命令，并且 se ft? 输出“文件类型=cpp”。我搜索了如何设置文件类型并**设置 filetype=cpp 解决了这个问题**。感谢 Balthamos 为我指明了正确的方向！

# iphone - application:openURL:sourceApplication:annotation: 通知中心键？

> ID：13749942
> 
> 赞同：2
> 
> 时间：2012-12-06T18:16:26.453
> 
> 标签：iphone, nsnotificationcenter

我正在开发一个允许用户使用 URL Schema 从 Safari 获取一些信息的扩展。我之前使用过 application:openURL:sourceApplication:annotation: 从 URL 获取信息，但是我试图为用户节省额外的步骤，即必须将其添加到他们的项目并将信息发送到我的扩展程序。

我认为 UIApplicationDidBecomeActiveNotification 可能会给我一些见解，但没有这样的运气。是否可以使用不同的 NotificationKey，或者我需要让开发人员实现它吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-06T18:56:42.470

我认为您使用的是正确的通知，但是您的 `application:openURL:sourceApplication:annotation:`方法不会被调用，因为它必须位于真正的 AppDelegate 对象上。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-06T18:54:24.820

没有记录在案的通知，在我的测试中我也没有发现未记录的通知。

# python - numpy数组的项目之间的最小二乘差

> ID：13749943
> 
> 赞同：4
> 
> 时间：2012-12-06T18:16:33.720
> 
> 标签：python, numpy

我刚开始学习一些 numpy，因为[高性能计算所有可能组合（n 个列表）的最小二乘差](https://stackoverflow.com/questions/13731200/high-performance-calculation-of-least-squares-difference-from-all-possible-combi/13731622#comment18867669_13731622)：

现在我被计算困住了，可以使用一些帮助。

我有一个如下所示的 numpy 数组对象：

```
>>> items
array([[ 246, 1143, 1491, ..., 1167,  325, 1158],
       [ 246, 1143, 1491, ..., 1167,  519, 1158],
       [ 246, 1143, 1491, ..., 1167,  507, 1158],
       ..., 
       [1491, 1143,  246, ..., 1167,  325, 1158],
       [1491, 1143,  246, ..., 1167,  519, 1158],
       [1491, 1143,  246, ..., 1167,  507, 1158]]) 
```

我想得到他所有成员中具有最小二乘差的数组的数量，一个numpythonic版本：

```
for num,item in enumerate(items): #Calculate for each list of items
      for n in range(len(item)):
        for i in range(n, len(item)):
          dist += (item[n]-item[i])**2 #Key formula
          if dist>min_dist: #This is a shortcut
              break
          else:
              continue
          break               
      if min_dist is None or dist < min_dist:
        min_dist = dist
        best = num #We get the number of the combination we want 
```

我会很感激任何提示。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-06T18:54:48.193

初始化你的`NxM`数组：

```
>>> import numpy as np
>>> items = np.random.random_sample((10,3)) 
```

计算每个维向量的所有元素之间的平方`N` `M`和，并将结果存储在列表中：

```
>>> sq = [(np.subtract.outer(item,item) ** 2).sum() for item in items] 
```

求所有元素之间平方和最小的向量的索引：

```
>>> best_index = np.argmin(sq) 
```

或者，为了避免中间列表：

```
best = np.inf
best_index = None
for i,item in enumerate(items):
    ls = (np.subtract.outer(item,item) ** 2).sum()
    if ls < best:
        best = ls
        best_index = i 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-06T18:42:16.667

```
import numpy as np
[(lambda(x):np.square(np.dot(x,-1*x)))(x) for x in items] 
```

# javascript - 缩略图周围的灯箱 2 边框

> ID：13749944
> 
> 赞同：0
> 
> 时间：2012-12-06T18:16:37.207
> 
> 标签：javascript, jquery, css

嘿，伙计们，我目前正在尝试使用 2 个灯箱，并且一切正常。然而，我正在尝试 2 弄清楚的是我如何获得像[http://lokeshdhakar.com/projects/lightbox2/](http://lokeshdhakar.com/projects/lightbox2/)这样的边框，他们在示例中得到了改变颜色的边框。对此的任何帮助都会很棒。

html:

```
<div class = "image1">
<a href="images/image1.jpg" rel="lightbox[group]"><img src="images/image1t.jpg" /></a>
</div> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-06T18:23:20.943

在你的锚上设置一个 css3 过渡属性，然后在 :hover 属性上，效果将“动画”。

```
.image1 a {
-webkit-transition: all 0.2s ease-out;
-moz-transition: all 0.2s ease-out;
-ms-transition: all 0.2s ease-out;
-o-transition: all 0.2s ease-out;
transition: all 0.2s ease-out;
}

.image1 a:hover {
background-color: #8ad459;
-webkit-box-shadow: 0 -1px 0 0 rgba(255, 255, 255, 0.2), 0 1px 4px 0 rgba(0, 0, 0, 0.5);
-moz-box-shadow: 0 -1px 0 0 rgba(255, 255, 255, 0.2), 0 1px 4px 0 rgba(0, 0, 0, 0.5);
box-shadow: 0 -1px 0 0 rgba(255, 255, 255, 0.2), 0 1px 4px 0 rgba(0, 0, 0, 0.5);
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-06T18:23:01.547

试试下面的代码

```
.image1 a {
background: none repeat scroll 0 0 rgba(255, 255, 255, 0.1);
border-radius: 4px 4px 4px 4px;
box-shadow: 0 1px 4px 0 rgba(0, 0, 0, 0.5);
display: block;
float: left;
line-height: 1em;
margin-right: 40px;
padding: 7px;
transition: all 0.2s ease-out 0s;
}
.image1 a:hover {
background-color: #8AD459;
} 
```

# android - Android OpenGL ES 凹凸映射

> ID：13749947
> 
> 赞同：0
> 
> 时间：2012-12-06T18:16:46.730
> 
> 标签：android, opengl-es

所以，我已经在网上搜索，寻找有关如何做到这一点的信息。到目前为止，我想出的只是....nohting。

[任何人都有比http://www.paulsprojects.net/tutorials/simplebump/simplebump.html](http://www.paulsprojects.net/tutorials/simplebump/simplebump.html)更好的起点

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-06T21:51:37.577

If you are targeting OpenGL 2.0 is in fact quite easy and you just need a normal map, and a shader that handles the lighting equation per pixel. I found this for you: [http://www.learnopengles.com/android-lesson-four-introducing-basic-texturing/](http://www.learnopengles.com/android-lesson-four-introducing-basic-texturing/)

# qt - Qt 错误 - 可能是错误使用的指针问题

> ID：13749954
> 
> 赞同：0
> 
> 时间：2012-12-06T18:17:07.790
> 
> 标签：qt

有人可以帮助解决此错误吗？

```
QString *description = new QString;
description = *dialog.descriptionEdit->toPlainText(); 
```

错误：'*QTextEdit::toPlainText() const()' 中的 'operator*' 不匹配

当我尝试时：

```
QString *description = new QString;
description = dialog.descriptionEdit->toPlainText(); 
```

错误：无法在分配中将“QString”转换为“QString*”

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-06T18:20:18.750

你需要这个

```
*description = dialog.descriptionEdit->toPlainText(); 
```

否则，您将分配给**指针**而不是它指向的对象。`description`是指向 的指针`QString`，`*description`是`QString`.

# android - Android - 如何让 AutoCompleteTextView 保持焦点

> ID：13749956
> 
> 赞同：5
> 
> 时间：2012-12-06T18:17:16.217
> 
> 标签：android, textview

我有一个非常复杂的布局，它有多种类型的视图，并且我有一个 AutoCompleteTextView 可以保持焦点。我有 relativeLayouts，我一直设置为 GONE，然后当我展开它们时，屏幕会重新回到 autoCompleteTextView，当你在视图下方时这很烦人。我怎样才能让 AutocompleteTextView 保持焦点而不将其设置为无法获得焦点，因为当你这样做时，你不能点击它来写它。我尝试将其设置为不聚焦并添加一个 onclick 侦听器，我基本上说如果不聚焦则聚焦但没有用。我希望能够拥有它，这样我就可以使用没有焦点的 AutoCompleteTextView 开始活动，然后当有人单击它时，他们可以在其中写入，完成后它会失去焦点。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-06T18:40:33.753

把它放在它的`parents layout (like linearLayout)`：

`android:focusable="true" android:focusableInTouchMode="true"`

`LinearLayout`当用户加入您的活动并且键盘不会显示时，这种方式将成为焦点。

# scala - 不使用lazy val时程序不会终止

> ID：13749957
> 
> 赞同：0
> 
> 时间：2012-12-06T18:17:16.823
> 
> 标签：scala

这是欧拉项目第14题的解决方案。

但奇怪的是：当 val answer 未声明为惰性时，该程序不会终止。虽然 val 是惰性的，但解决方案是在几秒钟内产生的，没有那个 java vm 会长时间（可能永远）进入 100% CPU 使用率。

```
package euler

object Problem14 {
//Which starting number, under one million, produces the longest chain?

    def startingNumbersFrom(n: Long): Stream[Long] = {
        if (n == 1) 
            Stream(1)
        else if (n % 2 == 0)
            n #:: startingNumbersFrom(n/2)
        else
            n #:: startingNumbersFrom(3*n+1)
    }

            //This has to be lazy for program to terminate
    lazy val answer = (
        for (n <- 1 to 1000000) yield 
        (n, startingNumbersFrom(n).length)
    ).maxBy(x=> x._2)._1

    def main(args: Array[String]) = {
        println(answer)
    }
} 
```

直觉上我可以猜到伴随对象陷入了 init/tear down 循环，但不清楚为什么会发生这种情况。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-06T21:06:51.187

该程序将终止，`val answer = ...`但它可能会在它之前耗尽资源。更改`1000000`为较小的数字，`100`以查看它是否实际终止。

没有`answer`as a的原因`lazy val`是因为它的评估方式。`length`调用`startingFromNumbers`强制它评估一个值。何时`val answers`是严格的，整个计算`startingFromNumbers`发生在每次迭代中。对于像 100 这样的小值，这种低效率不会被注意到，但在较大的值下，每次迭代重新计算似乎会永远运行。使用`lazy val answer`结果`startingFromNumbers`被记忆以避免重复计算。因此，正如您发现和 Ryan 回答的那样，让他们都变得懒惰或让他们都变得严格。

减少问题会有所帮助，添加一个`println(n)`作为第一个调用`startingFromNumbers`有助于可视化这一点。

```
scala> val answer = (for (n <- 1 to 3) yield (n, startingNumbersFrom(n).length))
1
2
1
3
10
5
16
8
4
2
1
answer: scala.collection.immutable.IndexedSeq[(Int, Int)] = Vector((1,1), (2,2), (3,8))

scala> val answer = (for (n <- 1 to 3) yield (n, startingNumbersFrom(n)))
1
2
3
answer: scala.collection.immutable.IndexedSeq[(Int, Stream[Long])] = Vector((1,Stream(1, ?)), (2,Stream(2, ?)), (3,Stream(3, ?))) 
```

在第一个示例中，我们可以看到所有值都是在每次迭代时计算的。在第二个示例中，仅计算第一个值，其余的被延迟到需要时，即懒惰。如果 `answer(i)._2`使用 进行评估，`toList`我们可以看到与第一个示例中相同的数字。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-06T18:35:16.167

我能够在 Scala 2.9.2 上重现该问题。但是，如果我将您的代码更改为使用 List[Int] 而不是 Stream[Int]，那么非惰性版本根本不会与 CPU 挂钩。

# objective-c - 在 iOS 中本地化数字

> ID：13749961
> 
> 赞同：7
> 
> 时间：2012-12-06T18:17:29.123
> 
> 标签：objective-c, ios, localization, nsnumberformatter, nslocale

简单地说，我有一个正整数 [9, 393, 3, 993]，我想将它本地化为某种语言 [٩, ٣٩٣ ,٣ ,٩٣٩]。

如果我使用`NSNumberFormatter`，它将根据用户的语言环境对号码进行本地化。但是，我想覆盖它并选择任何语言环境来将数字转换为。

我尝试了以下方法，但**没有**奏效：

```
// user locale is @"en"
NSNumberFormatter* formatter = [NSNumberFormatter new];
[formatter setNumberStyle:NSNumberFormatterNoStyle];
[formatter setLocale:[[NSLocale alloc] initWithLocaleIdentifier:@"ar"]];

[formatter setMinimumIntegerDigits:padding];
return [formatter stringFromNumber:@(num)]; 
```

返回的字符串是英文的。

* * *

请注意，我有一个非常相似的代码片段`NSDateFormatter`，但它按预期工作。该`NSDateFormatter`对象尊重设置的语言环境。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-07T18:52:24.223

似乎我遇到了一个非常特殊的情况，应用程序的语言环境会吓坏。

我正在使用以下内容更改应用程序的默认语言环境：

```
[[NSUserDefaults standardUserDefaults] setObject:@[@"ar"] forKey:@"AppleLanguages"]; 
```

然后，我试图获取首选语言并从中创建一个语言环境对象：

```
NSString* langPrefix = [NSLocale preferredLanguages][0]; 
```

最后，从返回的对象创建一个新`NSLocale`对象。在测试代​​码时，我会在应用程序内更改语言，然后通过 Xcode 关闭应用程序。我假设`NSUserDefaults`不会同步，但即使我调用该`synchronize`方法，它仍然会搞砸。

底线是，测试本地化应该通过部署应用程序来完成，并且在设备与 Xcode 断开连接之后，应用程序将正确地运行所有生命周期阶段。

# java - 用于西班牙语文本的 apache mahout

> ID：13749965
> 
> 赞同：1
> 
> 时间：2012-12-06T18:17:38.970
> 
> 标签：java, apache, mahout

有谁知道 Apache Mahout 是否适用于西班牙语文本？我需要对西班牙语的报纸文章进行一些聚类，并且没有很多工具可以做到这一点。我认为 Mahout 是一个很酷的框架来做这件事，但是它在西班牙语文本上工作好吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-07T07:31:48.307

为什么不？您可以使用脚本`seq2sparse`命令`bin/mahout`并使用选项指定相应的 Lucene 分析器 ( `org.apache.lucene.analysis.es.SpanishAnalyzer`) `-a`。参见 Mahout in Action 一书的第 8 章（第 199-200 页...）。

除此之外，您还可以使用现有的分析器编写自己的分析器。本书包含大量示例，您可以[在存储库](https://github.com/tdunning/MiA)中找到源代码。

# c# - 以另一个类的形式从 resx 访问资源

> ID：13749966
> 
> 赞同：0
> 
> 时间：2012-12-06T18:17:42.457
> 
> 标签：c#, winforms, embedded-resource, resx

所以我有一个 Windows 窗体 dll。有一个 MainForm 类，它创建一个 ComponentResourceManager 并访问存储在该表单的 resx 中的图像资源。如果我直接实例化该类，一切都会很高兴。

如果我将一个新类添加到同一个命名空间（实际上我只是将它添加到与 MainForm 类相同的 .cs 文件中）并且我尝试以相同的方式访问这些图像资源，我得到一个关于给定资源不存在的错误文化。检查当前的线程文化（和 UI 文化）它们对于两者都是相同的。

我需要跳过一些额外的圈子才能从另一个类访问表单的资源吗？

示例代码

```
namespace myNamespace
{
  public class extraClass
  {
    public extraClass()
    {
      System.ComponentModel.ComponentResourceManager resources = new System.ComponentModel.ComponentResourceManager(typeof(myForm));
      System.Drawing.Image img = ((System.Drawing.Image)(resources.GetObject("StatusButton.Image")));
      MessageBox.Show(img.ToString());
    }
  }
  public class myForm : Form
  {
    public myForm()
    {
      System.ComponentModel.ComponentResourceManager resources = new System.ComponentModel.ComponentResourceManager(typeof(myForm));
      System.Drawing.Image img = ((System.Drawing.Image)(resources.GetObject("StatusButton.Image")));
      MessageBox.Show(img.ToString());
      InitializeComponent();
    }
  }
} 
```

在此示例中，实例化 myForm 会很高兴，但 extraClass 不是，并且失败并出现关于无法在给定文化中找到资源的错误&我是否确保资源被嵌入（它是）。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-06T19:18:35.407

将文件添加到项目的资源中。在名为 extraClass 的类中创建名为 myForm 的类的实例。

# ajax - jQuery - 如何为 ajax 添加的元素调用/绑定 jquery 事件？

> ID：13749968
> 
> 赞同：0
> 
> 时间：2012-12-06T18:17:45.683
> 
> 标签：ajax, jquery

我正在开发 jQuery 插件[Tag-it！](http://aehlke.github.com/tag-it/examples.html)带有一个产品输入表单，用于为不同类型的产品（笔记本电脑、电视、小工具等）分配属性。

概念如下：添加新产品时，首先，用户从下拉列表中选择要添加的产品的产品类别，并触发 jQuery .change() 事件进行 ajax 调用以获取所有相关的属性到那个类别。例如，如果我添加一台电视，我希望我的 ajax 调用为英寸、面板类型、hdmi 填充 3 个输入，而如果我添加一台笔记本电脑，我希望这些输入是 cpu、ram、hdd、屏幕等。标记-它！使用单词列表（在我的例子中是属性）和用于选择单词集的输入字段。就我而言，对于每种类型的属性，我想填充一个单独的输入字段并将其分配/绑定到/应用 tagit 插件（对不起，我不知道如何解释它）。

Javascript：

```
<script src="../js/tag-it.js" type="text/javascript" charset="utf-8"></script>
<script>
        $(function(){
            // Sample1: var sampleTags1 = ["red", "green", "blue"]; 
            // Sample2: var sampleTags2 = ["lcd", "plasma", "tft"]; 

            var sampleTags1 = [<?=createTags('name', 'tags', 1)?>]; 
            // createTags($name, $tags, $id) is a PHP function that returnss a list of tags for a given attribute
            // Question 1: how do I place this here after a new input is added to the DOM?
            $('#myTags').tagit();

            //Question 2: for each input added to the DOM I need also to add this block in the javascript:
            $('#allowSpacesTags1').tagit({itemName: 'item1', fieldName: 'tags1',
                availableTags: sampleTags1, allowSpaces: true
            }); 

            $('#removeConfirmationTags').tagit({
                availableTags: sampleTags,
                removeConfirmation: true
            });
        });

$(document).ready(function() {
    $('#cat_id').change(function(){
        $.post('../includes/ajax.php', {   
          cat_id : $(this).find("option:selected").attr('value')}, function(data) {
          $("#tagholder").html(data);
        });
    });
});

</script> 
```

Ajax 为每个调用返回以下内容：

```
<ul id="allowSpacesTags'.$row['ctid'].'"></ul> // $row['ctid'] is the ID for that attribute 
```

它表示用于输入标签/属性的输入字段。

在有任何误解之前，我不是在问如何在 PHP 中做到这一点。我的问题是关于我可以动态添加像 sampleTags1 这样的 var 并且还为通过 ajax 添加到 DOM 的每个新输入调用 tagit() 的方式。如果我的问题不够清楚，我会尽力提供任何必要的信息。请查看代码注释中的问题。谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-06T18:24:00.507

[http://api.jquery.com/live/](http://api.jquery.com/live/)

使用 .live( events, handler(eventObject) ) 动态添加内容时，您无需附加或重新附加事件

编辑我刚刚注意到 live 已被弃用，而不是你应该使用

.on() [http://api.jquery.com/on/](http://api.jquery.com/on/)

# list - 部分展平嵌套列表

> ID：13749970
> 
> 赞同：0
> 
> 时间：2012-12-06T18:18:00.583
> 
> 标签：list, haskell, nested-lists

Prelude 中是否有删除外部“[]”的功能？例如，在这种情况下：

```
f [[[1,0,0]],[[1,0,0]]] = [[1,0,0],[1,0,0]] 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-12-06T18:19:17.623

我相信`concat :: [[a]] -> [a]`做你正在寻找的

请记住，您始终可以使用[hoogle](http://www.haskell.org/hoogle/?hoogle=[[a]]+-%3E+[a])根据函数返回或接收的参数来查找函数

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-12-06T18:19:56.230

您可以使用`concat`which 将列表列表展平为单个列表：

```
concat [[[1,0,0]],[[1,0,0]]] 
```

`concat`也在`join`Control.Monad 中用于列表，因此您可以使用它：

```
join [[[1,0,0]],[[1,0,0]]] 
```

# google-analytics - 有没有办法通过 Google Analytics 访问者通过 Flipboard 访问我的网站来跟踪/记录？

> ID：13749980
> 
> 赞同：0
> 
> 时间：2012-12-06T18:18:55.510
> 
> 标签：google-analytics, analytics, flipboard

我一直在浏览我的 Apache 日志文件，并注意到提到的点击

```
FlipboardProxy/1.1; +http://flipboard.com/browserproxy 
```

有没有办法通过谷歌分析跟踪/识别这些用户，以便我可以了解我的访问百分比是通过 Flipboard 进行的？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-07T22:39:02.937

从我在flipboard上读到的：

> Flipboard 使用代理服务来获取、验证和准备网站的某些元素，以便通过 Flipboard 应用程序呈现。

检索您网站的某些部分以将其显示在flipboar 中，它们实际上并不是对您网站的真实访问。

但是，如果您仍然想在分析中跟踪这些请求，那么您需要编写一个 php 来嗅探用户代理并触发对分析的 gif 请求。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-09-12T02:13:10.977

沿着这些路线的东西可能会在这里结束。现在它仅在快照中显示数据。

[http://ripl.io/flipboard-analytics/](http://ripl.io/flipboard-analytics/)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-07T20:41:29.893

如果他们没有出现在[浏览器和操作系统报告](http://support.google.com/analytics/bin/answer.py?hl=en&answer=1144432)中；他们可能没有运行 javascript 和/或阻止 GA。

# iphone - 带有多个参数的objective-c switch case

> ID：13749981
> 
> 赞同：25
> 
> 时间：2012-12-06T18:18:54.990
> 
> 标签：iphone, objective-c, ios

可能是一个基本问题，但我想在 switch case 语句中使用多个参数来减少一些代码。可能的？语法正确吗？

```
switch (myInteger){
            case (1):   //here I would like to apply multiple arguments as case (1 || 3 || 5)
                <#statements#>
                break;
            case (2):
                <#statements#>
                break;
            default:
                break; 
```

* * *

## 回答 #1

> 赞同：92
> 
> 时间：2012-12-06T18:21:52.363

`case`您可以在彼此下方使用多个s。

```
switch (myInteger) {
    case 1:
    case 3:
    case 5:
        // statements
        break;
    case 2:
        // statements
        break;
    default:
        // statements
        break;
} 
```

* * *

## 回答 #2

> 赞同：15
> 
> 时间：2012-12-06T18:21:57.393

```
case 1:
case 3:
case 5:
    statements;
    break;
case 2:
    statements;
    break;
default:
    break; 
```

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2016-11-24T07:09:27.853

对于**Swift 3**，我想提一下修改

```
switch some value to consider {
case 1: //single argument
  print("ABC")

case 2,3: // multiple arguments
  print("KLM")

default:
  print("XYZ")
} 
```

希望它可以帮助你。谢谢

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2017-12-12T03:41:26.017

switch case 必须在 main 方法中声明

句法

```
Switch (variable r expression)
{ 
   Case 1 : 
     Body ; 
   Break

   Case 2 :
     Body;
   Break;

   Default :
     Body ;
   Break;
} 
```

# networking - 端口高于 65535 的理论网络协议

> ID：13749984
> 
> 赞同：0
> 
> 时间：2012-12-06T18:19:07.837
> 
> 标签：networking, network-protocols, iana

解决工作中的争论。理论上，是否有可能创建一个端口高于 65535 的网络协议并获得[IANA](http://www.iana.org/)的批准？

如果不是，为什么不呢？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-06T18:31:24.610

如果您在 IP 之上使用 TCP 或 UDP，则不会。TCP 和 UDP 都只使用 16 位作为端口号。如果您使用的是其他协议套件，例如 IPX/SPX，那么它取决于该协议。如果您正在制定自己的协议，那么您可以做任何您想做的事情。获得 IANA 批准是另一回事。

[http://en.wikipedia.org/wiki/Transmission_Control_Protocol](http://en.wikipedia.org/wiki/Transmission_Control_Protocol) http://en.wikipedia.org/wiki/User_Datagram_Protocol

2^16 = 65536 个不同的端口

由于计算机编号从 0 开始计数，因此最大值为 65535。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-12-06T18:31:32.043

是的。可以使用任意数量的端口创建一个。

让 IANA（以及 IETF、ISO 和其他相关人员）批准它只是让足够多的人使用您的精彩新发明的问题。这是极不可能的，但在理论上并非不可能。

# android - MediaPlayer 使 APP 无响应

> ID：13749996
> 
> 赞同：2
> 
> 时间：2012-12-06T18:19:48.997
> 
> 标签：android, media-player

我有一个使用 MediaPlayer 播放视频内容的活动。该活动通过在上/下按键上播放不同的 HLS 视频流来模拟电视设备。观看一段视频较长时间（大约 > 15 分钟）后，当我按任意键时，APP 没有响应并进入强制关闭屏幕。这是我在每个关键事件上/下所做的事情：

```
 //I'm creating the media player object only once, after every channel switch i do:
    if(mMediaPlayer.isPlaying()) {
        mMediaPlayer.stop();
        mMediaPlayer.reset();
    }

    try {
        mMediaPlayer.setDataSource(app.channels.get(current_index).streaming_url);
        mMediaPlayer.setDisplay(holder);
        mMediaPlayer.setScreenOnWhilePlaying(true);
        mMediaPlayer.prepareAsync();
    }
    catch(Exception e) {
        e.printStackTrace();
    }

    //After this I have an onPreparedListener and mMediaPlayer.start() 
```

我的假设是它正在吃掉设备的内存，但我不明白我错了什么