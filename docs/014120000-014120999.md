# StackOverflow 问答 14120000-14120999

# mobile - 如何为 joomla 网站构建原生移动应用程序

> ID：14120000
> 
> 赞同：4
> 
> 时间：2013-01-02T09:59:44.950
> 
> 标签：mobile, joomla

我即将使用带有phonegap的html5构建一个移动应用程序。这样我就可以轻松地将它安装在任何平台上。安卓、黑莓或 ios。

我希望这个应用程序能够执行 CRUD - 与我的 joomla 网站密切相关。

Joomla 网站已经完成，它是一个社交网络。我需要这个应用程序能够检索个人资料图片、消息等信息，然后能够上传图片、发送消息和使用地理定位 api。

我的问题是我不知道如何让应用程序连接或与我的 Joomla 数据库通信。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-02T18:24:08.843

好吧，我找到了答案，以防万一有人需要。要使用Joomla作为服务器构建移动设备，您需要的是 1\. Jquery 2\. 在您的Joomla站点上构建扩展 3\. 使用jquery ajax方法+ Joomla的本机方法提供Json格式的数据，您可以构建一个api来从您的移动应用程序向您的 joomla 网站发送和接收数据。

# android - 调用了 gcm onMessage() 但数据为空...？

> ID：14120001
> 
> 赞同：0
> 
> 时间：2013-01-02T09:59:48.067
> 
> 标签：android, asp.net, google-cloud-messaging

我在 android 中使用 GCM，我通过 asp.net 服务器将数据发送到设备，如下代码所示。

```
public void SendCommandToPhone(String sCommand)
    {
        String DeviceID = "";
        DeviceID = "APA91bF9SSDEp-UPU8UwvctGt5ogfrSw0UdilTWlCujqItHcr-eiPJ31ZDI-IeqTbLr92ZOPF31bXtB1_5gNEPHAq82N4ji0stm4cy9U0Yuk0Awhjl9PS02okuc9rRhJobkgOt-ofm5Br0KR-Y";
        WebRequest tRequest;
        tRequest = WebRequest.Create("https://android.googleapis.com/gcm/send");
        tRequest.Method = "post";
        //tRequest.ContentType = "application/json";
        tRequest.ContentType = "application/x-www-form-urlencoded";
        tRequest.Headers.Add(string.Format("Authorization: key={0}", "AIzaSyBgCKDhyHnRmmu8jCfmupHVJA8cVkIa-XEZS"));
        String collaspeKey = Guid.NewGuid().ToString("n");
        String postData = string.Format("registration_id={0}&data.message={1}&collapse_key={2}", DeviceID, "YourMessage", collaspeKey);
        Byte[] byteArray = Encoding.UTF8.GetBytes(postData);
        tRequest.ContentLength = byteArray.Length;
        Stream dataStream = tRequest.GetRequestStream();
        dataStream.Write(byteArray, 0, byteArray.Length);
        dataStream.Close();
        WebResponse tResponse = tRequest.GetResponse();
        dataStream = tResponse.GetResponseStream();
        StreamReader tReader = new StreamReader(dataStream);
        String sResponseFromServer = tReader.ReadToEnd();
        tReader.Close();
        dataStream.Close();
        tResponse.Close();
    } 
```

并在应用程序 onMessage 代码如下

```
@Override
protected void onMessage(Context context, Intent intent) {
String message = intent.getStringExtra("message");
} 
```

当我调用 asp.net 服务时，它在调试中正确调用，但这里的**消息**字符串为空。

任何人都可以帮忙，我哪里出错了......

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-02T10:43:37.050

您的消息应使用以下参数发布：

```
'registration_ids' => DeviceID ,
'data' => array( "notification" => YOUR_JSON_MESSAGE_STRING), 
```

在安卓端，：

```
Bundle data = intent.getExtras();
data.getString("notification") 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-02T10:08:27.827

在应用程序中试试这个

```
@Override
protected void onMessage(Context context, Intent intent) {
Bundle extras = intent.getExtras();
String message = extras.getString("message");
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-12-13T07:50:21.277

可能的原因是提供给参数的“消息”与服务器中定义的内容不完全相同。

您的代码：

```
@Override
protected void onMessage(Context context, Intent intent) {
     String message = intent.getStringExtra("message");
} 
```

但在服务器中，例如 PHP 服务器：

```
$msg = array("mess" => "Hellow World!");
sendNotif($msg); 
```

在 PHP 文件中查看 mess!= 消息，除非您将代码更改为

```
 @Override  
 protected void onMessage(Context context, Intent intent) {
      String message = intent.getStringExtra("mess");
 } 
```

# xml - XSLT 分组/合并子项（使用密钥）

> ID：14120003
> 
> 赞同：2
> 
> 时间：2013-01-02T10:00:00.503
> 
> 标签：xml, xslt, merge, nodes, xslt-grouping

我试图了解如何使用我已经编写的代码来推断解决方案。

为了简化，我将首先解释我想要做什么以及到目前为止我得到了什么。

假设我在 XSLT 中有一个 XML 变量，其中包含几个具有相同标题属性的节点。

使用[@Dimitre Novatchev 解决方案](https://stackoverflow.com/questions/11900006/group-merge-childs-of-same-nodes-in-xml-xslt)，我设法将它们组合到一个节点中。

所以如果我有：

```
<t>
    <GroupData ID="xxx" Key="4" Temp="yyy">
        <ItemData ID="zzz" Value="3"/>
    </GroupData>
    <GroupData ID="yyy" Key="4" Temp="yyy">
        <ItemData ID="abc" Value="3"/>
    </GroupData>
    <GroupData ID="zzz" Temp="yyy">
        <ItemData ID="pqr" Value="1982"/>
    </GroupData>
    <GroupData ID="xxx" Key="4" Temp="yyy">
        <ItemData ID="www" Value="1982"/>
    </GroupData>
    <GroupData ID="yyy" Key="4" Temp="yyy">
        <ItemData ID="def" Value="1982"/>
    </GroupData>
    <GroupData ID="zzz" Temp="yyy">
        <ItemData ID="tuv" Value="1982"/>
    </GroupData>
</t> 
```

使用以下密钥后

```
<xsl:key name="kGDByIdKey" match="GroupData" use="concat(@ID, '+', @Key)"/> 
```

我会得到：

```
<t>
   <GroupData ID="xxx" Key="4" Temp="yyy">
      <ItemData ID="zzz" Value="3"/>
      <ItemData ID="www" Value="1982"/>
   </GroupData>
   <GroupData ID="yyy" Key="4" Temp="yyy">
      <ItemData ID="abc" Value="3"/>
      <ItemData ID="def" Value="1982"/>
   </GroupData>
   <GroupData ID="zzz" Temp="yyy">
      <ItemData ID="pqr" Value="1982"/>
      <ItemData ID="tuv" Value="1982"/>
   </GroupData>
</t> 
```

现在我想稍微修改一下，我希望能够根据我的决定合并/组合标题。考虑到这一点，在上面的示例中，我想将 xxx 和 zzz 定义为同一个组，尽管它们使用不同的标题（极端情况 - 在我的工作区中，我将它们定义为相同 - 我可能有更多情况，例如这）。

如果您能告诉我一般应该采取什么方向，我将不胜感激（我想我需要修改我的密钥或使用替代方法 - generate-id 或其他方法）。

我发现自己只实施了需要大量不必要努力的糟糕解决方案。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-03T02:24:36.090

我猜这是 XSLT1，这是一种耻辱，因为它在 XSLT2 中看起来会更好，但无论如何你基本上需要确保你想要组合在一起的节点最终具有相同的键

```
<xsl:key name="kGDByIdKey" match="GroupData" use="concat(@ID, '+', @Key)"/> 
```

如果事物具有相同的@ID 和@key，则它们只会获得相同的使用属性

如果您将其更改为

```
<xsl:key name="kGDByIdKey" match="GroupData[not(@ID='xxx')]" use="concat(@ID, '+', @Key)"/>
<xsl:key name="kGDByIdKey" match="GroupData[@ID='xxx'] use="concat('zzz', '+', @Key)"/> 
```

然后具有 ID 的节点`xxx`将被索引（并因此分组）`zzz`（或者当您从节点构造查找值时，您当然需要进行类似的更改）

如果您使用的是 xslt 2，您可以使用更简单的功能样式，当扩展到多个此类更改时，它可能不那么笨拙

```
<xsl:key name="kGDByIdKey" match="GroupData" use="concat(replace(@ID,'^xxx$','zzz'), '+', @Key)"/> 
```

# android - Android：用粗体或比默认的STRIKE_THRU_TEXT_FLAG粗线删除文本

> ID：14120004
> 
> 赞同：3
> 
> 时间：2013-01-02T10:00:12.083
> 
> 标签：android, android-layout

我正在使用以下罢工文本。

```
 viewHolder.price_red.setPaintFlags(viewHolder.price_red
                    .getPaintFlags() | Paint.STRIKE_THRU_TEXT_FLAG); 
```

它的工作，但我想增加删除线的大小。

任何人都可以帮助我如何增加线的大小？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-02T10:07:43.693

您无法更改删除线的粗细。

正如您从[文档](http://developer.android.com/reference/android/graphics/Paint.html#STRIKE_THRU_TEXT_FLAG)中看到的那样，它只是一个标志。无论是开还是关。

虽然有几个选项（更多的黑客而不是解决方案）：

1.  使文本加粗或描边。这也会自动中划删除线，使其更明显

2.  用 手动画线`drawLine`。（虽然这真的很难准确地做到）

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-02T11:36:11.443

这不能直接实现，因为 Android 不提供任何 API。

现在，您将不得不采用自定义方式来绘制较粗的线.. 1) DrawLine 2) 在 EditText 上使用 Line Image

我尝试过使用 a`EditText`和 a `ImageView`under a `RelativeLayout`，它对我来说效果很好。

XML 代码：

```
 <RelativeLayout
        android:layout_width="match_parent"
        android:layout_height="wrap_content" >

        <EditText
            android:id="@+id/etStrike"
            android:layout_width="match_parent"
            android:layout_height="wrap_content"
            android:inputType="textPersonName"
            android:text="Strike Thru Text Here"
            android:textColor="@color/blacktext"
            android:textSize="20sp" />

        <ImageView
            android:id="@+id/ivStrike"
            android:layout_width="wrap_content"
            android:layout_height="6dp"
            android:layout_centerInParent="true"
            android:background="@color/blacktext" />
    </RelativeLayout> 
```

JAVA代码：

```
 EditText etStrike = (EditText)findViewById(R.id.etStrike);
    ImageView ivStrike = (ImageView)findViewById(R.id.ivStrike);

    float textSize = etStrike.getTextSize()/2;
    int textLength = etStrike.getText().length();
    int totalLengthApprox = (int) (textLength * textSize)-textLength;
    int height = 6; // YOUR_REQUIRED_HEIGHT

    RelativeLayout.LayoutParams param = new RelativeLayout.LayoutParams(totalLengthApprox,height);
    param.addRule(RelativeLayout.CENTER_VERTICAL|RelativeLayout.ALIGN_PARENT_LEFT);
    param.setMargins((int)textSize, 0, 0, 0);
    ivStrike.setLayoutParams(param); 
```

我只测试了几个`TextSize`，`Device Resolutions`最重要的是，这仅适用于**单行 EditText**对于多行逻辑变得更加复杂。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2017-07-19T09:37:08.667

以下是如何去做：使用图层列表并放置作为您的文本视图背景。在这里我假设你的 textviews 背景是白色的 (#FFFFFF)

在drawables文件夹中创建一个名为strikethru.xml的文件：

```
 <?xml version="1.0" encoding="utf-8"?>
<layer-list xmlns:android="http://schemas.android.com/apk/res/android">
    <item>
        <shape android:shape="rectangle">
            <solid android:color="#FFFFFF"/> 
        </shape>
    </item>
    <item>
        <shape android:shape="line">
            <stroke android:width="1dp"
                android:color="#8d8d8d"/> <!-- adjust color you want here -->
        </shape>
    </item>
</layer-list> 
```

然后在你的文本视图中这样做：

```
 <TextView
                                android:id="@+id/tv_toolbar_prod_price"
                                android:layout_width="wrap_content"
                                android:layout_height="wrap_content"

                                android:paddingRight="3dp"
                                android:text="1,290 B"      

android:background="@drawable/strikethru_line"
                                android:textColor="#070707"
                                android:textSize="13sp" /> 
```

3dp 的填充权使删除线更加明显。

# .net - 为什么客户端/服务器在 LAN 上比在本地运行更快？

> ID：14120005
> 
> 赞同：2
> 
> 时间：2013-01-02T10:00:12.020
> 
> 标签：.net, performance, sockets

我编写了一个快速应用程序来使用 .Net 测试一些套接字 IO 性能。我正在向服务器发送消息并接收响应。我正在使用线程等。

我发现奇怪的是，当我在本地运行客户端和服务器时，发送和接收 100 000 个请求和响应需要 15 秒。当我将服务器放在另一台机器上并通过 LAN 运行它时，执行相同的工作负载只需要 6 秒。

当我使用资源监视器时，我可以看到在跨线路测试时，我获得了更多的网络 IO 吞吐量。

更新：我的开发机器有充足的资源。它有 8 个内核、8 个内存等，而且程序非常简单。

# c# - StrongTypingException 未被用户代码处理”而数据绑定来控制

> ID：14120006
> 
> 赞同：2
> 
> 时间：2013-01-02T10:00:13.130
> 
> 标签：c#, .net, datatable

我有一个数据行`drTask`，并且有一个`Team`具有空值的列。我将空值数据绑定到我的控件。下面的代码在 .NET 2.0 上运行良好。

```
if (!drTask.IsTEAMNull())
{
    this.lookUpEditMyTeams.DataBindings.Add("Text", drTask, "TEAM");
}
else
{
    this.lookUpEditMyTeams.DataBindings.Add("Text", drTask, "TEAM", true);
}

//In else part am databinding null value 
```

.NET 4.0 中的相同代码会抛出异常，例如

> “Usercode 未处理 StrongTypingException” 表 'Table' 中的列 'DESCRIPTION' 的值为 DBNull。

为什么我的代码在 .NET 2.0 中运行而不是在 .NET 4.0 中运行？

# spring - 数据在没有保存的情况下保存在数据库中（休眠）

> ID：14120010
> 
> 赞同：3
> 
> 时间：2013-01-02T10:00:24.343
> 
> 标签：spring, hibernate

我是休眠的新手，当我添加一个元素并取消它时，我看到数据保存在数据库中。在我的代码中，我没有调用 save 方法来保存它。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-02T10:35:25.913

如果您正在修改已与 Hibernate 会话关联的对象，您的所有修改都将被保存。检查[手册](http://docs.jboss.org/hibernate/orm/4.1/manual/en-US/html/ch11.html#objectstate-modifying)。

例如，如果您执行以下操作：

1.  从数据库加载对象
2.  通过添加或删除值来修改对象
3.  即使您不使用该`save()`方法，修改也会被保存。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-02T19:37:49.567

一旦你从数据库加载数据，它就会变成持久的，并且对它所做的任何更改都将被更新，如果它在会话关闭之前被更新的话。如果您不希望数据库中的数据在加载后使用所做的更改进行更新，请仅在关闭会话后进行更改。然后，如果您想再次持久化数据，请再打开一个会话并调用 save() 或 persist()。

编辑：1）确保缓存被禁用，以确保不同会话之间没有缓存。

```
<property name="cache.provider_class">org.hibernate.cache.NoCacheProvider</property> 
```

2) 执行以下步骤：

i）开始会话->开始事务->从两个表中获取数据->关闭事务->关闭会话。

ii）创建第三个表的对象-> 用它做任何你想做的事情，比如从前两个表中添加数据。

iii) 开始新会话 --> 开始新事务 --> 使用 session.save() 保存第三个表的对象 --> 关闭事务 --> 关闭会话。

步骤 (i) 完成后，table1 和 table2 中的对象不再“持久”，而是“分离”。如果您在步骤 (iii) 中不执行 session.save()，则 table3 的对象将不会被保存，因为它不再处理持久对象。

这是我对持久和分离对象的理解。如果不起作用，请回复。我会将其编码并找到解决方案。

还有一个建议，请考虑使用 session.persist() 而不是 session.save()。如果您想了解它们的区别，请点击以下链接：[Hibernate 中persist() 与 save() 的优势是什么？](https://stackoverflow.com/questions/5862680/whats-the-advantage-of-persist-vs-save-in-hibernate)

祝你好运！

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-02T10:24:03.527

似乎您的休眠配置中有`AutoFlash`和/或`AutoCommit`参数`On`。尝试禁用它们。

# javascript - 在javascript中比较系统时间和用户时间

> ID：14120014
> 
> 赞同：0
> 
> 时间：2013-01-02T10:00:56.900
> 
> 标签：javascript, date, datetime, time

```
if (userDate.getHours() >= sysDate.getHours()) {
     alert('continue');
} else {
     alert('time is up');
} 
```

我需要将系统时间与用户输入的时间进行比较。通过上述方法，我可以比较小时，但我也需要比较分钟。请为此建议一个合适的方法

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-02T10:14:20.157

如果两者`userDate`都是`sysDate`对象`Date`，则可以使用`getTime()`方法，如下所示：

```
if (userDate.getTime() >= sysDate.getTime()) {
     alert('continue');
} else {
     alert('time is up');
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-02T10:12:58.817

如此处所示：[如何在 JavaScript 中获取时间戳？](https://stackoverflow.com/questions/221294/how-do-you-get-a-timestamp-in-javascript)

您可以使用`Date.getTime()`Epoch 以来的毫秒数。然后使用简单的整数数学进行比较：

```
if (userDate.getTime() >= sysDate.getTime()) {
     alert('continue');
} else {
     alert('time is up');
} 
```

# geometry - 检查所选区域中的坐标

> ID：14120015
> 
> 赞同：2
> 
> 时间：2013-01-02T10:01:00.303
> 
> 标签：geometry, coordinates, area

我有 4 个区域坐标：**x1,y1** ... 等等。还有一个位置**x0,y0**。

如何检查我的坐标是否在选定区域？

![面积和点坐标](../Images/2ae25fe101a5304189f169805b070349.png)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-02T10:18:36.937

我将向您解释如何检查 (x0,y0) 是否位于通过 (x1,y1) 和 (x2,y2) 的线“下方”。本质上，您希望向量 (x0-x1,y0-y1) 指向 (x2-x1, y2-y1) 的“右侧”。这相当于说矩阵

```
x0-x1      y0-y1

x2-x1      y2-y1 
```

有一个负行列式。所以你的条件变成

```
(x0-x1)(y2-y1) < (y0-y1)(x2-x1). 
```

对于任何界定该区域的线，您都会得到这样的条件。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-02T10:26:39.347

让

```
A = {x1, y1}
B = {x2, y2}
C = {x3, x3}
D = {x4, x4} 
```

首先，确保点形成多项式并且不在直线上。这可以通过比较`direction(AB) != direction(AC) != direction(AD)`AB、AC、AD 是方向向量来完成。

为了确保某个点`P = {x0, y0}`位于多边形内`ABCD`，检查它就足够了`sign(AC X AP) == sign(CD X CP) == sign(DB X DP) == sign(BA X BP)`。

```
AC: Directional vector A -> C
AP: Directional vector A -> P
.
. so on!
.
X: Cross product
sign: sign of cross product (+ or -) 
```

只需要比较方向的符号而不是大小。

# python - Django/Python 计算 HTML 模板中的评论/投票

> ID：14120016
> 
> 赞同：0
> 
> 时间：2013-01-02T10:01:10.553
> 
> 标签：python, django, django-models, django-views

我正在尝试向`log in`用户打印所有最新`10 articles`的`number of comments`和`number of votes`. 我`views.py`的那个函数是这样的：

```
article_query=Article.objects.filter(creator=user.id)
    article = Article.objects.all()
    latest_articles = article.order_by('-pub_date')
    return render_to_response('home.html', {'article_user': article_query, 'user_info':user_info, 'latest_articles':latest_articles}, RequestContext(request)) 
```

但是，我没有专门的部分作为`vote_count`或`comment_count`存储在数据库中。我只是将可能已投票或评论的用户存储在文本字段中，并`ids`用分号 ( ) 分隔。`;`例如。投票--> (2;4;6;)

如何输出模板中的投票数？我应该像在数据库中那样制作一个专用单元格，`votes_count`还是应该通过在视图文件中编写一些繁琐的函数然后显示它来实现这一点？拥有数百万用户的网站的常规方法是什么？

# iphone - 是否可以从我的 iphone 获取另一部 iphone 上已安装应用程序的详细信息？

> ID：14120017
> 
> 赞同：-1
> 
> 时间：2013-01-02T10:01:10.943
> 
> 标签：iphone, ios, xcode

我目前正在做一个应用程序，它需要我的 iPhone（或任何其他 iDevices）在另一部 iPhone 上安装的应用程序的详细信息。

我的要求是：

1.  如果我的应用程序安装在两个设备上，我的应用程序将推送数据
2.  否则，它必须发送一个链接来下载该应用程序。

可能吗？

我想检测应用程序是否安装在另一部手机上。

是否有可用的 API 包？我正在 Xcode 中制作它。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-02T10:18:58.950

这不可能。你甚至不知道自己的 iDevice 上安装的应用程序

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-02T10:15:25.120

据我所知，这是不可能的。由于 Apple 不允许您获取用户个人设备的信息。

# jquery - 解析 XML 语法 jQuery 错误

> ID：14120020
> 
> 赞同：0
> 
> 时间：2013-01-02T10:01:50.520
> 
> 标签：jquery, xml, parsing

在 46 字符串中，如果我手动键入点名称而不是变量`res`[点名称] 它可以工作。但如果没有，那就行不通了。

它的工作原理是：

1.  点击点
2.  取点名称
3.  在维基百科中搜索
4.  解析xml
5.  从 xml 获取 URL
6.  在 iframe 中打开 URL

**我哪里做错了？**

[粘贴代码](http://pastebin.com/4reDinbb)

```
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html>

    <head>
        <title></title>
        <meta http-equiv="Content-Type" content="text/html; charset=utf-8">
        <script src="http://ajax.googleapis.com/ajax/libs/jquery/1.8.3/jquery.min.js"></script>
        <script type="text/javascript" src="http://ecn.dev.virtualearth.net/mapcontrol/mapcontrol.ashx?v=7.0"></script>
        <script type="text/javascript">
            var map = null;

            function GetMap() {
                // Initialize the map
                map = new Microsoft.Maps.Map(document.getElementById("mapDiv"), {
                    credentials: "An-KyHsPpYClz9oHXMZ6X3SW6I44Ei2DTTrUS_QlXUW43qqsvOAQrT9ekVEIBT9u"
                });
                Microsoft.Maps.Events.addHandler(map, 'click', LatLong);
            }

            function LatLong(e) {
                if (e.targetType == "map") {
                    var point = new Microsoft.Maps.Point(e.getX(), e.getY());
                    var loc = e.target.tryPixelToLocation(point);
                    lola = "lo,loe".replace('lo', loc.latitude).replace('loe', loc.longitude);
                }
                MakeGeocodeRequest('An-KyHsPpYClz9oHXMZ6X3SW6I44Ei2DTTrUS_QlXUW43qqsvOAQrT9ekVEIBT9u');
            }

            function ClickGeocode(credentials) {
                map.getCredentials(MakeGeocodeRequest);
            }

            function MakeGeocodeRequest(credentials) {

                var geocodeRequest = "http://dev.virtualearth.net/REST/v1/Locations/" + lola + "/?output=json&jsonp=GeocodeCallback&key=" + credentials;
                CallRestService(geocodeRequest);
            }

            function GeocodeCallback(result) {
                res = (result.resourceSets[0].resources[0].name);
                console.log(res);
                $(document).ready(function () {
                    $.ajax({
                        type: "GET",
                        url: "http://en.wikipedia.org/w/api.php?action=opensearch&limit=1&format=xml&search="+res,
                        dataType: "xml",
                        success: xmlParser
                    });
                });
            }

            function xmlParser(xml) {
                var str = jQuery(xml).find("Url").text()
                alert(str);
                document.getElementById("iframe").src=str.replace('en.', 'm.');
            }

            function CallRestService(request) {
                var script = document.createElement("script");
                script.setAttribute("type", "text/javascript");
                script.setAttribute("src", request);
                document.body.appendChild(script);
            }
        </script>
    </head>

    <body onload="GetMap();">
        <iframe align="right" height="500px" id="iframe" src="" width="48%"></iframe>
        <div id='mapDiv' style="position:relative; width:48%; height:500px;"></div>
    </body>

</html> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-02T12:27:29.153

所以我们基本上有这个：

```
function GeocodeCallback(result) {
    res = "Wróblew, Woj. Lodzkie";
    $(document).ready(function () {
        $.ajax({
            type: "GET",
            url: "http://en.wikipedia.org/w/api.php?action=opensearch&limit=1&format=xml&search="+res,
            dataType: "xml",
            success: xmlParser
        });
    });
} 
```

我能发现的主要问题：

1.  您依靠全局`res`变量来提供`url`AJAX 调用。如果浏览器尝试同时执行两个 AJAX 请求，这很容易失败。你错过了`var`关键字吗？

2.  您不能在 URL 中注入随机字符串。在 vanilla JavaScript 中，你会使用[encodeURIComponent()](https://developer.mozilla.org/en-US/docs/JavaScript/Reference/Global_Objects/encodeURIComponent)但我确信 jQuery 允许简单地传递一个对象。

它可能与您的问题无关（不可能从您那里获得确切的错误消息），但这是我最好的猜测。

# android - Android中的来电阻止

> ID：14120027
> 
> 赞同：4
> 
> 时间：2013-01-02T10:02:11.720
> 
> 标签：android

我能够阻止android中的来电，但是在断开时间之前它会响几秒钟。如何在不响铃的情况下直接断开电话？

我在`Manifest`文件中添加了权限：

```
<uses-permission android:name="android.permission.READ_CONTACTS"/>
<uses-permission android:name="android.permission.MODIFY_PHONE_STATE"></uses-permission>
<uses-permission android:name="android.permission.READ_PHONE_STATE"></uses-permission>
<uses-permission android:name="android.permission.CALL_PHONE"></uses-permission>
<uses-feature android:name="android.hardware.telephony" /> 
```

然后创建 `IDL`用于获取核心电话服务的接口。

```
 package com.android.internal.telephony;
  interface ITelephony {

  boolean endCall();

  void answerRingingCall();

  void silenceRinger();
} 
```

然后为来电制作广播接收器。

```
public class PhonecallReceiver extends BroadcastReceiver {

Context context = null;

@Override
public void onReceive(Context context, Intent intent) {

      Log.i(TAG, "Receving call...");
      TelephonyManager telephony = (TelephonyManager) 
      context.getSystemService(Context.TELEPHONY_SERVICE);  
      try {

           Class c = Class.forName(telephony.getClass().getName());
           Method m = c.getDeclaredMethod("getITelephony");
           m.setAccessible(true);
           ITelephony telephonyService = (ITelephony) m.invoke(telephony);

            Bundle b = intent.getExtras();
            String incommingNumber = b.getString(TelephonyManager.EXTRA_INCOMING_NUMBER);

            telephonyService.endCall();

    }catch (Exception e){  e.printStackTrace(); 
}} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-05-18T16:19:38.723

暂时是不可能完成的任务。在这里查看原因：[为什么无法在 Android 上拦截来电](http://blog.wangling.me/2009/08/why-it-is-impossible-to-intercept-incoming-calls-on-android.html)

**但我建议您仍然是我自己采用的临时解决方案：**

在阻止通话之前，您需要做的第一件事是检索电话当前的振铃模式，然后打开静音：

```
AudioManager audiomanage = (AudioManager)context.getSystemService(Context.AUDIO_SERVICE);
int ringerMode = audiomanage.getRingerMode();
audiomanage.setRingerMode(AudioManager.RINGER_MODE_SILENT); 
```

阻止呼叫（或不阻止呼叫）后会为您提供初始模式：

```
audiomanage.setRingerMode(ringerMode); 
```

您将需要这些权限：

```
<uses-permission android:name="android.permission.MODIFY_AUDIO_SETTINGS" />
<uses-permission android:name="android.permission.WRITE_SETTINGS"/>
<uses-permission android:name="android.permission.WRITE_SECURE_SETTINGS"/> 
```

我希望我对你有所帮助。

# magento - 通过drupal登录时Magento对象未执行

> ID：14120031
> 
> 赞同：1
> 
> 时间：2013-01-02T10:02:27.450
> 
> 标签：magento, drupal

我正在尝试使用 drupal 和 magento 进行单点登录

我从一个单独的 php 文件运行此代码，它完美地登录到 magento

```
require_once $_SERVER['DOCUMENT_ROOT'] . "/mage1/app/Mage.php";
      umask(0);
      Mage::App('default');

      $session = Mage::getSingleton('customer/session', array('name' => 'frontend'));
      try {
        $session->login($row['mail'], $row['field_magentopass_value']);

        $session->setCustomerAsLoggedIn($session->getCustomer());
 } catch (Exception $e) {
        print_r($e);
        exit;
      } 
```

但是当我从 Drupal 运行这段代码时，它不会登录到 magento，它也会从 Drupal 发出

我使用 hook_user_login 来运行上面的代码。

但另一方面，我可以注册为 magento 客户，而有人按照相同的约定注册 drupal

谁能告诉这里有什么问题

以下是用户登录后的 Druapl 7 cookie 信息

```
Array
(
    [Drupal_tableDrag_showWeight] => 0
    [Drupal_toolbar_collapsed] => 0
    [has_js] => 1
    [SESSe314d96b48831bb642879451688dbfdc] => Km3_IJoagTatwjw2orgimZ6-UwtgFF0WCTtl6fEDDAw
) 
```

没有登录

```
 Array
    (
        [Drupal_tableDrag_showWeight] => 0
        [Drupal_toolbar_collapsed] => 0
        [has_js] => 1

    ) 
```

# .net - 如何让 svcutil 从服务合同是外部类库的一部分的服务创建客户端？

> ID：14120036
> 
> 赞同：0
> 
> 时间：2013-01-02T10:02:37.637
> 
> 标签：.net, wcf

我在 IIS 上托管 wcf 服务 (.NET 4.0)。服务类实现`Interface_A`了包含 [ServiceContract] 和 [OperationContract] 属性的接口。`Interface_A`当是 wcf 项目的一部分时，一切都很好。但是当`Interface_A`在另一个项目（我的服务合同项目）中时，只`svcutil`创建`.config`文件而没有`.cs`创建文件。我没有收到任何错误，并且`wsdl`在两种情况下看起来都一样。
我正在对 wsdl 使用 svcutil。
我认为在自己的项目中拥有服务接口是一个非常现实的场景，因为它允许服务接口和服务实现之间的严格分离。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-04T12:29:49.793

好的，我的错误：似乎没有充分的理由`[servicecontract]`在单独的 dll 中使用。因此，可以`[servicecontract]`在 wcf 服务类和服务类实现`Interface_A`中包含在单独的 dll 中。客户端和其他服务可能会使用此接口来提供通用架构。

# java - 自定义日历视图以添加指标

> ID：14120040
> 
> 赞同：1
> 
> 时间：2013-01-02T10:02:46.140
> 
> 标签：java, android

> **可能重复：**
> [如何在 Android 中使用自定义日历视图以及如何设置提醒提醒？](https://stackoverflow.com/questions/12142737/how-to-use-custom-calendar-view-in-android-and-how-to-set-alert-for-reminder)

我想在android的日历视图中的一天内添加一个类似图标的通知，有什么办法吗？

# php - 从多维数组中获取值到一个表行 PHP

> ID：14120042
> 
> 赞同：0
> 
> 时间：2013-01-02T10:02:50.330
> 
> 标签：php, mysql, arrays

我有一些数据的 html 表，该表中的一行包含有关该行中条目描述的所有历史记录（历史记录数据位于单独的数据库表中，而不是主表数据）。

```
GROUP_CONCAT(DISTINCT est.id, '|', est.date_estimate ,'|', est.description_estimate SEPARATOR '|') as description_estimate_history 
```

通过这个数据库查询，我得到了与主记录相关的所有条目。

```
 $raw_data = explode("|", $this->reg['rows'][$id]['description_estimate_history']);
 $group_data = array_chunk($raw_data, 3);

 $this->reg['rows'][$id]['description_joined'] = print_r($group_data);

  Array
    (
        [0] => Array
            (
                [0] => 105925
                [1] => 2013-02-28 02:14:33
                [2] => some text
            )

        [1] => Array
            (
                [0] => 105958
                [1] => 2013-02-28 02:14:33
                [2] => some text
            )

    )
------------------- // other row
    Array
    (
        [0] => Array
            (
                [0] => 
            )
    )
----------------- // another row
    Array
    (
        [0] => Array
            (
                [0] => 
            )

    )
--------------- //yet another row
    Array
    (
        [0] => Array
            (
                [0] => 105932
                [1] => 2012-12-31 00:00:00
                [2] => some text
            )

        [1] => Array
            (
                [0] => 105945
                [1] => 2012-12-31 00:00:00
                [2] => some text
            )

    ) 
```

`date - text`当一行可以有多个记录时，我不知道如何将这些数据打印到表行中，例如（[0] 是条目 ID）

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-02T10:20:53.173

尝试此代码段以更好地了解您的结果数组

```
foreach($group_data as $dataArray){ // looping through rows
    foreach($dataArray as $array){ // looping through records     
        foreach($array as $value){ // looping through fields
          print $value."<br />";
       }
    }
} 
```

# python - 适用于 Linux 的 Python 可控命令行音频播放器

> ID：14120045
> 
> 赞同：3
> 
> 时间：2013-01-02T10:02:56.867
> 
> 标签：python, linux, audio

我想构建使用我的 Raspberry Pi 作为媒体站。它应该能够通过网络命令播放歌曲。这些命令应该由用 Python 编写的服务器处理。因此，我需要一种通过 Python 控制音频播放的方法。

我决定为 linux 使用命令行音乐播放器，因为它们应该为音频文件格式提供最大的灵活性。此外，像 PyAudio 和 PyMedia 这样的 Python 库似乎对我不起作用。

我对音乐播放器的期望并不高。必须可以在尽可能多的编解码器中播放和暂停声音文件，并可以调高和调低音量。此外，它必须是无头播放器，因为我没有运行任何桌面环境。似乎有很多这样的球员。例如，mpg123 可以很好地满足我的所有需求。

我现在遇到的问题是所有这些播放器似乎都有一个用 ncurses 编写的用户界面，我不知道如何使用 Python 子进程模块访问它。所以，我要么需要一个带有 Python 绑定的音乐播放器，要么需要一个可以通过 subprocess 模块用命令行控制的音乐播放器。至少这些是我现在想到的解决方案。

有谁知道可以解决我的问题的 linux 命令行音频播放器？或者还有其他方法吗？

提前致谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-02T10:08:13.990

`mpd`应该很适合你。它是一个守护进程，可以由各种客户端控制，从无 GUI 的命令行客户端到`mpc`GUI 命令行客户端`ncmpc`，`ncmpcpp`再到几个功能齐全的桌面客户端。

`mpd`+`mpc`应该为您完成这项工作，因为`mpc`可以通过命令行轻松控制，并且还能够提供有关当前播放的歌曲和其他内容的各种状态信息。

似乎已经有一个可用于 mpd - 的 python 客户端库`python-mpd`。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-02T10:07:47.953

我建议您使用可以通过 D-Bus 管理的媒体播放器。这会解决你的很多问题。

像 Rythmbox 这样的媒体播放器可以使用 D-Bus 进行控制，但我想这对于您的 Raspberry 卡来说可能有点“巨大”？

看看那里，以防万一：[使用 D-Bus 管理 rythmbox](http://blog.mafr.de/2006/12/10/controlling-rhythmbox-using-dbus/)

# php - 从多个变量计算总小时、分钟和秒

> ID：14120052
> 
> 赞同：0
> 
> 时间：2013-01-02T10:03:33.153
> 
> 标签：php, time

我正在使用 javascript 秒表创建游戏并将结果放入数据库。我现在面临的问题是如何计算游戏所有阶段之间的总时间。这是我的示例数据：

```
$time_level1 = "00:00:24";
$time_level2 = "00:00:30";
$time_level3 = "00:00:32";
$time_level4 = "00:01:30";
$time_level5 = "00:20:15";
$time_level6 = "00:59:15";

$time_msec_level1 = "20";
$time_msec_level2 = "343";
$time_msec_level3 = "115";
$time_msec_level4 = "952";
$time_msec_level5 = "152";
$time_msec_level6 = "455"; 
```

所有这些数据都是从数据库加载的。我将毫秒分开是因为在排行榜列表中我需要显示所有阶段的所有时间，在所有阶段的总时间内，按时间和毫秒升序显示。

1.  如何计算所有这些变量的总时间并将它们显示为时间格式？
2.  如何从多条记录中按升序排列总时间？因为数据库中没有记录总次数，所以我不能立即升序。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-02T10:37:46.753

解决了。我正在做的（基于 lc 的回答）是将所有这些字符串转换为总秒数，然后将它们转换为时间格式。我也可以毫无问题地对它们进行升序排序。

这是最终代码：

```
<?php
$time_level1 = "220";
$time_level2 = "300";
$time_level3 = "400";
$time_level4 = "500";
$time_level5 = "600";
$time_level6 = "700";

$totaltime = $time_level1 + $time_level2 + $time_level3 + $time_level4 + $time_level5 + $time_level6;

$time_level1 = sec2hms(200);
$time_level2 = sec2hms(300);
$time_level3 = sec2hms(400);
$time_level4 = sec2hms(500);
$time_level5 = sec2hms(600);
$time_level6 = sec2hms(700);
$totaltime = sec2hms($totaltime);

echo $time_level1."<br />";
echo $time_level2."<br />";
echo $time_level3."<br />";
echo $time_level4."<br />";
echo $time_level5."<br />";
echo $time_level6."<br />";
echo $totaltime;
?> 
```

我使用的`sec2hms`功能来自：[http ://www.laughing-buddha.net/php/sec2hms](http://www.laughing-buddha.net/php/sec2hms)

# jquery - 从 URL 中删除主题标签，但仍跳转到该元素

> ID：14120053
> 
> 赞同：1
> 
> 时间：2013-01-02T10:03:33.403
> 
> 标签：jquery, html, hashtag

这是我的困境。我有从一个页面到另一个页面的三个链接，并将访问者带到其各自的 DIV id：

```
www.mysite.com/#about
www.mysite.com/#gallery
www.mysite.com/#help 
```

它工作正常，但我真的需要从 URL 中删除尾随的主题标签，否则它会与 jquery 库滑块混淆。这可能吗？我见过其他人问过类似的问题，但他们似乎没有导航到新页面。

我正在寻找的是一种让访问者单击链接（例如，`www.mysite.com/#about`）并被带到该页面（和相应的元素）但让浏览器修剪掉`#about`并只报告的方式`www.mysite.com`。

Jquery，PHP，javascript，我真的不在乎什么。

我在想另一种选择是将用户带到 www.mysite.com，然后应用主题标签。这是可能吗？就这样它们被带到元素，但浏览器中的 url 不反映主题标签。

PS：我不是编码员，所以如果有一些代码可以做到这一点，你们能否真正清楚如何实现？

非常感谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-02T10:23:03.340

我们可以使用`history api`.

首先，我们检查堆栈中是否存在状态。无论状态是什么，都将是我们推入堆栈的最新项。

我们假设`id`元素的 与 相同`hash`。我们将它用作我们的选择器`div`并获取 divs `offset().top`。

```
if(history.state){  
    $('html, body').scrollTop($('div[id='+history.state.element+']').offset().top); 
} 
```

现在让我们看一下点击功能。我们阻止默认行为并将 href 存储在变量中（因为我们将使用它几次）。我们将一个状态压入堆栈。键的`element`值为`whatever comes after the hash tag`。我们还提供了一些关于堆叠状态的其他信息。完成后，我们只需将页面位置重定向到元素的`without`哈希标记位置。

```
$('a').on('click', function(e){
    e.preventDefault();

    var ele =  $(this).prop('href');
    window.history.pushState({'element' : ele.split('#')[1]}, ele, ele.split('#')[0]);

    window.location = ele.split('#')[0]; 
}); 
```

现在，当下一页加载时，历史将有一个状态，这将是最近推送的堆栈。这将模拟您想要的行为。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-02T10:07:09.237

这是 jQuery 中一个不错的解决方案：

[http://demos.flesler.com/jquery/scrollTo/](http://demos.flesler.com/jquery/scrollTo/)

# android - 如何让系统定义所有主题？

> ID：14120055
> 
> 赞同：2
> 
> 时间：2013-01-02T10:03:33.453
> 
> 标签：android, themes

> **问题：** - android 是否提供任何功能来检索系统中定义的所有主题。

例：`Theme_Holo_Light`或其他。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-02T10:30:08.153

简短的回答：没有

Android 只有两个主题系列：

*   主题
*   主题.Holo

后者是在 Android 3.0 Honeycomb API 11 中引入的，您可以在[发行说明中了解这一点](http://developer.android.com/about/versions/android-3.0.html)

> 标准系统小部件和整体外观已经过重新设计，并包含一个新的“全息”用户界面主题。系统使用标准样式和主题系统应用新主题。任何面向 Android 3.0 平台的应用程序（通过将 android:minSdkVersion 或 android:targetSdkVersion 值设置为“11”）默认继承全息主题。

这些主题带有变体（基本上：Light and Dark）

所以当你设计一个主题时：

*   要么你从头开始创造一切
*   要么您从 继承`Theme.DeviceDefault`，知道它将取决于每个设备的 Android 版本，因此您可以`values-v11`为 Holo创建主题的变体

# android - 在相对布局的中心查看

> ID：14120057
> 
> 赞同：2
> 
> 时间：2013-01-02T10:03:45.607
> 
> 标签：android, view, android-relativelayout

我有一个`relativelayout`包含一个`progressbar`和一个加载`textview`..我需要`progressbar`和文本视图在相对布局的中心锥形。但它更多地朝向右侧而不是在中心。下面是我的代码..

```
<RelativeLayout 
                android:layout_width="fill_parent"
                android:layout_height="26dp" 
                android:layout_gravity="bottom"
             android:background="@drawable/border">
                        <ProgressBar
                        style="?android:attr/progressBarStyleSmall"
                        android:id="@+id/progressBar"
                        android:layout_width="20dp"
                        android:layout_height="20dp"
                        android:layout_centerInParent="true"
                        android:layout_centerHorizontal="true" />

              <TextView 
                        android:id="@+id/TextViewProgress"
                        android:text="Loading"
                        android:layout_width="wrap_content"
                        android:layout_height="wrap_content"
                        android:textSize="16dp"
                        android:layout_toRightOf="@+id/progressBar"
                        /> 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-02T10:11:14.920

添加`android:gravity="center"`到`RelativeLayout`

```
<RelativeLayout 
   android:layout_width="fill_parent"
   android:layout_height="26dp" 
   android:layout_gravity="bottom"
   android:background="@drawable/border"
   android:gravity="center">

   <ProgressBar
       style="?android:attr/progressBarStyleSmall"
       android:id="@+id/progressBar"
       android:layout_width="20dp"
       android:layout_height="20dp"
       android:layout_centerInParent="true"
       android:layout_centerHorizontal="true" />

   <TextView 
       android:id="@+id/TextViewProgress"
       android:text="Loading"
       android:layout_width="wrap_content"
       android:layout_height="wrap_content"
       android:textSize="16dp"
       android:layout_toRightOf="@+id/progressBar" /> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-02T10:11:34.357

尝试在其中添加一个 LinearLayout ：

```
<RelativeLayout 
            android:layout_width="fill_parent"
            android:layout_height="26dp" 
            android:layout_gravity="bottom"
         android:background="@drawable/border">
<LinearLayout
   android:layout_width="wrap_content"
   android:layout_height="wrap_content"
   orientation="horizontal"
   android:layout_centerInParent="true"
>
                    <ProgressBar
                    style="?android:attr/progressBarStyleSmall"
                    android:id="@+id/progressBar"
                    android:layout_width="20dp"
                    android:layout_height="20dp"
                     />

          <TextView 
                    android:id="@+id/TextViewProgress"
                    android:text="Loading"
                    android:layout_width="wrap_content"
                    android:layout_height="wrap_content"
                    android:textSize="16dp"
                    />
 </LinearLayout>
</RelativeLayout> 
```

这只是一个例子。我没有测试它。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-02T10:11:56.520

这是我检查过的完美。

```
<RelativeLayout 
                android:layout_width="fill_parent"
                android:layout_height="wrap_content" 
                android:layout_gravity="bottom"
             android:background="@drawable/icon">
                        <ProgressBar
                        style="?android:attr/progressBarStyleSmall"
                        android:id="@+id/progressBar"
                        android:layout_width="20dp"
                        android:layout_height="20dp"
                        android:layout_marginTop="5dp"
                        android:layout_centerInParent="true"
                        android:layout_centerHorizontal="true" />

              <TextView 
                        android:id="@+id/TextViewProgress"
                        android:text="Loading"
                        android:layout_width="wrap_content"
                        android:layout_height="wrap_content"
                        android:textSize="16dp"
                        android:layout_alignParentTop="true"
                        android:layout_centerHorizontal="true"
                        /> 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-01-02T10:13:52.330

```
 <RelativeLayout 
            android:layout_width="fill_parent"
            android:layout_height="26dp" 
            android:layout_centerInParent="true"
            android:background="@drawable/border">
                    <ProgressBar
                    style="?android:attr/progressBarStyleSmall"
                    android:id="@+id/progressBar"
                    android:layout_width="20dp"
                    android:layout_height="20dp"
                     />

          <TextView 
                    android:id="@+id/TextViewProgress"
                    android:text="Loading"
                    android:layout_width="wrap_content"
                    android:layout_height="wrap_content"
                    android:textSize="16dp"
                    android:layout_toRightOf="@+id/progressBar"
                    /> 
```

# java - 如何在 Spring 3.0 中实现脚手架

> ID：14120060
> 
> 赞同：7
> 
> 时间：2013-01-02T10:04:02.203
> 
> 标签：java, spring, spring-mvc, spring-roo

“我正在使用spring maven项目并希望在其中实现脚手架，以便我可以根据模型动态生成DAO、服务和spring表单。如何实现？”

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-13T12:12:42.307

首先，spring roo 将视图生成为使用 Dojo 和 Dijit 的 .jspx 页面（我不明白为什么 roo 不使用 Jquery）。Roo 对编辑生成的视图文件有很大的限制。

因此，如果您使用 roo 搭建脚手架，您会发现您的双手被紧紧束缚（就像我现在一样）。

我的建议是，根据需要构建模型，但对于脚手架，您应该使用 JSF 或 GWT。两者都比使用 Dojo 更好。两者都可以作为 spring roo 附加组件使用。希望有帮助。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-02T10:35:43.837

看看[春袋](http://www.springsource.org/spring-roo)。因为这提供了您正在搜索的内容。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2014-12-06T18:33:28.043

让我们看看这个教程：[https ://sites.google.com/site/telosystutorial/](https://sites.google.com/site/telosystutorial/)

它解释了如何从数据库生成完整的 Web 应用程序（Spring MCV - JPA 或 Spring Data）

它使用名为“Telosys Tools”的免费 Eclipse 插件（带有脚手架的代码生成器）

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2019-09-19T10:41:33.410

你可以试试**Telosys** [http://www.telosys.org](http://www.telosys.org)

脚手架非常有效（来自数据库或特定模型）您可以自定义模板以准确生成您想要的

另请参阅[https://modeling-languages.com/telosys-tools-the-concept-of-lightweight-model-for-code-generation/](https://modeling-languages.com/telosys-tools-the-concept-of-lightweight-model-for-code-generation/)

# python - Python Storm - 查询参考集（一对多）

> ID：14120062
> 
> 赞同：3
> 
> 时间：2013-01-02T10:04:13.600
> 
> 标签：python, mysql, apache-storm

我有 2 个简单的类映射现有数据库：

```
class File(object):
  __storm_table__ = 'files'
  fid = Int(primary=True)
  filename = Unicode()

class FileDownload(object):
  __storm_table__ = 'filefield_track'
  did = Int(primary=True)
  fid = Int()
  email = Unicode()
  date = DateTime()

  trackedfile = Reference(fid, File.fid)

File.filedownloads = ReferenceSet(File.fid, FileDownload.fid) 
```

我只想能够找到所有`File`具有非空`File.filedownloads`集的对象。这可以在 python 中通过查询所有`File`对象并手动过滤`File.filedownloads`字段来完成，但我认为有一种更简洁的方法可以做到这一点（这不起作用:)）：

```
store.find(File, File.filedownloads != None)
store.find(File, File.filedownloads.count() != 0) 
```

我知道第一个适用于 SQLAlchemy：

```
session.query(File).filter(File.filedownloads != None) 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-02T13:02:27.057

我能够找到一个“肮脏”的解决方法，它处理内部 ID (fid)

```
# Find all files that have been downloaded
subselect = Select(FileDownload.fid, distinct=True)
for f in store.find(File, File.fid.is_in(subselect)):
    print(f.filename, f.filedownloads.count()) 
```

# java - 获取 JCheckListBox 的所有选中项索引

> ID：14120063
> 
> 赞同：0
> 
> 时间：2013-01-02T10:04:13.783
> 
> 标签：java, swing, checkboxlist

您好，我正在尝试获取数组中复选框列表的所有选中项索引。但显然方法 getCheckBoxListSelectedIndices(); 正在返回一个空数组

```
package cct.karim;

import java.awt.BorderLayout;
import java.awt.Dimension;
import java.awt.FlowLayout;
import java.awt.GridLayout;
import java.awt.event.ActionEvent;
import java.awt.event.ActionListener;

import com.jidesoft.swing.CheckBoxList;
import javax.swing.DefaultListModel;
import javax.swing.JButton;
import javax.swing.JFrame;
import javax.swing.JLabel;
import javax.swing.JPanel;
import javax.swing.JScrollPane;
import javax.swing.border.EtchedBorder;
import javax.swing.border.TitledBorder;

/**
 *
 * @author beastieux
 */

public class E_JCheckListBox extends JFrame implements ActionListener {
    protected JLabel loglabel;
    private CheckBoxList List; 
    public E_JCheckListBox()
    {
        super("Select RFQs to Export");

        loglabel=new JLabel("Log:                                   .");
        List=new CheckBoxList();
        CheckBoxList List = new CheckBoxList();
        JScrollPane scp=new JScrollPane();

        DefaultListModel lmdlEjemplo=new DefaultListModel();

        lmdlEjemplo.addElement("  Item 0  ");
        lmdlEjemplo.addElement("  Item 1  ");
        lmdlEjemplo.addElement("  Item 2  ");
        lmdlEjemplo.addElement("  Item 3  ");
        lmdlEjemplo.addElement("  Item 4  ");
        lmdlEjemplo.addElement("  Item 5  ");
        lmdlEjemplo.addElement("  Item 6  ");
        lmdlEjemplo.addElement("  Item 7  ");
        lmdlEjemplo.addElement("  Item 8  ");
        lmdlEjemplo.addElement("  Item 9  ");

        List.setModel(lmdlEjemplo);

        scp.add(List);
        this.add(scp);

        scp.getViewport().add(List);

        getContentPane().setLayout(new FlowLayout());
        this.setSize(300, 300);
        scp.setSize(300, 350);

        JPanel p = new JPanel();
        p.setSize(500, 500);
        p.setLayout(new BorderLayout());
        p.add(scp, BorderLayout.CENTER);
        p.add(loglabel, BorderLayout.SOUTH);
        p.setBorder(new TitledBorder(new EtchedBorder(),
        "Please select options:") );

        getContentPane().add(p);
        JButton k= new JButton("Export");
        k.addActionListener(this);

        k.setMaximumSize(new Dimension(1, 1));
        add(k);
    //  pack();
        setVisible(true);
        setDefaultCloseOperation(javax.swing.WindowConstants.DISPOSE_ON_CLOSE);
    }

    public static void main(String args[]) {
        E_JCheckListBox obj = new E_JCheckListBox();
        obj.setVisible(true);
    }

    @Override
    public void actionPerformed(ActionEvent arg0) {
        // TODO Auto-generated method stub
        int k[]=List.getCheckBoxListSelectedIndices();
        System.out.println(k[0]);
    }
} 
```

这是我得到的例外：

```
Exception in thread "AWT-EventQueue-0" java.lang.ArrayIndexOutOfBoundsException: 0 
at cct.karim.E_JCheckListBox.actionPerformed(E_JCheckListBox.java:92)
at javax.swing.AbstractButton.fireActionPerformed(Unknown Source)
at javax.swing.AbstractButton$Handler.actionPerformed(Unknown Source)
at javax.swing.DefaultButtonModel.fireActionPerformed(Unknown Source)
at javax.swing.DefaultButtonModel.setPressed(Unknown Source)
at javax.swing.plaf.basic.BasicButtonListener.mouseReleased(Unknown Source)
at java.awt.Component.processMouseEvent(Unknown Source)
at javax.swing.JComponent.processMouseEvent(Unknown Source)
at java.awt.Component.processEvent(Unknown Source)
at java.awt.Container.processEvent(Unknown Source)
at java.awt.Component.dispatchEventImpl(Unknown Source)
at java.awt.Container.dispatchEventImpl(Unknown Source)
at java.awt.Component.dispatchEvent(Unknown Source)
at java.awt.LightweightDispatcher.retargetMouseEvent(Unknown Source)
at java.awt.LightweightDispatcher.processMouseEvent(Unknown Source)
at java.awt.LightweightDispatcher.dispatchEvent(Unknown Source)
at java.awt.Container.dispatchEventImpl(Unknown Source)
at java.awt.Window.dispatchEventImpl(Unknown Source)
at java.awt.Component.dispatchEvent(Unknown Source)
at java.awt.EventQueue.dispatchEventImpl(Unknown Source)
at java.awt.EventQueue.access$000(Unknown Source)
at java.awt.EventQueue$1.run(Unknown Source)
at java.awt.EventQueue$1.run(Unknown Source)
at java.security.AccessController.doPrivileged(Native Method)
at java.security.AccessControlContext$1.doIntersectionPrivilege(Unknown Source)
at java.security.AccessControlContext$1.doIntersectionPrivilege(Unknown Source)
at java.awt.EventQueue$2.run(Unknown Source)
at java.awt.EventQueue$2.run(Unknown Source)
at java.security.AccessController.doPrivileged(Native Method)
at java.security.AccessControlContext$1.doIntersectionPrivilege(Unknown Source)
at java.awt.EventQueue.dispatchEvent(Unknown Source)
at java.awt.EventDispatchThread.pumpOneEventForFilters(Unknown Source)
at java.awt.EventDispatchThread.pumpEventsForFilter(Unknown Source)
at java.awt.EventDispatchThread.pumpEventsForHierarchy(Unknown Source)
at java.awt.EventDispatchThread.pumpEvents(Unknown Source)
at java.awt.EventDispatchThread.pumpEvents(Unknown Source)
at java.awt.EventDispatchThread.run(Unknown Source) 
```

我是否因为对 GUI 编程不熟悉而遗漏了什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-02T10:12:11.433

问题似乎很简单。您有实例变量和方法变量的名称相同。List 被声明为实例变量并在 ActionListner 中使用，但同样用于创建局部变量，因此局部变量在构造函数中具有优先权。

下面更正了错误的代码应该可以工作。

```
private CheckBoxList List; 
        public E_JCheckListBox()
        {
            super("Select RFQs to Export");

            loglabel=new JLabel("Log:                                   .");
            List=new CheckBoxList();
//            CheckBoxList List = new CheckBoxList();
            JScrollPane scp=new JScrollPane(); 
```

另外，请在访问它的元素之前在数组中添加长度检查。在 Java 中，数组索引是经过严格检查的。

# android - 如何使用 android-page-curl 项目进行正常活动？像在页面上添加按钮等？

> ID：14120065
> 
> 赞同：0
> 
> 时间：2013-01-02T10:04:21.003
> 
> 标签：android, page-curl

我在[这里](http://code.google.com/p/android-page-curl/source/browse/trunk/src/com/mystictreegames/pagecurl/ListExample.java)使用了 android-page-curl 项目。我想向活动或页面添加按钮和其他控件。？知道我该怎么做吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-05T07:35:55.843

你不能这样做，你可以应用其他动画，比如翻页

# iphone - 带有地点搜索选项的 iOS 地图

> ID：14120067
> 
> 赞同：0
> 
> 时间：2013-01-02T10:04:29.963
> 
> 标签：iphone, objective-c, google-maps, mapkit, foursquare

我想获得有关如何在 iPhone 应用程序中集成地点搜索功能的建议。以下是我在搜索时发现的可能解决方案。

1\. **Google Places Api + iOS Mapkit**

问题：根据新的 Google 政策，我们不能将 Google APIs 与其他地图框架一起使用。

2\. **Google Places Api + Google Map iOs SDK**

问题：我已经注册了 Google Map iOs SDK Api 密钥，但我还没有收到 api 密钥。

3.**四方API + iOS Mapkit**

问题：不确定数据的有效性，因为搜索选项包括非常敏感的数据，例如警察局、医院。

4.**谷歌地图Javascript API**

问题：不提供原生外观。

我想使用 Google Places Api 但为此我需要获取 Google iOS SDK api 密钥。

随意提出任何建议或其他选择。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-02T10:08:54.613

您还可以`CLGeocoder`用于基本搜索功能。具体来说，您可以使用`geocodeAddressString:completionHandler:`和它的相关`geocodeAddressString:inRegion`方法。这是内置在 iOS 中的，适用于 iOS 5 和 6 地图版本，并允许进行基本搜索（街道、公司名称等）。

我建议您看看它是否适合您的目的 - 如果不适合您，那么您可以查看其他选项，但最好至少首先考虑内置功能。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-10T18:03:29.780

尝试使用 Facebook Places API。它很容易与 MapKit 集成，并且有一个非常好的教程。

按照以下步骤安装 SDK [https://developers.facebook.com/ios/](https://developers.facebook.com/ios/)

这是教程 [https://developers.facebook.com/docs/tutorials/ios-sdk-tutorial/](https://developers.facebook.com/docs/tutorials/ios-sdk-tutorial/)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-29T08:40:53.030

只需使用 MKLocalSearch ...此处的粗略示例：http: [//phpadvocate.com/blog/2013/01/ios-6-1-simple-example-using-mklocalsearch/](http://phpadvocate.com/blog/2013/01/ios-6-1-simple-example-using-mklocalsearch/)

# php - 是否可以在函数调用中省略随机参数？

> ID：14120071
> 
> 赞同：1
> 
> 时间：2013-01-02T10:04:35.163
> 
> 标签：php

> **可能重复：**
> [有什么方法可以在 PHP 中指定可选参数值？](https://stackoverflow.com/questions/690599/any-way-to-specify-optional-parameter-values-in-php)
> [如何在函数调用中跳过可选参数？](https://stackoverflow.com/questions/1066625/how-would-i-skip-optional-arguments-in-a-function-call)

我有这个声明：

```
public function table_creator($thread, $table_body, $class='datagrid', $caption=null){
     some code
} 
```

当我这样执行它时：

```
<?php echo SomeClass::table_creator($this->report_keys, $report, $caption="Answers"); ?> 
```

在变量`$class`中有“数据网格”的“答案”，有没有办法不`$class`让它工作？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-02T10:13:39.350

PHP 没有**命名参数**（或*关键字参数*）。我建议您尝试以下样式：

```
public function table_creator($thread, $table_body, $options=array()){
  $default_options = array(
    "class" => "datagrid",
    // you can add more default options here
  );
  $options = array_merge($default_options, $options);
  // some code
} 
```

然后你可以这样称呼它：

```
echo SomeClass::table_creator($this->report_keys, $report,
                              array("caption" => "Answers"); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-02T10:13:33.960

参数传递采用它们在函数中声明的顺序。它不知道默认逃逸哪个。

默认参数将被从左到右覆盖。

如果你很清楚这`'datagrid'`将是 的值`$class`，为什么不这样传递呢？

```
<?php 
 echo SomeClass::table_creator($this->report_keys, $report,'datagrid',$caption='Answers');
?> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-02T10:06:46.123

PHP 不是这样工作的，您需要更改`$class`和`$caption`参数的顺序才能使该用法起作用。通过`$caption="Answers"`在函数调用中使用，您将分配一个变量值并将字符串“Answers”作为函数的第三个参数传递。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-01-02T10:07:07.950

如果您为该类参数传递空值，它将通过将该值作为**数据网格**作为默认值来工作

您必须将函数声明为 STATIC 才能直接使用**::调用**

所以声明应该是，

```
public static function table_creator($thread, $table_body, $class='datagrid', $caption=null){
     some code
} 
```

那么，为什么要通过赋值来传递第三个参数，

将以下代码从

```
<?php echo SomeClass::table_creator($this->report_keys, $report, $caption="Answers"); ?> 
```

至

```
<?php echo SomeClass::table_creator($this->report_keys, $report, "Answers"); ?> 
```

或者

```
<?php echo SomeClass::table_creator($this->report_keys, $report); ?> 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-01-02T10:07:18.147

声明有四个参数，你只传递了三个。如果要覆盖第四个参数的默认值，则还必须显式传递第三个参数：

```
echo SomeClass::table_creator($this->report_keys, $report, 'datagrid', "Answers"); ?> 
```

您现在使用的方法在 PHP 中不起作用，尽管它在其他一些语言中起作用。

如果您需要经常执行此操作，您可以创建一个函数来为您执行此操作：

```
function createTableDataGrid($keys, $report, $caption)
{
  echo table_creator($keys, $report, 'datagrid', $caption); ?>
} 
```

如果该类是您要编辑的，则可以在该类的额外方法中而不是单独的函数中执行此操作。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2013-01-02T10:08:02.383

而不是 $caption="Answers" 使用此代码调用成员函数

$caption="Answers" echo SomeClass::table_creator($this->report_keys, $report, $caption); ?>

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2013-01-02T10:13:51.137

在 PHP 中，函数接收参数的顺序与声明的顺序相同。因此，如果您的函数接收 4 个参数而您只传递了 3 个参数，那么最后一个参数将一无所获。

同样，仅仅因为您使用`$caption="Answers"`并不意味着被调用的函数会将其接收到其`$caption`参数中。长话短说，确保参数匹配。如果您想跳过一个参数使用`null`，以便使用声明的默认值。

因此，您可以通过以下方式解决您的问题：

```
<?php
echo SomeClass::table_creator($this->report_keys, 
                              $report, 
                              null,
                              $caption="Answers"); ?> 
```

顺便提醒一下，您正在访问一个实例方法，就好像它是一个类/静态方法一样。你可能想改变它。

# ruby-on-rails-3 - 控制器中的实例变量

> ID：14120078
> 
> 赞同：0
> 
> 时间：2013-01-02T10:05:07.060
> 
> 标签：ruby-on-rails-3

当我在一个动作中定义一个实例变量时，它在属于同一控制器的其他动作中是否不可用。

实例变量应该在整个类中可用。正确的？

```
 class DemoController < ApplicationController

  def index
    #render('demo/hello')
    #redirect_to(:action => 'other_hello')

  end

  def hello
    #redirect_to('http://www.google.co.in')
    @array = [1,2,3,4,5]
    @page = params[:page].to_i
  end

  def other_hello
    render(:text => 'Hello Everyone')
  end

end 
```

*如果我在索引*中定义数组并从*hello*视图中访问它，那么为什么我会因为 nil 的错误值而出现错误？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-02T10:22:09.907

实例变量仅在请求期间可用（控制器和视图呈现），因为 Rails 为每个请求创建一个新的控制器实例。

如果要在请求之间保留数据，请使用[会话](http://guides.rubyonrails.org/action_controller_overview.html#session)。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-02T15:12:44.247

如果您在动作中定义了一个实例变量`index`，那么它将仅在该动作中可用。如果您想为两个操作定义相同的实例变量，您可以执行以下两项操作之一：

```
def index
  set_instance_array
  ...
end

def hello
  set_instance_array
  ...
end

...

private
def set_instance_array
  @array = [1,2,3,4,5]
end 
```

如果您经常这样做，则可以使用 before 过滤器：

```
class DemoController < ApplicationController
  before_filter :set_instance_array

  def index
    ...
  end
  ...
end 
```

这将在每个请求之前调用 set_instance_array 方法。有关详细信息，请参阅[http://guides.rubyonrails.org/action_controller_overview.html#filters](http://guides.rubyonrails.org/action_controller_overview.html#filters)。

# webforms - orbeon 与 Java EE 应用程序的集成

> ID：14120079
> 
> 赞同：0
> 
> 时间：2013-01-02T10:05:11.197
> 
> 标签：webforms, orbeon

以下是我的要求 1\. 我想将使用**Orbeon Web 表单**创建的**动态 Web**与现有的 Java EE 应用程序**集成。**

 ****例如，我根据各种客户要求使用 Orbeon Web 表单创建了**注册表单。**我想在我现有的 Java EE 应用程序中查看这个动态表单。

1.  我可以将 Orbeon Web 表单集成到现有的 Java EE 应用程序中吗？如果集成是可能的，用户会话将如何得到维护。湾。如何访问**Orbeon**保存的**DATA**以生成报告**强文本**，或者使用其他 Java EE 模块的相同**DATA**。
******   我可以更改**Orbeon**提供的**默认数据库架构**吗？*****

 ******** * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-02T21:22:20.093

1.  一些可能有用的文档链接：

    *   [http://wiki.orbeon.com/forms/doc/developer-guide/form-runner/integration](http://wiki.orbeon.com/forms/doc/developer-guide/form-runner/integration)
    *   [http://wiki.orbeon.com/forms/doc/contributor-guide/proxying-orbeon-forms](http://wiki.orbeon.com/forms/doc/contributor-guide/proxying-orbeon-forms)

    目前最可靠的方法是将您的应用程序和 Orbeon Forms 并排放置，并使用 URL 在两者之间导航。

    理想情况下，我们希望有一个 API 来将表单集成到任意页面中，这是我们路线图中的一个功能：

    [http://wiki.orbeon.com/forms/projects/orbeon-forms-roadmap#TOC-Integration](http://wiki.orbeon.com/forms/projects/orbeon-forms-roadmap#TOC-Integration)

    一个。会话：这取决于您的容器和容器设置。有些容器允许在应用程序之间共享会话，有些则不允许。

    湾。您可以通过[持久性 API](http://wiki.orbeon.com/forms/doc/developer-guide/form-runner/persistence-api)访问数据。

2.  您是指 MySQL 还是 Oracle 数据库模式？不确定您所说的“更改”是什么意思，但我想答案是否定的：Orbeon Forms 在这一点上假设某个数据库模式。但是您可以实现自己的[持久层](http://wiki.orbeon.com/forms/doc/developer-guide/form-runner/persistence-api)。***********

# c - msgget() 和 ftok() 出错

> ID：14120080
> 
> 赞同：1
> 
> 时间：2013-01-02T10:05:22.863
> 
> 标签：c, ipc, message-queue, ftok

我正在学习 IPC 编程。作为其中的一部分，我尝试了以下两个代码来了解消息队列......

**消息队列创建者或消息发送者**

```
struct my_msgbuf {
    long mtype;
    char mtext[200];
};

int main(void)
{
    struct my_msgbuf buf;
    int msqid;
    key_t key;
if ((key = ftok("kirk.c", 'B')) == -1) {
    perror("ftok");
    exit(1);
}

if ((msqid = msgget(key, 0644 | IPC_CREAT)) == -1) {
    perror("msgget");
    exit(1);
}

printf("Enter lines of text, ^D to quit:\n");

buf.mtype = 1; /* we don't really care in this case */

while(fgets(buf.mtext, sizeof buf.mtext, stdin) != NULL) {
    int len = strlen(buf.mtext);

    /* ditch newline at end, if it exists */
    if (buf.mtext[len-1] == '\n') buf.mtext[len-1] = '\0';

    if (msgsnd(msqid, &buf, len+1, 0) == -1) /* +1 for '\0' */
        perror("msgsnd");
}

if (msgctl(msqid, IPC_RMID, NULL) == -1) {
    perror("msgctl");
    exit(1);
}

return 0;
} 
```

**消息接收者**

```
 struct my_msgbuf {
    long mtype;
    char mtext[200];
};

int main(void)
{
    struct my_msgbuf buf;
    int msqid;
    key_t key;

    if ((key = ftok("kirk.c", 'B')) == -1) {  /* same key as kirk.c */
        perror("ftok");
        exit(1);
    }

    if ((msqid = msgget(key, 0644)) == -1) { /* connect to the queue */
        perror("msgget");
        exit(1);
    }

    printf("spock: ready to receive messages, captain.\n");

    for(;;) { /* Spock never quits! */
        if (msgrcv(msqid, &buf, sizeof(buf.mtext), 0, 0) == -1) {
            perror("msgrcv");
            exit(1);
        }
        printf("spock: \"%s\"\n", buf.mtext);
    }

    return 0;
} 
```

以上代码可以在[beej 的消息队列指南中](http://beej.us/guide/bgipc/output/html/multipage/mq.html)找到。

当我尝试执行“spock”​​时，msgget() 抛出错误：没有这样的文件或目录。ftok() 有什么问题吗？我将文件的权限更改为传递给 msgget() 函数的权限。但同样的错误。提前致谢。提前致谢。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-02T11:50:27.117

`ftok`要求文件存在，因为它使用`inode`信息来构造密钥。如果您在单独的目录中构建它们，则指向`kirk.c`使用相对路径应该可以正常工作，例如`spock/spock.c`包含 spock 代码，`kirk/kirk.c`包含 kirk 代码，`spock/spock.c`您应该参考`../kirk/kirk.c`

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-12-21T23:46:35.730

也有同样的问题。如果你想执行消息接收者进程，你必须确保消息发送者**当时也在执行**。否则 msgqueue（如果你曾经运行过 message-sender）将被破坏，与之相关的 id 将不再有效。因此，它有什么神奇之处。波兹博士。

# php - Titanium Mobile / Javascript Json调用不起作用

> ID：14120082
> 
> 赞同：1
> 
> 时间：2013-01-02T10:05:27.817
> 
> 标签：php, javascript, json, titanium

我正在使用 JSON 与我在远程服务器上运行的 PHP 脚本进行通信。应用程序调用脚本并发送一些数据。

我对 JSON 没有太多经验，而且我似乎做错了什么，我只是找不到它是什么。

尝试在 google 和 stackoverflow 上找到我的问题，但问题是我真的不知道问题是什么，因为我没有上述 JSON 经验。

开始：

在一个循环中，我正在生成一个临时列表，该列表被推送到一个数组中：

```

    var tmpData = {
       行类型：行。行类型，
       isChecked：row.isChecked，
       职位：我
    };

    结果Arr.push(tmpData);

```

这`resultArr`导致：

```
{
        isChecked = 1;
        位置 = 0;
        行类型 = 电话；
    },
        {
        isChecked = 1;
        位置 = 1;
        rowType = 手机；
    },
        {
        isChecked = 1;
        位置 = 2;
        行类型 = 电子邮件；
    },
        {
        isChecked = 0;
        位置 = 3;
        行类型 = 短信；
    }

```

以上内容被发送到远程 php 脚本：

```
xhr.send({data : JSON.stringify(resultArr) });
```

结果在 PHP 中：

```
[数据] => [
{\"rowType\":\"type1\",\"isChecked\":true,\"position\":0},
{\"rowType\":\"type2\",\"isChecked\":true,\"position\":1},
{\"rowType\":\"type3\",\"isChecked\":true,\"position\":2},
{\"rowType\":\"type4\",\"isChecked\":false,\"position\":3}]

```

在 PHP 脚本中，我需要将这些数据保存在数据库中。然而，`json_decode`在`$_POST["data"]`或`$_POST`结果为空。

所以我的问题是，我做错了什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-02T10:42:43.670

正如我从您的 $_POST['data'] 变量中看到的那样，引号被转义（像这样`\"`）。

您必须继续运行`stripslashes`才能`$_POST['data']`正确解码。试了一下，我的最终代码是这样的：

```
$json = '[
{\"rowType\":\"type1\",\"isChecked\":true,\"position\":0},
{\"rowType\":\"type2\",\"isChecked\":true,\"position\":1},
{\"rowType\":\"type3\",\"isChecked\":true,\"position\":2},
{\"rowType\":\"type4\",\"isChecked\":false,\"position\":3}]';

$decoded = json_decode( stripslashes($json) ) ; 
```

# layout - iPad 上几乎空的 UIView 上的模糊布局

> ID：14120083
> 
> 赞同：0
> 
> 时间：2013-01-02T10:05:29.190
> 
> 标签：layout, ios6, autolayout, ambiguous

我正在使用界面生成器为 iPad 设计一个屏幕。我有一个空视图，我添加了一个 UIImageView 作为具有 4 个约束的壁纸：

```
Leading Space to superview = 0
Trailing Space to superview = 0;
Top Space to superview = 0;
Bottom Space to superview = 0; 
```

这样，图像在横向模式下可以完美调整大小。

我在 viewDidAppear: 和 didRotateFromInterfaceOrientation 中插入了一些调试代码：

```
NSLog(@"%@", [[UIWindow keyWindow] _autolayoutTrace]); 
```

只有在屏幕上使用这些元素，我才能在纵向模式下获得模棱两可的布局输出：

```
*<UIWindow:0x754c210>
|   *<UIView:0x75555f0> - AMBIGUOUS LAYOUT
|   |   *<UIImageView:0x7555650> - AMBIGUOUS LAYOUT 
```

在横向模式下，似乎工作正常

```
*<UIWindow:0x754c210>
|   *<UIView:0x75555f0>
|   |   *<UIImageView:0x7555650> 
```

之后我添加了更多控件，屏幕似乎工作正常，但我无法摆脱那种模棱两可的布局。我做错了什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-10-02T04:06:16.173

我想有时约束“安定下来”而不是模棱两可需要时间。根据 WWDC 2012 视频“掌握自动布局的最佳实践”，可以暂时容忍歧义（不像不可满足性，它会立即引发异常）。

如果您想向自己证明您的约束没有模棱两可，请为 [[UIWindow keyWindow] _autolayoutTrace] 创建一个包装器，并在短暂延迟后调用它：

```
- (void)viewDidAppear:animated
{
    [super viewDidAppear:animated]; 

    [self performSelector:@selector(wrapperForLoggingConstraints) withObject:nil afterDelay:.3];
}

- (void)wrapperForLoggingConstraints
{
    [[UIWindow keyWindow] _autolayoutTrace];
} 
```

您必须在 UIWindow 上创建一个类别才能使其正常工作：

```
@interface UIWindow()

+ (UIWindow *)keyWindow;
- (NSString *)_autolayoutTrace;

@end 
```

我把这个类别放在它自己的头文件中，UIWindow_AutoLayoutDebug.h

在我的应用程序中，无论我在哪里调用 [[UIWindow keyWindow] _autolayoutTrace]，我都会导入 UIWindow_AutoLayoutDebug.h

我从 raywenderlich.com 团队的“iOS 6 by tutorials”第 1 卷一书中了解到如何在代码中调用 [[UIWindow keyWindow] _autolayoutTrace]。延迟通话的想法是我自己的。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-11T17:43:49.717

我不知道你是否做错了什么，但我使用视觉格式化语言：

```
[NSLayoutConstraint constraintsWithVisualFormat:@"V:|[contentsView]|"
                                            options:0
                                            metrics:nil
                                              views:NSDictionaryOfVariableBindings(contentsView)]];

[NSLayoutConstraint constraintsWithVisualFormat:@"H:|[contentsView]|"
                                            options:0
                                            metrics:nil
                                              views:NSDictionaryOfVariableBindings(contentsView)]]; 
```

我没有从跟踪它中看到任何模棱两可的布局警告。

# php - 在php中输出加载消息

> ID：14120084
> 
> 赞同：1
> 
> 时间：2013-01-02T10:05:32.613
> 
> 标签：php

**问题：**

在我执行一个很长的计算过程之前，我想向用户输出一条加载消息。

**代码：**

```
<html>        
<!doctype html>
            <head>
                <title>Loading</title>
            </head>

    <?php

    function longProcess()
    {
       //where long process takes a long time to compute
    }

    ?>
            <body>
                <?php
                        echo <div id = 'loading'> LOADING </div>
                        echo '</body>';
                        echo '</html>';
                        flush();
                        longProcess();

                ?> 
```

**更多详细信息：**

基本上，在调用 longProcess 函数之前，我希望向用户输出 LOADING。我使用flush，所以我可以输出HTML的结束标签，然后调用longProcess函数。问题是它没有被输出并且服务器正在计算漫长的过程。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-01-02T10:35:07.680

您需要的可能是类似彗星的功能。请尝试以下操作以使其正常工作。

```
<?php
// Disable buffering
@apache_setenv('no-gzip', 1);
@ini_set('zlib.output_compression', 0);
@ini_set('output_buffering', 'Off');
@ini_set('implicit_flush', 1);
// Flush buffers
ob_implicit_flush(1);
for ($i = 0, $level = ob_get_level(); $i < $level; $i++) ob_end_flush();
?><!DOCTYPE html>
<html>
<head>
  <title>Loading</title>
</head>
<body>
  <div id="loading">LOADING</div>
<?php
// We need to send enough junk messages to make it works for all browsers
echo str_repeat(" ", 1024), "\n";

ob_start();
// Long process starts here
// For this example, just sleep for 5 seconds
sleep(5); 
echo "Loaded";
// Flush output like this
ob_flush();
flush();
?>
</body>
</html> 
```

参考：

*   [http://jsjoy.com/blog/197/simple-php-comet-example](http://jsjoy.com/blog/197/simple-php-comet-example)
*   [为什么这个 PHP 代码（彗星）不起作用？](https://stackoverflow.com/questions/4519789/why-doesnt-this-php-code-comet-work)
*   [http://php.net/manual/en/function.flush.php#109239](http://php.net/manual/en/function.flush.php#109239)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-02T11:14:05.690

而不是在同一页面中计算，

1.  加载带有加载符号的页面
2.  启动对 PHP 文件的加载 ajax 调用并执行所有计算
3.  在响应 ajax 调用时，使您的输出替换加载的 div。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-02T10:11:26.227

PHP是服务器端的。您无法输出加载消息。

您可以尝试制作一个自动重定向到目标页面的页面（将您的“加载”消息放在此页面中）。现在你看到加载页面，直到你的目标页面被加载

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-01-02T10:36:36.523

您可以使用 PHP 输出 JavaScript。您将执行以下操作：

*   之前`longProcess()`，输出 JavaScript 设置一个`#contents`DIV`<body>`为加载动画
*   跑`longProcess()`
*   输出 JavaScript 以在其中设置`#contents`DIV`<body>`以输出您想要的任何内容，无论是数据、“完成”还是其他内容。

只是一个快速的想法，几乎可以肯定不是最好的，但它会起作用。

* * *

另一种方法是使用 PHP 重新定向到已完成的页面，一旦加载过程使用[header](http://php.net/manual/en/function.header.php)完成。

`header('Location: http://www.example.com/');`

最后，你应该看看肖的禁用缓冲！

# mysql - MySQL 数据库服务器中的高 CPU 使用率

> ID：14120088
> 
> 赞同：0
> 
> 时间：2013-01-02T10:05:54.173
> 
> 标签：mysql, cpu-usage

我必须运行一个查询，它会产生非常大的结果集（20K 结果和每行 5 列）。

我正在对数据进行一些处理并将结果存储在另一个数据库表中。

所有这些处理都是在 cron 进程上完成的。

我的问题是，当我运行查询时，我的数据库服务器的 CPU 利用率达到 100%，直到进程完成。

请帮助我了解此类场景的最佳实践。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-02T10:20:48.577

在这种情况下，您需要开始考虑 MySQL 实例的优化和/或垂直扩展。

*   尝试找到一种方法来优化您正在使用的 SQL 查询
*   如果可能，将 cron 作业拆分为几个执行较轻查询的步骤。
*   如果每次 cron 运行时返回的查询集中的某些数据相同 - 缓存它。
*   如果脚本执行的频率不是至关重要的，则拆分运行并将查询集限制为较小的数量。您可以在 20 分钟内使用查询集中的 5k 项执行脚本 4 次。
*   如果可能，请考虑迁移到非关系数据库。
*   对 MySQL 实例进行一些性能调整。
*   等等

# java - java锁定文件

> ID：14120090
> 
> 赞同：2
> 
> 时间：2013-01-02T10:05:57.340
> 
> 标签：java, jakarta-ee

我有一个 java 独立应用程序，它将处理目录中的文件。这个 java 应用程序在 AIX 框中运行，由一个每 1 分钟运行一次的 cron 作业触发。我的目标是如果调用 java 应用程序访问该目录中的特定文件，该文件应该被锁定以供第二次或其他调用访问，直到第一个 java 调用处理它并释放锁定。

java中有没有办法以编程方式锁定文件？这段代码应该特别适用于AIX

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-02T10:10:29.997

执行此操作的标准方法是从您的文件中创建一个`FileChannel`并调用`.lock()`它。此方法将创建一个`FileLock`您必须创建的对象`.release()`。

如果您无法获得锁，您将获得一个`OverlappingFileLockException`.

或者，您可以使用哨兵目录“锁定”文件：为其选择路径，创建目录，执行您需要执行的任何操作，然后在退出时删除目录。如果您无法创建目录，则意味着另一个进程占了上风。

无论您选择哪种方法，请务必释放锁定或删除`finally`块中的目录！

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-02T10:11:23.263

您可以[使用 NIO 锁定文件](http://docs.oracle.com/javase/6/docs/api/java/nio/channels/FileChannel.html#tryLock%28%29)，类似于

```
try
{
    RandomAccessFile file = new RandomAccessFile( "yourfile.txt" , "rw" );
    FileChannel fc = file.getChannel();
    FileLock fileLock = fc.tryLock();
    if ( fileLock != null )
    {
        // Do stuff on the file
    }
}
catch ( OverlappingFileLockException e )
{
    // File was locked
} 
```

应该管用。

干杯，

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-02T10:18:40.423

与其每分钟通过 cron 启动一个进程，不如在处理过程中等待（休眠）一分钟。

如果您的目标是处理您访问的文件，您也可以通过在准备好处理文件时重命名文件来实现相同的目的。在 Unix 操作系统中，重命名是原子的。

例如，您将数据写入文件`spool-${timestamp}`并将其重命名`data-${timestamp}`为准备好处理时。处理过程等待`data-${timestamp}`文件一出现就可以处理和删除，而无需额外的锁定机制。

# mysql - 命令导致 SQL 语法错误

> ID：14120093
> 
> 赞同：0
> 
> 时间：2013-01-02T10:06:04.067
> 
> 标签：mysql

为什么我会收到一条错误消息？

```
<?php
$output ="";
$query = "HELP;";
$output = mysql_query($query, $emailTrackerConnection) or die(mysql_error());

echo "<pre>$output</pre>";
?> 
```

我收到的输出：

> 您的 SQL 语法有错误；检查与您的 MySQL 服务器版本相对应的手册，以在第 1 行的 '' 附近使用正确的语法

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-02T10:11:38.163

`HELP;`（不带参数）是 MySQL 命令行工具的内部命令，而不是 SQL 命令：

```
Welcome to the MySQL monitor.  Commands end with ; or \g.
Your MySQL connection id is 1862
Server version: 5.1.39-community MySQL Community Server (GPL)

Copyright (c) 2000, 2012, Oracle and/or its affiliates. All rights reserved.

Oracle is a registered trademark of Oracle Corporation and/or its
affiliates. Other names may be trademarks of their respective
owners.

Type 'help;' or '\h' for help. Type '\c' to clear the current input statement. 
```

然而，如果你添加一个搜索字符串，你会得到一个[SQL 命令](http://dev.mysql.com/doc/refman/5.5/en/help.html)：

> 帮助“搜索字符串”

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-02T10:07:09.870

您在使用时显示指定关键字`HELP`，例如。

```
HELP 'contents' 
```

*   [SQLFiddle 演示](http://sqlfiddle.com/#!2/d41d8/5444)
*   [帮助](http://dev.mysql.com/doc/refman/5.0/en/help.html)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-02T10:13:16.960

`HELP ;`将返回此错误。尝试使用`HELP 'statement or keyword or operator' ;`获取特定关键字的帮助。

如果您想查找可用于 的关键字/运算符/语句，请`HELP`使用以下命令：

```
HELP '%' ; 
```

# jquery-ui - 请让我知道如何在此 jquery 代码中添加更新按钮功能

> ID：14120094
> 
> 赞同：1
> 
> 时间：2013-01-02T10:06:04.647
> 
> 标签：jquery-ui, jquery, jqgrid

```
<%@taglib prefix="s" uri="/struts-tags" %>
    <%@ taglib prefix="sj" uri="/struts-jquery-tags" %>
        <%@ taglib prefix="sjg" uri="/struts-jquery-grid-tags" %>
            <!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
            <html>

                <head>
                    <title>AJAX JSP PAGE</title>
                    <sj:head jqueryui="true" jquerytheme="redmond" />
                    <link rel="stylesheet" href="/struts2-jquery-grid-showcase-3.5.0/jqwidgets/styles/jqx.base.css"
                    type="text/css" />
                    <link rel="stylesheet" href="/struts2-jquery-grid-showcase-3.5.0/jqwidgets/styles/jqx.darkblue.css"
                    type="text/css" />
                    <script type="text/javascript" src="/struts2-jquery-grid-showcase-3.5.0/scripts/jquery-1.6.2.min.js"></script>
                    <script type="text/javascript" src="/struts2-jquery-grid-showcase-3.5.0/jqwidgets/jqxcore.js"></script>
                    <script type="text/javascript" src="/struts2-jquery-grid-showcase-3.5.0/jqwidgets/jqxdata.js"></script>
                    <script type="text/javascript" src="/struts2-jquery-grid-showcase-3.5.0/jqwidgets/jqxbuttons.js"></script>
                    <script type="text/javascript" src="/struts2-jquery-grid-showcase-3.5.0/jqwidgets/jqxscrollbar.js"></script>
                    <script type="text/javascript" src="/struts2-jquery-grid-showcase-3.5.0/jqwidgets/jqxmenu.js"></script>
                    <script type="text/javascript" src="/struts2-jquery-grid-showcase-3.5.0/jqwidgets/jqxgrid.js"></script>
                    <script type="text/javascript" src="/struts2-jquery-grid-showcase-3.5.0/jqwidgets/jqxgrid.selection.js"></script>
                    <script type="text/javascript" src="/struts2-jquery-grid-showcase-3.5.0/jqwidgets/jqxgrid.filter.js"></script>
                    <script type="text/javascript" src="/struts2-jquery-grid-showcase-3.5.0/jqwidgets/jqxgrid.sort.js"></script>
                    <script type="text/javascript" src="/struts2-jquery-grid-showcase-3.5.0/jqwidgets/jqxdropdownlist.js"></script>
                    <script type="text/javascript" src="/struts2-jquery-grid-showcase-3.5.0/jqwidgets/jqxlistbox.js"></script>
                    <script type="text/javascript" src="/struts2-jquery-grid-showcase-3.5.0/jqwidgets/jqxtabs.js"></script>
                    <script type="text/javascript">
                        $(document)
                            .ready(function () {
                            // prepare the data

                            $('#jqxTabs')
                                .jqxTabs({
                                width: 550,
                                height: 150
                            });

                            $("#myButton")
                                .jqxButton({
                                width: '280px',
                                height: '35px',
                                theme: 'darkblue'
                            });

                            var input1Val = "";
                            var input2Val = "";
                            var input3Val = "";

                            $("#input1")
                                .keyup(function () {

                                input1Val = $("#input1")
                                    .val()
                                myfunction();
                            });

                            function myfunction() {

                                var source = {
                                    datatype: "json",
                                    datafields: [{
                                        name: 'name',
                                        type: 'string'
                                    }, {
                                        name: 'age',
                                        type: 'number'
                                    }, {
                                        name: 'gender',
                                        type: 'string'
                                    }, {
                                        name: 'studentId',
                                        type: 'string'
                                    }, {
                                        name: 'homeAddress',
                                        type: 'string'
                                    }, {
                                        name: 'area',
                                        type: 'string'
                                    }, {
                                        name: 'fathersName',
                                        type: 'string'
                                    }, {
                                        name: 'button',
                                        type: 'string'
                                    }, ],

                                    id: 'id',
                                    url: 'callAJax.action?t=' + Math.random() + '&name=' + input1Val,
                                    async: true,
                                    sortcolumn: 'name',
                                    sortdirection: 'asc',
                                };

                                var dataAdapter = new $.jqx.dataAdapter(source, {
                                    loadComplete: function (data) {},
                                    loadError: function (xhr, status, error) {}
                                });

                                $("#jqxgrid")
                                    .jqxGrid({

                                    width: 900,
                                    height: 450,
                                    sortable: true,
                                    filterable: true,
                                    altrows: true,
                                    source: dataAdapter,
                                    columns: [{
                                        text: 'name',
                                        datafield: 'name',
                                        width: 100,
                                        cellsformat: 'c2'
                                    }, {
                                        text: 'Age',
                                        datafield: 'age',
                                        width: 50
                                    }, {
                                        text: 'Gender',
                                        datafield: 'gender',
                                        width: 80
                                    }, {
                                        text: 'Student Id',
                                        datafield: 'studentId',
                                        width: 120
                                    }, {
                                        text: 'Home Address',
                                        datafield: 'homeAddress',
                                        width: 180
                                    }, {
                                        text: 'Area',
                                        datafield: 'area',
                                        width: 100,
                                        cellsalign: 'right'
                                    }, {
                                        text: 'Fathers Name',
                                        datafield: 'fathersName',
                                        width: 120
                                    }, {
                                        text: 'Print',
                                        datafield: 'button',
                                        width: 100
                                    }, {
                                        text: 'Id',
                                        datafield: 'id',
                                        width: 50
                                    }, ],
                                    gridComplete: function () {

                                        alert("gridcomplete()");
                                    },
                                });

                                $('#events')
                                    .jqxPanel({
                                    width: 300,
                                    height: 80,
                                    theme: theme
                                });

                                $("#jqxgrid")
                                    .bind("sort", function (event) {
                                    $("#events")
                                        .jqxPanel('clearcontent');

                                    var sortinformation = event.args.sortinformation;
                                    var sortdirection = sortinformation.sortdirection.ascending ? "ascending" : "descending";
                                    if (!sortinformation.sortdirection.ascending && !sortinformation.sortdirection.descending) {
                                        sortdirection = "null";
                                    }

                                    var eventData = "Triggered 'sort' event <div>Column:" + sortinformation.sortcolumn + ", Direction: " + sortdirection + "</div>";
                                    $('#events')
                                        .jqxPanel('prepend', '<div style="margin-top: 5px;">' + eventData + '</div>');
                                });

                                $('#clearsortingbutton')
                                    .jqxButton({
                                    height: 25,
                                    theme: theme
                                });
                                $('#sortbackground')
                                    .jqxCheckBox({
                                    checked: true,
                                    height: 25,
                                    theme: theme
                                });
                                // clear the sorting.
                                $('#clearsortingbutton')
                                    .click(function () {
                                    $("#jqxgrid")
                                        .jqxGrid('removesort');
                                });
                                // show/hide sort background
                                $('#sortbackground')
                                    .bind('change', function (event) {
                                    $("#jqxgrid")
                                        .jqxGrid({
                                        showsortcolumnbackground: event.args.checked
                                    });
                                });

                            }

                        });
                    </script>
                </head>

                <body>
                    <center>
                        <br />
                        <button id="button1" name="button">Click to make Jquery Ajax request</button>
                        <br />Populates data here.
                        <br/>
                        <table id="list2"></table>
                        <div id="pager2"></div>
                        <br />
                        <br />
                        <input type="button" name="button" id='myButton' onclick="setStart();"
                        value="Click to make Javascript Ajax request" />
                        <br/>Javascript Ajax call output
                        <br/>
                        <div id="intValueDiv" style="color: red;font-weight: bold"></div>
                        <br/>
                        <br/>
                        <div style="margin-top: 30px;">
                            <input id="resizeButton" type="button" value="Auto Resize Columns" />
                            <br/>
                            <input type="text" id="input1" name="input1" />
                        </div>
                        <br/>
                        <br/>
                        <div id="jqxgrid"></div>
                    </center>
                </body>

            </html> 
```

我能够动态加载数据。但现在我想

1）将按钮添加到每一行。2）单击时，想要访问行值并进行ajax调用。

任何人都可以让我知道所需的更改。

请重新发布完整的代码。那真的很有帮助。

谢谢。

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2014-03-07T15:06:06.277

我在这里使用了这个信息[http://www.jqwidgets.com/jquery-widgets-demo/demos/jqxgrid/index.htm?(arctic)#demos/jqxgrid/popupediting.htm](http://www.jqwidgets.com/jquery-widgets-demo/demos/jqxgrid/index.htm?(arctic)#demos/jqxgrid/popupediting.htm)成功。我看到了它做了什么，然后查看了查看源代码以完成学习。花了我大约30分钟。完成这一切还不错。

# sql - 数据分析器-Sql

> ID：14120100
> 
> 赞同：1
> 
> 时间：2013-01-02T10:06:25.033
> 
> 标签：sql, oracle, oracle11g

我们有一个学生表，其中 student_id 整数、名称 varchar 和年龄作为列。我们使用 oracle 作为我们的 dbms。我们从平面文件中获取数据并使用 sql 加载器加载数据。因此，在加载时，由于记录重复等原因，我们会遇到异常。为了确定我们考虑设计分析仪。为此，我们设计了一个包含相同列的副本表，但所有列都是 varchar。所以首先我们将数据加载到分析器表中，然后我们识别记录。由于分析器表带有 varchar 列，因此它可以使用任何类型的数据，例如甚至 student_id 字段的文本。是否有可能通过 sql 查询来识别这些记录？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-02T11:37:50.540

更好的方法可能是根据您当前使用 SQL*Loader 上传的文件定义一个外部表，并将其视为“分析器”表。识别重复项的方法将使用标准 SQL 语法，并且取决于您是否在新数据集中以及新旧数据集之间是否存在必须检查的重复项。如果只有后者，那么 MERGE 语句对于此目的非常有效。

不确定 varchar 的想法——除非文件中有损坏的数据，否则我看不出它有什么作用。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-02T13:10:48.787

如何使用 LOG ERRORS ？例如：

首先创建表来保存错误....

```
DBMS_ERRLOG.CREATE_ERROR_LOG('STUDENT'); 
```

接下来 sqlload 数据到 tmp 表中，然后运行一个 plsql 例程来加载数据.....

```
INSERT INTO student
    SELECT to_number(ts.student_id), name, to_number(age)
    FROM tmp_student ts
    LOG ERRORS
    REJECT LIMIT UNLIMITED; 
```

要查看错误：

```
SELECT * FROM err$_student; 
```

# c#-4.0 - EF 5.0 table-per-type inheritance gives strange queries

> ID：14120111
> 
> 赞同：0
> 
> 时间：2013-01-02T10:07:11.633
> 
> 标签：c#-4.0, ef-code-first, entity-framework-4.1, entity-framework-5, table-per-type

I have standard table-per-type inheritance case in code first approach to an existing schema:

```
[Table("base_object")]
public partial class BaseObject
{
  public BaseObject()
  { 

  }

  [Key]
  [Column("id")]
  public long Id {get; set;}
  [Column("slug")]
  public string Slug {get; set;}
  ...       
}

[Table("user")]
public partial class User: BaseObject
{
  public User()
  {

  }

  [Column("login")]
  public string Login {get; set;}
  [Column("email")]
  public string Email {get; set;}
} 
```

Mapping is straightforward as described in annotations, user.id is primary key and foreign key to base_object.id

In test case, during first call to "Users" repository from Context, EF is generating query:

```
SELECT 
1 AS [C1], 
'0X0X' AS [C2], 
[Extent1].[id] AS [id], 
[Extent2].[slug] AS [slug], 
[Extent1].[login] AS [login], 
[Extent1].[email] AS [email], 
[Extent1].[BaseObject_id] AS [BaseObject_id]
FROM  [dbo].[user] AS [Extent1]
INNER JOIN [dbo].[base_object] AS [Extent2] ON [Extent1].[id] = [Extent2].[id] 
```

which gives an error, because column "user.BaseObject_id" does not exists! Whitout this line: *[Extent1].[BaseObject_id] AS [BaseObject_id]* query would be OK.

What am I doing wrong?

I am using EF5.0 with .NET 4.0

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-01T07:07:14.970

It turned out that "..." made the difference.

`BaseObject` had a collection:

```
[InverseProperty("Object")]
public virtual ICollection<UserHasObjectRight> UserHasObjectRights { get; set; } 
```

And `User` had a collection:

```
[InverseProperty("User")]
public virtual ICollection<UserHasObjectRight> UserHasObjectRights { get; set; } 
```

It was causing a strange query generation. I have to remove duplicating collection from base object class and it started to work.

# javascript - 数据库更新时自动刷新页面

> ID：14120121
> 
> 赞同：0
> 
> 时间：2013-01-02T10:07:54.737
> 
> 标签：javascript, asp.net

我在asp.net 中创建了一个页面。它正在访问数据库中的数据。我想要的是每当我更改数据库中的数据时，更改应该会自动反映在页面上，而无需用户按下刷新按钮。有人可以告诉我该怎么做。可以使用java脚本完成吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-02T10:08:51.897

您可以使用[Web 套接字](http://www.websocket.org/)将数据发送到连接的客户端，也可以使用 AJAX、[jQuery ajax](http://api.jquery.com/jQuery.ajax/)将服务器池化以进行数据库更改，或者您可以使用 asp.net [ajax 计时器](http://ajax.net-tutorials.com/controls/timer-control/)控制。使用 asp.net ajax 计时器会比其他人更直接。

**使用 asp.net 定时器**

*html*

```
<asp:ScriptManager ID="ScriptManager1" runat="server" />
    <asp:Timer runat="server" id="UpdateTimer" interval="5000" ontick="UpdateTimer_Tick" />
    <asp:UpdatePanel runat="server" id="TimedPanel" updatemode="Conditional">
        <Triggers>
            <asp:AsyncPostBackTrigger controlid="UpdateTimer" eventname="Tick" />
        </Triggers>
        <ContentTemplate>
            <asp:Label runat="server" id="DateStampLabel" />
        </ContentTemplate>
</asp:UpdatePanel> 
```

代码背后（服务器端代码）

```
protected void UpdateTimer_Tick(object sender, EventArgs e)
{
   // Update the ui with database changes
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-02T10:11:42.293

阅读有关[长轮询](http://techoctave.com/c7/posts/60-simple-long-polling-example-with-javascript-and-jquery)和[彗星编程的信息](http://en.wikipedia.org/wiki/Comet_%28programming%29)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-02T10:16:00.483

对于网页，最好的方法是使用 javascript/jQuery 异步轮询页面

javascript: **setTimeout** - [http://www.w3schools.com/js/js_timing.asp](http://www.w3schools.com/js/js_timing.asp)

jquert: **$.ajax** - [http://api.jquery.com/jQuery.ajax/](http://api.jquery.com/jQuery.ajax/)

1.  创建一个以指定间隔循环的函数 -**函数 CheckServer(seconds)**
2.  创建一个页面，告诉服务器上有更新 - **Updated.aspx**
3.  使用**$.ajax**在**函数 CheckServer(seconds)**中调用**Updated.aspx**并检查更新。
***   当有更新时，运行代码以**刷新**页面上的必要部分**

 **您可以在此处找到作为 VS2012 ASP.NET 项目的示例：

[https://docs.google.com/file/d/0B9m3YXHeSTDOakxVbk50MHhhTkE/edit](https://docs.google.com/file/d/0B9m3YXHeSTDOakxVbk50MHhhTkE/edit)

有3个重要文件：

1.  **UserPage.aspx** - 用户将在哪里看到更新。
2.  **MakeUpdatePage.aspx** - 管理员进行更新的地方。
3.  我没有通过 aspx 页面检查更新，而是在**services.asmx**中创建了管理更新和数据交换的 Web 服务。

代码并不完美，只是为了给你故事的要点，但它确实有效。我在 2 个用户、1 个管理员的情况下对其进行了测试。

这个解决方案有点复杂，因为我还向您介绍了**Web 服务**。而不是默认的。这些有点定制。它们具有使它们能够被客户端的浏览器直接调用并返回**json 对象**的属性。因此，您还将了解**json**是什么...

你可以在这里找到一篇关于这些概念的好文章：

[http://www.codeproject.com/Articles/45275/Create-a-JSON-WebService-in-ASP-NET-2-0-with-a-jQu](http://www.codeproject.com/Articles/45275/Create-a-JSON-WebService-in-ASP-NET-2-0-with-a-jQu)**

# android - 用户使用 facebook Facebook login API 登录

> ID：14120122
> 
> 赞同：0
> 
> 时间：2013-01-02T10:07:59.253
> 
> 标签：android

我开发了一个应用程序，它使用 Facebook 登录让用户登录到应用程序。但是我必须卸载 Facebook for android 才能工作。任何帮助？下面是代码。

```
public class MokoActivity extends Activity implements OnClickListener{
    TextView create_account;
    EditText name;

    @Override
    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.main);
        create_account=(TextView)findViewById(R.id.textView_createAccount);
        name=(EditText)findViewById(R.id.editText_name);
        create_account.setOnClickListener(this);
    }

    public void onClick(View v) {
        // TODO Auto-generated method stub
        switch(v.getId()){
        case R.id.textView_createAccount:
                String user_name=name.getText().toString();
                if(user_name.length()<4){
                    Toast toast=Toast.makeText(MokoActivity.this,"Invalid Name",Toast.LENGTH_LONG);
                    toast.show();
                }

                else{
            Session.openActiveSession(this, true,new Session.StatusCallback(){
                public void call(Session session,SessionState state,Exception exception){
                    if(state.isOpened()){
                        Intent intent=new Intent(MokoActivity.this,HomeActivity.class);
                        intent.putExtra("username",name.getText().toString());
                        startActivity(intent);
                    }
                }
            });
            }
            break;
        }
    }

    @Override
      public void onActivityResult(int requestCode, int resultCode, Intent data) {
          super.onActivityResult(requestCode, resultCode, data);
          Session.getActiveSession().onActivityResult(this, requestCode, resultCode, data);
      }
} 
```

仅当安装了适用于 android 的 facebook 时，它才能正常工作，登录后它不会重定向到 HomeActivity 意图。我必须卸载适用于 android 的 facebook 才能正常工作。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-02T10:41:21.887

请更新您的应用程序的以下代码，它将解决您的问题，如果您对此有任何疑问，请告诉我。

```
public void loginAndPostToWall() {
    facebook.authorize(this, PERMISSIONS, Facebook.FORCE_DIALOG_AUTH,
            new LoginDialogListener());
} 
```

有关将 Facebook 集成到具有完整源代码的 android 应用程序中的更多信息，请参见下面的链接。

[Facebook 集成 - 安卓](http://androidcodeexamples.blogspot.in/2011/12/how-to-update-facebook-status-via.html)

# php - MongoDB 聚合 PHP，按小时分组

> ID：14120123
> 
> 赞同：1
> 
> 时间：2013-01-02T10:08:01.417
> 
> 标签：php, mongodb, mongodb-php

我有以下格式的文件

```
{
  "_id" : ObjectId("12e123123123123123"),
  "client_id" : "12345667889",
  "resource" : "test/test",
  "version" : "v2",
  "ts" : new Date("Wed, 02 Jan 2013 15:34:58 GMT +08:00")
} 
```

这`ts`是一个 MongoDate() 字段。

我正在尝试在 php 中使用 MongoDB 聚合函数按 client_id 和小时分组并计算使用情况以显示在表/图中

这是我目前的尝试

```
$usage = $this->db->Usage->aggregate(array(array(
  '$project' => array(
    'hour' => array(
      'years' => array( '$year' => '$ts' ),
      'months' => array( '$month' => '$ts' ),
      'days' => array( '$dayOfMonth' => '$ts' ),
      'hours' => array( '$hour' => '$ts' ),
    )
  ),
  '$group' => array(
    '_id' => array(
      'client_id' => '$client_id',
      'hour' => '$hour',
    ),
   'number' => array('$sum' => 1),
  )
))); 
```

不幸的是，我得到的回复只是按 client_id 分组，没有别的。

```
[result] => Array
    (
        [0] => Array
            (
                [_id] => Array
                    (
                        [client_id] => adacf8deba7066e4
                    )

                [number] => 12
            )

    ) 
```

谁能指出我正确的方向，或者有另一种按小时分组的解决方案？

--已修复-- PHP 要求您将每个管道放在一个单独的数组中，并将整个内容放在一个数组中。在 JohnnyHK 的帮助下查看下面的更新解决方案

```
$usage = $this->db->Usage->aggregate(array(array(
        '$project' => array(
            'client_id' => 1,
            'hour' => array(
                'years' => array( '$year' => '$ts' ),
                'months' => array( '$month' => '$ts' ),
                'days' => array( '$dayOfMonth' => '$ts' ),
                'hours' => array( '$hour' => '$ts' ),
            )
        )),array(
        '$group' => array(
            '_id' => array(
                'client_id' => '$client_id',
                'hour' => '$hour',
            ),
            'number' => array('$sum' => 1),
        )
    ))); 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-02T14:09:22.233

它不应该创建您所看到的结果，但您确实需要包含`client_id`在您的`$project`运算符中，以便运算符可以使用它`$group`。

```
'$project' => array(
  'client_id' => 1,
  'hour' => array(
    'years' => array( '$year' => '$ts' ),
    'months' => array( '$month' => '$ts' ),
    'days' => array( '$dayOfMonth' => '$ts' ),
    'hours' => array( '$hour' => '$ts' ),
  )
), 
```

在我进行更改后，shell 等效项起作用了：

```
db.test.aggregate(
    { $project: {
        hour: {
            years: {$year: '$ts'},
            months: {$month: '$ts'},
            days: {$dayOfMonth: '$ts'},
            hours: {$hour: '$ts'}
        },
        client_id: '$client_id'
    }},
    { $group: {
        _id: { client_id: '$client_id', hour: '$hour' },
        number: { $sum: 1}
    }}) 
```

回来：

```
{
  "result": [
    {
      "_id": {
        "client_id": "12345667889",
        "hour": {
          "years": 2013,
          "months": 1,
          "days": 2,
          "hours": 7
        }
      },
      "number": 1
    }
  ],
  "ok": 1
} 
```

# ruby-on-rails - 带有轮胎的 Elasticsearch：带有多个单词的 edgeNgram

> ID：14120127
> 
> 赞同：3
> 
> 时间：2013-01-02T10:08:20.470
> 
> 标签：ruby-on-rails, elasticsearch, tire

假设我有 5 部电影片名：

*   无太阳
*   珊莎
*   这也是
*   索尔古德
*   唯一的幸存者

我想实现一个具有这种预期行为的自动完成搜索字段：

*   “Sans” > Sans Soleil，珊莎
*   “Sans so” > Sans Soleil
*   “所以” > 这就是这样，索尔·古德，唯一的幸存者
*   “原来如此” > 这也是
*   “Sol” > Sol Goode，Sole Survivor，Sans Soleil

这个用例似乎很明显，必须被许多人使用，但我就是无法让它正常工作，而且我似乎找不到任何答案或文档来帮助。这是我目前的模型：

```
class Film < Media
  include Tire::Model::Search
  include Tire::Model::Callbacks

  settings  :analysis => {
              :filter => {
                :title_ngram  => {
                  "type"      => "edgeNGram",
                  "min_gram"  => 2,
                  "max_gram"  => 8,
                  "side"      => "front" }
              },
              :analyzer => {
                :title_analyzer => {
                  "tokenizer"    => "lowercase",
                  "filter"       => ["title_ngram"],
                  "type"         => "custom" }
              }
            } do
    mapping do
      indexes :title, :type => 'string', :analyzer => 'title_analyzer'
      indexes :int_english_title, :type => 'string', :analyzer => 'title_analyzer'
    end
  end
end 
```

以及如何在我的 search_controller 中处理查询：

```
search = Tire.search ['books', 'films', 'shows'], :load => true, :page => 1, :per_page => 10 do |s|
    s.query do |query|
        query.string "title:#{params[:search]}"
    end
end
@results = search.results 
```

这会产生一些奇怪的行为：

*   “Sans so”按此顺序返回“Sansa，Sans Soleil，So Is This”。
*   “So is”按此顺序返回“Sol Goode，Sans Soleil，Sole Survivor，So Is This”。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-03T08:44:58.933

我认为您可以通过将[`match`](https://github.com/karmi/tire/blob/master/test/integration/match_query_test.rb)查询设置为`type:"phrase_prefix"`. 您的大多数示例（但不是全部）都可以使用。

使用 Ngrams，您可以更好地控制流程，但它们的召回率相当高（它们通常返回比您想要的更多的数据），您必须与之抗争。这是您使用多个查询词（“Sans so”）观察到的“奇怪行为”，因为它们作为`Sans OR so`查询有效地执行。

尝试使用`default_operator: "AND"`选项（参见轮胎的[query_string_test.rb](https://github.com/karmi/tire/blob/master/test/integration/query_string_test.rb)），或者更确切地说是带有选项的[`match`](http://www.elasticsearch.org/guide/reference/query-dsl/match-query.html)查询（参见轮胎的[match_query_test.rb](https://github.com/karmi/tire/blob/master/test/integration/match_query_test.rb)）`operator: "AND"`。

有一些关于自动完成、Tire 和 Ngrams 的文章：

*   [http://dev.af83.com/2012/01/19/autocomplete-with-tire.html](http://dev.af83.com/2012/01/19/autocomplete-with-tire.html)
*   [http://masonoise.wordpress.com/2012/08/11/elasticsearch-with-rails-and-tire/](http://masonoise.wordpress.com/2012/08/11/elasticsearch-with-rails-and-tire/)
*   [http://euphonious-intuition.com/2012/08/more-complicated-mapping-in-elasticsearch/](http://euphonious-intuition.com/2012/08/more-complicated-mapping-in-elasticsearch/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-02T10:16:24.880

尝试关注

```
search = Tire.search ['books', 'films', 'shows'], :load => true, :page => 1, :per_page => 10 do |s|
      s.query do |q|
        q.boolean do |b|
          b.must {|m| m.string params[:search]} 
        end
      end
end 
```

# objective-c - 自定义 UINavigationBar 图片

> ID：14120130
> 
> 赞同：1
> 
> 时间：2013-01-02T10:08:37.920
> 
> 标签：objective-c, ios

我正在尝试为 iOS 6 实现自定义 UINavigationBar 图像背景，但我没有运气。它所显示的只是 Apple 的普通款（没有后退按钮）。我在 viewDidLoad 中尝试了以下代码（一次一个）：

```
[[UINavigationBar appearance] setBackgroundImage:myImage forBarMetrics:UIBarMetricsDefault];

[self.navigationController.navigationBar setBackgroundImage:myImage forBarMetrics:UIBarMetricsDefault]; 
```

我通过以下方式呈现所需的视图：

```
optionViewController *choose= [[optionViewController alloc] initWithNibName:@"optionViewController" bundle:nil];
UINavigationController *aNavController = [[UINavigationController alloc] initWithRootViewController:choose];
[self presentViewController: aNavController animated:YES completion:nil]; 
```

任何帮助，将不胜感激。谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-02T10:11:49.670

您可以像这样设置导航栏自定义图像：-

```
 optionViewController *choose= [[optionViewController alloc] initWithNibName:@"optionViewController" bundle:nil];
        UINavigationController *aNavController = [[UINavigationController alloc] initWithRootViewController:choose];
        UIImage *image = [UIImage imageNamed:@"imageName"];
        [aNavController.navigationBar setBackgroundImage:image forBarMetrics:UIBarMetricsDefault];

        [self presentModalViewController:aNavController animated:YES]; //change here to PresentViewcontroller to presentmodelViewcontroller 
```

这是图像：-

![在此处输入图像描述](../Images/37f34036f41b98fb9cb81aee8e12f702.png)

在上图中，该`Back`按钮不是默认按钮，而是以编程方式进行的。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-02T10:34:09.250

试试这个，

```
if([self.navigationController.navigationBar respondsToSelector:@selector(setBackgroundImage:forBarMetrics:)] ) {
    //iOS 5 new UINavigationBar custom background
    [self.navigationController.navigationBar setBackgroundImage:[UIImage imageNamed:@"navbg_ForiPhone5_Imagename.png"] forBarMetrics: UIBarMetricsDefault];
} else {
    [self.navigationController.navigationBar insertSubview:[[UIImageView alloc] initWithImage:[UIImage imageNamed:@"navbg_ForOtherIphone_Imagename.png"]] atIndex:0];
} 
```

和有关信息转到此[链接](http://iphoneeasydevelopment.blogspot.com/search/label/General)

# c++ - 链表中的头部未正确链接

> ID：14120131
> 
> 赞同：0
> 
> 时间：2013-01-02T10:08:38.357
> 
> 标签：c++, linked-list

当 i 从链表中删除元素后显示时，显示 0 代替已删除的元素。我在更新节点时遇到问题。谁能解释发生了什么？为什么显示0？

```
#include<iostream>
#include<stdlib.h>
using namespace std;

    class node {

    public:
      int data;
      node *link;

    };

    class linkedlist {

        node *head;

    public:

        linkedlist() {
            head=NULL;
        }

        int add(int data1) {

            node *insertnode=new node;
            insertnode->data=data1;
            insertnode->link=NULL;

            node *temp=head;

            if(temp!=NULL)
            {
                while(temp->link!=NULL)
                {
                    temp=temp->link;
                }
                temp->link=insertnode;

            }
            else{head=insertnode;}

        }

        void disp()
        {
            node *temp1=head;
            cout<<endl;
            if(temp1==NULL)
            {
                cout<<"Empty"<<endl;
            }

            if(temp1->link==NULL)
            {
                cout<<temp1->data<<endl;

            }
            else {

                do {
                    cout<<temp1->data<<endl;
                    temp1=temp1->link;
                } while(temp1!=NULL);

            }

        }

        int remove(int removedata)
        {
            node *previous;
            node *temp2=head;
            if(temp2==NULL)
                {exit(0);}

            if(temp2->link==NULL)
            {
                delete temp2;
                head=NULL;
            }

            else
            {

                while(temp2!=NULL)
                {

                    if(temp2->data==removedata)
                    {
                        previous=temp2;
                        delete temp2;
                    }

                    temp2=temp2->link;

                }

            }

        }

    };

    int main()
    {

        linkedlist list;
        list.add(10);
        list.add(100);
        list.add(200);
        list.remove(10);
        list.disp();

    } 
```

显示的输出是：

```
0
100
200 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-02T10:11:24.887

您已删除头节点，但如果发生这种情况，您的代码中不会重新分配头节点。

因此，您在这里拥有的是未定义的行为。

你也这样做：

```
if(temp2->data==removedata)
{
    previous=temp2;
    delete temp2;
}
temp2=temp2->link; 
```

换句话说，你删除了一些东西，然后取消引用它。我不确定`previous`这里应该做什么，但它现在*还*包含一个指向已删除内容的指针。幸运的是，它似乎是它唯一引用的地方（这里的意图是什么？）

而且您的函数似乎没有返回任何内容，但它被声明为返回一个 int。

所以我认为这里的逻辑都是错误的。

你需要做的是：

*   如果您的节点是头节点，则将头节点指向您要删除的节点的下一个节点。
*   否则，找到前一个节点（下一个要删除的节点所在的节点），并更新该节点以指向您要删除的节点的下一个节点。
*   删除节点，现在没有任何引用它。

像这样的东西（未经测试）：

```
if(head == NULL) return; // List is empty.

node *prev = head;
if(prev->data == removedata)
{
    head = prev->link;
    delete prev;
    return; // removed the head node
}
while(prev->link)
{
    if(prev->link->data == removedata)
    {
        node *t = prev->link;
        prev->link = t->link;
        delete t;
        return; // removed a non-head node
    }
    prev = prev->link;
}
// data is not in the list 
```

或者，如果您想尝试变得聪明并消除特殊情况：

```
node **prevptr = &head;
node *cur = head;
while(cur)
{
    if(cur->data == removedata)
    {
        *prevptr = cur->link;
        delete cur;
        break;
    }
    prevptr = &cur->link;
    cur = cur->link;
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-02T10:36:49.767

我可以建议我的代码吗？

```
int removeData(int target)
{
  //Let's return -1 if we can't find the target element.
  node *p,*q;
  for(q=head;q!=NULL && q->data!=target;p=q,q=q->link)
     ;
  if(q==NULL)
  {
    //Either the list was empty or the target element was not on the list
    return -1;
  }
  else
  {
    //We found the element, let's delete it.
    int ret=q->data;
    if(q==head)//If target node is the first node in list
      head=q->link;
    else
      p->link=q->link;
    delete q;//We delete the node pointed to by q here, which is our target node
    return ret;  
  }  
} 
```

让我解释一下上面的代码。首先我们有两个临时指针，它们将指向前一个节点（**p**）和当前节点（**q**），同时我们正在遍历链表。我们将遍历列表只要列表没有结束或者只要当前节点不是我们的目标节点。当我们退出 for 循环时，我们可能有两个原因退出。要么**q**变成 NULL，这可能有两种含义，要么我们的列表为空，要么我们的列表没有目标节点。所以我们返回 -1，报告问题。或者`q->data`等于target，表示我们找到了目标节点，让我们删除它。我们存储当前值并删除节点。习惯上返回已删除节点的数据。希望对您有所帮助。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-02T10:40:26.117

这与[您对上一个问题的](https://stackoverflow.com/q/14118775/78845)[回答](https://stackoverflow.com/a/14118833/78845)密切相关。

让我们格式化这个函数并仔细看看。

```
int remove(int removedata)
{
    node* previous;     // Why is this unintialised?
    node* temp2 = head; // Can you think of a more meaningful name for this
                        // variable? Perhaps "current"?
    if (temp2 == NULL)
    {
        exit(0); // Do you really want to exit the program if you try to
                 // remove an item from an empty list? Is there a better way
                 // to handle this?
    }

    if(temp2->link == NULL) // What is so special about a linked list with one element?
    {
        delete temp2; // You've not checked to see if this element is
                      // `removedata`
        head = NULL;  // So calling this function for any list with one element
                      // results in an empty list. This is probably
                      // undesirable
    }
    else
    {
        while (temp2 != NULL) // Consider using a for-loop for iteration. It
                              // couples the increment(s) with the
                              // terminating condition.
        {
            if (temp2->data == removedata) // At this point we have found
                                           // our candidate for removal
            {
                previous = temp2; // This is not the "previous" node, but
                                  // the "current" one. And this variable is
                                  // never used. You do need to know where
                                  // the previous node is and whether it is
                                  // 'head' to update either the 'link' or
                                  // 'head'

                delete temp2;     // This does remove the correct node but
                                  // leaves the previous 'link' pointer
                                  // dangling and any subsequent nodes are
                                  // orphaned.
            }
            temp2 = temp2->link; // See comment above about for-loops.
        }
    }
} // This function is declared `int` but has no return statement. 
```

另一种实现可能看起来像这样（未经测试）：

```
void remove(int removedata)
{
    for (node* current = head, * previous = NULL;
        current;
        previous = current, current = current->link)
    {
        if (current->data == removedata)
        {
            if (previous)
            {
                previous->link = current->link;
            }
            else
            {
                head = current->link;
            }
            delete current;
            break;
        }
    }
} 
```

# php - 根据邮政编码和距离搜索以搜索类别

> ID：14120136
> 
> 赞同：0
> 
> 时间：2013-01-02T10:08:58.100
> 
> 标签：php, mysql, distance, latitude-longitude

我正在根据邮政编码和距离进行搜索以搜索类别。我想要该邮政编码的 10 英里收音机中特定类别的结果。

我的表格格式是

```
CREATE TABLE IF NOT EXISTS `uk_data` (
  `slno` int(10) NOT NULL AUTO_INCREMENT,
  `comp_name` varchar(150) DEFAULT NULL,
  `comp_no` varchar(50) DEFAULT NULL,
  `comp_street` varchar(100) DEFAULT NULL,
  `comp_area` varchar(100) DEFAULT NULL,
  `comp_post_code` varchar(15) DEFAULT NULL,
  `comp_phone` varchar(100) DEFAULT NULL,
  `comp_phone1` varchar(100) DEFAULT NULL,
  `cat1` varchar(100) DEFAULT NULL,
  `cat2` varchar(100) DEFAULT NULL,
  `cat3` varchar(100) DEFAULT NULL,
  `cat4` varchar(100) DEFAULT NULL,
  `cat5` varchar(100) DEFAULT NULL,
  `cat6` varchar(100) DEFAULT NULL,
  `cat7` varchar(100) DEFAULT NULL,
  `cat8` decimal(9,6) DEFAULT NULL,
  `cat9` decimal(9,6) DEFAULT NULL,
  `cat10` varchar(15) DEFAULT NULL,
  PRIMARY KEY (`slno`),
  UNIQUE KEY `Phone` (`comp_phone`),
  KEY `cat10` (`cat10`)
) ENGINE=MyISAM  DEFAULT CHARSET=latin1 AUTO_INCREMENT=31717 ; 
```

现在

```
cat10 is postcode

cat8 is Latitude

cat9 is Longitude 
```

我能够计算距离并在纬度和经度的特定英里范围内得到结果

```
SELECT cat10, ( 3959 * acos( cos( radians( {$coords['Latitude']} ) ) 
* cos( radians( cat8 ) ) * cos( radians( cat9 ) - radians( {$coords['Longitude']} ) ) 
+ sin( radians( {$coords['Latitude']} ) ) * sin( radians( cat8 ) ) ) ) 
AS distance FROM uk_data 
HAVING distance <= {$radius} ORDER BY distance

$coords = array('Latitude' => "57.149727", 'Longitude' => "-2.094735");
$radius = .5;    
$uk_data_radious = uk_data_radious_test($coords,$radius,$q,$pc); 
```

现在我正在尝试进行完整搜索以获取具有特定邮政编码距离的类别..

```
SELECT *, ( 3959 * acos( cos( radians( {$coords['Latitude']} ) ) * cos( radians( cat8 ) ) * cos( radians( cat9 ) - radians( {$coords['Longitude']} ) ) + sin( radians( {$coords['Latitude']} ) ) * sin( radians( cat8 ) ) ) ) AS distance 
    FROM uk_data where
        cat1 like :cat OR
        cat2 like :cat OR
        cat3 like :cat OR
        cat4 like :cat OR
        cat5 like :cat OR
        cat6 like :cat OR
        cat7 like :cat
    HAVING distance <= {$radius} 
    ORDER BY distance 
```

但这不起作用。`HAVING`我知道 Query 中有一个错误，但不知道如何使用3 个参数和 Where 一起处理此查询`Postcode Distance and categories`

错误

```
Fatal error: Uncaught exception 'PDOException' with message 'SQLSTATE[42000]: Syntax error
 or access violation: 1064 You have an error in your SQL syntax; check the manual that
 corresponds to your MySQL server version for the right syntax to use near ':cat OR cat2 
like :cat OR cat3 like :cat OR cat4 like :cat OR ' at line 4' in
 D:\Winginx\home\****\public_html\functions.php:365 Stack trace: #0 
D:\Winginx\home\****\public_html\functions.php(365): PDO->query('SELECT *, ( 395...') #1 
D:\Winginx\home\***\public_html\miles_output.php(14): uk_data_radious_test(Array, 0.5, 
'Tool') #2 {main} thrown in D:\Winginx\home\***\public_html\functions.php on line 365 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-03T05:21:09.963

我终于找到了我的问题的解决方案......但我认为可能有更好的方法来做到这一点......我仍然想在这里分享答案，所以如果有人正在寻找相同的答案可能会得到帮助，是的，如果有人有更好的方法来做到这一点，请建议 thx

这是我在做什么

第一使功能

```
function distance($lat1, $lon1, $lat2, $lon2, $unit) { //** this to calculate distance in Miles or Km

      $theta = $lon1 - $lon2; 
      $dist = sin(deg2rad($lat1)) * sin(deg2rad($lat2)) +  cos(deg2rad($lat1)) * cos(deg2rad($lat2)) * cos(deg2rad($theta)); 
      $dist = acos($dist); 
      $dist = rad2deg($dist); 
      $miles = $dist * 60 * 1.1515;
      $unit = strtoupper($unit);

      if ($unit == "K") {
        return ($miles * 1.609344); 
      } else if ($unit == "N") {
          return ($miles * 0.8684);
        } else {
            return $miles;
          }
    }

        function uk_data_radious($coords, $radius){//** this to get result within certain radios for a postcode
        global $DBH;
        $STH = $DBH->prepare("SELECT DISTINCT cat10, ( 3959 * acos( cos( radians({$coords['Latitude']}) ) 
                  * cos( radians( cat8 ) ) 
                  * cos( radians( cat9 ) - radians({$coords['Longitude']}) ) 
                  + sin( radians({$coords['Latitude']}) ) 
                  * sin( radians( cat8 ) ) )) AS distance FROM uk_data HAVING distance <= {$radius} ORDER BY distance");
        $STH->bindValue(':postcode', "$postcode", PDO::PARAM_STR);
        $STH->setFetchMode(PDO::FETCH_ASSOC);
        $STH->execute();
        return $STH;
    }

        function uk_data_pc_count($user_count){//*** this is to check if post code is in our database or not 
        global $DBH;
        $STH = $DBH->prepare("SELECT * from uk_data where cat10 = :user_count");
        $STH->bindValue(':user_count', $user_count, PDO::PARAM_STR);
        $STH->execute();
        $row_count = $STH ->rowCount();
        return $row_count ;
    }

function comp_post_code($cat, $comp_post_code){//** this to get result within postcode
    global $DBH;
    $STH = $DBH->prepare("SELECT * from uk_data where 
                            cat10 like :comp_post_code  AND (
                            cat1 like :cat OR
                            cat2 like :cat OR
                            cat3 like :cat OR
                            cat4 like :cat OR
                            cat5 like :cat OR
                            cat6 like :cat OR
                            cat7 like :cat OR
                            cat8 like :cat OR
                            cat9 like :cat 
                            )") ;
    $STH->bindValue(':cat', "%$cat%", PDO::PARAM_STR);
    $STH->bindValue(':comp_post_code', "$comp_post_code%", PDO::PARAM_STR);
    $STH->execute();
    $STH->setFetchMode(PDO::FETCH_ASSOC);
    return $STH;
    } 
```

现在在页面上使用它

```
$q = $_GET['id'];
$pc =  change_text(' ', '',$_GET['pc']);
$qu = change_text(' ', '%', $q);
$pc_o = array();
$comp_name = array();
$comp_phone = array();
$distance = array();
$Latitude = array();
$Longitude = array();
$post_code = array();

if(uk_data_pc_count($pc) > 0  ){

$uk_data_ll = uk_data_ll($pc);
while (($row = $uk_data_ll->fetch()) !== false) {
$Latitude[] = $row['cat8'];
$Longitude[] = $row['cat9'];

}

$coords = array('Latitude' => "$Latitude[0]", 'Longitude' => "$Longitude[0]");
$radius = 10;

$uk_data_radious = uk_data_radious($coords,$radius,$q);
while (($row = $uk_data_radious->fetch()) !== false) {
    /*echo $row['cat10'].' --- '.$row['distance'].'<br>';*/
    $pc_o[] = $row['cat10'];
    $distance[] = $row['distance'];

}
foreach($pc_o as $pc_o){
$uk_data_radious = comp_post_code($q,$pc_o);
while (($row = $uk_data_radious->fetch()) !== false) {
$comp_name[] = $row['comp_name'];
$comp_phone[] = $row['comp_phone'];
$post_code[] = $row['cat10'];
$distance_m[] = distance($Latitude[0],$Longitude[0],$row['cat8'],$row['cat9'],"M");
}}

for($i=0, $count = count($comp_name);$i<$count;$i++) {
    echo $post_code[$i].' - '.$comp_name[$i].' - '.$comp_phone[$i].' - '.round($distance_m[$i],2).' Miles<br>';
    }
}else {echo 'Wrong Post-Code Selected';} 
```

thx 希望这会有所帮助，并希望得到好的建议；）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-02T11:26:30.383

尝试输出错误信息。

我不确定，但我认为您不需要使用 HAVING，只需在 ( OR .. ) 部分周围使用大括号，如下所示：

```
SELECT *, ( 3959 * acos( cos( radians( {$coords['Latitude']} ) ) * cos( radians( cat8 ) ) * cos( radians( cat9 ) - radians( {$coords['Longitude']} ) ) + sin( radians( {$coords['Latitude']} ) ) * sin( radians( cat8 ) ) ) ) AS distance 
FROM uk_data where
   (
    cat1 like :cat OR
    cat2 like :cat OR
    cat3 like :cat OR
    cat4 like :cat OR
    cat5 like :cat OR
    cat6 like :cat OR
    cat7 like :cat
   ) AND distance <= {$radius} 
ORDER BY distance 
```

附带说明一下，每个类别都有一个包含列的表格是不好的设计。每次添加新类别时，您都需要更改 sql 表结构。

# arrays - Perl：以 5 个最多 10 个元素为一组添加元素，得到 2 个结果

> ID：14120137
> 
> 赞同：0
> 
> 时间：2013-01-02T10:09:06.330
> 
> 标签：arrays, perl, bioinformatics

我遇到了一个相当独特的问题。我有 2 个正在阅读的文件。这 2 个文件的小版本如下所示：

*文件 1*

```
chr1    9873    12227   11873   2354    +   NR_046018   DDX11L1
chr1    760970  763155  762970  2185    +   NR_047520   LOC643837 
```

*文件2*

```
chr1    9871    0   
chr1    9872    1
chr1    9873    1
chr1    9874    2
chr1    9875    1
chr1    9876    3
chr1    9877    3
chr1    760970  1
chr1    760971  1
chr1    760972  1
chr1    760973  2
chr1    760974  3
chr1    760975  3
chr1    760976  4
chr1    760977  5
chr1    760978  6
chr1    760979  7
chr1    760980  6
chr1    760981  7
chr1    760982  8
chr1    760983  9
chr1    760984  10
chr1    760985  11
chr1    760986  12
chr1    760987  10
chr1    760988  9
chr1    760989  6 
```

## 问题

1.  从第一个文件中，我必须从每一行中提取第二个元素并将其作为`$start`. 结束位置由 确定`$end = $start + 10`。

2.  基于`$start`，我现在必须获取第二个文件，并查看每行的第二个元素。找到`$start`后，我需要将 5 个一组的第三个元素的下 5 个对应值相加，最多为`$end`.

因此，我以 5 个为一组进行求和，将获得 2 个求和值 `$end`。`$start + 10`

* * *

如果某些值 upto`$end`不存在于第二个文件的第二个元素中，代码不应停止，它应继续执行求和并将总和显示为 0（*如果不存在连续的 5 个元素组*）。

以此处的文件为例，来自*File1*，第二个元素 = `9873`，它被分配给`$start`. 因此`$end`将是`$start+10`9883。

从*File2*中，一旦`$start`在该行的第 2 个元素中找到，接下来 5 行的第 3 个元素必须作为 1 组求和，接下来的 5 个值作为第 2 组求和直到`$end`。

*笔记*

这里可以在*File2*中看到，`$end`即 9883 不存在。因此，从 9879 到 9883 的值的总和必须是`zero`。它不能将 760970 的值相加......

### 期望的输出

```
chr1    9873    12227   11873   2354    +   NR_046018   DDX11L1      10   0
chr1    760970  763155  762970  2185    +   NR_047520   LOC643837    8   25 
```

### 注意事项

1.  在处理实际文件时， $end = $start+10,000(*而不是 $end = $start+10* )
2.  此外，在同一个注释中，将对 25 个值的组求和（*而不是 5 个*），在处理实际文件时总共获得 400 个值。
3.  如果 $file2 的第二个元素中不存在一系列值，则求和应正常进行，如果不存在连续的 25 个值对，`0`则应打印输出。
4.  每个文件包含 > 100 万行。

### 代码

到目前为止，我编写的代码能够做到以下几点：

1.  从文件中读取。
2.  分配`$start`和`$end`来自*file1*
3.  从*file2*，将所有第二个元素推入 array `@c_posn`；所有第三个元素到数组`@peak`中。
4.  检查是否`$start`存在于`@c_posn`

我无法弄清楚如何进行求和部分。我曾想过创建一个哈希，其中 2nd 文件的所有 2nd 元素进入*keys*和 3rd 元素进入*values*。但是哈希是无序的。`@c_posn`所以我为第二个元素`@peaks`和第三个元素创建了 2 个数组。但现在我不知道如何同时比较 2 个数组（*以确保 760970 的值不会相加*）

```
use 5.012;
use warnings;
use List::Util qw/first/;

my $file1 = 'chr1trialS.out';
my $file2 = 'b1.wig';

open my $fh1,'<',$file1 or die qw /Can't_open_file_$file1/;
open my $fh2,'<',$file2 or die qw /Can't_open_file_$file2/;

my($start, $end);
while(<$fh1>){
    my @val1 = split;
    $start = $val1[1]; #Assign start value
    $end = $start + 10; #Assign end value
    say $start,"->",$end; #Can be commented out
}

my @c_posn;
my @peak;

while(<$fh2>){
    my @val2 = split;   
    push @c_posn,$val2[1]; #Push all 2nd elements 
    push @peak, $val2[2];  #Push all 3rd elements        
}           

if (first { $_ eq $start} @c_posn) { say "I found it! " } #To check if $start is present in @c_posn

say "@c_posn"; #just to check all 2nd elements are obtained
say "@peak"; #just to check all 3rd elements are obtained 
```

感谢您花时间解决我的问题。如果需要任何澄清，请务必问我。我将不胜感激任何评论/回答。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-02T11:04:16.957

你对哈希有正确的想法。是否已订购并不特别相关，因为如果我理解正确，您正在寻找 11 个特定值（9873、9874、9875... 9883），而不是文件中的起始值和下一个 10（9873 ,... 9877, 760970,... 760975)。

根据您的描述，我将采取以下措施：

```
#!/usr/bin/env perl

use strict;
use warnings;

my $sum_interval = 5;   # number of lines to group into each sum
my $sum_count = 2;      # number of sums to generate
my @sums;               # final results of the operation

my %lookup;
open my $fh2, '<', 'file2.txt' or die "Can't open file 2: $!";
while (<$fh2>) { 
  my @data = split;
  $lookup{$data[1]} = $data[2];
}
close $fh2;

open my $fh1, '<', 'file1.txt' or die "Can't open file 1: $!";
while (my $line = <$fh1>) { 
  my @line_sums;
  my $start = (split /\s+/, $line)[1];
  for my $interval_num (0 .. $sum_count - 1) {
    my $cur_sum = 0;
    my $interval_start = $start + ($sum_interval * $interval_num);
    for (0 .. $sum_interval - 1) {
      # use || instead of // for Perl older than 5.10
      $cur_sum += $lookup{$interval_start + $_} // 0;
    }
    push @line_sums, $cur_sum;
  }
  push @sums, \@line_sums;
}
use Data::Dumper; print Dumper(\@sums); 
```

变量名称可能可以改进，但您可以将`$sum_interval`and更改`$sum_count`为 25 和 400，它应该在您的实际应用程序中同样工作。

如果您提供的样本数据被放入`file1.txt`and `file2.txt`，这将产生输出：

```
$VAR1 = [
          [
            10,
            0
          ],
          [
            8,
            25
          ]
        ]; 
```

如果我手动进行总和，此输出与我得出的结果相匹配。

请注意，我与您的规范略有不同，因为它总和从`$start`to`$start + 9`而不是`$start + 10`因为您说它应该为两组五个和`$start`to求和`$start + 10`11 个项目。

**编辑：**将初始伪代码修改为完整的可运行程序。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-02T18:52:00.200

这很简单，如果`b1.wig`足够小可以读入内存中的哈希，从第 2 列获取键，从第 3 列获取值。然后必须做的就是访问每个序列中的每个键，如果 a相应的哈希元素不存在（因此访问它返回`undef`）。

你还没有说你想如何将新总数与现有数据分开，`chr1trialS.out`所以我使用了空格。当然，如果需要，这很容易改变。

```
use strict;
use warnings;

use constant SAMPLE_SIZE => 10;
use constant CHUNK_SIZE => 5;

my $file1 = 'chr1trialS.out';
my $file2 = 'b1.wig';

my %data2;
{
  open my $fh, '<', $file2 or die $!;

  while (<$fh>) {
    my ($key, $val) = (split)[1,2];
    $data2{$key} = $val;
  }
}

open my $fh, '<', $file1 or die $!;

while (<$fh>) {
  chomp;
  my $key = (split)[1];
  my @totals;
  my $n = 0;
  while ($n < SAMPLE_SIZE) {
    push @totals, 0 if $n++ % CHUNK_SIZE == 0;
    $totals[-1] += $data2{$key++} // 0;
  }
  print "$_ @totals\n";
} 
```

**输出**

```
chr1    9873    12227   11873   2354    +   NR_046018   DDX11L1 10 0
chr1    760970  763155  762970  2185    +   NR_047520   LOC643837 8 25 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-02T12:44:21.593

这是我目前的解决方案：

```
#!/usr/bin/perl

use 5.012; use warnings;

my $file1 = Reader->open("<", "filename1");
my $file2 = Reader->open("<", "filename2");

my $groupsize = 5;
my $step = 10;
my $sum_number = int($step / $groupsize) + ($step % $groupsize ? 1 : 0); # ceil($step/$groupsize)

use constant DEBUG_FLAG => 0;
sub DEBUG (@)   { say STDERR "DEBUG: ", @_ if DEBUG_FLAG }

LINE1:
while (my $line1 = $file1->readline) {
    my (undef, $start) = split ' ', $line1, 3;
    my $end = $start + $step;
    my @sums = (0) x $sum_number; # initialize all fields to zero
    my $i = 0;
    my $last;
    LINE2:
    while (my $line2 = $file2->readline) {
        my (undef, $key, $val) = split ' ', $line2, 4;
        if ($start > $key) { # throw away all keys that are too small
            DEBUG "key $key too small for start $start";
        } elsif ($key >= $end) { # termination condition
            DEBUG "key $key too large for end $end";
            $file2->pushback($line2);
            last LINE2;
        } else {
            $last = $key unless defined $last;
            $i += $key - $last; # get interval. This may be set to "1" as an optimization
            DEBUG "counting ($i): $sums[$i/$groupsize] + $val at $key";
            $sums[$i/$groupsize] += $val;
            $last = $key;
        }
    }
    DEBUG "inner loop broken";
    say join "\t", $line1, @sums; # assuming tab-seperated output
}

{
    package Reader;
    # There is probably a CPAN module for this ... :/
    use Carp;
    use constant DEBUG_FLAG => 0;
    sub open :method {
        my ($class, $mode, $filename) = @_;
        open my $fh, $mode, $filename or die qq(Can't open "$filename": $!);
        bless [$fh, []] => $class;
    }
    sub readline :method {
        my $self = shift;
        return shift @{ $self->[1] } if @{ $self->[1] };
        my $line = scalar readline $self->[0];
        chomp $line if defined $line;
        carp "readline: " . ($line // "undef") if DEBUG_FLAG;
        return $line;
    }
    sub pushback {
        my ($self, $line) = @_;
        carp "pushback: " . ($line // "undef") if DEBUG_FLAG;
        unshift @{ $self->[1] }, $line;
        return $self;
    }
    sub eof :method {
        my $self = shift;
        eof $self->[0];
    }
} 
```

输出：

```
chr1    9873    12227   11873   2354    +   NR_046018   DDX11L1         10      0
chr1    760970  763155  762970  2185    +   NR_047520   LOC643837       8       25 
```

此解决方案假定两个输入文件都按第二个字段按升序排序，并且不会请求重叠序列。如果可以满足这些条件，它将在恒定内存和线性时间中执行。如果不是，它会产生垃圾，您可能有兴趣使用其他答案（线性内存、线性时间、无限制）。事实上，Dave Sherohman 的答案总体上不那么脆弱，并且可能在大多数输入上执行得更快。

根据您的系统，如果您放弃所有面向对象，并内联缓冲行（或者更确切地说，一行）的代码，则可能会提高速度。

关于`$i = $key - $last`：如果跳过键，代码将继续工作，并且仍将数字添加到正确的存储桶中。如果您可以断言不会跳过任何键，或者正确的总和无关紧要（ID 小于 的前五行`$end`，而不是应该添加接下来的五个 ID），那么删除`$last`变量并简单地递增`$i`1 即可。

# spring - Spring 集成 + 事务 + Bitronix

> ID：14120139
> 
> 赞同：0
> 
> 时间：2013-01-02T10:09:24.503
> 
> 标签：spring, spring-integration, spring-transactions, bitronix

我有一个基于 Java 的 Web 应用程序。我正在使用 Spring Integration 与数据库（Jpa 出站适配器）和 Tibco EMS（JMS 出站适配器）集成。但是，现在我需要在需要相同消息的地方放置一些代码 1\. 持久保存在数据库中和 2\. 通过 JMS 发送。

问题是这些活动（1 和 2）需要在事务中发生。要么两者都发生，要么都没有。我正在尝试使用[Bitronix](http://www.bitronix.be/)来实现这一目标。但是到目前为止，我还没有完成它。我收到错误，用简单的英语表示（请原谅我的翻译）“我们无法在 XA 交易之外实现交易。

有没有人尝试过这个。任何帮助将不胜感激。

谢谢，

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-02T13:51:55.843

我对 Bitronix 不熟悉，但已经看到成功使用了 jotm 和 Atomikos。

但是，您可能希望探索使用 XA 的替代方案，如本文中所述...

[http://www.javaworld.com/javaworld/jw-01-2009/jw-01-spring-transactions.html](http://www.javaworld.com/javaworld/jw-01-2009/jw-01-spring-transactions.html)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2016-12-26T19:14:40.633

如果您共享有助于理解问题的配置示例代码，我不确定您设置 bitronix 的配置是什么。

就您的问题而言，看起来 bitronix 设置不正确。您应该通过以下链接来验证或设置 bitronix 配置。

[https://github.com/bitronix/btm/blob/master/btm-docs/src/main/asciidoc/TomcatWithBtm2x.adoc](https://github.com/bitronix/btm/blob/master/btm-docs/src/main/asciidoc/TomcatWithBtm2x.adoc)

还有一件事，如果您通过 jndi 配置 bitronix，而不是确保从您的 maven 构建中排除所有与事务相关的 jar，并将事务和与 bitronix 相关的 jar 放在 lib 文件夹中。

# batch-file - 批处理文件 - 使批处理文件仅可运行且不可修改

> ID：14120143
> 
> 赞同：2
> 
> 时间：2013-01-02T10:10:07.517
> 
> 标签：batch-file, batch-processing, cmd

我写了一个批处理文件，我希望这个批处理文件只运行，如果有人想修改它，他/她应该输入我会给这个人的密码

可能吗？

问候

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-02T10:30:24.220

众所周知的事实是，如果有人真的想反编译您的程序，那么他们会找到一种方法来做到这一点，因此您无法通过万无一失的解决方案真正防止这种情况发生。

但是，您可以使用[bat 到 exe 转换器](http://www.f2ko.de/programs.php?lang=en&pid=b2e)并给该人一份要使用的 exe 版本的副本，您会提示输入密码。

然后，如果他们输入正确的密码，您可以（如果它不是那么大）将批处理文件内容写入文本文件供他们编辑。

然后，他们需要再次将其转换为 exe（他们还可以更改脚本中的密码）。

这显然是一种混乱的方式，但是当您使用批处理文件时，我想不出任何替代方案。

# jquery - 使用 jQuery 单击父 div 时打开文件对话框

> ID：14120145
> 
> 赞同：2
> 
> 时间：2013-01-02T10:10:28.007
> 
> 标签：jquery, file, input

单击父 div 时，我想打开一个文件对话框。如果我单击第一个父 div，它应该只打开第一个输入文件。

```
<div class="fileupload">
    <input type="file" class="file" name="image" />
</div>

<div class="fileupload">
    <input type="file" class="file" name="attachement" />
</div> 
```

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2013-01-02T10:21:44.003

只需触发元素`click`上的事件：`input`

```
$('.fileupload').click(function(e) {
    $(this).find('input[type="file"]').click();
});

$('.fileupload input').click(function(e) {
    e.stopPropagation();
});​ 
```

**演示：http: [//jsfiddle.net/EctCK/](http://jsfiddle.net/EctCK/)**

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-02T10:31:22.183

尝试使用[trigger()](http://api.jquery.com/trigger/)，

```
$(document).ready(function() {
    $(this).parents(".fileupload").find("input[type='file']").trigger('click');
}); 
```

# jquery - 使用 jquery 在单击事件之前处理触摸事件

> ID：14120150
> 
> 赞同：0
> 
> 时间：2013-01-02T10:10:37.907
> 
> 标签：jquery, mobile, touch, dom-events

我正在使用 jQuery 和一些[插件](http://caroufredsel.dev7studios.com/)构建一个画廊滑块（最好我能找到适合我的问题）。但是，图库主要由图像链接组成。当用户试图通过触摸这些来滑动时，什么也没有发生。当我将`<a>`标签变成`<span>`时，滑块在触摸这些时工作正常。

由于图像构成了画廊的很大一部分，而空白空间又是如此之小，因此许多用户在滑动它时会遇到麻烦。如何让 jQuery 在单击事件之前处理触摸事件，以便滑动始终有效？

# mysql - MySQL STR_TO_DATE v/s DATE_FORMAT

> ID：14120151
> 
> 赞同：0
> 
> 时间：2013-01-02T10:10:38.287
> 
> 标签：mysql

我有一个名为test的mysql表，结构代码如下

```
CREATE TABLE IF NOT EXISTS `test` (
  `id` int(11) NOT NULL,
  `name` varchar(255) NOT NULL,
  `assigned_date` date NOT NULL
) ENGINE=InnoDB 
```

该表包含以下数据：

```
INSERT INTO `test` (`id`, `name`, `assigned_date`) VALUES
(0, 'A', '2012-12-23'),
(0, 'B', '2012-12-25'); 
```

现在的问题是，当我运行以下查询时，它没有返回任何行。

```
SELECT name 
FROM test 
WHERE 
     DATE_FORMAT(assigned_date, '%m/%d/%Y') >= '12/01/2012'
     AND 
     DATE_FORMAT(assigned_date, '%m/%d/%Y') <= '01/02/2013' 
```

但是当我使用以下命令时，它会按预期返回两行。

```
SELECT name 
FROM test 
WHERE
     assigned_date >= STR_TO_DATE('12/01/2012', '%m/%d/%Y')
     AND 
     assigned_date  <= STR_TO_DATE('01/02/2013', '%m/%d/%Y') 
```

有什么区别 ？为什么**DATE_FORMAT**不起作用？

请帮忙解决这个问题我已经在一个站点中使用了 date_format 函数。现在看来我必须更新整个网站。

谢谢。

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2013-01-02T10:11:35.583

`DATE_FORMAT`将 DATE 转换为 STRING。

`STR_TO_DATE`将 STRING 转换为 DATE。

来自 MySQL 文档

*   [日期格式](http://dev.mysql.com/doc/refman/5.5/en/date-and-time-functions.html#function_date-format)
*   [STR_TO_DATE](http://dev.mysql.com/doc/refman/5.5/en/date-and-time-functions.html#function_str-to-date)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-02T10:20:24.417

DATE_FORMAT 不起作用，因为它将assigned_date 转换为mm/dd/yyyy 格式的字符串，然后将该字符串与您的两个字符串常量进行比较-并且*没有*>= 以12 开头的字符串和<= 以字符串开头的字符串01.

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2017-10-24T06:35:49.603

DATE_FORMAT() 函数格式化由格式掩码指定的日期。

```
DATE_FORMAT(date, format_mask)
Example:
SELECT DATE_FORMAT("2017-06-15", "%M %d %Y");
SELECT DATE_FORMAT(BirthDate, "%W %M %e %Y") FROM Employees; 
```

MySQL STR_TO_DATE() 通过将字符串和特定格式字符串作为参数返回一个日期时间值。

```
STR_TO_DATE(str,format);
Example:
SELECT STR_TO_DATE('18,05,2009','%d,%m,%Y');
SELECT STR_TO_DATE('May 18, 2009','%M %d,%Y'); 
```

# c# - 从字符串数组中删除 ASCII 字符 28

> ID：14120152
> 
> 赞同：1
> 
> 时间：2013-01-02T10:10:40.683
> 
> 标签：c#, string, ascii

我编写了读取网络流并将数据存储到字节数组中的代码，然后将该字节数组转换为字符串数组。

我想从字符串数组或直接从字节数组中删除不可打印的 ASCII 字符（代码 28 即文件分隔符）。

**我怎样才能达到同样的效果？**

我尝试了以下代码：

```
saBytesReceived = saBytesReceived.Select(s => s.Replace(@"[^U+001C]", "")).ToArray(); 
```

代码 ：-

```
if (serverSocket.Connected)
{
   bBytesToRead = serverSocket.Available;

   if (bBytesToRead > 0)
   {
      try
      {
         bDataReceived = new byte[bBytesToRead];
         networkStream.Read(bDataReceived, 0, bBytesToRead);
         try
         {
            if (System.Text.ASCIIEncoding.ASCII.GetString(bDataReceived).Trim() != "")
            {
               uncompletedMessage.IdleCount = 0;                                            
               saBytesReceived = System.Text.ASCIIEncoding.ASCII.GetString(bDataReceived).Split(new string[] { "\n" }, StringSplitOptions.None);
               saBytesReceived = saBytesReceived.Select(s => s.Replace(@"[^U+001C]", "")).ToArray();
            }
         }
      }
   }
} 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-02T10:21:53.360

不确定字节数组，但可以从字符串中使用 string.Replace。如果它是一个字符串：

```
string str = "1" + (char)(28) + "2";
//str.Length == 3
str = str.Replace(((char)28).ToString(), "");
//str.Length == 2 
```

对于数组：

```
saBytesReceived = saBytesReceived.Select(s => s.Replace(((char)28).ToString(), "")).ToArray(); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-11-27T18:19:35.480

在将 HEX 字符串转换为 UTF8 字符串后，这让我很恼火，因为那时我似乎无法从数组中删除空值。@Habib 你 char cast 和 to string 成功了。泰。

```
public static string GetString( string hex )
    {
        byte[ ] raw = new byte[ hex.Length / 2 ];
        for( int i = 0; i < raw.Length; i++ )
        {
            byte convertToByte = Convert.ToByte( hex.Substring( i * 2, 2 ), 16 );
            raw[ i ] = convertToByte;
        }

        var result = Encoding.UTF8.GetString( raw ).Replace( ( ( char ) 0 ).ToString( ), "" );

        return result;
    } 
```

# java - Spring Data JPA 应用排序、分页和 where 子句

> ID：14120153
> 
> 赞同：15
> 
> 时间：2013-01-02T10:10:42.010
> 
> 标签：java, spring, jpa, spring-data-jpa

* * *

## 回答 #1

> 赞同：27
> 
> 时间：2013-01-02T10:50:31.937

为此，只需在您的存储库界面中创建一个查询方法。

[在这里](http://static.springsource.org/spring-data/data-jpa/docs/1.0.0.M1/reference/html/#repositories.special-parameters)查看文档。

添加带有分页和 where 子句的查询方法。

```
Page<User> findByLastname(String lastname, Pageable pageable); 
```

因此，您可以通过属性“姓氏”找到用户并配置分页设置。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-01-02T10:43:06.583

我能找到的最简单的方法是[使用 QueryDSL 或 Specifications](http://blog.springsource.org/2011/04/26/advanced-spring-data-jpa-specifications-and-querydsl/)。我更喜欢 QueryDSL。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2018-12-29T12:30:10.457

要获取 Spring Data JPA 应用排序、分页以及 where 子句，请检查以下代码

1.  实体类

    ```
    @Entity
    @Table(name = "users")
    Public Class User{
        private String name;
        private Integer id;
        private String email;
        // add required setter getter//
    } 
    ```

2.  存储库类

    ```
    @Repository("userRepository")
    @Transactional`
        public interface UserRepository extends JpaRepository<User, Integer>{

        } 
    ```

3.  服务层使用 Example 对象传递 where 子句，使用 Pagable 和 Sort Class 一起传递 Pagination+Sorting。我们将在控制器中实现 Pageable 以注入排序逻辑，然后将该 Pagable 对象传递给服务层。

    ```
     @Service
     Public class UserService{
        public Page<User> getUserListPaginated(`EXAMPLE<User>` searchTerm, Pageable pageable) {
            return userRepo.findAll(searchTerm,pageable);
        }
    } 
    ```

`Example<T>`如果其值为 null，则不采用该属性。为此，我在 Entity 类中使​​用了 Integer id，因为我可以将它的值设置为 null 以进行第一次调用

4.  现在控制器类

    ```
    @Controller
    Public class UserController{

        @Autowired UserService userService;
        @GetMapping("/users")
        public String users(Model model,@RequestParam(value="page",defaultValue = "0") Integer  pageNumber, @SortDefault(sort = "name", direction = Sort.Direction.ASC) Sort sort){
            Pageable pageable = PageRequest.of(pageNumber,10, sort);
            Example<User> searchTerm = Example.of(new User());
            Page<User> userList = userService.getUserListPaginated(searchTerm, pageable);

        }
    } 
    ```

# asp.net - 在 ac# 项目中初始化 64 位 Com C++ dll

> ID：14120154
> 
> 赞同：0
> 
> 时间：2013-01-02T10:10:45.073
> 
> 标签：asp.net, com, 64-bit

我在 ac# 类库项目中引用了一个 64 位 com interop dll 并有初始化它的代码，这个库用于 asp.net 项目。

由于业务层项目和 asp.net 在 c# 中，我已配置为适用于任何 CPU 平台。我也设置了

现在，当我尝试在我的业务层项目中初始化 com 类时，我得到以下错误。任何建议这个错误是什么以及为什么它提到无效的 Win32 应用程序，因为我已经将它覆盖到 64 位。

**由于以下错误，从 IClassFactory 创建具有 CLSID {31DE5D69-1F5F-434D-8855-F627EAEB2404} 的 COM 组件实例失败：800700c1 不是有效的 Win32 应用程序。（来自 HRESULT 的异常：0x800700C1）。**

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-02T12:49:16.373

无法从 x86 进程引用 x64 COM 库。如果您将配置设置为“任何 CPU”，则字长会在应用程序初始化期间终止，这意味着如果您在 x86 系统上启动应用程序将导致使用无法引用 x64 库的 x86 配置。

您需要创建一个 x64 库才能使用基于 x64 的 COM 服务器。在您的 IIS 配置中，应用程序池还需要使用 x64。但是，您应该避免在您的项目中使用“任何 CPU”，请参阅[本文](http://blogs.msdn.com/b/rmbyers/archive/2009/06/09/anycpu-exes-are-usually-more-trouble-then-they-re-worth.aspx)。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-16T07:31:40.920

我不得不在 Visual Studio 2012 的 64 位命令提示符中注册 dll，这将 dll 正确注册为 64 位，并且我能够在 c# 项目中使用它。

# gnuplot - 在gnuplot中绘制两条线

> ID：14120155
> 
> 赞同：5
> 
> 时间：2013-01-02T10:10:50.687
> 
> 标签：gnuplot

我有两列的文件，例如：

```
1.2, 3.4
5.6, 7.8
... 
```

如果只有一列，我希望 gnuplot 在一个坐标系中绘制两列。含义：X 轴显示行号，y 轴显示值。

示例：两条线的前两个点是`(0, 1.2)`和`(0, 3.4)`; 第二点`(1, 5.6)`和`(1, 7.8)`。

我不希望将两列视为 x 和 y 值，就像只使用`plot "data.txt"`.

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-01-02T10:17:32.740

您可以使用包含当前样本编号的零伪列。来自`help pseudocolumns`：

```
column(0)
    The sequential order of each point within a data set.
    The counter starts at 0 and is reset by two sequential blank 
```

例如：

```
plot 'data.txt' using 0:1, '' using 0:2 
```

空`''`的使用与前一个图相同的数据源。

# c# - EF 5 Add-Migration 只为 GET 属性创建外键？

> ID：14120160
> 
> 赞同：0
> 
> 时间：2013-01-02T10:11:10.297
> 
> 标签：c#, entity-framework, migration

这是我的代码

画廊课

```
public class Gallery
{
   public Guid Id { get; set; }
   public virtual ICollection<PhotoGallery> Photos { get; set; }
   public List<PhotoGallery> ActivePhotos 
   { 
      get { return this.Photos.Where(/*condition*/); 
   }
} 
```

照片类

```
public class Photo
{
   public Guid Id { get; set; }
   public string PhotoPath { get; set; }
} 
```

相册类

```
public class PhotoGallery
{
   public virtual Gallery Gallery { get; set; }
   public virtual Photo Photo { get; set; }
   public int SortOrder { get; set; }
} 
```

如果我运行 Add-Migration 命令，它将为 Gallery.ActivePhotos 生成我不想要的关系。我的问题是，这是 EF5 的默认行为吗？在此之前，我记得像这样的 GET only 属性根本不会被映射。还是我错了？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-02T12:59:41.617

尝试将注释添加到您的属性中，如下所示：

```
public class Gallery
{
   public Guid Id { get; set; }
   public virtual ICollection<PhotoGallery> Photos { get; set; }

   [NotMapped]
   public List<PhotoGallery> ActivePhotos 
   { 
      get { return this.Photos.Where(/*condition*/); 
   }
} 
```

我没有发现任何说这对 EF5 来说是新的，但我使用的是 EF 4.3.1 并且只读了像你的问题中没有映射的属性。

希望有帮助。

# java - 为什么TextView不展开和剪切文本？

> ID：14120162
> 
> 赞同：1
> 
> 时间：2013-01-02T10:11:13.963
> 
> 标签：java, android, xml

我从数据库中输入了一个文本，但在该字段中只显示了两行，其余的文本被截断并放置了三个点。

文件.xml

```
<ScrollView xmlns:android="http://schemas.android.com/apk/res/android"
  android:id="@+id/svRut"
  android:layout_width="match_parent"
  android:layout_height="fill_parent"
  android:layout_gravity="right" >

 <LinearLayout
   android:id="@+id/llRut"
   android:layout_width="match_parent"
   android:layout_height="wrap_content"
   android:gravity="center_horizontal"
   android:orientation="vertical"
   android:padding="5dp" >

 <TextView
    android:id="@+id/textDescript"
    android:layout_width="match_parent"
    android:layout_height="wrap_content"
    android:ellipsize="end"
    android:text="@string/mus_textdes" />
</LinearLayout> 
</ScrollView> 
```

文件.java

```
...
textDescript.setText(onExes.getString(onExes.getColumnIndex("exes_desc")));
... 
```

![筛选问题](../Images/6d391d21d05f40eda9a282b323c03312.png)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-02T10:13:55.853

为什么TextView不展开和剪切文本？

=> 只是因为你已经包含了`android:ellipsize="end"`，如果你不想要那个结尾点，请将其**删除。**

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-02T10:24:39.457

你需要添加`android:maxLines="1"`. 那么它将只占用 1 行

# c++ - 使用 QSlider 改变变量的值

> ID：14120165
> 
> 赞同：0
> 
> 时间：2013-01-02T10:11:22.513
> 
> 标签：c++, qt, signals-slots

我正在尝试使用`QSlider`来更改变量的值，

```
 #include <QSlider>

class MainThread : public QWidget{
Q_OBJECT
public:
MainThread(QWidget *parent=0);
private slots:
    void setValue(double);
private:
QSlider *slider; 
};

MainThread::MainThread(QWidget *parent):QWidget(parent){
    slider = new QSlider(Qt::Horizontal,0);
    connect(&slider, SIGNAL((slider->valueChanged())),
             this, SLOT(setValue(double))); // here's my  problem 
    ...
} 
```

我的问题是如何将`SIGNAL`滑块连接到`setValue(double)`SLOT。

提前致谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-02T10:16:43.977

滑块已经是一个指针，例如删除 '&'

```
connect( slider, SIGNAL((slider->valueChanged())), this, SLOT(setValue(double)) ); 
```

编辑：这不起作用，因为信号没有参数。将 setValue(double) 重命名为 setValue() 并使用 slider->value() 从滑块中获取值。

# triggers - 我有一个 angularjs 服务函数来测试是否使用参数调用了 $(window).trigger (使用 jasmine)

> ID：14120176
> 
> 赞同：0
> 
> 时间：2013-01-02T10:11:40.453
> 
> 标签：triggers, window, mocking, angularjs, jasmine

我是 jasmine 的新手，并使用 angularjs 作为框架。我如何测试`$(window).trigger`“haveBeenCalledWith”：

要测试的代码（它是 angularjs 服务中的一个函数）：

```
start: function (serverUrl, callbackFunc) {
                  // initialize communication manager and when ready start the worklist server
                  commManager.initAsync(serverUrl, function (isConnected) {
                      if (isConnected) {
                          var msgHeader = new protocolMessageHeader(userSessionGuid, messageCommandName.START_WL_SESSION + "_RQ");
                          var dataSet = { $type: 10, UserSessionGuid: userSessionGuid, WLSessionGuid: wlSessionGuid };
                          commManager.sendMessage(new protocolMessage(msgHeader, dataSet), function (data) {                              
                              if (callbackFunc) {
                                  callbackFunc(data);
                              }
                          });
                      } else {                          
                          **$(window).trigger(events.onShowModalDialog, {
                              title: "Worklist Server Error",
                              body: "Can not establish connection to Worklist server",
                              type: generalStatusEnum.ERROR
                          });**
                      }
                  });
              } 
```

我做`isConnected`了假，我想测试`$(window).trigger`用上述参数调用的

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-02T19:27:38.117

当您要测试的代码依赖于其他库/框架时，它总是一个问题。因此，在您的情况下，使用 $(window) 作为全局事件总线是它使代码难以测试的根源。有一些解决方案：

让我们`$()`返回一个模拟，您可以在其中监视该`trigger`方法。这将使您的测试代码更加冗长，但您可以保留实际代码：

```
var trigger = jasmine.createSpy();
spyOn(window, '$').andReturn({trigger: trigger});

yourLib.start('url', callback);

expect(trigger).toHaveBeenCalledWith(events.onShowModalDialog, {
   title: "Worklist Server Error",
   body: "Can not establish connection to Worklist server",
   type: generalStatusEnum.ERROR
 }); 
```

在您的示例中，它很容易因为您`$`只使用一次，但考虑在函数中使用不同的 jquery 是否会使得测试函数变得非常困难或不可能。

更好的方法是将事件总线传递到您的函数或类的构造函数中。例如，您的启动函数可能如下所示：

```
start: function (serverUrl, callbackFunc, eventBus) {
  commManager.initAsync(serverUrl, function (isConnected) {
    if (isConnected) {
      var msgHeader = new protocolMessageHeader(userSessionGuid, messageCommandName.START_WL_SESSION + "_RQ");
      var dataSet = { $type: 10, UserSessionGuid: userSessionGuid, WLSessionGuid: wlSessionGuid };
      commManager.sendMessage(new protocolMessage(msgHeader, dataSet), function (data) {                              
        if (callbackFunc) {
          callbackFunc(data);
        }
      });
    } else {                          
      eventBus.trigger(events.onShowModalDialog, {
        title: "Worklist Server Error",
        body: "Can not establish connection to Worklist server",
        type: generalStatusEnum.ERROR
      });
    }
  });
} 
```

测试看起来像这样：

```
var trigger = jasmine.createSpy();

yourLib.start('url', callback, trigger);

expect(trigger).toHaveBeenCalledWith(events.onShowModalDialog, {
   title: "Worklist Server Error",
   body: "Can not establish connection to Worklist server",
   type: generalStatusEnum.ERROR
 }); 
```

**编辑** 只需意识到您的所有代码都包含在回调中，因此您还可以监视`commManager.initAsync`并调用回调：

```
spyOn(commManager, 'initAsync');

var callback = commManager.initAsync.mostRecentCall.args[1];
callback(); 
```

# java - 将word文件保存在特定位置

> ID：14120180
> 
> 赞同：0
> 
> 时间：2013-01-02T10:11:57.473
> 
> 标签：java, swing, file, path, jfilechooser

我想将我的文件保存在 java swing 应用程序中用户选择的位置。我正在动态生成word文件。此外，当我这样放

```
FileWriter _file = new FileWriter("C:/Calender"+.doc", true); 
```

该文件以 Calender.doc 的名称直接在 c:/ drive 中生成。

但是，如果我要经过

```
jfilechooser.getSelectedFile().getAbsolutePath() 
```

返回值`"C:\Users\Shorav\Desktop"`不会在此位置保存任何文件。

请帮忙; 如何保存文件。

代码是

```
chooser = new JFileChooser();
        chooser.setCurrentDirectory(new java.io.File("."));
        chooser.setDialogTitle("Select location to save the file");
        chooser.setFileSelectionMode(JFileChooser.DIRECTORIES_ONLY);
        chooser.setAcceptAllFileFilterUsed(false);

        if (chooser.showOpenDialog(null) == JFileChooser.APPROVE_OPTION) {
//          System.out.println("getCurrentDirectory(): "+ chooser.getCurrentDirectory());
//          System.out.println("getSelectedFile() : "+ chooser.getSelectedFile());
            System.out.println("Absolute Path : " +chooser.getSelectedFile().getAbsolutePath());
        } else {
            System.out.println("No Selection ");
        } 
```

这将向用户询问保存文件的所需位置。

然后这是返回路径`C:\Users\Shorav\Desktop`。我想通过以下方式在这个位置生成word文件

```
 FileWriter _file = new FileWriter("C:/Calender"+.doc", true); 
```

这是返回word文件。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-02T10:35:48.270

您将获得使用 选择的文件夹用户的位置`jfilechooser.getSelectedFile`。使用它来构造一个`File`对象并将其传递给`FileWriter`.

```
File selectedFile = jfilechooser.getSelectedFile();
FileWriter _file = new FileWriter(new File(selectedFile, "Calender.doc"), true); 
```

# php - 记录没有从 android 插入到 mysql 数据库表

> ID：14120186
> 
> 赞同：0
> 
> 时间：2013-01-02T10:12:13.310
> 
> 标签：php, android, mysql, insert, wampserver

我正在尝试将数据从 android 应用程序插入到 mysql 数据库表中。但不知何故数据没有被插入..我认为android和mysql数据库没有连接。我没有从 android 端收到任何错误。但在 php 方面...如果我运行 url .. 我会收到通知。那个未定义的变量。但这些变量在android中。

这是我的 android 端代码：

```
 package com.example.insertintophp;

import java.util.ArrayList;

import org.apache.http.HttpResponse;
import org.apache.http.NameValuePair;
import org.apache.http.client.HttpClient;
import org.apache.http.client.entity.UrlEncodedFormEntity;
import org.apache.http.client.methods.HttpPost;
import org.apache.http.impl.client.DefaultHttpClient;
import org.apache.http.message.BasicNameValuePair;

import android.os.Bundle;
import android.app.Activity;
import android.util.Log;
import android.view.Menu;
import android.view.View;
import android.view.View.OnClickListener;
import android.widget.Button;
import android.widget.EditText;

public class MainActivity extends Activity {

    EditText name,city,email,contact,msg;
    Button insert;

    @Override
    protected void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.main);

        name =(EditText)findViewById(R.id.txtname);
        city =(EditText)findViewById(R.id.txtcity);
        email =(EditText)findViewById(R.id.txteid);
        contact =(EditText)findViewById(R.id.txtno);
        msg =(EditText)findViewById(R.id.txtmsg);
        insert=(Button)findViewById(R.id.btninsert);

        insert.setOnClickListener(new OnClickListener() {

            @Override
            public void onClick(View arg0)
            {
                // TODO Auto-generated method stub
                String nm = name.getText().toString();
                String ct = city.getText().toString();
                String emailid = email.getText().toString();
                String no = contact.getText().toString();
                String str = msg.getText().toString();
                insertRecords(nm, ct, emailid, no, str);

            }
            private void insertRecords(String nm,String ct,String emailid,String no,String str)
            {
                 ArrayList<NameValuePair> nameValuePairs = new ArrayList<NameValuePair>(5);
                    nameValuePairs.add(new BasicNameValuePair("name", nm));
                    nameValuePairs.add(new BasicNameValuePair("city",ct));
                    nameValuePairs.add(new BasicNameValuePair("email",emailid));
                    nameValuePairs.add(new BasicNameValuePair("contact",no));
                    nameValuePairs.add(new BasicNameValuePair("msg",str));
                    sendData(nameValuePairs);
            }
            private void sendData(ArrayList<NameValuePair> data)
            {
                try 
                {
                    HttpClient httpclient = new DefaultHttpClient();
                    HttpPost httppost = new HttpPost("http://10.0.2.2:8080/demo/insertData.php");
                    httppost.setEntity(new UrlEncodedFormEntity(data));
                    HttpResponse response = httpclient.execute(httppost);

                }
                catch (Exception e) {
                    // TODO: handle exception
                    Log.e("log_tag", "Error:  "+e.toString());
                }
            }
        });

    }

} 
```

这是我的 php 端代码：

```
 <?php 

$icon = mysql_connect("localhost","root",""); 
if(!$icon) 
{ 
die('Could not connect : ' . mysql_error()); 
} 
mysql_select_db("db_best_voyage", $icon)or die("database selection error"); 

echo json_encode($data); 
$name=$_POST['name']; 
$city=$_POST['city']; 
$email = $_POST['email']; 
$contact = $_POST['contact']; 
$msg = $_POST['msg']; 

mysql_query("INSERT INTO ctable (name,city,email,contact,msg) VALUES ('".$name."', '".$city."', '".$email."', '".$contact."', '".$msg."')"); 
mysql_close($icon); 

?> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-02T12:17:19.740

这是因为

`1)`您尚未声明/初始化任何 $data 变量，但您正在将其编码为 json 并回显。

`2)`此外，在访问 post 参数并将它们插入数据库后，您可以回显 jsonencoded 数据，如下所示。

```
 $name=$_POST['name']; 
    $city=$_POST['city']; 
    $email = $_POST['email']; 
    $contact = $_POST['contact']; 
    $msg = $_POST['msg']; 

    mysql_query("INSERT INTO ctable (name,city,email,contact,msg) VALUES ('".$name."', '".$city."', '".$email."', '".$contact."', '".$msg."')");

echo json_encode($data); 
```

确保向 $data 提供一些数据，以确保您成功插入记录。

**编辑：**

首先在您的浏览器中进行测试：

```
<?php 

$output = array();

$icon = mysql_connect("localhost","root",""); 
if(!$icon) 
{ 
die('Could not connect : ' . mysql_error()); 
} 
mysql_select_db("db_best_voyage", $icon)or die("database selection error"); 

echo json_encode($data); 
$name= "name1";
$city= "city1"; 
$email = "email1"; 
$contact = "contact1"; 
$msg = "msg1"; 

$insert1 = mysql_query("INSERT INTO ctable (name,city,email,contact,msg) VALUES ('".$name."', '".$city."', '".$email."', '".$contact."', '".$msg."')"); 
mysql_close($icon); 

if($insert1)
{
        $output["success"] = 1;
    $output["message"] = "Successfully inserted";

    // echoing JSON response
    echo json_encode($output);
}
else
{
     $output["success"] = 0;
    $output["message"] = "insertion failed......";

    // echoing JSON response
    echo json_encode($output);
}

?> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-02T10:24:03.980

您的代码是完美的，但有些更改请尝试以下操作：

```
public class MainActivity extends Activity {

EditText name,city,email,contact,msg;
Button insert;

@Override
protected void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.main);

    name =(EditText)findViewById(R.id.txtname);
    city =(EditText)findViewById(R.id.txtcity);
    email =(EditText)findViewById(R.id.txteid);
    contact =(EditText)findViewById(R.id.txtno);
    msg =(EditText)findViewById(R.id.txtmsg);
    insert=(Button)findViewById(R.id.btninsert);

    insert.setOnClickListener(new OnClickListener() {

        @Override
        public void onClick(View arg0)
        {
            // TODO Auto-generated method stub
            String nm = name.getText().toString();
            String ct = city.getText().toString();
            String emailid = email.getText().toString();
            String no = contact.getText().toString();
            String str = msg.getText().toString();

      insertRecords(nm,ct,emailid,no,str);
        }

    });
}
 private void insertRecords(String nm,String ct,String emailid,String no,String str)
        {
             ArrayList<NameValuePair> nameValuePairs = new ArrayList<NameValuePair>(5);
                nameValuePairs.add(new BasicNameValuePair("name", nm));
                nameValuePairs.add(new BasicNameValuePair("city",ct));
                nameValuePairs.add(new BasicNameValuePair("email",emailid));
                nameValuePairs.add(new BasicNameValuePair("contact",no));
                nameValuePairs.add(new BasicNameValuePair("msg",str));
                sendData(nameValuePairs);
        }
        private void sendData(ArrayList<NameValuePair> data)
        {
            try 
            {
                HttpClient httpclient = new DefaultHttpClient();
                HttpPost httppost = new HttpPost("http://10.0.2.2:8080/demo/insertData.php");
                httppost.setEntity(new UrlEncodedFormEntity(data));
                HttpResponse response = httpclient.execute(httppost);

            }
            catch (Exception e) {
                // TODO: handle exception
                Log.e("log_tag", "Error:  "+e.toString());
            }
        }
} 
```

# php - 计数列值按出现排序

> ID：14120189
> 
> 赞同：0
> 
> 时间：2013-01-02T10:12:28.003
> 
> 标签：php, mysql, sql, select

我的表`users`中有一个名为`user_model`. 它包含不同的重复名称，`value1` `value2` `value3`等等。

我想计算所有不同名称出现的次数，并按最大值到最小值对它们进行排序。

我怎样才能做到这一点？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-02T10:13:47.320

```
SELECT  user_model, COUNT(*) totalCOUNT
FROM    users
GROUP BY user_Model
ORDER BY totalCOunt DESC 
```

*   [SQLFiddle 演示](http://sqlfiddle.com/#!2/64f70/1)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-02T10:23:57.470

```
<?php
$link = mysql_connect('localhost', 'root', '123456');
if (!$link) {
    die('Not connected : ' . mysql_error());
}

// make foo the current db
$db_selected = mysql_select_db('testing', $link);

if (!$db_selected) {
    die ('Can\'t use foo : ' . mysql_error());
}
$sql = "select count(a.title),a.title from le7im_menu a, le7im_menu b WHERE a.title = b.title GROUP BY a.title";
$res=mysql_query($sql);
while ($row=mysql_fetch_array($res)){
    $rows[]= $row;
}
print_r($rows);
?> 
```

# json - 带有图像和对象的 REST/JSON：多格式或纯 JSON

> ID：14120194
> 
> 赞同：0
> 
> 时间：2013-01-02T10:12:59.037
> 
> 标签：json, html, forms, rest

我的 HTML5 应用程序需要将（小）图像 + 对象发送到我的后端。什么是最好的解决方案？：

**解决方案 1：**发送包含 2 个部分的多表单（对象的 JSON 字符串 + 图像的图像表单）

**解决方案2：**发送一个简单的JSON消息，包括对象+图像作为数据：uri

您能帮我找出这两种解决方案的优缺点吗？或提出新的解决方案？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-02T19:37:03.867

我建议使用表单数据将数据传递给服务器（即使用 multipart/form-data），因为这是标准 HTML 使用的。如果数据需要 JSON 格式，那么可以在服务器端进行转换。如果需要传递 JSON 对象，则可以使用字符串作为键，使用 JSON 字符串作为值。

使用 data URI 方案的后果是图像被编码成字符串，使其更长，因此客户端需要传递更多数据。

# c - 是否有任何现有的 C 实现在（无）有符号整数表示中具有填充位？

> ID：14120197
> 
> 赞同：11
> 
> 时间：2013-01-02T10:13:05.123
> 
> 标签：c, c99

根据 C99，`signed int` 或`unsigned int`表示中可能有填充位。所以我想知道还有没有这样过时的东西的实现？

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2013-01-02T12:03:37.527

来自[新 C 标准](http://www.knosof.co.uk/cbook/cbook.html)：

> 在某些 Cray 处理器上，short 类型具有 32 位精度，但保存在 64 位的存储空间中。Unisys A 系列无符号整数类型包含一个填充位，该位在有符号整数表示中被视为符号位。
> 
> ...
> 
> Harris/6 计算机使用两个连续的 int 类型来表示 long 类型。这意味着必须忽略其中一个整数的符号位；它被视为填充位。int 类型的值表示为 24 位宽，而 long 的值表示为 47 位和一个填充位。

* * *

## 回答 #2

> 赞同：9
> 
> 时间：2013-01-02T11:48:43.483

引用 C99 基本原理 ( [PDF](http://www.open-std.org/jtc1/sc22/wg14/www/C99RationaleV5.10.pdf) ) 部分 6.2.6.2 §20：

> 填充位是无符号整数类型的用户可访问的。例如，假设一台机器使用一对 16 位的 short（每个都有自己的符号位）组成一个 32 位，并且在这个 32 位中使用时忽略`int`低位的符号位。然后，作为 32-bit ，在确定 32-bit 的值 20 时会忽略一个填充位（在 32 位的中间）。但是，如果这个 32 位项被视为 32 位，则该填充位对用户程序是可见的。**C 委员会被告知有一台机器以这种方式工作，这就是在 C99 中添加填充位的原因之一。**`short``int``signed int``signed int``unsigned int`

 **所以至少这样的事情*确实*存在。

至于[今天仍然存在](http://www.unisys.com/unisys/theme/index.jsp?id=1120000970018010225)的奇怪架构，首选示例是具有[奇怪数据格式](http://en.wikipedia.org/wiki/UNIVAC_1100/2200_series#Data_formats)的 UNIVAC 1100/2200 系列。

虽然它不*使用*整数填充，但查看他们的 C 编译器手册 ( [PDF](http://public.support.unisys.com/2200/docs/cp12.0/pdf/78310422-010.pdf) ) 仍然很有启发性：

```
Table 4–4\. Size and Range of Unsigned Integer Types

Type                 Size        Range
unsigned short int   18 bits     0 to (2^18)–1
unsigned short

unsigned int         36 bits     0 to (2^36)–2 (see the following note)
unsigned

unsigned long int    36 bits     0 to (2^36)–2 (see the following note)
unsigned long 
```

第二卷 ( [PDF](http://public.support.unisys.com/2200/docs/CP12.0/PDF/78310430-014.pdf) ) 解释了如何使用`CONFORMANCE/TWOSARITH`编译器关键字来控制负零的解释：这会将无符号整数类型的范围调整为预期的 (2^36)-1，但会对无符号算术产生性能损失。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2015-07-10T06:50:17.873

[MSP430X](https://en.wikipedia.org/wiki/TI_MSP430#MSP430X_20-bit_extension)架构（德州仪器的微控制器架构）是一个 16 位架构 (MSP430)，它扩展为具有 20 位寄存器的 20 位地址空间。该架构仍然是字节寻址的，一个字节有八位。指令通常可以对 8、16 和 20 位的数量进行操作。

在这种架构上，编译器可能会选择制作`int`20 位类型。由于 20 不是 8 的倍数，因此在内存中存储此类型时必须添加 4 或 12 位填充。**

# jquery - ASP.NET MVC 中的免费可编辑树视图控件

> ID：14120198
> 
> 赞同：0
> 
> 时间：2013-01-02T10:13:09.273
> 
> 标签：jquery, asp.net, asp.net-mvc

我想要一个带有上下文菜单的 ASP.NET MVC 中的免费可编辑 Treeview。是否有可用的 Treeview 控件？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-02T10:22:04.057

您可以尝试当用户右键单击允许您提供自定义界面的节点时触发事件的[`jqTree`](http://mbraak.github.com/jqTree/)插件。[`tree.contextmenu`](http://mbraak.github.com/jqTree/#event-tree-contextmenu)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-03T06:52:44.043

请尝试使用 jstree 来满足您的要求。有很多可能性。

文档可在[http://www.jstree.com/中获得](http://www.jstree.com/)

# r - 如何合并组合结果的列元素

> ID：14120202
> 
> 赞同：1
> 
> 时间：2013-01-02T10:13:17.193
> 
> 标签：r

我有 7 个具有不同行号但列数相同的数据帧，我想生成所有数据帧的所有可能组合。我使用以下方法将所有数据帧组合在一个数组中：

```
Dataset <- array(list(), c(1,1,7))
Dataset[[1,1,1]] <- df1
Dataset[[1,1,2]] <- df2
Dataset[[1,1,3]] <- df3
Dataset[[1,1,4]] <- df4
Dataset[[1,1,5]] <- df5
Dataset[[1,1,6]] <- df6
Dataset[[1,1,7]] <- df7 
```

然后我可以使用 combn() 函数生成组合：

```
comb1 <- combn(Dataset, 1)
comb2 <- combn(Dataset, 2)
...
comb7 <- combn(Dataset, 7) 
```

例如，comb2 将生成一个 2 x 21 的列表矩阵。如何将 combn 结果的每一列元素合并到单个数据框 (1 x 21) 以便对新数据集进行进一步处理？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-02T10:32:29.503

你得到一个 data.frame 列表

```
ll <-  lapply(1:7, function(i) do.call(rbind, combn(Dataset, i))) 
```

你可以得到一个大的data.frame

```
big.l <- do.call(rbind,ll) 
```

# java - 如何在 Eclipse FormEditor 中实现撤消/重做功能？

> ID：14120203
> 
> 赞同：5
> 
> 时间：2013-01-02T10:13:21.157
> 
> 标签：java, xml, eclipse, eclipse-plugin

我正在开发一个多页表单编辑器来在 Eclipse 中编辑/创建自定义的 XML 文件。

1.  实现类是 MyXMLFormEditor，它扩展了 FormEditor。

2.  FormEditor 的每个页面都扩展了 FormPage（即 MyXMLFormPage 扩展了 FormPage）。

3.  在 FormEditor 和实际的 XML 文件之间，我正在维护 JDOM 模型。

4.  我还实现了脏标志处理。因此，用户在表单编辑器中的输入会保存到 JDOM 中，直到用户按下保存按钮。当用户按下保存按钮时，JDOM 被写入/序列化为 XML 文件。

在具有上述功能的编辑器中，我想实现如下撤消/重做功能：

*   当编辑器变脏时（用户将某些内容更改为表单编辑器但未保存）撤消操作应将表单编辑器以及 JDOM 中的更改恢复到其原始状态（即编辑器未变脏时的状态），重做操作应再次将更改带回 FormEditor 以及 JDOM 和编辑器应该变脏。

以下是我的代码片段：

MyXMLFormEditor.java

```
public class MyXMLFormEditor extends FormEditor {

    MyXMLFormEditor(){
                                super();                                
                                }

                @Override
                protected FormToolkit createToolkit(Display display) {
                                // Create a toolkit that shares colors between editors.
                                return new FormToolkit(Activator.getDefault().getFormColors(display));
                }

                @Override
                public void init(IEditorSite site, IEditorInput editorInput) {
                                setSite(site);
                                mSite = site;
                                setInput(editorInput);
                                try {
                                                super.init(site, editorInput);
                                } catch (PartInitException e1) {
                                                e1.printStackTrace();
                                }
                                if (!(editorInput instanceof IFileEditorInput))
                                                try {
                                                                throw new PartInitException("Invalid Input: Must be IFileEditorInput");
                                                                } catch (PartInitException e) {
                                                                                e.printStackTrace();
                                                                }
                                setPartName(fileName);
                }
                public void setUpProgFile(IEditorSite site, IEditorInput editorInput){                       
                                IFileEditorInput fileInput = ((IFileEditorInput) editorInput);

                                //create document builder and prepare JDom model for xml file.
                }

                @Override
                protected void addPages() {
                                try {
                                                //add 'Main' page
                                                objMyXMLFormPage = new MyXMLFormPage (this, "FirstPage","Main");
                                                //set rootNode of MyXMLFormPage 
                                                objMyXMLFormPage.rootNode = getRootNode();
                                                objMyXMLFormPage.filePath = filePath;
                                                objMyXMLFormPage.document = document;
                                                addPage(objMyXMLFormPage);

                                } catch (PartInitException e) {
                                                e.printStackTrace();
                                }
                }

                @Override
                public void doSave(IProgressMonitor monitor) {
                                System.out.println("MyXMLFormEditor: doSave");

                                //logic to write jdom contents into xml file.
                                objMyXMLFormPage.setDirty(false);
                }

                @Override
                public void doSaveAs() {
                                System.out.println("MyXMLFormEditor: doSaveAs");
                }
                @Override
                public boolean isSaveAsAllowed() {
                                System.out.println("MyXMLFormEditor: isSaveAsAllowed");
                                return true;
                }

} 
```

MyXMLFormPage .java

```
public class MyXMLFormPage  extends FormPage{

                //private members declaration.

                public MyXMLFormPage (MyXMLFormEditor editor,String title, String id) {
                                // initialize the editor and set its title and name.
                                super(editor,title,id );
                                }

                @Override
                public void createFormContent(IManagedForm managedForm) {
                    // Set page title
                                super.createFormContent(managedForm);

                                FormToolkit mMyXMLFormPage Toolkit = managedForm.getToolkit();

                                //Logic to creat UI and populating its contents from JDom

                }

                private void makeEditorDirty() {
                                updateJdom =  true;       
                                setDirty(true);                                                   
                }

                private void updateJDom() {
                                if(updateJdom){
                                                System.out.println("*** Jdom updated ***");
                                                updateJdom = false;
                                }
                }

                @Override
                public boolean isDirty() {
                                return isDirtyFlag;
                }

                protected void setDirty(boolean value) {
                                isDirtyFlag = value;
                                dirtyStateChanged();
                }

                public void dirtyStateChanged() {
                                getEditor().editorDirtyStateChanged();

                }

                @Override
                public boolean isSaveAsAllowed() {
                                System.out.println("MyXMLFormPage .isSaveAsAllowed");
                      return false;
                   }

                @Override
                public void doSave(IProgressMonitor monitor) {
                                System.out.println("MyXMLFormPage .doSave");
                }

} 
```

谁能向我提供有关如何在 FormEditor 中实现撤消/重做功能的指针/示例？如果该方法利用 Eclipse PDE 或工作台的现有撤消/重做框架会很好。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-03T09:08:35.233

您需要阅读以下资源。这似乎是额外的工作，但相信我你的工作会轻松很多，而且这些文章并不长。

*   [可撤消的操作](http://help.eclipse.org/2019-09/index.jsp?topic=%2Forg.eclipse.platform.doc.isv%2Fguide%2FwrkAdv_undo.htm)
*   [撤消和 IDE 工作台](http://help.eclipse.org/2019-09/topic/org.eclipse.platform.doc.isv/guide/wrkAdv_undo_ide.htm)
*   [撤消示例](http://help.eclipse.org/2019-09/topic/org.eclipse.platform.doc.isv/samples/org.eclipse.ui.examples.undo/doc-html/ui_undo_ex.html)

您需要执行的基本步骤是：

1) 在编辑器中为撤消/重做操作添加动作处理程序

```
@Override
public void init(IEditorSite site, IEditorInput editorInput) {
    ...

    UndoRedoActionGroup historyActionGroup = new UndoRedoActionGroup(editorSite, myUndoContext, true);
    historyActionGroup.fillActionBars(editorSite.getActionBars());
} 
```

如果您在想什么是`myUndoContext`，您将通过阅读第一篇文章知道这一点。

[`IUndoableOperation`](http://help.eclipse.org/galileo/index.jsp?topic=/org.eclipse.platform.doc.isv/reference/api/org/eclipse/core/commands/operations/IUndoableOperation.html)2)为用户可以对您的数据进行的不同类型的修改创建您自己的实现。如果它只依赖于 XPath->"new value" 或 id->"new value" 之类的东西，它可能是处理所有修改的单个操作。或者，您可以有一系列不同的操作来修改每种类型的数据模型。由你决定。

*3）仅*通过您创建的操作对您的数据进行每一次修改

```
MyDataModifyingOperation op = new MyDataModifyingOperation(xpath, newValue, oldValue);
op.addContext(myUndoContext);
IStatus status = OperationHistoryFactory.getOperationHistory().execute(operation, null, null); 
```

一旦你得到了基本的东西，你将需要看看其他一些高级的东西，比如在数据模型上添加某种更改监听机制，以便在撤消/重做修改数据时，你可以更新 UI。同样在大多数情况下，最好在执行操作时记录 UI 选择状态，以便在撤消或后续重做时，您可以将选择恢复到已修改的元素，以便用户在 Ctrl+z/Ctrl 时立即识别更改的内容+y 被按下。

# python - 我可以让 IDLE shell 显示函数的描述吗？

> ID：14120208
> 
> 赞同：2
> 
> 时间：2013-01-02T10:13:45.073
> 
> 标签：python, python-3.x, python-2.7

所以我是 Python 新手，我正在使用 IDLE。我使用什么命令，所以 Python shell（按下 f5 后）向我显示描述​​（我在函数名称后的“”“”“”中写的东西）和/或显示其他函数的描述！？

如果它在 2.7 和 3.3 中有所不同，如果您提及它，我将不胜感激。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-02T10:27:50.497

你在 """ """ 中写的内容称为 docstring。

当你想打印这个时，你可以使用`__doc__`类型的属性。（类型表示类、方法或模块）。

您可以使用内置函数[dir检查可用属性](http://docs.python.org/2/library/functions.html#dir)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-02T10:21:45.907

你用：

```
help(your_function_name) 
```

就像我在这里做的那样：

```
>>> def sayhello():
    """This says hello to you"""
    print "Hello there!"

>>> help(sayhello)
Help on function sayhello in module __main__:

sayhello()
    This says hello to you 
```

编辑：您必须先导入自己的模块。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-02T10:21:54.293

“事物”称为[Docstring](http://www.python.org/dev/peps/pep-0257/)，可以通过其字典属性[__ doc __轻松访问](http://docs.python.org/release/1.4/tut/node100.html)

```
>>> def testfunc():
...     """ My Docstrings """
...     print "test"
... 

>>> testfunc.__doc__
' My Docstrings ' 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2019-02-07T15:26:05.030

使用帮助（）函数

例子：

> > > help(print) 关于内置模块内置函数打印的帮助：

print(...) print(value, ..., sep=' ', end='\n', file=sys.stdout, flush=False)

```
Prints the values to a stream, or to sys.stdout by default.
Optional keyword arguments:
file:  a file-like object (stream); defaults to the current sys.stdout.
sep:   string inserted between values, default a space.
end:   string appended after the last value, default a newline.
flush: whether to forcibly flush the stream. 
```

# windows - 如何让 Perl 理解导航到路径中有空格的目录？

> ID：14120211
> 
> 赞同：3
> 
> 时间：2013-01-02T10:13:46.787
> 
> 标签：windows, perl, debugging, path

我正在尝试导航到存储我的函数的目录，我需要在我的脚本中使用它来生成结果。但是我被卡住了，因为 Perl 无法理解我的函数位置语法（带有空格）。

这是我的代码：

```
$path ="D:\\AVI MEHENWAL\\PERL\\SCRIPTS\\PROJECTS\\SnmpCheck";

$snmpwalk = `$path\\SnmpWalk.exe -q -t:60 -r:$ip -v:2c -c:$comm -os:1.3.6.1.2.1.1 -op:1.3.6.1.2.1.1.9`;
print "$snmpwalk"; 
```

其中 SnmpWalk 是我的函数，位于变量 $path 中的路径中。

Perl 在运行时返回以下错误：

```
D:\AVI MEHENWAL\PERL\SCRIPTS\PROJECTS\SnmpCheck>perl perl_snmpwalk_v2.0.pl
'D:\AVI' is not recognized as an internal or external command,
operable program or batch file. 
```

我该如何解决这个问题？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-01-02T18:17:46.033

通过明智地使用正确的引号，这可以被整理很多。单引号内的反斜杠不需要转义，除非它们是字符串中的最后一个字符，而双引号仅在它们也用作字符串分隔符时才需要转义。`$snmpwalk`在打印时加上引号也是（几乎可以肯定）错误的。

```
my $path = 'D:\AVI MEHENWAL\PERL\SCRIPTS\PROJECTS\SnmpCheck';

my $snmpwalk = `"$path\\SnmpWalk.exe" -q -t:60 -r:$ip -v:2c -c:$comm -os:1.3.6.1.2.1.1 -op:1.3.6.1.2.1.1.9`;

print $snmpwalk; 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2013-01-03T04:02:30.420

在 Perl 中，`q{string}`可以用来代替`'string'`(mnemonic *single quote* )，也可以`qq{string}`代替`"string"`(mnemonic *double quote* )。双引号计算变量和反斜杠，而单引号则不计算。此外，`qx{cmd}`可以在``cmd``（助记符*引用和执行*）中代替反引号。

使用这些构造可以更容易地在像您这样的情况下转义字符串：

```
my $snmpwalk = q{"D:\AVI MEHENWAL\PERL\SCRIPTS\PROJECTS\SnmpCheck\snmpwalk"};
my $result = qx{$snmpwalk -q -t:60 -r:$ip -v:2c -c:$comm -os:1.3.6.1.2.1.1 -op:1.3.6.1.2.1.1.9};
print $result; 
```

另请注意，即使在 Windows 下，您*也可以*`/`在路径中使用正斜杠 ( )。只要您使用可执行文件的完整路径，它就可以正常工作。

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2013-01-02T10:19:10.703

在 Linux/OS X 上，使用`\`. 在 Windows 上，在路径周围使用引号。

Linux/OS X：

```
$escapedPath ="D:\\AVI\ MEHENWAL\\PERL\\SCRIPTS\\PROJECTS\\SnmpCheck"; 
```

视窗：

```
$escapedPath ="\"D:\\AVI MEHENWAL\\PERL\\SCRIPTS\\PROJECTS\\SnmpCheck"\"; 
```

也看[这里](https://stackoverflow.com/questions/4285989/in-perl-how-to-handle-filenames-with-spaces)。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-01-02T10:16:43.057

不是 Perl 不理解您的路径，而是`cmd`（Windows shell）。我认为通过在路径周围添加一些引号可以解决这个问题。尝试以下不那么优雅的技巧：

```
$executable ="\"D:\\AVI MEHENWAL\\PERL\\SCRIPTS\\PROJECTS\\SnmpCheck\\SnmpWalk.exe\"";

$snmpwalk = `$executable -q -t:60 -r:$ip -v:2c -c:$comm -os:1.3.6.1.2.1.1 -op:1.3.6.1.2.1.1.9`;
print "$snmpwalk"; 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-12-10T03:59:00.340

我用它来检查在 Cygwin 上运行的 Perl 中的 .jar 文件的内容：

```
#!/bin/perl

$file = q{"C:\cygwin\home\lylez\Hadoop\hadoop-2.x\hadoop-2.2.0\share\hadoop\yarn\hadoop-yarn-api-2.2.0.jar"};
$path = '/cygdrive/c/Program Files/Java/jdk1.7.0_45/bin';

@result = qx{"$path\\jar" -tf $file 2>&1};

for my $result ( @result )
{
    chomp $result;
    print $result, "\n";
} 
```

# java - 元素被隐藏且不可点击（但可见）

> ID：14120216
> 
> 赞同：0
> 
> 时间：2013-01-02T10:14:03.033
> 
> 标签：java, selenium

在编写测试时，我需要单击弹出窗口内的复选框。当页面加载时，弹出窗口被隐藏，我可以通过单击按钮使其可见。使用 Selenium 代码，我可以使用代码看到其中的弹出窗口和复选框

```
WebElement buttonAddMembers = driver.findElementById(UserTest.Controls.UserGroup.button_to_add_members);
        buttonAddMembers.click(); 
```

但它仍然会引发错误，即元素不可见，因此无法单击它。

```
List<WebElement> checkboxes = driver.findElementsByCssSelector(UserTest.Controls.UserGroup.checkboxes_add_members_popup); 
checkboxes.get(0).click(); 
```

我试过`pause(3000)`并且可以清楚地看到复选框是可见的，如何解决这个问题？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-05T15:23:19.880

尝试使用原语`Thread.sleep(1000);`

这是您可以验证元素是否可见的方法：

```
public boolean isElementPresent(By selector)
   {
       return driver.findElements(selector).size()>0;
   }

    public boolean isElementVisible(By selector){
        return driver.findElement(selector).isDisplayed();
    } 
```

希望这对您有所帮助。

```
WebElement buttonAddMembers = driver.findElementById(UserTest.Controls.UserGroup.button_to_add_members);
        buttonAddMembers.click();
Thread.sleep(1000);
List<WebElement> checkboxes = driver.findElementsByCssSelector(UserTest.Controls.UserGroup.checkboxes_add_members_popup);
if(checkboxes.get(0).isDisplayed()) checkboxes.get(0).click() 
```

# python - 关于数据类型

> ID：14120217
> 
> 赞同：3
> 
> 时间：2013-01-02T10:14:07.273
> 
> 标签：python, types

我最近开始编程，当我了解数据类型时我感到很困惑。为什么我们有/需要数据类型？
像 Python 这样的语言也没有数据类型，这使得它们更容易学习。为什么像 C 或 C++ 这样的语言有数据类型呢？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-02T10:15:55.560

变量的[数据类型](http://en.wikipedia.org/wiki/Data_type)决定了它可以存储什么样的数据以及它可能取什么值。它还有助于确定可以对变量执行什么类型的操作。
说 Python 没有数据类型是错误的。即使在 Python 中，每个值都有一个数据类型，但您并不总是需要声明变量的数据类型。基于每个变量的原始赋值，Python 确定它是什么类型并在内部跟踪它。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-02T12:49:58.370

**变量**的数据类型（只有静态类型的语言才有，各自的语句称为声明，有助于确定和分配固定地址的正确内存量）和**值**的数据类型有一个重要的区别，这是更常见的. 变量的数据类型帮助编译器检测不兼容的赋值。作为开发人员这项工作的一个附带好处（对于动态类型语言来说是不必要的），编译器可能会针对从未使用过的变量发出警告，检测使用未初始化变量的尝试等。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-02T18:29:10.587

数据类型对数据施加抽象结构。这种抽象允许我们通过更简单的接口处理数据，或者使用更有效的算法来操作数据。

数据类型（结构）是计算机科学的基础。

语言通常具有对一些常见数据类型（如数组、列表、关联数组）的内置支持，然后它们对*用户定义数据类型*的支持程度会有所不同。

# image - matplotlib imshow() 具有不规则间隔的数据点

> ID：14120222
> 
> 赞同：8
> 
> 时间：2013-01-02T10:14:57.393
> 
> 标签：image, matplotlib, plot, dataformat

我正在尝试将一些数据放入 imshow() 图中。我的问题是数据不是作为 MxN 数组，而是作为 3xN 数组（x 和 y 坐标和值）。这些点不是按规则网格排列的，而是位于 [xmin,xmax,ymin 和 ymax]=[-pi/2,pi/2,0,3.5] 内。

```
In [117]: shape(data)
Out[117]: (3L, 102906L) 
```

如何从该数据中获得漂亮的图像图？非常感谢您的帮助。

顺便说一句，数据表示杆表面上的温度值作为轴向和方位角位置的函数，想想 cfd 网格。

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2013-01-03T14:11:57.463

我建议使用 griddata-method 进行插值。一个样本是：

```
import numpy as np
from matplotlib.mlab import griddata
import matplotlib.pyplot as plt

xs0 = np.random.random((1000)) * np.pi - np.pi/2
ys0 = np.random.random((1000)) * 3.5
zs0 = np.random.random((1000))

N = 30j
extent = (-np.pi/2,np.pi/2,0,3.5)

xs,ys = np.mgrid[extent[0]:extent[1]:N, extent[2]:extent[3]:N]

resampled = griddata(xs0, ys0, zs0, xs, ys)

plt.imshow(resampled.T, extent=extent)
plt.plot(xs0, ys0, "r.")
plt.plot(xs, ys, "b.")
plt.title("imshow for irregularly spaced data using griddata")
plt.show() 
```

我想从您的 3*X 阵列到三个 X 阵列的过渡是显而易见的。

结果是：

![样本](../Images/959b4938ddb7b7617f99088a8659f5a4.png)

红点表示数据的“原始”位置，蓝点表示现在规则间隔的数据。

griddata 返回一个掩码数组。无法评估插值的所有点都被屏蔽，然后绘制为白色区域。

HTH，托尔斯滕

# c++ - 派生类中的成员新/删除重载有用吗？

> ID：14120223
> 
> 赞同：18
> 
> 时间：2013-01-02T10:15:04.203
> 
> 标签：c++, inheritance, operator-overloading, new-operator

我只是在回答[一个](https://stackoverflow.com/questions/5857240/why-there-is-no-placement-delete-expression-in-c/14119344#14119344)关于缺少与新位置相对应的位置删除的问题。原因似乎`operator delete`是根据对象的动态类型（对应于用于 find 的类型`operator new`）调用方式。

安置`new`对我很有用。当涉及到自定义分配时，可能有一个可重用的类，其中不同的实例管理不同的池。单例是一种反模式等等。

我可以理解在`new thing;`不跟踪分配器的情况下进行工作的便利性，但是为类型层次结构的不同分支做事似乎相当复杂。

是否存在派生类使用与其基类不同的分配器并依赖虚拟析构函数来查找正确成员的真实场景`operator delete`？

以免这是主观的，我会接受最合理的答案。让我们不要对代码气味或“最好”的做事方式争论不休。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-05-04T18:15:04.270

我过去真的用过这个！它对于非统一的内存架构很有用——没有操作系统的内存区域非常小、非常快的平台等。

具体来说，设想一个带有少量 TCM（紧密耦合存储器；本质上是嵌入在 SoC 上的 SRAM，例如具有 1 个周期的访问时间）的 ARM 芯片。

然后，我们在产品开发的最后阶段使用分析器结果——就在发货之前（例如，想象这是一个流行的手持游戏系统的卡带）——以确定某些类别将受益于这种更快的 SRAM。

一个利用这个 TCM 来处理派生类的简单成员`operator new`现在可能是有意义的：我们不能使用这个 SRAM 来拥有整个类层次结构，但是对于某些低实例化计数但大量使用的派生类，它变成一个简单有效的优化。在某些情况下，通过以这种方式重定向某些分配，我们已经恢复了 2%-10% 或更多的帧时间。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2013-05-02T21:31:57.823

我实际上从未在派生类中使用过 new/delete 重载，或者我曾经想过它，但这个问题很有趣，我决定进行一些研究并试一试。我找到了几个合适的参考：

**ARM** [http://infocenter.arm.com/help/index.jsp?topic=/com.arm.doc.faqs/ka14267.html](http://infocenter.arm.com/help/index.jsp?topic=/com.arm.doc.faqs/ka14267.html)

这个参考实际上有一个派生类重载其基类重载新的示例代码。

**范德比尔特大学** [http://www.vuse.vanderbilt.edu/~adamsja/Courses/CS251/Projects/4/memPool.pdf](http://www.vuse.vanderbilt.edu/~adamsja/Courses/CS251/Projects/4/memPool.pdf)

该参考资料没有明确提供有关在派生类中重载 new 的任何材料，但是，它提到了一些有趣的原因，即为什么要重载 new。这些原因包括：

*   补偿默认分配器中的次优对齐
*   将相关对象聚集在一起
*   获得非常规行为，例如用零覆盖内存以增加应用程序数据的安全性

现在基于这两个参考，我认为在派生类中重载 new/delete 可能有几个原因。我的理由与我在 VU 演示文稿中列出的理由基本一致，但基于 ARM 参考似乎也相关，这对我来说是嵌入式或专用场景。

*   嵌入式系统在硬件级别通常是非常定制的，但是在软件级别的标准化意义上是常见的。我可以看到一种情况，根据配置设置/硬件配置，在运行时选择了某种类型的对象（派生类），因为它需要以特定方式或特定位置分配内存。
*   聚类似乎是合理的，因为我可以设想这样一种场景，即某些对象在高级“工作流程”中被同等对待，但在处理时，这些对象的不同类型的处理方式却大不相同。对于处理密集型任务（即搜索、排序、优先排序等），将特定类型的对象定位在彼此附近可能是有益的。
*   最后一点很有趣，因为我可以看到分配取决于所存储信息的安全分类的某些情况。

同样，我还没有找到原因或实际实施过您提到的某些事情，但这些是我经过一番调查后的想法。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-05-02T18:07:23.697

> 是否存在派生类使用与其基类不同的分配器并依赖虚拟析构函数来查找正确成员的真实场景`operator delete`？

我不确定你会认为现实世界的场景是什么，但我想到的一个明显的例子是继承层次结构，它植根于抽象基类，派生类有很大不同（大小），其中很多是定期创建和销毁，而这些分配/解除分配需要速度。

您可能需要为这些派生类自定义分配器，因为用于特定大小的内存 blob 的分配器可能非常快，并且您可能希望为每个派生类使用不同的分配器，因为它们的大小非常不同。

不过，我不能给你一个具体的例子，因为多年来我发现*避免*分配/解除分配比加速它的回报要好得多，所以在近 20 年里，我很少重载特定于类的`new`/ `delete`。（当然，当我们谈论复杂的优化时，通常会出现“游戏”，所以我们可以想象一个需要创建和摧毁大量不同实体的游戏。）

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-05-03T02:26:17.193

成员`operator new`/`delete`可能有助于从基类中删除不需要的自定义分配，例如，如果基类不打算扩展。但是基础要么需要一个虚拟析构函数，要么基础对象永远不能是`delete`.

实际上，`operator delete`需要独立于重载的虚拟析构函数调度。该功能的存在可能是为了支持多重继承，而动态查找正确的成员`operator delete`只是一个副作用。

规则很简单，最派生对象的虚拟析构函数调用`operator delete`. 主要原因是传递正确的最衍生指针和大小。上下文还使程序能够动态地找到正确的释放函数只是一个令人愉快的副作用。

因此，动态调度可能有也可能没有有用的应用程序`delete`，但绝对没有专门的机制让它工作。

[简单演示](http://ideone.com/ubOz9o)：

```
struct pad {
    int x;

    virtual ~pad() {}
};

struct b {
    int x;
};

struct vb {
    int x;

    virtual ~vb() {}
};

struct d : pad, b, vb {};

void operator delete( void *p ) {
    std::cout << "free " << p << '\n';
}

int main() {
    std::cout << "With virtual destructor:\n";
    d *p = new d;
    std::cout << "allocate " << p << ", delete " << static_cast< vb * >( p ) << '\n';
    delete static_cast< vb * >( p );

    std::cout << "With plain destructor:\n";
    p = new d;
    std::cout << "allocate " << p << ", delete " << static_cast< b * >( p ) << '\n';
    delete static_cast< b * >( p );
} 
```

# objective-c - iOS 视频流式传输并将此视频存储在设备上

> ID：14120229
> 
> 赞同：0
> 
> 时间：2013-01-02T10:15:47.990
> 
> 标签：objective-c, video-streaming

到目前为止，我知道如何流式传输视频以及如何下载它然后流式传输它，但这里有一个棘手的问题：流式传输一次，将其存储在设备上，并在未来从设备上播放。怎么可能

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-02T10:24:47.697

好吧，如果您知道如何流式传输和下载它，那么您已经解决了 60% 的问题。

我会将 URL 和流与文件名一起存储在设备上，然后当用户点击视频时，我会检查我是否已经有该 URL 的文件，如果有则直接开始播放，否则从 URL 开始流式传输。

# svg - SVG元素重叠问题

> ID：14120232
> 
> 赞同：2
> 
> 时间：2013-01-02T10:15:59.383
> 
> 标签：svg, d3.js

我目前正在使用 d3.js 进行可视化。请看[这里](https://dl.dropbox.com/u/11916346/map/europe.html)。（这是一个保管箱链接，您可能必须允许它加载。）

我创建了一个函数，其中每个重叠元素在将鼠标悬停在地图上的一个点上时都会增加大小。

请尝试以下用例： 1\. 单击美国放大该国家/地区。2\. 拖动并平移到纽约并将鼠标指针悬停在该点上。

如果一切顺利，您应该会看到一个巨大的圆圈，其中嵌入了多个同心圆。它们都是该特定坐标处的重叠元素。

我面临的问题是，当 SVG 元素的大小增加时，其他城市的点会重叠在同心圆之上。

我的问题是：如何制作圆圈，我将鼠标悬停在 SVG 画布上，这样就看不到这样的点了。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-02T13:04:35.187

最终的解决方案是在**mouseover**上附加 SVG 元素。这会将元素堆叠在 SVG 画布的最顶部，并在**mouseout**上删除它们。目前没有 SVG 元素的 z-index 替代品。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-04T18:08:13.763

您可以通过直接抓取 DOM 节点并将其放在顶部来做到这一点：

```
this.parentNode.appendChild(this); 
```

这是一个例子：[http ://bl.ocks.org/1197731](http://bl.ocks.org/1197731)

# c# - 托管可扩展框架和 AssemblyInfo.cs

> ID：14120237
> 
> 赞同：0
> 
> 时间：2013-01-02T10:16:06.850
> 
> 标签：c#, mef

是否可以为`AssemblyInfo.cs`使用程序集属性添加信息，例如`assembly:MyProjectAssembly,`

因此，当 MEF 扫描 rutime 文件夹中的程序集时，它只会扫描那些用`MyProjectAssembly`.

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-16T23:21:42.697

我认为MEF没有这个功能。不过，我不是 100% 确定。

您可以做的是使用[Mono.Cecil](https://github.com/jbevain/cecil/wiki)，它是 System.Reflection 的一个非常强大的替代品。`Mono.Cecil`允许您在不加载它们的情况下检查（和重写，但这是另一回事）.NET 程序集。这意味着您可以轻松添加您正在寻找的功能。例如：

```
public static bool AssemblyIncludesCustomAttribute(string assemblyPath, string customAttributeName)
        {
            if (assemblyPath == null) throw new ArgumentNullException("assemblyPath");
            if (customAttributeName == null) throw new ArgumentNullException("customAttributeName");            

            AssemblyDefinition assemblyDef = AssemblyDefinition.ReadAssembly(assemblyPath);

            return assemblyDef.CustomAttributes.Any(ca => ca.AttributeType.FullName == customAttributeName);
        } 
```

然后像这样使用它：

```
var catalog = new AggregateCatalog();
            string dirPath = @".\Extensions";
            foreach (string assemblyFile in Directory.EnumerateFiles(dirPath, "*.dll"))
            {
                if (AssemblyIncludesCustomAttribute("Blah.dll", "System.Reflection.AssemblyConfigurationAttribute"))
                {
                    catalog.Catalogs.Add(new AssemblyCatalog(assemblyFile));                    
                }
            } 
```

# git - Git + Heroku：正确的工作流程

> ID：14120239
> 
> 赞同：1
> 
> 时间：2013-01-02T10:16:09.297
> 
> 标签：git, heroku, branch

我得到了关于如何将应用程序部署到 Git 和 Heroku 的说明，但是因为我对 Git 不是很熟悉（我只知道“基础知识”），所以我想请你帮忙。我已经从 Heroku 下载了该应用程序。这是我应该做的：

```
Create separate git branches for new updates, push the branch to Github, create pull requests and merge them into master.
Then pull the master branch locally and deploy to Heroku. 
```

正确的工作流程应该是什么？经过研究：

```
git branch new_branch
git push origin new_branch

git fetch new_branch
git merge master/new_branch

git push heroku... 
```

请您纠正我的工作流程吗？

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-02T11:15:51.403

克隆/拉取您的应用程序后的正确工作流程是：

```
git branch new_branch
git checkout new_branch
### Now you can make changes, develop your update
git commit -am "some message"
git push origin new_branch 
```

要将分支合并到主分支，您可以执行以下操作：

```
git checkout master
git merge new_branch 
```

你可以在任何你想要的地方推送/部署它，例如你的例子中的heroku。希望这可以帮助..

# mongodb - mongodb：查找记录摘要

> ID：14120240
> 
> 赞同：1
> 
> 时间：2013-01-02T10:16:09.413
> 
> 标签：mongodb

我有一个名为“tickers”的集合

数据格式如下：

```
{
  "_id": ObjectId("50d192b5480cf44157000000"),
  "ticker": {
    "high": 13.38839,
    "low": 13.1225,
    "avg": 13.244705635,
    "vwap": 13.258414151,
    "vol": NumberInt(21562),
    "last_all": 13.57334,
    "last_local": 13.3324,
    "last": 13.3324,
    "buy": 13.33185,
    "sell": 13.3749
   },
  "date": ISODate("2012-12-19T10: 11: 01.439Z")
 } 
```

**每分钟**都会从报价和交易中插入数据。

我想从上述数据中找到**每小时的平均值。**

我试过：

```
command(array(
 'aggregate' => 'tickers',
 'pipeline' => array( 
        array( 
       '$group' => array( 
        '_id' => array(
            'year'=>'$year($date)',
        'month'=>'$month($date)',
        'day'=>'$dayOfMonth($date)',
        'hour'=>'$hour($date)'
    ),
            'avg' => array( '$avg' => '$ticker.avg') ,
                ),                      
              ))) 
```

但只能得到一条记录：

```
 Array ( 
     [result] => Array (
       [0] => Array ( 
             [_id] => Array ( ) 
             [avg] => 13.407843889084 ) ) 
    [ok] => 1 
  ) 
```

预计 100 天内至少有 100 条记录...

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-02T13:18:58.173

日期运算符必须在`$project`操作中使用，而不是 a `$group`，因此您需要这样做（在 shell 中）：

```
db.tickers.aggregate(
    { $project: {
        _id: 0,
        year: {$year: '$date'},
        month: {$month: '$date'},
        day: {$dayOfMonth: '$date'},
        hour: {$hour: '$date'},
        avg: '$ticker.avg'
    }},
    { $group: {
        _id: { year: '$year', month: '$month', day: '$day', hour: '$hour' },
        avg: { $avg: '$avg'}
    }}); 
```

给出以下结果：

```
{
  "result": [
    {
      "_id": {
        "year": 2012,
        "month": 12,
        "day": 19,
        "hour": 10
      },
      "avg": 13.244705635
    }
  ],
  "ok": 1
} 
```

# wpf - wpf dataGrid绑定选定项不起作用

> ID：14120242
> 
> 赞同：0
> 
> 时间：2013-01-02T10:16:19.813
> 
> 标签：wpf, mvvm, binding, datagrid, selecteditem

我正在尝试将数据网格的 selectedItem 与 MVVM 中的属性绑定。问题是它不会触发属性的“设置”。

在 xaml 部分我有：

```
 <WPFCtrlDg:ExtDataGrid Name="_edgMessage" Grid.Row="1" 
      ItemsSource="{Binding Path=LNE_MESSAGE, Mode=OneWay}"
      SelectedItem="{Binding Path=CurrentMessage, Mode=TwoWay}"> 
```

在代码部分：

```
 private LNE_MESSAGE _currentMessage;
    public LNE_MESSAGE CurrentMessage
    {
        get
        {
            if (_currentMessage == null)
            {
                ICollectionView collectionView = CollectionViewSource.GetDefaultView(LNE_MESSAGE);
                if (collectionView != null)
                    return collectionView.CurrentItem as LNE_MESSAGE;
                return null;
            }
            return _currentMessage;
        }
        set
        {
            ICollectionView collectionView = CollectionViewSource.GetDefaultView(LNE_MESSAGE);
            if (collectionView != null)
                collectionView.MoveCurrentTo(value);

            _currentMessage = value;
            OnPropertyChanged(() => CurrentMessage);
        }
    } 
```

extdatagrid 是一个自定义控件，并且 selected item 属性是这样完成的：

```
 public object SelectedItem
    {
        get { return GetValue(SelectedItemProperty); }
        set { SetValue(SelectedItemProperty, value); }
    }

    public static readonly DependencyProperty SelectedItemProperty =
        DependencyProperty.Register("SelectedItem", typeof(object), typeof(ExtDataGrid),
                                new UIPropertyMetadata((s, e) => 
                                                                {
                                                                    ExtDataGrid extDg = s as ExtDataGrid;
                                                                    Debug.Assert(extDg != null);
                                                                    extDg.CurrentItem = e.NewValue;
                                                                })); 
```

关于如何正确绑定 selecteditem 属性的任何想法？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-02T10:57:07.803

检查您的数据上下文是否设置正确。并调试并查看本地窗口以查看数据上下文是否实际上是使用可视化助手设置的。另请参阅输出窗口以了解任何绑定错误。

乍一看，您的依赖属性看起来是正确的。

# sql-server-2008 - 连接问题的 SQL 日志

> ID：14120244
> 
> 赞同：0
> 
> 时间：2013-01-02T10:16:28.890
> 
> 标签：sql-server-2008

用户在使用应用程序时遇到连接错误。它是随机发生的，如果他们稍后再试，它就会启动并运行。同时，我在使用 SQL Server Manager 时也遇到过这种情况，我突然几秒钟无法连接到数据库，然后再试一次，宾果它正在运行。

我的猜测是与服务器的连接会时不时地在很短的时间间隔内断开。当我与 IT 人员谈论这件事时，他们说他们需要一份包含日期和内容的适当报告，以便了解这是服务器问题、用户问题等。

所以我想做的是创建某种日志来指示我何时无法访问服务器。你们对实现这一目标的最佳方式有什么建议吗？我能想到的只是每 X 秒运行一次 dts，以了解它是否能够到达所需的服务器。

我应该补充一点，我们目前正在开发一个新服务器，所以它不会挤满数据库......关于这个的关键是服务器实际上可能正在下降（还没有那么多用户对 IT 团队大喊大叫）

提前致谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-02T10:29:27.450

如果服务正在删除，那将在 sql server 日志中。如果安装 DBMS 的服务器出现问题，那将在它的日志中，例如事件查看器。许多有连接问题的客户端对我来说听起来像是网络故障，而您的管理员正在四处奔波。你可以写一些东西来保持连接日志的结果。请注意，这应该已经内置到您的应用程序日志中！你要安装多少个地方呢？它多久运行一次？有多大的影响会影响潜在的问题......

鉴于您可以排除它所在的 dbms 和服务器存在明显问题，例如网卡/驱动程序损坏，我首先要看的是拓扑。是否所有机器都在一个网段，通过一台交换机等。

# asp.net - 转换网格期间页面不能为空

> ID：14120246
> 
> 赞同：0
> 
> 时间：2013-01-02T10:16:33.273
> 
> 标签：asp.net, c#-4.0, radgrid

我有一个 rad Grid，我正在尝试将其转换为简单的 html，但我显示了一个我不明白要解决的错误这是我的代码

```
private string getHTML(RadGrid gv)
    {
        string result;
        StringBuilder sb = new StringBuilder(); 
        StringWriter stringwriter = new StringWriter(sb);
        HtmlTextWriter htmlwriter = new HtmlTextWriter(stringwriter);

        htmlwriter.RenderBeginTag(HtmlTextWriterTag.Html);
        htmlwriter.RenderBeginTag(HtmlTextWriterTag.Body);
        gv.RenderControl(htmlwriter);
        htmlwriter.RenderEndTag();
        htmlwriter.RenderEndTag();
        htmlwriter.Flush();
        result = stringwriter.ToString();

        htmlwriter.Close();
        stringwriter.Close();
        return result;

    } 
```

错误在这里

> 页面不能为空。请确保在 ASP.NET 请求的上下文中执行此操作。

错误就在这一行

```
gv.RenderControl(htmlwriter); 
```

请任何人给我解决这个问题的想法

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-02T10:31:01.293

在调用 RenderControl 之前，您需要将 RadGrid-gv 添加到页面中已有内容的控件集合中，例如表单：

```
Page.Form.Controls.Add(gv); 
```

谢谢。

# android - 在 Eclipse 中未检测到 Karbonn A18 进行调试

> ID：14120252
> 
> 赞同：3
> 
> 时间：2013-01-02T10:16:59.687
> 
> 标签：android, debugging, usb, driver

我知道关于这个主题已经有很多主题，但我的问题略有不同。我目前正在使用安装了 Ice cream sandwidth 的 Karbonn A18 安卓手机。到目前为止，我已经在模拟器的帮助下创建了应用程序，但是为了开发目的，我尝试将我的设备与 eclipse 连接起来，但不知何故，尽管遵循了所有步骤，但在 eclipse 中没有检测到它。

1.  我检查了我的设备是否安装了 Google USB 驱动程序。我通过转到 MyComputer->Manage->Devices->Karbonn A18 确认了这一点，然后右键单击并更新 USB 驱动程序

2.  当我将手机连接到系统 USB 驱动程序时，我点击了 USB 调试选项

但是当我在 Eclipse 上转到 Windows->Others->Device 视图时，我看到了空白页。此外，我也没有提示已连接任何设备进行调试。

您能否建议如何找到此问题的解决方案。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-06-10T06:44:22.113

在 USB 计算机连接中选择连接为“媒体设备”。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-09-12T06:03:35.767

可能是因为没有安装驱动。

*   从控制面板转到设备管理器。

现在如果Android手机下有一些驱动程序，那么其他设置可能会导致这种情况。否则，如果你的安卓显示黄色小标记，则说明驱动程序有问题。

*   右键单击那个'android'按钮
*   单击更新驱动程序并从计算机中选择最新的驱动程序。

那应该行得通。如果您购买了新手机，例如 Karbonn，并且尝试像我一样在线搜索 adb 驱动程序，它实际上是在您自己的手机上。导航到手机上的 SD-Card 并将“Pcdriver”复制到您的桌面。解压缩并更新您的驱动程序选择。希望这可以帮助。

如果您在 Windows 8 上，您可能必须在此之前禁用驱动程序签名：

1.  将鼠标指针移动到显示器的右上角。这将打开魅力栏。
2.  单击设置超级按钮。
3.  单击“设置”菜单底部的“更改 PC 设置”链接。
4.  单击立即重新启动按钮。
5.  单击疑难解答。
6.  单击高级选项。
7.  单击启动设置。
8.  单击重新启动按钮。您的计算机将重新启动。
9.  重新启动后，按 [F7] 键。这将选择 7) 禁用驱动程序签名强制选项。
10.  登录到 Windows 8。

# python - 如何在 sphinx 文档中自动包含所有类、方法和函数？

> ID：14120253
> 
> 赞同：17
> 
> 时间：2013-01-02T10:17:04.040
> 
> 标签：python, python-sphinx, autodoc

我尝试使用 sphinx 和它的 autodoc 插件为包含数千个类的项目创建一个 html 文档。*sphinx-apidoc*创建了精彩的 rst 文件，但缺少自动创建*autoclasses*和*automethods*。

**sphinx 中是否有一种方法/命令/实用程序可以在文档中自动包含所有变量、函数、类和装饰器？**

一个 rst 文件的一些示例代码：

```
tagger Package
=================

:mod:`tagger` Package
------------------------
.. automodule:: project.tagger
    :members:

:mod:`client` Module
--------------------
.. automodule:: project.analyzers.tagger.client
    :members: 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-02T10:23:42.703

有一个 Sphinx 扩展可以帮助您解决这个问题，称为[autodoc](http://sphinx-doc.org/ext/autodoc.html)。

如果要包含该课程，则必须编写：

```
.. autoclass:: <ClassName> 
```

类似的方法：

```
.. automethod:: <MethodName> 
```

# android - 如何设置安卓 NDK 路径？

> ID：14120254
> 
> 赞同：4
> 
> 时间：2013-01-02T10:17:18.763
> 
> 标签：android

```
15:41:40 **** Clean-only build of configuration Debug for project Diggers ****
Info: Configuration "Debug" uses tool-chain "Cygwin GCC" that is unsupported on this system, attempting to build anyway.
"C:\\NVPACK\\android-ndk-r8\\ndk-build.cmd" clean 
Cannot run program "C:\NVPACK\android-ndk-r8\ndk-build.cmd": Launching failed

Error: Program "C:\NVPACK\android-ndk-r8\ndk-build.cmd" not found in PATH
PATH=[C:/Program Files/Java/jre7/bin/client;C:/Program Files/Java/jre7/bin;C:/Program Files/Java/jre7/lib/i386;C:\Windows\system32;C:\Windows;C:\Windows\System32\Wbem;C:\Windows\System32\WindowsPowerShell\v1.0\;C:\Program Files\TortoiseSVN\bin;C:\Program Files\Java\jdk1.7.0_10\bin;D:\and007\android-sdk-windows\androidndk;;D:\and007\eclipse;]

15:41:40 Build Finished (took 155ms) 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-02T10:49:15.497

您必须首先设置项目文件夹（包含文件夹的文件夹）的路径， `jni`然后`src`运行 ​​Android-ndk 命令，如

```
cd path_to_the_your_project 
```

然后像这样运行包含`ndl-build`Android-ndk文件夹中完整路径文件的命令`/android-ndk-r8c/ndk-build`

# cordova - DXTREME 和 PhoneGap 的区别

> ID：14120255
> 
> 赞同：5
> 
> 时间：2013-01-02T10:17:20.600
> 
> 标签：cordova, chart.js, phonejs, devextreme

谁能帮助我了解 DXTREME 和 PhoneGap 之间的区别？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-01-02T10:25:31.903

Phonegap 是免费的 使用 phonegap，您可以构建混合应用程序（您可以在应用商店销售的应用程序并访问本机功能）

DevExtreme 仅用于创建 webapps 或网站，它可以与 phonegap 结合使用。

所以它们是完全不同的东西，但它们可以结合起来。

编辑：现在 DevExtreme 已内置 phonegap 集成：http: [//js.devexpress.com/MobileDevelopment/StoreReadyApps/](http://js.devexpress.com/MobileDevelopment/StoreReadyApps/)

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-05-20T10:45:49.020

DXTREME 包括 PhoneJS 和 ChartJS 框架以及 Visual Studio 2010/2012 集成工具 ( [http://help.devexpress.com/DXTREME](http://help.devexpress.com/DXTREME) )。

PhoneGap 是一个框架，允许您从 JavaScript 访问本机设备功能（加速度计、相机等）。

您可以直接从安装了 DXTREME 的 Visual Studio 构建本机包 (iOS/Android) ( [http://help.devexpress.com/DevExtreme/Howto/Packaging#Build_Package_for_Android](http://help.devexpress.com/DevExtreme/Howto/Packaging#Build_Package_for_Android) )。

您还可以为 PhoneGap Build（自 13.1 版本起）创建一个 zip 文件。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2013-10-23T06:37:39.067

DXTREME 是 DevExpress 的产品，它建立在 PhoneJS 和 ChartJS 这两个 Javascript 库之上。DXTREME 有自己的模板，可以与 Visual Studio 集成。DXTREME 还提供了各种可以使用的小部件。此外，您可以使用 DXTREME 开发多种类型的混合应用程序，也可以称为跨平台移动应用程序。DXTREME 支持 Knockout JS，这意味着您可以使用 MVVM 模式进行 UI 开发。

但是使用 DXTREME，您无法使用设备硬件，这就是 Phonegap 出现的地方。Phonegap 提供 API 帮助 DXTREME 可以访问设备硬件。Phonegap 是一个免费的开源框架，用于使用标准化 Web API 开发跨平台移动应用程序。

# matlab - 将字符串和数字一起保存在矩阵中，matlab

> ID：14120259
> 
> 赞同：1
> 
> 时间：2013-01-02T10:17:46.367
> 
> 标签：matlab

我想将带有相应索引的字符串保存在矩阵中，但出现错误。

这是一个小例子：

```
Mat_=[];            
Val1=[10,19,22,15,30];
Val2=20
Strs_=[];
for i= 1:length(Val1)
if abs(Val1(1,i))<abs(Val2)
            Str_={'Überschritten'};  
        else
            Str_={'Unterschritten'};
end
Strs_=[Strs_;Str_];
Mat_=[Mat_;i];
end
Mat_
Strs_
FMat=[Mat_,Strs_] 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-02T11:11:30.363

您需要一个元胞数组来处理字符串。为此，您可以预先分配一个元胞数组并填充它。

```
Val1 = [10,19,22,15,30];
Val2 = 20;
FMat = cell(length(Val1), 2); % Preallocate empty cell array
for idx = 1:length(Val1)
    if abs(Val1(1,idx)) < abs(Val2)
        Str_ = 'Überschritten';  
    else
        Str_ = 'Unterschritten';
    end    
FMat(idx, :) = {idx, Str_};
end 
```

您的`FMat`单元格数组将是：

```
1   'Überschritten'
2   'Überschritten'
3   'Unterschritten'
4   'Überschritten'
5   'Unterschritten' 
```

* * *

请注意，我还将您的循环变量更改`i`为`idx`. 在 MATLAB 中，`i`和`j`定义为`sqrt(-1)`。给变量取其他名称总是一个好主意。

# java - Java正则表达式查找数字模式

> ID：14120260
> 
> 赞同：0
> 
> 时间：2013-01-02T10:17:50.230
> 
> 标签：java, regex

假设我有一个数字序列

```
1 2 3 4 1 2 3 4 
```

如您所见，这里有一个循环：

```
1 2 3 4 
```

现在我正在尝试制作一个正则表达式来匹配一个模式。模式可以是序列长度的一半或 2 个数字长。这是我到目前为止所拥有的

```
Pattern cycle = Pattern.compile("((\\d+\\s)+(\\d+\\s))\\1"); 
```

我得到一串由空格分隔的数字。我正在尝试使用捕获组但不理解它。有什么帮助吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-02T10:21:17.287

你可以使用这个：

```
(\d(?:\s+\d)+)\s+\1 
```

这将匹配由空格分隔的两个或多个数字，捕获它并在另一个空格字符之后查找捕获的内容：

```
(            # begin capturing group
    \d       # a digit, followed by
    (?:      # begin non capturing group
        \s+  # one or more space characters, followed by
        \d   # a digit
    )+       # end non capturing group, repeated once or more,
)            # end capturing group `\1`, followed by
\s+          # one or more spaces, followed by
\1           # the exact content of the first captured group 
```

注意：它假设重复中的间距*完全相同！*

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-02T11:27:20.587

我只是想更好地理解这个问题。您的问题是否类似于检测给定字符串中的循环/模式？

类似于这种模式的东西？

```
 "([0-9]+?)\1+" 
```

此模式试图在给定的数字流中捕获重复模式。

与此问题中讨论的类似[，我的正则表达式模式在 Python 中查找重复循环有什么问题？](https://stackoverflow.com/questions/8640840/what-is-wrong-with-my-regex-pattern-to-find-recurring-cycles-in-python).

# android - Android 模拟器未启动

> ID：14120263
> 
> 赞同：0
> 
> 时间：2013-01-02T10:17:56.470
> 
> 标签：android, emulation

我正在使用 Android SDK 工具版本 21.0.1 和 eclipse helios。问题是我无法启动模拟器。

安装 Eclipse 后，我创建了一个名为 'emulator1' 的新 avd，我得到了“为 AVD 'emulator1' 启动模拟器”的小窗口

但没有任何负载。我已经等了 12 个小时，仍然没有。

在任务管理器中运行的唯一进程是 adb.exe。我试图杀死它并重新启动它，但徒劳无功。

谁能帮忙？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-02T10:24:28.423

将您的日食更新到 Helios 3.6.2 及更高版本。并尝试使用最新的 android sdk 和 adt。

这是在适用于您当前 sdk 的**系统要求**部分下使用[正确版本工具的链接。](http://developer.android.com/sdk/index.html)

 **也更新你的 jdk。

如果您仍然遇到同样的问题，请在更新后告诉我们。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-14T06:05:26.443

重新启动eclipse，当你启动模拟器时，它需要大量的cpu内存，所以关闭浏览器等其他选项卡。

所有事情都取决于您的机器配置和速度，因此在此基础上您必须等待并在模拟器启动时检查 CPU 内存，然后您将了解如何使用它进行管理。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2015-04-14T23:08:07.670

您可以在虚拟框中使用 Android，而不是有很多问题的模拟器。在这里解释： [https ://stackoverflow.com/a/29638854/1987258](https://stackoverflow.com/a/29638854/1987258)**

# objective-c - iOS 应用程序的预测街道地址？

> ID：14120264
> 
> 赞同：1
> 
> 时间：2013-01-02T10:18:01.307
> 
> 标签：objective-c, ios, map, street-address

我正在开发一个 iOS 应用程序，我希望能够有一个文本字段供用户输入地址，当您输入街道名称的字符时，文本字段下方会出现一个弹出窗口，提示街道名称。

有谁知道这样的东西是否已经存在？或者，如果有人有任何建议？基本上，我希望有一个字段供用户输入他们的起始位置，然后有另一个字段供用户输入他们的目的地位置，而不是仅仅依靠用户知道如何拼写街道名称；希望得到我上面提到的东西。

提前致谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-02T12:01:22.800

我最近回答了一个非常相似的问题。

您可以通过在用户键入的每个字母处调用正向地理编码来使用`UISearchDisplayController`并实现自动完成功能。

你可以看看我的回答[here](https://stackoverflow.com/a/14065273/846273)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-02T10:48:38.250

希望通过使用**位置管理器**找到您附近的所有位置并将其存储到一个数组中。然后在表格视图中显示这些详细信息并使用搜索**栏**之后，您可以提供相同的功能。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-02T10:57:41.340

您可以使用 Google Places 自动完成 API 来实现这一点 - 文档[在这里](https://developers.google.com/places/documentation/autocomplete)。请注意，有一些与它相关的 T&C，其中之一（我认为）是您需要使用 Google Map，而不是 Apple 的本地地图（在 iOS 6 之前不是问题，并且有可用的 Google Maps SDK，虽然目前我认为您需要请求访问权限）。

# android - Android 应用程序在尝试登录时崩溃

> ID：14120268
> 
> 赞同：0
> 
> 时间：2013-01-02T10:18:12.567
> 
> 标签：android, web-services

嗨，我是安卓世界的新手。我正在尝试为我的应用程序创建一个登录页面，该页面将通过 editext 获取用户 ID 和密码并将其发布在 url 中以进行登录身份验证。我已经编写了以下代码（来源互联网），但我的应用程序崩溃了。我还想检查身份验证是否成功，但由于我的应用程序崩溃，我无法更进一步。有人可以帮我吗。下面是我的应用程序的代码。谢谢。

```
import java.io.BufferedReader;
import java.io.IOException; 
import java.io.InputStream;
import java.io.InputStreamReader;
import java.io.UnsupportedEncodingException;
import java.util.ArrayList;
import java.util.List;   
import org.apache.http.HttpResponse;
import org.apache.http.NameValuePair;
import org.apache.http.client.ClientProtocolException;
import org.apache.http.client.HttpClient;
import org.apache.http.client.entity.UrlEncodedFormEntity;
import org.apache.http.client.methods.HttpPost;
import org.apache.http.impl.client.DefaultHttpClient;
import org.apache.http.message.BasicNameValuePair;
import android.app.Activity;
import android.os.Bundle;
import android.util.Log;
import android.view.View;
import android.view.View.OnClickListener;
import android.widget.Button;
import android.widget.EditText;
import android.widget.TextView;
import android.widget.Toast;
public class Login extends Activity {

    Button ok,back,exit;
    TextView result;
    String tag= "abc";

        /** Called when the activity is first created. */

    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.activity_main);

    }

        public void postLoginData(String username, String password ) {
            // Create a new HttpClient and Post Header

            HttpClient httpclient = new DefaultHttpClient();

            HttpPost httppost = new HttpPost("(my url)");

            try {
                // Add user name and password

                List<NameValuePair> nameValuePairs = new ArrayList<NameValuePair>(2);
                nameValuePairs.add(new BasicNameValuePair("username", username));
                nameValuePairs.add(new BasicNameValuePair("password", password));
                httppost.setEntity(new UrlEncodedFormEntity(nameValuePairs));
                Log.i(tag, "name and password");
                // Execute HTTP Post Request
                Log.w(tag, "Execute HTTP Post Request");
                HttpResponse response = httpclient.execute(httppost);

                String str = InputStreamToString(response.getEntity().getContent()).toString();
} catch (UnsupportedEncodingException e) {
            e.printStackTrace();
            } catch (IOException e) {
        e.printStackTrace();
            }
}

private StringBuilder inputStreamToString(InputStream is) {
        String line = "";
        StringBuilder total = new StringBuilder();
        // Wrap a BufferedReader around the InputStream
        BufferedReader rd = new BufferedReader(new InputStreamReader(is));
        // Read response until the end
        try {
        while ((line = rd.readLine()) != null) { 
            total.append(line); 
        }
        } catch (IOException e) {
        e.printStackTrace();
        }
        // Return full string
        return total;
        }

LOGCAT:

01-02 09:13:14.802: W/dalvikvm(2933): threadid=1: thread exiting with uncaught exception (group=0x40a70930)
01-02 09:13:14.951: E/AndroidRuntime(2933): FATAL EXCEPTION: main
01-02 09:13:14.951: E/AndroidRuntime(2933): java.lang.ClassCastException: android.widget.TextView cannot be cast to android.widget.EditText
01-02 09:13:14.951: E/AndroidRuntime(2933):     at com.example.project1.MainActivity$1.onClick(MainActivity.java:40)
01-02 09:13:14.951: E/AndroidRuntime(2933):     at android.view.View.performClick(View.java:4202)
01-02 09:13:14.951: E/AndroidRuntime(2933):     at android.view.View$PerformClick.run(View.java:17340)
01-02 09:13:14.951: E/AndroidRuntime(2933):     at android.os.Handler.handleCallback(Handler.java:725)
01-02 09:13:14.951: E/AndroidRuntime(2933):     at android.os.Handler.dispatchMessage(Handler.java:92)
01-02 09:13:14.951: E/AndroidRuntime(2933):     at android.os.Looper.loop(Looper.java:137)
01-02 09:13:14.951: E/AndroidRuntime(2933):     at android.app.ActivityThread.main(ActivityThread.java:5039)
01-02 09:13:14.951: E/AndroidRuntime(2933):     at java.lang.reflect.Method.invokeNative(Native Method)
01-02 09:13:14.951: E/AndroidRuntime(2933):     at java.lang.reflect.Method.invoke(Method.java:511)
01-02 09:13:14.951: E/AndroidRuntime(2933):     at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:793)
01-02 09:13:14.951: E/AndroidRuntime(2933):     at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:560)
01-02 09:13:14.951: E/AndroidRuntime(2933):     at dalvik.system.NativeStart.main(Native Method)
01-02 09:13:15.191: W/ActivityManager(278):   Force finishing activity com.example.project1/.MainActivity

This is MainActivity:

import android.annotation.SuppressLint;
import android.annotation.TargetApi;
import android.app.Activity;
import android.os.Build;
import android.os.Bundle;
import android.os.StrictMode;
import android.view.View;
import android.widget.Button;
import android.widget.EditText;

public  class MainActivity extends Activity  {

Button ok,back,exit;

String tag= "Project 1";

    /** Called when the activity is first created. */
    @TargetApi(Build.VERSION_CODES.GINGERBREAD)
    @SuppressLint("NewApi")
    @Override
    public void onCreate(Bundle savedInstanceState) {
        StrictMode.ThreadPolicy policy = new StrictMode.ThreadPolicy.Builder().permitAll().build();                 
        StrictMode.setThreadPolicy(policy);             
        super.onCreate(savedInstanceState);
        setContentView(R.layout.activity_main);

        // Login button clicked
        ok = (Button)findViewById(R.id.b);
        ok.setOnClickListener(new View.OnClickListener() {

            @Override
            public void onClick(View v) {
                // TODO Auto-generated method stub
                EditText uname = (EditText)findViewById(R.id.id);
                String username = uname.getText().toString();

                EditText pword = (EditText)findViewById(R.id.psswd);
                String password = pword.getText().toString();
                Login l = new Login();
                l.postLoginData(username, password);

            }
        });
    }
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-02T10:20:57.420

你的例外说明了一切。

```
java.lang.ClassCastException: android.widget.TextView cannot be cast to android.widget.EditText 
```

您在 xml 布局中拥有的是`TextView`，而不是`EditText`.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-02T10:21:36.523

需要查看您的布局 XML 以确定，但在这里，您正在转换为 EditText。我敢打赌，您的布局 XML 将 id 和 psswd 中的一个或两个声明为 TextView：

```
EditText uname = (EditText)findViewById(R.id.id);
String username = uname.getText().toString();

EditText pword = (EditText)findViewById(R.id.psswd);
String password = pword.getText().toString(); 
```

# html - HTML img拼接，让图片无边框，无边距

> ID：14120270
> 
> 赞同：0
> 
> 时间：2013-01-02T10:18:19.540
> 
> 标签：html, css, image

我想使用 html 拼接一堆图像，但问题是它们有边距，我使用网络检查器查找哪些属性会影响这一点，但一个小时或更短的时间仍然无法弄清楚。

我尝试过使用负边距，使用伪选择器的负位置，虽然它工作得很好，但这不是正确的方式吗？

[https://dl.dropbox.com/u/2321732/stitch_images/index.html](https://dl.dropbox.com/u/2321732/stitch_images/index.html)

所以现在我想要最干净的缝合方式使图像没有任何边距。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-01-02T10:20:22.247

添加以下内容：

```
body {
    font-size: 0;
} 
```

这是因为源代码中的新行，浏览器将其呈现为空格。

以上内容可防止呈现空格，但您也可以从源代码中删除换行符（因此标签都在一行上）。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-02T10:21:51.577

将 img-tags 写在一行中

```
 <img src="images/0_0.jpg" alt=""><img src="images/1_0.jpg" alt=""><img src="images/2_0.jpg" alt="">
    <br>

    <img src="images/0_1.jpg" alt=""><img src="images/1_1.jpg" alt=""><img src="images/2_1.jpg" alt="">
    <br>

    <img src="images/0_2.jpg" alt=""><img src="images/1_2.jpg" alt=""><img src="images/2_2.jpg" alt=""> 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-01-02T10:23:06.273

将您的图像设置为`display: block; float: left`和您的 br`float: left; clear: right`

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2013-01-02T17:52:11.570

如果您使用 em 作为尺寸单位，Abody97 的解决方案可能会导致问题。将所有内容写在一行中会使阅读变得更加困难。
您可以改为制作图像`float: left`并设置`overflow: hidden`为父元素。
但是，如果由于某种原因不能浮动元素，则可以使用注释，如下所示：

```
<div>
    <img src="1.jpg" alt=""><!--
 --><img src="2.jpg" alt=""><!--
 --><img src="3.jpg" alt="">
</div> 
```

# android - 无法在虚拟盒子模拟器中运行 android 项目

> ID：14120279
> 
> 赞同：1
> 
> 时间：2013-01-02T10:18:46.623
> 
> 标签：android

*我在 virtualbox android 模拟器中运行项目。*

我的项目工作正常。但这次在虚拟盒子 android 模拟器中运行项目。在控制台窗口中给我以下错误：

```
com.android.ddmlib.SyncException: I/O error
Launch canceled! 
```

**另一个项目运行良好**，很多人尝试和谷歌搜索，但我无法解决我的问题。

请帮我 ...

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-02T10:31:08.220

尝试完全卸载，重新安装virualbox模拟器。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-10-02T05:18:48.120

我在 VirtualBox 上遇到了与 Android x86 相同的问题。它是由损坏的文件系统引起的。Android 无法删除应用程序数据，我也无法通过命令行执行此操作（出现系统 I/O 错误和 FS 损坏消息）。

我尝试直接从 Android 使用 fsck 修复文件系统，但没有运气。然后我从 Linux LiveCD 启动了虚拟机并修复了 Android 文件系统。之后问题就解决了。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-10-02T05:20:25.847

试试 Genymotion。它相当快。

[Genymotion 主页](http://www.genymotion.com/)

# mysql - 使用存储过程从表中插入和选择

> ID：14120285
> 
> 赞同：0
> 
> 时间：2013-01-02T10:19:44.417
> 
> 标签：mysql

我目前对正在参加的在线课程的目标有疑问。目标低于此，我使用的代码以及我收到的错误将低于此。

使用一个变量来编写一个名为“AddNewAlbum”的过程。此过程至少需要两个参数 - NameOfArtist 和 AlbumName。该程序将：

1.从 Artist 表中查找 ArtistID，其中艺术家名称为 NameOfArtist

2\. 使用在步骤#1 中找到的 ArtistID 和 AlbumName 参数在专辑中插入新行

现在可以安全地假设艺术家在您运行此过程之前存在（意味着如果您调用 AddNewAlbum ('Bob Dylan', 'Street Legal')；那么“Bob Dylan”已经存在于 Artist 表中。

```
CREATE PROCEDURE AddNewAlbum (
NameOfArtist varcahr(50),
AlbumName varchar(50)
)
BEGIN
SELECT ArtistID, ArtistName FROM Artists
WHERE ArtistName = 'NameOfArtist';

INSERT INTO Albums (Title)
VALUES (AlbumName);
END;
//

CALL AddNewAlbum (
"Bob Dylan",
"Street Legal"
);
// 
```

错误 1364 (HY000): 字段 'ArtistID' 没有默认值

^ 是我收到的错误。谁能看到我做错了什么？我试着引用 WHERE ArtistName = 'NameOfArtist'; 但这没有用。

我想补充一点，它正在提取艺术家姓名和艺术家 ID，但没有将新行添加到专辑中。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-02T10:24:47.877

您可以`INSERT INTO...SELECT`对此使用声明，

```
DELIMITER $
CREATE PROCEDURE AddNewAlbum 
(
    @NameOfArtist varchar(50),
    @AlbumName varchar(50)
)
BEGIN
    INSERT INTO Albums (ID, Title)
    SELECT  ArtistID, @AlbumName AS Title
    FROM    Artists
    WHERE   ArtistName = @NameOfArtist;
END $
DELIMITER ; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-02T10:30:55.413

请看代码。其中有拼写错误。NameOfArtist的拼写`varchar`错误。

```
CREATE PROCEDURE AddNewAlbum (
NameOfArtist varcahr(50),
AlbumName varchar(50)
) 
```

请尝试并更正它。

# actionscript-3 - 将警报框/弹出窗口限制为 flex 3 中的单个模块

> ID：14120286
> 
> 赞同：0
> 
> 时间：2013-01-02T10:19:45.850
> 
> 标签：actionscript-3, apache-flex, flex3

我试图将警报框限制为特定模块，它不应该超出模块范围。我保留了 2 个选项卡，每个选项卡都包含不同的模块。但是警报的范围是全球性的，它影响的是整个窗口，而不是仅限于模块区域。请看下面的代码。

主.mxml

```
<?xml version="1.0" encoding="utf-8"?>
<mx:Application xmlns:mx="http://www.adobe.com/2006/mxml" layout="absolute">
<mx:Script>
    <![CDATA[
          import mx.modules.*;

         public function createModule(m:ModuleLoader, s:String):void {
        if (!m.url) {
            m.url = s;
            return;
        }
        m.loadModule();
    }

    public function removeModule(m:ModuleLoader):void {
        m.unloadModule();
    }

    ]]>
</mx:Script>
 <mx:Panel title="Module Example" 
    height="90%" 
    width="90%" 
    paddingTop="10" 
    paddingLeft="10" 
    paddingRight="10" 
    paddingBottom="10"
 >
    <mx:TabNavigator id="tn" 
        width="100%" 
        height="100%" 
        creationPolicy="auto">
        <mx:VBox id="vb1" label="Column Chart Module">                
            <mx:Button 
                label="Load"   click="createModule(chartModuleLoader, l1.text)"/>
            <mx:Button 
                label="Unload" />
            <mx:Label id="l1" text="module1.swf"/>
            <mx:ModuleLoader id="chartModuleLoader"/>                                
        </mx:VBox>

        <mx:VBox id="vb2" label="Form Module">
            <mx:Button 
                label="Load"    click="createModule(formModuleLoader, l2.text)"/>
            <mx:Button 
                label="Unload"/>
            <mx:Label id="l2" text="module2.swf"/>
            <mx:ModuleLoader id="formModuleLoader"/>
        </mx:VBox>
    </mx:TabNavigator>
</mx:Panel>
</mx:Application> 
```

模块1.mxml

```
<?xml version="1.0" encoding="utf-8"?>
<mx:Module xmlns:mx="http://www.adobe.com/2006/mxml" layout="absolute" width="400"    height="300">
<mx:Button label="Click 1 " click="ini()"/>
<mx:Script>
    <![CDATA[
        import mx.controls.Alert;

        public function ini():void
        {
            Alert.show("How","hello", 0,null,null,null,0);
        }

    ]]>
</mx:Script>
</mx:Module> 
```

模块2.mxml

```
 <?xml version="1.0" encoding="utf-8"?>
 <mx:Module xmlns:mx="http://www.adobe.com/2006/mxml" layout="absolute" width="400" height="300">
<mx:Button label="Click 2 " click="ini1()"/>
<mx:Script>
    <![CDATA[
        import mx.controls.Alert;

        public function ini1():void
        {
            Alert.show("Click 2","hello", 0,this);
        }

    ]]>
</mx:Script>
 </mx:Module> 
```

谢谢你

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-08T15:35:42.917

根据我的评论，您尝试的方法是行不通的。但是这是一种实现方法：

在每个可以显示警报的模块中：

```
private function createAlert(text:String):void{
    var myAlert:Alert = new Alert();
    myAlert.addEventListener(CloseEvent.CLOSE, onClose);
    myAlert.title = "Attention";
    myAlert.label = text;
    alertLayer.addElement(myAlert);
}

private function onClose(event:CloseEvent):void{
    trace("closed");
} 
```

然后在模块 mxml

```
<s:VGroup id="alertLayer" width="100%" height="100%" verticalAlign="middle" horizontalAlign="center" /> 
```

这将强制在模块的最顶层发出警报，而不使用 PopUpManager 或全局范围。这更像是你所追求的吗？

# wcf - 使用 WCF POST 方法时方法不允许错误

> ID：14120287
> 
> 赞同：0
> 
> 时间：2013-01-02T10:19:48.603
> 
> 标签：wcf

我在 wcf 中使用 POST 方法。但在尝试使用客户端应用程序访问时，它会返回“不允许的方法”错误。

我的方法：

```
[OperationContract]

[WebInvoke(
        Method = "POST",
        BodyStyle = WebMessageBodyStyle.Bare,
        UriTemplate = "/Upload/{fileName}")]

       void Upload(string fileName,Stream data)
      {

        FileStream fileToupload = new FileStream("D:\\FileUpload\\" + fileName, FileMode.Create);

        byte[] bytearray = new byte[10000];
        int bytesRead, totalBytesRead = 0;
        do
        {
            bytesRead = data.Read(bytearray, 0, bytearray.Length);
            totalBytesRead += bytesRead;
        } while (bytesRead > 0);

        fileToupload.Write(bytearray, 0, bytearray.Length);
        fileToupload.Close();
        fileToupload.Dispose();
      } 
```

我的客户代码：

```
 byte[] bytearray = null;
        string name = "";
        //throw new NotImplementedException();
        if (FileUpload1.HasFile)
        {
            name = FileUpload1.FileName;
            Stream stream = FileUpload1.FileContent;
            stream.Seek(0, SeekOrigin.Begin);
            bytearray = new byte[stream.Length];
            int count = 0;
            while (count < stream.Length)
            {
                bytearray[count++] = Convert.ToByte(stream.ReadByte());
            }
        }

        string baseAddress = "http://localhost:49798/WcfPostMet/Service.svc/Upload/";
        HttpWebRequest request = (HttpWebRequest)HttpWebRequest.Create(baseAddress+name);
        request.Method = "POST";
        request.ContentType = "text/plain";
        Stream serverStream = request.GetRequestStream();
        serverStream.Write(bytearray, 0, bytearray.Length);
        serverStream.Close();
        //using (
        HttpWebResponse response = request.GetResponse() as HttpWebResponse;
        {
            int statusCode = (int)response.StatusCode;
            StreamReader reader = new StreamReader(response.GetResponseStream());
        } 
```

我没有修改 web.config 文件。

任何建议......

# jquery - 没有使用 jquery 获取文本框的值

> ID：14120288
> 
> 赞同：0
> 
> 时间：2013-01-02T10:19:57.647
> 
> 标签：jquery, html, input, inputbox

我有一个文本框，我试图获得这样的价值

```
var comment = $("input#diaMissedPucomments").val(); 
```

但是在我使用它的同时没有获取该值

```
$('input:checked').each(function() {
          selectedValues =$(this).val()+","+selectedValues ;
        }); 
```

要获取选定复选框的值，它可以正常工作。

```
<div style="display:none;" id="diaMissedPU" title="Missed P/U Comments" >
                       <table>
                            <tr>
                               <td>Enter Comments : </td>
                               <td><input tyep="text" id="diaMissedPucomments" name="diaMissedPucomments" /></td>
                           </tr>
                       </table>
                    </div> 
```

以上是HTML，我想获得的价值`diaMissedPucomments`

这该怎么做。

请帮助我得到这个。

最好的祝福

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-02T10:21:56.757

这只是一个错误的输入`tyep`，必须修复`type`

```
<input tyep="text" id="diaMissedPucomments" name="diaMissedPucomments" /> 
```

一定是

```
<input type="text" id="diaMissedPucomments" name="diaMissedPucomments" /> 
```

**演示：http:** [//jsfiddle.net/vnKza/1/](http://jsfiddle.net/vnKza/1/)

正如 dakait 所说，将您的 Jquery 代码附在 Jquery 就绪处理程序中

```
$(function(){
  var comment = $("input#diaMissedPucomments").val();
  //your other codes
}); 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-01-02T10:21:15.733

`tyep="text"`您对元素的ID 进行了拼写更改`type="text"`是唯一的，您可以只使用 id 选择器，不需要像`input#diaMissedPucomments`id 是唯一的那样使用带有 id 的输入。

[现场演示](http://jsfiddle.net/rajaadil/vnKza/)

```
var comment = $("#diaMissedPucomments").val(); 
```

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2013-01-02T10:22:22.590

我看到你的输入类型拼写错误..

```
tyep="text" //here 
```

应该

```
<input type="text" id="diaMissedPucomments" name="diaMissedPucomments" /> 
```

和 jquery 似乎很好..

**更新**

```
 $(document).ready(function(){  //make sure you have the javascript codes inside document.ready
    var comment = $("#diaMissedPucomments").val();
 }); 
```

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2013-01-02T10:26:48.077

就像每个人都提到你有一个错字，加上确保你已经将代码包装在准备好的处理程序中

```
$(function(){
 //your code here 
}); 
```

为什么它可以在 jsfiddle 上工作呢？因为使用默认设置，小提琴将代码包装在文档中

# blackberry-webworks - 从服务器页面重定向到本地页面

> ID：14120292
> 
> 赞同：0
> 
> 时间：2013-01-02T10:20:19.797
> 
> 标签：blackberry-webworks

我正在使用黑莓网络。我想从服务器页面重定向到本地页面。我尝试了以下代码： window.location = 'local:///index.html'; 但它不起作用，请让我知道解决方案。谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-05-15T16:14:24.843

```
window.location.href = "index.html"; 
```

应用程序在 local:/// 的实例中运行 如果要访问存储卡上的文件，请使用 file:///

黑莓决定无法访问 localhost 和 127.0.0.1。这使得 local:/// 被当前应用程序绑定。

制作一个 html 应用程序，您只有 1 个窗口。所以你总是必须重定向父窗口来做你想做的事情。window.location.href = "local:///index.html";

也应该工作。

PS .... local:/// 不适用于模拟器或波纹。它将适用于实际的 BB 设备。

# c# - 使用会话和延迟加载

> ID：14120300
> 
> 赞同：1
> 
> 时间：2013-01-02T10:20:50.290
> 
> 标签：c#, nhibernate

使用 NHibernate 和 C#，我在删除使用属性延迟加载加载的对象时遇到问题。

对象是。

```
public class Item
{
    public virtual Guid ItemID { get; set; }    
    public virtual string Name { get; set; }
    public virtual decimal Price { get; set; }
    public virtual string Image { get; set; }
    public virtual Iesi.Collections.Generic.ISet<Tax> Taxes { get; set; }
} 
```

“税收”集合在这里加载了延迟加载。所以我需要保持会话开放（据我所知）。加载“项目”对象时，我使用以下查询。

```
 public Item FindByID(Guid itemID)
    {
        //using(var session = NHibernateHelper.OpenSession())
        //using (var tr = session.BeginTransaction())
        //{
        //    return session.Get<Item>(itemID);
        //}

        var session = NHibernateHelper.OpenSession();
        return session.Get<Item>(itemID);
    } 
```

在上面的代码中，`FindByID()`您可以看到我已经注释掉了一些在从数据库中获取对象后关闭会话的代码。这是因为，我需要打开会话，因为我有`Taxes`对象集合可以被懒惰地访问。打开代码部分显示返回找到的对象后会话仍然打开。

不，当我使用上面加载的对象使用以下代码执行删除时。

```
 public void RemoveItem(Item item)
    {            
        using(var session = NHibernateHelper.OpenSession())
        using (var tr = session.BeginTransaction())
        {
            try
            {
                session.Delete(item);
                tr.Commit();
            }
            catch (Exception Ex)
            {
                throw Ex;
            }
        }
    } 
```

我收到以下错误..

> 非法尝试将集合与两个打开的会话相关联

错误很明显，获取的对象已打开会话，当我打开另一个会话以删除同一对象时，会产生此错误。

请有人指导我摆脱这个错误。谢谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-02T10:35:28.680

错误在您的设计中。您正在打开一个会话以获取该对象，并使其保持打开状态。然后您正在打开另一个会话以删除托管对象，但您打算自动关闭此会话。那么为什么不关闭`FindByID`方法中的会话呢？

您需要考虑您的设计，因为上述内容不一致 - 或者如 Morten 所说，提出更深入的问题（即应该如何设计）。

由于您需要访问惰性实例，因此最好使用 Morten 的方法并使用每个 Web 请求的会话或设置您自己的包含会话的请求上下文（如果您不创建 Web 应用程序）。如果您还没有基于上下文的设计，一种更简单的方法是在事件开始时创建会话（即用户想要删除项目）并将会话传递给 DAO 方法：

```
public Item FindByID(Session session, Guid itemID)
{
    using (var tr = session.BeginTransaction())
    {
        return session.Get<Item>(itemID);
    }
}

public void RemoveItem(Session session, Item item)
{
    using (var tr = session.BeginTransaction())
    {
         session.Delete(item);
         tr.Commit();
    }
} 
```

您可以更进一步，并在 DAO 之外创建事务，这样会更快并充分利用事务（即稍后您可能会收到通过通用 DAO 执行相互依赖的数据库操作的请求）。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-02T10:41:52.230

您需要确保始终只有一个会话处于活动状态。有两种流行的方法：

*   拥有一个您始终将请求转发到的服务层。该服务层负责会话处理（和事务处理）。所有业务逻辑都必须在会话层中处理，因此您始终拥有会话。您必须在 UI 中加载所需的所有内容并将其作为响应的一部分返回。有关使用 nhibernate 的简单请求响应服务层，请参见例如[http://davybrion.github.com/Agatha/](http://davybrion.github.com/Agatha/)。
*   每个 Web 请求都有一个会话。这通常涉及在调用控制器方法之前打开会话（和事务），然后提交事务。通常这是通过使用您放在需要会话的方法上的属性来处理的。我无法给出一个完整的例子，但我知道[NHibernate 3.0 Cookbook](https://www.packtpub.com/nhibernate-3-0-cookbook/book)中描述了一种流行的方法。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-02T14:28:47.780

假设您在 Web 应用程序中使用 session-per-request 模式，最简单的解决方案是修改`NHibernateHelper.OpenSession`方法以返回请求的当前会话。为了完成这项工作，您不能将会话访问包装在一个`using`块中，而是在 global.asax 中管理会话生命周期。

I would take this approach if you have a lot of existing code that you don't want to refactor. If you have the time to refactor then you should use dependency inject to inject the ISession into your repository/query objects.

# bash - 使用守护进程将 play2 应用程序作为后台任务启动

> ID：14120303
> 
> 赞同：1
> 
> 时间：2013-01-02T10:20:56.240
> 
> 标签：bash, playframework-2.0, daemon, init.d

我一直在尝试为我的 play2 应用程序编写启动脚本，但我无法让它作为后台任务工作。我从[文档](http://www.playframework.org/documentation/2.0.4/Production)开始，想出了下面的脚本。

脚本：

```
#! /bin/sh

# description: Starts autocomplete play app using daemon
# 1\. Go to $APPLICATION_PATH and prepare for dev by doing: play clean compile stage
#    This will create a start script at target/start
# 2\. Start the application by running this script

. /etc/rc.d/init.d/functions

PLAY_HOME=/opt/play
PLAY=$PLAY_HOME/play
NAME=autocomplete
DESC="autocomplete application"
PID_FILE=/var/run/autocomplete/$NAME.pid    

# Path to the JVM
JAVA_HOME=/usr/java/latest
export JAVA_HOME
export PATH=$PATH:$JAVA_HOME/bin

APPLICATION_PATH=/opt/playapps/autocomplete

DAEMON_OPTS="-Dconfig.file=/opt/playapps/autocomplete/conf/application-dev.conf"

start()
{
    echo -n "Starting $DESC with: --pidfile $PID_FILE ${APPLICATION_PATH}/target/start $DAEMON_OPTS"
    daemon --pidfile $PID_FILE "${APPLICATION_PATH}/target/start $DAEMON_OPTS"
}
stop()
{
  echo -n $"Stopping $DESC:"
  #NOT DONE YET
}

case "$1" in
  start)
    start
    ;;
  stop)
    stop
    ;;
esac

exit $RETVAL 
```

我用谷歌搜索了这个问题并找到了这样的解决方案，[但](https://gist.github.com/2204773)他们使用的是 我的**Red Hat Enterprise Linux Server 5.6 (Tikanga)** dist上没有的**start-stop-daemon 。**如果可能的话，我宁愿不安装任何其他软件来完成这项工作。为了使这项工作作为后台任务并将其与控制台分离，我错过了什么？CTRL+D 不起作用，CTRL+C 退出进程。

 *** * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-02T12:56:54.067

好的，这是在 favouretti 提示之后的一种解决方案：

```
#! /bin/sh

# description: Starts autocomplete play app using daemon
# 1\. Go to $APPLICATION_PATH and prepare for dev by doing: play clean compile stage
#    This will create a start script at target/start
# 2\. Start the application by running this script
# created by: Jakob

. /etc/rc.d/init.d/functions

PLAY_HOME=/opt/play
PLAY=$PLAY_HOME/play
NAME=autocomplete
DESC="autocomplete application"

# Path to the JVM
JAVA_HOME=/usr/java/latest
export JAVA_HOME
export PATH=$PATH:$JAVA_HOME/bin

APPLICATION_PATH=/opt/playapps/autocomplete

DAEMON_OPTS="-Dconfig.file=/opt/playapps/autocomplete/conf/application-dev.conf"

start()
{
        echo -n "Starting $DESC with: $APPLICATION_PATH/target/start $DAEMON_OPTS &"
        $APPLICATION_PATH/target/start $DAEMON_OPTS &
}
stop()
{
        echo -n $"Stopping $DESC:"
        kill `cat $APPLICATION_PATH/RUNNING_PID`
}

case "$1" in
  start)
    start
    ;;
  stop)
        stop
        ;;
esac

exit $RETVAL 
```

您将需要 CTRL+D 才能退出控制台，这与我的想法并不完全一致。也许有人有更好的解决方案？

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-01-12T14:41:36.843

这是我在 Amazon AMI Linux 下自动启动 play 2.2 应用程序的版本。在 CentOS 和 RedHat 下也是如此。其他 linux 风格可能需要很少的适应。该脚本在单独的用户下启动播放应用程序。

```
#!/bin/bash
# description: MyWorkCalendar Play App
# processname: myworkcalendar
# chkconfig: 234 20 80

# User running the Play process
USER=mywork
USER_HOME=/home/mywork

# Java home, add java and play to path
export JAVA_HOME=$USER_HOME/java_home
export PATH=$JAVA_HOME/bin:$USER_HOME/play_home:$PATH

# Path to the application
APP_PATH=$USER_HOME/app/work-calendar/target/universal/stage
APP_OPTS="-Dconfig.file=$APP_PATH/conf/application-prod.conf"

RETVAL=0

case "$1" in
  start)
    echo -n "Starting Play service"
    rm -f ${APP_PATH}/RUNNING_PID
    su $USER -c "$APP_PATH/bin/myworkcalendar $APP_OPTS >/dev/null" &
    RETVAL=$?
    ;;
  stop)
    echo -n "Shutting down Play service"
    kill `cat $APP_PATH/RUNNING_PID`
    RETVAL=$?
    ;;
esac
exit $RETVAL 
```

将脚本放到 /etc/init.d 中，使其可执行并使用 chkconfig 进行注册：

```
sudo chmod 755 script-name
sudo chkconfig --add script-name
sudo chkconfig script-name on 
```

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2014-02-18T18:57:16.973

这是我的 Play 2.2 启动/停止脚本版本：

[http://vladsprogrammingblog.blogspot.com/2014/01/play-startstop-script.html](http://vladsprogrammingblog.blogspot.com/2014/01/play-startstop-script.html)**

# asp.net - 从asp页面调用静态类中的静态方法

> ID：14120309
> 
> 赞同：1
> 
> 时间：2013-01-02T10:21:02.230
> 
> 标签：asp.net, static, static-methods

当我从 asp 页面调用静态方法时，我得到了这个编译错误：

```
CS0103: The name 'Tudo' does not exist in the current context 
Line 10: <script src="<%= Tudo.getFromDefinicao("winJS") %>" type="text/javascript"></script> 
```

Tudo 是一个静态类，在 App_Code 粘贴中，命名空间与我的 asp 页面相同。

```
namespace MySite
{
   public static class Tudo
   {
     public static string getFromDefinicao(string key)
     {
        //do some stuff
        return myString;
     }
   }
} 
```

我想从我的 asp 调用 getFromDefinicao(...) 方法，但 asp 找不到类（在这种情况下，我在我的 MasterPage 中调用）。如果我从 MasterPage.cs 调用 Tudo.cs 中的方法，我没有问题，我不需要声明“使用‘命名空间’；” 因为它们在同一个命名空间中......

```
<%@ Master Language="C#" AutoEventWireup="true" CodeBehind="MasterPage.master.cs" Inherits="MySite.MasterPage" %>
<html>
<head>
 <script src="<%= Tudo.getFromDefinicao("winJS") %>" type="text/javascript"></script>
</head>
....... 
```

我必须做些什么来解决这个问题？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-02T10:22:38.793

尝试添加命名空间`MySite`

```
<script src="<%= MySite.Tudo.getFromDefinicao("winJS") %> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-02T10:48:39.927

解决方法：调用方法时添加命名空间：

`<script src="<%= MyNamespace.MyStaticClass.myMethod()`

如果出现这个错误：

> 编译器错误消息：CS0433：“C:...”和“c:..”中都存在“MySite.Tudo”类型

将类从 ASP.NET 文件夹 App_Code 删除到另一个。

# memcached - 用于内存存储的 Memcached

> ID：14120315
> 
> 赞同：1
> 
> 时间：2013-01-02T10:21:25.150
> 
> 标签：memcached

memcached 是否保证对象的持久 IN-MEMORY 存储只要它正在运行并且可用的配置内存空间足够？

一个例子是消息系统的会话数据的存储。在什么情况下我会尝试从 memcached 中读取一个键（我之前写过，针对该键的数据没有超时）并得到一个空响应？当超出配置的内存时，memcached 的行为是什么（它会换出一些数据，以及它会换出哪些数据）？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-03T04:09:18.857

我遇到过这个问题，您将无法预测哪些数据将被删除。被换出的数据取决于您要缓存的新数据的大小以及 memcached 内存中的[平板和块](http://dev.mysql.com/doc/refman/5.1/en/ha-memcached-using-memory.html)大小。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-03T03:40:05.583

memcached 永远不会保证它会返回您存储在其中的内容。作为缓存，它只保证它不会返回您没有告诉它有效（或告诉它无效）的数据。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2018-04-29T17:25:41.060

需要记住的要点 Memcached 没有内部机制来跟踪可能发生的未命中。当缓存的大小已满时，将按 LFU 顺序删除较旧的数据。因此客户端必须将 Memcached 视为临时缓存；他们不能假设存储在 Memcached 中的数据始终存在。Memcached 不支持任何集群功能。实现应用程序打算缓存在 memcached 中的数据结构的序列化非常重要。当存储在缓存中的对象从业务角度不再有效时，应用程序必须确保手动将其从缓存中删除。例如，如果应用程序将产品信息存储在缓存中，那么如果产品不再可用，则需要手动将其从缓存中删除。

学分：[https ://askintro.com/2018/04/28/what-is-memcached/](https://askintro.com/2018/04/28/what-is-memcached/)

# css - 样式表 + base64 URL（图标） - 缓存？

> ID：14120319
> 
> 赞同：0
> 
> 时间：2013-01-02T10:21:50.470
> 
> 标签：css, icons, stylesheet, browser-cache

我试图通过减少对各种图像精灵所做的额外请求并将所有图像精灵嵌入到主样式表中来提高页面的性能。现在我的样式表大小快速增长，现在达到了近 500KB，这让我开始担心——它会在桌面浏览器和移动浏览器中正确缓存吗？

我[阅读了有关移动缓存](http://www.yuiblog.com/blog/2010/07/12/mobile-browser-cache-limits-revisited/)的信息，发现现代（并不真正关心旧的）移动浏览器可以缓存高达 1MB 大小的文件。因此，如果我理解正确，关于缓存的一切都应该没问题，对吧？

然后我也很感兴趣，在单独提供图标精灵（大约 10-20 个文件）或将所有内容包含在一个样式表中（将请求数从 11-21 减少到只有 1 个）时，性能是否有很大差异？

我是否认为一个更大的请求比 10-20 个小请求要好得多？

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-02T10:24:43.573

> 它会在桌面和移动浏览器中正确缓存吗？

当然。没有理由认为它不会，尽管移动浏览器确实有更小的缓存。

> 我是否认为一个更大的请求比 10-20 个小请求要好得多？

是的，通常是这样。大多数浏览器将被配置为在一个页面中发生多达 4 个并行下载，因此 10-20 个请求将需要更多的连接和响应延迟。

但是两个大请求可以并行完成，所以考虑使用一个大精灵表而不是数据 URI（base64 也比编码的二进制文件大 30% 左右）。

# view - 有没有简单的方法可以将特定文件从一个视图复制到另一个视图中？

> ID：14120320
> 
> 赞同：3
> 
> 时间：2013-01-02T10:21:49.923
> 
> 标签：view, clearcase

我必须在明确的情况下将大量文件从一个视图复制到另一个视图。要复制的文件名将作为输入给出。任何想法如何通过脚本实现这一目标？

谢谢，JP

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-09T14:54:59.990

您的问题对您要完成的工作不是很清楚。

如果您的源文件是版本化元素，并且您希望将它们作为版本化元素放在目标视图中（在不同的分支上），那么您应该使用合并（或 findmerge）命令。例如，在目标视图中，运行 findmerge -ftag src_view -merge。

如果您只需要在目标视图中从源视图“查看”一些版本化文件，则可以标记源文件并向目标视图配置规范添加规则（不涉及复制）。

如果您尝试移动非版本化文件，您可以通过 /view/ 扩展 ala 使用 cp 或 mv：cp /view/src_view/files /view/dst_view/files

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-02T10:39:16.673

最简单的方法是使用**`clearfsimport`**.
参见例如“[如何通过 cleartool 命令将文件夹中的所有文件添加到源代码管理？](https://stackoverflow.com/questions/12891096/how-to-add-all-the-files-in-a-folder-to-source-control-via-cleartool-command) ”。

clearfsimport 的诀窍在于它将导入给定文件夹中的任何文件，而不关心所述源文件夹的性质。

因此，如果您从来自（源）ClearCase 视图的文件夹导入，`clearfsimport`则不会在意，并将其导入到您想要的任何*目标*ClearCase 视图。

# javascript - Rails Best_in_place 编辑问题

> ID：14120329
> 
> 赞同：0
> 
> 时间：2013-01-02T10:22:14.603
> 
> 标签：javascript, ruby-on-rails, ruby-on-rails-3, ruby-on-rails-3.2, best-in-place

我正在尝试在我的 rails 应用程序中实现[best_in_place](https://github.com/bernat/best_in_place)，但我不知道如何实现它。当我滚动需要编辑的文本时，它什么也没做。我在用户下有一个嵌套的配置文件模型，我想编辑用户名。但是名称在 Profile Model 下。所以我有“user.profile.name”。如前所述，我已按照安装步骤包含并安装了 gem，并将 jquery 文件包含在我的 application.js 中！

这是我的展示视图：

```
<%= best_in_place @profile, :name, :type => :input, :path => user_profile_path(@user) %> 
```

这是我在用户控制器中的显示操作：

```
 def show
    @user = User.find_by_identifier!(params[:id])
    @profile = @user.profile
  end 
```

这是我的个人资料控制器：

响应：html，：json

```
 def edit
     @user = User.find_by_identifier!(params[:user_id])
     @profile = @user.profile
   end

   def update
     @user = User.find_by_identifier!(params[:user_id])
     @profile = @user.profile
     @profile.update_attributes(params[:profile])
     respond_with @user
   end 
```

这是我的 application.js 文件

```
//= require jquery
//= require jquery_ujs
//= require best_in_place
//= require best_in_place.purr
//= require_tree .

$(document).ready(function() {
  /* Activating Best In Place */
  jQuery(".best_in_place").best_in_place();
}); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-02T11:55:57.117

感谢@baldrick。我有另一个使用旧版本 jQuery 的 jQuery 插件。我删除了与该插件相关的 JS，之后 Best_in_Place 工作正常。唯一的问题是我必须使用一个或另一个，因为它们会发生冲突，或者因为新版本不支持某些功能，所以需要找到其他插件与新版本 jQuery 一起工作的方法。

# php - 是否有任何在线应用程序可以存储或收藏我学到的新插件或技术以供将来使用？

> ID：14120330
> 
> 赞同：1
> 
> 时间：2013-01-02T10:22:21.337
> 
> 标签：php, web-applications, web-technologies

我是电脑程序编制员。每天我都会看到新的插件、库、框架和技术。一些用于工作，一些用于阅读。很难将我学到的东西和将来需要它们时使用它们的目的联系起来。所以我正在寻找一个在线应用程序，我可以在其中保存笔记或书签，并在将来需要时找到合适的应用程序。有没有可用的在线申请。如果是，请提供名称或链接。

谢谢， 埃纳穆尔

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-02T10:26:01.933

你可以使用[谷歌书签](https://www.google.com/bookmarks/?hl=en) 或[美味](http://www.delicious.com/)。两者都用于保存书签。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-02T10:28:56.513

为此，我使用[evernote](http://www.evernote.com)和[instapaper](http://www.instapaper.com)。两者都有电话应用程序，易于使用。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-02T10:31:24.703

看看[ownCloud 项目](http://owncloud.org)。很棒的东西和真正的免费软件。

他们的应用商店有一个[书签](http://apps.owncloud.com/content/show.php/Internal+Bookmarks?content=149975)应用程序。还有一个非常有趣的 url 缩短套件，带有一个可以用作舒适书签引擎的扭曲（称为[Shorty ）。](http://apps.owncloud.com/content/show.php/Shorty?content=150401)

# java - Apache Ant + Ivy：仅为选定配置发布工件

> ID：14120332
> 
> 赞同：0
> 
> 时间：2013-01-02T10:22:23.637
> 
> 标签：java, ant, build, ivy

**背景：**

我有一个持续集成系统，它在每次更改时以及每晚运行构建。我不希望每次更改都构建运行 JUnit 和代码覆盖率。但是它必须在每晚构建时运行它。最近我们搬到了 Ant (1.84) + Ivy (2.3.0-RC2) 并且事情看起来非常令人印象深刻。然而，这是一个问题。在我的系统中，一个项目中的单元测试依赖于另一个项目中的单元测试。我可以构建和发布这些单元测试。但是我必须为每次构建都这样做，这违背了目标。单元测试和覆盖只能在夜间构建中运行 - 而不是每次构建。

例如，在 ivy.xml 中的以下部分，我需要为每个构建构建 myutil.jar 和 myutil-test.jar。

```
<publications>
    <artifact name="myutil" type="jar" conf="default"/>
    <artifact name="myutil-test" type="jar" conf="test"/>
</publications> 
```

我已经为此苦苦挣扎了几个星期。有没有办法只发布所选常春藤配置的工件而不是所有配置？换句话说，有没有办法我只能为给定的构建发布配置“默认”的工件以及其他构建的“默认”和“测试”，保持相同的 ivy.xml？

# c# - ViewModel - 在 ajax 请求后用新内容重新填充表单

> ID：14120333
> 
> 赞同：1
> 
> 时间：2013-01-02T10:22:25.527
> 
> 标签：c#, json, asp.net-mvc-3, viewmodel

当我调用 AJAX Get/Post 时，我可以将`ViewModel`我的表单发送到我的 Controller 方法。有没有办法在这个请求之后用新的值重新填充表单`ViewModel`？我的方法的正确返回是什么：带有 ViewModel 或 View 的 Json？像这样：

```
$.ajax({
    dataType: "JSON",
    data: $('#form').serialize(),
    type: "GET",
    url: "SomeController/doSomething",
    success: function(myViewModel) {
        // How to repopulate my form with the new values?
    }
});

public class SomeController {

    [HttpGet]
    public ActionResult DoSomething(MyViewModel model) {

        model.SomeProperty = "This property needs to be changed into the View.";

        // The right way is returning a Json with the ViewModel...
        return Json(model, JsonRequestBehavior.AllowGet);
        // or return some View?
        return View(model);
    }
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-02T10:25:40.250

将返回的是`HTML`. 我可以建议你返回一个`PartailView(model)`，这样它就可以在整个系统中使用，你不需要`json`编码它只是使用`return PartialView(model)`. 将部分视图放入您的`Shared`文件夹中。

```
public ActionResult DoSomething(MyViewModel model) {

    model.SomeProperty = "This property needs to be changed into the View.";

    return PartialView("MyPartialView", model);
} 
```

更改 ajax 以对表单进行字符串化，这将允许模型绑定工作：

```
$.ajax({
    dataType: "JSON",
    data: JSON.stringify({model : $('#form').serialize() }),
    type: "GET",
    url: "SomeController/doSomething",
    success: function(myViewModel) {
        $('#myUlDropDownListID').replaceWith(myViewModel);
    }
}); 
```

在您的情况下，`ajax`您需要将 替换为`HTML`返回，在这种情况下，您已经调用了`myViewModel`。即，如果它是一张桌子，那么你会做

```
$('#myUlDropDownListID').replaceWith(myViewModel); 
```

这将用新的 HTML 替换表格

# android - 在另一个应用程序的文本视图中设置文本

> ID：14120334
> 
> 赞同：-5
> 
> 时间：2013-01-02T10:22:31.717
> 
> 标签：android, textview

我有一个 android 应用程序（第一个），它启动另一个应用程序（第二个）。如何使用从第一个应用程序发送的数据在另一个应用程序（即第二个）的文本视图中设置文本？？？PS-我无法控制第二个应用程序。不是我创造的

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-02T10:27:50.927

你无能为力。

你自己说`I don't have control over the second app`的。

**这就是问题**

假设有人想将数据传递给您的应用程序。

你知道如何处理它，如何处理它以及他为什么把它放在那里吗？

不，您永远不会知道，这是解决恶意软件问题的可靠方法。

*因此谷歌没有也可能永远不会包含这个功能*

# java - Java对象添加/更新/删除算法

> ID：14120336
> 
> 赞同：1
> 
> 时间：2013-01-02T10:22:54.007
> 
> 标签：java, algorithm

我正在寻找一种算法，它将以最有效的方式更新我定期拥有的 Java 对象列表。该算法需要...

当前集

```
A, B, C 
```

调用重载指令并从数据库返回一个新集合

```
A, C, D 
```

（即`A`&`C`应该更新（如有必要），`B`需要删除 &`D`是新的，应该创建）

显然，我可以杀死所有对象并每次重新创建所有对象，但我想避免杀死任何未更改的对象（即，如果数据库中的`A`&`C`没有更改，那么当前的 Java `A`&`C`对象应该单独继续以他们目前的形式）。

我需要有一个好的算法来执行这些各种检查，然后根据需要添加/更新/删除。我的情况的逻辑应该能够从一个简单的例子中继承下来，我`ArrayList<String>`认为显然我的`A`//对象要复杂得多。`B``C`

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-02T10:30:03.317

您需要`HashMap`以数据库 ID 作为键，将完整对象作为值。您将遍历结果集，并通过 O(1) 操作找出该项目是否已经存在。然后，您可以根据需要添加和更新。在您继续进行时，为所有获取的条目构建一个临时`HashSet`的数据库键。然后进行最终设置差异以从运行时副本中找到要删除的项目。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-02T10:29:30.693

您可以有 2 个列表，一个用于 BusinessLayer，另一个用于 UI 层，并相应地标记对象以进行创建/更新/删除。一旦识别出这个标记列表，就可以转发相应的数据库查询。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-02T10:30:46.063

我建议你应该为你的集合使用地图。这将使查找更有效。

您可以执行几个循环来找出发生了什么变化。

```
Map<MyKey, MyType> previous = ..
Map<MyKey, MyType> current = ..

for(Map<MyKey, MyType> entry: current.entrySet()) {
  MyType t = entry.getValue();
  MyType p = previous.get(entry.getKey());
  if (p == null)
      added(t);
  else if (!p.equals(t))
      updated(p, t);
}
for(Map<MyKey, MyType> entry: previous.entrySet()) {
  if(!current.contains(entry.getKey()))
     removed(entry.getValue());
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-01-02T10:34:59.863

### 解决方案 1

您的对象可以从基本类型继承，例如：

```
abstract class PersistentObject {
    private boolean persistent;  // true if exists in database
    private boolean modified;    // true if modified
    private boolean deleted;     // true if deleted

    public boolean isPersistent() { return persistent; }
    protected void setPersistent() { persistent = true; }

    public boolean isModified() { return modified; }
    protected void setModified() { modified = true; }

    public boolean isDeleted() { return deleted; }
    protected void setDeleted() { deleted = true; }
} 
```

并在操作对象时调用/更改对象的状态。例如 ：

```
public void setSomeIntvalue(int value) {
    this.value = value;

    setModified();
} 
```

当您提交更改（迭代您的集合）时，您会`DELETE`从数据库中删除任何已删除的对象，然后将其从集合中删除。如果`isPersistent()`是假的，你创建一个新的，如果`isModified()`是真的，你`UPDATE`它，否则你什么都不做。

### 解决方案 2

你可以有一个包装器来管理你的对象集。就像是 ：

```
abstract class AbstractEntitySet<E> {
    private HashSet<E> createdSet = new HashSet<E>();
    private HashSet<E> modifiedSet = new HashSet<E>();
    private HashSet<E> deletedSet = new HashSet<E>();

    public void add(E e) {
        add(e, false);
    }

    public void add(E e, boolean modified) {
        if (modified) {
            createdSet.remove(e);
            modifiedSet.add(e);
            deletedSet.remove(e);
        } else {
            createdSet.add(e);
            modifiedSet.remove(e);
            deletedSet.remove(e);
        }
    }

    public void remove(E e) {
        createdSet.remove(e);
        modifiedSet.remove(e);
        deletedSet.add(e);
    }

    public void applyChanges() {
        for (E e : createdSet) {
            createEntity(e);
        }
        createdSet.clear();

        for (E e : modifiedSet) {
            updateEntity(e);
        }
        modifiedSet.clear();

        for (E e : deletedSet) {
            deleteEntity(e);
        }
        deletedSet.clear();
    }

    protected abstract void createEntity(E e);
    protected abstract void updateEntity(E e);
    protected abstract void deleteEntity(E e);
} 
```

您甚至可以将此集合直接绑定到您的对象：

```
abstract class BaseEntity<E> {
    private AbstractEntitySet<E> connectedSet;

    @SuppressWarnings("unchecked")
    public E bindTo(AbstractEntitySet<E> set) {
        connectedSet = set;
        return (E) this;
    }

    @SuppressWarnings("unchecked")
    public void setCreated() { connectedSet.add((E) this, false); }
    @SuppressWarnings("unchecked")
    public void setModified() { connectedSet.add((E) this, true); }
    @SuppressWarnings("unchecked")
    public void setDeleted() { connectedSet.remove((E) this); }
} 
```

您将在哪里声明您的对象（例如）：

```
class SomeObject extends BaseEntity<SomeObject> { 
    public void setSomeThing(...) {
        ...
        setModified();
    }
} 
```

并创建新实例，例如

```
AbstractEntitySet<SomeObject> entitySet = ...;
...
SomeObject obj = new SomeObject().bindTo(entitySet); 
```

然后更新您的对象，并应用所有更改，例如

```
obj.setSomeThing(...);
...
entitySet.applyChanges(); 
```

### 解决方案 3

您还可以在应用程序中使用现有的持久层，例如[Hibernate](http://netbeans.org/kb/docs/java/hibernate-java-se.html)或[JPA](http://www.vogella.com/articles/JavaPersistenceAPI/article.html)。

# python - 基本减法中的Python错误？

> ID：14120340
> 
> 赞同：21
> 
> 时间：2013-01-02T10:23:29.500
> 
> 标签：python, subtraction, arithmetic-expressions

> **可能重复：**
> [带有浮点数的 Python 舍入错误](https://stackoverflow.com/questions/5997027/python-rounding-error-with-float-numbers)
> [python 数学是错误的](https://stackoverflow.com/questions/11950819/python-maths-is-wrong)

我无法让 Python 正确执行减法 1 - 0.8 并分配它。它不断地给出不正确的答案，0.19999999999999996。

我探索了一下：

```
sq = {}
sub = {}
for i in range(1000):
    sq[str(i/1000.)+'**2']=((i/1000.)**2)
    sub['1-'+str(i/1000.)]=(1.0-(i/1000.)) 
```

并发现此错误发生在 0 到 1 到小数点后第三位的随机浮点组中。当您对这些浮点数进行平方时，也会发生类似的错误，但对不同的子集。

我希望对此进行解释以及如何使 Python 正确地进行算术运算。Using`round(x,3)`是我现在正在使用的解决方法，但它并不优雅。

谢谢！

这是我的 Python 2.7.3 shell 中的一个会话：

```
*** Python 2.7.3 (default, Apr 10 2012, 23:24:47) [MSC v.1500 64 bit (AMD64)] on win32\. ***
*** Remote Python engine  is active ***
>>> 1-0.8
0.19999999999999996
>>> print 1-0.8
0.2
>>> a = 1-0.8
>>> a
0.19999999999999996
>>> print a
0.2
>>> a = 0.2
>>> print a
0.2
>>> a
0.2
>>> 
```

这是我放入几个在线解释器的代码：

```
def doit():
    d = {'a':1-0.8}
    return d

print doit() 
```

和输出：

```
{'a': 0.19999999999999996} 
```

* * *

## 回答 #1

> 赞同：17
> 
> 时间：2013-01-02T11:11:00.790

使用[`Decimal`](http://docs.python.org/2/library/decimal.html)它专门为此设计的：

```
>>> from decimal import Decimal, getcontext
>>> Decimal(1) - Decimal(0.8)
Decimal('0.1999999999999999555910790150')
>>> getcontext().prec = 3
>>> Decimal(1) - Decimal(0.8)
Decimal('0.200')
>>> float(Decimal(1) - Decimal(0.8))
0.2 
```

* * *

## 回答 #2

> 赞同：12
> 
> 时间：2013-01-02T10:24:54.810

浮动数字不像您期望的那样工作。

对于初学者，请阅读[浮点指南](http://floating-point-gui.de/)。长话短说：计算机将浮点数表示为二进制，事实证明，将精确的小数部分存储为二进制是不可能的（在纸上[亲自尝试一下，看看为什么）。](http://en.wikipedia.org/wiki/Binary_numeral_system#Fractions_in_binary)出于实际目的，0.19999999999999996 与 0.2“足够接近”。如果您想将其打印为 0.2，那么您可以执行以下操作：

```
print "%0.1f" % floating_point_value 
```

所以你看到的不是错误。这是预期的行为。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-01-02T10:25:42.497

Python 存储带有“位”的浮点数，而有些浮点数无法准确表示，无论您有多少位精度。这就是你在这里遇到的问题。这有点像试图`1/3`用有限的小数位数完美准确地写成十进制。

# windows - 如何在 Windows 中读取视频帧缓冲区

> ID：14120344
> 
> 赞同：1
> 
> 时间：2013-01-02T10:23:44.403
> 
> 标签：windows, video, buffer, frame

我正在尝试创建一个小项目，其中我需要捕获/读取视频帧缓冲区并计算屏幕的平均 RGB 值。
我不需要在屏幕上写任何东西。我在 Windows 中这样做。

任何人都可以帮助我使用任何 Windows API 来读取视频帧缓冲区并计算平均 RGB 值吗？

我开始知道我需要编写一个内核驱动程序来读取帧缓冲区。

1.  这是唯一的解决方案吗？
2.  还有其他读取帧缓冲区的方法吗？
3.  是否有一种算法可以从帧缓冲区数据计算 RGB 值？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-07-18T23:47:59.670

如果您想要非常好的性能，您可能必须使用 directx 并将后缓冲区捕获到纹理。使用 mipmaps，它会自动创建下采样到 1X1。只要抓住那 1 个像素的颜色，就可以了。

不过，祝你好运。在我们说话的时候，我正在努力实现这一点。我正在为我的房间创建环境光控制。使用设备上下文和 StretchBLT，我得到了大约 15FPS。只有当我使用 GetPixel() 抓取 1 个像素时才能获得不错的性能。那是 i5 3570K @ 4.5GHz

但是使用 directx 方法，从技术上讲，您可以每秒获得数百甚至数千帧。（当我制作一个旋转三角形时，我的 660 获得大约 24,000 FPS。它不会太慢，减去 CPU 调用。）

# c++ - C++：检查所有数组元素是否相等的最快方法

> ID：14120346
> 
> 赞同：21
> 
> 时间：2013-01-02T10:23:47.693
> 
> 标签：c++, arrays

检查数组（首选整数数组）的所有元素是否相等的最快方法是什么。到目前为止，我一直在使用以下代码：

```
bool check(int array[], int n)
{   
    bool flag = 0;

    for(int i = 0; i < n - 1; i++)      
    {         
        if(array[i] != array[i + 1])
            flag = 1;
    }

    return flag;
} 
```

* * *

## 回答 #1

> 赞同：28
> 
> 时间：2013-01-02T10:34:50.190

```
int check(const int a[], int n)
{   
    while(--n>0 && a[n]==a[0]);
    return n!=0;
} 
```

* * *

## 回答 #2

> 赞同：16
> 
> 时间：2014-03-14T18:56:28.127

这是一个有效的 C++11 的可靠解决方案。优点是您不需要手动使用索引或迭代器。这是一个最佳实践

> 喜欢算法调用而不是手写循环 [Herb Sutter - C++ 编码标准]

我认为这与 Paul R 的解决方案同样有效。

```
bool check(const int a[], int n)
{
      return !std::all_of(a, a+n, [a](int x){ return x==a[0]; });
} 
```

* * *

## 回答 #3

> 赞同：13
> 
> 时间：2013-01-02T10:26:02.220

一旦你找到了一个不匹配的元素，你就可以跳出循环：

```
bool check(const int array[], int n)
{   
    for (int i = 0; i < n - 1; i++)      
    {         
        if (array[i] != array[i + 1])
            return true;
    }
    return false;
} 
```

如果这对性能至关重要，那么可以将其进一步优化为：

```
bool check(const int array[], int n)
{   
    const int a0 = array[0];

    for (int i = 1; i < n; i++)      
    {         
        if (array[i] != a0)
            return true;
    }
    return false;
} 
```

* * *

## 回答 #4

> 赞同：4
> 
> 时间：2013-01-02T11:24:03.893

将数组重新转换为更大的数据类型。例如，对 64 位整数进行操作，或使用 SSE 或 AVX 内在函数进行 128 位或 256 位操作。例如，SSE2 内在函数是 _mm_cmpeq_epi32，您将使用 _mm_or_si128 的结果。重复应用 _mm_srli_si128 和 _mm_cvtsi128_si32 检查结果。每隔几百次迭代检查一次结果，以便提前退出​​。

确保对对齐的内存进行操作，将未对齐的开始和结束检查为整数，并检查第一个打包元素本身。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-01-02T10:28:04.077

`return false;`我们将它基本上是一个 O(n) 操作，所以除了放弃标志并且仅在第一次失败和`return true;`迭代之后，你不能做得比你所拥有的更好。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2013-01-02T10:28:37.447

```
bool check(int array[],int n)
{       
  // here 1st element is checked with others. This decreases the number of iteration by 1.
  // also it returns immediately. 
  // The requirement is to check if all the elements are equal. 
  // So if 1st element is equal to others then all elements are equal. 
  // Otherwise the  elements are not equal.
  for(int i=1;i<n;i++)      
  {         
    if(array[0]!=array[i])
      return false;
  }        
  return true;
} 
```

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2013-01-02T10:36:25.973

在您的平台上找到一个支持线程或并行 for 循环的库，并将计算分开，以便不同的内核测试不同范围的数组。

这里列出了一些可用的库：

[http://parallel-for.sourceforge.net/parallelfor.html](http://parallel-for.sourceforge.net/parallelfor.html)

或者，您可以利用许多 GPU 提供的并行性。

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2013-01-02T13:30:39.853

理论上，我会提出这个建议：

```
bool check_single(const int a[], int n)
{
    for (int i = 1; i < n; ++i) {
        if (a[0] != a[n]) { return false; }
    }
    return true;
} 
```

与其他（已经提出的）版本相比：

*   `a[0]`将被编译器提升到循环外，这意味着循环内的单个数组访问
*   我们从 0 循环到 n，这比加载`a[0]`然后循环更好（访问方式）`a[n]`

显然，它仍然检查 N 个元素，因此是 O(N)。

* * *

## 回答 #9

> 赞同：0
> 
> 时间：2017-04-19T17:37:33.283

为了程序员的效率，您可以在一行中尝试以下所有操作。

```
vector<int> v{1, 1, 1, 1};
all_of(v.cbegin(), v.cend(), [&r=v[0]](int value){ return value == r; }->bool); 
```

我没有测试运行这段代码，如果有语法错误请告诉我。

* * *

## 回答 #10

> 赞同：0
> 
> 时间：2021-04-22T14:08:50.863

快速哈希映射技术：

```
bool areSame(int a[],int n)
{
    unordered_map<int,int> m; //hash map to store the frequency od every

    for(int i=0;i<n;i++)
       m[a[i]]++;

    if(m.size()==1)
       return true;
    else
       return false;
} 
```

* * *

## 回答 #11

> 赞同：0
> 
> 时间：2021-05-22T13:29:43.510

我认为以下内容比评分最高的答案更具可读性，我也会打赌更有效率（但尚未进行基准测试）

```
bool check(int a[], int n)
{   
    if (n)
    {
        auto first = a[0];

        for(int i = 1; i < n; i++)      
        {         
            if(array[i] != first) return false;
        }

        return true;
    }

    return true;    //change to false for the OPs logic.  I prefer logical true here
} 
```

* * *

## 回答 #12

> 赞同：-2
> 
> 时间：2015-12-19T00:22:57.203

```
bool check_identity (int a[], int b[], const int size)
{
    int i;
    i = 0;
    while ((i < size-1) && (a[i] == b[i]))   i++;

    return (a[i] == b[i]);

} 
```

# java - 使用 imagemagick 进行图像分割

> ID：14120347
> 
> 赞同：2
> 
> 时间：2013-01-02T10:23:53.280
> 
> 标签：java, imagemagick, segment

我是 Imagemagick 的新手，但我正在尝试对图像进行分割，即，当我将两个人的图像提供给分割代码时，输​​出图像应该在人的边缘上出现虚线，即分割识别。我已经尝试过使用 -segment 命令，但无法执行该命令。

任何人都可以通过提供解决图像分割的方法来帮助我。

在此先感谢，约翰

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-02T12:24:22.603

图像分割是一项非常复杂的任务。通过颜色或任何其他原始指标进行简单分割只有在非常受控的情况下才有可能。

Anders 已经建议研究一下 OpenCV——如果你真的对这个话题感兴趣，[维基百科](http://en.wikipedia.org/wiki/Image_segmentation)可能会帮助你开始。[-> 通过OpenCV](http://bsd-noobz.com/opencv-guide/60-2-color-based-object-segmentation)进行基于颜色的分割快速指南（此代码是 C，但 java 库应该几乎相同） -> 简单的边缘检测可以由著名的*Canny Edge Detector完成*

对于测试，matlab 将是获得快速结果的好工具。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-02T10:53:37.847

如果我没记错的话，ImageMagick`segment`命令将根据某些度量和某些模糊度和分段大小参数对图像进行分段。你最终会得到相同颜色的段。听起来您真的想对图像/人物进行*边缘检测？*

一般来说，分割是计算机视觉中更难的问题之一，也许 ImageMagick 不是解决这个问题的最佳工具——我建议您看看[OpenCV](http://opencv.willowgarage.com/wiki/)。

干杯，

# php - 多个销售网站的爬虫

> ID：14120350
> 
> 赞同：1
> 
> 时间：2013-01-02T10:23:59.613
> 
> 标签：php, python, web-crawler

这是我的总体思路：*在多个销售网站（例如 ebay）中搜索，以找到上个月 ipad 2 的平均价格。*

我只想要一些方向来做这样的事情。语言可以是PHP或Python，可以使用开源项目。

问题是这样的系统至少需要一些自定义参数，例如日期间隔和对象名称。

那么我需要为每个网站定制一个爬虫吗？

如何将价值与产品联系起来？

这些销售网站可能会遇到什么样的问题？

好吧，我真的需要一些关于做类似事情的正确方法的建议。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-02T10:40:42.760

> 所以可能我需要为每个网站定制一个爬虫？

不，您需要为每个网站定制它的某些方面，但底层引擎将保持不变。而且您只需要一些信息，因此您必须对其进行自定义才能获得这些信息。

> 如何将价值与产品联系起来？

你只是抓取了这些数据，由你来管理它的这方面。但是，如果您正在抓取产品 X，那么您会保留该产品的价格列表，并（例如）对该列表的内容进行平均以获得平均价格。如何将该列表与产品关联取决于您的底层数据库实现。

> 我可以对这些销售网站有一些问题吗？

是的，当然，如果站点发生变化，那么您的抓取工具可能会停止工作。这就是为什么最好始终使用 API 的原因，因为这样您就不必依赖页面结构不变来获取您的内容。

> 好吧，我真的需要一些关于做类似事情的正确方法的建议。

使用 API 优先于通过 HTML 进行挑选。使用现有工具，而不是重新发明轮子。 [http://wwwsearch.sourceforge.net/mechanize/](http://wwwsearch.sourceforge.net/mechanize/)

[http://scrapy.org/](http://scrapy.org/)

[http://seleniumhq.org/](http://seleniumhq.org/)

[用于 Python 的 Amazon API 库？](https://stackoverflow.com/questions/48884/amazon-api-library-for-python)

# matlab - 如何在matlab中求解符号方程

> ID：14120354
> 
> 赞同：2
> 
> 时间：2013-01-02T10:24:03.187
> 
> 标签：matlab, equation-solving

根据 X 参数，我在 Matlab 中有一个方程。我想为 F(x) 的随机数量找到 X 的数量。我尝试了下面的代码。但它给了我两个不同的结果，而我的方程应该只有一个结果。

即使我尝试了`roots(f)`，`solve(f)`但它给了我一个错误：

> ？？？'sym' 类型的输入参数的未定义函数或方法 'isfinite'。

任何人都可以帮助我吗？我该怎么办 ？即使我对解决这个问题有错误的想法，请告诉我。谢谢

> 函数 betaDistribution_2(a,b)
> 
> ```
>  syms  x ;
>     y=inline((x^(a-1))*((1-x)^(b-1)));
>     beta=quad(y,0,1);
>     g=(1/beta)*(x^(a-1))*((1-x)^(b-1));
>     % I have this equation and I want to find the amount of x for the random 
>     %amounts of p 
>     p=int(g,x,0,x); 
> 
>     for i=0:50
>        fxi=rand(1);
>        f=p-fxi;
>        xi=solve(f);
>        result=eval(xi);
>        disp(result)
>     end
> 
>     end 
> ```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-02T11:18:29.780

尝试过滤您的解决方案。

```
a=1;
b=2;
% a threshold for imagery part
SMALL=1e-9;

syms x real;
y=inline((x^(a-1))*((1-x)^(b-1)));
beta=quad(y,0,1);
g=(1/beta)*(x^(a-1))*((1-x)^(b-1));
p=int(g,x,0,x);

% return true for physically meaningfull results
filter = @(xc) abs(imag(xc))<SMALL && real(xc)>0 && subs(g, x, xc) > 0 && subs(p, x, xc)>0;

for m=0:50
  fxi=rand(1);
  f=p-fxi;
  xi=solve(f, x);
  result=eval(xi);

  idx = arrayfun (filter, result);
  result = result(idx);
  % make sure it is OK
  assert(length(result)==1);
  disp(result)
end 
```

# r - 我可以在 R 中使用多个工作目录吗？

> ID：14120360
> 
> 赞同：1
> 
> 时间：2013-01-02T10:24:35.480
> 
> 标签：r, file, directory

我可以在 R 中使用并行工作目录，还是可以循环更改工作目录以访问不同文件夹中的文件？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-01-02T10:33:22.010

我发现拥有一个工作目录更容易。您会发现使用的是什么

```
getwd() 
```

功能。通常，我的工作目录类似于：

```
~/colin/project1/R 
```

您可以使用更改工作目录

```
setwd() 
```

您可以使用完整路径轻松访问其他文件。特别是，我发现

```
##List files in current directory
list.files()
##Give full path 
list.files(full.names=TRUE)
##list files in the species1 directory
list.files("species1/", full.names=TRUE) 
```

非常便利。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-01-02T12:13:48.660

不要循环更改工作目录，遍历目录并使用它`file.path`来获取您想要的文件。就像是：

```
for(path in c("data1","data2","data3")){
  for(file in c("file1.txt","file2.txt")){
     fullPath = file.path(path,file)
     doSomethingWith(fullPath)
     }
  } 
```

这将循环`data1/file1.txt`，`data1/file2.txt`依此类推。请注意，它还将处理不同操作系统中路径分隔符之间的差异 - 不要尝试将文件路径组件粘贴在一起，`paste`因为您会弄错。

# c - Linux 和 Win32 cmd 提示符和 C 的主机名大小写差异

> ID：14120367
> 
> 赞同：0
> 
> 时间：2013-01-02T10:24:50.850
> 
> 标签：c, command-line, hostname

我在创建应用程序时使用主机名，然后在其友好名称中使用主机名。我在创建应用程序时将此主机名作为 agrument 提供。

然后这个应用程序被其他应用程序/进程进一步使用。整个代码都在 Linux 和 Win32 上使用。现在，问题是`%COMPUTERNAME%`在 Win32 中返回全部大写，无论实际主机名是否全部大写。但在 Linux 上`${MYHOSTNAME}`返回，与各自的情况一样。

所以问题是我的代码对于 Win32 作为`%COMPUTERNAME%`返回失败，`SUNNY890` 但实际代码（用 c 编写）（`gethostname(strHost,sizeof(strHost)`）返回`sunny890`。

有没有办法解决这个问题？谢谢和问候，阳光

# javascript - 操作递归数组

> ID：14120370
> 
> 赞同：3
> 
> 时间：2013-01-02T10:24:55.823
> 
> 标签：javascript, jquery, angularjs

我有一个分层数据结构，例如：

```
var tree = [ {foo: 1, children:[
    {foo: 2, children:[
        {foo: 13, children:[]},
        {foo: 14, children:[]}
    ]}, 
    {foo: 3, children:[]}, 
    {foo: 4, children:[]}
]}, 

{foo: 5, children:[
    {foo: 6, children:[]}, 
    {foo: 8, children:[]}
]}, 

{foo: 9, children:[
    {foo: 10, children:[]}, 
    {foo: 11, children:[]}, 
    {foo: 12, children:[]}
]} ]; 
```

树可以是任何深度。

为了重新定位树中的特定对象（包括它的子对象），我可以简单地编写：

```
// Move object from [0, 0, 1] to [2, 1]
var obj = tree[0]['children'][0]['children'][1];
tree[0]['children'][0]['children'].splice(1, 1);
tree[2]['children'].splice(1, 0, obj); 
```

但我无法对一般情况进行编程：

*给定两组坐标，将对象从 [i1, i2, ..., im] 重新定位到 [j1, j2, ..., jn]。*

我想要一些关于如何构造这个递归算法的提示。虽然这是一个纯 Javascript 问题，但我应该注意我的应用程序使用 AngularJS 和 jQuery。也许这些库提供了我可以使用的数组操作函数？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-02T10:50:40.347

主要问题是您必须访问任意深度的属性。你可以使用的是一个在某种意义上是递归的循环：

```
// a is the input set

var arr = tree;  // start at the root
for(var i = 0; i < a.length - 1; i++) {  // stop one too early
  arr = arr[ a[i] ].children;
}
// now, arr is the array you want to splice, so
// you can splice the object and store it in a temporary
// place 
```

使用相同的逻辑，您可以遍历输出数组并在那里添加值。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-01-02T10:51:13.607

进行这种树遍历的一种方法是使用一个变量来存储对您导航到的树部分的引用，一次导航一个层。我们可以写一个遍历函数如下：

```
var traverseTree = function(tree, coord) {

  var current = tree;

  // Loop through the coordinates moving one at a time, no error handling
  // what happens if the node doesn't exist?
  for(var i = 0; i < coord.length; ++i) {
    current = current[coord[i]].children;
  }      

  // Return the node
  return current;
} 
```

然后我们可以编写描述为两个函数的功能，一个提取节点的方法和一个插入节点的方法：

```
var extractNodeFromTree = function(tree, coord) {

  // We don't want to traverse the whole way
  var last = coord.pop();

  // Traverse to the parent
  var parent = traverseTree(tree, coord);

  // Extract the element using the last coordinate
  return parent.splice(last, 1)[0];
}

var insertNodeIntoTree = function(tree, coord, node) {

  // Same as last method
  var last = coord.pop();
  var parent = traverseTree(tree, coord);

  // Insert node to the specified position
  current.splice(last, 0, node);

} 
```

您可以使用以下功能：

```
var node = extractNodeFromTree(tree, [0, 0, 1]);
insertNodeIntoTree(tree, [2, 1], node); 
```

[一个在行动中展示它的小提琴](http://jsfiddle.net/EqZdn/)

# cakephp - CakePHP 2.1 自定义分页

> ID：14120371
> 
> 赞同：0
> 
> 时间：2013-01-02T10:25:04.717
> 
> 标签：cakephp, pagination, cakephp-2.1, sql-limit

我正在使用 cakephp 2.1 并定义了 3 个表，如下所示。

```
 `industries(id, name);`
   `movies(id, name, industry_id),` 
   `trailers(id, name, movie_id);` 
```

我想为特定行业的预告片分页。所以我写的代码如下：

```
 $this->paginate = array(
                    'Industry' => array(
                        'contain' => array(
                            'Movie' => array(
                               'order' => 'Movie.release DESC', 
                               'Trailer' => array(
                                  'conditions' => array(
                                       'Trailer.id !=' => $trailer_id
                                   )
                                )
                             )
                         ), 
                         'conditions' => array(
                             'Industry.id' => $id
                         )
                      )
                  ); 
```

如果我指定`'limit'`for `'Trailer'`，我会得到正确数量的结果，但是`null`对于不包含任何预告片的电影，我会得到一些数组。请帮我获取特定行业的指定拖车限制数量。这项工作将不胜感激。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-05-07T11:11:27.973

在我看来，你的`contain`钥匙放错地方了。它应该在模型之前定义。

```
<?php
$this->paginate = array(
  'contain' => array(
    'Industry' => array(
      'Movie' => array(
        'order' => 'Movie.release DESC', 
        'Trailer' => array(
          'conditions' => array(
            'Trailer.id !=' => $trailer_id
          )
        )
      )
    )
  ),
    'conditions' => array(
      'Industry.id' => $id
  )
); 
```

# android - 在 Android 中显示图像和视频的打开意图

> ID：14120372
> 
> 赞同：0
> 
> 时间：2013-01-02T10:25:06.387
> 
> 标签：android, image, android-intent

当我单击图像或视频的缩略图时，我想打开一个意图。以下是成功适用于 mw 的代码：

```
void startIntentForShowingOutgoingFile(String fileName,String filePath){

    File file = null;
    Intent i = new Intent();
    if (fileName.contains(".jpg") || fileName.contains(".jpeg")
            || fileName.contains(".png") || fileName.contains(".gif")
            || fileName.contains(".bmp")) {
        file = new File(filePath);
        i.setDataAndType(Uri.fromFile(file), "image/*");
    } else if (fileName.contains(".amr") || fileName.contains(".mp3")
            || fileName.contains(".wav") || fileName.contains(".mid")) {
        file = new File(filePath);
        i.setDataAndType(Uri.fromFile(file), "audio/*");
    } else if (fileName.contains(".mpeg") || fileName.contains(".3gp")) {
        file = new File(filePath);
        i.setDataAndType(Uri.fromFile(file), "video/*");
    } else if (fileName.contains(".txt") || fileName.contains(".csv")
            || fileName.contains(".xml")) {
        file = new File(filePath);
        i.setDataAndType(Uri.fromFile(file), "text/*");
    }

    i.setAction(android.content.Intent.ACTION_VIEW);
    if (file != null) {

        startActivity(i);
    } 
```

此代码全屏打开图像或视频。但我想像在一个小窗口中一样打开图像和视频。我怎样才能做到这一点。请帮我。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-02T10:45:06.663

您可能需要创建动态[ImageView](http://developer.android.com/reference/android/widget/ImageView.html)和[VideoView](http://developer.android.com/reference/android/widget/VideoView.html)。

# ios - 如何根据设备方向 iOS 6 自动旋转 UIView？

> ID：14120375
> 
> 赞同：0
> 
> 时间：2013-01-02T10:25:13.527
> 
> 标签：ios, xcode, cocoa-touch, ios6, orientation

我已经用 iOS 5.0 开始了我的项目，现在更新到 iOS 6，我在做定位时遇到了问题，为了测试我已经创建了一个示例应用程序，并在委托中添加了以下代码......

```
- (NSUInteger)application:(UIApplication *)application supportedInterfaceOrientationsForWindow:(UIWindow *)window
{
    return UIInterfaceOrientationMaskAll;
} 
```

在我的视图控制器中，我实现了以下方法......

```
-(NSUInteger)supportedInterfaceOrientations
{
    return UIInterfaceOrientationMaskLandscape;
}

-(BOOL)shouldAutorotate
{
    return YES;
} 
```

以上所有我在谷歌搜索iOS 6.0之后所做的一切，当我加载应用程序时，基于supportedInterfaceOrientations视图中给出的选项加载很好，现在当我改变我的设备方向时......视图在运行时没有相应地改变，如何根据设备方向更改视图？

```
NSNotificationCenter *notificationCenter = [NSNotificationCenter defaultCenter];
[[UIDevice currentDevice] beginGeneratingDeviceOrientationNotifications];
[notificationCenter addObserver:self
                       selector:@selector(deviceOrientationDidChange) 
                           name:UIDeviceOrientationDidChangeNotification object:nil]; 
```

我是否需要像上面一样添加观察者并以编程方式对其进行更改？还是会通过检测设备方向自动更改视图？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-02T10:45:57.083

尝试这个

```
- (NSUInteger)supportedInterfaceOrientations {
    return UIInterfaceOrientationMaskAll;
}

- (BOOL) shouldAutorotate {
    return YES;
}

- (UIInterfaceOrientation)preferredInterfaceOrientationForPresentation {
    return UIInterfaceOrientationLandscape;
} 
```

之前的代码应该可以在 iOS6 上运行

无论如何，我在我的一个项目中使用了这段代码。我有一个布尔值`_firstTime`，我`YES`在显示之前将其设置为`viewController`，然后在出现`NO`之后将其更改为`viewController`

```
- (NSUInteger)supportedInterfaceOrientations {
    if (_firstTime) {
        return UIInterfaceOrientationMaskLandscape;
    } else {
        return UIInterfaceOrientationMaskAll;
    }

}

- (BOOL) shouldAutorotate {

        return YES;

}

- (BOOL)shouldAutorotateToInterfaceOrientation:(UIInterfaceOrientation)interfaceOrientation
{
    if (_firstTime) {
        return return (interfaceOrientation == UIInterfaceOrientationLandscapeLeft)||(interfaceOrientation == UIInterfaceOrientationLandscapeRight);
    } else {
        return YES;
    }
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-02T10:33:57.890

改变这些方法：

```
-(NSUInteger)supportedInterfaceOrientations
{
  return UIInterfaceOrientationMaskAll;
} 
```

**注意**：无需添加`observer`。`device notification`鉴于以下方法将指定方向状态

```
- (void)willRotateToInterfaceOrientation:(UIInterfaceOrientation)toInterfaceOrientation duration:(NSTimeInterval)duration; 
```

**编辑**：根据您的意愿提供您的所有`views`意愿`automasking``requirement`

**编辑**：如果使用，`UINavigation Controller`那么它的`child View Controller's` `supportedInterfaceOrientations`and`shouldAutorotate`方法将不会`called`。

参考[这个](https://stackoverflow.com/a/12539784/1106035)链接。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-02T12:52:17.853

问题出在我的 iPad 上。它有一个按钮来限制自动旋转更改...我最初并不知道，因为我完全使用 iPod.. 谢谢大家的帮助。

# android - 旧 Android SDK 版本中的“由于缺少 _cordovaNative 而退回到 PROMPT 模式”错误

> ID：14120376
> 
> 赞同：10
> 
> 时间：2013-01-02T10:25:20.140
> 
> 标签：android, cordova, android-2.2-froyo

我正在`Android`使用`Cordova-2.2.0, Android sdk`我正在使用的 is开发应用程序`4.1`，并且我的应用程序运行良好。

当我尝试测试此应用程序时`Android 2.2`，`2.3.3`我收到一些如下所示的日志，并且我的应用程序页面未打开。

日志是：

```
01-02 15:42:08.166: D/CordovaLog(486): Falling back on PROMPT mode since _cordovaNative is missing.
01-02 15:42:08.166: D/CordovaLog(486): file:///android_asset/www/js/ext/cordova-2.2.0.js: Line 1032 : Falling back on PROMPT mode since _cordovaNative is missing.
01-02 15:42:08.166: I/Web Console(486): Falling back on PROMPT mode since _cordovaNative is missing. at file:///android_asset/www/js/ext/cordova-2.2.0.js:1032 
```

我不知道它为什么会出现以及如何解决它。

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2013-01-02T12:57:27.873

没有什么可以修复的。当 PhoneGap 框架检测到您正在运行的 Android 版本不支持在 Java 和 JavaScript 代码之间传递信息的常规方式时，它会恢复到更安全的 PROMPT 模式。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-09T20:43:55.047

似乎与你的原生代码的连接有问题，或者在 Eclipse 项目中证明 Android 项目清理并重新编译以查看会发生什么，或者确保将 libs 文件夹放入你的项目中与之对应。罐子PhoneGap

@dagavi90

* * *

## 回答 #3

> 赞同：-5
> 
> 时间：2013-01-11T10:56:08.833

将此添加到您的清单中：

```
 <supports-screens
    android:largeScreens="true"
    android:normalScreens="true"
    android:smallScreens="true"
    android:xlargeScreens="true"
    android:resizeable="true"
    android:anyDensity="true"
    />

<uses-permission android:name="android.permission.CAMERA" />
<uses-permission android:name="android.permission.VIBRATE" />
<uses-permission android:name="android.permission.ACCESS_COARSE_LOCATION" />
<uses-permission android:name="android.permission.ACCESS_FINE_LOCATION" />
<uses-permission android:name="android.permission.ACCESS_LOCATION_EXTRA_COMMANDS" />
<uses-permission android:name="android.permission.INTERNET" />
<uses-permission android:name="android.permission.RECEIVE_SMS" />
<uses-permission android:name="android.permission.RECORD_AUDIO" />
<uses-permission android:name="android.permission.RECORD_VIDEO"/>
<uses-permission android:name="android.permission.MODIFY_AUDIO_SETTINGS" />
<uses-permission android:name="android.permission.READ_CONTACTS" />
<uses-permission android:name="android.permission.WRITE_CONTACTS" />   
<uses-permission android:name="android.permission.WRITE_EXTERNAL_STORAGE" />   
<uses-permission android:name="android.permission.ACCESS_NETWORK_STATE" />
<uses-permission android:name="android.permission.GET_ACCOUNTS" />
<uses-permission android:name="android.permission.BROADCAST_STICKY" /> 
```

# delphi - 如何在 Delphi 的 Report Builder 中的 PDF 中嵌入 javascript（打开对话框）

> ID：14120378
> 
> 赞同：0
> 
> 时间：2013-01-02T10:25:23.027
> 
> 标签：delphi, pdf, pdf-generation, delphi-xe2

当有人通过我们的门户网站打开此 PDF 时，我需要显示一个 Adob​​e PDF Reader 打印对话框。

现在我通过我现有的用 Delphi XE2 制作的 webportal 流式传输 PDF。我在 Waler 的 TExtraDevices 中生成 PDF，这是一个为 Delphi 扩展 Report Builder 14.07 的组件。

我在某处读到，我可以在 PDF 中嵌入 JavaScript 以触发打印对话框显示。

**如何/在哪里将 JS 注入/放置在 Waler TExtraDevices PDF 生成器中？**使用 Report Builder 本身的原生 PDF 生成是一个选项（但我必须检查它们是否支持嵌入字体子集，因为他们的 PDF 引擎的第一个版本产生了太大的 PDF）。**所以另一个问题可能是：我如何/在哪里将 JS 注入/放置在 Report Builder 的本机 PDF 生成器中？**

我检查了手册、网络和 StackOverflow，但找不到任何有关如何完成此操作的信息。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-02T11:50:33.813

如果您不介意涉及单独后处理的解决方案，您可以使用[Debenu QuickPDF](http://www.quickpdflibrary.com/)之类的库来更新 PDF 以添加 Javascript 操作，该操作会在文档打开时打开打印对话框。他们有一个试用版，可以让您验证它是否适用于您的特定 PDF。

# asp.net-mvc - 无法发布 MVC 4 Azure 网站，总是得到 404

> ID：14120379
> 
> 赞同：0
> 
> 时间：2013-01-02T10:25:27.747
> 
> 标签：asp.net-mvc, azure, asp.net-mvc-4, http-status-code-404

当我将网站发布到登台并尝试访问 [https://26e33c03a5fc48e9a26089b858345c9d.cloudapp.net/](https://26e33c03a5fc48e9a26089b858345c9d.cloudapp.net/)时 ，我会立即重定向到[https://26e33c03a5fc48e9a26089b858345c9d.cloudapp.net/Error/Http404/?aspxerrorpath=/Account/Login](https://26e33c03a5fc48e9a26089b858345c9d.cloudapp.net/Error/Http404/?aspxerrorpath=/Account/Login) 这个问题是新的，并且在 Azure 停机时间之后首次发生，知道为什么会发生这种情况吗？该代码在我的机器上完美运行。

我最近添加了 RazorEngine 3.0.8 Beta 解决方案是从 mvc3 升级到 mvc4 但我发布了几次它确实有效。

再次，这在我的机器上工作，但不在服务器上，知道为什么吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-12T17:35:47.690

V3.0.8 使用随 MVC3 发布的旧版 System.Web.Razor。尝试更新到现在围绕 MVC4 附带的 Razor 2 构建的 v3.1.0

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-02T14:59:09.303

删除 RazorEngine 3.0.8 Beta 后问题解决了，我建议小心，因为 Beta 会导致实际问题。

# angularjs - 在 angularjs 中，这两个控制器有什么不同

> ID：14120385
> 
> 赞同：1
> 
> 时间：2013-01-02T10:25:58.277
> 
> 标签：angularjs

我见过两种类型的控制器定义：

```
angular.module('myApp.controllers',[])
  .controller('MainCtrl', ['$scope'], function($scope){
   //controller code
} 
```

还有一个简单的：

```
function MainCtrl($scope) {
  //controller code
} 
```

有什么不同？哪一个是首选？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-02T10:42:14.670

不同的是，第一个是模块内部的控制器。第二种方法是全局上的控制器（在 Window 对象上！）。

就像您已经听说过的那样，污染全局对象是个坏主意。因此，第二种方法不是首选（但用于快速原型制作以轻松展示功能并且更易于键入。因此几乎所有示例都使用这种方法。）

第一种方式，即

```
angular.module('myApp.controllers',[])
  .controller('MainCtrl', ['$scope'], function($scope){
   //controller code
} 
```

是首选方式，应该在所有生产应用程序中使用。

# php - 使用母版页php的Href格式

> ID：14120386
> 
> 赞同：0
> 
> 时间：2013-01-02T10:25:59.797
> 
> 标签：php, pagination

我在 stackoverflow 上看到了类似的帖子，但未能回答我的问题。

我正在使用分页来显示结果，当我添加主链接时，链接即将断开。很可能是因为我错误地使用了正确的格式。

尝试了几种格式以尝试根据其他帖子使其正常工作

```
<a href='../admin/admin.master.php?page=list_products.php&page=' .$j. ' id='page_a_link'>Next</a></span> 
```

或者

```
../admin/admin.master.php?page=list_products.php&page=$j 
```

但两者都不起作用。

**PHP 分页显示页码**

```
<?php
    if(isset($page))
    {
        $result = mysql_query("SELECT COUNT(*) As Total FROM products");
        $rows = mysql_num_rows($result);
        if($rows)
        {
            $rs = mysql_fetch_array($result);
            $total = $rs["Total"];
        }
        $totalPages = ceil($total / $perpage);
        if($page <=1 )
        {
            echo "<span id='page_links' style='font-weight:bold;'>Pre</span>";
        }
        else
        {
            $j = $page - 1;
            echo "<span><a id='page_a_link' href='../admin/admin.master.php?page=list_products.php&page=$j'>< Pre</a></span>";
        }
        for($i=1; $i <= $totalPages; $i++)
        {
            if($i<>$page)
            {
                echo "<span><a href='../admin/admin.master.php?page=list_products.php&page=' .$i. ' id='page_a_link'>$i</a></span>";
            }
            else
            {
                echo "<span id='page_links' style='font-weight:bold;'>$i</span>";
            }
        }
        if($page == $totalPages )
        {
            echo "<span id='page_links' style='font-weight:bold;'>Next ></span>";
        }
        else
        {
            $j = $page + 1;
            echo "<span><a href='../admin/admin.master.php?page=list_products.php?page=' .$j. ' id='page_a_link'>Next</a></span>";
        }
    }
?> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-02T10:31:19.443

您将双引号与单引号混合在一起，这就是它中断的原因。试试这个：

```
<?php
    if(isset($page))
    {
        $result = mysql_query("SELECT COUNT(*) As Total FROM products");
        $rows = mysql_num_rows($result);
        if($rows)
        {
            $rs = mysql_fetch_array($result);
            $total = $rs["Total"];
        }
        $totalPages = ceil($total / $perpage);
        if($page <=1 )
        {
            echo '<span id="page_links" style="font-weight:bold;">Pre</span>';
        }
        else
        {
            $j = $page - 1;
            echo '<span><a id="page_a_link" href="../admin/admin.master.php?page=list_products.php&page=' . $j . '">< Pre</a></span>';
        }
        for($i=1; $i <= $totalPages; $i++)
        {
            if($i<>$page)
            {
                echo '<span><a href="../admin/admin.master.php?page=list_products.php&page=' .$i. '" id="page_a_link">' . $i . '</a></span>';
            }
            else
            {
                echo '<span id="page_links" style="font-weight:bold;">' . $i . '</span>';
            }
        }
        if($page == $totalPages )
        {
            echo '<span id="page_links" style="font-weight:bold;">Next ></span>';
        }
        else
        {
            $j = $page + 1;
            echo '<span><a href="../admin/admin.master.php?page=list_products.php?page=' .$j. '" id="page_a_link">Next</a></span>';
        }
    }
?> 
```

此外，您生成的 HTML 代码无效，因为您将相同的 ID 分配给多个元素。考虑将 id="page_links" 和 id="page_a_link" 分别更改为 class="page_link" 和 class="page_a_link"，然后将 CSS 中的 #page_links 和 #page_a_link 更改为 .page_links 和 .page_a_link

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-02T10:31:26.227

您`page`在 URL中分配两个值`'../admin/admin.master.php?**page**=list_products.php&**page**=' .$j. '`尝试替换`page = $j`为`page_num = $j`或您选择的内容，然后在代码中的 and 中替换它。

# azure - Azure 发布并发症

> ID：14120389
> 
> 赞同：4
> 
> 时间：2013-01-02T10:26:03.047
> 
> 标签：azure, release-management

我们正在考虑构建一个 Web 应用程序并依赖于 Azure。该应用程序背后的主要思想是用户能够在云中共同完成特定任务。我很想采用即时发布的概念，让用户不必担心停机时间，但我不知道如何实现这一点（如果可能的话）。假设目前有 10.000 名用户正在使用此 Web 应用程序，并且我发布了带有数据库更新的软件。

*   当我将软件的新版本发布到 Azure 时会发生什么？
*   我可怜的用户正在进行的精彩工作会发生什么？
*   我应该在发布新版本之前先关闭网站吗？
*   我可以“刚发布”，让用户一请求新页面就享受“新”世界吗？

我很惊讶在 Azure 中找不到任何有关发布策略的信息，我是不是找错地方了？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-02T12:49:40.477

Windows Azure 是一个很棒的平台，具有许多不同的功能，可以简化许多软件管理任务。但是，请记住，无论您使用多么出色的平台，您的应用程序都取决于适当的系统架构和代码质量——编写良好的应用程序将完美运行；写得不好的应用程序将失败。所以不要指望 Azure 会解决你所有的问题（但它可能会帮助你解决很多问题）。

```
What happens when I publish a new release of my software into Azure? 
```

Windows Azure 云服务具有生产和暂存部署的概念。新代码部署首先进入暂存阶段。然后您可以在那里进行快速 QA（有时“预热”应用程序以确保它已填充所有缓存 - 但这取决于应用程序设计）并执行“交换” - 您的暂存部署变为生产，生产部署变为暂存。这使您能够在新代码出现任何问题时执行“回滚”。交换操作相对较快，因为它主要是内部 DNS 切换。

```
What will happen to the brilliant work in progress of my poor users? 
```

在最低站点负载（夜间）执行代码部署总是一个好主意。有时这是不可能的，例如，如果您的应用程序被全球组织使用。那么你应该使用“最低”的活动时间。

为了保护用户，您可以实施解决方案，例如每 X 分钟发生一次的“*自动草稿保存”。*但是，如果您的应用程序旨在与云系统一起使用，那么用户在新代码发布期间不应看到任何功能故障。

```
Should I bring the site down first before I publish a new release? 
```

这取决于您的应用程序的体系结构。如果应用程序设计得非常好，那么您不需要这样做。我使用的 Windows Azure 应用程序每月发布一次新代码，并且从一开始（过去两年）我们就不必关闭该站点。

我希望这能让您更好地了解 Azure 云服务。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-02T11:51:34.057

是的你可以。

我建议您创建一个可视化 stdio 模板应用程序，并查看在门户管理器中单击您的 azure 站点时直接位于的“登台”和“生产”环境。

例如，用户在连接到 Sqlserver1 的“生产”环境中工作。您将新版本发布到也连接到 Sqlserver1 的“staging”。然后，您只需使用 swap 切换两者，staging 就变成了“生产”环境。

如果他们将某些内容存储在会话或服务器缓存中，我不确定他们的工作会发生什么。估计他们会迷路。但是客户端的东西会无缝地工作。

“我应该在发布新版本之前先关闭网站吗？” 我会提出一个警告（如果用户使用会话内容等），说在 5 分钟内有短暂的停机时间，然后在切换后告诉所有人它已经结束。

# validation - jQueryUI DatePicker 验证

> ID：14120390
> 
> 赞同：0
> 
> 时间：2013-01-02T10:26:03.800
> 
> 标签：validation, datepicker, jquery-ui-dialog, jquery-ui-datepicker

我正在尝试验证日期字段，因此当您选择未来的日期并在第二个输入框中选择今天的日期时，它不应该让您提交表单。

我让它工作了，所以你不能选择昨天的日期 - 它的日期比较我似乎无法工作。

```
/js/jquery-ui-1.8.6.custom.min.js"/>
/js/jquery.validate.js" />
/js/jquery.ui.datepicker.validation.js" />

<asp:TextBox ID="txtStartDate" runat="server" CssClass="DatepickerInput validBeforeDatepicker" />
<asp:TextBox ID="txtEndDate" runat="server" CssClass="DatepickerInput validAfterDatepicker" />

<script type="text/javascript">
$(function () {
    $("#tabs").tabs();
});

 $('.validBeforeDatepicker,.validAfterDatepicker').datepicker();

$(function () {
    $(".DatepickerInput").datepicker({
        showOn: "button",
        buttonImage: "/assets/img/calendar.gif",
        buttonImageOnly: true,
        minDate: 0,
        required: true,
        message: "This is a required field",
        dateFormat: 'dd-mm-yy'
    });
});

$(function () {
    $("#validAfterDatepicker").datepicker({
        showOn: "button",
        buttonImage: "/assets/img/calendar.gif",
        buttonImageOnly: true,
        minDate: +1,
        required: true,
        message: "This is a required field",
        dateFormat: 'dd-mm-yy'            
    });
}); 
```

我正在关注这个例子，但我在某个地方出错了，似乎无法完全确定它可能是什么。

网站：[http ://bit.ly/WdZf10](http://bit.ly/WdZf10)

请不要提交表单，因为如果在网站上测试表单，它将只是垃圾邮件。您甚至可以在提交表单之前看到它没有验证

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-07T08:51:49.023

找到了解决该问题的方法，并且可能也使用了更少的代码。以为我会分享，所以如果有人卡住了，他们可以使用它。

```
<script type="text/javascript">

$(function () {

    function getDiff() {
        var from = $(".start").val();
        var till = $(".fin").val();
        var c = from.split("/");
        beg = new Date(c[2], c[1] - 1, c[0]);
        var d = till.split("/");
        en = new Date(d[2], d[1] - 1, d[0]);
        var rest = (en - beg) / 86400000;
        var txt = rest == 0 ? "" : rest + " days"
        $("#res").text(txt);
    }

    $(".start").datepicker({
        changeMonth: false,
        changeYear: false,
        showAnim: "fadeIn",
        gotoCurrent: true,
        minDate: 0, //change this to +3 to start 3 days from now
        dateFormat: "dd/mm/yy",
        onSelect: function (dateText, inst) {
            $(".fin").val(dateText);
            $(".fin").datepicker("option", "minDate", dateText);
            getDiff();
        }
    });

    $(".fin").datepicker({
        dateFormat: "dd/mm/yy",
        changeMonth: true,
        changeYear: true,
        showAnim: "fadeIn",
        onSelect: getDiff
    });
}); 
```

# jquery - 使用 jquery 显示表单错误

> ID：14120392
> 
> 赞同：2
> 
> 时间：2013-01-02T10:26:23.170
> 
> 标签：jquery, html

当用户输入错误时，希望在表单右侧显示所有错误。例如，如果用户输入了错误的电子邮件格式。我已经创建了 div，但我无法正确显示错误并在用户更正输入后立即将其删除。到目前为止，我只是使用错误 ID 突出显示文本框。

jQuery：

```
 var form = $("#contact_form");
var name = $("#name");
var nameInfo = $("#nameInfo");
var email = $("#email");
var emailInfo = $("#emailInfo");
var message = $("#message");
var messageInfo = $("#messageInfo");
var note = $("#note");

name.blur(validateName);
email.blur(validateEmail);
message.blur(validateMessage);

form.submit(function(){
    if(validateName() & validateEmail() & validateMessage()){
        return true;
    }else{
        return false;
    }
});

function validateName(){
    if(name.val().length < 5){  
        name.addClass("error");
        return false;

    }else{

        name.removeClass("error");
        return true;

    }

} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-02T10:32:16.303

我建议您使用插件而不是创建自己的...

[jquery 验证插件](http://bassistance.de/jquery-plugins/jquery-plugin-validation/)

您在表单中想要的所有东西都已经完成......易于使用和修改......

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-02T10:42:39.770

你可以这样使用..

```
function validateName(){
    if(name.val().length < 5){  
        $("#nameError").html("Name should contain atleast 5 characters");
        name.addClass("error");
        return false;

    }else{
        $("#nameError").html("");
        name.removeClass("error");
        return true;

    } 
```

}

nameError 是您为显示错误而创建的 DIV 的 ID。

在名称字段 keyDown 事件上，只需像这样清除错误消息..

```
$("#nameError").html(""); 
```

# ruby-on-rails-3 - Twitter Bootstrap 更改表格对齐方式

> ID：14120393
> 
> 赞同：0
> 
> 时间：2013-01-02T10:26:32.293
> 
> 标签：ruby-on-rails-3, twitter-bootstrap

我在我的 rails 应用程序中使用 twitter bootstrap。我试图让表头显示在与表数据相同的行中。类似的东西

```
<tr align="left"><th>Due Date:</th><td><%= @invoice.due_date %></td>
</tr> 
```

我怎样才能在 twitter bootstrap 中做到这一点？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-02T10:41:41.240

Bootstrap 与它没有任何关系。

对于`<tr>`表格中的每个，只需`<th>`用于您想要强调的单元格。

如果您说您希望行分隔符成为列分隔符，那是一些自定义 CSS ......

```
.table-vertical tr
{
  border: none !important;
}

.table-vertical th
{
  border-right: 1px solid gray;
} 
```

... 等等。

# c# - 如何从互操作程序集获取旧 COM 路径

> ID：14120398
> 
> 赞同：0
> 
> 时间：2013-01-02T10:27:03.193
> 
> 标签：c#, .net, com, interop

我有互操作程序集，我想获得原始 COM dll 的路径。如何做到这一点？

编辑： [这](https://stackoverflow.com/questions/849701/find-com-dll-path-from-com-interop-assembly)是类似的问题，帖子标记为答案，但它太简短了，我仍然不知道该怎么做。我已经从互操作 dll 创建了对象并使用`GetModuleHandle( "mycomserver.dll" )`并返回了 0 个结果。

代码如下所示：

```
class Program
{
    [DllImport("kernel32.dll", CharSet = CharSet.Auto, SetLastError = true)]
    public static extern IntPtr GetModuleHandle(string libname);

    static void Main(string[] args)
    {
        IntPtr result = GetModuleHandle(typeof(InteropClass).Module.Name);
        Console.WriteLine(result);
    }
} 
```

问候，乔特贝克

# objective-c - 可能的错误：面板未出现在启动时启动的状态栏应用程序中

> ID：14120401
> 
> 赞同：0
> 
> 时间：2013-01-02T10:27:15.927
> 
> 标签：objective-c, cocoa, osx-mountain-lion

我担心那是山狮虫。

重现它的步骤是：

*   创建状态栏应用程序；
*   添加触发方法的菜单项；
*   在这个方法中，显示一个带有 orderFront 的窗口：（通过 xib 创建的窗口）；
*   归档应用程序并将其添加为登录项；
*   尝试触发菜单项，您将不会看到出现任何窗口。

为了使这成为可能，在 xib 文件中，我在关闭时禁用释放并在启动时可见。

为了让它显示，我必须再次启动该应用程序。我注意到从应用商店安装的应用程序（如瓦特）也是如此。

# php - 看不到上传到服务器文件夹的图片

> ID：14120403
> 
> 赞同：1
> 
> 时间：2013-01-02T10:27:26.380
> 
> 标签：php, mysql

嗨，我在服务器中上传文件时遇到问题。这是我的代码：

```
 <?php
                   session_start();
                   $user=$_SESSION['user_level'];
                   Check if a file has been uploaded
                   if(isset($_FILES['fileToUpload'])) {
          // Make sure the file was sent without errors
                   if($_FILES['fileToUpload']['error'] == 0) {
         // Connect to the database
                   $dbLink = new mysqli('$host', '$username', '$pass', '$tbl_name');
                   if(mysqli_connect_errno()) {
                   die("MySQL connection failed: ". mysqli_connect_error());
                   }

             // Gather all required data
           //$id= mysql_insert_id(); 
                  $name = $dbLink->real_escape_string($_FILES['fileToUpload']['name']);
                  $mime = $dbLink->real_escape_string($_FILES['fileToUpload']['type']);
                  $data = $dbLink->real_escape_string
                  (file_get_contents($_FILES['fileToUpload']['tmp_name']));
                  $size = intval($_FILES['fileToUpload']['size']);

            // Create the SQL query
                  $query = "
                  INSERT INTO files (email,name,type,size,content)
                  VALUES ('$user','$name', '$mime', $size, '$data')";

           // Execute the query
                  $result = $dbLink->query($query);}}
          ?>
                  <?php 
                  move_uploaded_file($_FILES["fileToUpload"]["tmp_name"],
            "/home/u152912911/public_html/upload" . $_FILES["fileToUpload"]["name"]);
                ?>

                  <?php
                  if ($_FILES["fileToUpload"]["error"] > 0)
                  {
                  echo "Apologies, an error has occurred.";
                  echo "Error Code: " . $_FILES["fileToUpload"]["error"];
                  }
                  else
                  {
                  move_uploaded_file($_FILES["fileToUpload"]["tmp_name"],
                  "/home/u152912911/public_html/upload" . $_FILES["fileToUpload"] 
                  ["name"]);
                  }
                  if (($_FILES["fileToUpload"]["type"] == "image/DOC")
                  || ($_FILES["fileToUpload"]["type"] == "image/jpeg")
                  || ($_FILES["fileToUpload"]["type"] == "image/png" )
                  && ($_FILES["fileToUpload"]["size"] < 10000))
                  {
                  move_uploaded_file($_FILES["fileToUpload"]["tmp_name"],
          "/home/u152912911/public_html/upload" . $_FILES["fileToUpload"]["name"]);

              ECHO "Files Uploaded Succesfully";
              echo'<script type="text/javascript">

          window.location.href ="resume2.php"
                  </script>';
                   }
                  else
                  {
                  }
                  echo "Your Resume was Successfully Upload";
                  ?> 
```

我有一个名为“upload”的文件夹，它将存储用户上传的所有文件。我的目标是将文件存储在 mysql 和“上传”文件夹中。文件的存储工作正常，没有错误消息，但我在“上传”文件夹中看不到上传的文件。谢谢你的帮助！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-02T10:32:22.173

```
"/home/u152912911/public_html/upload" . $_FILES["fileToUpload"]["name"] 
```

`/`您在 .之后缺少一个斜杠`upload`。将其更改为：

```
"/home/u152912911/public_html/upload/" . $_FILES["fileToUpload"]["name"] 
```

实际上，该文件被保存为目录中带有前缀的文件`upload`名`public_html`。

如果可能，您应该使用相对路径来实现可移植性，很有可能只需

```
"upload/" . $_FILES["fileToUpload"]["name"] 
```

……就够了。

# 然而

你不应该`$_FILES["fileToUpload"]["name"]`像这样直接使用。考虑如果用户将字符串`../index.php`作为文件名发送会发生什么 - 用户将能够覆盖您的`index.php`文件。另外，考虑如果两个用户上传一个名为的文件会发生什么`picture.jpg`- 第二次上传会覆盖第一个。

相反，您应该为自己创建的文件使用一个名称——依赖这样的用户输入是不安全的。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-02T10:33:01.057

你忘记了一个斜线：

```
move_uploaded_file($_FILES["fileToUpload"]["tmp_name"],
          "/home/u152912911/public_html/upload" . $_FILES["fileToUpload"]["name"]); 
```

应该

```
move_uploaded_file($_FILES["fileToUpload"]["tmp_name"],
          "/home/u152912911/public_html/upload/" . $_FILES["fileToUpload"]["name"]); 
```

另外，检查成功的返回值，不要假设它。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-02T10:46:13.630

如果它在本地主机上工作正常并且在在线测试中出现问题，则要求服务器主机将文件夹权限更改为 777。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-01-02T10:33:43.123

请检查提供给您存储文件的文件夹的权限。

# database - 设计中的计算列可以引用sql server中的另一个吗？

> ID：14120404
> 
> 赞同：-1
> 
> 时间：2013-01-02T10:27:28.410
> 
> 标签：database, sql-server-2008, tsql, calculated-columns

我有 2 个计算列，`[StartTime]`并且`[EndTime]`

`[StartTime]`和`[EndTime]`是通过使用`[Week]`和`[Year]`列的公式计算的。

现在我需要另一个计算列，`[Status]`它是使用前两个计算的。但是当我尝试在公式中使用其中一个时，它给了我一个公式错误`[Status]`

我真的需要这个工作，因为我别无选择。但这甚至可能吗？

给你 -1 先生：

```
(case when [IsVOR]=(1) then 'VOR' 
      when [MarkedAsCompleteOn] IS NULL AND [Year]<datepart(year,getdate()) then 'Overdue' 
      when [MarkedAsCompleteOn] IS NULL AND [Year]>datepart(year,getdate()) then 'Not Due' 
      when [MarkedAsCompleteOn] IS NULL AND [Year]=datepart(year,getdate()) AND [Week]<datepart(iso_week,getdate()) then 'Overdue' 
      when [MarkedAsCompleteOn] IS NULL AND [Year]=datepart(year,getdate()) AND [Week]=datepart(iso_week,getdate()) then 'Due' 
      when [MarkedAsCompleteOn] IS NULL AND [Year]=datepart(year,getdate()) AND [Week]>datepart(iso_week,getdate()) then 'Not Due' 
      when [MarkedAsCompleteOn] IS NOT NULL AND [Year]<datepart(year,[MarkedAsCompleteOn]) then 'Late' 
      when [MarkedAsCompleteOn] IS NOT NULL AND [Year]>datepart(year,[MarkedAsCompleteOn]) then 'Early' 
      when [MarkedAsCompleteOn] IS NOT NULL AND [Year]=datepart(year,[MarkedAsCompleteOn]) AND [Week]<datepart(iso_week,[MarkedAsCompleteOn]) then 'Late' 
      when [MarkedAsCompleteOn] IS NOT NULL AND [Year]=datepart(year,[MarkedAsCompleteOn]) AND [Week]=datepart(iso_week,[MarkedAsCompleteOn]) then 'On Time' 
      when [MarkedAsCompleteOn] IS NOT NULL AND [MarkedAsCompleteOn]<[AllocatedTimeStart] then 'Early'  end) 
```

它的最后一部分导致错误：

```
[MarkedAsCompleteOn]<[AllocatedTimeStart] then 'Early' 
```

错误是通用的：

```
- Error validating the formula for column 'Status'. 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-02T10:57:23.183

不可以。一个计算列不能基于不同的计算列。这有一个特定的错误（1759）：

> 不允许在另一个计算列定义中使用表“%s”中的计算列“%s”。

您可以基于表创建一个*视图*，并在视图定义中执行第二轮计算。无论您随后对视图执行所有活动（如果需要，添加触发器），还是仅将其用于查找，都是您需要做出的设计决策。

当然，如果您添加了使用视图的想法，您可以使用 Common Table 表达式构建多个（不仅仅是 2 个）计算层。

您确实失去了使计算列持久化的能力，除非视图有资格成为索引视图 - 在这种情况下这并不重要，因为它似乎是基于日期计算的，所以无论如何可能都不能持久化。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-02T11:55:52.753

我最终找到了自己的解决方案，通过使用 a `function`，这使我的生产应用程序无需任何更改即可运行。

```
USE [DBNAME]
GO
/****** Object:  UserDefinedFunction [dbo].[GetStatus]    Script Date: 01/02/2013 11:08:29 ******/
SET ANSI_NULLS ON
GO
SET QUOTED_IDENTIFIER ON
GO
ALTER FUNCTION [dbo].[GetStatus](@CompletedOn DATETIME, @Year INT, @Week INT)
RETURNS NVARCHAR(MAX)
AS BEGIN
    DECLARE @CurrentDate DATETIME
    DECLARE @StartTime DATETIME
    DECLARE @EndTime DATETIME
    DECLARE @Status NVARCHAR(MAX)

    SET @CurrentDate = GETDATE()
    SET @StartTime = (dateadd(week,@Week-(1),dateadd(day,(-1),dateadd(week,datediff(week,(0),CONVERT([varchar](4),@Year,(0))+'-01-01'),(1)))))
    SET @EndTime = (dateadd(week,@Week-(1),dateadd(day,(-1),dateadd(week,datediff(week,(0),CONVERT([varchar](4),@Year,(0))+'-01-01'),(8)))))

    SET @Status = '-'
    IF(@CompletedOn IS NULL)
        BEGIN
            IF(@CurrentDate < @StartTime)
                SET @Status = 'Not Due'
            IF(@CurrentDate > @StartTime AND @CurrentDate < @EndTime)
                SET @Status = 'Due'
            IF(@CurrentDate > @EndTime)
                SET @Status = 'Overdue'
        END
    ELSE
        BEGIN
            IF(@CompletedOn < @StartTime)
                SET @Status = 'Early'
            IF(@CompletedOn > @EndTime)
                SET @Status = 'Late'
            ELSE
                SET @Status = 'On Time'
        END

    RETURN @Status
END 
```

在`status`现场我输入了公式：

```
([dbo].[GetStatus]([MarkedAsCompleteOn],[Year],[Week])) 
```

这是我的第一次`function`，`sql server`所以它可能不是最佳的。

# spring-security - 春季安全登录

> ID：14120406
> 
> 赞同：0
> 
> 时间：2013-01-02T10:27:34.590
> 
> 标签：spring-security

我正在使用 Spring Security 开发登录页面，但是当我启动我的项目时会自动重定向到登录页面。我的 web.xml 中有一个重定向到 index.xhtml，为什么重定向到 login.xhtml？

web.xml

```
<web-app >
<display-name>AirTour</display-name>

<welcome-file-list>
    <welcome-file>index.xhtml</welcome-file>
</welcome-file-list>

<!-- SPRING -->

<context-param>
    <param-name>contextConfigLocation</param-name>
    <param-value>
        /WEB-INF/conf/applicationContext.xml
     </param-value>
</context-param>

<listener>
    <listener-class>org.springframework.web.context.ContextLoaderListener</listener-class>
</listener>
<listener>
    <listener-class>org.springframework.web.context.request.RequestContextListener</listener-class>
</listener>

<!-- SPRING SECURITY  -->

<filter>
    <filter-name>springSecurityFilterChain</filter-name>
    <filter-class>org.springframework.web.filter.DelegatingFilterProxy</filter-class>
</filter>
<filter-mapping>
    <filter-name>springSecurityFilterChain</filter-name>
    <url-pattern>/*</url-pattern>
</filter-mapping>

<!-- JSF -->

<context-param>
    <param-name>javax.faces.PROJECT_STAGE</param-name>
    <param-value>Development</param-value>
</context-param>

<servlet>
    <servlet-name>Faces Servlet</servlet-name>
    <servlet-class>javax.faces.webapp.FacesServlet</servlet-class>
    <load-on-startup>1</load-on-startup>
</servlet>

<servlet-mapping>
    <servlet-name>Faces Servlet</servlet-name>
    <url-pattern>*.xhtml</url-pattern>
</servlet-mapping>
</web-app> 
```

应用程序上下文.xml

```
<bean id="userDetailsManager" class="org.springframework.security.provisioning.JdbcUserDetailsManager">
    <property name="dataSource" ref="dataSource"></property>
</bean>

<bean id="passwordEncoder" class="org.springframework.security.authentication.encoding.ShaPasswordEncoder"/>

<bean id="saltSource" class="org.springframework.security.authentication.dao.ReflectionSaltSource">
    <property name="userPropertyToUse" value="username"/>
</bean>

<security:authentication-manager alias="authenticationManager">
        <security:authentication-provider user-service-ref="userDetailsManager">
        <security:password-encoder ref="passwordEncoder">
            <security:salt-source ref="saltSource"/>
        </security:password-encoder>
       </security:authentication-provider>
</security:authentication-manager>

<security:http  >
    <security:intercept-url pattern="/user/*" access="ROLE_USER"/>
    <security:intercept-url pattern="/comp/*" access="ROLE_COMP"/>
    <security:intercept-url pattern="/admin/*" access="ROLE_ADMIN"/>
    <security:intercept-url pattern="/*" access="ROLE_ANONIMOUS,ROLE_USER,ROLE_COMP,ROLE_ADMIN"/>

    <security:form-login login-page="/login"/>
</security:http> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-02T14:05:20.950

将您的最后一个更改`intercept-url`为：

```
<security:intercept-url pattern="/**" access="IS_AUTHENTICATED_ANONYMOUSLY" /> 
```

也`auto-config`用于`security:http`.

```
<security:http auto-config="true"> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-02T10:30:00.523

看起来您在 spring 安全配置中犯了拼写错误。替换`ROLE_ANONIMOUS`为`ROLE_ANONYMOUS`：

```
<security:intercept-url pattern="/*" access="ROLE_ANONYMOUS,ROLE_USER,ROLE_COMP,ROLE_ADMIN"/> 
```

# jenkins - 詹金斯构建分析

> ID：14120408
> 
> 赞同：4
> 
> 时间：2013-01-02T10:27:46.563
> 
> 标签：jenkins, continuous-integration, profiling

我项目中的构建最近开始花费更多时间。我需要优化它们，但我不想盲目优化。我需要构建过程的各个步骤（获取、准备、构建脚本、发布等）消耗多少时间。是否有任何 jenkins 插件可以启用 cuch 分析？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-01-03T13:50:52.510

不是真正的分析工具，但您应该从 Timestamp 插件开始

[https://wiki.jenkins-ci.org/display/JENKINS/Timestamper](https://wiki.jenkins-ci.org/display/JENKINS/Timestamper)

这将为控制台日志中的每一行添加一个时间戳。然后，您可以轻松查看日志中每个特定部分（结帐、构建、发布）花费了多少时间

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2019-01-30T10:21:18.770

如果您的构建调用了 Ant、Maven 等标准构建工具，您可能想尝试一下 YouMonitor：https: [//www.yourkit.com/youmonitor/features/](https://www.yourkit.com/youmonitor/features/)。请注意，这并没有向您显示 Jenkins 管道或工作的任何细节，而是通过它们的目标/目标等很好地总结了外部构建工具。

# batch-file - 通过将文件名拖放到bat文件中来删除文件名

> ID：14120409
> 
> 赞同：0
> 
> 时间：2013-01-02T10:27:47.983
> 
> 标签：batch-file, find

我想使用拖放功能从 txt 列表中删除文件名但是我无法让我的代码工作

```
:delete
setlocal enableDelayedExpansion
set /p dnr=%1
find /v "!dnr!" document.txt > deleted.txt
pause 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-02T13:45:20.473

这将从文本文件（假定名称和扩展名格式）中删除您拖放到其上的文件。如果它是完整路径格式，则将其更改`%%~nxa`为`%%a`.

```
:delete
setlocal enabledelayedexpansion
for /f "tokens=*" %%a in ("%1") do (
set dnr=%%~nxa
find /v "!dnr!" filenames.txt >deleted.txt 
)    
for /f "skip=2 tokens=* delims=" %%x in (deleted.txt) do echo %%x >>new.txt
del deleted.txt /f /q
ren new.txt deleted.txt 
```

# kendo-ui - 剑道网格日期列不显示真实日期

> ID：14120412
> 
> 赞同：2
> 
> 时间：2013-01-02T10:27:59.320
> 
> 标签：kendo-ui

我的剑道网格显示这样的日期 /Date(691869600000)/ 。我该如何解决这个问题？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-03-27T21:39:48.403

使用这个[答案](https://stackoverflow.com/questions/206384/how-to-format-a-json-date/2316066#2316066)，我得到了适用于我的案例的史蒂夫代码。试试这个模板：

```
"#= kendo.toString(new Date(parseInt(myField.substr(6))),'MM/dd/yyyy HH:mm tt')#" 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-02T12:33:55.130

```
'#= kendo.toString(yourDateField,"MM/dd/yyyy HH:MM tt")#' 
```

并使您的字段类型为`date`.

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-08T10:38:33.683

您需要在数据源定义中将日期指定为类型 - 否则它将只是一个字符串：

例如，如果您的字段是生日：

```
var kendoDS = new kendo.data.DataSource({
schema: { 
 model: {
 fields: {
  birthday: { type: "date"}
 }
 }           
}); 
```

当您定义网格时：

```
kendoGrid({
 selectable: whatever values..etc
 columns: your-response,
 dataSource: kendoDS 
}); 
```

有关更多信息，请参见：[http ://www.kendoui.c​​om/forums/framework/data-source/json-date-handling-changed-in-latest-release.aspx](http://www.kendoui.com/forums/framework/data-source/json-date-handling-changed-in-latest-release.aspx)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-01-02T11:10:30.813

使用如下[模板](http://docs.kendoui.com/api/web/grid#columnstemplate-string)或文档链接中的模板。

```
#= kendo.format("{0:d}",theDateTimeFieldName)# 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2014-07-17T09:38:49.583

var offsetMiliseconds = new Date().getTimezoneOffset() * 60000;

```
 #= kendo.toString(new Date( parseInt(JSONDateTime.substr(6)) + offsetMiliseconds),"dd-MMM-yyyy hh:mm tt") # 
```

# objective-c - didReceiveRemoteNotification 没有被调用

> ID：14120413
> 
> 赞同：5
> 
> 时间：2013-01-02T10:28:02.413
> 
> 标签：objective-c, ios, push-notification, apple-push-notifications

我在 iOS/android 中创建应用程序。当设备中收到远程通知时，`didReceiveRemoteNotification`应该被调用。但它没有发生。我通过 APNS 发送消息的服务器端代码如下：

```
$deviceToken = $obj_listener->ref_id;

// Put your private key's passphrase here:
$passphrase = 'blahblah';
$ctx = stream_context_create();
stream_context_set_option($ctx, 'ssl', 'local_cert', '/var/www/mobileapp/TestAppCK.pem');
stream_context_set_option($ctx, 'ssl', 'passphrase', $passphrase);

// Open a connection to the APNS server
$fp = stream_socket_client(
                           'ssl://gateway.sandbox.push.apple.com:2195', $err,
                           $errstr, 60, STREAM_CLIENT_CONNECT|STREAM_CLIENT_PERSISTENT, $ctx);
if (!$fp){
    $this->log->debug("Failed to connect: $err $errstr" . PHP_EOL);
    exit("Failed to connect: $err $errstr" . PHP_EOL);
}

$badge_count = $obj_listener->badge_count + 1;

// Create the payload body
$body['aps'] = array(                  
                    //'alert' => 'Message received',
                    'sound' => 'default',
                    'badge' => $badge_count,
                    'msg_id' => $this->msg_id,
                    //'user_key' => $obj_listener->ref_id,
                    'email' => $obj_listener->to_email_id
                );

// Encode the payload as JSON
$payload = json_encode($body);

// Build the binary notification
$msg = chr(0) . pack('n', 32) . pack('H*', $deviceToken) . pack('n', strlen($payload)) . $payload;

// Send it to the server
$result = fwrite($fp, $msg, strlen($msg));

// Close the connection to the server
fclose($fp); 
```

我的 Objective-C 端代码如下：

```
- (void)application:(UIApplication *)application didReceiveRemoteNotification:(NSDictionary *)userInfo{ 

    //UIWebView *NewWebView = NULL;
    NSLog(@"didReceiveRemoteNotification function");

    return;
} 
```

我已经在服务器端代码中检查了设备令牌。这对设备是正确的。为什么上面的函数没有被调用。提前致谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-06-06T08:06:31.500

如果您没有在应用启动时注册通知，则永远不会收到通知。

```
 [[UIApplication sharedApplication] registerForRemoteNotificationTypes:(UIRemoteNotificationTypeAlert | UIRemoteNotificationTypeBadge |UIRemoteNotificationTypeSound)]; 
```

现在，关于您的服务器端，我建议您在调试模式下运行您的代码，看看是否可以通过 SSL 正确访问 Apple 的网关。一个简单的坏证书或缺少它可能会让你失去几天的工作。个人经验。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-06-06T07:03:59.770

如果应用程序不在后台，您应该使用以下代码

```
 //-------------- check notification when app is come to foreground after apllication get terminated ----------------//

UILocalNotification *localNotif =

[launchOptions objectForKey:UIApplicationLaunchOptionsRemoteNotificationKey];

if (localNotif) {

    [self handleRemotNotification:[launchOptions valueForKey:@"UIApplicationLaunchOptionsRemoteNotificationKey"]]; // private method

} 
```

# c# - 基于时间创建删除文件

> ID：14120416
> 
> 赞同：-4
> 
> 时间：2013-01-02T10:28:03.760
> 
> 标签：c#, delete-file

我在以下位置找到了此代码：[获取最新的 N 个文件并删除其余文件](https://stackoverflow.com/questions/9060174/get-most-recent-n-files-and-delete-the-rest)

遇到的错误：当前上下文中不存在名称“fileList”

如何设置要读取代码的文件夹目录？

```
var query = fileList.OrderByDescending(file => file.CreationTime);
var keepers = new List<FileInfo>();
var i = 0;
foreach (var file in query) {
    if (i++ < N)
    {
        keepers.Add(file);
    }
    else
    {
        file.Delete();
    }
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-02T10:33:36.800

正如您从代码中获取的示例中清楚的那样，fileList 是一个 FileInfo 数组。您必须在代码之前声明并填充该数组。：

```
DirectoryInfo Dir = new DirectoryInfo(DirectoryPath);
FileInfo[] FileList = Dir.GetFiles("*.*", SearchOption.AllDirectories); 
```

# php - 使用过滤器根据类别进行搜索

> ID：14120418
> 
> 赞同：2
> 
> 时间：2013-01-02T10:28:10.057
> 
> 标签：php, search, filter, search-engine, concept

使用过滤器进行搜索表单的最佳实践是什么，其中过滤器取决于类别？例如：如果您访问 ebay 并选择一个类别，那么手机左侧的过滤器（过滤器：品牌、操作系统...）或时尚类别（过滤器：尺寸、颜色.. .)...

**在我看来**，我会在数据库中做更多的表。每个表对应一个类别（cat_cellphone、cat_fashion...）。然后根据类别将产品放在这些表之一（不是一个产品表，其中一列包含类别 ID）。这些表是不同的，其中列名称由类别表征。接下来，应该做更多的搜索表单并调用过滤器所属类别的表单。

这是一个好的概念还是在大型项目中有其他公认的做法？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-02T10:35:19.267

不，拥有多个表是个坏主意。

一般来说。改为使用具有两列主键的表。（主键可能跨越多列。）

列将是类别名称/过滤器名称。

如果您不喜欢这样的主键，并且总是使用自动增量列，您仍然可以在两列上创建索引。

列将是：id / categoryname / filtername / filtertext

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-02T10:47:58.687

使用多个表来存储您的产品不是一个好主意。因为会有产品在类别中重叠，这会导致将相同的产品存储在多个表中。

只需使用带有 ID、product_number、description 等的产品表和一个类别表来存储不同的类别。然后你可以像这样直接链接它们：

产品表：

```
ID product_number description category
1  00001          Screwdriver 1 
```

分类表：ID 描述 1 工具

您甚至可以通过寻址子类别的父级来使用额外的列来扩展类别表以使用子类别：

带有子类别的类别表：

```
ID description      parent
1  Tools            NULL
2  Automatic tools  1 
```

如果您不喜欢直接从产品表链接到类别表，您可以使用链接表：

产品分类：

```
Product_ID Category_ID
1          1 
```

希望这能回答你的问题。

编辑，添加过滤表：

要为产品添加过滤器，您可以使用过滤器表和链接表，如下所示：

筛选：

```
Filter_ID description value
1         brand       Bosch
2         brand       Bahco
3         type        Phillips 
```

产品_过滤器：

```
Product_ID Filter_ID
1          1
1          3 
```

这样，您可以将多个过滤器链接到每个产品，并多次使用相同的过滤器。

您甚至可以通过使用另一个表作为过滤器值来进一步扩展它，但这可能会使事情变得有点复杂：

筛选：

```
Filter_ID description value
1         brand       1 
```

过滤器值：

```
Filter_ID value
1         Bosch
2         Bahco 
```

# android - 如何以编程方式创建自定义视图的布局？

> ID：14120419
> 
> 赞同：21
> 
> 时间：2013-01-02T10:28:09.880
> 
> 标签：android, android-layout, android-linearlayout, android-view, android-custom-view

在 Activity 中，您可以通过以下方式以编程方式创建 LinearLayout：

```
public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);

    LinearLayout ll = new LinearLayout(this);
    ll.setOrientation(LinearLayout.VERTICAL);
    ll.setLayoutParams(new LayoutParams(LayoutParams.MATCH_PARENT, LayoutParams.MATCH_PARENT));

    TextView tv1 = new TextView(this);
    tv1.setText("HELLO");
    ll.addView(tv1);

    TextView tv2 = new TextView(this);
    tv2.setText("WORLD");
    ll.addView(tv2);

    setContentView(ll);
} 
```

你如何在自定义 View 子类中做同样的事情？没有`setContentView`或`onCreate`方法...

* * *

## 回答 #1

> 赞同：36
> 
> 时间：2013-01-02T11:30:28.473

好的，我发现了一种方法。基本上，您需要继承通常在 XML 中定义的最顶层类，而不是直接继承 View 类。例如，如果您的自定义 View 需要一个 LinearLayout 作为其最顶层的类，那么您的自定义 View 应该简单地继承 LinearLayout。

例如：

```
public class MyCustomView extends LinearLayout
{
    public MyCustomView(Context context, AttributeSet attrs)
    {
        super(context, attrs);

        setOrientation(LinearLayout.VERTICAL);
        setLayoutParams(new LayoutParams(LayoutParams.MATCH_PARENT, LayoutParams.MATCH_PARENT));

        TextView tv1 = new TextView(context);
        tv1.setText("HELLO");
        addView(tv1);

        TextView tv2 = new TextView(context);
        tv2.setText("WORLD");
        addView(tv2);
    }
} 
```

子类化 LinearLayout 是“黑客”吗？据我所见。一些官方的 View 子类做同样的事情，比如[NumberPicker](https://github.com/android/platform_frameworks_base/blob/master/core/java/android/widget/NumberPicker.java)和[SearchView](https://github.com/android/platform_frameworks_base/blob/master/core/java/android/widget/SearchView.java)（即使它们从 XML 扩展它们的布局）。

仔细想想，这实际上是一个非常明显的答案。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-02T11:23:51.040

如果我理解您的问题，您需要使用 inflate，如下所示：

```
public final class ViewHolder {
        public TextView title;
        public TextView artist;
        public TextView duration;
        public ImageView thumb_image;
    //A class for the ViewHolder

    }

// Put this where you want to inflate this layout, could be a customlistview
View view = getLayoutInflater().inflate(R.layout.your_layout, null);
holder = new ViewHolder();
    holder.title = (TextView)view.findViewById(R.id.title); // title
    holder.artist = (TextView)view.findViewById(R.id.artist); // artist name
    holder.duration = (TextView)view.findViewById(R.id.duration); // duration
    holder.thumb_image=(ImageView)view.findViewById(R.id.list_image); // thumb image 
```

# c - C、进程、分叉

> ID：14120422
> 
> 赞同：-2
> 
> 时间：2013-01-02T10:28:25.720
> 
> 标签：c, fork

如何更改程序以使功能`function_delayed_1`和`function_delayed_2`仅同时执行一次：

```
 int main(int argc, char *argv[]) {
     printf("message 1.\n");
     fork();
     function_delayed_1();
     function_delayed_2();
     printf("message 2.\n");
 } 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-02T10:42:19.880

阅读`man`fork的页面，并google一些示例`fork();`，您的代码应如下所示：

```
#include <stdio.h>
#include <unistd.h>

int main(int argc, char *argv[]) {
     pid_t pid; // process ID

     printf("message 1.\n");
     pid = fork();
     if (pid < 0) {
         perror("fork");
         return;
     }

     if (pid == 0) {
         function_delayed_1(); // child process
     }
     else {
         function_delayed_2(); // parent process
     }
     printf("message 2.\n");
 } 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-03T07:19:14.843

```
int main(int argc, char *argv[]) {
    printf("message 1.\n"); // printed once by parent process
    if(fork())
        function_delayed_1(); // executed by parent process
    else
        function_delayed_2(); // executed by child process

    printf("message 2.\n"); // will be printed twice once by parent & once by child.
} 
```

# android - 使用 C# 以 iCal 格式获取事件的 Outlook 重复模式

> ID：14120425
> 
> 赞同：1
> 
> 时间：2013-01-02T10:28:27.547
> 
> 标签：android, icalendar, rfc2445, outlook-calendar, rfc5545

我正在开发一个系统，它可以提取`outlook calendar data`并将其保存在 android 设备日历上。到目前为止，所有其他 Outlook 数据均已成功提取和保存。现在我需要创建重复规则 ( `rrule`)。因为android设备日历使用保存重复模式作为`rfc5545`标准提到的规则。那么如何将 Outlook 重复模式提取为`rule (like iCal format)`.

简而言之，我需要像这样获取 Outlook 日历事件的重复模式

```
RRULE:FREQ=DAILY;UNTIL=20000131T140000Z;BYMONTH=1

** 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-02T13:28:44.613

您需要使用 Office`RecurrencePattern Object` [查看 msft 文档](http://msdn.microsoft.com/en-us/library/office/aa211012%28v=office.11%29.aspx)，它表示关联`AppointmentItem`对象的定期约会发生率模式。

对象具有`RecurrenceType (olRecursDaily, olRecursMonthly, ...)`自身的属性`(Interval, DayOfWeekMask, DayOfMonth, ...)`

使用此信息，您可以构建由 rfc5545 定义的字符串。

一个示例实现可用，请参阅：[sourceforge otlook2ical](http://sourceforge.net/projects/outlook2ical/files/outlook2ical/v1.04/)

# c# - 将我要运行的 exe 文件添加到我的解决方案文件夹中

> ID：14120427
> 
> 赞同：-1
> 
> 时间：2013-01-02T10:28:31.130
> 
> 标签：c#

我将要从我的应用程序运行的 exe 文件添加到我的应用程序文件夹中，但我认为我没有正确运行 exe 文件。例如，我的文件夹名称是文件夹，exe 文件是 run.exe，所以我尝试`@"\folder\run.exe"`但系统找不到指定的文件。正确的方法是什么？

```
public void run(string filePath, int deviceNumber)
{
    ProcessStartInfo processStartInfo = new ProcessStartInfo(@"\folder\run.exe");
    processStartInfo.Arguments = string.Format("{0} {2}{1}{2}", (deviceNumber).ToString(), filePath, "\"");
    processStartInfo.WindowStyle = ProcessWindowStyle.Hidden;
    processStartInfo.RedirectStandardOutput = true;
    processStartInfo.RedirectStandardError = true;
    processStartInfo.CreateNoWindow = true;
    processStartInfo.UseShellExecute = false;
    processStartInfo.ErrorDialog = false;

    using (Process process = Process.Start(processStartInfo))
    {
        process.WaitForExit();
    }
} 
```

已解决的问题：

```
the way to do it is ProcessStartInfo processStartInfo = new ProcessStartInfo(System.Windows.Forms.Application.StartupPath + myEXEpath); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-02T10:34:03.867

如果您使用 Process Class 运行它，请删除前导反斜杠

```
@"folder\run.exe" 
```

目录“文件夹”必须与您的可执行文件位于同一目录中。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-02T10:40:09.993

当您从 VS 启动应用程序时，您可以像这样以编程方式启动进程：

```
Process.Start(@"C:\somepath\run.exe"); 
```

您可以设置相对于您的应用程序路径的进程路径。像那样：

```
Process.Start(AppDomain.CurrentDomain.BaseDirectory+"run.exe"); 
```

您可以从 program.cs 运行它并在应用程序启动的同时运行它，或者在其他事件（如表单加载或按钮单击）上启动它。

# asp.net - 使用 Eval 值添加 http:// 或 https:// 前缀

> ID：14120430
> 
> 赞同：0
> 
> 时间：2013-01-02T10:29:08.843
> 
> 标签：asp.net, gridview, hyperlink

如何将 http 前缀添加到我的 gridview eval 值中

```
<asp:HyperLink Target="_blank" 
      NavigateUrl='<%# Eval("SourceURL").ToString().Contains("http:")==true?
                            Eval("SourceURL") :
                            'http://'+ Eval("SourceURL") %>' 
      runat="server" ID="Sorceurl"
      Visible='<%# Eval("SourceURL") == String.Empty ? false : true %>' 
      Text="Source"></asp:HyperLink> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-02T10:32:13.433

`'http://'`是不正确的 - 它应该是`"http://"`。

您在 C#/ 上下文中，因此您应该使用 C# 字符串。

```
<asp:HyperLink Target="_blank" 
      NavigateUrl='<%# Eval("SourceURL").ToString().Contains("http:")==true?
                            Eval("SourceURL") :
                            "http://" + Eval("SourceURL") %>' 
      runat="server" ID="Sorceurl"
      Visible='<%# Eval("SourceURL") == String.Empty ? false : true %>' 
      Text="Source"></asp:HyperLink> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-02T10:36:10.110

你可以试试这样

NavigateUrl='<%# "http://?" + (string)Eval("SourceURL") %>'

# mysql - mysql中的调度程序在几个小时之间运行

> ID：14120431
> 
> 赞同：1
> 
> 时间：2013-01-02T10:29:09.340
> 
> 标签：mysql, sql, scheduled-tasks

我想在上午 9 点到晚上 11 点之间每分钟创建一个预定的 mysql 查询。

我熟悉的语法是

```
 DELIMITER $$
CREATE
    EVENT `record_total_points`
    ON SCHEDULE EVERY 1 HOUR STARTS concat(date(now()), ' ', '09:00:00')
    DO BEGIN
            END */$$
                DELIMITER ; 
```

如何限制它在上述时间之间运行？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-02T10:37:23.293

只需尝试添加此（[事件调度程序](http://dev.mysql.com/doc/refman/5.1/ja/create-event.html)）

```
DELIMITER $$
CREATE
    EVENT `record_total_points`
EVERY 1 minute STARTS  DATE_FORMAT( NOW( ) ,  "%m-%d-%y 09:00:00" ) ENDS  DATE_FORMAT( NOW( ) ,  "%m-%d-%y 23:00:00" )
DO BEGIN
            END */$$
                DELIMITER ; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-02T10:37:11.593

你不能只添加一个 ENDS 语句`ON SCHEDULE EVERY 1 HOUR STARTS concat(date(now()), ' ', '09:00:00') ENDS concat(date(now()), ' ', '011:01:00')`吗？

# javascript - D3 使用 for 循环链接动画

> ID：14120435
> 
> 赞同：0
> 
> 时间：2013-01-02T10:29:21.417
> 
> 标签：javascript, d3.js

我想通过 for 循环链接 d3 动画。实现这样的目标的最佳方法是什么：

```
 for (var i=0; i<dat.length-1; i++) {
        var a = function(g,dat,i){
            /*
            g.transition().duration(i * 19)
                .attr("cy", dat[i+1].y1)
                .attr("cx", dat[i+1].x1)
                .attr("r", 10);*/
            console.log("transform " + dat[i+1].x1);
        };

        var t = setTimeout(a(g,dat,i), i*20);
    } 
```

这当然不起作用，因为您不能将对象传递给 setTimeout 函数。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-06T09:50:24.660

我找到了一个适合我的解决方案。我觉得它仍然是丑陋的代码，但至少它有效。

首先，我为数据集中的每个数据创建一个不可见对象：

```
g.data(dat) 
.enter()
.append("circle")
.attr("class", function(d,i) { return "default " + d.pn; })
.attr("cx", function(d,i) { return d.x1; })
.attr("cy", function(d,i) { return d.y1; })
.attr("r",  function(d,i) { return d.r; })
.style("opacity", 0); 
```

然后我将为每个元素安排一个过渡：

```
 g.each(function(d,i){
            var delay = Math.floor((i+1) / nrOfElements);
            //console.log(delay);
            d3.select(this)
                .transition()
                .delay(delay * speed)
                .duration(speed + DELAY_OFFSET)
                .style("opacity", 100)
                .attr("cx", function(d) { return i<dat.length-1 ? dat[i+1].x1 : dat[i].x1; })
                .attr("cy", function(d) { return i<dat.length-1 ? dat[i+1].y1 : dat[i].y1; })
                .attr("r",  function(d) { return i<dat.length-1 ? dat[i+1].r : dat[i].r; })
                .style("stroke", "blue") // TODO: setAttributes
                .each("end", function() { 
                    // Reset to privious attributes
                    d3.select(this)
                        .attr("cx", function(d) { return dat[i].x1; })
                        .attr("cy", function(d) { return dat[i].y1; })
                        .attr("r",  function(d) { return dat[i].r; })
                        ;

                    if(i<dat.length-nrOfElements) d3.select(this).style("opacity", 0); 
                })
                ;
        }); 
```

对于一个相当简单的要求，这对我来说似乎是一项巨大的编码工作......但至少它正在工作......

仍然欢迎更好的解决方案！

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-02T16:12:26.437

您可以使用 transition.delay() 链接转换。 [https://github.com/mbostock/d3/wiki/Transitions#wiki-delay](https://github.com/mbostock/d3/wiki/Transitions#wiki-delay)

```
for (var i = 0; i < dat.length - 1; i++) {
    g.transition().duration(20).delay(i * 20)
        .attr("cy", dat[i + 1].y1)
        .attr("cx", dat[i + 1].x1);
} 
```

# mysql - nodejs和DB之间如何通信

> ID：14120437
> 
> 赞同：1
> 
> 时间：2013-01-02T10:29:28.190
> 
> 标签：mysql, database, node.js

我想知道如何在 nodejs 和数据库之间进行通信。我发现了类似的问题并尝试使用 'db-mysql module; 但它在窗口不起作用。安装有问题，我发现这个问题永远不会得到解决。问题是node-waf，我发现它永远不会支持window。那我怎样才能与数据库通信，用js文件呢？如果 JS 文件使用 Node.js，是不是只能在 nodejs 安装的目录下工作？而且不只是一个JS文件吗？我如何使用数据库和数据库查询...例如mysql查询...以及如何连接？请帮助我..

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-03T03:18:43.440

首先，我没有在 Windows 中使用 node.js 进行开发，所以我没有测试过下面提供的任何答案。

从 node.js 查询 mysql 的模块似乎不止一个，请查看此链接： [https ://stackoverflow.com/a/8889152/1366519](https://stackoverflow.com/a/8889152/1366519)

此外，[https://github.com/mariano/node-db-mysql/](https://github.com/mariano/node-db-mysql/)似乎可以在 cygwin 中使用这个答案： [https ://stackoverflow.com/a/7025137/1366519](https://stackoverflow.com/a/7025137/1366519)

# .net - 索引超出数组范围

> ID：14120448
> 
> 赞同：0
> 
> 时间：2013-01-02T10:30:09.760
> 
> 标签：.net, vb.net, winforms, visual-studio-2010, process

我正在尝试监视用户选择的进程。我正在做的是尝试从进程名称中获取文件名，以便在找不到进程时可以再次启动它。现在我不明白我的问题。我在这里收到错误：`Dim s As String = ProcessArray(0).MainModule.FileName`。

我不明白的是它返回的文件名很好。谁能帮我查明问题？

```
 Dim ProcessArray As Process()
    ProcessArray = Process.GetProcessesByName(procName)
    Dim s As String = ProcessArray(0).MainModule.FileName
    Dim f As Process
    Dim p As Process() = Process.GetProcessesByName(procName)

    For Each f In p
        If p.Length > 0 Then
            For i As Integer = 0 To p.Length - 1
                ProcessID = (p(i).Id)
            Next
        Else
            ProcessID = 0
        End If
        If ProcessID = 0 Then
            BotRunning = False
            Process.Start(s)
            watchdogbool = True
            RunBot(watchdogList, ItemClicked.Text, -1)
        End If
    Next 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-02T10:33:37.457

如果未找到该进程，则找到的进程数组将为空。所以，你不能访问它的第一个元素。在您声明时`s`假设您将始终至少有一个结果。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-02T12:44:01.843

正如其他人已经说过的那样，当没有找到给定名称的进程时，就会发生错误。`s`因此，当错误发生时为什么具有有效值的唯一方法是，如果您在循环内执行代码并`s`在实际错误发生时具有来自上一次迭代（其中进程仍在运行）的值。

最重要的是您的代码和您想要实现的描述不匹配。基本上，如果您想在程序再也找不到它时再次启动该过程，那么我会期待某种循环。

我猜你想要这样的东西：

```
Public Sub WatchProcess(procName As String)
    Dim processArray As Process() = Process.GetProcessesByName(procName)
    ' The process must be running when your program starts. If not, throw an exception
    If processArray.Length = 0 Then Throw New ArgumentException("no such process", "procName")

    Dim fileName As String = processArray(0).MainModule.FileName

    While True ' Looking for the process endlessly. Use other conditions proper for you.
        If Process.GetProcessesByName(procName).Length = 0 Then
            ' The process is not running anymore, start it again!
            ' Do all the other stuff you wanna do (set bool flags etc.)
            Process.Start(fileName)
        End If
        Thread.Sleep(5000) ' Wait 5 seconds until the next check
    End While
End Sub 
```

重要的是，这将永远阻塞调用线程。因此，您需要使用多线程，让一个线程调用一个 procName 的方法（如果您想在 UI 中提供反馈或观察多个进程）。

正如您在评论中所说，您可以得到一条`Win32Exception`说明，您无法使用 32 位进程访问 64 位进程。要解决这个问题，请以与监视进程相同的模式启动您自己的程序（在*Project settings => Compile => Advanced Compile Options => Target CPU 下强制使用目标 CPU*）。有关这方面的更多信息，请参阅[类似](https://stackoverflow.com/questions/9501771/how-to-avoid-a-win32-exception-when-accessing-process-mainmodule-filename-in-c)的相应其他问题。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-02T10:38:45.200

在得到`filename`检查之前`ProcessArray` 不是 null 然后继续 else return

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-01-02T10:39:03.610

此行不返回任何元素

> ProcessArray = Process.GetProcessesByName(procName)

这就是为什么当您访问数组的第一个元素（为空）时，它会给您错误

> 索引超出数组范围 **解决**方法 检查对象`null`

```
if(ProcessArray !=null)
   Dim s As String = ProcessArray(0).MainModule.FileName
   MessageBox.Show("File name is " & ProcessArray(0).MainModule.FileName)

OR
if(ProcessArray.Length>0)
   Dim s As String = ProcessArray(0).MainModule.FileName 
```

# c# - 自定义类型相关的模板加载器

> ID：14120455
> 
> 赞同：2
> 
> 时间：2013-01-02T10:30:45.560
> 
> 标签：c#, asp.net-mvc

您可能知道，ASP.NET MVC 支持视图中模型字段的自定义视图覆盖。`Views`在名为的文件夹中有特殊文件夹`Views\Shared\EditorTemplates`，`Views\Shared\DisplayTemplates`依此类推，这些文件夹可以包含类似的文件，这将覆盖在带有字段的模型的视图中`Views\Shared\EditorTemplates\String.cshtml`调用时使用的默认视图。`@Html.EditorFor``String`

我想做的是将此功能用于自定义类型的模板。我想要一个这样的文件夹`Views\Shared\GroupTemplates`，其中可能包含例如`Views\Shared\GroupTemplates\String.cshtml`and `Views\Shared\GroupTemplates\Object.cshtml`，并且我想创建一个`HtmlHelper`允许我调用 example 的方法，如果是属性，`Html.GroupFor(foo => foo.Bar)`它将加载模板，否则加载模板。`String.cshtml``Bar``String``Object.cshtml`

* * *

预期行为的完整示例；如果`Views\Shared\GroupTemplates\String.cshtml`包含这个：

```
@model String
This is the string template 
```

...并`Views\Shared\GroupTemplates\Object.cshtml`包含以下内容：

```
@model Object
This is the object template 
```

我有一个模型：

```
class Foo
{
    public bool Bar { get; set; }
    public String Baz { get; set; }
} 
```

和类似的观点`Views\Foo\Create.cshtml`：

```
@model Foo
@Html.GroupFor(m => m.Bar)
@Html.GroupFor(m => m.Baz) 
```

当我渲染视图`Create.cshtml`时，结果应该是这样的：

```
This is the object template
This is the string template 
```

应该如何`GroupFor`实施？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-02T14:58:41.850

问题是您可以像这样轻松地指定您的视图位置

```
html.Partial("~/Views/Shared/GroupTemplates/YourViewName.cshtml"); 
```

甚至通过实现自定义视图引擎来覆盖默认行为，例如，请参阅此博客[A Custom View Engine with Dynamic View Location](http://weblogs.asp.net/imranbaloch/archive/2011/06/27/view-engine-with-dynamic-view-location.aspx)

但是您还想重用根据模型类型确定视图名称的逻辑。因此，如果不存在具有字符串名称的视图，则会拾取对象视图。这意味着要通过父类。

我看过 EditorFor 是如何实现的：

```
public static MvcHtmlString EditorFor<TModel, TValue>(this HtmlHelper<TModel> html, Expression<Func<TModel, TValue>> expression)
{
    return html.TemplateFor<TModel, TValue>(expression, null, null, DataBoundControlMode.Edit, null);
} 
```

它使用内部的 TemplateFor 方法，您不能只重用它。

所以我只能看到两个选项：

1.  通过尝试模型类型名称及其父类来检查是否存在具有正确名称的视图文件，从而实现您的自定义逻辑。如果您找到合适的视图，只需在帮助程序中使用 Partial 扩展。
2.  尝试使用反射来调用内部方法。但这种方法更像是一种 hack，而不是一种解决方案。

希望能帮助到你！

# sql - 从 SQL Azure 中的用户取消分配登录？

> ID：14120458
> 
> 赞同：0
> 
> 时间：2013-01-02T10:30:56.670
> 
> 标签：sql, azure

我可以使用命令在数据库中创建用户而无需登录`CREATE USER`，包括`WITHOUT LOGIN`.

有没有办法删除用户和已经建立的登录之间的链接？我试过使用这些`ALTER USER`命令，但没有成功。

我考虑过删除用户，然后在没有登录的情况下重新创建，但这会丢失我为用户设置的任何对象权限。

感谢您对此的任何帮助。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-02T10:59:14.793

为什么不删除登录？

```
USE [master]
GO

DROP LOGIN [myuser]
GO 
```

# java - 如何在java中将透明的alpha通道添加回png图像？

> ID：14120467
> 
> 赞同：1
> 
> 时间：2013-01-02T10:31:24.057
> 
> 标签：java, image, png, alpha, java-2d

我正在尝试将透明 alpha 通道附加到 java 中的 png 图像。合并 Alpha 通道后不应更改图像。简而言之，

1.  我有尺寸为 p X q 的 png 图像
2.  我有 100% 透明度和大小 p X q 的 alpha 通道（透明）
3.  以上两个图像（1和2）应该合并，图像1应该保持原样，没有任何alpha通道的影响......请帮帮我......

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-02T10:37:56.103

您需要根据第二张图片中的透明度信息设置第一张图片中的 Alpha 通道。像这样：[Set BufferedImage alpha mask in Java](https://stackoverflow.com/questions/221830/set-bufferedimage-alpha-mask-in-java)

如果您不想对第一个图像进行任何更改，那么您可以创建它的副本/克隆并使用此副本。以下是创建 BufferedImage 副本的方法：[如何克隆 BufferedImage](https://stackoverflow.com/questions/3514158/how-do-you-clone-a-bufferedimage)

# c++ - 多级线程需要时间

> ID：14120469
> 
> 赞同：0
> 
> 时间：2013-01-02T10:31:32.457
> 
> 标签：c++, multithreading, tcp

我创建了一个模块来使用 TCP 客户端服务器通信使用多个套接字传输数据。这将在 10 秒内传输 20MB 的文件。

多个套接字在每个单独的线程中发送/接收数据。

当我从另一个工作线程启动模块时，发送相同文件所需的时间增加到 40 秒。

请让我知道任何解决方案以避免时间滞后。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-02T11:06:23.160

您是否正在同步线程以从客户端的文件中读取内容并在服务器端写回文件？这增加了时间。

除此之外，默认情况下，您将在客户端和服务器的多个线程之间进行上下文切换时间。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-02T11:56:27.460

一个问题可能是磁盘缓存和查找。如果您还没有这样做，请尝试更精细地交错由不同线程传输的块（例如，到 4KB，因此字节 0...4095 由第一个线程传输，4096...8191 由第二个线程传输等）。

还要避免互斥体，例如让每个线程知道它应该在线程启动时读取和发送什么，或写入和接收什么，因此不需要线程间通信。可以通过*原子*标志变量（在传输块后由每个线程检查）而不是互斥锁来中止整个传输。

同样在接收端，请确保在内存中进行缓冲，以便按顺序写入目标文件。也就是说，如果一个线程传输块的速度比其他线程快，那么那些“早期”块只会保留在内存中，直到所有前面的块都被接收和写入。

如果缓冲区大小在这里成为问题，您可能需要在一端实现一些线程间同步（无关紧要，您是否减慢接收或发送速度），以防止最快的线程领先最慢的线程太远，但是对于数十兆字节的文件大小，在 PC 上，这不应该成为问题。

# javascript - 从 $(document).ready() 内部调用 GM_xmlhttpRequest 不起作用？

> ID：14120470
> 
> 赞同：2
> 
> 时间：2013-01-02T10:31:37.510
> 
> 标签：javascript, ajax, greasemonkey, gm-xmlhttprequest

这是我的**GM_xmlhttpRequest**脚本：

```
// ==UserScript==
// @name        test
// @namespace   test
// @include     http://stackoverflow.com/*
// @version     1
// ==/UserScript==

GM_xmlhttpRequest({
  method: "GET",
  url: "http://example.com",
  onload: function(response) {
    alert(response.responseText);
  }
});

function begin(){
    alert("ready");
}

$(document).ready(function() {
    begin();
}); 
```

它只提醒 example.com 的内容，而不是“准备好”。

但是，当我执行以下操作时，没有任何反应 - 没有任何警报：

```
function begin(){
    GM_xmlhttpRequest({
      method: "GET",
      url: "http://example.com",
      onload: function(response) {
        alert(response.responseText);
      }
    });
    alert("ready");
}

$(document).ready(function() {
    begin();
}); 
```

我究竟做错了什么？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-02T11:15:38.983

我很确定第一个示例显示了 GM_xmlhttpRequest 返回的内容，而不是“**准备就绪**”

jQuery/$ 不能在 Greasemonkey 中直接访问。它在页面内加载（在本例中由 stackoverflow.com 加载）。要访问页面的功能/属性，您可以使用 unsafeWindow-object( [http://wiki.greasespot.net/UnsafeWindow](http://wiki.greasespot.net/UnsafeWindow) )：

```
unsafeWindow.$(document).ready(function() {
    begin();
}); 
```

But I would suggest to call begin() directly, you don't need `$.ready()` here, because GM-scripts will always execute when the DOMContentLoaded-event fires, which is equal to `$.ready()`

# objective-c - 在 iPhone 上设置 fft 的加速器框架

> ID：14120473
> 
> 赞同：0
> 
> 时间：2013-01-02T10:32:00.430
> 
> 标签：objective-c, accelerate-framework

在我阅读后，我已经设置了一个设置加速器的功能：

[使用 Apple FFT 和 Accelerate 框架](https://stackoverflow.com/questions/3398753/using-the-apple-fft-and-accelerate-framework)

[带有 Accelerate 框架 vDSP 的 iPhone FFT](https://stackoverflow.com/questions/6358764/iphone-fft-with-accelerate-framework-vdsp)

和苹果文档。

我这样做了：

```
void fftSetup()
{

    COMPLEX_SPLIT   A;
    FFTSetup        setupReal;
    uint32_t        log2n;
    uint32_t        n, nOver2;
    int32_t         stride;
    uint32_t        i;
    float          *originalReal, *obtainedReal;
    float           scale;
    uint32_t L = 1024;
    float *mag = new float[L/2];

     log2n = 10 ;
     n = 1 << log2n;
     stride = 1;
     nOver2 = n / 2;

    printf("1D real FFT of length log2 ( %d ) = %d\n\n", n, log2n);

    for (i = 0; i < n; i++)
        originalReal[i] = (float) (i + 1);

    vDSP_ctoz((COMPLEX *) originalReal,2,&A,1,nOver2);

    A.realp = (float *) malloc(nOver2 * sizeof(float));
    A.imagp = (float *) malloc(nOver2 * sizeof(float));

    setupReal = vDSP_create_fftsetup(log2n, FFT_RADIX2);

    vDSP_fft_zrip(setupReal, &A, stride, log2n, FFT_FORWARD);
    vDSP_fft_zrip(setupReal, &A, stride, log2n, FFT_INVERSE);

    //get magnitude;
    for(i = 1; i < L/2; i++){
        mag[i] = sqrtf(A.realp[i]*A.realp[i] + A.imagp[i] * A.imagp[i]);
    }

    scale = (float) 1.0 / (2 * n);
    vDSP_vsmul(A.realp, 1, &scale, A.realp, 1, nOver2);
    vDSP_vsmul(A.imagp, 1, &scale, A.imagp, 1, nOver2);

} 
```

**问题 ：**

1.  我的应用程序在这两条线之一上总是崩溃且没有错误（BAD ACCESS）：

> originalReal[i] = (float) (i + 1); // 或者
> 
> vDSP_ctoz((COMPLEX *) originalReal,2,&A,1,nOver2);

我想我没有为 log2n 设置一个好的值？（10 得到 1024 窗口？）

*   我如何获得垃圾箱的实际大小？我的实际fft？我在这里写的一样吗？

*   我在哪里输入我的数据缓冲区数组（在我的代码中的确切位置？而不是 originalReal？）

多谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-02T12:10:20.980

实际上，当我将某个 f 的罪波插入其中时，我设法使其工作。

这是代码：

```
 COMPLEX_SPLIT   A;
    FFTSetup        setupReal;
    uint32_t        log2n;
    uint32_t        n, nOver2;
    int32_t         stride;
    uint32_t        i;
    float          *originalReal, *obtainedReal;
    float           scale;
    uint32_t L = 1024;
    float *mag = new float[L/2];

     log2n = 10 ;
     n = 1 << log2n;
     stride = 1;
     nOver2 = n / 2;

    //printf("1D real FFT of length log2 ( %d ) = %d\n\n", n, log2n);

    A.realp = (float *) malloc(nOver2 * sizeof(float));
    A.imagp = (float *) malloc(nOver2 * sizeof(float));
    originalReal = (float *) malloc(n * sizeof(float));
    obtainedReal = (float *) malloc(n * sizeof(float));

     for (i = 0; i < n; i++)
         originalReal[i] = cos(2*3.141592*11000*i/44100);//(float) (i + 1);

    vDSP_ctoz((COMPLEX *) originalReal,2,&A,1,nOver2);

    setupReal = vDSP_create_fftsetup(log2n, FFT_RADIX2);

    vDSP_fft_zrip(setupReal, &A, stride, log2n, FFT_FORWARD);
    //vDSP_fft_zrip(setupReal, &A, stride, log2n, FFT_INVERSE);

    scale = (float) 1.0 / (2 * n);
    vDSP_vsmul(A.realp, 1, &scale, A.realp, 1, nOver2);
    vDSP_vsmul(A.imagp, 1, &scale, A.imagp, 1, nOver2);

    //get magnitude;
    for(i = 1; i < L/2; i++)
    {
        mag[i] = sqrtf(A.realp[i]*A.realp[i] + A.imagp[i] * A.imagp[i]);
           NSLog(@"%d:%f",i,mag[i]);
    } 
```

实际上它不是垃圾箱之间的 44hz，正如那个人在上面的帖子中所写的那样！但是43！22050/512=43。这东西很关键！因为在更高的垃圾箱中 - 例如 bin[300] 你会得到完全不同的结果 44 和 43 ！（它的 300hz 漂移）。所以请注意。

# ruby-on-rails - 如何将使用回形针上传的 .txt 文件转换为原始文本？

> ID：14120475
> 
> 赞同：6
> 
> 时间：2013-01-02T10:32:08.373
> 
> 标签：ruby-on-rails, paperclip

我在我的模型中添加了一个`document`列`Post`，所以现在我可以向其中添加`txt`文件：

**post.rb:**

```
has_attached_file :document
validates_attachment_content_type :document, :content_type => 'text/plain' 
```

**安慰：**

```
 #<Post id: 92, content: "document upload test", user_id: 1, created_at: "2013-01-02 10:23:13", updated_at: "2013-01-02 10:23:13",
 title: "document upload test", document_file_name: "test.txt",
 document_content_type: "text/plain", document_file_size: 15,
 document_updated_at: "2013-01-02 10:23:13"> 
```

所以现在，我想把里面的内容`test.txt`变成原始文本。所以我可以在我的控制器中做这样的事情：

`@post.content = [TEXT INSIDE test.txt]`

有什么建议么？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-02T10:46:11.277

使用[before_save 回调](http://guides.rubyonrails.org/active_record_validations_callbacks.html#available-callbacks)，然后找到路径，打开文件并调用`File::read`打开的文件。

```
class Post
  before_save :contents_of_file_into_body

  private
  def contents_of_file_into_body
    path = document.queued_for_write[:original].path
    content = File.open(path).read
  end
end 
```

# android - 列表视图未更新

> ID：14120476
> 
> 赞同：0
> 
> 时间：2013-01-02T10:32:08.737
> 
> 标签：android, listview, broadcast, intentservice

我在活动中有一个列表视图。在活动中，我已在特定时间间隔设置警报以启动意图服务以从服务器获取数据，在它完成服务器调用响应后，从意图服务广播回活动并使用新数据更新列表视图..一切正常..但是当我离开该活动并再次使用列表视图返回相同的活动时，我的意图服务正在广播数据，但列表视图未更新数据，给我空白列表视图..当再次导航到时如何让列表视图充满数据那活动..谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-02T10:34:09.207

如果我理解正确，您应该只调用`notifyDataSetChanged()`您的适配器。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-02T10:50:34.987

```
 uradapter.notifyDataSetChanged(); 
```

# c# - 在 DataGridView 中反映修改后的字段

> ID：14120485
> 
> 赞同：1
> 
> 时间：2013-01-02T10:32:53.120
> 
> 标签：c#, datagridview, datatable, updates, datarow

为了回答我的问题，我需要先做一点解释，所以请耐心等待。

此应用程序有 2 种形式。在主窗体中，我有一个`DataGridView`. 它正在显示来自数据库表的数据。它`DataSource`被设置为一个`DataTable`对象。这是主窗体的代码。

```
using System;
using System.Data;
using DataAccess;

namespace WindowsFormsApplication3
{
    public partial class Form1 : Form
    {
        private SqlDataAccess _dataAccess = new SqlDataAccess(); //SqlDataAccess is a class written to handle database related operations
        private DataTable _dataTable = null;

        private void Form1_Load(object sender, EventArgs e)
        {
            string query = @"SELECT * FROM fEmployee";
            _dataTable = _dataAccess.GetDataTable(query, null);
            dgvEmployees.DataSource = _dataTable;
        }

        private void dataGridView1_RowHeaderMouseDoubleClick(object sender, DataGridViewCellMouseEventArgs e)
        {
            //Convert the current selected row in the DataGridView to a DataRow
            DataRowView currentDataRowView = (DataRowView)dgvEmployees.CurrentRow.DataBoundItem;
            DataRow dataRow = currentDataRowView.Row;

            Form2 f = new Form2(dataRow);
            f.ShowDialog();           
        }
    }
} 
```

单击 的行标题时`DataGridView`，将出现一个子表单。此子表单用作修改所选行的字段值的地方。包含所选行字段的`DataRow`对象被发送到子表单的重载构造函数。并且在该表单的 Load 事件中，其中包含的数据`DataRow`将显示在子表单的多个文本框中。

子表单的代码。

```
using System;
using System.Data;

namespace WindowsFormsApplication3
{
    public partial class Form2 : Form
    {
        private DataRow _employeeDetails = null;
        private bool _isDirty = false;

        public Form2(DataRow empDetails)
        {
            InitializeComponent();

            _employeeDetails = empDetails;
        }

        private void btnCancel_Click(object sender, EventArgs e)
        {
            this.Close();
        }

        private void Form2_Load(object sender, EventArgs e)
        {
            txtFName.Text = _employeeDetails["FirstName"].ToString();
            txtLName.Text = _employeeDetails["LastName"].ToString();
            txtAddress.Text = _employeeDetails["Address"].ToString();
            txtCity.Text = _employeeDetails["City"].ToString();
            txtPostalCode.Text = _employeeDetails["PostalCode"].ToString();
            txtCountry.Text = _employeeDetails["Country"].ToString();
            dtpDOB.Value = Convert.ToDateTime(_employeeDetails["DOB"]);
            txtPhone.Text = _employeeDetails["Phone"].ToString();
            txtEmail.Text = _employeeDetails["Email"].ToString();
            dtpDOJ.Value = Convert.ToDateTime(_employeeDetails["DOJ"]);
            txtBasicSalary.Text = _employeeDetails["BasicSalary"].ToString();
        }

        private void btnUpdate_Click(object sender, EventArgs e)
        {

        }
    }
} 
```

在子表单中，用户可以通过文本框更改值。

现在我的问题是：如何在主窗体的 DataGridView 中反映对子窗体中特定行所做的更改？

示例 - 我单击一个行标题，它打开子表单并加载详细信息。我更改名字。当我关闭子表单时，修改后的值应该在 main 中更新`DataGridview`。

任何人都可以就如何做到这一点提出一些建议吗？

我尝试将 传递`DataRow`给子表单作为参考，但这没有用。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-02T14:15:09.720

尝试测试这种方法。您必须使用`DataRow[]`更新`DataRow`选定的数据。请尝试弄清楚并获得一些想法。

```
public partial class MainForm : Form
{
    public MainForm()
    {
        InitializeComponent();
    }

    public BindingSource bs = new BindingSource();
    public DataRow[] mainDataRow;
    private DataTable employee = new DataTable();

    private void MainForm_Load(object sender, EventArgs e)
    {
        employee.Columns.Add("Id");
        employee.Columns.Add("LastName");
        employee.Columns.Add("FirstName");
        employee.Columns.Add("MiddleName");

        object[] emp1 = { "1", "Some1a", "Some1b", "Some1c" };
        object[] emp2 = { "2", "Some2a", "Some2b", "Some2c" };
        object[] emp3 = { "3", "Some3a", "Some3b", "Some3c" };
        object[] emp4 = { "4", "Some4a", "Some4b", "Some4c" };
        employee.Rows.Add(emp1);
        employee.Rows.Add(emp2);
        employee.Rows.Add(emp3);
        employee.Rows.Add(emp4);

        bs.DataSource = employee;
        dataGridView1.DataSource = bs;

    }

    private void dataGridView1_RowHeaderMouseDoubleClick(object sender, DataGridViewCellMouseEventArgs e)
    {
        //Convert the current selected row in the DataGridView to a DataRow
        DataRowView currentDataRowView = (DataRowView)dataGridView1.CurrentRow.DataBoundItem;
        mainDataRow = employee.Select("Id='"+ currentDataRowView[0].ToString() + "'"); //get the primary key id
        using (var f = new Form2{ dataRow = mainDataRow, Owner = this })
        {
            f.ShowDialog();        
        }
    }
} 
```

然后在`Form2`：

```
public partial class Form2: Form
{
    public Form2()
    {
        InitializeComponent();
    }

    public DataRow[] dataRow;
    private void Form2_Load(object sender, EventArgs e)
    {
        var select = dataRow[0];
        lastNameTextBox.Text = select[1].ToString();
        firstNameTextBox.Text = select[2].ToString();
        middleNameTextBox.Text = select[3].ToString();
    }

    private void button1_Click(object sender, EventArgs e)
    {
        MainForm m = this.Owner as MainForm;
        var updated = dataRow[0];
        updated[1] = lastNameTextBox.Text;
        updated[2] = firstNameTextBox.Text;
        updated[3] = middleNameTextBox.Text;
        m.mainDataRow[0] = updated;
        Close();
    }
} 
```

# android - 根据所有设备的屏幕宽度调整 textview 大小

> ID：14120487
> 
> 赞同：0
> 
> 时间：2013-01-02T10:33:04.447
> 
> 标签：android, textview

我在调整文本视图大小时遇到​​问题。

我有一个这样的布局，其中包含以下组件

图像视图| 文本视图 | 图像视图

放置在`relativelayout(horizontal)`其中，每个宽度是包装内容，高度是填充父项。

**问题**

我现在有这样的文本`"My name","My name is xyzmnop"`，我已将`TextView`大小固定为 15sp，所以发生在较大的设备中，因为 Textviews 宽度增加了文本“我的名字是 xyzmnop”将适合但在较小的设备中，因为宽度很小，它会溢出出到二线。但我希望它在*同一行*，因为如果文本很长，我可以灵活地减小文本的大小。

请帮我解决这个问题。

我见过这个

*   [更改文本大小后，Android TextView 不会调整大小](https://stackoverflow.com/questions/8774431/android-textview-doesnt-resize-after-changing-text-size)
*   [Android EditText 以编程方式调整大小](https://stackoverflow.com/questions/11492725/android-edittext-resize-programatically)
*   [在 Android 3.1 上调整 TextView 的大小不会缩小其高度](https://stackoverflow.com/questions/6986384/resizing-textview-does-not-shrink-its-height-on-android-3-1)

编辑：

我还添加了 setSingleLine = "true"; 在我的 xml

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-02T10:47:32.657

说，`tv`是你的TextView。

打电话`tv.setMaxLines(1);`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-02T10:48:41.660

`TextView`有[`setMaxLines (int maxlines)`](http://developer.android.com/reference/android/widget/TextView.html#setMaxLines%28int%29)方法：

> 使 TextView 最多有这么多行。设置此值会覆盖任何其他（最大）高度设置。

我想如果您将最大行数设置为 1，这可能会对您有所帮助。

[`android:maxlines`](http://developer.android.com/reference/android/widget/TextView.html#attr_android%3amaxLines)注意：如果您需要在 XML 布局中设置它，还有该属性。

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2013-01-03T09:33:26.340

我已经使用 ViewTreeObserver 解决了它。

# c# - WebApi XML 反序列化 - 具有多个子节点的节点未正确反序列化为子节点对象数组

> ID：14120494
> 
> 赞同：2
> 
> 时间：2013-01-02T10:33:42.857
> 
> 标签：c#, .net, asp.net-web-api

我正在尝试通过将 XML POST 到 WebApi POST 方法来反序列化它。除了具有多个子节点的节点外，一切正常并且可以反序列化。

代码如下所示：

```
[Serializable]
public class grandparentnode
{
    [XmlElement]
    public parentnode[] parentnode { get; set; }
}

[Serializable]
public class parentnode
{
    public childnode childnode { get; set; }
}

[Serializable]
public class childnode
{
    public string foo { get; set; }
    public string bar { get; set; }
    public string baz { get; set; }
} 
```

这是 XML：

```
<grandparentnode>
    <parentnode>
        <childnode>
            <foo>1</foo>
            <bar>2</bar>
            <baz>3</baz>
        </childnode>
        <childnode>
            <foo>4</foo>
            <bar>5</bar>
            <baz>6</baz>
        </childnode>
        <childnode>
            <foo>7</foo>
            <bar>8</bar>
            <baz>9</baz>
        </childnode>
    </parentnode>
</grandparentnode> 
```

`parentnode[]`问题是，在调试时，我得到的只是数组中的一项，如下所示`{WebApiListener.Controllers.FooBarBazController.parentnode[1]}`：我需要父节点作为子节点对象的数组。

知道为什么吗？

谢谢你，
*彼得*

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-02T10:54:07.570

正如用户@Jobo 指出的那样，我混淆了应该反序列化数组的顺序。

这是修改后的代码：

```
[Serializable]
public class grandparentnode
{
    public parentnode parentnode { get; set; }
}

[Serializable]
public class parentnode
{
    [XmlElement]
    public childnode[] childnode { get; set; }
}

[Serializable]
public class childnode
{
    public string foo { get; set; }
    public string bar { get; set; }
    public string baz { get; set; }
} 
```

# c# - 如何在同一个字典c#中将2行连接在一起

> ID：14120496
> 
> 赞同：0
> 
> 时间：2013-01-02T10:33:48.483
> 
> 标签：c#, linq

我已经用 INT 上的键和类的值声明了一个字典 `Dictionary<int, List<clsBook>> dicBook = new Dictionary<int, List<clsBook>>();`

当某个值等于第二行时，我想在字典中执行行连接。

我的代码如下，但我收到错误“无法将类型 System.collections.generic.list < System.collections.generic.list < clsBOOK >> 隐式转换为 System.Collections.Generic.List< clsBook >”

```
 List<clsBook> aaa = (from OD in dicBook
                             join OD2 in dicBook
                             on OD.Value[1] equals OD2.Value[1]
                             select OD.Value).ToList(); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-02T10:47:25.553

试试下面的代码：

```
var  dicBook = new Dictionary<int, List<clsBook>>();
           List<List<clsBook>> aaa = (from OD in dicBook
                                join OD2 in dicBook
                                on OD.Value[1] equals OD2.Value[1]
                                select OD.Value).ToList(); 
```

希望这可以帮助。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-02T10:42:08.697

A`Dictionary`暴露一个`IEnumerable<KeyValuePair<TKey, TValue>>`，因为你`TValue`是`List<clsBook>`你最终会得到一个`List<List<clsBook>`不能分配给的 an `List<clsBook>`。

如果您可以描述您要实现的目标，因为这对我来说并不明显，那么我可能会提供更多帮助。

即使您使用[`SelectMany`](http://msdn.microsoft.com/en-us/library/bb534336.aspx)本质上连接列表，我也看不出您试图实现的任何逻辑。

你想合并所有共享相同第一个元素的列表吗？您所做的将导致字典中的每个列表至少翻倍。

# python - 如何使用 Requests 从 Github 下载和写入文件

> ID：14120502
> 
> 赞同：30
> 
> 时间：2013-01-02T10:34:19.330
> 
> 标签：python, github, python-requests

假设有一个文件存在于 github 存储库中：

[https://github.com/someguy/brilliant/blob/master/somefile.txt](https://github.com/someguy/brilliant/blob/master/somefile.txt)

我正在尝试使用请求来请求此文件，将其内容写入当前工作目录中的磁盘，以便以后使用。现在，我正在使用以下代码：

```
import requests
from os import getcwd

url = "https://github.com/someguy/brilliant/blob/master/somefile.txt"
directory = getcwd()
filename = directory + 'somefile.txt'
r = requests.get(url)

f = open(filename,'w')
f.write(r.content) 
```

无疑是丑陋的，更重要的是，不工作。而不是预期的文本，我得到：

```
<!DOCTYPE html>
<!--

Hello future GitHubber! I bet you're here to remove those nasty inline styles,
DRY up these templates and make 'em nice and re-usable, right?

Please, don't. https://github.com/styleguide/templates/2.0

-->
<html>
  <head>
    <meta http-equiv="Content-type" content="text/html; charset=utf-8">
    <title>Page not found &middot; GitHub</title>
    <style type="text/css" media="screen">
      body {
        background: #f1f1f1;
        font-family: "HelveticaNeue", Helvetica, Arial, sans-serif;
        text-rendering: optimizeLegibility;
        margin: 0; }

      .container { margin: 50px auto 40px auto; width: 600px; text-align: center; }

      a { color: #4183c4; text-decoration: none; }
      a:visited { color: #4183c4 }
      a:hover { text-decoration: none; }

      h1 { letter-spacing: -1px; line-height: 60px; font-size: 60px; font-weight: 100; margin: 0px; text-shadow: 0 1px 0 #fff; }
      p { color: rgba(0, 0, 0, 0.5); margin: 20px 0 40px; }

      ul { list-style: none; margin: 25px 0; padding: 0; }
      li { display: table-cell; font-weight: bold; width: 1%; }
      #error-suggestions { font-size: 14px; }
      #next-steps { margin: 25px 0 50px 0;}
      #next-steps li { display: block; width: 100%; text-align: center; padding: 5px 0; font-weight: normal; color: rgba(0, 0, 0, 0.5); }
      #next-steps a { font-weight: bold; }
      .divider { border-top: 1px solid #d5d5d5; border-bottom: 1px solid #fafafa;}

      #parallax_wrapper {
        position: relative;
        z-index: 0;
      }
      #parallax_field {
        overflow: hidden;
        position: absolute;
        left: 0;
        top: 0;
        height: 370px;
        width: 100%;
      } 
```

等等等等。

来自 Github 的内容，但不是文件的内容。我究竟做错了什么？

* * *

## 回答 #1

> 赞同：32
> 
> 时间：2013-01-02T10:41:39.280

相关文件的内容*包含*在返回的数据中。您将获得该文件的完整 GitHub 视图，而不仅仅是内容。

*如果您*只想下载文件，则需要使用`Raw`页面顶部的链接，该链接将是（对于您的示例）：

```
https://raw.github.com/someguy/brilliant/master/somefile.txt 
```

注意域名的变化，`blob/`路径部分没有了。

`requests`要使用GitHub 存储库本身来证明这一点：

```
>>> import requests
>>> r = requests.get('https://github.com/kennethreitz/requests/blob/master/README.rst')
>>> 'Requests:' in r.text
True
>>> r.headers['Content-Type']
'text/html; charset=utf-8'
>>> r = requests.get('https://raw.github.com/kennethreitz/requests/master/README.rst')
>>> 'Requests:' in r.text
True
>>> r.headers['Content-Type']
'text/plain; charset=utf-8'
>>> print r.text
Requests: HTTP for Humans
=========================

.. image:: https://travis-ci.org/kennethreitz/requests.png?branch=master
[... etc. ...] 
```

* * *

## 回答 #2

> 赞同：9
> 
> 时间：2013-01-02T10:43:32.890

您需要从`https://raw.github.com`.

看到不同：

[https://raw.github.com/django/django/master/setup.py](https://raw.github.com/django/django/master/setup.py)与[https://github.com/django/django/blob/master/setup.py](https://github.com/django/django/blob/master/setup.py)

此外，您可能应该`/`在目录和文件名之间添加一个：

```
>>> getcwd()+'foo.txt'
'/Users/burhanfoo.txt'
>>> import os
>>> os.path.join(getcwd(),'foo.txt')
'/Users/burhan/foo.txt' 
```

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2021-02-21T20:19:26.427

就像更新一样，`https://raw.github.com` [已迁移](https://developer.github.com/changes/2014-04-25-user-content-security/)到`https://raw.githubusercontent.com`. 所以一般格式是：

```
url = "https://raw.githubusercontent.com/user/repo/branch/[subfolders]/file" 
```

例如[`https://raw.githubusercontent.com/earnestt1234/seedir/master/setup.py`](https://raw.githubusercontent.com/earnestt1234/seedir/master/setup.py)。仍然使用`requests.get(url)`Martijn 的答案。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2022-01-08T12:54:48.807

添加一个准备复制+粘贴的工作示例：

```
import requests
from requests.structures import CaseInsensitiveDict

url = "https://raw.githubusercontent.com/organization/repo/branch/folder/file"

# If repo is private - we need to add a token in header:
headers = CaseInsensitiveDict()
headers["Authorization"] = "token TOKEN"

resp = requests.get(url, headers=headers)
print(resp.status_code) 
```

(*) 如果 repo 不是私有的 - 删除标题部分。

* * *

**奖励：**
查看[这个](https://reqbin.com/req/python/c-xgafmluu/convert-curl-to-python-requests)Curl < --> Python-requests 在线转换器。

# java - 如何使用 JPA 2 创建动态表？

> ID：14120503
> 
> 赞同：0
> 
> 时间：2013-01-02T10:34:29.983
> 
> 标签：java, hibernate, jpa, annotations, jpa-2.0

我想使用纯 JPA 2 创建一个动态时间表。就像在休眠中一样，我们使用 SchemaExport 创建动态表。

编码：

```
<properties>
    <property name="javax.persistence.jdbc.driver" value="com.mysql.jdbc.Driver"/>
    <property name="javax.persistence.jdbc.url" value="jdbc:mysql://localhost:3306/employee;create=true"/>
    <property name="javax.persistence.jdbc.user" value="root"/>
    <property name="javax.persistence.jdbc.password" value="root"/>
    <property name = "hibernate.show_sql" value = "true" />
<properties> 
```

我使用时发生以下异常`create=true`：

```
WARN: HHH000342: Could not obtain connection to query metadata : Unknown database 'employee;create=true'
Exception in thread "main" javax.persistence.PersistenceException: [PersistenceUnit: EmployeeService] Unable to build EntityManagerFactory
at org.hibernate.ejb.Ejb3Configuration.buildEntityManagerFactory(Ejb3Configuration.java:915)
at org.hibernate.ejb.Ejb3Configuration.buildEntityManagerFactory(Ejb3Configuration.java:890)
at org.hibernate.ejb.HibernatePersistence.createEntityManagerFactory(HibernatePersistence.java:57)
at javax.persistence.Persistence.createEntityManagerFactory(Persistence.java:63) 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-02T12:56:01.650

您可以`create=true`在`persistence.xml`url 中指定。

```
 <persistence-unit name="PU" transaction-type="RESOURCE_LOCAL">
     ...
    <properties>
      ---
      <property name="javax.persistence.jdbc.url" 
          value="jdbc:???://localhost:port/DBName;create=true"/>
      <property name="javax.persistence.jdbc.user" value="user"/>
      <property name="javax.persistence.jdbc.password" value="pwd"/>
    </properties>
  </persistence-unit>
</persistence> 
```

# knockout.js - 使用 KnockoutJS 计算属性的原型

> ID：14120507
> 
> 赞同：6
> 
> 时间：2013-01-02T10:34:43.213
> 
> 标签：knockout.js

是否建议在原型对象上创建计算属性？

这是我在下面尝试过的，但是`firstName`绑定将函数作为字符串返回，而不是执行它（[http://jsfiddle.net/W37Yh](http://jsfiddle.net/W37Yh)）。

```
var HomeViewModel = function(config, $, undefined) {

    if (!this instanceof HomeViewModel) {
        return new HomeViewModel(config, $, undefined);
    }

    this.firstName = ko.observable(config.firstName);
    this.lastName = ko.observable(config.lastName);
};

HomeViewModel.prototype.fullName = function() {
    return ko.computed(function() {
        return this.firstName() + " " + this.lastName();
    }, this);
};

var model = new HomeViewModel({
    firstName: "John",
    lastName: "Smith"
}, jQuery);

ko.applyBindings(model);​ 
```

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2013-01-02T11:36:06.220

`this`不是实际视图模型，因为尚未创建实例。你可以做

```
ViewModel = function() {
   this.fullName = ko.computed(this.getFullName, this);
};

ViewModel.prototype = {
   getFullName: function() {
      return this.firstName() + " " + this.lastName();
   }
}; 
```

# android - 如何在android中实现缓存数据而不是从服务器加载数据

> ID：14120515
> 
> 赞同：2
> 
> 时间：2013-01-02T10:35:13.870
> 
> 标签：android, caching, offline-caching

嗨，在我的应用程序中，我有大量数据要从 Web 服务器加载，每次调用 Web 服务器都需要花费大量时间来加载，因此我决定缓存旧数据并仅在有新数据时才请求服务器并加载所有数据数据库上的数据并从数据库离线加载，以便应用程序更具响应性。

如何实现这一点，因为我不知道缓存，请建议实现这一点的方法以及我可以使用的最佳数据库是什么，因为来自服务器的数据是 json 格式。我需要遵循哪些方法来在 android 中实现这种缓存。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-02T10:57:39.773

解析后，将数据存储在 SQLite 数据库中。第一次从服务器下载数据并存储在 SQLite 中，并在用户下次打开应用程序时向用户显示旧数据，如果新数据可用，请向服务器发送新数据请求更新数据库并更改用户界面。

# ruby - 无法将符号转换为整数（TypeError）：仅在 Windows 上使用 bunny 客户端使用 bunny 弹出队列时

> ID：14120517
> 
> 赞同：1
> 
> 时间：2013-01-02T10:35:19.237
> 
> 标签：ruby, rabbitmq

尽管我已经进行了足够多的搜索，但无法获得解决此问题的帮助。我对 Ruby 很陌生，所以如果我遗漏了一些非常基本的东西，请原谅我。

在 Windows 上执行以下代码时，我收到`[]': can't convert Symbol into Integer (TypeError) from C:/Users/shhashmi/workspace/rabbitmqSender/sender.rb:36:in`来自 C:/Users/shhashmi/workspace/rabbitmqSender/sender.rb:59:in 的错误“C:/Users/shhashmi/workspace/rabbitmqSender/sender.rb:36:in getItem” `'"

但是代码在 CentOS 上运行良好。

```
require "bunny"
require "net/http"

# Rabbit MQ
@host = "test.host"
@queue = "test.queue"

#@host = "localhost"
#@queue = "TEST"

# Put your target machine here
@target = "http://localhost:3000/"

def getItem
b = Bunny.new(:host=>@host, :port=>5672,)
# start a communication session with the amqp server
                b.start

                # declare a queue
                q = b.queue(@queue, :auto_delete=>true)

                # declare default direct exchange which is bound to all queues
                e = b.exchange("")

                # publish a message to the exchange which then gets routed to the queue

                #e.publish("Hello, everybody! 211", :key => @queue)
                #e.publish("Hello, everybody! 311", :key => @queue)

                # get message from the queue
                msg = q.pop[:payload]

                puts "This is the message: " + msg + "\n\n"

                # close the connection
                b.stop
                return msg
end

getItem 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-06-25T07:14:08.717

我能够使用您的代码重现该错误。问题在于这一行：

```
msg = q.pop[:payload] 
```

Queue#pop 方法在从队列中弹出消息后返回一个包含 3 个项目的数组。该方法应如下所示：

```
delivery_info, message_properties, msg = q.pop 
```

现在，您应该在“msg”变量中看到您的消息有效负载。您可以检查其他两个结果以收集任何有用的信息（例如队列中剩余消息的数量），或者如果您不需要它们则完全忽略它们

# asp.net-mvc - 带有标识列的 EF Code First 父子插入 (HELP)

> ID：14120520
> 
> 赞同：0
> 
> 时间：2013-01-02T10:35:28.813
> 
> 标签：asp.net-mvc, entity-framework, parent-child, code-first, identity-insert

这对我来说很奇怪。我有两个实体。销售状态（父母）和销售（儿童）。

```
public class SalesStatus
{
    [Key]
    public int SalesStatusID { get; set; } /* this is identity column*/

    public string Status { get; set; }

    public virtual List<Sale> Sales { get; set; }
}

public class Sale
{
    [Key]
    public int SalesID { get; set; } /* this is identity column*/

    //etc
}

SalesContext db = new SalesContext();

var ss = new SalesStatus
{
    Status = "INQ",

        Sales = new List<Sale>()
};

ss.Sales.Add(sale);
db.SalesStatus.Add(ss);
db.Entry(ss).State = EntityState.Added;
db.SaveChanges(); 
```

我有一个错误。实体框架尝试插入具有 PK 值的新记录。“无法为表中的标识列插入显式值”

但是当我将 EntityState 更改为 EntityState.Detached 或 EntityState.Unchanged 时。子实体（销售）单独成功插入。（没有销售状态）

我一直很困惑。

我在下面找到了一些案例。但这对我的情况不起作用。 [带有标识列的 EF Code First 父子插入](https://stackoverflow.com/questions/5631489/ef-code-first-parent-child-insertions-with-identity-columns)

我使用 dotnet 框架 4.0 / 实体框架 4.1

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-02T11:57:17.143

尝试更改主键名称（SalesID 为 SaleID）。可能是EF配置外键错误，

```
public class Sale
{
    [Key]
    public int SaleID { get; set; } /* this is identity column*/

    //etc
} 
```

# php - 在我的 wordpress 站点中，我想先启动 somefile.html，然后在 10 秒后重定向到 index.php 文件

> ID：14120524
> 
> 赞同：-1
> 
> 时间：2013-01-02T10:35:46.180
> 
> 标签：php, javascript, wordpress, .htaccess

我有一个 wordpress 网站[http://hamroletang.com](http://hamroletang.com)，它包含一个文件[http://hamroletang.com/sardanjali.html](http://hamroletang.com/sardanjali.html)

现在我希望 sardanjali.html 成为我的网站登录页面。

然后它将重定向到我已经完成的 index.php

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-02T10:39:35.533

最简单的方法是将 sardanjali.html 重命名为 index.html 并添加：

```
<meta http-equiv="refresh" content="5;URL='http://hamroletang.com/index.php'"> 
```

然后，确保在您的 Apache 配置中 .html 优先于 .php

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-02T10:46:16.783

您可以将网站的默认页面更改为您想要的任何内容。在您的情况下，将单个文件 sardanjali.html 指定为默认页面。设置因 Web 服务器而异。例如，在 Apache 上有说明 - [http://www.cyberciti.biz/faq/apache-display-or-change-a-default-page-other-than-indexhtml/](http://www.cyberciti.biz/faq/apache-display-or-change-a-default-page-other-than-indexhtml/)

是的，您必须使用 sardanjali.html 中的刷新功能在指定时间后自动将用户重定向到您的 index.php。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-02T10:42:04.967

您可以将 sardanjali.html 重命名为 index.html，然后在 apache 配置中将目录索引更改为在 index.php 之前有 index.html：

DirectoryIndex index.html index.php

在我的系统上，这已经是默认设置（ubuntu）。

在您的重定向中，您应该明确重定向到 index.php，而不是一般的域。

如果您无法更改 apache 配置文件并且重命名为 index.html 没有帮助，那么您可以将您的博客移动到子域或子目录并重定向到其中。但这会破坏您博客的所有链接。可能不是你想要的。

# java - java - 如何从xml文件反序列化到java中的对象列表？

> ID：14120526
> 
> 赞同：1
> 
> 时间：2013-01-02T10:35:57.597
> 
> 标签：java, xml, serialization, simple-framework

以下代码不起作用。运行这些行时出现异常[Object objPoints = serializer.read(Point.class, file);] 详细来说，源附件不包含 Persister.class 的源。

```
import org.simpleframework.xml.Serializer; 
import org.simpleframework.xml.core.Persister;
import java.io.File;

Serializer serializer = new Persister();
File file = new File("1.xml");
Object objPoints = serializer.read(Point.class, file); 
```

点等级如下：

```
@Root
public class Point {
   @Element
   private float X;
   @Element
   private float Y;
} 
```

我从此[链接](http://simple.sourceforge.net/download/stream/doc/tutorial/tutorial.php)引用。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-03T22:50:58.833

如果我使用您评论中的 xml 和您的代码，它可以工作：

**XML:**

```
<Point>
   <X>2</X>
   <Y>3</Y>
</Point> 
```

但是在这个问题的标题中，您谈到了“对象列表”-您能在这里更详细吗？

如果您需要反序列化点列表，则不能使用`Point`该类，而是使用列表。

顺便提一句。您的 xml 文件是否包含任何其他内容或仅包含这一点？

# maven - 使用 maven 构建时动态更改版本号

> ID：14120527
> 
> 赞同：2
> 
> 时间：2013-01-02T10:36:00.267
> 
> 标签：maven, version, buildnumber-maven-plugin, build-numbers

除了手动更改版本，有没有办法用内部版本号更新它？

```
 <version>1.2.132-SNAPSHOT</version> 
```

在上面的代码中，我需要的是内部版本号而不是 132。

我使用以下代码生成内部版本号。

```
 <plugin>
            <groupId>org.codehaus.mojo</groupId>
            <artifactId>buildnumber-maven-plugin</artifactId>
            <version>1.0</version>
            <configuration>
                <format>{0,number}.{1,number}.{2,number}</format>
                <items>
                    <item>buildNumber0</item>
                    <item>buildNumber1</item>
                    <item>buildNumber2</item>
                </items>
            </configuration>
            <executions>
                <execution>
                    <phase>initialize</phase>
                    <goals>
                        <goal>create</goal>
                    </goals>
                </execution>
            </executions>
        </plugin> 
```

而且我需要-SNAPSHOT 之前的内部版本号。有任何想法吗 ？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-12-09T00:23:28.367

我认为您可以将 buildNumber 变量附加到您的版本属性：

```
<version>1.2.${buildNumber0}${buildNumber1}${buildNumber2}-SNAPSHOT</version> 
```

# java - 使用反射和泛型时的警告

> ID：14120531
> 
> 赞同：3
> 
> 时间：2013-01-02T10:36:32.387
> 
> 标签：java, generics, reflection

我该如何重写这个：

```
<T> T callMethod(String methodName, Object[] parameters) throws ... {
    ...
    return (T) SomeClass.class.getDeclaredMethod(methodName, parameterTypes).invoke(binding, parameters);
} 
```

所以它不会产生警告

```
warning: [unchecked] unchecked cast
        return (T) SomeClass.class.getDeclaredMethod(methodName, parameterTypes).invoke(binding, parameters);
required: T
found:    Object
where T is a type-variable:
T extends Object declared in method <T>callMethod(String,Object[]) 
```

我的意思是 no-SupressWarnings 解决方案。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-02T10:40:41.703

我认为你必须接受这种`@SuppressWarnings(...)`方法，因为该[`invoke()`方法](http://docs.oracle.com/javase/6/docs/api/java/lang/reflect/Method.html#invoke%28java.lang.Object,%20java.lang.Object...%29)返回一个`Object`. 请记住，泛型在运行时被擦除，而反射在运行时发生......

干杯，

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-01-02T10:40:28.397

编译器无法在编译时确定您在运行时选择的方法将具有 T 的返回类型。您只能在编译时抑制警告。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2013-01-02T11:01:22.830

正如彼得劳里[指出的那样](https://stackoverflow.com/a/14120586/697449)：

> 编译器无法在编译时确定您在运行时选择的方法的返回类型为`T`.

我会更进一步，说这`callMethod`根本不应该是一个通用方法。由于调用者通过将其名称作为字符串传递来决定调用什么方法，因此该方法应该只是返回`Object`- 就像`invoke`- 并强制调用站点进行强制转换。

不要使用`@SuppressWarnings`- 这里没有办法证明它是合理的。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2013-01-02T10:45:37.140

为此，您必须在方法参数中声明结果类型。

```
public <T> T callMethod(Class<T> resultType, String methodName, Object[] parameters) {

Object result = SomeClass.class.getDeclaredMethod(methodName, parameterTypes).invoke(binding, parameters);

if(resultType.isInstance(result)) {
  return resultType.cast(result);
}

throw new ClassCastException("Invalid result type");

} 
```

为什么一定要？

请参阅 Peter L. 的答案。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-01-02T10:39:07.323

您还没有使用`@SuppressWarnings("unchecked")`注释。

`@SuppressWarnings("unchecked")`只能应用于对象的声明，这将起作用：

# c# - 当您在 C' MVC 中的 ViewData["country"] 中存储列表时如何选择选定的值

> ID：14120533
> 
> 赞同：0
> 
> 时间：2013-01-02T10:36:34.093
> 
> 标签：c#, model-view-controller, viewdata, selectedvalue, html-select

我存储了列表`ViewData["country"]`，我想列出这个，但也有一个选定的值。我目前有

```
@Html.DropDownList("ddlCountry", (IEnumerable<SelectListItem>)ViewData["country"], new { @style = "Width:250px" }) 
```

但是，这只是将它们全部列出并默认选择第一个。我希望它选择用户设置为其帐户的国家/地区，该帐户存储在`@Model.Country`
我该怎么做？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-02T10:43:52.537

```
SelectListItem sli = ((IEnumerable<SelectListItem>)ViewData["country"]).AsQueryable().Where(x => x.Value == Model.Country).FirstOrDefault();
if (sli != null) {
    sli.Selected = true;
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-05-17T20:01:43.117

我们正在做类似的事情......

```
<%= Html.DropDownList("dealerIds" , new List<SelectListItem>(((List<Company.SPPC.MVC.DealerId>)ViewData["dealerIds"]).Select(i => new SelectListItem() { Value = i.Key, Text = i.Description }).ToList())
                                , new { tabloop = "", id = "ddlDealerIds" })%> 
```

也许尝试：

```
@Html.DropDownList("ddlCountry",((IEnumerable<SelectListItem>)ViewData["country"]).Select(i => new SelectListItem() { Value = i.Country}, new { @style = "Width:250px" }) 
```

# maven - String[] 类型的 Maven 参数的语法是什么

> ID：14120535
> 
> 赞同：10
> 
> 时间：2013-01-02T10:36:36.067
> 
> 标签：maven, syntax, parameter-passing, arrays

例如，Maven 编译器插件中的[annotationProcessors](http://maven.apache.org/plugins/maven-compiler-plugin/compile-mojo.html#annotationProcessors)参数需要一个 String[] 作为参数。

Maven中字符串数组的语法是什么？

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2013-01-02T10:45:34.387

我的头顶数组是这样处理的：

```
<annotationProcessors>
    <annotationProcessor>com.example.AP1</annotationProcessor>
    <annotationProcessor>com.example.AP2</annotationProcessor>
</annotationProcessors> 
```

（ apache maven-users 邮件列表上的一篇旧[帖子支持这一点）。](http://mail-archives.apache.org/mod_mbox/maven-users/201012.mbox/%3CAANLkTimijzkLB3xgd1-BUZiK-mchqpRYrO_OS_gy8tuk@mail.gmail.com%3E)

# xml - Spring托管的非静态工厂创建的bean

> ID：14120536
> 
> 赞同：1
> 
> 时间：2013-01-02T10:36:37.027
> 
> 标签：xml, spring, factory

我有一些 Spring 托管类（通过 xml 配置），其中一个是 SessionFactory，它被注入到另一个 Spring 托管类中。每当这个类需要一个新的 Session 时，它就会在 SessionFactory 上调用 createSession。

但是，除非我弄错了，否则这意味着 Sessions 本身不是 Spring 管理的，这是有问题的，因为它们有一些 @Transactional 方法，这些方法要求 bean 由 Spring 管理。

我一直在阅读 FactoryBeans，但我不确定如何做到这一点的最佳方法是，尤其是我的 createSession 方法需要一个参数，而 FactoryBean.getObject() 没有。

我可以使用 getObject 然后手动将参数设置得更高，但如果可能的话，我想在工厂中强制设置。

任何人都可以帮忙吗？提前致谢。下面是一个简化的例子。

```
public class SessionFactory {

    public final Session createSession(String username){
        Session session = new SessionImpl(username);
        return session;
    }

}

public class SessionImpl implements Session{

    private String username;

    @Override
    @Transactional
    public void doSomething(){
        // Does something
    }

    public void setUsername(String username){
        this.username = username;
    }

    public String getUsername(){
        return username;
    }

}

public class Service {

    private SessionFactory sessionFactory; // Set by Spring through xml config

    public void doSomethingServicy(){

    }

    public void setSessionFactory(SessionFactory sessionFactory){
        this.sessionFactory = sessionFactory;
    }

} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-02T10:39:21.350

我会说您将 @Transactional 注释放在错误的位置。

不是 Session 应该是事务性的；它应该应用于满足您的用例的基于接口的服务方法。这是典型的 Spring 习语。我建议遵循它。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-04T13:53:24.853

我通过在 Spring 中创建工厂 bean 并使用工厂 bean 和工厂方法声明一个原型范围的 Session 对象来解决它，如下所示：

```
<bean id="sessionFactory" class="com.SessionFactory" >
        <property name="dependencyA" ref="dependencyA" />
        <property name="dependencyB" ref="dependencyB" />
</bean>

<bean id=session" class="com.SessionImpl" factory-bean="sessionFactory" factory-method="createSession" scope="prototype" /> 
```

然后在需要时在代码中检索新实例：

```
Session session = (Session) applicationContext.getBean(SpringConstants.SESSION_BEAN_NAME, username); 
```

这里用户名是`Object...`方法参数的一部分，它构成了传递给工厂`createSession`方法的参数

我很欣赏程序的结构可能会更好，但考虑到代码的限制，它很好地解决了问题。

# linux - 锁定通过 FTP 打开的文件？

> ID：14120538
> 
> 赞同：1
> 
> 时间：2013-01-02T10:36:55.893
> 
> 标签：linux, ftp, filelock

我想锁定通过 FTP 打开的文件，所以一旦文件被编辑（在 OSX 中安装的 FTP 文件夹上），其他人就不能： - 保存它（必要） - 打开它（可选）

有没有人有关于如何做到这一点的任何提示？我知道这可能是骗人的，因为当您打开文件时，它只是将其复制到本地，然后重新上传。

# javascript - 如何在 JavaScript 或 jQuery 中获取图像的完整相对路径

> ID：14120543
> 
> 赞同：0
> 
> 时间：2013-01-02T10:37:26.503
> 
> 标签：javascript, jquery, html

我想从客户端和服务器发出图像。在本地机器上运行 nodejs 代码的服务器端加载图像很容易。那么这可以通过获取相对路径来修改吗？如果是这样，必须如何使用 javascript 或 jquery 完成编码。

```
<script>
var url = 'http://localhost:5151';
var socket = io.connect(url);
function image()
{

alert($('input[type="file"]')[0].files[0].name);

url=$('input[type="file"]')[0].files[0].name;

}
</script>
</body>
</html> 
```

这是片段。当我从本地服务器上传图像时，它会上传图像。使用上面提到的 url 的客户端计算机时也是如此。它不会查看图像的整个路径。这样就不会上传了。我怎么解决这个问题？

# asp.net - 如果我在 sql 字段中插入查询，这很危险

> ID：14120544
> 
> 赞同：1
> 
> 时间：2013-01-02T10:37:38.297
> 
> 标签：asp.net, sql, sql-server-2008

这不是sql注入

例如，假设用户在网络表单中填写我的表单应用程序，在表单的一个字段中用户写入（从用户中选择 *）或编写危险的 sql 脚本并发送数据和我的数据库中设置的所有内容，因此我在表中的记录，例如

```
编号 | 标题 | 描述
--------------------
1 | 第一 | 从用户中选择 *

```

如何保护它？或者通常这是危险的？tnx

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-02T10:39:07.640

> 这不是sql注入

这是[SQL 注入](http://en.wikipedia.org/wiki/SQL_injection)

> 如何保护它？或者通常这是危险的？

因为你已经标记了 asp.net，所以总是使用参数化查询。
请参阅：[将参数化查询与 SqlDataSource (C#)](http://www.asp.net/web-forms/tutorials/data-access/accessing-the-database-directly-from-an-aspnet-page/using-parameterized-queries-with-the-sqldatasource-cs)和 C#[中的参数化 SQL 查询一起使用](http://johnhforrest.com/2010/10/parameterized-sql-queries-in-c/)

**编辑：** 由于评论中提到了关于实体使用的 OP。应考虑以下几点：

[防止 SQL 注入攻击。- 实体框架 - MSDN](http://msdn.microsoft.com/en-us/library/cc716760.aspx)

> LINQ to Entities 注入攻击：
> 
> 尽管查询组合在 LINQ to Entities 中是可能的，但它是通过对象模型 API 执行的。与 Entity SQL 查询不同，LINQ to Entities 查询不是通过使用字符串操作或串联组成的，它们不易受到传统 SQL 注入攻击的影响。

# windows - 如果不成功则暂停命令而不是自动关闭

> ID：14120551
> 
> 赞同：1
> 
> 时间：2013-01-02T10:38:12.300
> 
> 标签：windows, batch-file, command

假设我想复制文件或运行程序，但找不到文件或位置。发生此类问题时，如何让我的计算机暂停命令窗口？我制作了一个批处理文件来将文件复制到另一个位置，还可以运行程序。

任何帮助将不胜感激。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-02T11:49:02.217

在您的批处理脚本中，用于`xcopy`执行实际复制，而不是`copy`命令 - `xcopy`，与 不同`copy`，根据复制结果返回错误代码，这些代码在备注部分中[记录](http://technet.microsoft.com/en-us/library/bb491035.aspx)。

正如 Aleksandr 提到的，您可以使用错误代码作为脚本的一部分来暂停错误。假设您想暂停所有错误，您可以编写如下脚本：

```
xcopy /HECY <source> <destination>
if %ERRORLEVEL% NEQ 0 pause 
```

显然，您需要将上面的 和 分别替换为您从中复制的位置和复制到的位置。

/HECY 开关只是一个示例，但在这种情况下可用于指示 xcopy 复制隐藏文件、递归目录以及自动覆盖目标中的文件（如果存在）。您可以根据您的特定需求调整这些。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-02T10:42:51.117

检查错误代码，如果不为零则暂停

# iphone - 在 UIWebView 中显示特定的布局

> ID：14120553
> 
> 赞同：0
> 
> 时间：2013-01-02T10:38:15.420
> 
> 标签：iphone, ios, ipad

有什么方法可以在 UIWebView 中显示网站的特定布局？例如在 www.google.com 中。我们可以在 UIWebView 中仅显示 Google 图像，而不是显示页面的所有内容，如搜索栏、搜索按钮等。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-02T10:40:37.550

不 这是不可能的。当您在 UIWebView 上调用 www.google.com 时，您正在应用中显示网页。而且您对内容没有任何控制权。

# html - 如何在表格单元格周围创建粗体/“光标”边框？

> ID：14120554
> 
> 赞同：0
> 
> 时间：2013-01-02T10:38:18.447
> 
> 标签：html, css, css-tables

我需要一个可以在表格中的两个单元格之间移动的光标。这是 jsFiddle：http: [//jsfiddle.net/KNc5u/](http://jsfiddle.net/KNc5u/)

如果单击表格，光标将在选择整个单元格、选择单元格底部和顶部之间循环。

如您所见，表格在光标移动时“跳跃”，因为边框宽度发生了变化。这很丑陋。我怎样才能防止这种情况？

约束：

*   光标必须为 2 像素宽（不是 1 也不是 3）
*   纯 CSS 优先
*   请不要添加额外的 HTML 元素（我可以通过`div`用 1 像素白色边框包裹每个单元格来轻松做到这一点，但我正在寻找一种不会向 DOM 添加垃圾的解决方案）
*   CSS3 没问题
*   我可以忍受 IE10+ :-)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-02T11:33:39.900

正如您所说，您可以使用 css3，您可以使用 box-shadow：http: [//jsfiddle.net/KNc5u/10/](http://jsfiddle.net/KNc5u/10/)

此示例仅适用于现代浏览器，不使用任何[供应商前缀](http://peter.sh/experiments/vendor-prefixed-css-property-overview/)，如`-moz`或`-webkit`。如果您需要支持其他浏览器，您可以轻松地将这些前缀添加到现有的[box-shadow](https://developer.mozilla.org/en/docs/CSS/box-shadow)属性中。

随意更改颜色关键字以满足您的需求……</p>

```
td {
    text-align:center;
    border:1px solid blue;
    padding:1px 2px
}

.selected {
    display:block;
    border:none;
    box-shadow: inset 0 0 -2px 0 #000;
}

.selBottom {
    display:block;
    border:0;
    box-shadow: 0 0 black inset, 0 -2px red inset, 0 0 black inset, 0 0 black inset;
}

.selTop {
    display:block;
    border:0;
    box-shadow: 0 2px green inset, 0 0 black inset, 0 0 black inset, 0 0 black inset;
} 
```

## 更新

这是一个更新版本（恕我直言）：http: [//jsfiddle.net/KNc5u/13/](http://jsfiddle.net/KNc5u/13/)

但是，它应该可以解决您提供的标记的问题。请注意，有一个提示：此示例仅适用于`td`与您的`selected`、`selBottom`和`selTop`类的相似颜色的正确方式。

## 更新 2

现在左右支持：http: [//jsfiddle.net/KNc5u/15/](http://jsfiddle.net/KNc5u/15/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-02T10:43:23.487

使用 a`outline`而不是 a`border`并删除填充。

[http://jsfiddle.net/KNc5u/3/](http://jsfiddle.net/KNc5u/3/)

或者，更改单元格背景颜色以突出显示它，而不是使用轮廓。

编辑： Erp 这样就不会只做顶部/底部。事实证明，这是非常棘手的，而不是凌乱的。我在这里有一个很好的版本，使用带有工作光标的背景颜色（单击任何单元格）[http://jsfiddle.net/KNc5u/7/](http://jsfiddle.net/KNc5u/7/)

如果表格单元格是固定大小的，您也可以使用背景图像来提供不同类型的突出显示光标。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-02T10:56:52.760

您可以通过添加`padding`到`td`

```
td { border: 1px solid blue; padding:4px} 
```

**[演示](http://jsfiddle.net/KNc5u/6/)**

# android - java.lang.OutOfMemoryError：位图大小超出 VM 预算

> ID：14120556
> 
> 赞同：1
> 
> 时间：2013-01-02T10:38:36.167
> 
> 标签：android, facebook-android-sdk

在我的应用程序中，我正在显示 facebook 墙流，我正在使用*Facebook Graph API*来获取每个帖子的数据。

有时当我快速滚动列表时，我会得到`OutOfMemoryerror`. 我真的不知道 facebook 应用程序使用什么技术来显示墙数据。

我可以知道他们使用的技术吗？

我以页面形式从 Facebook 获取数据。所以，我一次显示页面中的所有数据。*正如我们在facebook 应用程序*中看到的那样，我怎样才能只显示有限的数据？

```
class doInBack extends AsyncTask<URL, Integer, Long>
    {
        protected void onPreExecute() 
        { if(boolDialog){
            dialog=MyProgressDialog.show(Wall.this, null,null);
        }
        }
//      currentweb= webserv;
        @Override
        protected Long doInBackground(URL... arg0) {

            currentweb=webserv;

            Log.e("hi","doback parsing");

            try
            {   
            wallres=UrltoValue.getValuefromUrl(currentweb);
            Log.i("wallrespages",wallres);

                JSONObject jobj1=new JSONObject(wallres);

                JSONObject jobj2=jobj1.getJSONObject("paging");
                webserv= jobj2.getString( "next");

                 jsonArray = jobj1.getJSONArray("data");

                 for(int i=0;i<jsonArray.length();i++){

                    jsonObject = jsonArray.getJSONObject(i);

                    if(jsonObject.has("message")||jsonObject.has("picture")) {

                        try{

//                        msg[j]=jsonObject.getString("message");
                            if(jsonObject.has("message"))
                            {

                                msg.add(jsonObject.getString("message"));   
                            }
                            else{
                                msg.add("");    
                            }
                        }
                        catch(Exception e){
                            e.printStackTrace();
                        }

                        try{

//                            msg[j]=jsonObject.getString("message");
                                if(jsonObject.has("picture"))
                                {
                                    String firstpicture=jsonObject.getString("picture");
                                    String secondpicture=firstpicture.replaceAll("_s.jpg", "_n.jpg");
                                     Log.e("picurl",secondpicture);
                                     pic.add(secondpicture);

                                }
                                else{
                                    pic.add("");
                                }
                            }
                            catch(Exception e){
                                e.printStackTrace();
                            }                           objid.add(jsonObject.getString("id"));

                          JSONObject jobj=jsonObject.getJSONObject("from");
                           name.add(jobj.getString("name"));
                           id.add(jobj.getString("id"));

                           if(jsonObject.getString("type").equals("checkin")){
                               name.set(i,jobj.getString("name")+" "+"is at"+" "+jsonObject.getString("name"));
                            }

                           profimg.add("http://graph.facebook.com/"+id.get(j)+"/picture?type=square");

                           JSONObject commentjobj=jsonObject.getJSONObject("comments");
                            comment.add(commentjobj.getString("count"));

                            if(jsonObject.has("likes")) {

                                   Log.e("likeornot","likre");
                                JSONObject likesjobj=jsonObject.getJSONObject("likes");
                                likes.add(likesjobj.getString("count"));

                               String postid=jsonObject.getString("id");
//                                  graph_or_fql = "fql";
                                    String query = "SELECT likes.user_likes FROM stream WHERE post_id = \'" + postid + "'";

//                                                        Log.d("finalThreadID", finalThreadID);
                                    Bundle params = new Bundle();
                                    params.putString("method", "fql.query");
                                    params.putString("query", query);
//                                                        Utility.mAsyncRunner.request(null, params, new LikesListener());

                                String fqlResponse = Login.mFacebook.request(params);

                                   System.out.println(fqlResponse);

                                   JSONArray JOLikeresponse=new  JSONArray(fqlResponse);

                                  if(JOLikeresponse.length()!=0){
                                   JSONObject JOLikeObject = JOLikeresponse.getJSONObject(0);

                                if ( JOLikeObject.has("likes")) {
                                    String optlike,optlikesarray;
                                    JSONObject optLikes=JOLikeObject;
                                    JSONArray optLikesArray;
                                    try{

                                         optLikes = JOLikeObject.getJSONObject("likes");
                                         optlike="like";
                                    }
                                    catch(Exception e){

                                         optlike="unlike";
                                    }
//                                  
                                    if(optlike.equals("like")){

                                    if (optLikes.has("user_likes")) {
                                        String getUserLikes = optLikes.getString("user_likes");

                                        if (getUserLikes.equals("true")) {
                                            like_or_unlike.add("Unlike");
                                        } else if (getUserLikes.equals("false")) {
                                            like_or_unlike.add("Like");
                                        }
                                    }
                                    else {

                                           like_or_unlike.add("Like");
                                    }
                                } else {

                                       like_or_unlike.add("Like");
                                }

                                }
                                //if likes object is not there in like response
                                else {

                                       like_or_unlike.add("Like");
                                }
                                  }

                               //if the like response Array length is zero   
                                else {

                                       like_or_unlike.add("Like");
                                }//FQL query object

                            }

                    //If likes are not there        
                               else{
                                   likes.add("0");
                                   like_or_unlike.add("Like");
                               }

                            weburl.add(currentweb);

                           Log.e("comment", comment.get(j));
//                         bitmap[j]= getBitmapFromURL(profimg[j]);
//                         profimg1.setImageBitmap(bitmap[j]);
//                         imageLoader.DisplayImage( profimg[j].replace(" ", "%20"), profimg1) ;
//                         System.out.println( bitmap[j]);
//                         j++;
//                          f=j;

                           String getCreatedTime = jsonObject.getString("created_time");
//                         long finalTimeStamp = Long.valueOf(getCreatedTime);
//                         SimpleDateFormat dateFormatter = new SimpleDateFormat("yyyy-MM-dd'T'hh:mm:ssZ");
//                         String timestamp = dateFormatter.format(new Date(finalTimeStamp * 1000L));

                           SimpleDateFormat formatter = getDateFormat();
                           ParsePosition pos = new ParsePosition(0);
                           long then = formatter.parse(getCreatedTime, pos).getTime();
                           long now = new Date().getTime();

                           long seconds = (now - then)/1000;
                           long minutes = seconds/60;
                           long hours = minutes/60;
                           long days = hours/24;

                           String friendly = null;
                           long num = 0;
                           if (days > 0) {
                               num = days;
                               friendly = days + " day";
                           } else if (hours > 0) {
                               num = hours;
                               friendly = hours + " hour";
                           } else if (minutes > 0) {
                               num = minutes;
                               friendly = minutes + " minute";
                           } else if(seconds>0) {
                               num = seconds;
                               friendly = seconds + " second";
                           }
                           else{
                               friendly = "few seconds";
                           }
                           if (num > 1) {
                               friendly += "s";
                           }
                           String postTimeStamp = friendly.toLowerCase() + " ago";
                           Log.e("date",postTimeStamp );
                           date.add(postTimeStamp);

                           j++;
                    }
                    }

//                if(jsonObject.getString("message")!=""){
//                    msg[i]=jsonObject.getString("message");
//                     
//                    JSONObject jobj=jsonObject.getJSONObject("from");
//                     name[i]= jobj.getString("name");
//                     id[i]=jobj.getString("id");
//                     Log.e("msg",msg[i]);
//                     Log.e("name",name[i]);
//                     Log.e("id",id[i]);
//                     }
//                       
//                   }

            }

            catch(Exception e)
            {
                e.printStackTrace();
            }

            return null;
        }

        protected void onPostExecute(Long result) { 

            try
            {   if(addFooter){
                 listView.addFooterView(footerView);
            }

                addFooter=false;
                System.out.println(scroll);
                if(scroll){

                 adapter=new MySimpleArrayAdapter(Wall.this,R.layout.wall,pic,name,msg,id,profimg,comment,objid,weburl,likes, like_or_unlike,date);
                listView.setAdapter(adapter);
                  listView.postDelayed(new Runnable() {

//                      @Override
                        public void run() {

                            listView.onRefreshComplete();
                        }
                    }, 2000);
                if(boolDialog){
                dialog.dismiss();
                }
                }

         else{
//           adapter=new MySimpleArrayAdapter(Wall.this,R.layout.wall,pic,name,msg,id,profimg,bitmap,comment,objid,weburl);
             adapter.notifyDataSetChanged();
              listView.postDelayed(new Runnable() {

//                  @Override
                    public void run() {

                        listView.onRefreshComplete();
                    }
                }, 2000);
            }
                if(boolDialog){
                dialog.dismiss();
                }
            }

            catch(Exception e)
            {
                e.printStackTrace();
                if(boolDialog){
                    dialog.dismiss();
                    }
            }
            boolDialog=false;       
    }

    }

    private static SimpleDateFormat getDateFormat() {
        return new SimpleDateFormat("yyyy-MM-dd'T'hh:mm:ssZ");
    } 
```

# css - 在具有不同属性的同一 CSS 文件中应用 *:first-child +html

> ID：14120559
> 
> 赞同：1
> 
> 时间：2013-01-02T10:38:47.603
> 
> 标签：css

我有一个通用的 CSS 文件，两个页面都在引用它。

引用此通用 CSS 的页面需要以下 CSS，

```
*:first-child + html .rich-tabpanel {
   margin-left:-13px;        // Note : Its 13px here
} 
```

引用此通用 CSS 的其他页面需要以下 CSS，

```
*:first-child + html .rich-tabpanel {
   margin-left: 0px;         //Note : Its 0px here 
} 
```

HTML代码如下，

```
<table class="rich-tabpanel"> 
```

我只有在 IE7 中才有这个问题，它没有采用下面的代码（我不知道为什么），

```
.ie7 .rich-tabpanel {
   margin-left: 13px; //OR 0px depending on the page
} 
```

所以，我删除了上面的代码，只使用了`*:first-child + html .rich-tabpanel`代码

如何`margin-left`在同一个通用 CSS 文件中拥有两个不同的`rich-tabpanel`属性？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-02T12:01:43.033

从那一刻起`*:first-child +html .rich-tabpanel`就是一个黑客，它的[特异性](http://www.w3.org/TR/CSS21/cascade.html#specificity)是未知的。`.ie7 .rich-tabpanel`具有特定性 0020，因此该 hack 可能在其之上具有特定性。更改更改特定性的选择器`.ie7 .rich-tabpanel`，`html .ie7 .rich-tabpanel`然后应用规则。我不保证这是一个特殊性问题，但无论如何更改选择器都是可行的。

**演示：http:** [//jsfiddle.net/xWX2R/1/](http://jsfiddle.net/xWX2R/1/)

无论如何，我建议您使用[条件注释](http://msdn.microsoft.com/en-us/library/ms537512%28v=vs.85%29.aspx)而不是 Internet Explorer 的 hacks。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-02T11:42:36.500

首先，我很困惑为什么要应用这种 CSS 样式：

```
*:first-child +html .rich-tabpanel{
    margin-left:-13px;        // Note : Its 13px here
} 
```

具体来说，`*:first-child +html .rich .rich-tabpanel1`甚至是什么意思？

当我读到它说'选择所有元素时，选择第一个子元素，然后选择相邻的标签，然后选择 .rich-tabpanel1。肯定有更好的方法来做到这一点：

```
.rich-tabpanel1 { 
  //code 
} 
```

您的代码没有任何问题。一个页面可以引用第一个代码块，而第二个页面可以引用另一个代码块。但是这段代码：

```
.ie7 .rich-tabpanel {
   margin-left: 13px; //OR 0px depending on the page
} 
```

`.ie7`除非您在 html 中专门添加类，否则不起作用。您是否使用服务器端脚本将该类添加到 html 标记中？目的更好的方法是：

```
<!--[if IE]>
  <style type="text/css">@import url("ie.css");</style>
<![endif]--> 
```

如果它是一个 IE 浏览器，这个 CSS 文件将被获取并用于覆盖 css 属性。这使您可以更好地控制样式。

# mysql - 选择 mysql 中新用户和返回用户的总票数

> ID：14120560
> 
> 赞同：1
> 
> 时间：2013-01-02T10:38:56.700
> 
> 标签：mysql, select

我有 2 张桌子：投票和用户。我想在当天的总票数旁边显示新注册用户的总票数（不是总票数）。

查询的时间范围可以是全部，我可以稍后添加从 - 到时间范围。

因此，如果我每个日期 X 有 10 票，我想知道新用户生成了多少票，返回用户生成了多少，以及有多少新的和返回的投票（* 还包括未投票的新用户）。

**投票：**

```
id | vote | user_id | created_at
1  | 30   | 28      | 2012-06-10
1  | 12   | 15      | 2012-06-10
1  | 30   | 28      | 2012-06-10
... 
```

**用户：**

```
users_ id | created_at
28        | 2012-06-01
29        | 2012-06-03
30        | 2012-06-10
... 
```

我希望得到的结果是：

```
Date | total votes | votes for new | votes for returning | total new users | total returning users 
```

谢谢！

----- 当前代码：

```
 SELECT
      DATE(created_at) AS Date,
      SUM(CASE WHEN `Type` = 'Votes' THEN 1 ELSE 0 END) AS 'Total Votes',
      SUM(CASE WHEN `Type` = 'Users' THEN 1 ELSE 0 END) AS 'Total Users'
    FROM
    (
        SELECT created_at, 'Votes' `Type` FROM votes
        UNION ALL
        SELECT created_at, 'Users'        FROM users
    ) t
    GROUP by DATE(created_at)
    ORDER by DATE(created_at) DESC 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-02T14:17:53.750

我会考虑在几个查询中分解它。如果我理解你的正确，这应该是你正在寻找的。

所有投票日期：

```
SELECT created_at AS date, COUNT(*) AS totalvotes FROM votes GROUP BY created_at; 
```

新用户公关日期的所有投票

```
SELECT v.created_at AS date, COUNT(*) AS newuservotes FROM votes v INNER JOIN users u WHERE v.user_id = u.user_id AND v.created_at = u.created_at GROUP BY v.created_at; 
```

老用户投票日期

```
The two numbers subtracted 
```

如果您想在一个查询中完成全部内容：

```
SELECT totvotes.date AS date, totvotes.totalvotes AS totalvotes, IFNULL(newvotes.newuservotes, 0) AS newuservotes, totvotes.totalvotes-IFNULL(newvotes.newuservotes, 0) AS olduservotes
FROM 
(
SELECT created_at AS date, COUNT(*) AS totalvotes FROM votes GROUP BY created_at
) totvotes
LEFT JOIN
(
SELECT v.created_at AS date, COUNT(*) AS newuservotes FROM votes v INNER JOIN users u WHERE v.user_id = u.user_id AND v.created_at = u.created_at GROUP BY v.created_at
) newvotes ON totvotes.date = newvotes.date 
```

用 mysql> select * from users 测试；

```
+---------+------------+
| user_id | created_at |
+---------+------------+
|       1 | 2012-06-01 |
|       2 | 2012-06-02 |
|       3 | 2012-06-03 |
+---------+------------+
3 rows in set (0.00 sec) 
```

mysql> 从投票中选择 *；

```
+----+------+---------+------------+
| id | vote | user_id | created_at |
+----+------+---------+------------+
|  1 |   10 |       1 | 2012-06-01 |
|  2 |   20 |       1 | 2012-06-10 |
|  3 |   30 |       2 | 2012-06-02 |
|  4 |   40 |       2 | 2012-06-10 |
+----+------+---------+------------+
4 rows in set (0.00 sec) 
```

结果：

```
+------------+------------+--------------+--------------+
| date       | totalvotes | newuservotes | olduservotes |
+------------+------------+--------------+--------------+
| 2012-06-01 |          1 |            1 |            0 |
| 2012-06-02 |          1 |            1 |            0 |
| 2012-06-10 |          2 |            0 |            2 |
+------------+------------+--------------+--------------+ 
```

类似的东西可以用于“从未投票”的用户等等

我不确定您对 SQL 的精通程度，所以如果有任何问题，请发表评论，我会更新答案。

# jquery - 如何遍历表单jQuery的所有元素

> ID：14120564
> 
> 赞同：49
> 
> 时间：2013-01-02T10:39:06.523
> 
> 标签：jquery, loops

我只是想知道循环遍历表单的所有子元素的最佳方式是什么？我的表单包含输入和选择元素。

目前我有：

```
success: function(data) {
                $.each(data.details, function(datakey, datavalue) {
                    $('#new_user_form > input').each(function(key, value) {
                        if($(this).attr('id') == datakey) {
                            $(this).val(datavalue);
                        }
                    });
                });
            } 
```

这只循环遍历表单的输入元素，我也想包含选择元素：

我试过了：

```
$('#new_user_form > input, #new_user_form > select').each(function(key, value) { 
```

但这不起作用。有谁知道为什么会发生这种情况？谢谢！

* * *

## 回答 #1

> 赞同：84
> 
> 时间：2013-01-02T10:44:32.307

从 jQuery [:input 选择器页面](https://api.jquery.com/input-selector/)：

> 因为 :input 是 jQuery 扩展而不是 CSS 规范的一部分，所以使用 :input 的查询不能利用原生 DOM querySelectorAll() 方法提供的性能提升。为了在使用 :input 选择元素时获得最佳性能，首先使用纯 CSS 选择器选择元素，然后使用 .filter(":input")。

这是最好的选择。

```
$('#new_user_form *').filter(':input').each(function(){
    //your code here
}); 
```

* * *

## 回答 #2

> 赞同：27
> 
> 时间：2013-08-16T09:48:41.133

纯 JavaScript 并不难：

```
for(var i=0; i < form.elements.length; i++){
    var e = form.elements[i];
    console.log(e.name+"="+e.value);
} 
```

注意：因为 form.elements 是一个对象 for-in 循环不能按预期工作。

答案在[这里找到（由 Chris Pietschmann）](http://pietschsoft.com/post/2006/06/01/JavaScript-Loop-through-all-elements-in-a-form)，记录[在这里 (W3S)](http://www.w3schools.com/jsref/dom_obj_form.asp)。

* * *

## 回答 #3

> 赞同：19
> 
> 时间：2013-01-02T10:57:34.743

```
$('#new_user_form').find('input').each(function(){
   //your code here
}); 
```

* * *

## 回答 #4

> 赞同：13
> 
> 时间：2015-03-18T10:33:25.050

取自#jquery Freenode IRC 频道：

```
$.each($(form).serializeArray(), function(_, field) { /* use field.name, field.value */ }); 
```

感谢频道上的@Cork。

* * *

## 回答 #5

> 赞同：8
> 
> 时间：2015-08-12T09:06:52.650

我正在使用：

```
$($('form').prop('elements')).each(function(){
    console.info(this)
}); 
```

它看起来很难看，但对我来说，它仍然是获取所有元素的更好方法`jQuery`。

* * *

## 回答 #6

> 赞同：4
> 
> 时间：2016-12-20T18:02:50.200

我发现了这个简单的 jquery 片段，可以方便地选择我想要使用的选择器类型：

* * *

```
$("select, input").each(function(){
     // do some stuff with the element
}); 
```

* * *

## 回答 #7

> 赞同：3
> 
> 时间：2013-01-02T10:52:41.560

如果你这样做会发生什么： -

```
$('#new_user_form input, #new_user_form select').each(function(key, value) { 
```

参考**[现场演示](http://jsfiddle.net/SivaCharan/5PktA/)**

* * *

## 回答 #8

> 赞同：1
> 
> 时间：2013-01-02T10:45:14.253

`$('#new_user_form :input')`应该是你前进的方向。注意选择器的省略`>`。有效的 HTML 表单不允许输入标记是表单标记的直接子级。

* * *

## 回答 #9

> 赞同：0
> 
> 时间：2018-10-18T15:19:44.257

> 在表单提交中执行两个 jQuery 序列化程序之一，以获取具有提交值的所有输入。

```
var criteria = $(this).find('input,select').filter(function () {
    return ((!!this.value) && (!!this.name));
}).serializeArray();

var formData = JSON.stringify(criteria); 
```

> serializeArray() 将产生一个名称和值的数组
> 
> 0：{名称：“OwnLast”，值：“Bird”}
> 1：{名称：“OwnFirst”，值：“Bob”}
> 2：{名称：“OutBldg[]”，值：“PDG”}
> 3：{名称：“OutBldg[]”，值：“PDA”}

```
var criteria = $(this).find('input,select').filter(function () {
    return ((!!this.value) && (!!this.name));
}).serialize(); 
```

> serialize() 以标准 URL 编码表示法创建文本字符串
> 
> "OwnLast=Bird&OwnFirst=Bob&OutBldg%5B%5D=PDG&OutBldg%5B%5D=PDA"

# elasticsearch - 无法使用 Elasticsearch 搜索父子文档？

> ID：14120569
> 
> 赞同：0
> 
> 时间：2013-01-02T10:39:24.577
> 
> 标签：elasticsearch

我在 Elasticsearch 中索引了一个子文档，如下所示：

```
{
 _parent: chow-demo
 _index: prototype_2013.01.02
 _type: chow-clfg
 _id: l7jvEgD-SrG-Ws_9ab52IA
 _score: 11.600378
 _source: {
  chow-clfg: {
  @type: chow-clfg
  clfg: Cg5iUlAvU9IIAAAA8Rg
  @timestamp: 2013-01-02T10:15:00.000Z
  count: 1
  }
 }
} 
```

父级至少有 2 条记录具有**clfg**作为通用标识符，如下所示：

```
{
 _index: "prototype_2013.01.02",
 _type: chow-demo, 
 clfg: Cg5iUlAvU9IIAAAA8Rg,
 obid: 97066795
} 
```

但是，当我使用“has_child”查询时，我没有得到任何结果：

```
curl -XGET "localhost:9200:/prototype_2013.01.02/chow-demo/_search"
{
 "query": {
  "has_child": {
   "type": "chow-clfg",
   "query": {
    "term": {
      "clfg": "Cg5iUlAvU9IIAAAA8Rg"
    }
   }
  }
 }
} 
```

但是，当我单独查询文档时，返回了正确的结果。为什么呢？父路由是否应该能够使用父字段使用子路由来识别结果？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-02T11:16:05.630

当孩子被索引时，它的“_parent”字段应该包含父母的id（不是父母的类型，因为它似乎是你的情况）。

# jquery - JQuery 和 Knockout 不能一起工作

> ID：14120571
> 
> 赞同：0
> 
> 时间：2013-01-02T10:39:29.180
> 
> 标签：jquery, knockout.js

我在绑定 JQuery 和 Knockout 时遇到问题！

我不知道我的问题在哪里！也许你们中的任何人都可以看看这个[小提琴](http://jsfiddle.net/2Ed98/1/)

这就是我尝试进入下一个 Knockout ViewModel 的方式：

```
 masterViewModel.loginVM(null);
  masterViewModel.startVM(new StartVM()); 
```

那是我的 MasterViewModel

```
 var masterViewModel = {

            loginVM: ko.observable(),
            startVM: ko.observable(),
        }; 
```

如果不使用 JQuery mobile（绑定到我的 ASP.NET MVC4 项目中）它工作正常

这是相同的小提琴，只是没有使用 jQuery：[fiddle] [http://jsfiddle.net/B2A5f/](http://jsfiddle.net/B2A5f/)）

当我在 ASP.NET MVC4 中尝试此操作时，它无法正常工作！

```
<form action="" data-bind=" template:{ 'if': loginVM, data: loginVM }"> 
 //SomeCode
</form>

<form action="" data-bind=" template:{ 'if': startVM, data: startVM}"> 
//Some Code
</form>

<script type="text/javascript">

        var masterViewModel = {

            loginVM: ko.observable(),
            startVM: ko.observable(),
            projektUnterbrechen: ko.observable(),
            logout : ko.observable(),
            projectStartVM: ko.observable()

        };

        var LoginVM = function () {
            var self = this;
            self.mandant = ko.observable();
            self.user = ko.observable();
            self.password = ko.observable();
            self.showDetails = function () {
                if ((self.user() == "Gregor") && (self.password() == "gregrech")) {
                    masterViewModel.loginVM(null);
                    masterViewModel.startVM(new StartVM());

                }
                else {
                    alert("Username oder Passwort falsch");
                }

            };
        };

        var StartVM = function () {
            self = this;
            //Um weiterzumachen muss man eingeloggt sein
            self.favoriten = ko.observableArray([
                {
                    projectName: "Favorit1"
                },
                {
                    projectName: "Favorit2"
                },
                {
                    projectName: "Favorit3"
                }
                ]);
            //Die zuletzt verwendeten Projekte
            self.zuletzt = ko.observableArray([
            {
                lastProjName: "Zuletzt1"
            },
            {
                lastProjName: "Zuletzt2"
            },
            {
                lastProjName: "Zuletzt3"
            }
            ]);
            self.showStart = function (projectName, data, event) {
                masterViewModel.projectStartVM(new ProjectStartVM(projectName));
                masterViewModel.startVM(null);
            };
        };
        masterViewModel.loginVM(new LoginVM());
        $(document).on('pageinit', function () {
            ko.applyBindings(masterViewModel);
        });

</script> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-02T10:47:04.617

而不是绑定：

```
<form action="" data-bind="template: { 'if': startVM, data: startVM } ">

<form action="" data-bind=" template:{ 'if': loginVM, data: loginVM }"> 
```

像这样，试试：

```
<form action="" data-bind="css: { hidden: startVM==null } ">

<form action="" data-bind="css: { hidden: loginVM ==null } "> 
```

当然隐藏在 CSS 中的是：

```
.hidden{ display:none; } 
```

这是用淘汰赛展示一件事或另一件事的现状方式。

在看到你的第二把小提琴后，我检查了你使用的是什么版本的淘汰赛——它是 1.2.0。所以，我所做的是用 2.2.0 [http://jsfiddle.net/2Ed98/2/](http://jsfiddle.net/2Ed98/2/)升级你的小提琴，它按预期工作。Knockout 在版本 1 的兼容性方面存在问题。

# actionscript-3 - AS3：向加载的 AS2 SWF 添加事件侦听器

> ID：14120574
> 
> 赞同：0
> 
> 时间：2013-01-02T10:39:45.343
> 
> 标签：actionscript-3, mouseevent, actionscript-2

我想要做的是 - 只需将外部 SWF 加载到我的 AS3 代码中。

然后我想在我的舞台上展示它——并且能够捕捉到 SWF 发生的“ROLL_OVER”、“ROLL_OUT”和“MOUSE_CLICK”事件，这意味着——我想知道用户何时将鼠标悬停在加载的 SWF 上以及何时他点击它。

如果我加载外部**AS3 SWF** - 一切正常，我可以成功跟踪事件。

如果我加载外部**AS2 SWF** - 在某些类型的 AS2 横幅中，我可以捕捉到事件，而在某些类型中 - 我不能。

需要注意的是，我无法控制加载的 SWF，也无法以不同的方式对它们进行编码。

我加载外部 SWF 的方式是这样的：

.

```
var loader = new Loader();
loader.contentLoaderInfo.addEventListener(Event.COMPLETE,onLoaded);
loader.load(new URLRequest(externalSwfURL));

function onLoaded(evt:Event):void
{
    // The reason I don't create the MovieClip like this is because I need to support 
    // both AS2 and AS3 that will be loaded, and loaded AS2 cannot be casted to 'MovieClip'
    //var mc:MovieClip = MovieClip(evt.target.content);  

    // This method allows me to load both external AS2 and AS3 SWF files
    var mc:MovieClip = new MovieClip();
    mc.addChild(loader);

    // Add the events that I want to track
    mc.addEventListener(MouseEvent.ROLL_OVER    , onMouseEnterSWF);
    mc.addEventListener(MouseEvent.ROLL_OUT    , onMouseLeaveSWF);
    mc.addEventListener(MouseEvent.CLICK    , onMouseClickSWF);

    mc.x = 100;
    mc.y = 100;

    stage.addChild(mc);
} 
```

.

我发现如果加载的 AS2 SWF 顶部有一个透明按钮（其中很多都有） - 那么鼠标事件不会被触发回我的 AS3 代码！它们以某种方式被“吞噬”在加载的 AS2 SWF 中，而不是冒泡。

如果我尝试加载具有透明按钮作为顶层的 AS3 SWF - 它可以工作，并且仍然将鼠标事件冒泡到我的 AS3 代码中。

谁能告诉我为什么会这样？

PS - 如果我加载一个没有透明按钮的 AS2 SWF 作为顶层 - 鼠标事件就会冒泡到我的 AS3 代码中。

这是一个指向 AS2 SWF 文件的链接，该文件具有阻止事件冒泡到 AS3 代码的“透明按钮”： [link to AS2 SWF](http://www.filedropper.com/jdatebanner-copy)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-02T14:33:31.900

ActionScript 2 在不同的虚拟机中运行，并且与 ActionScript 3 不兼容。两个 SWF 之间的通信甚至不容易，但只能在本地连接下工作。ActionScript 2 也没有事件系统，因此这是需要处理的第二部分。

-> 它不能像你期望的那样工作。

# javascript - 谷歌地图自动平滑移动椭圆

> ID：14120577
> 
> 赞同：0
> 
> 时间：2013-01-02T10:39:57.123
> 
> 标签：javascript, jquery, google-maps, google-maps-api-3

如何使用 Google Maps API v3 执行此操作：

1）平滑移动地图。我试试这个功能：

```
function move() {   
var latLng=map.getCenter();
var lat=latLng.lat();
var lng=latLng.lng();
var myLatlng1 = new google.maps.LatLng(lat,lng+(0.00009));
map.panTo(myLatlng1);
} 
```

并通过计时器调用

```
google.maps.event.addListener(map,'idle', function() {
setTimeout(move,500);
}); 
```

它工作，但非常间歇性。

2）如何设置圆（椭圆）运动？像这样[http://css-tricks.com/examples/Circulate/](http://css-tricks.com/examples/Circulate/)

# java - Java Web Start 控制台消失

> ID：14120580
> 
> 赞同：1
> 
> 时间：2013-01-02T10:40:02.710
> 
> 标签：java, jnlp, java-web-start

我是 Java Web Start 的新手。我有一个使用 CORBA 作为中间件的示例客户端-服务器应用程序。前端（客户端）使用 Java，后端（服务器）使用 C++。该应用程序使用 jar 和批处理文件运行和测试。现在我想在 Java Web Start 和 JNLP 中部署该应用程序。我通过创建 JNLP 文件和签名的 jar 来配置相同的内容。

现在众所周知，任何 CORBA 应用程序都需要一个域文件 (.cfg) 和一些 org.omg 类来通过 RPC 与服务器通信。

我不知道如何在我的 JNLP 中指定这些域文件名、路径、CORBA 类等。即便如此，我也无法确切了解什么配置将使 CORBA 应用程序在 Java Web Start 中正常工作，以便它也可以与服务器通信。所有 Orbix 罐子、IDL Stub 罐子都存在并签名。我将我的 JNLP 文件作为参考。实际上，我已经尝试将这些域文件和 CORBA 类添加为参数。但像往常一样它不起作用，在运行 JNLP 后，Java 控制台突然消失了。

CORBADemo.jnlp

```
?xml version="1.0" encoding="UTF-8"?>
<jnlp spec="1.0+" codebase="http://172.28.1.139:8400/Test_CORBA_App" href="CORBADemo.jnlp">
<information>
<title>CORBA Demo</title>
<vendor>Ushacomm</vendor>
</information>

<resources>
<j2se version="1.6+" href="http://java.sun.com/products/autodl/j2se"/>
<jar href="lib_6.3-Signed/UI_Fall_Test63.jar" main="true" download="eager" />
<jar href="lib_6.3-Signed/ConfigurationService.jar" download="eager" />
<jar href="lib_6.3-Signed/IDLStub.jar" download="eager" />
<jar href="lib_6.3-Signed/art-rt.jar" download="eager" />
<jar href="lib_6.3-Signed/art.jar" download="eager" />
<jar href="lib_6.3-Signed/atli2-rt.jar" download="eager" />
<jar href="lib_6.3-Signed/atli2.jar" download="eager" />
<jar href="lib_6.3-Signed/atli2_ip-rt.jar" download="eager" />
<jar href="lib_6.3-Signed/atli2_ip.jar" download="eager" />
<jar href="lib_6.3-Signed/atli2_ip_cio-rt.jar" download="eager" />
<jar href="lib_6.3-Signed/atli2_ip_cio.jar" download="eager" />
<jar href="lib_6.3-Signed/atli2_ip_nio-rt.jar" download="eager" />
<jar href="lib_6.3-Signed/atli2_ip_nio.jar" download="eager" />
<jar href="lib_6.3-Signed/atli2_tls-rt.jar" download="eager" />
<jar href="lib_6.3-Signed/atli2_tls.jar" download="eager" />
<jar href="lib_6.3-Signed/codeset.jar" download="eager" />
<jar href="lib_6.3-Signed/concurrency-rt.jar" download="eager" />
<jar href="lib_6.3-Signed/concurrency.jar" download="eager" />
<jar href="lib_6.3-Signed/ifc-rt.jar" download="eager" />
<jar href="lib_6.3-Signed/ifc.jar" download="eager" />
<jar href="lib_6.3-Signed/iiop.jar" download="eager" />
<jar href="lib_6.3-Signed/java_management_logging-rt.jar" download="eager" />
<jar href="lib_6.3-Signed/java_mgmt_plugin-rt.jar" download="eager" />
<jar href="lib_6.3-Signed/java_portable_interceptor-rt.jar" download="eager" />
<jar href="lib_6.3-Signed/management-rt.jar" download="eager" />
<jar href="lib_6.3-Signed/management.jar" download="eager" />
<jar href="lib_6.3-Signed/mgmt.jar" download="eager" />
<jar href="lib_6.3-Signed/omg-rt.jar" download="eager" />
<jar href="lib_6.3-Signed/omg.jar" download="eager" />
<jar href="lib_6.3-Signed/perf_logging.jar" download="eager" />
<jar href="lib_6.3-Signed/portable_interceptor.jar" download="eager" />
<property name="Dorg.omg.CORBA.ORBClass" value="com.iona.corba.art.artimpl.ORBImpl"/>
<property name="Dorg.omg.CORBA.ORBSingletonClass" value="com.iona.corba.art.artimpl.ORBSingleton"/>
<property name="ORBdomain_name" value="VOIAMODOMAINNEW"/>
</resources>

<application-desc name="CORBADemo Demo Application" main-class="Launch" width="300" height="300">
</application-desc>

<update check="background"/>

<argument>1</argument>

<security>
<all-permissions/>
</security>
</jnlp> 
```

<

当我使用批处理文件从 jar 运行应用程序时，我的批处理文件看起来像这样

runJar.bat C:\jdk1.6.0_14\bin\java -Xms64M -Xmx512M -Dorg.omg.CORBA.ORBClass=com.iona.corba.art.artimpl.ORBImpl -Dorg.omg.CORBA.ORBSingletonClass=com.iona .corba.art.artimpl.ORBSingleton -jar lib_6.3\UI_Fall_Test63.jar -ORBdomain_name VOIAMODOMAINNEW 1

暂停

如您所见，批处理文件中指定了以下内容：

1.  JDK路径：（ C:\jdk1.6.0_14\bin\java ）
2.  最大和最小内存的 Java VM 参数：（-Xms64M -Xmx512M）
3.  ORB 类名：（ -Dorg.omg.CORBA.ORBClass=com.iona.corba.art.artimpl.ORBImpl ）
4.  ORB 单例类名称：（-Dorg.omg.CORBA.ORBSingletonClass=com.iona.corba.art.artimpl.ORBSingleton）
5.  要运行的 Jar 文件名：( -jar lib_6.3\UI_Fall_Test63.jar )
6.  域名：（-ORBdomain_name VOIAMODOMAINNEW）
7.  主要功能参数：（1）所有库（Orbix jar以及其他第三方库）都放在我的lib_6.3文件夹中，如您所见我在#Point5中指定的jar位置目录是lib_6.3。同样，在 web start 中，我已经通过“jarsigner”对所有 jars 进行了签名，并将它们放入 lib_6.3_Signed 中（正如您之前在我发布的 JNLP 文件中看到的那样）

索引.html

```
<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.0 Transitional//EN">
<HTML>
<HEAD>
<TITLE> New Document </TITLE>
<META NAME="Generator" CONTENT="EditPlus">
<META NAME="Author" CONTENT="">
<META NAME="Keywords" CONTENT="">
<META NAME="Description" CONTENT="">
</HEAD>

<BODY>
<script src="http://www.java.com/js/deployJava.js"></script>
<script>
// using JavaScript to get location of JNLP file relative to HTML page
var dir = location.href.substring(0,location.href.lastIndexOf('/')+1);
var url = dir + "CORBADemo.jnlp";
deployJava.createWebStartLaunchButton(url, '1.6.0');
</script>
</BODY>
</HTML> 
```

单击桌面中下载的启动按钮 jnlp 后。运行 jnlp 后，web 启动控制台会在特定点消失。经过调查，我发现在我的应用程序中，它在解析 CORBA 命名服务的引用之前给出了打印。就在尝试解决“NamingService”并执行此代码时，我想会出现问题。

org.omg.CORBA.Object initNCRef = i_objORB.resolve_initial_references("NameService"); -->“i_objORB”是“org.omg.CORBA.ORB”类型的对象。

在 CORBA 应用程序中，为 ORB 解析 NamingService 由我在批处理文件中指定的以下类提供便利。您可以在我以前的帖子中看到批处理文件。-Dorg.omg.CORBA.ORBClass=com.iona.corba.art.artimpl.ORBImpl

我不明白为什么控制台会消失。即使为此我在我的应用程序中打印以查看堆栈。但是控制台会在几秒钟内消失。我不明白为什么。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2015-07-29T00:29:37.867

如果您有兴趣从消失的窗口中捕获文本，您可以启用日志记录。在 Windows 中找到此文件夹：

```
C:\Users\{username}\AppData\LocalLow\Sun\Java\Deployment\deployment.properties 
```

使用您喜欢的任何目录以这种格式添加这些行：

```
deployment.log=true
deployment.user.logdir=C\:\\tmp 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-03T16:21:47.970

我对 CORBA 一无所知，但在将您的 jnlp 文件与您提供的命令行进行比较时，我可以看到一些问题。

在 jnlp 文件中设置属性时，删除前导“D”。在您使用的命令行版本中

```
-Dorg.omg.CORBA.ORBClass=com.iona.corba.art.artimpl.ORBImpl 
```

这实际上告诉 jvm 将系统属性“org.omg.CORBA.ORBClass”设置为“com.iona.corba.art.artimpl.ORBImpl”。所以属性的名称确实是“org.omg.CORBA.ORBClass”，这是您应该在属性标签中指定的名称：

```
<property name="org.omg.CORBA.ORBClass" value="com.iona.corba.art.artimpl.ORBImpl"/> 
```

“-ORBdomain_name VOIAMODOMAINNEW 1”命令行参数未设置为系统属性，而是作为命令行参数提供给程序的主类。您应该在 application-desc 标签内的参数标签中指定它们，如下所示：

```
<application-desc name="CORBADemo Demo Application" main-class="Launch" width="300" height="300">
    <argument>-ORBdomain_name</argument>
    <argument>VOIAMODOMAINNEW </argument>
    <argument>1</argument>
</application-desc> 
```

我不确定这些更改是否足以解决您的问题，但这可能是一个起点。

为了进一步诊断问题，从命令行启动 webstart 应用程序可能会有所帮助，例如

```
javaws http://www.yourservername.com/yourpath/CORBADemo.jnlp 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-04-28T21:19:10.733

smw 是对的，因为您输入了错误的 ORB 类和 ORBSingleton 类属性，将使用 JavaIDL 代替预期的 Orbix ORB。

`<j2se initial-heap-size="..." max-heap-size="...">`堆大小被设置为JNLP中标记的属性。

请注意，从 Java7u45 开始，您需要对 JNLP 文件进行签名才能使这些属性生效。

# javascript - JQ列表中的按钮

> ID：14120582
> 
> 赞同：1
> 
> 时间：2013-01-02T10:40:07.963
> 
> 标签：javascript, jquery, html, listview, jquery-mobile

我有一个收藏夹列表，代码如下：

```
function FillBook() {
    var select = $("#bookMarkMenu");
    var ul = document.getElementById("bookMarkMenu");
    for (var i = 0; i < Local.length; i++) {
        var newLI = document.createElement("LI");
        ul.appendChild(newLI);
            newLI.innerHTML = '<a href="to.html" data-transition="slide" dir="rtl">    
<p>...</p> </a>';
        newLI.setAttribute('data-theme', 'c');
        newLI.setAttribute('onclick', 'DisplayBookMark()');
    }
    $('ul').listview('refresh');
} 
```

我想为列表中的每个实例添加一个按钮，

我尝试添加下一个：

```
 <a id="btnClearOneBookmark" data-role="button" data-theme="b" onclick="xxx();"></a> 
```

像这样：

```
newLI.innerHTML = '<a href="to.html" data-transition="slide" dir="rtl">    
<p>...</p><a id="btnClearOneBookmark" data-role="button" data-theme="b" onclick="xxx();"></a> </a>'; 
```

没有添加..为什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-02T16:07:23.217

尝试这个：

**HTML**

```
<a data-role = "button" id = "mybutton">Click me</a>
<ul id="bookMarkMenu" data-role="listview" data-divider-theme="b" data-inset="true"> </ul>

<div id='buttons' style='visibility:hidden'>
    <a href="to.html" data-transition="slide" dir="rtl">    
    <p>...</p>
    <a id="btnClearOneBookmark" data-role="button" data-theme="b" onclick="xxx();"></a>      
    </a>
</div> 
```

**JS**

```
$("#mybutton").click(function() {
for (var i = 0; i < 5; i++) {
    $("#bookMarkMenu").append("<li data-theme='c' onClick='DisplayBookMark();'>"+$('#buttons').html()+"</li>");
}
$("#bookMarkMenu").listview('refresh'); 
}); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-02T10:59:23.930

我可以在您的代码中看到一个额外`'`的...尝试使用这个...

```
newLI.innerHTML = '<a href="to.html" data-transition="slide" dir="rtl"><p>...</p>' +'<a id="btnClearOneBookmark" data-role="button" data-theme="b" onclick="xxx();"></a>'+' </a>'; 
```

# c++ - 无法完全理解模板模板参数的工作原理

> ID：14120584
> 
> 赞同：2
> 
> 时间：2013-01-02T10:40:18.210
> 
> 标签：c++, templates, template-templates

我正在阅读现代 C++ 设计，但无法完全理解模板模板参数的工作原理。

例如，如本文[http://www.informit.com/articles/article.aspx?p=376878](http://www.informit.com/articles/article.aspx?p=376878)中给出的， 我们可以使用类型和容器的模板参数创建一个堆栈。

如果我们只使用类型和容器作为模板 Stack 的参数，那么它可能会产生一些问题，例如

```
template <typename T, class Cont>
class Stack;

template <typename> class List;
Stack<int, List<int> > aStack1; // OK
Stack<double, List<int> > aStack2; // legal, not OK           
Stack<std::string, Deque<char *> > aStack3; // error! 
```

在上面的代码中，我可以理解 aStack1 很好，aStack2 和 aStack3 是问题，因为如果 Stack 元素类型和容器元素类型之间的类型不兼容。

根据文章，如果我们使用模板模板参数，这可以解决

```
template <typename T, template <typename> class Cont>
class Stack;

Stack<int,List> aStack1;
Stack<std::string,Deque> aStack2; 
```

我的疑问是 Deque 怎么知道它的元素类型是 std::string 或 List 元素类型是 int???这是通过模板参数推导完成的吗？

在这里，我们正在创建一个类型为 T 的 Deque。如果我们将堆栈定义为

```
template <typename T,template U, template <typename> class Cont>
    class Stack; 
```

那么我们如何实例化 Stack

```
 Stack<std::string,int,Deque> // will this work???? 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-02T11:03:58.297

> 我的疑问是 Deque 怎么知道它的元素类型是 std::string 或 List 元素类型是 int???这是通过模板参数推导完成的吗？

不，您在实现中显式实例化类模板，该类模板`Stack`可能被实现为：

```
template <typename T, template <typename> class Cont>
class Stack
{
  Cont<T> _container; //here you use `T` as template argument to `Cont`

  Cont<int> _ints; //you can do even this if you need a containter of int.
                   //though in this case you don't need this.

  public:
        void push(T const & data)
        {
           _container.push_back(data); 
        }
        //etc
}; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-02T11:04:32.050

对于要实例化的模板，它的**定义是必需的**。在您的示例中，您仅提供模板**声明**，这**不足以**使其实例化。该定义给出了详细说明如何使用模板参数的实现。例如，

```
template <typename T, template <typename> class Cont>
class Stack : Cont<T>
{
   typedef Cont<T> my_container;
 public:
   using my_container::push_back;
   /* more details here */ 
};

Stack<int,List> aStack1;
Stack<std::string,Deque> aStack2; 
```

`aStack1`从 a派生`List<int>`和`astack2`从 a 派生的实现`Deque<std::string>`。

# android - HTTP 1.1 400 错误请求 - Android 客户端 Asana

> ID：14120593
> 
> 赞同：2
> 
> 时间：2013-01-02T10:40:46.997
> 
> 标签：android, asana

我只是在玩 Asana API。因此，每当我提出请求时，我总是会收到 Bad Request 错误。

所以我得到的是：

```
public class Asana {

    private static String apiKey;
    private DefaultHttpClient httpClient;
    private final String apiUrl = "https://app.asana.com/api/1.0/";

    public Asana(String key) {
        apiKey = key;
        httpClient = new DefaultHttpClient();
    }

    public void get(String target) {
        new APIRequest().execute(target);
    }

    private class APIRequest extends AsyncTask<String, Void, HttpResponse> {

        protected HttpResponse doInBackground(String... params) {
            String query = apiUrl + params[0];

            Log.d("#query", query);

            HttpGet get = new HttpGet(query);
            String cred = apiKey + ':';
            String encodedKey = Base64.encodeToString(cred.getBytes(), Base64.DEFAULT);

            Log.d("#encodedKey", encodedKey);

            get.setHeader("Authorization", "Basic " + encodedKey);
            get.setHeader("Content-Type", "application/json; charset=UTF-8");

            Log.d("#getRequestLine", get.getRequestLine().toString());

            /*httpClient.getCredentialsProvider().setCredentials(
                    new AuthScope(AuthScope.ANY_HOST, AuthScope.ANY_PORT, AuthScope.ANY_REALM, AuthPolicy.BASIC),
                    new UsernamePasswordCredentials(apiKey, "")
            );*/

            HttpResponse resp = null;
            try {
                resp = httpClient.execute(get);
            } catch (ClientProtocolException e) {
                // TODO Auto-generated catch block
                e.printStackTrace();
            } catch (IOException e) {
                // TODO Auto-generated catch block
                e.printStackTrace();
            } finally {
                httpClient.getConnectionManager().shutdown();
            }

            return resp;
        }

        protected void onPostExecute(HttpResponse response) {
            StatusLine statusLine = response.getStatusLine();
            ByteArrayOutputStream out = new ByteArrayOutputStream();

            Log.d("#statusLine", statusLine.toString());

            try {
                response.getEntity().writeTo(out);
            } catch (IOException e1) {
                // TODO Auto-generated catch block
                e1.printStackTrace();
            }

            Log.d("#out", out.toString());
        }
    }

} 
```

使用 cURL 或 Simple REST 客户端（Chrome），我能够得到正确的结果。

我对上面的代码做错了吗？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-02T13:15:03.840

好的，所以我自己解决了这个问题。我认为问题出在身份验证上。

我现在使用的是以下命令，而不是手动设置 Authorization 标头：

```
get.addHeader(BasicScheme.authenticate(new UsernamePasswordCredentials(apiKey, ""), "US-ASCII", false)); 
```

它现在工作正常，我可以得到正确的结果。

如果有人感兴趣，在 github 上有一个用于 Asana API的 Java[库。](https://github.com/1393Designs/Javasana)

# php - 将多对一显示为选择框

> ID：14120595
> 
> 赞同：0
> 
> 时间：2013-01-02T10:40:57.190
> 
> 标签：php, doctrine-orm, zend-form, zend-framework2, foreign-key-relationship

我正在使用`AnnotationForms`并创建一个有效的`Doctrine`ManyToOne 关系。我在数据库中检查了它 - 它的工作。

外键字段仅显示为输入字段。有没有办法让框架自动创建一个`Selectbox`充满相关实体的对象？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-02T13:31:01.100

发现一篇博客文章很好地涵盖了这个问题：

[http://blog.james-carr.org/2012/09/16/using-select-in-zend-framework-2/](http://blog.james-carr.org/2012/09/16/using-select-in-zend-framework-2/)

# sharepoint - SharePoint 2010 NewForm.aspx 查找字段问题

> ID：14120598
> 
> 赞同：0
> 
> 时间：2013-01-02T10:41:26.840
> 
> 标签：sharepoint, sharepoint-2010, wss, sharepoint-list, lookupfield

我有一个最近从 WSS 3.0 升级的 SharePoint 2010 Foundation 网站。升级成功完成，没有出现任何故障。

但是，自从我升级了网站后，我遇到了与升级前网站上存在的某些日历列表的 NewForm.aspx（新列表条目页面）上的查找字段相关的问题。

问题是我有两个查找字段，一个用于**Client**，另一个用于**Meeting Type / Location**。当我在 NewForm.aspx（新列表项条目页面）上并在其中一个查找字段中选择一个条目时，第二个字段不允许我选择任何内容，而只是在不提供任何内容的情况下为我提供查找列表中的最高值其他类似的选择。这些字段只是标准的 SharePoint 查找字段，不会以任何方式修改，页面也不会修改。这个问题不会发生在我在站点中创建的新列表（其中包含多个查找字段）上，如果我在现有列表中添加额外的查找字段也不会发生此问题，它只会给这两个字段留下问题。

我使用 Internet Explorer 调试工具查看页面上的任何 JavaScript 中是否存在错误，但没有报告任何问题，我还尝试在 Internet Explorer 中以不同的标准呈现页面以查看它是否是与浏览器有关，但这些并没有什么区别。显而易见的一件事是，两个查找字段的值都被拉入到页面的 HTML 中，正如我在页面加载后查看页面的 HTML 源代码时以及在 Internet Explorer 的开发人员工具中看到的那样...... </p>

如果有人有这样的经验并且可以指出我解决这个问题的方向，我将非常感激......

提前谢谢了...

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-24T13:06:26.053

看看这两个链接。这首先可能是您的问题，虽然修复程序包含在 2012 年 8 月的 CU 中，但您仍然需要进行手动编辑（在我的书中不是真正的修复程序）

[http://support.microsoft.com/kb/2598273](http://support.microsoft.com/kb/2598273) [http://support.microsoft.com/kb/2687375](http://support.microsoft.com/kb/2687375)

# android - 在 JNI 中使用 jlong Array 和 Android NDK

> ID：14120600
> 
> 赞同：0
> 
> 时间：2013-01-02T10:41:32.370
> 
> 标签：android, android-ndk, java-native-interface, native

我有这两段代码，第一段是：

```
JNIEXPORT jlongArray* JNICALL Java_com_home_overlay_activity_MainActivity_ProcessPointer(JNIEnv* env, jobject) {

    jlongArray blobs_arr;

    return &blobs_arr;
} 
```

第二个是：

```
JNIEXPORT jlongArray JNICALL Java_com_home_overlay_activity_MainActivity_Process(JNIEnv* env, jobject) {

    jlongArray blobs_arr;

    return blobs_arr;
} 
```

我想要的只是将长数组返回给java代码。

第一个运行正常，而第二个不运行，以这种方式返回长数组有什么问题吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-02T10:52:00.233

Java 中没有指针，所以我认为如果第一段代码确实有效，它根本不会产生你想要的东西。它可能返回 C jlong​​Array 的内存地址。

至于第二段代码，我看不出它有什么问题，只是它返回了一个未初始化的对象，可能是 NULL，也可能是一些随机内存垃圾，这可能会导致 Java 端出现意外行为。也许您应该尝试在 C 部分将其初始化为 NULL，或者尝试通过实际归档数组来使您的代码片段更真实，以便您可以在真实条件下测试代码行为。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-02T13:55:01.337

我的应用程序没有读取 jni.h 但正在工作..这很奇怪，在我设置 NDKROOT 变量后它一切正常

# iphone - 核心动画警告：“未提交的 CATransaction”

> ID：14120604
> 
> 赞同：0
> 
> 时间：2013-01-02T10:41:47.433
> 
> 标签：iphone, ios, core-animation, quartz-core, catransaction

我只收到以下关于设备的警告：

```
CoreAnimation: warning, deleted thread with uncommitted CATransaction; created by:
0   QuartzCore                          0x3763c65d <redacted> + 220
1   QuartzCore                          0x3763c541 <redacted> + 224
2   QuartzCore                          0x3763fe2f <redacted> + 30
3   QuartzCore                          0x3763b9bf <redacted> + 318
4   QuartzCore                          0x3763b87b <redacted> + 50
5   QuartzCore                          0x3763b80b <redacted> + 538
6   MyApp                              0x000df597 -[CommonClass orangeGradient:] + 382
7   MyApp                              0x000f70e1 -[HomeViewController updateStatusBar] + 1700
8   MyApp                              0x000f61bd -[HomeViewController statusRecieved] + 224
9   MyApp                              0x000cd323 -[CommonClass statusReceivedFromServer] + 142
10  MyApp                              0x000d833d -[CommonClass accountStatus] + 7416
11  Foundation                          0x35a3767d <redacted> + 972
12  libsystem_c.dylib                   0x35c9a311 <redacted> + 308
13  libsystem_c.dylib                   0x35c9a1d8 thread_start + 8 
```

我在堆栈顶部的方法如下：

```
- (void)orangeGradient: (UILabel *)fillLabel {
@synchronized([CommonClass class]) {
CAGradientLayer * gradientLayer = [CAGradientLayer layer];
gradientLayer.frame = fillLabel.bounds;
gradientLayer.colors = [NSArray arrayWithObjects:(id)[UIColorFromRGB(0xfbb250) CGColor],(id)[UIColorFromRGB(0xf47c2a) CGColor], nil];
[fillLabel.layer addSublayer:gradientLayer];
}
} 
```

关于为什么会这样以及如何解决这个问题的任何想法？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-02T11:18:01.953

看起来像是`orangeGradient:`从后台线程调用的。Core Animation 将所有更改分组到 CATransactions 中。通常这是在运行循环中自动完成的。在后台线程上（通常）没有运行循环，因此您必须自己创建事务：

```
- (void)orangeGradient: (UILabel *)fillLabel {
    @synchronized([CommonClass class]) {
        [CATransaction begin];
        CAGradientLayer * gradientLayer = [CAGradientLayer layer];
        gradientLayer.frame = fillLabel.bounds;
        gradientLayer.colors = [NSArray arrayWithObjects:(id)[UIColorFromRGB(0xfbb250) CGColor],(id)[UIColorFromRGB(0xf47c2a) CGColor], nil];
        [fillLabel.layer addSublayer:gradientLayer];
        [CATransaction commit];
    }
} 
```

还有另一个问题：UIKit 不是线程安全的。您不能在后台线程上调用`bounds`a 。`UILabel`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-02T10:47:13.650

检查代码中是否有***未提交*** `CATransaction`的. 您将需要按照以下方式执行此操作；

```
[CATransaction begin];
[CATransaction setDisableActions:YES];
[commonClassObject orangeGradient:lblFill];
[CATransaction commit]; 
```

[编辑]

基本上，当 NSOperation 在 CoreAnimation 执行完成之前完成时，就会发生此问题。在您需要弄清楚的代码中的某个地方，这两个类之间必须存在某种关系。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-09-10T13:44:45.733

我将补充一点，我在后台线程中遇到了与 initWithFrame 相同的问题。

似乎从 iOS 7 及更高版本开始，对 UIKit 的某些调用必须在主线程下进行，并且不能从后台线程调用。

另请注意，在多次这样的警告之后，我的应用程序完全停止响应。所以最好不要忽视这样的警告。

# android - PreferenceActivity 中的对话框不起作用

> ID：14120607
> 
> 赞同：1
> 
> 时间：2013-01-02T10:41:52.407
> 
> 标签：android

当我运行此代码时，我收到异常：无法启动活动 ComponentInfo...AdminSettingsActivity：Java.lang.NullPointerExcepiton。任何人都知道，什么会导致这个问题/异常？我有以下代码：

```
import android.app.AlertDialog;
import android.app.Dialog;
import android.os.Bundle;
import android.preference.PreferenceActivity;
import android.util.Log;
import android.view.View;
import android.view.View.OnClickListener;
import android.widget.Button;
import android.widget.LinearLayout;

public class AdminSettingsActivity extends PreferenceActivity {

private Dialog dialog;
Button btn_ok;
Button btn_cancel;

@Override
protected void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    addPreferencesFromResource(R.xml.admin_preferences);

    showPasswordDialog();
}

private void showPasswordDialog() {
    // create dialog

    dialog = new Dialog(this);

    dialog.setContentView(R.layout.password_dialog);
    dialog.setTitle("Type password...");

    btn_ok = (Button) findViewById(R.id.btn_ok_pass_dialog);

    btn_ok.setOnClickListener(new OnClickListener() {

        @Override
        public void onClick(View v) {
            dialog.dismiss();
            Log.d("", "dismis");
        }
    });
    /*
    btn_cancel = (Button) findViewById(R.id.btn_cancel_pass_dialog);
    btn_cancel.setOnClickListener(new OnClickListener() {

        @Override
        public void onClick(View v) {
            dialog.dismiss();
            Log.d("", "ok");
        }
    });
    */
    dialog.show();

}
} 
```

并且有 admin_preference.xml：

```
<?xml version="1.0" encoding="utf-8"?>
<PreferenceScreen xmlns:android="http://schemas.android.com/apk/res/android" >

<Preference android:title="title_web_page" >
    <intent android:action="cz.example.k2.PASSWORD_DIALOG" />
</Preference>

</PreferenceScreen> 
```

和password_dialog.xml：

```
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
android:layout_width="match_parent"
android:layout_height="match_parent"
android:orientation="vertical" >

<EditText
    android:id="@+id/edit_text_pass_dialog"
    android:layout_width="match_parent"
    android:layout_height="wrap_content"
    android:inputType="textPassword" />

<LinearLayout
    xmlns:android="http://schemas.android.com/apk/res/android"
    android:layout_width="match_parent"
    android:layout_height="wrap_content"
    android:orientation="horizontal" >

    <Button
        android:id="@+id/btn_cancel_pass_dialog"
        android:layout_width="0dp"
        android:layout_height="wrap_content"
        android:layout_weight="1"
        android:text="Zrušit" />

    <Button
        android:id="@+id/btn_ok_pass_dialog"
        android:layout_width="0dp"
        android:layout_height="wrap_content"
        android:layout_weight="1"
        android:text="OK" />
</LinearLayout>

</LinearLayout> 
```

清单.xml：

```
...
    <activity
        android:name="cz.example.k2.AdminSettingsActivity"
        android:label="@string/admin_settings_activity_label" >
        <intent-filter>
            <action android:name="cz.example.k2.ADMIN_SETTINGS" />

            <category android:name="android.intent.category.DEFAULT" />
        </intent-filter>
    </activity>
... 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-02T10:48:09.367

我的猜测是错误就在这里，您试图从主布局而不是对话框布局中获取按钮：

```
btn_ok = (Button) findViewById(R.id.btn_ok_pass_dialog); 
```

你应该膨胀你的对话框布局，然后从中获取按钮

```
LayoutInflater inflater = (LayoutInflater) getSystemService(LAYOUT_INFLATER_SERVICE);
View view = inflater.inflate(R.layout.password_dialog, null);
dialog.setContentView(view);
btn_ok = (Button) view.findViewById(R.id.btn_ok_pass_dialog); 
```

# php - 从插件 Cakephp 访问受保护的方法

> ID：14120609
> 
> 赞同：0
> 
> 时间：2013-01-02T10:42:03.983
> 
> 标签：php, cakephp

> **可能重复：**
> [致命错误：调用未定义的方法 CookieComponent::del()](https://stackoverflow.com/questions/3890610/fatal-error-call-to-undefined-method-cookiecomponentdel)

我正在创建一个使用 SiteUsers 控制器中的登录方法的插件，但我收到错误消息：

> 调用未定义的方法 SiteUsersController::_doLogIn()

**插件站点用户控制器：**

```
class SiteUsersController extends AppController {

public $name = 'SiteUsers';

/**
 * login_competition
 *
 */
public function login_challenge() {

    $this->autoRender = false;

    if (!$this->_doLogIn($this->request->data['SiteUser'])) {

            $this->Session->setFlash('ERROR');

        }

    }

    $this->redirect('/');
}

} 
```

**主应用程序中的站点用户控制器**

```
class SiteUsersController extends AppController {

public $name = 'SiteUsers';

/**
 * _doLogIn()
 *
 * @param unknown_type $data
 * @return string|string
 */
protected function _doLogIn($data) {

    $this->_user = $this->SiteUser->getUserByEmailPassword(Sanitize::clean($data));

    if (!empty($this->_user)) {

        $this->Session->Write('SiteUser.id', $this->_user['SiteUser']['id']);
        $this->Session->Write('SiteUser.first_name', $this->_user['SiteUser']['first_name']);
        $this->Session->Write('SiteUser.username', $this->_user['SiteUser']['username']);

        return true;
    }

    return false;

}

} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-02T12:22:12.657

我建议您将 _doLogIn 移动到组件中。这样您就不必将其公开，用户也不会直接通过浏览器访问它，并且所有控制器都可以使用它。

当前的 _doLogIn 可以被重写以使用新的组件方法，因此如果广泛使用它在整个站点范围内没有什么大不了的。

以防万一；）[http://book.cakephp.org/2.0/en/controllers/components.html](http://book.cakephp.org/2.0/en/controllers/components.html)

# dynamic - Symfony 2.1.4 - 带有 parameters.yml 的动态路由

> ID：14120621
> 
> 赞同：0
> 
> 时间：2013-01-02T10:42:46.870
> 
> 标签：dynamic, symfony, symfony-2.1, routes

我有这个错误

> 找不到“GET /sn/”的路由

而这个..在parameters.yml

```
parameters:  
[...]  
    client_abv:         sn 
```

还有我的 routing.yml 文件：

```
_internal:  
  resource: "@FrameworkBundle/Resources/config/routing/internal.xml"
  prefix: /_internal

ClientResultBundle_Admin:
    resource: "@ClientResultBundle/Resources/config/routing/admin.yml"
    prefix: /%client_abv%/admin

ClientResultBundle_PointDeVente:
    resource: "@ClientResultBundle/Resources/config/routing/pointdevente.yml"
    prefix: /%client_abv%/pointdevente

ClientResultBundle_Sn:
    resource: "@ClientResultBundle/Resources/config/routing/sn.yml"
    prefix:   /%client_abv%

ClientResultBundle:
    resource: "@ClientResultBundle/Resources/config/routing.yml"
    prefix:   /%client_abv% 
```

那么为什么命令控制台`route:match /sn/`可以工作而不是在浏览器中呢？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-02T11:00:58.127

去掉结尾的斜线指向`/sn`。

# sql - 在 Microsoft Sql Server 2008R2 及更高版本上隐藏用于登录的数据库

> ID：14120624
> 
> 赞同：8
> 
> 时间：2013-01-02T10:42:49.507
> 
> 标签：sql, sql-server, sql-server-2008, sql-server-2008-r2, sql-server-2012-express

请任何人协助隐藏 sql server 2008R2 或更新版本上的可用数据库。

我有一个映射到特定数据库的新登录用户。使用特定登录用户登录时，我可以看到服务器上的所有数据库，但除了映射到登录名的数据库之外，我无法访问它们。

这是 100%，但我的问题是我不希望登录甚至看到其他数据库可用。

如何防止显示未映射到登录名的其他数据库？

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2013-01-02T10:59:25.540

```
USE master;
GO
DENY VIEW ANY DATABASE TO [newlogin]; 
GO
USE yourDB;
GO
DROP USER newlogin;
GO
USE master;
GO
ALTER AUTHORIZATION ON DATABASE::yourDB TO [newlogin];
GO 
```

拉吉

# ios - NSNumber doubleValue 0 不完全返回 0

> ID：14120626
> 
> 赞同：0
> 
> 时间：2013-01-02T10:42:51.200
> 
> 标签：ios, nsnumber

我正在处理 NSNumber 的 NSMutableArray 并且遇到了一个奇怪的错误。[NSNumber doubleValue]（使用双 0 构造）似乎不等于 0.0。

该错误出现在有史以来最简单的函数中：max 函数。

```
- (double) maxValY{
    double max = DBL_MIN;
    for (NSNumber *doubleNumber in arrayNumbers) {
            if (max<[doubleNumber doubleValue]){
                max = [doubleNumber doubleValue];
            }

    }

    NSLog(@"max %f",max);
    if(max <=0.0){
        NSLog(@"max is equal to 0");
        return 1;
    }else{
        NSLog(@"max is not equal to 0");
    }

    return max;
} 
```

控制台打印：

```
2013-01-02 11:27:56.208 myApp[1920:c07] max 0.000000
2013-01-02 11:27:56.210 myApp[1920:c07] max is not equal to 0 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-02T10:52:44.623

这不是错误：它是双精度。使用浮点数，您*看到*的不一定是您得到的。这个问题有更多信息：

[为什么我看到一个双变量初始化为 21.4 之类的某个值作为 21.399999618530273？](https://stackoverflow.com/questions/177506/why-do-i-see-a-double-variable-initialized-to-some-value-like-21-4-as-21-3999996?lq=1)

如果您只关心一个数字是否等于或大于零，那么最简单的解决方案就是转换为一个整数。还有其他更复杂的替代方案：我链接到的答案有一些。某人在有关浮点数学的评论中给您的链接也可能会有所帮助。

# cuda - 双精度 CUFFT

> ID：14120632
> 
> 赞同：3
> 
> 时间：2013-01-02T10:43:15.403
> 
> 标签：cuda, fft, double-precision, cufft

我在使用 CUDA FFT 库时遇到了一些问题。

我将输入声明为 cuDoubleComplex，但编译器返回此类型与 cufftComplex 类型的参数不兼容的错误。在网上搜索了一番后，我找到了 cufft.h 文件，其中有一行`typedef cuComplex cufftComplex;`. 我的问题是，在库 cuComplex.h 中，很明显 cuComplex 具有单浮点精度（`typedef cuFloatComplex cuComplex;`），但我想要双精度。

这可能吗？

特别是，我获得以下内容：

```
error: argument of type "cufftDoubleComplex *" is incompatible with parameter of type "cufftComplex *" 
```

在这一行：

```
cufftExecC2C(plan, data1, data2, CUFFT_FORWARD); 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-01-02T10:55:23.230

`cufftDoubleComplex`双精度复数数据类型在 CUFFT中定义。

CUFFT 中 fft 的双精度版本是：

```
cufftExecD2Z() //Real To Complex

cufftExecZ2D() //Complex To Real

cufftExecZ2Z() //Complex To Complex 
```

`cufftExecC2C`是 fft 的单精度版本，并且期望输入和输出指针是 type `cufftComplex`，而你传递给它一个 type 的指针`cufftDoubleComplex`。

对于`cufftDoubleComplex`数据类型，您必须改用该函数`cufftExecZ2Z`，该函数用于双精度数据。

# silverlight - Silverlight 5 浏览器内连接到套接字

> ID：14120634
> 
> 赞同：0
> 
> 时间：2013-01-02T10:43:21.240
> 
> 标签：silverlight, sockets

我正在制作一个silverlight 5 浏览器内应用程序，它将从服务器（192.168.1.92）上的套接字读取和写入。我正在我的开发机器（192.168.1.10）上测试应用程序。我检查了“在浏览器中运行时需要提升信任”并且它有效。所以我从 192.168.1.10 到 192.168.1.92 上的套接字，它可以工作！但是，当我在 192.168.1.92 上的 Web 服务器上部署应用程序并从我的开发机器 (192.168.1.10) 运行应用程序时，出现安全异常“尝试以访问权限禁止的方式访问套接字。”。

例如需要更改注册表，但我不想更改它，因为我也想从其他机器运行应用程序，并且我不想每次都更改注册表[。](https://stackoverflow.com/questions/8570470/in-browser-trusted-application-silverlight-5/14119874#14119874)

是否可以在不更改客户端任何内容的情况下授予应用程序权限？我该怎么做？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-02T20:52:16.747

您应该证明您的申请。

# android - Android UI 布局 Onclick 监听器

> ID：14120639
> 
> 赞同：6
> 
> 时间：2013-01-02T10:43:41.797
> 
> 标签：android, android-layout

我有一个这样的布局 ![在此处输入图像描述](../Images/eb335d4d067717d2373f354eaf8e0deb.png)

当点击 layer1 时，layer 2 变得不可见，但是当我点击 layer2 时它不会变得不可见。我使用以下代码，但它不起作用，当我单击 layer2 时，它也变为不可见，当我单击 layer2 时任何想法让 layer2 可见。

```
 RelativeLayout layout1=(RelativeLayout)findViewById(R.id.hidebg);
         final RelativeLayout layout=(RelativeLayout)findViewById(R.id.hidelayer);
         layout1.setOnClickListener(new OnClickListener() 
         {

            @Override
            public void onClick(View v)
            {
                if(layout.getVisibility()==0)
            {
                layout.setVisibility(4);
            }
            else
            {
                layout.setVisibility(0);
            }

            }
        }); 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-01-02T10:47:00.920

在第二个布局上添加事件监听器

```
layout.setOnClickListener(new OnClickListener() 
         {

            @Override
            public void onClick(View v)
            {
                if(i==0)
                {
                    layout.setVisibility(4);
                    i=1;
                }
                else
                {
                    layout.setVisibility(0);
                    i=0;
                }

            }
        }); 
```

然后检查。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-01-02T11:37:59.687

默认情况下将 layer2 设置为可见并使用以下代码：

```
layer1.setOnClickListener(new OnClickListener() 
         {

            @Override
            public void onClick(View v)
            {
                if(layer2.getvisibility==View.VISIBLE)
                {
                    layer2.setVisibility(View.GONE);

                }
                else
                {
                    layer2.setVisibility(View.VISIBLE);

                }

            }
        }); 
```

# django - abs() 的错误操作数类型：django 中的“str”

> ID：14120640
> 
> 赞同：1
> 
> 时间：2013-01-02T10:43:42.637
> 
> 标签：django, python-2.7, django-templates

我正在浏览购物车应用程序的初始 django 电子商务应用程序。单击添加到购物车按钮时，我收到上述错误。

我在线上遇到错误`{{ cart_sutotal|currency}}`

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2014-06-19T14:51:52.033

我记得那本书...您正在制作自定义模板过滤器，对吗？您需要将传入的值从`locale.currency`字符串转换为`int`// `decimal`。`float`

避免使用货币舍入错误的最佳做法是使用`decimal`包。导入十进制包并通过`Decimal`函数传递您的值以解决问题。

```
 from decimal import Decimal
    value = Decimal(value) 
```

所以你的代码应该是这样的：

```
 from django import template

    import locale
    from decimal import Decimal

    register = template.Library()    

    @register.filter(name='currency')    
    def currency(value):    
        try:    
            locale.setlocale(locale.LC_ALL,'en_US.UTF-8')    
        except:    
            locale.setlocale(locale.LC_ALL,'')    
        value = Decimal(value)    
        loc = locale.localeconv()    
        return locale.currency(value, loc['currency_symbol'], grouping=True) 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-02T12:12:21.620

过滤器期望它的`currency`参数是一个数值；您将字符串作为`cart_sutotal`.

在将其传递给模板之前，将其转换为小数。十进制，或者，更好的是，弄清楚为什么要将价格值相加并为小计提供一个字符串。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-02T11:20:30.330

来自[python 文档](http://docs.python.org/2/library/functions.html#abs)。

> **绝对（）**
> 
> *返回一个数字的绝对值。参数可以是普通整数或长整数或浮点数。如果参数是复数，则返回其大小。*

引发的错误表明您正在将`str`参数传递给`abs()`方法，因为它期望选择上述参数。解决方案是将`integer`对象显式传递给 abs 方法。

### 例子：

```
>>>number = "1"
>>>print abs(int(number))
1
>>> 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-01-02T10:46:39.440

您在代码中的某处缺少演员表。无论您在代码中的哪个位置，都`abs(somevar)`需要通过执行将字符串转换为整数`abs(int(somevar))`。如果您发布堆栈跟踪或代码片段，则可以获得更多信息。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-08-24T23:53:02.287

我认为您正在编写“开始 Django 电子商务”一书中的代码。错误出现在您编写的代码`{{ cart_sutotal|currency }}`中，而不是`{{ cart_subtotal }}`.

# c++ - 如何在 C++ 中打印 6 位精度的浮点值？

> ID：14120646
> 
> 赞同：0
> 
> 时间：2013-01-02T10:44:10.110
> 
> 标签：c++, decimal, precision, digit

默认情况下，我得到 4 位精度，当我使用`setprecision(6)`变量的最后一位数字时，随机出现`1/3=0.333369`.

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-02T10:50:55.243

`float`由于它使用 24 个二进制数字来存储数字的数字，因此具有大约 7 个十进制数字的精度。就输出而言，`setprecision(6)`可以满足您的要求。

您可能会丢失精度，例如减去两个具有相似值的数字并打印结果。快速解决方案是将计算更改为使用`double`or `long double`。但是为了保证浮点结果的精度，您需要了解 FP 的工作原理并分析您的公式是如何计算的。

看看[每个计算机科学家应该知道的关于浮点运算的知识](http://docs.oracle.com/cd/E19957-01/806-3568/ncg_goldberg.html)。

# python - 将数组转换为以逗号分隔的串联字符串的脚本

> ID：14120648
> 
> 赞同：0
> 
> 时间：2013-01-02T10:44:16.903
> 
> 标签：python

我正在尝试获取存储在 LDAP 数据库中的所有电子邮件地址的列表，以逗号分隔。

通过简化这个[脚本](https://bitbucket.org/zhb/iredmail/raw/cb7d2492563d/extra/update/updateLDAPValues_080_to_081.py)，我有：

```
#!/usr/bin/env python
# encoding: utf-8

# Author:   Zhang Huangbin <zhb _at_ iredmail.org>
# Purpose:  Add enabledService=lib-storage for all mail users.
#           Required by IMAP folder sharing in Dovecot-2.0.
# Date:     2012-05-18

import sys
import ldap

# Note:
#   * bind_dn must have write privilege on LDAP server.
uri = 'ldap://127.0.0.1:389'
basedn = 'o=domains,dc=example,dc=com'
bind_dn = 'cn=Manager,dc=example,dc=com'
bind_pw = 'password'

# Initialize LDAP connection.
print >> sys.stderr, "* Connecting to LDAP server: %s" % uri
conn = ldap.initialize(uri=uri, trace_level=0,)
conn.bind_s(bind_dn, bind_pw)

# Get all mail users.
print >> sys.stderr, "* Get all mail accounts..."
allUsers = conn.search_s(
        basedn,
        ldap.SCOPE_SUBTREE,
        "(objectClass=mailUser)",
        ['mail', 'enabledService'],
        )

total = len(allUsers)
print >> sys.stderr, "* Total %d user(s)." % (total)

# Counter.
count = 1

for user in allUsers:
    (dn, entry) = user
    mail = entry['mail'][0]

    print >> "%s, " % (mail)

    count += 1

# Unbind connection.
conn.unbind() 
```

当我运行这个我得到错误：

> *   连接 LDAP 服务器：ldap://127.0.0.1:389
> *   获取所有邮件帐户...
> *   共有 64 个用户。回溯（最近一次调用最后一次）：文件“list_mail_users.py”，第 43 行，打印 >>“%s”，%（邮件）AttributeError：'str'对象没有属性'write'

我在支持论坛上问了这个问题，他们建议我使用：ldapsearch 代替？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-02T10:50:25.803

这是你的问题

```
for user in allUsers:
  (dn, entry) = user
  mail = entry['mail'][0]

  print >> "%s, " % (mail)

  count += 1 
```

您正在尝试打印到“%s”，它是一个字符串，打印只能接受具有写入属性的对象。我不完全确定您要对此做什么，但我会期待类似`print >> sys.stdout, "%s, " %(mail)`或可能的事情`print >> File "%s, "%mail`

# extjs - 如何从视图中获取应用程序？

> ID：14120649
> 
> 赞同：6
> 
> 时间：2013-01-02T10:44:30.810
> 
> 标签：extjs, extjs-mvc

如何从视图中获取我的应用程序？例如，考虑我有一个应用程序`Boo`，并且有一个名为的视图，`Boo.view.Foo.List`我想进入`Boo`该视图`List`。

编辑：

查看此代码，并查看第 20 行。

```
Ext.define('Boo.view.Foo.List', {
    extend: 'Ext.panel.Panel',
    model: 'Boo.model.FooModel',
    alias: 'widget.foolist',
    store: 'FooListStore',
    initComponent: function () {
        this.columns = [
            {
                text: "Hello world",
                dataIndex: 'Time',
                flex: 1
            },
            {
                xtype: 'actioncolumn',
                width: 50,
                items: [{
                    icon: 'cancel.png',
                    tooltip: 'Cancel',
                    handler: function (grid, rowIndex, colIndex, col, e) {
                        //Now I need to get the application here, for example with self.getApplication() or something like this.
                    }
                }]
        }];

        this.callParent(arguments);
    }
}); 
```

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2013-01-02T10:49:29.677

您可以使用**[appProperty进行归档](http://docs.sencha.com/ext-js/4-1/#!/api/Ext.app.Application-cfg-appProperty)**

```
Ext.application({
    name: 'MyApp',
    appProperty: 'Current'
}); 
```

您现在可以致电

```
MyApp.Current 
```

从任何地方都会导致`MyApp`命名空间在窗口（全局）范围内抵抗。

对于 4.1.3 之前的任何版本，将以下行添加到应用程序的 Launch-Method

```
YourAppName[this.appProperty] = this; 
```

# php - 数据映射器，仅用于 CRUD 操作？

> ID：14120651
> 
> 赞同：2
> 
> 时间：2013-01-02T10:44:35.900
> 
> 标签：php, oop, datamapper, dao

我最近开始阅读有关数据映射器的内容，我发现的所有文章都只演示了 CRUD 操作，例如：

```
$user = new User('John', 'Joe', 'john@hotmail.com');
$userMapper->insert($user);

// or this...
$user = $userMapper->fetchById(239); 
```

他们当然应该做得更多吗？

目前在我的应用程序中，我使用 DAO（或类似的东西），例如，当我需要一个`$user`对象时，我的一个工厂创建一个`$userDAO`对象并将其注入到我的`$user`对象中。而要从我的`$user`对象中查询我只是这样做：

```
$this->userDAO->getNumActiveOrders($this->userId); 
```

它将在`$userDAO`对象中进行查询并返回结果。

经过大量阅读后，我的实现似乎是错误的，因为域对象不应该知道 DAO，反之亦然。我是对还是错？

如果这样做是错误的，那么我认为数据映射器必须用于更多的 CRUD 操作？

因此，如果我想了解用户有多少活跃订单，我可以执行以下操作：

```
$userMapper->getNumActiveOrders($userId); 
```

那会是正确的吗？

如果我想在我的`$user`对象中设置该值，我将不得不执行以下操作：

```
$user->setNumActiveOrders($userMapper->getNumActiveOrders($userId)); 
```

与使用数据映射器相比，使用我的 DAO 实现似乎要快得多，并且使用的代码更少，但我可能错误地实现了数据映射器。

任何建议都会非常感谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-02T11:04:11.400

> 经过大量阅读后，我的实现似乎是错误的，因为域对象不应该知道 DAO，反之亦然。我是对还是错？

那是对的。

> 如果这样做是错误的，那么我认为数据映射器必须用于更多的 CRUD 操作？

DataMapper的目的[是将数据从数据库映射到域对象](http://www.martinfowler.com/eaaCatalog/dataMapper.html)。由于对象图通常不像关系数据库系统中的数据那样结构化，因此您需要某种映射器将关系数据从数据库获取到对象中，反之亦然。DataMappers 试图解决[Impedance Mismatch](http://en.wikipedia.org/wiki/Object-relational_impedance_mismatch)的问题。

> 因此，如果我想了解用户有多少活跃订单，我可以执行以下操作：

```
$userMapper->getNumActiveOrders($userId); 
```

> 那会是正确的吗？

是的，你可以这样做。但您也可以查询用户对象，例如

```
echo $user->getActiveOrders(); 
```

并且您的用户对象可能会具有某种[*延迟加载*机制](http://www.martinfowler.com/eaaCatalog/lazyLoad.html)来获取活动订单。

> 如果我想在我的 $user 对象中设置该值，我将不得不执行以下操作：

```
$user->setNumActiveOrders($userMapper->getNumActiveOrders($userId)); 
```

不，您只需设置有效订单。数字可以从它们中得出。如果计数是您想在数据库中插入的东西，您将在 Mapper 中处理它。

> 与使用数据映射器相比，使用我的 DAO 实现似乎要快得多，并且使用的代码更少，但我可能错误地实现了数据映射器。

这很正常，因为 DAO 只查询数据库而不做任何映射。

# c# - 在 C# 中删除数据行时出错

> ID：14120655
> 
> 赞同：0
> 
> 时间：2013-01-02T10:44:56.270
> 
> 标签：c#, mysql

我在 C# 中有一个 datagridview 显示查询数据库的结果。我想删除数据，这个方法是使用 DataSet。此方法在某个索引中按下按钮时执行。

编码：

```
DialogResult _result = MessageBox.Show("Do you want to remove the data?", "Warning", MessageBoxButtons.OKCancel, MessageBoxIcon.Warning);
if (_result == DialogResult.OK) 
{
    int idx = dataGridInfo.CurrentRow.Index;
    this.getInfoFilmDS.sp_getInfo.Rows.RemoveAt(idx);
    MessageBox.Show("Data Removed", "Processing", MessageBoxButtons.OK, MessageBoxIcon.Information);
} 
```

这种方法

```
this.getInfoFilmDS.sp_getInfo.Rows.RemoveAt(idx); 
```

仅在 DataGridView 中工作，但数据本身并未在数据库中删除。

*如何解决这个问题？*

提前致谢。

更新我已将语法更改为：

```
this.getInfoFilmDS.sp_getInfo.Rows[idx].Delete();
sp_getInfoTableAdapter.Adapter.Update(getInfoFilmDS); 
```

但编译器会抛出错误。

```
Invalid Operation Exception Update requires a valid DeleteCommand when passed DataRow collection with deleted rows. 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-02T10:48:14.937

[`DataRowCollection.RemoveAt`](http://msdn.microsoft.com/en-us/library/system.data.datarowcollection.remove.aspx)只会从 中删除该行`DataTable`，它不会删除该行（即使您会使用 a `DataAdapter`）。因此，您需要使用[`DataRow.Delete`](http://msdn.microsoft.com/en-us/library/system.data.datarow.delete.aspx)：

```
getInfoFilmDS.sp_getInfo.Rows[idx].Delete(); 
```

请注意，您现在需要使用 a[`DataAdapter`](http://www.devart.com/dotconnect/mysql/docs/Devart.Data.MySql~Devart.Data.MySql.MySqlDataAdapter.html)将 中的更改提交`DataSet`到数据库。

**更新**

> 我已将语法更改为：

```
this.getInfoFilmDS.sp_getInfo.Rows[idx].Delete();
sp_getInfoTableAdapter.Adapter.Update(getInfoFilmDS); 
```

但编译器会抛出错误：

> 无效的操作异常。当传递带有已删除行的 DataRow 集合时，更新需要有效的 DeleteCommand。

所以你需要定义当你只选择一个表时`DeleteCommand`通常自动生成的`DataSet`，也许你只需要重新配置`TableAdapter`它，它就会自动创建删除命令。否则，您必须手动创建它：

[**表适配器概述**](http://msdn.microsoft.com/en-us/library/bz9tthwx%28v=vs.110%29.aspx)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-02T12:37:06.197

好的，经过研究并向@Tim 寻求支持，它表明 DataSet 没有基于存储过程生成查询（请通知我，如果我错了：D）所以，我需要生成另一个基于 JOIN 表的存储过程..

我的 MySQL 数据库中有三个表，我创建了另一个存储过程来删除数据。然后我将 DELETE 存储过程分配到数据集配置中

然后应用此代码

```
try
            {
                int idx = dataGridInfo.CurrentRow.Index;
                this.getInfoFilmDS.sp_getInfo.Rows[idx].Delete();
                sp_getInfoTableAdapter.Adapter.Update(getInfoFilmDS);
                MessageBox.Show("Data removed", "Process", MessageBoxButtons.OK, MessageBoxIcon.Information);
            }
            catch (Exception ex)
            {
                MessageBox.Show("Error Delete Data" + ex.Message, "Error", MessageBoxButtons.OK, MessageBoxIcon.Error);
            } 
```

它就像一个魅力。

# php - 将 A 替换为 B，或将 B 替换为 A

> ID：14120658
> 
> 赞同：1
> 
> 时间：2013-01-02T10:45:16.737
> 
> 标签：php, regex, preg-replace

有没有一种方法可以`preg_replace`用来替换`A`for `B`if `A`is present 或`B`for `A`if `B`is present？

就像是：

```
preg_replace('/ORDER BY field (ASC|DESC)/', 'ORDER BY field (***the alternative not matched***)'); 
```

将 any`ORDER BY field ASC`转换为`ORDER BY field DESC`，并将 any`ORDER BY field DESC`转换为`ORDER BY field ASC`。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-01-02T10:48:58.920

您正在寻找的功能是 preg_replace_callback。

例子：

```
function replace_asc_desc($matches)
{
    return 'ORDER BY field ' . ($matches[1] == 'ASC' ? 'DESC' : 'ASC');
}

$string = 'ORDER BY field DESC';

echo preg_replace_callback('/ORDER BY field (ASC|DESC)/', 'replace_asc_desc', $string); 
```

# ruby - 在 Ruby 中获取本月的最后一天

> ID：14120661
> 
> 赞同：57
> 
> 时间：2013-01-02T10:45:27.497
> 
> 标签：ruby, date, datetime

我用 args（年，月）创建了新对象 Date.new。创建 ruby​​ 后默认添加 01 天数到这个对象。有没有办法添加我作为 arg 传递的月份的最后一天而不是第一天（例如，如果是 02 月，则为 28，如果是 01 月，则为 31）？

* * *

## 回答 #1

> 赞同：108
> 
> 时间：2013-01-02T10:49:16.520

利用`Date.civil`

使用`Date.civil(y, m, d)`或其 alias `.new(y, m, d)`，您可以创建一个新的 Date 对象。日 (d) 和月 (m) 的值可以为负数，在这种情况下，它们分别从年末和月末倒数。

```
=> Date.civil(2010, 02, -1)
=> Sun, 28 Feb 2010
>> Date.civil(2010, -1, -5)
=> Mon, 27 Dec 2010 
```

* * *

## 回答 #2

> 赞同：76
> 
> 时间：2013-01-02T11:59:48.290

要获得月底，您还可以使用 ActiveSupport 的 helper `end_of_month`。

```
# Require extensions explicitly if you are not in a Rails environment
require 'active_support/core_ext' 

p Time.now.utc.end_of_month # => 2013-01-31 23:59:59 UTC
p Date.today.end_of_month   # => Thu, 31 Jan 2013 
```

您可以在 Rails API 文档中找到更多关于[end_of_month的信息。](http://api.rubyonrails.org/classes/Date.html#method-i-end_of_month)

* * *

## 回答 #3

> 赞同：17
> 
> 时间：2014-10-10T21:28:42.967

所以我在这里在谷歌搜索同样的东西......

我对上述内容不满意，因此在阅读[RUBY-DOC](http://ruby-doc.org/stdlib-2.1.3/libdoc/date/rdoc/Date.html)中的文档后我的解决方案是：

获取示例`10/31/2014`

`Date.new(2014,10,1).next_month.prev_day`

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2020-02-18T05:51:25.787

你可以这样做：

```
def last_day_of_month?
   (Time.zone.now.month + 1.day) > Time.zone.now.month
end

Time.zone.now.day if last_day-of_month? 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2018-05-18T13:48:00.913

这是我`Time`的基础解决方案。与上面提出的解决方案相比，我有个人偏好，`Date`尽管`Date`上面提出的解决方案读起来更好。

```
reference_time ||= Time.now
return (Time.new(reference_time.year, (reference_time.month % 12) + 1) - 1).day 
```

顺便说一句，十二月你可以看到那一年没有翻转。但这与问题无关，因为 12 月总是有 31 天。并且对于二月年不需要翻转。因此，如果您有另一个需要正确年份的用例，请确保也更改年份。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2018-06-27T12:40:45.870

```
require "date"
def find_last_day_of_month(_date)
 if(_date.instance_of? String)
   @end_of_the_month = Date.parse(_date.next_month.strftime("%Y-%m-01")) - 1
 else if(_date.instance_of? Date)
   @end_of_the_month = _date.next_month.strftime("%Y-%m-01") - 1
 end
 return @end_of_the_month
end

find_last_day_of_month("2018-01-01") 
```

这是另一种查找方式

# sql-server - 全文搜索或纯 SQL 查询

> ID：14120662
> 
> 赞同：0
> 
> 时间：2013-01-02T10:45:29.260
> 
> 标签：sql-server, sql-server-2005, full-text-search

如果我将使用 FTS 或纯 SQL 查询 (LIKE)，我只是感到困惑。我尝试在一张桌子上使用 FTS，但我认为当搜索值不是一个完整的单词时它是不准确的。这是我的桌子。

```
Description, POnumber,PRNumber,InvoiceNumber,CreatedBy,UpdatedBy
Test user          PO1     PR1       Inv 1         userm     userm
Test2              PO2     PR2       Inv 2         userm     userm
Test3              PO3     PR3       Inv 3         userm     userm

SELECT description,ponumber,prnumber,invoicenumber,createdby,updatedby 
FROM MSTR_FILE
WHERE FREETEXT((createdby,updatedby,ponumber,invoicenumber,prnumber,description),'user') 
```

结果是第一行，但是当值为“userm”时，所有行都被选中。我想要的结果是显示包含 userm 的所有行。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-02T10:58:55.330

你可以使用 like with OR like this...

```
SELECT description,ponumber,prnumber,invoicenumber,createdby,updatedby 
FROM MSTR_FILE
where description like '%'+'user'+'%' OR
ponumber like '%'+'user'+'%' OR
prnumber like '%'+'user'+'%' OR
invoicenumber like '%'+'user'+'%' OR
createdby like '%'+'user'+'%' OR
updatedby like '%'+'user'+'%' 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-03T01:08:02.587

我已经找到了解决方案，就像我尝试过的@aks 建议一样，但我包含了双引号，以便它可以正确读取“*”符号，

这是启发我的链接。[http://msdn.microsoft.com/en-us/library/ms187787.aspx](http://msdn.microsoft.com/en-us/library/ms187787.aspx)

SELECT description,ponumber,prnumber,invoicenumber,createdby,updatedby FROM MSTR_FILE WHERE CONTAINS(createdby,'"user*"');

# vb.net - VB.Net保存时如何将图片大小限制在图片框中的指定尺寸

> ID：14120666
> 
> 赞同：0
> 
> 时间：2013-01-02T10:45:43.337
> 
> 标签：vb.net

如果有人可以非常友好地告诉我如何在保存时将图片大小限制为指定尺寸（例如 150 x 200 像素），我会很高兴。如果不符合要求，则错误消息应指示所需尺寸。

但是，以下是将图片上传到图片框的代码。

```
Private Sub btnUpload_Click(ByVal sender As System.Object, ByVal e As System.EventArgs) Handles btnUpload.Click
    Try
        OpenFileDialog1.ShowDialog()
        PictureBox1.Image = Image.FromFile(OpenFileDialog1.FileName)
        img = OpenFileDialog1.FileName.ToString
    Catch
    End Try
End Sub 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-02T11:40:33.190

```
If Image.FromFile(OpenFileDialog1.FileName).Size.Width > 150 Or Image.FromFile(OpenFileDialog1.FileName).Size.Height > 200 Then 
   lblPhotoErr.Text = "More than 150 x 200"
   bError = True
End If 
```

# java - Java HTML单元保存意外页面

> ID：14120667
> 
> 赞同：1
> 
> 时间：2013-01-02T10:45:44.617
> 
> 标签：java, htmlunit

我正在尝试访问`htmlunit`包含一个图像的 servlet 页面。
我需要保存图像或需要将 servlet 页面保存到 html 页面中。

现在正在使用

```
(UnexpectedPage) webClient.getPage(new URL("https://www.xxxx.com/servlet/xxxSer")
WebResponse response = currentPage.getWebResponse();
response.getContentType(); 
```

之后我不知道该怎么办。有没有什么想法去做这个工作。

提前致谢。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-03T12:37:46.453

您需要获取的文本内容`WebResponse`（您也不需要`URL`对象）：

```
Page page = webClient.getPage("https://www.xxxx.com/servlet/xxxSer");
String content = page.getWebResponse().getContentAsString(); 
```

关于图像，您应该更清楚如何获得它。如果它是在`IMG`标签中引用的图像，则使用 an`HtmlPage`和 an `HtmlImage`。如果您直接请求图像，您应该使用`page.getWebResponse().getContentAsStream()`

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-02T10:56:13.920

试试这个代码

```
HtmlPage htmlpage = webClient.getPage(new URL("https://www.xxxx.com/servlet/xxxSer"));
String htmlcode = htmlpage.getWebResponse().getContentAsString(); 
```

最好的

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2019-10-09T19:15:25.930

问题是 HTML 单元无法转换不完整的 HTML 页面（例如，一些未关闭的标签）。所以，我可以使用 HTMLUnit 的包中包含的 HTMLParser 来解决这个错误（我使用的是 2.36.0v）。HTMLParser 完成并处理这种类型的转换错误。如果您需要执行 JS，HtmlPage 可以工作。

```
//Web client creation.
Page page = webClient.getPage(url);
HtmlPage tmpPage = HTMLParser.parseHtml(page.getWebResponse(), webClient.getCurrentWindow());
// use tmpPage here 
```

# c# - 如何从此输出写入文本文件

> ID：14120668
> 
> 赞同：1
> 
> 时间：2013-01-02T10:45:46.927
> 
> 标签：c#, file, save, listings

我有以下代码，以便我可以搜索目录以查找文件。现在我想为用户添加一种将输出保存到文本文件的方法？

```
 using System;
    using System.Drawing;
    using System.Collections;
    using System.ComponentModel;
    using System.Windows.Forms;
    using System.Data;
    using System.IO;

    namespace RecursiveSearchCS
    {
        public class Form1 : System.Windows.Forms.Form
        {
            internal System.Windows.Forms.Button btnSearch;
            internal System.Windows.Forms.TextBox txtFile;
            internal System.Windows.Forms.Label lblFile;
            internal System.Windows.Forms.Label lblDirectory;
            internal System.Windows.Forms.ListBox lstFilesFound;
            internal System.Windows.Forms.ComboBox cboDirectory;

            private System.ComponentModel.Container components = null;

            public Form1()
            {

                InitializeComponent();

            }

            protected override void Dispose(bool disposing)
            {
                if (disposing)
                {
                    if (components != null)
                    {
                        components.Dispose();
                    }
                }
                base.Dispose(disposing);
            }

            private void InitializeComponent()
            {
                this.btnSearch = new System.Windows.Forms.Button();
                this.txtFile = new System.Windows.Forms.TextBox();
                this.lblFile = new System.Windows.Forms.Label();
                this.lblDirectory = new System.Windows.Forms.Label();
                this.lstFilesFound = new System.Windows.Forms.ListBox();
                this.cboDirectory = new System.Windows.Forms.ComboBox();
                this.SuspendLayout();
        // 
        // btnSearch
        // 
                this.btnSearch.Location = new System.Drawing.Point(608, 248);
                this.btnSearch.Name = "btnSearch";
                this.btnSearch.Size = new System.Drawing.Size(75, 23);
                this.btnSearch.TabIndex = 0;
                this.btnSearch.Text = "Search";
                this.btnSearch.Click += new System.EventHandler(this.btnSearch_Click);
        // 
        // txtFile
        // 
                this.txtFile.Location = new System.Drawing.Point(8, 40);
                this.txtFile.Name = "txtFile";
                this.txtFile.Size = new System.Drawing.Size(120, 20);
                this.txtFile.TabIndex = 4;
                this.txtFile.Text = "*.*";
        // 
        // lblFile
        // 
                this.lblFile.Location = new System.Drawing.Point(8, 16);
                this.lblFile.Name = "lblFile";
                this.lblFile.Size = new System.Drawing.Size(144, 16);
                this.lblFile.TabIndex = 5;
                this.lblFile.Text = "Search for files containing:";
        // 
        // lblDirectory
        // 
                this.lblDirectory.Location = new System.Drawing.Point(8, 96);
                this.lblDirectory.Name = "lblDirectory";
                this.lblDirectory.Size = new System.Drawing.Size(120, 23);
                this.lblDirectory.TabIndex = 3;
                this.lblDirectory.Text = "Look In:";
        // 
        // lstFilesFound
        // 
                this.lstFilesFound.Location = new System.Drawing.Point(152, 8);
                this.lstFilesFound.Name = "lstFilesFound";
                this.lstFilesFound.Size = new System.Drawing.Size(528, 225);
                this.lstFilesFound.TabIndex = 1;
        // 
        // cboDirectory
        // 
                this.cboDirectory.DropDownWidth = 112;
                this.cboDirectory.Location = new System.Drawing.Point(8, 128);
                this.cboDirectory.Name = "cboDirectory";
                this.cboDirectory.Size = new System.Drawing.Size(120, 21);
                this.cboDirectory.TabIndex = 2;
                this.cboDirectory.Text = "ComboBox1";
        // 
        // Form1
        // 
                this.AutoScaleBaseSize = new System.Drawing.Size(5, 13);
                this.ClientSize = new System.Drawing.Size(688, 277);
                this.Controls.Add(this.btnSearch);
                this.Controls.Add(this.txtFile);
                this.Controls.Add(this.lblFile);
                this.Controls.Add(this.lblDirectory);
                this.Controls.Add(this.lstFilesFound);
                this.Controls.Add(this.cboDirectory);
                this.Name = "Form1";
                this.Text = "Form1";
                this.Load += new System.EventHandler(this.Form1_Load);
                this.ResumeLayout(false);
                this.PerformLayout();

            }
            #endregion

    /// <summary>
    /// The main entry point for the application
    /// </summary>
            [STAThread]
            static void Main()
            {
                Application.Run(new Form1());
            }

            private void btnSearch_Click(object sender, System.EventArgs e)
            {
                lstFilesFound.Items.Clear();
                txtFile.Enabled = false;
                cboDirectory.Enabled = false;
                btnSearch.Text = "Searching...";
                this.Cursor = Cursors.WaitCursor;
                Application.DoEvents();
                DirSearch(cboDirectory.Text);
                btnSearch.Text = "Search";
                this.Cursor = Cursors.Default;
                txtFile.Enabled = true;
                cboDirectory.Enabled = true;
            }

            private void Form1_Load(object sender, System.EventArgs e)
            {
                cboDirectory.Items.Clear();
                foreach (string s in Directory.GetLogicalDrives())
                {
                    cboDirectory.Items.Add(s);
                }
                cboDirectory.Text = "C:\\";
            }

            void DirSearch(string sDir)
            {
                try
                {
                    foreach (string d in Directory.GetDirectories(sDir))
                    {
                        foreach (string f in Directory.GetFiles(d, txtFile.Text))
                        {
                            lstFilesFound.Items.Add(f);
                        }
                        DirSearch(d);
                    }
                }
                catch (System.Exception excpt)
                {
                    Console.WriteLine(excpt.Message);
                }
            }
        }
    } 
```

这也是应用程序打开的屏幕截图：

[打开应用程序图像](http://i.imgur.com/17xCh.png)

我将添加一个保存按钮，单击该按钮会保存到特定位置，我将如何执行此操作。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-02T10:58:25.500

如果我理解正确，请使用简单的 I/O 操作。

```
 using(StreamWriter writer = new StreamWriter("debug.txt", true))
    {
        foreach (string item in lstFilesFound.Items)
        {
            writer.WriteLine(item.ToString());
        }
    } 
```

一些额外的指针：

在 DirSearch 中，为`Directory.GetDirectories(sDir)`. 您当前的代码导致这个东西在每个循环中都进行计算。在其他领域寻找一些更相似的重构代码。

```
var dirs = Directory.GetDirectories(sDir);
foreach (string d in dirs)
{
    var files = Directory.GetFiles(d, txtFile.Text);
    foreach (string f in files)
    {
        lstFilesFound.Items.Add(f);
    }
    DirSearch(d);
} 
```

希望能帮助到你。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-02T10:54:03.500

我假设它是您想要保存到文本文件的已找到文件的列表，在您的保存事件中如何处理（粗略的代码，因此未经广泛测试）？

```
using (FileStream fs = new FileStream("c:\\files.txt", FileMode.Create, FileAccess.Write))
{
    using (StreamWriter sw = new StreamWriter(fs))
    {
        foreach (string item in lstFilesFound.Items)
        {
            sw.WriteLine(item);
        }
    }
} 
```

# asp.net-mvc-3 - 如何在asp.net mvc中发布没有强类型模型的大数据？

> ID：14120669
> 
> 赞同：1
> 
> 时间：2013-01-02T10:45:53.433
> 
> 标签：asp.net-mvc-3, jquery, http-post

我将得到如下格式的 JSON 对象，每种格式都包含不同的属性/键，即这些属性/键是动态的。

```
var SelectedRows=   [
            {"id":"1","name":"jhon","phone":"6699"},
            {"id":"2","name":"Aron","phone":"7799"},
            {"id":"3","name":"Iyan","phone":"8899"},
        ]

var SelectedRows=   [
            {"id":"1","fname":"jhon","lname":"6699"},
            {"id":"2","fname":"Aron","lname":"7799"},
            {"id":"3","fname":"Iyan","lname":"8899"},
        ]

var SelectedRows=   [
        {"id":"1","fname":"jhon","lname":"6699"},
        {"id":"2","fname":"Aron","lname":"7799"},
        {"id":"3","fname":"Iyan","lname":"8899"},
        ] 
```

使用 AJAX post call 发布数据。

```
$.ajax({
    url: "@Url.Action("Export", "Export")",
    type: "POST",
    data: JSON.stringify(SelectedRows),
    success: function(result) {}
});​ 
```

控制器动作方法：

```
[HttpPost]
public ActionResult Export(**what type to specify here**)
{

} 
```

正如我所说的属性/键是动态的，所以我不能在这里使用强类型模型。我必须为操作方法指定一些通用类型的参数。

我不知道这可能吗？如果是，怎么办？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-02T12:16:16.497

```
[HttpPost]
public ActionResult Export(FormCollection collection)
{

} 
```

[有关FormCollection](http://msdn.microsoft.com/en-us/library/system.web.mvc.formcollection%28v=vs.98%29.aspx)的更多信息。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-02T11:24:28.010

听起来像`dynamic`类型可能是您的答案。可以在[此处](https://stackoverflow.com/questions/3142495/deserialize-json-into-c-sharp-dynamic-object)找到完整的详细信息。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-07T07:31:18.310

我就是这样做的。

```
$.ajax({
    url: "@Url.Action("Export", "Export")",
    type: "POST",
    data: JSON.stringify(SelectedRows),
  **contentType: "application/json; charset=utf-8",**
    success: function(result) {}
});​ 
```

需要在发布数据时指定应用程序的**contentType**并接收动态类型的列表值。

```
[HttpPost]
public ActionResult Export(**List<dynamic>** SelectedRows)
{

} 
```

# facebook - FB 连接无需离开网络应用程序

> ID：14120675
> 
> 赞同：1
> 
> 时间：2013-01-02T10:46:16.577
> 
> 标签：facebook, login, dialog, connect

我被手机上的 fb 登录卡住了（js 或 php sdk）:)

我想在不离开我的网络应用程序的情况下创建一个 fbconnect 对话框。

我的目标是创建一个应用程序并将用户锁定：不允许用户外出（浏览器......）。

有没有办法只显示一个对话框，其中包含用户/密码等字段而没有任何其他链接？

谢谢 ！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-02T11:08:31.840

对的，这是可能的。请尝试[http://stage.assistmelive.com](http://stage.assistmelive.com)并导航至网络->发送邀请以查看演示。:)

# python - Python内存错误

> ID：14120678
> 
> 赞同：1
> 
> 时间：2013-01-02T10:46:21.267
> 
> 标签：python, python-3.x, itertools

我有一个小脚本，从 python 中的给定字符生成一个单词表。但执行后总是会得到一个 MemoryError 。为什么存储在内存中？有没有更好的代码方法不使用 ram 但提供工作输出？

```
from itertools import product
chars = ['a', 'b', 'c', 'd', 'e', 'f', 'g', 'h', 'j', 'k', 
         'm', 'n', 'p', 'q', 'r', 's', 't', 'u', 'v', 'w', 
         'x', 'y', 'z', 'A', 'B', 'C', 'D', 'E', 'F', 'G', 
         'H', 'J', 'K', 'L', 'M', 'N', 'P', 'Q', 'R', 'S', 
         'T', 'U', 'V', 'W', 'X', 'Y', 'Z', '1', '2', '3', 
         '4', '5', '6', '7', '8', '9']
length = 8
result = ["".join(item) for item in product(*[chars]*length)]
for item in result:
    print(item) 
```

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2013-01-02T10:48:32.560

通过在生成器周围放置方括号，可以告诉 Python 将其转换为内存中的实际列表。你真的不需要一次*所有*的元素，是吗？

相反，将你的方括号变成括号，Python 将把它作为一个生成器，它只会在请求时生成项目：

```
>>> ("".join(item) for item in product(*[chars]*length))
    <generator object <genexpr> at 0x2d9cb40>
>>> ["".join(item) for item in product(*[chars]*length)]
[1]    3245 killed     ipython2 
```

看一下`string`模块。它有很多有用的常量：

```
import string
from itertools import product

chars = string.letters + string.digits
length = 8

result = (''.join(item) for item in product(*[chars], repeat=length))

for item in result:
    print(item) 
```

# c# - 在c#中删除文件夹和子文件夹

> ID：14120683
> 
> 赞同：3
> 
> 时间：2013-01-02T10:46:50.673
> 
> 标签：c#

我有一个文件夹，其中包含子文件夹和具有只读属性的文件（文件和文件夹）。我想删除这个带有子文件夹和文件的文件夹。

我写了这段代码：

```
static void Main(string[] args)
{        
    DirectoryInfo mm = new DirectoryInfo(@"c:\ex");
    string aa = Convert.ToString(mm);
    string[] allFileNames = 
        System.IO.Directory.GetFiles(aa, 
                                     "*.*", 
                                     System.IO.SearchOption.AllDirectories);
    string[] alldirNames = 
       System.IO.Directory.GetDirectories(aa, 
                                        "*", 
                                        System.IO.SearchOption.AllDirectories);

    foreach (string filename in allFileNames)
    {
        FileAttributes attr = File.GetAttributes(filename);
        File.SetAttributes(filename, attr & ~FileAttributes.ReadOnly);

    }

    foreach (string dirname in alldirNames)
    {
        FileAttributes attr = File.GetAttributes(dirname);
        File.SetAttributes(dirname, attr & ~FileAttributes.ReadOnly);
        Directory.Delete(dirname  , true);
    }

    FileInfo[] list = mm.GetFiles();

    foreach (FileInfo k in list)
    {
        k.Delete();
    }
    mm.Delete();
    Console.ReadKey();
} 
```

现在的问题是，每当我运行程序时，它都会给我以下错误：

> 找不到路径“c:\ex\xx\bb”的一部分。

这个错误是什么意思？

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2013-01-02T10:58:29.420

```
Directory.Delete(path, true); 
```

[文档](http://msdn.microsoft.com/en-us/library/fxeahc5f.aspx)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-05-20T05:58:53.313

```
EmptyFolder(new DirectoryInfo(@"C:\your Path"))
Directory.Delete(@"C:\your Path");

private void EmptyFolder(DirectoryInfo directoryInfo)
{
    foreach (FileInfo file in directoryInfo.GetFiles())
    {       
       file.Delete();
     }

    foreach (DirectoryInfo subfolder in directoryInfo.GetDirectories())
    {
      EmptyFolder(subfolder);
    }
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-02T11:18:05.790

以前的答案可能有效，但我相信它会在 ReadOnly 文件中出现问题。但是为了确保删除和删除任何属性 ReadOnly，执行此过程的最佳方法必须是使用一种方法来方便您执行的方式，您没有使用对象的正确属性，例如，当使用

> 目录信息.ToString()

并使用

> DirectoryInfo.GetFiles (aa ...

您没有使用 Framework 在 DirectoryInfo 类中提供的资源。见下文：

> ```
>  void DirectoryDelete(string strOriginalPath)
>     {
>         DirectoryInfo diOriginalPath = new DirectoryInfo(strOriginalPath); 
> ```

```
 if (diOriginalPath.Attributes.HasFlag(FileAttributes.ReadOnly))
            diOriginalPath.Attributes &= ~FileAttributes.ReadOnly;

        string[] lstFileList = Directory.GetFiles(strOriginalPath);
        string[] lstdirectoryList = Directory.GetDirectories(strOriginalPath);

        if (lstdirectoryList.Length > 0)
        {
            // foreach on the subdirs to the call method recursively
            foreach (string strSubDir in lstdirectoryList)
                DirectoryDelete(strSubDir);
        }

        if (lstFileList.Length > 0)
        {
            // foreach in FileList to be delete files
            foreach (FileInfo fiFileInDir in lstFileList.Select(strArquivo => new FileInfo(strArquivo)))
            {
                // removes the ReadOnly attribute
                if (fiFileInDir.IsReadOnly)
                    fiFileInDir.Attributes &= ~FileAttributes.ReadOnly;

                // Deleting file
                fiFileInDir.Delete();
            }
        }

        diOriginalPath.Delete();
    } 
```

# php - 在同一页面 AJAX 上传递查询

> ID：14120684
> 
> 赞同：1
> 
> 时间：2013-01-02T10:46:52.257
> 
> 标签：php, javascript, jquery, mysql, ajax

我对使用 AJAX 还是很陌生，我很难用它。你能帮我解决这个问题吗？我实际上有一个下拉列表，当我在该下拉列表中选择一个项目时，查询表应该打印到 tbody。这是我的代码：

**PHP代码：**

```
<select id="proj_id" name="proj_id" onchange="myFunction(this.value)">

    <option value="none">---select project---</option>
    <?php
    //Projects
    $r = @mysql_query("SELECT `proj_id`, `proj_name` FROM `projects`");

    while($rows = mysql_fetch_assoc($r)) {
        $proj_id = $rows['proj_id'];
        $proj_name = $rows['proj_name'];
        echo '<option value='.$proj_id.'>'.$proj_name.'</option>';
    }
    ?>
</select>

<table>

<thead>
    <tr>
        <th>Project Name</th>
        <th>Material Name</th>
        <th>Quantity</th>
        <th>Status</th>
    </tr>
</thead>
<tbody id="project_estmat">
<?php
    //Display Requests
    $r = @mysql_query("SELECT `proj_name`, `mat_name`, `req_qty`, `stat_desc` FROM `requests` JOIN `projects` USING(`proj_id`) JOIN `materials` USING(`mat_id`) JOIN `status` ON(requests.stat_id = status.stat_id)");

        while ($row = mysql_fetch_array($r)) {
            echo '<tr>';
            echo '<td>'.$row['proj_name'].'</td>';
            echo '<td>'.$row['mat_name'].'</td>';
            echo '<td>'.$row['req_qty'].'</td>';
            echo '<td>'.$row['stat_desc'].'</td>';
            echo '</tr>';
        }
?>
</tbody>
</table> 
```

**JS代码：**

```
function myFunction(value){

if(value!="none")
{
    $.ajax(
    {
        type: "POST",
        url: 'content/admin/requests.php',
        data: { proj_id: value},
        success: function(data) {
    $('#project_estmat').html(data);

    }
});
}
else
{
    $('#project_estmat').html("select an item");
}

} 
```

我有这个 PHP 代码应该在 #project_estmat 这是一个表。我认为这就是问题所在。因为每次我选择一个项目时，表格中都没有打印任何内容。它显示空数据。

```
<?php
if (isset($_POST['proj_id'])) {

    $r = @mysql_query("SELECT `proj_name`, `mat_name`, `req_qty`, `stat_desc` FROM `requests` JOIN `projects` USING(`proj_id`) JOIN `materials` USING(`mat_id`) JOIN `status` ON(requests.stat_id = status.stat_id)");
    if($r){
        while ($row = mysql_fetch_array($r)) {
            echo '<tr>';
            echo '<td>'.$row['proj_name'].'</td>'; 
            echo '<td>'.$row['mat_name'].'</td>';
            echo '<td>'.$row['req_qty'].'</td>';
            echo '<td>'.$row['stat_desc'].'</td>';
            echo '</tr>';
        }
    }
exit;
}
?> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-02T10:52:06.940

您已经包装了 $.ajax 函数，`${` 它应该如下所示，并尝试使用[change](http://api.jquery.com/change/)，并在执行此操作时删除内联函数调用，

```
$('#proj_id').change(function() {
var value = $(this).val();
    if(value!="none"){
        $.ajax({
            type: "POST",
            url: 'content/admin/requests.php',
            data: { proj_id: value},
            success: function(data) {
                $('#project_estmat').html(data);
                alert(data);//check whats coming from the server side 
            }
        });
    }
}); 
```

使用简化的 php 代码对服务器端进行测试，如下所示，

```
<?php 
if (isset($_POST['proj_id'])) {
            echo '<tr>';
            echo '<td>A</td>'; 
            echo '<td>B</td>';
            echo '<td>C</td>';
            echo '<td>D</td>';
            echo '</tr>';

}
?> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-02T10:53:38.577

一切看起来都很好，只是你的 if 条件中有一个 '$' 额外的

```
if(value!="none")
${  //here 
```

删除“$”符号应该可以工作......

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-02T15:27:04.163

不要使用“@”error_compression 运算符来抑制您的错误。从 mysql_query 中删除 @ 符号并尝试调试您的代码。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-01-02T11:19:12.377

你不应该使用 mysql_query 函数，因为它在 PHP 5.5.0 中被弃用并且将被删除（[http://php.net/manual/en/function.mysql-query.php](http://php.net/manual/en/function.mysql-query.php)）。您最好使用 PHP PDO 类（[http://php.net/manual/en/book.pdo.php](http://php.net/manual/en/book.pdo.php)）。

* * *

## 回答 #5

> 赞同：-1
> 
> 时间：2013-01-02T10:52:17.877

尝试构建一个字符串并将其发送回。

```
$str = '';
if($r){
    while ($row = mysql_fetch_array($r)) {
        $str .= '<tr>';
        $str .= '<td>'.$row['proj_name'].'</td>'; 
        $str .= '<td>'.$row['mat_name'].'</td>';
        $str .= '<td>'.$row['req_qty'].'</td>';
        $str .= '<td>'.$row['stat_desc'].'</td>';
        $str .= '</tr>';
    }
    return $str;
} 
```

然后当循环完成后，我们可以将字符串发回。虽然该`dataType`属性`.ajax()`用于`intelligent parsing`决定发送回的数据类型以及如何构造返回的对象，但您只需声明它即可。

```
$.ajax({
    type: "POST",
    url: 'content/admin/requests.php',
    data: { proj_id: value},
    dataType:'html',
    success: function(data) {
        $('#project_estmat').html(data);
    }
}); 
```

# mysql - Mysql在减法后自动插入一个值

> ID：14120700
> 
> 赞同：0
> 
> 时间：2013-01-02T10:48:12.197
> 
> 标签：mysql

我正在研究汽车租赁系统。'Hire' 表具有 、 等字段`hireDate`。`returnDate`我希望能够计算租金并将该值自动插入数据库（同一张表）。

我想知道是否可以减去这两个日期字段，由此得出的值可以乘以某个数字（例如 300）并自动添加到另一个名为“ `Rent_Due`”的属性中。这个想法是通过获取天数然后将其乘以某个数字来计算应付的总租金。因此，对于每次雇用，我只需输入雇用日期和返回日期，然后会自动填写 Rent Due 属性。这有可能吗？

我不知道我需要提供哪些更多信息来寻求帮助，如果您可能需要我的 ERD 图像，请告诉我。谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-02T10:56:00.223

假设您想在几天内计算出差异，这应该可行。

```
INSERT INTO yourTable (hireDate, returnDate, Rent_Due) VALUES
(StartDate. EndDate, DATEDIFF(EndDate, StartDate)*300) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-02T10:57:38.547

就我个人而言，我会避免在数据库中计算字段，并尝试使其保持标准化。

相反，您可以使用视图来了解租用期间以及价格。

示例如下：

```
create view hire_duration as (
  select hireId, hireDate, datediff(returnDate,hireDate) as duration
  from Hire
); 
```

（这假设您的 Hire 表中有一个名为hireId 的主键）您可以通过将持续时间乘以某个常数来轻松修改视图以具有雇用成本，如果成本从未改变，那将是可以的，但如果它你想拥有不同雇佣率的灵活性你不想在你的 SQL 中硬编码一个费率。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-02T13:04:50.537

您是否正在寻找类似的东西？

插入事件前：

```
DELIMITER $$
    CREATE TRIGGER name_of_before_insert_trigger BEFORE INSERT ON name_of_table
    FOR EACH ROW BEGIN
     SET NEW.Rent_Due = DATEDIFF(NEW.returnDate, NEW.hireDate) * 300;
    END;
   $$
DELIMITER ; 
```

更新前事件：

```
DELIMITER $$
    CREATE TRIGGER name_of_before_update_trigger BEFORE UPDATE ON name_of_table
    FOR EACH ROW BEGIN
     SET NEW.Rent_Due = DATEDIFF(NEW.returnDate, NEW.hireDate) * 300;
    END;
   $$
DELIMITER ; 
```

您还可以在单​​独的表格中外包每日费率：

```
DELIMITER $$
    CREATE TRIGGER name_of_before_insert_event_trigger BEFORE INSERT ON name_of_table
    FOR EACH ROW BEGIN
     SET NEW.Rent_Due = DATEDIFF(NEW.returnDate, NEW.hireDate) * (SELECT value FROM name_of_price_table LIMIT 1);
    END;
   $$
DELIMITER ; 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-01-02T11:00:47.383

您不需要创建另一个字段，您可以获得以下查询的结果。

```
select (datediff(hireDate, returnDate)*300) as rent,hireDate,returnDate from Hire; 
```

# php - Codeigniter 图像标签 - 发生错误

> ID：14120706
> 
> 赞同：0
> 
> 时间：2013-01-02T10:48:43.853
> 
> 标签：php, html, codeigniter, image

我使用 codeigniter 作为我的框架并在 localhost 上测试一个站点。目前我正在使用 img 标签如下：

```
<img src="<?php echo base_url(); ?>/assets/images/image.png" class="home"/> 
```

这显示了图像 - 很棒，但是在验证 html 时，我收到以下消息：

“字符“<”是分隔符的第一个字符，但作为数据出现 此消息可能出现在多种情况下：

*   您应该将其转义为 <

*   您使用了未转义的“&”：这在某些情况下可能有效，但建议使用“&”，它始终是安全的。

*   另一种可能性是您忘记关闭前一个标签中的引号。

我还尝试了 img 标记数组的 Codeigniter html 帮助程序，当我这样做时，它不显示图像，并且此行下方的任何代码都不会显示。

任何更好地标记此代码的建议或通过验证检查的方法，因为我喜欢 100% 的通过率。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-02T10:53:43.383

尝试使用 site_url

```
<img src="<?php echo site_url('/assets/images/image.png');?>" class="home"/> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-02T10:52:07.877

请删除 / 在末尾

```
base_url() 
```

base_user 函数默认提供 / 最终使用这种方式

```
<img src="<?php echo base_url();?>assets/images/image.png" class="home"/> 
```

# loops - 使用循环不变量的算法正确性

> ID：14120707
> 
> 赞同：1
> 
> 时间：2013-01-02T10:48:48.567
> 
> 标签：loops, invariants

我必须使用循环不变量来证明下面算法的正确性。它需要两个表示为数组的数字（倒序：1579 -> [9 7 5 1]），处理它们的乘法并将结果作为数组返回。

```
ArraysMultiplication(x,y,n)
In: x, y — the numbers represented as arrays
In: n — the length of arrays
Out:  p (the array that contains the multiplication result)
for i = 0; 2n - 1 do
    p[i] = 0
end for
for i = 0; n - 1 do
    remainder = 0
    for j = 0; n - 1 do
        value = x[j] * y[i] + remainder + p[j + i]
        p[j + i] = value mod 10
        remainder = value div 10
    end for
    p[n + i] = remainder
end for
return p 
```

我真的不明白循环不变量应该为这个算法做什么。提前致谢！

# c - Linux Kernel - 为什么 System.map 中的函数地址在实时看到的地址前一个字节？

> ID：14120711
> 
> 赞同：14
> 
> 时间：2013-01-02T10:49:02.243
> 
> 标签：c, linux, linux-kernel, arm, function-pointers

在 linux 内核源代码中，在`tasklet_action`代码中添加了以下行：

```
printk("tasklet_action = %p\n" , *tasklet_action);
printk("tasklet_action = %p\n" , &tasklet_action);
printk("tasklet_action = %p\n" , tasklet_action); 
```

在输出中我得到：

```
tasklet_action = c03441a1
tasklet_action = c03441a1
tasklet_action = c03441a1 
```

但是当在`system.map`文件中搜索它时，`tasklet_action`地址是，`c03441a0`所以有 1 个字节的偏移量。

*   为什么我有这个偏移量？
*   它总是一个字节的偏移量吗？

* * *

## 回答 #1

> 赞同：18
> 
> 时间：2013-01-02T15:55:52.427

我的猜测是您在 ARM 上*以 Thumb 模式运行*，或者在其他一些使用函数指针的底部位指示运行模式的架构上运行。

如果是这样，答案是您的函数*确实位于 system.map 中的地址*。

您在运行时获得的值是 location*和 mode*。

在这类架构上，指令必须始终是 2 或 4 字节对齐的，这将使底部位始终为零。当架构增加了一个额外的模式时，设计人员利用“浪费”位来编码模式。它很聪明，但令人困惑，而且不仅对您而言：很多软件，如调试器，在首次发明时以许多令人讨厌的方式破坏。

对于习惯于使用任何随机对齐的可变长度指令的 x86 程序员来说，这个概念尤其令人困惑。

# java - 在对象上调用 setter 后安全发布 Java 对象

> ID：14120712
> 
> 赞同：1
> 
> 时间：2013-01-02T10:49:03.343
> 
> 标签：java, multithreading

在构造函数执行之后但在返回引用之前调用 setter 将是一个安全的发布吗？

```
public class SafePublication {
    private int i = 0;
    private SafePublication() {
            i = 10;
    }

    // Here we are calling setter are object creation. 
    //Will this change be visible to other threads
   public static SafePublication getInstance() {
           SafePublication pub = new SafePublication();
           pub.setVal(20);
           return pub;
   }

   private void setVal(int x) {
           this.i = x;
   }
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-02T11:08:55.240

不，不会安全的。

该`setVal`方法不是同步的，`i`也不是易失的。因此，对`i`(via `setVal`) 的更新与在另一个读取`i`. `setVal`调用发生在构造实例的线程中的事实有所不同。

底线是另一个线程*可能会将*的值视为或中的`i`任何一个。`0``10``20`

* * *

> 如果对对象的引用还没有返回，另一个线程如何看到该值？

它不是。问题是其他线程*可能*看不到`i`.

我认为您将这种情况与该字段的情况混淆了`final`。在那里，JLS*确实*指定该字段是安全发布的。问题是这种保证不适用于非最终字段；见[JLS 17.5](http://docs.oracle.com/javase/specs/jls/se7/html/jls-17.html#jls-17.5)。措辞如下：

> *“当一个对象的构造函数完成时，它被认为是完全初始化的。只有在对象完全初始化后才能看到对该对象的引用的线程保证能看到该**对象`final`字段**的正确初始化值。”*

（重点补充）

* * *

> 我宁愿说另一个线程可能会将 i 的值视为 10 或 20 中的任何一个。保证不会看到 0。

[AFAIK， JLS 17.4](http://docs.oracle.com/javase/specs/jls/se7/html/jls-17.html#jls-17.4)或[JLS 17.5](http://docs.oracle.com/javase/specs/jls/se7/html/jls-17.html#jls-17.5)中没有任何东西可以提供这种保证。唯一可以保证的是，`i`在默认初始化发生之前，什么都不会看到 的值。（请随时证明我错了……参考 JLS。）

# centos - Gwan，未能映射段

> ID：14120714
> 
> 赞同：1
> 
> 时间：2013-01-02T10:49:07.173
> 
> 标签：centos, compatibility, permission-denied, g-wan, tmp

我在使用**Gwan**时遇到问题，我在几台机器上成功使用过，但在我当前的机器 CentOS 6.3 64bit Final、gwan 版本 3.12.26、glibc 版本 2.12（稳定）上遇到问题。

每当我尝试开始 gwan`./gwan`

它返回

```
Linking loan.c: failed to map segment from shared object: Operation not permitted 
```

我拥有完全的 root 访问权限，确保所有`.so`共享文件都是可执行的，并确保 SELinux 处于关闭状态。

任何你们都可以阐明的东西都会很棒

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-02T15:31:23.327

由于 GLIBC 包装器和直接系统调用，版本 3.12.26 存在稳定性问题。这些问题在不同的 OS/GLIBC 上是不同的，这就是为什么它在某些机器上工作而不在其他机器上工作的原因。

我建议暂时使用 3.3（如果你有的话），直到版本 4 发布。

* * *

## 回答 #2

> 赞同：-2
> 
> 时间：2013-01-03T07:31:46.197

**Richard Heath**，给出下载 3.3 版本的链接！为什么所有关于 G-WAN 的建议都如此缺乏信息？这一切都像bla bla bla。我浏览了整个 gwan.com 网站。只有链接下载最新版本！

# c#-4.0 - 使用 Start.Process 从 c sharp 调用 Powershell 函数

> ID：14120716
> 
> 赞同：0
> 
> 时间：2013-01-02T10:49:10.473
> 
> 标签：c#-4.0, powershell

我正在尝试使用 Start.Proccess 从 c# 执行 Powershell 自定义函数，

我知道我们应该使用 Powershell 类来执行 powershell 脚本，但是我遇到了 x86、x64 平台的问题，因为我在安装项目使用的自定义操作中调用了 Powershell 脚本。

那么你能告诉我如何使用 Start.Process 调用 Powershell 自定义函数吗？

在 powershell 中，您需要先加载脚本，将函数放置在 ". .[scriptPath]" 中，然后调用该函数，但在 C# 中我不知道该怎么做。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-02T23:21:18.293

如果您可以控制函数脚本，只需从脚本中调用函数，这样可以更轻松地从 PowerShell.exe 调用，例如：

```
-- script.ps1 --
function DoAction($p1, $p2) {
    ...
}

DoAction someArg anotherArg 
```

然后像这样调用脚本：

```
string sysdir = Environment.GetFolderPath(Environment.SpecialFolderPath.System);
Process.Start(sysdir + "\WindowsPowerShell\v1.0\Powershell.exe", "-Command \"& {" + <path-to-script> + "}\""); 
```

# java - 使用石英进行调度时，spring 中的 bean 初始化失败错误

> ID：14120717
> 
> 赞同：0
> 
> 时间：2013-01-02T10:49:12.227
> 
> 标签：java, spring

我在安排石英时遇到此错误。计划正在启动，但在创建 bean 时它在`data-source-context.xml`文件中失败。

我是否需要为环境声明任何值为 oracle 的系统变量？

**数据源上下文.xml 文件**

```
<bean id="environment" class="org.springframework.beans.factory.config.MethodInvokingFactoryBean">
<property name="targetClass" value="java.lang.System" />
<property name="targetMethod" value="setProperty" />
<property name="arguments">
<list>
    <value>environment</value>
    <bean class="java.lang.System" factory-method="getProperty">
        <constructor-arg>
     <value>environment</value>
    </constructor-arg>
<!-- The default value of the environment property -->
    <constructor-arg>
     <value>oracle</value>
    </constructor-arg>
    </bean>
</list>
</property>
</bean> 
```

**安慰：**

```
Jan 2, 2013 4:06:00 PM org.springframework.context.support.AbstractApplicationContext prepareRefresh
INFO: Refreshing org.springframework.context.support.ClassPathXmlApplicationContext@4a804a80: display name [org.springframework.context.support.ClassPathXmlApplicationContext@4a804a80]; startup date [Wed Jan 02 16:06:00 GMT+05:30 2013]; root of context hierarchy
Jan 2, 2013 4:06:00 PM org.springframework.beans.factory.xml.XmlBeanDefinitionReader loadBeanDefinitions
INFO: Loading XML bean definitions from class path resource [DWH/DWH-config.xml]
Jan 2, 2013 4:06:00 PM org.springframework.beans.factory.xml.XmlBeanDefinitionReader loadBeanDefinitions
INFO: Loading XML bean definitions from class path resource [global-config.xml]
Jan 2, 2013 4:06:00 PM org.springframework.beans.factory.xml.XmlBeanDefinitionReader loadBeanDefinitions
INFO: Loading XML bean definitions from class path resource [data-source-context.xml]
Jan 2, 2013 4:06:00 PM org.springframework.context.support.AbstractApplicationContext obtainFreshBeanFactory
INFO: Bean factory for application context [org.springframework.context.support.ClassPathXmlApplicationContext@4a804a80]: org.springframework.beans.factory.support.DefaultListableBeanFactory@24152415
Jan 2, 2013 4:06:00 PM org.springframework.beans.factory.support.DefaultSingletonBeanRegistry destroySingletons
INFO: Destroying singletons in org.springframework.beans.factory.support.DefaultListableBeanFactory@24152415: defining beans [dataSource,sessionFactory,transactionManager,environment,overrideProperties,placeholderProperties,lobHandler,incrementerParent,tm,jobRegistryBeanPostProcessor,jobRegistry,jobRepository,mapJobInstanceDao,mapJobExecutionDao,mapStepExecutionDao,jdbcTemplate,jobLauncher,essJob,essStep,essSkipStep,backOff,customEditorConfigurer,DWHDailyJob,initTask,directory,reader,dbWriter,skiplis,exitTask,inpFile,clean,cleanUpTask,temp]; root of factory hierarchy
[DWHMJobDetail] Job Terminated in error:
**    org.springframework.beans.factory.BeanCreationException:Error creating bean with name 'environment' defined in class path resource [data-source-context.xml]: Initialization of bean failed; nested exception is java.lang.NullPointerException    **
    at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.doCreateBean(AbstractAutowireCapableBeanFactory.java:478)
    at 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-02T13:21:24.547

看起来你还没有在 JVM 中设置环境。在 JVM 设置中指定您的环境，例如

```
-DTEST.ENVIRONMENT=test 
```

# c# - 如何隐藏浏览器导航？

> ID：14120722
> 
> 赞同：0
> 
> 时间：2013-01-02T10:49:18.420
> 
> 标签：c#, winforms, navigation, browser

我有一个在 webbrowser 上加载显示登录表单的表单。当用户登录然后退出而不注销时，它会在下次启动时自动将他注销并再次向他显示登录表单。要从需要的站点 2 导航注销，但我不让用户看到该导航，我希望浏览器为白色，直到所有导航完成或类似的东西。

```
bool f = true;

private void Form1_Load(object sender, EventArgs e)
{
    wbLoad.Navigate("http://login.uid.me/?site=dmysite&ref=http://mysite.ucoz.com/");
}

private void wbLoad_DocumentCompleted(object sender, WebBrowserDocumentCompletedEventArgs e)
{
    if (f == true)
    {
        if (wbLoad.DocumentText.Contains("Sign up"))
        {
            wbLoad.Navigate("http://login.uid.me/?site=dmysite&ref=http://mysite.ucoz.com/");
            f = false;
        }
        else if (wbLoad.DocumentText.Contains("Log out"))
        {
            wbLoad.Navigate("http://mysite.ucoz.com/index/10");
            f = true;
        }
        else
        {
            wbLoad.Navigate("http://uid.me/logout/?mode=1&noajax=1");
            f = true;
        }
    }
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-02T11:43:10.537

注销意味着在大多数情况下只是删除当前主机的 cookie。如果是您的情况，您可以使用 javascript 来完成。请注意，此 JS 将仅删除当前主机的 cookie。你可以在`FormClosing`事件中调用它

```
wbLoad.Navigate("javascript:void((function(){var a,b,c,e,f;f=0;a=document.cookie.split('; ');for(e=0;e<a.length&&a[e];e++){f++;for(b='.'+location.host;b;b=b.replace(/^(?:%5C.|[^%5C.]+)/,'')){for(c=location.pathname;c;c=c.replace(/.$/,'')){document.cookie=(a[e]+'; domain='+b+'; path='+c+'; expires='+new Date((new Date()).getTime()-1e11).toGMTString());}}}})())"); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-02T11:01:37.387

您需要在 Form Close 事件或其他地方编写注销概念。因此，下次当用户打开该时间时，它将自动重定向到登录页面。并且需要在注销后刷新所有对象。

# android - 使用 gps 捕获经纬度而不会耗尽电池电量

> ID：14120726
> 
> 赞同：0
> 
> 时间：2013-01-02T10:50:05.853
> 
> 标签：android, geolocation

在我的应用程序中，我想使用具有特定间隔的 gps 来捕获 lat long。间隔应为 5 或 10 分钟。我的问题是 GPS 仅在捕获位置时启用，或者它始终启用 GPS 以查找位置更新

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-02T10:51:40.573

您应该使用编程启用和禁用 gps 当您想要获取位置时，您应该启用它，否则禁用它。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-02T10:55:57.913

实际上，您可以使用[LocationManager.requestSingleUpdate](http://developer.android.com/reference/android/location/LocationManager.html#requestSingleUpdate%28java.lang.String,%20android.location.LocationListener,%20android.os.Looper%29)。`requestSingleUpdate()`收到位置后，向线程的处理程序发布一条消息，以在 15 分钟内触发另一个请求。

# apache-flex - flex http请求，包含特殊字符时如何设置header属性

> ID：14120727
> 
> 赞同：0
> 
> 时间：2013-01-02T10:50:06.120
> 
> 标签：apache-flex, http, actionscript

我的任务是在flex中调用一些api，并使用HTTPService向服务器发送请求。如果我想从服务器检索任何数据，则必须对其进行身份验证。身份验证信息放在请求的标头中。现在的问题是如果属性包含一些特殊字符（例如冒号），那么请求将不起作用，这意味着身份验证失败。实际上这个属性被忽略了。设置这些属性时是否需要一些编码？

```
// this attribute will be negelected, for colons are contained in it.
http.headers["X-wsse"] = "Created=\"2013-01-02T11:29:13+01:00\""; 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-02T11:14:29.583

冒号在 HTTP 标头字段值中并不特殊。

您可能需要查看“X-wsse”的文档（无论是什么）。

# arrays - 将数组拆分为 P 个平衡和的子数组的算法

> ID：14120729
> 
> 赞同：26
> 
> 时间：2013-01-02T10:50:14.303
> 
> 标签：arrays, algorithm, parallel-processing, load-balancing

我有一个长度为 N 的大数组，比如说：

```
2 4 6 7 6 3 3 3 4 3 4 4 4 3 3 1 
```

我需要将此数组拆分为 P 个子数组（在此示例中`P=4`是合理的），以便每个子数组中的元素之和尽可能接近 sigma，即：

```
sigma=(sum of all elements in original array)/P 
```

在这个例子中，`sigma=15`。

为了清楚起见，一种可能的结果是：

```
2 4 6    7 6 3 3   3 4 3 4    4 4 3 3 1
(sums: 12,19,14,15) 
```

我已经编写了一个非常幼稚的算法，基于我将如何手动进行除法，但我不知道如何强加一个条件，即总和为 (14,14,14,14,19) 的除法比一个差即 (15,14,16,14,16)。

先感谢您。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-02T21:39:23.280

首先，让我们通过为每个可能的解决方案指定输入、输出和度量来形式化您的优化问题（我希望这符合您的兴趣）：

> 给定一个正整数数组*A*和一个正整数*P*，将数组*A*分成*P*个不重叠的子数组，使得每个子数组的和与子数组的完美和 (sum( *A* )/ *P* ) 之间的差异最小.
> 
> **输入**：正整数数组*A*；*P*是一个正整数。
> **输出**：由*P*个非负整数组成的数组*SA表示**A*的每个子数组的长度，其中这些子数组长度的总和等于*A*的长度。**度量**： abs(sum( *sa* )-sum( *A* )/ *P* ) 对于每个*sa* ∈ { *sa* |是最小的 *sa* = ( *A* [*i*] , ..., *A* [*i*] [+‍<em>SA] [[*j*]] ) 对于*i* = (Σ *SA* ******************[*j*] ), *j*从 0 到*P* -1}。******************

 *****输入*和*输出*定义了一组有效的解决方案。*度量*定义了比较多个有效解决方案的度量。而且由于我们正在寻找与完美解决方案（最小化问题）差异最小的解决方案，因此*度量*也应该是最小的。

有了这些信息，就很容易实现这个`measure`函数（这里是 Python）：

```
def measure(a, sa):
    sigma = sum(a)/len(sa)
    diff = 0
    i = 0
    for j in xrange(0, len(sa)):
        diff += abs(sum(a[i:i+sa[j]])-sigma)
        i += sa[j]
    return diff

print measure([2,4,6,7,6,3,3,3,4,3,4,4,4,3,3,1], [3,4,4,5]) # prints 8 
```

现在找到一个最佳解决方案有点困难。

我们可以使用[回溯算法](http://en.wikipedia.org/wiki/Backtracking)来寻找有效的解决方案，并使用*度量*函数对它们进行评分。我们基本上尝试所有可能的*P*个非负整数的组合，总和为 length( *A* )，以表示所有可能的有效解决方案。尽管这确保不会错过有效的解决方案，但它基本上是一种蛮力方法，其好处是我们可以省略一些不能比我们最好的解决方案更好的分支。例如，在上面的例子中，如果我们已经有了一个*measure* ≤ 38的解，我们就不需要用 [9,…] ( *measure > 38) 来测试解。*

 *按照维基百科的伪代码模式，我们的`bt`函数如下所示：

```
def bt(c):
    global P, optimum, optimum_diff
    if reject(P,c):
        return
    if accept(P,c):
        print "%r with %d" % (c, measure(P,c))
        if measure(P,c) < optimum_diff:
            optimum = c
            optimum_diff = measure(P,c)
        return
    s = first(P,c)
    while s is not None:
        bt(list(s))
        s = next(P,s) 
```

全局变量`P`、`optimum`和`optimum_diff`表示保存*A*、*P*和*sigma*值的问题实例，以及最优解及其度量：

```
class MinimalSumOfSubArraySumsProblem:
    def __init__(self, a, p):
        self.a = a
        self.p = p
        self.sigma = sum(a)/p 
```

接下来我们指定非常简单的`reject`和函数：`accept`

```
def reject(P,c):
    return optimum_diff < measure(P,c)
def accept(P,c):
    return None not in c 
```

这简单地拒绝了任何其度量已经超过我们的最佳解决方案的候选人。我们接受任何有效的解决方案。

`measure`由于`c`现在可以包含`None`值，因此该函数也略有更改：

```
def measure(P, c):
    diff = 0
    i = 0
    for j in xrange(0, P.p):
        if c[j] is None:
            break;
        diff += abs(sum(P.a[i:i+c[j]])-P.sigma)
        i += c[j]
    return diff 
```

剩下的两个函数`first`和`next`稍微复杂一点：

```
def first(P,c):
    t = 0
    is_complete = True
    for i in xrange(0, len(c)):
        if c[i] is None:
            if i+1 < len(c):
                c[i] = 0
            else:
                c[i] = len(P.a) - t
            is_complete = False
            break;
        else:
            t += c[i]
    if is_complete:
        return None
    return c

def next(P,s):
    t = 0
    for i in xrange(0, len(s)):
        t += s[i]
        if i+1 >= len(s) or s[i+1] is None:
            if t+1 > len(P.a):
                return None
            else:
                s[i] += 1
            return s 
```

基本上，如果它不是列表中的最后一个值，或者如果它不是列表中的最后一个值，或者如果它是列表中的最后一个值，则将其`first`替换为表示有效解决方案的余数（这里很少优化），或者如果存在则返回列表中没有值。只需将最右边的整数加一，如果增量超出总限制，则返回。`None``0``None``None``next``None`

现在您只需要创建一个问题实例，初始化全局变量并`bt`使用 root 调用：

```
P = MinimalSumOfSubArraySumsProblem([2,4,6,7,6,3,3,3,4,3,4,4,4,3,3,1], 4)
optimum = None
optimum_diff = float("inf")
bt([None]*P.p) 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-03-26T10:50:31.010

如果我在这里没记错的话，另一种方法是动态编程。

如果创建了*n*个子数组，您可以将*P* [ *pos* , *n* ] 定义为累积到位置*pos*的最小可能“惩罚” 。显然有一些位置 pos' 这样

 *P[pos', n-1] + 罚分(pos', pos) = P[pos, n]

您可以最小化 pos' = 1..pos。

天真的实现将在 O(N^2 * M) 中运行，其中 N - 原始数组的大小和 M - 分割数。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2019-03-06T14:50:14.543

@Gumbo 的答案是明确且可操作的，但是当 length(A) 大于 400 且 P 大于 8 时会花费大量时间。这是因为该算法有点像他所说的那样具有好处的蛮力。

事实上，一个非常快速的解决方案是使用**动态规划**。

给定一个正整数数组 A 和一个正整数 P，将数组 A 分成 P 个不重叠的子数组，使得每个子数组的和与子数组的完美和之间的差 (sum(A)/P) 最小.

> **度量：** ![](../Images/5bc959a575846df6e1742d4f3502f538.png)，其中![](../Images/26f64ec9dc30c05b8421d0c1546efd9e.png)是子数组 元素的总和![](../Images/585b43f8d03a8031fd30ab042f23adbe.png)，![](../Images/c5669a354b081e1cf8ade8369c281767.png)是 P 个子数组总和的平均值。
> 
> 这样可以保证 sum 的平衡，因为它使用了[Standard Deviation](https://en.wikipedia.org/wiki/Standard_deviation)的定义。

假设数组 A 有 N 个元素；**Q(i,j)**表示将 A 的最后 i 个元素拆分为 j 个子数组时的最小 Measure 值。**D(i,j)**表示`(sum(B)-sum(A)/P)^2`数组 B 由 A ( `0<=i<=j<N`) 的第 i~j 个元素组成。

问题的最小度量是计算 Q(N,P)。我们发现：

```
Q(N,P)=MIN{Q(N-1,P-1)+D(0,0); Q(N-2,P-1)+D(0,1); ...; Q(N-1,P-1)+D(0,N-P)} 
```

所以它可以通过**动态规划**来解决。

```
 Q(i,1) = D(N-i,N-1)

 Q(i,j) = MIN{ Q(i-1,j-1)+D(N-i,N-i); 
               Q(i-2,j-1)+D(N-i,N-i+1); 
               ...; 
               Q(j-1,j-1)+D(N-i,N-j)} 
```

所以算法步骤是：

```
 1\. Cal j=1:

    Q(1,1), Q(2,1)... Q(3,1)

 2\. Cal j=2:

    Q(2,2) = MIN{Q(1,1)+D(N-2,N-2)};

    Q(3,2) = MIN{Q(2,1)+D(N-3,N-3); Q(1,1)+D(N-3,N-2)}

    Q(4,2) = MIN{Q(3,1)+D(N-4,N-4); Q(2,1)+D(N-4,N-3); Q(1,1)+D(N-4,N-2)}

 ... Cal j=...

 P. Cal j=P:

    Q(P,P), Q(P+1,P)...Q(N,P)

The final minimum Measure value is stored as Q(N,P)! 
To trace each subarray's length, you can store the 
MIN choice when calculate Q(i,j)=MIN{Q+D...} 
```

> ![](../Images/feb16087e0865115577616641b0f0583.png)D(i,j) 的空间；
> 
> ![](../Images/f77f2f3ee688404bb7d0ae99df483b10.png)计算 Q(N,P) 的时间
> 
> 与**纯暴力破解算法**相比，消耗![](../Images/516f4d95d598814411f2839c5e97a98e.png)时间。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-01-02T14:48:53.050

下面的工作代码（我使用 php 语言）。此代码自行决定零件数量；

```
$main = array(2,4,6,1,6,3,2,3,4,3,4,1,4,7,3,1,2,1,3,4,1,7,2,4,1,2,3,1,1,1,1,4,5,7,8,9,8,0);
$pa=0;
for($i=0;$i < count($main); $i++){
$p[]= $main[$i];
if(abs(15 - array_sum($p)) < abs(15 - (array_sum($p)+$main[$i+1])))
{
$pa=$pa+1;
$pi[] = $i+1;
$pc =  count($pi);

$ba = $pi[$pc-2] ;

$part[$pa] = array_slice( $main,  $ba, count($p));
unset($p);
}
}
print_r($part);
for($s=1;$s<count($part);$s++){
echo '<br>';
echo array_sum($part[$s]);
} 
```

代码将输出部分总和，如下所示

```
13
14
16
14
15
15
17 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-04-16T16:48:12.363

这与一维**装箱问题**的情况非常相似，参见[http://www.cs.sunysb.edu/~algorith/files/bin-packing.shtml](http://www.cs.sunysb.edu/~algorith/files/bin-packing.shtml)。在相关[的《算法设计手册》](https://rads.stackoverflow.com/amzn/click/com/1848000693)一书中，Skienna 提出了一种**首次拟合递减方法**。即找出你的 bin 大小（平均值 = sum / N），然后将最大的剩余对象分配到第一个有空间的 bin 中。你要么到了不得不开始过度填充垃圾箱的地步，要么如果你很幸运，你会得到一个完美的配合。正如 Skiena 所说，“首次拟合递减对它具有直观的吸引力，因为我们首先打包大件物品，并希望小件物品可以填补裂缝。”

正如之前的海报所说，这个问题看起来是 NP 完全的，所以你不会在合理的时间内完美地解决它，你需要寻找启发式方法。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2013-01-02T12:49:03.800

我提出了一种基于回溯的算法。选择的主函数从原始数组中随机选择一个元素并将其添加到分区数组中。对于每次添加都会检查以获得比原来更好的解决方案。这将通过使用计算偏差的函数来实现，区分每个向页面添加新元素。无论如何，我认为在循环中添加一个原始变量会很好，如果您无法达到所需的解决方案将强制程序结束。通过所需的解决方案，我的意思是添加与 if 条件施加的条件相关的所有元素。

```
sum=CalculateSum(vector)
Read P
sigma=sum/P
initialize P vectors, with names vector_partition[i], i=1..P
list_vector initialize a list what pointed this P vectors
initialize a diferences_vector with dimension of P
//that can easy visualize like a vector of vectors
//construct a non-recursive backtracking algorithm
function Deviation(vector) //function for calculate deviation of elements from a vector
{
  dev=0
  for i=0 to Size(vector)-1 do
  dev+=|vector[i+1]-vector[i]|
  return dev 
}
iteration=0
//fix some maximum number of iteration for while loop
Read max_iteration
//as the number of iterations will be higher the more it will get  
//a more accurate solution
while(!IsEmpty(vector))
{   
   for i=1 to Size(list_vector) do
   {
       if(IsEmpty(vector)) break from while loop
       initial_deviation=Deviation(list_vector[i])
       el=SelectElement(vector) //you can implement that function using a randomized   
                               //choice of element
       difference_vector[i]=|sigma-CalculateSum(list_vector[i])|
       PutOnBackVector(vector_list[i], el)
       if(initial_deviation>Deviation(difference_vector))
          ExtractFromBackVectorAndPutOnSecondVector(list_vector, vector)
    }
    iteration++
    //prevent to enter in some infinite loop
   if (iteration>max_iteration) break from while loop 
```

如果某些代码以计算出的偏差量增加，您可以通过首先添加来更改此设置。aditional_amount=0 iteration=0 while { ... if(initial_deviation>Deviation(difference_vector)+additional_amount) ExtractFromBackVectorAndPutOnSecondVector(list_vector, vector) if(iteration>max_iteration) { iteration=0 aditional_amout+=1/some_constant } iteration++ //删除第二个 if从第一个版本}

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2013-01-02T12:35:00.177

我想知道以下是否可行：

从左边`sum > sigma`开始，一分为二，一个包括推动它的值，一个不包括。`rightSum = totalSum-leftSum`用和递归地向右处理数据`rightP = P-1`。

所以，一开始，总和 = 60

```
2 4 6 7 6 3 3 3 4 3 4 4 4 3 3 1 
```

那么对于`2 4 6 7`, sum = 19 > sigma，所以分成：

```
2 4 6     7 6 3 3 3 4 3 4 4 4 3 3 1

2 4 6 7     6 3 3 3 4 3 4 4 4 3 3 1 
```

然后我们分别处理`7 6 3 3 3 4 3 4 4 4 3 3 1`and`6 3 3 3 4 3 4 4 4 3 3 1`和`P = 4-1`and 。`sum = 60-12``sum = 60-19`

我认为这会导致 O(P*n)。

当 1 或 2 个值迄今为止最大时，这可能是一个问题，但是，对于任何 >= sigma 的值，我们可能可以将其放在它自己的分区中（预处理数组以找到这些可能是最好的主意（并减少适当地求和））。

如果它有效，它应该有望最小化误差平方和（或接近该误差），这似乎是所需的度量。

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2013-02-28T06:04:14.090

[您的问题与最小制造时间调度问题](http://en.wikipedia.org/wiki/Job_shop_scheduling)非常相似或相同，具体取决于您如何定义目标。如果您想最小化最大值`|sum_i - sigma|`，那就是这个问题。

正如 Wikipedia 文章中提到的，这个问题对于`p > 2`. Graham 的[列表调度算法](http://www.risc.jku.at/education/courses/ws96/intropar/sched/index_5.html)对 是最优的`p <= 3`，并提供了一个近似比`2 - 1/p`。您可以查看 Wikipedia 文章以了解其他算法及其近似值。

此页面上给出的所有算法要么解决不同的目标，不正确/次优，要么可用于解决 NP 中的任何问题 :)

* * *

## 回答 #9

> 赞同：0
> 
> 时间：2016-10-07T10:40:42.823

我最近需要这个，并做了如下；

1.  创建一个长度为给定子数组计数的初始子数组数组。子数组也应该有一个 sum 属性。IE`[[sum:0],[sum:0]...[sum:0]]`
2.  对主数组进行降序排序。
3.  搜索总和最小的子数组并从主数组中插入一项，并将子数组的 sum 属性增加插入项的值。
4.  重复第 3 项，直到到达主数组的末尾。
5.  返回`initial`数组。

这是JS中的代码。

```
function groupTasks(tasks,groupCount){
  var  sum = tasks.reduce((p,c) => p+c),
   initial = [...Array(groupCount)].map(sa => (sa = [], sa.sum = 0, sa));
  return tasks.sort((a,b) => b-a)
              .reduce((groups,task) => { var group = groups.reduce((p,c) => p.sum < c.sum ? p : c);
                                         group.push(task);
                                         group.sum += task;
                                         return groups;
                                       },initial);
}

var tasks = [...Array(50)].map(_ => ~~(Math.random()*10)+1), // create an array of 100 random elements among 1 to 10
   result = groupTasks(tasks,7);                             // distribute them into 10 sub arrays with closest sums

console.log("input array:", JSON.stringify(tasks));
console.log(result.map(r=> [JSON.stringify(r),"sum: " + r.sum]));
```

* * *

## 回答 #10

> 赞同：-1
> 
> 时间：2013-01-02T19:22:37.213

您可以使用最大流量算法。******

# asp.net - 具有 Windows 身份验证的 IIS 7.5 Web 应用程序是否要求最终用户具有文件权限？

> ID：14120734
> 
> 赞同：27
> 
> 时间：2013-01-02T10:50:25.797
> 
> 标签：asp.net, iis, iis-7.5, windows-authentication

简洁版本：

> 对于具有 Windows 身份验证的 IIS 7.5 Web 应用程序，最终用户是否需要具有读取文件访问权限？

长版：

我有一个使用 Windows 身份验证的 Intranet ASP.NET Web 应用程序。它安装在数十家不同的公司，通常验证工作正常：用户导航到该站点，例如`http://appserver/MyApp`，该应用程序识别他们登录的身份并相应地显示页面。我刚刚在一个新客户端上安装了它，遇到了一个问题：

例如，当连接到时，系统会`http://appserver/MyApp`提示我输入 Windows 凭据，但在输入它们后，我会反复提示。多次重新输入凭据后，我看到一个 401 错误页面，上面写着“401 - 未经授权：由于凭据无效，访问被拒绝。”。因此，它不仅没有通过我的身份，而且即使输入用户名和密码，它仍然拒绝访问。

**向应用程序的最终用户授予读取和执行权限可以解决此问题**，但我认为这根本没有必要。

在 Windows 应用程序事件日志中，有一条消息“请求的文件授权失败”以及线程帐户名称：NT AUTHORITY\NETWORK SERVICE 和用户：*[正确的工作站用户的域帐户]*。这表明**文件访问是使用用户的身份执行的，而不是**网络服务的 AppPool 身份。果然，如果我授予最终用户对应用程序目录的读取和执行权限（我没有尝试只读），那么一切正常：当用户浏览到该站点时，他们会自动进行身份验证，而不是提示，并且网站正确识别自己的身份！因此，我的解决方案是向应用程序目录中的每个人授予读取和执行权限...

这似乎很奇怪。据我记得，我以前在 IIS 7.5 中从来不需要这样做，而且在 IIS 6 或 IIS 7 中绝对不需要这样做。这是 IIS7.5 的新事物吗？文档说默认情况下模拟是关闭的。我在 web.config 中添加了一个元素以确保删除了网络服务以外的文件权限，但问题仍然存在。

有什么想法吗？对于 IIS 7.5 上的 Windows Authenticated 站点，最终用户需要对 Web 服务器文件的文件权限是否正常？

一些相关细节：

*   **网络服务对应用文件夹具有完全控制文件权限。**
*   当从服务器本身连接时，我被提示输入凭据，但在输入凭据后，我已通过身份验证并且应用程序正常工作，包括显示我的 Windows 登录名以及连接和检索数据库中的数据。我后来确定它正在提示输入凭据，因为`http://localhost`它位于受信任的站点中，因此未被识别为 Intranet 区域，因此没有传递身份。我还确定它作为此用户身份工作，因为它是具有文件权限的管理员用户。
*   Web 服务器正在运行 Windows Server 2008 R2 / IIS 7.5。在我安装它之前，它上面没有 IIS。我安装了默认功能以及 Windows 身份验证、ASP.NET 以及可能的其他一些项目。我安装的一个使用 IIS、匿名身份验证和 .net 2.0 的单独 WCF 应用程序在该 Web 服务器上运行良好。
*   应用程序安装过程是文件的手动副本、IIS 应用程序池和 Web 应用程序的创建、更新连接字符串等。
*   我检查了 IE 安全设​​置。它将服务器识别为 Intranet 区域，并选择了“仅在 Intranet 区域中自动登录”选项。同样在“高级设置”中，“启用集成 Windows 身份验证”选项已被选中。
*   安装 IIS 后，我运行`aspnet_regiis -i`了 .net 2.0 和 `aspnet_regiis -iru`.net 4.0。
*   我的应用程序禁用了匿名身份验证，并启用了 Windows 身份验证。
*   该应用程序在 ASP.NET v4 上运行，但我安装的另一个应用程序在运行 ASP.NET v2 时遇到了同样的问题。
*   该应用程序使用 Identity = Network Service 和 32 位模式运行。
*   数据库连接字符串包括`Trusted Connection=True`和数据库权限被授予 Web 服务器帐户，`[domain]\[server]$` 例如`DGM\MyServer$`。
*   在 IIS > 身份验证 > Windows 身份验证 > 提供程序中，列表首先是协商，然后是 NTLM。我尝试重新排序，所以 NTLM 是第一位的。
*   在 Windows 安全事件日志中有一系列 Microsoft Windows 安全审核事件：登录和注销。他们表示登录成功并显示工作站用户的用户 ID。这是从我从另一个工作站连接并在几次尝试后收到 401 Unauthorized 时开始的。

我看到有人在[这里报告](https://stackoverflow.com/questions/9383695/asp-net-mvc-3-intranet-site-on-iis7-5-w-windows-authentication-gives-401-3-and-f)了这个问题，但没有解决方案。最初我在[ASP](http://forums.asp.net/p/1867357/5246954.aspx)中发布，然后在[IIS](http://forums.iis.net/p/1193787/2037421.aspx)论坛上发布，到目前为止还没有答案。

更新： [这篇 msdn 文章](http://msdn.microsoft.com/en-us/library/gg703322%28v=vs.98%29.aspx)说

> 当启用 Windows 身份验证但禁用模拟时，ASP.NET**使用从浏览器发送的凭据在**[文件授权](http://msdn.microsoft.com/en-us/library/system.web.security.fileauthorizationmodule.aspx)模块中执行文件访问检查*（我的重点）* ***. 不需要启用模拟，因为 FileAuthorizationModule 模块确保请求用户被允许对资源进行读取访问或写入访问，具体取决于执行请求之前的请求动词（例如，GET 或 POST）。此行为适用于输入托管代码的任何请求。在早期版本的 ASP.NET 中，访问基于诸如“Default.aspx”之类的 URI 的文件会触发访问检查。在 ASP.NET MVC 应用程序中，通常使用无扩展名 URL 执行对资源的访问，此检查通常不适用，因为没有要检查的物理文件。在这种情况下，FileAuthorizationModule 类回退到检查文件夹的访问控制列表 (ACL)。***

 ***这确实表明最终用户需要对文件（在 .aspx 的情况下）或文件夹（对于 MVC）的权限......尽管这似乎仍然有些隐蔽且不确定。[这篇](http://www.iis.net/learn/manage/configuring-security/application-pool-identities)关于应用程序池的文章说它们被用作保护资源的身份，这与需要向最终用户授予权限的想法相矛盾。除非应用程序池和网络服务的规则不同，否则可能会出现这种情况，但会令人惊讶。

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-01-09T19:46:08.763

是否允许经过身份验证的用户访问 app 文件夹？

![在此处输入图像描述](../Images/91e67278cfb9367881d729f6ce9aba63.png)

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2013-07-24T17:33:56.593

我们也在与这个问题作斗争，并开始设置安全组，以便我们可以给我们的用户文件级权限。然后，我们的一位服务器管理员偶然发现了几个新属性，这些属性允许应用程序在设置的凭据下对文件系统进行身份验证，并解决了用户访问权限的需要。这是他想出的……</p>

> 有两个 IIS 设置可以控制这一点：
> 
> 物理路径凭据 物理路径凭据 登录类型
> 
> 默认情况下，物理路径凭据设置为应用程序用户（直通身份验证）。这意味着 IIS 在处理 Windows 身份验证请求时不会进行任何模拟。但是，这可以设置为特定用户（但不幸的是，应用程序池标识不是，这将是理想的）。物理路径凭据登录类型默认设置为明文。对于我的测试，我将其设置为 Interactive（尽管这可能不是正确的值）。可能的值为 Clear-Text、Batch、Interactive 和 Network。
> 
> 为了设置它，我做了以下事情：
> 
> 1.  创建本地帐户（IIS-AccessUser）
> 2.  授予 IIS-AccessUser 对站点 /home 目录的读取和执行访问权限。
> 3.  将 IIS-AccessUser 添加到 IIS_IUSRS 组（访问 .NET 临时文件所必需的）
> 4.  将 IIS-AccessUser 设置为物理路径凭据
> 5.  将物理路径凭据登录类型设置为交互式
> 
> 执行上述操作后，我可以直接登录应用程序，而无需允许经过身份验证的用户，或者我必须成为 /home 文件夹中任何组的成员。它还保留了 .NET 授权角色，因此我仍然无法访问我不允许访问的站点部分。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2015-07-15T21:04:02.110

最简洁的答案是不。在 IIS 7.0 和 IIS 7.5 中使用 Windows 身份验证时，您不需要授予文件访问权限。

我们之所以能够发现这一点，是因为我们的服务器管理员嗅到了向用户和组授予文件级别访问权限的途径所产生的安全和管理问题。

对于处理此问题的任何人，或者如果您正在设置新的 IIS7/IIS7.5 服务器和/或从 IIS 6 迁移，这里有一篇文章为您提供了所有需要修改以避免的 Windows 身份验证选项和配置授予个人或团体文件级访问权限。

请阅读 POST 末尾的两条评论，以获得对本文中使用的方法的一些有效批评。

[http://weblogs.asp.net/owscott/iis-using-windows-authentication-with-minimal-permissions-granted-to-disk](http://weblogs.asp.net/owscott/iis-using-windows-authentication-with-minimal-permissions-granted-to-disk)

除了文章中的信息，请注意 IIS 7.5 没有使用 system.web 的 web 配置标签（至少在我的 MVC 4 应用程序中没有）。

它在 system.webserver 标记中查找授权配置（您需要在其中列出用户访问您的应用程序所需的 Windows 域\组）。

-- DSB***

# json - $.getJSON 返回数组，$.each 需要帮助

> ID：14120741
> 
> 赞同：0
> 
> 时间：2013-01-02T10:50:41.883
> 
> 标签：json, asp.net-mvc-3

我在我的视图中有这段代码，它在一个循环中，它为我提供了两行 console.log

```
var jqxhr = $.getJSON("<%= Url.Action("GetTrainingModulePoints" , "Home") %>", function (data) {
      console.log(JSON.stringify(data));
   });
   <%: Html.GetQTip("training-module-id-" + module.TrainingModuleId , "With assesment"  , "training-module-id-" + module.TrainingModuleId , Zinc.Web.Extensions.QTipPosition.Bottom, true, "Module Points") %> 
```

在我的控制器中：

```
public JsonResult GetTrainingModulePoints()
{
  var currentUser = ZincService.GetUserForId(CurrentUser.UserId);
  IEnumerable<DataModels.Training.UserTrainingPointsDataModel> modulePoints = ZincService.TrainingService.GetTrainingModulePoints(currentUser.UserId);
  return Json(new { result = modulePoints}, JsonRequestBehavior.AllowGet);
} 
```

每个 console.log 给出：

```
 LOG: {"result":[{"InteractionType":6,"Points":50,"Name":"China Incentive Program"},{"InteractionType":8,"Points":1,"Name":"China Incentive Program"},{"InteractionType":6,"Points":50,"Name":"India - Q2 Incentive "},{"InteractionType":8,"Points":100,"Name":"India - Q2 Incentive "},{"InteractionType":6,"Points":50,"Name":"China - Q2 Incentive"},{"InteractionType":8,"Points":3,"Name":"China - Q2 Incentive"}]} 

 LOG: {"result":[{"InteractionType":6,"Points":50,"Name":"China Incentive Program"},{"InteractionType":8,"Points":1,"Name":"China Incentive Program"},{"InteractionType":6,"Points":50,"Name":"India - Q2 Incentive "},{"InteractionType":8,"Points":100,"Name":"India - Q2 Incentive "},{"InteractionType":6,"Points":50,"Name":"China - Q2 Incentive"},{"InteractionType":8,"Points":3,"Name":"China - Q2 Incentive"}]} 
```

我怎样才能获得交互类型、名称和点数？

```
public static MvcHtmlString GetQTip(this HtmlHelper htmlHelper, string propertyName, string message, string propertyNameOverride = "", QTipPosition position = QTipPosition.Right, bool includeEvents = true, string title = "")
{
  string qtipPosition = String.Empty;

  switch (position)
  {
    case QTipPosition.Right:
      qtipPosition = "my: 'left center', at: 'right center'";
      break;
    case QTipPosition.Left:
      qtipPosition = "my: 'right center', at: 'left center'";
      break;
    case QTipPosition.Top:
      qtipPosition = "my: 'top middle', at: 'bottom middle'";
      break;
    case QTipPosition.Bottom:
      qtipPosition = "my: 'bottom middle', at: 'top middle'";
      break;
  }

  if (!String.IsNullOrWhiteSpace(propertyNameOverride))
    propertyName = propertyNameOverride;

  if (String.IsNullOrWhiteSpace(title))
    title = htmlHelper.Resource(Resources.Global.Title.Information);

  StringBuilder sb = new StringBuilder();
  sb.Append(String.Concat("$('#", propertyName, "').removeData('qtip').qtip({content: {text:"));
  sb.Append(String.Concat("'", message, "', title: { text: '", title, "', button: false }}, position: { ", qtipPosition, " }"));
  if (includeEvents)
    sb.Append(", show: { event: 'focus mouseenter', solo: true, ready: false }, hide: 'blur'");
  sb.Append(", style: { classes: 'ui-tooltip-shadow ui-tooltip-yellow' } });");

  return new MvcHtmlString(sb.ToString());
  }
}

 public sealed class MvcHtmlString : HtmlString
 {

 } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-02T11:01:03.257

只需使用以下[`$.each()`](http://api.jquery.com/jQuery.each/)功能：

```
var url = '<%= Url.Action("GetTrainingModulePoints" , "Home") %>';
var jqxhr = $.getJSON(url, function (data) {
    $.each(data.result, function() {
        var interactionType = this.InteractionType;
        var name = this.Name;
        var points = this.Points;
        // do something with those variables ...
    });
}); 
```

在这里，我们循环遍历`data.result`集合，其中每个元素代表一个对象，根据您显示的日志，该对象具有`InteractionType`,`Points`和属性。`Name`显然将`$.each`针对结果集合的每个元素执行。

* * *

更新：

在我们在评论部分进行的小型讨论之后，您似乎在这里做了一些根本错误的事情。您正在尝试将使用 AJAX 在客户端上检索到的服务器端帮助程序值传递给服务器。这是不可能的，它有任何意义。

所以你应该在服务器上绑定。你根本不应该做任何 AJAX 请求。您应该简单地调用您的服务器端助手并将所需的参数传递给它：

```
<%: Html.GetQTip(
    "training-module-id-" + module.TrainingModuleId, 
    Model.Points, 
    "training-module-id-" + module.TrainingModuleId, 
    Zinc.Web.Extensions.QTipPosition.Bottom, 
    true, 
    "Module Points"
) %> 
```

现在您所要做的就是将此`Points`属性添加到您的视图模型中：

```
public string Points { get; set; } 
```

在呈现此视图的控制器操作中，只需设置此属性。您将首先查询您的数据层以检索一个`IEnumerable<UserTrainingPointsDataModel>`，然后对该数组执行一些转换以将其转换为您想要显示的字符串：

```
MyViewModel model = ... get the view model from somewhere
var currentUser = ZincService.GetUserForId(CurrentUser.UserId);
var modulePoints = ZincService.TrainingService.GetTrainingModulePoints(currentUser.UserId);
model.Points = ... transform the original points collection to some string that you want to pass to the helper;
return View(model); 
```

备注：我不知道你把这个`Html.GetQTip`助手带到哪里，但看着它的源代码我很害怕。这个助手不编码任何东西。您的网站容易受到 XSS 攻击。永远不要使用任何字符串连接来构建 javascript 并将变量传递给函数。

# c# - 使用 c# 和 xUnit 在 Visual Studio 2012 的文本资源管理器中显示测试类名称

> ID：14120742
> 
> 赞同：7
> 
> 时间：2013-01-02T10:50:45.143
> 
> 标签：c#, visual-studio-2012, xunit, test-explorer

我在 Visual Studio 2012 中使用带有内置文本资源管理器的 xUnit。如果我有例如

```
namespace Foo.Bar {
    class CatTests {
        [Fact]
        public void Test1(){
        }
    }
} 
```

我会在测试资源管理器中看到

```
Foo.Bar.CatTests.Test1 
```

作为测试的名称。这有可能吗？此刻我只看到

```
Test1 
```

如果我有很多分布在多个命名空间和测试类中的 Test1 用例，这会很痛苦。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2015-05-20T14:44:34.643

目前我们使用 FactAttribute 的 DisplayName：

```
[Fact(DisplayName = "Foo.Bar.CatTests.Test1")] 
```

似乎这不能自动完成，但如果可以的话肯定会很好。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2020-01-23T12:02:21.667

[您可以使用此](https://stackoverflow.com/a/41643793)SO 答案`xunit.runner.json`中所述的特定配置文件 ( )更改测试在测试资源管理器中的显示方式。

此外，您可能需要更改 IDE 中的分组设置以显示类名而不是完整路径。

# sql - asp.net mvc c#更改子记录中的slug

> ID：14120743
> 
> 赞同：0
> 
> 时间：2013-01-02T10:50:52.977
> 
> 标签：sql, asp.net-mvc, linq, linq-to-sql, stored-procedures

我有这些记录来自我在 linq to sql 中调用的存储过程

```
int_PostTypeId  vcr_PostType    int_PostTypeId_fk   vcr_Slug       HLevel

  49                 c            36                    c             1

  77                 e            49                    c/e           2

  78                 f            77                   c/e/f          3

  79                 g            77                   c/e/g          3 
```

我有这些记录。

假设在编辑**int_PostTypeId** 49 时我将**slug**更改为**c1**

1）现在子记录中的slug也应该改变。

77 中的 slug 将变为 c1/e 78 中的 slug 将变为 c1/e/f 79 中的 slug 将变为 c1/e/g

2) 如果我编辑记录 77 并将 slug 更改为 c/e2，则 slug 78 和 79 也应更改为 c/e2/f 和 c/e2/g。

因此，编辑记录中的 slug 将更改子 slug（如果存在）。在 linq 中最合适和最有效的方法是什么。我正在采用递归循环路径，但我认为这是非常低效的。对更一般的方法有什么想法吗？或任何其他方法。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-02T14:57:37.573

如果我对您的理解正确，那么您实际上是在更新`vcr_Slug`某处记录中调用的列，而不是在存储过程中构建列的值。既然您实际上使用的是存储过程，为什么不计算列的值呢？我不确定您是否使用递归公用表表达式来选择结果，但如果是，它可能采用如下形式（对您的表结构做出一些假设，当然，这可能不会，完全具有代表性）：

```
CREATE FUNCTION dbo.GetPostTypes(@ParentTypeID int)

RETURNS TABLE

AS RETURN

(

WITH CurrentPostTypes(int_PostTypeId, vcr_PostType, int_PostTypeId_fk, vcr_Slug,
                      HLevel)
AS
(
-- Anchor member definition
    SELECT pt.int_PostTypeId, pt.vcr_PostType, pt.int_PostTypeId_fk,
           pt.vcr_Slug, 1 AS HLevel
    FROM dbo.tblPostTypes AS pt
    WHERE pt.int_PostTypeId = @ParentTypeID
    UNION ALL
-- Recursive member definition
    SELECT pt.int_PostTypeId, pt.vcr_PostType, pt.int_PostTypeId_fk,
           cpt.vcr_Slug + '/' + pt.vcr_Slug AS vcr_Slug, cpt.HLevel + 1 AS HLevel
    FROM dbo.tblPostTypes AS pt
    INNER JOIN CurrentPostTypes AS cpt
        ON pt.int_PostTypeId_fk = cpt.int_PostTypeId
)

SELECT *
FROM CurrentPostTypes

) 
```

您会注意到在递归成员定义中，前一个值`vcr_Slug`以斜线和当前记录的列值作为后缀：`cpt.vcr_Slug + '/' + pt.vcr_Slug AS vcr_Slug`

# python - 是否可以（并且安全）在本地使用 Python 插入和更新 MySQL 数据库。

> ID：14120747
> 
> 赞同：-1
> 
> 时间：2013-01-02T10:50:59.440
> 
> 标签：python, mysql, database, security

我对 Python 很陌生，但一直在使用 Komodo 编辑在本地运行一些程序，然后手动将结果上传到我网站的 MySQL 数据库。

我正在考虑让 Python 自己执行此操作，但据我了解，我必须向任何人打开我的 MySQL 数据库，无论他们是否在我的服务器上运行脚本，如果我要这样做。

我猜这是出于安全原因，但我不知道这会使我的网站变得多么脆弱？这样做是个坏主意，还是从服务器本身运行我的 python 程序会更好？（我从来没有从我的服务器上运行过 python 代码，而且我的 python 代码也可能不安全）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-02T10:59:04.037

如果您可以访问整个服务器（即不仅仅是一些共享主机设置中常见的主机目录），并且可以 ssh 进入服务器，那么您最安全（虽然不是最简单）的选择是将脚本放在服务器上在网络托管文件夹之外。这将阻止任何人远程访问脚本，并允许您在不启用远程连接的情况下连接到数据库。

如果您的托管服务器设置允许，您可以启用远程连接（不确定是否有任何托管公司禁用或阻止它，尽管您可能必须在创建数据库时从一开始就启用它）只需选择一个不错的强密码。然后您可以在本地使用您的脚本，并且您将与您的密码一样安全。

# android - 如何在我的 android 应用程序中使用 itext 库从 pdf 文件中提取图像

> ID：14120748
> 
> 赞同：1
> 
> 时间：2013-01-02T10:50:59.217
> 
> 标签：android

我想使用 itext 库从 pdf 文件中提取图像，我将 pdf 文件放在 android 应用程序的资产文件夹中，并使用 itext 库在 android 中显示这些图像。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-02T11:35:08.870

`iText`是一个java库，所以它可以在android中使用。

你可以保存到资产文件夹。**没有**。它的只读

而是尝试保存到 SD 卡。

请查看[https://github.com/itext/i7js-samples/tree/develop/publications/book/src/test/java/com/itextpdf/samples/book/part4/chapter15](https://github.com/itext/i7js-samples/tree/develop/publications/book/src/test/java/com/itextpdf/samples/book/part4/chapter15) esp。文件：Listing_15_30/31*.java 他们应该教你如何在 iText 中提取图像

为安卓定制

```
import com.itextpdf.text.pdf.parser.ImageRenderInfo;
import com.itextpdf.text.pdf.parser.PdfImageObject;
import com.itextpdf.text.pdf.parser.RenderListener;
import com.itextpdf.text.pdf.parser.TextRenderInfo;

public class MyImageRenderListener implements RenderListener {

/** The new document to which we've added a border rectangle. */
protected String path = "";

/**
 * Creates a RenderListener that will look for images.
 */
public MyImageRenderListener(String path) {
    this.path = path;
}

/**
 * @see com.itextpdf.text.pdf.parser.RenderListener#beginTextBlock()
 */
public void beginTextBlock() {
}

/**
 * @see com.itextpdf.text.pdf.parser.RenderListener#endTextBlock()
 */
public void endTextBlock() {
}

/**
 * @see com.itextpdf.text.pdf.parser.RenderListener#renderImage(
 *     com.itextpdf.text.pdf.parser.ImageRenderInfo)
 */
public void renderImage(ImageRenderInfo renderInfo) {
    try {
        String filename;
        FileOutputStream os;
        PdfImageObject image = renderInfo.getImage();
        if (image == null) return;
        filename = String.format(path, renderInfo.getRef().getNumber(), image.getFileType());
        os = new FileOutputStream(filename);
        os.write(image.getImageAsBytes());
        os.flush();
        os.close();
    } catch (IOException e) {
        System.out.println(e.getMessage());
    }
}

   public void renderText(TextRenderInfo renderInfo) {
   }
} 
```

# entity-framework - 从 C# 动态更改连接字符串

> ID：14120752
> 
> 赞同：1
> 
> 时间：2013-01-02T10:51:22.203
> 
> 标签：entity-framework, ado.net, connection-string

我想知道如何在运行时从 C# 动态更改连接字符串。我在 App.config 中有 3 个连接字符串，我想知道如何动态更改其中一个连接。

PS 我使用 Ado.NET ，实体框架。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-02T10:54:21.127

每次要更改连接字符串时，只需更改 App.Config 文件中的主连接字符串即可。

**[参考](http://www.codeproject.com/Tips/416198/How-to-get-Connection-String-from-App-Config-in-cs)**

# linux - 从 HP-UX 迁移到 Red Hat Linux 时，ESQL/C 程序有哪些不兼容性？

> ID：14120753
> 
> 赞同：2
> 
> 时间：2013-01-02T10:51:23.570
> 
> 标签：linux, unix, informix, hp-ux, embedded-sql

我正在迁移一个项目，我们需要将 ESQL/C 源文件从 HP-UX 迁移到 Red Hat Linux。

将这些 ESQL/C 文件移动到 Linux 时可能存在哪些不兼容性？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-03T01:53:08.147

答案分为两部分：

1.  嵌入式 SQL 材料。
2.  其余的代码。

### 嵌入式 SQL

在大多数情况下，除非您已经竭尽全力编写特定于系统的 SQL 代码，否则我希望将 ESQL/C 源代码直接从 HP-UX 传输到 Red Hat Linux，而无需重新编译。虽然您可能可以编写在系统之间不可移植的代码，但我不确定只要您考虑了 32 位和 64 位代码（如果这实际上是必要的），您将如何实现这一点. 我有多个在 Linux 和 HP-UX（或 AIX 或 Solaris 或 Mac OS X）之间移植的主要程序，而对嵌入式 SQL 代码没有任何更改。

### 其余代码

这里的移植问题与 ESQL/C 代码无关。例如，共享库处理或特定于 HP-UX 而在 Linux 中不可用的函数调用之间存在差异（或者，更糟糕的是，相同的函数在两者上都可用，但行为不同）。这些问题应该归咎于正确的原因——这是围绕 ESQL/C 的 C 代码，而不是 ESQL/C 本身。

# html - 如何在解析 HTML 内容以使用 iText 生成 Pdf 文件时避免 java.net.UnknownHostException

> ID：14120762
> 
> 赞同：1
> 
> 时间：2013-01-02T10:52:08.953
> 
> 标签：html, pdf, itext

我想将一些 HTML 内容转换为 PDF 文件。我面临的问题是 HTML 内容有一些`<img>`带有绝对图像 url 的标签。因此

```
HTMLWorker.parse() 
```

如果没有网络连接，方法将引发以下异常。

```
ExceptionConverter: java.net.UnknownHostException: xyz.com 
```

在这种情况下有没有办法避免这种异常并生成没有任何图像的pdf？

我正在使用 iText-5.0.5 库。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-02T11:35:57.110

你应该实现你的**ImageProvider**并且当检索图像出现问题时只返回 null，比如

```
public static class MyImageProvider implements ImageProvider {
    public Image getImage(String src, Map<String, String> h, ChainedProperties cprops, DocListener doc) {
        try {
            return Image.getInstance(IMAGE_URL); //create IMAGE_URL from src parameter
        } catch (IOException e) {
            return null;
        }
    }    
} 
```

然后你应该使用这个提供者的 HTMLWorker

```
 HashMap<String,Object> map = new HashMap<String, Object>();
 map.put(HTMLWorker.IMG_PROVIDER, new MyImageProvider());
 HTMLWorker.parseToList(new FileReader(HTML), null, map); 
```

# iphone - NSMutableArray中的UIImage Frame Null

> ID：14120773
> 
> 赞同：0
> 
> 时间：2013-01-02T10:52:56.707
> 
> 标签：iphone, objective-c, cocoa-touch, uiimage, nsmutablearray

我正在尝试显示星级图像，并且我有三个星级图像：全星、半星和未选择的灰色星。

我有一个包含星星的数组：所以对于 4.5 的评级，它将包含 4 个选中和 1 个半数。我将相同的星形对象添加到数组中，这样我就不必创建多个星形实例。我只有三个实例，在我的计算中，我只是`addObject`在这三个不同的图像上使用如下：

```
for (int i = 0; i < ratingCount; i++) {
        if (rating >= 1)
            [self.imageViews addObject:self.selected];
        else
            [self.imageViews addObject:self.halfSelected];
        rating--;
} 
```

我在绘制这些图像时遇到问题。在随后的循环中，我试图将它们绘制如下：

```
for (int i = 0; i < self.imageViews.count; ++i) {
        UIImageView *imageView = [self.imageViews objectAtIndex:i];
        imageView.frame = CGRectMake(i * (5 + imageWidth), 0, imageView.frame.size.width, imageView.frame.size.height);
        [self.view addSubview:imageView];
    } 
```

这崩溃`imageView.frame`了，因为它是空的。当我调试它时，它会打印出 null `<0x00000000>`。为什么框架显示为空？图像没有打印为空，我知道它们已正确添加到数组中。

删除 imageView.frame 时，我还得到一个`[UIImage superview]: unrecognized selector sent to instance 0x8644590`

`imageNamed`使用该方法实例化图像`init`。这会引起问题吗？他们会提前分配吗？尝试在调试器中查看图像时应该打印 null ，`po`所以我认为这不是问题。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-02T11:06:11.230

您将 a`UIImage`与 a混淆了`UIImageView`。您的数组包含没有框架的图像，因为它们不是视图。

您需要一组单独的图像视图，其中分配有图像。

# javascript - 更改 svg 字符串中的信息

> ID：14120774
> 
> 赞同：1
> 
> 时间：2013-01-02T10:53:08.530
> 
> 标签：javascript, jquery, string, svg

我有一个 svg 字符串。为了获取信息，我在此链接中得到了答案[如何从 javascript 中的 svg 字符串获取信息？](https://stackoverflow.com/questions/14070793/how-to-get-information-from-a-svg-string-in-javascript)使用 jquery。但是有谁知道如何更改任何属性？例如如何将第 2 层矩形的高度更改为其他值？如何添加不存在的新属性？例如在第 2 层的矩形中添加 stroke-dasharray="1,1" ？谢谢

```
<svg width="612" height="394" xmlns="http://www.w3.org/2000/svg">
 <g>
     <title>Layer 1</title>
     <rect id="svg_1" height="152" width="265" y="44" x="91" stroke-width="5" stroke="#000000" fill="#FF0000"/>
 </g>
 <g>
     <title>Layer 2</title>
     <rect id="svg_2" height="125" width="151" y="157" x="399" stroke-width="5" stroke="#000000" fill="#FF0000"/>
 </g>
</svg> 
```

我的字符串 es 例如：`str="<svg width........</g></svg>"`

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-02T10:57:42.463

只需为其设置一个值，而不仅仅是检索..

使用jquery，您可以使用第二个参数[`.attr()`](http://api.jquery.com/attr/#attr2)来使用要设置的值...

```
$('#svg_2').attr('height', 200); 
```

和

```
$('#svg_2').attr('stroke-dasharray', "1,1"); 
```

**演示在** [http://jsfiddle.net/gaby/FX67f/1/](http://jsfiddle.net/gaby/FX67f/1/)

* * *

如果您想要实际的字符串，并且 svg 不在 DOM 中，而只是一个变量，那么您可以这样做

```
var fixedstr = $(str).wrapAll('<div>')
                     .find('g:eq(1) rect')
                     .attr('height', 200)
                     .attr('stroke-dasharray', "1,1")
                     .closest('div')
                     .html(); 
```

首先，我们从中创建一个 jquery 对象，然后将其包装在一个`div`元素中，以便稍后获取它`.html()`（*实际的 svg 字符串*）。

在第二个`g`元素中找到矩形，`.find('g:eq(1) rect')`然后使用`.attr()`来改变它的属性。

最后使用`.closest('div')`回到我们的容器 div，并使用`.html()`获取内容..

**此版本的演示位于** [http://jsfiddle.net/gaby/FX67f/2/](http://jsfiddle.net/gaby/FX67f/2/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-02T10:55:53.950

我没有尝试过，但它应该可以工作：设置一个新值：

```
$("svg").find("rect#svg_2").attr("height", new_val); 
```

# java - 从命令行开始的文件的类的命令

> ID：14120777
> 
> 赞同：1
> 
> 时间：2013-01-02T10:53:20.737
> 
> 标签：java, netbeans, linker-errors, bytecode

我在`NetBeans`（根据 P. Noutona, G. Shildta “Java2\. The fullest management”一书）创建了项目，并指定了`Example2`项目名称。

```
/*
 * To change this template, choose Tools | Templates
 * and open the template in the editor.
 */
package example2;

/**
 *
 * @author Asus
 */
/*
 * Другой короткий пример.
 * Файл "Example2.java"
 */ 
public class Example2 {

    /**
     * @param args the command line arguments
     */
    public static void main(String[] args) {
        // TODO code application logic here
        int num; //объявляет переменную с именем num
        num=100; //присваивает num значение 100
        System.out.println("Значение num: "+num);
        num*=2;
        System.out.print("Удвоенное значение num: ");
        System.out.println(num);
    }
} 
```

在创建项目的情况下，创建了带有 D:\ExamplesFromBook\Example2\Example2 项目文件夹（以及根据 D:\ExamplesFromBook\Example2 的项目布局）的类 example2.Example2。我通过命令行中的命令创建了字节码

```
D:\ExamplesFromBook\Example2\Example2\src\example2>javac Example2.java 
```

因此创建了 Example2.class 文件。此外，我尝试从命令行启动各种 methods.class 文件，例如，我是这样的：

```
D:\ExamplesFromBook\Example2\Example2>java example2.Example2 
```

因此收到错误

```
Error: Could not find or load main class example2.Example2 
```

需要使用什么命令以及从哪个文件夹启动？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-02T10:58:17.793

**更改您的 java 编译命令**

编译使用 javac -d 。类名.java

使用包名运行 java 类文件

java packageName/className 或

java packageName.className

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-02T10:58:29.013

您的问题在于包名称。您正在编译的类在包example2 中，名为Example2，因此它的完整路径是example2.Example2。到目前为止，一切都很好。问题是java如何找到这个类。Java 会将命令中的包声明转换为文件路径，在本例中为 example2/Example2.class。由于您的类被放置在 Example2.class 而不是 example2/Example2.class，因此将找不到它并导致错误。要解决此问题，请创建一个名为 example2 的子目录并将类文件放在其中。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-02T11:01:24.377

转到目录 D:\ExamplesFromBook\Example2\Example2\src\ 然后键入 java -cp D:\ExamplesFromBook\Example2\Example2\src example2.Example2

所有类文件所在的主目录应该在类路径中（在你的情况下是 D:\ExamplesFromBook\Example2\Example2\src ）。或者，您也可以使用 Windows 环境变量设置类路径。一旦完成；您可以使用运行任何类文件

```
java <full qualified class name> 
```

例如 java example2.Example2

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-01-02T13:49:06.833

你在这里

```
 D:\ExamplesFromBook\Example2\Example2\src\example2 
```

当你编译

```
javac Example2.java 
```

类将出现在 D:\ExamplesFromBook\Example2\Example2\src\example2

尝试 dir 并列出它们

```
 Dir D:\ExamplesFromBook\Example2\Example2\src\example2 
```

现在要运行一个类，它必须在类路径中。查找将添加类的完全限定名称（点替换为 / ）并在每个路径中搜索。在你的情况下

```
java -cp D:\ExamplesFromBook\Example2\Example2\src example2.Example 
```

应该管用。

java 程序将在您提供的所有类路径下查找 example2/Example2.class。[在wiki](http://en.wikipedia.org/wiki/Classpath_%28Java%29)上查看更多详细信息

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-01-03T10:49:06.327

您是否尝试过将 .java 文件编译到另一个文件夹，以便像通常那样“构建”示例？

当 Netbeans 自动编译文件时，它会创建以下结构：

```
"proj_dir"/src/"package"/"code".java
"proj_dir"/build/classes/"package"/"code".class 
```

尝试这样做，但手动。然后从命令行转到“build/classes”目录并输入：

```
  java“包”。“代码”

```

这是运行已编译的 java 代码的一般方法。

在您的情况下，它必须看起来像：

```
D:\ExamplesFromBook\Example2\Example2\src\example2\Example2.java
D:\ExamplesFromBook\Example2\Example2\build\classes\example2>Example2.class 
```

执行此操作的 CMD 命令：

```
cd D:\ExamplesFromBook\Example2\Example2\src\example2
javac -d ..\..\build\classes Example2.java
cd D:\ExamplesFromBook\Example2\Example2\build\classes
java example2.Example2 
```

它适用于简单的程序。

# java - 如何使用java从url解析JSON数据

> ID：14120788
> 
> 赞同：-1
> 
> 时间：2013-01-02T10:54:13.733
> 
> 标签：java, json

> **可能重复：**
> [从 URL 解析 JSON](https://stackoverflow.com/questions/7467568/parsing-json-from-url)
> [如何从 Java 中的 url 获取 JSON 数据？](https://stackoverflow.com/questions/9994676/how-to-get-json-data-from-an-url-in-java)

我有一个 URL，我从中获取 JSON 数据的数组，我想使用 java 将其解析为字符串。哪个库用于解析来自 JSON 的数据。

我从 URL 获取的数组中的数据如下所示。

```
[
{
"id":4,
"firstName":"varun",
"lastName":"",
"addressLine1":"new delhi",
"addressLine2":"",
"landmark":"",
"locality":"AIRPORT",
"pincode":"700003"
}] 
```

数组没有名字。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-02T10:56:24.993

有很多，其中之一是杰克逊：

```
ObjectMapper mapper = new ObjectMapper();

// json will contain the JSON in a tree
JsonNode json = mapper.readTree(yourURLObject); 
```

# javascript - 如何在javascript中获取实际时间？

> ID：14120789
> 
> 赞同：1
> 
> 时间：2013-01-02T10:54:15.180
> 
> 标签：javascript, html

如何在java脚本中获取实际时间来制作在线时钟？

```
var dt=new Date();
hr=dt.getHours(); 
```

这会给时间。但这取决于我们计算机中的时间。我需要服务器时间。任何人都可以帮助我...谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-02T10:57:36.870

您应该提供时间服务并使用异步请求来获取该时间 - 请参阅 James Padolsey 的[示例](http://james.padolsey.com/javascript/getting-the-real-time-in-javascript/)：

```
function getTime(zone, success) {
    var url = 'http://json-time.appspot.com/time.json?tz=' + zone,
        ud = 'json' + (+new Date());
    window[ud]= function(o){
        success && success(new Date(o.datetime), o);
    };
    document.getElementsByTagName('head')[0].appendChild((function(){
        var s = document.createElement('script');
        s.type = 'text/javascript';
        s.src = url + '&callback=' + ud;
        return s;
    })());
} 
```

这可以通过多种方式实现，但基本上您需要做的是提供一个小的动态页面，该页面使用 PHP 或任何其他动态方法打印您的服务器时间（JSON 将是更好的方法），并在您的网页中使用 AJAX 调用它如 James 的示例所示，其中 URL 是您的新动态时间页面。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-02T11:18:48.567

您可以编写一个服务器端程序，用 PHP 或 ASP 打印服务器的当前时间（或根据您的要求），如下所示：（只是一个例子）。

```
<?php
echo date("l M dS, Y, H:i:s");
?> 
```

然后只需使用 AJAX 请求该页面并显示在您的页面中或对该响应执行任何操作。

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2013-01-02T11:00:30.310

看在 javascript 中获取时间并不是什么大问题，但它会根据客户端的本地计算机为您提供时间，它可能与当前运行时间不同......

最好的解决方案是使用 ajax 从服务器端获取时间，并使用服务器端函数，如日期和时间函数。

有关更多信息，请参阅此链接：- [http://php.net/manual/en/function.time.php](http://php.net/manual/en/function.time.php)

# cocoa - NSTableView 单元格视图中的 NSWindow 和文本平滑

> ID：14120791
> 
> 赞同：4
> 
> 时间：2013-01-02T10:54:16.430
> 
> 标签：cocoa, nstableview, nswindow, nstableviewcell

我正在编写一个 OS X 应用程序，但在单独的窗口中字体平滑有问题。

我有一个文本字段，您可以在其中放置文本和建议窗口，该窗口会根据您所写的内容弹出建议列表。我正在使用基于 View-cell`NSTableView`来显示这些建议并将`SFBPopoverWindowController` 其显示为“弹出”窗口（尝试了具有相同效果的其他类）。当第一次绘制行时，它们看起来很好，但是在我选择它们（键盘或鼠标）之后，字体会改变它的重量。它只是视觉上的——就像你会改变字体的平滑方法一样，而不是粗体设置。

![单元格内的字体平滑问题](../Images/8822491f5f2b575c9e10ae4de3bfd3e3.png)

*“音符”是这里选择的单元格*

更奇怪的是，在我隐藏并显示窗口 3 次之后，从那时起一切正常。

![显示窗口 3 次后字体平滑问题](../Images/2f28d8aca735d17c099f2118df58ec0e.png)

*再次 - “音符”是选定的单元格。*

选择是通过覆盖`NSTableRowView`类及其`drawSelectionInRect:`方法完成的，但我尝试在自定义`NSTableCellView`类中绘制所有内容，但没有帮助。文本是标准`NSTextField`的 - 那里没有任何改变。

SFBPopoverWindow（和它的控制器）被创建一次，并与 styleMask `NSBorderlessWindowMask`， backing `NSBackingStoreBuffered`， defer 一起重用设置为`YES`。我所做的唯一更改`SFBPopoverWindowController`是关闭窗口成为关键窗口，但它没有改变任何东西。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2015-05-08T05:03:57.397

它可能与表格视图绘制其选定单元格的方式有关（`setSelectionHightLightStyle:`）。尝试`NSTableViewSelectionHighlightStyleNone`在您的代码或 IB / Storyboard-file 中将样式设置为 None/ 并自己绘制选择（在`NSTableRowView`子类中）。

背景：当您使用`NSTableViewSelectionHighlightStyleRegular`或`NSTableViewSelectionHighlightStyleSourceList`表格视图假定您使用标准的选择行为和外观并做一些魔术来支持它时。

==========

**更新**

==========

我之前的答案仍然有效，但由于它只描述了问题和解决方法的提示，我想添加一个真正的解决方案。如果你想使用`NSTableViewSelectionHighlightStyleRegular`你的表格视图（使用自定义字体和颜色），你需要一种方法来“禁用”一旦你的行被突出显示就会出现的系统魔法。一个建议的解决方案是 [拒绝第一响应者状态](https://stackoverflow.com/a/26990727/3184888)。它有很多缺点，根本不是一个好的解决方案。

所以，让我们仔细看看系统的“魔法”，一旦该行被突出显示：`NSTableRowView`有一个属性 internalBackgroundStyle ——根据文档——“*指示子视图应该如何绘制*”。此外'*这个值是根据为 NSTableRowView 设置的属性集动态计算的。当子类根据当前显示的属性进行不同的绘制时，可以覆盖此值。也可以调用此方法来确定子视图应使用什么颜色，或者，NSControl 可以将其单元格上的 -backgroundStyle 设置为该值。*'

我假设这种风格将被传递到子视图层次结构中，并导致您的文本字段看起来很奇怪。系统假定突出显示的单元格具有深色背景并将其更改`interiorBackgroundStyle`为深色。其他控件尝试相应地进行调整。

我认为这个问题有两种解决方案：

`interiorBackgroundStyle`1）在您的子类中覆盖`NSTableRowView`并返回适合您界面的样式（在我的情况下，这是`.light`因为我的突出显示颜色是非常亮的蓝色）。这对我有用。

2）如果因为只希望某些元素不改变其样式而改变整个样式有点过多，则可能只需要调整这些子类。我还没试过这个。

# forms - 如何预填未发布的网站表单字段

> ID：14120793
> 
> 赞同：1
> 
> 时间：2013-01-02T10:54:17.600
> 
> 标签：forms, magento

我真的不知道如何在网上搜索这个。我有一个带有一个电话输入的表格。电话是可选的。我想在表单字段中有“（可选）”这个词。我已经这样做了：

```
<input type="text" name="billing[telephone]"  value="<?php echo $this->__('(optional)') ?>" onFocus="if(this.value == '<?php echo $this->__('(optional)') ?>') {this.value = '';}" onBlur="if (this.value == '') {this.value = '<?php echo $this->__('(optional)') ?>';}" title="<?php echo $this->__('Telephone') ?>" class="input-text" id="billing:telephone" /> 
```

它以这种方式工作，但它到处张贴“（可选）”，在客户电子邮件等中发送“（可选）”。我想在没有输入电话号码的情况下不发布“（可选）”和只是将字段留空，就好像没有输入任何内容一样。

上面的代码来自我添加了可选代码的 Magento 购物车。

谢谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-02T10:59:47.860

您可以尝试`placeholder`像这样使用参数：

```
 <input type="text" name="phone" placeholder="(###) ###-#### (optional)"> 
```

它将放入一个临时值以帮助用户，但如果用户不输入自己的答案，则不会发布。它也会在焦点上消失，以允许用户填写自己的答案，而无需删除“可选”文本。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-02T11:54:21.307

占位符技术在 HTML5 中是新的：

`<input type="text" name="phone" placeholder="(###) ###-#### (optional)">`

我认为上面这行将不支持浏览器兼容性

# c# - SQL Server 从 C# 中选择查询执行

> ID：14120799
> 
> 赞同：6
> 
> 时间：2013-01-02T10:55:16.103
> 
> 标签：c#, sql-server, select

```
string user = "1234";
string strSQL = string.Format("Select * From User where UserId = '{0}'",user);
SqlCommand myCommand = new SqlCommand(strSQL, cnn);
reader = myCommand.ExecuteReader(); 
```

我的`User`表由`UserId`和`Password`列组成。列`UserId`类型是`nchar`，所以我使用了单引号。我收到一条错误消息

> *关键字用户附近的语法不正确”*

（我猜`User`这里提到了表名）。

我有正确的连接字符串和其他与数据库环境相关的东西，因为我已经检查了数据库连接状态并且它是打开的（在程序执行期间）。

语法有什么错误？我无法从我的表中检索行。

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-01-02T10:57:07.743

`User`是一个关键字。在它周围使用方括号以避免错误。`Select * from [User]`

```
string strSQL = string.Format("Select * From [User] where UserId = '{0}'",user); 
```

此外，您应该始终使用如下参数化查询来防止 SQL 注入攻击：

```
string strSQL = string.Format("Select * From [User] where UserId = @UserId"); 
```

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2013-01-02T10:58:15.827

你真的应该为此使用参数：

```
string user = "1234";

using (SqlCommand command = new SqlCommand("select * from [User] where UserId = @userid", cnn))
{
    command.Parameters.AddWithValue("@userid", user);

    using (SqlDataReader reader = myCommand.ExecuteReader())
    {
        // iterate your results here
    }
} 
```

其他海报很好地发现了，我从来没有用你的表名抓住保留词。我已经修改了我的答案 - 但不能因为错过了显而易见的事情而受到赞扬！

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2013-01-02T10:57:11.660

你应该`user`用括号括起来`[]`

```
string strSQL = string.Format("Select * From [User] where UserId = '{0}'",user); 
```

上面的查询容易受到`SQL Injection`. 应该对其进行参数化以避免这种情况。下面是一个例子：

```
string user = "1234";
string strSQL = "Select * From [User] where UserId = @userID";
SqlCommand myCommand = new SqlCommand(strSQL, cnn);
myCommand.AddWithValue("@userID", user);
reader = myCommand.ExecuteReader(); 
```

使用以下

*   `Try-Catch`阻止正确捕获错误
*   `using`正确处置物品的声明

片段：

```
string user = "1234";
string strSQL = "Select * From [User] where UserId = @userID";
using (SqlConnection cnn = new SqlConnection("connection string here"))
{
    using (SqlCommand myCommand = new SqlCommand(strSQL, cnn))
    {
        myCommand.Parameters.AddWithValue("@userID", user);
        using (SqlDataReader reader = myCommand.ExecuteReader())
        {
            while (reader.Read())
            {
                Console.WriteLine(reader["columnName"].ToString());
            }
        }
    }
} 
```

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2013-01-02T10:57:42.473

用`[]`. 它是一个关键字。阅读[`Reserved Keywords`](http://msdn.microsoft.com/en-us/library/ms189822.aspx)MSDN 上的文章。

```
string strSQL = string.Format("Select * From [User] where UserId = '{0}'",user); 
```

但更重要的是，您的查询可能会受到[`SQL Injection`](http://msdn.microsoft.com/en-us/library/ms161953%28v=sql.105%29.aspx)攻击。您应该始终使用参数化查询。

```
string strSQL = "Select * From [User] where UserId = @userID";
SqlCommand myCommand = new SqlCommand(strSQL, cnn);
myCommand.Parameters.AddWithValue("@userID", user); 
```

# java - 不希望 Listactivity 项目之间的距离

> ID：14120806
> 
> 赞同：0
> 
> 时间：2013-01-02T10:55:51.347
> 
> 标签：java, android, xml, android-layout

![在此处输入图像描述](../Images/364d69b0c41944c987d5e6bdc6a562da.png)

**我用于报告布局**的 xml ：

```
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:layout_width="fill_parent"
    android:layout_height="fill_parent"
    android:background="@drawable/background"
    android:orientation="vertical" >
<ListView
        android:id="@+id/list"
        android:layout_width="fill_parent"
        android:layout_height="fill_parent" >

    </ListView>

<TextView
    android:id="@+id/android:empty"
    android:layout_width="fill_parent"
    android:layout_height="fill_parent"
    android:text="@string/main_no_items"/>

</LinearLayout> 
```

正如您在图像中看到的，列表项之间存在不必要的距离。我尽一切努力使列表项之间的距离最小化，但它永远不会减少:(我希望两个项目之间没有间隙。请指导我如何在一个列表项之后获得下一个项目，除了分区线之外没有间隙。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-02T11:31:28.747

该差距是因为`LinearLayout`您在`row layout`. 该背景图像的高度很长，这就是为什么它显示两个项目之间的差距。尝试使背景图像的高度更小，以达到您的要求。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-02T11:01:11.893

尝试改变

```
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
android:layout_width="fill_parent"
android:layout_height="?android:attr/listPreferredItemHeight"
android:background="@drawable/background"
android:orientation="vertical" > 
```

到

```
android:layout_height="wrap_content" 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-02T11:03:26.797

永远不要在 raw_layout 中设置背景..

```
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
android:layout_width="fill_parent"
android:layout_height="?android:attr/listPreferredItemHeight"
android:background="@drawable/background"         <-----  remove this line
android:orientation="vertical" > 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-01-02T11:11:10.997

从行的根布局中移除背景并将其应用到`listview`.

> ```
> <LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
>       android:layout_width="fill_parent"
>       android:layout_height="?android:attr/listPreferredItemHeight"
>       android:background="@drawable/background"  <===== Remove background
>       android:orientation="vertical" > 
> ```

在**报表布局中应用它**

> ```
> <ListView
>     android:id="@+id/list"
>     android:layout_width="fill_parent"
>     android:layout_height="fill_parent"
>      android:background="@drawable/background" /> <=== Try applying background in listview. 
> ```

# php - 使用正则表达式拆分字符串

> ID：14120816
> 
> 赞同：1
> 
> 时间：2013-01-02T10:56:35.967
> 
> 标签：php, regex

我有这个字符串：

```
EXAMPLE|abcd|[!PAGE|title] 
```

我想像这样拆分它：

```
Array
(
    [0] => EXAMPLE
    [1] => abcd
    [2] => [!PAGE|title]
) 
```

怎么做？谢谢你。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-02T11:02:20.497

[演示](http://regex101.com/r/eB0cD3)

如果您不需要比您说的更多的东西，就像解析 CSV 但使用`|`分隔符`[`一样`"`：`(\[.*?\]+|[^\|]+)(?=\||$)`会做我认为的工作。

编辑：更改了正则表达式，现在它接受像 [asdf]].[]asf] 这样的字符串

解释：

1.  `(\[.*?\]+|[^\|]+)`-> 这一个分为 2 部分：（将匹配 1.1 或 1.2）
    1.1 `\[.*?\]+`-> 匹配1.2`[`和`]`
    1.2之间的所有内容`[^\|]+`-> 将匹配包含在`|`
2.  `(?=\||$)`-> 这将告诉正则表达式旁边必须是 a`|`或字符串的结尾，以便告诉正则表达式像前面的示例一样接受字符串。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-02T11:02:05.640

使用这个[正则表达式](http://regex101.com/r/fE9zZ3) `(?<=\||^)(((\[.*\|?.*\])|(.+?)))(?=\||$)`

```
(?<=\||^) Positive LookBehind

    1st alternative: \|Literal `|`

    2nd alternative: ^Start of string

1st Capturing group (((\[.*\|?.*\])|(.+?))) 

    2nd Capturing group ((\[.*\|?.*\])|(.+?)) 

        1st alternative: (\[.*\|?.*\])

            3rd Capturing group (\[.*\|?.*\]) 

                \[ Literal `[`

                . infinite to 0 times Any character (except newline) 

                \| 1 to 0 times Literal `|`

                . infinite to 0 times Any character (except newline) 

                \] Literal `]`

        2nd alternative: (.+?)

            4th Capturing group (.+?) 

                . 1 to infinite times [lazy] Any character (except newline) 

(?=\||$) Positive LookAhead

    1st alternative: \|Literal `|`

    2nd alternative: $End of string

g modifier: global. All matches (don't return on first match) 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-01-02T11:06:51.433

鉴于您的示例，您可以使用`(\[.*?\]|[^|]+)`.

```
preg_match_all("#(\[.*?\]|[^|]+)#", "EXAMPLE|abcd|[!PAGE|title]", $matches);

print_r($matches[0]);

// output:
Array
(
    [0] => EXAMPLE
    [1] => abcd
    [2] => [!PAGE|title]
) 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-01-02T11:52:01.500

非正则表达式解决方案：

```
$str = str_replace('[', ']', "EXAMPLE|abcd|[!PAGE|title]");
$arr = str_getcsv ($str, '|', ']') 
```

如果您期望像“[[]]”这样的东西，则必须用斜杠转义内括号，在这种情况下，正则表达式可能是更好的选择。

* * *

## 回答 #5

> 赞同：-5
> 
> 时间：2013-01-02T10:58:26.487

[http://de2.php.net/manual/en/function.explode.php](http://de2.php.net/manual/en/function.explode.php)

```
$array= explode('|', $string); 
```

# java - hibernate @SQLInsert 调用存储过程错误

> ID：14120819
> 
> 赞同：1
> 
> 时间：2013-01-02T10:57:01.900
> 
> 标签：java, oracle, hibernate

我想通过在 Oracle 中创建的存储过程将数据插入实体。存储过程不是一个非常复杂的过程。当我尝试正常插入数据时，它可以工作。但是当我使用@SQLInsert 调用存储过程时，它给了我这样的错误：

```
java.sql.BatchUpdateException: ora-01858 a non-numeric character was found where a numeric was expected 
```

由于这个错误，日期参数似乎有问题。但是如果由于日期参数出现问题，为什么我可以正常插入数据。

那是实体；

```
@Entity
@Table(name="TBL_USER")
@XmlRootElement
@SQLInsert(
        sql="call      PROC_ADD_USER(:P_ID,:P_USER_NAME,:P_PASSWORD,:P_NAME,:P_SURNAME,:P_LOGIN_DATE)",
        callable=true)
    public class User implements Serializable{
        private static final long serialVersionUID = 1L;
        @Id
        //@GeneratedValue(strategy=GenerationType.IDENTITY)
        @Column(name="USER_ID")
        private String userId;

        @Column(name="USER_NAME")        
        private String userName;

        @Column(name="PASSWORD") 
        private String password;

        @Column(name="NAME")
        private String name;

        @Column(name="SURNAME")
        private String surname;

        @Column(name="LOGIN_DATE")
        @Temporal(javax.persistence.TemporalType.DATE)
        private Date loginDate; 
```

这是保存用户的代码：

```
 Session session =((EntityManagerImpl) entityManager.getDelegate()).getSession();
    User user=new User();
    user.setUserId(1);
    user.setUserName("user name1");
    user.setPassword("password1");
    user.setName("name1");
    user.setSurname("surname 1");

    java.util.Date utilDate = new java.util.Date();
    user.setLoginDate(utilDate);
    Transaction transaction = null;
        try {
            transaction = session.beginTransaction();
            session.save(user);
            transaction.commit();
 } catch (Exception e) {
            e.printStackTrace();
            transaction.rollback();
        } finally {
            //session.close();
        } 
```

我错过了什么吗？

# jsf - 如何使用 POM 中指定的 JSF 版本（而不是应用服务器之一）？

> ID：14120837
> 
> 赞同：0
> 
> 时间：2013-01-02T10:57:49.073
> 
> 标签：jsf, jakarta-ee, maven, glassfish

我的应用服务器是 Glassfish 3.1.1，使用 Mojarra 2.0.3 FCS（据我所知）。我希望我的应用程序使用 JSF 2.1.2。我已经找到了在我的 Maven 构建中使用的正确工件。

现在，如何确保从该工件加载 JSF 类，而不是遵循 Glassfish libvrary 类加载器的“经典”委托（它将加载 JSF 2.0.3 并为我的 omnifaces/richfaces 附加组件生成 ClassNotFoundException）？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-02T11:33:13.037

通常，如何从档案中覆盖特定的 Java EE 工件是特定于应用程序服务器的。如果是 GlassFish，如果我没记错的话，您可以在 WEB-INF/glassfish-web.xml 中使用以下内容：

```
<glassfish-web-app error-url="">
    <class-loader delegate="false" />
    <property name="useBundledJsf" value="true" />
</glassfish-web-app> 
```

还可以替换*[glassfish home]/glassfish/modules*中的罐子。这正是 JSF 构建脚本所做的事情，因此应该保证它可以正常工作。

请注意，如果您从低至 2.0.3 的版本升级到当前版本，您会看到从 2 个 jar 变为 1 个 jar。所以在这种情况下，在*[glassfish home]/glassfish/domains/domain1/config/default-web.xml*和*[glassfish home]/glassfish/lib/templates/default-web.xml*中删除条目 jsf-api.jar 和 jsf -impl.jar 并将它们替换为单个 javax.faces.jar。

也许更简单的选择是[下载](http://glassfish.java.net/public/downloadsindex.html)最新版本的 GlassFish (3.1.2.2)。

# c# - 更新面板问题

> ID：14120838
> 
> 赞同：0
> 
> 时间：2013-01-02T10:58:05.093
> 
> 标签：c#, asp.net, updatepanel

Asalamu alikum 伙计们，我在同一页面上使用了 2 个控件，这两个控件都在它们自己的源代码中使用了更新面板，但问题是我在两个控件上都使用了分页，当我到达一个控件的最后一页时，如果我尝试更改其他控件的页面索引，第一个控件显示空白且没有记录。我在我的页面上使用特价控制和包控制。两个控件都使用数据集来显示记录

**热交易控件的分页代码：**

```
URLMessage URLMessage = new URLMessage();
    PagedDataSource dsource = new PagedDataSource();
    DataSet _ds = new DataSet();
  public static  int pos;
    protected void Page_Load(object sender, EventArgs e)
    {
       if (!Page.IsPostBack)
        {
            this.ViewState["vs1"] = 0;    

        }
        pos=(int)this.ViewState["vs1"];

       fill(); 
    }
    private void fill()
    {
        RegistrationBAL rbl = new RegistrationBAL(0);
        rbl.LoadHotDeals(_ds);
        //******************Adding Regular Price to Dataset
        ////_ds.Tables[rbl.SqlEntityX].Columns.Add("RegPrice");
        ////foreach (DataRow item in _ds.Tables[rbl.SqlEntityX].Rows)
        ////{
        ////    item["RegPrice"] = (Convert.ToDouble(item["BaseRate"]) + 0.2 * Convert.ToDouble(item["BaseRate"]));

        ////}

        dsource.DataSource = _ds.Tables[rbl.SqlEntityX].DefaultView;
        dsource.PageSize = 2;
        dsource.AllowPaging = true;
        dsource.CurrentPageIndex = pos;
        btnfirst.Enabled = !dsource.IsFirstPage;
        btnprevious.Enabled = !dsource.IsFirstPage;
        btnlast.Enabled = !dsource.IsLastPage;
        btnnext.Enabled = !dsource.IsLastPage;
        dlHotDeals.DataSource = dsource;
        dlHotDeals.DataBind(); 
    }
    protected void btnfirst_Click(object sender, EventArgs e)
    {
        pos = 0;
        fill();
    }

    protected void btnprevious_Click(object sender, EventArgs e)
    {
        pos = (int)this.ViewState["vs1"];
        pos -= 1;
        this.ViewState["vs1"] = pos;
        fill();
    }

    protected void btnnext_Click(object sender, EventArgs e)
    {
        pos = (int)this.ViewState["vs1"];
        pos += 1;
        this.ViewState["vs1"] = pos;
        fill();
    }

    protected void btnlast_Click(object sender, EventArgs e)
    {
        pos = dsource.PageCount - 1;
        fill();
    }

    protected void dlHotDeals_ItemDataBound(object sender, DataListItemEventArgs e)
    {

        int rtid,rgid;
       // double BaseRate;
      //  BaseRate = WebHelper.Cast(((Label)e.Item.FindControl("lblPrice")).Text, 0);
      // Label lbl = (Label)e.Item.FindControl("lblRegPrice");
     // lbl.Text = (BaseRate + (0.2 * BaseRate)).ToString();
        HtmlAnchor lnkBookNow = (HtmlAnchor)e.Item.FindControl("lnkBook");

         rtid = WebHelper.Cast(((Label)e.Item.FindControl("lblRTID")).Text, 0);
        rgid=WebHelper.Cast(((Label)e.Item.FindControl("lblRegID")).Text, 0);
        lnkBookNow.HRef ="~/RoomTypeDetails.aspx?"+URLMessage.Encrypt( "RTID=" +rtid.ToString() + "&RegID=" + rgid.ToString());

    }
} 
```

**包控制分页代码：**

```
 PagedDataSource adsource = new PagedDataSource();
    DataSet _ds = new DataSet();
   public static int p;
    protected void Page_Load(object sender, EventArgs e)
    {

        if (!Page.IsPostBack)
        {
            this.ViewState["vs"] = 0;    

        }
        p=(int)this.ViewState["vs"];
        fill();
    }
    private void fill()
    {
        PackageBAL pbl = new PackageBAL(0);
        pbl.LoadPackagesAll(_ds);

        adsource.DataSource = _ds.Tables[pbl.SqlEntityX].DefaultView;
        adsource.PageSize = 2;
        adsource.AllowPaging = true;
        adsource.CurrentPageIndex = p;
        btnfirst.Enabled = !adsource.IsFirstPage;
        btnprevious.Enabled = !adsource.IsFirstPage;
        btnlast.Enabled = !adsource.IsLastPage;
        btnnext.Enabled = !adsource.IsLastPage;
        dlPackage.DataSource = adsource;
        dlPackage.DataBind(); 
    }
    protected void btnfirst_Click(object sender, EventArgs e)
    {
        p = 0;
        fill();
    }

    protected void btnprevious_Click(object sender, EventArgs e)
    {
        p = (int)this.ViewState["vs"];
        p -= 1;
        this.ViewState["vs"] = p;
        fill();
    }

    protected void btnnext_Click(object sender, EventArgs e)
    {
        p = (int)this.ViewState["vs"];
        p += 1;
        this.ViewState["vs"] = p;
        fill();
    }

    protected void btnlast_Click(object sender, EventArgs e)
    {
        p = adsource.PageCount - 1;
        fill();
    } 
```

显示控件的主页上的代码

```
<%@ Page Title="" Language="C#" MasterPageFile="~/main1.master" AutoEventWireup="true"
    CodeFile="Default.aspx.cs" Inherits="_Default" %>

<%@ Register Assembly="AjaxControlToolkit" Namespace="AjaxControlToolkit" TagPrefix="asp" %>
<%@ Register Src="Registration/ShowPackagesControl.ascx" TagName="ShowPackagesControl"
    TagPrefix="uc2" %>
<%@ Register Src="Registration/SearchInputControl.ascx" TagName="SearchInputControl"
    TagPrefix="uc1" %>
<%@ Register Src="Registration/ShowHotDealsControl.ascx" TagName="ShowHotDealsControl"
    TagPrefix="uc3" %>
<asp:Content ID="Content2" ContentPlaceHolderID="head" runat="Server">
    <link href="js/css/nivo-slider.css" rel="stylesheet" type="text/css" />
    <link href="http://ajax.googleapis.com/ajax/libs/jqueryui/1.8.1/themes/base/jquery-ui.css"
        rel="stylesheet" type="text/css" />

    <script type="text/javascript" src="http://ajax.googleapis.com/ajax/libs/jquery/1.4.2/jquery.min.js"></script>

    <script type="text/javascript" src="http://ajax.googleapis.com/ajax/libs/jqueryui/1.8.1/jquery-ui.min.js"></script>

    <script src="http://ajax.googleapis.com/ajax/libs/jquery/1.7.1/jquery.min.js" type="text/javascript"></script>

    <%--<script src="js/css/jquery.min.js" type="text/javascript"></script>--%>

    <script src="js/css/custom.js" type="text/javascript"></script>

    <script src="js/css/slides.min.jquery.js" type="text/javascript"></script>

    <script src="js/css/jquery.nivo.slider.js" type="text/javascript"></script>

    <script src="js/css/jquery.kwicks-1.5.1.pack.js" type="text/javascript"></script>

</asp:Content>
<asp:Content ID="Content1" ContentPlaceHolderID="ContentPlaceHolder1" runat="Server">
    <asp:ToolkitScriptManager ID="ToolkitScriptManager1" runat="server">
    </asp:ToolkitScriptManager>
    <div class="mainwrap">
        <div class="leftsection">
            <uc1:SearchInputControl ID="SearchInputControl" runat="server" />
        </div>
        <div class="rightsection">
            <div class="slideshow">
                <div id="slides">
                    <div id="slider-big">
                        <div class="slides_container big-slider">
                            <!-- SLIDER STARTS-->
                            <!-- SLIDER CONTENT STARTS-->
                            <div class="slide">
                                <img src="js/images/slideshow/1.jpg" alt=" " width="610" height="350" />
                            </div>
                            <div class="slide">
                                <img src="js/images/slideshow/2.jpg" alt=" " width="610" height="350" />
                            </div>
                            <div class="slide">
                                <img src="js/images/slideshow/arab.png" alt=" " width="610" height="350" />
                            </div>
                            <div class="slide">
                                <img src="js/images/slideshow/4.jpg" alt=" " width="610" height="350" />
                            </div>
                            <div class="slide">
                                <img src="js/images/slideshow/5.jpg" alt=" " width="610" height="350" />
                            </div>
                            <div class="slide">
                                <img src="js/images/slideshow/6.jpg" alt=" " width="610" height="350" />
                            </div>
                            <div class="slide">
                                <img src="js/images/slideshow/7.jpg" alt=" " width="610" height="350" />
                            </div>
                            <div class="slide">
                                <img src="js/images/slideshow/8.jpg" alt=" " width="610" height="350" />
                            </div>
                            <div class="slide">
                                <img src="js/images/slideshow/9.jpg" alt=" " width="610" height="350" />
                            </div>
                            <div class="slide">
                                <img src="js/images/slideshow/10.jpg" alt=" " width="610" height="350" />
                            </div>
                            <div class="slide">
                                <img src="js/images/slideshow/11.jpg" alt=" " width="610" height="350" />
                            </div>
                            <div class="slide">
                                <img src="js/images/slideshow/12.jpg" alt=" " width="610" height="350" />
                            </div>
                            <div class="slide">
                                <img src="js/images/slideshow/13.jpg" alt=" " width="610" height="350" />
                            </div>
                            <div class="slide">
                                <img src="js/images/slideshow/14.jpg" alt=" " width="610" height="350" />
                            </div>
                            <div class="slide">
                                <img src="js/images/slideshow/15.jpg" alt=" " width="610" height="350" />
                            </div>
                            <div class="slide">
                                <img src="js/images/slideshow/16.jpg" alt=" " width="610" height="350" />
                            </div>
                            <div class="slide">
                                <img src="js/images/slideshow/17.jpg" alt=" " width="610" height="350" />
                            </div>
                            <div class="slide">
                                <img src="js/images/slideshow/18.jpg" alt=" " width="610" height="350" />
                            </div>
                            <div class="slide">
                                <img src="js/images/slideshow/19.jpg" alt=" " width="610" height="350" />
                            </div>
                            <div class="slide">
                                <img src="js/images/slideshow/20.jpg" alt=" " width="610" height="350" />
                            </div>
                            <div class="slide">
                                <img src="js/images/slideshow/21.jpg" alt=" " width="610" height="350" />
                            </div>
                            <div class="slide">
                                <img src="js/images/slideshow/22.jpg" alt=" " width="610" height="350" />
                            </div>
                        </div>
                        <!-- SLIDESHOW CONTAINER ENDS-->
                    </div>
                    <div class="slides-nav">
                        <a href="#" class="prev">Previous Slide</a> <a href="#" class="next">Next Slide</a>
                        <!--END .slides-nav -->
                    </div>
                </div>
            </div>
        </div>

    </div>

    <div class="contentsection">
        <div class="verbox">

            <%-- <div class="verbox_title">
                Hot Deals...
            </div>
            <div class="verbox_content">
            <img src="Images/Omakan-Hotel-14.jpg" />
                Located just off Regent Street, the prestigious Langham London has a chic and glamorous bar, Artesian, and a stylish new restaurant, Roux at the Landau.

            </div>
            <div class="verbox_content_bottom">
                <a href="#">Read more....</a>
            </div>
              <div class="verbox_title">
                Hot Deals...
            </div>
            <div class="verbox_content">
            <img src="Images/super8deal.jpg" />
                2 Adults for three days and three nights in the hotel residency in srinagar. This package also includes free breakfast and dinner for the couple.Also in this package you will get visits to two most famous places of kashmir that is pahagam and srinagar.  Residency is provided with high class facilites such as swimming pool,gym etc.     
            </div>
            <div class="verbox_content_bottom">
                <a href="#">Read more....</a>
            </div>
           --%>
            <uc3:ShowHotDealsControl ID="ShowHotDealsControl1" runat="server" />
        </div>
        <div class="verbox">
            <%-- <div class="verbox_title">
                Best Packages...
            </div>
            <div class="verbox_content">
                <img src="Images/Marriot_1590604c.jpg" />
              The Birmingham Britannia Hotel is opposite Birmingham New Street Station. It offers rooms with baths and showers, Jenny’s Restaurant, where you can see the chef’s at work, and Harvey’s Ba
            </div>
            <div class="verbox_content_bottom">
                <a href="#">Read more....</a>
            </div>--%>

            <uc2:ShowPackagesControl ID="ShowPackagesControl1" runat="server" />
        </div>
        <div class="verbox"> 
            <div class="latestverbox_title">
                <div class="iconupcommingevents">
                </div>
                Upcomming Events..<div class="pannelpaggingbuttons">
                    <%--<asp:Button ID="btnfirst" runat="server" CssClass="refresh" ToolTip="Refresh" OnClick="btnfirst_Click" />
                     <asp:Button ID="btnprevious" runat="server" CssClass="previous" ToolTip="Previous"
                         OnClick="btnprevious_Click" />
                     <asp:Button ID="btnnext" runat="server" CssClass="next" ToolTip="Next" OnClick="btnnext_Click" />--%></div>
            </div>
            <div class="latestverbox_content">
                <div class="propertyname">
                    Water Rafting in Phalgam...
                </div>
                <div class="propertyimage">
                    <img src="Images/raft_new3.jpg" />
                </div>
                <p style="margin-bottom: 0px; float: left; overflow: hidden; height: 60px; width: 160px;">
                    <span style="padding-left: 8px; padding-right: 8px; width: 150px; float: left; text-align: justify;">
                        The sport of white water river rafting calls for a triumph over the swift swirling
                        river as it gushes past spectacular mountains. It is practised mainly in the upper
                        reaches where the water is wild and white as it frothes and foams, crashing against
                        narrow gorges, rocky outcrops and falls at deep gradients. </span>
                </p>
                <div class="propertylocation">
                    <em>Location:&nbsp;<br />
                    </em>
                </div>
                <div style="float: right;">
                    <a href="#">Read more...</a>
                </div>
            </div>
            <div class="latestverbox_content">
                <div class="propertyname">
                    Skiing in Gulmarg...
                </div>
                <div class="propertyimage">
                    <img src="Images/images (4).jpg" />
                </div>
                <p style="margin-bottom: 0px; float: left; overflow: hidden; height: 60px; width: 160px;">
                    <span style="padding-left: 8px; padding-right: 8px; width: 150px; float: left; text-align: justify;">
                    Skiing in Gulmarg bring you joy, adventure and nature near you. Gulmarg is located
                    56-km south west of Srinagar, provides natural slopes, inclines, snow and gondola
                    is primarily country’s premier ski resort and a favorite winter tourist destination.
                    Gulmarg is also capital of winter game and having institute provide comprehensive
                    training of ski.</span>
                </p>
                <div class="propertylocation">
                    <em>Location:&nbsp;<br />
                    </em>
                </div>
                <div style="float: right;">
                    <a href="#">Read more...</a>
                </div>
            </div>
        </div>
    </div>

</asp:Content> 
```

**热卖控制代码：**

```
<%@ Control Language="C#" AutoEventWireup="true" CodeFile="ShowHotDealsControl.ascx.cs"
    Inherits="Registration_ShowHotDealsControl" %>
     <asp:UpdatePanel ID="panel" runat="server">
     <ContentTemplate>
<div class="latestverbox_title">
    <div class="iconhotdeals">
    </div>
    Hot Deals..<div class="pannelpaggingbuttons">
        <asp:Button ID="btnfirst" runat="server" CssClass="refresh" ToolTip="Refresh" OnClick="btnfirst_Click" />
        <asp:Button ID="btnprevious" runat="server" CssClass="previous" ToolTip="Previous"
            OnClick="btnprevious_Click" />
        <asp:Button ID="btnnext" runat="server" CssClass="next" ToolTip="Next" OnClick="btnnext_Click" /></div>
</div>
<asp:DataList ID="dlHotDeals" runat="server" Width="112px" 
             onitemdatabound="dlHotDeals_ItemDataBound">
    <ItemTemplate>
        <div>
            <asp:Label ID="lblRegID" Visible="false" runat="server" Text='<%#Eval("RegID") %>'></asp:Label>
            <asp:Label ID="lblRTID" Visible="false" runat="server" Text='<%#Eval("RTID") %>'></asp:Label>
        </div>
        <div class="latestverbox_content">
            <div class="propertyname">
                <asp:Label ID="lblHotelName" runat="server" Text='<%#Eval("PropertyName") %>'></asp:Label></div>
            <div class="propertyimage">
                <img id="Img1" alt="" width="180px" height="102px" src='PropertyImages/1/<%#Eval("MainImage") %>' />
            </div>
            <div class="propertylocation">
                <em>Location:&nbsp;<br />
                </em>
                <asp:Label ID="lblAddress" runat="server" Text='<%#Eval("Address") %>'></asp:Label>,
                <asp:Label ID="Label1" runat="server" Text='<%#Eval("City") %>'></asp:Label>
            </div>
            <div class="propertyroomtype">
                <em>Room Type:&nbsp;</em><br />
                <asp:Label ID="lblRoomTypeName" runat="server" Text='<%#Eval("Name") %>'></asp:Label>
            </div>
            <div class="propertyregularprice">
                <em>Regular Price: </em>
                <br />
                <amount><span class="WebRupee">Rs.&nbsp;</span><asp:Label ID="lblRegPrice" runat="server" Text='<%#string.Format("{0:0.00}",Eval("RegPrice")) %>'></asp:Label></amount>
            </div>
            <div class="propertyofferprice">
                <em>Offer Price: </em>
                <br />
                <span class="WebRupee">Rs.&nbsp;</span> <asp:Label ID="lblPrice" runat="server" Text='<%#string.Format("{0:0.00}",Eval("BaseRate")) %>'></asp:Label>
            </div>
            <div class="booknow"><a ID="lnkBook" href="" ToolTip="Book Now" width="67" runat="server">Book Now</a></div>
        </div>
    </ItemTemplate>
</asp:DataList>
<div class="latestverbox_content_bottom">
</div>

<%--pagging***************************--%>
<asp:Button ID="btnlast" runat="server" Font-Bold="true" Height="31px" Width="43px"
    OnClick="btnlast_Click" Visible="false" />
   </ContentTemplate></asp:UpdatePanel> 
```

包控制代码

```
<%@ Control Language="C#" AutoEventWireup="true" CodeFile="ShowPackagesControl.ascx.cs"
    Inherits="Registration_ShowPackagesControl" %>
 <asp:UpdatePanel ID="panel1" runat="server"><ContentTemplate>
<div class="latestverbox_title">
    <div class="iconbestpackages">
    </div>
    Best Packages...
    <div class="pannelpaggingbuttons">
        <asp:Button ID="btnfirst" runat="server" CssClass="refresh" OnClick="btnfirst_Click" />
        <asp:Button ID="btnprevious" runat="server" CssClass="previous" OnClick="btnprevious_Click" />
        <asp:Button ID="btnnext" CssClass="next" runat="server" OnClick="btnnext_Click" />
    </div>
    <asp:Button ID="btnlast" runat="server" Font-Bold="true" Text=">>" Height="31px"
        Width="43px" OnClick="btnlast_Click" Visible="false" />
</div> 

<asp:DataList ID="dlPackage" runat="server">
    <ItemTemplate>
        <div class="latestverbox_content">
            <div class="propertyname">
                <asp:Label ID="lblTitle" runat="server" Text='<%#Eval("PackageTitle") %>'></asp:Label>
            </div>
            <div class="propertyimage">
                <img id="Img1" alt="" src='PropertyImages/1/<%#Eval("PackageImage") %>' />
                <p style="clear: both; margin-bottom: 0px; float: left; overflow: hidden; height: 40px;
                    width: 195px;">
                    <span style="padding-left: 8px; padding-right: 8px; width: 180px; float: left; text-align: justify;">
                        <asp:Label ID="lblDescription" runat="server" Text='<%#Eval("PackageDescription") %>'></asp:Label></span>
                </p>
            </div>
            <div class="propertylocation" style="width: 135px;">
                <em>Location:&nbsp;<br />
                    <asp:Label ID="lblCity" runat="server" Text='<%#Eval("City") %>'></asp:Label>
                </em>
            </div>
            <div class="propertyroomtype" style="width: 135px;">
                <em>Duration :&nbsp;</em><br />
                <asp:Label ID="Label2" runat="server" Text='<%#Eval("Duration")+" Day(s) and Night(s) " %>'></asp:Label> 
            </div>
           <div class="propertyregularprice" style="width: 135px;">

              <asp:Label ID="Label3" runat="server" Text='<%#"For " + Eval("NumberOfPeople")+" Adult(s)" %>'></asp:Label>
            </div>
            <div class="propertyofferprice" style="width: 135px;">
                <em>Offer Price: </em>
                <br />
                <span class="WebRupee">Rs.&nbsp;&nbsp;</span><asp:Label ID="Label4" runat="server"
                    Text='<%#string.Format("{0:0.00}",Eval("Price")) %>'></asp:Label>
            </div>
            <div style="clear: both; float: right; text-align: right;width:100px;">
                <asp:LinkButton ID="LinkButton1" Width="90" runat="server">Read More..</asp:LinkButton></div>
        </div>
    </ItemTemplate>
</asp:DataList>
</ContentTemplate></asp:UpdatePanel>
<%--***************Pagging code--%> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-02T11:07:01.000

尝试为您的更新面板使用`UpdateMode="Conditional"`和`ChildrenAsTriggers="true"` ，并添加`Triggers` **此选项将防止一个更新面板影响其他面板**

```
<asp:UpdatePanel ID="UpdatePanel1" runat="server" ChildrenAsTriggers="true" UpdateMode="Conditional">
  <Triggers>
    <asp:AsyncPostBackTrigger ControlID="btnOk" EventName="Click" />
  </Triggers>
  <ContentTemplate>

  //Your contents here

  </ContentTemplate>
</asp:UpdatePanel> 
```

瓦莱库姆萨拉姆。

# sql - 哪个更好？连接还是列绑定？

> ID：14120839
> 
> 赞同：0
> 
> 时间：2013-01-02T10:58:11.450
> 
> 标签：sql, join

> **可能重复：**
> [INNER JOIN ON vs WHERE 子句](https://stackoverflow.com/questions/1018822/inner-join-on-vs-where-clause)

大家好，我想知道从多个表中选择行时哪种方法是更好的解决方案。连接或列绑定。虽然我不确定我是否使用“列绑定”这个术语..

```
SELECT column_name(s)
FROM table_name1
INNER JOIN table_name2
ON table_name1.column_name=table_name2.column_name 
```

或者

```
SELECT column_name(s)
FROM table_name1 t1, table_name2 t2, table_name t3, .... 
WHERE t1.column_name = t2.column_name
AND t2.column_name = t3.column_name
AND ... 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-02T11:14:03.277

JOIN 是使用 SQL 执行集合操作的“[新](http://en.wikipedia.org/wiki/SQL-92)”(1992) 方式。

两者之间没有功能差异，任何值得使用的查询引擎都应该支持其中一个，并为两个示例生成相同的查询计划。

* * *

像我这样的早期采用者欣赏新语法的可读性及其明确的性质。但是，你可能觉得 21 岁以上对你来说还不够成熟。

这是[重复的旧问题的链接](https://stackoverflow.com/questions/1018822/inner-join-on-vs-where-clause)。

# linux - BASH中多列文件的反向排序顺序

> ID：14120846
> 
> 赞同：36
> 
> 时间：2013-01-02T10:58:33.057
> 
> 标签：linux, bash, unix, sorting, awk

我有以下文件：

```
1 2 3
1 4 5
1 6 7
2 3 5
5 2 1 
```

我希望将文件排序为第二列，但从最大数字（在本例中为 6）到最小数字。我试过了

```
sort +1 -2 file.dat 
```

但它给了我相反的顺序。

结果应该是：

```
1 6 7
1 4 5
2 3 5
5 2 1
1 2 3 
```

* * *

## 回答 #1

> 赞同：61
> 
> 时间：2013-01-02T11:03:19.733

```
sort -nrk 2,2 
```

成功了。

n 用于数字排序，r 用于倒序，k 2,2 用于第二列。

* * *

## 回答 #2

> 赞同：14
> 
> 时间：2013-01-02T11:01:29.840

你试过 -r 吗？从[手册页](http://unixhelp.ed.ac.uk/CGI/man-cgi?sort)：

> -r，--反向
> 
> ```
>  reverse the result of comparisons 
> ```

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2013-01-02T11:12:21.130

如前所述，如果您不尝试，大多数版本`sort`都可以选择：`-r``tac`

```
$ sort -nk 2,2 file.dat | tac 
1 6 7
1 4 5
2 3 5
5 2 1
1 2 3

$ sort -nrk 2,2 file.dat 
1 6 7
1 4 5
2 3 5
5 2 1
1 2 3 
```

> tac - 反向连接和打印文件

# javascript - 如何使用 query.find() 获取 parse.com 的 json 响应；在网络应用程序中使用 javascript？

> ID：14120847
> 
> 赞同：4
> 
> 时间：2013-01-02T10:58:34.367
> 
> 标签：javascript, json, parse-platform

我第一次使用 parse.com 并寻找使用 javascript api 获取 json 响应的方法。实际上，我使用车把作为模板引擎并尝试获取 json 响应表单 parse.com，以便我可以轻松地将其传递给车把模板。目前，我正在获得需要像 result.get("title") 这样的对象响应。我搜索了 parse.com javascript 指南和文档，但找不到执行此操作的方法。我想从 parse.com 类中获取所有提要记录作为 json。有什么办法可以解决这个问题吗？

这是车把模板脚本::

```
<script id="post-template" type="text/x-handlebars-template">
    {{#each feeds}}
        <div class="post" style="padding-top: 5px; width: 307px; margin: 0 auto;" >
            <div style="background: rgba(255,255,255, 0.5); text-align: left;">
                <img src="{{post-img}}" alt="image"/>
                <p>{{post-mes}}</p>
                <p style="position: relative;">
                    <img src="{{post-by-img}}" alt="image" /><label>  By @{{post-by}}</label>
                    <label class="ago" style="vertical-align: top; position: absolute; right: 10px; top: 18px; height: 20px;">{{post-dt}}</label>
                </p>
            </div>
            <div>
                <a href="javascript: alert('Like')" class="button like" >Like</a>
                <a href="javascript: alert('Comment')" class="button comment" >Comment</a>
                <a href="javascript: alert('Share')" class="button share" >Share</a>
            </div>
        </div>
        {{/each}}
    </script> 
```

我用来测试模板的示例 json::

```
feeds:[
    {
    'post-img': 'assets/images/photo1.png',
    'post-mes': 'Before the party, with @Marie',
    'post-by':  'Naza',
    'post-by-img':'assets/images/by.jpg',
    'post-dt':  '5 min'
    },
    {
    'post-img': 'assets/images/photo1.png',
    'post-mes': 'Before the party, with @Marie',
    'post-by':  'Naza',
    'post-by-img':'assets/images/by.jpg',
    'post-dt':  '10 min'
    },
    {
    'post-img': 'assets/images/photo1.png',
    'post-mes': 'Before the party, with @Marie',
    'post-by':  'Naza',
    'post-by-img':'assets/images/by.jpg',
    'post-dt':  '15 min'
    }
] 
```

和 parse.com 脚本::

```
var feedsObject = Parse.Object.extend("feeds");
var query = new Parse.Query(feedsObject);

        query.find({ ... }); 
```

我喜欢得到它如下::

```
query.find({
    success: function(feeds){
        //load home page template
        var source = $('#post-template').html();
        var template = Handlebars.compile(source);
        var html = template(feeds);  // here's example with some details [link](http://screencast.com/t/XvPFuafRuIW)
        $('#home .content').append(html);

    },
    error: function(object, error){
        console.log(error);
    }
}); 
```

提前致谢！！！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-02T15:11:16.300

我从未使用过 Parse.com（事实上，不知道它存在）。但在[此处](https://parse.com/docs/js_guide#queries)`Parse.Object`的示例中，它返回一个实例数组。

`Parse.Object`有一个函数[toJSON()](https://parse.com/docs/js/symbols/Parse.Object.html#toJSON)。这应该这样做。

所以在你的情况下：

```
query.find({
    success: function(feeds){
        var jsonArray = [];

        for(var i = 0; i < feeds.length; i++) {
           jsonArray.push(feeds[i].toJSON());
        } 

        //load home page template
        var source = $('#post-template').html();
        var template = Handlebars.compile(source);
        var html = template(jsonArray);  // here's example with some details [link](http://screencast.com/t/XvPFuafRuIW)
        $('#home .content').append(html);

    },
    error: function(object, error){
        console.log(error);
    }
}); 
```

# php - 当我在 geochart 中仅使用一个参数 Country 时，如何更改区域的默认颜色 (#267114)

> ID：14120852
> 
> 赞同：1
> 
> 时间：2013-01-02T10:58:47.283
> 
> 标签：php, google-visualization

我使用与此链接 jsfiddle.net 代码相同的地理图表。我在 geochart 中只使用一个参数 City 或 country 作为数据集，我无法更改他的默认数据填充区域颜色。

我只想更改它们当前为 #267114 的圆圈颜色，例如 green 。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-02T11:07:07.507

更好的是你可以提供完整的信息（或）检查这个网站， [https://developers.google.com/chart/interactive/docs/gallery/geochart](https://developers.google.com/chart/interactive/docs/gallery/geochart)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-04-08T14:56:23.117

`var options = { defaultColor: '#F9CB1C' }`

由于某种原因，它不在文档中。#hth

# php - 从 Paypal Access 获取交易清单

> ID：14120856
> 
> 赞同：0
> 
> 时间：2013-01-02T10:59:13.257
> 
> 标签：php, paypal

我正在使用 Paypal 访问登录。但登录后我需要贝宝交易。

[我使用了来自https://github.com/paypal/paypal-access](https://github.com/paypal/paypal-access)的示例代码 一切正常。但我不明白如何获得交易。可以使用 Paypal Access 吗？如果没有，那怎么办？你可以看看[http://www.storenvy.com/](http://www.storenvy.com/)。他们取消了贝宝交易。

任何想法？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-02T20:54:20.640

您可以结合使用[TransactionSearch API和](https://www.x.com/developers/paypal/documentation-tools/api/transactionsearch-api-operation-nvp)[GetTransactionDetails](https://www.x.com/developers/paypal/documentation-tools/api/gettransactiondetails-api-operation-nvp)来获取您需要的一切。

# android - 机器人支持双点触控吗？

> ID：14120860
> 
> 赞同：3
> 
> 时间：2013-01-02T10:59:30.930
> 
> 标签：android, robotium

“ROBOTIUM”是否支持2指触控？实际上，我想编写一个测试用例，其中用户点击并按住一个按钮并使用另一根手指单击另一个按钮。那可能吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-02T18:15:13.873

实际上，它不受支持。您可以在此处编写增强功能： [http ://code.google.com/p/robotium/issues/list](http://code.google.com/p/robotium/issues/list)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-14T15:24:40.697

这是可能的，这并不容易，但它是可能的。您将需要[MotionEvent](http://developer.android.com/reference/android/view/MotionEvent.html)，您可以根据需要调度它。

# php - 在 IIS 上安装 PHP 后出现空白页

> ID：14120862
> 
> 赞同：1
> 
> 时间：2013-01-02T10:59:57.173
> 
> 标签：php, iis-7

我正在尝试将 PHP 安装到 Windows Server 2008 R2 上。我已按照[此处](http://www.howtogeek.com/50432/how-to-install-php-on-iis-7-for-windows-server-2008/)的说明进行操作，但是当我尝试加载 phpinfo.php 时，我得到一个空白页。

事件查看器中没有错误。

该服务器用于托管多个其他 Asp.Net 网站，但我使用的是 PHP，以便我可以安装 MediaWiki。

**更新：**

当尝试加载简单的 HTML（没有 PHP）时，它也会加载为空白。对此的修复似乎是在“打开/关闭 Windows 功能”管理器中启用“静态内容”——但这已经到位。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-30T18:02:09.187

这也发生在我身上，只是运行微软在他们的网站上使用他们的 Web 平台安装程序提供的方便的花花公子 php 安装程序，结果默认在 php.ini 文件中 short_open_tag 默认情况下是关闭的，所以我的代码

```
<? 
print("hello world!"); 
?> 
```

不会工作，因为它期待

```
<?php 
print("hello world!"); 
?> 
```

....所以是的...如果这也是你的问题，那就去改变它！

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2014-02-24T23:36:37.370

如果从旧服务器复制旧的 Wordpress 安装 - 确保复制所有文件。哎呀... <尴尬>

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-02T11:17:14.120

当出现 PHP 错误并报告错误时，也可能出现空白页。尝试运行下面的脚本，看看会发生什么。

```
<html>
<body>

Hello HTML

<?php
error_reporting(E_ALL);
echo "Hello PHP";
?>

</body>
</html> 
```

您还可以尝试查看带有 PHP 扩展的普通 HTML 页面是否运行良好。也许您的服务器设置为不允许 PHP 扩展。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-01-02T11:26:23.730

您必须为每个 PHP 网站配置 fastCGI，您可以在此处找到更多详细信息 -[配置 FastCGI 和 PHP 的最佳实践](http://www.iis.net/learn/application-frameworks/install-and-configure-php-applications-on-iis/using-fastcgi-to-host-php-applications-on-iis)

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-01-02T11:59:43.703

因此，经过数小时的随机尝试后，我找到了解决方案。我在 Windows 中删除并重新添加了静态内容角色 - 结果仍然相同。然后我在 IIS 中编辑了网站的错误页面功能，说返回详细的错误消息。此时 PHP 开始抱怨时区，所以我设置为“Europe\London”——要使其生效，您需要重新启动 IIS。之后它工作了，phpinfo 现在加载了！

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2016-02-01T14:45:20.090

我有这个问题；在“打开或关闭 Windows 功能”处，我启用了：HTTP Errors Server-Side Includes Directory Browsing Windows Authentication

我还在 C:\Program Files (x86)\PHP\v5.3\php.ini 中设置了这些选项： `display_errors = On` `display_startup_errors = On`

之后，显示 401 Unauthorized 错误。我将“所有人”和“用户”组添加到要修复的文件夹中。

# c - 当指针指向单个字符和动态声明的长整数数组时，指针的大小如何变化？C代码

> ID：14120865
> 
> 赞同：0
> 
> 时间：2013-01-02T11:00:14.190
> 
> 标签：c

我知道数组声明会导致一块内存被保留，但是对于由指针表示的数组，这不会。因为它包含数组第一个元素的地址。

但是关于大小如何从指向单个 long int 变为动态声明的 long 整数数组，对此主题的任何解释都将不胜感激。

亲切的问候

例子 ：

```
long int *plint = 5; // size is the same as

long int *arr;

arr = (long int*)malloc(5*(sizeof(long int)); 
```

尺寸 arr 是否与尺寸 plint 相同？

如果不是，它如何改变大小？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-02T11:06:19.760

我想你的代码看起来像这样：

```
long *ptr = 0;
long ra[10];
printf("%d %d\n", (int)(sizeof(ptr)), (int)(sizeof(ra)) ); 
```

在这种情况下`ra` *不是指针*，它的大小也不是指针的大小。

`&ra[0]`是指向第一个元素的指针，所以你可以这样做：

```
print("%d\n", (int)(sizeof(&ra[0]))); 
```

您会看到它的大小与`ptr`.

在大多数情况下，当您`ra`在表达式中使用它时，它会“衰减”为指向其第一个元素的指针。但`sizeof`不是其中一种情况。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-02T11:02:53.550

答案是**指针的大小不会改变**。简单的解释是**指针是一个存储另一个对象地址的变量**。实际大小取决于平台。

* * *

## 回答 #3

> 赞同：-4
> 
> 时间：2013-01-02T11:23:03.277

指针是一个特殊的变量，存放另一个变量的地址。变量的地址是一个整数，其大小与普通整数变量的大小相同。考虑以下代码片段。

```
 char c ='a';
         char *ptr = &c; 
```

这里 c 是字符将占用 1 个字节，而 ptr 是 char 指针变量（不是 char 变量）。因此 ptr 的大小与整数的大小相同。

现在，

```
 int* ptr = (int*) malloc(10*sizeof(int)); 
```

ptr 的大小再次与整数的大小相同，尽管它指向大小的块（10 * int 的大小）

# html - 如何通过（linux）脚本发布网站

> ID：14120867
> 
> 赞同：-1
> 
> 时间：2013-01-02T11:00:25.917
> 
> 标签：html, ftp, publish

我刚刚在我的 Ubuntu 笔记本电脑上完成了一个不错的 HTML5+ JQM 网站。make 脚本将服务器端代码转换为静态 HTML，优化图像并压缩 JTML、JavaScript 和 CSS。

我问您建议将其上传到我的公共服务器的方法是什么（我有 ftp 访问权限，没有 ssh）。它应该是一个强大的、可重复的和灵活的（例如，删除服务器上已删除的文件，只上传更改的文件？）解决方案，应该是自动化的。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-02T11:06:16.373

这是一个通用解决方案，您需要根据需要进行修改

*   ls 您更改的文件并保存在一个数组中（？或者可能是一个列表）
*   连接到 FTP
*   上传更改的内容
*   断开

最好的办法是建立一个版本控制系统，涵盖已删除、修改等的文件。设置 GIT 并使用 GIT 命令获取已更改文件的列表，并使用命令行 FTP 上传文件。

# c - 通过C中的void函数返回动态数组

> ID：14120869
> 
> 赞同：1
> 
> 时间：2013-01-02T11:00:27.703
> 
> 标签：c, malloc, return, void

在我的 C 程序中，我使用带有以下参数的 void 函数：一个 2D int 数组、一个用于创建新动态数组的 int 指针和一个 last int 指针，该指针将保存将在功能。所以动态数组是使用 malloc 在函数中创建的，一切正常，直到我在调用函数后在 main() 中打印它的元素。我得到的是垃圾而不是我应该看到的数字。这是功能代码：

```
void availableMoves(int array[][3], int *av, int *counter)
{
    int i, j;
    for (i=0; i<3; i++)
    {
        for (j=0; j<3; j++)
        {
            if (array[i][j] == E)
            {
                printf("%d ", 3*i + j + 1);
                (*counter)++;
            }
        }
    }
    av = (int *) malloc(*counter * sizeof(int));
    if (av == NULL)
    {
        printf("ERROR!");
    }
    else
    {
        for (i=0; i<*counter; i++)
            *(av + i) = 0;
        int pos = 0;
        for (i=0; i<3; i++)
        {
            for (j=0; j<3; j++)
            {
                if (array[i][j] == E)
                {
                    *(av + pos++) = 3*i + j + 1;
                }
            }
        }
    }
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-02T11:02:23.613

对动态数组使用双指针`int **av`而不是`int *av`

```
void availableMoves(int array[][3], int **av, int *counter) 
```

并`av`通过以下方式更改功能`*av`

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-02T11:05:06.967

在这个函数中，`av`是一个通过拷贝传递的指针。因此，当您在函数内更改指针的值时，不会修改原始指针。

有两种可能性：

*   使用指向指针 ( `int **av`) 的指针；
*   返回分配的指针 ( `return av`)。

所以要么：

```
void availableMoves(int array[][3], int **av, int *counter); 
```

或者：

```
int *availableMoves(int array[][3], int *av, int *counter) 
```

和电话：

```
availableMoves(array, &av, &counter);
av = availableMoves(array, av, &counter); 
```

# jquery - 为什么我无法在 HTML 上呈现 jqGrid

> ID：14120871
> 
> 赞同：0
> 
> 时间：2013-01-02T11:00:33.180
> 
> 标签：jquery, asp.net, html, asp.net-mvc, jqgrid

我正在尝试在 HTML 上呈现 jqGrid，但遇到了一些错误。这是完整的代码。我收到运行时错误，并且网格未加载。

```
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
    <title></title>

    <script src="/Scripts/jquery-1.3.2.js" type="text/javascript"></script>    
   <script src="/Scripts/jquery-1.3.2.min.js" type="text/javascript"></script>

    <link rel="stylesheet" type="text/css" href="/Scripts/themes/steel/grid.css" title="steel"media="screen" />

    <link href="/Scripts/themes/jqModal.css" rel="stylesheet" type="text/css" />
    <script src="/Scripts/jquery.jqGrid.js" type="text/javascript"></script>
    <script src="/Scripts/js/jqModal.js" type="text/javascript"></script>
    <script src="/Scripts/js/jqDnR.js" type="text/javascript"></script>
    <script type="text/javascript">

    function() {

     var lastsel2 =
jQuery("#tempset").jqGrid({
    datatype: "local",
    height: 260,
    width:300,
       colNames:[ ' ','Rate *C/Min','Value *C', 'Hold Time min', 'Run Time min'],
       colModel:[
           {name:'id',index:'id', width:60, sorttype:"int", editable: true},
           {name:'rate',index:'rate', width:40,editable: true,editoptions:{size:"20",maxlength:"30"}},
           {name:'value',index:'value', width:40, editable: true,editoptions: {size:"20",maxlength:"30"}},
           {name:'holdtime',index:'holdtime', width:50, editable: true,editoptions:{size:"20",maxlength:"30"}},        
           {name:'runtime',index:'runtime', width:100,editable: false}        
       ],
    onSelectRow: function(id){
        if(id && id!==lastsel2){
            jQuery('#tempset').jqGrid('restoreRow',lastsel2);
            jQuery('#tempset').jqGrid('editRow',id,true);
            lastsel2=id;
        }
    },
    //editurl: "server.php",
    caption: "Temperature Settings",
    pager: "#tempset_pager",
});

var mydata2 = [
        {id:"initial",rate:"",value:"50",holdtime:"60",runtime:"60"},
        {id:"Ramp 1",rate:"15",value:"67 ",holdtime:"5",runtime:"66.133"},
        {id:"Ramp 2",rate:"20",value:"89",holdtime:"10",runtime:"77.233"},
        {id:"Ramp 3",rate:"25",value:"123",holdtime:"3",runtime:"81.593"}
        ];

for(var i=0;i < mydata2.length;i++)
{
//alert(mydata2[i].id);
 jQuery("#tempset").jqGrid('addRowData',mydata2[i].id,mydata2[i]);
 }

 jQuery("#tempset").navGrid("#tempset_pager", {});

 }

</script>
</head>

<body>
<div style = "margin-left:240px; top: 15px; position:absolute;">
 <table id="tempset"></table>
        <div id="tempset_pager"> </div>
 </div>

</body>
</html> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-02T11:24:22.273

以下可能会导致问题：

1.  对 jQuery 的多次引用。
2.  `function() { ...`-> 这是一个语法错误。缺少函数名。
3.  `pager: "#tempset_pager",`-> 尾随逗号会在 IE 中出错

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-02T11:30:48.800

更换你的

```
function() { 
```

有了这个

```
$(function(){ 
```

并在脚本代码的末尾添加如下所示的右大括号

```
); 
```

也换

```
var lastsel2 = 
```

和

```
var lastsel2; 
```

注意：进行上述更改后，它对我有用

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-02T11:33:28.610

替换这个

```
function() { 
```

有了这个

```
$(function(){ 
```

此外，替换`var lastsel2 =` 为`var lastsel2;`or`var lastsel2 = '';`并重试。

# c++ - VC++ 正则表达式 ANSI C 等效

> ID：14120874
> 
> 赞同：0
> 
> 时间：2013-01-02T11:00:55.253
> 
> 标签：c++, c, regex

我有以下 C++ 代码，工作正常：

```
#include <regex>
#include <iostream>
#include <string>

int main () {
    std::string str("mymail@yahoo.com;lslsls;myemail@gmail.com");
    std::tr1::regex rx("([a-zA-Z0-9_\\.]+@([a-zA-Z0-9\\-]+\\.)+[a-zA-Z]{2,4})");
    std::tr1::sregex_iterator first(str.begin(), str.end(), rx);
    std::tr1::sregex_iterator last;

    for (auto it = first; it != last; ++it) 
    {
        std::cout << "[Email] => " << it->str(1) << std::endl;
    }

    return 0;
} 
```

有没有一种简单的方法可以使用本机库在 C ANSI (*.cpp -> *.c) 中获得这个？我正在使用 MS Visual Studio 2010。

# iphone - ld: 找不到框架 AudioUnit

> ID：14120878
> 
> 赞同：13
> 
> 时间：2013-01-02T11:01:09.637
> 
> 标签：iphone, ios

我正在包含另一个项目，即使我包含了所有需要的库，我也会收到此错误。

这是错误详细信息：

```
Ld /Users/alialzahrani/Library/Developer/Xcode/DerivedData/IMS3-ezltqoccjhjpvuakngozvwcsppvh/Build/Products/Debug-iphoneos/IMS3.app/IMS3 normal armv7
    cd /Users/alialzahrani/Desktop/IMSFolder/mydoubs/iPhone/idoubs/branches/2.0/IMS3
    setenv IPHONEOS_DEPLOYMENT_TARGET 6.0
    setenv PATH "/Applications/Xcode.app/Contents/Developer/Platforms/iPhoneOS.platform/Developer/usr/bin:/Applications/Xcode.app/Contents/Developer/usr/bin:/usr/bin:/bin:/usr/sbin:/sbin"
    /Applications/Xcode.app/Contents/Developer/Toolchains/XcodeDefault.xctoolchain/usr/bin/clang++ -arch armv7 -isysroot /Applications/Xcode.app/Contents/Developer/Platforms/iPhoneOS.platform/Developer/SDKs/iPhoneOS6.0.sdk -L/Users/alialzahrani/Library/Developer/Xcode/DerivedData/IMS3-ezltqoccjhjpvuakngozvwcsppvh/Build/Products/Debug-iphoneos -L/Users/alialzahrani/Desktop/IMSFolder/mydoubs/doubango/branches/2.0/doubango/thirdparties/iphone/lib/armv7 -F/Users/alialzahrani/Library/Developer/Xcode/DerivedData/IMS3-ezltqoccjhjpvuakngozvwcsppvh/Build/Products/Debug-iphoneos -filelist /Users/alialzahrani/Library/Developer/Xcode/DerivedData/IMS3-ezltqoccjhjpvuakngozvwcsppvh/Build/Intermediates/IMS3.build/Debug-iphoneos/IMS3.build/Objects-normal/armv7/IMS3.LinkFileList -dead_strip -fobjc-link-runtime -stdlib=libc++ -miphoneos-version-min=6.0 -framework AudioUnit -framework AVFoundation -framework CoreAudio -lsqlite3 -lresolv -framework AudioToolbox -framework AddressBook -framework AddressBookUI -framework CFNetwork -framework CoreMedia -framework CoreVideo -framework SystemConfiguration -framework CoreGraphics /Users/alialzahrani/Library/Developer/Xcode/DerivedData/IMS3-ezltqoccjhjpvuakngozvwcsppvh/Build/Products/Debug-iphoneos/libios_ngn_stack.a /Users/alialzahrani/Library/Developer/Xcode/DerivedData/IMS3-ezltqoccjhjpvuakngozvwcsppvh/Build/Products/Debug-iphoneos/libtinyDAV.a /Users/alialzahrani/Library/Developer/Xcode/DerivedData/IMS3-ezltqoccjhjpvuakngozvwcsppvh/Build/Products/Debug-iphoneos/libtinyHTTP.a /Users/alialzahrani/Library/Developer/Xcode/DerivedData/IMS3-ezltqoccjhjpvuakngozvwcsppvh/Build/Products/Debug-iphoneos/libtinyIPSec.a /Users/alialzahrani/Library/Developer/Xcode/DerivedData/IMS3-ezltqoccjhjpvuakngozvwcsppvh/Build/Products/Debug-iphoneos/libtinyMEDIA.a /Users/alialzahrani/Library/Developer/Xcode/DerivedData/IMS3-ezltqoccjhjpvuakngozvwcsppvh/Build/Products/Debug-iphoneos/libtinyMSRP.a /Users/alialzahrani/Library/Developer/Xcode/DerivedData/IMS3-ezltqoccjhjpvuakngozvwcsppvh/Build/Products/Debug-iphoneos/libtinyNET.a /Users/alialzahrani/Library/Developer/Xcode/DerivedData/IMS3-ezltqoccjhjpvuakngozvwcsppvh/Build/Products/Debug-iphoneos/libtinyRTP.a /Users/alialzahrani/Library/Developer/Xcode/DerivedData/IMS3-ezltqoccjhjpvuakngozvwcsppvh/Build/Products/Debug-iphoneos/libtinySAK.a /Users/alialzahrani/Library/Developer/Xcode/DerivedData/IMS3-ezltqoccjhjpvuakngozvwcsppvh/Build/Products/Debug-iphoneos/libtinySDP.a /Users/alialzahrani/Library/Developer/Xcode/DerivedData/IMS3-ezltqoccjhjpvuakngozvwcsppvh/Build/Products/Debug-iphoneos/libtinySIGCOMP.a /Users/alialzahrani/Library/Developer/Xcode/DerivedData/IMS3-ezltqoccjhjpvuakngozvwcsppvh/Build/Products/Debug-iphoneos/libtinySIP.a /Users/alialzahrani/Library/Developer/Xcode/DerivedData/IMS3-ezltqoccjhjpvuakngozvwcsppvh/Build/Products/Debug-iphoneos/libtinySMS.a /Users/alialzahrani/Library/Developer/Xcode/DerivedData/IMS3-ezltqoccjhjpvuakngozvwcsppvh/Build/Products/Debug-iphoneos/libtinyWRAP.a /Users/alialzahrani/Library/Developer/Xcode/DerivedData/IMS3-ezltqoccjhjpvuakngozvwcsppvh/Build/Products/Debug-iphoneos/libtinyXCAP.a -framework UIKit -framework Foundation -o /Users/alialzahrani/Library/Developer/Xcode/DerivedData/IMS3-ezltqoccjhjpvuakngozvwcsppvh/Build/Products/Debug-iphoneos/IMS3.app/IMS3

ld: framework not found AudioUnit
clang: error: linker command failed with exit code 1 (use -v to see invocation) 
```

这是我确实包含的所有库：

![在此处输入图像描述](../Images/bec9e0fba56434682ac745720824827d.png)

如果不包含框架，我会收到 110 个错误： ![在此处输入图像描述](../Images/fa1b7a6737571c6739abe0cf4dbf9c18.png)

* * *

## 回答 #1

> 赞同：35
> 
> 时间：2013-01-02T11:05:34.710

Audio Unit 只是一个伞式框架，它没有任何实际的动态库可以链接，只有标题。不要将它添加到项目中，构建会成功。（音频单元的实际符号位于另一个框架中，IIRC 它是 AudioToolbox。）

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2013-01-29T09:18:13.683

我在创建录音机应用程序时遇到了同样的错误。

您只需做一件事，只需添加`AudioToolbox framework, CoreAudio framework.`您的项目，然后 `#import <AudioToolbox/AudioToolbox.h>, #import <CoreAudio/CoreAudioTypes.h>`

# jsp - tomcat 工作正常，但不知道出了什么问题？

> ID：14120880
> 
> 赞同：2
> 
> 时间：2013-01-02T11:01:14.553
> 
> 标签：jsp, tomcat, servlets, tomcat7

我刚刚开始使用 tomcat 并且运行良好，但是从昨天开始我在启动它时遇到了麻烦。我也重新安装了它。我在其日志文件中得到的错误报告发布在下面.....

> 块引用

```
 2013-01-01 19:10:21 Commons Daemon procrun stderr initialized
   java.lang.NoClassDefFoundError: org/apache/juli/logging/LogFactory
at org.apache.catalina.startup.Bootstrap.<clinit>(Bootstrap.java:60)
   Caused by: java.lang.ClassNotFoundException: org.apache.juli.logging.LogFactory
    at java.net.URLClassLoader$1.run(Unknown Source)
    at java.security.AccessController.doPrivileged(Native Method)
    at java.net.URLClassLoader.findClass(Unknown Source)
    at sun.misc.Launcher$ExtClassLoader.findClass(Unknown Source)
     at java.lang.ClassLoader.loadClass(Unknown Source)
    at java.lang.ClassLoader.loadClass(Unknown Source)
   ... 1 more 
```

线程“主”中的异常

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-02T16:10:25.437

> *实际上我将库从tomcat复制到jdk的ext文件夹中..*

你不应该那样做。它会导致类加载灾难。您不应该移动/复制/更改 servletcontainer 自己的库。`/lib`您应该不碰它们，并且永远不要在 JRE/JDK或`/lib/ext`文件夹中丢弃与 Java SE 没有任何关系的任意 JAR 。清理那些文件夹。

在相关的说明中，即使您似乎没有这样做，您也不应该将特定于 servletcontainer 的 JAR 文件放在 webapp 的`/WEB-INF/lib`文件夹中。

这是一个常见的初学者错误，以规避 JSP/Servlet API 上的编译错误或“简化”编译而不摆弄`%CLASSPATH%`or `-cp`/ `-classpath`。如果您使用的是 Eclipse/Netbeans 之类的 IDE，那么您实际上应该在 IDE 中注册了服务器运行时并将其与 Web 项目关联为“目标运行时”。如果您使用的是 plain `javac`，那么您实际上应该使用`-cp`/`-classpath`参数来指定用于编译的特定于 servletcontainer 的 JAR 文件。为了进一步抽象化以避免重新输入整个类路径值，您应该将命令放在可重用`.bat`或`.cmd`文件中，或者只是拥有像 Maven、Gradle 或什至像 Eclipse/Netbeans 这样的 IDE 这样的体面的构建工具。

### 也可以看看：

*   [如何在我的 Eclipse 项目中导入 javax.servlet / jakarta.servlet API？](https://stackoverflow.com/questions/4076601/how-do-i-import-the-javax-servlet-api-in-my-eclipse-project/4076706#4076706)- 如果您实际使用 Eclipse，则很有帮助

# oop - 如何重组/重新设计不断增长的适配器类？

> ID：14120882
> 
> 赞同：0
> 
> 时间：2013-01-02T11:01:22.410
> 
> 标签：oop, design-patterns

我正在开发一个使用多个数学求解器的游戏/模拟应用程序。它们中的每一个都有一个已经存在的适配器类。这些适配器类为应用程序提供所有呈现和功能信息。

广义上讲，我们保留一个适配器对象来表示一个实例并调用方法来实现：

*   生成渲染数据。
*   修改对象状态。有太多的功能可以做到这一点。
*   为各种目的读取数据模型信息。

现在的问题是这些类在一段时间内不断增长，并且承载了太多的信息和责任。

我的问题是如何重新设计/重组这些类以使其更有意义。有没有我应该看的设计模式？

编辑：根据要求，这是任何适配器类将要做的事情的广泛列表。

1.  与存储在数学求解器中的当前数据同步。

2.  与我们应用程序的数据模型同步。对于诸如撤消/重做之类的事情。

3.  修改对象状态：改变形状。这是最重要的，并且有 50 多个功能来实现它。所有都是带有参数的独立的单一服务调用。我正在尝试在此处插入接口和工厂，但功能签名不兼容。

4.  获取数学求解器的数据模型信息。比如 getChildern 等。

5.  更改可见性和其他图形属性。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-02T12:33:38.000

使用的原则是来自[GRASP的](http://en.wikipedia.org/wiki/GRASP_%28object-oriented_design%29)*Information Expert*：

> […] 使用信息专家的原则，分配职责的一般方法是查看给定的职责，确定履行职责所需的信息，然后确定该信息的存储位置。信息专家将导致将责任放在具有履行职责所需的最多信息的班级上。[…]

尽管从未明确提及，但应用此原则可能会引导您使用 Martin Fowler 在其重构书中的[“对象间移动特征”一章中给出的模式：](http://sourcemaking.com/refactoring/moving-features-between-objects)

> [...] 类通常会因为太多的责任而变得臃肿。在这种情况下，我使用 Extract Class 来分离其中的一些职责。如果一个类变得太不负责任，我使用 Inline Class 将它合并到另一个类中。如果正在使用另一个类，使用 Hide Delegate 隐藏这个事实通常很有帮助。有时隐藏委托类会导致不断更改所有者的界面，在这种情况下，您需要使用 Remove Middle Man [...]

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-02T13:06:36.193

[一般来说，根据单一职责原则](http://en.wikipedia.org/wiki/Single_responsibility_principle)，分解你的类，使每个类只有一个改变的理由。将您的“适配器”作为您将提取的类的[外观](http://en.wikipedia.org/wiki/Facade_pattern)保留在适当的位置；它将使重构更顺畅。

由于您描述了所有适配器共有的职责列表，因此您可能有很多在适配器之间几乎相同的代码。在进行此练习时，请尝试从多个适配器中提取相同的职责，并寻找消除重复的方法。

从为“修改对象状态”提取一个类开始是很诱人的。由于您有 50 多个 (!) 函数来履行该职责，因此您可能应该将其分解为几个类，如果可以的话。由于这可能是适配器类膨胀的最大原因，因此只需这样做就可以解决问题，尽管分解它很重要，或者您只需移动 God 类，而不是简化它。

但是，这将是大量工作，并且可能非常复杂，以至于您不会轻易看到在适配器之间重用提取的类的机会。另一方面，提取小的责任不会给你带来很多好处。我会选择中间的东西开始。

# php - Symfony 2 yaml 到 XML

> ID：14120885
> 
> 赞同：0
> 
> 时间：2013-01-02T11:01:30.333
> 
> 标签：php, xml, symfony, service, yaml

如何用 XML 写这个？

```
# src/Acme/MainBundle/Resources/config/services.yml
services:
    acme_main.menu_builder:
        class: Acme\MainBundle\Menu\MenuBuilder
        arguments: ["@knp_menu.factory"]

    acme_main.menu.main:
        class: Knp\Menu\MenuItem # the service definition requires setting the class
        factory_service: acme_main.menu_builder
        factory_method: createMainMenu
        arguments: ["@request"]
        scope: request # needed as we have the request as a dependency here
        tags:
            - { name: knp_menu.menu, alias: main } # The alias is what is used to retrieve the menu 
```

我已经尝试过了，但出现下一个错误：xml：

```
<!-- Knp Menu -->
<service id="acme.menu_builder" class="Acme\FrontendBundle\Menu\MenuBuilder">
    <argument type="service" id="knp_menu.factory" />
    <argument type="service" id="security.context" />
</service>

<service id="acme.menu.main" class="Acme\Menu\MenuItem" scope="request">
    <argument type="service" id="acme_menu.menu_builder" />
    <argument type="service" id="request" />
    <tag name="knp_menu.menu" alias="main" method="createMainMenu" />
</service> 
```

错误： `ErrorException: Catchable Fatal Error: Argument 2 passed to Knp\Menu\MenuItem::__construct() must implement interface Knp\Menu\FactoryInterface, instance of Symfony\Component\HttpFoundation\Request given`

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-02T13:38:39.857

你从哪里得到 XML 格式的？它看起来像一些完全不同的设置（例如，在 yaml 中`acme.menu_builder`有`Acme\MainBundle\Menu\MenuBuilder`类，`Acme\FrontendBundle\Menu\MenuBuilder`在 xml 中有类。`acme.menu_builder`服务在 yaml 中有 1 个参数，在 xml 中有 2 个参数？

要回答您的问题，它应该如下所示：

```
<services>
    <service id="acme_main.menu_builder" 
        class="Acme\MainBundle\Menu\MenuBuilder"
    >
        <argument type="service" id="knp_menu.factory" />
    </service>

    <service id="acme_main.menu.main"
        class="Knp\Menu\MenuItem"
        factory-service="acme_main.menu_builder"
        factory-method="createMainMenu"
        scope="request"
    >
        <argument type="service" id="request" />
        <tag name="knp_menu.menu" alias="main" />
    </service>
</services> 
```

# c# - 无法从代码隐藏中获取文本框值

> ID：14120887
> 
> 赞同：-1
> 
> 时间：2013-01-02T11:01:36.930
> 
> 标签：c#, asp.net

```
<%@ Page Title="Register" Language="C#" MasterPageFile="~/Site.master" AutoEventWireup="true"
CodeBehind="Register.aspx.cs" Inherits="dating.Account.Register" %>

<asp:Content ID="HeaderContent" runat="server" ContentPlaceHolderID="HeadContent">
</asp:Content>
<asp:Content ID="BodyContent" runat="server" ContentPlaceHolderID="MainContent">
    <asp:CreateUserWizard ID="RegisterUser" runat="server" EnableViewState="false" OnCreatedUser="RegisterUser_CreatedUser">
        <LayoutTemplate>
            <asp:PlaceHolder ID="wizardStepPlaceholder" runat="server"></asp:PlaceHolder>
            <asp:PlaceHolder ID="navigationPlaceholder" runat="server"></asp:PlaceHolder>
        </LayoutTemplate>
        <WizardSteps>
            <asp:CreateUserWizardStep ID="RegisterUserWizardStep" runat="server">
                <ContentTemplate>
                    <h2>
                        Skapa nytt konto
                    </h2>
                    <p>
                        Fyll i formulären nedan
                    </p>
                    <span class="failureNotification">
                        <asp:Literal ID="ErrorMessage" runat="server"></asp:Literal>
                    </span>
                    <asp:ValidationSummary ID="RegisterUserValidationSummary" runat="server" CssClass="failureNotification" 
                         ValidationGroup="RegisterUserValidationGroup"/>
                    <div class="accountInfo">
                        <fieldset class="register">
                            <legend>Kontoinformation</legend>
                            <p>
                                <asp:Label ID="UserNameLabel" runat="server" AssociatedControlID="UserName">Användarnamn:</asp:Label>
                                <asp:TextBox ID="UserName" runat="server" CssClass="textEntry"></asp:TextBox>
                                <asp:RequiredFieldValidator ID="UserNameRequired" runat="server" ControlToValidate="UserName" 
                                     CssClass="failureNotification" ErrorMessage="Du måste fylla i användarnamn" ToolTip="User Name is required." 
                                     ValidationGroup="RegisterUserValidationGroup">*</asp:RequiredFieldValidator>
                            </p>
                        </fieldset>
                        <p class="submitButton">
                            <asp:Button ID="CreateUserButton" onclick="InsertUser" runat="server" CommandName="MoveNext" Text="Skapa användare" 
                                 ValidationGroup="RegisterUserValidationGroup"/>
                        </p>
                    </div>
                </ContentTemplate>
                <CustomNavigationTemplate>
                </CustomNavigationTemplate>
            </asp:CreateUserWizardStep>
        </WizardSteps>
    </asp:CreateUserWizard>
</asp:Content> 
```

我正在尝试使用来自代码隐藏 ID UserName 的文本框中的值，但这不起作用：

```
UserName.Text 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-02T11:10:56.770

您可以使用 访问用户名`[ID of the CreateUserWizard].UserName`。该`CreateUserWizard`控件公开用于访问输入到字段中的值的属性

```
 string username = RegisterUser.UserName;
 string email = RegisterUser.Email;
 ... etc 
```

你也可以从代码隐藏中设置它

```
 RegisterUser.UserName = "John Doe"; 
```

## **更新：如果您需要找到控件，请使用**

```
TextBox usernameTextBox = RegisterUser.CreateUserStep.ContentTemplateContainer.FindControl("UserName") as TextBox;
string username = usernameTextBox.Text; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-02T11:12:02.350

你可以使用这个：

`TextBox UserName = (TextBox)"StepNameHere".FindControl("UserName");`

您正在访问的控件当前不是在您正在使用的事件上创建的。我想这会有所帮助。

# uiimageview - 在 uicollectionview didSelectItemAtIndexPath 方法中更改单元格 imageView

> ID：14120888
> 
> 赞同：1
> 
> 时间：2013-01-02T11:01:39.333
> 
> 标签：uiimageview, uicollectionview, uicollectionviewcell

我在 4 个单元格中构建了一个带有固定 imageView 的 CollectionView 控制器。我希望 imageView 改变单元格选择。你能帮我做这个吗？

谢谢

这是我的代码

CollectionView 控制器 .m

……

```
-(NSInteger)numberOfSectionsInCollectionView:
(UICollectionView *)collectionView
{
    return 1;
}

-(NSInteger)collectionView:(UICollectionView *)collectionView
    numberOfItemsInSection:(NSInteger)section
{
    return 4;
}

-(UICollectionViewCell *)collectionView:(UICollectionView *)collectionView
                 cellForItemAtIndexPath:(NSIndexPath *)indexPath
{
    Cell *myCell = [collectionView dequeueReusableCellWithReuseIdentifier:@"Cell"     forIndexPath:indexPath];

    UIImage *image;

    int row = [indexPath row];

    image = [UIImage imageNamed:@"ICUbedGREEN.png"];

    myCell.imageView.image = image;

    return myCell;
} 
```

我想在新闻上改变图像，但我无法弄清楚......

```
- (void)collectionView:(UICollectionView *)collectionView didSelectItemAtIndexPath:    (NSIndexPath *)indexPath
{
    UIImage *image = [UIImage imageNamed:[NSString stringWithFormat:@"ICUbedRED.png"]];

    cell.imageView.image = .....

     NSLog(@"elementselected"); 
```

}

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-02T18:59:06.743

在 UICollectionViewCell 的子类中实现 KVO 监听方法。如果要取消选择，请确保将多选设置为 true。

```
-(void)observeValueForKeyPath:(NSString *)keyPath ofObject:(id)object change:(NSDictionary *)change context:(void *)context{
 if ([keyPath isEqualToString@"selected"])
 {
      // check value of self.selected to know what you are currently.
      // change picture of image here
 }

} 
```

在您的单元格初始化方法中，您需要将自己添加为侦听器，以便

```
 [self addObserver:self forKeyPath:@"selected" options:nil context:nil]; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-03T01:41:24.817

对于您的问题，这可能是最愚蠢的答案，但它对我有用。我不知道如何使用 Samuel 所说的 KEY 值路径。

基本上我做了一个 NSMutableArray 来存储图标的状态，红色或绿色..是或否..

```
selState = [[NSMutableArray alloc] initWithObjects:@"NO",@"NO",@"NO",@"NO",nil ]; 
```

然后在“ItemForIndexPath”方法中，检查为该项目设置图像的值

```
if ([[selState objectAtIndex:indexPath.row] isEqualToString:@"NO"]) {
    image = [UIImage imageNamed:@"ICUbedGREEN.png"];
}
else
{
    image = [UIImage imageNamed:@"ICUbedRED.jpg"];
} 
```

选择项目时，使用 IndexPath 将 NO 的值更改为 YES，反之亦然。

```
if ([[selState objectAtIndex:indexPath.row] isEqualToString:@"NO"]) {
    [selState replaceObjectAtIndex:indexPath.row withObject:@"YES"];
}
else if ([[selState objectAtIndex:indexPath.row] isEqualToString:@"YES"]) {
    [selState replaceObjectAtIndex:indexPath.row withObject:@"NO"];
} 
```

然后更新了集合视图

```
[self.collectionView reloadData]; 
```

所有代码都在这里

```
@interface ViewController (){
NSMutableArray *selState;
}
@end
@implementation ViewController

- (void)viewDidLoad
{
    [super viewDidLoad];
// Do any additional setup after loading the view.

    selState = [[NSMutableArray alloc] initWithObjects:@"NO",@"NO",@"NO",@"NO",nil ];
}

-(NSInteger)numberOfSectionsInCollectionView:
(UICollectionView *)collectionView
{
    return 1;
}

-(NSInteger)collectionView:(UICollectionView *)collectionView
numberOfItemsInSection:(NSInteger)section
{
    return 4;
}

-(UICollectionViewCell *)collectionView:(UICollectionView *)collectionView
             cellForItemAtIndexPath:(NSIndexPath *)indexPath
{
    Cell *myCell = [collectionView dequeueReusableCellWithReuseIdentifier:@"Cell" forIndexPath:indexPath];

    UIImage *image;

    if ([[selState objectAtIndex:indexPath.row] isEqualToString:@"NO"]) {
        image = [UIImage imageNamed:@"ICUbedGREEN.png"];
    }
    else
    {
        image = [UIImage imageNamed:@"ICUbedRED.jpg"];
    }

    myCell.imageView.image = image;

    return myCell;
}
- (void)collectionView:(UICollectionView *)collectionView didSelectItemAtIndexPath:        (NSIndexPath *)indexPath
{
    if ([[selState objectAtIndex:indexPath.row] isEqualToString:@"NO"]) {
        [selState replaceObjectAtIndex:indexPath.row withObject:@"YES"];
    }
    else if ([[selState objectAtIndex:indexPath.row] isEqualToString:@"YES"]) {
        [selState replaceObjectAtIndex:indexPath.row withObject:@"NO"];
    }

    [self.collectionView reloadData];
}

@end 
```

谢谢

**编辑---->>**

上面*ItemForIndexPath*中的代码也可以写成

```
image = [[selState objectAtIndex:indexPath.row] isEqualToString:@"NO"] ?
             [UIImage imageNamed:@"ICUbedGREEN.png"] : [UIImage imageNamed:@"ICUbedRED.jpg"]; 
```

**结束编辑**

# python - 如何在 pyqt 中集成定时循环

> ID：14120889
> 
> 赞同：1
> 
> 时间：2013-01-02T11:01:44.957
> 
> 标签：python, user-interface, pyqt

我正在研究一个 pyqt-gui，它应该有可能在每个选定的时间（例如每 2 分钟）刷新数据加载。在这个循环中，gui 应该能够响应事件等。

代码如下所示：

```
from PyQt4.QtCore import *
from PyQt4.QtGui import *
from PyQt4.uic import *
class TeleModul (QMainWindow):
    def __init__(self, *args):
        QWidget.__init__(self, *args)
        loadUi ("telemodul.ui",self)
        .....
    def on_ButtonSuchen_clicked (self):
        QTimer.singleShot(60000, self.RefreshData())
    def RefreshData(self):
        ...do something ... 
```

单击 ButtonSuchen 会引发错误：

> TypeError：参数与任何重载调用不匹配：
> QTimer.singleShot(int, QObject, SLOT())：参数 2 具有意外类型“NoneType” QTimer.singleShot(int, callable)：参数 2 具有意外类型“NoneType”

什么是错误或集成此循环的最佳方法是什么？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-02T11:03:25.637

传递可调用对象，而不是调用它的结果：

```
QTimer.singleShot(60000, self.RefreshData) 
```

# php - 为什么在 html select taq 的选项 taq 中 if 和 else 都为真

> ID：14120891
> 
> 赞同：1
> 
> 时间：2013-01-02T11:01:50.767
> 
> 标签：php, html, if-statement

它真的很奇怪..这个有什么问题..？？默认情况下，我想在我的选择下拉列表中选择一个选项。因此，如果设置了一个值，我的 if 条件为真，那么为什么 else 也在执行。您的帮助将不胜感激。

```
<select name="location" id="location" class="selector_holder_select">

<?php foreach($location as $loc){ ?>

<option value="<?php echo $loc['deal_location_id']; ?>"

<?php if($loc['deal_location_id']==$_POST['location']){ echo 'selected="selected"'; }

else { 

if(strcasecmp($loc['location'], $city['cityName']) == 0) { echo 
'selected="selected"';     }

 } ?>><?php echo $loc['location']; ?></option>

 <?php } //End of Foreach ?> 

 </select> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-03T06:34:12.510

```
 Above not solve my issue.However this one worked.But can any body make it          
  shorter  and cleanup so it looks more professional.

   <select name="location" id="location" class="selector_holder_select">
   <?php foreach($location as   $loc){  ?>                  
    <option value="<?php echo $loc['deal_location_id']; ?>"
    <?php               
   if($loc['deal_location_id']==$_POST['location'])
   {
    echo 'selected="selected"'; 
   } 
   else {     
        if(strcasecmp($loc['location'], $city['cityName']) == 0 and !isset($_POST['location']))
        { echo 'selected="selected"'; } 
   } ?>>
<?php echo $loc['location']; ?></option>

 <?php } ?>
 </select> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-02T11:15:51.463

这段代码的一个问题是您大量混合了 HTML 和 PHP。这使得阅读非常困难。我建议使用 HEREDOC 或类似的东西来创建所有 HTML 部分，而不是经常打开和关闭 PHP。

我猜发生的情况是，一旦在 foreach 循环中满足第一个 if 条件，并且一次（在不同的迭代步骤中）满足 elseif。这样就选择了两个元素。

问题是，您无法在单个 foreach 中解决此问题。您首先必须检查 if-case 在某个时候是否为真。如果是这样，您可以设置选定的相应字段。如果不是，您可以搜索 else-if 并处理它。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-02T11:17:06.863

尝试这个：

```
<select name="location" id="location" class="selector_holder_select">
<?php foreach($location as $loc){
    echo('<option value="'.$loc['deal_location_id'].'"')
    if($loc['deal_location_id'] == $_POST['location'] || strcasecmp($loc['location'], $city['cityName']) == 0)
        echo(' selected="selected"');
    echo(">".$loc['location']."</option>");
?>
</select> 
```

但是，我建议您遵循有关 PHP 基础知识的教程，例如[来自 W3C](http://www.w3schools.com/php/default.asp)的教程。看起来您没有任何 PHP 经验。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-01-02T11:21:26.767

尝试这个：

```
<select name="location" id="location" class="selector_holder_select">
    <?php 
    foreach($location as $loc) {
            echo "<option value=$loc['deal_location_id']>";

            if($loc['deal_location_id']==$_POST['location']) { 
                echo 'selected="selected"'; 
            } else { 
                if(strcasecmp($loc['location'], $city['cityName']) == 0) { 
                    echo 'selected="selected"';     
                }
            }

            echo "$loc['location']</option>";
  }
</select> 
```

# tfs - 替换过时的 TfsTeamProjectCollection 构造函数

> ID：14120892
> 
> 赞同：2
> 
> 时间：2013-01-02T11:01:55.030
> 
> 标签：tfs, tfs-sdk

我找不到过时的`TfsTeamProjectCollection`构造函数的替代品。这是我当前的代码（有效）：

```
UICredentialsProvider uiCredentialsProvider = new UICredentialsProvider();
TfsTeamProjectCollection teamProjectCollection = new TfsTeamProjectCollection(new Uri("tpc uri"), new NetworkCredential("username", "pass", "domain"), uiCredentialsProvider); 
```

如果自定义凭据失败，此代码会引发 tfs 登录对话框。文档指出，`TfsClientCredentials`应该使用带有类的构造函数而不是这个。
我如何`UICredentialsProvider`在`TfsClientCredentials`课堂上使用？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-02T20:08:46.117

You could use the TeamProjectPicker class which provides a dialog to select a collection of TeamFoundation projects. [Microsoft.TeamFoundation.Client](http://msdn.microsoft.com/en-us/library/bb141829.aspx)

```
TeamProjectPicker tfsPP = new TeamProjectPicker(TeamProjectPickerMode.MultiProject, false, new UICredentialsProvider());
tfsPP.ShowDialog(); 
```

Also, you could look at the TfsClientCredentials class with the following constructor. You could then pass this object in.

TfsClientCredentials ( WindowsCredential windowsCredential, bool allowInteractive )

# sas - 在 SAS 中生成随机数

> ID：14120896
> 
> 赞同：6
> 
> 时间：2013-01-02T11:02:20.180
> 
> 标签：sas

如何使用 sas 中的 ranuni() 函数生成 10 到 50 之间的随机整数。

为了生成 1 到 5 之间的随机整数，我使用了这段代码

```
data random;
 do i=1 to 10;
    random_int = int(ranuni(0) * 5 + 1);
    output;
 end; 
```

跑;

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-01-02T12:39:31.863

使用相同的逻辑，您可以使用：

```
random_int = int(ranuni(0) * 41 + 10); 
```

`ranuni`从区间返回一个值`<0, 1>`，将它乘以 41 得到一个值`<0, 41>`，再加上 10，最终值是从`<10, 51>`。转换为 int 只是截断了小数部分，所以你永远不会得到 51。

一般：

```
a * ranuni(seed) + b; 
```

从区间返回一个值`<b, a + b>`。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-02T19:49:26.750

如果 u 是 [0,1] 中的随机均匀变量，则 x = a + (ba)*u 是 [a,b] 上的随机均匀变量。请参阅[http://blogs.sas.com/content/iml/2011/08/24/how-to-generate-random-numbers-in-sas/](http://blogs.sas.com/content/iml/2011/08/24/how-to-generate-random-numbers-in-sas/)

# objective-c - 无法使用访问令牌创建 Facebook 用户

> ID：14120904
> 
> 赞同：2
> 
> 时间：2013-01-02T11:02:48.717
> 
> 标签：objective-c, facebook, parse-platform, stackmob

我正在编写一种方法，该方法从我的 Parse 数据库中获取 facebook 用户记录，然后在 StackMob 上重新创建记录。当我调用 createUserWithFacebookToken 它返回此错误：

> [48887:c07] 错误域 = HTTP 代码 = 401“操作无法完成。（HTTP 错误 401。）”用户信息 = 0xa6a9e60 {错误 = 登录失败：}

```
- (IBAction)fetchAllUsers:(id)sender {
    NSMutableURLRequest *request = [[NSMutableURLRequest alloc] initWithURL:[NSURL URLWithString:@"https://api.parse.com/1/users/"]];
    [request setValue:@"XXXX" forHTTPHeaderField:@"X-Parse-Application-Id"];
    [request setValue:@"XXXX" forHTTPHeaderField:@"X-Parse-Master-Key"];

    NSURLConnection *connection = [NSURLConnection connectionWithRequest:request delegate:self];
}

- (void)connection:(NSURLConnection *)connection didReceiveResponse:(NSURLResponse *)response {
    NSLog(@"didReceiveResponse");
    [self.responseData setLength:0];
}

- (void)connection:(NSURLConnection *)connection didReceiveData:(NSData *)data {
    [self.responseData appendData:data];
}

- (void)connection:(NSURLConnection *)connection didFailWithError:(NSError *)error {
    NSLog(@"didFailWithError");
    NSLog(@"Connection failed: %@", [error description]);
}

- (void)connectionDidFinishLoading:(NSURLConnection *)connection {
    NSLog(@"connectionDidFinishLoading");
    NSLog(@"Succeeded! Received %d bytes of data",[self.responseData length]);

    // convert to JSON
    NSError *myError = nil;
    NSDictionary *res = [NSJSONSerialization JSONObjectWithData:self.responseData options:NSJSONReadingMutableLeaves error:&myError];
    NSArray *allUsers = [res objectForKey:@"results"];
    // show all values
    for (int i=0;i<allUsers.count;i++) {
        id value = [allUsers objectAtIndex:i];
        NSString *username = [value objectForKey:@"username"];
        NSDictionary *authData = [value objectForKey:@"authData"];
        NSDictionary *facebook = [authData objectForKey:@"facebook"];
        NSString *accessToken = [facebook objectForKey:@"access_token"];
        if (accessToken) {
            NSDictionary *aUser = [NSDictionary dictionaryWithObjectsAndKeys:accessToken, @"accessToken", username, @"username", nil];
//            [_userInfo addObject:aUser];

            NSLog(@"%@", aUser);
            [self processTheUser:aUser];
        }
    }
}

- (void)processTheUser:(NSDictionary *)user {
    [self.client createUserWithFacebookToken:[user valueForKey:@"accessToken"] username:[user valueForKey:@"username"] onSuccess:^(NSDictionary *result) {
        NSLog(@"%@", result);
    } onFailure:^(NSError *error) {
        NSLog(@"%@", error);
    }];
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-03T06:08:38.433

错误 401 对应于 stackmob 错误代码`SMErrorUnauthorized`。我发现`createUserWithFacebookToken`当用户已经存在于 stackmob 上时，您会在调用中获得此响应，因此在我的错误处理程序中我调用`loginWithFacebookToken`. 如果此调用也失败，那么我尝试使用 facebook 重新授权...

```
[FBSession.activeSession closeAndClearTokenInformation];
[[FBSession class] performSelector:@selector(renewSystemAuthorization)];
[FBSession openActiveSessionWithReadPermissions:nil
                                   allowLoginUI:YES
                              completionHandler:^(FBSession *session, FBSessionState state, NSError *error) { 
```

并在完成处理程序中再次调用 createUserWithFacebookToken 成功。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-02T11:07:13.823

线索在错误中：

`facebook token already registered for another user`

我对 StackMob 并不完全熟悉，但我经常使用 Parse：我假设像 Parse 一样，StackMob 不会让您创建两个具有相同 Facebook 凭据的用户。这是有道理的，因为否则使用您的 Facebook 帐户进行单点登录将无法正常工作！

因此，可能发生的情况是，您已经有一个用户链接到 StackMob 中的该 Facebook 帐户，并且不允许您添加另一个用户。在尝试创建用户之前，您可能需要添加条件测试以检查用户是否已存在于 StackMob 中。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-05T20:35:10.247

问题解决了！我正在处理 access_token 过期的用户。我只是得到有效的，一切都好！

# android - android 上的 httpauth 后没有 css/javascript

> ID：14120905
> 
> 赞同：1
> 
> 时间：2013-01-02T11:02:49.010
> 
> 标签：android, jquery-mobile, android-webview, http-authentication

我为我在 WebView (Android 4.x) 上加载的每个 URL 添加了一个 HashMap：

```
map = new HashMap<String, String>();
        String usernamePassword = "user:password";
        String authorization = "Basic " + Base64.encodeToString(usernamePassword.getBytes("UTF-8"), Base64.NO_WRAP);
        map.put("Authorization", authorization);
        mainWebView.loadUrl("http://my.url/", map); 
```

现在我正在尝试打开一个包含 javscript 和 css (jquery mobile) 的 url。仅供参考，我还使用地图覆盖 URL 加载：

```
@Override
    public boolean shouldOverrideUrlLoading(WebView view, String url) {
        view.loadUrl(url, map);
        return true;
    } 
```

页面内容按预期显示，但仅显示 html。所以没有样式表，而且 javscript 也不起作用。我希望它在请求样式表/javascript 文件时由于缺少身份验证而无法加载资源。

任何想法如何告诉 android webview 转发身份验证？

# java - 在android所有活动上设置标签栏底部

> ID：14120910
> 
> 赞同：2
> 
> 时间：2013-01-02T11:03:22.820
> 
> 标签：java, android, android-activity, tabbar

我已经开发了一个 android 应用程序。

在这里，我必须在所有 android 活动上设置标签栏底部。我该怎么做。请给我解决方案。

我总共有 10 个活动，这意味着选项卡栏显示在所有 10 个活动的底部。我该如何在 android 中执行。请帮助我。

这是我的第一个活动：

```
 setContentView(R.layout.tabbar);
    TabHost tabHost = getTabHost();
    TabHost.TabSpec spec;
    Intent intent;

    TabSpec dbspec = tabHost.newTabSpec("Home");

    dbspec.setIndicator("Home", getResources().getDrawable(R.drawable.home));
    Intent dbIntent = new Intent(this, MainActivity.class);
    dbspec.setContent(dbIntent);
    tabHost.addTab(dbspec);

    TabSpec orderspec = tabHost.newTabSpec("Cart");
    orderspec.setIndicator("Cart", getResources().getDrawable(R.drawable.cart));
    Intent orderIntent = new Intent(this, ViewCartActivity.class);
    orderspec.setContent(orderIntent);
    tabHost.addTab(orderspec);
    TabSpec settingspec = tabHost.newTabSpec("My Account");
    settingspec.setIndicator("My Account", getResources().getDrawable(R.drawable.myaccount));
    Intent settingIntent = new Intent(this, CustomerLogin.class);
    settingspec.setContent(settingIntent);
    tabHost.addTab(settingspec); 
```

标签栏.xml：

```
<?xml version="1.0" encoding="utf-8"?>
 <TabHost
   android:id="@android:id/tabhost"
   android:layout_width="match_parent"
   android:layout_height="match_parent"
    xmlns:android="http://schemas.android.com/apk/res/android">

       <RelativeLayout
    android:layout_width="match_parent"
    android:id="@+id/linearLayout1"
    android:layout_height="match_parent">

           <TabWidget
        android:layout_width="match_parent"
        android:layout_height="wrap_content"
        android:id="@android:id/tabs"
        android:layout_alignParentBottom="true">
          </TabWidget>

    <FrameLayout
        android:layout_width="match_parent"
        android:layout_height="match_parent"
        android:id="@android:id/tabcontent">
    </FrameLayout>
    </RelativeLayout>
     </TabHost> 
```

在第一个选项卡中必须执行 MainActivity(GridView) 活动。它被很好地唤醒。在主要活动中我必须单击任何项​​目意味着它是转到 SubCate(listview) 活动。这里我还必须在底部显示标签栏。我怎么能放。

在 subcate.xml 文件中包含以下代码：

```
<include        
 android:id="@+id/footer"

    android:layout_width="match_parent"
    android:layout_height="wrap_content"
    android:layout_alignParentBottom="true"
    layout="@layout/tabbar" /> 
```

但标签栏不显示。这里有什么问题。请帮助我。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-02T11:07:56.267

请编写以下代码而不是您的代码以在一个 TabActivity 中添加多个活动，它将解决您的问题。

ActivityStack.java

```
public class ActivityStack extends ActivityGroup {

private Stack<String> stack;

@Override
public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    if (stack == null)
        stack = new Stack<String>();
    // start default activity
    push("FirstStackActivity", new Intent(this, Tab_SampleActivity.class));
}

@Override
public void finishFromChild(Activity child) {
    pop();
}

@Override
public void onBackPressed() {
    pop();
}

public void push(String id, Intent intent) {
    Window window = getLocalActivityManager().startActivity(id, intent.addFlags(Intent.FLAG_ACTIVITY_CLEAR_TOP));
    if (window != null) {
        stack.push(id);
        setContentView(window.getDecorView());
    }
}

public void pop() {
    if (stack.size() == 1)
        finish();
    LocalActivityManager manager = getLocalActivityManager();
    manager.destroyActivity(stack.pop(), true);
    if (stack.size() > 0) {
        Intent lastIntent = manager.getActivity(stack.peek()).getIntent();
        Window newWindow = manager.startActivity(stack.peek(), lastIntent);
        setContentView(newWindow.getDecorView());
    }
}
} 
```

TabActivity.java

```
public class TabActivity extends TabActivity {
    /** Called when the activity is first created. */
    @Override
    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.tab_screen);
        TabHost tabHost = getTabHost();
        Intent intent = new Intent().setClass(this, ActivityStack.class);
        TabHost.TabSpec spec = tabHost.newTabSpec("tabId").setIndicator("Temp", getResources().getDrawable(R.drawable.home));
        spec.setContent(intent);

        tabHost.addTab(spec);

        Intent intent1 = new Intent().setClass(this, ActivityStack.class);
        TabHost.TabSpec spec1 = tabHost.newTabSpec("tabId").setIndicator("Temp", getResources().getDrawable(R.drawable.invoice));
        spec1.setContent(intent1);
        tabHost.addTab(spec1);

        tabHost.setCurrentTab(0);
    }
} 
```

第一活动.java

```
public class FirstActivity extends Activity {
    @Override
    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        TextView textView = new TextView(this);
        textView.setText("Tab Sample Activity ");
        textView.setOnClickListener(new View.OnClickListener() {
            @Override
            public void onClick(View v) {
                Intent intent = new Intent();
                intent.setClass(getParent(), SecondActivity.class);
                ActivityStack activityStack = (ActivityStack) getParent();
                activityStack.push("SecondActivity", intent);
            }
        });
        setContentView(textView);
    }
} 
```

SecondActivity.java

```
public class SecondActivity extends Activity {
    @Override
    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        TextView textView = new TextView(this);
        textView.setText("First Stack Activity ");
        textView.setOnClickListener(new View.OnClickListener() {
            @Override
            public void onClick(View v) {
                Intent intent = new Intent();
                intent.setClass(getParent(), ThirdActivity.class);
                ActivityStack activityStack = (ActivityStack) getParent();
                activityStack.push("ThirdActivity", intent);
            }
        });
        setContentView(textView);
    }
} 
```

第三活动.java

```
public class ThirdActivity extends Activity {
    @Override
    protected void onCreate(Bundle savedInstanceState) {
        // TODO Auto-generated method stub
        super.onCreate(savedInstanceState);
        setContentView(R.layout.main);
    }
} 
```

将以下 XML 文件添加到您的 res/layout 文件夹中。

1) tab_screen.xml

```
<?xml version="1.0" encoding="utf-8"?>
<TabHost xmlns:android="http://schemas.android.com/apk/res/android"
    android:id="@android:id/tabhost"
    android:layout_width="fill_parent"
    android:layout_height="fill_parent" >

    <RelativeLayout
        android:layout_width="fill_parent"
        android:layout_height="fill_parent"
        android:orientation="vertical"
        android:padding="3dp" >

        <FrameLayout
            android:id="@android:id/tabcontent"
            android:layout_width="fill_parent"
            android:layout_height="fill_parent"
            android:layout_above="@android:id/tabs"
            android:layout_weight="1" />

        <TabWidget
            android:id="@android:id/tabs"
            android:layout_width="fill_parent"
            android:layout_height="wrap_content"
            android:layout_alignParentBottom="true" />
    </RelativeLayout>

</TabHost> 
```

2) main.xml

```
<?xml version="1.0" encoding="utf-8"?>
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:layout_width="fill_parent"
    android:layout_height="fill_parent"
    android:orientation="vertical" >

    <TextView
        android:layout_width="fill_parent"
        android:layout_height="wrap_content"
        android:text="@string/hello" />

</LinearLayout> 
```

AndroidManifest.xml:-

```
<?xml version="1.0" encoding="utf-8"?>

<manifest xmlns:android="http://schemas.android.com/apk/res/android"
    package="com.android.tabsample"
    android:versionCode="1"
    android:versionName="1.0" >

    <uses-sdk android:minSdkVersion="8" />

    <application
        android:icon="@drawable/ic_launcher"
        android:label="@string/app_name" >
        <activity
            android:name=".FirstActivity"
            android:label="@string/app_name" >
            <intent-filter>
                <action android:name="android.intent.action.MAIN" />

                <category android:name="android.intent.category.DEFAULT" />
            </intent-filter>
        </activity>
        <activity
            android:name=".TabActivity"
            android:label="@string/app_name" >
            <intent-filter>
                <action android:name="android.intent.action.MAIN" />

                <category android:name="android.intent.category.LAUNCHER" />
            </intent-filter>
        </activity>
        <activity
            android:name=".ActivityStack"
            android:label="@string/app_name" >
            <intent-filter>
                <action android:name="android.intent.action.MAIN" />

                <category android:name="android.intent.category.DEFAULT" />
            </intent-filter>
        </activity>
        <activity
            android:name=".SecondActivity"
            android:label="@string/app_name" >
            <intent-filter>
                <action android:name="android.intent.action.MAIN" />

                <category android:name="android.intent.category.DEFAULT" />
            </intent-filter>
        </activity>
        <activity
            android:name=".ThirdActivity"
            android:label="@string/app_name" >
            <intent-filter>
                <action android:name="android.intent.action.MAIN" />

                <category android:name="android.intent.category.DEFAULT" />
            </intent-filter>
        </activity>
    </application>

</manifest> 
```

有关在一个 TabActivity 下添加多个活动的更多信息，请参阅下面的链接，并附上完整的示例。

[Android - 一个 TabActivity 下的多个 Android 活动](http://androidcodeexamples.blogspot.in/2012/08/multiple-android-activities-in.html)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-02T11:31:36.203

您可以使用此类来实现您指定的功能。

```
import java.util.ArrayList;
import android.app.Activity;
import android.app.ActivityGroup;
import android.app.LocalActivityManager;
import android.content.Intent;
import android.os.Bundle;
import android.view.KeyEvent;
import android.view.Window;

public class TabActivityGroup extends ActivityGroup {

    private ArrayList<String> mIdList;

    @Override
    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        if (mIdList == null)
            mIdList = new ArrayList<String>();
    }

    /**
     * This is called when a child activity of this one calls its finish method.
     * This implementation calls {@link LocalActivityManager#destroyActivity} on
     * the child activity and starts the previous activity. If the last child
     * activity just called finish(),this activity (the parent), calls finish to
     * finish the entire group.
     */
    @Override
    public void finishFromChild(Activity child) {
        LocalActivityManager manager = getLocalActivityManager();
        int index = mIdList.size() - 1;

        if (index < 1) {
            finish();
            return;
        }

        manager.destroyActivity(mIdList.get(index), true);
        mIdList.remove(index);
        index--;
        String lastId = mIdList.get(index);
        Intent lastIntent = manager.getActivity(lastId).getIntent();
        Window newWindow = manager.startActivity(lastId, lastIntent);
        setContentView(newWindow.getDecorView());
    }

    /**
     * Starts an Activity as a child Activity to this.
     * 
     * @param Id
     *            Unique identifier of the activity to be started.
     * @param intent
     *            The Intent describing the activity to be started.
     * @throws android.content.ActivityNotFoundException.
     */
    public void startChildActivity(String Id, Intent intent) {
        Window window = getLocalActivityManager().startActivity(Id,
                intent.addFlags(Intent.FLAG_ACTIVITY_CLEAR_TOP));
        if (window != null) {
            mIdList.add(Id);
            setContentView(window.getDecorView());
        }
    }

    /**
     * The primary purpose is to prevent systems before
     * android.os.Build.VERSION_CODES.ECLAIR from calling their default
     * KeyEvent.KEYCODE_BACK during onKeyDown.
     */
    @Override
    public boolean onKeyDown(int keyCode, KeyEvent event) {
        if (keyCode == KeyEvent.KEYCODE_BACK) {
            // preventing default implementation previous to
            // android.os.Build.VERSION_CODES.ECLAIR
            return true;
        }
        return super.onKeyDown(keyCode, event);
    }

    /**
     * Overrides the default implementation for KeyEvent.KEYCODE_BACK so that
     * all systems call onBackPressed().
     */
    @Override
    public boolean onKeyUp(int keyCode, KeyEvent event) {
        if (keyCode == KeyEvent.KEYCODE_BACK) {
            onBackPressed();
            return true;
        }
        return super.onKeyUp(keyCode, event);
    }

    /**
     * If a Child Activity handles KeyEvent.KEYCODE_BACK. Simply override and
     * add this method.
     */
    @Override
    public void onBackPressed() {
        int length = mIdList.size();
        if (length > 1) {
            Activity current = getLocalActivityManager().getActivity(
                    mIdList.get(length - 1));
            current.finish();
        }
    }
} 
```

通过扩展 TabActivitygroup 创建如下中间活动

```
import android.content.Intent;
import android.os.Bundle;
import android.util.Log;

public class InterMediateActivity extends TabActivityGroup{
String TabID;
String TabName;
@Override
public void onCreate(Bundle savedInstanceState) {
    // TODO Auto-generated method stub
    super.onCreate(savedInstanceState);
    TabID=getIntent().getStringExtra("TabID");
    TabName=getIntent().getStringExtra("TabName");
    Log.i("Tab from intermediate",""+TabID+"   "+TabName);
    filterTabs(TabID);
}
private void filterTabs(String TabID)
{
    if(TabID.trim().equals("Home"))
    {       

         startChildActivity("Options", new Intent(this,HomePage.class));

        //TabsUtil.setTabIndicator(specTab,"Wall", null, tabView);
    }
    if(TabID.trim().equals("Menu"))
    {       

         startChildActivity("Options", new Intent(this,MenuPage.class));
        //TabsUtil.setTabIndicator(specTab,"Wall", null, tabView);
   }
    if(TabID.trim().equals("Gallery"))
    {       
        Log.i("GALLERY check", "gallery check");
         startChildActivity("Options", new Intent(this,GalleryPage.class));
    }
    if(TabID.trim().equals("Aboutus"))
    {       

         startChildActivity("Options", new Intent(this,AboutUsPage.class));
    }
    if(TabID.trim().equals("Location"))
    {       

         startChildActivity("Options", new Intent(this,LocationList.class));
    }

    if(TabID.trim().equals("Events"))
    {       
         startChildActivity("Options", new Intent(this,EventsPage.class));
    }
    if(TabID.trim().equals("TipCalculator"))
    {       
         startChildActivity("Options", new Intent(this,TipCalculatorPage.class));
    }
    if(TabID.trim().equals("Special"))
    {       
         startChildActivity("Options", new Intent(this,SpecialPage.class));
    }
    if(TabID.trim().equals("NowRunning"))
    {       
         startChildActivity("Options", new Intent(this,NowRunningPage.class));
    }
    if(TabID.trim().equals("ShowTimes"))
    {       
         startChildActivity("Options", new Intent(this,ShowTimePage.class));
    }
    if(TabID.trim().equals("GpsCoupon"))
    {
         startChildActivity("Options", new Intent(this,GPSCouponPage.class));
    }
    if(TabID.trim().equals("UpcomingMovieNames"))
    {       

        startChildActivity("Options", new Intent(this,UpcomingPage.class));
    }
    if(TabID.trim().equals("PriceListOfServices"))
    {
        startChildActivity("Options", new Intent(this,ServicesPage.class));
    }
    if(TabID.trim().trim().equals("NewsLetter"))
    {
        Log.i("newsletter check", "newsletter check");
        startChildActivity("Options", new Intent(this,NewsLetter.class));
    }
    if(TabID.trim().trim().equals("Website"))
    {
        startChildActivity("Options", new Intent(this,WebSitePage.class));
    }
}
} 
```

而不是直接从 tabactivity 设置选项卡，您可以在中间活动中设置它们。然后从 tabactivity 调用中间活动。

```
Intent intent = new Intent(this, InterMediateActivity.class);
intent.putExtra("TabID", item.elementAt(0));
intent.putExtra("TabName", item.elementAt(1)); 
```

# ruby - 通过 Mongoid 中的几个过滤器进行过滤

> ID：14120915
> 
> 赞同：0
> 
> 时间：2013-01-02T11:03:50.263
> 
> 标签：ruby, mongodb, mongoid

我有一些过滤条件应该应用于`Item`模型

```
 condition1_ids = get_condition1_ids   # array of ids
 condition2_ids = get_condition2_ids   # array of ids 
 condition3_ids = get_condition3_ids   # array of ids 

 items = Item.where(:condition1.in => condition1_ids) if condition1_ids
 items = items ? 
            (items.where(:condition2.in => condition2_ids) if condition2_ids) :
            (Item.where(:condition2.in => condition2_ids) if condition2_ids)

 items = items ? 
            (items.where(:condition3.in => condition3_ids) if condition3_ids) :
            (Item.where(:condition3.in => condition3_ids) if condition3_ids) 
```

这个想法是如果设置了过滤器（条件）`Item`，则按每个过滤器过滤模型。`AND`

代码看起来不太好。有没有更有效的方法来做到这一点？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-05T05:02:21.500

以下工作测试代码包含一些建议。您可以通过从 Item 类对象开始来干燥您的代码，然后链接您的调用并检查该类。我使用数组重构参数并将参数数组迭代为 DRY-up 代码。我更喜欢使用“in”方法。

希望这能给你一些关于更清洁或更干燥代码的有趣想法。

应用程序/模型/item.rb

```
class Item
  include Mongoid::Document
  field :condition1, type: Integer
  field :condition2, type: Integer
  field :condition3, type: Integer
end 
```

测试/单元/item_test.rb

```
require 'test_helper'

class ItemTest < ActiveSupport::TestCase
  def setup
    Item.delete_all
  end

  def get_condition1_ids; [1, 2]; end
  def get_condition2_ids; [2, 3]; end
  def get_condition3_ids; nil; end

  test "criteria chain" do
    Item.create(condition1: 1, condition2: 2, condition3: 3)
    Item.create(condition1: 2, condition2: 3, condition3: 4)
    Item.create(condition1: 3, condition2: 4, condition3: 5)

    condition1_ids = get_condition1_ids   # array of ids
    condition2_ids = get_condition2_ids   # array of ids
    condition3_ids = get_condition3_ids   # array of ids

    items = Item
    [
        [:condition1, condition1_ids],
        [:condition2, condition2_ids],
        [:condition3, condition3_ids]
    ].each do |condition, condition_ids|
        items = items.in(condition => condition_ids) if condition_ids && !condition_ids.empty?
    end

    result = items.class == Mongoid::Criteria ? items.to_a : nil
    p result
  end
end 
```

耙式试验

```
Run options: 

# Running tests:

[#<Item _id: 50e7b11b29daebeefd000001, _type: nil, condition1: 1, condition2: 2, condition3: 3>, #<Item _id: 50e7b11b29daebeefd000002, _type: nil, condition1: 2, condition2: 3, condition3: 4>]
.

Finished tests in 0.010446s, 95.7304 tests/s, 0.0000 assertions/s.

1 tests, 0 assertions, 0 failures, 0 errors, 0 skips 
```

# sql - 使用 SQL 生成数字范围之间的后续数字

> ID：14120920
> 
> 赞同：2
> 
> 时间：2013-01-02T11:04:03.547
> 
> 标签：sql, oracle, model, connect-by

我有一个包含以下内容的表格：

```
ID    low_value     high_value
1     3270200000    3270210000
2     3270210000    3270220000
3     3270220000    3270230000
4     3270230000    3270231000
5     3270231000    3270232000
6     3270232000    3270240000
... 
```

在使用 Oracle 11g 的单个查询中，我想检索以下结果，其中我列出了存在于定义的范围内的每个唯一数字

```
start value = with low_value /
end value = high_value - 1 
```

```
low_value   high_value    unique_value
3270200000  3270210000    3270200000    
3270200000  3270210000    3270200001
3270200000  3270210000    3270200002
3270200000  3270210000    3270200003
...
3270200000  3270210000    3270209999
3270210000  3270220000    3270210001
3270210000  3270220000    3270210002
3270210000  3270220000    3270210002
...
3270210000  3270220000    3270219999
... 
```

我一直在玩 connect by & 模型子句，但到目前为止还没有成功。

TX 为您提供帮助

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-02T11:58:25.360

使用模型子句：

```
SQL> create table foo1
  2  (id number,
  3  low_value number,
  4  high_value number);

Table created.

SQL>
SQL> insert into foo1 values (1,  3270200000, 3270200010);

1 row created.

SQL> insert into foo1 values (2,  3270210000, 3270210005);

1 row created.

SQL> insert into foo1 values (3,  10, 10);

1 row created.

SQL> commit;

Commit complete.

SQL>
SQL>
SQL> with foo as
  2   (select f.id, f.low_value, f.high_value, f.high_value - f.low_value
  3     range from foo1 f)
  4  select key, low_value, high_value, unique_value
  5    from foo
  6   model partition by(id as key)
  7         dimension by(0 as f)
  8         measures(low_value as unique_value, low_value, high_value, range)
  9         rules (unique_value [for f from 0 to range[0]  increment 1]  = low_value[0] + cv(f),
 10               low_value[for f from 0 to range[0]  increment 1] = low_value[0],
 11               high_value[for f from 0 to range[0]  increment 1] = high_value[0]);

       KEY  LOW_VALUE HIGH_VALUE UNIQUE_VALUE
---------- ---------- ---------- ------------
         1 3270200000 3270200010   3270200000
         1 3270200000 3270200010   3270200001
         1 3270200000 3270200010   3270200002
         1 3270200000 3270200010   3270200003
         1 3270200000 3270200010   3270200004
         1 3270200000 3270200010   3270200005
         1 3270200000 3270200010   3270200006
         1 3270200000 3270200010   3270200007
         1 3270200000 3270200010   3270200008
         1 3270200000 3270200010   3270200009
         1 3270200000 3270200010   3270200010
         2 3270210000 3270210005   3270210000
         2 3270210000 3270210005   3270210001
         2 3270210000 3270210005   3270210002
         2 3270210000 3270210005   3270210003
         2 3270210000 3270210005   3270210004
         2 3270210000 3270210005   3270210005
         3         10         10           10

18 rows selected.

SQL> 
```

和 11g 递归因式分解

```
SQL> with foo (id, low_value, high_value, unique_value)
  2        as (select f.id, f.low_value, f.high_value, low_value unique_value
  3              from foo1 f
  4             union all
  5            select id, low_Value, high_value, unique_value + 1
  6              from foo
  7             where unique_value < high_value)
  8  select id, low_value, high_value, unique_value
  9    from foo
 10   order by id, unique_value
 11  /

        ID  LOW_VALUE HIGH_VALUE UNIQUE_VALUE
---------- ---------- ---------- ------------
         1 3270200000 3270200010   3270200000
         1 3270200000 3270200010   3270200001
         1 3270200000 3270200010   3270200002
         1 3270200000 3270200010   3270200003
         1 3270200000 3270200010   3270200004
         1 3270200000 3270200010   3270200005
         1 3270200000 3270200010   3270200006
         1 3270200000 3270200010   3270200007
         1 3270200000 3270200010   3270200008
         1 3270200000 3270200010   3270200009
         1 3270200000 3270200010   3270200010

        ID  LOW_VALUE HIGH_VALUE UNIQUE_VALUE
---------- ---------- ---------- ------------
         2 3270210000 3270210005   3270210000
         2 3270210000 3270210005   3270210001
         2 3270210000 3270210005   3270210002
         2 3270210000 3270210005   3270210003
         2 3270210000 3270210005   3270210004
         2 3270210000 3270210005   3270210005
         3         10         10           10

18 rows selected.

SQL> 
```

# c - 编译器如何遍历 printf 参数并给出输出？

> ID：14120923
> 
> 赞同：-2
> 
> 时间：2013-01-02T11:04:11.370
> 
> 标签：c

> **可能重复：**
> [谁能解释这些未定义的行为（i = i++ + ++i，i = i++ 等……）](https://stackoverflow.com/questions/949433/could-anyone-explain-these-undefined-behaviors-i-i-i-i-i-etc)

```
int main()
{
int a=1;
printf("%d %d %d",a,a++,++a);
return 0;
} 
```

上面的代码给出了输出 3 2 3 为什么？？？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-02T11:07:59.220

它实际上[**在 c 和 c++ 中未定义。**](http://www.stroustrup.com/bs_faq2.html#evaluation-order)

**未定义**：在序列点之间修改标量值两次，这就是您的代码正在做的事情。`f(i++, ++i)`是未定义的行为，因为它在`i`没有中间序列点的情况下修改了两次。

[**一个很好的定义列表**](https://www.securecoding.cert.org/confluence/display/seccode/BB.+Definitions#BBDefinitions-unspecifiedbehavior)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-02T11:06:05.197

这是未定义的行为

`a++, ++a`在同一序列点完成，这是未定义的行为。

从未[定义的行为和序列点](https://stackoverflow.com/questions/4176328/undefined-behavior-and-sequence-points)：

在§5/4 的标准中说

> 在前一个和下一个序列点之间，一个标量对象的存储值最多只能通过表达式的评估修改一次。

这是什么意思？

非正式地，这意味着在两个序列点之间，一个变量不能被多次修改。在表达式语句中，下一个序列点通常在终止分号处，前一个序列点在前一个语句的末尾。表达式也可能包含中间序列点。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-02T11:12:49.443

[前增量和后增量的机制在此处描述： http](http://c-faq.com/expr/evalorder2.html) ://c-faq.com/expr/evalorder2.html 。但是，此表达式未定义，如前面的答案中所述。

# java - Park Unpark 开发自定义阻塞队列

> ID：14120926
> 
> 赞同：2
> 
> 时间：2013-01-02T11:04:24.630
> 
> 标签：java, concurrency, locking, wait, notify

在生产者-消费者的Java并发系统的常见例子中，阻塞队列是使用`wait()`/`notify()`方法开发的。但是据说应该使用`park()`/`unpark()`方法而不是这些。`LockSupport`

我找不到任何教程或示例。

任何人都可以使用park-unpark举这样的例子吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-02T11:22:09.290

如果您要提供与内置类相同或相似的功能，最好的例子就是内置类。

虽然[ArrayBlockingQueue](http://grepcode.com/file/repository.grepcode.com/java/root/jdk/openjdk/7-b147/java/util/concurrent/ArrayBlockingQueue.java)间接使用 park/unpark，但它使用锁和条件来执行它需要的操作。

# php - PDO mysql查询类似数组值

> ID：14120928
> 
> 赞同：2
> 
> 时间：2013-01-02T11:04:44.600
> 
> 标签：php, mysql, arrays, pdo

我对 PDO 相当陌生，但我遇到了一些可能有一个简单答案的东西。

我有一个类别编号数组，我需要在 mysql 数据库中搜索以查找具有匹配类别编号的所有项目。

我知道我已正确连接到数据库，因为我从不同的查询接收类别数组。

```
$category = Array ( [0] => 3259 [1] => 3617 [2] => 3257 [3] => 3258 [4] => 3450 [5] => 3452 [6] => 3478 [7] => 3479 [8] => 3480 [9] => 3448 [10] => 3449 [11] => 3451 [12] => 3456 [13] => 3454 [14] => 3455 [15] => 3459 [16] => 3460 [17] => 3458 [18] => 3453 [19] => 3461 [20] => 3462 [21] => 3457 [22] => 3463 [23] => 3447 ) 
```

现在我需要通过项目数据库来检查匹配的类别。每个项目可以有多个类别，每个类别有4位数字。多个类别用 a = 分开

```
$categoryResults = $conn->prepare('SELECT * FROM items WHERE category like :cats ORDER BY promotions,price ASC');
$categoryResults->execute(array(':cats' => '%'.$category.'%'));
$categoryNumber = $categoryResults->rowCount(); 
```

这就是我似乎出错的地方。使用 mysql 请求，我将使用通过数组的循环手动构建它，以获得长 sql 查询：

```
'Select * From items WHERE category like '%3259%' OR WHERE category LIKE '%3617%'........etc 
```

但我确信这是使用 PDO 的优势之一。只是为了添加它，我需要结果是独一无二的。如果项目 97 属于类别 3259 和类别 3617，我只想得到一次结果。

提前致谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-02T11:09:20.777

我发现您正在寻找带有`LIKE`声明的数字很奇怪。不`category`只是类别的ID或它是如何存储的吗？如果`category`是 CSV 列表，我建议您更改它以使用单独的表进行多对多连接。

如果它已经是一个数值，只需使用`IN`语句

```
$categoryResults = $conn->prepare('SELECT * FROM items WHERE category IN (:cats) ORDER BY promotions,price ASC');
$categoryResults->execute(array(':cats' => implode(',', $category));
$categoryNumber = $categoryResults->rowCount(); 
```

更新或者更好的是，看看这个问题是一样的。

[我可以将数组绑定到 IN() 条件吗？](https://stackoverflow.com/questions/920353/php-pdo-can-i-bind-an-array-to-an-in-condition)

* * *

## 回答 #2

> 赞同：-2
> 
> 时间：2013-01-02T11:11:01.663

这样做

```
<?php
$categoryId = array(1, 21, 63, 171);
$place_holders = implode(',', categoryId);

$sth = $dbh->prepare("SELECT * FROM items WHERE category in (?) ORDER BY 
                      promotions,price ASC");
$sth->bindParam(1, $place_holders, PDO::PARAM_STR, 12);
$sth->execute($params);

?> 
```

# java - 迁移到 HRD 后使用 Cursor 访问数据存储

> ID：14120929
> 
> 赞同：3
> 
> 时间：2013-01-02T11:04:53.227
> 
> 标签：java, google-app-engine

迁移到**HRD**数据存储后，我遇到了一些与使用[Cursor](https://developers.google.com/appengine/docs/java/javadoc/com/google/appengine/api/datastore/Cursor "光标 API")访问某些数据存储相关的错误：

```
java.lang.IllegalArgumentException: query app is 's~appid-hrd' but cursor.position.key app is 'appid' 
```

在哪里：

*   `appid-hrd`是新的应用程序id（*注意：*应用程序id有`s~`后缀）
*   `appid`是旧的应用程序 ID

我想我错过了一些更改，`appengine-web.xml`但我找不到与此问题相关的任何文档。

谢谢，

# c# - NInject 3 约定 NInject 属性没有被注入

> ID：14120931
> 
> 赞同：0
> 
> 时间：2013-01-02T11:05:04.860
> 
> 标签：c#, asp.net-mvc-4, ninject, ninject-extensions

对于具有以下构造的类，构造函数注入效果很好，但不是属性。我还需要在约定中添加什么才能使`Inject`属性起作用

```
public partial class Repo
{
     [Inject] 
     public ILogger Logger{get;set;}
} 
```

**NInjectWebCommon.cs 中的绑定**

```
private static void RegisterServices(IKernel kernel)
        {
            //Dispose all resource after the requests ends
            kernel.Bind(x => x.FromAssembliesMatching("*").SelectAllClasses().BindAllInterface().Configure(scope=>scope.InRequestScope()));

        } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-09T18:06:35.717

我假设存储库类是由实体框架以某种方式实例化的。因此，如果您不使用 ninject 请求存储库，则需要使用 ninject 构建现有实例。这可以通过`Inject`内核上的方法来完成。

```
var kernel = new StandardKernel();
var repo = new Repo();
kernel.Inject(repo); 
```

# delphi - 将两个字节合并为 WideChar

> ID：14120934
> 
> 赞同：3
> 
> 时间：2013-01-02T11:05:31.137
> 
> 标签：delphi, delphi-7, unicode-string, widechar, multibyte-functions

是否可以将两者结合起来`Bytes`，`WideChar`如果可以，那么如何？
例如，二进制中的字母“ē”是`00010011`=`19`和`00000001`= `1`，或`275`一起。

```
var
  WChar: WideChar;
begin
  WChar := WideChar(275); // Result is "ē" 
```

```
var
  B1, B2: Byte;
  WChar: WideChar;
begin
  B1 := 19;
  B2 := 1;
  WChar := CombineBytesToWideChar(B1, B2); // ??? 
```

如何`WideChar`从 Delphi 中的两个字节中获取？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-01-02T11:23:49.070

```
WChar := WideChar(MakeWord(B1, B2)); 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-01-02T11:20:00.370

您应该能够创建一个类型并强制转换：

```
type
  DoubleByte = packed record
    B1: Byte;
    B2: Byte;
  end;

var
  DB: DoubleByte;
  WC: WideChar;
begin
  DB.B1 := 19;
  DB.B2 := 1;

  WC = WideChar(DB);
end; 
```

如果演员表失败，您可以`Move()`改用它并简单地复制内存。

# javascript - 在 Rails 3 控制器中处理 jsonp

> ID：14120937
> 
> 赞同：7
> 
> 时间：2013-01-02T11:05:40.303
> 
> 标签：javascript, jquery, ruby-on-rails-3, cross-domain, jsonpath

我希望我的控制器操作来处理来自 jquery 的 jsonp 请求`$.getJSON`。在我的控制器操作中，我有以下 response_to 块：

```
respond_to do |format|
  format.html { render json: {:items_by_tag => @tagged_item_list}}
  if params[:callback]
        format.js { render :json => {:items_by_tag => @tagged_item_list}.to_json, :callback => params[:callback] }
  else
        format.json { render json: {:items_by_tag => @tagged_item_list}}
  end
end 
```

但是`SyntaxError:invalid label`当我从`$.getJSON`. 我的网址是形式`http://myservice.com?param1=a&param2=b&callback=?`。
我的代码有什么问题导致 jsonp 失败？

* * *

## 回答 #1

> 赞同：19
> 
> 时间：2013-01-02T11:15:23.967

```
respond_to do |format|
  format.html { render json: {:items_by_tag => @tagged_item_list}}
   if params[:callback]
     format.js { render :json => {:items_by_tag => @tagged_item_list.to_json}, :callback => params[:callback] }
   else
    format.json { render json: {:items_by_tag => @tagged_item_list}}
   end
 end 
```

# c# - 什么开源 C# 库可以读/写微二维码？

> ID：14120940
> 
> 赞同：8
> 
> 时间：2013-01-02T11:06:10.373
> 
> 标签：c#, .net, libraries, qr-code

我正在寻找一个 C# 库来生成和读取微型 QR 码（下面的示例）。如果图书馆可以识别图像中的微型 QR 码以及其中的其他内容（即隔离并读取 QR 码），那就太好了。

![微二维码示例](../Images/24df078eb87eda344c128c6720ff36f1.png)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-02T11:10:27.507

[有一个名为QRCode](http://www.codeproject.com/Articles/20574/Open-Source-QRCode-Library)的开源项目。

> QRCode 库是一个 .NET 组件，可用于对 QRCode 进行编码和解码。

![在此处输入图像描述](../Images/1c450c91ae76a99b7deee1af324bdf2f.png)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-17T13:33:45.070

对我来说效果不佳。试试谷歌代码 .net 端口[http://zxingnet.codeplex.com/](http://zxingnet.codeplex.com/)

# php - 仅在 facebooktab 中出现 Facebook 191 redirect_uri 错误

> ID：14120948
> 
> 赞同：1
> 
> 时间：2013-01-02T11:06:20.783
> 
> 标签：php, facebook, api, tabs

我已经在这个网站上搜索了 3 天，但我仍然无法解决我的问题。

我的问题是我在 FaceBook 上收到 populair 191 错误。

我知道有很多关于它的帖子，但我仍然无法修复它，这就是我自己发布帖子的原因。

我的情况：

当我直接从服务器调用我的页面时，共享选项有效，但是当我从 FaceBook 上的选项卡调用完全相同的页面时，它不起作用并且我收到 191 错误。

这是我的代码：

```
 <script src='https://connect.facebook.net/en_US/all.js'></script>

<script>

      FB.init({appId: "182845311856304", status: true, cookie: true});

      function postToFeed() {

        // calling the API ...
        var obj = {
          method: 'feed',
          redirect_uri: 'http://www.permobil.socialdutch.nl/socialdutch/resporter/app/likefb.php',
          link: 'https://www.facebook.com/amateurvoetbal/app_182845311856304',
          name: 'Resporter',
          picture: '',
          caption: '',
          description: ''

        };

        FB.ui(obj);
      }

</script> 
```

我的开发人员详细信息是：

（不能发图片，因为我刚注册。）

[http://imageshack.us/photo/my-images/443/naamloosh.jpg/](http://imageshack.us/photo/my-images/443/naamloosh.jpg/)

将不胜感激一些帮助！

# asp.net-mvc-4 - MVC 4 区域寄存器排序

> ID：14120949
> 
> 赞同：1
> 
> 时间：2013-01-02T11:06:22.943
> 
> 标签：asp.net-mvc-4, routes, area

在 MVC 路由中我有一个问题。

在基本路由中，您可以通过按您希望的顺序编写路由来简单地对路由进行排序。如下所示：

```
 routes.MapRoute(
            "Default",
            "{controller}/{action}/{id}",
            new { controller = "Home", action = "Index", id = UrlParameter.Optional },
            new [] {"SampleApp.UI.Web.Controllers"}
        );

        routes.MapRoute(
            "CompanyRoute",
            "{Company_url}/{action}/{id}",
            new { controller = "Home", action = "Index", id = UrlParameter.Optional },
            new[] { "SampleApp.UI.Web.Controllers" }
        ); 
```

地区呢？

在特殊情况下，我需要先注册我的一个区域，然后再注册另一个区域。如何对区域路线进行排序？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-26T08:32:54.203

根据我在反汇编程序的帮助下得出的结论：

```
internal static void RegisterAllAreas(RouteCollection routes, IBuildManager buildManager, object state) {
    List<Type> areaRegistrationTypes = TypeCacheUtil.GetFilteredTypesFromAssemblies(_typeCacheName, IsAreaRegistrationType, buildManager);
    foreach (Type areaRegistrationType in areaRegistrationTypes) { 
        AreaRegistration registration = (AreaRegistration)Activator.CreateInstance(areaRegistrationType);
        registration.CreateContextAndRegister(routes, state); 
    } 
} 
```

这是一个抽象类的方法`AreaRegistration`，所有自定义区域注册类都被调用。如您所见，没有排序。更深层次的`TypeCacheUtil.GetFilteredTypesFromAssemblies`方法也没有排序。

我看不到任何使用`AreaRegistration`类进行可订购区域注册的方法。该类没有任何可用于此目的的扩展点。

# mongodb - Erlang MongoDB Bson 未定义函数 Mongo

> ID：14120952
> 
> 赞同：1
> 
> 时间：2013-01-02T11:06:44.853
> 
> 标签：mongodb, erlang, undefined, bson

我的 mongodb 驱动程序有问题。

当我安装 mongodb-master 并尝试使用官方 README 文件中的教程时，`> {ok, Conn} = mongo:connect(Host).`shell 给了我以下错误：“undefined function mongo:connect/1”。

在 README 文件中特别指出 mongodb 驱动程序依赖于另一个 erlang lib “bson”。问题的本质在这里。很多次我尝试过 mongo:connect，但响应都是一样的。然后我阅读并安装了这个：[https ://github.com/TonyGen/mongodb-erlang/](https://github.com/TonyGen/mongodb-erlang/)

现在它起作用了。

希望对遇到同样问题的小伙伴有所帮助。

# ruby - 并行访问 Google AdWords 数据

> ID：14120953
> 
> 赞同：1
> 
> 时间：2013-01-02T11:06:49.690
> 
> 标签：ruby, parallel-processing, google-ads-api

**给定**

我正在开发两个使用相同 AdWords API 访问凭据的不同应用程序。Bot 应用程序仅用于从 API 收集/分析数据。

应用程序#1 和#2 大约需要 1 小时来完成从 API 获取/分析数据的过程。

我正在使用：

1.  我自己的 AdWords 帐户，
2.  *ClientLogin*认证方式，
3.  红宝石语言。

**问题**

有时两个时间范围（对于应用程序 #1 和 #2）可能会重叠，我开始收到大量这些错误：

```
AdwordsApi::Errors::ReportXmlError: HTTP code: 400, error type: 'AuthorizationError.USER_PERMISSION_DENIED' 
```

接下来的一系列事件导致了一个问题：

1.  应用 #1 向 Google 请求身份验证令牌，并在收到后将其缓存，
2.  App #1 使用令牌开始数据摄取过程，
3.  应用 #2 向 Google 请求身份验证令牌，并在收到后将其缓存，
4.  App #2 使用令牌开始数据摄取过程，
5.  应用 #1 向 AdWords API 请求另一部分数据，但由于第 3 项，应用 1 的身份验证令牌无效，并且由于上述错误，应用开始阻塞。

所以问题是：**有没有办法进行这样的设置，以使两个应用程序同时访问 AdWords API 而没有令牌干扰/失效**？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-04T14:48:29.960

我们有许多应用程序遵循您所描述的相同模式，但我们没有遇到令牌失效的情况。

```
AdwordsApi::Api.new(credentials).authorize 
```

我们缓存那里返回的令牌，然后将其重新用于后续请求，但我们使用的凭据由许多应用程序共享，令牌仅由一个应用程序使用。我们将其缓存 12 小时，然后将其过期，从而发出新的。

# html - 开发 WebInterface（使用 Tomcat）的建议？

> ID：14120956
> 
> 赞同：0
> 
> 时间：2013-01-02T11:07:06.367
> 
> 标签：html, tomcat, arm

我正在使用运行 Debian Linux ( *Linux ts7500 2.6.24.4* ) 的 TS-7500 (ARM 9) 板。它连接到几个传感器并运行驱动程序代码以与这些传感器通信。

每次 C 程序启动时，它都会从*配置文件中读取几个**配置参数*并使用这些值启动传感器。

 *所以手头的任务是：提供一个 Web 界面来向用户显示/编辑这些*配置参数*。Web 界面的任务可以概括为四个步骤：

1.  从*配置文件*中读取*配置参数*并显示当前配置
**   允许用户更改配置*   捕获更改并将更改保存到相同*的配置文件**

 *这些*配置参数*可以显示为下拉菜单项或单选按钮。我有一个 linux 后台脚本，它在修改*配置文件*时重新启动 C prg 。

我知道 TS-7500 运行 Tomcat。现在请提出一个处理这个问题的好方法。我听说过使用 Servlet 和 JSP（实际上对它们不太熟悉）。其中哪一个适合动态生成 HTML 页面？（正如我每次需要通过在显示页面时选择当前配置来生成新的 HTML 页面时看到的那样）。

抱歉说得太详细了！

编辑：哔！无回复 ？来吧guyz，问题还不清楚吗？或者没有人遇到过类似的问题（设计问题）？？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-16T09:34:51.143

解决方案是使用 PHP 和 Apache Web 服务器！PHP 脚本可用于

1.  读取配置文件并捕获参数
2.  生成 HTML 表单（通过从已读取的参数中预先选择下拉菜单和单选按钮）
3.  并捕获新的编辑并将它们保存到配置文件中。

PHP 脚本必须放在嵌入式板的 /var/www/ 目录下。然后从任何系统，只需使用简单的 Web 浏览器键入板的 IP 地址和脚本名称即可访问它。**

# javascript - 带有百分比jquery mobile的进度条

> ID：14120960
> 
> 赞同：4
> 
> 时间：2013-01-02T11:07:17.607
> 
> 标签：javascript, jquery, jquery-mobile, progress-bar

我正在尝试使用 jquery mobile 开发移动应用程序，因为我正在使用 Web 服务进行工作。我希望它显示一个带有完成百分比的进度条。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-02-10T22:51:09.190

*完全披露：我写了这个开源插件*

你可以试试[jQuery-Mobile-Progress-Bar-with-Percentage](https://github.com/tolis-e/jQuery-Mobile-Progress-Bar-with-Percentage)插件。

jQuery-Mobile-Progress-Bar-with-Percentage (Tolito Progress Bar) 是 jQuery Mobile 的插件，它创建、管理、启动、停止、恢复和显式设置进度条的值。另外构造函数提供了在jQuery Mobile标准主题的基础上设置进度条的外层主题和内层填充主题的选项，显示百分比完成计数器，设置进度条是正常大小还是迷你大小，定义间隔指定填充频率，配置外条的最大值，设置填充内条的初始值。JavaScript 原型链接方法已用于启用链接单独的方法调用，其中每个调用都在同一个实例上进行。

**已编辑：** 新版本**1.0.3**包含**停止和/或恢复**进度条并**显式设置进度条值的**功能。这适用于需要执行一些 AJAX 请求并且在每个成功响应中必须显式设置进度条值以表示实际进度状态的情况。此外，当进度条完成时会触发一个事件。

JavaScript 原型链接方法已用于启用链接单独的方法调用，其中每个调用都在同一个实例上进行。

以下代码配置、构建和初始化进度条：

```
TolitoProgressBar('progressbar')
    .setOuterTheme('b')
    .setInnerTheme('e')
    .isMini(true)
    .setMax(100)
    .setStartFrom(0)
    .setInterval(10)
    .showCounter(true)
    .logOptions()
    .build()
    .run(); 
```

带有迷你进度条的示例：

![在此处输入图像描述](../Images/3f6cf38d9726b845fd2b07b7242d289c.png)

对话框内带有普通进度条的示例：

![在此处输入图像描述](../Images/0094839c87fc8dc4e87e4d87e628f25e.png)

包含正常进度条的叠加层示例：

![在此处输入图像描述](../Images/7fb22fa284d9b6e2ffd222fb47dfe708.png)

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-01-02T15:35:02.020

试试这个：

**CSS**

```
.progress { position:relative; width:260px; border: 1px solid #ddd; padding: 1px; border-radius: 3px; }
.bar { background-color: #B4F5B4; width:0%; height:20px; max-width:240px; border-radius: 3px; background-image: url(../images/pbar-ani.gif); }
.percent { position:absolute; display:inline-block; top:3px; left:48%; } 
```

**JS**

将持续时间参数更改为您的估计时间。

```
$(".bar").animate({width:'100%'},{duration:5000,step:function(now,fx){
    var pc = parseInt(now)+'%';
    $(".percent").html(pc);}
}); 
```

# c# - SQL Connection.Close 方法上的应用程序崩溃

> ID：14120964
> 
> 赞同：1
> 
> 时间：2013-01-02T11:07:26.430
> 
> 标签：c#, crash, sqlconnection, sqlconnection.close

我有一个执行大量数据处理的 Windows 服务。在某些时候，我的服务在关闭`SQLConnection`. 当我评论关闭连接方法调用时，服务始终如一地工作而不会崩溃。

可能是什么问题呢 ？下面是一个代码片段

```
private void DeleteTempTable()
    {
        _logger.Info("DeleteTempTable");

        try
        {

            foreach (KeyValuePair<string, string> item in _stables)
            {                 
                string dropSql = string.Empty;
                dropSql = string.Format("DROP TABLE [{0}];", item.Value);                 

                    SqlConnection oConnDropTables = new SqlConnection(connectionString);
                    oConnDropTables.Open();

                    if (!string.IsNullOrEmpty(dropSql))
                    {
                        using (SqlCommand cmd = new SqlCommand(dropSql, oConnDropTables))
                        {                              
                            cmd.ExecuteNonQuery();                             
                        }
                    }

              if (oConnDropTables != null && oConnDropTables.State == ConnectionState.Open)
                oConnDropTables.Close();                    
                oConnDropTables = null;

            }

        }
        catch (Exception ex)
        {
            _logger.Error("Error " + ex.Message);
            throw ex;
        }

    } 
```

当我评论关闭连接时，服务正在运行而不会崩溃。它也没有被捕获块捕获。也没有`Null`连接，连接状态仅打开..

我尝试过的：1) 将“使用”构造用于连接 - 没有帮助 2) 捕获 SQLException 以检查我是否得到任何东西 - 没有帮助

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-02T11:53:13.117

删除它`Close()`不应该让任何问题消失，坦率地说，我不相信它有。由于您还不了解该问题，因此假设随机代码更改已解决该问题还为时过早。具体来说：

*   使用`Close()`，它每次都将连接返回到池中；当您调用时`Open()`，它将从池中返回相同的连接（已清理，除了一些小事）
*   如果没有`Close()`，之前的连接将被垃圾回收，这可能导致连接池饱和，或者数据库服务器的连接计数饱和；基本上 - 坏事

我*怀疑*正在发生的事情是您随机出现了一些随机错误，而您现在没有看到。例如，网络连接或 a 的不可预测的顺序`Dictionary<,>`（这意味着您不知道表被`DROP`ped的顺序，如果它们之间存在外键，这***非常重要）。***

当前代码的唯一主要问题是它没有使用`using`. 但是，有一些多余的行。这会更好：

```
foreach (var item in _stables)
{                 
    var dropSql = string.Format("DROP TABLE [{0}];", item.Value);
    using(var oConnDropTables = new SqlConnection(connectionString))
    using (var cmd = new SqlCommand(dropSql, oConnDropTables))
    {
        oConnDropTables.Open();
        cmd.ExecuteNonQuery();
    }
} 
```

或（最好）：

```
using(var oConnDropTables = new SqlConnection(connectionString))
{
    oConnDropTables.Open();
    foreach (var item in _stables)
    {                 
        var dropSql = string.Format("DROP TABLE [{0}];", item.Value);
        using (var cmd = new SqlCommand(dropSql, oConnDropTables))
        {
            cmd.ExecuteNonQuery();
        }
    }
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-02T11:35:31.850

问题是每次循环运行时都会创建一个新的连接对象。当您关闭 SQL 连接时，它实际上并没有关闭，而是返回到应用程序池以供重新使用。一次可以在 SQL 中打开的连接数量有限。

尝试将 SQLConnection 对象移出循环并在循环中执行命令并在循环完成后关闭连接。

```
private void DeleteTempTable()
{
    _logger.Info("DeleteTempTable");

    try
    {
        using(SqlConnection oConnDropTables = new SqlConnection(connectionString))
        {
            oConnDropTables.Open();

            foreach (KeyValuePair<string, string> item in _stables)
            {                 
                string dropSql = string.Empty;
                dropSql = string.Format("DROP TABLE [{0}];", item.Value);                 

                if (!string.IsNullOrEmpty(dropSql))
                {
                    using (SqlCommand cmd = new SqlCommand(dropSql, oConnDropTables))
                    {                              
                        cmd.ExecuteNonQuery();                             
                    }
                }
            }
        }

    }
    catch (Exception ex)
    {
        _logger.Error("Error " + ex.Message);
        throw ex;
    }

} 
```

# asp.net - 找到具有相同 ID '_AccordionExtender' 的多个控件

> ID：14120965
> 
> 赞同：1
> 
> 时间：2013-01-02T11:07:28.693
> 
> 标签：asp.net, asp.net-ajax, ajaxcontroltoolkit, accordion

我有这个令人难以置信的问题，使用 ASP Accordion Control。我正在尝试在同一个 WebForm ASP 页面上动态创建多个手风琴。这是一个示例代码：

```
for(int i = 1; i <= 12; ++i)
{
    Accordion accordion = new Accordion();
    accordion.ID = customerName + "_Accordion";
    accordion.Panes.Add(accordionPane); // accordionPane: Other dynamically created AccordionPane Control

    this.Panel.Controls.Add(accordion); // Panel: An asp Panel Control in the page
} 
```

当我在浏览器上加载页面时，出现此错误：

“找到了具有相同 ID '_AccordionExtender' 的多个控件。”

我怀疑手风琴控件会在页面上自动添加 AccordionExtender，但我非常需要在后面的代码上动态创建这些手风琴。如果我在 aspx 页面中以声明方式添加手风琴，为什么不会出现此错误？这个问题有解决方案吗？谢谢大家！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-02T11:10:41.093

尝试这个

```
 for(int i = 1; i <= 12; ++i)
{
    Accordion accordion = new Accordion();
    accordion.ID = customerName + "_Accordion" + i.toString();
    accordion.Panes.Add(accordionPane); // accordionPane: Other dynamically created AccordionPane Control

    this.Panel.Controls.Add(accordion); // Panel: An asp Panel Control in the page
} 
```

# android - 用于多个半繁重操作的 Android Thread

> ID：14120966
> 
> 赞同：1
> 
> 时间：2013-01-02T11:07:31.330
> 
> 标签：android, multithreading, asynchronous, operations

我正在开发一个有 ListView 的应用程序，在某些情况下我想每秒更新一次。我这样做的原因是我想告诉用户在确定事件发生之前还剩多少秒。我已经设置了一个每秒`CountDownTimer`调用一次的方法。`adapter.notifyDataSetChanged();`这导致`getView()`my`ListAdapter`被调用。我有这段代码：

```
 Calendar calendar1 = Calendar.getInstance();
            Calendar calendar2 = Calendar.getInstance();

            calendar1.set(Calendar.YEAR, calendar1.get(Calendar.YEAR));
            calendar1.set(Calendar.MONTH, calendar1.get(Calendar.MONTH) + 1);
            calendar1.set(Calendar.DAY_OF_MONTH, calendar1.get(Calendar.DAY_OF_MONTH));
            calendar1.set(Calendar.HOUR, calendar1.get(Calendar.HOUR));
            calendar1.set(Calendar.MINUTE, calendar1.get(Calendar.MINUTE));
            calendar1.set(Calendar.SECOND, calendar1.get(Calendar.SECOND));

            int positionComp = pos + 1;
            int positionFix = (length - positionComp) + 1;

            String year = Resource.getSavedString(Integer.toString(positionFix) + Resource.KEY_YEAR, "0");
            String month = Resource.getSavedString(Integer.toString(positionFix) + Resource.KEY_MONTH, "0");
            String day = Resource.getSavedString(Integer.toString(positionFix) + Resource.KEY_DAY, "0");

            int yearI = Integer.parseInt(year);
            int monthI = Integer.parseInt(month);
            int dayI = Integer.parseInt(day);

            calendar2.set(Calendar.YEAR, yearI);
            calendar2.set(Calendar.MONTH, monthI);
            calendar2.set(Calendar.DAY_OF_MONTH, dayI);
            calendar2.set(Calendar.HOUR, 0);
            calendar2.set(Calendar.MINUTE, 0);
            calendar2.set(Calendar.SECOND, 0);

            long milliseconds1 = calendar1.getTimeInMillis();
            long milliseconds2 = calendar2.getTimeInMillis();

            long diff = milliseconds2 - milliseconds1;
            long diffSeconds = diff / 1000;
            long diffDays = diffSeconds / (24 * 60 * 60);
            diffDays++; 
```

这段代码每秒可以调用 15 次（在非常极端的情况下，但它仍然是一种可能性），这导致我`UIThread`在接受输入时遇到了一些麻烦。

显而易见的答案是将代码放入线程中，但我首先有一些问题： 1\. 应该`adapter.notifyDataSetChanged();`放入线程中还是应该将带有日历和 Long 的长代码放入线程中？我不确定是否`adapter.notifyDataSetChanged()`会成功。2\. 由于我使用的代码是相当轻量级的，而且只有在经常调用它时才会出现问题，所以创建一个线程只是因为初始化时间而减慢它的速度？3\. 我应该使用什么样的线程？我已经阅读过它们，但它们似乎都适用于冗长的操作。

我非常感谢您阅读这个问题，希望您能帮助我。如果您想了解更多信息或想查看更多代码，请发表评论。

# sql-server - 如果在顶部附加 Go，则 SQL 查询语法错误

> ID：14120970
> 
> 赞同：1
> 
> 时间：2013-01-02T11:08:06.627
> 
> 标签：sql-server, database

以下查询有什么问题？但是，如果我删除第一个“Go”，它会正常工作。

```
Go
if exists(select 1 from sys.objects where name='SP_xyz' and type='P')
drop procedure SP_xyz 
Go 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-03T06:19:34.820

无需先GO，

因为 GO 是执行批处理的命令。在第一个 GO 执行之前你没有任何语句。

请参考下面的示例和评论。

以下示例创建两个批次。第一批只包含一个 USEAdventureWorks2012 语句来设置数据库上下文。其余语句使用局部变量。因此，必须将所有局部变量声明分组在一个批次中。这是通过在引用变量的最后一条语句之后才使用 GO 命令来完成的。

```
USE AdventureWorks2012;
GO
DECLARE @NmbrPeople int
SELECT @NmbrPeople = COUNT(*)
FROM Person.Person;
PRINT 'The number of people as of ' +
      CAST(GETDATE() AS char(20)) + ' is ' +
      CAST(@NmbrPeople AS char (10));
GO 
```

# sql - SQL Selecting from one table with WHERE clause on the joined tables

> ID：14120971
> 
> 赞同：0
> 
> 时间：2013-01-02T11:08:08.047
> 
> 标签：sql, vb.net

I have three tables. The TestOptionsTable contains a list of tests to be performed on an instrument.

The second table CreateScript, is a table to store scripts to run during testing. These scripts contain a selection of some of the tests stored in TestOptionsTable. The scripts are run and the tests appear on screen one by one.

The results of each test are entered on screen and stored in TestResultsTable. When saved, the column IsTestComplete, is marked with a 1 and has a datatype of BIT.

During a script being run, the user may be interrupted and some individual tests may not yet be carried out. When the tests resume I want to display a list of tests from a script that have yet to be completed. Essentially select data from TestOptions and CreateScript if there is no entry for that Test in the results Table. So far I have this but is not returning anything:

```
select TestType,TestName, Limits 
FROM CreateScriptTable 
inner join TestOptionsTable on CreateScriptTable.TestName = TestOptionsTable.TestName 
inner join TestResultsTable on CreateScriptTable.TestName = TestResultsTable.TestName
WHERE CreateScriptTable.InstrumentType= 'Instrument1' 
AND TestResultsTable.IsTestComplete <> 1
ORDER BY [Index] ASC, TestName 
```

The idea is that data is returned if the IsTestComplete Column has not been set to true in the results table but no data is returned. Has anyone any ideas? Thanks!

**EDIT:** Expected output is something like below. With test Name, category and limits of test

```
Full Test 1     Visual              10  12
test1           Visual              0.1 0.22
Test 34         Visual              121 2222
Flow Test       As Found            1   1.2
Test 2          As Found            1   1.1
Test 3          As Left             85  105
Test 6          As Left             95  103 
```

Any incomplete tests will not be in the Test Results Table. I would like to select from CreateScript any tests that are not in the results table.

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-02T11:32:10.773

You say

> Any tests that are incomplete will not be present at all in the Results Table.

this means that you cannot use a INNER JOIN to relate the two first tables with the results.
Probably you should rewrite your query with a LEFT JOIN like this

```
select TestType,TestName, Limits 
FROM CreateScriptTable 
inner join TestOptionsTable on CreateScriptTable.TestName = TestOptionsTable.TestName 
left join TestResultsTable on CreateScriptTable.TestName = TestResultsTable.TestName
WHERE CreateScriptTable.InstrumentType= 'Instrument1' 
AND TestResultsTable.IsTestComplete IS NULL
ORDER BY [Index] ASC, TestName 
```

# php - CodeIgniter 和 ajax 问题

> ID：14120973
> 
> 赞同：0
> 
> 时间：2013-01-02T11:08:20.900
> 
> 标签：php, ajax, codeigniter

早晨，

在过去的 4 天里，我一直在绞尽脑汁和眼睛，我不明白为什么这不起作用。基本上它是一个简单的密码更改脚本，无需 ajax 即可完美运行。但是当我用 ajax 对其进行分层时，它似乎无法识别它，我不明白为什么。也许你们中的一位伟大的技术人员可以给我指路。

*只是为了确认。似乎没有组织它是一个ajax请求，并且每次按下提交按钮时都会重新加载页面*

所以形式

```
<form action="<?php echo site_url('site/new_password'); ?>" method="post" class="box validate" id="change_password_form">

    <div class="header">
        <h2>Change Password</h2>
    </div>

    <div class="content">

        <?php if (isset($no_match)) {?>
        <div class="alert error closeEverywhere">
            <span class="icon"></span>
            <strong>Error !</strong>&nbsp;&nbsp;Passwords don't match!
        </div>
        <?php } ?>
        <?php if (isset($changed)) {?>
        <div class="alert success closeEverywhere">
            <span class="icon"></span>
            <strong>Success !</strong>&nbsp;&nbsp;Password was successfully changed
        </div>
        <?php } ?>
        <div class="alert error closeEverywhere" id="alertMessage">
            <span class="icon"></span>
            <strong>Error !</strong>&nbsp;&nbsp;Password don't match!
        </div>
        <div class="alert success closeEverywhere" id="successMessage">
            <span class="icon"></span>
            <strong>Success !</strong>&nbsp;&nbsp;Password was successfully changed
        </div>
        <!-- The form -->
        <div class="form-box">

            <div class="row">
                <label for="change_pw">
                    <strong>Password</strong>
                    <small></small>
                </label>
                <div>
                    <input tabindex=1 type="password" class="required noerror" name="change_pw" id="change_pw" />
                    <?php echo form_error('change_pw','<label class="error" for="change_pw" generated="true">','</label>'); ?>
                </div>
            </div>

            <div class="row">
                <label for="change_pw_conf">
                    <strong>Again</strong>
                    <small>Password Confirmation</small>
                </label>
                <div>
                    <input tabindex=2 type="password" class="required noerror" name="change_pw_conf" id="change_pw_conf" />
                    <?php echo form_error('change_pw_conf','<label class="error" for="change_pw_conf" generated="true">','</label>'); ?>
                </div>
            </div>

        </div><!-- End of .form-box -->

    </div><!-- End of .content -->

    <div class="actions">
        <div class="left">
        </div>
        <div class="right">
            <input tabindex=3 type="submit" value="Change Password" name="change_btn" id="change_btn" />
        </div>
    </div><!-- End of .actions -->

</form> 
```

和 AJAX 部分

```
$(document).ready(function () { 
$('#login_form').on('submit',function() {

    $.post(base_url+'site/login',$('#login_form').serialize(),function(data) {
        if(!data || data.status !=1 )
        {
            showError();
            return false;
        }
        setTimeout( "window.location.href='"+base_url+"site/new_password'", 1000 );

    },'json');  
    return false;
});

$('#change_password_form').on('submit',function() {

         $.post(base_url+'site/new_password',$('#change_password_form').serialize(),function(data) {
        if(!data || data.status !=1 )
        {
            showError();
            return false;
        }
        alert('Success');
        showSuccess();
        setTimeout( "window.location.href='"+base_url+"member_section'", 1000 );

    },'json');  
    return false;
});

function showError() {
    $('#alertMessage').slideDown(500);
}

function showSuccess() {
    $('#successMessage').slideDown(500);
}
 }); 
```

最后是控制器方法

```
 function new_password()
  {
      if ($this->input->is_ajax_request())  
      {
          $return_arr['status'] = 0;
          echo json_encode($return_arr); // return value 
          exit();
      }

      $this->load->view('site/new_password_view');  
  } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-02T19:53:47.177

我错过了你在那个javascript中定义base_url的地方吗？如果这不是我认为的整个问题，那么您的代码没有被发送到合法的 URL。base_url 是一个 CodeIgniter PHP 函数。因此，例如以下行

```
$.post(base_url+'site/new_password',$('#change_password_form').serialize(),function(data) { 
```

应该读：

```
$.post("<?=base_url();?>site/new_password",$('#change_password_form').serialize(),function(data) { 
```

# dynamic - 使用 XSLT 中的动态键检索映射的值

> ID：14120975
> 
> 赞同：3
> 
> 时间：2013-01-02T11:08:25.663
> 
> 标签：dynamic, map, key, using

我正在形成一个 xsl，我正在形成一个带有键和值的映射。

```
 <java:map>
        <entry key="10001">2.1</entry>
        <entry key="48201">3.1</entry>
        <entry key="11215">4.1</entry>
        <entry key="28201">5.1</entry>
        <entry key="60601">6.1</entry>
    </java:map>
<xsl:template match="/">
<!--    <output>
         <xsl:value-of select="document('')/*/java:map/entry[@key='10001']"/>
    </output> -->
 <xsl:variable name="zipCodeString" select="./PersonInfoShipTo/@ZipCode"/
      <xsl:value-of select='$zipCodeString' /> // giving value of 10001

       <xsl:value-of select="document('')/*/java:map/entry[@key='$zipCodeString']"/> // not displaying any thing.

    </xsl:template> 
```

正如评论中提到的，我使用的变量将获得 10001 的值，我想用它来检索下一个语句中的值，即动态

没看懂，语法怎么弄。请指教

使用 exclude-result-prefixes="java"

问候苏雷什米德

# android - .apk 文件已安装并在 2.2 android 设备上运行良好，但 .apk 未安装在 android 4.0.4 iball 选项卡中

> ID：14120976
> 
> 赞同：-1
> 
> 时间：2013-01-02T11:08:27.470
> 
> 标签：android

**我的清单**

应用程序在 android 2.2 设备中运行良好，但尝试在 android 中安装时出现错误

4.0.4 设备，我也通过更改应用程序的属性进行了测试。

**构建目标：**

包="com.example.androidactionbar"

安卓：版本代码=“1”

安卓：版本名称="1.1" >

**使用 SDK：**

```
<uses-sdk

    android:minSdkVersion="3"

      android:maxSdkVersion="15" 

    android:targetSdkVersion="15" /> 
```

**支持屏幕分辨率：**

```
 android:anyDensity="true"

    android:largeScreens="true"

    android:normalScreens="true"

    android:smallScreens="true" />

<uses-permission android:name="android.permission.ACCESS_COARSE_LOCATION" />

<uses-permission android:name="android.permission.ACCESS_FINE_LOCATION" />

<uses-permission android:name="android.permission.WRITE_EXTERNAL_STORAGE" >

</uses-permission>

<uses-permission android:name="android.permission.INTERNET" >

</uses-permission>

<uses-permission android:name="android.permission.WRITE_EXTERNAL_STORAGE" />

<uses-feature android:name="android.hardware.touchscreen"  android:required="false" />

<application

    android:icon="@drawable/applauncher"

    android:label="CarKonect"

    android:theme="@style/Theme.D1" >

    <uses-library android:name="com.google.android.maps" />

    <activity

        android:name=".ActionBarAppActivity"

        android:label="@string/title_activity_action_bar_app" >

        <intent-filter>

            <action android:name="android.intent.action.MAIN" />

            <category android:name="android.intent.category.DEFAULT" />

        </intent-filter>

    </activity>

    <activity

        android:name=".HomeActivity"

        android:label="@string/title_activity_action_bar_app" >

        <intent-filter>

            <action android:name="android.intent.action.MAIN" />

            <category android:name="android.intent.category.DEFAULT" />

        </intent-filter>

    </activity>

    <activity

        android:name=".SearchActivity"

        android:label="@string/title_activity_action_bar_app" >

        <intent-filter>

            <action android:name="android.intent.action.MAIN" />

            <category android:name="android.intent.category.DEFAULT" />

        </intent-filter>

    </activity>

    <activity

        android:name=".Writetodealer"

        android:label="@string/title_activity_action_bar_app" >

        <intent-filter>

            <action android:name="android.intent.action.MAIN" />

            <category android:name="android.intent.category.DEFAULT" />

        </intent-filter>

    </activity>

    <activity

        android:name=".FeedBackForm"

        android:label="@string/title_activity_action_bar_app" >

        <intent-filter>

            <action android:name="android.intent.action.MAIN" />

            <category android:name="android.intent.category.DEFAULT" />

        </intent-filter>

    </activity>

    <activity

        android:name=".ScheduleService"

        android:label="@string/title_activity_action_bar_app" >

        <intent-filter>

            <action android:name="android.intent.action.MAIN" />

            <category android:name="android.intent.category.DEFAULT" />

        </intent-filter>

    </activity>

    <activity

        android:name=".R"

        android:label="@string/title_activity_r" >

        <intent-filter>

            <action android:name="android.intent.action.MAIN" />

            <category android:name="android.intent.category.DEFAULT" />

        </intent-filter>

    </activity>

    <activity

        android:name=".CustomerLogin"

        android:label="@string/title_activity_customer_login" >

        <intent-filter>

            <action android:name="android.intent.action.MAIN" />

            <category android:name="android.intent.category.DEFAULT" />

        </intent-filter>

    </activity>

    <activity

        android:name=".CarKonect"

        android:label="@string/app_name" >

        <intent-filter>

            <action android:name="android.intent.action.MAIN" />

            <category android:name="android.intent.category.DEFAULT" />

        </intent-filter>

    </activity>

    <activity

        android:name=".CustomAdapter"

        android:label="@string/title_activity_custom_adapter" >

        <intent-filter>

            <action android:name="android.intent.action.MAIN" />

            <category android:name="android.intent.category.DEFAULT" />

        </intent-filter>

    </activity>

    <activity

        android:name=".JSONParser"

        android:label="@string/title_activity_jsonparser" >

        <intent-filter>

            <action android:name="android.intent.action.MAIN" />

            <category android:name="android.intent.category.DEFAULT" />

        </intent-filter>

    </activity>

    <activity

        android:name=".Comment"

        android:label="@string/title_activity_comment" >

        <intent-filter>

            <action android:name="android.intent.action.MAIN" />

            <category android:name="android.intent.category.DEFAULT" />

        </intent-filter>

    </activity>

    <activity

        android:name=".ExpandAnimation"

        android:label="@string/title_activity_expand_animation" >

        <intent-filter>

            <action android:name="android.intent.action.MAIN" />

            <category android:name="android.intent.category.DEFAULT" />

        </intent-filter>

    </activity>

    <activity

        android:name=".CollapseAnimation"

        android:label="@string/title_activity_collapse_animation" >

        <intent-filter>

            <action android:name="android.intent.action.MAIN" />

            <category android:name="android.intent.category.DEFAULT" />

        </intent-filter>

    </activity>

    <activity

        android:name=".Animation"

        android:label="@string/title_activity_animation" >

        <intent-filter>

            <action android:name="android.intent.action.MAIN" />

            <category android:name="android.intent.category.DEFAULT" />

        </intent-filter>

    </activity>

    <activity

        android:name=".MainActivity"

        android:label="@string/title_activity_animation" >

        <intent-filter>

            <action android:name="android.intent.action.MAIN" />

            <category android:name="android.intent.category.DEFAULT" />

        </intent-filter>

    </activity>

    <activity

        android:name=".ServiceCallAsyncGet"

        android:label="@string/title_activity_test" >

        <intent-filter>

            <action android:name="android.intent.action.MAIN" />

            <category android:name="android.intent.category.DEFAULT" />

        </intent-filter>

    </activity>

    <activity

        android:name=".Common"

        android:label="@string/title_activity_common" >

        <intent-filter>

            <action android:name="android.intent.action.MAIN" />

            <category android:name="android.intent.category.DEFAULT" />

        </intent-filter>

    </activity>

    <activity

        android:name=".ExpandListView"

        android:label="@string/title_activity_expand_list_view" >

        <intent-filter>

            <action android:name="android.intent.action.MAIN" />

            <category android:name="android.intent.category.DEFAULT" />

        </intent-filter>

    </activity>

    <activity

        android:name=".JsonPost"

        android:label="@string/title_activity_json_post" >

        <intent-filter>

            <action android:name="android.intent.action.MAIN" />

            <category android:name="android.intent.category.DEFAULT" />

        </intent-filter>

    </activity>

    <activity

        android:name=".Json"

        android:label="@string/title_activity_json_post" >

        <intent-filter>

            <action android:name="android.intent.action.MAIN" />

            <category android:name="android.intent.category.DEFAULT" />

        </intent-filter>

    </activity>

    <activity

        android:name=".Normal"

        android:label="@string/title_activity_normal" >

        <intent-filter>

            <action android:name="android.intent.action.MAIN" />

            <category android:name="android.intent.category.LAUNCHER" />

        </intent-filter>

    </activity>

    <activity

        android:name=".ServiceCallAsyncCommon"

        android:label="@string/title_activity_service_call_async_common" >

        <intent-filter>

            <action android:name="android.intent.action.MAIN" />

            <category android:name="android.intent.category.DEFAULT" />

        </intent-filter>

    </activity>

    <activity

        android:name=".OneNormal"

        android:label="@string/title_activity_one_normal" >

        <intent-filter>

            <action android:name="android.intent.action.MAIN" />

            <category android:name="android.intent.category.DEFAULT" />

        </intent-filter>

    </activity>

    <activity

        android:name=".Asyncall"

        android:label="@string/title_activity_asyncall" >

        <intent-filter>

            <action android:name="android.intent.action.MAIN" />

            <category android:name="android.intent.category.DEFAULT" />

        </intent-filter>

    </activity>

    <activity

        android:name=".NormalTwo"

        android:label="@string/title_activity_normal_two" >

        <intent-filter>

            <action android:name="android.intent.action.MAIN" />

            <category android:name="android.intent.category.DEFAULT" />

        </intent-filter>

    </activity>

    <activity

        android:name=".OneNormalValue"

        android:label="@string/title_activity_normal_two" >

        <intent-filter>

            <action android:name="android.intent.action.MAIN" />

            <category android:name="android.intent.category.DEFAULT" />

        </intent-filter>

    </activity>

    <activity

        android:name=".AsyncallOne"

        android:label="@string/title_activity_normal_two" >

        <intent-filter>

            <action android:name="android.intent.action.MAIN" />

            <category android:name="android.intent.category.DEFAULT" />

        </intent-filter>

    </activity>

    <activity

        android:name=".AsyncallTwo"

        android:label="@string/title_activity_asyncall_two" >

        <intent-filter>

            <action android:name="android.intent.action.MAIN" />

            <category android:name="android.intent.category.DEFAULT" />

        </intent-filter>

    </activity>

    <activity

        android:name=".ResetPassword"

        android:label="@string/title_activity_reset_password" >

        <intent-filter>

            <action android:name="android.intent.action.MAIN" />

            <category android:name="android.intent.category.DEFAULT" />

        </intent-filter>

    </activity>

    <activity

        android:name=".JsonParserTwo"

        android:label="@string/title_activity_json_parser_two" >

        <intent-filter>

            <action android:name="android.intent.action.MAIN" />

            <category android:name="android.intent.category.DEFAULT" />

        </intent-filter>

    </activity>

    <activity

        android:name=".CustomListViewAdapter1"

        android:label="@string/title_activity_custom_list_view_adapter1" >

        <intent-filter>

            <action android:name="android.intent.action.MAIN" />

            <category android:name="android.intent.category.DEFAULT" />

        </intent-filter>

    </activity>

    <activity

        android:name=".Schedule"

        android:label="@string/title_activity_schedule" >

        <intent-filter>

            <action android:name="android.intent.action.MAIN" />

            <category android:name="android.intent.category.DEFAULT" />

        </intent-filter>

    </activity>

    <activity

        android:name=".JsonParserOne"

        android:label="@string/title_activity_json_parser_one" >

        <intent-filter>

            <action android:name="android.intent.action.MAIN" />

            <category android:name="android.intent.category.DEFAULT" />

        </intent-filter>

    </activity>

    <activity

        android:name=".TestActivity"

        android:label="@string/title_activity_test" >

        <intent-filter>

            <action android:name="android.intent.action.MAIN" />

            <category android:name="android.intent.category.DEFAULT" />

        </intent-filter>

    </activity>

    <activity

        android:name=".SingleClick"

        android:label="@string/title_activity_test" >

        <intent-filter>

            <action android:name="android.intent.action.MAIN" />

            <category android:name="android.intent.category.DEFAULT" />

        </intent-filter>

    </activity>

    <activity

        android:name=".SingleClickComment"

        android:label="@string/title_activity_test" >

        <intent-filter>

            <action android:name="android.intent.action.MAIN" />

            <category android:name="android.intent.category.DEFAULT" />

        </intent-filter>

    </activity>

</application> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-02T13:06:24.213

消除

```
<uses-permission android:name="android.permission.ACCESS_FINE_LOCATION" /> 
```

# java - 为什么 Runnable.run() 方法不返回任何输出

> ID：14120978
> 
> 赞同：0
> 
> 时间：2013-01-02T11:08:35.003
> 
> 标签：java, multithreading

我试图理解为什么`Runnable.run`方法不接受任何输入并且不返回任何输出？

我知道线程的局部变量（引用或原语）必须来自自己的堆栈，但系统可能已被初始化。换句话说，我不认为这在技术上是不可能的（但我可能错了）。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-01-02T11:11:28.533

返回一些东西很有用，并且受 Callable 支持，它可以返回一个对象。

```
Future<MyReturnType> ret = executor.submit(new Callable<MyReturnType>() {
    public MyReturnType call() throws Exception {
         // do something
         return new MyReturnType(value1, value2 ...);
    }
}); 
```

如您所见，Callable 可以返回一个值，因为 ExecutorService 支持将值传递回带有 Future 对象的线程。这只是在 Java 5.0 中添加的，因此在此之前`Runnable`返回一个值不会有用，因为这个返回值没有去哪里。

* * *

Runnable 不需要任何参数，因为它是一个可以包含任意数量字段的对象。例如

```
 static void bgLog(final Level level, final String message, final Throwable t) {
    logExec.submit(new Runnable() {
        // the anonymous nested class implicitly holds a copy of the final arguments above.
        public void run() {
           LOG.log(level, message, t);
        }
    });
 } 
```

正如你所看到的，run() 方法可以使用任意数量的值，这些值是由于 Runnable 是一个对象，而不仅仅是一个方法的持有者这一事实而隐式传递的。

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2013-01-02T11:11:22.247

A`Runnable`本来就是这样，您可能正在寻找的是 a`Callable`相反，它确实通过其`call()`方法返回一个值。您不能将参数传递给 a 是不正确的`Runnable`：它仅取决于您对接口的实现。也一样`Callable`。

Java 也有很多工具可以让`Callable`s 异步运行：请参阅`ExecutorService`. 并阅读[此](http://www.jcip.net)完整图片。

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2013-01-02T11:11:36.560

的契约`Runnable`使它成为构建更高层次抽象的完美原材料。*这是关注点分离*原则的一个很好的例子。

`Runnable`的主要设计目标是代表新执行线程的入口点。它不代表函数甚至计算：只是在另一个线程上运行的代码。考虑到这一点，`void run()`方法签名非常有意义。如果它接受参数，那只会增加您不想传递参数的许多用例的**负担**。

void 返回值的情况更清楚：一旦线程启动，它就没有人可以报告，所以返回值的概念只是一个附加值。

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2013-01-02T11:12:54.490

你会喜欢什么？

实际上，实现类[`Runnable`](http://docs.oracle.com/javase/1.5.0/docs/api/java/lang/Runnable.html)可以使用构造函数进行初始化，这使您可以绝对自由地做任何事情。初始化。至于不返回任何东西，总是有[`Callable`](http://docs.oracle.com/javase/1.5.0/docs/api/java/util/concurrent/Callable.html)允许返回值的接口。

也许您应该将这些视为 void 和非 void 方法的接口等价物:-)

干杯，

# android - android按钮背景中的Outerglow图像问题

> ID：14120979
> 
> 赞同：0
> 
> 时间：2013-01-02T11:08:40.863
> 
> 标签：android, button

我正在创建一个应用程序，在该应用程序中我使用背景作为按钮。背景图像具有外发光，因此当我将该图像设置为按钮背景时，它会显示黑色而不是外发光图像。

如何解决这个问题？请帮我解决这个问题。

在这里我添加两个图像。

1）我遇到外发光问题的图像。2) 按钮背景中使用的实际图像。

![问题图片](../Images/f539e219f9ef62b200bb4e5f1063536e.png)

![实际图像](../Images/e54b9a345b9ce8816e51d6e40e88b878.png)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-10-21T11:36:04.197

这是一个解释不同按钮的链接按下一个很好的清晰解释

[http://eagle.phys.utk.edu/guidry/android/AnimalSounds.html](http://eagle.phys.utk.edu/guidry/android/AnimalSounds.html)

# javascript - 定义开始到结束的位置

> ID：14120982
> 
> 赞同：0
> 
> 时间：2013-01-02T11:08:48.140
> 
> 标签：javascript, jquery

我正在创建一个新的“打地鼠”风格的游戏，孩子们必须根据问题打出正确的数字。到目前为止一切顺利，我有一个计时器，计算正确和错误的答案，当游戏开始时，我有一些称为“字符”的 div，它们在设定的时间随机出现在容器中。

我被赋予了气泡的主题，所以他们希望我让“角色”从底部开始并向上动画。任何想法我将如何实现这一目标？

这是当前将 div 映射到画布中的位置的代码...

```
function moveRandom(id) {

var cPos = $('#container').offset();
var cHeight = $('#container').height();
var cWidth = $('#container').width();

var pad = parseInt($('#container').css('padding-top').replace('px', ''));

var bHeight = $('#' + id).height();
var bWidth = $('#' + id).width();

maxY = cPos.top + cHeight - bHeight - pad;
maxX = cPos.left + cWidth - bWidth - pad;

minY = cPos.top + pad;
minX = cPos.left + pad;

newY = randomFromTo(minY, maxY);
newX = randomFromTo(minX, maxX);

$('#' + id).css({
    top: newY,
    left: newX
}).fadeIn(1000, function() {
    setTimeout(function() {
        $('#' + id).fadeOut(1000);
        window.cont++;
    }, 7000);
}); 
```

这是我最近的小提琴：http: [//jsfiddle.net/pUwKb/15/](http://jsfiddle.net/pUwKb/15/)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-02T11:34:00.537

下面的部分实际上设置了 CSS（以及元素的位置）。

```
$('#' + id).css({
    top: newY,
    left: newX }).fadeIn(1000, function() {
    setTimeout(function() {
        $('#' + id).fadeOut(1000);
        window.cont++;
    }, 7000); }); 
```

您应该添加一个使用移动变量的函数 move 。小例子：

```
function move(movement, id) {

$('#' + id).css({
    top: this.css('top') + movement.y,
    left: this.css('left') + movement.x
}).fadeIn(1000, function() {
    setTimeout(function() {
        $('#' + id).fadeOut(1000);
        window.cont++;
    }, 7000);
});

} 
```

运动的地方应该是一个类似于 {x: 30, y: 0} 的对象，这将导致向右移动 30 像素。希望能帮助到你！

# jquery - 使用 jquery hide() 函数有问题吗？

> ID：14120983
> 
> 赞同：0
> 
> 时间：2013-01-02T11:08:49.937
> 
> 标签：jquery, css, struts2

在下面给出的代码中，我正在显示`prettyphoto`单击后在查看器中打开的图像。

```
 <s:iterator value="allPhotos">
    <a href="#inline-<s:property value="pictureid"/>" rel="prettyPhoto" >
      <img src="<s:property value="photourl"/>" alt="">
    </a>
    <div id="inline-<s:property value="pictureid"/>" id="hiddenimgbox">
      <img src="<s:property value="photourl"/>" alt="">
      <div class="overlay"><s:property value ="title" /></div>
    </div>

  </s:iterator> 
```

我面临的问题是我无法隐藏以下应该仅在查看器中打开的 div 标签。

```
 <div id="inline-<s:property value="pictureid"/>" id="hiddenimgbox">
    <img src="<s:property value="photourl"/>" alt="">
    <div class="overlay"><s:property value ="title" /></div>
  </div> 
```

虽然我在文档的头部有以下脚本用于隐藏`div`

```
 <script>
    $("#hiddenimgbox").hide();
  </script> 
```

请纠正我...

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-02T11:15:36.737

该“元素”在`<s:iterator>`标签内，因此实际上是多个元素。然而，在 HTML 页面中，ID 必须是**唯一的**——只有一个元素应该具有特定的 ID。

当您调用`$('#hiddenimgbox')`它时，它只会检索**其中一个**元素，而不是全部。要么通过向其添加动态部分来使 ID 唯一，要么使用类来代替。

此外，如果您希望元素默认隐藏，请在 HTML 中进行，不要使用 JavaScript。这是不必要的，并且可能会导致用户在加载后立即看到页面调整大小。

我刚刚注意到还有一个问题：您在声明元素时设置**了两个属性：** `id`

```
<div id="inline-<s:property value="pictureid"/>" id="hiddenimgbox"> 
```

第二个可能会被忽略，所以你永远不会有任何`id`等于 的元素`hiddenimgbox`。在这种情况下，我绝对建议您切换`hiddenimgbox`为每个元素的类：

```
<div id="inline-<s:property value="pictureid"/>" class="hiddenimgbox" style="display:none"> 
```

然后，而不是在必要时使用`$('#hiddenimgbox')`use代替。`$('.hiddenimgbox')`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-02T11:10:20.827

您必须等待 DOM 被加载，然后才能访问页面上的元素，请使用：

```
<script>
/* Wait until the DOM is ready */
$(function(){
    $("#hiddenimgbox").hide();
});
</script> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-02T11:24:08.793

您已经创建了两次 id 属性。所以浏览器只会接受第一个。像这样改变它并尝试。

```
<div id="inline-<s:property value="pictureid"/> hiddenimgbox"> 
```

# javascript - 启用 setUseWideViewPort(true) 后内容不会缩放到某个值以下？

> ID：14120986
> 
> 赞同：0
> 
> 时间：2013-01-02T11:08:55.587
> 
> 标签：javascript, android, webview, webkit

我正在使用 android webview 并在这里避免我启用的内容包装 -

```
webview.getSettings().setUseWideViewPort(true); 
```

在设置这个之后，我得到了一些因素来适应设备中的页面并尝试使用 -

```
webview.setInitialScale(18); 
```

但它不会将页面缩放为 18，所以请告诉我如何设置页面的比例以使其正确适合设备。实际上这里`wideViewPort`启用为 true，因此未设置小值，`webview`但如果我禁用`WideViewPort`内容换行，请建议我解决方案？？

# tomcat7 - Win7上的Tomcat7启动/重启

> ID：14120996
> 
> 赞同：2
> 
> 时间：2013-01-02T11:10:06.380
> 
> 标签：tomcat7

我最近在尝试学习 Servlets/JSP 时为 Windows7安装了**Apache Tomcat 7 。**

如果我尝试通过双击桌面上的图标（映射到`C:\Apache Software Foundation\tomcat7\bin\tomcat7.exe`）来启动 Tomcat，它会打开一个命令提示符，其中包含许多消息滚动并消失

如果这是启动那么如何重新启动？

第一次安装时，系统托盘中有一个图标，点击它可以启动/停止服务器。但是第一次使用后那个图标就消失了。我卸载/重新安装了 apache。该图标再次出现并在下次访问时消失。

有没有办法永久恢复图标，或者有更好的方法来做到这一点？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-02T11:33:11.520

tomcat7.exe 是 Tomcat 本身，在 Windows 服务包装器中运行。tomcat7w.exe 是监控/配置应用程序。

您可以使用 tomcat7w.exe 启动/停止 tomcat 服务。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2018-01-16T08:50:50.573

去`C:\Program Files\Apache Software Foundation\Tomcat 7.0\bin`

启动`Tomcat7w.exe`（GUI 应用程序）。

您可以在此处从“常规”选项卡启动或停止服务

# javascript - jquery替换不替换所有空格 -

> ID：14120999
> 
> 赞同：10
> 
> 时间：2013-01-02T11:10:12.117
> 
> 标签：javascript, jquery, replace

为什么我的 jquery 没有用`'-'`. 它仅将第一个空格替换为`'-'`

```
$('.modhForm').submit(function(event) {

        var $this = $(this),
            action = $this.attr('action'),
            query = $this.find('.topsearchbar').val(); // Use val() instead of attr('value').

        if (action.length >= 2 && query.length >= 2 && query.lenght <=24) {

          // Use URI encoding
          var newAction = (action + '/' + query.replace(' ','-'));
          console.log('OK', newAction); // DEBUG

          // Change action attribute
          $this.attr('action', newAction);

        } else {
          console.log('To small to be any good'); // DEBUG

          // Do not submit the form
          event.preventDefault();
        }
    }); 
```

* * *

## 回答 #1

> 赞同：34
> 
> 时间：2013-01-02T11:13:06.900

试试这个：

```
.replace(/\s/g,"-"); 
```

## 演示：[JSFiddle](http://jsfiddle.net/vYnxm/3/)

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2014-04-07T18:49:53.977

试试这个：

```
var str = 'a b c';
var replaced = str.split(' ').join('-'); 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-07-17T23:10:48.913

它是：“如果（action.length >= 2 && query.length >= 2 && **query.length** <=24）{”

不是：“如果（action.length >= 2 && query.length >= 2 && **query.lenght** <=24）{”

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-01-02T11:11:23.057

使用[正则表达式](https://developer.mozilla.org/en-US/docs/JavaScript/Guide/Regular_Expressions)替换所有出现：

```
query.replace(/\ /g, '-') 
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2017-01-16T12:04:22.383

您可以尝试使用自定义功能

```
String.prototype.replaceAll = function (searchText, replacementText) {
    return this.split(searchText).join(replacementText);
};
var text = "This is Sample Text";
text.replaceAll(" ", "-");
//final output(This-is-Sample-Text) 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2013-01-02T11:16:06.540

试试这个

```
query.replace(/ +(?= )/g,'-'); 
```

这仍然有效，以防您的查询是`undefinied`或`NaN`

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2013-01-02T11:20:13.890

替换所有空格（包括制表符、空格...）：

```
query.replace(/\s/g, '_'); 
```

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2013-07-17T23:14:29.100

`String.prototype.replace`仅当第一个参数是字符串时才替换第一个。要替换所有匹配项，您需要传入一个全局正则表达式作为第一个参数。

> # [`replace`](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/String/replace?redirectlocale=en-US&redirectslug=JavaScript%2FReference%2FGlobal_Objects%2FString%2Freplace)
> 
> ...
> 
> 要执行全局搜索和替换，请在正则表达式中包含 g 开关，或者如果第一个参数是字符串，请在 flags 参数中包含 g。

其他人已经展示了许多适用于不同“空间”定义的正则表达式。