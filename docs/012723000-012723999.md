# StackOverflow 问答 12723000-12723999

# java - 如何为 Java 添加依赖项？

> ID：12723000
> 
> 赞同：4
> 
> 时间：2012-10-04T08:13:30.777
> 
> 标签：java, jar

我对 Java 很陌生。我有一个用于进行一些处理的类文件。

该类文件依赖于`jar`. 我对 Java 很陌生`jar` ，我在运行程序时将其传递给我的类路径：

```
javac -classpath jar MyProgram.java 
```

现在我希望将`jar`和捆绑`MyProgram`到单独的 jar 中，并解决依赖关系。

有没有办法在 Java 中做到这一点？请注意，我的`MyProgram`java 只有大约 50 行代码，所以一些简单的解决方案会很好。

提前致谢。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-04T08:17:25.460

您不能将库 JAR 放在另一个 JAR 文件中 - Java 将无法从嵌入式 JAR 文件加载类。

您可以创建一个仅包含应用程序类的 JAR 文件，并将 JAR 库放在它旁边。有关如何准确执行此操作的详细信息，请参阅[在 JAR 文件中打包程序。](http://docs.oracle.com/javase/tutorial/deployment/jar/)

如果您真的希望所有内容都在一个 JAR 文件中，则可以使用[One-JAR](http://one-jar.sourceforge.net/)之类的工具对其进行打包。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-10-04T08:16:42.553

您不应将已编译的代码和依赖项捆绑在单独的 jar 中。您应该只将已编译的类捆绑在 jar 中，并且在运行程序时，将 jar 和依赖项都放在类路径中。

使用 jar 命令构建您的 jar 文件，然后使用以下命令运行您的程序：

```
java -classpath dependecy.jar;yourjar.jar MyProgram 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-04T08:20:19.727

只需您可以使用它

```
java -cp your-jar-file.jar yourclass 
```

有关 Class-Path 的更多信息，请使用此链接[PATH 和 CLASSPATH](http://docs.oracle.com/javase/tutorial/essential/environment/paths.html)。

# java - 在 Java 中安排定期任务，避免在必要时创建新线程（如 CachedThreadPool）

> ID：12723001
> 
> 赞同：7
> 
> 时间：2012-10-04T08:13:32.407
> 
> 标签：java, multithreading, concurrency, scheduled-tasks, threadpool

对于大多数任务，我想以不同的速率定期执行许多任务。不过，有些任务可能会安排为同时执行。此外，一个任务可能需要在另一个任务当前正在执行时开始执行。

我还想通过为其设置一个对象来自定义每个任务，该任务将在执行时对其进行操作。

通常，任务将在 2 到 30 分钟的周期内执行，大约需要 4-5 秒，有时执行时长达 30 秒。

我发现`Executors.newSingleThreadedScheduledExecutor(ThreadFactory)`这几乎正是我想要的，除了如果一个新任务恰好被安排执行而另一个任务已经在执行，它可能会给我带来问题。这是因为 Executor 由单个执行线程备份。

另一种方法是使用`Executors.newScheduledThreadPool(corePoolSize, ThreadFactory)`，但这需要我在池中创建多个线程。我想避免在必要之前创建线程，例如，如果我有两个或多个任务由于它们的执行计划冲突而碰巧需要并行执行。

对于上述情况，`Executors.newCachedThreadPool(ThreadFactory)`似乎可以做我想做的事，但是我无法安排我的任务。我认为缓存和预定执行程序的组合最好，但我无法在 Java 中找到类似的东西。

您认为实现上述内容的最佳方法是什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-04T08:22:20.723

不是[`ScheduledThreadPoolExecutor.ScheduledThreadPoolExecutor(int)`](http://docs.oracle.com/javase/7/docs/api/java/util/concurrent/ScheduledThreadPoolExecutor.html#ScheduledThreadPoolExecutor%28int%29)：

```
ScheduledThreadPoolExecutor executor = new ScheduledThreadPoolExecutor(0); 
```

你需要什么？`0`是`corePoolSize`：

> `corePoolSize`- 保留在池中的线​​程数，即使它们是空闲的，除非`allowCoreThreadTimeOut`已设置

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-04T09:23:14.493

我猜你将无法做到这一点`ScheduledExecutor`，因为它使用[DelayedWorkQueue](http://www.cs.rit.edu/usr/local/pub/swm/jdoc6/java/util/concurrent/ScheduledThreadPoolExecutor.DelayedWorkQueue.html)而 as`newCachedThreadPool`使用`ThreadPoolExecutor` [SynchronousQueue](http://docs.oracle.com/javase/6/docs/api/java/util/concurrent/SynchronousQueue.html)作为工作队列。

因此，您不能将[ScheduledThreadPoolExecutor](http://docs.oracle.com/javase/6/docs/api/java/util/concurrent/ScheduledThreadPoolExecutor.html)的实现更改为那样。

# c - 如何在 gcc 中检查安静的 NaN？

> ID：12723004
> 
> 赞同：0
> 
> 时间：2012-10-04T08:13:34.220
> 
> 标签：c, gcc, floating-point, nan

我知道 if(value==value) 可以解决问题，但是在我的应用程序中，我需要检查 50 多个变量，并且检查每个变量有点乏味并且可能效率低下。理想情况下，我正在寻找的是在子程序结束之前我可以调用一个函数（如果存在这样的函数），它将返回 1 或 0。我有一种感觉，因为在汇编中存在这样一个可以检查全局浮动的函数点状态寄存器。如果不是这种情况，那么有没有比轮询每个浮点变量的 value==value 更好的方法？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-04T08:15:55.643

您可以使用[`isnan`](http://www.gnu.org/software/libc/manual/html_node/Floating-Point-Classes.html)或`fpclassify`。两者都是 C99 的标准配置。

至于你的问题，如果你的变量都在某个共同的地方声明，我会写一个小工具来把这些声明变成一个`isnan`调用字符串。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-10-04T11:50:30.777

一般来说，没有办法问“我的数据中是否有 NaN？”</p>

检查处理器的浮点寄存器不足以回答这个问题，因为浮点对象的值保存在内存中以及计算的各个点的寄存器中，特别是如果你有 50 个。

有一种方法可以询问“是否发生了无效操作异常？” C 标准的第 7.6 条通过定义在 . 各种编译器对它的支持可能很差。本质上，您可能希望使用 feclearexcept 清除 FE_INVALID，执行一些计算，并测试是否已使用 fetestexcept 设置了 FE_INVALID。您还需要设置“#pragma STD FENV_ACESS on”。

这只会测试在您的计算过程中是否发生无效操作异常。它不会测试您的输入数据中是否存在 NaN。它不会测试在没有无效操作异常的情况下生成的 NaN。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-04T12:28:30.533

也许这样的事情可能会有所帮助？

```
void registerAddVariable(double *x) {
  APPEND(x); // append to some global linked list
}
void registerRemoveVariable(double *x) {
  REMOVE(x); // remove from same global linked list
}
void registerDebug() {
  list = head; 
  while(list) {
    if (isnan(*(list->variable))) {
      output(list);
    }
    list = list->next;
  }
}

void myfun() {
  double variable; registerAddVariable(&variable);
  ...
  registerDebug();
  ....
  registerRemoveVariable(&variable);
} 
```

# python - 如何设置内容类型标头以响应 Pyramid Web 框架中的特定文件类型

> ID：12723009
> 
> 赞同：4
> 
> 时间：2012-10-04T08:13:48.320
> 
> 标签：python, pyramid

我正在使用金字塔网络框架来建立一个网站。我在 chrome 控制台中不断收到此警告：

> 资源解释为字体，但使用 MIME 类型 application/octet-stream: "http:static/images/fonts/font.woff" 传输。

如何摆脱此警告消息？

我已经配置了要使用的静态文件`add_static_view`

我可以想办法做到这一点，方法是为响应添加一个订阅者函数，检查路径是否结束`.woff`并将响应标头设置为`application/x-font-woff`. 但它看起来不像一个干净的解决方案。有没有办法告诉金字塔通过一些设置来做到这一点。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-10-04T12:29:03.973

Pyramid 使用标准[`mimetypes`模块](http://docs.python.org/library/mimetypes.html)根据扩展名猜测 mimetype。它调用：

```
mimetypes.guess_type(path, strict=False) 
```

如果在该平台上，该模块会在 Windows 注册表中查找，并在以下位置查找 mimetype 列表：

```
knownfiles = [
    "/etc/mime.types",
    "/etc/httpd/mime.types",                    # Mac OS X
    "/etc/httpd/conf/mime.types",               # Apache
    "/etc/apache/mime.types",                   # Apache 1
    "/etc/apache2/mime.types",                  # Apache 2
    "/usr/local/etc/httpd/conf/mime.types",
    "/usr/local/lib/netscape/mime.types",
    "/usr/local/etc/httpd/conf/mime.types",     # Apache 1.2
    "/usr/local/etc/mime.types",                # Apache 1.3
    ] 
```

您可以扩展其中一个文件，也可以创建自己的文件并使用该`.init()`函数将其添加到模块中。

文件格式很简单，只需列出 mimetype，然后是一些空格，然后是空格分隔的扩展名列表：

```
application/x-font-woff     woff 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2014-11-13T19:46:22.683

只需在 Pyramid Web 应用程序初始化的地方添加以下代码。

`import mimetypes mimetypes.add_type('application/x-font-woff', '.woff')`

例如，我已将它添加到我的 webapp.py 文件中，该文件在服务器第一次收到请求时被调用。

# erlang - Eunit 测试不会等待接收

> ID：12723010
> 
> 赞同：0
> 
> 时间：2012-10-04T08:13:49.607
> 
> 标签：erlang, eunit

eunit 不会等待接收，eunit 有什么特别的吗？

```
-module (test_account).

-include_lib ("eunit/include/eunit.hrl").

-compile (export_all).

login_test() ->
    {ok, Socket} = gen_tcp:connect("localhost", 5678,
        [binary, {packet, 4}]),

    RoleName = <<"abc">>,
    LenRoleName = byte_size(RoleName),

    Password = <<"def">>,
    LenPassword = byte_size(Password),

    LoginBin = <<11001:16, LenRoleName:16, RoleName/binary,
        LenPassword:16, Password/binary>>,
    gen_tcp:send(Socket, LoginBin),
    print(Socket).

print(Socket) ->
    receive
        {tcp, Socket, Data} ->
            io:format("Data=~p~n", [Data])
    end. 
```

如果我`test_account:login_test().`直接调用，它可以收到响应。

谢谢你。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-04T11:28:31.417

我的猜测是监听端出了点问题，比如缺少 {packet, 4} 参数或其他东西。我手动在所需端口上启动了一个侦听套接字，并且测试确实有效。

EUnit 并不真正应该开箱即用地运行集成测试（尽管有一些库也使它对集成测试有些方便）。你真正应该在这里做的是这样的事情：

```
main_test_() ->
    {setup,
        fun setup/0,
        fun teardown/1,
        [{"login", fun login_test/0}]
    }.

setup() ->
    process_flag(trap_exit, true),
    {ok, Pid} = my_tcp_server:start_link(),
    Pid.

teardown(Pid) ->
    exit(Pid, shutdown). 
```

因此，基本上，在仅使用 EUnit 时，您不应该依赖单独运行的服务器。相反，您应该从您的代码中显式启动它，或者，如果它是外部的，则模拟它（或者如果整个服务器代码很复杂，则只模拟它的某些部分）。

PS 不要忘记 'main_test_' 末尾的下划线，它是 {setup, ...} 和 {foreach, ...} 测试的合同。

# c# - 尝试打印 pdf 文件时出错

> ID：12723013
> 
> 赞同：2
> 
> 时间：2012-10-04T08:13:55.240
> 
> 标签：c#, .net, acrobat

我试图使用控制台应用程序在后台打印 pdf 文档。我使用了这个过程。控制台应用程序将 pdf 文件发送到打印机，但是以最小化模式在后台打开的 adobe reader 抛出以下错误“打开此文档时出错。找不到此文件”。因此，在多次打印时，我无法终止该进程。有没有可能摆脱这个错误？我的要求是使用进程打印 pdf 文件，同时必须以最小化模式打开 pdf 文件，打印完成后需要自动关闭阅读器。我已经尝试了以下代码，但仍然抛出错误..

```
string file = "D:\\hat.pdf"; 
PrinterSettings ps = new PrinterSettings();
string printer = ps.PrinterName;
Process.Start(Registry.LocalMachine.OpenSubKe(@"SOFTWARE\Microsoft\Windows\CurrentVersion"+@"\App Paths\AcroRd32.exe").GetValue("").ToString(),string.Format("/h /t \"{0}\" \"{1}\"", file, printer)); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-04T08:22:22.447

由于您希望在打印文档时在后台打开 Acrobat 阅读器，因此可以使用以下内容：

```
private static void RunExecutable(string executable, string arguments) 
{
   ProcessStartInfo starter = new ProcessStartInfo(executable, arguments);
   starter.CreateNoWindow = true;
   starter.RedirectStandardOutput = true;
   starter.UseShellExecute = false;

   Process process = new Process();
   process.StartInfo = starter;
   process.Start();

  StringBuilder buffer = new StringBuilder();
  using (StreamReader reader = process.StandardOutput) 
  {
    string line = reader.ReadLine();
    while (line != null) 
    {
      buffer.Append(line);
      buffer.Append(Environment.NewLine);
      line = reader.ReadLine();
      Thread.Sleep(100);
    }
  }
  if (process.ExitCode != 0) 
 {
    throw new Exception(string.Format(@"""{0}"" exited with ExitCode {1}. Output: {2}", 
executable, process.ExitCode, buffer.ToString());  
 } 
```

}

您可以通过将上述代码合并到您的项目中并按如下方式使用它来打印您的 PDF：

```
string pathToExecutable = "c:\...\acrord32.exe";
RunExecutable(pathToExecutable, @"/t ""mytest.pdf"" ""My Windows PrinterName"""); 
```

此代码取自[http://aspalliance.com/514_CodeSnip_Printing_PDF_from_NET.all](http://aspalliance.com/514_CodeSnip_Printing_PDF_from_NET.all)

如果您不需要在后台打开 Acrobat Reader，只需像打印任何其他文档一样打印 pdf，您可以查看 PrintDocument 类：

[http://msdn.microsoft.com/en-us/library/system.drawing.printing.printdocument.print.aspx](http://msdn.microsoft.com/en-us/library/system.drawing.printing.printdocument.print.aspx)

# python - uwsgi 指定 python 二进制文件

> ID：12723016
> 
> 赞同：5
> 
> 时间：2012-10-04T08:14:10.190
> 
> 标签：python, ubuntu, uwsgi

在我们的生产服务器上，我们运行的是 Ubuntu 12.04，为了确保我们的应用程序在预定义的一致环境中运行，我们使用 Pythonbrew 编译自定义 Python。我创建了一个将运行我们的 API 服务器的用户，该用户拥有自己的 Python 2.7.2 环境，使用 Pythonbrew 创建，并使用 pip 安装了必要的包。

我还在系统上安装了 uWSGI，它将包装 API 应用程序并通过 mod_wsgi 将其提供给 Apache。问题是我无法让 uWSGI 使用正确的 python 二进制文件。当前配置如下所示：

```
[uwsgi]
socket = 127.0.0.1:3031
processes = 4
chdir = /home/app/
pythonpath = /home/app
gid = 1002
uid = 1002
module = api
callable = APP
enable-threads = true 
```

当我尝试在终端上运行此配置时：

```
uwsgi --ini app.ini 
```

它无法导入某些模块。此模块仅安装在 API 用户正在使用的 Pythonbrew 环境中。问题是 uWSGI 使用 /usr/bin 中的默认 python 二进制文件。

一种解决方案是在 API 用户环境中使用使用 pip 安装的单独 uWSGI，但我真的很想使用系统的 uWSGI，因为它与操作系统更好地集成。

有没有办法指定应该使用哪个 Python 二进制 uWSGI，然后安装一个单独的？如果我必须安装一个单独的 uWSGI 实例，让它在系统启动时启动的最佳方式是什么？

编辑：刚刚意识到它可能没有使用 python 二进制文件，而只是针对它的库，所以我无法使用 wsgi 的默认安装和非默认 python。但是问题仍然存在，将自定义构建的 uWSGI 集成到系统中的最佳方式是什么。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-04T08:23:04.473

uWSGI（以及 mod_wsgi）不使用 python 二进制文件，而是使用 python 共享库，因此您必须将 uWSGI python 插件与 pythonbrew 用户的特定库链接。

有很多技巧可以做到这一点（特别是如果 pythonbrew python 版本与系统版本匹配），我想到的第一个是在其配置文件中指定 pythonbrew 用户的前缀

env = PYTHONHOME=路径

顺便说一句，为您的用户使用 virtualenvs 而不是完整的 python 安装不是更好吗？

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2021-04-21T18:26:52.600

我也遇到过这个问题。似乎 uWSGI 在安装期间绑定了 Python 3 运行时。一旦你有了`pip installed`一个版本，它就会使用缓存的轮子（因此缓存的 Python 版本）。

我发现这将通过强制重建二进制文件来解决它，至少在 Ubuntu 上：

```
$ pip uninstall uwsgi
$ pip install uwsgi --no-cache
$ COMMAND_TO_RESTART_UWSGI 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2020-06-03T07:55:02.867

我在 Ubuntu 18.04 上遇到了这个问题（所以比提出问题时要新一点）并且记得`[uwsgi]`配置文件的部分包含长命令行开关。

似乎`uwsgi`在为 Ubuntu 18.04.4 打包的版本中默认使用该`python`插件，在这种情况下意味着 Python 2.x。

因此，我设法通过将它们设置为使用`python3`插件来配置我的应用程序：

```
[uwsgi]
plugin = python3 
```

这需要`uwsgi-plugin-python3`安装软件包。在 Ubuntu 18.04 的情况下，这默认为 Python 3.6，因此上面的`plugin`行也可能是：

```
plugin = python36 
```

`uwsgi`您可以通过从命令行运行来测试它是否适用于给定的插件，如下所示：

```
uwsgi --plugin python3 -s :0 
```

# javascript - 让Javascript在MouseOver上显示一些文本

> ID：12723018
> 
> 赞同：0
> 
> 时间：2012-10-04T08:14:13.533
> 
> 标签：javascript

我有这行代码

```
<img src="1.png" id="friends" onMouseOver="document.writeln('We are 86');"</h2> 
```

当我将鼠标悬停在它上面时，我不想删除网站上的所有其他内容，而是在它下面显示一些文本。这将如何完成？谢谢

*   杰斯珀

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-04T08:20:04.970

您可以添加一个`title`属性，当您将鼠标悬停在元素上时，大多数浏览器会自动显示该属性，而无需任何额外的 Javascript，或者您可以使用诸如[Tipsy](http://onehackoranother.com/projects/jquery/tipsy/)之类的库。

# c# - 以不同的语言运行我的 C# 应用程序

> ID：12723021
> 
> 赞同：1
> 
> 时间：2012-10-04T08:14:19.387
> 
> 标签：c#, wpf, localization, resources, resx

我有一个应用程序，我试图以英语以外的语言运行和显示，这是默认语言。我已将所有文本分配给使用属性文件，并为每种语言翻译了相关的属性文件。

但是，当我运行应用程序时，它全是英文。我已将我的键盘、语言、区域设置全部设置为外语，它应该会自动选择它并自动使用相关的属性文件，但是这并没有发生。

我知道那里没有太多信息，但是如果您需要更多信息，我会提供。我正在从 Visual Studio 2010 运行该应用程序，所以如果这会影响它，我就在徘徊。

我的文件 ：

```
Strings.resx
Strings.en.resx
Strings.fr.resx 
```

我的用法：

```
Strings.HelloWorld 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-04T08:23:35.567

您必须从操作系统中获取当前的文化并这样使用它：

*   WPF： http: [//msdn.microsoft.com/en-us/library/vstudio/ms788718 (v=vs.100).aspx](http://msdn.microsoft.com/en-us/library/vstudio/ms788718(v=vs.100).aspx)

基本上，您需要做的是在某处设置您当前的应用程序文化：

```
Thread.CurrentThread.CurrentUICulture = System.Globalization.CultureInfo.CurrentCulture; 
```

相关：[如何正确设置 Silverlight CurrentUICulture/CurrentCulture？](https://stackoverflow.com/questions/9162050/how-to-set-currentuiculture-currentculture-correctly)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-04T08:21:12.137

如果它是一个`WPF`应用程序，我推荐[WPFLocalizeExtension](http://wpflocalizeextension.codeplex.com/)。我一直在使用它，效果很好。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-05T23:21:02.317

以为我会在这里添加： [http ://www.west-wind.com/weblog/posts/2009/Jun/14/WPF-Bindings-and-CurrentCulture-Formatting](http://www.west-wind.com/weblog/posts/2009/Jun/14/WPF-Bindings-and-CurrentCulture-Formatting)

基本上，您将这行代码添加到您的 App.xaml：

```
FrameworkElement.LanguageProperty.OverrideMetadata(typeof(FrameworkElement),
    new FrameworkPropertyMetadata(XmlLanguage.GetLanguage(CultureInfo.CurrentCulture.IetfLanguageTag))); 
```

然后它会覆盖应用程序中每个控件的默认语言属性。

谢谢，亚历克斯。

# jquery - 什么时候 jQuery index() 会失败？

> ID：12723024
> 
> 赞同：1
> 
> 时间：2012-10-04T08:14:31.833
> 
> 标签：jquery

这是我的代码：

```
if ($('#fotosingola_6985') instanceof jQuery) {
    console.log($('#fotosingola_6985').attr('id'));
    console.log($('#fotosingola_6985').index(".classObj"));
} 
```

好吧：这段代码的输出是：

```
fotosingola_6985
-1 
```

怎么可能？jQuery 规范说*如果选择器字符串作为参数传递，.index() 返回一个整数，指示原始元素相对于选择器匹配的元素的位置。如果未找到该元素，.index() 将返回 -1。*

但是找到了元素（是的，它是一个 jQuery 元素，我制作了控件）：实际上它返回了它的 id。

周围的HTML：

```
<div id="exp-gallery-dettaglio-slideshow-overflowed">    
    <a href="javascript:void(0);" class="classObj" id="fotosingola_6529">&nbsp;</a>
    <a href="javascript:void(0);" class="classObj" id="fotosingola_6985">&nbsp;</a>
    <a href="javascript:void(0);" class="classObj" id="fotosingola_6990">&nbsp;</a>
    <a href="javascript:void(0);" class="classObj" id="fotosingola_6998">&nbsp;</a>
    <a href="javascript:void(0);" class="classObj" id="fotosingola_6912">&nbsp;</a>
</div> 
```

**真正的奇怪行为：**

如果我做 ：

```
console.log($('.classObj').index('#fotosingola_6985')); 
```

它返回-1。但是，如果我这样做：

```
console.log($('.classObj').index($('#fotosingola_6985'))); 
```

它返回 1，这是正确的。这怎么可能？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-04T08:20:45.327

由于您的元素是兄弟姐妹，您可以编写代码：

```
$('#fotosingola_6985').index(); 
```

* * *

`index`接受一个 jQuery 对象或 DOM 元素：

> 如果在元素集合上调用 .index() 并传入 DOM 元素或 jQuery 对象，则 .index() 返回一个整数，指示传递的元素相对于原​​始集合的位置。

```
var $elem = $('#fotosingola_6985');
$('.classObj').index($elem) 
```

[http://jsfiddle.net/6sDpx/](http://jsfiddle.net/6sDpx/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-04T08:25:32.167

我复制粘贴了您的代码并显示给我`1`，而不是`-1`

问题出在其他地方。

采用`$('#fotosingola_6985').index()`

[证据](http://jsfiddle.net/SnakeEyes/NmcDx/)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-04T08:26:04.383

你提供的代码很好。

见小提琴：http: [//jsfiddle.net/sP7TJ/1/](http://jsfiddle.net/sP7TJ/1/)

您使用的是什么版本的 jQuery？也请尝试使用：

```
if ($('#fotosingola_6990') instanceof jQuery) {
    console.log($('#fotosingola_6990').attr('id'));
    console.log($('#fotosingola_6990').index(".classObj"));
} 
```

告诉我你收到了什么。-1 还是 -2 ？

# php - php 套接字服务器在本地主机上工作，但在实时服务器上不工作

> ID：12723026
> 
> 赞同：0
> 
> 时间：2012-10-04T08:14:32.680
> 
> 标签：php, apache2, websocket

我在使用 wamp 服务器 WAMPServer2.0 的开发 window7 pc 上使用 PHP WebSocket Server 0.2 ( [http://code.google.com/p/php-websocket-server/](http://code.google.com/p/php-websocket-server/) )。

1.  我没有安装/激活任何 Apache 模块。
2.  刚刚为 php 激活了 php_sockets 扩展。

我的套接字服务器在局域网上使用本地主机和局域网 IP 地址工作正常，但是当我在我的实时服务器上使用相同的设置实现相同的代码时，它不起作用。

在实时服务器上

1.  执行“php socket-server.php”后没有错误。
2.  但是当我尝试使用 javascript 连接到套接字服务器时，它没有连接。

我的实时服务器是 CENTOS 5.8、Apache/2.2.20、PHP/5.2.17。

我做错了什么？Apache 需要一些额外的模块吗？

**- 编辑 -**

现在联系支持启用端口 9300 后，但客户端仍然无法连接到服务器。

但是在服务器端我有一些活动，根据脚本客户端一旦连接就会断开连接。

![在此处输入图像描述](../Images/9c78dd554c9c854499655966b9af72dd.png)

**- 编辑 -**

相同的脚本在 vmware 上的[http://www.turnkeylinux.org/lampstack中运行良好。](http://www.turnkeylinux.org/lampstack)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-07T10:36:14.790

看答案很简单

Javascript/Ajax 安全不支持跨域连接

请注意：如果您的服务器位于[http://myserver.com并且您的脚本在](http://myserver.com)[http://myserver.com:9300](http://myserver.com:9300)上运行， 则 javascript 将理解这是一个不同的域。

如果您想这样做，请执行以下操作：

1-使用 apache 创建 http-proxy，您将在其中将“/live”转发到[http://servers.com:9300](http://servers.com:9300) 2-然后将您的 javascript 连接到 /live，apache 代理将完成这项工作。

如果您在创建代理时遇到困难，请搜索“openfire 的 apache 代理通行证”，您会找到一个很好的示例。

请注意，您需要 root 访问权限，或者您可以要求您的主机管理员为您添加此代理转发。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-13T19:57:55.290

尝试使用具有最高详细级别的 curl 或 ncat 从命令行连接到您的 websocket 服务器。如果一切正常，我的意思是，您会收到 Upgrade 标头，而不是问题可能出在防火墙中。

您还可以使用 nmap，它可以帮助您确定在您尝试打开 websocket 连接的范围内是否有任何打开的端口。

同样在生产环境中，您应该将错误报告级别设置为 E_NONE。

顺便说一句，您有哪种实时服务器（VPS/VDS、专用等）？

# image-processing - 如何在直方图中找到第 5 个和第 95 个百分位数

> ID：12723030
> 
> 赞同：1
> 
> 时间：2012-10-04T08:14:53.203
> 
> 标签：image-processing, computer-vision, php-gd, contrast

我正在尝试在 php gd 中实现对比度拉伸功能，我想将图像的 5% 设置为最小值，将 95% 设置为最大值。任何人都知道如何使用 php gd 获取直方图和这些值？

谢谢你。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-04T08:35:36.680

恐怕您需要一个一个地计算像素。

```
$gd = // Create image of same size, copy original image into $gd
// Make grayscale
imageFilter($gd, IMG_FILTER_GRAYSCALE);

$pre = array_fill(0, 256, 0);

for ($y = 0; $y < ImageSY($gd); $y++)
{
    for ($x = 0; $x < ImageSX($gd); $x++)
    {
        $luma = (imageColorAt($x, $y) & 0xFF); // Grayscale, so R=G=B=luma
        $pre[$luma]++;
    }
}

// Then you need to build the cumulative histogram:

$max = $pre[0];
$hist[0] = $pre[0];
for ($i = 1; $i < 256; $i++)
{
    $hist[$i] = $hist[$i-1]+$pre[$i];
    if ($max < $pre[$i])
            $max = $pre[$i];
}
// Now scale to 100%
for ($i = 0; $i < 256; $i++)
{
    $hist[$i] = ($hist[$i]*100.0)/((float)$hist[255]);
    if ($hist[$i] >= 5)
        if ((0 == $i) || ($hist[$i-1] < 5))
            print "Fifth percentile ends at index $i (not included)\n";
    if ($hist[$i] >= 95)
        if ($hist[$i-1] < 95)
            print "Ninety-fifth percentile begins at index $i (included)\n";
}

// Create graphics, just to check.
// Frequency is red, cumulative histogram is green

$ck = ImageCreateTrueColor(255, 100);
$w  = ImageColorAllocate($ck, 255, 255, 255);
$r  = ImageColorAllocate($ck, 255,   0,   0);
$g  = ImageColorAllocate($ck,   0, 255,   0);
ImageFilledRectangle($ck, 0, 0, 255, 100, $w);
for ($i = 0; $i < 256; $i++)
{
    ImageLine($ck, $i, 100-$hist[$i], $i, 100, $g);
    ImageLine($ck, $i, 100.0-100.0*((float)$pre[$i]/$max), $i, 100, $r);
}
ImagePNG($ck, 'histograms.png'); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-04T08:34:49.503

获取所有值的排序列表（升序为第 5 个百分位，降序为第 95 个）。然后遍历所有值，直到从开始到该索引的子列表长度 >= 完整列表长度的 5%。当前索引的值是您要查找的百分位数。甚至不涉及直方图。

# objective-c - 如何获取文件路径？在基于文档的应用程序中加载文档

> ID：12723032
> 
> 赞同：0
> 
> 时间：2012-10-04T08:14:57.777
> 
> 标签：objective-c, cocoa, nsarchiving

我希望能够保存和加载文档，所以我尝试使用这些方法：

[NSKeyedArchiver archiveRootObject: rootObject toFile:@"myMap.map"];

rootObject = [NSKeyedUnarchiver unarchiveObjectWithFile:@"myMap.map"];

我打算把什么作为文件参数？我现在只有一个常量字符串，但这意味着我只能加载一个文件，我假设有一种方法可以让用户从打开的面板中选择作为参数，但是如何？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-04T09:59:30.023

使用 NSFileManager：

```
NSArray *allFileNames = [[NSFileManager defaultManager] contentsOfDirectoryAtPath:@"SomeDirectory"]; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-04T10:16:14.457

我找到了解决方案，我现在使用这种方法：

[NSKeyedArchiver archivedDataWithRootObject:rootObject];

它将数据保存到用户在保存/加载面板中选择的文件中。我仍然不知道如何访问文档的路径，但这已经足够好了。

# android - 不同设备上的 Android 指南针校正

> ID：12723035
> 
> 赞同：0
> 
> 时间：2012-10-04T08:15:14.753
> 
> 标签：android, compass-geolocation

我有一个在我的设备（Xperia Neo V）上使用罗盘读数的小应用程序。在测试它时，我在指向所需方向的同时得到了非常令人满意的结果。但是我在三星 Galaxy S3 上进行了测试，并且我同时在我的 neo V 上运行了相同的应用程序，这两个设备并没有显示完全相同的方向。有大约 10 度的漂移。

因此，作为一名电子工程师，我知道不同的数字罗盘传感器可能会因设计而给出不同的值，但我还没有找到有效的解决方案。有任何想法吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-04T09:54:40.497

我会尝试在同一环境中的两个设备上使用不同方向的旋转进行一些实验，以找到结果的任何相关性。可能存在应该删除的偏移量。一个真正的纯指南针设备可以帮助估计噪音水平。

# java - JBoss 7.1.1、Seam 2.3.0 中没有存储对话

> ID：12723037
> 
> 赞同：0
> 
> 时间：2012-10-04T08:15:16.547
> 
> 标签：java, jsf, primefaces, seam, jboss7.x

当我单击`<p:commandLink>`它时，它无法恢复已经开始的对话。我使用 JBoss 7.1.1、Seam 2.3.0 + Primefaces 3

在呈现我的页面之前记录输出`dashboard.xhml`

```
11:06:35,803 INFO  [org.jboss.as.server] (DeploymentScanner-threads - 2) JBAS018559: Deployed "MRBS.war"
11:06:37,323 INFO  [stdout] (http-localhost-127.0.0.1-8080-1) 11:06:37,323 DEBUG [org.jboss.seam.init.Initialization] Using Java + Groovy hot deploy

11:06:37,334 INFO  [stdout] (http-localhost-127.0.0.1-8080-1) 11:06:37,334 DEBUG [org.jboss.seam.util.Resources] Loaded resource from servlet context: jndi:/default-host/MRBS/view/
login.page.xml

11:06:37,337 INFO  [stdout] (http-localhost-127.0.0.1-8080-1) 11:06:37,337 DEBUG [org.jboss.seam.util.Resources] Loaded resource from servlet context: jndi:/default-host/MRBS/WEB-I
NF/pages.xml

11:06:37,347 INFO  [stdout] (http-localhost-127.0.0.1-8080-1) 11:06:37,346 DEBUG [org.jboss.seam.contexts.Lifecycle] Session started

11:06:37,348 INFO  [stdout] (http-localhost-127.0.0.1-8080-1) 11:06:37,348 DEBUG [org.jboss.seam.contexts.Contexts] starting up: org.jboss.seam.security.identity

11:06:37,350 INFO  [stdout] (http-localhost-127.0.0.1-8080-1) 11:06:37,350 DEBUG [org.jboss.seam.contexts.Contexts] isPageContextActive is null

11:06:37,351 INFO  [stdout] (http-localhost-127.0.0.1-8080-1) 11:06:37,351 DEBUG [org.jboss.seam.contexts.Contexts] isPageContextActive is null

11:06:37,352 INFO  [stdout] (http-localhost-127.0.0.1-8080-1) 11:06:37,352 DEBUG [org.jboss.seam.contexts.Contexts] isPageContextActive is null

11:06:37,353 INFO  [stdout] (http-localhost-127.0.0.1-8080-1) 11:06:37,353 DEBUG [org.jboss.seam.contexts.Contexts] starting up: org.jboss.seam.security.ruleBasedPermissionResolver

11:06:37,370 INFO  [stdout] (http-localhost-127.0.0.1-8080-1) 11:06:37,370 DEBUG [org.jboss.seam.contexts.Contexts] isPageContextActive is null

11:06:37,454 INFO  [stdout] (http-localhost-127.0.0.1-8080-1) 11:06:37,454 DEBUG [org.jboss.seam.drools.RuleBase] parsing rules: /security.drl

11:06:37,459 INFO  [stdout] (http-localhost-127.0.0.1-8080-1) 11:06:37,459 DEBUG [org.jboss.seam.util.Resources] Loaded resource from context classloader: security.drl

11:06:37,652 INFO  [stdout] (http-localhost-127.0.0.1-8080-1) 11:06:37,652 DEBUG [org.jboss.seam.contexts.Contexts] starting up: org.jboss.seam.web.session

11:06:37,653 INFO  [stdout] (http-localhost-127.0.0.1-8080-1) 11:06:37,653 DEBUG [org.jboss.seam.contexts.Contexts] destroying: org.jboss.seam.core.events

11:06:37,664 INFO  [stdout] (http-localhost-127.0.0.1-8080-1) 11:06:37,664 DEBUG [org.jboss.seam.contexts.FacesLifecycle] >>> Begin JSF request for /MRBS/view/dashboard.seam

11:06:37,666 INFO  [stdout] (http-localhost-127.0.0.1-8080-1) 11:06:37,666 DEBUG [org.jboss.seam.util.Naming] JNDI InitialContext properties:{}

11:06:37,668 INFO  [stdout] (http-localhost-127.0.0.1-8080-1) 11:06:37,668 DEBUG [org.jboss.seam.jsf.SeamPhaseListener] beginning transaction prior to phase: RESTORE_VIEW 1

11:06:37,669 INFO  [stdout] (http-localhost-127.0.0.1-8080-1) 11:06:37,669 DEBUG [org.jboss.seam.transaction.UTTransaction] beginning JTA transaction

11:06:37,701 INFO  [stdout] (http-localhost-127.0.0.1-8080-1) 11:06:37,701 DEBUG [org.jboss.seam.contexts.Contexts] isPageContextActive is null

11:06:37,702 INFO  [stdout] (http-localhost-127.0.0.1-8080-1) 11:06:37,702 DEBUG [org.jboss.seam.contexts.Contexts] Page Context will be lazilly created

11:06:37,704 INFO  [stdout] (http-localhost-127.0.0.1-8080-1) 11:06:37,704 DEBUG [org.jboss.seam.core.Manager] No stored conversation

11:06:37,709 INFO  [stdout] (http-localhost-127.0.0.1-8080-1) 11:06:37,709 DEBUG [org.jboss.seam.util.Resources] Loaded resource from context classloader: vfs:/C:/Java/JBoss-7.1.1/
standalone/deployments/MRBS.war/WEB-INF/lib/jboss-seam-debug.jar/META-INF/resources/debug.xhtml

11:06:37,712 INFO  [stdout] (http-localhost-127.0.0.1-8080-1) 11:06:37,712 DEBUG [org.jboss.seam.util.Resources] Loaded resource from context classloader: vfs:/C:/Java/JBoss-7.1.1/
standalone/deployments/MRBS.war/WEB-INF/lib/jboss-seam-debug.jar/META-INF/resources/debug.xhtml

11:06:37,714 INFO  [stdout] (http-localhost-127.0.0.1-8080-1) 11:06:37,714 DEBUG [org.jboss.seam.jsf.SeamPhaseListener] committing transaction after phase: RESTORE_VIEW 1

11:06:37,715 INFO  [stdout] (http-localhost-127.0.0.1-8080-1) 11:06:37,714 DEBUG [org.jboss.seam.transaction.UTTransaction] committing JTA transaction

11:06:37,716 INFO  [stdout] (http-localhost-127.0.0.1-8080-1) 11:06:37,716 DEBUG [org.jboss.seam.util.Resources] Loaded resource from context classloader: vfs:/C:/Java/JBoss-7.1.1/
standalone/deployments/MRBS.war/WEB-INF/lib/jboss-seam-debug.jar/META-INF/resources/debug.xhtml

11:06:37,717 INFO  [stdout] (http-localhost-127.0.0.1-8080-1) 11:06:37,717 DEBUG [org.jboss.seam.jsf.SeamPhaseListener] beginning transaction prior to phase: RENDER_RESPONSE 6

11:06:37,718 INFO  [stdout] (http-localhost-127.0.0.1-8080-1) 11:06:37,718 DEBUG [org.jboss.seam.transaction.UTTransaction] beginning JTA transaction

11:06:37,719 INFO  [stdout] (http-localhost-127.0.0.1-8080-1) 11:06:37,719 DEBUG [org.jboss.seam.util.Resources] Loaded resource from context classloader: vfs:/C:/Java/JBoss-7.1.1/
standalone/deployments/MRBS.war/WEB-INF/lib/jboss-seam-debug.jar/META-INF/resources/debug.xhtml

11:06:37,731 INFO  [stdout] (http-localhost-127.0.0.1-8080-1) 11:06:37,730 DEBUG [org.jboss.seam.core.Manager] Beginning long-running conversation

11:06:37,734 INFO  [stdout] (http-localhost-127.0.0.1-8080-1) 11:06:37,733 DEBUG [org.jboss.seam.jsf.SeamPhaseListener] committing transaction after invoking page actions

11:06:37,734 INFO  [stdout] (http-localhost-127.0.0.1-8080-1) 11:06:37,734 DEBUG [org.jboss.seam.transaction.UTTransaction] committing JTA transaction

11:06:37,735 INFO  [stdout] (http-localhost-127.0.0.1-8080-1) 11:06:37,735 DEBUG [org.jboss.seam.jsf.SeamPhaseListener] beginning transaction before continuing render

11:06:37,736 INFO  [stdout] (http-localhost-127.0.0.1-8080-1) 11:06:37,736 DEBUG [org.jboss.seam.transaction.UTTransaction] beginning JTA transaction

11:06:37,739 INFO  [stdout] (http-localhost-127.0.0.1-8080-1) 11:06:37,738 DEBUG [org.jboss.seam.persistence.HibernatePersistenceProvider] Hibernate Search not present

11:06:37,739 INFO  [stdout] (http-localhost-127.0.0.1-8080-1) java.lang.ClassNotFoundException: org.hibernate.search.Version from [Module "deployment.MRBS.war:main" from Service Mo
dule Loader]

11:06:37,740 INFO  [stdout] (http-localhost-127.0.0.1-8080-1)   at org.jboss.modules.ModuleClassLoader.findClass(ModuleClassLoader.java:190)

11:06:37,741 INFO  [stdout] (http-localhost-127.0.0.1-8080-1)   at org.jboss.modules.ConcurrentClassLoader.performLoadClassUnchecked(ConcurrentClassLoader.java:468)

11:06:37,742 INFO  [stdout] (http-localhost-127.0.0.1-8080-1)   at org.jboss.modules.ConcurrentClassLoader.performLoadClassChecked(ConcurrentClassLoader.java:456)

11:06:37,743 INFO  [stdout] (http-localhost-127.0.0.1-8080-1)   at org.jboss.modules.ConcurrentClassLoader.performLoadClassChecked(ConcurrentClassLoader.java:423)

11:06:37,743 INFO  [stdout] (http-localhost-127.0.0.1-8080-1)   at org.jboss.modules.ConcurrentClassLoader.performLoadClass(ConcurrentClassLoader.java:398)

11:06:37,744 INFO  [stdout] (http-localhost-127.0.0.1-8080-1)   at org.jboss.modules.ConcurrentClassLoader.loadClass(ConcurrentClassLoader.java:120)

11:06:37,745 INFO  [stdout] (http-localhost-127.0.0.1-8080-1)   at java.lang.Class.forName0(Native Method)

11:06:37,745 INFO  [stdout] (http-localhost-127.0.0.1-8080-1)   at java.lang.Class.forName(Unknown Source)

11:06:37,746 INFO  [stdout] (http-localhost-127.0.0.1-8080-1)   at org.jboss.seam.persistence.HibernatePersistenceProvider.<clinit>(HibernatePersistenceProvider.java:58)

11:06:37,747 INFO  [stdout] (http-localhost-127.0.0.1-8080-1)   at sun.reflect.NativeConstructorAccessorImpl.newInstance0(Native Method)

11:06:37,748 INFO  [stdout] (http-localhost-127.0.0.1-8080-1)   at sun.reflect.NativeConstructorAccessorImpl.newInstance(Unknown Source)

11:06:37,748 INFO  [stdout] (http-localhost-127.0.0.1-8080-1)   at sun.reflect.DelegatingConstructorAccessorImpl.newInstance(Unknown Source)

11:06:37,749 INFO  [stdout] (http-localhost-127.0.0.1-8080-1)   at java.lang.reflect.Constructor.newInstance(Unknown Source)

11:06:37,750 INFO  [stdout] (http-localhost-127.0.0.1-8080-1)   at java.lang.Class.newInstance0(Unknown Source)

11:06:37,750 INFO  [stdout] (http-localhost-127.0.0.1-8080-1)   at java.lang.Class.newInstance(Unknown Source)

11:06:37,751 INFO  [stdout] (http-localhost-127.0.0.1-8080-1)   at org.jboss.seam.Component.instantiateJavaBean(Component.java:1445)

11:06:37,751 INFO  [stdout] (http-localhost-127.0.0.1-8080-1)   at org.jboss.seam.Component.instantiate(Component.java:1364)

11:06:37,752 INFO  [stdout] (http-localhost-127.0.0.1-8080-1)   at org.jboss.seam.Component.newInstance(Component.java:2186)

11:06:37,753 INFO  [stdout] (http-localhost-127.0.0.1-8080-1)   at org.jboss.seam.Component.getInstance(Component.java:2034)

11:06:37,753 INFO  [stdout] (http-localhost-127.0.0.1-8080-1)   at org.jboss.seam.Component.getInstance(Component.java:2013)

11:06:37,754 INFO  [stdout] (http-localhost-127.0.0.1-8080-1)   at org.jboss.seam.Component.getInstance(Component.java:2007)

11:06:37,755 INFO  [stdout] (http-localhost-127.0.0.1-8080-1)   at org.jboss.seam.Component.getInstance(Component.java:1980)

11:06:37,755 INFO  [stdout] (http-localhost-127.0.0.1-8080-1)   at org.jboss.seam.Component.getInstance(Component.java:1975)

11:06:37,756 INFO  [stdout] (http-localhost-127.0.0.1-8080-1)   at org.jboss.seam.persistence.PersistenceProvider.instance(PersistenceProvider.java:204)

11:06:37,757 INFO  [stdout] (http-localhost-127.0.0.1-8080-1)   at org.jboss.seam.persistence.PersistenceContexts.beforeRender(PersistenceContexts.java:140)

11:06:37,757 INFO  [stdout] (http-localhost-127.0.0.1-8080-1)   at org.jboss.seam.jsf.SeamPhaseListener.beforeRenderResponse(SeamPhaseListener.java:500)

11:06:37,758 INFO  [stdout] (http-localhost-127.0.0.1-8080-1)   at org.jboss.seam.jsf.SeamPhaseListener.beforeServletPhase(SeamPhaseListener.java:147)

11:06:37,759 INFO  [stdout] (http-localhost-127.0.0.1-8080-1)   at org.jboss.seam.jsf.SeamPhaseListener.beforePhase(SeamPhaseListener.java:117)

11:06:37,759 INFO  [stdout] (http-localhost-127.0.0.1-8080-1)   at com.sun.faces.lifecycle.Phase.handleBeforePhase(Phase.java:228)

11:06:37,760 INFO  [stdout] (http-localhost-127.0.0.1-8080-1)   at com.sun.faces.lifecycle.Phase.doPhase(Phase.java:99)

11:06:37,761 INFO  [stdout] (http-localhost-127.0.0.1-8080-1)   at com.sun.faces.lifecycle.LifecycleImpl.render(LifecycleImpl.java:139)

11:06:37,761 INFO  [stdout] (http-localhost-127.0.0.1-8080-1)   at javax.faces.webapp.FacesServlet.service(FacesServlet.java:594)

11:06:37,762 INFO  [stdout] (http-localhost-127.0.0.1-8080-1)   at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:329)

11:06:37,763 INFO  [stdout] (http-localhost-127.0.0.1-8080-1)   at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:248)

11:06:37,764 INFO  [stdout] (http-localhost-127.0.0.1-8080-1)   at org.jboss.seam.servlet.SeamFilter$FilterChainImpl.doFilter(SeamFilter.java:83)

11:06:37,764 INFO  [stdout] (http-localhost-127.0.0.1-8080-1)   at org.jboss.seam.web.LoggingFilter.doFilter(LoggingFilter.java:60)

11:06:37,765 INFO  [stdout] (http-localhost-127.0.0.1-8080-1)   at org.jboss.seam.servlet.SeamFilter$FilterChainImpl.doFilter(SeamFilter.java:69)

11:06:37,766 INFO  [stdout] (http-localhost-127.0.0.1-8080-1)   at org.jboss.seam.web.IdentityFilter.doFilter(IdentityFilter.java:40)

11:06:37,767 INFO  [stdout] (http-localhost-127.0.0.1-8080-1)   at org.jboss.seam.servlet.SeamFilter$FilterChainImpl.doFilter(SeamFilter.java:69)

11:06:37,767 INFO  [stdout] (http-localhost-127.0.0.1-8080-1)   at org.jboss.seam.web.MultipartFilter.doFilter(MultipartFilter.java:90)

11:06:37,768 INFO  [stdout] (http-localhost-127.0.0.1-8080-1)   at org.jboss.seam.servlet.SeamFilter$FilterChainImpl.doFilter(SeamFilter.java:69)

11:06:37,769 INFO  [stdout] (http-localhost-127.0.0.1-8080-1)   at org.jboss.seam.web.ExceptionFilter.doFilter(ExceptionFilter.java:64)

11:06:37,769 INFO  [stdout] (http-localhost-127.0.0.1-8080-1)   at org.jboss.seam.servlet.SeamFilter$FilterChainImpl.doFilter(SeamFilter.java:69)

11:06:37,770 INFO  [stdout] (http-localhost-127.0.0.1-8080-1)   at org.jboss.seam.web.RedirectFilter.doFilter(RedirectFilter.java:45)

11:06:37,771 INFO  [stdout] (http-localhost-127.0.0.1-8080-1)   at org.jboss.seam.servlet.SeamFilter$FilterChainImpl.doFilter(SeamFilter.java:69)

11:06:37,771 INFO  [stdout] (http-localhost-127.0.0.1-8080-1)   at org.jboss.seam.web.HotDeployFilter.doFilter(HotDeployFilter.java:53)

11:06:37,772 INFO  [stdout] (http-localhost-127.0.0.1-8080-1)   at org.jboss.seam.servlet.SeamFilter$FilterChainImpl.doFilter(SeamFilter.java:69)

11:06:37,773 INFO  [stdout] (http-localhost-127.0.0.1-8080-1)   at org.jboss.seam.servlet.SeamFilter.doFilter(SeamFilter.java:158)

11:06:37,773 INFO  [stdout] (http-localhost-127.0.0.1-8080-1)   at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:280)

11:06:37,774 INFO  [stdout] (http-localhost-127.0.0.1-8080-1)   at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:248)

11:06:37,775 INFO  [stdout] (http-localhost-127.0.0.1-8080-1)   at org.apache.catalina.core.StandardWrapperValve.invoke(StandardWrapperValve.java:275)

11:06:37,775 INFO  [stdout] (http-localhost-127.0.0.1-8080-1)   at org.apache.catalina.core.StandardContextValve.invoke(StandardContextValve.java:161)

11:06:37,776 INFO  [stdout] (http-localhost-127.0.0.1-8080-1)   at org.apache.catalina.authenticator.AuthenticatorBase.invoke(AuthenticatorBase.java:397)

11:06:37,777 INFO  [stdout] (http-localhost-127.0.0.1-8080-1)   at org.jboss.as.jpa.interceptor.WebNonTxEmCloserValve.invoke(WebNonTxEmCloserValve.java:50)

11:06:37,778 INFO  [stdout] (http-localhost-127.0.0.1-8080-1)   at org.jboss.as.web.security.SecurityContextAssociationValve.invoke(SecurityContextAssociationValve.java:153)

11:06:37,778 INFO  [stdout] (http-localhost-127.0.0.1-8080-1)   at org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.java:155)

11:06:37,779 INFO  [stdout] (http-localhost-127.0.0.1-8080-1)   at org.apache.catalina.valves.ErrorReportValve.invoke(ErrorReportValve.java:102)

11:06:37,780 INFO  [stdout] (http-localhost-127.0.0.1-8080-1)   at org.apache.catalina.core.StandardEngineValve.invoke(StandardEngineValve.java:109)

11:06:37,781 INFO  [stdout] (http-localhost-127.0.0.1-8080-1)   at org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:368)

11:06:37,781 INFO  [stdout] (http-localhost-127.0.0.1-8080-1)   at org.apache.coyote.http11.Http11Processor.process(Http11Processor.java:877)

11:06:37,782 INFO  [stdout] (http-localhost-127.0.0.1-8080-1)   at org.apache.coyote.http11.Http11Protocol$Http11ConnectionHandler.process(Http11Protocol.java:671)

11:06:37,783 INFO  [stdout] (http-localhost-127.0.0.1-8080-1)   at org.apache.tomcat.util.net.JIoEndpoint$Worker.run(JIoEndpoint.java:930)

11:06:37,783 INFO  [stdout] (http-localhost-127.0.0.1-8080-1)   at java.lang.Thread.run(Unknown Source)

11:06:38,542 INFO  [org.primefaces.component.commandbutton.CommandButton] (http-localhost-127.0.0.1-8080-1) image attribute is deprecated to define an icon, use icon attribute inst
ead.
11:06:38,543 INFO  [org.primefaces.component.commandbutton.CommandButton] (http-localhost-127.0.0.1-8080-1) image attribute is deprecated to define an icon, use icon attribute inst
ead.
11:06:38,546 INFO  [org.primefaces.component.commandbutton.CommandButton] (http-localhost-127.0.0.1-8080-1) image attribute is deprecated to define an icon, use icon attribute inst
ead.
11:06:38,547 INFO  [org.primefaces.component.commandbutton.CommandButton] (http-localhost-127.0.0.1-8080-1) image attribute is deprecated to define an icon, use icon attribute inst
ead.
11:06:40,582 INFO  [stdout] (http-localhost-127.0.0.1-8080-1) 11:06:40,582 DEBUG [org.jboss.seam.jsf.SeamPhaseListener] committing transaction after phase: RENDER_RESPONSE 6

11:06:40,584 INFO  [stdout] (http-localhost-127.0.0.1-8080-1) 11:06:40,584 DEBUG [org.jboss.seam.transaction.UTTransaction] committing JTA transaction

11:06:40,585 INFO  [stdout] (http-localhost-127.0.0.1-8080-1) 11:06:40,585 DEBUG [org.jboss.seam.core.Manager] Storing conversation state: 1

11:06:40,586 INFO  [stdout] (http-localhost-127.0.0.1-8080-1) 11:06:40,586 DEBUG [org.jboss.seam.contexts.FacesLifecycle] After render response, destroying contexts

11:06:40,587 INFO  [stdout] (http-localhost-127.0.0.1-8080-1) 11:06:40,587 DEBUG [org.jboss.seam.contexts.Contexts] destroying business process context

11:06:40,589 INFO  [stdout] (http-localhost-127.0.0.1-8080-1) 11:06:40,589 DEBUG [org.jboss.seam.contexts.Contexts] flushing server-side conversation context

11:06:40,590 INFO  [stdout] (http-localhost-127.0.0.1-8080-1) 11:06:40,590 DEBUG [org.jboss.seam.contexts.Contexts] flushing session context

11:06:40,592 INFO  [stdout] (http-localhost-127.0.0.1-8080-1) 11:06:40,592 DEBUG [org.jboss.seam.contexts.Contexts] destroying event context

11:06:40,593 INFO  [stdout] (http-localhost-127.0.0.1-8080-1) 11:06:40,593 DEBUG [org.jboss.seam.contexts.Contexts] destroying: org.jboss.seam.core.conversationPropagation

11:06:40,594 INFO  [stdout] (http-localhost-127.0.0.1-8080-1) 11:06:40,594 DEBUG [org.jboss.seam.contexts.Contexts] destroying: org.jboss.seam.transaction.transaction

11:06:40,595 INFO  [stdout] (http-localhost-127.0.0.1-8080-1) 11:06:40,595 DEBUG [org.jboss.seam.contexts.Contexts] destroying: com.sun.faces.context.ExternalContextFactoryImpl_KEY

11:06:40,596 INFO  [stdout] (http-localhost-127.0.0.1-8080-1) 11:06:40,596 DEBUG [org.jboss.seam.contexts.Contexts] destroying: org.jboss.seam.core.manager

11:06:40,597 INFO  [stdout] (http-localhost-127.0.0.1-8080-1) 11:06:40,597 DEBUG [org.jboss.seam.contexts.Contexts] destroying: org.jboss.seam.transaction.synchronizations

11:06:40,598 INFO  [stdout] (http-localhost-127.0.0.1-8080-1) 11:06:40,598 DEBUG [org.jboss.seam.contexts.Contexts] destroying: org.jboss.seam.web.servletContexts

11:06:40,599 INFO  [stdout] (http-localhost-127.0.0.1-8080-1) 11:06:40,599 DEBUG [org.jboss.seam.contexts.Contexts] destroying: org.jboss.seam.web.requestContextPath

11:06:40,600 INFO  [stdout] (http-localhost-127.0.0.1-8080-1) 11:06:40,600 DEBUG [org.jboss.seam.contexts.Contexts] destroying: org.jboss.seam.core.events

11:06:40,601 INFO  [stdout] (http-localhost-127.0.0.1-8080-1) 11:06:40,601 DEBUG [org.jboss.seam.contexts.Contexts] destroying: org.jboss.seam.web.requestServletPath

11:06:40,601 INFO  [stdout] (http-localhost-127.0.0.1-8080-1) 11:06:40,601 DEBUG [org.jboss.seam.contexts.Contexts] destroying: org.springframework.web.context.request.RequestConte
xtListener.REQUEST_ATTRIBUTES

11:06:40,602 INFO  [stdout] (http-localhost-127.0.0.1-8080-1) 11:06:40,602 DEBUG [org.jboss.seam.contexts.FacesLifecycle] <<< End JSF request for /MRBS/view/dashboard.seam 
```

单击时出错`<p:commandLink>`

```
10:59:09,038 INFO  [stdout] (http-localhost-127.0.0.1-8080-1) 10:59:09,038 DEBUG [org.jboss.seam.init.Initialization] Using Java + Groovy hot deploy

10:59:09,049 INFO  [stdout] (http-localhost-127.0.0.1-8080-1) 10:59:09,049 DEBUG [org.jboss.seam.util.Resources] Loaded resource from servlet context: jndi:/default-host/MRBS/view/
login.page.xml

10:59:09,052 INFO  [stdout] (http-localhost-127.0.0.1-8080-1) 10:59:09,052 DEBUG [org.jboss.seam.util.Resources] Loaded resource from servlet context: jndi:/default-host/MRBS/WEB-I
NF/pages.xml

10:59:09,057 INFO  [stdout] (http-localhost-127.0.0.1-8080-1) 10:59:09,057 DEBUG [org.jboss.seam.contexts.FacesLifecycle] >>> Begin JSF request for /MRBS/view/dashboard.seam

10:59:09,060 INFO  [stdout] (http-localhost-127.0.0.1-8080-1) 10:59:09,060 DEBUG [org.jboss.seam.jsf.SeamPhaseListener] beginning transaction prior to phase: RESTORE_VIEW 1

10:59:09,062 INFO  [stdout] (http-localhost-127.0.0.1-8080-1) 10:59:09,062 DEBUG [org.jboss.seam.transaction.UTTransaction] beginning JTA transaction

10:59:09,079 INFO  [stdout] (http-localhost-127.0.0.1-8080-1) 10:59:09,079 DEBUG [org.jboss.seam.contexts.Contexts] isPageContextActive is null

10:59:09,080 INFO  [stdout] (http-localhost-127.0.0.1-8080-1) 10:59:09,080 DEBUG [org.jboss.seam.contexts.Contexts] Page Context will be lazilly created

10:59:09,081 INFO  [stdout] (http-localhost-127.0.0.1-8080-1) 10:59:09,081 DEBUG [org.jboss.seam.core.Manager] No stored conversation

10:59:09,085 INFO  [stdout] (http-localhost-127.0.0.1-8080-1) 10:59:09,085 DEBUG [org.jboss.seam.util.Resources] Loaded resource from context classloader: vfs:/C:/Java/JBoss-7.1.1/
standalone/deployments/MRBS.war/WEB-INF/lib/jboss-seam-debug.jar/META-INF/resources/debug.xhtml

10:59:09,088 ERROR [org.jboss.as.txn] (http-localhost-127.0.0.1-8080-1) JBAS010152: APPLICATION ERROR: transaction still active in request with status 1 
```

仪表板.xhtml

```
 <h:form id="datePickerForm">   
    <p:commandLink action="#{DashBoard.nextWeek()}" update="datePanelGrid" ajax="true" vale="Next Week"/>

        <h:panelGroup id="datePanelGrid">
            <h:outputText value="#{DashBoard.startDate}" style="color:#333333;font-size:15px;">
                <f:convertDateTime pattern="yyyy-MM-dd"/>
            </h:outputText>
            -
            <h:outputText value="#{DashBoard.endDate}" style="color:#333333;font-size:15px;">
                <f:convertDateTime pattern="yyyy-MM-dd"/>
            </h:outputText>
        </h:panelGroup>
 </h:form> 
```

仪表板.java

```
@Name("DashBoard")
@Scope(ScopeType.CONVERSATION)
public class DashBoard extends BaseBean {
    private boolean initFlag = true;
    private Date startDate;
    private Date endDate;

    public boolean getInitFlag() {
        return initFlag;
    }

    @Begin(nested = true)
    public void init() {
        initFlag = false;
        startDate = new Date();
    }

    public Date getEndDate() {
        Calendar cal = Calendar.getInstance();        
        cal.setTime(loadEndDate(startDate));
        cal.add(Calendar.DATE, 7); 
        endDate =  cal.getTime();
        return endDate;
    }

    public Date getStartDate() {
        return startDate;            
    }

    public void nextWeek() {
        startDate = endDate;
    }
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-16T12:44:52.827

基本上对话需要通过请求（ajax/non ajax）参数来恢复，对于 JSF，它是 **javax.faces.ViewState**，另见：[this post](https://stackoverflow.com/questions/12175763/how-to-send-post-request-to-jsf-component-without-using-html-form)。您需要检查请求参数（firebug 或其他东西）和 primefaces 文档（对此不太了解）。

# unity3d - 从平面上擦除纹理

> ID：12723038
> 
> 赞同：2
> 
> 时间：2012-10-04T08:15:19.430
> 
> 标签：unity3d

我将纹理应用于平面，并希望在屏幕上触摸以擦除该平面上的选定位置（如橡皮擦），以便在我触摸的位置，纹理应该是透明的。我该怎么做？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-09T02:46:44.997

在您在上面的评论中澄清之后，这将起作用：

```
Texture2D texture = renderer.material.mainTexture;
Color color = new Color(0.5F, 0.5f, 0.5F, 0.5F);  //example color, grey w/ half opacity

texture.SetPixel(0,0,color); //set pixel (0,0) to the color specified
texture.Apply();  //Must be called at least once after all changes to pixels made 
```

希望这就是你所需要的。显然，您需要添加代码以仅修改光标所在位置附近的像素。

# linux - 在端口 80 (Linux) 中从 Eclipse 启动 Tomcat

> ID：12723040
> 
> 赞同：0
> 
> 时间：2012-10-04T08:15:25.307
> 
> 标签：linux, eclipse, tomcat, ubuntu, port80

之前有人问过这个问题，但没有给出真正的答案（据我所知）。

这是原始问题的链接： [使用 Authbind 在 Ubuntu 的端口 80 中从 Eclipse 启动 Tomcat](https://stackoverflow.com/questions/9533015/start-tomcat-from-eclipse-in-port-80-in-ubuntu-with-authbind)。

*   我确实需要在端口 80 上运行 tomcat。
*   我宁愿不必在计算机上安装 tomcat。我相信这不是必需的。
*   我想避免使用端口转发（我现在必须这样做，因为我找不到其他解决方案）

我在用：

*   Ubuntu 12.04
*   日蚀朱诺
*   雄猫 7
*   OpenJDK 64 位服务 - java 版本“1.7.0_07”

我能够以非 root 用户身份在端口 80 中启动 tomcat，而无需安装 tomcat。

我关注这篇文章： http: [//java.dzone.com/articles/running-tomcat-port-80-user](http://java.dzone.com/articles/running-tomcat-port-80-user) 有很多关于该主题的文章，但我发现这篇文章简单而完整。

当我尝试使用 eclipse 启动 tomcat 时，它总是失败并抱怨使用了 80 端口。但这不是真的。事实上，当 eclipse 运行并且错误显示在屏幕上时，我可以在端口 80 上手动启动 tomcat。

我注意到 eclipse 在没有访问该端口的权限时抱怨端口 80 被使用。在无法在端口 80 上手动运行 tomcat 之前，我确实遇到了同样的错误。不同之处在于，当我手动运行 tomcat 时，它确实记录了访问权限错误，并且 eclipse 抱怨端口的使用。

我已经修改了 eclipse tomcat 启动器以包含选项“-Djava.net.preferIPv4Stack=true”并将 tomcat 启动为“authbind --deep start”

但我总是得到同样的错误。

如果我以 root 身份启动 eclipse，它工作正常，所以我相信问题与端口 80 上的访问权限有关，而不是与要使用的端口有关。

我确实假设 eclipse 使用与启动 eclipse 相同的用户权限启动 tomcat。

有人可以提供一些支持吗？我可以使用端口转发来工作，但我真的很想知道我缺少什么以及如何正确地做到这一点。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-05-30T20:55:34.793

最简单的方法是使用端口 8080 上的侦听器启动 tomcat 并将端口 80 转发到 localhost:8080：

```
ssh -L 80:localhost:8080 <user>@localhost 
```

执行此命令`sudo`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-05-13T12:28:04.133

我想在 Linux 下运行使用端口 1-1024 的东西，该进程必须具有 root 权限。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2018-11-28T22:22:07.057

我不确定我是否可以对任何人有所帮助，但我解决了描述的类似问题：我使用 startup.sh 脚本启动了 tomcat，它在端口 80 上运行良好。我重新启动了机器（以防万一）并尝试启动相同的来自eclipse的tomcat，但是当我收到有关正在使用端口80的错误时。

原来eclipse不从tomcat安装中获取启动脚本，所以它不使用authbind配置。我想出的最佳解决方案是使用 authbind 启动 Eclipse：

```
 authbind --deep ./STS 
```

至于为什么这不起作用：

> 我已经修改了 eclipse tomcat 启动器以包含选项“-Djava.net.preferIPv4Stack=true”并将 tomcat 启动为“authbind --deep start”

据我了解，您尝试将“authbind --deep start”作为参数传递给tomcat。我相信 authbind 的重点是使用 tomcat 作为参数启动应用程序 authbind。我没有看到任何方法可以在 Eclipse 中做到这一点。

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2013-02-25T04:29:07.540

我现在也像你一样学习日食。即使我遇到了和你一样的问题。然后，我更改了端口号，然后服务器现在正在启动。要更改端口号，您需要在服务器上双击 Apache Tomcat。然后单击端口并将 HTTP/1.1 端口更改为您希望的任何四位数字并保存。它会起作用的。

# facebook - 如何在给定时间戳后获得 Facebook 帖子的点赞和评论？

> ID：12723043
> 
> 赞同：0
> 
> 时间：2012-10-04T08:15:38.013
> 
> 标签：facebook, facebook-graph-api

我想在给定时间戳的 facebook 页面上找出最新的评论和喜欢。有没有办法从 facebook API 获取这些数据？例如：如果用户 A 30 天前在我的页面上发布了一些内容，而用户 B 喜欢该帖子并在今天发表了评论。如果我尝试找出过去 2 天内我页面上的所有活动（即使帖子是 30 天前），我需要在回复中获取这些活动。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-04T09:12:45.723

这不适用于 API，**因为**参数仅适用于帖子。一种可能是：

```
comments_after_that_time = 1349285260;

$comments = json_decode(file_get_contents("https://graph.facebook.com/[yourpost_id]/comments?access_token=xxx"));

foreach($comments->data as $comment)
{
    if(strtotime($comment->created_time) > comments_after_that_time)
    {
    echo "we have a new comment";
    }
} 
```

# jsf - 在 JSF + Spring 3 WebApplication 中找不到 javax.annotation.security.RolesAllowed

> ID：12723047
> 
> 赞同：0
> 
> 时间：2012-10-04T08:15:59.540
> 
> 标签：jsf, spring-security

我正在尝试将 Spring 3.1.2 Security 添加到现有的 JSF 应用程序，问题是找不到此注释，我不知道那里缺少哪个依赖项。任何帮助表示赞赏：

POM.xml

```
<properties>
    <myfaces.version>2.1.8</myfaces.version>
    <spring-security.version>3.1.2.RELEASE</spring-security.version>
</properties>

        <!-- Spring Security -->
        <dependency>
            <groupId>org.springframework.security</groupId>
            <artifactId>spring-security-core</artifactId>
            <version>${spring-security.version}</version>
        </dependency>
        <dependency>
            <groupId>org.springframework.security</groupId>
            <artifactId>spring-security-config</artifactId>
            <version>${spring-security.version}</version>
        </dependency>
        <dependency>
            <groupId>org.springframework.security</groupId>
            <artifactId>spring-security-acl</artifactId>
            <version>${spring-security.version}</version>
        </dependency>
        <dependency>
            <groupId>org.springframework.security</groupId>
            <artifactId>spring-security-web</artifactId>
            <version>${spring-security.version}</version>
        </dependency>
        <dependency>
            <groupId>org.springframework.security</groupId>
            <artifactId>spring-security-taglibs</artifactId>
            <version>${spring-security.version}</version>
        </dependency> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-04T14:36:33.107

您没有提到您要部署到哪个应用服务器，所以我假设 Tomcat，它通常不具有所有/Java EE 依赖项。如果您只是在寻找注释，您可以简单地获取 JSR250 API 依赖项：

```
<dependency>
    <groupId>javax.annotation</groupId>
    <artifactId>jsr250-api</artifactId>
    <version>1.0</version>
</dependency> 
```

您还可以引入完整的 Java EE 6 API：

```
<dependency>
    <groupId>javax</groupId>
    <artifactId>javaee-api</artifactId>
    <version>6.0</version>
</dependency> 
```

# html - 不同页面大小上的灵活 DIV 高度

> ID：12723051
> 
> 赞同：1
> 
> 时间：2012-10-04T08:16:23.253
> 
> 标签：html, css

知道如何在不指定固定值或 Javascript 的情况下使下面这段代码中的中间部分（[此处为 jsFiddle](http://jsfiddle.net/JDh7k/)）调整到实际容器的高度吗？在这个小提琴中，我尝试为容器设置绝对和相对，但页面总是显示垂直滚动条，因为容器的高度超过了实际页面的高度。

```
<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
    <style>
        body { margin: 0; height:100%;}
        #mainContainer { position: absolute; right: 4%; left: 4%; height: 100%; }
        #headerContainer { width: 100%; position: relative; background: #323232; color: white; height: 30px; }
        #middleContainer { height: 100%; }
        #leftSection { position: absolute; float: left; width: 175px; background: #71ABD1; height: 100%; overflow: auto; color: black; }
        #middleSection { position: absolute; height: 100%; background-color: yellow; left: 175px; right: 175px; color: black; }
        #rightSection { float: right; height: 100%; width: 175px; border-left: 1px dotted black; background: red; color: black; }
        #footerContainer { position: relative; width: 100%; height: 30px; background: #323232; color: white; }
    </style>
</head>
<body>
    <div id="mainContainer">
        <div id="headerContainer">
            headerContainer
        </div>
        <div id="middleContainer">
            <div id="leftSection">
                <div style="margin-top: 30px;">leftSection</div>
            </div>
            <div id="middleSection">
                <div style="margin-top: 30px;">middleSection</div>
            </div>
            <div id="rightSection">
                <div style="margin-top: 30px;">rightSection</div>
            </div>
        </div>
        <div id="footerContainer">
            footerContainer
        </div>
    </div>
</body>
</html> 
```

​</p>

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-04T08:44:50.863

这似乎做你想做的事：

[http://jsfiddle.net/grc4/XTQuT/2/](http://jsfiddle.net/grc4/XTQuT/2/)

绝对定位`#middleContainer`与`#footerContainer`正常流程无关。`#middleContainer`被迫占据整个页面的大小，但会留出一个边距，以便为页眉和页脚留出空间。`#footerContainer`用 固定在页面底部`bottom: 0`。那么左右两列就可以只用`height: 100%`占用右边的空间了，但是中间的列仍然需要绝对定位来强制它只占用剩余的空间。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-04T08:26:51.753

...................................

嗨玛雅我建议你可以在你的代码中使用表格属性，如果是的话，而不是检查这个***[演示](http://tinkerbin.com/ZJlIowm7)***

**HTML**

```
<div class="wrap">

  <div class="header">header</div>
  <div class="conternt">
  <div class="left">Left sdaf dsaklf jdslkaf jdlskfj dlskafj dslkf jdslkf jsdlakfj sdlakfj sdlkf jlsdkfj sladkfj sdalkfj sadlkf </div>
  <div class="center">Center flexible</div>
  <div class="right">right</div>
  </div>
  <div class="footer">footer</div>

</div> 
```

**CSS**

```
.header{
background:green;
  color:#fff;
  padding:20px;
}

.conternt{
background:yellow;
  display:table;
  width:100%;
}
.left, .right, .center{
display:table-cell;
  color:#fff;
}
.left, .right{
width:100px;
}
.left{
background:rgba(0,0,0,0.5)
}
.center{
background:rgba(0,0,0,0.1)
}
.right{
background:rgba(0,0,0,0.9)
}

.footer{
background:red;
  color:#fff;
  padding:20px;

} 
```

***[现场演示](http://tinkerbin.com/ZJlIowm7)***

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-04T08:28:58.140

`#footerContainer`将两者的高度指定`#headerContainer`为百分比而不是像素，就像对其他 div 执行相同操作一样。在这个[**小提琴**](http://jsfiddle.net/gnel/Xywk6/)中，我将 10% 用于页眉和页脚，将 80% 用于所有中间 div。

# php - 在从 IOS 设备发送的格式化电子邮件中使用 PHP 获取内联电子邮件附件

> ID：12723054
> 
> 赞同：2
> 
> 时间：2012-10-04T08:16:24.003
> 
> 标签：php, ios, email, imap, attachment

我正在使用[PHP-imap](http://code.google.com/p/php-imap/)来阅读来自 IMAP 帐户的电子邮件和附件。这些电子邮件是从 iPhone 或 iPad 发送的。当他们写一封电子邮件并粘贴到他们拍摄的图像中时，它工作得很好。

这是我如何获取附件的片段：

```
require_once("plugins/MailLib/MailLib.php");

$mailbox = new MailLib();
$mailbox->connect($username, $password, $server, $port, $path, false);

$mails = array();
$mailIds = $mailbox->getMails("UNSEEN");

if($mailIds != null && count($mailIds) > 0) {
    foreach($mailIds as $mailId) {
        $mail = $mailbox->getMail($mailId);
        if($mail['attachments']) {
            foreach($mail['attachments'] as $attachment) {
                $file = $mailbox->getAttachment($attachment, $mailId);
                $destFile = "path/to/folder/".time().".jpg";
                $fh = fopen($destFile, 'a') or die("can't open file");
                fwrite($fh, $file);
                fclose($fh);
            }
        }
 } 
```

一旦他们开始使用默认选项（如粗体、斜体或下划线）格式化内容，一切都会崩溃。因为那时我收到以下电子邮件内容：

```
<div>
    <em>Test</em> with <strong>formatting</strong>
    <br>
    <br>
    <img id="7CB777EB-3124-4AEA-8894-6F743EA78F79" src="cid:7CB777EB-3124-4AEA-8894-6F743EA78F79" alt="image.jpeg">
    <br>
    <br>
    <div>Send from my iPhone</div>
</div> 
```

是否有任何类型的 php 库也可以获取这些附件？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-06T20:48:47.410

我找到了解决问题的方法。有人写了一个[小类来提取内联附件](http://www.electrictoolbox.com/php-email-extract-inline-image-attachments/)。

使用此类，可以将附件内容直接写入文件，如下所示：

```
foreach($emailMessage->attachments as $attachment) {
    file_put_contents(time().".extension", $attachment['data']);
} 
```

# javascript - Javascript 超时 - 规范

> ID：12723057
> 
> 赞同：2
> 
> 时间：2012-10-04T08:16:36.000
> 
> 标签：javascript, timeout

这不仅仅是一个问题，它是一个保证Javascript超时功能的服务质量（QoS）的请求。

看下面的伪代码：

```
 .. start something in JS after a user action
  .. some js code
  setTimeout( function() { doSomething }, 1 );
  .. continue for longer than 1ms doing something
  .. end code for user action

  .. after 

  .. execute doSomething 
```

我们能否确定在所有主流浏览器上，超时代码是在代码处理了第一个用户操作之后完成的？这与延迟时间无关。

延迟时间并不重要，而是在之后执行“doSomething”代码这一事实。

0延迟会发生什么？

提前感谢您在不同浏览器上的体验。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-04T08:55:46.217

由于 Javascript 的单线程特性，异步事件“触发”的时间与实际执行的时间不同。

正在评估的每个代码块在内部都表示为任务队列中的一个任务。因此，假设在给定代码块的中间，一个异步事件准备好通过`setTimeout()`. 如果延迟足够短，实际上在同一块代码的其余部分完成执行之前，没有什么能阻止它“触发”。然而，“触发”并不意味着`setTimeout`处理程序实际上会中断并执行。它只是意味着它变成了任务队列中的一个任务。实际执行仍然必须等到它从任务队列中弹出，并且在原始代码块完成之前不会发生。

这是一个 HTML5 规范片段，虽然不是对所有浏览器都具有权威性，当然是 HTML5，但只是说明性的：

[http://www.whatwg.org/specs/web-apps/current-work/multipage/webappapis.html#processing-model-3](http://www.whatwg.org/specs/web-apps/current-work/multipage/webappapis.html#processing-model-3)

在那里为主事件循环定义的 7 个步骤中的第一个是：

1.  **在事件循环的任务队列之一上运行最旧的任务**，忽略关联文档未完全活动的任务 [...]

请注意，这第一步是原子的。该任务必须在环境重置和下一个任务被拾取之前运行完成。

还可以看看 John Resig 的帖子： [http ://ejohn.org/blog/how-javascript-timers-work/](http://ejohn.org/blog/how-javascript-timers-work/)

所以，写你的问题：

> 我们能否确定在所有主要浏览器上，超时代码都是在处理第一个用户操作的代码之后完成的。这与延迟时间无关。

……答案是肯定的，我们可以肯定。（在普通情况下......我假设我们只是在谈论传统的单/UI 线程，而不是在谈论 Web Workers 的处理）。

此外，尽管您确实提到您并不关心延迟时间本身，但您仍然可能有兴趣注意“钳制时间”（强制最小延迟），这似乎[实际上是标准化的4毫秒](https://developer.mozilla.org/en-US/docs/DOM/window.setTimeout#Minimum_delay_and_timeout_nesting)。

# xcode - 线程1：EXC_BAD_ACCESS（代码=2，地址=0*879fc0）

> ID：12723064
> 
> 赞同：0
> 
> 时间：2012-10-04T08:17:03.463
> 
> 标签：xcode

我有一个 UITableViewController (CoffeeBeansViewController)，它从 sqlite 表中查找值并在表中显示内容。

```
- (UITableViewCell *)tableView:(UITableView *)tableView cellForRowAtIndexPath:(NSIndexPath *)indexPath
{
    static NSString *CellIdentifier = @"RegionCell";
    UITableViewCell *cell = [tableView dequeueReusableCellWithIdentifier:CellIdentifier];

    // Configure the cell...
    if (cell == nil) {
        cell = [[UITableViewCell alloc] initWithStyle:UITableViewCellStyleDefault reuseIdentifier:CellIdentifier];
}
    int rowCount = indexPath.row;
    CoffeeBeans *coffeeBeans = [self.theCoffees objectAtIndex:rowCount];
    cell.textLabel.text = coffeeBeans.region;
    cell.detailTextLabel.text = coffeeBeans.variety;

    return cell;  
} 
```

退出函数后，程序崩溃并出现错误：线程 1：EXC_BAD_ACCESS (code =2, address=0*879fc0)。

```
libobjc.A.dylib`objc_release:
0xf90dd0:  pushl  %ebp
0xf90dd1:  movl   %esp, %ebp
0xf90dd3:  subl   $8, %esp
0xf90dd6:  calll  0xf90ddb                  ; objc_release + 11
0xf90ddb:  popl   %ecx
0xf90ddc:  movl   8(%ebp), %eax
0xf90ddf:  testl  %eax, %eax
0xf90de1:  je     0xf90e00                  ; objc_release + 48
0xf90de3:  movl   (%eax), %edx
0xf90de5:  movl   16(%edx), %edx
0xf90de8:  testb  $4, 2(%edx)               <error message is here>
0xf90dec:  je     0xf90e05                  ; objc_release + 53
0xf90dee:  movl   775957(%ecx), %ecx
0xf90df4:  movl   %ecx, 4(%esp)
0xf90df8:  movl   %eax, (%esp)
0xf90dfb:  calll  0xf9008c                  ; objc_msgSend
0xf90e00:  addl   $8, %esp
0xf90e03:  popl   %ebp
0xf90e04:  ret    
0xf90e05:  addl   $8, %esp
0xf90e08:  popl   %ebp
0xf90e09:  jmp    0 
```

在 lh 列中，它突出显示线程 1 下的“0 objc_release”。

谁能帮我解决这个错误？谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-04T08:35:09.660

试试这个。还要调试整个代码并使 NSZombieEnabled 为 YES 以了解错误：

```
 CoffeeBeans *coffeeBeans = (CoffeeBeans *)[self.theCoffees objectAtIndex:rowCount];
    if(coffeeBeans)
    {
      if(coffeeBeans.region)
         cell.textLabel.text = coffeeBeans.region;

      if(coffeeBeans.variety)
         cell.detailTextLabel.text = coffeeBeans.variety;
    } 
```

# api - 使用按 nr of likes 排序的 Instagram API 获取图片

> ID：12723065
> 
> 赞同：1
> 
> 时间：2012-10-04T08:17:06.170
> 
> 标签：api, instagram

正如标题所描述的，是否有（可能是未记录的）方法来使用由 nr of likes 订购的 Instagram API 来获取图片？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-17T23:06:13.630

简而言之：没有。

您当然可以使用[/tags/tag-name/media/recent](http://instagram.com/developer/endpoints/tags/)端点调用图像（这将返回每张图片的点赞数），存储在数据库中，然后按点赞排序等...

# jakarta-ee - 在 jboss-as-7.1.1.Final 中为网页启用热部署

> ID：12723069
> 
> 赞同：6
> 
> 时间：2012-10-04T08:17:18.050
> 
> 标签：jakarta-ee, deployment, jboss, jboss7.x, hotdeploy

我是 jboss 的新手，我想像在 tomcat 中一样启用热部署功能。现在，当对 xhtml 页面进行任何更改时，我重建应用程序然后重新部署整个战争，这太多了。

但在 tomcat 中，war 文件被提取，然后我只替换更改 xhtml 文件并立即查看更改。

我想知道如何为 jboss-as-7.1.1.Final 完成相同的行为，而不是在 Eclipse 中。

请告知如何做到这一点，谢谢。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-10-08T16:46:56.227

你也可以在 JBoss 中做同样的事情。该文件应该在 jboss 服务器（独立）目录的 /tmp/vfs/temp*/content* 中。您可以简单地在该目录中找到 xhtml，然后用新的替换。它应该工作！..

看起来还有另一种使用 jsp-configuration development=true 的方法，检查[here](http://middlewaremagic.com/jboss/?p=462)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-20T20:20:35.020

在 web.xml-> jboss 中添加到您的项目中检测到并启用热部署。

```
 <servlet>
            <servlet-name>jsp</servlet-name>
            <servlet-class>org.apache.jasper.servlet.JspServlet</servlet-class>
            <init-param>
                <param-name>development</param-name>
                <param-value>true</param-value>
            </init-param>
            <load-on-startup>3</load-on-startup>
        </servlet> 
```

或者你可以使用新的 jboss 作为 6 它应该是固定的。或者您可以按照此链接说明进行操作：

[https://issues.jboss.org/browse/AS7-659](https://issues.jboss.org/browse/AS7-659)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-04T08:32:31.173

对我来说，完成它的最简单方法是使用 eclipse 并选择一个选项：在服务器上部署。为此，您需要 Eclipse 中的 JBoss 插件。它会自动为您完成。到目前为止，它没有任何问题。唯一的问题是，如果您更改 bean，则需要进行“完整发布”。

# linq - 使用 linq 和 lambda 过滤两个集合

> ID：12723074
> 
> 赞同：1
> 
> 时间：2012-10-04T08:17:41.053
> 
> 标签：linq, join, filter, lambda

我需要按两个集合过滤查询。

我有一个 ID 列表，我需要用它来过滤 linq 查询

集合看起来像这样

```
<table1_id, table2_id> 
```

和contect看起来像这样

```
idList = <1,10>,<2,12> 
```

查询看起来像这样

```
Dim l = (From t1 In Table1
Join t2 In Table2 ON t1.table1_id Equals t2.table2_id
Where idList.Contains(idList.table1_id) and idlist.Contains(idList.table2_id)) 
```

问题是这就像一个交叉连接，所以我得到了所有的组合。

如何使两个集合过滤器像这样查询

```
Select * from
table1 t1 Inner join table2 t2 on t1.ID = t2.ID
where t1.ID in (1,2)
and t2.ID in (10, 12) 
```

这是我的代码中的真实示例：

SQL查询：

```
 Select * from
dbo.v_MARKET_BUSINESS_ROLES mbs
Inner join dbo.SAP_COMPONENT brs
 on mbs.BUSINESS_ROLE_ID = brs.BUSINESS_ROLE_ID
and mbs.erd in ('1','2')
and brs.ID in (10,12)
where 
brs.market_id = 1 
```

代码：

选择角色有 2 个 id 的 1 和 2，所以我只从列表中收集选定的角色

```
Dim businessRolesIDs = (From olc In ctx.organization_level_constraint
                                          Where selectedOrgLevels.Contains(olc.organization_level_id) _
                                                            AndAlso olc.market_id = marketId _
                                          AndAlso selectedRoles.Contains(olc.business_role_id)
                                          Select olc.business_role_id, olc.sap_component_id).Distinct.ToList

here I try to filter by the collection returned above

Dim marketBusinessRolesCollection = (From m In ctx.GetMarketBusinessRolesFromView(marketId) _
                                                    Join bs In ctx.business_role_sap_component On m.C_BUSINESS_ROLE_ID Equals bs.business_role_id _
                                                    Where (From item In businessRolesIDs Select item.business_role_id).Contains(m.C_BUSINESS_ROLE_ID)  _
                                                    And (From item2 In businessRolesIDs Select item2.sap_component_id).Contains(bs.sap_component_id)  _
                                                    And bs.market_id = marketId _
                                                    Select New BusinessRole With _
                                                      { 
                                                         .BusinessRoleId = m.ERD
                                                      }).Distinct.ToList 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-04T08:25:30.863

您必须选择 ID 列表的键和值。我明白这个系列的构建就像一个`List<KeyValuePair<int, int>>`

所以你的代码应该是这样的

```
Dim l =
    From t1 In Table1
    Join t2 In Table2 ON t1.table1_id Equals t2.table2_id
    Where (From item In idList Select item.Key).Contains(t1.table1_id)
    And (From item In idList Select item.Value).Contains(t2.table2_id); 
```

# php - 收到错误消息 PHP 致命错误：调用未定义的方法 Zend_Mail_Storage_Imap::requestAndResponse()

> ID：12723075
> 
> 赞同：0
> 
> 时间：2012-10-04T08:17:43.643
> 
> 标签：php, zend-framework, zend-mail

我是 Zend 框架的新手。我正在开发一个应用程序，通过使用类（我添加到`Zend/Mail/Storage/Imap.php`）搜索 Gmail 收件箱

```
/**
 * do a search request
 *
 * This method is currently marked as internal as the API might change and is not
 * safe if you don't take precautions.
 *
 * @internal
 * @return array message ids
 */
public function search(array $params)
{
    $response = $this->requestAndResponse('SEARCH', $params);
    if (!$response) {
        return $response;
    }

    foreach ($response as $ids) {
        if ($ids[0] == 'SEARCH') {
            array_shift($ids);
            return $ids;
        }
    }
    return array();
} 
```

我这样称呼它：

```
$searchresults = $storage->search(array('search_terms')); 
```

但是每次我尝试运行它时，它都会显示一个错误：

> PHP 致命错误：在第 655 行的 /public_html/test06/Zend/Mail/Storage/Imap.php 中调用未定义的方法 Zend_Mail_Storage_Imap::requestAndResponse()

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-04T08:57:10.090

似乎 requestAndResponse 没有以您调用它的方式定义。我不使用 ZF，但您确定 requestAndResponse 接受您发送的 2 参数。我的意思是（“搜索”，$params）。

# zend-framework - 当客户端也是网站时，带有 oauth 的 Restfull Web 应用程序

> ID：12723080
> 
> 赞同：1
> 
> 时间：2012-10-04T08:18:04.033
> 
> 标签：zend-framework, session, rest, oauth

我正在创建一个包含网站和移动应用程序的解决方案。我将在网站上使用 Zend-Framework 2。所以，为了让它变得更好，我想知道构建它是否是一个好主意：

*   一个 REST Web 服务（使用 zf2）
*   另一个将调用 REST ws 的网站（使用 zf2）
*   将调用 REST ws 的移动应用程序

我将使用 OAuth 进行身份验证和安全性。我的问题是，如果我的网站通过调用 REST ws 获取数据，它必须在每次调用时发出数据库请求以检查令牌，而如果我做一个“普通”网站，我的应用程序将能够使用会话存储连接用户的信息。因为，就我所阅读的内容而言，没有与 OAuth/REST 进行会话这样的事情，因此对于每次调用，我都有一个额外的 sql 请求来检查令牌的有效性。

制作完整的 REST 服务是否仍然是一个好主意，即使是针对网站或拥有一个“普通”网站以及仅针对移动应用程序的 REST 服务 API？

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-10-05T04:48:02.470

Oauth 是一个服务器到服务器的身份验证框架。就像它在移动应用程序和您的 API 服务器、网站与您的 API 服务器等之间一样。您可以采用一种方法，您只为您的网站客户端生成一个访问令牌，而不是为来自网站的每个用户生成多个访问令牌。此访问令牌存储在您的网络服务器与网站中的用户 cookie 中。最终目的是识别您的 REST WS 的所有客户端，并且您的网站是它的客户端之一，也是一个非常受信任的客户端。这样，您可以缓存访问令牌以避免数据库调用（通常缓存时间可以等于或小于令牌到期时间）。请为此探索 oauth 规范中指定的多种授权类型

关于在您的网站中为用户维护会话，它不取决于后端是否是 REST WS，它可以在您的网站中处理

# delphi - Delphi Indy Ping 错误 10040

> ID：12723081
> 
> 赞同：5
> 
> 时间：2012-10-04T08:18:04.713
> 
> 标签：delphi, ping, indy10

我有一小段代码通过 ping 来检查计算机是否还活着。我们曾经有一个有 40 台计算机的房间，我想通过我的程序远程检查它是否还活着。

因此我用 indy 写了一个小 ping 函数

```
function TMainForm.Ping(const AHost : string) : Boolean;
var
  MyIdIcmpClient : TIdIcmpClient;
begin
  Result := True;

  MyIdIcmpClient := TIdIcmpClient.Create(nil);
  MyIdIcmpClient.ReceiveTimeout := 200;
  MyIdIcmpClient.Host := AHost;

  try
    MyIdIcmpClient.Ping;
    Application.ProcessMessages;
  except
    Result := False;
    MyIdIcmpClient.Free;
    Exit;
  end;
  if MyIdIcmpClient.ReplyStatus.ReplyStatusType <> rsEcho Then result := False;

  MyIdIcmpClient.Free;
end; 
```

所以我在家里用我的wifi网络开发了它，一切都很好。

当我重新开始工作时，我进行了测试，但我收到一条错误消息

```
Socket Errod # 10040 Message too long 
```

在工作中，我们有固定的 IP，我和所有的计算机都在同一个子网中。

我试图断开与固定 IP 的连接并连接到 wifi，这当然是 DHCP，而不是在同一个子网中，它工作正常。

我曾尝试在互联网上搜索此错误以及如何解决它，但没有找到太多信息。

当然，我尝试将默认缓冲区大小更改为更大的值，但它没有改变任何东西，我仍然在同一子网内的固定 IP 上收到错误。

**此外，我不知道这是否有助于找到解决方案，但我的代码会处理异常，但在这种情况下，引发错误大约需要 3-4 秒，而超时设置为 200 毫秒。而且我不能在每次 ping 上等待那么久。**

顺便说一句，我使用的是 delphi 2010，我认为它是 indy 10。我也在 XE2 上进行了测试，但同样的错误。

任何的想法

**- - - 编辑 - - -**

**这个问题得到了回答，现在我尝试让这个在多线程中运行，并且我已经为** [Delphi (XE2) Indy (10) Multithread Ping提出了另一个问题](https://stackoverflow.com/questions/12858551/delphi-xe2-indy-10-mutlithread-ping)

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-10-04T09:03:31.453

将`PacketSize`属性设置为`24`：

```
function TMainForm.Ping(const AHost : string) : Boolean;
var
  MyIdIcmpClient : TIdIcmpClient;
begin
  Result := True;

  MyIdIcmpClient := TIdIcmpClient.Create(self);
  MyIdIcmpClient.ReceiveTimeout := 200;
  MyIdIcmpClient.Host := AHost;
  MyIdIcmpClient.PacketSize := 24;
  MyIdIcmpClient.Protocol := 1;
  MyIdIcmpClient.IPVersion := Id_IPv4;

  try
    MyIdIcmpClient.Ping;
    // Application.ProcessMessages; // There's no need to call this!
  except
    Result := False;
    Exit;
  end;
  if MyIdIcmpClient.ReplyStatus.ReplyStatusType <> rsEcho Then result := False;

  MyIdIcmpClient.Free;
end; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2014-02-10T03:10:37.907

对于 XE5 和 Indy10，这仍然是一个问题，即使数据包大小不同。

要回答更神秘的修复：

```
ABuffer := MyIdIcmpClient1.Host + StringOfChar(' ', 255); 
```

这是解决 Indy10 组件中存在错误的事实的“神奇”修复（如果我理解 Remy Lebeau 正确的话）。

我的猜测是这与接收缓冲区的大小有关。为了测试我的理论，我可以使用任何字符，根本不需要包含主机地址。仅使用接收缓冲区所需的尽可能多的字符。我使用这个小代码（C++ Builder XE5）非常成功地进行了 Ping（所有其他值都是默认值）：

```
AnsiString Proxy = StringOfChar('X',IcmpClient->PacketSize);

IcmpClient->Host = Host_Edit->Text;
IcmpClient->Ping(Proxy); 
```

如您所见，我创建了一个与 PacketSize 属性长度相同的字符串。你用什么填充它是微不足道的。

也许这对@RemyLebeau 修复工作有帮助。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-01-22T13:38:56.323

使用此代码

> ABuffer := MyIdIcmpClient1.Host + StringOfChar(' ', 255);
> 
> MyIdIcmpClient.Ping(ABuffer);

# javascript - 通过键入 URL 来阻止访问

> ID：12723085
> 
> 赞同：1
> 
> 时间：2012-10-04T08:18:27.543
> 
> 标签：javascript, html, iis-7.5

我知道这个问题已经发布了好几次了。但我还不能解决我的问题。

我有一个只能通过下载页面下载的 exe。用户应该无法通过键入 exe 的路径来下载它。

我正在使用 IIS 7.5 并在本地托管它。

是否可以使用 IIS 中的 URL 重写模块来实现这一点？（有没有其他简单的方法可以做到这一点）

请帮我。

先感谢您。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-05T08:40:48.547

是的，您可以使用 URL 重写模块。如果您需要停止直接下载，请检查推荐人。如果仅在您浏览另一个页面时出现引荐来源网址。直接键入的 URL 没有引荐来源网址。

# java - 无法将 java 包添加到 MATLAB 中的动态 java 路径

> ID：12723086
> 
> 赞同：-1
> 
> 时间：2012-10-04T08:18:27.357
> 
> 标签：java, matlab, classpath

我想在 MATLAB 中使用[jdde](http://jdde.pretty-tools.com/)。我的电脑上有 pretty-tools-JDDE-1.0.2.jar。这是我在 MATLAB 中的代码：

```
javaaddpath('C:\test\pretty-tools-JDDE-1.0.2.jar');
conversation = com.pretty_tools.dde.client.DDEClientConversation(); 
```

我得到错误：

```
Undefined variable "com" or class "com.pretty_tools.dde.client.DDEClientConversation". 
```

但是，当我调用 javaclasspath 函数时，jar 文件列在“DYNAMIC JAVA PATH”下。为什么我会收到此错误？正确的方法是什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-04T08:24:43.873

JavaDDEx64 看起来像一个找不到的共享库/dll。您需要将其添加到库路径中。如果您有访问权限，一个快速的方法就是在您的 matalbroot()/bin/$arch 文件夹中复制一份（$arch 将是 macos/win64 等）。

如果您没有对 matlabroot 的写入权限，则将“C:\jdde\”添加到现在位于启动文件夹中的 librarypath.txt 的副本中。JavaDDEx64.dll 所在的位置。现在由 MATLAB 找到。

# javascript - 使文本框只有 5 的倍数

> ID：12723090
> 
> 赞同：1
> 
> 时间：2012-10-04T08:18:38.947
> 
> 标签：javascript

例如，如果用户输入数字 1，我正在尝试让文本框向用户发送消息。然后它应该显示一个弹出窗口，说明该产品仅以 5 的倍数提供。

这是我的代码。

```
<script language="JavaScript">
function chk_boxquantity(inField) {
    step3_submit_disable();

    var fVal = inField.value;
    var fBoxQuantity = 5;

    if (mod(fVal, fBoxQuantity) != 5) {
        alert('This product is only available in multiples of '+fBoxQuantity);
        inField.value = Math.ceil(fVal/fBoxQuantity)*fBoxQuantity;
        setTimeout(function() {
            inField.focus();inField.select();gAutoBlur = false;
        }, 10);
    }

    step3_submit_enable();
}
</script> 
```

这是文本字段。

```
<input type="text" onkeypress="return handleEnter(this, event);" 
onblur="chk_boxquantity(this);" name="qty[<?php echo $card['id']; ?>]" 
size="3" /> 
```

所以无论用户点击哪里，它都会弹出消息。虽然这不起作用，有什么想法为什么不呢？

谢谢，

约拿

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-04T08:20:18.947

将您的代码从更改`mod()`为`% operator` [**演示**](http://jsbin.com/anapoy/1/edit)

**从**

```
 if (mod(fVal, fBoxQuantity) != 5) 
```

**到**

```
 if ((fVal % fBoxQuantity) != 0) 
```

**完整功能可能看起来像**

```
function chk_boxquantity(inField)
{
    var fVal = inField.value;
    var fBoxQuantity = 5;

    if ((fVal % fBoxQuantity) !== 0)
    {
     alert('This product is only available in multiples of '+fBoxQuantity); 
      inField.value = Math.ceil(fVal/fBoxQuantity)*fBoxQuantity ;
    }

} 
```

**仅显示所需的代码。**

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-04T08:20:26.177

尝试改变：

```
if (mod(fVal, fBoxQuantity) != 5) { 
```

到：

```
if ((fVal % fBoxQuantity) != 0) { 
```

[您可以在此处](http://www.java2s.com/Tutorial/JavaScript/0040__Operators/Modulus.htm)查看模数运算符的描述。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-04T08:20:47.997

您要检查 mod 操作的其余部分，如果它大于零，则它不能被 5 整除

```
// mod
10 % 5 === 0

// div
10 / 5 === 2 
```

所以，你需要改变你`!= 5`的`!= 0`

# iphone - Xcode 中的 Cordova 错误 - 没有这样的文件或目录

> ID：12723092
> 
> 赞同：6
> 
> 时间：2012-10-04T08:18:43.707
> 
> 标签：iphone, xcode, cordova

我一直在尝试在新计算机上的 Xcode 中创建 Cordova / Phonegap 应用程序。但这似乎不起作用。当我在模拟器或 iPhone 上运行应用程序时，我收到一条错误消息，提示找不到“libCordova.a”。

**1 条错误消息和 5 个问题：**

```
/Users/Tim/Documents/Dropbox/Applicaties/Business/FirstProject/Xcode/FirstProject.xcodeproj
/Users/Tim/Documents/Dropbox/Applicaties/Business/FirstProject/Xcode/FirstProject.xcodeproj Missing "Default-568h@2x.png" launch image
/Users/Tim/Documents/Dropbox/Applicaties/Business/FirstProject/Xcode/FirstProject/Classes/AppDelegate.m
/Users/Tim/Documents/Dropbox/Applicaties/Business/FirstProject/Xcode/FirstProject/Classes/AppDelegate.m:73:25: 'invokeString' is deprecated
/Users/Tim/Documents/Dropbox/Applicaties/Business/FirstProject/Xcode/FirstProject/Classes/MainViewController.m
/Users/Tim/Documents/Dropbox/Applicaties/Business/FirstProject/Xcode/FirstProject/Classes/MainViewController.m:117:15: 'invokeString' is deprecated
/Users/Tim/Documents/Dropbox/Applicaties/Business/FirstProject/Xcode/FirstProject/Classes/MainViewController.m:121:93: 'invokeString' is deprecated
clang: error: no such file or directory: '/Users/Tim/Library/Developer/Xcode/DerivedData/FirstProject-ctanrqwggcfoubbeqbjrfvcqozpg/Build/Products/Debug-iphoneos/libCordova.a' 
```

*   科尔多瓦 2.1.0 版
*   Xcode 版本 4.5.1

我无法在我的计算机上安装最新的 cordova，在 2.0.0 版本上有一个安装程序，但在最新版本中，这已经消失了吗？而且我已经将“仅构建活动架构”设置为“是”，将“构建位置”设置为唯一。

非常感谢您提前。

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-10-05T14:22:34.683

我有完全相同的错误。问题是我没有为这两个项目设置“仅构建活动架构”。您的主要项目和 CordovaLib.xcodeproj。

希望这可以帮助！

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-12-02T08:28:08.217

这解决了我的问题：

*   在 Xcode 中打开您的项目。
*   单击您的项目。
*   在 Targets 下单击您的项目。
*   点击构建阶段选项卡。
*   打开底部附近的“复制捆绑资源”。
*   查找以红色列出的任何资源，然后将它们手动拖放到那里。

问题解决了！

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-09T21:41:30.940

在 CordovaLib 构建设置中。在 Architectures -> Valid Architectures 下，我删除了 armv6。这对我有用！(iphone 4s phonegap 2.2)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-04T08:58:10.997

安装程序已消失，因为不再需要它。您是否按照此处非常有用的入门指南中的*所有步骤进行操作？*[http://docs.phonegap.com/en/2.1.0/guide_getting-started_ios_index.md.html#Getting%20Started%20with%20iOS](http://docs.phonegap.com/en/2.1.0/guide_getting-started_ios_index.md.html#Getting%20Started%20with%20iOS)

# ruby - 将 json 解析为对象 ruby

> ID：12723094
> 
> 赞同：38
> 
> 时间：2012-10-04T08:18:45.263
> 
> 标签：ruby, json

例如，我查看了不同的资源，但仍然对如何将 json 格式解析为自定义对象感到困惑

```
class Resident
  attr_accessor :phone, :addr

  def initialize(phone, addr)
      @phone = phone
      @addr = addr
  end
end 
```

和 JSON 文件

```
{
  "Resident": [
    {
      "phone": "12345",
      "addr":  "xxxxx"
    }, {
      "phone": "12345",
      "addr": "xxxxx"
    }, {
      "phone": "12345",
      "addr": "xxxxx"
    }
  ]
} 
```

将json文件解析为3个常驻对象数组的正确方法是什么？

* * *

## 回答 #1

> 赞同：97
> 
> 时间：2015-09-09T02:48:19.247

今天我正在寻找将 json 转换为对象的东西，这就像一个魅力：

```
person = JSON.parse(json_string, object_class: OpenStruct) 
```

这种方式你可以做，`person.education.school`或者`person[0].education.school`如果响应是一个数组

我把它留在这里是因为可能对某人有用

* * *

## 回答 #2

> 赞同：39
> 
> 时间：2012-10-04T08:55:28.883

下面的代码更简单：

```
require 'json'

data = JSON.parse(json_data)
residents = data['Resident'].map { |rd| Resident.new(rd['phone'], rd['addr']) } 
```

* * *

## 回答 #3

> 赞同：8
> 
> 时间：2017-07-21T06:43:30.800

如果您正在使用`ActiveModel::Serializers::JSON`，您可以调用`from_json(json)`，您的对象将使用这些值进行映射。

```
class Person
  include ActiveModel::Serializers::JSON

  attr_accessor :name, :age, :awesome

  def attributes=(hash)
    hash.each do |key, value|
      send("#{key}=", value)
    end
  end

  def attributes
    instance_values
  end
end

json = {name: 'bob', age: 22, awesome: true}.to_json
person = Person.new
person.from_json(json) # => #<Person:0x007fec5e7a0088 @age=22, @awesome=true, @name="bob">
person.name # => "bob"
person.age # => 22
person.awesome # => true 
```

* * *

## 回答 #4

> 赞同：4
> 
> 时间：2012-10-04T08:35:21.380

```
require 'json'

class Resident
    attr_accessor :phone, :addr

    def initialize(phone, addr)
        @phone = phone
        @addr = addr
    end
end

s = '{"Resident":[{"phone":"12345","addr":"xxxxx"},{"phone":"12345","addr":"xxxxx"},{"phone":"12345","addr":"xxxxx"}]}'

j = JSON.parse(s)

objects = j['Resident'].inject([]) { |o,d| o << Resident.new( d['phone'], d['addr'] ) }

p objects[0].phone
"12345" 
```

* * *

## 回答 #5

> 赞同：3
> 
> 时间：2016-01-18T02:57:04.790

我们最近发布了一个 Ruby 库`static_struct`来解决这个问题。[检查出来](https://github.com/mezuka/static_struct)。

# sql-server-2008 - 在sql中同步表

> ID：12723098
> 
> 赞同：1
> 
> 时间：2012-10-04T08:19:17.877
> 
> 标签：sql-server-2008, sql-server-2005

我在 sql server 2005 中有 7 个表，它们基于主键和外键相互关联。我需要创建一个新表，其中包含所有 7 个表的列。我需要这个新表每次都与主要的 7 个表同步。在 Sql server 2005 或 2008 中执行此操作的最佳方法是什么。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-04T08:53:14.760

1.创建一个像这样的新表：

```
select * into newtable from 
t1 join t2 on t1.id=t2.id
...
t6 join t7 on t6.id=t7.id 
```

插入：这里 t 是修改数据的 7 个表之一

```
2.insert into newtable(col1 col2..)
  select col1,col2..from t 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-04T08:29:28.027

触发器是您应该使用的基于同一个表或其他表中的事件自动更新表。

请参阅此[链接上的示例](http://www.dbforums.com/oracle/1653067-how-create-trigger-updates-row-another-table.html)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-04T08:47:54.697

您将必须创建一个新表，该表将包含 7 个表的所有列，并根据 7 个表的任何更改在公用表中插入/更新。

这个过程不影响过程的速度。

另一种方法是创建一个包含 7 个表列的视图。

# jsf-2 - Mojarra 2.1.14 闪存范围消息并重定向到不同的路径

> ID：12723100
> 
> 赞同：2
> 
> 时间：2012-10-04T08:19:32.007
> 
> 标签：jsf-2, primefaces, mojarra, omnifaces, flash-scope

据此： http: [//java.net/jira/browse/JAVASERVERFACES-2136](http://java.net/jira/browse/JAVASERVERFACES-2136) flash-“scoped”消息应该在重定向到不同路径上的页面后仍然存在。我想在我的应用程序中使用这样的东西所以我从这里下载 javax.faces-2.1.14-20121003.074348-10 快照 [https://maven.java.net/content/repositories/snapshots/org/glassfish/javax.faces/2.1.14-SNAPSHOT/](https://maven.java.net/content/repositories/snapshots/org/glassfish/javax.faces/2.1.14-SNAPSHOT/)进行测试。

我的情况是这样的：我在根目录中有一个页面（称为 test.xhtml），在调用构造函数期间在视图范围的支持 bean 中进行检查并有条件地使用 Omnifaces 设置消息`Message.addFlashGlobalInfo`并重定向到 index.xthml也在根目录中使用 Omnifaces `Faces.Redirect()`（感谢 BalusC！）。在 index.xhtml 我有一个 Primefaces

`<p:messages id="msg" showDetail="false" autoUpdate="true" />`

我在其他页面中也使用了上述相同的“配置”，当重定向到称为 bean 方法的同一页面时，它工作正常。

那么消息不应该在不同的路径重定向中幸存下来还是我误解了这个问题？也许这里还有其他问题？

提前致谢！（我期待听到 BalusC 对此的意见 :)）

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-04T15:02:15.690

> *我只是用来调用一个确实设置消息和重定向的init方法，但再次没有消息出现！所以我认为 PostConstruct 也不会起作用..*

确实，`<f:event type="preRenderView">`设置快讯为时已晚。当 JSF 当前处于渲染响应阶段时，无法创建 flash 范围。您基本上需要在渲染响应阶段*之前设置 flash 消息。*尽管 name `preRenderView`，这个事件实际上是在渲染响应阶段（最开始）*期间触发的。*

`@PostConstruct` *可能*会准时，前提是在渲染响应期间*未调用它。*然而，这不能很好地与`<f:viewParam>`.

要解决此问题，因为您已经在使用 OmniFaces，只需使用[`<f:event type="postInvokeAction">`](http://showcase.omnifaces.org/eventlisteners/InvokeActionEventListener).

```
<f:metadata>
    <f:viewParam name="some" value="#{bean.some}" />
    <f:event type="postInvokeAction" listener="#{bean.init}" />
</f:metadata> 
```

### 也可以看看：

*   [JSF - 从@PostConstruct 重定向后保留面孔消息](https://stackoverflow.com/questions/12708156/jsf-keep-faces-messages-after-redirect-from-postconstruct/12729861#12729861)
*   [使用 ExternalContext.redirect() 将人脸消息添加到重定向页面](https://stackoverflow.com/questions/10595760/adding-faces-message-to-redirected-page-using-externalcontext-redirect)

# asp.net-mvc - 如何在 ASP.NET MVC 路由中从子域转换为 RESTful url

> ID：12723101
> 
> 赞同：0
> 
> 时间：2012-10-04T08:19:38.023
> 
> 标签：asp.net-mvc, asp.net-mvc-routing

我想知道我在 MVC 路由中有哪些选项可以将传入的请求重定向/翻译到子域 url 并将它们重定向到新的 RESTful 方案。

```
OLD
http://conv.mc.siteexample.com/v01/?token=AB03959BM23DFC3
http://click.mc.siteexample.com/?cd=1&sd=828&dd=1

NEW
http://siteexample.com/api/uri/conv/?token=AB03959BM23DFC3
http://siteexample.com/api/uri/click/?cd=1&sd=828&dd=1 
```

*还有一个侧面说明，我实际上正在使用 MVC WebAPI 路由，但我确信这并不重要。*

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-04T08:24:10.733

您可以查看 IIS 中的[Url Rewrite Module](http://www.iis.net/downloads/microsoft/url-rewrite)。然后在您的 Web API 应用程序中，您只需使用标准路由。

# eclipse - 如何从java程序签入或签出文件到svn

> ID：12723105
> 
> 赞同：0
> 
> 时间：2012-10-04T08:19:53.047
> 
> 标签：eclipse, svn

我想通过Java程序从/向SVN签入/签出文件。你能指导我如何做到这一点。我在看 SVNKit。

更新：eclipse如何对SVN进行签入/签出？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-04T08:28:44.920

您应该阅读[SVNKit 文档，尤其是有关](http://svnkit.com/documentation.html)[提交到存储库](http://wiki.svnkit.com/Committing_To_A_Repository)和[从存储库接收更改](http://wiki.svnkit.com/Updating_From_A_Repository)的示例。

请记住，尽管支持锁，但 SVN 并不专门用于签入或签出模型。如果其他客户端正在访问同一个存储库，您也需要能够合并更改。

# c++ - 错误 C3861：“initNode”：找不到标识符

> ID：12723107
> 
> 赞同：2
> 
> 时间：2012-10-04T08:20:15.187
> 
> 标签：c++, c, compiler-errors

我收到以下编译错误：

> 错误 C3861：“initNode”：找不到标识符”

下面是代码：

```
# include <conio.h>
# include "stdafx.h"
# include <stdlib.h>

struct node{
    node * next;
    int nodeValue;

};

node*createList (int value)  /*Creates a Linked-List*/
{
    node *dummy_node = (node*) malloc(sizeof (node));
    dummy_node->next=NULL;
    dummy_node->nodeValue = value;
    return dummy_node;
}

void addFront (node *head, int num ) /*Adds node to the front of Linked-List*/
{
    node*newNode = initNode(num);   
    newNode->next = NULL;
    head->next=newNode;
    newNode->nodeValue=num;
}

void deleteFront(node*num)   /*Deletes the value of the node from the front*/
{
    node*temp1=num->next;

    if (temp1== NULL) 
    {
        printf("List is EMPTY!!!!");
    }
    else
    {
        num->next=temp1->next;
        free(temp1);
    }

}

void destroyList(node *list)    /*Frees the linked list*/
{
    node*temp;
    while (list->next!= NULL) 
    {
        temp=list;
        list=temp->next;
        free(temp);
    }
    free(list);
}

int getValue(node *list)    /*Returns the value of the list*/
{
    return((list->next)->nodeValue);
}

void printList(node *list)   /*Prints the Linked-List*/
{

    node*currentPosition;
    for (currentPosition=list->next; currentPosition->next!=NULL; currentPosition=currentPosition->next)  
    {`enter code here`
        printf("%d \n",currentPosition->nodeValue);
    }   
    printf("%d \n",currentPosition->nodeValue);

}

node*initNode(int number) /*Creates a node*/
{
    node*newNode=(node*) malloc(sizeof (node));
    newNode->nodeValue=number;
    newNode->next=NULL;
    return(newNode);
} 
```

如何解决此错误？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-04T08:22:07.027

发生错误是因为`initNode()`在调用之前不可见。在第一次使用之前更正放置 的声明`initNode()`或将其定义移动到。

* * *

该代码看起来像 C，但您似乎正在使用 C++ 编译器来编译它（因为使用`node`and not`struct node`似乎不会导致编译器失败，除非您没有在帖子中报告这些错误）。如果您使用 C 编译器（可以通过`.c`使用 Visual Studio 在源文件上添加扩展名来轻松实现），则无需强制转换`malloc()`. 请参阅[ISO C 和 ISO C++ 之间的不兼容性](http://david.tribble.com/text/cdiffs.htm)，这是在回答问题的答案时提供的链接，[我可以期待使用 C++ 编译器编译 C 代码吗？](https://stackoverflow.com/questions/861517/what-issues-can-i-expect-compiling-c-code-with-a-c-compiler)

# php - 字符串、正则表达式和文件

> ID：12723109
> 
> 赞同：1
> 
> 时间：2012-10-04T08:20:15.703
> 
> 标签：php, regex, string, file, loops

```
<?php 
    $iprange = array( 
        "^12\.34\.", 
        "^12\.35\.", 
        ); 
    foreach($iprange as $var) { 
        if (preg_match($var, $_SERVER['REMOTE_ADDR'])) { 
```

我正在寻找一个列表，它将构成数组中的每个值。让我们称之为它`iprange.txt`，我将从中提取变量`$iprange`。我也会用新的范围更新文件，但如果这是 php 中需要的东西，我也想将这些字符串转换为正则表达式，就像上面的例子一样。

如果你能帮助我解决以下两个问题：

1.  我知道我会以某种方式使用数组包含，但我不确定如何实现它。

2.  如果您认为 regexp 是一个好主意并且没有其他选择，我想运行一个 cron 来更新文本文件并将其转换为可以在上述示例中使用的 regexp。我知道如何在 directadmin gui 中应用 cron，但我不知道 cronned 文件会是什么样子。

编辑 - - - - - - - - - - - -

谢谢 Mamsaac，非常有帮助，现在我被困在与案例和 ob_file_callback 相关的进一步问题上，如果我在这里开始谈论它们，我将一无所获，但可以在此处关注它们：[ob_file_callback 和 fwrite 的问题](https://stackoverflow.com/questions/12727133/problems-with-ob-file-callback-and-fwrite)

至于这里的这个线程，为了保持话题，我想问你如何在你建议的数组中包含整个文件？

如果我不必将字符串转换为正则表达式，我就不再需要您正在考虑的 cronjob。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-04T09:32:56.223

如果你同意的话，我会提出一种不同的方法来解决这个问题。

您可以尝试`ip2long()`为此使用函数，从而更快地进行比较。这样做的好处是您可以对每个范围非常具体（并且以自然的方式，范围意味着“两个数字之间”。

所以，你可以这样做：

```
$ranges = array('10.20.8.0-10.20.14.254', '192.168.0.2-192.168.0.254');
foreach ($ranges as $iprange) {
    list($lowerip, $highip) = explode('-', $iprange);
    $remoteip = ip2long($_SERVER['REMOTE_ADDR']);
    if (ip2long($lowerip) <= $remoteip && $remoteip <= ip2long($highip)) {
        //it is within this range! I don't know what you want to do with it.
    }
} 
```

您也可以使用网络掩码，但我将把它留给您作为练习。为此，您将使用按位运算进行一些操作。否定掩码，然后使用和按位和操作......不是你要求的！我可能会在我睡觉后更新这个。

关于文件和 cronjob。我绝对不确定您为什么要为此使用 cronjob。您如何决定将接受哪些新范围？

您始终可以读取文件（如果您愿意，可以使用 file_get_contents 并使用

```
$ranges = explode("\n", file_get_contents("filename")) ; 
```

然后你就可以准备好你的阵列了。（请注意，我什至将其称为与上面的块代码相同）。如果文件变得非常大，请避免使用上述方法并继续使用 fopen 和 fgets 方法：

```
$file = @fopen("filename", "r"); //suppressing error messages, probably don't want that
if (!$file) { 
    //for some reason the file didn't open. Do error reporting or checking
}
$ranges = array();
while (($line = fgets($file)) !== false) {
    $ranges[] = $line;
} 
```

好像我只是想念你为什么要使用 cronjob。请详细说明您决定添加新 IP 范围的标准。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-05T07:30:25.860

```
 $ranges = array('12.34.1.0-12.34.14.254', '192.168.0.2-192.168.0.254');
foreach ($ranges as $iprange) {
    list($lowerip, $highip) = explode('-', $iprange);
    $remoteip = ip2long($_SERVER['REMOTE_ADDR']);

    if (ip2long($lowerip) <= $remoteip && $remoteip <= ip2long($highip)) {
    }
}
    header("LOCATION: page1.php");
    }
else
    {
    header("LOCATION: page2.php");
    }
?> 
```

我已经隔离了 if else 并且效果很好。我还在我的 if else 之前和之后都将两个 '}' 放在了脚本的末尾，但没有运气。

# xml - 同步两个 MS-ACCESS 2010 ACCDB 文件的最佳方式 不使用编程

> ID：12723117
> 
> 赞同：0
> 
> 时间：2012-10-04T08:20:30.530
> 
> 标签：xml, ms-access, synchronization, replication

这是我的情况：

两个不同城市的两台计算机使用一个 MS-ACCESS .accdb 文件，其中计算机#1 用于数据输入，计算机#2 用于使用数据和报告以及...。

我需要找到在这两台计算机之间同步 .accdb 文件的最佳方法，而不会丢失任何数据，当然也不会出现任何重复。请注意，此 .accdb 中有 20 多个表，并且都有一个名为“ID”的字段，类型为“AutoNumber”。

你有什么建议？以 xml 格式从计算机#1 导出数据并导入到计算机#2 或任何其他方式？

我期待着您的有用答案。

感谢您抽出时间。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-04T09:29:50.863

确保您使用的是拆分数据库，将数据从城市 1 通过电子邮件发送到城市 2，如有必要，请附上表格，如果名称未更改并且您之前已链接，则不需要。

[如何在 Microsoft Access 中手动拆分 Access 数据库](http://support.microsoft.com/kb/304932)
[导入或链接到另一个 Access 数据库中的数据](http://office.microsoft.com/en-us/access-help/import-or-link-to-data-in-another-access-database-HA001227658.aspx)

# javascript - 在 URL 中隐藏 index.html

> ID：12723121
> 
> 赞同：1
> 
> 时间：2012-10-04T08:20:45.180
> 
> 标签：javascript, html

我刚刚看到网站[The Geek Designer](http://thegeekdesigner.com/)并喜欢他的 URL。当您单击导航点时，例如关于，URL 显示`/about/`。最后没有`index.html`。
所以我自己试了一下：
我创建了一个目录，里面只有一个 index.html 文件。并创建超链接：
`<a href="http://www.abc.com/about/>`
但 URL 显示`/about/index.html`！

那么如何隐藏 index.html 呢？**我不使用 PHP，也无法编辑 .htaccess 文件！**

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-04T09:33:54.187

如果您使用的是 Apache，这可能会帮助您 [mod_rewrite：URL 重写文章初学者指南](http://www.sitepoint.com/guide-url-rewriting/)

如果您是 htaccess 文件，则添加

```
RewriteEngine On
RewriteBase /
RewriteCond %{SCRIPT_FILENAME} !-f
RewriteCond %{SCRIPT_FILENAME} !-d
RewriteRule ^(.*)$ $1.html [NC,L] 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-04T09:07:42.833

也许您可以在 .htaccess 文件中尝试 URL 重写？

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2014-02-18T19:40:00.380

您在服务器上创建文件夹并将索引放在那里（包含所有需要的文件）。例如：“www.example.com/prices”，例如“prices”是一个文件夹。它不会在地址栏中显示 index.html。

# java - java字符串中来自数据库的数据不同

> ID：12723125
> 
> 赞同：0
> 
> 时间：2012-10-04T08:20:54.277
> 
> 标签：java, jsp, resultset

这是我在 SQL Developer 工具中查看时的数据

```
introduction
topic 1

topic end 
```

在我使用 ResultSet 阅读后，

```
ResultSet result = stmt.executeQuery();
result.getString("description") 
```

并在 JSP 页面中显示为

```
<bean:write name="data" property="description" /> 
```

但它会像这样显示

```
 introduction topic 1 topic end 
```

如何保持与 SQL Developer 中的显示相同？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-04T08:23:13.947

> 如何保持与 SQL Developer 中的显示相同？

数据可能包含换行符，例如“\r\n”或“\n”。如果您查看 JSP 的*源代码*，您可能会在那里看到它们。*但是，HTML 不会出于显示*目的将它们视为换行符- 您需要使用`<br />`标记，或者将每一行放在单独的段落中，或类似的东西。

基本上，我认为这根本不是数据库问题——我认为这是 HTML 问题。您可以尝试在本地编辑并在浏览器中显示的静态 HTML 文件。一旦您知道要生成的 HTML，*就*可以将其集成到您的 JSP 中。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-04T08:23:45.310

HTML 中不保留换行符。您需要告诉浏览器它已预先格式化：

```
<pre>
    <bean:write name="data" property="description"/>
</pre> 
```

或者用 HTML 换行符替换换行符。有关示例，请参[见此问题](https://stackoverflow.com/questions/58054/how-can-i-replace-newline-characters-using-jsp-and-jstl)。

# ios - 应用程序到后台 IOS 时保持加速度计运行

> ID：12723133
> 
> 赞同：4
> 
> 时间：2012-10-04T08:21:22.003
> 
> 标签：ios, background, accelerometer

我在 IOS 中使用加速度计，我希望它在后台模式下运行。

我尝试这样使用`CMMotionManager`，但没有奏效：

```
CMMotionManager*manager= [[CMMotionManager alloc] init];
if(!manager.accelerometerAvailable) {
    NSLog(@"Accelerometer not available");
} else {
    manager.accelerometerUpdateInterval = 0.1;
    NSOperationQueue *motionQueue = [[NSOperationQueue alloc] init];

    [manager startAccelerometerUpdatesToQueue: motionQueue withHandler:
     ^(CMAccelerometerData *data, NSError *error) {
         NSLog(@"Accelerometer data: %@", [data description]);
     }
     ];
} 
```

我怎样才能做到这一点？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-01T04:09:31.737

不确定这是否能解决您的问题，但看看文档（[http://developer.apple.com/library/ios/#documentation/iphone/conceptual/iphoneosprogrammingguide/ManagingYourApplicationsFlow/ManagingYourApplicationsFlow.html](http://developer.apple.com/library/ios/#documentation/iphone/conceptual/iphoneosprogrammingguide/ManagingYourApplicationsFlow/ManagingYourApplicationsFlow.html)）说：

“实施长时间运行的后台任务

对于需要更多执行时间来实现的任务，您必须请求特定权限才能在后台运行它们而不会被挂起。在 iOS 中，只允许特定类型的应用程序在后台运行：

1.  在后台向用户播放有声内容的应用程序，例如音乐播放器应用程序

2.  让用户随时了解其位置的应用程序，例如导航应用程序

3.  支持互联网协议语音 (VoIP) 的应用程序

4.  需要下载和处理新内容的报亭应用

5.  从外部配件接收定期更新的应用程序

实现这些服务的应用程序必须声明它们支持的服务并使用系统框架来实现这些服务的相关方面。声明服务让系统知道您使用了哪些服务，但在某些情况下，实际上是系统框架阻止了您的应用程序被挂起。”

不确定您是否尝试使用加速度计来执行任何这些操作（也许与蓝牙设备通信？），但如果是这样，您需要在应用程序中声明您支持的服务。为此，您需要将 UIBackgroundModes 键添加到 Info.plist 中，然后添加一个包含您尝试使用的服务的相关字符串的数组。有关字符串的完整列表，请参阅上面链接的文档页面。

如果您*不*尝试使用加速度计来做任何这些事情，那么看起来您可能不走运。虽然我很想在那里犯错..（有人吗？）

# javascript - 在 ipad 上用手指在 html 中绘图？

> ID：12723134
> 
> 赞同：2
> 
> 时间：2012-10-04T08:21:32.393
> 
> 标签：javascript, ipad, html, canvas, touch

我正在尝试用手指在画布元素中书写。它适用于桌面浏览器，但不适用于 ipad。
我也尝试使用 touchstart、touchend、touchmove 事件，但它在 ipad 上不起作用。

```
var pizarra_canvas
var pizarra_context

function init(){            
    pizarra_canvas = document.getElementById("pizarra");
    pizarra_context = pizarra_canvas.getContext("2d");
    pizarra_context.strokeStyle = "#000";
    pizarra_canvas.addEventListener('mousedown',empezarPintar,false);
    pizarra_canvas.addEventListener('mouseup',terminarPintar,false);
    }   

function empezarPintar(e){
pizarra_context.beginPath();
pizarra_context.moveTo(e.clientX-pizarra_canvas.offsetLeft,e.clientY-pizarra_canvas.offsetTop);
pizarra_canvas.addEventListener('mousemove',pintar,false)
}

function terminarPintar(e){
pizarra_canvas.removeEventListener('mousemove',pintar,false);
}

function pintar(e) {
pizarra_context.lineTo(e.clientX-pizarra_canvas.offsetLeft,e.clientY-pizarra_canvas.offsetTop);
pizarra_context.stroke();
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-04T08:42:31.953

您需要取消默认事件（即滚动）。此外，最好在文档上触发 mouseup/touchend，因为如果您离开拖动区域并释放按钮，那么画布不知道它应该停止绘制。

```
var pizarra_canvas
var pizarra_context

function init(){            
    pizarra_canvas = document.getElementById("pizarra");
    pizarra_context = pizarra_canvas.getContext("2d");
    pizarra_context.strokeStyle = "#000";
    pizarra_canvas.addEventListener('mousedown',empezarPintar,false);
    pizarra_canvas.addEventListener('touchstart',empezarPintar,false);
    document.addEventListener('mouseup',terminarPintar,false);
    document.addEventListener('touchend',terminarPintar,false);
    }   

function empezarPintar(e){
  e.preventDefault();
  pizarra_context.beginPath();
  pizarra_context.moveTo(e.pageX-pizarra_canvas.offsetLeft,e.pageY-pizarra_canvas.offsetTop);
  pizarra_canvas.addEventListener('mousemove',pintar,false)
  pizarra_canvas.addEventListener('touchmove',pintar,false)
}

function terminarPintar(e){
  e.preventDefault();
  pizarra_canvas.removeEventListener('mousemove',pintar,false);
  pizarra_canvas.addEventListener('touchmove',pintar,false)
}

function pintar(e) {
  e.preventDefault();
  pizarra_context.lineTo(e.clientX-pizarra_canvas.offsetLeft,e.clientY-pizarra_canvas.offsetTop);
  pizarra_context.stroke();
}
init(); 
```

此外，您的 css 在触摸设备上应该有这样的东西：

```
body, html {
  height: 100%;
  overflow: hidden;
}​ 
```

# python - 哪个是标准的posix方式：正则表达式中的双\或单\？

> ID：12723135
> 
> 赞同：-3
> 
> 时间：2012-10-04T08:21:37.290
> 
> 标签：python, r, shell, posix

获取以 . ，你可以这样做：
1.R

```
list.files(path='/home/test', all.files=TRUE, pattern="\\.$") 
```

或者

```
list.files(path='/home/test', all.files=TRUE, pattern=".+\\.$") 
```

必须在 R 中加倍 \ ，既不能使用也`.+\.$` 不能使用`\.$`

2.python

```
import os
import re
for   root,   dirs,   files   in   os.walk("/home/test"):
    for file in files:
        if re.search(".+\.$",file):
            print file 
```

可以 在 python中使用`.+\\.$` or 。`\.$``\\.$`

3.外壳

```
find /home/test  -regex  ".+\.$" 
```

也可以在 shell 中使用 ".+\.$"

我想知道1.which 和
之间的 posix 方式 ？ 2.为什么我不能 在shell中使用？`.+\\.$``.+\.$`
`find /home/test -regex "\.$"`

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-04T11:21:26.363

您键入的内容与正则表达式引擎最终看到的内容之间存在差异。

可能有两个问题：

*   我的工具（R、Python、find）理解什么风格的正则表达式？

    例如，如果您使用 Python；你应该问`re`模块支持什么语法？

*   如何输入正则表达式？

    例如，`".+\.$"`in`find -regex ".+\.$"`首先由 shell 解释。所以问题变成了你的shell如何解释`".+\.$"`？一旦你回答了它，你可以问什么正则表达式语法`find`支持？

[POSIX 正](http://pubs.opengroup.org/onlinepubs/9699919799/basedefs/V1_chap09.html)则表达式期望模式中有一个反斜杠`\.`（以匹配文字点），但要在特定环境中输入它，您可能需要两个反斜杠，例如，在 Python 中`"\\."`并且`r"\."`是相同的。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-04T09:00:14.480

你甚至读过`?regexp`吗？它写在那里。据我所见，使用了“POSIX 1003.2”正则表达式。

# android - 有什么方法可以清除已经从安卓设备手动捕获的位置详细信息？

> ID：12723139
> 
> 赞同：5
> 
> 时间：2012-10-04T08:21:46.847
> 
> 标签：android, gps, location, android-2.2-froyo, android-location

我正在开发一个 android 应用程序，它处理使用 gps 捕获的位置坐标。

我还获得了最后一次知道的位置详细信息（通过“ `locationManager.getLastKnownLocation(LocationManager.GPS_PROVIDER`”）；

它工作正常。但我需要再次检查它。我需要手动**清除已经捕获的位置**，然后我需要再次检查它。

**有什么方法可以手动清除已经从 android 设备捕获的位置详细信息**（例如转到设置菜单并执行其他过程）。

我正在使用具有**sdk>=android2.2**的 android 设备。

欢迎您的所有想法。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2017-10-17T05:49:35.417

好吧，请尝试以下链接，它可能会有所帮助：

[链接到解决方案](https://stackoverflow.com/a/46783266/1400290)

详细信息：我刚刚禁用了 GPS，然后重新启动了 Android 手机，我发现 locationManager.getLastKnownLocation 为位置返回 NULL

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-15T05:14:38.913

我找到它了。
我们无法清除 gps 捕获的位置。因为它在设备的内部存储器中。
我们无法控制它。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2021-01-16T17:33:59.850

没有什么对我有用。但是我在关闭它后在位置找到了这个设置，应用程序的最后一个位置为空

[![在此处输入图像描述](../Images/67e1745f97f42c16bdd76283b3fbfb09.png)](https://i.stack.imgur.com/Obksf.png)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2019-04-11T15:42:25.743

以上答案都不适合我。但是，以下步骤完成了：

1.  在您的 Android 设备上，导航至“位置 > Google 位置记录”并选择您的 Google 帐户。
2.  点击“管理活动”。您将被重定向到 Google 地图应用程序。
3.  在谷歌地图中，​​点击“设置”
4.  向下滚动到“位置设置”部分，然后单击“删除所有位置记录”
5.  然后清除应用程序的缓存

* * *

## 回答 #5

> 赞同：-2
> 
> 时间：2012-10-04T08:31:54.107

您可以使用以下代码清除 lat 和 log 值，以便清除您的位置详细信息。

您需要在 MyLocationManager 中添加如下所示的两个方法，这将在您调用 Activity 类的 onPause 方法时清除您的 lat 和 long 值。

```
public  setMyLatitude(double paramLat) {
       this.myLat=paramLat;
  }

public  setMyLongitude(double paramLong) {
     this.myLon=paramLong;
} 
```

现在在您的应用程序关闭时调用此 set 方法，这意味着

```
 @Override
  protected void onDestroy() {
    // TODO Auto-generated method stub
 //Call Set Method from Here ,set them to initial Value     
      super.onDestroy();
} 
```

* * *

## 回答 #6

> 赞同：-2
> 
> 时间：2012-10-04T08:46:39.880

只需转到设置--->应用程序--->管理应用程序--->单击您的应用程序--->然后单击清除缓存和数据...。

# c++ - 如何在 MFC 中设置对话框的默认大小（以像素为单位）

> ID：12723142
> 
> 赞同：3
> 
> 时间：2012-10-04T08:21:56.253
> 
> 标签：c++, mfc, dialog

我想以像素为单位设置对话框的默认大小，比如 640 像素宽和 384 像素高。我的意思`default`是，当第一次`CXXXDlg::OnSize(UINT nType, int cx, int cy)`调用时，值为`cx`640，值为`cy`384。场景对话框的默认大小以对话框为单位，我可以使用[MapDialogRect()](http://msdn.microsoft.com/en-us/library/ms645502.aspx)来转换对话框单位到像素，我该如何做相反的事情？和可以设置对话框的大小，但不能设置`MoveWindow()`默认**大小**。我也尝试过这样的[GetDialogBaseUnits()](http://msdn.microsoft.com/en-us/library/ms645475%28v=vs.85%29.aspx)：`SetWindowPos()`

 **```
DWORD dw = GetDialogBaseUnits();
WORD m_duXx4 = LOWORD(dw);
WORD m_duYx8 = HIWORD(dw);
int dialogUnitX = MulDiv(640, 4, m_duXx4);
int dialogUnitY = MulDiv(384, 8, m_duYx8); 
```

原来`dialogUnitX`是 is`320`和`dialogUnitY`is `192`，但是当我将对话单元设置为 时`320 * 192`，我得到的`CXXXDlg::OnSize(UINT nType, int cx, int cy)`不是`640 * 384`but `560 * 336`。有任何想法吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-07-23T23:21:24.377

一个窗口由一个*客户区*和一个*非客户区*组成。

*客户区*是应用程序显示输出（例如文本或图形）的窗口的一部分。

标题栏、菜单栏、窗口菜单、最小化和最大化按钮、调整边框和滚动条统称为窗口的*非客户区*。

*Window Rect*指定包含整个窗口的区域。它包括客户区和非客户区。可以通过调用[`GetWindowRect`](http://msdn.microsoft.com/en-us/library/windows/desktop/ms633519.aspx)（或其 MFC 等效项）来检索它。它也用作函数的输入，如[`MoveWindow`](http://msdn.microsoft.com/en-us/library/windows/desktop/ms633534.aspx)or [`SetWindowPos`](http://msdn.microsoft.com/en-us/library/windows/desktop/ms633545.aspx)。

*Client Rect*是窗口中未被非客户区占用的区域。可以调用查询[`GetClientRect`](http://msdn.microsoft.com/en-us/library/windows/desktop/ms633503.aspx)。客户端矩形维度被传递给[`WM_SIZE`](http://msdn.microsoft.com/en-us/library/windows/desktop/ms632646.aspx)消息处理程序。

如果应用程序需要其客户区的特定大小，它可以通过调用[`AdjustWindowRect`](http://msdn.microsoft.com/en-us/library/windows/desktop/ms632665.aspx)或计算相应的窗口矩形[`AdjustWindowRectEx`](http://msdn.microsoft.com/en-us/library/windows/desktop/ms632667.aspx)。

窗口矩形通常以*屏幕坐标*表示，而客户端矩形使用*客户端坐标*。两个坐标系都代表设备像素。屏幕坐标的原点位于主显示器的左上角，客户端坐标的原点位于客户区的左上角。要在应用程序使用的坐标系之间转换[`ClientToScreen`](http://msdn.microsoft.com/en-us/library/windows/desktop/dd183434.aspx)或[`ScreenToClient`](http://msdn.microsoft.com/en-us/library/windows/desktop/dd162952.aspx)。

*对话模板以对话模板单位*指定尺寸和位置。对话框模板单元与对话框的字体直接相关。要在应用程序调用的对话框模板单元和设备像素之间进行转换[`MapDialogRect`](http://msdn.microsoft.com/en-us/library/windows/desktop/ms645502.aspx)。没有 API 调用来计算反向。应用程序必须手动执行计算：

```
width  = MulDiv(width,  4, baseunitX);
height = MulDiv(height, 8, baseunitY); 
```

如果应用程序想要动态限制窗口大小，它可以处理消息并使用所需尺寸[`WM_GETMINMAXINFO`](http://msdn.microsoft.com/en-us/library/windows/desktop/ms632626.aspx)填充结构。[`MINMAXINFO`](http://msdn.microsoft.com/en-us/library/windows/desktop/ms632605.aspx)当窗口的大小或位置即将改变时，此消息将发送到窗口。**

# php - PHP显示图像不起作用

> ID：12723143
> 
> 赞同：0
> 
> 时间：2012-10-04T08:21:57.253
> 
> 标签：php, html, image, user-profile

您好，我有一个网站，可以向用户显示他们自己的个人资料图片。但我无法这样做，我已经构建了一个代码，但它无法正常工作并给出错误，`Parse error: syntax error, unexpected T_CONSTANT_ENCAPSED_STRING in /home/u522159750/public_html/users/myaccount.php on line 156`即`$sql = mysqli_query($link, "SELECT id, name, avatar FROM users WHERE id="'.$id.'" ") ;`任何人都可以建议我可能是什么原因。显示图像的代码如下---

```
 <p>
 <?php
 //We check if the users ID is defined

$db_host = "xxxxxxxxxxxx"; 
$db_username = "xxxxxxxxxxxxxx"; 
$db_password = "xxxxxxxxx"; 
$db_database = "xxxxxxxxxxxxxx"; 

$link = mysqli_connect($db_host,$db_username,$db_password) or die("Cannot connect"); 
mysqli_select_db($link, $db_database) or die("Cannot select the database");
$sql = mysqli_query($link, "SELECT id, name, avatar FROM users WHERE id="'.$id.'" ") ;
while($result = mysqli_fetch_object($sql)):
<a href="http://www.mysite.tk/users/myaccount.php"> <img src="<?php echo $result->avatar; ?>" alt="<?php echo $result->name; ?>" width="200" height="300" /></a>
?> </p>
<?php   endwhile; ?> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-07-28T10:39:29.937

我不会向您展示代码或示例，但这些建议可能有用：

db 中的头像列需要什么？它是否采用图像名称或 name.extension 或 location/name.extension

如果它只需要名称：那么您必须在 php 示例中定义位置

```
echo '<a href="#" > <IMG src="location/'.$avatar.'.jpg" alt="..." 
hight="200"width="200"/></a>'; 
```

但请注意：在这种情况下，所有头像必须是相同的扩展名 (*.jpg)

如果它需要 name.extension 那么你只需要定义位置

如果它需要 location/name.extension 那么你的问题不是 $avatar

但仍然可以是头像的名字本身，一定不要让头像的名字中包含空格或非英文字母字符。你必须重命名它们。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-04T08:24:49.640

您打算输出图像链接的部分是 html，应该在 php 部分之外，或者打印出来，如下所示。

```
 <?php
 //We check if the users ID is defined

$db_host = "xxxxxxxxxxxx"; 
$db_username = "xxxxxxxxxxxxxx"; 
$db_password = "xxxxxxxxx"; 
$db_database = "xxxxxxxxxxxxxx"; 

$link = mysqli_connect($db_host,$db_username,$db_password) or die("Cannot connect"); 
mysqli_select_db($link, $db_database) or die("Cannot select the database");
$sql = mysqli_query($link, "SELECT id, name, avatar FROM users WHERE id="'.$id.'" ") ;
while($result = mysqli_fetch_object($sql)) {
    print '<a href="http://www.mysite.tk/users/myaccount.php"> <img src="'.$result->avatar.'" alt="'.$result->name.'" width="200" height="300" /></a>';
}
?>
</p> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-04T08:26:33.383

在浏览器上查看后，检查每个图像的 url src，它是否在正确的路径？并确保图像存在于 src 路径中。

# php - 在 apache 服务器中从 php 访问 shell 可执行文件

> ID：12723154
> 
> 赞同：-1
> 
> 时间：2012-10-04T08:22:41.800
> 
> 标签：php, linux, apache, shell

我的服务器盒目前处理 10 万个并发请求，我需要使用 php 命令`exec($cmd)`或`shell_exec($cmd)`执行一个 shell 文件（扩展名为 somefile.sh 的文件）并执行一些文件移动和执行文件。

apache服务器如何处理这个操作会导致我的服务器基于并发连接崩溃？？？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-04T08:27:51.383

不，没有。所有这些事情都由操作系统处理。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-04T08:32:11.690

如果您正在寻找如何使用 PHP 从 shell 执行程序，请转到[此处。](http://ca.php.net/manual/en/book.exec.php)

# c# - 从集合中查找一组值

> ID：12723156
> 
> 赞同：3
> 
> 时间：2012-10-04T08:22:48.447
> 
> 标签：c#, linq

我有一些代码可以根据过滤器值过滤排序对象的集合。例如，我想找到`Name=="searchquery"`. 然后我想从该集合中获取前 X 值。

我的问题：

*   我的收藏是一个`List<T>`。此集合是否保证排序顺序？

*   如果是这样，是否有内置方法可以找到满足条件的前 X 个对象？我正在寻找类似的东西

    ```
    collection.FindAll(o=>o.Name=="searchquery",100); 
    ```

    这会给我满足条件的前 100 个对象。原因是性能，一旦我找到了 100 个对象，我不想继续检查整个集合。

*   如果我写：

    ```
    collection.FindAll(o=>o.Name=="searchquery").Take(100); 
    ```

    运行时是否足够智能以在达到 100 时停止检查？

我当然可以自己实现它，但如果有内置方法（如 LInQ 方法），我更愿意使用它。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-04T08:24:43.537

```
collection.Where(o=>o.Name=="searchquery").Take(100) 
```

该顺序应与原始列表的顺序相同，一旦它需要 100 个元素，它将停止检查（`Where`返回一个仅在您获取元素时评估的枚举）。从[文档中](http://msdn.microsoft.com/en-us/library/bb534803.aspx)：

> 该方法是通过使用延迟执行来实现的。立即返回值是一个存储执行操作所需的所有信息的对象。在通过直接调用其 GetEnumerator 方法或使用 Visual C# 中的 foreach 或 Visual Basic 中的 For Each 枚举对象之前，不会执行此方法表示的查询。

如果您需要不同的排序顺序，则必须指定它（这当然意味着您别无选择，只能检查所有元素）。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-04T10:55:54.140

如果您确定您的集合中的对象不重复（例如主键），那么您可以使用 SortedList 而不是`List<T>`. 这将保证，当您使用特定标准过滤列表时，您的列表将被排序。在这里查看排序列表示例：

[http://msdn.microsoft.com/en-us/library/system.collections.sortedlist(v=vs.100).aspx](http://msdn.microsoft.com/en-us/library/system.collections.sortedlist(v=vs.100).aspx)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-04T09:09:47.837

```
 collection.Where(o=>o.Name=="searchquery").Take(100) 
```

是最正确的答案，因为幕后`Where`是*deferred execution*，下面是`Where`方法是如何实现的：

```
Where(this IEnumerable<T>, Func<T, bool> func)
{
    foreach (var item in collection)
    {
        if (func(item))
        {
            yield return item;
        }
    }
} 
```

因此，当调用 时`Take(100)`，循环只会找到满足条件的前 100 个项目。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-10-04T08:39:36.037

好的，

**我的收藏是一个`List<T>`。此集合是否保证排序顺序？**

不，但它会保留插入顺序。

**如果是这样，是否有内置方法可以找到满足条件的前 X 个对象？**

```
 someEnumerable.Where(r => r.Name == "searchquery").Take(100) 
```

**如果我写：**

```
 // Some linq that works 
```

**运行时是否足够智能以在达到 100 时停止检查？**

很可能是

* * *

现在，如果您有一个`IList`已排序的并且想要快速迭代前 100 个项目，请执行此操作。

```
var list = sourceEnumerable.OrderBy(r => r.Name).ToList();
foreach(var r in list.Where(r => r.Name == "searchquery").Take(100))
{
    // Do something
} 
```

# listview - PyQt - 两个列表视图错误地使用相同的模型

> ID：12723157
> 
> 赞同：0
> 
> 时间：2012-10-04T08:22:56.037
> 
> 标签：listview, pyqt

我觉得这可能是一个微不足道的问题，但我很难过。

我有两个列表视图，我以为我正在为每个列表视图创建一个模型，但看起来好像列表视图使用的是相同的模型。应该只显示在 listViewA 中的内容也显示在 listViewB 中。我该如何纠正这个问题，以便他们拥有自己的模型并显示正确的内容？

这是我从窗口类中的**init方法运行的代码：**

```
self.modelA = ListModel()
self.modelB = ListModel()
self.listViewA.setModel(self.modelA)
self.listViewB.setModel(self.modelB) 
```

我有刷新模型内容的方法

```
def refreshA(self):

    self.modelA.removeRows(0, self.modelA.rowCount(QtCore.QModelIndex()), QtCore.QModelIndex())

    ... # populate modelA

    self.listViewA.update()

def refreshB(self):

    self.modelB.removeRows(0, self.modelB.rowCount(QtCore.QModelIndex()), QtCore.QModelIndex())

    ... # populate modelB

    self.listViewB.update() 
```

我从刷新按钮运行两种刷新方法

def on_actionRefresh_triggered(self,checked=None)：如果检查为 None：返回

```
 self.refreshA()
    self.refreshB() 
```

在显示窗口之前

定义显示窗口（自我）：

```
 self.refreshA()
    self.refreshB()
    self.show() 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-04T23:20:22.650

毕竟这是微不足道的。所需要的只是创建两个特定的数据模型，每个列表视图一个。继承在这里起到了作用。

# c++ - 使用夹具的 C++ GoogleTest - 无法访问函数指针定义

> ID：12723163
> 
> 赞同：0
> 
> 时间：2012-10-04T08:23:14.483
> 
> 标签：c++, unit-testing, function-pointers, googletest, member-function-pointers

我用fixture class 实现了一个googletest `UnitTest_solver`。夹具的实现如下。它包含辅助函数

```
class UnitTest_solver : public ::testing::Test
{

protected:

    static void SetUpTestCase()
    {
        // setup table with data
        m_col = 2; 
        m_row = 100;
        //  other things to initialize m_test_data 
    }

    static void TearDownTestCase()
    {
        for(int i = 0 ; i < m_row ; i++)
            delete[] m_test_data[i];
        delete[] m_test_data;
    }

    static double chi_sqr(double* x)
    {
        if(m_col < 2)
            return 0;

        double fx = 0;

        double * row_i = new double[m_col - 1];

        for(int i = 0 ; i < m_row ; i++)
        {
            for(int j = 0 ; j < m_col - 1 ; j++)
                row_i[j] = m_test_data[i][j];

            fx += pow(m_test_data[i][0] - func_1(x, row_i, m_col - 1), 2.0); 
        }
    return fx;
    }

    static double func_1(double* x, double* dbl, int nb_param)
    {
        if(nb_param != 2)
            return 0;

        return x[0] * exp(-1 * x[1] * dbl[0]);
    }

    static double UnitTest_solver::functPtr( double * parameters, void * userinfo)
    {
        return  chi_sqr(parameters);
    }

    static ofstream thing;
    static double** m_test_data;
    static int m_col, m_row;

 }; 
```

此外，在夹具范围之外，我初始化静态变量。最后是函数指针。定义语法好吗？

```
double** UnitTest_solver::m_test_data = 0;
int UnitTest_solver::m_col = 0;
int UnitTest_solver::m_row = 0;

double (UnitTest_solver::*functPtr)(double * , void *) = 0; 
```

然后，我有一个测试用例，带有指向夹具 UnitTest_solver 的链接。

```
TEST_F(UnitTest_solver, testFunc1)
{
    Solver* solversqp = new Solver();
    solversqp->set_pointer_to_function(UnitTest_solver::functPtr, (void*)0);
    //...
} 
```

第二行显示编译时错误`UnitTest_solver::functPtr`：当鼠标悬停在错误上时，信息是“在第 xxx 行定义的函数无法访问”，xxx 指向`functPtr`夹具内的定义。

如果我运行 ggltest 并评论最后一行，`solversqp->set_pointer_to_function(UnitTest_solver::functPtr, (void*)0);`则测试正在完成（如果我放了一个简单的 ASSERT，它是成功的）。

我的函数指针定义有什么问题。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-04T09:33:30.020

我没有看到完整的代码，因此这只是一个猜测。

中的所有`class UnitTest_solver`内容都受到保护，因此所有内容（为此类继承的其他类）都无权访问它的成员。将其更改为公开，您的问题将得到解决：

```
class UnitTest_solver : public ::testing::Test
{

// protected: 
public: 
```

# java - elasticsearch包导入错误

> ID：12723172
> 
> 赞同：1
> 
> 时间：2012-10-04T08:23:36.443
> 
> 标签：java, netbeans-7, elasticsearch

我正在尝试在我的 .java 文件中导入以下包：-

```
import org.elasticsearch.action.index.IndexResponse;
import org.elasticsearch.client.Client;
import org.elasticsearch.client.transport.TransportClient;
import org.elasticsearch.common.transport.InetSocketTransportAddress; 
```

我收到上述软件包不存在的错误。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-04T08:27:56.743

您需要下载弹性搜索 jar 以使其工作。从[这里](http://www.elasticsearch.org/download/)下载。

并将其添加到您的类路径中。

# c++ - 我的整个解析逻辑因空字符而受到影响如何解决这个问题

> ID：12723177
> 
> 赞同：2
> 
> 时间：2012-10-04T08:24:07.573
> 
> 标签：c++, c, visual-studio-2010, parsing, visual-c++

这是数据 1

```
RE00002200050046\00 0.00 0.1 0.125.9\0#####-  14    0##### \0   0#####   141.0\004.00 0: 00.000.0\00 4: 011:27 0: 015:27#\0###########2.00.0\0 
```

我拥有的另一个数据是这是 DATA 2

```
RE000022601\0500460 0.00 0.1\0 0.236.8####\0#   57-   2#####-   3#####\0-  601.004.0\00 4: 00.000.\000 4: 013:37 0\0: 017:37#####\0#######2.00.\00 
```

上面的数据是我从医院机器得到的响应，我必须解析上面的值并根据给定的格式填充它：-

```
BYTEs  2         2         4             128            2         2
   +---------+--------+------------+-----------------+--------+-------+
   |  RE     |  00    |  machine no|   Data part     |  Check | CRC   |
   |         |        |            |                 |   sum  |       |
   +---------+--------+------------+-----------------+--------+-------+ 
```

正如您从 DATA 1 中看到的那样，我的数据部分从“000500..”开始，DATA 2 我的数据部分从“601\0500...”开始，在进行解析时，我遇到了一个问题，即有一个名为“Blood pump flow”的字段" 其长度为“DATA 1”的 3 个字节，我们得到它的值为“46”，而从“DATA 2”得到它的值为“460”。实际上，它的值应该是“460”如果我得到一个像 DATA 1 这样的数据，我的整个解析逻辑都会受到影响，因为“血泵流量”是“3 个字节”，我得到一个值“46\0”并且**添加了****“0”** **到另一个字段，而“血泵流量”应为“460”。** 以上只是我在其他一些领域也多次得到它的一种情况。如何解决这个问题。

DATA 1 和 DATA 2 是我从机器获得的二进制数据。

![在此处输入图像描述](../Images/7f683f297cefc301f556bb8e9920bdc8.png)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-04T09:33:16.170

从您的示例看来，您自己的评论也证实了您知道格式中的字段大小。因此，您必须将此输入视为二进制输入。使用`std::istream::read`功能。

```
unsigned char header[14];
is.read(header,14);
if (is.gcount() == 14)
{
    // decide which DATA1 or DATA2 you read from header contents
    if (header is for DATA1)
      // read rest of input as DATA1
    // decide which DATA1 or DATA2 you read from header contents
    else if (header is for DATA2)
      // read rest of input as DATA2
    else
      //report error
} 
```

# r - 结合 data.table 中的一组条件以使用二进制搜索提取值

> ID：12723182
> 
> 赞同：3
> 
> 时间：2012-10-04T08:24:21.917
> 
> 标签：r, replace, data.table

由于我对[先前问题](https://stackoverflow.com/questions/12669399/extract-value-from-one-dataframe-and-place-into-other-based-on-a-set-of-conditio)的糟糕执行和解释，我将重新开始，并尝试将问题表述得尽可能简短和笼统。

我有两个数据框（请参见下面的示例）。每个数据集包含相同数量的列。

```
tc <- textConnection('
ID  Track1  Track2  Track3  Track4  Time    Loc
4   15      ""      ""      50      40      1   
5   17      115     109     55      50      1   
6   17      115     109     55      60      1   
7   13      195     150     60      70      1
8   13      195     150     60      80      1
9   ""      ""      181     70      90      2 #From this row, example data added
10  ""      ""      182     70      92      2
11  429     31      ""      80      95      3
12  480     31      12      80      96      3 
13  118     ""      ""      90      100     4
14  120     16      213     90      101     4   
')

MATCHINGS <- read.table(tc, header=TRUE)

tc <- textConnection('
ID  Track1  Track2  Track3  Track4  Time    Loc
""  15      ""      ""      50      40      1   
""  17      ""     109      55      50      1
""  17      432    109      55      65      1   
""  17      115     109     55      59      1       
""  13      195     150     60      68      1
""  13      195     150     60      62      1
""  10      5       1       10      61      3
""  13      195     150     60      72      1
""  40      ""      181     70      82      2 #From this row, example data added
""  ""      ""      182     70      85      2
""  429     ""      ""      80      90      3
""  ""      31      12      80      92      3
""  ""      ""      ""      90      95      4
""  118     16      213     90      96      4
')

INVOLVED <- read.table(tc, header=TRUE) 
```

目标是通过匹配to和来放置最近的 ID from `MATCHINGS`into 。一个额外的条件是匹配条目的 可能不高于中的条目。此外，match on是最优选的，match on是最不优选的。但是 only始终可用（所有其他-columns 可以为空）。因此，预期的结果是：`INVOLVED``Track1``Track4``Loc``Time``INVOLVED``Time``MATCHING``Track1``Track4``Track4``Track`

```
ID Track1 Track2 Track3 Track4 Time Loc
4     15     ""     ""     50   40   1
5     17     ""    109     55   50   1
""    17    432    109     55   65   1
6     17    115    109     55   59   1
7     13    195    150     60   68   1
7     13    195    150     60   62   1
""    10      5      1     10   61   3
8     13    195    150     60   72   1
9     40     ""    181     70   82   2 #From this row, example data added
10    ""     ""    182     70   85   2
11    429    ""     ""     80   90   3
12    ""     31     12     80   92   3
13    ""     ""     ""     90   95   4 
13    118    16    213     90   96   4 
```

我试图用这个`data.table`包来做这个，但没有做到这一点。是否有可能摆脱矢量扫描并在不循环的情况下有效地遍历数据？

```
dat <- data.table(MATCHINGS)
for(i in 1:nrow(INVOLVED)){
    row <- INVOLVED[i,]
    match <- dat[Time>=row$Time][Loc==row$Loc][Track4==row$Track4][Track4!=""][order(Time)][1]
    if(!is.na(match$ID)){ INVOLVED$ID[i]<-match$ID }
    match <- dat[Time>=row$Time][Loc==row$Loc][Track3==row$Track3][Track3!=""][order(Time)][1]
    if(!is.na(match$ID)){ INVOLVED$ID[i]<-match$ID }
    match <- dat[Time>=row$Time][Loc==row$Loc][Track2==row$Track2][Track2!=""][order(Time)][1]
    if(!is.na(match$ID)){ INVOLVED$ID[i]<-match$ID }
    match <- dat[Time>=row$Time][Loc==row$Loc][Track1==row$Track1][Track1!=""][order(Time)][1]
    if(!is.na(match$ID)){ INVOLVED$ID[i]<-match$ID }
} 
```

**更新**

更新了显示需要的示例数据`Track 1 to 3`。如图所示`Track1`是最重要和`Track4`最不重要的。即使`Track1 to 3`match to`MATCHINGS x`和`Track4`match to `MATCHINGS y`，`ID`of`y`也应该分配给 that `INVOLVED row`。所以：`Track3`匹配覆盖`Track4`匹配，`Track2`匹配覆盖`Track3`匹配，`Track1`匹配覆盖`Track2`匹配。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-04T11:29:32.687

使用 roll 参数还可以将下一个观察值与 new ( `v1.9.6+`)`on=`参数一起向后滚动，我们可以更直接地做到这一点：

```
require(data.table)
setDT(MATCHINGS)
setDT(INVOLVED)
INVOLVED[ , ID := MATCHINGS[INVOLVED, ID, roll=-Inf, 
                    mult="first", on=c("Loc", "Track4", "Time")]]] 
```

就是这样。

* * *

这是一个`data.table`-ish 开始。这仅使用 Track 4（不是 1 到 3），但它似乎仍会产生请求的输出。

```
M = as.data.table(MATCHINGS)
I = as.data.table(INVOLVED)
M[,Time:=-Time]
I[,Time:=-Time]
setkey(M,Loc,Track4,Time)
I[,ID:={i=list(Loc,Track4,Time);M[i,ID,roll=TRUE,mult="first"]}][,Time:=-Time]

    ID Track1 Track2 Track3 Track4 Time Loc
 1:  1     NA    105     NA     35    1   1
 2:  1     NA     NA     NA     35    2   1
 3:  1     26    105     NA     35    3   1
 4:  2     NA     NA     NA     40   20   1
 5:  2    134      1      6     40   20   1
 6:  3     13    109     NA     45   30   1
 7:  4     15     NA     NA     50   40   1
 8:  5     17     NA    109     55   50   1
 9: NA     17    432    109     55   65   1
10:  6     17    115    109     55   59   1
11:  7     13    195    150     60   68   1
12:  7     13    195    150     60   62   1
13: NA     10      5      1     10   61   3
14:  8     13    195    150     60   72   1 
```

有趣的问题！如果这看起来没问题，请将示例数据更改为需要轨道 1 到 3。或者您可以从此处获取。

# matlab - 根据白色边界将网格拆分为单元格

> ID：12723183
> 
> 赞同：3
> 
> 时间：2012-10-04T08:24:24.640
> 
> 标签：matlab, image-processing

如果我有这样的图像

![在此处输入图像描述](../Images/305f744ca83f2c88bdd9ac7e94bdf84e.png)

我想根据网格打破图像并将其保存在矩阵中。因此，如果我知道每个单元格的大小，那么我可以制作一个新的 4-D 矩阵并将每个单元格的像素值保存到新矩阵中

像

```
[m n]=size(img);
a=ones(m/64,n/64,64,64);
x=0;y=0;
for i = 1:m
    for j = 1:n
        ti=i/64;
        tj=j/64;
        a(ti+1,tj+1,i-ti,j-tj)=img(i,j);
    end;
end 
```

但是如果我们不知道每个单元格的大小，我不知道该怎么做，我们只需要根据白色边界分割单元格

我也不想要网格的像素，我只需要网格线内的所有像素

请告诉我如何在matlab中执行此操作

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-04T08:44:27.617

有一个很好的 Matlab 演示可以解决这个问题，即[微阵列图像案例研究。](http://www.mathworks.com/matlabcentral/fileexchange/2573-dna-microarray-image-processing-case-study/content/R14_MicroarrayImage_CaseStudy/html/R14_MicroarrayImage_CaseStudy.html)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-04T15:49:35.573

这可以使用霍夫变换来实现 - [http://en.wikipedia.org/wiki/Hough_transform](http://en.wikipedia.org/wiki/Hough_transform)

检测线并使用它们来计算交叉点。

这可以很容易地使用像 Openc 这样的库来计算，这些库有现成的函数来计算霍夫变换，这里有一个教程：[http ://docs.opencv.org/doc/tutorials/imgproc/imgtrans/hough_lines/hough_lines.html](http://docs.opencv.org/doc/tutorials/imgproc/imgtrans/hough_lines/hough_lines.html)

一个非常相似的目的是检测数独谜题中的线条，以下网站中已经提到了如何使用霍夫变换的教程：http: [//aishack.in/tutorials/sudoku-grabber-with-opencv-阴谋/](http://aishack.in/tutorials/sudoku-grabber-with-opencv-plot/)

# android - Android屏幕锁定/以编程方式解锁

> ID：12723185
> 
> 赞同：23
> 
> 时间：2012-10-04T08:24:31.667
> 
> 标签：android

我正在开发一个应用程序，我必须在其中以编程方式锁定和解锁屏幕。请帮忙！我不知道如何开发这种支持每个版本的 Android 操作系统的功能。

* * *

## 回答 #1

> 赞同：28
> 
> 时间：2013-11-07T13:08:52.137

开锁

```
KeyguardManager km = (KeyguardManager) getSystemService(Context.KEYGUARD_SERVICE); 
final KeyguardManager.KeyguardLock kl = km .newKeyguardLock("MyKeyguardLock"); 
kl.disableKeyguard(); 

PowerManager pm = (PowerManager) getSystemService(Context.POWER_SERVICE); 
WakeLock wakeLock = pm.newWakeLock(PowerManager.FULL_WAKE_LOCK
                                 | PowerManager.ACQUIRE_CAUSES_WAKEUP
                                 | PowerManager.ON_AFTER_RELEASE, "MyWakeLock");
wakeLock.acquire(); 
```

* * *

## 回答 #2

> 赞同：12
> 
> 时间：2012-10-04T08:28:49.177

此链接可能会帮助您解决问题：

[以编程方式解锁和锁定](http://musicm122.blogspot.in/2011/10/locking-and-unlocking-android-phone.html)

```
//Get the window from the context    
WindowManager wm = Context.getSystemService(Context.WINDOW_SERVICE);   

//Unlock
Window window = getWindow();  
window.addFlags(wm.LayoutParams.FLAG_DISMISS_KEYGUARD);  

//Lock device  
DevicePolicyManager mDPM = (DevicePolicyManager)getSystemService(Context.DEVICE_POLICY_SERVICE); 
```

# android - 以编程方式获取我的应用程序的数据库目录

> ID：12723186
> 
> 赞同：15
> 
> 时间：2012-10-04T08:24:36.840
> 
> 标签：android, database, sqlite, storage

我想在我的应用程序中使用“预加载”数据库。有很多关于这个的问题，大多数都指向[这里](http://www.reigndesign.com/blog/using-your-own-sqlite-database-in-android-applications/)的这篇博客文章或类似文章。

到目前为止，一切都很好。我只是想知道是否有更好的方法来获取默认数据库目录，这样你就不必使用这样的东西：

```
private static String DB_PATH = "/data/data/YOUR_PACKAGE/databases/"; 
```

我的意思是，也许将来会发生变化，或者设备或ROM可以将其放置在其他地方......那么有没有办法以编程方式获得这条路径？

在 Context 中存在一个 getDatabasePath(name) 的方法，但是你需要给它一个现有的数据库名称，嗯......它还不存在，我想把它移到那里：P

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2013-05-20T20:28:09.510

我用了...

```
String destPath = getFilesDir().getPath();
destPath = destPath.substring(0, destPath.lastIndexOf("/")) + "/databases"; 
```

* * *

## 回答 #2

> 赞同：9
> 
> 时间：2012-10-04T08:27:49.507

创建一个空数据库，用 获取路径`getDatabasePath()`，然后用你自己的覆盖它。

* * *

## 回答 #3

> 赞同：9
> 
> 时间：2014-10-07T01:05:25.907

由 SQLiteAssetHelper 使用：

```
 String path = mContext.getDatabasePath(mName).getPath(); 
```

此时，数据库不存在。我认为 String 只是采用内部路径并添加适当的修饰符。事实上，这似乎工作得很好：

```
context.getDatabasePath("a").getParentFile() 
```

基本上，您不需要创建一个真正的数据库，只需要一个即可。

* * *

## 回答 #4

> 赞同：6
> 
> 时间：2012-10-04T08:27:48.797

您可以使用方法`getFilesDir()`或`getDatabasePath`在活动类中获取此文件夹。
更多信息[在这里](http://developer.android.com/reference/android/content/Context.html#getDatabasePath%28java.lang.String%29)

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2015-08-18T19:26:35.317

您可以在 Helper 类中使用 getDatabasePath 方法：

```
public class MyDatabase extends SQLiteAssetHelper {

    private static final String DATABASE_NAME = "wl.db";
    private static final int DATABASE_VERSION = 1;  
    public String databasePath = "";    

    public MyDatabase(Context context) {
        super(context, DATABASE_NAME, null, DATABASE_VERSION);

        // you can use an alternate constructor to specify a database location
        // (such as a folder on the sd card)
        // you must ensure that this folder is available and you have permission
        // to write to it
        // super(context, DATABASE_NAME, context.getExternalFilesDir(null).getAbsolutePath(), null, DATABASE_VERSION);

        databasePath = context.getDatabasePath("wl.db").getPath();
    } 
```

# javascript - 在 node.js 中，如果使用 createReadStream() 你还需要 response.end()

> ID：12723192
> 
> 赞同：0
> 
> 时间：2012-10-04T08:25:03.080
> 
> 标签：javascript, node.js

[node.js 文档](http://nodejs.org/api/http.html#http_response_end_data_encoding)说

### response.end([数据], [编码])

> 该方法向服务器发出所有响应标头和正文已发送的信号；该服务器应认为此消息已完成。必须在每个响应上调用方法 response.end()。

但是在使用 using 给出的许多示例中`createReadStream`，例如，

```
 fs.createReadStream(filename,{...}).pipe(response)

```

我从来没见过`response.end()`叫。

它`resonse.end()`需要`createReadStream()`吗？如果是这样，它出现在程序流中的什么位置 - 在管道完成之前您不希望它被调用，对吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-04T08:40:49.620

您`response.end()`在阅读完成后执行（`end`事件）或遇到错误（`error`事件）。

检查这个例子：[http ://elegantcode.com/2011/04/06/taking-baby-steps-with-node-js-pumping-data-between-streams/](http://elegantcode.com/2011/04/06/taking-baby-steps-with-node-js-pumping-data-between-streams/)

# java - 如何将 MapView 上的内容（标记）动态更新到另一个线程？

> ID：12723195
> 
> 赞同：0
> 
> 时间：2012-10-04T08:25:08.133
> 
> 标签：java, android, multithreading, android-mapview, marker

我对这个问题很感兴趣——当地图上的内容（标记）被添加到另一个线程时，如何更新它们。问题在于 - 我在另一个线程中向地图添加标记，部分是为了避免减慢用户界面，因为这是创建标记来分析数据库所必需的。该程序似乎工作正常 - 但在设置标记后，他们不检查地图。为了显示它们以与卡片进行交互（触摸或更改比例）。这就是我想问的原因 - 是否可以通过添加标记来更新地图的内容？在我不是一个好的解决方案中启动规模变化。我希望能得到你的帮助。

***更新，但不工作***

```
public void onPostExecute(){                     
                     SQLiteDatabase placeDataBase = SQLiteDatabase.openDatabase("/data/data/expir.java.file/databases/PlaceDataBase",
                            null ,
                            0);             
                     Cursor location_latitude = placeDataBase.query("AllInfo",new String[]{"LOCATION_LATITUDE"}, null, null, null, null, null);
                     location_latitude.moveToFirst();
                     Log.d("CREATE CURSOR 1", "lat");
                     Cursor location_longitude = placeDataBase.query("AllInfo", new String[]{"LOCATION_LONGITUDE"}, null, null, null, null, null);
                     location_longitude.moveToFirst();
                     Cursor location_name = placeDataBase.query("AllInfo", new String[]{"LOCATION_NAME"}, null, null, null, null, null);
                     location_name.moveToFirst();
                     Cursor vicinity = placeDataBase.query("AllInfo", new String[]{"VICINITY"}, null, null, null, null, null);
                     vicinity.moveToFirst();
                     Cursor id = placeDataBase.query("AllInfo", new String[]{"&&&&&&&&"}, null, null, null, null, null);
                     id.moveToFirst();
                     Log.d("CREATE CURSOR 2", "lon");
                     quantityPlace = location_latitude.getCount();
                     int a = 0;
                     for(int i=1;i<=quantityPlace;i++){
                        if((int)(location_latitude.getDouble(0)*1000000)>=myLocationLatitude-(3*8998)&&
                                (int)(location_latitude.getDouble(0)*1000000)<=myLocationLatitude+(3*8998)&&
                                (int)(location_longitude.getDouble(0)*1000000)>=myLocationLongitude-(6*8998)&&
                                (int)(location_longitude.getDouble(0)*1000000)<=myLocationLongitude+(6*8998)){
                            a++;
                            Drawable drawable1 = MyMapActivity.this.getResources().getDrawable(R.drawable.scoutgroup);                      
                            itemizedoverlay = new HelloItemizedOverlay(drawable1, MyMapActivity.this);                           ;
                            GeoPoint point1 = new GeoPoint((int)(location_latitude.getDouble(0)*1000000), (int)(location_longitude.getDouble(0)*1000000));                                                          
                            overlayitem = new OverlayItem(point1, location_name.getString(0), vicinity.getString(0));
                            itemizedoverlay.addOverlay(overlayitem);
                            mapOverlays.add(itemizedoverlay);
                        }
                        Log.d("INFO", location_latitude.getPosition()+"/"+quantityPlace);
                        location_latitude.moveToPosition(i);
                        location_longitude.moveToPosition(i);
                        location_name.moveToPosition(i);
                        vicinity.moveToPosition(i);
                        id.moveToPosition(i);
                     }
                     Log.d("On map view", a+" location(s)");
                                     mapView.invalidate();
                     placeDataBase.close();
                 } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-04T08:29:25.213

考虑使用 Android 的，而不是使用 Java 通常的多线程概念。AsyncTask 专为您的需求而设计。

在其 doInBackground() 方法中对数据库执行您需要的操作，并使用来自 onPostExecute() 方法的新数据通知您的地图视图。

另外，不要忘记调用 mapview.invalidate() 来重绘你的新标记。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-04T13:17:59.257

再说一次，你没有听我说的话。任何与数据库相关的工作，都应该在`doInBackground()`方法中完成。任何与 UI 相关的工作都应该在`onPostExecute()`方法中完成。

`mapOverlays.clear()`在添加逐项叠加之前尝试

# c# - ServiceStack Backbone.Todos Delete 405 不允许

> ID：12723202
> 
> 赞同：6
> 
> 时间：2012-10-04T08:25:35.927
> 
> 标签：c#, backbone.js, servicestack, http-status-code-405

我意识到当单击 Backbone.Todos 示例“清除 x 已完成的项目”时，我得到一个 DELETE 405 not allowed...

我从以前的帮助和文档中了解到，如果我想启用 DELETE PUT PATCH ...我需要设置

`X-http-method-override : DELETE`

如果它是一个表单或在 jquery 中。

但我不确定在 Backbone.Todos 示例中这是如何完成的，因为我是 backbone.js 的新手。

您能否指出如何修复 DELETE 405 ？谢谢你。

编辑 - - - - - - - - - - - - - - - - - - - -

我总是可以改变路线...

```
[Route("/todos/add")] //C - post
[Route("/todos/{id}")] //R - get
[Route("/todos/{id}/edit")] //U - post
[Route("/todos/{id}/delete")] //D - post 
```

因此，只有 Post 和 Get 足以完成这项工作。但与以下相比，它看起来不是很安静：

```
[Route("/todos/{id}", "Delete")] //D - delete 
```

可以？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-04T14:23:12.340

[Backbone.js](http://backbonejs.org/)对此有特殊支持，您可以通过以下方式启用：

```
Backbone.emulateHTTP = true 
```

从他们的网站：

### emulateHTTP Backbone.emulateHTTP = true

> 如果您想使用不支持 Backbones 的默认 REST/HTTP 方法的旧版 Web 服务器，您可以选择打开 Backbone.emulateHTTP。设置此选项将使用 HTTP POST 伪造 PUT 和 DELETE 请求，使用 true 方法设置 X-HTTP-Method-Override 标头。如果 emulateJSON 也打开，则 true 方法将作为附加的 _method 参数传递。

```
Backbone.emulateHTTP = true;

model.save();  // POST to "/collection/id", with "_method=PUT" + header. 
```

405 响应可能是在 IIS 中运行其他东西（如 WebDav）的结果，它会在请求到达 ServiceStack 之前劫持并拒绝请求。否则，如果它在客户端被拒绝，您可能需要[启用 CORS](https://stackoverflow.com/questions/8211930/servicestack-rest-api-and-cors)以允许发送额外的 HTTP 动词。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-04T23:55:56.327

经过一番挖掘，我意识到这不是 Backbone 设置（`Backbone.emulateHTTP = false;`顺便说一下，在backbone.js的第34行）

我检查了 Fiddler，它说：

```
Module  WebDAVModule
Notification  MapRequestHandler
Handler  ServiceStack.Factory
Error Code  0x00000000 
```

这是WebDAV劫持并拒绝了mythz怀疑的请求。然后我发现了如何从 web.config 中禁用 WebDAV：

```
 ...
  <system.webServer>
    <modules runAllManagedModulesForAllRequests="true">
      <remove name="WebDAVModule" />
    </modules>
    <validation validateIntegratedModeConfiguration="false"/>
    <handlers>
      <add path="*" name="ServiceStack.Factory" type="ServiceStack.WebHost.Endpoints.ServiceStackHttpHandlerFactory, ServiceStack" verb="*" preCondition="integratedMode" resourceType="Unspecified" allowPathInfo="true"/>
    </handlers>
  </system.webServer>
  ... 
```

现在它可以愉快地工作了。谢谢！

# c++ - 64 位 Windows 上的应用程序可用的最大内存是多少

> ID：12723204
> 
> 赞同：0
> 
> 时间：2012-10-04T08:25:42.557
> 
> 标签：c++, .net, windows, memory

我一直从我的用户那里收到这个问题，不幸的是我没有找到关于 x64 的好链接（x86 是一个不同的故事）。

64 位 Windows 上的应用程序可用的最大内存是多少：

1.  C++ 应用程序
2.  .Net 应用程序
3.  .Net 应用程序使用 C++ 库
4.  应用程序在[Windows 2008](http://msdn.microsoft.com/en-us/library/aa366778%28VS.85%29.aspx#physical_memory_limits_windows_7) /2012 服务器上运行
5.  应用程序在 Windows 7/8 上运行

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-04T08:34:53.427

假设地址被认为是无符号的，那么总量将在理论上超过 18 quintillion（2^64 或 180 亿）字节或 180 亿 GB。如果您限制自己并考虑一个有符号的 64 位整数，那么您将看到其中的一半。哦，别忘了减去为硬件保留的内存，如视频内存、总线地址空间等。

但即使这些数字也不一定是最大值（至少在理论上），因为您可以使用其他技巧（例如使用物理地址扩展在 32 位上使用超过 2 GB 的空间）。

因此，基本上作为简短的回答：64 位允许您寻址和使用您的钱可以购买的所有内存。

不幸的是，最有可能的硬件和软件限制要低得多，例如主板可用的最大内存量（取决于主板的使用年限，现在通常是 8 或 16 GB，有时是 32 GB）。[根据 Windows 本身的判断，最大数量可能会有很大差异，具体取决于您运行的体系结构和版本。](http://msdn.microsoft.com/en-us/library/windows/desktop/aa366778%28v=vs.85%29.aspx)

# visual-c++ - 在 MSVC 中使用本机代码部署 Azure

> ID：12723207
> 
> 赞同：1
> 
> 时间：2012-10-04T08:25:50.927
> 
> 标签：visual-c++, azure, native, visual-studio-2010

我一直在环顾四周，似乎找不到任何好的说明，所以我正在发帖（另外，现在已经很晚了，所以可能是由于我此时缺乏连贯的想法）。但无论如何，我创建了一个小型 Web 应用程序，托管在 Azure 上，它依赖于一些本机代码。通过模拟器一切正常，但是当我将其打包（通过 MSVC 2010）并将其上传到云实例时，找不到 DLL。有谁知道我可能做错了什么？

我已经让 WebRole 知道我的 DLL 是一个依赖项，并且在项目中我在 DLL 上设置了“始终复制”属性。此外，我还在 64 位发布模式下构建了 DLL。我还需要做些什么来确保这个 DLL 包含在我的包中吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-04T14:52:46.037

此问题的解决方案是使用 DLL`/MD`而不是`/MT`. 当我改变这个时，一切都很好。

# php - 传递post数据jquery

> ID：12723208
> 
> 赞同：1
> 
> 时间：2012-10-04T08:25:56.097
> 
> 标签：php, javascript, jquery, ajax

我不知道该怎么做。

我有几个隐藏字段

```
<input type="hidden" id="order_1" name="order_1" value="1">
<input type="hidden" id="order_2" name="order_2" value="2">
<input type="hidden" id="order_3" name="order_3" value="3">

<input type="hidden" name="ids[]" value="1">
<input type="hidden" name="ids[]" value="2">
<input type="hidden" name="ids[]" value="3"> 
```

等等。这个想法是像这样通过ajax传递数据。

```
var id = $('input').attr('name')
$.post('http://foobar.com/ajax.php', {ids : ids, order: order}, function(data){

}); 
```

我不知道如何收集数据。

在 ajax.php 的另一边，我不想得到这样的值

```
echo $_POST['order_1'];
echo $_POST['order_2'];
......
etc 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-04T08:26:47.080

错误 #1

```
<input type="hidden" id="order_1" name="order_1 value="1">
<input type="hidden" id="order_1" name="order_1 value="1">
<input type="hidden" id="order_1" name="order_1 value="1"> 
```

应该

```
<input type="hidden" id="order_1" name="order_1" value="1">
<input type="hidden" id="order_1" name="order_1" value="1">
<input type="hidden" id="order_1" name="order_1" value="1"> 
```

* * *

错误 #2

**永远不要永远**使用相同的 ID。使用不同的！也用于名称属性

* * *

错误 #3

你过关了

`$.post('http://foobar.com/ajax.php', {ids : ids`

代替

`$.post('http://foobar.com/ajax.php', {ids : id`

* * *

**更新**

假设

```
<input type="hidden" id="order_1" name="order_1" value="1">
<input type="hidden" id="order_2" name="order_2" value="2">
<input type="hidden" id="order_3" name="order_3" value="3"> 
```

和 js: var yourArray = [];

```
$.each($("input[type='hidden']"), function(key, value){
  yourArray.push($(this).attr("name"));
}); 
```

把它传给ajax

`$.post('http://foobar.com/ajax.php', {ids : yourArray ...`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-04T08:34:53.200

我想你在寻找`.serialize`. 请参阅[api](http://api.jquery.com/serialize/)。

尝试这样的事情：

```
var postData = $('input:hidden').serialize();

$.post('http://foobar.com/ajax.php', postData, function(data){

}); 
```

请记住，我用于隐藏输入的选择器可以由您更改为更具体，也许通过使用表单 id。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-04T08:35:09.517

这会将您的所有表单数据发布到 ajax.php。你必须给你的`<form>`标签一个 id（在这种情况下它的 id='formId'）

```
$.post('http://foobar.com/ajax.php', $('#formId').serializeArray()); 
```

您可以通过以下方式请求 ID：

```
$ids = $_POST['ids']; 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-04T08:36:17.570

传递值

```
<input type="hidden" id="order_1" name="order_1" value="1">
<input type="hidden" id="order_2" name="order_2" value="2">
<input type="hidden" id="order_3" name="order_3" value="3">

<input type="hidden" name="ids[]" value="1">
<input type="hidden" name="ids[]" value="2">
<input type="hidden" name="ids[]" value="3">

var ids_arr = new Array();
 $("input[name='ids[]']").each(function() {
    ids_arr.push( $(this).val() );
 });
$.post('http://foobar.com/ajax.php', {"ids" :ids_arr , "order_1": $('#order_1').val(),"order_2":$('#order_2').val(),"order_3":$('#order_3').val()}, function(data){

}); 
```

用于获取 php 端的值

```
echo $_POST['order_1'];
echo $_POST['order_2'];
echo $_POST['order_3'];
var_dump($_POST['ids']); 
```

# opengl - OpenGL，交错的 VBO（顶点、法线和颜色）与光

> ID：12723209
> 
> 赞同：2
> 
> 时间：2012-10-04T08:26:00.357
> 
> 标签：opengl, colors, jogl, vbo, lighting

我有一个包含顶点、法线和颜色的交错 VBO。一切正常。

我也想要灯，但如果我启用它，那么颜色就不再起作用了。

我想这是因为灯光不适用于 gl.glColor，而是使用颜色材料（也如此 [处](http://www.opengl.org/archives/resources/faq/technical/lights.htm)指定，第一个问题）

那么，考虑到我需要渲染不超过 10000 个三角形，并且在渲染过程中需要切换 3 次颜色，这是最适合我需求的策略吗？

Ps：我还用其他 VBO 渲染了数百万个三角形（但每个 VBO 只有一种颜色），所以我猜 gl.glBegin 对我来说并不代表一个有效的选项..

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-04T08:41:42.790

如果您的硬件不支持着色器，您可以使用 glColorMaterial(GL_FRONT, GL_DIFFUSE) 和 glEnable(GL_COLOR_MATERIAL)。

# php - 如何在 PHP 中循环一个多元素 JSON 数组？

> ID：12723210
> 
> 赞同：0
> 
> 时间：2012-10-04T08:26:03.040
> 
> 标签：php, json, loops, fpdf

我正在尝试遍历一个 JSON 数组`PHP`并填充一个`fpdf table`

我构造的字符串是有效的 JSON，如下所示：

```
[
 {"ap":"j4","la":"02.02.2012","tr":"30&nbsp;Tage","tra":"19.95EUR"}, 
 {"ap":"de","la":"27.09.2012","tr":"30&nbsp;Tage","tra":"19.95EUR"},
 ...
 ] 
```

我设置为

```
if($rvar_apps != ""){
    $activeAppsJson = json_decode( $rvar_apps ,true);
} 
```

然后我正在尝试这个，它使页面空白：

```
if( $activeAppsJson ){
    for($activeAppsJson as $item) {
        $pdf->Cell(25,8,$item['ap'],1,0);
        $pdf->Cell(25,8,$item['la'],1,0);
        $pdf->Cell(25,8,$item['tr'],1,0);
        $pdf->Cell(35,8,$item['tra'],1,1);

    }
} 
```

以前从未使用过 php ......我需要一些帮助！

**问题**：
我的循环和变量分配有什么问题。分配似乎有效，但空白页并没有告诉我循环中有什么问题......

谢谢！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-04T08:31:52.960

它应该是**foreach**而不是**for**

```
foreach($activeAppsJson as $item) {
        $pdf->Cell(25,8,$item['ap'],1,0);
        $pdf->Cell(25,8,$item['la'],1,0);
        $pdf->Cell(25,8,$item['tr'],1,0);
        $pdf->Cell(35,8,$item['tra'],1,1);

    } 
```

# php - 使用会话保存路径（php）

> ID：12723212
> 
> 赞同：1
> 
> 时间：2012-10-04T08:26:05.903
> 
> 标签：php, session, path

我有 VPS (CentOs)，运行几个带有子域的网站，我想监控我的会话文件，我可以为站点及其子域定义单独的会话保存路径，如下所示？

```
session_save_path("/home/sitename1/public_html/sessionpath/");
session_save_path("/home/sitename2/public_html/sessionpath/”); 
```

对于子域

```
session_save_path("/home/sitename1/public_html/subdomainName1/sessionpath/"); 
session_save_path("/home/sitename2/public_html/subdomainName2/sessionpath/”); 
```

INI 中的默认路径是 tmp，它位于根目录中，我无权访问。我的一些网站用户即使在页面中处于活动状态，也会丢失他们的会话文件。可能是什么原因？是否有任何后台进程清理 tmp 文件夹文件？

我在 INI 中针对 PHP 会话机制的其他设置如下 session.gc_divisor 3000, session.gc_probability 1, session.gc_maxlifetime 10800, session.cookie_lifetime 0,

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-04T08:29:55.710

我不知道任何禁止全局访问的 Linux 系统`/tmp`，或者任何会这样做的系统管理员，但我认为这是可能的。

会话文件基于`gc_maxlifetime`. 在你的情况下，它是 180 分钟或 3 小时。这意味着在 3 小时不活动后，某个会话可能会被垃圾收集（即删除）。

如果您希望会话持续更长的时间，您需要另一个层（例如数据库），或者您必须使用 JavaScript 不断刷新会话。

# android - Android - 在多分辨率设备中使用 setScaleX()/setScaleY() 时出现文本碎片

> ID：12723216
> 
> 赞同：1
> 
> 时间：2012-10-04T08:26:14.800
> 
> 标签：android

我在使用`setScaleX()`/`setScaleY()`支持多分辨率设备时遇到问题。我在 1280x800 分辨率设备上开发了一个应用程序。但我想在其他分辨率设备上自动更改应用程序的层。所以，我在其他分辨率设备上使用过 `setScaleX()`/`setScaleY()`并且得到了满意的结果。

但是有一个问题。文本也会减少或增加以适应分辨率，但文本周围会出现一些文本碎片。

我怎么解决这个问题？
请任何人帮助我解决这个问题。谢谢。

ps 我曾尝试发布一些示例图片，但我不能因为我是新人。

# xajax - 使用 XAJAX 的 PHP 数据库应用程序

> ID：12723218
> 
> 赞同：0
> 
> 时间：2012-10-04T08:26:16.893
> 
> 标签：xajax

我想将我的普通数据库应用程序转换为 XAJAX 应用程序（无需重新加载）。我的应用程序基于使用 GET 和 POST 请求（页面加载后）发送和读取数据。

如何在不刷新的情况下将数据传递给 url？

示例：我想在不使用的情况下发送表格上所选行的 ID`<a href="index.php?action=edit&id='. $row['CountryID'] .'">`

使用 XAJAX 会发生这种情况吗？

我可以发送数组`$objResponse->assign("div", "innerHTML", $HERE);`吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-14T17:19:00.767

创建一个接收您提交的 ID 的函数。例如

```
function name_function($id){
     $response = new xajaxResponse();//to post the answer
     //what you do
     $response->assign("your_div","innerHTML",$variable_that_you_use);
     return $response
} 
```

# javascript - html行选择在j查询中使用向上/向下键更改

> ID：12723219
> 
> 赞同：0
> 
> 时间：2012-10-04T08:26:18.483
> 
> 标签：javascript, jquery

我有像这样的html表：

![在此处输入图像描述](../Images/b21565a9e24e852cf43a3501be05e058.png)

现在我想用上/下键 & 更改行选择以及滚动 j query/java script 。谁能告诉我怎么可能！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-04T08:38:48.943

尝试这样的事情

```
<table data-active="1">
    <tr><td>line<td/></tr>
    <tr><td>line<td/></tr>
    <tr><td>line<td/></tr>
    <tr><td>line<td/></tr>
<table>​ 
```

和js：

```
$(document).keydown(function(e){
var table = $('table');
if(e.keyCode == 40)
{
    $('table tr:not(:nth-child(' + table.data('active') + '))').css('color','black');
    $('table tr:nth-child(' + table.data('active') + ')').css('color','red');
    table.data('active', table.data('active') + 1);
}
}); 
```

然后更改为处理其他键，循环行为等。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-04T08:35:56.147

```
$(document).keydown(function(event) {
                switch (event.keyCode) {
                    case 38: /*Function for selecting when arroup*/ break;
                    case 40: /*Function for selecting when arrowdown*/ break;
                }
            }); 
```

你的意思是这样的吗？

# oop - OO设计继承

> ID：12723220
> 
> 赞同：0
> 
> 时间：2012-10-04T08:26:18.967
> 
> 标签：oop, inheritance

我有这两个代表一些股票数据的类。他们没有任何行为。这些类有一些公共数据，如 ExchangeSymbol、MySymbol 和 Time。您认为将这些抽象为基类是个好主意吗？请分享你的想法。

```
class SymbolData
{
    public string ExchangeSymbol { get; set; }
    public string MySymbol { get; set; }
    public double Price { get; set; }
    public int Volume { get; set; }
    public string Time { get; set; }
}

class EquityQuoteData 
{
    public string ExchangeSymbol { get; set; }
    public string MySymbol { get; set; }
    public double AskPrice { get; set; }
    public double BidPrice { get; set; }
    public int AskVolumne { get; set; }
    public int BidVolumne { get; set; }
    public string Time { get; set; }
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-04T08:48:04.277

我不会无缘无故地创建第三个（基）类。

您可以进行`EquityQuoteData`继承，`SymbolData`因为它们共享大多数属性，尽管前者具有`AskPrice`并`BidPrice`代替`Price`了子类中未使用的 。

考虑实现一个通用接口：

```
interface IData
{
    string ExchangeSymbol { get; set; }
    string MySymbol { get; set; }
    string Time { get; set; }
} 
```

接着：

```
class SymbolData : IData
{
    public double Price { get; set; }
    public int Volume { get; set; }

    public string IData.ExchangeSymbol
    {
        get; set;
    }

    public string IData.MySymbol
    {
        get; set;
    }

    public string IData.Time
    {
        get; set;
    }
}

class EquityQuoteData : IData
{
    public double AskPrice { get; set; }
    public double BidPrice { get; set; }
    public int AskVolumne { get; set; }
    public int BidVolumne { get; set; }

    public string IData.ExchangeSymbol
    {
        get; set;
    }

    public string IData.MySymbol
    {
        get; set;            
    }

    public string IData.Time
    {
        get; set;
    }
} 
```

无论如何，如果你必须这样做：

```
public double AskPrice { get; set; }
public double BidPrice { get; set; }
public int AskVolumne { get; set; }
public int BidVolumne { get; set; } 
```

这也是一种代码味道，所有这些前缀。

我会考虑将`price`and `volumne`(?) 放在一个类中，不管它的名字是什么，然后给你的`EquityQuoteData`类两个属性 -`Ask`并且`Bid`- 两者都是相同的类型。`SymbolData`只会有一个。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-04T08:48:32.920

如果 ExchangeSymbol、MySymbol 和 Time 有点相关，请将它们分组到一个可重用的类中，并使其成为 SymbolData 和 EquityQuoteData 的成员（优先*组合*而不是继承）。**如果他们不是：不要！**

*记住：继承/多态主要是关于行为而不是数据。值对象中的继承可能会导致不希望的副作用——例如，equals 在这里表现不佳。*

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-04T10:01:08.413

查看继承的一种方法是考虑`has-a`and`is-a`关系。

如果您有一些基类（数据对两个名称都是通用的），`Data`那么您必须确保句子“`EquityQuoteData`是（类型）`Data`”和“`SymbolData`是（类型）`Data`”。

另一种考虑它的方便方法是问：你`Data`能用任何派生类型替换香味中的所有实例，并且仍然让香味有意义吗？

例如：

我今天有很多`Data`东西要处理。

我今天有很多`EquityQuoteData`东西要处理。

在您的情况下，我需要更多地了解每个类的角色，但我会说可能是的，您应该抽象出相关类的共同特征。

*在不相关的说明中，这基本上是一个结构而不是一个类。我会研究封装和其他 OO 设计原则（Google SOLID）*

# mysql - 简单的 TRIGGER 抛出错误并停止执行

> ID：12723225
> 
> 赞同：0
> 
> 时间：2012-10-04T08:26:36.947
> 
> 标签：mysql, sql, mysqli

我在 MySQL 中有这个触发器

```
DROP TRIGGER IF EXISTS BeforeGivingRight;
DELIMITER $$
CREATE TRIGGER BeforeGivingRight
BEFORE INSERT ON right_code 
FOR EACH ROW
BEGIN
    DECLARE num_rows INT NULL;
    SELECT count(right_code) FROM valid_rights WHERE right_code  =
                                            new.user_right.right INTO num_rows;

    IF num_rows = 0
    THEN
        set msg = concat('Error: That right is not allowed!',
                                      cast(new.user_right.right as char));
        signal sqlstate '45000' set message_text = msg;
    END IF;
END $$
DELIMITER ; 
```

它给了我这个错误

```
#1064 - You have an error in your SQL syntax; check the manual that corresponds 
    to your MySQL server version for the right syntax to use near 'NULL; SELECT
    count(right_code) FROM valid_rights WHERE right_code  = new.user_' at line 5 
```

这里有什么问题？我想要做的是，在我插入一些权利（例如 201）之前`valid_rights`，使用触发器检查它是否存在。

**编辑（答案）**

因此，当您想要一个引发异常的触发器时，您可以使用：

```
DROP TRIGGER IF EXISTS BeforeGivingRight;
DELIMITER $$
CREATE TRIGGER BeforeGivingRight
BEFORE INSERT ON user_rights 
FOR EACH ROW
BEGIN
    DECLARE num_rows INT DEFAULT NULL;
    DECLARE msg VARCHAR(32) DEFAULT "";
    SELECT count(valid_rights.right_code) FROM valid_rights WHERE right_code  = new.right INTO num_rows;

    IF num_rows = 0
    THEN
        set msg = concat('Error: That right is not allowed!', cast(new.right as char));
        signal sqlstate '45000' set message_text = msg;
    END IF;
END $$
DELIMITER ; 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-04T08:28:29.200

你错过了*关键字* `DEFAULT`。使用`0`而不是`NULL`.

```
DECLARE total_sale INT DEFAULT 0; 
```

**[请参阅此处：存储过程中的变量](http://www.mysqltutorial.org/variables-in-stored-procedures.aspx)**

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-04T13:55:35.107

因此，当您想要一个引发异常的触发器时，您可以使用：

```
DROP TRIGGER IF EXISTS BeforeGivingRight;
DELIMITER $$
CREATE TRIGGER BeforeGivingRight
BEFORE INSERT ON user_rights 
FOR EACH ROW
BEGIN
    DECLARE num_rows INT DEFAULT NULL;
    DECLARE msg VARCHAR(32) DEFAULT "";
    SELECT count(valid_rights.right_code) FROM valid_rights WHERE right_code  = new.right INTO num_rows;

    IF num_rows = 0
    THEN
        set msg = concat('Error: That right is not allowed!', cast(new.right as char));
        signal sqlstate '45000' set message_text = msg;
    END IF;
END $$
DELIMITER ; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-04T09:17:12.353

作为一种解决方法：如果表是 InnoDb，那么您可以使用外键来限制不存在的值。只需将外键添加到`user_rights`表中，服务器就会引发错误。

例如 -

```
ALTER TABLE right_code
  ADD CONSTRAINT FK_right_code FOREIGN KEY (`right`)
    REFERENCES valid_rights(right_code) ON DELETE RESTRICT ON UPDATE RESTRICT; 
```

另外，使字段`valid_rights`. `right_code`唯一的，如果不是。

# javascript - 为什么我的替换没有按预期工作

> ID：12723228
> 
> 赞同：-1
> 
> 时间：2012-10-04T08:26:44.403
> 
> 标签：javascript, html

> **可能重复：**
> [替换字符串中一个字符的所有实例的最快方法](https://stackoverflow.com/questions/2116558/fastest-method-to-replace-all-instances-of-a-character-in-a-string)

我有这个

```
<p id="demo">/,\,:,*,?,",<,>,|</p>
<input type="button" onclick="myFunction()" value="Replace"/>

function myFunction() {
    var str = document.getElementById("demo").innerHTML;
    var n = str.replace(",", ", ");
    document.getElementById("demo").innerHTML = n;
} 
```

我想要的是用`"/,\,:,*,?,",<,>,|"`这个替换它，`"/, \, :, *, ?, ", <, >, |"`但我得到的是这个`"/, \,:,*,?,",<,>,|"`。

我究竟做错了什么 ？？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-04T08:30:17.430

您必须使用正则表达式来局部替换字符串`g`：

```
var n = str.replace(/,/g, ', '); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-04T08:30:14.613

替换此行 `var n = str.replace(",", ", ");`

和

`var n = str.replace(/,/g, ", ");`

默认它只会替换第一个发生的

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-04T08:30:24.840

javascript 中的替换仅替换第一次出现。

您需要使用正则表达式或循环。

看看这个：[Javascript 多重替换](https://stackoverflow.com/questions/832257/javascript-multiple-replace)

# android - 将宽度定义为百分比android

> ID：12723229
> 
> 赞同：1
> 
> 时间：2012-10-04T08:26:45.747
> 
> 标签：android

我需要帮助你。我不知道为什么这段代码不能正确运行。我希望第一个 textview 和 edittext 有 50% 的空间，第二个 textview 和 edittext 有 50% 的其他空间，而它只显示一个空布局。请帮帮我谢谢

```
<RelativeLayout
    android:layout_width="fill_parent"
    android:layout_height="wrap_content"
    android:weightSum="1.0"
    >
<TextView
      android:layout_height="wrap_content" 
      android:layout_weight="0.10"
      android:layout_width="0dip"
      android:id="@+id/lytner_card_question_text"
      android:layout_alignParentRight="true"
      android:gravity="center"
      android:textSize="20dp"
   />
<ScrollView android:id="@+id/myparentScrollview"
            android:layout_height="100dp"
            android:layout_weight="0.40"
            android:layout_width="0dip"
            android:layout_toLeftOf="@+id/lytner_card_question_text"

            >

<EditText
    android:layout_width="fill_parent"
    android:layout_height="wrap_content"
    android:id="@+id/lytner_card_question_etext"
    android:minHeight="100dp"    
    />

</ScrollView>
<TextView 
    android:layout_height="wrap_content"
     android:layout_weight="0.10"
    android:layout_width="0dip"
    android:id="@+id/lytner_card_answer_text"
    android:layout_toLeftOf="@+id/myparentScrollview"
    android:gravity="center"
    android:textSize="20dp"

  />
<ScrollView android:id="@+id/myparentScrollview1"
            android:layout_height="100dp"
            android:layout_weight="0.40"
            android:layout_width="0dip"
            android:layout_toLeftOf="@+id/lytner_card_answer_text"

       >
<EditText 
    android:layout_width="fill_parent"
    android:layout_height="wrap_content"
    android:id="@+id/lytner_card_answer_etext"
    android:minHeight="100dp"
   />
</ScrollView>

</RelativeLayout> 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-04T08:36:13.877

以下代码为您提供了两个 LinearLayouts 作为容器，每个容器的高度为屏幕的一半：

```
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
    xmlns:tools="http://schemas.android.com/tools"
    android:layout_width="match_parent"
    android:layout_height="match_parent"
    android:orientation="vertical" >

    <LinearLayout 
        android:id="@+id/container1"
        android:layout_width="match_parent"
        android:layout_height="0dp"
        android:layout_weight="1"></LinearLayout>

    <LinearLayout
        android:id="@+id/container2"
        android:layout_width="match_parent"
        android:layout_height="0dp"
        android:layout_weight="1">
    </LinearLayout>

</LinearLayout> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-04T08:33:51.707

将权重总和添加到相对布局是没有意义的。它仅适用于线性布局。将您的相对布局更改为线性布局，然后重试。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-04T08:34:20.300

在**相对**布局**权重**不起作用中，将布局更改为**线性**，然后尝试权重。

# python - python和python2.7运行不同的python实例

> ID：12723234
> 
> 赞同：0
> 
> 时间：2012-10-04T08:27:00.927
> 
> 标签：python, python-2.7, centos, python-2.x

这是我写的时候的输出`whereis python2.7`

`python2.7: /usr/local/bin/python2.7 /usr/local/lib/python2.7 /opt/python2.7.1/bin/python2.7`

如您所见，python 的版本是python2.7.2， python`/usr/local/`的版本是python2.7.1。`/opt/python/2.7.1`

当我写`python`它运行时`python2.7.1`，因为我改变了 bash_profile。但是当我写`python2.7`它运行时`python2.7.2`。

我想完全删除`python2.7.2`下面的，`/usr/local/`并使用下面的二进制文件`/opt/python2.7.1`。

我怎么解决这个问题？

注意：它是一个 CentOS5 服务器，并且按照您的考虑已经安装了 python2.4。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-04T08:31:19.627

您的 PATH 混淆了，请执行以下操作：

```
export PATH=/opt/python2.7.1/bin:$PATH
export LD_LIBRARY_PATH=/opt/python2.7.1/lib:$LD_LIBRARY_PATH 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-04T08:31:14.030

您可以简单地尝试在 ~/.bash_aliases 中使用别名，以便始终在终端和用户实例中引用所需的 python。我不建议删除 python2.7.2，因为它可能会导致依赖问题

像这样

```
alias python2.7 = "/path/to/python2.7.1/" 
```

# php - base64_encode() 带汉字

> ID：12723235
> 
> 赞同：1
> 
> 时间：2012-10-04T08:27:06.130
> 
> 标签：php, base64, character

我目前正在完成一个允许用户通过邮件将卡片发送给其他人的电子贺卡系统。

邮件还包含一个在浏览器中查看同一张卡片的链接，这个链接基本上是通过对文本进行编码生成的`base64_encode()`

```
'http://www.test.com/ecards?card=' . base64_encode('your text'); // like this 
```

这对英文文本很好，但是一旦我输入一些中文并访问链接，字符都搞砸了

```
汉��N�B��Y][ۘ[�[�\�N�9�(�*���B�[�Z[��0��q��B��[\Y�YY�[�\�N�9cc�+�N�B��Y][ۘ[�[�\�N�:#��*���B��[�\�N�9.+y��� 
```

我的字符集与我的字符集无关，它设置为 UTF-8，我什至打印了相同的中文文本，它显示得很完美。

所以我想知道是否`base64_encode()`并且`base64_decode()`可能与此有关。

```
// Doesn't work
echo base64_decode($body);

// Chinese characters show up fine!!!!
echo 'simplified Chinese: 汉语; <br />';
echo 'traditional Chinese: 漢語; <br />';
echo 'Pinyin: Hànyǔ; <br />';
echo 'simplified Chinese: 华语; <br />';
echo 'traditional Chinese: 華語; <br />';
echo 'Chinese: 中文; <br />'; 
```

编辑：当我在使用[http://www.test.com/ecards?card](http://www.test.com/ecards?card) =中文之类的网址时尝试输出 $_GET[] 时，它工作正常。所以很明显是 the `base64_encode`or`base64_decode`不能处理汉字。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-04T08:55:28.963

这些`base64_`函数不对字符进行操作，而是对字节进行操作。他们会很高兴地转换您传入的任何内容而不会出错。

您的问题是您用作输入的字符的编码与解码后显示它们的页面的编码不匹配。“你的文字”从何而来？如果是表单提交，则需要确保表单出现的页面使用与“查看卡片”页面相同的编码显示，*或者*表单具有`accept-charset`与“查看卡片”页面的编码匹配的属性.

# macos - MacOSX：如何禁用重音字符输入

> ID：12723236
> 
> 赞同：55
> 
> 时间：2012-10-04T08:27:12.813
> 
> 标签：macos, quotes, diacritics

我在 MacOSX Lion 上使用 Eclipse Juno，但打字有问题。

我经常打印一个引号/撇号并移动插入符号。但是在这个 Mac 版本的 Eclipse 中，我键入时的引用由橙色标记突出显示（这似乎是 Mac 智能引号功能），当我移动插入符号时 - 引用消失了。（在 Xcode 和 Appcode 中一切正常）。

我试过了

```
defaults write NSGlobalDomain AutomaticQuoteSubstitutionEnabled -bool false 
```

要全局禁用智能引用，重新启动计算机，但这无济于事。

我还试图在 Eclipse 首选项中找到与“引用”、“智能”、“更正”相关的内容，但没有运气。

试图禁用“智能插入模式” - 没用。

试图设置`Java -> Typing -> Automatically close -> Strings`为`on`- 但现在，当我在打印报价后移动插入符号时，Eclipse 将它加倍而不是像以前那样删除。也很烦人。为什么在其他程序中引用处理按预期工作，但我不能让它在 Eclipse 中以相同的方式工作？

顺便说一句，当我最近按下引号时，我得到了“ä”符号。所以我认为这与自动更正有关。
但即使我禁用`Language & Text -> Automatic replacement`，Eclipse也会将`"`+替换`a`为`ä`.

如何禁用此行为？

* * *

## 回答 #1

> 赞同：161
> 
> 时间：2012-10-06T10:43:08.057

是的！很遗憾我不知道这么简单的事情 - 但这是因为我不是 mac-maniac，我同时使用多个操作系统。当我发现引号 + 符号给了我一个重音字符时，我意识到发生了什么。

这很容易：

*   启动系统偏好设置，打开语言和文本窗格。
*   单击输入源选项卡。
*   在左侧输入法列表中，向下滚动并启用美国，禁用美国国际。

这个“美国国际”做了所有的坏事。一些 IDE 使用自己的输入系统，而 Eclipse 使用通用输入。这个功能是那些“方便的小东西”之一（就像智能引号一样），它有时会让我在 Mac 上的生活变成噩梦。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2017-09-13T16:03:25.830

如果您希望禁用美国英语以外的语言的自动重音符号，我在这里提出了一个解决方案：[如何防止键入“~”等特殊字符来修改下一个键盘输入？](https://stackoverflow.com/questions/46198806/how-to-prevent-the-typing-of-special-characters-like-modifying-the-next-keyb/46202010#46202010)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2021-09-17T14:20:25.897

您需要在键盘窗口上按 2 个键 + shift，它可以完美运行。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2022-02-05T14:07:33.657

当您使用`ABC - India`布局时也会发生这种情况，只需删除该布局并添加`ABC`一个即可。

[![在此处输入图像描述](../Images/b5942ec5df6ff54c67583f8f463e0b06.png)](https://i.stack.imgur.com/h1ftK.png)

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2021-11-19T07:26:23.903

键盘 -> 输入源 -> + -> 其他 -> “Unicode 十六进制输入”

这将禁用特殊字符的选项键。

我还删除了所有其他输入源以避免冲突

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2021-12-06T10:18:04.320

在我的外部键盘上要获得反引号，我必须按`Alt + \`，但是我按下的下一个字符会删除反引号并将其替换为重音字符，即键入 ` 然后 a 给我 à。

如果您按 Alt+Shift+\，则不会发生此“自动重音”行为。

# javascript - 使用 javascript 函数时未填充 jQuery 数据表

> ID：12723238
> 
> 赞同：0
> 
> 时间：2012-10-04T08:27:20.587
> 
> 标签：javascript, jquery, jquery-datatables

我有一个数据表脚本，如下所示

```
$('#genericTable').dataTable( {
        "bProcessing": true,
        "sAjaxSource": "resources/json/apps.json",
        "sPaginationType"   : "full_numbers",
        "bJQueryUI"         : true,
        "bRetrieve"         : true,
        "bPaginate"         : true,
        "bSort"             : true,
        "aaSorting"  : [[ 3, "desc" ]],
        "fnRowCallback": function( nRow, aData, iDisplayIndex, iDisplayIndexFull ) {
            $('td:eq(0)', nRow).html( '<a href="' + aData[3] +'" >'  +
                    aData[0] + '</a>');
        }
    }).columnFilter({ sPlaceHolder: "head:after",
        aoColumns: [ null,
                     { type: "text" },
                     null
                   ]
    }); 
```

当我将此代码放入准备好的函数中时，表格已完美填充，但是当我将此代码放入某些 javascript 函数并使用 onClick 调用此函数时，表格未填充。

有谁知道这个的解决方案？

# mongodb - 用于过滤应用程序的弹性搜索与 MongoDB

> ID：12723239
> 
> 赞同：198
> 
> 时间：2012-10-04T08:27:25.090
> 
> 标签：mongodb, elasticsearch

这个问题是关于在深入研究实验和实现的细节之前做出架构选择。这是关于弹性搜索与 MongoDB 在可扩展性和性能方面的适用性，用于某种特定目的。

假设两者都存储具有字段和值的数据对象，并允许查询该对象主体。因此，可能根据临时选择的字段过滤掉对象的子集，这对两者都适用。

我的应用程序将围绕根据标准选择对象展开。它将通过同时过滤多个字段来选择对象，换句话说，它的查询过滤条件通常包括 1 到 5 个字段，在某些情况下可能更多。而选择作为过滤器的字段将是大量字段的子集。想象一下现有的大约 20 个字段名称，每个查询都是尝试从这 20 个字段中的几个字段过滤对象（它可以少于或超过 20 个整体字段名称，我只是使用这个数字来演示字段到在每个离散查询中用作过滤器的字段）。过滤可以通过所选字段的存在以及字段值来进行，例如过滤掉具有字段 A 且其字段 B 在 x 和 y 之间的对象，

我的应用程序将不断地进行这种过滤，而在任何时候哪些字段用于过滤方面都没有任何或很少的常数。也许在 elasticsearch 中需要定义索引，但即使没有索引，速度也可能与 MongoDB 相当。

根据进入存储的数据，没有关于此的特殊细节..对象在插入后几乎不会更改。也许需要删除旧对象，我想假设两个数据存储都支持在内部或通过应用程序查询过期删除内容。（不太常见的是，适合某个查询的对象也需要被删除）。

你怎么看？而且，你有没有尝试过这个方面？

对于此类任务，我对两个数据存储中的每一个的性能和可扩展性感兴趣。这是一种架构设计问题，欢迎使用商店特定选项或查询基石的详细信息来使其架构良好，作为经过深思熟虑的建议的演示。

谢谢！

* * *

## 回答 #1

> 赞同：425
> 
> 时间：2012-10-04T18:22:49.510

首先，这里有一个重要的区别：MongoDB 是一个通用数据库，Elasticsearch 是一个由 Lucene 支持的分布式文本搜索引擎。人们一直在谈论使用 Elasticsearch 作为通用数据库，但知道这不是它的原始设计。我认为通用 NoSQL 数据库和搜索引擎正在走向整合，但就目前而言，两者来自两个截然不同的阵营。

我们在我的公司中同时使用 MongoDB 和 Elasticsearch。我们将数据存储在 MongoDB 中，并专门使用 Elasticsearch 来实现其全文搜索功能。我们只将需要查询的 mongo 数据字段的一个子集发送到 elastic。我们的用例与您的用例不同，因为我们的 Mongo 数据一直在变化：一条记录​​或一条记录的字段的子集，每天可以更新几次，这可能需要将该记录重新索引为弹性。仅出于这个原因，使用弹性作为唯一的数据存储对我们来说不是一个好选择，因为我们无法更新选择字段；我们需要重新索引整个文档。这不是弹性限制，这就是 Lucene 的工作方式，弹性背后的底层搜索引擎。在您的情况下，记录不会 一旦存储就不会更改，这样您就不必做出选择。话虽如此，如果数据安全是一个问题，我会三思而后行使用 Elasticsearch 作为数据的唯一存储机制。它可能会在某个时候到达那里，但我不确定它是否还在那里。

在速度方面，Elastic/Lucene 不仅与 Mongo 的查询速度相当，在您的情况下，“在任何时候用于过滤的字段几乎没有固定不变”，它可能是幅度更快，尤其是当数据集变得更大时。区别在于底层查询实现：

*   Elastic/Lucene 使用[向量空间模型](http://en.wikipedia.org/wiki/Vector_Space_Model)和[倒排索引](http://en.wikipedia.org/wiki/Inverted_index)进行[信息检索](http://en.wikipedia.org/wiki/Information_retrieval)，这是将记录相似性与查询进行比较的高效方法。当你查询 Elastic/Lucene 时，它​​已经知道答案了；它的大部分工作在于按最有可能与您的查询词匹配的结果为您排名。这一点很重要：搜索引擎，而不是数据库，不能保证你得到准确的结果；他们根据与您的查询的接近程度对结果进行排名。碰巧的是，大多数时候，结果接近准确。
*   Mongo 的方法是更通用的数据存储。它将 JSON 文档相互比较。您可以通过各种方式获得出色的性能，但您需要仔细设计索引以匹配您将运行的查询。具体来说，如果您有多个要查询的字段，则需要仔细制作[复合键](http://www.mongodb.org/display/DOCS/Indexes#Indexes-CompoundKeys)以便他们尽可能快地减少将要查询的数据集。例如，您的第一个键应该过滤掉大部分数据集，第二个键应该进一步过滤掉剩下的内容，依此类推。如果您的查询与定义的索引中的键和这些键的顺序不匹配，您的性能将会下降很多。另一方面，Mongo 是一个真正的数据库，所以如果您需要准确性，那么它将给出的答案将是准确的。

对于过期的旧记录，Elastic 具有内置的 TTL 功能。我认为 Mongo 刚刚在 2.2 版中引入了它。

由于我不知道您的其他要求，例如预期的数据大小、事务、准确性或过滤器的外观，因此很难提出任何具体建议。希望这里有足够的内容可以帮助您入门。

# android - 更改语言环境后，styles.xml 中的样式不会重新加载

> ID：12723243
> 
> 赞同：3
> 
> 时间：2012-10-04T08:27:46.933
> 
> 标签：android, android-layout

我的应用程序有两种语言。从右到左和从左到右。我在应用程序内部更改语言环境（不是从电话设置）。并在 resume() 函数上重新加载数据以查看 UI 上的更改。我有两个值文件夹。一个值-en，一个值-fa。要将 textview 的方向更改为 RTL 和 LTR，请将两个 styles.xml 放在这些文件夹中。样式.xml（值-en）：

```
<?xml version="1.0" encoding="utf-8"?>
<resources
xmlns:android="http://schemas.android.com/apk/res/android">
<style name="Direction">
    <item name="android:gravity">left</item>
    <item name="android:layout_gravity">left</item>
</style>
</resources> 
```

样式.xml（值-fa）：

```
<?xml version="1.0" encoding="utf-8"?>
<resources
xmlns:android="http://schemas.android.com/apk/res/android">
<style name="Direction">
    <item name="android:gravity">right</item>
    <item name="android:layout_gravity">right</item>
</style>
</resources> 
```

并使用这种风格，例如我这样做：

```
<?xml version="1.0" encoding="UTF-8"?>
<RelativeLayout
xmlns:android="http://schemas.android.com/apk/res/android"
android:layout_width="fill_parent"
android:layout_height="wrap_content">
<TextView
android:id="@+id/menutext"
android:layout_width="fill_parent"
android:layout_height="wrap_content"
style="@style/Direction"
android:padding="0dp"/>
</RelativeLayout> 
```

如果我运行应用程序，一切正常，并且 textview 的方向与语言环境有关。**问题就在这里**，当我从选项菜单中更改应用程序设置的语言时，数据加载正确，但方向不正确。我应该去另一个活动以查看方向的变化。

为了解决这个问题，我可以删除 styles.xml，因为我正在使用 Html.fromHtml() 并且我的数据有

```
<p dir="LTR"> 
```

和

```
<p dir="RTL"> 
```

标签？

另一个可能的解决方案（感谢 TOMCA 的评论）：[android 在运行时动态更改样式](https://stackoverflow.com/questions/3241729/android-dynamically-change-style-at-runtime)

但问题仍然存在。有人知道吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-06T09:14:54.847

做这里解释的事情： [android dynamic change style at runtime](https://stackoverflow.com/questions/3241729/android-dynamically-change-style-at-runtime)

对于恢复问题：只需尝试在 onResume 中调用 setContentView()，如下所示：

```
@Override
 protected void onResume() {
     if(selectedLang.equalsIgnoreCase("fa"))
    context.setTheme(R.style.CustomTheme_DirectionRight);
     else
    context.setTheme(R.style.CustomTheme_DirectionLeft);
     super.onResume();
     setContentView(R.layout.content);
     findAgainViews();//because recalling setContentView reset all findViewById()
 } 
```

# sql-server - 使用兼容性级别较低的 SQL Server 是否有负面影响

> ID：12723252
> 
> 赞同：4
> 
> 时间：2012-10-04T08:28:05.093
> 
> 标签：sql-server, performance, sql-server-2008-r2, database-performance

我们有 SQL Server 2008 R2，我们将其用于兼容级别设置为 2005 (90) 的数据库。

我们将在某个时候将其升级到 2008，但与此同时，我想知道将数据库置于较低的兼容性级别是否会对它的性能产生负面影响？

我发现[这个问题](https://stackoverflow.com/a/178509/95399)暗示可能会产生负面影响，但它适用于旧版本的 SQL Server。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-04T13:54:03.067

我现在正在升级 SQL Server，我们正在努力将兼容级别提高到 100。我没有观察到我们的应用程序的性能差异。我们进行更改的部分原因是为了利用 SQL Server 的一些新功能。我们在 80 级，所以主要原因是我们无法升级到 2008 R2，直到我们在更高级别运行。请注意，不要落后于当前的兼容级别，以至于无法升级数据库。

我们一直在检查我们的代码库，以删除使用过时语法的手动插入提示。事实证明，删除提示实际上提高了性能。据推测，这是因为查询优化器在过去十年中已经改进到可以比十年前开发人员选择的优化更好地优化。所以间接地，我们发现增加兼容级别提高了性能，但这仅仅是因为我们不得不改变我们的应用程序代码库。

一旦我们提高兼容级别，我们也许能够利用将提高性能的新功能，但我们还没有发现在较低兼容级别运行数据库比在同一数据库（和应用程序）运行相同的数据库具有更低的性能。更高的兼容性级别。

# objective-c - 使用核心数据数据库

> ID：12723256
> 
> 赞同：0
> 
> 时间：2012-10-04T08:28:18.010
> 
> 标签：objective-c, ios, core-data, nsmanagedobjectcontext

我正在使用核心数据数据库。到目前为止，我的工作是从 Web 服务获取我的所有数据并将其放入核心数据数据库中。为此，我正在做以下事情。

```
- (void)viewWillAppear:(BOOL)animated
{
    [super viewWillAppear:animated];
    if (!self.genkDatabase) {  // we'll create a default database if none is set
        NSURL *url = [[[NSFileManager defaultManager] URLsForDirectory:NSDocumentDirectory inDomains:NSUserDomainMask] lastObject];
        url = [url URLByAppendingPathComponent:@"Default appGenk Database"];
        self.genkDatabase = [[UIManagedDocument alloc] initWithFileURL:url]; // setter will create this for us on disk
    }
}
- (void)fetchGenkDataIntoDocument:(UIManagedDocument *)document
{
    NSLog(@"Fetch data");
    dispatch_queue_t fetchQ = dispatch_queue_create("Genk fetcher", NULL);
    dispatch_async(fetchQ, ^{
        NSArray *news       = [GenkData getNews];
        NSArray *players    = [GenkData getPlayers];
        NSArray *staff      = [GenkData getStaff];
        NSArray *trainingen = [GenkData getTrainingen];

        [document.managedObjectContext performBlock:^{ // perform in the NSMOC's safe thread (main thread)
            for (NSDictionary *genkInfo in news) {
               [News newsWithGenkInfo:genkInfo inManagedObjectContext:document.managedObjectContext];
                // table will automatically update due to NSFetchedResultsController's observing of the NSMOC
            }
            for (NSDictionary *genkInfo in staff) {
                [Staff staffWithGenkInfo:genkInfo inManagedObjectContext:document.managedObjectContext];
                // table will automatically update due to NSFetchedResultsController's observing of the NSMOC
            }
            for (NSDictionary *genkInfo in players) {
                [Team teamWithGenkInfo:genkInfo inManagedObjectContext:document.managedObjectContext];
                // table will automatically update due to NSFetchedResultsController's observing of the NSMOC
            }
            for (NSDictionary *genkInfo in trainingen ) {
                [Training trainingWithGenkInfo:genkInfo inManagedObjectContext:document.managedObjectContext];

            }
            [document saveToURL:document.fileURL forSaveOperation:UIDocumentSaveForOverwriting completionHandler:NULL];
            // note that we don't do anything in the completion handler this time
        }];
    });
}
- (void)setGenkDatabase:(UIManagedDocument *)genkDatabase
{
    if (_genkDatabase != genkDatabase) {
        _genkDatabase = genkDatabase;
        [self useDocument];
    }
}
- (void)useDocument
{
    if (![[NSFileManager defaultManager] fileExistsAtPath:[self.genkDatabase.fileURL path]]) {
        // does not exist on disk, so create it
        [self.genkDatabase saveToURL:self.genkDatabase.fileURL forSaveOperation:UIDocumentSaveForCreating completionHandler:^(BOOL success) {

            [self setupFetchedResultsController];
            [self fetchGenkDataIntoDocument:self.genkDatabase];

        }];
    } else if (self.genkDatabase.documentState == UIDocumentStateClosed) {
        // exists on disk, but we need to open it
        [self.genkDatabase openWithCompletionHandler:^(BOOL success) {
            [self setupFetchedResultsController];
        }];
    } else if (self.genkDatabase.documentState == UIDocumentStateNormal) {
        // already open and ready to use
        [self setupFetchedResultsController];
    }

}

- (void)setupFetchedResultsController // attaches an NSFetchRequest to this UITableViewController
{

    NSFetchRequest *request = [NSFetchRequest fetchRequestWithEntityName:@"News"];
    request.sortDescriptors = [NSArray arrayWithObject:[NSSortDescriptor sortDescriptorWithKey:@"date" ascending:NO]];

    self.fetchedResultsController = [[NSFetchedResultsController alloc] initWithFetchRequest:request
                                                                        managedObjectContext:self.genkDatabase.managedObjectContext
                                                                          sectionNameKeyPath:nil
                                                                                   cacheName:nil];

} 
```

我在打开的第一个 viewController 上执行此操作。我的问题是知道如何在不每次都在视图控制器中实现这些方法的情况下访问核心数据数据库？因为当我想执行一个获取请求时，我需要一个托管对象上下文。现在我只能通过以下方式获得它

self.genkDatabase.managedObjectContext

请帮助 非常感谢提前

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-04T09:26:01.623

如果我是你，我会使用单调对象（例如 FetchDataHandler）和 ObjectDelegate 来处理这个问题。

```
1.So you don't need to keep repeating the code. 
```

与其把代码放在视图控制器中，不如把它放在这个对象中，并提供方法。

```
- (void)fetchDataFrom:(NSURL *)_url 
```

和代表

```
- (void)fetchDataHandler:(FetchDataHandler *) _handler didFinishFetchingData:(XXXXX *) _XXXX 
```

其中 XXXX 是您从 URL 返回的内容。

根据您的代码，替换

```
[self setupFetchedResultsController]; 
```

至

```
[self.delegate fetchDataHandler:self didFinishFetchingData:self.data]; 
```

因此，您可以使用 'fetchDataFrom' 开始获取，当它完成时将调用 'didFinishFetchingData'。

主要思想是分离后端代码和前端代码。

如果我错了，请发表评论。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-04T09:17:23.543

好吧，我能想到一种方法。您可以在 AppDelegate 中创建 managedObjectContext 属性，该属性将在整个应用程序中共享。如果您在 Xcode 中创建一个新项目并（选择 master-Detail 应用程序）并在创建时选中“使用核心数据”选项。Xcode 会自动生成所有需要的代码，还会创建一个 managedObjectContext 属性。

您可以使用以下方法在应用程序中的任何位置获取上下文，

```
AppDelegate *appDelegate = (AppDelegate *)[UIApplication sharedApplication].delegate;
NSManagedObjectContext *context = appDelegate.managedObjectContext; 
```

# javascript - 使用 javascript iframe api 搜索视频

> ID：12723257
> 
> 赞同：0
> 
> 时间：2012-10-04T08:28:20.073
> 
> 标签：javascript, api, youtube, youtube-api

我需要允许我检索 youtube 视频的 url 搜索其标题的 API。谁能告诉我在哪里可以找到它？我正在尝试使用“YouTube Player API Reference for Embeds”

非常感谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-04T17:18:01.363

您可以使用 YouTube 数据 API 的[JSONP](http://en.wikipedia.org/wiki/JSONP)接口通过 JavaScript 从任何网页发出搜索请求。该文档位于

[https://developers.google.com/youtube/2.0/developers_guide_jsonc](https://developers.google.com/youtube/2.0/developers_guide_jsonc)

这是您可以通过 JSONP 调用的示例 URL：

[http://gdata.youtube.com/feeds/api/videos?v=2&alt=jsonc&callback=myCallback&q=baseball](http://gdata.youtube.com/feeds/api/videos?v=2&alt=jsonc&callback=myCallback&q=baseball)

这将调用`myCallback`与 term 匹配的前 25 个搜索结果的回调函数`baseball`。您正在搜索的短语（`baseball`在该示例中）可能出现在视频的标题、说明或关键字中，因此如果您只需要显示具有匹配标题的视频，则需要对结果进行后处理从你自己的代码。

每个条目的观看页面的 URL在数组`player.default`中每个条目的属性中返回。`items`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-04T08:46:15.277

这是在 Github 中使用纯 Javascript 实现 You Tube Search 您可以 fork 或下载存储库以满足您的需求

[Youtube 实时搜索](https://github.com/lucasmonteverde/Youtube-Live-Search)

在上面的实现中，它搜索标题和描述。并列出视频以及网址，它还显示视频的缩略图

我已经查看了这段代码它工作得很好，唯一的问题是它不会在搜索框中给你建议，我认为即使你微调一下也是可能的

# jsf-2 - rich:extendedDataTable 以只读模式呈现

> ID：12723261
> 
> 赞同：1
> 
> 时间：2012-10-04T08:28:30.157
> 
> 标签：jsf-2, richfaces

我正在为我的应用程序使用 JSF2.0、rich faces 4.2.2、tomcat 6.0.35。在其中一页上，有两个rich:extendedDataTable 组件，分别用于“tablelist”和“tablecontent”。单击 tablelist 数据表的行时，将进行 ajax 调用并呈现 tablecontent 数据表。问题是呈现的数据表是不可编辑的，即我无法选择行或执行其他操作，如单击等。

下面是代码：

```
 <h:panelGrid columns="2" cellspacing="0"  >  

       <rich:extendedDataTable value="#{tableBean.tableList}"  var="o" id="table1" iterationStatusVar="it" style="width:200px;height:400px;" onrowclick="select('#{o.name}');"
        <f:facet name="header">
        <h:outputText value="Table List" style="align:left;"></h:outputText>
        </f:facet>  
        <rich:column width="199px" id="tablist" >  
                <h:outputText value="#{o.name}"/>  
        </rich:column>              
       </rich:extendedDataTable> 

      <rich:extendedDataTable value="#{tableBean.rows}"  var="r" id="tableHum" iterationStatusVar="it" style="width:400px;height:400px;" >
        <f:facet name="header">
        <h:outputText value="Table content" style="align:left;"></h:outputText>
        </f:facet>  
        <c:forEach items="#{tableBean.columns}" var="c" varStatus="i">
            <rich:column  >
                <f:facet name="header">
                    <h:outputText value="#{c}" />
                </f:facet>
                <h:outputText value="#{r[i.index]}" style="align:center;"/> 
            </rich:column>
        </c:forEach>

    </rich:extendedDataTable>

      </h:panelGrid>
      <a4j:jsFunction name="select" action="#{tableBean.getTableData}" render="tableHum" execute="@this" status="tableDataStatus" >
    <a4j:param name="param1" assignTo="#{tableBean.tableName}" />
            </a4j:jsFunction>
      </h:form>
</h:body> 
```

有人有想法吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-05T17:15:35.007

`a4j:repeat`您好，我想我遇到了类似的问题，我建议您尝试一下`a4j:outputPanel`

# ajax - 在 jsf 中部分加载视图

> ID：12723262
> 
> 赞同：2
> 
> 时间：2012-10-04T08:28:29.883
> 
> 标签：ajax, jsf-2, primefaces

我想在***ajax***事件`ui:composition`上延迟渲染一个 xhtml 文件。

 *新的`ui:composition`需要在面板或 div 内呈现。

在rails中我这样做

```
render :partial => "file", :layout => :none 
```

**编辑**

还有一种方法可以将本地人传递到rails中的部分视图

```
 render :partial => "file", :layout => :none, :locals => {:some_object => @some_object} 
```

我如何将对象发送到此*以呈现视图*。

我在我的 xhtml 中使用以下代码：

```
<p:commandButton id="selectButton" value="Add" title="Add User" type="submit"
                                 action="#{userBean.add}">
  <f:ajax render=":userLanding:addPanel"/>                     
</p:commandButton> 
```

在我的 ManagedBean 里面我有

```
public String add()
{
   return "user"; // i need to open user.xhtml page.
} 
```

`<div id="addPanel">`或者更好`<p:panelGroup layout="block" id="addPanel">`

`userBean#add()`负责渲染 abc.xhtml，需要在我的 ui 容器中渲染。

目前它重定向到页面（abc.xhtml）而不是在目标面板/div内呈现。

进行这种视图加载的 JSF 方式是什么？

**编辑2：**

我也试过：

```
<h:panelGroup>
    <ui:include src = "user.jsf"
</h:panelGroup> 
```

但条件是：ui 包含应该仅在按钮单击事件上，并且 src 文件将显示在面板内（无导航）。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-04T15:05:47.983

PrimeFaces组件`<f:ajax>`不支持。`<p:xxx>`您应该`<p:ajax>`改用，或者在这种特殊情况下，只使用 PrimeFaces`UICommand`组件自己的`update`属性。

```
<p:commandButton ... update=":userLanding:addPanel" /> 
```

你只需要确保 action 方法返回`null`or `void`，否则导航仍然会发生。*

# vbscript - Get full server path of running VBScript file

> ID：12723271
> 
> 赞同：1
> 
> 时间：2012-10-04T08:29:01.363
> 
> 标签：vbscript, filesystemobject

is it possible to get the full server path of a VBScript file while it is running, but instead of showing the drive letter, it shows the server name?

I know I can use FileSystemObject's GetAbsolutePath, but instead of it showing S:\Some Folder\FileName.vbs, it shows \\servername\Some Folder\FileName.vbs?

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-04T08:42:08.140

VBScript runs in client side and you are trying to get the server path

May be you can try some thing like below

```
<script language="vbscript">
    dim path
    path = "<%=Request.PhysicalApplicationPath %>"
    alert(path)
</script> 
```

If you trying to use vbScript in an ASP/ASP.NET page, then you try using Server.MapPath as well.

```
<%=Server.MapPath("your file name")%> 
```

edit ---

Seems like in your case you are interested in finding the mapped drives of the user that is logged in. You could something like:

```
Set objNetwork = WScript.CreateObject("WScript.Network")
Set colDrives = objNetwork.EnumNetworkDrives
For i = 0 to colDrives.Count-1 Step 2
   Wscript.Echo colDrives.Item(i) & vbTab & colDrives.Item (i + 1)
Next 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-04T10:04:05.380

Found the solution, I can retrieve the drive letter using FileSystemObject.GetAbsolutePathName(""), and then use this code to convert the drive letter to the full UNC path, which works well: [http://support.microsoft.com/kb/160529](http://support.microsoft.com/kb/160529)

# ruby-on-rails - Ruby on Rails：未定义的方法“new_tech”

> ID：12723278
> 
> 赞同：-1
> 
> 时间：2012-10-04T08:29:33.917
> 
> 标签：ruby-on-rails, ruby, database, methods, undefined

我有一个应用程序，用户可以在其中提交项目。对于每个字段，他们可以选择将新数据放入数据库中，或者从通过的项目中选择旧数据来填充该字段。

在我的新视图中，我无法让它适用于这段代码：

```
<%= form_for(@technol) do |tech| %>
<div class="field">
    <%= tech.label :tech %><br />
    <%=  tech.text_field :new_tech, :maxlength => 30 %><br />

    OR<br />

    <%= collection_select(:technols, :id, @all_technols, :id, :tech, {}, {:multiple => true} ) %>
  </div>
<%end%> 
```

这是我的新创建操作：

**新的**

```
def new
    @project = Project.new
@technol = Technol.new(params[:tech])

@all_technols = Technol.all
tech_ids = params[:technols][:id].reject(&:blank?) unless params[:technols].nil?

@project_technol = @project.projecttechnols.build

    respond_to do |format|
      format.html # new.html.erb
      format.json { render json: @project }
    end
  end 
```

**创造**

```
def create
    @all_technols = Technol.all
    @project = Project.new(params[:project])
@technol = Technol.new(params[:tech])

    @project.client = params[:new_client] unless params[:new_client].blank?
    @project.project_owner = params[:new_project_owner] unless params[:new_project_owner].blank?

    @technol.tech = params[:new_tech] unless params[:new_tech].blank?

    @project.role = params[:new_role] unless params[:new_role].blank?
    @project.industry = params[:new_industry] unless params[:new_industry].blank?
    @project.business_div = params[:new_business_div] unless params[:new_business_div].blank?

    params[:technol].each_value do |tech|

    technology = Technol.find_or_create_by_tech(tech.strip)

    @project_technol = @project.projecttechnols.build(:technol_id => technology.id) 

  end

    respond_to do |format|
      if @project.save
        format.html { redirect_to @project, notice: 'Project was successfully created.' }
        format.json { render json: @project, status: :created, location: @project }
      else
        format.html { render action: "new" }
        format.json { render json: @project.errors, status: :unprocessable_entity }
      end
    end
  end 
```

使用此代码，我在尝试打开创建新项目页面时收到此错误：

```
NoMethodError in Projects#new

line #261 raised:

undefined method `new_tech' for #<Technol id: nil, tech: nil, created_at: nil, updated_at: nil>
Extracted source (around line #261):

258: <%= form_for(@technol) do |tech| %>
259: <div class="field">
260:     <%= tech.label :tech %><br />
261:     <%=  tech.text_field :new_tech, :maxlength => 30 %><br />
262: 
263: OR<br />
264: 
```

有任何想法吗？我是一个 Rails 菜鸟，所以在尝试回答时请记住这一点。任何帮助都感激不尽。提前致谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-04T08:35:13.810

检查 API[`text_field`](http://api.rubyonrails.org/classes/ActionView/Helpers/FormHelper.html#method-i-text_field)

```
text_field(object_name, method, options = {}) 
```

第一个参数是`object_name`which here is`:tech`和 not `:new_tech`。`:new_tech`既不是`tech`您正在迭代的对象的属性也不是方法，因此它会失败。

使输入字段与标签的属性匹配

```
<%= tech.label :tech %><br />
<%= tech.text_field :tech, :maxlength => 30 %> 
```

# c# - c# tooltip backcolor 和 forecolor 不会随着使用方法或其他方式而改变

> ID：12723280
> 
> 赞同：3
> 
> 时间：2012-10-04T08:29:40.473
> 
> 标签：c#, tooltip

我想在我的 Windows 窗体应用程序中使用工具提示。所以我创建了一个像这样的简单方法：

```
        public void MyTooltips(Control c, string m, bool b)
        {
            工具提示 t = new ToolTip();
            t.IsBalloon = b;
            t.SetToolTip(c, m);
            t.BackColor = 颜色.Crimson;
            t.ForeColor = 颜色.白色；
        }

```

我是这样使用它的：`MyTooltips(combobox1, "If anything, select zero.", true);`
在使用中，工具提示的前后颜色没有改变。工具提示显示为 Windows 7 默认工具提示的前后颜色。我怎样才能做到这一点？
亲切的问候。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-04T08:32:18.850

来自该属性的相关[MSDN 文章](http://msdn.microsoft.com/en-us/library/system.windows.forms.tooltip.backcolor.aspx)`BackColor`：

> 除非工具提示是所有者绘制的，否则此属性将被忽略。

如果要自定义工具提示的颜色，则必须设置`OwnerDraw`为 true 并自己绘制控件（使用`Draw`事件）。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-11-15T20:35:06.963

[HTML 渲染器](http://www.codeproject.com/Articles/32376/A-Professional-HTML-Renderer-You-Will-Use)可以做到这一点。例如：

```
htmlTooltip1.Set(textBox1, "<font color=\"red\">What is tooltip?</font>"); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2022-02-21T14:30:42.710

MSDN 帮助并非 100% 准确：如果您不启用视觉样式，BackColor**确实**有效：注释掉`Application.EnableVisualStyles()`Main() 中的调用。但纯粹主义者可能会建议您不要这样做。

# javascript - 我如何将参数传递给通用处理程序

> ID：12723284
> 
> 赞同：0
> 
> 时间：2012-10-04T08:30:03.070
> 
> 标签：javascript, asp.net, ajax, file-upload, generic-handler

**如何从 javascript/jquery 将参数传递给通用处理程序（Asp.net）？**

我有一个通用的`jquery plugin`（`ajaxfileupload`）处理程序，我需要从页面（jquery/javascript）传递一些参数（例如动态保存路径`autogenerated filename`，等等......）

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-05T04:01:18.373

其工作如下：

```
$.ajaxFileUpload(
{       
    url: 'MyHandler.ashx?filename=test.png&path=../test/Images'
        secureuri: false,
        fileElementId: 'fileToUpload',
        dataType: 'json',
        data: { name: 'logan', id: 'id' },
        success: function(data, status) {
            if (typeof (data.error) != 'undefined') {
                if (data.error != '') {
                    alert(data.error);
                } else {
                    alert(data.msg);
                }
            }
        },
        error: function(data, status, e) {
        alert(e);
    }
}) 
```

在通用处理程序中

```
public void ProcessRequest(HttpContext context)
{
    string stringParam = (string)context.Request["filename"];
} 
```

**另一种解决方案**

```
var strFileName="test.png";
$.ajaxFileUpload(    
{       
    url: 'MyHandler.ashx?filename=test.png&path=../test/Images'
        secureuri: false,
        fileElementId: 'fileToUpload',
        dataType: 'json',
        data: { name: 'logan', id: 'id',filename: strFileName },
        success: function(data, status) {
            if (typeof (data.error) != 'undefined') {
                if (data.error != '') {
                    alert(data.error);

                } else {
                alert(data.msg);

                }
            }
        },
        error: function(data, status, e) {
        alert(e);
    }
}) 
```

# c# - LINQ DataTable 选择不同的行

> ID：12723289
> 
> 赞同：3
> 
> 时间：2012-10-04T08:30:16.293
> 
> 标签：c#, linq

我正在尝试使用每个重复行的总和来获得不同的行

```
DataTable newItems = new DataTable();

newItems.Columns.Add("Qty");
newItems.Columns.Add("BarcodeNumber");
newItems.Columns.Add("DisplayName");
newItems.Columns.Add("UnitPrice");
newItems.Columns.Add("TotalPrice");

newItems.Rows.Add(1, "URT29384", "Wallet", 88.8, 88.8);
newItems.Rows.Add(1, "URT29233", "Mouse", 4.44, 4.44);
newItems.Rows.Add(1, "URT29756", "Flash Drive", 1.47, 1.47);
newItems.Rows.Add(1, "URT29323", "Spoon", 99.95, 99.95);
newItems.Rows.Add(1, "URT29384", "Wallet", 88.8, 88.8);
newItems.Rows.Add(1, "URT29384", "Wallet", 88.8, 88.8); 
```

我希望结果是

```
 3 URT29384  Wallet       266.4     266.4
 1 URT29233  Mouse          4.44      4.44
 1 URT29756  Flash Drive    1.47      1.47
 1 URT29323  Spoon         99.95     99.95 
```

这可能使用 LINQ 吗？这里有点帮助.. TYIA

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-10-04T08:36:54.373

是的，您可以使用`Enumerable.GroupBy`：

```
var result = newItems.AsEnumerable()
            .GroupBy(r => r.Field<String>("BarcodeNumber"))
            .Select(g => new { 
                Qty = g.Count(),
                BarcodeNumber = g.Key,
                DisplayName = g.First().Field<String>("DisplayName"),
                UnitPrice = g.Sum(r => r.Field<double>("UnitPrice")),
                TotalPrice = g.Sum(r => r.Field<double>("TotalPrice")),
            })
            .OrderByDescending(x => x.Qty); 
```

请注意，这不是您的列的匿名类型`DataTable`，`IEnumerable<DataRow>`而是匿名类型。如果需要，您将需要使用 foreach 循环将真实的 DataRows 添加到另一个 DataTable。

```
foreach (var grp in result)
    Console.WriteLine("Qty:{0} BarcodeNumber:{1} DisplayName:{2} UnitPrice:{3} TotalPrice:{4}"
        , grp.Qty, grp.BarcodeNumber, grp.DisplayName, grp.UnitPrice, grp.TotalPrice); 
```

您需要添加`using System.Linq;`.

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-04T08:44:14.717

是的，有可能

```
var foo = newItems.AsEnumerable()
    .GroupBy(item => item.Field<string>(newItems.Columns["BarcodeNumber"]));

DataTable newTable = new DataTable();

newTable.Columns.Add("Qty");
newTable.Columns.Add("BarcodeNumber");
newTable.Columns.Add("DisplayName");
newTable.Columns.Add("UnitPrice");
newTable.Columns.Add("TotalPrice");

foreach (var item in foo)
{
    newTable.Rows.Add(
    item.Count(),
    item.Key,
    item.First().Field<string>(newItems.Columns["DisplayName"]),
    item.Sum(row => decimal.Parse(row.Field<string>(newItems.Columns["UnitPrice"]))),
    item.Sum(row => decimal.Parse(row.Field<string>(newItems.Columns["TotalPrice"]))));
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-22T09:26:51.857

```
private static DataTable GetUniqueEntries(DataTable dt)  
    {  
        var query = (  
        from row in dt.AsEnumerable()  
        select row.Field<string>("UserName")).Distinct();  //any column <UserName>

        DataTable dtDistinctNames = new DataTable();  
        dtDistinctNames.Columns.Add("UserName", typeof(string));  

        //have to return a datatable, thus loop through entries  
        foreach (string item in query)  
        {  
            DataRow newRow = dtDistinctNames.NewRow();  
            newRow["UserName"] = item;  
            dtDistinctNames.Rows.Add(newRow);  
        }  

        return dtDistinctNames;  
    } 
```

# asp.net-mvc - 如何限制对 MVC 中的 Controller 或文件夹的访问？

> ID：12723294
> 
> 赞同：2
> 
> 时间：2012-10-04T08:30:43.173
> 
> 标签：asp.net-mvc, asp.net-mvc-3, asp.net-membership

我使用 Asp.Net MVC 3、C# 和 ApplicationServices Membership（起诉 MS Sql 2008 db 的标准方式）。

我的文件夹结构是

```
CONTROLLERS
-- PageAController.cs
-- ADMIN
   -- PageBController.cs 
```

我有一个用户，一些具有角色“AdminRole”，一些没有关联的规则（匿名用户）。

我希望**拒绝**访问特定的控制器，并为没有关联“AdminRole”的用户显示`PageAController.cs`文件夹内所有控制器的登录页面。`ADMIN`

*   该怎么走？
*   我需要设置 Web.Config... 怎么办？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-10-04T08:59:53.383

希望这可以帮助

[使用 AuthorizeAttribute](http://blogs.msdn.com/b/rickandy/archive/2011/05/02/securing-your-asp-net-mvc-3-application.aspx)

> 您不能使用路由或 web.config 文件来保护您的 MVC 应用程序。保护 MVC 应用程序的唯一受支持的方法是将 [Authorize] 属性应用于每个控制器和操作方法（登录/注册方法除外）。根据当前区域做出安全决策是一件非常糟糕的事情，并且会使您的应用程序容易受到漏洞攻击

```
[Authorize(Roles="AdminRole")]
public class PageAController
{

}

[Authorize(Roles="AdminRole,AnotherRole")]
public class PageBController
{

} 
```

# python - 我如何将这个while循环变成一个方法？

> ID：12723295
> 
> 赞同：0
> 
> 时间：2012-10-04T08:30:47.020
> 
> 标签：python, sockets

我不想从服务器返回无限循环中的值，而是想创建一个方法，例如 getPositions()，它在连接服务器仍在运行时返回我想要的特定位置。我该怎么做？

```
import socket
import os,sys
import time

HOST = '59.191.193.59'
PORT = 5555

client_socket = socket.socket(socket.AF_INET, socket.SOCK_STREAM)
client_socket.connect((HOST,PORT))

screen_width = 0
screen_height = 0
while True:

    client_socket.send("loc\n")
    data = client_socket.recv(8192)
    coordinates = data.split()

    if(not(coordinates[-1] == "eom" and coordinates[0] == "start")):
        continue

    if (screen_width != int(coordinates[2])):
        screen_width = int(coordinates[2])
        screen_height = int(coordinates[3])

    print int(coordinates[8])
    print int(coordinates[9])
    print int(coordinates[12])
    print int(coordinates[13]) 
```

![在此处输入图像描述](../Images/35f3f913a000cc342736c084ed210713.png)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-04T08:40:51.487

这应该很简单：

```
import socket
import os,sys
import time
from threading import Thread

HOST = '59.191.193.59'
PORT = 5555

COORDINATES = []

def connect():   
    globals()['client_socket'] = socket.socket(socket.AF_INET, socket.SOCK_STREAM)
    client_socket.connect((HOST,PORT))

def update_coordinates():
    connect()
    screen_width = 0
    screen_height = 0
    while True:
        try:
            client_socket.send("loc\n")
            data = client_socket.recv(8192)
        exept:
            connect();
            continue;

        globals()['COORDINATES'] = data.split()

        if(not(COORDINATES[-1] == "eom" and COORDINATES[0] == "start")):
            continue

            if (screen_width != int(COORDINATES[2])):
                screen_width = int(COORDINATES[2])
                screen_height = int(COORDINATES[3])            

Thread(target=update_coordinates).start()

// Run your controlling app here. COORDINATES will be available in the global scope and will be updated constantly 
```

编辑：在 get_coordinates 函数中创建方法，以在发生故障时重新建立套接字连接。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-04T09:37:46.140

```
import socket
import os,sys
import time

HOST = '59.191.193.59'
PORT = 5555

# don't restrict yourself to IPv4 without any need:
client_socket = socket.create_connection((HOST,PORT))

def update_coordinates(client_socket):
    client_socket.send("loc\n")
    data = client_socket.recv(8192)
    coordinates = data.split()

    if(not(coordinates[-1] == "eom" and coordinates[0] == "start")):
        return None # or so

    return [int(i) for i in coordinates[1:-1]]

screen_width = 0
screen_height = 0

while True:
    coord = update_coordinates(screen_width)
    if coord is None: continue
    # ! indexes have changed...
    if (screen_width != coord[1]):
        screen_width = coord[1]
        screen_height = coord[2]
    print coordinates[7]
    print coordinates[8]
    print coordinates[11]
    print coordinates[12] 
```

我不确定我的问题是否正确，但......

# mobile - domino 8.5.2 中的 singlePageApp 控件

> ID：12723296
> 
> 赞同：0
> 
> 时间：2012-10-04T08:30:49.877
> 
> 标签：mobile, xpages, xpages-extlib

在 Xpages 中我使用了 domino 8.5.3 中的 singlePageApp 控件，如果我想在 domino 8.5.2 中开发意味着，哪个控件相当于 singlePageApp 控件？

提前致谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-04T09:16:33.227

singlePageApp 是 8.5.3 扩展库中移动控件的一部分。

8.5.2 也有一个扩展库（[在 OpenNTF 的发布部分可用](http://www.openntf.org/internal/home.nsf/releases.xsp?action=openDocument&name=XPages%20Extension%20Library)），但它不包含移动控件。

相反，您可以使用[XPages Mobile Controls 项目](http://mobilecontrols.openntf.org/)（但请注意，它没有被维护）。

* * *

我建议您考虑将有问题的 Domino 服务器升级到最新版本。

# qt - QListWidget 向下滚动列表后拖动

> ID：12723297
> 
> 赞同：6
> 
> 时间：2012-10-04T08:31:02.423
> 
> 标签：qt, drag-and-drop, qlistwidget

我正在 Qt 中创建一个可排序的列表。该代码非常适合向下滚动，但是当我在向下滚动列表后获取可拖动项目时遇到一些问题。我添加了一些测试用例截图以便更好地理解

[![屏幕1](../Images/731df6c4e42f548d6757ded15c029841.png)](https://i.stack.imgur.com/ug5Av.png) [![屏幕2](../Images/8e78dd3780c4a08e599a54e746f14d84.png)](https://i.stack.imgur.com/YHxLr.png) [![屏幕3](../Images/c298217ba93cbdc9694b09ad915023fa.png)](https://i.stack.imgur.com/yGBQZ.png) [![屏幕4](../Images/aee6c9c9cd0f53226b2acc863977dc2d.png)](https://i.stack.imgur.com/1Hmi1.png)

好吧，这是测试用例代码

```
 #include <QtGui>

   int main(int argc, char **argv) 
   {
      QApplication app(argc, argv);
      QListWidget *listWidget = new QListWidget;
      for(int i=0;i<100;++i){
        listWidget->addItem("SongOne");
        listWidget->addItem("SongTwo");
        listWidget->addItem("SongThree");
        listWidget->addItem("SongFour");
        listWidget->addItem("SongFive");
      }
      listWidget->setDragDropMode(QAbstractItemView::InternalMove);
      listWidget->setDragEnabled(true);
      listWidget->setAcceptDrops(true);
      listWidget->setDropIndicatorShown(true);
      listWidget->viewport()->setAcceptDrops(true);
      listWidget->setSelectionMode(QAbstractItemView::SingleSelection);
      listWidget->show();
      app.exec();
      delete listWidget;
      return 0;
    } 
```

感谢您花时间阅读我的帖子。如果您对我错过了什么有任何暗示，请帮助我。我想我错过了设置一些属性。在主程序（不是测试代码）中，我尝试重写`dragMoveEvent`以及其他一些方法，但没有用。

这里的问题不是拖放，而是在进行拖放时创建的 QRect。在图二中创建了 Qrect，但在图四中没有

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-15T04:04:28.010

在 win7 中，我无法重现相同的行为。它只是工作（甚至调整大小提示以满足您的屏幕截图要求。:)）我的测试代码是......

```
int main(int argc, char **argv)
{
    QApplication app(argc, argv);
    QListWidget *listWidget = new QListWidget;
    const char* titles[] =  {
        "SongOne%1",
        "SongTwo%1",
        "SongThree%1",
        "SongFour%1",
        "SongFive%1",
    };
    for(int i=0;i<100;++i){
        QString title = QString(titles[i%5]).arg(i);
        QListWidgetItem* item = new QListWidgetItem(title);
        item->setData(Qt::SizeHintRole, QSize(50,100));
        listWidget->addItem(item);
    }
    listWidget->setDragDropMode(QAbstractItemView::InternalMove);
    listWidget->setDragEnabled(true);
    listWidget->setAcceptDrops(true);
    listWidget->setDropIndicatorShown(true);
    listWidget->viewport()->setAcceptDrops(true);
    listWidget->setSelectionMode(QAbstractItemView::SingleSelection);
    listWidget->show();
    app.exec();
    delete listWidget;
    return 0;
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-09T13:44:55.520

尝试删除这些行：

```
listWidget->setDragEnabled(true);
listWidget->setAcceptDrops(true);
listWidget->setDropIndicatorShown(true);
listWidget->viewport()->setAcceptDrops(true); 
```

它们可能会干扰“真正的”拖放系统。重新排序通常以优化的方式处理。

另一种解决方案可能是您将 QListWidget 子类化并在拖动事件中获取元素的索引，并在放置事件中获取其他元素的索引。所以你知道要重新排序什么以及它应该放在哪里（在第二个元素的索引之前或之后）。其余的应该很简单，只需 takeItem() 和 insertItem()。

希望我在这两种方式上对您有所帮助；）

# clearcase - 使用 clearmake 在派生对象中眨眼

> ID：12723301
> 
> 赞同：3
> 
> 时间：2012-10-04T08:31:15.857
> 
> 标签：clearcase

有谁知道使用 clearmake 时在派生对象 (DO) 中眨眼的规则？

我遇到了一个干净的编译导致 .o 和 .d 文件存在 5 天的情况。经过调查，我发现一个兄弟视图与我有相同的基线，但自从 rebase 和这些 DO 被眨眼到我的视图中之后就没有被重新编译。

团队视图中的 DO 会在子流中眨眼还是仅对兄弟姐妹有效？是否会在任何层次结构中的所有视图中进一步闪烁？

非常感谢

**编辑：**更具体地说，我想知道 DO 从哪里眨眼？只有兄弟姐妹的意见？任何具有相同基线的视图？

再次感谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-04T10:10:48.967

*   看来您正在处理可共享的 DO
*   为了避免视图之间的闪烁，您可以使用 clearmake -V 禁用任何闪烁。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-04T09:02:51.500

他们不应该在视图之间眨眼，除非该命令[`winkin`](http://publib.boulder.ibm.com/infocenter/cchelp/v7r0m0/index.jsp?topic=/com.ibm.rational.clearcase.cc_ref.doc/topics/ct_winkin.htm)被显式调用和/或您正在处理可共享的 DO。

如果子流的基础基线与当前流相同，则子流可以获得相同的 DO，引用相同的版本。

# c# - C# - 从 .NET DLL（类库）执行代码而不引用它？

> ID：12723304
> 
> 赞同：3
> 
> 时间：2012-10-04T08:31:23.777
> 
> 标签：c#, class, dll

我试图找到一种方法，在我的应用程序已经启动后，我可以从 .NET DLL 执行代码。我在下面包含了一些伪代码，可能会尝试解释我正在尝试做的事情。我知道这可能比我想象的要复杂得多。

```
ClassLibrary myLibrary = new ClassLibrary("C:\\Users\\Admin\\Desktop\\myTestLibrary.dll");
myLibrary.executeMethod("showMessageMethod", arg1, arg2, arg3...); 
```

这就是我想要做的，尽管我知道它可能比这复杂得多！

我还想明确表示，我**确实理解**您要在项目等中引用该库……但我的项目要求我不要这样做。

提前致谢！

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2012-10-04T08:34:08.370

您需要从磁盘加载程序集，如下所示：

```
Assembly myLibrary = System.Reflection.Assembly
    .LoadFile("C:\\Users\\Admin\\Desktop\\myTestLibrary.dll"); 
```

之后，您将需要使用反射获取正确的类型并调用正确的方法。当您要调用的类实现在启动时引用的程序集中定义的接口时，这将是最方便的：

```
Type myClass = (
    from type in myLibrary.GetExportedTypes()
    where typeof(IMyInterface).IsAssignableFrom(type)
    select type)
    .Single();

var instance = (IMyInterface)Activator.CreateInstance(myClass);

instance.executeMethod("showMessageMethod", arg1, arg2, arg3...); 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-10-04T08:44:49.707

我希望下面的代码示例有所帮助。

```
using System;
using System.Collections.Generic;
using System.Linq;
using System.Reflection;
using System.Text;

namespace zielonka.co.uk.stackoverflow.examples.Reflection
{
    class Program
    {
        static void Main(string[] args)
        {

            // dynamically load assembly from file Test.dll
            Assembly testAssembly = Assembly.LoadFile(@"c:\Test.dll");

            // get type of class Calculator from just loaded assembly
            Type calcType = testAssembly.GetType("Test.Calculator");

            // create instance of class Calculator
            object calcInstance = Activator.CreateInstance(calcType);

            // get info about property: public double Number
            PropertyInfo numberPropertyInfo = calcType.GetProperty("Number");

            // get value of property: public double Number
            double value = (double)numberPropertyInfo.GetValue(calcInstance, null);

            // set value of property: public double Number
            numberPropertyInfo.SetValue(calcInstance, 10.0, null);

            // get info about static property: public static double Pi
            PropertyInfo piPropertyInfo = calcType.GetProperty("Pi");

            // get value of static property: public static double Pi
            double piValue = (double)piPropertyInfo.GetValue(null, null);

            // invoke public instance method: public void Clear()
            calcType.InvokeMember("Clear",
                BindingFlags.InvokeMethod | BindingFlags.Instance | BindingFlags.Public,
                null, calcInstance, null);

            // invoke private instance method: private void DoClear()
            calcType.InvokeMember("DoClear",
                BindingFlags.InvokeMethod | BindingFlags.Instance | BindingFlags.NonPublic,
                null, calcInstance, null);

            // invoke public instance method: public double Add(double number)
            double value = (double)calcType.InvokeMember("Add",
                BindingFlags.InvokeMethod | BindingFlags.Instance | BindingFlags.Public,
                null, calcInstance, new object[] { 20.0 });

            // invoke public static method: public static double GetPi()
            double piValue = (double)calcType.InvokeMember("GetPi",
                BindingFlags.InvokeMethod | BindingFlags.Static | BindingFlags.Public,
                null, null, null);

            // get value of private field: private double _number
            double value = (double)calcType.InvokeMember("_number",
                BindingFlags.GetField | BindingFlags.Instance | BindingFlags.NonPublic,
                null, calcInstance, null);

        }
    }
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-04T08:59:47.110

虽然您可以按照 Steven 的回答中的详细说明加载程序集，但还有另一种可能性。

在解决方案中添加对程序集的引用，但不将程序集部署为解决方案的一部分。这意味着您不必使用反射，而是使用 AppDomain.AssemblyResolve 事件。

您的需求尚不清楚，但本质上这是一种注入 dll 的方式。

例如，假设您有 dll 来为您支持的每个后端实现数据库操作。

当您的代码尝试查找程序集时，它会在通常的位置查找，如果尚未加载且无法找到，则会触发 AssmemblyResolve 事件，并在其中根据某些配置选项从某个可访问的位置动态加载它.

可访问的位置，可以是一个 url，一个完全不同的路径，甚至是网络路径。显然不是这个例子，但它甚至可以是数据库中的一个 blob。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-04T08:34:56.357

第一个解决方案是使用：

```
Assembly asm = Assembly.LoadFrom(path); 
```

第二个是：[MEF](http://mef.codeplex.com/)

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-10-04T08:35:45.110

您正在寻找的可能是一种在运行时动态加载程序集的方法。

看这个视频：[http ://www.youtube.com/watch?v=WBoA36pwxJE](http://www.youtube.com/watch?v=WBoA36pwxJE)

# android - 屏幕旋转冰淇淋闪烁

> ID：12723305
> 
> 赞同：1
> 
> 时间：2012-10-04T08:31:31.333
> 
> 标签：android

当我想锁定应用程序时，我有一项运行活动的服务，一切正常，但是

当锁定的应用程序运行时，它会很好地显示锁定屏幕，但是当我在设备中打开 Auto Rotation ON 并旋转设备时，我的活动会加载并创建和停止并销毁并再次加载、停止、销毁，这种情况会发生，直到我杀死活动.

我的自动旋转问题在哪里

我在清单中有这个：

```
<activity
            android:name="activity_lockScreen"
            android:configChanges="keyboardHidden|orientation"
            android:label="Lock Screen"
            android:screenOrientation="portrait" >
</activity> 
```

以及此代码在服务中运行活动

```
Intent lockIntent = new Intent(this, lockScreen.class);
    lockIntent.setFlags(Intent.FLAG_ACTIVITY_NEW_TASK);
    Log.d(tag, "new Run");
    startActivity(lockIntent); 
```

我的应用程序在 android 2.3 和 2.2 上运行良好，但在 android 4.0 上出现了启动画面，似乎 android 4 自动旋转存在问题

也只调用一次。

# linux - 添加尾部斜杠 mod_rewrite

> ID：12723308
> 
> 赞同：2
> 
> 时间：2012-10-04T08:31:41.457
> 
> 标签：linux, apache, mod-rewrite, centos

只是想知道如何使用 Mod_Rewrite 在 URL 末尾添加斜杠？

这是我目前的 .htaccess 文件：

```
RewriteEngine On
RewriteCond %{REQUEST_FILENAME} !-d
RewriteCond %{REQUEST_FILENAME} !-f
RewriteRule ^([^/]*)$ index.php?pageName=$1 
```

我的网址显示如下：

中国的膳宿条件。********** .com/pageName

我希望它显示如下：

中国的膳宿条件。********** .com/pageName/

该 URL 在内部持有一个 GET 请求，但我希望它看起来像一个真正的目录。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-10-04T09:10:36.657

您可以轻松地将尾部斜杠添加到客户端看到的 URL，但您必须考虑重定向浏览器后收到的请求中的尾部斜杠。

所以重定向可能看起来像这样：

```
RewriteCond %{REQUEST_FILENAME} !-d
RewriteCond %{REQUEST_FILENAME} !-f
RewriteRule ^(.*[^/])$ /$1/ [L,R=301] 
```

你会希望它高于：

```
RewriteCond %{REQUEST_FILENAME} !-d
RewriteCond %{REQUEST_FILENAME} !-f
RewriteRule ^([^/]*)$ index.php?pageName=$1 
```

规则集，因为重定向需要在路由到`index.php`. 请注意，当浏览器被重定向到以 结尾的 URL 时`/`，您的`index.php`规则将包含带有尾部斜杠的**pageName参数。**

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-01-10T02:38:30.753

我知道这是旧的，但它对其他找到它的人仍然有用。

Jon Lin 的回答是正确的，我会将其添加为评论，但我没有足够的声誉。

OPs 评论删除尾部斜杠，因为你知道它最后总是有一个斜杠，你可以`$pageName = substr($pageName, 0, -1);`. 这就是我至少正在做的事情。

希望这是有用的。

# ruby-on-rails - 在收集的 check_box 助手上获取 Fixnum 错误

> ID：12723316
> 
> 赞同：0
> 
> 时间：2012-10-04T08:32:07.077
> 
> 标签：ruby-on-rails, ruby-on-rails-3

这就是我想要做的：

```
<% Topic.all.each do |topic| %>
  <%= f.check_box "topic_ids[]", topic.id, false %>
<% end %> 
```

那是在一个`form_for`.

这是我得到的错误：

```
undefined method `merge' for 1:Fixnum 
```

围绕主线`check_box`。

我的`Topic`模型实际上看起来像这样，我希望复选框在每个复选框上显示主题的名称：

```
# Table name: topics
#
#  id         :integer          not null, primary key
#  name       :string(255) 
```

我错过了什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-04T08:46:26.047

您应该使用`check_box_tag`而不是`f.check_box`.

```
check_box_tag "topic_ids[]",topic.id 
```

不同之处`f.check_box`在于模型有界表单，提供给复选框的值是给定模型隐含的，不需要提供。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-04T08:41:52.493

你有没有尝试过：

```
<% Topic.all.each do |topic| %>
  <%= f.check_box "topic_ids[]", topic.id.to_s, false %>
<% end %> 
```

# c# - LINQ 从层次模型中选择和连接结果

> ID：12723321
> 
> 赞同：0
> 
> 时间：2012-10-04T08:32:18.507
> 
> 标签：c#, .net, linq, silverlight

我有下面的模型，它代表了一个两级菜单层次结构，我需要做的是从`SubMenuItems`子集合中选择一个 ID，然后连接其及其父记录`TextToDisplay`属性的结果。

我的问题是如何返回单个父项和单个子项然后访问该`TextToDisplay`属性？

我要查询的对象是`ObserableCollection`

```
public ObservableCollection<MenuModel> MenuItems { get; set; } 
```

**模型**

```
public class MenuModel
{
    public int ID { get; set; }
    public string TextToDisplay { get; set; }
    public string ImageSource { get; set; }
    public ObservableCollection<MenuModel> SubMenuItems { get; set; }
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-04T08:37:18.487

用于`Single()`获取一项，并`Any()`检查列表中是否存在与查询匹配的元素：

```
int theIdYouWant = 30; //for example
var parentItem = MenuItems.Single(i => i.SubMenuItems.Any(si => si.Id == theIdYouWant));
var text = parentItem.TextToDisplay + 
    parentItem.SubMenuItems.Single(i => i.Id == theIdYouWant).TextToDisplay; 
```

请注意，如果没有父项包含 ID 为 30 的子项，或者返回了多个父项，这将引发异常 - 因此您可能需要`SingleOrDefault()`改用并检查是否为空，或者`Where`然后选择您想要的项.

# php - TinyButStrong 在 odt 文件中插入一个 html 我在我的 php 项目中使用 TinyButStrong 正常工作：我可以用自定义文本替换部分 odt 模板文件，但现在我想在其中插入一些内容。问题是它插入了 html 代码或解释版本。 有什么解决办法吗？

> ID：12723324
> 
> 赞同：0
> 
> 时间：2012-10-04T08:32:32.843
> 
> 标签：php, odt, tinybutstrong, opentbs

我在我的 php 项目中使用 TinyButStrong 正常工作：我可以用自定义文本替换部分 odt 模板文件，但现在我想在其中插入一些内容。问题是它插入了 html 代码或解释版本。

有什么解决办法吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-04T22:09:28.523

答案可以在 TBS 论坛上找到：

[http://www.tinybutstrong.com/forum.php?thr=2950](http://www.tinybutstrong.com/forum.php?thr=2950)

由于您有一个将 HTML 转换为 ODT 的函数，因此您可以使用自定义 PHP 函数和参数“onformat”在 OpenTBS 中实现它。

以下函数仅转换换行符：

```
function f_html2odt($FieldName, &$CurrVal) {
  $CurrVal= str_replace('<br />', '<text:line-break/>', $CurrVal);
} 
```

在 DOCX 模板中使用：

```
[b.thetext;onformat=f_html2odt] 
```

关于将 HTML 转换为 ODT：将格式化文本转换为另一种格式化文本通常是一场噩梦。这就是为什么存储纯数据而不是格式化数据是明智的。将 HTML 转换为 ODT 非常困难，因为格式的结构不同。

例如，粗体或斜体可以在 HTML 中使用`<b>`and完成`<i>`，而您需要 ODT 中的样式。`<p>`在 HTML中，您可以有没有`<text:p>`.

# api - 如何在 Joomla 中挂钩函数

> ID：12723326
> 
> 赞同：1
> 
> 时间：2012-10-04T08:32:37.880
> 
> 标签：api, joomla, joomla2.5

我需要在授权之后（页面加载之前）运行我的组件（代码）。在不改变来源的情况下是否有一些功能？也许是一些功能，比如wordpress 中的[add_action](http://codex.wordpress.org/Function_Reference/add_action)或其他什么？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-04T10:06:31.713

您可能想为此创建一个插件。

> “插件提供与触发事件相关的功能。” （[Joomla 维基插件](http://docs.joomla.org/Plugin)）

要收听用户事件，您必须创建一个*“用户插件”*。要为用户授权挂钩功能，请参阅[onUserLogin](http://docs.joomla.org/Plugin/Events/User#onLoginUser)。

有关插件开发的更多信息，请参阅[wiki 页面](http://docs.joomla.org/Plugin)。

**编辑：** 从 Joomla 1.5开始，可以在*plugins/user/joomla/joomla.php的普通 Joomla CMS 安装中找到*[onUserLogin](http://docs.joomla.org/Plugin/Events/User#onLoginUser)的示例。

# android - 从整数更改评分栏值

> ID：12723328
> 
> 赞同：1
> 
> 时间：2012-10-04T08:32:44.003
> 
> 标签：android, ratingbar

我想创建一个显示用户分数的评分栏（例如：80 将变为 4 星）。我不允许用户更改它，所以我认为不需要监听器。现在我知道有一个函数名`getRating`但如何使用它？我想要的只是获得一个值（例如：60），用户将在我的评分栏中看到 3 星。感谢：D

**解决了。我可以用`SetRating`一个整数值到我的评分栏**

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-04T08:40:08.420

那么android已经有一个[`RatingBar`](http://developer.android.com/reference/android/widget/RatingBar.html).

[请按照此处](http://www.mkyong.com/android/android-rating-bar-example/)的教程了解一些初始概念。

您可以设置要显示的最大星数：

[`setNumStars()`](http://developer.android.com/reference/android/widget/RatingBar.html#setNumStars%28int%29)

您可以设置 Rating Bar 的最大值，例如：

[`setMax()`](http://developer.android.com/reference/android/widget/RatingBar.html#setMax%28int%29)

因此，当您将 5 颗星设置为数星并将 100 颗星设置为最大评分时，系统将自动显示 4 星与 80 分并会显示 3 星与 60 分，因此让系统决定您的分数显示多少星。

# tridion - 发布许多项目会占用大量内存

> ID：12723335
> 
> 赞同：3
> 
> 时间：2012-10-04T08:33:04.953
> 
> 标签：tridion, tridion-2011

我有一个类似的问题[，](https://stackoverflow.com/questions/10395013/every-page-we-publish-increases-around-2-mb-memory-on-server-is-it-a-configurat)虽然希望我已经缩小了一点。

我目前正在测试我的 Tridion 2011 安装的发布部分（Conent Manager 和 Content Delivery 在不同的服务器上）。当我尝试一次发布多个页面（在我的情况下为 1000 个）时，该过程`dllhst3g.exe *32`开始获取大量内存。这是可以理解的，因为有很多工作要做，但它永远不会回报。这导致内容管理器运行缓慢并最终崩溃。

`dllhst3g.exe *32`当进程有大约 3.6GB 的内存时（我认为这是因为它是 32 位进程），Tridion Content Manager 抛出了内存不足的异常。为了防止这些，我将`SDL Tridion Content Manager`COM+ 应用程序限制为每个进程任意 500Mb，在达到限制后 15 分钟被强制终止。这暂时停止了内存不足的异常，但如果在 15 分钟窗口内分配的服务器超过 8GB，我仍然存在性能问题和内存不足的可能性。[更多关于这里](http://msdn.microsoft.com/en-us/library/windows/desktop/ms684192%28v=vs.85%29.aspx)

我已经排除了底层的 PageTemplate 代码，因为关联的页面模板没有关联的代码。这些页面是空白的。

在使用核心服务 API 时，这个问题似乎也更加突出。我正在使用的代码是

```
using (var client = new Tridion2011CoreService.CoreServiceClient())
{
    foreach (var id in ids) // ids is a collection of 500 page ids
    {
        // publishing to staging and live
        var targets = new string[] { "tcm:0-7-65538", "tcm:0-8-65538" };

        var publishInstructionData = new PublishInstructionData();
        publishInstructionData.ResolveInstruction = new ResolveInstructionData();
        publishInstructionData.RenderInstruction = new RenderInstructionData();

        var readOptions = new ReadOptions();

        client.Publish(new string[] { id }, publishInstructionData, targets, PublishPriority.Normal, readOptions);
    }
} 
```

（我意识到我可以通过一次调用来发送所有 ID，但随后我遇到了消息限制错误，据我所知，多次调用和一次调用的结果实际上是相同的）

有任何想法吗？

（如果我错过了任何细节，请告诉我，我会相应地更新问题）

忘记加了。内容管理器安装在具有 4 个 CPU、8GB RAM 和 50GB 磁盘空间的虚拟化 Windows Server 2008 上。Content Delivery 安装在具有相同规格的单独服务器上。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-09T15:18:39.217

在联系 SDL 客户支持后，我被告知唯一的解决方案是在 dllhost 进程占用预定内存量时对其进行回收。

为在 Windows Server 2008 上运行的 SDL Tridion Content Manager 2011 执行此操作

1.  打开组件服务（搜索它或`Control Panel -> Administrative Tools`）
2.  展开树`Component Services -> Computers -> My Computer -> COM+ Applications`
3.  右键单击`SDL Tridion Content Manager`并选择属性
4.  选择`Pooling & Recycling`选项卡
    *   设置`Pool Size`为 1
    *   设置`Lifetime limit`为 0
    *   设置`Memory Limit`为 524288 (512 MB) 或选择您自己的限制（我会选择小于 1GB 的值）
    *   设置`Call Limit`为 0
    *   设置`Activation Limit`为 0
5.  如果可以，请重新启动系统。否则，重新启动所有 Tridion 服务（`Control Panel -> Administrative Tools -> Services`并重新启动以“Tridion”开头的所有内容）

也许“真正的”修复只是一个补丁......

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-08T21:11:35.557

尝试监视传输包根文件夹。这将在 SDL Tridion MMC 管理单元中设置。默认值为 CMS 服务器中的 C:\temp。请检查将在 Tridion 安装文件夹\Config 中的 cd_transport config xml 中设置的传输工作区文件夹。还要检查部署程序传入和工作文件夹。这些文件夹中积累的大量文件可能会导致性能下降，如果您错误地输出文件夹或文件，请尝试清理这些文件夹，以防止 Tridion 重试失败的事务。此外，如果您的部署程序作为网站 httpupload.asp 运行，请尝试验证部署程序的应用程序域回收设置，以确保您不会每隔几分钟重置 appdomain。

您还可以尝试查看发布项目的相关项目。如果您有很多版本或不需要的相关项目，您可以考虑自定义解决发布项目以避免具有特定架构等的不需要的组件。Nuno 提供了一个非常好的下面链接中的文章。感谢努诺.. [http://nunolinhares.blogspot.nl/2011/10/tridion-publisher-and-custom-resolvers.html](http://nunolinhares.blogspot.nl/2011/10/tridion-publisher-and-custom-resolvers.html)

# c# - WPF：无法在 C# 中执行 ToHexString() 操作

> ID：12723337
> 
> 赞同：0
> 
> 时间：2012-10-04T08:33:36.243
> 
> 标签：c#, hex

我正在开发一个执行少量操作的 wpf 应用程序。几天前我正在研究 C++ 应用程序，现在他们需要在我的 wpf 应用程序中实现相同的功能。

在我的 c++ 代码中，我编写了以下内容：

```
m_texti2cRead->clear();

unsigned char buffer[512];
int address = m_texteditAddress->getText().getHexValue32();
m_msp430->SetAddress(address);
if(m_msp430->ReadBytes(m_dataSize, buffer) == 1 )
{
   //Display
   String output = String::toHexString(buffer, m_dataSize);
   m_texti2cRead->setText(output);
} 
```

我在我的 Wpf 应用程序中实现了相同的功能，如下所示：

```
ReadMessage = string.Empty;
Byte[] buffer = new Byte[512];
int address;
int m_DataSize = 1;

string strValue = AddressMessage;
if (strValue.StartsWith("0x"))
{
     strValue = strValue.Remove(0, 2);
     address = Convert.ToInt32(strValue);
     mComm.setAddress(address);
}           
if (mComm.ReadBytes(m_datasize, ref buffer) == 1)
{
    // Here I don know how to perform ToHexString Operation of (buffer and m_DataSize)
} 
```

我怎样才能在我的 wpf 应用程序中做同样的事情？？？请帮忙！！！

# spring - 登录后重定向到包含#（哈希）符号的页面

> ID：12723338
> 
> 赞同：11
> 
> 时间：2012-10-04T08:33:39.243
> 
> 标签：spring, spring-mvc, spring-security

`#`我正在使用 Spring Security 并且想知道如果该页面包含（哈希）符号，在成功登录到源页面后如何实现重定向。

现在我使用`always-use-default-target="false"`它，它在 URL 类型上运行良好：`/path/to/page/`.

但是当 URL 变为`#/path/to/page`它时，它不会进行任何重定向。

有什么办法可以解决吗？

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2012-10-04T09:00:25.770

这是我最后使用的解决方案：

```
$(document).ready(function(){
  $('#auth-form').submit(function() {
    var el = $(this);
    var hash = window.location.hash;
    if (hash) el.prop('action', el.prop('action') + '#' + unescape(hash.substring(1)));
    return true;
  });
}); 
```

此片段将哈希添加到授权表单的 action 属性中，Spring 将您重定向到 kind: 的 URL，`#/path/to/page`没有任何问题。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2015-06-04T14:24:48.917

也许这是一个老问题，但在我最近对该主题的研究中，我发现这个问题很常见并且仍然存在（尤其是在具有后端安全性的现代 AngularJS 前端应用程序的情况下）。我想和你分享我的解决方案。

在登录页面，例如 /login.html，在标签前添加以下代码`</body>`：

```
<script type="text/javascript">
    var hash = window.location.hash;
    document.cookie="hashPart=" + window.btoa(hash);
</script> 
```

注意 (1)： btoa() 函数在 IE >= 10 ( [http://www.w3schools.com/jsref/met_win_btoa.asp](http://www.w3schools.com/jsref/met_win_btoa.asp) ) 中工作，对于旧版浏览器使用 jQuery 等效项。

注（2）：URL#部分的加密是必要的，因为它可能包含特殊字符，不允许存储在cookie值字符串中。

从服务器端，您必须修改`onAuthenticationSuccess(HttpServletRequest request, HttpServletResponse response, Authentication authentication)`类实现`AuthenticationSuccessHandler`接口的方法。

就我而言，我只是扩展`SavedRequestAwareAuthenticationSuccessHandler`类并`onAuthenticationSuccess`使用其原始代码覆盖该方法。然后我从请求中获取*hashPart* cookie 值，对其进行解码并添加到已解析的重定向 URL。我的代码片段如下：

```
@Override
public void onAuthenticationSuccess(HttpServletRequest request,
        HttpServletResponse response, Authentication authentication)
        throws ServletException, IOException {

    // ... copy/paste original implementation here, until ...

    // Use the DefaultSavedRequest URL
    String targetUrl = savedRequest.getRedirectUrl();

    for (Cookie cookie : req.getCookies()) {
        if (cookie.getName().equals("hashPart")) {
            targetUrl += new String(Base64Utils.decodeFromString(cookie.getValue()));
            cookie.setMaxAge(0); // clear cookie as no longer needed
            response.addCookie(cookie);
            break;
        }
    }

    getRedirectStrategy().sendRedirect(request, response, targetUrl);
} 
```

最后，只需将您的成功处理程序类注入您的 Spring Security 配置，如下所述：[https ://stackoverflow.com/a/21100458/3076403](https://stackoverflow.com/a/21100458/3076403)

我期待您对此问题的评论或其他解决方案。

# java - JSP 页面中的 UTF-8 编码

> ID：12723339
> 
> 赞同：43
> 
> 时间：2012-10-04T08:33:43.047
> 
> 标签：java, jsp, utf-8

我有一个`JSP`页面，其页面编码为`ISO-8859-1`. 这个 JSP 页面在一个问答博客中。我想在 Q/A 发布期间包含特殊字符。

问题是 JSP 不支持`UTF-8`编码，即使我已将其从 更改`ISO-8859-1`为`UTF-8`. 这些字符（`~`, `%`, `&`, `+`）有问题。当我单独或与任何字符组合发布这些字符时，它存储`null`在数据库中，当我在发布应用程序时删除这些字符时，它工作正常。

任何人都可以提出一些解决方案吗？

* * *

## 回答 #1

> 赞同：77
> 
> 时间：2012-10-04T08:43:40.350

您应该在应用程序的**所有层**上使用**相同的编码**以避免此问题。[添加过滤器](https://stackoverflow.com/tags/servlet-filters/info)来设置编码很有用：

 **```
public void doFilter(ServletRequest request,
                     ServletResponse response,
                     FilterChain chain) throws ServletException {
   request.setCharacterEncoding("UTF-8");
   chain.doFilter(request, response);
} 
```

要仅在 JSP 页面上设置编码，请在其中添加以下行：

```
<%@ page contentType="text/html; charset=UTF-8" %> 
```

将数据库配置为也使用相同的字符编码。

如果您需要转换字符串的编码，请参见：

*   [java中的编码转换](https://stackoverflow.com/questions/229015/encoding-conversion-in-java)

我不建议将 HTML 编码的文本存储在您的数据库中。例如，如果您需要生成 PDF（或 HTML 以外的任何内容），则需要先转换 HTML 编码。

* * *

## 回答 #2

> 赞同：35
> 
> 时间：2012-10-04T12:01:41.697

完整的 JSP 标记应该是这样的，请注意 pageEncoding：

```
<%@ page language="java" contentType="text/html; charset=UTF-8" pageEncoding="UTF-8"%> 
```

一些旧浏览器也弄乱了编码。你可以使用 HTML 标签

```
 <meta http-equiv="Content-Type" content="text/html; charset=UTF-8" /> 
```

此外，文件应以 UTF-8 格式记录，如果您使用的是 Eclipse，请左键单击文件->属性->签出->文本文件编码。

* * *

## 回答 #3

> 赞同：18
> 
> 时间：2015-02-04T05:52:28.860

我在显示“Ṁ Ů”等字符时也遇到了问题。我将以下内容添加到了我的 web.xml 中。

```
<jsp-config>
    <jsp-property-group>
        <url-pattern>*.jsp</url-pattern>
        <page-encoding>UTF-8</page-encoding>
    </jsp-property-group>
</jsp-config> 
```

这解决了除页眉之外的页面中的问题。尝试了很多方法来解决这个问题，但在我的情况下没有任何效果。header 的问题是 header jsp 页面包含在另一个 jsp 中。所以给了导入编码，这解决了我的问题。

```
<c:import url="/Header1.jsp" charEncoding="UTF-8"/> 
```

谢谢

* * *

## 回答 #4

> 赞同：7
> 
> 时间：2019-12-15T13:32:13.847

JSR315 将默认的 JSP 文件编码指定为[ISO-8859-1](https://github.com/apache/tomcat/blob/8aeab80217bbab3c4eea3da462d2e41659c4815a/java/org/apache/jasper/compiler/ParserController.java#L404)。这是 JSP 引擎用来读取 JSP 文件的编码，它与 servlet 请求或响应编码无关。

如果您的 JSP 文件中有非拉丁字符，请将 JSP 文件另存为带有 BOM 的 UTF-8 或`pageEncoding`在 JSP 页面的开头设置：

```
<%@page pageEncoding="UTF-8" %> 
```

* * *

但是，您可能希望将所有 JSP 页面的默认值全局更改为 UTF-8。这可以通过以下方式完成`web.xml`：

```
<jsp-config>
    <jsp-property-group>
        <url-pattern>/*</url-pattern>
        <page-encoding>UTF-8</page-encoding>
    </jsp-property-group>
</jsp-config> 
```

或者，当使用带有（嵌入式）Tomcat 的**Spring Boot**[`TomcatContextCustomizer`](https://docs.spring.io/spring-boot/docs/current/api/org/springframework/boot/web/embedded/tomcat/TomcatContextCustomizer.html)时，通过：

```
@Component
public class JspConfig implements TomcatContextCustomizer {
    @Override
    public void customize(Context context) {
        JspPropertyGroup pg = new JspPropertyGroup();
        pg.addUrlPattern("/*");
        pg.setPageEncoding("UTF-8");
        pg.setTrimWhitespace("true"); // optional, but nice to have
        ArrayList<JspPropertyGroupDescriptor> pgs = new ArrayList<>();
        pgs.add(new JspPropertyGroupDescriptorImpl(pg));
        context.setJspConfigDescriptor(new JspConfigDescriptorImpl(pgs, new ArrayList<TaglibDescriptor>()));
    }
} 
```

要让 JSP 与 Spring Boot 一起工作，请不要忘记包含以下依赖项：

```
 <dependency>
        <groupId>org.springframework.boot</groupId>
        <artifactId>spring-boot-starter-tomcat</artifactId>
        <scope>provided</scope>
    </dependency>
    <dependency>
        <groupId>org.apache.tomcat.embed</groupId>
        <artifactId>tomcat-embed-jasper</artifactId>
        <scope>provided</scope>
    </dependency> 
```

并制作一个“可运行”的 .war 文件，重新打包它：

```
<build>
    <plugins>
        <plugin>
            <groupId>org.springframework.boot</groupId>
            <artifactId>spring-boot-maven-plugin</artifactId>
            <executions>
                <execution>
                    <phase>package</phase>
                    <goals>
                        <goal>repackage</goal>
                    </goals>
                </execution>
            </executions>
        </plugin>
   . . . 
```

* * *

## 回答 #5

> 赞同：6
> 
> 时间：2012-10-04T08:43:06.260

您必须确保使用 UTF-8 编码**保存文件。**您可以使用几个纯文本编辑器来完成。使用 Notepad++，即可以在菜单中选择`Encoding`--> `Encode in UTF-8`。您甚至可以使用 Windows 的记事本（`Save As`--> 编码 UTF-8）来执行此操作。如果您使用的是 Eclipse，您可以在文件的 Properties 中设置它。

另外，检查问题是否在于您必须**转义**这些字符。你的问题并不奇怪，因为其中一个字符是`&`.

* * *

## 回答 #6

> 赞同：6
> 
> 时间：2015-12-10T07:05:19.053

我使用了编码过滤器，它解决了我所有的编码问题......

```
 package com.dina.filter;

    import java.io.IOException;
    import javax.servlet.Filter;
    import javax.servlet.FilterChain;
    import javax.servlet.FilterConfig;
    import javax.servlet.ServletException;
    import javax.servlet.ServletRequest;
    import javax.servlet.ServletResponse;

    /**
     *
     * @author DINANATH
     */
    public class EncodingFilter implements Filter {

        private String encoding = "utf-8";

        public void doFilter(ServletRequest request,ServletResponse response, FilterChain filterChain) throws IOException, ServletException {
            request.setCharacterEncoding(encoding);
    //                response.setContentType("text/html;charset=UTF-8");
                    response.setCharacterEncoding(encoding);
            filterChain.doFilter(request, response);

        }

        public void init(FilterConfig filterConfig) throws ServletException {
            String encodingParam = filterConfig.getInitParameter("encoding");
            if (encodingParam != null) {
                encoding = encodingParam;
            }
        }

        public void destroy() {
            // nothing todo
        }

    } 
```

**在 web.xml 中**

```
 <filter>
        <filter-name>EncodingFilter</filter-name>
        <filter-class>
        com.dina.filter.EncodingFilter
        </filter-class>
        <init-param>
            <param-name>encoding</param-name>
            <param-value>UTF-8</param-value>
        </init-param>
        <init-param>
        <param-name>forceEncoding</param-name>
        <param-value>true</param-value>
    </init-param>
    </filter>
    <filter-mapping>
        <filter-name>EncodingFilter</filter-name>
        <url-pattern>/*</url-pattern>
    </filter-mapping> 
```

* * *

## 回答 #7

> 赞同：5
> 
> 时间：2012-10-04T08:56:46.197

这是一个常见的问题。

最简单的解决方法之一是检查特殊字符是否到达动作层内部，然后修改 java 代码中的特殊字符。

[如果您能够在 Action 或您选择的任何其他 java 层（如业务层）中查看此字符，只需使用StringEscapeUtils.html#escapeHtml](http://commons.apache.org/lang/api-2.4/org/apache/commons/lang/StringEscapeUtils.html#escapeHtml%28java.lang.String%29)将字符替换为相应的 HTML 字符

做完逃跑后。使用新字符串保存到数据库。

* * *

## 回答 #8

> 赞同：5
> 
> 时间：2013-10-23T16:49:24.880

该线程可以帮助您：将 [请求参数作为 UTF-8 编码字符串传递](https://stackoverflow.com/questions/11002827/html-forms-and-jsp-problems-with-utf-8-character-encoding)

基本上：

```
request.setCharacterEncoding("UTF-8");
String login = request.getParameter("login");
String password = request.getParameter("password"); 
```

或者您在 jsp 文件上使用 javascript：

```
var userInput = $("#myInput").val();            
var encodedUserInput = encodeURIComponent(userInput);
$("#hiddenImput").val(encodedUserInput); 
```

在课堂上恢复后：

```
String parameter = URLDecoder.decode(request.getParameter("hiddenImput"), "UTF-8"); 
```

* * *

## 回答 #9

> 赞同：4
> 
> 时间：2018-03-20T09:09:29.470

这将对您有所帮助。

```
<%@page contentType="text/html" pageEncoding="UTF-8"%>
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
</head> 
```

* * *

## 回答 #10

> 赞同：2
> 
> 时间：2012-10-04T08:37:59.490

这是html中的特殊字符。你为什么不编码呢？看看： http: [//www.degraeve.com/reference/specialcharacters.php](http://www.degraeve.com/reference/specialcharacters.php)

* * *

## 回答 #11

> 赞同：0
> 
> 时间：2015-05-14T16:28:45.810

我在 JSP 上使用特殊字符作为分隔符时遇到了同样的问题。当特殊字符被发布到 servlet 时，它们都搞砸了。我通过使用以下转换解决了这个问题：

```
String str = new String (request.getParameter("string").getBytes ("iso-8859-1"), "UTF-8"); 
```

* * *

## 回答 #12

> 赞同：0
> 
> 时间：2018-01-29T15:10:02.057

感谢所有提示。使用 Tomcat8，我还添加了一个过滤器，如 @Jasper de Vries 所写。但是在现在较新的 Tomcat 中，已经实现了一个过滤器，可以在 Tomcat web.xml 中未注释的情况下使用它：

```
<filter>
    <filter-name>setCharacterEncodingFilter</filter-name>
    <filter-class>org.apache.catalina.filters.SetCharacterEncodingFilter</filter-class>
    <init-param>
        <param-name>encoding</param-name>
        <param-value>UTF-8</param-value>
    </init-param>
    <async-supported>true</async-supported>
</filter>
...
<filter-mapping>
    <filter-name>setCharacterEncodingFilter</filter-name>
    <url-pattern>/*</url-pattern>
</filter-mapping> 
```

和所有其他人一样；我`URIEncoding="UTF-8"`在 Apache 中添加了 Tomcat 连接器。这也有帮助。

重要的是，Eclipse（如果您使用它）具有其 web.xml 的副本并覆盖 Tomcat 设置，如此处所述：[Broken UTF-8 URI Encoding in JSPs](https://stackoverflow.com/a/11576094/1856258)

* * *

## 回答 #13

> 赞同：0
> 
> 时间：2015-11-25T10:21:35.903

我添加了这个 shell 脚本来从 IS 转换 jsp 文件

```
#!/bin/sh

###############################################
## this script file must be placed in the parent  
## folder of the to folders "in" and "out"
## in contain the input jsp files
## out will containt the generated jsp files
## 
###############################################

find in/ -name *.jsp | 
    while read line; do 
        outpath=`echo $line | sed -e 's/in/out/'` ;
        parentdir=`echo $outpath | sed -e 's/[^\/]*\.jsp$//'` ;
        mkdir -p $parentdir
        echo $outpath ;
        iconv -t UTF-8 -f ISO-8859-1 -o $outpath $line ;
    done 
```

* * *

## 回答 #14

> 赞同：0
> 
> 时间：2019-06-13T18:03:20.643

页面编码或其他任何东西都无关紧要。ISO-8859-1 是 UTF-8 的子集，因此您不必将 ISO-8859-1 转换为 UTF-8，因为 ISO-8859-1 已经是 UTF-8，是 UTF-8 的子集，但仍然是 UTF- 8\. 另外，如果您在某处有双重编码，那么所有这些都不意味着什么。这是我对所有与编码和字符集相关的东西的“包治百病”的秘诀：

```
 String myString = "heartbroken ð"; 
```

//字符串是双重编码的，首先修复它。

```
 myString = new String(myString.getBytes(StandardCharsets.ISO_8859_1), StandardCharsets.UTF_8);
                String cleanedText = StringEscapeUtils.unescapeJava(myString);
                byte[] bytes = cleanedText.getBytes(StandardCharsets.UTF_8);
                String text = new String(bytes, StandardCharsets.UTF_8);
                Charset charset = Charset.forName("UTF-8");
                CharsetDecoder decoder = charset.newDecoder();
                decoder.onMalformedInput(CodingErrorAction.IGNORE);
                decoder.onUnmappableCharacter(CodingErrorAction.IGNORE);
                CharsetEncoder encoder = charset.newEncoder();
                encoder.onMalformedInput(CodingErrorAction.IGNORE);
                encoder.onUnmappableCharacter(CodingErrorAction.IGNORE);
                try {
                    // The new ByteBuffer is ready to be read.
                    ByteBuffer bbuf = encoder.encode(CharBuffer.wrap(text));
                    // The new ByteBuffer is ready to be read.
                    CharBuffer cbuf = decoder.decode(bbuf);
                    String str = cbuf.toString();
                } catch (CharacterCodingException e) {
                    logger.error("Error Message if you want to");

                } 
```**

# java - 选择新生成的密码后，密码不会更新

> ID：12723341
> 
> 赞同：3
> 
> 时间：2012-10-04T08:33:43.950
> 
> 标签：java, jsf, jsf-2, primefaces

我有一个密码确认组件。用户可以手动输入两个密码，也可以生成一对。生成的密码显示在选择列表中。从列表中选择密码时，应使用此密码更新两个输入密码。问题是输入密码不反映选择密码后的更改。

### 密码确认组件：

```
<ui:composition xmlns="http://www.w3.org/1999/xhtml"
    xmlns:ui="http://java.sun.com/jsf/facelets"
    xmlns:h="http://java.sun.com/jsf/html"
    xmlns:f="http://java.sun.com/jsf/core"
    xmlns:p="http://primefaces.org/ui">

    <h:outputText value="#{eval.getString(name)}: #{mandatory ? '*' : ''}"/>   
    <h:panelGrid columns="3">               
        <h:column>
            <p:password id="psw1"
                value="#{eval.evaluateAsBean(beanName).password}" feedback="false"
                disabled="#{not enabled}" />
        </h:column>
        <h:column>
            <p:commandButton value="#{label.create}" disabled="#{not enabled}"
                action="#{eval.evaluateAsBean(beanName).generate}"
                update="generated">
            </p:commandButton>
        </h:column>
        <h:column>
            <p:selectOneMenu id="generated"
                disabled="#{not enabled}"
                value="#{eval.evaluateAsBean(beanName).selectedPassword}">
                <f:selectItems value="#{eval.evaluateAsBean(beanName).passwords}"
                    var="val" itemLabel="#{val}" itemValue="#{val}" />
                    <p:ajax listener="#{eval.evaluateAsBean(beanName).passwordChanged}"
                        update="psw1, psw2" />
            </p:selectOneMenu>
        </h:column>
        <h:column>
            <p:password id="psw2"
                value="#{eval.evaluateAsBean(beanName).confirmedPassword}"
                feedback="false" disabled="#{not enabled}" />
        </h:column>
        <h:column>
            <h:outputText value="" />
        </h:column>
        <h:column>
            <h:outputText value="" />
        </h:column>
    </h:panelGrid>
</ui:composition> 
```

### passwordChanged 监听器：

```
public void passwordChanged() {
    this.password = selectedPassword;
    this.confirmedPassword = selectedPassword;
} 
```

### 编辑1

我已删除更新属性`p:ajax`并将`passwordChanged`侦听器更改为：

```
public void passwordChanged() {
    this.password = selectedPassword;
    this.confirmedPassword = selectedPassword;
    RequestContext.getCurrentInstance().update("form:tabs:editorsGroup:editor:psw1");
    RequestContext.getCurrentInstance().update("form:tabs:editorsGroup:editor:psw2");
} 
```

使用 Firebug，psw1 的 id 是：`form:tabs:9:editorsGroup:4:editor27:psw1`。还是不行。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-04T14:03:16.990

出于明显的安全原因，[`<p:password>`](http://www.primefaces.org/docs/vdl/3.4/primefaces-p/password.html)( 和[`<h:inputSecret>`](http://docs.oracle.com/javaee/6/javaserverfaces/2.1/docs/vdldocs/facelets/h/inputSecret.html)) 默认情况下不会重新显示模型中的值。

要关闭此安全功能，请设置`redisplay="true"`（这也适用`<h:inputSecret>`）。

```
<p:password ... redisplay="true" /> 
```

### 也可以看看：

*   [在从托管 bean 加载页面期间设置 jsf InputSecret 的值](https://stackoverflow.com/questions/3776263/setting-the-value-for-jsf-inputsecret-during-page-load-from-the-managed-bean/)

# java - JSF - 基于角色的页面显示

> ID：12723344
> 
> 赞同：4
> 
> 时间：2012-10-04T08:33:46.803
> 
> 标签：java, jsf, jsf-2, primefaces, spring-security

我正在使用 JSF 2.0 和 PrimeFaces 开始一个 Web 应用程序项目。其中一项要求是根据用户角色显示不同的页面内容。例如，只有管理员才能看到菜单项 - 用户管理。

安全方面，我会选择 Spring 安全性。

如何以优雅的方式实现这一目标？我应该为每个人制作一个 xhtml 模板，然后使用特定于角色的 UI 项为每个角色创建不同的页面吗？

谢谢

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-10-04T08:38:49.457

只需在组件中使用属性`rendered`+ 角色检查，例如子菜单：

```
<p:submenu label="#{msg['header.management']}" rendered="#{request.isUserInRole('INTERNO')}">
        <p:submenu label="#{msg['header.roles']}" icon="ui-icon-contact">
                <p:menuitem value="#{msg['header.newRole']}" url="/pages/addRole.jsf" />
            <p:menuitem value="#{msg['header.mngRoles']}" url="/pages/viewRole.jsf" />
</p:submenu> 
```

作为“INTERNO”在 Spring 中定义的角色。我认为这很优雅。

要禁用该 pafe （或一组页面）的导航，您仍然需要在您`spring-security.xml`的示例中添加一个拦截：

```
<intercept-url pattern="/pages/*Role*" access="hasRole('INTERNO')" /> 
```

# runtime-error - TypeScript tsc 引发错误“无效句柄”80070006（解决方案）

> ID：12723348
> 
> 赞同：0
> 
> 时间：2012-10-04T08:34:01.407
> 
> 标签：runtime-error, typescript, tsc

从 cmd 命令行提示符（Windows 7 x64）运行 tsc 时出现此异常：

```
set tsc="c:\Program Files (x86)\nodejs\node_modules\typescript\bin"
%tsc%\tsc.js foo.ts 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-04T08:35:12.263

解决方案/解决方法是使用节点运行 tsc：

```
set node="c:\Program Files (x86)\nodejs"
set tsc=%node%\node_modules\typescript\bin
%node%\node %tsc%\tsc.js foo.ts 
```

（这可能很明显，但我花了一些时间才弄清楚。）

# xcode - 无法验证 App 并将其提交到 Mac App Store

> ID：12723351
> 
> 赞同：11
> 
> 时间：2012-10-04T08:34:10.597
> 
> 标签：xcode, macos, code-signing, mac-app-store

我已经无数次为 iOS 应用程序进行了代码设计和提交。这次 Mac App Store 让我印象深刻。我反复收到相同的错误消息：

> “我的名字”是一个有效的身份。但是，您没有关联的包标识。

我已经在堆栈溢出中认识到这两个主题： [mas-code-signing-identity-private-key](https://stackoverflow.com/questions/10559942/mas-code-signing-identity-private-key)和[mac-app-package-identity-not-installed](https://stackoverflow.com/questions/10164727/mac-app-package-identity-not-installed)

里面没有任何东西可以解决我的问题。

这就是我（最可靠地）重现此消息的方式：

1.  我清理了以“Mac Developer”或“3rd Party Mac Developer”开头的所有证书和私钥。当然还有过期的。
2.  撤销 Mac 认证门户中的所有内容。
3.  创建 App-ID（只做了一次）
4.  为 Mac 开发创建新证书。我只能假设这可以与 iOS 开发的调试证书相媲美。
5.  为 Mac App 创建新证书。再一次，我只能假设这可能类似于 iOS 开发中的分发证书。
6.  出于完成原因，为我的系统创建一个新的证书/配置文件。
7.  创建生产配置文件。我只能假设这可能等同于 iOS 分发配置文件。
8.  然后我下载所有证书混乱并正确安装。一些进入 Keychain，另一些进入 Preferences 和 XCode。
9.  为了确保我重新启动 XCode 甚至整个 Mac（无论如何都不会改变令人沮丧的结果）。
10.  我转到项目构建设置并选择生产配置文件，因为我假设“生产”等同于“分发”。在目标构建设置中更改协同设计标识也不起作用。虽然 Apple 在其文档中声称，对于 App Store 提交，必须在项目构建设置中更改签名身份。
11.  我运行存档构建。
12.  我在管理器中选择存档并单击验证。
13.  出现此错误消息：

> “我的名字”是一个有效的身份。但是，您没有关联的包标识。

我找不到任何指向“包标识”一词实际含义的指针。最让我沮丧的是，Apple 文档中关于代码签名和提交过程的术语混乱对我来说似乎不是很清晰和准确。至少不如有关 iOS 应用程序提交的同一过程的文档（使用完全不同的术语）的文档清晰和准确。

大概是我理解错了？感谢您提前提供任何帮助或指示。

* * *

## 回答 #1

> 赞同：21
> 
> 时间：2012-10-04T10:10:16.887

好的，对于遇到类似问题的人，我有一些重要的指示（Apples 文档的补充）。

1.  该错误消息完全具有误导性。
2.  不要太认真地对待 Apple 文档中的每一个字。

为了解决这个问题，有两点最重要：

1.  除了所有其他配置文件混乱之外，您还需要 2 个证书才能提交到 Mac App Store（与 iOS App Store 提交的相同过程相反）。两者都必须与其相应的公钥和私钥对一起安装。
    1.  Mac 应用程序
    2.  Mac 安装程序
2.  需要在构建目标上设置协同设计，而不是在项目上。我不记得在哪里，但这在 Apple 的一份文档中被错误地描述了。

最终，我的提交通过保持这 2 点起作用。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-09-06T19:08:28.037

Keychain & XCode 还有一个额外的问题。

当 Xcode 使用证书时，他们希望您的钥匙串中只有一个证书。如果你有一个过期的和一个有效的，Xcode 经常会失败。

因此，您使用 Keychain Access 查看您的钥匙串，并没有看到过期的证书。它还在那里！Keychain Access 的默认设置隐藏过期的证书。转到查看菜单并选择显示过期证书。删除所有过期的，它们对任何事情都没有好处。

退出钥匙串访问并重新启动 Xcode。添加/删除证书时，Xcode 通常需要重新启动。

那时，存档验证过程对我有用。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-05-22T18:57:18.947

这对我来说也是如此。

只是想澄清一下，您绝对需要 Mac App Distribution 和 Mac Installer Distribution 证书。感谢 Jacque 的上述解释。它应该如下所示：![在此处输入图像描述](../Images/3935009a7ff4a0f70e332dc667ad3639.png)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-05-29T20:39:58.533

是的，问题是 Mac 安装程序分发证书。

修复所有问题并消除所有麻烦的最简单方法只需转到 Xcode->Window->Organizer->Devices 然后在右下角按刷新并使用您的帐户登录... xcode 将生成并下载所有所需的证书和配置文件。

# php - PHP 和 MySQL 通过 GET 循环相同的 QueryString

> ID：12723359
> 
> 赞同：0
> 
> 时间：2012-10-04T08:34:28.013
> 
> 标签：php, mysql, arrays, loops

我正在尝试在类别页面上进行电子商务过滤。到目前为止，我可以让它为一种颜色工作，但如果用户检查不止一种颜色，我希望它也搜索另一种颜色。

# 网址

```
//current
category.php?colourChoice=White
//more than one
category.php?colourChoice=White&colourChoice=Ruby+Red 
```

我意识到我需要某种形式的数组或爆炸？

# MYSQL

```
products
---
id      sku     price
1       p22     45.00
2       p33     65.00   
3       p44     70.00

colours
---
id      sku     name
1       p22     White
2       p33     Ruby Red    
3       p44     Black 
```

# HTML

```
<form action="form.php" method="get">
    <input type="checkbox" name="colourChoice" value="White"/>
    <input type="checkbox" name="colourChoice" value="Black"/>
    <input type="checkbox" name="colourChoice" value="Ruby Red"/>
    <input type="checkbox" name="colourChoice" value="Orange"/>
    <input type="submit" value="go">
</form> 
```

# PHP

```
// VARS
$colourName=mysql_real_escape_string($_GET["colourChoice"]);

// MYSQL
$checkSQL=mysql_query("
    SELECT * FROM `products`
    INNER JOIN `colours`
    ON `products`.`sku` = `colours`.`sku`
    WHERE (
    name = '".$colourName."'
        OR name LIKE '".$colourName.";%'
        OR name LIKE '%;".$colourName.";%'
        OR name LIKE '%;".$colourName."'
    )
");

// SHOW RESULTS
while($r = mysql_fetch_array($checkSQL)) {
    echo '
        <div class="product">
            Cost £'.$r['price'].'<br />
        </div>
    ';
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-04T08:43:01.503

你必须使**复选框数组**如下

```
<form action="form.php" method="get">
    <input type="checkbox" name="colourChoice[]" value="White"/>
    <input type="checkbox" name="colourChoice[]" value="Black"/>
    <input type="checkbox" name="colourChoice[]" value="Ruby Red"/>
    <input type="checkbox" name="colourChoice[]" value="Orange"/>
    <input type="submit" value="go">
</form> 
```

然后，您将在 php.ini 中将多个值签入数组。

```
foreach($_GET["colourChoice"] as $value){
  /// here you can make concat for where clause.
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-04T08:45:41.953

您可以在 PHP 中将 HTML 输入值作为数组获取：

# HTML

```
<form action="form.php" method="get">
    <input type="checkbox" name="colourChoice[]" value="White"/>
    <input type="checkbox" name="colourChoice[]" value="Black"/>
    <input type="checkbox" name="colourChoice[]" value="Ruby Red"/>
    <input type="checkbox" name="colourChoice[]" value="Orange"/>
    <input type="submit" value="go">
</form> 
```

然后使用准备/执行语句查询数据库以防止 SQL 注入。

# PHP

```
$placeholders = substr(str_repeat('?, ', count($_GET['colourChoice']), 0, -1);
$query = "
    SELECT * FROM `products`
    INNER JOIN `colours`
    ON `products`.`sku` = `colours`.`sku`
    WHERE name in ($placeholders);
");
$db = new PDO(...);
$stmt = $db->prepare($query);
$stmt->execute($_GET['colourChoice']);
print_r($stmt->fetchAll()); 
```

# cordova - iOS6 上的 Cordova 2.1 错误：4709：CFNetwork 内部错误

> ID：12723367
> 
> 赞同：2
> 
> 时间：2012-10-04T08:35:03.090
> 
> 标签：cordova, ios6

我将 Cordova/Phonegap 升级到 2.1，将 xCode 升级到版本 4.5 (4G182)，现在我的应用程序无法通过 jQuery Mobile 1.2.0-rc.1 加载一些 ajax 请求。

当我在 iOS 6 设备 (iPhone 4) 或 Simulator 6.0 上构建时，我会进入我的日志：

```
2012-10-04 10:22:19.760 MyApp[4709:907] Multi-tasking -> Device: YES, App: YES
2012-10-04 10:22:21.994 MyApp[4709:1703] 4709: CFNetwork internal error (0xc01a:/SourceCache/CFNetwork/CFNetwork-609/Connection/URLConnectionClient.cpp:2341)
2012-10-04 10:22:22.217 MyApp[4709:3807] 4709: CFNetwork internal error (0xc01a:/SourceCache/CFNetwork/CFNetwork-609/Connection/URLConnectionClient.cpp:2341) 
```

我根据[这个邮件主题](http://osdir.com/ml/phonegap/2012-09/msg01244.html)删除了所有 armv6 引用。

我在 Simulator 5.1 上运行没有问题。

提前感谢您的建议！

# python - Python：来自 ipdb 的 Sublime Text 2 上的行高亮显示

> ID：12723375
> 
> 赞同：5
> 
> 时间：2012-10-04T08:35:30.863
> 
> 标签：python, debugging, sublimetext2

有一段时间我有这个选项，在使用 ipdb 从 shell 调试时，突出显示在 Sublime Text 2 中打开的 Python 源文件中当前执行的行。

我不知道它是一个插件，还是一个选项或其他东西，但我再也找不到它了。有什么帮助吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2014-01-17T10:42:08.303

PdbSublimeTextSupport[是](https://pypi.python.org/pypi/PdbSublimeTextSupport)您一直在寻找的吗？还有[https://gist.github.com/reebalazs/7641029](https://gist.github.com/reebalazs/7641029)以获得合适的 .pdbrc？尽管此设置似乎破坏了自动完成功能。

# ios - NSDateFormatter 格式化后字符串错误

> ID：12723377
> 
> 赞同：1
> 
> 时间：2012-10-04T08:35:36.180
> 
> 标签：ios, nsstring, nsdateformatter

我通过字符串参数接收日期，它是 tempDateString，格式为 [日月年]（例如 01 05 2005）：

```
 NSLog(@"tempdatestring %@", tempDateString);
 NSDateFormatter *dateFormatter = [[NSDateFormatter alloc] init];
 [dateFormatter setDateFormat:@"dd MM YYYY"];
 NSDate *dayDate = [dateFormatter dateFromString:tempDateString];
 NSLog(@"daydate %@", dayDate); 
```

我的问题是，这两个日志不匹配。输出是：

```
tempdatestring 04 10 2012
daydate 2011-12-24 22:00:00 +0000 
```

我应该更改日期格式化程序的日期格式，以获得好的日期？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-10-04T09:06:10.703

2 问题

*   您的格式错误，`@"dd MM yyyy"` **区分大小写**
*   使用时区获取正确的值[GMT 值]

    ```
    NSString *tempDateString=@"04 10 2012" ;
    NSLog(@"tempdatestring %@", tempDateString);
    NSDateFormatter *dateFormatter = [[NSDateFormatter alloc] init];
    [dateFormatter setTimeZone:[NSTimeZone timeZoneForSecondsFromGMT:0]];
    [dateFormatter setDateFormat:@"dd MM yyyy"];
    NSDate *dayDate = [dateFormatter dateFromString:tempDateString];
    NSLog(@"daydate %@", dayDate); 
    ```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-04T08:38:38.360

当您使用`%@`格式说明符时，将使用`-description`在提供的对象上调用的方法的返回值。

`NSDate`的`-description`方法以特定方式输出其值。

您*真正的*问题是您的日期格式字符串不正确 - 它应该是`dd MM yyyy`.

我把它放在一个示例 Xcode 项目中：

```
NSString *s = @"04 11 2012";
NSDateFormatter *df = [[NSDateFormatter alloc] init];
[df setDateFormat:@"dd MM yyyy"];
NSDate *d = [df dateFromString:s];
NSDateComponents *c = [[NSCalendar currentCalendar] components:NSDayCalendarUnit | NSMonthCalendarUnit | NSYearCalendarUnit fromDate:d];
NSLog(@"%@", c); 
```

它给了我以下输出：

```
2012-10-04 01:53:24.320 dftest[59564:303] <NSDateComponents: 0x100113e70>
    Calendar Year: 2012
    Month: 11
    Leap month: no
    Day: 4 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-04T08:48:42.657

做这个：

```
NSDateFormatter *dateFormatter = [[NSDateFormatter alloc] init];
[dateFormatter setDateFormat:@"dd MM yyyy"];
NSDate *dayDate = [dateFormatter dateFromString:tempDateString];
NSLog(@"daydate %@", dayDate);
NSString *strDate = [dateFormatter stringFromDate:dayDate];
NSLog(@"strDate :%@",strDate); 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-10-04T09:04:26.303

```
NSDateFormatter *form = [[NSDateFormatter alloc] init];
[form setDateFormat:@"dd MM yyyy"];
form.timeZone = [NSTimeZone timeZoneForSecondsFromGMT:-7200.0];
NSDate *dayDate = [form dateFromString:@"05 10 2012"];
NSLog(@"daydate %@", dayDate);
NSString *strDate = [form stringFromDate:dayDate];
NSLog(@"strDate %@",strDate); 
```

将日期格式更改为`@"dd MM yyyy"`. 在此之后， dateFromString 可能仍会解析错误的日期（在我的情况下是昨天 21-00）。为避免这种情况，我在 DateFormatter 中设置了 TimeZone：

```
form.timeZone = [NSTimeZone timeZoneForSecondsFromGMT:-7200.0]; 
```

-7200.0 是我的时区，您应该将其更改为您的时区（“0”设置为格林威治）。在此日志看起来像之后：

```
daydate 2012-10-05 02:00:00 +0000
strDate 05 10 2012 
```

# static-linking - MinGW-w64 的 ar.exe 在尝试构建静态库时找不到库

> ID：12723383
> 
> 赞同：3
> 
> 时间：2012-10-04T08:35:55.180
> 
> 标签：static-linking, sfml, unix-ar, mingw-w64

几天来，我一直试图让 MinGW-w64 在我的系统上工作，主要是因为它有更新的 GCC 版本，但我要么设置错误，要么 MinGW-w64 本身存在一些奇怪的问题。

我现在已经下载了[i686-w64-mingw32-gcc-4.7.2-release-win32_rubenvb](http://sourceforge.net/projects/mingw-w64/files/Toolchains%20targetting%20Win32/Personal%20Builds/rubenvb/gcc-4.7-release/i686-w64-mingw32-gcc-4.7.2-release-win32_rubenvb.7z/download)，将其解压缩`C:/Dev/mingw-ruben`并添加`C:/Dev/mingw-ruben/bin`到 $PATH 环境变量的路径。

我正在尝试构建的是带有 CMake 文件的[SFML 2 。](https://github.com/LaurentGomila/SFML)运行 CMake 会正常工作，编译器会被识别并通过所有测试。CMake 还会`ar.exe`在`C:/Dev/mingw-ruben/bin`文件夹中找到 。生成 MinGW Makefile 后，我切换到 Windows 命令行并运行`mingw32-make install`. 问题出在哪里，我收到错误消息：

```
mingw-ruben\bin\ar.exe: mingw-ruben/lib/libopengl32.a: No such file or directory 
```

或者对于网络库

```
mingw-ruben\bin\ar.exe: mingw-ruben/lib/libws2_32.a: No such file or directory 
```

错误似乎很明显，检查时确实没有`libopengl32.a`或`libws2_32.a`in `mingw-ruben/lib/`，但文件实际上位于`C:/Dev/mingw-ruben/i686-w64-mingw32/lib`.

现在我如何告诉 ar/make/cmake 不仅在`mingw-ruben/lib`目录中搜索，而且在`mingw-ruben/i686-w64-mingw32/lib`?

`i686-w64-mingw32`将所有内容从子文件夹复制到`mingw-ruben`根文件夹是个好主意吗？

附带说明：我可以`mingw32-make install`再次调用，该过程将继续，但在尝试将我的应用程序与 SFML 链接时，我遇到了许多`glXYZ`来自 SFML 的函数的未解决符号错误。

更多信息：我使用的是 Windows 8 x64，但我认为这并不重要，是的，我尝试过 MSYS，但它不能解决我的任何问题。

难道我做错了什么？我必须专门配置东西吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-15T13:05:13.560

**2015 年 1 月 编辑**

现在 SFML 2.2 已经发布，这不再是问题，在链接静态时您必须自己链接 SFML 的依赖项。

**2014 年 1 月 编辑**

从提交[165f2b1888](https://github.com/LaurentGomila/SFML/commit/165f2b1888c86050d2bc43943311416b7f2dee25)和[f784fe4c07 开始](https://github.com/LaurentGomila/SFML/commit/f784fe4c07da52b2e85d9c612bf8a027718c9b5c)，包括在稳定版 SFML 2.1 中，支持 MinGW-w64 编译器。

然而，在与各方进一步讨论时发现，`sfml_static_add_libraries`marco 是一个相当丑陋的黑客。简而言之，它解压缩了静态依赖项并将它们的 obj 文件包含到 SFML 库本身中。这是一个最明显的问题，当您尝试使用您自己的 GLEW 版本时，由于 SFML 已经在使用其内部版本，因​​此失败了。这个问题被带到[了论坛](http://en.sfml-dev.org/forums/index.php?topic=9362.0)并被推了很久，直到 Laurent 最终让步并采用了链接依赖项的正确方法，这意味着你现在必须自己链接它们。

从提交[dbf01a775b 开始](https://github.com/LaurentGomila/SFML/commit/dbf01a775b7545bf83fbee0e1464f3f323723187)，它*不*包含在 SFML 2.1 的稳定版本中，当静态链接到 SFML 时，必须在 finally 应用程序中链接 SFML 依赖项。

* * *

**原来的**

在 IRC 上进行了一番交谈后，我们已经弄清楚了。它与 MinGW 无关，但都是 SFML 的错。为了在静态链接时减少 SFML 的依赖项列表，开发人员决定手动从每个库（opengl32、ws2_32、...）中提取符号，这显然不是一个人做事的方式，并且违反了一些 ODR 规则。然后发生实际错误，因为开发人员假设该库将位于该文件夹中，`mingw/lib`但对于 MinGW w64，它位于一个单独的目录中`mingw/version/lib`，因此`ar.exe`没有找到该库。

**解决方案**

删除对`sfml_static_add_libraries`宏的调用，然后重新编译。之后，您必须链接静态链接的所有依赖项，就像它应该的那样。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-14T11:58:41.390

我认为这可能是您下载的 gcc 发行版的问题。

对这个问题稍加了解就可以在这里提出鲁本的问题：

[https://unix.stackexchange.com/questions/45277/executing-binary-file-file-not-found](https://unix.stackexchange.com/questions/45277/executing-binary-file-file-not-found)

在我看来，这与此有关（尽管它是关于 linux 而不是赢）

几个月前，我在 gcc 4.7.0 linux->win 交叉编译器中遇到了类似的问题（丢失的文件的名称不同）。所以直到现在我都使用标准的 ubuntu mingw-w64 包，就在昨天我再次尝试 i686-w64-mingw32-gcc-4.7.2-release-linux64_rubenvb.tar.xz 并且它在其他相同的环境中没有问题以前的版本因“..ar.exe: ...没有这样的文件”而失败。有时我也在 Windows 中开发，然后我使用[http://www.mingw.org/](http://www.mingw.org/)，这对我来说更容易在 Win 中设置。它仅支持 32 位目标，但对于我的项目来说已经足够了。

# java - 使用 Maven / Proguard 分别混淆两个 JAR

> ID：12723384
> 
> 赞同：1
> 
> 时间：2012-10-04T08:36:06.687
> 
> 标签：java, maven, maven-2, proguard

我使用 maven 来管理一个核心包和两个都依赖于核心包的应用程序包。由于技术原因，我无法为每个应用程序包制作完整的组装，这意味着我必须将每个应用程序包与核心包作为单独的 JAR 分发，该 JAR 将放在应用程序的类路径中。

我还需要混淆我的 JAR。对于单个程序集，我可以轻松实现这一点，但是，我不确定是否可以在保持 JAR 分离的同时混淆所有类？

有人已经遇到过这个问题，如果是这样，是否有可能用 maven 和 proguard 做到这一点？

提前致谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-04T09:38:29.650

虽然我不确定你是否可以分别混淆两个相互依赖的罐子，但我已经看到了类似的事情。

这可以通过在两个罐子之间保持一些干净的接口来实现。这将允许您将 jar 之间的接口保持为未混淆，并且可以安全地对其余类进行混淆，而不会破坏依赖关系。

这是在我工作过的产品之一上完成的，该产品向客户端公开了公共 API 以进行编码，但实现类被混淆了。

这个解决方案实际上实施起来可能很痛苦，并且取决于两个 jar 之间的相互依赖程度。

# ruby-on-rails - Rails partials 空集合

> ID：12723388
> 
> 赞同：3
> 
> 时间：2012-10-04T08:36:19.833
> 
> 标签：ruby-on-rails, ruby-on-rails-3, erb

有没有办法在集合为空时设置渲染集合的默认行为。我到目前为止是这样的：

```
<%= render @entries %> 
```

`_entry.html.erb`它为列表中的每个条目呈现部分`@entries`。我想打印某种消息，例如：“未找到条目”。有没有办法在不明确写部分条目的情况下这样做？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-10-04T08:49:11.873

这个怎么样

```
<%= render(@entries) || 'No Entries Found' %> 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2016-05-26T19:54:42.663

首先创建一个空的部分，比如说`_empty.html.erb`。

然后：

```
<%= render(@entries) || render('empty') %> 
```

通过这种方式，您可以自定义空白部分以适合您的设计。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-04T08:43:58.057

您可以简单地在模板中附加一个条件：

```
<%= render @entries %>
<% if @entries.blank? %>
  No entries found.
<% end %> 
```

# asp.net-mvc-3 - 如何将控制器方法返回的ajax参数分配给MVC3视图中的字符串？

> ID：12723392
> 
> 赞同：0
> 
> 时间：2012-10-04T08:36:41.887
> 
> 标签：asp.net-mvc-3

大家好，我怎样才能将从控制器方法返回的参数分配给 View 的字符串？这是我的控制器：

```
public string corporate()
        {
            var management = "1";

            return (management);
        } 
```

而我的观点：

```
@{
string parameter=""+ @:<div id="ajaxvalue"></div>;
} 
```

但是我无法分配参数我该怎么办？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-04T08:57:24.563

您可以使用以下命令将其传递给视图`ViewBag`：

```
public ActionResult corporate()
{
    ViewBag.management = "1";
    return PartialView();
} 
```

并在相应的视图内：

```
@ViewBag.management 
```

或者更好的方法是定义一个视图模型：

```
public class MyViewModel
{
    public string Management { get; set; }
} 
```

然后让您的控制器操作将此视图模型传递给视图：

```
public ActionResult corporate()
{
    var model = new MyViewModel();
    model.Management = "1";
    return PartialView(model);
} 
```

最后有一个强类型视图：

```
@model MyViewModel
@Model.Management 
```

如果您使用 AJAX 调用此控制器操作，另一种可能性是返回 JSON：

```
public ActionResult corporate()
{
    return Json(new { management = "1" }, JsonRequestBehavior.AllowGet);
} 
```

# xml - 在 xslt 中显示变量的值

> ID：12723393
> 
> 赞同：2
> 
> 时间：2012-10-04T08:36:52.953
> 
> 标签：xml, xslt

嗨，我想以百分比格式填充宽度中的 maxbars 变量的值，但由于某些原因，它没有采用它的值。你能帮忙吗？

示例：我想将其显示为 width:10.9% 格式

```
<xsl:for-each select="catalog/cd/price">
 Current node:
 <xsl:variable name="maxbars" select="."/>
 <div style="width: 200px; height: 20px;">
 <div style="width: maxbars%; height: 18px; background-color: red"></div>
 </div>
 <br/>
 </xsl:for-each>

<catalog>
<cd>
    <title>Empire Burlesque</title>
    <artist>Bob Dylan</artist>
    <country>USA</country>
    <company>Columbia</company>
    <price>10.90</price>
    <year>1985</year>
</cd>
<cd>
    <title>Hide your heart</title>
    <artist>Bonnie Tyler</artist>
    <country>UK</country>
    <company>CBS Records</company>
    <price>9.90</price>
    <year>1988</year>
</cd> 
```

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-10-04T08:59:10.697

您必须表明您正在使用该`maxbars`变量。如果在属性内部使用它，则可以对 xPath 表达式使用 XSL-T 的花括号语法：

```
<div style="width: {$maxbars}%; height: 18px; background-color: red"></div> 
```

**重要提示：大括号***围绕*表达式放置，您使用`$`大括号的内部。

如果要在属性之外插入变量（和其他 xPath 表达式），则必须使用以下`<xsl:value-of>`元素：

```
<span>Price: <xsl:value-of select="$maxbars"/></span> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-04T08:49:10.643

**编辑**- nd 的答案更优雅 - {} 技术更简洁。

作为替代方案，您可以手动构建`div`元素，以替换`$maxbars`变量。

```
<xsl:template match="/">
    <xsl:for-each select="catalog/cd/price">
        Current node:
        <xsl:variable name="maxbars" select="."/>
        <div style="width: 200px; height: 20px;">
            <xsl:element name="div">
                <xsl:attribute name="style">
                    <xsl:text>width: </xsl:text>
                    <xsl:value-of select="$maxbars" />
                    <xsl:text>%; height: 18px; background-color: red</xsl:text>
                </xsl:attribute>
            </xsl:element>
        </div>
        <br/>
    </xsl:for-each>
</xsl:template> 
```

# android - 如何在android中以编程方式获取应用程序大小？

> ID：12723396
> 
> 赞同：2
> 
> 时间：2012-10-04T08:36:54.530
> 
> 标签：android, apk

我怎样才能获得所有已安装的应用程序大小，android 中的数据大小。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-04T08:39:22.720

尝试这样的事情

```
PackageManager pm = getPackageManager();

Method getPackageSizeInfo = pm.getClass().getMethod(
    "getPackageSizeInfo", String.class, IPackageStatsObserver.class);

getPackageSizeInfo.invoke(pm, "com.android.mms",
    new IPackageStatsObserver.Stub() {

        @Override
        public void onGetStatsCompleted(PackageStats pStats, boolean succeeded)
            throws RemoteException {

            Log.i(TAG, "codeSize: " + pStats.codeSize);
        }
    }) 
```

# html - 添加 到 html5 上的每个项目拖放

> ID：12723397
> 
> 赞同：1
> 
> 时间：2012-10-04T08:36:58.207
> 
> 标签：html, html-lists

我有一个 HTML5 拖放功能。您可以将项目从 div1 拖动到 div2。
我想要做的是为每个放入 div2 的项目，自动给它一个列表编号。此刻，将文本添加到 div2 的 JS 代码如下所示：

```
function drop(ev) {
    ev.preventDefault();
    var data=ev.dataTransfer.getData("Text");
    ev.target.appendChild( document.getElementById(data));
} 
```

将元素放到 div2 中。
下面介绍拖动功能。

```
function drag(ev) {
ev.dataTransfer.setData("Text",ev.target.id);
} 
```

html 看起来像这样：

```
<div id="div1" ondrop="drop(event)">
<div id="title" draggable="true" ondragstart="drag(event)" style="font-family:Metacopy">Text to be Dragged</div>
</div>
<div id="div2" ondrop="drop(event)"></div> 
```

我会很感激任何帮助。对不起，如果答案很明显，我对此有点陌生。

# c++ - Windows 设备属性文档？

> ID：12723399
> 
> 赞同：0
> 
> 时间：2012-10-04T08:37:09.147
> 
> 标签：c++, windows, winapi

在 Windows 中，如果你去 DeviceManager -> 选择设备（如 aa 键盘） -> 转到详细信息 -> 属性列表：

```
Device description
Hardware Ids
Compatible Ids
Device class
Device class guid
Driver key
ConfigFlags
... etc 
```

我在哪里可以找到这些属性中的每一个的含义？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-04T09:29:53.633

从[MSDN 文档](http://msdn.microsoft.com/en-us/library/windows/hardware/ff541327%28v=vs.85%29.aspx)中，您将找到设备实例 ID 的描述，并链接到其他描述。[此链接](http://www.osronline.com/ddkx/install/idstrings_8tt3.htm)简要介绍了其中一些，如下所示：

> **设备 ID**
> 
> 设备 ID 是供应商定义的标识字符串，它是安装程序用于将设备与 INF 文件匹配的最具体的 ID。一台设备只有一个设备 ID。设备 ID 与硬件 ID 具有相同的格式。如果枚举器报告设备的硬件 ID 列表，则设备 ID 应该是列表中的第一个硬件 ID。
> 
> PnP 管理器使用设备 ID 在设备枚举器的注册表项下为设备创建子项。
> 
> 要获取设备 ID，请使用 IRP_MN_QUERY_ID 请求并将 Parameters.QueryId.IdType 字段设置为 BusQueryDeviceID。
> 
> **硬件 ID**
> 
> 硬件 ID 是供应商定义的标识字符串，安装程序用于将设备与 INF 文件匹配。在大多数情况下，设备都有与其相关联的硬件 ID 列表。（但是，也有例外 - 请参阅 1394 设备的标识符）。列表中的第一个硬件 ID 应为设备 ID，其余 ID 应按适用性降序排列。
> 
> 硬件 ID 具有以下通用格式之一：
> 
> `<enumerator>\<enumerator-specific-device-ID>`这是单个枚举器向 PnP 管理器报告的单个 PnP 设备的最常见格式。新的枚举器应使用此格式或以下格式。 `*<enumerator-specific-ID>`星号表示设备受多个枚举器支持，例如 ISAPNP 和 BIOS。 `<device-class-specific-ID>`已建立自己的命名约定的现有设备类可能使用自定义格式。有关其硬件 ID 格式的信息，请参阅此类总线的硬件规范。新的枚举器不应该使用这种格式。硬件 ID 的字符数（不包括 NULL 终止符）必须小于 MAX_LENGTH_LEN。此约束适用于硬件 ID 中所有字段和任何“\”字段分隔符的长度总和。此外，当实例ID与硬件ID连接以创建设备实例ID时，硬件ID和实例ID的长度进一步受限于设备实例ID的最大可能长度。
> 
> 要获取设备的硬件 ID 列表，请调用 IoGetDeviceProperty，并将 DeviceProperty 参数设置为 DevicePropertyHardwareID。此例程检索的硬件 ID 列表是 REG_MULTI_SZ 值。硬件列表中的最大字符数（包括每个硬件 ID 后面的 NULL 终止符和最终的 NULL 终止符）为 REGSTR_VAL_MAX_HCID_LEN。硬件 ID 列表中的最大可能 ID 数为 MAX_HCID_COUNT。
> 
> 硬件 ID 示例
> 
> 在下文中，第一个示例是 PnP 设备的通用标识符，第二个示例是 PCI 设备的标识符：
> 
> 根*PNP0F08
> 
> PCI\VEN_1000&DEV_0001&SUBSYS_00000000&REV_02
> 
> **兼容的 ID**
> 
> 兼容 ID 是供应商定义的标识字符串，安装程序用于将设备与 INF 文件匹配。设备可以与一个兼容 ID 列表相关联。应按适用性递减的顺序列出兼容的 ID。如果安装程序找不到与设备的硬件 ID 之一匹配的 INF 文件，它会使用兼容的 ID 来查找 INF 文件。兼容 ID 与硬件 ID 具有相同的格式；但是，兼容 ID 通常比硬件 ID 更通用。
> 
> 如果供应商提供的 INF 文件为驱动程序节点指定兼容 ID，则供应商应确保其 INF 文件可以支持与兼容 ID 匹配的所有硬件。由于与兼容 ID 的匹配不如与硬件 ID 的匹配强，因此 PnP 管理器会在处理 INF 文件之前提示用户进行确认。
> 
> 要获取设备的兼容 ID 列表，请调用 IoGetDeviceProperty，并将 DeviceProperty 参数设置为 DevicePropertyCompatibleID。此例程检索的兼容 ID 列表是 REG_MULTI_SZ 值。兼容 ID 列表中的最大字符数为 REGSTR_VAL_MAX_HCID_LEN，包括每个兼容 ID 之后的 NULL 终止符和最终的 NULL 终止符。兼容 ID 列表中的最大可能 ID 数为 MAX_HCID_COUNT。
> 
> **实例 ID**
> 
> 实例 ID 是设备标识字符串，用于将设备与机器上相同类型的其他设备区分开来。实例 ID 包含序列号信息（如果底层总线支持）或某种位置信息。字符串不能包含任何“\”字符；否则，字符串的通用格式是特定于总线的。
> 
> 实例 ID 的字符数（不包括 NULL 终止符）必须小于 MAX_LENGTH_LEN。此外，当实例ID与设备ID连接以创建设备实例ID时，设备ID和实例ID的长度进一步受限于设备实例ID的最大可能长度。
> 
> 设备的 DEVICE_CAPABILITIES 结构的 UniqueID 成员指示总线提供的实例 ID 在整个系统中是否唯一，如下所示：
> 
> 如果 UniqueID 为 FALSE，则总线提供的设备实例 ID 仅对设备的总线是唯一的。PnP 管理器修改总线提供的实例 ID，并将其与相应的设备 ID 结合，以创建系统中唯一的设备实例 ID。如果 UniqueID 为 TRUE，则由总线提供的设备 ID 和实例 ID 组成的设备实例 ID 唯一地标识系统中的一个设备。实例 ID 在系统引导期间保持不变。
> 
> 要获取设备的总线提供的实例 ID，请使用 IRP_MN_QUERY_ID 请求并将 Parameters.QueryId.IdType 成员设置为 BusQueryInstanceID。
> 
> **设备实例 ID**
> 
> 设备实例 ID 是系统提供的设备标识字符串，用于唯一标识系统中的设备。PnP 管理器为系统设备树中的每个设备节点分配一个设备实例 ID。
> 
> 此字符串的格式由连接到设备 ID 的实例 ID 组成，如下所示：
> 
> \ 设备实例 ID 的字符数（不包括 NULL 终止符）必须小于 MAX_LENGTH_LEN。此约束适用于所有字段的长度总和以及设备 ID 和实例特定 ID 字段之间的“\”字段分隔符。设备实例 ID 在系统引导期间保持不变。
> 
> 以下是连接到 PCI 设备的设备 ID 的实例 ID ("1&08") 的示例：
> 
> PCI\VEN_1000&DEV_0001&SUBSYS_00000000&REV_02\1&08

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-04T09:28:55.597

其中大部分是通过“Setup API”公开的。某些数据可能是特定于驱动程序的，在这种情况下，您必须询问驱动程序编写者。您列出的都是标准 Microsoft 属性。例如，“设备类”描述了它是什么类型的设备，例如。鼠标/键盘/存储/显卡/音频/...

# sql - 子查询问题 (SQL)

> ID：12723400
> 
> 赞同：0
> 
> 时间：2012-10-04T08:37:14.680
> 
> 标签：sql, subquery

我正面临 SQL 查询的挑战。基本上我想检索比它们各自的[传出任务]晚呈现[开始]的寄存器。

该表如下所示：

```
Main Project    Main Link    Name         Start            Outgoing tasks
A               1            A1           02.01.2012       A2   
A               1            A2           01.01.2012       A3 
```

...

我写的查询是这样的：

```
SELECT [Name], [Start], [Outgoing tasks] 
FROM [Sheet1$] 
WHERE [Main project] = 'A' 
AND [Main link] = '1' 
AND [Outgoing tasks] IS NOT NULL 
AND [Start] > (SELECT [Start] 
        FROM [Sheet1$] 
        WHERE [Main project] = 'A' 
        AND [Main link] = '1' 
        AND [Name] =  [Outgoing tasks]) 
```

它不会返回任何错误，但它根本不会带来预期的结果。

你们知道可能出了什么问题吗？非常感谢任何支持！！！

更多信息：

该表来自类似 MS Project 的应用程序。所以我们有一个里程碑，它的数据，继任者和前任者。我真正需要的是一个开始日期晚于其继任者的里程碑列表（从项目管理的角度来看这是一个错误）。因此，如果 A1.Start > A2.Start，那么我应该出现在结果中。如果您需要更多详细信息，请告诉我。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-04T09:02:25.107

尝试

```
 select t1.* from [$Sheet1] t1
      inner join [$Sheet1] t2
           on t1.[main project] = t2.[main project]
           and t1.[main link] = t2.[main link]
           and t1.[outgoing tasks] = t2.name
           and t1.start>t2.start 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-04T08:55:14.393

如果这是一个相关的子查询，您需要一种方法来在内部查询中引用外部语句的表。在 MySQL 中，你会这样做：

```
SELECT name, start, outgoing_tasks FROM sheet1 foo WHERE main_project = 'A' AND main_link = '1' AND outgoing_tasks IS NOT NULL AND start > (SELECT start FROM sheet1 bar WHERE main_project = 'A' AND main_link = '1' AND bar.name = foo.outgoing_tasks); 
```

请注意，我为外部查询的表指定了别名，`foo`内部查询的表为`bar`. `WHERE`然后我可以在嵌套（内部）查询的谓词中引用外部表：`... AND bar.name = foo.outgoing_tasks ...`

# facebook - facebook 如何立即初始化最近的新闻提要条目？

> ID：12723403
> 
> 赞同：0
> 
> 时间：2012-10-04T08:37:43.430
> 
> 标签：facebook, feed

我正在为我的网络项目开发一个新闻提要模块。新闻提要活动（发布、过滤等）与 Facebook 几乎相似。当用户向下滚动页面（无限滚动）时，我使用了分页模式逐页初始化新闻（例如：每次滚动 20 个帖子）。

我想知道当您的一位朋友分享帖子时，Facebook 如何初始化当前新闻。我猜它使用一个触发器来发送一个 ajax 请求来获取是否存在新帖子。使用计时器触发器（带有每 10 秒发送 ajax 请求的 javascript 超时功能）不是解决此问题的有效方法。

有人对我有任何其他触发建议吗？

提前致谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-09T18:13:36.473

如果您要监视主页的网络活动，您会看到`https://pct.channel.facebook.com/pull`带有一些独特参数的调用。在观看时，您会发现调用需要的时间长度不定，从 1 秒到 ~60 秒不等。

这被称为[长轮询](http://en.wikipedia.org/wiki/Push_technology#Long_polling)，服务器等待直到有新信息可用以发回响应。同时，HTTP 调用处于暂停状态，就好像端点正在加载一样。一旦服务器找到可用的信息，它就会发送带有数据的响应，并关闭连接。然后客户端在接收到数据后重新打开与另一个 HTTP 调用的连接。

# php - 在不刷新所有页面的情况下进行刷新

> ID：12723406
> 
> 赞同：0
> 
> 时间：2012-10-04T08:37:58.183
> 
> 标签：php, javascript

我制作了 2 个从我的数据库中填充的下拉列表。第一个下降是国家，第二个是城市。当用户在第二个下拉列表中自动选择一个国家时，会出现该国家的所有城市。问题是，当我选择另一个国家/地区时，所有页面都在刷新，我只想要 2 个下拉列表来进行刷新。我正在使用 Javascript 和 PHP。以下是代码：

```
@$cat=$_GET['cat']; 

$quer2=mysql_query("SELECT DISTINCT category,cat_id FROM category order by category"); 

if(isset($cat) and strlen($cat) > 0){
$quer=mysql_query("SELECT DISTINCT subcategory FROM subcategory where cat_id=$cat order by subcategory"); 
}else{$quer=mysql_query("SELECT DISTINCT subcategory FROM subcategory order by subcategory"); } 

echo "<select name='cat' onchange=\"reload(this.form)\"><option value=''>Select one</option>";
while($noticia2 = mysql_fetch_array($quer2)) { 
if($noticia2['cat_id']==@$cat){echo "<option selected value='$noticia2[category]'>$noticia2[category]</option>"."<BR>";}
else{echo  "<option value='$noticia2[cat_id]'>$noticia2[category]</option>";}
}
echo "</select>";
echo "&nbsp&nbsp";
echo "<select name='subcat'><option value=''></option>";
while($noticia = mysql_fetch_array($quer)) { 
echo  "<option value='$noticia[subcategory]'>$noticia[subcategory]</option>";
}
echo "</select>"; 
```

这是Javascript代码：

```
function reload(form)
{
var val=form.cat.options[form.cat.options.selectedIndex].value;
self.location='index.php?cat=' + val ;
} 
```

我希望当我更改国家/地区时，所有页面不会仅刷新这两个下拉列表。任何帮助都感激不尽。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-04T08:45:46.493

你可以用来`Ajax`实现这一点。

请检查此链接[填充选择列表](http://roshanbh.com.np/2008/01/populate-triple-drop-down-list-change-options-value-from-database-using-ajax-and-php.html)

如果 U 使用 jquery，请使用`.ajax()`. jquery ajax 选择列表填充的示例是[Jquery Ajax 选择列表填充](https://stackoverflow.com/questions/1185712/how-to-use-ajax-to-populate-state-list-depending-on-country-list)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-04T08:45:30.223

你需要使用ajax。一个非常基本的建议是：

```
//self.location = '...' - removed
ajax('index.php?cat=' + val).done(function (result) {
   //update select boxes
}); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-04T10:48:52.303

尝试这个

**索引.php**

```
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
 <script type="text/javascript" src="http://ajax.googleapis.com/ajax/libs/jquery/1.4.2/jquery.min.js"></script>
 <script type="text/javascript">
 $(document).ready(function()
 {
 $(".Select1").change(function()
 {
var id=$(this).val();
var dataString = 'your_param='+ your_param;
$.ajax
({
    type: "POST",
    url: "select_2.php",
    data: dataString,
     cache: false,
     success: function(html)
    {
   $(".Select2").html(html);
   } 
   });

    });
  });
    </script>

     <title>Untitled Document</title>
   </head>

   <body>
  <?php
  include("config.php");
  $sql="SELECT * FROM your_table";
  $result2 = mysql_query($sql);
     ?> 
  <select class="Select1">
  <option value=""></option>
     <?php  
  while($row2 = mysql_fetch_array($result2))
  {
    ?>
  <option value="<?php echo $row2['your_value']?>"><?php echo $row2['your_value']?>    </option>

     <?php  
  }             
  ?>
  </select><br />
  <select class="Select2"></select>
 </body>
</html> 
```

而在**select_2.php**

```
<?php
 include('config.php');
 if($_POST['your_param'])
  {
     $your_param=$_POST['your_param'];
    $sql = mysql_query("SELECT * FROM  yortable WHERE param = '".$your_param."'") or die(mysql_error());

 while($row=mysql_fetch_array($sql))
{
 $your_value=$row['your_param'];
 echo '<option></option>';
  echo '<option value="'.$your_value.'">'.$your_value.'</option>';

   }
    }

     ?> 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-04T11:05:26.523

是的，您将需要使用 AJAX 来更新页面的一部分。使用 AJAX 最简单的方法是通过 JQuery。[这是他们的 AJAX API](http://api.jquery.com/jQuery.ajax/)。

# python - python：如何用正则表达式分割这个字符串？

> ID：12723410
> 
> 赞同：1
> 
> 时间：2012-10-04T08:38:18.463
> 
> 标签：python, regex

这里很简单，但我对 Python 还很陌生。

我有一个这样的字符串：

```
this is page one of an article 
<!--pagebreak page two --> this is page two 
<!--pagebreak--> this is the third page 
<!--pagebreak page four --> last page
// newlines added for readability 
```

我需要使用这个正则表达式拆分字符串：`<!--pagebreak(*.?)-->`- 想法是有时`<!--pagebreak-->`评论有一个“标题”（我在我的模板中使用），有时他们没有。

我试过这个：

```
re.split("<!--pagebreak*.?-->", str) 
```

它仅返回分页符中带有“标题”的项目（并且也没有正确拆分它们）。我在这里做错了什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-04T08:41:03.887

更改`*.?`为`.*?`：

```
re.split("<!--pagebreak.*?-->", str) 
```

您当前的正则表达式接受任意数量的文字`k`，可选地后跟（任何字符）。

另外，我建议`r"..."`您对正则表达式使用原始字符串 ( )。在这种情况下没有必要，但这是一种让自己免于头疼的简单方法。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-04T08:41:35.020

您将 与 交换`.`了`*`。正确的正则表达式是：

```
<!--pagebreak.*?--> 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-10-04T08:52:22.030

绝对是换机的问题。和 *。“。” 匹配所有，星号表示您将获取尽可能多的字符（当然受非贪婪限定符“？”的限制）

```
import re

s = """this is page one of an article 
<!--pagebreak page two --> this is page two 
<!--pagebreak--> this is the third page 
<!--pagebreak page four --> last page"""

print re.split(r'<!--pagebreak.*?-->', s) 
```

输出：

['这是一篇文章的第一页\n', '这是第二页\n', '这是第三页\n', '最后一页']

# php - 试图从地图中保存坐标

> ID：12723412
> 
> 赞同：0
> 
> 时间：2012-10-04T08:38:30.097
> 
> 标签：php, jquery, mysql, maps

我通过 HTML5 检索坐标。但是当我尝试使用 AJAX 帖子保存坐标时，没有插入任何内容。savespot.php 确实有效，所以也许它与 ajax 帖子有问题？还是在检索坐标之前运行ajax post？

```
<!DOCTYPE html>
<html>
    <script src="http://code.jquery.com/jquery-1.8.2.min.js"></script>
    <body>
        <p id="demo">Click the button to get your position:</p>
        <button onclick="getLocation()">Get your location</button>
        <div id="mapholder"></div>
        <script src="http://maps.google.com/maps/api/js?sensor=false"></script>
        <script>
            var x=document.getElementById("demo");
            function getLocation()
            {
                if (navigator.geolocation)
                {
                    navigator.geolocation.getCurrentPosition(showPosition,showError);
                }
                else{x.innerHTML="Geolocation is not supported by this browser.";}
            }
            function showPosition(position)
            {
                lat=position.coords.latitude;
                lon=position.coords.longitude;
                latlon=new google.maps.LatLng(lat, lon)
                mapholder=document.getElementById('mapholder')
                mapholder.style.height='250px';
                mapholder.style.width='500px';
                var myOptions={
                    center:latlon,zoom:14,
                    mapTypeId:google.maps.MapTypeId.ROADMAP,
                    mapTypeControl:false,
                    navigationControlOptions:{style:google.maps.NavigationControlStyle.SMALL}
                };
                var map=new google.maps.Map(document.getElementById("mapholder"),myOptions);
                var marker=new google.maps.Marker({position:latlon,map:map,title:"You are here!"});
            }
            function showError(error)
            {
                switch(error.code)
                {
                    case error.PERMISSION_DENIED:
                        x.innerHTML="User denied the request for Geolocation."
                        break;
                    case error.POSITION_UNAVAILABLE:
                        x.innerHTML="Location information is unavailable."
                        break;
                    case error.TIMEOUT:
                        x.innerHTML="The request to get user location timed out."
                        break;
                    case error.UNKNOWN_ERROR:
                        x.innerHTML="An unknown error occurred."
                        break;
                }
            }
        </script>
        <script>
            function ajaxFunction()
            { 
                $.ajax({ 
                    url:'savespot.php', 
                    type:'POST', 
                    data:'lat='+lat+'&lon='+lng, 
                    success:function(d){ 
                        console.log(d); 
                    }, 
                    error(w,t,f){ 
                        console.log(w+' '+t+' '+f); 
                    } 
                }); 
            }
        </script>
    </body>
</html> 
```

保存点.php

```
<?php

    include_once 'includes/db.php';

    //  $x = "52.364659"; 
    //  $y = "13.191007"; 
    $nick = "GPSTEST";
    $adress = "Odefinierat";

    $x = @$_POST['lat'];
    $y = @$_POST['lng'];

    $sql = 'INSERT INTO location ' .
            '(name, address, lat, lng, date) ' .
            'VALUES ("' . $nick . '", "' . $adress . '", "' . $x . '", "' . $y . '", NOW())';

    $retval = mysql_query($sql, $connection);
    if (!$retval) {
        die('Could not enter data: ' . mysql_error());
    }
    echo "Entered data successfully\n";
?> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-04T08:44:18.227

您的 AJAX 设置中有错误。

```
$.ajax({ 
    url:'savespot.php', 
    type:'POST', 
    data:'lat='+lat+'&lon='+lng, 
    success:function(d){ 
        console.log(d); 
    }, 
    error(w,t,f){ 
        console.log(w+' '+t+' '+f); 
    } 
}); 
```

应该给`error:`前面的`error(w,t,f){}`。

```
 error: error(w,t,f){ 
        console.log(w+' '+t+' '+f); 
    } 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-04T08:44:39.787

我找不到您打电话的地点/方式`ajaxFunction`，并且不知道我不能确定，但​​我最好的猜测是您在检索到位置之前发出了 Ajax 请求。

`navigator.geolocation.getCurrentPosition`是异步的，它会等到用户接受你的页面想要检索他们的地理位置。在他们这样做之前，该函数将不返回任何内容。处理此问题的最佳方法是在回调中发出 ajax 请求`getCurrentPosition`，这样您就可以在拨打电话之前确定自己拥有该职位。

在您的情况下，这意味着您`ajaxFunction()`从内部调用`showPosition()`。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-04T08:45:32.767

尝试像这样声明你的ajax数据：

```
$.ajax({ 
  url:'savespot.php', 
  type:'POST', 
  data:{
    lat:lat,
    lon:lng
  }
}); 
```

* * *

## 回答 #4

> 赞同：-2
> 
> 时间：2012-12-05T21:31:01.873

我认为变量 lat 和 lon 应该在全局范围内声明，或者换句话说，您需要在 showPosition() 函数中声明它。

# extjs - 在 Ext.js 3.4 中隐藏/显示带有标签的 Ext.js 复合字段

> ID：12723423
> 
> 赞同：1
> 
> 时间：2012-10-04T08:39:11.003
> 
> 标签：extjs, extjs3

我正在尝试使用组合中的侦听器显示/隐藏 ext.js (xtype:"compositefield")。一切正常，除了复合字段的标签不会隐藏。如何选择整个复合字段 DOM 元素，以便可以在其上使用 .hide()/.show() ？

复合字段的代码：

```
xtype: 'compositefield',
                   labelStyle: 'width: 60px',
                   fieldLabel: 'Player 1',
                   id: "player_1_fields",
                   msgTarget: 'under',
                   items:[
                       {xtype: 'displayfield', value: 'Name',margins: '3 5 0 22'},
                       {xtype: 'textfield', name: 'props_name_1', width: 135},
                       {xtype: 'displayfield', value: 'Score',margins: '3 5 0 0'},
                       {xtype: 'numberfield', name: 'props_score_n1', width: 35}
                   ] 
```

监听器的代码：

```
listeners: {
                                    select: function(combo, record, index) {
                                     if ( combo.getValue() == "2" ) 
                                                {
                                                Ext.getCmp("player_1_fields").getEl().hide();

                                                }
                                            else
                                                {
                                                Ext.getCmp("player_1_fields").getEl().show();

                                                }
                                    }
                                  } 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-04T08:54:43.857

试试这个代码：

```
select: function(combo, record, index) {
    if ( combo.getValue() == "2" ) {
            Ext.getCmp("player_1_fields").getEl().up('.x-form-composite').hide();
    } else {
            Ext.getCmp("player_1_fields").getEl().up('.x-form-composite').show();
    }
} 
```

Up 应该找到具有特定类的父级（并且您希望它是整个表单项的 ExtJs 类）。

# android - 在android中重新填充ListView

> ID：12723433
> 
> 赞同：0
> 
> 时间：2012-10-04T08:39:57.977
> 
> 标签：android, listview, android-listview

如何在android中重新填充ListView

```
 listview = (ListView) findViewById(R.id.listView1);
    listview.setAdapter(new ArrayAdapter<String>(this,
            android.R.layout.simple_list_item_1, Names));

    final String[] TempArray = new String[Names.length];

    editText = (EditText) findViewById(R.id.editText1);
    editText.addTextChangedListener(new TextWatcher()
    {

        public void onTextChanged(CharSequence s, int start, int before,
                int count)
        {
            // TODO Auto-generated method 
        }

        public void beforeTextChanged(CharSequence s, int start, int count,
                int after)
        {
            // TODO Auto-generated method stub
        }

        public void afterTextChanged(Editable s)
        {
            // TODO Auto-generated method stub

        }
    }); 
```

那是我的示例代码。我想在 public void **onTextChanged(CharSequence s, int start, int int count)**函数上重新填充列表视图。在 onTextChanged 函数上，我想用新的字符串数组填充列表视图。我怎样才能做到这一点？？？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-04T09:01:59.917

您需要的只是将`notifyDataSetChanged();`方法放入您的`onTextChanged`方法中。

**喜欢 ：**

```
editText.addTextChangedListener(new TextWatcher()
{
    public void onTextChanged(CharSequence s, int start, int before, int count)
    {
        // TODO Auto-generated method 
        notifyDataSetChanged();
    }

    public void beforeTextChanged(CharSequence s, int start, int count, int after)
    {
        // TODO Auto-generated method stub
    }

    public void afterTextChanged(Editable s)
    {
        // TODO Auto-generated method stub
    }
}); 
```

希望这有助于..享受..

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-04T08:41:49.707

看来您正在用“名称”值填充适配器，您可以做的是 onTextChanged 从“名称”中清除旧数据并添加新数据并设置适配器。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-04T08:42:28.710

首先，您需要将适配器放入变量中：

```
ArrayAdapter mAdapter = new ArrayAdapter<String>(this, android.R.layout.simple_list_item_1, Names);
listview.setAdapter(mAdapter); 
```

然后，当您需要重新填写您的列表时（例如，当“名称”更改时）只需调用

```
mAdapter.notifyDataSetChanged(); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2016-04-27T12:12:52.087

您可以使用下面的代码重新创建列表适配器：

```
editText.addTextChangedListener(new TextWatcher()
{

    public void onTextChanged(CharSequence s, int start, int before,
            int count)
    {
        // TODO Auto-generated method 
        Names = new ArrayList<~>();
        Names.add('your object');
        listview.setAdapter(new ArrayAdapter<String>(this,
                             android.R.layout.simple_list_item_1, Names));
    }

    public void beforeTextChanged(CharSequence s, int start, int count,
            int after)
    {
        // TODO Auto-generated method stub
    }

    public void afterTextChanged(Editable s)
    {
        // TODO Auto-generated method stub

    }
}); 
```

如果您只想将新数据添加到您的“名称”arrayList，您可以使用以下代码：

```
 editText.addTextChangedListener(new TextWatcher()
{

    public void onTextChanged(CharSequence s, int start, int before,
            int count)
    {
        // TODO Auto-generated method 
        Names.add('your object');
        listview.getAdapter().notifyDataSetChanged();
    }

    public void beforeTextChanged(CharSequence s, int start, int count,
            int after)
    {
        // TODO Auto-generated method stub
    }

    public void afterTextChanged(Editable s)
    {
        // TODO Auto-generated method stub

    }
}); 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2016-04-27T11:52:55.797

您不能在任何 TextWatcher 方法调用中调用 notifyDataSetChanged()，这将引发[RecyclerView notifyDatasetChange() 非法状态异常](https://stackoverflow.com/questions/27070220/recycleview-notifydatasetchanged-illegalstateexception)

我在 RecyclerView 列表中实现自动添加新行的方法是实现 OnFocusChangeListener 接口，该接口将在 editText 获得用户关注后自动添加，并且还能够避免上述错误。

```
editText.setOnFocusChangeListener(new View.OnFocusChangeListener {
        @Override
        public void onFocusChange(View v, boolean hasFocus) {
            if (hasFocus)
                // ADD NEW ITEM INTO LIST
                notifyDataSetChanged();
        }
    }) 
```

# java - 需要帮助使用 java 组合在 vlc 中播放的多个视频

> ID：12723435
> 
> 赞同：-1
> 
> 时间：2012-10-04T08:40:02.603
> 
> 标签：java, video, vlc

*   需要使用java在vlc中合并视频的视频

    我不知道我将如何编写这个代码，希望我能得到一些帮助，因为我对 java 和一般代码真的没有经验。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-04T08:45:28.100

[VLC 有称为VLCJ](http://www.capricasoftware.co.uk/vlcj/index.php)的 Java 绑定。

在使用 VLCJ 的 Java 程序中播放视频和用视频做很多其他事情并不是很困难 - 例如，请参阅[本教程](http://www.capricasoftware.co.uk/vlcj/tutorial1.php)。

如果您真的不了解 Java 和一般编程，我建议您在从事大型和复杂的项目之前先学习这些知识。

# c# - 设置 NHibernate SaveOrUpdate 调用的 CommandTimeout

> ID：12723436
> 
> 赞同：1
> 
> 时间：2012-10-04T08:40:03.513
> 
> 标签：c#, nhibernate, timeout

我想为 NHibernate 中对 Session.SaveOrUpdate(myentity) 的特定调用设置低于默认值的 CommandTimeout。这可能吗？如果可以，该怎么做？

在我的代码中，我使用 UnitOfWork 模式，因此特定工作单元/会话的超时也可以正常工作。

这个问题的背景：我有一个网络系统。其中有一些我想保存的日志记录/调试信息，但是如果实际的数据库插入需要很长时间，我宁愿插入失败并快速返回（不到 1 秒）而不是花费很长时间。但是，对于大多数其他数据库操作，默认命令超时是可以的。现在插入几乎总是超级快。但是，如果数据库由于某种原因很慢（不是每天都发生的事情），网站的访问者会受到我希望避免的慢速日志记录的影响。由于信息并不重要，我希望一个简单的解决方案是设置数据库调用的超时。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-04T14:27:32.513

无法为更新配置单独的超时。

另一方面：

*   `Save`//方法不一定会导致DB调用`Update`。`Delete`调用发生在`Flush`（除了插入具有标识 id 的实体）
*   `insert`/`update`语句通常不会超时。如果他们这样做了，则说明您的设置有其他问题
*   您仍然可以配置全局`CommandTimeout`. 让它足够长以满足您的需求。

* * *

更新：在阅读了您的评论后，说您想做与我想的*相反*的事情（即设置极低的超时时间），很明显您遇到了架构问题。

如果您正在编写的信息与当前请求无关，而不是尝试“尽可能快地”保存它并且如果速度不够快就失败，您应该使用队列（选择任何一个）在请求，甚至退出进程/机器。

# winforms - 在 Windows 窗体中调整控件大小

> ID：12723438
> 
> 赞同：0
> 
> 时间：2012-10-04T08:40:15.673
> 
> 标签：winforms, resize

我怎么知道一个控件（在这种情况下是一个`DataGridView`包​​含在 Windows 窗体中的控件）的大小何时被用户调整？我希望我能知道它的大小何时从方法中改变，或者用户何时必须调整窗口窗体的大小。这可能吗？。我只发现了`DataGridView.SizeChanged`事件。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-04T08:57:26.463

解决方案是控制事件并在那里`SizeChanged`保存网格的位置和大小。

# c# - 将列表框选定项导出到数据表

> ID：12723442
> 
> 赞同：0
> 
> 时间：2012-10-04T08:40:30.177
> 
> 标签：c#

我在将选定的列表框项导出到数据表时遇到问题，我想将多个选定的植物导出到数据表中，你能帮忙吗？

```
 int numberofplants = 0;

        foreach (ListItem li in lbxPlants.Items)
        {
            if (li.Selected)
            {
                numberofplants++;
                DataTable dtplants = new DataTable();
                dtplants.Columns.Add("Plants");
                DataRow drplants = dtplants.NewRow();
                drplants[0] = li.Value;
                dtplants.Rows.Add(drplants);

            }
        } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-04T08:46:30.533

```
int numberofplants = 0;

DataTable dtplants = new DataTable();
dtplants.Columns.Add("Plants");

foreach (ListItem li in lbxPlants.Items)
{
    if (li.Selected)
    {
        numberofplants++;

        DataRow drplants = dtplants.NewRow();
        drplants[0] = li.Value;
        dtplants.Rows.Add(drplants);
    }
} 
```

# android - Android 模拟器 -- 运行基于 buildroid/virtualbox 的模拟器时，DDMS“模拟器控制”被禁用

> ID：12723443
> 
> 赞同：6
> 
> 时间：2012-10-04T08:40:31.277
> 
> 标签：android, eclipse, location, virtualbox, ddms

我正在运行一个带有 virtualbox / buildroid 的 android 模拟器，并连接 ADB 和 eclipse、DDMS、

一切正常，我可以从 eclipse 等加载应用程序，但是 DDMS 视角中的模拟器控件是灰色的，所以我无法将位置数据发送到设备。

是否无法将位置数据从 DDMS 发送到基于虚拟机的模拟器，或者这是一个配置问题？

还有另一种方法可以将模拟 GPS 数据发送到我的模拟器（我尝试使用“模拟位置”应用程序，但它一直要求启用位置源，即使我已经启用了 wifi/gps（我知道模拟器无法使用实际的 GPS 等，所以这可以伪造吗？）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2016-05-30T01:40:01.700

是的，有一种将 GPS 数据发送到模拟器的新方法.. 新模拟器有一个带有图标的侧栏.. 使用三个点号（汉堡图标）.. 现在你将打开一个窗口，你可以在其中发送 GPS 到你的设备

# jquery - IE8 给我使用 JQuery 设置最小宽度的不同尝试问题

> ID：12723449
> 
> 赞同：0
> 
> 时间：2012-10-04T08:40:54.543
> 
> 标签：jquery, internet-explorer, css

正在尝试的不同脚本：

```
$(document).ready(function(){$(".body").addClass("ie-min");});
$(document).ready(function(){$(".body").attr("class", "ie-min");});
$(document).ready(function(){$(".body").css("min-width", "350px");});
$(document).ready(function(){$(".body").css("min-width" : "350px");});
$(document).ready(function(){$(".body").css("minWidth", "350px");});
$(document).ready(function(){$(".body").css("minWidth" : "350px");}); 
```

CSS：

```
.body{min-width:1100px}
.ie-min{min-width:318px}
body.body{min-width:1100px}
body.ie-min{min-width:318px} 
```

的HTML：

```
<body class="body"> 
```

“body”类是关闭 javascript 的用户的默认最小宽度。我尝试通过条件注释和页面本身使用外部 .js 文件运行它。下面的例子：

```
<!--[if  IE 8]>
<link rel="stylesheet"type="text/css"href="/css/ie8.css"media="all"/>
<script type="text/javascript">
$(document).ready(function(){$(".body").addClass("ie-min");});
</script>
<script type="text/javascript"src="/scripts/respond.min.js"></script>
<![endif]--> 
```

我正在尝试不同的组合，但没有任何效果。我在这里为 IE8 遗漏了什么吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-04T10:24:09.503

问题是我在页面底部加载了 JQuery 库，因此如果尚未加载该库，则脚本/脚本无法运行。呸！希望这可以帮助遇到相同问题的任何人。

# android - 使用DOM解析器解析xml

> ID：12723450
> 
> 赞同：0
> 
> 时间：2012-10-04T08:40:56.900
> 
> 标签：android, android-layout, android-intent, android-widget

我需要在 android 中使用 DOM 解析器来解析文档。我无法打印所有节点值 我的示例 XML 是：`

```
<xml_api_reply version="1">
<news module_id="0" tab_id="0" mobile_row="0" mobile_zipped="1" row="0" section="0">
<title data="Top Stories"/>
<section_type data="0"/>
<news_entry>
<title data="BSE Sensex breaches 19000, Nifty above 5800"/>
<url data="http://in.reuters.com/article/2012/10/04/sensex-above-19000-on-reform-hopes-         idINDEE89301O20121004"/>
<snippet data="| MUMBAI (Reuters) - The Nifty rose above 5800 points on Thursday,     joining the Sensex in breaching key psychological levels, after continued government reform  measures sparked hopes for continued action. Banks led gainers, with ICICI Bank (ICBK."/>
<source data="Reuters India"/>
<date data="3 hours ago"/>
<num_related data="145"/>
<cluster_url data="http://google.co.in/news/story?ncl=da6VmeBXmuquikM&hl=en"/>
</news_entry>
<news_entry>
<title data="Uncertainty over Kingfisher resuming operations tomorrow"/>
<url data="http://www.hindustantimes.com/India-news/NewDelhi/Uncertainty-over- Kingfisher-resuming-operations-tomorrow/Article1-939628.aspx"/>
<snippet data="Hopes of ailing Kingfisher Airlines resuming operations on Friday has faded with last ditch efforts by the management to persuade striking engineers and pilots to return to work failing to end the deadlock over the issue of non-payment of salaries for ..."/>
 <source data="Hindustan Times"/>
 <date data="1 hour ago"/>
 <num_related data="993"/>
 <cluster_url data="http://google.co.in/news/story?ncl=dzf460GzYKTOyxM&hl=en"/>
 </news_entry>
 </news>
 </xml_api_reply>` 
```

我正在使用以下代码来解析 xml

xmlactivity.java

```
public class AndroidXMLParsingActivity extends ListActivity {

// All static variables
static final String URL = "http://www.google.co.in/ig/api?news&hl=en";
// XML node keys
static final String KEY_ITEM = "news"; // parent node
//static final String KEY_ID = "news_entry";
static final String KEY_NAME = "title ";
static final String KEY_COST = "url ";
static final String KEY_DESC = "snippet";

@Override
public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.main);

    ArrayList<HashMap<String, String>> menuItems = new    ArrayList<HashMap<String, String>>();

    XMLParser parser = new XMLParser();
    String xml = parser.getXmlFromUrl(URL); // getting XML
    Document doc = parser.getDomElement(xml); // getting DOM element

    NodeList nl = doc.getElementsByTagName(KEY_ITEM);
    // looping through all item nodes <item>
    for (int i = 0; i < nl.getLength(); i++) {
        // creating new HashMap
        HashMap<String, String> map = new HashMap<String, String>();
        Element e = (Element) nl.item(i);

        // adding each child node to HashMap key => value
        //map.put(KEY_ID, parser.getValue(e, KEY_ID));
        map.put(KEY_NAME, parser.getValue(e, KEY_NAME));
        //map.put(KEY_COST,   parser.getValue(e, KEY_COST));
        //map.put(KEY_DESC, parser.getValue(e, KEY_DESC));

        // adding HashList to ArrayList
        menuItems.add(map);
    }

    // Adding menuItems to ListView
/*  ListAdapter adapter = new SimpleAdapter(this, menuItems,
            R.layout.list_item,
            new String[] { KEY_NAME, KEY_DESC, KEY_COST }, new int[] {
                    R.id.name, R.id.desciption, R.id.cost });*/

    ListAdapter adapter = new SimpleAdapter(this, menuItems,
            R.layout.list_item,
            new String[] { KEY_NAME }, new int[] {
                    R.id.name});
    setListAdapter(adapter);

    // selecting single ListView item
    ListView lv = getListView();

    lv.setOnItemClickListener(new OnItemClickListener() {

        public void onItemClick(AdapterView<?> parent, View view,
                int position, long id) {
            // getting values from selected ListItem
            //String name = ((TextView)       view.findViewById(R.id.name)).getText().toString();
            //String cost = ((TextView)   view.findViewById(R.id.cost)).getText().toString();
            String description = ((TextView) view.findViewById(R.id.desciption)).getText().toString();

            // Starting new intent
            Intent in = new Intent(getApplicationContext(),    SingleMenuItemActivity.class);
            //in.putExtra(KEY_NAME, name);
            //in.putExtra(KEY_COST, cost);
            in.putExtra(KEY_DESC, description);
            startActivity(in);

        }
    }); 
```

和 xmlParser.java

```
 public class XMLParser {

// constructor
public XMLParser() {

}

/**
 * Getting XML from URL making HTTP request
 * @param url string
 * */
public String getXmlFromUrl(String url) {
    String xml = null;

    try {
        // defaultHttpClient
        DefaultHttpClient httpClient = new DefaultHttpClient();
        HttpPost httpPost = new HttpPost(url);

        HttpResponse httpResponse = httpClient.execute(httpPost);
        HttpEntity httpEntity = httpResponse.getEntity();
        xml = EntityUtils.toString(httpEntity);

    } catch (UnsupportedEncodingException e) {
        e.printStackTrace();
    } catch (ClientProtocolException e) {
        e.printStackTrace();
    } catch (IOException e) {
        e.printStackTrace();
    }
    // return XML
    return xml;
}

/**
 * Getting XML DOM element
 * @param XML string
 * */
public Document getDomElement(String xml){
    Document doc = null;
    DocumentBuilderFactory dbf = DocumentBuilderFactory.newInstance();
    try {

        DocumentBuilder db = dbf.newDocumentBuilder();

        InputSource is = new InputSource();
            is.setCharacterStream(new StringReader(xml));
            doc = db.parse(is); 

        } catch (ParserConfigurationException e) {
            Log.e("Error: ", e.getMessage());
            return null;
        } catch (SAXException e) {
            Log.e("Error: ", e.getMessage());
            return null;
        } catch (IOException e) {
            Log.e("Error: ", e.getMessage());
            return null;
        }

        return doc;
}

/** Getting node value
  * @param elem element
  */
 public final String getElementValue( Node elem ) {
     Node child;
     if( elem != null){
         if (elem.hasChildNodes()){
             for( child = elem.getFirstChild(); child != null; child =   child.getNextSibling() ){
                 if( child.getNodeType() == Node.TEXT_NODE  ){
                     return child.getNodeValue();
                 }
             }
         }
     }
     return "";
 }

 /**
  * Getting node value
  * @param Element node
  * @param key string
  * */
 public String getValue(Element item, String str) {     
        NodeList n = item.getElementsByTagName(str);        
        return this.getElementValue(n.item(0));
    } 
```

}

请帮我 。有什么问题和建议先谢谢！！！！！！！！！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-04T10:01:14.007

```
//Try this code..

       public String getXmlFromUrl(String url) {
                String xml = null;

                try {
                    // defaultHttpClient

                    URLConnection conn = null; 
                    InputStream inputStream = null; 
                    URL urls = new URL(url); 
                    conn = urls.openConnection(); 
                    conn.setConnectTimeout(10000); 
                    HttpURLConnection httpConn = (HttpURLConnection) conn; 
                    httpConn.setRequestMethod("GET"); 
                    httpConn.setConnectTimeout(10000); 
                    httpConn.connect(); 
                    if (httpConn.getResponseCode() == HttpURLConnection.HTTP_OK) { 
                        inputStream = httpConn.getInputStream(); 
                    } 
                    BufferedReader in = new BufferedReader(new InputStreamReader(inputStream)); 
                    StringWriter writer=new StringWriter(); 
                    String line=""; 
                    while ( null!=(line=in.readLine())){ 
                        writer.write(line);  
                    } 
                    xml =writer.toString();  

        } catch (UnsupportedEncodingException e) {
                    e.printStackTrace();
                } catch (ClientProtocolException e) {
                    e.printStackTrace();
                } catch (IOException e) {
                    e.printStackTrace();
                }

                return xml;
        }

        public Document getDomElement(String xml){
                Document doc = null;
                DocumentBuilderFactory dbf = DocumentBuilderFactory.newInstance();
                try {

                    DocumentBuilder db = dbf.newDocumentBuilder();
                    doc = db.parse(new InputSource(new StringReader(xml))); 
                    doc.normalize();
                    //InputSource is = new InputSource();
                   //     is.setCharacterStream(new StringReader(xml));
                       // doc = db.parse(is); 

                    } catch (ParserConfigurationException e) {
                        Log.e("Error: ", e.getMessage());
                        return null;
                    } catch (SAXException e) {
                        Log.e("Error: ", e.getMessage());
                        return null;
                    } catch (IOException e) {
                        Log.e("Error: ", e.getMessage());
                        return null;
                    }

                    return doc;
            }

     public final String getElementValue(Node elem) { 
                Node child; 
                if (elem != null) { 
                    if (elem.hasChildNodes()) { 
                        for (child = elem.getFirstChild(); child != null; child = child 
                                .getNextSibling()) { 
                            if (child.getNodeType() == Node.TEXT_NODE || child.getNodeType() == Node.CDATA_SECTION_NODE) { 
                                return child.getTextContent(); 
                            } 
                        } 
                    } 
                } 
                return ""; 
            } 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-04T10:01:58.187

```
 // All static variables
    static final String URL = "http://www.google.co.in/ig/api?news&hl=en";
    // XML node keys
    static final String KEY_ITEM = "news"; // parent node
    static final String KEY_ID = "news_entry";
    static final String KEY_NAME = "title";
    static final String KEY_COST = "url";
    static final String KEY_DESC = "snippet";

    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.main);

        ArrayList<HashMap<String, String>> menuItems = new    ArrayList<HashMap<String, String>>();

        XMLParser parser = new XMLParser();
        String xml = parser.getXmlFromUrl(URL); // getting XML
        Document doc = parser.getDomElement(xml); // getting DOM element

        NodeList nl = doc.getElementsByTagName(KEY_ITEM);

        for (int i = 0; i < nl.getLength(); i++) {

           HashMap<String, String> map = new HashMap<String, String>();
            Element e = (Element) nl.item(i);
             NamedNodeMap attributes = e.getAttributes();
            System.out.println("attrlength"+attributes.getLength());
             for (int a = 0; a < attributes.getLength(); a++) 
             {
                     Node theAttribute = attributes.item(a);
                     System.out.println(theAttribute.getNodeName() + "=" + theAttribute.getNodeValue());
             }

             NodeList nl1=e.getElementsByTagName(KEY_ID);
             System.out.println("keyId"+nl1.getLength());
             for(int j=0;j<nl1.getLength();j++)
             {
                 Element e1 = (Element) nl1.item(j);

                 NodeList n = e1.getElementsByTagName(KEY_NAME);

                  for (int k = 0; k < n.getLength(); k++) {

                      Element e2 = (Element) n.item(k);
                //  System.out.println("node Title value"+e2.getNodeName());
                     NamedNodeMap attributes2 = e2.getAttributes();
                    // System.out.println("attrlength"+attributes2.getLength());
                     for (int a = 0; a < attributes2.getLength(); a++) 
                     {
                             Node theAttribute = attributes2.item(a);
                             System.out.println(theAttribute.getNodeName() + "=" + theAttribute.getNodeValue());

                     }
                  }

                  NodeList n1 = e1.getElementsByTagName(KEY_COST);
                // System.out.println("title "+n.getLength());
                  for (int k = 0; k < n1.getLength(); k++) {

                      Element e2 = (Element) n1.item(k);
                //    System.out.println("node Url value");
                     NamedNodeMap attributes2 = e2.getAttributes();
                  //   System.out.println("attrlength"+attributes2.getLength());
                     for (int a = 0; a < attributes2.getLength(); a++) 
                     {
                             Node theAttribute = attributes2.item(a);
                             System.out.println(theAttribute.getNodeName() + "=" + theAttribute.getNodeValue());

                     }}

                     NodeList n2 = e1.getElementsByTagName(KEY_DESC);
                    // System.out.println("title "+n.getLength());
                      for (int k = 0; k < n2.getLength(); k++) {

                          Element e2 = (Element) n2.item(k);
                    //    System.out.println("node snippet value"+e2.getNodeName());
                         NamedNodeMap attributes2 = e2.getAttributes();
                      //   System.out.println("attrlength"+attributes2.getLength());
                         for (int a = 0; a < attributes2.getLength(); a++) 
                         {
                                 Node theAttribute = attributes2.item(a);
                                 System.out.println(theAttribute.getNodeName() + "=" + theAttribute.getNodeValue());

                         }
                      }  

             }

            menuItems.add(map);
        }

    } 
```

# java - 三叶草：它是如何工作的？

> ID：12723451
> 
> 赞同：6
> 
> 时间：2012-10-04T08:41:01.213
> 
> 标签：java, unit-testing, clover

我目前正在评估三叶草，想知道如何最好地使用它。首先，我想了解它在概念上是如何工作的。

1）仪表是什么意思？测试调用是否附加到实现的语句中？

2）这是怎么做的？测试实际上是用一些花哨的执行上下文（例如类似于 JRebel）执行的吗？还是更像静态分析？

3）在“三叶草运行”之后，一些数据库被保存到磁盘，并基于此生成报告，对吗？DB-Format 可以访问吗？我的意思是我可以对它进行自己的分析，例如使用我自己的报告工具吗？数据库究竟包含什么信息？我可以在那里看到测试和实现之间的映射吗？

4）是否有其他工具可以找到测试和实现之间的映射？不仅是数字，而且哪个测试实际上涵盖了一行代码......

谢谢，巴斯特尔。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-11-05T21:35:37.923

> 这是怎么做到的？测试实际上是用一些花哨的执行上下文（例如类似于 JRebel）执行的吗？还是更像静态分析？

在 Clover 的代码检测期间，它会检测哪些方法是测试方法（默认情况下它识别 JUnit3/4 和 TestNG）。此类方法获得额外的检测指令。简而言之，输入一个测试方法通常会实例化一个专用的覆盖率记录器，它专门为这个测试测量覆盖率。有关 Clover 中可用的每个测试记录策略的更多信息：

*   [https://confluence.atlassian.com/display/CLOVER/Clover+Performance+Results](https://confluence.atlassian.com/display/CLOVER/Clover+Performance+Results)
*   [https://confluence.atlassian.com/display/CLOVER/About+Distributed+Per-Test+Coverage](https://confluence.atlassian.com/display/CLOVER/About+Distributed+Per-Test+Coverage)

> 在“三叶草运行”之后，一些数据库被保存到磁盘，并基于此生成报告，对吗？

Clover 数据库 (clover.db) 包含有关代码结构（包、文件、类、方法、语句、分支）的信息，它还包含有关测试方法的信息。还有单独的覆盖记录文件（在运行时生成）包含有关给定代码元素的“命中”次数的信息。Clover 支持全局覆盖（即整个运行）以及每个测试的覆盖（即单个测试的覆盖）。

更多信息在这里：

*   [https://confluence.atlassian.com/display/CLOVER/Managing+the+Coverage+Database](https://confluence.atlassian.com/display/CLOVER/Managing+the+Coverage+Database)

> DB-Format 可以访问吗？

API 仍在开发中（[https://jira.atlassian.com/browse/CLOV-1375](https://jira.atlassian.com/browse/CLOV-1375)），但有可能获取基本信息。看：

*   [https://confluence.atlassian.com/display/CLOVER/Database+Structure](https://confluence.atlassian.com/display/CLOVER/Database+Structure)

有关数据库模型和代码示例的更多详细信息。

但问题是：你真的需要手动读取这个数据库吗？你写道：

> 我可以在那里看到测试和实现之间的映射吗？

Clover 已经提供了这样的映射 - 例如，在 HTML 报告中，如果您单击源代码行，它将弹出一个命中该行的测试方法列表。

PS：我是 Atlassian 的 Clover 开发人员，如果您有任何问题，请随时与我联系。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-04T08:54:53.167

> 仪表是什么意思？

附加代码与您的代码交织在一起。

> 测试调用是否附加到实现的语句中？

我不确定你的意思，但它可能是指令或方法调用。简单的方法将在运行时由 JIT 内联。

> 这是怎么做到的？

有很多方法可以做到这一点，但通常使用 Instrumentation 类来捕获加载类的时间，并使用 Objectweb 的 ASM 之类的库来操作代码。

> 测试实际上是在一些花哨的执行上下文中执行的吗

上下文计算哪些行已被执行。

> 还是更像静态分析？

不，它是基于所谓的。

> 在“三叶草运行”之后，一些数据库被保存到磁盘，并基于此生成报告，对吗？DB-Format 可以访问吗？

你最好向 clover 的生产者询问他们文件的内容。

> 是否有其他工具可以找到测试和实现之间的映射？不仅是数字，而且哪个测试实际上涵盖了一行代码......

有许多代码覆盖工具可用，包括 EMMA、JaCoCo、Cobertura，IDEA 有一个内置工具。

# linq - 基于 LINQ 中的列表过滤枚举

> ID：12723455
> 
> 赞同：0
> 
> 时间：2012-10-04T08:41:18.943
> 
> 标签：linq, enums

我有一个枚举

```
public enum ProcessStatus: byte
{
    NotStarted = 0,
    PreCheckStarted= 1,
    PreCheckCompleted= 2,
    Processing= 3,
    Failed= 4,
    Completed= 5,
    Closed= 6
} 
```

在表中，我们有类似 0,3,5,6 的条目

我们需要基于某些标准的枚举列表，标准是包含 0,1,2 的列表

我能够将所有枚举作为 List Like

```
 Enum.GetValues(typeof(ProcessStatus)).OfType<ProcessStatus>() 
```

并且有

```
List<byte> processListIDs 
```

其中包含 ID

我想要

```
 IEnumerable<ProcessStatus> filtered based on ids in processListIDs using LINQ. 
```

提前致谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-04T08:57:15.107

您可以使用`Intersect`更好的性能：

```
 var enumList = Enum.GetValues(typeof (ProcessStatus))
                     .OfType<ProcessStatus>().Cast<byte>();

  var result = enumList.Intersect(processListIDs)
                       .Cast<ProcessStatus>(); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-04T08:49:02.623

```
var res =
    processStatusCollection.Where(item => processListIDs.Contains((int)item)); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-04T09:04:04.307

你可以使用`Enum.TryParse<TEnum>`：

```
List<byte> processListIDs = new List<byte>() { 0, 3, 5, 6 };
ProcessStatus ps = ProcessStatus.NotStarted;
IEnumerable<ProcessStatus> status = processListIDs
    .Where(p => Enum.TryParse<ProcessStatus>(p.ToString(), out ps))
    .Select(p => ps); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-04T09:07:53.660

试试这个，

```
var p = new List<byte>() { 1, 2, 3, 4, 6 };
IEnumerable<ProcessStatus> result = p.Select(o => (ProcessStatus)Enum.Parse(typeof(ProcessStatus), o.ToString()));

/// do something with result 
```

# javascript - 访问 HTML 标签

> ID：12723458
> 
> 赞同：0
> 
> 时间：2012-10-04T08:41:26.680
> 
> 标签：javascript, jquery

如何像集合的语法（来自 JS）一样依次访问每个 HTML 标签？是否可以？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-04T08:43:43.763

`$("*")`将为您提供 DOM 中所有标签的 jQuery 集合。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-04T08:44:12.023

使用`$("*")` [http://api.jquery.com/all-selector/](http://api.jquery.com/all-selector/)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-04T08:45:39.160

在纯 Javascript 中使用 document.getElementsByTagName('*')

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-04T08:50:53.130

```
$('*') 
```

那么如果你想选择一个特定的标签，`$('*')[0]`.

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-10-04T08:52:41.677

如果你想用纯 JavaScript 进行迭代，

```
var tags = $("*");
for (var i = 0; i < tags.length; i++) {
    // do what you want with tags[i]
    }

} 
```

# c# - BackgroundWorker 内的多个 BeginGetResponse

> ID：12723475
> 
> 赞同：1
> 
> 时间：2012-10-04T08:42:20.137
> 
> 标签：c#, .net, asynchronous, backgroundworker

`BackgoundWorker`我有用于处理昂贵操作的UI 代码。内部`DoWork`是通过 向远程 Web 服务器发送多个 Web 请求的方法`BeginGetResponse`。

UI部分是：

```
 private void start_Click(object sender, RoutedEventArgs e)
    {
        BackgroundWorker bw = new BackgroundWorker();
        bw.WorkerReportsProgress = true;
        if (bw.IsBusy != true)
        {
            bw.DoWork += new DoWorkEventHandler(Processing.FormWebRequests);
            bw.RunWorkerCompleted += new RunWorkerCompletedEventHandler(Processing.FinishBw);
            bw.RunWorkerAsync();
        }
    } 
```

`DoWork`执行以下：

```
public static void  FormWebRequests(object sender, DoWorkEventArgs e)
    {
        foreach (webSites websiteitem in websites)
        {
            //Creation of webRequest object

            webRequest.BeginGetResponse(new AsyncCallback(FinishWebRequest), webRequest);

        }
    } 
```

最后，回调方法：

```
private static void FinishWebRequest(IAsyncResult result)
{
    using (HttpWebResponse response = wr.EndGetResponse(result) as HttpWebResponse)
        {
           //Parsing httpResponse
        }
} 
```

显然，在最后一次发送后立即`BackgroundWorker`触发。问题是我想在 last 完成后开火。`RunWorkerCompleted``BeginGetResponse``BackgroundWorker``RunWorkerCompleted``EndGetResponse`

这可能吗？或者我应该使用不同的异步模式？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-05-24T04:08:36.740

`BeginGetResponse`已经是异步的。此方法立即返回。当响应完成时， `FinishWebRequest`将被解雇。所以，你不需要使用`BackgroundWorker`.

这是事件驱动的。

# javascript - 时刻js从字符串中提取年份

> ID：12723482
> 
> 赞同：23
> 
> 时间：2012-10-04T08:42:32.983
> 
> 标签：javascript, date, momentjs

我是 moment.js 的新手，我无法真正理解文档。我想以字符串格式操作一些日期。

我的日期是来自 json feed 的字符串，看起来像：

```
var year = item.date
// it returns a string like "25/04/2012" 
```

如何使用 moment.js 从中提取年份？

* * *

## 回答 #1

> 赞同：64
> 
> 时间：2012-10-04T08:46:36.353

您可以使用

```
moment("25/04/2012","DD/MM/YYYY").format("YYYY")
or    
moment("25/04/2012","DD/MM/YYYY").year() 
```

在你的例子中：

```
moment(item.date,"DD/MM/YYYY").year() 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-04T08:49:23.590

或者您可以将字符串转换为日期，然后提取年份：

```
var date = new Date(dateString);
if (!isNaN(date)) {
 return d.getFullYear();
} 
```

# url - 将 URL 参数传递给 TFS 报告 (2010)

> ID：12723486
> 
> 赞同：1
> 
> 时间：2012-10-04T08:42:50.803
> 
> 标签：url, parameters, tfs, report, analysis

我使用 Report Builder 2.0 与 TFS 2010 的分析服务构建了一个非常简单的报告。该报告显示了针对特定团队项目记录的活动错误的数量，按优先级排序。

我有几个团队项目，我不想为每个项目重复相同的报告。相反，我想将团队项目作为 URL 中的参数传入。网络搜索显示了 John Socha-Leialoha 关于如何执行此操作（查找 MDX 参数并构建查询）的良好指导。

我在报告中设置了默认值以指向特定的团队项目，并且报告显示了预期的信息，当我向 URL 添加参数时，报告无法运行，并显示以下消息：`'Value cannot be null. Parameter name: main'`

以下 URL 使用默认团队项目正确显示报告：

```
/sites/tfsserver/_layouts/TfsRedirect.aspx?tf:Type=Report&tf:ReportName=Bug+Information/ActiveBugsByPriorityBarChart 
```

我也试过附加参数，如下：

```
/sites/tfsserver/_layouts/TfsRedirect.aspx?tf:Type=Report&tf:ReportName=Bug+Information/ActiveBugsByPriorityBarChart&tf:Parameters=TeamProjectTeamProjectHierarchy=[Team Project].[Team Project Hierarchy].&[{E207FAFF-CA70-41A2-8A62-B881C9C9F8F1}] 
```

这也会生成消息：`'Value cannot be null. Parameter name: main'`

这使我意识到我需要转义`&`符号，如下所示：

```
/sites/tfsserver/_layouts/TfsRedirect.aspx?tf:Type=Report&tf:ReportName=Bug+Information/ActiveBugsByPriorityBarChart&tf:Parameters=TeamProjectTeamProjectHierarchy=[Team Project].[Team Project Hierarchy].&26[{E207FAFF-CA70-41A2-8A62-B881C9C9F8F1}] 
```

但是，报告仍然无法运行，并显示相同的错误消息。

由于在 Socha 的示例中没有引用它，所以我也尝试在省略`&tf:`参数标签的情况下运行报表，如下所示：

```
/sites/tfsserver/_layouts/TfsRedirect.aspx?tf:Type=Report&tf:ReportName=Bug+Information/ActiveBugsByPriorityBarChart&TeamProjectTeamProjectHierarchy=[Team Project].[Team Project Hierarchy].&26[{E207FAFF-CA70-41A2-8A62-B881C9C9F8F1}] 
```

这似乎也不起作用。在这一点上，我很高兴能得到任何建议/指导。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-04T17:04:05.367

也许这篇博文对你有帮助：[http ://ewaldhofman.nl/post/2009/06/02/Add-SSRS-report-as-dashboard-to-sharepoint.aspx](http://ewaldhofman.nl/post/2009/06/02/Add-SSRS-report-as-dashboard-to-sharepoint.aspx)

# c# - 远程桌面连接中的用户 IP

> ID：12723487
> 
> 赞同：2
> 
> 时间：2012-10-04T08:42:51.970
> 
> 标签：c#, asp.net, ip

我正在构建一个 ASP.NET 应用程序

如果我在远程连接中运行网站，我从中获得的 Ip 是什么`System.Web.HttpContext.Current.Request.UserHostAddress`？是我本地网络的ip还是远程计算机连接的网络的ip？

我需要检测用户实际使用的网络 IP，而不是远程计算机的 IP。

有任何想法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-04T08:44:15.853

> 是我本地网络的ip还是远程计算机连接的网络的ip？

它将是本地IP。

> 我需要检测用户实际使用的网络 IP，而不是远程计算的 IP

忘记这个要求。此信息不是 HTTP 协议规范的一部分，并且永远不会发送到服务器。您将需要在您的站点上提供一个输入字段，您可以在其中要求用户输入此信息，或者在服务器上运行一些桌面应用程序，用于检测远程连接用户的 IP，然后启动默认 Web例如，通过导航到您的 Web 应用程序并将其作为查询字符串参数传递给浏览器。

您可能会考虑的另一种可能性是使用某种类型的 ActiveX 控件来检索此信息。但我们都知道 ActiveX 带来的限制。

# c++ - 将 C++ 代码移植到 Python

> ID：12723491
> 
> 赞同：1
> 
> 时间：2012-10-04T08:43:20.307
> 
> 标签：c++, python, swig

我正在使用 swig 来包装这个 C++ 项目，并且在将所有头文件导入到我的 python 代码中之后，我现在正在努力在 python 中重新创建主类，但是我在查找相应的数据时遇到了麻烦结构和数据类型。以下是main.cpp下的main方法

```
int main( int argc, char *argv[] )
{
string exe_name = argv[ 0 ];

string usage = "Usage: " + exe_name + " unigene.fasta [options]\n\
Options:\n\
-g <GC content> \tminimum GC content in percentage (Default 45).\n\
-G <GC content> \tmaximum GC content in percentage (Default 55).\n\
-m <temperature> \tlowest melting temperature in degrees of celsius (Default 0).\n\
-M <temperature> \thighest melting temperature in degrees of celsius (Default 100).\n\
-r <repeat.fasta> \tfasta file containing repeat DNA sequences.\n\
-t <top number> \tnumber of top oligos selected for each unigene (Default 1).\n\n";

string unigene_file;
// options only, each must have an associated value
int min_gc = 45;
int max_gc = 55;
int min_tm = 0;
int max_tm = 100; 
int top_num = 1;
string repeat_file;
vector< string > m_argument;
for ( int i = 0; i < argc; i ++ ) {
    string new_arg = argv[ i ];
    m_argument.push_back( new_arg );
}

parse_argument( m_argument, usage, unigene_file, 
                min_gc, max_gc, min_tm, max_tm, top_num, repeat_file );

// initialize filtration parameters
float norm_min_gc = (float)min_gc / 100.0;
float norm_max_gc = (float)max_gc / 100.0;
string splice_file; // empty splice file
filt_param m_filtparam( norm_min_gc, norm_max_gc, min_tm, max_tm, 
                        repeat_file, splice_file );

// screen unigenes for unique oligos
seqs m_unigene;
m_unigene.init( unigene_file );

// map from unigene names to oligo sequences
map< string, vector< string > > uniq_oligo;
get_unique_oligo( m_unigene, m_filtparam, top_num, uniq_oligo );

// output oligos
if ( uniq_oligo.empty() ) {
  cout << "No valid oligo has been found. " << endl <<
    "It could be due to one of the following reasons: " << endl <<
    "1\. input sequences are not unique, or " << endl << 
    "2\. they are repetitive DNAs, or " << endl << 
    "3\. GC% range is too restricted, etc. " << endl;
}
map< string, vector< string > > :: const_iterator m_itr;
for ( m_itr = uniq_oligo.begin(); m_itr != uniq_oligo.end(); m_itr ++ ) {
    for ( int o_idx = 0; o_idx < (int)m_itr->second.size(); o_idx ++ ) {
        cout << ">unique-oligo-" << o_idx+1 << "-of-unigene-" << 
                m_itr->first << endl;
        cout << m_itr->second[ o_idx ] << endl;
    }
}

//system("PAUSE");
return 1;
} 
```

例如，当我尝试如上所述将空字符串（repeat_file）传递给 filtparam() 时，在 python 中，我得到了错误

> 在方法“new_filt_param”中，类型为“string const &”的参数 5

如何在 python 中声明一个'string const &'类型？

python中还有像'map'这样的结构吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-04T08:52:36.817

您正在寻找的`dict`是`map`. 更多信息可以在[文档](http://docs.python.org/library/stdtypes.html#dict)中找到。

不同的问题：你有什么理由`main()`在 Python 中重新创建而不是简单地用 SWIG 包装那个？虽然 SWIG 能够以有限的方式处理诸如此类`std::string`的事情，但我会尝试使用仅使用指针/数组的更简单的接口，而不是尝试传递任何 C++ 对象或构造。

# c++ - 如果 c++ 中的构造函数抛出异常，如何清理初始化的资源

> ID：12723492
> 
> 赞同：7
> 
> 时间：2012-10-04T08:43:23.593
> 
> 标签：c++, memory-management, constructor

前一天，我在一次采访中遇到了这个问题。所以请指导我。

如果 c++ 中的构造函数抛出异常，如何清理初始化的资源？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-10-04T08:45:59.617

诀窍是使用**RAII**（资源获取即初始化）来管理资源。

如果您有指针成员，则使用智能指针而不是原始指针，一旦构造函数抛出异常，它将自动执行清理工作。

**好读：**
[Herb Sutter 的优秀 GotW 文章“建筑故障”](http://www.gotw.ca/gotw/066.htm)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-04T08:53:02.723

使用在资源被销毁时释放资源的数据成员（又名 RAII）。

例如：

```
struct TwoStrings {
    std::string string1;
    std::string string2;
    TwoStrings(const std::string &input) : string1(input) {
        if (!input[1] == ':') {
            throw std::logic_error('not a Windows absolute path');
            // yes, absolute paths can begin \\, this is a toy example
        }
        if (input.back() == '\\') {
            string2 = input;
        } else {
            string2 = input + "\\";
        }
    }
}; 
```

如果构造函数抛出（`logic_error`或`bad_alloc`），则已经初始化的数据成员`string1`被销毁，释放资源。就此而言，`string2`它也被破坏了，但如果构造函数抛出 then`string2`必须仍然是空的，因此没有特别的效果。

`string`是管理资源的类的示例，但还有许多其他类。其中最灵活的称为“智能指针”，并且可以配置为管理几乎任何资源，而不仅仅是像这样自行分配的字符数组`string`。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-04T08:53:41.007

当抛出异常时，堆栈将展开到捕获点。结果，所有在其中建造的东西都被摧毁了。

因此，关键是将每个合理的资源包装到一个类中，该类的析构函数负责相关资源的处置。

如果资源是堆分配的对象，则智能指针会执行此操作（在销毁时删除指向的对象），如果资源是打开的文件，则流会在销毁时将其关闭。其他一切都需要自定义包装器。

但请注意，许多“资源”由本身为 void* 的处理程序表示。这也可以通过使用分配的资源进行初始化并指定删除函数来使用智能指针。

技术发挥得更好更多的是品味和机会的问题。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-10-04T08:56:57.090

最好的方法是：在构造函数中分配任何资源并在析构函数中释放任何资源。

C++ 中的模板对此非常有帮助，因为我们可以使对象创建原子化。

# extjs - 在 Extjs 3 中在网格底栏中添加多个组件（工具栏和分页栏）？

> ID：12723501
> 
> 赞同：0
> 
> 时间：2012-10-04T08:43:46.103
> 
> 标签：extjs

我想在 gird bbar（底栏）添加工具栏和分页。但如果我将两者都添加到 bbar 数组中，它会出现在单行中。我需要的是第一行的分页和第二行的工具栏.. 以前有人处理过这些问题吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-04T08:50:26.753

您可以尝试这种方法：

```
this.toolBar = new Ext.Container({
        height: 54,
        layout: 'anchor',
        xtype: 'container',
        defaults: {
            anchor: '100%',
            height: 27
        },
        items: [
            this.toolBar1,
            this.toolBar2
        ]
    }); 
```

并将此容器放在网格 tbar 或 bbar 中。

# php - javascript onclick删除不起作用

> ID：12723502
> 
> 赞同：-1
> 
> 时间：2012-10-04T08:43:51.533
> 
> 标签：php, javascript

为什么我的 onClick 不起作用？

当我单击时，我收到如下错误消息：

```
syntax error : identifier starts immediately after numeric literal 
```

它不会从数据库中确定 ID，数据库 ID 是 varchar(50)。

```
<a href='#' id='delete' title='Delete' class='icon-2 info-tooltip' onclick='delete_Affiliate(".$row['affiliateid'].")'></a>

<script type="text/javascript"> 
    function delete_Affiliate(id){
        alert(id);

    }
</script> 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-04T08:46:32.273

尝试这个：

```
delete_Affiliate(" <?php echo $row['affiliateid']; ?>") 
```

也就是说，您需要从 PHP 中回显该值。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-04T08:47:22.483

尝试这个

```
<a href='#' id='delete' title='Delete' class='icon-2 info-tooltip' onclick="delete_Affiliate(<?php echo $row['affiliateid'] ?>)"></a>

<script type="text/javascript"> 
function delete_Affiliate(id){
    alert(id);

} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-04T08:47:28.347

这条线上可能有问题，
`<a href='#' id='delete' title='Delete' class='icon-2 info-tooltip' onclick='delete_Affiliate(".$row['affiliateid'].")'></a>`
应该是
`<a href='#' id='delete' title='Delete' class='icon-2 info-tooltip' onclick='delete_Affiliate("<?php echo $row['affiliateid']; ?>")'></a>`

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-04T11:05:15.457

尝试这个

```
delete_Affiliate(<?php echo $row['affiliateid']; ?>); 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-10-04T08:48:42.670

你能发布你的PHP脚本吗？你应该有类似的东西：

```
<?php

echo "<a href='#' id='delete' title='Delete' class='icon-2 info-tooltip' onclick='delete_Affiliate(\"".$row['affiliateid']."\");return false;'></a>
<script type='text/javascript'> 
    function delete_Affiliate(id){
        alert(id);
    }
</script>";

?> 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-10-04T08:49:14.267

尝试这个 ：

```
<?php 
 echo "<a href='#' id='delete' title='Delete' class='icon-2 info-tooltip' onclick='delete_Affiliate(".$row['affiliateid'].");'></a>";
 ?> 
```

或这个 ：

```
<a href='#' id='delete' title='Delete' class='icon-2 info-tooltip' onclick='delete_Affiliate("<?php echo $row['affiliateid'] ?>");'></a> 
```

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2012-10-04T09:48:41.780

你必须像这样在你的锚标签之间添加 php 标签和 echo 语句

```
<a href='#' id='delete' title='Delete' class='icon-2 info-tooltip'  onclick='delete_Affiliate("<?php echo $row['affiliateid']; ?>")'></a> 
```

你没有添加这个

```
<?php echo $row['affiliateid']; ?> 
```

在你的锚标签中，所以只需添加它并检查它。

我希望它会帮助你

* * *

## 回答 #8

> 赞同：-1
> 
> 时间：2012-10-04T08:46:31.657

使用此代码，希望它会工作

```
<a href='#' id='delete' title='Delete' class='icon-2 info-tooltip' onclick="delete_Affiliate(<?php echo $row['affiliateid'];?>);"></a> 
```

# c++ - 为什么必须输入两次 getline(cin, string)？

> ID：12723509
> 
> 赞同：2
> 
> 时间：2012-10-04T08:44:26.637
> 
> 标签：c++, user-input, iostream

在获取用户输入方面需要您的帮助。
我希望用户键入一个包含空格的字符串。我不能使用`cin>>variable`之间的空间使问题出错。如果我使用`getline(cin,string_variable)`它可以正常工作。但我需要输入两次才能使其正常工作。

```
cout<<"Enter movie name";
getline(cin, mvName);
getline(cin, mvName); 
```

有没有比这更好的方法来获取用户输入，或者是否有任何其他代码可以输入而不是输入两次 getline？请建议。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-10-04T08:53:16.290

在格式化输入 using 和未格式化输入之间切换时`in >> value`，例如， using`std::getline(in, value)`您需要确保您已使用任何您不感兴趣的空格。在您的情况下，缓冲区中可能有来自先前输入的换行符。假设您对领先的空白不感兴趣，最简单的方法是使用如下内容：

```
if (std::getline(std::cin >> std::ws, mvName)) {
    process(mvName);
} 
```

顺便说一句，您应该始终检查您的输入是否成功。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-04T08:48:17.480

我使用没有问题：

`char mvName[32];`

`cin.getline(mvName, 32);`

我只需要调用它一次，再次没有问题。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-04T08:50:14.337

也许您只是忘记`\n`在提示信息中添加：

```
cout<<"Enter movie name:\n"; 
```

但是如果你想跳过空行 - 这样做：

```
// skip empty lines
while (cin >> mvName && mvName.empty());
// here mvName contains non empty string or it is empty because of error in reading
.... 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-10-04T08:51:05.493

由于问题不包含换行符，我怀疑您按回车键从`"Enter movie name"`问题中移出？这将在 中放入一个空行`stdin`，第一个`getline()`将读取，然后第二个`getline()`将读取您输入的文本。

要删除输入初始换行符的要求，只需将其添加到问题的字符串文字中：

```
std::cout<< "Enter movie name:\n"; 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-10-04T09:21:43.703

```
cout<<"Enter movie name";
  getline(cin, mvName); 
```

工作正常！

也许你不得不使用`getline(cin, mvName);`两次是因为你在第一次输入了一些字符，`getline(cin, mvName);`比如 Space、Enter 等。

# open-source - 我在哪里可以托管许多开源项目？

> ID：12723516
> 
> 赞同：0
> 
> 时间：2012-10-04T08:44:42.827
> 
> 标签：open-source, hosting, projects

在业余时间，我创建了过去在谷歌代码上托管的开源项目，但显然谷歌将项目的最大数量限制为 25 个，这不是我想要的。

我有很多想要分享和展示的小项目。

你的选择是什么？我知道 github 和 sourceforge，但我找不到有关它们的限制的信息，所以我不确定。

您将在哪里托管超过 25 个项目？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-04T08:48:37.480

我的选择是 GitHub。我不相信他们对您可能拥有的公共存储库的数量施加限制，他们只要求您将每个存储库保持在 1Gb 以下。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-04T08:51:44.310

您可以使用：

*   github
*   源锻造

我使用 github 的次数比第二个多得多。

# android - Android KSOAP2 ServiceConnectionSE NullPointerException

> ID：12723517
> 
> 赞同：2
> 
> 时间：2012-10-04T08:44:47.023
> 
> 标签：android, ksoap2, android-ksoap2

我尝试在我的 android 应用程序中实现 KSOAP2，现在我遇到了问题。当我使用 HTTPTransportSE 对象的调用方法时，我得到以下异常：

```
10-04 09:24:05.997: W/System.err(6779): java.lang.NullPointerException
10-04 09:24:06.017: W/System.err(6779):     at org.ksoap2.transport.ServiceConnectionSE.getResponseProperties(ServiceConnectionSE.java:85)
10-04 09:24:06.017: W/System.err(6779):     at org.ksoap2.transport.HttpTransportSE.call(HttpTransportSE.java:167)
10-04 09:24:06.017: W/System.err(6779):     at com.brandmakerandroid.mediapool.LoginActivity.Login(LoginActivity.java:123)
10-04 09:24:06.017: W/System.err(6779):     at java.lang.reflect.Method.invokeNative(Native Method)
10-04 09:24:06.017: W/System.err(6779):     at java.lang.reflect.Method.invoke(Method.java:511)
10-04 09:24:06.017: W/System.err(6779):     at android.view.View$1.onClick(View.java:3077)
10-04 09:24:06.017: W/System.err(6779):     at android.view.View.performClick(View.java:3549)
10-04 09:24:06.017: W/System.err(6779):     at android.view.View$PerformClick.run(View.java:14400)
10-04 09:24:06.017: W/System.err(6779):     at android.os.Handler.handleCallback(Handler.java:605)
10-04 09:24:06.017: W/System.err(6779):     at android.os.Handler.dispatchMessage(Handler.java:92)
10-04 09:24:06.017: W/System.err(6779):     at android.os.Looper.loop(Looper.java:154)
10-04 09:24:06.017: W/System.err(6779):     at android.app.ActivityThread.main(ActivityThread.java:4945)
10-04 09:24:06.017: W/System.err(6779):     at java.lang.reflect.Method.invokeNative(Native Method)
10-04 09:24:06.017: W/System.err(6779):     at java.lang.reflect.Method.invoke(Method.java:511)
10-04 09:24:06.017: W/System.err(6779):     at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:784)
10-04 09:24:06.017: W/System.err(6779):     at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:551)
10-04 09:24:06.017: W/System.err(6779):     at dalvik.system.NativeStart.main(Native Method) 
```

这是我的代码：

```
 SoapObject request= new SoapObject(Constants.NAMESPACE, Constants.METHOD_NAME);

            SoapObject mda = new SoapObject("","arg0");

            PropertyInfo pi = new PropertyInfo();
            pi.setName("mediaGuid");
            pi.setValue("27499");
            pi.setType(String.class);
            mda.addProperty(pi);

            PropertyInfo pi_hash = new PropertyInfo();
            pi_hash.setName("mediaHash");
            pi_hash.setValue("");
            pi_hash.setType(String.class);

            mda.addProperty(pi_hash);

            request.addSoapObject(mda);

            SoapSerializationEnvelope envelope = new SoapSerializationEnvelope(
                    SoapEnvelope.VER11);
            envelope.setOutputSoapObject(request);
            envelope.addMapping(Constants.NAMESPACE, "getMediaDetails", getMediaDetails.class);

            try {
                HttpTransportSE httpTransportSE = new HttpTransportSE(Constants.DEFAULT_SERVER);
                httpTransportSE.debug = true;

                List<HeaderProperty> headerList = new ArrayList<HeaderProperty>();
                headerList.add(new HeaderProperty("Authorization", "Basic "
                        + org.kobjects.base64.Base64.encode("xxxxxxxx"
                                .getBytes())));

                httpTransportSE.call(Constants.SOAP_ACTION, envelope, headerList);

                SoapObject objectResult = (SoapObject) envelope.getResponse(); 
```

我希望你能帮助我..我试图修复这个错误好几天

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-10T09:58:11.137

我解决了这个问题。HTTPConnection 存在问题，不幸的是，如果没有 ksoap2 源，很难找到它。我检查了代码，发现 ksoap2 使用来自 Java 的普通 URL 和 HTTPConnection。我构建了一个简单的示例来连接到我的 URL，并注意到无法连接。

注意：在开始考虑复杂之前先检查简单的事情:)

# php - 当 php 包含 javascript 变量时，如何在 javascript 文件中使用 php 代码？

> ID：12723520
> 
> 赞同：1
> 
> 时间：2012-10-04T08:44:58.943
> 
> 标签：php, javascript

cuIzgaraKay 是一个 javascript 代码，我想在 sql 命令中使用它作为 cuIzgaraKay.id（它正确地获取了我检查过的值）。但是，我做不到。我用谷歌搜索了它，但我找不到我搜索的内容。我该怎么做 ？很抱歉询问语法错误，但我找不到它也许我有逻辑错误

```
 if(cuIzgaraKay){

          <?php
              include_once('../phps/kutuphane/inc.php');

    $result = mysql_query("select id from bolge_db where parent_id="?>+ cuIzgaraKay.id + <?); 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-04T08:49:09.637

据我所知，您正在尝试使用您生成的 Javascript 代码中的数据从 PHP 页面执行 SQL 查询。

**Javascript 仅在您页面的客户端进行评估。这意味着服务器端对 Javascript 代码一无所知。**

您需要做的是生成 ID，并将其传送到 PHP 后端，例如使用 HTTP POST/GET 请求或其他东西。

**编辑：**

如果您是 Javascript 新手，我建议您查看原生 JS 对象 XMLHttpRequest。你像这样使用它：

```
/*
    params:
            url:     relative URL on host, e.g. '/users/morten/data'
            method:  GET, POST, PUT, DELETE, HEAD or OPTIONS
            data:    data to send with request, e.g. POST form-data
            ok_cb:   function to call on success
            fail_db: function to call on failure
*/
function http_req(url, method, data, ok_cb, fail_cb) {
    var client = new XMLHttpRequest();
    client.onreadystatechange = function () {
        if(client.readyState == this.DONE) {
            if(client.status == 200 || client.status == 302 || client.status == 304)
                ok_cb(...);
            else
                fail_cb(...);
        }
    };
    client.open(method, url, true);
    client.send(data);
} 
```

或者您可以使用 jQuery 或大量其他框架来做同样的事情。

**编辑：**

> 那里的方法是什么我怎么能在那里写以及如何从 php 获取数据 – user1702486

该方法是您要使用的任何 HTTP 请求方法。有关更多信息，请参阅维基百科页面：[http ://en.wikipedia.org/wiki/Hypertext_Transfer_Protocol#Request_methods](http://en.wikipedia.org/wiki/Hypertext_Transfer_Protocol#Request_methods)

此代码将 POST 以`/page.php`发送数据字符串。如果请求返回成功代码，`ok`将调用 -callback。

```
// handle HTTP OK
var ok = function(meth, res, url) {
    console.log("OK: got " + res);
}

// handle all else
var fail = function(meth, res, url) {
    console.log("UTTER UTTER FAILURE!\n" + res);
}

// make a HTTP POST to server/page.php sending the data along
// you can serialize the data and use XML or JSON or whatever instead
http_req("/page.php", "POST", "username=usr&password=passw&userid=12345", ok, fail); 
```

在 PHP 页面上，您需要通过检查数据并在适当时返回答案来处理 POST。像这样的东西：

```
<?php
if (empty($_POST))
{
    print_r($_POST);
    ...
    // do something with the data and print something back
}
?> 
```

如果您发布了“data1=1234&data2=5678&str=hello%20mum”，则 $_POST 数组将如下所示：

```
(
    [data1] => 1234
    [data2] => 5678
    [str] => "hello%20mum"
) 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-04T08:48:57.817

你不能，javascript是客户端，php是服务器端。所以 php 代码在 javascript 之前被执行。

# iphone - 如何重新显示 iPhone 编程 (Xcode)

> ID：12723526
> 
> 赞同：1
> 
> 时间：2012-10-04T08:45:30.347
> 
> 标签：iphone, xcode, uiview, uiimageview

我是iOS编程的初学者。我想逐帧在屏幕上显示图像。但在我的源代码中，只有第一帧被绘制在屏幕上，而忽略了所有下一帧。如何实时重新显示？

我的图像显示源： -viewDidLoad
：初始化显示第一个屏幕
-ChangeImage：更改显示下一个屏幕-setPixelColorR
：G：B：X：Y：：更改屏幕上的像素颜色

```
<ContentViewController.h>
#import <UIKit/UIKit.h>

@interface ContentViewController : UIViewController {
    IBOutlet UIImageView *svContent;

    CGContextRef context;
    size_t dataSize;

    UInt8* initdata;

}

@property(nonatomic,retain) IBOutlet UIImageView *svContent;

-(IBAction)btnPhotosTouched;

- (void) ChangeImage;

- (void) setPixelColorR:(int)red G:(int)green B:(int)blue X:(int)x Y:(int)y;

@end 
```

和

```
<ContentViewController.m>
#import "ContentViewController.h"

@implementation ContentViewController
@synthesize svContent;

- (void)viewDidLoad {
    [super viewDidLoad];

    UIImageView *imageView;

    CGSize screenSize = [[UIScreen mainScreen] bounds].size;

    CGFloat width = screenSize.width;
    CGFloat height = screenSize.height;
    CGColorSpaceRef colorSpace = CGColorSpaceCreateDeviceRGB();

    size_t bitsPerComponent = 8;
    size_t bytesPerPixel = 4;
    size_t bytesPerRow = (width * bitsPerComponent * bytesPerPixel + 7) / 8;
    dataSize = bytesPerRow * height;

    initdata = malloc(sizeof(UInt8) * dataSize);
    memset(initdata, 0, dataSize);

    context = CGBitmapContextCreate(initdata, width, height, bitsPerComponent, bytesPerRow, colorSpace, kCGImageAlphaPremultipliedFirst | kCGBitmapByteOrder32Big);

    // a drawing for a test.
    CGContextSetRGBFillColor (context, 1, 0, 0, 1);
    CGContextFillRect (context, CGRectMake (0, 0, 200, 100 ));
    CGContextSetRGBFillColor (context, 0, 0, 1, .5);
    CGContextFillRect (context, CGRectMake (0, 0, 100, 200));

    CGColorSpaceRelease(colorSpace);
    CGImageRef imageRef = CGBitmapContextCreateImage(context);
    UIImage *result = [[UIImage imageWithCGImage:imageRef] retain];
    CGImageRelease(imageRef);

    imageView = [[UIImageView alloc] initWithImage:result];

    [svContent addSubview:imageView];
    [imageView release];

//  [self ChangeImage:initdata];
}

- (void) ChangeImage
{
    UIImageView *imageView;

    CGColorSpaceRef colorSpace = CGColorSpaceCreateDeviceRGB();

    CGColorSpaceRelease(colorSpace);
    CGImageRef imageRef = CGBitmapContextCreateImage(context);
    UIImage *result = [[UIImage imageWithCGImage:imageRef] retain];
    CGImageRelease(imageRef);

    imageView = [[UIImageView alloc] initWithImage:result];

    [svContent addSubview:imageView];

    [imageView release];
    NSLog(@"Thread Image Change GO");
    [svContent setNeedsDisplay];
    [self.view setNeedsDisplay];
    [super.view setNeedsDisplay];
}

- (void) setPixelColorR:(int)red G:(int)green B:(int)blue X:(int)x Y:(int)y
{
    CGFloat r = (CGFloat)red / 255.0f;
    CGFloat g = (CGFloat)green / 255.0f;
    CGFloat b = (CGFloat)blue / 255.0f;

    CGContextSetRGBFillColor(context, r, g, b, 1);
    CGContextFillRect(context, CGRectMake(x, y, 1, 1));
}

.
.
.

@end 
```

谢谢你。

# symfony - Symfony2 丢失身份验证

> ID：12723529
> 
> 赞同：0
> 
> 时间：2012-10-04T08:45:39.270
> 
> 标签：symfony, fosuserbundle

我正在构建一个架构简单的网站，以非常基本的方式使用 FOSuserBundle：

*   可以对用户进行身份验证的公共区域
*   一个受保护的区域，用户必须在其中进行身份验证
*   登录页面

身份验证在公共页面上运行良好。但是，当用户转到受保护的页面时，身份验证丢失（匿名），并且用户被重定向到登录页面。尽管如此，用户仍然通过公共页面的身份验证。

这是防火墙配置：

```
 dev:
        pattern:  ^/(_(profiler|wdt)|css|images|js)/
        security: false

    login:
       pattern:   ^/(login$|register|resetting)
       anonymous: true

    secured_area:
        pattern: ^(/[A-Za-z_]*/[A-Za-z0-9-]*/[A-Za-z0-9-]*/.*)|(/[A-Za-z_]*/NT.*)
        form_login:
            provider:    fos_userbundle
            csrf_provider: form.csrf_provider
            remember_me: true
            use_referer: true
        remember_me:
            key:         %secret%
        anonymous:       false
        logout:          true

    main:
        pattern: ^/
        form_login:
            provider:    fos_userbundle
            csrf_provider: form.csrf_provider
            remember_me: true
            use_referer: true
        remember_me:
            key:         %secret%
        anonymous:       true
        logout:          true 
```

谢谢 ：）

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-04T09:15:10.127

如果您有 2 个防火墙，您需要要求用户通过每个防火墙进行身份验证。您不能坚持使用 main 并需要一些角色来访问您的安全页面吗？您可以添加删除secured_area防火墙并添加例如：

```
access_control:     
    - { path: ^/secured, role: ROLE_ADMIN } 
```

# smarty - 如何在 phalcon 0.5 中将 Phalcon\Tag 与外部模板引擎（如 Smarty）一起使用

> ID：12723531
> 
> 赞同：2
> 
> 时间：2012-10-04T08:45:44.537
> 
> 标签：smarty, smarty3, phalcon

我按照[这个文档](http://docs.phalconphp.com/en/latest/reference/views.html#template-engines)为 Smarty 创建了一个适配器。我想在我的项目中使用 Smarty 作为默认模板引擎。在这种情况下，我可以在 .tpl 文件中使用 Phalcon\Tag 或 $this->partial() 吗？如何？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-04T13:49:56.493

在您的控制器中，您可以执行以下操作：

```
$register_link = \Phalcon\Tag::linkTo('register', 'Register');
$index_link    = \Phalcon\Tag::linkTo('index', 'Index');

$this->view->setVar('my_register_link', $register_link);
$this->view->setVar('my_index_link', $index_link); 
```

在视图中，您可以这样做：

```
<div id='links'>
{if $somevariable}
    {$my_register_link}
{/if}
{$my_index_link}
</div> 
```

# java - Swing - 组布局 - 如何将元素放在正确的位置？

> ID：12723533
> 
> 赞同：1
> 
> 时间：2012-10-04T08:45:47.220
> 
> 标签：java, eclipse, swing, user-interface

我目前正在编写秋千布局。这是它现在的样子：

![在此处输入图像描述](../Images/2c6d4a7a3964fea4c6cdd6bcecd39161.png)

这就是它的样子：

![在此处输入图像描述](../Images/0a83fb0c57b4b215a3b3686f736f03f7.png)

现在按钮在错误的地方：

这是我的代码：

```
 layout.setHorizontalGroup(
            layout.createSequentialGroup()
            .addGroup(layout.createParallelGroup(GroupLayout.Alignment.LEADING)
                    .addComponent(header)//table header
                    .addComponent(tableG)//here comes the table
                    .addGroup(layout.createParallelGroup()
                            .addComponent(b3)//button1
                            .addComponent(b4)))//button2
            );
    layout.setVerticalGroup(
            layout.createSequentialGroup()
            .addGroup(layout.createParallelGroup(GroupLayout.Alignment.BASELINE)
                    .addComponent(b3)//button1
                    .addComponent(b4))   //button2
                    .addGroup(layout.createParallelGroup(GroupLayout.Alignment.BASELINE)
                            .addComponent(header)//tableheader

.addComponent(tableG))//table
                );

        layout.linkSize(SwingConstants.HORIZONTAL, b3, b4); 
```

为什么我的按钮在我的桌子上？

我很欣赏你的回答！！！

# podscms - 如何使用 PODS 2 在循环内的 header.php 中输出 pod 记录

> ID：12723537
> 
> 赞同：0
> 
> 时间：2012-10-04T08:46:10.193
> 
> 标签：podscms

我有一个名为**国家**的 pod ，我想直接在 header.php 中输出每条记录（名称）。

我需要它从我的主题的 header.php 调用，而不是从页面或模板等调用。

我想我需要先以某种方式调用 Pods 2。

然后在循环中输出 {@permalink} 和 name(title) 等。

有人可以给我一些例子来说明如何使用 {@permalink} 做到这一点吗？其他领域我可以自己做。

我只需要基本的例如（我知道这是错误的。它只抛出数组（）而不是名称）：

```
<?php
     $params = array(
        'limit'   => -1  // Return all rows
     );
     $countries = pods( 'countries', $params );

     if ( 0 < $countries->total() ) {
          while ( $countries->fetch() ) {
?>
     <h2><?php echo $countries->field( 'name' ); ?></h2>
<?php
          } 
     } 
?> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-04T08:52:06.730

解决了！而只是

```
<?php echo $countries->field( 'name' ); ?> 
```

我需要这样称呼它：

```
<?php echo $countries->field( 'country_field.name' ); ?> 
```

# css - CSS 定位和大小调整行为

> ID：12723539
> 
> 赞同：1
> 
> 时间：2012-10-04T08:46:23.240
> 
> 标签：css

我正在尝试学习一点 CSS，并且即将放弃定位和调整元素大小。

为什么

```
#name {

height: 25% ;
} 
```

导致`div`保持其内容所需的大小（例如，如果只有一行文本，则`div`高度仅为一行）。

但是一旦我添加`position: relative ;`它就会高出25％？

这似乎意味着每次我想要一个元素改变它的大小时我都必须添加位置属性，即使我不想把它的位置从静态流中取出。

我也不明白我应该为我的尺码选择哪个单位。em，px，百分比......这有点矫枉过正。我认为每次都使用 % 以保持布局“动态”或“响应”会很有用，这是错误的吗？

最后一件事：为什么大多数设计师使用`class`-attribute 而不是`id`，据我所知，它几乎没有使用

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-04T09:03:15.563

不同的元素`display`应用了不同的默认值，例如： a`div`有一个默认值`display`，`block`而`span`元素使用`inline`，您可能正在尝试调整`inline`元素的高度。

至于尺寸，它们都有自己的位置，但是我通常会尝试坚持，`em`因为尺寸会随着字体大小而调整。百分比在某些情况下很有用，px 也是如此。然而，就响应式设计而言，您应该主要使用媒体查询（尽管使用百分比测量也可以在这方面有所帮助）。

要回答您的最后一个问题，id 只能在 html 中使用一次，因此只能应用于一个元素，类可以多次用于许多元素，因此只有在html。

# jquery - jQuery动态日期和Cufon？

> ID：12723543
> 
> 赞同：0
> 
> 时间：2012-10-04T08:46:30.737
> 
> 标签：jquery, cufon

我正在使用 jquery 将日期（月份）打印到静态页面上的 div 中，并希望使用 Cufon 为该日期设置字体样式（由于字体的许可，我必须使用 Cufon。）即使我在脚本之前有 div，在 cufon 脚本之前有日期脚本，它不会将字体应用于日期。它适用于页面上的其他任何地方。谁能告诉我为什么会这样，是否有解决方案？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-04T08:55:28.330

对于您让我们**假设**的一件事，我可以说，每一秒，我**都假设**some`DIV`的 html 内容得到更新。因此，在该更新请求中，添加以下代码：

```
Cufon.refresh(); 
```

希望它应该可以工作，如果没有，请尝试发布一些代码，以便我们可以为您提供更好的答案。:)

# php - 按前 2 个字母分组或列出单词

> ID：12723546
> 
> 赞同：0
> 
> 时间：2012-10-04T08:46:34.013
> 
> 标签：php, substr

我想按前两个字母列出/分组单词，但我无法理解它。我想我可以做一个 substr() 并在循环时检查，但我不确定这是否是这样做的方法。

就像是：

```
if (substr($word, 0, 2) == 'aa') {
 echo $word;
} 
```

我想要实现的目标：单词首先按其起始字母排序，例如 A、B、C 等。在 A 页面上，您的单词按前 2 个字母排序，例如 aa、ab、ac 等。

一个例子是[http://www.urbandictionary.com/browse.php?word=aa](http://www.urbandictionary.com/browse.php?word=aa)。他们做的正是我所追求的。

帮助/想法表示赞赏！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-04T08:52:24.250

如果你有一堆单词，把它们放在一个数组中。

例如：

```
<?php
$myWords = array ("hello", "hell", "ape", "word", "appel");
$myGroupedArr = array();
foreach ($myWords as $oneWord){
  $firstTwo = substr($oneWord,0,2);
  $myGroupedArr[$firstTwo][] = $oneWord;  
}
echo "<pre>";
print_r($myGroupedArr);
echo "</pre>";
?> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-04T08:52:34.050

我不仅会按第一个字母排序，还会按整个单词排序，或者至少按前两个字母排序。

然后，您确实可以使用`substr`来获取第一个单词的前两个字母。然后您可以进入循环，并检查循环中单词的前两个字母，以及您之前得到的两个字母。

如果他们不同，你知道你有一个新的组。您可以回显组标题并将新的字母存储起来以在以下迭代中进行比较。

```
// Words in a sorted array.
$words = array( ...... );
asort($words);

$currentGroup = '';
foreach ($words as $word)
{
    $newGroup = substr($word, 0, 2);

    if ($newGroup !== $currentGroup)
    {
        // A new group is starting.
        echo "=== $newGroup ===<br/>";
        $currentGroup = $newGroup;
    }

    echo $word . '<br/>';
} 
```

# bash - “调试” bash shell 脚本：转义字符、传递参数

> ID：12723551
> 
> 赞同：1
> 
> 时间：2012-10-04T08:46:47.757
> 
> 标签：bash, debugging, shell, command-line

我正在尝试编写一个 bash shell 脚本（这是我没有太多经验的东西）来在我通过 ssh 操作的 Unix 机器上搜索 C 代码。

这是我脚本中的代码：

```
#! /bin/bash

find . \( -name '*.c' -o -name '*.h' \) -exec grep -n '<SEARCH_STRING>' {} + | sed -e "s/^\(\..*\.c\):\([0-9]*\):[ \t]*\(.*\)$/\1 :: \2\n\3\n/" | sed -e "s/^\(\..*\.h\):\([0-9]*\):[ \t]*\(.*\)$/\1 :: \2\n\3\n/" | sed ''/<SEARCH_STRING>/s//`printf "\033[31m<SEARCH_STRING>\033[0m"`/'' | less -R 
```

请注意，这只是我用来表示我的搜索字符串的东西，当然我实际上并不是在逐字搜索。

我意识到这有几个问题。首先，当我在命令行中键入底线（没有 #!/bin/bash 标头的“脚本”）时，它实际上工作得很好，并给了我想要的结果。我知道在将其转换为 bash 脚本时应该转义某些字符，但我尝试转义几个（组合）字符，它总是给我同样的错误：

```
find: missing argument to `-exec'
./code_search.sh: line 4: <SEARCH_STRING>: command not found
sed: -e expression #1, char 43: unterminated `s' command
printf: usage: printf [-v var] format [arguments]
./code_search.sh: line 8: \033[31m<SEARCH_STRING>\033[0m: command not found
sed: -e expression #1, char 46: unterminated `s' command 
```

另外，我意识到我不应该将搜索字符串硬编码到我的脚本中，因为将搜索字符串作为参数提供给脚本要方便得多，但我真的不知道该怎么做。

正如我所说，我没有太多编写 bash 脚本的经验，我尝试编写这个脚本来帮助我完成编码工作。但是，我不能再花时间调试这个了，因为这不是我的老板付钱给我做的。我问过我的同事，但他们也没有一个能帮助我。

我知道自己不花很多精力去学习更多关于 bash shell 脚本的知识有点便宜，但就像我说的那样，我真的不能抽出时间。谁能帮我完成这个脚本？

提前非常感谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-04T08:58:04.527

这样它不会给出任何错误。

```
#! /bin/bash

searchstring=$1

find . \( -name '*.c' -o -name '*.h' \) -exec grep -n "$searchstring" {} + \ 
        | sed -e "s/^\(\..*\.c\):\([0-9]*\):[ \t]*\(.*\)$/\1 :: \2\n\3\n/" \
        | sed -e "s/^\(\..*\.h\):\([0-9]*\):[ \t]*\(.*\)$/\1 :: \2\n\3\n/" \
        | sed ''/"$searchstring"/s//`printf "\033[31m""$searchstring""\033[0m"`/'' \
        | less -R 
```

但是，这并不意味着它有效。如果没有一些示例输入和所需的输出，就不可能为您提供进一步的帮助。例如，第三个`sed`对我来说似乎是错误的。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-04T09:33:49.183

这是因为，在最后一个 sed 命令中，字符 < 没有转义：双单引号仅表示空字符串 ''; < 被解释为文件重定向，shell 尝试从文件“SEARCH_STRING”中读取。

```
sed ''/<SEARCH_STRING>/s//`printf "\033[31m<SEARCH_STRING>\033[0m"`/'' 
```

应该改为

```
sed '/<SEARCH_STRING>/s//'`printf "\033[31m<SEARCH_STRING>\033[0m"`'/' 
```

此外，在出现错误之后，查找版本可能不支持命令末尾的 + `man find`，在这种情况下，+ 功能可以由 xargs 完成（但如果文件名可以包含空格，这可能会失败）

```
find . \( ... \) | xargs grep -n '<SEARCH_STRING>' 
```

# php - 替换文本 (preg_replace)

> ID：12723558
> 
> 赞同：0
> 
> 时间：2012-10-04T08:47:36.100
> 
> 标签：php, replace, preg-replace

我有一个变量 $text，其值为：

```
...
[one_fourth]
[quote autor="Someone"]
"This is a quote"
[/quote]
[/one_fourth]
... 
```

我想替换/删除“[quote”和“[/quote]”之间的所有内容，包括“[quote”和“[/quote]”。这是我尝试过的：

```
$text = preg_replace("/\[quote.*\[\/quote\]/", '', $text); 
```

但我没有成功。我该如何管理？

谢谢，

迪

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-04T09:00:51.413

这行得通

```
$text = preg_replace("/\[quote.*\[\/quote\]/s", '', $text); 
```

你必须告诉 php`.`必须匹配换行符（`s`关闭后的参数`/`）

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-10-04T08:54:01.460

```
use 
<?php
echo str_replace("\"","",$text);
?> 
```

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2012-10-04T09:28:55.650

干得好

```
 $text = preg_replace("#\[quote(.*)\]\s*(.*)\s*\[\/quote\]#","$1 $2", $text); 
```

# javascript - 使用jquery在表格内生成文本框

> ID：12723560
> 
> 赞同：1
> 
> 时间：2012-10-04T08:47:45.790
> 
> 标签：javascript, jquery

假设这是下面的准备表。3行中的每一行都有一个文本框，在它们旁边有2个按钮+或添加和-用于删除。当我连续单击 + 时，将生成一个新的文本框，当我单击时 - 文本框将被删除。像下面的示例： ![我自己无法解决的问题或样本；-(](../Images/def42862a265b7fe1af4633a74bf2151.png)

* * *

任何人都可以建议此步骤或程序的片段吗？

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-04T08:52:16.103

你可以在这些行上写一些东西：

```
<script type="text/javascript">

$(document).ready(function(){

var counter = 2;

$("#addButton").click(function () {

if(counter>10){
        alert("Only 10 textboxes are allowed");
        return false;
}   

var newTextBoxDiv = $(document.createElement('div'))
     .attr("id", 'TextBoxDiv' + counter);

newTextBoxDiv.after().html('<label>Textbox #'+ counter + ' : </label>' +
      '<input type="text" name="textbox' + counter + 
      '" id="textbox' + counter + '" value="" >');

newTextBoxDiv.appendTo("#TextBoxesGroup");

counter++;
 });

 $("#removeButton").click(function () {
if(counter==1){
      alert("No more textbox to remove");
      return false;
   }   

counter--;

    $("#TextBoxDiv" + counter).remove();

 });
});
</script> 
```

如果您不想动态创建 div，您可以找到最后一个表格行的 id，向其添加 1，创建表格行，然后将文本框创建 html 附加到它。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-04T09:43:50.990

假设html结构如下

```
<table border = "1">
<thead>
    <tr><td> Text Boxes </td></tr>
</thead>
<tbody>
    <tr><td><button class="add-text-box">+</button><button class="remove-text-box">-</button></td></tr>
    <tr><td><button class="add-text-box">+</button><button class="remove-text-box">-</button></td></tr>
    <tr><td><button class="add-text-box">+</button><button class="remove-text-box">-</button></td></tr>
</tbody> 
```

​下面的jQuery片段应该可以工作

```
$(".add-text-box").click(function(){
    $(this).parent().prepend(" <input class='text-box' /> <br>");
});

$(".remove-text-box").click(function(){
    textboxes = $(this).parent().find('.text-box'); 
    $(textboxes).last().remove();
    if (textboxes.length === 0) {
        $(this).siblings().remove();
        $(this).remove();
    }        
}); 
```

[​你可以在这里](http://jsfiddle.net/4arTn/3/)看到它的作用

# django - Django 查询集。将输出转换为列表

> ID：12723561
> 
> 赞同：0
> 
> 时间：2012-10-04T08:47:53.260
> 
> 标签：django, django-models

```
class Box(models.Model):
    owner = models.ForeignKey(User, related_name='user', verbose_name='Owner')
    name = models.CharField("Name", max_length=30)
    items = models.ManyToManyField('Item', through='BoxItem', blank=True, null=True)

class BoxItem(models.Model):
    item = models.ForeignKey('Item')
    box = models.ForeignKey('Box')
    quantity = models.IntegerField()

class Item(models.Model):
    name = models.CharField("Name Item", max_length=30)

In [1]: from project.app.models import *

In [2]: b = Box.objects.get(owner=1)

In [3]: b.items_all()

Out[4]: [<Item: PC>, <Item: Notebook>] 
```

1.  如何将此输出转换为列表？
2.  如何在of`quantity`旁边添加到此列表？（例如：PC - 3，笔记本电脑 - 5）`name``Item`

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-04T09:04:43.910

在第 4 行中，结果`b.items_all()`实际上是一个[QuerySet](https://docs.djangoproject.com/en/dev/ref/models/querysets/#django.db.models.query.QuerySet)；您可以使用任何 QuerySet 的方法；对于大多数目的（包括*列表*访问），我通常直接使用 QuerySet。

为了**在 Python shell 级别**`quantity`的旁边显示，`name`您可以在模型级别使用该方法；如果您在和之间建立一对一的关系，这应该很容易实现；回想一下，每次调用该函数时，这都会导致额外的。`Item` **[`__unicode__`](https://docs.djangoproject.com/en/dev/ref/models/instances/?from=olddocs#unicode)`Item``BoxItem``join``__unicode__`**

 *** * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-04T09:24:04.557

怎么样的东西：

```
 b = Box.objects.get(owner=1)

 [('%s - %s' % (box_item.item.name, box_item.quantity)) for box_item in b.items_all()] 
```**

# android - 将背景图像设置为已经有主题的应用程序

> ID：12723567
> 
> 赞同：0
> 
> 时间：2012-10-04T08:48:08.367
> 
> 标签：android, background-image, android-theme

嗨，我想为我的应用程序设置背景图像，它已经有一个主题。

```
<application   android:theme="@android:style/Theme.NoTitleBar" /> 
```

现在我已将代码更改为此

```
 <style name="BackgroundImage" parent="@android:style/Theme.NoTitleBar">
    <item name="android:background">@drawable/background</item>
</style> 
```

清单文件看起来像这样

```
 <application   android:theme="@style/BackgroundImage" /> 
```

现在背景图像已设置，但我以前的主题，即 Theme.NoTitleBar 不起作用。

预期的理想行为是背景图像和 Theme.NoTitleBar 应该工作。我该怎么办？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-05T11:26:54.870

我通过这样做更改了样式如下我覆盖了 Theme.NoTitlteBar

```
 <style name="Background" parent="@android:style/Theme.NoTitleBar">
    <item name="android:windowBackground">@android:color/black</item>
    <item name="android:windowNoTitle">true</item>
</style> 
```

现在清单文件看起来像这样。

```
<application  android:theme="@style/Background"/> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-04T13:58:38.603

您需要在 xml 文件中执行此操作，而不是您的清单。

你只需要像这样做一些事情：

```
<?xml version="1.0" encoding="utf-8"?>
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
android:layout_width="match_parent"
android:layout_height="match_parent"

android:background="@drawable/yourimage" >   //your drawable image here 
```

希望我帮助了你

# javascript - 如何使用 loadRecord 将嵌套模型加载到 Extjs 表单中

> ID：12723572
> 
> 赞同：4
> 
> 时间：2012-10-04T08:48:37.170
> 
> 标签：javascript, dynamic, extjs, extjs4

我创建了一个脚本来动态生成表单，但在加载嵌套模型的数据时遇到问题。我已经尝试加载整个记录，并且我已经尝试加载每个子商店，但都不起作用。

我已经了解了如何使用 form.load()，但据我了解，这需要代理连接，并且还需要将 json 数据存储在“数据”数组中。

有人对我如何解决这个问题有任何建议吗？

```
 <div id="view-@pageSpecificVar" class="grid-container even"></div>
<div id="button"></div>
<script>

    Ext.define('HeaderForm', {
        extend: 'Ext.form.Panel',
        initComponent: function () {
            var me = this;
            Ext.applyIf(me, {
                id: Ext.id(),
                defaultType: 'textfield'
            });
            me.callParent(arguments);
        }
    });

    // Define our data model
    Ext.define('HeaderModel', {
        extend: 'Ext.data.Model',
        fields: [
            { name: 'HeaderSequence', type: 'int'}
        ],
        hasMany:[
            { name: 'Columns', model: 'ColumnModel' }
        ],
        proxy: {
            type: 'ajax',
            actionMethods: { create: 'POST', read: 'GET', update: 'POST', destroy: 'POST' },
            url: '@Url.Content("~/Test/Header")',
            timeout: 1200000,
        },
    });

    Ext.define('ColumnModel', {
        extend: 'Ext.data.Model',
        fields: [
            { name: 'ColumnWidth', type: 'float'}
        ],
        hasMany:[
            { name: 'Fields', model: 'FieldModel'}
        ],
        belongsTo: 'HeaderModel'
    });

    Ext.define('FieldModel', {
        extend: 'Ext.data.Model',
        fields: [
            { name: 'XType', type: 'string'},
            { name: 'FieldLabel', type: 'string'},
            { name: 'Name', type: 'string'},
            { name: 'Data', type: 'string'},
            { name: 'FieldSpecify', type: 'bool'}
        ],
        belongsTo: 'ColumnModel'
    });

    var store = Ext.create('Ext.data.Store', {
        storeId: 'HeaderStore',
        model: 'HeaderModel',
        autoDestroy: true,
        listeners: {
            load: function (result, records, successful, eOpts) {
                //console.log(result);
                var form = dynamicForm(records[0]);
                form.add(submitButton);
                form.render('view-@pageSpecificVar');
            }
        }
    });

    store.load();

    var dynamicForm = function(record) {

        var form = new HeaderForm();
        var columnContainer = new Ext.widget({
            xtype: 'container',
            layout: 'column'
        });
        var formItems = new Ext.util.MixedCollection();

        Ext.each(record.ColumnsStore.data.items, function(item) {

            Ext.iterate(item.data, function (key, value) {

                var fieldContainer = new Ext.widget({
                    xtype: 'container',
                    columnWidth: value
                });

                Ext.each(item.FieldsStore.data.items, function(item) {
                    if(item.data["FieldSpecify"]) {
                        fieldContainer.add(new Ext.widget({
                            xtype: item.data["XType"],
                            fieldLabel: item.data["FieldLabel"],
                            name: item.data["Name"],
                            //value: item.data["Name"]
                        }));
                    }
                }, this);

                columnContainer.add(fieldContainer);

            }, this);

        }, this);

        formItems.add(columnContainer);

        form.add(formItems.items);

        Ext.each(record.ColumnsStore.data.items, function(item) {
            Ext.each(item.FieldsStore.data.items, function(fields) {
                form.loadRecord(fields);
            });
        });

        //form.loadRecord(record);

        return form;
    };

    var submitButton = new Ext.widget({
        xtype: 'toolbar',
        dock: 'bottom',
        items:[{
            xtype: 'button',
            text: 'Save',
            handler: function(button) {
                var basic = button.up('form').form;
                basic.updateRecord(basic.getRecord());
                var store = Ext.StoreMgr.get('HeaderStore');
                store.each(function(record) {
                    record.dirty = true;
                });
                store.sync();
            }
        }]
    });

</script> 
```

**更新** 对不起，我可能没有说得很清楚。我在将商店数据加载到表单字段时遇到问题。对于静态表单，我通常使用*loadRecord*将嵌套模型加载到表单中，但是在这种情况下，所有字段都嵌套在自己的小模型中，那么有没有办法使用 loadRecord 将每个嵌套模型值加载到自己的字段中？

HeaderModel 存储字段集信息。

ColumnModel 的目的是创建将围绕一组字段的容器，用于样式目的。它只是创建了两列字段。

FieldModel 存储字段特定的属性和数据。

这是响应 json 数据的示例...

```
{
"HeaderSequence":1,
    "Columns":[{
        "ColumnWidth":0.5,"Fields":[
            {"XType":"textfield","FieldLabel":"FieldA","Name":"NameA","Data":"A","FieldSpecify":true},
            {"XType":"textfield","FieldLabel":"FieldB","Name":"NameA","Data":"B","FieldSpecify":true}]
        },{
        "ColumnWidth":0.5,"Fields":[
            {"XType":"textfield","FieldLabel":"FieldA2","Name":"NameA2","Data":"A2","FieldSpecify":true},
            {"XType":"textfield","FieldLabel":"FieldB2","Name":"NameB2","Data":"B2","FieldSpecify":true}]
        }   
] 
```

}

谢谢

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-04T17:47:48.413

我已经弄清楚如何将嵌套模型加载到表单中。我们不能简单地使用 load 或 loadRecord，因为默认情况下，该方法会尝试获取模型的数据并遍历数据对象并调用 setValues。

我要做的是手动获取基本表单元素并自己调用 setValues 来分配值。

```
 // loop through each field store to load the data into the form by field id
        Ext.each(record.ColumnsStore.data.items, function(item) {
            Ext.each(item.FieldsStore.data.items, function(fields) {
                form.getForm().setValues([{ id: fields.data['Id'], value: fields.data['DisplayName'] }]);
            });
        }); 
```

为了跟进这一点，还需要放置一个自定义提交处理程序。它循环存储并在同步存储之前将提交的值设置为存储。

```
// define form submit button
    var submitButton = new Ext.widget({
        xtype: 'toolbar',
        dock: 'bottom',
        items:[{
            xtype: 'button',
            text: 'Save',
            handler: function(button) {
                // get basic form for button
                var basic = button.up('form').form;
                // get form submit values
                var formSubmitValues = basic.getValues();
                // get header store
                var store = Ext.StoreMgr.get('HeaderStore');
                // loop through each field store and update the data values by id from the form
                store.each(function(record) {
                    Ext.each(record.ColumnsStore.data.items, function(item) {
                        Ext.each(item.FieldsStore.data.items, function(fields) {
                            fields.data['Data'] = formSubmitValues[fields.data['Id']];
                        });
                    });
                    // mark the record as dirty to be sync
                    record.dirty = true;
                });
                // sync store object with the database
                store.sync();
            }
        }]
    }); 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-10-04T11:12:57.523

看看[这个](http://jsfiddle.net/Izhaki/K7U7V/)和[这个](http://jsfiddle.net/Izhaki/pjBqS/)例子，了解如何将嵌套数据加载到嵌套模型中。您还将看到如何访问相关数据。

我不确定你为什么使用`record.ColumnsStore.data.items`，就好像记录是`HeaderModel`类型一样，你真的应该通过 获取列存储`record.Columns`，然后迭代该存储。

还有助于查看您的服务器返回的 JSON。

# bash - bash，解析文件的一部分

> ID：12723575
> 
> 赞同：0
> 
> 时间：2012-10-04T08:48:46.290
> 
> 标签：bash, parsing

想象一个类似如下的文本文件：

```
Case 4
case 4.1
a 3
a 5
a 7
a 1
a 9
a 4
endcase 4.1
//
.
.
. Do things that dont get parsed
.
.
//
case 4.2
a 1
b 3
a 6
b7 
endcase 4.2
endcase 4
//
.
.
.
. More things
.
.
//
case 5
.
.
.
.
endcase 5 
```

其中包含多个变量在不同时间点的值。例如，案例 4 涉及变量 a 和 b。如何仅提取案例 4.1 和 endcase 4.1 之间的行？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-04T08:59:00.703

要匹配两个模式之间的行，请使用：

```
/case 4\.1/,/endcase 4\.1/ 
```

打印与此模式匹配的行：

```
sed -n '/case 4\.1/,/endcase 4\.1/p' yourfile.txt 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-04T08:57:52.137

您可以使用 awk，例如：

```
awk '/^case 4.1/,/^endcase 4.1/' ./your_file 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-04T11:13:16.050

```
#!/bin/bash
IFS=$'\n';
line="$(cat case.txt)"

for lines in ${line}
do

        if [[ $lines =~ case(.*)$ ]]; then
                caseid=`echo "${BASH_REMATCH[1]}"`
                echo "----> $caseid"
        fi

        if  [[ $lines =~ endcase ]]; then
                caseid="0"
        fi
                if [ "$caseid" != "0" ]; then
                        echo $caseid -- $lines;
                fi

done 
```

这将解析文件并为每种情况打印出值 - 如果您想解析而不是寻找特定情况

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-04T13:30:17.250

如果要打印特定的子案例块：

```
awk -v casenum=4.1 '
  $1 == "case" && $2 == casenum {prnt = 1}
  prnt
  $1 == "endcase" && $2 == casenum {prnt = 0}
' filename 
```

如果要打印所有子案例：

```
awk '
  $1 == "case" && $2 ~ /^[0-9]+\.[0-9]+/ {casenum = $2; prnt = 1}
  prnt
  $1 == "endcase" && $2 == casenum {prnt = 0}
' filename 
```

# c# - 在单元格之间插入空格

> ID：12723577
> 
> 赞同：0
> 
> 时间：2012-10-04T08:48:54.160
> 
> 标签：c#, asp.net

我有以下代码连续插入两个单元格。它工作正常，但是这两个值之间没有任何空格。所以我想弄清楚如何在单元格之间添加几个空格或者只是添加一个斜杠/

```
TableCell tc=new TableCell();
Label lb1= new Label();
lb1.Text=stg1
tc.Controls.Add(price);
tc.Controls.Add(lb1); 
```

我想在同一行的单元格之间插入一些空格或斜线

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-04T08:55:09.250

您可以使用 css 类来执行此操作。然后只需将 CssClass 应用于您的控件：

这是CSS代码：

```
.mySpacer
{
    border: 5px solid transparent;
} 
```

这是c代码：

```
 TableCell tc = new TableCell();
        tc.CssClass = "mySpacer"; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-04T08:53:49.220

尝试添加空格html代码`&nbsp;`

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-04T08:54:28.870

也许您应该将列作为一个整体添加到表中。否则为标签添加填充（以多种方式之一）：

```
label.Padding = new Padding(10);
label.Padding = new Padding(left:10, top:10, right:10, bottom:10);
label.Padding.Left = 10; 
```

# ios - iOS 将标题单元格覆盖在 UITableView 中的另一个单元格上

> ID：12723585
> 
> 赞同：0
> 
> 时间：2012-10-04T08:49:12.510
> 
> 标签：ios, uitableview

我的 UITableView 中有一个自定义标题栏，我想重叠它下面的单元格。有谁知道这是否可能？目前我已经尝试设置滚动，但似乎没有工作有没有人有任何想法？

这是我尝试过的

```
- (NSInteger)numberOfSectionsInTableView:(UITableView *)tableView
{
    return 1;
}

- (NSInteger)tableView:(UITableView *)tableView numberOfRowsInSection:(NSInteger)section
{
    return 10;
}

- (CGFloat)tableView:(UITableView *)tableView heightForRowAtIndexPath:(NSIndexPath *)indexPath
{
    if (indexPath.row == 0) return 200;
    else return 100;
}

- (NSString *)tableView:(UITableView *)tableView titleForHeaderInSection:(NSInteger)section
{
    return @"";
}

- (CGFloat)tableView:(UITableView *)tableView heightForHeaderInSection:(NSInteger)section
{
    return 20;
}

- (UIView *)tableView:(UITableView *)tableView viewForHeaderInSection:(NSInteger)section
{
    UIView *headerView = [[UIView alloc] initWithFrame:CGRectMake(0, 0, 320, 30)];
    headerView.backgroundColor = [UIColor colorWithPatternImage:[UIImage imageNamed:@"hm_pullToRefreshBar.png"]];

    return headerView;
} 
```

**编辑：**我试图使标题高度比我为标题视图设置的 UIView 短 10 像素，但这只是切断图形而不是让它重叠。

# android - 在通过 ActionBar 添加的 Fragment 上调用 addToBackStack()

> ID：12723592
> 
> 赞同：2
> 
> 时间：2012-10-04T08:49:31.877
> 
> 标签：android, android-fragments, android-lifecycle

所以基本上，我有一个简单的 Fragment，它使用 AsyncTask 从 URL 下载位图，然后在 ImageView 中显示它。

这是片段的代码：

```
public class TestFragment extends Fragment {

public TestFragment () {}

private String pictureUrl = "https://fbcdn-sphotos-d-a.akamaihd.net/hphotos-ak-prn1/532762_10150739418088211_1186720820_n.jpg";

private TextView sampleText;
private ImageView sampleImage;

public View onCreateView(LayoutInflater inflater, ViewGroup container, 
        Bundle savedInstanceState) {

    View root = inflater.inflate(R.layout.fragment_view, container, false); 
    String textToSet = "Section Three";

    sampleText = (TextView) root.findViewById(R.id.textView1);
    sampleText.setText(textToSet);

    sampleImage = (ImageView) root.findViewById(R.id.imageView1);
    DownloadImageTask task = new DownloadImageTask(pictureUrl, root, sampleImage.getId());
    task.execute();

    return root;   
}       
} 
```

同一片段显示 3 次，每个选项卡在 ActionBar 内显示一次。我遇到的问题是，每次用户选择不同的选项卡时，前一个选项卡都会被破坏，当用户导航回原始选项卡时，需要重新下载内容。我想确保消耗最少的资源（保存数据和有价值的开销处理）。

这是片段容器活动：

```
public class LayoutContainer extends Activity{

@Override
public void onCreate(Bundle savedInstanceState) {

    super.onCreate(savedInstanceState);
    setContentView(R.layout.activity_layout_container);      

    if (savedInstanceState != null) {
        return;
    }

    final ActionBar actionBar = getActionBar();
    actionBar.setNavigationMode(ActionBar.NAVIGATION_MODE_TABS);

    Tab tab = actionBar.newTab()
            .setText(R.string.title_section1)
            .setTabListener(new TabListener<TestFragment>(
                    this, "one", TestFragment.class));
    actionBar.addTab(tab);

    tab = actionBar.newTab()
            .setText(R.string.title_section2)
            .setTabListener(new TabListener<TestFragment>(
                    this, "two", TestFragment.class));
    actionBar.addTab(tab);

    tab = actionBar.newTab()
            .setText(R.string.title_section3)
            .setTabListener(new TabListener<TestFragment>(
                    this, "three", TestFragment.class));
    actionBar.addTab(tab);

}

public static class TabListener<T extends Fragment> implements ActionBar.TabListener {

    private Fragment mFragment;
    private final Activity mActivity;
    private final String mTag;
    private final Class<T> mClass;

    public TabListener(Activity activity, String tag, Class<T> clz) {
        mActivity = activity;
        mTag = tag;
        mClass = clz;
    }

    public void onTabSelected(Tab tab, FragmentTransaction ft) {
        if (mFragment == null) {
            mFragment = Fragment.instantiate(mActivity, mClass.getName());
        }
        ft.replace(android.R.id.content, mFragment, mTag);
    }

    public void onTabUnselected(Tab tab, FragmentTransaction ft) {
        ft.addToBackStack(null);
        ft.commit();
    }

    public void onTabReselected(Tab tab, FragmentTransaction ft) {
    }
} 
```

我目前已将其设置为在**OnTabSelected()方法上调用****ft.replace()**，但我之前曾尝试使用**ft.add()**。我当前在 OnTabUnselected() 中的**ft.addToBackStack()**调用**也是如此**，我最初将它设置为简单地调用**ft.detach()**但这与我描述为我的问题的事情相同。它以这种方式加载，但每次都必须下载图像。

 ******现在，我尝试调用**addToBackStack()**但应用程序强制关闭，说明 FragmentTransaction 不能添加到后台堆栈。我过去也尝试过离线缓存图像，为了避免数据消耗，应用程序仍然需要从本地 URI 解析图像并使用处理能力。

我可以尝试任何想法吗？

仅供参考，是的，我知道同一个片段在所有三个选项卡上加载同一个图像。这只是一个测试项目，旨在帮助我更好地了解 Fragments 的生命周期。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-05T04:10:40.303

所以经过大量阅读后，我意识到重要的代码块不是在您的 TabListener 上完成，而是实际上在您使用的每个 Fragment 上完成。

离开片段时，片段将被分离，但这并不意味着我不能使用 onSaveInstanceState(...) 保留它的状态。

这是分离后保留 Fragment 状态所需的简单实现。

```
public class TimelineFragment extends ListFragment{
...

public TimelineFragment () {}

public void onSaveInstanceState(Bundle outState){
    getActivity().getFragmentManager().putFragment(outState, TAG, this);        
}

public void onRetoreInstanceState(Bundle inState){
    getActivity().getFragmentManager().getFragment(inState, TAG);
}
...
} 
```

我们通过调用 putFragment() 来保存 Fragment，并通过调用 getFragment() 来恢复它。非常简单，我从来没有想过。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-04T08:56:12.967

当用户需要来自网络的图像时我会做什么我首先检查我是否已缓存它或图像是否在 SD 中。如果在 SD 或缓存中找不到图像，我会下载图像，将其存储到 SD 并将其添加到缓存中。

它通常是这样的：

```
 Bitmap cacheBitmap = Database.getImageFromMemory(exercise.image, getActivity());

    if(cacheBitmap != null) {
        image.setImageBitmap(cacheBitmap);
        progressBar.setVisibility(View.GONE);
    }
    Bitmap localBitmap = ImageDownloader.decodeSampledBitmap(exercise.image, width, height, getActivity());

    if(localBitmap != null) {
        image.setImageBitmap(localBitmap);
        progressBar.setVisibility(View.GONE);
        Database.addBitmapToMemoryCache(exercise.image, localBitmap, getActivity());
    } else {
        ImageDownloader imageDownloader = new ImageDownloader(this.getActivity().getApplicationContext(), image, progressBar, width, height);
        imageDownloader.execute(exercise.image);
    } 
```

现在这不是所有代码，但它让您了解如何处理它。如果您需要更多代码，请随时询问，但您似乎走在了正确的轨道上。******

# iphone - UIScrollView 通知？

> ID：12723593
> 
> 赞同：2
> 
> 时间：2012-10-04T08:49:33.723
> 
> 标签：iphone, objective-c, ios, uiscrollview, notifications

`UIScrollView`更改滚动状态时是否发送任何通知？我想听那个通知而不是使用委托方法。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-04T08:55:55.833

如果您不想使用委托方法，您可以使用 KVO（key-value-observing）观察 contentOffset 值的变化

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-04T08:55:11.703

每次滚动视图滚动时，您都可以继承`UIScrollView`、重载和发送此通知。`touchesMoved:withEvent:`由于滚动需要是轻量级事件，我不建议每次滚动都使用通知，因为它对性能的影响比使用委托方法大得多。

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2012-10-04T08:56:36.733

这些是处理滚动的代表`UIScrollView`。

```
- (void)scrollViewDidScroll:(UIScrollView *)scrollView
- (void)scrollViewWillBeginDecelerating:(UIScrollView *)scrollView
- (void)scrollViewWillBeginDragging:(UIScrollView *)scrollView
- (void)scrollViewWillEndDragging:(UIScrollView *)scrollView withVelocity:(CGPoint)velocity targetContentOffset:(inout CGPoint *)targetContentOffset 
```

您是否有任何特定原因不喜欢代表并想要通知？因此，您可以`scrollViewDidScroll`用于滚动状态的任何更改。

# php - 如何从属性集中获取属性名称列表

> ID：12723597
> 
> 赞同：0
> 
> 时间：2012-10-04T08:49:44.917
> 
> 标签：php, magento

我想从属性集中获取属性名称列表。我知道如何获取属性 ID，但我不知道如何获取名称列表。到目前为止，这是我的代码。

```
<?php
    $entityTypeId = Mage::getModel('eav/entity')->setType('catalog_product')->getTypeId();
    $attributeSetName   = 'Brands'; 
    $attributeSetId     = Mage::getModel('eav/entity_attribute_set')
                        ->getCollection()
                        ->setEntityTypeFilter($entityTypeId)
                        ->addFieldToFilter('attribute_set_name', $attributeSetName)
                        ->getFirstItem()
                        ->getAttributeSetId();
    $attributes = Mage::getModel('catalog/product_attribute_api')->items($attributeSetId);
    foreach($attributes as $_attribute){
        var_dump($_attribute);
    }
?> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-04T10:19:53.750

自己做了一些测试，现在似乎已经做到了，

```
 foreach($attributes as $_attribute){

        $attributeInfo = Mage::getResourceModel('eav/entity_attribute_collection')
            ->setCodeFilter($_attribute['code'])
            ->getFirstItem()->getFrontendLabel();

              echo "<pre>";
              echo $attributeInfo;
       } 
```

# c++ - 指针有复制构造函数吗？

> ID：12723605
> 
> 赞同：0
> 
> 时间：2012-10-04T08:50:26.930
> 
> 标签：c++, pointers, smart-pointers

我正在从 C 指针过渡到 C++ 指针，现在正在学习 auto_ptr。这是我尝试过的程序：

```
#include <iostream>
#include <memory>
#include "Car.h"
using namespace std;
typedef auto_ptr<Car> CarPtr;
int main() {
    CarPtr au_ptr1(new Car());
    CarPtr au_ptr2 = new Car();
    Car *norm_ptr1 = new Car();
    Car *norm_ptr2(new Car());
    int *i_ptr1=new int();
    int *i_ptr2(new int());
} 
```

像下面这样的陈述是什么意思？

```
int *i_ptr2(new int());
Car *norm_ptr2(new Car()); 
```

上面提到的语句编译成功。而下面的语句则抛出编译错误 -`CarPtr au_ptr2 = new Car();` 为什么会这样？

提前致谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-04T08:51:41.037

它确实有一个复制构造函数，**但转换构造函数是显式的**，这就是导致错误的原因：

```
explicit auto_ptr (X* p=0) throw(); 
```

这意味着 a`Car*`不能隐式转换为 a `auto_ptr<Car>`，这就是

```
CarPtr au_ptr2 = new Car(); 
```

尝试做。这称为**复制初始化**，而不是：

```
CarPtr au_ptr1 (new Car()); 
```

这是**值初始化**。第一个版本将尝试`CarPtr`从 a创建一个临时文件`Car*`并使用它来初始化`au_ptr2`. 第二个直接调用复制构造函数。

像这样的陈述

```
int *i_ptr2(new int()); 
```

只需使用括号中的值对指针进行值初始化。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-04T09:14:25.613

原始指针没有构造函数，但在大多数情况下，它们可以像有构造函数一样使用。内置类型都可以从可转换为其类型的任何类型的值初始化，就像具有复制构造函数的用户定义类一样。

```
int *i_ptr1=new int();
int *i_ptr2(new int()); 
```

意思相同。

我认为这样做的原因基本上是模板：这意味着您可以像使用`T`用户定义的类型一样使用类型，并编写`T t(0);`or `T(0)`or `T()`，当`T`恰好是内置类型时，含义与`T t = 0;`或`(T)0`或`(T)0`（再次）。实际上，根据定义，无论构造函数具有什么含义，其含义*都是*相同的`T(0)`，但是告诉您不要在 C++ 代码中使用 C 样式强制转换的人试图忽略这个事实 ;-)*`(T)0``T`*

 *`auto_ptr`实际上确实有一个复制构造函数，但与大多数复制ctor不同，它需要一个非常量参数，并修改其参数。这就是为什么在 C++11 中它被弃用而支持`unique_ptr`，它没有复制构造函数，但有一个移动构造函数。

正如 Luchian 所说，问题`CarPtr au_ptr2 = new Car();`不在于（只是）复制构造函数，还在于缺少从`new Car();`, `Car*`, 到的类型的隐式转换`auto_ptr<Car>`。复制初始化尝试将 RHS 隐式转换为 LHS 的类型，然后将其复制到 LHS。在这个例子中，这两个都失败了。直接初始化允许使用显式转换，不需要副本，所以成功。

内置类型不像具有构造函数那样表现的一种方式是默认初始化。你可以写：

```
int i = int(); 
```

并`i`保证初始化为零。所以你可能会想象它有一个无参数的构造函数将它设置为零。但是，如果`int`真的是具有该构造函数的类类型，则编写：

```
int i; 
```

也将保证`i`为零，并且不会（至少，不在函数范围内）。

顺便说一句，不要对这一切太兴奋而意外调用所谓的“最令人头疼的解析”。

```
int i(); 
```

等于`int i(void);`，不是`int i(0);`。它声明了一个函数，而不是一个整数变量。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-04T08:55:00.380

通常，对象具有复制构造函数，而指针不是对象，因此它们没有复制构造函数（或赋值运算符或析构函数）。更准确地说，指针依赖于默认的复制机制。

当您谈论`auto_ptr`或任何其他智能指针时，它们只是指针同名。但实际上它们是使用 RAII 机制的**模板化对象。**

```
CarPtr au_ptr2 = new Car();  // this is initialization not assignment 
```

给出编译错误，因为相应`CarPtr::CarPtr(...)`的构造函数被制作`explicit`，所以它不接受`=`样式初始化。*

# facebook-graph-api - Facebook。如何按条件限制 GraphApi 响应

> ID：12723607
> 
> 赞同：1
> 
> 时间：2012-10-04T08:50:32.443
> 
> 标签：facebook-graph-api, facebook-fql

如何将 IPA 响应限制为特定条件。例如，我想获取用户墙上所有属于视频的帖子（“类型”：“视频”）？

在 FQL 中是 WHERE 限制，但我没有找到，因为那里是从用户的墙上获取所有帖子？这只能通过 GRAPHAPI 实现？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-04T12:50:49.657

要使用 FQL 在用户墙上获取帖子，请使用该`stream`表。尝试[文档页面上的](https://developers.facebook.com/docs/reference/fql/stream/)第一个示例查询。`AND type = 128`您可以通过添加到 WHERE 子句来过滤视频。

要使用 Graph API 执行此操作，您可以在 Video 对象上使用[字段扩展。](https://developers.facebook.com/docs/reference/api/field_expansion/)

# javascript - 引用 JavaScript 中的下拉列表名称时，Chrome 和 Safari 中未捕获的 TypeError

> ID：12723614
> 
> 赞同：0
> 
> 时间：2012-10-04T08:50:59.810
> 
> 标签：javascript, jquery

以下代码似乎仅适用于 IE。在 Chrome 或 Safari 中，我收到以下错误：

我在 Chrome 中遇到的控制台错误是：

> 未捕获的类型错误：对象# 的属性“选择文本”不是函数

这是代码：

```
function LoadPageText(){
document.location.href = "editpage.asp?file="+document.form.file.value+"&text="+document.form['choosetext'](document.form['choosetext'].selectedIndex).value;
} 
```

如何解决 Safari 和 Chrome 的此错误？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-04T08:54:14.533

尝试使用元素 id 访问值

```
document.getElementById('ElementId').value 
```

对于下拉列表

```
document.getElementById('dropdownId').selectedIndex 
```

获取选定的索引

# shell - 如何获取3个目录中的文件总数？

> ID：12723623
> 
> 赞同：0
> 
> 时间：2012-10-04T08:51:47.463
> 
> 标签：shell

如何编写一个单行命令行调用来计算目录 /usr/bin、/bin 和 /usr/doc 中的文件总数？

到目前为止，我能想到的是使用

`cd /usr/bin&&ls -l | wc -l`

但我不知道如何将它们加在一起，例如：

`(cd /usr/bin&&ls -l | wc -l) + (cd /bin&&ls -l | wc -l)`

也许有更好的方法来做到这一点，比如获取每个目录的所有标准输出，然后通过管道传输到`wc -l`

任何想法？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-04T08:58:54.410

使用 find 命令 + wc -l 怎么样？

```
find /usr/bin /bin /usr/doc -type f |wc -l 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-04T13:23:08.927

假设 bash 或类似功能的 shell，您可以使用数组：

```
files=(/usr/bin/* /bin/* /usr/doc*)
num=${#files[@]} 
```

此技术将正确处理包含换行符的文件名。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-04T09:17:07.847

将 ls 用于多个目录并与 wc 结合使用会更简洁一些：

```
ls /usr/bin /bin /usr/doc | wc -l 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-04T10:24:04.473

正如 Kent 指出的那样， find 可能是首选，因为它会忽略目录条目。如果您需要符号链接，请对其进行调整。

除非您想递归到其中的任何意外目录，否则需要 -maxdepth（如果您的 find 支持）。如果由于某种奇怪的原因不存在目录，也会丢弃 stderr。

```
查找 /usr/bin /bin /usr/doc -maxdepth 1 -type f 2>/dev/null | wc -l
```

# maven - .class 文件中的错误版本号

> ID：12723630
> 
> 赞同：2
> 
> 时间：2012-10-04T08:52:05.473
> 
> 标签：maven, jetty, jdk1.5, unsupported-class-version

我正在尝试使用 Maven 在本地 Jetty 中部署 webapp。

我在命令行中的 Java 版本是

```
java version "1.5.0_22"
Java(TM) 2 Runtime Environment, Standard Edition (build 1.5.0_22-b03)
Java HotSpot(TM) Client VM (build 1.5.0_22-b03, mixed mode, sharing) 
```

在 Eclipse 中，我的项目的 JDK 合规性设置为“在构建路径上使用执行环境 J2SE-1.5 的合规性”，这也是 JDK1.5.0_22。

无论我尝试从哪里运行它，无论是命令行`mvn jetty:run`还是 Eclipse 配置这样的 VM

![在此处输入图像描述](../Images/1ec53296aed50b7f552c0e7ead1117cd.png)

我得到同样的错误。

```
 Listening for transport dt_socket at address: 4000
        [INFO] Scanning for projects...
        [WARNING] 
        [WARNING] Some problems were encountered while building the effective model for org.ow2.frascati.examples:frascati-gae:war:1.5-SNAPSHOT
        [WARNING] 'dependencies.dependency.(groupId:artifactId:type:classifier)' must be unique: com.sun.xml.bind:jaxb-impl:jar -> version 2.1.13 vs 2.1.12 @ line 103, column 17
        [WARNING] 'build.plugins.plugin.version' for org.apache.maven.plugins:maven-compiler-plugin is missing. @ org.ow2.frascati.examples:parent:1.5-SNAPSHOT, C:\WorkSpace\FrascatiTrunk\examples\pom.xml, line 93, column 15
        [WARNING] 'build.plugins.plugin.version' for com.google.code.maven-replacer-plugin:maven-replacer-plugin is missing. @ org.ow2.frascati.examples:frascati-in-the-cloud:1.5-SNAPSHOT, C:\WorkSpace\FrascatiTrunk\examples\frascati-in-the-cloud\pom.xml, line 462, column 15
        [WARNING] 
        [WARNING] It is highly recommended to fix these problems because they threaten the stability of your build.
        [WARNING] 
        [WARNING] For this reason, future Maven versions might no longer support building such malformed projects.
        [WARNING] 
        [INFO]                                                                         
        [INFO] ------------------------------------------------------------------------
        [INFO] Building OW2 FraSCAti in Google App Engine 1.5-SNAPSHOT
        [INFO] ------------------------------------------------------------------------
        [INFO] 
        [INFO] >>> maven-jetty-plugin:6.1.26:run (default-cli) @ frascati-gae >>>
        [INFO] 
        [INFO] --- maven-resources-plugin:2.5:resources (default-resources) @ frascati-gae ---
        [debug] execute contextualize
        [INFO] Using 'UTF-8' encoding to copy filtered resources.
        [INFO] skip non existing resourceDirectory C:\WorkSpace\FrascatiTrunk\examples\frascati-in-the-cloud\Google App Engine\src\main\resources
        [INFO] 
        [INFO] --- maven-compiler-plugin:2.3.2:compile (default-compile) @ frascati-gae ---
        [INFO] Nothing to compile - all classes are up to date
        [INFO] 
        [INFO] --- maven-resources-plugin:2.5:testResources (default-testResources) @ frascati-gae ---
        [debug] execute contextualize
        [INFO] Using 'UTF-8' encoding to copy filtered resources.
        [INFO] skip non existing resourceDirectory C:\WorkSpace\FrascatiTrunk\examples\frascati-in-the-cloud\Google App Engine\src\test\resources
        [INFO] 
        [INFO] --- maven-compiler-plugin:2.3.2:testCompile (default-testCompile) @ frascati-gae ---
        [INFO] Nothing to compile - all classes are up to date
        [INFO] 
        [INFO] <<< maven-jetty-plugin:6.1.26:run (default-cli) @ frascati-gae <<<
        [INFO] 
        [INFO] --- maven-jetty-plugin:6.1.26:run (default-cli) @ frascati-gae ---
        [INFO] Configuring Jetty for project: OW2 FraSCAti in Google App Engine
        [INFO] Webapp source directory = C:\WorkSpace\FrascatiTrunk\examples\frascati-in-the-cloud\Google App Engine\target\webapp
        [INFO] Reload Mechanic: automatic
        [INFO] Classes = C:\WorkSpace\FrascatiTrunk\examples\frascati-in-the-cloud\Google App Engine\target\classes
        2012-10-04 10:25:26.688:INFO::Logging to STDERR via org.mortbay.log.StdErrLog
        [INFO] Context path = /frascati-gae
        [INFO] Tmp directory =  determined at runtime
        [INFO] Web defaults = org/mortbay/jetty/webapp/webdefault.xml
        [INFO] Web overrides =  none
        [INFO] web.xml file = C:\WorkSpace\FrascatiTrunk\examples\frascati-in-the-cloud\Google App Engine\target\webapp\WEB-INF\web.xml
        [INFO] Webapp directory = C:\WorkSpace\FrascatiTrunk\examples\frascati-in-the-cloud\Google App Engine\target\webapp
        [INFO] Starting jetty 6.1.26 ...
        2012-10-04 10:25:26.770:INFO::jetty-6.1.26
        2012-10-04 10:25:27.070:WARN::Failed startup of context org.mortbay.jetty.plugin.Jetty6PluginWebAppContext@f553e3{/frascati-gae,C:\WorkSpace\FrascatiTrunk\examples\frascati-in-the-cloud\Google App Engine\target\webapp}
        java.lang.reflect.InvocationTargetException
            at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
            at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:39)
            at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:25)
            at java.lang.reflect.Method.invoke(Method.java:592)
            at org.mortbay.jetty.plugin.Jetty6MavenConfiguration.parseAnnotations(Jetty6MavenConfiguration.java:142)

.
.
.

java.lang.UnsupportedClassVersionError: Bad version number in .class file
            at java.lang.ClassLoader.defineClass1(Native Method)
            at java.lang.ClassLoader.defineClass(ClassLoader.java:621)
            at java.security.SecureClassLoader.defineClass(SecureClassLoader.java:124)
            at java.net.URLClassLoader.defineClass(URLClassLoader.java:260)
            at java.net.URLClassLoader.access$100(URLClassLoader.java:56)
            at java.net.URLClassLoader$1.run(URLClassLoader.java:195)
            at java.security.AccessController.doPrivileged(Native Method)
            at java.net.URLClassLoader.findClass(URLClassLoader.java:188)

.
.
.

        [INFO] Started Jetty Server
        2012-10-04 10:25:27.156:INFO::Started SelectChannelConnector@0.0.0.0:8080
        [INFO] Starting scanner at interval of 10 seconds. 
```

我很困惑

```
java.lang.UnsupportedClassVersionError: Bad version number in .class file 
```

因为自从我更改为 J2SE-1.5 以来我一直得到这个，因为项目要求是这样指定的。

我什至删除了我的整个 m2repo 并让 Maven 重新下载了所有内容。

我对这种错误的组合有点迷失了。任何人都可以对此有所了解吗？

**编辑：**

如果我将我的 Java 版本更改为 JDK-1.6，它可以“正常”工作（不同的不相关错误）。

但为什么？如果项目要求是 Java 1.5，它不应该工作吗？
此外，不应该 Maven 下载的所有存储库都与 1.5 兼容，因为它们是在部署之前编译的？

**编辑2：（**关于@Kal的评论）

我的项目是主干线的子项目示例。为了编译它，我在我的示例项目的 POM 上运行 Maven，这取决于以前的 POM。在其父 POM 的示例目录中，有：

```
 <!-- Compile with Java 1.5 -->
        <plugin>
          <groupId>org.apache.maven.plugins</groupId>
          <artifactId>maven-compiler-plugin</artifactId>
          <configuration>
            <source>1.5</source>
            <target>1.5</target>
          </configuration>
        </plugin> 
```

**编辑 3：**

这是我的依赖树：

```
[INFO] org.ow2.frascati.examples:frascati-gae:war:1.5-SNAPSHOT
[INFO] +- com.sun.xml.bind:jaxb-impl:jar:2.1.12:runtime (scope not updated to co
mpile)
[INFO] +- org.ow2.frascati.examples:fibonacci:jar:1.5-SNAPSHOT:compile
[INFO] |  +- org.ow2.frascati:frascati-binding-rest:jar:1.5-SNAPSHOT:compile
[INFO] |  |  +- org.ow2.frascati:frascati-metamodel-frascati:jar:1.5-SNAPSHOT:co
mpile
[INFO] |  |  |  \- org.ow2.frascati.model:frascati-model:jar:2.0.1.3:compile
[INFO] |  |  |     \- org.ow2.frascati.model:sca-model:jar:2.0.1.3:compile
[INFO] |  |  |        +- org.eclipse.emf:ecore:jar:2.4.0:compile
[INFO] |  |  |        |  \- org.eclipse.core:runtime:jar:3.4.0:compile
[INFO] |  |  |        |     \- org.eclipse.equinox:common:jar:3.4.0:compile
[INFO] |  |  |        +- org.eclipse.emf.ecore:xmi:jar:2.4.0:compile
[INFO] |  |  |        \- org.eclipse.emf:common:jar:2.4.0:compile
[INFO] |  |  +- org.ow2.frascati:frascati-binding-factory:jar:1.5-SNAPSHOT:compi
le
[INFO] |  |  |  +- org.ow2.fractal.bf.connectors:fractal-bf-connectors-common:ja
r:0.10-SNAPSHOT:compile
[INFO] |  |  |  |  \- org.ow2.fractal.bf:fractal-bf-core:jar:0.10-SNAPSHOT:compi
le
[INFO] |  |  |  +- org.objectweb.fractal.fractaladl:fractal-adl:jar:2.3.1:compil
e
[INFO] |  |  |  |  +- org.objectweb.fractal.fractaladl:ast-core:jar:2.3.1:compil
e
[INFO] |  |  |  |  |  \- dtdparser:dtdparser:jar:1.21:compile
[INFO] |  |  |  |  +- org.objectweb.fractal.fractaladl:task-framework:jar:2.3.1:
compile
[INFO] |  |  |  |  \- org.objectweb.fractal.fractaladl:task-deployment:jar:2.3.1
:compile
[INFO] |  |  |  \- org.objectweb.fractal:fractal-util:jar:1.1.2:compile
[INFO] |  |  \- org.ow2.fractal.bf.connectors:fractal-bf-connectors-rest-cxf:jar
:0.10-SNAPSHOT:compile
[INFO] |  |     +- javax.ws.rs:jsr311-api:jar:1.1.1:compile
[INFO] |  |     \- org.apache.cxf:cxf-rt-frontend-jaxrs:jar:2.5.4:compile
[INFO] |  |        +- org.apache.cxf:cxf-rt-bindings-xml:jar:2.5.4:compile
[INFO] |  |        \- org.codehaus.jettison:jettison:jar:1.3.1:compile
[INFO] |  \- org.ow2.frascati:frascati-binding-ws:jar:1.5-SNAPSHOT:compile
[INFO] |     \- org.ow2.fractal.bf.connectors:fractal-bf-connectors-soap-cxf:jar
:0.10-SNAPSHOT:compile
[INFO] |        +- org.apache.cxf:cxf-rt-frontend-simple:jar:2.5.4:compile
[INFO] |        |  \- org.apache.cxf:cxf-rt-bindings-soap:jar:2.5.4:compile
[INFO] |        |     \- org.apache.cxf:cxf-rt-databinding-jaxb:jar:2.5.4:compil
e
[INFO] |        +- org.apache.cxf:cxf-rt-databinding-aegis:jar:2.5.4:compile
[INFO] |        +- org.apache.cxf:cxf-rt-frontend-jaxws:jar:2.5.4:compile
[INFO] |        |  \- org.apache.cxf:cxf-rt-ws-addr:jar:2.5.4:compile
[INFO] |        \- wsdl4j:wsdl4j:jar:1.6.2:compile
[INFO] +- org.ow2.frascati.examples:isbntest:jar:1.5-SNAPSHOT:compile
[INFO] |  \- org.ow2.frascati:frascati-interface-wsdl:jar:1.5-SNAPSHOT:compile
[INFO] |     \- org.jvnet.jaxb2_commons:jaxb2-basics:jar:0.5.0:compile
[INFO] |        +- org.jvnet.jaxb2_commons:jaxb2-basics-runtime:jar:0.5.0:compil
e
[INFO] |        \- org.jvnet.jaxb2_commons:jaxb2-basics-tools:jar:0.5.0:compile
[INFO] +- org.ow2.frascati.examples:ohloh-proxy-standalone:jar:1.5-SNAPSHOT:comp
ile
[INFO] +- org.ow2.frascati.examples:verifymail:jar:1.5-SNAPSHOT:compile
[INFO] +- org.ow2.frascati.examples:weather:jar:1.5-SNAPSHOT:compile
[INFO] +- org.ow2.frascati.examples:weather-mock:jar:1.5-SNAPSHOT:compile
[INFO] +- org.ow2.frascati:frascati-servlet-cxf:jar:1.5-SNAPSHOT:compile
[INFO] |  +- org.ow2.frascati:frascati-assembly-factory:jar:1.5-SNAPSHOT:compile

[INFO] |  |  +- org.ow2.frascati:frascati-sca-parser:jar:1.5-SNAPSHOT:compile
[INFO] |  |  |  +- org.ow2.frascati:frascati-util:jar:1.5-SNAPSHOT:compile
[INFO] |  |  |  +- org.ow2.frascati.tinfi:frascati-tinfi-membranes-oo:jar:1.4.4:
compile
[INFO] |  |  |  |  \- org.ow2.frascati.tinfi:frascati-tinfi-runtime:jar:1.4.4:co
mpile
[INFO] |  |  |  |     +- org.objectweb.fractal.juliac:juliac-runtime:jar:2.4:com
pile
[INFO] |  |  |  |     +- org.ow2.frascati.tinfi:frascati-tinfi-runtime-api:jar:1
.4.4:compile
[INFO] |  |  |  |     +- org.oasis-open.sca.j:sca-caa-apis:jar:1.1-CD04:compile
[INFO] |  |  |  |     +- org.eclipse.stp.sca.osoa.java:osoa-java-api:jar:2.0.1.2
:compile
[INFO] |  |  |  |     \- org.objectweb.fractal.fraclet.java:fraclet-annotations:
jar:3.3:compile
[INFO] |  |  |  \- org.ow2.frascati.model:sca-model-introspection:jar:2.0.1.3:co
mpile
[INFO] |  |  \- org.ow2.frascati:frascati-component-factory-tinfi-oo:jar:1.5-SNA
PSHOT:compile
[INFO] |  |     \- org.ow2.frascati:frascati-component-factory:jar:1.5-SNAPSHOT:
compile
[INFO] |  +- org.apache.cxf:cxf-rt-transports-http:jar:2.5.4:compile
[INFO] |  |  +- org.apache.cxf:cxf-api:jar:2.4.2:compile
[INFO] |  |  |  +- org.apache.ws.xmlschema:xmlschema-core:jar:2.0:compile
[INFO] |  |  |  \- org.apache.neethi:neethi:jar:3.0.2:compile
[INFO] |  |  +- org.apache.cxf:cxf-rt-transports-common:jar:2.5.4:compile
[INFO] |  |  \- org.apache.cxf:cxf-rt-core:jar:2.4.2:compile
[INFO] |  \- org.apache.cxf:cxf-rt-transports-http-jetty:jar:2.5.4:compile
[INFO] |     +- org.eclipse.jetty:jetty-server:jar:7.4.5.v20110725:compile
[INFO] |     \- org.apache.geronimo.specs:geronimo-servlet_2.5_spec:jar:1.1.2:co
mpile
[INFO] +- org.ow2.frascati:frascati-web-explorer:jar:1.5-SNAPSHOT:compile
[INFO] |  +- org.ow2.frascati:frascati-binding-http:jar:1.5-SNAPSHOT:compile
[INFO] |  |  \- org.ow2.frascati:frascati-metamodel-tuscany:jar:1.5-SNAPSHOT:com
pile
[INFO] |  |     \- org.ow2.frascati.model:tuscany-model:jar:2.0.1.3:compile
[INFO] |  +- com.sun.jersey:jersey-client:jar:1.8:compile
[INFO] |  |  \- com.sun.jersey:jersey-core:jar:1.8:compile
[INFO] |  +- org.ow2.frascati:frascati-web-explorer-bootstrap:jar:1.5-SNAPSHOT:c
ompile
[INFO] |  |  +- org.ow2.frascati:frascati-implementation-velocity:jar:1.5-SNAPSH
OT:compile
[INFO] |  |  |  \- org.ow2.frascati:frascati-metamodel-web:jar:1.5-SNAPSHOT:comp
ile
[INFO] |  |  +- org.ow2.frascati:frascati-implementation-fractal:jar:1.5-SNAPSHO
T:compile
[INFO] |  |  |  +- org.objectweb.fractal.julia:julia-asm:jar:2.5.2:compile
[INFO] |  |  |  |  \- asm:asm:jar:3.1:compile
[INFO] |  |  |  \- org.objectweb.fractal.julia:julia-mixins:jar:2.5.2:compile
[INFO] |  |  \- org.ow2.frascati:frascati-component-factory-julia:jar:1.5-SNAPSH
OT:compile
[INFO] |  |     \- org.objectweb.fractal.julia:julia-runtime:jar:2.5.2:compile
[INFO] |  +- org.ow2.frascati:frascati-introspection-impl:jar:1.5-SNAPSHOT:compi
le
[INFO] |  |  +- org.ow2.frascati:frascati-bootstrap-jdt-rest:jar:1.5-SNAPSHOT:co
mpile
[INFO] |  |  +- org.ow2.frascati:frascati-binding-jsonrpc:jar:1.5-SNAPSHOT:compi
le
[INFO] |  |  |  \- org.ow2.fractal.bf.connectors:fractal-bf-connectors-json-rpc:
jar:0.10-SNAPSHOT:compile
[INFO] |  |  +- org.ow2.frascati.upnp:frascati-binding-upnp:jar:1.5-SNAPSHOT:com
pile
[INFO] |  |  |  +- org.ow2.frascati.upnp:frascati-metamodel-upnp:jar:1.5-SNAPSHO
T:compile
[INFO] |  |  |  +- org.ow2.fractal.bf.connectors:fractal-bf-connectors-upnp:jar:
0.10-SNAPSHOT:compile
[INFO] |  |  |  |  +- org.ow2.fractal.bf.binjiu.runtime:controlpoint:jar:0.2-SNA
PSHOT:compile
[INFO] |  |  |  |  |  +- org.ow2.fractal.bf.binjiu.description:model:jar:0.2-SNA
PSHOT:compile
[INFO] |  |  |  |  |  \- org.cybergarage.cyberlink:upnp-stack:jar:1.7.0:compile
[INFO] |  |  |  |  |     \- net.sf.kxml:kxml2:jar:2.1.8:compile
[INFO] |  |  |  |  +- org.ow2.fractal.bf.binjiu.runtime:device:jar:0.2-SNAPSHOT:
compile
[INFO] |  |  |  |  |  \- org.ow2.fractal.bf.binjiu.description:upnp2java:jar:0.2
-SNAPSHOT:compile
[INFO] |  |  |  |  \- org.ow2.fractal.bf.binjiu.description:java2upnp:jar:0.2-SN
APSHOT:compile
[INFO] |  |  |  \- xerces:xercesImpl:jar:2.9.1:compile
[INFO] |  |  |     \- xml-apis:xml-apis:jar:1.3.04:compile
[INFO] |  |  +- org.ow2.frascati.gcs:frascati-binding-jgroups:jar:1.5-SNAPSHOT:c
ompile
[INFO] |  |  |  +- org.ow2.frascati.gcs:frascati-metamodel-gcs:jar:1.5-SNAPSHOT:
compile
[INFO] |  |  |  \- org.jgroups:jgroups:jar:2.12.1.Final:compile
[INFO] |  |  +- org.ow2.frascati:frascati-binding-jms:jar:1.5-SNAPSHOT:compile
[INFO] |  |  |  +- org.ow2.frascati:frascati-util-xml:jar:1.5-SNAPSHOT:compile
[INFO] |  |  |  |  \- org.jdom:jdom:jar:1.1:compile
[INFO] |  |  |  +- org.objectweb.joram:joram-client-jms:jar:5.5.0:compile
[INFO] |  |  |  |  +- org.apache.geronimo.specs:geronimo-jms_1.1_spec:jar:1.1.1:
compile
[INFO] |  |  |  |  +- org.objectweb.joram:joram-shared:jar:5.5.0:compile
[INFO] |  |  |  |  |  \- org.objectweb.joram:jcup:jar:5.3.1:compile
[INFO] |  |  |  |  \- soap:soap:jar:2.3:compile
[INFO] |  |  |  +- org.objectweb.joram:jndi-client:jar:5.5.0:compile
[INFO] |  |  |  |  \- org.objectweb.joram:jndi-shared:jar:5.5.0:compile
[INFO] |  |  |  |     \- org.objectweb.joram:a3-common:jar:5.5.0:compile
[INFO] |  |  |  |        +- org.ow2.jonas.osgi:monolog:jar:5.1.1:compile
[INFO] |  |  |  |        \- org.osgi:org.osgi:jar:3.0.0:compile
[INFO] |  |  |  +- org.objectweb.joram:jndi-server:jar:5.5.0:compile
[INFO] |  |  |  |  \- org.objectweb.joram:a3-rt:jar:5.5.0:compile
[INFO] |  |  |  |     +- commons-dbcp:commons-dbcp:jar:1.2.2:compile
[INFO] |  |  |  |     |  \- commons-pool:commons-pool:jar:1.3:compile
[INFO] |  |  |  |     \- mysql:mysql-connector-java:jar:5.1.6:compile
[INFO] |  |  |  \- org.objectweb.joram:joram-mom-core:jar:5.5.0:compile
[INFO] |  |  +- org.ow2.frascati.native:frascati-binding-jna:jar:1.5-SNAPSHOT:co
mpile
[INFO] |  |  |  +- org.ow2.frascati.native:frascati-metamodel-native:jar:1.5-SNA
PSHOT:compile
[INFO] |  |  |  \- net.java.dev.jna:jna:jar:3.2.5:compile
[INFO] |  |  +- org.ow2.frascati:frascati-binding-rmi:jar:1.5-SNAPSHOT:compile
[INFO] |  |  |  \- org.ow2.fractal.bf.connectors:fractal-bf-connectors-rmi:jar:0
.10-SNAPSHOT:compile
[INFO] |  |  +- org.ow2.frascati:frascati-introspection-api:jar:1.5-SNAPSHOT:com
pile
[INFO] |  |  |  +- org.ow2.frascati.model:osoa-java-api:jar:2.0.1.3:compile
[INFO] |  |  |  \- org.objectweb.fractal:fractal-api:jar:2.0.2:compile
[INFO] |  |  \- org.apache.cxf:cxf-common-utilities:jar:2.4.2:compile
[INFO] |  |     \- org.codehaus.woodstox:woodstox-core-asl:jar:4.1.2:runtime
[INFO] |  |        \- org.codehaus.woodstox:stax2-api:jar:3.1.1:runtime
[INFO] |  +- commons-fileupload:commons-fileupload:jar:1.2.1:compile
[INFO] |  \- commons-io:commons-io:jar:1.3:compile
[INFO] +- org.apache.velocity:velocity:jar:1.7:compile
[INFO] |  +- commons-collections:commons-collections:jar:3.2.1:compile
[INFO] |  \- commons-lang:commons-lang:jar:2.4:compile
[INFO] +- javax.servlet:servlet-api:jar:2.5:provided (scope not updated to compi
le)
[INFO] +- org.mortbay.jetty:servlet-api:jar:2.5-20081211:provided (scope not upd
ated to compile)
[INFO] +- org.apache.geronimo.specs:geronimo-servlet_3.0_spec:jar:1.0:provided
[INFO] +- org.springframework:spring-web:jar:3.0.5.RELEASE:provided (scope not u
pdated to compile)
[INFO] |  +- org.springframework:spring-beans:jar:3.0.5.RELEASE:provided
[INFO] |  +- org.springframework:spring-context:jar:3.0.5.RELEASE:provided
[INFO] |  |  +- org.springframework:spring-aop:jar:3.0.5.RELEASE:provided
[INFO] |  |  +- org.springframework:spring-expression:jar:3.0.5.RELEASE:provided

[INFO] |  |  \- org.springframework:spring-asm:jar:3.0.5.RELEASE:provided
[INFO] |  \- org.springframework:spring-core:jar:3.0.5.RELEASE:provided
[INFO] +- aopalliance:aopalliance:jar:1.0:runtime
[INFO] +- org.mortbay.jetty:jetty:jar:6.1.16:provided (scope not updated to comp
ile)
[INFO] |  \- org.mortbay.jetty:jetty-util:jar:6.1.16:provided
[INFO] +- org.eclipse.jetty:jetty-util:jar:7.4.5.v20110725:runtime (scope not up
dated to compile)
[INFO] +- org.eclipse.jetty:jetty-continuation:jar:7.4.5.v20110725:provided (sco
pe not updated to compile)
[INFO] +- org.eclipse.jetty:jetty-http:jar:7.4.5.v20110725:provided (scope not u
pdated to compile)
[INFO] |  \- org.eclipse.jetty:jetty-io:jar:7.4.5.v20110725:provided
[INFO] +- org.eclipse.jetty:jetty-security:jar:7.4.5.v20110725:provided (scope n
ot updated to compile)
[INFO] +- org.objectweb.monolog:monolog-api:jar:1.8:provided (scope not updated
to compile)
[INFO] +- org.objectweb.monolog:monolog:jar:1.8:provided (scope not updated to c
ompile)
[INFO] +- com.sun.xml.bind:jaxb-xjc:jar:2.1.13:provided (scope not updated to ru
ntime)
[INFO] +- org.apache.geronimo.specs:geronimo-javamail_1.4_spec:jar:1.7.1:provide
d (scope not updated to compile)
[INFO] +- org.jabsorb:jabsorb:jar:1.3.1:provided (scope not updated to compile)
[INFO] +- org.slf4j:slf4j-api:jar:1.5.0:provided (scope not updated to compile)
[INFO] +- org.slf4j:slf4j-jdk14:jar:1.5.0:provided (scope not updated to compile
)
[INFO] +- org.jvnet.jaxb2_commons:runtime:jar:0.4.1.5:provided (scope not update
d to compile)
[INFO] +- commons-beanutils:commons-beanutils:jar:1.7.0:provided (scope not upda
ted to compile)
[INFO] +- commons-logging:commons-logging:jar:1.0.3:provided (scope not updated
to compile)
[INFO] +- org.apache.cxf:cxf-tools-wsdlto-core:jar:2.4.2:provided (scope not upd
ated to compile)
[INFO] |  \- org.apache.cxf:cxf-tools-validator:jar:2.4.2:provided
[INFO] +- org.apache.cxf:cxf-tools-common:jar:2.4.2:runtime
[INFO] +- org.apache.cxf:cxf-tools-wsdlto-frontend-jaxws:jar:2.4.2:provided (sco
pe not updated to compile)
[INFO] |  \- xml-resolver:xml-resolver:jar:1.2:provided
[INFO] +- org.apache.cxf:cxf-tools-wsdlto-databinding-jaxb:jar:2.4.2:provided (s
cope not updated to compile)
[INFO] +- org.eclipse:osgi:jar:3.4.0:provided
[INFO] +- org.eclipse.core:jobs:jar:3.4.0:provided
[INFO] +- asm:asm-util:jar:3.1:provided (scope not updated to compile)
[INFO] |  \- asm:asm-tree:jar:3.1:provided
[INFO] +- asm:asm-analysis:jar:3.1:provided (scope not updated to compile)
[INFO] +- javax.activation:activation:jar:1.1:provided (scope not updated to run
time)
[INFO] +- javax.annotation:jsr250-api:jar:1.0:provided (scope not updated to com
pile)
[INFO] +- javax.script:script-api:jar:1.0:provided
[INFO] +- javax.xml.bind:jaxb-api:jar:2.1:provided (scope not updated to runtime
)
[INFO] +- javax.xml.stream:stax-api:jar:1.0-2:provided (scope not updated to com
pile)
[INFO] +- org.ow2.frascati:frascati-runtime-factory:jar:1.5-SNAPSHOT:provided (s
cope not updated to compile)
[INFO] |  +- org.ow2.frascati:frascati-component-factory-juliac-jdt:jar:1.5-SNAP
SHOT:provided
[INFO] |  |  +- org.ow2.frascati:frascati-component-factory-juliac:jar:1.5-SNAPS
HOT:provided
[INFO] |  |  |  \- org.objectweb.fractal.juliac:juliac-core:jar:2.4.3:provided
[INFO] |  |  |     \- com.google.guava:guava:jar:r07:provided
[INFO] |  |  \- org.objectweb.fractal.juliac:juliac-jdt:jar:2.4.3:provided
[INFO] |  |     \- org.eclipse.jdt:core:jar:3.3.0.771:provided
[INFO] |  \- org.ow2.frascati:frascati-component-factory-juliac-tinfi-oo:jar:1.5
-SNAPSHOT:provided
[INFO] |     \- org.ow2.frascati.tinfi:frascati-tinfi-oo:jar:1.4.4:provided
[INFO] |        +- org.objectweb.fractal.juliac:juliac-oo:jar:2.4:provided
[INFO] |        \- org.ow2.frascati.tinfi:frascati-tinfi-mixins:jar:1.4.4:provid
ed
[INFO] \- org.ow2.frascati:frascati-explorer-api:jar:1.5-SNAPSHOT:provided
[INFO]    +- org.objectweb.fractal.fractalexplorer:fractal-explorer:jar:1.1.4:pr
ovided
[INFO]    |  +- org.objectweb.util.explorer:explorer:jar:1.0:provided
[INFO]    |  |  \- org.objectweb.apollon:apollon-runtime:jar:1.0:provided
[INFO]    |  |     +- org.objectweb.util.misc:ow-misc:jar:1.0:provided
[INFO]    |  |     \- org.objectweb.util:commandline:jar:1.0:provided
[INFO]    |  +- org.objectweb.util.explorer.plugins:explorer-reflector-plugin:ja
r:1.0:provided
[INFO]    |  \- jgraph:jgraph:jar:fractal:provided
[INFO]    \- org.swinglabs:swing-layout:jar:1.0.3:provided
[INFO] ------------------------------------------------------------------------
[INFO] BUILD SUCCESS
[INFO] ------------------------------------------------------------------------
[INFO] Total time: 40.787s
[INFO] Finished at: Thu Oct 04 12:22:34 CEST 2012
[INFO] Final Memory: 17M/112M
[INFO] ------------------------------------------------------------------------ 
```

# linux-kernel - 是否可以读取 vmlinux 文件的符号表？

> ID：12723641
> 
> 赞同：2
> 
> 时间：2012-10-04T08:52:44.470
> 
> 标签：linux-kernel, elf

我正在尝试读取linux内核的符号表，vmlinux文件，到目前为止我试过了`readelf`，

`readelf -s vmlinux`

但是什么都没有打印出来。

列出存储在里面的所有字符串，使用`strings`命令，我可以找到类似的符号名称`sys_close`，所以我想应该有一个可行的解决方案。

**更新**

我没有 System.map，我认为它在 vmlinux 内部，否则如何使用导出的名称构建内核模块`sys_close`？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-08-15T06:30:58.203

尝试做
objdump -t vmlinux
objdump -t vmlinux
它和 readelf 一样
检查你的 make 文件，看看 vmlinux 是如何准备的。
我确信那里有旗帜。或者在这里发布你的makefile

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-04T12:04:19.793

内核二进制文件有点不同。它的符号位于 System.map 文件中，该文件与内核 (/boot) 位于同一目录中。

[维基百科](http://en.wikipedia.org/wiki/System.map)将为您提供有关 System.map 的更多信息。

# java - JUnit 4 导入一类测试用例（用于功能测试）

> ID：12723645
> 
> 赞同：1
> 
> 时间：2012-10-04T08:53:06.260
> 
> 标签：java, junit

首先，我了解 JUnit 本质上是一个单元测试工具，但我希望我能用 JUnit 实现我想要的。

我用每个测试用例编写的测试更像是一个测试步骤（至少在概念上）。我想让这些步骤中的某些特定块通用，因为它们可能适合其他工作流程（是的，这是功能测试......）。

我所寻求的可能吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-04T08:58:25.160

如果我对您的理解正确，您想介绍单元测试之间的相互依赖关系。我认为这很可能是一个坏主意，因为单元测试应该能够以任何顺序运行和/或一次只能运行一个。在您的测试中引入一些隐含的必需顺序似乎是错误的路径。如果有一些流程要遵循，那么每个测试都应该能够独立地执行该流程。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-04T08:58:42.697

您可以从常见的 vbase 类派生测试类，并使用 @Before / @After 注释某些方法，以便在每个测试用例之前和之后执行（这提供了通用的设置/拆卸功能）。您还可以重复使用一些基本方法来执行重复任务。

虽然我发现模拟（我最喜欢的工具是 jmockit ）比设置方法和常用功能更有效。我现在很少需要这种常用的方法。

# javascript - html5 + javascript播放波浪声音

> ID：12723646
> 
> 赞同：0
> 
> 时间：2012-10-04T08:53:07.620
> 
> 标签：javascript, html, audio, wav, html5-audio

我有一个 5 秒长的波形文件。如何实现可以从时间轴中的一个点播放到另一个点的播放功能。例如，从 3.00s - 4.00s 播放（只有一段原始波形）

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-04T08:58:53.200

未测试，但您可以查看：[MDN: Using HTML5 audio and video # Specifying play back range](https://developer.mozilla.org/en-US/docs/Using_HTML5_audio_and_video?redirectlocale=en-US&redirectslug=Using_audio_and_video_in_Firefox#Specifying_playback_range)

> 几个例子：
> 
> [http://foo.com/video.ogg#t=10,20](http://foo.com/video.ogg#t=10,20)
> 
> 指定视频应播放 10 秒到 20 秒的范围。
> 
> [http://foo.com/video.ogg#t=,10.5](http://foo.com/video.ogg#t=,10.5)
> 
> 指定视频应从头播放到 10.5 秒。
> 
> [http://foo.com/video.ogg#t=,02:00:00](http://foo.com/video.ogg#t=,02:00:00)
> 
> 指定视频应从头播放到两个小时。
> 
> [http://foo.com/video.ogg#t=60](http://foo.com/video.ogg#t=60) ,
> 
> 指定视频应从 60 秒开始播放并播放到视频结尾。

# asp.net - 将 GridView 结构复制到另一个 GridView

> ID：12723649
> 
> 赞同：0
> 
> 时间：2012-10-04T08:53:22.313
> 
> 标签：asp.net, gridview, clone

我的页面上有大约 11 个 GridView：GridView1、GridView2、... GridView10 和 GridViewActive。GridView1 到 GridView10 是不可见的，但 GridViewActive 是可见的。根据不同的情况，我需要将一个 GridView 的结构复制到 GridViewActive。我需要做类似的事情

```
//common params
SqlDataSource1.SelectParameters["CommonParam1"].DefaultValue = this.commonParam1;      
if (reportname = "report1") 
{
    SqlDataSource1.SelectParameters["Param"].DefaultValue = this.param;      
    CopyGridViewStructure(GridView1, GridViewActive); 
}
else if (reportname = "report2") 
{ 
    SqlDataSource1.SelectParameters["AnotherParam"].DefaultValue = this.anotherParam;
    CopyGridViewStructure(GridView2, GridViewActive); 
}
etc.

// DO OTHER STAFF WITH GRIDVIEWATIVE HERE AND IN OTHER METHODS 
```

在按钮单击时（实际上它比简单的 ButtonClick 复杂一点，因为它是调用 Button click 的 Ajax，并且按钮实际上对用户是不可见的）：

```
//this block doesn't work for now, because grvActive doesn't have any structure
this.grvActive.DataSource = SqlDataSource1; 
this.grvActive.DataBind(); 
```

我只需要复制列。还没有找到解决方案。GridView 不包含克隆方法。

编辑：

GridView1 到 GridView10 和 GridViewActive 不是动态创建的。网格视图示例：

```
<asp:GridView ID="GridView2" runat="server" AutoGenerateColumns="False" Visible="false">
            <Columns>
                <asp:BoundField DataField="username" HeaderText="First Name">
                    <ItemStyle Width="110px"></ItemStyle>
                </asp:BoundField>
                <asp:BoundField DataField="usersurname" HeaderText="Last Name">
                    <ItemStyle Width="110"></ItemStyle>
                </asp:BoundField>
                <asp:BoundField DataField="usertype" HeaderText="User Type">
                    <ItemStyle Width="100px"></ItemStyle>
                </asp:BoundField>
                <asp:TemplateField HeaderText="Login">
                    <ItemTemplate>
                        <asp:Label runat="server" ID="lblLastModifyDate" Text='<%# MyUtility.MyCommon.FormatDate(Eval("logindate").ToString()) %>' />
                    </ItemTemplate>
                    <ItemStyle Width="177px"></ItemStyle>
                </asp:TemplateField>
                </Columns>
        </asp:GridView> 
```

其他 GridView 非常相似，但具有不同的列名和数据字段。其中一些包含不同的 TemplateField，有些根本没有 TemplateField。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-04T10:43:31.397

我还没有找到复制 GridView 结构的解决方案，但是，我找到了解决问题的方法。我没有克隆结构，而是保存 GridView ID，然后使用 FindControl。

```
private string GridID 
{
        get
        {
            return ViewState["GridID "].ToString();
        }
        set
        {
            ViewState["GridID "] = value;
        }
} 
```

进而

```
SqlDataSource1.SelectParameters["CommonParam1"].DefaultValue = this.commonParam1;       
if (reportname = "report1")  
{ 
    SqlDataSource1.SelectParameters["Param"].DefaultValue = this.param;       
    // //CopyGridViewStructure(GridView1, GridViewActive);  
    GridID = "GridView1";
} 
else if (reportname = "report2")  
{  
    SqlDataSource1.SelectParameters["AnotherParam"].DefaultValue = this.anotherParam; 
    CopyGridViewStructure(GridView2, GridViewActive);  
    GridID = "GridView2";
} 
etc. 
```

而当我需要使用gridView时，我使用的是FindControl：

```
GridView grd = (GridView) this.FindControl(GridID);

// actually for my page I am using masterpage and FindControl is a bit more complicated:
GridView grd = (GridView)((ContentPlaceHolder)(this.Controls[0].FindControl("mainContent"))).FindControl(GridID); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2020-07-21T15:36:15.903

我找到了一些解决方案：

在网格数据绑定后的 Source aspx 中：

```
Session["gridtoexcel"] =  yourgrid; 
```

在目标 aspx

```
 var grid = ((GridView)Session["gridtoexcel"]);

            gridToExcel.Columns.Clear();
            foreach (DataControlField col in grid.Columns)
                  gridToExcel.Columns.Add(col);

            gridToExcel.DataSource = grid.DataSource;
            gridToExcel.DataBind(); 
```

这样我可以将精确的网格“克隆”到另一个页面。如果您需要一些 css 样式，请不要忘记将它们添加到目标页面

# c# - C# API 可以充当数据源吗？

> ID：12723654
> 
> 赞同：0
> 
> 时间：2012-10-04T08:53:40.767
> 
> 标签：c#, visual-studio-2010, olap-cube

我需要多维多维数据集来从某些 C# API 而不是数据库中获取数据。所以我有两个问题：

1.  如何创建这样的 API。为此，我需要在 Visual Studio 2010 中创建什么类型的项目？以及我需要提供的所有 API。
2.  如何在 Visual Studio 中创建这样的数据源连接（在连接管理器中）？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-04T09:03:35.043

看来您正在寻找 SOA，以及我收藏的一篇文章：[http ://forums.trossenrobotics.com/tutorials/introduction-129/soa-using-c-and-wcf-2307/](http://forums.trossenrobotics.com/tutorials/introduction-129/soa-using-c-and-wcf-2307/)

# opencv - OpenCV 错误：断言失败（ni > 0 && ni == ni1）

> ID：12723656
> 
> 赞同：1
> 
> 时间：2012-10-04T08:53:51.130
> 
> 标签：opencv

我有以下问题：一切正常，但是当我到达 calibrateCamera 部分时，我收到以下错误：

> OpenCV 错误：未知函数文件中的断言失败 (ni > 0 && ni == ni1)。.....\src\opencv\modules\calib3d\src\calibration.cpp，第 3197 行

我是新来的，也许我的代码不够清晰，但请友好。非常感谢您提前。

我的代码是：（我删除了 include 和 pragma 部分，因为这里的字母很大）

```
int _tmain()
{

printf("Everything loaded. Press Enter to continue.\n\a");

getch();

system("cls");                              //bildschirm clearen

int numBoards = 0;
int numCornersHor;
int numCornersVer;
char stCurPath[200];
int numFiles = 0;
char stRemFileNum[200];

int curNum;

vector<string> file_names;
string s;
bool pathok = false;

#pragma region ask user for path to load images and list them

//                                                  ask user for path to load images and list them                      

while(pathok == false)
{
fflush(stdin);
printf("Enter path to the folder where the pictures are:\n");
scanf("%199[^\n]s", stCurPath);  //achtung wegen bufferoverflow - nicht mehr als 199 zeichen + EOF (0) einlesen.
                                 //[^\n] wegen Leerzeichen. scanf liest bis Enter.
system("cls");

DIR *dir;
struct dirent *ent;
dir = opendir (stCurPath);

if (dir != NULL) {
/* print all the files and directories within directory */
    printf("Your chosen path:\n%s\n\nFiletree of this path:\n", stCurPath);
    while ((ent = readdir (dir)) != NULL)
    {
        numFiles++; //Anzahl der Files
        printf ("%d)\t%s\n",numFiles, ent->d_name);
        s = ent->d_name;
        file_names.push_back(s);
    }
    closedir (dir);

    fflush( stdout );
    printf ("\nNumber of found files: %d\n", numFiles);

    pathok = true;
} 
else
{
    /* could not open directory */

    printf ("Could not open directory. Make sure path is ok!\n\n");
    pathok = false;

    /*perror ("");
    return EXIT_FAILURE*/;
}
}//while(pathok == false)
/*****************************end ask user for path to load images and list them****************************************/

#pragma endregion

#pragma region ask user to exclude some files

/*****************************************ask user to exclude some files*************************/
printf ("\nEnter the number of the files you dont want to load (number only!).\nSeperate single files with comma.\nEnter 0 if you don't want to exclude files.\nEnter x to exclude all non bmp files.\n\nNumbers:\n");
scanf("%199s", stRemFileNum);       //achtung wegen bufferoverflow - nicht mehr als 199 zeichen + EOF (0) einlesen
vector<string>::iterator it; 
if(strcmp(stRemFileNum,"x") == 0)
{
    curNum=1;
    numFiles = 0;
    string extstr;
    const char * extc;

    file_names.erase(remove_if(file_names.begin(),
                               file_names.end(),
                               isBmpExtension), file_names.end());

    system("cls");                      //bildschirm clearen
    printf("New Filetree of this path:\n\n");
    it = file_names.begin();
    for(it; it != file_names.end(); ++it)
    {
        numFiles++;
        printf ("%d)\t%s\n",numFiles, (*it).c_str());           
    }

    printf ("\nNumber of found files: %d\n", numFiles);
}//if(strcmp(stRemFileNum,"x") == 0)

//end user entered x

//start user entered 0

if(strcmp(stRemFileNum,"0") != 0 && strcmp(stRemFileNum,"x") != 0)
{

    //fehler
    numFiles = 0;
    vector<string> numbersVector;
    string strNumbers = stRemFileNum;
    Tokenize(strNumbers, numbersVector, ",");
    sort(numbersVector.begin(), numbersVector.end(), strCompDesc);

    for(it = numbersVector.begin(); it != numbersVector.end(); ++it)
    {
        curNum = atoi((*it).c_str());
        file_names.erase(file_names.begin() + (curNum - 1));
    }

    system("cls");                      //bildschirm clearen
    printf("New Filetree of this path:\n\n");

    //fehler ende

    for(vector<string>::iterator it = file_names.begin(); it != file_names.end(); ++it)
    {
        numFiles++;
        printf ("%d)\t%s\n",numFiles, (*it).c_str());           
    }

    printf ("\nNumber of found files: %d\n", numFiles);

}
//user entered 0
else if(strcmp(stRemFileNum,"0") == 0)
{
    printf ("\nNo files excluded.\n");
}

/*****************end ask user to exclude some files *******************************************/

#pragma endregion

fflush(stdin);
printf("\nEnter number of corners along width: ");
scanf("%d", &numCornersHor);
fflush(stdin);
printf("Enter number of corners along height: ");
scanf("%d", &numCornersVer);

int numSquares = numCornersHor * numCornersVer;
Size board_sz = Size(numCornersHor, numCornersVer);

vector<vector<Point3f>> object_points;
vector<vector<Point2f>> image_points;

vector<Point2f> corners;
vector<Point3f> obj;

int pictures_done=0;

Mat image;
Mat gray_image;

//Bilder zum persönlichen auswerten anzeigen +++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++

//

for(vector<string>::iterator it = file_names.begin(); it != file_names.end(); ++it)
{

printf("\nLoading Picture..\n");

image = imread(string(stCurPath) + "\\" + (*it).c_str()); //als farbe lesen; doppelter backslash o. normaler

//resize(image, image, Size(0,0), 0.5, 0.5, INTER_AREA);

cvtColor(image,gray_image,CV_RGB2GRAY);

for(int j=0;j<numSquares;j++)
{
    obj.push_back(Point3f(j/numCornersHor, j%numCornersHor, 0.0f));
}//for(int j=0;j<numSquares;j++)

bool found = findChessboardCorners(image, board_sz, corners, CV_CALIB_CB_ADAPTIVE_THRESH | CV_CALIB_CB_FILTER_QUADS);

    if(found)
    {
        cornerSubPix(gray_image, corners, Size(11, 11), Size(-1, -1), TermCriteria(CV_TERMCRIT_EPS | CV_TERMCRIT_ITER, 30, 0.1));
        drawChessboardCorners(gray_image, board_sz, corners, found);
    }

    cvNamedWindow("win1", 1);
    imshow("win1", gray_image);
    waitKey(30);
    cvMoveWindow("win1",0,0);
    waitKey(30);
    printf("\nPicture loaded.\nPress a to load original, s to store snap and show next picture,");
    printf("\nd to drop snap and show next picture, and f to close the programm\n");

    char key; 
    bool bOriginalDisplayed = false;

    while(1)
    {
        if (cin.rdbuf()->in_avail())
        {
            key = _getch();
        }

        if('a' == key && found!=0)
        {
            if (!bOriginalDisplayed)
            {
                printf("\nLoading original..\n");
                cvNamedWindow("win2", 1);
                cvMoveWindow("win2",0,0);
                imshow("win2", image);                 //oder imshow cvMoveWindow("Smile", 100, 100); 

                bOriginalDisplayed = true;
                waitKey(50);
                printf("\nOriginal loaded.\nPess a again to close original before you continue.\n");
            }
            else
            {
                cvDestroyWindow("win2");
                printf("\nOriginal closed.\n");
                bOriginalDisplayed = false;
            }
        }

        if('s'==key)
        {
            image_points.push_back(corners);
            object_points.push_back(obj);
            printf("\nSnap stored!\n"); 
            pictures_done++;
            found = false;
            break;
        }

        if('d' == key)
        {
            pictures_done++;
            break;
            found = false;
        }

        if('f' == key)
        {
            return 0;
        }

        Sleep(50);
    } //while (1)

} //for(vector<string>::iterator it = file_names.begin(); it != file_names.end(); ++it)

cvDestroyWindow("win1");
waitKey(50);

Mat intrinsic = Mat(3, 3, CV_32FC1);
Mat distCoeffs;
vector<Mat> rvecs;
vector<Mat> tvecs;

intrinsic.ptr<float>(0)[0] = 1;
intrinsic.ptr<float>(1)[1] = 1;

calibrateCamera(object_points, image_points, image.size(), intrinsic, distCoeffs, rvecs, tvecs);

Mat imageUndistorted;

for(vector<string>::iterator it = file_names.begin(); it != file_names.end(); ++it)
{
printf("\nLoading undistorted Picture..\n");
image = imread(string(stCurPath) + "\\" + (*it).c_str()); //als farbe lesen; doppelter backslash o. normaler    
//resize(image, image, Size(0,0), 0.5, 0.5, INTER_AREA);
cvtColor(image,gray_image,CV_RGB2GRAY);

    cvNamedWindow("win1", 1);
    cvNamedWindow("win2", 1);
    cvMoveWindow("win1",0,0);
    cvMoveWindow("win2",0,0);
    undistort(image, imageUndistorted, intrinsic, distCoeffs);
    imshow("win1", image);
    waitKey(0);
    imshow("win2", imageUndistorted);
    waitKey(30);
    printf("\nPicture loaded. Press s for the next picture or f to exit.");

    char key; 
    bool bOriginalDisplayed = false;

    while(1)
    {
        if (cin.rdbuf()->in_avail())
        {
            key = _getch();
        }

        if('s'==key)
        {
            break;
        }

        if('f' == key)
        {
            return 0;
        }

        Sleep(50);
    } //while (1)

} //for(vector<string>::iterator it = file_names.begin(); it != file_names.end(); ++it)

return 0;

} 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-05T12:09:07.790

如果发现问题。我是一个好人，我来这里是为将来遇到同样问题的人发布答案。

解决方案：将 obj.clear() 添加到 for 函数中，以便 obj 在您推回时始终保持相同的大小。像这样：

```
 //Bilder zum persönlichen auswerten anzeigen +++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++
//

for(vector<string>::iterator it = file_names.begin(); it != file_names.end(); ++it)
{
    printf("\nLoading Picture..\n");
    image = imread(string(stCurPath) + "\\" + (*it).c_str()); //als farbe lesen; doppelter backslash o. normaler
    //resize(image, image, Size(0,0), 0.5, 0.5, INTER_AREA);
    cvtColor(image,gray_image,CV_RGB2GRAY);

    obj.clear();
    for(int j=0;j<numSquares;j++)
    {
        obj.push_back(Point3f(j/numCornersHor, j%numCornersHor, 0.0f));
    }//for(int j=0;j<numSquares;j++)

    bool found = findChessboardCorners(image, board_sz, corners, CV_CALIB_CB_ADAPTIVE_THRESH | CV_CALIB_CB_FILTER_QUADS);

    if(found) 
```

玩得开心编程。问候，埃斯科。

# c - 如何为 SWIG 创建接口文件

> ID：12723660
> 
> 赞同：1
> 
> 时间：2012-10-04T08:54:03.043
> 
> 标签：c, swig

我有以下头文件：gaiageo.h，定义为

```
#ifndef DOXYGEN_SHOULD_SKIP_THIS
/* stdio.h included for FILE objects. */
#include <stdio.h>
#ifdef DLL_EXPORT
#define GAIAGEO_DECLARE __declspec(dllexport)
#else
#define GAIAGEO_DECLARE extern
#endif
#endif

#ifndef _GAIAGEO_H
#ifndef DOXYGEN_SHOULD_SKIP_THIS
#define _GAIAGEO_H
#endif

#include "gg_const.h"
#include "gg_structs.h"
#include "gg_core.h"
#include "gg_mbr.h"
#include "gg_formats.h"
#include "gg_dynamic.h"
#include "gg_advanced.h"

#endif /* _GAIAGEO_H */ 
```

包含的头文件充满了 GAIAGEO_DECLARE，例如 gg_formats.h（这是非常典型的包含头文件）具有以下内容：

```
/**
\file gg_formats.h

Geometry handling functions: formats
*/

#ifndef _GG_FORMATS_H
#ifndef DOXYGEN_SHOULD_SKIP_THIS
#define _GG_FORMATS_H
#endif

#ifdef __cplusplus
extern "C"
{
#endif

/* function prototypes */

/**
 Test CPU endianness

 \return 0 if big-endian: any other value if little-endian
 */
    GAIAGEO_DECLARE int gaiaEndianArch (void);

/**
 Import an INT-16 value in endian-aware fashion

 \param p endian-dependent representation (input buffer).
 \param little_endian 0 if the input buffer is big-endian: any other value
 for little-endian.
 \param little_endian_arch the value returned by gaiaEndianArch()

 \return the internal SHORT value 

 \sa gaiaEndianArch, gaiaExport16

 \note you are expected to pass an input buffer corresponding to an
 allocation size of (at least) 2 bytes.
 */
    GAIAGEO_DECLARE short gaiaImport16 (const unsigned char *p,
                    int little_endian,
                    int little_endian_arch);
#ifdef __cplusplus
}
#endif

#endif  /* _GG_FORMATS_H */ 
```

这是我第一次尝试创建接口文件，想要一些帮助，在线文档让我感到困惑？

我应该为每个标头创建一个接口文件，我应该如何为包含的 gaiageo.h 创建接口？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-05T15:51:02.457

这应该可以帮助您入门，但很难确切知道您需要什么。

`%include <windows.i>`使 SWIG 处理像`__declspec(dllexport)`.

默认情况下，SWIG 不会递归包含文件，因此请包含您需要 SWIG 处理的文件。有一个切换到递归，但随后它会处理`stdio.h`.

```
%module gaiageo

%{
#include "gaiageo.h"
%}

%include <windows.i>
%include "gaiageo.h"
%include "gg_const.h"
%include "gg_structs.h"
%include "gg_core.h"
%include "gg_mbr.h"
%include "gg_formats.h"
%include "gg_dynamic.h"
%include "gg_advanced.h" 
```

将其保存为`gaiageo.i`文件并运行类似：

```
swig -c++ -<target_language> gaiageo.i 
```

# c# - 更改richtextbox中的插入符号颜色

> ID：12723664
> 
> 赞同：0
> 
> 时间：2012-10-04T08:54:15.090
> 
> 标签：c#, winforms, richtextbox, caret

> **可能重复：**
> [WinForms TextBox 的自定义插入符号](https://stackoverflow.com/questions/609927/custom-caret-for-winforms-textbox)

我正在尝试更改 winforms (c#) 中 Richtextbox 中的插入符号颜色，有没有办法这样做？

我找到了关于 wpf 的文章，但到目前为止还没有关于 winforms 的文章。

# jmeter - Jmeter线程组中的RAMP UP

> ID：12723678
> 
> 赞同：2
> 
> 时间：2012-10-04T08:55:15.290
> 
> 标签：jmeter

我在 jmeter 中设置加速有问题。

我的测试场景如下所述。

有3个线程组：

```
Thread Group1 - 2 Users - Ramp up 10
Thread Group2 - 3 users - Ramp up 15
Thread Group3 - 5 users - Ramp up 25 
```

我在上述情况下面临的问题如下。

所有线程组的第一个用户同时启动。
但我不想那样，我想要以下内容：

*   在前 10 秒内，第一个线程组的 2 个用户应该启动。
*   测试 10 秒后，线程组 2 应该启动他们的用户。
*   测试 25 秒后，第三组应该启动他们的用户。

我在 Jmeter 中看到了一个选项“连续运行线程组”，但是如果我设置线程组 2 将永远不会启动，直到线程组 1 用户应该完成他们的请求执行。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-07T01:31:47.000

[jMeter Plugins 的](http://jmeter-plugins.org) [Ultimate 线程组](http://jmeter-plugins.org/wiki/UltimateThreadGroup/)和[Stepping 线程组](http://jmeter-plugins.org/wiki/SteppingThreadGroup/)让您可以更好地控制线程。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-04T11:15:39.347

为第二个和第三个线程组添加启动延迟：

*   [http://jmeter.apache.org/usermanual/component_reference.html#Thread_Group](http://jmeter.apache.org/usermanual/component_reference.html#Thread_Group)

这应该可以完成这项工作。

您可以在 Start Time 和 End Time 中放置任何内容，因为它们将被启动延迟和持续时间覆盖。

另请注意：

```
 Start Time  If the scheduler checkbox is selected, one can choose an absolute 
    start time. When you start your test, JMeter will wait until the specified start time 
    to begin testing. Note : The Startup Delay field over-rides this - see below. 
```

特别注意：

**注意：启动延迟字段会覆盖它 - 见下文。**

# java - 对多个搜索字段使用通用查询约定

> ID：12723683
> 
> 赞同：3
> 
> 时间：2012-10-04T08:55:27.303
> 
> 标签：java, hibernate, lucene, hibernate-search, hashtag

想象一下，我正在构建一个主题标签搜索。我的主要索引类型称为 Post，它有一个 Hashtag 项目列表，标记为 IndexedEmbedded。另外，每个帖子都有一个评论对象列表，每个评论对象又包含一个标签对象列表。

在搜索方面，我使用的是 MultiFieldQueryParser，我向其中传递了一长串可能的搜索字段，包括一些嵌套字段，例如：

`hashTags.value`和 `coments.hashTags.value`

现在，有趣的事情发生在我想搜索某些东西时，比如说#architecture。我知道标签在哪里，所以最简单的逻辑是将#architecture类型的查询转换为其中一种类型`hashTags.value:architecture or comments.hashTags.value:architecture`虽然可能，但这非常不灵活。如果我想出另一个包含主题标签的字段怎么办？我也必须包括在内。

有没有通用的方法来做到这一点？

PS 请记住，我正在搜索的根类型是 Post，因为这是我想要实现的结果

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-04T11:15:40.223

Hashtags 是关键字，您应该让 Lucene 处理文本分析以从主要文本中提取 hashtags 并将它们存储在自定义字段中。

*通过定义要在两个不同的 @Field*中索引的文本（使用 @Fields 注释），您可以使用 Hibernate Search 轻松完成此操作。您可以有一个名为*comments*的字段和另一个名为*commentsHashtags*的字段。

然后，您将自定义分析器应用于*commentsHashtags*，它会进行一些标准标记化并丢弃任何不以***#***开头的术语；您可以通过使用标准标记器并应用自定义过滤器轻松定义一个。

当您运行查询时，您不必编写自定义代码来在查询输入中查找主题标签，让它由同一个分析器处理（无论如何这是默认设置）并针对两个字段，您甚至可以提升主题标签如果这是有道理的，那就更多。

有了这个解决方案，您

*   利用 Search 文本分析的高效率
*   避免数据库中包含主题标签的实体和表：无用的开销
*   避免弄乱自由文本提取

它为您带来了另一个强大的胜利点：然后您可以打开一个原始 IndexReader 并从*commentsHashtags*加载术语向量，以获取所有使用标签的列表以及关于它们的指标。做一些数据挖掘很酷，或者只是可视化标签云。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-15T21:48:56.933

*为什么不将 Posts和*Comments都存储为 Lucene 文档，而不是将字段视为不同的并将顶级文档视为 Post ？这样，您可以只搜索一个名为“hashtags”的字段。您还应该有一个名为“类型”的字段或用于区分评论和帖子的内容。

搜索结果可能是帖子的评论。如果用户只想搜索帖子或评论，您可以按类型过滤。或者，您可以在 UI 中以不同方式显示它们。

如果您想添加另一个也使用主题标签的概念（例如......我不知道...... splanks 或我们将来都给互联网通信起的任何愚蠢的名字），那么您可以将它添加到现有的帖子和评论文档旁边简单我用“hashtags”字段索引你的新类型。无论如何，您必须做大量工作才能添加 splanks，因此为这种新型搜索结果添加处理程序应该不会带来太多不便。

# highcharts - HighStock : 移除缩放栏

> ID：12723690
> 
> 赞同：17
> 
> 时间：2012-10-04T08:56:02.587
> 
> 标签：highcharts, highstock

如图所示，我想删除 highStock 的部分。它们在我的数据格式中没有意义。请帮忙

![在此处输入图像描述](../Images/038fe8d1f0e1ed4c4d6f38c2dcb0e6a1.png)

* * *

## 回答 #1

> 赞同：21
> 
> 时间：2012-10-04T10:02:51.467

你在这里：http: [//jsfiddle.net/cpvLzLso/](http://jsfiddle.net/cpvLzLso/)

```
rangeSelector: {
    selected: 4,
    inputEnabled: false,
    buttonTheme: {
        visibility: 'hidden'
    },
    labelStyle: {
        visibility: 'hidden'
    }
} 
```

我们只是隐藏所有文本和按钮。

用户可以通过更改设置组中的`selected`参数来更改默认图表间隔。`rangeSelector`

但是如果您不需要禁用导航栏，您最好使用 Jugal 的解决方案。

**UPD 1：**于 2015 年 6 月 23 日更新，以适应当今的现实。对于所有反对此答案的人：尝试在 Jugal 的答案中禁用导航器，然后平移图表。

* * *

## 回答 #2

> 赞同：21
> 
> 时间：2012-10-04T11:34:53.200

Highchart 通过将[rangeSelector](http://api.highcharts.com/highstock#rangeSelector)的 enabled 属性设置为 false 来支持这一点，如下所示

```
rangeSelector:{
    enabled:false
} 
```

[禁用 RangeSelector @ jsFiddle](http://jsfiddle.net/jugal/QFZFb/)

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2015-03-26T13:15:15.683

如果要删除“从到”框，可以这样做：

```
rangeSelector:{
   inputEnabled: false,
} 
```

如果要删除每个范围选择器，则必须编写该行：

```
rangeSelector:{
    enabled: true,
} 
```

如果你想禁用缩放按钮，你必须写这个

```
rangeSelector:{
    allButtonsEnabled: true,
} 
```

# asp.net - 服务器不指向文件夹

> ID：12723691
> 
> 赞同：0
> 
> 时间：2012-10-04T08:56:03.220
> 
> 标签：asp.net

我在服务器上有一个网站。它有一个按钮，可以触发从该服务器下载文件（.zip/.doc）。但它并不指向该文件夹/文件。这个问题怎么解决？？

它在这个特定文件上失败了......

```
public static bool ResponseFile(HttpRequest _Request, HttpResponse _Response, string _fileName, string _fullPath, long _speed){
FileStream myFile = new FileStream(_fullPath, FileMode.Open, FileAccess.Read, FileShare.ReadWrite);
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-04T09:38:48.043

我没有尝试过你的代码，但这似乎对我有用。您可以使其余部分动态化。

```
string FileName = "test.zip";
string PathFile = "C:\project\download\test.zip";
var fileInfo = new System.IO.FileInfo(PathFile);
Response.ContentType = "application/zip";
Response.AddHeader("Content-Disposition", String.Format("attachment;filename=\"{0}\"", FileName));
Response.AddHeader("Content-Length", fileInfo.Length.ToString());
Response.WriteFile(PathFile);
Response.End(); 
```

# android - 如何在android中使用Zxing作为库生成条形码

> ID：12723693
> 
> 赞同：0
> 
> 时间：2012-10-04T08:56:26.260
> 
> 标签：android, barcode, zxing

我想创建一个应用程序来生成使用 Zxing 作为库的条形码。我想要一个条形码图像。我在我的主要项目中使用了以下代码。

```
Intent intent = new Intent("com.google.zxing.client.android.Intents.Encode"); 
intent.setPackage("com.google.zxing.client.android");
intent.addCategory(Intent.CATEGORY_DEFAULT); 
intent.putExtra("ENCODE_FORMAT", "CODE_128");  
intent.putExtra("ENCODE_DATA", "12345678912");
startActivity(intent); 
```

但它给出了错误：

```
10-04 12:54:27.305: E/AndroidRuntime(399): FATAL EXCEPTION: main
10-04 12:54:27.305: E/AndroidRuntime(399): android.content.ActivityNotFoundException: No Activity found to handle Intent { act=com.google.zxing.client.android.Intents.Encode pkg=com.google.zxing.client.android (has extras) }
    10-04 12:54:27.305: E/AndroidRuntime(399):  at android.app.Instrumentation.checkStartActivityResult(Instrumentation.java:1408)
    10-04 12:54:27.305: E/AndroidRuntime(399):  at android.app.Instrumentation.execStartActivity(Instrumentation.java:1378)
    10-04 12:54:27.305: E/AndroidRuntime(399):  at android.app.Activity.startActivityForResult(Activity.java:2817)
    10-04 12:54:27.305: E/AndroidRuntime(399):  at android.support.v4.app.FragmentActivity.startActivityFromFragment(FragmentActivity.java:672)
    10-04 12:54:27.305: E/AndroidRuntime(399):  at android.support.v4.app.Fragment.startActivity(Fragment.java:747)
    10-04 12:54:27.305: E/AndroidRuntime(399):  at com.check.MyFragment.onResume(MyFragment.java:62)
    10-04 12:54:27.305: E/AndroidRuntime(399):  at android.support.v4.app.FragmentManagerImpl.moveToState(FragmentManager.java:891)
    10-04 12:54:27.305: E/AndroidRuntime(399):  at android.support.v4.app.FragmentManagerImpl.moveToState(FragmentManager.java:1053)
    10-04 12:54:27.305: E/AndroidRuntime(399):  at android.support.v4.app.BackStackRecord.run(BackStackRecord.java:622)
    10-04 12:54:27.305: E/AndroidRuntime(399):  at android.support.v4.app.FragmentManagerImpl.execPendingActions(FragmentManager.java:1371)
    10-04 12:54:27.305: E/AndroidRuntime(399):  at android.support.v4.app.FragmentManagerImpl$1.run(FragmentManager.java:418)
    10-04 12:54:27.305: E/AndroidRuntime(399):  at android.os.Handler.handleCallback(Handler.java:587)
    10-04 12:54:27.305: E/AndroidRuntime(399):  at android.os.Handler.dispatchMessage(Handler.java:92)
    10-04 12:54:27.305: E/AndroidRuntime(399):  at android.os.Looper.loop(Looper.java:123)
    10-04 12:54:27.305: E/AndroidRuntime(399):  at android.app.ActivityThread.main(ActivityThread.java:4627)
    10-04 12:54:27.305: E/AndroidRuntime(399):  at java.lang.reflect.Method.invokeNative(Native Method)
    10-04 12:54:27.305: E/AndroidRuntime(399):  at java.lang.reflect.Method.invoke(Method.java:521)
    10-04 12:54:27.305: E/AndroidRuntime(399):  at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:868)
    10-04 12:54:27.305: E/AndroidRuntime(399):  at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:626)
    10-04 12:54:27.305: E/AndroidRuntime(399):  at dalvik.system.NativeStart.main(Native Method) 
```

我也在清单中声明了活动。

```
<activity
    android:name="com.google.zxing.client.android.CaptureActivity"
    android:configChanges="orientation|keyboardHidden"
    android:screenOrientation="portrait"
    android:theme="@android:style/Theme.NoTitleBar.Fullscreen"
    android:windowSoftInputMode="stateAlwaysHidden" >
    <intent-filter>
        <action android:name="com.google.zxing.client.android.SCAN" />
        <category android:name="android.intent.category.DEFAULT" />
    </intent-filter>
</activity> 
```

如果我在这里遗漏了什么，请告诉我。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-06T19:04:00.200

这很混乱。您正在尝试使用 Intents（好，正确），但不知何故还试图向您的应用程序添加一堆代码（不需要），同时试图将您的应用程序声明为我们的应用程序，条形码扫描仪（非常错误且对我们有害）。

您无需更改清单。立即撤消这些更改，因为现在，您正在从我们的命名空间将自己宣传为我们的应用程序，并告诉其他应用程序您可以响应条码扫描仪的意图。以这种方式干扰其他应用程序不会顺利进行。

删除您复制到项目中的所有核心和 android 代码。你不需要它。

相反，您只需要 android 集成代码。

按照这个： [http ://code.google.com/p/zxing/wiki/ScanningViaIntent](http://code.google.com/p/zxing/wiki/ScanningViaIntent)

除了您将调用方法来编码条形码，而不是扫描。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-06T18:53:01.903

Î 会说，您应该在清单中声明编码活动。像这样的东西：

```
<activity android:name=".encode.EncodeActivity"
          android:label="@string/share_name"
          android:stateNotNeeded="true">
  <intent-filter>
    <action android:name="com.google.zxing.client.android.ENCODE"/>
    <category android:name="android.intent.category.DEFAULT"/>
  </intent-filter>
  <!-- This allows us to handle the Share button in Contacts. -->
  <intent-filter>
    <action android:name="android.intent.action.SEND"/>
    <category android:name="android.intent.category.DEFAULT"/>
    <data android:mimeType="text/x-vcard"/>
  </intent-filter>
  <!-- This allows us to handle sharing any plain text . -->
  <intent-filter>
    <action android:name="android.intent.action.SEND"/>
    <category android:name="android.intent.category.DEFAULT"/>
    <data android:mimeType="text/plain"/>
  </intent-filter>
</activity> 
```

如果您尝试在您的应用程序中发布 ZXing 代码，请注意，如果用户已经安装了正常的 ZXing 应用程序，这可能会导致您的应用程序出现一些奇怪的行为。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-08T00:55:01.937

你的意图行为是错误的。

```
Intent intent = new Intent("com.google.zxing.client.android.Intents.Encode"); 
```

会像这样改变

```
Intent intent = new Intent("com.google.zxing.client.android.ENCODE"); 
```

尝试这个。

```
Intent intent = new Intent("com.google.zxing.client.android.ENCODE");

intent.putExtra("ENCODE_FORMAT", "CODE_128");
intent.putExtra("ENCODE_DATA", "12345678901");

startActivity(intent); 
```

# sql - sql查询查找不在其他表中的记录

> ID：12723695
> 
> 赞同：0
> 
> 时间：2012-10-04T08:56:42.470
> 
> 标签：sql

我有一个`plist`带有 column的表`list`，其中包含逗号分隔的 id (1,2,3,4)。我想要那些 id 不在逗号分隔列表中的成员的记录。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-04T09:04:18.527

最好的方法是将逗号分隔的列表拆分为一个表，然后对其进行搜索。

这是拆分字符串的代码：

```
DECLARE @YourTable table (RowID int, Layout varchar(200))
INSERT @YourTable VALUES (1,'1,2,3,4')

;WITH SplitSting AS
(
    SELECT
        RowID,LEFT(Layout,CHARINDEX(',',Layout)-1) AS Part
            ,RIGHT(Layout,LEN(Layout)-CHARINDEX(',',Layout)) AS Remainder
        FROM @YourTable
        WHERE Layout IS NOT NULL AND CHARINDEX(',',Layout)>0
    UNION ALL
    SELECT
        RowID,LEFT(Remainder,CHARINDEX(',',Remainder)-1)
            ,RIGHT(Remainder,LEN(Remainder)-CHARINDEX(',',Remainder))
        FROM SplitSting
        WHERE Remainder IS NOT NULL AND CHARINDEX(',',Remainder)>0
    UNION ALL
    SELECT
        RowID,Remainder,null
        FROM SplitSting
        WHERE Remainder IS NOT NULL AND CHARINDEX(',',Remainder)=0
)
SELECT RowID,part FROM SplitSting ORDER BY RowID 
```

# qt - Qt webkit 作为 opengl 之上的覆盖

> ID：12723697
> 
> 赞同：2
> 
> 时间：2012-10-04T08:56:47.680
> 
> 标签：qt, opengl, webkit

我正在编写一个游戏引擎并使用 opengl/qt。我正在尝试将 webkit 用作菜单等的 2D UI 叠加层。我找到了一些示例，但由于某种原因，它们都不起作用。例如添加两个小部件 QGLWidget 和一个 QWebView 似乎不起作用。我应该如何在不损失太多性能的情况下做到这一点？

# matlab - 使用 matlab 更改图像位深

> ID：12723699
> 
> 赞同：1
> 
> 时间：2012-10-04T08:56:52.713
> 
> 标签：matlab, image-processing

我想使用 Matlab 将 8 位图像的位深度更改为 4 位、2 位深度。源图像是 8 位和 jpg 文件。我想利用 png 'BitDepth' 参数，所以首先我尝试将图像转换为 png 格式。然后我尝试使用这个参数；但我遇到了错误。如果有一个使用 Java 库的简单解决方案，我也可以。

```
function [] = changeBitDepth(path, depth)
clear all; close all;
clc;
A = imread(path);
imshow(A);
imwrite(A, '~/Desktop/football.png');
B = imread('~/Desktop/football.png');
imwrite(B, '~/Desktop/bitDepthChanged.png', 'BitDepth', depth);
imfinfo('~/Desktop/bitDepthChanged.png'); 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-04T09:07:11.617

这是因为标准彩色图像只能有 8 位或 16 位图像。[例如，索引图像或灰度图像（ png 的 wiki 描述](http://en.wikipedia.org/wiki/Portable_Network_Graphics)）可以具有不同的位深度。

> 标准允许索引颜色 PNG 的每个像素有 1、2、4 或 8 位；没有 Alpha 通道的灰度图像允许每像素 1、2、4、8 或 16 位。其他一切都使用 8 或 16 的每个通道的位深度。

你可以这样做：

```
% convert to indexed image
[IND,map] = rgb2ind(A,32);
% save indexed png
imwrite(IND, map, 'test.png', 'bitdepth', 4); 
```

看[这里](http://www.mathworks.se/help/matlab/ref/rgb2ind.html)了解 matlab 如何处理索引图像。

# android - Appengine 连接的 Android prj 在移动测试中得到 404

> ID：12723701
> 
> 赞同：1
> 
> 时间：2012-10-04T08:56:58.943
> 
> 标签：android, google-app-engine, http-status-code-404, google-cloud-endpoints

我启动并运行了我的 android+appengine 应用程序（端点），在我的本地机器上一切正常，所以我决定上传我的 appengine 代码，以便我可以尝试直接在手机上通过 Android 应用程序访问数据。

当我尝试调用我的 appengine 后端时，出现 404 错误。

在浏览器上，如果我尝试调用 http://[myAppID].appspot.com/_ah/spi 我得到：

```
Error: HTTP method GET is not supported by this URL 
```

所以主要的 serlvet 正在响应，我做错了什么？

（授予互联网许可！）

提前致谢！！

这是代码，这是在 AsyncTask 中执行的：

```
 Builder endpointBuilder = new Myendpoint.Builder(AndroidHttp.newCompatibleTransport(), new JacksonFactory(), new HttpRequestInitializer() {
            public void initialize(HttpRequest httpRequest) {
            }
        });

        Myendpoint endpoint = CloudEndpointUtils.updateBuilder(endpointBuilder).build();

        try {

            MyUsers result = endpoint.searchMyUser(params[0]).execute();

            return result.getItems().get(0);

        } catch (Exception e) {
            e.printStackTrace();
            return null;
        } 
```

这是 CloudEnpointUtils 中的代码（显然 LOCAL_ANDROID_RUN 设置为 false）：

```
public static <B extends GoogleClient.Builder> B updateBuilder(B builder) {
    if (LOCAL_ANDROID_RUN) {
        builder.setRootUrl(LOCAL_APP_ENGINE_SERVER_URL + "/_ah/api/");
    }
    // only enable GZip when connecting to remote server
    final boolean enableGZip = builder.getRootUrl().startsWith("https:");
    builder.setJsonHttpRequestInitializer(new JsonHttpRequestInitializer() {
        public void initialize(JsonHttpRequest jsonHttpRequest) {
            jsonHttpRequest.setEnableGZipContent(enableGZip);
        }
    });
    return builder;
} 
```

我为错误添加了 logcat：

```
10-04 11:40:22.770 W/System.err(13564): com.google.api.client.googleapis.json.GoogleJsonResponseException: 404 Not Found
10-04 11:40:22.770 W/System.err(13564): Not Found
10-04 11:40:22.775 W/System.err(13564):     at com.google.api.client.googleapis.services.GoogleClient.executeUnparsed(GoogleClient.java:279)
10-04 11:40:22.775 W/System.err(13564):     at com.google.api.client.http.json.JsonHttpRequest.executeUnparsed(JsonHttpRequest.java:207)
10-04 11:40:22.775 W/System.err(13564):     at com.appspot.api.services.myuserendpoint.Myuserendpoint$SearchMyUser.execute(Myuserendpoint.java:702)
10-04 11:40:22.775 W/System.err(13564):     at it.my.my.app.core.MyBusinessDelegate$MyUserGetter.doInBackground(MyBusinessDelegate.java:303)
10-04 11:40:22.775 W/System.err(13564):     at it.my.my.app.core.MyBusinessDelegate$MyUserGetter.doInBackground(MyBusinessDelegate.java:1)
10-04 11:40:22.780 W/System.err(13564):     at android.os.AsyncTask$2.call(AsyncTask.java:264)
10-04 11:40:22.780 W/System.err(13564):     at java.util.concurrent.FutureTask$Sync.innerRun(FutureTask.java:305)
10-04 11:40:22.780 W/System.err(13564):     at java.util.concurrent.FutureTask.run(FutureTask.java:137)
10-04 11:40:22.780 W/System.err(13564):     at android.os.AsyncTask$SerialExecutor$1.run(AsyncTask.java:208)
10-04 11:40:22.785 W/System.err(13564):     at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1076)
10-04 11:40:22.785 W/System.err(13564):     at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:569)
10-04 11:40:22.785 W/System.err(13564):     at java.lang.Thread.run(Thread.java:856) 
```

编辑：AppEngine 部署日志

```
------------ Deploying frontend ------------

 Preparing to deploy:
    Created staging directory at:  'C:\Users\XXXXXXXXX\AppData\Local\Temp\appcfg1884750854541661749.tmp'
    Scanning for jsp files.
    Compiling jsp files.
    Scanning files on local disk.
    Initiating update.
    Cloning 1 static files.
    Cloning 66 application files.

Deploying:
    Uploading 0 files.
    Initializing precompilation...
    Deploying new version.

Verifying availability:
    Will check again in 1 seconds.
    Will check again in 2 seconds.
    Will check again in 4 seconds.
    Closing update: new version is ready to start serving.

Updating datastore:
    Uploading index definitions.

Deployment completed successfully 
```

EDIT2：其他信息

我尝试与我在 appengine 战争中放入的 java servlet 通信，通过浏览器没有问题，一切正常，如果我尝试从命令行 ping 或尝试以编程方式通信，我有这个错误：

```
"Unable to resolve host "[myappID].appspot.com": No address associated with  hostname" 
```

请任何人帮我找到解决方案

编辑 3：好消息，我已经能够使用 appengine 地址调用我的 servlet，其版本为：

```
http://[version].[myAppID].appspot.com/myServlet 
```

代替：

```
http://[myAppID].appspot.com/myServlet 
```

我不知道为什么，但这样就可以了！即使使用版本地址技巧，尝试通过端点调用远程 appengine 应用程序仍然没有运气，希望对您有所帮助！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2014-02-11T05:25:52.150

根本原因是您的代码中使用的版本与应用引擎默认版本不同。

应用引擎默认版本部署到：http://[appversion]-your-product-id.appspot.com 您正在运行的代码已将部署版本指定为 1，这意味着部署时，您的应用将在此处检查： [http://1-dot-your-project-id.appspot.com](http://1-dot-your-project-id.appspot.com)因此是 404（因为本质上，此 URL 不会退出。我在这里使用一个用于说明目的）。

要解决此问题，请转至[https://appengine.google.com/deployment?app_id=s~your-project-id](https://appengine.google.com/deployment?app_id=s~your-project-id)并将您上传的版本设为默认版本

更多信息： [App Engine 设置问题](http://kakoma.ug/code/2014/02/android-dev-tutorial-setting-app-engine-connected-app-hiccups/ "App Engine 设置问题")

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-12-06T03:44:11.497

看起来您尚未被可信测试人员计划接受。除非您在 TT 程序中，否则这将不起作用。您可以在此页面注册：

[http://endpoints-trusted-tester.appspot.com/](http://endpoints-trusted-tester.appspot.com/)

当（如果）接受时，您将收到一封电子邮件。

# javascript - 如何向此代码添加新图像，所以我有 2 个交替图像？

> ID：12723703
> 
> 赞同：-1
> 
> 时间：2012-10-04T08:57:01.460
> 
> 标签：javascript

```
<HTML><head>
<Script language="JavaScript">
<!--
function changePos() 
{
 width = document.body.clientWidth;   //the width of the current document
 height = document.body.clientHeight; //the height of the current document
 Hoffset = img.offsetHeight;
 Woffset = img.offsetWidth;
 img.style.left = xPos;  
 img.style.top = yPos;  

 if (yon) 
 {
  yPos = yPos + 5;
 } 
 else 
 { 
  yPos = yPos - 5;
 }
if(yPos < -Hoffset) 
 {
  yon = 1; yPos = -Hoffset;
 }
 if(yPos >= height) 
 {
  yon = 0; yPos = height;
 }
}
//-->
</Script>
</head>
<body>
<IMG id="img" style="POSITION: absolute" src="Images\Colored.jpg">
<SCRIPT language=JavaScript>
<!-- 
 var height = 0;
 var Hoffset = 0;
 var Woffset = 0;
 var yon = 0;  //false
 var xPos = 20;
 var yPos = document.body.clientHeight;
 var Timer1 = setInterval('changePos()',30);
//-->
</Script>
</BODY>
</HTML> 
```

所以我的问题是，我如何在这个动画中添加一个新图像，并以一种与旧图像交替的方式制作它（例如：我拥有的图像是彩色的，我想给它添加一个黑白图像，所以他们交替在一起！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-04T09:09:19.987

开始非常简单，您可以简单地创建一个图像数组：

```
var images = new Array( "image1.jpg",
        "image2.jpg",
        "image3.jpg"); 
```

然后在 html 中声明一个 img 元素，例如：

```
<img id="img1" src="image3.jpg" /> 
```

然后只需将其添加到您的函数中：

```
document.getElementById("img1").src = images[0] // or whatever image number you want. 
```

看看这里：

[http://www.daniweb.com/web-development/javascript-dhtml-ajax/threads/131227/sharing-images-in-html](http://www.daniweb.com/web-development/javascript-dhtml-ajax/threads/131227/changing-images-in-html)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-04T09:14:10.157

也许是这样：

```
<html><head>
<script language="JavaScript"><!--
 var timer1,Hoffset = 0,Woffset = 0,
     xPos = 20,ypos,
     width = document.body.clientWidth,
     height=yPos=document.body.clientHeight,yon = 0;  //false

 window.onload=function() {
   Timer1 = setInterval(changePos,30);
 }

function changePos() {
  var img = document.getElementById('img');
  Hoffset = img.offsetHeight;
  Woffset = img.offsetWidth;

  yPos += (yon)?5:-5;
  if(yPos < -Hoffset)  {
   yon = 1; yPos = -Hoffset;
  }
  if(yPos >= height) {
   yon = 0; yPos = height;
  }
  img.src = img.src.indexOf("Colored.jpg"!=-1)?"Images\BW.jpg":"Images\Colored.jpg";
  img.style.left = xPos + "px";  
  img.style.top = yPos + "px";  
}
//-->
</script>
</head>
<body>
<img id="img" style="position: absolute" src="Images\Colored.jpg">
</body>
</html> 
```

# c# - 在c#中刷新列表视图时防止项目失去焦点

> ID：12723705
> 
> 赞同：1
> 
> 时间：2012-10-04T08:57:06.210
> 
> 标签：c#, listview, focus

我有列表视图和一些列“ID”、“产品名称”和“供应商”。我可以添加、编辑或删除这些项目，并且在“搞砸”项目列表视图之后会刷新类似这样的内容。

```
listView.Items.Clear();
foreach (var item in result)
{
    ListViewItem lv = new ListViewItem(item.ID.ToString());
    lv.SubItems.Add(item.Name.ToString());
    lv.SubItems.Add(item.Vendor.ToString());
    listView.Items.Add(lv);
} 
```

所以这个方法工作得很好，除了每次我刷新项目的列表焦点丢失，这是合乎逻辑的，因为我从列表中删除了所有项目并再次填充它。所以我的问题是我如何才能将注意力集中在已编辑和新添加的项目上，主要是当我编辑一些项目时，我希望列表视图不要滚动到顶部，而是留在该已编辑项目所在的位置。我尝试使用 FindItemWithText 方法，而不是将 listview 的焦点项目设置为找到但它不起作用的项目。这种问题有蚂蚁解决方案吗？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-04T09:07:00.707

将焦点项目的索引保存到变量中：

```
int oldFocusedIndex = listView.SelectedItems[0].Index; 
```

稍后您可以恢复焦点执行：

```
listView.Items[oldFocusedIndex].Selected = true; 
```

您还可以使该项目对用户可见，因为`ListView`在该方法之后，滚动条将保留在顶部`Clear()`：

```
listView.Items[oldFocusedIndex].EnsureVisible(); 
```

# c# - 创建动态下拉列表

> ID：12723706
> 
> 赞同：-3
> 
> 时间：2012-10-04T08:57:09.460
> 
> 标签：c#, asp.net, c#-4.0

> **可能重复：**
> [在 ASP.Net 中创建一个中继器控件](https://stackoverflow.com/questions/12704847/create-a-repeater-control-in-asp-net)

我想在单击按钮时创建一个动态下拉列表。在默认情况下，下拉列表显示列表项。然后我单击添加新按钮意味着下一个下拉列表在第一个下拉列表下创建，依此类推...

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-04T09:01:10.597

您可以在按钮单击事件中编写它...

```
DropDownList d = new DropDownList();
 d.Items.Add("Select");
 Panel1.Controls.Add(d); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-04T09:02:06.977

```
protected void btnAdd_Click(object sender, EventArgs e)
{
    DropDownList ddl = new DropDownList();
    ddl.ID = "ID";
    ddl.DataSource = data;
    ddl.DataTextField = "TextFieldName";
    ddl.DataValueField = "ValueFieldName";
    form1.Controls.Add(ddl);
    form1.Controls.Add(new LiteralControl("<br />"));
} 
```

# c++ - 如何在 C++ 中编写一个将整数和字符串作为参数并修改它们的通用函数？

> ID：12723713
> 
> 赞同：0
> 
> 时间：2012-10-04T08:57:44.763
> 
> 标签：c++, templates

我正在尝试编写一个函数，该函数将一个字符串作为输入参数，三个可以是不同类型的输出参数（至少是这样的想法）和一个作为分隔符的字符。

输入字符串由指定的字符分隔，并且该函数按顺序将每个以字符结尾的字段分配给每个输出参数（目前它处理输入字符串，例如`"a;bb;ccc"`并且仅限于三个输出参数，但这不是问题）。

例如，对于输入，例如`10;200;3000`Id get `10`，`200`以及`3000`分别用于第一个、第二个和第三个输出参数

输出参数必须是字符串或整数类型，但由于我对 C++（尤其是泛型编程）的了解有限，我在编写一个不关心这一点的泛型函数时遇到了麻烦。

我有以下代码：

```
template <typename T>
void parse_string (std::string &input, T &out1, T &out2, T &out3, const char delimiter)
{
    while (out3 == "")
    {
        std::string temp = input.substr(0, input.find(delimiter));
        input = input.substr(input.find(delimiter) +1);

        if (out1 == "") { out1 = temp;}
        else if (out2 == "") { out2 = temp;}
        else { out3 = temp;}
    }
} 
```

它适用于字符串，但显然不适用于整数。

我怀疑我在检查参数是否为空的地方出错了（以及我不知道的其他部分）。

你能帮我改进一下吗？

此外，我欢迎任何关于改进逻辑本身的想法（也许我需要使用可变参数模板以使参数的数量灵活，但如果 C++11 标准适用，我必须与我们的技术负责人核实好的）。

理想情况下，我想避免我有两次完全相同的函数但每种类型都有不同的签名（一个用于字符串，一个用于整数）的情况。

提前谢谢了！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-04T09:00:04.103

我会将字符串拆分为字符串（如您所做的那样），然后将它们转换为所需的类型。

您可以使用`boost::lexical_cast`它，或者`std::stringstream`

```
template <typename To, typename From>
To cast(const From &arg)
{
    std::stringstream s;
    s << arg;
    To res;
    s >> res;

    if (s.fail())
    {
        //throw some_exception();
    }

    return res;
} 
```

无论如何，如果您`boost`有空，这是正确的方法

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-04T09:29:25.900

```
#include <algorithm>
#include <string>
#include <sstream>

template <typename T1, typename T2, typename T3>
void parse_string(const std::string& input, T1& out1, T2& out2,
                  T3& out3, char delimeter)
{
  std::istringstream is1(input);

  std::string field;
  for (int i = 0; std::getline(is1, field, delimeter) && i < 3; ++i)
  {
    std::istringstream is2(field);
    switch (i)
    {
    case 0: is2 >> out1; break;
    case 1: is2 >> out2; break;
    case 2: is2 >> out3; break;
    }

    if (is2.fail()) 
    {
      // do something about invalid type conversion?
    }
  }

  // up to you to decide what to do if the string has too
  // many or too few fields
} 
```

lexical_cast 会更安全！

# php - 使用 mysqli 将输入放入数据库

> ID：12723716
> 
> 赞同：0
> 
> 时间：2012-10-04T08:57:58.697
> 
> 标签：php, input, mysqli

我正在尝试使用 mysqli 将表单中的数据插入数据库。但是我没有让它工作：/

这是您填写表格后进入的页面中的代码。表单不是问题，因为变量 $headin $author 和 $thecontent 中都有数据。并且在真实代码数据库中用户名密码和名称具有真实值:)

```
<html>
<head>

<title>Send!</title>
</head>

<body>

<?php

 ini_set('display_errors', 1); error_reporting(E_ALL); 
$DB_HOST = 'localhost';
$DB_USER = '**';
$DB_PASS = '***';
$DB_NAME = '***';
@ $db = new mysqli($DB_HOST, $DB_USER, $DB_PASS, $DB_NAME);
if (mysqli_connect_errno()) {
echo 'Error.';
exit();
}

$author = $_POST['author']; 
$heading = $_POST['heading'];
$thecontent = $_POST['thecontent'];

$query = 'INSERT INTO articles ('heading', 'author', 'content')
 VALUES ('$heading','$author','$thecontent')';   

$result = $db->query($query);
    if ($result) {
    echo $db->affected_rows."This was added.";
    } 
    else {
    echo "somethings gone very wrong.";
    }

$db->close();

?> 

</body>
</html> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-04T08:59:09.427

您不能`'`在行名称上添加单引号，并且必须为 INSERT 添加双引号：

```
$query = "INSERT INTO articles (`heading`, `author`, `content`)
 VALUES ('$heading','$author','$thecontent')"; 
```

还要转义你的字符串：

```
$author = $db->real_escape_string($_POST['author']); 
$heading = $db->real_escape_string($_POST['heading']);
$thecontent = $db->real_escape_string($_POST['thecontent']); 
```

# c# - 无法访问作为 Windows 服务托管的 WCF url

> ID：12723719
> 
> 赞同：0
> 
> 时间：2012-10-04T08:58:13.047
> 
> 标签：c#, wcf, windows-services, wcf-wshttpbinding

我创建了一个 WCFLibrary，它具有：

```
 [OperationContract]
   string TestCall(); 
```

我的 app.config 有这个：

```
 <endpoint address="" binding="wsHttpBinding" contract="TestWCF.ITestService">
      <identity>
        <dns value="localhost" />
      </identity>
    </endpoint>
    <endpoint address="mex" binding="mexHttpBinding" contract="IMetadataExchange" />
    <host>
      <baseAddresses>
        <add baseAddress="http://localhost:8732/Design_Time_Addresses/TestWCF/TestService/" />
      </baseAddresses>
    </host> 
```

我的 Windowsservice 有这个：

```
 protected override void OnStart(string[] args)
    {
        host = new ServiceHost(typeof(TestWCF.TestService));
    } 
```

已编译 exe 并将其安装为服务，到目前为止一切都很好。

现在我想从浏览器检查这个网址：

```
*http://localhost:8732/Design_Time_Addresses/TestWCF/TestService* 
```

但由于某些原因，我无法调用托管在 Windows 服务中的 WCF，如果我遗漏了什么，可能会出现什么问题？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-04T09:02:00.383

```
protected override void OnStart(string[] args)
{
    host = new ServiceHost(typeof(TestWCF.TestService));
    host.Open(); // :-)
} 
```

# php - iframe 上的广告

> ID：12723721
> 
> 赞同：0
> 
> 时间：2012-10-04T08:58:17.023
> 
> 标签：php, javascript, html

我的网站包含充满内容的主要 iframe，但所有内容都仅在 iframe 内加载。我需要设置任何广告服务，但其中大多数需要蜘蛛一般内容而不是 iframe 内容。是否有任何受支持的方法可以在一般 html 内容上设置隐藏的 div 或书签？广告可以在 iframe 或一般内容上，但我还没有找到完整的解决方案。谢谢

# django - Django 网址不起作用

> ID：12723722
> 
> 赞同：0
> 
> 时间：2012-10-04T08:58:19.217
> 
> 标签：django, url

我在 django 上工作了很短的时间，而且我是新手。我遇到了 urls.py 文件的问题 - 这是代码：

```
url(r'^(?P<city>\w+)/(?P<main_type>\w+)/(?P<sub_type>\w+)/(?P<post_title_slug>\w+)$', 'postpage'), 
```

当我重定向（例如）到`website.com/Paris/Art/Graphics/Test-title-for-slug`

它不起作用 - 出现找不到页面。我究竟做错了什么？

我正在使用：Django 1.4.1

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-04T09:13:52.603

感谢您的帮助，但我解决了它 - 这是解决方案：

post_title_slug 格式错误，所以`(?P<post_title_slug>\w+)`我没有使用它`(?P<post_title_slug>[-\w]+)`

再次感谢，希望这会对某人有所帮助。

# c++ - 编译器不断告诉“'对象'尚未被声明”......？

> ID：12723726
> 
> 赞同：0
> 
> 时间：2012-10-04T08:58:33.020
> 
> 标签：c++, include, getter-setter

请参阅下面的代码：

**obj1.h**

```
class OBJ1 : public A_OBJ
{
  public:
    //virtual pure from A_OBJ
    virtual void m_method();

    int getterX();

  private:
    int x;
} 
```

**obj2.h**

```
class OBJ2 : public A_OBJ
{
  public:
    //virtual pure from A_OBJ
    virtual void m_method();

    void iWantX();
} 
```

**obj1.cpp**

```
#include "obj1.h"

OBJ1 obj1;

OBJ1::m_method()
{
  //do_something()
}
OBJ1::getterX()
{
  return x;
} 
```

**obj2.cpp**

```
#include "obj2.h"

OBJ2 obj2;

OBJ2::m_method()
{
  //do_something()
}
OBJ2::iWantX()
{
  int z = OBJ1::getterX();
} 
```

当我尝试编译那个简单的代码（`g++ obj1.cpp obj2.cpp _main_`）时，我不断收到一个恼人的错误：

`obj2.cpp: error: 'OBJ1' has not been declared`

我已经尝试过声明`OBJ1 obj1`和`obj2.cpp`其他事情，但没有任何效果......

你知道如何解决这个问题吗？谢谢 ！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-04T08:59:44.097

用一个简单的

```
#include "obj1.h" 
```

在`obj2.cpp`.

在此之后，以下将产生错误：

```
int z = OBJ1::getterX(); 
```

因为`getterX`不是`static`。要么 make 它`static`，要么在类的实例上调用它。

底线：从书中学习 C++。

# jquery - 如何在jquery中获取值并存储在页面中？

> ID：12723727
> 
> 赞同：0
> 
> 时间：2012-10-04T08:58:34.840
> 
> 标签：jquery, ruby-on-rails, ruby-on-rails-3

我有一个选择行的功能，它来自警报框中的选定值。现在我希望该值存储在页面而不是警报框中。

这是功能，

```
var generic_lookup_Enr_Rds_Section2009_selected = function(id, to_s) { alert(id + to_s)} 
```

它将所选值带入警报框中。我不想提醒值，而是想像标签或任何东西一样将值显示到页面中。可能吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-04T09:01:26.587

只需使用 jQuery[文本](http://api.jquery.com/text/)功能：

```
function putStringInDiv(id, to_s){ $("'#"+id+"'").text(to_s); } 
```

id 应该是你的 div 的 id。喜欢

```
<div id="myDiv"></div> 
```

然后调用该函数会将文本分配到 div 中：

```
putStringInDiv('myDiv','some text here'); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-04T09:01:57.770

```
var add = function(id, to_s) {
   $(id).html(to_s);
} 
```

您可能还想要`append`，`prepend`或[类似](http://api.jquery.com/category/manipulation/dom-insertion-inside/)的。

你基本上需要在你想要发短信的*地方调用函数。*假设您`span`的页面上有一个带有`class="placeholder"`. 不，你可以打电话`add("span.placeholder", "Some text that should be displayed in the span")`。

`id`可以是页面上的任何元素。是应从上方
`to_s`放入的任何有效字符串或元素。`id`

# google-cloud-messaging - android gcm项目ID混淆

> ID：12723733
> 
> 赞同：0
> 
> 时间：2012-10-04T08:58:56.227
> 
> 标签：google-cloud-messaging

我对 Android GCM 有几个问题

1.  GCM 中的 Project ID/Sender ID 有什么用。

2.  我可以为具有不同应用程序服务器代码的任意数量的服务器端应用程序使用相同的项目 ID（例如一个用于提供实时分数，一个用于新闻应用程序）

3.  为什么需要谷歌帐户？推送通知中如何使用 Google 帐户。是否用于身份验证？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-04T14:37:53.573

1.  当您为 GCM 注册您的应用程序/设备时，您必须提供发件人 ID。您取回的 RegID 与发件人相关联，位于 Google 数据深处的某个位置。这样，当服务器推送消息时，谷歌的系统可以将他们的身份验证回溯给发送者，并确保应用程序和服务器确实属于同一个实体。

2.  当然。只需重用身份验证标头即可。

3.  您需要一个 Google 帐户才能访问 Google API 控制台。Google 需要一种方法来识别和验证您（帐户所有者）的身份，以便其他人无法使用您的 GCM 设置。

编辑：这不是官方的，但他们声称手机需要一个与之关联的 Google 帐户，因为 GCM 在内部使用 GTalk。

# iphone - UIPickerView在选择器内消失的图像

> ID：12723735
> 
> 赞同：2
> 
> 时间：2012-10-04T08:58:58.343
> 
> 标签：iphone, ios, image, uipickerview

我正在尝试使用 UIPickerView 构建“老虎机”游戏。我使用 UIImageView 填充它。问题是，选择器视图中的随机图像在每次旋转后消失，并再次随机显示。它发生在带有 ios 5.1.1 的设备上，但在带有 ios4.2.1 和模拟器的设备上它工作得很好。现在我正在使用[CircularPickerView](http://www.maddyhome.com/forums/viewtopic.php?f=12&t=32)但在我使用 UIPickerView 之前，问题是一样的。这是屏幕截图：[http ://axgrzesiek.w.interii.pl/licznik.PNG](http://axgrzesiek.w.interii.pl/licznik.PNG)

GraViewController.h：

```
#import <UIKit/UIKit.h>

#import "CircularPickerView.h"
@interface GraViewController : UIViewController
    <UIPickerViewDataSource, UIPickerViewDelegate> {
        CircularPickerView *picker;
        UILabel *winLabel;
        NSArray *column1;
        NSArray *column2;
        NSArray *column3;

}
@property(nonatomic, retain) IBOutlet CircularPickerView *picker;
@property(nonatomic, retain) IBOutlet UILabel *winLabel;
@property(nonatomic, retain) NSArray *column1;
@property(nonatomic, retain) NSArray *column2;
@property(nonatomic, retain) NSArray *column3;
-(IBAction)spin;

@end 
```

GraViewController.m:

```
- (IBAction)spin { 
    BOOL win = NO;
    int numInRow = 1; 
    int lastVal = -1; 
    for (int i = 0; i < 3; i++) {
        int newValue = arc4random() % [self.column1 count];
        if (newValue == lastVal) 
            numInRow++;
        else
            numInRow = 1;

        lastVal = newValue; 
        //if (newValue < [self.column1 count] || newValue >= (2 * [self.column1 count]) ) {
            //newValue = newValue % [self.column1 count];
            //newValue += [self.column1 count];
        [self.picker selectRow:newValue inComponent:i animated:YES];

        //}
        NSLog(@"kol:%d %d",i, newValue);
        //[picker reloadComponent:i]; 
        if (numInRow >= 3)
            win = YES;
    } 
    if (win)
        winLabel.text = @"WIN!"; 
    else 
        winLabel.text = @"";

    //[picker reloadAllComponents];
    //[self performSelector:@selector(moveIntoPosition) withObject:nil afterDelay:0.5f];

- (void)viewDidLoad { 

    NSString  *title=@"Gra";
    [self setTitle:title];

    UIImage *seven = [UIImage imageNamed:@"jeden.png"]; 
    UIImage *bar = [UIImage imageNamed:@"dwa.png"]; 
    UIImage *crown = [UIImage imageNamed:@"trzy.png"]; 
    UIImage *cherry = [UIImage imageNamed:@"cztery.png"]; 
    UIImage *lemon = [UIImage imageNamed:@"piec.png"]; 
    UIImage *apple = [UIImage imageNamed:@"szesc.png"];
    for (int i = 1; i <= 3; i++) { 
        UIImageView *sevenView = [[UIImageView alloc] initWithImage:seven]; 
        UIImageView *barView = [[UIImageView alloc] initWithImage:bar]; 
        UIImageView *crownView = [[UIImageView alloc] initWithImage:crown]; 
        UIImageView *cherryView = [[UIImageView alloc] initWithImage:cherry]; 
        UIImageView *lemonView = [[UIImageView alloc] initWithImage:lemon];
        UIImageView *appleView = [[UIImageView alloc] initWithImage:apple]; 
        NSArray *imageViewArray = [[NSArray alloc] initWithObjects:
                                    sevenView, barView, crownView, cherryView, lemonView, appleView, nil];
        NSString *fieldName = [[NSString alloc] initWithFormat:@"column%d", i];
        [self setValue:imageViewArray forKey:fieldName];
        //column1=[[NSArray alloc]initWithArray:imageViewArray];
        //column2=[[NSArray alloc]initWithArray:imageViewArray];
        //column3=[[NSArray alloc]initWithArray:imageViewArray];
        [fieldName release];
        [imageViewArray release];
        [sevenView release]; 
        [barView release]; 
        [crownView release]; 
        [cherryView release]; 
        [lemonView release]; 
        [appleView release];
        //[picker selectRow: [self.column1 count] * (48 / 2) inComponent:i-1 animated:NO];
    }

}

- (UIView *)pickerView:(UIPickerView *)pickerView viewForRow:(NSInteger)row forComponent:(NSInteger)component reusingView:(UIView *)view {

    NSString *arrayName = [[NSString alloc] initWithFormat:@"column%d", component+1];
    NSArray *array = [self valueForKey:arrayName];
    [arrayName release];
    return [array objectAtIndex:row];

} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-04T09:50:29.410

我认为问题可能在于您为选择器重用视图的方式 - 您不应该自己缓存 UIImageViews（可能 UIPickerView 尝试在多个地方使用相同的 UIImageView，因此其中一个地方保持空置）。

正确的方法是存储 UIImage 实例并填充可能被选取器缓存的 UIImageView。样板代码（未测试）：

```
- (void) viewDidLoad{
 ...
 Here cache UIImages, not UIImageViews
 ...
}

- (UIView *)pickerView:(UIPickerView *)pickerView viewForRow:(NSInteger)row forComponent:(NSInteger)component reusingView:(UIView *)view {

    NSString *arrayName = [[NSString alloc] initWithFormat:@"column%d", component+1];
    NSArray *array = [self valueForKey:arrayName];
    [arrayName release];
    UIImage *image = [array objectAtIndex:row];

    if (!view){
       view = [[[UIImageView alloc] init] autorelease];
    }
    [(UIImageView*)view setImage:image];
    return view;
} 
```

# iphone - 如何更新视图控制器中的元素

> ID：12723737
> 
> 赞同：3
> 
> 时间：2012-10-04T08:59:00.613
> 
> 标签：iphone, objective-c, ios, view, controller

我对 Objective-C 开发相当陌生。在我从头开始构建的第一个应用程序中，我想画一个随着时间的推移而增加其大小的圆圈。问题是我已经能够在屏幕上移动圆圈，但似乎无法更新它的属性，所以它会变大或变小。

事情是这样的：

```
CCircle class

@interface CCircle : CShapes

@property float radius;
@property float startAngleRadians;
@property float endAngleRadians; 
```

在第一个视图控制器 (ShapesViewController.m) 中：

```
- (void) viewDidLoad
{
    (...)
    CCircle* circle = [[CCircle alloc] initWithFrame:frame];
    circle.radius = 40;
    circle.startAngleRadians = M_PI;
    circle.endAngleRadians = 2*M_PI;
    circle.tag = 1;
    [self.view addSubView:circle];

    //I also schedule an update method, so that it is called every 1 seconds.
    [NSTimer scheduledTimerWithTmieInterval:1.0 target:self selector:@selector(updateCircle) userInfo:nil repeats:YES];
} 
```

同样在 ShapesViewController.m 中，更新方法：

```
- (void) updateCircle
{
    CCircle *circle = [self.view viewWithTag:1];

    //Now here: if I do this: the circle will "move" through the screen
    CGRect frame = circle.frame;
    frame.origin.x += 5;
    [circle setFrame:frame];

    //However, if I try to change the circle properties, I don't know what to do so 
    //that affects the circle. In this case, the circle will move through the screen, 
    //but I keep seeing always the same size(radius).
    circle.radius += 5;

    //I've tried the following (of course, not all at the same time):
    //[self.vew addSubview:circle];
    //[self.view sendSubviewToBack:circle];
    //[self.view sendSubviewToFront:circle];
    //[self.view setNeedsDisplay];
    //[self.view setNeedsLayout];
} 
```

关于我做错了什么以及我应该做些什么来实现我想要的任何帮助？

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-04T09:03:04.287

画完圆圈后，你必须更新你的视图。

```
[self.view setNeedsDisplay]; 
```

我想这样就可以了。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-05T00:16:11.950

您更新了`circle`, not的属性，`self.view`因此您需要调用`setNeedsDisplay`.`circle`

# c++ - 增强功能和绑定外部符号

> ID：12723739
> 
> 赞同：0
> 
> 时间：2012-10-04T08:59:08.733
> 
> 标签：c++, visual-studio-2010, boost, linker

我需要在我的程序中使用绑定和函数。但不幸的是vs2010无法链接我的程序。我使用了 boost::bind 文档中的以下示例

```
#include <boost\bind.hpp>
#include <boost\function.hpp>
#include <functional>

class button
{
 public:

 boost::function<void()> onClick;
};

class player
{
 public:

  void play();
  void stop();
};

button playButton, stopButton;player thePlayer;

void connect()
{
playButton.onClick = boost::bind(&player::play, &thePlayer);
stopButton.onClick = boost::bind(&player::stop, &thePlayer);
}

void main(int argc, char* argv[])
{
connect();
} 
```

> 错误 1 ​​错误 LNK2019：函数“void __cdecl connect(void)”(?connect@@YAXXZ) 中引用的未解析外部符号“public: void __thiscall player::stop(void)”(?stop@player@@QAEXXZ)

我已经尝试了最新的 32 和 64 版本的 BoostPro 并按照本教程[http://www.youtube.com/watch?v=5AmwIwedTCM.All](http://www.youtube.com/watch?v=5AmwIwedTCM.All) but vs 仍然产生相同的错误...

VS2010项目设置include/lib路径 [https://dl.dropbox.com/u/47585151/vs.png](https://dl.dropbox.com/u/47585151/vs.png)

但是当我打开

> 链接器->常规->显示进度->搜索库 (/VERBOSE:Lib)

我注意到 VS 只搜索在

> 链接器->输入->附加依赖

[http://pastebin.com/BCpEt8Zq](http://pastebin.com/BCpEt8Zq)

是否可以在 vs2010 下检查 boost::bind 和 boost::function 需要哪个 .lib boost？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-04T09:01:22.593

这个问题与任何 boost 库都无关（两者都是 header-only）。尝试简单地从内部*调用* `start`and你应该得到同样的错误。仔细阅读它，它会告诉你缺少什么。`stop``connect`

# opencart - 多个opencart登录/注销问题

> ID：12723742
> 
> 赞同：1
> 
> 时间：2012-10-04T08:59:14.833
> 
> 标签：opencart

我在 OpenCart 中有 2 家商店。我已经建立了一个商店并将其放在域 1 上，然后将所有内容从商店 1 复制到商店 2。当我登录到商店 1 的管理员时，商店 2 的管理员被注销。

发现的问题： `$this->session->data['token']`- 这里商店 2 的值在登录到商店 1 时被更改。

有什么办法可以克服这个吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-04T10:34:31.617

最简单的解决方案是拥有两个独立的用户。任何用户都不应该同时在两个不同的商店使用两个相同的登录名。如果你真的想阻止它，你可以在你的`/admin/controller/common/home.php`

```
 || ($this->request->get['token'] != $this->session->data['token']) 
```

并删除它，但我建议不要这样做，因为这将停止任何用于阻止对您网站的 CSRF 攻击的令牌检查

# php - php 和 tcpdf 中 5 td 后的新 tr

> ID：12723745
> 
> 赞同：0
> 
> 时间：2012-10-04T08:59:18.037
> 
> 标签：php, html, html-table, tcpdf

在使用 TCPDF 制作 PDF 时，我`<tr>`每 5次获取一个新的有一点问题：`<td>`

```
$bricks = "";
$bricks .= '<table>';
$bricks .= '<tr>';

foreach($bricks_selected as $key => $value) {
    $num_check = substr($value, 4);

    if($num_check != "0") {                
        $bricks .= '<td width="90" height="80"><img src="/var/www/brickmixer/bricks/tavler/RT'.substr($value, 0, 3).'.jpg" width="80" height="55"><br><b>RT '. substr($value, 0, 3) .' - '. $num_check .'%</b></td>';       
    } 

} 
```

我尝试过除法等，但它给了我一些有趣的结果。

该`$bricks_selected`变量设置在脚本的顶部：

```
foreach($_POST as $key => $value) {
    if($key == "bricks-selected") {
        $bricks_selected = explode("&", $value);
    }
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-04T09:05:01.307

添加一个增量变量并检查每 5 个`td`：

```
$i = 1;
foreach($bricks_selected as $key => $value) {
    $num_check = substr($value, 4);
    if($num_check != "0") {                
        $bricks .= '<td width="90" height="80"><img src="/var/www/brickmixer/bricks/tavler/RT'.substr($value, 0, 3).'.jpg" width="80" height="55"><br><b>RT '. substr($value, 0, 3) .' - '. $num_check .'%</b></td>';       
    } 
    if($i%5 == 0){
         echo '</tr><tr>';
    }
    $i++;
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-04T09:04:14.097

你尝试创建一个像 $i 这样的增量变量，并且`if ($i%5==0) {/* you have to close </tr> and open new <tr>*/}` `else {/* you do other thing*/}`

# python - 将未知格式的日期字符串转换为日期时间

> ID：12723746
> 
> 赞同：2
> 
> 时间：2012-10-04T08:59:19.627
> 
> 标签：python, datetime

我正在构建一个通用的自定义`strToDatetime(string)`函数。日期字符串可能有一些不同的格式。两个最受欢迎的替代方案似乎`datetime.strptime(string, format)`和`dateutil.parser(string)`. 它似乎`datetime.strptime()`需要一种格式而`dateutil.parser()`不是，所以可能的解决方案似乎是：

1.  测试日期字符串模式以查找日期字符串格式并使用`datetime.strptime()`
2.  采用`dateutil.parser()`

它是否正确？备选方案 1（更难，将来可能需要维护）具有优势，例如性能？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-04T09:12:41.497

dateutil的`parse()`方法非常灵活，几乎可以解析你扔给它的任何东西。

但是，由于这种灵活性，如果您的输入仅限于一定数量的模式，那么检查这些模式的自定义代码然后使用`datetime.datetime.strptime()`可以轻松击败它。

由于这完全取决于您需要测试的模式数量，因此您唯一能做的就是*衡量*哪个模式*对于您的特定*用例更快。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-04T09:26:35.110

我总是选择最简单的（dateutil.parser），总是有人为您完成工作，并且不太可能在格式错误（根据您的格式）日期吐出错误。

当然，**有时你会希望它在格式不正确、可能不明确的日期抛出错误，**在这种情况下你应该使用`strptime`!

### 性能测试：

我打电话给`parse(d)`每个`datetime.datetime.strptime(d, f)`100,000 次。

```
parse(d) took 5.62201309204 seconds
datetime.datetime.strptime(d, f) took 1.78140687943 seconds
    (where d = '11-02-1980' and f = '%m-%d-%Y') 
```

*似乎如果您知道精确的日期格式，那么`strptime`速度会快 3 倍左右，当然这不是一个非常科学的实验，但我认为它给出了一个很好的指示。*

那么这种轻微的速度提升值得额外的不必要的并发症/头痛吗？这取决于你（但可能不是）。

# visual-studio - 可用于替换 F12 命令的 C# 工具

> ID：12723747
> 
> 赞同：0
> 
> 时间：2012-10-04T08:59:20.543
> 
> 标签：visual-studio, go-to-definition

我很好奇是否有可用于嵌入的工具，因此 C# 中的函数名称可以有一个链接以便跳转到它的定义。在这种情况下，无需右键单击并选择“转到定义”或 F12。我很难解释我的意思。希望有人能理解。非常感谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-04T09:03:28.160

Ctrl + 鼠标左键可以解决问题。只需 Ctrl+单击函数的名称。（假设您使用带有 JetBrains ReSharper 插件的 Visual Studio）。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-09T06:13:07.040

Visual Studio 库中有一个扩展，它允许 Ctrl+单击导航

[http://visualstudiogallery.msdn.microsoft.com/4b286b9c-4dd5-416b-b143-e31d36dc622b?SRC=VSIDE](http://visualstudiogallery.msdn.microsoft.com/4b286b9c-4dd5-416b-b143-e31d36dc622b?SRC=VSIDE)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-04T09:03:50.010

不确定我是否理解您的需求，但[JetBrains 的 ReSharper](http://www.jetbrains.com/resharper/)是 Visual Studio 的一个非常强大的插件。

其中一个功能是替代“转到定义”功能。

# html - IE9 兼容模式显示链接轮廓，其中 IETester Tabs 7/8 不显示

> ID：12723748
> 
> 赞同：1
> 
> 时间：2012-10-04T08:59:35.450
> 
> 标签：html, css, internet-explorer, cross-browser, ietester

[http://jsfiddle.net/B4van/](http://jsfiddle.net/B4van/)

我已经设置了这个基本的小提琴。

正如我在标题中所说 - 使用 IETester 浏览时，几乎总是在单击链接时添加到链接的轮廓虚线边框在 IE7/8 中不可见，但边框在 IE9 兼容模式下显示。

由于其他开发人员仅使用 IE9，他正在使用兼容模式测试页面，并反复通知我必须删除虚线边框。他要求我为`onfocus="if(this.blur)this.blur();"`页面上的每个链接添加。

我在其他开发人员之前的作品中注意到，他正在认真使用这个`onfocus`片段。虽然，这是我第一次看到那些防止轮廓边框的东西。

好吧，这对我来说似乎是错误和奇怪的，尤其是当有很多链接时，所以我现在在这里问。它只是 IE9 兼容模式错误，还是我真的必须附加`onfocus`代码段？

我一直，现在用 CSS 设置它：

```
a, a:focus
{
    outline: none;
} 
```

但它似乎不起作用。

也许拥有本机 IE7/8 的人（好吧，也许在虚拟操作系统上，但比 IE Tester 更本机）可以测试它并报告结果？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-11T11:15:45.837

根据[http://www.w3schools.com/cssref/pr_outline.asp](http://www.w3schools.com/cssref/pr_outline.asp)

仅当指定了 !DOCTYPE 时，IE8 才支持大纲。所以是的，它清楚地表明，IE7 甚至还没有接近支持它。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-06T09:20:32.167

你可以试试这个

```
a:active {outline:expression(this.onFocus=this.blur());} 
```

[Internet Explorer 链接大纲 | css5](http://www.css5.de/css/gepunktete-linie-um-links-im-internet-explorer-entfernen/)

# python - 替换字符串中某个字符的实例

> ID：12723751
> 
> 赞同：169
> 
> 时间：2012-10-04T08:59:40.620
> 
> 标签：python, string

这个简单的代码试图用冒号替换分号（在 i 指定的位置）不起作用：

```
for i in range(0,len(line)):
     if (line[i]==";" and i in rightindexarray):
         line[i]=":" 
```

它给出了错误

```
line[i]=":"
TypeError: 'str' object does not support item assignment 
```

我该如何解决这个问题，用冒号替换分号？使用替换不起作用，因为该函数不需要索引 - 可能有一些分号我不想替换。

**例子**

在字符串中，我可能有任意数量的分号，例如“Hei der! ; Hello there ;!;”

我知道要替换哪些（我在字符串中有它们的索引）。使用替换不起作用，因为我无法使用索引。

* * *

## 回答 #1

> 赞同：293
> 
> 时间：2012-10-04T09:01:49.637

python 中的字符串是不可变的，因此您不能将它们视为列表并分配给索引。

改用[`.replace()`](http://docs.python.org/library/stdtypes.html#str.replace)：

```
line = line.replace(';', ':') 
```

如果您只需要替换*某些*分号，则需要更具体。您可以使用切片来隔离要替换的字符串部分：

```
line = line[:10].replace(';', ':') + line[10:] 
```

这将替换字符串前 10 个字符中的所有分号。

* * *

## 回答 #2

> 赞同：71
> 
> 时间：2015-09-02T07:20:15.290

如果您不想使用，您可以执行以下操作，用给定索引处的相应字符替换任何字符`.replace()`

```
word = 'python'
index = 4
char = 'i'

word = word[:index] + char + word[index + 1:]
print word

o/p: pythin 
```

* * *

## 回答 #3

> 赞同：24
> 
> 时间：2012-10-04T09:10:13.123

将字符串变成列表；然后您可以单独更改字符。然后你可以把它放回去`.join`：

```
s = 'a;b;c;d'
slist = list(s)
for i, c in enumerate(slist):
    if slist[i] == ';' and 0 <= i <= 3: # only replaces semicolons in the first part of the text
        slist[i] = ':'
s = ''.join(slist)
print s # prints a:b:c;d 
```

* * *

## 回答 #4

> 赞同：6
> 
> 时间：2012-10-04T09:06:50.610

如果要替换单个分号：

```
for i in range(0,len(line)):
 if (line[i]==";"):
     line = line[:i] + ":" + line[i+1:] 
```

不过还没有测试过。

* * *

## 回答 #5

> 赞同：4
> 
> 时间：2017-12-15T13:49:19.263

您不能简单地为字符串中的字符赋值。使用此方法替换特定字符的值：

```
name = "India"
result=name .replace("d",'*') 
```

输出：In*ia

此外，如果您想替换除第一个字符之外的所有第一个字符出现的say *，例如。字符串 = babble 输出 = ba**le

代码：

```
name = "babble"
front= name [0:1]
fromSecondCharacter = name [1:]
back=fromSecondCharacter.replace(front,'*')
return front+back 
```

* * *

## 回答 #6

> 赞同：3
> 
> 时间：2012-10-04T09:07:15.357

这应该涵盖更一般的情况，但您应该能够根据您的目的对其进行自定义

```
def selectiveReplace(myStr):
    answer = []
    for index,char in enumerate(myStr):
        if char == ';':
            if index%2 == 1: # replace ';' in even indices with ":"
                answer.append(":")
            else:
                answer.append("!") # replace ';' in odd indices with "!"
        else:
            answer.append(char)
    return ''.join(answer) 
```

* * *

## 回答 #7

> 赞同：2
> 
> 时间：2019-10-17T08:40:21.213

要在字符串上有效地使用 .replace() 方法而不创建单独的列表，例如查看包含带有一些空格的字符串的列表用户名，我们希望在每个用户名字符串中用下划线替换空格。

```
names = ["Joey Tribbiani", "Monica Geller", "Chandler Bing", "Phoebe Buffay"]
usernames = [] 
```

要替换每个用户名中的空格，请考虑使用 python 中的 range 函数。

```
for name in names:
    usernames.append(name.lower().replace(' ', '_'))

print(usernames) 
```

或者，如果您想使用一个列表：

```
for user in range(len(names)):
   names[user] = names[user].lower().replace(' ', '_')

print(names) 
```

* * *

## 回答 #8

> 赞同：1
> 
> 时间：2016-05-25T14:51:40.010

如果您要替换为变量“n”中指定的索引值，请尝试以下操作：

```
def missing_char(str, n):
 str=str.replace(str[n],":")
 return str 
```

* * *

## 回答 #9

> 赞同：1
> 
> 时间：2018-07-03T19:11:20.797

这个怎么样：

```
sentence = 'After 1500 years of that thinking surpressed'

sentence = sentence.lower()

def removeLetter(text,char):

    result = ''
    for c in text:
        if c != char:
            result += c
    return text.replace(char,'*')
text = removeLetter(sentence,'a') 
```

* * *

## 回答 #10

> 赞同：0
> 
> 时间：2018-12-19T09:00:05.567

替换特定索引处的字符，函数如下：

```
def replace_char(s , n , c):
    n-=1
    s = s[0:n] + s[n:n+1].replace(s[n] , c) + s[n+1:]
    return s 
```

其中 s 是字符串，n 是索引，c 是字符。

* * *

## 回答 #11

> 赞同：0
> 
> 时间：2019-04-23T18:41:03.950

我编写了这个方法来替换字符或替换特定实例的字符串。实例从 0 开始（如果您将可选的 inst 参数更改为 1，并将 test_instance 变量更改为 1，则可以轻松地将其更改为 1。

```
def replace_instance(some_word, str_to_replace, new_str='', inst=0):
    return_word = ''
    char_index, test_instance = 0, 0
    while char_index < len(some_word):
        test_str = some_word[char_index: char_index + len(str_to_replace)]
        if test_str == str_to_replace:
            if test_instance == inst:
                return_word = some_word[:char_index] + new_str + some_word[char_index + len(str_to_replace):]
                break
            else:
                test_instance += 1
        char_index += 1
    return return_word 
```

* * *

## 回答 #12

> 赞同：0
> 
> 时间：2020-01-29T21:43:49.410

你可以这样做：

```
string = "this; is a; sample; ; python code;!;" #your desire string
result = ""
for i in range(len(string)):
    s = string[i]
    if (s == ";" and i in [4, 18, 20]): #insert your desire list
        s = ":"
    result = result + s
print(result) 
```

* * *

## 回答 #13

> 赞同：0
> 
> 时间：2020-04-09T11:48:05.680

```
names = ["Joey Tribbiani", "Monica Geller", "Chandler Bing", "Phoebe Buffay"]

usernames = []

for i in names:
    if " " in i:
        i = i.replace(" ", "_")
    print(i) 
```

输出：Joey_Tribbiani Monica_Geller Chandler_Bing Phoebe_Buffay

* * *

## 回答 #14

> 赞同：0
> 
> 时间：2021-02-26T19:59:54.163

我的问题是我有一个数字列表，我只想替换该数字的一部分，所以我这样做：

```
original_list = ['08113', '09106', '19066', '17056', '17063', '17053']

# With this part I achieve my goal
cves_mod = []
for i in range(0,len(res_list)):
    cves_mod.append(res_list[i].replace(res_list[i][2:], '999'))
cves_mod

# Result
cves_mod
['08999', '09999', '19999', '17999', '17999', '17999'] 
```

* * *

## 回答 #15

> 赞同：0
> 
> 时间：2021-05-20T18:18:08.817

更简单：

```
input = "a:b:c:d"
output =''
for c in input:
    if c==':':
        output +='/'
    else:
        output+=c
print(output) 
```

输出：a/b/c/d

# javascript - 从 url 到 history.js 中的 ajax 调用

> ID：12723752
> 
> 赞同：0
> 
> 时间：2012-10-04T08:59:41.053
> 
> 标签：javascript, jquery, ajax, web, history.js

我正在写一个小网站，其中有几个非常相似的页面。大多数时候，只有一个 div 的内容不同。导航、标题等保持不变。

所以我用“基本”html文件实现了这一点，一些较小的html文件只有一个content-div和这样的javascript代码（由按钮点击事件触发）：

```
$.get("content/text1.html", function(data) {
    $("#content").html(data);
}); 
```

这非常顺利，但问题是地址栏中的 url 不会随着这些请求而改变。因此，用户不可能链接到某些页面。我知道#-urls 是可能的，但我想要这样的网址：

> example.com/talks/foo/bar

而不是一些解决方法。

在另一个 Thread 中，有人给了我关于 html5 浏览器历史 API（尤其是[history.js](https://github.com/balupton/history.js "历史.js")）的提示。

我想用它实现什么：

1.  有人单击按钮-> 触发 ajax 请求并更新 content-div 的内容-> url 更新为类似`example.com/talks/foo/bar`
2.  如果有人`example.com/talks/foo/bar`直接在他的浏览器中请求，应该执行与（1）相同的ajax请求和内容更新

我试图通过以下方式实现第一个：

```
$.get("content/text1.html", function(data) {
    $("#content").html(data);
    History.pushState(null, null, "content/text1.html"); 
}); 
```

但是我应该如何达到第二点呢？使用重写器，将所有内容重定向到 base-html 文件和其中的一些 js 逻辑以解码 url 并触发 ajax 请求？

我有一种感觉，我有点走错路了..

* * *

*   那么这是应该使用history.js 的方式吗？

*   我怎样才能达到第二个要点？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-10T13:55:54.920

要在 html5 浏览器中获取初始状态，不需要 ajax 调用。就像你说的 url 本身被改变了，而不是哈希，所以服务器应该用已经加载的正确内容回复 url。

您应该在`statechange`事件处理程序中执行所有 ajax 调用和 DOM 操作。

因此，当用户单击链接时，您所做的就是调用和处理事件处理`pushState`程序中的 DOM 更改。`statechange`这是有效的，因为在被调用`statechange`时触发。`pushState`

# restructuredtext - 在重组文本中引用表

> ID：12723755
> 
> 赞同：3
> 
> 时间：2012-10-04T08:59:49.233
> 
> 标签：restructuredtext

无论如何要在 RestructuredText 中引用表格吗？类似
见表`referencetable`_ 的东西
（我看到了一些参考数字的解决方法。虽然找不到引用表的方法..）

谢谢！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-06T11:09:58.200

您可以简单地定义一个[超链接目标](http://docutils.sourceforge.net/docs/user/rst/quickref.html#internal-hyperlink-targets)。

```
Here is table-1_.

.. _table-1:

+------------+------------+-----------+
| Header 1   | Header 2   | Header 3  |
+============+============+===========+
| body row 1 | column 2   | column 3  |
+------------+------------+-----------+
| body row 2 | Cells may span columns.|
+------------+------------+-----------+
| body row 3 | Cells may  | - Cells   |   
+------------+ span rows. | - contain |
| body row 4 |            | - blocks. |
+------------+------------+-----------+ 
```

# excel - 使用 VBA 代码更新 powerpoint 中的嵌入式 excel 枢轴

> ID：12723757
> 
> 赞同：1
> 
> 时间：2012-10-04T08:59:51.633
> 
> 标签：excel, vba, pivot-table, powerpoint, refresh

我在嵌入的 powerpoint 中有一些数据透视表。我选择嵌入而不是常规链接，因为我需要每天更新数据透视表并且需要对它们进行整形以仅提供相关信息。（有时数据比前一天更多，在正常链接时无法看到“窗口”是固定的。）

我对 VBA 编码领域仍然很陌生，需要一个代码来打开我的 Microsoft excel 工作表对象，然后刷新对象内的枢轴并再次关闭它。我已经编写了代码来打开文档，保存并关闭正常工作的文档。我只需要一点点刷新。

提前谢谢了

# html - 如何正确使用 CSS “display: inline-block”？

> ID：12723759
> 
> 赞同：0
> 
> 时间：2012-10-04T08:59:52.857
> 
> 标签：html, css

我在使用这个 html/css 编码时遇到了布局问题。实际上我希望符号垂直对齐到 div 的中心。

第二种布局显示良好，浮动值设置为子 div 上的左侧。

第一个布局有什么问题。有任何想法吗？

这是代码

```
<html>
<head>
<style type="text/css">

    div, p {
        margin:0;
        padding:0;
    }

    div.wrapper {
        background: #FFFFFF;
        border-radius: 3px;
        padding: 20px;
    }

    /* LAYOUT 1 STYLE */
    div.list1 div {
        display: inline-block;
    }

    div.thumb1 {
        border:#3C6BBC 2px solid;
        border-radius: 2px;
        width: 120px;
        height: 120px;
    }

    div.symbol1 {
        font-size: 25px;
        width: 20px;
        height: 70px;
        margin: 2px;
        text-align: center;
        padding-top:50px;
    }

    /* LAYOUT 2 STYLE */
    div.list2 {
        overflow: hidden;
    }

    div.list2 div {
       float: left;
    }

    div.thumb2 {
        border:#3C6BBC 2px solid;
        border-radius: 2px;
        width: 120px;
        height: 120px;
    }

    div.symbol2 {
        font-size: 25px;
        width: 20px;
        height: 70px;
        margin: 2px;
        text-align: center;
        padding-top:50px;
    }

</style>
</head>

<body>

<div class="wrapper" id="layout1">
    <h1>MAIN HEADING</h1>
    <h2>Sub Heading</h2>

    <div class="list1">
        <div class="thumb1"></div>
        <div class="symbol1"><p>+</p></div>
        <div class="thumb1"></div>
        <div class="symbol1"><p>+</p></div>
        <div class="thumb1"></div>
        <div class="symbol1"><p>=</p></div>
        <div class="thumb1"></div>
    </div>
</div>

<div class="wrapper" id="layout2">
    <h1>MAIN HEADING</h1>
    <h2>Sub Heading</h2>

    <div class="list2">
        <div class="thumb2"></div>
        <div class="symbol2"><p>+</p></div>
        <div class="thumb2"></div>
        <div class="symbol2"><p>+</p></div>
        <div class="thumb2"></div>
        <div class="symbol2"><p>=</p></div>
        <div class="thumb2"></div>
    </div>
</div>

</body>
</html> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-04T09:03:10.937

只要给`vertical-align:middle`你下面提到的课程

```
 div.list1 div {
    display: inline-block;
    vertical-align: middle;
} 
```

**[演示](http://tinkerbin.com/NGDA3DlE)**

# css - 更改默认样式或隐藏移动选择元素（不丢失其功能）

> ID：12723765
> 
> 赞同：0
> 
> 时间：2012-10-04T09:00:14.387
> 
> 标签：css, forms, mobile, select

我正在尝试为移动设备上的选择列表创建一种替代样式。我想要的是使用我自己的样式按钮来激活选择列表选项。在 iPhone 和 Android 上，这会为您提供一个带有选项的弹出窗口。我通过将按钮样式应用于选择元素的标签来完成这项工作。但是，我无法在不禁用其功能的情况下正确地从视图中隐藏选择元素。有谁知道如何做到这一点？

我的 html 看起来像这样：

```
<label class="button-sort">
    <select>
        <option>Option 1</option>
        <option>Option 1</option>
    </select>
</label> 
```

# c++ - 致命错误 LNK1169：找到一个或多个多重定义的符号

> ID：12723766
> 
> 赞同：1
> 
> 时间：2012-10-04T09:00:15.843
> 
> 标签：c++, fatal-error, symbols

我收到此错误：

```
fatal error LNK1169: one or more multiply defined symbols found 
```

下面是两个包含代码的文件。在文件 1 中，我有`main()`函数，我正在调用写在第二个名为`linklist.cpp`. 感谢您提前提供帮助。

文件 1 - main.cpp

```
#include "stdafx.h"
# include "linklist.cpp"

int main(int argc, _TCHAR* argv[])
{
    node *link_list2;
    link_list2 = createList(31);
    addFront(link_list2,33);
    printList(link_list2);
    printf("Hello There Omer Obaid khan\n");
    return 0;
} 
```

文件 2 - 链接列表.cpp

```
# include "stdafx.h"
# include <stdlib.h>
struct node{
    node * next;
    int nodeValue;

};

node* initNode(int number);
node* createList (int value);
void addFront (node *head, int num );
void deleteFront(node*num);
void destroyList(node *list);
int getValue(node *list);

node*createList (int value)  /*Creates a Linked-List*/
{
    node *dummy_node = (node*) malloc(sizeof (node));
    dummy_node->next=NULL;
    dummy_node->nodeValue = value;
    return dummy_node;
}

void addFront (node *head, int num ) /*Adds node to the front of Linked-List*/
{
    node*newNode = initNode(num);   
    newNode->next = NULL;
    head->next=newNode;
    newNode->nodeValue=num;
}

void deleteFront(node*num)   /*Deletes the value of the node from the front*/
{
    node*temp1=num->next;

    if (temp1== NULL) 
    {
        printf("List is EMPTY!!!!");
    }
    else
    {
        num->next=temp1->next;
        free(temp1);
    }

}

void destroyList(node *list)    /*Frees the linked list*/
{
    node*temp;
    while (list->next!= NULL) 
    {
        temp=list;
        list=temp->next;
        free(temp);
    }
    free(list);
}

int getValue(node *list)    /*Returns the value of the list*/
{
    return((list->next)->nodeValue);
}

void printList(node *list)   /*Prints the Linked-List*/
{

    node*currentPosition;
    for (currentPosition=list->next; currentPosition->next!=NULL; currentPosition=currentPosition->next)  
    {
        printf("%d \n",currentPosition->nodeValue);
    }   
    printf("%d \n",currentPosition->nodeValue);

}

node*initNode(int number) /*Creates a node*/
{
    node*newNode=(node*) malloc(sizeof (node));
    newNode->nodeValue=number;
    newNode->next=NULL;
    return(newNode);
} 
```

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-10-04T09:01:18.777

之后我停止阅读`# include "linklist.cpp"`。**不要在其他实现文件中包含实现文件。**（除非您正在进行批量构建，我对此表示怀疑）。头文件中的单独声明并包含它们，并将定义保留在实现文件中。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-04T09:13:37.080

您有两种方法可以解决您的问题：

首先是在 Luchian Grigore 的回答中给出的。创建单独的标题并将其包含在主文件中。

第二个是使用项目选项从构建中排除文件 linklist.cpp。以其他方式，此文件将被构建两次：在他自己的构建期间和在主文件构建期间。

但是，第二种方式不是很好的编程风格。最好创建头文件。

# iphone - NavigationController 中的 NavigationBar 未显示在 IB StoryBoard 中

> ID：12723767
> 
> 赞同：2
> 
> 时间：2012-10-04T09:00:16.273
> 
> 标签：iphone, ios, storyboard, navigationcontroller, navigationbar

我的第一个视图是带有根视图的 UINavigationController，它在 .storyboard 的 IB 中正确显示了 NavigationBar。我认为当我在 IB 中进行设计时这很好，所以我知道比例，因为使用导航栏时视图变得更小了。来自 navcontroller 的导航栏被推送到我的应用程序中的所有视图上，但在 IB 中，该栏没有显示，因此很难弄清楚它的外观。我选择了“推断”，我认为 NavController 应该自动实现它，可以只选择“navigationcontroller”作为模拟指标的顶部栏吗？在我的一些视图控制器中，导航栏在那里，所有设置都是“推断的”。

谢谢。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-10-04T09:02:59.597

在 Attributes Inspector 的 StoryBoard 文件中的每个 viewController 中都有几个下拉菜单。

其中之一是“顶栏”。

如果将其设置为“推断”，则导航栏将仅在其父视图显示导航栏时显示（父视图在与其相连接的视图中）。

在您的层次结构中的某处将顶部栏选项设置为无（或可能全部）。

无论如何，如果你改变它，它将在 IB 中显示顶部栏。

HTH。

# java - 从子元素创建 XPath

> ID：12723772
> 
> 赞同：0
> 
> 时间：2012-10-04T09:00:32.733
> 
> 标签：java, xml, dom

我想为我的 XML 文档中的所有标签添加一个`XPath`属性。`<definition>`XPath 的值将来自`<term>Test123</term>`每个标签内的嵌套`<definition>`标签。我正在使用该`import org.w3c.dom.Document;`对象。当我用我非常长的 XML 文件运行这一行时，它告诉我有 539 个`<definition>`标记实例：

```
System.out.println(inputDOM.getDocumentElement().getElementsByTagName("definition")); 
```

所以最终结果是必须有一个`Document`对象设置了术语标签中的所有定义标签，例如

`<definition XPath="Test123"> <term>Test123</term> </definition>`

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-04T09:48:17.300

尝试这样的事情

```
NodeList definitionElements = inputDOM.getElementsByTagName("definition");
for (int i = 0; i < definitionElements.getLength(); i++) {
    Element current = (Element) definitionElements.item(i);
    Node term = current.getElementsByTagName("term").item(0);
    if(term != null && term.getNodeType() == Node.ELEMENT_NODE)
        current.setAttribute("XPath", ((Element) term).getTextContent());
} 
```

首先我们得到所有`<definition>`标签。之后我们迭代每个`<definition>`标签并设置一个新的属性“XPath”，其值为`<term>`子标签的文本内容

# java - 运行java应用程序

> ID：12723775
> 
> 赞同：0
> 
> 时间：2012-10-04T09:01:02.203
> 
> 标签：java, lucene

我需要通过 main 方法在本地调用它来测试下面提到的方法

```
public TokenFilter create(TokenStream input) {
  if (protectedWords != null){
      input = new KeywordMarkerFilter(input,protectedWords);
  }

return new KStemFilter(input); 
```

}

我面临的问题是我需要传递一个字符串作为输入，但我不确定如何将其解析为令牌流。

请帮忙。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-04T09:25:40.727

要从搜索文本中获取 TokenString，您必须为此使用 Analyzer：

```
Analyzer analyzer = ...; // your analyzer
TokenStream tokenStream = analyzer.tokenStream(null, new StringReader(searchText)); 
```

请注意，它应该与用于构建索引的分析器相同。

# sql - 部分非规范化独角兽观察

> ID：12723776
> 
> 赞同：6
> 
> 时间：2012-10-04T09:01:05.987
> 
> 标签：sql, oracle, gaps-and-islands

有许多研究人员在[复活节岛](http://en.wikipedia.org/wiki/Easter_Island)^(1上观察世界上仅存的)[独角兽](https://meta.stackexchange.com/questions/37328/my-godits-full-of-unicorns)。每天，研究人员都会记录他们看到了哪只独角兽、目击的日期、每只独角兽的婴儿数量以及目击发生时它们是否喝醉了。这些被单独上传到一个中央位置，然后每天向我吐出一个包含所有新观察结果的平面文件。

我有一个看起来像这样的表来包含信息：

```
create table unicorn_observations (
     observer_id number not null
   , unicorn_id number not null
   , created date not null -- date the record was inserted into the database
   , lastseen date not null -- date the record was last seen
   , observation_date date not null
   , no_of_babies number not null
   , drunk varchar2(1) not null
   , constraint pk_uo primary key ( observer_id, unicorn_id, created )
   , constraint chk_uo_babies check ( no_of_babies >= 0 )
   , constraint chk_uo_drunk check ( drunk in ('y','n') )
     ); 
```

该表在 `observer_id`、`unicorn_id`和`observation_date`或上分别是唯一的`lastseen`。

有时，管理数据输出的[Cobold](http://en.wikipedia.org/wiki/COBOL) [原文如此] 会稍微出错，并重新输出相同的数据两次。在这种情况下，我更新`lastseen`而不是创建新记录。我*只*在每列都相同的情况下这样做

不幸的是，研究人员并不完全了解第三范式。每个月他们都会上传前几个月对几只独角兽的观察，即使没有进行新的观察。他们使用*new* `observation_date`执行此操作，这意味着将新记录插入到表中。

我有一个单独的`created`和`lastseen`完整的可追溯性，因为研究人员有时会延迟提交一些观察结果。这些是由数据库创建的，不是提交信息的一部分。

这是一些示例数据（部分更改了列名，以便在没有滚动条的情况下使其适合）。

```
+--------+--------+-----------+------------+------- ----+---------+--------+
| OBS_ID | UNI_ID | 创建 | 最后一次 | OBS_DATE | #婴儿 | 醉酒 |
+--------+--------+-----------+------------+------- ----+---------+--------+
| 1 | 1 | 2011 年 11 月 1 日 | 2011 年 11 月 1 日 | 11 年 10 月 31 日 | 10 | n |
| 1 | 2 | 2011 年 11 月 1 日 | 2011 年 11 月 1 日 | 11 年 10 月 31 日 | 10 | n |
| 1 | 3 | 2011 年 11 月 1 日 | 2011 年 11 月 1 日 | 11 年 10 月 31 日 | 10 | n |
| 1 | 6 | 11 年 11 月 10 日 | 11 年 11 月 10 日 | 2011 年 11 月 7 日 | 0 | n |
| 1 | 1 | 11 年 11 月 17 日 | 11 年 11 月 17 日 | 11 年 4 月 9 日 | 10 | n |
| 1 | 2 | 11 年 11 月 17 日 | 11 年 11 月 17 日 | 11 年 4 月 9 日 | 10 | n |
| 1 | 3 | 11 年 11 月 17 日 | 11 年 11 月 17 日 | 11 年 4 月 9 日 | 10 | n |
| 1 | 6 | 11 年 11 月 17 日 | 11 年 11 月 17 日 | 11 年 11 月 17 日 | 0 | n |
| 1 | 6 | 2011 年 12 月 1 日 | 2011 年 12 月 1 日 | 2011 年 12 月 1 日 | 0 | n |
| 1 | 6 | 2012 年 1 月 1 日 | 2012 年 1 月 1 日 | 2012 年 1 月 1 日 | 3 | n |
| 1 | 6 | 2012 年 2 月 1 日 | 2012 年 2 月 1 日 | 2012 年 2 月 1 日 | 0 | n |
| 1 | 6 | 2012 年 3 月 1 日 | 2012 年 3 月 1 日 | 2012 年 3 月 1 日 | 0 | n |
| 1 | 6 | 01-APR-12 | 01-APR-12 | 01-APR-12 | 0 | n |
| 1 | 1 | 12 年 4 月 19 日 | 12 年 4 月 19 日 | 12 年 4 月 19 日 | 7 | 是 |
| 1 | 2 | 12 年 4 月 19 日 | 12 年 4 月 19 日 | 12 年 4 月 19 日 | 7 | 是 |
| 1 | 3 | 12 年 4 月 19 日 | 12 年 4 月 19 日 | 12 年 4 月 19 日 | 7 | 是 |
| 1 | 6 | 2012 年 5 月 1 日 | 2012 年 5 月 1 日 | 2012 年 5 月 1 日 | 0 | n |
+--------+--------+-----------+------------+------- ----+---------+--------+

```

我想对这些观察进行部分非规范化，以便如果收到具有相同`observer_id`,和（有效负载）但更新的*新*`unicorn_id`记录，我会更新表中的新列，而不是插入新记录。在这种情况下，我仍然会更新。`no_of_babies``drunk` *`observation_date``last_observation_date``lastseen`*

 *我需要这样做，因为我有许多与此表相关的复杂的独角兽相关查询；研究人员每月上传大约 1000 万次带有新日期的旧观测数据，而我每月收到大约 900 万条真正的新记录。我已经跑了一年，已经有 2.25 亿个独角兽观察。由于我只需要知道每个有效负载组合的最后观察日期，我宁愿大量减小表的大小并为自己节省大量时间来全面扫描它。

这意味着该表将变为：

```
create table unicorn_observations (
     observer_id number not null
   , unicorn_id number not null
   , created date not null -- date the record was inserted into the database
   , lastseen date not null -- date the record was last seen
   , observation_date date not null
   , no_of_babies number not null
   , drunk varchar2(1) not null
   , last_observation_date date
   , constraint pk_uo primary key ( observer_id, unicorn_id, created )
   , constraint chk_uo_babies check ( no_of_babies >= 0 )
   , constraint chk_uo_drunk check ( drunk in ('y','n') )
     ); 
```

并且存储在表中的数据如下所示；`last_observation_date`如果观察只被“看到”一次，是否为空都没有关系。我在加载数据时不需要帮助，只需将当前表部分非规范化为如下所示。

```
+--------+--------+-----------+------------+------- ----+---------+--------+--------------+
| OBS_ID | UNI_ID | 创建 | 最后一次 | OBS_DATE | #婴儿 | 醉酒 | LAST_OBS_DT |
+--------+--------+-----------+------------+------- ----+---------+--------+--------------+
| 1 | 6 | 11 年 11 月 10 日 | 2011 年 12 月 1 日 | 2011 年 11 月 7 日 | 0 | n | 2011 年 12 月 1 日 |
| 1 | 1 | 2011 年 11 月 1 日 | 11 年 11 月 17 日 | 11 年 4 月 9 日 | 10 | n | 11 年 10 月 31 日 |
| 1 | 2 | 2011 年 11 月 1 日 | 11 年 11 月 17 日 | 11 年 4 月 9 日 | 10 | n | 11 年 10 月 31 日 |
| 1 | 3 | 2011 年 11 月 1 日 | 11 年 11 月 17 日 | 11 年 4 月 9 日 | 10 | n | 11 年 10 月 31 日 |
| 1 | 6 | 2012 年 1 月 1 日 | 2012 年 1 月 1 日 | 2012 年 1 月 1 日 | 3 | n | |
| 1 | 6 | 2012 年 2 月 1 日 | 2012 年 5 月 1 日 | 2012 年 2 月 1 日 | 0 | n | 2012 年 5 月 1 日 |
| 1 | 1 | 12 年 4 月 19 日 | 12 年 4 月 19 日 | 12 年 4 月 19 日 | 7 | 是 | |
| 1 | 2 | 12 年 4 月 19 日 | 12 年 4 月 19 日 | 12 年 4 月 19 日 | 7 | 是 | |
| 1 | 3 | 12 年 4 月 19 日 | 12 年 4 月 19 日 | 12 年 4 月 19 日 | 7 | 是 | |
+--------+--------+-----------+------------+------- ----+---------+--------+--------------+

```

显而易见的答案

```
select observer_id as obs_id
     , unicorn_id as uni_id
     , min(created) as created
     , max(lastseen) as lastseen
     , min(observation_date) as obs_date
     , no_of_babies as "#BABIES"
     , drunk
     , max(observation_date) as last_obs_date
  from unicorn_observations
 group by observer_id
        , unicorn_id
        , no_of_babies
        , drunk 
```

不起作用，因为它忽略了 2012 年 1 月 1^日对独角兽 6 的 3 个独角兽婴儿的单一观察；这反过来意味着11 月 10^日`lastseen`创建的记录不正确。

```
+--------+--------+-----------+------------+------- ----+---------+--------+--------------+
| OBS_ID | UNI_ID | 创建 | 最后一次 | OBS_DATE | #婴儿 | 醉酒 | LAST_OBS_DT |
+--------+--------+-----------+------------+------- ----+---------+--------+--------------+
| 1 | 1 | 2011 年 11 月 1 日 | 11 年 11 月 17 日 | 11 年 4 月 9 日 | 10 | n | 11 年 10 月 31 日 |
| 1 | 2 | 2011 年 11 月 1 日 | 11 年 11 月 17 日 | 11 年 4 月 9 日 | 10 | n | 11 年 10 月 31 日 |
| 1 | 3 | 2011 年 11 月 1 日 | 11 年 11 月 17 日 | 11 年 4 月 9 日 | 10 | n | 11 年 10 月 31 日 |
| 1 | 6 | 11 年 11 月 10 日 | 2012 年 5 月 1 日 | 2011 年 11 月 7 日 | 0 | n | 2012 年 5 月 1 日 |
| 1 | 6 | 2012 年 1 月 1 日 | 2012 年 1 月 1 日 | 2012 年 1 月 1 日 | 3 | n | 2012 年 1 月 1 日 |
| 1 | 1 | 12 年 4 月 19 日 | 12 年 4 月 19 日 | 12 年 4 月 19 日 | 7 | 是 | 12 年 4 月 19 日 |
| 1 | 2 | 12 年 4 月 19 日 | 12 年 4 月 19 日 | 12 年 4 月 19 日 | 7 | 是 | 12 年 4 月 19 日 |
| 1 | 3 | 12 年 4 月 19 日 | 12 年 4 月 19 日 | 12 年 4 月 19 日 | 7 | 是 | 12 年 4 月 19 日 |
+--------+--------+-----------+------------+------- ----+---------+--------+--------------+

```

我目前看不到没有一些程序逻辑（即循环）的方法。在这种情况下，我宁愿避免循环，因为我必须全扫描 225m 行表 260 次（不同`created`日期的数量）。即使使用`lag()`and`lead()`也需要递归，因为每个独角兽的观察量是不确定的。

有没有办法在单个 SQL 语句中创建这个数据集？

表规范和示例数据也在[SQL Fiddle](http://www.sqlfiddle.com/#!4/0e0bf)中。

* * *

尝试更好的解释：

问题是在某些事情为真*时保持不变。*2012 年 1 月 1 日，独角兽 6 生了 3 个婴儿。

只看 GROUP BY 创建的“表”中的独角兽 6；如果我试图找出 1 月 1^日的婴儿数量，我将返回两条记录，这是矛盾的。

```
+--------+--------+-----------+------------+------- ----+---------+--------+--------------+
| OBS_ID | UNI_ID | 创建 | 最后一次 | OBS_DATE | #婴儿 | 醉酒 | LAST_OBS_DT |
+--------+--------+-----------+------------+------- ----+---------+--------+--------------+
| 1 | 6 | 11 年 11 月 10 日 | 2012 年 5 月 1 日 | 2011 年 11 月 7 日 | 0 | n | 2012 年 5 月 1 日 |
| 1 | 6 | 2012 年 1 月 1 日 | 2012 年 1 月 1 日 | 2012 年 1 月 1 日 | 3 | n | 2012 年 1 月 1 日 |
+--------+--------+-----------+------------+------- ----+---------+--------+--------------+

```

但是，我只想要一行，就像第二个表一样。在这里，对于任何时间点，最多有一个“正确”值，因为独角兽 6 有 0 个婴儿的两个时间段在它有 3 个婴儿的那一天被分成了两行。

```
+--------+--------+-----------+------------+------- ----+---------+--------+--------------+
| OBS_ID | UNI_ID | 创建 | 最后一次 | OBS_DATE | #婴儿 | 醉酒 | LAST_OBS_DT |
+--------+--------+-----------+------------+------- ----+---------+--------+--------------+
| 1 | 6 | 11 年 11 月 10 日 | 2011 年 12 月 1 日 | 2011 年 11 月 7 日 | 0 | n | 2011 年 12 月 1 日 |
| 1 | 6 | 2012 年 1 月 1 日 | 2012 年 1 月 1 日 | 2012 年 1 月 1 日 | 3 | n | |
| 1 | 6 | 2012 年 2 月 1 日 | 2012 年 5 月 1 日 | 2012 年 2 月 1 日 | 0 | n | 2012 年 5 月 1 日 |
+--------+--------+-----------+------------+------- ----+---------+--------+--------------+

```

[1\. 在摩艾周围放牧]

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-04T10:31:19.650

试试这个。

```
with cte as
(
    select v.*,  ROW_NUMBER() over (partition by grp, unicorn_id order by grp, unicorn_id) rn
    from
    (
        select u.*, 
            ROW_NUMBER() over (partition by unicorn_id order by no_of_babies, drunk, created )
            -ROW_NUMBER() over (partition by unicorn_id order by created) as grp
        from unicorn_observations u
    ) v
) 
    select 
        observer_id, cte.unicorn_id, mincreated,maxlastseen,minobsdate,no_of_babies,drunk,maxobsdate
    from cte 
        inner join 
        (    
            select 
                unicorn_id, grp, 
                min(created) as mincreated,
                max(lastseen) as maxlastseen, 
                min(observation_date) as minobsdate,
                max(observation_date) as maxobsdate
            from cte 
            group by unicorn_id, grp
        ) v
        on cte.grp = v.grp
        and cte.unicorn_id = v.unicorn_id
    where rn=1  
    order by created; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-04T22:53:14.757

根据我认为您正在尝试做的事情，主要是根据您对 unicorn 6 特定问题的更新，我认为这会得到您想要的结果。它不需要递归`lead`and `lag`，但确实需要两个级别。

```
select *
from (
    select observer_id, unicorn_id,
        case when first_obs_dt is null then created
            else lag(created) over (order by rn) end as created,
        case when last_obs_dt is null then lastseen
            else lead(lastseen) over (order by rn) end as lastseen,
        case when first_obs_dt is null then observation_date
            else lag(observation_date) over (order by rn)
            end as observation_date,
        no_of_babies,
        drunk,
        case when last_obs_dt is null then observation_date
            else null end as last_obs_dt
    from (
        select observer_id, unicorn_id, created, lastseen, 
            observation_date, no_of_babies, drunk,
            case when lag_no_babies != no_of_babies or lag_drunk != drunk
                or lag_obs_dt is null then null
                else lag_obs_dt end as first_obs_dt,
            case when lead_no_babies != no_of_babies or lead_drunk != drunk
                or lead_obs_dt is null then null
                else lead_obs_dt end as last_obs_dt,
            rownum rn
        from (
            select observer_id, unicorn_id, created, lastseen,
                observation_date, no_of_babies, drunk,
                lag(observation_date)
                    over (partition by observer_id, unicorn_id, no_of_babies,
                            drunk
                        order by observation_date) lag_obs_dt,
                lag(no_of_babies)
                    over (partition by observer_id, unicorn_id, drunk
                        order by observation_date) lag_no_babies,
                lag(drunk)
                    over (partition by observer_id, unicorn_id, no_of_babies
                        order by observation_date) lag_drunk,
                lead(observation_date)
                    over (partition by observer_id, unicorn_id, no_of_babies,
                        drunk
                    order by observation_date) lead_obs_dt,
                lead(no_of_babies)
                    over (partition by observer_id, unicorn_id, drunk
                        order by observation_date) lead_no_babies,
                lead(drunk)
                    over (partition by observer_id, unicorn_id, no_of_babies
                        order by observation_date) lead_drunk
            from unicorn_observations
            order by 1,2,5
        )
    )
    where first_obs_dt is null or last_obs_dt is null
)
where last_obs_dt is not null
order by 1,2,3,4; 
```

这使：

```
OBSERVER_ID UNICORN_ID CREATED   LASTSEEN  OBSERVATI NO_OF_BABIES D LAST_OBS_
----------- ---------- --------- --------- --------- ------------ - ---------
          1          1 17-NOV-11 01-NOV-11 09-APR-11           10 n 31-OCT-11
          1          1 19-APR-12 19-APR-12 19-APR-12            7 y 19-APR-12
          1          2 17-NOV-11 01-NOV-11 09-APR-11           10 n 31-OCT-11
          1          2 19-APR-12 19-APR-12 19-APR-12            7 y 19-APR-12
          1          3 17-NOV-11 01-NOV-11 09-APR-11           10 n 31-OCT-11
          1          3 19-APR-12 19-APR-12 19-APR-12            7 y 19-APR-12
          1          6 10-NOV-11 01-DEC-11 07-NOV-11            0 n 01-DEC-11
          1          6 01-JAN-12 01-JAN-12 01-JAN-12            3 n 01-JAN-12
          1          6 01-FEB-12 01-MAY-12 01-FEB-12            0 n 01-MAY-12

9 rows selected. 
```

它有独角兽 6 的三个记录，但第三个`lastseen`和`observation_date`第三个与您的样本相反，所以我不确定我是否仍然不理解。我假设您希望在每个分组中保留最早`observation_date`和最新`lastseen`的，因为这似乎是添加新记录时会发生的情况，但我不确定......

因此，最里面的查询从表中获取原始数据，并使用稍微不同的分区为 和 列获取*一个*`lead`和。这是这样一个可以稍后使用，在下一步中获得并用于在之后的一个中订购。为了简洁起见，仅适用于独角兽 6：`lag``observation_date` *`no_of_babies``drunk``order by``rownum`*

 *```
CREATED   LASTSEEN  OBSERVATI NO_OF_BABIES D LAG_OBS_D LAG_NO_BABIES L LEAD_OBS_ LEAD_NO_BABIES L
--------- --------- --------- ------------ - --------- ------------- - --------- -------------- -
10-NOV-11 10-NOV-11 07-NOV-11            0 n                           17-NOV-11              0 n
17-NOV-11 17-NOV-11 17-NOV-11            0 n 07-NOV-11             0 n 01-DEC-11              0 n
01-DEC-11 01-DEC-11 01-DEC-11            0 n 17-NOV-11             0 n 01-FEB-12              3 n
01-JAN-12 01-JAN-12 01-JAN-12            3 n                       0                          0
01-FEB-12 01-FEB-12 01-FEB-12            0 n 01-DEC-11             3 n 01-MAR-12              0 n
01-MAR-12 01-MAR-12 01-MAR-12            0 n 01-FEB-12             0 n 01-APR-12              0 n
01-APR-12 01-APR-12 01-APR-12            0 n 01-MAR-12             0 n 01-MAY-12              0 n
01-MAY-12 01-MAY-12 01-MAY-12            0 n 01-APR-12             0 n 
```

如果or值发生变化，下一个级别会清除`lead`and`lag`值- 您只具体提到了婴儿数量的拆分，但我假设您也想拆分清醒。在此之后，任何具有或者是迷你范围的开始或结束的东西。`observation_date``num_of_babies``drunk``null``first_obs_date``last_obs_date`

```
CREATED   LASTSEEN  OBSERVATI NO_OF_BABIES D FIRST_OBS LAST_OBS_         RN
--------- --------- --------- ------------ - --------- --------- ----------
10-NOV-11 10-NOV-11 07-NOV-11            0 n           17-NOV-11          1
17-NOV-11 17-NOV-11 17-NOV-11            0 n 07-NOV-11 01-DEC-11          2
01-DEC-11 01-DEC-11 01-DEC-11            0 n 17-NOV-11                    3
01-JAN-12 01-JAN-12 01-JAN-12            3 n                              4
01-FEB-12 01-FEB-12 01-FEB-12            0 n           01-MAR-12          5
01-MAR-12 01-MAR-12 01-MAR-12            0 n 01-FEB-12 01-APR-12          6
01-APR-12 01-APR-12 01-APR-12            0 n 01-MAR-12 01-MAY-12          7
01-MAY-12 01-MAY-12 01-MAY-12            0 n 01-APR-12                    8 
```

现在可以忽略任何*不是迷你范围的开始或结束的内容，因为这些值要么与之前或之后的值相同，要么被之前或之后的值所取代。*这处理了不确定数量的观察问题——此时忽略多少并不重要。`first_obs_dt`因此，下一个级别通过过滤其中和`last_obs_dt`均为非空的行来消除这些中间值。在该过滤集中，有第二层`lead`and`lag`用于获取每个日期的第一个或最后一个值 - 这是我不确定是否正确的位，因为它与您的一个样本不匹配。

```
CREATED   LASTSEEN  OBSERVATI NO_OF_BABIES D LAST_OBS_
--------- --------- --------- ------------ - ---------
10-NOV-11 01-DEC-11 07-NOV-11            0 n
10-NOV-11 01-DEC-11 07-NOV-11            0 n 01-DEC-11
01-JAN-12 01-JAN-12 01-JAN-12            3 n 01-JAN-12
01-FEB-12 01-MAY-12 01-FEB-12            0 n
01-FEB-12 01-MAY-12 01-FEB-12            0 n 01-MAY-12 
```

最后，没有 a 的剩余行`last_obs_dt`被过滤掉。

现在我会等着看我误解了哪些位... *8-)

* * *

在更正`lead`和`lag`订购之后，独角兽 1 的每个阶段的相同信息：

```
CREATED   LASTSEEN  OBSERVATI NO_OF_BABIES D LAG_OBS_D LAG_NO_BABIES L LEAD_OBS_ LEAD_NO_BABIES L
--------- --------- --------- ------------ - --------- ------------- - --------- -------------- -
17-NOV-11 17-NOV-11 09-APR-11           10 n                           31-OCT-11             10 n
01-NOV-11 01-NOV-11 31-OCT-11           10 n 09-APR-11            10 n
19-APR-12 19-APR-12 19-APR-12            7 y

CREATED   LASTSEEN  OBSERVATI NO_OF_BABIES D FIRST_OBS LAST_OBS_         RN
--------- --------- --------- ------------ - --------- --------- ----------
17-NOV-11 17-NOV-11 09-APR-11           10 n           31-OCT-11          1
01-NOV-11 01-NOV-11 31-OCT-11           10 n 09-APR-11                    2
19-APR-12 19-APR-12 19-APR-12            7 y                              3

CREATED   LASTSEEN  OBSERVATI NO_OF_BABIES D LAST_OBS_
--------- --------- --------- ------------ - ---------
17-NOV-11 17-NOV-11 09-APR-11           10 n 09-APR-11
19-APR-12 19-APR-12 19-APR-12            7 y 19-APR-12 
```

我不确定保留的内容会发生什么，`observation_date`以及`lastseen`原始数据何时输入这样的顺序不正确，或者在这种情况下您将在未来添加新记录时会做什么。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-04T09:46:03.533

这种类型的问题可以通过首先在子查询中创建一些标志，然后使用它们来解决。

```
with obs_flags as (
    select 
       observer_id as obs_id
     , unicorn_id as uni_id
     , case when lag(observation_date) over (
           partition by unicorn_id, no_of_babies, drunk
           order by unicorn_id, observation_date
       ) is null then 1 else 0 end as group_start
     , case when lead(observation_date) over (
           partition by unicorn_id, no_of_babies,drunk
           order by unicorn_id, observation_date
       ) is null then 1 else 0 end as group_end
     , observation_date
     , no_of_babies
     , drunk
     , lastseen
     , created
  from unicorn_observations
)
select obs_start.obs_id
     , obs_start.uni_id
     , obs_start.created
     , obs_end.lastseen as lastseen
     , obs_start.observation_date
     , obs_start.no_of_babies as "#BABIES"
     , obs_start.drunk
     , obs_end.observation_date as last_obs_date
  from obs_flags obs_start
  join obs_flags obs_end on 
      obs_start.group_start = 1 and
      obs_end.group_end = 1 and
      obs_start.uni_id = obs_end.uni_id and
      obs_start.no_of_babies = obs_end.no_of_babies and
      obs_start.drunk = obs_end.drunk and
      obs_start.observation_date <= obs_end.observation_date and
      --Only join with the first end point we find:
      not exists (
          select * from obs_flags f where
              obs_start.uni_id = f.uni_id and
              obs_start.no_of_babies = f.no_of_babies and
              obs_start.drunk = f.drunk and
              f.group_end = 1 and
              f.observation_date < obs_end.observation_date and
              f.observation_date >= obs_start.observation_date
      ); 
```

这是一个复杂的问题；我可能没有完全满足您的要求（或者那里可能有错字。我没有 Oracle 来测试它）。但是，它应该让您了解如何完成它。

基本上，您首先找到您感兴趣的时期的所有开始和结束记录。然后将每个开始记录加入同一分组中的下一个结束记录。

*更新：我的原始代码没有检查结束是否在开始之后。我修好了。*

**Update2：**正如 Ben 指出的，`not exists`这里的子句会很慢。过去帮助我加快速度的另一种方法是分两步完成：首先找到所有潜在的配对，然后分别从中选择正确的配对。

在这种情况下，在临时表或子查询中将每个连接`obs_start`到每个可能正确`obs_end`的 .

`obs_end`然后，从这些配对中，选择每个配对中最早的那个`obs_start`。**

# excel - 如何在 Excel 中自动将小写字段转换为大写？

> ID：12723778
> 
> 赞同：1
> 
> 时间：2012-10-04T09:01:10.197
> 
> 标签：excel, vba

我已经制作了一些 VBA 代码来解决这个问题：

```
Private Sub Workbook_SheetChange(ByVal Sh As Object, ByVal Target As Range)
   If Target.Value <> Empty Then
      Target.Value = UCase(Target.Value)
   End If
End Sub 
```

但是当我尝试在字段中输入一些数据时，Excel 停止工作，没有一条错误消息。

有谁知道这个问题可能来自哪里？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-04T09:31:34.897

您可能已设置 Application.EnableEvents = False。在 VBA 编辑器中打开“立即”窗口，`application.EnableEvents = True`然后键入 ENTER 以重新打开它们。

此外，如果您不想导致更改工作表和重新触发事件的循环，则需要禁用事件。ISEMPTY 函数在 VBA 中略有不同，您的代码可以更新为以下内容，这也将处理不止一个单元格的更改

```
Option Explicit

    Private Sub Workbook_SheetChange(ByVal Sh As Object, ByVal Target As Range)
    Dim cell As Variant

        Application.EnableEvents = False
            For Each cell In Target
                If Not IsEmpty(cell.Value) Then
                   cell.Value = UCase(cell.Value)
                End If
           Next cell
        Application.EnableEvents = True
    End Sub 
```

或者如果您想将此运行限制为仅更改 1 个单元格，请将 for each 循环替换为`If Target.rows.count = 1 AND Target.columns.count = 1....`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-04T09:10:00.230

您可能没有在正确的位置回调函数：

从[VBA 中的事件和事件过程](http://www.cpearson.com/excel/Events.aspx)

> 对于工作表（工作表和图表工作表）级别的事件，事件过程代码必须放在与该工作表关联的工作表模块中。工作簿级别的事件必须放在 ThisWorkbook 代码模块中。如果事件过程不在正确的模块中，VBA 将无法找到它并且事件代码将不会被执行。

# .net - 在 .Net 中如何检查两个标识符是否指向对象的同一实例？

> ID：12723782
> 
> 赞同：3
> 
> 时间：2012-10-04T09:01:25.650
> 
> 标签：.net, object, compare, instance

我一直想知道两个变量是否指向一个类的同一个实例。听起来很明显，但可以做到吗？

例如。假设您有以下代码，其中包含一个名为“IsSameInstanceAs”的运算符。有没有什么方法可以实现“IsSameInstanceAs”运算符的逻辑，如使用.Net、C#的if语句中的注释中所述：-

```
public class MyClass
{
    public String MyString;

    public static void TestForSameInstance()
    {
        MyClass myInstanceA = new MyClass();
        MyClass myInstanceB = myInstanceA;
        MyClass myInstanceC = new MyClass();

        myInstanceA.MyString = "A String";
        myInstanceC.MyString = myInstanceA.MyString;

        if (myInstanceA IsSameInstanceAs myInstanceB)
        {
            // These are the same instance so they will match and this if is true
        }

        if (myInstanceA IsSameInstanceAs myInstanceC)
        {
            // These are not the same instance so they will not match and this if is false
        }
    }
} 
```

我相信这无法做到，但如果有人知道更好，请提供帮助。请记住，我不想比较对象实例，我想知道它们是否是同一个实例。

约翰汤普森

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-04T09:02:38.847

[Object.ReferenceEquals](http://msdn.microsoft.com/en-us/library/system.object.referenceequals.aspx)是相关的方法。

> 确定指定的 Object 实例是否为同一个实例。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-04T09:03:48.327

使用[`ReferenceEquals`方法](http://msdn.microsoft.com/en-us/library/system.object.referenceequals.aspx)：

```
if (Object.ReferenceEquals(myInstanceA, myInstanceB)) 
```

从文档中：

> “确定指定的 Object 实例是否为同一个实例。”

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-04T09:04:01.697

通常，当您`==`在对象上使用比较运算符时，这正是它所做的但是如果对象的类型实现了比较运算符的过载，这可能不成立，在这种情况下您总是可以使用`object.Reference.Equals(x,y)`

因此，大多数类型几乎都来自 BCL（字符串是一个明显的例外）

你可以做

```
x == y; //reference comparison for most reference types
object.ReferenceEquals(x,y); //works in all cases
x.Equals(y); //reference comparison for most reference types 
```

第一个和最后一个不同之处在于，第一个重要的是编译时类型，而后者是运行时类型。即使编译时间和运行时类型相同，也不能保证它们会产生相同的结果（它们应该但只有良好的举止强制执行此操作）

由于第一个示例中表达式的编译时类型很重要，因此您可以将其重写为

```
(object)x == (object)y; //always a reference comparison for reference types 
```

我个人会使用 object.ReferenceEquals 而不是 == 与演员。对我来说，该方法更清楚地表明了意图。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-04T09:04:13.590

来自 MSDN：
以下示例使用 ReferenceEquals 来确定两个对象是否是同一个实例。

```
class MyClass {

   static void Main() {
      object o = null;
      object p = null;
      object q = new Object();

      Console.WriteLine(Object.ReferenceEquals(o, p));
      p = q;
      Console.WriteLine(Object.ReferenceEquals(p, q));
      Console.WriteLine(Object.ReferenceEquals(o, p));
   }
} 
```

这将产生以下输出：

```
True
True
False 
```

`ReferenceEquals(Object objA, Object objB)``true`如果`objA`是相同的实例，`objB`或者两者都是，将返回`null`；否则，`false`。

# android - 带有列表视图的 Android 选项卡片段

> ID：12723784
> 
> 赞同：1
> 
> 时间：2012-10-04T09:01:41.653
> 
> 标签：android, listview, tabs, android-asynctask, android-fragments

尝试运行我的应用程序时出现错误。有人可以帮我检查我的代码吗？我将列出我所有的代码。我正在尝试为我的应用程序实现片段。

MainActivity.java

```
public class MainActivity extends SherlockFragmentActivity {

    @Override
    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);

        ActionBar actionBar = getSupportActionBar();
        actionBar.setNavigationMode(ActionBar.NAVIGATION_MODE_TABS);

        actionBar.setDisplayShowTitleEnabled(true);

        Tab tab = actionBar.newTab()
                .setText("Apple")
                .setTabListener((TabListener) new AppleFragment())
                .setIcon(R.drawable.apple);

        actionBar.addTab(tab);

    }  

} 
```

AppleFragment.java

```
public class AppleFragment extends ListActivity  {

    static final String URL = "http://api.androidhive.info/pizza/?format=xml";
    // XML node keys
    static final String KEY_ITEM = "item"; // parent node
    static final String KEY_ID = "id";
    static final String KEY_NAME = "name";
    static final String KEY_COST = "cost";
    static final String KEY_DESC = "description";

    @Override
    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.main);

    ArrayList<HashMap<String, String>> menuItems = new ArrayList<HashMap<String, String>>();

    XMLParser parser = new XMLParser();
    String xml = parser.getXmlFromUrl(URL); // getting XML
    Document doc = parser.getDomElement(xml); // getting DOM element

    NodeList nl = doc.getElementsByTagName(KEY_ITEM);
    // looping through all item nodes <item>
    for (int i = 0; i < nl.getLength(); i++) {
        // creating new HashMap
        HashMap<String, String> map = new HashMap<String, String>();
        Element e = (Element) nl.item(i);
        // adding each child node to HashMap key => value
        map.put(KEY_ID, parser.getValue(e, KEY_ID));
        map.put(KEY_NAME, parser.getValue(e, KEY_NAME));
        map.put(KEY_COST, "Rs." + parser.getValue(e, KEY_COST));
        map.put(KEY_DESC, parser.getValue(e, KEY_DESC));

        // adding HashList to ArrayList
        menuItems.add(map);
    }

    ListAdapter adapter = new SimpleAdapter(this, menuItems,
            R.layout.list_item,
            new String[] { KEY_NAME, KEY_DESC, KEY_COST }, new int[] {
                    R.id.name, R.id.desciption, R.id.cost });

    setListAdapter(adapter);

}

    public static class ArrayListFragment extends SherlockListFragment implements TabListener{

    @Override
    public View onCreateView(LayoutInflater inflater, ViewGroup container, Bundle savedInstanceState){

        return super.onCreateView(inflater, container, savedInstanceState);

    }    

    @Override
    public void onTabSelected(Tab tab, FragmentTransaction ft) {
        ft.add(android.R.id.content, this);

        ft.attach(this);
    }

    @Override
    public void onTabUnselected(Tab tab, FragmentTransaction ft) {
        ft.detach(this);
    }

    @Override
    public void onTabReselected(Tab tab, FragmentTransaction ft) {
    }

}
} 
```

日志猫：

```
10-04 16:55:52.805: E/AndroidRuntime(26238): FATAL EXCEPTION: main
10-04 16:55:52.805: E/AndroidRuntime(26238): java.lang.RuntimeException: Unable to start activity ComponentInfo{in.wptrafficanalyzer.actionbarsherlocknavtab/in.wptrafficanalyzer.actionbarsherlocknavtab.MainActivity}: java.lang.ClassCastException: in.wptrafficanalyzer.actionbarsherlocknavtab.AppleFragment cannot be cast to com.actionbarsherlock.app.ActionBar$TabListener
10-04 16:55:52.805: E/AndroidRuntime(26238):    at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:1970)
10-04 16:55:52.805: E/AndroidRuntime(26238):    at android.app.ActivityThread.handleLaunchActivity(ActivityThread.java:1995)
10-04 16:55:52.805: E/AndroidRuntime(26238):    at android.app.ActivityThread.access$600(ActivityThread.java:127)
10-04 16:55:52.805: E/AndroidRuntime(26238):    at android.app.ActivityThread$H.handleMessage(ActivityThread.java:1161)
10-04 16:55:52.805: E/AndroidRuntime(26238):    at android.os.Handler.dispatchMessage(Handler.java:99)
10-04 16:55:52.805: E/AndroidRuntime(26238):    at android.os.Looper.loop(Looper.java:137)
10-04 16:55:52.805: E/AndroidRuntime(26238):    at android.app.ActivityThread.main(ActivityThread.java:4512)
10-04 16:55:52.805: E/AndroidRuntime(26238):    at java.lang.reflect.Method.invokeNative(Native Method)
10-04 16:55:52.805: E/AndroidRuntime(26238):    at java.lang.reflect.Method.invoke(Method.java:511)
10-04 16:55:52.805: E/AndroidRuntime(26238):    at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:982)
10-04 16:55:52.805: E/AndroidRuntime(26238):    at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:749)
10-04 16:55:52.805: E/AndroidRuntime(26238):    at dalvik.system.NativeStart.main(Native Method)
10-04 16:55:52.805: E/AndroidRuntime(26238): Caused by: java.lang.ClassCastException: in.wptrafficanalyzer.actionbarsherlocknavtab.AppleFragment cannot be cast to com.actionbarsherlock.app.ActionBar$TabListener
10-04 16:55:52.805: E/AndroidRuntime(26238):    at in.wptrafficanalyzer.actionbarsherlocknavtab.MainActivity.onCreate(MainActivity.java:30)
10-04 16:55:52.805: E/AndroidRuntime(26238):    at android.app.Activity.performCreate(Activity.java:4465)
10-04 16:55:52.805: E/AndroidRuntime(26238):    at android.app.Instrumentation.callActivityOnCreate(Instrumentation.java:1052)
10-04 16:55:52.805: E/AndroidRuntime(26238):    at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:1934)
10-04 16:55:52.805: E/AndroidRuntime(26238):    ... 11 more 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-04T09:07:27.277

错误在于：

```
Tab tab = actionBar.newTab()
                .setText("Apple")
                .setTabListener((TabListener) new AppleFragment())
                .setIcon(R.drawable.apple); 
```

选项卡监听器不能是`new AppleFragment()`你应该传递一个有效的监听器，或者让你的片段实现`TabListener`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-06-04T11:24:12.323

在你的苹果片段中扩展 Fragment 类而不是 ListFragment

# java - Java函数分析

> ID：12723792
> 
> 赞同：1
> 
> 时间：2012-10-04T09:02:08.733
> 
> 标签：java, for-loop

好的..我是一个完全的 Python 人，很少使用 Java 及其方法。条件是我有一个 Java 函数，我必须向我的导师解释，但我不知道该怎么做……所以如果你们中的一个人能正确阅读，请帮助我分解它并解释它。另外，如果有任何缺陷，我需要找出其操作中的任何缺陷（即循环的使用等）。最后，'string' 和 'string[]' 类型有什么区别？

```
public static void search(String findfrom, String[] thething){
  if(thething.length > 5){
      System.err.println("The thing is quite long");
  }

  else{
      int[] rescount = new int[thething.length];
      for(int i = 0; i < thething.length; i++){
          String[] characs = findfrom.split("[ \"\'\t\n\b\f\r]", 0);
          for(int j = 0; j < characs.length; j++){
              if(characs[j].compareTo(thething[i]) == 0){
                  rescount[i]++;
        }
    }
      }
      for (int j = 0; j < thething.length; j++) {
          System.out.println(thething[j] + ": " + rescount[j]);
      }
  }
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-04T09:26:19.097

```
if(thething.length > 5){
      System.err.println("The thing is quite long");
} 
```

如果 的长度`String[] thething`大于 5。打印错误.. 如果不是，则执行以下 else 块中的内容。

`else{`

```
int[] rescount = new int[thething.length]; 
```

创建一个新的`int`s 数组，其大小等于`String[] thething`

```
for(int i = 0; i < thething.length; i++) 
```

对于每个索引`i`，String[] 的东西。

```
String[] characs = findfrom.split("[ \"\'\t\n\b\f\r]", 0); 
```

创建一个名为 characs 的新 String[]，它根据正则表达式将 String findfrom 拆分为几个部分`"[ \"\'\t\n\b\f\r]"`。0 表示此模式将被应用尽可能多的次数。

```
for(int j = 0; j < characs.length; j++){ 
```

现在对于`j`String[] 字符中的每个索引...

```
if(characs[j].compareTo(thething[i]) == 0){ 
```

比较 characs String[] at index 中的 String 和 thething String[] at index`j`中的 String `i`。

如果两者匹配，即该`compareTo`方法返回 0。

```
rescount[i]++; 
```

递增`int`中索引`i`处的`int[]` `rescount`。

```
 for (int j = 0; j < thething.length; j++) {
      System.out.println(thething[j] + ": " + rescount[j]);
  } 
```

最后为每个索引打印出该索引处的字符串和该`j`索引处的`String[]` `thething``int``int[]` `rescount`

而且 a`String`是一个字符数组，例如`String string = "word"`，a`String[]`是一个数组字符串。例如`String[] strings = new String[]{"word1", "word2",....}.`

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-04T09:29:54.940

```
public class Test {

    public static void main(String[] args) {
        search(
            "you like me but do you \"like like\" me", 
            new String[]{"you", "like", "me", "not"}
        );
    }

    /**
     * Given a string of words (each word separated by one or more of the
     * following characters: tab, carriage return, newline, single quote, double
     * quote, a form feed, or a word boundary) count the occurrence of each
     * search term provided, with a 5 term limit.
     * 
     * @param findfrom
     *            the string of words
     * @param thething
     *            the search terms.  5 at most, or count will not be performed.
     */
    public static void search(String findfrom, String[] thething) {
        if (thething.length > 5) {
            System.err.println("The thing is quite long");
        }
        else {
            String[] characs = findfrom.split("[ \"\'\t\n\b\f\r]", 0);
            int[] rescount = new int[thething.length];
            for (int i = 0; i < thething.length; i++) {
                for (int j = 0; j < characs.length; j++) {
                    if (characs[j].compareTo(thething[i]) == 0) {
                        rescount[i]++;
                    }
                }
            }
            for (int j = 0; j < thething.length; j++) {
                System.out.println(thething[j] + ": " + rescount[j]);
            }
        }
    }
} 
```

**输出**

```
you: 2
like: 3
me: 2
not: 0 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-04T10:01:57.303

该代码的**Python**版本将是这样的：

```
import sys
import re

def search(findfrom, thething):
  """Take a string and a list of strings. Printout each of the strings
in the list and a count of how many times that string appeared in the
input string. The string comparison will be based on the input string being
divided up into tokens. The delimiter for each token will be either a whitespace
character, a single quote, or a double quote. """
  if len(thething) > 5:
      sys.stderr.write("The thing is quite long")
  else:
      rescount = [0] * len(thething)
      for i in range(0,len(thething)):
          characs = re.split("[ \"\'\t\n\b\f\r]", findfrom)
          for j in range(0,len(characs)):
              if characs[j] == thething[i]:
                  rescount[i] = rescount[i] + 1

      for j in range(0,len(thething)):
          print thething[j] + ": " + str(rescount[j])

string = 'you like me but do you "like like" me'
strings = ["you", "like", "me", "not"]
search(string,strings) 
```

输出：

```
you: 2
like: 3
me: 2
not: 0 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-10-04T09:15:27.207

*   第 1 段： findfrom 是一个字符串，它应该是`"[ \"\'\t\n\b\f\r]"`（正则表达式）分隔的。

*   第 2 段：thething 是一个字符串数组，最多包含 5 个字符串，该方法将在 findfrom 中查找 'thething' 中的字符串的次数。并将结果打印出来。

例如

```
findfrom="hello'there'happy'birthday'"
thething={"there","birthday","hello","birthday"}

result would be:
there: 1
birthday: 2
hello: 1
birthday: 2 
```

顺便说一句，这条线

```
String[] characs = findfrom.split("[ \"\'\t\n\b\f\r]", 0); 
```

可能会移出 for 循环。由于 findfrom 没有更改，因此无需重复拆分。

# php - 有谁知道您是否可以将 PHP 用于嵌入到 html 电子邮件中的联系表格？

> ID：12723793
> 
> 赞同：0
> 
> 时间：2012-10-04T09:02:11.930
> 
> 标签：php, forms, email

我有一个通过 Mailchimp 之类的程序发送的 html 电子邮件。电子邮件发送者有一个使用 PHP 的嵌入式联系表单。从浏览器填写表单时工作正常，但从电子邮件客户端填写时返回空白电子邮件。

有任何想法吗？

谢谢简

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-04T09:05:18.357

不，我会避开这个。Campaign Monitor 对此有一篇非常好的文章。它不仅仅是说不。非常值得一读，但这是底线：

> **建议：**鉴于电子邮件中对表单的零星支持，我们建议在电子邮件中链接到网站上的表单，而不是将其嵌入其中。这是将电子邮件与表单配对的最安全、最可靠的解决方案。更多的人会看到它并能够使用它，因此参与度也会增加。

[http://www.campaignmonitor.com/blog/post/2435/how-forms-perform-in-html-emai/](http://www.campaignmonitor.com/blog/post/2435/how-forms-perform-in-html-emai/)

# ios - 锁定 managedObjectContext

> ID：12723795
> 
> 赞同：1
> 
> 时间：2012-10-04T09:02:22.750
> 
> 标签：ios, core-data, locking, nsmanagedobjectcontext

我目前正在使用由其他东西开发的（非常）大的应用程序。

它开发得很好，代码看起来也不错……而不是访问核心数据。

实际上，每次访问`ManagedObjectContexts`都是在几个块中进行的，对应于几个 Web 服务......在几个线程中。

[并且文档说这很糟糕](http://developer.apple.com/library/ios/#documentation/cocoa/Conceptual/CoreData/Articles/cdConcurrency.html)。这就是为什么有时，我的应用程序冻结在核心数据访问上。

是的，我知道我应该

> 为每个线程创建单独的托管对象上下文并共享单个持久存储协调器

正如文档所说，但代码已经存在并且非常庞大，我的客户需要快速解决方案（像往常一样）。

**所以这里的问题是：**

我见过一种`[managedObjectContext lock]`方法。这似乎是一些信号量的东西。但是医生并没有说太多。

我的 web 服务在不同的线程中使用 managedObjectContext 的相同实例。

-你想做什么

```
[managedObjectContext lock]
// core data access
// core data access
// core data access
[managedObjectContext unlock] 
```

在我的每个网络服务块中？
- 这会解决冻结问题吗？
- 这是推荐的方式吗？

**没有人告诉我`lock`&`unlock`方法，所以我做了一个 EDIT ：**

因为 de freezes 不会每次都发生，所以我尝试了 3 种情况：

*   不要保护我的数据访问

*   使用`[managedObjectContext lock]` `unlock]`方法

*   采用`@synchronized(managedObjectContext) { ... }`

在第一种情况下，10 次测试发生 3 次冻结。在第 2 和第 3 种情况下，根本没有冻结。

**所以我的第二个问题：**

`lock`使用/`unlock`和有什么区别`@synchronize( )`？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-04T15:59:45.550

我有一个类似的问题，在现有代码上我没有直接工作，块在单个托管对象上下文上执行获取，最终出现奇怪的错误、冻结、线程退出等。

我通过在上下文中添加一个同步来解决：

```
NSBlockOperation *myBlock = [NSBlockOperation blockOperationWithBlock:^{

  // block operation

  @synchronized(managedObjectContext) {

    NSArray *result = [managedObjectContext performFetch:myFetch];

   // error management following

  }
}]; 
```

这是我找到的最快的解决方案。我还尝试添加某种锁定条件，但在某些情况下线程会出现混乱和死锁。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-04T16:22:30.100

我不知道您需要在哪些 SDK 上运行，但如果您可以使用 iOS 5+`-performBlock:`并且`-performBlockAndWait:`可能正是您所需要的。

希望有帮助。

# msdeploy - 使用不同的 setParameters.xml 文件？

> ID：12723796
> 
> 赞同：6
> 
> 时间：2012-10-04T09:02:21.733
> 
> 标签：msdeploy

因此，我已经让我的部署在构建上工作，并且我已经设置我的构建以创建一个部署包并在目标服务器上执行该包。到目前为止很棒。但是现在应用程序正在扩展，我需要每台机器有不同的配置（帐户名等），

我可以将“setParameters.xml”的文件名指定为“Server1.SetParameters.xml”或类似名称吗？

我现在已经在每次部署之前将文件复制到 SetParameters.xml 上，但它看起来很不优雅，如果文件被锁定，无论出于何种原因，它将错误的设置部署到错误的服务器。

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-10-04T23:07:11.277

由于您使用的是 WPP 生成的*deploy.cmd*文件，因此最简单的选择是`%_DeploySetParametersFile%`在执行部署脚本之前设置到 setParmeters 文件的完整路径。

```
SET _DeploySetParametersFile=c:\full\path\to\setParmaeters.xml
call Website.deploy.cmd 
```

或者，如果您想直接使用 msdeploy，您可以指定`-setParamFile:c:\full\path\to\setParmaeters.xml`. 有关详细信息，请参阅[Web 部署操作设置](http://technet.microsoft.com/en-us/library/dd569089%28v=ws.10%29)

# ios5 - IOS 6 更新代码错误切换视图

> ID：12723799
> 
> 赞同：0
> 
> 时间：2012-10-04T09:02:25.500
> 
> 标签：ios5, uiview, ios6, self, xcode4.5

我正在设计一个应用程序，它是一个单视图应用程序，我正在添加代码，以便我可以通过按钮切换视图，但是每次我输入在 IOS 5 中工作的代码时，现在都会出现错误？这是代码

```
#import <UIKit/UIKit.h>

@interface ViewController1 : UIViewController 

- (IBAction)home:(id)sender;

@end

#import "ViewController1.h"

#import "ViewController.h"

@interface ViewController1 ()

@end

@implementation ViewController1

- (IBAction)home:(id)sender
{
    ViewController *second =[[ViewController alloc] initWithNibName:nil bundle:nil];
    [self presentModalViewController:second animated:YES];
} 
```

这是错误

![在此处输入图像描述](../Images/e77e19d5a45b801a0beeb92c856fe9d3.png)

谢谢你！！编辑现在回答我的错误？？ ![在此处输入图像描述](../Images/4698e488a5db4c3ace0d14f0777acf3f.png)

![在此处输入图像描述](../Images/09f6563c44d11322163431a50c8fdc22.png)

![在此处输入图像描述](../Images/d4a0ddf947328feac35358c91761486b.png)

顺便说一句，我真的很感激，一旦完成，我会给你一个很好的答案，这是现在的错误吗？

![在此处输入图像描述](../Images/ac96c5231feb2e4c07f00bd7e332cfcc.png) ![在此处输入图像描述](../Images/f4f8702af9df80a8d0c1b77f1756c15b.png)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-04T10:40:13.627

首先，这不是错误，而是警告。

如需帮助，您可以阅读 Apple 提供的文档。

要删除该警告，只需使用以下代码

```
[self presentViewController:second animated:YES completion:^{ }]; 
```

# r - 如何在 R 中返回错误消息？

> ID：12723800
> 
> 赞同：63
> 
> 时间：2012-10-04T09:02:34.727
> 
> 标签：r

我想知道如何能够在 R 中产生错误消息，尤其是在函数内部？

* * *

## 回答 #1

> 赞同：117
> 
> 时间：2012-10-04T09:04:10.117

既然你没有具体说明你真正想要什么，我只能说看看

```
?message # prints a message but not stop execution
?warning # prints a warning message but not stop execution
?stop # stops execution of the current expression and executes an error action. 
```

* * *

## 回答 #2

> 赞同：32
> 
> 时间：2019-04-04T15:59:00.547

只需包含`stop()`在您的函数/脚本中

如果您想要一条错误消息，请`stop()`像这样将其包含在内

```
stop("This is an error message") 
```

# java - Cordova 2.1.0 在 /app_database/file__0 + android 应用程序开发中创建新数据库

> ID：12723804
> 
> 赞同：2
> 
> 时间：2012-10-04T09:02:45.260
> 
> 标签：java, javascript, android, cordova

我正在使用 Cordova 2.1.0 进行 android 应用程序开发，并通过 java android 在以下位置创建数据库表：

> /data/data/com.ingenyous.alerts.android/app_database/file__0/0000000000000001.db

然后，`window.openDatabase()`默认情况下，Cordova（版本 2.1.0）`0000000000000002.db`在同一位置创建另一个文件。

为什么它创建新文件而不是使用创建的表`0000000000000001.db`？

使用 Phonegap 1.3，我没有遇到这个问题，因为它使用了已经存在的数据库。

# sql - SQL - 按时间间隔对结果进行分组

> ID：12723806
> 
> 赞同：4
> 
> 时间：2012-10-04T09:02:48.793
> 
> 标签：sql, time, frame, sql-server-2012, intervals

使用给定的表结构（`eventTime`以秒为单位），我想按给定的时间范围对结果进行分组：

例如：5 分钟

```
0 to 5:   1 
5 to 10:  2
10 to 15: 3
..... 
```

这如何在 SQL Server 2012 中完成？

谢谢！

弗洛里安

```
CREATE TABLE [dbo].[evalHubSupply](
[evalHubSupplyId] [int] IDENTITY(1,1) NOT NULL,
[projectId] [int] NOT NULL,
[scenarioId] [int] NOT NULL,
[iterationId] [int] NOT NULL,
[evalExportId] [int] NOT NULL,
[eventType] [varchar](50) NOT NULL,
[eventTime] [int] NOT NULL,
[stopId] [varchar](50) NOT NULL,
[stopName] [varchar](50) NULL,
[vehicleId] [varchar](50) NOT NULL,
[transitLineId] [varchar](50) NULL,
[transitRouteId] [varchar](50) NULL,
[capacity] [int] NULL,
[arrivalTimeAtStop] [int] NULL,
[agentsOnBoard] [int] NULL) 
```

样本数据（间隔 1 小时）：

[https://dl.dropbox.com/u/481455/table_data.xlsx](https://dl.dropbox.com/u/481455/table_data.xlsx) 或 [https://dl.dropbox.com/u/481455/table_data_open.ods](https://dl.dropbox.com/u/481455/table_data_open.ods)

“表数据”选项卡包含来自 evalHubSupply 的示例数据。“时间间隔”列计算与 eventTime 相关的间隔（在本例中为每小时）。结果选项卡计算与特定时间间隔相关的事件数量。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-04T09:06:22.550

这将给出每 5 分钟组中的记录数

```
select eventTime/5,count(*)
from   evalHubSupply
group by eventTime/5 
```

# asp.net-mvc-3 - jquery live() 附加点击事件导致多次点击

> ID：12723808
> 
> 赞同：1
> 
> 时间：2012-10-04T09:02:50.907
> 
> 标签：asp.net-mvc-3, jquery

我的 asp.net MVC3 应用程序中的 jQuery ajax 功能发生了一些奇怪的行为。

我有几个数据框，每个数据框都包含一个链接，用于打开一个弹出窗口并更改每个框中的数据。为此，我添加了一个 jquery `live()`click 事件来通过 jQuery ajax 调用处理数据。在 ajax 调用的“成功”方法中，我获取返回数据并打开一个 UI 对话框弹出窗口（部分视图），其中包含单选按钮列表。我选择了一个不同的单选按钮并按“关闭” - 关闭按钮触发另一个`live()`单击事件，通过 ajax 调用处理新数据，该调用刷新主页上框中的数据。

这第一次完美运行。如果您然后单击以再次更改它，弹出窗口将打开，允许您选择一个新值，但是这次在弹出窗口上按下关闭会触发两个点击事件，这会在我的 MVC 控制器中引发空错误。

如果您重复此过程，它会触发 3 个点击事件，因此很明显`live()`将这些事件附加到某处。

我试过使用`on()`and `click()`，但是页面本身是由通过 ajax 加载的面板组成的，所以我曾经`live()`自动绑定事件。

这是我正在使用的代码：

HTML

```
<p><!--Data to update goes here--></p>
<a href="#" class="adjust">Update Data</a> 
```

带有部分视图的首次单击事件调用弹出窗口

```
$('a.adjust').live('click', function (e) { 
    var jsonData = getJsonString(n[1]);
    var url = '@Url.Action("ChangeOptions", "Search")';
    var dialog = $('<div id="ModalDialog" style="display:none"></div>').appendTo('body');
    // load the data via ajax
    $.ajax({
        url: url,
        type: 'POST',
        cache: false,
        contentType: "application/json; charset=utf-8",
        data: jsonData,
        success: function (response) {
            dialog.html(response);
            dialog.dialog({
                bgiframe: true,
                modal: true
                }
            });
        }
    });
    e.preventDefault();
}); 
```

第二次单击事件将获取新信息以返回更新的部分视图

```
$('a#close').live('click', function (event) { 
    var jsonData = getJsonString(n[1]);
    var url = '@Url.Action("GetChangeInfo", "Search")';
    $.ajax({
        url: url,
        type: 'POST',
        contentType: "application/json; charset=utf-8",
        data: jsonData,
        success: function (response) {
            $('#box-' + @column).html(response);  //this refreshes the box on the main page
        },
        error: function () {
        }
    });
    $('#ModalDialog').dialog('close');
    event.preventDefault();
}); 
```

任何人都知道这里可能会发生什么，以及我该如何解决？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-04T09:34:36.613

使用命名空间来取消绑定以前的点击绑定，如下所示：

```
$('a.adjust').unbind('click.adjustclick'); 
```

然后将点击动作绑定到a.adjust：

```
$('a.adjust').bind('click.adjustclick', function(){

  //your code here

  //note the return false, this prevents the browser from visiting the URL in the href attribute
  return false;
}); 
```

如果我理解正确，您尝试在对话框关闭时运行第二次单击操作。因此，我会为这样的对话框使用内置关闭功能：

```
$('a.adjust').bind('click.adjustclick', function(){
    var jsonData = getJsonString(n[1]);
    var url = '@Url.Action("ChangeOptions", "Search")';
    var dialog = $('<div id="ModalDialog" style="display:none"></div>').appendTo('body');
    // load the data via ajax

    $.ajax({
        url: url,
        type: 'POST',
        cache: false,
        contentType: "application/json; charset=utf-8",
        data: jsonData,
        success: function (response) {
            dialog.html(response);
            dialog.dialog({
                bgiframe: true,
                modal: true,
                close: function(){
                    var jsonData2 = getJsonString(n[1]);
                    var url2 = '@Url.Action("GetChangeInfo", "Search")';

                    $.ajax({
                        url: url2,
                        type: 'POST',
                        contentType: "application/json; charset=utf-8",
                        data: jsonData2,
                        success: function (response2) {
                            $('#box-' + @column).html(response2);  //this refreshes the box on the main page
                        },
                        error: function () {
                        }
                    });
                  }
                }
            });
        }
    });
}); 
```

如果您使用自己的按钮 a#close，将单击事件绑定到它以关闭对话框，它将自动触发对话框的关闭功能。

```
$('a#close').unbind('click.closedialog');
$('a#close').bind('click.closedialog', function () {
  $('#ModalDialog').dialog('close');
  return false;
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-04T09:08:41.047

试试这个：

```
$('a#close').unbind('click').bind('click', function (event) {
//Your Code
}); 
```

# android - Android 应用访问库资源

> ID：12723815
> 
> 赞同：3
> 
> 时间：2012-10-04T09:03:15.797
> 
> 标签：android, libraries

我正在处理的项目要求可以构建 N 个独立应用程序，但还需要一个带有选择菜单的超大应用程序，可以执行其中一个。

这些应用程序之间的区别主要在于资源和 XML，因此它们都使用一个公共库来对资产和 XML 中提供的信息做出反应。

问题在于“母亲”应用程序。它必须能够使用独立资源集之一使用公共库。我意识到我可以使用以下方法访问另一个应用程序资源：

```
Resources R2 = getPackageManager().getResourcesForApplication("com.example.appa");
int id = R2.getIdentifier("image", "drawable", "com.example.appa");
Drawable myDrawable = R2.getDrawable(id); 
```

这实际上解决了这个问题，我可以向库提供一个包字符串，这样它就会知道在哪里寻找资源。

问题是，为了让它工作，我需要在设备上安装那些独立的应用程序，这是我做不到的（把它想象成一个测验应用程序，独立应用程序只是一个主题，而“母亲”应用程序允许访问所有不同的主题，据我所知，Android Market 不允许下载所有应用程序并安装它们，以便我可以访问它们的资源）。

从概念上讲，如果我可以将这些独立的应用程序作为库并将它们添加到母应用程序中，那么这个问题将得到解决。然后，母应用程序将根据用户选择使用包字符串，然后使用库。到目前为止，我还无法解决这个问题，也找不到有关此的信息，所以恐怕无法完成。

例如，每个主题应用程序都有一个 intro.png，其中包含有关应用程序主题的图像（例如罗马或希腊图像），其想法是访问 package_string.intro.png，以便自动访问正确的取决于用户的选择。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-22T12:58:06.720

经过努力，我终于发现资源已被索引，这意味着一个应用程序中只存在一个“intro.png”，无论您尝试链接多少个库，您都无法创建对 lib1.intro.png 的引用或lib2.intro.png。我终于构建了一个资源管理器系统，可以按需使用“lib1_intro”或“lib2_intro”。不是最干净的解决方案，但是，嗯，我猜它有效......

当我阅读有关接受答案时将我的编辑移至答案，这应该是这样做的，而不是仅仅编辑我的第一篇文章

# python - 从 Python 打印到标准打印机？

> ID：12723818
> 
> 赞同：39
> 
> 时间：2012-10-04T09:03:27.547
> 
> 标签：python, printing, cpython

是否有合理的标准和跨平台方式将文本（甚至 PS/PDF）打印到系统定义的打印机？

假设这里是[CPython](http://www.python.org/)，而不是像使用 Jython 和[Java 打印 API](http://docs.oracle.com/javase/tutorial/2d/printing/printable.html)那样聪明。

* * *

## 回答 #1

> 赞同：44
> 
> 时间：2014-03-21T04:26:40.190

这仅在 Windows 上进行了测试：

您可以执行以下操作：

```
import os

os.startfile("C:/Users/TestFile.txt", "print") 
```

这将在其默认打开器中使用动词“打印”启动文件，它将打印到您的默认打印机。仅需要`os`标准库附带的模块

* * *

## 回答 #2

> 赞同：35
> 
> 时间：2012-10-04T10:25:38.363

不幸的是，没有在所有平台上使用 Python 进行打印的标准方法。所以你需要编写自己的包装函数来打印。

您需要[检测](https://stackoverflow.com/questions/1854/python-what-os-am-i-running-on)您的程序正在运行的操作系统，然后：

对于 Linux -

```
import subprocess
lpr =  subprocess.Popen("/usr/bin/lpr", stdin=subprocess.PIPE)
lpr.stdin.write(your_data_here) 
```

对于 Windows：[http ://timgolden.me.uk/python/win32_how_do_i/print.html](http://timgolden.me.uk/python/win32_how_do_i/print.html)

更多资源：

[使用 python 的 win32print 模块打印 PDF 文档？](https://stackoverflow.com/questions/1462842/print-pdf-document-with-pythons-win32print-module)

[如何在 Python 3（跨平台）中打印到操作系统的默认打印机？](https://stackoverflow.com/questions/2316368/how-do-i-print-to-the-oss-default-printer-in-python-3-cross-platform)

* * *

## 回答 #3

> 赞同：8
> 
> 时间：2012-10-04T10:29:23.147

要打印到网络上的任何打印机，您可以将 PJL/PCL 打印作业直接发送到端口 9100 上的网络打印机。

请查看下面的链接，这应该是一个好的开始：

[http://frank.zinepal.com/printing-directly-to-a-network-printer](http://frank.zinepal.com/printing-directly-to-a-network-printer)

此外，如果有调用 Windows cmd 的方法，您可以使用 FTP put 在 9100 上打印您的页面。下面的链接应该为您提供详细信息，我已将这种方法用于 HP 打印机，但我相信它适用于其他打印机。

[http://h20000.www2.hp.com/bizsupport/TechSupport/Document.jsp?objectID=bpj06165](http://h20000.www2.hp.com/bizsupport/TechSupport/Document.jsp?objectID=bpj06165)

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2015-03-06T00:40:26.873

你可以试试 wx 库。这是一个跨平台的 UI 库。在这里可以找到打印教程： [https ://web.archive.org/web/20160619163747/http://wiki.wxpython.org/Printing](https://web.archive.org/web/20160619163747/http://wiki.wxpython.org/Printing)

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2020-03-20T21:44:46.670

我发现这是最好的解决方案，至少在处理 Web 应用程序时是这样。想法是这样的：将 HTML 页面转换为 PDF 文档，然后通过[`gsprint`](http://www.ghostgum.com.au/software/gsview.htm).

尽管`gsprint`不再处于开发阶段，但它确实非常非常好。您可以在其他几个选项中选择打印机以及页面方向和大小。

我使用 Chrome 的无头浏览器 Puppeteer 将网页转换为 PDF。但是您需要传入会话 cookie 来维护凭据。

# c# - 列出所有可用的 ProgId

> ID：12723821
> 
> 赞同：2
> 
> 时间：2012-10-04T09:03:32.023
> 
> 标签：c#, com, registry, progid

我想使用 C# 获取我计算机上所有 progis 的列表。我知道我可以扫描注册表，如下所示：

```
var regClis = Registry.ClassesRoot.OpenSubKey("CLSID");
var progs = new List<string>();

foreach (var clsid in regClis.GetSubKeyNames()) {
    var regClsidKey = regClis.OpenSubKey(clsid);
    var ProgID = regClsidKey.OpenSubKey("ProgID");
    var regPath = regClsidKey.OpenSubKey("InprocServer32");

    if (regPath == null)
        regPath = regClsidKey.OpenSubKey("LocalServer32");

    if (regPath != null && ProgID != null) {
        var pid = ProgID.GetValue("");
        var filePath = regPath.GetValue("");
        progs.Add(pid + " -> " + filePath);
        regPath.Close();
    }

    regClsidKey.Close();
} 
```

代码来自[这个博客。](http://procbits.com/2010/11/08/get-all-progid-on-system-for-com-automation/)

有谁知道是否有更简单的方法？此外，据我了解这是如何工作的，上面的代码可能只会给我进程内的 com. 如果我也需要进程外的 progid 怎么办？

提前致谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-04T10:08:36.633

这太简单了。在 CLSID 键中列出 ProgId 是一个选项，不是必需的。我的机器上没有它的 ProgID 示例是公文包、CABFolder、FaxCommon.1、JobObject、NetworkConnections、Shell.AutoPlay 等。

您必须从迭代根开始并查找具有名为 CLSID 的子键的键。这为您提供了 clsid 指导。然后打开`HKCR\CLSID\{guid}`并寻找路径。

您还必须注意仅为当前用户注册的 ProgID。通过*首先*迭代`HKCU\Software\Classes`和过滤从迭代 HKCR 中找到的任何重复项来执行此操作。

请注意，这一切都是相当冒险的，您会因为设计不良的 COM 组件注册而遇到大量垃圾。使用 try/catch 捕捉垃圾。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-04T09:48:06.137

这将为您提供所有已注册的 ProgID，本地或远程（当然，作为进程外，而不是另一台机器）。此外，代码只是枚举注册表项，已经很简单了。

如果问题是“是否有特定的 API”，则 MS 没有提供。很可能有一些第三方实现与这段代码基本上做同样的事情。

# java - Logback：如何在 Web 应用程序中为每个“用户”分离日志？

> ID：12723827
> 
> 赞同：1
> 
> 时间：2012-10-04T09:03:46.487
> 
> 标签：java, logging, logback

我必须为我们 Web 应用程序的每个“用户”生成日志。为此，我们使用了带有鉴别器的 SiftingAppender。

```
 <appender name="SEPARATED" class="ch.qos.logback.classic.sift.SiftingAppender">
        <discriminator>
            <key>userid</key>
            <defaultValue>unknown</defaultValue>
        </discriminator>
        <sift>
            <appender name="MYAPPLI_${userid}_SEPARATED" class="ch.qos.logback.core.FileAppender">
                <file>${LOG}/MYAPPLI/MYAPPLI_${userid}_SEPARATED.log</file>
                <append>true</append>
                <encoder>
                    <pattern>&lt;%d{yyyy-MM-dd HH:mm:ss}&gt; | %.-1level | %msg %throwable{5}%n</pattern>                    
                </encoder>
            </appender>
        </sift>
    </appender> 
```

我们添加了一个 servlet Web 过滤器，以便将会话中的用户添加到 MDC，并在...之后将其删除。

但是，我们有一些问题。我们有一些情况（为什么？）其中“userid”变量未定义，因此日志以这个名称出现：MYAPPLI_unknown_SEPARATED.log。

MDC 是 Web 应用程序的单例吗？还是在范围会话中？

实际上，我必须生成 2 个日志/用户会话。所以我有第二个具有相同鉴别器的 SiftingAppender 和一个过滤器（阈值过滤器），导致第二个日志应该与不同级别的跟踪相同。这是这样做的好方法吗？

谢谢你。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-04T09:12:29.887

“嵌套诊断上下文”适用于这样的用例 - 您可以在每个日志语句上加上一个 id 来标识用户（如 IP 地址、用户名等）

有关更多详细信息，您可以在以前的帖子中找到：

[使用 Log4j 的每个用户都有不同的日志](https://stackoverflow.com/questions/3870326/a-different-log-for-every-user-using-log4j)

# php - 我如何将数据从数据库（My Sql）导入另一个网站

> ID：12723828
> 
> 赞同：0
> 
> 时间：2012-10-04T09:03:46.220
> 
> 标签：php, mysql, cpanel

我需要在我的网站中显示来自另一个网站的数据，我有拖车站点的控制面板，但我需要动态方式来连接它们

```
 website 1         website 2 
    *****              *****
    * A * <<<< =Data== * B *
    *****              ***** 
```

所以我写

```
$link = @mysql_connect("Ip Addres to another website","username for mysql 2","passowrd 2 ")or die("Couldn't make connection.");

    @mysql_select_db("qatarlab_test",$link)or die("Couldn't select database");

    $factorRes = @mysql_query("SELECT count(id) FROM `factor` ");

    $factorRow = @mysql_fetch_array($factorRes);        

    echo  $factorRow[0]; 
```

但什么也没发生

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-04T09:13:36.840

嗨，请尝试下面给出的代码，

```
$link = @mysql_connect("Ip Addres to another website","username for mysql 2","passowrd 2 ")or die("Couldn't make connection.") or die(mysql_error());

mysql_select_db("qatarlab_test",$link)or die("Couldn't select database", $link) or die(mysql_error());

$factorRes = @mysql_query("SELECT count(id) FROM `factor` " , $link) or die(mysql_error());

$factorRow = @mysql_fetch_array($factorRes);        

echo "<pre>";
print_r($factorRow);
echo "</pre>"; 
```

这里 `$link`将针对特定的数据库连接以及`die(mysql_error())`查询或数据库连接中是否有任何错误。

谢谢

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-04T09:18:41.820

在您的第一行： mysql_connect 您正在传递 IP 地址和用户名以连接数据库。

确保用户有权远程连接到数据库（即通过本地主机以外的机器）。一般来说，当一个用户被添加到数据库中时，它的默认访问是本地主机。查看此链接：[http ://dev.mysql.com/doc/refman/5.1/en/adding-users.html](http://dev.mysql.com/doc/refman/5.1/en/adding-users.html)

您基本上需要使用以下命令添加用户：CREATE USER 'admin'@'IP Address of Website 1'; 所有的CPanel 在他们的界面中也有这个规定。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-04T09:39:52.980

首先，您必须在原始站点中启用远程数据库连接，以便新站点可以连接到它。您可以在原始站点的控制面板->数据库（远程数据库连接）中执行此操作。

您可以指定新站点的 IP 或域，它只允许新站点连接，或者您可以添加通配符 (%) 以允许任何外部连接到数据库。

完成后，再次运行您的查询。

希望能帮助到你

# javascript - How can I implement Offset Path Effect in SVG without using Javascript or dilate/erode filters?

> ID：12723832
> 
> 赞同：15
> 
> 时间：2012-10-04T09:04:00.900
> 
> 标签：javascript, vector, svg, effect

I have a long time project: a basic vector graphic tool which runs in browser and uses SVG and Javascript (maybe you have seen somekind of these elsewhere). The tool has only very limited set of functions, because the audience is restricted and the purpose is very specific and in fact there are not allowed to be other functionality than what is explicitly allowed (you know). One missed feature is eroding (also known as inset or thin) and dilating (outset, thicken, bolden) polygons and other graphical elements.

I have used Adobe Illustrator's Offset Path Effect many times and with it I can easily make copies of graphical objects that are thinned or thickened, without affecting the original object, which therefore can be nearly whatever supported by the program.

I have tried to get the same functionality to function in SVG, but without success.

I have tried the following:
- dilate and erode filters, but with not satisfying results ([please see the image here](https://stackoverflow.com/questions/12702955/svg-dilate-erode-filter-vs-illustrator-offset-path))
- Server-side Python's Shapely library, but this workaround is too slow and allows to inset or outset only the basic polygons ([description here](https://stackoverflow.com/q/12684398/1691517))
- to find javascript library / code / function, which could alter the path data of graphical elements, but found nothing for javascript

So is there any meaningful way to implement this like Offset Path Effect and how?

* * *

## 回答 #1

> 赞同：26
> 
> 时间：2012-10-04T09:04:00.900

This is an "Answer your own question – [share your knowledge, Q&A-style](https://blog.stackoverflow.com/2011/07/its-ok-to-ask-and-answer-your-own-questions/)" -style answer, but if you have some better answer, please freely use your keyboard.

I have used SO only a few days, so please don't downvote me to the gap. I got an interesting [workaround idea](https://stackoverflow.com/a/12686570/1691517) to this issue, which is based on variable-width strokes and masks.

But let's start at your (or my) first idea. When we are going to erode (thin) graphical objects in SVG, the obvious first thought is to use erode filter:

But because erode filter (and dilate as well) [uses pixel data (the rasterized path)](https://stackoverflow.com/a/12705125/1691517) the result is not good looking in all cases. In fact I have never seen a good-looking erode when used to filter vector objects. See the hat and mouth:

![Eroded image](../Images/6cabbe92a58b360a3e8e60fea3df6cfd.png)

The dilate filter has similar problems (the nose is not nice and the baseball cap is scrappy and some other inconsistencies):

![Dilated image](../Images/680d4ef18793da20245cafe645089d13.png)

All users of Adobe Illustrator know the nice path effects, which can be used to apply various path operations to shapes (objects). These effects doesn't change the original path data, they only create a modified copy of object. One of the most usable is [Offset Path Effect](http://help.adobe.com/en_US/illustrator/cs/using/WS714a382cdf7d304e7e07d0100196cbc5f-62c1a.html), which can be used to set off from the selected object by a specified distance (or something similar). SVG:s erode and dilate filters have similarities with Illustrator's Offset Path Effect, but the quality is as a vector operation (versus bitmap) high.

SVG format in it's current state, lacks support for Illustrator-like Offset Path, but it's possible to get the same functionality using variable-width strokes and masks as noted [here](https://stackoverflow.com/a/12686570/1691517).

Let's dive into the world of SVG masks. The dilate (or outset path or thicken) is possible to achieve by simply increasing a stroke width, but erode (or inset path or thinning) needs something more, for example masks. *In SVG, any graphics object or 'g' element can be used as an alpha mask for compositing the current object into the background* ([W3C SVG 1.1 Recommendation](http://www.w3.org/TR/SVG/masking.html#Masking)).

The above means that not only object's fill can be used as a mask, but also a stroke. **And adjusting the width of the stroke of the path that is used as a mask, we can control how much of the current object (into which the mask is applied using mask attribute) is masked out**.

Let's get an example of using mask. First we define a path in SVG:s defs element:

```
<defs>
<path id="head_path" d="M133.833,139.777c1 ...clip... 139.777z"/>
</defs> 
```

When we define a path in defs element, it eliminates the need for repeating the same data in other parts of document. The path's id attribute is used to refer to the path from some point(s) of the document.

Now we can use this path data in mask:

```
<defs>
...
<mask id="myMask" maskUnits="userSpaceOnUse">
<use xlink:href="#head_path" fill="#FFFFFF" stroke="#000000" 
stroke-width="18" stroke-linecap="round" stroke-linejoin="round"/>
</mask>
...
</defs> 
```

The 'use' element references to the 'path' element, whose id is 'head_path' and indicates that the graphical content (in this case only the path data) of 'head_path' element is included at this mask. **The stroke-width that is defined on the above 'use' element will be the amount of offset (erode) effect**. This amount is masked out of the element in case, which we are going to draw next.

Okay, let's draw first the 'head' without masking to see how beautiful it is:

```
...
</defs>
<use x="5" y="5" xlink:href="#head_path" fill="#4477FF" stroke="black"
stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/> 
```

This produces the following shape:

![Original shape](../Images/4eb23695c06766624416de82afbf1ec5.png)

Now test, what we can achieve using mask:

```
...
</defs>
<use x="5" y="5" xlink:href="#head_path" fill="#22EE22" stroke="black"
stroke-width="21" stroke-linecap="round" stroke-linejoin="round"
mask="url(#myMask)"/> 
```

The above 'use' element is instructed to use 'myMask' as a mask and 'head_path' as a graphical content. The mask effect is applied to the 'use' element and the following shape is drawn:

![Masked shape](../Images/b529b21b19e768474c496c27185febc7.png)

If we stack both on top of each, we can compare the original head to the masked head:

![Original and masked shape](../Images/0cf088f31193c6d33611473de99913d5.png)

Not bad at all? Let's compare the first attempt using SVG erode filtered version to the masked version:

![Eroded vs masked](../Images/75b4724a1811de9648c82b1b82c4b904.png)

The left one is erode-filtered and the right one is masked to imitate Illustrator-like Offset Path Effect. No odd artifacts in the hat and mouth!

How about dilate then? Is there a way to remove the path unfidelity on nose and scrappiness of the baseball cap? Sure. And the method is really simple but sort of hack. Fortunately there is no need to use masks. Instead we can adjust stroke-width to achieve the desired effect. And because the stroke is already used for boldening, to get a black stroke around boldened shape (if ever wanted), we have to add an additional copy of element with a little wider stroke and lay it out below the boldened shape:

```
<!-- To get the black stroke -->
<use x="220" y="5" xlink:href="#head_path" fill="red" stroke="black"
stroke-width="24" stroke-linecap="round" stroke-linejoin="round"/>
<!-- To get the boldened shape -->
<use x="220" y="5" xlink:href="#head_path" fill="red" stroke="red"
stroke-width="21" stroke-linecap="round" stroke-linejoin="round"/> 
```

This produces the following shape:

![Offset Path Effect applied](../Images/c18624c0a8e184ba2501099acdf56b62.png)

Here both the original shape and the one with our custom Offset Path Effect applied:

![Original and Offset Path Effect applied](../Images/276d3d23bcd8851abb762d5535d44814.png)

How our custom boldening compares to dilate filter:

![Dilated vs Boldened](../Images/8bca3dec28d6c02754a00183fcdabe5d.png)

The left one (above) is dilated using SVG:s dilate filter, the right one is boldened using our custom Offset Path Effect. Pretty nice, I like. Path follows faithfully the original path at the given distance and no signs of scrappiness on baseball cap.

And finally let's pull all the wires together: ![Dilate/Origina/Erode vs Offset Path Combined](../Images/9a924a76293a1fe7a028def66d4c978f.png)

The left one (above) uses dilate/erode filter of SVG and the right one uses Illustrator-imitated Offset Path Effect, which is achieved using SVG mask and thicker strokes. Which one you would choose?

**Conclusion**: We are not forced to use Javascript or other scripts to thicken or thin graphical elements in SVG. Erode and Dilate filters of SVG may have some using purposes, but they are not well suitable for high-quality path "modifications". Masks are a little complicated to use, but after few experiments you get familiar with them. I really hope that SVG in the future would support Offset Path Effect natively, without using this like hacks.

I jsfiddled the shapes used in these examples for you to play with filters and masks: [http://jsfiddle.net/7Y4am/](http://jsfiddle.net/7Y4am/)
(Test at least to change stroke widths!)

(Sorry my bad English, which get native speakers to laugh until die, but please remember, I belong to the 94% of humanity, who does not speak English natively. But fortunately we have Google Translate.)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2020-11-13T17:14:46.173

This package allows one to perform SVG path offsets: [https://www.npmjs.com/package/@flatten-js/polygon-offset](https://www.npmjs.com/package/@flatten-js/polygon-offset) and the readme offers extensive info on the algorithm used.

# flash - 在安全网站上使用 Flash 进行不安全的 HTTP 流式传输

> ID：12723834
> 
> 赞同：3
> 
> 时间：2012-10-04T09:04:03.583
> 
> 标签：flash, video, ssl, streaming, certificate

我正在运行一个具有有效 SSL 证书的安全网站，并且我正在嵌入一个 Flash 播放器，以便能够通过 HTPP 自适应比特率流传输视频数据。问题是视频内容的主机是非安全主机，通过 HTTP 提供内容。如果我现在加载我的页面，一切都很好，浏览器 (Chrome) 将证书显示为有效。但是，如果单击 Flash 播放器中的播放按钮，它会向不安全的视频主机请求，并且浏览器也会将网页显示为不安全。有没有办法允许通过闪存从 ssl 页面到普通 HTTP 页面的请求而不会导致此安全错误？

谢谢！

# android - 如何清除广播组并同时使用 oncheckchanged 监听器？

> ID：12723838
> 
> 赞同：1
> 
> 时间：2012-10-04T09:04:08.730
> 
> 标签：android, radio-button, android-button, onclicklistener

我的困境是我想使用

```
radioGrp.clearCheck(); 
```

经过一番研究，我发现这样做的方法就像

```
 selectedid = radioGrp.getCheckedRadioButtonId();
    if (selectedid > 0) {
        radioGrp.clearCheck();
    } 
```

这是因为 getCheckid 可能出现负数或类似的问题。但是，我如何在同一个活动中使用它和以下内容。oncheckedchangedlistener 有它自己的 int id，我认为这会导致问题....

```
radioGrp.setOnCheckedChangeListener(new OnCheckedChangeListener() {
        public void onCheckedChanged(RadioGroup group, int checkedId) {
..... 
```

我经常收到这个错误

```
10-04 08:44:03.728: E/AndroidRuntime(420): FATAL EXCEPTION: main
10-04 08:44:03.728: E/AndroidRuntime(420): java.lang.NullPointerException
10-04 08:44:03.728: E/AndroidRuntime(420):  at com.mangodeveloper.mcathomie.McatActivityGame$1.onCheckedChanged(McatActivityGame.java:93)
10-04 08:44:03.728: E/AndroidRuntime(420):  at android.widget.RadioGroup.setCheckedId(RadioGroup.java:172)
10-04 08:44:03.728: E/AndroidRuntime(420):  at android.widget.RadioGroup.check(RadioGroup.java:166)
10-04 08:44:03.728: E/AndroidRuntime(420):  at android.widget.RadioGroup.clearCheck(RadioGroup.java:205)
10-04 08:44:03.728: E/AndroidRuntime(420):  at com.mangodeveloper.mcathomie.McatActivityGame.fillQuestions(McatActivityGame.java:83)
10-04 08:44:03.728: E/AndroidRuntime(420):  at com.mangodeveloper.mcathomie.McatActivityGame.access$8(McatActivityGame.java:51)
10-04 08:44:03.728: E/AndroidRuntime(420):  at com.mangodeveloper.mcathomie.McatActivityGame$2.onClick(McatActivityGame.java:128)
10-04 08:44:03.728: E/AndroidRuntime(420):  at android.view.View.performClick(View.java:2485)
10-04 08:44:03.728: E/AndroidRuntime(420):  at android.view.View$PerformClick.run(View.java:9080)
10-04 08:44:03.728: E/AndroidRuntime(420):  at android.os.Handler.handleCallback(Handler.java:587)
10-04 08:44:03.728: E/AndroidRuntime(420):  at android.os.Handler.dispatchMessage(Handler.java:92)
10-04 08:44:03.728: E/AndroidRuntime(420):  at android.os.Looper.loop(Looper.java:123)
10-04 08:44:03.728: E/AndroidRuntime(420):  at android.app.ActivityThread.main(ActivityThread.java:3683)
10-04 08:44:03.728: E/AndroidRuntime(420):  at java.lang.reflect.Method.invokeNative(Native Method)
10-04 08:44:03.728: E/AndroidRuntime(420):  at java.lang.reflect.Method.invoke(Method.java:507)
10-04 08:44:03.728: E/AndroidRuntime(420):  at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:839)
10-04 08:44:03.728: E/AndroidRuntime(420):  at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:597)
10-04 08:44:03.728: E/AndroidRuntime(420):  at dalvik.system.NativeStart.main(Native Method) 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-04T17:22:57.417

好吧，我能够想出一个解决方法，尽管它是基本的 - 我只是很尴尬我没有早点想到它。基本上我只是在设置检查更改的侦听器之前调用 clear radiogroup 命令。但是，如果您的活动像我的那样在循环中包含这些，那么您必须在 clear 命令再次出现之前将 setOnCheckedChangeListener 设置为 null。这是我的解决方案框架以及重要部分。它应该可以正常工作，直到出现更好的东西。

```
private void Method1() {    

    ...

    selectedid = radioGrp.getCheckedRadioButtonId();
    if (selectedid > 0) {
        radioGrp.clearCheck();
    }
    // ^ must come before the following method.             
    activateButtons();
}

private void activateButtons() {

    radioGrp.setOnCheckedChangeListener(new OnCheckedChangeListener() {
        public void onCheckedChanged(RadioGroup group, int checkedId) {

            ...

            radioGrp.setOnCheckedChangeListener(null);
        }
    });
    Method1();
} 
```

# android - Android视口设置“user-scalable=no”会破坏视口的宽度/缩放级别

> ID：12723844
> 
> 赞同：18
> 
> 时间：2012-10-04T09:04:33.387
> 
> 标签：android, iphone, mobile, browser, viewport

我正在开发一个宽度为 640 像素的网络应用程序。

在`head`我设置的文档中

```
 <meta name="viewport" content = "width=640, user-scalable=no" /> 
```

所以内容很好地显示和水平拉伸。
这在 iOS 上完美运行，但在 Android 中，浏览器会打开放大的网站，因此用户必须双击才能缩小整个页面。

当我更改视口设置以省略这样的`user-scalable`标签时：

```
<meta name="viewport" content="width=640" /> 
```

Android 浏览器可以很好地调整到 640 像素 - 所以它可以工作。
然而现在的问题是，由于`user-scalable`未设置标签，用户可以在 Android 和 iOS 上放大和缩小。

**如何在 Android 上禁止缩放并同时将视口宽度设置为 640px？**

* * *

## 回答 #1

> 赞同：36
> 
> 时间：2012-10-08T16:25:39.047

尝试像这样渲染视口元标记：

```
 <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no" /> 
```

设置缩放设置将设置用户对缩放范围的限制，因此如果将初始值和最大值设置为相同的量，这应该可以解决问题。

**更新**：通过设置以下内容，我能够一起修复我的 android 设备错误：

```
<meta name="viewport" content="width=640px, initial-scale=.5, maximum-scale=.5" /> 
```

我还注意到某些内容，例如 p 标签没有在屏幕上流动，因此解决方法是将带有空字符串的 background-image 属性添加到任何被卡住并且没有穿过布局视图的内容。希望这次对您有所帮助。

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2013-10-17T14:52:42.640

我希望移动设备始终显示 640 像素宽的网站，因为否则会破坏设计。（我没有做的设计..）因此我想禁用移动用户的缩放。对我有用的是以下内容：

**- 2013 年 10 月 31 日更新**

首先，没有 Javascript 就无法做到这一点。您将不得不检查用户代理字符串。因此，我创建了一个 mobile-viewport.js 并在结束标记之前包含了脚本：

```
function writeViewPort() {
    var ua = navigator.userAgent;
    var viewportChanged = false;
    var scale = 0;

    if (ua.indexOf("Android") >= 0 && ua.indexOf("AppleWebKit") >= 0) {
        var webkitVersion = parseFloat(ua.slice(ua.indexOf("AppleWebKit") + 12));
        // targets android browser, not chrome browser (http://jimbergman.net/webkit-version-in-android-version/)
        if (webkitVersion < 535) {
            viewportChanged = true;
            scale = getScaleWithScreenwidth();
            document.write('<meta name="viewport" content="width=640, initial-scale=' + scale + ', minimum-scale=' + scale + ', maximum-scale=' + scale + '" />');
        }
    }

    if (ua.indexOf("Firefox") >= 0) {
        viewportChanged = true;
        scale = (getScaleWithScreenwidth() / 2);
        document.write('<meta name="viewport" content="width=640, user-scalable=false, initial-scale=' + scale + '" />');
    }

    if (!viewportChanged) {
        document.write('<meta name="viewport" content="width=640, user-scalable=false" />');
    }

    if (ua.indexOf("IEMobile") >= 0) {
        document.write('<meta name="MobileOptimized" content="640" />');
    }

    document.write('<meta name="HandheldFriendly" content="true"/>');
}

function getScaleWithScreenwidth() {
    var viewportWidth = 640;
    var screenWidth = window.innerWidth;
    return (screenWidth / viewportWidth);
}

writeViewPort(); 
```

该脚本检查访问者是否有 android（不是 chrome）或 firefox 浏览器。android浏览器不支持width=640和user-scalable=false的组合，而firefox浏览器由于某种奇怪的原因确实有双屏宽度。如果访问者有一个 windows phone IE 浏览器 MobileOptimized 被设置。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-09T05:33:18.320

我遇到了同样的情况，如果您希望内容始终适合屏幕宽度而不允许用户放大/缩小，请使用以下元标记（无论您给出什么宽度，这都会起作用）

```
 <meta name="viewport" content="initial-scale=1.0, user-scalable=no" /> 
```

# ios - 如何：iOS 6 上的主屏幕应用程序和离线使用 – 缓存清单已过时？

> ID：12723846
> 
> 赞同：3
> 
> 时间：2012-10-04T09:04:38.590
> 
> 标签：ios, web-applications, ios6, offline-caching, cache-manifest

由于苹果的 ios 更新到 ios 6 数据/本地存储的 Web 应用程序和主屏幕应用程序的处理方式与以前不同。在 ios 6 之前，它们共享相同的数据。现在主屏幕应用程序拥有自己的数据，如原生应用程序（请参阅此处：[iO6 和数据存储](http://blog.nsbasic.com/?p=928)）。

由于我的主屏幕应用程序中的缓存清单存在一些问题（在移动 safari 中工作正常，在主屏幕应用程序中无法正常工作 - 请参阅此处：[cache.manifest 的奇怪行为 / 保存到家庭的网络应用程序的离线使用 - ipad ios6 上的屏幕](https://stackoverflow.com/q/12625297/1254555)），我问自己是否可能不再需要通过缓存清单存储数据以供主屏幕应用程序离线使用。我没有任何运气在网上搜索。

所以我的问题如下：ios 6 上的主屏幕应用程序的缓存清单是否已过时？如果是这样，我可以把它留在那儿还是必须将其移除？或者：我现在是否需要以某种不同的方式启动离线存储？

据我了解，缓存清单曾经/用于告知应缓存网站的哪些数据，以便以后访问会减少加载时间，并且该网站可以离线使用（在移动 Safari 中或作为主屏幕应用程序）。但是，如果现在主屏幕应用程序和原始网站不再共享相同的数据 - 现在如何处理主屏幕应用程序的缓存？

我很乐意为此提供任何建议/帮助。或者至少是一些操作方法的链接。谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-08T15:26:39.953

您仍然需要像以前一样的清单文件。事实上你不应该改变任何东西，你的网络应用应该像以前一样工作。

唯一的区别是，现在主屏幕 Web 应用程序的离线缓存（和本地存储）与 Safari 中的 Web 应用程序分开存储。

以前只有一个地方。因此，以前，如果您在 safari 中打开您的应用程序并作为主屏幕 Web 应用程序，它们将共享相同的离线缓存和本地存储。

现在，每个都有自己的缓存，彼此分开。

# asp.net - SqlParameterCollection 只接受非空的 SqlParameter 类型对象，不接受 String 对象

> ID：12723848
> 
> 赞同：2
> 
> 时间：2012-10-04T09:04:45.557
> 
> 标签：asp.net, vb.net, parameterized

```
Protected Sub Page_Load(ByVal sender As Object, ByVal e As System.EventArgs) Handles Me.Load
    Dim ds As DataSet = New DataSet()
    Dim param As SqlParameter = New SqlParameter("@user_code", SqlDbType.Char, 4)
    param.Value = "0016"
    Const sqlstr As String = "select sectors.sector_code,sector_name   from user_sectors inner join sectors on user_sectors.sector_code = sectors.sector_code  where user_code = @user_code  and sectors.sector_code not in ('z')"
    Dim da As SqlDataAdapter = New SqlDataAdapter(sqlstr, _con)
    da.SelectCommand.Parameters.Add("@user_code")
    da.Fill(ds)
    ddl.DataValueField = "sector_code"
    ddl.DataTextField = "sector_name"
    ddl.DataSource = ds.Tables(0)
    ddl.DataBind()    
End Sub 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-04T09:13:50.387

我猜线

```
da.SelectCommand.Parameters.Add("@user_code") 
```

应该

```
da.SelectCommand.Parameters.Add(param) 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-04T09:11:11.173

那是因为它是一个[`SqlParameterCollection`](http://msdn.microsoft.com/en-us/library/system.data.sqlclient.sqlparametercollection.aspx)而不是一个`string`集合。

但是，如果您调用适当的[`Add`](http://msdn.microsoft.com/en-us/library/40959t6x.aspx)重载，如果提供足够的信息，它将为您创建实例。

或许像这样，

```
Dim newParam = da.SelectCommand.Parameters.Add("@user_code", sqlDbType.Char, 4)
newParam.Value = "0016" 
```

或者，像这样替换几行

```
da.SelectCommand.Parameters.Add( _
    New SqlParameter("@user_code", SqlDbType.Char, 4) With { .Value = "0016" })) 
```

或者，如果您想使用多行，只需添加

```
da.SelectCommand.Parameters.Add(param) 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-04T09:14:45.553

你应该`param`通过`add`

```
da.SelectCommand.Parameters.Add(param) 
```

# mysql - 与 MySql REGEX 匹配空格时遇到问题

> ID：12723849
> 
> 赞同：6
> 
> 时间：2012-10-04T09:04:46.297
> 
> 标签：mysql, regex

我正在尝试匹配数据库中与此示例“(11) 1234-5678”的格式不匹配的所有电话。

由于空格，我在定义正则表达式时遇到了麻烦，我已经完成了以下测试：

```
SELECT '(11) 1234-5678' REGEXP "\([0-9]{2}\)" -> 1
SELECT '(11) 1234-5678' REGEXP "\([0-9]{2}\).*" -> 1
SELECT '(11) 1234-5678' REGEXP "\([0-9]{2}\) " -> 0
SELECT '(11) 1234-5678' REGEXP "\([0-9]{2}\)[:blank:]" -> 0
SELECT '(11) 1234-5678' REGEXP "\([0-9]{2}\)[:space:]" -> 0 
```

我完全不知道为什么我不能让 mysql 匹配空格。

**编辑：**

我正在使用 mysql 5.5.24

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-04T09:06:56.047

采用：

```
SELECT '(11) 1234-5678' REGEXP "\\([0-9]{2}\\)[[:space:]]" 
```

# qt - 使用 QML Webview 下载文件

> ID：12723851
> 
> 赞同：0
> 
> 时间：2012-10-04T09:04:50.617
> 
> 标签：qt, qml

我可以使用 webview QML 组件下载文件并同时跟踪 url 更改吗？如何给出保存下载文件的路径？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-04T11:17:34.307

不能直接在 QML 中执行此操作。有关详细信息，请参阅[此页面。](http://qt-project.org/forums/viewthread/2971)

但是，您可以尝试使用此 c++ 示例：http: [//qt-project.org/wiki/Download_Data_from_URL](http://qt-project.org/wiki/Download_Data_from_URL)

# android - Android 中是否有用于通过蓝牙进行通信的原生 API？如果有，我在哪里可以找到文档？

> ID：12723852
> 
> 赞同：0
> 
> 时间：2012-10-04T09:04:57.903
> 
> 标签：android, bluetooth, native

我有一个 C++ 库，它有助于通过 LAN 和串行端口建立与 POS 终端的通信，现在我希望这个库只能通过蓝牙介质在 android 手机上工作，

如果 android 中有用于蓝牙通信的本机 API，我可以将此 c++ 库移植到 android 并编写一个 java 应用程序，该应用程序将通过 JNI 使用此库

android中是否有用于蓝牙的本机API，如果有，我在哪里可以找到文档？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-04T15:24:18.830

不久前，我查看了这个一般性问题（Java 与 Android 上的原生蓝牙），最终得出结论，原生 API 没有提供相对于 Java API 的任何额外功能——因此，原生蓝牙对我来说没有任何优势。

与您所期望的桌面 Linux、Mac 或 Windows 相比，有据可查的 Java 蓝牙 API 实际上非常有限。您离 HCI 很远。关键是，您很可能会发现您的库所需的 API 在 Android 上不可用（除非它需要比 RFCOMM 套接字多一点的东西）。

如果 Android 蓝牙 API 确实满足您的库的要求，那么是的，您可以从本机代码访问它们，以便您可以移植您的库。

警告：当我看到这个时，我看到强烈建议开发人员远离原生，所以我没有在 Android 上做过任何原生，只是反映了我读到的内容。

# javascript - javascript获取唯一键值

> ID：12723853
> 
> 赞同：3
> 
> 时间：2012-10-04T09:04:58.963
> 
> 标签：javascript

我有一个包含以下项目的数组：

```
var jobName = getNextJobName();
var Details = getNextJobDetails();
var item = {
          Name: jobName,
          Details: Details
        };
array.push(item); 
```

我想提取所有唯一名称（从名称字段中）。（为了创建一个新对象，它将特定作业的所有详细信息分组）。

你能告诉我一个有效的方法吗？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-04T09:12:06.180

你的意思是有一个这些对象的列表，并且你想提取所有的唯一值？

这是一种非常有效的方法，将值存储为一个名为的新对象的键，并将值存储为`uniq`“详细信息”元素的数组。

```
var arr = [ { Name: 'Alex', Details: 'Foo' }, { Name: 'Igor', Details: 'None' }, { Name: 'Alex', Details: 'Boo' } ];
var uniq = {}; // contains all the unique names
for(var i=0; i<arr.length; i++) {
  var el = arr[i].Name;
  if(!uniq[el]) uniq[el] = []; // start the array
  uniq[el].push(arr[i].Details);
} 
```

[http://jsfiddle.net/lmatteis/8LWMH/4/](http://jsfiddle.net/lmatteis/8LWMH/4/)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-04T09:11:33.783

您可以使用对象有效地进行匹配，然后将对象中的名称读取到数组中：

```
var unique = {};
for (var i = 0; i < jobs.length; i++) {
    unique[jobs[i].Name] = 1;
}
var uniqueArray = [];
for (n in unique) uniqueArray.push(n); 
```

演示：http: [//jsfiddle.net/Guffa/4cH4F/](http://jsfiddle.net/Guffa/4cH4F/)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-12-08T19:00:49.030

以下代码片段应该可以解决问题：

```
var _bzAppUnique = 0; //unique variable to increase at each call
function uniqueID() {
    var d = new Date();
    var u = d.getFullYear() + "," + d.getMonth() + "," + 
            d.getHours() + "," + d.getMinutes() + "," + 
            d.getSeconds() + "," + _bzAppUnique;
    _bzAppUnique++;
    return u.replace(/\,/g, "");
} 
```

# azure-storage - 无法使用 REST 访问 Azure 表

> ID：12723855
> 
> 赞同：0
> 
> 时间：2012-10-04T09:05:04.690
> 
> 标签：azure-storage, azure-table-storage

在开发服务器中有一个名为“datatags”的表。我可以使用 StorageClient 访问它。但是，当我尝试使用 REST API 时，出现 ResourceNotFound 错误。

我尝试使用以下 REST url

```
 http://127.0.0.1:10002/devstoreaccount1/datatags 
```

有谁知道错误可能是什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-04T17:01:19.110

我假设，由于您没有提及如何设置所有正确的标头并签署请求，因此您正在尝试执行经过身份验证的 GET 请求。表存储需要对所有请求进行身份验证。

事实上，我认为甚至没有定义针对该 URL 的 GET。如果您尝试查询实体，则类似于`http://127.0.0.1:10002/devstoreaccount1/datatags()`，但同样，您需要设置正确的标头并签署请求。

# image-processing - 如何自适应地添加和使用鉴权时采集的人脸图像来提高人脸鉴权的性能？

> ID：12723856
> 
> 赞同：2
> 
> 时间：2012-10-04T09:05:06.917
> 
> 标签：image-processing, machine-learning, artificial-intelligence, computer-vision, face-recognition

我目前的项目是建立一个人脸认证系统。我的限制是：在注册期间，用户提供单个图像进行训练。但是，我可以在身份验证时添加和使用用户提供的图像。

我想在训练中添加更多图像的原因是，用户环境不受限制 - 不同的照明条件，与相机的不同距离，来自不同的 MP 相机。唯一的缓解是姿势几乎是正面的。

我认为，上述问题类似于广泛使用的面部标记应用程序。任何人都可以建议一种自适应和智能地使用可用图像的方法吗？

- 谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-28T04:58:24.870

我建议你仔细看看 SOM（自组织地图）。我认为它包含了您提到的所有问题和限制的解决方案。

您可以将它用于每个人的单个图像问题。此外，使用多 SOM 面策略，您可以在有更多图像可用于训练的情况下对其进行调整。整个概念非常简洁的是，当遇到新面孔时，只需要重新学习新面孔而不是整个原始数据库。

在此过程中您可能会发现一些有用的链接：

[http://en.wikipedia.org/wiki/Self-organizing_map](http://en.wikipedia.org/wiki/Self-organizing_map)（维基）

[http://cs.nju.edu.cn/zhouzh/zhouzh.files/publication/tnn05.pdf](http://cs.nju.edu.cn/zhouzh/zhouzh.files/publication/tnn05.pdf)（一篇有趣的研究论文，展示了上述技术）

祝你好运

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-05T21:48:49.323

为了使您的分类器健壮，您需要使用与**条件无关的特征**。例如，您不能使用面部颜色，因为它取决于照明条件和人本身的状态。但是，您可以使用眼睛之间的距离，因为它与任何变化无关。

我建议在每次人们开始身份验证会话时构建一些此类独立特征的模型并重新训练分类器。我能想到的最佳模型是[**Active Appearance Model**](http://en.wikipedia.org/wiki/Active_appearance_model)（[实现之一](http://www2.imm.dtu.dk/~aam/)）。

# visual-c++ - 如何在 Visual C++ 中控制 PE 段顺序

> ID：12723862
> 
> 赞同：2
> 
> 时间：2012-10-04T09:05:32.093
> 
> 标签：visual-c++, linker, segment, self-extracting, packer

我正在尝试编写一个打包器/自解压 exe 类型程序，但我遇到了由 Visual C++ 链接器创建的段顺序的问题。

基本上我有一个存根程序（加载程序），它有一个像这样定义的特殊变量：

```
#pragma const_seg(".blah")
const char blah[1];
#pragma const_seg() 
```

它对其中的数据做一些事情`blah`（例如解包数据）。

第二个程序（打包程序）然后使用加载程序作为模板来创建一个包含一些数据的新程序`blah`。

`.blah`基本上，打包程序会复制加载程序文件，然后用一些新数据替换旧部分。当新文件被执行时，加载器对这个新数据进行操作。

现在修改 exe 文件是一项棘手的工作，所以为了简单起见，我想`.blah`成为文件中的最后一段，这样我就可以简单地将数据附加到加载器，然后在 PE 头中修复一些大小字段。

但是，我不知道如何控制 Visual C++ 链接器中段的顺序，以便在`.blah`编译加载程序时将其放在文件末尾。

目前部分顺序是这样的：

```
.textbss
.text
.rdata
.data
.idata
.blah
.rsrc
.reloc 
```

如您所见`.rsrc`并且`.reloc`在错误的位置，我之前需要它们`.blah`。

我该怎么做才能更改此订单？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-04T09:20:22.787

MSVC 对段的唯一控制是创建自定义段和[合并](http://msdn.microsoft.com/en-us/library/wxz26dz2%28v=vs.80%29.aspx)现有段的能力，以及[控制每个段的访问标志](http://msdn.microsoft.com/en-us/library/sf9b18xk%28v=vs.80%29.aspx)，除此之外的任何事情都变得毫无意义，因为没有设置排序规则，因此编译器可以自由选择最简单/最简单的选项。

[对于您想要做的事情，只需遍历PE](http://msdn.microsoft.com/en-us/library/ms809762.aspx)中的段描述符，找到最大的基地址，然后使用它加上段大小作为附加地址，它会更加可靠。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-04T14:46:59.077

我最终解决这个问题的方法是在链接时不将 .java 部分添加到加载程序。

相反，打包程序会在文件末尾创建一个新的 .java 部分。

当加载程序运行时，它会获取它的基地址（来自 GetModuleHandle），然后解析 DOS、NT，最后解析节标题以获取 .java 节的相对虚拟地址。

值得注意的是，当 Windows 加载节标头时，它们会立即放置在可选标头中的数据目录之后，这与在磁盘上偏移到文件对齐方式不同。

该部分的最终地址是通过将基地址添加到相对地址来找到的。

# sql-server - SQL Server 中具有最大长度的数字的数据类型

> ID：12723863
> 
> 赞同：1
> 
> 时间：2012-10-04T09:05:33.907
> 
> 标签：sql-server, sql-server-2008

我想存储长度超过 20 位但未定义最大长度的数字。

我搜索保存输入并找到的最大值的数据类型`varchar(max)`，我想要类似`numeric(max)`但不存在的东西。

我应该使用什么，可以使用，`varchar(max)`但是如何验证号码？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-04T09:11:30.653

[`bigint`](http://msdn.microsoft.com/en-us/library/ms187745.aspx)范围为 -2^63 (-9,223,372,036,854,775,808) 到 2^63-1 (9,223,372,036,854,775,807)，因此可以满足您的需求。

SQL Server 中没有更大的整数类型，因此您可能不得不接受基于字符的字段（与将数字数据存储在文本字段中相关的所有转换和排序问题）。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-04T09:12:27.210

据此，[_](http://www.dbforums.com/microsoft-sql-server/719587-long-numbers-sql-server.html)

> 数据类型“float”肯定具有最大的数字支持，并支持 309 (!!!) 位的数字。

这取决于您的数字是否为整数，实数，可能为负数..

如果您打算使用 a`varchar(max)`来存储数字，请仔细考虑。数据库中列的类型（对我而言）是确保数据一致性的最重要的一点。所以这是可能的，但真的有必要吗？

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-04T09:25:13.330

> 可以使用`varchar(max)`但是我如何验证号码？

您可以使用检查约束：

```
CREATE TABLE Numbers (
     n varchar(max) not null,
     constraint CK_Numeric CHECK (n not like '%[^0-9]%')
) 
```

检查约束确保`n`列中没有字符来自 0-9 范围之外。这是一个双重否定，但它是表达条件的最简单方法。如果值可以包含小数，您可能需要更复杂的检查：

```
CREATE TABLE Decimals (
     d varchar(max) not null,
     constraint CK_Numeric CHECK (
        d not like '%[^0-9.]%' AND
        LEN(d) - LEN(REPLACE(d,'.','')) in (0,1))
) 
```

这就是说`.`现在允许，并且`LEN`检查确保它仅在字符串中出现 0 或 1 次。

# c# - 是否可以统一删除重复注册？

> ID：12723867
> 
> 赞同：2
> 
> 时间：2012-10-04T09:05:49.793
> 
> 标签：c#, interface, dependency-injection, unity-container

考虑接口：

```
public interface IOne{}
public interface ITwo{}
public interface IBoth : IOne, ITwo{} 
```

和类

```
public class Both : IBoth{} 
```

但是当我需要解析基本接口时，我需要在容器中注册两个接口

```
<register type="IOne" MapTo="Both"/>
<register type="ITwo" MapTo="Both"/> 
```

问题是 - 我可以以这样的方式对注册进行重复数据删除：

```
<register type="IBoth" MapTo="Both"/> 
```

但是从不同的接口在不同的地方解决它：

```
var o = containet.Resolve<IOne>();
var t = containet.Resolve<ITwo>(); 
```

由于这种情况不起作用，我可以以任何其他方式做这样的把戏吗？...

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-04T10:08:01.697

简短的回答：你不能。长答案：您可以编写一个自定义容器扩展来为您完成这种技巧。

```
[TestMethod]
public void TestMethod1()
{
  var container = new UnityContainer().AddNewExtension<DeduplicateRegistrations>();
  container.RegisterType<IBoth, Both>();
  IThree three = container.Resolve<IThree>();
  Assert.AreEqual("3", three.Three());
}

public class DeduplicateRegistrations : UnityContainerExtension
{
  protected override void Initialize()
  {
    this.Context.Registering += OnRegistering;
  }
  private void OnRegistering(object sender, RegisterEventArgs e)
  {
    if (e.TypeFrom.IsInterface)
    {
      Type[] interfaces = e.TypeFrom.GetInterfaces();
      foreach (var @interface in interfaces)
      {
        this.Context.RegisterNamedType(@interface, null);
        if (e.TypeFrom.IsGenericTypeDefinition && e.TypeTo.IsGenericTypeDefinition)
        {
          this.Context.Policies.Set<IBuildKeyMappingPolicy>(
            new GenericTypeBuildKeyMappingPolicy(new NamedTypeBuildKey(e.TypeTo)),
            new NamedTypeBuildKey(@interface, null));
        }
        else
        {
          this.Context.Policies.Set<IBuildKeyMappingPolicy>(
            new BuildKeyMappingPolicy(new NamedTypeBuildKey(e.TypeTo)),
            new NamedTypeBuildKey(@interface, null));
        }
      }
    }
  }
}
public class Both : IBoth
{
  public string One() { return "1"; }
  public string Two() { return "2"; }
  public string Three() { return "3"; }
}
public interface IOne : IThree
{
  string One();
}
public interface IThree
{
  string Three();
}
public interface ITwo
{
  string Two();
}
public interface IBoth : IOne, ITwo
{
} 
```

您将需要微调扩展以捕获接口注册，例如`IDisposable`或覆盖给定接口的现有注册。

# django - 获取表单值和标签并通过电子邮件发送

> ID：12723869
> 
> 赞同：0
> 
> 时间：2012-10-04T09:05:54.777
> 
> 标签：django, django-forms

我正在尝试编写一个函数来获取表单值及其标签，这样我就可以将它们放在这样的电子邮件正文中：

```
<p><strong>Labelvalue</strong>: formvalue</p> 
```

那可能吗？

当我执行“body = smart_unicode(form.cleaned_data)”时，我得到了 dict，但我不确定我能做些什么来获得我想要的 html。

表格.py

```
class MyForm(forms.Form):
    TYPE_CHOICES = (
        (ADULT, 'Adult'),
        (CHILD, 'Child'),
    )
    type = forms.ChoiceField(widget=RadioSelect, choices=TYPE_CHOICES, label='Adult or child')
    name = forms.CharField(label='Name')
    birthdate = forms.DateField(widget=SelectDateWidget(years=range(2012,1900,-1)), label='Birthdate')
    address = forms.CharField(label='Address')
    email = forms.EmailField(label='Email') 
```

视图.py

```
def show_myform(request):
    if request.method == 'POST':

        form = MyForm(request.POST)

        if form.is_valid():
            subject = "Testsubject"

            sender = form.cleaned_data['email']

            recipients = ['post@mydomain.com']

            body = smart_unicode(form.cleaned_data)

            msg = EmailMessage(subject, body, sender, recipients)
            msg.send()            
            return HttpResponseRedirect('/thanks/')

    else:
        form = MyForm()

    return render(request, 'form/myform.html', {
        'form': form,
    }) 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-04T09:53:34.067

更好的方法是创建模板并使用 django 的[render_to_string](https://docs.djangoproject.com/en/dev/ref/templates/api/#the-render-to-string-shortcut)来获取 html 字符串作为正文。

您可以传递`form.cleaned_data`给模板以填充模板变量。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-04T10:00:46.493

You can render the email body in a separate template. Use the following if using Django 1.3 or newer:

```
{% for field in form %}
<p><strong>{{ field.label }}</strong>: {{ field.value }}</p>
{% endfor %} 
```

For more information refer to the BoundForm documentation in Django.

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-04T09:58:36.723

您可以通过托盘将所需的 html 呈现到 body 变量中。您的邮件正文还需要一个 html 模板：

```
from django.template.loader import render_to_string
body = render_to_string('yourapp/mail_template.html', {'var1':var1, 'var2':var2}) 
```

您可以将所需的任何内容传递给模板上下文字典（例如，我使用了 var1 和 var2）。然后像这样发送邮件：

```
msg = EmailMessage(subject, body, sender, recipients)
msg.send() 
```

Hope this leads into the right direction.

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-04T10:40:24.843

Yes. render_to_string did the trick!

Here is my updated source:

forms.py

```
class MyForm(forms.Form):
    TYPE_CHOICES = (
        (ADULT, 'Adult'),
        (CHILD, 'Child'),
    )
    type = forms.ChoiceField(widget=RadioSelect, choices=TYPE_CHOICES, label='Adult or child')
    name = forms.CharField(label='Name')
    birthdate = forms.DateField(widget=SelectDateWidget(years=range(2012,1900,-1)), label='Birthdate')
    address = forms.CharField(label='Address')
    email = forms.EmailField(label='Email') 
```

views.py

```
from __future__ import unicode_literals
from django.shortcuts import render
from django.http import HttpResponseRedirect
from django.core.mail import send_mail, EmailMessage, EmailMultiAlternatives
from norskfamilie.forms import HealthForm
from django.utils.encoding import smart_unicode
from django.template.loader import render_to_string

def show_Myform(request):
    if request.method == 'POST':

        form = MyForm(request.POST)

        if form.is_valid():
            subject = "My subject"

            sender = form.cleaned_data['email']

            recipients = ['post@mydomain.com']

            rendered = render_to_string('email_body.html', {'form':form , 'form_headline':subject})

            msg = EmailMultiAlternatives(subject, rendered, sender, recipients)
            msg.attach_alternative(rendered, "text/html")
            msg.send()            
            return HttpResponseRedirect('/thanks/')

    else:
        form = MyForm()

    return render(request, 'form/myform.html', {
        'form': form,
    }) 
```

email_body.html

```
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html>
    <head>
        <meta http-equiv="Content-Type" content="text/html; charset=UTF-8" />
    </head>
    <body>
        <h1>{{ form_headline }}</h1>

        {% for field in form %}
            <p><strong>{{ field.label }}</strong>: {{ field.value }}</p>
        {% endfor %}
    </body>
</html> 
```

# javascript - JavaScript 图像类 - 合并两个相邻的图像

> ID：12723870
> 
> 赞同：0
> 
> 时间：2012-10-04T09:05:56.063
> 
> 标签：javascript, image, merge

有没有办法在一个图像类中组合两个图像？我不想混合它们，只是把它们放在一起......

我正在寻找这样的东西：

```
myImg = new Image()
myImg.src = "img1.jpg" + "img2.jpg" 
```

谢谢！

**编辑：**

我需要在将它们放入画布之前将它们组合起来以便于滚动处理......所以画布或 div 不是一个选项。

**编辑，二：**

我正在使用我正在滚动的画布。但是我的形象被淘汰了。它认为这将是最简单的方法，当我将我的实际图像与以下图像合并并“滚动”通过该图像而不是处理两个单独的图像时。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-04T09:08:42.000

从来没听说过。一个图像元素只支持一个图像。要么您必须创建两个单独的图像并将它们浮动在彼此旁边，或者您可以使用一个`canvas`元素，并将两个图像并排绘制到它上面（如果您手头没有非常罕见的场景，最好的解决方案可能会使用两个单独的图像）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-04T09:08:41.483

除非您使用画布或等效技术，否则您不能使用 javascript 组合这样的图像。

如果您只想将它​​们彼此相邻放置，请创建一个容器并附加图像：

```
var container = document.createElement('div'),
    createImage = function(src) {
        var img = new Image();
        img.src = src;
    };
 container.appendChild( createImage('img1.jpg') );
 container.appendChild( createImage('img2.jpg') ); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-04T09:17:00.360

使用 jQuery

```
$('.container').append('<img algin="left" src="img1.jpg" />');
$('.container').append('<img algin="left" src="img2.jpg" />'); 
```

# ios - UITableView重用section header view：使用UITableViewRowAnimationFade时header view消失

> ID：12723871
> 
> 赞同：2
> 
> 时间：2012-10-04T09:05:58.347
> 
> 标签：ios, uitableview

我更喜欢使用 UITableView 创建具有 2 级层次结构的表，如这张图片。每次用户点击标题时，内容都会折叠或展开。经过3天的研究，我发现有2个技术：

**1.自定义 UITableViewCell 本身带有另一个表**

**2.使用节标题视图。**

现在我决定使用第二个。而且因为[UITableView 不重用剖面视图](https://stackoverflow.com/questions/960119/reusable-tableview-header-views)（虽然 UITableView 包含 2 个私有变量：_reusableHeaderViews & _reusableFooterViews:)，我创建了一些自定义方法来完成这项任务。一切都很好，除了 1 个错误：当我使用方法**reloadSections:withRowAnimation**和**UITableViewRowAnimationFade**时，标题视图变为空白视图。

这是我的代码：

```
#import "MasterViewController.h"

@interface MasterViewController () 
//remember current section
@property (assign, nonatomic) NSInteger curSession;
@property (strong, nonatomic) NSMutableDictionary *reusableHeaderViews;
@end

@implementation MasterViewController

@synthesize reusableHeaderViews = _reusableHeaderViews;
@synthesize tableView = _tableView;
@synthesize curSession = _curSession;
@synthesize detailViewController = _detailViewController;

- (id)initWithNibName:(NSString *)nibNameOrNil bundle:(NSBundle *)nibBundleOrNil
{
    self = [super initWithNibName:nibNameOrNil bundle:nibBundleOrNil];
    if (self) {
        self.title = NSLocalizedString(@"Master", @"Master");
    }
    return self;
}

- (void)viewDidLoad
{
    [super viewDidLoad];
    self.curSession = -1;
}

- (void)viewDidUnload
{
    [super viewDidUnload];
    // Release any retained subviews of the main view.
}

- (BOOL)shouldAutorotateToInterfaceOrientation:(UIInterfaceOrientation)interfaceOrientation
{
    return (interfaceOrientation != UIInterfaceOrientationPortraitUpsideDown);
}

//method for adding header view into reuse-array
-  (void)registerHeaderView:(UITableViewCell *)headerView forReuseIdentifier:(NSString *)reuseIdentifier
{
    NSMutableDictionary *reusableDictionary  = [self reusableHeaderViews];
    if (reusableDictionary == nil)
    {
        reusableDictionary = [[NSMutableDictionary alloc] init];  //creates a storage dictionary if one doesn’t exist
        self.reusableHeaderViews = reusableDictionary;
    }

    NSMutableArray *arrayForIdentifier = [[self reusableHeaderViews] objectForKey:reuseIdentifier];
    if (arrayForIdentifier == nil)
    {
        //creates an array to store views sharing a reuse identifier if one does not exist
        arrayForIdentifier = [[NSMutableArray alloc] init];        
        [reusableDictionary setObject:arrayForIdentifier forKey:reuseIdentifier];
    }

    [arrayForIdentifier addObject:headerView];
}

//get header view in reuse-array
- (UITableViewCell *)reuseableHeaderForIdentifier:(NSString *)reuseIdentifier
{
    NSMutableArray *arrayOfViewsForIdentifier = [[self reusableHeaderViews]  objectForKey:reuseIdentifier];

    if (arrayOfViewsForIdentifier == nil)
    {
        return nil;  //We don’t have any of this kind!
    }

    NSInteger indexOfAvailableHeaderView = [arrayOfViewsForIdentifier indexOfObjectPassingTest:^BOOL(id obj, NSUInteger idx, BOOL *stop)
                                            {
                                                //If my view doesn’t have a superview, it’s not on-screen.
                                                return ![obj superview];
                                            }];

    if (indexOfAvailableHeaderView != NSNotFound)
    {
        UITableViewCell *headerView = [arrayOfViewsForIdentifier objectAtIndex:indexOfAvailableHeaderView];
        return headerView;    //Success!
    }

    return nil;
}

#pragma mark - Table View

- (NSInteger)numberOfSectionsInTableView:(UITableView *)tableView
{
    return 15;
}

- (NSInteger)tableView:(UITableView *)tableView numberOfRowsInSection:(NSInteger)section
{
    if (_curSession == section)
        return section;
    return 0;
}

- (UIView*) tableView:(UITableView *)tableView viewForHeaderInSection:(NSInteger)section
{
    static NSString *headerReuseIdentifier = @"Header";
    UITableViewCell *cell = [self reuseableHeaderForIdentifier:headerReuseIdentifier];
    if(cell == nil) 
    {
        //Didn’t locate a reusable
        cell = [[UITableViewCell alloc] initWithStyle:UITableViewCellStyleDefault reuseIdentifier:@""];
        [self registerHeaderView:cell forReuseIdentifier:headerReuseIdentifier];
        UITapGestureRecognizer *tapGR = [[UITapGestureRecognizer alloc] initWithTarget:self action:@selector(openSection:)];
        tapGR.numberOfTapsRequired = 1;
        [cell addGestureRecognizer:tapGR];
        cell.backgroundColor = [UIColor redColor];
    }
    cell.tag = section;
    cell.textLabel.text = [NSString stringWithFormat:@"Section title %i", section];

    return cell;
}

- (UITableViewCell *)tableView:(UITableView *)tableView cellForRowAtIndexPath:(NSIndexPath *)indexPath
{
    static NSString *CellIdentifier = @"Cell";

    UITableViewCell *cell = [tableView dequeueReusableCellWithIdentifier:CellIdentifier];
    if (cell == nil) {
        cell = [[UITableViewCell alloc] initWithStyle:UITableViewCellStyleDefault reuseIdentifier:CellIdentifier];
        cell.accessoryType = UITableViewCellAccessoryDisclosureIndicator;
    }

    cell.textLabel.text = [NSString stringWithFormat:@"Row %i - section %i", indexPath.row, indexPath.section];
    return cell;
}

- (void)tableView:(UITableView *)tableView didSelectRowAtIndexPath:(NSIndexPath *)indexPath
{

}

- (void) openSection:(id)sender

{
    NSInteger section = [[(UITapGestureRecognizer*)sender view] tag];
    if(_curSession == -1)
    {
        _curSession = section;
        [_tableView reloadSections:[NSIndexSet indexSetWithIndex:_curSession] withRowAnimation:UITableViewRowAnimationFade];
    }
    else if(_curSession == section)
    {
        _curSession = -1;
        [_tableView reloadSections:[NSIndexSet indexSetWithIndex:section] withRowAnimation:UITableViewRowAnimationFade];
    }
    else if(_curSession != section)
    {
        NSInteger temp = _curSession;
        _curSession = -1;
        [_tableView reloadSections:[NSIndexSet indexSetWithIndex:temp] withRowAnimation:UITableViewRowAnimationFade];
        _curSession = section;
        [_tableView reloadSections:[NSIndexSet indexSetWithIndex:section] withRowAnimation:UITableViewRowAnimationFade];
    }
}

@end 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-07T12:16:11.540

这有点晚了，但也许有人会有类似的问题。

你可以尝试使用这个组件：[https ://github.com/serverdensity/ios-SDNestedTable](https://github.com/serverdensity/ios-SDNestedTable)

# sql - 如何使用 CASE 语句在 SQL Server 中创建数据透视查询？

> ID：12723872
> 
> 赞同：6
> 
> 时间：2012-10-04T09:06:04.900
> 
> 标签：sql, sql-server

Col1 仅包含 X 和 Y。

```
Col1    Col2

X       abc

Y       pqr

X       pqr

X       mnq

Y       cxr 
```

我想让它像这样：

```
X    Y    Col2

Yes  Yes  pqr
Yes  No   abc
Yes  No   mnq
No   Yes  cxr 
```

我应该写什么 SQL 查询？

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-10-04T09:15:26.270

使用[SQL PIVOT 运算符](http://msdn.microsoft.com/en-us/library/ms177410%28v=sql.105%29.aspx)的解决方案：

```
SELECT Col2, 
  case when X=0 then 'No' else 'Yes' end as X, 
  case when Y=0 then 'No' else 'Yes' end as Y
FROM MyTable
PIVOT (
  count(Col1)
  FOR Col1 IN ([X], [Y])
) AS PivotTable; 
```

### 运行示例：[http ://www.sqlfiddle.com/#!3/5856d/14](http://www.sqlfiddle.com/#!3/5856d/14)

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-10-04T09:25:20.537

试试这个：

```
with cte as (select col2,
                    min(col1)as X,
                    min(col1) as Y,
                    count(distinct col1) as cnt
             from  your_table
             group by col2)
select COL2,
       case when X='X' then 'Yes'  else 'No' end X,
       case when Y='Y' OR  cnt=2 then 'Yes'  else 'No' end Y
from cte 
```

# [SQL Fiddle 演示](http://www.sqlfiddle.com/#!3/da3f9/2)

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2012-10-04T09:35:35.567

试试这个：

```
select col2,CASE WHEN COUNT(*)=1 then CASE WHEN min(col1)='X' then 'YES' else 'NO' end  else 'YES' end as 'X',
            CASE WHEN COUNT(*)=1 then CASE WHEN min(col1)='Y' then 'YES' else 'NO' end else 'YES' end  as 'Y' 
from MyTable group by col2 
```

# javascript - 可以在同一页面上的多个实例中使用 yepnope（如纯异步资源加载器）？

> ID：12723876
> 
> 赞同：3
> 
> 时间：2012-10-04T09:06:19.810
> 
> 标签：javascript, asynchronous, modernizr, yepnope

像这样使用 Yepnope 是否可以，通过为每个小部件设置一个加载实例，我最终会在给定页面上获得 Modernizr.load aka Yepnope 的多个实例？可能是 10-20 个，有些可能会加载相同的脚本。

我认为最好使用另一个更适合依赖项等的资源加载器，比如 RequireJS。

我的问题是奇怪的错误，在 IE8 中只发生过几次。几乎就像它与每个 Modernizr.load 实例的执行顺序和脚本/回调的加载有关。

```
<div id="myWidget-1">
    Widget that uses js loaded by yepnope
</div>

<script>
Modernizr.load({
    load: [
        'script1.js',
        'script2.js',
        'script3.js'
    ],
    complete: function () {

        ... do some stuff ... 

    }
});
</script>

<div id="myWidget-2">
    The same widget installed a second time, but with other settings. 
</div>

<script>
Modernizr.load({
    load: [
        'script1.js',
        'script2.js',
        'script3.js'
    ],
    complete: function () {

        ... do some stuff ... 

    }
});
</script> 
```

# bash - 使用 { } 的 Bash cmdlist 不起作用

> ID：12723878
> 
> 赞同：0
> 
> 时间：2012-10-04T09:06:23.177
> 
> 标签：bash

我阅读了关于`{ }`, 发生在当前 shell 中的命令而没有启动新的所以以下命令：

`for i in {1..50000} ; do echo $i ; done`

应该与

`for i in {1..50000} ; { do echo $i } ; done`

但它给了我一个错误：

`zsh: parse error near`做'`

任何想法？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-04T09:23:07.680

我认为您混淆了（并打错了字）两个概念。 第 3.2.4.3 节中的文档[http://www.gnu.org/software/bash/manual/bashref.html说：](http://www.gnu.org/software/bash/manual/bashref.html)

```
 {}
     { list; }
    Placing a list of commands between curly braces causes
    the list to be executed in the current shell context.
    No subshell is created. 
    The semicolon (or newline) following list is required. 
```

他们解释说它`(list; )`与调用子shell的括号（不是大括号）不同。进一步在文档中，在 3.5.1 中，他们解释了大括号扩展（大括号内容被扩展为值列表）。

实际上：

```
for i in {1..50000} 
```

是一个大括号扩展：大括号之间的内容被一个整数列表替换。

你想在 for 命令之后做的事情应该写：

```
for i in {1..5000}
do
{ echo $ii ; echo "something else or run a command"; echo "maybe another"; }
done 
```

笔记：

1/ { 必须后跟一个空格。

2/ do 命令不应该在大括号中

3/ 命令列表必须以分号结尾；

# javascript - 预先计算变换原点偏移

> ID：12723879
> 
> 赞同：1
> 
> 时间：2012-10-04T09:06:24.027
> 
> 标签：javascript, jquery, css, rotation, css-transforms

当我在旋转后更改 css3 中的 transform-origin 属性时，元素会跳回原始位置的中心。有没有办法计算这个距离？我想在不同的原点进行平滑的旋转。

我写了一个公式。它运作良好，但前提是我知道未来轮换的起源。

```
var newx = p2x - Math.sqrt(Math.pow(p2x - p1x, 2) + Math.pow(p2y - p1y, 2)) * Math.sin( -((degree * (Math.PI/180))) + Math.atan( ((p2x - p1x)/(p2y - p1y)) ));
var newy = p2y - Math.sqrt(Math.pow(p2x - p1x, 2) + Math.pow(p2y - p1y, 2)) * Math.cos( -((degree * (Math.PI/180))) + Math.atan( ((p2x - p1x)/(p2y - p1y)) )); 
```

p1x 和 p1y 是未来的值，p2x 和 p2y 是当前旋转的原点。

# javascript - Extjs 3.4 - 按钮图标不显示或不居中

> ID：12723881
> 
> 赞同：0
> 
> 时间：2012-10-04T09:06:24.230
> 
> 标签：javascript, html, css, button, extjs

我想用我创建的图标填充一个按钮，但无论我尝试过什么，似乎都将图标一半截断并放在左边，或者根本不显示。我一直在尝试 CSS 和图标、iconcls、cls 按钮选项的不同组合。

我正在关注 Ext 3 按钮[示例页面](http://dev.sencha.com/deploy/ext-3.4.0/examples/button/buttons.html)，但这似乎对我没有显示任何内容......

```
This code is an item inside my form panel (I try to replicate this with different buttons in the panel)
{
                    xtype: 'container',
                    layout: {
                        type: 'table',
                        columns: 2,
                        tableAttrs: {
                            cellspacing: 5
                        }
                    },                  
//                  padding: 5,
                    pack: 'center',
                    align: 'middle',
                    items: [{
                        xtype: 'button',
                        width: 40,
//                      scale: 'medium',
                        ref: '../drawToolsBtn',
                        tooltip: 'Drawing Tools',
                        icon: 'img/draw.png',
                        iconAlign: 'top',
                        baseCls: 'x-plain',
//                      iconCls: 'drawBtn',
                        enableToggle: true,
//                      padding: 3,
                        toggleHandler: function(btn, state)
                        {
                            this.showDrawToolsWin(state);
                        },
                        scope: this
                    },{
                        xtype: 'label',
//                      columnWidth: 1, // remainder of container
                        padding: 3,
                        text: 'Click button to open Drawing Tools Menu'
                    }]
                }

CSS
--------------------
.drawBtn{
    background: url(../img/draw.png) !important;

} 
```

感谢您的任何帮助！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-05T03:54:10.893

```
.drawBtn{
    background-image: url(../img/draw.png) !important;
 } 
```

# image - JavaCV - 实现一个好的描述符匹配器

> ID：12723884
> 
> 赞同：1
> 
> 时间：2012-10-04T09:06:47.307
> 
> 标签：image, image-processing, javacv, matcher

我正在开发一个程序来检测两张图片之间的相似性，以确定它们是否代表同一个对象。在研究了该主题后，我确定需要 3 个主要组件：

*   探测器
*   提取器/描述符
*   匹配器

我已经成功地实现了前两个（如果您需要帮助，请 PM 我，我知道这可能会很痛苦），但是我遇到了匹配器的问题。这是我使用的代码的一部分：

```
 DMatch matches = new DMatch();
    BFMatcher matcher = new BFMatcher(NORM_HAMMING, true);
    [...]
    matcher.match(descriptor1, descriptor2, matches, null);
    System.out.println("Matches: " + matches.capacity()); 
```

match.capacity() 的输出是 58，当我希望它是完全相同数量的关键点或描述符点时（因为我正在将图像与自身进行比较......）。我期待错误的结果吗？我做错了什么吗？一些帮助将不胜感激:)

***编辑：***

我已经设法完成了我的程序，现在可以回答我自己的问题，希望它能对我以前的情况有所帮助：

matcher.match(...) 方法计算描述每个图像的二进制字符串或浮点向量（例如描述符 1 和描述符 2），返回查询索引（keypoints1 中关键点的索引）、训练索引（keypoints2 等效的索引匹配 queryIndex 中的点）和这些点之间的汉明距离。这将图像 1 中的每个点与图像 2 中的每个点匹配（至少来自 drawMatches，这是我的结论），但是如果要确定两个图像之间的匹配率，则需要过滤 DMatch 匹配内容。为此，您必须自己创建一个算法（我在网上找到的算法都不能很好地工作，例如 2*minDist）。

如果您需要更多帮助或一些代码，请随时 PM 我。我知道理解整个图像匹配过程是多么令人沮丧！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-04T12:44:43.097

您应该使用`matches.size()`来获取找到的*有效*匹配数（`capacity`给出内部数组分配的大小）。

# java - 用于下载文件或 zip 文件的 Java 代码

> ID：12723895
> 
> 赞同：0
> 
> 时间：2012-10-04T09:07:24.813
> 
> 标签：java

我正在使用以下代码下载文件，它适用于小文件，但是当我尝试下载大小> 11GB 的文件时，代码不起作用并出现`java.lang.NegativeArraySizeException`异常

```
public String downloadDirectory()
{

     OutputStream myOut = null;
     FileInputStream fileInputStream = null;
     File downzip = new File(dirName+"/"+dir+".zip");

   getServletResponse().setContentType("TEXT/HTML");
   getServletResponse().setHeader("Content-Disposition","attachment; filename=\"" + dir +".zip" + "\"");
   getServletResponse().setContentLength((int)downzip.length());
    System.out.println("length  "+(int)downzip.length());
     //READ DATA FROM FILE

            byte[] dataRead = new byte[(int)downzip.length()];
               fileInputStream = new FileInputStream(downzip);
               fileInputStream.read(dataRead,0,(int)downzip.length());
    //WRITE DATA TO OUTFILE
               myOut = getServletResponse().getOutputStream();

          myOut.write(dataRead);

           if (fileInputStream != null) {                       
               fileInputStream.close();
           }

    }
    catch(Exception e)
    {
        e.printStackTrace();
         Execute.rmdirscript(dirName);
        return "exception";
    }
     finally{
        System.out.println("finally downloaddir");
    if(myOut!=null){
        try{
        myOut.close();}
        catch(Exception e){
            e.printStackTrace();;
        }
    }
    if (fileInputStream != null) {                       
               try{
        fileInputStream.close();}
        catch(Exception e){
            e.printStackTrace();;
        }
           }
}

} 
```

错误在这一行：

```
byte[] dataRead = new byte[(int)downzip.length()]; 
```

对于大文件，该值`(int)downzip.length()`变为负数并给出`java.lang.NegativeArraySizeException`异常。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-04T09:18:01.743

你没有尝试循环吗？像这样

```
 byte data[] = new byte[1024];
 int count;
  while ((count = in.read(data, 0, 1024)) != -1)
            {
                    out.write(data, 0, count);
            } 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-04T09:10:42.533

您正在读取 long 和 down 的数据大小，将其转换为 int，这是不安全的，并且会导致负数组长度。实际上，如果我使用此代码，您的文件长度应该为 0，并且长度可能不是负数，而只是零。

作为一种解决方案，尝试直接写入文件而不是预先创建数组。此外，为数组分配 11G 内存无论如何也不是一个好主意。

您可以从输出文件路径创建一个`FileOutputStream`，然后读取`InputStream`并写入，`OutputStream`直到您到达`-1`应该为您安全地复制文件的流的末尾。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-04T09:14:52.017

您将它存储到 11 GB 相当大的字节数组中，我认为有问题发生。

请提供您收到错误的确切行。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-04T11:03:46.940

使用此方法：

```
private static void readFileAndDumpIt(String pathToFile, OutputStream out){
    try {
        InputStream fIs = new BufferedInputStream(new FileInputStream(pathToFile));
        byte[] array=new byte[4096];
        for(int numberRead=fIs.read(array);numberRead!=-1;numberRead=fIs.read(array)){
            out.write(array,0,numberRead);
            out.flush();
        }
        fIs.close();
    } catch (FileNotFoundException e) {
        e.printStackTrace();
    } catch (IOException e) {
        e.printStackTrace();
    }
} 
```

我已经成功使用它，最多 20GB 的文件

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-10-04T09:12:19.180

Java 使用 int 进行数组索引。`Intger.MAX_VALUE`是`2^31-1`。_ 您只能将`2^31-1`字节存储`2GiB`在常规数组中。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-10-04T09:16:55.307

`File downzip`这是导致您出现问题的长度。

`downzip.length()`返回`long`，您明确地转换为`int`. 这样，您可以轻松获得初始化数组的负值：

```
byte[] dataRead = new byte[(int)downzip.length()]; 
```

另一件事是您应该避免读取整个文件。更好的方法是分块读取和写入。

您在@Ashok Raj 的回答中有如何做到这一点的示例。

# jquery - 灯箱打开 html

> ID：12723903
> 
> 赞同：0
> 
> 时间：2012-10-04T09:07:47.517
> 
> 标签：jquery, lightbox

我正在尝试使用灯箱打开表单，表单本身是在另一个页面中使用的 html。

问题是我尝试了[ShadowBox](http://www.shadowbox-js.com/)，它打开了一个 iframe，我的大部分变量都在这个过程中丢失了。我试过`Lightbox5`了，我似乎无法找到传递 html 的代码。

有什么建议么？

我用 ShadowBox 做了这样的事情

```
<a rel="shadowbox[MyStuff]" href="survey.html">survey</a> 
```

它会解析传入的元素是 html，但它会在 iframe 中打开，从而丢失我在此页面中的变量

添加了整个示例代码

```
<html>

<head>
    <!-- the shadowbox stylesheet and js -->
    <link rel="stylesheet" type="text/css" href="jquery.lightbox-0.5.css"
    media="screen" />
    <script type="text/javascript" src="jquery.js"></script>
    <script type="text/javascript" src="jquery.lightbox-0.5.js"></script>
    <script type="text/javascript">
        $(document)
            .ready(function ()
        {
            // Use this example, or...
            $('a[@rel*=lightbox]')
                .lightBox(); // Select all links that contains lightbox in the attribute rel
            // This, or...
            $('#gallery a')
                .lightBox(); // Select all links in object with gallery ID
            $('#somehiddendiv div')
                .lightBox(); // Select all links in object with gallery ID
            // This, or...
            $('a.lightbox')
                .lightBox(); // Select all links with lightbox class
            // This, or...
            $('a')
                .lightBox(); // Select all links in the page
            // ... The possibility are many. Use your creative or choose one in the examples above
        });
        $(function ()
        {
            $.ajax(
            {
                url: 'survey.html',
                dataType: 'html',
                success: function (data)
                {
                    $('#somehiddendiv')
                        .html(data);
                }
            });
        });
    </script>
</head>

<body>
    <!-- <a href="egypt.jpg"><img src="download.jpg" width="72" height="72" alt="" /></a>
-->
    <div id="somehiddendiv"></div> 
```

```
</body> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-04T09:21:58.783

```
$(function(){

    $.ajax({
        url: 'yourotherhtmlpage.html',
        dataType: 'html',
        success: function(data){
            $('#somehiddendiv').html(data);
        }
    });
}); 
```

然后添加一个链接或任何在灯箱窗口中打开 div 的内容。或者通过代码打开它。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-04T09:20:46.657

你也可以使用[fancybox](http://fancybox.net/)插件来达到同样的目的

```
$(document).ready(function() {

    /* This is basic - uses default settings */

    $("a#single_image").fancybox();

    /* Using custom settings */

    $("a#inline").fancybox({
        'hideOnContentClick': true
    });

    /* Apply fancybox to multiple items */

    $("a.group").fancybox({
        'transitionIn'  :   'elastic',
        'transitionOut' :   'elastic',
        'speedIn'       :   600, 
        'speedOut'      :   200, 
        'overlayShow'   :   false
    });

}); 
```

# python - ftplib retrlines error_proto

> ID：12723907
> 
> 赞同：1
> 
> 时间：2012-10-04T09:07:57.403
> 
> 标签：python, ftp, centos

我的 Centos 服务器上有 pyftpdlib 0.7.0，当我尝试运行此命令时，我在客户端上使用 ftplib 我收到此错误

客户端操作系统：Windows 7
python V：2.7
服务器操作系统：CentOs

我的鳕鱼：

```
from ftplib import FTP
ftp = FTP('xxx.xxx.xxx.xxx')
ftp.login(user='xxx', passwd='xxx' )
ls = []
ftp.retrlines('RETR 2.jpg', callback =ls.append)
print ls 
```

和错误：

```
Traceback (most recent call last):
  File "E:\py\ftp test\ftpTest.py", line 7, in <module>
    ftp.retrlines('RETR 2.jpg', callback =ls.append)
  File "C:\Python27\lib\ftplib.py", line 422, in retrlines
    conn = self.transfercmd(cmd)
  File "C:\Python27\lib\ftplib.py", line 361, in transfercmd
    return self.ntransfercmd(cmd, rest)[0]
  File "C:\Python27\lib\ftplib.py", line 330, in ntransfercmd
    resp = self.sendcmd(cmd)
  File "C:\Python27\lib\ftplib.py", line 244, in sendcmd
    return self.getresp()
  File "C:\Python27\lib\ftplib.py", line 220, in getresp
    raise error_proto, resp
error_proto: 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2018-06-07T19:57:41.517

不确定这是否有帮助，但这是我编写文件检索行的方式：

```
 gfile = open(filename, 'wb')
        ftp.retrbinary('RETR %s' % filename, gfile.write)
        gfile.close() 
```

我有一段时间遇到这样的问题，但它与您的问题不完全相同，对我来说，解决方法是更改​​我的 ftp.retr 行的格式，RETR 需要单独位于“”中，并且文件名分开。你的显然使用了一个列表，但这就是我在我的程序中使用它的方式。

# php - 不能一次更新多行

> ID：12723916
> 
> 赞同：0
> 
> 时间：2012-10-04T09:08:41.920
> 
> 标签：php

我有这段代码，我用它来一次更新多行，但它只会让我更新一次..

你能帮我检查一下吗？我找不到任何问题。谢谢！

表格：

```
echo "<td><input type='hidden' name='att_id[$i]' value='{$rows['att_id']}' s/></td>";
echo "<td><input type='text' name='attivita_da_promuovere[$i]' value='{$rows['attivita_da_promuovere']}' /></td>";
echo "<td><input type='text'id='start_date' class='datepicker' title='D-MMM-YYYY' name='start_date[$i]' value='{$rows['start_date']}' /></td>";
echo "<td><input type='text'id='end_date' class='datepicker' title='D-MMM-YYYY' name='end_date[$i]' value='{$rows['end_date']}' /></td>";
echo "<td><input type='text' name='attivita_tip_merc[$i]' value='{$rows['attivita_tip_merc']}' /></td>";
echo "<td><input type='text' name='attivita_da_svolgere[$i]' value='{$rows['attivita_da_svolgere']}' /></td>";
echo "<td><input type='text' name='attivita_tip_personale[$i]' value='{$rows['attivita_tip_personale']}' /></td>"; 
```

查询：

```
$id_job=$_GET['id'];
$size = count($_POST['att_id']);
$i = 0;
while ($i < $size) {
$attivita_da_promuovere= $_POST['attivita_da_promuovere'][$i];
$start_date= $_POST['start_date'][$i];
$end_date= $_POST['end_date'][$i];
$attivita_da_svolgere = $_POST['attivita_da_svolgere'][$i];
$attivita_tip_merc = $_POST['attivita_tip_merc'][$i];
$attivita_tip_personale=$_POST['attivita_tip_personale'][$i];
$id=$_POST['att_id'][$i];

$query = "UPDATE attivita SET attivita_da_promuovere = '$attivita_da_promuovere',attivita_da_svolgere = '$attivita_da_svolgere',attivita_tip_merc = '$attivita_tip_merc',end_date = '$end_date',attivita_tip_personale = '$attivita_tip_personale',start_date = '$start_date' WHERE att_id = '$id' LIMIT 1";
$result=mysql_query($query) or die ("Error in query: $query");
++$i; 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-04T09:12:56.693

你为什么要`LIMIT 1`询问。像这样删除它

```
$query = "UPDATE attivita 
SET attivita_da_promuovere = '$attivita_da_promuovere',
attivita_da_svolgere = '$attivita_da_svolgere',
attivita_tip_merc = '$attivita_tip_merc',
end_date = '$end_date',
attivita_tip_personale = '$attivita_tip_personale',
start_date = '$start_date' WHERE att_id = '$id'"; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-04T09:13:20.813

如果它只影响一行，那么您唯一需要查看的是您的`WHERE`子句，它意味着什么以及为什么它只获得 1 行。

此外，您的查询中有一个 LIMIT 1 ，在这种情况下，我理解这与您想要的完全相反，因此请将其删除。

新查询将类似于：

> $query = "UPDATE attivita SET attivita_da_promuovere = '$attivita_da_promuovere',attivita_da_svolgere = '$attivita_da_svolgere',attivita_tip_merc = '$attivita_tip_merc',end_date = '$end_date',attivita_tip_personale = '$attivita_tip_personale',start_date_id = '$开始日期='$id'";

那里的“回声”块的一个小提示，您可以简单地退出您的 php 脚本`?>`，然后输入您的 HTML 并重新打开您的脚本`<?php`

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-04T09:13:59.990

你在这里犯错了吗：

您放在页面上的名称是

名称=attivita_da_promuovere1

名称=attivita_da_promuovere2

名称=attivita_da_promuovere3 ..

并且您尝试将帖子读取为名称为 'attivita_da_promuovere'($_POST['attivita_da_promuovere'][$i]) 的数组。我看不出怎么会有这样的数组，因为你给了他们单独的名字。

你不应该这样看帖子吗？

```
$_POST['attivita_da_promuovere'.$i] 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-04T09:28:22.050

```
$query = "UPDATE attivita SET attivita_da_promuovere = '$attivita_da_promuovere',attivita_da_svolgere = '$attivita_da_svolgere',attivita_tip_merc = '$attivita_tip_merc',end_date = '$end_date',attivita_tip_personale = '$attivita_tip_personale',start_date = '$start_date' WHERE att_id = '$id'"; 
```

在您的更新中尝试此代码

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-10-04T10:21:44.280

你说你的表格在foreach函数里面？这是有道理。

首先，您需要启动一次表单。

ex（正确的做法）：

```
<?php 
echo "<form method='post'>";
foreach(){
    // rows here
}
echo "</form>";
?> 
```

也许你这样做（错误的方式）：

```
<?php 
foreach(){
    echo "<form method='post'>";
    // rows here
    echo "</form>";
}
?> 
```

# iphone - 我在 coredata 中的数据更新时的本地通知？

> ID：12723918
> 
> 赞同：0
> 
> 时间：2012-10-04T09:08:46.033
> 
> 标签：iphone, uilocalnotification

我有一个应用程序，它通过检查数据是否存在的谓词从网站和 seva 检索数据到核心数据。如果不保存到核心数据中。如果是，则更新旧的。插入新数据时，我需要发出本地通知。我可以这样做吗？任何想法？

非常感谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-04T09:23:11.623

```
if (newRecord)
{
    Class cls = NSClassFromString(@"UILocalNotification");
    if (cls != nil) {
        NSString *kRemindMeNotificationDataKey = @"kRemindMeNotificationDataKey";

        UILocalNotification *notification = [[cls alloc] init];

        notification.fireDate = [NSDate date];
        notification.timeZone = [NSTimeZone defaultTimeZone];
        notification.alertBody = [NSString stringWithFormat:@"Record Inserted"];
        notification.alertAction = @"Show me";
        notification.soundName = UILocalNotificationDefaultSoundName;
        notification.applicationIconBadgeNumber = 1;
        NSDictionary *userDict = [NSDictionary dictionaryWithObject:yourObjectorString forKey:kRemindMeNotificationDataKey];
        notification.userInfo = userDict;
        [[UIApplication sharedApplication] scheduleLocalNotification:notification];
        [notification release];
    }
} 
```

我希望这对你有帮助..

:)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-04T09:17:53.603

您可以使用当前时间触发通知

`localNotification.fireDate = [NSDate date];`

关注本地非小说类[链接的苹果文档](http://developer.apple.com/library/ios/#documentation/iphone/Reference/UILocalNotification_Class/Reference/Reference.html)

localNotification[链接的示例代码](http://www.icodeblog.com/2010/07/29/iphone-programming-tutorial-local-notifications/)

**我的代码**

```
-(IBAction)localNotificationBtnPress:(id)sender
{
    UILocalNotification *localNotification = [[UILocalNotification alloc] init];

    if (!localNotification) 
        return;

    // Current date
    NSDate *date = [NSDate date]; 

    // Add one minute to the current time
    NSDate *dateToFire = [date dateByAddingTimeInterval:5];

    NSLog(@"local noti fire date...>> %@",dateToFire);

    // Set the fire date/time
    [localNotification setFireDate:dateToFire];
    [localNotification setTimeZone:[NSTimeZone defaultTimeZone]];

    // Setup alert notification
    [localNotification setAlertAction:@"Open App"];
    [localNotification setAlertBody:@"Notification hiiiiiiiiiiiiii" ];
    localNotification.soundName=UILocalNotificationDefaultSoundName;
    [localNotification setHasAction:YES];      

    UIApplication *app=[UIApplication sharedApplication];

     [app scheduleLocalNotification:localNotification];
} 
```

# ruby-on-rails - 奇怪的闪光行为

> ID：12723919
> 
> 赞同：0
> 
> 时间：2012-10-04T09:08:49.220
> 
> 标签：ruby-on-rails, ruby-on-rails-3.2, rails-flash

在我的项目中，我有一个地方，闪存数据正在消失。我的控制器（无关代码已被删除）：

```
class PlacementController < InheritedResources::Base
  defaults resource_class: Reservation, collection_name: 'reservations', instance_name: 'reservation'
  before_filter :check_user_buildings

  def show
  end

  def update
    flash[:notice] = "1"
    redirect_to placement_path(type: "entry")
  end

  protected

  def check_user_buildings
    if current_user.building_ids.empty?
      redirect_to :back, alert: t("layout.placement.no_building")
    end
  end

end 
```

我的`show.htm.haml`看法：

```
= render :partial => 'layouts/flash', :locals => {:flash => flash}

= link_to t("layout.placement.populate"), "#", class: "btn btn-success placement-link pull-right"
= form_tag placement_path, method: :put, id: "placement_form" do
  = "ttt" 
```

放置路线：

```
resource :placement, :controller => 'Placement' 
```

和我的js：

```
$(function(){
  $('.placement-link').on('click', function(){ 
    $("#placement_form").submit(); 
  });
}) 
```

所以，当我点击展示位置链接时，它会重定向到我的视图，但没有闪光灯。很奇怪。我尝试了几种快速分配方式——结果相同。这种行为只出现在我项目的这个地方。

我正在使用 rails 3.2.8，inherited_resources 1.3.1，如果它可能有用的话。

UPD。添加后，问题出在Javascript

```
$(function(){
  $('.placement-link').on('click', function(){ 
    $("#placement_form").submit(); 
  });
}) 
```

一切正常！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-04T09:59:42.357

```
show.htm.haml view

link_to t("layout.placement.populate"), edit_placement_path(@placement), class: "btn btn-success placement-link pull-right 
```

在你的`show`行动中

```
def show
  @placement = Placement.find(params[:id])
end

def edit
  @placement = Placement.find(params[:id])
end

def update
  @placement = Placement.find(params[:id])
  respond_to do |format|
    if @user.update_attributes(params[:user])
      format.html { redirect_to placement_path(tyle: "entry"), notice: 'flash message' }
    else
      format.html { render action: "edit" }
    end 
  end
end 
```

# css - 如何更改 h:selectOneRadio 中的单选按钮样式

> ID：12723920
> 
> 赞同：1
> 
> 时间：2012-10-04T09:08:53.030
> 
> 标签：css, jsf, jsf-2

我有**h:selectOneRadio**如下：

```
<div id="container" class="container">
<h:selectOneRadio layout="pageDirection" id="sel_radio" value="#{mBean.selectedRadio}">  
   <f:selectItem id="option1" itemLabel="item1" itemValue="1" />  
   <f:selectItem id="option2" itemLabel="item2" itemValue="2" />            
</h:selectOneRadio>
.
.
.
</div> 
```

以上将呈现如下：

```
<div id="container" class="container">
<table>
  <tbody>
    <tr>
      <td>
        <input type="radio" name="myForm:sel_radio" id="myForm:sel_radio:0" value="1"> 
```

**问题：**容器类为所有输入提供默认宽度，这将影响我的单选按钮，这是 css 类：

```
.container input {
width: 200px;
} 
```

而且我无法更改此类，因为它是模板并用于其他页面，我只想在此页面中覆盖此样式。

我试图通过添加以下样式来覆盖它：

```
.container #myForm:sel_radio:0 {
  width: 50px !important;
} 
```

但它也不起作用。

请告知如何解决这个问题，谢谢。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-04T13:48:12.453

您最好指定元素类型，而不是元素 ID：

```
.container input[type=radio] {
    width: 50px !important;
} 
```

或者，给它一个样式类，例如`<h:selectOneRadio styleClass="myradio">`，使用这个 CSS：

```
.container .myradio input {
    width: 50px !important;
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-04T09:25:28.190

我希望这有帮助

```
<input type="radio" name="myForm:sel_radio" id="myForm:sel_radio:0" value="1"> 
```

你必须像这样放反斜杠

```
.container  #myForm\:sel_radio\:0{
width:100px!important;
} 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-10-04T09:35:10.483

使用`\3A`(反斜杠的十六进制代码) 转义冒号，因为冒号是 CSS 中的特殊字符，或者您可以定义新样式：

```
 #myForm .container input { 
   width: 50px;
 } 
```

直接用反斜杠转义冒号`\`在 IE6 中不起作用，我不确定是否也在 IE7 中。如果可能，还要避免使用**!important 。**如果你在一段时间后尝试改变你的风格并且你忘记了它，这可能会导致头痛。

# c# - 带有“动态”参数名称的 IN 语句的 Dapper AddDynamicParams

> ID：12723922
> 
> 赞同：34
> 
> 时间：2012-10-04T09:08:57.077
> 
> 标签：c#, c#-4.0, dapper

我有这样的简单 SQL 字符串：

```
"SELECT * FROM Office WHERE OfficeId IN @Ids" 
```

问题是 @Ids 名称是在编辑器中输入的，所以它可以是任何东西，我的问题是，如果我想传入一个整数数组，它只适用于 Dapper，如果我使用：

```
var values = new DynamicParameters();
values.AddDynamicParams(new { Ids = new[] { 100, 101 } }); 
```

但这需要我知道参数名称是`Ids`，而在我的场景中并非如此。

我可以在 Dapper 中使用这样的“动态”名称设置“动态参数”：

```
var values = new DynamicParameters();
values.Add("Ids", new[] { 100, 101 }); 
```

但是 Dapper 不会`IN (....)`为每个值构造带有单独参数的 SQL。

有没有办法构造传入的动态对象，`AddDynamicParams`但在事先不知道名称的情况下设置成员名称和值？

我可以修改 Dapper 源以适用于我的场景，但如果有人知道一个更简单和优雅的解决方案，我会很高兴！

* * *

## 回答 #1

> 赞同：33
> 
> 时间：2012-10-04T09:31:52.303

我刚刚向存储库提交了一个修复程序，它允许以下任何一项正常工作：

按对象（以前有效）：

```
values.AddDynamicParams(new { ids = list }); 
```

或者，单名：

```
values.Add("ids", list); 
```

或者，作为字典：

```
var args = new Dictionary<string, object>();
args.Add("ids", list);
values.AddDynamicParams(args); 
```

我还没有部署到 NuGet。让我知道这是否有问题。

# javascript - 修改 JSON 数组标签

> ID：12723923
> 
> 赞同：0
> 
> 时间：2012-10-04T09:09:02.570
> 
> 标签：javascript, json

有谁知道如何修改 JSON 数组中的标签？

可以说我的数组是：

```
[{"Device_ID":"43","Image":"Amazon-Kindle-Fire.png","Manufacturer":"Amazon","Model":"Kindle Fire","Type":"Tablet"},{"Device_ID":"43","Image":"Apple-iPad.png","Manufacturer":"Apple","Model":"iPad","Type":"Tablet"}] 
```

如何操作它，以便 Device_ID 成为标签，制造商和型号的组合成为值？

这是 jquery 自动完成所必需的，我无法在源代码中修改当前 JSON 数组

更新：

目前尝试这种方式没有成功：

```
$(function() {
    var availableTags = <?php echo json_encode($results); ?>;
    var john = availableTags.forEach(function(v){v.Device_ID = v.Manufacturer + v.Model});
    $("#search_input").autocomplete({
        source: john;
    }); 
}); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-04T09:13:59.560

试试看：

```
o = [{"Device_ID":"43","Image":"Amazon-Kindle-Fire.png","Manufacturer":"Amazon","Model":"Kindle Fire","Type":"Tablet"},{"Device_ID":"43","Image":"Apple iPad.png","Manufacturer":"Apple","Model":"iPad","Type":"Tablet"}]
o.forEach(function(v){v.Device_ID = v.Manufacturer + " " + v.Model}) 
```

它将循环遍历数组中的每个对象，并将 id 分配给您需要的组合。

# c# - 基类 - 是否应该实现所有方法

> ID：12723931
> 
> 赞同：1
> 
> 时间：2012-10-04T09:09:42.283
> 
> 标签：c#, inheritance

如果我从基类继承，是否有一条规则规定“仅在需要实现/使用所有（或 X%）基类功能/方法的地方继承”？我知道如果我继承了，那么我就继承了很多，但这并不意味着我必须全部使用它。

假设以下模式：

```
public abstract class Template
{   
    public void LoadCustomer()
    {
        //Load customer logic
    }
    public virtual void LoadGrid()
    {
        //Logic   
    }
    public virtual void other()
   { //logic }

    public virtual void other2()
   { //logic }

    public virtual void other3()
   { //logic }

    public string WelcomeMessage()
    {
         //perform lots of complex logic
         return "Hello and welcome";
    }
} 
```

如果我的应用程序的一部分只想显示 WelcomeMessage()，那么从上面的 Template 类继承会不会是错误的（我知道我只能继承一次，但这不是这个问题的因素）（另请注意，我已经故意不包括任何抽象方法/字段）。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-04T09:21:53.353

在我“看到曙光”之前，我在很多项目上都走上了这条路。

> 是否有一条规则规定“仅在需要实现/使用所有（或 X%）基类功能/方法的地方继承”？

是和不是。不，没有规则，但是有一种方法可以做你想做的事。这称为**优先组合而不是继承**，这意味着您需要将每个功能块分解为单个类，然后（在当前的子类中）创建该类的实例，然后**委派**所需的工作给它。使用这种技术，您可以轻松地修改当前的超类，而不会对当前的子类产生连锁反应。

最重要的是，当有疑问（或者只是*觉得*好笑）时，不要使用继承。这体现在[Liskov 替换原则](http://en.wikipedia.org/wiki/Liskov_substitution_principle)中，该原则指出任何子类都应该是其超类的完整且适当的替代品。（即没有`Boat`子类`Plane`只是因为它们都可以载人）。

如需更多有趣的阅读，请查看[SOLID](http://en.wikipedia.org/wiki/SOLID_%28object-oriented_design%29)软件工程范例。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-04T09:26:42.667

抽象类的问题在于其中包含哪些方法和属性。如果每个后代都覆盖其中的每个方法，那么这是一个很好的设计。尽管您可以轻松地使用界面。当您不仅要定义合同（方法签名），还要实现一些默认行为时，抽象类是一个更好的选择。

想想 ToString()，如果你不覆盖它，它会返回类名。

如果您发现自己向抽象类添加方法只是为了在一小部分后代中覆盖它们，那么这是错误的选择。

这又回到了我的实例是东西或有东西。

我的经验表明，抽象基类只有在它定义的合同由要求固定时才应该使用。如果它的作用与它的作用方式相比有很大的改变潜力，请不要靠近它。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-04T09:12:25.740

这里的问题不是继承本身，而是您的模板类看起来像一个糟糕 的[上帝对象。](http://en.wikipedia.org/wiki/God_object)

这就是从那个类继承感觉不对的原因。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-10-04T09:17:12.510

实际上，何时使用和不使用继承有一些好处。你应该先阅读这篇文章：

[http://msdn.microsoft.com/en-us/library/27db6csx(v=vs.80).aspx](http://msdn.microsoft.com/en-us/library/27db6csx(v=vs.80).aspx)

# html - 仅使用 CSS 删除输入元素的 value 属性

> ID：12723937
> 
> 赞同：6
> 
> 时间：2012-10-04T09:10:02.523
> 
> 标签：html, css

我有一个“提交”按钮，我试图用图像替换它

```
<input type="submit" value="Continue" /> 
```

我不能修改 HTML，也不能使用 JavaScript。我只能访问 CSS。

是否可以仅使用 CSS 删除“继续”（`value`属性）一词？

**编辑**

我实际上已经能够使用图像设置按钮的样式。我现在想删除“继续”按钮。我已经通过将`text-indent`值设置为负数来做到这一点，这是前段时间在这里提出的，但被删除了。我想知道是谁发布的，所以我可以接受它作为答案。

* * *

## 回答 #1

> 赞同：28
> 
> 时间：2012-10-04T09:22:36.053

**免责声明**：这是一个**糟糕**的答案——我希望你也知道，在你的内心深处。如果你嘲笑我的公平警告，来自 CeSSei 8 的外星人会绑架你，让你在 4 维中建模。赞成这个答案，风险自负。我在现在看来是另一种生活中写下了它，每次阅读它都会深入我的灵魂深处。我为网络哭泣。**你被警告了。**

我无法想象为什么有人需要*仅使用 CSS*来删除控件的值。我当然从来不需要考虑这样做。

`font-size: 0`无论如何，使元素无法使用`em`和 单位的替代方法是使用`ex`透明的“画笔”渲染文本，实际上根本不渲染它：

```
color: transparent; 
```

请注意，应用于输入元素的上述规则对元素中占位符文本的颜色*没有影响*。

与大多数此类“黑客”一样，此解决方案存在许多问题-您可能希望至少`user-select: none`与上述规则一起添加以禁用用户对文本的选择，因为选择它会将其暴露在纯色背景色中的选择，这可能是可取的，也可能不是可取的。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-10-04T09:14:00.577

```
input[type="submit"] {
  font-size:0;
  width:120px;
  height:30px;
  background: url('dir/image.png') no-repeat left top;
  border: none;
} 
```

这会成功的。请记住，您的图像路径是相对于样式表的。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-10-04T09:12:30.813

使用`font-size: 0`：

```
input[type="submit"] {
    font-size:0;
    width:100px;
    height:20px;
    background:red; /** or `background: url('some.jpg') no-repeat 0 0;` */
    border:0;
    cursor:pointer;
} 
```

**[演示](http://tinkerbin.com/c9DbsO4u)**

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-10-04T09:23:32.653

添加到[SpaceBeer](https://stackoverflow.com/users/936643/spacebeers)的答案中，如果有的话，最好使用否定`text-indent`并删除文本。

```
input[type="submit"] {
  font-size:0;
  width:120px;
  height:30px;
  background: url('dir/image.png') no-repeat left top;
  border: none;
  overflow: hidden;
  text-indent: -99em;
} 
```

### 这是正确的方法，几乎​​所有的地方都建议。此外，您可以在此处找到演示：http: [//jsfiddle.net/6MKKh/](http://jsfiddle.net/6MKKh/)

# jquery - 更改搜索框的外观

> ID：12723938
> 
> 赞同：0
> 
> 时间：2012-10-04T09:10:06.670
> 
> 标签：jquery, jqgrid

我正在使用 jquery 和 jqgrid 插件，我已经在 jqgrid 和 rite 中启用了搜索功能，现在我可以看到以下搜索框，如下所示

![图。1](../Images/5a12bd301575520566880c7ae76af81a.png)

我想用一些自定义文本框和复选框使它看起来如下所示。我想`begins with`默认为名称字段。

但我不知道如何更改外观并将一些自定义字段放入搜索框中？

![在此处输入图像描述](../Images/8ab169e48d23098cf914b4a0e320358e.png)

# javascript - IOS滚动站点修复

> ID：12723939
> 
> 赞同：2
> 
> 时间：2012-10-04T09:10:07.010
> 
> 标签：javascript, jquery, ios, css, html

我想为 IOS 制作一个视差可滚动网站，有没有人知道如何“冻结”屏幕以允许设备识别/响应 div 中的滚动？

基本上需要这样的东西 - [http://jsfiddle.net/9R4hZ/40/](http://jsfiddle.net/9R4hZ/40/)在 Ipad 上工作，而滚动时视口不会在整个商店中移动..

干杯保罗

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-04T15:21:19.080

您可以在视口 div 上侦听 touchmove 事件，阻止标准滚动行为，并欺骗按键或滚轮事件（例如，通过使用 jQuery 的 .trigger 方法）。这将允许您在添加触摸事件时保留当前的滚动功能。

要了解“滚动”发生的方向，您可以从以下内容开始：

```
var lastTouch;
var scrollDirection;
var viewPort = document.getElementById("view");

viewPort.addEventListener('touchmove', function(event) {

    event.preventDefault();

    if (lastTouch < event.targetTouches[0].pageY) {
        console.log("dragging down");
        scrollDirection = "up";
        //trigger up arrow keypress?

    }
    else if (lastTouch > event.targetTouches[0].pageY) {
        console.log("dragging up");
        scrollDirection = "down";
        //trigger down arrow keypress?          
    }

    lastTouch = event.targetTouches[0].pageY;
}); 
```

您可能需要对触发滚动事件触发器的频率进行一些调整，因为 touchmove 事件可能来得太快。

# php - 确保 json get 来自特定域，php（跨域）

> ID：12723944
> 
> 赞同：1
> 
> 时间：2012-10-04T09:10:38.037
> 
> 标签：php, jquery, json

我使用 getJSON 将数据从一个域发送到另一个域。

示例如下： 域 A (www.a.com) 使用 jQuery getJSON() 将数据发送到域 B (www.b.com) 域 B 包含用于解析数据的所有 php 脚本。

出于安全原因，我想确保数据发送者是域 A 而不是其他域。我阅读了很多帖子并进行了搜索，发现 $_SERVER['HTTP_REFERER'] 用于 php。但是，我注意到很多人说这不是最好的方法，并且一些浏览器不支持它。

然后我遇到了另一个使用 cookie 和访问令牌的说法，这让我更加困惑。好吧，我希望有人能够指出我正确的方向。

这是我用来将数据发送到 dmoain B 的 jquery 脚本

```
$.getJSON('b.com/parse.php?data=' + data +'&callback=?', function(data) {
//do something
}); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-05T11:08:19.180

> 我想确保数据发送者是域 A 而不是其他人

无法可靠地检测请求是否由运行在特定域上托管的页面中的 JavaScript 触发。

> 使用 cookie 和访问令牌让我更加困惑

这是一种间接的方法。本质上，该过程将像这样工作：

1.  两台服务器中的一台生成访问令牌（以及到期时间）
2.  它将该令牌发送到另一台服务器
3.  托管应用程序的服务器将该令牌发送给客户端
4.  客户端向托管数据的服务器发出请求，并将该令牌包含在 URI 中
5.  托管数据的服务器识别令牌并授权客户端（可能设置 cookie 以便令牌自动保留）

令牌仍然可以从应用程序中提取，因为它必须提供给客户端。但是，这必须由对客户端具有完全访问权限的人来完成，因此无法由想要访问您的数据的第三方网站来完成。

这样的网站可以访问托管应用程序的站点，获取标识令牌，然后访问托管数据的站点。有办法防御这种情况……</p>

如果服务器正在向数据站点发出请求，那么它可能会从给定的 IP 地址发出异常大量的请求。您可以对其进行速率限制。（然后他们可以通过循环访问不同的源 ip 来解决这个问题）。

如果请求是由 Web 浏览器发出的，那么令牌请求将来自与数据请求不同的 IP 地址。您可以将令牌授权锁定到给定的 IP 地址。但是，对于通过代理服务器访问的用户（例如，相当多的移动用户和使用 AOL 的人（上次我听说任何关于 AOL 的服务器是如何配置的）），这将中断。

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-10-05T10:58:55.133

$_SERVER['HTTP_REFERER'] 更好，因为它的服务器端。

# c# - 显示英语语言环境中的所有异常

> ID：12723945
> 
> 赞同：4
> 
> 时间：2012-10-04T09:10:41.297
> 
> 标签：c#, locale

我在 main 中使用了 try ... catch 块。

当我设置以下

```
Thread.CurrentThread.CurrentCulture = CultureInfo.CreateSpecificCulture("en-US");
            Thread.CurrentThread.CurrentUICulture = new CultureInfo("en-US"); 
```

这会处理所有异常并用英文打印它们

但这对于内部的许多 API 来说都失败了，尤其是对于像目录访问那样捕获的异常。还有什么需要做的吗？

所以主要问题是这个 Execption

```
System.Net.Sockets.SocketException (0x80004005): 
```

之后的消息未出现在语言环境集中

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-08T06:36:43.410

我可以通过使用 Win32 FormatMessage 代码块来做到这一点

```
[DllImport("Kernel32.dll", SetLastError=true)]
static extern uint FormatMessage( uint dwFlags, IntPtr lpSource, 
   uint dwMessageId, uint dwLanguageId, ref IntPtr lpBuffer, 
   uint nSize, string[] Arguments); 
```

并通过将 langid 设置为英语！

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-04T09:20:46.630

这个问题可以部分解决。框架异常代码根据当前线程语言环境从其资源中加载错误消息。在某些例外情况下，这发生在访问 Message 属性时。

对于这些例外情况，您可以通过在记录消息时将线程区域设置短暂切换为 en-US 来获取消息的完整美国英语版本（事先保存原始用户区域设置并在之后立即恢复）。

在单独的线程上执行此操作会更好：这可以确保不会有任何副作用。

参考：[英文的异常信息？](https://stackoverflow.com/questions/209133/c-sharp-exception-messages-in-english)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-04T09:27:38.470

不要为用户选择文化。让他自己做。
在极少数情况下，您必须使用预定义的文化，但在大多数情况下，这是用户的业务 - 使用什么文化。

# html - 在 JBoss 上转换视频？

> ID：12723947
> 
> 赞同：0
> 
> 时间：2012-10-04T09:10:58.057
> 
> 标签：html, video

我应该用 HTML5 实现 MP4-Video-Stream。用户可以上传视频，其他人可以观看。

它必须在 IE9、Chrome 和 Firefox 中运行。但显然你必须为每个编解码器使用不同的编解码器。

现在我像这样解决它： `<video controls poster="preview.png" > <source src="film.mp4" /> <source src="film.webm" /> <source src="film.ogv" /> </video>`

但是由于用户不应该将其转换为不同的编解码器并上传三个不同的视频，所以我不太喜欢它。我们正在使用 JavaEE，所以我想可能有一些方法可以在服务器端转换视频？但我对任何一种选择持开放态度。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-04T09:24:36.807

对于 HTML5，除了在不同的浏览器上使用不同的编解码器外，别无选择。如果您希望使用 ffmpeg，可以在服务器上完成转换。如果您想坚持 HTML5 播放，我认为您没有其他选择。这是 Flash 在 HTML5 上得分的地方，因为单个文件可以为所有带有 Flash 播放器的浏览器提供服务。

以下类型的命令可以为您进行转换。

```
ffmpeg -i <input> -acodec <audio codec> -b:a <audiobitrate> -vcodec <video codec> -b:v <videobitrate> <output_file> 
```

直接二进制文件可用于许多操作系统的 ffmpeg。

# jsf - Primefaces 数据表多选模式 - 延迟加载获取

> ID：12723957
> 
> 赞同：4
> 
> 时间：2012-10-04T09:11:34.680
> 
> 标签：jsf, primefaces

在数据表上，我启用了多项选择复选框。并且有提交按钮，在 actionlistener 上，我将重复记录作为选定项目。

例如，在第一页上是 5 条记录，记录总数为 10，然后第一页记录被复制两次并产生 10 条记录，应限制为 5 条记录。

以下是代码片段：

```
<p:dataTable id="sampleDataTable" var="_task" value="#{myBean.lazyModelTasks}"
             styleClass="dataTable" paginator="true" paginatorTemplate="{PageLinks}"
             paginatorPosition="bottom" rows="5" widgetVar="dataTab"             
             paginatorAlwaysVisible="true" rowIndexVar="rowIndex" 
             lazy="true"  selection="#{myBean.selectedItems}" 
             emptyMessage="No Search Results found !">  

    <p:column selectionMode="multiple" style="width:15px;">  
        <f:facet name="header"> 
        <h:outputText value="Sno" /> 
        </f:facet>
    </p:column>
 </p:dataTable> 

 <p:commandButton id="submit" value="Select" update="#{rerenderid}"
  actionListener="#{myBean.addSelectedItems}" oncomplete="#{onlinkclick}">
  <f:attribute name="selectedItems" value="#{myBean.selectedItems}"/>
 </p:commandButton> 
```

**托管 Bean 代码：**

```
 public void addExternalRecipients(ActionEvent event) { 
      //THIS GIVES ME 10 RECORDS, THOUGH THERE ARE ONLY 5 RECORDS AT THAT INSTANCE
      this.selectedItems = (Address[])   
                         event.getComponent().getAttributes().get("selectedItems"); 
   } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-04T17:48:13.433

也许不是解决方案，但您不需要使用事件来获取所选项目，我假设您在托管 bean 中有这个：

```
private Address[] selectedItems; 
```

您还应该将 selectionMode="multiple" 放在数据表上，而不是像您正在做的那样放在列上，如下所示：

```
<p:dataTable id="sampleDataTable" var="_task" value="#{myBean.lazyModelTasks}"
             styleClass="dataTable" paginator="true"
             paginatorTemplate="{PageLinks}"
             paginatorPosition="bottom" rows="5" widgetVar="dataTab"             
             paginatorAlwaysVisible="true" rowIndexVar="rowIndex" 
             lazy="true"  selection="#{myBean.selectedItems}" 
             selectionMode="multiple" <!--to make multiple rows selected -->
             emptyMessage="No Search Results found !"> 
```

然后，无需添加操作事件，所选实体将自动设置在您的托管 bean 上。当您进行提交（或 ajax 调用）时，您应该获得正确数量的选定实体。

# jstl - 在 JSTL 中更改为三进制

> ID：12723961
> 
> 赞同：3
> 
> 时间：2012-10-04T09:11:52.403
> 
> 标签：jstl, ternary

你能帮我把这个 JSTL 标记转换为 JSTL 三元吗

```
<body
  <c:choose>
    <c:when test="${wcmMode.author}">class="author"</c:when>
    <c:otherwise>class="${page.class}"</c:otherwise>
  </c:choose>
> 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-04T09:14:26.027

这很简单：

```
<body class="${ wcmMode.author ? 'author' : page.class }"> 
```

# iphone - iPhone 6.0 模拟器：应用程序窗口在应用程序启动结束时应该有一个根视图控制器

> ID：12723966
> 
> 赞同：3
> 
> 时间：2012-10-04T09:12:10.863
> 
> 标签：iphone, ios-simulator

当我在 iPhone 6.0 模拟器中运行我的应用程序时，它显示

应用程序窗口应该在应用程序启动结束时有一个根视图控制器

在其他模拟器中它不存在。为什么？这个错误是什么意思？

我的应用程序的导航流程是这样的：首先我的应用程序应该显示登录屏幕。进入应用程序后，我需要显示一个带有标签栏的视图。在那个视图中会有很多按钮，当我们单击这些按钮时，它应该显示没有标签栏的相应视图控制器。这就是我将那些导航控制器添加到窗口的原因。

这是我的 didFinishLaunchingWithOptions 代码

```
- (BOOL)application:(UIApplication *)application didFinishLaunchingWithOptions:(NSDictionary *)launchOptions
{
    self.tabBarController = [[UITabBarController alloc] init];
    self.window.rootViewController = self.tabBarController;

    self.window = [[UIWindow alloc] initWithFrame:[[UIScreen mainScreen] bounds]];
    self.window.backgroundColor=[UIColor blackColor];

    [application setStatusBarStyle:UIStatusBarStyleBlackOpaque];

    Object1 = [[Class1 alloc] initWithNibName:@"Class1" bundle:nil];
    tempNav=[[UINavigationController alloc]initWithRootViewController:Object1];
    tempNav.navigationBar.hidden=YES;
    tempNav.view.frame  = CGRectMake(0.0f, 20.0f, 320.0f, 460.0f);
    self.window addSubview:tempNav.view]; 

    LoginObj = [[Login alloc] initWithNibName:@"Login" bundle:nil];
    navController=[[UINavigationController alloc]initWithRootViewController:LoginObj];
    navController.navigationBar.hidden=YES;
    navController.view.frame  = CGRectMake(0.0f, 20.0f, 320.0f, 460.0f);
    [self.window addSubview:navController.view];

    Obj2 = [[Class2 alloc] initWithNibName:@"Class2" bundle:nil];
    navController1=[[UINavigationController alloc]initWithRootViewController:Obj2];
    navController1.navigationBar.hidden=YES;
    navController1.view.frame  = CGRectMake(0.0f, 20.0f, 320.0f, 460.0f);
    [self.window addSubview:navController1.view];

    Obj3 = [[Class3 alloc] initWithNibName:@"Class3" bundle:nil];
    navController2=[[UINavigationController alloc]initWithRootViewController:Obj3];
    navController2.navigationBar.hidden=YES;
    navController2.view.frame  = CGRectMake(0.0f, 20.0f, 320.0f, 460.0f);
    [self.window addSubview:navController2.view];

    Obj4 = [[Class4 alloc] initWithNibName:@"Class4" bundle:nil];
    navController3=[[UINavigationController alloc]initWithRootViewController:Obj4];
    navController3.navigationBar.hidden=YES;
    navController3.view.frame  = CGRectMake(0.0f, 20.0f, 320.0f, 460.0f);
    [self.window addSubview:navController3.view];

    [self.window makeKeyAndVisible];

    return YES;  
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-04T09:40:39.563

正如 wattson12 所说，您需要在您的应用程序委托中执行以下操作：

```
- (BOOL)application:(UIApplication *)application didFinishLaunchingWithOptions:(NSDictionary *)launchOptions
{
    self.window = [[UIWindow alloc] initWithFrame:[[UIScreen mainScreen] bounds]];
    // Override point for customization after application launch.
    self.mainViewController = [[MainViewController alloc] initWithNibName:@"MainViewController" bundle:nil];
    self.window.rootViewController = self.mainViewController;    // you need this line!
    [self.window makeKeyAndVisible];
    return YES;
} 
```

如果您没有明确设置`UIWindow` [rootViewController 属性](http://developer.apple.com/library/ios/documentation/uikit/reference/UIWindow_Class/UIWindowClassReference/UIWindowClassReference.html#//apple_ref/occ/instp/UIWindow/rootViewController)，您将看到此消息。

如果您使用 Xcode 4.5 创建一个新项目，它应该在模板应用程序委托中包含此代码。如果您使用的是在早期版本的 Xcode 中创建的项目，则该行可能会丢失，并且您会收到警告消息。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-04T09:38:08.927

这意味着你没有设置你的 app `rootViewController`。首先从您的代码中删除这些行 -

```
[self.window addSubview:tempNav.view];  
[self.window addSubview:navController.view];  
[self.window addSubview:navController1.view];  
[self.window addSubview:navController2.view];  
[self.window addSubview:navController3.view]; 
```

在你的代码中你正在使用`UITabBarController`但没有初始化它`viewController`的数组，所以这样做 -

```
self.tabBarController.viewControllers = [NSArray arrayWithObjects:tempNav, navController, navController1, navController2, navController3, nil];
self.window.rootViewController = self.tabBarController;
[self.window makeKeyAndVisible]; 
```

# eclipse - eclipse的Jtest（cli）没有找到任何文件，“要检查的源文件：0”

> ID：12723967
> 
> 赞同：0
> 
> 时间：2012-10-04T09:12:12.340
> 
> 标签：eclipse, parasoft

当我在 Eclipse 中使用 Jtest 运行测试时，会检查源代码文件并给出结果。

但是当我运行这个命令行时：

`jtestcli.exe -config "team://<our_team_conf>" -showdetails -localsettings "C:\<path_to_localsettings_file>\localsettings.properties" -data "C:\<path_to_workspace>\workspace\<project_name>" -report "C:\<path_to_report>\report" -publish`

1.  为什么要检查零源代码文件？
2.  如何`jtestcli`找到它的源文件？

.

```
****Total Files: 0
Source Files to Check: 0
Total Source Lines: --
Source Lines to Check: --
Test Data Files: ---
Excluded Files: 0****

**
**Files Checked (Coding Standards): 0/0
Files Skipped (Coding Standards): 0
Files Checked (BugDetective): 0/0
Files Skipped (BugDetective): 0
Projects - Metrics Estimated: 0/0 - 0/0
Failed Runs: 0
Violations Found: 0
Violations Suppressed: 0
Number of Rules Violated: 0**

****Executed Test Cases: 0
Passed:  --     Failed: --     Skipped: --
Runtime Exceptions: 0
Assertion Failures: 0
Contract Violations: 0
Runtime Error Detection Violations: 0
Unverified Outcomes: 0
Coverage:
   Line: --
   Decision: --
Runtime Error Detection:
   Classes Loaded: --  Analyzed: --  Instrumented: --
   Number of Rules Violated: 0
   Violations Suppressed: 0**
**

result:
-Empty PDF reports
-No result uploaded to concerto 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-29T10:00:11.643

使用 -data 选项可以指定工作空间的路径，因此为了在 C:\<path_to_workspace>\workspace 中测试项目 <project_name>，您应该使用：

```
 -data "C:\<path_to_workspace>\workspace" -resource "<project_name>" 
```

而不是：

```
 -data "C:\<path_to_workspace>\workspace\<project_name>" 
```

# c++ - 如何正确处理构造函数中的异常？

> ID：12723970
> 
> 赞同：7
> 
> 时间：2012-10-04T09:12:20.137
> 
> 标签：c++, exception-handling, constructor

> **可能重复：**
> [如果 C++ 中的构造函数抛出异常，如何清理初始化的资源](https://stackoverflow.com/questions/12723492/how-to-clean-initialized-resources-if-exception-thrown-from-constructor-in-c)

如果我正在创建 6 个对象并且这些对象创建 5 个对象并且在创建第 6 个对象时失败，我该如何处理构造函数中的异常？

谢谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-04T09:43:31.607

通常的行为只是让异常传播。将调用任何完全构造的基类和成员的析构函数；如果前五个对象是成员，它们将被正确销毁。

唯一可能出现问题的情况是您所讨论的对象是动态分配的（使用`new`）。如果是这样：首先要问自己的是为什么？为什么要动态分配，而不是使对象成为具体成员？以我的经验，这种需求非常非常少，除了少数特殊情况（例如编译防火墙习语），在这种情况下，类中通常只有一个对象（例如，指向实现对象的指针） . 在这种情况下，没有问题，因为如果该`new`对象的失败，则没有其他需要撤消的操作。

*如果*您发现自己处于非常罕见的情况下，您确实必须使用动态分配*并且*拥有多个这样的对象（例如，因为您有两个多态的子对象），那么您必须确保每个分配都是包裹在某种子对象中（智能指针可以解决问题）；一旦第一个子对象被成功构造，如果构造函数在稍后的某个时间点失败，它的析构函数将被调用。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-04T09:40:30.820

当构造函数中抛出异常时，所有完全构造的子对象都将被销毁。由于使用构造对象的析构函数来管理它们的资源是一种很好的做法，因此无需对这些子对象进行任何操作。剩下的就是在抛出异常时清理当前正在执行的构造函数的主体。但是，这与任何其他功能中的清理没有什么不同。

请注意，销毁顺序与构造相反。也就是说，当所有子对象还没有被销毁时，身体中的清理首先开始。然后成员被销毁，然后是非虚拟基类，最后是虚拟基类。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-04T10:57:59.037

处理异常的“核心”是几乎所有东西都应该通过析构函数来清理。例如，如果你“新建”一个对象，你会得到一个“原始”指针；如果在某处引发异常，您必须确保该原始指针已正确“删除”——但请确保您没有删除尚未初始化的原始指针。

另一方面，如果将该指针存储到 std::unique_ptr 中，则无需执行任何操作；当 unique_ptr 被销毁时，对象被删除，并且对象销毁自动发生：当 unique_ptr 超出范围时，编译器调用清理，完全不可见（因此不再因大量清理调用而导致代码混乱）并自动（所以不再有“哎哟，当它走上一条没有人真正测试过的罕见路径时，它会忘记清理”）。

这同样适用于几乎所有资源。COM 对象有“自动指针”（例如，在 DirectX 中使用），大多数框架应该给你一个“范围锁”类型的对象来包裹互斥锁（所以它在创建对象时锁定互斥锁，并且当它被破坏时将其解锁），并且您可以编写微小的包装器来处理各种 Windows 句柄。

基本上，如果您将所有清理工作都放入析构函数中，您将永远不必为了清理工作而“尝试...捕获...重新抛出”。“更大”对象的析构函数通常非常简单，因为实际上所有“包含”对象都由它们的析构函数自动清理。

# sql-server-2008 - 如何从具有附加条件的多个表中选择？

> ID：12723985
> 
> 赞同：0
> 
> 时间：2012-10-04T09:13:16.223
> 
> 标签：sql-server-2008, select, stored-procedures

我的 SQL Server 数据库中有表“Table_Codes”

```
Code | Description | Owner | Location
A202   SomeDescr1    Owner1       M-3
B301   SomeDescr2    Owner2       M-3
C898   SomeDescr3    Owner3       M-2
B744   SomeDescr4    Owner4       M-3
V123   SomeDescr5    Owner5       M-3         - code is not define in second table 
```

我也有表“Table_Stock”

```
Code | Qty |     DC
A202    10       M-3
B301    12       M-2      !-not the same location like in 1st table for this code
C898    90       M-2
B744   120       M-3 
```

我无法构建正确的查询来从此表中选择下一个结果：

```
 Code |    Qty(Location=DC) |  Qty on alternate DC (Location from 1st table <> DC)
    A202             10                       0
    B301              0                      12
    C898             90                       0
    B744            120                       0
    V123   Not in stock            Not in stock 
```

我可以通过使用辅助表来做到这一点。但我想知道如何使用单个 SELECT 查询来做到这一点？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-04T09:19:38.293

像这样的东西（[SQL Fiddle](http://sqlfiddle.com/#!3/0853e/4)）？

```
SELECT c.Code,
    CASE WHEN s.Code IS NULL THEN 'Not in stock' 
        ELSE CAST(SUM(CASE WHEN s.DC = c.Location THEN s.Qty ELSE 0 END) AS VARCHAR(20)) END,
    CASE WHEN s.Code IS NULL THEN 'Not in stock' 
        ELSE CAST(SUM(CASE WHEN s.DC <> c.Location THEN s.Qty ELSE 0 END) AS VARCHAR(20)) END
FROM Table_Codes c
LEFT OUTER JOIN Table_Stock s ON c.Code = s.Code
GROUP BY c.Code, s.Code 
```

请注意，在一个查询中执行此操作的唯一方法是将第二列和第三列转换为字符类型。根据您要在查询的另一端执行的操作，您可能需要考虑返回 NULL 而不是“没有库存”。

# ruby-on-rails - 如何显示特定人员的报告？

> ID：12723988
> 
> 赞同：0
> 
> 时间：2012-10-04T09:13:29.630
> 
> 标签：ruby-on-rails, activeadmin

我有 2 个模型 Report 和 Person 以及 report belongs_to person 和 report has_many 报告。我想在人民网格“查看报告”中创建一个链接以显示该特定人员的报告

{link_to "报告", admin_reports_path(:person_id => person.id, :date => Date.today)}

但是，当单击此链接时，它会显示所有人的所有报告，而不仅仅是今天的报告。我究竟做错了什么？谢谢！

报告控制器：

def create_daily

```
person_id = @person.id
reports = params[:reports] || []
date = Date.today

  reports.each do |index, attributes|
  project = Project.find_by_short_name(attributes[:short_name])
  project_id = project.id if project
  date = Date.parse(attributes[:date])

  report = Report.where(:person_id => person_id, :project_id => project_id, :date => date).first_or_initialize
  report.person_id     = person_id
  report.project_id    = project_id
  report.date          = date unless report.date  # Do not overwrite if already existing
  report.day_off       = attributes[:day_off] == 'true'
  report.body          = attributes[:body].to_s.strip
  report.time_estimate = attributes[:time_estimate].to_s.strip
  report.save
end

respond_to do |format|
  format.html { redirect_to reports_url }
  format.json { render :json => { :reports => Report.by_reporter(current_user).for_date(date) } }
end 
```

结尾

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-04T10:14:03.770

如果您只想显示一个人的报告。只需在控制器中执行此操作

```
 @person = Person.find(params[:person_id)
 @reports= @person.reports.where(:date => Date.today) 
```

# qt - 如何扩展 Qt 打印对话框

> ID：12723993
> 
> 赞同：0
> 
> 时间：2012-10-04T09:13:42.487
> 
> 标签：qt, printing, dialog, extending

是否可以使用其他 UI 元素扩展 Qt 打印对话框 (QPrintDialog)，因为它可以通过 PD_ENABLEPRINTTEMPLATE 宏在 MFC 中完成？请参阅[此链接](http://www.codeproject.com/Articles/2585/An-easy-way-to-customise-the-default-Print-dialog)。

我在 Qt 文档中没有找到任何关于此的内容。

似乎 Qt 在 Windows 上显示了本机打印对话框，这可能使它变得更加困难？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-04T10:06:46.970

这在平台中立的方式中是不可能的。对于`QFileDialog`，您可以对其进行子类化（在这种情况下，Qt 会自动在所有平台上使用非本地对话框）并将 UI 元素添加到布局中。在 X11 上，这也适用于`QPrintDialog`，但在 WIN32 上，有一个完全独立的源代码 (src/gui/dialogs/qprintdialog_win.cpp)，它调用`PrintDlgEx`Windows API 函数。不存在可以在 Windows/MacOS 上使用的 QPrintDialog 的平台无关实现。

我会考虑以这样一种方式设计 UI，即应用程序的“打印”操作显示一个包含所有应用程序特定设置的对话框，可能包括预览，其中包含一个按钮，用于打开 QPrintDialog 以选择打印机并设置任何打印机特定属性。

# wpf - xbap 应用程序中的浏览器检测

> ID：12723998
> 
> 赞同：0
> 
> 时间：2012-10-04T09:13:57.867
> 
> 标签：wpf, xbap

是否可以检查 xbap 应用程序是否在 32 位或 64 位版本的 IE9 上运行？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-04T20:24:06.000

查询`System.Environment.Is64BitProcess`属性