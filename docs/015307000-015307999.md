# StackOverflow 问答 15307000-15307999

# c++ - 管道“地址系统”

> ID：15307003
> 
> 赞同：0
> 
> 时间：2013-03-09T04:02:34.967
> 
> 标签：c++, ajax, pipe, websocket++, fastcgi++

也许我误解[了如何在 c++ 中制作管道，](https://stackoverflow.com/questions/5840109/how-to-make-a-pipe-in-c)因此[http://linux.die.net/man/2/pipe](http://linux.die.net/man/2/pipe)，但是如何`pipe`知道从哪里发送或接收？

在通过 ajax 页面更新数据库时，我希望该 ajax 程序向我的 websocket 程序发送一条消息以更新所有其他相关用户，并且建议`pipe`最好[使用 2 个 c++ 程序如何调用彼此的类/在同一个 linux 机器上的功能？](https://stackoverflow.com/questions/15303919/how-2-c-programs-call-each-others-class-functions-on-same-linux-box).

是否只有一个管道，所有程序都读取它并验证消息？

* * *

注意：如果有帮助，我正在使用 fastcgi++ 和 websocket++。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-09T04:12:22.090

如果希望多个独立进程从管道中读取数据，则需要使用*命名管道*，也称为[FIFO](http://linux.die.net/man/7/fifo)。

使用该[`mkfifo`](http://linux.die.net/man/3/mkfifo)函数，一个进程在文件系统（通常在`/tmp`）中创建一个文件。然后可以[`open`](http://linux.die.net/man/2/open)通过任何其他有权访问该文件的进程使用正常的系统调用打开该文件以进行读取或写入。

# gradient - LiveCode 是否通过相对于对象或卡片坐标的属性来渐变？

> ID：15307005
> 
> 赞同：0
> 
> 时间：2013-03-09T04:03:01.243
> 
> 标签：gradient, livecode

我正在将堆栈文件导出到 JSON 以在 VCS 系统中使用，并且我发现导出/导入渐变的一些奇怪结果。字典中关于属性的内容如下：

> fillGradient["from"] - 指定渐变起点的坐标
> 
> fillGradient["to"] - 指定渐变终点的坐标
> 
> fillGradient["via"] - 指定渐变中间点的坐标（影响渐变的缩放和剪切）

如您所见，未指定坐标系。从一些测试来看，坐标似乎是相对于卡片的，但这对我来说没有意义，因为每一步都会改变值。是否有人对这些属性有任何进一步的文档和/或属性不遵循标记点约定的原因，该约定相对于显然可以这样做的对象点。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-09T08:40:30.813

点位置与您找到的卡片相关。您可能希望查看此堆栈以供参考：[http ://www.tactilemedia.com/site_files/downloads/gradient_explorer.rev](http://www.tactilemedia.com/site_files/downloads/gradient_explorer.rev)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-09T07:54:52.903

实际上，这些渐变属性是相对于卡片的左上角的。这就是我能够将 Adob​​e Ilustrator 版本 7 中的渐变导入 LiveCode 的方式。

您可以检查此堆栈中的代码：

[http://andregarzia.on-rev.com/alejandro/stacks/Eps_Import_V05C.zip](http://andregarzia.on-rev.com/alejandro/stacks/Eps_Import_V05C.zip)

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-03-19T13:31:12.383

前段时间，当我也对奇怪的坐标系感到恼火时，我在我的图形中添加了以下行为：

```
setProp relFillGradient[pKind] pPoint
   put round(item 1 of pPoint*the width of me + item 1 of the topLeft of me) into tX
   put round(item 2 of pPoint*the height of me + item 2 of the topLeft of me) into tY
   set the fillGradient[pKind] of me to tX,tY
end relFillGradient

getProp relFillGradient[pKind]
   put the fillGradient[pKind] of me into tPoint
   put (item 1 of tPoint - item 1 of the topleft of me)/the width of me into tRelX
   put (item 2 of tPoint - item 2 of the topleft of me)/the height of me into tRelY
   return (tRelX,tRelY)
end relFillGradient 
```

然后设置 fillGradient 你可以这样做：

```
set the relFillGradient["from"] of graphic "myGraphic" to 0.1,0.3 
```

其中相对点为左上角的 0,0 和右下角的 1,1。

**注意**：由于您需要将值设置为四舍五入的值，您可能无法从 getProp 获得完全相同的值。

如果您不想要百分比值（就像我所做的那样），它会变得更加简单，因为您可以删除乘法，并且您可以获得不必四舍五入的好处。

# html - 左侧固定的 3 列布局的问题

> ID：15307009
> 
> 赞同：0
> 
> 时间：2013-03-09T04:03:42.807
> 
> 标签：html, css, css-float

我在制作 3 列布局时遇到问题。我现在已经在网上尝试了所有的例子——使用谷歌。这些似乎都不能解决我的问题。

我尝试做的事情对有知识的人来说很容易。

1.  制作覆盖整个屏幕的 3 列流体布局。
2.  左列应为 230px 宽度，固定，高度 100%。
3.  中心列和右列应等宽。
4.  对于中心和右列，它们必须“浮动”到彼此

缩小时会出现问题。中柱向左跑，在中柱和右柱之间形成一个巨大的白色间隙。

那是我的问题。

中心和右列需要彼此靠近 - 没有间隙。

我该如何解决这个问题？

你可以在这里看到我的尝试：**[`Fiddle`](http://www.jsfiddle.net/AgKse/)**

只需缩小，您就可以立即看到问题。需要帮助来解决这个问题。如何？

如果我在中心列内使用宽度设置为 100% 的 div 包装器，则会出现另一个问题。将发生与上述相同的问题。左右列中的文本也需要浮动。

我不能使用`overflow:hidden`，因为我需要 - 稍后 - 使用中心列右侧的绝对 div 来设置指向右列的图像箭头。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-09T04:14:45.773

你的意思更像是这样的：http: [//jsfiddle.net/gbRzM/](http://jsfiddle.net/gbRzM/)？（使用 left、right 和 width 属性来定位所有内容）

```
.left {
    width: 230px;
position:fixed;
    background:GREEN;
}

.right {
    right:0;
    width:30%;
    position:fixed;
    background: RED;
}

.center {
    left:230px;
    right:30%;
    position:fixed;
    border:1px solid;
    background:YELLOW;
} 
```

或者更准确地说：http: [//jsfiddle.net/HKJvP/](http://jsfiddle.net/HKJvP/)？（将 center 和 right 放在一个新的 div 中，以便像素和 % 可以混合，允许您指定的相同宽度）

```
.left {
    width: 230px;
    position:fixed;
    background:GREEN;
}

.notleft{
    left:230px;
    height:100%;
    right:0;
    position:fixed;
}

.right {
    right:0;
    width:50%;
    position:absolute;
    background: RED;
}

.center {
    left:0;
    width:50%;
    position:absolute;
    border:1px solid;
    background:YELLOW;
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-09T19:29:01.330

给三列的父元素一个固定的宽度并添加类 clearfix

``

```
.clearfix:after {     
    content: ".";    
    display: block;    
    clear: both;  
    visibility: hidden;  
    line-height: 0;   
    height: 0;   
}   

.clearfix {   
    display: inline-block;  
}   

html[xmlns] .clearfix {    
    display: block;    
}    

* html .clearfix {     
    height: 1%;      
} 
```

# c++ - 发射失败。找不到二进制文件

> ID：15307010
> 
> 赞同：4
> 
> 时间：2013-03-09T04:03:45.660
> 
> 标签：c++, eclipse

我正在尝试将 eclipse 设置为与 C++ 一起使用，但是当我尝试运行基本程序时出现错误：`Launch failed. Binary not found`

这也打印到控制台：

```
Configuration failed with error
(Cannot run program "sh": Launching failed) 
```

这是我设置的路径：

`C:\Program Files\Java\jdk1.7.0_01\bin;C:\msys\1.0\bin;C:\mingw\bin;`

所有帮助将不胜感激。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-10T01:45:10.667

对于 Windows：

```
Project / Properties / C/C++ Build / Settings /Binary parsers: 
```

开启“ `PE Windows Parser`”

然后，在运行/调试之前构建它（`Ctrl`+ ）`B`

```
project->build project 
```

# macos - 在我的 Mac 上的 Parallels 中安装 RHEL 后，我如何登录？

> ID：15307015
> 
> 赞同：0
> 
> 时间：2013-03-09T04:04:18.450
> 
> 标签：macos, parallels, rhel6

我刚刚从我刚刚从 RedHat 下载的 iso 文件在我的 Mac OS 10.8 上的 Parallels 7 下安装了 RHEL 6.4 服务器。安装似乎进行得很好，但最后我留下了一个带有灰色条的屏幕，后跟文本“RedHat Enterprise Linux Server 6.4”，没有明显的登录方式。

如果我关闭机器，我会看到它正在运行关闭脚本。如果我启动它，我会看到启动脚本，它们看起来都很好。但我总是在同一个屏幕上无法登录。

我可以在屏幕中输入字符，但根本没有 Linux 提示。

有人知道下一步该怎么做吗？我无法从 RedHat 安装手册中收集到任何信息。

谢谢，

道格

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-05-19T05:47:50.260

我有同样的问题。问题是 X-win 服务器无法启动，因为 Parallels 工具在 RHEL 6.4 更新中破坏了帧缓冲区。这一点特别容易看到，因为在您安装 Parallels 工具之前，全新安装可以正常工作。

当您看到“选择系统启动”消息时，点击允许您编辑启动参数的键。在末尾添加“3”以强制启动运行级别 3（这是没有 GUI 的控制台登录）。

登录后，输入命令“starts”，你会看到它失败了。一旦您能够解决此问题，正常启动到 GUI 登录也将起作用。

我必须将视频驱动程序子系统降级回 6.3 才能开始工作，并且您还必须向 yum 添加排除项以防止它更新和删除修复程序。在 Parallels 发布解决此问题的更新工具之前，这将是必要的。我在 CentOS 论坛中找到了如何执行此操作的程序，抱歉我没有链接。

# javascript - 无法使用 Backbone.js 将数据保存到 localStorage

> ID：15307017
> 
> 赞同：4
> 
> 时间：2013-03-09T04:04:40.353
> 
> 标签：javascript, jquery, backbone.js, local-storage, requirejs

在与 Require.js 一起使用 Backbone.js 框架时，我正在尝试将一些数据保存到 localStorage。

但是，我收到以下错误：

`Uncaught Error: A "url" property or function must be specified`

任何可能导致此错误的线索？一个快速的谷歌透露，必须设置 Backbone.sync，但 localStorage 适配器不是已经为我做了吗？我错过了什么？

以下是一些相关的代码片段：

```
require.config({
  paths: {
    // Major libraries
    jquery: 'libs/jquery/jquery.min',
    underscore: 'libs/underscore/underscore.min',
    backbone: 'libs/backbone/backbone.min',

    // Require.js plugins
    text: 'libs/require/text',

    // Backbone.js plugins
    localstorage: 'libs/backbone/localstorage.min',

    // Just a short cut so we can put our html outside the js dir
    // When you have HTML/CSS designers this aids in keeping them out of the js directory
    templates: '../templates'
  }
}); 
```

...

```
define([
    'underscore',
    'backbone',
    'models/score',
    'localstorage'
], function(_, Backbone, ScoreModel, Store){
    var ScoreCollection = Backbone.Collection.extend({
        model: ScoreModel,
        localStorage: new Store("ScoreCollection")
    });
    return ScoreCollection;
}); 
```

...

```
define([
    'underscore',
    'backbone'
], function(_, Backbone){
    var ScoreModel = Backbone.Model.extend({
    });
    return ScoreModel;
}); 
```

- 编辑 -

路线如下：

```
define([
    'jquery',
    'underscore',
    'backbone',
    'views/scores/list',
    'views/scores/add'
], function($, _, Backbone, ScoreListView, ScoreAddView){
    var AppRouter = Backbone.Router.extend({
        routes: {
            'scores': 'showScores',
            'scores/add': 'addScore',
            '*actions': 'defaultAction'
        }
    });

    var initialize = function(){
        var app_router = new AppRouter;

        app_router.on('route:showScores', function(){
            var scoreListView = new ScoreListView();
            scoreListView.render();
        });

        app_router.on('route:addScore', function(){
            var scoreAddView = new ScoreAddView();
            scoreAddView.render();
        });

        app_router.on('route:defaultAction', function(){
            console.log('No route');
        });

        Backbone.history.start();
    }
    return {
        initialize: initialize
    };
}); 
```

- 更新 -

显然，该模型似乎与该系列无关。因此集合中的 localStorage 集不会应用于模型。在模型上显式设置 localStorage 使其工作。但是有人知道我错过了什么吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-09T04:27:23.093

当在模型上调用 Backbone.sync 并且其 url 函数未定义时，Backbone.sync 的默认实现会引发[此错误。](https://github.com/documentcloud/backbone/blob/master/backbone.js#L1491)`Backbone.sync`由其他函数隐式调用，例如保存模型。

如果您使用的是服务器端存储，则需要在模型上设置一个 url。但是，对于 localStorage，您需要`Backbone.sync`完全覆盖该方法，以便保存、更新和销毁函数将转换为 localStorage 适配器上的操作。我没有使用骨干 localStorage 插件，但它看起来应该是覆盖`Backbone.sync`：[https ://github.com/jeromegn/Backbone.localStorage/blob/master/backbone.localStorage.js#L208](https://github.com/jeromegn/Backbone.localStorage/blob/master/backbone.localStorage.js#L208)

尝试一些健全性检查以确保插件已加载并且正在执行覆盖功能。

# python - 在 Python 中读取文件时出现令人困惑的错误

> ID：15307020
> 
> 赞同：-1
> 
> 时间：2013-03-09T04:05:00.637
> 
> 标签：python, file

我在打开`names.txt`文件时遇到问题。我已检查我是否在正确的目录中。下面是我的代码：

```
import os
print(os.getcwd())
def alpha_sort():
    infile = open('names', 'r')
    string = infile.read()
    string = string.replace('"','')
    name_list = string.split(',')
    name_list.sort()
    infile.close()
    return 0
alpha_sort() 
```

我得到的错误是：

> FileNotFoundError：[Errno 2] 没有这样的文件或目录：“名称”

关于我做错了什么的任何想法？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-09T04:08:52.053

您在问题正文中提到该文件是“names.txt”，但是您的代码显示您正在尝试打开一个名为“names”的文件（没有“.txt”扩展名）。（扩展名是文件名的一部分。）

试试这个：

```
infile = open('names.txt', 'r') 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-09T04:25:26.290

作为旁注，请确保在打开文件时使用**通用**模式，因为 windows 和 mac/unix 具有不同的回车表示（/r/n 与 /n 等）。通用模式让 python 来处理这个，所以当你需要读取文件时使用它通常是个好主意。（编辑 - 应阅读：**文本**文件，感谢卡梅隆）

所以代码看起来像这样

```
infile = open( 'names.txt', 'rU' ) #capital U indicated to open the file in universal mode 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-09T04:12:10.697

这并不能解决该问题，但您可以考虑`with`在打开文件时使用：

```
with open('names', 'r') as infile:
    string = infile.read()
    string = string.replace('"','')
    name_list = string.split(',')
    name_list.sort()

return 0 
```

这将为您关闭文件并处理异常。

# vb.net - 如何使用 vb.net 将数据附加到现有的 excel 文件？

> ID：15307021
> 
> 赞同：1
> 
> 时间：2013-03-09T04:05:02.140
> 
> 标签：vb.net, excel

我有代码可以在现有的 excel 文件中找到最后一个非空行。我想将数据从 5 个文本框插入到列中的下 5 个单元格中。我不知道如何编码。请帮助我，这是我的代码：

```
With xlWorkSheet
        If EXL.WorksheetFunction.CountA(.Cells) <> 0 Then
            lRow = .Cells.Find(What:="*", _
                          After:=.Range("A2"), _
                          LookAt:=Excel.XlLookAt.xlPart, _
                          LookIn:=Excel.XlFindLookIn.xlFormulas, _
                          SearchOrder:=Excel.XlSearchOrder.xlByRows, _
                          SearchDirection:=Excel.XlSearchDirection.xlPrevious, _
                          MatchCase:=False).Row
        Else
            lRow = 1
        End If

    End With 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-09T05:28:54.243

对于您的问题，这里有两种不同的解决方案。我更喜欢第二个，因为您可以从任何列中确定最后一行，如果您愿意将其引用到另一列。

```
Dim nextrow As Integer = excel.Rows.End(XlDirection.xlDown).Row + 1

Dim ws As Worksheet = excel.ActiveSheet
Dim nRow = ws.Range("A" & ws.Rows.Count).End(XlDirection.xlUp).Row + 1 
```

那么你所要做的就是分配一个值：

```
excel.Range("A" & nRow).Value = "test"
excel.range("B" & nRow).value = "adjacent column" 
```

如果要将其循环到其下方的 5 个单元格，请执行以下操作：

```
Dim ws As Worksheet = excel.ActiveSheet
Dim lRow = ws.Range("A" & ws.Rows.Count).End(XlDirection.xlUp).Row

For i = 1 To 5
    excel.Range("A" & lRow).Offset(i, 0).Value = "variable here"
Next 
```

# c# - C# 状态模式和事件

> ID：15307024
> 
> 赞同：2
> 
> 时间：2013-03-09T04:05:37.083
> 
> 标签：c#, events, design-patterns, xna, state-pattern

在 C# 中，事件只能由所属类通过受保护的虚拟方法（如 OnClick、OnExit 等）触发……我正在尝试为我的一些复杂类实现 GOF 状态模式。到目前为止一切都很好，除了我找不到从我的状态类中触发拥有类的事件的方法。

例如，我的按钮有两种状态（向上和向下），DownState 类将检查用户输入，并在必要时触发按钮的 Click 事件。

```
public class Button
{
    public Button()
    {
        State = new ButtonStateNormal(this);
    }

    public event EventHandler<MouseEventArgs> Click;
    public ButtonState State { get; set; }

    protected virtual void OnClick(MouseEventArgs e)
    {
        if (Click != null)
            Click(this, e);
    }
}

public class ButtonStateNormal : ButtonState
{
    Button button;
    public ButtonStateNormal(Button button)
    {
        this.button = button;
    }

    public override void CheckForInput()
    {
        //...
        //Check for user input and change the state
        //...
        button.State = new ButtonStateDown(button);
    }
}

public class ButtonStateDown : ButtonState
{
    Button button;
    public ButtonStateDown(Button button)
    {
        this.button = button;
    }

    public override void CheckForInput()
    {
        //...
        //Check for user input, fire the event of the button and change the state
        //...
        button.OnClick(new MouseEventArgs(mouse.X, mouse.Y)); //I want to do this, obviously it won't work this way
        button.State = new ButtonStateNormal(button);
    }
} 
```

我怎样才能做到这一点？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-09T04:46:05.997

在您的班级上设置一个事件或委托`ButtonState`，以便您的按钮可以调用。`State`将您的自动属性更改`Button`为具有后备存储的属性，该后备存储在状态更改时挂钩和取消挂钩 this 事件或委托。

```
public class Button
{
    public Button()
    {
        State = new ButtonStateNormal(this);
    }
    private ButtonState _state;
    public event EventHandler<MouseEventArgs> Click;
    public ButtonState State
    {
        protected get
        {
            return _state;
        }
        set
        {
            if (_state == value)
                return;
            if (_state != null)
                _state.Click -= OnClick;
            if (value != null)
                value.Click += OnClick;

            _state = value;

        }
    }

    protected virtual void OnClick(MouseEventArgs e)
    {
        if (Click != null)
            Click(this, e);
    }

    public void CheckForInput(){
        State.CheckForInput();
    }
}

public abstract class ButtonState
{
    public abstract void CheckForInput();
    public ClickDelegate Click;
    public delegate void ClickDelegate(MouseEventArgs a);
} 
```

然后您可以在具体的 State 类中执行此操作

```
public class ButtonStateDown : ButtonState
{
    Button button;
    public ButtonStateDown(Button button)
    {
        this.button = button;
    }

    public void CheckForInput()
    {
        //...
        //Check for user input, fire the event of the button and change the state
        //...
        if(Click != null)
            Click(new MouseEventArgs(mouse.X, mouse.Y))
        button.State = new ButtonStateNormal(button);
    }
} 
```

# javascript - javascript确认框不起作用

> ID：15307035
> 
> 赞同：-2
> 
> 时间：2013-03-09T04:09:13.847
> 
> 标签：javascript, confirm

这是我的代码

```
 $('#Cancel').click(function() {

        var baseurl     = ' <?php echo $this->strBaseUrl?>';
        var cancel_msg  = " <?php echo Messageclass::setMessage('CAN01')?>";

        var where_to = confirm(cancel_msg);
        if (where_to == true){
            return true;
        }else{
            location.href = "";
        }

    }); 
```

但在变量 cancel_msg 下方显示错误。错误是

```
Uncaught SyntaxError: Unexpected token ILLEGAL 
```

php 逻辑运行良好。如果有人知道这件事，请帮助我

提前致谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-09T04:19:23.683

这实际上取决于 setMessage 输出的内容，但该错误指的是非法字符。这可能是换行符，但更可能是双引号：

`var cancel_msg = " <?php echo addslashes(Messageclass::setMessage('CAN01'))?>";`

此外，您可以将您的功能减少到：

`return window.confirm(cancel_msg);`

# c++ - 实现归并排序 C++

> ID：15307037
> 
> 赞同：1
> 
> 时间：2013-03-09T04:09:58.737
> 
> 标签：c++, mergesort

您好我正在尝试对传递给函数的向量实现合并排序。这是我的代码，它不会对列表进行排序，但我不确定出了什么问题。当我输出原始向量和排序后的向量时，两者之间存在一些差异，但仍然没有排序。

```
void BestFit::findBest(){
    vector<double> distances;
    vector<double> sorted;
    distances = getDistance(0);
    printDistance(distances);
    sorted = sortDistance(distances);
    printDistance(sorted);
}

vector<double> BestFit::sortDistance(vector<double> distances){
    int mid = distances.size()/2;
    vector<double> left;
    vector<double> right;

    if(distances.size() > 1){
        for(int i = 0; i < mid; i++){
            left.push_back(distances[i]);
        }

        for(int i = mid; i < distances.size(); i++){
            right.push_back(distances[i]);
        }
        return sortDistanceHelp(left, right);
    }else{
        return distances;
    }
}

vector<double> BestFit::sortDistanceHelp(vector<double> left, vector<double> right){
    vector<double> result;
    if(left.size() > 1){
        left = sortDistance(left);
    }else if(right.size() > 1){
        right = sortDistance(right);
    }

    int count = 0;
    int left_count = 0;
    int right_count = 0;
    while(count < (left.size() + right.size())){
        if(left_count < left.size() && right_count < right.size()){
            if(left[left_count] <= right[right_count]){
                result.push_back(left[left_count]);
                left_count++;
            }else{
                result.push_back(right[right_count]);
                right_count++;
            }
        }else if(left_count < left.size()){
            result.push_back(left[left_count]);
            left_count++;
        }else{
            result.push_back(right[right_count]);
            right_count++;
        }
        count++;
    }

    return result;
} 
```

这是未排序和排序的距离向量的输出。

未分类：

距离：0.679371 距离：1.263918 距离：1.575268 距离：0.117904 距离：3.851347 距离：2.317885 距离：0.899686 距离：3.916363 距离：1.513004 距离：0.446430

排序：

距离：0.679371 距离：1.263918 距离：1.575268 距离：0.117904 距离：2.317885 距离：0.899686 距离：3.851347 距离：3.916363 距离：1.513004 距离：0.446430

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-09T06:27:04.880

我很确定这是问题所在。在`sortDistanceHelp()`：

```
if(left.size() > 1){
    left = sortDistance(left);
}else if(right.size() > 1){ //<<<===== ELSE SHOULD NOT BE HERE
    right = sortDistance(right);
} 
```

它应该是这样的：

```
if(left.size() > 1)
    left = sortDistance(left);

if(right.size() > 1)
    right = sortDistance(right); 
```

* * *

剩下的只是一个简单的合并算法，您可以将其用于您自己的目的，利用迭代器。这是我能想到的最简单的合并算法。它依赖于您的数据类型来支持`operator <()`，以及`operator =()`

```
template<typename ForwardIterator, typename OutputIterator>
void mergelists
(
    ForwardIterator first1,     // starting iterator of first sequence
    ForwardIterator last1,      // ending iterator of first sequence
    ForwardIterator first2,     // starting iterator of second sequence
    ForwardIterator last2,      // ending iterator of second sequence
    OutputIterator out1)        // output iterator for results
{
    while (first1 != last1 && first2 != last2)
    {
        // note the opposing less-comparison. equtes to (i1 <= i2)
        while (first1 != last1 && !(*first2 < *first1))
            *out1++ = *first1++;

        if (first1 != last1)
        {
            while (first2 != last2 && *first2 < *first1)
                *out1++ = *first2++;
        }
    }

    // doesn't really matter which one finished first
    //  only one of these will put one or more final
    //  nodes into the sequence.
    while (first1 != last1)
        *out1++ = *first1++;
    while (first2 != last2)
        *out1++ = *first2++;
} 
```

再加上采用起始迭代器和大小的通用归并排序算法，我们有：

```
// general mergesort algorithm
template <typename Iterator>
void mergesort(Iterator first, size_t d)
{
    typedef typename std::iterator_traits<Iterator>::value_type value_type;

    Iterator last = first + d;
    size_t n = d/2;
    if (n == 0)
        return;

    if (n > 1) // no single elements
        mergesort(first, n);
    if (d > 1) // no single elements
        mergesort(first+n, d-n);

    // merge back into local sequence
    std::vector<value_type> vals;
    vals.reserve(d);
    mergelists(first, first+n, first+n, last, back_inserter(vals));

    // and copy into where it all began
    std::copy(vals.begin(), vals.end(), first);
} 
```

下面是一个带有随机填充向量的示例用法：

```
int main()
{
    srand((unsigned)time(0));
    vector<int> data;

    // fill a vector with random junk.
    generate_n(back_inserter(data), 20, []() { return std::rand() % 99+1;});
    copy(data.begin(), data.end(), ostream_iterator<int>(cout, " "));
    cout << endl;

    mergesort(data.begin(), data.size());
    copy(data.begin(), data.end(), ostream_iterator<int>(cout, " "));
    cout << endl;
    return 0;
} 
```

**样品运行 I**

```
54 75 14 59 69 18 65 40 52 77 65 43 87 80 99 44 81 40 70 37 
14 18 37 40 40 43 44 52 54 59 65 65 69 70 75 77 80 81 87 99 
```

**样品运行 II**

```
53 91 27 29 47 31 20 90 12 18 16 75 61 94 60 55 66 44 35 26 
12 16 18 20 26 27 29 31 35 44 47 53 55 60 61 66 75 90 91 94 
```

# php - ZenCart - 错误常量 TABLE_HEADING_PRODUCTS 已在

> ID：15307038
> 
> 赞同：0
> 
> 时间：2013-03-09T04:10:12.943
> 
> 标签：php, zen-cart, zen

我有一个网站是由 ZenCart 建立的。一切都很好，但是今天早上我在 index.php 中收到了一些错误消息，就像这样

> 注意：常量 TABLE_HEADING_PRODUCTS 已在第 35 行的 /public_html/includes/languages/english/index.php 中定义

我不明白我以前做了什么，你能帮我解决它吗？谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-09T06:19:23.423

请在脚本顶部尝试此操作：

```
error_reporting(0); 
```

上述的主要缺点是，如果您的脚本在到达之前出现错误，它将不会被触发。

您也可以在`.htaccess`文件中粘贴以下内容

```
php_value display_errors 0 
```

或者，您可以解决问题。搜索`TABLE_HEADING_PRODUCTS`并查看它的定义位置。该错误表明正在至少 2 个地方定义，删除一个（可能是稍后定义的那个）并且通知将停止出现。

突然出现这种情况的可能原因是您主机的 PHP 安装发生了变化。以前它不报告通知，现在它报告了。

* * *

**编辑** 如果您仍然想看到严重的错误（作为一般规则关闭所有错误不是一个好主意），那么使用这个：

```
error_reporting(E_ALL ^ E_NOTICE); 
```

它只会隐藏像你看到的那样的 norices。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-09T06:14:15.113

我把这一行放在 index.php 文件 ini_set('display_errors',0); 但它看起来并不好。

# android - Android ViewPager、ListFragments 和列表中元素更改时的更新

> ID：15307041
> 
> 赞同：0
> 
> 时间：2013-03-09T04:10:32.433
> 
> 标签：android, android-listview, android-fragments, android-viewpager, updating

我正在编写我的第一个 android 应用程序作为大学课程。到目前为止，我的大部分工作都在工作，但我遇到了一个问题。

该应用程序是结构化的，因此我有一个 Activity，它设置了一个 ViewPager，其中包含 3 个片段。每个 Fragment 都是 ListFragment 的扩展，列表中填充了从数据库中提取的数据。适配器显示每个 ListItem 的自定义视图，其中包括一个复选框。

我想要发生的是当复选框是票时，所有三个片段都被更新。也就是说，为每个片段重新查询数据库并更新列表视图。

家庭活动。这将设置 ViewPager。它添加片段并设置片段适配器。公共类 HomeActivity 扩展 SherlockFragmentActivity {

```
 private FragmentAdapter mPagerAdapter;
    private ViewPager mViewPager;

    /**
    * Set up the view. Add the Fragments to the viewPager, set up tabs. 
    */
    @Override
    protected void onCreate(Bundle savedInstanceState) {

        super.onCreate(savedInstanceState);
        setContentView(R.layout.activity_home);
        getSupportActionBar();

        ...

        //Set up Fragments. 
        List<MemoFragment> fragments = new Vector<MemoFragment>();
        fragments.add(new IncompleteMemoFragment());
        fragments.add(new CompleteMemoFragment());
        fragments.add(new UrgentMemoFragment());

        mPagerAdapter = new FragmentAdapter(getSupportFragmentManager(), fragments);

        mViewPager = (ViewPager) findViewById(R.id.viewPager);
        mViewPager.setAdapter(mPagerAdapter);
        mViewPager.setOnPageChangeListener(new TabListener(mTabHost,mViewPager));
        mViewPager.setOffscreenPageLimit(3);
    }
    ...
} 
```

片段适配器

```
public class FragmentAdapter extends FragmentPagerAdapter {

    private List<MemoFragment> mFragments;

    public FragmentAdapter(FragmentManager fm, List<MemoFragment> fragments) {
        super(fm);
        this.mFragments = fragments;
    }

    @Override
    public MemoFragment getItem(int position) {
        return mFragments.get(position);
    }

    @Override
    public int getCount() {
        return this.mFragments.size();
    }

} 
```

MemoFragment 类、IncompleteMemoFragment、CompleteMemoFragment、UrgentMemoFragment 都扩展了它，并且 99% 相同，它们只是从数据库中提取一组不同的数据。

```
public class MemoFragment extends SherlockListFragment {

    protected DatabaseSource datasource;

    /**
     * Creates the View. 
     */
    @Override
    public View onCreateView(LayoutInflater inflater, ViewGroup container, Bundle savedInstanceState) {

        View rootView = inflater.inflate(R.layout.fragment_memo_list, container, false);

        datasource = new DatabaseSource(container.getContext());
        datasource.open();

        List<Memo> values = getMemos();

        datasource.close();

        MemoListViewAdaptor adapter = new MemoListViewAdaptor(container.getContext(), values);

        setListAdapter(adapter);

        return rootView;
    }

    /**
    * Gets the memos to show.
    * @return the memos to show.
    */
    public List<Memo> getMemos(){
        return datasource.getAllMemos();
    }

} 
```

这是 MemoListViewAdapter。在这里，您将看到我也在尝试寻找更改的复选框。

```
public class MemoListViewAdaptor extends ArrayAdapter<Memo> {
    private final Context mContext;
    private final List<Memo> mMemos;

    /**
     * Save the context and the Memos
     * @param context the context to save
     * @param memos the memos to save.
     */
    public MemoListViewAdaptor(Context context, List<Memo> memos) {
        super(context, R.layout.memo_list_row, memos);
        this.mContext = context;
        this.mMemos = memos;
    }

    /**
     * Get the view. Sets up the list to use the custom view. 
     */
    @Override
    public View getView(int position, View convertView, ViewGroup parent) {

        LayoutInflater inflater = (LayoutInflater) mContext.getSystemService(Context.LAYOUT_INFLATER_SERVICE);
        View rowView = inflater.inflate(R.layout.memo_list_row, parent, false);

        ...
        CheckBox done = (CheckBox) rowView.findViewById(R.id.done);

        Memo memo = mMemos.get(position);

        done.setOnClickListener(new ClickListener(memo));
        if(memo.getCompleteness() == Memo.COMPLETE){
            done.setChecked(true);
        }

        ...

        return rowView;
    }

} 
```

而且，最后这里是点击列表器。

```
public class ClickListener implements OnClickListener {
    private Memo memo;

    ClickListener(Memo memo){
        this.memo = memo;
    }
    @Override
    public void onClick(View v) {
        if(v.getClass() == CheckBox.class){
            Log.v("com.milner.memolist", "These people are crazy. This task is done");
            if(((CheckBox)v).isChecked()){
                memo.setCompleteness(1);
            }else{
                memo.setCompleteness(0);
            }
            DatabaseSource datasource = new DatabaseSource(v.getContext());
            datasource.open();
            datasource.updateMemo(memo);
            datasource.close();

        }else{
        ...
        }
    }  
} 
```

所以你有它。这就是我到目前为止所拥有的！如您所见，我可能以一种非常复杂的方式完成了此操作……我对android没有太多经验。我想我真正想做的是在勾选复选框时重新加载所有片段。

是否有捷径可寻？有没有一种复杂的方法可以做到这一点？我只是无法理解这最后一点！

希望你能帮忙！:)

谢谢

汤姆·M

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-09T13:52:31.250

> 是否有捷径可寻？

添加：

```
@Override
public int getItemPosition(Object object) {     
    return POSITION_NONE;
} 
```

到你的`FragmentAdapter`，当你需要更新片段调用`notifyDataSetChanged()`时`FragmentAdapter`。这将触发片段的重建。

> 有没有一种复杂的方法可以做到这一点？

立即更新可见片段，以便用户看到更改并在用户尝试查看它们之后或之后更新下一个片段（开始滑动时）。要检查这个解决方案，谷歌有点关于获取/更新`Fragment`/从`ViewPager`.

If you just have three fragments in the `ViewPager` set the off screen page limit to `2` as you'll only have a maximum of two fragments on either side of any fragment from the `ViewPager`. Also keeping references to the fragment like you do with that `Vector`(use an `ArrayList`) for (I'm assuming) accessing them later will fail after a screen rotation as those will not be the fragments the `ViewPager` will use.

# oop - 构建器模式：Director 为什么要构建对象？

> ID：15307044
> 
> 赞同：6
> 
> 时间：2013-03-09T04:10:44.617
> 
> 标签：oop, design-patterns, ooad, builder-pattern

我正在学习[建造者模式](http://en.wikipedia.org/wiki/Builder_pattern)

在上面的链接（Java 示例）中，我注意到 Builder 提供了构造多个组件的接口。除了调用它们，我们还调用了 getProduct()。

我不明白的一点是，为什么Director需要一个一个调用所有这些组件构造方法并最终得到结果。

```
 /** "Director" */
 class Waiter {
    private PizzaBuilder pizzaBuilder;

public void setPizzaBuilder(PizzaBuilder pb) { pizzaBuilder = pb; }
public Pizza getPizza() { return pizzaBuilder.getPizza(); }

public void constructPizza() {
   pizzaBuilder.createNewPizzaProduct(); 
   pizzaBuilder.buildDough(); // construct component 1
   pizzaBuilder.buildSauce(); // construct component 2
   pizzaBuilder.buildTopping();  // construct component 3
} 
```

}

为什么不将构建组件1、2、3的代码包含在它自己的ConcreteBuilder类中而不是Director中，实际上去掉Director层。

我知道上述方法可能会将 Builder 模式转变为其他模式，但我不明白 Director 为何要一步一步地完成这项工作。有什么好处？如果有多个导演，就会有重复的代码，对吧？我可能不理解执行构建器模式背后的动机......

**更新**：构建器模式是否专注于在创建更大的复杂对象时提供可定制的组件选择？否则，*截至目前*，我没有看到引入额外层 Director 的意义。

即使是这样，装饰器模式也可能是一个更好的主意，通过动态自定义组件来完成同样的任务。在某个地方我错过了 Builder 背后的要点.. :(

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-03-09T20:56:03.053

Director 类的目的是封装创建对象的算法，即将构造逻辑的代码与实际构成对象的部分的代码分开。如果没有 Director 类，您的 Builder 类将更加庞大且模块化程度更低，因此更难以维护且可重用性更低。

您所指的维基百科示例相当简单[。](https://en.wikipedia.org/wiki/Builder_pattern)对于复杂的对象，构造机制通常要复杂得多，Director 不一定要按照定义的顺序逐一调用 Builder 方法。例如，考虑类`Cake`：它可能有部分`ChocolateLayer`和。Builder 将定义三个方法以按特定顺序构建这三个部分，但是Director 类中的方法可能如下所示：`CreamLayer``Strawberry``constructCake()`

```
public void constructCake() {
   CakeBuilder.createNewCakeProduct(); 
   CakeBuilder.buildChocolateLayer(); 
   CakeBuilder.buildCreamLayer(); 
   CakeBuilder.buildChocolateLayer(); // 2nd call of the same Builder method
   int totalStrawberries = 3 + new Random().nextInt(2);
   for (int i = 1; i <= totalStrawberries; i++) 
      CakeBuilder.buildStrawberry(); // put some strawberries on top
   // Please don't try this recipe at home! 
} 
```

至于 Builder 和 Decorator 之间的区别，您可以查看[Builder Vs Decorator 模式](https://stackoverflow.com/questions/4768349/builder-vs-decorator-pattern?rq=1)问题。

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2013-03-09T23:41:31.687

Director 不构造对象，Builder 构造对象，它被称为 Product。Director 的存在有一个原因：因此该类的用户对构造对象所需的步骤一无所知。所有这些关于将其全部扁平化为一种方法的讨论就像在问为什么我们不能将汽车变成独轮车。我们只能一个。它不再是汽车了，而且 b. 它不能做汽车做的所有独轮车做不到的事情。

将 Builder 视为模板方法和工厂的融合的最佳方式之一：我们需要一个抽象的构造过程，以便我们可以支持不同产品的创建，但构造过程涉及许多步骤。这个想法是，一旦你有了 Director/Builder 架构，你就可以通过提供一个新的具体实现来轻松地添加新的 Builder。它类似于模板方法，因为 Builder 同样可以忽略构造语义的细节，而只提供构造的每个所需部分的实现（另请注意，某些逻辑可能最终在 Builder 层次结构的抽象基础中，进一步扩大了数量后来的扩展程序免费获得的自动功能）。

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2013-03-09T06:11:50.923

我认为您误解了构建器模式。您是说构建不同组件的过程可以合并到一个方法中，这是真的，但这不是此对象创建设计模式的关键。再看这段代码：

```
class Waiter {
    private PizzaBuilder pizzaBuilder;

    public void setPizzaBuilder(PizzaBuilder pb) { pizzaBuilder = pb; }
    public Pizza getPizza() { return pizzaBuilder.getPizza(); }

    public void constructPizza() {
        pizzaBuilder.createNewPizzaProduct();
        pizzaBuilder.buildDough();
        pizzaBuilder.buildSauce();
        pizzaBuilder.buildTopping();
    }
} 
```

请注意，`Waiter`仅适用于 a `PizzaBuilder`，他不知道它是 a`SpicyPizzaBuilder`还是 a `HawaiianPizzaBuilder`，这是此模式的目标。在另一段代码中：

```
class BuilderExample {
    public static void main(String[] args) {
        Waiter waiter = new Waiter();
        PizzaBuilder hawaiianPizzaBuilder = new HawaiianPizzaBuilder();
        PizzaBuilder spicyPizzaBuilder = new SpicyPizzaBuilder();

        waiter.setPizzaBuilder( hawaiianPizzaBuilder );
        waiter.constructPizza();

        Pizza pizza = waiter.getPizza();

        waiter.setPizzaBuilder( spicyPizzaBuilder );
        waiter.constructPizza();

        Pizza anotherPizza = waiter.getPizza();
    }
} 
```

您实际上可以看到这是如何工作的。A`Waiter`被创建并首先传递 a `HawaiianPizzaBuilder`，然后是 a `SpicyPizzaBuilder`，并且使用相同的实例，`Waiter`您可以构建一个比萨饼并要求它，他将提供正确的比萨饼。希望我已经解释了自己，并且此评论对您有所帮助；）祝您好运！！！

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2013-03-09T23:30:17.290

我对构建器模式的解释：让我们假设我们有一个对象（产品）并且对象构造需要许多参数或组件（其他对象），现在更糟糕的是，并非所有这些参数都可能需要，所以这将导致我们要么创建许多具有不同参数的构造函数，要么在唯一的构造函数中引入许多逻辑语句来选择这个对象并拒绝那个对象，更糟糕的是，这些组件可能需要按顺序（以特定顺序）构建，或者对它们进行一些业务规则检查，这一切归结为一个与参数（组件）紧密耦合且难以维护的复杂构造函数。解决方案是将这个逻辑移动到一个具体的构建器中，这样我们就可以通过调用来获取我们的对象`ConcreteBuilder.BuildComponent1(), ConcreteBuilder.BuildComponent2(), ..., ConcreteBuilder.GetMeMyObject()`但这会将客户端代码与构造过程紧密耦合，每个客户端现在都完全了解构造我们心爱的对象所需的所有步骤，因此构造过程中的任何更改都将迫使我们到处修改所有客户端代码，为了解决这个问题，Builder 模式引入了*Director*封装了这些步骤，现在所有客户端都调用*Director*上的 Build() 方法来构建对象。总而言之，Director 在那里，所以客户端代码不知道或紧密耦合到创建我们心爱的对象所需的步骤，现在为什么这些`BuildComponent1(), BuildComponent2()`方法是用来解决构建器模式的问题的builder 在这些方法中，我们甚至可以选择将某些具体构建器的实现留空，因为我们的最终对象（产品）不需要那个组件，我们现在已经将这个复杂的构建过程封装在远离我们心爱的对象的工作中最好不用担心如何自己构建它。

# c++ - 理解 MergeSort C++ 递归实现的一部分

> ID：15307049
> 
> 赞同：0
> 
> 时间：2013-03-09T04:11:43.703
> 
> 标签：c++, mergesort

我正在努力思考以下 C++ 中合并排序的递归实现

让我明白的是，由于向量是通过引用传递的，并且 vec.clear() 被调用，即使在一些合并完成之后，它怎么不会消除向量。例如，当基数被命中时，该函数返回堆栈的顶部帧并继续向下堆栈。但是，该函数需要多次合并，并且在每次合并之前清除向量，我认为这意味着内存中的空间（因为它是通过引用传递）被清除并且我们丢失了已经合并的内容？如果这个方法是按值传递的，我可以理解它是如何工作的，但是这是通过引用传递的，所以我很困惑。

```
void merge(vector<int> &final, vector<int> &left, vector<int> &right) {
    while (left.size() > 0 || right.size() > 0) {
        if (right.size() == 0) {
            final.push_back(left.at(0));
            left.erase(remove(left.begin(), left.end(), left.at(0)), left.end());
        }
        else if (left.size() == 0) {
            final.push_back(right.at(0));
            right.erase(remove(right.begin(), right.end(), right.at(0)), right.end());
        } else if (left.at(0) <= right.at(0)) {
            final.push_back(left.at(0));
            left.erase(remove(left.begin(), left.end(), left.at(0)), left.end());
        } else if (right.at(0) < left.at(0)) {
            final.push_back(right.at(0));
            right.erase(remove(right.begin(), right.end(), right.at(0)), right.end());
        }
    }
}

void sort(vector<int> &vec) {
    int n = vec.size();

    // BASE CASE
    if (n <= 1) {
        return;
    }

    // GENERAL CASE / RECURSIVE CASE
    vector<int> leftVec;
    vector<int> rightVec;

    for (int i = 0; i < n; i++) {
        if (i < n / 2) {
            leftVec.push_back(vec.at(i));
        } else {
            rightVec.push_back(vec.at(i));
        }
    }

    sort(leftVec);
    sort(rightVec);
    vec.clear();
    merge(vec, leftVec, rightVec);
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-09T04:14:11.180

的内容`vec`已被复制到调用之前和`leftVec`调用之前，因此没有任何信息丢失。您没有给出源代码，但我们可以假设它会将内容复制回.`rightVec``clear``merge``vec`

# ruby-on-rails - Rails 3.2 中的 Scaffold 是更好的选择吗？

> ID：15307052
> 
> 赞同：0
> 
> 时间：2013-03-09T04:12:12.727
> 
> 标签：ruby-on-rails, ruby-on-rails-3.2, scaffolding

我是 ruby​​ on rails 的新手。我想知道为什么我们使用脚手架，我们应该在捆绑安装过程之后直接运行脚手架。我在某处读到我们必须首先通过以下方式创建控制器：-

```
rails generate controller 
```

然后运行脚手架。哪一种是首选方法。创建模型，控制器然后使用脚手架或直接运行脚手架。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-03-09T04:23:47.530

如果您想快速构建一些东西并且不太关心代码，那么您可以使用脚手架。一旦你为资源搭建了脚手架，rails 将为你提供一个基本/工作的 crud 操作、一条宁静的路线和所有必需的视图。您不需要自己创建模型、控制器、视图和设置路由。[http://guides.rubyonrails.org/getting_started.html#getting-up-and-running-quickly-with-scaffolding](http://guides.rubyonrails.org/getting_started.html#getting-up-and-running-quickly-with-scaffolding)

但是，一旦您了解了 rails 的工作原理和最佳实践，人们通常更愿意不使用脚手架并自行添加所需的组件。这将允许开发人员以他们喜欢的方式自定义和构建应用程序。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-03-09T04:26:36.740

Rails 提供了这些生成器来快速轻松地创建您需要的内容。如果您只需要一个模型，您可以运行模型生成器，如`rails generate model ModelName attribute:type`. 一个例子可能更清楚：

```
rails generate model Post title:string body:string 
```

脚手架生成应用程序的所有主要组件（模型、视图、控制器、路由、测试，甚至助手等），并且运行脚手架生成器非常相似：

```
rails generate scaffold Post title:string body:string 
```

因此，如果您只需要一个模型，请运行模型生成器，如果您只需要一个控制器，请运行控制器生成器。如果您希望使用单个命令生成我上面提到的所有这些部分，请运行脚手架生成器。看看[Rail 的脚手架指南](http://guides.rubyonrails.org/getting_started.html#getting-up-and-running-quickly-with-scaffolding)。

希望能帮助到你 ：）

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-03-09T04:19:36.917

脚手架只是一种快速启动和运行的方法。它们主要用于快速模拟东西以进行概念验证/演示类工作。大多数有经验的开发人员从不接触脚手架。我建议您使用脚手架来查看它生成的内容。然后尝试在没有脚手架的情况下重新创建它。

当您运行脚手架生成器时，它会为您创建模型、控制器和视图。它一口气完成。

当你运行`bundle install`它时，它会将**所有**的 gem（比如一个库）放到你的系统上，这样你就可以正确地运行你的应用程序。哪些宝石？好吧，`Rails`它是一颗宝石，它有很多依赖项。当您运行`bundle install`时，它将所有这些依赖项安装到您的系统上。在启动您的 rails 应用程序之前，您需要运行`bundle install`.

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2013-03-09T09:55:33.003

脚手架通常用于快速原型制作。您不需要运行 controller generate 命令，因为脚手架生成器会自动为您提供相应的控制器、模型和视图。

希望这可以帮助。

# javascript - CasperJS 和 mint.com

> ID：15307055
> 
> 赞同：0
> 
> 时间：2013-03-09T04:12:40.240
> 
> 标签：javascript, web-scraping, phantomjs, casperjs

我在 mint.com 有一个帐户，我每天都在尝试下载有关我的帐户的信息。我还没有找到 Mint API，我认为 Intuit 和 Yodlee API 不会起作用。

我想在 Mint 中获取数据，我正在尝试使用 CasperJS（如果重要的话，在 Raspberry PI 上）。现在下面的 JavaSript 可以`https://www.google.com`很好地解析，但`https://www.mint.com`它只是挂起。

```
var links = [];
var casper = require('casper').create();

function getLinks() {
    var links = document.querySelectorAll('a');
    return Array.prototype.map.call(links, function(e) {
        return e.getAttribute('href')
    });
}

casper.start('https://www.mint.com/', function() {

});

casper.then(function() {
    links = this.evaluate(getLinks);
});

casper.run(function() {
    // echo results in some pretty fashion
    this.echo(links.length + ' links found:');
    this.echo(' - ' + links.join('\n - ')).exit();
}); 
```

* * *

薄荷的输出

```
[info] [phantom] Starting...
[info] [phantom] Running suite: 3 steps
[debug] [phantom] opening url: https://wwws.mint.com/, HTTP GET
[debug] [phantom] Navigation requested: url=https://wwws.mint.com/, type=Other, lock=true, isMainFrame=true
[warning] [phantom] Loading resource failed with status=fail: https://wwws.mint.com/
[debug] [phantom] Successfully injected Casper client-side utilities
[info] [phantom] Step 2/3: done in 181787ms.
[info] [phantom] Step 3/3: done in 181893ms.
[info] [phantom] Done 3 steps in 181981ms
0 links found:
 - 
```

* * *

谷歌的输出

```
[info] [phantom] Starting...
[info] [phantom] Running suite: 4 steps
[debug] [phantom] opening url: http://google.fr/, HTTP GET
[debug] [phantom] Navigation requested: url=http://google.fr/, type=Other, lock=true, isMainFrame=true
[debug] [phantom] Navigation requested: url=http://www.google.fr/, type=Other, lock=true, isMainFrame=true
[debug] [phantom] url changed to "http://www.google.fr/"
[debug] [phantom] Successfully injected Casper client-side utilities
[info] [phantom] Step 2/4 http://www.google.fr/ (HTTP 301)
[info] [remote] attempting to fetch form element from selector: 'form[action="/search"]'
[debug] [remote] Set "q" field value to casperjs
[info] [remote] submitting form to /search, HTTP GET
[info] [phantom] Step 2/4: done in 1901ms.
[debug] [phantom] Navigation requested: url=http://www.google.fr/search?hl=fr&source=hp&q=casperjs&gbv=2, type=FormSubmitted, lock=true, isMainFrame=true
[debug] [phantom] url changed to "http://www.google.fr/search?hl=fr&source=hp&q=casperjs&gbv=2"
[debug] [phantom] Successfully injected Casper client-side utilities
[info] [phantom] Step 3/4 http://www.google.fr/search?hl=fr&source=hp&q=casperjs&gbv=2 (HTTP 301)
[info] [remote] attempting to fetch form element from selector: 'form[action="/search"]'
[debug] [remote] Set "q" field value to phantomjs
[info] [remote] submitting form to /search, HTTP GET
[info] [phantom] Step 3/4: done in 4675ms.
[debug] [phantom] Navigation requested: url=http://www.google.fr/search?q=phantomjs&hl=fr&gbv=2&oq=&gs_l=, type=FormSubmitted, lock=true, isMainFrame=true
[debug] [phantom] url changed to "http://www.google.fr/search?q=phantomjs&hl=fr&gbv=2&oq=&gs_l="
[debug] [phantom] Successfully injected Casper client-side utilities
[info] [phantom] Step 4/4 http://www.google.fr/search?q=phantomjs&hl=fr&gbv=2&oq=&gs_l= (HTTP 301)
[info] [phantom] Step 4/4: done in 6478ms.
[info] [phantom] Done 4 steps in 6552ms
22 links found:
 - /url?q=http://casperjs.org/&sa=U&ei=SLQ6UbawMYOE9QSlooD4Bw&ved=0CBwQFjAA&usg=AFQjCNEivptk0tQ6060ZeJF2ZO7BDHisuQ
 - /url?q=http://casperjs.org/installation.html&sa=U&ei=SLQ6UbawMYOE9QSlooD4Bw&ved=0CB8QqwMoADAA&usg=AFQjCNEgDNPxz-NyxPI-XdGxcMM92VMu1g
 - /url?q=http://casperjs.org/quickstart.html&sa=U&ei=SLQ6UbawMYOE9QSlooD4Bw&ved=0CCAQqwMoATAA&usg=AFQjCNG1J2w6fPKdK_mASYGxFsnAWp21fw 
```

CasperJs --version 是 1.0.0-RC4

PhantomJs 是为 RaspberryPI 编译的 -> [https://github.com/piksel/phantomjs-raspberrypi](https://github.com/piksel/phantomjs-raspberrypi) 版本 1.7.0

一个简单的 wget 将下载 html，所以我必须没有设置或设置 CasperJs 错误？其他启用了 javascript 的网站解析得很好，但对于 Mint 我什么也没得到？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-17T12:46:26.490

我认为日志显示有拼写错误...

```
opening url: https://wwws.mint.com/ 
```

你的网址里有www吗？

# css - 我的浮动侧边栏 CSS 有什么问题？

> ID：15307058
> 
> 赞同：0
> 
> 时间：2013-03-09T04:13:04.107
> 
> 标签：css

这是我正在尝试做的新事情，左侧固定位置的浮动侧边栏，右侧是主要内容。由于某种原因，我的很多 CSS 都不起作用。尤其是主要是完整的 750 像素，而不是像我说的那样只有 600。如果您想查看结果，我已经在我的网站上突出显示了不同的部分（[http://brandonc.handcraft.com/sevenmages/prolouge](http://brandonc.handcraft.com/sevenmages/prolouge)）：

```
 <style>
    html { margin: 0; padding: 0; }
    body { background-image: url('old-paper-texture.jpg'); margin: 0; padding: 0; }
    #wrap { width: 750px; margin: auto; }
    #header { background: purple; }
    #header h1 { text-align: center; }
    #header h2 { text-align: center; }
    #header h3 { text-align: center; }
    #main { float: right; width: 600; background: blue;}
    #main p { font-family: arial; font-size: 3;  margin: 20 30; text-align: left; text-indent: 30px; }
    #main h1 { font-family: Macondo Swash Caps; text-align: center; }
    #main h2 { font-family: Macondo Swash Caps; text-align: center; }
    #main h3 { text-align: center; }
    #sidebar { position: fixed; margin: 0; padding: 0; text-indent: 0; background: red; float: left; width: 150; }
    #sidebar p { text-align: center; text-indent: 0; }
    #sidebar il { text-align: center; }
    #sidebar ul {  }
    #sidebar a:link { color: #000000; text-decoration: none; font-family: Macondo Swash Caps; font-size: 15; }
    #sidebar a:visited { color: #000000; text-decoration: none; font-family: Macondo Swash Caps; font-size: 15; }
    #sidebar a:hover { color: #000000; text-decoration: none; font-family: Macondo Swash Caps; font-size: 15; }
    #sidebar a:active { color: #000000; text-decoration: none; font-family: Macondo Swash Caps; font-size: 15; }
    #footer { margin: 20 0; text-align: center; background: green; }
  </style> 
```

注意：wrap 是所有 div 的，基本上就像一个 body 函数。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-09T04:16:13.767

您没有为您的`#main`div 宽度指定一个单位，这是无效的 CSS - 浏览器会忽略您当前设置的宽度属性 .. 只需包含`px`after`600`并且应该可以按预期工作..

还为设置的宽度添加一个`px`值`#sidebar`

而不是`width: 150;`让它`width: 150px;`

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-09T04:16:44.653

您需要包括单位，这里是“px”。所以将“600”更改为“600px”。这应该带你朝着正确的方向前进。

# php - 似乎无法让联系表单脚本工作

> ID：15307067
> 
> 赞同：-2
> 
> 时间：2013-03-09T04:14:47.990
> 
> 标签：php, contact-form

用 PHP 代码粘贴：http: [//pastie.org/6427151](http://pastie.org/6427151)

使用 HTML 表单粘贴：http: [//pastie.org/6427155](http://pastie.org/6427155)

知道为什么这不起作用吗？它吐出“请填写所有字段。” 即使所有字段都正确填写。我对 PHP 知之甚少，所以它很可能很简单。不过，我在另一个网站上使用了相同的脚本，并且在那里运行良好，这就是我感到困惑的原因。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-09T04:18:05.030

您`form`的标记中的输入字段需要`name`属性。该`name`属性用作访问用户提交的`$_POST`or数组中的值的键。`$_GET`

所以你需要有：

```
<form ... method="post">
...
<input type="text" name="name" id="name" placeholder="Name" ... />
...
<input type="email" name="email" id="email" placeholder="Email" ... />
...
<textarea name="message" id="message" ... ></textarea> 
```

然后您使用每个`name`（区分大小写）访问：

```
$name = $_POST['name']; // not $_POST['Name'], or $_GET['name'] 
```

还要确保*仔细*验证和清理您处理的所有用户态提交的内容。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-09T04:26:21.053

首先，为所有要从表单提交数据的 、 和 元素定义属性`name`。`input``textarea``select``button`

我还建议您使用[`filter_var()`](http://php.net/manual/en/function.filter-var.php)标志`FILTER_VALIDATE_EMAIL`来***最好***地处理呈现给您的脚本的内容：

```
// If invalid, this will return nothing.
// If valid, the email address as a string.
function validateEmail($eamil) {
    return filter_var($email, FILTER_VALIDATE_EMAIL);
} 
```

这是***最佳实践***，并且比您可以找到的脚本版本***更安全。***还有其他有价值的过滤器和验证标志可用于此功能。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-09T04:18:27.850

您需要定义`name`所有`input`类型的属性。

```
<input type="text" placeholder="Name" class="full" required name="name" id="name" /> 
```

`name`属性值与 相关`$_POST`，定义后`name attribute`可以得到 的值`$_POST['name']`。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-09T04:18:53.043

您忘记`name attributes`为所有输入字段定义。

`name attribute`指定`<input>`元素的名称。

`name attribute`用于引用**JavaScript**中的元素，或**在提交表单后引用表单数据。**

```
<input type="text" placeholder="Name" name="name" class="full" required id="name" />
<input type="email" placeholder="Email" name="email" class="full" required id="email" />
<textarea id="message" cols="30" name="message" rows="10" class="full"></textarea> 
```

# erlang - receive...end 中元组中第二个参数的用途。陈述？

> ID：15307068
> 
> 赞同：0
> 
> 时间：2013-03-09T04:14:53.483
> 
> 标签：erlang, arguments, tuples

[本页](http://learnyousomeerlang.com/static/erlang/linkmon.erl)下面显示的片段说明了发送消息的使用，我无法理解的一件事是`judge(Pid, Band, Album) ->`函数调用的接收子句中的第二个参数 where `{Pid, Criticism} -> Criticism`？

变量的目的是什么`Criticism`？

这是片段：

```
start_critic() ->
   spawn(?MODULE, critic, []).

judge(Pid, Band, Album) ->
   Pid ! {self(), {Band, Album}},
    receive
     {Pid, Criticism} -> Criticism
    after 2000 ->
     timeout
end.

critic() ->
   receive
     {From, {"Rage Against the Turing Machine", "Unit Testify"}} ->
        From ! {self(), "They are great!"};
     {From, {"System of a Downtime", "Memoize"}} ->
        From ! {self(), "They're not Johnny Crash but they're good."};
     {From, {"Johnny Crash", "The Token Ring of Fire"}} ->
        From ! {self(), "Simply incredible."};
     {From, {_Band, _Album}} ->
        From ! {self(), "They are terrible!"}
end,
critic(). 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-09T05:27:06.593

这不是第二个参数，它只是接收到的消息的一部分。阅读有关模式匹配的信息，例如[这里](http://learnyousomeerlang.com/syntax-in-functions)或[这里](http://en.wikibooks.org/wiki/Erlang_Programming/Pattern_Matching)，因为它在 Erlang 中是一个非常重要的概念。

当某个具有 PID 的进程`P1`确实`From ! {self(), "Simply incredible."}`并且`From`是正在运行的进程的 PID 时`judge`，则`{P1, "Simply incredible."}`与模式匹配`{Pid, Criticism}`，因此`Pid`绑定到`P1`，并且`Criticism`绑定到`"Simply incredible."`。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-09T10:03:53.937

假设我们有一个`erlang:receive/0`函数可以选择邮箱中的*第一条消息并返回它。*然后我们可以重写`receive`如下*：

```
case erlang:receive() of
    {Pid, Criticism} ->
        Criticism
end. 
```

这里的要点是，`receive`表达式可以被认为是`case`从进程邮箱获取输入的变体。因此，我们可以使用模式匹配来分解消息，就像我们在`case`表达式中的任何其他术语一样。

当发送者使用 send( `!`) 操作符将消息传递给进程时，消息（任何 Erlang 术语）基本上被复制到进程邮箱中，可以使用`receive`.

*请注意，我们的想象`receive/0`没有提供跳过与所需模式不匹配的消息的工具，也没有提供超时。此外，如果消息不匹配任何 case 子句，则该过程将因`case_clause`错误而崩溃。这不是普通`receive`表达式的情况。

# ios - 什么会导致错误“-[UICollectionViewData layoutAttributesForItemAtIndexPath:] 中的断言失败”？

> ID：15307069
> 
> 赞同：4
> 
> 时间：2013-03-09T04:14:59.443
> 
> 标签：ios, uicollectionview

完整的断言消息是：

> -[UICollectionViewData layoutAttributesForItemAtIndexPath:], /SourceCache/UIKit_Sim/UIKit-2380.17/UICollectionViewData.m:485 中的断言失败

什么会导致此错误？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-09T04:14:59.443

不设置框架`UICollectionView`会导致此错误。

# python - 如何从 python 中重复的 protobuf 字段中删除项目？

> ID：15307079
> 
> 赞同：20
> 
> 时间：2013-03-09T04:16:34.120
> 
> 标签：python, protocol-buffers

我有一个包含重复字段的 protobuf 消息。我想删除列表中的一个项目，但如果不将重复字段中的所有项目复制到列表中，清除重复字段并重新填充它，我似乎找不到这样做的好方法。

在 C++ 中有一个`RemoveLast()`函数，但这似乎没有出现在 python API 中......

* * *

## 回答 #1

> 赞同：23
> 
> 时间：2013-03-09T07:17:19.290

如[文档](https://developers.google.com/protocol-buffers/docs/reference/python-generated)中所述，在 Protobuf 中包装重复字段的对象的行为类似于常规 Python 序列。因此，你应该能够简单地做

```
del foo.fields[index] 
```

例如，要删除最后一个元素，

```
del foo.fields[-1] 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-09T04:34:53.767

在 Python 中，可以通过以下方式从列表中删除元素：

```
list.remove(item_to_be_removed) 
```

或者

```
del list[index] 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-04-04T03:23:28.107

```
const google::protobuf::Descriptor  *descriptor = m_pMessage->GetDescriptor();
const google::protobuf::Reflection  *reflection = m_pMessage->GetReflection();
const google::protobuf::FieldDescriptor* field = descriptor->FindFieldByName("my_list_name");
if (i<list_size-1)
{
    reflection->SwapElements(m_pMessage, field, i, list_size-1);
}
reflection->RemoveLast(m_pMessage, field); 
```

# unix - 如何设置 TERM 环境变量

> ID：15307083
> 
> 赞同：0
> 
> 时间：2013-03-09T04:17:00.137
> 
> 标签：unix, emacs, environment-variables, term

我正在编写一个小 shell，我需要从中启动 emacs。但是，当我调用 emacs 命令时，我收到错误“请设置 TERM 环境变量，请参阅 tset”。现在，我尝试使用 tset 如下

```
tset xterm 
```

我还尝试`setenv()`在我的代码中使用系统调用，如下所示

```
setenv('TERM','xterm',0); 
```

但是，两次错误仍然再次出现。谷歌也不是很有帮助。有人可以解决这个问题吗？谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-09T05:32:20.707

根据我们在评论中的讨论以及这是 C 的事实，这一行是错误的：

```
setenv('TERM','xterm',0); 
```

您正在使用用于字符文字而不是字符串的单引号。许多编译器，如 gcc，实际上允许您包含多个字符作为扩展名。您应该使用字符串/双引号：

```
setenv("TERM","xterm",0); 
```

除非您使用明确包含环境的变体之一（如）`fork()`，否则进程的环境变量将被继承。`exec()``exec()``execve()`

# magento-1.7 - 仪表板终身销售额和收入显示不同的数字

> ID：15307085
> 
> 赞同：1
> 
> 时间：2013-03-09T04:17:21.027
> 
> 标签：magento-1.7, dashboard, revenue

我的仪表板有问题，终身销售额和收入显示不同的数字。我尝试通过以下代码显示终身销售额：

```
Mage::getResourceModel('reports/order_collection')->calculateSales()->load()->getFirstItem()->getLifetime(); 
```

并且它显示正确，与仪表板上的终身销售额相同。

所以我很困惑终身销售是错误的还是/收入是错误的。

有谁能够帮助我？？？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2014-06-16T10:23:26.170

我这样做了：转到系统→配置→销售→销售→仪表板并标记使用聚合数据（测试版）=“是”

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2015-04-23T06:22:09.127

我遇到了同样的问题，但必须将使用聚合数据设置为“否”才能修复它。

# php - 在同一页面上的不同代码段之间传递 PHP 变量

> ID：15307086
> 
> 赞同：1
> 
> 时间：2013-03-09T04:17:49.703
> 
> 标签：php, file-upload

我正在尝试为我的高级项目编写自定义归档脚本，但遇到了一些问题。我有两个问题：

1）我想让文件夹本身不是链接，而是在选择它们时用我选择的颜色突出显示。

2）一旦文件夹被突出显示，我想采用该选定文件夹的路径并将其保存到可从该页面上的任何位置访问的变量中。我将使用该路径作为我的 Dropbox 的上传目录，用于上传或手动上传。显示最新的突出显示目录是为了帮助用户了解他们在文件结构中的位置，并帮助我进行故障排除。下面是我的文件树的代码。

```
function ListFolder($path)
{
    //using the opendir function
    $dir_handle = @opendir($path) or die("Unable to open $path");

    //Leave only the lastest folder name
    $dirname = end(explode("/", $path));

    //display the target folder.
    echo "<li>";
    echo "<label for='folder1'>$dirname</label>  <input type='checkbox' id='folder1' />";

    echo "<ol>";
    while (false !== ($file = readdir($dir_handle))) 
    {
        if($file!="." && $file!="..")
        {
            if (is_dir($path."/".$file))
            {
                //Display a list of sub folders.
                ListFolder($path."/".$file);
            }
            else
            {
                //Display a list of files.
                echo "<li class='file'><a href='$path/$file'>$file</a></li>";
                echo "<li>";
                echo $path;

            }
        }
    }
    echo "</ol>\n";
    echo "</li>\n";

    //closing the directory
    closedir($dir_handle);
} 
```

如果有更简单的方法可以做到这一点，任何帮助将不胜感激。这是我第一次写这样的东西，我被难住了。

# c - 查找最大年龄时代码崩溃（编辑）

> ID：15307088
> 
> 赞同：0
> 
> 时间：2013-03-09T04:18:09.540
> 
> 标签：c, crash

好的，所以如果修复了它，我它像样的做了一些建议，我得到了同样的错误（我正在使用 codebloks btw），它的错误只是在没有给出原因的情况下崩溃。我遇到了第二个错误。在输入年龄后的 getinfo 函数中，它打印获取性别的语句，然后打印获取其他人姓名的语句而不让我输入（它似乎只是跳过了那部分

```
#include <stdio.h>
#include <string.h>
#include <stdlib.h>

void getinfo (char* nam[],int ag[], char gender[], int count){
 int y;
 for(y = 0; y < count; y++){
 nam[y] = malloc(30);
 printf ("What is the student's name?\t");
 scanf ("%s", &nam[y]);
 printf ("\nWhat is the students age?\t");
 scanf ("%d", &ag[y]);
 printf ("\nwhat is the students gender, M/F:\t");
 scanf ("%c", &gender[y]);
  }
 }

void findeldest (char* nam[],int ag[], char* gender[], int count){
 int largest = 0, y, eldest =0 ;
 for(y = 0; y < count; y++){
    if (ag[y] > eldest){
        largest = ag[y];
        eldest = y;
        }
    }
    printf ("The eldest student is:\t%s", nam[eldest]);
    printf ("\nGender:\t%c", gender[eldest]);
    printf ("\nWith an age of:\t%d", ag[eldest]);

}

int main (){
  int amount, y;
  printf("How many students are you admitting?\t");
  scanf ("%d", &amount);
  if (amount > 50){
  printf("Too many students!");
   }else{
   char *name[50];
   int age[50];
   char gender[50];
   getinfo(name, age, gender, amount);
   findeldest(name, age, gender, amount);
   system("pause");
  }
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-09T04:35:49.180

提供的代码不可编译，因此我们无法正确诊断问题。请使用可编译的测试用例更新您的帖子，该测试用例仅包含重现您的问题所需的基本要素。

```
if (ag[y] > eldest){
    largest = ag[y];
    eldest = y;
    } /* <--- Note the inconsistent indentation.
       *      Do you want us to read your code and help you?
       *      If so, please fix your indentation.
       */ 
```

应该是对年龄进行比较，然后将索引分配给年龄变量？老大在哪家店？索引，还是年龄？任你选择，并使其保持一致。也许使用更具描述性的标识符可能是一个更好的主意，例如“eldest_index”和“eldest_age”。这将提供内部文档，“eldest_index”是最老的人的数组索引，“eldest_age”是最老的人的年龄。看起来最大的商店已经老化，也许您的代码应该看起来更像：

```
if (ag[y] > largest){
    largest = ag[y];
    eldest = y;
} 
```

`printf ("\nGender:\t%c", gender[eldest]);`如果 eldest 存储年龄，而不是索引，那么这不会导致您的程序在什么时候崩溃`eldest >= 50`？我认为当你想出更好的标识符时，这个陈述会更有意义。此外，`gender[eldest]`is a `char *`， where`%c`告诉 printf 期望`int`a 具有字符值。

* * *

*编辑：如果您在使用 scanf 之前阅读*[了此 scanf 手册](http://pubs.opengroup.org/onlinepubs/009695399/functions/fscanf.html)，您就不会遇到第二个错误。事实上，在阅读它的文档之前使用 scanf**是**你的错误；请停下。

如果你放在`printf("The character entered for gender has an integer value of %d\n", (unsigned char) gender[y]);`之后`scanf ("%c", &gender[y]);`，你会得到什么价值？'\n' 是有效的性别吗？

...所以您已经解决了当用户在*整数*读取和*字符*读取之间按下回车键时发生的问题。伟大的！如果不阅读手册，您将遇到第三个问题。假设用户按下“M”或“F”，然后按回车。这将导致 'M' 或 'F' 从 stdin 读取`scanf ("%c", &gender[y]);`，但 '\n' 将保留在 stdin 上。这样做有什么影响？当循环重复时，您告诉 scanf 读取*但不包括下一个空白字符*（这是 '%s' 所指示的），您最终会得到一个空白名称！哎呀！

假设您希望用户在输入性别之前和之后按*Enter*`scanf ("%c", &gender[y]);` ，我建议更改为：

```
int c;
for (c = getchar(); c >= 0 && c != '\n'; c = getchar());  /* Discard the remainder of the line,
                                                           * so that it doesn't interfere with
                                                           * the gender input.
                                                           */
gender[y] = c;
for (c = getchar(); c >= 0 && c != '\n'; c = getchar());  /* Discard the remainder of the line,
                                                           * so that it doesn't interfere with
                                                           * the next scanf call.
                                                           */ 
```

...并且不要忘记*仔细*阅读该 scanf 手册！

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-09T04:42:42.577

您没有发布 getinfo 函数的源代码，所以我们在这里能做的最好的就是猜测。我首先要看的是 getinfo，当它填充“nam”和“gender”参数时。您很可能会为这些使用堆栈本地字符串。一旦“getinfo”函数返回，这些字符串就不再存在。但是，指向堆栈上这些位置的指针仍然存在，并且每当 findeldest 尝试在 printf 中使用这些指针时，它都会从堆栈中打印出垃圾。

如果您提供您的“getinfo”实现，这将更容易。这是我的实现

```
#include <stdio.h>
#include <string.h>
#include <stdlib.h>

void findeldest (char* nam[],int ag[], char* gender[], int count){
  int largest = 0, y, eldest =0 ;
  for(y = 0; y < count; y++){
    if (ag[y] > eldest){
      largest = ag[y];
      eldest = y;
    }
  }
  printf ("The eldest student is:\t%s", nam[eldest]);
  printf ("\nGender:\t%s", gender[eldest]);
  printf ("\nWith an age of:\t%d", ag[eldest]);

}

void getinfo(char* nam[],int ag[], char* gender[], int count)
{
    static const char * const MALE = "male";
    static const char * const FEMALE = "female";

    static const char * const BRIAN = "brian";
    static const char * const SUE = "sue";
    static const char * const DAVE = "dave";
    static const char * const APRIL ="april";

    for(int i = 0 ; i < count ; ++i)
    {
        ag[i] = i;

        switch(i%4)
        {
            case 0:
                nam[i] = BRIAN;
                break;
            case 1:
                nam[i] = SUE;
                break;
            case 2:
                nam[i] = DAVE;
                break;
            case 3:
                nam[i] = APRIL; 
                break;

        }

        switch(i%2)
        {
            case 0:
                gender[i] = MALE;
                break;
            case 1:
                gender[i] = FEMALE;
                break;
        }

    }
    return;
}

int main (){
  int amount, y;
  printf("How many students are you admitting?\t");
  scanf ("%d", &amount);
  if (amount > 50){
    printf("Too many students!");
  } else {
    char *name[50];
    int age[50];
    char *gender[50];
    getinfo(name, age, gender, amount);
    findeldest(name, age, gender, amount);
    system("pause");
  }
} 
```

这对我来说可以。请注意对 findeldest 中第二个“printf”语句的更正。当您的意思是 %s （以空字符结尾的字符串）时，您使用的是 %c （单个字符）。

此外，您没有使用符合 C90 的代码。发布时，您应该指定正在使用的编译器以及编译所需的选项（如果有的话）。它似乎接近有效的 C99 代码。我收到一些关于在我的“getinfo”实现中滥用 const 的编译器警告。

# ms-access - 从 VB6 应用程序运行时在 Access 数据库中创建/附加模块

> ID：15307092
> 
> 赞同：0
> 
> 时间：2013-03-09T04:18:37.900
> 
> 标签：ms-access, vb6, module

在 Access 内部，我可以进入 Modules 并创建一个新模块并将一个函数放入其中。

如何在运行时从 VB6 应用程序执行此操作？

我已经尝试过 CREATE FUNCTION .. CREATE PROCEDURE .. 但我也可能有一个方面实际上是一个 Access 2000 数据库，它可能不支持它。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-09T08:24:05.073

我只能在 Access 97 中找到执行此操作的[代码](http://support.microsoft.com/default.aspx?scid=kb;EN-US;175218)

```
Sub CreateNewModule()

  Dim MyMod As Module
  Dim MyStr As String

  DoCmd.RunCommand acCmdNewObjectModule  ' Create new module.

  MyStr = "Sub Test2()" & vbCrLf         ' Create text for the module.

  MyStr = MyStr & Space$(4) & "MsgBox " & Chr$(34) & "test2" & _
  Chr$(34) & vbCrLf

  MyStr = MyStr & "End Sub"

  Set MyMod = Modules("Module3")         ' Give module a name.

  MyMod.InsertText MyStr                 ' Insert text into the module.

  DoCmd.Close acModule, "Module3", acSaveYes   ' Close and save module.

End Sub 
```

就从 VB6 执行此操作而言，您需要使用自动化，然后像`DoCmd`并且`Modules()`应该可用的功能。

例如，像这样（未经测试）的东西应该让你开始。

```
Dim oApp As Object

Set oApp = CreateObject("Access.Application")

oApp.OpenCurrentDatabase "C:\MyDatabase.mdb"

oApp.DoCmd.RunCommand acCmdNewObjectModule

...
... (Rest of code to automate Access here)
...

Set oApp = Nothing 
```

# javascript - 在 JQuery 中复制 CSS3 动画

> ID：15307100
> 
> 赞同：0
> 
> 时间：2013-03-09T04:19:54.623
> 
> 标签：javascript, jquery, css, animation

我正在尝试使用 jQuery 复制/模拟使用 CSS3 动画制作的动画/效果。

当使用 Modernizr / Yep-Nope 不支持 CSS3 动画时，我计划使用 jQuery 版本作为后备。

这是 CSS3 动画的运行示例：[https ://dl.dropbox.com/u/270523/help/fold.html](https://dl.dropbox.com/u/270523/help/fold.html)

解释它的最好方法是在奇数点击时翻转，在偶数点击时翻转。

点击是指点击触发器、#trigger，奇数点击是点击 1、3、5 等，偶数点击是第二、第四、第六等点击。

现在，我将 CSS 动画应用于类，并在单击触发器时切换类，因此如果可以将翻转动画应用于一个类，而将翻转动画应用于另一个类，那么这将在以下环境中完美运行我已经设置好了。

我将不胜感激所有和任何帮助，我只是不知道如何制作如此复杂的动画——好吧，它不一定很复杂，我不想吓跑任何人，它是一个 3-d 变换本质上，在我看来，这比幻灯片或褪色更复杂。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-09T04:34:39.897

jQuery（和 javascript）在幕后用 CSS 做动画，所以如果 CSS3 因为它不是跨浏览器而被淘汰，那么它也将在 jQuery 中。如果您询问是否可以使用 CSS2 和 javascript 复制此效果，CSS2 没有实现此效果所需的复杂性。在没有 Flash/其他插件（如画布等）的情况下，我能想到的唯一其他方法与 CSS3 一样跨浏览器不兼容。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-09T04:44:30.017

您可以尝试使用[jQuery 3D Transform 插件](https://github.com/eenox/jQuery-3D-transform)。它在不使用 CSS3 过渡的情况下为 CSS3 3D 变换属性设置动画。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-09T04:35:06.090

所以你只想使用 jquery 复制那个 css 效果？如果我认为你想要的是正确的`fadeOut`，你所要做的就是使用一些魔法：`fadeIn`

[http://jsfiddle.net/dfVvp/](http://jsfiddle.net/dfVvp/)

# c++ - 如何在 Qt 中更有效地将标志传递给这个函数？

> ID：15307102
> 
> 赞同：0
> 
> 时间：2013-03-09T04:20:15.017
> 
> 标签：c++, qt

我希望能够执行文本搜索，用户可以在执行搜索之前选择要设置的[标志](http://qt-project.org/doc/qt-4.8/qtextdocument.html#FindFlag-enum)。目前，我有一堆 if/else 语句，它们根据设置的标志执行不同的搜索。有没有办法简化这个？

这是我到目前为止所拥有的：

```
void FindDialog::on_btn_find_clicked()
{
    const QString find_term = ui->le_find->text();
    bool found;
    getConditions();

    //direction: true -> go backward, false -> go forward
    if(dir)
    {
        //area: true -> description area, false -> example area
        if(area)
            found = te_desc_ptr->find(find_term, QTextDocument::FindBackward);
        else
            found = te_code_ptr->find(find_term, QTextDocument::FindBackward);
    } else {
        if(area)
            found = te_desc_ptr->find(find_term);
        else
            found = te_code_ptr->find(find_term);
    }

    this->close();

}

void FindDialog::getConditions()
{
    //check conditions
    //Area: True = Description, False = Example
    //Direction: True = Up, False = Down
    area = ui->rbtn_desc->isChecked();
    dir = ui->rbtn_up->isChecked();
    case_sen = ui->cbx_case->isChecked();
    whole = ui->cbx_whole->isChecked();
    regx = ui->cbx_reg->isChecked();
} 
```

该代码查看用户是否选择了一个复选框并选择执行哪种搜索。我真的很想简化代码，以便减少 find() 语句。显然，如果我添加更多选项，那么将会有更多 if/else 语句。我该如何改变这一点？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-09T04:26:20.037

`if`您可以将树折叠成这样：

```
auto textArea = area ? te_desc_ptr : te_code_ptr;
auto findFlags = dir ? QTextDocument::FindBackward : QTextDocument::FindFlags(0);
textArea->find(find_term, findFlags); 
```

我也会考虑重命名`area`and `dir`，因为仅仅从他们的名字来看，它们的含义并不明显。

# php - 正则表达式排除学术头衔

> ID：15307109
> 
> 赞同：4
> 
> 时间：2013-03-09T04:21:55.633
> 
> 标签：php, regex, text

我想将段落字符串拆分为句子数组。当然，我使用带有字符点 (.) 的正则表达式将段落拆分为句子。问题是句子中的学术名称缩写，每个缩写都使用点（.）。所以我的正则表达式完全错误地分割段落。

这是段落的示例：

> 同时茂物农业大学校长Herry Suhardiyanto教授在致辞中要求研究生继续学习，按时完成学业。出席一般观众的有茂物农业大学研究生院副院长德迪·朱萨迪博士，茂物农业大学研究生院博士生项目秘书，Prof.Dr.Dr. 马里明。

仅使用点 (.) 作为正则表达式，我得到：

```
Array (
[0] => Meanwhile Rector of Bogor Agricultural University, Prof
[1] => Dr
[2] => Herry Suhardiyanto, in his remarks requested that the graduate students should keep on studying and will finalize their studies on time
[3] => ...
) 
```

这实际上是我想要的：

```
Array (
[0] => Meanwhile Rector of Bogor Agricultural University, Prof. Dr. Herry Suhardiyanto, in his remarks requested that the graduate students should keep on studying and will finalize their studies on time
[1] => Present in  that general audience were  the Deputy Dean of the Graduate School of Bogor Agricultural University, Dr.Dedi Jusadi, Secretary of the Graduate School for Doctoral Program of Bogor Agricultural University, Prof.Dr. Marimin
) 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-09T04:51:03.403

您可以使用负面的 Lookbehinds：

`((?<!Prof)(?<!Dr)(?<!Mr)(?<!Mrs)(?<!Ms))\.`如果需要，添加更多

在这里解释演示：[http ://regex101.com/r/xQ3xF9](http://regex101.com/r/xQ3xF9)

代码可能如下所示：

```
$text="Meanwhile Rector of Bogor Agricultural University, Prof. Dr. Herry Suhardiyanto, in his remarks about Mr. John requested that the graduate students should keep on studying and will finalize their studies on time. Present in that general audience were Mrs. Peterson of the Graduate School of Bogor Agricultural University, Dr.Dedi Jusadi, Secretary of the Graduate School for Doctoral Program of Bogor Agricultural University, Prof.Dr. Marimin.";

$titles=array('(?<!Prof)', '(?<!Dr)', '(?<!Mr)', '(?<!Mrs)', '(?<!Ms)');
$sentences=preg_split('/('.implode('',$titles).')\./',$text);
print_r($sentences); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-09T05:05:57.347

这似乎可行，但与严格的 RegEx 相比，这是一个新的 PHP 函数 -

```
$begin = array( 0=>'Meanwhile in geography,',
            1=>'Dr',
            2=>'Henry Suhardiyanto, in his remarks, stated that ',
            3=>'Dr',
            4=>'Prof',
            5=>'Jedi Dusadi was another ',
            6=>'Prof');

$exclusions = array("Dr", "Prof", "Mr", "Mrs");

foreach ($begin as $pos => $sentence) {
if (in_array($sentence, $exclusions)) {
    $begin[$pos+1] = $sentence . ". " . $begin[$pos+1];
    unset($begin[$pos]);
    array_values($begin);
    }
} 
```

# emacs - Emacs CEDET 语义标签折叠

> ID：15307113
> 
> 赞同：4
> 
> 时间：2013-03-09T04:22:42.163
> 
> 标签：emacs, lisp, elisp, emacs24, cedet

我希望每次打开 .cpp 文件时，语义标签折叠都会被激活。我正在使用最新版本的 cedet（正在加载 cedet-devel-load.el）。我有

```
(semantic-mode 1)
(require 'semantic/ia)
(require 'semantic/bovine/gcc)
(load-file "path/to/semantic/tag/folding/semantic-tag-folding.el")
(require 'semantic-tag-folding) 
```

我加了一个钩子

```
(add-hook 'c-mode-common-hook 'setupcpp) 
```

而在'setupcpp我只是有

```
(defun setupcpp ()
(interactive)
(semantic-tag-folding-mode t)) 
```

此后在我的 .emacs 中没有发生与 cedet/semantic 相关的任何事情。事实上，我可以将它作为我的 .emacs 的唯一内容。

它不起作用。打开 .cpp 文件时，我收到消息文件模式规范错误：（错误“缓冲区 foo.cpp 无法按语义折叠”）。

奇怪的是，如果文件打开后，我执行 Mx semantic-tag-folding-mode，它就可以工作了！我只是迷路了。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-05-12T12:14:54.207

我得到了完全相同的错误，使用 Emacs 24.3 和最新的 cedet bzr 版本。

我的解决方案如下：每当装饰某些东西时，折叠模式也将被启用。

```
(load-library "~/emacs/cedet/cedet-bzr/trunk/cedet-devel-load")
(load-library "contrib/semantic-tag-folding.el")

(defun do-after-decorate () (semantic-tag-folding-mode t) )
(add-hook 'semantic-decoration-mode-hook 'do-after-decorate) 
;; ... 
(semantic-load-enable-excessive-code-helpers) ; also starts the decorate-mode when useful. 
```

为我工作。

# algorithm - 查找树中节点集之间的最长路径

> ID：15307116
> 
> 赞同：1
> 
> 时间：2013-03-09T04:23:06.450
> 
> 标签：algorithm, data-structures, tree, longest-path

最近遇到一个编程问题。

给定一棵树，可以是非二元的，可以是单链（或线性），具有 N 个节点。

输入将是一组 K 节点，表示为 a1,a2....ak。我想找到从这些 K 节点之一开始并在其中一个 K 节点（不同于起始节点）处结束的最长简单路径。取决于N或K的对数算法应该满足运行时间要求（例如：KlogK，KlogN）如果需要的话应该在我想要的时间限制内。

谢谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-09T05:10:54.717

也许您可以尝试这种方法-

1.  从任何节点运行 DFS 以找到最远的叶节点，我们称之为节点 X。
2.  运行另一个 DFS 以查找距离 X 最远的节点。
3.  您在步骤 2 中找到的路径是树中最长的路径。

这应该适用于所有树，而不仅仅是二叉树。

# objective-c - 我应该在哪里存储 NSUserDefaults 以便更新它们？

> ID：15307119
> 
> 赞同：0
> 
> 时间：2013-03-09T04:23:23.423
> 
> 标签：objective-c, ios6, nsuserdefaults, appdelegate

我知道关于存储 userDefaults 的位置存在一些问题，以便所有人都可以使用它们。目前我在 AppDelegate 中有我的，它正在工作。但是，我现在想根据用户偏好更新默认设置。

但是，当用户退出应用程序并再次启动它时，它只是再次从头开始创建默认值。

```
#import "AppDelegate.h"

@implementation AppDelegate

- (BOOL)application:(UIApplication *)application didFinishLaunchingWithOptions:(NSDictionary *)launchOptions
{
    // Override point for customization after application launch.

    NSUserDefaults *sharedPref = [NSUserDefaults standardUserDefaults];
    [sharedPref setObject:@"Washington, DC" forKey:@"defaultLocation"];
    //  

    return YES;
} 
```

显然，每次应用程序打开时都会设置，从而使用户的选择过时。

**如何设置默认值，然后让用户更改它而不在应用程序启动时被覆盖？**

谢谢

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-09T04:35:30.463

你应该使用 registerDefaults: 为此

```
- (BOOL)application:(UIApplication *)application didFinishLaunchingWithOptions:(NSDictionary *)launchOptions {
 // ...
    [NSUserDefaults standardUserDefaults] registerDefaults:@{@"defaultLocation" : @"Washington, DC"}];
// ...
    return YES;
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-09T04:28:50.377

以下代码运行检查应用程序是否已启动。它旨在取代`-registerDefaults:`.

```
- (BOOL)application:(UIApplication *)application didFinishLaunchingWithOptions:(NSDictionary *)launchOptions
{
    if(![[NSUserDefaults standardUserDefaults] boolForKey:@"setupApp"])
        {
            NSUserDefaults *defaults = [NSUserDefaults standardUserDefaults];
            [defaults setBool:YES forKey:@"setupApp"];
            [defaults setObject:@"Washington, DC" forKey:@"defaultLocation"];

            [defaults synchronize];
        }
    return YES;
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-09T04:31:57.290

`NSUserDefaults`是一个可供整个应用程序使用的单例。您可以随时通过以下方式调用它：

```
[NSUserDefaults standardUserDefaults] 
```

用户不能直接与之交互，您必须收集数据然后存储它。要设置一个值：

```
[[NSUserDefaults standardUserDefaults] setObject:@"Some Value" forKey:@"MyKey"];
[[NSUserDefaults standardUserDefaults] synchronize];  // to save 
```

用户默认设置将在应用程序启动之间保持不变。

您必须小心设置对象，用户默认值中只能设置属性列表类型。

[参考](https://developer.apple.com/library/mac/#documentation/Cocoa/Reference/Foundation/Classes/NSUserDefaults_Class/Reference/Reference.html)

# scala - 调度和库依赖

> ID：15307123
> 
> 赞同：1
> 
> 时间：2013-03-09T04:23:58.597
> 
> 标签：scala, sbt, scala-dispatch

嗨，我作为最后的手段来到这里，但我束手无策。我正在尝试学习调度，以便可以在 scala 中完成我的下一个 Web 项目，但我什至无法通过教程。这就是我想要做的。

```
import dispatch._
val h = new Http
val req = url("http://www.scala-lang.org/")
val handler = req >>> System.out 
```

在 sbt 控制台中，前 3 行正常工作，但我在最后一个错误值 >>> 不是 com.ning.http.client.RequestBuilder@6eb7546d 的成员。老实说，谷歌搜索这个错误并不那么有洞察力。尝试将其放入 .scala 文件并运行它时，它在 import dispatch._ 行上出错。老实说，我不知道我在这里做错了什么，现在会为了一些帮助而杀人。这不可能像看起来那么难。我还安装了 sbt 并按照[调度主页上](http://dispatch.databinder.net/Dispatch.html)的这些说明进行操作：

```
echo 'libraryDependencies += 
  "net.databinder.dispatch" %% "dispatch-core" % "0.9.5"' > build.sbt
sbt console 
```

我还有一个 build.sbt 文件夹，其中包含以下内容

```
libraryDependencies +=
"net.databinder.dispatch" %% "dispatch-core" % "0.9.5" 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-09T08:05:07.990

我最好的选择是，您指的是一些旧版的库的旧教程。

版本 0.9.x 完全修改为 wrt 0.8.x

我建议您查看[调度页面](http://dispatch.databinder.net/Dispatch.html)并按照那里提供的简单步骤进行操作。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-09T12:16:51.737

如果您对 Dispatch 束手无策，我也是。所以这是我的替代[**Bee-Client**](http://www.bigbeeconsultants.co.uk/bee-client) HTTP 客户端 api 的无耻插件：

```
val httpClient = new HttpClient
val response: Response = httpClient.get("http://www.google.com/")
println(response.status)
println(response.body.asString) 
```

它非常简单且阻塞。如果您想要非阻塞请求，只需将调用包装在期货中。

# android - Android如何更新下一个标签的值？

> ID：15307124
> 
> 赞同：0
> 
> 时间：2013-03-09T04:23:58.820
> 
> 标签：android, android-viewpager, sharedpreferences, fragment, android-fragmentactivity

我有 2`Fragments` `FragmentA`和`FragmentB`. 使用这两个，我创建了一个`FragmentActivity`以 Tab 格式显示 2 `fragments`，Tab A 和 B。`FragmentStatePagerAdapter`并`ViewPager`已用于创建 Tab `view`。选项卡 A 具有 a`EditText`和 a `Button`。Tab B 只有一个 TextView。用户将在 Tab A 中输入值，`EditText`首先`button`单击它将保存数据，`SharedPreferences`然后它将转到 Tab B 并显示 Tab A 的值`EditText`。我已将数据保存在其中，`SharePrefereces`但仍无法在选项卡 B 中显示值。

我的标签 A：

```
confirmButton.setOnClickListener(new View.OnClickListener() {
                public void onClick(View view) {
session.setValue(mValue.getText().toString());
ViewPager mViewPager = (ViewPager) getActivity().findViewById(R.id.pager);
mViewPager.setCurrentItem(1);
                }
            }); 
```

我的标签 B：

```
mValueFromTabA.setText(session.getValue()); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-09T05:53:54.133

取一个字符串并将 Getter 和 setter 添加到您的`FragmentActivity`类中。

像...

```
String HistoryFragment;

public String getHistoryFragment() {
    return HistoryFragment;
}

public void setHistoryFragment(String historyFragment) {
    HistoryFragment = historyFragment;
} 
```

然后在我们可以通过调用从当前片段访问另一个片段之后`findFragmentByTag(<tag of target fragment>)`。

有关更多信息，请查看[ViewPager 中片段之间的通信](http://android-er.blogspot.in/2012/06/communication-between-fragments-in.html)链接。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-09T05:11:10.880

这意味着您对用户不可见的片段仍保留在内存中，因此重新显示时不会调用它们的 onCreate 方法。您可以通过将 ViewPager 的离屏页面限制设置为 0 来强制它们在切换页面时被踢出内存。

```
mViewPager.setOffscreenPageLimit(0); 
```

# java - Spring + Hibernate 初始化错误：找不到类 [ ]

> ID：15307125
> 
> 赞同：2
> 
> 时间：2013-03-09T04:23:58.840
> 
> 标签：java, spring, hibernate, entitymanager

今晚我发疯了一段时间，试图用 java 中的 Spring MVC 和 Hibernate 运行一个简单的项目。基本上我从一个错误跌跌撞撞到另一个错误，但它们都是由于缺少 jar 文件这一事实，我立即解决了将依赖项添加到 Maven 中的问题。这一直有效，直到出现此错误：

```
org.springframework.beans.factory.BeanCreationException: 
    Error creating bean with name 'emf' defined in ServletContext resource 
    [/WEB-INF/spring/root-context.xml]: Invocation of init method failed; 
    nested exception is java.lang.IllegalArgumentException: Cannot find class [Hibernate] 
```

现在，奇怪的是找不到该类，并且异常是 Illegal Argument 而不是 ClassNotFound 或类似的东西。

我在 servlet-context 中设置了这个

```
<context:load-time-weaver/> 
```

根上下文是：

```
<bean
    class="org.springframework.orm.jpa.support.PersistenceAnnotationBeanPostProcessor" />

<bean id="emf"
    class="org.springframework.orm.jpa.LocalContainerEntityManagerFactoryBean">
</bean>

<bean id="taskRepo" class="com.leandro.dao.GenericRepository">
    <constructor-arg>
        <value>com.leandro.models.Task</value>
    </constructor-arg>
</bean> 
```

显然无法生成 emf bean，应在此行将其注入通用存储库：

```
@PersistenceContext
private EntityManager em;
public void setEntityManager(EntityManager em) {
    this.em = em;
} 
```

我花了整整一夜，有人知道我可能会错过什么吗？

更新：根据要求，这是持久性 xml：

```
<?xml version="1.0" encoding="UTF-8"?>
<persistence version="2.0" xmlns="http://java.sun.com/xml/ns/persistence" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xsi:schemaLocation="http://java.sun.com/xml/ns/persistence http://java.sun.com/xml/ns/persistence/persistence_2_0.xsd">
    <persistence-unit name="testmvc" transaction-type="RESOURCE_LOCAL">
        <provider>Hibernate</provider>
        <class>com.leandro.models.Task</class>
        <properties>
            <property name="hibernate.connection.username" value="***"/>
            <property name="hibernate.connection.password" value="***"/>
            <property name="hibernate.connection.url" value="jdbc:sqlserver://localhost\SQLEXPRESS;databaseName=CoveyTMM"/>
            <property name="hibernate.connection.driver_class" value="com.microsoft.sqlserver.jdbc.SQLServerDriver"/>
            <property name="javax.persistence.jdbc.url" value="jdbc:sqlserver://localhost\SQLEXPRESS;databaseName=CoveyTMM"/>
            <property name="javax.persistence.jdbc.user" value="***"/>
            <property name="javax.persistence.jdbc.password" value="***"/>
            <property name="javax.persistence.jdbc.driver" value="com.microsoft.sqlserver.jdbc.SQLServerDriver"/>
        </properties>
    </persistence-unit>
</persistence> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-09T11:25:35.060

正如@sgp15 所建议的，问题出在持久性文件中。一旦我将它添加到问题中，我就注意到有问题。我将指定提供者的行更改为：

```
<provider>org.hibernate.ejb.HibernatePersistence</provider> 
```

春天能够成功。

PS：作为奖励，我注意到还有其他错误，其中一个是由根上下文引起的。我只是删除了这一行：`<context:load-time-weaver/>`因为我正在使用 Hibernate 驱动的 JPA 部署在 tomcat 上：[参考](https://stackoverflow.com/questions/2536292/how-to-run-spring-3-0-petclinic-in-tomcat-with-hibernate-backed-jpa)

# paypal - PayPal PayFlow Test 订阅过期

> ID：15307126
> 
> 赞同：0
> 
> 时间：2013-03-09T04:24:06.420
> 
> 标签：paypal, payflowpro

我对使用 PayPal 的 PayFlow Pro API 还是很陌生。我想在一个系统上检查订阅状态并根据返回值采取行动。我的问题是您不能设置无效号码或过去的到期日期来运行检查。

有谁知道强制帐户显示供应商不活动、过期或太多失败的方法。

我不敢相信他们没有一个很好的测试系统来显示他们的 pdf 文件中提到的有限结果。

如果没有办法强制他们在信用卡交易失败时帐户会收到什么设置？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-09T16:14:44.200

设置配置文件并成功计费后，您可以更新配置文件并使用错误的信用卡号来生成失败。

# java - 在 PRNG 中使用种子

> ID：15307127
> 
> 赞同：1
> 
> 时间：2013-03-09T04:24:08.127
> 
> 标签：java, random, cryptography

在 Java 中，我使用“SHA1PNRG”生成伪随机数。我不知道这个数字生成的内部工作。什么种子值最适合安全数字生成？我应该使用较小的数字作为种子还是使用较大的值作为种子？请善意给予适当的指导。

我的代码：

```
SecureRandom sr= SecureRandom.getInstance("SHA1PRNG");
sr.setSeed(seed); 
```

我`sr.nextInt(int)`用于获取下一个值，并且`seed`是一个长数据类型变量。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-09T04:52:07.803

种子使用的数字*无关紧要*。重要的是每次启动程序时使用*不同的种子编号。*

PRNG 或伪随机数生成器通过对种子执行计算来工作。它使用该计算的输出作为下一个随机数的种子，依此类推。（这是一种简化，但它为您提供了正确的想法。）因此，如果您使用相同的种子，PRNG 将产生相同的数字序列。

典型的种子来自系统时间，或者来自用户的按键或鼠标移动，或者每次程序运行时可能不同的其他值。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-09T06:30:01.520

当使用基于 SHA-1 的 Hash_DRBG（确定性随机位生成器）时，[NIST SP800-90A建议种子长度为 440 位（即 55 个字节）。](http://csrc.nist.gov/publications/nistpubs/800-90A/SP800-90A.pdf)（那里也描述了该算法）。

但这不仅与种子的长度有关，还与它的熵（“随机性”）有关。如果你用一个 440 位的零字符串初始化 DRBG，尽管它的长度很长，但这将是一个糟糕的选择。

播种的目的是配置生成器的初始状态，这样攻击者将无法预测随机数的序列。请记住，所有过程都是确定性的，那么一旦有人知道生成器的状态，他就能够从那时起重现随机序列。

您可以使用 方法计算种子，该方法`SecureRandom.generateSeed`依赖于当前操作系统提供的熵源（例如，[OpenJDK 的 SeedGenerator](http://hg.openjdk.java.net/jdk6/jdk6/jdk/file/2d585507a41b/src/share/classes/sun/security/provider/SeedGenerator.java)在 Linux 上使用 /dev/random，在 Windows 上使用 MS CryptoAPI）。

```
 SecureRandom sr= SecureRandom.getInstance("SHA1PRNG");     
 byte seed[] = random.generateSeed(55);
 sr.setSeed(seed); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-27T06:50:28.453

Maximin，如果您担心人们无法猜测种子（从而预测您的 PRNG 的输出），您应该使用实际上是随机的种子。例如，使用程序运行的时间是不安全的。

您不应该通过直接调用来绕过内部播种机制`setSeed`。如果在调用 之前调用`java.security.SecureRandom.setSeed(long)`or ，则绕过内部种子机制，仅使用提供的种子来生成随机数。`java.security.SecureRandom.setSeed(byte[])``java.security.SecureRandom.nextBytes(byte[])`

请参阅 Amit Thesi 几年前关于此主题的有用博客文章，网址为[http://www.cigital.com/justice-league-blog/2009/08/14/proper-use-of-javas-securerandom/](http://www.cigital.com/justice-league-blog/2009/08/14/proper-use-of-javas-securerandom/)

# ruby-on-rails - 迁移后stll没有用户表

> ID：15307128
> 
> 赞同：0
> 
> 时间：2013-03-09T04:24:20.500
> 
> 标签：ruby-on-rails, activerecord, sinatra

我正在使用 Ruby 和 Rails 的面向服务的设计一书。在第一章中，它使用活动记录创建了一个带有 Sinatra 应用程序的服务。我创建了活动记录迁移（001_create_users.rb，见下文），并运行 rake 文件来迁移它（使用命令`rake db:migrate`），它给我的输出似乎表明用户表已创建（见这篇文章的底部运行 rake db:migrate 后的输出）。但是，当我运行规范（`rspec spec/service_spec.rb`见下文）时，它给了我一个错误，说它找不到用户表。

```
table_structure': Could not find table 'users' (ActiveRecord::StatementInvalid) 
```

你能告诉我我可能做错了什么吗？本书第一章的源代码也可以在这里找到[https://github.com/pauldix/service-oriented-design-with-ruby/tree/master/chapter_01](https://github.com/pauldix/service-oriented-design-with-ruby/tree/master/chapter_01)

**规范/service_spec.rb**

```
RSpec.configure do |conf|
  conf.include Rack::Test::Methods
end

def app
  Sinatra::Application
end

describe "service" do
  before(:each) do
    User.delete_all
  end

  describe "GET on /api/v1/users/:id" do
    before(:each) do
      User.create(
        :name => "paul",
        :email => "paul@pauldix.net",
        :password => "strongpass",
        :bio => "rubyist")
    end

    it "should return a user by name" do
      get '/api/v1/users/paul'
      last_response.should be_ok
      attributes = JSON.parse(last_response.body)["user"]
      attributes["name"].should == "paul"
    end 
```

**/db/migrate/001_create_users.rb**

```
class CreateUsers < ActiveRecord::Migration
  def self.up
    create_table :users do |t|
      t.string :name
      t.string :email
      t.string :password
      t.string :bio

      t.timestamps
    end
  end

  def self.down
    drop_table :users
  end
end 
```

耙文件

```
require 'rubygems'
require 'active_record'
require 'yaml'
require 'logger'

desc "Load the environment"
task :environment do
  env = ENV["SINATRA_ENV"] || "development"
  databases = YAML.load_file("config/database.yml")
  ActiveRecord::Base.establish_connection(databases[env])
end

namespace :db do
  desc "Migrate the database"
  task(:migrate => :environment) do
    ActiveRecord::Base.logger = Logger.new(STDOUT)
    ActiveRecord::Migration.verbose = true
    ActiveRecord::Migrator.migrate("db/migrate")
  end
end 
```

**运行 rake db:migrate**

```
D, [2013-03-08T20:11:55.490937 #3824] DEBUG -- :    (0.2ms)  select sqlite_version(*)
D, [2013-03-08T20:11:55.493906 #3824] DEBUG -- :    (2.1ms)  CREATE TABLE "schema_migrations" ("version" varchar(255) NOT NULL) 
D, [2013-03-08T20:11:55.497176 #3824] DEBUG -- :    (2.6ms)  CREATE UNIQUE INDEX "unique_schema_migrations" ON "schema_migrations" ("version")
D, [2013-03-08T20:11:55.544128 #3824] DEBUG -- :    (44.9ms)  SELECT "schema_migrations"."version" FROM "schema_migrations" 
I, [2013-03-08T20:11:55.544615 #3824]  INFO -- : Migrating to CreateUsers (1)
D, [2013-03-08T20:11:55.545263 #3824] DEBUG -- :    (0.1ms)  begin transaction
==  CreateUsers: migrating ====================================================
-- create_table(:users)
D, [2013-03-08T20:11:55.570509 #3824] DEBUG -- :    (0.6ms)  CREATE TABLE "users" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "name" varchar(255), "email" varchar(255), "password" varchar(255), "bio" varchar(255), "created_at" datetime NOT NULL, "updated_at" datetime NOT NULL) 
   -> 0.0018s
==  CreateUsers: migrated (0.0019s) ===========================================

D, [2013-03-08T20:11:55.571113 #3824] DEBUG -- :    (0.1ms)  INSERT INTO "schema_migrations" ("version") VALUES ('1')
D, [2013-03-08T20:11:55.576187 #3824] DEBUG -- :    (4.8ms)  commit transaction
michael$ rspec spec/service_spec.rb
D, [2013-03-08T20:12:57.812685 #3854] DEBUG -- : env: test
D, [2013-03-08T20:12:57.910829 #3854] DEBUG -- : db/test.sqlite3 database connection established... 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-09T05:18:56.487

`migrate`任务调用作为先决条件，默认情况下将`environment`环境设置为“开发”，除非有一个 ENV 变量说明其他内容。

发生的情况是您的开发数据库被迁移，而不是您的测试数据库。

就像你的书上说的，稍后，打电话

```
rake db:migrate SINATRA_ENV=test 
```

这将是您正在迁移的*测试数据库。*

# html - bootstrap 底部固定，但如果容器高度大于浏览器，则在末尾对齐

> ID：15307131
> 
> 赞同：1
> 
> 时间：2013-03-09T04:25:00.957
> 
> 标签：html, css, twitter-bootstrap

我知道引导程序中有一个底部固定类，用于在底部对齐 div。

但是如果我想要这样的东西怎么办：

1.  场景：带有页面内容的容器很小（不适合浏览器窗口的整个高度）-> 在底部对齐 div。

    *   示例： http: [//matthewjamestaylor.com/blog/bottom-footer-demo.htm](http://matthewjamestaylor.com/blog/bottom-footer-demo.htm)
2.  场景：页面内容的容器大于浏览器高度。我想在容器 div 之后对齐 div。（不固定在底部。它更固定在 html 页面的底部）

    *   示例： http: [//www.productivedreams.com/](http://www.productivedreams.com/)

是否有引导程序的内置功能来执行此操作？

# android - 推送通知提供商如何通过 optin 推送给用户？

> ID：15307132
> 
> 赞同：0
> 
> 时间：2013-03-09T04:25:19.487
> 
> 标签：android, ios, push-notification, apple-push-notifications, google-cloud-messaging

例如，城市飞艇 [1]，他们声称

```
Reach each all users, not just opt-ins.
Since Rich Push messages are stored in an app’s Message Center, 
they can be delivered to all app users, not just those who have 
opted-in for push messaging. 
```

任何人都可以提供更多提示吗？有什么缺点？如果这种方法有效，那么为什么还需要 Apple 或 Goolge Push API？

[1] [http://urbanairship.com/products/push-messaging](http://urbanairship.com/products/push-messaging)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-09T04:33:56.653

至于我的理解，“富推”并不是真正的推。这基本上是一个拉动操作。每当创建“富推送”时，它们都会存储在其消息中心中，每个“富推送”都有一个“唯一标识符”。

此标识符可以与通常的推送通知一起传递，当用户选择应用程序时，应用程序具有内部回调消息中心并检索数据的能力。即使用户没有选择推送消息，每次用户登录 API 时都会检查自上次检查以来的任何新事件。如果有任何新事件，消息中心会将数据发送给用户。

由于没有数据限制，“Rich Push”可以修改以满足任何需求。用于分析、反馈等。

如果我错了，请纠正我。

# javascript - jQuery UI switchClass() 无法正常工作

> ID：15307134
> 
> 赞同：2
> 
> 时间：2013-03-09T04:25:42.160
> 
> 标签：javascript, jquery, css, image, jquery-ui

我正在开发一个图片库，其中的照片分别在鼠标`left`和鼠标上滑动。`right``scroll up``scroll down`

有 5 张照片的画廊如下所示：

[http://www.games07.tk/Untitled.png](http://www.games07.tk/Untitled.png)

**功能：**

```
function scrollPhotosLeft()
{
       $(".photo0").switchClass("photo0","photo1",500);
       $(".photo1").switchClass("photo1","photo2",500);
       $(".photo2").switchClass("photo2","photo4",500);
       $(".photo3").switchClass("photo3","photo0",500);
       $(".photo4").switchClass("photo4","photo3",500);
}
function scrollPhotosRight()
{
        $(".photo0").switchClass("photo0","photo3",500);
        $(".photo1").switchClass("photo1","photo0",500);
        $(".photo2").switchClass("photo2","photo1",500);
        $(".photo3").switchClass("photo3","photo4",500);
        $(".photo4").switchClass("photo4","photo2",500);
} 
```

**CSS：**

```
.photo0{
   top: 50%;
   left: 50%;
}
.photo1{
   top: 40%;
   left: 30%;
}
.photo2{
   top: 30%;
   left: 10%;
}
.photo3{
   top: 40%;
   left: 70%;
}
.photo4{
   top: 30%;
   left:90%;
} 
```

向下滚动不会出现问题，但在某些情况下向下滚动并突然向上滚动会导致照片看起来像这样：

[http://www.games07.tk/Untitled2.png](http://www.games07.tk/Untitled2.png)

有没有办法克服这个问题或任何其他方式来实现这个？

我注意到，在上下滚动的某种组合之后， switchClass() 为图像提供了相同的类（从 Google Chrome Inspect Element 获得）

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-09T04:47:58.627

`switchClass`在动画完成之前不会更改类，因此在半秒过去之前再次调用它会导致有趣的行为。

您应该预先选择、存储当前位置并使用动画而不是交换类；

```
var p0 = $(".photo0");
var p1 = $(".photo1");
// etc
var i = 0;
var posn = [
    {x:50,y:50},
    {x:100,y:70},
    {x:150,y:80},
    {x:200,y:70},
    {x:250,y:50}
];
function movePhotos(){
    p0.animate( posn[i], 500 );
    p1.animate( posn[(i+1)%5], 500 );
    // etc
}
function scrollPhotosLeft(){
    i = (i + 1) % 5;
    movePhotos();
}
function scrollPhotosRight(){
    i = (i + 5 - 1) % 5;
    movePhotos();
} 
```

# html - 冻结/修复表格的顶部标题行

> ID：15307135
> 
> 赞同：16
> 
> 时间：2013-03-09T04:25:44.350
> 
> 标签：html, css, html-table, position

![在此处输入图像描述](../Images/dd1be955f28143368f314bc0c1c7ab5c.png)我需要你的帮助。我不确定如何冻结或让我的表格的第一行包含要保持冻结的标题，而我可以滚动表格？只使用 CSS 标记而不使用 Javascript 框架，我怎么能做到这一点？

```
<!DOCTYPE html>
<html>
<head>

<style type="text/css">

/*------------------------------------------------------------------
Table Style
------------------------------------------------------------------ */
table a:link {
    color: #666;
    font-weight: bold;
    text-decoration:none;
}
table a:visited {
    color: #999999;
    font-weight:bold;
    text-decoration:none;
}
table a:active,
table a:hover {
    color: #bd5a35;
    text-decoration:underline;
}
table {
    font-family:Arial, Helvetica, sans-serif;
    color:#666;
    font-size:12px;
    background:#eaebec;
    border:#ccc 1px solid;

    border-radius:3px;
    border-collapse:collapse; border-spacing: 0; 

    box-shadow: 0 1px 2px #d1d1d1;
    min-width: 1000px;
}
table th {
    padding:10px 10px 10px 10px;
    border-top:0;
    border-bottom:1px solid #e0e0e0;
    border-left: 1px solid #e0e0e0;

    background: #ededed;
}
table th:first-child {
    text-align: left;
}
table tr:first-child th:first-child {
    border-top-left-radius:3px;
    border-left: 0;
}
table tr:first-child th:last-child {
    border-top-right-radius:3px;
}
table tr {
    text-align: center;
}
table td:first-child {
    text-align: left;
    border-left: 0;
}
table td {
    padding:10px;
    border-bottom:1px solid #e0e0e0;
    border-left: 1px solid #e0e0e0;
    background: #fafafa;
}
table tr:last-child td {
    border-bottom:0;
}
table tr:last-child td:first-child {
    border-bottom-left-radius:3px;
}
table tr:last-child td:last-child {
    border-bottom-right-radius:3px;
}
table tr:hover td {
    background: #f2f2f2;

}
table th, table td {
    width: 160px;

}
#wrapper {
    width: 740px;
    height: 200px;
    overflow-x: scroll;
    overflow-y: scroll;
}
table thead {
    position: fixed;
}
</style>

</head>

<body>

<div id="wrapper">
<table>

    <!-- Table Header -->
    <thead>
        <tr>
            <th>Task Details</th>
            <th>Firstname</th>
            <th>Lastname</th>
            <th>Progress</th>
            <th>Vital Task</th>
        </tr>
    </thead>
    <!-- Table Header -->

    <!-- Table Body -->
    <tbody>

        <tr>
            <td>Create pretty table design</td>
            <td>&nbsp;</td>
            <td>&nbsp;</td>
            <td>100%</td>
            <td>Yes</td>
        </tr><!-- Table Row -->

        <tr>
            <td>Take the dog for a walk</td>
            <td>&nbsp;</td>
            <td>&nbsp;</td>
            <td>100%</td>
            <td>Yes</td>
        </tr><!-- Darker Table Row -->

        <tr>
            <td>Waste half the day on Twitter</td>
            <td>&nbsp;</td>
            <td>&nbsp;</td>
            <td>20%</td>
            <td>No</td>
        </tr>

        <tr>
            <td>Feel inferior after viewing Dribble</td>
            <td>&nbsp;</td>
            <td>&nbsp;</td>
            <td>80%</td>
            <td>No</td>
        </tr>

        <tr>
            <td>Wince at &quot;to do&quot; list</td>
            <td>&nbsp;</td>
            <td>&nbsp;</td>
            <td>100%</td>
            <td>Yes</td>
        </tr>

        <tr>
            <td>Vow to complete personal project</td>
            <td>&nbsp;</td>
            <td>&nbsp;</td>
            <td>23%</td>
            <td>yes</td>
        </tr>

        <tr>
            <td>Procrastinate</td>
            <td>&nbsp;</td>
            <td>&nbsp;</td>
            <td>80%</td>
            <td>No</td>
        </tr>

        <tr>
            <td><a href="#yep-iit-doesnt-exist">Hyperlink Example</a></td>
            <td>&nbsp;</td>
            <td>&nbsp;</td>
            <td>80%</td>
            <td><a href="#inexistent-id">Another</a></td>
        </tr>

    </tbody>
    <!-- Table Body -->

</table>
</div>

</body>
</html> 
```

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2014-09-13T01:56:55.683

我有一个纯 CSS 滚动表设计，它比我见过的大多数其他人都要精致一些。它具有简单、优美的外观，并在流行的桌面浏览器中完美呈现，包括回到版本 8 的 Internet Explorer。它的一个更好的功能是让内容决定表格和列的宽度而不是将它们设置为预定的选项价值观。这是表格的默认行为，但我看到很多 CSS 滚动表格需要列、表格或两者的固定宽度或百分比宽度。

这里有一些你可以查看的小提琴：

*   **Fluid Width and Height** (适应屏幕大小): **[jsFiddle](http://jsfiddle.net/doctorDestructo/kn4xprgx/)** (注意滚动条在这个配置中只在需要的时候显示，所以你可能需要缩小框架才能看到)

*   **自动宽度，固定高度**（更容易与其他内容集成）： **[jsFiddle](http://jsfiddle.net/doctorDestructo/x54uraaq/)**

第二个可能在更多情况下有用，所以我将在下面发布它的代码......

```
/*the following html and body rule sets are required only if using a % width or height*/
/*html {
  width: 100%;
  height: 100%;
}*/
body {
  box-sizing: border-box;
  width: 100%;
  height: 100%;
  margin: 0;
  padding: 0 20px 0 20px;
  text-align: center;
  background: white;
}
.scrollingtable {
  box-sizing: border-box;
  display: inline-block;
  vertical-align: middle;
  overflow: hidden;
  width: auto; /*if you want a fixed width, set it here, else set to auto*/
  min-width: 0/*100%*/; /*if you want a % width, set it here, else set to 0*/
  height: 188px/*100%*/; /*set table height here; can be fixed value or %*/
  min-height: 0/*104px*/; /*if using % height, make this large enough to fit scrollbar arrows + caption + thead*/
  font-family: Verdana, Tahoma, sans-serif;
  font-size: 15px;
  line-height: 20px;
  padding: 20px 0 20px 0; /*need enough padding to make room for caption*/
  text-align: left;
}
.scrollingtable * {box-sizing: border-box;}
.scrollingtable > div {
  position: relative;
  border-top: 1px solid black;
  height: 100%;
  padding-top: 20px; /*this determines column header height*/
}
.scrollingtable > div:before {
  top: 0;
  background: cornflowerblue; /*header row background color*/
}
.scrollingtable > div:before,
.scrollingtable > div > div:after {
  content: "";
  position: absolute;
  z-index: -1;
  width: 100%;
  height: 100%;
  left: 0;
}
.scrollingtable > div > div {
  min-height: 0/*43px*/; /*if using % height, make this large enough to fit scrollbar arrows*/
  max-height: 100%;
  overflow: scroll/*auto*/; /*set to auto if using fixed or % width; else scroll*/
  overflow-x: hidden;
  border: 1px solid black; /*border around table body*/
}
.scrollingtable > div > div:after {background: white;} /*match page background color*/
.scrollingtable > div > div > table {
  width: 100%;
  border-spacing: 0;
  margin-top: -20px; /*inverse of column header height*/
  /*margin-right: 17px;*/ /*uncomment if using % width*/
}
.scrollingtable > div > div > table > caption {
  position: absolute;
  top: -20px; /*inverse of caption height*/
  margin-top: -1px; /*inverse of border-width*/
  width: 100%;
  font-weight: bold;
  text-align: center;
}
.scrollingtable > div > div > table > * > tr > * {padding: 0;}
.scrollingtable > div > div > table > thead {
  vertical-align: bottom;
  white-space: nowrap;
  text-align: center;
}
.scrollingtable > div > div > table > thead > tr > * > div {
  display: inline-block;
  padding: 0 6px 0 6px; /*header cell padding*/
}
.scrollingtable > div > div > table > thead > tr > :first-child:before {
  content: "";
  position: absolute;
  top: 0;
  left: 0;
  height: 20px; /*match column header height*/
  border-left: 1px solid black; /*leftmost header border*/
}
.scrollingtable > div > div > table > thead > tr > * > div[label]:before,
.scrollingtable > div > div > table > thead > tr > * > div > div:first-child,
.scrollingtable > div > div > table > thead > tr > * + :before {
  position: absolute;
  top: 0;
  white-space: pre-wrap;
  color: white; /*header row font color*/
}
.scrollingtable > div > div > table > thead > tr > * > div[label]:before,
.scrollingtable > div > div > table > thead > tr > * > div[label]:after {content: attr(label);}
.scrollingtable > div > div > table > thead > tr > * + :before {
  content: "";
  display: block;
  min-height: 20px; /*match column header height*/
  padding-top: 1px;
  border-left: 1px solid black; /*borders between header cells*/
}
.scrollingtable .scrollbarhead {float: right;}
.scrollingtable .scrollbarhead:before {
  position: absolute;
  width: 100px;
  top: -1px; /*inverse border-width*/
  background: white; /*match page background color*/
}
.scrollingtable > div > div > table > tbody > tr:after {
  content: "";
  display: table-cell;
  position: relative;
  padding: 0;
  border-top: 1px solid black;
  top: -1px; /*inverse of border width*/
}
.scrollingtable > div > div > table > tbody {vertical-align: top;}
.scrollingtable > div > div > table > tbody > tr {background: white;}
.scrollingtable > div > div > table > tbody > tr > * {
  border-bottom: 1px solid black;
  padding: 0 6px 0 6px;
  height: 20px; /*match column header height*/
}
.scrollingtable > div > div > table > tbody:last-of-type > tr:last-child > * {border-bottom: none;}
.scrollingtable > div > div > table > tbody > tr:nth-child(even) {background: gainsboro;} /*alternate row color*/
.scrollingtable > div > div > table > tbody > tr > * + * {border-left: 1px solid black;} /*borders between body cells*/
```

```
<div class="scrollingtable">
  <div>
    <div>
      <table>
        <caption>Top Caption</caption>
        <thead>
          <tr>
            <th><div label="Column 1"></div></th>
            <th><div label="Column 2"></div></th>
            <th><div label="Column 3"></div></th>
            <th>
              <!--Here's a more versatile way of doing a column label; unlike the
              custom label attribute used above, it's fully stylable, but requires 2
              identical copies of the label-->
              <div><div>Column 4</div><div>Column 4</div></div>
            </th>
            <th class="scrollbarhead"></th> <!--ALWAYS ADD THIS EXTRA CELL AT END OF HEADER ROW-->
          </tr>
        </thead>
        <tbody>
          <tr><td>Lorem ipsum</td><td>Dolor</td><td>Sit</td><td>Amet consectetur</td></tr>
          <tr><td>Lorem ipsum</td><td>Dolor</td><td>Sit</td><td>Amet consectetur</td></tr>
          <tr><td>Lorem ipsum</td><td>Dolor</td><td>Sit</td><td>Amet consectetur</td></tr>
          <tr><td>Lorem ipsum</td><td>Dolor</td><td>Sit</td><td>Amet consectetur</td></tr>
          <tr><td>Lorem ipsum</td><td>Dolor</td><td>Sit</td><td>Amet consectetur</td></tr>
          <tr><td>Lorem ipsum</td><td>Dolor</td><td>Sit</td><td>Amet consectetur</td></tr>
          <tr><td>Lorem ipsum</td><td>Dolor</td><td>Sit</td><td>Amet consectetur</td></tr>
          <tr><td>Lorem ipsum</td><td>Dolor</td><td>Sit</td><td>Amet consectetur</td></tr>
          <tr><td>Lorem ipsum</td><td>Dolor</td><td>Sit</td><td>Amet consectetur</td></tr>
          <tr><td>Lorem ipsum</td><td>Dolor</td><td>Sit</td><td>Amet consectetur</td></tr>
          <tr><td>Lorem ipsum</td><td>Dolor</td><td>Sit</td><td>Amet consectetur</td></tr>
          <tr><td>Lorem ipsum</td><td>Dolor</td><td>Sit</td><td>Amet consectetur</td></tr>
        </tbody>
      </table>
    </div>
    Faux bottom caption
  </div>
</div>
<!--[if lte IE 9]><style>.scrollingtable > div > div > table {margin-right: 17px;}</style><![endif]-->
```

* * *

## 回答 #2

> 赞同：10
> 
> 时间：2013-03-09T04:28:07.753

将下面添加到 css。

```
table thead {
  position: fixed;
} 
```

**试试这个代码**

```
<!DOCTYPE html>
<html>
<head>

<style type="text/css">

/*------------------------------------------------------------------
Table Style
------------------------------------------------------------------ */
table a:link {
    color: #666;
    font-weight: bold;
    text-decoration:none;
}
table a:visited {
    color: #999999;
    font-weight:bold;
    text-decoration:none;
}
table a:active,
table a:hover {
    color: #bd5a35;
    text-decoration:underline;
}
table {
    font-family:Arial, Helvetica, sans-serif;
    color:#666;
    font-size:12px;
    background:#eaebec;
    border:#ccc 1px solid;

    border-radius:3px;
    border-collapse:collapse; border-spacing: 0; 

    box-shadow: 0 1px 2px #d1d1d1;
}
table th {
    padding:10px 10px 10px 10px;
    border-top:0;
    border-bottom:1px solid #e0e0e0;
    border-left: 1px solid #e0e0e0;

    background: #ededed;
}
table th:first-child {
    text-align: left;
}
table tr:first-child th:first-child {
    border-top-left-radius:3px;
    border-left: 0;
}
table tr:first-child th:last-child {
    border-top-right-radius:3px;
}
table tr {
    text-align: center;
}
table td:first-child {
    text-align: left;
    border-left: 0;
}
table td {
    padding:10px;
    border-bottom:1px solid #e0e0e0;
    border-left: 1px solid #e0e0e0;
    background: #fafafa;
}
table tr:last-child td {
    border-bottom:0;
}
table tr:last-child td:first-child {
    border-bottom-left-radius:3px;
}
table tr:last-child td:last-child {
    border-bottom-right-radius:3px;
}
table tr:hover td {
    background: #f2f2f2;

}
table th, table td {
    width: 160px;

}
#wrapper {
    width: 740px;
    height: 300px;
    overflow-x: scroll;
    overflow-y: scroll;
}
table thead
{
    position:fixed;
}
</style>

</head>

<body>

<div id="wrapper">
<table>

    <!-- Table Header -->
    <thead>
        <tr>
            <th>Task Details</th>
            <th>Firstname</th>
            <th>Progress</th>
            <th>Vital Task</th>
        </tr>
    </thead>
    <!-- Table Header -->

    <!-- Table Body -->
    <tbody>

        <tr>
            <td>Create pretty table design</td>
            <td>&nbsp;</td>
            <td>100%</td>
            <td>Yes</td>
        </tr><!-- Table Row -->

        <tr>
            <td>Take the dog for a walk</td>
            <td>&nbsp;</td>
            <td>100%</td>
            <td>Yes</td>
        </tr><!-- Darker Table Row -->

        <tr>
            <td>Waste half the day on Twitter</td>
            <td>&nbsp;</td>
            <td>20%</td>
            <td>No</td>
        </tr>

        <tr>
            <td>Feel inferior after viewing Dribble</td>
            <td>&nbsp;</td>
            <td>80%</td>
            <td>No</td>
        </tr>

        <tr>
            <td>Wince at &quot;to do&quot; list</td>
            <td>&nbsp;</td>
            <td>100%</td>
            <td>Yes</td>
        </tr>

        <tr>
            <td>Vow to complete personal project</td>
            <td>&nbsp;</td>
            <td>23%</td>
            <td>yes</td>
        </tr>

        <tr>
            <td>Procrastinate</td>
            <td>&nbsp;</td>
            <td>80%</td>
            <td>No</td>
        </tr>

        <tr>
            <td><a href="#yep-iit-doesnt-exist">Hyperlink Example</a></td>
            <td>&nbsp;</td>
            <td>80%</td>
            <td><a href="#inexistent-id">Another</a></td>
        </tr>

    </tbody>
    <!-- Table Body -->

</table>
</div>

</body>
</html> 
```

# wordpress - http 到 https 使用 htaccess 离开没有下拉菜单的站点菜单

> ID：15307149
> 
> 赞同：2
> 
> 时间：2013-03-09T04:27:55.540
> 
> 标签：wordpress, .htaccess, http, mod-rewrite

我在 WordPress 上的网站上添加了 SSL 证书。当我将以下代码添加到 htaccess 文件时，我丢失了导航菜单中的下拉菜单，并且在各种浏览器中发生了不同的事情。

这是我添加到 htacces 以强制站点从 http 到 https 的代码：

```
RewriteCond %{HTTPS} !=on

RewriteRule ^.*$ https://{SERVER_NAME}%{REQUEST_URI} [R,L] 
```

所以这是 htaccess 文件现在的样子：

```
 # BEGIN WordPress
    <IfModule mod_rewrite.c>
    RewriteEngine On
    RewriteCond %{HTTPS} !=on
    RewriteRule ^.*$ https://{SERVER_NAME}%{REQUEST_URI} [R,L]
    RewriteBase /
    RewriteRule ^index\.php$ - [L]
    RewriteCond %{REQUEST_FILENAME} !-f
    RewriteCond %{REQUEST_FILENAME} !-d
    RewriteRule . /index.php [L]
    </IfModule>
    # END WordPress 
```

我将不胜感激任何帮助，以使网站顶部的菜单导航再次工作。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-19T14:27:34.637

WordPress 中的许多区域创建指向内容和引用的相对链接（独立于站点）

```
<a href="/mypage">like this</a> 
```

然而，代码中的其他地方是特定于站点的，并引用了完整的 URL。如果您上传图像（例如），它将在 [http://www.example.com/wp-content/uploads/2013/03/image1.jpg中引用](http://www.example.com/wp-content/uploads/2013/03/image1.jpg)

如果您在数据库表中搜索[http://www.example.com/](http://www.example.com/)并仅将其替换为 /，这将使您的所有引用都相对，并且 http/https 问题应该会消失。一定要先备份你的数据库

还要注意，这将解决在 Internet Explorer 中收到警告的问题，如下所示：

> 此页面包含安全和非安全项目。您想显示不安全的项目吗？

希望有帮助

# git - 在 Git 中忽略目录的语法是什么？

> ID：15307153
> 
> 赞同：5
> 
> 时间：2013-03-09T04:28:56.010
> 
> 标签：git, github, gitignore

当我想将整个目录添加到我的 .gitignore 时，语法是什么？要忽略的目录位于我的根目录中。

应该是：

1)`directory-to-ignore`

2)`directory-to-ignore/`

3)`directory-to-ignore/*`

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-03-09T04:32:00.863

只需将目录添加到 .gitigore 中，例如：

.gitignore 文件：

```
directory-to-ignore/ 
```

所以，选项**2**是正确的

# java - 获取列表视图中所有复选框的列表

> ID：15307155
> 
> 赞同：2
> 
> 时间：2013-03-09T04:29:27.490
> 
> 标签：java, android, listview, checkbox

我有一个复选框的列表视图，由休闲创建。

```
 public void addCard(final String cardId){
    ListView listView1;
    Lists movielist = new Lists();
    List<String> movies = new ArrayList<String>();      
    movies = movielist.movieList();

    listView1 = (ListView)findViewById(R.id.listView1);

    listView1.setAdapter(new ArrayAdapter<String>(this, android.R.layout.simple_list_item_multiple_choice, movies));
    listView1.setItemsCanFocus(false);
    listView1.setChoiceMode(ListView.CHOICE_MODE_MULTIPLE);

    listView1.setOnItemClickListener(new OnItemClickListener() {
    public void onItemClick(AdapterView<?> arg0, View arg1, int arg2, long arg3) {

    CheckedTextView ctv = (CheckedTextView)arg1;        
    Toast.makeText(getApplicationContext(),ctv.getText().toString(), Toast.LENGTH_SHORT).show();
    //do your stuff in here!        
    }   
    });

    Button submit = (Button)findViewById(R.id.button1);
    submit.setOnClickListener(new OnClickListener() {

        public void onClick(View v) {
            Toast.makeText(getApplicationContext(),"", Toast.LENGTH_SHORT).show();

        }
     });
} 
```

现在，当一个框被选中时，我可以祝酒与复选框相关联的文本。我希望能够做的是烤与单击提交时选中的所有框相关联的文本。

理想情况下，我想要一个列表，其中每个值都是与复选框关联的文本块之一。

干杯!

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-09T04:47:33.130

选中的视图在 SparseBooleanArray 中返回，因此您可以使用下面的代码来获取键或值。下面的示例只是在单个字符串中显示选定的名称。

```
@Override
public void onItemClick(AdapterView<?> adapter, View arg1, int arg2, long arg3)
{

       SparseBooleanArray sp=getListView().getCheckedItemPositions();

     String str="";
       for(int i=0;i<sp.size();i++)
       {
           str+=movies.get(sp.keyAt(i))+",";
        }
      Toast.makeText(this, ""+str, Toast.LENGTH_SHORT).show();

 } 
```

我想这就是你想要的。

# ios - 同一视图的平移和点击手势识别器，哪个需要失败？

> ID：15307157
> 
> 赞同：5
> 
> 时间：2013-03-09T04:29:40.640
> 
> 标签：ios, objective-c, uigesturerecognizer

我需要在同一个视图上检测平移和点击，但点击动作也是平移的第一个动作，所以我假设点击动作需要平移动作失败，但是它是否会延迟，因为它必须等待稍微了解一下是否在轻敲之后是平移的动作？

谢谢

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2013-03-09T04:34:05.547

点击动作不是平移的第一个动作。点击发生在触摸之后（例如用户抬起手指）。平移发生在触摸仍然按下时（例如，手指在屏幕上按下并开始移动）。

试试看，它会正常工作的。

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2018-05-31T08:44:00.120

我知道这是个老问题，但如果有人在搜索中找到这个，他们可以试试这个

```
func gestureRecognizer(_ gestureRecognizer: UIGestureRecognizer, 
         shouldRequireFailureOf otherGestureRecognizer: UIGestureRecognizer) -> Bool {
   // Don't recognize a pan gesture until a tap fails.
   if gestureRecognizer == self.panGesture && 
          otherGestureRecognizer == self.tapGesture {
      return true
   }
   return false
} 
```

那么到底发生了什么。**我们收到了 Pan 的请求，需要检查这是否是 Tap**。所以在这里它会检查并说它`PanGesture`应该在做出反应之前等待`TapGesture`失败。你可以对其他重叠的手势做同样的事情。

有关更多信息，请参阅[首选一个手势而不是另一个](https://developer.apple.com/documentation/uikit/touches_presses_and_gestures/coordinating_multiple_gesture_recognizers/preferring_one_gesture_over_another#overview)

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-03-09T04:43:12.703

除非你这样做，否则不会有冲突。

```
- (BOOL)gestureRecognizer:(UIGestureRecognizer *)gestureRecognizer shouldRecognizeSimultaneouslyWithGestureRecognizer:(UIGestureRecognizer *)otherGestureRecognizer
{
    return YES;
} 
```

# vba - VBA on powerpoint：如何制作变量以使其能够在每张幻灯片上使用？

> ID：15307158
> 
> 赞同：0
> 
> 时间：2013-03-09T04:30:27.883
> 
> 标签：vba, ms-office, powerpoint

因此，在 Office 2013 Powerpoint 上，我正在尝试制作 Jeopardy 游戏……我将在每个 ANSWER 幻灯片上创建按钮。这个按钮的作用是：根据问题的价值设置一个变量“Amount”。之后，它将幻灯片更改为 SCORING 幻灯片。

问题来了……你是怎么做到的，所以要在 SCORING 幻灯片上使用变量“Amount”（无论是 100、200 等）吗？我想我想以某种方式使用 PUBLIC，但我是新手，我无法弄清楚......

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-09T04:57:26.933

在项目中任何模块的顶部做

```
Public lAmount as Long 
```

该变量的值将可用于项目中的所有模块。您可能希望将变量调暗为其他类型，但对于 Jeopardy，Long 就可以了。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-09T04:37:27.633

看看这个问题的答案，它应该可以帮助你。如果你在那之后仍然卡住，请告诉我。

[在 VBA 中设置全局变量](https://stackoverflow.com/questions/12241167/setting-global-variables-in-vba)

# php - PHP 包含和 CSS - 为包含的页面设置背景

> ID：15307163
> 
> 赞同：0
> 
> 时间：2013-03-09T04:31:52.033
> 
> 标签：php, css, include

我正在构建一个网站，我在其中使用 PHP 包含页眉和页脚。页脚的位置是动态的，基于页面的高度。所以有时页脚在我的浏览器页面的 3/4 处，底部有一个很大的空白区域。我的页脚容器的背景是纯色 (#333)。

有没有办法设置这个并且只有这个页面有背景颜色？

我试图在页脚页面上包含背景颜色 css 代码，但它适用于整个页面，而不仅仅是作为包含的一部分加载的页脚页面。

或者是否有一个 CSS 技巧来设置我的页脚容器 div 的高度等于页面加载时浏览器窗口的剩余高度？这可能是最好的方法...

帮助将不胜感激！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-09T04:34:39.460

尝试

**索引.php**

```
<div style="backgroun-color:red;">
    <?php
        include('footer.php')
    ?>
</div> 
```

**页脚.php**

```
<p>Hello</p> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-09T04:44:08.310

不，您必须使用 javascript 来制作具有动态高度的粘性页脚。CSS 无法适应变化（媒体查询除外，但这会很快变得混乱）。

[工作演示](http://jsfiddle.net/LvNWg/2 "工作演示")

所以基本上，你设置了传统的粘性页脚（使用推送）。然后将页脚的高度应用于推送，并作为换行的负底部边距。

为了完成这项工作，必须将所提供结构之外的所有具有高度的元素添加到 jQuery 方程中。

最后，`if (contentH < adjustedHeight)`如果内容已经将页面拉伸到超过屏幕的高度，它将不会触发。

快乐编码！

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-09T14:31:52.610

我做了一些研究，发现了我正在寻找的 CSS“技巧”。我基本上设置了一个错觉并修改了我的 CSS 以及它如何处理背景颜色样式。

[http://jsfiddle.net/fXf4K/](http://jsfiddle.net/fXf4K/)

```
<body>
    <section id="container">
    <header>This is your header</header>
    <section id="main">This is #main</section>
    <footer>This is your footer</footer>
    </section>
</body>

---------

body {background:#999;}
#container {background:#ff0;width:100%;}
header {}
#main {}
footer {background:#999;} 
```

# java - 无法加载库“tesseract”：libtesseract.so：无法打开共享对象文件：没有这样的文件或目录

> ID：15307168
> 
> 赞同：10
> 
> 时间：2013-03-09T04:32:14.967
> 
> 标签：java, centos, tesseract, leptonica

我已经在我的 MBP 上运行了一段时间的tesseract 和[Tess4J 。](http://tess4j.sourceforge.net/usage.html)今天我开始将我的应用程序迁移到服务器并开始在服务器上安装所有内容。在 tomcat 中运行 Tess4J 之前，我尝试运行一个简单的 java 程序以确保一切正常。它不是...

*   我在 centOS 64 位服务器上
*   我已经安装了 tesseract 并且它工作正常 -`tesseract myimage.jpg mytext`产生数据

但是，运行我使用 Tess4j 的简单类会产生此错误：

> 线程“主”java.lang.UnsatisfiedLinkError 中的异常：无法加载库“tesseract”：libtesseract.so：无法打开共享对象文件：没有这样的文件或目录

**到目前为止我所做的**

*   我`sudo ldconfig`在安装 tesseract 后跑了
*   我搜索了 libtesseract.so 并在`/usr/local/lib/libtesseract.so`

服务器上的文件夹包含以下文件：

```
myimge.png  
ghost4j-0.3.1.jar  
jai_imageio.jar  
jna.jar  
maslab.jar  
pngj.jar  
tess4j.jar  
TesseractExample.class  
TesseractExample.java 
```

tesseract -v 产生：

```
tesseract -v
tesseract 3.02.02
 leptonica-1.69
  libjpeg 6b : libpng 1.2.49 : libtiff 3.9.4 : zlib 1.2.3 
```

**问题**

如何让 Tess4J 知道 libtesseract.so 确实存在？`enter code here`

* * *

## 回答 #1

> 赞同：28
> 
> 时间：2015-04-19T07:11:38.810

我也有这个问题。

安装 tesseract 后是否运行以下命令：

```
sudo ldconfig 
```

那为我修好了。

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2015-08-06T02:51:36.373

您必须将 LD_LIBRARY_PATH 环境变量设置为 libtesseract.so 所在的路径。

```
export LD_LIBRARY_PATH=/usr/local/lib 
```

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2013-04-22T11:15:11.137

有必要定义变量`jna.platform.library.path`。例如：

`-Djna.platform.library.path=/usr/local/lib/`

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2013-03-09T04:37:42.113

也许它是`.so`安装的 32 位库。

# visual-c++ - 为 Windows XP 构建 allegro 5

> ID：15307170
> 
> 赞同：1
> 
> 时间：2013-03-09T04:32:40.747
> 
> 标签：visual-c++, visual-studio-2012, windows-xp, 32bit-64bit, allegro5

我整天都在寻找答案。我还没有找到一个有效的，所以我发布了一个问题并询问了很棒的stackoverflow。

我有一个需要在 windows xp 32 位机器上运行的 allegro 5 应用程序。

我已经在 VS C++ 2012 中制作了这个应用程序。我尝试使用平台工具集与 2012 windows xp (v110_xp) 来构建项目，但这没有用。

问题是当我尝试在 XP 中运行 .exe 时，我得到：

“无法在动态链接库 KERNEL32.dll 中找到程序入口点 GetTickCount64”

我很确定这是因为 allegro 5 库。
我似乎无法解决这个问题。

我想我必须重建 allegro 5 才能与 windows xp 一起使用？

大家觉得是什么？任何帮助深表感谢。

谢谢，桑尼。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-13T01:22:59.647

您需要付出额外的努力才能使用 Visual Studio 2012 为 Windows XP 构建。有关更多信息，请参阅[此博客文章](http://blogs.msdn.com/b/vcblog/archive/2012/10/08/10357555.aspx)。如果您自己构建 Allegro，那么如果您按照这些步骤操作，您可能会使其面向 Windows XP。

支持 Windows XP 的其他选项是使用 MinGW 或旧版本的 MSVC。

# java - 如何将日期时间字符串转换为整数数据类型？

> ID：15307171
> 
> 赞同：-2
> 
> 时间：2013-03-09T04:32:53.817
> 
> 标签：java, string, date, integer

```
String timerStop1 = String.format("%02d", hours) + ":"+String.format("%02d", minutes) + ":"
                  + String.format("%02d", seconds); 
```

我正在使用上面连接的字符串值，我想将其转换为**整数**以在我的 android 应用程序中使用。我该怎么做呢？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-09T04:34:29.787

第一步是将**HH:MM:SS**格式的时间（这是您的字符串的格式）转换为秒，如下所示：

```
String timerStop1 = String.format("%02d", hours) + ":" + String.format("%02d", minutes) + ":" + String.format("%02d", seconds);
String[] timef=timerStop1.split(":");  

int hour=Integer.parseInt(timef[0]);  
int minute=Integer.parseInt(timef[1]);  
int second=Integer.parseInt(timef[2]);  

int temp;  
temp = second + (60 * minute) + (3600 * hour);  

System.out.println("seconds " + temp); 
```

**但是，这只获取时间为秒（整数），而不是时间戳！**

更新：

而且，正如 Colin 指出的那样，鉴于您已经可以访问变量：小时、分钟、秒 - 为什么不按照他的建议去做 - 这是完全正确的？

[https://stackoverflow.com/a/15307211/866930](https://stackoverflow.com/a/15307211/866930)

那是因为 OP 想知道如何将 HH:MM:SS 字符串转换为整数 - 如果是这样，那么这是最通用的方法，IMO。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-09T04:36:21.347

由于包含数字以外的字符，因此无法解析`timerStop1`为整数。`timerStop1`

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-09T04:37:54.700

你可以只使用变量小时，分钟，秒。假设通过转换为整数，您需要总秒数。

```
int time = seconds + (minutes * 60) + (hours * 3600); 
```

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2013-03-09T04:38:00.637

该`tostring()`方法不是必需的

```
Integer.parseInt(timerStop1); 
```

# php - 将用户个人资料信息与用户登录信息保存在同一数据库中

> ID：15307172
> 
> 赞同：1
> 
> 时间：2013-03-09T04:33:28.543
> 
> 标签：php, mysql, database

哪一个是设计我的数据库表的最佳途径？

我有两种情况可以为用户设置我的数据库表

1) 我使用该`users`表来包含用户 ID、电子邮件、用户名、密码、名字、姓氏和所有其他个人资料数据

2) 我有一个`users`表来存储 ID、电子邮件、密码和登录信息，然后使用`userprofile`表来存储所有配置文件数据。

在不知道网站将来会变得多大的情况下，哪条路线更好？

我现在正试图以正确的方式做事，而不是以后意识到我应该以不同的方式做事。

提前感谢所有建议！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-09T04:36:16.230

如果 User 和 UserProfile 之间存在一对一的关系，我只建议将它们存储在同一个表中，除非您对每组数据有不同的重要索引要求。

# bash - 使用 shell 脚本重命名文件

> ID：15307178
> 
> 赞同：3
> 
> 时间：2013-03-09T04:34:11.850
> 
> 标签：bash, file-rename

我有很多文件以下是文件

```
DSCN2352.JPG  DSCN2356.JPG  DSCN2360.JPG  DSCN2364.JPG
DSCN2353.JPG  DSCN2357.JPG  DSCN2361.JPG  DSCN2365.JPG 
```

我想重命名这些文件，所以我写了一个脚本

```
#!/bin/bash
declare -a kl=( "$@" )
kl=$(ls *.JPG)
echo ${kl[@]}
p=0
for i in kl ;
 do mv $kl d$p.JPG
  $p=$p+1  ;
 done 
```

我收到错误

```
mv: target `d0.JPG' is not a directory
./rename.sh: line 8: 0=0+1: command not found 
```

**更新**
脚本后更新

```
#/bin/bash
p=0
for i in *.JPG;
do
mv "$i" "d$p.JPG"
(( p+1 ))  ;
done 
```

文件

```
DSCN2352.JPG  DSCN2356.JPG  DSCN2360.JPG  DSCN2364.JPG
DSCN2353.JPG  DSCN2357.JPG  DSCN2361.JPG  DSCN2365.JPG 
```

消失，我只剩下一个文件 d0.jpg 其余文件在执行更新的脚本后被删除。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-09T04:37:50.720

改变

```
$p=$p+1  ; 
```

到

```
(( p=p+1 )) 
```

或者干脆

```
(( p++ )) 
```

再会。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-09T04:41:18.927

```
p=0
for i in *.JPG
do
  mv "$i" d$p.JPG
  p=$(($p+1))
done 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-09T04:49:39.493

你可以这样做：

```
#!/bin/bash
p=0
for file in ./*.JPG ; do
    echo "$file"
    mv $file d$p.JPG
    p=`expr $p + 1`
done 
```

# r - 对 R 中的异常值 lm 具有鲁棒性

> ID：15307179
> 
> 赞同：0
> 
> 时间：2013-03-09T04:34:11.990
> 
> 标签：r, time-series, regression, outliers

这一定是一个相当标准的问题：我有一些有错误的返回数据（它们是实际错误，而不仅仅是大返回）。我正在考虑纠正此问题的最佳方法，因此它不会影响我的回归。一种想法是简单地将极端分位数的回报设置为平均回报。另一种解决方案：`lm`忽略这些极端值。是否有内置的方法`lm`让它忽略极端值？我知道 matlab 有一个叫做 roust 回归的东西，它就是这样做的。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-09T12:29:54.837

> 是否有内置的方法`lm`让它忽略极端值？

是的。你需要看看[`rlm`](http://stat.ethz.ch/R-manual/R-patched/library/MASS/html/rlm.html)。

如需更多阅读材料，请查看[CRAN 任务中的稳健方法](http://cran.r-project.org/web/views/Robust.html)。（乔希已经给出了这个链接）

# javascript - 我可以将包含脚本和样式的 HTML 文件插入另一个 HTML（在客户端）吗？

> ID：15307186
> 
> 赞同：-4
> 
> 时间：2013-03-09T04:34:45.573
> 
> 标签：javascript, html, arduino

我可以将包含脚本和样式的 HTML 文件插入另一个 HTML（在客户端）吗？

我将尝试详细说明一下，以便清楚我希望做什么......首先，这将由 Arduino 提供服务，所以这样做的重点是尽量减少每个请求发送的数据数量，如果可能只有两个文件（一个小文件需要在每次请求时加载，一个大文件应该只在第一次加载，然后被浏览器缓存）。

目前我有这样的事情：

```
<!DOCTYPE html>
<html>
    <head>
        <style>
            Many lines of CSS...
        </style>
        <script>
            Many lines of Javascript
        </script>
    </head>
    <body>
        Many lines of HTML
    </body>

    <script type='text/javascript'>
        $(document).ready
        (
            function()
            {
                initializeStuff("1, 2, 3, 4, 5, 6, 7, 8, 9");
            }
        }
    </script>
</html> 
```

基本上，我有这个大页面，但每个 GET 请求唯一可能改变的是`initializeStuff()`函数上的数据。然后 Tin 函数使用这些新数据更新身体的许多部位。

我知道正常的做法是为[CSS](http://en.wikipedia.org/wiki/Cascading_Style_Sheets)、[JavaScript](http://en.wikipedia.org/wiki/JavaScript)和 HTML 内容提供不同的文件，但如果可能的话，我希望将所有内容都放在一个大文件中。我想要这个是因为 Arduino 在连接方面非常有限，所以如果浏览器开始并行发送许多 GET，其中大多数都会失败。

所以我的问题是，如果有一种方法可以将大部分数据放在一个可以被浏览器缓存的大文件中，那么在这个文件在缓存中之后，我只需要加载一个非常小的基本 HTML 文件，几乎没有不仅仅是`initializeStuff()`功能（以及其他任何需要的东西都引用了大文件中的所有其他内容）？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-09T07:05:48.633

我不确定这是否能满足您的要求，但对于 JavaScript，您可以链接外部文件，例如：

```
<script type="text/javascript" src="script.js"></script> 
```

对于外部样式表：

```
<link rel="stylesheet" href="stylesheet.css" /> 
```

# php - 从 XY 图像中计算纬度和经度

> ID：15307189
> 
> 赞同：7
> 
> 时间：2013-03-09T04:35:08.083
> 
> 标签：php, javascript, jquery, latitude-longitude, proj4js

我在计算我在网页上的 div 标签内托管的图像的纬度和经度值时遇到了困难。我可以很容易地计算出图像的 x,y（像素）坐标并将它们保存到我脚本中的一个变量中。这是棘手的部分......

该地图*不是*墨卡托投影，因此我不能简单地将 x,y 像素坐标线性插值到 lat 和 lon 值。但是，我确实有幸知道图像所有四个角的纬度和经度（见发布的图表）、地图在图像上的投影、中央经线和原点纬度。

![http://i.imgur.com/xcGQCk1.png](../Images/d917ec275d62b5d6d8559c2647be5d63.png)

800x600 像素的图像是美国的，我基本上是想通过传递 x,y 像素坐标来捕捉点击时的纬度和经度。我假设我需要某种转换功能。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-13T16:56:28.250

在页面上使用诸如 Leaflet 或 Google 地图之类的地图 API 并固定位置然后使用点击事件中的 LatLng 可能会更容易（为了您的理智）。

快速浏览 Leaflet.js API 表明这是可能的，而且看起来你也可以使用谷歌地图来做到这一点。确保您已禁用所有拖动和缩放的可能性有点麻烦。但在我看来，因为所有投影工作都为您完成，所以似乎要容易得多。

除非你真的有迫切的理由需要那种美国形象。但即便如此，您也可以将图片叠加在地图上。

# ios - 选择时更改 UITableViewCell

> ID：15307190
> 
> 赞同：2
> 
> 时间：2013-03-09T04:35:12.737
> 
> 标签：ios, uitableview

在我的应用程序中，我有一个 UITableView，我有两个不同的自定义 UITableViewCells。UITableView 最初加载了一种自定义 UITableViewCell。在我的 UITableView 中选择一个单元格时，我想更改使用另一种类型的自定义 UITableViewCell 选择的单元格。这可能吗？让我听听你得到了什么。

谢谢， NSNolan

```
#pragma mark - UITableView delegate methods

- (NSInteger)numberOfSectionsInTableView:(UITableView *)tableView
{
    return 1;
}

- (NSInteger)tableView:(UITableView *)tableView numberOfRowsInSection:(NSInteger)section
{
    return [self.array count];
}

- (void)tableView:(UITableView *)tableView didSelectRowAtIndexPath:(NSIndexPath *)indexPath
{    
    if(indexPath.row == [self currentCellIndex]) {
        [self setCurrentCellIndex:-1];

        NSArray *nibs = [[NSBundle mainBundle] loadNibNamed:@"NewCell" owner:self options:nil];

        OldCell *cell = (OldCell *)[tableView cellForRowAtIndexPath:indexPath];
        cell = [nibs objectAtIndex:0];
    }
    else {
        [self setCurrentCellIndex:indexPath.row];

        NSArray *nibs = [[NSBundle mainBundle] loadNibNamed:@"NewCell" owner:self options:nil];

        NewCell *cell = (NewCell *)[tableView cellForRowAtIndexPath:indexPath];
        cell = [nibs objectAtIndex:0];
    }        
}

- (UITableViewCell *)tableView:(UITableView *)tableView cellForRowAtIndexPath:(NSIndexPath *)indexPath
{
    static NSString *cellIdentifier = @"OldCell";

    OldCell *cell = [tableView dequeueReusableCellWithIdentifier:cellIdentifier];
    if (cell == nil) {
        NSArray *nibs = [[NSBundle mainBundle] loadNibNamed:@"OldCell" owner:self options:nil];
        cell = [nibs objectAtIndex:0];
    }

    return cell;
} 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-03-09T04:44:22.320

在您的`didSelectRow...`方法中，您需要更新一个标志（存储在实例变量中），指示单元格的新“模式”。然后通过调用`tableView reloadRowsAtIndexPaths:withRowAnimation:`传入选定的 indexPath 来重新加载行。

在您的`cellForRow...`方法中，使用标志来确定用于行的两种类型的单元格中的哪一种。

# flashdevelop - 为什么 onMouseUp 没有被解雇？

> ID：15307191
> 
> 赞同：0
> 
> 时间：2013-03-09T04:35:13.853
> 
> 标签：flashdevelop, haxe, createjs

我为 createjs 尝试了一个简单的示例，但是 onMouseUp 事件没有被触发，这是什么原因？

[这](https://github.com/nickalie/CreateJS-Haxe/blob/master/examples/Simple/src/Main.hx)是我试过的例子

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-11T21:47:17.987

我不是 100% 确定，但我不知道该语法是否有效：

```
_stage.onMouseUp = stageClickHandler; 
```

我总是喜欢在 Haxe 中添加一个事件监听器：

```
_stage.addEventListener(MouseEvent.MOUSE_UP, stageMouseUpHandler); 
```

# java - 如何使用封装让代码更易于维护和重用？

> ID：15307192
> 
> 赞同：-5
> 
> 时间：2013-03-09T04:35:17.510
> 
> 标签：java, encapsulation, getter-setter

请举例说明如何使用封装来演示代码可维护性？

为什么要为此使用 getter 和 setter 方法？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-09T04:51:50.667

基本思想是为您的类的用户提供所有必要的操作（类方法），而不是让他完全访问数据（类变量）。这种技术可以防止对类变量的任何无意修改和数据不一致。例如：假设您有一个名为 Student 的课程

```
Class Student {

       private:
            int id; 
            string name;
       public:
            SetStudenDetails( int i, string n);
            PrintStudentDetails();
     }; 
```

使用 Get 方法可以确保类的用户同时提供名称和 ID。

我建议你阅读 Timothy Budd 的《面向对象编程》一书。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-09T04:39:28.673

想象一下，我们都为同一个项目工作，首先你为一个类编写代码，然后我在我的程序中使用了你的类。后来，您不喜欢该类的行为方式，因为它的一些实例变量（由我从我的代码中）设置为您没有预料到的值。他们的代码在您的代码中带来了错误。（放心，我不会那样做，别担心。）因为它是一个 Java 程序，所以你应该能够发布一个更新版本的类，我可以在我的程序中替换它而无需更改我自己的任何代码.

上面的场景突出了两个承诺，或者我应该说面向对象 (OO) 的好处：灵活性和可维护性。但这些好处不会自动出现。你必须做点什么。您必须以支持灵活性和可维护性的方式编写类和代码。仅仅因为 Java 支持 OO 概念，它不能为您编写代码。它可以？？例如，假设您使用公共实例变量创建类，而其他程序员直接设置实例变量，如以下代码所示：

```
public class BadExample {
public int size;
public int weight;
...
}
public class AnotherBadExample {
public static void main (String [] args) {
BadExample b = new BadExample ();
b.size = -5; // Legal but bad!!
}
} 
```

现在回到我们在一段之前谈到的场景。BadExample 是您的课程，AnotherBadExample 是我的代码。我已经修改了你的一个变量，它有助于我的代码逻辑，但这完全改变了你的类的工作方式。现在你有麻烦了。你将如何改变你的班级，以至于没有人可以直接改变你的价值观（就像我在我的代码中所做的那样）？您唯一的选择是在您的类中编写一个方法 setSize(int newVal)，然后将变量大小的访问修饰符更改为私有。这将确保您在有人试图为您不想要的 size 变量设置值时处理实例，同时确保没有人可以直接访问 size 变量并弄乱您的代码。

但是，不幸的是，这样做，你破坏了我的代码。如果我尝试编译我的 AnotherBadExample 类，我会收到错误，因为 size 变量对我来说不再可见。

我们现在如何解决这种情况？最好的方法是：不要编写任何人都可以修改公共变量的代码。

能够在不破坏所有其他使用您的代码的人的代码的情况下更改您的代码，这是**封装的一个关键优势。**您应该始终隐藏实现细节。详细地说，您必须始终将您的变量设为私有，然后拥有一组其他人可以用来访问您的变量的公共方法。由于这些方法是公开的，任何人都可以访问它们，但由于它们在您的班级中，您可以确保代码以最适合您的方式运行。因此，在您想要更改代码的情况下，您所要做的就是修改您的方法。没有人受到伤害，因为我只是在我的代码中使用了您的方法名称，而您方法中的代码并没有给我带来太多困扰。

如果你想要可维护性、灵活性和可扩展性（我猜你确实想要），你的设计必须包括封装。你是怎样做的？• 保护实例变量（使用访问修饰符，主要是私有的）。• 创建公共访问器方法，并强制调用代码使用这些方法，而不是直接访问实例变量。• 对于方法，使用set 和get 的JavaBeans 命名约定。

我们将访问方法称为 getter 和 setter，尽管有些人更喜欢更高级的术语 accessors 和 mutators。（就我个人而言，我将使用术语 getter 和 setter）无论您想如何称呼它们，它们都是其他程序员必须通过才能访问您的实例变量的方法。它们看起来很简单，如果您一直在编写 java 代码，您可能一直在使用它们：

```
public class GoodExample {
// protect the instance variable only an instance of your class can access it
private int size;
// Provide public getters and setters
public int getSize() {
return size;
}
public void setSize(int newSize) {
size = newSize;
}
} 
```

您现在可能在喃喃自语，拥有什么都不做而只是设置或获取值的方法有什么好处。我宁愿有一个公共变量。如果你这样做了，请转到封装下的第一段并重新阅读整个内容。如果你没有这样做，但问我，我们应该在 setSize() 方法中拥有的验证代码在哪里，以确保没有人将其修改为无效值，我的朋友，这只是一个示例类。我让您思考实施需要如何。至少你不会因为像我这样的人和你一起编码或更糟的人而最终受到意想不到的冲击！

参考：[http ://wiki.answers.com/Q/What_is_encapsulation_and_why_is_encapsulation_important_in_java_programming](http://wiki.answers.com/Q/What_is_encapsulation_and_why_is_encapsulation_important_in_java_programming)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-09T04:49:34.417

封装是信息隐藏。它可以通过java中的访问修饰符 **（private、public、protected、default）来实现。**因此，通过使用访问修饰符，我们可以对变量和方法的可见性施加限制。

并且封装还将与单个类中的实体相关的函数和变量包装起来。

getter 和 setter 方法用于从外部访问类的实例变量，从而保护对实例变量的直接访问。

# ravendb - 如何查询 TIndexCreator

> ID：15307203
> 
> 赞同：1
> 
> 时间：2013-03-09T04:37:16.060
> 
> 标签：ravendb

我创建了这个索引：

```
public class ReceiptsByClient : AbstractIndexCreationTask<Receipt>
    {
        public ReceiptsByClient()
        {
            Map = receipts => from r in receipts
                              let d = LoadDocument<Debtor>(r.Receipt_Debtor)
                              select new { ClientId = d.Debtor_Client };
        }
    } 
```

现在我想查询这个索引如下：

```
var rptQry = Session.Query<Receipt, ReceiptsByClient>() 
```

当然，我希望能够在 Where 子句中传递 ClientId 的值。但是 where 子句的 T 是 Receipt 类型，不知道 ReceiptsByClient 中定义的匿名类型的 ClientId。如何使用我的 ReceiptsByClient 索引进行查询？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-09T05:29:51.300

Raven在几乎所有涉及匹配查询到索引的事情上都进行[Duck Typing 。](http://en.wikipedia.org/wiki/Duck_typing)您所需要的只是一个具有您要查询的字段的类型：

```
public class Foo
{
    public string ClientId { get; set; }
} 
```

然后你在查询中使用它，并使用它来回避它，`As`这样你的结果就属于真正的类。

```
var q = session.Query<Foo, ReceiptsByClient>()
               .Where(x=> x.ClientId == "clients/123")
               .As<Receipt>(); 
```

Note that the `ClientId` field won't be in the results. If you want to do that - you have to store the field in the index with `Store(x=> x.ClientId, FieldStorage.Yes)` and then use `AsProjection` in the query to duck-type to a class that has all fields.

# php - 在网站上跟踪销售线索的好方法（推荐人流量）

> ID：15307207
> 
> 赞同：-1
> 
> 时间：2013-03-09T04:37:30.137
> 
> 标签：php, codeigniter, http-referer

我有点进退两难。我需要开始跟踪销售线索，因为我有 2 个销售人员，我不想放弃有机 SEO 线索给他们，但同时我不想欺骗他们失业。

最近发生的很多事情是人们正在点击我们的报价单，而我从其中一位销售人员那里得知，当他们发现 joe blow 已经收到我的报价时，他们最终感到不安男3个月。

所以这就是我的想法，如果你们有更好的方法或任何想法，我很想听听他们......

他们的大部分流量来自电子邮件，所有流量都来自他们提供给客户的链接。所以我想知道是否只是做类似 www.oursite.com/salesman 之类的事情并让该控制器设置一个会话变量，例如 $salesman = 'salesguy'; 这跟随他们在现场周围。然后他们可以浏览他们想要的任何地方，当他们填写报价单时，发送该会话变量。如果变量为“空”，那么我知道是否来自自然流量，并且如果它有一个名称，那么它显然属于销售人员。

这种方法的唯一问题是发送一个具有随机 uri 的链接。我真的不想发送像我们的网站/任何东西这样的链接

在锚文本只是 www.oursite.com 但链接是 www.oursite.com/salesman 的情况下，与各种电子邮件客户端进行 html 链接的兼容性如何

感谢您的所有想法、建议和批评。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-09T05:27:13.020

我没有看到任何与使用不同的 text/ vs 链接有关的问题，这一直都在做。

我认为是机架空间用来做类似的事情。他们会有类似 rackspace.com?repid=3324324

应该可以正常工作。

# python - Python UTF-8 转换

> ID：15307208
> 
> 赞同：3
> 
> 时间：2013-03-09T04:37:35.697
> 
> 标签：python, string, utf-8

我想问一下Python程序如何进行以下转换（源->目标）。

```
>>> source = '\\x{4e8b}\\x{696d}'
>>> print source
\x{4e8b}\x{696d}
>>> print type(source)
<type 'str'>
>>> target = u'\u4e8b\u696d'
>>> print target.encode('utf-8')
事業 
```

谢谢你。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-09T04:45:13.853

您可以使用`int`and`unichr`来转换它们：

```
>>> int('4e8b', 16)
    20107
>>> unichr(int('4e8b', 16))
    u'\u4e8b'
>>> print unichr(int('4e8b', 16))
事 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-03-09T04:49:34.357

利用 Blender 的想法，您可以将[re.sub](http://docs.python.org/2/library/re.html#re.sub)与可调用的替换参数一起使用：

```
import re
def touni(match):
    return unichr(int(match.group(1), 16))

source = '\\x{4e8b}\\x{696d}'
print(re.sub(r'\\x\{([\da-f]+)\}', touni, source)) 
```

产量

```
事業 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-09T04:52:51.190

```
import re
p = re.compile(r'[\W\\x]+')
print ''.join([unichr(int(y, 16)) for y in p.split(source) if y != ''])
事業 
```

还从@Blender 偷了主意...

# scala - 覆盖 Scala 集中的 toString

> ID：15307213
> 
> 赞同：2
> 
> 时间：2013-03-09T04:38:25.217
> 
> 标签：scala, tostring, scala-collections

我想创建一组名为`IntSet`. 除了它的函数将元素打印为逗号分隔（与您调用 相同）之外，它在所有方面都`IntSet`相同，并且它有一个接受整数的构造函数。最简单的方法是什么？`Set[Int]``toString``mkString(",")``Traversable`

```
> IntSet((1 to 3)).toString
1,2,3 
```

我认为会有一些单线方法可以做到这一点，但我一直在摆弄隐式函数和扩展`HashSet`，但我无法弄清楚。

* * *

诀窍是使用代理对象。[Eastsun](https://stackoverflow.com/users/172677/eastsun)在下面给出了答案。这是一个稍微不同的版本，它定义了一个命名`IntSet`类型并使其不可变。

```
import collection.immutable.{HashSet, SetProxy}

class IntSet(values: Traversable[Int]) extends SetProxy[Int] {
  override val self: Set[Int] = HashSet(values.toSeq:_*)
  override def toString() = mkString(",")
} 
```

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-03-09T05:35:02.580

```
scala> import scala.collection.mutable
import scala.collection.mutable

scala> def IntSet(c: Traversable[Int]): mutable.Set[Int] = new mutable.SetProxy[Int] {
     |   override val self: mutable.Set[Int] = mutable.HashSet(c.toSeq :_*)
     |   override def toString = mkString(",")
     | }
IntSet: (c: Traversable[Int])scala.collection.mutable.Set[Int]

scala> IntSet(1 to 3)
res0: scala.collection.mutable.Set[Int] = 1,2,3 
```

# c# - 删除空的 XML 元素

> ID：15307217
> 
> 赞同：0
> 
> 时间：2013-03-09T04:39:26.613
> 
> 标签：c#, xml

我有一个需要数据绑定的 XML 文档，但首先我需要删除所有具有空值的元素。

以前，我是这样做的：

```
 IEnumerable<Message> data = from info in xdoc.Descendants(tns + "sign")
                                         where info.Element(tns + "current-message").Value != ""
                                         select
                                             new Message(
                                                 info.Element(tns + "name").Value,
                                                 info.Element(tns + "current-message").Value);

            MessageList.DataContext = data; 
```

我试图在 Windows Phone 8 上做同样的事情。但我当前的代码不成功：

```
 foreach (var info in xdoc.Descendants(tns + "sign"))
        {
                Items.Add(new ItemViewModel()
                    {
                        ID = i.ToString(),
                        LineOne = info.Element(tns + "direction").Value,
                        LineTwo = info.Element(tns + "current-message").Value,
                        LineThree = info.Element(tns + "name").Value

                    });
                i++;
        } 
```

我将如何添加一个子句来确保没有“当前消息”的任何元素都不在此数据绑定中？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-09T04:44:26.180

```
 foreach (var info in xdoc.Descendants(tns + "sign"))
        {
if(info.Element(tns + "current-message").Value != "")
                {
                Items.Add(new ItemViewModel()
                    {
                        ID = i.ToString(),
                        LineOne = info.Element(tns + "direction").Value,
                        LineTwo = info.Element(tns + "current-message").Value,
                        LineThree = info.Element(tns + "name").Value

                    });
                i++;
                }
        } 
```

# struts-1 - 如何从struts中的多选下拉列表中选择值并保存在数据库中

> ID：15307221
> 
> 赞同：2
> 
> 时间：2013-03-09T04:40:09.550
> 
> 标签：struts-1, html-select

嗨，我在 struts 中使用多选下拉菜单。值我在数据库的下拉菜单中显示。我需要用户应该能够从下拉菜单中选择多个值，然后他可以保存到数据库。这是我到目前为止所尝试的。
这是我的struts设计

```
<TD>
                                <html:select property="bammenity1"  multiple="true" style=" width:150px"  >
                                    <html:optionsCollection  name="AmntyType"  value="amenityType" label="amenityType" />
                                </html:select> <a href="AddAmenity.jsp"><bean:message key="addamenity"/></a><br/>
                            </TD>

 try{

    bus.setBammenity1((String[]) addbustypeform.get("bammenity1"));

    }catch(Exception e){

        System.out.println("Exception"+e.toString());
    } 
```

我面临的问题是，在选择多个值后，我只得到一个选定的值请尽快回复

# android - 如何在 HTML5 android 应用程序上呈现印地语字体

> ID：15307224
> 
> 赞同：1
> 
> 时间：2013-03-09T04:40:59.290
> 
> 标签：android, html, fonts, indic

我正在尝试在印地语中创建一个 HTML Android 应用程序，但我无法使字体正常工作，字体在浏览器上工作正常但在 android 中工作不正常我正在使用 phonegap 和 jquerymobile 创建 lenovo-a1-07 和 2.3 版本的应用程序。

我已经尝试了所有以前的建议使用元标记 UTF-8 尝试在字体目录中复制字体并使用它尝试在系统/字体目录中生根设备和应对字体还尝试了 unicodes 用于印地语字体，如“ऄ”

没什么似乎对我有帮助，请建议该怎么做。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-09T05:25:12.063

你应该使用**网络字体**

检查以下链接： [http ://www.brianhadaway.com/font-face-declarations-on-android-devices/](http://www.brianhadaway.com/font-face-declarations-on-android-devices/) [http://www.google.com/webfonts/specimen/Droid+Sans](http://www.google.com/webfonts/specimen/Droid+Sans)

或者一般在android上搜索**webfont**

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-09T14:27:01.820

安装 fontoosh ( [https://play.google.com/store/apps/details?id=com.technoguff.fontoosh&hl=en](https://play.google.com/store/apps/details?id=com.technoguff.fontoosh&hl=en) ) 解决了我的问题。现在浏览器和应用程序都正确显示印地语字符。

# forms - 定位一个 div | 巢 s

> ID：15307226
> 
> 赞同：0
> 
> 时间：2013-03-09T04:41:14.450
> 
> 标签：forms, html, position, nested, floating

我想在表单中嵌套表单。但这当然是非法代码。
因此，我想将此 div

<div id="div_2">

（我已在文档末尾编码）定位到此表格单元格中：

<td id="place_here">

这甚至可能吗？
我会在 CSS 中使用相对或绝对位置让自己发疯，试图让我的 div 在每个浏览器中完美定位。

这就是为什么我在 id 中给出了那个表格单元格。
我希望 css 或 jquery 能帮助我定位 div 相对于表格单元格 id="place_here" 而不是文档顶部

```
<form id="CTRP_Form">
<table>
<tr>
<td>
<div id="div_1"><input id="fnam" name="fnam" form="CTRP_Form" type=text></div>
</td>
<td id="place_here">
<!-- place div id=2 here -->
</td>
</tr>
</table>
</form>

<div id="div_2"><form id="query_Form"><input type=submit></form></div> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-09T09:45:42.460

您可以通过指定 margin-top 属性并使用负值来做到这一点

```
<div id="div_2" style="margin-top:-160px"></div> 
```

希望这对你有用。

或者

```
<table>
<tr>
<td>
<div id="div_1">
<form id="CTRP_Form">
<input id="fnam" name="fnam" form="CTRP_Form" type=text>
</form>
</div>
</td>
<td>
<div id="div_2"><form id="query_Form"><input type=submit></form></div>
</td>
</tr>
</table> 
```

或者

For some reason if your first form is too large and its content changes while filling it out(eg. some inputs might get hide when certain options are selected).

这是你可以做的。您可以在其中放置一个小的空 div

然后您的 div 2 将遵循您的第一个表单。

然后使用这个 javascript 来定位 div_2 相对于父 div。

```
function position_mdiv(){

    var pos=$('#parent').position();
    var width=$('#parent').outerWidth();

    $('#div_2').css({
       position: "absolute",
       top: pos.top + "px",
       left: (pos.left + width) + "px"
    });

} 
```

然后将它放在 jquery 中的 document.ready 中，这样当页面加载/窗口调整大小时，它将相应地调整其位置。

```
$(document).ready(function () {
    position_mdiv()();
    $(window).resize(function() {
        position_mdiv();
    });
}); 
```

希望这能解决您的问题。

这是代码

```
<html>
<head>
<title>Nested Forms</title>
<script type="text/javascript" src="jquery-1.9.1.min.js"></script>
</head>
<body>
<form>
<table border="3" width="500" height="400" align="center" style="margin-top:40px">
<tr> 
<td style="background:green">Form1
<input type="text" placeholder="name"/><input type="submit" value="Submit"/>
</td>

</tr>

<tr>
<td style="background:red" valign="top"><div id="co">form2 place</div></td>
</tr>

</table>
</form>

<div id="tobepositioned" style="background:yellow;
width:400px;padding:10px;border:solid   2px #CCC">
Form2
<form name="form2">
<input type="text" name="s"/><input type="submit"/>
</form>
</div>

<script language="javascript">
$(document).ready(function () {
position_mdiv();

// running this function on resize too
$(window).resize(function() {
    position_mdiv();
});

});

// function to position the div2

function position_mdiv(){

var pos=$('#co').position();
var width=$('#co').outerWidth();
//alert(pos.left);
$('#tobepositioned').css({
position: "absolute",
top: pos.top + "px",
left: (pos.left) + "px"
});

}

</script>
tested in IE10, Firefox, Chrome
</body>
</html> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-10T17:02:06.243

这是最终的工作答案。我不需要创建额外的父 DIV 并将其命名为 id="place_here"。命名一个表格单元格 id="place_here" 并使其成为 DIV id="div_2" 的父级就足够了。这是一个很棒的小工作。谢谢！

```
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN" "DTD/xhtml1-strict.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="fr" lang="fr"><head>
<title>test / crtp</title>

<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<script type="text/javascript" src="jquery.js"></script>

<script type="text/javascript">
$(document).ready(function () {
    position_mdiv()();
    $(window).resize(function() {
        position_mdiv();
    });
})

function position_mdiv(){

    var pos = $('#place_here').position();
    var width = $('#place_here').outerWidth();

    $('#div_2').css({
    position: "absolute",
    top: pos.top +2 + "px",
    left: (pos.left -300 + width) + "px"
});

}

</script>
<body>

<form id="CTRP_Form">
<table border="1">
<tr>
<td>
<div id="div_1"><input id="fnam" name="fnam" form="CTRP_Form" type="text"><input type=submit></div>
</td>
<td id="place_here" style="background:yellow;width:300px;padding:0px;border:solid 2px #CCC"></td>
</tr>
</table>
</form>

<div id="div_2"><form id="query_Form"><input id="MyQuery" name="MyQuery" form="query_Form" type="text"><input type=submit></form></div>

</body>
</html> 
```

# android - 创建列表视图的共享首选项

> ID：15307228
> 
> 赞同：1
> 
> 时间：2013-03-09T04:41:28.030
> 
> 标签：android, listview, sharedpreferences

我正在尝试使用共享首选项数据创建一个列表视图，并且每次我必须添加一个数据来重新填充 listivew，但它只获取输入的最新数据，因此列表视图中的显示往往具有`1 row only every time`.

代码片段：

```
String strSavedMem1 = sharedPreferences.getString("food", "");   
String[] values = new String[] { strSavedMem1 }; //That you got from your intent bundle  
LVAdapter adapter = new LVAdapter(this, R.layout.foodlist, values);
setListAdapter(adapter); 
```

LVAdapter.java

```
public class LVAdapter extends ArrayAdapter<String> {
  private final Context context;
  private final String[] values;

  public LVAdapter(Context context, int foodlist, String[] values) {
    super(context, R.layout.foodlist, values);
    this.context = context;
    this.values = values;
  }

@Override
  public View getView(int position, View convertView, ViewGroup parent) {
    LayoutInflater inflater = (LayoutInflater) context
        .getSystemService(Context.LAYOUT_INFLATER_SERVICE);
    View rowView = inflater.inflate(R.layout.foodlist, parent, false);
    TextView textView = (TextView) rowView.findViewById(R.id.foods);        
    textView.setText(values[position]);     
    return rowView;
  }
} 
```

将值存储在共享首选项中的代码。

```
 String item_content1 = cursor.getString(cursor.getColumnIndex(SQLiteAdapter.KEY_FOODNAME));
    food.setText(item_content1);

    SavePreferences("food", food.getText().toString());
    LoadPreferences();

      }};

  protected void SavePreferences(String key, String value) {
        // TODO Auto-generated method stub
        SharedPreferences sharedPreferences = getSharedPreferences("MY_SHARED_PREF", MODE_PRIVATE);
        SharedPreferences.Editor editor = sharedPreferences.edit();
        editor.putString(key, value);
        editor.commit();

    }  
  protected void LoadPreferences() {
        // TODO Auto-generated method stub
        SharedPreferences sharedPreferences = getSharedPreferences("MY_SHARED_PREF", MODE_PRIVATE);
        String strSavedMem1 = sharedPreferences.getString("food", "");
        food.setText(strSavedMem1);

    } 
```

我必须在哪里更改上述代码，才能从共享偏好中获取全部数据？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-09T04:43:38.817

你`String[] values = new String[] { strSavedMem1 }`总是有一个元素。尝试找到将更多元素添加到您的数组中。

我假设您的 sharedpreferences 中有更多元素

```
String strSavedMem1 = sharedPreferences.getString("food1", ""); 
String strSavedMem2 = sharedPreferences.getString("food2", ""); 
String strSavedMem3 = sharedPreferences.getString("food3", ""); 

String[] values = new String[] { strSavedMem1, strSavedMem2 ,strSavedMem3} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-09T05:59:05.287

请使用 Shared Preferences 进行应用程序相关设置，同时避免将大数据列表存储在 Shared Preferences 中。 Shared Preferences 的物理路径是 /data/data/YOUR_PACKAGE_NAME/ ，这样会减少你的手机内存。

# java - 如何从错误日志中获取 URL、IP 地址和 java 类详细信息

> ID：15307229
> 
> 赞同：0
> 
> 时间：2013-03-09T04:41:43.357
> 
> 标签：java, error-logging, log4j2

我正在做一个大项目。出于记录目的，我们使用了 log4j1.2.12

我希望当代码发生任何异常时，我想要以下异常的详细信息：URL（从哪个异常发生）带参数、IP 地址（从哪个 IP 放置我的请求）、时间戳、Java 类名、Java方法名称，以及 Struts 动作名称。

在我的整个代码中，在每个 java 文件中，我都使用了 try-catch-finally。

```
public static final Logger log = Logger.getLogger(xyz.class);

try{
     //My Code
} catch(Exception e) {
     log.error("Exception Message :", e);
} 
```

它只写了异常细节而不是我需要的细节那么我怎样才能实现我的目标？

注意：我们的项目有超过 2000 个 java 文件，其中 try-catch-finally 来了......所以，我不能手动更改/编辑/修改每个 java 文件中的代码。

1.  所以，我想我应该开箱即用。！？？我对吗？
2.  我是否有可能在 log4j.properties 文件中添加/更改/修改某些配置并可以实现我的目标？
3.  我需要更改日志框架吗？
4.  不接触java代码，有可能吗？

我会感谢你的所有建议。

提前致谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-09T09:53:45.617

查看[PatternLayout](http://logging.apache.org/log4j/1.2/apidocs/org/apache/log4j/PatternLayout.html)以及[如何设置 Configraaion-File](http://logging.apache.org/log4j/1.2/manual.html)。添加转换字符以获得您想要的值。例如：

%d{yyy-MM-dd_HH:mm:ss,SSS} 完整日期

%l 用于完全限定的调用方法名称。

# php - 如何进行不区分大小写的搜索

> ID：15307230
> 
> 赞同：5
> 
> 时间：2013-03-09T04:41:50.303
> 
> 标签：php, mysql, codeigniter

我正在使用 jQuery`autocompleter`进行搜索。

从我下面的代码中，我的搜索只发生在区分大小写的情况下，我想进行不区分大小写的搜索。例如。`$array={the king, The king, The man}`

我的搜索关键字是“The”，那么目前我只得到输出，就像`{The king, The man}` 我没有得到一样，`the king`因为它是小写的。

我想要的是，如果我写“the”，那么我应该得到所有三个结果。

请帮我解决我的问题

视图.php

```
<script type="text/javascript">
$(document).ready(function() {
        $(function() {
                $( "#autocomplete" ).autocomplete({

                        source: function(request, response) {

                     $.ajax({ url: "<?php echo base_url().'search/suggestions'?>",
                                data: { term: $("#autocomplete").val()},
                                dataType: "json",
                                type: "POST",
                                success: function(data){

                                        response(data);
                                }
                        });
                },

                minLength: 3,
                select: function (a, b) {
    $(this).val(b.item.value);
    $(".searchform1").submit()
}
                });
        });
        $('#autocomplete').focus(); 
});

  function monkeyPatchAutocomplete() {

      // Don't really need to save the old fn, 
      // but I could chain if I wanted to
      var oldFn = $.ui.autocomplete.prototype._renderItem;

      $.ui.autocomplete.prototype._renderItem = function( ul, item) {
          var re = new RegExp("^" + this.term, "i") ;
          var t = item.label.replace(re,"<span style='font-weight:bold;color:Black;'>" + this.term + "</span>");
          return $( "<li></li>" )
              .data( "item.autocomplete", item )
              .append( "<a>" + t + "</a>" )
              .appendTo( ul );
      };
  }

  $(document).ready(function() {

      monkeyPatchAutocomplete();

      $("#input1").autocomplete({
          // The source option can be an array of terms.  In this case, if
          // the typed characters appear in any position in a term, then the
          // term is included in the autocomplete list.
          // The source option can also be a function that performs the search,
          // and calls a response function with the matched entries.
          source: function(req, responseFn) {
              addMessage("search on: '" + req.term + "'<br/>");
              var re = $.ui.autocomplete.escapeRegex(req.term);
              var matcher = new RegExp( "^" + re, "i" );
              var a = $.grep( wordlist, function(item,index){
                  //addMessage("&nbsp;&nbsp;sniffing: '" + item + "'<br/>");
                  return matcher.test(item);
              });
              addMessage("Result: " + a.length + " items<br/>");
              responseFn( a );
          },

          select: function(value, data){
              if (typeof data == "undefined") {
                  addMessage('You selected: ' + value + "<br/>");
              }else {
                  addMessage('You selected: ' + data.item.value + "<br/>");
              }
          }
      });
  });
</script>
     ---------------
     ---------------
        <form class="searchform1" action="<?php echo base_url().'search/searchresult/pgn/grid/'?>" method="POST"> 
                        <img src="<?php echo base_url()?>css/images/icons/searchicon.png" style="vertical-align:middle;"/>  
                        <input id="autocomplete" value="<?php  if(isset($srchvalue)){echo $srchvalue ;} ?>" class="deletable"   type="text" name="keywords" style="height: 30px;width: 450px;font-size: 16px;border: 0;border-bottom:solid 4px #dfdfdf;border-top:solid 4px #dfdfdf;"  maxlength="70" placeholder="  Search for Title, Author Name, Isbn , Publisher"/>

                        <input type="submit" value="&nbsp;&nbsp;Search&nbsp;&nbsp;" class="searchbtn"/>
       </form> 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-09T04:49:11.143

避免使用很多类似的运算符。全文搜索是要走的路。默认情况下，完整的 txtsearch 不区分大小写。所以你不会有问题。

这是如何将mysql全文与codeigniter集成

[在 MySQL 和 CodeIgniter 中使用 Match 和 Against](https://stackoverflow.com/questions/11762051/using-match-and-against-in-mysql-and-codeigniter)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-10T11:35:12.137

您是否有意在表格上使用区分大小写的排序规则？更改为不区分大小写的排序规则将解决您的问题。另一种解决方案是将您的字符串匹配为小写（或大写）。像这样的东西：

$this->db->or_like('LOWER(auth_lastname)', strtolower($keyword));

此外，如果您在 mysql 中使用 InnoDB 作为存储引擎，则无法进行全文搜索

# wordpress - 更改 wordpress 中的默认分页样式

> ID：15307232
> 
> 赞同：0
> 
> 时间：2013-03-09T04:42:20.407
> 
> 标签：wordpress, pagination, wordpress-theming

我是 WordPress 的初学者并开始学习它。我正在从现有的父主题设计一个新的子主题。父页面的分页

```
«   Previous   1   2   3   Next   » 
```

但我想像这样修改它：

```
Page 1 of 45   1   2   3   NEXT   10    20    30    LAST 
```

以下是我的代码：

```
if (!is_singular()) {
            global $wp_query, $rtp_post_comments;
            if (isset($rtp_post_comments['pagination_show']) && $rtp_post_comments['pagination_show']) {
                if (( $wp_query->max_num_pages > 1)) {                    
                        ?>
                    <nav class="wp-pagenavi"><?php
                    echo "<span class='page-count'>Page 1 of " . $wp_query->max_num_pages . "</span>";                    
                    echo paginate_links(array(
                        'base' => str_replace(999999999, '%#%', esc_url(get_pagenum_link(999999999))),
                        'format' => '?paged=%#%',
                        'current' => max(1, get_query_var('paged')),
                        'total' => $wp_query->max_num_pages,
                        'prev_text' => esc_attr($rtp_post_comments['prev_text']),
                        'next_text' => esc_attr($rtp_post_comments['next_text']),
                        'end_size' => $rtp_post_comments['end_size'],
                        'mid_size' => $rtp_post_comments['mid_size']
                    ));
                        ?>
                    </nav><?php
                }
            } elseif (function_exists('wp_pagenavi')) {
                wp_pagenavi();
            } elseif (get_next_posts_link() || get_previous_posts_link()) {
                    ?>
                <nav class="navigation clearfix">                                  
                    <?php if (get_next_posts_link()) { ?><div class="alignleft"><?php next_posts_link(__('Older Entries')); ?></div><?php } ?>
                    <?php if (get_previous_posts_link()) { ?><div class="alignright"><?php previous_posts_link(__('Newer Entries')); ?></div><?php } ?>
                </nav><?php
            }
        } 
```

我应该在哪里改变这个？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-02-04T15:46:11.900

我发现对于一些自定义的东西，wordpress 的功能是难以理解的。但一个很好的解决方法是：

```
global $page, $numpages;

if ( $numpages > 1 ) : 
                if ( $page == 1 ) {
                    $prev_link = '&nbsp;';
                    $next_link = '<a href="' . get_permalink() . ( $page+1 ) . '">Next Page</a>';
                } else if ( $page == $numpages ) {
                    $prev_link = '<a href="' . get_permalink() . ( $page-1 ) . '">Prev. Page</a>';
                    $next_link = '&nbsp;';
                } else {
                    $prev_link = '<a href="' . get_permalink() . ( $page-1 ) . '">Prev. Page</a>';
                    $next_link = '<a href="' . get_permalink() . ( $page+1 ) . '">Next Page</a>';
                }
            ?>
            <div id="post-pagination">
                <div class="prev-page"><?php echo $prev_link; ?></div>
                <div class="spacer"><?php echo $page.' / '.$numpages; ?></div>
                <div class="next-page"><?php echo $next_link ?></div>
            </div> 
```

这很容易定制、风格和理解。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-09T10:45:50.737

看看[分页链接法典页面](http://codex.wordpress.org/Function_Reference/paginate_links)

paginate_links() 位于 wp-includes/general-template.php 中。（不建议编辑核心文件。）

或者你可以试试这个插件：[WP-PageNavi](http://wordpress.org/extend/plugins/wp-pagenavi/)，它会提供一个选项来在开头添加“第 1 页，共 45 页”。

# css - 如何在悬停时获得实际的 DOM CSS 宽度？

> ID：15307234
> 
> 赞同：0
> 
> 时间：2013-03-09T04:42:49.813
> 
> 标签：css, hover, google-chrome-devtools

当我必须将鼠标悬停以使事件发生时，如何展开以查看计算的宽度？每当我将鼠标悬停在菜单中的链接上时，宽度就会从 270 像素更改为 850 像素，并使整个菜单失控。

但是我无法确定是什么 CSS 样式元素导致了这种转变，因为我必须将鼠标悬停在链接上，并且无法展开计算的样式来查看导致这种转变的原因。

我尝试使用选项卡和箭头键，认为这会让我循环浏览 Chrome 的 UI 元素，但没有运气。有任何想法吗？

![Chrome 开发者工具](../Images/5fbdd7f867226f550cf54ed0f88a5012.png)

顺便说一句：菜单是由我在 asp.net 中包装的第 3 方工具创建的。这是受到影响的已创建元素：

```
<td emtype="c" colspan="2" class="ParentItemContentCell"><a href="/Admin/Default.aspx?p=9">Admin Home</a></td> 
```

这是 CSS 代码，如果你想看的话：

```
.ParentItemContentCell
{
        width:100%;
    font: 12px Tahoma; 
    text-transform: uppercase;
    color: #FFFFFF;
    text-align: center;
    white-space: nowrap;
}
.ParentItemContentCellOver
{
    font: 12px Tahoma; 
    text-transform: uppercase;
    color: #361A53;
    text-align: center;
    white-space: nowrap;
    width:100%;
}

.ParentItemContentCellOver a
{
    font: 12px Tahoma; 
    text-transform: uppercase;
    color: #361A53;
    text-align: center;
    white-space: nowrap;
    width:100%;
    text-decoration:none;
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-09T07:21:21.597

[这个问题有两个答案](https://stackoverflow.com/search?q=user:158449%20%5Bgoogle-chrome-devtools%5D%20is:answer)

在样式窗格中悬停复选框

![样式中的悬停复选框](../Images/496624b539018dc3cb803c41ff523580.png)

和元素状态上下文菜单

![和元素状态上下文菜单](../Images/645c42561efcd2e2a426de0e8ca85909.png)

# javascript - jQuery 原型和构造函数链接

> ID：15307243
> 
> 赞同：8
> 
> 时间：2013-03-09T04:44:08.333
> 
> 标签：javascript, jquery, object, prototype

jQuery 如何允许其构造函数充当接受参数的函数，同时其构造函数也充当接受参数的函数？

我对 JavaScript 有点陌生，所以如果这是一个菜鸟问题，请原谅，（我已经查看了源代码，但很难尝试剖析）。

无论如何，作为示例`$(document).ready(<args>);`，构造函数`$()`和原型都`ready()`充当函数。如何？因为如果我尝试这个：

```
var $ = function( selector ) {
    if(selector == document) {
        return document;
    }
};

$.prototype = {
    constructor: $,
    ready: function( args ) {
        if( isDomReady ) {
            args.apply( document );
        } else {
            window.onload = args;
        }
    }
};

var isDomReady = ( document.addEventListener || document.readyState == ("complete"|"loaded"|true|4) || document.onreadystatechange() ) ? true : false;

$(document).ready(function() { alert("Wibbles!") }); 
```

我收到一个错误`Uncaught TypeError: Object[object global] has no method 'ready'`

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-03-09T05:35:53.367

你知道，这让我很感兴趣。你已经接受了一个答案，但如果它证明有用，让我发布我的答案。这里创建了一个[小提琴](http://jsfiddle.net/gQpnB/1/)

```
jQuery = function( selector, context ) {
    // The jQuery object is actually just the init constructor 'enhanced'
    return new jQuery.fn.init( selector, context );
};

jQuery.fn = jQuery.prototype = {
    constructor: jQuery,
    context: null,
    isReady: null,
    init: function( selector, context ) {
        if (selector === document){
            this.context = document;
            this.selector = document;
        }
        console.log(this);
        return this;
    },
    ready: function(func){
        var args = Array.prototype.slice.call(this, arguments),
            boundReadyFunc = func.bind(this, args.slice(1));

        if (this.isReady){
            func();
        }
        else {
            document.addEventListener( "DOMContentLoaded", this.onReady.bind(this, func), false );
        }
    },
    onReady: function(func){
        console.log("onready");
        this.isReady = true;
        func.call(this);
    },
};

jQuery.fn.init.prototype = jQuery.fn;
jQuery(document).ready(function(){
    alert("Hey, here I am");
}); 
```

让我试着解释一下这是如何工作的。

每次调用类似`$(selector)`的方法时，都会使用您提供的选项创建一个新的 jQuery 实例（请参阅 参考资料`return new jQuery.fn.init( selector, context );`）；

为了方便起见，我们将 jQuery 原型公开为另一个名为`jQuery.fn`. 为了使其真正可链接，该`init`函数必须返回一个新`jQuery`实例。这就是为什么最后我们明确定义两者的原型`jQuery`是`jQuery.init`相同的。这样，您现在可以链接函数调用，例如

```
$(document).ready(DoSomethingHere) 
```

希望这可以帮助。

[此外，您可以在github](https://github.com/jquery/jquery)上找到 jQuery 源代码。它是模块化的，很容易遵循。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-09T05:03:02.937

这是一种称为函数链接的编程技术。

您可以在此处查看更多信息：[基本对象/函数链接如何在 javascript 中工作？](https://stackoverflow.com/questions/1099628/how-does-basic-object-function-chaining-work-in-javascript)

# cordova - 用Phonegap和Meteor JS开发的iPhone应用能否成功部署到App Store？

> ID：15307248
> 
> 赞同：1
> 
> 时间：2013-03-09T04:44:44.873
> 
> 标签：cordova, meteor

我想知道是否有人已经遇到过这个问题：我正在尝试使用 Phonegap 和 Meteor JS 开发我的第一个 iPhone 应用程序。我能够编译并部署到我的 iPhone 等等。但是苹果会拒绝我的应用吗？

Meteor 允许实时更新代码，因此一旦部署到应用商店，我可能会在应用部署后更新代码，而无需再次通过应用审批流程。

这是一个公平的说法吗？如果是这种情况，我真的应该在我的 iPhone 应用程序中使用 Meteor 吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-09T08:28:16.020

我工作的公司发布的应用程序严重依赖我们的 HTML/JS 平台并且可以动态升级，并且我们不需要每次 HTML 更新时都不断地发布。但是，如果您更改了一些与本机代码挂钩的材料，则需要重新发布。

# jquery - 如何让这个动画 div 一键返回？

> ID：15307251
> 
> 赞同：3
> 
> 时间：2013-03-09T04:45:30.490
> 
> 标签：jquery, animation, jquery-animate

```
<script>
$("#right").click(function(){
  $(".block").animate({"left": "+100px"}, "slow").fadeTo("slow", 0.33);
});

$("#left").click(function(){
  $(".block").animate({"left": "+50px"}, "slow").fadeTo("slow", 0.99);;
});
</script> 
```

这是我的脚本。如您所见，我想使用按钮将 .block 向左和向右移动，但我找不到如何使其在一个按钮中工作。

所以我希望按钮触发 .block 向右移动（在第一次单击时），在它移动后，触发 .block 向左移动（第二次单击）。并且可以反复工作。

我怎样才能做到这一点？我应该使用'if'功能吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-09T05:13:46.960

尝试：[示例](http://jsfiddle.net/jFuQD/2/)

```
$("#right").click(function () {
   if (!$(".block").hasClass("Moved")) {
       $(".block").animate({
           "left": "+100px"
       }, "slow").fadeTo("slow", 0.33).addClass("Moved");
   } else {
       $(".block").animate({
           "left": "+50px"
       }, "slow").fadeTo("slow", 0.99).removeClass("Moved");
   }
}); 
```

另外一个选项：

使用这样的小插件；

```
(function($) {
    $.fn.clickToggle = function(func1, func2) {
        var funcs = [func1, func2];
        this.data('toggleclicked', 0);
        this.click(function() {
            var data = $(this).data();
            var tc = data.toggleclicked;
            $.proxy(funcs[tc], this)();
            data.toggleclicked = (tc + 1) % 2;
        });
        return this;
    };
}(jQuery)); 
```

并像在页面中的任何位置一样使用它：

```
$("#right").clickToggle(function () {
    $(".block").animate({
        "left": "+100px"
    }, "slow").fadeTo("slow", 0.33);
}, function () {
    $(".block").animate({
        "left": "+50px"
    }, "slow").fadeTo("slow", 0.99);;
}); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-09T04:48:47.250

尝试

```
$(".left").toggle(function(){
    $(".block").animate({"left": "+100px"}, "slow").fadeTo("slow", 0.33);
}, function(){
    $(".block").animate({"left": "+50px"}, "slow").fadeTo("slow", 0.99);
}); 
```

您可以在此处阅读有关 .toggle() 的更多信息：http: [//api.jquery.com/toggle-event/](http://api.jquery.com/toggle-event/)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-09T05:07:46.970

你在做什么如下。

```
$("#right").click(function(){
  $(".block").animate({"left": "+100px"}, "slow").fadeTo("slow", 0.33);
});

$("#left").click(function(){
  $(".block").animate({"left": "+50px"}, "slow").fadeTo("slow", 0.99);;
}); 
```

每次单击左或右时，都会增加左属性，这意味着不存在右移动画代码。

也`;;`从左键单击事件代码中删除。

尝试

```
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en">
<head>
    <meta http-equiv="Content-Type" content="text/html;charset=UTF-8" />
    <title>StackOverFlow</title>
    <script type="text/javascript" src="js/jquery.js"></script>
    <script type="text/javascript">
        $(function()
        {
            $("#right").click(function(){
                 $(".block").animate({
                    left: "100px"
                }, 1500 );
            });

            $("#left").click(function(){
                $(".block").animate({
                    left: "0"
                }, 1500 );
            });
        });
    </script>
</head>
<body>

<div>
<button id="left" type="button">Left</button>
<button id="right" type="button">Right</button>
</div>

<div class="block" style="border:1px solid red;width:100px;height:100px;position: absolute;"></div>

</body>
</html> 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-09T05:15:39.770

这是您要找的 qhat 吗？

HTML：

```
<div class="block"></div>
<button type="button" id="move">Move</button> 
```

jQuery：

```
$("#move").click(function () {
    $(".block").animate({
        left: "+100px"
    }, "slow")
        .animate({
        opacity: 0.33
    }, "slow")
        .animate({
        left: "+50px"
    }, "slow")
        .animate({
        opacity: 0.99
    }, "slow");
}); 
```

CSS：

```
.block {
    background: blue;
    width: 100px;
    height: 100px;
    position: absolute;
    left: 0;
    top: 0;
}
#move {
    margin-top: 150px
} 
```

[在这里](http://jsfiddle.net/7xZXV/1/)提琴

# java - 创建一个在名称列中打印的循环

> ID：15307252
> 
> 赞同：0
> 
> 时间：2013-03-09T04:45:44.490
> 
> 标签：java

数组 kids 是一个 Infant 类型的数组，已经用 Infant 对象声明和初始化。编写一个循环，在列中打印 kids 数组中所有婴儿的姓名。

这是婴儿班。。

```
public class Infant{

  private  String name;
  private int age;  // in months

  public Infant(String who, int months){
    name = who;
    age = months;
  }

  public String getName(){return name;}

  public int getAge(){return age;}

  public void anotherMonth(){age = age + 1;}
} 
```

我试过的代码是

```
for (int j = 0; j<kids.length; j++) {

System.out.println(kids.getName());

} 
```

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-03-09T04:47:30.263

更改您的打印行语句

```
System.out.println(kids[j].getName()); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-09T05:19:38.000

附带说明一下，编写 for 循环的另一种更简洁的方法是：

```
 for (Infant i: kids){

          System.out.println(i.getName());
 } 
```

这归结为，对于数组孩子中的所有婴儿，做一个特定的操作（在这种情况下打印他们的名字）

# android - 邮件发送用户名密码认证

> ID：15307256
> 
> 赞同：0
> 
> 时间：2013-03-09T04:46:12.200
> 
> 标签：android

我正在开发一个从中发送电子邮件的应用程序。为了发送电子邮件，我使用了没有意图代码的代码。因为它是应用程序的需要。我使用的代码如下：

```
import java.util.Date;
import java.util.Properties;
import javax.activation.CommandMap;
import javax.activation.DataHandler;
import javax.activation.DataSource;
import javax.activation.FileDataSource;
import javax.activation.MailcapCommandMap;
import javax.mail.BodyPart;
import javax.mail.Multipart;
import javax.mail.PasswordAuthentication;
import javax.mail.Session;
import javax.mail.Transport;
import javax.mail.internet.InternetAddress;
import javax.mail.internet.MimeBodyPart;
import javax.mail.internet.MimeMessage;
import javax.mail.internet.MimeMultipart;

public class Mail extends javax.mail.Authenticator {
    private String _user;
    private String _pass;

    private String[] _to;
    private String _from;

    private String _port;
    private String _sport;

    private String _host;

    private String _subject;
    private String _body;

    private boolean _auth;

    private boolean _debuggable;

    private Multipart _multipart;

    public Mail() {
        _host = "smtp.gmail.com"; // default smtp server
        _port = "465"; // default smtp port
        _sport = "465"; // default socketfactory port

        _user = ""; // username
        _pass = ""; // password
        _from = ""; // email sent from
        _subject = ""; // email subject
        _body = ""; // email body

        _debuggable = false; // debug mode on or off - default off
       _auth = true; // smtp authentication - default on

       _multipart = new MimeMultipart();

       // There is something wrong with MailCap, javamail can not find a handler for the multipart/mixed part, so this bit needs to be added.
       MailcapCommandMap mc = (MailcapCommandMap) CommandMap.getDefaultCommandMap();
       mc.addMailcap("text/html;; x-java-content-handler=com.sun.mail.handlers.text_html");
       mc.addMailcap("text/xml;; x-java-content-handler=com.sun.mail.handlers.text_xml");
       mc.addMailcap("text/plain;; x-java-content-handler=com.sun.mail.handlers.text_plain");
       mc.addMailcap("multipart/*;; x-java-content-handler=com.sun.mail.handlers.multipart_mixed");
       mc.addMailcap("message/rfc822;; x-java-content-handler=com.sun.mail.handlers.message_rfc822");
       CommandMap.setDefaultCommandMap(mc);
   }

   public Mail(String user, String pass) {
       this();

       _user = user;
       _pass = pass;
   }

   public boolean send() throws Exception {
       Properties props = _setProperties();

       if(!_user.equals("") && !_pass.equals("") && _to.length > 0 && !_from.equals("") && !_subject.equals("") && !_body.equals("")) {
           Session session = Session.getInstance(props, this);

           MimeMessage msg = new MimeMessage(session);

           msg.setFrom(new InternetAddress(_from));

           InternetAddress[] addressTo = new InternetAddress[_to.length];
           for (int i = 0; i < _to.length; i++) {
               addressTo[i] = new InternetAddress(_to[i]);
           }
       msg.setRecipients(MimeMessage.RecipientType.TO, addressTo);

           msg.setSubject(_subject);
           msg.setSentDate(new Date());

           // setup message body
           BodyPart messageBodyPart = new MimeBodyPart();
           messageBodyPart.setText(_body);
           _multipart.addBodyPart(messageBodyPart);

           // Put parts in message
           msg.setContent(_multipart);

           // send email
           Transport.send(msg);

           return true;
       } else {
           return false;
       }
    }

    public void addAttachment(String filename) throws Exception {
        BodyPart messageBodyPart = new MimeBodyPart();
        DataSource source = new FileDataSource(filename);
        messageBodyPart.setDataHandler(new DataHandler(source));
        messageBodyPart.setFileName(filename);

        _multipart.addBodyPart(messageBodyPart);
    }

    @Override
    public PasswordAuthentication getPasswordAuthentication() {
        return new PasswordAuthentication(_user, _pass);
    }

    private Properties _setProperties() {
        Properties props = new Properties();

        props.put("mail.smtp.host", _host);

        if(_debuggable) {
            props.put("mail.debug", "true");
        }

        if(_auth) {
            props.put("mail.smtp.auth", "true");
        }

        props.put("mail.smtp.port", _port);
        props.put("mail.smtp.socketFactory.port", _sport);
        props.put("mail.smtp.socketFactory.class", "javax.net.ssl.SSLSocketFactory");
        props.put("mail.smtp.socketFactory.fallback", "false");

        return props;
    }

    // the getters and setters
    public String getBody() {
        return _body;
    }

    public void setBody(String _body) {
        this._body = _body;
    }

    public String[] get_to() {
        return _to;
    }

    public void set_to(String[] _to) {
        this._to = _to;
    }

    public String get_from() {
        return _from;
    }

    public void set_from(String _from) {
        this._from = _from;
    }

    public String get_subject() {
        return _subject;
    }

    public void set_subject(String _subject) {
        this._subject = _subject;
    } 
} 
```

我通过代码将此类称为：

```
Mail m = new Mail("UserName.gmail.com", "Password");

String[] toArr = {"demo.gmail.com"};
m.set_to(toArr);
m.set_from("UserName.gmail.com");
m.set_subject(sub);
m.setBody(finalbody);

try {
    if(m.send()) {
        Toast.makeText(EMailActivity.this, "Email was sent successfully.", Toast.LENGTH_LONG).show();
    } else {                    
    Toast.makeText(EMailActivity.this, "Email was not sent.", Toast.LENGTH_LONG).show();
    }
} catch(Exception e) {
} 
```

我还包括三个必需的 jar 文件：

```
activation.jar
additionnal.jar
mail.jar 
```

**现在的问题是：**当我输入错误的用户名或密码时 -

```
Mail m = new Mail("UserName.gmail.com", "Password"); 
```

比没有邮件发送和屏幕锁定。由于屏幕被锁定，用户无法进一步移动。这是由于邮件没有发送。

那么有什么方法可以验证用户输入的用户名和密码。或者如果用户名或密码错误，那么如何防止屏幕锁定并在此之后执行任何操作。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-25T13:05:30.483

不，现在不存在这种类型的方法或 api。

# algorithm - 在二维网格中查找路径并返回所有匹配的节点

> ID：15307261
> 
> 赞同：0
> 
> 时间：2013-03-09T04:46:31.517
> 
> 标签：algorithm, graph, multidimensional-array, path-finding, graph-traversal

假设我有一个行*列网格，网格上的每个节点都有一个整数（状态）值。

```
state[NUMBER_OF_ROWS][NUMBER_OF_COLUMNS] 
```

如果值

`state[row][0] == state[row][NUMBER_OF_COLUMNS -1]`

我想检查是否存在仅由这两点相同状态组成的“路径”..

通过路径，我的意思是左侧、右侧、底部或顶部的状态与原始状态相同。

我不确定它是否重要，但可以说状态是二进制的（# 或 -）所以如果我正在检查状态 ==“-”的路径，如果状态到 N，我们可以继续路径， E,S,W 也是 == "-"

结束行必须等于开始行。

成功案例：

```
|# # # # #|    
|# # # # #|    
|# # # # #|
|- # # # #|
|- - - - -| 
```

或者

```
|# # # # #|
|# # # - #|
|# - - - #|
|- - # - -|
|# # # - -| 
```

或者

```
|# # # # #|
|# # # - #|
|# # # - #|
|- - - - #|
|- # # - -| 
```

失败的例子：

```
|# # # # #|
|# # # # #|
|# # # # #|
|- - - - #|
|# # - - -| 
```

或者

```
|# # # # #|
|# # # - #|
|# # # - #|
|# - - - #|
|- # # - #| 
```

或者

```
|# # # # #|
|# # - # #|
|# # # # #|
|# - # - #|
|- # - # -| 
```

会失败。

我该怎么做呢？我在 Objective C 中编写代码，但帮助我理解这些步骤的伪代码就足够了。

除了检查路径是否存在 BOOL 之外，我还想返回路径中所有网格坐标的数组。

这很容易实现还是我有点过头了？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-10T15:09:23.293

所以这是对我有用的解决方案——基于@Floris 链接的迷宫求解算法。

可能有一两个错误，它肯定没有优化，但它现在可以工作。

应该很容易理解，感谢大家的帮助：

```
-(BoardState)solutionPathExistsForColor {
    //create a board copy where the last column equals the first

    for (int i = 0; i < BOARD_ROWS+1; i++) {
        for (int j = 0; j < BOARD_COLUMNS+1; j++) {
            if (j == BOARD_COLUMNS) {
                loopedBoard[i][j] = landed[i][0];
            } else {
                loopedBoard[i][j] = landed[i][j];
            }
        }
    }

    for (BoardState state = 1; state < kBoardStateCount; state++) {
        //first check if it is possible there is a path

        //for each row
        for (int row = 0; row < BOARD_ROWS; row++) {

            //set solution path to zero
            for (int i = 0; i < BOARD_ROWS; i++) {
                for (int j = 0; j < BOARD_COLUMNS; j++) {
                    solutionPath[i][j] = 0;
                }
            }
            BOOL aTest = [self findPathToGoalRow:row //iterate
                                   andGoalColumn:BOARD_COLUMNS  //always the same
                                         fromRow:row  //iterate
                                       andColumn:0  // always the same
                                         ofState:state]; //iterate
            if (aTest) {
                CCLOG(@"Success! State %i", (int)state);
                //now that you know a path exists, modify the path to contain all correct adjacent cells
                [self fixSolutionPathOfColor:state];
                return state;
            } else {
                CCLOG(@"Failure!");
            }
        }
    }
    return kBoardStateVOID;
}

-(BOOL)findPathToGoalRow:(int)goalRow
           andGoalColumn:(int)goalColumn
                 fromRow:(int)fromRow
               andColumn:(int)fromColumn
                 ofState:(BoardState)state {

    //check to see if we've already seen this row and column
    if (solutionPath[fromRow][fromColumn] == 1) {
        return NO;
    }

//  if (x,y outside maze) return false
    if (fromRow > BOARD_ROWS -1 || fromColumn > BOARD_COLUMNS || fromRow < 0 || fromColumn < 0) {
        return NO;
    }
//  if (x,y is goal) return true
    if (fromRow == goalRow && fromColumn == goalColumn) {
        return YES;
    }
//  if (x,y not open) return false
    //if ([self boardStateAtRow:fromRow andColumn:fromColumn] != state) {
    if (loopedBoard[fromRow][fromColumn]!=state) {
        return NO;
    }

//  mark x,y as part of solution path
    solutionPath[fromRow][fromColumn] = 1;

//  if (FIND-PATH(North of x,y) == true) return true
    if ([self findPathToGoalRow:goalRow
                  andGoalColumn:goalColumn
                        fromRow:fromRow+1
                      andColumn:fromColumn
                        ofState:state]) {
        return YES;
    }
//  if (FIND-PATH(East of x,y) == true) return true
    if ([self findPathToGoalRow:goalRow
                  andGoalColumn:goalColumn
                        fromRow:fromRow
                      andColumn:fromColumn+1
                        ofState:state]) {
        return YES;
    }
//  if (FIND-PATH(South of x,y) == true) return true
    if ([self findPathToGoalRow:goalRow
                  andGoalColumn:goalColumn
                        fromRow:fromRow-1
                      andColumn:fromColumn
                        ofState:state]) {
        return YES;
    }
//  if (FIND-PATH(West of x,y) == true) return true
    if ([self findPathToGoalRow:goalRow
                  andGoalColumn:goalColumn
                        fromRow:fromRow
                      andColumn:fromColumn-1
                        ofState:state]) {
        return YES;
    }
//  unmark x,y as part of solution path
    solutionPath[fromRow][fromColumn] = 0;
    return NO;
}

-(void)fixSolutionPathOfColor:(BoardState)color {

    for (int column = 0; column < BOARD_COLUMNS; column++) {
        BOOL bottomColumnOfSolutionPathFound = NO;
        int checkingRow = 0;
        while (!bottomColumnOfSolutionPathFound) {
            if ([self solutionCellAtRow:checkingRow andColumn:column] == 1) {
                bottomColumnOfSolutionPathFound = YES;
            } else {
                checkingRow++;
            }
        }

        //you'll start with this bottom row and look below
        if (solutionPath[checkingRow][column] == 1) {
            int nextRowToCheck = checkingRow-1;
            BOOL keepChecking = YES;
            while (nextRowToCheck >= 0 && keepChecking) {
                if ([self boardStateAtRow:(nextRowToCheck) andColumn:column] == color) {
                    if ([self solutionCellAtRow:(nextRowToCheck) andColumn:column] != YES) {
                        solutionPath[nextRowToCheck][column] = 1;
                    }
                    nextRowToCheck--;
                } else {
                    keepChecking = NO;
                }
            }
            //now repeat for above
            nextRowToCheck = checkingRow+1;
            keepChecking = YES;
            while (nextRowToCheck < BOARD_ROWS && keepChecking) {
                if ([self boardStateAtRow:(nextRowToCheck) andColumn:column] == color) {
                    if ([self solutionCellAtRow:(nextRowToCheck) andColumn:column] != YES) {
                        solutionPath[nextRowToCheck][column] = 1;
                    }
                    nextRowToCheck++;
                } else {
                    keepChecking = NO;
                }
            }
        }
    }
} 
```

谢谢！

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-09T05:41:54.743

听起来您正在查看一个非常常见的一般编程问题的特定案例。您的网格是一种特定类型的图表；每个单元是一个节点，可以连接到相邻节点。从最简单的[图遍历](http://en.wikipedia.org/wiki/Graph_traversal)策略开始；广度优先或深度优先搜索。这两种算法是您应该熟悉的简单工具，也是解决此特定问题所需的全部问题。在您的情况下，您可以将搜索限制为只能探索包含与当前节点相同值的节点，并查看您是否能够到达目的地。

现在，这些算法中的任何一个都会告诉您路径是否存在。这是一个好的开始，但如果您想找到*最短*路径怎么办？为此，我们有[Dijkstra 算法](http://en.wikipedia.org/wiki/Dijkstra%27s_Algorithm)。

这很好，但我们仍然必须遍历整个图才能找到最短路径。如果图很小，这不是问题，但随着它的增长，这将成为一项昂贵的操作。有没有什么方法可以找到最短路径而不用到处搜索？有：看看[A*](http://en.wikipedia.org/wiki/A%2a_search_algorithm)（“A星”）算法。

# image-processing - 形态学中连通字符的图像分割

> ID：15307262
> 
> 赞同：1
> 
> 时间：2013-03-09T04:46:43.097
> 
> 标签：image-processing, image-segmentation

在我问了同样的类似问题之前，我尝试使用分水岭来分割连接字符，但效果不佳。一周前，我在谷歌搜索的 stackoverflow 上遇到了同样的问题，[连接字符的分割](https://stackoverflow.com/questions/14211413/segmentation-for-connected-characters)，在回答用户中，作者**mmgp**提供了一种使用形态学方法和关闭操作的解决方案，但我并不了解全部。

我只是在命中和未命中形态中细化图像。

![在此处输入图像描述](../Images/9c937cb0d509ef517f789f3d51471984.png) 原始图像

![在此处输入图像描述](../Images/261baab152ff347d82dfb1d5b16bd0a0.png) 细化图像 细化图像![在此处输入图像描述](../Images/dcde91b884226fb5d00afaeaa9889fc3.png)的大图像（放大）

4 连接可以将数字**9**拆分为单个字符，但**44**仍然连接。

[我对连接字符的分割](https://stackoverflow.com/questions/14211413/segmentation-for-connected-characters)有一些疑问

**1.为什么需要将原始图像调整为200像素然后对其进行细化。**

为什么不立即稀释原始图像。

**2.如何提取这些分支点并对细化图像应用形态学闭合。**

我只知道闭合形态是**腐蚀**和**膨胀**的结合操作。

关闭的垂直线需要 2*height+1（这是结构元素高度？），我不知道如何设置。结构元素如何构造（3*3 或其他？）。

最后他们得到以下图像

![在此处输入图像描述](../Images/ba7a6b9171fd0a6b928643264d1e11fc.png)

我需要一些帮助，有人可以告诉我如何应用关闭操作并超越图像。谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-21T06:46:15.657

我已经使用前景功能和背景功能解决了这个问题。

一些人在下面详细介绍了这个算法：

使用上下文知识分割和识别手写数字串的遗传框架

波斯语和英语中手写数字字符串的分割。

流动的图像是我的捕捉。

前景区域和前景骨架

![在此处输入图像描述](../Images/56717e2e7cadbd91c8884e9623cdad4c.png) ![在此处输入图像描述](../Images/69ad47e4dc9ccf0814935493be7dc963.png)

背景区域和背景骨架

![在此处输入图像描述](../Images/4167045c94930d8604af9cfd94a64ff4.png) ![在此处输入图像描述](../Images/b2399ea6b7dd54e384a16bc01dfb018e.png)

44的骨架图像。

![在此处输入图像描述](../Images/a63546f980a752e6ddb0085dcc76224a.png)

基于以上特征点，我们可以构造一个分割路径来分割449位。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2019-06-11T06:58:32.910

使用以下方法进行关闭操作：

```
kernel = cv2.getStructuringElement(cv2.MORPH_RECT,(2*h+1,1))
closed_img = cv.morphologyEx(img, cv.MORPH_CLOSE, kernel) 
```

# c# - 使用套接字的简单 C# 客户端出错

> ID：15307263
> 
> 赞同：2
> 
> 时间：2013-03-09T04:46:49.527
> 
> 标签：c#, sockets, networking

我正在尝试在 C# 中创建一个非常简单的客户端/服务器，基本上我目前要做的就是让客户端连接到服务器，这就是我出错的地方。我的服务器启动正常，但是当我尝试启动客户端时出现此错误：

```
The requested address is not valid in this context
  at System.Net.Sockets.Socket.Connect (System.Net.EndPoint remoteEP) [0x00000] in <filename unknown>:0
  at Client.Client.Main (System.String[] args) [0x00000] in <filename unknown>:0 
```

我现在拥有的基本客户端如下

```
 try
        {
            IPAddress ipAddress = IPAddress.Parse("0.0.0.0");
            IPEndPoint remoteEP = new IPEndPoint(ipAddress, 8001);

            Socket sender = new Socket(AddressFamily.InterNetwork, SocketType.Stream, ProtocolType.Tcp);

            try
            {
                sender.Connect(remoteEP);                    

                Console.WriteLine("Connected to: " + remoteEP);

                byte[] msg = Encoding.ASCII.GetBytes("Testing");

                sender.Send(msg);

                sender.Shutdown(SocketShutdown.Both);
                sender.Close();

            }

            catch (Exception e)
            {
                Console.WriteLine(e.Message + "\n" + e.StackTrace);
            }
        }
        catch (Exception e)
        {
            Console.WriteLine(e.Message + "\n" + e.StackTrace);
        } 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-09T04:51:15.467

这不是一个有效的 IP 地址。对于本地主机（您自己的机器），这就是您想要的

```
 IPAddress ipAddress = IPAddress.Parse("127.0.0.1"); 
```

# php - header('location:...) 与 if 子句结合使用时行为不正确

> ID：15307265
> 
> 赞同：0
> 
> 时间：2013-03-09T04:47:20.633
> 
> 标签：php, redirect, if-statement, header

```
if(isset($_POST))
{
  if(verify_post_data() == 'success')
  {
    if(do_something_with_verified_post_data() == 'success')
    {
    //do something else
    header('location: success.php');
    }
  }
  header('location: failure.php');
} 
```

我想处理用户在多个步骤中发布的数据（首先验证一切是否正确，然后对数据进行处理）。

如果验证帖子数据并对其进行操作成功，我想将用户重定向到success.php

如果验证失败，或者对数据做某事失败，我想重定向到失败。

这是正在发生的事情：

当我通过评论删除 header(...) 函数时，我说

```
//header('location: success.php');
echo 'success!'; 
```

和

```
//header('location: failure.php');
echo 'failure!'; 
```

我的脚本将打印“成功！失败！” 如果我的数据是正确的并且在处理数据时没有发生错误。完全有道理...因为成功的回声并没有打断脚本，所以仍然会显示失败。

因此，当我取消注释成功标头（失败标头保持注释）时，它确实将我发送到了 success.php

如果我随后也取消注释失败标头，它现在 - 即使成功 - 也会将我发送到 failure.php。

这怎么可能？

我希望标头函数会中断脚本并忽略它之后的任何代码。我的假设是错误的吗？我是否必须以某种方式手动退出脚本？

php不是逐行处理代码吗？或者它是最后做大括号中的标题，然后是其他标题，还是什么？

或者这不应该发生，我必须在其他地方出错？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-09T04:53:12.363

标头函数不会中断脚本并忽略它之后的任何代码。因此，在所有情况下，都会发送 Location 标头，因为`location: failure.php` 将其放置`location: failure.php`在 else 部分会是一个更好的主意。如果您安装了 firebug，您可以在 firebug 的“net”面板中检查响应标头

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-09T05:02:00.493

首先，不要`echo/setcookie()`在调用之前使用`header()`。

其次，您需要**抽象**一个重定向，如下所示：

```
function redirect($location){

  if ( ! headers_sent() ){
     header(sprintf('Location : %s', $location));
     exit;
  }
}

if( ! empty($_POST) ) // isset() is good for array keys, not for this one itself
{
  if(verify_post_data() == 'success')
  {
    if(do_something_with_verified_post_data() == 'success')
    {
     //do something else
     redirect('success.php');
    }
  }
   redirect('failure.php'); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-09T05:11:18.107

是的 php 逐行执行。
你发布的数据可能有一些错误，如果你写了两个位置头，第一个会被执行，
但脚本的其余部分也会被执行，
为避免这种情况，你需要调用**exit；**如果用户发布了错误的数据，或者只是使用 die() 函数。也试试下面的代码：

```
if(do_something_with_verified_post_data() == 'success')
{
 //do something else
 header('Location: success.php');
 exit;
}
else
{
 header('Location: failure.php');
 exit;
} 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-03-09T04:50:32.093

首先不要使用`echo`before 和 after `header`。并`exit`在之后使用`header`。

```
if(isset($_POST))
{
  if(verify_post_data() == 'success')
  {
    if(do_something_with_verified_post_data() == 'success')
    {
       //do something else
       header('location: success.php');
       exit();
    }
  }
  header('location: failure.php');
  exit();
} 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-03-09T04:58:45.363

一个[类似的问题](https://stackoverflow.com/questions/6149941/php-if-statement-ignored-when-headerlocation-xxx-is-inside?rq=1)让我找到了答案

**我必须调用 exit(); 调用 header() 后...**

我刚试了一下，调用退出函数时，一切正常。所以显然我的假设

> 我希望标头函数会中断脚本并忽略它之后的任何代码。

是错的...！

# c# - 查询对象？

> ID：15307271
> 
> 赞同：-4
> 
> 时间：2013-03-09T04:48:33.343
> 
> 标签：c#, ado.net

情况1：

```
for(int =0;i<1000;i++)
{
 Datatable dt=new Datatable();
 //Perform some operation
 dt.Dispose();
} 
```

案例二：

```
Datatable dt=new Datatable();
for(int =0;i<1000;i++)
{
 //Perform some operation
 dt=null;
} 
```

我想在循环中使用数据表，这种情况会更有效：每次都在循环中创建和销毁一个对象，还是在循环之前创建它？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-09T04:52:25.237

尝试这个

编辑：如果你想保持相同的结构，那么你可以清除每个循环上的项目

```
Datatable dt =new Datatable();
//add columns to your datatable
for(int i=0;i<1000;i++)
{    
  dt.Items.Clear();
  //your other code
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-09T04:52:44.690

案例 2 效率更高，但应该如下所示

```
Datatable dt = null;
for(int i = 0; i < 1000; i++)
{    
 dt = new Datatable();
 //Perform some operation
 dt = null;//or dt.Dispose();
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-09T05:21:43.037

案例2会更有效率。对象构造函数对于 CPU 来说是相对昂贵的操作。构造一个对象并为其成员赋值与销毁一个对象并构造是不同的。摧毁一个物体并重建它相当于每次新房客搬进来时拆掉房子并重建它。

# ruby-on-rails - 如何获取使用 faye 发布消息的 clientId

> ID：15307273
> 
> 赞同：3
> 
> 时间：2013-03-09T04:49:03.503
> 
> 标签：ruby-on-rails, ruby-on-rails-3, sockets, thin, faye

我已经实现`faye`了聊天服务。但我想知道如何找到发布消息的那个人的 clientId。我试过这个：

```
faye_server = Faye::RackAdapter.new(:mount => '/faye', :timeout => 45)
faye_server.bind(:publish) do |clientId, channel, data|
   puts "client_id is #{clientId}"
end 
```

但它给了我一个空白ID。如何获取客户端 ID？

# google-chrome-extension - 具有自定义上下文的 Chrome 扩展上下文菜单

> ID：15307280
> 
> 赞同：2
> 
> 时间：2013-03-09T04:49:36.077
> 
> 标签：google-chrome-extension

我在我的 chome 扩展中创建了一个上下文菜单作为复选框，我成功创建了仅对可编辑字段可见的菜单。

问题是我需要根据文本字段（焦点元素）中的数据属性将菜单显示为选中状态。使用以下代码，它在全局级别显示已选中（意味着如果我在一个页面/elemebt 中检查了菜单，则其他页面/元素也将保持选中状态。）

如何根据元素的数据属性使其选中/取消选中？

```
var addinMenu = chrome.contextMenus.create({
    "title": "My Addin Menu",
    "contexts": ["editable"]
});
var disableOrEnable = chrome.contextMenus.create({
    "type": "checkbox",
    "title": "Disable",
    "parentId": addinMenu,
    "id": "myaddin_disable",
    "checked": true,
    "contexts": ["editable"],
    "onclick": disableOrEnableMyAddin
}); 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-09T05:07:02.697

[`chrome.contextMenus.update()`](http://developer.chrome.com/extensions/contextMenus.html#method-update)当菜单属性应该改变时调用，例如：

```
chrome.contextMenus.update(
  disableOrEnable,
  { type: 'checkbox', checked: false }); 
```

看起来您可以捕捉`oncontextmenu`事件并进行更改，这些更改会立即反映在发布的菜单中（但我从 Rob W 的评论中看到可能存在[竞争条件](https://stackoverflow.com/questions/13202896/creating-dynamic-context-menu-in-chrome-extension-is-failing)）。这对我有用：

```
var contextMenu = chrome.contextMenus.create(
  {
    type: 'checkbox',
    title: 'how now brown cow',
    checked: false,
    contexts: ['all']
  });

var element = document.getElementById('hello');
element.addEventListener(
  'mouseover',
  function(e) {
    element.setAttribute('underMouse', 'true');
  });
element.addEventListener(
  'mouseout',
  function(e) {
    element.setAttribute('underMouse', '');
  });

window.oncontextmenu = function(e) {
  chrome.contextMenus.update(
    contextMenu,
    {
      type: 'checkbox',
      checked: element.getAttribute('underMouse') == 'true'
    });
} 
```

如果您只对当前关注的文本字段感兴趣，您也可以更改菜单`focus`和`blur`事件。您可能还想检查菜单属性的`'editable'`选项`contexts`（不确定它的作用，但听起来可能会将菜单限制为文本输入元素）。

# c# - 在 C# 中，过滤掉这个集合的最佳方法是什么？

> ID：15307284
> 
> 赞同：3
> 
> 时间：2013-03-09T04:50:29.973
> 
> 标签：c#, collections

我有一个 Room 对象列表，每个房间对象都有一个 Building 属性；

```
 public class Room
{
      public string BuildingName;
      public string Name 
} 
```

我现在想过滤我的收藏，我只从每栋建筑物中取 1 个房间（我不在乎哪一个）

所以例如

```
 var room = new Room(){BuildingName ="Building 1", Name = "Room 1"};
 var room2 = new Room(){BuildingName ="Building 1", Name = "Room 2"};
 var room3 = new Room(){BuildingName ="Building 2", Name = "Room 3"};
 var room4 = new Room(){BuildingName ="Building 2", Name = "Room 4"};
 var room5 = new Room(){BuildingName ="Building 2", Name = "Room 5"};

 var ListofRooms = new List<Room> {room, room2, room3, room4, room5}; 
```

在这种情况下，我想通过一个函数运行这个列表，该函数将返回一个包含 2 个项目的数组（每个建筑物一个）

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-09T04:52:46.713

LINQ 对于此类任务非常方便：

```
var result = ListofRooms.GroupBy(room => room.BuildingName)
                        .Select(buildingGroup => buildingGroup.First())
                        .ToList(); 
```

这样做是为每个建筑物创建一个桶（由建筑物中的房间组成），然后从每个桶中选择一个房间，最后将选定的房间具体化为一个集合。

一些切线点：

1.  标准 C# 命名约定规定局部变量应以 camelCase ( `listOfRooms`) 命名，而不是 PascalCase ( `ListofRooms`)。
2.  如果您愿意，您可以去掉对象初始化器中无参数构造函数的括号，如下所示：`new Room { BuildingName = "Building 1", Name = "Room 1" }`

如果您不想为此使用 LINQ，我会这样做：

```
var seenBuildingNames = new HashSet<string>();
var result = new List<Room>();

foreach(var room in ListofRooms)
{
    if(seenBuildingNames.Add(room.BuildingName))
    {
        // First time we are encountering this building; add room to result.
        result.Add(room);
    }
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-09T05:43:03.710

您可以使用这种方法：

```
var result = ListofRooms.Distinct(new BuildingEqualityComparer()); 
```

课程`BuildingEqualityComparer`如下：

```
public class BuildingEqualityComparer : IEqualityComparer<Room>
{
    public bool Equals(Room x, Room y)
    {
        return x.BuildingName.Equals(y.BuildingName);
    }

    public int GetHashCode(Room obj)
    {
        return obj.BuildingName.GetHashCode();
    }
} 
```

这种方法实际上很少使用，因为您需要实现`IEqualityComparer`一个 PITA，但这只是实现您需要的另一种方法，所以如果您喜欢它或发现它更简单，请使用它！！！

# java - 使用 try catch finally 块时组织 java 代码

> ID：15307285
> 
> 赞同：5
> 
> 时间：2013-03-09T04:50:31.127
> 
> 标签：java, coding-style, try-catch

我是一个java新手。我有一个关于在使用 try catch finally 块时如何组织 java 代码的问题。假设我必须阅读一些文本文件并对存储的文件内容进行一些计算。我的代码应该如何？

例如

代码 1 看起来像：

```
public static void main(String[] args){

try{

//open files using BufferedReader, read and store the file contents.

}catch(IOException e){

e.printStackTrace();

}
finally{

//close the files

}
// do computations on the data
} 
```

代码 2 看起来像：

```
public static void main(String[] args){

try{

//open files using BufferedReader, read and store the file contents.

// do computations on the data

}catch(IOException e){

e.printStackTrace();

}
finally{

//close the files

}
} 
```

两者中哪一个是更好的编码实践？也应该在 try catch 之后放置 finally 块，或者它可以放在最后。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-09T04:55:26.120

使用 Java 7 和 try-with-resources。

```
try(Connection = pool.getConnection()) { // or any resource you open, like files
// ...

} // auto closes 
```

此功能接近弃用-一旦添加此功能，`finally`我个人还没有找到用例，建议您避免使用它。`finally`就函数式编程而言，它就像`goto`或可以说是循环`continue`，甚至是`for`循环——更新的特性使得使用变得不必要。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-09T04:54:18.970

finally 块应该放在 try-catch 之后。你想在哪里对你的数据进行计算取决于你......但如果你把它放在 try-catch 块之后，即使抛出异常，它也会尝试计算，除非你使用条件。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-09T05:01:21.150

应该使用第二种方法，因为它会更容易对数据进行计算而不会遇到变量范围问题。但是，这两种方式都可以根据需要完成的计算工作。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-09T06:39:59.937

第二。

异常的想法是，您将它们扔到检测到问题的地方，并且它们被捕获的时间不早于早期问题不再影响代码执行的第一个点。可能通过在 catch 块中进行一些处理并使用 finally 块进行一些清理。

在您的第一个代码示例中，catch 后面的代码仍然受到导致异常的错误的影响。所以你很早就抓住了它。这意味着您可能必须在其周围添加一个 if 语句，这会不必要地提高函数的复杂性。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-03-09T08:46:51.727

这取决于您的系统细节，我看到两种可能的情况：

1）**文件很大**。然后你不能将它加载到内存中。你应该一个一个地阅读文件的图片，并在每一个图片上做你的逻辑。这将防止您耗尽内存。

2）**文件小**。然后你有一个选择，是跟随第一个案例还是读取内存中的文件，关闭它然后处理它。

**还有一个考虑**：虽然文件没有关闭，但其他进程无法访问它。如果您的逻辑很长，这可能是一个问题，在这种情况下，首先读取和关闭文件会更好。

# weka - 在 WEKA 中使用带有贝叶斯网络的 FilteredClassifier

> ID：15307287
> 
> 赞同：2
> 
> 时间：2013-03-09T04:50:39.680
> 
> 标签：weka

我正在从命令行运行 WEKA 以创建用于训练的贝叶斯网络模型，然后使用该模型在单独的数据集上进行测试。贝叶斯网络使用带有简单估计器的 TAN 搜索选项。我的命令行训练调用如下所示：

```
java -cp weka.jar:mysql-connector-java-5.0.8-bin.jar  
weka.classifiers.bayes.BayesNet -d BN_model -p 0 -distribution -t tr2.arff -D 
-Q weka.classifiers.bayes.net.search.local.TAN -- -S BAYES 
-E weka.classifiers.bayes.net.estimate.SimpleEstimator -- -A 1 > tr_preds 
```

现在，我刚刚意识到我需要使用一个 FilteredClassifier，因为我想将实例 ID 添加到我的测试数据中。这就是我卡住的地方。我运行以下命令：

```
java -cp weka.jar:mysql-connector-java-5.0.8-bin.jar 
weka.classifiers.meta.FilteredClassifier 
-F weka.filters.unsupervised.attribute.Remove -R 1 
-W weka.classifiers.bayes.BayesNet -d BN_model -p 1 -distribution -t tr2.arff -D 
-Q weka.classifiers.bayes.net.search.local.TAN -- -S BAYES 
-E weka.classifiers.bayes.net.estimate.SimpleEstimator -- -A 1 > tr_preds 
```

我收到以下错误：

```
Weka exception: Illegal options: -S BAYES 
```

为了排除故障，我删除了所有花哨的搜索选项和估计器，只使用默认设置运行贝叶斯网络分类器。这工作得很好，但这显然不是我需要的。很明显，我在正确构建此命令行语句时遇到问题。

你能告诉我我做错了什么吗？非常感谢！

最好的，弗朗西斯科

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-10T16:15:23.800

问题是您的命令行参数的顺序错误。因为`-- -S BAYES`是 first `--`after `-W`，所以认为这个选项属于`weka.classifiers.bayes.BayesNet`，属于非法选项。你忘了`--`指定`-W ...`分类器的选项。

此外，一般选项，如`-t tr2.arff -d BN_model -p 1 -distribution`放在中间的某个地方，最好把它们放在你打电话的课程之后：

```
java -cp weka.jar:mysql-connector-java-5.0.8-bin.jar 
weka.classifiers.meta.FilteredClassifier
-t tr2.arff -d BN_model -p 1 -distribution
-F "weka.filters.unsupervised.attribute.Remove -R 1"
-W weka.classifiers.bayes.BayesNet
-- -D -Q weka.classifiers.bayes.net.search.local.TAN
   -- -S BAYES
   -E weka.classifiers.bayes.net.estimate.SimpleEstimator
   -- -A 1 
```

# bash - 如何使用我放在 github 中的 bash 脚本执行 chsh？

> ID：15307289
> 
> 赞同：3
> 
> 时间：2013-03-09T04:50:55.313
> 
> 标签：bash, shell, gist

我有一个要点，我总是用它来在新服务器上安装我需要的软件包。

[http://gist.github.com/4372049](http://gist.github.com/4372049)

我需要做的就是通过 ssh 在新服务器中输入以下内容

```
bash -c "$(curl -fsSL https://raw.github.com/gist/4372049)" <mysqlPassword> 
```

我会很高兴去的。

现在我有了这一系列的步骤，我总是需要在全新安装的 ubuntu 上执行。

```
first at root i did a

echo $SHELL
I saw that I have /bin/bash

then i switch to www-data

sudo su www-data
then i do a

echo $SHELL
I saw that I had

/bin/sh
instead.

So I did a

chsh -s /bin/bash
I was prompted for my www-data password so I gave it.

Password:
after that I switch back to root

exit
then i log back into www-data

sudo su www-data
I checked the $SHELL again

echo $SHELL
I saw that now it is

/bin/bash 
```

[在https://askubuntu.com/a/232663/10591](https://askubuntu.com/a/232663/10591)中列出

有没有办法编写我可以放在 gist.github.com 中的 bash 脚本，以便以类似的方式执行？

如果是这样，我该如何编写 bash 脚本？

**更新：**

我意识到我获得了结束这个问题的投票，因为它被认为过于本地化。

让我改写为

如何编写一个可以放在 gist 中并在我的 linux 控制台中使用的 bash 脚本，以便它可以接收用户名和密码的参数，从而执行命令

```
chsh -s /bin/bash 
```

并正确提供密码？

这是我的尝试：[https ://gist.github.com/simkimsia/5126919](https://gist.github.com/simkimsia/5126919)

su 工作，但不是 chsh 命令

**更新 2：**

我已将脚本更改为

```
EXPECTEDARGS=1
if [ $# -ne $EXPECTEDARGS -o "x$0" == "x"  -o $0 == "bash" ]; then
  echo "Usage:"
  echo "   Parameter 1: your username"
  echo "   Parameter 2: your password"
  exit 1
fi

CHANGESHELL_FOR_USER=$0
PASSWORD_OF_USER=$1

########################################
## switch to another user
## read this https://stackoverflow.com/a/1988255/80353
########################################
sudo -u $CHANGESHELL_FOR_USER -H sh -c "chsh -s /bin/bash" 

expect "*?assword:*" {send -- "$PASSWORD_OF_USER\r";}
expect eof 
```

在阅读[了如何在界面要求时使用 shell 脚本提供密码之后](https://stackoverflow.com/questions/2242643/how-to-use-a-shell-script-to-supply-a-password-when-the-interface-asks-for-it)

和

[https://stackoverflow.com/a/1988255/80353](https://stackoverflow.com/a/1988255/80353)

现在问题是在提示输入时以某种方式发送密码

```
Password: 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-06-18T13:03:29.450

只要您以root身份运行以下命令，就可以了。

```
chsh -s /bin/bash <username> 
```

在这种情况下，它是

```
chsh -s /bin/bash www-data 
```

见[https://gist.github.com/simkimsia/4372049#file-installation-12-10-ubuntu-sh-L373](https://gist.github.com/simkimsia/4372049#file-installation-12-10-ubuntu-sh-L373)

# ruby - rails 与模块名称连接

> ID：15307290
> 
> 赞同：3
> 
> 时间：2013-03-09T04:50:57.137
> 
> 标签：ruby, ruby-on-rails-3

这是连接两个模型的方法

```
User.where(:id => 1).joins(:posts) 
```

但是如何使用模块/命名空间加入两个模型

```
@schedules= Swimming::Classschedule.joins(:Swimming::Slot).where(:date => @date) 
```

似乎无法正常工作（带有错误消息）

```
:Swimming is not a class/module 
```

**更新**

我已更新为 @schedules= Swimming::Classschedule.joins(:swimming_slots).where(:date => @date)

我有这张桌子

```
create_table :swimming_classschedules do |t|
  t.integer :slot_id
  t.integer :coach_id
  t.integer :level_id
  t.string :note

  t.timestamps
end

create_table :swimming_slots do |t|
  t.string :date
  t.string :start
  t.string :end

  t.timestamps
end 
```

我怎么得到这个错误

```
Association named 'swimming_slots' was not found; perhaps you misspelled it? 
```

**更新 2**

将此行添加到 Swimming::Classschedule 模块

belongs_to :swimming_slots ,:class_name=>'Swimming::Slot',:foreign_key => "slot_id"

和

将连接更改为

```
@schedules= Swimming::Classschedule.joins(:swimming_slots).where(:swimming_slots =>{:date => @date}) 
```

现在它可以工作了

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-09T05:01:07.217

您将关联名称传递给加入。例如，如果你有一个像

```
has_many :swimming_slots, class_name: 'Swimming::Classschedule' 
```

然后你通过`swimming_slots`，rails 会为你做连接。

```
User.joins(:swimming_slots) 
```

更新：

如果`slot_id`引用`swimming_slots`表中的记录，你应该有类似的东西

```
belongs_to :slot, class_name: 'Swimming::Slot' 
```

在您的课程表模型中。如果你有这个，你应该能够做到

```
Swimming::Classschedule.joins(:slot) 
```

# spring - 检查哪些 bean 已在 spring 上下文中加载

> ID：15307292
> 
> 赞同：8
> 
> 时间：2013-03-09T04:51:09.523
> 
> 标签：spring, spring-mvc

我在测试和部署中遇到了一系列奇怪的错误。它们似乎表明我的一些 bean 没有加载到上下文中，尽管它们是在 applicationContext.xml 中定义的。

有没有办法在测试期间检查实际加载了哪些 bean？还是要查找在运行时加载的完整 bean 列表？

谢谢，乙

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-03-09T05:15:24.677

在启动时，Spring 在信息级别记录上下文加载的所有 bean 的名称。或者在代码中，您可以使用[`getBeanDefinitionNames()`](http://static.springsource.org/spring/docs/current/javadoc-api/org/springframework/beans/factory/ListableBeanFactory.html#getBeanDefinitionNames%28%29)来获取所有 bean 名称。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-09T15:52:55.207

如果有多个上下文说如果你使用的是 spring mvc，你可以使用像这样更强大的东西。

```
public class SampleContextApplicationListener implements ApplicationListener<ApplicationContextEvent> {

    private Map<String,ApplicationContext> contextMap = new Hashtable<String,ApplicationContext>();

    @Override
    public void onApplicationEvent(ApplicationContextEvent event) {
        if( event instanceof ContextStartedEvent || event instanceof ContextRefreshedEvent){
            this.getContextMap().put(event.getApplicationContext().getDisplayName(), event.getApplicationContext());
        }

    }

    public Map<String,ApplicationContext> getContextMap() {
        return contextMap;
    }   
} 
```

然后，您可以在需要的地方注入侦听器，并提取上下文映射，然后使用`getBeanDefinitionNames()`

```
@Autowired
private StatusTestsApplicationListener listener; 
```

# javascript - 如何在没有 JQuery 的情况下获取一组 DIV ID

> ID：15307294
> 
> 赞同：4
> 
> 时间：2013-03-09T04:51:15.847
> 
> 标签：javascript, class, html

我有一堆链接，它们的 id 与附加到其他链接的类相对应。我将链接 ID 作为变量传递，然后使用该变量通过 JavaScript 按类查找其他链接。这是一个代码示例：

```
 var elements = document.getElementsByClassName(id);
    for(var i=0; i<elements.length; i++){} 
```

到目前为止一切顺利，我可以对这些相关链接做任何我想做的事情。但是，现在我想获取这些链接所在的 div 的 ID。有没有什么方法可以在不使用 JQuery 的情况下使用 JavaScript 来查找链接的 div id？

在你问之前，为什么不直接使用 JQuery？我是新手，还没有学过 JQuery。此外，在尝试学习其他东西之前，我想了解如何在 JavaScript 中做事。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-09T04:54:04.347

要访问父元素 ID，您可以使用：

```
var elementId = elements[i].parentNode.id; 
```

有关更多信息，请参见此处：[获取元素的父 div](https://stackoverflow.com/questions/6856871/getting-parent-div-of-element-javascript)

要找到最近的 DIV 父级，您应该能够执行以下操作：

```
var elements = document.getElementsByClassName(id);
for(var i=0; i<elements.length; i++){
    var parent = elements[i].parentNode;

    while (parent.localName != null && parent.localName.toLowerCase() != "div") {
        parent = parent.parentNode;
    }

    if (parent != null && parent.id != null) {
        var parentId = parent.id;

        alert(parentId);
    }
} 
```

编辑：刚刚添加了一些空检查，以防类不包含在任何 DIV 中。

这是我使用的测试：

```
<html>
<body>
    <div id="asdf">
        <a href="#" class="blah">1</a>
        <a href="#" class="blah">2</a>
    </div>
    <div id="asdf2">
        <span>
            <a href="#" class="blah">3</a>
            <a href="#" class="blah">4</a>
        </span>
    </div>
    <!-- These two won't cause an alert since no DIV surrounds them -->
    <a href="#" class="blah">5</a>
    <a href="#" class="blah">6</a>
    <div id="asdf3">
        <span>
            <a href="#" class="blah">7</a>
            <a href="#" class="blah">8</a>
        </span>
    </div>

    <input type="button" onclick="run();return false;" value="Run" />

    <script>
    // This will cause 6 alerts: asdf, asdf, asdf2, asdf2, asdf3, asdf3
    function run() {
        var elements = document.getElementsByClassName("blah");
        for(var i=0; i<elements.length; i++){
            var parent = elements[i].parentNode;

            while (parent.localName != null && parent.localName.toLowerCase() != "div") {
                parent = parent.parentNode;
            }

            if (parent != null && parent.id != null) {
                var parentId = parent.id;

                alert(parentId);
            }
        }
    }
    </script>
</body>
</html> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-09T04:56:23.790

您可以使用[`element.parentNode.id`](https://developer.mozilla.org/en-US/docs/DOM/Node.parentNode)来获取父元素的`id`属性。

# ruby-on-rails - 我们总是对外键使用引用类型吗？

> ID：15307296
> 
> 赞同：0
> 
> 时间：2013-03-09T04:51:32.283
> 
> 标签：ruby-on-rails

正如标题所说，我们总是对外键使用类型引用吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-09T04:57:06.587

不，你不必。

正如 Rails 指南中所述：http: [//guides.rubyonrails.org/migrations.html#special-helpers](http://guides.rubyonrails.org/migrations.html#special-helpers)

> 另一个帮助器称为引用（也可用作belongs_to）。它最简单的形式只是增加了一些可读性。

另一种选择，在迁移中，您可以声明：

```
t.integer :account_id # where :account_id will hold the id being referenced to for a belongs_to 
```

举个例子。rails 指南示例是这样的：

```
create_table :products do |t|
  t.references :category
end 
```

但你也可以这样做：

```
create_table :products do |t|
  t.integer :category_id
end 
```

# emacs - Cedet 完成菜单

> ID：15307297
> 
> 赞同：1
> 
> 时间：2013-03-09T04:51:32.693
> 
> 标签：emacs, cedet, emacs24

我正在使用emacs24。我想获得我在eclipse中获得的自动完成体验。即： - 在按下例如 C-RETURN 时，获取一个菜单，当我键入方法的名称时它会即时更新；我还想使用箭头浏览选项 - 从菜单中单击完成后，我希望有类似工具提示的内容，其中包含特定方法的文档（如果找到）

semantic-ia-complete-symbol 打开一个新的缓冲区。默认情况下，emacs（内置）不提供语义 ia-complete-symbol-menu。即使这样做了，它也不会即时更新自己，而且我没有文档。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-05-18T19:18:41.927

这并不能回答你所有的问题，但它是一个开始：

```
;; shows a menu by clicking CTRL-RETURN
(global-set-key (kbd "C-<return>") 'auto-complete)

;; allow to navigate the autocompletion menu with <up> and <down>
(setq ac-use-menu-map t)
(define-key ac-menu-map "<down>" 'ac-next)
(define-key ac-menu-map "<up>" 'ac-previous) 
```

# shell - 如果此查找脚本返回结果，如何“退出 1”

> ID：15307298
> 
> 赞同：2
> 
> 时间：2013-03-09T04:51:39.257
> 
> 标签：shell, scripting, find

我对脚本不是很熟悉，但我正在努力学习。我遇到了一个脚本，我需要使用它来检查 Xcode 中的构建过程。如果此查找操作返回结果，我需要“退出 1”。或者停止构建。

```
TAGS="TODO:|FIXME:"
find "${SRCROOT}" \( -name "*.h" -or -name "*.m" \) -print0 |
  xargs -0 egrep --with-filename --line-number --only-matching "($TAGS).*\$" |
  perl -p -e "s/($TAGS)/ error: \$1/" 
```

那么，如果我找到了一些东西，但如果我没有找到，我该怎么做才能退出？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-09T05:23:03.313

默认情况下，管道的退出状态是管道中最后一条命令的状态。因此，您希望`perl`进程在打印任何内容时以 1 退出，如果不打印则以 0 退出。

```
perl -p -e "\$match = 1 if s/($TAGS)/ error: \$1/; END { exit \$match; }" 
```

注意：之前添加的空间`error`。

* * *

测试：

```
$ cat so15307298.sh
TAGS="TODO:|FIXME:"
SRCROOT=.
find "${SRCROOT}" \( -name "*.h" -or -name "*.m" \) -print0 |
  xargs -0 egrep --with-filename --line-number --only-matching "($TAGS).*\$" |
perl -p -e "\$match = 1 if s/($TAGS)/ error: \$1/; END { exit \$match; }"
$ echo "TODO: this is a problem" > x1.h
$ echo "FIXME: this is a problem too" > x2.h
$ echo "Allez oop" > x3.h
$ sh -x so15307298.sh
+ TAGS='TODO:|FIXME:'
+ SRCROOT=.
+ find . '(' -name '*.h' -or -name '*.m' ')' -print0
+ xargs -0 egrep --with-filename --line-number --only-matching '(TODO:|FIXME:).*$'
+ perl -p -e '$match = 1 if s/(TODO:|FIXME:)/error: $1/; END { exit $match; }'
./x1.h:1: error: TODO: this is a problem
./x2.h:1: error: FIXME: this is a problem too
$ 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-09T05:18:46.113

```
FILES=$(find "${SRCROOT}" \( -name "*.h" -or -name "*.m" \) -print0)
if [ "x$FILES" == "x" ]; then
  exit 1
fi 
```

# python - 从 Excel 数据创建结构化列表

> ID：15307301
> 
> 赞同：0
> 
> 时间：2013-03-09T04:51:53.140
> 
> 标签：python, excel, list, format, line

大家好，我正在使用 Python 2.7.3，我正在尝试构建我的输出列表，其中数据在每个类别下打印。

我的数据如下：

```
('State', 'Heart Disease Death Rate (2007)', 'Motor Vehicle Death Rate (2009)', 'Teen Birth Rate (2009)', 'Adult Smoking (2010)', 'Adult Obesity (2010)')

('Alabama', '235.5', '18.01', '50.7', '21.90%', '33.00%')
('Alaska', '147.9', '9.16', '44.5', '20.40%', '25.20%')
('Arizona', '152.5', '12.24', '50.6', '13.50%', '24.70%')
('Arkansas', '221.8', '20.25', '59.3', '22.90%', '30.90%')
('California', '177.9', '8.34', '36.6', '12.10%', '24.70%') 
```

我需要将列表读取为：

```
 'State', 'Heart Disease', Vehicle Death Rate', 'Teen Birth Rate', 'Adult Smoking , 'Adult Obesity

Alabama'        '235.5',        18.01',             '50.7',          '21.90%',        33.00%' 
Alaska,        '147.9',         '9.16',             '44.5',          '20.40%',        25.20% 
Arizona',      '152.5',         '12.24', '           50.6',          '13.50%',       '24.70%'
Arkansas',      '221.8',        '20.25',            '59.3',          '22.90%',       '30.90%' 
```

继承人我到目前为止：

```
import csv
import pandas
import string, re

output = []
file1 = []

risk = open('riskfactors.csv', 'r').read() #find the file
reader = csv.reader(risk, delimiter='\t', quotechar='|')

try:
   with open('riskfactors.csv', 'rU') as file1:
    for line in file1:
        cells = line.split(",")
        output.append((cells[0], cells[1], cells[5], cells[7], cells[11], cells[13]))
    for elem in output:
        print(elem) 
```

没有错误

我需要 2.7.3 因为它是我使用的唯一方法`import pandas`。

我应该怎么做才能正确打印？

我觉得我很接近，我错过了什么？任何建议将不胜感激。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-09T05:28:57.977

要将列表打印为格式化字符串，您可以使用 string.format 函数，它可以让您用空格将值填充到指定长度。

例如，如果你要做

```
print "{0:<20}".format( "test" ) 
```

你可以得到“test”，它是带有空格的格式字符串，可以组成 20 个字符。您可以使用它来创建一个表格结构，其中所有的列都是固定的宽度。请注意，如果格式字符串超过 20 个（在本例中）字符，则它不会截断它，您必须自己处理（即，将“心脏病死亡率 (2007)”更改为“心脏病”。

因此，在您的示例中，您可以使用以下代码显示字符串

```
outstring = ""
for item in output:
    for cell in item:
        outstring += "{0:<20}  ".format( cell ) #change 20 to whatever you want the column width to be
    outstring += "\n"

print outstring 
```

# ruby-on-rails-3 - CarrierWave 显示 image_url 错误

> ID：15307302
> 
> 赞同：3
> 
> 时间：2013-03-09T04:51:55.523
> 
> 标签：ruby-on-rails-3

我正在使用 CarrierWave 将图像上传到我的服务器。但是，当我使用 image_url 引用它们时，我得到一个 NoMethodError for nil:NilClass for `image_url`.

**应用程序/资产/视图/相册/index.html.erb**

```
<% @albums.each do |album| %>
....
<div>
    <%= image_tag @album.image_url.to_s %>
</div>
<%end%> 
```

**应用程序/配置/路由.rb**

```
namespace :admin do
    root :to => "dashboard#index"
    resources :dashboard
    resources :albums do
        resources :images
end
    get "admin/album" 
```

**应用程序/资产/视图/相册/new.html.erb**

```
<div>
    <%= f.file_field :image %>
</div> 
```

**应用程序/资产/模型/Image.rb**

```
class Image < ActiveRecord::Base
    attr_accessible :album_id, :title, :image
    belongs_to :album
    mount_uploader :image, ImageUploader
end 
```

**image_uploader.rb**

```
 # encoding: utf-8

class ImageUploader < CarrierWave::Uploader::Base

  # Include RMagick or MiniMagick support:
  # include CarrierWave::RMagick
  # include CarrierWave::MiniMagick

  # Include the Sprockets helpers for Rails 3.1+ asset pipeline compatibility:
  # include Sprockets::Helpers::RailsHelper
  # include Sprockets::Helpers::IsolatedHelper

  # Choose what kind of storage to use for this uploader:
  storage :file
  # storage :fog

  # Override the directory where uploaded files will be stored.
  # This is a sensible default for uploaders that are meant to be mounted:
  def store_dir
    "uploads/#{model.class.to_s.underscore}/#{mounted_as}/#{model.id}"
  end

  # Provide a default URL as a default if there hasn't been a file uploaded:
  # def default_url
  #   # For Rails 3.1+ asset pipeline compatibility:
  #   # asset_path("fallback/" + [version_name, "default.png"].compact.join('_'))
  #
  #   "/images/fallback/" + [version_name, "default.png"].compact.join('_')
  # end

  # Process files as they are uploaded:
  # process :scale => [200, 300]
  #
  # def scale(width, height)
  #   # do something
  # end

  # Create different versions of your uploaded files:
  # version :thumb do
  #   process :scale => [50, 50]
  # end

  # Add a white list of extensions which are allowed to be uploaded.
  # For images you might use something like this:
  # def extension_white_list
  #   %w(jpg jpeg gif png)
  # end

  # Override the filename of the uploaded files:
  # Avoid using model.id or version_name here, see uploader/store.rb for details.
  # def filename
  #   "something.jpg" if original_filename
  # end

end 
```

我已经尝试了几个小时来修复这个错误。我可以通过将`image_tag`路径设置为 来消除错误`image_url(@album)`，但这不会显示图像。

**更多信息**

```
app/views/admin/albums/index.html.erb:15:in      `_app_views_admin_albums_index_html_erb__180744457_2201702940'
app/views/admin/albums/index.html.erb:3:in `each'
app/views/admin/albums/index.html.erb:3:in `_app_views_admin_albums_index_html_erb__180744457_2201702940'
actionpack (3.2.11) lib/action_view/template.rb:145:in `send'
actionpack (3.2.11) lib/action_view/template.rb:145:in `render'
activesupport (3.2.11) lib/active_support/notifications.rb:125:in `instrument'
actionpack (3.2.11) lib/action_view/template.rb:143:in `render'
actionpack (3.2.11) lib/action_view/renderer/template_renderer.rb:47:in `render_template'
actionpack (3.2.11) lib/action_view/renderer/abstract_renderer.rb:38:in `instrument'
activesupport (3.2.11) lib/active_support/notifications.rb:123:in `instrument'
activesupport (3.2.11) lib/active_support/notifications/instrumenter.rb:20:in `instrument'
activesupport (3.2.11) lib/active_support/notifications.rb:123:in `instrument'
actionpack (3.2.11) lib/action_view/renderer/abstract_renderer.rb:38:in `instrument'
actionpack (3.2.11) lib/action_view/renderer/template_renderer.rb:46:in `render_template'
actionpack (3.2.11) lib/action_view/renderer/template_renderer.rb:54:in `render_with_layout'
actionpack (3.2.11) lib/action_view/renderer/template_renderer.rb:45:in `render_template'
actionpack (3.2.11) lib/action_view/renderer/template_renderer.rb:18:in `render'
actionpack (3.2.11) lib/action_view/renderer/renderer.rb:36:in `render_template'
actionpack (3.2.11) lib/action_view/renderer/renderer.rb:17:in `render'
actionpack (3.2.11) lib/abstract_controller/rendering.rb:110:in `_render_template'
actionpack (3.2.11) lib/action_controller/metal/streaming.rb:225:in `_render_template'
actionpack (3.2.11) lib/abstract_controller/rendering.rb:103:in `render_to_body'
actionpack (3.2.11) lib/action_controller/metal/renderers.rb:28:in `render_to_body'
actionpack (3.2.11) lib/action_controller/metal/compatibility.rb:50:in `render_to_body'
actionpack (3.2.11) lib/abstract_controller/rendering.rb:88:in `render'
actionpack (3.2.11) lib/action_controller/metal/rendering.rb:16:in `render'
actionpack (3.2.11) lib/action_controller/metal/instrumentation.rb:40:in `render'
activesupport (3.2.11) lib/active_support/core_ext/benchmark.rb:5:in `ms'
/System/Library/Frameworks/Ruby.framework/Versions/1.8/usr/lib/ruby/1.8/benchmark.rb:308:in `realtime'
activesupport (3.2.11) lib/active_support/core_ext/benchmark.rb:5:in `ms'
actionpack (3.2.11) lib/action_controller/metal/instrumentation.rb:40:in `render'
actionpack (3.2.11) lib/action_controller/metal/instrumentation.rb:83:in `cleanup_view_runtime'
activerecord (3.2.11) lib/active_record/railties/controller_runtime.rb:24:in `cleanup_view_runtime'
actionpack (3.2.11) lib/action_controller/metal/instrumentation.rb:39:in `render'
actionpack (3.2.11) lib/action_controller/metal/implicit_render.rb:10:in `default_render'
actionpack (3.2.11) lib/action_controller/metal/implicit_render.rb:5:in `send_action'
actionpack (3.2.11) lib/abstract_controller/base.rb:167:in `process_action'
actionpack (3.2.11) lib/action_controller/metal/rendering.rb:10:in `process_action'
actionpack (3.2.11) lib/abstract_controller/callbacks.rb:18:in `process_action'
activesupport (3.2.11) lib/active_support/callbacks.rb:425:in `_run__1857940186__process_action__440895155__callbacks'
activesupport (3.2.11) lib/active_support/callbacks.rb:405:in `send'
activesupport (3.2.11) lib/active_support/callbacks.rb:405:in `__run_callback'
activesupport (3.2.11) lib/active_support/callbacks.rb:385:in `_run_process_action_callbacks'
activesupport (3.2.11) lib/active_support/callbacks.rb:81:in `send'
activesupport (3.2.11) lib/active_support/callbacks.rb:81:in `run_callbacks'
actionpack (3.2.11) lib/abstract_controller/callbacks.rb:17:in `process_action'
actionpack (3.2.11) lib/action_controller/metal/rescue.rb:29:in `process_action'
actionpack (3.2.11) lib/action_controller/metal/instrumentation.rb:30:in `process_action'
activesupport (3.2.11) lib/active_support/notifications.rb:123:in `instrument'
activesupport (3.2.11) lib/active_support/notifications/instrumenter.rb:20:in `instrument'
activesupport (3.2.11) lib/active_support/notifications.rb:123:in `instrument'
actionpack (3.2.11) lib/action_controller/metal/instrumentation.rb:29:in `process_action'
actionpack (3.2.11) lib/action_controller/metal/params_wrapper.rb:207:in `process_action'
activerecord (3.2.11) lib/active_record/railties/controller_runtime.rb:18:in `process_action'
actionpack (3.2.11) lib/abstract_controller/base.rb:121:in `process'
actionpack (3.2.11) lib/abstract_controller/rendering.rb:45:in `process'
actionpack (3.2.11) lib/action_controller/metal.rb:203:in `dispatch'
actionpack (3.2.11) lib/action_controller/metal/rack_delegation.rb:14:in `dispatch'
actionpack (3.2.11) lib/action_controller/metal.rb:246:in `action'
actionpack (3.2.11) lib/action_dispatch/routing/route_set.rb:73:in `call'
actionpack (3.2.11) lib/action_dispatch/routing/route_set.rb:73:in `dispatch'
actionpack (3.2.11) lib/action_dispatch/routing/route_set.rb:36:in `call'
journey (1.0.4) lib/journey/router.rb:68:in `call'
journey (1.0.4) lib/journey/router.rb:56:in `each'
journey (1.0.4) lib/journey/router.rb:56:in `call'
actionpack (3.2.11) lib/action_dispatch/routing/route_set.rb:601:in `call'
actionpack (3.2.11) lib/action_dispatch/middleware/best_standards_support.rb:17:in `call'
rack (1.4.5) lib/rack/etag.rb:23:in `call'
rack (1.4.5) lib/rack/conditionalget.rb:25:in `call'
actionpack (3.2.11) lib/action_dispatch/middleware/head.rb:14:in `call'
actionpack (3.2.11) lib/action_dispatch/middleware/params_parser.rb:21:in `call'
actionpack (3.2.11) lib/action_dispatch/middleware/flash.rb:242:in `call'
rack (1.4.5) lib/rack/session/abstract/id.rb:210:in `context'
rack (1.4.5) lib/rack/session/abstract/id.rb:205:in `call'
actionpack (3.2.11) lib/action_dispatch/middleware/cookies.rb:341:in `call'
activerecord (3.2.11) lib/active_record/query_cache.rb:64:in `call'
activerecord (3.2.11) lib/active_record/connection_adapters/abstract/connection_pool.rb:479:in `call'
actionpack (3.2.11) lib/action_dispatch/middleware/callbacks.rb:28:in `call'
activesupport (3.2.11) lib/active_support/callbacks.rb:405:in `_run__1915890415__call__4__callbacks'
activesupport (3.2.11) lib/active_support/callbacks.rb:405:in `send'
activesupport (3.2.11) lib/active_support/callbacks.rb:405:in `__run_callback'
activesupport (3.2.11) lib/active_support/callbacks.rb:385:in `_run_call_callbacks'
activesupport (3.2.11) lib/active_support/callbacks.rb:81:in `send'
activesupport (3.2.11) lib/active_support/callbacks.rb:81:in `run_callbacks'
actionpack (3.2.11) lib/action_dispatch/middleware/callbacks.rb:27:in `call'
actionpack (3.2.11) lib/action_dispatch/middleware/reloader.rb:65:in `call'
actionpack (3.2.11) lib/action_dispatch/middleware/remote_ip.rb:31:in `call'
actionpack (3.2.11) lib/action_dispatch/middleware/debug_exceptions.rb:16:in `call'
actionpack (3.2.11) lib/action_dispatch/middleware/show_exceptions.rb:56:in `call'
railties (3.2.11) lib/rails/rack/logger.rb:32:in `call_app'
railties (3.2.11) lib/rails/rack/logger.rb:16:in `call'
activesupport (3.2.11) lib/active_support/tagged_logging.rb:22:in `tagged'
railties (3.2.11) lib/rails/rack/logger.rb:16:in `call'
actionpack (3.2.11) lib/action_dispatch/middleware/request_id.rb:22:in `call'
rack (1.4.5) lib/rack/methodoverride.rb:21:in `call'
rack (1.4.5) lib/rack/runtime.rb:17:in `call'
activesupport (3.2.11) lib/active_support/cache/strategy/local_cache.rb:72:in `call'
rack (1.4.5) lib/rack/lock.rb:15:in `call'
actionpack (3.2.11) lib/action_dispatch/middleware/static.rb:62:in `call'
railties (3.2.11) lib/rails/engine.rb:479:in `call'
railties (3.2.11) lib/rails/application.rb:223:in `call'
rack (1.4.5) lib/rack/content_length.rb:14:in `call'
railties (3.2.11) lib/rails/rack/log_tailer.rb:17:in `call'
rack (1.4.5) lib/rack/handler/webrick.rb:59:in `service'
/System/Library/Frameworks/Ruby.framework/Versions/1.8/usr/lib/ruby/1.8/webrick/httpserver.rb:104:in `service'
/System/Library/Frameworks/Ruby.framework/Versions/1.8/usr/lib/ruby/1.8/webrick/httpserver.rb:65:in `run'
/System/Library/Frameworks/Ruby.framework/Versions/1.8/usr/lib/ruby/1.8/webrick/server.rb:173:in `start_thread'
/System/Library/Frameworks/Ruby.framework/Versions/1.8/usr/lib/ruby/1.8/webrick/server.rb:162:in `start'
/System/Library/Frameworks/Ruby.framework/Versions/1.8/usr/lib/ruby/1.8/webrick/server.rb:162:in `start_thread'
/System/Library/Frameworks/Ruby.framework/Versions/1.8/usr/lib/ruby/1.8/webrick/server.rb:95:in `start'
/System/Library/Frameworks/Ruby.framework/Versions/1.8/usr/lib/ruby/1.8/webrick/server.rb:92:in `each'
/System/Library/Frameworks/Ruby.framework/Versions/1.8/usr/lib/ruby/1.8/webrick/server.rb:92:in `start'
/System/Library/Frameworks/Ruby.framework/Versions/1.8/usr/lib/ruby/1.8/webrick/server.rb:23:in `start'
/System/Library/Frameworks/Ruby.framework/Versions/1.8/usr/lib/ruby/1.8/webrick/server.rb:82:in `start'
rack (1.4.5) lib/rack/handler/webrick.rb:13:in `run'
rack (1.4.5) lib/rack/server.rb:268:in `start'
railties (3.2.11) lib/rails/commands/server.rb:70:in `start'
railties (3.2.11) lib/rails/commands.rb:55
railties (3.2.11) lib/rails/commands.rb:50:in `tap'
railties (3.2.11) lib/rails/commands.rb:50
script/rails:6:in `require'
script/rails:6 
```

**应用程序/资产/视图/相册/index.html.erb**

```
 <h1>These are the albums</h1>
 <% @albums.each do |album| %>
 <div class="item" style="background: #e4e4e4; border: 2px solid #c9c9c9; padding:1.5em  0 1.5em 0; width:17em; font-family: 'Signika Negative';">
 <div class="title" style="background: #d3d3d3; display: inline-block; padding:1.5em 0      1.5em 1em; width: 12em;">
<strong>Title</strong> </br>
<%= album.title %></div>
 </br>
 <div class="description" style="background: #f9f9f9; display: inline-block; padding: 1.5em 0 1.5em 1em; width: 12em;">
<strong>Description</strong> </br>
<%= album.description %>
 </div>
</br>
<div>
<%= image_tag album.image.image_url.to_s %>
</div>
<div>

</div>
<%= link_to "Delete", admin_album_path(album), :method => :delete, :style => "margin: 1em 0 0 1em; display: block;" %>
</br>
</div>
<% end %>
<%=link_to "New Album", :controller => "albums", :action => "new" %>
<%=link_to "Manage Pictures"%> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-09T10:20:10.747

你似乎有从相册到图像的关系。假设专辑 has_many 您需要的图片：

```
@albums.each do |album|
  album.images.each{|image| image.image_url }
end 
```

# mysql - 使用数据库结果的 Cron 作业

> ID：15307313
> 
> 赞同：0
> 
> 时间：2013-03-09T04:53:54.660
> 
> 标签：mysql, variables, ffmpeg, cron

我需要帮助来创建 cron 作业脚本。基本上，我想抓取下一个预定项目并通过 ffmpeg 运行它以进行流式传输。这将是 mysql 查询（我使用 PHP 变量来指示应该去那里 - 我实际上并不知道变量在 cron 作业中是如何工作的）：

```
SELECT show.file FROM show, schedule
WHERE channel = 1 AND start_time <= $current_time; 
```

这将是 ffmpeg 命令：

```
ffmpeg -re -i $file http://127.0.0.1:8090/feed.ffm 
```

我将如何创建一个 cron 作业来执行这些命令？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-09T06:29:35.213

首先恕我直言，您不需要将当前时间传递给您的选择语句，只需使用`CURRENT_TIME`

```
SELECT `show.file` 
  FROM show, schedule 
 WHERE channel = 1 AND start_time <= CURRENT_TIME; 
```

*根据您实际表的 DDL **，您可能需要**进行一些转换才能正确比较时间值。*

假设您的查询正确并**仅返回一个文件名**，您可以使用 mysql 执行查询，将结果输出到预定义文件并使用`&&`链接`ffmpeg`命令

```
mysql -u user -ppassword dbname -sN -e \
 "SELECT show.file \
 FROM show, schedule \
 WHERE channel = 1 AND start_time <= CURRENT_TIME" > /tmp/cur_show_file && \
 ffmpeg -re -i /tmp/cur_show_file http://127.0.0.1:8090/feed.ffm 
```

# wordpress - 更改wordpress插件的字体

> ID：15307316
> 
> 赞同：0
> 
> 时间：2013-03-09T04:54:57.577
> 
> 标签：wordpress

我最近为我的 wordpress 网站购买了一个名为“pull out widget”的插件，我不喜欢插件上的字体。有没有办法可以更改其字体并改用 Google 字体。任何帮助，将不胜感激。我尝试编辑插件，但我不太了解 PHP。而且我不想弄乱插件所以我放弃了。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-11T08:24:27.867

您可以通过主题的自定义 CSS 更改字体 - 所有拉出小部件都包装在 ID 为 #pullouts 的 div 中。自定义 CSS 将否决拉出小部件的 css。

因此，只需进入您的自定义 css，并使用 Firebug 或其他东西来确定如果您不确定要调用什么类....当然这是假设您下载了谷歌字体插件 - [http://wordpress.org/扩展/插件/wp-google-fonts/](http://wordpress.org/extend/plugins/wp-google-fonts/)

# php - 创建用户 ID（最佳路线）

> ID：15307318
> 
> 赞同：2
> 
> 时间：2013-03-09T04:55:01.353
> 
> 标签：php, mysql

我正在寻找编写 php/mysql 查询以创建唯一用户 ID 的最佳方法，而不是使用 mysql 中的自动增量方法。

例如：Facebook 给用户一长串数字作为用户 ID，然后你才能分配用户名。这串数字可用于查看您的个人资料，或者您可以使用用户名。我希望用户将来能够更改用户名，所以不想根据用户名设计我的系统。

我不知道该网站会有多大，所以请在解决方案中考虑到这一点。如果有很多用户注册，我不想要服务器密集型的东西。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-09T05:02:29.683

对于这样的事情，真的没有*最好的路线*。本质上，您需要问自己您的系统需要什么。您可以使用电子邮件地址作为 ID、自动递增的数字、MD5 哈希，甚至是重熵 GUID。

请记住，电子邮件地址可能会发生变化，自动递增的数字可以在自动漏洞利用中被利用，并且在技术上存在一些哈希冲突的可能性。

如果您决定使用 PHP 生成高熵 GUID，则可以使用类似[`uniqid`](http://php.net/manual/en/function.uniqid.php).

```
echo uniqid(); // 513ac40699d85
echo uniqid("_", true); // _513ac3e00bfe46.78760239 
```

第二行显示了您可以提供的两个参数；前缀和对更多熵的请求，这将导致更独特的结果。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-09T05:11:07.433

你应该遵循这样的算法：

1.  将新用户输入数据库。
2.  获取记录ID
3.  生成用户ID
4.  将名称旁边的用户 ID 插入 sql 数据库。

**将新用户输入数据库。**

```
//get username from previous form
$user=$_POST['user'];
// login into mysql server and prepare data for writing
$connect=mysql_connect('localhost', $user, $pass);
$selectdb = mysql_select_db('mydb');
$query = "insert into users_table set
username='$user';";
$run_query=mysql_query($query); 
```

**获取记录ID**

```
$id=mysql_insert_id(); 
```

**生成用户ID**

```
$first_chars=substr($user, 2);
$year=date('y');
$new_user_id= $first_chars.$year.$id; 
```

**将名称旁边的 UserID 插入 sql 数据库**

```
$query="update users_table set userid='$new_user_id' where id='$id';";
$run_query=mysql_query($query);
if (!$run_query) {
   echo mysql_error();
}
else {
   echo 'your user name is '.$user.' and user id is '.$new_user_id ; } 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-09T04:58:56.483

您可以使用 mysql 作为数据库。Wampserver 结合了一切，让一切变得简单。但是，我不确定我是否可以为您提供很多帮助，因为您的问题非常模糊。请添加更多细节。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-09T05:10:29.230

使用 sha 或 md5 之类的 hexdigest 生成类似的 id`sha1($uname+$timestamp+$salt)`

通过这样做，您将为每个条目存储大量数据，因为 sha1 占用 40 个字节。您已经提到该站点可能会变大，从而产生大量数据。决定它是否值得那么多空间。

PS：你总是可以切片字符串，但碰撞机会更多。

# nginx - 用于启用 SSI nginx 的配置？

> ID：15307320
> 
> 赞同：2
> 
> 时间：2013-03-09T04:55:21.693
> 
> 标签：nginx, ssi

我想做服务器端包含，我的机器上安装了 nginx 服务器，但我找不到在 nginx.conf 文件中启用 ssi 的方法？我只能从互联网上找到

```
syntax: ssi on | off;
default:    
ssi off;
context:    http, server, location, if in location 
```

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-03-19T15:51:57.950

在位置上下文上启用 ssi。在我的情况下，我希望它在根

```
location / {
   ssi on;
} 
```

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2014-02-03T14:44:47.663

看起来你遇到了和我一样的问题；找到关于如何在 NGINX 上启用 SSI 的清晰解释。Crystal Clear 不仅需要使用哪种语法，还需要格式以及包含它的确切位置。我想通了，这并不难，但是互联网上缺乏明确的说明令人沮丧。

您需要打开 nginx.conf 文件并查找格式如下的部分（我也包含了 'ssi on' 语法）：

```
location / {
            root   E:\website\FinalJRLWeb;
            index  index.html index.shtml;
            ssi on;
        } 
```

我花了一点时间才意识到这个位置，但它真的很简单，就像在指定的索引文件名下面添加'ssi on'行一样简单（它应该能够真正去你想要的任何地方，我不认为顺序很重要，只要它在两个括号内 {})。

之后，要验证 SSI 是否在您的 NGINX 服务器上运行，请在空白 html 页面的“body”标签中的任意位置添加以下行

```
<!--#echo var="DATE_LOCAL" --> 
```

并将其以扩展名 .shtml 保存在您的 Web 服务器的根目录中。

您应该会在访问您的页面时看到服务器的本地日期和时间。我意识到这已经快一年了，但是在我试图找到明确的指示感到沮丧之后，我想尽我所能为可能需要它们的其他人提供明确的指示。所以希望这会帮助别人！

这是 NGINX 在 SSI 上的文档页面（老实说，它并没有像我希望的那样帮助我，但它仍然很有用，而且只会变得越来越有用）

[http://nginx.org/en/docs/http/ngx_http_ssi_module.html#ssi_last_modified](http://nginx.org/en/docs/http/ngx_http_ssi_module.html#ssi_last_modified)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2019-07-30T19:45:23.277

## 在 NGINX 上为单个域启用 SSI

要**仅为一个域启用 SSI（限制可能的安全漏洞），您可以将其添加到该****域的 .conf 文件中，**如下所示- 在 Debian 中，这些（对某些人有争议）存储在类似 Apache 的系统中的“etc/nginx”下/站点可用”。

```
server {
  server_name mydomain.com;

  root /home/username/html;
  index index.html index.shtml;

  location / {
    ssi on;
    ...otherstuffhere
  }
} 
```

关键部分：

*   `index index.html index.shtml;`
*   `ssi on;`

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2017-09-04T08:29:44.043

默认情况下 ssi 仅适用于`text/html`MIME 类型；这可能会让您感到沮丧，尽管此处已明确记录[http://nginx.org/en/docs/http/ngx_http_ssi_module.html#ssi_types](http://nginx.org/en/docs/http/ngx_http_ssi_module.html#ssi_types)

您可能需要添加

```
ssi on;
ssi_types *;  # Or something more specific 
```

# c - C程序为了在文件中找到给定的句子

> ID：15307340
> 
> 赞同：1
> 
> 时间：2013-03-09T04:47:16.877
> 
> 标签：c

我正在编写一个 C 程序来读取文件并检查其中是否有给定的句子。如果给定的句子是否存在于文件中，该函数必须分别返回“找到”或“未找到”。句子用 / 符号分隔。

```
Example of file:
1,2,3,4/
car, house, hotel/
2,age,12/
1,2/
1,2,3,5/
house, car/

Example of word to look for:
1,2/ 
```

我的想法是每次从文件中取出一个句子并将其放入一个数组（称为ary）中，检查数组（ary）是否等于包含我正在寻找的给定句子的数组（称为句子） ，并将该数组（ary）重用于文件中的下一个句子。

我写了这段代码：

```
#include <stdio.h>

void main()
{
    char *sentence;
    FILE *my_file;
    char *ary;
    int size = 500;
    int got;
    int ind=0;
    int rest;
    int found=0;

    sentence="1,2";

    my_file=fopen("File.txt", "r");

    if(my_file==NULL)
    {
        printf("I couldn't open the file\n");
    }
    else
    {
        ary = (char*)malloc(500*sizeof(char));
        while((got=fgetc(my_file))!=EOF)
        {
            if(got!='/')
            {
                ary[ind++]=(char)got;
            }
            else
            {
                ary[ind++]='\0';
                rest = compare(sentence,ary);
                if(rest==0)
                {
                    found =1;
                    printf("found\n");
                    return;
                }
                ind=0;
                free(ary);
                ary = (char*)calloc(500, sizeof(char));
            }
        }
        if(found==0) 
        {
            printf("not found\n");
        }
        fclose(my_file);
    }
}

int compare(char str1[], char str2[])
{
    int i = 0;
    int risp;
    if(str1>str2 || str1<str2) 
    {
        risp=-1;
    }
    if(str1==str2)
    {
        while(str1[i++]!='\0')
        {
            if(str1[i]!=str2[i]) risp=1;
        }
    }

    return risp;
} 
```

它编译，但不能正常工作，我不知道为什么。

我尝试了另一种更简单的解决方案，但也不起作用。

```
void main()
{
    char sentence[]="1,2";
    FILE *my_file;
    char string[2000];
    int ind=0;
    int rest;
    int trovato = 0;
    int got;

    my_file=fopen("File.txt", "r");
    if(my_file==NULL)
          printf("I couldn't open the file\n");
    else
    {
        string[0]='\0';
        while((got=fgetc(my_file))!=EOF)
        {
            if(got!='/')
            {
                string[ind++]=(char)got;
            }
            else
            {
                string[ind++]='\0';

                rest = compare(sentence, string);
                if(rest==0)
                {
                    found =1;
                    printf("found\n");
                    return;
                }
                ind=0;

                //delete the array
                int x=0;
                while(string[x]!='\0')
                {
                    string[x]='\0';
                    x++;
                }

            }
        }
        if(found==0) printf("not found\n");

        fclose(my_file);
    }
} 
```

有人可以指出我的错误或让我知道更好的解决方案吗？谢谢你。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-09T05:06:31.220

假设这是一个家庭作业问题，是否保证句子都在不同的行上并以“/”结尾？

如果是这种情况，您应该使用 getline 函数，然后使用 strcmp。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-09T05:12:17.450

关于第一个代码，比较功能是错误的。

这些检查没有意义，您可以使用 strcmp 代替（或不比较指针）：

```
 if(str1>str2 || str1<str2) 
  {
    risp=-1;
  }
  if(str1==str2) 
```

其次，您`/`在新句子之后附加换行符，因此它永远不会比较相等。将此添加到 while 循环的开头：

```
if (got == '\n') continue; 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-09T08:07:09.673

我不完全确定您为什么认为比较功能应该起作用。如果要比较两个数组，则不要比较它们的起始地址。此外，在将功能集成到程序中之前，请先使用其他一些数据对其进行测试。

If you want to compare the array A[10] with B[10], write a function that takes `char* A`, `char* B` and its `int size` as input, then compare each element from A with B through a loop that runs `size` times.

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-09T05:30:37.800

当然，`compare`这是行不通的，因为它比较的是指针而不是字符串（指针相等的情况除外，这是一种无需测试每个字符就可以保证字符串相等的情况）。地址在确定位于该地址的内容是否相等时有什么意义？没有任何。

你真的需要使用一个`string`或一个`ary`数组吗？考虑一个对 a和 a`compare`进行操作的函数，而不是对 two进行操作。`FILE *``char *``char *`

接受两个论点：`FILE *file`和`char *sentence`。从 a 开始`size_t offset = 0;`，就像在任何比较函数中一样。每次获得一个字符（来自`fgetc(file)`）时，将其与 进行比较`sentence[offset]`。如果匹配，则增加`offset`并重复。当 时`sentence[offset] == '\0'`，您已经到达句尾，没有任何不匹配。这不是说你找到了一个句子吗？如果不匹配，则将不匹配的字符放回去（使用`ungetc`）并返回与“不匹配”对应的值。

初学者倾向于使算法过于复杂。-耸耸肩-

# jquery - jquery slideToggle（）后输入不起作用；

> ID：15307347
> 
> 赞同：1
> 
> 时间：2013-03-09T04:57:40.673
> 
> 标签：jquery, html, input, slidetoggle

我有以下代码：

```
<input type="text" value="" placeholder="Code" name="Subj_code" id="Subj_code" style="width:100%;"> 
```

我将使用此 jquery 制作动画的输入框：

```
$("input[type=text]").slideToggle(200); 
```

为什么当我切换（隐藏）并再次切换（取消隐藏）时，我无法再输入任何内容？

但是如果我在做同样的事情之前输入一些东西，文本会消失，但当我输入一些东西时会重新出现。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-23T05:56:28.833

HTML

```
<div>
    <input type="text" value="" placeholder="Code" name="Subj_code" id="Subj_code" style="width:100%;">
</div> 
```

JS

```
$("div").slideToggle(200); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-02-18T12:45:24.333

用 a 包装元素`div` 并添加`overflow: hidden;`到包装器 div 中。

# matlab - 在 Matlab 中替换整个矩阵块（任意大小）

> ID：15307354
> 
> 赞同：0
> 
> 时间：2013-03-09T04:59:51.210
> 
> 标签：matlab, matrix

我需要将`n+2`矩阵的最后一行替换为

```
myeye = eye(n+2, (n+1)^2); 
```

除了明智地做到这一点之外，还有其他方法吗？

本质上，我想做这样的事情

```
myMatrix((n+1)^2-(n+1):end) = myeye; %the index is just the last n+2 rows 
```

当然这是不合法的，但这就是我想做的。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-09T21:48:33.320

你可以做：

```
 myMatrix((end - size(myeye, 1) + 1):end, :) = myeye(:, 1:size(myMatrix, 2)) 
```

注意使用关键字`end`获取最后一行索引。

另请注意，由于`myeye`基本上是一个 n×n 单位矩阵与一个 zeros 矩阵水平连接，因此您可以通过更简单的方式实现相同的效果：

```
 myMatrix((end - n - 1):end, :) = eye(n + 2, size(myMatrix, 2)) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-09T05:38:07.880

```
a=randi(10,[30 7]);
aNew=a;
n=1;
if (n+1)^2>=size(aNew,2)
   nRows=size(aNew,2);
else
   nRows=(n+1)^2;
end
aNew(size(a,1)-(n+1):end,1:nRows)=eye(n+2, (n+1)^2); %This is where you actually replace a block. 
```

# java - System.in.read() 不读取

> ID：15307355
> 
> 赞同：0
> 
> 时间：2013-03-09T04:59:53.923
> 
> 标签：java

我是Java新手，所以如果这是一个很小的错误，请原谅我，这是
我的代码：

```
import java.io.*;
public class election
{
    public static void main(String args[])
    {
        boolean x=false;
        Ballot ballot=new Ballot();
        int n;
        while(x!=true)
        {
            System.out.println("Cast your vote to(1-5): ");
            try
            {
            n=System.in.read();
            System.out.flush();
            ballot.add(n);
            System.out.println("Enter 0 to exit, enter 1 to vote again: ");
            n = System.in.read();
            if(n==0)
            {
                x=true;
            }
            else
            {
                x=false;
            }
            }
            catch(IOException e)
            {
                System.out.println("I/O Error");
                System.exit(1);
            }
        }
    }
}
class Ballot
{
    int votes,spoilt;
    int cand[] = new int[5];

    //methods
    void add(int n)
    {
        votes=votes+1;
        if(n <= 5 && n>=1)
        {
            cand[n-1]=cand[n-1]+1;
        }
        else
        {
            spoilt = spoilt + 1;
        }
    }
    void display()
    {
        System.out.println("Total votes cast: " + votes);
        for(int i=0;i<5;i++)
        {
            System.out.println("Candidate " + (i+1) + ": " + cand[i]);
        }
        System.out.println("Spoilt: " + spoilt);
        System.out.println("Valid votes: " + (votes-spoilt));
    }
    Ballot()
    {
        votes=0;
        spoilt=0;
        for(int i=0;i<5;i++)
        {
            cand[i]=0;
        }
    }
} 
```

当我在编译后运行它时，第 18 行(n = System.in.read()) 被跳过。
我得到的输出是这样的：

> 投票给(1-5)：
> 1 输入0退出，输入1再次投票：
> 投票给(1-5)：
> 2输入0退出，输入1再次投票：
> 投票给(1 -5):
> ^C

的值`n`不是`read()`使程序成为无限循环。

感谢您的帮助。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-03-09T05:05:52.023

我认为如果您使用 Scanner 类会更容易。您可以像这样实例化扫描仪对象`Scanner scan = new Scanner(System.in);`。然后第 18 行可以变成`n = scan.nextInt();`这应该正确读取用户输入。有关 Scanner 类的更多信息，请参阅 Java 文档：[http](http://docs.oracle.com/javase/6/docs/api/java/util/Scanner.html) ://docs.oracle.com/javase/6/docs/api/java/util/Scanner.html 。希望这有帮助。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-03-09T05:05:59.667

`System.in.read()`仅读取一个字节，但是标准输入流仅在您按“Enter”时刷新。因此，在第一次调用返回时，有两个字节要读取（`'1'`, `'\n'`）。正常返回，然后`'1'`在下一次调用时`'\n'`返回。

我还应该指出，读取的值并未`int`像您期望的那样转换为。`'1'`例如，将是`49`十进制或`32`十六进制。您*可以*尝试通过减法来转换它`'0'`，但正如其他人指出的那样，最好使用更高级别的函数来输入整数。

# android - 使用 android-facebook-sdk 时出错

> ID：15307356
> 
> 赞同：-2
> 
> 时间：2013-03-09T05:00:09.623
> 
> 标签：android, facebook-android-sdk

我只是无法弄清楚我的代码中的问题
我想为我的应用程序使用 FaceBook 登录
我遵循了 youtube 视频中的教程。
在代码中，我可以使用 facebook 登录，但我无法实现注销功能。我试过这样做。（注销的代码也在那里，但仍然不起作用）代码如下：

在我点击登录按钮后：

```
 public void onClick(View v) {
    // TODO Auto-generated method stub

    switch(v.getId()){
case R.id.fb_button:

    try{

         //to check if already logged in.
         //my code never enters the following block.

    if(fb.isSessionValid()){
        Toast.makeText(getBaseContext(), "loging out",     Toast.LENGTH_LONG).show();

        try {
            fb.logout(getBaseContext());
                         // update_fb_buttonimage() is a function to change the image of button
                          //if logged in: it shows logout
                          // else it shows login.

                          //but somehow its not working
            update_fb_buttonimage();
        } catch (MalformedURLException e) {
            // TODO Auto-generated catch block
            e.printStackTrace();
        } catch (IOException e) {
            // TODO Auto-generated catch block
            e.printStackTrace();
        }

    }

              //following is working fine.
              // but every time i click n the button, it enters this bolok of code.
              //which is not what i want. this is tobe executed only if user is not logged in
              //even if  user is logged in , program enters this code only.
              // instead of this th above "if" block should be executed.

    else{
        Toast.makeText(getBaseContext(), "logging in", Toast.LENGTH_LONG).show();

        fb.authorize(LoginPage.this,new DialogListener(){

            @Override
            public void onComplete(Bundle values) {
                // TODO Auto-generated method stub
                update_fb_buttonimage();

            }

            @Override
            public void onFacebookError(FacebookError e) {
                // TODO Auto-generated method stub

                Toast.makeText(getBaseContext(), "You can't login to the facebook", Toast.LENGTH_LONG).show();
            }

            @Override
            public void onError(DialogError e) {
                // TODO Auto-generated method stub
                Toast.makeText(getBaseContext(), "unIdentified Error", Toast.LENGTH_LONG).show();   
            }

            @Override
            public void onCancel() {
                // TODO Auto-generated method stub

                Toast.makeText(getBaseContext(), "onCancel", Toast.LENGTH_LONG).show();
            }} );
    }   }catch(Exception e){
        System.out.print(e.toString());
        Toast.makeText(getBaseContext(), e.toString(), Toast.LENGTH_LONG).show();
    }
        break;
      } 
```

我的错误在哪里？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-09T05:10:22.693

只需将 MainActivity.this 替换为您的和 updateButtonImage()

```
if(fb.isSessionValid())
    {
        try {
            fb.logout(getApplicationContext());
            updateButtonImage();
        } catch (MalformedURLException e) {
            // TODO Auto-generated catch block
            e.printStackTrace();
        } catch (IOException e) {
            // TODO Auto-generated catch block
            e.printStackTrace();
        }
        //button close session
    }
    else
    {
        fb.authorize(MainActivity.this,new String[] {"publish_stream"}, new DialogListener(){

            @Override
            public void onFacebookError(FacebookError e)
            {
                Toast.makeText(MainActivity.this, "on Facebook error", Toast.LENGTH_SHORT).show();
            }
            @Override
            public void onError(DialogError e)
            {
                Toast.makeText(MainActivity.this, "on error", Toast.LENGTH_SHORT).show();
            }
            @Override
            public void onComplete(Bundle values)
            {
                updateButtonImage();

            }
            @Override
            public void onCancel()
            {

            }
        });
        //login in to facebook
    } 
```

# c - 为什么这个变量的值一旦在 for 循环中变为垃圾？C

> ID：15307367
> 
> 赞同：1
> 
> 时间：2013-03-09T05:01:57.907
> 
> 标签：c, for-loop, garbage

为什么 n 的值在 for 循环内变为垃圾？（我是 C 语言新手，我来自 C++ 背景）

```
float n = 3.0;
printf ("%f\n", n);
for (; n <= 99.0; n += 2)
    printf ("%f\n", &n); 
```

![在此处输入图像描述](../Images/8a2e1f5337995bf8946936d5976f0873.png)

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-09T05:05:27.300

您正在`&n`for 循环中打印 n ( ) 的地址。摆脱`&`

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-09T05:06:12.667

您的错误在于您尝试打​​印的方式`n`。您传递的是*地址*而`n`不是值。

在这种情况下，使用浮点数一无所获。虽然它会起作用，但 an`int`也会起作用：

```
int n = 3;
printf ("%d\n", n);
for (; n <= 99; n += 2)
    printf ("%d\n", n); 
```

在 C 中，循环终止条件也更常见`<`，例如：

```
for ( ; n<100; n+=2) 
```

... for 循环条件*通常*是首选。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-09T05:05:11.373

for 循环条件中的错误，您忘记添加后缀`f`：

喜欢：

```
for (; n <= 99.0f; n += 2)
                ^ 
```

记住：*无后缀*的浮点字面量是双精度，这是比浮点数更常用的浮点类型。

第二个 printf 错误：@adrianz 答案

```
 printf ("%f\n", &n);
                 ^  remove it 
```

# javascript - Json到饼图转换错误

> ID：15307372
> 
> 赞同：1
> 
> 时间：2013-03-09T05:02:17.957
> 
> 标签：javascript, database, json, google-visualization

我试图实现动态谷歌饼图。但这样做时它通过 json 调用连接到数据库，但我无法实现 piechat，因此我无法获得饼图的值。

我想要的我的Json数据如下： -

```
function getHealthReport() 
{ 
  var dataString = {auth_token: sessionStorage.auth_token,};
  var mh_url = MH_HOST + '/reports/get_health_issues_report.json';

  $.ajax(
  {
    type: "POST",
    url: mh_url,
    data: dataString,
    dataType: "json",
    success: function (data) 
    {/*
        google.load("visualization", "1", {packages:["corechart"]});

        google.setOnLoadCallback(drawChart);  <----- here i am getting piechart via  hardcoding
        function drawChart(){
        var data = google.visualization.arrayToDataTable([
         ['Task','Hours per Day'],
         ['Work',11],
         ['Eat',2],
         ['Commute',2]
        ]);

        var options = {
            title: 'My Daily Activities'
        };

        var chart = new google.visualization.PieChart(document.getElementById('outer_tableDiv'));
        chart.draw(data, options);}
        */
    },
    error: function (data) 
    {
        alert("fail");
    }    
  });  
} 
```

谁能帮忙。

# c#-4.0 - 从另一个类访问一个类中定义的类变量的值

> ID：15307378
> 
> 赞同：0
> 
> 时间：2013-03-09T05:03:23.013
> 
> 标签：c#-4.0

我有以下情况。我有三个班

A 类 B 类 C 类

在 A 类中，创建了 B 类的对象。

在 B 类中，创建了 C 类的对象。

在 C 类中定义了一个公共类变量，我想在页面中使用 A 类的对象来访问它。

有没有办法直接做到这一点？

提前致谢

问候马修

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-09T05:20:41.577

您可以创建一个`A`引用该`C`对象的属性：

```
class A
{
    public B B { get; set; }
    public int CFoo { get { return B.C.Foo; } set { B.C.Foo = value; } }

    public A() { B = new B(); }
}

class B
{
    public C C { get; set; }
    public B() { C = new C(); }
}

class C
{
    public int Foo { get; set; }
} 
```

在您的页面上，您将执行以下操作：

```
 A a = new A();
 // sets A.B.C.Foo
 a.CFoo = 1; 
```

# android - 是否可以在使用内置字典的android中创建自定义键盘

> ID：15307380
> 
> 赞同：-5
> 
> 时间：2013-03-09T05:03:50.317
> 
> 标签：android, dictionary, autocomplete, android-softkeyboard

我正在为 android 构建 3x4 布局键盘，想知道我是否可以使用系统字典来自动完成和建议用户输入？如果可能，请您指导我吗？

提前谢谢了..

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-09T05:40:34.987

在非根设备中不允许访问内置字典。

# c# - GetCaretPos() 工作不正常？

> ID：15307381
> 
> 赞同：1
> 
> 时间：2013-03-09T05:04:39.347
> 
> 标签：c#, winforms, winapi

我想使用 GetCaretPos() Win32 API 来获取文本框插入符号的位置，即使它是不可见的。如果文本框只有一行，它似乎工作正常，但它的行越多，插入符号的 Y 坐标越不同（如 GetCaretPos() 报告的那样。GetCaretPos 报告的插入符号的 Y 坐标（ ) 总是大于插入符号的实际 Y 坐标。

是什么原因造成的，我该如何解决？

这是代码：

```
[DllImport("user32")]
private extern static int GetCaretPos(out Point p);
[DllImport("user32")]
private extern static int SetCaretPos(int x, int y);
[DllImport("user32")]
private extern static bool ShowCaret(IntPtr hwnd);
[DllImport("user32")]
private extern static int CreateCaret(IntPtr hwnd, IntPtr hBitmap, int width, int height);
//Suppose I have a TextBox with a few lines already input.
//And I'll make it invisible to hide the real caret, create a new caret and set its position to see how the difference between them is.

private void TestCaret(){
   textBox1.Visible = false;//textBox1 is the only Control on the Form and has been focused.
   CreateCaret(Handle, IntPtr.Zero, 2, 20);
   Point p;
   GetCaretPos(out p);//Retrieve Location of the real caret (calculated in textBox1's coordinates)
   SetCaretPos(p.X + textBox1.Left, p.Y + textBox1.Top);
   ShowCaret(Handle);
} 
```

正如我所说，`textBox1`表单上的任何地方，当它不可见时，调用上面的方法将在真实（隐藏）插入符号的确切位置显示一个伪造的插入符号。当 textBox1 只有 1 行时它可以正常工作，但当它有多行时则不行。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-11-29T12:42:16.483

文本框在没有聚焦时没有插入符号（因此在它不可见时也是如此）。具体来说，每个线程只有一个控件（“窗口”）在任何时候都可以有插入符号。这意味着文本框必须在没有聚焦或不可见时以其他方式存储插入符号的位置，并在再次聚焦时在存储的位置创建一个新的插入符号。

这使您有两个选择：

1.  在文本框失去焦点之前获取并存储插入符号位置（使用 Leave 事件或创建一个继承自 TextBox 类并覆盖 LostFocus 方法的类）。

2.  使用 TextBox 的 SelectionStart (+SelectionLength) 属性和 GetPositionFromCharIndex 方法来查找文本框再次获得焦点时将创建插入符号的位置。

# ios - 用于 flex mobile\iOS 的轻量级数据网格组件？

> ID：15307382
> 
> 赞同：0
> 
> 时间：2013-03-09T05:04:53.593
> 
> 标签：ios, apache-flex, list, datagrid, itemrenderer

我知道我们没有用于 flex 移动应用程序的 table\datagrid 组件。目前我正在开发一个 iPad 应用程序，我在其中使用 datagrid（虽然它说它没有优化），它在 iPad 上运行得很好。没有滚动问题（我觉得会出现）。但唯一的问题是在切换下面的选项卡时，从一个选项卡移动到另一个选项卡需要很长时间（在移动前它只会挂起几秒钟）。当我删除数据网格时，它又可以正常工作了。切换速度如预期的那样快。

因此我不想真正使用数据网格。我遇到了一个替代方案，它说将 List\DataGroup 与 itemrenderer 一起使用。但不确定我们如何显示大约 10 列。我们可以使用带有标签项渲染器的列表，并且可以调整每个列值之间的空间，如下所示： data.firstColValue data.secondColValue ..... 但是这样，我不会让数据网格的列宽增加\减少功能，这在这个项目中是非常需要的。

有没有一种方法可以从数据网格中删除繁重的功能并仅保留核心功能（此处需要）？如果没有，是否还有其他替代方法可以达到预期的效果？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-10-02T15:34:47.167

Apache Flex 已接受 Mobile Datagrid 组件的捐赠，因此您可能希望看到该组件融入 Flex Framework 的未来版本。

# javascript - 在 jquery 中用边距和宽度做数学运算

> ID：15307405
> 
> 赞同：1
> 
> 时间：2013-03-09T05:07:47.420
> 
> 标签：javascript, jquery, math, margins

我想要做的是让内容始终位于容器的中心，即使边距大小和内容大小发生变化。这也意味着容器大小必须根据内容的边距和宽度自行更改。这是一个 js fiddle，它具有一个函数的一般设置和一个给出输出的警报：http: **[//jsfiddle.net/jpY5n/](http://jsfiddle.net/jpY5n/)**

```
function resizeContainer(size, distance) {
var postWidth = size;
var postApart = distance * 3;
return postWidth + postApart;
};
$(document).ready(function () {
$('#container').width(resizeContainer($("#content").width(),$("#content").css("margin-left"));
}); 
```

理论上我可以使用我设置的函数来更改帖子的宽度，但它不能计算边距，因为正如您在警报中看到的那样，边距是**10px**，而不是 10，所以数学返回为**NaN** ...有没有办法让边距设置让我们说 ßpx 只是 ß？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-09T05:15:58.367

`Number`您可以通过将字符串解析为 a后替换`'px'`为来获取边距的数值`''`：

```
var margin = Number($('#content').css('margin-left').replace('px','')); 
```

[这是更新的 Fiddle](http://jsfiddle.net/jpY5n/1/)。

**HTML**

```
<div id="container">
    <div id="content"></div>
</div> 
```

**JavaScript (jQuery)**

```
function resizeContainer(size, distance) {
    var postWidth = size * 2;
    var postApart = distance * 3;
    return postWidth + postApart;
};
$(document).ready(function () {
    alert("Container width should be set to " + $("#content").width() + " times 2 plus " + $("#content").css("margin-left") + " times 3");
    var width = Number($('#content').width());
    var margin = Number($('#content').css('margin-left').replace('px',''));
    $('#content').width(resizeContainer(width,margin));
}); 
```

# jquery - 使用 JavaScript 上传图片在 IE 浏览器中不显示

> ID：15307409
> 
> 赞同：0
> 
> 时间：2013-03-09T05:08:47.410
> 
> 标签：jquery, html, css, file-upload

我正在使用 jQuery 上传图像文件，但是每当我上传任何选定的图像时。为此，我需要 Priview 在 IE 浏览器中显示图像。但 Firefox 和 Chrome 支持的功能如下。

## 我的代码

```
<Script>
function previewImages(input) { 
    $('#ImagePreview').html('');
       var fileList = input.files;      
        var anyWindow = window.URL || window.webkitURL;
        for (var i = 0; i < fileList.length; i++) {
            var objectUrl = anyWindow.createObjectURL(fileList[i]);           
            $('#ImagePreview').append('<a href="#" class="remove"></a><img src="' + objectUrl + '" class="img-polaroid" style="height:70px;width:70px;">');
            window.URL.revokeObjectURL(fileList[i]);
        }
}

  <h1>Upload Image</h1>
  <div class="form_scpop" >
    <form action="" method="get">
       <input type ="file" onchange="previewImages(this);" multiple/>
      <input name="" type="" id="image_alt" class="input_txt" />
      <div id="ImagePreview" ></div>
       <button class="btn btn-info" type="button" onclick="closeimgwindow()">Save</button>
    </form>
  </div> 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-13T12:07:28.997

IE8 和 IE9`files`不支持该属性。`<input type ="file" multiple>`只有兼容 HTML5 的浏览器支持它。更新到 IE 10 并尝试您的代码。

```
var fileList = input.files;    
//fileList is undefined in IE 8 and IE 9 
```

**更新**

IE8/IE9 没有在 type 的 input 元素上实现 multiple 选项（没办法做到这一点，见[这里](https://stackoverflow.com/questions/6207388/is-it-possible-to-select-and-upload-multiple-files-at-one-time-in-internet-explo)）。如果可能，请尝试删除多个选项并测试您的代码。否则，您将不得不通过 AJAX 为旧版 IE 实现文件上传。更新到 IE10 浏览器更容易。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-18T19:20:15.097

您应该做的是通过Ajax将图像上传到您的服务器到一个临时文件夹中，然后将url（随机生成以避免冲突）发送回窗口显示。当用户单击保存时，将其复制（或重新上传）到您想要的位置。

这将是您理想的跨浏览器解决方案或后备方案，因为较旧的 IE 对您正在做的事情没有适当的支持。

# mobile - 如何用加速度计识别方向

> ID：15307411
> 
> 赞同：0
> 
> 时间：2013-03-09T05:09:24.253
> 
> 标签：mobile, java-me, sensors, nokia-s40

我正在使用诺基亚 S40 Full Touch 构建一个应用程序：一个简单的应用程序，在屏幕中央有一个球，当您摇动它（上/下/左/右）时，您可以将球朝您想要的方向移动。

我发现这`javax.microedition.sensor.Data`就是我认为我需要的。但我找不到更多关于下一步该做什么的信息。

现在的结果会是什么`getDoubleValues()/getIntValues()`？我可以从这些数字中识别方向吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-09T06:36:10.477

该 API 称为 JSR256。谷歌搜索“JSR256 示例”将为您提供所需的内容，例如这个：http: [//developer.sonymobile.com/downloads/code-example-module/utilize-the-w910-accelerometer-in-j2me-using- jsr-256-弹跳球游戏/](http://developer.sonymobile.com/downloads/code-example-module/utilize-the-w910-accelerometer-in-j2me-using-jsr-256-the-bouncing-ball-game/)

JSR256 规范： [http ://jcp.org/en/jsr/detail?id=256](http://jcp.org/en/jsr/detail?id=256)

# javascript - 使用 jquery 或本机 javascript 函数编码 URL（包括 & 等字符）？

> ID：15307414
> 
> 赞同：1
> 
> 时间：2013-03-09T05:10:07.280
> 
> 标签：javascript, jquery, encoding

我在表单中有一个隐藏参数，其值为

```
custAddress=CustomerAddress.do?fisrtName=scott&lastName=Miles 
```

我想在发送之前对其进行编码，以便可以将 & 之类的字符替换为 %26 etch

我尝试使用 javascript 内置 encodeURI("urlToencode") 但不编码像 & 之类的字符？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-09T05:14:06.433

试试这个代码行，

```
encodeURIComponent("fisrtName=scott&lastName=Miles"); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-09T05:15:23.423

使用[https://developer.mozilla.org/en-US/docs/JavaScript/Reference/Global_Objects/encodeURIComponent](https://developer.mozilla.org/en-US/docs/JavaScript/Reference/Global_Objects/encodeURIComponent)

您需要在 URL 查询字符串的每个动态部分（名称和值）上调用它。所以问题是什么是 URI 组件，`custAddress=CustomerAddress.do?fisrtName=scott&lastName=Miles`它看起来并不像 URL，因为你`=`在`?`

我能做出的最有意义的事情是完整的 URL 类似于

```
http://myserver/file.do?custAddress=CustomerAddress.do?fisrtName=scott&lastName=Miles 
```

在这种情况下，您应该构建您的 URL，例如

```
var custAddress = "CustomerAddress.do?fisrtName=scott&lastName=Miles";
var initialPath= "/path/to/file.do?";
var url = initialPath + "custAddress=" + encodeURIComponent(custAddress); 
```

既然你提到`jQuery`了，你可以使用[`$.param`](http://api.jquery.com/jQuery.param/), 看起来更干净并为你做编码，你可以一次给它多个查询参数

```
var url  = initialPath + $.param({
    custAdrress: custAddress, 
    otherParam: "paramVal",
    // Both the param name and value need to be encoded and $.param does that for you
    "funny Name & Param": "funny & value ="
}); 
```

# php - get_headers 在这种情况下是不可靠的。有什么办法吗？

> ID：15307420
> 
> 赞同：0
> 
> 时间：2013-03-09T05:10:59.360
> 
> 标签：php, mysql, http-headers

我正在使用以下内容来检查页面是否存在。

```
for($i = 620; $i <= 630; $i++) 
{
    $url = 'http://fantasy.mlssoccer.com/web/api/elements/'.$i.'/';
    $headers = @get_headers($url);  
    echo $headers[0].'<br>';
} 
```

有时这给 10`HTTP/1.1 200 OK`和其他时候最后 5 是`HTTP/1.1 500 Internal Server Error`

有没有办法解决？如果你访问 625 之后的页面并刷新，你会得到一个页面说`500 Internal Server Error nginx`，或者有时你会得到一个以 . 开头的页面`Piston/0.2.2 (Django 1.4.4) crash report:`。

知道如何检查发生这种情况时是否存在（有效的非崩溃）页面吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-09T05:31:27.303

将各种人所说的总结成一个独立的 php 脚本（这可以从命令行工作 - 我相信你可以让它在网页中工作）：

```
<?php
for($i = 620; $i <= 630; $i++)
{
    $url = 'http://fantasy.mlssoccer.com/web/api/elements/'.$i.'/';
    $headers = @get_headers($url);
    $match = preg_grep("/200 OK/", $headers);
    if (strlen($match[0]) == 0) {
      echo "page ".$i." does not exist!\n";
    }
    else {
      echo "page ".$i." exists!\n";
    }
}
?> 
```

这产生了以下输出：

```
floris$ php valid.php 
page 620 exists!
page 621 exists!
page 622 exists!
page 623 exists!
page 624 exists!
page 625 does not exist!
page 626 does not exist!
page 627 does not exist!
page 628 does not exist!
page 629 does not exist!
page 630 does not exist! 
```

# json - 使用新的 API v1.1 将推文搜索到 excel 中

> ID：15307428
> 
> 赞同：1
> 
> 时间：2013-03-09T05:11:34.417
> 
> 标签：json, excel, vba, twitter, twitter-oauth

我过去如何将推文搜索到 excel 中只是从使用 rss 的 xml url 导入数据。但是，twitter 正在取消对 rss 的支持，因此我对如何将 twitter 提要输入到 excel 中感到困惑，当我点击刷新时，它能够更新。这里的问题是我几乎没有编程知识，因此我在使用这个新的身份验证代码时遇到了问题，我想知道如何使用 VBA 来检索 json 格式的数据（它们也不支持 xml）并转换为 excel。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-06-24T01:34:04.557

下面是一个显示总体思路的“准系统”功能；它从特定用户的时间线（在本例中为 Stephen Colbert！）中提取最近的 5 条推文，并将推文创建日期和推文文本输出到电子表格的行中。

```
Function get_timeline(strHeader as String) As Boolean
'strHeader is a properly-constructed header as required by Twitter

Dim objRest As WinHttp.WinHttpRequest
Set objRest = New WinHttp.WinHttpRequest

objRest.Open "GET", "https://api.twitter.com/1.1/statuses/user_timeline.json?count=5&exclude_replies=true&screen_name=StephenAtHome", False
objRest.setRequestHeader "Content-Type", "application/x-www-form-urlencoded"
objRest.setRequestHeader "Authorization", strHeader
objRest.send

objRest.waitForResponse

If objRest.Status = "200" Then

'We use the JSON parser from http://www.ediy.co.nz/vbjson-json-parser-library-in-vb6-xidc55680.html

    Dim objResp As Object
    Set objResp = JSON.parse(objRest.responseText)

    Dim intZ As Integer

    For intZ = 1 To intCount

        Sheets("Sheet1").Range("A" & intZ).Value = objResp.Item(intZ).Item("created_at")
        Sheets("Sheet1").Range("B" & intZ).Value = objResp.Item(intZ).Item("text")

    Next intZ

    get_timeline = True

Else

    get_timeline = False

End If

Set objResp = Nothing
Set objRest = Nothing

End Function 
```

如果以上内容不足以让您继续前进，我最近在[此处](http://greglib.org/tweeting-with-vba/)和[此处](http://greglib.org/twitter-timelines-with-vba/)发布了一些文章，其中详细介绍了使用 VBA 发送推文的过程，并包含了许多对处理 OAuth 身份验证有用的功能/技术， URL编码等...

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-24T01:00:05.053

我曾经在一篇博文中描述过这一点。详细信息在这里：[Excel 中的 JSON API](http://markm.cd/2012/08/json-apis-in-excel/)。

基本上我使用[这个 JSON VBA 库](https://code.google.com/p/vba-json/)来运行这段代码：

```
Dim DistCache As New Scripting.Dictionary

Function CalculateDistance(startAddress As String, endAddress As String)
  Dim key As String
  key = startAddress & "|" & endAddress

  If DistCache.Exists(key) Then
    v = DistCache(key)
  Else
    Dim request As New SyncWebRequest
    request.AjaxGet ("http://maps.googleapis.com/maps/api/directions/json?origin=" & startAddress & "&destination=" & endAddress & "&sensor=false")
    Dim json As String
    json = request.Response

    Dim parser As New JSONLib
    Set result = parser.parse(json)
    Set routes = result("routes")
    Set route = routes(1)
    Set legs = route("legs")
    Set leg = legs(1)
    Set dist = leg("distance")
    v = dist("value")
    DistCache(key) = v
  End If

  CalculateDistance = v
End Function 
```

缓存非常糟糕，但这意味着您不会两次运行相同的 Web 查询。我希望你能适应你的 Twitter 问题。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-09T08:10:35.010

此处描述了将 JSON 解析为 Excel，[来源](http://ramblings.mcpher.com/Home/excelquirks/json/excel-json-conversion)。GL！

# c# - C#将变量复制到缓冲区而不产生垃圾？

> ID：15307431
> 
> 赞同：12
> 
> 时间：2013-03-09T05:11:57.067
> 
> 标签：c#, .net, buffer

在 C# .Net（3.5 及更高版本）中是否可以将变量复制到 byte[] 缓冲区中而不会在进程中创建任何垃圾？

例如：

```
int variableToCopy = 9861;

byte[] buffer = new byte[1024];
byte[] bytes = BitConverter.GetBytes(variableToCopy);
Buffer.BlockCopy(bytes, 0, buffer, 0, 4);

float anotherVariableToCopy = 6743897.6377f;
bytes = BitConverter.GetBytes(anotherVariableToCopy);
Buffer.BlockCopy(bytes, 0, buffer, 4, sizeof(float));

... 
```

创建变成垃圾的 byte[] bytes 中间对象（假设不再持有 ref）...

我想知道是否可以使用按位运算符将变量直接复制到缓冲区中而无需创建中间字节 []？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-03-09T05:33:34.167

使用指针是最好也是最快的方法：你可以用任意数量的变量来做到这一点，不会浪费内存，固定语句有一点开销但它太小了

```
 int v1 = 123;
        float v2 = 253F;
        byte[] buffer = new byte[1024];
        fixed (byte* pbuffer = buffer)
        {
            //v1 is stored on the first 4 bytes of the buffer:
            byte* scan = pbuffer;
            *(int*)(scan) = v1;
            scan += 4; //4 bytes per int

            //v2 is stored on the second 4 bytes of the buffer:
            *(float*)(scan) = v2;
            scan += 4; //4 bytes per float
        } 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-03-09T05:18:25.007

为什么你不能这样做：

```
byte[] buffer = BitConverter.GetBytes(variableToCopy); 
```

请注意，这里的数组*不是*对原始 Int32 存储的间接访问，它在很大程度上是一个副本。

您可能担心`bytes`在您的示例中相当于：

```
unsafe
{
    byte* bytes = (byte*) &variableToCopy;
} 
```

..但我向你保证，事实并非如此；它是源 Int32 中字节的逐字节副本。

**编辑**：

根据您的编辑，我认为您想要这样的东西（需要不安全的上下文）：

```
public unsafe static void CopyBytes(int value, byte[] destination, int offset)
{
    if (destination == null)
        throw new ArgumentNullException("destination");

    if (offset < 0 || (offset + sizeof(int) > destination.Length))
        throw new ArgumentOutOfRangeException("offset");

    fixed (byte* ptrToStart = destination)
    {
        *(int*)(ptrToStart + offset) = value;
    }
} 
```

# actionscript-3 - 如何只播放一次电影剪辑？

> ID：15307434
> 
> 赞同：0
> 
> 时间：2013-03-09T05:12:45.293
> 
> 标签：actionscript-3

我在这个网站上做了一些研究，并弄清楚了我想做的大部分事情。我点击一个块。块移动。完成后，它会播放另一个影片剪辑。问题是它循环了第二个影片剪辑。我找到了一个处理这个问题的查询，但不知道如何使它与下面的代码一起工作。一旦 if 语句为真，它就会继续播放剪辑（应该如此），但我不知道如何让它只播放一次。任何建议都非常感谢。

```
block_1.stop();
block_1.addEventListener(MouseEvent.CLICK, block_1_Click);
function block_1_Click(e:MouseEvent):void {
    block_1.play();

}

block_1.addEventListener(Event.ENTER_FRAME, wavePlay);
function wavePlay(e:Event):void {
    if (block_1.currentFrame==block_1.totalFrames) {
        wave_mc.play();

    }

} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-09T05:24:26.727

[Adobe](http://help.adobe.com/en_US/FlashPlatform/reference/actionscript/3/flash/display/DisplayObject.html#event%3aenterFrame)关于该`ENTER_FRAME`事件的文档说：

> [...] 当播放头进入新帧时调度。如果播放头没有移动，或者只有一帧，则此事件将与帧速率一起连续调度。[...]

这意味着`ENTER_FRAME`事件会一直运行，直到您删除它的侦听器。

您的代码应该是：

```
block_1.stop();
block_1.addEventListener(MouseEvent.CLICK, block_1_Click);
function block_1_Click(e:MouseEvent):void {
    block_1.play();

}

block_1.addEventListener(Event.ENTER_FRAME, wavePlay);
function wavePlay(e:Event):void {
    if (block_1.currentFrame==block_1.totalFrames) {            
       wave_mc.play();
       block_1.removeEventListener( Event.ENTER_FRAME, wavePlay );

    }

} 
```

# php - 使用相对路径的 Smarty 个性化类

> ID：15307438
> 
> 赞同：0
> 
> 时间：2013-03-09T05:13:18.227
> 
> 标签：php, smarty

我目前正在努力让我的 smarty 模板有一个类。

如果我采取并这样做：

```
$smarty = new Smarty;
$smarty->setTemplateDir('../smarty/templates'); 
```

它将我的模板目录设置为“/smarty/templates”......所以我试图在我的课堂上做同样的事情：

```
class Template extends Smarty
{
    function __construct()
    {
        parent::__construct();
        $this->template_dir = "../smarty/templates/";
        $this->compile_dir = "../smarty/templates_c/";
    }
} 
```

所以我可以简单地说：

```
$smarty = new Template; 
```

这样，我不必在我使用的每个页面上为模板声明我的目录。

错误：

```
Fatal error: Uncaught exception 'SmartyException' with message
'Unable to load template file 'home.tpl'' in
/home/content/p/i/e/piec5762/html/alex/school/assets/php/smarty/sysplugins
/smarty_internal_templatebase.php:127
Stack trace:
#0
/home/content/p/i/e/piec5762/html/alex/school/assets/php/smarty/sysplugins
/smarty_internal_templatebase.php(374):
Smarty_Internal_TemplateBase->fetch('home.tpl', NULL, NULL, NULL,
true)
#1
/home/content/p/i/e/piec5762/html/alex/school/index.php(40):
Smarty_Internal_TemplateBase->display('home.tpl')
#2
{main} thrown in
/home/content/p/i/e/piec5762/html/alex/school/assets/php/smarty/sysplugins
/smarty_internal_templatebase.php on line 127 
```

我有文件：

```
index.php - where I'm making the object "$smarty"
assets/php/templates.php - where class Template
assets/smarty/templates - where I need to set the directory to
assets/php/smarty - where all my smarty files are 
```

和这个一样：[Extending PHP Smarty Singleton Class](https://stackoverflow.com/questions/6480563/extending-php-smarty-singleton-class) but more simplistic and sing RELATIVE PATHS

我应该怎么做才能在我自己的类中设置 template_dir？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-09T05:18:46.290

**根据**您的错误更新。看来你是相关的，`index.php`所以应该是：

```
class Template extends Smarty {
  function __construct() {
    parent::__construct();
    $this->setTemplateDir("./smarty/templates/");
    $this->setCompileDir("./smarty/templates_c/");
    }
  } 
```

如果你想保持路径安全：

```
class Template extends Smarty {
  function __construct() {
    parent::__construct();
    $this->setTemplateDir(__DIR__."/../smarty/templates/");
    $this->setCompileDir(__DIR__."/../smarty/templates_c/");
    }
  } 
```

`__DIR__`当前文件（即您的`templates.php`模板类）目录在哪里

# cuda - 我可以从主机访问设备全局内存吗？

> ID：15307442
> 
> 赞同：1
> 
> 时间：2013-03-09T05:13:38.977
> 
> 标签：cuda

CUDA C 编程指南指出，在 2.0 以上的计算能力上，主机和设备共享 64 位 linux 上的内存空间。我通过标准运行时 API“cudaMalloc”分配了一块全局内存，但主机似乎无法直接访问它。我应该做一些特别的事情来让它可以被主机访问吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-09T06:00:08.420

静态或动态分配的设备内存不能从主机直接访问（例如，通过取消引用指针）。有必要通过 cuda 运行时 API 调用（如 cudaMemset 或 cudaMemcpy）来访问它。它们共享相同的地址空间 (UVA) 的事实并不意味着它们可以以相同的方式访问。这只是意味着，如果我有一个设备指针已分配在特定位置，例如逻辑地址空间中的 0x00F0000，我不应该期望在同一位置找到主机指针。因此，如果有适当的记录，[我可以检查指针的数值](http://docs.nvidia.com/cuda/cuda-c-programming-guide/index.html#unified-virtual-address-space)并立即确定它是主机指针还是设备指针。

在[编程指南](http://docs.nvidia.com/cuda/cuda-c-programming-guide/index.html#heterogeneous-programming)中，它指出：

> 因此，程序通过调用 CUDA 运行时（在编程接口中描述）来管理内核可见的全局、常量和纹理内存空间。这包括设备内存分配和释放以及主机和设备内存之间的数据传输。

# ruby - capistrano 部署了错误的目录

> ID：15307443
> 
> 赞同：0
> 
> 时间：2013-03-09T05:13:46.280
> 
> 标签：ruby, git, capistrano

我是 capistrano 的新手，我能够成功地将我的 ruby​​ 应用程序从 git 部署到服务器，但不是直接部署代码，而是创建了 2 个目录，即**current**和**release**。如何从中走出来？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-09T09:35:56.700

这很正常。这就是 capistrano 的工作原理。

每次部署新版本时，都会在发布文件夹中创建。部署完成后，当前符号链接将更新为指向新创建的版本。

这边走

*   您不需要在每个版本上更新网络服务器配置
*   在准备好之前不会使用正在进行的部署
*   可以切换回旧版本

# c++ - 字符串向量仍然可以访问

> ID：15307446
> 
> 赞同：1
> 
> 时间：2013-03-09T05:14:01.210
> 
> 标签：c++, vector, valgrind

我有这个字符串向量的示例代码：

```
vector<string> strings;
strings.push_back(argv[0]);
cout << strings[0] << endl;
strings.clear();

exit(0); 
```

但是 valgrind 说：

```
==26012== HEAP SUMMARY:
==26012==     in use at exit: 8 bytes in 1 blocks
==26012==   total heap usage: 2 allocs, 1 frees, 41 bytes allocated
==26012== 
==26012== 8 bytes in 1 blocks are still reachable in loss record 1 of 1
==26012==    at 0x4C2B1C7: operator new(unsigned long) (in /usr/lib/valgrind/vgpreload_memcheck-amd64-linux.so)
==26012==    by 0x401DCF: __gnu_cxx::new_allocator<std::string>::allocate(unsigned long, void const*) (new_allocator.h:92)
==26012==    by 0x401BD8: std::_Vector_base<std::string, std::allocator<std::string> >::_M_allocate(unsigned long) (in /home/nich/IPK/2/client)
==26012==    by 0x401706: std::vector<std::string, std::allocator<std::string> >::_M_insert_aux(__gnu_cxx::__normal_iterator<std::string*, std::vector<std::string, std::allocator<std::string> > >, std::string const&) (vector.tcc:327)
==26012==    by 0x401421: std::vector<std::string, std::allocator<std::string> >::push_back(std::string const&) (stl_vector.h:834)
==26012==    by 0x401102: main (client.cc:130)
==26012== 
==26012== LEAK SUMMARY:
==26012==    definitely lost: 0 bytes in 0 blocks
==26012==    indirectly lost: 0 bytes in 0 blocks
==26012==      possibly lost: 0 bytes in 0 blocks
==26012==    still reachable: 8 bytes in 1 blocks
==26012==         suppressed: 0 bytes in 0 blocks 
```

我做错了什么？String::clear 方法应该在字符串上调用析构函数不应该吗？无论如何，我尝试了使用指针的替代方法。

```
vector<string*> strings;
strings.push_back(new string(argv[0]));
cout << *(strings[0]) << endl;
delete strings[0];
strings.clear();

exit(0); 
```

瓦尔格林：

```
==10177== HEAP SUMMARY:
==10177==     in use at exit: 8 bytes in 1 blocks
==10177==   total heap usage: 3 allocs, 2 frees, 49 bytes allocated
==10177== 
==10177== 8 bytes in 1 blocks are still reachable in loss record 1 of 1
==10177==    at 0x4C2B1C7: operator new(unsigned long) (in /usr/lib/valgrind/vgpreload_memcheck-amd64-linux.so)
==10177==    by 0x401CF9: __gnu_cxx::new_allocator<std::string*>::allocate(unsigned long, void const*) (new_allocator.h:92)
==10177==    by 0x401B5C: std::_Vector_base<std::string*, std::allocator<std::string*> >::_M_allocate(unsigned long) (in /home/nich/IPK/2/client)
==10177==    by 0x4016EA: std::vector<std::string*, std::allocator<std::string*> >::_M_insert_aux(__gnu_cxx::__normal_iterator<std::string**, std::vector<std::string*, std::allocator<std::string*> > >, std::string* const&) (vector.tcc:327)
==10177==    by 0x4013F1: std::vector<std::string*, std::allocator<std::string*> >::push_back(std::string* const&) (stl_vector.h:834)
==10177==    by 0x4010C4: main (client.cc:130)
==10177== 
==10177== LEAK SUMMARY:
==10177==    definitely lost: 0 bytes in 0 blocks
==10177==    indirectly lost: 0 bytes in 0 blocks
==10177==      possibly lost: 0 bytes in 0 blocks
==10177==    still reachable: 8 bytes in 1 blocks
==10177==         suppressed: 0 bytes in 0 blocks 
```

但仍然是同样的问题。你能告诉我我应该如何将参数从 *argv[] 解析为向量字符串而没有仍然可以访问的字节吗？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-03-09T05:19:00.753

调用`strings.clear()`只是清空向量，但向量**本身**仍在占用内存。通过像这样静态创建它：

```
vector<string> strings; 
```

它仍然在内存中，直到函数超出范围（并且由于您`exit`在函数中调用，所以程序结束时它仍在范围内）。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-09T05:21:19.987

我认为“泄露”的 8 个字节指的是 STL 容器。std::vector 在您退出时不会被破坏。试试这个：

```
{
  vector<string> strings;
  strings.push_back(argv[0]);
  cout << strings[0] << endl;
  strings.clear();
}
exit(0); 
```

# django - Django TEMPLATE_CONTEXT_PROCESSORS 被调用太多次

> ID：15307449
> 
> 赞同：3
> 
> 时间：2013-03-09T05:14:59.320
> 
> 标签：django, django-templates, django-context

我需要在所有页面中显示一些统计数字，所以我决定使用上下文处理器。但我刚刚发现我的函数在每次页面加载时被调用 2 到 7 次。我在函数内部做了 4 个查询，所以我的性能很差。每个页面加载最多可能需要 28 (4*7) 个查询...

我想知道为什么会发生这种情况以及我能做些什么来避免它。

**设置.py**

```
TEMPLATE_CONTEXT_PROCESSORS = (
    'django.contrib.auth.context_processors.auth',
    'django.core.context_processors.request',
    'django.contrib.messages.context_processors.messages',
    'django.core.context_processors.static',
    'core.views.numbers',
) 
```

**视图.py**

```
def numeros(request):
      ...
    a=table1.objects.count()
    b=table2.objects.count()
    c=table3.objects.count()
    d=table4.objects.count()
     ...
    return {'a': a,
            'b': b,
            'c': c,
            'd': d,
            'e': e,
            'f': f,
            'g': g,
            'h': h
    } 
```

**[更新 - 谢谢]** @okm 和 @catherine 提供了非常好的和补充的解释。两者都是正确的，正如@okm 所说，上下文处理器被多次调用，因为我不止一次使用 RequestContext 。

@catherine 也是正确的。我们需要特别注意我们在上下文处理器中放置的内容。我更改了我的代码，我只是在登录页面中显示统计数字。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-09T09:02:04.317

初始化实例时会一一调用上下文处理器`RequestContext`，因此您可能会`RequestContext`初始化多个实例。您可以调试以找出它们，例如`__init__`在调用它时使用 RequestContext 子类来打印吗？

或者您可以返回一个延迟其评估直到真正需要的延迟对象，并查看重复查询的计数是否下降：

```
def numeros(request):
    return {'a': table1.objects.count,
            'b': table2.objects.count,
            ...} 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-03-09T06:08:17.963

TEMPLATE_CONTEXT_PROCESSORS 中的设置函数有利于在所有页面中使用它。但请注意，即使您没有调用或使用它，它仍然会加载查询，因为它直接从设置中调用。这将导致性能不佳。当您几乎必须在每个模板（如用户或其他成本不高的参数）中使用上下文处理器时，请仅使用上下文处理器。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-11T10:53:14.960

我或多或少有同样的问题。因此，进入 RequestContext 调用的函数之一（来自 TEMPLATE_CONTEXT_PROCESSORS）并记录回溯，以查看响应被欺骗的位置：

```
import traceback

logger.info(traceback.format_list(traceback.extract_stack())) 
```

如果您没有激活记录器，您也可以打印它。

就我而言，这是因为我打开了 debug_toolbar，它也称为 RequestContext。

# mule - 我如何在 xml 配置上设置有效负载？

> ID：15307459
> 
> 赞同：1
> 
> 时间：2013-03-09T05:16:08.977
> 
> 标签：mule

我想将一些消息设置为有效负载。

我总是使用过滤器将一些数据设置为有效负载。

我认为它们是使用过滤器设置有效负载的一些方法。

有人可以帮我如何在 mule-config.xml 文件上设置有效负载吗？

我试过了

```
<set-payload value="something"/> 
```

但不起作用..我正在使用mule 3.2

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-09T17:14:49.267

从 Mule 3.3 开始可以使用设置有效负载变压器。

对于 3.2，最短的是表达式转换器：http: [//www.mulesoft.org/documentation-3.2/display/32X/Expression+Transformer+Reference](http://www.mulesoft.org/documentation-3.2/display/32X/Expression+Transformer+Reference)

# php - 在下拉列表中选择状态后如何显示相应的描述

> ID：15307460
> 
> 赞同：0
> 
> 时间：2013-03-09T05:16:19.470
> 
> 标签：php, html, drop-down-menu, status

我想问当我单击下拉列表中的状态时如何显示案例描述。

状态来自数据库并加载到下拉列表中。

我已经从以前的版本更新了这个......但问题是它返回了这样的错误

> 警告：mysql_fetch_array()：提供的参数不是 C:\wamp\www\StudentCases\StudentCasesInput.php 中的有效 MySQL 结果资源，第 112 行，它位于该区域

```
$sql ="SELECT * FROM casestatusfile WHERE CASESTATUSCODE = $casestatus";

 $result=mysql_query($sql);

 while($row=mysql_fetch_array($result)){

 //$casestatuscode = $row['CASESTATUSCODE'];

  $casedesc=$row['CASEDESC']; 
```

这是我的代码：

```
<td>Case Code:</td>
<td>
    include ('connect.php');

    $sqlselect = "SELECT * FROM casestatusfile";
    $resultselect = mysql_query($sqlselect);

    echo "<select name = 'txtCaseStatus' id='txtCaseStatus' onChange='this.form.submit()'/>";
    echo "<option value = ''>--- Select ---</option>";
    while ($row = mysql_fetch_array($resultselect)) {
    echo "<option value = '" . $row['CASESTATUSCODE'] ."'>" . $row['CASESTATUS'] ."</option>";
    }
    echo "</select>";

 $casestatus = $_POST['txtCaseStatus']; 

if (!empty($casestatus)){

//$db_name="ucsaosc";

$sql ="SELECT * FROM casestatusfile WHERE CASESTATUSCODE = $casestatus";
$result=mysql_query($sql);
while($row=mysql_fetch_array($result)){
    //$casestatuscode = $row['CASESTATUSCODE'];
    $casedesc=$row['CASEDESC'];

 }
}
    ?> 
```

从下拉列表中单击后，它将仅显示一条静态消息（案例已打开），但是当我单击下拉列表中的另一个值时，它不会更改...此外，下拉列表将重置回其第一个选项，即---选择--- ....请帮忙！？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-09T05:49:05.077

现在试试这个..

如果您正在使用`mysql_fetch_array()`它，则仅返回`indexed array`not `associative array`。为此，您需要像这样的关联数组..

```
while($row=mysql_fetch_array($result,MYSQL_ASSOC))
{
  ----
} 
```

要不然

```
while($row=mysql_fetch_assoc($result))
{
   .....
} 
```

# ruby-on-rails - 为动态模型创建方法

> ID：15307461
> 
> 赞同：0
> 
> 时间：2013-03-09T05:16:31.903
> 
> 标签：ruby-on-rails, parameters

如果有任何类似的问题，我很抱歉，但我对如何解决我的问题感到困惑，所以我可以保持我的代码干燥。

我需要创建一个**任务列表**，以便用户可以看到尚未发布的交易。

我`application_controller.rb`想创建类似的东西：

**（一种）**

```
def to_do_list(var)
  @var.tableize = var.camelize.where(:status => 0).order("id desc")
end 
```

或者

**(乙)**

```
def to_do_list(var, model_to_do)
  var = model_to_do.where(:status => 0).order("id desc")
end 
```

虽然我`home_controller.rb`想打电话给：

**（一种）**

```
to_do_list(purchase_order_header)
to_do_list(purchase_invoice_header)
etc 
```

或者

**(乙)**

```
to_do_list(@purchase_order_headers, PurchaseOrderHeader)
to_do_list(@purchase_invoice_headers, PurchaseInvoiceHeader)
etc 
```

我对如何做到这一点感到困惑，并发送这些参数并设置我的方法，感谢您的帮助：D

附言。如果可以提供，我更喜欢选项**（A） 。**谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-09T05:49:25.550

我不确定这是否是您想要实现的目标，但请尝试一下

```
to_do_list('purchase_order_header')
to_do_list('purchase_invoice_header')

def to_do_list(model)
  instance_variable_set "@#{model}", model.camelize.constantize.where(:status => 0).order("id desc")
end 
```

调用后`to_do_list`，您应该调用实例变量`@purchase_order_header`和`@purchase_invoice_header`

# c# - C#,Asp.net：如何在 ASP.NET 中将文件从本地机器上传到其他机器

> ID：15307462
> 
> 赞同：-5
> 
> 时间：2013-03-09T05:16:47.837
> 
> 标签：c#, asp.net, code-behind

我有一个使用 asp.net 的网站。我想知道如何使用 fileUpload.thanks 通过 IP 地址将文件从我的机器上传到其他机器

**html**

```
<form id="form1" runat="server" enctype="multipart/form-data">
 <asp:FileUpload ID="FileUpload1" runat="server" ToolTip="Select Only Excel File" />
 <asp:Button runat="server" ID="btnUpload" OnClick="btnUploadClick" Text="Upload" />
</form> 
```

**代码隐藏**

```
protected void btnUploadClick(object sender, EventArgs e)
{
    try
    {
        WebClient client = new WebClient();
        NetworkCredential nc = new NetworkCredential("admin", "jetnexus");
        Uri addy = new Uri(@"\\192.168.2.19\jetnexus\etc\");
        client.Credentials = nc;
        byte[] arrReturn = client.UploadFile(addy, FileUpload1.FileName);
    }
    catch (Exception ex1)
    {
    }
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-09T05:21:14.217

文件上传在客户端上工作。所以只有客户端可以上传文件。
因此，如果您想从任何机器上传您的应用程序必须可以访问该机器。

您可以映射网络驱动器以使用文件上传上传任何文件。

我想你可以这样使用

```
 Stream stream = client.OpenRead(addy);
  String request = reader.ReadToEnd(); 
```

然后使用文件流保存它。

# node.js - node.js 需要方法找不到 javascript 文件：找不到模块

> ID：15307470
> 
> 赞同：0
> 
> 时间：2013-03-09T05:18:11.593
> 
> 标签：node.js

我对 node.js 很陌生，我正在学习一些不同的教程。我的目标是将 node 与 ejs 或下划线一起使用。我第一次使用下划线的尝试并不顺利。

我`bower`用来管理我的项目的脚本依赖项，我能够在路径下拉下下划线的 amd 版本`public/javascripts/vendor`。我有信心，如果我要使用 安装下划线`npm`，将会找到该模块并且错误会消失。

我想用这一行设置 app.config

```
 app.use(express.static(path.join(__dirname, 'public'))); 
```

基本上使用该目录下的所有静态文件？那怎么会找不到下划线..

顺便说一句，这就是我使用它的方式。

```
 var _ = require('underscore-amd');
app.register('.html', {
    compile: function(str, options){
        var compiled = require('underscore-amd').template(str);
        return function(locals) {
            return compiled(locals);
        };
    }
}); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-09T05:25:20.387

你提到了 npm，所以这是在节点中使用下划线的正确方法：

```
{
  "name": "example",
  "version": "0.0.1",
  "dependencies": {
    "underscore": "*",
  }
} 
```

Bower 用于客户端，您不能（轻松）在 node.js 中使用 bower 库。

这是为了向客户端提供静态文件：

```
app.use(express.static(path.join(__dirname, 'public'))); 
```

不供服务器端的节点使用。

# c# - 在 Roslyn CP2 中包含 System.Linq 时出现 CompilationErrorException

> ID：15307488
> 
> 赞同：5
> 
> 时间：2013-03-09T05:20:51.643
> 
> 标签：c#, linq, compiler-construction, roslyn

我已经下载了 Roslyn CTP 并遇到了以下错误。执行`session.Execute(@"using System.Linq;");`带有以下消息的行时会引发 CompilationErrorException：

(1,14)：错误 CS0234：命名空间“System”中不存在类型或命名空间名称“Linq”（您是否缺少程序集引用？）

我的代码是：

```
namespace RoslynError
{
    using System;
    using Roslyn.Scripting;
    using Roslyn.Scripting.CSharp;

    internal class RoslynError
    {
        static void Main(string[] args)
        {
            var engine = new ScriptEngine();
            Session session = engine.CreateSession();
            session.Execute(@"using System.Collections;");
            session.Execute(@"using System.Linq;");
            Console.ReadKey();
        }
    }
} 
```

我特别困惑为什么 System.Linq 行会抛出错误而 System.Collections 很好。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-03-09T08:34:43.777

引擎需要引用 System.Linq 命名空间所在的程序集 (System.Core.dll)

```
engine.AddReference(typeof(System.Linq.Enumerable).Assembly.Location); 
```

这需要在创建会话之前完成。

# jquery - jQuery滑块句柄在放置事件上移动

> ID：15307496
> 
> 赞同：-1
> 
> 时间：2013-03-09T05:21:20.593
> 
> 标签：jquery, user-interface, drag-and-drop, slider

我正在尝试实现一个 jQuery 滑块，您可以在其中将项目拖放到滑块上。

掉落物品有效。但是，句柄会跳转到放置点的位置。这是一个小提琴：

[http://jsfiddle.net/aCLNH/](http://jsfiddle.net/aCLNH/)

```
$(function () {

//the draggable object
$("#dragobject").draggable();

//Prepare the slider
var range = 100,
    sliderDiv = $("#slider");

// Activate the UI slider
sliderDiv.slider({
    min: 0,
    max: range,
});

// Number of tick marks on slider
var position = sliderDiv.position(),
    sliderWidth = sliderDiv.width(),
    minX = position.left,
    maxX = minX + sliderWidth,
    tickSize = sliderWidth / range;

//Set slider as droppable
sliderDiv.droppable({
    //on drop 
    drop: function (e, ui) {

        //If within the slider's width, follow it along
        if (e.pageX >= minX && e.pageX <= maxX) {

            var val = Math.round((e.pageX - minX) / tickSize);
            sliderDiv.slider("value", val);
            alert("My position is : " + val + "% !!");

            //do ajax update here to set the position
            /*$.ajax({
                type: "POST",
                url: url,
                data: val,
                success: function () {
                    //congrats
                },
                dataType: dataType
            });*/

        }
    }
});

}); 
```

我希望把手留在原来的位置。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-09T05:24:44.030

不要设置滑块值。应删除此行：

```
sliderDiv.slider("value", val); 
```

[小提琴](http://jsfiddle.net/MsHLq/)

# ruby-on-rails - 我如何用 rspec 测试这个？

> ID：15307499
> 
> 赞同：0
> 
> 时间：2013-03-09T05:21:49.817
> 
> 标签：ruby-on-rails, ruby, ruby-on-rails-3, testing, rspec

我正在使用 Sorcery gem 进行用户注册/登录。

这个 gem 的一个特性是`require_login`你想要验证的任何控制器上的 before_filter。

他们登录后，我为我的应用程序创建了一个`dashboard`命名空间。例如`/dashboard/reports`or`/dashboard/employees`等​​。

路由文件：

```
# Dashboard                                                
namespace :dashboard do                                      
  # Recent Activity                                          
  get '' => redirect('/dashboard/recent-activity')           
  get 'recent-activity' => 'activities#index', :as => 'root' 
  # Other dashboard controllers and actions
end 
```

我将 before_filter 提取到它自己的控制器中，称为：

“应用程序/控制器/仪表板/base_controller.rb”

```
class Dashboard::BaseController < ApplicationController

  before_filter :require_login

end 
```

我想做的是在某种测试中 100% 确定我在仪表板文件夹（或仪表板命名空间）中创建的任何新控制器都继承自`Dashboard::BaseController`

例如我的活动控制器：

`class Dashboard::ActivitiesController < Dashboard::BaseController`

我不想在几个月内创建控制器并且不小心让它从 ApplicationController 继承，它仍然会但不会有登录功能。

我正在使用 RSpec

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-09T06:10:44.940

不敢相信自己的眼睛，我自己解决了这个问题......

```
require 'spec_helper'

describe Dashboard::BaseController do

  it "is the superclass of every dashboard namespaced controller" do
    Rails.application.eager_load!
    ApplicationController.descendants.each do |controller|
      if controller.to_s.include?("Dashboard::") && controller.to_s != "Dashboard::BaseController"
        expect(controller.superclass.to_s).to eq("Dashboard::BaseController")      
      end
    end
  end

end 
```

# sql - 在 SQL Server 2005 中将外键设为自动增量

> ID：15307502
> 
> 赞同：0
> 
> 时间：2013-03-09T05:21:54.250
> 
> 标签：sql, sql-server, sql-server-2005

我在 MySQL 中有这些表结构，并且根据我的要求它工作正常。

```
CREATE TABLE `ebasic` ( <br>
`eid` int(11) NOT NULL AUTO_INCREMENT, <br>
`d_id` int(11) NOT NULL, <br>
`pos` varchar(50) DEFAULT NULL, <br>
`hdd` varchar(5) DEFAULT NULL, <br>
`hmm` varchar(10) DEFAULT NULL, <br>
`hyy` varchar(5) DEFAULT NULL, <br>
`fname` varchar(25) DEFAULT NULL, <br>
`lname` varchar(25) DEFAULT NULL, <br>
`bdd` varchar(5) DEFAULT NULL, <br>
`bmm` varchar(10) DEFAULT NULL, <br>
`byy` varchar(5) DEFAULT NULL, <br>
`gender` varchar(10) DEFAULT NULL, <br>
`addr` varchar(100) DEFAULT NULL, <br>
 `city` varchar(25) DEFAULT NULL, <br>
 `state` varchar(25) DEFAULT NULL, <br>
 `pin` varchar(10) DEFAULT NULL, <br>
 `country` varchar(25) DEFAULT NULL, <br>
 `tel` varchar(25) DEFAULT NULL, <br>
 `mobile` varchar(25) DEFAULT NULL, <br>
 `email` varchar(30) DEFAULT NULL, <br>
 `qual` varchar(30) DEFAULT NULL, <br>
 PRIMARY KEY (`eid`) );<br>

CREATE TABLE `eaccount` ( <br>
`eid` int(11) NOT NULL AUTO_INCREMENT, <br>
`d_id` int(11) NOT NULL, <br>
`accno` varchar(20) DEFAULT NULL, <br>
`pan` varchar(15) DEFAULT NULL, <br>
`passport` varchar(15) DEFAULT NULL, <br>
`visa` varchar(15) DEFAULT NULL, <br>
`type` varchar(20) DEFAULT NULL, <br>
KEY `eid` (`eid`), <br>
FOREIGN KEY (`eid`) REFERENCES `ebasic` (`eid`) ON DELETE CASCADE ); <br> 
```

所以，列`eid`是主键 in`ebasic`和外键`eaccount`，所以如果行从 中删除`ebasic`，它`eaccount`也会从 中删除，因为`ON DELETE CASCADE`。

但是，它们都是自增列，所以当成功插入一行时，插入的`ebasic`对应行与自增编号相同`eid`。`ebasic``eaccount`

现在，我正在尝试将我的数据库迁移到 SQL Server，我在那里的自动增量是`IDENTITY(seed, increment)`. 但是，我不能在 SQL Server 中将外键设置为 auto_increment，但在 MySQL 中是可能的。请帮忙 ！！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-09T05:44:35.410

在 SQL Server 中，您无法使用自动增量选项创建外键并设置级联删除选项，如果您在一个表中插入一行，您可以获得插入的行 ID 并将其存储在引用此键的其他表中，例如：

```
declare @idtable table (id int);

insert into ebasic (d_id, pos ......)
OUTPUT Inserted.eid INTO @idTable
values (1,2,...);

declare @eid int
select eid = id from @idTable;

insert into eaccount (eid, d_id...)
values (@eid, 1,...); 
```

# knockout.js - 多个布尔值上的 Knockout.js“如果绑定”

> ID：15307504
> 
> 赞同：38
> 
> 时间：2013-03-09T05:22:06.613
> 
> 标签：knockout.js, knockout-2.0

**[如果绑定](http://knockoutjs.com/documentation/if-binding.html)**多个布尔值，是否可以使用 Knockout ？

如

```
<div data-bind="if: (property.aTrueValue && property.anotherTrueValue)">... 
```

我尝试了很多不同的语法，但似乎找不到正确的语法。我不确定这是否可能。

* * *

## 回答 #1

> 赞同：53
> 
> 时间：2013-03-09T05:34:08.570

当 Knockout 处理您的绑定时，它首先评估您的表达式。

如果表达式产生一个 observable，它会评估 observable 以方便获取 if: 工作的最终值。

所以以下两个工作相同

```
<div data-bind="if: foo"></div>
<div data-bind="if: foo()"></div> 
```

一旦你离开了以 observable 结尾的简单表达式的世界，你可能还想把糖抛在脑后，总是自己评估 observables（如果没有别的，为了理智）。

尝试以下

```
<div data-bind="if: (property.aTrueValue() && property.anotherTrueValue())">... 
```

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2013-03-09T05:37:34.270

你可以 - if 绑定只需要一个任意表达式。当做的不仅仅是像这样引用 observable 的值时，你需要像这样实际调用 observable：

```
<div data-bind="if: (property.aTrueValue() && property.anotherTrueValue())">... 
```

这是一个有效的[jsfiddle](http://jsfiddle.net/daedalus28/6hxvQ/)。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2020-06-12T10:40:30.657

当前的解决方案更像是这样：

```
<div data-bind="if: (prop() === true && prop2() === true)">... 
```

# .net - 如何测试字符串是表达式还是字符串？

> ID：15307511
> 
> 赞同：0
> 
> 时间：2013-03-09T05:23:17.427
> 
> 标签：.net, wpf, c#-4.0, workflow-foundation-4

我在尝试转换`InArgument<String>`用于自定义活动设计器（重新托管）时遇到问题。我已经让它非常适用于数据类型，例如`float`和`int`。这个想法是让用户以最直观的方式输入设置。例如，使用 a`TextBox`用户可以输入文字数字（即 9）或 VB 表达式（即变量`num`）。这是一个示例转换器：

```
public class InArgumentIntConverter : IValueConverter
{
    public object Convert(object value, Type targetType, object parameter, System.Globalization.CultureInfo culture)
    {
        ModelItem modelItem = value as ModelItem;
        if (modelItem != null)
        {
            InArgument<int> inArgument = modelItem.GetCurrentValue() as InArgument<int>;

            if (inArgument != null)
            {
                Activity<int> expression = inArgument.Expression;
                VisualBasicValue<int> vbexpression = expression as VisualBasicValue<int>;
                Literal<int> literal = expression as Literal<int>;

                if (literal != null)
                {
                    return literal.Value.ToString();
                }
                else if (vbexpression != null)
                {
                    return vbexpression.ExpressionText;
                }
            }
        }
        return null;
    }

    public object ConvertBack(object value, Type targetType, object parameter, System.Globalization.CultureInfo culture)
    {
        string itemContent = (string)value;
        InArgument<int> inArgument = null;
        try
        {
            int literal = int.Parse(itemContent);
            inArgument = new InArgument<int>(literal);
        }
        catch (FormatException)
        {
            VisualBasicValue<int> vbArgument = new VisualBasicValue<int>(itemContent);
            inArgument = new InArgument<int>(vbArgument);
        }
        catch (OverflowException)
        {
            MessageBox.Show("Your number is too big!");
        }

        return inArgument;
    }
} 
```

这里的关键似乎是我可以通过使用适当的`Parse()`方法来检测文本框中的值是文字还是表达式，但是似乎没有办法测试字符串是常规的旧字符串还是表达式。

将值解析为文字会破坏表达式，但解析为表达式会强制在文本框中的值周围加上引号以获取文字值。

所以，我的问题是，如何测试一个表达式是文字字符串还是表达式？

**编辑：**

为了增加说明，我试图实现的最终结果是用户可以在 a 中输入文字字符串或表达式`Windows.Controls.TextBox`，而不必为文字值使用引号。（我尝试添加图像以使其更清晰，但我想我还没有足够的声誉，所以 ASCII 艺术将不得不这样做）。

应该出现：

```
 +-------------------------+          +-----------------------------+
  | Some Literal value      |    or    | foo + "Some expression"     |
  +-------------------------+          +-----------------------------+ 
```

不应显示为：（在解析为表达式时发生，即 VisualBasicValue）

```
 +-------------------------+          +-----------------------------+
  | "Some Literal value"    |    or    | foo + "Some expression"     |
  +-------------------------+          +-----------------------------+ 
```

不应显示为：（在解析为文字时发生，即文字）

```
 +-------------------------+          +-----------------------------+
  | Some Literal value      |    or    | "foo + "Some expression""   |
  +-------------------------+          +-----------------------------+ 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-09T14:39:57.883

从你的代码中你不能完全理解你在做什么，但我猜你在这里发明了轮子。

您使用的是普通的 WPF 文本框吗？有一个[ExpressionTextBox](http://msdn.microsoft.com/en-us/library/system.activities.presentation.view.expressiontextbox.aspx)可以完全按照您的描述进行。无需编写自定义转换器。

检查此示例：[如何使用 Windows Workflow Foundation (WF4) 创建自定义活动设计器](http://blogs.msdn.com/b/appfabric/archive/2011/08/14/how-to-create-a-custom-activity-designer-with-windows-workflow-foundation-wf4.aspx)

# javascript - 在 .txt 文件中插入要读取的新行

> ID：15307515
> 
> 赞同：2
> 
> 时间：2013-03-09T05:23:27.413
> 
> 标签：javascript, text, carriage-return, notepad, jszip

我有以下代码用于在 javascript 中创建 .txt 文件：

```
var text_block = '';

text_block += "Variable 1:"+var1+"\r\n";
text_block += "Variable 2:"+var2+"\r\n";
text_block += "Variable 3:"+var3;

var zip = new JSZip();
zip.file("variables.txt", text_block); 
```

它将进入一个 zip 文件，因为它最终将与其他文件一起打包。当我运行这个脚本时，它正在创建文本文件，但是在记事本中打开时没有新的行/回车符。它们在使用写字板打开时会显示，但我不能假设人们会默认将其用于 .txt 文件。如何在记事本中显示换行符？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-09T05:54:10.097

查看 JSZip 的源代码，在他们网站上下载包的文件 jszip.js 中，我注意到这行代码（第 661-662 行）：

```
 utf8encode : function (string) {
     string = string.replace(/\r\n/g,"\n"); 
```

所以这似乎是你的问题。也许您可以尝试注释掉第 662 行，我不知道它为什么在那里，它很可能会破坏其他东西。他们似乎从[这里](http://www.webtoolkit.info/javascript-utf8.html)复制了代码，根据源代码中的 url。

# php - 过滤器 iTunes 应用程序客户评论 - 网络服务

> ID：15307517
> 
> 赞同：2
> 
> 时间：2013-03-09T05:23:55.613
> 
> 标签：php, ios

**客观的：**

从 iTunes 和过滤器（例如最有帮助、最新的评论）获取客户对应用程序的评论。

**Apple 支持的方法：**

Apple 提供“App 评论”网络服务来获取每个应用程序的客户评论。

`API: http://itunes.apple.com/rss/customerreviews/id=400274934/xml`

**问题：**

此 Web 服务提供有关特定 AppID 的所有客户评论，但我想要 iTunes 提供的最有用或最新的评论。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-09T05:56:10.467

我在网络上搜索了是否可以以不同的顺序显示特定应用程序的结果。我找不到他们可以，所以想象一下你应该以编程方式下载这个：

[http://itunes.apple.com/rss/customerreviews/id=400274934/sortby=mostrecent/page=1/xml](http://itunes.apple.com/rss/customerreviews/id=400274934/sortby=mostrecent/page=1/xml)

从那里，`/feed/link[@rel="last"]`在您的 XML 阅读器中使用 XPath 下载。解析出页码，它似乎比最后一页多一页。在这种情况下，最后一页是 13，因此您应该读取第 1 页到第 12 页并将数据插入数据库。然后，您可以根据需要应用自己的排序。

我注意到如果您更容易使用“xml”可以替换为“json”。

如果您可以找到“sortby”的其他有效值，则可能会提供更简单的解决方案，但我猜测其他人（如“rating”）返回了一个空文档。

* * *

嗯，重新阅读您的问题让我觉得您只想为所有应用程序投票。如果是这样，您可以在此处生成自定义 RSS 提要：

[http://itunes.apple.com/rss/customerreviews/](http://itunes.apple.com/rss/customerreviews/)

# php - Codeigniter 一项具有多个访问点、子域、htaccess 的服务

> ID：15307518
> 
> 赞同：3
> 
> 时间：2013-03-09T05:24:08.470
> 
> 标签：php, .htaccess, codeigniter, subdomain

我不完全确定如何正确措辞，所以我提前道歉。我有一个稍微独特的设置，但同时不是那么独特。我希望有

```
api.domain.com
m.domain.com
domain.com 
```

所有人都使用相同的代码库，但提供不同的视图，并使用不同的控制器集。但是，我不想通过在特定于子域​​本身的各种目录中制作它的镜像副本来复制我的代码库。对我来说，这是多余的，与高效相反，因为我必须管理 3 组以上的模型、库，在某些情况下还需要管理控制器。跨服务的各个版本维护功能。

现在，我的设置和工作是通过不断增长的 routes.php 来说明在通过普通域时使用什么控制器。

IE

```
domain.com
domain.com/m/
domains.com/api/ 
```

目前哪种方法有效，但我正在尝试考虑最适合服务的组织和未来发展的方法。

所以我的所有问题是，我如何设置 codeigniter 以支持这种使用子域的逻辑，同时将所有内容保存在一个主代码库中。这合理吗？如果是这样，如何实现？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-09T07:02:26.580

好的，所以在对我的原始帖子发表评论后，将我指向堆栈上的另一篇帖子，我想出了一种处理我的问题的好方法。它不完全是在链接中找到的答案，而不仅仅是基于逻辑的衍生品。由于我有多个子域，我想推出每个具有自己的一组功能和需求，以及特定于其原因的控制器，这些控制器只能从这些子域调用。

这就是说我的解决方案，对于那些可能偶然发现它的人来说，`routes.php`我最终制作了一个小函数来`HTTP_HOST`根据我的需要进行拆分`.`并从那里使用它。我的例子如下。

请注意，我还替换了 routes.php 中的所有内容，因此它不仅仅是一条直线`$route['this/that'] = 'dir/controller';`

```
<?php  if ( ! defined('BASEPATH')) exit('No direct script access allowed');
/*
| -------------------------------------------------------------------------
| URI ROUTING
| -------------------------------------------------------------------------
| This file lets you re-map URI requests to specific controller functions.
|
| Typically there is a one-to-one relationship between a URL string
| and its corresponding controller class/method. The segments in a
| URL normally follow this pattern:
|
|   example.com/class/method/id/
|
| In some instances, however, you may want to remap this relationship
| so that a different class/function is called than the one
| corresponding to the URL.
|
| Please see the user guide for complete details:
|
|   http://codeigniter.com/user_guide/general/routing.html
|
| -------------------------------------------------------------------------
| RESERVED ROUTES
| -------------------------------------------------------------------------
|
| There area two reserved routes:
|
|   $route['default_controller'] = 'welcome';
|
| This route indicates which controller class should be loaded if the
| URI contains no data. In the above example, the "welcome" class
| would be loaded.
|
|   $route['404_override'] = 'errors/page_missing';
|
| This route will tell the Router what URI segments to use if those provided
| in the URL cannot be matched to a valid route.
|
*/
function whichSubRoute()
{
    $subs = array(
                "api"=>"api/",
                "m"=>"m/"
                );

    $curr = $_SERVER['HTTP_HOST'];
    $curr = explode('.', $curr);
    if(array_key_exists($curr[0], $subs))
    {
        return array($curr[0], $subs[$curr[0]]);
    }
    return false;
}

//due to the the way this setup works, some controller references
//can be found multiple times (and in no particular order).
//also note due to this setup, each method has its own default and 404
$choiceRoute = whichSubRoute();
if($choiceRoute !== false)
{
    if($choiceRoute[0]=="api")
    {
        $route['default_controller'] = "welcome";
        $route['404_override'] = '';
        //start version 1 (mvp API)
        $route['1.0/user/(:any)'] = $choiceRoute[1].'v1_userinfo/index/$1';
        //controllers outside of "/api"
    }
    if($choiceRoute[0]=="m")
    {
        $route['default_controller'] = "welcome";
        $route['404_override'] = '';
        //start version 1 (mobile)
        $route['welcome']                   = $choiceRoute[1].'m_welcome';
        $route['dashboard']                 = $choiceRoute[1].'m_dashboard';
        $route['user/(:any)']               = $choiceRoute[1].'m_userinfo/index/$1';
        $route['reg']                       = 
        //controllers outside of "/m"
        $route['login/auth']                = 'login/auth';
        $route['logout/mobile']             = 'logout/mobile';
        //end version 1 (mobile)
    }
}
else
{
    $route['default_controller'] = "welcome";
    $route['404_override'] = '';
}
/* End of file routes.php */
/* Location: ./application/config/routes.php */ 
```

另外请记住，我确实需要每个子域的默认控制器和 404 控制器

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-09-15T16:01:55.553

我想您可以根据 ENVIRONMENT 常量加载不同的配置。

[http://ellislab.com/codeigniter/user-guide/libraries/config.html](http://ellislab.com/codeigniter/user-guide/libraries/config.html)

> 您可以根据当前环境加载不同的配置文件。ENVIRONMENT 常量在 index.php 中定义，在处理环境部分有详细描述。
> 
> 要创建特定于环境的配置文件，请在 application/config/{ENVIRONMENT}/{FILENAME}.php 中创建或复制配置文件
> 
> 例如，要创建仅用于生产的 config.php，您将：
> 
> 创建目录 application/config/production/ 将现有的 config.php 复制到上述目录中 编辑 application/config/production/config.php 使其包含您的生产设置

# python - 如何在pylab中运行一个python文件，它执行另一个python文件？

> ID：15307519
> 
> 赞同：2
> 
> 时间：2013-03-09T05:24:12.180
> 
> 标签：python, matplotlib, execfile

我想创建一个运行我请求的文件的启动配置。到目前为止，我的配置文件如下：

```
path1=input('What folder would you like to open?')

os.chdir('C:\\Users\\Owner\\Documents\\Spring 2013\\CSCI_278\\'+path1)

doc=input('What file would  you like to open and run?')

open(doc)

execfile(doc) 
```

但由于`execfile`某种原因不起作用，我最终不得不`%run`在 pylab 中使用。有没有解决的办法？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-09T06:17:16.347

使用[`raw_input`](http://docs.python.org/2/library/functions.html#raw_input)而不是`input`解决您的问题吗？

不确定你是否需要这`open(doc)`条线。

下面的代码适用于我的机器：

```
doc = raw_input('What file would  you like to open and run?')

execfile(doc) 
```

请注意，如果您不想每次都键入“.py”，也可以使用下面的行

```
doc = "%s.py" % raw_input('What file would  you like to open and run?') 
```

# haskell - Haskell 参数 - 比较运算符

> ID：15307521
> 
> 赞同：2
> 
> 时间：2013-03-09T05:24:29.403
> 
> 标签：haskell

我想定义一个函数，其参数接受一个列表和一个运算符。这是我目前拥有的。我正在尝试定义一个可以找到最小值或最大值的高阶函数。

```
largest :: (a -> a -> Bool) -> a
largest = findType (>)

findType :: (a -> a -> Bool) -> [a] -> a
findType op [] = error "empty list"
findType op [x] = x
findType op (x:xs) 
    | x op maxTail = x
    | otherwise = maxTail
    where maxTail = findType op xs 
```

但是，它目前无法正常工作。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-09T06:20:41.673

您可以编写一个接受任何函数参数的函数，或者使用可比较数据类型实现[Ord](http://hackage.haskell.org/packages/archive/base/latest/doc/html/Prelude.html#t%3aOrd)类`a -> a -> Bool`的事实。

这是一段代码，显示了检查列表是否已排序的两种方法

```
option1 :: (a->a->Bool) -> [a] -> Bool
option1 op (a:b:ls) = op a b && option1 op (b:ls)
option1 op _ = True

option2 :: (Ord a) => Ordering -> [a] -> Bool
option2 op (a:b:ls) = compare a b == op && option2 op (b:ls)
option2 op _ = True

main = do
   let ls = [1, 2, 3]
   print $ option1 (<) ls
   print $ option2 LT ls 
```

请注意，第二种方法需要使用`Ordering`只有值`LT`,`EQ`和`GT`(分别表示 <、= 和 >) 的数据类型。您可以通过传递可接受`Ordering`值列表或其他一些数据结构来使其更灵活，但是，在大多数情况下，第一个选项更合适。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-09T10:05:38.850

GHC 不知道你想在你的代码中使用函数**op**作为操作符，你必须告诉他，但你怎么能这样做呢？

让我们考虑一下**elem**函数，该函数接受一个值和一个列表，并根据该值是否存在于列表中返回 True 或 False。

```
elem :: Eq a => a -> [a] -> Bool
elem 2 [1,2,3] => True 
```

基本上它被视为一个函数，如果你想将它们用作一个真正有用的运算符，你必须用**`**将它括起来。

```
2 `elem` [1,2,3] => True 
```

如果在 where 子句中加入 didierc 对 findType 调用的注释，就可以得到一个工作代码。

无论如何，将递归调用放入警卫是一个非常糟糕的主意，代码最难阅读，我不确定它是否会导致性能问题。你需要学习如何使用累加器，看看[这个](http://learnyouahaskell.com/higher-order-functions)

* * *

**注意**
相反，当默认情况下将函数视为运算符时，要将其用作函数，只需用**()**将其括起来。

```
2 : [] => [2]

(:) 2 [] => [2] 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-09T08:12:36.543

您的代码是两个不同的问题。让我们首先解决生成编译器错误的问题。

您给`findType`了以下签名：

```
findType :: (a -> a -> Bool) -> [a] -> a 
```

目的是从作为第二个参数给出的列表中提取由作为第一个参数提供的排序谓词所指示的边界。

但是，在 `findType`函数定义的最后一行中，您绑定`maxTail`到表达式`findType xs`，它省略了谓词。

正确的线路当然是：

```
where maxTail = findType op xs 
```

你的第二个错误与`largest`函数的签名有关，但我会让你找出它到底是什么。

# time-complexity - 以下函数的增长率是多少

> ID：15307528
> 
> 赞同：0
> 
> 时间：2013-03-09T05:25:50.323
> 
> 标签：time-complexity, big-o

就大 O 表示法而言，以下函数的增长率是多少？

```
f (n) = Comb(1000,n) for n = 0,1,2,…

int Comb(int m, int n)
{
    int pracResult = 1;
    int i;

    if (m > n/2) m = n-m;

    for (i=1; i<= m; i++)
    {
        pracResult *= n-m+i;
        pracResult /= i;
        practicalCounter++;
    }

    return pracResult;

} 
```

递归：

```
int combRecursive (int m, int n)
{
    recursiveCounter++;
    if (n == m) return 1;
    if (m == 1) return n;
    return combRecursive(n-1, m) + combRecursive(n-1, m-1);

} 
```

我猜n^2？？？不过，我可能错了……我一直在努力弄清楚事情的效率如何……

提前谢谢你。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-09T05:35:08.780

是`O(1)`。

根据定义，`f(n) = O(g(n))`如果存在一个`c`这样的所有`n`，`f(n) <= c*g(n)`

让`c`=`Comb(1000,500)`

对于所有`n`，`Comb(1000, n) < c * 1`。因此`Comb(1000, n) = O(1)`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-09T05:35:57.860

对于 n = 1 到 2000，将有与 n 成比例的操作

对于所有 n > 2000，总操作数是恒定的。

**因此函数复杂度为 O (1)**

我必须告诉你，你必须读一些书。:)
Sahni 的数据结构和算法读起来很轻松。Knuth 的算法非常繁重，但却是最好的。

# python - 从 Radiobutton 获取输入

> ID：15307531
> 
> 赞同：1
> 
> 时间：2013-03-09T05:26:49.163
> 
> 标签：python, tkinter

我正在使用 Tkinter 和 graphics.py（Tkinter 上的一个包装器）的组合来创建一个带有 GUI 的相当基本的积分器（查找图形下的区域）。到目前为止，积分器的主要“控制面板”与实际图形（使用 graphics.py 制作）是分开的。我使用 Tkinter 的`Radiobutton()`积分类型（左矩形、右矩形、梯形或辛普森近似）进行选择。

我的问题是我无法从单选按钮获取输出。我使用的是来自[TutorialsPoint: Tkinter Radiobutton](http://www.tutorialspoint.com/python/tk_radiobutton.htm)的示例。

这是我的代码：

```
class FunctionInput:
        def __init__(self, master, window, items):
            self.window = window
            self.items = items
            self.runProgram = True
            self.typeChoice = tk.StringVar()
            self.frame = tk.Frame(master)
            self.typeFrame = tk.Frame(self.frame)
            self.quitButton = tk.Button(self.frame, text = 'Quit', command = self.frame.quit)
            self.optLabel = tk.Label(self.frame, text = 'Type of Approximation: ')
            self.optL = tk.Radiobutton(self.typeFrame, text = 'Left Rectangular', variable = self.typeChoice, value = 'l')
            self.optR = tk.Radiobutton(self.typeFrame, text = 'Right Rectangular', variable = self.typeChoice, value = 'r')
            self.optT = tk.Radiobutton(self.typeFrame, text = 'Trapezoidal', variable = self.typeChoice, value = 't')
            self.optS = tk.Radiobutton(self.typeFrame, text = 'Simpsons Rule', variable = self.typeChoice, value = 's')
            self.optL.grid(row = 1, column = 1, padx = 5, pady = 5)
            self.optR.grid(row = 1, column = 2, padx = 5, pady = 5)
            self.optT.grid(row = 2, column = 1, padx = 5, pady = 5)
            self.optS.grid(row = 2, column = 2, padx = 5, pady = 5)
            self.optLabel.grid(row = 4)
            self.typeFrame.grid(row = 5)
            self.quitButton.grid(row = 6)
            # there were numerous other widgets and frames, but I only included the relevant ones
            self.frame.grid()

        def getInput(self):
            type_integration = self.typeChoice.get()
            self.frame.quit()
            return type_integration

def main():
    # some other code, win and axisLabels are defined prior to this
    root = tk.Tk(className = ' Function Grapher')
    app = FunctionInput(root, win, axisLabels)
    root.rowconfigure(0, weight = 1)
    root.columnconfigure(0, weight = 1)
    root.mainloop() # there is a button to exit the mainloop in my GUI
    typeIntegration = app.getInput()
    print typeIntegration # trying to debug it

if __name__ == '__main__': main() 
```

但是，它不会打印变量。它打印一个空字符串，因此执行不是问题。`root.mainloop()`不会陷入无限循环，因为我的 GUI 中有一个按钮（此处未显示，因为它无关紧要）退出它。没有引发错误，所以我猜测问题在于将选项设置为变量。任何帮助是极大的赞赏。

另外，附带说明一下，每当我运行程序时，“右矩形”、“梯形”和“辛普森规则”单选按钮都会变灰，如下所示：

![](../Images/b0f74e24384e5c4d5afb62e240da05d6.png)

如果我单击其中一个单选按钮，这种灰色就会消失，但在那之前，它会一直存在。如果有什么方法可以解决这个问题，请告诉我。

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-09T16:45:10.297

问题是，由于我使用了多个其他小部件，因此我必须将`StringVar()`s`master`参数设置为`self.typeFrame`：

```
class FunctionInput:
        def __init__(self, master, window, items):
            self.window = window
            self.items = items
            self.runProgram = True
            self.frame = tk.Frame(master)
            self.typeFrame = tk.Frame(self.frame)
            self.typeChoice = tk.StringVar(self.typeFrame)
            self.quitButton = tk.Button(self.frame, text = 'Quit', command = self.frame.quit)
            self.optLabel = tk.Label(self.frame, text = 'Type of Approximation: ')
            self.optL = tk.Radiobutton(self.typeFrame, text = 'Left Rectangular', variable = self.typeChoice, value = 'l')
            self.optR = tk.Radiobutton(self.typeFrame, text = 'Right Rectangular', variable = self.typeChoice, value = 'r')
            self.optT = tk.Radiobutton(self.typeFrame, text = 'Trapezoidal', variable = self.typeChoice, value = 't')
            self.optS = tk.Radiobutton(self.typeFrame, text = 'Simpsons Rule', variable = self.typeChoice, value = 's')
            self.optL.grid(row = 1, column = 1, padx = 5, pady = 5)
            self.optR.grid(row = 1, column = 2, padx = 5, pady = 5)
            self.optT.grid(row = 2, column = 1, padx = 5, pady = 5)
            self.optS.grid(row = 2, column = 2, padx = 5, pady = 5)
            self.optLabel.grid(row = 4)
            self.typeFrame.grid(row = 5)
            self.quitButton.grid(row = 6)
            # there were numerous other widgets and frames, but I only included the relevant ones
            self.frame.grid()

        def getInput(self):
            type_integration = self.typeChoice.get()
            self.frame.quit()
            return type_integration

def main():
    # some other code, win and axisLabels are defined prior to this
    root = tk.Tk(className = ' Function Grapher')
    app = FunctionInput(root, win, axisLabels)
    root.rowconfigure(0, weight = 1)
    root.columnconfigure(0, weight = 1)
    root.mainloop() # there is a button to exit the mainloop in my GUI
    print app.getInput()

if __name__ == '__main__': main() 
```

另外，作为@A。罗达斯说，为了摆脱灰色，我做了：

```
self.typeFrame = tk.Frame(self.frame)
self.typeChoice = tk.StringVar(self.typeFrame)
self.typeChoice.set(None) 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-09T15:56:29.137

我还没有看到退出按钮的部分，但是您的代码执行以下操作：

1.  启动主循环
2.  退出按钮的事件处理程序调用`root.quit()`
3.  在`getInput`, 检索值并调用`self.frame.quit()`

在 mainloop 之后调用 Tkinter 函数可能会导致这样的问题，因此您应该先获取 StringVar 的值，然后退出 GUI 循环。这是一个基于您的代码的工作示例：

```
import Tkinter as tk

class App():
    def __init__(self, master):
        self.master = master
        self.type_integration = None
        self.typeChoice = tk.StringVar()
        self.typeChoice.set(None) # This fixes the grayness of the radio buttons!
        self.typeFrame = tk.Frame(master)
        OPTIONS = [('Left Rectangular', 'l'),
                   ('Right Rectangular', 'r'),
                   ('Trapezoidal', 't'),
                   ('Simpsons Rule', 's')]
        for text, value in OPTIONS:
            tk.Radiobutton(self.typeFrame, text=text, variable=self.typeChoice, value=value).pack()
        tk.Button(self.typeFrame, text="Exit", command=self.exit).pack()
        self.typeFrame.pack()
    def exit(self):
        self.type_integration = self.typeChoice.get()
        self.master.destroy() # self.master.quit() freezes the GUI
    def getinput(self):
        return self.type_integration

master = tk.Tk()
app = App(master)
tk.mainloop()
print app.getinput() 
```

# c++ - 如何将 lambda 用于容器比较运算符？

> ID：15307532
> 
> 赞同：7
> 
> 时间：2013-03-09T05:26:51.723
> 
> 标签：c++, c++11

这就是我将使用内置函数或新类作为自定义比较器的方式

```
priority_queue< int, vector<int>, greater<int> > third (myints,myints+4);

  // using mycomparison:
  priority_queue< int, vector<int>, mycomparison > q1;
class mycomparison
{ 
public: 
  bool operator() (const int& lhs, const int&rhs) const
  {
     return (lhs<rhs);
  }
};
  typedef priority_queue<int,vector<int>,mycomparison> q2; 
```

但我想知道我是否可以在那里使用 lambda 函数..

* * *

## 回答 #1

> 赞同：19
> 
> 时间：2013-03-09T05:36:54.480

首先定义 lambda：

```
auto compareFunc = [](int a, int b) { return a > b; }; 
```

然后使用 decltype：

```
typedef priority_queue<int, vector<int>, decltype(compareFunc)> q2; 
```

现在当你使用时`q2`，传入函数：

```
q2 myQueue(compareFunc); 
```

基本上，priority_queue 将函数的类型作为它的第三个模板参数，而构造函数则采用指向该函数本身的指针。

# html - 将 div 放在另一侧的单行中

> ID：15307533
> 
> 赞同：0
> 
> 时间：2013-03-09T05:27:05.113
> 
> 标签：html, css, css-float

我试图将两个类放在 div 两侧的同一行。

我想要两个按钮：`Login`&位于 and 的`Register`两端，`#home-button`在同一行。

这是`HTML`代码：

```
<div id="content">
    <div id="lcol" class="lfloat">
        Hello
    </div>
    <div id="home-button" class="rfloat">
        <a href="#"><div class="login-button Login">Login</div></a>
        <a href="#"><div class="login-button Register">Register</div></a>
    </div>
</div> 
```

我的 CSS：

```
.login-button{
    background:#4578bc;
    color:#fff;
    padding:15px 20px;
    text-align:center;
}

#home-button{
    width:100px;
    margin:100px 0 0 0;
}

.lfloat{float:left}
.rfloat{float:right} 
```

但是，无论我尝试什么，这两个按钮：`Login`&`Register`最终都位于不同行的同一侧。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-09T05:33:04.193

Login 和 Register 位于不同行的原因是它们都是块级元素。您必须浮动其中一个或两个以将它们放在同一行上，或者使它们内联。

这是一个例子：

[http://jsfiddle.net/K2Rtr/](http://jsfiddle.net/K2Rtr/)

```
<div id="right">
    <div id="right-left">Login</div>
    <div id="right-right">Register</div>
</div>

#right { float: right; width: 100px;}
#right-left {float: left; }
#right-right {float: right;} 
```

在此示例中，登录和注册位于 100 像素宽且向右浮动的 div 的相对两侧。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-09T06:23:51.460

如果使用`float:right;`意味着它会在更大尺寸的显示器和高分辨率下产生问题，因此您可以使用`left: 35%; position: absolute;`div2 来解决分辨率问题。

快乐的编码...

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-09T05:31:47.533

尝试以下风格，

```
.login-button {
    background:#4578bc;
    color:#fff;
    padding:15px 20px;
    text-align:center;
    display:inline-block;
}
#home-button {
    margin:100px 0 0 0;
} 
```

[http://jsfiddle.net/YvUER/](http://jsfiddle.net/YvUER/)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-09T05:34:34.100

你可以试试这个：

编辑 ：

```
.login-button {
background: #4578BC;
color: white;
padding: 15px 20px;
text-align: center;
width: 100px;
float: left;
}

#home-button {
width: 282px;
margin: 100px 0 0 0;
float: right;
} 
```

# java - 如何修复 if else 语句以确定是否单击“确定”或“取消”？

> ID：15307537
> 
> 赞同：-1
> 
> 时间：2013-03-09T05:27:22.460
> 
> 标签：java

这是有助于在屏幕上显示确认对话框的代码，首先 if 语句仅检查按下了哪个单选按钮，然后出现确认对话框，其中有可用选项，即“确定”和“取消”。因此，当我单击“确定”或“取消”时，会出现另一个确认对话框，该对话框必须显示消息，显示单击了哪个，**但是有错误**，即使单击“确定”，它也会显示**您按下取消**

```
if (Choose == okCancel.getText() && IconChoose == NoneRadioButton.getText())
{
    int response = 
        JOptionPane.showConfirmDialog(null, txt, " Message Dialog Box", 
                                      JOptionPane.OK_CANCEL_OPTION);
}
else if (response == JOptionPane.OK_OPTION)
{
    JOptionPane.showConfirmDialog(null, "You Pressed OK ","", 
                                  JOptionPane.DEFAULT_OPTION);
}

if (response == JOptionPane.CANCEL_OPTION)
{
    JOptionPane.showConfirmDialog(null, "You Pressed CANCEL ","",
                                  JOptionPane.DEFAULT_OPTION);
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-09T05:32:25.123

尝试使用

```
 .equals() or equalsIgnoreCase(); 
```

代替==

# java - Java中引用的表示

> ID：15307539
> 
> 赞同：3
> 
> 时间：2013-03-09T05:27:52.063
> 
> 标签：java, generics, reference

Anjelika Langer 在她的泛型常见问题解答中写了以下关于 Java 决定使用*代码重用*而不是泛型类型的*代码专门化的决定：*

> 在集合中的元素是引用（或指针）的情况下，代码专门化尤其浪费，**因为所有引用（或指针）的大小相同并且内部具有相同的表示**。不需要为整数引用列表和字符串引用列表生成几乎相同的代码。这两个列表都可以在内部由对任何类型对象的引用列表表示。每当这些引用传入和传出泛型类型或方法时，编译器只需添加几个强制转换。由于在 Java 中大多数类型都是引用类型，因此 Java 选择代码共享作为其通用类型和方法转换的技术是很自然的。

所以第一个问题是真的所有引用都具有相同的大小并且在内部共享相同的表示吗？

如果答案是正确的，Java 中的所有引用共享哪些属性？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-09T05:40:26.717

> 所以第一个问题是真的所有引用都具有相同的大小并且在内部共享相同的表示吗？

是的。（为什么你会*想象*像 Anjelika Langer 这样知识渊博的人会弄错？？？）

> 如果答案是正确的，Java 中的所有引用共享哪些属性？

他们都有一个类型，`Object`作为它的终极超类型。因此它们都提供了[`java.lang.Object`](http://docs.oracle.com/javase/7/docs/api/java/lang/Object.html)API 中的所有方法。

# php - 使用推特登录

> ID：15307540
> 
> 赞同：-5
> 
> 时间：2013-03-09T05:28:23.130
> 
> 标签：php, twitter

我想将 twitter 登录代码集成到我的网站。我已经在 twitter 中创建了应用程序，并且我有 Consumer key，Consumer secret。但我没有得到集成它的代码。集成必须在 PHP 中。

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2013-03-09T05:43:07.293

这是你的答案...

[http://dev.twitter.com/pages/sign_in_with_twitter](http://dev.twitter.com/pages/sign_in_with_twitter)

你必须实施它。

# asp.net-mvc - 为什么首页不显示？

> ID：15307546
> 
> 赞同：0
> 
> 时间：2013-03-09T05:28:57.827
> 
> 标签：asp.net-mvc, iis, web-config

我正在做一个项目，那里有一些控制器。其中两个被命名为“类”和“主”控制器，类控制器有一个名为“索引”的视图，主控制器有一个名为“索引”的视图。但是，当我首先在本地运行项目时，会显示我的类/索引，如果我想查看主页，我应该在地址栏中写下 Home/Index。但它应该在运行时首先显示 Home/Index。什么是问题？！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-09T05:38:38.293

在您的 RouteConfig.cs(App_Start) 中应该是这样的，

```
 public static void RegisterRoutes(RouteCollection routes)
    {
        routes.IgnoreRoute("{resource}.axd/{*pathInfo}");

        routes.MapRoute(
            name: "Default",
            url: "{controller}/{action}/{id}",
            defaults: new { controller = "Home", action = "Index", id = UrlParameter.Optional }
        );
    } 
```

***注意：不要使用`Class`自定义代码的名称。它已经由系统定义。***

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-09T05:46:43.693

哪个控制器被定义为在您的主根 url 上运行，这完全取决于您的路由设置。

请分享您的 Global.asax 文件的内容，以获得有关您的问题的更多帮助。

# c++ - Pthread 和键盘

> ID：15307549
> 
> 赞同：-1
> 
> 时间：2013-03-09T05:29:07.743
> 
> 标签：c++, keyboard, pthreads

我想知道每次按下某个键时如何让线程休眠一段时间。例如，如果我按同一个键两次，它应该有两个线程休眠一段时间。

我*必须*使用**pthreads**和**C++**。

老实说，我尝试了很多方法，但我仍然不知道如何解决它。

对不起，如果我的英语不是很好:)

**更新**

这是我的代码：

```
#include <pthread.h>
#include <iostream>
#include <unistd.h>

using namespace std;
pthread_mutex_t mutex;
pthread_cond_t cond;
int a;
void* executer2(void*)
{
    pthread_mutex_lock(&mutex);
    while (a > 0) {
        pthread_cond_wait(&cond, &mutex);
    }
    cout << "Thread: " << pthread_self() << endl;
    sleep(a);
    pthread_mutex_unlock(&mutex);
}

void* executer(void*)
{
    int key;
    while (1) {
        pthread_mutex_lock(&mutex);
        key = cin.get();

        if (key == 'a') {
            cout << "Sleep for 4 seconds" << endl;
            a = 4;
        } else if (key == 'b') {

            cout << "Sleep for 8 seconds" << endl;
            a = 8;
        } else {

            cout << "Sleep for 2 seconds" << endl;
            a = 2;
        }

        pthread_cond_signal(&cond);

        pthread_mutex_unlock(&mutex);

        sleep(1);
    }
}

int main()
{
    pthread_t tr, t;
    pthread_attr_t attr;
    pthread_mutex_init(&mutex, NULL);
    pthread_cond_init(&cond, NULL);

    pthread_attr_init(&attr);
    pthread_attr_setdetachstate(&attr, PTHREAD_CREATE_JOINABLE);
    pthread_create(&tr, &attr, executer, NULL);
    pthread_create(&t, &attr, executer2, NULL);
    pthread_join(tr, NULL);
    pthread_join(t, NULL);

} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-09T14:39:08.390

1.  由于您想在每次按键时创建一个线程，并且按键处理程序位于 中`executer`，因此您应该将代码移动到`executer2`在`executer`.

2.  `executer``sleep`1秒。阅读按键后，但这似乎不是您想要的。只需删除该呼叫即可`sleep(1)`获得立即响应

3.  的代码`executer`似乎表明您希望根据输入键调整线程睡眠所花费的时间。您可以将睡眠时间作为参数传递给`executer2`，如`void *`该函数的参数所示。想法是将时间值转换为 a `void *`，在线程创建时将其传递，然后将其转换回 int 内`executer2`：

    ```
    // executer2 thread creation 
    pthread_create(&t, &attr, executer2,(void *)a); 
    ```

    并在`executer2`：

    ```
    void *executer2(void *arg){
        int a = (int)arg;
        // ... 
    ```

    线程创建代码应该在 switch in 之后进行`executer2`，并且您不再需要全局`a`变量。

4.  您当前正在使用互斥锁来锁定`executer2`. 这将防止所有休眠线程同时休眠。您必须移除锁以允许它们同时休眠（但将锁留在文本输出周围）。

5.  你说你想要一个 C++ 解决方案。您可以从使用 stl 中的线程库中受益，它使用更高级别的构造包装了 OS 线程原语（在您的情况下为 pthread），并且更易于操作，尤其是对于参数。一旦当前代码正常工作，将程序转换为使用此库将是一个很好的练习。

# node.js - 使用护照和骨干网进行身份验证后如何向模型发送响应

> ID：15307550
> 
> 赞同：0
> 
> 时间：2013-03-09T05:29:08.347
> 
> 标签：node.js, backbone.js, passport.js

为了进行身份验证，我从主干.js 向服务器发送了 post 请求，如下所示：

```
model.save({"email":"sil@gmail.com","password":"silvester"}, {
   successs:function(model,res){

   },
   error:function(){

   }
}); 
```

我在服务器端收到这样的：

```
app.post('/login', passport.authenticate('local', {
    successRedirect: '/mainpage',
    failureRedirect: '/login'
})); 
```

在上面的编码中，如果身份验证成功，我将重定向到主页，然后我尝试显示另一个 html 页面，如下所示：

```
app.get('/mainpage',function(req,res) {
    console.log("mainpage");
    res.sendfile('/mainpage.html');
}); 
```

重定向该主页后，我得到了控制台结果，但我无法重定向到另一个网页。如何解决它，然后无论如何只为该发布请求发送响应（上述发布请求）。如果我发送对该发布请求的响应，我可以在成功函数中轻松接收该响应，然后我可以继续我的工作，但是在护照中只有重定向选项，所以它会去另一个获取请求，我如何向前端发送响应？我在哪里可以收到？那么如何在没有重定向的情况下发送响应以及如何解决这个问题？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-09T07:16:05.717

`model.save`将向您的服务器发出 ajax 请求。

我认为当你这样做时`res.sendfile('/mainpage.html');`，它会在 ajax 响应中返回 html 页面。您可以在浏览器中查看开发者控制台吗？

您应该检查请求是否为 ajax，然后返回`401`http 状态代码并使用在客户端进行重定向`window.location="/mainpage.html"`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-06-24T10:28:00.993

它可以帮助您回复相同的帖子请求

> app.post('/login', passport.authenticate('local', { failureRedirect: '/login' }), function(req, res) { res.redirect('/mainpage'); });

# python - 如何在不搜索 Google 或 Stackoverflow 的情况下学习 Matplotlib？

> ID：15307553
> 
> 赞同：0
> 
> 时间：2013-03-09T05:29:45.990
> 
> 标签：python, graphics, matplotlib, plot

我对 Matplotlib 并不陌生。尽管我不是每天（或每周，甚至每月）都使用它，但我已经用它制作了很多数字。所以我往往会忘记一些基本的东西，例如，如何添加图例，如何添加颜色条，如何自定义颜色图，如何更改图形特定部分的字体，如何制作一些透明效果等等当然，每次我有问题时，我总是可以google它，谷歌很可能会带我去stackoverflow或其他一些类似的网站，或者一些博客文章，我几乎总能得到解决方案。这给我的印象是“官方”文档并没有应有的用处。

但是我肯定是错的，即官方文档一定很有用，否则那些回答问题的人怎么知道解决方案？也许他们是“内部人员”（Matplotlib 的开发者）？

**所以我的问题是**，如果您不是开发人员（但如果您是开发人员，欢迎您回答这个问题），并且假设您在这里回答了许多与 Matplotlib 相关的问题，您如何在不问 Google 的情况下自己学习这些技术？如果您没有立即想到答案（不是谷歌，因为是您在回答这个问题，而在此之前，答案可能在谷歌中还不存在），您在哪里以及如何寻找？

请注意，我*并不是*在抱怨文档。我想我只是还没有找到一种有效的方法来利用它。

或者，由于 Matplotlib 的内在复杂性，找到特定请求的解决方案不可避免地并不简单？通过内在的复杂性，我的意思是在 Matplotlib 中，类似的事情通常可以通过许多不同的方式来完成，因此，如果一个人在一开始碰巧选择了一种特定的（并且由于某种原因不常见）方式，然后遇到了一个问题，这个问题的解决方案问题可能没有在手册中明确列出，也许只有那些知道 Matplotlib 真正如何在幕后工作的大师才能提出解决方案。

> 授人以渔比授人以渔更有帮助。

注意：我今天遇到的具体问题是为图形添加颜色条。在我的例子中，有点“特殊”的地方是主图像是一组多边形，每个多边形的颜色都是单独设置的。所以简单的颜色条功能似乎不起作用，至少不像“matplotlib 颜色条示例”的第一个谷歌结果中所呈现的那样。在这种特定情况下，第二个谷歌结果确实解决了这个问题，但这只是在对第一个谷歌结果进行多次试验后才发现的（并且在用其他关键字搜索后），这有点令人沮丧......顺便说一句，我用

```
fig = plt.figure(figsize=(10,10))
ax = fig.add_subplot(111, ...) 
```

设置轴框（这是必要的，因为我的多边形必须添加到预先存在的轴框架中），所以我必须使用

```
ax.xaxis.label.set_fontsize(20) 
```

更改 xaxis 标签的字体大小，这是在经过相当多的谷歌搜索后才发现的。我自己怎么知道 ax 有一个属性*xaxis*，*xaxis*有一个属性*label*，*label*有一个函数*set_fontsize*，当它们的名字不像这里那么明显时它们的含义？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-09T08:25:03.697

使用 python 命令行，我通常会尝试使用 Python 来阅读 matplotlib 本身。

假设您的示例：

```
fig = plt.figure(figsize=(10,10))
ax = fig.add_subplot(111, ...) 
```

**问题**：

> 怎么自己知道ax有属性xaxis，xaxis有属性label，label有函数set_fontsize

**答案**：

查找`dir`：

```
for item in dir(ax):
    print item
#or in case i guess there should be a setter for sth. i search:
for item in dir(ax):
    if item.startswith("set_"):
        print item
#or if i search sth. about labels:
for item in dir(ax):
    if "label" in item:
        print item 
```

**问题**：

> 以及当他们的名字不像这里那么明显时他们的含义

**答案**：

当我发现某事。承诺我读了`docstring`：

```
print ax.xaxis.label.set_size.__doc__ 
```

matplotlib 中的文档字符串通常非常有用，足以解释 setter 和 getter 方法。

如果这没有帮助，我会在文档中查找要搜索的类：

```
>>>type(ax.xaxis.label)
<class 'matplotlib.text.Text'> 
```

什么——在这个例子中——会把我带到[这里](http://matplotlib.org/api/artist_api.html#matplotlib.text.Text)

# git - 试图推送到github得到错误坏文件号

> ID：15307556
> 
> 赞同：0
> 
> 时间：2013-03-09T05:30:17.117
> 
> 标签：git, github-for-windows

```
ssh: connect to host guthub.com port 22: Bad file number
fatal: The remote end hung up unexpectedly 
```

我想将我的代码推送到 github.com 上的存储库 pySan

```
drwxr-xr-x   13 san      Administ     4096 Mar  9 10:58 .git
-rw-r--r--    1 san      Administ     4096 Mar  9 10:53 .swp
-rw-r--r--    1 san      Administ        0 Mar  8 21:27 __init__.py
-rwxr-xr-x    1 san      Administ     1143 Mar  8 20:19 show.py 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-09T05:49:51.027

看起来您的遥控器设置为 guthub.com 时有错字。尝试再次设置它以使用 github.com——它会是这样的：

```
git remote set-url pySan https://github.com/<username here>/pySan.git 
```

# android - ImageView 不可见且运动事件无法正常工作

> ID：15307560
> 
> 赞同：0
> 
> 时间：2013-03-09T05:30:38.573
> 
> 标签：android, overlay, android-imageview, image-resizing, motionevent

我正在编写具有图像叠加层的服务类 imageView 叠加层是可见的，但是在我添加 imageview 调整大小代码后它不可见。此外，调整大小的 imageview 的 MotionEvent 效果不佳 为什么 imageview 覆盖不可见且 MotionEvent 效果不佳？你能帮我解决这个问题吗？

这是我的代码

此代码显示未调整大小的 ImageView 叠加层，它是可见的并且 MotionEvent 运行良好

```
package kr.hybdms.sidepanel;

import android.app.Notification;
import android.app.NotificationManager;
import android.app.PendingIntent;
import android.app.Service;
import android.content.Context;
import android.content.ContextWrapper;
import android.content.Intent;
import android.net.Uri;
import android.os.IBinder;
import android.util.Log;
import android.view.Gravity;
import android.view.MotionEvent;
import android.view.View;
import android.view.View.OnTouchListener;
import android.view.WindowManager;
import android.widget.ImageView;
import android.graphics.PixelFormat;

public class TouchDetectService extends Service {
    private ImageView mTouchDetector;                           
    private WindowManager.LayoutParams mParams;     
    private WindowManager mWindowManager;   

    private static final int MY_NOTIFICATION_ID=1;
    private NotificationManager notificationManager;
    private Notification myNotification;
    final static String ACTION = "NotifyServiceAction";
    final static String STOP_SERVICE = "";
    final static int RQS_STOP_SERVICE = 1;

    private OnTouchListener mViewTouchListener = new OnTouchListener() {
        @Override public boolean onTouch(View v, MotionEvent event) {
            switch(event.getAction()) {

                case MotionEvent.ACTION_MOVE:
                    Intent lsp = new Intent(getBaseContext(), SidePanel.class);
                    lsp.addFlags(Intent.FLAG_ACTIVITY_NEW_TASK);
                    getApplication().startActivity(lsp);
                    break;
            }
            return true;
        }
    };
    @Override
    public IBinder onBind(Intent arg0) { return null; }
    @Override
    public void onCreate() {
        super.onCreate();     
        boolean rightpanel = getSharedPreferences(getPackageName() + "_preferences", Context.MODE_PRIVATE).getBoolean("panelpos_right", true);
        boolean notificationison = getSharedPreferences(getPackageName() + "_preferences", Context.MODE_PRIVATE).getBoolean("noti_toggle", true);
        Log.i("BOOTSVC", "Service started at the BOOT_COMPLETED.");
        if(rightpanel)
        {
        mTouchDetector = new ImageView(this);
        mTouchDetector.setImageResource(R.drawable.detector);
        mTouchDetector.setOnTouchListener(mViewTouchListener); 
        mParams = new WindowManager.LayoutParams(
            WindowManager.LayoutParams.WRAP_CONTENT,
            WindowManager.LayoutParams.WRAP_CONTENT,
            WindowManager.LayoutParams.TYPE_PHONE,
            WindowManager.LayoutParams.FLAG_NOT_FOCUSABLE,  
            PixelFormat.TRANSLUCENT);                             
        mParams.gravity = Gravity.RIGHT | Gravity.CENTER;             
        mWindowManager = (WindowManager) getSystemService(WINDOW_SERVICE); 
        mWindowManager.addView(mTouchDetector, mParams);    
        }
        else
        {
            mTouchDetector = new ImageView(this);                                         
            mTouchDetector.setImageResource(R.drawable.detector);
            mTouchDetector.setOnTouchListener(mViewTouchListener);            
            mParams = new WindowManager.LayoutParams(
                WindowManager.LayoutParams.WRAP_CONTENT,
                WindowManager.LayoutParams.WRAP_CONTENT,
                WindowManager.LayoutParams.TYPE_PHONE,
                WindowManager.LayoutParams.FLAG_NOT_FOCUSABLE,  
                PixelFormat.TRANSLUCENT);                                      
            mParams.gravity = Gravity.LEFT | Gravity.CENTER;        
            mWindowManager = (WindowManager) getSystemService(WINDOW_SERVICE);  
            mWindowManager.addView(mTouchDetector, mParams);      
        }

        if(notificationison){
        notificationManager =
         (NotificationManager)getSystemService(Context.NOTIFICATION_SERVICE);
        myNotification = new Notification(R.drawable.ic_stat_sidepanel,
                getText(R.string.service_notification),
          System.currentTimeMillis());
        Context context = getApplicationContext();
        CharSequence notificationTitle = getText(R.string.service_running);
        CharSequence notificationText = getText(R.string.service_running_desc);
        Intent myIntent = new Intent(getBaseContext(), Settings.class);;
        PendingIntent pendingIntent
          = PendingIntent.getActivity(getBaseContext(),
            0, myIntent,
            Intent.FLAG_ACTIVITY_NEW_TASK);
        myNotification.defaults |= Notification.DEFAULT_SOUND;
        myNotification.flags |= Notification.FLAG_AUTO_CANCEL;
        myNotification.flags = Notification.FLAG_ONGOING_EVENT;
        myNotification.setLatestEventInfo(context,
           notificationTitle,
           notificationText,
           pendingIntent);
        notificationManager.notify(MY_NOTIFICATION_ID, myNotification);
        }
        else
        {
        }
        }
    @Override
    public void onDestroy() {
        if(mWindowManager != null) {      
            if(mTouchDetector != null) mWindowManager.removeView(mTouchDetector);
        }
        super.onDestroy();
        notificationManager.cancel(MY_NOTIFICATION_ID);
    }
} 
```

此代码显示已调整大小的 ImageView 叠加层，它不可见且 MotionEvent 无法正常工作 imageview 是按首选项值调整大小

```
package kr.hybdms.sidepanel;

import android.app.Notification;
import android.app.NotificationManager;
import android.app.PendingIntent;
import android.app.Service;
import android.content.Context;
import android.content.Intent;
import android.content.SharedPreferences;
import android.os.IBinder;
import android.os.Vibrator;
import android.preference.PreferenceManager;
import android.util.Log;
import android.view.Gravity;
import android.view.MotionEvent;
import android.view.View;
import android.view.View.OnTouchListener;
import android.view.WindowManager;
import android.widget.ImageView;
import android.graphics.PixelFormat;

public class TouchDetectService extends Service {
    private ImageView mTouchDetector;                           
    private WindowManager.LayoutParams mParams;     
    private WindowManager mWindowManager;   
    private static final int MY_NOTIFICATION_ID=1;
    private NotificationManager notificationManager;
    private Notification myNotification;
    final static String ACTION = "NotifyServiceAction";
    final static String STOP_SERVICE = "";
    final static int RQS_STOP_SERVICE = 1;

    private OnTouchListener mViewTouchListener = new OnTouchListener() {
        @Override public boolean onTouch(View v, MotionEvent event) {
            switch(event.getAction()) {
                case MotionEvent.ACTION_MOVE:
                    boolean vibeon = getSharedPreferences(getPackageName() + "_preferences", Context.MODE_PRIVATE).getBoolean("vibe_toggle", true);
                    if(vibeon){ 
                    Vibrator vibe = (Vibrator) getSystemService(Context.VIBRATOR_SERVICE);
                    vibe.vibrate(10);} 
                    else{}
                    Intent lsp = new Intent(getBaseContext(), SidePanel.class);
                    lsp.addFlags(Intent.FLAG_ACTIVITY_NEW_TASK);
                    getApplication().startActivity(lsp);
                    break;
            }
            return true;
        }
    };

    @Override
    public IBinder onBind(Intent arg0) { return null; }
    @Override
    public void onCreate() {
        super.onCreate();
        boolean rightpanel = getSharedPreferences(getPackageName() + "_preferences", Context.MODE_PRIVATE).getBoolean("panelpos_right", true);
        boolean notificationison = getSharedPreferences(getPackageName() + "_preferences", Context.MODE_PRIVATE).getBoolean("noti_toggle", true);
        Log.i("BOOTSVC", "Service started at the BOOT_COMPLETED.");
            SharedPreferences myPreference = PreferenceManager.getDefaultSharedPreferences(this);
          String dw = myPreference.getString("detector_width", "");
          String dh = myPreference.getString("detector_height", "");
        mTouchDetector = new ImageView(this);                                       
        mTouchDetector.setImageResource(R.drawable.detector);
        mTouchDetector.setOnTouchListener(mViewTouchListener);              
        WindowManager.LayoutParams params = new WindowManager.LayoutParams();

        if(dw.equals("025")){
            params.height = (int) (mTouchDetector.getDrawable().getIntrinsicWidth()*0.25);
        }
        else if(dw.equals("050")){
            params.height = (int) (mTouchDetector.getDrawable().getIntrinsicWidth()*0.5);
        }
        else if(dw.equals("075")){
            params.height = (int) (mTouchDetector.getDrawable().getIntrinsicWidth()*0.75);
        }
        else if(dw.equals("100")){
            params.height = mTouchDetector.getDrawable().getIntrinsicWidth();
        }
        else if(dw.equals("200")){
            params.height = mTouchDetector.getDrawable().getIntrinsicWidth()*2;
        }
        else if(dw.equals("300")){
            params.height = mTouchDetector.getDrawable().getIntrinsicWidth()*3;
        }
        else if(dw.equals("400")){
            params.height = mTouchDetector.getDrawable().getIntrinsicWidth()*4;
        }

        if (dh.equals("025")){
            params.width = (int) (mTouchDetector.getDrawable().getIntrinsicHeight()*0.25);
            }
        else if (dh.equals("050")){
            params.width = (int) (mTouchDetector.getDrawable().getIntrinsicHeight()*0.5);
            }
        else if (dh.equals("075")){
            params.width = (int) (mTouchDetector.getDrawable().getIntrinsicHeight()*0.75);
            }
        else if (dh.equals("100")){
            params.width = mTouchDetector.getDrawable().getIntrinsicHeight();
            }
        else if (dh.equals("200")){
            params.width = mTouchDetector.getDrawable().getIntrinsicHeight()*2;
            }
        else if (dh.equals("300")){
            params.width = mTouchDetector.getDrawable().getIntrinsicHeight()*3;
            }
        else if (dh.equals("400")){
            params.width = mTouchDetector.getDrawable().getIntrinsicHeight()*4;
            }
        params.flags = WindowManager.LayoutParams.FLAG_NOT_FOCUSABLE;
        params.format = PixelFormat.TRANSLUCENT;
        params.type = WindowManager.LayoutParams.TYPE_PHONE;

        if(rightpanel)
        {
        params.gravity = Gravity.RIGHT & Gravity.CENTER;   
        }
        else
        {
            params.gravity = Gravity.LEFT & Gravity.CENTER;   
        }
        mWindowManager = (WindowManager) getSystemService(WINDOW_SERVICE);
        mWindowManager.addView(mTouchDetector, params);
        if(notificationison){
        notificationManager =
         (NotificationManager)getSystemService(Context.NOTIFICATION_SERVICE);
        myNotification = new Notification(R.drawable.ic_stat_sidepanel,
                getText(R.string.service_notification),
          System.currentTimeMillis());
        Context context = getApplicationContext();
        CharSequence notificationTitle = getText(R.string.service_running);
        CharSequence notificationText = getText(R.string.service_running_desc);
        Intent myIntent = new Intent(getBaseContext(), Settings.class);;
        PendingIntent pendingIntent
          = PendingIntent.getActivity(getBaseContext(),
            0, myIntent,
            Intent.FLAG_ACTIVITY_NEW_TASK);
        myNotification.defaults |= Notification.DEFAULT_SOUND;
        myNotification.flags |= Notification.FLAG_AUTO_CANCEL;
        myNotification.flags = Notification.FLAG_ONGOING_EVENT;
        myNotification.setLatestEventInfo(context,
           notificationTitle,
           notificationText,
           pendingIntent);
        notificationManager.notify(MY_NOTIFICATION_ID, myNotification);
        }
        else
        {
        }
        }
    @Override
    public void onDestroy() {
        if(mWindowManager != null) {       
            if(mTouchDetector != null) mWindowManager.removeView(mTouchDetector);
        }
        super.onDestroy();
        notificationManager.cancel(MY_NOTIFICATION_ID);
    }
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-01-20T15:42:43.993

您抱怨的代码没有将 ImageView - **mTouchDetector** - 添加到您的布局中。如果您使用的是纯 Java 而不是 XML，则必须添加它才能使其可见。看看你的第一个例子（工作的那个）：

```
mWindowManager.addView(mTouchDetector, mParams); 
```

这就是这里的想法。

# c# - HttpWebRequest 让我随机超时

> ID：15307563
> 
> 赞同：0
> 
> 时间：2013-03-09T05:30:58.693
> 
> 标签：c#, .net, httpwebrequest

我的应用程序整晚都在运行，并且在随机时间它会断开连接，另一方面，在某些晚上它不会。

这是 Visual Studio 中的例外，它卡在这里。 ![在此处输入图像描述](../Images/38a8935ac6da47f4a7372e966bde105e.png)

这是它提供的关于我的信息`WebRequest`。 ![在此处输入图像描述](../Images/c8237944a738fdc0681ce43d9ec89288.png) 这是它提供的有关响应异常的信息。 ![在此处输入图像描述](../Images/1d938a8b77d78fb287259ef4260cec5e.png)

我在想的是，这不是我的错误，有时服务器真的没有回答我，它给了我这个例外。如果您同意，最好如何处理这种异常。我应该把我的 3 个`using`语句包装成 try catch 吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-09T05:37:59.890

是的，try-catch 是用于不可靠的 Web 服务的方法（并且可能是一个循环重试有限次数）。

请注意，您可以`using`以这种方式堆叠语句以避免所有缩进：

```
using (...)
using (...)
using (...) {
    // Do stuff...
} 
```

# c# - 骰子 c# 控制台的频率表

> ID：15307568
> 
> 赞同：0
> 
> 时间：2013-03-09T05:31:31.357
> 
> 标签：c#, random

您好，我正在尝试为掷骰子游戏创建频率表。以下是我正在从事的项目的说明：

创建一个模拟滚动标准 6 面模具（编号 1 – 6）的应用程序。

*   模具应精确滚动 10,000 次。
*   10,000卷应该是用户输入的；问他们想多久掷一次骰子
*   掷骰子的值应使用随机值确定，基于 Random 类对象的输出（参见下面的注释）。
*   在程序完成用户请求的滚动次数（10,000）后，应用程序应显示一个表格，显示每个骰子的滚动次数。
*   程序应该询问用户是否想模拟另一个掷骰子的过程。跟踪会话数。

现在我知道如何使用随机数类，但我被困在项目的摘要表部分，我只需要一些可以帮助我开始的东西

这是我目前在项目中的位置，你会看到我的汇总表没有意义：

```
using System;
using System.Collections.Generic;
using System.Linq;
using System.Text;
using System.Threading.Tasks;
using System.Data;

namespace Dice
{
    class Program
    {
        static void Main(string[] args)
        {
            Random rndGen = new Random();

            Console.WriteLine("welcome to the ralph dice game");
            Console.Clear();

            Console.WriteLine("how many times do you want to roll");
            int rollDice = int.Parse(Console.ReadLine());

            for (int i = 0; i < rollDice; i++)
            {
                int diceRoll = 0;

                diceRoll = rndGen.Next(1,7);

                string table = " \tfrequency\tpercent";
                table +="\n"+ "\t" + i + "\t" + diceRoll;

                Console.WriteLine(table);

            }//end for

            Console.ReadKey();

        }

    }
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-09T05:41:39.320

> 出示一张表格，显示每个骰子的掷骰次数。

如果我理解正确，这意味着骰子得到 1、2、3 等的次数......您需要一个数组来存储所有结果计数，并在所有掷骰完成后输出。

*注意：未经测试的代码。*

```
int[] outcomes = new int[6];

// init
for (int i = 0; i < outcomes.Length; ++i) {
    outcomes[i] = 0;
}

for (int i = 0; i < rollDice; i++)
{
    int diceRoll = 0;

    diceRoll = rndGen.Next(1,7);

    outcomes[diceRoll - 1]++; //increment frequency. 
    // Note that as arrays are zero-based, the " - 1" part turns the output range 
    // from 1-6 to 0-5, fitting into the array.

}//end for

// print the outcome values, as a table 
```

> 跟踪会话数。

只需使用另一个变量，但您的代码显然似乎没有实现这部分。一个简单的方法是使用 do-while 循环：

```
do {

    // your code

    // ask if user wish to continue

    bool answer = // if user want to continue

} while (!answer); 
```

# mysql - 尝试移动`/var/lib/mysql`后访问Mysql失败

> ID：15307569
> 
> 赞同：3
> 
> 时间：2013-03-09T05:31:36.637
> 
> 标签：mysql, linux, ubuntu

起初，我试图将我的数据库移动到一个新目录`/media/external_drive`。

我按照网上的一些说明进行操作，例如：

[http://article.my-addr.com/?show=linux_ubuntu_change_datadir-move_mysql_database_to_other_path](http://article.my-addr.com/?show=linux_ubuntu_change_datadir-move_mysql_database_to_other_path)

之后，似乎我可以通过`sudo service mysql restart`.

但是，当我尝试时`mysql -u root -p`，我总是收到以下错误：

`ERROR 2002 (HY000): Can't connect to local MySQL server through socket '/var/run/mysqld/mysqld.sock' (2)`

然后我搜索`sudo find / -name mysqld.sock`了，没有结果。

我还尝试将数据库文件 ( `mysql`) 移回`/var/lib/mysql`，并取消了所有用于移动数据库的操作。仍然出现上述错误。

我完全迷路了。请帮忙！

下面是电流`my.cnf`。我改成`datadir`了`/media/external_drive`，后来又改回来了。

```
 42 user        = mysql
 43 socket      = /var/run/mysqld/mysqld.sock
 44 port        = 3306
 45 basedir     = /usr
 46 datadir     = /var/lib/mysql
 47 tmpdir      = /tmp
 48 skip-external-locking 
```

关于权限：

```
sudo ls -la /var/lib/mysql
total 1740832
drwx------  6 root   root         4096 2013-03-09 00:19 .
drwxr-xr-x 66 root   root         4096 2013-03-06 21:18 ..
drwx------  2 zhijia zhijia       4096 2013-03-06 16:58 AppSeq
drwx------  2 zhijia zhijia       4096 2013-03-06 17:32 AppSeq1
-rwxrwxrwx  1 zhijia zhijia          0 2013-01-24 15:47 debian-5.1.flag
-rwxrwxrwx  1 zhijia zhijia 1772093440 2013-03-06 19:43 ibdata1
-rwxrwxrwx  1 zhijia zhijia    5242880 2013-03-09 00:13 ib_logfile0
-rwxrwxrwx  1 zhijia zhijia    5242880 2013-03-06 19:35 ib_logfile1
drwx------  2 zhijia zhijia       4096 2013-01-24 15:48 mysql
-rwxrwxrwx  1 zhijia zhijia          6 2013-01-24 15:48 mysql_upgrade_info
drwx------  2 zhijia zhijia       4096 2013-01-24 15:54 phpmyadmin 
```

关于磁盘已满：

```
df
Filesystem           1K-blocks      Used Available Use% Mounted on
/dev/sda1              9833300   7694164   1639632  83% /
none                    379568       296    379272   1% /dev
none                    383792       400    383392   1% /dev/shm
none                    383792        84    383708   1% /var/run
none                    383792         0    383792   0% /var/lock
none                    383792         0    383792   0% /lib/init/rw
none                   9833300   7694164   1639632  83% /var/lib/ureadahead/debugfs
/dev/sdb1            2930263036   1899200 2928363836   1% /media/external_drive 
```

关于`ps -ef | grep mysql`

```
zhijia    7329  1756  0 01:00 pts/0    00:00:00 grep --color=auto mysql 
```

关于'sudo mysqld_safe --user=mysql`

```
130309 01:03:47 mysqld_safe Logging to syslog.
130309 01:03:47 mysqld_safe Starting mysqld daemon with databases from /var/lib/mysql
130309 01:03:47 mysqld_safe mysqld from pid file /var/lib/mysql/ubuntu.pid ended 
```

关于`error.log`，以下错误重复多次。

```
^G/usr/sbin/mysqld: Can't find file: './mysql/plugin.frm' (errno: 13)
130309  0:00:13 [ERROR] Can't open the mysql.plugin table. Please run mysql_upgrade to     create it.
130309  0:00:13  InnoDB: Initializing buffer pool, size = 8.0M 
130309  0:00:13  InnoDB: Completed initialization of buffer pool 
130309  0:00:13  InnoDB: Operating system error number 13 in a file operation.
InnoDB: The error means mysqld does not have the access rights to
InnoDB: the directory.
InnoDB: File name ./ibdata1
InnoDB: File operation call: 'create'.
InnoDB: Cannot continue operation.
130309  0:00:43 [Note] Plugin 'FEDERATED' is disabled.
.... 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-09T05:45:01.800

这可能是由许多不同的原因造成的。您的 MySQL 服务器实际上无法运行，您可能磁盘空间不足，这可能是权限问题（我很可能认为）。查看此线程以获得一系列可能的修复：[http](http://ubuntuforums.org/showthread.php?t=804021) ://ubuntuforums.org/showthread.php?t=804021 。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-09T05:52:23.993

1.  检查您的`mysql`服务器是否已经在运行

    ```
    ps -ef | grep mysql 
    ```

2.  如果是，请使用以下命令。如果没有跳到下一步。

    ```
    mysqladmin [-u ... -p...] shutdown 
    ```

    其中，`-u`指定用户名并`-p`指定用户密码。

3.  使用默认用户名/root 用户（对于 mysql）以安全模式启动 mysql 以重新创建/恢复`mysql.sock`文件。

    ```
    mysqld_safe --user=mysql & 
    ```

* * *

此外，为用户及其子女提供`rwx`权限。`mysql``/var/lib/mysql`

* * *

## 编辑

通常，`mysql.sock`位于`/var/lib/mysql/mysql.sock`它不在的位置。:(

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-09T05:54:02.260

好像您的磁盘已满。尝试[清理](http://www.linuxquestions.org/questions/linux-server-73/cant-connect-to-local-mysql-server-through-socket-var-run-mysqld-mysqld-sock-753632/#post_message_4467439)，使用下面的代码：

```
sudo apt-get autoremove 
```

# .htaccess - Codeigniter - 使用 .htaccess 隐藏 index.php

> ID：15307574
> 
> 赞同：0
> 
> 时间：2013-03-09T05:32:27.167
> 
> 标签：.htaccess, codeigniter

我的网站：

> [http://ibnight.com](http://ibnight.com)

尝试通过以下方式访问我网站中的活动时：

> [http://ibnight.com/1](http://ibnight.com/1)

我收到一个未找到的错误：

> 在此服务器上找不到请求的 URL /1。

仅当我使用 url 中的 index.php 访问它时才有效，例如：

> [http://ibnight.com/index.php/1](http://ibnight.com/index.php/1)

我的控制器是这样的：

```
class Events extends CI_Controller {

    public function __construct()
    {}

    public function index()
    {}

    public function event()
    {}

} 
```

我的路由：

```
$route['default_controller'] = 'events';
$route['(:num)'] = $route['default_controller'] . '/event/$1'; 
```

我的配置：

```
$config['index_page'] = ''; 
```

我的.htaccess：

```
RewriteEngine On
RewriteCond %{REQUEST_FILENAME} !-f
RewriteCond %{REQUEST_FILENAME} !-d
RewriteRule ^(.*)$ index.php/$1 [L] 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-09T06:23:19.903

```
RewriteEngine on
RewriteCond $1 !^(index\.php|images|robots\.txt)
RewriteRule ^(.*)$ /index.php/$1 [L] 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-09T05:37:40.493

尝试这个 ：

```
RewriteRule ^(.*)$ index.php?url=$1 [QSA,L] 
```

# android - 从哪里开始将 PS3 控制器连接到 Android 应用程序

> ID：15307575
> 
> 赞同：1
> 
> 时间：2013-03-09T05:32:28.180
> 
> 标签：android, bluetooth, ps3

所以我真的没有在网上看到任何关于我将如何开始解决这个问题的信息，但我知道这是可能的，所以我想我会在这里问:)

我目前正在阅读 Android 书籍中的蓝牙启用和套接字，我想尝试一个简单的项目，我将 PS3 控制器同步到我的应用程序，以便我可以读取信号并显示一些值以便弄清楚哪些代码对应于哪些按钮/操纵杆运动。问题是，在我启用蓝牙并将应用程序设置为发现其他设备后，我的控制器在开启时没有被拾取。到目前为止，我所拥有的所有代码都来自 Wrox 发布的 Professional Android 4.0 Development，因此可以在第 16 章下找到源代码。我只是想知道 PS3 控制器的工作方式是否有一些我遗漏的东西会导致它是不可发现的，或者如果我需要做一些特别的事情来拾取我没有捕捉到的设备。谢谢！

```
private void startDiscovery() {
  registerReceiver(discoveryResult,
                   new IntentFilter(BluetoothDevice.ACTION_FOUND));

  if (bluetooth.isEnabled() && !bluetooth.isDiscovering())
    deviceList.clear();
    bluetooth.startDiscovery();
}

BroadcastReceiver discoveryResult = new BroadcastReceiver() {
  @Override
  public void onReceive(Context context, Intent intent) {
    String remoteDeviceName = 
      intent.getStringExtra(BluetoothDevice.EXTRA_NAME);

    BluetoothDevice remoteDevice =  
      intent.getParcelableExtra(BluetoothDevice.EXTRA_DEVICE);

    deviceList.add(remoteDevice);

    Log.d(TAG, "Discovered " + remoteDeviceName);
  }
}; 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-09T05:49:34.953

我认为playstation控制台和控制器在独特的蓝牙信号上运行，您必须寻找可以集成到 android 中的开源[代码](http://blog.gimx.fr/)正确的代码库

# grails - 如何使 Ember.js 与 Grails 控制器名称一起运行？

> ID：15307576
> 
> 赞同：4
> 
> 时间：2013-03-09T05:32:29.600
> 
> 标签：grails, ember.js, ember-data

Grails 非常强大，可以让您使用单个语句 ( `object as JSON`) 将域对象转换为 JSON。不幸的是，由于某些原因，这不足以与 Ember.js 交互。

如何让 Grails 与 Ember.js 很好地配合使用？

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2013-03-09T05:32:29.600

好问题，自我！

Ember.js 和它的 auto-AJAX-in-browser-data-store ninjitsu 期望 URL 以某种方式呈现，而 JSON 以某种方式呈现。由于每个工具的工作方式，更容易对等式两边*进行一致的更改！*

## Grails 提供什么

`MyCoolDomainClass`对于带有控制器的 Domain 类`MyCoolDomainClassController`，Grails 想要提供 URL `/app/myCoolDomainClass`。如果您将控制器设置为包含以下内容：

```
def index() { render MyCoolDomainClass.list() as JSON } 
```

您将收到如下所示的响应：

`[{ id: 1, name: "Bob"}, {id: 2, name: "Sally"}]`

## Ember 想要什么

在 Ember.js 中，您可以创建具有相同属性的模型。通过利用`ember-data`，您可以轻松地将浏览器中的 Data Store 与您的后端连接起来。不幸的是，Ember.js 想要的是不同的。它期望 url`/my_cool_domain_class`提供数据：

`{ mycooldomainclass: [ { id: 1, name: "Bob"}, {id: 2, name "Sally"}] }`

## 调和

**更新**：我[`ember-data-grails`在 Github 上创建了一个 repo，](https://github.com/jwklomp/ember-data-grails)它会为你处理所有这些修改，并演示如何制作一个很好玩的控制器！

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-05-22T12:26:14.603

我从 emberjs 开始，在 Grails 1.3.7 中工作了两年，所以我会这样做，这样你就可以获得：

```
{ mycooldomainclass: [ { id: 1, name: "Bob"}, {id: 2, name "Sally"}] } 
```

这很简单：

```
def c = Product.createCriteria()
def products = c.list{
    //your criteria
}
res = products.collect {a ->
  return [id:a.id, name:a.name, price:a.price, categoryname: a.category.name]
}

response.setHeader( "Pragma", "no-cache" )
response.setHeader( "Cache-Control", "no-cache" )
response.setDateHeader( "Expires", 0 )
render(contentType: 'text/json') {[
    'mycooldomainclass': res
]} 
```

# api - 使用 Wikipedia API 获取图片 URL，但有些图片不返回 URL，为什么？

> ID：15307579
> 
> 赞同：2
> 
> 时间：2013-03-09T05:32:50.630
> 
> 标签：api, jsonp, mediawiki, wikipedia

例如去[http://en.wikipedia.org/w/api.php?action=query&titles=Image:Nordendorf-brooch.jpg&prop=imageinfo&iiprop=url&meta=siteinfo&siprop=rightsinfo&format=json&callback=?](http://en.wikipedia.org/w/api.php?action=query&titles=Image%3aNordendorf-brooch.jpg&prop=imageinfo&iiprop=url&meta=siteinfo&siprop=rightsinfo&format=json&callback=?) 给我一个 JSON 对象，其中包含一个 url 键（在“imageinfo”内），其值为[http://upload.wikimedia.org//wikipedia//commons//c//cc//Nordendorf-brooch.jpg](http://upload.wikimedia.org//wikipedia//commons//c//cc//Nordendorf-brooch.jpg)

但有些图片不返回 url，例如 Image:Wodan_Heilt_Balders_Pferd_by_Emil_Doepler.jpg。所以如果我去[http://en.wikipedia.org/w/api.php?action=query&titles=Image:Wodan_Heilt_Balders_Pferd_by_Emil_Doepler.jpg&prop=imageinfo&iiprop=url&meta=siteinfo&siprop=rightsinfo&format=json&callback=?](http://en.wikipedia.org/w/api.php?action=query&titles=Image%3aWodan_Heilt_Balders_Pferd_by_Emil_Doepler.jpg&prop=imageinfo&iiprop=url&meta=siteinfo&siprop=rightsinfo&format=json&callback=?) imageinfo 及其 url 键不包含在 json 对象中。

除了 imageinfo 不存在之外，我注意到的一件事是，似乎确实返回 url 的图像在“imagerepository”键中具有值“shared”，而那些不返回 url 的图像具有值“”。

任何想法为什么会这样或 imagerepository 键可能代表什么？

（两张图片均来自[http://en.wikipedia.org/wiki/W%C5%8Dden](http://en.wikipedia.org/wiki/W%C5%8Dden)）

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-09T12:32:12.000

似乎问题`Image:Wodan_Heilt_Balders_Pferd_by_Emil_Doepler.jpg`不在于图像本身，而只是重定向到真实图像页面`Image:Wodan_heilt_Balders_Pferd_by_Emil_Doepler.jpg`（注意小写字母`h`）。

如果我理解正确，如果您添加`&redirects`到查询中，它应该可以工作，但实际上没有。我认为这是一个错误，所以我提交了一个[关于这个的错误报告](https://bugzilla.wikimedia.org/show_bug.cgi?id=45930)。

# perl - FreeBSD 中的 cpan 错误

> ID：15307580
> 
> 赞同：-1
> 
> 时间：2013-03-09T05:32:54.880
> 
> 标签：perl, freebsd

我正在使用 FreeBSD9.1。

有：

```
root@BSD:/root # cpan
Can't load '/usr/local/lib/perl5/site_perl/5.14.2/mach/auto/Socket/Socket.so' for module Socket: /usr/local/lib/perl5/site_perl/5.14.2/mach/auto/Socket/Socket.so: Undefined symbol "PL_unitcheckav" at /usr/local/lib/perl5/5.14.2/XSLoader.pm line 71.
 at /usr/local/lib/perl5/site_perl/5.14.2/mach/Socket.pm line 852
Compilation failed in require at /usr/local/lib/perl5/5.14.2/Net/Ping.pm line 12.
BEGIN failed--compilation aborted at /usr/local/lib/perl5/5.14.2/Net/Ping.pm line 12.
Compilation failed in require at /usr/local/lib/perl5/5.14.2/CPAN/Mirrors.pm line 11.
BEGIN failed--compilation aborted at /usr/local/lib/perl5/5.14.2/CPAN/Mirrors.pm line 11.
Compilation failed in require at /usr/local/lib/perl5/5.14.2/CPAN/FirstTime.pm line 11.
BEGIN failed--compilation aborted at /usr/local/lib/perl5/5.14.2/CPAN/FirstTime.pm line 11.
Compilation failed in require at /usr/local/lib/perl5/5.14.2/CPAN/HandleConfig.pm line 573. 
```

为什么？如何解决？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-09T06:36:51.820

它比编程更多的管理问题。你是从端口升级 Perl 的吗？如果是，您应该运行`perl-after-upgrade`脚本。如果这没有帮助，请检查 Socket.so 的位置：

```
 locate Socket.so 
```

检查 .so 路径中的 Perl 版本。它应该等于`/etc/make.conf`文件中的 Perl 版本。

# javascript - 如何扩大d3形状？

> ID：15307587
> 
> 赞同：0
> 
> 时间：2013-03-09T05:33:34.280
> 
> 标签：javascript, d3.js

假设我有以下内容：

```
var vis = d3.select('svg')
    .attr({width: 400, height: 400});

var arc = d3.svg.arc()
    .innerRadius(50)
    .outerRadius(70)
    .startAngle(45 * (Math.PI/180)) //converting from degs to radians
    .endAngle(3) //just radians

var arc2 = d3.svg.arc()
    .innerRadius(50)
    .outerRadius(30)
    .startAngle(180 * (Math.PI/180)) //converting from degs to radians
    .endAngle(5) //just radians

var position = [200,200]; 
```

如何使鼠标悬停在单个弧上时，它会导致自身和另一个弧同时放大。当我说放大时，我的意思是innerRadius和outerRadius在鼠标悬停时变大，并在鼠标移出时缩小到原始大小。

我试图使单个弧扩展使用：

```
arc.on("mouseover", function() {
   arc.innerRadius(40);
   arc.outerRadius(90);
}); 
```

虽然看起来一点效果都没有。我究竟做错了什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-09T06:51:12.383

首先，您需要将弧线实际附加到 SVG：

```
var arcPath = vis.append("path")
    .attr("d", arc); 
```

这样做，您可以看到 arc 函数只是生成了一个 SVG 路径字符串，您可以将其设置为`d`路径的属性。因此，在鼠标悬停时，您需要更新`d`路径的属性。例如你可以这样做：

```
var arcHover = d3.svg.arc()
    .innerRadius(40)
    .outerRadius(90)
    .startAngle(45 * (Math.PI/180))
    .endAngle(3);

arcPath.on("mouseover", function(e) {
    arcPath.attr("d", arcHover);
}); 
```

这是一个工作示例：http: [//jsfiddle.net/XaszF/](http://jsfiddle.net/XaszF/)

# python - 具有 mpz/mpfr 值的 numpy 数组

> ID：15307589
> 
> 赞同：4
> 
> 时间：2013-03-09T05:34:15.393
> 
> 标签：python, numpy, type-conversion, gmp

我想要一个带有 mpz/mpfr 值的 numpy 数组。因为我的代码：

```
import numpy as np
import gmpy2
A=np.ones((5,5));
print A/gmpy2.mpfr(1); 
```

生成：

```
RuntimeWarning: invalid value encountered in divide
  print A/gmpy2.mpfr(1);
[[1.0 1.0 1.0 1.0 1.0]
 [1.0 1.0 1.0 1.0 1.0]
 [1.0 1.0 1.0 1.0 1.0]
 [1.0 1.0 1.0 1.0 1.0]
 [1.0 1.0 1.0 1.0 1.0]] 
```

据我所知，不可能将 gmpy mpfr 转换为 numpy float64。那么我怎样才能首先获得一个带有 mpfr 值的 numpy 数组呢？

谢谢。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-03-09T05:55:49.203

您需要使用 来创建数组`dtype=object`，然后您可以在数组中使用任何 python 类型。我没有安装 gmpy2，但下面的例子应该显示它是如何工作的：

```
In [3]: a = np.ones((5, 5), dtype=object)

In [5]: import fractions

In [6]: a *= fractions.Fraction(3, 4)

In [7]: a
Out[7]: 
array([[3/4, 3/4, 3/4, 3/4, 3/4],
       [3/4, 3/4, 3/4, 3/4, 3/4],
       [3/4, 3/4, 3/4, 3/4, 3/4],
       [3/4, 3/4, 3/4, 3/4, 3/4],
       [3/4, 3/4, 3/4, 3/4, 3/4]], dtype=object) 
```

拥有一个 numpy 数组`dtype=object`可能会产生误导，因为强大的 numpy 机制使标准 dtypes 的操作变得超级快，现在由默认对象的 python 运算符处理，这意味着速度将不再存在：

```
In [12]: b = np.ones((5, 5)) * 0.75

In [13]: %timeit np.sum(a)
1000 loops, best of 3: 1.25 ms per loop

In [14]: %timeit np.sum(b)
10000 loops, best of 3: 23.9 us per loop 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2015-07-04T00:35:02.323

我相信这是两个库之一中的错误。我也相信它是固定的。

输入：

```
import sys
import numpy as np
import gmpy2

print(sys.version)
print(np.__version__)
print(gmpy2.version)

A=np.ones((5,5));
print(A/gmpy2.mpfr(1)) 
```

输出：

```
3.4.2 (v3.4.2:ab2c023a9432, Oct  6 2014, 22:15:05) [MSC v.1600 32 bit (Intel)]
1.9.1
2.0.5
[[mpfr('1.0') mpfr('1.0') mpfr('1.0') mpfr('1.0') mpfr('1.0')]
 [mpfr('1.0') mpfr('1.0') mpfr('1.0') mpfr('1.0') mpfr('1.0')]
 [mpfr('1.0') mpfr('1.0') mpfr('1.0') mpfr('1.0') mpfr('1.0')]
 [mpfr('1.0') mpfr('1.0') mpfr('1.0') mpfr('1.0') mpfr('1.0')]
 [mpfr('1.0') mpfr('1.0') mpfr('1.0') mpfr('1.0') mpfr('1.0')]] 
```

Numpy 没有正确说明遇到未知类型时该怎么做，或者 gmpy2 没有指定如何除以某物（[`__rdiv__`](https://docs.python.org/2.7/reference/datamodel.html#object.__rdiv__)）。

除非您打算覆盖其元素，否则不必指定`dtype`an 的。`ndarray`像乘法这样的操作会产生一个新`ndarray`的 ，Numpy 会弄清楚`dtype`要使用什么。

# silverlight - silverlight scrollviewer 风格

> ID：15307599
> 
> 赞同：0
> 
> 时间：2013-03-09T05:35:28.713
> 
> 标签：silverlight, blend

我想设置我的滚动查看器的样式，使其看起来像这样

！[](https://i.stack.imgur.com/bvHB5.png)

任何帮助..？我看过很多例子，但没有任何效果。

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-09T09:47:01.957

感谢Kunal ..我得到了解决方案

[http://www.kunal-chowdhury.com/2010/11/customized-scrolling-in-silverlight.html](http://www.kunal-chowdhury.com/2010/11/customized-scrolling-in-silverlight.html)

# highcharts - 单个气泡的 Highcharts 命名

> ID：15307600
> 
> 赞同：5
> 
> 时间：2013-03-09T05:35:41.323
> 
> 标签：highcharts

新的 Highcharts v3.0 气泡图看起来很棒。是否可以用名称/一些文本注释和显示每个气泡？谢谢，奈杰尔。

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2013-09-19T04:30:46.670

您需要做两件事。

首先，命名每个数据点（气泡）：

> ```
> data: [
>   { name: 'Alice', x: 3.5, y: 4, z: 5}, 
>   { name: 'Eve', x: 7, y: 7, z: 3}, 
>   { name: 'Carol', x: 4, y: 8, z: 6}
> ] 
> ```

二、创建数据标签格式化程序：

> ```
> dataLabels: {
>   enabled: true,
>   formatter: function() {
>     return this.point.name;
>   }
> } 
> ```

你可以在这里看到这个：http: [//jsfiddle.net/franzo/JuGDp/1/](http://jsfiddle.net/franzo/JuGDp/1/)

鲍勃是你的叔叔。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-03-09T06:54:26.250

根据您要显示的内容，它应该是可能的。气泡图将允许与任何其他高图相同的选项。最简单的方法是使用 dataLabels [http://api.highcharts.com/highcharts#plotOptions.scatter.dataLabels](http://api.highcharts.com/highcharts#plotOptions.scatter.dataLabels)

```
 dataLabels:{
           enabled:true
       } 
```

例如[http://jsfiddle.net/gh/get/jquery/1.7.2/highslide-software/highcharts.com/tree/master/samples/highcharts/plotoptions/series-datalabels-box/](http://jsfiddle.net/gh/get/jquery/1.7.2/highslide-software/highcharts.com/tree/master/samples/highcharts/plotoptions/series-datalabels-box/)

如果这对您来说不够灵活，可以使用底层渲染器[http://api.highcharts.com/highcharts#Renderer](http://api.highcharts.com/highcharts#Renderer)在图表上绘制您想要的任何内容。这有点难，但是。一旦掌握了窍门，就相当直截了当。

我在这里使用数据标签创建了一个小例子：http: [//jsfiddle.net/4nRk6/](http://jsfiddle.net/4nRk6/)

可以使用格式化程序函数自定义数据标签，例如：

```
 dataLabels: {
           enabled: true,
           formatter: function() {
                    return this.y +'mm';
           }
 } 
```

完整的文档在这里：[http ://api.highcharts.com/highcharts#plotOptions.column.dataLabels](http://api.highcharts.com/highcharts#plotOptions.column.dataLabels)

如果您想要关于气泡的更多信息，您可能需要按如下方式格式化您的数据系列：

```
[
    {x:1, y:5, bubbleText:"Bubble 1"},
    {x:2, y:15, bubbleText:"Bubble 2"},
    {x:3, y:5, bubbleText:"Bubble 3"}
] 
```

在 dataLabel 中，您可以引用 this.point.bubbleText 以及 this.x 和 this.y。

# django - Django celery 一次只运行两个任务？

> ID：15307609
> 
> 赞同：2
> 
> 时间：2013-03-09T05:37:32.380
> 
> 标签：django, celery, django-celery, djcelery

我有这样的芹菜任务：

```
@celery.task
def file_transfer(password, source12, destination):
    result = subprocess.Popen(['sshpass', '-p', password, 'rsync', '-avz', source12, destination], 
                                    stderr=subprocess.PIPE, stdout=subprocess.PIPE).communicate()[0]                             
    return result 
```

我已经调用了 Djagno 视图。

用户可以选择多个文件复制到目的地。例如，如果用户选择一次 4 个文件，celery 只接受 2 个任务。怎么了？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-11T07:56:09.477

你检查过你的工人的并发设置吗？

例如，如果您只有一个工作人员在两核机器上运行，则默认情况下并发为 2。这意味着一次只能执行两个任务。

您可以使用开关从工作人员命令行更改此设置：

```
 -c N 
```

其中 N 是并行任务的数量

# python - 跳过 lldb 中的下 n 个断点

> ID：15307615
> 
> 赞同：9
> 
> 时间：2013-03-09T05:37:44.920
> 
> 标签：python, xcode, lldb

在 gdb 中，我可以通过“继续 n”跳过下 n 个断点，或者通过“下一个 n”跳过下 n 行。lldb中的等价物是什么？

如果没有，我怎么能在 lldb python 扩展中自己创建它们？我尝试了类似的方法，但是没有用，当我键入添加的命令时，lldb 挂起。

```
def cc(debugger, args, result, dict):
    target = debugger.GetSelectedTarget()
    process = target.GetProcess()
    process.Continue() 
```

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2013-03-13T02:52:03.093

该`process continue`命令接受一个`-i`选项，该选项将忽略您当前在当前线程上停止的断点的下一个*i匹配项。*例如

```
Process 13559 stopped
* thread #1: tid = 0xb7da5, 0x0000000100000f21 a.out`main + 49 at a.c:7, stop reason = breakpoint 2.1
    #0: 0x0000000100000f21 a.out`main + 49 at a.c:7
   4        int i;
   5        for (i = 0; i < 100; i++)
   6        {
-> 7            printf ("%d\n", i);
   8        }
   9    }
(lldb) c -i 5
Process 13559 resuming
0
1
2
3
4
5
Process 13559 stopped
* thread #1: tid = 0xb7da5, 0x0000000100000f21 a.out`main + 49 at a.c:7, stop reason = breakpoint 2.1
    #0: 0x0000000100000f21 a.out`main + 49 at a.c:7
   4        int i;
   5        for (i = 0; i < 100; i++)
   6        {
-> 7            printf ("%d\n", i);
   8        }
   9    }
(lldb) 
```

您还可以直接使用设置断点的忽略计数`breakpoint modify -i count bpnum`。

# javascript - 如何按对象的值对对象数组进行排序？

> ID：15307617
> 
> 赞同：1
> 
> 时间：2013-03-09T05:37:55.120
> 
> 标签：javascript, arrays, sorting

```
[ 
    {   
        time: '5'
    },
    {
        time: '2'
    },
    {
        time: '3'
    }
] 
```

假设我有一个对象数组。我想按时间排序，升序。我怎么能在javascript中做到这一点？

有通用功能吗？

例子

```
var sorted_array = sortByKey(my_array, 'time', 'asc'); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-09T05:44:06.533

你可以这样做：

```
my_array.sort(function(a,b) {return a.time - b.time}); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-09T05:54:12.697

就像是：

```
 jsArray = [ 
{   
    time: '5'
},
{
    time: '2'
},
{
    time: '3'
}
 ]

    jsArray.sort( function( tm1, tm2 ){
      return tm2.time - tm1.time;
    }); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-09T05:42:28.423

您可以使用内置的`array.sort(somefunction)`

```
var data = [ 
    {   
        time: '5'
    },
    {
        time: '2'
    },
    {
        time: '3'
    }
];

data.sort(function(a,b){
    return a.time - b.time;
}); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-09T05:43:21.470

```
var myArr = [
    {
        time: '5'
    },
    {
        time: '2'
    },
    {
        time: '3'
    }
];

myArr.sort(function (a, b) {
    return parseInt(a.time, 10) - parseInt(b.time, 10);
}); 
```

# android - VM 预算的基于位图的应用程序运行时异常

> ID：15307619
> 
> 赞同：0
> 
> 时间：2013-03-09T05:38:00.897
> 
> 标签：android, android-intent, bitmap, bitmapimage, bitmapfactory

我正在开发基于大量位图的应用程序，现在的问题是，在某些设备中，我在应用程序测试期间遇到了运行时异常。

这可能是因为位图大小超过了 VM 预算。

**现在的问题是我不能减少应用程序中位图的使用。所以有什么可能的解决方案。**

我曾尝试以下链接，但没有成功。

[http://voices.yahoo.com/android-virtual-machine-vm-out-memory-error-7342266.html](http://voices.yahoo.com/android-virtual-machine-vm-out-memory-error-7342266.html)

请帮我。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-09T05:43:15.773

```
This Happens because calling invalidate() just redraw same bitmaps on to the canvas..
use garbage collector  just try to free memory when these bitmap getting overdraw this 
might help you...:-) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-09T06:11:56.550

不使用时回收位图。压缩位图以减少内存使用。看看这个链接。[http://developer.android.com/training/displaying-bitmaps/load-bitmap.html](http://developer.android.com/training/displaying-bitmaps/load-bitmap.html)。

使用 MAT Analyzer 检查位图使用了多少内存。

检查链接。讨论内存管理以及如何使用 MAT 查找内存泄漏。[http://www.youtube.com/watch?v=_CruQY55HOk](http://www.youtube.com/watch?v=_CruQY55HOk)。

尝试压缩 btimap 以使用更少的内存。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-09T06:31:03.157

[**您可以尝试使用不同的位图配置**](http://developer.android.com/reference/android/graphics/Bitmap.Config.html)加载位图。通过选择不同的配置文件，这可能有助于减小堆中加载的位图对象的大小。例如，如果您不需要保留 alpha 值，请使用 RGB565 配置。

回收位图；看看[**这个**](http://developer.android.com/training/displaying-bitmaps/index.html)，这是一个很好的阅读。

您可以指定

```
android:largeHeap="true" 
```

在您的清单文件中。这将允许更多的应用程序堆，但前提是它是可能的。从 API 11 开始可用。

您还可以尝试向用户显示按比例缩小的版本，并允许任何操作（如默认图库查看器应用程序所做的那样）。

另外，请检查您所得到的是否完全是“由于位图而超出 VM 预算”问题，因为您自己并不确定。

# iphone - 如何从呈现的 ViewController poptoRootViewController

> ID：15307621
> 
> 赞同：0
> 
> 时间：2013-03-09T05:38:31.063
> 
> 标签：iphone, objective-c

登录后我有登录屏幕，我正在推送到 HomeViewController。在 HomeViewController 上，我有一个“设置”按钮，按下它我正在呈现“SettingViewController”，现在在 settingViewController 上，我有一个用于注销的按钮。现在，当用户按下注销时，它应该在 LoginScreen 上弹出ToRootViewController.ie，但它没有完成。有什么建议么。这是我的代码。

登录时

```
-(void)login_Success
{
HomeViewController *homeView = [[HomeViewController alloc]init];
[[self navigationController]pushViewController:homeView animated:YES];
} 
```

在主页呈现设置屏幕上

```
- (IBAction)btn_setting_Click:(id)sender
{
SettingsViewController *settingsViewController = [[SettingsViewController alloc]init];
[self presentModalViewController:settingsViewController animated:YES];  
} 
```

在设置屏幕注销按下

```
- (IBAction)btnLogout_Click:(id)sender
 {
[appDelegate closeSession];
[self dismissModalViewControllerAnimated:NO];
 [[[self parentViewController]navigationController] popToRootViewControllerAnimated:YES];
 } 
```

按注销时，这不会弹出到登录屏幕。有什么建议么。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-09T06:05:46.077

首先在 AppDelegate 中定义方法，如下所示：

```
-(void)logoutNav
{
    [self.navigationController popToRootViewControllerAnimated:YES];
} 
```

然后在 SettingViewController 尝试以下代码

```
- (IBAction)btnLogout_Click:(id)sender
 {
    [self dismissModalViewControllerAnimated:NO];
    [((AppDelegate *)[[UIApplication sharedApplication] delegate]) logoutNav];
 } 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-09T05:41:52.243

您已经在两者之间展示了您的视图控制器。所以在下一个视图中弹出将不可用。甚至对于 rootViewController 也不行。

您需要关闭视图，然后弹出到上一个视图

享受编程！！

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-09T05:47:51.537

```
- (IBAction)btnLogout_Click:(id)sender
{
   [appDelegate closeSession];
   [self dismissModalViewControllerAnimated:NO];
   [[self.view.window.homeView navigationController] popToRootViewControllerAnimated:YES];
} 
```

我不确定，但试试这个

**编辑**

使用委托尝试像这样实现

设置视图控制器.h

```
@protocol SettingsViewControllerDelegate
    -(void)logOut;
@end
...
@property(nonatomic, assign) id<SettingsViewControllerDelegate> delegate; 
```

设置视图控制器.m

```
@synthesize @delegate;

- (IBAction)btnLogout_Click:(id)sender
{
    [appDelegate closeSession];
    [self dismissModalViewControllerAnimated:NO];
    [self.delegate logOut];
} 
```

HomeViewController.h

```
#import "SettingViewController.h"
@interface HomeViewController : UIViewController <SettingsViewControllerDelegate> 
```

主视图控制器.m

```
- (IBAction)btn_setting_Click:(id)sender
{
    SettingsViewController *settingsViewController = [[SettingsViewController alloc]init];
    settingsViewController.delegate = self
    [self presentModalViewController:settingsViewController animated:YES];  
}

-(void)logout
{
    [[self navigationController] popToRootViewControllerAnimated:YES];
} 
```

# python - 无法比较天真和有意识的 datetime.now() <= challenge.datetime_end

> ID：15307623
> 
> 赞同：249
> 
> 时间：2013-03-09T05:38:56.167
> 
> 标签：python, django, datetime, comparison

我正在尝试使用比较运算符将当前日期和时间与模型中指定的日期和时间进行比较：

```
if challenge.datetime_start <= datetime.now() <= challenge.datetime_end: 
```

脚本错误：

```
TypeError: can't compare offset-naive and offset-aware datetimes 
```

模型如下所示：

```
class Fundraising_Challenge(models.Model):
    name = models.CharField(max_length=100)
    datetime_start = models.DateTimeField()
    datetime_end = models.DateTimeField() 
```

我也有使用语言环境日期和时间的 django。

我找不到的是 django 用于 DateTimeField() 的格式。是天真还是有意识？以及如何让 datetime.now() 识别语言环境日期时间？

* * *

## 回答 #1

> 赞同：229
> 
> 时间：2013-03-09T05:54:15.763

默认情况下，该`datetime`对象`naive`在 Python 中，因此您需要将它们都设置为天真的对象或感知`datetime`对象。这可以使用以下方法完成：

```
import datetime
import pytz

utc=pytz.UTC

challenge.datetime_start = utc.localize(challenge.datetime_start) 
challenge.datetime_end = utc.localize(challenge.datetime_end) 
# now both the datetime objects are aware, and you can compare them 
```

注意：这会引发一个`ValueError`if`tzinfo`已设置。如果您不确定，请使用

```
start_time = challenge.datetime_start.replace(tzinfo=utc)
end_time = challenge.datetime_end.replace(tzinfo=utc) 
```

顺便说一句，您可以使用时区信息在 datetime.datetime 对象中格式化 UNIX 时间戳，如下所示

```
d = datetime.datetime.utcfromtimestamp(int(unix_timestamp))
d_with_tz = datetime.datetime(
    year=d.year,
    month=d.month,
    day=d.day,
    hour=d.hour,
    minute=d.minute,
    second=d.second,
    tzinfo=pytz.UTC) 
```

* * *

## 回答 #2

> 赞同：134
> 
> 时间：2013-03-09T09:59:53.613

`datetime.datetime.now`不知道时区。

Django为此提供了一个助手，这需要`pytz`

```
from django.utils import timezone
now = timezone.now() 
```

你应该能够`now`比较`challenge.datetime_start`

* * *

## 回答 #3

> 赞同：92
> 
> 时间：2015-10-03T18:57:18.383

## 一行代码解决方案

```
if timezone_aware_var <= datetime.datetime.now(timezone_aware_var.tzinfo):
    pass #some code 
```

### 解释版

```
# Timezone info of your timezone aware variable
timezone = your_timezone_aware_variable.tzinfo

# Current datetime for the timezone of your variable
now_in_timezone = datetime.datetime.now(timezone)

# Now you can do a fair comparison, both datetime variables have the same time zone
if your_timezone_aware_variable <= now_in_timezone:
    pass #some code 
```

### 概括

您必须将时区信息添加到您的`now()`日期时间。
但是，您必须添加与引用变量**相同**的时区；这就是我第一次阅读该`tzinfo`属性的原因。

* * *

## 回答 #4

> 赞同：40
> 
> 时间：2018-01-19T11:52:00.347

禁用时区。采用`challenge.datetime_start.replace(tzinfo=None);`

您也可以`replace(tzinfo=None)`用于其他**日期**时间。

```
if challenge.datetime_start.replace(tzinfo=None) <= datetime.now().replace(tzinfo=None) <= challenge.datetime_end.replace(tzinfo=None): 
```

* * *

## 回答 #5

> 赞同：5
> 
> 时间：2021-07-14T03:26:36.747

没有第三方，只有本机日期时间模块。

```
from datetime import datetime, timedelta, timezone

time1 = datetime.strptime('2021-07-15T00:22:02+0000', '%Y-%m-%dT%H:%M:%S%z')
time2 = datetime(2021, 7, 15, tzinfo=timezone(offset=timedelta()))
if time1 < time2:
    print(True) 
```

* * *

## 回答 #6

> 赞同：3
> 
> 时间：2019-08-01T10:02:02.350

它对我起作用。在这里，我正在创建表创建日期时间并在日期时间上添加 10 分钟。稍后根据当前时间完成到期操作。

```
from datetime import datetime, time, timedelta
import pytz 
```

在数据库日期时间上增加了 10 分钟

table_datetime = '2019-06-13 07:49:02.832969'（示例）

```
# Added 10 minutes on database datetime
# table_datetime = '2019-06-13 07:49:02.832969' (example)

table_expire_datetime = table_datetime + timedelta(minutes=10 )

# Current datetime
current_datetime = datetime.now()

# replace the timezone in both time
expired_on = table_expire_datetime.replace(tzinfo=utc)
checked_on = current_datetime.replace(tzinfo=utc)

if expired_on < checked_on:
    print("Time Crossed)
else:
    print("Time not crossed ") 
```

它对我有用。

* * *

## 回答 #7

> 赞同：2
> 
> 时间：2013-03-10T00:44:58.377

所以我解决这个问题的方法是确保两个日期时间在正确的时区。

我可以看到您正在使用`datetime.now()`它将返回系统当前时间，没有设置 tzinfo。

tzinfo 是附加到日期时间的信息，用于让它知道它所在的时区。如果您使用的是简单的日期时间，则需要在整个系统中保持一致。我强烈建议只使用`datetime.utcnow()`

看到您正在创建与 tzinfo 相关联的日期时间的某个地方，您需要做的是确保将它们本地化（与 tzinfo 相关联）到正确的时区。

看看[Delorean](http://delorean.readthedocs.org/en/latest/)，它使处理这类事情变得更加容易。

* * *

## 回答 #8

> 赞同：1
> 
> 时间：2020-10-07T19:13:27.420

您正在尝试为已经有时区的 date_time 设置时区。用途`replace`和`astimezone`功能。

```
local_tz = pytz.timezone('Asia/Kolkata')

current_time = datetime.now().replace(tzinfo=pytz.utc).astimezone(local_tz) 
```

* * *

## 回答 #9

> 赞同：-1
> 
> 时间：2020-07-03T21:35:58.093

只是：

```
dt = datetimeObject.strftime(format) # format = your datetime format ex) '%Y %d %m'
dt = datetime.datetime.strptime(dt,format) 
```

所以这样做：

```
start_time = challenge.datetime_start.strftime('%Y %d %m %H %M %S')
start_time = datetime.datetime.strptime(start_time,'%Y %d %m %H %M %S')

end_time = challenge.datetime_end.strftime('%Y %d %m %H %M %S')
end_time = datetime.datetime.strptime(end_time,'%Y %d %m %H %M %S') 
```

然后使用`start_time`和`end_time`

# asp.net-mvc - 将复杂对象列表绑定到模型

> ID：15307639
> 
> 赞同：1
> 
> 时间：2013-03-09T05:41:45.070
> 
> 标签：asp.net-mvc, data-binding

我有一个具有 ID、Area、Debug、Error、Info、Warning、Fatal 属性的模型，我想将此对象的列表与 MVC 中的模型绑定器绑定。

```
@for (int i = 0; i < Model.Count(); i++)
    {
        <tr>
            <td>
                <input type="hidden" name="[@i].ID" value="@Model.ElementAt(i).ID"/>
            </td>
            <td>
                <input type="hidden" name="[@i].Area" value="@Model.ElementAt(i).Area" />
                @Model.ElementAt(i).Area
            </td>
            <td>
                <input name="[@i].Debug" type="checkbox" id="[@i].Debug" class="regular-checkbox" @(Model.ElementAt(i).Debug ? "checked='checked'" : "") value="@Model.ElementAt(i).Debug"/><label  for="[@i].Debug" ></label>
            </td>
            <td>
                <input name="[@i].Error" type="checkbox" id="[@i].Error" class="regular-checkbox" @(Model.ElementAt(i).Error ? "checked='checked'" : "") value="@Model.ElementAt(i).Error"/><label for="[@i].Error" ></label>
            </td>
            <td>
                <input name="[@i].Info" type="checkbox" id="[@i].Info" class="regular-checkbox" @(Model.ElementAt(i).Info ? "checked='checked'" : "") value="@Model.ElementAt(i).Info"/><label for="[@i].Info" ></label>
            </td>
            <td>
                <input name="[@i].Warnning" type="checkbox" id="[@i].Warnning" class="regular-checkbox" @(Model.ElementAt(i).Warnning ? "checked='checked'" : "") value="@Model.ElementAt(i).Warnning"/><label for="[@i].Warnning" ></label>
            </td>
            <td>
                <input name="[@i].Fatal" type="checkbox" id="[@i].Fatal" class="regular-checkbox" @(Model.ElementAt(i).Fatal ? "checked='checked'" : "") value="@Model.ElementAt(i).Fatal"/><label for="[@i].Fatal" ></label>
            </td>

        </tr>
    } 
```

我还有一个动作：

```
[HttpPost]
    public ActionResult EditAll(IList<LogSetting> logsettings)
    {
        if (ModelState.IsValid)
        {
            foreach (var logsetting in logsettings)
            {
                db.LogSettings.Attach(logsetting);
                db.ObjectStateManager.ChangeObjectState(logsetting, EntityState.Modified);
            }
            db.SaveChanges();
        }

       return RedirectToAction("Index");
    } 
```

问题是当我取消选中一行的复选框并提交表单时，相应行的值变为 false，但是如果我选中此复选框并提交表单，它不会变为真，在这种情况下，当我设置断点时在保存操作中，我看到该值仍然为 false。

谢谢你的帮助。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-09T06:23:18.157

不确定这是否与您的问题有关，但我有类似的结果。当我发布带有已选中*和禁用*复选框的表单时，发布的值将设置为 false。在发布之前删除`"disabled"`属性解决了这个问题。

# eclipse - eclipse 特定设置是否应该是源代码存储库的一部分

> ID：15307643
> 
> 赞同：1
> 
> 时间：2013-03-09T05:42:27.987
> 
> 标签：eclipse

将 Eclipse 特定设置添加为源代码存储库的一部分是否有意义

```
 (use "git add <file>..." to include in what will be committed)
#
#   ivr/.classpath
#   ivr/.project
#   ivr/.settings/
no changes added to commit (use "git add" and/or "git commit -a")

sam@dell:~/work$ ls ivr/.settings/
org.eclipse.jdt.core.prefs        org.eclipse.wst.common.project.facet.core.xml
org.eclipse.wst.common.component 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-10T06:26:59.547

是的，您也想提交这些设置文件。否则，在进行结帐时，您会得到相同的项目内容，但会在不同的设置下编译它们。因此，您不再拥有独立的可重现项目。

示例：如果您在项目的 Java 设置（位于 org.eclipse.jdt.core.prefs 中）中设置了 Java 1.5 的编译器合规级别并且您没有提交它们，那么其他人可能会签出该项目，介绍一些代码中有 Java 6 语言的特性，它可以在他的机器上运行，但是在获取他的更改后会出现编译错误。

# ruby - Ruby中匿名函数对象中的局部变量范围

> ID：15307645
> 
> 赞同：1
> 
> 时间：2013-03-09T05:42:29.157
> 
> 标签：ruby

大卫。A. 布莱克在他的书中说：

> “块可以充当匿名函数对象的主体，并且这些对象保留在其创建时处于作用域内的局部变量——即使函数对象被传递到其他局部作用域。”

任何人都可以在这里帮助我理解一些例子的含义吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-09T05:52:14.670

当你创建一个匿名函数（一个[lambda](http://ruby-doc.org/core-2.0/Kernel.html#method-i-lambda)或[Proc](http://ruby-doc.org/core-2.0/Proc.html)）时，你给它一个块，它是函数的主体，如下所示：

```
-> { this_is_the_function_body }
Proc.new { this_is_the_function_body } 
```

块保留所有局部变量，因为它们存在于创建块的范围内：

```
def my_lambda
  text = 'foo bar baz'
  -> { "text is: #{text}" }
end

l = my_lambda
text       #=> #<NameError: undefined local variable or method `text' for main:Object>
l.inspect  #=> "#<Proc:0x007f9863865a80@(pry):3 (lambda)>"
l.call     #=> "foo bar baz" 
```

正如我们在上面看到的，`text`即使 lambda 对象驻留在`text`不存在的范围内并被调用，局部变量仍然可用。如果调用作用域中存在同名的局部变量，情况也是如此：

```
text = 'something else'
l.call  #=> "foo bar baz" 
```

这称为*[闭包](https://en.wikipedia.org/wiki/Closure_%28computer_science%29)*。无论您在哪里调用该函数，您仍然可以访问创建它的作用域。

但是，这不仅适用于局部变量，还适用于整个范围，正如我们在此处看到的：

```
class C
  def f; -> { g }; end
  def g; 'foo'; end
end

C.new.f.call  #=> "foo" 
```

# ios - 如何在 UIImageview 中添加圆形遮罩并更改框架和中心？

> ID：15307652
> 
> 赞同：10
> 
> 时间：2013-03-09T05:43:09.500
> 
> 标签：ios, uiimageview, calayer, uiviewanimation, cashapelayer

我想给 UIImageVIew 添加一个圆形遮罩。这是用于添加掩码的功能..

```
- (void) addMaskToBounds:(CGRect) maskBounds
{
    CAShapeLayer *maskLayer = [[CAShapeLayer alloc] init];

    CGPathRef maskPath = CGPathCreateWithEllipseInRect(maskBounds, NULL);
    maskLayer.bounds = maskBounds;
    [maskLayer setPath:maskPath];
    [maskLayer setFillColor:[[UIColor blackColor] CGColor]];
    maskLayer.position = CGPointMake(maskBounds.size.width/2, maskBounds.size.height/2);

    [self.imageView.layer setMask:maskLayer];
} 
```

我能够添加蒙版，但由于我更改了图像框架和中心，因此出现了问题。图像会根据用户操作放大和缩小。因此，我必须在小和放大时添加两次蒙版。因此，由于正在为帧更改设置动画，因此在为图像设置动画时会失真或移位。我该如何克服呢？

我想最好用一个示例项目来解释它。在这里，我在 GitHub 上创建了一个演示项目[https://github.com/akshaynhegde/MaskImage](https://github.com/akshaynhegde/MaskImage)，只需运行它即可查看我的问题并让我知道如何解决问题。

* * *

## 回答 #1

> 赞同：22
> 
> 时间：2014-06-16T12:04:28.057

希望这会有所帮助

```
 CAShapeLayer *circle = [CAShapeLayer layer];
    // Make a circular shape
    UIBezierPath *circularPath=[UIBezierPath bezierPathWithRoundedRect:CGRectMake(0, 0, _imgView.frame.size.width, _imgView.frame.size.height) cornerRadius:MAX(_imgView.frame.size.width, _imgView.frame.size.height)];

    circle.path = circularPath.CGPath;

    // Configure the apperence of the circle
    circle.fillColor = [UIColor blackColor].CGColor;
    circle.strokeColor = [UIColor blackColor].CGColor;
    circle.lineWidth = 0;

    imgViewToClipCircular.layer.mask=circle; 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-03-15T04:15:32.110

好的，所以由于我的中心发生了变化，因此使用面罩并没有帮助。所以简单而干净的方法是有一个自定义的 UiImageView 并剪辑绘制路径。

因此，为此，子类`UIView`化并在其中绘制图像并剪辑路径。这是覆盖的`drawRect`功能，

```
- (void)drawRect:(CGRect)rect
{
    CGContextRef context = UIGraphicsGetCurrentContext();
    CGContextAddEllipseInRect(context, self.bounds);
    CGContextClip(context);
    //The subclass of UIView has a UIImageview as property
    [_image drawInRect:rect];    
} 
```

仅供参考，您不能继承 UIImageView 本身并覆盖`drawRect`，因为它不会调用`drawRect`，

> UIImageView 类经过优化，可以将其图像绘制到显示器上。UIImageView 不会调用 drawRect: 一个子类。如果您的子类需要自定义绘图代码，建议您使用 UIView 作为基类。

# android - 给任何 tableLayout 行上的任何按钮一个事件？

> ID：15307653
> 
> 赞同：0
> 
> 时间：2013-03-09T05:43:10.030
> 
> 标签：android, row, android-tablelayout, layout-inflater

我想使用 LayoutInflater 从第二个布局到第一个布局的任何按钮提供一个事件。

这是我的代码。

主要的.xml

```
<RelativeLayout xmlns:android="http://schemas.android.com/apk/res/android"
xmlns:tools="http://schemas.android.com/tools"
android:layout_width="match_parent"
android:layout_height="match_parent"
tools:context=".MainActivity"
tools:ignore="ScrollViewSize,TextFields,HardcodedText,UselessLeaf,UselessParent" >

<TableLayout
    android:layout_width="match_parent"
    android:layout_height="match_parent" >

    <LinearLayout
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:orientation="vertical" >

        <EditText
            android:id="@+id/editTextSearch"
            android:layout_width="match_parent"
            android:layout_height="wrap_content"
            android:layout_marginTop="10dp"
            android:ems="10" />

        <LinearLayout
            android:layout_width="match_parent"
            android:layout_height="wrap_content"
            android:layout_marginTop="10dp" >

            <EditText
                android:id="@+id/editTextTag"
                android:layout_width="wrap_content"
                android:layout_height="wrap_content"
                android:layout_weight="1"
                android:ems="10" />

            <Button
                android:id="@+id/buttonSave"
                android:layout_width="wrap_content"
                android:layout_height="wrap_content"
                android:layout_weight="1"
                android:text="Save" />
        </LinearLayout>

        <TextView
            android:id="@+id/textView1"
            android:layout_width="match_parent"
            android:layout_height="wrap_content"
            android:layout_marginTop="10dp"
            android:gravity="center"
            android:text="Tagged Searches"
            android:textAppearance="?android:attr/textAppearanceLarge" />

        <ScrollView
            android:id="@+id/scrollView1"
            android:layout_width="match_parent"
            android:layout_height="500dp"
            android:layout_marginTop="10dp"
            android:background="#C90" >

            <TableLayout
                android:id="@+id/TableLayout1"
                android:layout_width="match_parent"
                android:layout_height="match_parent" >

            </TableLayout>
        </ScrollView>

        <Button
            android:id="@+id/buttonClearTask"
            android:layout_width="match_parent"
            android:layout_height="wrap_content"
            android:layout_marginTop="10dp"
            android:text="Clear Tags" />

    </LinearLayout>

</TableLayout> 
```

gonder_edit_button.xml

```
<?xml version="1.0" encoding="utf-8"?>
<TableLayout xmlns:android="http://schemas.android.com/apk/res/android"
xmlns:tools="http://schemas.android.com/tools"
android:layout_width="match_parent"
android:layout_height="match_parent"
tools:ignore="HardcodedText,UselessParent" >

<LinearLayout
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"
    android:gravity="center" >

    <Button
        android:id="@+id/buttonEklenecek"
        android:layout_width="150dp"
        android:layout_height="wrap_content"
        android:layout_marginRight="30dp"
        android:text="Add" />

    <Button
        android:id="@+id/buttonEdit"
        android:layout_width="150dp"
        android:layout_height="wrap_content"
        android:layout_marginLeft="30dp"
        android:text="Edit" />

</LinearLayout> 
```

还有我的java代码。

```
 `super.onCreate ( savedInstanceState );
    setContentView ( R.layout.main );
    buttonSave = ( Button ) findViewById ( R.id.buttonSave );
    editTextSearch = ( EditText ) findViewById ( R.id.editTextSearch );
    editTextTag = ( EditText ) findViewById ( R.id.editTextTag );
    TableLayout1 = ( TableLayout ) findViewById ( R.id.TableLayout1 );

    buttonSave.setOnClickListener ( new OnClickListener ( )
    {

        @ Override
        public void onClick ( View v )
        {

            layoutInflater = ( LayoutInflater ) getSystemService ( Context.LAYOUT_INFLATER_SERVICE );

            view = layoutInflater.inflate ( R.layout.gonder_edit_button , null );

            TableLayout1.addView ( view );

            buttonEklenen = ( Button ) view.findViewById ( R.id.buttonEklenecek );

            buttonEklenen.setText ( editTextTag.getText ( ).toString ( ) );

            buttonEklenen.setOnClickListener ( new OnClickListener ( )
            {

                @ Override
                public void onClick ( View arg0 )
                {

                    String URLstring = "http://search.twitter.com/search?p=" + buttonEklenen.getText ( ).toString ( );

                    Intent webIntent = new Intent (    Intent.ACTION_VIEW , Uri.parse ( URLstring ) );

                    startActivity ( webIntent );
                }
            } );

        }
    } );` 
```

例如，当我保存搜索和标记七次时，我想给一个事件第三个按钮。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-09T05:53:02.387

您应该遍历所有子视图并向它们添加侦听器：

```
private void logCoordinates() {
    RelativeLayout layout = (RelativeLayout)findViewById(R.id.layout);
    for (int i = 0; i < layout.getChildCount(); i++) {
        View child = layout.getChildAt(i);
        if (child instanceof Button)
        {
           // add listeners here
        }
    }
} 
```

# php - 一个主体有多个观察者

> ID：15307657
> 
> 赞同：-2
> 
> 时间：2013-03-09T05:43:31.283
> 
> 标签：php, design-patterns

使用哪种设计模式或如何做，以便一个主体可以有多个观察者，并且主体可以在必要时通知特定的观察者。在经典的观察者模式中，有一个函数用于一次通知一个观察者或观察者列表，它不能通知特定的观察者。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-09T05:54:39.207

*观察者模式*及其更通用的变体*发布-订阅习惯用法*用于将可观察者与了解其观察者**分离。**

如果 observable 已经知道对需要通知的特定对象的引用 - 只需直接调用该对象。

您还可以使用*发布-订阅/事件总线*- 为每个特定观察者创建一个主题，让观察者订阅特定主题并将事件/发布发送到该主题。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-09T22:59:10.630

虽然我同意@mantrid 所说的，但您仍然可以使用带有过滤支持的观察者模式或使用拉模式。对于第一个选项，向您的 Observer 接口添加一个方法，例如：`IsInterested(Object context)`Subject 在其所有 Observers 上调用此方法以决定它们是否应该接收通知，并且 Subject 可以通过`context`参数为 Observer 提供一些信息以帮助它决定。对于第二个选项，使用 Pull 模型，您的 Subject 通知所有 Observers 一些状态更改，并且这些 Observers 可以选择进一步请求或不请求（提取他们想要的信息）来自主题的新状态信息。

# javascript - 使用javascript在设定的时间间隔增加变量？

> ID：15307660
> 
> 赞同：0
> 
> 时间：2013-03-09T05:44:09.640
> 
> 标签：javascript, jquery

首先这是迷你 javascript 脚本：

```
 f = 1
 $(".thumb").hover(function() {
       intervalId = setInterval($(this).text(f++), 400));
  }); 
```

我试图让 .thumb 文本在用户鼠标悬停时增加，当我悬停并再次悬停时它会增加，但我想在用户悬停在元素顶部时增加。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-09T05:56:36.410

尝试：

```
var f = 1,
    intervalId;

$(".thumb").hover(function () {
    $this = $(this);
    intervalId = setInterval(function () {
        $this.text(f++);
    }, 100);
}, function () {
    clearInterval(intervalId);
}); 
```

[在这里](http://jsfiddle.net/n74VW/)提琴

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-09T05:51:57.100

您必须传递一个实际函数才能`setInterval()`像这样：

```
 f = 1
 $(".thumb").hover(function() {
       var self = $(this);
       intervalId = setInterval(function() {self.text(f++)}, 400));
  }); 
```

您在原始代码中所做的是将`$(this).text(f++)`立即执行的调用结果传递给`setInterval()`. 由于它不返回函数，因此没有回调函数，`setInterval()`因此在间隔上没有运行任何内容。

* * *

如果您还想在停止悬停时停止间隔，那么您可以这样做：

```
 var f = 1;
 var intervalId;
 $(".thumb").hover(function() {
     var self = $(this);
     if (intervalId) {
         clearInterval(intervalId);
     }
     intervalId = setInterval(function() {self.text(f++)}, 400));
 }, function() {
     f = 1;
     clearInterval(intervalId);
     intervalId = null;
 }); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-09T05:57:05.693

这是一个你想要做的小提琴：http: [//jsfiddle.net/2pdnP/](http://jsfiddle.net/2pdnP/)

```
var f = 1;
var intervalId = null;
 $(".thumb").hover(function() {
    var self = this;
    intervalId = setInterval(function() {$(self).text(f++)}, 400);
 }, function () {
    clearInterval(intervalId);
 }); 
```

您需要在 hoverIn 范围之外定义 intervalId，然后在悬停时将其停用。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-09T05:54:49.190

这可行，但可能有更简单的方法：

```
<script>
 var f = 1
 var intervalId;
 var started = false;

 $(".thumb").hover(function() {
    started = true;
  },
  function () {
    started = false;
  });

  intervalId = setInterval(incrementDiv, 400);

  function incrementDiv() {
    if (started) {
        $(".thumb").text(f++);
    }
  }
</script> 
```

这将在鼠标悬停在元素上时开始增加值，并在鼠标光标移开时停止。

# arrays - 用户定义的字符串数组大小/输入 Java

> ID：15307661
> 
> 赞同：1
> 
> 时间：2013-03-09T05:44:34.143
> 
> 标签：arrays, string, input

我正在尝试用 Java 编写一个菜单驱动的程序。不过，我在使用 for 循环读取用户输入到我的字符串数组时遇到了一些麻烦。当我将数组从 String 更改为 int 时，代码工作正常。但是，当我将其更改为字符串时，它会在用户有机会输入团队名称之前通过循环两次。我还需要让用户根据他们想要输入的团队数量来控制数组的大小，所以如果他们想输入 5 个团队，那么数组的大小将是 5。如果我在用户输入之前声明数组数组大小然后它不起作用。而且我不能只将其保留在 if 语句中，否则会出现范围问题。任何人都可以看到解决这个问题的方法吗？这是程序的第一部分

```
import java.util.Scanner;

public class main {

public static void main(String[] args) {

    System.out.println("Howdy sports fan!");

    String menuSelect;

    do {
        System.out.println("Please pick an option from the list below:");
        System.out.println("1) Create League");
        System.out.println("2) List all teams");
        System.out.println("3) Record a win");          
        System.out.println("4) Record a loss");         
        System.out.println("5) Quit");          
        Scanner keyboard = new Scanner(System.in);
        menuSelect = keyboard.nextLine();

        if ( menuSelect.equals("1") )
        {
            System.out.println("How many teams should I make?");
            String[] teamsArray= new String[keyboard.nextInt()];

            for ( int i = 0; i < teamsArray.length; i++ )
            {
                System.out.println("Team " + (i+1) + "'s name?");
                teamsArray[i] = keyboard.nextLine();                
            }
        }

    } while(!menuSelect.equals("5"));

} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-09T06:31:52.210

您的代码存在许多问题，我尝试按照以下方法进行更正：

```
import java.util.Scanner;
import java.util.*;

public class SportsLeague { 

  public static void main(String[] args) {

    System.out.println("Howdy sports fan!");

    String menuSelect;
    Scanner keyboard = new Scanner(System.in);
    List<String> teamsArray = new ArrayList<String>();

    do {
      System.out.println("Please pick an option from the list below:");
      System.out.println("1) Create League");
      System.out.println("2) List all teams");
      System.out.println("3) Record a win");          
      System.out.println("4) Record a loss");         
      System.out.println("5) Quit");          

      menuSelect = keyboard.nextLine();

      //since you're making a menu, switches are better
      //this is especially so since your program exceeds 4 options
      //which is a generic rule of thumb for readability
      switch(menuSelect) {
        case "1":
          System.out.println("How many teams should I make?");

          //reset the teamsArray, so that you can create a new league
          //you may want to change this if you want
          teamsArray.clear();

          //get the number of teams with which to create names for
          //by converting the line from the keyboard to an integer
          int teams = Integer.parseInt(keyboard.nextLine());

          //now iterate over it and assign values to the array by
          //prompting the user for the info and saving it using
          //the add() method
          for ( int i = 0; i < teams; ++i )
          {
            System.out.println("Team " + (i+1) + "'s name?");
            teamsArray.add(keyboard.nextLine());    
          }
          break;//break is required here

        //print out the contents of the teamsArray
        case "2":
          for ( int i = 0; i < teamsArray.size(); ++i )
          {
            //print out the elements within the arraylist using the "get()" method
            System.out.println(teamsArray.get(i));   
          }
          break;

         //implement for the other options...
      }
    } while(!menuSelect.equals("5"));
  }
} 
```

一：你有你的班级命名为“main”——这是正常的，但**应该大写**。但是，我冒昧地将其重命名为与您的问题更相关的名称。

二：您应该尽可能**使用 ArrayLists 而不是“普通”数组**- 因为您重新分配、取消分配内存和其他选项比使用常规数组要好得多。

三：**您应该使用 switch** - 因为您的案例数量超过 4（这是编写菜单代码以提高可读性的一般经验法则）。

除了这些，我认为这应该非常适合您的问题。

在您的情况下，自从您执行了`keyboard.nextInt()`. **尽管您正确读取了整数，但尚未读取换行符。**因此，当`keyboard.nextLine()`被调用时，**它会读取换行符**- 这给您的印象是您已经循环了“两次”并且没有拾取您的第二个输出（实际上**它有，但您不知道，或者看到**）。**这也是为什么当您将它作为字符串使用时，它会捕获换行符并且捕获工作完美无缺。**

更新：

编辑为使用静态数组与 ArrayLists：

```
import java.util.Scanner;
import java.util.*;

public class SportsFan3 { 

  public static void main(String[] args) {

    System.out.println("Howdy sports fan!");

    String menuSelect;
    Scanner keyboard = new Scanner(System.in);

    String[] teamsArray = new String[0];

    do {
      System.out.println("Please pick an option from the list below:");
      System.out.println("1) Create League");
      System.out.println("2) List all teams");
      System.out.println("3) Record a win");          
      System.out.println("4) Record a loss");         
      System.out.println("5) Quit");          

      menuSelect = keyboard.nextLine();

      switch(menuSelect) {
        case "1":

          //set the number of teams within array to 0

          //check to see that the number of teams that the user has enetered does not exceed the maximumTeamsize

          int numteams = 0;

          System.out.println("How many teams should I make?");   
          numteams = Integer.parseInt(keyboard.nextLine());

          teamsArray = new String[numteams];

          for ( int i = 0; i < teamsArray.length; ++i )
          {
            System.out.println("Team " + (i+1) + "'s name?");
            teamsArray[i] = keyboard.nextLine(); 
          }
          break;

        case "2":
          for ( int i = 0; i < teamsArray.length; ++i )
          {
            System.out.println(teamsArray[i]);   
          }
          break;

         //implement for the other options...
      }
    } while(!menuSelect.equals("5"));
  }
} 
```

# javascript - 单击链接后 jQuery 音频停止

> ID：15307663
> 
> 赞同：0
> 
> 时间：2013-03-09T05:44:38.217
> 
> 标签：javascript, jquery, audio, mp3, lightbox

我有两个 jQuery 脚本正在运行：一个用于音频 mp3 播放器，另一个用于在 LightBox 中显示 YouTube 视频。现在，如果有人单击要播放的音频文件，即使单击视频的链接，它也会继续播放。

我希望音频停止播放，这样当灯箱打开时，我可以自动播放视频并且用户可以观看。

**音频播放器实现：**

```
<head>
<link rel="stylesheet" href="libs/css/styles.css" />
<script src="libs/jquery/jquery.js"></script>
<script src="src/jquery.ubaplayer.js"></script>
<script>
   jQuery.noConflict();
   jQuery(function(){
            jQuery("#ubaPlayer").ubaPlayer({
            codecs: [{name:"MP3", codec: 'audio/mpeg;'}]
            });
        });
</script>
</head>

<body>
<a class="audioButton" href="mp3/dontthinktwice.mp3">
        Don't Think Twice - Bob Dylan</a>
</body> 
```

**音频播放器脚本：**

```
(function($) {
var defaults = {
    audioButtonClass: "audioButton",
    autoPlay: null,
    codecs: [{
        name: "OGG",
        codec: 'audio/ogg; codecs="vorbis"'
    }, {
        name: "MP3",
        codec: 'audio/mpeg'
    }],
    continuous: false,
    extension: null,
    flashAudioPlayerPath: "libs/swf/player.swf",
    flashExtension: ".mp3",
    flashObjectID: "audioPlayer",
    loadingClass: "loading",
    loop: false,
    playerContainer: "player",
    playingClass: "playing",
    swfobjectPath: "libs/swfobject/swfobject.js",
    volume: 0.5
},
    currentTrack, isPlaying = false,
    isFlash = false,
    audio, $buttons, $tgt, $el, playTrack, resumeTrack, pauseTrack, methods = {
        play: function(element) {
            $tgt = element;
            currentTrack = _methods.getFileNameWithoutExtension($tgt.attr("href"));
            isPlaying = true;
            $tgt.addClass(defaults.loadingClass);
            $buttons.removeClass(defaults.playingClass);

            if (isFlash) {
                if (audio) {
                    _methods.removeListeners(window);
                }
                audio = document.getElementById(defaults.flashObjectID);
                _methods.addListeners(window);
                audio.playFlash(currentTrack + defaults.extension);
            } else {
                if (audio) {
                    audio.pause();
                    _methods.removeListeners(audio);
                }
                audio = new Audio("");
                _methods.addListeners(audio);
                audio.id = "audio";
                audio.loop = defaults.loop ? "loop" : "";
                audio.volume = defaults.volume;
                audio.src = currentTrack + defaults.extension;
                audio.play();
            }
        },

        pause: function() {
            if (isFlash) {
                audio.pauseFlash();
            } else {
                audio.pause();
            }

            $tgt.removeClass(defaults.playingClass);
            isPlaying = false;
        },

        resume: function() {
            if (isFlash) {
                audio.playFlash();
            } else {
                audio.play();
            }
            $tgt.addClass(defaults.playingClass);
            isPlaying = true;
        },

        playing: function() {
            return isPlaying;
        }
    },

    _methods = {
        init: function(options) {
            var types;

            //set defaults
            $.extend(defaults, options);
            $el = this;

            //listen for clicks on the controls
            $(".controls").bind("click", function(event) {
                _methods.updateTrackState(event);
                return false;
            });
            $buttons = $("." + defaults.audioButtonClass);

            types = defaults.codecs;
            for (var i = 0, ilen = types.length; i < ilen; i++) {
                var type = types[i];
                if (_methods.canPlay(type)) {
                    defaults.extension = [".", type.name.toLowerCase()].join("");
                    break;
                }
            }

            if (!defaults.extension || isFlash) {
                isFlash = true;
                defaults.extension = defaults.flashExtension;
            }

            if (isFlash) {
                $el.html("<div id='" + defaults.playerContainer + "'/>");
                $.getScript(defaults.swfobjectPath, function() {
                    swfobject.embedSWF(defaults.flashAudioPlayerPath, defaults.playerContainer, "0", "0", "9.0.0", "swf/expressInstall.swf", false, false, {
                        id: defaults.flashObjectID
                    }, _methods.swfLoaded);
                });
            } else {
                if (defaults.autoPlay) {
                    methods.play(defaults.autoPlay);
                }
            }
        },

        updateTrackState: function(evt) {
            $tgt = $(evt.target);
            if (!$tgt.hasClass("audioButton")) {
                return;
            }
            if (!audio || (audio && currentTrack !== _methods.getFileNameWithoutExtension($tgt.attr("href")))) {
                methods.play($tgt);
            } else if (!isPlaying) {
                methods.resume();
            } else {
                methods.pause();
            }
        },

        addListeners: function(elem) {
            $(elem).bind({
                "canplay": _methods.onLoaded,
                "error": _methods.onError,
                "ended": _methods.onEnded
            });
        },

        removeListeners: function(elem) {
            $(elem).unbind({
                "canplay": _methods.onLoaded,
                "error": _methods.onError,
                "ended": _methods.onEnded
            });
        },

        onLoaded: function() {
            $buttons.removeClass(defaults.loadingClass);
            $tgt.addClass(defaults.playingClass);

            audio.play();
        },

        onError: function() {
            $buttons.removeClass(defaults.loadingClass);
            if (isFlash) {
                _methods.removeListeners(window);
            } else {
                _methods.removeListeners(audio);
            }
        },

        onEnded: function() {
            isPlaying = false;
            $tgt.removeClass(defaults.playingClass);
            currentTrack = "";
            if (isFlash) {
                _methods.removeListeners(window);
            } else {
                _methods.removeListeners(audio);
            }

            if (defaults.continuous) {
                var $next = $tgt.next().length ? $tgt.next() : $(defaults.audioButtonClass).eq(0);
                methods.play($next);
            }

        },

        canPlay: function(type) {
            if (!document.createElement("audio").canPlayType) {
                return false;
            } else {
                return document.createElement("audio").canPlayType(type.codec).match(/maybe|probably/i) ? true : false;
            }
        },

        swfLoaded: function() {
            if (defaults.autoPlay) {
                setTimeout(function() {
                    methods.play(defaults.autoPlay);
                }, 500);
            }
        },

        getFileNameWithoutExtension: function(fileName) {
            //this function take a full file name and returns an extensionless file name
            //ex. entering foo.mp3 returns foo
            //ex. entering foo returns foo (no change)
            var fileNamePieces = fileName.split('.');
            fileNamePieces.pop();
            return fileNamePieces.join(".");
        }
    };

$.fn.ubaPlayer = function(method) {
    if (methods[method]) {
        return methods[method].apply(this, Array.prototype.slice.call(arguments, 1));
    } else if (typeof method === "object" || !method) {
        return _methods.init.apply(this, arguments);
    } else {
        $.error("Method " + method + " does not exist on jquery.ubaPlayer");
    }
}; 
```

**灯箱实现：**

```
<head>
<script type="text/javascript" src="videobox/js/mootools.js"></script>
<script type="text/javascript" src="videobox/js/swfobject.js"></script>
<script type="text/javascript" src="videobox/js/videobox.js"></script>
<link rel="stylesheet" href="videobox/css/videobox.css" type="text/css" media="screen" /></head>

<body>
<a href="http://www.youtube.com/watch?v=2sAnENc6ObI" rel="vidbox" title="The Rainbox Connection - Live at the Berklee Performance Center"><img src="playbtn.png" name="fakeplay" id="fakeplay">The Rainbow Connection (Video)</a>
</body> 
```

**灯箱脚本：**

```
var Videobox = {
init: function (options) {
    // init default options
    this.options = Object.extend({
        resizeDuration: 400,    // Duration of height and width resizing (ms)
        initialWidth: 250,      // Initial width of the box (px)
        initialHeight: 250,     // Initial height of the box (px)
        defaultWidth: 625,      // Default width of the box (px)
        defaultHeight: 350, // Default height of the box (px)
        animateCaption: true,   // Enable/Disable caption animation
        flvplayer: 'swf/flvplayer.swf'
    }, options || {});

    this.anchors = [];
    $A($$('a')).each(function(el){
        if(el.rel && el.href && el.rel.test('^vidbox', 'i')) {
            el.addEvent('click', function (e) {
      e = new Event(e);
      e.stop();
      this.click(el);
            }.bind(this));
            this.anchors.push(el);
        }
}, this);

    this.overlay = new Element('div').setProperty('id', 'lbOverlay').injectInside(document.body);
    this.center = new Element('div').setProperty('id', 'lbCenter').setStyles({width: this.options.initialWidth+'px', height: this.options.initialHeight+'px', marginLeft: '-'+(this.options.initialWidth/2)+'px', display: 'none'}).injectInside(document.body);

    this.bottomContainer = new Element('div').setProperty('id', 'lbBottomContainer').setStyle('display', 'none').injectInside(document.body);
    this.bottom = new Element('div').setProperty('id', 'lbBottom').injectInside(this.bottomContainer);
    new Element('a').setProperties({id: 'lbCloseLink', href: '#'}).injectInside(this.bottom).onclick = this.overlay.onclick = this.close.bind(this);
    this.caption = new Element('div').setProperty('id', 'lbCaption').injectInside(this.bottom);
    this.number = new Element('div').setProperty('id', 'lbNumber').injectInside(this.bottom);
    new Element('div').setStyle('clear', 'both').injectInside(this.bottom);

    var nextEffect = this.nextEffect.bind(this);
    this.fx = {
        overlay: this.overlay.effect('opacity', {duration: 500}).hide(),
        center: this.center.effects({duration: 500, transition: Fx.Transitions.sineInOut, onComplete: nextEffect}),
        bottom: this.bottom.effect('margin-top', {duration: 400})
    };

},

click: function(link) {

        return this.open (link.href, link.title, link.rel);

},
open: function(sLinkHref, sLinkTitle, sLinkRel) {
    this.href = sLinkHref;
    this.title = sLinkTitle;
    this.rel = sLinkRel;
    this.position();
    this.setup();
    this.video(this.href);
    this.top = Window.getScrollTop() + (Window.getHeight() / 15);
    this.center.setStyles({top: this.top+'px', display: ''});
    this.fx.overlay.start(0.8);
    this.step = 1;
    this.center.setStyle('background','#fff url(loading.gif) no-repeat center');
    this.caption.innerHTML = this.title;
    this.fx.center.start({'height': [this.options.contentsHeight]});
},

setup: function(){
    var aDim = this.rel.match(/[0-9]+/g);
    this.options.contentsWidth = (aDim && (aDim[0] > 0)) ? aDim[0] : this.options.defaultWidth;
    this.options.contentsHeight = (aDim && (aDim[1] > 0)) ? aDim[1] : this.options.defaultHeight;

},

position: function(){
this.overlay.setStyles({'top': window.getScrollTop()+'px', 'height': window.getHeight()+'px'});
},

video: function(sLinkHref){
    if (sLinkHref.match(/youtube\.com\/watch/i)) {
  this.flash = true;
        var hRef = sLinkHref;
        var videoId = hRef.split('=');
        this.videoID = videoId[1];
        this.so = new SWFObject("http://www.youtube.com/v/"+this.videoID, "flvvideo", this.options.contentsWidth, this.options.contentsHeight, "0");
        this.so.addParam("wmode", "transparent");
    }
    else if (sLinkHref.match(/metacafe\.com\/watch/i)) {
  this.flash = true;
        var hRef = sLinkHref;
        var videoId = hRef.split('/');
        this.videoID = videoId[4];
        this.so = new SWFObject("http://www.metacafe.com/fplayer/"+this.videoID+"/.swf", "flvvideo", this.options.contentsWidth, this.options.contentsHeight, "0");
        this.so.addParam("wmode", "transparent");
    }
    else if (sLinkHref.match(/google\.com\/videoplay/i)) {
  this.flash = true;
        var hRef = sLinkHref;
        var videoId = hRef.split('=');
        this.videoID = videoId[1];
        this.so = new SWFObject("http://video.google.com/googleplayer.swf?docId="+this.videoID+"&hl=en", "flvvideo", this.options.contentsWidth, this.options.contentsHeight, "0");
        this.so.addParam("wmode", "transparent");
    }
    else if (sLinkHref.match(/ifilm\.com\/video/i)) {
      this.flash = true;
        var hRef = sLinkHref;
        var videoId = hRef.split('video/');
        this.videoID = videoId[1];
        this.so = new SWFObject("http://www.ifilm.com/efp", "flvvideo", this.options.contentsWidth, this.options.contentsHeight, "0", "#000");
        this.so.addVariable("flvbaseclip", this.videoID+"&");
        this.so.addParam("wmode", "transparent");
    }
    else if (sLinkHref.match(/\.mov/i)) {
      this.flash = false;
        if (navigator.plugins && navigator.plugins.length) {
      this.other ='<object id="qtboxMovie" type="video/quicktime" codebase="http://www.apple.com/qtactivex/qtplugin.cab" data="'+sLinkHref+'" width="'+this.options.contentsWidth+'" height="'+this.options.contentsHeight+'"><param name="src" value="'+sLinkHref+'" /><param name="scale" value="aspect" /><param name="controller" value="true" /><param name="autoplay" value="true" /><param name="bgcolor" value="#000000" /><param name="enablejavascript" value="true" /></object>';
  } else {
    this.other = '<object classid="clsid:02BF25D5-8C17-4B23-BC80-D3488ABDDC6B" codebase="http://www.apple.com/qtactivex/qtplugin.cab" width="'+this.options.contentsWidth+'" height="'+this.options.contentsHeight+'" id="qtboxMovie"><param name="src" value="'+sLinkHref+'" /><param name="scale" value="aspect" /><param name="controller" value="true" /><param name="autoplay" value="true" /><param name="bgcolor" value="#000000" /><param name="enablejavascript" value="true" /></object>';
  }
    }
    else if (sLinkHref.match(/\.wmv/i) || sLinkHref.match(/\.asx/i)) {
    this.flash = false;
     this.other = '<object NAME="Player" WIDTH="'+this.options.contentsWidth+'" HEIGHT="'+this.options.contentsHeight+'" align="left" hspace="0" type="application/x-oleobject" CLASSID="CLSID:6BF52A52-394A-11d3-B153-00C04F79FAA6"><param NAME="URL" VALUE="'+sLinkHref+'"><param><param NAME="AUTOSTART" VALUE="false"></param><param name="showControls" value="true"></param><embed WIDTH="'+this.options.contentsWidth+'" HEIGHT="'+this.options.contentsHeight+'" align="left" hspace="0" SRC="'+sLinkHref+'" TYPE="application/x-oleobject" AUTOSTART="false"></embed></object>'
    }
    else if (sLinkHref.match(/\.flv/i)) {
     this.flash = true;
     this.so = new SWFObject(this.options.flvplayer+"?file="+sLinkHref, "flvvideo", this.options.contentsWidth, this.options.contentsHeight, "0", "#000");
    }
    else {
      this.flash = true;
        this.videoID = sLinkHref;
        this.so = new SWFObject(this.videoID, "flvvideo", this.options.contentsWidth, this.options.contentsHeight, "0");
    }
},

nextEffect: function(){
    switch (this.step++){
    case 1:
        this.fx.center.start({'width': [this.options.contentsWidth], 'marginLeft': [this.options.contentsWidth/-2]});
        break;
        this.step++;
    case 2:
        this.center.setStyle('background','#fff');
        this.flash ? this.so.write(this.center) : this.center.setHTML(this.other) ;
        this.bottomContainer.setStyles({top: (this.top + this.center.clientHeight)+'px', height: '0px', marginLeft: this.center.style.marginLeft, width: this.options.contentsWidth+'px',display: ''});
        if (this.options.animateCaption){
            this.fx.bottom.set(-this.bottom.offsetHeight);
            this.bottomContainer.style.height = '';
            this.fx.bottom.start(0);
            break;
        }
        this.bottomContainer.style.height = '';
        this.step++;
    }
},

close: function(){
    this.fx.overlay.start(0);
    this.center.style.display = this.bottomContainer.style.display = 'none';
    this.center.innerHTML = '';
    return false;
}

};
window.addEvent('domready', Videobox.init.bind(Videobox)); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-09T06:30:27.430

您可以尝试以下方法：

```
$('a[rel=vidbox]').click(function () {

    if ($("#ubaPlayer").ubaPlayer("playing") === true) {
        $("#ubaPlayer").ubaPlayer("pause");
    }
    return false;
}); 
```

[在这里](http://jsfiddle.net/HM8m7/)拉小提琴。

一点建议；如果您使用 mootools 来单独使用 Videobox，那么您应该考虑切换到 jQuery 灯箱。Videobox 在自定义和回调支持方面似乎非常有限（查看它的源代码）。Fancybox 和 Colorbox (jQuery) 等插件提供了更大的灵活性。

# javascript - 使用 + 和 | 的区别 JavaScript 中的运算符？

> ID：15307667
> 
> 赞同：1
> 
> 时间：2013-03-09T05:45:22.933
> 
> 标签：javascript, performance, operators

我正在研究 AngularJS 框架。我发现他们正在使用`|`运算符来添加内容。`+`使用运算符和运算符时有什么区别`|`？

跟性能有关系吗？如果有怎么办？

这是要求的代码：-

```
var manualLowercase = function(s) {
    return isString(s)
        ? s.replace(/[A-Z]/g, function(ch) {
            return String.fromCharCode(ch.charCodeAt(0) | 32);
    }): s;
}; 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-09T05:48:21.243

他们是不同的运营商。

where `x`and `y`are numbers ² ,`x | y`是按[位 or](https://developer.mozilla.org/en-US/docs/JavaScript/Reference/Operators/Bitwise_Operators)和`x + y`是加法。对于 的*某些*值，`x`它们`y`将具有相同的结果 - 对于其他所有值，结果将不同³。

无论如何，请使用表示所需内容的形式¹。除非有性能案例，否则不要担心性能 - [jsperf](http://jsperf.com/)是一个方便的工具。然后意识到微基准和固有的偏见[*通常无关紧要*](http://en.wikipedia.org/wiki/Program_optimization#When_to_optimize)。

* * *

¹对于这个*特定*问题，请注意正则表达式匹配每个 AZ 字符并将其替换为函数的结果。

因此我们知道这`charCodeAt(0)`是 A..Z 的字符代码。查看[字符表](http://www.asciitable.com/)，我们可以看到这些值在 [0x41, 0x5a] 范围内，注意 [0x61, 0x7a] 是对应的小写字母。因此，我们可以通过将 0x20（或 32）添加到大写字母的字符代码来执行 { A, B .. Z } -> { a, b .. z }。

还可以观察到，将 32（或 1 << 5）添加到*没有*第 5 位集的数字（例如范围 [0x41, 0x5a] 中的数字）可以通过逐位或 1 << 5 来实现（即 x | 32）。这就是为什么*在这里*`|`可以`+`互换。添加 32（即 x + 0x20）可以说更清楚，即使两个运算符在上述规则下表现相同。

 *在任何情况下，如果对任何一种方法的性能影响感到好奇，请在相关/目标环境中对代码*的整体*（和*上下文）进行基准测试。*

* * *

²运算符`x | y`始终*是*按位或（通过`[ToInt]`转换），但`x + y` *可以*是字符串连接。

³*仅当* `x`和`y`都是数字（或者更确切地说，两者都不是字符串），可以通过 转换`[ToInt]`，*没有*共同的设置位，并且在大约 [0, 2^32) 左右的范围内时，结果才会相同.

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-03-09T05:49:59.447

`+`是加法运算符，`|`是位运算符。但是因为您说“这与性能有关吗？” 所以我认为你的方法在以下两个之间更好：

```
x = 0 | '5'; 
```

或者

```
x = + '5'; 
```

根据[算术运算符的 MDN 页面：](https://developer.mozilla.org/en-US/docs/JavaScript/Reference/Operators/Arithmetic_Operators#-_.28Unary_Negation.29)

> 一元加法是将某物转换为数字的最快和首选方法

此外，请在此处阅读对[我的回答的](https://stackoverflow.com/questions/15129137/what-does-mean-in-javascript/15129174#15129174)评论，某些浏览器的性能会更好`|`。

另请阅读[wiki：*按位运算*](http://en.wikipedia.org/wiki/Bitwise_operation)

> 在简单的低成本处理器上，**按位运算**通常比除法快得多，比乘法快几倍，有时比加法快得多

这是一个[有趣的链接'jsperf'](http://jsperf.com/strtoint)。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-09T06:13:46.720

我刚开始学习javascript。到目前为止，我听说过用于添加两个字符串值或两个值的“+”运算符。如果您添加一个数字和字符串，那么它将仅提供字符串结果。如果你提供两个数字，那么我给出两个数字相加的结果。

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2013-03-09T05:56:16.087

在二进制变量中操作时，我们可以使用**or(|)**代替**plus(+)**运算符。它将给出相同的结果。您可能想了解二进制算术。只是谷歌，你会偶然发现可能很好的搜索。*

# java - java编译错误：-Xlint导致问题

> ID：15307668
> 
> 赞同：-1
> 
> 时间：2013-03-09T05:45:24.477
> 
> 标签：java, netbeans, compiler-errors

基本上，有 2 个框架：“StartUpFrame”和“ActivityScreen” StartUpFrame 是使用纯**Netbeans GUI**制作的，而 ActivityScreen 是通过**没有任何 Netbeans GUI 的编码**制作的。

在 StartUpFrame 上，当我按下“活动列表”按钮时，它应该将框架切换到 ActivityScreen，这应该是一个非常简单的操作。

但是，当我自己编译 ActivityScreen 时，它给了我一些类似于以下内容的警告：

“*注意：F:\Java\Lab 8\Lab8.java 使用未经检查或不安全的操作。注意：使用 -Xlint:unchecked 重新编译以获取详细信息。* ”，但文件仍然编译。

而当我尝试编译 StartUpFrame 时，错误似乎是导致按钮操作出现问题，无法正确调用类

我只是无法弄清楚问题是什么。

**StartUpFrame.java**

```
 import java.awt.*;
import java.awt.event.*;
import javax.swing.*;

public class StartUpFrame extends JFrame
{

    //Creates new form StartUpFrame
    public StartUpFrame() 
    {
        initComponents();
    }

    /**
     * This method is called from within the constructor to initialize the form.
     */
    @SuppressWarnings("unchecked")
    // <editor-fold defaultstate="collapsed" desc="Generated Code">//GEN-BEGIN:initComponents
    private void initComponents() {

        title = new javax.swing.JLabel();
        btnActivities = new javax.swing.JButton();
        ButtonExit = new javax.swing.JButton();
        btnStudents = new javax.swing.JButton();

        setDefaultCloseOperation(javax.swing.WindowConstants.EXIT_ON_CLOSE);

        title.setFont(new java.awt.Font("Arial", 0, 48)); // NOI18N
        title.setText("ASA Magement Program");

        btnActivities.setFont(new java.awt.Font("Arial", 0, 24)); // NOI18N
        btnActivities.setText("List of Activities");
        btnActivities.addActionListener(new java.awt.event.ActionListener() {
            public void actionPerformed(java.awt.event.ActionEvent evt) {
                btnActivitiesActionPerformed(evt);
            }
        });

        ButtonExit.setFont(new java.awt.Font("Arial", 0, 14)); // NOI18N
        ButtonExit.setText("Exit");
        ButtonExit.addActionListener(new java.awt.event.ActionListener() {
            public void actionPerformed(java.awt.event.ActionEvent evt) {
                ButtonExitActionPerformed(evt);
            }
        });

        btnStudents.setFont(new java.awt.Font("Arial", 0, 24)); // NOI18N
        btnStudents.setText("List of All Students");
        btnStudents.addActionListener(new java.awt.event.ActionListener() {
            public void actionPerformed(java.awt.event.ActionEvent evt) {
                btnStudentsActionPerformed(evt);
            }
        });

        javax.swing.GroupLayout layout = new javax.swing.GroupLayout(getContentPane());
        getContentPane().setLayout(layout);
        layout.setHorizontalGroup(
            layout.createParallelGroup(javax.swing.GroupLayout.Alignment.LEADING)
            .addGroup(layout.createSequentialGroup()
                .addContainerGap(233, Short.MAX_VALUE)
                .addComponent(btnActivities)
                .addGap(232, 232, 232))
            .addGroup(layout.createSequentialGroup()
                .addGroup(layout.createParallelGroup(javax.swing.GroupLayout.Alignment.LEADING)
                    .addGroup(layout.createSequentialGroup()
                        .addGap(62, 62, 62)
                        .addComponent(title))
                    .addGroup(layout.createSequentialGroup()
                        .addGap(213, 213, 213)
                        .addComponent(btnStudents)))
                .addGap(0, 0, Short.MAX_VALUE))
            .addGroup(layout.createSequentialGroup()
                .addGap(258, 258, 258)
                .addComponent(ButtonExit, javax.swing.GroupLayout.PREFERRED_SIZE, 120, javax.swing.GroupLayout.PREFERRED_SIZE)
                .addContainerGap(javax.swing.GroupLayout.DEFAULT_SIZE, Short.MAX_VALUE))
        );
        layout.setVerticalGroup(
            layout.createParallelGroup(javax.swing.GroupLayout.Alignment.LEADING)
            .addGroup(layout.createSequentialGroup()
                .addContainerGap()
                .addComponent(title)
                .addGap(103, 103, 103)
                .addComponent(btnActivities)
                .addGap(61, 61, 61)
                .addComponent(btnStudents)
                .addPreferredGap(javax.swing.LayoutStyle.ComponentPlacement.RELATED, 110, Short.MAX_VALUE)
                .addComponent(ButtonExit, javax.swing.GroupLayout.PREFERRED_SIZE, 40, javax.swing.GroupLayout.PREFERRED_SIZE)
                .addContainerGap())
        );

        pack();
        setLocationRelativeTo(null);
    }// </editor-fold>//GEN-END:initComponents

    private void ButtonExitActionPerformed(java.awt.event.ActionEvent evt) {//GEN-FIRST:event_ButtonExitActionPerformed
        System.exit(0);
    }//GEN-LAST:event_ButtonExitActionPerformed

    private void btnActivitiesActionPerformed(java.awt.event.ActionEvent evt) {//GEN-FIRST:event_btnActivitiesActionPerformed

                ActivityScreen AS = new ActivityScreen();
                AS.setVisible(true);
                setVisible(false);

    }//GEN-LAST:event_btnActivitiesActionPerformed

    private void btnStudentsActionPerformed(java.awt.event.ActionEvent evt) {//GEN-FIRST:event_btnStudentsActionPerformed

            StudentScreen SS = new StudentScreen();
            SS.setVisible(true);
            setVisible(false);

    }//GEN-LAST:event_btnStudentsActionPerformed

//the command line arguments
    public static void main(String args[]) 
    {
    // Create and display the form
        java.awt.EventQueue.invokeLater(new Runnable() 
        {
            public void run()
            {
                new StartUpFrame().setVisible(true);
            }
        });
    }

    //note to self: NEED TO REMOVE "JAVAX.SWING."
    // Variables declaration - do not modify//GEN-BEGIN:variables
    private javax.swing.JButton ButtonExit;
    private javax.swing.JButton btnActivities;
    private javax.swing.JButton btnStudents;
    private javax.swing.JLabel title;
    // End of variables declaration//GEN-END:variables
} 
```

**ActivityScreen.java**

```
 import java.io.*;
    import java.util.*;
    import java.util.List;
    import javax.swing.JTable;
    import javax.swing.*;
    import java.awt.*;
    import java.awt.Component;
    import java.awt.Container;
    import javax.swing.BoxLayout;
    import javax.swing.JButton;
    import java.awt.event.ActionEvent;
        import java.awt.event.ActionListener;

    class MyFrame extends javax.swing.JFrame
    {

     //Object[][] cell_value = {  {"Sunday","Activity1","Activity2","Activity3"},  {"Monday","Activity4","Activity5","Activity6"},  {"Tuesday","Activity7","Activity8",""}};
     Object[][] cell_value = new Object[0][5];

     //String ColName[] = { "Title1", "Title2", "Title3", "Title4"};
       String ColName[] = new String [5];

     MyFrame()
     {
        try{ 
                String s = "";
                int n = 0;
                int m = 0;
                int rowcount = 0;
                BufferedReader in = new BufferedReader(new FileReader("Days.dat"));

                List list = Collections.synchronizedList(new LinkedList());
                while ( (s = in.readLine()) != null ) { 
                    if(!s.equals(""))
                    {
                        //System.out.println(s); 
                        list.add(s);
                        if(s.equals("Sunday")) { ColName[0]=s; }
                        else if(s.equals("Monday")) { ColName[1]=s; }
                        else if(s.equals("Tuesday")) { ColName[2]=s; }
                                            else if(s.equals("Wednesday")) { ColName[3]=s; }
                                            else if(s.equals("Thursday")) { ColName[4]=s; }
                        else {rowcount ++;}
                    }
                } 
                in.close(); 

            cell_value = new Object[rowcount][5];
                    for(int i = 0

    ; i< list.size();i++)
                {
                    if(list.get(i).equals("Sunday")) 
                    { n=0; m=0; }
                    else if(list.get(i).equals("Monday")) 
                    { n=1; m=0; }
                    else if(list.get(i).equals("Tuesday")) 
                    { n=2; m=0; }
                                    else if(list.get(i).equals("Wednesday")) 
                    { n=3; m=0; }
                                    else if(list.get(i).equals("Thursday")) 
                    { n=4; m=0; }
                    else 
                    { 
                        cell_value[m][n]=list.get(i);
                        m++;
                    }

                }

        } catch (IOException e) { 
            e.printStackTrace(); 
        }  

        Container contentPane = this.getContentPane();
        setTitle("Activity Screen");
        setSize(1000, 500);    

        JTable table = new JTable(cell_value, ColName);

          JLabel lblTitle = new JLabel("Activities");
          lblTitle.setFont(new java.awt.Font("Arial", 1, 24));

          JButton btnSave = new JButton("Save");
          JButton btnView = new JButton("View");
          JButton btnAdd = new JButton("Add");
          JButton btnRemove = new JButton("Remove");
          JButton btnBack = new JButton("Back");

          btnBack.addActionListener(new ActionListener() {

                public void actionPerformed(ActionEvent e)
                {
                    //Execute when button is pressed
                    StartUpFrame SUF = new StartUpFrame();
                    SUF.setVisible(true);
                    setVisible(false);
                }
            });  

           btnView.addActionListener(new ActionListener() {

            public void actionPerformed(ActionEvent e)
            {
             ViewActivity VA = new ViewActivity();
             VA.setVisible(true);
            }
        });  

        btnAdd.addActionListener(new ActionListener() {

            public void actionPerformed(ActionEvent e)
            {
             AddActivity AA = new AddActivity();
             AA.setVisible(true);
            }
        });  

      //Lay out the label and scroll pane from top to bottom.
      contentPane.add(lblTitle, BorderLayout.PAGE_START);

      contentPane.setLayout(new BoxLayout(contentPane, BoxLayout.Y_AXIS));
      table.setAlignmentX(Component.CENTER_ALIGNMENT);
      contentPane.add(Box.createRigidArea(new Dimension(0,20)));
      contentPane.add(table);
      add(new JScrollPane(table));

      //Lay out the buttons from left to right.
      JPanel buttonPane = new JPanel();
      buttonPane.setLayout(new BoxLayout(buttonPane, BoxLayout.LINE_AXIS));

      buttonPane.add(Box.createHorizontalGlue());
      buttonPane.add(btnSave);
      buttonPane.add(Box.createRigidArea(new Dimension(10, 0)));
      buttonPane.add(btnView);
      buttonPane.add(Box.createRigidArea(new Dimension(10, 0)));
      buttonPane.add(btnAdd);
      buttonPane.add(Box.createRigidArea(new Dimension(10, 0)));
      buttonPane.add(btnRemove);
      buttonPane.add(Box.createRigidArea(new Dimension(10, 0)));
      buttonPane.add(btnBack);

      contentPane.add(buttonPane, BorderLayout.PAGE_END);

      setVisible(true);
      setDefaultCloseOperation(EXIT_ON_CLOSE);
      table.setCellSelectionEnabled(true);

 }  

}

class ActivityScreen
{
 public static void main(String[] args)
 {
   new MyFrame();
 }
} 
```

**days.dat 文件**

```
Sunday
Advanced Open Water Dive Certificate
Sailing
Generation Next

Monday
Helping Hands
Beach Touch Rugby
Running Club
Yoga Club
Tennis Lessons

Tuesday
Recycling Club
Best Buddies
Crochet Club
Movie Club
Shooting Club

Wednesday
Table Tennis
Modern Dance
Contemporary Dance
Gavel Club

Thursday
Cooking
Gym Training 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-09T05:56:16.430

你`LinkedList`是字符串。`LinkedList<String>`如果您没有错误地将另一个类对象放入您的`LinkedList`. 或`@SuppressWarnings("unchecked")`在未检查操作的方法之前添加。

# c++ - 表达式：字符串下标超出范围

> ID：15307670
> 
> 赞同：0
> 
> 时间：2013-03-09T05:45:46.720
> 
> 标签：c++

每当我运行我的代码时，我都会收到一条错误消息，指出我的字符串下标超出范围（错误消息是标题）。我希望它来自使用“计数器”来计算城市总数和平均人口。我该如何解决这个问题？我尝试过其他方法来计算它，但都没有奏效。

```
void cities( istream& in, ostream& out )
{
    ifstream ("cities.txt");
    string country, city, city2, state, lat, longi;
    int pop;
    int currentPop = 0;
    int smallestPop = 0;
    int largestPop = 0;
    int counter = 0;
    int sum = 0;
    int i = 0;
    int average = 0;
    string largestCity;
    string smallestCity;
    string population;

    readLineOfData(in, country, city, city2, state, pop, lat, longi);
    while(!in.fail())
    {
        counter++;
        output( out, country, city, city2, state, pop, lat, longi );

        readLineOfData(in, country, city, city2, state, pop, lat, longi);

        population[counter] = pop;

        if (pop < smallestPop || smallestPop == 0)
        {
            smallestPop = pop;
            smallestCity = city2;
        }

        if (pop > largestPop || largestPop == 0)
        {
            largestPop = pop;
            largestCity = city2;
        }

        for (int i = 0; i<counter; i++)
        {
            sum += population[i];
            average = sum/counter;
        }
    }

        out << "Smallest City: " << smallestCity << endl;
        out << "Population: " << smallestPop << endl;
        out << endl;
        out << "Largest City: " << largestCity << endl;
        out << "Largest Population: " << largestPop << endl;
        out << endl;
        out << "Total Cities: " << i << endl;
        out << "Average Population: " << average << endl;
    return;
}

void readLineOfData( istream& in, string &country,  string &city, string &city2, 
    string &state, int &pop, string &lat, string &longi)
{
    getline( in, country, ',');
    getline( in, city, ',');
    getline( in, city2, ',');
    getline( in, state, ',');
    in >> pop;
    in.ignore( 200, ',' );
    getline( in, lat, ',');
    getline( in, longi, '\n' );

}

void output( ostream& out, string country, string city, string city2,
    string state, int pop, string lat, string longi )
{
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-09T05:52:11.323

宣言

```
string population; 
```

表示这`population`是一个字符代码序列，但您将其视为一个数字序列：

```
population[counter] = pop; 
```

此时它的大小也是 0，因此索引只会出错或给出未定义的行为。

相反，声明`population`为 a`std::vector`并使用

```
population.push_back( pop ); 
```

# xcode - Xcode如何从文档文件夹中检索文件并在另一个应用程序中打开它

> ID：15307672
> 
> 赞同：1
> 
> 时间：2013-03-09T05:46:36.543
> 
> 标签：xcode, file

我想获取应用程序的文档文件夹中的文件，并显示一些询问您要在哪个应用程序中打开文件的内容。就像在邮件中一样，您打开 PDF（或任何文件）在右上角有一个按钮，它是一个带有箭头的矩形。喜欢[https://www.google.co.nz/search?q=ipad+pdf+in+mail&oe=UTF-8&hl=es&client=safari&um=1&ie=UTF-8&tbm=isch&source=og&sa=N&tab=wi&ei=Kcw6UYOWBamOygHXwIGIDw&biw=1024&bih =672&sei=K8w6UcCKKMPmygH8zIHYCQ#biv=i%7C5%3Bd%7CEH2RwCFWjmcvjM%3A](https://www.google.co.nz/search?q=ipad+pdf+in+mail&oe=UTF-8&hl=es&client=safari&um=1&ie=UTF-8&tbm=isch&source=og&sa=N&tab=wi&ei=Kcw6UYOWBamOygHXwIGIDw&biw=1024&bih=672&sei=K8w6UcCKKMPmygH8zIHYCQ#biv=i%7C5%3Bd%7CEH2RwCFWjmcvjM%3A)但它的 iOS 6 版本（它的应用程序图标在名称上方和 3x3 网格中）。当用户单击该图标时，它应该转到该应用程序，该应用程序将对文件执行任何操作

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-09T05:52:39.567

听起来您正在寻找的是[UIDocumentInteractionController](https://developer.apple.com/library/ios/#documentation/UIKit/Reference/UIDocumentInteractionController_class/Reference/Reference.html)提供的功能。

在 iPad 上看起来像这样：

![活动视图控制器](../Images/201c8418c46f72f82693f2202b1b30c6.png)

您可以使用[`[UIDocumentInteractionController interactionControllerWithURL: ]`](https://developer.apple.com/library/ios/documentation/UIKit/Reference/UIDocumentInteractionController_class/Reference/Reference.html#//apple_ref/occ/clm/UIDocumentInteractionController/interactionControllerWithURL:)（将 URL 传递给文件）进行设置，然后通过[`[UIDocumentInteractionController presentOpenInMenuFromRect:inView:animated:]`](http://developer.apple.com/library/ios/documentation/UIKit/Reference/UIDocumentInteractionController_class/Reference/Reference.html#//apple_ref/occ/instm/UIDocumentInteractionController/presentOpenInMenuFromRect:inView:animated:).

# ios - iOS - 使用 NSTimer 调度后台任务是否仍受 Apple 限制？

> ID：15307674
> 
> 赞同：1
> 
> 时间：2013-03-09T05:46:47.153
> 
> 标签：ios, background, nstimer

我知道我在拉稻草，但希望得到答案。

我有一个应用程序需要在后台与服务器通信，无需用户干预。当推送通知到达时或至少定期（每 5 分钟左右）。

我可能会附加位置更新并将其发送到服务器。我什至可以证明使用粗略的位置是合理的，因此 Apple 会批准它。在最坏的情况下，我将支付 299 美元购买企业开发者许可证并使用本地发行版（我唯一关心的发行版）。

**我最后的希望是使用 NSTimer 定期调度后台任务。** 使用此方法的应用程序是否仍受 Apple 对允许的后台任务类型的限制？（媒体/位置/网络电话/报亭/外部设备）这似乎是如此歧视......

PS。该应用程序现在在 ipod touch 上以开发模式运行，包括与服务器的定期通信。就后台模式而言，我没有在 plist 中声明任何内容。这是否意味着我没事？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-09T06:08:47.080

我已经实施了以下内容，并于昨天获得了苹果的批准。我的应用程序不执行（媒体/位置/voip/报亭/外部设备）

通过在 applicationDidEnterBackground 中使用以下代码，您可以获得 600 秒（10 分钟）的最大时间：

```
if ([[UIDevice currentDevice] respondsToSelector:@selector(isMultitaskingSupported)]) { //Check if our iOS version supports multitasking I.E iOS 4
if ([[UIDevice currentDevice] isMultitaskingSupported]) { //Check if device supports mulitasking
UIApplication *application = [UIApplication sharedApplication]; //Get the shared application instance
__block UIBackgroundTaskIdentifier background_task; //Create a task object
background_task = [application beginBackgroundTaskWithExpirationHandler: ^ {
    [application endBackgroundTask: background_task]; //Tell the system that we are done with the tasks
    background_task = UIBackgroundTaskInvalid; //Set the task to be invalid
    //System will be shutting down the app at any point in time now
}];
//Background tasks require you to use asyncrous tasks
dispatch_async(dispatch_get_global_queue(DISPATCH_QUEUE_PRIORITY_DEFAULT, 0), ^{
    //Perform your tasks that your application requires
    NSLog(@"\n\nRunning in the background!\n\n");
    [application endBackgroundTask: background_task]; //End the task so the system knows that you are done with what you need to perform
    background_task = UIBackgroundTaskInvalid; //Invalidate the background_task
});
}

} 
```

文档可以在这里找到[http://disanji.net/iOS_Doc/#documentation/iPhone/Conceptual/iPhoneOSProgrammingGuide/BackgroundExecution/BackgroundExecution.html](http://disanji.net/iOS_Doc/#documentation/iPhone/Conceptual/iPhoneOSProgrammingGuide/BackgroundExecution/BackgroundExecution.html)

我刚刚实现了 backgroundTaskIdentifier 对象并使 background_task 无效以检查时间，应用程序处于活动状态并且正在运行 600 秒。你甚至可以使用这个来获得剩余时间

```
NSLog(@"Time remaining: %f", application.backgroundTimeRemaining); 
```

# html - 当页面为全尺寸时，div 的宽度为 100%，但当页面尺寸减小时宽度减小

> ID：15307685
> 
> 赞同：1
> 
> 时间：2013-03-09T05:48:46.577
> 
> 标签：html, css

我有一个带有背景图像的 div，当页面为全尺寸时，它的宽度为 100%。像这样：

![在此处输入图像描述](../Images/a138fe348d460a7e1ad2e6fb7c3a0f73.png)

调整页面大小时，宽度会减小。像这样：

![在此处输入图像描述](../Images/76e8ab6baf9b24e2b16cee0b5fbbfc3a.png)

**我的 HTML：**

```
<section>
  <div class="links">
    <div class="links_area">
      <ul id="menu">
        //html goes here      
      </ul>
    </div>
  </div>
</section> 
```

**我的 CSS：**

```
div {
display: block;
}
section { clear:both;display: block;}
.links{background:url(../images/links_bg.gif) repeat-x; width:100%; height:37px;}
.links_area{width:1003px; height:37px; margin:0 auto; }
ul#menu {  float: right;  height:auto;  margin: 0 0; width: 796px;}
ul#menu li {display:inline;}
ul#menu li a {display:block; float:left; background-position:0 0; color:#FFFFFF; text-decoration:none; font-family:Tahoma, Geneva, sans-serif; font-weight:bold; font-size:13px; padding:12px 10px 10px 4px; border-right:none;} 
```

我无法弄清楚为什么会这样。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-09T05:55:01.917

这条规则：

```
.links_area{width:1003px; height:37px; margin:0 auto; } 
```

给那个 div 一个固定的宽度，但是由于下一个规则浮动`#menu`，

```
ul#menu {  float: right;  height:auto;  margin: 0 0; width: 796px;} 
```

div 不**包含**它，因此它 ( `#menu`) 在窗口调整大小时调整大小。尝试添加`overflow:auto;`到`.links_area`规则中。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-09T09:09:45.707

在你的 UL 放一个 div 之后 `<div style="clear:both; float:none"></div>.`

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-09T05:56:34.330

您可以尝试提供`100%`width in`.links_area`而不是`width:1003px`.

尝试这个 ：

```
.links_area{width:100%;} 
```

# ios - iOS：如何让 UIToolbar（我添加到 UIWebView.scrollView）不离开屏幕？

> ID：15307686
> 
> 赞同：0
> 
> 时间：2013-03-09T05:48:58.353
> 
> 标签：ios, uiwebview, safari, uitoolbar

希望我能清楚地解释这一点。我有一个 UIWebView 并且我在它的 scrollView 中添加了一个 UIToolbar （另一个作品`[webView.scrollView addSubview:myToolbar];`）。所以一切都很好而且花花公子，直到我尝试捏缩放，当工具栏停留在屏幕的角落时，所以基本上它不会停留在中间。如果您还没有猜到，我正在尝试复制 safari 的行为。我需要让 UIToolbar 不受捏合手势的影响。关于如何做到这一点的任何想法？我读过其他帖子，但似乎并没有真正给出答案。任何帮助表示赞赏:)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-09T10:08:03.283

你必须创建一个父 UIView，比如说`rootV`，你`myToolbar`在顶部嵌入，然后`webView`.

这会阻止捏合影响`myToolbar`，但是这会使其粘在顶部，并且在用户垂直滚动时不会超出屏幕`myWebView`。

要获得与 Safari 相同的行为，您必须检查 中的垂直滚动`myWebView`，并根据它向上或向下扩展`rootV`. 假设您固定了高度`myToolbar`但`webView`填充了其余部分，它应该可以工作。

# c - 程序跳过输入和无故崩溃

> ID：15307690
> 
> 赞同：0
> 
> 时间：2013-03-09T05:49:14.547
> 
> 标签：c, function, codeblocks

好的，所以如果修复它并且我可以展示它（我正在使用 codebloks btw），在 getinfo 函数中输入年龄后它会打印语句以获取性别，然后打印语句以获取其他人的姓名而不让我输入（它似乎跳过那部分），如果我选择继续它会崩溃

```
#include <stdio.h>
#include <string.h>
#include <stdlib.h>

void getinfo (char* nam[],int ag[], char gender[], int count){
    int y;
    for(y = 0; y < count; y++){
        nam[y] = malloc(30);
        printf ("What is the student's name?\t");
        scanf ("%s", &nam[y]);
        printf ("\nWhat is the students age?\t");
        scanf ("%d", &ag[y]);
        printf ("\nwhat is the students gender, M/F:\t");
        scanf ("%c", &gender[y]);
    }
}

void findeldest (char* nam[],int ag[], char* gender[], int count){
    int largest = 0, y, eldest =0 ;
    for(y = 0; y < count; y++){
       if (ag[y] > eldest){
           largest = ag[y];
           eldest = y;
       }
    }
    printf ("The eldest student is:\t%s", nam[eldest]);
    printf ("\nGender:\t%c", gender[eldest]);
    printf ("\nWith an age of:\t%d", ag[eldest]);
}

int main (){
    int amount, y;
    printf("How many students are you admitting?\t");
    scanf ("%d", &amount);

    if (amount > 50){
        printf("Too many students!");
    }else{
        char *name[50];
        int age[50];
        char gender[50];
        getinfo(name, age, gender, amount);
        findeldest(name, age, gender, amount);
        system("pause");
    }
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-09T06:18:55.027

在from of`getinfo()`函数中是错误的：`&``nam`

```
scanf ("%s", &nam[y]);
             ^  remove it not need 
```

喜欢

```
scanf ("%s", nam[y]); 
```

下一个：第三个参数`findeldest()`应该是`char`

```
void findeldest (char* nam[],int ag[], char* gender[], int count)
                                           ^ remove * 
```

喜欢

```
void findeldest (char* nam[],int ag[], char gender[], int count) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-09T05:59:02.637

代替

```
scanf ("%c", &gender[y]); 
```

和

```
scanf (" %c", &gender[y]); 
```

此外，findeldest 的参数不正确。改变

```
void findeldest (char* nam[],int ag[], char* gender[], int count){ 
```

至

```
void findeldest (char* nam[],int ag[], char gender[], int count){ 
```

**编辑** 更改

```
scanf ("%s", &nam[y]); 
```

至

```
scanf ("%s", nam[y]); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-09T06:56:23.917

您必须进行以下更改：

**1：改变：**

```
void findeldest (char* nam[],int ag[], char* gender[], int count) 
```

至

```
void findeldest (char* nam[],int ag[], char gender[], int count) 
```

**2：改变：**

```
scanf ("%s", &nam[y]); 
```

至

```
scanf ("%s", nam[y]); 
```

**3：改变：**

```
scanf ("%c", &gender[y]); 
```

至

```
scanf ("%c%*c", &gender[y]); 
```

*虽然使用 getch() 更好。*

**4：空闲分配内存：**

在 system("pause"); 之前添加此代码

```
for( int i = 0 ; i < amount ; i++ )
    free( name[i] ); 
```

*添加int i; 字符后性别[50]；如果编译为 c 源代码。*

# ios - 如何提交通用申请

> ID：15307693
> 
> 赞同：-1
> 
> 时间：2013-03-09T05:49:32.580
> 
> 标签：ios, app-store, ios-universal-app

最近，我的第一个 iPhone 应用程序获得批准。我决定将它转换为通用应用程序，因为它是一个基本应用程序，所以我很容易做到了。我今天会重新提交应用程序，但我对这个过程有些担忧。

想法1）在itunesconnect上创建一个新应用程序。但是，我的应用程序的当前用户不会收到更新通知，并且会有 2 个不同的应用程序。所以这个想法听起来很愚蠢

想法 2）创建我当前应用程序的新**版本**，这对于应用程序的 iPhone 端看起来不错。但是，我没有任何 iPad 应用程序。为不存在的 iPad 应用程序定义新版本听起来很奇怪。

如果我错了，请纠正我。据我所知，必须在真实设备上调试应用程序才能提交 .app 文件。在我的情况下 - 通用应用程序，我是否必须在 iPhone 和 iPad 上测试应用程序？

我真的不知道我该怎么办。请分享你的想法。提前致谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-09T06:06:08.007

理想情况下，您应该在 iPhone 和 iPad 上测试您的通用设备。如果您没有 iPad 而只是 iPhone，那么如果它在 iPhone 和 iPad 模拟器上运行良好，那么您应该没问题。但仍有可能存在隐藏问题。如果不在真实 iPad 上进行测试，您可能会遇到的一个问题是，由于文件名区分大小写，确保所有 iPad 特定图像和 xib 文件实际上都可以在真实设备上运行。但是您只能在您实际拥有的设备上进行测试。

在提交应用程序之前，您无需在任何设备上进行测试。Apple 无法知道您是否这样做。当然，仅使用模拟器进行测试是一个非常糟糕的主意，因为存在很多差异。

至于提交应用程序，您必须使用想法 2。在 iTunes Connect 中创建对现有应用程序的更新。提交二进制文件。它将被检测为通用应用程序。然后，您可以使用新的 iPhone 屏幕截图和 iPad 屏幕截图更新元数据。

# php - 如何安全地从网站上删除 php 代码？

> ID：15307699
> 
> 赞同：2
> 
> 时间：2013-03-09T05:49:53.950
> 
> 标签：php

我远不是一个编码员，所以我可能完全错了，但被告知 StackOverflow 是提出这类问题的地方。

大约 6 个月前，我有一个开发人员为我创建了一个网站，并且正在检查一些代码，并在几周前的配置文件中找到了这个：

```
$config['site']['is_admin_settings_enabled'] = true;

if ($_SERVER['HTTP_HOST'] == 'dummysite.com' && !in_array($_SERVER['REMOTE_ADDR'], array('234.42.424.22', '353.234.22.22', '42.43.553.34', '235.2.233.2', '523.244.22.3'))) {
    $config['site']['is_admin_settings_enabled'] = false;
    $config['site']['admin_demomode_updation_not_allowed_array'] = array(
        'pages/admin_edit',
        'pages/admin_delete',
        'users/admin_change_password',
        'users/admin_send_mail',
    );
} 
```

我无法与为我创建网站的自由职业者取得联系，但这看起来像是对他网站的某种回调。现在我通常会再等几周再公开发布这样的问题，但他的域名将在三天后到期，我担心如果这是某种类型的回调或许可，他已内置在脚本中，那么它可能会导致我当他的域到期时，网站停止工作。

有什么方法可以安全地删除它或使其不被调用他的域/IP？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-09T05:54:30.643

即将到期的域名不会影响您的网站，但最好了解他究竟实施了什么并确保您的网站没有“后门”！

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-09T05:53:22.557

这看起来像是一个允许执行管理职责的 IP 地址白名单。根据那段代码，看起来没有任何东西会突然停止工作，只是只有某些 IP 地址才能拥有管理员权限。

# php - 自定义函数从 mysql 查询中检索结果然后显示

> ID：15307700
> 
> 赞同：1
> 
> 时间：2013-03-09T05:49:56.120
> 
> 标签：php, mysql

所以我决定将我自己的函数添加到我的 php 代码中，让它更简洁一些。我想创建一个执行 SELECT 查询并在数组中返回结果的函数。然后我希望能够查看返回的结果。这是我当前的代码：

显示：

```
 $db = new Database("simplysql");
    $results = $db->fetchResults("SELECT * FROM users");

    ?> 
```

获取：

```
public function fetchResults($query) {
    $q = mysql_query($query);
    return mysql_fetch_assoc($q);
} 
```

我尝试过使用 foreach 循环，但效果不佳。它输出了 4 次结果。

Foreach 代码：

```
 foreach($results as $key=>$value) {
        print_r($results);
    } 
```

此代码输出：

```
Array ( [id] => 1 [username] => root [password] => fc55917140c009fb20ed194b6a568fa2c7493071 [email] => duncanrp15@live.com ) 
Array ( [id] => 1 [username] => root [password] => fc55917140c009fb20ed194b6a568fa2c7493071 [email] => duncanrp15@live.com ) 
Array ( [id] => 1 [username] => root [password] => fc55917140c009fb20ed194b6a568fa2c7493071 [email] => duncanrp15@live.com ) 
Array ( [id] => 1 [username] => root [password] => fc55917140c009fb20ed194b6a568fa2c7493071 [email] => duncanrp15@live.com ) 
```

虽然只有一张唱片。

有什么建议么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-09T05:58:35.350

@邓肯。您可以更改功能代码以`while loop`获取`array of associative records`

```
function fetchResults() {
    $q = mysql_query($query);

    while($row = mysql_fetch_assoc($q)) {
     $resultrecord[] = $row;
    }
   return $resultRecord;
} 
```

它将返回您的记录数组..

# python - 接龙蟒

> ID：15307709
> 
> 赞同：0
> 
> 时间：2013-03-09T05:50:59.507
> 
> 标签：python

我这里有将卡片从牌堆移动到基础堆的代码。我已经导入了必要的细节等。我的问题是，它太长了。有什么办法可以让它变短吗？如何？谢谢 ：）

```
def dtof():
    suit = raw_input("enter suit: ")
    v = trash.pop()
    if suit == "D":
        if card.suitNumber[v.suit] == 1:
            if card.rankNumber[v.rank] == 0:
                Diamond.append(v)
            elif card.rankNumber[v.rank] == card.rankNumber[Diamond[-1].rank] + 1:
                Diamond.append(v)
            else:
                trash.append(v)
            return Diamond[-1]
        else:
            trash.append(v)
    elif suit == "H":
        if card.suitNumber[v.suit] == 2:
            if card.rankNumber[v.rank] == 0:
                Heart.append(v)
            elif card.rankNumber[v.rank] == card.rankNumber[Heart[-1].rank] + 1:
                Heart.append(v)
            else:
                trash.append(v)
            return Heart[-1]
        else:   
            trash.append(v)
    elif suit == "C":
        if card.suitNumber[v.suit] == 4:
            if card.rankNumber[v.rank] == 0:
                Clubs.append(v)
            elif card.rankNumber[v.rank] == card.rankNumber[Clubs[-1].rank] + 1:
                Clubs.append(v)
            else:
                trash.append(v)
            return Clubs[-1]
        else:
            trash.append(v)
    elif suit == "S":
        if card.suitNumber[v.suit] == 3:
            if card.rankNumber[v.rank] == 0:
                Spade.append(v)
            elif card.rankNumber[v.rank] == card.rankNumber[Spade[-1].rank] + 1:
                Spade.append(v)
            else:
                trash.append(v)
            return Spade[-1]
        else:
            trash.append(v)
    else:
        trash.append(v) 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-09T09:37:49.520

考虑将 Diamond、Heart、Clubs 和 Spade 合并到一个字典中，键是花色。

# ruby-on-rails - :attribute => 参数实际上是做什么的？

> ID：15307711
> 
> 赞同：0
> 
> 时间：2013-03-09T05:51:03.417
> 
> 标签：ruby-on-rails, ruby

我很难理解表格：attribute => parameter

谁能给我一些解释？:attribute 是属于该类的字段（变量）还是其他什么？为什么我们可以将这一对作为一个参数传递给方法？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-09T05:55:51.370

如果您指的是这样的事情：

```
some_method(:foo => "bar", :baz => "abc") 
```

那么它只是导致 ruby​​ 将这些东西转换为哈希的简写。请注意，当使用这种形式时，散列必须是方法的最后一个参数才能使其工作。

根据上面的解释，这

```
some_method(:foo => "bar", :baz => "abc") 
```

可以，但是这个

```
some_method(:foo => "bar", :baz => "abc", moo) 
```

不是。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-09T07:22:42.130

尽管您会在 Rails 中经常看到这一点，但这并不是 Rails 特有的问题。它是红宝石。

您的问题的答案是它是哈希中的键/值对，通常作为参数传递给方法。

当它被直接分配给一个变量时，您也会看到这一点。但是让我向您展示一个示例方法和示例用法，以便您可以将它们放在一起：

```
def some_method(*args, name: 'Joe', amount: 42, **other_params )
  puts "#{name}, #{amount}, glob of arguments = #{args.inspect}",
       "other params #{other_params}"
end

some_method(:occupation => 'programmer', :phone => '123-456-7890', name: 'Jane') 
```

这是 Ruby 2.0.0 特有的，因为您可以在实践中提供最后一个参数，该参数提供未命名参数。在参数列表中使用 Hash 的 1.9+ 语法，您可以提供其他可能出现在哈希参数之后的未命名“参数”。

请注意，如果我使用 Hash 的旧语法，即 :key => 'value' 语法，我将不允许（至少在撰写本文时）在参数列表的末尾有 **other_params 参数.

您也可以在调用代码中使用较新的语法提供散列，尽管我在调用 some_method 时将其保留为散列语法。

Hash 仍然需要是调用参数列表中最后提供的，与方法定义的参数列表中指示的相同。

# eclipse - 如何解决“在 Eclipse 中调试时找不到源”？

> ID：15307712
> 
> 赞同：2
> 
> 时间：2013-03-09T05:51:27.880
> 
> 标签：eclipse, jakarta-ee

如何解决“在 Eclipse 中调试时找不到源”消息？

我已经在 Eclipse 中单击了“编辑源查找路径”并添加了我的项目。但它不适合我。我正在使用 Tomcat 6.0。我应该包含任何 jar 文件吗？

* * *

## 回答 #1

> 赞同：-2
> 
> 时间：2014-07-29T14:52:38.243

您需要在添加运气对话框中添加应用程序 src 文件夹。这样您的应用程序就可以找到所有源代码。

# php - G-WAN PHP servlet 阻塞，回复为空

> ID：15307721
> 
> 赞同：0
> 
> 时间：2013-03-09T05:52:22.087
> 
> 标签：php, http, g-wan, document-body

我发送各种大小的小负载作为`"200"`回复，但有时负载是空的（没有 HTML 正文），G-WAN 需要很长时间才能响应这些请求。

你能告诉我发生了什么以及如何解决这个问题吗？

谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-09T14:58:11.633

G-WAN 需要*“很长时间”*才能响应的原因是因为它期望您的 PHP 脚本有一个正文。

根据 RFC，`200`HTTP 回复不应有空正文。

`204`当您必须发送空正文时，您应该使用HTTP 状态代码。

在 PHP G-WAN 脚本中，这将类似于：

```
<?php
  exit(204); // return an HTTP code (204:'No Content')
?> 
```

在 C G-WAN 脚本中，这将是：

```
int main(int argc, char *argv[])
{
   return 204;
} 
```

如您所见，不时阅读 RFC 有助于记住这些人已经涵盖了许多有用的案例。

# mysql - 使用 10 组不同的表格，还是 1 组更好？

> ID：15307724
> 
> 赞同：0
> 
> 时间：2013-03-09T05:52:29.687
> 
> 标签：mysql, database-design, multi-tenant

我有很多网上商店，都运行在我当天制作的同一个 PHP/mysql 后端上。

每个网上商店都有自己的一组表格，例如 10 个表格或其他表格，包含有关产品、客户等的数据。和一对夫妇 1000 产品。

示例表

```
mystore_product_info
mystore_category_info
..
mystore2_product_info
mystore2_category_info 
```

我只是想知道将它们合并到一组表中是否有利于速度，向表中添加额外的 1 列，以识别数据用于哪个网店？

到时候会变成这样

```
product_info
category_info 
```

还是会更慢，用这些更大的桌子？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-09T05:59:27.567

如果数据已经分开，我认为你最好保持这种状态。如果这些网上商店不需要共享数据，那么您就不会因为忘记在其中一个查询中包含额外的列而冒着交叉污染它们的风险。通过组合它们，您不会获得任何性能优势。

# mysql - 当特定列在 MySql 中为空且非空时，查询返回的计数

> ID：15307726
> 
> 赞同：0
> 
> 时间：2013-03-09T05:52:54.223
> 
> 标签：mysql, hibernate

我想`select a count returned by a query when a particular column is null`和另一个`query to select a count when that column is not null`进入单个查询我怎样才能实现它..？

我尝试了一些在 SOF 中可用但没有用的示例。

例如我想

```
select students count of class table where the address null and notnull 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-09T06:15:23.437

在 MySQL 中，这可以做到

```
SELECT 
    SUM(IF(address IS NULL,1,0))       as  `Student_With_No_Address`,
    SUM(IF(address IS NOT NULL,1,0)) as    `Student_With_Address`
FROM students 
```

## [SQL 小提琴演示](http://sqlfiddle.com/#!2/93e03/2)

输出 ：

```
Student_With_No_Address |   Student_With_Address
---------------------------------------------
        4               |           6 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-09T06:02:38.030

试试这个

```
SELECT 
COUNT(CASE when address is null then 1 end) AS StudentsWithNoAddress,
COUNT(CASE when address is not null then 1 end) AS StudentsWithAddress 
FROM Class 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-09T05:58:59.403

您必须编写两个`SELECT`语句并将它们组合使用`UNION`

```
SELECT 'No Address' AS AddressStatus, COUNT(*) AS NoOfStudents 
FROM Class WHERE Address IS NULL
UNION
SELECT 'With Address' AS AddressStatus, COUNT(*) AS NoOfStudents 
FROM Class WHERE Address IS NOT NULL 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-09T07:02:26.553

```
select 
 SUM( CASE when studentId is not NULL THEN 1 else 0 END ) as result1 ,
 SUM( CASE when studentId is NULL THEN 1 else 0 END) as result2
from class 
```

# html - 使 css 3d 响应式

> ID：15307727
> 
> 赞同：0
> 
> 时间：2013-03-09T05:53:01.783
> 
> 标签：html, css, twitter-bootstrap, responsive-design, media-queries

阿罗哈，

这是我想用于我的项目的代码。 [http://desandro.github.com/3dtransforms/examples/carousel-02-dynamic.html](http://desandro.github.com/3dtransforms/examples/carousel-02-dynamic.html) DeSandro 的 3D 变换。

我的任务是让它接近全屏（例如 1024x768 像 900x700）并使其响应。

问题是：

1）可以用引导程序完成吗？我尝试了 Bootstrap 容器/行/跨度，但它们都只是把所有东西都搞砸了。

2) [http://css-tricks.com/snippets/css/media-queries-for-standard-devices/](http://css-tricks.com/snippets/css/media-queries-for-standard-devices/)我发现了这个媒体查询。它们是否足以使其响应？还是永远不够？

我试图将代码复制到[http://jsfiddle.net/](http://jsfiddle.net/)但我猜它在那里不起作用

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-09T06:12:02.603

我认为从您的描述中可以清楚地看出您想要一个 Jquery 3d 响应式轮播...那么为什么使用 bootstrap 它没有用...只需根据您的要求附加一个 jquery 插件..

看看这个插件...

[http://coolcarousels.frebsite.nl/c/51/](http://coolcarousels.frebsite.nl/c/51/)

这里的响应部分可以通过使用媒体查询来完成，它们也有很多例子，你可以从中选择......

# vb.net - 如何使用 vb.net 将文本框中的数据插入到 Excel 中？

> ID：15307729
> 
> 赞同：0
> 
> 时间：2013-03-09T05:53:03.603
> 
> 标签：vb.net, excel

我被困在这里，我想将数据从 5 个文本框插入到现有的 excel 文件中。我找到了代码，但它是按行插入的。我在下面的代码中找到了最后一个非空行，我想从该行移动到下一行并在那里插入数据，例如最后一行是 A2，我想将新数据插入 A3、B3、C3、D3 ，E3。

我无法为此获得正确的循环。

```
Dim lRow As Long = 0
    Call OpenExcelFile("C:\Users\PB\Desktop\BookRecords.xlsx", 1)

    With xlWorkSheet
        If EXL.WorksheetFunction.CountA(.Cells) <> 0 Then
            lRow = .Cells.Find(What:="*", _
                          After:=.Range("A2"), _
                          LookAt:=Excel.XlLookAt.xlPart, _
                          LookIn:=Excel.XlFindLookIn.xlFormulas, _
                          SearchOrder:=Excel.XlSearchOrder.xlByRows, _
                          SearchDirection:=Excel.XlSearchDirection.xlPrevious, _
                          MatchCase:=False).Row
        Else
            lRow = 1

        End If
        lRow += 1

    End With
    MessageBox.Show("The last row in Sheet1 which has data is " & lRow)
    Dim j As Integer
    j = 3
    For i As Integer = j To 8
        xlWorkSheet.Range(xlWorkSheet.Cells(lRow + 1, j).item).Value = txtTitle.Text
        xlWorkSheet.Range(xlWorkSheet.Cells(lRow + 1, j).item).Value = txtAuthor.Text
        xlWorkSheet.Range(xlWorkSheet.Cells(lRow + 1, j).item).Value = txtEdition.Text
        xlWorkSheet.Range(xlWorkSheet.Cells(lRow + 1, j).item).Value = txtPublisher.Text
        xlWorkSheet.Range(xlWorkSheet.Cells(lRow + 1, j).item).Value = txtISBN.Text
    Next
    j += 1

    Call SaveAndCloseExcelSub() 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-09T06:00:30.903

这有帮助吗：

```
Dim j As Integer
j = 3
For i As Integer = j To 8
MsgBox("Cell column: " & ColumnNumberToName(i))
Next 
```

将数字转换为 Excel 列名（AZ、AA 等）的代码：

```
Public Shared Function ColumnNumberToName(columnNumber As Int32) As String
Dim dividend As Int32 = columnNumber
Dim columnName As [String] = [String].Empty
Dim modulo As Int32
While dividend > 0
    modulo = (dividend - 1) Mod 26
    columnName = Convert.ToChar(65 + modulo).ToString() + columnName
    dividend = DirectCast(((dividend - modulo) / 26), Int32)
End While

Return columnName
End Function

Public Shared Function ColumnNameToNumber(columnName As [String]) As Int32
If [String].IsNullOrEmpty(columnName) Then
    Throw New ArgumentNullException("columnName")
End If
Dim characters As Char() = columnName.ToUpperInvariant().ToCharArray()
Dim sum As Int32 = 0
Dim i As Int32 = 0
While i < characters.Length
    sum *= 26
    sum += (characters(i) - "A"C + 1)
    System.Math.Max(System.Threading.Interlocked.Increment(i),i - 1)
End While
Return sum
End Function 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-09T06:03:53.540

实际上，您的所有值都被写入同一个单元格；然后你向下移动一行，然后再做一次。单元格被寻址为 (row, column) - 所以你需要像这样更改你的代码：

```
Dim j As Integer
j = 3
For i As Integer = j To 8
    xlWorkSheet.Cells(lRow + i, 1).Value = txtTitle.Text
    xlWorkSheet.Cells(lRow + i, 2).Value = txtAuthor.Text
    xlWorkSheet.Cells(lRow + i, 3).Value = txtEdition.Text
    xlWorkSheet.Cells(lRow + i, 4).Value = txtPublisher.Text
    xlWorkSheet.Cells(lRow + i, 5).Value = txtISBN.Text
Next 
```

不确定是否需要开始`i = 3`添加`lRow`，但我相信你可以解决这个问题。

如果您想颠倒顺序，请执行此操作（此示例仅复制大量文本...我开始怀疑不需要循环）

```
dim i as Integer
i = 1; ' if you want column A
With xlWorkSheet
    .Cells(lRow    , i).Value = txtTitle.Text
    .Cells(lRow + 1, i).Value = txtAuthor.Text
    .Cells(lRow + 2, i).Value = txtEdition.Text
    .Cells(lRow + 3, i).value = txtPublisher.Text
    .Cells(lRow + 4, i).Value = txtISBN.Text
End With 
```

# python - 定义不起作用

> ID：15307731
> 
> 赞同：1
> 
> 时间：2013-03-09T05:53:11.143
> 
> 标签：python

不知道为什么这段代码不起作用。

```
class convert_html(sublime_plugin.TextCommand):
  def convert_syntax(self, html, preprocessor)
    return "this is just a " + preprocessor + " test"

  def convert_to_jade(self, html):
    return self.convert_syntax(html, "jade")

  def run(self, edit):
    with open(self.view.file_name(), "r") as f:
      html = f.read()
      html = html.convert_to_jade(html)
      print(html) 
```

它说`AttributeError: 'str' object has no attribute 'convert_html'`

我如何使它工作？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-03-09T05:56:12.313

您需要`convert_to_jade()`使用变量调用该方法，该`self`变量充当对类的当前对象的引用。非常类似于or中的`this`指针`C++``java`

```
 html = self.convert_to_jade(html) 
```

当您调用`self.something()`. 如果没有实例句柄（即`self`），您将无法访问任何实例变量。

顺便说一句，将实例方法的第一个参数命名为 并不是强制性的`self`，但这是一种常用的约定。

更多关于`self` [这里](https://stackoverflow.com/questions/2709821/python-self-explained)

以下代码应该可以工作：

```
class convert_html(sublime_plugin.TextCommand):
  def convert_syntax(self, html, preprocessor):
    return "this is just a " + preprocessor + " test"

  def convert_to_jade(self, html):
    return self.convert_syntax(html, "jade")

  def run(self, edit):
    with open(self.view.file_name(), "r") as f:
      html = f.read()
      html = self.convert_to_jade(html)
      print(html) 
```

# c++ - 为什么 stringstream 会产生奇怪的值？

> ID：15307734
> 
> 赞同：5
> 
> 时间：2013-03-09T05:53:24.217
> 
> 标签：c++, stringstream

所以，我试图在我的程序中使用字符串流，以获得一些格式化的字符串（尤其是因为我需要将数字转换为字符串）。

问题是，我的程序崩溃了，当我用 Visual Studio 调试它时，在我的 Spy 窗口中，我看到我的 stringstream 的字符串缓冲区产生了（当尝试向它添加“Framerate”时）：

"帧率ÍÍÍÍÍÍÍÍÍÍÍÍÍÍÍÍÍÍÍÍÍÍÍÍÍÍýýý««««««««Íþîþ"

代码 ：

```
std::stringstream s;
s << "Framerate"; 
```

然后，当我尝试获取关联的字符串时，我的代码就会崩溃……我找不到任何解释，我的代码也没有问题……

编辑：原来这些字符不是问题，并且字符串流返回预期的字符串`str()`。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-03-09T05:58:24.833

`stringstream`的内部缓冲区不需要以空值终止。但是，当您调用`str()`该`stringstream`对象时，您将获得一个以空字符结尾的字符串。您的崩溃的原因很可能在其他地方。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2017-11-01T19:52:16.177

在 Visual Studio 2015 版本 14.0.25431.01 Update 3 中，std::strstream 似乎不能确保“str()”返回的数据为空终止。

我用以下方法进行了测试：

```
`std::strstream s;
 s << "the cow jumped over the moon!";
 return s.str();` 
```

并得到： `the cow jumped over the moon!===zzzz`

在返回之前添加`s.write("", 1);`修复了我的输出，但非常不愉快。

# maven - solr core & solrj & spring-data-solr 的区别

> ID：15307737
> 
> 赞同：1
> 
> 时间：2013-03-09T05:53:59.003
> 
> 标签：maven, spring-mvc, solr, solrj, spring-data-solr

我一直在尝试学习 solr 以实现对其中一个应用程序的搜索。我总是碰到三个不同的库**solr-core**、**solrj**和**spring-data-solr**三个三个 jar 之间的基本区别是什么，哪个应该与 spring 一起使用？最近我尝试在 spring 中使用 solrj 和 solr-core 并得到了`StackOverflowException`

[这](https://stackoverflow.com/questions/15240085/im-getting-java-lang-stackoverflowerror-while-running-my-project)是我的问题导致堆栈溢出。无法找到解决方案我尝试删除 solr-core 依赖项并最终出现以下错误

```
 org.xml.sax.SAXParseException: cvc-complex-type.2.4.c: The matching wildcard is strict, but no declaration can be found for element 'solr:solr-server'. 
```

我基本上觉得我没有以正确的方式做这件事。让我大开眼界会很有帮助。谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-11T05:23:29.980

Solrj 是尝试连接到 SolrServer 实例时的客户端库。

Spring Data Solr 是 solrj 之上的一个小层，提供一些流畅的 API 和存储库抽象。查看[示例](https://github.com/SpringSource/spring-data-solr-examples/)和/或本[教程](http://www.petrikainulainen.net/programming/solr/spring-data-solr-tutorial-query-methods/)作为起点。

您可能想使用 solr-core 来运行嵌入式 SolrServer，例如。用于检测。

# ruby-on-rails-3 - 水豚的集成测试错误，用于使用 rails 3.2.12 进行 ajax 调用

> ID：15307742
> 
> 赞同：6
> 
> 时间：2013-03-09T05:54:13.953
> 
> 标签：ruby-on-rails-3, rspec, capybara

这是一个在 rails 3.2.12 中使用 capybara 的集成测试用例。`click_link 'New Log'`是一个ajax调用。然而，打开的页面以 $() 开头，并且有一堆 js 转义，如 \n 和 \log-log。

```
it "should work with link on show customer_comm_record page" do
      visit customer_customer_comm_records_path(@cust)
      #visit customer_customer_comm_record_path(@cust, @crecord)
      click_link @crecord.id.to_s     
      click_link 'New Log'
      save_and_open_page
end 
```

我们也尝试用 包裹箱子`describe "", :js => true do`，怎么会有错误说

```
`An error occurred in an after hook   ActiveRecord::StatementInvalid: SQLite3::BusyException: database is locked:` 
```

代码执行没有错误。rspec 案例有什么问题？感谢帮助。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-03-10T11:04:33.983

看起来您的服务器正在锁定数据库，因此测试在运行后无法清理。

当您在没有 JavaScript 的情况下使用 Capybara 时，测试和服务器都在单个进程和线程中运行。这意味着它们可以共享相同的数据库连接和事务。这意味着 RSpec 可以使用简单的数据库事务在测试结束时回滚更改，以及为什么您在测试和服务器之间看不到任何锁争用。

当你运行的`:js => true`东西有点不同时，服务器在一个单独的线程或进程中启动你的测试，因此它们每个都将使用单独的数据库连接和事务。这意味着 RSpec 默认使用的用于清理的数据库事务策略将不起作用。在您的情况下，它也会导致锁定错误。

Capybara[自述](https://github.com/jnicklas/capybara#transactions-and-database-setup)文件讨论了这个问题，并推荐[database_cleaner](https://github.com/bmabey/database_cleaner) gem 作为这种情况下的替代方案。您将需要配置数据库清理器以使用截断策略而不是事务

# payment-gateway - 支付宝和银联支付网关的疑惑

> ID：15307744
> 
> 赞同：8
> 
> 时间：2013-03-09T05:54:20.003
> 
> 标签：payment-gateway

当我们与支付宝/银联对接时，我们是否有规定让支付宝知道这笔金额需要完全授权或收费。这是如何运作的？

支付宝和银联是刷卡还是授权是怎么确定的？还是支付宝和银联只支持刷卡不授权？

请提出您宝贵的建议。

# iphone - 根据声音频率移动图像？

> ID：15307747
> 
> 赞同：7
> 
> 时间：2013-03-09T05:54:31.767
> 
> 标签：iphone, ipad

我正在尝试制作类似的东西，我正在录制声音，并且基于声音（音高，频率，不确定）图像应该移动。

我能够实现记录，我也可以进行图像序列，但是是分开的。我不知道如何链接它，只是为了提供信息，我正在尝试实现类似嘴巴移动应用程序： [app url here](https://itunes.apple.com/au/app/mouth-mover/id564033673?mt=8)

我的问题是，如何根据声音频率移动/动画图像。

谢谢

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-15T05:11:14.690

我完成了解决方案。使用狄拉克并解决了问题。

编辑：

它是什么？

DiracAudioPlayer 是一组新的 Cocoa 类，以一种方便的方式包装了整个 Dirac 功能，公开了一个类似于 AVAudioPlayer 提供的 API。请注意，这不是 AVAudioPlayer 子类。以下是 API 的核心功能和描述。

DiracAudioPlayer 核心功能

DiracAudioPlayer 是一组类，允许基于文件播放各种音频格式（包括 MPMediaItems），同时实时更改音频文件的速度和音高。3.6 版由 DiracAudioPlayerBase（负责文件 IO 和播放的基类）、DiracAudioPlayer（包装 Dirac Core API）和 DiracFxAudioPlayer（包装 DiracFx API）组成。

确保在项目中包含所有 3 个类以及“ExtAudioFile”和“util”文件夹，并将 Accelerate.framework 和 CoreAudio.framework 添加到项目中。在 MacOS X 上，您还必须添加 AudioUnit.framework，在 iOS 上，您必须添加 AudioToolbox.framework、AVFoundation.framework、MediaPlayer.framework 和 CoreMedia.framework。

DiracAudioPlayer 是……</p>

...一个与 Apple 兼容的类，用于播放时间延长的音频，适用于 iOS（版本 4 及更高版本）和 MacOS X（版本 10.6 及更高版本）......非常易于使用......完全兼容 ARC......提供给您，包括完整的源代码

DiracAudioPlayer API

2012 年 11 月发布的 3.6 版提供以下调用：

```
- (id) initWithContentsOfURL:(NSURL*)inUrl channels:(int)channels error: (NSError **)error;

Initializes and returns an audio player for playing a designated sound file. A URL identifying the sound file to play. The audio data must be in a format supported by Core Audio. Pass in the address of a nil-initialized NSError object. If an error occurs, upon return the NSError object describes the error. To use an item from the user's iPod library supply the URL that you get via MPMediaItem's MPMediaItemPropertyAssetURL property as inUrl. Note that FairPlay protected content can NOT be processed.

- (void) setDelegate:(id)delegate;
- (id) delegate; 
```

设置/获取班级的代表。如果您实现委托协议，DiracAudioPlayer 将调用您的实现

```
- (void)diracPlayerDidFinishPlaying:(DiracAudioPlayerBase *)player successfully:(BOOL)flag 
```

播放完毕后

```
- (void) changeDuration:(float)duration;
- (void) changePitch:(float)pitch; 
```

更改播放速度和音高

```
- (NSInteger) numberOfLoops;
- (void) setNumberOfLoops:(NSInteger)loops;

A value of 0, which is the default, means to play the sound once. Set a positive integer value to specify the number of times to return to the start and play again. For example, specifying a value of 1 results in a total of two plays of the sound. Set any negative integer value to loop the sound indefinitely until you call the stop method.

- (void) updateMeters; 
```

必须在调用 -peakPowerForChannel 之前调用以更新其内部测量值

```
- (float) peakPowerForChannel:(NSUInteger)channelNumber;

A floating-point representation, in decibels, of a given audio channel’s current peak power. A return value of 0 dB indicates full scale, or maximum power; a return value of -160 dB indicates minimum power (that is, near silence). If the signal provided to the audio player exceeds ±full scale, then the return value may exceed 0 (that is, it may enter the positive range). To obtain a current peak power value, you must call the updateMeters method before calling this method.

- (BOOL) prepareToPlay;

Starts the Dirac processing thread and prepares the sound file for playback. If you don't call this explicitly it will be called when calling -play

- (NSUInteger) numberOfChannels; 
```

与音频播放器关联的声音中的音频通道数。（只读）

```
- (NSTimeInterval) fileDuration; 
```

返回与音频播放器关联的声音的总持续时间（以秒为单位）。（只读）

```
- (NSTimeInterval) currentTime;
- (void) setCurrentTime:(NSTimeInterval)time

Returns the current play time in the input file. Note that if you apply time stretching, -currentTime will reflect the slowed down time depending on the time stretch factor. 

IMPORTANT CHANGE: In previous versions this value returned the total play time independent of the position in the file. Please update your code accordingly to reflect the change

Setting this property causes playback to fast forward or rewind to the specified play time.

- (void) play;

Plays a sound asynchronously. Returns YES on success, or NO on failure. Calling this method implicitly calls the -prepareToPlay method if the audio player is not already prepared to play.

- (NSURL*) url; 
```

与音频播放器关联的声音的 URL。（只读）

```
- (void) setVolume:(float)volume;
- (float) volume; 
```

音频播放器的播放增益，范围从 0.0 到 1.0。

```
- (BOOL) playing;

A Boolean value that indicates whether the audio player is playing (YES) or not (NO). (read-only). To find out when playback has stopped, use the diracPlayerDidFinishPlaying:successfully: delegate method.

- (void) pause;

Pauses playback; sound remains ready to resume playback from where it left off. Calling pause leaves the audio player prepared to play; it does not release the audio hardware that was acquired upon calling -play or -prepareToPlay.

- (void) stop;

Stops playback and undoes the setup needed for playback. Calling this method, or allowing a sound to finish playing, undoes the setup performed upon calling the -play or -prepareToPlay methods. 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-09T06:32:50.483

大多数文本到语音系统将允许您注册一个回调函数，该函数将向您发送正在产生的音素（用外行的话来说是声音）。看看下面的[链接](https://developer.apple.com/library/mac/#documentation/Carbon/Reference/Speech_Synthesis_Manager/Reference/reference.html)。单击左侧的回调。往下看 SpeechPhonemeProcPtr ，它允许您注册一个函数，当发出的噪音是“uh”、“th”、“ah”或任何噪音时将调用该函数。然后，您将更新您的图像，使其看起来像一个人在发出特定声音时的嘴巴的样子。这在 IBM 的 ViaVoice 中非常容易，而且我从未在 iPhone 上编写过这样的应用程序，但我认为这比尝试匹配音频要好。

如果这是您尝试匹配的真正未经过滤的音频，那么您可以将其传递给语音识别系统，并将识别的文本传递给 TTS 系统并获取音素。

# asp.net-mvc - 存在多个获取操作时的 MVC API 路由

> ID：15307755
> 
> 赞同：4
> 
> 时间：2013-03-09T05:55:12.803
> 
> 标签：asp.net-mvc, asp.net-mvc-routing, asp.net-web-api-routing

似乎有一千人在堆栈溢出问题上提出相同的问题，但似乎没有一个单一的解决方案来解决这个问题。我又要问了。。。

我有一个具有以下操作的 API 控制器：

```
 // GET api/Exploitation
    public HttpResponseMessage Get() {
        var items = _exploitationRepository.FindAll();

        var mappedItems = Mapper.Map<IEnumerable<Exploitation>, IEnumerable<ExploitationView>>(items);

        var response = Request.CreateResponse<IEnumerable<ExploitationView>>(HttpStatusCode.OK, mappedItems);
        response.Headers.Location = new Uri(Url.Link("DefaultApi", new { }));
        return response;
    }

    // GET api/Exploitation/5        
    [HttpGet, ActionName("Get")]
    public HttpResponseMessage Get(int id) {
        var item = _exploitationRepository.FindById(id);
        var mappedItem = Mapper.Map<Exploitation, ExploitationView>(item);

        var response = Request.CreateResponse<ExploitationView>(HttpStatusCode.OK, mappedItem);
        response.Headers.Location = new Uri(Url.Link("DefaultApi", new { id = id }));
        return response;
    }

    // GET api/Exploitation/GetBySongwriterId/5
    [HttpGet, ActionName("GetBySongwriterId")]
    public HttpResponseMessage GetBySongwriterId(int id) {
        var item = _exploitationRepository.Find(e => e.Song.SongWriterSongs.Any(s => s.SongWriterId == id))
                                          .OrderByDescending(e => e.ReleaseDate);
        var mappedItem = Mapper.Map<IEnumerable<Exploitation>, IEnumerable<ExploitationView>>(item);

        var response = Request.CreateResponse<IEnumerable<ExploitationView>>(HttpStatusCode.OK, mappedItem);
        response.Headers.Location = new Uri(Url.Link("DefaultApi", new { id = id }));
        return response;
    }

    // GET api/Exploitation/GetBySongwriterId/5
    [HttpGet, ActionName("GetBySongId")]
    public HttpResponseMessage GetBySongId(int id) {
        var item = _exploitationRepository.Find(e => e.SongId == id)
                                          .OrderByDescending(e => e.ReleaseDate);
        var mappedItem = Mapper.Map<IEnumerable<Exploitation>, IEnumerable<ExploitationView>>(item);

        var response = Request.CreateResponse<IEnumerable<ExploitationView>>(HttpStatusCode.OK, mappedItem);
        response.Headers.Location = new Uri(Url.Link("DefaultApi", new { id = id }));
        return response;
    } 
```

在我的 APIConfig 中，我定义了以下路线：

```
 config.Routes.MapHttpRoute(
            name: "DefaultApi",
            routeTemplate: "api/{controller}/{id}",
            defaults: new { id = RouteParameter.Optional }
        );

        config.Routes.MapHttpRoute(
            name: "ActionApi",
            routeTemplate: "api/{controller}/{action}/{id}",
            defaults: new { id = RouteParameter.Optional, action = RouteParameter.Optional },
            constraints: new { id = @"\d+" }
        ); 
```

我发现我可以毫无问题地访问以下操作： /api/exploitation /api/exploitation/getbysongwriterid/1 /api/exploitation/getbysongid/1

当我尝试访问 /api/exploitation/1 我得到这个异常

```
"Multiple actions were found that match the request: System.Net.Http.HttpResponseMessage Get(Int32) on type Songistry.API.ExploitationController System.Net.Http.HttpResponseMessage GetBySongwriterId(Int32)" exception. 
```

谁能看到我的路线有什么问题？还是有其他问题？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-03-09T17:56:04.090

我找到了一个优雅的解决方案。

我修改了我的 ApiRouteConfig 以具有以下路由：

```
 config.Routes.MapHttpRoute(
            name: "DefaultGetApi",
            routeTemplate: "api/{controller}/{id}",
            defaults: new { id = RouteParameter.Optional, action = "Get" },
            constraints: new { id = @"\d+", httpMethod = new HttpMethodConstraint(HttpMethod.Get) }
        );

        config.Routes.MapHttpRoute(
            name: "DefaultApi",
            routeTemplate: "api/{controller}/{id}",
            defaults: new { id = RouteParameter.Optional },
            constraints: new { id = @"\d+" }
        );            

        config.Routes.MapHttpRoute(
            name: "ActionApi",
            routeTemplate: "api/{controller}/{action}/{id}",
            defaults: new { id = RouteParameter.Optional, action = RouteParameter.Optional }
        ); 
```

现在我可以访问：

```
/api/exploitation
/api/exploitation/1
/api/exploitation/getbysongid/1
/api/exploitation/getbysongwriterid/1 
```

我根本不需要修改我的控制器操作来使用这个新的路由配置。

如果您有多个 PUT 或 POST 操作，您可以创建如下所示的新路由：

```
 config.Routes.MapHttpRoute(
        name: "DefaultGetApi",
        routeTemplate: "api/{controller}/{id}",
        defaults: new { id = RouteParameter.Optional, action = "Put" },
        constraints: new { id = @"\d+", httpMethod = new HttpMethodConstraint(HttpMethod.Put) }
    );

    config.Routes.MapHttpRoute(
        name: "DefaultGetApi",
        routeTemplate: "api/{controller}/{id}",
        defaults: new { id = RouteParameter.Optional, action = "Delete" },
        constraints: new { id = @"\d+", httpMethod = new HttpMethodConstraint(HttpMethod.Delete) }
    ); 
```

我希望这个答案对每个人都有帮助，因为这似乎是人们遇到的一个普遍问题。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-09T06:42:48.940

您遇到的问题是**/api/exploitation/1**属于：

```
 config.Routes.MapHttpRoute(
        name: "DefaultApi",
        routeTemplate: "api/{controller}/{id}",
        defaults: new { id = RouteParameter.Optional }
    ); 
```

您的所有 GET 方法也都满足该路由，特别是因为**{id}**是可选的并且它们的控制器是相同的。

因此，您有一个来自客户端的 HTTP GET 请求和多个接受 GET 请求的方法。它不知道该去哪一个。

```
api/{controller}/{action}/{id} 
//This works fine because you specified which action explicitly 
```

我希望这能回答你的问题。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-09T13:28:18.113

在您的路线定义中尝试以下操作。仅保留以下路线：

```
 config.Routes.MapHttpRoute(
        name: "ActionApi",
        routeTemplate: "api/{controller}/{action}/{id}",
        defaults: new { id = RouteParameter.Optional, action = "Get" },
        constraints: new { id = @"\d+" }
    ); 
```

将第一个 Get 方法设为私有，修改第二个使 id 具有默认值：

```
// GET api/Exploitation
private HttpResponseMessage Get() {
    // implementation stays the same but now it's private
}

// GET api/Exploitation/5        
[HttpGet, ActionName("Get")]
public HttpResponseMessage Get(int id = 0) {
    if (id == 0) {
        return Get();
    }

    // continue standard implementation
} 
```

这样（我自己没有测试过）我希望：

*   api/Exploitation/ 将映射到 api/Exploitation/Get（作为默认操作），其中 id = 0 作为默认参数
*   api/Exploitation/1 将映射到 api/Exploitation/Get/1 因此它将调用 Get(1)
*   api/Exploitation/someOtherAction/345 将调用正确的操作方法

这可能会奏效。更严格的路由定义实际上可能是这样的：

```
 config.Routes.MapHttpRoute(
        name: "ApiWithRequiredId",
        routeTemplate: "api/{controller}/{action}/{id}",
        defaults: null /* make sure we have explicit action and id */,
        constraints: new { id = @"\d+" }
    );

  config.Routes.MapHttpRoute(
        name: "ApiWithOptionalId",
        routeTemplate: "api/{controller}/{action}/{id}",
        defaults: new { id = RouteParameter.Optional, action = "Get" },
        constraints: new { action = "Get" /* only allow Get method to work with an optional id */, id = @"\d+" }
    ); 
```

但是沿着这些思路......试一试，我希望它能解决你的问题。

# java - 我应该如何调用一个类来检查它是否返回 null？

> ID：15307760
> 
> 赞同：0
> 
> 时间：2013-03-09T05:55:55.113
> 
> 标签：java, oop, if-statement, null

我在“商店”类中有以下代码：

```
public Item sellItem()
{
    displayItems();
    int indexID = Shop.getInput();
    if (indexID <= -1 && indexID >= wares.length)
    {
        System.out.println("Null"); // For testing purposes
        return null;
    }
    else
    {
        return wares[indexID];
    }
} 
```

而且我想知道如何编写一个`if`语句来检查此方法是否正在`null`为我`while`的主类中的循环返回：

```
int shopInput = scan.nextInt();
if(shopInput >= 1 && shopInput <= allShops.length)
{
   boolean leaveShop = true;
   while(leaveShop)
   {
      allShops[shopInput - 1].sellItem();
      if(???????? == null);
      {
         System.out.println("still null"); // For testing purposes
         leaveShop = false;
      }
   }
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-09T05:58:43.133

```
Item item = allShops[shopInput - 1].sellItem();
if (item == null) {
    System.out.println("still null"); // For testing purposes
    ...
} 
```

（请注意，我`;`从行尾删除了`if`）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-09T05:59:35.037

使用它来检查空值。

```
if (allShops[shopInput - 1].sellItem() == null) {} 
```

编辑：删除不必要的双重否定

# c# - 在datagridview中按下回车按钮打开另一个窗口

> ID：15307766
> 
> 赞同：1
> 
> 时间：2013-03-09T05:56:29.807
> 
> 标签：c#, .net, winforms

我有大约 25000 行的大型数据网格。[Windows 应用程序]

我正在尝试实现功能，例如，当我按下回车键时，我可以打开新窗口。在那个新窗口中，我以文本框和标签的形式显示了我按下 Enter 按钮的记录的数据。但不幸的是，我没有找到任何相关的事件。当我按下回车按钮时，选定的行将移动到下一条记录。

我还想知道是否有任何功能，当我加载 window[Grid] 时，默认情况下应该选择第一条记录。

我尝试了不同的事件，例如

```
 private void gvTradeFile_RowEnter(object sender, DataGridViewCellEventArgs e)
        {
            splitPopUp objSplit = new splitPopUp();
            objSplit.Show();
        } 
```

没有工作。

```
private void gvTradeFile_Enter(object sender, EventArgs e)
        {
            splitPopUp objSplit = new splitPopUp();
            objSplit.Show();
        } 
```

这也不起作用。

我参考了[http://social.msdn.microsoft.com/Forums/en-US/csharpgeneral/thread/6a73013f-4440-4d45-a322-63c4cae1bb39/](http://social.msdn.microsoft.com/Forums/en-US/csharpgeneral/thread/6a73013f-4440-4d45-a322-63c4cae1bb39/)这个链接，但什么也没得到。

是否有与实现此功能相关的任何想法？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-09T06:02:43.723

您需要处理网格的[`KeyDown`](http://msdn.microsoft.com/en-us/library/system.windows.forms.control.keydown.aspx)事件：

```
private void gvTradeFile_KeyDown(object sender, KeyEventArgs e)
{
    if (e.KeyCode == Keys.Enter)
    {
        var row = dataGridView1.CurrentRow; // retreive the current row
        // show the form
        // ...
    }
} 
```

当[`Enter`](http://msdn.microsoft.com/en-us/library/system.windows.forms.control.enter.aspx)键盘焦点*进*入网格[`RowEnter`](http://msdn.microsoft.com/en-us/library/system.windows.forms.datagridview.rowenter.aspx)时发生事件，当一行接收到输入焦点时发生事件。这些事件与`Enter`密钥无关。

# mysql - 在 MySQL 中创建一个用户定义的函数来处理 auto_increment

> ID：15307772
> 
> 赞同：1
> 
> 时间：2013-03-09T05:56:48.470
> 
> 标签：mysql, function, transactions, auto-increment

我正在尝试在 MySQL 中创建一个用户定义的函数以生成唯一的数字。由于 MySQL 的 auto_increment 特性只是将它的种子加一，我需要有这样一个函数来处理需要加一以上的字段。这是我的 SQL 脚本：

```
DELIMITER $$
CREATE FUNCTION `getUniqueID`(
    id_type CHAR(1)
) RETURNS INT(10)
BEGIN
    DECLARE run INT(10);

    START TRANSACTION;

        SELECT unique_gen_id INTO @run FROM tbl_unique_seed WHERE id_type = @id_type;
    UPDATE tbl_unique_seed SET unique_gen_id = (unique_gen_id + 1) WHERE id_type = @id_type;

    COMMIT;

    RETURN run;
END$$
DELIMITER ; 
```

我在 MySQL 方面没有太多经验，但是在 SQL Server 中创建这种函数非常容易。很高兴你能帮我找出解决这个问题的办法。目前，我面临一些语法错误。最基本的与我的事务和选择语句的语法有关。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-09T06:08:51.830

请参阅此处的文档：http: [//dev.mysql.com/doc/refman/5.0/en/replication-options-master.html#sysvar_auto_increment_increment](http://dev.mysql.com/doc/refman/5.0/en/replication-options-master.html#sysvar_auto_increment_increment)

您可以更改 auto_increment_increment 的值，通常为 1。

# c++ - 将使用 PIL 加载的图像转换为 Cimg 图像对象

> ID：15307775
> 
> 赞同：5
> 
> 时间：2013-03-09T05:57:42.713
> 
> 标签：c++, python-2.7, python-imaging-library, cimg, phash

我正在尝试将使用[PIL](http://www.pythonware.com/library/pil/handbook/image.htm)加载的 iamge 转换为 Cimg 图像对象。我知道 Cimg 是一个 c++ 库，而 PIL 是一个 python 成像库。给定一个图像 url，我的目标是计算图像的[pHash](http://phash.org)，而不将其写入磁盘。pHash 模块与[Cimg 图像对象](http://cimg.sourceforge.net/reference/structcimg__library_1_1CImg.html)一起使用，它已在 C++ 中实现。所以我打算使用 python 扩展绑定将所需的图像数据从我的 python 程序发送到 c++ 程序。在以下代码片段中，我从给定的 url 加载图像：

```
//python code sniplet   
import PIL.Image as pil

file = StringIO(urlopen(url).read())
img = pil.open(file).convert("RGB") 
```

我需要构建的 Cimg 图像对象如下所示：

```
CImg  ( const t *const  values,  
    const unsigned int  size_x,  
    const unsigned int  size_y = 1,  
    const unsigned int  size_z = 1,  
    const unsigned int  size_c = 1,  
    const bool  is_shared = false  
) 
```

我可以使用 img.size 获取宽度（size_x）和高度（size_y），并将其传递给 c++。我不确定如何填写 Cimg 对象的“值”字段？使用什么样的数据结构将图像数据从 python 传递到 c++ 代码？

另外，还有其他方法可以将 PIL 图像转换为 Cimg 吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-09T17:21:15.107

我假设您的主应用程序是用 Python 编写的，并且您想从 Python 调用 C++ 代码。您可以通过创建一个“ [Python 模块](http://docs.python.org/2/extending/extending.html)”来实现这一点，它将所有本机 C/C++ 功能暴露给 Python。您可以使用 SWIG 之类的工具来简化您的工作。

这是我想到的问题的最佳解决方案。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2020-01-21T15:02:53.093

将图像从 Python 传递到基于 C++ CImg 的程序的最简单方法是通过管道。

所以这是一个基于 C++ CImg 的程序，它从 Python 调用者读取图像`stdin`并将虚拟 pHash 返回给 Python 调用者——这样你就可以看到它是如何工作的：

```
#include "CImg.h"
#include <iostream>

using namespace cimg_library;
using namespace std;

int main()
{
    // Load image from stdin in PNM (a.k.a. PPM Portable PixMap) format
    cimg_library::CImg<unsigned char> image;
    image.load_pnm("-");

    // Save as PNG (just for debug) rather than generate pHash
    image.save_png("result.png");

    // Send dummy result back to Python caller
    std::cout << "pHash = 42" << std::endl;
} 
```

这是一个 Python 程序，它从 URL 下载图像，将其转换为 PNM/PPM（*“便携式 PixMap”*）并将其发送到 C++ 程序，以便它可以生成并返回 pHash：

```
#!/usr/bin/env python3

import requests
import subprocess
from PIL import Image
from io import BytesIO

# Grab image and open as PIL Image
url = 'https://i.stack.imgur.com/DRQbq.png'
response = requests.get(url)
img = Image.open(BytesIO(response.content)).convert('RGB')

# Generate in-memory PPM image which CImg can read without any libraries
with BytesIO() as buffer:
    img.save(buffer,format="PPM")
    data = buffer.getvalue()

# Start CImg passing our PPM image via pipe (not disk)
with subprocess.Popen(["./main"], stdin=subprocess.PIPE, stdout=subprocess.PIPE) as proc:
    (stdout, stderr) = proc.communicate(input=data)

print(f"Returned: {stdout}") 
```

如果你运行 Python 程序，你会得到：

```
Returned: b'pHash = 42\n' 
```

# iphone - 如何管理 iOS 应用程序中的定期维护？

> ID：15307784
> 
> 赞同：0
> 
> 时间：2013-03-09T05:58:46.787
> 
> 标签：iphone, ios, objective-c, scheduled-tasks, freeze

我正在寻找一种能够在 iPhone 应用程序中处理定期维护的方法。我们在我们的应用程序中使用 Web 服务（.Net/C#），最近我们增加了服务器数量来维护网站上的流量。因此，每当网络团队上传网站时，他们都会显示网站正在进行定期维护。对于 iPhone，我编写了下面的代码来同时处理超时。

```
NSMutableURLRequest *theRequest = [NSMutableURLRequest requestWithURL:url cachePolicy:NSURLRequestReloadIgnoringCacheData timeoutInterval:60.0]; 
```

它将在 60.0 秒后通知用户。所以用户抱怨**冻结**iPhone 应用程序。有没有其他方法来处理这个？或者有没有其他方法可以在定期维护时打开任何特定屏幕？

任何帮助将不胜感激！谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-09T06:07:02.377

您需要在单独的线程上执行此代码。最简单的方法是使用 Grand Central Dispatch，如下所示：

```
dispatch_async(dispatch_get_global_queue(DISPATCH_QUEUE_PRIORITY_BACKGROUND, 0), ^{

    NSURLResponse *response = nil;
    NSError *error = nil;
    NSMutableURLRequest *theRequest = [NSMutableURLRequest requestWithURL:url cachePolicy:NSURLRequestReloadIgnoringCacheData timeoutInterval:60.0];
    NSData *resultData = [NSURLConnection sendSynchronousRequest:theRequest returningResponse:&response error:&error];

    // Add code to handle returningResponse.

    // Error handling
    if (error != nil) {
        NSLog(@"An error occured! %@", error);
    }
}); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2014-09-18T21:46:30.480

在这种情况下，iOS 7 静默后台通知可能适合您。

# node.js - Websocket 服务器总是返回关闭状态，但在 localhost 中工作正常

> ID：15307785
> 
> 赞同：0
> 
> 时间：2013-03-09T05:58:50.497
> 
> 标签：node.js, websocket, localhost, port, webrtc

我得到了一个很棒的 webrtc 演示的源代码

> [https://github.com/webRTC/webrtc.io-demo](https://github.com/webRTC/webrtc.io-demo)

演示站点是： [webrtc.dennis.is](http://webrtc.dennis.is)

当我启动本地节点服务器时它工作正常，但是当我将演示上传到在线节点服务器（www.appfog.com）时，我遇到了一个意想不到的错误，它说：

> **WebSocket 连接到“ws://talktosomeone4.ap01.aws.af.cm/”失败：意外响应代码：200 talktosomeone4.ap01.aws.af.cm:1**

起初我认为这可能是由于缺少端口引起的，所以我尝试通过添加端口来完成 websocket url，例如：

> ws://talktosomeone4.ap01.aws.af.cm:8080/

或者我从服务获得的端口：process.env.PORT，错误消息消失了，但 websocket.onopen 从未被触发，它总是触发 onclose 事件。结果，webrtc 不起作用。

**有什么问题？我应该怎么办？**

我会很感激你的帮助！！！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-09T09:24:40.883

AppFog 尚不支持 websocket。但他们[承诺](http://blog.appfog.com/appfog-acquires-nodester-shares-love-for-node-devs/)很快会增加支持。

# ruby - Sinatra 构建 REST API 文档

> ID：15307793
> 
> 赞同：7
> 
> 时间：2013-03-09T05:59:37.747
> 
> 标签：ruby, api, rest, documentation, sinatra

我一直在寻找一个 gem 来从我的 sinatra 路由中生成 API 文档。我应该能够指定内联注释。

我找到了[https://rubygems.org/gems/sinatra-api-docs](https://rubygems.org/gems/sinatra-api-docs) & [https://rubygems.org/gems/sinatra-croon](https://rubygems.org/gems/sinatra-croon)

但两者似乎都不适用于我的设置并且也已经过时了..

另一个选项是带有一些 sinatra 插件的 yard，但在生成文档时不会生成 REST API 特定布局。

有没有人知道他们知道的任何工具？

我想为每条路线参考的所有信息：

对象：组

路线：发布/创建

参数：组的名称

输出：

```
{
  "name": "group",
  "members": []
} 
```

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-09T06:34:29.260

我会查看[Apiary.io](http://apiary.io/blueprint)，它看起来设计得非常好，并使用 Markdown 风格的特定领域语言来描述你的 API。加上它仍处于测试阶段时是免费的。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-09T13:27:12.780

你试过[Sinatra Yard](https://github.com/rkh/yard-sinatra)吗？我已经使用它，对 Yard 进行了一些修改，以生成我的 API 文档。

# mongodb - MongoDB 单文档大小限制为 16MB

> ID：15307800
> 
> 赞同：21
> 
> 时间：2013-03-09T06:01:01.117
> 
> 标签：mongodb, limit, database-administration, bson, database

**已知信息：已知**MongoDB 以 BSON（[二进制 JSON](http://bsonspec.org/)）存储，[最大 BSON 文档大小](http://docs.mongodb.org/manual/reference/limits/#limit-bson-document-size)为 16MB。

**问题：**为什么 16MB 本身为什么不是 32MB 或 64MB 或更多，16MB 的确切限制在哪里，以及完全依赖 16MB 的原因是什么？

提到在传输过程中，不会消耗过多的带宽，也不需要服务器过多的RAM。但是，如果我们能负担得起网络带宽和 RAM 内存消耗呢？然后，除了[GridFS](http://docs.mongodb.org/manual/applications/gridfs/)之外，我们别无选择。为什么？

这听起来可能很愚蠢。但是请任何人都可以对此提出一些亮点吗？

* * *

**更新：**原来是 4MB，现在是 16MB。

[mongodb BSON 大小](https://stackoverflow.com/questions/10061115/mongodb-bson-size)

我们可以通过发出以下命令在 Mongo Shell 上检查它

```
db.isMaster().maxBsonObjectSize/(1024*1024) 
```

[为什么DBA](http://en.wikipedia.org/wiki/Database_administrator)不允许配置它？

* * *

## 回答 #1

> 赞同：21
> 
> 时间：2013-03-09T09:36:56.640

查看 JIRA 票证上的线程，该线程将值从 4MB 增加到 16MB。关于票有相当大的辩论：[https ://jira.mongodb.org/browse/SERVER-431](https://jira.mongodb.org/browse/SERVER-431)

他们为什么选择 16MB 而不是 32MB 似乎是武断的。它之所以增加是因为许多人需要存储大于 4MB 的文档（我假设小于 16MB）。有些人在该线程中要求将其设置为可配置的（就像你问的那样），这对我来说很有意义。不知道为什么他们还没有决定这样做。

# sql - 为 2 年的数据添加 weekno

> ID：15307807
> 
> 赞同：0
> 
> 时间：2013-03-09T06:01:48.903
> 
> 标签：sql, oracle, date-arithmetic

如何添加两年数据的周数，因为第一年有 53 周，所以第二年的记录应该从 54 开始有周数。

我用了

```
to_char(to_date(TRANSDATE, 'dd-mm-yyyy'), 'WW+53') as weekno 
```

但它似乎没有用

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-09T07:59:08.087

```
to_number(to_char(to_date(TRANSDATE, 'dd-mm-yyyy'), 'WW'))+53 as weekno 
```

但更好地使用 IYYY 和 IW 进行正确的周编号。

```
case to_number(to_char(to_date(TRANSDATE, 'dd-mm-yyyy'), 'IYYY')) 
  when 2012 then to_number(to_char(to_date(TRANSDATE, 'dd-mm-yyyy'), 'IW'))
  when 2013 then to_number(to_char(to_date(TRANSDATE, 'dd-mm-yyyy'), 'IW')) + 52
end as weekno 
```

# python - 使用漂亮的汤只打印链接的特定部分

> ID：15307812
> 
> 赞同：0
> 
> 时间：2013-03-09T06:02:43.650
> 
> 标签：python, beautifulsoup

我正在使用 BeautifulSoup 使用以下代码解析网站。我能够解析网站并打印数据，但是，我只想打印链接中的一部分数据。任何人都可以就如何做到这一点提供意见吗？

```
from bs4 import BeautifulSoup as bs
import argparse
import urllib
import urllib2
import getpass
import re
import requests

def update (url):
    print url
    req = urllib2.Request(url=url)
    try:
        f = urllib2.urlopen(req)
        txt = f.read()
        soup = bs(txt)
        print soup
        f.close()

def main ():
    #For logging
    print "test"
    parser = argparse.ArgumentParser(description='This is the update.py script created by test')
    parser.add_argument('-u','--url',action='store',dest='url',default=None,help='<Required> url link',required=True)
    results = parser.parse_args()# collect cmd line args
    url = results.url
    #print url
    update(url)
if __name__ == '__main__':
    main() 
```

以下是当前输出。预期结果如下所示。

```
current output :-

==== Test results ====

results are in \\data\loc

==== <font color="#008000">Build Combo</font> ====

{| border="1" cellspacing="1" cellpadding="1"
|-
! bgcolor="#67B0F9" scope="col" | test1
! bgcolor="#67B0F9" scope="col" | test2
! bgcolor="#67B0F9" scope="col" | test3
! bgcolor="#67B0F9" scope="col" | test4
|-
| [http:link.com]
|}

==== <font color="#008000">COde:</font> ====

Expected output:-

==== <font color="#008000">Build Combo</font> ====

{| border="1" cellspacing="1" cellpadding="1"
|-
! bgcolor="#67B0F9" scope="col" | test1
! bgcolor="#67B0F9" scope="col" | test2
! bgcolor="#67B0F9" scope="col" | test3
! bgcolor="#67B0F9" scope="col" | test4
|-
| [http:link.com]
|} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-09T08:24:24.267

我将是第一个承认我不太确定你在问什么的人，但如果我没记错的话，我认为你只想打印`a`元素而不是整体。`soup`如果是这种情况，您需要`find`打印要打印的元素，然后打印它。`a`假设您正在寻找一个元素，您的更新方法可能看起来更像这样。

```
def update (url):
    print url
    req = urllib2.Request(url=url)
    try:
        f = urllib2.urlopen(req)
        txt = f.read()

        soup = bs(txt)
        a_element = soup.find("a")
        print a_element

    f.close() 
```

# java - 是否可以获得所有实现接口的类？

> ID：15307814
> 
> 赞同：10
> 
> 时间：2013-03-09T06:02:57.823
> 
> 标签：java, reflection, subclass

我可以用反射或类似的方法来做吗？

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2013-03-09T06:06:20.407

没有 100% 可靠的方法来做你想做的事。原因在于类加载在 Java 中的工作方式。

Java 中的类是“按需”加载的。第一次在代码中引用类时（静态或动态），JVM 将使用当前的类加载器并尝试加载它。ClassLoader 没有提供可以从中加载的所有类的方法，因此您不能迭代类。

有一些**不可靠的解决方法**。例如，如果您知道您的 ClassLoader 只会从特定目录或特定 JAR 文件中加载类，那么您可以使用与您的文件系统相关的类来查找可用的“.class”文件，然后您可以加载所有内容（这需要时间并且会消耗大量 PermGen，这可能是个问题——记住你不能轻易卸载一个类！（除非你做了一些 ClassLoader 魔法）），并使用反射来过滤实现你的类界面。

这种解决方法的问题在于，如果您更改部署，它很可能会停止工作。例如，如果您开始部署 JAR 文件，然后您决定使用将处理 WAR 文件的 servlet 容器，您的代码可能不再工作。

如果您真的想尝试这种方法，有一个名为[**Reflections**](https://code.google.com/p/reflections/)的项目可能会很有用。

**我实现过**的最可靠的方法是使用 Annotation Processor 。你写一个注解，你注解你的接口，你写一些代码，这些代码将在编译时被编译器执行，这将收集实现你的接口的类并将它们的名称保存在资源文件中。然后，您编写一个类，该类具有读取该文件的方法，并为该资源文件中列出的每个类名提供一个 Class 对象。

这种方法的问题在于，只有在我的构建过程中编译的类才会被列出（即，如果您发布带有接口的库并希望其他人实现您的接口，那么这种方法将没有用，因为您的代码将永远不知道其他项目中的课程）。如果这对您来说已经足够了，就像对我一样，那么这个解决方案可以完美运行。我可以在带有 WAR（爆炸或未爆炸）部署的 Servlet 容器中、在可执行的 jar 中使用它。它会一直有效。

# c# - WF4 WorkflowDesigner.View 中的“活动选择”事件

> ID：15307819
> 
> 赞同：2
> 
> 时间：2013-03-09T06:03:46.917
> 
> 标签：c#, .net, workflow-foundation-4, workflow-activity

当用户在 WorkflowDesigner 设计图面（视图）上使用它们时，我想在 WF4 活动的停靠窗格中显示一些帮助文本。当用户选择一个新的活动时，帮助文本需要改变。

当用户在重新托管的 WF4 WorkflowDesigner 视图中选择项目（即工作流活动）时，是否有要通知的事件或其他机制？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-09T14:50:26.193

设计师的编辑上下文中有可用的[选择。](http://msdn.microsoft.com/en-us/library/system.activities.presentation.view.selection.aspx)您只需要订阅它的更改。

```
WorkflowDesigner.Context.Items.Subscribe<Selection>(selection => 
{
    // 'selection' contains various properties including currently selected objects
}); 
```

# php - mysql根据元素数量添加列

> ID：15307824
> 
> 赞同：0
> 
> 时间：2013-03-09T06:04:52.300
> 
> 标签：php, mysql

我有一个用户的 mysql 表和某些属性之一。

我有第三个表来组合两者（具有 X 个属性的用户）。每个属性都是一个单独的元素/列。

我的问题是；如果我有一个用户有 X 个元素，另一个用户有 X+1 个元素，我如何告诉数据库向表中添加 +1（或任意数量的列）？

会是这样吗？

```
if(table_columns < attribute_columns)
{
mysqli_query($db,"ADD 'X amount' NEW COLUMN && ADD attributes");
}
else
{
mysqli_query($db,"ADD attributes");
} 
```

只是想澄清一下我走在正确的轨道上，或者我是否以错误的方式处理事情。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-09T06:15:01.623

这不是做你想做的事情的正确方法。通常是这样完成的： 用户表：用户 ID、名称、您可能想要的其他内容...属性表：AttID、名称、您可能想要的其他内容...用户属性表：用户 ID、AttID、AttValue

您将 UserAttributes.UserID 约束为 Users.UserID 上的外键。您将 UserAttributes.AttID 约束为 Attributes.AttID 上的外键。要获取用户的属性列表，请使用： select u.name as username，a.name as attname，ua.attvalue as attvalue from users u join userattributes ua on u.userid=ua.userid join attributes a on ua .attid=a.attid 其中 u.userid = USER_ID_TO_LOOK_FOR

# java - jsoup 选择器是如何工作的？

> ID：15307825
> 
> 赞同：2
> 
> 时间：2013-03-09T06:04:52.387
> 
> 标签：java, jsoup

`Elements divs = doc.select("#mp-itn b a");`

这里`mp-itn`是 div 标签的 id。这个b和a是什么？这意味着什么？

我无法理解这一点。请让我知道一些关于 jsoup 的好教程。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-09T06:08:06.733

它们指的是链接标签`<a ...></a>`和粗体标签`<b></b>`。因此，在该示例中，它会`a`在 id 为 的标签中选择粗体标签内的标签`mp-itn`。

我建议您在做任何其他事情之前阅读文档。它在[选择器语法页面](http://jsoup.org/cookbook/extracting-data/selector-syntax)中对此进行了解释。

# ios - 编辑时 UITextField 文本向左移动 1px

> ID：15307827
> 
> 赞同：4
> 
> 时间：2013-03-09T06:05:22.843
> 
> 标签：ios, ipad, uitextfield

在右对齐的文本字段中，当它被编辑时，与占位符文本的位置相比，文本向左移动 1px。这不会发生在模拟器上，只会发生在设备上（在这种情况下是 iPad）。这是一个已知的错误？有没有办法解决它？

[这里](https://stackoverflow.com/questions/6351340/using-a-custom-font-in-a-uitextfield-causes-it-to-shift-slightly-when-accessed)有一个类似的错误，但我没有使用自定义字体，只是一个系统字体。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-23T16:14:51.163

我以前经历过这种情况，我认为它实际上是一个 iOS 错误。无论如何，苹果提供了两种可以在 UITextField 中覆盖的方法。希望能帮助到你。

```
- (CGRect)textRectForBounds:(CGRect)bounds;
- (CGRect)placeholderRectForBounds:(CGRect)bounds; 
```

# java - 使 jetty:run 在运行期间自动加载依赖

> ID：15307831
> 
> 赞同：0
> 
> 时间：2013-03-09T06:06:14.320
> 
> 标签：java, maven, maven-3

我有一个拥有以下结构的Maven项目：

```
api(with packaging pom)
  pom.xml
  api-common(with packaging jar)
    pom.xml
  api-webapp(with packaging war)
    pom.xml 
```

`api`是 和 的`api-common`父级`api-webapp`。

`api-webapp`有依赖关系`api-common`。

现在当我在`mvn jetty:run`里面运行时`api/api-webapp`，jetty 不能自动加载模块的变化`api-common`。

任何的想法？

顺便说一句，我使用 maven3

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-10T23:27:59.387

由于`api-webapp`依赖`api-common`并且它们是独立的项目，`api-webapp`因此将在 maven 存储库中查找它的依赖项：您的`.m2`目录，然后是远程存储库。您需要先编译并安装您的更改，`api-common`然后`api-webapp`才能看到它们。

`api-webapp`不知道源的位置，`api-common`因此无法检测到变化。他们有一个共同的父母这一事实并没有让他们有能力看到对方。

这是一般的 maven 答案，但 jetty 插件确实通过让您为容器提供额外的类路径来解决此问题。看到[这个缺陷](http://jira.codehaus.org/browse/JETTY-1206)

# c# - 在 Escape 键按下时设置面板可见性

> ID：15307833
> 
> 赞同：0
> 
> 时间：2013-03-09T06:06:19.300
> 
> 标签：c#, winforms

假设我有一个 Windows 窗体，它有两个面板。主面板和弹出面板。当特定按钮单击主面板将禁用并且弹出面板将可见。我的问题是当用户按下退出键时，我想将弹出面板的可见性设置为 false 并启用主面板。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-09T06:11:08.580

```
bool bPanelFocus;
private void cancelButon_Click(object sender, EventArgs e)
{
    if (popuppanel.Visible == true && bPanelFocus)
    {
        popuppanel.Visible = false;
        mainpanel.Visible = true;
        return;
    }

    //your code for the cancel button
} 
```

由于表单上有一个取消按钮，因此当您按下 Esc 按钮时，它将触发该按钮上的单击事件。在取消按钮的单击事件中，添加验证以检查弹出面板是否可见，您可能还需要一个标志来检查用户是否将注意力集中在面板上，否则继续执行取消按钮的过程。

# php - CakePHP 3 步注册

> ID：15307835
> 
> 赞同：5
> 
> 时间：2013-03-09T06:06:28.797
> 
> 标签：php, cakephp, cakephp-2.0, cakephp-2.1

我正在尝试创建一个 3 步注册页面 withh `cakePHP`。第一步没问题，它在db中插入数据，但第二步不起作用。有人可以帮忙吗？

这是我的控制器代码：

```
<?php

App::uses('Controller', 'Controller');

class UsersController extends AppController {

public $name = 'Users';

public function beforeFilter(){
    parent::beforeFilter();
    $this->Auth->allow('signup');
}

public function login(){
    if($this->request->is('post')){
        if($this->Auth->login()){
            $this->redirect($this->Auth->redirect());   
        } else {
            $this->Session->setFlash('Invalid username or password!', 'default', array('class' => 'errormsg'));
        }
    }
}
public function logout(){
    $this->redirect($this->Auth->logout());
}
// SIGN UP ACTIONS
public function signup($step = null){
    // SET STEP VARIABLE
    $this->set('s', $step);
    // STEP 1 - REGISTER
    if(empty($step)){
        if ($this->request->is('post')) {
            if ($this->User->save($this->request->data)) {
                $this->Session->write('regUser', $this->request->data['User']['email']);
                // $this->Session->setFlash('The user has been saved, please enter other information!',
                //                          'default', array('class' => 'okormsg'));
                $regUser = $this->User->find(   'first', array('conditions' => array(
                                                'User.username' => $this->Session->read('regUser'))));
                $id = $regUser['User']['id'];

                $this->Session->write('regUserId', $id);

                $this->redirect(array('personal-info'));
            } else {
                $this->Session->setFlash(   'There was an error, please check the fields bellow!',
                                            'default', array('class' => 'errormsg'));
            }
        }
    // STEP 2 - PERSONAL INFORMATION
    } elseif($step == 'personal-info') {
        if ($this->request->is('post')) {
            $id = $this->Session->read('regUserId');
            $this->User->id = $id;

            if ($this->User->save($this->request->data)) {
                $this->Session->setFlash('The user has been saved');
                $this->redirect(array('complete'));
            } else {
                $this->Session->setFlash('User could not be saved. Please, try again.');
            }
        }
    // STEP 3 - COMPLETE REGISTRATION
    } elseif($step == 'complete') {

    }
}
}

?> 
```

这是模型：

```
<?php

class User extends AppModel {

public $validate = array (
    'name'=>array(
        'Please enter your name!'=>array(
            'rule'=>'notEmpty',
            'message'=>'Please enter your name!'
        )
    ),
    'surname'=>array(
        'Please enter your surname!'=>array(
            'rule'=>'notEmpty',
            'message'=>'Please enter your surname!'
        )
    ),
    'email'=>array(
        'Valid email'=>array(
            'rule'=>array('email'),
            'message'=>'Please enter a valid Email address!'
        ),
        'Already exists'=>array(
            'rule'=>'isUnique',
            'message'=>'This Email is already registered in our database!'
        )
    ),
    'password'=>array(
        'Not empty'=>array(
            'rule'=>'notEmpty',
            'message'=>'Please enter your password!'
        ),
        'Match password'=>array(
            'rule'=>'matchPasswords',
            'message'=>'Your passwords do not match!'
        )
    ),
    'password_confirm'=>array(
        'Not empty'=>array(
            'rule'=>'notEmpty',
            'message'=>'Please confirm your password!'
        )
    ),
    'terms'=>array(
        'Agree'=>array(
            'rule'=>'notEmpty',
            'required'=>true,
            'message'=>'You must agree to Terms and conditions!'
        )
    )
);

public function matchPasswords($data){
    if ($data['password'] == $this->data['User']['password_confirm']){
        return true;
    } else {
        $this->invalidate('password_confirm', 'Your passwords do not match!');
        return false;
    }
}
public function beforeSave(){
    if(!empty($this->data['User']['password'])) {
        $this->data['User']['password'] = AuthComponent::password($this->data['User']['password']);
    }
    if (empty($this->data['User']['username'])) {
        $this->data['User']['username'] = $this->data['User']['email'];
    }
    return true;
}
}

?> 
```

这是 signup.ctp 的视图

```
<!--  SIGN UP STEPS  -->
<!--  SIGN UP - 1 (REGISTER)  -->
<?php if(empty($s)): ?>
<div  id="register" class="container padded">
<div id="register">
        <div class="paginate active">Register</div>
        <div class="paginate">Personal Information</div>
        <div class="paginate">Complete Registration</div>
        <h1>User Registration</h1>
        <p>Welcome to user registration! You can sign up yourself and start improving your business. User registration is FREE and once you register yourself you can select apropiate business package for your company and start advertising.<br />
        <span style="color:#900">All field are required!</span></p>
    <?php
        echo $this->Form->create();
        echo $this->Form->input('name');
        echo $this->Form->input('surname');
        echo $this->Form->input('email');
        echo $this->Form->input('password');
        echo $this->Form->input('password_confirm', array('label'=>'Password Confirmation','type'=>'password'));
        echo $this->Form->input('terms', array('label'=>false, 'type'=>'checkbox'));
        ?> I accept <a href="#" class="link">Terms Of Use</a> <?
        echo $this->Form->end('Continue Registration');
    ?>
</div>
</div>
<!--  SIGN UP - 2 (PERSONAL INFO)  -->
<?php elseif($s == 'personal-info'): ?>
<div  id="register" class="container padded">
<div id="register">
        <div class="paginate">Register</div>
        <div class="paginate active">Personal Information</div>
        <div class="paginate">Complete Registration</div>
        <h1>User Registration</h1>
        <p>Welcome to user registration! You can sign up yourself and start improving your business. User registration is FREE and once you register yourself you can select apropiate business package for your company and start advertising.<br />
        <span style="color:#900">All field are required!</span></p>
    <?php
        echo $this->Form->create();
        echo $this->Form->input('phone');
        echo $this->Form->input('address');
        echo $this->Form->input('city');
        echo $this->Form->input('ptt', array('label'=>'Postal Code'));
        echo $this->Form->input('state');
        echo $this->Form->input('country');
        echo $this->Form->end('Complete Registration');
    ?>
</div>
</div>
<!--  SIGN UP - 3 (COMPLETE)  -->
<?php elseif($s == 'complete'): ?>
<div  id="register" class="container padded">
<div id="register">
        <div class="paginate">Register</div>
        <div class="paginate">Personal Information</div>
        <div class="paginate active">Complete Registration</div>
        <h1>User Registration</h1>
        <p>Welcome to user registration! You can sign up yourself and start improving your business. User registration is FREE and once you register yourself you can select apropiate business package for your company and start advertising.<br />
        <span style="color:#900">All field are required!</span></p>
</div>
</div>
<? else: ?>
<div  id="register" class="container padded">
<div id="register">
    Unknown page!
</div>
</div>
<? endif; ?> 
```

所以正如我在第一步所说的一切都好，它将用户保存在数据库中，但在第二步我想输入更多信息，当我提交它时会显示无法保存用户的 Session flash 消息，这意味着第二用户信息不保存在数据库中。

请帮忙！

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-03-09T08:17:17.693

找到解决方案。验证时出错。第二步，它尝试验证使用条款复选框。所以这里是 3 STEP REGISTRATION 的完整代码：

用户控制器：

```
<?php

App::uses('Controller', 'Controller');

class UsersController extends AppController {

public $name = 'Users';

public function beforeFilter(){
    parent::beforeFilter();
    $this->Auth->allow('signup');
}

public function login(){
    if($this->request->is('post')){
        if($this->Auth->login()){
            $this->redirect($this->Auth->redirect());   
        } else {
            $this->Session->setFlash('Invalid username or password!', 'default', array('class' => 'errormsg'));
        }
    }
}
public function logout(){
    $this->redirect($this->Auth->logout());
}
// SIGN UP ACTIONS
public function signup($step = null){
    // SET STEP VARIABLE
    $this->set('s', $step);
    // STEP 1 - REGISTER
    if(!$step){
        $this->set('r', 1);
        if ($this->request->is('post')) {
            if ($this->User->save($this->request->data)) {
                $this->Session->write('regUser', $this->request->data['User']['email']);
                // $this->Session->setFlash('The user has been saved, please enter other information!',
                //                          'default', array('class' => 'okormsg'));
                $regUser = $this->User->find(   'first', array('conditions' => array(
                                                'User.username' => $this->Session->read('regUser'))));
                $id = $regUser['User']['id'];
                $this->Session->write('regUserId', $id);
                $this->redirect(array('personal-info'));
            } else {
                $this->Session->setFlash(   'There was an error, please check the fields bellow!',
                                            'default', array('class' => 'errormsg'));
            }
        }
    // STEP 2 - PERSONAL INFORMATION
    } elseif($step == 'personal-info') {
        $id = $this->Session->read('regUserId');
        $this->User->id = $id;
        if ($this->request->is('post')) {
            if ($this->User->save($this->request->data, array('validate' => false))) {
                $this->redirect(array('complete'));
            } else {
                $this->Session->setFlash(   'User could not be saved. Please, try again.',
                                            'default', array('class' => 'errormsg'));
            }
        }
    // STEP 3 - COMPLETE REGISTRATION
    } elseif($step == 'complete') {
        // Send email function
    }
}
} 
```

用户模型：

```
<?php

class User extends AppModel {

public $validate = array (
    'name'=>array(
        'Please enter your name!'=>array(
            'rule'=>'notEmpty',
            'message'=>'Please enter your name!'
        )
    ),
    'surname'=>array(
        'Please enter your surname!'=>array(
            'rule'=>'notEmpty',
            'message'=>'Please enter your surname!'
        )
    ),
    'email'=>array(
        'Valid email'=>array(
            'rule'=>array('email'),
            'message'=>'Please enter a valid Email address!'
        ),
        'Already exists'=>array(
            'rule'=>'isUnique',
            'message'=>'This Email is already registered in our database!'
        )
    ),
    'password'=>array(
        'Not empty'=>array(
            'rule'=>'notEmpty',
            'message'=>'Please enter your password!'
        ),
        'Match password'=>array(
            'rule'=>'matchPasswords',
            'message'=>'Your passwords do not match!'
        )
    ),
    'password_confirm'=>array(
        'Not empty'=>array(
            'rule'=>'notEmpty',
            'message'=>'Please confirm your password!'
        )
    ),
    'terms'=>array(
        'Agree'=>array(
            'rule'=>'notEmpty',
            'required'=>true,
            'message'=>'You must agree to Terms and conditions!'
        )
    )
);
public function matchPasswords($data){
    if ($data['password'] == $this->data['User']['password_confirm']){
        return true;
    } else {
        $this->invalidate('password_confirm', 'Your passwords do not match!');
        return false;
    }
}
public function beforeSave(){
    if(!empty($this->data['User']['password'])) {
        $this->data['User']['password'] = AuthComponent::password($this->data['User']['password']);
    }
    if(!empty($this->data['User']['email'])){
        if (empty($this->data['User']['username'])) {
            $this->data['User']['username'] = $this->data['User']['email'];
        }
    }
}
}

?> 
```

VIEW '/用户/signup.ctp'

```
<!--  SIGN UP STEPS  -->
<!--  SIGN UP - 1 (REGISTER)  -->
<?php if(empty($s)): ?>
<div  id="register" class="container padded">
<div id="register">
        <div class="paginate active">Register</div>
        <div class="paginate">Personal Information</div>
        <div class="paginate">Complete Registration</div>
        <h1>User Registration</h1>
        <p>Welcome to user registration! You can sign up yourself and start improving your business. User registration is FREE and once you register yourself you can select apropiate business package for your company and start advertising.<br />
        <span style="color:#900">All field are required!</span></p>
    <?php
        echo $this->Form->create();
        echo $this->Form->input('name');
        echo $this->Form->input('surname');
        echo $this->Form->input('email');
        echo $this->Form->input('password');
        echo $this->Form->input('password_confirm', array('label'=>'Password Confirmation','type'=>'password'));
        echo $this->Form->input('terms', array('label'=>false, 'type'=>'checkbox'));
        ?> I accept <a href="#" class="link">Terms Of Use</a> <?
        echo $this->Form->end('Continue Registration');
    ?>
</div>
</div>
<!--  SIGN UP - 2 (PERSONAL INFO)  -->
<?php elseif($s == 'personal-info'): ?>
<div  id="register" class="container padded">
<div id="register">
        <div class="paginate">Register</div>
        <div class="paginate active">Personal Information</div>
        <div class="paginate">Complete Registration</div>
        <h1>User Registration</h1>
        <p>This personal information are not required.<br />
    <?php
        echo $this->Form->create();
        echo $this->Form->input('phone');
        echo $this->Form->input('address');
        echo $this->Form->input('city');
        echo $this->Form->input('ptt', array('label'=>'Postal Code'));
        echo $this->Form->input('state');
        echo $this->Form->input('country');
        echo $this->Form->end('Complete Registration');
    ?>
</div>
</div>
<!--  SIGN UP - 3 (COMPLETE)  -->
<?php elseif($s == 'complete'): ?>
<div  id="register" class="container padded">
<div id="register">
        <div class="paginate">Register</div>
        <div class="paginate">Personal Information</div>
        <div class="paginate active">Complete Registration</div>
        <h1>Congratulation!</h1>
        <p>Your account has been created and <strong>Email</strong> has been send to your inbox. Please check you inbox and verify address by clicking on the link provided in mail.</p>
</div>
</div>
<? else: ?>
<div  id="register" class="container padded">
<div id="register">
    Unknown page!
</div>
</div>
<? endif; ?> 
```

如果有人想用更多的步骤进行注册，其余的都是一样的！

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-03-09T11:58:08.493

您应该考虑将步骤拆分为单独的操作和视图，以使事情更简单、更容易阅读/调试。

**步骤1**

由于此时您将创建用户帐户，因此您应该在保存和验证后自动登录用户。那么你就不必在 Session 中持久化信息了，这在我的经验中是不好的。

此时可以从 Model afterSave() 向用户发送一封电子邮件

**第2步**

我会将其移至一个名为“配置文件”的操作，该操作允许用户更新他们的其他配置文件信息。由于他们已经登录，您可以轻松地找到（）用户并保存他们的个人资料。这也可以在将来重复使用。

**第 3 步**

这只是我所看到的“谢谢”页面。您可以重定向到 PagesController 并呈现一个简单的thankyou.ctp，而不是使用对视图没有任何作用的用户控制器操作。

即使他们的电子邮件地址未经过验证，登录仍然可以发生。您只允许访问网站的某些部分，直到他们单击电子邮件中发送给他们的链接。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-09T06:09:54.607

尝试检查`$step`如下。

```
if(!$step){ 
```

`empty`用于检查是否`array`为空。

# javascript - 关闭弹出窗口并打开新的弹出窗口

> ID：15307847
> 
> 赞同：1
> 
> 时间：2013-03-09T06:08:13.060
> 
> 标签：javascript, jquery

我正在使用模型弹出窗口。当我点击关闭时，我想关闭当前的弹出窗口 n 想打开一个新的弹出窗口.. 有可能吗？我正在使用下面的javascript ..

请帮我..

```
$(document).ready(function() {  

    //select all the a tag with name equal to modal
    $('a[name=modal]').click(function(e) {
        //Cancel the link behavior
        e.preventDefault();

        //Get the A tag
        var id = $(this).attr('href');

        //Get the screen height and width
        var maskHeight = $(document).height();
        var maskWidth = $(window).width();

        //Set heigth and width to mask to fill up the whole screen
        $('#mask').css({'width':maskWidth,'height':maskHeight});

        //transition effect     
        $('#mask').fadeIn(1000);    
        $('#mask').fadeTo("slow");  

        //Get the window height and width
        var winH = $(window).height();
        var winW = $(window).width();

        //Set the popup window to center
        $(id).css('top',  winH/8-$(id).height()/8);
        $(id).css('left', winW/2-$(id).width()/2);

        //transition effect
        $(id).fadeIn(2000);

    });  

    //if close button is clicked
    $('.window .close').click(function (e) {
        //Cancel the link behavior
        e.preventDefault();

        $('#mask').fadeOut(1000);
        $('.window').fadeOut();
    }); 

    //if mask is clicked
    //$('#mask').click(function () {
        //$(this).fadeOut(1000);
        //$('.window').fadeOut();
     // });         

    $(window).resize(function () {

        var box = $('#boxes .window');

        //Get the screen height and width
        var maskHeight = $(document).height();
        var maskWidth = $(window).width();

        //Set height and width to mask to fill up the whole screen
        $('#mask').css({'width':maskWidth,'height':maskHeight});

        //Get the window height and width
      var winH = $(window).height();
          var winW = $(window).width();

        //Set the popup window to center
        box.css('top',  winH/8 - box.height()/8);
        box.css('left', winW/2 - box.width()/2);

    });

}); 
```

# excel - VLOOKUP，如果找不到项目打印“”并将单元格的值加一

> ID：15307855
> 
> 赞同：0
> 
> 时间：2013-03-09T06:09:44.210
> 
> 标签：excel, if-statement, vlookup

到目前为止我所拥有的：

```
=IF(ISNA(VLOOKUP(A1,$E$1:$F$814,2,FALSE)) = TRUE, SUM($D$1,1), VLOOKUP(A1,$E$1:$F$814,2,FALSE)) 
```

所以使用`VLOOKUP`，如果在表中找不到它，我希望它打印`""`（什么都没有），然后将单元格 D1 增加 1（这是我制作的一种未找到的计数器）。有任何想法吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-09T16:11:26.920

虽然这个问题不是很清楚，但我认为这会让你继续前进。
此公式检查整个列表并标记是否在（扩展）列表（公式的第一部分）中找到了搜索项（公式的第二部分）。您可以将其与 IF 语句结合使用：

`If(COUNTIF(A$1:A1;A1)=1,"",COUNTIF(A$1:A1;A1))`

将公式放入单元格 B1（在本例中）并向下拖动，使 B2 中的公式如下所示： =COUNTIF(A$1:A2;A2)

![在此处输入图像描述](../Images/3b9eb536e0011c5c09996ed887e46e9f.png)

# mysql - 服务器崩溃后Mysql Access Denied错误

> ID：15307859
> 
> 赞同：0
> 
> 时间：2013-03-09T06:10:35.467
> 
> 标签：mysql

我们的服务器因电源故障而崩溃。重启后，我们无法登录mysql。

mysql -uxxxx -pxxx 给出错误：

> 错误 1045 (28000)：拒绝用户 'xxxx'@'localhost' 的访问（使用密码：是）

我们运行 namp localhost nad 输出是

```
PORT      STATE SERVICE
21/tcp    open  ftp
22/tcp    open  ssh
23/tcp    open  telnet
80/tcp    open  http
443/tcp   open  https
3306/tcp  open  mysql 
```

让服务 mysqld 重新启动并收到此错误。

```
Stopping MySQL:                                            [  OK  ]
Initializing MySQL database:                               [  OK  ]
Timeout error occurred trying to start MySQL Daemon.
Starting MySQL:        [FAILED] 
```

mysqld 日志文件有这个：

```
130309 11:56:10  mysqld started
/usr/libexec/mysqld: ready for connections.
Version: '4.1.7'  socket: '/var/lib/mysql/mysql.sock'  port: 3306  Source distribution 
```

并且硬盘中有足够的空间。

我确定我们提供了正确的密码。任何建议都会非常有帮助。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-09T06:49:49.873

运行这些：

```
$ service mysqld stop; mysqld_safe & 
```

然后阅读这些。发表你的发现

```
# tail -n 60 /var/log/messages
# tail -n 60 /var/log/mysqld.log
# tail -n 60 /var/lib/mysql/*.err
# tail -n 60 /var/log/mysql/error.log 
```

# javascript - Web 应用程序中列表的实时更新

> ID：15307860
> 
> 赞同：0
> 
> 时间：2013-03-09T06:10:40.367
> 
> 标签：javascript, asp.net-mvc, html, signalr

我有一个基于 asp.net mvc 的 SPA Web 应用程序。它基本上是由很多列表 -> 细节组合组成的。我想知道是否有办法使用 SignalR 实时更新最终用户正在查看的列表？

场景，有 3 个用户。用户 1 正在查看系统中的订单列表，用户 2 正在查看客户列表。用户 3 更新订单，signalR 告诉应用程序有订单更新，用户 1 正在查看的订单列表更新为最新数据。用户 3 对客户数据执行相同的操作，系统会相应地更新用户 2 的列表。

只是想知道这是否可行以及最好的方法是什么。该应用程序正在使用 WebApi 来提取列表数据。

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-12T17:01:02.973

我认为您应该使用敲除和信号器查看此演示 [https://github.com/turanuk/signalrgrid](https://github.com/turanuk/signalrgrid)

# c# - 如何删除 html 标签并在 C# 中保留文本？

> ID：15307862
> 
> 赞同：0
> 
> 时间：2013-03-09T06:10:55.133
> 
> 标签：c#, asp.net, html

我看到一个类似的案例，它以 JQuery 的方式回答了我的问题： [删除标签但保留内容 - jQuery/Javascript](https://stackoverflow.com/questions/6037085/remove-tag-but-leave-contents-jquery-javascript)

但我需要知道 C# 是如何工作的？C# 中是否有任何 API 可用于去除标签并保留平面文本？

从：

```
<a href="#">some content</a> and more <a href="#"> and more content</a> 
```

至：

```
some content and more and more content 
```

谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-09T08:44:04.570

使用 HtmlAgilityPack ( [http://htmlagilitypack.codeplex.com/](http://htmlagilitypack.codeplex.com/) )，将您的 HTML 文档加载到`HtmlDocument`实例中并进行查询`document.DocumentNode.InnerText`。

# lvalue - 错误：需要左值

> ID：15307864
> 
> 赞同：0
> 
> 时间：2013-03-09T06:11:05.777
> 
> 标签：lvalue

```
// getline : empty string array and max length as input
// stores input stream to array and return its length

#include<stdio.h>
#define LENGTH 100
int getline1(char* , int );
int main(){
    char *s;
    int i;
    s=(char*)malloc(LENGTH*sizeof(char));
    i=getline1(s,LENGTH);
    printf("%s %d",s,i);
    return 0;
}

int getline1(char *s, int lim){

    int c ,i;
    i = 0;
    printf("%u",s);
    while(--lim >= 0 && (c=getchar()) != EOF && c = '\n'){
        *(s+i)=c; //error : lvalue required
        i++;
    }
    if(c=='\n'){
        *(s+i)=c;
        i++;
    }
    *(s+i)='\0';
    return i;
} 
```

我收到上述行中提到的错误，任何人都可以告诉我出了什么问题。如果我使用arrays.getline，代码工作正常：空字符串数组和最大长度作为输入将输入流存储到数组并返回其长度

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-09T06:28:57.413

它不能将值分配给`*(s+i)`表达式。可以理解的是，因为您取消引用它，将值留在该位置（这是一个常数）。

尝试`s[i]`改用。

# cmake - 复杂构建过程的 CMake 设置建议（包括 externalProject）

> ID：15307866
> 
> 赞同：3
> 
> 时间：2013-03-09T06:11:12.947
> 
> 标签：cmake

我有一个构建过程稍微复杂的应用程序，作为 CMake 的新手，我想知道是否有人可以为我提供任何指示。

在预设情况下，该应用程序由一个可执行文件组成，该可执行文件由 src 中提供的源代码树构建并包含文件夹。

它需要一些库才能工作，其中最大的库是 Boost 和 Python。Python 嵌入在应用程序中，Boost 需要在编译时了解自定义 python 安装。我也使用 Qt，但我只是为此链接到系统 Qt。

最后我想要的是一个 stage 文件夹，其中包含已编译的可执行文件，以及一个包含所需 boost 和 python 库的 lib 文件夹。

目前，我有一个 CMakeLists.txt 文件，我正在使用 ExternalProject 从源代码的 bzipped tarball 构建 Boost 和 Python。当我从前缀安装目录中复制出编译的库时，它会变得有点混乱。

事情正在发挥作用，但我有一种感觉，我在做事情非常倒退。我有时会在嵌套的子目录中看到多个 CMakeList，但不知道它们与我的项目有何关系。任何从事过类似范围项目的人都能够权衡并给我一些建议吗？

我应该补充一点，我希望在不久的将来将 Windows 作为一个平台，并且目前正在 Linux 上运行。

注意：这是我当前的 CMakeLists.txt，我意识到 boost 没有配置，并且没有完全移动到 stage 文件夹。我一直在手动执行此操作，但在深入挖掘自己之前我想问一下:)

谢谢！

CmakeList.txt

```
cmake_minimum_required(VERSION 2.6)

set(CMAKE_BUILD_TYPE Debug)

set(PROJ_NAME "mwave")
project(${PROJ_NAME})

include_directories("include")
include(ExternalProject)

# Add cmake dir to cmake module path so custom find modules will work
set(CMAKE_MODULE_PATH ${CMAKE_CURRENT_SOURCE_DIR}/cmake  ${CMAKE_MODULE_PATH})

#Build Python via External Project
ExternalProject_Add(
    Python
    PREFIX ${CMAKE_CURRENT_BINARY_DIR}/external/python
    URL ${CMAKE_CURRENT_SOURCE_DIR}/extern/Python-3.3.0.tar.bz2
    URL_MD5 2dbff60afed2b5f66adf6f77dac9e139
    UPDATE_COMMAND ""
    CONFIGURE_COMMAND ./configure -q --prefix=${CMAKE_CURRENT_BINARY_DIR}/external/python --enable-shared
    BUILD_COMMAND make
    BUILD_IN_SOURCE 1
    INSTALL_COMMAND make install
)

# Manually copy the compiled python files and dirs to our stage folder
add_custom_command(TARGET Python PRE_BUILD
                    COMMAND ${CMAKE_COMMAND} -E copy_directory
                    ${CMAKE_CURRENT_BINARY_DIR}/external/python/lib/pkgconfig
                    ${CMAKE_CURRENT_BINARY_DIR}/stage/lib/pkgconfig)

add_custom_command(TARGET Python PRE_BUILD
                    COMMAND ${CMAKE_COMMAND} -E copy_directory
                    ${CMAKE_CURRENT_BINARY_DIR}/external/python/lib/python3.3
                    ${CMAKE_CURRENT_BINARY_DIR}/stage/lib/python3.3)

add_custom_command(TARGET Python PRE_BUILD
                    COMMAND ${CMAKE_COMMAND} -E copy
                    ${CMAKE_CURRENT_BINARY_DIR}/external/python/lib/libpython3.so
                    ${CMAKE_CURRENT_BINARY_DIR}/stage/lib/libpython3.so)

add_custom_command(TARGET Python PRE_BUILD
                    COMMAND ${CMAKE_COMMAND} -E copy
                    ${CMAKE_CURRENT_BINARY_DIR}/external/python/lib/libpython3.3m.so.1.0
                    ${CMAKE_CURRENT_BINARY_DIR}/stage/lib/libpython3.3m.so.1.0)

add_custom_command(TARGET Python PRE_BUILD
                    COMMAND ${CMAKE_COMMAND} -E create_symlink
                    libpython3.3m.so.1.0
                    ${CMAKE_CURRENT_BINARY_DIR}/stage/lib/libpython3.3m.so)

#Python 
set(PYTHON_INCLUDE_DIRS "${CMAKE_CURRENT_BINARY_DIR}/external/python/include/python3.3m")
set(PYTHON_LIBRARIES "${CMAKE_CURRENT_BINARY_DIR}/external/python/lib/libpython3.3m.so" "pthread" "m" "util" "readline")

#Build boost via External Project
ExternalProject_Add(
    Boost
    DEPENDS Python
    PREFIX ${CMAKE_CURRENT_BINARY_DIR}/external/boost
    URL ${CMAKE_CURRENT_SOURCE_DIR}/extern/boost_1_51_0_mwave.tar.bz2
    URL_MD5 fe203a243e451b4dd4754c7b283b1db9
    UPDATE_COMMAND ./bootstrap.sh --with-libraries=python,system,thread,program_options
    CONFIGURE_COMMAND ""
    BUILD_COMMAND ./b2
    BUILD_IN_SOURCE 1
    INSTALL_COMMAND ""
)
#Boost (workaround until external project is working)
set(Boost_INCLUDE_DIRS "/opt/mwave/include")
set(Boost_LIBRARIES "/opt/mwave/lib/libboost_python3.so" "/opt/mwave/lib/libboost_program_options.so")

#OpenImageIO
set(OIIO_PATH "/opt/mwave/oiio/dist/linux64.debug")
find_package(OIIO REQUIRED)

#Qt4
find_package(Qt4 REQUIRED)
set(QT_USE_QTOPENGL TRUE)
include(${QT_USE_FILE})
add_definitions(${QT_DEFINITIONS})

#OpenGL
find_package(OpenGL REQUIRED)

find_package(GLEW REQUIRED)

# Mwave app
set(HEADERS
        "include/Application.h"
        "include/ImageChannel.h"
        "include/CompDag.h"
        "include/Dag.h"
        "include/Gui/DagView.h"
        "include/Gui/DagScene.h"
        "include/Gui/MainWindow.h"
        "include/Gui/GLViewer.h"
        "include/Gui/Nodes/GNodeEdge.h"
        "include/Gui/Nodes/GNodeLabel.h"
        "include/Gui/Nodes/GNodeCacheStatus.h"
        "include/Gui/Nodes/GNode.h"
        "include/Gui/Nodes/GRead.h"
        "include/Gui/Nodes/GViewer.h"
        "include/MwaveException.h"
        "include/Nodes/Node.h"
        "include/Nodes/Read.h"
        "include/Nodes/Viewer.h"
        "include/mwave.h"
        "include/main.h"
        "include/shaders.h"
)

set(QOBJECT_HEADERS
        "include/Gui/QCompDag.h"
        "include/Gui/QPythonEditor.h"
        "include/Gui/ViewerWidget.h"
)

set(SOURCES
        "src/Application.cpp"
        "src/CompDag.cpp"
        "src/main.cpp"
        "src/mwave.cpp"
        "src/Dag.cpp"
        "src/Gui/DagView.cpp"
        "src/Gui/DagScene.cpp"
        "src/Gui/MainWindow.cpp"
        "src/Gui/QPythonEditor.cpp"
        "src/Gui/GLViewer.cpp"
        "src/Gui/ViewerWidget.cpp"
        "src/Gui/Nodes/GNode.cpp"
        "src/Gui/Nodes/GNodeEdge.cpp"
        "src/Gui/QCompDag.cpp"
        "src/Nodes/Node.cpp"
        "src/Nodes/Read.cpp"
        "src/Nodes/Viewer.cpp"
)

QT4_WRAP_CPP(HEADERS_MOC ${QOBJECT_HEADERS})

## Compiler flags
if(CMAKE_COMPILER_IS_GNUCXX)
    set(CMAKE_CXX_FLAGS "-O2")        ## Optimize
    set(CMAKE_CXX_FLAGS "-O3")        ## Optimize More
endif()

include_directories(${PYTHON_INCLUDE_DIRS}
                    ${Boost_INCLUDE_DIRS}
                    ${GLEW_INCLUDE_PATH}
                    ${OPENGL_INCLUDE_DIR}
                    ${OIIO_INCLUDE_DIR}
)

add_executable(mwave WIN32 ${HEADERS} ${HEADERS_MOC} ${SOURCES})
set_target_properties(mwave PROPERTIES OUTPUT_NAME mwave.bin)

target_link_libraries(  mwave
                        ${PYTHON_LIBRARIES}
                        ${Boost_LIBRARIES}
                        ${OIIO_LIBRARIES}
                        ${GLEW_LIBRARY}
                        ${OPENGL_LIBRARIES}
                        ${QT_LIBRARIES}) 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2015-03-26T08:29:04.367

您正在使用的 cmake 2.6 不支持 ExternalProjects。

cmake 2.8 系列支持 ExternalProjects。请移至 cmake 2.8。

下面的链接澄清了

[http://www.cmake.org/pipermail/cmake/2011-June/044993.html](http://www.cmake.org/pipermail/cmake/2011-June/044993.html)

# c# - C# Port of Recast Detour Navigation Mesh for XNA, A* Pathing 的问题

> ID：15307867
> 
> 赞同：1
> 
> 时间：2013-03-09T06:11:35.487
> 
> 标签：c#, xna, navigation, path-finding, a-star

更新 10/03

好的，所以我发现了问题所在。C# 是一种有趣的古老语言..我改变了

```
 int navMeshCount = navMesh.GetPath(ref start, ref end, routePolys, navMeshRoute, false); 
```

至

```
 var navMeshCount = navMesh.GetPath(ref start, ref end, routePolys, navMeshRoute, false); 
```

最后我让寻路值起作用！

当我调试 routeNavMesh 数组时，我需要的值会填满。

[http://i.imgur.com/QgH8UL6.png](http://i.imgur.com/QgH8UL6.png) [有问题的调试屏幕截图]

一旦我完成，我会再次更新。

* * *

在让导航网格工作时遇到一些主要问题，特别是我无法让它进行任何寻路或让它以任何有用的方式响应我的 vector3 输入。

我正在研究 sunburn 引擎，它位于 XNA 4.0 之上，因此所有 XNA 功能仍然可用。

最近 Recast Navigation from digesting Duck 的博客被移植到 c# 中，我用它为我的关卡创建了导航网格。这是我一直试图遵循的教程/指南的链接：http: [//xboxforums.create.msdn.com/forums/p/109484/647991.aspx](http://xboxforums.create.msdn.com/forums/p/109484/647991.aspx)

我不知道如何在 getpath 段上传递开始和结束值，这些是世界空间或对象空间中的值还是什么？如果我执行 vector3 值并将它们作为起始值和结束值输​​入（然后将它们设置在数组上的某个位置），我不会得到一个显示路径查找的值数组，我只是在 navmeshroute 中得到这两个逐字记录值大批。

这是我尝试运行路径的地方，它在我的更新中。

```
 routePolys = new ushort[dtStatNavMesh.MAX_POLYS];
        navMeshRoute = new Vector3[dtStatNavMesh.MAX_POLYS];

        if (ks.IsKeyDown(Keys.L))
        {

            if (!runOnce)

            {
                start = new Vector3(0, 0, 0);
                end = new Vector3(1000, 0, 1000);
                ppos = x;

                navMeshRoute[0].X = start.X;
                navMeshRoute[0].Y = start.Y;
                navMeshRoute[0].Z = start.Z;

                navMeshRoute[count].X = end.X;
                navMeshRoute[count].Y = end.Y;
                navMeshRoute[count].Z = end.Z;

                int navMeshStart = 0;

              navMesh.GetPath(ref start, ref end, routePolys, navMeshRoute, true);

                Console.WriteLine("navMeshPC" + navMesh.getPolyCount());

                int navMeshCount = navMesh.GetPath(ref start, ref end, routePolys, navMeshRoute, true);

                while (navMeshStart < navMeshCount)
                {

                    routeNode = navMeshRoute[navMeshStart++];

                }

                Console.Out.WriteLine("NMc : " + navMeshCount);

            }
        } 
```

# jquery - jquery多个动态进度条

> ID：15307871
> 
> 赞同：2
> 
> 时间：2013-03-09T06:11:59.267
> 
> 标签：jquery, jquery-ui

我是页面上的几个 Jquery UI 进度条小部件的实例。

我遇到的问题是它只加载第一个值，并为每个条模拟每个值，而不是循环浏览页面上的所有条并获取唯一值。谁能解释为什么每个函数没有正确循环值？

添加了一个小提琴：http: [//jsfiddle.net/Uy9cA/25/](http://jsfiddle.net/Uy9cA/25/)

```
<div class="progress_bar" value="20"><div class="progress-label">Loading...</div></div> <div class="progress_bar" value="40"><div class="progress-label">Loading...</div></div> 
```

## jQuery

```
 $(function() {  
  $('.progress_bar').each(function() {
        var progressbar = $( ".progress_bar" ),
        progressLabel = $( ".progress-label" ),
        progressvalue = $(".progress_bar").attr('value');
        console.log(progressvalue);  

        progressbar.progressbar({
        value: false,
        change: function() {
        progressLabel.text( progressbar.progressbar( "value" ) + "% Complete" );
        },
        complete: function() {
        progressLabel.text( "Complete!" );
       }
       });

      function progress() {        
      var val = progressbar.progressbar( "value" ) || 0;

       progressbar.progressbar( "value", val + 1 )
      .removeClass("beginning middle end")
      .addClass(val < 40 ? "beginning" : val < 80 ? "middle" : "end");

      if ( val < progressvalue ) 
      {
        setTimeout( progress, 100 );
       }
      }

    setTimeout( progress, 100 );
       });
    }); 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-09T06:19:32.483

看到这个： **[样本](http://jsfiddle.net/Uy9cA/27/)**

利用：

```
 var progressbar = $(this),
    progressLabel = $(this).find( ".progress-label" ),
    progressvalue = $(this).attr('value'); 
```

代替：

```
 var progressbar = $( ".progress_bar" ),
    progressLabel = $( ".progress-label" ),
    progressvalue = $(".progress_bar").attr('value'); 
```

对于每个`.progress_bar`班级，您必须使用自己的属性/子级`$(this)`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-09T06:17:23.833

你给了他们所有相同的类名。您需要有一种独立引用它们的方法。给他们不同的类名，或者一个额外的类名或一个 id 或其他东西。例如：

```
<div class="progress_bar bar1" value ="80"><div class="progress-label barlabel1">Loading...</div></div>
<div class="progress_bar bar2" value="20"><div class="progress-label barlabel2">Loading...</div></div>
<div class="progress_bar bar3" value="40"><div class="progress-label barlabel3">Loading...</div></div> 
```

然后调整您的代码以单独处理每个。

# asp.net-mvc-3 - MVC3 和 EF5：在视图中包含 Child 和 GrandChild 实体

> ID：15307875
> 
> 赞同：0
> 
> 时间：2013-03-09T06:12:30.623
> 
> 标签：asp.net-mvc-3, entity-framework, razor, entity, entity-framework-5

为简单起见，我有 3 个实体（一对多，从左到右）：

课程 -> 模块 -> 章节

一门课程可以有多个模块，一个模块可以有多个章节。

我在控制器中的所有内容是：

```
Course course = db.Courses.Find(id);
return View(course); 
```

我试图使用包含但它似乎没有评估（这似乎不起作用`Course course = db.Courses.Include("Modules").Find(id);`：）

所以我顺其自然。在我看来，我有这个嵌套列表：

```
<ul>
    @foreach (var item in Model.Modules)
    {
    <li>@module.Title
        <ul>
        @foreach (var item in module.Chapters)
        {
        <li>@chapter.Title</li>
        }
        </ul>
    </li>
    }
</ul> 
```

这会自动工作吗？

最后，我应用了一个 SortOrder 列，以便安排子实体。我知道这应该在查询中完成，但我该怎么做呢？

谢谢！任何信息或建议将不胜感激。

**更新**

**课程班**

```
public partial class Course
{
    public Course()
    {
        this.Modules = new HashSet<Module>();
        this.Assets = new HashSet<Asset>();
    }

    public int Id { get; set; }
    public string Name { get; set; }
    public string Description { get; set; }
    public string Author { get; set; }
    public System.DateTime CreateDate { get; set; }
    public bool IsDeleted { get; set; }
    public int IndustryId { get; set; }

    public virtual ICollection<Module> Modules { get; set; }
    public virtual ICollection<Asset> Assets { get; set; }
    public virtual Industry Industry { get; set; }
} 
```

**模块类**

```
namespace RocketLabs.Models
{
    using System;
    using System.Collections.Generic;

    public partial class Module
    {
        public Module()
        {
            this.Chapters = new HashSet<Chapter>();
            this.Assets = new HashSet<Asset>();
        }

        public int Id { get; set; }
        public string Title { get; set; }
        public System.DateTime CreateDate { get; set; }
        public int CourseId { get; set; }
        public bool IsDeleted { get; set; }
        public short SortOrder { get; set; }

        public virtual Course Course { get; set; }
        public virtual ICollection<Chapter> Chapters { get; set; }
        public virtual ICollection<Asset> Assets { get; set; }
        public virtual Exam Exam { get; set; }
    }
} 
```

**章类**

```
namespace RocketLabs.Models
{
    using System;
    using System.Collections.Generic;

    public partial class Chapter
    {
        public Chapter()
        {
            this.Assets = new HashSet<Asset>();
        }

        public int Id { get; set; }
        public string Title { get; set; }
        public int ModuleId { get; set; }
        public string Notes { get; set; }
        public short SortOrder { get; set; }
        public System.DateTime CreateDate { get; set; }
        public bool IsDeleted { get; set; }

        public virtual Module Module { get; set; }
        public virtual ICollection<Asset> Assets { get; set; }
    }
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-09T07:07:52.887

你可以这样做：

```
var course = db.Courses
               .Include(i => i.Modules.Select(s => s.Chapter))
               .Single(s=>s.Id == id);
return View(course); 
```

你的循环：

```
<ul>
    @foreach (var module in Model.Modules)
    {
        <li>@module.Title
            <ul>
                @foreach (var chapter in module.Chapters)
                {
                    <li>@chapter.Title</li>
                }
            </ul>
        </li>
     }
</ul> 
```

至于排序，我们可以在您的查询中包含 .OrderBy() ，但您需要详细说明要对哪些子实体进行排序以及按哪些字段进行排序。

# php - 在php中按数字重命名图像

> ID：15307876
> 
> 赞同：1
> 
> 时间：2013-03-09T06:12:43.803
> 
> 标签：php

我正在尝试创建一个将头像上传到我的网站的选项。我想要实现的是：

```
first avatar : 1.jpg
second avatar : 2.jpg
third avatar : 3.png 
and so on.. 
```

如何在 php 中创建上传计数器？我当前的代码是这样的：

```
if(!empty($_FILES['cover']['tmp_name']))
{
    $uploadfolder =  "avatar/"; 
    $file1 = rands().'.'.end(explode('.',$_FILES['cover']['name'])); 
    $cover = $uploadfolder.$file1;
    move_uploaded_file($_FILES['cover']['tmp_name'],$cover);
}
else 
{
    $cover = ''
} 
```

该函数`rands()`不做任何事情，所以请用它来演示我如何实现我的目标。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-09T06:42:48.323

如果您将用户存储在数据库中并且有整数用户 ID，则最好使用此用户 ID 进行文件命名，而不是单独的递增计数器。

您还可以查看现有文件以找到最大的现有数量，如下所示：

```
function getNextFileName ()
{
    $a = 0;
    $b = 2147483647;

    while ($a < $b)
    {
        $c = floor (($a + $b) / 2);
        if (file_exists ("$c.jpg")) $a = $c + 1;
        else $b = $c;
    }

    return "$a.jpg";
}

function saveAvatar ($avatar)
{
    for ($i = 0; $i < 16; $i++)
    {
        $name = getNextFileName ();
        $fd = fopen ($name, 'x');
        if ($fd !== FALSE)
        {
            fwrite ($fd, $avatar);
            fclose ($fd);
            return $name;
        }
    }
    return FALSE;
}

for ($i = 0; $i < 20; $i++)
    saveAvatar ("BlahBlahBlah$i"); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-09T06:43:34.983

看来你在生成随机数方面有问题，你可以试试这个：

```
 $prefix = substr(str_shuffle("0123456789"), 0,3);
  $file1 = $prefix.'.'.end(explode('.',$_FILES['cover']['name'])); 
```

上面的 $prefix 就像：任何随机的 3 位数字

希望会有所帮助！

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-09T06:46:49.833

```
 /*
     * currentDir - path - eg. c:/xampp/htdocs/movies/uploads (no end slash)
     * $dir - points current working directory.
     * $filename - name of the file.
 */

public static function getFileName($dir, $filename) {

    $filePath = $dir . "/uploads/" . $filename;
    $fileInfo = pathinfo($filePath);
    $i = 1;
    while(file_exists($filePath)) {
        $filePath = $dir . "/uploads/" . $fileInfo['filename'] . "_" . $i . "." . $fileInfo['extension'];
        $i++;

    }
    return $filePath;
}

move_uploaded_file($_FILES['cover']['tmp_name'],$filePath); 
```

* * *

如果您的上传文件夹中存在相同的文件名。它会自动生成

avatar_1.jpg，avatar_2.jpg，avatar_3.jpg，等等..

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-09T06:17:43.907

创建一个 XML 文件并将计数存储在其中

```
<? xml version="1.0" ?>
<MyRootNode>
  <count>123</count>
</MyRootNode> 
```

# 更新

在您向问题添加更多代码后添加更新。

```
Function Rands(FileExtension as string) as long
  '1 open xml file 
  '2 read counter in
  '3 increment counter
  '4 save value to back xml file
  '5 return incremented counter with the file extension passed attached on the end
  'This is in case a BMP GIF or PNG has been and not JPG
  ' SAMPLE filename 123.GIF
End Function 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-03-09T06:21:31.383

如果（这是一个很大的 IF）你的服务器支持文件锁定，你可以合理地确保你有一个唯一的递增 ID：

```
function get_avatar_id()
{
    $lockfile = fopen("avatar_id_lock_file","a");
    if(flock($lockfile, LOCK_EX)) // Get an exclusive lock to avoid race conditions
    {
        $avatar_id = intval(file_get_contents("avatar_id"); // Assumes you made it and put a number in it
        $avatar_id++;
        file_put_contents("avatar_id", $avatar_id);
        flock($lockfile, LOCK_UN);
        fclose($lockfile);
        return $avatar_id;
    }
    else
    {
        //What do you want to do if you can't lock the file?
    }
} 
```

# windows - 无权访问/在此服务器上

> ID：15307879
> 
> 赞同：0
> 
> 时间：2013-03-09T06:14:05.800
> 
> 标签：windows, apache, virtualhost

我已经查看了许多关于 SO 的类似问题，例如[这个](https://stackoverflow.com/questions/10873295/forbidden-you-dont-have-permission-to-access-on-this-server)问题，我什至可以通过在全局目录中进行更改来解决我的问题。但是，我想在 httpd-vhosts.conf 文件中进行更改。这是我目前拥有的：

```
<VirtualHost *:80>
    ServerAdmin someEmail@gmail.com
    DocumentRoot "c:/www/firstSite.dev"
    <Directory "c:/www/firstSite.dev/">
        Options Indexes FollowSymLinks Includes ExecCGI
        AllowOverride All
        Order deny,allow
        Allow from all
    </Directory>
    ServerName firstSite.dev    
</VirtualHost> 
```

但是，我仍然收到错误消息：

> **禁止的**
> 
> 您无权访问此服务器上的 /。

任何帮助，将不胜感激。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-06-21T12:40:29.400

如果您碰巧使用的是包含 SELinux（例如 CentOS）的 linux 发行版，则需要确保为您的文档根文件正确设置了 SELinux 权限，否则您将收到此错误。在 RedHat / CentOS / Scientific Linux 上，这可以通过编辑 /etc/sysconfig/selinux 来完成 - 找到参数“selinux”并将选项“enforcing”更改为“disabled”：

```
# SELINUX= can take one of these three values:
#       enforcing - SELinux security policy is enforced.
#       permissive - SELinux prints warnings instead of enforcing.
#       disabled - No SELinux policy is loaded.
SELINUX=disabled 
```

然后重新启动服务器并进行测试。如果解决了问题，您可以禁用 SELinux，或配置 SELinux 以便您可以访问您的站点。这是配置 SELinux 的一个很好的教程：http: [//beginlinux.com/server_training/web-server/976-apache-and-selinux](http://beginlinux.com/server_training/web-server/976-apache-and-selinux)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-09T06:31:39.680

您需要在 httpd.conf 文件中显式添加您的用户。以下行将执行`trick`

```
User daemon
Group daemon
User *user here* 
```

# gwt - 如何获取某种类型的所有小部件？

> ID：15307883
> 
> 赞同：3
> 
> 时间：2013-03-09T06:14:44.383
> 
> 标签：gwt

我有一个**AbsolutePanel**和不同的小部件（按钮、图像、标签等）。是否可以获得特定类型的所有小部件的集合或数组或任何东西，例如 - 图像？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-03-09T06:33:07.647

干得好 ：

我们可以用`iterator.`

```
Iterator<Widget> arrayOfWidgets = abslPanel.iterator();
while (arrayOfWidgets.hasNext()){
  Widget ch = arrayOfWidgets .next();
  if (ch instanceof Button) {
  //Do something (in your case make an arraylist of your objects)
  }
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-18T12:32:36.457

如果您将 gwtquery 添加到您的项目中，这真的很容易：

```
List<Image> allImages = $("*", myPanel).widgets(Image.class); 
```

甚至您可以使用复杂的 CSS 选择器来执行更精细的区分：

```
List<MyWidget> allMyWidgets = $("*:nth-child(even)", myPanel).widgets(MyWidget.class); 
```

# c# - 如何将组合框的选定项属性分配给 .rdlc 文本框？

> ID：15307884
> 
> 赞同：0
> 
> 时间：2013-03-09T06:14:48.237
> 
> 标签：c#, visual-studio-2010, desktop-application

我想在我的报告中显示账单类型。

为此，我将组合框放在数据输入表单（Form1）中，使用户能够选择副本的类型，无论是原始的、副本的还是一式三份的。我想将组合框（Form1）的选定值分配给位于报表（.rdlc 文件）下的文本框 如何将控件的属性分配给报表内的文本框？

请帮忙。
提前致谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-09T06:52:53.507

> 这是你可以做的：

`RDLC`第 1 步：在报表中创建参数
第 2 步：将参数放在`RDLC`输入文本框属性中所需的位置 第 3 步：在页面
中键入以下代码第 4 步：重定向报表页面时传递参数值 `codebehind`

```
ReportParameterCollection reportParameters = new ReportParameterCollection();
reportParameters.Add(new ReportParameter("ParameterName", "Value"));
this.reportViewer.LocalReport.SetParameters(reportParameters); 
```

> 所以发生的事情是您正在为您的输入设置一个参数`textbox`并`.rdlc`以编程方式为其分配值。

# ios - 来自 NSDateComponents 的 NSDate 问题

> ID：15307892
> 
> 赞同：-1
> 
> 时间：2013-03-09T06:15:26.873
> 
> 标签：ios, objective-c, nsdate, nsdateformatter, nsdatecomponents

我有一个字符串`2013-03-05T07:37:26.853`，我想得到`Output : 2013-03-05 07:37:26`. 我想要对象的最终输出`NSDate`。我正在使用以下函数来转换欲望输出。它返回错误的时间。

```
-  (NSDate *) getDateFromCustomString:(NSString *) dateStr 
{    NSArray *dateStrParts = [dateStr componentsSeparatedByString:@"T"];
    NSString *datePart = [dateStrParts objectAtIndex:0];
    NSString *timePart = [dateStrParts objectAtIndex:1];
    NSArray *dateParts = [datePart componentsSeparatedByString:@"-"];
    NSArray *timeParts = [timePart componentsSeparatedByString:@":"];

NSDateComponents *components = [[NSDateComponents alloc] init];

[components setHour:[[timeParts objectAtIndex:0] intValue]];
[components setMinute:[[timeParts objectAtIndex:1] intValue]];
[components setSecond:[[timeParts objectAtIndex:2] intValue]];

[components setYear:[[dateParts objectAtIndex:0] intValue]];
[components setMonth:[[dateParts objectAtIndex:1] intValue]];
[components setDay:[[dateParts objectAtIndex:2] intValue]];

NSCalendar *currentCalendar = [NSCalendar currentCalendar];  
NSDate *date = [currentCalendar dateFromComponents:components];
NSLog(@"Date 1:%@",date); // Returns wrong time (2013-03-05 02:07:26)

/* i had tried the below.
NSDateFormatter * format = [[NSDateFormatter alloc] init];
[format setTimeZone:NSTimeZoneNameStyleStandard];
[format setDateFormat:@"yyyy-MM-dd hh:mm:ss"];

NSLog(@"Date 2:%@",[format stringFromDate:date]); // Returns correct date (2013-03-05 07:37:26)

NSDate *fDate = [format dateFromString:[format stringFromDate:date]];
DLog(@"Date 3:%@",fDate); // Returns wrong time (2013-03-05 02:07:26)
*/

[components release];
return  date;
} 
```

如果有任何想法，请建议我。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-09T06:26:44.700

您在这里看到的是时区问题。如果你想 NSLog 一个正确的日期，我们需要给输入字符串一个 GMT 时区：

将此添加到您的代码中，看看会发生什么：

```
[components setTimeZone: [NSTimeZone timeZoneForSecondsFromGMT: 0]]; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-09T06:34:17.970

尝试这个，

```
 NSString *departTimeDate = @"2013-03-05T07:37:26.853";

    NSDateFormatter *dateFormatter = [[NSDateFormatter alloc] init];
    [dateFormatter setDateFormat:@"yyyy'-'MM'-'dd'T'HH':'mm':'ss'.'SSS"];

    NSDate *date = [dateFormatter dateFromString:departTimeDate];
    [dateFormatter setDateFormat:@"yyyy-MM-dd HH:mm:ss"];

    NSLog(@"Expected Result___ %@",[dateFormatter stringFromDate:date]); //2013-03-05 07:37:26 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-09T09:47:49.083

试试这个：问题是时区。

```
+ (NSDate *) getDate:(NSString *) dateStr
{
    NSArray *dateStrParts = [dateStr componentsSeparatedByString:@"T"];
    NSString *datePart = [dateStrParts objectAtIndex:0];
    NSString *timePart = [dateStrParts objectAtIndex:1];

    NSString *t = [[timePart componentsSeparatedByString:@"."] objectAtIndex:0];
    NSString *newDateStr = [NSString stringWithFormat:@"%@ %@",datePart,t];
    //2013-03-05 07:37:26

    NSDateFormatter *df = [[NSDateFormatter alloc] init];
    [df setTimeZone:[NSTimeZone timeZoneForSecondsFromGMT:0]];
    [df setDateFormat:@"yyyy-MM-dd HH:mm:ss"];
    NSDate *date = [df dateFromString:newDateStr];
    DLog(@"%@",date);

    return  date;
} 
```

# ruby-on-rails - 如何使所有控制器都可以使用方法？以及所有模型如何？

> ID：15307893
> 
> 赞同：0
> 
> 时间：2013-03-09T06:15:39.940
> 
> 标签：ruby-on-rails, ruby

我是 Rails 新手，写了一个方法`to_csv`，我把它放在 products_controller.rb 中，但我希望它也可用于所有其他控制器。这样做的首选方法是什么？它在 application.rb 中吗？

同样，如果我在某个 model.rb 中编写方法，如何在所有模型之间共享该方法？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-03-09T06:27:42.727

application_controller 将是这个地方。如果是模型，也许你可以写在一个模块中，然后包含在你想要使用的模型中。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-09T10:56:25.883

您还可以创建一个单独的模型，而无需在该特定模型中继承`ActiveRecord::Base`和定义您的 csv 方法。从任何控制器只需调用

```
model_name.method_name(parameters) 
```

例如，在模型 CsvDB 中：

```
class CsvDB
  def export(parameters)  
    # your csv logic goes here  
  end
end 
```

从任何控制器只需调用

```
CsvDB.export(parameters) 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-29T07:03:20.367

1) 尝试 ActiveRecord::Base 猴子补丁。初始化器目录是收集所有这些小任务的最佳位置

所以，试试 /config/initializers/active_record_extension.rb，

```
class ActiveRecord::Base
   def self.export(parameters)
     #your csv logic goes here
   end
end 
```

或者

2）创建master类，用于所有active_record模型继承

例如 /models/your_class.rb

```
class YourClass < ActiveRecord::Base
  def self.export(parameters)
     #your csv logic goes here
  end
end

class CsvDB < YourClass
end 
```

# c# - 如何发现给定 HTTP 请求失败的原因？

> ID：15307894
> 
> 赞同：2
> 
> 时间：2013-03-09T06:15:43.880
> 
> 标签：c#

我想找出导致链接不起作用的原因。链接应该显示特定消息，而不是不起作用，例如 404 或 403。我如何才能发现导致给定请求失败的 HTTP 状态？

```
if (!IsLinkWorking(link))
{
     //Here you can show the error. You don't specify how you want to show it.
     TextBox2.ForeColor = System.Drawing.Color.Green; 
     TextBox2.Text += string.Format("{0}\nNot working\n\n ", link);
}
else
{
     TextBox2.Text += string.Format("{0}\n working\n\n", link);
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-09T06:37:52.770

您需要使用 HttpWebRequest。这将返回一个具有 StatusCode 属性的 HttpWebResponse -[请参阅此处的文档](http://msdn.microsoft.com/en-us/library/system.net.httpwebresponse.statuscode.aspx)。

这是一个例子：

```
HttpWebRequest request = (HttpWebRequest)WebRequest.Create(url);
HttpWebResponse response = (HttpWebResponse)request.GetResponse(); 
if (response.StatusCode != HttpStatusCode.OK) {
    TextBox2.Text = "HTTP Response is: {0}", response.StatusDescription);
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-09T09:04:13.623

链接不工作的原因可能有很多，您可以尝试`WebClient`或`HttpWebRequest / HttpWebResponse`使用正确的 HTTP 标头值来检查链接是否有效。

请注意，如果出现 403、404 等错误，它会引发您应该处理的异常，否则它不会为您提供响应状态：

```
try{
    HttpWebRequest request = (HttpWebRequest)WebRequest.Create(url);
    /* Set HTTP header values */
    request.Method = "MethodYouWantToUse"; // GET, POST etc.
    request.UserAgent = "SomeUserAgent";
    // Other header values here...

    HttpWebResponse response = (HttpWebResponse)request.GetResponse(); 
    TextBox2.Text = "HTTP Response is: {0}", response.StatusDescription);

}
catch(WebException wex){
    if(wex.Response != null){
        HttpWebResponse response = wex.Response as HttpWebResponse;
            if (response.StatusCode != HttpStatusCode.OK) {
                TextBox2.Text = "HTTP Response is: {0}", response.StatusDescription);
            }            
    }
} 
```

# c# - webclient 异常已被调用的目标抛出

> ID：15307896
> 
> 赞同：0
> 
> 时间：2013-03-09T06:15:52.503
> 
> 标签：c#, wpf

我想使用 webclient 的 DownloadFile 功能，但我使用断点来查看哪一行 O 出错了。它只是在下载文件时捕获块。

```
 try
            {
                string myStringWebSource = this.curFtpIp + FtpCuPath + "/" + FtpdfName + "/" + this.lbl.Text;

                WebClient client = new WebClient();
                client.Credentials = new NetworkCredential(this.FtpUserID, this.FtpPassword);
                client.DownloadFile(myStringWebSource, SaveFile);
            }
            catch (Exception ex)
            { MessageBox.Show(ex.Message); }
            finally { } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-09T07:51:00.867

我已经解决了我自己的问题。我发现我设置了错误的第二个参数。我只是使用“SaveFile”，它是保存路径，但它应该是一个文件名。所以，我只是修改了 SaveFile 并且它可以工作。

[WebClient.DownloadFile MSDN](http://msdn.microsoft.com/zh-tw/library/ez801hhe%28v=vs.80%29.aspx)

# android - 使用android单击菜单按钮（左侧按钮）时如何在底部创建工具栏

> ID：15307897
> 
> 赞同：0
> 
> 时间：2013-03-09T06:16:55.053
> 
> 标签：android

我有一个触摸屏三星安卓手机。当我按下菜单按钮（左侧按钮）时，我需要创建工具栏。我的问题是如何找到按下的左侧按钮。如何编码以找到按下的移动按钮。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-09T06:41:45.350

请先在互联网上研究该主题....有很多教程可供您使用。

[创建菜单](http://www.androidhive.info/2011/09/how-to-create-android-menus/)

# wireshark - 在局域网中捕获数据包

> ID：15307898
> 
> 赞同：0
> 
> 时间：2013-03-09T06:16:59.283
> 
> 标签：wireshark, packet

在我的大学实验室中，所有 PC 都通过 L2 交换机通过 LAN 连接。我想通过wireshark捕获http数据包，但它只显示我自己电脑的界面。那么我怎样才能捕获其他PC的数据包。

有人可以告诉我wireshark的工作吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-30T12:50:39.673

您可以通过[ARP-Spoofing](http://en.wikipedia.org/wiki/ARP_spoofing)来操纵交换机的行为。但要小心！这样做可能会被视为**犯罪行为**。

所以一定要确保你被**允许**在实验室里这样做，如果它服务于教育目的，有时这是可以的。询问您的主管或学校的管理员。

对于这些事情，我选择的武器是[Ettercap](http://ettercap.github.com/ettercap/)。

一种侵入性较小的方法是使用您自己的交换机并将其配置为转发所有流量。然后，您可以将一个端口作为上行链路连接到实验室的交换机，一个端口连接到被测设备，一个端口连接到运行wireshark 的机器。（不过，我建议使用`tcpdump`for capture。）如果您手头没有可管理的交换机，您也可以使用运行 OpenWRT 的路由器[。](http://www.wireshark.org/docs/wsug_html_chunked/AppToolstcpdump.html)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-09T06:23:48.867

在交换机的本质上，您只会看到以您的 MAC 地址为目标的广播数据包或流量，这是交换机和集线器之间的关键区别之一。

大多数交换机可以配置为将流量从一个端口复制到另一个端口，这通常用于监控目的，但这必须通过对设备的管理访问来完成。

# windows-phone-7 - Windows Phone 应用程序从墓碑恢复时 OnNavigatedTo 方法的导航模式是什么？

> ID：15307902
> 
> 赞同：0
> 
> 时间：2013-03-09T06:17:32.593
> 
> 标签：windows-phone-7, windows-phone-8, windows-phone

当 Windows Phone 应用程序从墓碑恢复时，在页面的 OnNavigatedTo 方法中，我想知道它的 NavigationMode 是 Back 还是 New ？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-09T11:51:35.760

墓碑化后 NavigationMode 将设置为 Back。

您可以像 Paul Annetts 在评论中所说的那样，通过转到 Project-> ProjectName Properties -> Debug -> “Tombstone on deactivation while debugging”来验证和调试它。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-01T17:29:08.760

NavigationMode 为“返回”。要更多地了解它，请参阅：

[http://www.kenneth-truyers.net/2013/03/13/tombstoning-made-easy-in-windows-phone-mvvm/](http://www.kenneth-truyers.net/2013/03/13/tombstoning-made-easy-in-windows-phone-mvvm/)

也可以在这里找到一种可能的清洁解决方案：

[http://www.kenneth-truyers.net/2013/03/13/tombstoning-made-easy-in-windows-phone-mvvm/](http://www.kenneth-truyers.net/2013/03/13/tombstoning-made-easy-in-windows-phone-mvvm/)

# iphone - SocketException 未被用户代码处理

> ID：15307905
> 
> 赞同：2
> 
> 时间：2013-03-09T06:17:51.457
> 
> 标签：iphone, asp.net, ios, c#-4.0, apple-push-notifications

```
using System;
using System.Collections.Generic;
using System.Web;
using System.Web.UI;
using System.Web.UI.WebControls;
using System.Net;
using System.IO;
using System.Text;
using System.Security.Authentication;
using System.Net.Security;
using System.Net.Sockets;
using System.Security.Cryptography.X509Certificates;
using Newtonsoft.Json.Linq;

namespace WebApplication1
{
    public partial class _Default : System.Web.UI.Page
    {
        protected void Page_Load(object sender, EventArgs e)
        {

        }

        protected void btnPush_Click(object sender, EventArgs e)
        {
            pushMessage(txtDeviceID.Text.Trim(), txtPayload.Text.Trim());
        }

        public void pushMessage(string deviceID, string Mesaj)
        {

            int port = 2195;
            String hostname = "ssl://gateway.sandbox.push.apple.com:2195";

            String certificatePath = HttpContext.Current.Server.MapPath("PushNotifi.p12");
            X509Certificate2 clientCertificate = new X509Certificate2(System.IO.File.ReadAllBytes(certificatePath), "taxmann");
            X509Certificate2Collection certificatesCollection = new X509Certificate2Collection(clientCertificate);

            TcpClient client = new TcpClient(hostname, port);
            SslStream sslStream = new SslStream(client.GetStream(), false, new RemoteCertificateValidationCallback(ValidateServerCertificate), null);

            try
            {
                sslStream.AuthenticateAsClient(hostname, certificatesCollection, SslProtocols.Ssl3, false);

                MemoryStream memoryStream = new MemoryStream();
                BinaryWriter writer = new BinaryWriter(memoryStream);
                writer.Write((byte)0);  //The command
                writer.Write((byte)0);  //The first byte of the deviceId length (big-endian first byte)
                writer.Write((byte)32); //The deviceId length (big-endian second byte)

                writer.Write(HexStringToByteArray(deviceID.ToUpper()));
                String payload = "{\"aps\":{\"alert\":{\body\":\"" + Mesaj + "\"},\"badge\":1,\"sound\":\"default\"}}";
                writer.Write((byte)0);
                writer.Write((byte)payload.Length);
                byte[] b1 = System.Text.Encoding.UTF8.GetBytes(payload);
                writer.Write(b1);
                writer.Flush();
                byte[] array = memoryStream.ToArray();
                sslStream.Write(array);
                sslStream.Flush();
                client.Close();
                lblResponse.Text = "Sucess..";
            }
            catch (System.Security.Authentication.AuthenticationException ex)
            {
                client.Close();
                lblResponse.Text = ex.Message;
            }   
            catch (Exception e)
            {
                client.Close();
                lblResponse.Text = e.Message;
            }
        }

        // The following method is invoked by the RemoteCertificateValidationDelegate. 
        public static bool ValidateServerCertificate(object sender, X509Certificate certificate, X509Chain chain, SslPolicyErrors sslPolicyErrors)
        {
            if (sslPolicyErrors == SslPolicyErrors.None)
                return true;
            else // Do not allow this client to communicate with unauthenticated servers. 
                return false;
        }

        private static byte[] HexStringToByteArray(String DeviceID)
        {
            //convert Devide token to HEX value.
            byte[] deviceToken = new byte[DeviceID.Length / 2];
            for (int i = 0; i < deviceToken.Length; i++)
                deviceToken[i] = byte.Parse(DeviceID.Substring(i * 2, 2), System.Globalization.NumberStyles.HexNumber);

            return deviceToken;
        }
    }
} 
```

这是我的代码。当我运行它时，然后

> SocketException 未被用户代码处理

在线的

```
TcpClient client = new TcpClient(host-name, port); 
```

当谷歌搜索`system.net.sockets.socketexception`和`not recognize ssl://gateway.sandbox.push.apple.com:2195 host name`

我怎样才能解决这个问题？

基本上，此代码用于将推送通知发送到 iPhone 应用程序。

我`localhost`用作发送通知的服务器。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-09T09:18:15.523

我认为问题是你的`hostname`字符串：

```
int port = 2195;
String hostname = "ssl://gateway.sandbox.push.apple.com:2195";
TcpClient client = new TcpClient(hostname, port); 
```

端口值 (2195) 是一个*单独*的构造函数参数，所以我认为您也不应该在主机名参数中传递*它*。

此外，*协议*（例如`ssl://`）不应该是*主机名*的一部分。`SslStream`告诉 .NET 这是 SSL 。

如果你[在 stack overflow 上查看这个类似的问题](https://stackoverflow.com/a/1077664/119114)，你会发现他们使用了这样的东西：

```
int port = 2195;
String hostname = "gateway.sandbox.push.apple.com";
TcpClient client = new TcpClient(hostname, port); 
```

PS我认为你也做对了，[在你关于这个主题的原始问题中](https://stackoverflow.com/q/15291954/119114)

# c++ - 如何检查 CPLEX C++ 中是否已存在约束？

> ID：15307909
> 
> 赞同：0
> 
> 时间：2013-03-09T06:18:10.940
> 
> 标签：c++, linear-programming, cplex

我有一些形式 Sizes[i1] + Sizes[i2] + Sizes[i3]<=1 的约束，我添加了

```
model.add(Sizes[i1] + Sizes[i2] + Sizes[i3]<=1) 
```

对于一些特定的索引 i1,i2,i3。稍后我想为所有其他索引组合添加约束

```
model.add(Sizes[k1] + Sizes[k2] + Sizes[k3]>1) 
```

是否有一些不错的方法可以做到这一点，例如检查模型中是否已经存在约束？

也许我可以存储由 IloModel::add 函数返回的句柄（例如，作为 ILOExtracableArray 甚至 IloConstraintArray？），但即便如此，我也不知道如何检查约束是否已经存在。谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-11T17:56:58.540

我不认为真的有一种简单的方法可以从 cplex 模型中得到它。我之前不得不在几个项目中做类似的事情，所以我在下面给出我的两个建议。

(1) 如果您知道每个约束中总是有相同数量的事物，那么您可以创建一个结构来保存该信息，例如：

```
 class tuple{
      public int index1;
      public int index2;
      public int index3;
    } 
```

然后您可以为添加的每个约束创建一个，并将它们保存在列表或数组或类似物中。

(2) 如果您知道索引的可能值，那么也许您可以从索引中创建哈希码或类似代码。如果做得好，这也可以解决由于排列索引而导致的对称性问题 - (Sizes[a] + Sizes[b] + Sizes[c]) 与 (Sizes[b] + Sizes[a] + Sizes [C]）。

然后如上所述，您可以将哈希码保存在您添加的约束的列表或数组中。

# python - Python Tkinter 保存列表

> ID：15307912
> 
> 赞同：0
> 
> 时间：2013-03-09T06:18:44.623
> 
> 标签：python, list, save

帮助，我正在尝试将文件中的所有数据保存为列表。

```
register = []

def some_command():
    register.append([variable,'variable_x'])

def save():
    outFile = open('Save.txt', 'wb')
    pickle.dump(register, outFile)
    outFile.close() 
```

它成功保存文件。但是当我使用“some_command”向“注册”添加一个新元素时，它不会更新；它甚至没有给出错误。可能是什么问题呢？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-09T06:28:42.673

如果您将寄存器和变量传递给 some_command，它将起作用，但否则您无法从函数内部正确编辑寄存器。所以，它看起来像这样：

```
def some_command( register, variable ):
    register.append([variable,'variable_x']) 
```

传递变量并不是绝对必要的，但它确实有助于保持整洁。

显然你会用

```
some_command( register, whatever you want ) 
```

# c# - 从dataGridView而不是C#中的csv文件读取数据

> ID：15307913
> 
> 赞同：0
> 
> 时间：2013-03-09T06:18:48.867
> 
> 标签：c#, .net, winforms, csv, datagridview

我编写了一个 C# 代码来从`csv`文件中读取数据。数据格式如下：

```
2,3,4,5,6
4,2,4,5,6
4,5,6,3,2
5,3,5,6,3 
```

读取它的代码是：

```
var lines = File.ReadLines("Data.csv");
var numbers = ProcessRawNumbers(lines); 
```

功能`ProcessRawNumbers`如下：

```
private static List<List<double>> ProcessRawNumbers(IEnumerable<string> lines)
    {
        var numbers = new List<List<double>>();
        /*System.Threading.Tasks.*/
        Parallel.ForEach(lines, line =>
        {
            lock (numbers)
            {
                numbers.Add(ProcessLine(line));
            }
        });
        return numbers;
    }

private static List<double> ProcessLine(string line)
    {
        var list = new List<double>();
        foreach (var s in line.Split(Separators, StringSplitOptions.RemoveEmptyEntries))
        {
            double i;
            if (Double.TryParse(s, out i))
            {
                list.Add(i);
            }
        }
        return list;
    } 
```

我想对`DataGridView`. 如何做到这一点？

在`DataGridView`我输入如下：

![在此处输入图像描述](../Images/49196b8e800ffedd25141303dfea8891.png)

另外，是否可以动态更改列数？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-09T06:48:40.330

在 a 中输入的数据`DataGridView`存储在其行和单元格中。要提取数据，您必须手动迭代行和单元格：

```
public List<string[]> ExtractGridData(DataGridView grid)
{
    int numCols = grid.Columns.Count;
    List<string[]> list = new List<string[]>();
    foreach (DataGridViewRow row in grid.Rows)
    {
        if (row.IsNewRow) // skip the new row
            continue;
        string[] cellsData = new string[numCols];
        foreach (DataGridViewCell cell in row.Cells)
            if (cell.Value != null)
                cellsData[cell.ColumnIndex] = cell.Value.ToString();
        list.Add(cellsData);
    }

    return list;
} 
```

如果要动态更改列，可以访问[`Columns`](http://msdn.microsoft.com/en-us/library/system.windows.forms.datagridview.columns.aspx)网格的属性。例如，要添加一列，您可以编写：

```
dataGridView1.Columns.Add("NewColumn", "New Column"); 
```

另请注意，`Parallel.ForEach`在您的场景中使用没有优势，因为您必须顺序处理数据，并且通过 using`lock`语句，您强制顺序处理。所以没有并行处理。

# java - 将库导入eclipse

> ID：15307915
> 
> 赞同：2
> 
> 时间：2013-03-09T06:18:54.313
> 
> 标签：java, eclipse, import, static-libraries

我一直在尝试将库导入 Eclipse 几个小时。我尝试了最简单的方法，似乎是将文件夹复制到 Eclipse 项目内的 lib 文件夹中。

在项目文件夹中，库的文件夹是 lib/org/imgscalr

我正在使用代码

```
import static org.imgscalr.*; 
```

我究竟做错了什么？我不知道是否有任何区别，但我使用的是 MACBOOK。

我想说我使用了“刷新”，我可以在那里看到文件夹和文件......

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-09T06:37:36.453

如果您的库是 jar 文件，则右键单击项目名称并导航到 Build Path。选择配置构建路径，然后选择库选项卡。然后选择“添加 JAR”或“添加外部 JAR”（参见[此处](http://www.wikihow.com/Add-JARs-to-Project-Build-Paths-in-Eclipse-%28Java%29)和[此处](https://stackoverflow.com/questions/3280353/how-to-import-a-jar-in-eclipse)）。这些选项之间的区别在于“添加 JAR”用于项目目录中的 jar，而“添加外部 JAR”允许 JAR 位于其他任何位置。

如果您的“库”是包含类的文件夹形式，请按照上述步骤操作，但选择“添加类文件夹”而不是“添加 JAR”。

# c# - C#中的文本框日期格式

> ID：15307918
> 
> 赞同：0
> 
> 时间：2013-03-09T06:19:04.547
> 
> 标签：c#, winforms, date, textbox

我想用作 DatetimePicker。我想验证日期格式。我正在使用按键事件进行验证。以下代码是在 KeyPress 事件中编写的。

```
 DateTime temp;
        if (DateTime.TryParse(textBox1.Text, out temp))
        { textBox1.Text = temp.ToShortDateString(); }
        else
        { errorProvider1.SetError(textBox1, "Format dd/MM/yyyy"); } 
```

但是在输入日期和月份后，它会自动给出年份，我也不希望这样。

用户可以输入完整日期。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-09T07:40:55.643

```
DateTime dt = DateTime.Now;
        Thread.CurrentThread.CurrentCulture = new System.Globalization.CultureInfo("fr-FR");
        if(DateTime.TryParse(textBox1.Text,out dt))
        {textBox1.Text =dt.ToShortDateString();} 
```

在离开事件它工作正常......，

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-09T06:23:20.823

尝试使用`LostFocus`或`Leave`事件而不是`KeyPress`事件。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-09T06:37:49.883

试试下面的 Javascript 代码：不需要 .Net 实现：

```
function isValidDate(date){
var matches = /^(\d{2})[-\/](\d{2})[-\/](\d{4})$/.exec(date);
if (matches == null) return false;
var d = matches[2];
var m = matches[1] - 1;
var y = matches[3];
var composedDate = new Date(y, m, d);
return composedDate.getDate() == d &&
        composedDate.getMonth() == m &&
        composedDate.getFullYear() == y;
}
console.log(isValidDate('10-12-1961'));
console.log(isValidDate('12/11/1961'));
console.log(isValidDate('02-11-1961'));
console.log(isValidDate('12/01/1961'));
console.log(isValidDate('13-11-1961'));
console.log(isValidDate('11-31-1961'));
console.log(isValidDate('11-31-1061')); 
```

使用此函数 onKeyPress 事件。如果没有工作评论。

问候..

# java - 单击列表视图中的项目后，它必须转到各自的链接

> ID：15307919
> 
> 赞同：0
> 
> 时间：2013-03-09T06:19:10.310
> 
> 标签：java, android

这是否可以将链接作为数组提供，我们可以根据列表项的相应链接获取链接，在我的代码中，我将硬编码我的链接看起来不太好，我需要什么我想提供所有链接一个数组，单击列表视图中的项目后，它必须打开各自的链接。

```
public class SouthIndianvegrecipes  extends Activity  {

    //private Button Manual;

    @Override
    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.main1);

        ArrayList<Recipedetails1> image_details = GetSearchResults();

        final ListView lv1 = (ListView) findViewById(R.id.listV1_main);
        lv1.setAdapter(new ItemListBaseAdapter1(this, image_details));

        lv1.setOnItemClickListener(new OnItemClickListener() {
            @Override
            public void onItemClick(AdapterView<?> a, View v, int position, long id) { 
                Object o = lv1.getItemAtPosition(position);
                Recipedetails1 obj_itemDetails = (Recipedetails1)o;
                Toast.makeText(SouthIndianvegrecipes.this, "You have chosen : " + " " + obj_itemDetails.getName1(), Toast.LENGTH_LONG).show();

            } 
        });
    }

    private ArrayList<Recipedetails1> GetSearchResults(){
        ArrayList<Recipedetails1> results = new ArrayList<Recipedetails1>();

        Recipedetails1 item_details = new Recipedetails1();
        item_details.setName1("Vegterian");
        item_details.setItemDescription1("Recipes made by raw materials");
        item_details.setUrlWiki("https://www.youtube.com/watch?v=C_r0mFvMSfU");
        item_details.setImageNumber1(1);
        results.add(item_details);

        item_details = new Recipedetails1();
        item_details.setName1("Non-Vegterian");
        item_details.setItemDescription1("Flesh of sweet animals");
        item_details.setUrlWiki("https://www.youtube.com/watch?v=C_r0mFvMSfU");
        item_details.setImageNumber1(2);
        results.add(item_details);

        item_details = new Recipedetails1();
        item_details.setName1("Pickels");
        item_details.setItemDescription1("Touchable dish  by Homemade");
        item_details.setUrlWiki("https://www.youtube.com/watch?v=C_r0mFvMSfU");
        item_details.setImageNumber1(3);
        results.add(item_details);

        item_details = new Recipedetails1();
        item_details.setName1("Soups");
        item_details.setItemDescription1("Startup for our food");
        item_details.setUrlWiki("https://www.youtube.com/watch?v=C_r0mFvMSfU");
        item_details.setImageNumber1(4);
        results.add(item_details);

        return results;
    }
} 
```

我想点击列表中的项目，它必须去他们各自的视频链接，但现在我将它放在持有人中，它会直接显示链接，它看起来不太好。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-09T10:22:07.850

只需启动视频的[意图](http://developer.android.com/reference/android/content/Intent.html)。这应该有效：

```
@Override
public void onItemClick(AdapterView<?> a, View v, int position, long id) { 
  Object o = lv1.getItemAtPosition(position);
  Recipedetails1 obj_itemDetails = (Recipedetails1)o;
  final Intent i = new Intent(Intent.ACTION_VIEW, Uri.parse(o.getUrlWiki()));
  startActivity(i);
} 
```

# oracle - 11g 中的匿名块

> ID：15307929
> 
> 赞同：-1
> 
> 时间：2013-03-09T06:20:48.937
> 
> 标签：oracle, stored-procedures, plsql, dynamic-sql

我需要这方面的帮助。

我正在尝试创建一个 pl/sql 匿名块，当我运行它时它显示它已完成但它不运行代码。它应该给我一个错误，说名称已被现有对象使用。有人可以帮我解决这个问题。我实际上是在创建程序，但只是尝试将此代码作为示例。

```
DECLARE 

    V_REF_TBL                       VARCHAR2(100);
    V_SQL                           LONG;

begin
    V_REF_TBL :='My_TABLE';
    v_SQL :='truncate table '||V_REF_TBL ;
    EXECUTE IMMEDIATE V_SQL;

    EXECUTE IMMEDIATE 'CREATE TABLE '|| V_REF_TBL ||' parallel 9 nologging pctfree 0 as 
    select * from dual';  
End; 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-10T12:05:06.483

可能你正在寻找这个：

```
 <<my_block>>
  Declare
    table_name varchar2(30);
    counter    number;
  Begin
    table_name := 'my_table';

    select count(*)
    into   counter
    from   user_tables
    where  table_name = Upper(Trim(my_block.table_name)) and
           dropped = 'NO';

    if counter = 0
    then
      execute immediate 'create table '||table_name||' as ... etc';
    else
      execute immediate 'truncate table '||table_name;
      execute immediate 'insert into '||table_name' select ... etc';
    end if;
  end my_block; 
```

# ios - ios - 是否可以通过发送确认向设备发送消息

> ID：15307930
> 
> 赞同：0
> 
> 时间：2013-03-09T06:20:56.003
> 
> 标签：ios, background, push-notification, enterprise

一个非常简单的任务，我花了 30 分钟在 android 上实现。

Web 服务器向设备发送消息。**在没有用户交互**的情况下，会发回收据。用户理解这是一种期望的行为。当用户打开应用程序时，他/她可以发送额外的确认。

我的理解是，只要我不使用定位服务，我就无法在后台连续（或定期）运行应用程序。推送通知将需要用户交互，否则它只是一个徽章和一条消息。

这似乎是一个微不足道的问题，但却让我很头疼，并希望我放弃。企业订阅是我将应用程序提供给公司用户的唯一方式吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-09T06:48:34.527

首先，您需要询问用户发送 PUSH 通知的权限。一旦用户同意您向他的设备发送 PUSH 通知，您需要获取设备 ID 并将其存储在您的服务器中。这是推送通知的第一阶段

在下一阶段（第二阶段），假设您想通知用户某事，您所做的是获取该用户的所有设备ID（他可能注册了超过 1 个 iOS 设备）并向他的设备发送一些 X 消息（ s) 利用苹果的 PUSH 基础设施。您需要将 deviceID 传递给 Apple（以及一堆其他东西），因为这是它识别哪个设备收到此 X 消息的方式。

同样，最初在注册 PUSH 时，您需要编写一些代码来配置 PUSH 通知的外观。它会有声音、徽章、信息等吗？

对于所有这一切，作为应用程序开发人员，您不需要关心您的应用程序是否处于活动状态。iOS 会处理它。在初始 PUSH 注册之后，用户也不会参与其中。您不需要在后台运行您的应用程序，也不需要注册以获取持续的位置更新。

我是否正确理解了您的问题？

# html - 如何在 HTML5 网页上构建类似控件的窗口？

> ID：15307931
> 
> 赞同：0
> 
> 时间：2013-03-09T06:21:02.643
> 
> 标签：html, window, controls

我正在制作图像中显示的控件。它有一个标题栏和一组控件。构建它的最佳方法是什么？它是 HTML5 网页的一部分。

[http://tinypic.com/r/25rpk4o/6](http://tinypic.com/r/25rpk4o/6)

一种方法是用画布矩形绘制标题栏，然后将所有控件放在它下面。折叠可以用javascript来完成。但必须有更好的方法。

我想到的另一种方法是制作一个表格并将第一行作为标题栏，并在第二行添加子控件。它似乎工作正常，但 VS2012 一直告诉我我不能在 tr 中嵌套按钮。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-09T16:34:27.937

好的对不起，我误解了你的最初意思。

那么你可以看看下面的两个文件，一个是网页，另一个是用户控件，用户控件将代码复制并粘贴到两个新文件中，看看你的想法？

我尝试从您上传的原始图片重新创建控件并使用了 TABLE 标记，尽管您可能可以通过使用 DIVS 来减少 html 代码。

# 文件 1

```
<%@ Page Language="VB" %>
<%@ Register src="MyInlineWindow.ascx" tagname="MyInlineWindow" tagprefix="uc1" %>
<!-- HTML5 -->
<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml">
<head runat="server">
  <title></title>
  <script type="text/vbscript">
    Sub ShowInlineWindow()
    dim el
      set el = window.document.getElementById("MyInlineWindowCtrl")
      window.document.getElementById("Result").innerhtml = "Nothing"
      el.style.display = "block"
    End Sub

    Sub HideInlineWindow(YesNo)
    dim el
      set el = window.document.getElementById("MyInlineWindowCtrl")
      window.document.getElementById("Result").innerhtml = YesNo
      el.style.display = "none"
    End Sub
  </script>
</head>
<body>
<form id="form1" runat="server">
  <div>
    <input id="Button1" type="button" value="Interact" onclick="ShowInlineWindow()" /><br />[<label id="Result">Nothing</label>]
    <br /><br /><br /><br />
    <uc1:MyInlineWindow ID="MyInlineWindow1" runat="server" />
  </div>
</form>
</body>
</html> 
```

# 文件 2

```
<%@ Control Language="VB" ClassName="MyInlineWindow" %>
<table id="MyInlineWindowCtrl" style="display: none; border: 1px solid #333333; width: 640px;">
<tr>
    <td colspan="4" style="border-bottom-style: solid; border-bottom-width: 1px; background-color: #808080; color: #FFFFFF;">Window Title</td>
</tr><tr>
    <td style="width: 25%;">
        <table style="margin 8px: width: 100%;">
            <tr>
                <td>Label</td>
            </tr><tr>
                <td>
                    <select id="Select1" name="D1">
                        <option>Some drop down</option>
                    </select>
                </td>
            </tr><tr>
                <td>&nbsp;</td>
            </tr><tr>
                <td>Label</td>
            </tr><tr>
                <td>
                    <select id="Select2" name="D2">
                        <option>Some drop down</option>
                    </select>
                </td>
            </tr>
        </table>
    </td>
    <td style="width: 25%;">
        <table style="margin 8px: width: 100%;">
            <tr>
                <td>Label</td>
            </tr><tr>
                <td><input id="Radio1" checked="true" name="R1" type="radio" value="V1" /> Label</td>
            </tr><tr>
                <td><input id="Radio2" checked="true" name="R2" type="radio" value="V1" /> Label</td>
            </tr><tr>
                <td><input id="Radio3" checked="true" name="R3" type="radio" value="V1" /> Label</td>
            </tr><tr>
            <td><input id="Radio4" checked="true" name="R4" type="radio" value="V1" /> Label</td>
            </tr>
        </table>
    </td>
    <td style="width: 25%;">
        <table style="margin 8px: width: 100%;">
            <tr>
                <td colspan="2">Label</td>
            </tr><tr>
                <td>From</td>
                <td>To</td>
            </tr><tr>
                <td>
                    <select id="Select3" name="D3">
                        <option>Date Picker</option>
                    </select>
                </td>
                <td>
                    <select id="Select4" name="D4">
                        <option>Date Picker</option>
                    </select>
                </td>
            </tr><tr>
                <td>&nbsp;</td>
                <td>&nbsp;</td>
            </tr><tr>
                <td><input id="Radio5" checked="true" name="R5" type="radio" value="V1" /> Label</td>
                <td><input id="Radio6" checked="true" name="R6" type="radio" value="V1" /> Label</td>
            </tr>
        </table>
    </td>
    <td style="width: 25%;">
        <table style="margin 8px: width: 100%;">
            <tr>
                <td>&nbsp;</td>
            </tr><tr>
                <td>&nbsp;</td>
            </tr><tr>
                <td>&nbsp;</td>
            </tr><tr>
                <td>&nbsp;</td>
            </tr><tr>
                <td style="text-align: center">
                    <input id="Button1" type="button" value="Cancel" onclick="HideInlineWindow('Cancel')" />
                    <input id="Button2" type="button" value="Okay" onclick="HideInlineWindow('Okay')" />
                </td>
            </tr>
        </table>
    </td>
</tr>
</table> 
```

也许它更接近你想要的。我也使用了 VB 脚本，因为那是我最了解的，但将它移植/转置为 Javascript 应该不会太难。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-09T06:28:42.110

这个问题或类似的问题是在stackoverflow上问的......

[我有哪些替代模式或非模式对话框来显示信息和联系表格的方法？](https://stackoverflow.com/questions/12367389/what-are-my-alternatives-to-modal-or-modeless-dialogs-to-display-information-and)

也许那篇文章的最后一个帖子可以给你一些例子？

外部示例的直接链接是

[http://websemantics.co.uk/resources/accessible_css3_modal_pop-ups/](http://websemantics.co.uk/resources/accessible_css3_modal_pop-ups/)

# android - 如何将 /data/data 文件复制到 /sdcard？

> ID：15307935
> 
> 赞同：1
> 
> 时间：2013-03-09T06:22:50.387
> 
> 标签：android, linux, shell

我的APP需要root权限来做一些分析，所以我在我的代码中写成

" `Runtime.getRuntime().exec("su");`" ，然后将linux命令或shell脚本写入其中。

我试图将 /data/data/packagename/databases/webview.db 文件复制到 /sdcard/test （**源数据库文件是我手机中存在的所有应用程序数据文件，尽管 java 代码我只能获取我的应用程序的文件本身**），

然后做一些分析。但问题是，源文件名是一样的，如果我使用

“<code>cp -r /data/data/*/webview.db /sdcard/test”

目标目录中总是只有一个文件，我不太擅长 linux shell

命令，所以我想知道如何复制到目标目录并更改文件名或只是

保留源目录结构，如 /sdcard/test/package/webview.db 。我是中国人，我的

英文不太好，希望你能看懂，谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-09T11:10:17.640

我正在使用这段代码，它工作得很好！

```
 public void copyDbToSdcard() {
        try {
            File sd = Environment.getExternalStorageDirectory();
            File data = Environment.getDataDirectory();

            if (sd.canWrite()) {
                String currentDBPath = "//data//" + this.getPackageName()
                        + "//databases//db";
                String backupDBPath = Environment.getExternalStorageDirectory()
                        .toString() + "/Darama1/db";
                File currentDB = new File(data, currentDBPath);
                File backupDB = new File(sd, backupDBPath);

                if (currentDB.exists()) {
                    FileChannel src = new FileInputStream(currentDB)
                            .getChannel();
                    FileChannel dst = new FileOutputStream(backupDB)
                            .getChannel();
                    dst.transferFrom(src, 0, src.size());
                    src.close();
                    dst.close();
                }
            }
        } catch (Exception e) {
        }
    } 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-09T07:03:04.487

你可以使用亚行。

一旦你 USB 连接你的设备

你跑：

adb -s YOURDEVICE pull /data/data/packagename/databases/webview.db

了解您的设备是什么

你跑：

亚行设备

这样做你的桌面上有你的 webview.db 文件，你可以随意使用它

# django - 如何在模板中包含我的 urlconf 中的 url

> ID：15307941
> 
> 赞同：0
> 
> 时间：2013-03-09T06:23:38.623
> 
> 标签：django, url

urls.py 是：

```
url(r'^paypal',
        ListView.as_view(
            model=PaypalMail,
            context_object_name='paypal_email_links',
            template_name='tools/payment.html')), 
```

我想在模板中制作一个网址

```
{% url xxxx %} 
```

怎么写呢？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-09T06:26:27.640

首先在您的网址中添加一个名称 -

```
url(r'^paypal', ListView.as_view(model=PaypalMail,
       context_object_name='paypal_email_links',
       template_name='tools/payment.html'),
   name = 'paypal_view'), 
```

然后构造你的反向函数 -

```
{% url 'paypal_view' %} 
```

已阅读有关命名 url 模式的[文档。](https://docs.djangoproject.com/en/1.5/topics/http/urls/#naming-url-patterns)

# android - 从 XML 文件派生的多级 ListView？

> ID：15307942
> 
> 赞同：0
> 
> 时间：2013-03-09T06:23:45.160
> 
> 标签：android, xml, listview

我是 Java 和 Android 的新手。作为我的第一个项目，我想按照[本教程](http://www.androidhive.info/2012/03/android-building-audio-player-tutorial/)进行修改。我想将 ListView 从简单的播放列表更改为多级“音乐库”。我编写了一个 Python 程序，它扫描我 PC 上的 MP3 并输出一个看起来像这样的 XML 文件：

```
<group name="Epic Music">
    <song file="Globus - Preliator.mp3" />
    <song file="Dimmu Borgir - Gateways.mp3" />
</group>

<group name="Symphonic Metal">
    <song file="Dimmu Borgir - Gateways.mp3" />
    <song file="Nightwish - Wish I Had An Angel.mp3" />
    <song file="Within Temptation - Mother Earth.mp3" />
</group>

<group name="Cultures">

    <group name="Celtic">
        <song file="Loreena McKennitt - The Mummers' Dance.mp3" />
        <song file="Within Temptation - Mother Earth.mp3" />
    </group>

    <group name="French">
        <song file="Celine Dion - Les cloches du hameau.mp3" />
        <song file="Enigma - Sadeness, Pt. 1.mp3" />
    </group>

</group> 
```

我希望 ListView 由这样的 XML 文件填充，其中“组”标签的作用类似于文件夹和子文件夹。不幸的是，我不知道从哪里开始。

# java - Java 服务器中 GC 时间百分比的计算

> ID：15307945
> 
> 赞同：10
> 
> 时间：2013-03-09T06:24:24.363
> 
> 标签：java, performance, jakarta-ee, garbage-collection, jvm

我正在使用**jstat**来获取 GC 操作的总累积时间，即**GCT**

所以，假设 GCT 是 2 秒，我的 JVM 进程启动了 60 秒，我是在四核服务器上运行，所以我的 GC 百分比是

```
2 / 60 * 4 = 0.83% 
```

我上面的计算正确吗？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-03-09T08:05:03.110

不，您的计算不准确，因为这样，您不知道操作系统允许您的程序运行的确切时间。

假设您要考虑应用程序被 GC 完全停止的时间（暂停时间），您可以使用以下 JVM 选项：

```
-XX:+PrintGCApplicationConcurrentTime
-XX:+PrintGCApplicationStoppedTime 
```

此选项将使 JVM 将类似这样的内容打印到标准输出：

```
Application time: 3.3319318 seconds
Total time for which application threads were stopped: 0.7876304 seconds
Application time: 2.1039898 seconds
Total time for which application threads were stopped: 0.4100732 seconds 
```

然后，您可以总结应用程序停止的时间，并将其除以应用程序时间加上暂停时间的总和，以获得 mutator 利用率（应用程序未被 GC 暂停的时间分数）。

另见[http://prefetch.net/blog/index.php/2008/02/18/measuring-the-time-an-application-was-stopped-due-to-garbage-collection/](http://prefetch.net/blog/index.php/2008/02/18/measuring-the-time-an-application-was-stopped-due-to-garbage-collection/)

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-03-09T06:29:19.910

不，不是。您的计算假设 java 进程在整个时间内对所有 4 个内核的利用率为 100%。

正确的计算是`(time spent in logic) / (time spent in gc)`但获得第一条信息通常需要一个分析器。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-09T09:11:36.493

[PrintGCDetails](https://blogs.oracle.com/jonthecollector/entry/the_unspoken_cms_and_printgcdetails) - 此选项可能会有所帮助。它打印有关每个垃圾收集的信息。

```
[GC
[PSYoungGen: 99952K->14688K(109312K)]
422212K->341136K(764672K), 0.0631991 secs]
[Times: user=0.83 sys=0.00, real=0.06 secs] 
```

> 提供 CPU 使用率和经过的时间信息。user右边的值是垃圾收集在操作系统外执行指令所使用的CPU时间。在此示例中，垃圾收集器使用了 0.06 秒的用户 CPU 时间。sys 右边的值是操作系统代表垃圾收集器使用的 CPU 时间。在此示例中，垃圾收集器没有使用任何 CPU 时间来代表垃圾收集执行操作系统指令。real 右边的值是垃圾收集的经过的挂钟时间（以秒为单位）。在此示例中，完成垃圾收集需要 0.06 秒。

[Java Performance](https://rads.stackoverflow.com/amzn/click/com/0137142528) - 好书，可以在数字版中找到。包含一篇关于衡量 GC 影响的精彩文章。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2016-04-22T09:19:47.850

不，计算不正确。你*要*计算的是

```
( CPU spent on GC ) / ( total CPU spent on JVM) 
```

正如其他评论中所指出的，“在 JVM 上花费的总 CPU”将低于 60*4，因为这假设您的应用程序完全系统负载并且操作系统或其他应用程序没有花费 CPU 周期。在 linux 上，可以使用“time”和“ps”命令在这里找到正确的数字。

但是，通过 jstat 命令也很难找出“用于 GC 的 CPU”。我怀疑 jstat 报告的是挂钟时间（而不是 CPU 时间），这对于上面的计算毫无用处——同样，你不知道 GC 是否在挂钟时间段内完全加载了所有内核。令人惊讶的是，没有关于 jstat 命令报告什么样的时间（挂钟与 CPU）的明确文档——如果我错过了，请在此处发表评论。

# ios - 如何为 UISearchbar 框架更改设置动画以保持圆角大写？

> ID：15307948
> 
> 赞同：0
> 
> 时间：2013-03-09T06:24:37.390
> 
> 标签：ios, ios5, ios6, uisearchbar, uiviewanimation

我想为 UISearchbar 的帧更改设置动画。我希望它在点击搜索按钮时展开和折叠。

我正在使用`UIViewAnimationBlock`动画

```
[UIView animateWithDuration:0.5
                              delay:0
                            options:UIViewAnimationOptionLayoutSubviews
                         animations:^{
                             //Set the frame you want to the search bar
                         }
                         completion:^(BOOL finished) {

                         }]; 
```

我必须从零扩展框架并将其折叠回来。但是在制作动画时，搜索栏失去了圆角并变成了一个矩形。这是它的屏幕截图，同时仍然是动画![在此处输入图像描述](../Images/ff0e04a126635772609a87696d8b8d17.png)

好吧，它看起来不太好……我希望它在展开或折叠时保持圆润的边缘。是否可以 ？如果是怎么办？

任何帮助将非常感激。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-15T11:00:07.433

您无法更改 UISearchBar 的高度尝试设置高度为 44px 的框架。

如果你想改变高度然后使用 CGAffineTransformMakeScale 像..

```
//FOR EXPAND USE THIS:

[UIView animateWithDuration:0.5
                              delay:0
                            options:UIViewAnimationOptionLayoutSubviews
                         animations:^{
                             self.searchBar.transform = CGAffineTransformMakeScale(1.0, 1.0);
                         }
                         completion:^(BOOL finished) {

                         }]; 
```

和

//为了扩展使用这个：

```
[UIView animateWithDuration:0.5
                              delay:0
                            options:UIViewAnimationOptionLayoutSubviews
                         animations:^{
                             self.searchBar.transform = CGAffineTransformMakeScale(0.001, 0.001);
                         }
                         completion:^(BOOL finished) {

                         }]; 
```

# php - PHP:PDO: 为什么我的数据不能插入？

> ID：15307950
> 
> 赞同：0
> 
> 时间：2013-03-09T06:24:45.173
> 
> 标签：php, mysql, database, insert, pdo

我不知道我的代码有什么问题。它不会将数据插入数据库。这里是。

```
$adduser = $con->prepare("INSERT INTO 'basicuserinfo'(email, password, firstname, lastname) VALUES(:email, :password, :firstname, :lastname)");
    $adduser->bindValue(':email', $email);
    $adduser->bindValue(':password', $password);
    $adduser->bindValue(':firstname', $firstname);
    $adduser->bindValue(':lastname', $lastname);
    $adduser->execute(); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-09T06:27:44.967

`INSERT INTO 'basicuserinfo'(email, password, firstname, lastname) VALUES(:email, :password, :firstname, :lastname)`

这不是有效的 SQL 语句。摆脱`'`s。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-09T06:29:20.160

你确定它成功了吗？您没有检查执行，如下所示：

```
if(!$adduser->execute()) echo "Execute failed"; 
```

您可能会发现它在表名周围的 ' 上引发错误。

* * *

## 回答 #3

> 赞同：-2
> 
> 时间：2013-03-09T06:30:10.690

试试这个..

```
$adduser = $con->prepare("INSERT INTO `basicuserinfo`(email, password, firstname, lastname) 
                         VALUES(?, ? , ? , ? )");
$adduser->bindParam('ssss', $email,$password , $firstname,$lastname);
$adduser->execute(); 
```

以这种方式准备语句，您可以减少执行时间..

然后不要在表名之前放置叛教

# linux - 使用 gcc 编译 Linux 设备驱动模块

> ID：15307951
> 
> 赞同：0
> 
> 时间：2013-03-09T06:25:08.840
> 
> 标签：linux, gcc, linux-device-driver

我有一个基本的 linux 设备驱动模块：

```
#include <linux/init.h>
#include <linux/module.h>   
#include <linux/kernel.h>

static int __init hello_init(void)
{
printk(KERN_ALERT "Hello, world \n");
return 0;
}

static void __exit hello_exit(void)
{
printk(KERN_ALERT "Goodbye, world \n");
}

module_init(hello_init);
module_exit(hello_exit); 
```

我能够以传统方式编译这个模块，即使用一个使用 obj-m 的简单 Makefile，但我想使用命令行 gcc 编译它。这是因为我可以使用 gcc -save-temps 标志来查看中间生成的文件（这对于理解 Linux 内核使用大量预处理器内容特别有帮助）。

那么有没有办法使用命令行 gcc 进行编译？

**编辑**附加我用过的 Makefile

```
ifeq ($(KERNELRELEASE),)
    KERNELDIR ?= /lib/modules/$(shell uname -r)/build
    PWD := $(shell pwd)

EXTRA_CFLAGS+= -save-temps

modules:
    $(MAKE) -C $(KERNELDIR) M=$(PWD) modules

modules_install:
    $(MAKE) -C $(KERNELDIR) M=$(PWD) modules_install

clean:
    rm -rf *.o *~ core .depend .*.cmd *.ko *.mod.c .tmp_versions

.PHONY: modules modules_install clean

else

    obj-m := hello.o
endif 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-09T10:02:28.417

您可以尝试在模块的 Makefile 中添加“EXTRA_CFLAGS”吗？例如 EXTRA_CFLAGS += -save-temps

希望对你有帮助！

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-13T23:30:55.433

我不知道如何直接在 Makefile 中执行此操作，但您可以逐个文件生成*.i*文件。从 Linux 内核源代码的根目录：

```
make drivers/media/pci/sta2x11/sta2x11_vip.i 
```

这将生成*.i*文件。要生成模块源文件（位于内核树之外），只需使用它的绝对路径：

```
make /path/to/hello.i 
```

它应该工作

# c# - 如何在 Windows Phone 中打印异常？

> ID：15307953
> 
> 赞同：1
> 
> 时间：2013-03-09T06:25:31.177
> 
> 标签：c#, windows-phone-8

我正在尝试为 windows phone 8 编写应用程序。如果有任何异常，我想将异常打印到屏幕上。所以这就是我正在做的事情：

```
try
            {
               //The code which I want to handle for exception
            }
            catch (Exception e)
            {
                ErrorStatus.Text = e.Message + "\n\n" + e.Source + "\n\n" + e.StackTrace;
            } 
```

我的文本块在哪里`ErrorStatus`。但是，我的 catch 块中唯一的一行是在运行时给我一个异常。例外是：

`A first chance exception of type 'System.UnauthorizedAccessException' occurred in System.Windows.ni.dll An exception of type 'System.UnauthorizedAccessException' occurred in System.Windows.ni.dll and wasn't handled before a managed/native boundary`

我在语法上做错了吗？我是 C# 编程和 Windows Phone 编程的新手。

编辑：

有关异常的更多详细信息：

```
System.UnauthorizedAccessException was unhandled by user code
HResult=-2147024891
Message=Invalid cross-thread access.
Source=System.Windows
InnerException: 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-09T08:33:17.967

您需要从 UI 线程显示您的消息：网络调用总是在后台工作线程上回调。因此，您需要调用 Dispatcher 以使其在 UI 线程上运行。

您也可以只使用`Exception.ToString()`将消息内容显示为字符串。这还具有在您正在处理的异常中显示任何嵌套异常的优点。

作为临时措施，请尝试：

```
catch (Exception e)
{
    Deployment.Current.Dispatcher.BeginInvoke(() =>
    {
        ErrorStatus.Text = e.ToString();
    }
} 
```

更持久的是，您应该修复问题或将其记录到文件中，这样您就不会捕获掩盖代码中错误的异常。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2016-01-16T07:00:01.250

这是打印异常消息的最佳方法，以便您知道问题出在哪里：

```
try{}
catch(Exception ex)
{
    await new MessageDialog("Error message:\n\n" + ex.message).ShowAsync();
} 
```

# c++ - 结构参数的默认值

> ID：15307954
> 
> 赞同：6
> 
> 时间：2013-03-09T06:25:32.893
> 
> 标签：c++, struct, initialization, default-value, static-initialization

假设我有以下结构：

```
struct myStruct
{
 int x;
 int y;
 int z;
 int w;
}; 
```

我想在调用以下函数时将此结构初始化为默认值。如果有帮助，我正在寻找一个简单的零初始化。

```
void myFunc(myStruct param={0,0,0,0})
{
 ...
} 
```

然而，这段代码给了我编译错误。我试过VS2003和VS2008。

**注意：**我看过其他提到使用构造函数的答案。但是，我*希望*用户查看我用于初始化的值。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2014-06-02T09:47:12.500

在您的**myStruct**中添加**默认构造函数**将解决您的问题。

 **```
struct myStruct {
   myStruct(): x(0),y(0), z(0), w(0) { }   // default Constructor
   int x, y, z, w;
}; 
```

**函数声明：**

```
void myFunc(myStruct param = myStruct()); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-09T07:34:27.967

对于完全实现值初始化的现代 C++ 编译器，具有以下值初始化默认值来对 myStruct 的数据成员进行零初始化就足够了：

```
myFunc(myStruct param=myStruct()) 
```

对于其他编译器，您应该使用以下内容：

```
myStruct zeroInitilizer() {
   static myStruct zeroInitilized;
   return zeroInitilized;
}
myFunc(myStruct param=zeroInitilizer()) 
```

为避免编译器细节考虑使用[http://www.boost.org/doc/libs/1_53_0/libs/utility/value_init.htm](http://www.boost.org/doc/libs/1_53_0/libs/utility/value_init.htm)**

# arrays - 最大化所有可能子数组的特定总和

> ID：15307961
> 
> 赞同：12
> 
> 时间：2013-03-09T06:27:18.497
> 
> 标签：arrays, algorithm, sub-array

考虑一个像下面这样的数组：

```
 {1, 5, 3, 5, 4, 1} 
```

当我们选择一个子数组时，我们将它减少到子数组中的最小数字。例如，子数组`{5, 3, 5}`变为`{3, 3, 3}`。现在，子数组的总和被定义为结果子数组的总和。例如，`{5, 3, 5}`总和是`3 + 3 + 3 = 9`。任务是找到可以从任何子数组中得出的最大可能和。对于上述数组，最大和为 12，由 subarray 给出`{5, 3, 5, 4}`。

是否有可能比 O(n ² ) 更及时地解决这个问题？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-03-09T08:03:57.790

我相信我有一个在 O(n) 时间内运行的算法。我将首先描述算法的未优化版本，然后给出完全优化的版本。

为简单起见，我们首先假设原始数组中的所有值都是不同的。这通常不是真的，但它提供了一个很好的起点。

该算法背后的关键观察如下。找到数组中的最小元素，然后将数组拆分为三部分 - 最小值左侧的所有元素、最小值元素本身以及最小值右侧的所有元素。从示意图上看，这看起来像

```
 +-----------------------+-----+-----------------------+
 |     left values       | min |      right values     |
 +-----------------------+-----+-----------------------+ 
```

这是关键的观察结果：如果您采用给出最佳值的子数组，则以下三件事之一必须为真：

1.  该数组由数组中的所有值组成，包括最小值。这具有总值 min * n，其中 n 是元素的数量。
2.  该数组不包括最小元素。在这种情况下，子数组必须完全位于最小值的左侧或右侧，并且不能包含最小值本身。

这给出了一个很好的初始递归算法来解决这个问题：

*   如果序列为空，则答案为 0。
*   如果序列非空：
    *   找出序列中的最小值。
    *   返回以下的最大值：
        *   最小值左侧子数组的最佳答案。
        *   最小值右侧的子数组的最佳答案。
        *   元素数乘以最小值。

那么这个算法的效率如何？嗯，这真的取决于最小元素在哪里。如果您考虑一下，我们会进行线性工作以找到最小值，然后将问题分成两个子问题并在每个子问题上递归。这与您在考虑快速排序时得到的重复出现完全相同。这意味着在最好的情况下，它将花费 Θ(n log n) 时间（如果我们总是在每一半的中间有最小元素），但在最坏的情况下，它将花费 Θ(n ² ) 时间（如果我们总是在最左边或最右边有最小值。

但是请注意，我们花费的所有精力都用于在每个子数组中找到最小值，这对于 k 个元素需要 O(k) 时间。如果我们可以将其加速到 O(1) 时间会怎样？在这种情况下，我们的算法会做更少的工作。更具体地说，它只会做 O(n) 的工作。这样做的原因如下：每次我们进行递归调用时，我们都会做 O(1) 工作以找到最小元素，然后从数组中删除该元素并递归处理剩余的部分。因此，每个元素最多可以是一个递归调用的最小元素，因此递归调用的总数不能大于元素的数量。这意味着我们最多进行 O(n) 次调用，每个调用都进行 O(1) 次工作，这总共需要 O(1) 次工作。

那么我们究竟如何获得这种神奇的加速呢？**[在这里，我们可以使用一种被称为笛卡尔树](http://en.wikipedia.org/wiki/Cartesian_tree)**的令人惊讶的通用且未被充分认识的数据结构。笛卡尔树是由具有以下属性的元素序列创建的二叉树：

*   每个节点都小于其子节点，并且
*   笛卡尔树的中序游走按照它们出现的顺序返回序列中的元素。

例如，序列`4 6 7 1 5 0 2 8 3`有这个笛卡尔树：

```
 0
      / \
     1   2
    / \   \
   4   5   3
    \     /
     6   8
      \
       7 
```

这就是我们获得魔力的地方。只需查看笛卡尔树的根，我们就可以立即找到序列的最小元素——这只需要 O(1) 时间。一旦我们这样做了，当我们进行递归调用并查看最小元素左侧或右侧的所有元素时，我们只是递归地下降到根节点的左右子树，即意味着我们可以在 O(1) 时间内读取这些子数组的最小元素。漂亮！

真正的美妙之处在于，可以在 O(n) 时间内为 n 个元素的序列构造一棵笛卡尔树。该算法[在 Wikipedia 文章的这一部分中](http://en.wikipedia.org/wiki/Cartesian_tree#Efficient_construction)有详细说明。这意味着我们可以获得一个超快速的算法来解决您的原始问题，如下所示：

*   为数组构造一棵笛卡尔树。
*   使用上面的递归算法，但是使用笛卡尔树来寻找最小元素而不是每次都做线性扫描。

总体而言，这需要 O(n) 时间并使用 O(n) 空间，这是对您最初使用的 O(n ² ) 算法的时间改进。

在讨论开始时，我假设所有数组元素都是不同的，但这并不是必需的。您仍然可以通过将每个节点小于其子节点的要求更改为每个节点不大于其子​​节点来为其中包含非不同元素的数组构建笛卡尔*树*。这不会影响算法的正确性或其运行时间；我将把它作为众所周知的“读者练习”。:-)

这是一个很酷的问题！我希望这有帮助！

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-03-09T06:44:44.347

假设这些数字都是非负数，这不就是“最大化直方图中的矩形区域”的问题吗？现在已经成名了……

O(n) 解是可能的。这个网站： http: [//blog.csdn.net/arbuckle/article/details/710988](http://blog.csdn.net/arbuckle/article/details/710988)有一堆简洁的解决方案。

为了详细说明我的想法（可能不正确），请将每个数字视为宽度为 1 的直方图矩形。

通过“最小化”一个子数​​组 [i,j] 并加起来，您基本上得到了直方图中从 i 到 j 的矩形区域。

这之前出现在 SO：[Maximize the rectangle area under Histogram](https://stackoverflow.com/questions/4311694/maximize-the-rectangular-area-under-histogram)，你可以找到代码和解释，以及官方解决方案页面的链接（[http://www.informatik.uni-ulm.de/acm/Locals/2003/html /judge.html](http://www.informatik.uni-ulm.de/acm/Locals/2003/html/judge.html) )。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-09T17:10:51.477

我尝试的以下算法将具有最初用于对数组进行排序的算法的顺序。例如，如果初始数组使用二叉树排序，则最佳情况为 O(n)，平均情况为 O(n log n)。

**算法要点：**

数组已排序。存储排序后的值和相应的旧索引。从相应**的旧索引**创建二叉搜索树，该索引用于确定它可以向前和向后移动多远而不会遇到小于当前值的值，这将导致最大可能的子数组。

我将在问题 [1, 5, 3, 5, 4, 1] 中解释使用数组的方法

```
 1  5  3  5  4  1
                  -------------------------
 array indices =>     0  1  2  3  4  5  
                  ------------------------- 
```

该数组已排序。按升序存储值及其索引，如下所示

```
 1  1  3  4  5  5
                                 -------------------------
 original array indices =>         0  5  2  4  1  3  
 (referred as old_index)         ------------------------- 
```

参考价值及其旧指数很重要；像一个关联数组；

需要明确的几个术语：

old_index 指的是一个元素对应的原始索引（即原始数组中的索引）；

例如，对于元素 4，old_index 为 4；current_index 为 3；

而 current_index 指的是排序数组中元素的索引；current_array_value 指的是排序数组中的当前元素值。

pre 指的是有序的前身；succ 指的是顺序后继者

另外，最小值和最大值可以直接从排序后的数组的第一个和最后一个元素中获取，分别是 min_value 和 max_value；

现在，算法如下，应该在排序数组上执行。

**算法：**

从最左边的元素开始。

对于排序数组左侧的每个元素，应用此算法

```
 if(element == min_value){

    max_sum = element * array_length;

        if(max_sum > current_max)
        current_max = max_sum;

        push current index into the BST;

    }else if(element == max_value){

        //here current index is the index in the sorted array
        max_sum = element * (array_length - current_index);

        if(max_sum > current_max)
        current_max = max_sum;

        push current index into the BST;

    }else {

        //pseudo code steps to determine maximum possible sub array with the current element 

        //pre is inorder predecessor and succ is inorder successor

        get the inorder predecessor and successor from the BST;

        if(pre == NULL){

            max_sum = succ * current_array_value;

            if(max_sum > current_max)
            current_max = max_sum;

        }else if (succ == NULL){

            max_sum = (array_length - pre) - 1) * current_array_value;

            if(max_sum > current_max)
            current_sum = max_sum;

        }else {

        //find the maximum possible sub array streak from the values

        max_sum = [((succ - old_index) - 1) + ((old_index - pre) - 1) + 1] * current_array_value;

            if(max_sum > current_max)
            current_max = max_sum;

        } 

    } 
```

例如，

原始数组是

```
 1  5  3  5  4  1
                  -------------------------
 array indices =>     0  1  2  3  4  5  
                  ------------------------- 
```

排序后的数组是

```
 1  1  3  4  5  5
                                 -------------------------
 original array indices =>         0  5  2  4  1  3  
 (referred as old_index)         ------------------------- 
```

**在第一个元素之后**：

max_sum = 6 [会减少到 1*6]

```
 0 
```

**在第二个元素之后**：

max_sum = 6 [会减少到 1*6]

```
 0
         \
          5 
```

* * *

**第三个元素之后：**

```
 0
         \
          5
         /
        2 
```

中序遍历结果：0 2 5

应用算法，

max_sum = [((succ - old_index) - 1) + ((old_index - pre) - 1) + 1] * current_array_value;

max_sum = [((5-2)-1) + ((2-0)-1) + 1] * 3 = 12

**current_max = 12 [最大可能值]**

* * *

**在第四个元素之后**：

```
 0
         \
          5
         / 
        2   
         \
          4 
```

中序遍历结果：0 2 4 5

应用算法，

max_sum = 8 [小于 12 被丢弃]

**在第五个元素之后**：

max_sum = 10 [减少到 2 * 5，因为小于 8 而被丢弃]

**在最后一个元素之后**：

max_sum = 5 [减少到 1 * 5，因为小于 8 被丢弃]

该算法将具有最初用于对数组进行排序的算法的顺序。例如，如果初始数组使用二元排序进行排序，则最佳情况为 O(n)，平均情况为 O(n log n)。

空间复杂度将为 O(3n) [O(n + n + n)，n 用于排序值，另一个 n 用于旧索引，另一个 n 用于构造 BST]。但是，我不确定这一点。感谢您对算法的任何反馈。

# php - MySQL PHP查询从多个表中选择

> ID：15307966
> 
> 赞同：0
> 
> 时间：2013-03-09T06:28:13.860
> 
> 标签：php, mysql

我在这里有一个搜索脚本，需要使用 MySQL 和 PHP 在多个表中搜索短语/单词。`name`正在搜索的列列在表中都是相同的。任何帮助将不胜感激，下面是我的代码：

```
<?php
    $filter = $_REQUEST['query'];
    mysql_connect($hostname,$username, $password) or die ("<script language='JavaScript'>alert('Unable to connect to database! Please try again later.'),history.go(-1)</script>");
    mysql_select_db($dbname);
    $query = 'SELECT * FROM (SELECT `name` FROM `voxmoviesfilestable`) a UNION (SELECT `name` FROM `voxadultfilestable`) b UNION (SELECT `name` FROM `voxmixesfilestable`) c UNION (SELECT `name` FROM `voxconcertsfilestable`) d UNION (SELECT `name` FROM `voxmp3filestable`) e UNION (SELECT `name` FROM `voxfilestable`) WHERE `name` REGEXP \''.$filter.'\' ORDER BY `name`;';
    $maxquery = 'SELECT count(*) as cnt FROM `voxmoviesfilestable`, `voxadultfilestable`, `voxmixesfilestable`, `voxconcertsfilestable`, `voxmp3filestable`, `voxfilestable` WHERE `name` REGEXP \''.$filter.'\';';

    $result = mysql_query($query) or die ('Error accessing Database');
?> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-09T06:41:02.863

命令“select ... from table1, table2, table3 ...”并没有按照您的想法执行。它将每个表的每一行与每个其他表的每一行进行大规模连接。这是非常糟糕的。看起来你想要联合。但是，这并不容易，因为您必须让列看起来相似。它看起来像：

```
select * from ((select id, name from table1) a union (select id, name from table2) b union ...) where regexp '$filter' order by name 
```

注意：在最初写这篇文章大约 12 小时后，我在联合部分周围添加了括号。

联合需要时间，但我相信它比在 PHP 中单独查询每个表要快。

# c# - 模型将集合属性与局部视图绑定

> ID：15307978
> 
> 赞同：5
> 
> 时间：2013-03-09T06:29:42.537
> 
> 标签：c#, .net, asp.net-mvc, asp.net-mvc-4, model-binding

假设我有这样的模型：

```
public class Foo {
    public List<Bar> Bars { get; set; }
    public string Comment { get; set; }
}

public class Bar {
    public int Baz { get; set; }
} 
```

我想要一个`Foo`允许用户编辑`Bar`项目的视图。但有一个问题：我希望`Bar`编辑由部分视图处理。

```
@model Web.ViewModels.Foo

@using(Html.BeginForm()) {
    @Html.Partial("_EditBars", Model.Bars)
    @Html.TextAreaFor(m => m.Comment)
    ...
} 
```

`_EditBars`部分视图类似于：

```
@model List<Web.ViewModels.Bar>

@for (int i = 0; i < Model.Count; i++) {
    @Html.EditorFor(m => Model[i].Baz)
} 
```

我希望这个模型绑定到我的动作，它看起来像：

```
[HttpPost]
public ActionResult Edit(Foo foo) {
    // Do stuff
} 
```

不幸的是，这是我发布的数据，它没有模型绑定`Bars`属性：

```
[1].Baz=10&[0].Baz=5&Comment=bla 
```

这不起作用是有道理的，因为它缺少`Bars`前缀。如果我理解正确，我需要它是这样的：

```
Bars[1].Baz=10&Bars[0].Baz=5&Comment=bla 
```

所以，我尝试[了这种方法](https://stackoverflow.com/a/4807655/546561)：

```
@Html.Partial(
    "_EditBars",
    Model.Bars,
    new ViewDataDictionary(ViewData)
    {
        TemplateInfo = new TemplateInfo
        {
            HtmlFieldPrefix = "Bars"
        }
    }) 
```

但这也行不通。有了这个，我得到：

```
Bars.[1].Baz=10&Bars.[0].Baz=5&Comment=bla 
```

我认为由于额外的时间段（`Bars.[1]`vs. `Bars[1]`），这不起作用。我能做些什么来获得我想要的结果吗？

**注意：**这是对我的实际情况的过度简化。我认识到，有了这么简单的东西，在我看来，最好的方法可能是使用`EditorTemplate`for`Bar`和循环`EditorFor`。如果可能的话，我想避免这种解决方案。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-09T10:04:58.543

由于您不想使用`EditorTemplate`for `Bar`，因此您的方案的解决方案可能是：

将“_EditBars”部分视图的@model 类型更改为`Foo`，视图应如下所示：

```
@model Foo

@if (Model.Bars != null)
{
    for (int i = 0; i < Model.Bars.Count; i++)
     {
         @Html.EditorFor(m => Model.Bars[i].Baz)
     }
} 
```

（最好将部分视图的名称更改为`'_EditFooBars'`）

希望这可以帮助。

# matlab - Matlab中的“未定义函数或变量”

> ID：15307979
> 
> 赞同：0
> 
> 时间：2013-03-09T06:29:53.390
> 
> 标签：matlab

这是我的代码：

```
 function [im,sindx,end1]=alln(im,i,j,secret,sindx,end1)
    slen=length(secret);
    p=im(i,j);
    neigh= [im(i-1,j) im(i+1,j) im(i,j-1) im(i,j+1) im(i-1,j-1) im(i+1,j-1) im(i-1,j+1) im(i+1,j+1)];
    minpix = min (neigh)
    maxpix = max (neigh)

        if minpix < p < maxpix
        lowlim = minpix+1;
        highlim = maxpix-1;   
        range = highlim-lowlim+1;

        nbits=floor(log2(abs(range)));   

        if sindx+nbits-1>slen
            end1=1;
            return
        end
        for k=1:nbits
            bin(k)=secret(sindx+k-1);
        end
        b = bin2dec(bin);
        newvalue1 = abs (minpix + b);
        newvalue2 = abs (maxpix - b);
        if abs(p-newvalue1)<= abs(p-newvalue2)
            im(i,j) = newvalue1;
        else
            im(i,j) = newvalue2;
        end

        sindx=sindx+nbits;

    end
end 
```

我的主程序调用了这个函数。当我运行程序时，我收到以下错误消息：

```
??? Undefined function or variable "bin".

Error in ==> alln at 34
            b = bin2dec(bin); 
```

我知道有很多专家认为这根本不是问题。我是 MATLAB 新手。请各位大神指路，代码中的哪种类型的修改可以解决这个问题？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-09T06:46:36.383

首先，文件中是否缺少某些行？也许您已经从顶部删除了一些评论？因为错误信息说

```
b = bin2dec(bin); 
```

是第 34 行，但它是您提供的代码中的第 22 行。

好吧，那一边...

错误消息说'bin'没有定义，但我看到它被设置在线......

```
bin(k)=secret(sindx+k-1); 
```

这向我表明，那条线没有运行。

我看到 bin = ... 行在“for”循环内，所以我怀疑 for 循环运行了零次，这意味着“bin”永远不会被定义。什么是 nbits？是 1，还是可能小于 1？这将完全阻止循环运行。

尝试从末尾删除分号

```
nbits=floor(log2(abs(range))); 
```

行并再次运行您的代码。

省略分号将强制在命令行窗口中打印 nbits 的值。我打赌你会发现它是 1 或更少。如果是这种情况，那么开始研究如何计算 nbits，我敢打赌你会发现问题所在。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-09T06:47:56.157

函数的输入参数是什么`alln`，你得到错误了吗？

让我们假设它`nbits`是 0，那么下面的循环将不会运行：

```
for k=1:nbits
    bin(k)=secret(sindx+k-1);
end 
```

所以，`bin`将是未定义的。所以，错误发生了。这是可能发生错误的情况之一。这种可能的情况很多。

# uiview - UITableViewCell 中的自定义 UIView

> ID：15307982
> 
> 赞同：0
> 
> 时间：2013-03-09T06:30:05.940
> 
> 标签：uiview, uitableview

我表中的一个 UITableViewCells 包含一个 UIView，它就像一个 5 星评级。但是，无法选择视图。

我所基于的教程是 Ray Wenderlich 的以下内容： [http ://www.raywenderlich.com/1768/how-to-make-a-custom-uiview-a-5-star-rating-view](http://www.raywenderlich.com/1768/how-to-make-a-custom-uiview-a-5-star-rating-view)

有任何想法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-09T06:44:07.030

是否`User Interaction Enabled`检查了故事板文件中的评分视图？在情节提要编辑器的实用工具右侧边栏中，在“属性”检查器的“视图”部分下，您应该找到“启用用户交互”复选框。（类似的复选框也出现在“身份”检查器中，有关详细信息，[请参见此处](https://stackoverflow.com/questions/5603867/xcode-why-does-user-interaction-enabled-appear-twice)。）

# c# - 从局域网计算机访问 asp.net Web 应用程序

> ID：15307986
> 
> 赞同：0
> 
> 时间：2013-03-09T06:30:29.753
> 
> 标签：c#, asp.net

我有一个带有 Windows Server 2008 的系统（服务器）和超过 5 个系统作为客户端系统。Visual Studio 2008 安装在每个系统（服务器和客户端）上。我已经在服务器上安装了 IIS-7。我需要使用 Visual Studio 2008 从服务器访问我的 asp.net Web 项目到客户端系统。当我使用文件系统从本地系统打开该项目时，出现错误：

> 已达到网络 BIOS 命令限制

谁能告诉我如何从客户端系统访问 asp.net web 项目

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-10T09:51:08.180

在客户端系统上安装 windows-7 之后。这个问题就解决了。现在我可以从 LAN 计算机调试我的 Web 项目。

# jquery - jQuery ajax 方法中的错误和页面刷新

> ID：15307989
> 
> 赞同：3
> 
> 时间：2013-03-09T06:30:50.580
> 
> 标签：jquery, ajax, codeigniter

```
 $('.cn').click(function() {
        var pic_id = $(this).attr('href');
         console.log(pic_id);
        //alert(pic_id);

     $.ajax({
            type: "POST",
            url: "<?php echo base_url();?>anda/coins",
            async: false,
            data: "pic_id="+pic_id,
            dataType: 'json',
            success: function(data){
                //alert(data);
                $('.cn_point').html(data.id);
            }
          });

        }); 
```

我得到了回调值并显示，但页面刷新和跨度隐藏的值。有没有人可以帮助我？我找不到我的错误。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-09T06:33:08.003

尝试使用`preventDefault`：

```
$('.cn').click(function (e) {
    e.preventDefault();
    var pic_id = $(this).attr('href');
    console.log(pic_id);
    //alert(pic_id);

    $.ajax({
        type : "POST",
        url : "<?php echo base_url();?>anda/coins",
        async : false,
        data : "pic_id=" + pic_id,
        dataType : 'json',
        success : function (data) {
            //alert(data);
            $('.cn_point').html(data.id);
        }
    });

}); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-09T06:34:10.950

这是因为您单击了该链接，并且它总是会刷新您的页面。

```
$('.cn').click(function() {

   e.preventDefault();
    var pic_id = $(this).attr('href');
     console.log(pic_id);
    //alert(pic_id);

     $.ajax({
        type: "POST",
        url: "<?php echo base_url();?>anda/coins",
        async: false,
        data: "pic_id="+pic_id,
        dataType: 'json',
        success: function(data){
            //alert(data);
            $('.cn_point').html(data.id);
        }
      });

    }); 
```

# c# - 无法从c#连接到excel

> ID：15307991
> 
> 赞同：0
> 
> 时间：2013-03-09T06:31:00.457
> 
> 标签：c#, excel, ms-jet-ace

我想从我的 ASP.NET 应用程序连接到一个 .xlsx 文件。

这是我的连接字符串：

```
string connString = "Provider=Microsoft.ACE.OLEDB.12.0;Driver={Microsoft Excel Driver (*.xls, *.xlsx, *.xlsm, *.xlsb)};Data Source=\"C:\\MyExcel.xlsx\";Extended Properties=\"Excel 12.0 Xml;HDR=NO\"";

OleDbConnection oleConnection = new OleDbConnection(connString); 
```

但是当我尝试打开连接时，我得到 **找不到可安装的 ISAM**

*   办公版本：2007
*   操作系统：Windows 7 64 位
*   .NET 框架 4.0
*   [从http://www.microsoft.com/en-us/download/details.aspx?id=13255](http://www.microsoft.com/en-us/download/details.aspx?id=13255)下载了**32 位**ACE 驱动程序

我什至将我的应用程序的平台目标更改为 x86，但没有成功。

请帮忙！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-09T07:14:32.617

将连接字符串更改为：

```
"Provider=Microsoft.ACE.OLEDB.12.0;Data Source=\"C:\\MyExcel.xlsx\";Extended Properties=\"Excel 12.0 Xml;HDR=NO\""; 
```

`Driver=...`使用 ODBC 驱动程序连接时需要该部件。使用 OLEDB 连接时，指定`Provider`就足够了。有关详细信息，请参阅[此页面](http://www.microsoft.com/en-us/download/details.aspx?id=13255)。

# android - 实现类似于 Android 的模式锁定系统的东西

> ID：15307994
> 
> 赞同：0
> 
> 时间：2013-03-09T06:31:31.263
> 
> 标签：android, user-interface, graphics

假设我的显示器由数字 1-9 组成，这些数字通过 3x3 的`Button`s 网格显示，就像在 num-pad 上一样，每个按钮上放置一个数字。我希望能够检测复杂的运动，例如 Z 的跟踪，这将产生 [ `7` `8` `9` `5` `1` `2` `3`] 或从左上角到右下角的滑动，这将产生 [ `7` `5` `3`]。我读到我可以通过覆盖来实现这一点`boolean onTouchEvent(MotionEvent event)`，但我不确定我是否理解它是如何工作的。从 Android API for `MotionEvent`s 可以看出，每当触摸屏幕上的对象时，无论一个人的手指是否仍在跟踪或抬起，它都会被`ACTION_UP`. 如果这是真的，

1.  如果您愿意，我如何获取历史记录或堆栈跟踪？我可以实时执行此操作，还是必须等待拖动完成？

2.  我如何实际突出/绘制他们的手指/手写笔正在追踪的路径（实时）？我不希望他们精确的跟踪，而是希望能够通过直线路径对其进行规范化，就像他们的模式锁定系统中的 Android 实现一样。

提前致谢。

# java - 在生产 Java 服务器中打开 GC 日志记录是常见的做法吗？

> ID：15307998
> 
> 赞同：21
> 
> 时间：2013-03-09T06:31:50.593
> 
> 标签：java, jakarta-ee, garbage-collection, jvm

我在几个地方看到 [1] 人们在生产服务器中启动 GC 日志记录（关键任务），例如

```
java -server -Xms1024m -Xmx1024m -XX:NewSize=256m \
     -XX:MaxNewSize=256m \
     -XX:+UseConcMarkSweepGC \
     -XX:CMSInitiatingOccupancyFraction=70
     -XX:+PrintGCDetails \
     -XX:+PrintGCDateStamps \
     -XX:+PrintTenuringDistribution \
     -Xloggc:logs/gc.log \
     -Djava.awt.headless=true
     -Dcom.sun.management.jmxremote -classpath ... 
```

这些天是否推荐生产环境中的做法？

**更新**：我已经包含了来自 Oracle 的链接 [2]，还建议在生产服务器上监控 GC。

资料来源：

[1] [https://serverfault.com/questions/121490/java-opts-xxprintgcdetails-affect-on-performance](https://serverfault.com/questions/121490/java-opts-xxprintgcdetails-affect-on-performance)

[2] [http://docs.oracle.com/cd/E24290_01/coh.371/e22838/deploy_checklist.htm#CHHFADDF](http://docs.oracle.com/cd/E24290_01/coh.371/e22838/deploy_checklist.htm#CHHFADDF)

* * *

## 回答 #1

> 赞同：55
> 
> 时间：2013-03-10T07:07:39.690

**是**的，这是一种常见的做法。这**通常是强烈推荐**的，我在下面给出示例和参考。

为什么 GC 日志记录适用于生产 Java 服务器：

1.  **最小开销**- GC 日志记录对整体系统性能 **的开销最小。**

    *   [例如，前 JVM 性能架构师和Java 性能一书](https://rads.stackoverflow.com/amzn/click/com/0137142528)的合著者 Charlie Hunt 声称这一点。
    *   所有运行 Java Enterprise 软件的[世界纪录 SPEC 基准测试都在运行启用了 GC 日志记录的生产服务器。](http://www.spec.org/jEnterprise2010/results/jEnterprise2010.html)这证实了日志记录具有低开销，并且日志记录路径由发布基准结果的性能专家高度调整。
2.  **长期日志记录**对于分析**应用程序性能**绝对**至关重要**。必须始终启用 GC 日志记录，以便管理员能够观察 GC 行为并相应地调整应用程序。

 *** * *

## 回答 #2

> 赞同：-4
> 
> 时间：2013-03-09T06:40:48.007

当然不。

如果存在无法在您的 QA 系统上重现的问题，您只会以这种方式加载 prod 服务器。即便如此，也只能在短时间内收集数据，然后恢复正常的“精益”模式。**