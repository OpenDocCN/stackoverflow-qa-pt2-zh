# StackOverflow 问答 16212000-16212999

# java - Java Square function

> ID：16212000
> 
> 赞同：0
> 
> 时间：2013-04-25T10:10:10.433
> 
> 标签：java, recursion, implementation

Would anyone be able to explain these methods with a few comments line. They are for squaring a number. One is using recursion, implementation and another is just normal

```
 public static int sq(int n)
{
    int i = 0 ;
    int result = 0 ;

    while(i < n){         
        result = result + 2*i + 1 ;
        i = i + 1 ;
    }
    return result ;
}

public static int recSq(int n)
{
    if(n == 0){
        return 0 ;
    } else {
        return recSq(n - 1) + 2*(n - 1) + 1 ;
    }
}

public static int implementSq(int n)
{
    int i ;
    int result = 0 ;

    for(i = 0 ; i < n ; i++){
        result = result + 2*i + 1 ;       
    }
    return result ;
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-25T10:19:20.877

我想这一定是一个家庭作业，否则它是做任何事情的疯狂方式。因此，我是否可以建议使用集成开发环境（例如 Netbeans），然后使用它逐行执行代码。这是迄今为止了解代码在做什么的最简单的方法。如果我们只是告诉你，你不会从中获得任何好处。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-25T10:14:05.120

你为什么要尝试用递归或循环来解决这样一个简单的问题？

```
public static int sq(int n) {
    return n * n;
} 
```

而已。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-25T10:15:02.573

*   第一个是使用循环将数字乘以 2 n 次以增加局部变量 i。
*   第二个是完全一样的，但使用递归。每一步减少 n 并为最终情况返回 0。所有的调用都是用不同的参数再次调用同一个函数，除了参数值为0，然后函数将返回0。递归不是一件简单的事情，要想更好地理解它，试着想象一下代码流。

示例：recSq(2)

```
 4 recSq(2)
  |<- 1  reqSq(1)+2*1+1
      |<-0  reqSq(0)+2*0 + 1
         |<-  0 
```

reqSq(2) 被调用，所以我们将评估 if 并开始评估 return 语句。第一个操作是对 reqSq(n-1) 的方法调用，因为 n = 2 然后我们调用 reqSq(1)。

reqSq(1) 被调用，所以我们将评估 if 并开始评估 return 语句。第一个操作是对 reqSq(n-1) 的方法调用，因为 n = 1 然后我们调用 reqSq(0)。

reqSq(0) 被调用，所以我们将评估 if，这是真的，因为 n ==0，然后我们返回 0。

reqSq(1) 调用已完成对 reqSq(0) 的评估，然后我们可以继续计算其余的 0 + 2*(n-1) + 1 -> 0 + 0 + 1。我们将返回值 1。

reqSq(2) 已完成对 reqSq(1) 的评估，然后我们可以继续计算其余的 1 + 2*(n-1) +1 -> 1 + 2 + 1。我们将返回值 4。

*   最后一个是 for 循环，实际上与第一个相同，但使用 fors 而不是 while 循环。在 for 循环中，您在一行中声明了初始化条件、继续条件和增加操作。因此，在这种情况下，for 循环从值 0 开始，循环将在 i < n 时继续，并且在循环结束时将调用“i++”。

# macos - Flash AS 3.0 Relative path to file in Mac OS X

> ID：16212003
> 
> 赞同：0
> 
> 时间：2013-04-25T10:10:15.133
> 
> 标签：macos, actionscript-3, flash, path, relative-path

I have a SWF which loads images and displays it.

Path to images is relative. It looks like this:

`../../../images/thumbnail1.png`

On Windows it works fine.

On `MAC OS X` SWF file cannot load images. So is there any differences between `relative path` on Windows and MAC OS?

**previewImagePath is ../../../images/thumbnail1.png**

```
previewLoader = new Loader();
previewLoader.contentLoaderInfo.addEventListener(Event.COMPLETE, previewLoaded);
previewLoader.load(new URLRequest(previewImagePath));

public function previewLoaded(e:Event):void
{
    previewImageBtm = Bitmap(previewLoader.content);
    previewImageBtm.smoothing=true;
    addChild(previewImageBtm);  
}//previewLoaded 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-25T11:56:16.527

OSX 在以前的文件夹中加载图像没有任何限制。你的代码是正确的。确保您在以前的文件夹中拥有足够的权限，并在本地服务器中测试您的文件。

在这里，您有一个示例，并且可以在我的 Mac 上完美运行。

[https://docs.google.com/file/d/0Bw9pbLM_BascdWs2d2lCZFVRdWM/edit?usp=sharing](https://docs.google.com/file/d/0Bw9pbLM_BascdWs2d2lCZFVRdWM/edit?usp=sharing)

# web-services - Glassfish 3.1.2.2：@WebServiceProvider 部署失败：DPL5041：未知端口组件名称

> ID：16212004
> 
> 赞同：3
> 
> 时间：2013-04-25T10:10:20.193
> 
> 标签：web-services, glassfish, deploying, service-provider

我无法在 Glassfish 3.1.2 中部署 @WebServiceProvider Web 服务。

我以以下方式为我的服务配置了 glassfish-ejb-jar.xml。

```
<ejb>
  <ejb-name>TestWebService</ejb-name>
  <webservice-endpoint>
    <port-component-name>TestWebService</port-component-name>
    <endpoint-address-uri>HEAD/TestWebService</endpoint-address-uri>
    <transport-guarantee>NONE</transport-guarantee>
  </webservice-endpoint>
</ejb> 
```

Web 服务实现如下。

```
package test.ws.services;

import [...left out for brevity...]

@WebServiceProvider(
  targetNamespace = "http://ws.test.com"
  , serviceName = "HEAD/TestWebService"
  , portName = "TestServicePort")
@ServiceMode(value = Service.Mode.PAYLOAD)
@Stateless
@HandlerChain(file = "test_handlers.xml")
@Interceptors({ TestInterceptor.class })
public class TestWebService implements Provider<Source> {

  @WebMethod
  public Source invoke(Source request) {
    return calcResponseSource(request);
  }

} 
```

启动 glassfish 服务器时，glassfish server.log 中会显示以下错误。

```
 SEVERE  javax.enterprise.system.tools.deployment.org.glassfish.deployment.common DPL5041:Unknown port-component-name TestWebServiceService port, all sub elements will be ignored
 WARNING javax.enterprise.system.tools.deployment.org.glassfish.deployment.common DPL8007: Unsupported deployment descriptors element endpoint-address-uri value HEAD/TestWebService
 WARNING javax.enterprise.system.tools.deployment.org.glassfish.deployment.common DPL8007: Unsupported deployment descriptors element transport-guarantee value NONE 
```

稍后，服务将部署在显示完全限定类名的“技术”URL 上。

```
 INFO javax.enterprise.webservices.org.glassfish.webservices WS00019: EJB Endpoint deployed
      server  listening at address at http://test:10280/HEAD/TestWebService/test.ws.services.TestWebService 
```

我在网上搜索，但找不到任何解决方案来设置 glassfish 服务器以进行无错误的部署。

PS：这个问题似乎也阻止了我为 Web 服务启用 HTTPS。

问候埃格伯特

# javascript - 使用正则表达式验证带有 http:www 的 url 作为可选

> ID：16212009
> 
> 赞同：0
> 
> 时间：2013-04-25T10:10:38.650
> 
> 标签：javascript, jquery, regex

我正在尝试验证 "http:www" 是可选的 url，因此 yahoo.com 和[http://www.yahoo.com](http://www.yahoo.com)需要是有效的 url，但使用以下正则表达式不会使 utl3 成为有效的. 我怎样才能解决这个问题 ？？

```
function checkUrlTest(url){
            var urlregex = new RegExp("^(https?:\/\/www\.)?(^(https?:\/\/www\.)[0-9A-Za-z]+\.+[a-z]{2,5})");

            return urlregex.test(url);
        }
        url3 = "yahoo.com";
        url4 = "www.yahoo.com";

        alert(checkUrlTest(url3)); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-25T10:21:33.387

```
(http://)?(www\.)?[A-Za-z0-9]+\.[a-z]{2,3} 
```

在这个正则表达式中，[http://www.yahoo.com](http://www.yahoo.com)、[http://yahoo.com](http://yahoo.com)和 www.yahoo.com 都是有效的 URL

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2015-04-08T11:43:52.707

只是检查一下。所有的问题都会解决。

```
var rgx = /^\s*(http\:\/\/)?([a-z\d\-]{1,63}\.)*[a-z\d\-]{1,255}\.[a-z]{2,6}\s*$/; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-25T10:13:06.677

```
function validateUrl(value)
{
    var regexp = /(ftp|http|https):\/\/(\w+:{0,1}\w*@)?(\S+)(:[0-9]+)?(\/|\/([\w#!:.?+=&%@!\-\/]))?/
    return regexp.test(value);
} 
```

如果不试试这个：

```
(?i)\b((?:(?:[a-z][\w-]+:)?(?:/{1,3}|[a-z0-9%])|www\d{0,3}[.]|[a-z0-9.\-]+[.][a-z]{2,4}/)(?:[^\s()<>]+|\(([^\s()<>]+|(\([^\s()<>]+\)))*\))+(?:\(([^\s()<>]+|(\([^\s()<>]+\)))*\)|[^\s`!()\[\]{};:'".,<>?«»“”‘’])) 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-04-25T10:23:20.220

**工作演示** [http://jsfiddle.net/fy66p/](http://jsfiddle.net/fy66p/)

解决方案在这里：**负前瞻：** [http](http://www.regular-expressions.info/lookaround.html#lookahead) ://www.regular-expressions.info/lookaround.html#lookahead与`www`案例，你应该得到你正在寻找的东西。让我知道它是怎么回事！

希望它符合您的需求`:)`

**代码**

```
function checkUrlTest(url){

    // Try this
    var urlregex = new RegExp("^(?!www | www\.)[A-Za-z0-9_-]+\.+[A-Za-z0-9.\/%&=\?_:;-]+$")

            return urlregex.test(url);
        }
        url3 = "yahoo.com";
        url4 = "www.yahoo.com";

        alert('===> ' + checkUrlTest(url4) + '===> ' + checkUrlTest(url3)); 
```

# arrays - Are bulk array operations faster than sequential operations?

> ID：16212018
> 
> 赞同：2
> 
> 时间：2013-04-25T10:10:53.920
> 
> 标签：arrays, vector, language-agnostic, arraylist, time-complexity

Say I am given an array, and a function called `replace`:

```
void replace(from, to, items[]) 
```

whose job is to replace the array elements in the range `[from, to)` with the elements in `items`.
I'll assume the maximum size of the array is known beforehand, so I can ensure the array will never overflow.

My question is, if I am given a list of replacements (e.g. elements of the form `(from, to, items)`), is it possible for me to obtain the final resulting array with a **faster** time complexity than performing each operation sequentially?

In other words, is there any advantage to knowing the sequence of operations beforehand, or is it no better than being given each operation one by one (in terms of the asymptotic time complexity)?

**Note:** It seems like the question is confusing; I did **not** intend to imply that the number of elements replacing a given range is the same as the size of that range! It could be fewer or more, causing shifting, and the point of the question was was to ask if knowing them beforehand could avoid extra work like shifting in the worst case.

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-30T04:53:20.497

我认为这可能不是您所发现的，但使用[Rope](http://en.wikipedia.org/wiki/Rope_%28data_structure%29)可以缩短时间复杂度。它提供像 concat 这样的字符串操作，而无需“移位”实际数组。（不需要是字符的字符串。任意类型的元素可以用作字母）

根据维基百科（......因为我还没有使用过它），绳索是一个由分段字符串组成的平衡二叉树。一根绳子代表连接所有碎片字符串的长字符串。你的 replace() 函数可以在绳子上使用 Split() 和 Concat() 操作来实现，这两个操作只需要 O(log(n)) 时间。在这里，我把 n 作为绳子代表的长绳的长度。

要获得正常数组，可以使用 Report() 操作在 O(n) 时间内转换绳索。

所以答案是：有一种算法比顺序应用字符串操作更快。

*   将给定数组转换为绳索
*   在绳子上应用每一个更换工作。每个操作都在 O(log(n)) 中运行，并且不复制实际的数组项。
*   将处理后的绳索转换为真正的数组（这会导致所有项目的副本）。
*   把它返还。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-26T01:40:24.397

它总是线性的，一直到`memcpy`' 水平。加快它的唯一方法是用时间换空间 - 覆盖数组下标运算符，以便在`from`和`to`指向元素之间的元素`items`而不是原始数组，这在任何情况下都不是一个好的解决方案。

# android - android.content.res.resources$notfoundexception string resource id #0x0

> ID：16212021
> 
> 赞同：2
> 
> 时间：2013-04-25T10:11:15.687
> 
> 标签：android

I am getting this error when i m trying to get list of data from table by calling constructor from another class, my main file is

**Account.java**

```
 try{
                List<PersonalInformation> temp = helper.findAll();
                Toast.makeText(getApplicationContext(), temp.size(), Toast.LENGTH_LONG).show();
                }
                catch (Exception e) {
                    Toast.makeText(getApplicationContext(), e+"", Toast.LENGTH_LONG).show();

                } 
```

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2013-04-25T10:18:18.477

改变

```
Toast.makeText(getApplicationContext(), temp.size(), Toast.LENGTH_LONG).show(); 
```

至

```
Toast.makeText(getApplicationContext(), String.valueOf(temp.size()), Toast.LENGTH_LONG).show(); 
```

# c# - How to make IsolatedStorageSettings persist even after the device is turned off?

> ID：16212024
> 
> 赞同：0
> 
> 时间：2013-04-25T10:11:20.843
> 
> 标签：c#, windows-phone-8, windows-phone-7.1, isolatedstorage

First page of the my application requests the login ID and password which I store using isolated storage. I want my application to remember the login credentials even if the device is switched off i.e once the user logs in, the application should store the login values and on a user's next visit the login page should not appear and directly the second page should be displayed.

Can anybody help me do this???

Thanks in advance

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-25T13:10:52.140

请参阅问题：“[隔离存储中的数据持续多长时间](https://stackoverflow.com/questions/9476772/for-how-long-data-in-isolated-storage-is-persistent)”。

如果您重新启动 Windows Phone 模拟器，则相当于删除该应用程序。这不会发生在真正的手机上。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-25T10:29:19.060

您应该调用[IsolatedStorageSettings.Save()](http://msdn.microsoft.com/en-us/library/windowsphone/develop/system.io.isolatedstorage.isolatedstoragesettings.save%28v=vs.105%29.aspx)以保留对设置类的更改。

# android - 从另一个 APK 访问的布局无法访问其可绘制资源

> ID：16212025
> 
> 赞同：1
> 
> 时间：2013-04-25T10:11:21.280
> 
> 标签：android, performance, android-layout, android-intent, apk

我通过从其服务访问 applicationInfo 并通过 packageManager 获取资源来访问另一个 APK 的布局。如果在布局中只指定了 textView 和 Buttons，它就可以正常工作。`Resource not found Exception`但如果在访问的布局中使用了任何可绘制资源，则会抛出。

这是我访问布局的代码

```
ApplicationInfo info = packageManager.getApplicationInfo( packageName, 0 );
Resources res = packageManager.getResourcesForApplication( info );
XmlResourceParser xres = res.getLayout( 0x7f030000 ); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-25T11:24:02.480

你好朋友请试试这个。

```
 PackageManager manager = getPackageManager();
 resources = manager.getResourcesForApplication(packName);

 int resID = resources.getIdentifier("image1", "drawable", packName);
 Log.d(TAG, "resID = " + resID);
 Drawable image = getResources().getDrawable(resID);
 Log.d(TAG, "resID = " + resID); 
```

# eclipse - How to add Javamail API source code in eclipse project

> ID：16212026
> 
> 赞同：0
> 
> 时间：2013-04-25T10:11:21.780
> 
> 标签：eclipse, jakarta-mail

what are the steps to add source code of Javamail API in my project so that i can see javamail classes easily by clicking on its class from my project. I am using eclipse

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-25T12:19:35.167

欢迎来到堆栈溢出。

基本上有两种方法可以做到这一点。

## 方法1：“简单”的方法。

你使用 Maven，如果你的项目是一个 Maven 项目。包括 javamail 的依赖项。右键单击您的项目并选择**Maven > 下载源** ![在此处输入图像描述](https://i.stack.imgur.com/Gkq7R.png) ，这基本上应该下载所有依赖项的源文件。

## 方法2：“硬”的方式

转到此[链接](https://java.net/projects/javamail/downloads)并下载您的 Javamail 1.5 jar。和此[链接](https://java.net/projects/javamail/downloads/directory/source)下载您的 Javamail 1.5 源 jar。下一步，右键单击您的项目，选择**Properties**。选择**Java Build Path**，单击**Libraries 选项卡**，然后单击**Add external Jars**。 ![在此处输入图像描述](https://i.stack.imgur.com/YEEW6.png)

浏览到您的库的位置并添加它。展开 javamail 库。单击**源附件**，然后单击**编辑**按钮。 ![在此处输入图像描述](https://i.stack.imgur.com/LhFsN.png) 浏览到源 zip 文件的位置并添加它。

您现在应该能够看到您的 Source javadocs，Control Clicking on a Javamail Class，也应该将您带到源 Class。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-30T13:49:26.217

将源附加到任何 jar 文件的简单方法 [http://javarevisited.blogspot.in/2012/12/how-to-attach-source-in-eclipse-Jar-JDK-debugging.html](http://javarevisited.blogspot.in/2012/12/how-to-attach-source-in-eclipse-Jar-JDK-debugging.html)

# ruby-on-rails - 如何处理可选的 belongs_to 关联

> ID：16212028
> 
> 赞同：0
> 
> 时间：2013-04-25T10:11:24.193
> 
> 标签：ruby-on-rails, activerecord, null-object-pattern

用例：

考虑以下示例。

```
Class Foo < ActiveRecord::Base
 belongs_to :user
 attr_accessible :title
end
Class User < ActiveRecord::Base
 has_many :foo
 attr_accessible :name
end 
```

如果登录用户创建了 Foo，它将与它的用户记录相关联。如果一个未登录的用户创建了 Foo，它不会关联到任何用户。这只是一个示例，我的应用程序中有很多类似的用例。

问题：

问题是我的视图代码被很多 if 条件和三元运算弄乱了，比如，

```
<% foo.user ? foo.user.name : "not set"%> 
```

当前解决方案：

为了克服这个问题，我使用了空对象设计模式。User 类定义了一个 NullUser 对象（其名称将设置为“未设置”）。如果 foo 对象没有用户对象，它将返回一个 NullUser 对象。我已经覆盖了执行 nil 检查的 Foo 类中的用户方法。

问题：

1.  有没有更好的解决方案？
2.  是否有一个 gem 可以促进 Rails 活动记录模型的空对象模式。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-25T10:20:23.897

这听起来像是包装用户对象的装饰器的完美案例。关于显示什么的所有逻辑都在那里；你所关心的只是它可以吐出对象的名称。

[Draper](https://github.com/drapergem/draper)非常适合 Rails 中的装饰器。

和一个很好的衡量标准的[Railscast](http://railscasts.com/episodes/286-draper)。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-25T10:16:46.037

一种可能的解决方案是设置默认值并将其与来宾用户相关联。这样当用户在场时它会被覆盖，但这意味着当你调用 .user.name 时总会有一个值

# mysql - MySQL 嵌套优化

> ID：16212030
> 
> 赞同：0
> 
> 时间：2013-04-25T10:11:41.003
> 
> 标签：mysql

我已经尝试解决这个问题 2 小时了，但无法成功

下面附上此查询的响应：

```
SELECT login, SUM(gain) AS weekly_gain
FROM gt_history
WHERE is_closed = 1 AND (cmd = 0 OR cmd = 1)
GROUP BY WEEK(close_time), login 
```

现在，我想做的是，对`AVERAGE`所有值进行`GROUP BY`登录。

想法？

![第一次查询的结果](https://i.stack.imgur.com/JOvRr.png)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-25T10:17:50.633

```
SELECT
  login,
  AVG(weekly_gain) AS weekly_gain
FROM (SELECT
    login,
    SUM(gain) AS weekly_gain
      FROM gt_history
      WHERE is_closed = 1
      AND (cmd = 0
        OR cmd = 1)
      GROUP BY WEEK(close_time), login) As l 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-25T10:46:33.237

只需使用查询作为子查询。

```
SELECT login, AVG(weekly_gain) FROM
    (SELECT login, SUM(gain) AS weekly_gain
    FROM gt_history
    WHERE is_closed = 1 AND (cmd = 0 OR cmd = 1)
    GROUP BY WEEK(close_time), login)
GROUP BY login 
```

# jquery - MVC4 中的日期选择器

> ID：16212031
> 
> 赞同：1
> 
> 时间：2013-04-25T10:11:41.720
> 
> 标签：jquery, asp.net-mvc-4

我`@Html.JQueryUI().DatepickerFor`在我的 mvc4 应用程序中使用辅助方法。它第一次正确显示日历，但一旦发布表格就没有显示。谁能告诉我我在其中缺少什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-25T10:21:03.230

我怀疑您正在使用 AJAX 提交表单，如果提交成功，您正在刷新内容，因此日期选择器不再绑定到输入字段。因此，在您的 AJAX 请求的成功回调中，您需要重新绑定它：

```
success: function(data) {
    $('#some_id').html(data);
    $('#id_of_your_input_element').datepicker();
} 
```

或者，如果您使用的是 Ajax.BeginForm，您可以订阅 AjaxOptions 中的 Success 事件：

```
@using (Ajax.BeginForm(new AjaxOptions { Success = "success", UpdateTargetId = "someId" }))
{
    ...
} 
```

然后编写`success`回调：

```
function success(data) {
    $('#id_of_your_input_element').datepicker();
} 
```

# git - Git clean branch 仅保存我的更改和来自 master 的更改

> ID：16212032
> 
> 赞同：1
> 
> 时间：2013-04-25T10:11:45.260
> 
> 标签：git, git-branch

我有一个分支，在那里我做了一些更改，但我最初弄错了并从错误的分支创建它，所以我有许多不同的更改，我不想在其中进行。那么我怎样才能清理它，所以我只有我已经完成的更改和来自 master 分支的更改？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-25T10:33:24.467

您可以从 master 创建一个新分支，然后挑选您对新分支所做的更改。

查找您要保存的每个提交的提交哈希。然后：

```
git checkout master
git checkout -b <new branch name>
git cherry-pick <commit hash> # for every commit you want to save 
```

`cherry-pick`当你有很多提交时，单个提交可能很乏味。由于 git 1.7.2+`cherry-pick`可以处理提交范围。

```
git cherry-pick <first commit to save>^..<last commit to save> 
```

正如 EOL 在评论中指出的那样，cherry-pick 依次应用每个补丁并等待用户提交它，如果有冲突。在这种情况下，解决冲突并执行 a`git cherry-pick --continue`以自动移动到下一个提交。或用于`git cherry-pick --abort`中止整个操作。

现在检查您当前的分支。如果一切正常，您可以删除之前的混乱分支：

```
git branch -D <old messed up branch name> 
```

有关详细信息，请参阅[git cherry-pick 手册页](https://www.kernel.org/pub/software/scm/git/docs/git-cherry-pick.html)。

**编辑：**包括关于`git cherry-pick --continue`EOL 在评论中提到的信息。

* * *

**更新**

您提到您只想挑选那些您创建的提交。这可以通过这个小 bash 脚本来完成：

```
author_name="Your Git Author Name"
start_commit="earliest commit hash to cherry-pick"
end_commit="latest commit hash to cherry-pick"

git rev-list --reverse --topo-order "$start_commit^..$end_commit" | while read rev
do
  commit_author_name=`git log --pretty=format:"%an%n" -n 1 $rev`
  if [[ $commit_author_name == *"$author_name"* ]]; then
    git cherry-pick $rev || break
  fi
done 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-25T13:16:01.253

如果您的更改全部在上游分支之上进行（即，您没有来自上游的任何合并提交与您的更改混合），您可以将其重新设置在 master 之上。

> git branch backup # 总是先备份 ;)
> git rebase --onto master <来自错误上游分支的最新提交>

假设您的分支相对于上游是最新的，那只是

> git rebase --onto master <错误的上游分支>

之后，您可能希望将当前分支的跟踪分支更改为 master：

> git branch --set-upstream <你的分支> origin/master

（或者只是 git branch -u origin/master 与 git >=1.8）

# javascript - 用于黑莓的 Cordova/Phonegap 插件

> ID：16212033
> 
> 赞同：5
> 
> 时间：2013-04-25T10:11:46.720
> 
> 标签：javascript, android, cordova, blackberry

在我的 Phonegap 应用程序中，我想实现 Twitter 和 Facebook 的登录，以及 BlackBerry 的共享。有没有可用的插件？最好是单个插件可以处理 iOS、Android 和黑莓。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-05-14T17:45:40.777

如果我是你，我会将我的 PhoneGap 应用程序移植到 WebWorks 并让调用框架（在 BB10 的情况下）为我做这件事。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-05-12T20:34:55.657

正如您可能已经看到的那样，Blackberry 平台上的插件非常稀少，据我所知，还没有提供您想要的功能的 Blackberry“插件”。相反，您可能希望通过向这些插件添加 Blackberry 功能来为社区做出贡献：

[PhoneGap Facebook 插件](https://github.com/phonegap/phonegap-facebook-plugin)

[PhoneGap Twitter 插件](https://github.com/phonegap/phonegap-plugins/tree/master/Android/Twitter)

# python - Automatically create (and keep) an object when accessed

> ID：16212035
> 
> 赞同：1
> 
> 时间：2013-04-25T10:11:46.980
> 
> 标签：python

I would like to do something like this:

```
class A:
    def hello(): print "Hello"

# I do not want to explicitly setup a:
a = A()

# a = A() -> I want this to happen automatically when I access a
# My first try is this:
def a():
    return A()

# Also, I do not want to call a as a function a(): it must be an object
# And it must stay alive and initialized
a.hello() # a is created, as object of class A
a.hello() # I do not want a second instantiation 
```

How can I implement this? `properties`? `cached-properties`? They are only for classes: a is a module-level object.

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-25T10:15:23.877

也许是这样的：

```
class A(object):
    def hello(self):
        print "Hello"

class LazyA(object):
    def __init__(self):
        self.instance = None

    def __getattr__(self, k):
        if self.instance is None:
            self.instance = A()

        return getattr(self.instance, k)

a = LazyA() 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-25T13:05:02.493

```
def lazyinit(cls):

    class p(object):
        def __init__(self, *args, **kws):
            self._init = lambda: cls(*args, **kws)            
            self._obj  = None

        def __getattr__(self, k):
            if not self._obj:
                self._obj = self._init()
            return getattr(self._obj, k)

    return p 
```

例子：

```
@lazyinit
class A(object):
    def __init__(self, a, b):
        print("initializing...")
        self.x = a + b + 2

    def foo(self):
        return self.x

x = A(39, 1)
print x
print x.foo()
print x.foo() 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-25T10:40:19.140

Pavel 对答案的概括：

```
class LazyClass(object):

    def __init__(self, myclass, *args, **kwargs):
        self.instance = None
        self.myclass = myclass
        self.args = args
        self.kwargs = kwargs

    def __getattr__(self, k):
        if self.instance is None:
            self.instance = self.myclass(*self.args, **self.kwargs)

        return getattr(self.instance, k)

class A(object):

    def __init__ (self, name):
        self.name = name
        print "Created"

    def hello(self):
        print "Hello " + self.name

import unittest
class TestLazyClass(unittest.TestCase):

    def setUp(self):
        self.a = LazyClass(A, 'Daniel')

    def test_it(self):
        self.a.hello()
        self.a.hello() 
```

# jsf - primefaces how to update datatable

> ID：16212036
> 
> 赞同：0
> 
> 时间：2013-04-25T10:11:47.483
> 
> 标签：jsf, jsf-2, primefaces

How can i update datatable in primefaces.Datatable updates only when i refresh the page. I have found some solutions but none of them worked for me.For example when i change update to ":companyForm:companyPanel" save button disappers. I removed colon and now i can see button but still doesn't update datatable. Here is my jsf page;

```
<h:form id="companyForm" prependId="false">
  <p:panel id="companyPanel">
    <p:dataTable id="companyListTable">
     //columns
    </p:dataTable>
  </p:panel>

<p:outputPanel id="newDatePanel">
  <p:commandButton value="Save"                                         
    update="companyForm:companyPanel
    companyForm:newDatePanel"                                         
    action="#{myController.save()}"/>
</p:outputPanel>
</form> 
```

and my spring controller;

```
init(){
    companyList = service.getAllCompany();
}

public void save(){
    service.save(company);
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-25T10:39:52.870

实际上你的 id 搞砸了，否则组件会被刷新。

组件的实际客户端 ID 取决于标签所在的命名容器。在这种情况下，命名容器是`<h:form>`. 当您`prependId="false"`在表单标签中包含属性时，嵌套的客户端 ID`<p:panel id="companyPanel">`将是`companyPanel`，否则（如果您`prependId`完全省略） - 它将是`companyForm:companyPanel`.

尽管如此，当您想**在同一个命名容器（表单）**中更新组件时，您不需要在它前面加上表单 id 并让它变得简单`<p:commandButton update="companyPanel">`：没有冒号和没有表单 id，有没有。

在您的代码现在的状态下，没有 id 的组件`companyForm:companyPanel`。

# javascript - 文本屏蔽不适用于 HTML 画布

> ID：16212042
> 
> 赞同：0
> 
> 时间：2013-04-25T10:12:01.857
> 
> 标签：javascript, html5-canvas, masking, globalcompositeoperation

我正在尝试在 javascript 中进行文本屏蔽。

以下是我的代码：-

```
if(this.image!==null)
{
   canvasContext.drawImage(this.image, 0, 0, this.width, this.height);
}

canvasContext.font = "55px Arial";
canvasContext.textAlign = "center";
canvasContext.textBaseline = "middle";   
canvasContext.globalCompositeOperation = 'destination-out';
canvasContext.fillText("CENSORED", 250, 250); 
```

但它不起作用。请帮我解决这个问题。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-25T17:06:40.710

我不确定“不工作”是什么意思，但是……</p>

画布中有两种常见的文本遮罩

目的地输出：文本将充当**千篇一律的工具**并删除文本下方绘制的任何内容，但文本不会显示在透明像素上。

xor：Text 将**仅剪切画布上的不透明图形**，但 Text 将正常绘制。

这是代码和小提琴：http: [//jsfiddle.net/m1erickson/n836N/](http://jsfiddle.net/m1erickson/n836N/)

```
<style>
    body{ background-color: purple; }
    canvas{background-color: white; border:1px solid red;}
</style>

<script>
$(function(){

    var canvas1=document.getElementById("canvas1");
    var canvasContext1=canvas1.getContext("2d");
    var canvas2=document.getElementById("canvas2");
    var canvasContext2=canvas2.getContext("2d");

    // destination-out 
    // Text cuts-out everything under it
    // background is revealed in the cut-out
    makeGradientAndFont(canvasContext1,canvas1);
    canvasContext1.globalCompositeOperation = 'destination-out';
    canvasContext1.fillText("CENSORED", 175, 50);

    // xor
    // Text cuts-out everything it overlaps
    // But Text is drawn normally where canvas is transparent
    // background is revealed in the cut-out
    makeGradientAndFont(canvasContext2,canvas2);
    canvasContext2.globalCompositeOperation = 'xor';
    canvasContext2.fillText("CENSORED", 175, 50);

    function makeGradientAndFont(ctx,canvas){
        var grad = ctx.createLinearGradient(0, 0, canvas.width, canvas.height);
        grad.addColorStop( 0, '#0000FF');   
        grad.addColorStop(.3, '#00FFFF');
        grad.addColorStop(.4, '#99FFFF');   
        grad.addColorStop(.5, '#00FF00');
        grad.addColorStop(.6, '#FFFF00');
        grad.addColorStop(.8, '#F00000');
        ctx.rect(115, 0, canvas.width-115, canvas.height);
        ctx.fillStyle=grad;
        ctx.fill();
        ctx.fillStyle="black";
        ctx.font = "55px Arial";
        ctx.textAlign = "center";
        ctx.textBaseline = "middle"; 
    }

}); // end $(function(){});
</script>

</head>

<body>
    <canvas id="canvas1" width=350 height=100></canvas><br/>
    <canvas id="canvas2" width=350 height=100></canvas>
</body>
</html> 
```

# prolog - Declarative interpretation of Bubble Sort algorithm in Prolog

> ID：16212047
> 
> 赞同：0
> 
> 时间：2013-04-25T10:12:18.950
> 
> 标签：prolog, bubble-sort

I have some doubt about how work the following implementation of BubbleSort algorithm in Prolog.

I have very clear how BubbleSort algorithm work so my doubt is only related to the Prolog first order logic and declarative interpretation.

This is my code:

```
bubbleSort(List, SortedList) :- swap(List, List1),
                                !,
                                bubbleSort(List1, SortedList).

bubbleSort(SortedList, SortedList).

/* swap predicate swap the two element if X come after Y in lexicographical order */
swap([X,Y|Tail], [Y,X|Tail]) :- X @> Y.

/* If it is not true that X come after Y in lexicographical order let the head in its
   original position and call the swap predicate on the sublist */ 
swap([Z|Tail], [Z|Tail1]) :- swap(Tail, Tail1). 
```

So I have some doubt about declarative interpretation of this program:

The core of the program is the **bubbleSort/2** predicate that perform the scansion of List in which are performed eventual swap of adjacent elements.

So **swap/2** predicate work like a procedural if:

1) IF the first element in the sublist (X) follow the second element in the sublist (Y) in the lexicographical order it is not good, so perform the swap.

2) Otherwise X and Y are in the right order and try to execute te swap on the sublist **Tail**

So for example if I perform the following query:

```
[trace]  ?- bubbleSort([3,2,1], Sorted). 
```

I obtain:

```
Call: (7) bubbleSort([3, 2, 1], _G399) ? creep
Call: (8) swap([3, 2, 1], _G478) ? creep
Call: (9) 3@>2 ? creep
Exit: (9) 3@>2 ? creep
Exit: (8) swap([3, 2, 1], [2, 3, 1]) ? creep
Call: (8) bubbleSort([2, 3, 1], _G399) ? creep 
```

Here call the first version of **bubbleSort/2** on the original list. To be TRUE call the first version of **swap/2** predicate that check if the first two elements of the list are not in lexicographical order each other, this fact is TRUE so swap these elements. Now that **swap/2** predicate is verified, come back by backtracking and (to satisfy **bubbleSort/2**) call again **bubbleSort2** saying now that the original list to order is the list after the swap (the list in which the first and the second element are swapped)

So call again bubbleSort and happen:

```
Call: (8) bubbleSort([2, 3, 1], _G399) ? creep
Call: (9) swap([2, 3, 1], _G484) ? creep
Call: (10) 2@>3 ? creep
Fail: (10) 2@>3 ? creep
Redo: (9) swap([2, 3, 1], _G484) ? creep
Call: (10) swap([3, 1], _G480) ? creep
Call: (11) 3@>1 ? creep
Exit: (11) 3@>1 ? creep
Exit: (10) swap([3, 1], [1, 3]) ? creep
Exit: (9) swap([2, 3, 1], [2, 1, 3]) ? creep 
```

So now it try to satisfy **swap/2** on the list [2,3,1] but now this is not true that the first two elements are not in lexicographical order each other, so the first version of **swap/2** predicate fail, so it use the second version that simply call **swap/2** on the sublist **[3,1] where it is true that 3 don't follow 1, so swap it and I obtain the [1,3] list.

Here I have the first doubt: after this swap on this sublist (from [3,1] to [1,3]) I obtain the list: [2, 1, 3] in this line:

```
Exit: (9) swap([2, 3, 1], [2, 1, 3]) ? creep 
```

why? is this because after have satisfied swap(Tail, Tail1) predicate:

```
swap([Z|Tail], [Z|Tail1]) :- swap(Tail, Tail1). 
```

I have that **Tail1 is [1,3]** so Z was the old head 2 and [Z|Tail1] is **[2,1,3]** ?

However, now it is end the first scansion of the bubble sort algorithm that have take the "bigger" element at the end of the list

The execution continues in the same way but I have a doubt about the end of the program execution that is:

```
 Redo: (10) bubbleSort([1, 2, 3], _G399) ? creep
   Exit: (10) bubbleSort([1, 2, 3], [1, 2, 3]) ? creep
   Exit: (9) bubbleSort([2, 1, 3], [1, 2, 3]) ? creep
   Exit: (8) bubbleSort([2, 3, 1], [1, 2, 3]) ? creep
   Exit: (7) bubbleSort([3, 2, 1], [1, 2, 3]) ? creep
Sorted = [1, 2, 3]. 
```

So at the end call the **bubbleSort/2** predicate on an ordered List by:

```
 Redo: (10) bubbleSort([1, 2, 3], _G399) ? creep 
```

where [1,2,3] is **List1**.

Now I am in the **second version** of **bubbleSort/2** predicate, this one:

```
bubbleSort(SortedList, SortedList). 
```

where the list to sort and the sorted list is the same (so it means that the original list is totatly sorted).

So what is this? the base case that, once verified, say that the program execution have to end?

So execute backtracking to say that all the previous **bubbleSort/2** are verified, untill reach the first **bubbleSort/2** call and say that this is vierified and unify Sorted with [1,2,3] list

Is my reasoning correct? Are there a more declarative interpretation of this?

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-25T10:40:04.000

我认为理解这个算法的关键是当列表排序时 swap/2*失败*- 空列表上没有匹配项。

从这里开始，第二个bubbleSort/2 规则的必要性。

# android - ListView crashing the my application why?

> ID：16212051
> 
> 赞同：0
> 
> 时间：2013-04-25T10:12:25.097
> 
> 标签：android, listview

my app crashed when i try to scroll down in ListView I've tried to trace the error i couldn't find it , the activity works fine but when i try to scroll down the app getting crashed , could you please guys tell me where is the error or what i mess in my code ?

i had removed the scroll down effect and removed also

```
lv.setOnScrollListener(new OnScrollListener() 
```

but still same problem

listview xml

```
<?xml version="1.0" encoding="utf-8"?>
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
    xmlns:tools="http://schemas.android.com/tools"
    android:orientation="vertical" 
    android:layout_width="fill_parent"
    android:layout_height="fill_parent"
    android:background="@drawable/background_scroller"
    >

    <ListView
        android:id="@+id/ringtoneListview"
        android:layout_width="fill_parent"
        android:layout_height="fill_parent" 
        android:background="@drawable/scrollback"
        android:divider="#93c7e8"
        android:dividerHeight="1dp" />

</LinearLayout> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-25T10:32:54.920

在这里，您将对象设置为 Long

```
convertView.setTag(r.getLong("toneid")) 
```

然后你想让这个相同的对象成为一个视图。ViewHolder（类型视图）

```
holder = (ViewHolder) convertView.getTag(); 
```

# iphone - 在 iOS 中检测 iTunes Store 的国家/地区

> ID：16212055
> 
> 赞同：13
> 
> 时间：2013-04-25T10:12:32.703
> 
> 标签：iphone, ios, ipad, itunes, itunes-store

在我的 iPhone 应用程序中，我想检测 iPhone 用户登录的 iTunes Store 的国家/地区，例如对于来自美国的用户，我想将他/她引导到： [https ://itunes.apple.com/us/album /21/id420075073](https://itunes.apple.com/us/album/21/id420075073) 对于登录波兰 iTunes Store 的用户，我想将他重定向到： [https ://itunes.apple.com/us/album/21/id403037872](https://itunes.apple.com/us/album/21/id403037872)

我知道我可以检查语言环境（例如语言），但它可能并不总是有效。

任何想法如何实现这一目标？

* * *

## 回答 #1

> 赞同：-3
> 
> 时间：2013-04-25T10:27:07.297

```
NSString *countryCode = [[NSLocale currentLocale] objectForKey: NSLocaleCountryCode]; 
```

会给你一个标识符，比如 eg`"US" (United States), "ES" (Spain)`等。

因为你发现国家没有问题。我们希望 iTunes 商店必须是设备国家/地区。

# javascript - 在 javascript 链接上显示访问过的颜色

> ID：16212057
> 
> 赞同：1
> 
> 时间：2013-04-25T10:12:41.360
> 
> 标签：javascript, jquery, html, css, dom

我有一个调用 JavaScript 函数的超链接。我的链接呈现如下

```
<a class="popup" onclick="return launchModalNews('http://google.com',this)" href="http://google.com/">google</a> 
```

在我的 JavaScript 中，我将这个链接作为弹出窗口打开并返回`false`，这样我就不会离开页面。

因此，我的链接未显示为已访问。

为了显示为已访问，我创建了一个隐藏项`iframe`，并设置`src`了链接单击，以便 IE 维护历史记录。

这工作正常，IE 能够将链接显示为已访问，但问题是现在当我尝试检查链接是否被访问时，我没有得到正确的颜色。

我使用了以下方法：

```
document.defaultView.getComputedStyle(element, null).color 
jQuery(element).css('color'); 
```

这一切都给出了正常的链接颜色而不是访问的颜色在页面中我可以看到它已经应用了访问的链接颜色我怎样才能获得真正的颜色，即使用 jquery/javascript 访问的颜色？

其次，这种显示访问链接的方法在 IE 中有效，但在 chrome 中无效。有什么想法可以在 chrome 上实现吗？

[更新回复]首先这不是google.com这是另一个链接。我只是举了一个例子其次如果我在运行时添加类那么它适用于那种情况但是一旦页面刷新然后我就没有得到访问的链接，我将无法添加自定义类。我在 jquery 中尝试过“a:visted”，但它返回 0 个项目。我想检查颜色以便优化它。如果我得到访问的颜色，那么我不会为 iframe 设置 src，因为该链接已经在浏览器历史记录中，并且浏览器会处理访问过的链接

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-25T10:18:07.057

当您单击链接时，您可以添加一个类（其样式与实际访问的链接相同）：

```
$('.popup').click(function(e) {
    e.preventDefault();
    launchModalNews('http://google.com',this);
    $(this).addClass('visited');
}); 
```

# titanium - 在 Titanium iOS 中显示图形

> ID：16212058
> 
> 赞同：0
> 
> 时间：2013-04-25T10:12:53.487
> 
> 标签：titanium, titanium-mobile, titanium-modules

在我的应用程序中，我需要通过**图形**（图表）视图显示反馈的状态。

*需要webview*吗？

我尝试***了 RGraph***框架，它对我显示错误，如何使用这个框架？

他们是否还有其他方法可以实现这一目标？

**提前致谢**！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-30T21:19:57.127

是的，这个库使用了一个画布，你需要一个 webview 来显示它。关于显示图表的一些可能有用的阅读材料： [Display Charts with Titanium](http://www.techjunkie.com/displaying-charts-with-titanium-appcelerator/)

# php - 用于下载网站及其文件的 PHP 脚本

> ID：16212062
> 
> 赞同：0
> 
> 时间：2013-04-25T10:13:10.517
> 
> 标签：php, file-get-contents

我需要一个类似于 Firefox 或其他浏览器中的“将页面另存为”按钮的 PHP 脚本。也就是说：给定一个 URL，它会下载相关的 HTML 文件，以及其中显示的图像和其他文件。该`file_get_contents()`功能只能让我走到一半，获取 HTML 文件，而不是图像或其他文件。一种解决方案是通读 HTML 返回的 HTML，`file_get_contents()`并为找到的每个文件链接应用`file_get_contents()`。然而我怀疑肯定已经有一个更标准的解决方案了。提前致谢。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-25T10:36:38.180

最简单的方法是使用`wget`命令：

```
wget --page-requisites http://www.yourwebsite.com/directory/file.html 
```

在 PHP 中，您可以使用`exec`或调用它`system`。

# ios - How to upload/download a file from/to dropbox using Xcode

> ID：16212064
> 
> 赞同：5
> 
> 时间：2013-04-25T10:13:16.010
> 
> 标签：ios, objective-c, dropbox-api

How could I upload/download a file from/to dropbox? I integrated dropbox applications in my app, but I couldn't upload/download a file.

This is my upload code:

```
- (NSString *)getDocumentPath
{
    NSMutableData * pdfData = [NSMutableData data];
    UIGraphicsBeginPDFContextToData(pdfData, self.view.bounds, nil);
    UIGraphicsBeginPDFPage();
    CGContextRef pdfContext = UIGraphicsGetCurrentContext();
    [self.view.layer renderInContext:pdfContext];
    UIGraphicsEndPDFContext();

    NSArray *paths = NSSearchPathForDirectoriesInDomains(NSDocumentDirectory, NSUserDomainMask, YES);

    NSString *path = [[paths objectAtIndex:0] stringByAppendingPathComponent:@"vani.doc"];

    [pdfData writeToFile:path  atomically:YES];

    return path;
}

- (IBAction)upload:(id)sender {

    NSString *path = [self getDocumentPath];

    NSString * local = [path lastPathComponent];

    NSString *destDir = @"/Plist Folder/vani.doc";

    [restClient uploadFile:local toPath:destDir withParentRev:nil fromPath:path]; 
```

This is for downloading:

```
 restClient = [[DBRestClient alloc] initWithSession:[DBSession sharedSession]];
    restClient.delegate = self;
    NSString *fileName = [NSString stringWithFormat:@"/vani.doc"];

    NSArray *paths = NSSearchPathForDirectoriesInDomains(NSDocumentDirectory,
                                                         NSUserDomainMask, YES);
    NSString *documentsDirectory = [paths objectAtIndex:0];

    NSString *path2 = [documentsDirectory stringByAppendingString:
                       [NSString stringWithFormat:@"%@", fileName]];
    //NSLog(@"%@", path2);

    [restClient loadFile:fileName intoPath:path2]; 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-04-25T11:57:52.067

在这种情况下，让我来帮助你，我为 Dropbox 创建了 Wrapper 类，在我的一个项目中使用下面的代码。**它不支持 ARC。**创建 DropBoxManager 头文件和实现文件 如果您是初学者，这可能对您来说太多了，但请尝试阅读整个答案并逐步进行操作。如果有任何问题，请告诉我，我会提供帮助。

**DropBoxManager.h 的代码**

```
#import <Foundation/Foundation.h>
#import <DropboxSDK/DropboxSDK.h>

#define kDropbox_AppKey @"" // Provide your key here
#define kDropbox_AppSecret @"" // Provide your secret key here
#define kDropbox_RootFolder kDBRootDropbox //Decide level access like root or app

@protocol DropBoxDelegate;

typedef enum 
{
    DropBoxTypeStatusNone = 0,
    DropBoxGetAccountInfo = 1,
    DropBoxGetFolderList = 2,
    DropBoxCreateFolder = 3,
    DropBoxUploadFile = 4
} DropBoxPostType;

@interface DropboxManager : NSObject <DBRestClientDelegate,DBSessionDelegate,UIAlertViewDelegate>
{
    UIViewController<DropBoxDelegate> *apiCallDelegate;

    DBSession *objDBSession;
    NSString *relinkUserId; 
    DBRestClient *objRestClient;

    DropBoxPostType currentPostType;

    NSString *strFileName;
    NSString *strFilePath;
    NSString *strDestDirectory;
    NSString *strFolderCreate;
    NSString *strFolderToList;
}

@property (nonatomic,retain) DBSession *objDBSession;
@property (nonatomic,retain) NSString *relinkUserId;

@property (nonatomic,assign) UIViewController<DropBoxDelegate> *apiCallDelegate;

@property (nonatomic,retain) DBRestClient *objRestClient;

@property (nonatomic,assign) DropBoxPostType currentPostType;

@property (nonatomic,retain) NSString *strFileName;
@property (nonatomic,retain) NSString *strFilePath;
@property (nonatomic,retain) NSString *strDestDirectory;

@property (nonatomic,retain) NSString *strFolderCreate;

@property (nonatomic,retain) NSString *strFolderToList;

//Singleton
+(id)dropBoxManager;

//Initialize dropbox
-(void)initDropbox;

//Authentication Verification
-(BOOL)handledURL:(NSURL*)url;
-(void)dropboxDidLogin;
-(void)dropboxDidNotLogin;

//Upload file
-(void)uploadFile;

//Download File
-(void)downlaodFileFromSourcePath:(NSString*)pstrSourcePath destinationPath:(NSString*)toPath;

//Create Folder
-(void)createFolder;

//Get Account Information
-(void)loginToDropbox;
-(void)logoutFromDropbox;
-(BOOL)isLoggedIn;

//List Folders
-(void)listFolders;

@end

@protocol DropBoxDelegate <NSObject>

@optional

- (void)finishedLogin:(NSMutableDictionary*)userInfo;
- (void)failedToLogin:(NSString*)withMessage;

- (void)finishedCreateFolder;
- (void)failedToCreateFolder:(NSString*)withMessage;

- (void)finishedUploadFile;
- (void)failedToUploadFile:(NSString*)withMessage;

- (void)finishedDownloadFile;
- (void)failedToDownloadFile:(NSString*)withMessage;

- (void)getFolderContentFinished:(DBMetadata*)metadata;
- (void)getFolderContentFailed:(NSString*)withMessage;

@end 
```

**DropBoxManager.m 的代码**

```
#import "DropboxManager.h"

@implementation DropboxManager

@synthesize objDBSession,relinkUserId,apiCallDelegate;
@synthesize objRestClient;
@synthesize currentPostType;

@synthesize strFileName;
@synthesize strFilePath;
@synthesize strDestDirectory;

@synthesize strFolderCreate;

@synthesize strFolderToList;

static DropboxManager *singletonManager = nil;

+(id)dropBoxManager
{
    if(!singletonManager)
        singletonManager = [[DropboxManager alloc] init];

    return singletonManager;
}

-(void)initDropbox
{
    DBSession* session =  [[DBSession alloc] initWithAppKey:kDropbox_AppKey appSecret:kDropbox_AppSecret root:kDropbox_RootFolder];
    session.delegate = self; 
    [DBSession setSharedSession:session];
    [session release];

    if([[DBSession sharedSession] isLinked] && objRestClient == nil)
    {       
        self.objRestClient = [[DBRestClient alloc] initWithSession:[DBSession sharedSession]];
        self.objRestClient.delegate = self;
    }   
}

-(void)checkForLink
{
    if(![[DBSession sharedSession] isLinked])
        [[DBSession sharedSession] linkFromController:apiCallDelegate];
}

-(BOOL)handledURL:(NSURL*)url
{
    BOOL isLinked=NO;
    if ([[DBSession sharedSession] handleOpenURL:url]) 
    {

        if([[DBSession sharedSession] isLinked])
        {
            isLinked=YES;
            [self dropboxDidLogin];
        }
        else
        {
            isLinked = NO;
            [self dropboxDidNotLogin];
        }
    }
    return isLinked;
}

#pragma mark -
#pragma mark Handle login

-(void)dropboxDidLogin
{
    NSLog(@"Logged in");

    if([[DBSession sharedSession] isLinked] && self.objRestClient == nil)
    {       
        self.objRestClient = [[DBRestClient alloc] initWithSession:[DBSession sharedSession]];
        self.objRestClient.delegate = self;
    }   

    switch(currentPostType)
    {
        case DropBoxTypeStatusNone:

            break;

        case DropBoxGetAccountInfo:
            [self loginToDropbox];
            break;

        case DropBoxGetFolderList:
            [self listFolders];
            break;

        case DropBoxCreateFolder:
            [self createFolder];
            break;

        case DropBoxUploadFile:
            [self uploadFile];
            break;          
    }

    //[(MainViewController*)apiCallDelegate setLoginStatus];
}

-(void)dropboxDidNotLogin
{
    NSLog(@"Not Logged in");
    switch(currentPostType)
    {
        case DropBoxTypeStatusNone:

            break;

        case DropBoxUploadFile:
            if([self.apiCallDelegate respondsToSelector:@selector(failedToUploadFile:)])
                [self.apiCallDelegate failedToUploadFile:@"Problem connecting dropbox. Please try again later."];
            break;

        case DropBoxGetFolderList:

            break;

        case DropBoxCreateFolder:

            break;

        case DropBoxGetAccountInfo:

            break;
    }   
}

#pragma mark -
#pragma mark DBSessionDelegate methods

- (void)sessionDidReceiveAuthorizationFailure:(DBSession*)session userId:(NSString *)userId 
{
    relinkUserId = [userId retain];
    [[[[UIAlertView alloc] initWithTitle:@"Dropbox Session Ended" message:@"Do you want to relink?" delegate:self cancelButtonTitle:@"Cancel" otherButtonTitles:@"Relink", nil] autorelease] show];
}

- (void)alertView:(UIAlertView *)alertView clickedButtonAtIndex:(NSInteger)index 
{
    if (index != alertView.cancelButtonIndex)
        [[DBSession sharedSession] linkUserId:relinkUserId fromController:apiCallDelegate];

    [relinkUserId release];
    relinkUserId = nil;
}

#pragma mark -
#pragma mark Fileupload

-(void)uploadFile
{
    if([[DBSession sharedSession] isLinked])
        [self.objRestClient uploadFile:strFileName toPath:strDestDirectory withParentRev:nil fromPath:strFilePath];
    else
        [self checkForLink];
}

-(void)downlaodFileFromSourcePath:(NSString*)pstrSourcePath destinationPath:(NSString*)toPath
{
    if([[DBSession sharedSession] isLinked])
        [self.objRestClient loadFile:pstrSourcePath intoPath:toPath];
    else
        [self checkForLink];
}

- (void)restClient:(DBRestClient*)client uploadedFile:(NSString*)destPath from:(NSString*)srcPath metadata:(DBMetadata*)metadata 
{   
    if([self.apiCallDelegate respondsToSelector:@selector(finishedUploadeFile)])
        [self.apiCallDelegate finishedUploadFile];

    NSLog(@"File uploaded successfully to path: %@", metadata.path);
}

- (void)restClient:(DBRestClient*)client loadedFile:(NSString*)destPath contentType:(NSString*)contentType
{
    if([self.apiCallDelegate respondsToSelector:@selector(finishedDownloadFile)])
        [self.apiCallDelegate finishedDownloadFile];
}

-(void)restClient:(DBRestClient *)client loadFileFailedWithError:(NSError *)error
{
    if([self.apiCallDelegate respondsToSelector:@selector(failedToDownloadFile:)])
        [self.apiCallDelegate failedToDownloadFile:[error description]];
}

- (void)restClient:(DBRestClient*)client uploadFileFailedWithError:(NSError*)error 
{   
    if([self.apiCallDelegate respondsToSelector:@selector(failedToUploadFile:)])
        [self.apiCallDelegate failedToUploadFile:[error description]];

    NSLog(@"File upload failed with error - %@", error);
}

#pragma mark -
#pragma mark Create Folder

-(void)createFolder
{
    if([[DBSession sharedSession] isLinked])
        [self.objRestClient createFolder:strFolderCreate];
    else
        [self checkForLink];
}

- (void)restClient:(DBRestClient*)client createdFolder:(DBMetadata*)folder
{
    if([self.apiCallDelegate respondsToSelector:@selector(finishedCreateFolder)])
        [self.apiCallDelegate finishedCreateFolder];

    NSLog(@"Folder created successfully to path: %@", folder.path);
}

- (void)restClient:(DBRestClient*)client createFolderFailedWithError:(NSError*)error
{
    if([self.apiCallDelegate respondsToSelector:@selector(failedToCreateFolder:)])
        [self.apiCallDelegate failedToCreateFolder:[error description]];

    NSLog(@"Folder create failed with error - %@", error);
}

#pragma mark -
#pragma mark Load account information

-(void)loginToDropbox
{
    if([[DBSession sharedSession] isLinked])
        [self.objRestClient loadAccountInfo];
    else
        [self checkForLink];
}

- (void)restClient:(DBRestClient*)client loadedAccountInfo:(DBAccountInfo*)info
{
    if([self.apiCallDelegate respondsToSelector:@selector(finishedLogin:)])
    {
        NSMutableDictionary *userInfo = [[[NSMutableDictionary alloc] init] autorelease];
        [userInfo setObject:info.displayName forKey:@"UserName"];
        [userInfo setObject:info.userId forKey:@"UserID"];
        [userInfo setObject:info.referralLink forKey:@"RefferelLink"];
        [self.apiCallDelegate finishedLogin:userInfo];
    }

    NSLog(@"Got Information: %@", info.displayName);
}

- (void)restClient:(DBRestClient*)client loadAccountInfoFailedWithError:(NSError*)error
{
    if([self.apiCallDelegate respondsToSelector:@selector(failedToLogin:)])
        [self.apiCallDelegate failedToLogin:[error description]];

    NSLog(@"Failed to get account information with error - %@", error);
}

#pragma mark -
#pragma mark Logout

-(void)logoutFromDropbox
{
    [[DBSession sharedSession] unlinkAll];
    [self.objRestClient release];
}

#pragma mark -
#pragma mark Check for login

-(BOOL)isLoggedIn
{
    return [[DBSession sharedSession] isLinked] ? YES : NO;
}

#pragma mark -
#pragma mark Load Folder list 

-(void)listFolders
{
    NSLog(@"Here-->%@",self.strFolderToList);
    if([[DBSession sharedSession] isLinked])
        [self.objRestClient loadMetadata:self.strFolderToList];
    else
        [self checkForLink];    
}

- (void)restClient:(DBRestClient*)client loadedMetadata:(DBMetadata*)metadata
{
    if (metadata.isDirectory)
    {
        NSLog(@"Folder '%@' contains:", metadata.contents);
        for (DBMetadata *file in metadata.contents)
        {
            NSLog(@"\t%@", file);
        }

        if([apiCallDelegate respondsToSelector:@selector(getFolderContentFinished:)])
            [apiCallDelegate getFolderContentFinished:metadata];
    }
    NSLog(@"Folder list success: %@", metadata.path);

}

- (void)restClient:(DBRestClient*)client metadataUnchangedAtPath:(NSString*)path
{

}

- (void)restClient:(DBRestClient*)client loadMetadataFailedWithError:(NSError*)error
{
    NSLog(@"Load meta data failed with error - %@", error);

    if([apiCallDelegate respondsToSelector:@selector(getFolderContentFailed:)])
        [apiCallDelegate getFolderContentFailed:[error localizedDescription]];
} 
```

例如使用头文件

```
//Your view controller Header file.
#import <UIKit/UIKit.h>
#import "DropboxManager.h"

@interface YourViewController : UIViewController <DropBoxDelegate>
{
    DropboxManager *objManager;
}

@property (nonatomic,assign) DropboxManager *objManager;

-(IBAction)btnUploadFileTapped:(id)sender;

@end 
```

例如使用实现文件

```
#import "YourViewController.h"

@implementation YourViewController
@synthesize objManager;

// Implement viewDidLoad to do additional setup after loading the view, typically from a nib.
- (void)viewDidLoad {
    [super viewDidLoad];

    objManager = [DropboxManager dropBoxManager];
    objManager.apiCallDelegate =self;
    [objManager initDropbox];
}

-(IBAction)btnUploadFileTapped:(id)sender
{
    objManager.currentPostType = DropBoxUploadFile;
    objManager.strFileName  = @"YourFileName";
    objManager.strFilePath = @"YourFilePath";
    objManager.strDestDirectory = @"/";
    [objManager uploadFile];
}

#pragma mark -
#pragma mark File upload delegate

- (void)finishedUploadFile
{
    NSLog(@"Uploaded successfully.");
}

- (void)failedToUploadFile:(NSString*)withMessage
{
    NSLog(@"Failed to upload error is %@",withMessage);
}

@end 
```

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2016-12-01T10:50:12.970

只需添加

```
import UIKit/UIKit.h 
```

除了ARC之外，无论您在哪里遇到错误。

# apache - Apache 模块 mod_proxy_balancer

> ID：16212074
> 
> 赞同：1
> 
> 时间：2013-04-25T10:13:55.717
> 
> 标签：apache, apache2, mod-proxy, mod-proxy-balancer

我们在我们的环境中使用 apache 版本 2.2.23。我们已配置 apache，使其应在同一主页的两个应用程序服务器之间进行负载平衡。

BalancerMember abc:8101 BalancerMember abc:8102 状态=+H

我们需要知道 apache web 服务器如何检测到服务器 8101 已关闭？？？它是 ping 还是 Telnet 或其他的东西。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-25T12:35:47.377

Apache HTTPd 没有 BalancerMember 的带外健康检查。当对该服务器的代理请求失败时，它将检测给定服务器已关闭。

文档可以在这里找到：[http ://httpd.apache.org/docs/2.2/mod/mod_proxy.html](http://httpd.apache.org/docs/2.2/mod/mod_proxy.html)

# javascript - 相对于字符数和屏幕宽度的字体大小的一个很好的算法

> ID：16212075
> 
> 赞同：0
> 
> 时间：2013-04-25T10:13:59.103
> 
> 标签：javascript, html, css, responsive-design

好的，所以我有一个大字体（100px）的输入字段。想法是当用户开始写字母时，字体大小会变小，而不是短语移出屏幕。

它也必须是响应式的，所以一些包含屏幕宽度的算法会很好。

我现在拥有的：

```
var chars = $('#big-search').val();
var w = $(window).innerWidth();

var fz = parseInt($('#big-search').css("font-size"), 10);
console.log(fz);
var nfz = 100-((chars.length/w)*(w*2.2));
if(nfz < 100){
    $('#big-search').css("font-size", nfz+"px")
} 
```

问题是它加速了字体大小的降低。但它应该放慢速度。

对此有什么想法吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-25T13:19:54.150

这成功了：

```
var baseFz = 100;
var chars = $('#big-search').val();
var w = $(window).innerWidth();
var nfz = (w/100)*(baseFz/chars.length);

if(nfz <= 100 && nfz >= 20){
    $('#big-search').css("font-size", nfz+"px");
} else if(nfz >= 100){
    $('#big-search').css("font-size", 100+"px");
} else if(nfz >= 20){
    $('#big-search').css("font-size", 20+"px");
} 
```

# c# - 根据数据库条件显示表格

> ID：16212079
> 
> 赞同：0
> 
> 时间：2013-04-25T10:14:09.137
> 
> 标签：c#, wpf, database, conditional-statements

`Table`在我的应用程序初始启动时，我希望检查其中是否`Database`有任何元组，如果此条件为真，那么我不希望我的`addDialog`表单显示，但是当它为假时，我想显示它。任何帮助将不胜感激。

这是我尝试过的：

```
private void Home_Loaded_1(object sender, RoutedEventArgs e)
{
    //AddSafeLimits dialog = new AddSafeLimits();
    //dialog.Show();

    var query = from level in context.SafeLimits
                    where level.UpperLimit == null
                    select level;

    levels = query.ToList();

    if (levels== null)
    {
        AddSafeLimits dialog = new AddSafeLimits();
        dialog.Show();
    }
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-25T10:59:55.513

我认为 LINQ 将返回一个空而不是 NULL，因此您可以尝试使用：

```
if (levels== null||levels.Count==0)
        {
            AddSafeLimits dialog = new AddSafeLimits();
            dialog.Show();
        } 
```

# facebook-insights - 从页面粉丝那里阅读关于 Facebook 的公共数据见解

> ID：16212082
> 
> 赞同：1
> 
> 时间：2013-04-25T10:14:16.053
> 
> 标签：facebook-insights

我注意到，为了获取洞察信息，Facebook 提供了一个特定的图形 api，但不幸的是我只能访问 page_fans_country 和 page_storytellers 数据。

但是我已经看到，如果我进入一般粉丝页面，有一个“喜欢”部分（在“关于”页面中），其中创建了一个关于“talking_about_this”数量趋势和“喜欢”趋势的图表数字。

这两个图形是“画布”对象，如果我将鼠标移到它们上面，则会显示一些图形 api 无法获取的信息。我试图通过分析 javascript 代码找到一种方法来获取这些信息。

一旦我理解的是，有一个“鼠标悬停”事件会[在 118 行](https://fbstatic-a.akamaihd.net/rsrc.php/v2/yA/r/gsJq34yNAno.js)
javascript 页面上激活代码，并且此代码在 html 页面中显示一个类名为“graphTooltip”的 div 元素。但是我无法在此 div 元素中获取文本信息。有谁知道如何获得该文本？

# .htaccess - 试图将一个页面重定向到另一个页面，但我的重定向规则没有响应

> ID：16212084
> 
> 赞同：1
> 
> 时间：2013-04-25T10:14:18.950
> 
> 标签：.htaccess, redirect, http-status-code-301

我已经删除和/或合并了网站上的几个页面，现在我需要设置 301 重定向。
我认为在我的 .htaccess 中这样做是我最好的选择，但我试图添加的规则并没有引起注意或其他什么。他们完全没有反应...

这些是我到目前为止尝试过的规则：

```
Redirect 301 /?Page=sPage&sPage=Our-Store %{SERVER_NAME}?Page=sPage&sPage=About-Us 
```

```
RewriteRule ^/?Page=sPage&sPage=Our-Store$ %{SERVER_NAME}?Page=sPage&sPage=About-Us[R=301,NC,L] 
```

```
RewriteCond %{HTTP_HOST} !^%{SERVER_NAME}$ [NC]
RewriteRule . %{SERVER_NAME}%{REQUEST_URI}?Page=sPage&sPage=About-Us [R=301,L] 
```

最后一个搞砸了 CSS 和 JS src 的...

我在顶部有这个：

```
RewriteEngine On  
RewriteBase / 
```

有什么建议吗？

**更新：后续问题**
我喜欢 3000+ 个相同的 url 字符串，它们的结尾 ID 不同。如何重定向所有这些请求？
这是旧网址：`?Page=Tuninglist&Car=*`
这是新网址： `?Page=Tuning&view=vehicle&type=Car&id=*`
* 的值`id=`只是整数...

希望这样的事情可以工作，但没有 - 得到了 500 服务器错误......

```
RewriteCond %{QUERY_STRING} ^Page=Tuninglist&Car=([0-9]+)$
RewriteRule ^ ?Page=Tuning&view=vehicle&type=Car&id=$1 [R=301,L] 
```

*编辑：发生 500 服务器错误是因为我`?`在条件开始时有一个。重定向现在有效，但不包括
结束值。 我得到的只是正确的页面，而不是基于该页面的相关内容......`id`
`id`

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-25T10:22:39.703

您无法匹配重定向或重写规则中的查询字符串，您需要使用`%{QUERY_STRING}`条件中的变量来匹配：

```
RewriteCond %{QUERY_STRING} ^Page=sPage&sPage=Our-Store$
RewriteRule ^ %{REQUEST_URI}?Page=sPage&sPage=About-Us [R=301,L] 
```

# java - Hadoop 只从 reducer 产生一个输出

> ID：16212088
> 
> 赞同：1
> 
> 时间：2013-04-25T10:14:34.873
> 
> 标签：java, image-processing, hadoop, mapreduce, hdfs

虽然我知道 Hadoop 通常不用于图像处理，但作为概念证明，我一直在尝试使用 Hadoop 实现图像处理。在此过程中，我成功实现了 Sobel 边缘检测算法，使用 MapReduce 模型并在 Hadoop 下运行。

我的程序应该从 HDFS 获取一个文件夹作为输入并处理文件夹中的文件并将输出写入 HDFS。但是，它正在考虑输入文件夹中的单个文件并将单个文件写入输出。

这是文件的源代码[https://gist.github.com/ardahal/f0046e50e04fadc28a96](https://gist.github.com/ardahal/f0046e50e04fadc28a96)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-25T11:26:41.497

这将是半自动的，但总比没有好。假设您的输入目录是：`/user/hadoop/inpur_dir/input_i.txt`

```
Path pth = "/user/hadoop/inpur_dir/input_"

for(int i = 0; i < number_of_image; i++){
    FileInputFormat.addInputPath(job, pth.suffix(i+".txt") );
} 
```

和

这是[多个输出](http://hadoop.apache.org/docs/stable/api/org/apache/hadoop/mapreduce/lib/output/MultipleOutputs.html)。这比我之前提出的要好

# c# - 如何从 Controller MVC 中获取选定的下拉值

> ID：16212089
> 
> 赞同：5
> 
> 时间：2013-04-25T10:14:36.493
> 
> 标签：c#, jquery, asp.net-mvc, razor

以下是视图：

```
 <div class="editor-label">
        Select Currency :
        </div>
        <div class="editor-field">
            @Html.DropDownList("CurrencyId", new SelectList(ViewBag.CurrencyId, "Value", "Text"))
 </div><div class="editor-label">
         Select GameType :
        </div>
        <div class="editor-field">
           @Html.DropDownList("GameTypeId", new SelectList(ViewBag.GameTypeId, "Value", "Text"), new { style = "width:100px" })
            @Html.ValidationMessageFor(model => model.GameTypeId)
        </div>

        <div class="editor-label">
          Select Category :
        </div>
        <div class="editor-field">
          @Html.DropDownList("CategoryByGameType", Enumerable.Empty<SelectListItem>(), "Select Category")
          @Html.ValidationMessageFor(model => model.CategoryId)
        </div> 
```

以下是控制器：-

```
 public ActionResult Create()
        {
            List<Currency> objCurrency = new List<Currency>();
            objCurrency = db.Currencies.ToList();
            List<SelectListItem> listItems = new List<SelectListItem>();
            listItems.Add(new SelectListItem()
            {
                Value = "0",
                Text = "Select Currency"
            });
            foreach (Currency item_Currency in objCurrency)
            {
                listItems.Add(new SelectListItem()
                {
                    Value = item_Currency.CurrencyId.ToString(),
                    Text = item_Currency.CurrencyName
                });
            }
            ViewBag.CurrencyId = new SelectList(listItems, "Value", "Text");

            List<GameType> objgametype = objGameByGameType.GetDistinctGameTypeID();
            List<SelectListItem> listItems_1 = new List<SelectListItem>();
            listItems_1.Add(new SelectListItem()
            {
                Value = "0",
                Text = "Select Game Type"
            });
            foreach (GameType item_GameType in objgametype)
            {
                listItems_1.Add(new SelectListItem()
                {
                    Value = item_GameType.GameTypeId.ToString(),
                    Text = item_GameType.GameTypeName
                });
            }
            ViewBag.GameTypeId = new SelectList(listItems_1, "Value", "Text");

            return View();
        } 
```

以下是我的 Jquery，因为我正在使用 Casceding Dropdown

```
$(function () {
            $("#GameTypeId").change(function () {
                var theatres = "";
                var gametype = "";
                var mytestvar = "";
                var gametypeid = $(this).val();

            mytestvar += "<option value= -1 >Select Category</option>";
            $.getJSON("@Url.Action("GetCategoryByGameType", "GameCombination")?gametypeid=" + gametypeid, function (data) {
                $.each(data, function (index, gametype) {
                  //  alert("<option value='" + gametype.Value + "'>" + gametype.Text + "</option>");
                    mytestvar += "<option value='" + gametype.Value + "'>" + gametype.Text + "</option>";
                });
                //alert(mytestvar);
                $("#CategoryByGameType").html(mytestvar);
                $("#GamebyCategory").html("<option value=0>Select Game</option>");
                $("#LimitVariantByGameByGameType").html("<option value=0>Select Limit Variant</option>");
                $("#StakeCategory").html("<option value=0>Select Stake Category</option>");
                $("#StakeBuyInByStakeCategory").html("<option value=0>Select Stake Buy In By Stake Category</option>");
      });

    });
    }); 
```

提交数据时，如果创建时出现错误，我将无法取回下拉值

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-07-25T07:33:35.843

您必须在 View.cs 中创建一个对象`dropdownlist`，然后分配该值。之后，当您尝试获取`dropdown`值时，您必须使用 ViewBag 标题对象名称，然后使用下拉列表值。

下面的代码指定单选按钮。您可以将其更改为下拉菜单

```
@model MVC_Compiler.Models.UserProgram
@{
ViewBag.Title = "UserProgram";
}
<table style="background-color: #FBF9EF;">
            <colgroup>
                <col style="width: 20%;">
                <col style="width: 80%;">
            </colgroup>
            <tr>
                <td style="vertical-align: text-top">
                    @Html.RadioButtonFor(up => up.Language, "C")C<br />
                    @Html.RadioButtonFor(up => up.Language, "C++")C++<br />
                    @Html.RadioButtonFor(up => up.Language, "C#")C#<br />
                    @Html.RadioButtonFor(up => up.Language, "VB")VB<br />
                    @Html.RadioButtonFor(up => up.Language, "Java")Java<br />
                    @Html.RadioButtonFor(up => up.Language, "Perl")Perl<br />
                    @Html.HiddenFor(up => up.Language, new { @id = "Select_Language" })
                    @Html.HiddenFor(up => up.UserName, new { @id = "UserName" })
                </td> 
```

然后在模型中，您可以通过以下方式获取单选按钮值：

```
userProgram.Language 
```

其中 userProgram 是 ViewBag 标题。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-07-16T14:26:24.643

这应该让你知道你能做什么。

我建议您将 ajax 移到它自己的函数中，然后将`$.each`它移到它自己的函数中，然后从 ajax 函数中调用该`$.each`函数，并将 ajax 函数从主函数中调用。

```
$(function () {
    $("#GameTypeId").change(function () {
        var theatres = "";
        var gametype = "";
        var mytestvar = "";
        var gametypeid = $(this).val();

        mytestvar += "<option value= -1 >Select Category</option>";

        $.ajax({
            url: '/GameCombination/GetCategoryByGameType',
            type: 'GET',
            data: { "gametypeid": gametypeid},
            dataType: 'json',
            success: function (data) {
                $.each(data, function (index, gametype) {
                    //  alert("<option value='" + gametype.Value + "'>" + gametype.Text + "</option>");
                    mytestvar += "<option value='" + gametype.Value + "'>" + gametype.Text + "</option>";
                });
                //alert(mytestvar);
                $("#CategoryByGameType").html(mytestvar);
                $("#GamebyCategory").html("<option value=0>Select Game</option>");
                $("#LimitVariantByGameByGameType").html("<option value=0>Select Limit Variant</option>");
                $("#StakeCategory").html("<option value=0>Select Stake Category</option>");
                $("#StakeBuyInByStakeCategory").html("<option value=0>Select Stake Buy In By Stake Category</option>");
            },
            error: function (error) {
                alert(error.toString());
            }
        }); 

    });
}); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-05-06T12:24:29.720

与 Andras 所说的相呼应，如果发生这种情况，您不能在 .js 文件中使用剃刀语法。

您还应该熟悉您的调试工具，您使用的是什么浏览器？大多数都有一套不错的开发工具（有些是内置的），您可以在其中检查页面和提交表单时发出的请求。

您也可以在浏览器的控制台中以交互方式使用 jquery 来环顾四周。

您没有显示您的帖子创建方法，也许它与该代码有关？

# silverlight - ListView - 中间的选定项

> ID：16212092
> 
> 赞同：0
> 
> 时间：2013-04-25T10:14:45.690
> 
> 标签：silverlight, xaml, listview, windows-store-apps

我正在使用 XAML 构建 Windows 应用商店应用程序。我有一个可滚动的 ListView，它在开始时设置了 SelectedItem。现在，我有两个要求：

1.  我希望所选项目始终可见
2.  此外，它应该尽可能显示在列表的中间（第一个元素不可能）。

我可以通过使用列表的 LayoutUpdated 事件和 list.ScrollIntoView(item) 方法来部分满足第一个要求，但这不允许我手动向下滚动列表，直到取消选择该项目。

对于第二个要求，我没有想法。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-05-15T21:00:59.210

好的，了解如何实现：http: [//fczaja.blogspot.com/2013/05/xaml-listview-scroll-selecteditem-to.html](http://fczaja.blogspot.com/2013/05/xaml-listview-scroll-selecteditem-to.html)

# azure - 启用磁盘缓存时出现 Azure ARR 错误

> ID：16212093
> 
> 赞同：1
> 
> 时间：2013-04-25T10:14:47.313
> 
> 标签：azure, iis-7.5, arr

我们有 azure 托管服务，现在我需要在其上设置 ARR（应用程序请求路由）。我关注了博客[http://robindotnet.wordpress.com/2011/07/](http://robindotnet.wordpress.com/2011/07/)并且 ARR 工作正常。现在我需要为此启用磁盘缓存，我正在尝试以下命令：

```
%windir%\system32\inetsrv\appcmd.exe set config -section:system.webServer/diskCache /+"[path='c:\cache',maxUsage='0']" /commit:apphost >> C:\setDiskCache.txt 
```

但出现以下错误：错误（消息：新的 driveLocation 对象缺少必需的属性。无法添加类型为“driveLocation”的重复集合条目，其唯一键属性“path”设置为“c:\cache”。）

并且此文件夹中没有缓存任何内容。任何方向或帮助表示赞赏。

以下是完整的 cmd 文件供参考：

```
cd /d "%~dp0"

start /wait msiexec.exe /i webfarm_amd64_en-US.msi /qn /log C:\installWebfarmLog.txt
start /wait msiexec.exe /i requestRouter_amd64_en-US.msi /qn /log C:\installARRLog.txt

%windir%\system32\inetsrv\appcmd.exe set config -section:system.webServer/proxy /enabled:"True" /reverseRewriteHostInResponseHeaders:"False" /preserveHostHeader:"True" /commit:apphost >> C:\setProxyLog.txt

%windir%\system32\inetsrv\appcmd.exe set config -section:applicationPools -applicationPoolDefaults.processModel.idleTimeout:00:00:00 >> C:\setAppPool.txt

%windir%\system32\inetsrv\appcmd.exe set config -section:system.webServer/diskCache /+"[path='c:\cache',maxUsage='0']" /commit:apphost >> C:\setDiskCache.txt

exit /b 0 
```

我可以在这里为 IIS 找到相同的东西 [http://www.iis.net/learn/extensions/configuring-application-request-routing-(arr)/configure-and-enable-disk-cache-in-application- request-routing]，可以手动启用。但是我们需要以编程方式启用它。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-11-21T19:59:50.447

通常情况下，错误消息会提示原因。问题是每个驱动器位置值只能有一个条目。这意味着脚本第一次运行良好，但第二次它会抛出，因为该值已被应用。

您无法使用 appcmd 删除节点（它不支持清除集合），但您可以使用文本编辑器（此文件：%windir%\System32\inetsrv\config\applicationHost.config）。或者您可以运行 powershell 脚本：

```
Import-Module WebAdministration
Remove-WebConfigurationProperty  -pspath 'MACHINE/WEBROOT/APPHOST'  -filter "system.webServer/diskCache" -name "." 
```

在任何一种情况下，这都是将被操纵的节点：

```
<driveLocation path="c:\cache" maxUsage="0" /> 
```

之后，您将能够重新运行您的代码。

# html - 如何摆脱wordpress中的表格边框？

> ID：16212095
> 
> 赞同：0
> 
> 时间：2013-04-25T10:15:02.827
> 
> 标签：html, wordpress, html-table

我正在使用 wordpress 为我的朋友建立一个简单的网站。在一个页面中，我现在想制作一个简单的矩形并在其中放入一些信息。自从我在 90 年代学习 html 后，我仍然使用一张表（带有一个 td）来执行此操作。因为我希望表格边框消失，所以我创建了这样的表格：

```
<table border="0">
<tr><td>some content</td></tr>
</table> 
```

不幸的是，边框仍然出现（请参阅[此处了解](http://merkentent.nl/pakketten/)我正在处理的页面）。

有人知道我怎样才能摆脱这个表格边框吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-25T10:16:38.297

您的样式表中有此规则`style.css Line 1071`，需要删除

```
th, td, table {
    border: 1px solid #DDDDDD;
} 
```

注意：这是一个元素选择器，将应用于您网站中的所有表格。

你在一个带有类的 div 里面有那个表，`post-entry`所以你可以使用下面的选择器覆盖样式

```
.post-entry *  { /* '*' will select all element inside .post-entry so be cautious */
   border: 0 !important;
} 
```

如果您也有`post-entry`其他元素，请明确指定元素而不是使用`*`

```
.post-entry table, .post-entry th, .post-entry td {
   border: 0;
} 
```

提示 : 使用 firebug，将节省您在调试 CSS、HTML 和 JS 时问的更少的问题和浪费的时间

# r - R如何计算数据框中行之间的差异

> ID：16212097
> 
> 赞同：35
> 
> 时间：2013-04-25T10:15:05.660
> 
> 标签：r, diff, dataframe

这是我的问题的一个简单示例：

```
> df <- data.frame(ID=1:10,Score=4*10:1)
> df
       ID Score
    1   1    40
    2   2    36
    3   3    32
    4   4    28
    5   5    24
    6   6    20
    7   7    16
    8   8    12
    9   9     8
    10 10     4
    > diff(df)

Error in r[i1] - r[-length(r):-(length(r) - lag + 1L)] : 
  non-numeric argument to binary operator 
```

谁能告诉我为什么会出现这个错误？

* * *

## 回答 #1

> 赞同：43
> 
> 时间：2013-04-25T10:18:35.457

diff 需要一个矩阵或向量而不是数据框。尝试

```
data.frame(diff(as.matrix(df))) 
```

* * *

## 回答 #2

> 赞同：27
> 
> 时间：2013-04-25T10:18:19.620

也许您正在寻找这样的东西：

```
> tail(df, -1) - head(df, -1)
   ID Score
2   1    -4
3   1    -4
4   1    -4
5   1    -4
6   1    -4
7   1    -4
8   1    -4
9   1    -4
10  1    -4 
```

`data.frame`如果它们是相同的尺寸，您可以将两个 s 相减或相加。因此，我们在这里所做的是减去`data.frame`缺少第一行的一个 ( `tail(df, -1)`) 和一个缺少最后一行的 ( `head(df, -1)`) 并减去它们。

* * *

## 回答 #3

> 赞同：14
> 
> 时间：2016-08-05T08:40:09.437

另一个使用选项`dplyr`是`mutate_each`遍历所有列，获取列 ( `.`) 与`lag`列( ) 的差异，`.`并删除顶部的 NA 元素`na.omit()`

```
library(dplyr)
df %>%
    mutate_each(funs(. - lag(.))) %>%
    na.omit() 
```

编辑：

而不是`mutate_each`（不推荐使用 - 如@PatrickT所述）使用`mutate_all`

```
df %>%
    mutate_all(funs(. - lag(.))) %>%
    na.omit() 
```

* * *

或使用`shift`from `data.table`。将 'data.frame' 转换为 'data.table' ( `setDT(df)`)，遍历列 ( `lapply(.SD, ..`) `) and get the difference between the column (`x `) and the`lag `(`shift `by default gives the`lag `as`type = "lag"`）。删除第一个观察值，即 NA 元素。

```
library(data.table)
setDT(df)[, lapply(.SD, function(x) (x- shift(x))[-1])] 
```

* * *

## 回答 #4

> 赞同：11
> 
> 时间：2013-04-25T10:18:52.523

因为 df 适用于向量或矩阵。您可以使用 apply 跨列应用函数，如下所示：

```
 apply( df , 2 , diff )
   ID Score
2   1    -4
3   1    -4
4   1    -4
5   1    -4
6   1    -4
7   1    -4
8   1    -4
9   1    -4
10  1    -4 
```

您似乎不太可能想要计算顺序 ID 的差异，因此您可以选择将其应用于 *除*第一列之外的所有列，如下所示：

```
apply( df[-1] , 2 , diff ) 
```

或者你可以使用`data.table`（不是它在这里添加任何东西，我只是真的想开始使用它！），我再次假设你不想应用`diff`到 ID 列：

```
DT <- data.table(df)
DT[ , list(ID,Score,Diff=diff(Score))  ]
    ID Score Diff
 1:  1    40   -4
 2:  2    36   -4
 3:  3    32   -4
 4:  4    28   -4
 5:  5    24   -4
 6:  6    20   -4
 7:  7    16   -4
 8:  8    12   -4
 9:  9     8   -4
10: 10     4   -4 
```

并且感谢@AnandaMahto，另一种语法可以更灵活地选择在哪些列上运行它可能是：

```
DT[, lapply(.SD, diff), .SDcols = 1:2] 
```

这`.SDcols = 1:2`意味着您要将`diff`函数应用于第 1 列和第 2 列。如果您有 20 列并且不想将其应用于 ID，您可以使用`.SDcols=2:20`作为示例。

* * *

## 回答 #5

> 赞同：5
> 
> 时间：2015-03-16T17:22:39.763

我想展示另一种方法来做这种事情，即使我经常觉得这样做并不受欢迎：使用 sql。

```
sqldf(paste("SELECT a.ID,a.Score"
            ,"      , a.Score - (SELECT b.Score"
            ,"                   FROM df b"
            ,"                   WHERE b.ID < a.ID"
            ,"                   ORDER BY b.ID DESC"
            ,"                   ) diff"
            ," FROM df a"
            )
      ) 
```

代码看起来很复杂，但实际上并不复杂，它有一些优势，正如您在结果中看到的那样：

```
 ID Score diff
 1   1    40 <NA>
 2   2    36 -4.0
 3   3    32 -4.0
 4   4    28 -4.0
 5   5    24 -4.0
 6   6    20 -4.0
 7   7    16 -4.0
 8   8    12 -4.0
 9   9     8 -4.0
 10 10     4 -4.0 
```

一个优点是您使用原始数据框（无需转换为其他类）并获得一个数据框（将其放入 res <- ....）。另一个优点是您仍然拥有所有行。第三个优点是您可以轻松考虑分组因素。例如：

```
df2 <- data.frame(ID=1:10,grp=rep(c("v","w"), each=5),Score=4*10:1)

sqldf(paste("SELECT a.ID,a.grp,a.Score"
            ,"      , a.Score - (SELECT b.Score"
            ,"                   FROM df2 b"
            ,"                   WHERE b.ID < a.ID"
            ,"                         AND a.grp = b.grp"
            ,"                   ORDER BY b.ID DESC"
            ,"                   ) diff"
     ," FROM df2 a"
     )
)

   ID grp Score diff
1   1   v    40 <NA>
2   2   v    36 -4.0
3   3   v    32 -4.0
4   4   v    28 -4.0
5   5   v    24 -4.0
6   6   w    20 <NA>
7   7   w    16 -4.0
8   8   w    12 -4.0
9   9   w     8 -4.0
10 10   w     4 -4.0 
```

* * *

## 回答 #6

> 赞同：5
> 
> 时间：2016-08-05T08:25:30.040

几年后添加它以确保完整性 - 您也可以使用简单 `[.data.frame`的子集来实现这一点

```
df[-1, ] - df[-nrow(df), ]
#    ID Score
# 2   1    -4
# 3   1    -4
# 4   1    -4
# 5   1    -4
# 6   1    -4
# 7   1    -4
# 8   1    -4
# 9   1    -4
# 10  1    -4 
```

* * *

## 回答 #7

> 赞同：1
> 
> 时间：2021-05-12T03:45:24.993

看这个答案： [计算 R 中的行之间的差异并设置零第一个差异](https://stackoverflow.com/questions/22416749/compute-difference-between-rows-in-r-and-setting-in-zero-first-difference)

我认为这是**最简单**的方法。

```
df <- data.frame(ID=1:8, x2=8:1, x3=11:18, x4=c(2,4,10,0,1,1,9,12))
df$vardiff <- c(0, diff(df$x4))
df 
```

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2021-04-30T12:58:57.390

我个人的简单方法是使用 pivot_wider 创建另一列，然后您可以使用 summarise 减去差异：D

全部来自 dyplr 包

# jquery - jQuery——结果长度

> ID：16212098
> 
> 赞同：0
> 
> 时间：2013-04-25T10:15:06.150
> 
> 标签：jquery, asp.net, json

我正在使用 asp.net 和 Jquery Cascading Dropdown。我得到了价值，但没有得到绑定。结果`JSON`是将长度作为总字符而不是总记录

结果是

```
{
"Table": [
    {
        "VoyageMasterID": 3,
        "VoyageCode": "9101"
    },
    {
        "VoyageMasterID": 7,
        "VoyageCode": "1617"
    }
]
} 
```

但它的长度为 93

但在这里我的总记录只有 2

因此，当我将值绑定到 Dropdown 时，它不会被绑定。

我的杰森：

```
 $.ajax({
                    type: "POST",
                    contentType: "application/json; charset=utf-8",
                    url: "Port.aspx/Code_Get",
                    data: "{ServiceID:'" + $(".ddlService").val() + "'}",
                    dataType: "json",
                    success: function (data) {
                        try {      
                            Success(data.d);
                            // 

  function Success(result) {         
        $(".ddlVoyage").empty();
        $(".ddlVoyage").append("<option  value=''>Select </option>");
        $.each(result, function (index, value) {              
        $(".ddlVoyage").append("<option value='" + value.VoyageMasterID + "'>" + value.VoyageCode + "</option>");
        });
    } 
```

我没有将数据绑定到 Select ，因为我来自 Json 的数据没有给出正确的结果。

有人可以帮忙吗

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-25T10:24:29.070

我猜这`data`是从您的服务返回的字符串，而不是实际的 JSON 对象。

试试这个数组长度：

```
var json = $.parseJSON(data.d);
console.log(json.length); 
```

# javascript - jquery datepicker日历图标定位

> ID：16212099
> 
> 赞同：2
> 
> 时间：2013-04-25T10:15:09.873
> 
> 标签：javascript, jquery, html, jquery-ui, jquery-ui-datepicker

我正在使用 jquery-ui 日期选择器。问题是，默认情况下，库在输入字段之后直接插入日历图标。但是我的 HTML 标记有点不同，我希望日历图标出现在 DOM 中的其他位置，即在输入字段的父容器之外。

我什至尝试`<img/>`手动添加我自己的并添加了 class `ui-datepicker-trigger`，但它不会触发任何东西。

我如何决定图标应该出现在 DOM 中的哪个位置并且它必须起作用？

这就是我要的：

```
<div class="parent">
    <input id="datepicker" class="hasDatepicker" type="text" />
</div>

<img class="ui-datepicker-trigger" src="images/calendar.gif" alt="..." title="..." /> 
```

不是这个（默认 jquery-ui 插入）：

```
<input id="datepicker" class="hasDatepicker" type="text" />
<img class="ui-datepicker-trigger" src="images/calendar.gif" alt="..." title="..." /> 
```

非常感谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-25T10:21:42.397

尝试手动添加触发器，该触发器将在图像单击时显示日期选择器：

```
$("#datepickerImage").click(function() {
    $("#datepicker").datepicker( "show" );; 
}); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-25T10:19:00.760

试试这个

```
$(selector).datepicker({showOn: 'button', buttonImage: 'img/cal.gif',
      buttonImageOnly: true, buttonText: 'Open calendar'}); 
```

[**看这里**](http://forum.jquery.com/topic/altering-position-of-datepicker-icon)

# qt - 无法在 Windows 7 上的 qt 中使用类 QProcess

> ID：16212104
> 
> 赞同：0
> 
> 时间：2013-04-25T10:15:35.517
> 
> 标签：qt, windows-7, cmd, uac, qprocess

我只是使用 QProcess 在 windows XP 上的 qt 中执行一个 exe 文件。它可以正常工作，但不能在 Windows 7 上运行。我认为这显然是因为 Windows 7（或 Windows VISTA）上的 UAC 问题。有人可以帮我解决这个问题吗？提前致谢。这是我的代码：

```
QProcess p(0);
p.start("cmd", QStringList()<<"/c"<<"copy .\\tmp\\GamesKoreClient.exe .\\GamesKoreClient.exe"); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-05-02T23:20:18.797

您可以正确启动流程，但要接收结果，您必须等到此流程完成。开始流程后添加此行：

```
p.waitForFinished(); 
```

然后关闭进动：

```
p.close() 
```

# python - 当条件（python）时从嵌套列表的字典中返回对象

> ID：16212109
> 
> 赞同：3
> 
> 时间：2013-04-25T10:15:52.517
> 
> 标签：python, list, object, dictionary, numpy

我有一本看起来像这样的字典：

```
myD={'key_0':[[['descrp_0_0'],Obj_0_0],.....,[['descrp_0_N'],obj_0_N]]
 ,.....,
 'key_N':[[['descrp_N_0'],Obj_N_0],.....,[['descrp_N_N'],obj_N_N]]} 
```

所有 obj 都是相同形状的 ndarray，并且有一个函数 f()，它返回一个 x ，它是一个浮点数，即：obj_0_0.f() --> x_0_0

我想提取一个字典，其中包含 descrp 和 obj 及其各自的键，其中 obj.f() （即 x）对于每个键中的值是最小值（在 N 个键的 myD 范围内，N 个项目的形状为 [descrp ，对象]）：

结果必须类似于：

```
resD = {'key_0':[[descrp_0_min],obj_0_min],
    .....,
     'key_N':[[descrp_N_min],obj_0_min]} 
```

就像是：

```
minXs = [min([item[-1].f() for item in v]) for k,v in myD.iteritems()]

minObjs = [item for k,v in myD.iteritems() for item in v if item[-1].get_potential_energy() == minXs[myD.keys().index(k)]]

resultList = zip(myD.keys(),minObjs)
resultDict = dict()
for i in resultList:
     resultDict[i[0]]=i[1] 
```

虽然它有效但相当麻烦，我认为必须有一种更简单的方法来做到这一点。或者也许我应该为此目的使用*numpy.ndarray ？*

感谢您的帮助和评论。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-25T11:27:19.040

如果我正确理解了您的数据结构，我认为您可以通过调用内置`min`函数并为其提供`key`函数的字典理解来解决此问题。

```
results = {key: min(values, key=lambda x:x[-1].f())
           for key, values in myD.iteritems()} 
```

你的代码已经很接近了！

# php - setVariables() 多对多关系 symfony2

> ID：16212110
> 
> 赞同：0
> 
> 时间：2013-04-25T10:15:58.240
> 
> 标签：php, symfony

我在entityA和entityB之间有一个多对多的关系，我将使用嵌入的形式来以entityB的形式添加entityA的属性，如下所示

```
$builder ->add('entityAs', 'entity', array(
              'class'    => 'xxxBundle:EntityA',
              'property' => 'name',
              'multiple' => false,
            ));} 
```

当我将“多个”设置为 true 时，一切正常。但是当我将其设置为 false 时，我收到以下错误

```
Property "entityAs" is not public in class "xxx\Entity\EntityB". Maybe you should create the method "setEntityAs()"? 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-25T11:58:29.147

像往常一样，EntityB 类中的属性 entityAs 不是公共的（受保护的或私有的）。所以你必须为它编写（或生成）一个设置器： setEntityAs($entityAs)

多个 true 可能会起作用，因为我认为（不确定）它使用 addXxx Setter。证明我，如果您的 EntityB 类中有 addEntityAs 方法？

Buuuuut，如果你有一个多对多的关系，为什么你要把 multiple 设置为 false？

# magento - 我们是否可以在 magento 管理员中添加供应商和供应商信息？

> ID：16212118
> 
> 赞同：0
> 
> 时间：2013-04-25T10:16:24.157
> 
> 标签：magento, magento-1.7

我是 magento 的新手。我需要在我们的产品中添加供应商，并且供应商信息也应该是可编辑的。请建议我该怎么做。我正在使用 Magento 1.7

提前致谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-25T11:51:36.087

默认情况下，magento 不提供此功能，但您仍然可以使用 magento 属性执行此操作。

创建一个属性“供应商或某事”并将这个新创建的属性分配给magento的属性集，现在这个新创建的属性显示在您的产品编辑页面中。

如果您对 magento 不熟悉，此链接可能对您有用[如何创建属性？](http://www.magentocommerce.com/knowledge-base/entry/tutorial-creating-attributes-custom-fields)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-25T10:31:53.377

您将需要为此安装扩展程序。我搜索了一些，我发现了这个：[Magento 上的供应商](http://www.magentocommerce.com/boards/viewthread/216965/)

你得给他发私信才能知道^^

# java - Webdriver:Element 当前不可见，因此可能无法与之交互。

> ID：16212119
> 
> 赞同：-1
> 
> 时间：2013-04-25T10:16:26.507
> 
> 标签：java, webdriver, element, visible

在我的网页上，我有一个用户名下拉列表，当我们将鼠标悬停在它上面时，我们会得到注销选项，然后只有用户能够注销。自动化时，由于注销链接被隐藏，webdriver 无法与之交互。请提出一些解决方案。 ![在此处输入图像描述](https://i.stack.imgur.com/FRijr.png)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-25T11:39:50.433

使用`Actions`类鼠标悬停，然后，当注销链接可见时单击它。您可以使用以下代码作为参考。

```
Actions actions = new Actions(driver);
//for hovering over the username field
WebElement menuHoverLink = driver.findElement(By.linkText("username"));
actions.moveToElement(menuHoverLink).perform();
//for clicking the logout link
WebElement logoutLink = driver.findElement(By.linkText("logout"));
logoutLink.click(); 
```

# sql - 更新数据集以添加计算字段

> ID：16212126
> 
> 赞同：0
> 
> 时间：2013-04-25T10:16:48.727
> 
> 标签：sql, tsql

我有一个数据集，如下所示：

```
SELECT jockey.jockey_skey
, raceresults.place 
FROM   jockey 
       INNER JOIN runnersandriders 
               ON jockey.jockey_skey = runnersandriders.jockey_skey 
       INNER JOIN horse 
               ON runnersandriders.horse_skey = horse.horse_skey 
       INNER JOIN raceresults 
               ON horse.horse_skey = raceresults.horse_skey 
GROUP  BY jockey.jockey_skey, 
          raceresults.place 
ORDER  BY jockey.jockey_skey 
```

这为我提供了：

```
Jockey_Skey    Place
1              01
1              04
2              03
2              04
3              02
3              02 
```

我想做的是计算一个骑师跑了多少场比赛，以及他们来的名单。

所以骑师 1，比赛 2 次，第 1 次和第 4 次，依此类推，但对于我的一生，我不记得该怎么做。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-25T10:36:05.720

您可以使用这样的方法来获取一行中每个骑师的结果：

```
SELECT  jockey.jockey_skey,
        TotalRaces = COUNT(*),
        [1sts] = COUNT(CASE WHEN raceresults.place = '01' THEN 1 END),
        [2nds] = COUNT(CASE WHEN raceresults.place = '02' THEN 1 END),
        [3rds] = COUNT(CASE WHEN raceresults.place = '03' THEN 1 END),
        [4ths] = COUNT(CASE WHEN raceresults.place = '04' THEN 1 END),
        [5ths] = COUNT(CASE WHEN raceresults.place = '05' THEN 1 END),
        [6ths] = COUNT(CASE WHEN raceresults.place = '06' THEN 1 END),
        [7ths] = COUNT(CASE WHEN raceresults.place = '07' THEN 1 END),
        [8ths] = COUNT(CASE WHEN raceresults.place = '08' THEN 1 END),
        -- etc
        [NonRunner] = COUNT(CASE WHEN raceresults.place = 'NR' THEN 1 END),
        [Fell] = COUNT(CASE WHEN raceresults.place = 'F' THEN 1 END),
        [PulledUp] = COUNT(CASE WHEN raceresults.place = 'PU' THEN 1 END),
        [Unseated] = COUNT(CASE WHEN raceresults.place = 'U' THEN 1 END),
        [Refused] = COUNT(CASE WHEN raceresults.place = 'R' THEN 1 END),
        [BroughtDown] = COUNT(CASE WHEN raceresults.place = 'B' THEN 1 END)
FROM    jockey 
        INNER JOIN runnersandriders 
            ON jockey.jockey_skey = runnersandriders.jockey_skey 
        INNER JOIN horse 
            ON runnersandriders.horse_skey = horse.horse_skey 
        INNER JOIN raceresults 
            ON horse.horse_skey = raceresults.horse_skey 
GROUP  BY jockey.jockey_skey
ORDER  BY jockey.jockey_skey 
```

**[SQL Fiddle 的简化示例](http://sqlfiddle.com/#!3/e24a0/9)**

或者，您可以使用`WITH ROLLUP`获取额外的总计行：

```
SELECT  jockey.jockey_skey,
        raceresults.place,
        [CountOfResult] = COUNT(*)
FROM    jockey 
        INNER JOIN runnersandriders 
            ON jockey.jockey_skey = runnersandriders.jockey_skey 
        INNER JOIN horse 
            ON runnersandriders.horse_skey = horse.horse_skey 
        INNER JOIN raceresults 
            ON horse.horse_skey = raceresults.horse_skey 
GROUP  BY jockey.jockey_skey, raceresults.place
WITH ROLLUP
ORDER  BY jockey.jockey_skey, raceresults.place; 
```

其中`NULL`值代表总计

**[SQL Fiddle 的简化示例](http://sqlfiddle.com/#!3/e24a0/8)**

# c# - 在文本文件的特定位置添加新行。

> ID：16212127
> 
> 赞同：16
> 
> 时间：2013-04-25T10:16:51.680
> 
> 标签：c#, io, streamwriter

我正在尝试在文件中添加特定的文本行。特别是在两个边界之间。

如果我想在 item1 的边界之间添加一条线，它会是什么样子的示例：

```
[item1]
2550 coins 995 200000 7
2550 coins 995 200000 7
2550 coins 995 200000 7
2550 coins 995 200000 7
2550 coins 995 200000 7
//Add a line here in between the specific boundaries
[/item1]
[item2]
2550 coins 995 200000 7
2550 coins 995 200000 7
2550 coins 995 200000 8
2550 coins 995 200000 7
2550 coins 995 200000 7
[/item2]
[item3]
2550 coins 995 200000 7
2550 coins 995 200000 7
2550 coins 995 200000 7
2550 coins 995 200000 7
2550 coins 995 200000 7
[/item3] 
```

这是我迄今为止尝试过的，但它远非正确。它一直说该文件正在被读者使用，因此作者无法对其进行编辑，当我确实让它工作时，它清除了整个文档。

```
public void createEntry(String npcName)
{
    String line;
    String fileName = "Drops.de";
    StreamWriter streamWriter = new StreamWriter(fileName);
    StreamReader streamReader = new StreamReader(fileName);
    line = streamReader.ReadLine();
    if (line == ("[" + npcName + "]"))
    {
        streamReader.ReadLine();
        streamWriter.WriteLine("Test");
    }
} 
```

我也想知道如何在文档末尾写行。

* * *

## 回答 #1

> 赞同：22
> 
> 时间：2013-04-25T11:42:54.820

这会将行添加到您想要的位置。（确保你有`using System.IO;`并`using System.Linq;`添加）

```
public void CreateEntry(string npcName) //npcName = "item1"
{
    var fileName = "test.txt";
    var endTag = String.Format("[/{0}]", npcName);
    var lineToAdd = "//Add a line here in between the specific boundaries";

    var txtLines = File.ReadAllLines(fileName).ToList();   //Fill a list with the lines from the txt file.
    txtLines.Insert(txtLines.IndexOf(endTag), lineToAdd);  //Insert the line you want to add last under the tag 'item1'.
    File.WriteAllLines(fileName, txtLines);                //Add the lines including the new one.
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-25T11:41:52.023

你不应该打开你的文件两次，试试这个：

```
FileStream fileStream = new FileStream(fileName, FileMode.OpenOrCreate, FileAccess.ReadWrite, FileShare.None);
StreamWriter streamWriter = new StreamWriter(fileStream);
StreamReader streamReader = new StreamReader(fileStream); 
```

另一个想法是插入行的逻辑，也许更简单的方法是将数据逐行复制到新文件中，在需要时插入新部分并继续。或者在记忆中做。

要将行添加到末尾，您可以使用 FileMode.Append 或自己查找

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2017-08-22T04:16:35.500

试试这个方法

```
using System.IO;
using System.Linq;

    /// <summary>
    /// Add a new line at a specific position in a simple file        
    /// </summary>
    /// <param name="fileName">Complete file path</param>
    /// <param name="lineToSearch">Line to search in the file (first occurrence)</param>
    /// <param name="lineToAdd">Line to be added</param>
    /// <param name="aboveBelow">insert above(false) or below(true) of the search line. Default: above </param>
    internal static void insertLineToSimpleFile(string fileName, string lineToSearch, string lineToAdd, bool aboveBelow = false)
    {          
        var txtLines = File.ReadAllLines(fileName).ToList();
        int index = aboveBelow?txtLines.IndexOf(lineToSearch)+1: txtLines.IndexOf(lineToSearch);
        if (index > 0)
        {
            txtLines.Insert(index, lineToAdd);
            File.WriteAllLines(fileName, txtLines);
        }
    } 
```

# c# - 提取字段值

> ID：16212128
> 
> 赞同：0
> 
> 时间：2013-04-25T10:16:56.597
> 
> 标签：c#, regex

如何使用正则表达式从以下字符串中提取**用户名值：**

> Acc sfjlsf56 1 0 用户名=User_1，组名=DCN_VPN_Support，

必须是 User_1

> Acc t3we89ab 1 0 用户名=John，组名=DCN_VPN_Support，

一定是约翰

> Acc y5g769bo 1 0 用户名=，组名=DCN_VPN_Support，

必须为空

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-04-25T10:28:34.280

为了提取用户名，我们查找`User-Name=`令牌，然后匹配它后面不是 a 的所有字符`,`（表示下一个元素）。我们用名称标记这个匹配的组，`"username"`以便稍后检索它：

`User-Name=(?<username>[^,]*)`

```
var match = Regex.Match(stringToMatch, "User-Name=(?<username>[^,]*)");
string username = match.Success ? match.Groups["username"].Value : null; 
```

请注意，这会将空用户匹配为`""`( `String.Empty`) 而不是`null`。如果`null`需要，只需事后翻译即可。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-25T10:47:07.453

我相信 User-Name=[az\d]*，你可以使用

# servicestack - 如何将纯 json 数据发布到服务堆栈休息服务

> ID：16212129
> 
> 赞同：1
> 
> 时间：2013-04-25T10:16:57.580
> 
> 标签：servicestack

下面是我用来将 json 数据发布到 rest ful 服务的代码

var client = new JsonServiceClient(BaseUri);

```
 Todo d =  new Todo(){Content  = "Google",Order =1, Done = false };

        var s = JsonSerializer.SerializeToString < Todo>(d);

      //  client.Post<string>("/Todos/", "[{\"content\":\"YouTube\"}]");

     //   string payload= "[{\"id\":2,\"content\":\"abcdef\",\"order\":1,\"done\":false}]";
      //  string payload = @"{""todo"":{ {""content"":""abcdef"",""order"":1}} }";

        client.Post<string>("/todos/", s); 
```

我尝试传递普通的 json 数据，它继续显示消息“坏数据”。然后我尝试对同样不起作用的实体进行序列化。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-11-27T07:22:55.033

您可以使用 PostJsonToUrl，它包含在 ServiceStack.Text 中。

# magento - Magento 畅销书脚本中除以零

> ID：16212132
> 
> 赞同：0
> 
> 时间：2013-04-25T10:17:02.633
> 
> 标签：magento, division, zero

我找到了这个用于显示 magentos 畅销书的脚本，但我得到了一个**ERR (3)：警告：第**135 行和第 163 行除以零（见下面的代码）。我一直在尝试修复它几个小时并放弃了它，但我的错误日志中的警告让我感到困惑。有人可以看看，看看他们能不能告诉我出了什么问题？谢谢

```
<?php

/**
 * @author Branko Ajzele | http://activecodeline.com | branko.ajzele@surgeworks.com
 * @license GPL
 */

/**
*
*
05/06/2011 Modified by Erik Gabor | erikvail@gmail.com | http://www.mage-contacts.com
* @license GPL

*/ 

$storeId = Mage::app()->getStore()->getId();

$totalPerPage = ($this->show_total) ? $this->show_total :1;
$counter = 1;
$visibility = array(
                      Mage_Catalog_Model_Product_Visibility::VISIBILITY_BOTH,
                      Mage_Catalog_Model_Product_Visibility::VISIBILITY_IN_CATALOG
                  );

$storeId = Mage::app()->getStore()->getId();
$_productCollection = Mage::getResourceModel('reports/product_collection')
                              ->addAttributeToSelect('*')
                              ->setStoreId($storeId)
                  ->addStoreFilter($storeId)
                              ->addOrderedQty()
                              ->addAttributeToFilter('visibility', $visibility);

        if ($current_category = Mage::registry('current_category'))
    $_productCollection->addCategoryFilter($current_category);
    $_productCollection->setPage(1,$totalPerPage);  
        $_productCollection->setOrder('ordered_qty', 'desc');

        Mage::getSingleton('catalog/product_status')->addVisibleFilterToCollection($_productCollection);
        Mage::getSingleton('catalog/product_visibility')->addVisibleInCatalogFilterToCollection($_productCollection);

        $_helper = $this->helper('catalog/output');

//Mage_Reports_Model_Mysql4_Product_Collection
?>

<?php

 $_collectionSize = $_productCollection->count();

 if($current_category && $_collectionSize) :

?>
<div class="block">
<div class="block-title">
<strong><span><?php echo $current_category->getName()  ?> <?php echo $this->__('Bestseller') ?></span></strong>
</div>
<?php else: ?>
<div class="block">
<div class="block-title">
<strong><span> <?php echo $this->__('Bestseller') ?></span></strong>
</div>
 <?php endif;?>
  <?php $_collectionSize = $_productCollection->count() ?>
    <?php $_columnCount = $this->getColumnCount(); ?>
    <?php $i=0; foreach ($_productCollection as $_product): ?>
RIGHT HERE LINE 135 ---->   <?php if ($i++%$_columnCount==0): ?>
        <ul>
        <?php endif ?>
            <li id="category-bettseller">
                <a href="<?php echo $_product->getProductUrl() ?>" title="<?php echo $this->stripTags($this->getImageLabel($_product, 'small_image'), null, true) ?>" class="product-image"><img src="<?php echo $this->helper('catalog/image')->init($_product, 'small_image')->constrainOnly(TRUE)->keepAspectRatio(TRUE)->keepFrame(FALSE)->resize(195); ?>" width="195" height="284" alt="<?php echo $this->stripTags($this->getImageLabel($_product, 'small_image'), null, true) ?>" /></a>

                <h2 class="product-name" style="float:left;width:180px;margin:7px"><a href="<?php echo $_product->getProductUrl() ?>" title="<?php echo $this->stripTags($_product->getName(), null, true) ?>"><?php echo $_helper->productAttribute($_product, $_product->getName(), 'name') ?></a></h2>
                 <div style="float:left;width:180px;margin:7px">
                <?php if($_product->getRatingSummary()): ?>
                <?php echo $this->getReviewsSummaryHtml($_product, 'short') ?>
                <?php endif; ?>
                <?php  echo Mage::helper('core')->currency($_product->getPrice()) ?>

                    <?php if($_product->isSaleable()): ?>
                        <button type="button" title="<?php echo $this->__('Add to Cart') ?>" class="button btn-cart" onclick="setLocation('<?php echo Mage::getUrl('checkout/cart/add', array('product' => $_product->getId())) ?>')"><span><span><?php echo $this->__('Add to Cart') ?></span></span></button>
                    <?php else: ?>
                        <p class="availability out-of-stock"><span><?php echo $this->__('Out of stock') ?></span></p>
                    <?php endif; ?>
                    <ul class="add-to-links">
                        <?php if ($this->helper('wishlist')->isAllow()) : ?>
                            <li><a id="wish" href="<?php echo $this->helper('wishlist')->getAddUrl($_product) ?>" class="link-wishlist"><?php echo $this->__('Add to Wishlist') ?></a></li>
                        <?php endif; ?>
                        <?php if($_compareUrl=$this->getAddToCompareUrl($_product)): ?>
                            <li><a id="compare" href="<?php echo $_compareUrl ?>" class="link-compare"><?php echo $this->__('Add to Compare') ?></a></li>
                        <?php endif; ?>
                    </ul>
                </div>
            </li>
RIGHT HERE LINE 163------>   <?php if ($i%$_columnCount==0 || $i==$_collectionSize): ?>
        </ul>
</div>
        <?php endif ?>
        <?php endforeach ?> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-25T16:27:56.087

$_columnCount 要么是，要么`null`是`0`抛出除以零错误。

更改`$_columnCount`为 1，一切正常。

# android - 如何确定 GPS 点是否位于给定的开始和结束 GPS 位置集？

> ID：16212134
> 
> 赞同：5
> 
> 时间：2013-04-25T10:17:04.370
> 
> 标签：android, gps, location, latitude-longitude

我正在 Android 中寻找一种解决方案来检查 GPS 点是否位于给定的开始和结束 GPS 位置集中。例如，A 先生将从 X 点开始，并通过 Y 到达 Z 点。现在，如果 B 先生给定位置 P，那么我们要检查该点 P 是否位于 A 先生的路线上。

如果 GPS 似乎不够用，那么您也可以建议任何其他方式。

我期待着您的回音！！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-25T10:41:25.453

我假设“给定的开始和结束集”意味着您在数据库中有一个已定义的根。我的回答是基于相同的目的。看看下面的方法，

```
public static float getDistance (float lat1, float lng1, float lat2, float lng2 ) 
{
    double earthRadius = 3958.75;
    double dLat = Math.toRadians(lat2-lat1);
    double dLng = Math.toRadians(lng2-lng1);
    double a = Math.sin(dLat/2) * Math.sin(dLat/2) +
    Math.cos(Math.toRadians(lat1)) * Math.cos(Math.toRadians(lat2)) *
    Math.sin(dLng/2) * Math.sin(dLng/2);
    double c = 2 * Math.atan2(Math.sqrt(a), Math.sqrt(1-a));
    double dist = earthRadius * c;

    int meterConversion = 1609;

    return new Float(dist * meterConversion).floatValue();
} 
```

现在您需要将 A 先生的经纬度值与 DB 的值一一进行比较。如果距离只有几米，则表示 A 先生已经到过该点。使用此逻辑，您需要检查 A 先生的所有 GPS 点以及存储在数据库中的根。

# c# - 如何使用 c# 添加程序集的引用

> ID：16212137
> 
> 赞同：-1
> 
> 时间：2013-04-25T10:17:11.867
> 
> 标签：c#, project

我正在 Visual Studio 2010 中编写应用程序，我想使用 c# 添加一个库到引用，所以我将在业务类的文件中添加使用库和调用

```
public void addreference()
{

//needed code
}

public addInvocation()
{

//write in the file of business class
} 
```

**这就像使用鼠标选择添加引用，但我希望使用 c# 来做到这一点，**我该 怎么做？

* * *

**关键解决方案** 我尝试使用该解决方案但我发现了一个问题，我成功实例化了库的类但我无法使用他们的方法

首先我创建了一个名为 Interface1 的接口，其次我创建了一个名为 Classe1 的类，然后我生成了 .dll

**编码：**

```
using System;
using System.Collections.Generic;
using System.Linq;
using System.Text;

namespace ClassLibrary1
{
  public   interface Interface1
    {

         int add();
         int sub();
    }

  public class Class1 : Interface1
  {
      Class1()
      {

      }

      #region Interface1 Members

      public int add()
      {
          return 10;
      }

      public int sub()
      {
          return -10;
      }

      #endregion
  }
} 
```

* * *

我绑定到实例化class1 **的代码**

```
 string relative = "ClassLibrary1.dll";
 string absolute = Path.GetFullPath(relative);

Assembly assembly = Assembly.LoadFile(absolute);
System.Type assemblytype = assembly.GetType("ClassLibrary1.Class1");

object a = assembly.CreateInstance("ClassLibrary1.Class1", false,           BindingFlags.CreateInstance, null,null,null, null); 
```

* * *

现在我希望调用方法添加我该怎么做

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-25T10:28:44.243

反射似乎是显而易见的选择。从...开始

```
foreach (FileInfo dllFile in exeLocation.GetFiles("*.dll"))
{

    Assembly assembly = Assembly.LoadFile(dllFile.FullName);

        ... 
```

然后：

```
Type[] exportedTypes = assembly.GetExportedTypes();
foreach (Type exportedType in exportedTypes)
{
    //look at each instantiable class in the assembly
    if (!exportedType.IsClass || exportedType.IsAbstract)
    {
        continue;
    }

//get the interfaces implemented by this class
Type[] interfaces = exportedType.GetInterfaces();
foreach (Type interfaceType in interfaces)
{
    //if it implements IMyPlugInterface then we want it
    if (interfaceType == typeof(IMyPlugInterface))
    {
        concretePlugIn = exportedType;
        break;
    }
} 
```

最后

```
IMyPlugInterface myPlugInterface = (IMyPlugInterface) Activator.CreateInstance(concretePlugIn); 
```

...或类似的东西。它不会编译，但仍会得到 jist。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-05-09T08:10:35.150

```
var a = Activator.CreateInstance(assemblytype, argtoppass);
System.Type type = a.GetType();
if (type != null)
{
  string methodName = "methodname";
  MethodInfo methodInfo = type.GetMethod(methodName);
  object resultpath = methodInfo.Invoke(a, argtoppass);
  res = (string)resultpath;
} 
```

# objective-c - “仅显示 Obj-c”标志隐藏 xCode Instruments 上调用树的所有内容

> ID：16212138
> 
> 赞同：2
> 
> 时间：2013-04-25T10:17:19.247
> 
> 标签：objective-c, xcode4.5, instruments

我正在关注有关 Instruments 的[本](http://www.raywenderlich.com/23037/how-to-use-instruments-in-xcode)教程。本教程提供了一个示例项目来测试上面描述的步骤。

问题是，当我选中“仅显示 Obj-c”和“隐藏系统库”标志时，调用树列表中的所有行都被隐藏了，但项目中的代码是用 Obj-C 编写的。我必须在配置中进行一些更改才能像教程中那样查看项目行吗？

从教程中获取的调用树列表图像显示它必须是： ![从教程中获取的调用树列表图像显示了它必须如何](https://i.stack.imgur.com/NhR1b.png)

我的仪器执行的屏幕截图： ![我的仪器执行的屏幕截图](https://i.stack.imgur.com/KstlD.png)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-25T11:10:35.420

Ok, I don`t really know what happens here, but now it works. How?

What I did:

*   Erase the app in the device
*   Kill xCode ( using activity monitor )
*   Restart the computer ( Only restarting xcode didn't work )
*   Restart the device.
*   Clean the project
*   Try again.

May be is not the best answer, but it worked for me.

[UPDATE] The issue is there again, so I try this: [Xcode 4 Instruments doesn't show source lines](https://stackoverflow.com/questions/5268041/xcode-4-instruments-doesnt-show-source-lines)

And it works!

# iis-7 - 带有 Windows 身份验证的 IIS 7 失败

> ID：16212139
> 
> 赞同：1
> 
> 时间：2013-04-25T10:17:28.150
> 
> 标签：iis-7, windows-authentication

我的网站上有一个文件夹，我想通过 Windows 身份验证进行保护。我得到的问题是提示重新出现 - 就像凭据不正确一样。但是当我查看事件查看器时，我看到审核成功。

我正在使用本地 Windows 用户进行身份验证。在 IIS-> 在我启用了 Windows 身份验证的文件夹中。在 IIS-> 在文件夹中，我已在“授权规则”中允许用户

知道有什么问题吗？

* * *

## 回答 #1

> 赞同：-3
> 
> 时间：2013-04-25T10:19:38.143

在 .ini 文件中提供密码

# jquery - 使用 jquery 从文本中重新构建 href 标记

> ID：16212144
> 
> 赞同：0
> 
> 时间：2013-04-25T10:17:47.590
> 
> 标签：jquery

我有这个动态的html：

```
<div class="msg_body">
<p>
some text... |URI=http://www.somesite.co.il/|some link|EURI| some text |URI=http://www.somesite.co.il/|some link|EURI| , some text...
</p> 
```

我需要提取 URI 字符串并替换：

```
1\. |URI= with [<a href"]
2\. | with [>] 
3\. |EURI| with [</a>] 
```

所以......我需要它像这样蜜蜂：

```
<p>some text... <a href="http://www.somesite.co.il/" target="_blank"></a>some link</a> some text <a href="http://www.somesite.co.il/" target="_blank">some link</a> , some text...</p> 
```

我在这一点上堆叠：

```
$('.msg_body').find('p').text().replace('|URI=','<a href="'); 
```

我怎么能在jquery中做到这一点？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-25T10:30:08.667

您可以通过以下方式使用正则表达式：

```
$('div.msg_body').html($('div.msg_body').html().replace(/\|URI=([^\|]+)\|/g, '<a href="$1" _target="blank">'));
$('div.msg_body').html($('div.msg_body').html().replace(/\|EURI\|/g, '</a>')); 
```

**[这是一个例子。](http://jsfiddle.net/NsNj7/)**

或者，如果您想要更简洁的东西（并缓存 jQuery 对象），可以将其缩短为：

```
var $msgBody = $('div.msg_body');
$msgBody.html($msgBody.html().replace(/\|URI=([^\|]+)\|/g, '<a href="$1">').replace(/\|EURI\|/g, '</a>')); 
```

**[这是一个例子。](http://jsfiddle.net/PJknB/1/)**

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-25T10:51:43.183

RegExp 需要更精细一些才能正确完成工作——我需要大量的试验和错误才能得到正确的正则表达式，所以我使用这样的[工具](http://www.gethifi.com/tools/regex)来快速找出我匹配的是什么，什么需要修复等

以您的示例为例，解决方案的完整代码如下：

```
var $target     = $('.msg_body p');

var text        = $target.text();

var replacement = text.replace(/\|URI=([^\|]+)\|([^\|]+)\|EURI\|/g, function(string, url, text){
  return '<a href="' + url + '">' + text + '</a>';
});

$target.html(replacement); 
```

该`replace`方法需要一个函数，因为您所做的不仅仅是查找一段文本并将其替换为另一段：您正在捕获一个复杂的字符串，您需要在其中捕获子字符串并在预定的代码位之间重新配置它们。[MDN`replace`在这篇文章中很好地](https://developer.mozilla.org/en/docs/JavaScript/Reference/Global_Objects/String/replace#Specifying_a_function_as_a_parameter)解释了函数的使用。

最终，棘手的是正则表达式本身：

```
/\|URI=([^\|]+)\|([^\|]+)\|EURI\|/g 
```

`g`末尾的只是表示全局（即替换字符串中 this 的每个实例），而开头和结尾的`/`s 只是正则表达式的符号。该`|`字符在正则表达式中具有特殊含义（它代表`OR`，表示它之前或之后的序列是可互换的），因此您需要通过在它前面放置一个斜杠来转义它：`\|`. 那么我们拥有的是：

1.  `\|URI=`: 查找以该字符串开头的序列
2.  `([^\|]+)`：捕获一个*组*——`()`它由一个匹配一*组*规则的字符组成`[]`——那些规则不是任何东西*——*字符`^`（`\|`转义`|`）。这样做 1 次或多次 - `+`。这将基本上抓取所有字符，直到下一个字符`|`并将它们分配给一个组。
3.  `\|`: 下一个字符应该是`|`.
4.  `([^\|]+)`：同第2步，再次抓包。
5.  `\|EURI\|`: 序列结束。

所以我们在 replace 方法中的函数总是将匹配的整体`string`作为它的第一个参数，但也会将表达式中的任何组作为进一步的参数。第 2 步中的一个是我们的`url`，第 4步是我们的`text`。然后我们返回 HTML 链接语法与相关组件的简单串联。

这是完成的事情：http: [//jsfiddle.net/barney/B3E7N/](http://jsfiddle.net/barney/B3E7N/)

# ruby - Ruby，pry：我可以在命令 `pry example.rb` 中添加一些东西，以便 pry 在完成脚本执行后自动进入交互状态？

> ID：16212147
> 
> 赞同：2
> 
> 时间：2013-04-25T10:17:56.073
> 
> 标签：ruby, command-line-arguments, read-eval-print-loop, pry, interactive-mode

如果遇到异常，Pry 会进入交互模式（例如，如果您只是在脚本末尾放置了一个未定义的变量“x”）。

（另外，如果您在脚本本身内部`require 'pry'`放置`binding.pry`了您想要进行交互的点。）

但我想知道：当我在命令提示符下输入命令时，是否有某种标志/选项/参数可以添加到`pry example.rb`命令中，所以当它到达执行*任何* `example.rb`脚本的末尾时它会进行交互，不管里面是什么？（当然，假设在结束*之前*没有例外。）

*（这显然对于与可以运行 Notepad++ 等外部程序的编辑器一起使用特别有用，请参见[this](https://stackoverflow.com/questions/12903709/how-do-i-setup-the-notepad-run-command-for-ruby/12904268#12904268)和[this](https://stackoverflow.com/questions/12903709/how-do-i-setup-the-notepad-run-command-for-ruby/12904268#12904268)。）*

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-25T11:40:46.297

还没有，但是提出一个[问题](http://github.com/pry/pry/issues)，我会添加它:)

# java - 生成 JSON 分层路径的 Java 代码

> ID：16212148
> 
> 赞同：1
> 
> 时间：2013-04-25T10:17:59.930
> 
> 标签：java, json, parsing, jsonpath

我正在开发一个项目，我需要在 Java 中解析 JSON 并显示 JSON 键/节点的分层路径，如下所述。

我正在使用 Jackson API 用 Ja​​va 开发这个程序，但我无法获得任何现成的 API，它将从 JSON 返回当前键/节点的分层路径。

**JSON 数据**-

```
{“tomcat-users”:
    {
        “role”:[
            {“@rolename”:”manager-gui”},
            {“@rolename”:”manager-script”},
            {“@rolename”:”manager-jmx”},
            {“@rolename”:”manager-status”}
        ],
        ”user”:{
            “@username”:”admin”,
            ”@roles”:”manager-gui,manager-script”,
            ”@password”:”admin”
        }
    }
} 
```

**输出应该像**-

```
Column 1                                        Column 2
---------------------------------------------------------------------------
tomcat-users -> role[1] -> @rolename            manager-gui
tomcat-users -> role[2] -> @rolename            manager-script
tomcat-users -> role[3] -> @rolename            manager-jmx
tomcat-users -> role[4] -> @rolename            manager-status
tomcat-users -> user -> @username               admin
tomcat-users -> user -> @roles                  manager-gui,manager-script
tomcat-users -> user -> @password               admin 
```

任何人都可以告诉我，他们有任何可用的 API 可以返回我的路径吗？

**我的 Java 代码 -**

```
public static void generateJsonPath(JsonNode node) {
     Iterator<String> fieldNames = node.getFieldNames();
     while(fieldNames.hasNext()){
         String fieldName = fieldNames.next();
         JsonNode fieldValue = node.get(fieldName);
         if (fieldValue.isObject()) {
            System.out.println(fieldName + " -> ");
            generateJsonPath(fieldValue);
         } else if(fieldValue.isArray()) {
             System.out.println(fieldName + " -> ");
             Iterator<?> iterator = fieldValue.getElements();
             while(iterator.hasNext()) {
                 generateJsonPath((JsonNode) iterator.next());
             }
         } else {
            String value = fieldValue.asText();
            System.out.println(fieldName + " : " + value);
         }
     }
} 
```

**Java 代码结果 -**

```
tomcat-users -> 
role -> 
@rolename : manager-gui
@rolename : manager-script
@rolename : manager-jmx
@rolename : manager-status
user -> 
@username : root
@password : root
@roles : manager-gui,manager-script,manager-jmx,manager-status 
```

# java - 奇怪的复制构造函数

> ID：16212151
> 
> 赞同：5
> 
> 时间：2013-04-25T10:18:01.683
> 
> 标签：java, constructor

我有两个班级：`AbstractMailingDirections`和`DirectionLoad`。两者都有一个复制构造函数，如下所示：

```
public AbstractMailingDirections(AbstractMailingDirections toCopy) {
    this.message = toCopy.message;
    this.defaultDirection = new DirectionLoad(toCopy.defaultDirection);
    for (final DirectionLoad dls : toCopy.directionLoads) {
        this.directionLoads.add(new DirectionLoad(dls));
    }
} 
```

和

```
public DirectionLoad(DirectionLoad toCopy) {
    this.direction = toCopy.direction;
    this.transportationContract = toCopy.transportationContract;
    this.pickUpTime = toCopy.pickUpTime;
    this.acceptanceTime = toCopy.acceptanceTime;
    this.acceptanceLocation = toCopy.acceptanceLocation;
    this.information = toCopy.information;
} 
```

现在，当我调用`MailingDirections`复制构造函数（只是`super(toCopy)`）时，有时我不会得到`defaultDirection`复制的字段。或者不是全部。而使用 Eclipse 调试器则更加陌生：

![调试器](https://i.stack.imgur.com/04Lv8.png) 这里我点击了`AbstractMailingDirections`要复制的。查看打印`defaultDirection.acceptanceTime`中的 17:00如何`toString`显示`null`在字段列表中。如果我单击默认方向，它的`toString`打印将显示该`acceptanceTime`字段为`null`.

这让我发疯了。有什么想法可能导致这种情况吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-25T11:46:11.473

这些是 Hibernate 实体（或 JPA 或类似实体）吗？在这种情况下，访问字段可能会破坏延迟加载的魔力，而通过 getter 访问它可能会修复它。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-25T10:24:32.723

您必须在您的复制构造函数中为接受时间创建一个新对象。你只告诉参考它应该指向的地方。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-25T10:32:24.380

我认为该代码的作用是使用不同的引用到达相同的对象。您需要复制对象。喜欢而不是

```
this.message = toCopy.message; 
```

你应该

```
this.message = new String(toCopy.message); 
```

# php - 如何检查用户是否向其他用户发送类似信息的垃圾邮件？

> ID：16212152
> 
> 赞同：3
> 
> 时间：2013-04-25T10:18:02.340
> 
> 标签：php, mysql, spam, spam-prevention

我管理的 PHP/MySQL 站点之一是一个社交网络，我注意到垃圾邮件发送者会向其他几个用户发送大量外观相似的消息。

由于同一用户帐户发送的消息数量以及发送的消息的相似性，似乎应该相对容易识别以这种方式向其他用户发送垃圾邮件的用户，但我只是不知道该怎么做在 PHP/MySQL 中。消息作为 type 存储在 DB 中`TEXT`。

如何**识别**这些垃圾邮件发送者，以便在他们开始发送太多看起来相似的消息时自动将其删除？

**编辑：**

垃圾邮件通常至少是一段文本，因此我们可以安全地忽略少于**100 个**字符的邮件并自动让这些邮件通过。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-25T11:00:16.883

垃圾邮件里面会有链接，所以你可以过滤掉那些没有链接的。

并且您应该首先尝试防止，因此如果一个用户开始在短时间内向许多用户发送许多消息，则可能是垃圾邮件。

您可以通过在会话中使用某种计数器来做到这一点，您将在每条发送给新用户的消息时增加它，如果它每小时超过 20 个（我只是编造了这个数字以使其高效，您将需要一些测试）他可能正在发送垃圾邮件并开始向他询问验证码或阻止他的聊天 15 分钟，将他报告给管理员以手动检查

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-25T10:54:05.570

您可以使用以下方法搜索与他们现在发布的消息相似的消息。

```
SELECT * FROM `messages`
WHERE MATCH (`messages`.`content`) against ($message)
&& `messages`.`user` = $user 
```

这将选择与当前用户的某些内容相匹配的消息。

希望能帮助到你。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-25T12:20:13.883

现在，人类可以确定哪些发件人是可接受的，哪些是垃圾邮件发送者。一个可以看到每个人的消息的人，更是如此。但是您不想阅读每条消息！

首先，您需要有一个消息标志或状态，以便可以将消息添加到数据库中，但不会出现在收件人的收件箱中，因为怀疑是垃圾邮件。

其次，您需要有一个用户标志或状态，以便可以防止用户发送更多消息，因为怀疑是垃圾邮件。

我认为最好的方法是：

*   向消息中添加三个新的数据库字段 - 单词、链接、标志状态（两个文本和一个小整数）
*   向用户添加一个新字段 - spamwarnings (int)
*   让 PHP 在添加消息时对其进行处理。过滤掉常用词 (a, the) 和收件人姓名和 URL，并将唯一词`words`和唯一链接保存在`links`.
*   在将消息添加到数据库时进行第一次垃圾邮件测试（见下文）（因为您已经在 PHP 中获得了消息文本，现在是检查它的好时机）。如果分数很高，请将其标记为自动/手动审核。
*   允许用户将邮件标记为垃圾邮件
*   隐藏用户收件箱和通知中标记的邮件
*   每小时运行第二次垃圾邮件评分
*   让人类缓和可疑的垃圾邮件，发布或删除它

首次通过垃圾邮件评分

*   收件人是否曾向发件人发送过消息？是 = -10，否 = +2
*   邮件中有链接吗？是+2，每个链接+1
*   邮件是否包含某些“垃圾邮件”字样？每个单词+1。
*   发件人在过去一小时内发送了多少条消息？每个+1。
*   用户的垃圾邮件警告计数是否为 2 或更多？5 分会将其标记为审查，并增加用户的垃圾邮件警告计数。

第二遍垃圾邮件评分

*   这是将标记的消息与同一发件人使用此页面上其他想法的组合的其他标记的消息进行比较的部分。

人类节制

*   我看不出如何避免这种情况，但以上将减少要阅读的消息数量。此外，这可以通过阅读独特的单词和链接来完成（保持一些隐私）。

还应该可以使用上述结构中的大部分内容来缓和不适当内容的消息。

# visual-studio - 如何在 Visual Studio 中启用“上下文”编辑器？

> ID：16212155
> 
> 赞同：8
> 
> 时间：2013-04-25T10:18:12.637
> 
> 标签：visual-studio, visual-studio-2012, ide, editor, visual-studio-extensions

许多 IDE 和编辑器都提供“上下文”编辑工具：

*   一个简单的例子是XCode中的[Assistant Editor 。](https://developer.apple.com/library/mac/#documentation/ToolsLanguages/Conceptual/Xcode_User_Guide/040-Edit_Source_Code/edit_source_code.html)辅助编辑窗口会根据您所在的上下文自动加载相关的辅助文件。例如，如果您`foo.h`在主窗口中打开标题 ( )，它会自动`foo.m`在助手窗口中打开实现 ( )，依此类推。

[![XCode 的助理编辑器](https://i.stack.imgur.com/IUrJO.png)](http://beginning-mac-programming.timisted.net/xcode-4-general-overview.html)

*   Brackets 具有[快速编辑](http://brackets.io/)功能，按下`Ctrl`+`E`可以编辑指向当前 HTML 元素的 CSS 选择器。

    ![括号的快速编辑](https://i.stack.imgur.com/md9Qb.jpg)

*   [Light Table](http://www.kickstarter.com/projects/306316578/light-table)具有内联文档和绘图表：

    ![Light Table 的内联文档](https://i.stack.imgur.com/Rowbbm.png)

    ![Light Table 的绘图表](https://i.stack.imgur.com/J2nium.png)

*   Microsoft 有一个与我想要的类似的[Debugger Canvas](http://visualstudiogallery.msdn.microsoft.com/4a979842-b9aa-4adf-bfef-83bd428a0acb)项目，但它只是调试模式并且仅限于 Visual Studio Ultimate。我正在寻找的工具是编码工具，而不是调试工具。

    ![微软的调试器画布](https://i.stack.imgur.com/Pmnfem.png)

我想要一个普通的编辑器和一个二级编辑器，它可以显示我当前正在编辑的内容的上下文。

*   如果我在一个实现接口的类上，我希望辅助编辑器显示接口

*   如果我在作为另一个类的实例的类成员上，我希望辅助编辑器切换到类源

*   如果我在一个方法上，我希望辅助编辑器指向方法体

等等…

**有没有办法^((*))在 Visual Studio 2012 中获得类似的体验？**

^((*) 一些隐藏的技巧、扩展功能、快速破解、适合您的解决方案……)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-25T10:35:50.307

您可以使用[代码定义窗口](http://msdn.microsoft.com/en-us/library/f5yx24a6(v=vs.80).aspx)。

您可以通过转到 来启用它`View > Code Definition Window`。然后，您可以将其停靠在中间右侧。它是这样工作的：

![代码定义](https://i.stack.imgur.com/U3hMc.jpg)

# python - 如何将我的 Django 应用程序与 TCP 端口上的传入数据连接起来

> ID：16212161
> 
> 赞同：0
> 
> 时间：2013-04-25T10:18:26.937
> 
> 标签：python, django, tcp-ip

我正在尝试将 django URL 连接到 TCP/IP 端口上的传入数据。如果有人能对此有所了解，那就太好了

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-25T14:31:03.863

您可能必须从另一个进程或线程监听端口。将传入的数据保存在某处，无论是日志文件、数据库还是其他任何地方。然后让 Django 在准备发送网页以响应 URL 上的请求时使用此数据。

# c# - 使用jQuery在一个中继器中隐藏具有不同名称的面板？

> ID：16212162
> 
> 赞同：0
> 
> 时间：2013-04-25T10:18:29.483
> 
> 标签：c#, jquery, asp.net

任何人都可以帮助我使用 jQuery 在转发器中隐藏具有不同名称的面板吗？

主要逻辑是我在标签中有按年份排序的文档，标签名称也是年份。当客户点击一个特定的选项卡时，我应该让他只查看将那一年作为财产的文件。每年的文档嵌套在面板（div）中，面板的名称与选项卡名称相关，即年份。我应该以某种方式点击面板名称，如果它与我的选项卡名称相同，则每年显示所有文件......

提前致谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-25T12:55:10.210

如果您为要隐藏在中继器中的每个元素添加一个 CSS 类，您可以执行以下操作：

```
$(document).ready(function () {
    $('.hideMe').hide();
}); 
```

要再次显示您的元素，您可以调用：

```
$('.hideMe').show(); 
```

这是对 jQuery 的[隐藏](http://api.jquery.com/hide/)和[显示](http://api.jquery.com/show/)功能的参考。

# c# - 如何选择特定图像并从特定 url 保存？（内部说明）

> ID：16212163
> 
> 赞同：1
> 
> 时间：2013-04-25T10:18:35.340
> 
> 标签：c#, javascript, jquery, asp.net, html-agility-pack

我需要通过在我的站点的文本框中输入 url 从站点中选择并保存一些特定的图像。

我已经使用 html 敏捷性从站点 url 加载了所有图像。但现在我不知道如何选择和保存。

例如，我在我的文本框中输入[http://flipkart.com/](http://flipkart.com/)，它应该从该页面加载所有图像，假设它包含 9 个图像，如果从一个站点加载 9 个图像并显示为一个画廊，从那个画廊我将选择 1 张图片点击保存。它应该保存在我网站的某个地方（可能是一个特定的文件夹）。

我不知道如何从网站保存图像。

有人会提供一些参考或想法来完成保存在给出 url 时加载的图像的任务。

谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-25T10:24:51.563

```
string imageUri = "http://www.contoso.com/library/homepage/images/";
            string fileName = "ms-banner.gif", myStringWebResource = null;
            // Create a new WebClient instance.
            WebClient myWebClient = new WebClient();
            // Concatenate the domain with the Web resource filename.
            myStringWebResource = remoteUri + fileName;
            Console.WriteLine("Downloading File \"{0}\" from \"{1}\" .......\n\n", fileName, myStringWebResource);
            // Download the Web resource and save it into the current filesystem folder.
            myWebClient.DownloadFile(myStringWebResource,fileName);     
            Console.WriteLine("Successfully Downloaded File \"{0}\" from \"{1}\"", fileName, myStringWebResource); 
```

在 myStringWebResource 中，您将提及文件夹的路径。我假设您是从要保存图像的同一个网站上进行的

**编辑：** *我已经看到了，但是我们可以使用网络客户端从站点加载所有图像吗？例如，如果我给了flipkart.com，它会显示该页面中的所有图像吗？– 戈皮纳特·佩鲁马尔*

*   首先，您需要从 Web 客户端获取 html 作为字符串
*   然后，您需要在以 .j​​pg、.jpeg、.png、.gif 等结尾的字符串中找到所有 uri
*   迭代 webclient 并下载每个图像

但请注意，许多网站都不允许像这样以编程方式爬行。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-29T06:50:50.990

我对此进行了谷歌搜索并得到了以下代码，

```
public System.Drawing.Image DownloadImageFromUrl(string imageUrl)
{
    System.Drawing.Image image = null;

    try
    {
        System.Net.HttpWebRequest webRequest = (System.Net.HttpWebRequest)System.Net.HttpWebRequest.Create(imageUrl);
        webRequest.AllowWriteStreamBuffering = true;
        webRequest.Timeout = 30000;
        System.Net.WebResponse webResponse = webRequest.GetResponse();
        System.IO.Stream stream = webResponse.GetResponseStream();
        image = System.Drawing.Image.FromStream(stream);
        webResponse.Close();
    }
    catch (Exception ex)
    {
        return null;
    }

    return image;
} 
```

您使用此代码并将其保存为所需格式的图像。

在保存图像时，您应该提及文件夹/目标路径。

# java - 无法让 ActionListener 工作

> ID：16212165
> 
> 赞同：-1
> 
> 时间：2013-04-25T10:18:37.000
> 
> 标签：java, swing, user-interface, jframe, actionlistener

这是代码，Account 是一些基本类，没有做任何特别的事情。我已经尽一切努力让这个动作监听器工作，我知道我错过了一些愚蠢的东西。我在 jigloo 中制作了 GUI，我认为我的问题实际上是主要问题？我需要添加一些东西吗？或者我是不是把这一切都错了。以前没做过桂的事。这是我上的第一节编程课，教授似乎认为我应该能够毫无问题地做到这一点。有任何想法吗？

```
import java.awt.event.ActionEvent;
import javax.swing.JButton;
import javax.swing.JEditorPane;
import javax.swing.JTextField;
import javax.swing.WindowConstants;
import javax.swing.SwingUtilities;

import java.awt.event.ActionListener;

@SuppressWarnings("serial")
public class Button extends javax.swing.JFrame implements ActionListener
{
    public JButton LoginButton;
    public JTextField bankinfoButton;
    public JButton transgerButton;
    public JButton jButton1;
    public JTextField moneytextfield;
    public JTextField sendto;
    public JEditorPane account1;
    public JTextField accountpw;
    public JTextField accountname;
    public JButton BalanceButton;
    public JButton WithdrawButton;
    public JButton DepositButton;
    public JButton LogoutButton;
    /*~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~*/

    public Account theAc = new Account();
    public Account[] accountList = new Account[10]; 
    public String tempAccountName;
    public String tempAccountPw;
    public int tempIndex;
    public double tempBalance;
    public Transfer theT = new Transfer();
    public Transfer[] transferList = new Transfer[10];

    public static void main(String[] args) {
        SwingUtilities.invokeLater(new Runnable() {
            public void run() {
                Button inst = new Button();
                inst.setLocationRelativeTo(null);
                inst.setVisible(true);
            }
        });
    }

    public Button() {
        super();
        initGUI();
    }

    private void initGUI() {
        try {
            setDefaultCloseOperation(WindowConstants.DISPOSE_ON_CLOSE);
            getContentPane().setLayout(null);
            {
                LoginButton = new JButton();
                getContentPane().add(LoginButton);
                LoginButton.setText("Login");
                LoginButton.setBounds(12, 12, 120, 44);
            }
            {
                LogoutButton = new JButton();
                getContentPane().add(LogoutButton);
                LogoutButton.setText("Log Out");
                LogoutButton.setBounds(137, 12, 120, 44);
            }
            {
                bankinfoButton = new JTextField();
                getContentPane().add(bankinfoButton);
                bankinfoButton.setText("Displays bank account information");
                bankinfoButton.setBounds(336, 215, 277, 189);
            }
            {
                DepositButton = new JButton();
                getContentPane().add(DepositButton);
                DepositButton.setText("Deposit");
                DepositButton.setBounds(12, 150, 120, 50);
            }
            {
                WithdrawButton = new JButton();
                getContentPane().add(WithdrawButton);
                WithdrawButton.setText("Withdraw");
                WithdrawButton.setBounds(151, 150, 120, 50);
            }
            {
                BalanceButton = new JButton();
                getContentPane().add(BalanceButton);
                BalanceButton.setText("Balance");
                BalanceButton.setBounds(12, 223, 120, 52);
            }
            {
                transgerButton = new JButton();
                getContentPane().add(transgerButton);
                transgerButton.setText("Transfer");
                transgerButton.setBounds(12, 298, 120, 52);
            }
            {
                accountname = new JTextField();
                getContentPane().add(accountname);
                accountname.setText("Please Enter account name");
                accountname.setBounds(12, 76, 193, 23);
            }
            {
                accountpw = new JTextField();
                getContentPane().add(accountpw);
                accountpw.setText("Please Enter Account Password");
                accountpw.setBounds(12, 115, 193, 23);
            }
            {
                account1 = new JEditorPane();
                getContentPane().add(account1);
                account1.setText("Please enter account you would like to transfer funds to");
                account1.setBounds(0, 370, 313, 34);
            }
            {
                moneytextfield = new JTextField();
                getContentPane().add(moneytextfield);
                moneytextfield.setText("Enter cash here");
                moneytextfield.setBounds(163, 258, 99, 23);
            }
            {
                jButton1 = new JButton();
                getContentPane().add(jButton1);
                jButton1.setText("Create Account");
                jButton1.setBounds(268, 12, 130, 44);
            }
            pack();
            this.setSize(651, 460);
        } catch (Exception e) {
            //add your error handling code here
            e.printStackTrace();
        }

    }

    public void actionPerformed(ActionEvent e) {
        if(e.getSource() == jButton1)
         {
             bankinfoButton.setText("Hello");
         }
        if(e.getActionCommand().equals("Create Account")) 
        {
            if(theAc==null)
            {
                bankinfoButton.setText("You must first Log in");
            }

            if(accountpw.getText() != null)
            {
            theAc.setPassword(accountpw.getText());
            bankinfoButton.setText("New Account Created!");
            accountList[Account.getNumAccount()-1] = theAc;

            bankinfoButton.setText("Account Created!");
            bankinfoButton.setText(theAc.toString());
            }
            else
            {
            bankinfoButton.setText("You must enter a password to create an account.");
            }

    }

        if(e.getActionCommand().equals("Print Account List")){
            for(int i = 0; i <accountList.length;i++)
            {

                bankinfoButton.setText(accountList[i].toString());
            }
        }
        if(e.getActionCommand().equals("Deposit")) 
        {
            if(theAc==null)
            {
                bankinfoButton.setText("You must first Log in");
            }
            theAc.deposit(Double.parseDouble(moneytextfield.getText()));
            bankinfoButton.setText("Your new balance is: " + String.valueOf(theAc.getBalance()));
        }
        if(e.getActionCommand().equals("Withdrawl")) 
        {
            if(theAc==null)
            {
                bankinfoButton.setText("You must first Log in");
            }

            //theAc.withdraw(Double.parseDouble(moneytextfield.getText()));
            bankinfoButton.setText("Your new balance is: " + String.valueOf(theAc.getBalance()));

    }
        if(e.getActionCommand().equals("Balance")) 
        {
            if(theAc==null)
            {
                bankinfoButton.setText("You must first Log in");
            }

            bankinfoButton.setText("Your balance is: " + String.valueOf(theAc.getBalance()));

    }
        if(e.getActionCommand().equals("Login")) 
        {
            if(theAc==null)
            {
                bankinfoButton.setText("You must first Log in");
            }
            for(int i = 0;i<10;i++)
            {
                if(accountname.getText().equals(accountList[i].getName()))
                        {
                            tempAccountName = accountList[i].getName();

                        }
            for(int n = 0;i<10;i++)
            {

                if(accountpw.getText().equals(accountList[i].getPassword()))
                {
                    tempAccountPw = accountList[i].getPassword();
                    if(i==n)
                     n= tempIndex;
                    else
                    {
                        bankinfoButton.setText("Invalide username or password");
                    }
                }

            }
            theAc = accountList[tempIndex];
            }
        if(e.getActionCommand().equals("Log Out"))
        {
            if(theAc==null)
            {
                bankinfoButton.setText("You must first Log in");
            }
            theAc = null;
            bankinfoButton.setText("You have logged off");

        }
        if(e.getActionCommand().equals("Transfer"))
        {
            theT = transferList[tempIndex];
            theT.setHistory(accountname.getText(), sendto.getText(), Double.parseDouble(moneytextfield.getText()));
        }

    }
}

} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-25T13:11:43.000

您永远不会向`ActionListener`任何组件注册：

```
jButton1.addActionListener(this); 
```

在完全不同的情况下，考虑使用[布局管理器](http://docs.oracle.com/javase/tutorial/uiswing/layout/visual.html)来管理组件的定位和大小。

# wordpress - 如何在 wordpress 中使用永久链接标签 ID

> ID：16212167
> 
> 赞同：-1
> 
> 时间：2013-04-25T10:18:42.470
> 
> 标签：wordpress

如何在 url wordpress 中使用永久链接标签 ID

例子：

```
wordpress.com/tag_name 
```

我将会 ：

```
wordpress.com/tag_id 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-25T10:25:27.277

不知道你在问什么，但如果你想改变你的永久链接的结构，你会去 WP-Admin 然后去：

设置 > 固定链接

您可能还想查看[Yoast 的 WordPress SEO 插件](http://wordpress.org/extend/plugins/wordpress-seo/)，它可以让您更好地控制永久链接结构。

# java - 将 blob 转换为图像流并将其分配给 jLabel

> ID：16212169
> 
> 赞同：4
> 
> 时间：2013-04-25T10:18:44.810
> 
> 标签：java, mysql, stream, nullpointerexception, blob

我只是想将数据库中的 blob 字符串转换为字节数组，然后将其转换为缓冲图像，然后将其分配给标签这是我的代码

```
package ims.project;
import java.sql.*;
import javax.swing.*;
import java.awt.*;
import java.awt.image.BufferedImage;
import java.io.ByteArrayInputStream;
import javax.imageio.ImageIO;

public class readingdata extends JFrame {
    readingdata() {
        JPanel pane = new JPanel();

        JLabel label1 = new JLabel("help");
        JLabel label2 = new JLabel("33");
        pane.add(label1);
        pane.add(label2);

        setVisible(true);
        add(pane);

        try {
            Class.forName("com.mysql.jdbc.Driver");
            Connection con = DriverManager.getConnection("jdbc:mysql://localhost:3306/ims1", "root", "root");
            Statement st = con.createStatement();
            String ss = "select Pic from supplier where  Supplier_id= '" + label2.getText() + "'";
            JOptionPane.showMessageDialog(null, label2.getText());

            ResultSet rs = st.executeQuery(ss);
            while (rs.next()) {
                Blob blob = rs.getBlob("Pic");

                int blobLength = (int) blob.length();

                byte[] blobAsBytes = blob.getBytes(1, blobLength);
                final BufferedImage bufferedImage = ImageIO.read(new ByteArrayInputStream(blobAsBytes));

                label2.setIcon(new ImageIcon(bufferedImage));

            }
        } catch (Exception ex) {
            ex.printStackTrace();

        }
    }
    public static void main(String args[]) {
        new readingdata();
    }
} 
```

但是当我运行这段代码时，它会显示空指针堆栈跟踪

```
java.lang.NullPointerException
    at javax.swing.ImageIcon.<init>(ImageIcon.java:228)
    at ims.project.readingdata.<init>(readingdata.java:47)
    at ims.project.readingdata.main(readingdata.java:60) 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-05-25T10:11:40.797

请尝试以下代码：

```
Connection connection = null;
PreparedStatement statement = null;

ResultSet result;

public DisplayImage() {
    super("Image Display");
    setSize(600,600);
    connection = getConnection();
    try {
        statement = connection.prepareStatement("select content from image where id=1");
        result = statement.executeQuery();

            byte[] image = null;
            while(result.next()) {
                image = result.getBytes("content");

            }
            Image img = Toolkit.getDefaultToolkit().createImage(image);
            ImageIcon icon =new ImageIcon(img);
            JLabel lPhoto = new JLabel();
            lPhoto.setIcon(icon);
            add(lPhoto);

    } catch (SQLException e) {
        // TODO Auto-generated catch block
        e.printStackTrace();
    }

    setVisible(true);
}

public Connection getConnection() {
    Connection connection = null;

    try {
        Class.forName("com.mysql.jdbc.Driver");
        connection = DriverManager.getConnection(
                "jdbc:mysql://localhost:3306/db_name", "user", "pass");
    } catch (Exception e) {
        System.out.println("Error Occured While Getting the Connection: - "
                + e);
    }
    return connection;
}

public static void main(String[] args) {
    new DisplayImage();
}

} 
```

# sql-server - 服务器主体“sa”无法在当前安全上下文下访问数据库“模型”

> ID：16212179
> 
> 赞同：7
> 
> 时间：2013-04-25T10:19:12.113
> 
> 标签：sql-server, execute-as

我创建了一个存储过程，它执行一系列需要特殊权限的操作，例如创建数据库、恢复数据库等。我创建了这个存储过程

```
execute as self 
```

...使其作为 SA 运行。这是因为我想让没有任何权限的 SQL 用户能够仅运行我定义的这些命令。

但是当我运行这个存储过程时，我得到

```
The server principal "sa" is not able to access the database "model" under the current security context. 
```

为什么SA无法访问模型数据库？实际上，我在 SA 下自己运行了存储过程中的代码，并且运行良好。

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-04-25T10:39:55.620

在继续之前阅读[使用 EXECUTE AS 扩展数据库模拟。](http://msdn.microsoft.com/en-us/library/ms188304%28v=sql.105%29.aspx)

> 当使用 EXECUTE AS USER 语句模拟主体时，或使用 EXECUTE AS 子句在数据库范围的模块中模拟主体时，默认情况下模拟范围仅限于数据库。这意味着对数据库范围之外的对象的引用将返回错误。

您需要使用[模块签名](http://msdn.microsoft.com/en-us/library/ms345102%28v=sql.105%29.aspx)。[这](http://rusanu.com/2006/03/01/signing-an-activated-procedure/)是一个例子。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2016-11-11T01:57:32.123

对于其他来这里寻找此信息的人，这里是演示 OP（和我）想要什么的示例代码（基于上面 Remus 的优秀信息）：

```
 -- how to sign a stored procedure so it can access other Databases on same server
    -- adapted from this very helpful article 
    -- http://rusanu.com/2006/03/01/signing-an-activated-procedure/

    USE [master]
    GO
    CREATE DATABASE TempDB1
    CREATE DATABASE OtherDB2
    GO
    USE TempDB1
    GO
    -- create a user for TempDB1
    CREATE USER [foo] WITHOUT LOGIN
    GO

    CREATE PROCEDURE TempDB1_SP 
    AS 
    BEGIN 
        CREATE TABLE OtherDB2.dbo.TestTable (ID int NULL)
        IF @@ERROR=0 PRINT 'Successfully created table.' 
    END
    GO

    GRANT EXECUTE ON dbo.TempDB1_SP TO [foo]
    GO

    EXECUTE AS User='foo'
        PRINT 'Try to run an SP that accesses another database:'
        EXECUTE dbo.TempDB1_SP
        GO
    REVERT

    -- Output: Msg 916, Level 14, State 1, Procedure TempDB1_SP, Line 5
    --   [Batch Start Line 14]
    -- The server principal "..." is not able to access the database 
    --    "OtherDB2" under the current security context.

    PRINT ''
    PRINT 'Fix: Try again with signed SP...'

    -- Create cert with private key to sign the SP with. 
    -- Password not important, will drop private key

    USE TempDB1
    GO
    -- create a self-signed cert
    CREATE CERTIFICATE [DB_Cert] 
        ENCRYPTION BY PASSWORD = 'Password1' 
        WITH SUBJECT = 'Signing for cross-DB SPs';
    -- Sign the procedure with the certificate’s private key
    ADD SIGNATURE TO OBJECT::[TempDB1_SP] 
        BY CERTIFICATE [DB_Cert] 
        WITH PASSWORD = 'Password1'
    -- Drop the private key. This way it cannot be used again to sign other procedures.
    ALTER CERTIFICATE [DB_Cert] REMOVE PRIVATE KEY
    -- Copy the public key part of the cert to [master] database 
    -- backup to a file and create cert from file in [master]
    BACKUP CERTIFICATE [DB_Cert] TO FILE = 'C:\Users\Public\DBCert.cer'

    USE [OtherDB2] -- or use [master] = all DBs on server accessible
    GO
    CREATE CERTIFICATE [DB_Cert] FROM FILE = 'C:\Users\Public\DBCert.cer';
    -- the 'certificate user' carries the permissions that are automatically granted 
    -- when the signed SP accesses other Databases
    CREATE USER [DB_CertUser] FROM CERTIFICATE [DB_Cert]
    GRANT CREATE TABLE TO [DB_CertUser] -- or whatever other permissions are needed
    GO

    USE TempDB1
    EXECUTE dbo.TempDB1_SP
    GO
    -- output: 'Successfully created table.'
    -- clean up: everything except the cert file, have to delete that yourself sorry
    USE [master]
    GO
    DROP DATABASE TempDB1
    DROP DATABASE OtherDB2
    GO 
```

# sql - 需要将此 SQL 转换为 linq

> ID：16212181
> 
> 赞同：0
> 
> 时间：2013-04-25T10:19:17.197
> 
> 标签：sql, linq

我有这个 SQL，但我需要将它转换为 Linq 查询。尝试同时使用 partition/rownum 和 patition/count 时遇到困难。

```
Select TOP 1 vals.c3, (vals.Rank * vals.[Occurances]) as RNK
FROM (
SELECT ROW_NUMBER() OVER(ORDER BY c1 asc) as Rank, Count(*) Over(Partition By c3) As [Occurances], c3
FROM dbo.ranks
WHERE c2 in ('ADAMS', 'CHIP', 'SHOP')
group by  c3,c2,c1
) vals
--group by vals.c3
ORDER BY RNK desc 
```

这是排名列表的样子：

```
c1      c2      c3
26774   CHIP     Chipshop
26054   SHOP     Shops
10054   SHOP     Chipshop
23037   MEDICAL  Doctors
21434   CENTRE   Doctors
12803   DENTAL   Dentists
11847   OFFICE   Post Offices 
```

c2 是单词，c3 是我要查找的类别。c1 是该词在每个类别中出现的频率。因此，当我输入搜索“Adams Chip shop”时，它会根据该名称查找最可能匹配的类别。

任何帮助，将不胜感激 ：）

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-25T12:14:06.277

试试这个工具。它完全符合您的要求。

[林克尔](http://www.sqltolinq.com/)

# comexception - 尝试在 Windows Phone 8 中进行蓝牙连接时出现错误代码 2147500037

> ID：16212185
> 
> 赞同：2
> 
> 时间：2013-04-25T10:19:24.260
> 
> 标签：comexception

我正在尝试以编程方式建立应用到应用的蓝牙连接。出于上述目的，请参阅以下代码片段：

```
StreamSocket streamSocket = await PeerFinder.ConnectAsync(peerInformation); 
```

每当我尝试这样做时，我都会收到此错误：

```
An exception of type `System.Runtime.InteropServices.COMException` occurred 
in mscorlib.ni.dll and wasn't handled before a managed/native boundary

HRESULT E_FAIL has been returned from a call to a COM component.

ERROR CODE: 2147500037 
```

请告知如何解决此错误。

# maven - 为什么码头服务器在服务器启动后挂起并且不运行集成测试？

> ID：16212186
> 
> 赞同：7
> 
> 时间：2013-04-25T10:19:25.720
> 
> 标签：maven, jetty, integration-testing

我正在使用 maven-jetty-plugin 和 maven-failsafe-plugin 运行集成测试。这是我的配置：

```
 <plugin>
            <artifactId>maven-failsafe-plugin</artifactId>
            <version>2.7.1</version>
            <executions>
              <execution>
                <id>integration-test</id>
                <goals>
                  <goal>integration-test</goal>
                </goals>
              </execution>
              <execution>
                <id>verify</id>
                <goals>
                  <goal>verify</goal>
                </goals>
              </execution>
             </executions>
        </plugin>

        <plugin>
            <groupId>org.mortbay.jetty</groupId>
            <artifactId>maven-jetty-plugin</artifactId>
            <version>6.1.26</version>
            <configuration>

                  <connectors>
                    <connector implementation="org.mortbay.jetty.nio.SelectChannelConnector">
                      <port>8080</port>
                      <maxIdleTime>3600000</maxIdleTime>
                    </connector>
                  </connectors>

                <contextPath>/</contextPath>
                <scanIntervalSeconds>3</scanIntervalSeconds>
                <scanTargetPatterns>
                    <scanTargetPattern>
                        <directory>src/main/webapp/WEB-INF</directory>
                        <excludes>
                            <exclude>**/*.jsp</exclude>
                            <exclude>**/*.html</exclude>
                        </excludes>
                        <includes>
                            <include>**/*.page</include>
                            <include>**/*.properties</include>
                            <include>**/*.xml</include>
                        </includes>
                    </scanTargetPattern>
                </scanTargetPatterns>
            </configuration>
            <executions>
                    <execution>
                        <id>start-jetty</id>
                        <phase>pre-integration-test</phase>
                        <goals>
                          <goal>run-war</goal>
                        </goals>
                        <configuration>
                          <scanIntervalSeconds>0</scanIntervalSeconds>
                          <daemon>true</daemon>
                        </configuration>
                    </execution>
                    <execution>
                        <id>stop-jetty</id>
                        <phase>post-integration-test</phase>
                        <goals>
                          <goal>stop</goal>
                        </goals>
                    </execution>
          </executions>
        </plugin> 
```

当我运行**mvn clean install**时，码头服务器启动，之后什么也没有发生（卡住了）。我日志中的最后一行是：[INFO] Started Jetty Server。当我按下 control-c 时，它会打印以下内容：

```
2013-04-25 15:24:16.315:INFO::Shutdown hook executing
2013-04-25 15:24:16.317:INFO::Stopped SelectChannelConnector@0.0.0.0:8080
2013-04-25 15:24:16.821:INFO:/ca-app:Shutting down log4j
2013-04-25 15:24:16.821:INFO:/ca-app:Closing Spring root WebApplicationContext
2013-04-25 15:24:22.108:INFO::Shutdown hook complete[INFO] 
Jetty server exiting.
[INFO] 
[INFO] --- maven-failsafe-plugin:2.7.1:integration-test (default) @ my-app ---
[INFO] Failsafe report directory: my-app/target/failsafe-reports

-------------------------------------------------------
 T E S T S
-------------------------------------------------------
Running TestSuite
There are no tests to run.

Results :

Tests run: 0, Failures: 0, Errors: 0, Skipped: 0

[WARNING] File encoding has not been set, using platform encoding MacRoman, i.e. build is platform dependent!
[INFO] 
[INFO] --- maven-jetty-plugin:6.1.26:stop (stop-jetty) @ my-app ---
[INFO] 
[INFO] --- maven-failsafe-plugin:2.7.1:verify (default) @ my-app ---
[INFO] Killing Jetty
[INFO] Failsafe report directory: my-app/target/failsafe-reports
[WARNING] File encoding has not been set, using platform encoding MacRoman, i.e. build is platform dependent!
[INFO] 
[INFO] --- maven-install-plugin:2.3.1:install (default-install) @ my-app ---
[INFO] Installing my-app/target/ca-app-0.1.5-SNAPSHOT.war to ~/.m2/....../my-app/0.1.5-SNAPSHOT/my-app-0.1.5-SNAPSHOT.war
[INFO] Installing my-app/pom.xml to ~/.m2/....../my-app/0.1.5-SNAPSHOT/my-app-0.1.5-SNAPSHOT.war
[INFO] 
[INFO] --- maven-dependency-plugin:2.1:sources (install) @ my-app --- 
```

为什么会卡住？当我按下 control-c 时，为什么它会执行其余的步骤？我该如何解决？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2015-03-21T22:03:04.627

尝试使用**start**而不是**run-war**。

从 org\eclipse\jetty\jetty-maven-plugin\9.3.0.M2\jetty-maven-plugin-9.3.0.M2.jar!\org\eclipse\jetty\maven\plugin\AbstractJettyMojo.nonblocking 上的 javadoc

* * *

*确定服务器在启动时是否阻塞。默认行为 (false) 将导致服务器在继续处理 Web 请求时暂停其他进程。这在启动服务器以交互使用它时很有用。这是**jetty:run、jetty:run-war、jetty:run-war-exploded**目标的行为。如果为真，服务器将不会阻止后续代码的执行。这是**jetty:start的行为和****jetty:deploy**目标的默认行为。*

* * *

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2016-07-29T11:25:51.560

所以为了启动码头添加运行：

```
<goals>
     <goal>stop</goal>
        <goal>start</goal>
</goals> 
```

和整个：

```
<plugin>
    <groupId>org.eclipse.jetty</groupId>
    <artifactId>jetty-maven-plugin</artifactId>
    <version>9.2.10.v20150310</version>
    <configuration>
        <war>webapp/target/MyWar.war</war>
        <stopKey>fooKey</stopKey>
        <stopPort>8081</stopPort>
        <stopWait>1</stopWait>
        <httpConnector>
            <port>8888</port>
        </httpConnector>
    </configuration>
    <executions>
        <execution>
            <id>start-jetty</id>
            <phase>pre-integration-test</phase>
            <goals>
                <goal>stop</goal>
                <goal>start</goal>
            </goals>
            <configuration>
                <scanIntervalSeconds>0</scanIntervalSeconds>
                <daemon>true</daemon>
                <stopKey>STOP</stopKey>
                <stopPort>8866</stopPort>
            </configuration>
        </execution>
        <execution>
            <id>stop-jetty</id>
            <phase>post-integration-test</phase>
            <goals>
                <goal>stop</goal>
            </goals>
            <configuration>
                <scanIntervalSeconds>0</scanIntervalSeconds>
                <daemon>true</daemon>
                <stopKey>STOP</stopKey>
                <stopPort>8866</stopPort>
            </configuration>
        </execution>
    </executions>
</plugin> 
```

# objective-c - Xcode 中的嵌套注释

> ID：16212187
> 
> 赞同：2
> 
> 时间：2013-04-25T10:19:25.963
> 
> 标签：objective-c, xcode

当我编写一个有点复杂的方法时，我更喜欢在它上面添加一个小注释块

```
/*--------------------------------------------------------------+
| When I wrote this, only God and I understood what I was doing
| Now, God only knows
+-------------------------------------------------------------*/
- (void) overlyDifficultMethodToGrasp { ... } 
```

真的是这样，从我的代码中注释掉这个方法的唯一方法就是 hit`cmd + /`吗？这会导致

```
///*--------------------------------------------------------------+
// | When I wrote this, only God and I understood what I was doing
// | Now, God only knows
// +-------------------------------------------------------------*/
//- (void) overlyDifficultMethodToGrasp { ... }
// 
```

我想做的是

```
/*
/*--------------------------------------------------------------+
 | When I wrote this, only God and I understood what I was doing
 | Now, God only knows
 +-------------------------------------------------------------*/
- (void) overlyDifficultMethodToGrasp { ... }
*/ 
```

如您所见，这不起作用...

*为什么？*好吧，我认为大块`//`很丑！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-25T10:20:43.257

这与 Xcode 没有太大关系，但与您使用的语言（和编译器）有关。你不能像 C 或 Objective-C 那样嵌套注释块。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-04-25T10:29:36.623

正如 DrummerB 指出的那样，您不能嵌套评论。

使用 // 代替 /*

这里：

```
/*

//--------------------------------------------------------------+
// When I wrote this, only God and I understood what I was doing
// Now, God only knows
//+-------------------------------------------------------------+

- (void) overlyDifficultMethodToGrasp { ... }
*/ 
```

# jquery - Jquery 切换显示和隐藏文本更改

> ID：16212189
> 
> 赞同：1
> 
> 时间：2013-04-25T10:19:38.157
> 
> 标签：jquery, toggle

我一直在寻找一段时间，但我找不到答案或让它按我的意愿工作。

现在我有一些隐藏的内容，然后在单击“阅读更多”时向下展开但是当它被单击时，我希望将该文本更改为“更少”或“隐藏”或其他内容。

这是我的代码。

```
$(document).ready(function () {
    $('.moreinfo').hide();
    $('.more').click(function () {
        $('#info'+$(this).attr('target')).toggle(500);
        return false;
    });  
}); 
```

然后到这个html

```
<p class="moreinfo" id="info1">CONTENT HERE</p>
<a class="more" target="1">Read More</a> 
```

任何帮助是极大的赞赏！谢谢你。

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-04-25T10:24:58.603

你可以在这里使用回调**[jsfiddle](http://jsfiddle.net/Eb5C5/)**

```
 $('.moreinfo').hide();
        $('.more').click(function (ev) {
           var t = ev.target
           $('#info' + $(this).attr('target')).toggle(500, function(){
              $(t).html($(this).is(':visible')? 'I\'m done reading more' : 'Read more')
           });
           return false;
        }); 
```

您可以在此处阅读有关[jQuery.toggle() 的更多信息](http://api.jquery.com/toggle/)

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-09-17T08:07:47.000

```
$(document).ready(function(){
  $("#div1").click(function(){
    $(this).text($(this).text() == 'More' ? 'Less' : 'More'); 
    $("#div2").slideToggle("slow");

  });
}); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2017-05-23T12:20:39.037

```
function slidtogl_contnt(id1){
    $("#"+id1).slideToggle();
    var txt = $("#more_txt").text();
    if(txt == 'More....'){
      $("#more_txt").text('Less....');
    }
    else{
      $("#more_txt").text('More....');
    }
  } 
```

# ios - 将分配的缓冲区添加到 NSMutableDictionay

> ID：16212190
> 
> 赞同：0
> 
> 时间：2013-04-25T10:19:42.300
> 
> 标签：ios, objective-c

是否可以使用 malloc 将动态分配的缓冲区添加到 NSMutableDictionary，然后在添加后直接释放它。这个对吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-25T11:25:15.020

不，这非常非常糟糕。一旦你调用 free ，操作系统就可以重新使用内存，所以对缓冲区的任何使用都是不好的。

如果要将数据放入可变字典中，请改用 NSData。

如果出于某种原因您需要存储一个 malloc'd 缓冲区（例如，您从库中获得它），您需要将它包装在一个对象类中。

然后，您可以从包装器对象的 dealloc 中调用 free，因此在释放包装器对象之前不会调用 free（一旦字典被释放，它将由 ARC 处理。

```
@interface MallocedMemoryWrapper

@property ( nonatomic, assign) void* wrappedMemory;
@end

@implementation MallocedMemoryWrapper
- (MallocedMemoryWrapper*) initWithMemory:(void*) memory {

    self.wrappedMemory = memory;
}

- (void) dealloc {
    free( self.memory);
}
@end

} 
```

# qt - QxtLogger（来自 libQxt）在应用程序输出中打印其消息

> ID：16212192
> 
> 赞同：2
> 
> 时间：2013-04-25T10:19:43.127
> 
> 标签：qt, logging, signals-slots, qt4.8, libqxt

我正在使用 QxtLogger（来自 libQxt）来登录我们的应用程序。它在 Qt 4.7.3 上运行良好。

我最近**更新到 Qt 4.8**，从那时起来自 QxtLogger 的日志消息被打印在应用程序输出中。我没有将它安装为 QtMessageHandler，我无法指出确切的原因。

任何指针或解决方案都会非常有帮助..

# php - 在 wordpress 网站中面临 htpasswd 的问题

> ID：16212196
> 
> 赞同：0
> 
> 时间：2013-04-25T10:19:55.307
> 
> 标签：php, wordpress, .htaccess, .htpasswd

我正在尝试在我的一个 wordpress 网站中开发 http 身份验证。

我已经为此完成了以下代码。

在我的根文件夹中的 .htaccess 文件中。

```
# BEGIN WordPress
<IfModule mod_rewrite.c>
  RewriteEngine On
  RewriteBase /htpass_wordpress/
  RewriteRule ^index\.php$ - [L]
  RewriteCond %{REQUEST_FILENAME} !-f
  RewriteCond %{REQUEST_FILENAME} !-d
  RewriteRule . /htpass_wordpress/index.php [L]
</IfModule>
 # END WordPress 
```

我还为我的 wp-admin 文件夹创建了一个 more.htaccess 文件。

```
AuthType Basic
AuthUserFile /htpass_wordpress/wp-admin/.htpasswd
AuthName "My Private Area"
require valid-user 
```

我创建了一个 htpasswd 文件并将其放在 wp-admin 中（存储 wp-admin 的 htaccess 的同一目录）。

我已在该文件中存储了我的用户名和 base 64 加密密码。

现在当我访问我的 wp-admin 区域时，会弹出询问登录。我提供了用户名/密码，它允许我访问 wp-admin。但随后它给了我 500 服务器错误。

有人知道我哪里出错了吗？

# php - PHP - 从每个子数组中获取特定元素而不循环

> ID：16212199
> 
> 赞同：4
> 
> 时间：2013-04-25T10:20:01.397
> 
> 标签：php

在 php 中有一种方法可以从每个子数组中获取一个元素而无需循环 - 从效率的角度考虑。

说出以下数组：

```
$array = array(
    array(
        'element1' => a,
        'element2' => b
    ),
    array(
        'element1' => c,
        'element2' => d
    )
); 
```

我想要 $array 中的所有 'element1' 值

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-25T10:46:56.167

有许多不同的函数可以为您操作数组，具体取决于所需的输出......

```
$array = array(
    array(
       'element1' => 'a',
       'element2' => 'b'
   ),
   array(
       'element1' => 'c',
       'element2' => 'd'
   )
);

// array of element1s : array('a', 'c')
$element1a = array_map(function($item) { return $item['element1']; }, $array);

// string of element1s : 'ac'
$element1s = array_reduce($array, function($value, $item) { return $value . $item['element1']; }, '');

// echo element1s : echo 'ac'
array_walk($array, function($item) {
    echo $item['element1'];
});

// alter array : $array becomes array('a', 'c')
array_walk($array, function(&$item) {
    $item = $item['element1'];
}); 
```

有用的文档链接：

*   [数组映射](http://uk1.php.net/manual/en/function.array-map.php)
*   [array_reduce](http://uk1.php.net/manual/en/function.array-reduce.php)
*   [array_walk](http://uk1.php.net/manual/en/function.array-walk.php)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-25T10:29:59.703

您可以使用**[array_map](http://php.net/manual/en/function.array-map.php)**。

试试下面的代码...

```
$arr = $array = array(
    array(
       'element1' => a,
       'element2' => b
   ),
   array(
       'element1' => c,
       'element2' => d
   )
);

print_r(array_map("getFunc", $arr));

function getFunc($a) 
{ 
    return $a['element1']; 
} 
```

请参阅**[键盘](http://codepad.org/pprRR5wS)**。

**但我认为 array_map 也会在内部使用循环。**

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-04-25T10:39:26.680

如果您运行的是 PHP 5.5（目前 beta-4 可用），那么以下

```
$element1List = array_column($array, 'element1'); 
```

应该将 $element1List 作为一个简单的数组，其中包含 $array 中每个元素的 element1 值

```
$array = array(
    array(
       'element1' => a,
       'element2' => b
   ),
   array(
       'element1' => c,
       'element2' => d
   )
);

$element1List = array_column($array, 'element1');
print_r($element1List); 
```

给

```
Array
(
    [0] => a
    [1] => c
) 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-04-25T11:36:14.587

没有循环？递归！

```
$array = array(
        array(
                'element1' => 'a',
                'element2' => 'b'
        ),
        array(
                'element1' => 'c',
                'element2' => 'd'
        )
);

function getKey($array,$key,$new = array()){
    $count = count($array); 
    $new[] = $array[0][$key];
    array_shift($array);

    if($count==1)
        return $new;

    return getKey($array,$key,$new);
}

print_R(getKey($array,'element1')); 
```

[正如我从 Wikipedia Recursion](http://en.wikipedia.org/wiki/Recursion_%28computer_science%29)中了解到的那样，递归不是循环。

# php - MySQL如何从每10行中选择1行

> ID：16212201
> 
> 赞同：4
> 
> 时间：2013-04-25T10:20:05.397
> 
> 标签：php, mysql

我正在将给定信号的实时变化记录到我的数据库表中。

然后我绘制折线图来可视化信号电平的变化。

我想在表格中获取第 (10n+1)^行来制作粗略的图表。10也是任意的。用户可以将其更改为另一个值。

有人知道如何***仅使用 MySQL 查询来做到这一点***

如果没有，我将在选择所有数据后使用 PHP。

这里我的表结构是：

```
|id        |signal1   |signal2   | signal 3   |
+----------+----------+----------+------------+
|1         |0.41452   | 1.32135  | 0.31231    |
... 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-25T10:27:03.487

如果你有一个 auto_incrememt id 列，你可以选择能被 n 整除的行

```
SELECT * FROM tableName1 WHERE MOD(id,10)=0; 
// id divided by 10 with a remainder equal to 0 (exact) 
```

或没有顺序列 id

```
SELECT * FROM ( 
    SELECT 
        @row := @row +1 AS rowNum, colName1 
    FROM ( 
        SELECT @row :=0) r, tableName1
    ) ranked 
WHERE rowNum % 10 = 1 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-25T10:40:12.013

如果您的表具有自动递增 id (intID)，那么您应该尝试此代码。我的表中只有 26 条记录。

```
select * from tablename where intId 
        in (select case  (intId%10=0) when 1 then intId else 0 end as x from tablename ) 
```

输出 ：-

```
10  sdf KK201300010 123456  Regular
20  sdf KK201300020 123456  Regular 
```

它将显示每 10 条记录中的每条记录。希望它会帮助你。

# objective-c - 不能调用类方法

> ID：16212207
> 
> 赞同：0
> 
> 时间：2013-04-25T10:20:43.790
> 
> 标签：objective-c, class, methods

我正在构建一个基于标签的应用程序，并希望从每个选项卡 ( `ViewController`) 中调用相同的函数。

我正在尝试通过以下方式进行操作：

```
#import "optionsMenu.h"

- (IBAction) optionsButton:(id)sender{
   UIView *optionsView = [options showOptions:4];
   NSLog(@"options view tag %d", optionsView.tag);
} 
```

`optionsMenu.h`文件：

```
#import <UIKit/UIKit.h>

@interface optionsMenu : UIView

- (UIView*) showOptions: (NSInteger) tabNumber;

@end 
```

`optionsMenu.m`文件：

```
@import "optionsMenu.h"
@implementation optionsMenu

- (UIView*) showOptions:(NSInteger) tabNumber{
   NSLog(@"show options called");

   UIView* optionsView = [[UIView alloc] initWithFrame:[[UIScreen mainScreen] bounds]];
   optionsView.opaque = NO;
   optionsView.backgroundColor = [[UIColor blackColor] colorWithAlphaComponent:0.5f];
   //creating several buttons on optionsView
   optionsView.tag = 100;

return optionsView;

}

@end 
```

结果是我从未收到“显示选项调用”调试消息，因此`optionsView.tag`始终是`0`.

我究竟做错了什么？

我知道这很可能是一个简单而愚蠢的问题，但我自己无法解决。

任何反馈表示赞赏。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-25T10:36:33.693

首先要注意的是，这是一个实例方法（而不是问题标题中描述的 Class 方法）。这意味着为了调用此方法，您应该分配/初始化您的类的实例并将消息发送到实例。例如：

```
// Also note here that Class names (by convention) begin with
// an uppercase letter, so OptionsMenu should be preffered
optionsMenu *options = [[optionsMenu alloc] init];
UIView *optionsView = [options showOptions:4]; 
```

现在，如果您只想创建一个返回 preconfigured 的 Class 方法`UIView`，您可以尝试这样的事情（前提是您不需要在您的方法中访问 ivars）：

```
// In your header file
+ (UIView *)showOptions:(NSInteger)tabNumber;

// In your implementation file
+ (UIView *)showOptions:(NSInteger)tabNumber{
    NSLog(@"show options called");

    UIView *optionsView = [[UIView alloc] initWithFrame:[[UIScreen mainScreen] bounds]];
    optionsView.opaque = NO;
    optionsView.backgroundColor = [[UIColor blackColor] colorWithAlphaComponent:0.5f];
    //creating several buttons on optionsView
    optionsView.tag = 100;

    return optionsView;
} 
```

最后发送这样的消息：

```
UIView *optionsView = [optionsMenu showOptions:4]; //Sending message to Class here 
```

最后当然不要忘记将您的视图添加为子视图以显示它。我希望这是有道理的......

# javascript - 一个简单的 javascript 原型出错

> ID：16212211
> 
> 赞同：1
> 
> 时间：2013-04-25T10:20:53.070
> 
> 标签：javascript, oop, websocket

有人能帮我吗？

我试过这段代码：

```
function Network(ip, port){
    this.Socket = new WebSocket('ws://' + ip + ':' + port);
    this.Socket.onopen = function(){
        console.log('connected');
        this.send('test');
    }
}
Network.prototype = {

    sendMessage : function(data){
        this.Socket.send(data);
        alert(data);
    }
}

$(document).ready(function() {
    window.network = new Network('localhost', '8887');
    window.network.sendMessage("Hello, world!");
}); 
```

但是当我启动它时，我得到一个“ Uncaught Error: InvalidStateError: DOM Exception 11 ”。我用谷歌搜索了1个多小时，没有找到任何东西......

在我的服务器上，我得到：

```
0:0:0:0:0:0:0:1%0 entered the room!
org.java_websocket.WebSocketImpl@584fce71: test 
```

所以，问题出在 sendMessage 函数中。有人可以帮我吗？谢谢 ！:)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-25T10:32:17.407

WebSocket 是一个异步函数。请等待它连接成功发送消息。

# java - GeoGoogle(Java) - 如何导入文件？

> ID：16212213
> 
> 赞同：1
> 
> 时间：2013-04-25T10:20:58.537
> 
> 标签：java

[我正在尝试从http://geo-google.sourceforge.net/](http://geo-google.sourceforge.net/)使用 GeoGoogle 进行地理编码

当我尝试使用这行代码时：

```
import geo.google.GeoAddressStandardizer;
GeoAddressStandardizer st = new GeoAddressStandardizer("AABBCC"); 
```

它说 GeoAddressStandardizer 并且无法解析导入，我也已经将 JAR 添加到了构建路径中。

有没有人遇到过这个问题？谢谢

解决方案：获取 geoGoogle-1.5.0.jar 代替[https://www.cs.drexel.edu/~zl25/maven2/repo/geoGoogle/geoGoogle/1.5.0/](https://www.cs.drexel.edu/~zl25/maven2/repo/geoGoogle/geoGoogle/1.5.0/)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-25T10:26:55.527

[快速浏览 geo-google 源代码，这](http://geo-google.svn.sourceforge.net/viewvc/geo-google/geoGoogle/geoGoogle/src/main/java/geo/google/GeoAddressStandardizer.java?revision=108&view=markup)确实作为构造函数存在。

```
public GeoAddressStandardizer(String apiKey) 
```

所以问题必须出在你的应用程序使用 jar 的方式上。您是在部署到 Web 服务器还是类似的东西（尽管我希望有一个 classNotFoundException）？

如果您查看 IDE 中的构建配置，该 jar 是否存在？你是怎么添加的？

# c - 从 unix 命令行运行时 getopt 无法正常工作

> ID：16212218
> 
> 赞同：0
> 
> 时间：2013-04-25T10:21:27.447
> 
> 标签：c, linux, unix, command-line-arguments, getopt

我编写（从 Google 复制和粘贴并简化）一个 C 程序，使用 getopt 打印出从 Unix 命令行传入的参数的值。

从 Unix 命令行：

```
./myprog -a 0 -b 1 -c 2 
```

我的 C 代码是：

```
#include <stdio.h>
#include <stdlib.h>
#include <unistd.h>

int main(int argc, char *argv[])
{
    int i;

    while ((i = getopt(argc, argv, "abc")) != -1) {
        switch (i) {
            case 'a': 
               printf("A = %s\n", optarg);
               break;

            case 'b': 
               printf("B = %s\n", optarg);
               break;

            case 'c': 
               printf("C = %s\n", optarg);
               break;

            default:
                break;
        }
    }

    return 0;
} 
```

我想编程打印出每个传递的值，例如

```
A = 0
B = 1
C = 2 
```

但是，它根本没有打印出任何东西。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-04-25T10:28:10.567

在任何带有参数的选项之后，您都会忘记“：”。如果你改变一行

```
while ((i = getopt(argc, argv, "a:b:c:")) != -1) { 
```

你会得到工作变体。

正确阅读`man 3 getopt`，它说的是第三个`getopt`论点

… optstring 是一个包含合法选项字符的字符串。如果这样的字符后跟一个冒号，则该选项需要一个参数，因此 getopt() 将指向同一 argv 元素中的以下文本的指针，或 optarg 中的以下 argv 元素的文本。两个冒号表示一个选项带有一个可选参数；如果当前 argv 元素中有文本（即，与选项名称本身在同一个词中，例如“-oarg”），则在 optarg 中返回，否则 optarg 设置为零。…</p>

# java - 转换列表 to int[] - Pure Java vs ArrayUtils 基准测试问题

> ID：16212220
> 
> 赞同：0
> 
> 时间：2013-04-25T10:21:34.447
> 
> 标签：java, benchmarking

我最近不得不优化一个高性能系统中的 api 调用，该系统`List<Integer>`对`int[]`转换做了一些。我最初的发现是，对于我预期的平均元素数量，纯 java 似乎比当前使用的 Apache Commons ArrayUtils 快很多。因子 100-200 甚至我有点惊讶。问题是我一次只对一对转换运行我的测试，为我想要测试的每个元素重新启动我的小测试程序。这样做，对于任何数量的元素，纯 java 的速度要快得多，最多可以达到几个 k，并开始平衡。现在我坐下来编写一个更好的测试程序，该程序一次运行并输出许多不同大小的列表的结果，我的结果完全不同。

似乎 ArrayUtils 只是在第一次运行时较慢，然后在所有后续运行中更快，无论列表大小如何，也不管第一次运行的元素数量如何。

你可以在这里找到我的测试课：http: [//pastebin.com/9EYLZQKV](http://pastebin.com/9EYLZQKV)

请帮我挑选其中的漏洞，因为现在我不明白为什么我会得到我得到的输出。

非常感谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-25T10:25:24.167

您需要在代码中考虑加载时间和预热。内置类可能会首先被调用，因此它可能已经被加载并预热。

一个循环在运行至少 10,000 次之前不会被优化。如果您不知道这是什么时候，我建议您在开始计时之前至少运行代码半秒到两秒。我建议重复测试至少 2 到 10 秒，然后平均结果。

顺便说一句，从 to 转换的最快方法`List<Integer>`是`int[]`避免一开始就需要转换。如果您使用 TIntArrayList 或类似的东西，您可以使用相同的结构而无需复制或转换。

# bash - grep 变量与文件 - 执行时间

> ID：16212222
> 
> 赞同：1
> 
> 时间：2013-04-25T10:21:36.400
> 
> 标签：bash, curl, grep

做了一个有趣的观察——我将 cURL 语句的输出存储在一个文本文件中，然后对某些字符串进行 grep 处理。后来我更改了代码以将输出存储到变量中。事实证明，这种变化导致我的脚本运行得更慢。这对我来说真的很反直觉，因为我一直认为 I/O 操作会比内存操作更昂贵。这是代码：

```
#!/bin/bash
URL="http://m.cnbc.com"
while read line; do
  UA=$line
  curl -s --location --user-agent "$UA" $URL > RAW.txt
  #RAW=`curl --location --user-agent "$UA" $URL`
  L=`grep -c -e "Advertise With Us" RAW.txt`
  #L=`echo $RAW | grep -c -e "Advertise With Us"`
  M=`grep -c -e "id='menu'><button>Menu</button>" RAW.txt`
  #M=`echo $RAW | grep -c -e "id='menu'><button>Menu</button>"`
  D=`grep -c -e "Careers" RAW.txt`
  #D=`echo $RAW | grep -c -e "Careers"`
  if [[ ( $L == 1 && $M == 0 ) && ( $D == 0) ]]
    then
      AC="Legacy"
  elif [[ ( $L == 0 && $M == 1 ) && ( $D == 0) ]]
    then
  AC="Modern"
  elif [[ ( $L == 0 && $M == 0 ) && ( $D == 1) ]]
    then
      AC="Desktop"
  else
  AC="Unable to Determine"
  fi
  echo $AC >> Results.txt
done < UserAgents.txt 
```

注释行表示存储在变量中的方法。任何想法为什么会发生这种情况？还有什么方法可以进一步加快这个脚本的速度吗？现在处理 2000 个输入条目大约需要 8 分钟。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-25T15:07:02.503

你真的需要用 来计算匹配的数量`grep -c`吗？看起来您只需要知道是否找到了匹配项。如果是这样，您可以简单地使用 bash 的内置字符串比较。

此外，如果您在循环外写入结果文件，它会更快。

尝试以下操作：

```
#!/bin/bash
URL="http://m.cnbc.com"
while read line
do
  UA="$line"
  RAW=$(curl -s --location --user-agent "$UA" "$URL")
  [[ $RAW == *"Advertise With Us"* ]] && L=1 || L=0
  [[ $RAW == *"id='menu'><button>Menu</button>"* ]] && M=1 || M=0
  [[ $RAW == *Careers* ]] && D=1 || D=0

  if (( L==1 && M==0 && D==0 ))
  then
     AC="Legacy"
  elif (( L==1 && M==1 && D==0 ))
  then
     AC="Modern"
  elif (( L==1 && M==0 && D==1 ))
  then
     AC="Desktop"
  else
     AC="Unable to Determine"
  fi
  echo "$AC" 
done < UserAgents.txt > Results.txt 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-25T13:46:13.857

切普纳是正确的。将每个调用读取`cURL`一次，标记三个所需字符串中的每一个。这是一些使用`awk`. 完全未经测试：

```
URL="http://m.cnbc.com"
while IFS= read -r line; do
    RAW=$(curl --location --user-agent "$line" $URL)

    awk '
    /Advertise With Us/ {
        L=1
    }
    /id='\''menu'\''><button>Menu<\/button>/ {
        M=1
    }
    /Careers/ {
        D=1
    }

    END {
        if (L==1 && M==0 && D==0) {
            s = "Legacy"
        }
        else if (L==0 && M==1 && D==0) {
            s = "Modern"
        }
        else if (L==0 && M==0 && D==1) {
            s = "Desktop"
        }
        else {
            s = "Unable to Determine"
        }

        print s >> "Results.txt"
    }' "$RAW"

done < UserAgents.txt 
```

# web-audio-api - 有没有办法通过网络音频 api 访问主混音器或其他设备/通道？

> ID：16212224
> 
> 赞同：1
> 
> 时间：2013-04-25T10:21:42.713
> 
> 标签：web-audio-api

有没有办法在硬件上记录当前正在混合的音频（可能来自另一个选项卡/进程）？有没有办法输入/连接到浏览器混音器？

工作室硬件通常有几个输入/输出通道，单声道和/或立体声；有没有办法让这些连接到图表上？是否有/将有一些设备枚举 api？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-06-28T04:43:40.587

您可能能够做的最接近的事情是从麦克风获取数据，并将系统麦克风设置为系统的输出（在 Windows 中...管理音频设备 > 录音 > 立体声混音）。然后只是`getUserMedia`用来获取音频。

```
navigator.webkitGetUserMedia({audio: true}, function(stream) {
    var microphone = context.createMediaStreamSource(stream);
}); 
```

# android - 带有登录页面的操作栏 - 显示已创建的选项卡

> ID：16212225
> 
> 赞同：0
> 
> 时间：2013-04-25T10:21:45.497
> 
> 标签：android, android-actionbar

我已经使用 ActionBar 创建了应用程序。我使用了从用户那里获取用户名和密码的**登录页面**，然后我创建了 ActionBar 选项卡。在这个应用程序中，我在加载登录页面之前隐藏了操作栏，在加载登录页面之后，我已经显示了操作栏。到目前为止一切正常。注销后将显示登录页面。这次我隐藏了操作栏。**如果我第二次登录，则已创建的选项卡与新创建的选项卡一起显示。**也就是说，如果我创建了 4 个选项卡，则意味着在第二次登录时将显示 8 个选项卡。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-25T10:27:38.810

那么当您重新登录时，您将不得不检查是否已经存在您不想拥有的选项卡。

尝试实现类似的东西：

```
if (tabCount > 0) {
     //remove tabs
}

//build tabs 
```

# django - 在中间件中检测响应重定向

> ID：16212226
> 
> 赞同：1
> 
> 时间：2013-04-25T10:21:46.153
> 
> 标签：django, middleware

我有一些自定义中间件，可以创建一堆以前的 URL，以便可以从后续页面导航回它们。

在我将其 url 添加到堆栈的视图之一中，有一些逻辑可以将响应重定向到不同的页面，因此：

```
@middleware_decorator # tells the middleware to add this views url to the stack when it is called
def some_view(request):
    ... stuff ...

    if some_condition:
        return HttpResponseRedirect(url, kwargs) 
```

我遇到的问题是，如果我遇到响应重定向条件，我不想将当前 url 添加到堆栈中，因为当他们从下一页返回时，他们只会再次遇到相同的条件并被重定向到他们刚刚离开的页面。我在中间件中有一个“删除”功能，但我不能这样称呼它：

```
if some_condition:
    Middleware.remove("this views url")
    return HttpResponseRedirect(url, kwargs) 
```

因为出于逻辑原因，视图 url 是在中间件的 process_response 阶段添加的，所以在重定向发生之后发生。我希望在第一个视图被重定向之后在中间件中检测到某种方式 - “重定向刚刚发生”，然后在中间件中我可以决定是否添加它。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-25T10:29:21.963

您可以在请求中设置一个标志，如果它应该被添加到堆栈并处理实际添加到功能`process_response`

```
process_response(self, request, response):
    if request.addToStack and not instanceof(response, HttpResponseRedirect):
        #Add url from request to stack 
```

# python - 将表表示为对象

> ID：16212228
> 
> 赞同：3
> 
> 时间：2013-04-25T10:21:52.367
> 
> 标签：python, python-3.x

是否有一种标准方法来表示包含 Python 中一些关系数据的表？我的意思是，像这样：

```
 Singular   Plural
1st.  I make     we make
2nd.  you make   you make
3d.   he makes   they make 
```

我希望数据可以按行和按列访问，如下所示：

```
1st. Singular -> I make
1st.          -> I make, we make
Plural 3d.    -> they make
Plural        -> we make, you make, they make 
```

我看不到任何有效存储数据的方法，没有冗余。我能想到的更好的是使用多个字典（每行一个，每列一个），每个字典都包含与字典本身关联的行或列一样多的键，加上一个包含所有关联的特殊键价值观。

我想这样的事情已经解决了，这就是我问的原因。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-25T10:37:47.140

作为我其他答案的替代方案，您可以`namedtuple`按照@jamylak 的建议使用：

```
from collections import namedtuple

class Verb(namedtuple("_Verb",  # arbitrary class name/tag
                      ["singular1", "singular2", "singular3",
                       "plural1", "plural2", "plural3"])):
    @property
    def singular(self):
        return (self.singular1, self.singular2, self.singular3)

    # similarly for plural

    @property
    def first_person(self):
        return (self.singular1, self.plural1)

    # similarly for 2nd and 3rd person 
```

现在“make”可以表示为

```
Verb("make", "make", "makes", "make", "make", "make") 
```

同样，这可以通过利用英语变位的简单性来优化。

此解决方案的缺点是它不允许更改表中的单个字段，因为`namedtuple`它是不可变的。如果要进行更改，请使用普通`class`的 with `__slots__`。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-25T10:30:13.763

您可以通过将每个动词表示为扁平元组来消除冗余：

```
("make", "make", "makes", "make", "make", "make") 
```

然后创建一个`dict`到索引的映射键：

```
ind_from_key = {'1st': (0, 3),
                ...,
                'singular': (0, 1, 2),
                ...,
                '1st singular': (0,)} 
```

当然，查找变得有点复杂，因为您必须进行间接查找：

```
def conjugation(verb, conj):
    indices = ind_from_key[conj]
    return [CONJUGATION[verb][i] for i in indices] 
```

请注意，英语动词的变位很简单，可以进行进一步优化；复数形式在语法人之间总是相同的。

至于最初的问题：不，在 Python 中没有表示关系数据的单一标准方法。如果您的关系变得比语言变位更复杂，并且您有大量数据，那么您可能想要研究[SQLite](http://docs.python.org/2/library/sqlite3.html)或其他数据库解决方案，也许与[SQLAlchemy](http://www.sqlalchemy.org/)结合使用。

# css - 如何在标签字段后的div中创建灵活的引导线

> ID：16212230
> 
> 赞同：0
> 
> 时间：2013-04-25T10:21:58.193
> 
> 标签：css

```
<div class="titelcontent">
<div class="name">Name</div>
<div class="hzline"></div>
</div> 
```

我希望`name`div 和`hzline`div 自动适应 100% 的`titelcontent`.

标签（例如，名称）的长度会有所不同，我希望红色下划线跨越`titlecontent`div 的剩余空间。

我如何实现以下目标？使用表格很容易做到这一点，但我不知道如何通过`span`或来做到这一点`div`。

![http://s22.postimg.org/zdxtj9da9/Untitled_1.png](https://i.stack.imgur.com/jTTVq.png)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-25T10:35:23.897

您可以使用`div`like a `table`by using `table-cell`。

```
.titlecontent {
    display: table;
}
.name {
    display: table-cell;
    white-space: nowrap;
}
.hzline {
    display: table-cell;
    border-bottom: 3px solid red;
    width: 100%;
} 
```

见[演示](http://jsfiddle.net/AjwVD/2/)。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-25T11:51:50.987

**更新以允许背景图像显示**

您可以使用伪元素使标记更严格，如下所示：

```
<div class="wrapper">
    <div class="inner">Photoshop</div>
</div> 
```

并使用以下 CSS 样式：

```
div.wrapper {
    color:#82439a;
    font-size: 16px;
    font-weight: bold;
    font-family: tahoma;
    line-height: 180%;
    background: red url(http://placekitten.com/1000/500) no-repeat left top;
    overflow: hidden;
}

div.inner {
    position: relative;
    display: inner;
    color: yellow;
    padding-right: 0.50em;
    border: 1px dotted yellow;
}

div.inner:after {
    content: "\A0";
    position: absolute;
    bottom: 0;
    left: 100%;
    border-bottom: 5px solid #d71d00;    
    width: 1000%;
} 
```

演示小提琴：http: [//jsfiddle.net/audetwebdesign/wE8bC/](http://jsfiddle.net/audetwebdesign/wE8bC/)

**这个怎么运作**

父元素`div.wrapper`可能包含背景图像或透明并显示某些祖先元素的背景。你需要设置`overflow: hidden`.

对于标签 ( `<div.inner>`)，设置`position: relative`并生成一个 100% 宽度的伪元素，其底部边框用作下划线。使用绝对定位放置在( )`div.inner:after`的右侧，并使宽度相对较大。伪元素将触发溢出条件，但这是通过将溢出隐藏在父元素中来处理的。您可以使用填充控制左/右间距。 `<div.inner>``left: 100%`

您可以使用将`display`属性设置为`inline`或`inline-block`。如果你使用`display: inline`，它将在 IE7 中工作；根据需要调整行高以进行样式设置。

注意生成的内容是一个不间断的空格，十六进制代码“\A0”。

**支持 IE7**

如果您需要支持 IE7，如果您`inline-block`按照上一个问题中的讨论使用，则需要 hack：[IE7 不理解显示：inline-block](https://stackoverflow.com/questions/6544852/ie7-does-not-understand-display-inline-block)

IE7 也不支持`table-cell`，因此其他一些已发布的解决方案将面临同样的限制。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-25T10:44:56.693

或替代使用`display: table`：

```
.name {
    float: left;
}
.line-wrapper {
    display: block;
    overflow: hidden;
    padding-top: 6px;
}
.hzline {
    border-bottom: 3px solid red;
    width: 100%;
} 
```

见[例子](http://jsfiddle.net/JdQ7c/1/)。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-04-25T10:45:21.080

我猜你看起来像[这样](http://jsfiddle.net/ardeezstyle/cL6Sd/1/)。请根据我对您发布的图片的理解找到我的解决方案。

HTML

```
<div>
    <span>Photoshop</span>
</div>
<div>
    <span>Adobe Illustrator</span>
</div>
<div>
    <span>3D Max</span>
</div>
<div>
    <span>Maya</span>
</div>
<div>
    <span>Windows 8 Pro</span>
</div> 
```

CSS

```
div {
    line-height: 150%;
    border-bottom: 5px solid #d71d00;
}

div span{
    position:relative;
    bottom: -10px;
    background:#fff;
    padding: 0 5px;
    color:#82439a;
    font-size: 16px;
    font-weight: bold;
    font-family: tahoma;
} 
```

请让我知道您的反馈。谢谢

# javascript - 未应用通过 jQuery 的 CSS

> ID：16212231
> 
> 赞同：2
> 
> 时间：2013-04-25T10:22:00.450
> 
> 标签：javascript, jquery, css

我正在使幻灯片具有响应性。我正在使用简单的 jQuery 来实现这一点。我的逻辑是：

> 如果窗口宽度 < 620，则通过 jQuery 在 CSS 中进行更改。
> 否则
> 设置默认（固定）css

`top:470px`当窗口大小正常时，我有一个固定 css 的元素。如果窗口的大小低于 620，我已将其更改为相对于图像大小（在窗口大小调整时会发生变化）。这是我的代码：

```
function resizeVideo() {
  var width = $(window).width();
  if(width < 620) {
    $('#controls').css('top', $('img').height());
  }
  else {
    $('#controls').css('top', '470');
  }
}
$(window).resize(resizeVideo); 
```

这样，当尺寸小于 620 时，控件会粘在图像的底部。现在阻止我的一些问题是：

1.  每当我将窗口从小于 620 的大小最大化时，图像都会缩小到其原始大小，但`#controls`元素保持与最大化之前相同的高度。

2.  当我将窗口大小调整为大于 620 的大小`#controls`时`345px`，实际上图像的高度也会更大。

3.  每当幻灯片中的图像更改并且我当时调整窗口大小时，`#controls`都会出现在所有内容的顶部，即它根本不应用该`top:`属性。

我已经在一个问题中询问了所有这些问题，因为它们都是关于`#controls`元素的，我相信修复一个会自动修复其他问题。任何指针将不胜感激！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-25T10:33:51.313

通过 jQuery 操作 css 时，您需要 'px' 后缀。

```
function resizeVideo() {
  var width = $(window).width();
  if(width < 620) {
    $('#controls').css('top', $('img').height()+'px'); // $.height() returns the height without 'px' - so we need to add it manually
  } else {
    $('#controls').css('top', '470px');
  }
}
$(window).resize(resizeVideo); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-25T10:33:03.740

认为您必须在 .resize() 中包装一个闭包函数，例如`$(window).resize(function(){ resizeVideo(); });`。

也因为函数 resizeVideo 不是参考，你必须用它来调用它`()`

对于 jquery .css() 函数，他们制作了一些 css 钩子，您可以在没有字符串的情况下使用，因此应用 css 它将是： `$('#controls').css({top: 470 + "px"});`

# python - 如何沿轴合并和拆分numpy数组？

> ID：16212232
> 
> 赞同：1
> 
> 时间：2013-04-25T10:22:04.760
> 
> 标签：python, arrays, numpy, merge, split

我有以下形式的数据数组的形状是

```
 (10,4,4,3) 
```

首先，我想创建一个具有形状（合并或展平）的数组

```
 (10,48) 
```

这样数据 (4,4,3) 被转换为一行。

其次，我想回到数据的原始形状（拆分），以便每个元素再次放置在同一位置。

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-25T10:29:29.107

```
b = a.reshape(10,48)
a = b.reshape(10,4,4,3) 
```

# json - 没有数据时，Grid 中的 Loading... 消息。ExtJs 网格

> ID：16212233
> 
> 赞同：0
> 
> 时间：2013-04-25T10:22:08.747
> 
> 标签：json, loading, extjs4.1, gridpanel

在我的应用程序中，当 DB 上没有记录时，我收到的 json 如下所示。

```
JSON Message: {"totalCount":0,"responseObject":[]} 
```

但是在网格中，Loading... 掩码没有关闭。即使没有如下图所示的数据，它也会显示正在加载。

![没有记录图片](https://i.stack.imgur.com/DUphl.png)

请建议我在没有数据时如何摆脱这个问题，我想显示没有这个加载掩码的空网格。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-05-08T16:40:15.913

我想我可能知道你的问题是什么，因为我有同样的问题。

对我来说，加载掩码无法解析的原因不是因为没有记录，而是因为我试图在没有记录的情况下选择网格中的第一条记录。

这会引发一个 javascript 错误，如下所示：“未捕获的 TypeError：无法读取未定义的属性 'id'”

由于这个错误，它会停止其他 Ext javascript 进程，并且掩码永远不会有机会解决。

因此，为了解决这个问题，我会确保您的 Store 的“加载”事件处理程序不会尝试处理网格中不存在的记录。它对我有用。

# mysql - 优化 MySQL 查询，因为它会超时

> ID：16212237
> 
> 赞同：0
> 
> 时间：2013-04-25T10:22:16.797
> 
> 标签：mysql, sql, optimization, phpmyadmin

谁能帮我优化这个查询。我无法执行它，因为 phpMyAdmin 连接超时并且我无权更改超时参数。

这是一个查询：

```
INSERT INTO `goods` (`goods_id`, `price`, `name`)
SELECT `sales_goods`.`goods_id`, `sales_goods`.`price`, `sales_goods`.`goods_id`
FROM `sales_goods`
WHERE `sales_goods`.`sales_goods_id`
IN (
    SELECT MAX(`sales_goods`.`sales_goods_id`)
    FROM `sales_goods`
    WHERE `sales_goods`.`sales_goods_id`
    IN (
        SELECT `sales_goods`.`sales_goods_id` FROM `sales_goods` 
        WHERE `sales_goods`.`goods_id` NOT IN (SELECT `goods`.`goods_id` FROM `goods`)
    )
    GROUP BY `sales_goods`.`goods_id`
) 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-25T10:45:44.693

除了确保您的表被正确索引之外，您还可以将`IN`子查询替换为`INNER JOIN`，并且您的`NOT IN`子查询 WITH `LEFT JOIN/IS NULL`，这应该会提高性能：

```
INSERT INTO `goods` (`goods_id`, `price`, `name`)
SELECT  `sales_goods`.`goods_id`, 
        `sales_goods`.`price`, 
        `sales_goods`.`goods_id`
FROM    `sales_goods`
        INNER JOIN
        (   SELECT  MAX(`sales_goods`.`sales_goods_id`)
            FROM    `sales_goods`
                    LEFT JOIN `goods`
                        ON `goods`.`goods_id` = `sales_goods`.`goods_id`
            WHERE   `goods`.`goods_id` IS NULL
            GROUP BY `sales_goods`.`goods_id`
        ) MaxSalesGoods
            ON MaxSalesGoods.sales_goods_id = `sales_goods`.`sales_goods_id` 
```

# ios - 当应用程序进入后台时开始播放音频文件

> ID：16212239
> 
> 赞同：0
> 
> 时间：2013-04-25T10:22:25.997
> 
> 标签：ios, background, avaudioplayer

**这就像“谷歌地图”在后台导航。**

我已经将“应用程序播放音频”添加到“所需的背景模式”中，但它不起作用。它出什么问题了？

这是示例源代码：

```
-(void)applicationDidEnterBackground:(UIApplication *)application
{
UIDevice* device = [UIDevice currentDevice];

BOOL backgroundSupported = NO;

if ([device respondsToSelector:@selector(isMultitaskingSupported)])
{
    backgroundSupported = device.multitaskingSupported;
}
if (backgroundSupported && _bgTask==UIBackgroundTaskInvalid )
{
    UIApplication*    app = [UIApplication sharedApplication];

    dispatch_async(dispatch_get_global_queue(DISPATCH_QUEUE_PRIORITY_DEFAULT, 0), ^{

        while (app.applicationState==UIApplicationStateBackground && _bgTask!=UIBackgroundTaskInvalid)
        {
            [NSThread sleepForTimeInterval:3];
            [self playAudio];
        }

        [app endBackgroundTask:_bgTask];
        _bgTask = UIBackgroundTaskInvalid;
    });
}
}

-(void)playAudio {
        [[AVAudioSession sharedInstance] setCategory:AVAudioSessionCategoryPlayback error:nil];
        [[AVAudioSession sharedInstance] setActive: YES error: nil];  

NSURL *audioFileLocationURL = [[NSBundle mainBundle] URLForResource:@"sound" withExtension:@"caf"];
NSError *error;
self.audioPlayer = [[AVAudioPlayer alloc] initWithContentsOfURL:audioFileLocationURL error:&error];
[self.audioPlayer setNumberOfLoops:-1];
self.audioPlayer.delegate = self;
 [self.audioPlayer prepareToPlay];
[self.audioPlayer play];
} 
```

* * *

音频文件的 url 可能来自网络，并且会在队列中播放多个音频文件。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-28T09:38:57.660

来自[Apple关于该主题的文档](http://developer.apple.com/library/ios/documentation/uikit/reference/UIApplicationDelegate_Protocol/Reference/Reference.html#//apple_ref/occ/intfm/UIApplicationDelegate/applicationDidEnterBackground%3a)：

> 因为您在 applicationDidEnterBackground: 中启动的任何后台任务很可能在该方法退出之前不会运行，因此您应该在启动这些任务之前请求额外的后台执行时间。换句话说，首先调用 beginBackgroundTaskWithExpirationHandler: 然后在调度队列或辅助线程上运行任务。

根据我自己播放背景音频的经验，如果您不要求额外的时间，则需要事先进行设置，这`[self.audioPlayer play]`实际上是 中的第一行代码`applicationDidEnterBackground`，否则系统会在音频有机会启动之前暂停应用程序并保持清醒。

# php - 按升序对文本文件的内容进行排序

> ID：16212240
> 
> 赞同：0
> 
> 时间：2013-04-25T10:22:29.320
> 
> 标签：php, sorting

我正在尝试开发一个代码，该代码将按升序对文本文件的内容进行排序。我已经阅读了文件的内容并且能够显示文本。我很难将它们逐字逐句从低到高排序。

我已经尝试过来自 php.net 的 asort，但无法让代码正常工作。谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-25T11:14:03.013

```
//Split file by newlines "\n" into an array using explode()
$file = explode("\n",file_get_contents('foo.txt'));
//sort array with sort()
sort($file);
//Build string and display sorted contents.
echo implode("\n<br />",$file); 
```

排序函数需要有一个数组作为参数，确保你的文件在一个数组中。`asort`用于关联数组，因此除非您需要保留可以使用的数组键`sort`。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-25T10:24:29.740

尝试这个

```
<?php
$filecontent = file_get_contents('exemple.txt');

$words = preg_split('/[\s,.;":!()?\'\-\[\]]+/', $filecontent, -1, PREG_SPLIT_NO_EMPTY);
$array_lowercase = array_map('strtolower', $words);

array_multisort($array_lowercase, SORT_ASC, SORT_STRING, $words);

foreach($words as $value)
{
    echo "$value <br>";

}

?> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-25T11:28:42.107

```
$file = "Hello world\ngoodbye.";

$words = preg_split("/\s+/", $file);
$clean_words = preg_replace("/[[:punct:]]+/", "", $words);

foreach ($clean_words as $key => $val) {
    echo "words[" . $key . "] = " . $val . "\n";
}

--output:--
words[0] = Hello
words[1] = world
words[2] = goodbye

sort($clean_words,  SORT_STRING | SORT_FLAG_CASE);

foreach ($clean_words as $key => $val) {
    echo "words[" . $key . "] = " . $val . "\n";
}

--output:--
words[0] = goodbye
words[1] = Hello
words[2] = world 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-04-25T11:05:54.090

要回答您的第二个问题，您可以将文本文件读入一个变量（就像您已经说过的那样），例如。$variable，然后使用explode（[http://php.net/manual/en/function.explode.php](http://php.net/manual/en/function.explode.php)）在每个空格处将每个单词分隔成一个数组：

```
//$variable is the content from your text file
$output = explode(" ",$variable); //explode the content at each space

//loop through the resulting array and output
for ($counter=0; $counter < count($output); $counter++) {

   echo $output[$counter] . "<br/>"; //output screen with a line break after each

} //end for loop 
```

如果您的段落包含您不想输出的逗号等，您可以在爆炸之前替换变量中的那些。

# java - Set object in application context in spring mvc

> ID：16212241
> 
> 赞同：0
> 
> 时间：2013-04-25T10:22:37.867
> 
> 标签：java, spring, spring-mvc, applicationcontext

I have a utility class which I want to initialize when the application starts in Spring MVC. So I am implementing `InitializingBean`. Now I have to create an object for the same and save it in Application scope so that I can access the same instance everywhere. But I am not able to get hold of this.

Here is my try:

```
public class DashboardInitializer implements InitializingBean, ApplicationContextAware {

    private ApplicationContext mApplication;

    @Override
    public void afterPropertiesSet() throws Exception {

        initializeConfigurationUtil();

        ConfigurationUtil util = ConfigurationUtil.getInstance();

        /* Save the util to application scope */

    }

    @Override
    public void setApplicationContext(ApplicationContext pApplication) throws BeansException {
        this.mApplication = pApplication;
    }
} 
```

Is this approach correct or there is a better way to do that?

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-25T20:18:36.420

我认为您需要稍微简化一下。

您希望实用程序类在加载应用程序上下文后初始化，但您还希望实用程序类位于应用程序上下文中？

似乎 util 类在应用程序上下文中配置了一些依赖对象，而 util 类又是应用程序上下文中某些类的依赖项。

如果你可以用bean的形式表达这些依赖（util是一个bean，它的依赖bean注入了它，需要util的bean也注入了util），Spring会确保util的所有依赖都先初始化，然后 util 被初始化，然后注入到需要 util 的类中。

您不应该尝试将某些内容添加到初始化的上下文中。这是不可能的。

如果不能将 util 及其依赖项表示为 bean，也可以采用这种方法： 1\. 将 util 配置为应用程序上下文中的 bean，添加一个什么都不做的默认构造函数。所以这个对象将被创建，但在加载弹簧上下文时不会被初始化。

1.  在`ApplicationContextAware`您拥有的实现中，修改`setApplicationContext`方法。从上下文中获取您之前配置的 util bean。

2.  您现在可以初始化（执行一些您想要执行的代码）util 实例，只需确保不要尝试将 bean 重新分配给其他 util 实例。

希望这可以帮助。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-25T12:18:02.747

您可以`@postconstruct`在应用程序初始化后立即使用方法上的注释来执行业务逻辑。并且可以使用配置中的占位符和`@Value`java 字段上的注释来简单地注入属性。

# grails - 在一个测试用例中集成测试所有可能性

> ID：16212245
> 
> 赞同：0
> 
> 时间：2013-04-25T10:23:02.280
> 
> 标签：grails, integration-testing, assert

我正在运行测试以查看电子邮件是否有效 - 有效，因为其他用户未在应用程序中使用。

我想显示何时输入有效的电子邮件，断言真正的保留，以及当输入无效的电子邮件时，断言错误的保留。

我的代码如下：

```
class UserControllerIntegrationTests extends GroovyTestCase{

@Before
void setUp() {
    // Setup logic here
}

@After
void tearDown() {
    // Tear down logic here
}

@Test
void testValidateEmail() {

    def userController = new UserController()

    userController.params.email = "ddewdd@a.com"
    userController.validateEmail()

    assertEquals "true", userController.response.contentAsString

    userController.params.email = "a@a.com"
    userController.validateEmail()

    assertEquals "false", userController.response.contentAsString

 } 
```

}

我`validateEmail()`在我的控制器中看起来像：

```
def validateEmail()
{
    def valid = false

    if(params.email != null && params.email != "")
    {
        //count how many users have this email - ignore case            
        if (User.countByEmailIlike(params.email) == 0)
        {
            valid = true
        }
    }

    render valid 
} 
```

但我收到如下错误：

```
 Failure:  testValidateEmail(uk.co.litecollab.UserControllerIntegrationTests)
 org.junit.ComparisonFailure: expected:<[]false> but was:<[true]false>
    at org.junit.Assert.assertEquals(Assert.java:125)
    at org.junit.Assert.assertEquals(Assert.java:147)
    at uk.co.litecollab.UserControllerIntegrationTests.testValidateEmail(UserControllerIntegrationTests.groovy:36) 
```

第二个断言似乎失败了

当我单独运行这两个断言时，它们都通过了，所以我知道断言语句中的数据是正确的。

我究竟做错了什么？

# java - Javax.jws 和 javax.xml.ws 有什么区别

> ID：16212246
> 
> 赞同：14
> 
> 时间：2013-04-25T10:23:07.563
> 
> 标签：java, web-services, jax-ws

我是 Java 新手，并试图跳入 WebServices。我在某处找到了两个示例，但我对可用的选项感到困惑。

首先，`javax.jws.WebService`使用注释似乎可以正常工作，但`javax.xml.ws`. 它似乎`javax.jws`较新，并且没有太多可用的材料。

这两种方法有什么区别？

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2013-04-25T11:47:57.230

### Web 服务元数据注释 (JSR 181)

使用 JSR 181 规范 ( ) 中的注释，您可以注释 Web 服务实现类或 Web 服务接口。**`java.jws.*xxx*`**

例如来自[*Deploy JAX-WS Web Services On Tomcat*](http://www.mkyong.com/webservices/jax-ws/deploy-jax-ws-web-services-on-tomcat/)

```
package com.mkyong.ws;

import javax.jws.WebMethod;
import javax.jws.WebService;
import javax.jws.soap.SOAPBinding;
import javax.jws.soap.SOAPBinding.Style;

//Service Endpoint Interface
@WebService
@SOAPBinding(style = Style.RPC)
public interface HelloWorld{

    @WebMethod String getHelloWorldAsString();

} 
```

### JAX-WS 2.0 注释 (JSR 224)

JSR 224 规范为 JAX-WS 2.0 ( ) 定义了注释。**`javax.xml.ws.*xxx*`**

例如来自[*Using SOAP Faults and Exceptions in Java JAX-WS*](http://io.typepad.com/eben_hewitt_on_java/2009/07/using-soap-faults-and-exceptions-in-java-jaxws-web-services.html)

```
@WebFault(name="CheckVerifyFault",
    targetNamespace="http://www.example.com")
public class CheckVerifyFault extends Exception {

    /**
     * Java type that goes as soapenv:Fault detail element.
     */
    private CheckFaultBean faultInfo;

    public CheckVerifyFault(String message, CheckFaultBean faultInfo) {
        super(message);
        this.faultInfo = faultInfo;
    }

    public CheckVerifyFault(String message, CheckFaultBean faultInfo, 
                               Throwable cause) {
        super(message, cause);
        this.faultInfo = faultInfo;
    }

    public CheckFaultBean getFaultInfo() {
        return faultInfo;
    }
} 
```

* * *

[同行 Reynders](http://www.coderanch.com/t/222523/Web-Services/java/JSR-JSR)说：

> 我的猜测是，BEA 希望现在将一些东西放入 Weblogic 中以与 .NET 中的等效功能竞争。（请参阅，在 WebLogic 中开发 Web 服务“同样简单”）。此外，JAX-WS 2.0 (JSR-224) 中指定的注释~~似乎~~为您提供了更多控制权。然而，JSR-224 确实明确支持/包含 JSR-181（JSR-224：7.10 由 JSR-181 定义的注释）。

有关更完整的讨论，请参阅[JSR 181：Java 简化请求](http://jnb.ociweb.com/jnb/jnbJun2007.html)

也可以看看：

*   [注释参考](http://jonas.ow2.org/JONAS_5_1_1/doc/doc-en/html/jaxws_developer_guide.html#jaxws-annotations-reference)
*   [JAX-WS 注释参考](http://publib.boulder.ibm.com/infocenter/radhelp/v8/index.jsp?topic=/com.ibm.webservice.doc/topics/jaxws/rwsandoc003.html)
*   [JSR 181](http://jcp.org/en/jsr/detail?id=181)
*   [JSR 224](http://jcp.org/en/jsr/detail?id=224)

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2014-09-10T13:32:08.367

这两个包命名空间**没有**定义不同的方法。

*   如果您基于 Web 创建服务，则有两个选项：SOAP 服务（AKA Web 服务）或 REST 服务（AKA RESTful 服务）。
*   如果在 Java 中实现 SOAP 服务，要走的路是使用 JAX-WS 框架。该框架提供了工具，例如 wsimport 和 wsgen，当然还有 API。
*   JAX-WS API 包括注释、类和接口，用于实现 SOAP 服务本身的代码和服务使用者（客户端）的代码。
*   JAX-WS API 的这些元素一起使用`javax.xml.ws`和`javax.jws`包名称空间。
*   只需按照教程或示例使用 JAX-WS 创建服务。不要担心 API 元素来自哪些包。
*   但请记住避免供应商特定的 API 元素。在使用 WSDL 和 SOAP 之外的 WS-* 标准（例如，WS-Security）时，您更有可能遇到这些供应商特定的元素。

# html - WTAI - wtai://wp/ap;07773363222。使用此方法添加更多联系信息

> ID：16212255
> 
> 赞同：1
> 
> 时间：2013-04-25T10:23:47.700
> 
> 标签：html, mobile, href, addressbook, wtai

我偶然发现了一段简洁的代码，它将电话号码直接添加到地址簿：

```
<href="wtai://wp/ap;07773363893>TEXT</a> 
```

无论如何，我们可以使用这种方法添加更多信息，例如姓名、电子邮件地址等吗？

我希望使用这种方法只是因为它非常简单和容易。单击，添加，保存。如果您有任何其他解决方案可以推荐，我很乐意听取您的意见。

任何和所有的帮助都将不胜感激，如果我能做更多的事情来表达我的问题并增加它的可理解性，请告诉我。谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-25T11:27:23.573

可以使用此功能添加名称：

```
wtai://wp/ap;number;name 
```

我不确定是否有可能提供其他信息，例如电子邮件地址。我想这是因为每个电话的每个联系人都会使用姓名，而其他移动操作系统可能不一定有此信息的选项。

作为对以下评论的回应，您可以输入：

```
wtai://wp/ap;number;firstName lastName 
```

但是，我不确定这在设备上是如何映射的。我知道只`lastName`拾取的情况

# file - Create Property files in grails and display content in main.gsp layout

> ID：16212256
> 
> 赞同：2
> 
> 时间：2013-04-25T10:23:48.113
> 
> 标签：file, grails, properties, gsp

How and where to create property file in grails and i have to display the content of property file in main.gsp(Layout)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-25T11:59:22.710

您可以将消息存储在标签中`grails-app/i18n/messages.properties`并使用`g:message`标签，例如：

```
<g:message code="my.message.code" /> 
```

请参阅文档： http: [//grails.org/doc/latest/ref/Tags/message.html](http://grails.org/doc/latest/ref/Tags/message.html)

# linux - If statement with 3 checkpoints

> ID：16212259
> 
> 赞同：1
> 
> 时间：2013-04-25T10:23:54.363
> 
> 标签：linux, bash, if-statement

I have a small if statement which checks if my filenames are correct. At first i only needed 2 names to compare within the if statement.

```
if [ $name == $name3 ]; then
    qsub calculatecorrelation.sh $i $j
fi 
```

Now i want to compare 3 names and if all correct continue the script. My first attempt looks like this but i am not convinced this is the way to do it.

```
if [ $name == $name3 == $name5 ]; then
    qsub calculatecorrelation.sh $i $j $k
fi 
```

So how can i check all 3 names to be the same and than continue.

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-25T10:27:54.297

我认为你应该能够做到这一点：

```
if [ $name == $name3 ] && [ $name3 == $name5 ]; 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-25T10:28:14.223

我认为您只是在寻找逻辑 AND[运算符](http://www.gnu.org/software/bash/manual/html_node/Shell-Arithmetic.html#Shell-Arithmetic) `&&`：

```
if [ $name == $name3 ] && [ $name3 == $name5 ]; then 
```

# java - Sparse Map with Enum keys

> ID：16212261
> 
> 赞同：1
> 
> 时间：2013-04-25T10:24:04.173
> 
> 标签：java, map, enums, sparse-matrix

I need to create a Map with enum keys where only a small fraction of the enum constants will be actually inserted. What is the best approach? An EnumMap would be inefficient if the length of its underlying array is equal to the total number of enum constants.

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-25T13:53:27.220

我建议使用普通的`HashMap`.

计算枚举的哈希值既简单又便宜。应该没有显着的内存开销，因为您不是复制枚举对象，而是创建对同一对象的多个引用。出于这个原因，存储整数键和存储对枚举对象的引用之间应该没有什么区别。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-25T13:59:13.473

我也会选择 a`HashMap`或 a `TreeMap`（取决于您是否需要确定性迭代器）。由于您的数据稀疏，因此任何实际或想象的开销都不太可能成为重大的性能障碍。

# codeigniter - Codeigniter：如何从 2 个不同的连接连接数据库中的 2 个表

> ID：16212263
> 
> 赞同：2
> 
> 时间：2013-04-25T10:24:07.240
> 
> 标签：codeigniter, codeigniter-2

我在 中建立了两个数据库连接`database.php`，一个用于读取我的本地主机机器，一个用于编写“插入”，这是一个在线数据库。

但是当我想加入 localhost 数据库中的“answers”和在线数据库中的“user”这两个表时，我遇到了这个问题。

```
 function get_users() {
    $write_db   = $this->load->database('default', TRUE); /* database conection for localhost DB */
    $read_db    = $this->load->database('read', TRUE); /* database conection for online DB */

    $read_db->select('*');
    $read_db->from('ibitstore.user');
    $write_db->join('english.answers','ibitstore.user.user_id = english.answers.user_id');
    $query = $read_db->get();

    if($query->num_rows() > 0)
        return $query->result_array();

    return array();
} 
```

当我使用`$write_db`连接子句时

> ```
>  $write_db->join('english.answers','ibitstore.user.user_id = english.answers.user_id'); 
> ```

数据是从在线数据库中检索的，而不是从 localhost 数据库中检索的，就像它忽略了我尝试使用的连接一样：

`$read_db->join('english.answers','ibitstore.user.user_id = english.answers.user_id');`

然后我得到了这个 SQL 错误。看起来它认为“答案”表在在线数据库中：

```
A Database Error Occurred 
```

错误号：1142

SELECT 命令拒绝用户 'user'@'49.32.197.240' 用于表 'answers'

```
SELECT *
FROM (`ibitstore`.`user`)
  JOIN `english`.`answers`
    ON `ibitstore`.`user`.`user_id` = `english`.`answers`.`user_id` 
```

文件名：C:\xampp\htdocs\english\system\database\DB_driver.php

行号：330

请帮忙 ：（

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-25T11:48:37.733

您可以运行一个 SQL 查询以在两个或多个不同的数据库上执行。包含每个表。
您如何从一个数据库中获取数据，然后使用您自己的逻辑来合并它们。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-25T10:33:24.037

您一次只有一个与数据库的连接。您必须在一个数据库上运行查询，在第二个数据库上运行查询，然后在 PHP 中操作两者的结果。

# magento - short_description 和 description 属性的产品页面选项卡

> ID：16212266
> 
> 赞同：0
> 
> 时间：2013-04-25T10:24:17.273
> 
> 标签：magento, magento-1.7

我正在使用 magento 1.7.0.2

我想在产品页面中为 short_description 和 description 属性添加 TABS。现在属性只是文本。

我尝试了扩展 EAST TABS，但与 javascript 文件有一个冲突，并且无法为 short_description 属性添加选项卡。

我怎样才能做到这一点 ？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-25T11:14:10.440

创建一个自定义主题 app/design/your_theme/template/catalog/product/view/tabs.phtml 并添加如下代码：

[http://www.woolleydesign.net/2012/07/magento-adding-tabs-to-your-product-pages/](http://www.woolleydesign.net/2012/07/magento-adding-tabs-to-your-product-pages/)

此链接将帮助您创建选项卡..

# mongodb - mongodb compound index over extending

> ID：16212271
> 
> 赞同：0
> 
> 时间：2013-04-25T10:24:46.460
> 
> 标签：mongodb, compound-index

I have a question regarding compound indexes that i cant seem to find, or maybe just have misunderstood.

Lets say i have created a compound index {a:1, b:1, c:1}. This should make according to [http://docs.mongodb.org/manual/core/indexes/#compound-indexes](http://docs.mongodb.org/manual/core/indexes/#compound-indexes)

the following queries fast.

```
db.test.find({a:"a", b:"b",c:"c"})
db.test.find({a:"a", b:"b"})
db.test.find({a:"a"}) 
```

As i understand it the order of the query is very important, but is it only that explicit subset of {a:"a", b:"b",c:"c"} order that is important?

Lets say i do a query

```
db.test.find({d:"d",e:"e",a:"a", b:"b",c:"c"}) 
```

or

```
db.test.find({a:"a", b:"b",c:"c",d:"d",e:"e"}) 
```

Will these render useless for that specific compound index?

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-25T10:32:49.330

MongoDB 中的复合索引采用前缀机制`a`，`{a,b}`按顺序将被视为复合索引的前缀，但是，查询本身中字段的顺序通常无关紧要。

所以让我们举个例子：

```
db.test.find({d:"d",e:"e",a:"a", b:"b",c:"c"}) 
```

实际上会使用一个索引：

```
db.ghghg.find({d:1,e:1,a:1,c:1,b:1}).explain()
{
        "cursor" : "BtreeCursor a_1_b_1_c_1",
        "isMultiKey" : false,
        "n" : 1,
        "nscannedObjects" : 1,
        "nscanned" : 1,
        "nscannedObjectsAllPlans" : 2,
        "nscannedAllPlans" : 2,
        "scanAndOrder" : false,
        "indexOnly" : false,
        "nYields" : 0,
        "nChunkSkips" : 0,
        "millis" : 0,
        "indexBounds" : {
                "a" : [
                        [
                                1,
                                1
                        ]
                ],
                "b" : [
                        [
                                1,
                                1
                        ]
                ],
                "c" : [
                        [
                                1,
                                1
                        ]
                ]
        },
        "server" : "ubuntu:27017"
} 
```

自从`a`并且`b`在那里。

```
db.test.find({a:"a", b:"b",c:"c",d:"d",e:"e"}) 
```

取决于 和 的选择性和`d`基数`e`。它将使用复合索引，但至于它是否会以允许良好查询性能的方式有效地使用它，很大程度上取决于其中的内容。

# php - Adding zeros to specific place in mySQL table row

> ID：16212275
> 
> 赞同：1
> 
> 时间：2013-04-25T10:24:59.237
> 
> 标签：php, mysql

I have a mySQL table with alot of links like this:

```
id - link
1 | index.php?video=12
2 | index.php?video=345
3 | index.php?video=6789
4 | index.php?video=123&other=variable
5 | www.site.com/index.php?video=456&other=variable 
```

One link per text row. I would like to add zeros before the numbers but it has to be nine numbers in total. so video=12 would be video=000000012 and video=6789 would be video=000006789.

Is there some way to acheive this by using SQL query?

EDIT: the solution tombom submitted worked fine but what if I have links that don't have the video=x variable?

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-25T10:32:38.550

```
UPDATE yourTable
SET `link` = REPLACE(`link`, SUBSTRING(`link` from LOCATE('=', `link`) + 1), RIGHT(CONCAT('000000000', SUBSTRING(`link` from LOCATE('=', `link`) + 1)), 9)) 
```

看到它在 sqlfiddle 中现场[工作](http://sqlfiddle.com/#!2/b8f66/2/0)。

**更新：**

> 如果我有一些包含更多 url 变量的链接怎么办？比如：index.php?video=123&play=1&search=hello

这有点棘手，但你去：

```
UPDATE yourTable
SET `link` = replace(`link`, substring(`link`, locate('=', `link`) + 1, ABS(locate('&', `link`) - locate('=', `link`) - 1)), right(concat('000000000', substring(`link`, locate('=', `link`) + 1, ABS(locate('&', `link`) - locate('=', `link`) - 1))), 9)) 
```

或者你可以像这样短一点：

```
UPDATE yourTable
SET `link` = , CONCAT(SUBSTRING_INDEX(`link`, '=', 1),'=', LPAD(SUBSTRING(`link` from locate('=', `link`) + 1),9,'0')) 
```

请参阅[sqlfiddle](http://sqlfiddle.com/#!2/f084d/12/0)。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-25T11:23:16.587

```
UPDATE table1 SET `link` = CONCAT(SUBSTRING_INDEX(`link`, '=', 1),'=', LPAD(SUBSTRING_INDEX(`link`, '=', -1),9,'0')) 
```

见[sqlfiddle](http://sqlfiddle.com/#!2/b8f66/10/0)

# compiler-errors - KeyListener 错误

> ID：16212276
> 
> 赞同：0
> 
> 时间：2013-04-25T10:25:07.753
> 
> 标签：compiler-errors, keylistener

我在将 keyListener 添加到我的应用程序时遇到问题：

> `App.Game`不是抽象的，并且不会覆盖`keyRelased(java.awt.event.KeyEvent)`java.awt.event.KeyListener 中的抽象方法

我尝试创建新的公共课程`KeyAdapt`。它给出了同样的错误。
我的应用程序代码是：

```
public int x = 100, y = 100;
public class Game extends JFrame implements KeyListener {
    public Game() {
        super();
        setDefaultCloseOperation(JFrame.DISPOSE_ON_CLOSE);
        setLocationRelativeTo(null);
        setUndecorated(true);
        setLayout(null);
        setVisible(true);
    }
    public void paint (Graphics gDC) {
        gDC.clearRect(0, 0, getSize().width, getSize().height);
        getGraphics().drawOval(x, y, 20, 20);
    }
    public void keyPressed(KeyEvent e) {
        if (e.getKeyCode() == KeyEvent.VK_UP ) {
            y++;
        }
        if (e.getKeyCode() == KeyEvent.VK_DOWN ) {
            y--;
        }
        if (e.getKeyCode() == KeyEvent.VK_RIGHT ) {
            x++;
        }
        if (e.getKeyCode() == KeyEvent.VK_LEFT ) {
            x--;
        }
    }
    public void keyRelased(KeyEvent e) {
        if (e.getKeyCode() == KeyEvent.VK_UP ) {
            y+=0;
        }
        if (e.getKeyCode() == KeyEvent.VK_DOWN ) {
            y-=0;
        }
        if (e.getKeyCode() == KeyEvent.VK_RIGHT ) {
            x+=0;
        }
        if (e.getKeyCode() == KeyEvent.VK_LEFT ) {
            x-=0;
        }
    }
    public void keyTyped(KeyEvent e) {}
} 
```

# java - 如何用一些预定义的值初始化数组列表？

> ID：16212278
> 
> 赞同：0
> 
> 时间：2013-04-25T10:25:17.787
> 
> 标签：java

我有以下程序，它解析 JSON 并形成一个 ArrayList，如图所示。

我如何在这里初始化 mySymbols ArrayList ，以便它每次都包含一些预定义的符号

有四个预定义符号，即 ("DYY" , "LIIO" , "AFD" , "XCF" ) ，因此它将始终是 finalSymbolsList 的一部分

我可以通过执行此步骤手动实现

```
List<String> finalSymbolsList = jw.getMySymbols();

 finalSymbolsList.add("DYY");
 finalSymbolsList.add("LIIO");
 finalSymbolsList.add("AFD");
 finalSymbolsList.add("XCF"); 
```

=======================

```
import java.util.List;

import org.codehaus.jackson.map.ObjectMapper;

import com.JsonDTO;

public class Test {

    public static void main(String args[]) {

        try {
            String request = "{\r\n" + "    \"mySymbols\": [\r\n"
                    + "        \"TEST\",\"A\"\r\n" + "    ]\r\n" + "}";

            ObjectMapper mapper = new ObjectMapper();
            JsonDTO jw = mapper.readValue(request, JsonDTO.class);
            List<String> finalSymbolsList = jw.getMySymbols();

            System.out.println(finalSymbolsList);

        } catch (Exception e) {
            e.printStackTrace();
        }

    }

} 
```

========================================

```
package com;

import java.util.ArrayList;
import java.util.Arrays;

public class JsonDTO {

    private ArrayList<String> mySymbols = new ArrayList<String>();

    public ArrayList<String> getMySymbols() {
        return mySymbols;
    }

    public void setMySymbols(ArrayList<String> mySymbols) {
        this.mySymbols = mySymbols;
    }

} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-25T10:26:44.977

尝试这个

```
new String[] {"One","Two","Three","Four"} 
or

List<String> places = Arrays.asList("One", "Two", "Three") 
```

或者写一个构造函数

```
public ClassName()
{
  list = new ArrayList<String>();
  list .add("ONE");
  list .add("TWO");
  list .add("THREE");
  list .add("FOUR");
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-25T10:29:27.710

还有双括号初始化：

```
List<String> finalSymbolsList = new ArrayList<String>() {{
    add("DYY");
    add("LIIO");
    add("AFD");
    add("XCF");
}} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-25T10:27:27.660

```
List<String> places = Arrays.asList("DYY" , "LIIO" , "AFD" , "XCF") 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-04-25T10:29:23.280

只需在构造函数中填写列表

```
public JsonDTO() {
    mySymbols.addAll(finalSymbolsList);
} 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-04-25T10:29:54.233

另一种选择是

```
 List<String> finalSymbolsList = new ArrayList<String>();
 Collections.addAll(finalSymbolsList ,"DYY" , "LIIO" , "AFD" , "XCF" ); 
```

# bash - Bash dialog - checklist options with spaces from a file

> ID：16212279
> 
> 赞同：0
> 
> 时间：2013-04-25T10:25:19.517
> 
> 标签：bash, parameters, dialog, escaping

I try to make a dialog checklist in a bash script. I have to generate options from lines of a file. I think the problem is that my entries contains spaces and so, one entry is considered by many.

Dialog give me this error:

```
Error: Expected 3 arguments, found only 1\. Use --help to list options. 
```

Here my code:

```
while read entry; do
    option+=(0 "$entry" "off")
    echo "$option"
done < "$tempfilelist"

dialog --backtitle "Myscript"  \
       --title "Mytitle" \
       --checklist "Mytext" 10 70 4 "${option[@]}" 
```

I even tried to put quotes in my loop, like this:

```
"'$entry'" 
```

but no change.

and here's my file (tempfilelist):

```
Wed Apr 24 14:17:20 2013 20130423.maya.txt
Wed Apr 24 14:17:41 2013 maya.txt 
```

How to get this script working?

Thanks !

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-25T13:18:44.760

您的脚本不是由运行的`bash`；它正在运行`dash`。将脚本的第一行从

```
#!/bin/sh 
```

至

```
#!/bin/bash 
```

# iphone - Table cell with multiple actions

> ID：16212281
> 
> 赞同：0
> 
> 时间：2013-04-25T10:25:27.107
> 
> 标签：iphone, xcode, uitableview, action

How do I accomplish something like this: [a table cell with multiple actions inside the text](http://notfugly.com/app/xcode_so_tablecellquestion.png)
(link to image, since I don't have enough point to paste images)

I want to be able to control what the bold text does (e.g. activate a segue) and I also want the cell itself to have a separate action.
Is this possible?

The text is dynamic, so the string lengths are not fixed.

Any help is much appreciated! (this is my first question of StackOverflow btw).

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-25T10:32:55.523

检查下面的代码

```
- (UITableViewCell *)tableView:(UITableView *)tableView cellForRowAtIndexPath:(NSIndexPath *)indexPath
{

static NSString *CellIdentifier = @"Cell";

UITableViewCell *cell = [tableView dequeueReusableCellWithIdentifier:CellIdentifier];
if (cell == nil) {
    cell = [[UITableViewCell alloc] initWithStyle:UITableViewCellStyleDefault reuseIdentifier:CellIdentifier];
    cell.accessoryType = UITableViewCellAccessoryDisclosureIndicator;
}

NSString *indexpath_str=[NSString stringWithFormat:@"%d",indexPath.row+1];

NSString *ordinary_string=[NSString stringWithFormat:@"This is %d",indexPath.row+1];

NSMutableAttributedString *attri_str=[[NSMutableAttributedString alloc]initWithString:ordinary_string];

int last=[indexpath_str length];
int begin=[ordinary_string length]-[indexpath_str length];

 [attri_str addAttribute:NSBackgroundColorAttributeName value:[UIColor yellowColor] range:NSMakeRange(begin,last)];
    [attri_str addAttribute:NSFontAttributeName value:[UIFont fontWithName:@"HelveticaNeue-Bold" size:30] range:NSMakeRange(begin, last)];

cell.textLabel.attributedText =attri_str;
return cell;
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-25T10:29:54.320

看看[TTTAttributedLabel](https://github.com/mattt/TTTAttributedLabel)，它可以处理文本内的多个链接。

# javascript - AngularJS：无需使用部分模板的深度链接

> ID：16212286
> 
> 赞同：1
> 
> 时间：2013-04-25T10:25:38.603
> 
> 标签：javascript, angularjs, deep-linking

我正在使用 AngularJs 开发一个允许探索复杂数据的应用程序。因此，不同视图的概念（-> 使用部分模板/控制器进行路由）不太适合我。我的应用程序有一个特定的状态（搜索文本 + 选定的文档 + flagA=1 + flagB = x + ...），我想通过 URL 重建它。所以我想使用如下 URL 调用我的应用程序：

```
http://domain/app/#/search/some text/some-doc-id-123/ 
```

这应该映射到路由'/search/:text/:docid/'，我想得到一个事件，我得到：text 和：docid。在那里我会收集所需的数据并根据需要修改 gui。

任何提示如何在 AngularJs 中做到这一点？我在官方文档中找不到太多。通过 Google 获得的最佳匹配是[http://www.bennadel.com/blog/2420-Mapping-AngularJS-Routes-Onto-URL-Parameters-And-Client-Side-Events.htm](http://www.bennadel.com/blog/2420-Mapping-AngularJS-Routes-Onto-URL-Parameters-And-Client-Side-Events.htm)（以及本博客中的其他文章），但我无法让他们的代码正常工作，也找不到关于他们正在使用的东西的文档！？

# android - Android: Google+ integration. Calling connect() while still connected, missing disconnect()

> ID：16212288
> 
> 赞同：1
> 
> 时间：2013-04-25T10:25:48.863
> 
> 标签：android, connection, google-plus, google-play-services

I am working on app which is having **Google+** integration in android app, I have tried to **login** with **Google+** account, now **PlusClient can not connect with account**, what I did so far.

```
PlusClient mPlusClient;
mPlusClient.connect(); 
```

When I have checked that **mPlusClient** is connected or not, I got below resilt.

```
Log.i("PlusClient", ""+mPlusClient.isConnected());

Output is **False**. 
```

Any help would be appreciated.

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-05-22T04:11:27.557

希望它对您有所帮助..这个博客很好地描述了 Google+ 集成

[http://ankitthakkar90.blogspot.in/](http://ankitthakkar90.blogspot.in/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-05-22T03:19:05.540

在开始之前阅读此内容：[https](https://developers.google.com/+/mobile/android/getting-started) ://developers.google.com/+/mobile/android/getting-started 然后此内容：[https ://developers.google.com/+/mobile/android/sign-in](https://developers.google.com/+/mobile/android/sign-in)

你需要初始化：

*   在 Activity.onCreate 处理程序中初始化 PlusClient 对象。

*   在 Activity.onStart() 期间调用 PlusClient.connect。

*   在 Activity.onStop() 期间调用 PlusClient.disconnect。

您的活动将通过实现 ConnectionCallbacks 和 OnConnectionFailedListener 接口来侦听连接建立或失败的时间。

当 PlusClient 对象无法建立连接时，您的实现有机会在 onConnectionFailed 的实现中恢复，您将获得一个可用于解决任何连接失败的连接状态。您应该将此连接状态保存在成员变量中，并在用户按下登录按钮或 +1 按钮时通过调用 ConnectionResult.startResolutionForResult 来调用它。

```
@Override
       public void onConnectionFailed(ConnectionResult result) {
   if (mConnectionProgressDialog.isShowing()) {
           // The user clicked the sign-in button already. Start to resolve
           // connection errors. Wait until onConnected() to dismiss the
           // connection dialog.
           if (result.hasResolution()) {
                   try {
                        result.startResolutionForResult(this,REQUEST_CODE_RESOLVE_ERR);
                   } catch (SendIntentException e) {
                           mPlusClient.connect();
                   }
           }
            }

   // Save the intent so that we can start an activity when the user clicks
   // the sign-in button.
   mConnectionResult = result;
   } 

      @Override
      public void onConnected() {
           // We've resolved any connection errors.
           mConnectionProgressDialog.dismiss();
            } 
```

因为连接失败的解析是通过 startActivityForResult 和代码 REQUEST_CODE_RESOLVE_ERR 开始的，所以我们可以在 Activity.onActivityResult 中捕获结果。

```
 protected void onActivityResult(int requestCode, int responseCode, Intent intent) {
if (requestCode == REQUEST_CODE_RESOLVE_ERR && responseCode == RESULT_OK) {
    mConnectionResult = null;
    mPlusClient.connect();
    }
    } 
```

例如：

```
 import com.google.android.gms.common.*;
      import com.google.android.gms.common.GooglePlayServicesClient.*;
        import com.google.android.gms.plus.PlusClient;

      public class ExampleActivity extends Activity implements View.OnClickListener,
    ConnectionCallbacks, OnConnectionFailedListener {
private static final String TAG = "ExampleActivity";
private static final int REQUEST_CODE_RESOLVE_ERR = 9000;

private ProgressDialog mConnectionProgressDialog;
private PlusClient mPlusClient;
private ConnectionResult mConnectionResult;

@Override
protected void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
     //create an plusclient object 
    mPlusClient = new PlusClient.Builder(this, this, this)
            .setVisibleActivities("http://schemas.google.com/AddActivity", " http://schemas.google.com/BuyActivity")
            .build();
    // Progress bar to be displayed if the connection failure is not resolved.
    mConnectionProgressDialog = new ProgressDialog(this);
    mConnectionProgressDialog.setMessage("Signing in...");
}

@Override
protected void onStart() {
    super.onStart();
      //connect
    mPlusClient.connect();
}

@Override
protected void onStop() {
    super.onStop();
     //disconnect
    mPlusClient.disconnect();
}

@Override
public void onConnectionFailed(ConnectionResult result) {
    if (result.hasResolution()) {
        try {
            //start Solution for connectivity problems
            result.startResolutionForResult(this, REQUEST_CODE_RESOLVE_ERR);
        } catch (SendIntentException e) {
            mPlusClient.connect();
        }
    }
    // Save the result and resolve the connection failure upon a user click.
    mConnectionResult = result;
}

@Override
protected void onActivityResult(int requestCode, int responseCode, Intent intent) {
    if (requestCode == REQUEST_CODE_RESOLVE_ERR && responseCode == RESULT_OK) {
        mConnectionResult = null;
        //Try connect again 
       mPlusClient.connect();
    }
}

@Override
public void onConnected() {
    //Get account name
    String accountName = mPlusClient.getAccountName();
    Toast.makeText(this, accountName + " is connected.", Toast.LENGTH_LONG).show();
}

@Override
public void onDisconnected() {
    Log.d(TAG, "disconnected");
}
  } 
```

您还可以在 xml 中添加一个按钮以登录并在类中设置一个侦听器`findViewById(R.id.sign_in_button).setOnClickListener(this);` ：

```
 <com.google.android.gms.common.SignInButton
android:id="@+id/sign_in_button"
android:layout_width="wrap_content"
android:layout_height="wrap_content" /> 
```

# java - Packing characters into bits?

> ID：16212289
> 
> 赞同：0
> 
> 时间：2013-04-25T10:25:59.300
> 
> 标签：java, character, bit, packing

I am trying to pack characters into bits in terms of 0's and 1's. I have looked up many websites about bit-packing but I did not get any of them.

I just want a simple idea about bit-packing, and how to do it?

Thanks

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-05-16T06:51:13.233

首先，您应该找出要使用的压缩算法。我推荐阅读霍夫曼压缩算法。顺便说一句，您使用什么语言？

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-25T10:33:53.487

一种已经存在很长时间的常见压缩算法是[LZW](http://en.wikipedia.org/wiki/Lempel%E2%80%93Ziv%E2%80%93Welch)压缩。

它被 GZIP、PKZIP 和 JAR 使用，仅举几例，适用于压缩文本。它结合了[霍夫曼编码](http://en.wikipedia.org/wiki/Huffman_coding)、[算术编码](http://en.wikipedia.org/wiki/Arithmetic_coding)和一些启发式算法来提高效率。

> 关于位打包的简单想法

如果您发现压缩和位打包通常很简单，那么您就是一个稀有品种。;)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-25T10:34:50.050

也许它可以帮助你

```
public String StringtoBinary(String s) {

    char[] cArray=s.toCharArray();

    StringBuilder sb=new StringBuilder();

    for(char c:cArray)
    {
        String cBinaryString=Integer.toBinaryString((int)c);
        sb.append(cBinaryString);
    }

    return sb.toString();
} 
```

# java - Command Line Server?? Client Server Architecture?

> ID：16212292
> 
> 赞同：0
> 
> 时间：2013-04-25T10:26:04.587
> 
> 标签：java, iphone, ios, command-line, client-server

Hope are doing great.

here i do want to know about command line server, how can i access remotely command line server

via iPhone.

any thought any advise much appreciated.

Thanks.

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-09-19T04:31:41.570

彼得劳里在评论中引导我朝着正确的方向前进。对于其他人，如果他们正在寻找我在[stackoverflow.com](http://stackoverflow.com)
上提出的问题的答案 “**如果你从命令行启动一个程序并关闭它，它会向它的所有子进程发送一个 HUP 信号。避免这种情况的方法杀死你的进程是在你的命令行开始时使用 nohup。这会阻止信号并防止你的进程在你退出时被杀死。这适用于所有 UNIX 程序，而不是特定于 Java**。

# oracle - Table prompts are not working in OBI Answers 11g when i use union of two queries

> ID：16212293
> 
> 赞同：0
> 
> 时间：2013-04-25T10:26:06.553
> 
> 标签：oracle, oracle11g, obiee

Okay, so the two queries are from same subject area and they show results when there is no table prompt. But as soon i drag a column to the table prompt in view, it shows the data which should have resulted if I applied join. Please help

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-05-02T07:47:34.897

查询包装是我用来解决此问题的方法，提示现在正常工作。

# javascript - How do I increment a variable in javascript?

> ID：16212294
> 
> 赞同：0
> 
> 时间：2013-04-25T10:26:17.937
> 
> 标签：javascript, jquery

This is my JSON:

```
{"0":0,"1":1,"2":2,"3","4":4,"5":5,"7":"Ocupat","8":8,"9":9,"10":10,"11":11,"12":12,"13":13,"14":14,"15":15,"16":16,"17":17,"18":18,"19":19,"20":20,"21":21,"22":22,"23":23,"24":24,"25":25} 
```

this is my js code

```
function populateLocuriLibereDus(id_cursa, data_rezervare) {
var data = id_cursa + "-" + data_rezervare;
$.get(Path + 'rezervaribilete/locuridisponibile/' + data, function(o) {
$.each(o, function(i, value) {
if(value != "Ocupat"){
$('#locuridus').append('<option value="'+ value +'">'+ value +'</option>');
}
});
}, 'json');
} 
```

The option are show starting from 0 to 25, I want to show from 1 to 26

Thanks for your help.

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-25T10:27:30.937

输出选项时替换`value`为。`(value+1)`

# forms - 禁用表单中的某些复选框

> ID：16212295
> 
> 赞同：0
> 
> 时间：2013-04-25T10:26:21.683
> 
> 标签：forms, symfony, checkbox

我想知道是否有一种简单的方法可以禁用用户修改一个复选框（Symfony 2.1）。我正在尝试这样的事情：

```
 $builder->add('adminRoles', 'entity',  array(
            'property' => 'roleName',
            'class' => 'MyBundle:Role',
            'query_builder' => function(EntityRepository $er) {
                return $er->createQueryBuilder('r')
                    ->orderBy('r.roleName', 'ASC');
            },
            'disabled' => $this->disabledRoles,
            'expanded' => true,
            'multiple'  => true
     )); 
```

$this->disabledRoles 我的意思是角色实体或实体本身的 ID 数组，但它似乎只接受适用于所有实体（复选框）的布尔值。谢谢你的建议 ：-）

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-25T12:27:13.337

您将需要添加一个表单侦听器以自定义各个元素。 [http://symfony.com/doc/current/cookbook/form/dynamic_form_modification.html](http://symfony.com/doc/current/cookbook/form/dynamic_form_modification.html)

看起来工作量很大，但是一旦你完成了这些例子，它就很容易了。您最终会将 disabledRoles 传递给侦听器，然后相应地设置 disabled 标志。

# jsp - Exception Reason while reading pdf in jsp

> ID：16212296
> 
> 赞同：0
> 
> 时间：2013-04-25T10:26:25.293
> 
> 标签：jsp, jakarta-ee, itext

I have wrote a jsp servlet to read pdf using itextpdf , i end up with exception Can someone tell me the reason for exception

**page.jsp**

```
<html>
<%@page import="java.io.File"%>
<%@page import="java.io.*"%>
<%@page import="javax.servlet.*"%>
<%@page import="com.itextpdf.text.Image"%>
<%@page import="com.itextpdf.text.Document"%>
<%@page import="com.itextpdf.text.DocumentException"%>
<%@page import="com.itextpdf.text.pdf.PdfReader"%>
<%@page import="com.itextpdf.text.pdf.PdfImportedPage"%>
<%@page import="com.itextpdf.text.pdf.PdfWriter"%>
<%@page import="com.itextpdf.text.pdf.PdfContentByte"%>
<%
    response.reset();
    response.setContentType("application/pdf");
    response.setHeader("Content-Disposition",
            "inline;filename=Saba_PhBill.pdf");
    File file = new File(
            "D:\\TNWRD_Documents\\Knowladge_Base\\CHAPTER_I.pdf");
    String OUTPUTFILE = "D:\\TNWRD_Documents\\CHAPTER_II.pdf";
    FileInputStream in = new FileInputStream(file);
    PdfReader reader = new PdfReader(in);
    Document document = new Document();
    //PdfWriter writer = PdfWriter.getInstance(document,
    //        new FileOutputStream(OUTPUTFILE));
    OutputStream outputStream = new FileOutputStream(OUTPUTFILE);
    PdfWriter writer = PdfWriter.getInstance(document, outputStream);
    document.open();
    //PdfReader reader = new PdfReader(INPUTFILE);
    PdfContentByte cb = writer.getDirectContent();
    int n = reader.getNumberOfPages();
    PdfImportedPage pages;
    // Go through all pages
    for (int i = 1; i <= n; i++) {
        // Only page number 2 will be included
        pages = writer.getImportedPage(reader, i);
        Image instance = Image.getInstance(pages);
        document.add(instance);
        cb.addTemplate(pages, 0, 0);
        document.addHeader("pdf", "pdf");
    }
    document.close();
%>
</html> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-25T17:03:37.933

`<html>`好吧，如果您将 PDF 文件放在和`</html>`标记之间，您将无法在浏览器中显示 PDF 。那是非法的语法。

此外，您正在将 PDF 写入`FileOutputStream`. 这……很奇怪。您需要将 PDF 字节发送到 ServletOutputStream。

这是最简单的 Hello World Servlet：[Hello](http://itextpdf.com/examples/iia.php?id=167)。您看到创建`PdfWriter`实例时使用了哪个 OutputStream 吗？`response.getOutputStream()`是一个`ServletOutputStream`实例。

当然，虽然这适用于大多数浏览器，但您会遇到一些旧浏览器版本的问题。这就是为什么还有这个例子：[PdfServlet](http://itextpdf.com/examples/iia.php?id=173)

最后，您是一名 JSP 开发人员，因此您从 JSP 课程中记得从 JSP 创建二进制文件总是一个坏主意。优秀的开发人员编写一个 Servlet 来创建二进制文档。

# javascript - Knockout not behaving correctly in Pyramid

> ID：16212298
> 
> 赞同：0
> 
> 时间：2013-04-25T10:26:29.310
> 
> 标签：javascript, python, knockout.js, pyramid

I'm building a webapp using Pyramid, but Knockout is behaving differently. I have a form:

```
 <div data-bind="with: $root.itemToAdd" style="display: none;">
        <form data-bind="submit: $root.addItem">
            <fieldset style="border: none;">
                <legend >Submit Item</legend>                   
                <label>
                    URL <span>{</span>          
                </label>                
                    <input type="text" placeholder="URL" data-bind="value: url, valueUpdate: 'afterkeydown'" />
                <br />
                <br />
                <label>
                    Kwip <span>{</span>         
                </label>
                    <input type="text" placeholder="Your description please!" data-bind="value: description, valueUpdate: 'afterkeydown'" />
                <br />
                <br />
                <button type="button" class="submitAnItem">Add Item</button> 
                <a href="#" class="exit">Cancel</a>
            </fieldset>
        </form>
    </div> 
```

here is the view model:

```
var ViewModel = function() {

    this.itemToAdd = {
        url: ko.observable(""),
        description: ko.observable("")
    };

    //Behavior
    this.addItem = function () {
        alert('Event fired');
    };
}; 
```

I can't figure out why when the form is submitted that the 'addItem' function is not fired. I recreated this in another framework and was able to fire the event. Is there something happening in Pyramid that might interfere with my javascript? Can someone point me in the right direction?

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-25T12:59:04.100

这是因为类型按钮按钮不会触发提交事件。你需要一个按钮类型提交来触发它

# python - Python: 'NoneType' object has no attribute 'get_username'

> ID：16212300
> 
> 赞同：2
> 
> 时间：2013-04-25T10:26:29.710
> 
> 标签：python, class, python-3.x, attributeerror, nonetype

I'm working on a hangman program that also has user accounts objects. The player can log in, create a new account, or view account details, all of which work fine before playing the game. After the game has completed, the user's wins and losses are updated. Before exiting the program, if I try to view the account (the viewAcc function) I get the error:

```
'NoneType' object has no attribute 'get_username'. 
```

When I run the the program again, I can log in to the account, but when I view the account info the wins and losses haven't been updated. Any help would be appreciated, I have to turn this in for class in about 8 hours.

Heres the class code:

```
class Account:
    def __init__(self, username, password, name, email, win, loss):
        self.__username = username
        self.__password = password
        self.__name = name
        self.__email = email
        self.__win = int(win)
        self.__loss = int(loss)

    def set_username (self, username):
        self.__username = username

    def set_password (self, password):
        self.__password = password

    def set_name (self, name):
        self.__name = name

    def set_email (self, email):
        self.__email = email

    def set_win (self, win):
        self.__win = win

    def set_loss (self, loss):
        self.__loss = loss

    def get_username (self):
        return self.__username

    def get_password (self):
        return self.__password

    def get_name (self):
        return self.__name

    def get_email (self):
        return self.__email

    def get_win (self):
        return self.__win

    def get_loss (self):
        return self.__loss 
```

And here's my program's code:

```
import random
import os
import Account
import pickle
import sys
#List of images for different for different stages of being hanged
STAGES = [
'''
      ___________
     |/         |
     |          |
     |         
     |         
     |          
     |         
     |
     |
     |
_____|______
'''
,
'''
      ___________
     |/         |
     |          |
     |        (o_o)
     |         
     |          
     |         
     |
     |
     |
_____|______
'''
,
'''
      ___________
     |/         |
     |          |
     |        (o_o)
     |          | 
     |          |
     |         
     |
     |
     |
_____|______
'''
,
'''
      ___________
     |/         |
     |          |
     |        (o_o)
     |          |/ 
     |          |
     |          
     |
     |
     |
_____|______
'''
,
'''
      ___________
     |/         |
     |          |
     |        (o_o)
     |         \|/ 
     |          |
     |           
     |
     |
     |
_____|______
'''
,
'''
      ___________
     |/         |
     |          |
     |        (o_o)
     |         \|/ 
     |          |
     |         / 
     |
     |
     |
_____|______
'''
,
'''
    YOU DEAD!!!
      ___________
     |/         |
     |          |
     |        (X_X)
     |         \|/ 
     |          |
     |         / \ 
     |
     |
     |
_____|______
'''
]

#used to validate user input
ALPHABET = ['abcdefghijklmnopqrstuvwxyz']

#Declares lists of different sized words
fourWords = ['ties', 'shoe', 'wall', 'dime', 'pens', 'lips', 'toys', 'from', 'your', 'will', 'have', 'long', 'clam', 'crow', 'duck', 'dove', 'fish', 'gull', 'fowl', 'frog', 'hare', 'hair', 'hawk', 'deer', 'bull', 'bird', 'bear', 'bass', 'foal', 'moth', 'back', 'baby']
fiveWords = ['jazzy', 'faker', 'alien', 'aline', 'allot', 'alias', 'alert', 'intro', 'inlet', 'erase', 'error', 'onion', 'least', 'liner', 'linen', 'lions', 'loose', 'loner', 'lists', 'nasal', 'lunar', 'louse', 'oasis', 'nurse', 'notes', 'noose', 'otter', 'reset', 'rerun', 'ratio', 'resin', 'reuse', 'retro', 'rinse', 'roast', 'roots', 'saint', 'salad', 'ruins']
sixwords =  ['baboon', 'python',]

def main():
    #Gets menu choice from user
    choice = menu()

    #Initializes dictionary of user accounts from file
    accDct = loadAcc()

    #initializes user's account
    user = Account.Account("", "", "", "", 0, 0)

    while choice != 0:
        if choice == 1:
           user = play(user)
        if choice == 2:
            createAcc(accDct)
        if choice == 3:
           user = logIn(accDct)
        if choice == 4:
            viewAcc(user)
        choice = menu()

    saveAcc(accDct)

#Plays the game
def play(user):

    os.system("cls") #Clears screen
    hangman = 0      #Used as index for stage view
    done = False    #Used to signal when game is finished
    guessed = ['']   #Holds letters already guessed

    #Gets the game word lenght from the user
    difficulty = int(input("Chose Difficulty/Word Length:\n"\
                           "1\. Easy: Four Letter Word\n"\
                           "2\. Medium: Five Letter Word\n"\
                           "3\. Hard: Six Letter Word\n"\
                           "Choice: "))
    #Validates input                 
    while difficulty < 1 or difficulty > 3:
        difficulty = int(input("Invalid menu choice.\n"\
                               "Reenter Choice(1-3): "))

    #Gets a random word from a different list depending on difficulty
    if difficulty == 1:
        word = random.choice(fourWords)
    if difficulty == 2:
        word = random.choice(fiveWords)
    if difficulty == 3:
        word = random.choice(sixWords)

    viewWord = list('_'*len(word))
    letters = list(word)

    while done == False:

        os.system("cls")

        print(STAGES[hangman])
        for i in range(len(word)):
            sys.stdout.write(viewWord[i])
            sys.stdout.write(" ")
        print()
        print("Guessed Letters: ")
        for i in range(len(guessed)):
            sys.stdout.write(guessed[i])
        print()

        guess = str(input("Enter guess: "))
        guess = guess.lower()

        while guess in guessed:
            guess = str(input("Already guessed that letter.\n"\
                              "Enter another guess: "))

        while len(guess) != 1:
            guess = str(input("Guess must be ONE letter.\n"\
                              "Enter another guess: "))

        while guess not in ALPHABET[0]:
            guess = str(input("Guess must be a letter.\n"\
                     "Enter another guess: "))

        if guess not in letters:
            hangman+=1

        for i in range(len(word)):
            if guess in letters[i]:
                viewWord[i] = guess

        guessed += guess

        if '_' not in viewWord:
            print ("Congratulations! You correctly guessed",word)
            done = True

            win = user.get_win()
            win += 1
            username = user.get_username()
            password = user.get_password()
            name = user.get_name()
            email = user.get_email()
            loss = user.get_loss()
            user = Account.Account(username, password, name, email, win, loss)

        if hangman == 6:
            os.system("cls")
            print()
            print(STAGES[hangman])
            print("You couldn't guess the word",word.upper(),"before being hanged.")
            print("Sorry, you lose.")
            done = True

            loss = user.get_loss()
            loss += 1
            username = user.get_username()
            password = user.get_password()
            name = user.get_name()
            email = user.get_email()
            win = user.get_win()
            user = Account.Account(username, password, name, email, win, loss)

#Loads user accounts from file
def loadAcc():
    try:
        iFile = open('userAccounts.txt', 'rb')

        accDct = pickle.load(iFile)

        iFile.close

    except IOError:
        accDct = {}

    return accDct

#Displays the menu        
def menu():
    os.system('cls')
    print("Welcome to Karl-Heinz's Hangman")
    choice = int(input("1\. Play Hangman\n"\
                       "2\. Create Account\n"\
                       "3\. Log In\n"\
                       "4\. View Account Details\n"\
                       "0\. Quit Program\n"\
                       "Choice: "))
    while choice < 0 or choice > 4:
        choice = int(input("Invalid Menu Choice.\n"\
                           "Reenter Choice: "))

    return choice

#Logs user in to existing account      
def logIn(accDct):
    os.system('cls')
    user = Account.Account("","","","",0,0)
    username = str(input("Enter Username(case sensitive): "))
    if username not in accDct:
        print("Account does not exist")
        os.system("pause")
        return user

    temp = Account.Account("","","","",0,0)
    temp = accDct[username]

    password = str(input("Enter Password(case sensitive): "))
    if password != temp.get_password():
        print("Incorrect password.")
        os.system("pause")
        return user

    user = accDct[username]
    return user

#Creates a new account and a new account file if one doesn't exist
def createAcc(accDct):
    os.system('cls')
    print("Enter account info:")
    username = str(input("UserName: "))

    if username in accDct:
        print("Account already exists.")
        os.system("pause")
        return

    password = str(input("Password: "))
    name = str(input("Name: "))
    email = str(input("Email: "))
    wins = 0
    loss = 0

    tempuser = Account.Account(username, password, name, email, wins, loss)

    accDct[username] = tempuser

    print("Account created.")
    os.system("pause")

def viewAcc(user):
    os.system('cls')

    print("Account Details: ")
    print("Username: ",user.get_username())
    print("Name: ",user.get_name())
    print("Email: ",user.get_email())
    print("Wins: ",user.get_win())
    print("Losses: ",user.get_loss())

    os.system("pause")

#Saves accounts dictionary to file
def saveAcc(accDct):    
    oFile = open("userAccounts.txt", "wb")

    pickle.dump(accDct, oFile)

    oFile.close()

main() 
```

Any help is greatly appreciated.

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-25T10:43:16.253

您的 play() 函数没有`return`语句，这意味着它`None`作为返回值返回。这就是`None`您在 main() 中进入`user`变量的方式。在你的 play() 函数中添加一个`return`语句，你应该没问题。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-25T10:43:14.977

您正在其中创建*新* `Account`实例，`play`但从不返回这些实例。then 中的`user`变量`main`已分配`None`，因为 `play`从不返回任何内容。

`user`完成后返回`play`：

```
def play(user):
    # ....

    return user 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-25T10:43:36.490

该`play`函数不返回`Account`实例。然后它返回`None`。如果您在`play`函数之前调用该函数，`viewAcc`则用户等于`None`

# java - method in main read string expression in java

> ID：16212301
> 
> 赞同：0
> 
> 时间：2013-04-25T10:26:30.367
> 
> 标签：java, netbeans

I need to create a method in main to read string expression and parse it with parenthesis first.

the expression is:
`(3+4)*7/2`

It has to be done in java. But i don't know how to do it.

Any ideas on that!

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-25T10:31:54.477

尝试这个：

```
ScriptEngineManager mgr = new ScriptEngineManager();
ScriptEngine engine = mgr.getEngineByName("JavaScript");
String foo = "(3+4)*7/2";
double result=0;
try {
    /*
    It seems that (on some platforms) this results in a java.lang.RuntimeException 
    because of converting Object to double, so let's replace it with
    Double.doubleValue()
    */
    //result = (double) (engine.eval(foo));
    result = ((Double) (engine.eval(foo))).doubleValue(); //result = 24.5
} catch (ScriptException e) {
    //handle exception here
} 
```

**更新**

在尝试评估表达式之前，您应该测试“JavaScript”ScriptEngine 是否已在您的系统上注册，您可以这样做：

```
ScriptEngineManager manager = new ScriptEngineManager();
List<ScriptEngineFactory> factories = manager.getEngineFactories();
for (ScriptEngineFactory factory : factories) {
    System.out.println(factory.getNames());
} 
```

我的输出是

```
[js, rhino, JavaScript, javascript, ECMAScript, ecmascript] 
```

如果您的输出不包含`JavaScript`，请尝试使用`js`and `javascript`，例如

```
ScriptEngine engine = mgr.getEngineByName("js"); 
```

或者

```
ScriptEngine engine = mgr.getEngineByName("javascript"); 
```

如果它们都不存在，则不能使用 js 作为脚本引擎来评估表达式

# ember.js - 使用简单 ID 设置和 EmberJS 模型所有者

> ID：16212302
> 
> 赞同：0
> 
> 时间：2013-04-25T10:26:38.950
> 
> 标签：ember.js, ember-data

我有代码尝试通过简单地设置所有者的 id 来设置模型实例的所有者，如下所示：

```
tableJSON = {id: 1, room_id: 1}

rec = App.Table.createRecord();
rec.setProperties(tableJSON);
App.store.commit(); 
```

我正在使用`localStorage ember adapter`.

它没有在桌子模型上设置房间。该模型指定桌子属于房间。

当我打电话时`table.get('room')`，它返回null。

有任何想法吗？

# ios - UIButton setSelected: NO 不显示默认背景图片

> ID：16212303
> 
> 赞同：1
> 
> 时间：2013-04-25T10:26:41.507
> 
> 标签：ios, objective-c, uibutton

我有一个`UIButton`带有 2 个背景图像的自定义：

```
in Default State: default.png

in Selected State: selected.png 
```

在 Xib 文件中设置。

这是在按钮按下时调用的：

```
-(IBAction)numberSelected:(id)sender{
  NSLog(@"Button pressed %@",[sender currentTitle]);
  UIButton* button = (UIButton*)sender;
  button.selected = !button.selected;

  [button release];
} 
```

错误的行为是这样的：

我按下按钮，背景图像切换到`selected.png`（正确），我再次按下它，没有显示背景图像。我再按一次，应用程序崩溃了。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-25T10:30:05.923

我想你忘了设置：`UIControlStateSelected`添加图像。

```
[button setImage:[UIImage imageNamed:@"Selected.png"] forState:UIControlStateSelected | UIControlStateHighlighted]; 
```

## 编辑：

你为什么做`[button release];`当然它会第二次崩溃。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-25T10:32:53.567

无需释放那里的按钮。消除

```
[button release]; 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-25T10:33:46.337

```
 [button release]; 
```

**该声明必须删除！**

# asp.net - 由于下拉的自动发布，要求字段验证器消失

> ID：16212306
> 
> 赞同：0
> 
> 时间：2013-04-25T10:26:49.753
> 
> 标签：asp.net

这是我的要求提交验证器的问题，这里我使用一个下拉框选择时间，与我的下拉列表中的要求字段验证器相关联，有 1-24 小时时间和第一个索引的选择时间。在我的页面中，如果用户选择时间，则需要在下拉菜单中选择时间，然后再次进入第一个索引的初始值或选择时间选项，该时间需要字段验证器工作并由于部分回发或下拉的自动回发而立即消失.我也使用更新面板。我希望每当用户不选择时间或选择选择时间选项时，该时间需要字段验证器提示用户选择时间。直到用户不选择时间它不能进一步处理。

```
<div class="loginBox">
                <asp:Label ID="lblDateTime" Text="Date & Time:" CssClass="jobTitle"   AssociatedControlID="txtDate"
                    runat="server"></asp:Label>                    
                <asp:DropDownList ID="ddlTime"  runat="server" AutoPostBack="true"   OnSelectedIndexChanged="ddlTime_SelectedIndexChanged">
                </asp:DropDownList>
                <asp:RequiredFieldValidator ID="rfvTime" runat="server" Display="Dynamic" ControlToValidate="ddlTime"
                    Text="Select Time" ErrorMessage="Select Time" InitialValue="-1" CssClass="ErrMsg"></asp:RequiredFieldValidator>
            </div> 
```

# c++ - 访问子函数，同时使用父类

> ID：16212307
> 
> 赞同：0
> 
> 时间：2013-04-25T10:26:50.900
> 
> 标签：c++, qt, oop

我正在为大学课程做作业，我和我的伙伴遇到了问题。我们正在制作的程序是一个游戏。

我们有几个类，它们都继承自基类，称为 Creature。这些都是玩家需要处理的敌人，他们都运行自己的 AI。有 4 种不同类型的子类，都在命名空间 Creature（包括父级、Creature）中，其中一个类具有只有它需要的特殊功能。这个班级被称为兔子。

现在，我的工作是根据需要调用 AI 函数。问题是，当我要求游戏板告诉我我得到什么生物时，我并不总是知道我在呼唤*什么类。*

所有敌人都保存为指针，如下所示，在游戏板方块中：

```
 struct Square
    {   
        // Pointers to Morso class, where the enemy is saved
        Creature::Creature* creature;
        //Undeeded stuff removed

    }; 
```

现在，这一切都很好，直到我们需要访问特殊功能。如果满足某些条件，Pupu会成倍增加。因此，在 Pupu 中，我需要调用的函数很少，以确保它正确执行。

然而，问题来了。

我打电话给我们的棋盘类，把我给它的坐标中的生物给我。

```
void GameEngine::GameEngine::runAI()
{
    Creature::Creature* creature= NULL;

    for(unsigned int y = 0; y < dimY; y++)
    {
        for(unsigned int x = 0; x < dimX; x++)
        {
            Coordinate target;

            target.setX(x);
            target.setY(y);

            creature= board_->returnCreature(target);

            //If there is a creature in the target, run its AI
            if(creature!= NULL)
            {

                //If it is, check special procedures
                if(creature->returnType() == "bunny")
                {
                    bunnyReproduce(creature);
                }

                creature->ai();
            }

        }//for x

    }//for y
} 
```

现在， ：

```
void GameEngine::GameEngine::bunnyReproduce(Ccreature::Creature* creature)
{

//Checks that it really is a bunny
if( creature->returnType() != "bunny"){ return; }

//Check is there another bunny near
creature->checkForMate();

} 
```

问题是，在这一点上，生物不能调用 checkForMate，它是 Bunny 的公共成员，而不是 Creature。我们需要把虚函数变成Creature吗？

我尝试将 checkForMate 设置为 Creature::Bunny，但由于我尝试赋予它的原始值是 Creature 类，所以我不能这样做。我们是否需要在 Creature 类中创建一个空的虚函数，然后覆盖它 Bunnyclass？

我正在运行带有 QT 5.0.2 的 Qt Creator 2.7.0。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-25T10:54:47.023

您应该将[虚](https://stackoverflow.com/questions/1306778/c-virtual-pure-virtual-explained/1306837#1306837)函数添加`reproduce`到`Creature`类中并在`Bunny`您以后可能添加到游戏中的任何其他生物中实现它。这样任何生物都会以自己的方式繁殖自己。在这种情况下，你甚至不需要检查生物类型。因为如果你有一些不可复制的生物，你可能只是实现`reproduce`为空的方法，它什么都不做。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-25T11:18:09.377

理想情况下，您的引擎根本不需要关心它正在使用哪种生物。

如果你想让兔子在每一步都重现`ai()`，为什么不在兔子那里做呢`ai()`？
毕竟，决定什么时候繁殖不应该是兔子的责任，而不是一些万能的外部引擎吗？

```
void Creature::Bunny::ai()
{
    if (niceMateNearby())
        reproduce();
    else
        eatCarrotsAndJumpAround();
} 
```

# java - JAVA - 检查值是否不在其他索引二维数组中

> ID：16212311
> 
> 赞同：0
> 
> 时间：2013-04-25T10:26:56.000
> 
> 标签：java, arrays, 2d

我被困在学校项目的这一部分，我必须在两个坐标之间找到最短的路线（旅行推销员问题）。我在这里做了一点点东西来获取最近邻居的坐标，但是一些坐标有相同的最近邻居，我不想要那个。

我想了一些办法来解决这个问题，但它不起作用，我不知道为什么。

`distance`是当前位置与其他位置之间的当前距离。`shortestDistance`我认为有点不言自明。

`locations[20][3]`是一个二维数组，我在其中存储每个坐标的 Xco-ord、Yco-ord 和最近邻。X 在 [x][0] 中，Y 在 [x][1] 中，邻居在 [x][2] 中

```
for(int i = 0; i < 20; i++){
            int shortestDistance = 100;
            int distance;
            //Looking for nearest neighbour 20 times 
            for(int j = 0; j < 20; j++){
                //Looking for the closest neighbour here
                distanceX = locations[i][0] - locations[j][0];
                distanceY = locations[i][1] - locations[j][1];
                //To prevent a negative distance:
                if(distanceX < 0){
                    distanceX = distanceX * -1; 
                }
                if(distanceY < 0){
                    distanceY = distanceY * -1;
                }
                //Add distance
                distance = distanceX + distanceY;
                //If current distance is shorter then the shortestdistance, to prevent it does'nt see itself as 'neighbour' and to prevent another co-ord has the same neighbour, which happens in isOk(); 
                if(distance < shortestDistance && distanceX + distanceY != 0 && isOk(j)){
                    shortestDistance = distance;
                    locations[i][2] = j;
                }
            }
        } 
```

函数 isOk 是：

```
private boolean isOk(int j){
    boolean result = false;
    for(int i = 0; i < 20; i++){
        if(locations[i][2] == j){
            result = false;
        }
        else{
            result = true;
        }
    }
    return result;
} 
```

所以，我要问的是我做错了什么？我仍然得到一些与其最近邻居具有相同项目的项目（在 20 * 10 存储中）。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-26T11:49:10.287

您可能必须将邻居初始化为适合您的`isOK`方法的东西。例如，这样的值是-1。

```
for(int i = 0; i < 20; i++) locations[i][2] = -1; 
```

还包含一个小`isOk`错误。`j`当发现作为另一个位置的邻居时，应该停止循环：

```
private boolean isOk(int j){
    for(int i = 0; i < 20; i++){
        if (locations[i][2] == j) return false;
    }
    return true;
} 
```

# .htaccess - 如何在显示旧地址时重定向域？

> ID：16212312
> 
> 赞同：0
> 
> 时间：2013-04-25T10:26:56.817
> 
> 标签：.htaccess, redirect, http-status-code-301, domain-name

我使用主机服务生成了一个 .htaccess 文件，以 301 永久重定向从空子域到文件夹中的新子域页面。

`sejur-avion.old-domain.com`-->`subdomain.new-domain.com/agent/5049/sejur-avion`

```
RewriteEngine on
RewriteCond %{HTTP_HOST} ^sejur\-avion\.old\-domain\.com$ [OR]
RewriteCond %{HTTP_HOST} ^www\.sejur\-avion\.old\-domain\.com$
RewriteRule ^(.*)$ "http\:\/\/subdomain\.new\-domain\.com\/agent\/5049\/sejur\-avion\/$1" [R=301,L] 
```

我需要做的是从地址栏中隐藏“新域”名称，并尽可能显示旧域名。

所以我需要`subdomain.new-domain.com/agent/5049/sejur-avion`显示为`subdomain.old-domain.com/agent/5049/sejur-avion`

我听说有一个 ServerAlias 函数可以用于此目的？请帮忙

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-25T10:33:43.970

您可以使用 mod rewrite 的`P`标志，该标志通过 mod_proxy 发送反向代理请求：

```
RewriteEngine on
RewriteCond %{HTTP_HOST} ^sejur\-avion\.old\-domain\.com$ [OR]
RewriteCond %{HTTP_HOST} ^www\.sejur\-avion\.old\-domain\.com$
RewriteRule ^(.*)$ "http\:\/\/subdomain\.new\-domain\.com\/agent\/5049\/sejur\-avion\/$1" [P,L] 
```

（基本上用`R=301`a替换`P`）

但是，这需要您加载 mod_proxy，但情况并非总是如此。如果该模块未加载，您不太可能收到错误（只是没有任何反应）。

# uml - 策略模式的 UML 类图

> ID：16212314
> 
> 赞同：4
> 
> 时间：2013-04-25T10:26:58.123
> 
> 标签：uml, class-diagram, strategy-pattern

几个小时后我有一个考试，我正在尝试为它解决示例问题。我找不到以下问题的解决方案。

> > 画出对应以下情况的类图：
> > 
> > 杂货店（例如超市）出售物品。有两种类型的物品：可食用的（即任何可用作食物的物品）和不可食用的。有些物品是按重量出售的，有些是按单位出售的。有些项目是应税的，而有些则不是。有些商品在成组出售时有特价（例如，2 件 3 美元）。一次购买可能包含许多物品。
> > 
> > 在您的类图中，仅显示类/抽象类/接口、关联和关联的多重性。不包括任何操作！在您的设计中清楚地指出接口和抽象类（如果有的话）。
> > 
> > 此外，您的设计应尽可能 **灵活**。特别需要注意以下几点：
> > 
> > 1) 一个项目要么可食用，要么不可食用，这一事实在项目的生命周期内不会改变，而定价策略可能会在项目的生命周期内改变。
> > 
> > 2) 每个定价策略都与一组特定的操作相关联。例如，对于征税策略，无论项目是否应税，我们可能有一个计算税金的操作（此函数可以返回 0 对于非应税项目）
> > 
> > 3) 尽管定价策略的操作集保持不变，但处理这些操作的方式可能会随着时间而改变。例如，我们计算可食用和不可食用物品税金的方式可能会随着时间的推移而有所不同。
> > 
> > 4）虽然定价策略的操作集在不同的项目中保持不变，但我们可能希望以不同的方式为不同的项目实施这些操作。例如，我们可能希望以不同的方式计算橙子和苹果的税收。

我尝试了类似的方法，认为它可能适合策略设计模式，但我完全不确定。

![在此处输入图像描述](https://i.stack.imgur.com/RJBKQ.png)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-05-28T22:37:27.883

首先是一家商店，可以是杂货店。任何商店都有两种类型的对象：物品和购买。如果没有物品和/或购买，商店将不复存在。商品将在没有商店的情况下存在（例如，它们必须交付到商店），但购买属于商店本身。这就是为什么 store 和 item 之间存在聚合关系，而 store 和 purchase 之间存在组合关系的原因。

物品有一些特征，如名称、可食用、应税、重量和单位。我没有实现一个项目的所有特征，但想法就在那里。有很多方法可以出售这些物品。可能同时使用更多策略。为这种情况设计了装饰器模式。它可以在运行时动态添加多种策略。它在装饰物品-界面，因为它与物品相关联，因为销售方式的变化在物品中找到了原因。它与班级购买有关联，但不是购买的一部分。将出售的每件商品都属于特定的购买。它也可以有尚未出售的状态。这就是为什么购买的多重性是 0-1。总而言之，归结为：

![商店中出售的物品的类图](https://i.stack.imgur.com/dgPzD.png)

# javascript - 如何在 webgl 中添加标签

> ID：16212319
> 
> 赞同：0
> 
> 时间：2013-04-25T10:27:09.077
> 
> 标签：javascript, jquery, html, webgl

我想知道如何在使用 webgl 绘制的图形中添加标签。我尝试搜索它，但搜索没有产生任何结果。谁能帮我这个。

# php - 如何更改 Magento 中选择框地址对应的地图视图？

> ID：16212322
> 
> 赞同：0
> 
> 时间：2013-04-25T10:27:13.753
> 
> 标签：php, magento, magento-1.7

如何在 CMS 页面中添加谷歌地图以及如何使用它进行搜索？当我在左侧的选择框中列出地址时。当我选择地址时，意味着地图右侧会更改为相应的地址。我正在使用 Magento 1.7.0.2 。谁能指导我。

提前致谢，

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-25T10:41:42.703

您使用扩展来更改视图地图您在电子商务中使用此扩展

[http://www.growdevelopment.com/magento-extensions/store-locations-pro](http://www.growdevelopment.com/magento-extensions/store-locations-pro)

我希望你的问题解决了这个扩展，而不是你满意

# apache-flex - 停止 Flash Builder 解析 XML 文件

> ID：16212333
> 
> 赞同：0
> 
> 时间：2013-04-25T10:27:44.507
> 
> 标签：apache-flex, flash-builder

我正在 Flash Builder 4.6 中编辑一个 XML 文件，该 XML 包含配置数据并嵌入到我的应用程序中。

Flash Builder 显示一长串错误，这些错误链接到项目而不是文件。

这些错误就像“ *1086：语法错误：需要分号*”和“ *1093：语法错误*”之类的东西，它们只是表明文件不是有效的Actionscript。

它们看起来都像这样，第 1 行出现错误：

![错误信息](https://i.stack.imgur.com/2RZot.png)

有没有办法可以停止解析文件，它只是一种资产，不应该被解析。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-26T11:16:44.283

只需删除

```
<?xml version='1.0' encoding='utf-8'?> 
```

在您的 xml 文件中声明并且编译器错误应该消失

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-25T11:24:43.070

在编译应用程序时，您可以传递几个编译器参数，您可以访问以下链接 - [http://livedocs.adobe.com/flex/3/html/help.html?content=anttasks_4.html](http://livedocs.adobe.com/flex/3/html/help.html?content=anttasks_4.html)。

在给定的链接上，您可以按如下方式提供配置文件链接 -

```
<mxmlc ... >
    <load-config filename="${FLEX_HOME}/frameworks/flex-config.xml"/>
    <source-path path-element="${FLEX_HOME}/frameworks"/>
</mxmlc> 
```

# javascript - Javascript将字符串与数组中的字符串匹配

> ID：16212338
> 
> 赞同：1
> 
> 时间：2013-04-25T10:27:52.043
> 
> 标签：javascript, jquery, logic

我有一组输入字段，每个字段都有“smarty_address_check”类

```
<input type="text" class="smarty_address_check" value="this is a new value" />
<input type="text" class="smarty_address_check" value="this value has been unchanged" />
etc 
```

我需要做的是

*   对于每个输入字段值
*   将该值与数组中的每个值进行比较（数组称为 smarty_address_check）
*   如果匹配，做点什么。

数组中的**值是输入字段的原始默认值/示例值**，如果用户没有更改它们，我想对此采取行动。

```
var exampleAddressPresent = false;
    for (var i = 0; i<smarty_address_check.length; i++) {
        $('.smarty_address_check').each(function() { //For each of inputs
            if (smarty_address_check[i].match($(this).val())) { //if match against array
                var exampleAddressPresent = true; //Example address present
                console.log($(this).attr("id")); //store id of unchanged input

            }
        });
    } 
```

我觉得这是糟糕的编程逻辑，更不用说我无法弄清楚它为什么不能正常工作。我基本上想做的就是将一个字符串与另一个字符串进行比较。有谁知道更好的方法来解决这个问题？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-25T10:48:38.240

您不需要`match()`比较两个字符串。有常见的`===`比较运算符

```
if(smarty_address_check[i] === $(this).val()) { 
```

编辑：如果数组的索引与输入的索引/位置匹配，则可以通过使用相同的索引来避免外循环

```
$('.smarty_address_check').each(function(index) { //For each of inputs
    if (smarty_address_check[index] === $(this).val()) { //if match against array
        exampleAddressPresent = true; //Example address present
        console.log($(this).attr("id")); //store id of unchanged input
    }
}); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2017-01-28T06:19:52.943

如果`array`您要检查的是`an Array of strings`，可能的解决方案是：

## 将 Array 中的值转换为一个字符串：

```
var myArray = ['apples', 'mangoes', 'bananas'] // example Array of strings
var string = myArray.join(':'); // we'll get "apples:mangoes:bananas" 
```

## 接下来，我们可以检查我们的值是否在该字符串上

```
var myValue = 'apples' // example input value
if(string.indexOf(myValue) !== -1) 
  // do something (i.e. myValue matches with one of the values on myArray) 
```

祝你好运

# gdb - 在 GDB 中如何打印 0xc(%rsp)？

> ID：16212339
> 
> 赞同：1
> 
> 时间：2013-04-25T10:27:52.490
> 
> 标签：gdb, x86-64

我正在尝试为一个项目调试一些代码，但我遇到了这一行`cmpl $0x7,0xc(%rsp)`。什么是 0xc(%rsp)，如何打印？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-25T14:02:30.083

> 什么是 0xc(%rsp)

当前堆栈指针上方 12 个字节的内存位置。该位置的值正在与 进行比较`7`。

> 以及如何打印？

```
(gdb) print $rsp+0xc 
```

# unity3d - IOS（iPad）如何将运行时创建的屏幕截图加载到 Texture 或 Texture2D

> ID：16212343
> 
> 赞同：0
> 
> 时间：2013-04-25T10:27:58.460
> 
> 标签：unity3d

我们正面临 Unity 的问题。我们正在开发一个 IPAD 应用程序。一个功能是截取屏幕截图并将其用作按钮。因为IPAD里的树目录里面不存在Resources文件夹，所以我们不能使用“Resources.Load”，即便如此，因为这个功能必须要怎么工作，所以一开始纹理是不可用的，所以我们最初不能把它放在 Resources 文件夹中。我们尝试了几种解决方案，比如在 IPAD 中创建一个 Resources 文件夹（在 Documents 文件夹内）并尝试从中加载纹理，甚至是这段代码：

```
public Texture LoadTextureFromFile(string filename)
{
    Texture2D texture = new Texture2D(1024, 768);
    FileStream fs = new FileStream(filename, FileMode.Open,
FileAccess.Read);

    byte[] imageData = new byte[fs.Length];
    fs.Read(imageData, 0, (int)fs.Length);
    texture.LoadImage(imageData);
    return (texture as Texture);
} 
```

任何帮助将不胜感激。我们已经被这个问题困扰了好几天了

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-25T11:43:00.690

您可以尝试以下方法：

```
Texture2D tex = new Texture2D(Screen.width, Screen.height);
tex.ReadPixels(new Rect(0, 0, Screen.width, Screen.height), 0, 0);
tex.Apply(); 
```

并扣上`tex`按钮。

如果要将其保存到文件以供以后使用，可以执行以下操作：

```
// Encode texture into PNG
var bytes = tex.EncodeToPNG();
Destroy( tex ); 
```

您将拥有一个可以随意使用的 PNG 文件。

当您保存文件并希望从 Documents 文件夹中的某个位置加载它时，您可以尝试以下操作：

```
WWW imageToLoadPath = new WWW(/var/mobile/Applications/XXXXYYYY-XXXX-XXXX-XXXX-XXXXYYYYZZZZ/Documents/sample.png) //rendering texture
yield return imageToLoadPath; // <- the actual load of file
imageToLoadPath.LoadImageIntoTexture(buttonObject.renderer.material.mainTexture as Texture2D); 
```

这些 X 和 Y 是您的应用程序的 ID 代码。运行应用程序一次后，您可以在 `Application.dataPath`. 您可以在那里窥视并检查您需要填写的内容。

# android - 引起：java.lang.NumberFormatException

> ID：16212346
> 
> 赞同：-1
> 
> 时间：2013-04-25T10:28:11.220
> 
> 标签：android, android-mapview, android-arrayadapter

在我的应用程序中，我试图从存储在我的 sqllite 数据库中的坐标显示谷歌地图上多个点的纬度和经度。这是我的 Map.Class，我在其中显示点。

```
public class Map extends MapActivity {
    private MapView map = null;
    private MyLocationOverlay me = null;
    List<Overlay> mapOverlays;
    boolean flag;

    public static Context context;

   ArrayList<Article> mArticles;

   EditText search;
   DBHelper helper;
   GeoPoint point;
   MapView mapView;
   Drawable marker;

    @Override
    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.aproximite);

        helper = DBHelper.getInstance(this);// <= data from mysqllitedatabase

        map = (MapView) findViewById(R.id.mapview);

        map.getController().setCenter(getPoint(40.76793169992044, -73.98180484771729));
        map.getController().setZoom(17);
        map.setBuiltInZoomControls(true);

        mapOverlays = map.getOverlays();

        marker = getResources().getDrawable(R.drawable.icone_sur_carte);
        marker.setBounds(0, 0, marker.getIntrinsicWidth(),
                marker.getIntrinsicHeight());

        map.getOverlays().add(new SitesOverlay(marker, map));//<===error occurance

        me = new MyLocationOverlay(this, map);
        map.getOverlays().add(me);

    }

    @Override
    public void onResume() {
        super.onResume();

        me.enableCompass();
    }

    public MapView getMapView() {
        return this.map;
    }

    @Override
    public void onPause() {
        super.onPause();

        me.disableCompass();
    }

    @Override
    protected boolean isRouteDisplayed() {
        return (false);
    }

    @Override
    public boolean onKeyDown(int keyCode, KeyEvent event) {
        if (keyCode == KeyEvent.KEYCODE_S) {
            map.setSatellite(!map.isSatellite());
            return (true);
        } else if (keyCode == KeyEvent.KEYCODE_Z) {
            map.displayZoomControls(true);
            return (true);
        }

        return (super.onKeyDown(keyCode, event));
    }

    private GeoPoint getPoint(double lat, double lon) {
        return (new GeoPoint((int) (lat * 1000000.0), (int) (lon * 1000000.0)));
    }

    private class SitesOverlay extends ItemizedOverlay<OverlayItem> {
        private List<OverlayItem> items = new ArrayList<OverlayItem>();
        private Drawable marker = null;
        private OverlayItem inDrag = null;
        private ImageView dragImage = null;
        private int xDragImageOffset = 0;
        private int yDragImageOffset = 0;
        private int xDragTouchOffset = 0;
        private int yDragTouchOffset = 0;
        private Context c;
        public int selectedIndex = -1;
        private final Bitmap bitMap;
        private View view = null;
        private boolean   isPinch  =  false;

        public SitesOverlay(Drawable marker, MapView mapView) {
            super(boundCenter(marker));
            this.marker = marker;
            c = mapView.getContext();
            dragImage = (ImageView) findViewById(R.id.drag);
            xDragImageOffset = dragImage.getDrawable().getIntrinsicWidth() / 2;
            yDragImageOffset = dragImage.getDrawable().getIntrinsicHeight();

            mArticles = helper.getArticlesList();

            for (int i=0;i<mArticles.size();i++){

               double slat =Double.valueOf(mArticles.get(i).getLatitude().toString());
               double  vlong = Double.valueOf(mArticles.get(i).getLongitude().toString());

               GeoPoint pt = new GeoPoint((int) (slat * 1E6), (int) (vlong * 1E6));
                Log.e("lat long", "--- "+slat);
               // Map.mc.animateTo(pt);

                items.add(new OverlayItem(pt, mArticles.get(i).getNom().toString(), "Bendigo"));
                boundCenter(marker);

            }

            bitMap = BitmapFactory.decodeResource(getResources(),
                    R.drawable.icone_sur_carte);
            populate();
        }

        @Override
        protected OverlayItem createItem(int i) {
            return (items.get(i));
        }

        @Override
        public void draw(Canvas canvas, MapView mapView, boolean shadow) {
            super.draw(canvas, mapView, shadow);

            boundCenterBottom(marker);
        }

        @Override
        public int size() {
            return (items.size());
        }

        public void refresh() {
            populate();
        }

        public void clear() {
            items.clear();
            resetLastFocuesIndex();
        }

        public void resetLastFocuesIndex() {
            setLastFocusedIndex(-1);
            selectedIndex = -1;
        }

        @Override
        protected boolean onTap(final int index) {
              if ( isPinch ){
                    return false;
              }else{

                /*  
                  getMapView().setOnTouchListener(new OnTouchListener() {
                @Override
                public boolean onTouch(View arg0, MotionEvent arg1) {
                    if (!items.isEmpty()) {
                        if (view != null) {
                            view.setVisibility(View.GONE);
                        getMapView().invalidate();
                    }
                    }
                    getMapView().invalidate();
                    return true;
                }
            });*/

            if (view != null) {

                view.setVisibility(View.GONE);
                getMapView().removeView(view);
                getMapView().invalidate();
                flag = false;
                view = null;

            }

            view = getLayoutInflater().inflate(R.layout.balloon_overlay, null);
            LinearLayout layout = (LinearLayout) view
                    .findViewById(R.id.balloon_main_layout);
            layout.setLayoutParams(new LayoutParams(LayoutParams.WRAP_CONTENT,
                    LayoutParams.WRAP_CONTENT));
            view.setLayoutParams(new LayoutParams(LayoutParams.WRAP_CONTENT,
                    LayoutParams.WRAP_CONTENT));
            view.setBackgroundResource(R.drawable.balloon_overlay_bg_selector);
            ImageView image = (ImageView) view
                    .findViewById(R.id.balloon_disclosure);
            TextView text = (TextView) view
                    .findViewById(R.id.balloon_item_title);
            text.setText(items.get(index).getTitle());

            if (items.get(index).getTitle() != null
                    && items.get(index).getTitle().equals("Me") == false) {
                image.setImageResource(R.drawable.icone_sur_carte);
            }

            Projection projection = getMapView().getProjection();
            Point point = new Point();
            projection.toPixels(items.get(index).getPoint(), point);

            int x = (int) (view.getWidth() / 2f);
            int y = -bitMap.getHeight() - 3;

            MapView.LayoutParams lp = new MapView.LayoutParams(
                    ViewGroup.LayoutParams.WRAP_CONTENT,
                    ViewGroup.LayoutParams.WRAP_CONTENT, items.get(index)
                            .getPoint(), x, y,
                    MapView.LayoutParams.BOTTOM_CENTER);
                    getMapView().removeView(view);
                    getMapView().invalidate();
                    getMapView().addView(view, lp);
                    getMapView().invalidate();

                view.setOnClickListener(new OnClickListener() {
                    @Override
                    public void onClick(View view) {
                        if (!items.isEmpty()) {
                            if (view != null) {
                                view.setVisibility(View.GONE);
                                getMapView().invalidate();

                                System.out.println("SelectedIndex: "+selectedIndex);

                            }
                        }
                        getMapView().invalidate();
                    }
                });
                    selectedIndex = index;
                    return true;           
          }
        }

        @Override
        public boolean onTouchEvent(MotionEvent event, MapView mapView) {
            final int action = event.getAction();
            final int x = (int) event.getX();
            final int y = (int) event.getY();
            boolean result = false;

            if (action == MotionEvent.ACTION_DOWN) {
                for (OverlayItem item : items) {
                    Point p = new Point(0, 0);

                    map.getProjection().toPixels(item.getPoint(), p);

                    if (hitTest(item, marker, x - p.x, y - p.y)) {
                        result = true;
                        inDrag = item;
                        items.remove(inDrag);
                        populate();

                        xDragTouchOffset = 0;
                        yDragTouchOffset = 0;

                        setDragImagePosition(p.x, p.y);
                        dragImage.setVisibility(View.VISIBLE);

                        xDragTouchOffset = x - p.x;
                        yDragTouchOffset = y - p.y;
                        isPinch=false;
                        break;
                    }
                }

            } else if (action == MotionEvent.ACTION_MOVE && inDrag != null) {

                if (view != null) {
                    if (view.getVisibility() != 0) {
                        Log.e("touch", " out move");
                        setDragImagePosition(x, y);
                        result = true;
                        isPinch=true;
                    }else{
                        setDragImagePosition(x, y);
                        isPinch=false;
                    }
                }else{
                    setDragImagePosition(x, y);
                    result = true;
                    isPinch=true;
                }

            } else if (action == MotionEvent.ACTION_UP && inDrag != null) {
                dragImage.setVisibility(View.GONE);

                GeoPoint pt = map.getProjection().fromPixels(
                        x - xDragTouchOffset, y - yDragTouchOffset);
                OverlayItem toDrop = new OverlayItem(pt, inDrag.getTitle(),
                        inDrag.getSnippet());

                Log.e("touch", " out last" + pt.getLatitudeE6());
                items.add(toDrop);
                populate();
                inDrag = null;
                result = true;
                isPinch = false;
            }
                return (isPinch || super.onTouchEvent(event,mapView));
        }

        private void setDragImagePosition(int x, int y) {
            RelativeLayout.LayoutParams lp = (RelativeLayout.LayoutParams) dragImage.getLayoutParams();

            lp.setMargins(x - xDragImageOffset - xDragTouchOffset, y
                    - yDragImageOffset - yDragTouchOffset, 0, 0);
            dragImage.setLayoutParams(lp);
        }
    }

} 
```

当我运行此代码时，我的应用程序强制代码和我的日志显示以下错误。

```
05-25 14:18:38.125: E/AndroidRuntime(11240): FATAL EXCEPTION: main
05-25 14:18:38.125: E/AndroidRuntime(11240): java.lang.RuntimeException: Unable to start activity ComponentInfo{.TabSample}: java.lang.RuntimeException: Unable to start activity ComponentInfo{.map.Map}: java.lang.NumberFormatException
05-25 14:18:38.125: E/AndroidRuntime(11240):    at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:1651)
05-25 14:18:38.125: E/AndroidRuntime(11240):    at android.app.ActivityThread.handleLaunchActivity(ActivityThread.java:1667)
05-25 14:18:38.125: E/AndroidRuntime(11240):    at android.app.ActivityThread.access$1500(ActivityThread.java:117)
05-25 14:18:38.125: E/AndroidRuntime(11240):    at android.app.ActivityThread$H.handleMessage(ActivityThread.java:935)
05-25 14:18:38.125: E/AndroidRuntime(11240):    at android.os.Handler.dispatchMessage(Handler.java:99)
05-25 14:18:38.125: E/AndroidRuntime(11240):    at android.os.Looper.loop(Looper.java:130)
05-25 14:18:38.125: E/AndroidRuntime(11240):    at android.app.ActivityThread.main(ActivityThread.java:3687)
05-25 14:18:38.125: E/AndroidRuntime(11240):    at java.lang.reflect.Method.invokeNative(Native Method)
05-25 14:18:38.125: E/AndroidRuntime(11240):    at java.lang.reflect.Method.invoke(Method.java:507)
05-25 14:18:38.125: E/AndroidRuntime(11240):    at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:842)
05-25 14:18:38.125: E/AndroidRuntime(11240):    at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:600)
05-25 14:18:38.125: E/AndroidRuntime(11240):    at dalvik.system.NativeStart.main(Native Method)
05-25 14:18:38.125: E/AndroidRuntime(11240): Caused by: java.lang.RuntimeException: Unable to start activity ComponentInfo{.map.Map}: java.lang.NumberFormatException
05-25 14:18:38.125: E/AndroidRuntime(11240):    at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:1651)
05-25 14:18:38.125: E/AndroidRuntime(11240):    at android.app.ActivityThread.startActivityNow(ActivityThread.java:1491)
05-25 14:18:38.125: E/AndroidRuntime(11240):    at android.app.LocalActivityManager.moveToState(LocalActivityManager.java:127)
05-25 14:18:38.125: E/AndroidRuntime(11240):    at android.app.LocalActivityManager.startActivity(LocalActivityManager.java:339)
05-25 14:18:38.125: E/AndroidRuntime(11240):    at android.widget.TabHost$IntentContentStrategy.getContentView(TabHost.java:657)
05-25 14:18:38.125: E/AndroidRuntime(11240):    at android.widget.TabHost.setCurrentTab(TabHost.java:329)
05-25 14:18:38.125: E/AndroidRuntime(11240):    at .TabSample.setProximite(TabSample.java:659)
05-25 14:18:38.125: E/AndroidRuntime(11240):    at .TabSample.onCreate(TabSample.java:98)
05-25 14:18:38.125: E/AndroidRuntime(11240):    at android.app.Instrumentation.callActivityOnCreate(Instrumentation.java:1047)
05-25 14:18:38.125: E/AndroidRuntime(11240):    at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:1615)
05-25 14:18:38.125: E/AndroidRuntime(11240):    ... 11 more
05-25 14:18:38.125: E/AndroidRuntime(11240): Caused by: java.lang.NumberFormatException
05-25 14:18:38.125: E/AndroidRuntime(11240):    at org.apache.harmony.luni.util.FloatingPointParser.parseDblImpl(Native Method)
05-25 14:18:38.125: E/AndroidRuntime(11240):    at org.apache.harmony.luni.util.FloatingPointParser.parseDouble(FloatingPointParser.java:283)
05-25 14:18:38.125: E/AndroidRuntime(11240):    at java.lang.Double.parseDouble(Double.java:318)
05-25 14:18:38.125: E/AndroidRuntime(11240):    at java.lang.Double.valueOf(Double.java:356)
05-25 14:18:38.125: E/AndroidRuntime(11240):    at .map.Map$SitesOverlay.<init>(Map.java:156)
05-25 14:18:38.125: E/AndroidRuntime(11240):    at .map.Map.onCreate(Map.java:78)
05-25 14:18:38.125: E/AndroidRuntime(11240):    at android.app.Instrumentation.callActivityOnCreate(Instrumentation.java:1047)
05-25 14:18:38.125: E/AndroidRuntime(11240):    at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:1615)
05-25 14:18:38.125: E/AndroidRuntime(11240):    ... 20 more
05-25 14:23:44.253: I/Process(11240): Sending signal. PID: 11240 SIG: 9 
```

我也想知道如何在 Map.Class 中集成后台服务

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-25T10:32:19.333

如在 logcat 中：

```
at .TabSample.setProximite(TabSample.java:659) 
```

在这里你有 NumberFormatException - 可能转换 String -> Integer / Float 是错误的。最好的方法是在 Eclipse 中使用调试器，它应该允许逐步解决这个问题。

# html - 会话存储在 IE 中不起作用

> ID：16212347
> 
> 赞同：7
> 
> 时间：2013-04-25T10:28:11.690
> 
> 标签：html, session, internet-explorer-10, session-storage

我正在使用以下代码来测试 HTML 5 的会话存储。它在除 IE 之外的所有浏览器中都可以正常工作。安装的IE版本是10。

代码 ：

```
<!DOCTYPE html>
<html>
<head>
<script>
function clickCounter()
{
if(typeof(Storage)!=="undefined")
  {
  if (sessionStorage.clickcount)
    {
    sessionStorage.clickcount=Number(sessionStorage.clickcount)+1;
    }
  else
    {
    sessionStorage.clickcount=1;
    }
  document.getElementById("result").innerHTML="You have clicked the button " + sessionStorage.clickcount + " time(s) in this session.";
  }
else
  {
  document.getElementById("result").innerHTML="Sorry, your browser does not support web storage...";
  }
}
</script>
</head>
<body>
<p><button onclick="clickCounter()" type="button">Click me!</button></p>
<div id="result"></div>
<p>Click the button to see the counter increase.</p>
<p>Close the browser tab (or window), and try again, and the counter is reset.</p>
</body>
</html> 
```

可能是什么问题呢？

* * *

## 回答 #1

> 赞同：18
> 
> 时间：2013-04-26T05:02:05.233

我发现 HTML5 的本地存储和会话存储功能是，这两个功能仅在页面通过 呈现时在 Internet Explorer 中`HTTP`有效，而当您尝试在本地文件系统上访问这些功能时将无效，即，您正在尝试使用各种 URL `C:/Users/Mitaksh/Desktop`等直接从文件系统打开示例网页。

将您的应用程序部署在任何`application server`类似设备上`Tomcat`，然后访问它......然后您可以看到本地和会话存储在运行中......

# sql - 在 sql server 2012 中生成唯一的字符串

> ID：16212350
> 
> 赞同：1
> 
> 时间：2013-04-25T10:28:17.877
> 
> 标签：sql, sql-server-2012

我有一张桌子

```
CREATE TABLE #Agency 
 (
  AgencyID int PRimary KEY IDENTITY(1,1),
  AgencyName varchar(100), 
  AgencyCode varchar(50)
  ) 
```

我想在插入表格时生成一个唯一的机构代码...机构代码应该只包含字母..没有数字或特殊字符

谢谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-25T10:56:33.127

您可以做一些简单的事情，例如将您的 ID 转换为 varchar 并用字母（或组合）替换每个数字。

1=A，2=B，等等。

因此，只要您的 ID 是唯一的，代码也将是唯一的。

片段可能是这样的：

```
REPLACE(REPLACE(REPLACE(REPLACE(REPLACE(REPLACE(REPLACE(REPLACE(REPLACE(REPLACE(
    CAST(AgencyID AS VARCHAR(50))
    ,'1','A'),'2','B'),'3','C'),'4','D'),'5','E'),'6','F'),'7','G'),'8','H'),'9','I'),'0','J') 
```

如果要在插入期间执行此操作，可以使用 IDENT_CURRENT('tablename') 获取为标识列插入的值。

```
 INSERT INTO Agency (AgencyName, AgencyCode)
    SELECT 'Name001', 
              REPLACE(REPLACE(REPLACE(REPLACE(REPLACE(REPLACE(REPLACE(REPLACE(REPLACE(REPLACE(
              CAST(IDENT_CURRENT('Agency') AS VARCHAR(50))
              ,'1','A'),'2','B'),'3','C'),'4','D'),'5','E'),'6','F'),'7','G'),'8','H'),'9','I'),'0','J')

; 
```

**[SQLFiddle 演示](http://sqlfiddle.com/#!6/9002f/1)**

创建一个将您的数字转换为字符串和/或计算列的函数可能更适合使用。

**[使用函数和计算列的演示](http://sqlfiddle.com/#!6/4d2bf/2)**

编辑：

**[带有更新请求以生成至少 5 个字符串长字符的 DEMO](http://sqlfiddle.com/#!6/a177b/2)**

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-25T11:01:08.850

我建议您在应用程序中生成字符串。这样，您就可以使用比 T-SQL 更适合过程代码的语言。无论如何，最好的做法是尽可能将逻辑排除在 SQL Server 之外。

# scala - Scalaz 注入左右使用所需的最小导入

> ID：16212351
> 
> 赞同：4
> 
> 时间：2013-04-25T10:28:19.033
> 
> 标签：scala, scalaz

简单的问题，我已经看过这个问题了：[在 Scalaz7 中管理导入](https://stackoverflow.com/questions/13358213/managing-imports-in-scalaz7)，但我不知道如何将`right`and`left`方法最小地注入到我的对象中以构造`\/`.

我确实尝试过：

`import syntax.ToDataOps``To...`以及[http://eed3si9n.com/learning-scalaz-day13](http://eed3si9n.com/learning-scalaz-day13)`syntax.ToIdOps`中建议的其他变体。

简单的例子：

```
import scalaz.{\/, syntax}
import // What goes here

class Test {

    def returnEitherT(h: Int): String \/ Int = {
        h right
    }
} 
```

谢谢，杰森。

===========

我通过使用解决了它，`import syntax.id._`但我不确定为什么会这样。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-25T11:09:11.710

`syntax.id` contains syntax for "plain" values, i.e. it places no constraints on the type of the value.

In general, when you import syntax for an expression of the form `x.op`, the place to import the syntax depends on the type of `x`, because `op` needs to be a valid operation on that type.

Because `\/[A, B]` is universally quantified for A and B, using the syntax `x.left` and `x.right` places no constraints on the type of `x`. Hence, it belongs in `syntax.id`.

For a working understanding of what syntax is available where, it is worth looking at the source of some of the modules that make up the `syntax` packages. For example, contrast [`IdOps[A]`](https://github.com/scalaz/scalaz/blob/scalaz-seven/core/src/main/scala/scalaz/syntax/IdOps.scala), which has syntax for any `A`, with [`FunctorOps[F[_],A]`](https://github.com/scalaz/scalaz/blob/scalaz-seven/core/src/main/scala/scalaz/syntax/FunctorSyntax.scala), which has the requirement that `F` is a `Functor`.

* * *

I am not sure where the name `id` comes from exactly; perhaps it is related to the identity functor `Id`, which can be defined as `type Id[A] = A`. If you had to choose a type constraint for values usable with `syntax.id`, it would be that they are in `Id`. Being universally quantified in `A`, the operations can't know about the structure of a value of `A`, hence they can't be structure-altering operations on `A`.

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2015-06-17T08:47:21.213

自 scalaz 7 以来，正确的导入是：

```
import scalaz.syntax.either._ 
```

# java - 无法在两行中创建两个 TextView

> ID：16212352
> 
> 赞同：1
> 
> 时间：2013-04-25T10:28:21.307
> 
> 标签：java, android

这是一个相当外行的问题，因为我在 Android 开发方面完全是绿色的。

最近我正在尝试使用 android 实现一个简单的计算器。

我想显示两行计算器，第一行显示用户输入的方程式，底部显示答案。

这是我在布局 xml 文件中的代码：

```
<RelativeLayout xmlns:android="http://schemas.android.com/apk/res/android"
xmlns:tools="http://schemas.android.com/tools"
android:layout_width="match_parent"
android:layout_height="match_parent"
android:paddingBottom="@dimen/activity_vertical_margin"
android:paddingLeft="@dimen/activity_horizontal_margin"
android:paddingRight="@dimen/activity_horizontal_margin"
android:paddingTop="@dimen/activity_vertical_margin"
tools:context=".MainActivity" >

<LinearLayout
    android:id="@+id/linearLayout0"
    android:layout_width="match_parent"
    android:layout_height="wrap_content"
    android:layout_alignParentLeft="true">

    <TextView
        android:id="@+id/calculatorDisplay0"
        android:layout_width="match_parent"
        android:layout_height="wrap_content"
        android:gravity="right"
        android:maxLines="1"
        android:paddingLeft="10dp"
        android:paddingRight="10dp"
        android:textAppearance="?android:attr/textAppearanceLarge"
        android:textSize="40sp" />
</LinearLayout>

<LinearLayout
    android:id="@+id/linearLayout1"
    android:layout_width="match_parent"
    android:layout_height="wrap_content"
    android:layout_alignParentLeft="true"
    android:layout_alignParentTop="true" 
    android:layout_below="@+id/linearLayout0" >

    <TextView
        android:id="@+id/calculatorDisplay1"
        android:layout_width="match_parent"
        android:layout_height="wrap_content"
        android:gravity="right"
        android:layout_below="@id/calculatorDisplay0"
        android:maxLines="1"
        android:paddingLeft="10dp"
        android:paddingRight="10dp"
        android:text="0"
        android:textAppearance="?android:attr/textAppearanceLarge"
        android:textSize="40sp" />
</LinearLayout>
     .
     .
     .
     . 
```

然而，结果如下：

![在此处输入图像描述](https://i.stack.imgur.com/Ay8Ah.jpg)

如您所见，这两行嵌套在一起。

我很确定我的代码有问题，但我找不到它。有人可以帮我吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-25T10:32:23.850

没有理由为每个文本视图使用单独的线性布局 - 将它们一个接一个地放入垂直方向的布局中：

```
<LinearLayout
    android:id="@+id/linearLayout0"
    android:layout_width="match_parent"
    android:layout_height="wrap_content"
    android:orientation="vertical">

    <TextView
        android:id="@+id/calculatorDisplay0"
        android:layout_width="match_parent"
        android:layout_height="wrap_content"
        android:gravity="right"
        android:maxLines="1"
        android:paddingLeft="10dp"
        android:paddingRight="10dp"
        android:textAppearance="?android:attr/textAppearanceLarge"
        android:textSize="40sp" />

    <TextView
        android:id="@+id/calculatorDisplay1"
        android:layout_width="match_parent"
        android:layout_height="wrap_content"
        android:gravity="right"
        android:maxLines="1"
        android:paddingLeft="10dp"
        android:paddingRight="10dp"
        android:text="0"
        android:textAppearance="?android:attr/textAppearanceLarge"
        android:textSize="40sp" />
</LinearLayout> 
```

此外，您还有一些不必要的属性，我在 y 答案中删除了这些属性。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-25T10:34:24.287

而不是添加两个 LinearLayouts 添加一个带有两个 TextView 并设置`orientation`为`vertical`. 线性布局是存储“线性”内容的容器，因此一个孩子一个接一个。

```
<LinearLayout
    android:id="@+id/linearLayout0"
    android:layout_width="match_parent"
    android:layout_height="wrap_content"
    android:layout_alignParentLeft="true"
    android:orientation="vertical">

    <TextView
        android:id="@+id/calculatorDisplay0"
        android:layout_width="match_parent"
        android:layout_height="wrap_content"
        android:gravity="right"
        android:maxLines="1"
        android:paddingLeft="10dp"
        android:paddingRight="10dp"
        android:textAppearance="?android:attr/textAppearanceLarge"
        android:textSize="40sp" />

    <TextView
        android:id="@+id/calculatorDisplay1"
        android:layout_width="match_parent"
        android:layout_height="wrap_content"
        android:gravity="right"
        android:layout_below="@id/calculatorDisplay0"
        android:maxLines="1"
        android:paddingLeft="10dp"
        android:paddingRight="10dp"
        android:text="0"
        android:textAppearance="?android:attr/textAppearanceLarge"
        android:textSize="40sp" />
</LinearLayout> 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-25T11:02:45.123

```
android:layout_alignParentLeft="true"
android:layout_alignParentTop="true" 
```

这些是第二个 LinearLayout 中的属性，您已明确声明您希望第二个 TextView（LinearLayout 的内容）与顶部的内容重叠。我不确定，但我认为如果不在`layout_*`该 LinearLayout 中指定属性，您会得到相同的结果。第二次看，它的接缝`android:layout_below="@+id/linearLayout0"`属性被忽略了。无论如何，它与 冲突`layout_alignParentTop`，以后要小心。

您描述的所需行为对于具有`android:orientation="vertical"`属性的 LinearLayout 是典型的。你走在正确的轨道上。您必须更改的是在第一个 LinearLayout 中移动第二个 TextView，因此它可以看到它有两个视图来管理和添加所需`orientation`的属性，因为默认方向是水平[[1]](http://developer.android.com/reference/android/widget/LinearLayout.html)。

布局 XML：

```
<RelativeLayout xmlns:android="http://schemas.android.com/apk/res/android"
xmlns:tools="http://schemas.android.com/tools"
android:layout_width="match_parent"
android:layout_height="match_parent"
android:paddingBottom="@dimen/activity_vertical_margin"
android:paddingLeft="@dimen/activity_horizontal_margin"
android:paddingRight="@dimen/activity_horizontal_margin"
android:paddingTop="@dimen/activity_vertical_margin"
tools:context=".MainActivity" >

<LinearLayout
    android:id="@+id/linearLayout0"
    android:layout_width="match_parent"
    android:layout_height="wrap_content">

    <TextView
        android:id="@+id/calculatorDisplay0"
        android:layout_width="match_parent"
        android:layout_height="wrap_content"
        android:gravity="right"
        android:maxLines="1"
        android:paddingLeft="10dp"
        android:paddingRight="10dp"
        android:textAppearance="?android:attr/textAppearanceLarge"
        android:textSize="40sp" />

    <TextView
        android:id="@+id/calculatorDisplay1"
        android:layout_width="match_parent"
        android:layout_height="wrap_content"
        android:gravity="right"
        android:layout_below="@id/calculatorDisplay0"
        android:maxLines="1"
        android:paddingLeft="10dp"
        android:paddingRight="10dp"
        android:text="0"
        android:textAppearance="?android:attr/textAppearanceLarge"
        android:textSize="40sp" />

</LinearLayout>
     .
     .
     .
     . 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-04-25T10:36:50.897

尝试从 linearLayout1 中删除 android:layout_alignParentTop="true" 并在其顶部添加边距。

# ios - UIScrollView 在动画期间被剪辑

> ID：16212358
> 
> 赞同：0
> 
> 时间：2013-04-25T10:28:35.927
> 
> 标签：ios, uiscrollview, core-animation

我想移动我的 UISCrollView 的 ContentOffset。我正在使用不同的方法，CABasicAnimation 或 UIView animateWithDuration 但问题是，在动画期间，我的 UIScrollView 从右侧和左侧被剪裁。

动画完成后， UIScrollView 的大小似乎正确。

```
- (void)animateScrollToTheBottom {

   self.scroll.scrollEnabled = NO;

   CGFloat scrollHeight = self.scroll.contentSize.width;

   [UIView animateWithDuration:10
                         delay:0
                       options:UIViewAnimationCurveEaseInOut | UIViewAnimationOptionBeginFromCurrentState
      animations:^{

         self.scroll.contentOffset = CGPointMake(0, scrollHeight);

     } completion:^(BOOL finished) {

        self.scroll.scrollEnabled = YES;

   }];
} 
```

有什么建议么？谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-25T10:45:05.580

```
[UIView animateWithDuration:5.0f animations:^ {
    [scrollView setContentOffset:destination animated:NO];
}]; 
```

为我工作

# zend-framework - Zend Framework 查询不起作用？

> ID：16212359
> 
> 赞同：1
> 
> 时间：2013-04-25T10:28:43.367
> 
> 标签：zend-framework

Zend select 中的“SELECT”语句有问题。

```
public function listAnswers($sort_field = 'answer_id', $field = null, $value = null, $strict_filter = false, $client_id = null) {
    //here is $value
    // $value  = "abcd : <?\\?>"; 
    $value = $this->getDefaultAdapter()->quote("%".$value."%");

    if( !empty($field) && !empty($value) && $strict_filter == false){
            $select = $this->select()->where(" client_id != -99 ")->where($field . " like $value ")->order($sort_field);
    }
} 
```

错误来了，我打印的查询是

```
 SELECT `answer`.* FROM `answer` WHERE ( client_id != -99 ) AND (client_id = '1') AND (answer_text LIKE '%abcd : <?\\\\?>%' ) ORDER BY `add_date` DESC 
```

记录不来就酌情`$value`了。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-26T10:07:35.637

使用 select() 时通常不需要引用值，select() 通常会默认提供引号。使用 select() 时，最好使用占位符而不是串联，因为串联可能并不总是有效。

`$select->order()`需要一个字符串来指定查询（'answer_id ASC'），除非您总是想要默认值。

您默认设置`$field`and `$value`to `null`，因此测试 for`!empty()`确实没有语义意义。

不要忘记您必须实际获取结果并将其返回。

```
//assuming a dbTable model where $this->select() is valid.
public function listAnswers($sort_field = 'answer_id', $field = null, $value = null, $strict_filter = false, $client_id = null) {
    //here is $value
    // $value  = "abcd : <?\\?>"; 
    //unless your values are really strange select() will provide the quotes
    //$value = $this->getDefaultAdapter()->quote("%".$value."%");
    //it may help to initialize select() before the loop
    $select = $this->select();
    if( !is_null($field) && !is_null($value) && $strict_filter == false){
        $select->where(" client_id != -99 ")
            //use placeholders when using the select()
            ->where("$field like ?" $value)
            //specify order by with a string ie: answer_id ASC
            ->order($sort_field . 'ASC');
    }
    //return the result
    return $this->fetchAll($select)
} 
```

祝你好运

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-25T11:30:27.030

根据评论中的讨论，认为它只是在浏览器中显示 SQL 查询，没有显示字符串的“第 1 部分”位，因为浏览器会将`<`和`>`字符解释为 HTML 标记并隐藏它们的内容。您用于查询本身的代码看起来不错，所以只需使用：

```
echo htmlspecialchars($select);exit; 
```

用于调试以验证是否正在运行正确的查询。

# javascript - 如何使用 HTML、CSS 和/或 Javascript 显示证明树？

> ID：16212364
> 
> 赞同：6
> 
> 时间：2013-04-25T10:28:57.590
> 
> 标签：javascript, css, tree, proof

我想在网页中以自然演绎的方式显示证明树。我将从 JSON 文件中获取数据。

显示此类内容的最佳方式是什么？只有css才有可能吗？还是有一个图书馆可以做这样的事情？渲染为图像是不可能的，因为最终它应该是交互式的。我还应该提到，这棵树可以变得相当大。

例子： ![证明树](https://i.stack.imgur.com/REVAm.png)

更新：最终结果应该是什么样子的一个更好的例子： ![在此处输入图像描述](https://i.stack.imgur.com/ZKtaB.png)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-29T10:04:47.197

最简单的解决方案是[mathjax](http://www.mathjax.org/)，它是一个乳胶 javascript 渲染器。还有很多其他类似的渲染选项。

或者，您也可以查看[MathML](http://en.wikipedia.org/wiki/MathML)，这是用于编写数学方程式的 w3c 标准。可悲的是，现在，对它的支持非常缺乏，正如可以在[这里](http://caniuse.com/mathml)看到的那样，但从长远来看，这将是一个很好的解决方案。此外，前面提到的[MathJax](http://www.mathjax.org/)可以在尚不支持 MathML 的浏览器中用作[MathML 填充程序。](http://docs.mathjax.org/en/v1.1-latest/mathml.html)

[MathJax shim](http://docs.mathjax.org/en/v1.1-latest/mathml.html)唯一需要担心的是，当你让它交互时，它会在支持和不支持 MathML 的浏览器中与你的代码进行不同的交互，但尽管如此，我个人会建议 MathML，除非你已经绑定进入 LaTeX。

根据您的更新，我不确定这是否可以用 MathML 或 LaTeX 表示，我担心您唯一能做的就是在画布上绘制它，或者如果您以后需要交互性，将其设置在 SVG 中。但我可以警告你，如果你不习惯，这将不是一件简单的事情。

* * *

**为 Mathjax 添加交互性：**

1.  使用 MathML 作为输入
2.  使用 HTML/CSS 作为输出
3.  `showMathMenu:false`通过添加到您的核心 MathJax 配置来禁用 MathJax 上下文菜单
4.  在您的 MathML 标记中包含 id（`<mo id="someid">`例如字面意思）
5.  在 MathJax 完成后使用例如 jQuery 绑定到 id（即`$("#someid").on("mousemove",function(){...})`）

可以在[这里](http://jsfiddle.net/7MV4y/6/)找到一个完整的演示，移动等号以触发警报。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2016-01-24T12:51:13.640

我最近遇到了同样的事情，我设法写了一些我认为效果很好的 CSS。这是一个示例 html 骨架：

```
<div class="proof">
    <div class="prems">
        <div class="proof">
            <div class="prems">
                <div class="proof">
                    <div class="prems">
                        <div class="proof">
                            <div class="concl">
                                <div class="concl-left"></div>
                                <div class="concl-center">bla</div>
                                <div class="concl-right"></div>
                            </div>
                        </div>
                        <div class="inter-proof"></div>
                        <div class="proof">
                            <div class="concl">
                                <div class="concl-left"></div>
                                <div class="concl-center">bla</div>
                                <div class="concl-right"></div>
                            </div>
                        </div>
                    </div>
                    <div class="concl">
                        <div class="concl-left"></div>
                        <div class="concl-center">bla</div>
                        <div class="concl-right"></div>
                    </div>
                </div>
                        <div class="inter-proof"></div>
                <div class="proof">
                    <div class="concl">
                        <div class="concl-left"></div>
                        <div class="concl-center">bla</div>
                        <div class="concl-right"></div>
                    </div>
                </div>
            </div>
            <div class="concl">
                <div class="concl-left"></div>
                <div class="concl-center">bla</div>
                <div class="concl-right"></div>
            </div>
        </div>
    </div>
    <div class="concl">
        <div class="concl-left"></div>
        <div class="concl-center">blabla</div>
        <div class="concl-right"></div>
    </div>
</div> 
```

这是CSS：

```
.proof
{
    display: inline-flex;
    flex-direction: column;
}
.prems
{
    display: inline-flex;
    flex-wrap: nowrap;
    align-items: flex-end;
}
.inter-proof
{
    border-bottom: 1px solid black;
    width: 1em;
}
.concl
{
    display: inline-flex;
    margin-top: -1px;
}
.concl-left
{
    flex-grow: 1;
}
.concl-center
{
    border-top: 1px solid black;
}
.concl-right
{
    flex-grow: 1;
}
.prems > .proof:not(:first-child) > .concl > .concl-left
{
    border-bottom: 1px solid black;
}
.prems > .proof > .concl > .concl-center
{
    border-bottom: 1px solid black;
}
.prems > .proof:not(:last-child) > .concl > .concl-right
{
    border-bottom: 1px solid black;
} 
```

看到它住[在这里](https://jsfiddle.net/qujoopkt/)。我只尝试了Firefox，它可能需要对其他浏览器进行一些调整。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-05-02T13:07:40.367

所以在摆弄了很多css之后，我使用表格来获得令人满意的结果。由于布局确实是语义的一部分，我认为在这种情况下它是可以接受的。

一个小例子如下所示：

```
<table>
    <tr>
        <td>
        </td>
        <td class="rulename" rowspan="2"><div class="rulename">add</div></td></tr>
    <tr><td class="conc">conclusion</td></tr>
</table> 
```

和CSS：

```
td {
 text-align:center;
 height: 1em;
 vertical-align:bottom;
}
td.conc {
 border-top: solid 1px;
}
div.rulename {
 margin-top:-2em;
} 
```

[更大的演示](http://jsfiddle.net/vRb3P/)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2020-10-18T08:07:39.563

我试了一下（[为此](https://sano-jin.github.io/imp/imp.html)），这里是[代码](https://github.com/sano-jin/proof-tree)（仅使用纯 css 和 javascript）。[它只是绘制像这个图像](https://i.stack.imgur.com/g8UNR.png)这样的原始字符串（所以没有 LaTeX ......但我也想完成这个并且目前正在尝试）。

起点如下所示。

```
<style>
  #proof-tree {
      padding: 50px;
      overflow-x: scroll;
  }
  .node {
      display: inline-block;
      white-space: nowrap;
      margin: 0 2em;
      text-align: center;
  }
  .bar {
      width: 100%;
      height: 1px;
      background: black;
      position: relative;
  }
  .rule {
      position: absolute;
      bottom: -0.5em;
      right: -3em;
  }
</style>

<div id="proof-tree">
  <div class="node">
    <div class="antecedents">
      <div class="node">
    <div class="antecedents">
      <div class="node">
        <div class="antecedents"></div>
        <div class="bar"><div class="rule">rule1</div></div>
        <div class="consequent">foo1</div>
      </div>
      <div class="node">
        <div class="antecedents"></div>
        <div class="bar"><div class="rule">rule2</div></div>
        <div class="consequent">hoo2</div>
      </div>
    </div>
    <div class="bar"><div class="rule">rule3</div></div>
    <div class="consequent">foo3</div>
      </div>
      <div class="node">
    <div class="antecedents"></div>
    <div class="bar"><div class="rule">rule4</div></div>
    <div class="consequent">foo5</div>
      </div>
    </div>
    <div class="bar"><div class="rule">rule6</div></div>
    <div class="consequent">foo6</div>
  </div>
</div> 
```

它显示为 [这样](https://i.stack.imgur.com/0EWjM.png)。

但是，这样一来，下栏往往会太长，我对此并不满意。因此，我编写了一些 javascript 来获取节点的位置并最小化条的长度。我认为这根本不是最聪明的主意。它显然很脏......但我希望这对某人（比如我）有帮助。

另外，如果您/某人有任何其他信息，请告诉我。

# java - 如何使用 servlet 为 IE8 的新浏览器实例分离会话？

> ID：16212365
> 
> 赞同：0
> 
> 时间：2013-04-25T10:28:58.490
> 
> 标签：java, session, servlets

我面临创建新会话并同时维护前一个会话的问题。

我的代码在一个 Servlet 中。它适用于除 IE 之外的所有其他浏览器，也适用于 IE7 和更低版本，但不适用于 IE8 和 IE9。我很清楚 IE8 和 IE9 对每个新请求使用相同的会话；但我想为我的 Java EE 应用程序的每个新初始请求创建一个新会话。`HTTPSession`当会话为空时，我第一次编写了用于创建新会话的代码，并且还为新会话添加了代码。

我可以做些什么来为新会话编码更改，而不在每个页面上维护任何隐藏变量值或通过 URL 发送会话 ID？有没有其他方法可以分隔两个或多个会话？

我的 Servlet 代码快照如下所示：

```
protected void doPost(HttpServletRequest request, HttpServletResponse response) throws ServletException, IOException {
    process(request, response);
}

private void process (HttpServletRequest request, HttpServletResponse response) throws ServletException, IOException {

    String strErrorMsg = null;
    response.setContentType ( "text/html" );
    HttpSession session = null;
    Cookie cookies[] = request.getCookies();

    if (session == null) {
        ServletContext appContext = getServletContext();
        WebProcessContextBuilder builder =  WebProcessContextBuilder.getInstance();
        ProcessContext objContext = null;
        try {
            session = request.getSession(true);
            // Code for setting some initial session attributes and forwarding request 
            // to first window to display.
        }
    }

    if (session != null && session.isNew()) {
        // Code for new session to forward my request with saving session id 
        // as well as setting session attributes
    } else {
        // code for showing alert message like "Session active in another window or tab.";
    }
} 
```

使用上面的代码，当我第二次尝试加载新应用程序时，我总是收到一条错误消息。这是因为我得到的会话不等于 null 并且`session.isNew`在 IE8 和 IE9 的情况下总是错误的。在其他地方它工作正常。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-27T08:29:35.927

这看起来不对：

```
HttpSession session = null;
Cookie cookies[] = request.getCookies();

if (session == null) { 
```

session 如何在这里不为空？

我认为应该是：

```
// Try to get the session, but don't create one if there isn't one
HttpSession session = request.getSession(false);
Cookie cookies[] = request.getCookies();

if (session == null) { 
```

# javascript - 正则表达式使用 JavaScript 匹配 url

> ID：16212368
> 
> 赞同：0
> 
> 时间：2013-04-25T10:29:19.367
> 
> 标签：javascript, regex

我正在使用这个正则表达式，到目前为止它非常好......

```
var r = /((ftp|http|https):\/\/(\w+:{0,1}\w*@)?(\S+)(:[0-9]+)?(\/|\/([\w#!:.?+=&%@!\-\/]))?)/gi; 
```

但是，如果我有如下字符串...

```
 '<div>http://www.a-random-site.com/page1-blah-blah</div>Another bit of text' 
```

那么匹配的位将是......

```
http://www.a-random-site.com/page1-blah-blah</div>Another 
```

我如何更改正则表达式以考虑到有角度的支架可能会终止链接？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-25T10:39:42.807

我编辑了**saram**`regex pattern`并通过 Expresso 对其进行了测试，**它**与您的示例一起使用：

```
(?:http|ftp|https):\/\/[\w\-_]+(?:\.[\w\-_]+)+(?:[\w\-\.,@?^=%&amp;:/~\+#]*[\w\-\@?^=%&amp;/~\+#])? 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-25T11:04:48.893

我不知道是否有简单的方法来修复您的正则表达式。我只是将此代码用于网址：

```
(http|ftp|https):\/\/[\w\-_]+(\.[\w\-_]+)+([\w\-\.,@?^=%&amp;:/~\+#]*[\w\-\@?^=%&amp;/~\+#])? 
```

来源[链接](http://regexlib.com/REDetails.aspx?regexp_id=96)

[工作示例](http://jsbin.com/amebiq/1/)

# excel - 使用 DELPHI 代码从 PCL 中提取文本数据

> ID：16212372
> 
> 赞同：0
> 
> 时间：2013-04-25T10:29:27.120
> 
> 标签：excel, delphi, text, printer-control-language

我在这里寻找两件事......

1.  有没有一种方法可以读取 PCL 文件指令来读取应用于文本的格式，如粗体、斜体和字体大小等。

2.  而且我想知道如何从 PCL 文件中提取没有 PCL 指令的文本数据，是否有任何选项可以破解 pcl 文件并从中删除 PCL 指令。

    背景是，我正在尝试使用 Flexcel3 组件将创建 PCL 文件的现有 Rave 报告转换为基于 Excel 的报告，我发现很难从 PCL 文件中读取和提取数据。如果我能获得基于文本的输出，我将根据字段长度解析数据并使用 Flexcel 创建 Excel 报告，如果我能从 PCL 文件中获取格式信息，我会将这些格式应用于 Excel。需要你的建议。

谢谢

# php - 防止 Propel 插入空字符串

> ID：16212374
> 
> 赞同：3
> 
> 时间：2013-04-25T10:29:27.850
> 
> 标签：php, mysql, propel

未设置列时，如何防止 Propel ORM 插入空字符串？

```
CREATE TABLE user (  
  uid INTEGER PRIMARY KEY AUTO_INCREMENT,  
  email VARCHAR(255) NOT NULL UNIQUE,  -- No default value
  ...  
) Engine InnoDB ... ; 
```

推进允许`$user = new User(); $user->save();`。我试过设置`SQL_MODE`，但没有帮助。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-25T14:35:25.963

正确的方法是在模式中使用验证器，然后使用`validate()`代码中的方法进行检查。这是一个例子：

```
<database ...>
  <table ...>
    <!-- the "required" attribute here only sets the DB property -->
    <column name="email" type="varchar" required="true" />
    ...
    <!-- Adds the unique index in the DB (but nothing in PHP code!) -->
    <unique>
      <unique-column name="email" />
    </Unique>
    ...
    <validator column="email">
      <!-- this validator rule makes the $obj->validate() method fail on null -->
      <rule name="required" message="The email is required!" />
      <!-- this validator rule makes the $obj->validate() method fail on empty string -->
      <rule name="minLength" value="1" message="The email cannot be blank!" />
      <!-- you could add a regular expression to only match email addresses here -->
      <rule name="match" value="/regular expression/" message="Please enter a valid email address!" />
      <!-- adds a validation that the field is unique before trying to update DB -->
      <rule name="unique" message="That email address is not unique!" />
    </validator>
  </table>
</database> 
```

然后在您的`preSave()`代码中，您可以执行以下操作：

```
class User extends BaseUser {
  ...
  public function preSave(PropelPDO $con = null) {
    // does the object pass all validations?
    if (!$this->validate()) {
      $errors = array();
      // something failed, go through each failure and capture message:
      foreach ($this->getValidationFailures() as $failure) {
        $errors[] = $failure->getMessage();
      }
      // throwing an Exception will stop the save() from occurring
      throw new InvalidArgumentException(implode("||", $errors));
    }

    return true; // if you get here, go ahead and save
  }
} 
```

在您的脚本中，您会这样调用`save()`：

```
...
$user = new User();
try {
  // try to save (could fail)
  $user->save();

} catch (InvalidArgumentException $e) {
  // we have errors, split the exception message to get each one separately
  $errorMessages = preg_split(/\|\|/, $e->getMessage());
  // handle the messages however you need to
} 
```

[在 Propel 文档中](http://propelorm.org/Propel/documentation/05-validators.html)阅读有关验证器的更多信息。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-25T11:26:24.347

`email`如果未设置列，我认为您实际上想停止插入/更新。实际上有一种正确的方法可以做到这一点，那就是使用[hooks](http://propelorm.org/documentation/07-behaviors.html)。

有关示例，请参见以下代码：

```
class User extends BaseUser
{
  // rest of code ...

  public function preSave(PropelPDO $con = null)
  {
    if ( empty($this->getEmail) ) {
        return false; 
    }
    return true;
  }
} 
```

您还可以使用`preInsert()`或`preUpdate()`来更好地控制何时验证数据。

# javascript - HTML5 游戏 jump() 函数无法正常工作

> ID：16212386
> 
> 赞同：0
> 
> 时间：2013-04-25T10:29:59.340
> 
> 标签：javascript, html, animation, html5-canvas

我是帆布新手。我是一名学生，目前正在用画布开发跑步者游戏。我有事件发生时`jump()`调用的函数；`mousedown()`

```
function jump(){
    img= new Image();
    //is_jump=1;
    h.clearRect(20,430,170,250);
    img.onload= function(){
        //h.drawImage(img,mx,my,190,280,120,410,190,350);
        h.drawImage(img,mx,my,190,350);
        //mX--;
        //mY--;
    }
    img.src= "mario-Copy.png";
    h.clearRect(mx,my,190,350);
    //for(i=mx;i<130;i+=7)
    //{
    if(mx<110&&my<480){
        mx=(mx+5);
        my=(my-15);
        //setTimeout(h.drawImage(img,mx,my,190,350),100000/5);
        h.drawImage(img,mx,my,190,350);
    }else{
        mx=60;
        my=410;
    }
} 
```

问题是跳跃角色工作不正常，跳跃缓慢，前进时无法清除之前的跳跃状态图像。

所以请帮帮我，这样我的动画才能正常流畅地工作。

目标是通过点击使角色跳跃。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-26T22:53:38.880

我认为问题在于您正在清除和重绘相同的跳转功能。我要做的是创建一个单独的 draw() 和 clear() 并将它们放在一个 setinterval 中并运行。然后，你的跳转函数需要做的就是更新你的对象的位置，你可以直接通过让你的跳转（）改变被绘制的位置来完成，或者在绘制之前有一个单独的更新（）函数来编辑这些值.

# mysql - 在自动增量中从 0 开始值时出错

> ID：16212388
> 
> 赞同：0
> 
> 时间：2013-04-25T10:29:59.920
> 
> 标签：mysql

嗨，当我创建表时，我的 mysql DB 中有字段 UID，我使用 add UID int 主键 auto_increment 所以值从 1 开始。所以我删除了该字段并在不使用主键或 auto_increment 的情况下创建了另一个时间。然后我插入了 0 和现在，当我想将其设为主要并自动递增时，它不起作用。请告诉我该怎么做

```
alter table Patient add PRIMARY KEY(UID);
ERROR 1062 (23000): Duplicate entry '0' for key 'PRIMARY' 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-25T10:32:03.657

如果字段已包含重复值，则不能将其设为主键（或唯一键）。检查您的记录并确认没有重复的 UID 值。

# sql - 如何在一个字段中插入多个值？

> ID：16212393
> 
> 赞同：0
> 
> 时间：2013-04-25T10:30:06.063
> 
> 标签：sql, oracle, oracle10g

我有一个查询：

```
 INSERT
INTO I#journal
  (
    Type_,
    Mndnr,
    Obj,
    Status,
    Reason
  )
  VALUES
  (
    'PO',
    '0177',
    '000222',
    'NEW',
    '1'
  ) 
```

这个工作正常。但我想在一个字段中插入多个值而不是“1”，例如“1”、“2”、“3”

通常你会这样做：

```
INSERT
INTO I#journal
  (
    Type_,
    Mndnr,
    Obj,
    Status,
    Reason
  )
  VALUES
  (
    'PO',
    '0177',
    '000222e',
    'NEW',
    '1,2,3'
  ) 
```

但是如果值会放在那里怎么办`'1','2','3'`？

```
INSERT
INTO I#journal
  (
    Type_,
    Mndnr,
    Obj,
    Status,
    Reason
  )
  VALUES
  (
    'PO',
    '0177',
    '000222e',
    'NEW',
    '1','2','3'
  ) 
```

所以，我们**不能**改变`'1','2','3'`（由于一些自动化），但我们可以在这个字符串之前和之后添加任何东西。字段中的结果信息`Reason`应该类似于`1,2,3`

怎么做？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-25T10:40:49.037

插入值`replace(q'$'1','2','3'$', '''', '')` 单引号 ( `'`) 是转义字符。IE

```
INSERT
INTO I#journal
  (
    Type_,
    Mndnr,
    Obj,
    Status,
    Reason
  )
  VALUES
  (
    'PO',
    '0177',
    '000222',
    'NEW',
    replace(q'$'1','2','3'$', '''', '')
  ); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-25T10:43:54.243

尝试：

```
INSERT
INTO I#journal
  (
    Type_,
    Mndnr,
    Obj,
    Status,
    Reason
  )
  VALUES
  (
    'PO',
    '0177',
    '000222e',
    'NEW',
    replace(q'['1','2','3']', q'[',']', '')  ) 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-25T10:33:23.123

试试这个 **INSERT**。

```
INTO I#journal
  (
    Type_,
    Mndnr,
    Obj,
    Status,
    Reason
  )
  VALUES
  (
    'PO',
    '0177',
    '000222',
    'NEW',
    '1'
  ),(
    'PO',
    '0177',
    '000222e',
    'NEW',
    '1,2,3'
  ) 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2017-02-14T21:06:21.433

尝试这个

```
INSERT INTO I#journal
 (
   Type_,
   Mndnr,
   Obj,
   Status,
   Reason
 )
 VALUES
 (
   'PO',
   '0177',
   '000222',
   'NEW',
   '''1'',''2'',''3'''
 ) 
```

# php - 将magento联系表格数据存储在数据库中？

> ID：16212396
> 
> 赞同：3
> 
> 时间：2013-04-25T10:30:14.010
> 
> 标签：php, magento

我想将 magento 联系表单数据存储到数据库中。我基本上不知道它发布到哪个控制器？

我想发送电子邮件并将所有数据存储在我的自定义表中。

谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2014-07-10T18:04:13.057

构建自定义表后，在本地池中创建一个模块并扩展`Mage_Contacts_IndexController`. 查看我在[Magento.stackexchange.com](https://magento.stackexchange.com/questions/26438/adding-a-custom-function-to-insert-contact-forms-to-database-after-post-action-f)提交的票证。我在下面的帖子中使用的代码来自我的联系表格。只需使用正确的`$_POST`变量传递到自定义表单。

[在此处查看我的代码以及如何正确扩展它](https://magento.stackexchange.com/questions/26438/adding-a-custom-function-to-insert-contact-forms-to-database-after-post-action-f)

# jquery-ui - 在停止事件中动态更改句柄选项

> ID：16212397
> 
> 赞同：0
> 
> 时间：2013-04-25T10:30:15.377
> 
> 标签：jquery-ui

总而言之，我知道如何[`handle`](http://api.jqueryui.com/draggable/#option-handle)在 Jquery UI 中使用可拖动和可排序的。而且我还知道我们可以在 stop 事件中修改拖动项的 html 内容和 css 样式。但是我不知道是否有可能在停止事件中为拖动项动态添加句柄选择器？请查看以下代码。谢谢。

```
$( ".selector" ).draggable({
  connectToSortable : '.sortableDiv',

  stop: function( event, ui ) {
      //do nothing

  }
});

$(".sortableDiv").sortable({
  stop:function(event,ui){
    $(ui.item).prependTo(
         $('<div>drag handler</div>').addClass('draghandler'));//append elements
      //next I want to make the div.draghandler to be the drag handle .

  }
}); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-25T11:10:53.033

我找到了一种方法。只需添加句柄选项，无论选择器是否可以为其检索任何元素。如果没有找到任何元素，则没有用于拖动的句柄。否则它将起作用。请查看代码。谢谢。

```
$(".sortableDiv").sortable({
  stop:function(event,ui){
    $(ui.item).prependTo(
         $('<div>drag handler</div>').addClass('draghandler'));//append elements
      //next I want to make the div.draghandler to be the drag handle .

  },
  handle:'div.draghangler'
}); 
```

这意味着句柄选择器可以在未来的元素上工作。

# sql-server - 如果一个失败，则回滚 SSIS 数据流任务

> ID：16212398
> 
> 赞同：5
> 
> 时间：2013-04-25T10:30:18.483
> 
> 标签：sql-server, ssis

在我的 SSIS 包中，我有几个数据流任务。

SSIS 中是否有办法说明 F0101Z2 任务是否完成但 F03012Z1 无法回滚 F0101Z2 步骤中传递的内容？

![我的 SSIS 包](https://i.stack.imgur.com/iP41V.png)

任何指导将不胜感激。

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2014-07-17T06:26:14.073

`TransactionOption=Required`在包级别设置，并将所有任务配置为`TransactionOption=Supported`**（默认支持）**。他们都将加入事务，如果有任何失败，事务将被回滚。注意：首先确保MSDTC（MS Distributed Transaction Co-coordinator）在`Control Panel--->Admin tool-->Services.`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-25T10:48:12.650

只需研究这些**链接**，您将能够解决您的问题。

**[如何在 sql server 集成服务中使用事务 ssis/](http://www.mssqltips.com/sqlservertip/1585/how-to-use-transactions-in-sql-server-integration-services-ssis/)**

**[SSIS事务管理MSSQL](https://stackoverflow.com/questions/13012358/ssis-transaction-management-mssql)**

**[如何在 ssis 中进行事务回滚？](https://stackoverflow.com/questions/13626755/how-to-transaction-rollback-in-ssis)**

# iphone - 推送通知脚本错误

> ID：16212407
> 
> 赞同：0
> 
> 时间：2013-04-25T10:31:17.437
> 
> 标签：iphone, push-notification

我已经通过“ [http://www.raywenderlich.com/3525/apple-push-notification-services-tutorial-part-2](http://www.raywenderlich.com/3525/apple-push-notification-services-tutorial-part-2) ”进行推送通知。
一切都对我有用，除了**当我运行 php push.php 时，**我得到的日志是

“推送脚本已启动（开发模式）1 退出并出现致命错误：异常 'PDOException' 并带有消息 'SQLSTATE[28000] [1045] 用户访问被拒绝'pushchat'@'localhost'（使用密码：YES）'在 /Users/iphonedev/Desktop/Push Test/PushChatServer/push/push.php:83 堆栈跟踪：

# 0 /Users/iphonedev/Desktop/Push Test/PushChatServer/push/push.php(83): PDO->__construct('mysql:host=loca...', 'pushchat', 'd]682#%yI1nb3' ， 大批）

# 1 /Users/iphonedev/Desktop/Push Test/PushChatServer/push/push.php(36)：APNS_Push->__construct(Array)

# 2 {主要}

'

请-2帮助我，我花了很多时间但找不到任何解决方案。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-25T10:38:01.087

那是数据库的用户权限问题。通过浏览 PHPMyAdmin 添加用户并查看下面的屏幕截图以获取帮助。

添加`pushchat`为用户名和 `d]682#%yI1nb3`密码，在主机字段中选择 localhost，检查所有权限，然后按 go。你会摇摆不定。

![在此处输入图像描述](https://i.stack.imgur.com/FufSM.png)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-26T09:00:23.077

我通过更新文件 push_config.php 来修复它，我将 'host' => 'localhost' 替换为 'host' => 'localhost:8889'。

# java - java中的解密文件在哈希验证中失败

> ID：16212408
> 
> 赞同：0
> 
> 时间：2013-04-25T10:31:18.887
> 
> 标签：java, aes, encryption

我正在使用代码项目中的这个示例 - C# 加密实现，在 java 中

[http://www.codeproject.com/Articles/8633/File-Encryption-Decryption-with-Hash-Verification?msg=2175833#xx2175833xx](http://www.codeproject.com/Articles/8633/File-Encryption-Decryption-with-Hash-Verification?msg=2175833#xx2175833xx%20CodeProject)

解密时，文件被解密，但在用旧哈希验证当前哈希时，旧哈希的最后几个字节为零，验证失败。

我的解密 java 实现是这样的：

```
 private void mDecrypt_File(FileInputStream fin, String outFile) throws Exception {
    FileOutputStream fout = new FileOutputStream(outFile);

    byte[] iv = new byte[16];
    byte[] salt = new byte[16];
    byte[] len = new byte[8];
    byte[] FC_TAGBuffer = new byte[8];

    Cipher cipher = Cipher.getInstance(CIPHER_INSTANCE);

    DataInputStream dis = new DataInputStream(fin);

    dis.read(iv, 0, 16);
    dis.read(salt, 0, 16);

    Rfc2898DeriveBytes rfc = new Rfc2898DeriveBytes(DEFAULT_PASSWORD, salt, F_ITERATIONS);
    SecretKey key = new SecretKeySpec(rfc.getBytes(32), "AES");

    //decryption code
    cipher.init(Cipher.DECRYPT_MODE, key, new IvParameterSpec(iv));
    CipherInputStream cIn = new CipherInputStream(dis, cipher);

    cIn.read(len, 0, 8);
    long lSize = getLong(len, 0);

    cIn.read(FC_TAGBuffer, 0, 8);

    byte[] tempFC_TAGBuffer = changeByteArray(FC_TAGBuffer, 0);//new byte[8];                           

    BigInteger ulong = new BigInteger(1, tempFC_TAGBuffer);

    if (!ulong.equals(FC_TAG)) {
        Exception ex = new Exception("Tags are not equal");
        throw ex;
    }

    byte[] bytes = new byte[BUFFER_SIZE];
    //determine number of reads to process on the file                          
    long numReads = lSize / BUFFER_SIZE;
    // determine what is left of the file, after numReads                   
    long slack = (long) lSize % BUFFER_SIZE;

    int read = -1;
    int value = 0;
    int outValue = 0;

    MessageDigest md = MessageDigest.getInstance("SHA-256");
    md.reset();
    // read the buffer_sized chunks         
    for (int i = 0; i < numReads; ++i) {
        read = cIn.read(bytes, 0, bytes.length);
        fout.write(bytes, 0, read);
        md.update(bytes, 0, read);
        value += read;
        outValue += read;
    }
    // now read the slack                   
    if (slack > 0) {
        read = cIn.read(bytes, 0, (int) slack);
        fout.write(bytes, 0, read);
        md.update(bytes, 0, read);
        value += read;
        outValue += read;
    }
    fout.flush();
    fout.close();
    byte[] curHash = md.digest();

    byte[] oldHash = new byte[md.getDigestLength()];
    read = cIn.read(oldHash, 0, oldHash.length);
    if (oldHash.length != read || (!CheckByteArrays(oldHash, curHash))) {
        Exception ex = new Exception("File Corrupted!");
        throw ex;
    }
    if (outValue != lSize) {
        Exception ex = new Exception("File Sizes don't match!");
        throw ex;
    }
} 
```

此解密方法适用于 android，但不适用于简单的 java 项目。文件正在从 Java/Android 或 .NET 加密。

谢谢。

# javascript - 检查图像是否已使用 jquery 加载

> ID：16212409
> 
> 赞同：0
> 
> 时间：2013-04-25T10:31:26.617
> 
> 标签：javascript, jquery

问题 - 在运行时，我正在使用 jquery 更改/替换某些图像的 src 属性。这些图像默认是隐藏的。我想在这些图像下载并准备显示时显示这些图像，因为有些图像也可能无法下载。

```
 <img id="pic_1" width="153" height="160" border="0" 
                onmouseout="this.style.border='2px solid #FFFFFF';"
                   onmouseover="this.style.border='2px solid #4585E7';" 
                                       style="visibility: hidden;" 
                                        src="**to be replaced at run time**""> 
```

请让我知道任何解决方案如何实现这一目标。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-25T10:33:43.733

我相信你可以使用这个[`Load`事件](http://api.jquery.com/load-event/)。

就像是：

```
$('#myImage').load(function() {
  //called when image is loaded
}); 
```

[这是一个工作示例](http://jsfiddle.net/zE6Ys/)

[这是延迟加载的示例](http://jsfiddle.net/zE6Ys/1/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-25T10:35:02.520

```
$('#imgId').load(function(){
alert('Image Loaded')
}); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-25T10:38:01.410

除了 musefan 的回答之外，如果您还需要它来处理缓存的图像，那么您需要的不仅仅是`load()`

检查[https://github.com/desandro/imagesloaded](https://github.com/desandro/imagesloaded)。它是一个 jQuery 插件，当图像被加载时触发回调。它也适用于缓存的图像。

检查[jQuery 事件以](https://stackoverflow.com/q/910727/384155)获取更多信息。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-04-25T10:44:48.453

此代码将使用“预加载”类与您在网站上获得的每张图片挂钩。

```
$(function(){
    //Hide all pictures first (You could here work on some loading animations if you want)
    $("img.preload").css("display", "none");

    //When the image is loaded, show it again
    $("img.preload").load(function(){
        $(this).css("display", "block");
    });
}); 
```

# linux - 查找最大值和最小值并从文件中打印该行

> ID：16212410
> 
> 赞同：17
> 
> 时间：2013-04-25T10:31:28.367
> 
> 标签：linux, bash, shell, unix, awk

我有一个文件，第一列有数字。

```
100,red
101,blue
102,black 
```

我应该编写一个 shell 脚本，它将打印带有最大和最小数字的行。

```
max=0
cat file.txt|while read LINE
do
    fir=`echo $LINE|awk '{print $2}'`
    sec=`echo $LINE|awk '{print $3}'`
    if [ $fir -gt $max ]; then
       max=$fir
    fi
    if [ $sec -gt $max ];then
        max=$sec
    fi
done

grep $max file.txt 
```

这是我迄今为止尝试找到最大值的方法。

* * *

## 回答 #1

> 赞同：36
> 
> 时间：2015-08-22T16:19:31.177

对于最小值：

```
[bash]$ cut -f1 -d"," file_name | sort -n | head -1 
```

对于最大值：

```
[bash]$ cut -f1 -d"," file_name | sort -n | tail -1 
```

* * *

## 回答 #2

> 赞同：13
> 
> 时间：2013-04-25T10:48:49.587

或者使用 sort 和 sed

```
$ sort -n id | sed -n '1p;$p'
100 red
102 black 
```

`-n`flag - 按数字排序。

如何使用它：

```
$ a=($(sort -n id | sed -n '1s/^\([0-9]\+\).*$/\1/p;$s/^\([0-9]\+\).*$/\1/p'))
$ echo "min=${a[0]}, max=${a[1]}"
min=100, max=102 
```

* * *

## 回答 #3

> 赞同：6
> 
> 时间：2013-04-25T10:33:16.927

`awk`如果你有，你应该做所有的事情`GNU awk`：

```
$ awk -F, '{a[$1]=$0}END{asorti(a,b);print a[b[1]]"\n"a[b[NR]]}' file
100,red
102,black 
```

如果您不这样做：

```
$ awk -F, 'NR==1{s=m=$1}{a[$1]=$0;m=($1>m)?$1:m;s=($1<s)?$1:s}END{print a[s]"\n"a[m]}' file
100,red
102,black 
```

* * *

或者预排序并打印第一行和最后一行：

```
$ sort -t',' -nk1 file | awk 'NR==1;END{print}'
100,red
102,black 
```

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2013-04-25T10:47:46.337

```
[bash]$ cat log
100,red
101,blue
102,black
[bash]$ all=( $(sort log | cut -f1 -d',') )
[bash]$ echo "MIN: ${all[0]} and MAX: ${all[${#all[@]}-1]}"
MIN: 100 and MAX: 102 
```

使用排序的元素创建一个数组。第一个和最后一个元素包含最小值和最大值

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2019-12-11T09:24:30.940

在 zip CSV 文件中

# 对于最小值

`bzcat file.csv.bz2 | cut -f2 -d";" | sort -n | head -2`

# 对于最大值

`bzcat file.csv.bz2 | cut -f2 -d";" | sort -n | tail -1`

各位，

阿里

# delphi - Delphi XE4 不可变字符串

> ID：16212411
> 
> 赞同：16
> 
> 时间：2013-04-25T10:31:30.733
> 
> 标签：delphi, delphi-xe4

在适用于 iOS 平台的 Delphi XE4 中，引入了一种新的字符串类型：基于零的不可变字符串。到目前为止，Delphi 已经在写入可变字符串时进行了复制。所以问题是，这对我未来的编程意味着什么？一种字符串类型比另一种有什么优势吗？切换到新的字符串类型时我需要注意哪些陷阱（除了明显的 0 对 1 基数）？

* * *

## 回答 #1

> 赞同：17
> 
> 时间：2013-04-25T10:48:00.883

根据[Marco Cantù 的白皮书](http://www.embarcadero.com/resources/white-papers/application-development?download=102)，`string`XE4 iOS 目标中的数据类型实际上并不是一成不变的，尽管他似乎自相矛盾。

他说：

> 在新的基于 Delphi LLVM 的编译器中，有一种字符串类型，表示 Unicode 字符串 (UTF16)，并映射到 Delphi XE3 中的当前字符串类型（Windows 编译器上 UnicodeString 类型的别名）。但是，这种新的字符串类型使用了不同的内存管理模型。字符串类型仍然是引用计数的，但它是不可变的，这意味着一旦构造了字符串内容，您就无法修改它。

但他接着说：

> 换句话说，字符串现在是*基于 Unicode 的，即将成为不可变的，并且是引用计数的*。

并且：

> 然而，事情开始发生变化的地方是当您修改现有字符串时，不是通过用新值替换它（在这种情况下，您会得到一个全新的字符串），而是当您修改其中一个元素时，如以下行所示代码（以及在上一节中，我介绍了该主题）：
> 
> ```
> Str1 [3] := 'x'; 
> ```
> 
> 所有 Delphi 编译器都使用写时复制语义：如果您修改的字符串有多个引用，则首先复制它（根据需要调整所涉及的各种字符串的引用计数），然后再进行修改。
> 
> 新编译器的功能与经典编译器非常相似。它实现了写时复制机制，除非有一个对字符串的引用，在这种情况下，字符串会被原地修改。例如，考虑以下代码，它输出实际字符串的内存位置。

然后他展示了一张带有变异字符串的 iOS 设备的图片。

在[官方文档](http://docwiki.embarcadero.com/RADStudio/XE4/en/What%27s_New_in_Delphi_and_C++Builder_XE4#Differences_between_Delphi_Desktop_Compilers_and_Delphi_Mobile_Compilers)中，我们有：

> 字符串是不可变的（常量），因此您不能将字符串作为数组索引并操作字符串中的字符。如果您尝试修改字符串，Delphi 移动编译器可能会发出消息 W1068 将来可能不支持就地修改字符串 (Delphi)。您可以指定消息 x1068 是作为警告还是错误发出。在提示和警告页面中，将警告“就地修改字符串...”设置为“真”或“错误”。

所以我将所有这些解释为 iOS 编译器的 XE4 版本仍然具有可变字符串。开发人员真的不希望您再改变字符串，并告诉您字符串在移动编译器上是不可变的。但它们似乎仍然是可变的。去搞清楚！

* * *

但是，您已收到通知，在未来的版本中，该字符串可能会变为不可变。

您现在可以通过设置为将来的版本做准备

```
{$WARN IMMUTABLE_STRINGS WARN} 
```

这将使您了解更改的影响。如果您想系好安全带并停止改变字符串，您可以这样做：

```
{$WARN IMMUTABLE_STRINGS ERROR} 
```

完成此操作后，您需要转换访问单个字符串元素的代码。我怀疑你会对这样的代码如此之少感到惊讶。我刚刚编译了 600,000 行代码，只看到了 120 个警告实例。其中大部分都在第三方单位。我看到这种变化引起了轰动，但老实说，我不相信很多代码会改变字符串。在绝大多数情况下，字符串是通过连接或调用函数（如`Format`. 该代码不受此影响。

我不认为有什么大的陷阱。您可以使用`{$WARN IMMUTABLE_STRINGS ...}`让编译器引导您完成整个过程。任何改变字符串的代码都应该转换为 use `TStringBuilder`。

至于不可变的好处，我参考你[为什么 .NET 字符串是不可变的？](https://stackoverflow.com/questions/2365272/why-net-string-is-immutable)

如果您使用的是传统的 Windows 或 OSX 编译器，那么我认为没有令人信服的理由进行更改。iOS 编译器是全新的。对不可变字符串的更改已经浮动，但它可能永远不会发生。它可能只发生在移动编译器上，而不会发生在传统编译器上。现在，我会坐稳，等着看结果如何。

# rebol - 如何在 Rebol 中的特定字符处拆分字符串

> ID：16212413
> 
> 赞同：5
> 
> 时间：2013-04-25T10:31:33.557
> 
> 标签：rebol

我还没有弄清楚如何以更清洁的方式拆分字符串。

```
 ref: copy/part (find line "#") -15
 rest2: copy/part (skip (find line "#") 1) 450 
```

-15 用于前往开头，450 用于前往结尾。

这不好，因为我看重了。

什么是正确的解决方案？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-04-25T10:54:49.853

预先警告：在 Rebol 中有许多不同的方法可以实现这一点。所以你可能会得到很多不同的建议。

**首先，让我们坚持使用 FIND 的原始方法。**

当您将 FIND 与系列一起使用时，您将获得对基础系列数据的新视图，该视图位于与系列数据开头不同的偏移量处。

让我们从一些示例数据开始：

```
>> line: copy "this is foo#and here comes a long bar"
== "this is foo#and here comes a long bar" 
```

让我们`#`找到该行中的字符，并将结果称为 POS：

```
>> pos: find line "#"
== "#and here comes a long bar" 
```

如您所见，这基本上已经为您提供了拆分的第二部分（您称之为 REST2）。您只需跳过分隔符本身（然后复制结果字符串，使其独立于原始 LINE 字符串）：

```
>> rest: copy next pos
== "and here comes a long bar" 
```

为了提取初始部分，您可以使用 COPY/part 的一个不错的功能。“/part”改进（try `help copy`）的文档说：“限制到给定的长度**或位置**”（强调我的）。我们已经将这个位置作为 POS 方便。所以：

```
>> ref: copy/part line pos
== "this is foo" 
```

你去吧！完整代码：

```
pos: find line "#"
ref: copy/part line pos
rest: copy next pos 
```

**作为参考，这是一个基于 PARSE 的方法：**

```
parse line [copy ref to "#" skip copy rest to end] 
```

我会让这个保持不变，无需进一步解释。如果您想了解更多关于 PARSE 的信息，可以从REBOL/Core 用户指南（最初为 REBOL 2.3 编写，但当前 REBOL 2 和 3 版本中的基本内容基本相同）中古老的[“解析”一章](http://www.rebol.com/docs/core23/rebolcore-15.html)开始。 ）。

*最后附注：除了单项字符串`"#"`，您还可以使用`#"#"`在 Rebol 中编写的字符。*

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-06-20T19:12:33.233

使用建议

```
set [ref rest2] parse line "#" 
```

不会给你想要的。
更好地使用

```
set [ref rest2] parse/all line "#" 
```

, 因为没有 /all 的解析是 Rebol 表示法中用于解析 csv 字符串或解析 Rebol 表示法的特殊情况。
没有 /all "#" 只是添加到已经定义的空白分隔符等。
你会得到这个

== ["this" "is" "foo" "and" "here" "comes" "a" "long" "bar"]

前两个元素分配给 ref 和 rest2

# c# - 将矩形垂直堆叠到水平但保持形状

> ID：16212415
> 
> 赞同：-2
> 
> 时间：2013-04-25T10:31:51.587
> 
> 标签：c#

我的输入正确完成，我的所有矩形都垂直堆叠，每次绘制新矩形时都有不同的颜色，但我很难让输出看起来像底部图片。请任何人都可以帮助我走上正确的道路。

![矩形](https://i.stack.imgur.com/vqmTL.jpg)

```
 //List to strore all randomly generated rectangles
    List<Rectangle> rectangleCollection = new List<Rectangle>();
    //Counts the amount of time a rectangle needs to be drawn
    int count = 0;

    public static Random ran = new Random();

    void CreateRectangle()
    {
        int TallestRectangle = 0; ;

        int PrevRecY = 0;

        Graphics graphic = pictureBox1.CreateGraphics();
        SolidBrush brush;

        foreach (Rectangle rect in rectangleCollection)
        {
            if (rect.Height > TallestRectangle)
                TallestRectangle = rect.Height;
        }

        foreach (Rectangle rect in rectangleCollection)
        {
            graphic.FillRectangle(brush = new SolidBrush(Color.FromArgb(ran.Next(1, 255), ran.Next(1, 255), ran.Next(1, 255))),
                new Rectangle(rect.X + PrevRecY, (TallestRectangle - rect.Height), rect.Width, rect.Height));

            PrevRecY += rect.Width;
        }
    }

    private void button1_Click(object sender, EventArgs e)
    {
        count = int.Parse(textBox1.Text);
        for (int i = 0; i < count; i++)
        {
            GetRandomRectangle();
        }
        CreateRectangle();
    }

    void GetRandomRectangle()
    {
        Graphics graph = this.CreateGraphics();
        int x = 0;
        int y = 0;

        int width = ran.Next(20, 100);
        int height = ran.Next(30, 150);

        Rectangle rec1 = new Rectangle(x, y, width, height);
        rectangleCollection.Add(rec1);
    } 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-25T10:39:38.457

对于每个矩形，从最短到最高排序，

*   制作一个该高度的水平矩形，从所有高于该高度的矩形的左侧开始，到该高度右侧的所有矩形的右侧结束。

每当您创建一个水平矩形时，将其放置在您正在创建的矩形下方（就水平位置而言）的最高水平矩形的顶部。

# sql - 如何使用“哪里”、“拥有”和“或”来确定范围

> ID：16212422
> 
> 赞同：2
> 
> 时间：2013-04-25T10:32:12.180
> 
> 标签：sql, ruby-on-rails, activerecord

我明白这是可能的

```
scope :public_visible, where("(status = ?) OR (end_date > ?)", :published, Date.today) 
```

但我想要做的是将以下两个范围与**OR**

```
scope :succeeded, having("SUM(orders.sum) >= goal")
scope :ongoing, where("end_date >= ?", Date.today) 
```

这可能吗？以 sql 或 activerecord 方式。

感谢大家。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-30T13:08:40.063

不是一个完美的解决方案，但我最终做了

```
scope :succeeded_or_ongoing, where("id in (?) or id in (?)", Project.succeeded.map(&:id), Project.ongoing.map(&:id)) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-30T15:27:11.743

老实说，最好使用 ARel（[链接](https://stackoverflow.com/questions/2770415/what-exactly-is-arel-in-rails-3-0)）。你会有类似的东西：

```
def succeeded_or_ongoing
  where("id in (?) or id in (?)", Project.succeeded.map(&:id), Project.ongoing.map(&:id))
end 
```

然后做`Project.succeeded_or_ongoing`

# php - php数组并返回默认值？

> ID：16212430
> 
> 赞同：0
> 
> 时间：2013-04-25T10:32:34.697
> 
> 标签：php, arrays

这是我的代码：

```
<div class="search-menu">
  <div class="btn-group fc">
    <a class="btn dropdown-toggle" data-toggle="dropdown" href="#">
      <?php
        $currencies = explode(',', hana_get_opt('_cc'));
        foreach ($currencies as $currency) {
          if ($currency == get_option('woocommerce_currency')){
            echo $currency;
            break;
          }else{
            echo "Select Currency";
            break;
          }
        }
      ?>
      <span class="caret"></span>
    </a>
    <ul class="dropdown-menu currency_switcher">
      <?php
        foreach ($currencies as $currency) {
          if ($currency == get_option('woocommerce_currency'))
            echo '<li><a href="#" class="reset default" data-currencycode="' . $currency . '">' . $currency . '</a></li>';
          else
            echo '<li><a href="#" data-currencycode="' . $currency . '">' . $currency . '</a></li>';
        }
      ?>
    </ul>
  </div>
</div> 
```

效果很好，它会返回我的货币列表并相应地更新页面，我只是质疑用户是否尚未设置值我希望它说要么选择货币，要么只应用我`hana_get_opt('_cc')`数组中的第一个选项作为默认。这是html生成的代码：

```
<div class="btn-group fc">
                        <a class="btn dropdown-toggle" data-toggle="dropdown" href="#">undefined<span class="caret"></span></a>
                        <ul class="dropdown-menu currency_switcher">
  <li><a href="#" class="reset default active" data-currencycode="SEK">SEK</a></li>
  <li><a href="#" data-currencycode="EUR">EUR</a></li>                                
                        </ul>
                    </div> 
```

我不是 php 编码器，非常感谢克里斯提供的任何帮助

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-25T10:38:13.573

```
 if(get_option('woocommerce_currency')==' ')
    {
        $currencies = explode(',', hana_get_opt('_cc'));
          foreach ($currencies as $currency) 
                {

                 if $currency == get_option('woocommerce_currency'){
                     {
                     echo $currency;
                     break;
                       }
                              else{
                                        echo "Select Currency";
                                        break;
                                    }
                 }
    }

    else
    {   
      echo "Select Currency";
       $currencies = explode(',', hana_get_opt('_cc'));
     $currency=$currencies [0];
    } 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-30T06:22:24.123

基于如果没有选择货币`get_option('woocommerce_currency')`将返回的假设`null`

```
<div class="search-menu">
<div class="btn-group fc">
<a class="btn dropdown-toggle" data-toggle="dropdown" href="#">
  <?php
    $currencies = explode(',', hana_get_opt('_cc'));
    $currentCurrency = get_option('woocommerce_currency')
    if ($currentCurrency === false) {
        echo "select currency";
    }
    else{
        echo $currentCurrency;
    }
  ?>
  <span class="caret"></span>
</a>
<ul class="dropdown-menu currency_switcher">
  <?php
    foreach ($currencies as $currency) {
      if ($currency == $currentCurrency)
        echo '<li><a href="#" class="reset default" data-currencycode="' . $currency . '">' . $currency . '</a></li>';
      else
        echo '<li><a href="#" data-currencycode="' . $currency . '">' . $currency . '</a></li>';
    }
  ?>
</ul> 
```

`if ( $currentCurrency != null )`用任何适用的内容替换 if 子句，如果`get_option('woocommerce_currency')`返回任何其他内容，就`null`好像尚未设置

# css - 是否可以仅使用 CSS 创建一个指向下方的按钮（包括图像）？

> ID：16212437
> 
> 赞同：5
> 
> 时间：2013-04-25T10:32:53.773
> 
> 标签：css

我想只使用 CSS 来创建它。这可能吗？如果是这样，你们能帮帮我吗？

![在此处输入图像描述](https://i.stack.imgur.com/ffdU2.png)

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-04-25T10:52:36.787

使用边框和伪元素相当容易：

```
<a href="#" id="button">ALL</a>

#button::after {
    content: "";
    border: 64px solid transparent;
    border-top: 12px solid orange;
    position: absolute;
    top: 29px;
    left: 0;
} 
```

[演示](http://jsfiddle.net/QbRUX/1/)

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-04-25T10:52:20.100

尝试使用这个基本按钮：

```
.btn {
    width: 100px;
    height: 30px;
    text-align: center;
    border: 0;
}
.btn-arrow {
    position: relative;
    background: coral;
}
.btn-arrow:after {
    border: solid transparent;
    content:"";
    position: absolute;
    border-top-color: coral;
    border-width: 16px 50px;
    left: 0px;
    top: 100%;
    margin-top: 0px;
} 
```

[http://jsfiddle.net/dfsq/tNjCb/1/](http://jsfiddle.net/dfsq/tNjCb/1/)

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-04-25T10:52:46.643

像下面这样的东西怎么样：

[http://jsfiddle.net/WDCu3/](http://jsfiddle.net/WDCu3/)

```
<div id="test">Testing</div>
<div id="arrow"></div>

#test {background-color:red; width:100px;}
div {text-align:center;}

#arrow {
    border-top: 15px solid red;
    border-left: 50px solid transparent;
    border-right: 50px solid transparent;
    height: 0;
    width:0;
} 
```

# php - 在 PHP 标头重定向后提供反馈

> ID：16212443
> 
> 赞同：0
> 
> 时间：2013-04-25T10:32:59.900
> 
> 标签：php, javascript, jquery, html, forms

我在用 javascript（和 jquery）和 php 编写的应用程序中有一个 html 表。表的内容存储在 MySql 表中。

当我希望用户向表中添加一些数据时，他们单击一个按钮并显示一个 jquery ui 对话框，其中包含一个供用户填写的表单。

当用户填写表单时，点击保存，表单被提交到一个纯php的页面，将数据保存到表格中，然后重定向到原来的页面打开表格，使用

```
$url = BASE_URL . '/admin/pages/finance/pricing/pricing_schedule.php';

header('Location: '.$url);      //Redirect to the right page

exit(); 
```

我这样做是因为我不想要这样的信息：

确认重新提交表单 - 您正在查找的页面使用了您输入的信息。返回页面可能会导致您重复执行的任何操作。你想继续吗？

显示用户是否出于任何原因点击刷新。

但是，由于我这样做的方式，如果保存不成功，我正在努力提供一种向用户提供反馈的方法。

当用户在 jquery ui 对话框中点击保存时，提交表单时该框已关闭，因此我无法在那里提供反馈，因为尚未发生错误。

当我们在 php 页面中时，一旦我们重定向回原始页面并打开表格，任何拾取的错误都会丢失。

任何人都可以提供任何建议吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-25T17:19:40.053

您可以将任何错误存储在`$_SESSION`变量中并在重定向页面上打印出来。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-25T10:41:45.213

一个简单的 GET 参数怎么样？

类似的东西：

```
header('Location: ' . $url . '?success=false&reason=blah'); 
```

在那个页面上`$url`，您首先要查找 的值`$_GET['success']`。如果不是`"success"`，则回显附加的 HTML，说明它不成功。

```
if ($_GET['success'] == "true") {
    echo "<p>SUCCESS!</p>";
    ..
} else {
    echo "<p>FAILED!</p>";
    ..
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-25T10:41:46.673

考虑通过 AJAX 提交表单以避免页面刷新。

查看本教程： http: [//net.tutsplus.com/tutorials/javascript-ajax/submit-a-form-without-page-refresh-using-jquery/](http://net.tutsplus.com/tutorials/javascript-ajax/submit-a-form-without-page-refresh-using-jquery/)

**解决方案（未测试）**

**jQuery代码：**

```
var form_data = $('#save_period_form').serialize(); alert(form_data);
$.ajax({
type: "POST",
url: "period_submit.php",
data: form_data,
dataType: 'html',
success: function(returninfo) {
  if(returninfo=='1'){
     alert('finish');
     //will redirect to pricing schedule page after the user has pressed 'ok' on the alert popup.
     window.location.assign('/admin/pages/finance/pricing/pricing_schedule.php');
 } else {
    alert('error occured');
 }
} 
}); 
```

**PHP代码：**

```
//Commented header redirection code because it's being done in the javascript code now.
//$url = BASE_URL . '/admin/pages/finance/pricing/pricing_schedule.php';

//header('Location: '.$url);      //Redirect to the right page

//Assuming your save has been successful, we echo value '1'. Else echo something else..
echo '1';
exit(); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-04-25T10:51:06.090

另一个想法是通过 url 中的哈希传输消息：

```
if (isset($_POST['submit'])) {
    ...
    header("Location: ".$_SERVER["REQUEST_URI"]."#".urlencode($msg));
    ...
} 
```

# javascript - Firefox 为事件对象提供错误

> ID：16212444
> 
> 赞同：1
> 
> 时间：2013-04-25T10:33:00.973
> 
> 标签：javascript, jquery, firefox, event-handling

此代码在 chrome 上运行良好，但不适用于 IE 或 Firefox。

```
$('.modal').on("click", ".action", function() {
    if($(event.target).hasClass('added')) {
        if($(event.target).hasClass('remove_vehicle')) {
           //code
        } 
```

我在 Firefox 控制台上收到此错误：

```
ReferenceError: event is not defined
[Break On This Error]   

if($(event.target).hasClass('added')) { 
```

这里有什么问题？两者`event.trigger`都`hasClass`应该在 Firefox 上工作。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-04-25T10:34:55.903

尝试这个 -

```
$('.modal').on("click", ".action", function(event) { // see the difference in this line 
    if($(event.target).hasClass('added')) {
        if($(event.target).hasClass('remove_vehicle')) {
           //code
        } 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-25T10:37:06.187

您可以使用`this`而不是`event.target`. 事实上`event`，它是一个保留变量，可能在某些浏览器上定义，但在其他浏览器上却没有。正确的做法是这样的：

```
$('.modal').on('click', '.action', function() {
    if ($(this).hasClass('added') && $(this).hasClass('remove_vehicle')) {  
        //code
    }
}); 
```

# sql-server - SQL Server - 在同一事务内选择表中插入的行

> ID：16212447
> 
> 赞同：2
> 
> 时间：2013-04-25T10:33:12.143
> 
> 标签：sql-server, transactions

我需要确认一个“棘手”的问题。我在一个事务中，我在表中插入一些行。之后，查询同一个表，并根据结果，我插入另一个表。

我的问题是：在第二个表中插入时，第一个表中插入的行是否可见？（我需要插入的行可见）。

我的第一个插入是：

```
INSERT INTO BioUsers Select NewId(),A.BadgeNr,GetDate(),A.PersNr
        FROM (
            SELECT CB.Persnr,C.BadgeNr FROM CurBioDistribution CB 
                INNER JOIN CUR C ON C.PersNr = CB.PersNr 
                WHERE 
                    CB.[Type] = 1 
                    AND CB.GroupNr = @Nr 
                    AND CB.PersNr IN (SELECT PersNr FROM CurBioDistribution WHERE GroupNr = @Nr) 
                    EXCEPT (SELECT PersNr, BadgeId as BadgeNr FROM BioUsers)
            ) A 
```

我想将所有 BioUserID 插入另一个表的第一个表中，该表包含字段`BioUserID`，但前提是它们尚未在其中。所以当从第一个中选择时，我也想得到插入的行。

PS：我搜索了这个问题，但是当涉及多个事务（来自不同的客户端）时，我只能找到有关此问题的答案。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-25T11:34:31.973

如果两个插入都在同一个事务中，那么是的。如果不是，那么您将处于您所描述的多用户场景中。多用户实际上是误导，多交易会更正确。

# c - 在 Eclipse C/C++ 中绘制 2d 3d 的插件

> ID：16212449
> 
> 赞同：0
> 
> 时间：2013-04-25T10:33:16.687
> 
> 标签：c, eclipse, eclipse-plugin, plot, eclipse-cdt

好吧，我想将我的 arduino 串行端口中的数据绘制为 2d 和 3d，但我找不到任何 Eclipse 插件可以在内部进行。有吗？还有其他程序可以在不使用需要许可等的 Matlab 的情况下轻松完成吗？

# mpi - 为什么即使缓冲区不足以容纳所有消息，MPI_Bsend 也不返回错误

> ID：16212451
> 
> 赞同：0
> 
> 时间：2013-04-25T10:33:17.260
> 
> 标签：mpi

我正在尝试使用 MPI 实现逻辑环；其中每个进程从 id 小于当前进程的进程接收消息，并以循环方式转发到下一个进程。我的目标是传输缓冲区，使其丢失一些消息或者可能使它们无序。
当根节点发送的消息再次返回根节点时，一个通信周期就结束了。
这是我尝试过的代码：我只是包括它的相关部分。

```
if(procId!=root)
{
    sleep(100);
    while(1)
    {
        tm = MPI_Wtime();
        MPI_Irecv( &message, STR_LEN, MPI_CHAR,
                ((procId-1)>=0?(procId-1):(numProc-1)),RETURN_DATA_TAG,
                MPI_COMM_WORLD,&receiveRequest);

        MPI_Wait(&receiveRequest,&status);
        printf("%d: Received\n",procId);

        if(!strncmp(message,"STOP",4)&&(procId==(numProc-1)))
            break;

        MPI_Ssend( message, STR_LEN, MPI_CHAR,
                (procId+1)%numProc, SEND_DATA_TAG, MPI_COMM_WORLD);
        if(!strncmp(message,"STOP",4))
            break;
        printf("%d: Sent\n",procId);
    }
}
else
{
    for(iter=0;iter<benchmarkSize;iter++)
    {
        //Synthesize the message
        message[STR_LEN-1] = '\0';
        iErr = MPI_Bsend( message, STR_LEN, MPI_CHAR,
                (root+1)%numProc, SEND_DATA_TAG, MPI_COMM_WORLD);
        if (iErr != MPI_SUCCESS) {
            char error_string[BUFSIZ];
            int length_of_error_string;
            MPI_Error_string(iErr, error_string, &length_of_error_string);
            fprintf(stderr, "%3d: %s\n", procId, error_string);
        }

        tm = MPI_Wtime();
        while(((MPI_Wtime()-tm)*1000)<delay);
        printf("Root: Sending\n");
    }
    for(iter=0;iter<benchmarkSize;iter++)
    {
        MPI_Recv(message,STR_LEN,MPI_CHAR,
                (numProc-1),RETURN_DATA_TAG,MPI_COMM_WORLD,&status);

        //We should not wait for the messages to be received but wait for certain amount of time

        //Extract the fields in the message
        if(((prevRcvdSeqNum+1)!=atoi(seqNum))&&(prevRcvdSeqNum!=0))
            outOfOrderMsgs++;
        prevRcvdSeqNum = atoi(seqNum);
        printf("Seq Num: %d\n",atoi(seqNum));
        rcvdMsgs++;
        printf("Root: Receiving\n");
    }
    MPI_Isend( "STOP", 4, MPI_CHAR,
            (root+1)%numProc, SEND_DATA_TAG, MPI_COMM_WORLD,&sendRequest);
    MPI_Wait(&sendRequest,&status);

    /*This is to ask all other processes to terminate, when the work is done*/
} 
```

现在，我有这些问题： 1）为什么当我在环的其他进程（我的意思是根以外的进程）中注入一些睡眠时；没有接收发生？
2）即使缓冲区大小只有1，根节点如何能够通过MPI_Bsend发送消息而不会出错？例如，当它需要以每秒 1000 条的速率发送总共 10 条消息并且缓冲区大小为 1 时。MPI_Bsend 能够发送所有消息而不会出现“缓冲区已满”的任何错误；不管环的其他进程中是否存在 sleep() ！万分感谢！

# php - 带有 PHP 的 Cherokee Web 服务器无法连接到 MSSQL

> ID：16212456
> 
> 赞同：1
> 
> 时间：2013-04-25T10:33:36.037
> 
> 标签：php, sql-server, webserver, cherokee

我有一个 Cherokee Web 服务器，我需要使用 PHP 和 SQL Server 数据库。我已经安装了 Freetds 和 php5-sybase。

问题是 Cherokee 不加载 mssql.so 模块。它加载它具有 odbc.so、pdo.so、pdo_dblib.so、pdo_odbc.so、suhosin.so 但没有 mssql.so 的所有其他模块。

我尝试连接 php cli，它连接好了。我试图在另一个端口上安装一个 apache，并且也可以正常工作并连接到 SQL Server。

Cherokee 总是在 cherokee.error 日志中返回“Call to undefined function mssql_connect()”，这是因为该模块尚未加载。phpinfo() 不显示任何 mssql 模块加载。

如果有切诺基经验的人可以帮助我，我将非常感激。我想以某种方式我可以手动将模块添加到 Cherokee。

干杯。

# html - H2 标签的这种用法正确吗？

> ID：16212457
> 
> 赞同：0
> 
> 时间：2013-04-25T10:33:39.427
> 
> 标签：html

我以这种方式使用 h2 标签。H2 标签的这种用法正确吗？

```
<h2><a href="#w" style="margin-left:20px;">What is this?</a></h2>
<h2><a href="#h" style="margin-left:20px;">How much does it cost?</a></h2>

<p class="title-faq"><h2>What is this?</h2></p> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-25T10:35:36.980

在正文中使用表示“标题”的标签是不合适的。标签是逻辑标签；它们的使用赋予了所附文本的意义——即，文本是一个节标题。

尽管您可以使用 display: inline 属性，但请考虑使用更合适的标签，甚至是标签。

除此之外，为了回答您的问题， h2 是块级元素。使其成为内联级别元素将使其行为类似于您描述 b 标记的行为

[**看这里**](https://stackoverflow.com/questions/4675985/how-to-use-an-h2-tag-h2-inside-a-p-p-in-the-middle-of-a-text)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-25T11:04:28.213

不是。当你连续有两个相同级别的标题时，第一个标题是什么？

在标题内使用链接在技术上是允许的，但可用性较差。标题通常是链接的目标，而不是可点击的。

嵌套`h2`在里面`p`甚至在语法上都不是有效的，或者是不可能的：`</p>`当一个`p`元素打开并且`<h2>`遇到一个标签时，浏览器意味着关闭。

使用内联样式（如这里的属性）对可维护性和可修改性也不利`style`。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-25T10:38:33.457

前两个没问题，你把H2标签放在A标签外面。但是，P 标记表示一段文本，因此您应该将标题标记放在此 P 标记之前。

# ruby-on-rails - AngularJS 和 Rails - 分离的应用程序/部署或一个应用程序？

> ID：16212468
> 
> 赞同：0
> 
> 时间：2013-04-25T10:34:13.947
> 
> 标签：ruby-on-rails, deployment, angularjs

互联网上大多数关于 rails 和 angular 的资源/示例只是将它们放在一起。AngularJS 进入 app/assets 下的 rails 内部。这对我来说感觉很脏。这是个好主意吗？如果我们决定在某个时候不使用 rails 并且我们转向，我不知道，sinatra 怎么办？移植有多难？

单个 Rails 应用程序的优缺点是什么，两个独立的应用程序的优缺点是什么？

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-25T14:09:09.193

即使将 Angular（或任何其他客户端 MV* 框架）放在 Rails 应用程序中，您也几乎可以保持关注点分离的完整性。也就是说，您有一个提供 JSON（或类似）数据的 Rails API，以及一个使用该数据呈现适当视图的单独 Javascript 框架。如果您曾经想使用不同的服务器端 API，您可以这样做，并且仍然按原样使用您的整个 Javascript 目录。

将客户端框架放在 Rails 中只是为了方便。它带有一个有组织的目录结构和服务您的 HTML 的能力，当涉及到您的视图时，这基本上就是您使用它的全部。但同样，这些视图并没有真正与 Rails 绑定，因为它们只是 HTML 和 Javascript，因此您可以在必要时轻松地将它们移动到不同的平台。

# android - 将字符串从 Activity 发送到另一个 Activity 的 Fragment

> ID：16212469
> 
> 赞同：4
> 
> 时间：2013-04-25T10:34:17.643
> 
> 标签：android, android-intent, android-fragments, android-activity

我有两个活动（A 和 B）和一个片段 F 片段 F 包含在活动 B 中 我想将字符串从活动 A 发送到片段 F 怎么做？谢谢！

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-04-25T10:42:45.863

这与您在活动之间交换数据几乎相同。您应该只在开始时使用 getActivity() 以便在片段中访问。

检查以下代码：

> **在活动 A 中：**

```
Intent intent = new Intent(this,ActivityB.class);
intent.putExtra("data",data); //data is a string variable holding some value.
startActivity(intent); 
```

> **在活动 B 的片段 F 中**

```
String data = getActivity().getIntent().getStringExtra("data"); 
```

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2013-04-25T10:42:53.310

首先，您实际上会将该字符串发送到您的活动 B。例如：

```
Intent intent = new Intent(this, YourActivityClass.class);
intent.putExtra("myString", "this is your string");
startActivity(intent); 
```

然后稍后从您的活动 B 中读取该字符串并在执行片段事务之前注入您的片段。例如：

```
Bundle args = new Bundle();
args.putString("myString", getIntent().getExtras().getString("myString"))
yourFragment.setArguments(args); 
```

稍后，`getArguments()`在您的片段中使用来检索该捆绑包。

* * *

或者，在您的片段中使用以下内容直接访问活动意图并获取您所需的值：

```
String str = getActivity().getIntent().getStringExtra("myString"); 
```

有关更多信息，请阅读[此](http://developer.android.com/training/basics/fragments/communicating.html)。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2016-04-09T13:52:05.327

在 Fragment.java 文件中添加以下代码，

```
public static String name= null;

public void setName(String string){
name = string;
} 
```

在要发送字符串的 MainActivity.java 中添加以下代码，

```
String stringYouWantToSend;

Fragment fragment =  new Fragment();
fragment.setName(stringYouWantToSend); 
```

# c# - 数据绑定网格上的排序问题

> ID：16212470
> 
> 赞同：1
> 
> 时间：2013-04-25T10:34:18.430
> 
> 标签：c#, winforms, datagridview

我的 DatagridView 绑定到一个数据表，在将我的 datagridview 绑定到数据表后，我在 0 索引处向我的数据表添加了一个新行，该行将作为 GrandTotals 行，该行被冻结，这工作正常，除非用户点击对网格进行排序的列标题之一，我的顶部总计行被排序，并且由于排序操作，另一行显示为总计行，我发现当网格绑定到数据表时，我无法访问网格的 sortcompare 事件，当用户单击列标题时，我还尝试复制我的顶行，以便我可以将其添加回 Sorted 事件（此事件正在触发）但 ColumnHeaderMouseClick 事件未触发。

关于这种情况的任何建议，我的目标是让我的总计排在首位。

# eclipse - Eclipse Juno 的 JSP 编辑器

> ID：16212473
> 
> 赞同：2
> 
> 时间：2013-04-25T10:34:31.910
> 
> 标签：eclipse, jsp, syntax-highlighting, eclipse-juno

我最近安装了 Eclipse Juno，发现 JSP 文件没有正确突出显示代码。一切看起来都好像是一个普通的文本文件。

以前版本的 eclipse 曾经很好。我错过了什么吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-25T12:53:59.057

尝试`Right-Click`.jsp 文件并选择`Open With`> `JSP Editor`。

这应该可以解决问题。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-30T09:51:38.973

这是因为 Eclipse 不知道你喜欢用什么 JDK。

1.  右键单击项目，选择`Configure`-> 将项目转换为`Faceted Project`.
2.  转到 Project `Properties`->`Project Facets`并检查`Java`您选择的版本。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-10-10T14:42:40.843

如果您安装了 Juno EE，它应该支持 .jsp 编辑器。

最有可能的是，您的 Eclipse 是使用小于 v1.6 的 java“启动”（对我来说也是如此，我安装了 1.3、1.5、1.6 javas；默认为 1.5，Eclipse 自动启动）

我用以下方式解决了同样的问题：

**1)**右键单击​​ Juno**快捷方式**，然后单击**属性**

**2)**在**“目标”字段中**

您应该已经拥有如下内容：

“D:\程序安装\eclipse-jee-juno-SR2-win32\eclipse\eclipse.exe”

**在该行的末尾添加**一个如下命令（向 Eclipse 显示它应该从哪个 java 版本开始）

**-vm "C:\Program Files\Java\jdk1.6.0_20\bin\java.exe"**

我的目标如下所示：

**"D:\PROGRAM INSTALL\eclipse-jee-juno-SR2-win32\eclipse\eclipse.exe" -vm "C:\Program Files\Java\jdk1.6.0_20\bin\java.exe"**

**3)**使用您的快捷方式以更改的目标启动 Eclipse

**4)**在 .jsp 文件上，您现在可以选择“Open with --> JSP Editor”

# c++ - 使用命名空间和标头

> ID：16212474
> 
> 赞同：0
> 
> 时间：2013-04-25T10:34:36.680
> 
> 标签：c++, c++98

我正在做一个项目，我在头文件中编写了几乎所有的测试代码。我这样做主要是因为我正在做测试驱动的开发，这导致我添加的每个类都有大量的互补类：接口、测试、模拟等。我想如果我也必须处理的话我会发疯的使用所有这些文件的 cpp 版本...

我没有在标题的开头添加“使用命名空间 std”，因为我知道这是一个不，不。无论如何，假设我目前在测试开始时初始化我的 Blob 对象，如下所示：

```
Blob v =
    boost::assign::list_of(std::pair<std::string, Container >("Scotland",Container(boost::assign::list_of(1)(2)(3).convert_to_container<std::vector<int> >())))
    (std::pair<std::string, Container >("Sweden",Container())); 
```

其中 Blob 在`typedef`某处被编辑为`std::vector<std::pair<std::string, Container > >`.

我怎样才能让这个更漂亮？我使用 list_of 的原因是为了使内容更具可读性，但在这种情况下，我认为它使阅读变得更加困难。这好多了：

```
Blob v =
    list_of(pair<string, Container >("Scotland",Container(list_of(1)(2)(3).convert_to_container<vector<int> >())))
    (pair<string, Container >("Sweden",Container())); 
```

但我不能在标题中这样做......

我可以做些什么来解决这个问题？我正在使用 C++98。

**更新：**

只是一个想法。如果我将所有测试头文件重命名为 cpp 文件会怎样？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-25T10:54:59.167

TDD 需要较短的编辑->编译->运行周期时间。因此，您应该在 cpp 文件中编写尽可能多的代码以减少编译时间。不过，您可以使用 init 函数解决您的问题：

```
inline Blob InitBlob()
{
    using namespace boost;
    using namespace std;
    return assign::list_of(/*...*/);
}

Blob v = InitBlob(); 
```

# html - SoundCloud 内嵌曲目：曲目播放结束后如何刷新页面？

> ID：16212475
> 
> 赞同：0
> 
> 时间：2013-04-25T10:34:36.897
> 
> 标签：html, widget, embed, embedded-resource, soundcloud

首先，我是个菜鸟。

好的，所以我在我的网页中嵌入了 SoundCloud 曲目。我的问题是，当曲目结束时，您如何刷新页面（或执行其他操作）？

你能用 getDuration 来做吗（我在 SoundCloud API 页面上找到了）？

我试着给它编码。在代码中，我尝试获取曲目的持续时间，然后将其打印在屏幕/网页上。这段代码有什么问题？

```
<script src="https://w.soundcloud.com/player/api.js" type="text/javascript"></script>
<span id="headerLeft-content">
    <script type="text/javascript">
        var duration = 0;
        (function(){
              var widgetIframe = document.getElementById('sc-widget'),
              widget = SC.Widget(widgetIframe);
              widget.bind(SC.Widget.Events.READY, function() {
                widget.getDuration(function(val) {
                  duration = val;
                });
              });
        }());

        document.write(duration);
    </script>
</span> 
```

如果这行得通，我会放一些类似等待（持续时间）的东西，然后刷新......

换句话说，即使原始小部件不支持循环，soundcloud 嵌入式轨道是否可以被“破解”以循环（或在轨道结束后刷新页面，这就是我想要做的）？

请查看我找到 getDuration 命令的 SoundCloud html5 小部件页面，看看您是否可以帮助我... => [http://developers.soundcloud.com/docs/api/html5-widget#getters](http://developers.soundcloud.com/docs/api/html5-widget#getters)

编辑：

```
<script>
var html=<iframe blablabla...></iframe>
document.write(html);
</script>

<script src="https://w.soundcloud.com/player/api.js" type="text/javascript"></script>
<script type="text/javascript">
  (function(){
    var widgetIframe = document.getElementById('sc-widget'),
        widget       = SC.Widget(widgetIframe),
    widget.bind(SC.Widget.FINISH, function() {
          window.location.reload(false);
    });
  }());
</script> 
```

曲目结束后页面不刷新。你能看出有什么问题吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-26T03:45:37.943

您可以将函数绑定到[此处记录](http://developers.soundcloud.com/docs/api/html5-widget#events)`SC.Widget.FINISH`的事件。以下代码片段应该可以工作：

```
widget.bind(SC.Widget.FINISH, function() {
    window.location.reload(false);
}); 
```

当然，如果您只想让小部件循环，您可以使用`seekTo`and`play`方法：

```
widget.bind(SC.Widget.FINISH, function() {
    // again, again!
    widget.seekTo(0);
    widget.play();
}); 
```

这将比页面刷新更少干扰。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-05-26T13:49:24.337

```
widget.bind(SC.Widget.Event.FINISH, function() {
    widget.seekTo(0);
    widget.play();
}); 
```

在另一个回复中，第一个参数缺少“.Event”。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2017-03-06T01:30:19.677

**最后。**一个真正有效的版本。

```
var widgetIframe = document.getElementById("soundcloud"),
    widget       = SC.Widget(widgetIframe);

widget.bind(SC.Widget.Events.FINISH, function() {
    widget.play();
}); 
```

# java - 阶乘迭代java

> ID：16212476
> 
> 赞同：-4
> 
> 时间：2013-04-25T10:34:44.300
> 
> 标签：java, iteration, factorial

po有人可以向我解释这段代码吗？它是使用迭代的幂函数

```
 public static int iterate(int a, int n) 
{
    int i ;
    int result = 1 ;

    for(i = 0 ; i < n ; i++){
        result = result*a ;              
    }
    return result ;

} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-25T10:38:32.923

它有助于了解阶乘的定义：

```
0! = 1
1! = 1
2! = 2*1 = 2
3! = 3*2*1 = 6
4! = 4*3*2*1 = 24
n! = n*(n-1)*(n-2)*...*2*1 
```

看到图案了吗？

1.  从结果开始 = 1
2.  循环并乘以索引
3.  返回结果

您发布的内容在我看来更像`a^n = a*a*a...*a`，而不是阶乘。

# c# - 如何获取字符串的中间部分？

> ID：16212478
> 
> 赞同：4
> 
> 时间：2013-04-25T10:34:46.047
> 
> 标签：c#

我有一个字符串如下

```
var input= "dbo.xyx.v1.UserDefinedFunction"; 
```

所需的输出将是“xyx.v1”；

我的尝试是

```
var input = "dbo.xyx.v1.UserDefinedFunction";
var intermediate = input.Split('.').Skip(1);
var res = intermediate.Reverse().Skip(1).Aggregate((a, b) => b + "." + a); 
```

工作正常..但是任何其他适当和优雅的方法？

请注意，它可以是任何部分（在示例中我只展示了 4 个部分）

例如输入：“dbo.part1.part2.part3.part4.UserDefinedFunction” 输出：“part1.part2.part3.part4”

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-25T10:45:55.990

这总是返回字符串的中间部分，可以是一个或两个部分（根据总零件号）。

```
var input = "dbo.xyx.v1.UserDefinedFunction";
string[] tokens = input.Split('.');
int midIndex = (tokens.Length - 1) / 2;
IEnumerable<int> midIndices = midIndex % 2 == 0
    ? new[] { midIndex }
    : new[] { midIndex, midIndex + 1 };
string mid  = string.Join(".", tokens.Where((t, i) => midIndices.Contains(i))); 
```

[**演示**](http://ideone.com/4xHE68)

因此，在这种情况下，它返回, 对于它返回`xyx.v1`的字符串，因为这是唯一的中间部分。`bo.xyx.v1``v1`

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-25T10:41:42.097

```
 string output= input.Substring(input.IndexOf('.') + 1, 
                  input.LastIndexOf('.') - input.IndexOf('.') - 1); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-25T10:46:38.473

```
var input = "dbo.xyx.v1.UserDefinedFunction";
var start = input.IndexOf('.');
var end = input.LastIndexOf('.');
string output;
if (start < end)
{
    output = input.Substring(start+1, end-start-1);
}
else
{
    output = input;
} 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-04-25T10:38:29.753

如果需要使用 LINQ，可以使用`Skip(1).Take(2)`and `string.Join`，如下所示：

```
var parts = input.Split('.');
var res = string.Join(".", parts.Skip(1).Take(parts.Length-2)); 
```

如果您需要丢弃第一个和最后一个部分，那么您可以使用`Substring`，如下所示：

```
var start = input.IndexOf('.')+1;
var end = input.LastIndexOf('.')-1;
var res = input.Substring(start, end-start+1); 
```

最后，您可以使用正则表达式，如下所示：

```
var res = Regex.Replace(input, "^[^.]+[.](.+)[.][^.]+$", "$1"); 
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2013-04-25T10:39:25.353

```
var input = "dbo.xyx.v1.UserDefinedFunction";
var res = string.Join(".", input.Split('.').Skip(1).Take(2)); 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2013-04-25T10:42:26.193

您可以简化它并执行以下操作：

```
var split = input.Split(".");
var result = String.Join(".", split[1], split[2]); 
```

不需要`Skip`or `Take`。

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2013-04-25T10:44:46.780

```
[TestClass]
public class UnitTest2
{
    [TestMethod]
    public void TestMethod1()
    {

        var ret = "this.is.my.test.string".MySplit(".", new int[] {0,1,4 });//this.is.string

    }
}

public static class Process {
    public static string MySplit(this string Source, string seprator, int[] positionTokeep) {
        var items = Source.Split(seprator.ToCharArray());
        string ret = string.Empty;
        for (int i = 0; i < positionTokeep.Length; i++) {
            ret += items[positionTokeep[i]] + seprator;
        }
        if (!string.IsNullOrWhiteSpace(ret)) {
            ret = ret.Substring(0,ret.Length - seprator.Length);
        }
        return ret;
    }
} 
```

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2013-04-25T10:38:36.670

```
var input = "dbo.xyx.v1.UserDefinedFunction";
var intermediate = input.Split('.');
var res = string.Join(".", intermediate[1],intermediate[2]); 
```

**编辑：**对于任何部分版本

```
var res = string.Join(".", intermediate.Skip(1).Take(intermediate.Length - 2)); 
```

# c# - DateTime，每个月的天数相同

> ID：16212479
> 
> 赞同：-3
> 
> 时间：2013-04-25T10:34:47.000
> 
> 标签：c#, datetime

有没有一种简单的方法或准备上课的日期时间，每个月都有相同的天数？我正在为资源规划编写一个计算工具，我们使用标准月份，没有闰年等。

更新：好吧，也许我应该提到一些大细节 - 我试着去 365/12 = 30,42 天/月。我看不到这种情况发生，因为我总是遇到麻烦，例如尝试从我的刻度（除法和 1.999999999 等）中获取日期。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-25T10:43:40.120

在金融市场中，有很多方法可以计算一年中的天数、一个月中的天数等。一种特殊的方法称为“天数约定”，例如参见[维基百科关于天的文章计数约定](http://en.wikipedia.org/wiki/Day_count_convention)。一种类型的天数约定试图完全按照您所说的去做，即每个月有 30 天。这些天计数约定称为 30/360，正如您从维基百科页面中看到的那样，有几种变体。所有这些约定都非常容易实现，所以我的建议是选择这些天数约定之一并自己编写代码。

# sql - 无法在 sql server 中获取存储过程的结果？

> ID：16212480
> 
> 赞同：2
> 
> 时间：2013-04-25T10:34:47.317
> 
> 标签：sql, sql-server, sql-server-2008, variables, sql-server-2008-r2

我有一个存储过程的层次结构，如下所示：

```
1
 2
  3 
```

现在我正在做的是：首先我展示的是第一级 sp 。

```
Create proc proc_test3
(
@Id uniqueidentifier,
@value varchar(100)
)
as
declare @Outputvalue varchar(100)
if @Id='2'
begin
exec @Outputvalue= proc_test2 @Id @value
select @Outputvalue
end 
```

这是第二级：

```
Create proc proc_test2
(
@Id uniqueidentifier,
@value varchar(100)
)
as
declare @Outputvalue varchar(100)
if @Id='2'
begin
exec @Outputvalue= proc_test1 @Id @value
select @Outputvalue
end 
```

这是最后的第三级：

```
Create proc proc_test1
(
@Id uniqueidentifier,
@value varchar(100)
)
as
update tblsample set value=@value where id=@Id
select 1 
```

我只粘贴了一个示例，但实际上我的代码阅读起来非常复杂，因此我以一些更简单的方式实现了它，以便每个人都可以轻松理解它，

现在我的问题是什么：每次我在执行“ **proc_test3** ”时得到@Outputvalue=0，请帮助我，这样我就可以摆脱这个问题，如果我做错了事情，请告诉我正确的方法，请帮我解决问题。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-25T10:42:28.700

尝试使用 RETURN 构造 -

```
CREATE PROC proc_test3
(
    @Id UNIQUEIDENTIFIER,
    @value VARCHAR(100)
)
AS BEGIN

    IF @Id = '2' BEGIN

        DECLARE @Outputvalue VARCHAR(100)
        EXEC @Outputvalue = dbo.proc_test2 @Id, @value
        RETURN @Outputvalue

    END

END

CREATE PROC proc_test2
(
    @Id UNIQUEIDENTIFIER,
    @value VARCHAR(100)
)
AS BEGIN

    IF @Id='2' BEGIN

        DECLARE @Outputvalue VARCHAR(100)
        EXEC @Outputvalue= proc_test1 @Id, @value
        RETURN @Outputvalue

    END

END

CREATE PROC proc_test1
(
    @Id UNIQUEIDENTIFIER,
    @value VARCHAR(100)
)
AS BEGIN

    UPDATE tblsample 
    SET value=@value 
    WHERE id=@Id

    RETURN 1

END 
```

# ios - 如何在 CCMoveTo 期间连续检查 Tiled tilemap 中的碰撞

> ID：16212482
> 
> 赞同：0
> 
> 时间：2013-04-25T10:34:53.550
> 
> 标签：ios, objective-c, xcode, cocos2d-iphone

你好堆栈溢出的好人我今天站在你面前有一个（不是很好）cocos2d 问题。

如何在动作中检查碰撞，而不是检查目标图块？我正在使用具有元图层的瓷砖地图，其中有可碰撞的瓷砖。以下代码在我单击可碰撞瓷砖时有效，但当我单击超出它时无效，如果发生这种情况，他将直接穿过。

目前，我检测到与此代码的冲突：

```
-(void)setPlayerPosition:(CGPoint)position {
CGPoint tileCoord = [self tileCoordForPosition:position];
int tileGid = [_meta tileGIDAt:tileCoord];
if (tileGid) {
    NSDictionary *properties = [_tileMap propertiesForGID:tileGid];
    if (properties) {
        NSString *collision = properties[@"Collidable"];
        if (collision && [collision isEqualToString:@"True"]) {
            return;
        }
    }
}

float speed = 10;
CGPoint currentPlayerPos = _player.position;
CGPoint newPlayerPos = position;
double PlayerPosDifference = ccpDistance(currentPlayerPos, newPlayerPos) / 24;
int timeToMoveToNewPostition = PlayerPosDifference / speed;
id moveTo = [CCMoveTo actionWithDuration:timeToMoveToNewPostition position:position];
[_player runAction:moveTo];

//_player.position = position;
} 
```

顺便说一句，这是从此方法调用的：

```
-(void)ccTouchEnded:(UITouch *)touch withEvent:(UIEvent *)event
{
[_player stopAllActions];
CGPoint touchLocation = [touch locationInView:touch.view];

touchLocation = [[CCDirector sharedDirector] convertToGL:touchLocation];
touchLocation = [self convertToNodeSpace:touchLocation];

CGPoint playerPos = _player.position;
CGPoint diff = ccpSub(touchLocation, playerPos);

int diffx = diff.x;
int diffy = diff.y;
int adiffx = diffx / 24;
int adiffy = diffy / 24; //Porque my tile size is 24     

if ( abs(diff.x) > abs(diff.y) ) {
    if (diff.x > 0) {
        playerPos.x = playerPos.x + adiffx * 24;
    } else {
        playerPos.x = playerPos.x + adiffx * 24;
    }
} else {
    if (diff.y > 0) {
        playerPos.y = playerPos.y + adiffy * 24;
    }else{
        playerPos.y = playerPos.y + adiffy * 24;
    }
}
[self setPlayerPosition:playerPos];
} 
```

我试过

```
 [self schedule:@selector(setPlayerPosition:) interval:0.5]; 
```

没有任何运气，这只是立即使应用程序崩溃

`NSAssert( pos.x < _layerSize.width && pos.y < _layerSize.height && pos.x >=0 && pos.y >=0, @"TMXLayer: invalid position");` 我真的不能责怪它在那里崩溃。

如何在`CCMoveTo`运行时不断检查与可碰撞元图块的碰撞？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-25T17:38:01.000

在您的 init 中，安排一个碰撞检测方法：

```
[self schedule:@selector(checkCollisions:)]; 
```

然后定义如下：

```
-(void)checkCollisions:(ccTime)dt
{
    CGPoint currentPlayerPos = _player.position;
    CGPoint tileCoord = [self tileCoordForPosition:currentPlayerPos];
    int tileGid = [_meta tileGIDAt:tileCoord];
    if (tileGid) 
    {
        NSDictionary *properties = [_tileMap propertiesForGID:tileGid];
        if (properties) 
        {
            NSString *collision = properties[@"Collidable"];
            if (collision && [collision isEqualToString:@"True"]) 
            {
                [_player stopAllActions];
                return;
            }
        }
    }
} 
```

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2013-04-25T15:23:43.163

我使用类似的元层。我个人跳过了使用 MoveTo，并创建了自己的更新代码，既可以移动精灵又可以进行碰撞检测。

我找出潜在的新位置是什么，然后找出新位置的精灵的所有四个角中的瓷砖位置，然后循环遍历精灵将在的所有瓷砖，如果有的话，我停止精灵。

实际上，我更进一步检查是否仅移动 x，或者仅移动 y 更改结果，然后移动到该位置而不是移动到该位置。

# mysql - 数据库中的动态外键

> ID：16212483
> 
> 赞同：0
> 
> 时间：2013-04-25T10:34:55.010
> 
> 标签：mysql, database, dynamic, foreign-keys

拥有这样的数据库结构是个好主意吗？在经理表中，id_item 就像来自学校或公司的外键，基于配置文件的类型（id_item 是 school.id 或 company.id 基于类型字段）就像编程语言中没有类型的动态变量。

![在此处输入图像描述](https://i.stack.imgur.com/3kf6a.png)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-25T11:18:13.973

那么为什么不创建一个组织表并将其引用给经理。您是否需要这种级别的细节，拥有两个独立的实体？

![作为超级实体的组织](https://i.stack.imgur.com/7tOpm.png)

*   经理管理一个或多个组织。
*   一个组织只由**一名**经理管理。
*   组织可以是公司或学校。
*   学校有一个位置作为补充。

# regex - 我的 perl 替换有什么问题？

> ID：16212491
> 
> 赞同：-1
> 
> 时间：2013-04-25T10:35:24.020
> 
> 标签：regex, perl

由于文件的数量，我有一个文件目录，我试图使用 perl 将其拆分为子目录。文件名在开头的日期格式为 YYYYMMDD 格式，我正在尝试对此进行拆分。我正在使用改编[自此 StackOverflow 答案](https://stackoverflow.com/questions/1242662/linux-move-1-million-files-into-prefix-based-created-folders)的以下代码：

```
#!/usr/bin/perl -w
use strict;

opendir DIR, "." or die "opendir: $!";
my @files = readdir(DIR);
closedir DIR;
foreach my $f (@files) {
    -f $f or next;
    (my $new_name = $f) =~ s!^((....)(..)(..).*)$!$2/$3/$4/$1/;
    -e $new_name and die "$new_name already exists";
    rename($f, $new_name);
} 
```

但是，我得到一个“替换替换未在 movefiles.pl 第 10 行终止”。当我尝试运行此代码时。据我所见，我正在正确地转义并终止替换？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-25T10:38:36.767

您正在`!`用作正则表达式分隔符。你有一个开始它，一个将匹配部分与替换部分分开，但最后没有一个。

# opencv - 如何使用 cuda tex2D 访问像素的每个通道

> ID：16212493
> 
> 赞同：6
> 
> 时间：2013-04-25T10:35:29.740
> 
> 标签：opencv, cuda, textures, cuda-arrays

我正在学习 cuda 纹理记忆。现在，我得到了一个 opencv Iplimage，并得到了它的图像数据。然后我将纹理绑定到这个 uchar 数组，如下所示：

```
Iplimage *image = cvCreateImage(cvSize(width, height), IPL_DEPTH_8U, 3);
unsigned char* imageDataArray = (unsigned char*)image->imagedata;

texture<unsigned char,2,cudaReadModeElementType> tex;
cudaChannelFormatDesc channelDesc = cudaCreateChannelDesc(8, 8, 8, 0, 
                                                          cudaChannelFormatKindUnsigned); 
cudaArray *cuArray = NULL;
CudaSafeCall(cudaMallocArray(&cuArray,&channelDesc,width,height));

cudaMemcpy2DToArray(cuArray,0,0,imageDataArray,image->widthstep,
    width * sizeof(unsigned char), height, cudaMemcpyHostToDevice);
cudaBindTextureToArray(texC1_cf,cuArray_currentFrame, channelDesc); 
```

现在我启动内核，我想访问该图像的每个像素，每个通道。这就是我感到困惑的地方。

我使用此代码获取像素坐标（X，Y）：

```
int X = (blockIdx.x*blockDim.x+threadIdx.x);
int Y = (blockIdx.y*blockDim.y+threadIdx.y); 
```

我**怎样才能访问这个（X，Y）的每个通道？**下面的代码返回什么？

```
tex2D(tex, X, Y); 
```

除此之外，你能告诉我纹理内存是如何使用纹理来访问数组的，以及这个变换是什么样子的吗？

![在此处输入图像描述](https://i.stack.imgur.com/UXROv.png)

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-04-25T14:31:44.867

要将 3 通道 OpenCV 图像绑定到 cudaArray 纹理，您必须创建一个宽度等于 的 cudaArray `image->width * image->nChannels`，因为通道是由 OpenCV 交错存储的。

```
cudaChannelFormatDesc channelDesc = cudaCreateChannelDesc<unsigned char>();

cudaArray *cuArray = NULL;
CudaSafeCall(cudaMallocArray(&cuArray,&channelDesc,width * image->nChannels,height));

cudaMemcpy2DToArray(cuArray,0,0,imageDataArray,image->widthstep, width * image->nChannels * sizeof(unsigned char), height, cudaMemcpyHostToDevice);

cudaBindTextureToArray(texC1_cf,cuArray_currentFrame, channelDesc); 
```

现在，要在内核中分别访问每个通道，您只需将 x 索引乘以通道数并添加所需通道的偏移量，如下所示：

```
unsigned char blue = tex2D(tex, (3 * X) , Y);
unsigned char green = tex2D(tex, (3 * X) + 1, Y);
unsigned char red = tex2D(tex, (3 * X) + 2, Y); 
```

第一个是蓝色的，因为 OpenCV 存储具有通道序列 BGR 的图像。

至于您尝试使用访问时遇到的`texture<uchar3,..>`错误`tex2D`；CUDA 仅支持创建 1,2 和 4 元素矢量类型的 2D 纹理。不幸的是，ONLY 3 不受支持，这对于绑定 RGB 图像非常有用，并且是一个非常理想的功能。

# data-binding - ComboBox selectedItem 影响另一个 ComboBox

> ID：16212500
> 
> 赞同：0
> 
> 时间：2013-04-25T10:35:41.510
> 
> 标签：data-binding, windows-store-apps

我有一个关于数据绑定的问题，我真的很难理解。我的扩展初始屏幕上有两个 ComboBox。我想要实现的是当你从第一个 ComboBox 中选择一个项目时，第二个 ComboBox 中的项目应该改变。请看下面的代码。

首先让我尝试解释一下我的数据是什么样的以及我面临的问题。

*   收藏
    *   一个
        *   AA
        *   AB
        *   交流电
    *   乙
        *   文学学士
        *   BB
    *   C
        *   加州

第一个 ComboBox 应将 A、B 和 C 显示为项目。现在假设您选择了 A，ComboBox 2 应该将 AA、AB 和 AC 显示为项目。我遇到的问题是 ComboBox 2 仅显示 AA，而不是所有 3 个项目。

我的 ViewModel 称为 MainViewModel 如下所示：-

```
 public class ItemViewModel : INotifyPropertyChanged
{

    private string _befattning;
    public string Befattning
    {
        get
        {
            return _befattning;
        }
        set
        {
            if (value != _befattning)
            {
                _befattning = value;
                NotifyPropertyChanged("Befattning");
            }
        }
    }

    private string _befattning2;
    public string Befattning2
    {
        get
        {
            return _befattning2;
        }
        set
        {
            if (value != _befattning2)
            {
                _befattning2 = value;
                NotifyPropertyChanged("Befattning2");
            }
        }
    }

    private string _befattning3;
    public string Befattning3
    {
        get
        {
            return _befattning3;
        }
        set
        {
            if (value != _befattning3)
            {
                _befattning3 = value;
                NotifyPropertyChanged("Befattning3");
            }
        }
    }

    public event PropertyChangedEventHandler PropertyChanged;
    private void NotifyPropertyChanged(String propertyName)
    {
        //NotifyPropertyChanged Code
    }
}

public class MainViewModelGroups : INotifyPropertyChanged
{
    public MainViewModelGroups(String enhet)
    {
        this._enhetsNamn = enhet;
    }

    private string _enhetsNamn;
    public string EnhetsNamn
    {
        get { return _enhetsNamn; }
    }

    private string _selectedItem;
    public string SelectedItem
    {
        get { return _selectedItem; }
        set
        {
            if (value != _selectedItem)
            {
                _selectedItem = value;
                NotifyPropertyChanged("SelectedItem");
            }
        }
    }

    private ObservableCollection<ItemViewModel> _items = new ObservableCollection<ItemViewModel>();
    public ObservableCollection<ItemViewModel> Items
    {
        get
        {
            return this._items;
        }
    }

    public event PropertyChangedEventHandler PropertyChanged;
    private void NotifyPropertyChanged(String propertyName)
    {
        //NotifyPropertyChangedCode
    }
}

public sealed class MainViewModel
{
    private static MainViewModel _mainViewModel = new MainViewModel();

    private ObservableCollection<MainViewModelGroups> _collection = new ObservableCollection<MainViewModelGroups>();
    public ObservableCollection<MainViewModelGroups> Collection
    {
        get { return this._collection; }
    }

    public MainViewModel()
    {
        var enhet1 = new MainViewModelGroups("Akutmottagning");
        enhet1.Items.Add(new ItemViewModel() { Befattning = "Ledningsansvarig sjuksköterska" });
        Collection.Add(enhet1);
    } 
```

我的 XAML 代码看起来像这样

```
<ComboBox x:Name="EnhetLista" 
              ItemsSource="{Binding Collection}"
              SelectedItem="{Binding SelectedItem, Mode=OneWay}">
        <ComboBox.ItemTemplate>
            <DataTemplate>
                <TextBlock Text="{Binding EnhetsNamn}"/>
            </DataTemplate>
        </ComboBox.ItemTemplate>
    </ComboBox>
    <ComboBox x:Name="BefattningsLista"
              DataContext="{Binding ElementName=EnhetLista, Path=SelectedItem, Mode=OneWay}"
              ItemsSource="{Binding Path=Items, Mode=OneWay}">
        <ComboBox.ItemTemplate>
            <DataTemplate>
                <TextBlock Text="{Binding}" />
            </DataTemplate>
        </ComboBox.ItemTemplate>
    </ComboBox> 
```

有人可以帮助解释我的代码有什么问题以及如何实现我的目标吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-05-08T23:04:17.117

将第二个 ObservableCollection 添加到您的视图模型，然后根据所选项目进行更改。

```
public sealed class MainViewModel
{
    private static MainViewModel _mainViewModel = new MainViewModel();

    private ObservableCollection<MainViewModelGroups> _collection = new ObservableCollection<MainViewModelGroups>();
    public ObservableCollection<MainViewModelGroups> Collection
    {
        get { return this._collection; }
    }

    public ObservableCollection<ItemViewModel> Items
    {
        get { return this._items; }
        set { this._items = value; OnPropertyChanged("Items"); }
    }

    public MainViewModelGroups SelectedGroup
    {
        get { return this._selectedGroup; }
        set { this._selectedGroup = value; Items = value.Items; }
    }

    public MainViewModel()
    {
        var enhet1 = new MainViewModelGroups("Akutmottagning");
        enhet1.Items.Add(new ItemViewModel() { Befattning = "Ledningsansvarig sjuksköterska" });
        Collection.Add(enhet1);
    }
} 
```

您的 Xaml 将更改为：

```
<ComboBox x:Name="EnhetLista" 
          ItemsSource="{Binding Collection}"
          SelectedItem="{Binding SelectedItem, Mode=TwoWay}">
    <ComboBox.ItemTemplate>
        <DataTemplate>
            <TextBlock Text="{Binding EnhetsNamn}"/>
        </DataTemplate>
    </ComboBox.ItemTemplate>
</ComboBox>
<ComboBox x:Name="BefattningsLista"
          ItemsSource="{Binding Path=Items}">
    <ComboBox.ItemTemplate>
        <DataTemplate>
            <TextBlock Text="{Binding}" />
        </DataTemplate>
    </ComboBox.ItemTemplate>
</ComboBox> 
```

您的视图模型可能需要实现 INotifyPropertyChanged。但它可能不会，因为 ObservableCollection 可能会为您解决这个问题。

# java - STS、Maven 和 Java 运行非常缓慢

> ID：16212501
> 
> 赞同：1
> 
> 时间：2013-04-25T10:35:43.647
> 
> 标签：java, performance, maven, ubuntu-12.04, sts-springsourcetoolsuite

在升级杀死了我的显示驱动程序之后，我正在运行新安装的 ubuntu 12.04。

我已经重新安装了所有东西，但 STS 的运行速度非常慢 - 它似乎在每次鼠标点击时都挂起，而且我很少能真正将它用于任何事情的阶段。

我认为这可能与 maven 或 java 问题有关，因为当我尝试在一个简单项目上运行 mvn 包时，“Building jar”大约需要 20 分钟，而“Building War”似乎永远不会结束（我已经离开几个小时）。

我不知道这个性能问题可能来自哪里 - 我尝试了几个不同的 Java 版本，但似乎没有任何帮助。

我知道这个问题有点含糊，但我需要帮助找到要解决这个问题的问题！

STS 版本 3.2.0

java版本

```
java version "1.7.0_21"
Java(TM) SE Runtime Environment (build 1.7.0_21-b11)
Java HotSpot(TM) 64-Bit Server VM (build 23.21-b01, mixed mode) 
```

mvn-版本

```
Apache Maven 3.0.4
Maven home: /usr/share/maven
Java version: 1.7.0_21, vendor: Oracle Corporation
Java home: /usr/lib/jvm/java-7-oracle/jre
Default locale: en_GB, platform encoding: UTF-8
OS name: "linux", version: "3.5.0-27-generic", arch: "amd64", family: "unix" 
```

编辑添加：另一个想法 - 这甚至可能是一个 fs 安装问题吗？我将所有文件都放在一个单独的 ntfs 分区上。我不知道这是否会使读/写变得非常慢？我会尝试在本地磁盘上创建一个项目

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-25T13:53:52.567

解决了！这是一个非常特殊的情况，但最终是磁盘安装导致我的文档分区中的所有内容都运行得非常缓慢。

通过将项目复制到本地分区并运行之前挂起的 mvn package 命令来验证理论。它立即起作用。所以我已经从 /etc/fstab 中删除了有问题的行，重新启动并手动安装了分区，现在它运行良好。

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2013-04-25T10:54:53.667

你应该显示你的配置文件。什么样的项目？
我有一个类似的问题。是因为我没有使用连接池。看看这个例子。
[maven-jpa-hibernate-spring-太慢了](https://stackoverflow.com/questions/16199876/maven-jpa-hibernate-spring-too-slow)

# javascript - 如果加载页面的时间超过 3 秒，则显示弹出窗口

> ID：16212509
> 
> 赞同：0
> 
> 时间：2013-04-25T10:36:27.930
> 
> 标签：javascript

如果页面加载超过 3 秒，则需要在页面加载之前显示一个弹出窗口。在代码下方使用，但如果页面加载也少于 tahn 3 seocnds，它会显示弹出窗口。如果页面加载需要更多时间而不是更少时间，则需要显示弹出窗口。

```
<script type="text/javascript">
    setTimeout(fnShowPopup, 1000);
    function fnShowPopup() {
        var answer = confirm("It may take few time to open this docuemnt. Click YES if you want to open the docuemnt in native format or click on CANCEL to continue viewing the docuemnt")
        if (answer)
            window.open(NativeView())
  }
</script> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-25T10:46:41.913

[`setTimeout(func, delay)`](https://developer.mozilla.org/en-US/docs/DOM/window.setTimeout)附带一个中止计时器的方法：[`clearTimeout(timeoutID)`](https://developer.mozilla.org/en-US/docs/DOM/window.clearTimeout)

```
<script>
var myTimer = setTimeout(fnShowPopup, 3000);
if (typeof(window.addEventListener) === 'function') {
    // standard conforming browsers
    window.addEventListener('load', function () {
        clearTimeout(myTimer);
    }, true);
} else {
    // legacy, IE8 and less
    window.attachEvent('onload', function () {
        clearTimeout(myTimer);
    });
}
</script> 
```

把它放在`<head>`你的页面中，在任何其他`<script>`s、`<style>`s 或`<link>`s 之前。

在您的 fnShowPopup 函数中，如果用户选择“本机格式”，您可能希望停止页面加载。见[https://stackoverflow.com/a/10415265/](https://stackoverflow.com/a/10415265/)

# internet-explorer - 具有完全跨浏览器兼容性的 HTML5 视频

> ID：16212510
> 
> 赞同：1
> 
> 时间：2013-04-25T10:36:30.607
> 
> 标签：internet-explorer, cross-browser, responsive-design, html5-video

我想要一些关于在我的网站上创建 HTML5 视频部分的最佳方法的指导，该部分完全跨浏览器兼容，在响应式布局中工作（因此不是固定尺寸），并且还支持 IOS/ipad 和其他移动设备。我看过几篇文章，包括（[http://diveintohtml5.info/video.html](http://diveintohtml5.info/video.html)）。我已经尝试过 mediaelement.js 和 Video.js，但在较旧的 Internet Explorer 浏览器（特别是 IE8 及更低版本）上仍然存在问题，IE9 工作正常。如果有人能指出我使用 HTML5 视频实现这一目标的正确方向，那将是一个很大的帮助，因为我只是没有找到我要去的地方！多谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-25T13:33:43.650

澄清一下，您是否尝试过使用 Flowplayer 为 IE8 及更低版本播放视频的 Flash 版本的 html5 技术？

代码和工作示例位于[http://diveintohtml5.info/video.html的最后](http://diveintohtml5.info/video.html)

页面上的示例似乎对我在 IE7 和 IE8 上运行良好，尽管我正在 Mac 上的虚拟盒子上进行测试，所以这可能会改变一些东西。

祝你好运！

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2021-05-25T23:19:30.070

## 跨浏览器 HTML 视频代码

下面是一个完全**跨浏览器的**HTML5 视频播放器代码集，您可以使用它提供“可能性”来支持旧浏览器中的许多旧插件和视频播放器。**它使用最新的 HTML5 设计**，但添加了旧浏览器的旧`'object'`元素`'embed'`。

```
<figure aria-labelledby="videocaption3">
    <!-- VIDEO: The HTML5 'video' element is the primary source of the various video fallback elements below. Older browsers like IE 5-8 (using ActiveX) that do not recognize the 'video' HTML5 element will try and load the 'object' element version instead. -->
    <video 
        id="video3" 
        controls="controls" 
        preload="metadata" 
        style="width:320px;height:180px;border:none;outline:none;" 
        title="My Video" 
        aria-label="My Video">
        <!-- SOURCE: In this old ActiveX version, Microsoft Windows in Internet Explorer used the object ActiveX form while all other browsers used the 'embed' element below as fallback. -->
        <source src="video3.mp4" type="video/mp4" />
        <source src="video3.ogv" type="video/ogg" />
        <!-- OBJECT: In this old ActiveX version, Microsoft Windows in Internet Explorer used the object ActiveX form while all other browsers used the 'embed' element below as fallback. -->
        <object 
            id="object3" 
            name="object3" 
            data="video3.wmv" 
            type="video/x-ms-wmv" 
            style="width: 320px;height: 180px;border: none;outline: none;" 
            title="My Video" 
            aria-label="My Video">
                <!-- EMBED: In this old version, non-Internet Explorer, older, non-HTML5 browsers would recognize this fallback 'embed' version element and call their plugins and players to display the file below. Additional fallback in the form of a 'noembed' element with alert text would trigger for those user agents that do not support multimedia or the embed tag (as it was never part of an official HTML release). I recommend you use this old syntax if you are supporting older browsers that do not understand the newer HTML5 elements. -->
                <embed 
                       id="embed3" 
                       src="video3.wmv" 
                       type="video/x-ms-wmv" 
                       style="width: 320px;height: 180px;border: none;outline: none;" 
                       title="My Video" 
                       aria-label="My Video">
                    <noembed>-->
                    <!-- FALLBACK TEXT ALERT: If the user agent does not support video, give them a simple text alert below. -->
                    Sorry, your browser does not support this video.
                    </noembed>
                </embed>
        </object>
    </video>
    <!-- CAPTION: Captions wrap around the video elements the same as img, picture, and audio elements. -->
    <figcaption id="videocaption3"><small>"My Video"</small></figcaption>
</figure> 
```

此代码库应支持支持该`'video'`元素的 HTML5 浏览器，以及可追溯到 2000 年或更早的各种旧浏览器，在 HTML5 之前，仅支持`'embed'`或`'object'`元素。在过去，“object”用于 IE 中的 ActiveX 插件，“embed”用于 Netscape 4（以及后来出现的用户代理）。HTML5 仍然支持“对象”和“嵌入”，尽管它们将依赖播放器/插件/ActiveX 来播放多媒体。'video' 元素现在是大多数现代浏览器的原生元素，但只能在支持 HTML5 的较新浏览器（例如 IE9-11）中可靠地工作。大多数 HTML5 浏览器（2010 年后）应该支持 'video' 元素并忽略其他两种类型。如果不这样做，只要它们都支持移动编码类型并且安装了播放器来播放它，它们就会退回到其他元素。

问题

*您播放跨浏览器视频*时可能遇到的主要问题不是 HTML，而是旧浏览器的众多版本、已安装（或未安装）已弃用的播放器、支持的电影编码类型以及操作系统（Mac 与 Windows 与？）。再加上有限的移动浏览器支持，您确实需要通过可靠的嵌入式第三方服务（如 YouTube）提供视频。通常，许多旧浏览器根本不支持您提供的视频编码。在其他情况下，操作系统会限制对电影类型的支持。例如，`.wmv`很久以前用于 Windows，而 Quicktime`.mov`用于 Mac。

2004 年以后的许多旧浏览器开始支持`.flv`或 Flash 电影来处理这种跨浏览器电影问题。Flash`.flv`曾经为网页中的视频提供了最广泛的支持，因为几乎每个人都同时安装了 Flash（c. 2008）。现在 Flash 播放器在 2017 年被弃用，你现在也不能依赖它。这就是为什么使用 HTML5 'video' 元素是最广泛采用的最佳起点。

今天，有许多更新的替代视频播放器有助于在较新的浏览器中支持视频，而不是较旧的浏览器。如果您确实尝试提供跨浏览器解决方案，我建议您尝试并继续使用`.mp4`以涵盖大多数现代浏览器和播放器，以及一些较旧的浏览器和播放器。现实一点，设计一个尝试针对特定群体的解决方案，而不是一个通用的集合，这对于过去 20 年的众多视频播放器来说是很难做到的。

# javascript - 合并/加入正则表达式结果以突出显示

> ID：16212511
> 
> 赞同：0
> 
> 时间：2013-04-25T10:36:30.590
> 
> 标签：javascript, regex, highlight, highlighting

我想加入/合并正则表达式的结果。

例如，这是字符串

```
hello foo bar 
```

模式的正则表达式结果`/el/` =>模式`el`
的正则表达式结果`/llo\sfo`=>`llo fo`

如果我使用管道，结果只有一个匹配。
对于这种模式 `/el|llo\sfo/`，结果只是`el`

我想要的结果应该是`ello fo`
用例是用于突出显示文本中的多个模式。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-25T11:16:10.957

Regex 引擎只处理字符串一次。在一个角色被消耗后，它不能被再次处理（环顾不计算在内，因为它们“只是看”）。

由于您的模式需要在示例字符串上“重叠”，因此它们永远不会匹配在一起（在一个正则表达式中）。但是，他们会使用全局标志`g`和以下输入：

```
"helllo foo bar".match(/el|llo\sfo/g) 
```

所以唯一的解决方案是你使用两个单独的正则表达式来达到你的目的。

# php - 为 preg_split 创建多个分隔符 REGEX

> ID：16212514
> 
> 赞同：2
> 
> 时间：2013-04-25T10:36:43.930
> 
> 标签：php, regex, pcre, delimiter

我需要用不同的分隔符分割多个文件中的多行。我认为 preg_split 应该可以完成这项工作，但我从未使用过 PCRE REGEX 的东西。我还可以将所有分隔符更改为一致，但这会增加不必要的计算。

问：我的分隔符由 (,)(;)(|)(space) 组成，我很好奇如何构建这样的 REGEX。

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-04-25T10:39:37.657

将字符放在方括号中`[]`：

```
$parts = preg_split('/[,;| ]/', $string, null, PREG_SPLIT_NO_EMPTY); 
```

您也可以使用`\s`空格字符来代替，它匹配所有类型的空白，例如制表符和换行符。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-04-25T10:45:41.640

试试这个：

```
$string = "foo:bar|it;is:simple";
print_r(preg_split ( '/,|;|\||\s/' , $string )); 
```

# android - Android：如何限制特定应用

> ID：16212516
> 
> 赞同：1
> 
> 时间：2013-04-25T10:36:48.043
> 
> 标签：android, service

在我的应用程序中，我需要阻止短信、电子邮件和电话。我没有检测到`incoming or outgoing calls or sms`. 简单地说，我有一个服务将在后台运行并检查三个进程中的任何一个是否正在运行。如果它们正在运行，那么当用户单击拨号器或短信应用程序时，我的活动将打开。到目前为止，我已经尝试过，我在下面发布：

**服务等级**

```
public class DialerService extends Service {
ActivityManager am;
List<RunningAppProcessInfo> mAppProcessInfosList;
private Runnable myRunnable;
boolean threadDone = true;
Handler mHandler;
boolean isLockedAppRunning = false;

@Override
public IBinder onBind(Intent arg0) {
    return null;
}

public void onCreate() {
    am = (ActivityManager) getSystemService(Context.ACTIVITY_SERVICE);
    mAppProcessInfosList = new ArrayList<ActivityManager.RunningAppProcessInfo>();
    mHandler = new Handler();
    Log.v("Dialer Service", "onCreate called");
}

@Override
public int onStartCommand(Intent intent, int flags, int startId) {
    myRunnable = new Runnable() {

        @Override
        public void run() {
            isRestrictedAppRunning();
        }
    };

    new Thread(new Runnable() {
        public void run() {
            while (threadDone) {

                try {
                    mHandler.post(myRunnable);
                } catch (Exception e) {

                }
            }
        }
    }).start();
    return START_STICKY;
}

private void isRestrictedAppRunning() {
    mAppProcessInfosList = am.getRunningAppProcesses();
    for (int i = 0; i < mAppProcessInfosList.size(); i++) {
        if (mAppProcessInfosList.get(i).processName
                .equals("com.android.phone")
                || mAppProcessInfosList.get(i).processName
                        .equals("com.android.email")
                || mAppProcessInfosList.get(i).processName
                        .equals("com.android.mms")) {
            isLockedAppRunning = true;
            Intent dialogIntent = new Intent(getBaseContext(),
                    TestActivity.class);
            dialogIntent.addFlags(Intent.FLAG_ACTIVITY_NEW_TASK);
            getApplication().startActivity(dialogIntent);
        }
    }
}

@Override
public void onDestroy() {
    super.onDestroy();
    this.threadDone = false;
}
} 
```

此代码正在运行，但存在以下问题：

它阻止了所有应用程序，而我的要求是仅限制我列出要阻止的那些应用程序。例如，如果我阻止电话和短信，我的活动应该只在点击拨号器和短信应用程序时打开，而不是在我点击地图时打开。

我不知道如何做到这一点。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-01-31T23:48:22.867

当您检测到您的黑名单应用程序即将启动时，您需要关闭正在运行的活动。后台服务/线程将最好地处理活动监视器。还有其他使用 IActivityWatcher 的内部方法，但内部接口和相关的隐藏 API 可能会被弃用。我相信它已经在 J​​B 中被弃用了。

# c# - 如何使用 Stream.Write 方法覆盖现有文本

> ID：16212519
> 
> 赞同：0
> 
> 时间：2013-04-25T10:37:05.480
> 
> 标签：c#, stream

我正在使用 StreamWriter 将记录写入文件。现在我想覆盖特定的记录。

```
string file="c:\\......";
StreamWriter sw = new StreamWriter(new FileStream(file, FileMode.Open, FileAccess.Write));
sw.write(...);
sw.close(); 
```

我在这里的某个地方读到我可以使用[Stream.Write 方法](http://msdn.microsoft.com/en-us/library/system.io.stream.write.aspx)来做到这一点，我以前没有关于如何处理字节的经验或知识。

```
 public override void Write(
    byte[] array,
    int offset,
    int count
) 
```

那么如何使用这个方法。我需要有人解释一下这个方法中的字节[]数组和整数计数到底是什么，任何简单的示例代码都显示了如何使用这种方法覆盖文件中的现有记录。

前任。更改任何记录，例如记录 Mark1287,11100,25| 至 Bill9654,22100,30| .

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-25T10:57:13.207

如果你想覆盖一个特定的记录，你必须使用`FileStream.Seek`-method 来设置你的流的位置。

示例`Seek`

```
using System;
using System.IO;

class FStream
{
static void Main()
{
    const string fileName = "Test#@@#.dat";

    // Create random data to write to the file.
    byte[] dataArray = new byte[100000];
    new Random().NextBytes(dataArray);

    using(FileStream  
        fileStream = new FileStream(fileName, FileMode.Create))
    {
        // Write the data to the file, byte by byte.
        for(int i = 0; i < dataArray.Length; i++)
        {
            fileStream.WriteByte(dataArray[i]);
        }

        // Set the stream position to the beginning of the file.
        fileStream.Seek(0, SeekOrigin.Begin);

        // Read and verify the data.
        for(int i = 0; i < fileStream.Length; i++)
        {
            if(dataArray[i] != fileStream.ReadByte())
            {
                Console.WriteLine("Error writing data.");
                return;
            }
        }
        Console.WriteLine("The data was written to {0} " +
            "and verified.", fileStream.Name);
    }
}
} 
```

找到位置后，使用`Write`，而

```
public override void Write(
byte[] array,
int offset,
int count
)

Parameters
array
Type: System.Byte[]
The buffer containing data to write to the stream.
offset

Type: System.Int32
The zero-based byte offset in array from which to begin copying bytes to the stream.

count
Type: System.Int32
The maximum number of bytes to write. 
```

最重要的是：不确定时始终考虑[文档！](http://msdn.microsoft.com/en-us/library/system.io.filestream.write.aspx)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-25T12:06:47.420

所以......简而言之：

*   您的文件是基于文本的（但允许基于二进制）。
*   您的记录有各种大小。

这样，如果不分析您的文件，就无法知道给定记录的开始和结束位置。如果要覆盖一条记录，新记录可能比旧记录大，因此必须移动该文件中更远的所有记录。

这需要一个复杂的管理系统。选项可能是：

*   当您的应用程序启动时，它会分析您的文件并将每条记录的开始和长度存储在内存中。
*   有一个单独的（二进制）文件保存每条记录的开始和长度。这将总共花费额外的 8 个字节（开始 + 长度都是 Int32。也许你想考虑 Int64。）

如果你想重写一条记录，你可以使用这个“记录/开始/长度”系统来知道从哪里开始写你的记录。但在你这样做之前，你必须保证空间，从而在记录被重写之后移动所有记录。当然，您必须使用新的职位和长度更新您的管理系统。

另一种选择是作为数据库：每条记录都存在固定宽度的列。即使是文本列也有最大长度。因此，您可以很容易地计算出文件中每条记录的开始位置。例如：如果每条记录的大小为 200 字节，那么记录 #0 将从位置 0 开始，下一条记录从位置 200 开始，之后的一条记录在 400 等。当一条记录移动时，您不必移动记录重写。

另一个建议是：创建一个管理系统，就像管理内存的方式一样。一旦记录被写入，它就会保留在那里。管理系统保留文件的分配部分和空闲部分的列表。如果写入新记录，则管理系统将搜索空闲且合适的部分，并将记录写入该位置（可选地留下较小的空闲部分）。当一条记录被删除时，该空间被释放。当您重写一条记录时，您实际上删除了旧记录并写入一条新记录（可能在完全不同的位置）。

我的最后一个建议：使用数据库:)

# sql - 将日期结束参数设置为 12 个月前

> ID：16212522
> 
> 赞同：1
> 
> 时间：2013-04-25T10:37:10.717
> 
> 标签：sql, date, reporting-services, parameters, dateadd

我必须提取一些比较数据并希望将报告设置为自动运行。

要获得第一个日期范围，我使用参数

```
=DateAdd("m", -3, DateSerial(Year(Now()), Month(Now()), 1)) 
```

这是 3 个月前的开始日期，即 2013 年 1 月 1 日。

```
=DateAdd("d", -1, DateSerial(Year(Now()), Month(Now()), 1)) 
```

这是结束日期，上个月的最后一天是 2013 年 3 月 31 日。

我需要获得与去年相同的日期，所以我正在使用

```
=DateAdd("m", -15, DateSerial(Year(Now()), Month(Now()), 1)) 
```

这是 15 个月前的开始日期，即。2012 年 1 月 1 日

我会用什么来找到 13 个月前一个月的最后一天，即 2012 年 3 月 31 日？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-25T13:00:50.017

由于您已经计算出 2013 年 3 月 31 日，因此只需使用嵌套`DateAdd`函数从中减去一年：

```
=DateAdd("yyyy"
    , -1
    , DateAdd("d", -1, DateSerial(Year(Now()), Month(Now()), 1))) 
```

这将返回**31-Mar-2012**。

# sqlite - 限制 sqlite3 中的浮点值

> ID：16212524
> 
> 赞同：1
> 
> 时间：2013-04-25T10:37:16.957
> 
> 标签：sqlite, integer

我正在使用 sqlite3，但遇到了一个奇怪的问题。例如，我有下表。

```
CREATE TABLE demo (effort integer);

insert into demo values (10.5);  - works fine
insert into demo values (10.5);  - works fine
insert into demo values (10.5555);  - works fine 
```

我有两个担忧：

1.当我将数据类型声明为整数不是实数时，为什么它允许浮点值？2.有什么办法可以限制小数点后两位吗？

是否有任何解决方法，以便我只能限制整数值（严格没有浮点值）。

请建议。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-25T14:11:04.337

SQLite[使用动态类型](http://www.sqlite.org/datatype3.html)。

要强制列类型，请添加一个约束：

```
CREATE TABLE demo(
  effort INTEGER NOT NULL CHECK(typeof(effort) = 'integer')
) 
```

# c++ - recv 阻塞时如何正确清理？

> ID：16212526
> 
> 赞同：5
> 
> 时间：2013-04-25T10:37:29.907
> 
> 标签：c++, zeromq

考虑下面的示例代码（作为示例，我快速输入它，如果有错误也没关系 - 我对理论感兴趣）。

```
bool shutDown = false; //global

int main()
{
  CreateThread(NULL, 0, &MessengerLoop, NULL, 0, NULL);
  //do other programmy stuff...
}

DWORD WINAPI MessengerLoop( LPVOID lpParam )
{
  zmq::context_t context(1);
  zmq::socket_t socket (context, ZMQ_SUB);
  socket.connect("tcp://localhost:5556");
  socket.setsockopt(ZMQ_SUBSCRIBE, "10001 ", 6);

  while(!shutDown)
  {
    zmq_msg_t getMessage;
    zmq_msg_init(&getMessage);
    zmq_msg_recv (&getMessage, socket, 0); //This line will wait forever for a message
    processMessage(getMessage); 
  }
} 
```

创建一个线程来等待传入的消息并适当地处理它们。线程正在循环，直到`shutDown`设置为 true。

在 ZeroMQ 中，[指南](http://zguide.zeromq.org/page%3aall#Making-a-Clean-Exit)明确说明了必须清理的内容，即消息、套接字和上下文。

我的问题是：由于`recv`将永远等待消息，阻塞线程，如果从未收到消息，我该如何安全地关闭该线程？

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2013-04-25T12:38:03.393

阻塞调用将以几种方式退出。首先，这取决于您的语言和绑定，中断（Ctrl-C、SIGINT、SIGTERM）将退出调用。您将返回（再次，取决于您的绑定）错误或空消息（libzmq 返回 EINTR 错误）。

其次，如果您在另一个线程中终止上下文，阻塞调用也将退出（libzmq 返回 ETERM 错误）。

第三，您可以在套接字上设置超时，以便在没有数据的情况下在任何情况下都会在超时后返回。我们不经常这样做，但在某些情况下它可能很有用。

最后，我们在实践中所做的绝不是阻塞接收，而是使用 zmq_poll 找出套接字何时有消息等待，然后从这些套接字接收。这就是您向外扩展以处理更多套接字的方式。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-25T12:31:26.043

您可以使用非阻塞调用标志`ZMQ_DONTWAIT`

```
 while(!shutDown)
  {
    zmq_msg_t getMessage;
    zmq_msg_init(&getMessage);
    while(-1 == zmq_msg_recv(&getMessage, socket, ZMQ_DONTWAIT))
    {
      if (EAGAIN != errno || shutDown)
      {
        break;
      }
      Sleep(100);
    }
    processMessage(getMessage); 
  } 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2018-01-12T15:50:05.113

假设您有一个类 SUB（订阅者）来管理您的 ZMQ 消息的接收。在主函数/类的析构函数或退出函数中，调用以下命令：

```
pub->close();

///
/// Close the publish context
///
void PUB::close()
{
    zmq_close (socket);
    zmq_ctx_destroy (context);
} 
```

这将使“recv”阻塞以您可以忽略的错误消息终止。应用程序将以正确的方式轻松退出。这是正确的方法。祝你好运！

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2017-03-08T01:12:04.027

每当 zmq 上下文被销毁时，zmq_msg_recv 都会收到 -1。我在所有代码中都使用它作为终止条件。

```
while (!shutdown)
{
    ..
    ..
    int rc = zmq_msg_recv (&getMessage, socket, 0);
    if (rc != -1)
    {
      processMessage;
    }
    else 
      break;
} 
```

请记住在 main() 的末尾销毁 zmq 上下文以进行适当的清理。

```
zmq_ctx_destroy(zctx); 
```

# php - 想在 ZF2 中使用一种形式插入两个表

> ID：16212527
> 
> 赞同：2
> 
> 时间：2013-04-25T10:37:43.237
> 
> 标签：php, forms, zend-framework2

这可能有点奇怪，但我会尽力解释。基本上我有一个包含用户的表和一个包含客户的表。用户有权查看仅某些客户的数据。所以我想我会为用户权限创建一个单独的表，将用户 ID 和客户 ID 作为外键，每个客户/用户权限有一行。

当管理员使用使用 Zend\Form 的名为 UserForm 的类（以下简称为参考）将新用户添加到数据库时，我还想将表单旁边的所有客户显示为可以选择添加的按钮作为权限。现在，我想我会通过一个 JavaScript 数组来做到这一点，如果客户 ID 被选中/取消选中，它会附加或删除它们，然后将该数组作为隐藏值传递给表单，最后循环遍历数组，将一行插入数组中每个客户 ID 的权限表，并获取已创建的用户 ID。我不确定这是否是最好的方法，但这是我能想到的最好的方法。

希望这至少可以理解。所以，我有一个表格，但我想插入两个不同的表格。我想我的问题是如何将数组作为值传递给表单？以及如何在调用 saveUser() 方法时不仅插入用户表，还插入权限表（我也会在下面发布）。另外，这是一种非常奇怪的做法吗，我对此感到不必要的困难？我很想听听是否有更简单的方法。

我的用户窗体类：

```
namespace Admin\Form;
use Zend\Form\Form;

class UserForm extends Form
{
public function __construct($name = null)
{
    parent::__construct('user');
    $this->setAttribute('method', 'post');
    $this->add(array(
        'name' => 'userId',
        'attributes' => array(
            'type'  => 'Hidden',
        ),
    ));

    $this->add(array(
        'name' => 'activated',
        'attributes' => array(
            'value' => 1,
            'type'  => 'Hidden',
        ),
    ));
    $this->add(array(
        'name' => 'username',
        'attributes' => array(
            'type'  => 'text',
        ),
        'options' => array(
            'label' => 'Username:',
        ),
    ));
    $this->add(array(
        'name' => 'firstname',
        'attributes' => array(
            'type'  => 'text',
        ),
        'options' => array(
            'label' => 'First name:',
        ),
    ));
    $this->add(array(
        'name' => 'lastname',
        'attributes' => array(
            'type'  => 'text',
        ),
        'options' => array(
            'label' => 'Last name:',
        ),
    ));
    $this->add(array(
        'name' => 'submit',
        'attributes' => array(
            'type'  => 'submit',
            'value' => 'Go',
            'id' => 'submitbutton',
        ),
    ));

} 
```

}

我的 saveUser() 方法

```
public function saveUser(User $user)
{
    $data = array(
        'firstname'     => $user->firstname,
        'lastname'      => $user->lastname,
        'username'      => $user->username,
        'activated'     => $user->activated,
    );

    $userId = (int)$user->userId;
    if ($userId == 0) {
        $this->tableGateway->insert($data);
    } else {
        if ($this->getUser($userId)) {
            $this->tableGateway->update($data, array('userId' => $userId));
        } else {
            throw new \Exception('User ID does not exist');
        }
    }
} 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-25T10:54:45.053

一种方法是使用表单字段集。一个表单可以有多个Fieldset，每个Fieldset可以绑定不同的实体。

**当您在实体之间建立一对一**关系时，这些很有用

然后，您将创建 teo 实体，例如一个用户实体（正如您已经拥有的）和一个新实体来表示您的权限。

您将为每个对象创建一个 Feildset 并将对象绑定到字段集。（以 UserFieldSet 和 PermissionFieldset 为例）

查看有关表单字段集的部分：

[http://zf2.readthedocs.org/en/latest/modules/zend.form.advanced-use-of-forms.html](http://zf2.readthedocs.org/en/latest/modules/zend.form.advanced-use-of-forms.html)

如果你有**一对多的关系**，即。一个用户可以拥有许多权限，那么您最好查看表单集合：

[http://zf2.readthedocs.org/en/latest/modules/zend.form.collections.html](http://zf2.readthedocs.org/en/latest/modules/zend.form.collections.html)

还有一个为一对多关系动态添加新行的示例。

# math - 如何在 RGB 空间中复制 HSV 值的添加/混合

> ID：16212528
> 
> 赞同：0
> 
> 时间：2013-04-25T10:37:43.670
> 
> 标签：math, image-processing, graphics, opengl-es, opengl-es-2.0

目前，我正在使用 HSV 空间中的添加剂混合进行着色效果。在 HSV 空间中有一个 diff 值，该值被添加到图像纹理的各个像素中以获得所需的颜色效果。但这变得很昂贵，因为片段着色器必须进行两次昂贵的转换才能进行加法

1.  RGB -> HSV
2.  HSV添加
3.  HSV -> RGB

有一个更好的方法吗？diff 值将仅在 HSV 中提供。并且最终的颜色表示是在 RGB 中绘制。

非常感谢，

萨克

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-26T04:25:59.287

通过使用 RGB 中的颜色矩阵，您可以获得与 HSV 操作类似的效果。例如，围绕 r=g=b 轴的旋转类似于色调添加。（在色调通道中添加 x 度类似于在 RGB 中围绕 r=g=b 旋转 x 度。）沿 r=g=b 轴的平移类似于值添加。（我认为将 x 添加到值通道​​应该类似于将 x 添加到所有 r、g 和 b。）并且垂直于 r=g=b 轴的统一比例类似于饱和添加。我不知道将 x 添加到饱和度和在 RGB 中缩放之间的确切转换，但它应该不会太难解决。您应该能够将这些矩阵组合成单个矩阵，并将其实现为单个矩阵乘以 RGB 值。

# asp.net - asp.net 中的正则表达式验证

> ID：16212530
> 
> 赞同：0
> 
> 时间：2013-04-25T10:37:58.240
> 
> 标签：asp.net

我在asp.net中使用正则表达式验证器c#作为登录页面..我有不同的学生、讲师和管理员登录页面..登录ID的格式分别为1RNxxCSxxx、1RNLECSxxx、1RNADCSxxx（x位）我的问题它是否验证文本框并显示错误消息..但它仍然继续登录..我的代码是..

```
 <asp:RegularExpressionValidator ID="RegularExpressionValidator1" runat="server"       ControlToValidate="TextBox1" ErrorMessage="Enter in 1RNxxCSxxx format" ValidationExpression="[1][R][N][0-9][0-9][C][S][0-9][0-9][0-9]"></asp:RegularExpressionValidator> 
```

即..如果我在学生登录页面中输入讲师ID，尽管出现gettin错误消息，我仍然可以登录..任何帮助将不胜感激。谢谢你

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-25T10:43:51.497

从您的文本框名称看来，您正在使用自定义登录逻辑。我建议您考虑使用会员提供程序，它可以更强大地保护您的整个应用程序。查看[如何使用除 aspnetdb 之外的数据库配置成员船](https://stackoverflow.com/questions/14604595/how-to-configure-member-ship-with-a-database-other-than-aspnetdb/14604690#14604690)

**对于您的直接问题**，尽管在登录用户的方法中检查页面是否有效。

```
if( !Page.IsValid )
{
     return;
} 
```

更多信息可以在这里找到： [这个链接](http://msdn.microsoft.com/en-us/library/system.web.ui.page.isvalid.aspx)

您的正则表达式也不正确。使用以下方法成功匹配。

```
^1RN([0-9]{2}|LE|AD)CS[0-9]{3}$ 
```

上面的表达式表示字符串应该以 1RN 开头（^ 表示开始）有两个数字或 LE 或 AD，后跟字母 CS 和三个数字（$ 表示结束）。

# search - 我可以将常量搜索查询与短语查询结合 到 lucene 中的布尔查询中吗？

> ID：16212536
> 
> 赞同：0
> 
> 时间：2013-04-25T10:38:14.460
> 
> 标签：search, lucene, elasticsearch, text-search

我可以有一个`BooleanQuery`其中有两个其他查询，一个`SHOULD`和一个`MUST`？我希望`SHOULD`查询是 type `ConstantScoreQuery`，另一个是 type `PhraseQuery`。

我知道`PhraseQuery`实际上对总分有贡献，但`ConstantScoreQuery`不会有贡献。真的吗？

`ConstantScoreQuery`如果与 中的其他类型的查询一起，结果将如何排列`BooleanQuery`？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-25T16:27:17.023

与您的[其他问题](https://stackoverflow.com/questions/16213964/if-wildcardquery-doesnt-affect-the-scoring-of-documents-why-does-it-return-0-5)类似，[ConstantScoreQuery](http://lucene.apache.org/core/4_0_0/core/org/apache/lucene/search/ConstantScoreQuery.html)为总分贡献了一个常数。所有比赛都会从中获得持续的提升，非比赛不会从中获得提升。

如果`ConstantScoreQuery`是必需的搜索词，它不会对评分做出有意义的贡献（整体搜索返回的所有文档都将获得相同的分数提升），但它仍然有助于评分。

至于结果将如何“与其他类型的查询一起”排列，这真的太模糊而无法有意义地回答。也许您会从[有关评分的 Lucene 文档中](http://lucene.apache.org/core/4_0_0/core/org/apache/lucene/search/package-summary.html#scoring)受益。

# dependencies - CMake：取决于另一个项目

> ID：16212538
> 
> 赞同：3
> 
> 时间：2013-04-25T10:38:22.180
> 
> 标签：dependencies, cmake

我对 CMake 很陌生，想用它完成一个非常“常见”的任务。到目前为止，我只是简单地使用带有自动生成的 makefile 的 Eclipse CDT。假设我有两个项目 A 和 B。A 构建一个静态库，B 需要这个库。当然，在构建B的时候，我要保证A构建的静态库是最新的。因此，如果在 A 的源代码中进行了任何更改，则项目 B 的构建应该触发 A 的构建。当简单地将 A 作为 B 的依赖项插入时，这是 Eclipse 的默认行为。

那么，使用 CMake 实现这一目标的最简单方法是什么？我已经阅读了一些教程和类似的问题，但没有一个给我一个令人满意的答案。

例如，[http:](http://www.cmake.org/Wiki/CMake/Tutorials/Exporting_and_Importing_Targets) //www.cmake.org/Wiki/CMake/Tutorials/Exporting_and_Importing_Targets 教程可能是一个解决方案。然而，对于这样一个简单的任务来说，它似乎相当复杂。我必须“安装” A 的目标，但我不想安装任何东西，我只想 B 依赖 A。接下来，我听说过 ExternalProject_add 但我也不知道如何处理它。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-25T13:45:36.657

如果您从同一个 CMakeLists 文件构建它们，则使用目标名称指定链接就足够了：

```
add_library(LibraryA ${A_SOURCES}
target_link_libraries(LibraryA <any libraries that A depends on>)

add_executable(ProgramB)
target_link_libraries(ProgramB LibraryA <plus other libraries>) 
```

如果它们不在同一个 CMakeLists 文件中，则使用 ADD_SUBDIRECTORY() 包含 A 构建，（A 是 B 的子级），或者使用 ADD_SUBDIRECTORY() 从同一个顶级文件构建它们（A 和 B 是兄弟姐妹）。

# wpf - 选择更改 IsPostBack 或刷新

> ID：16212540
> 
> 赞同：0
> 
> 时间：2013-04-25T10:38:23.363
> 
> 标签：wpf, mvvm-light, selecteditem, selectionchanged, ispostback

选择项目后有没有办法`SelectionChangeEvent`刷新？我的 Windows Phone 应用程序有问题。

这是场景，我的组合框中有三个项目，当您选择一个项目时，它将导航到一个页面。现在，如果我选择第 1 项，我将被导航到第 1 项页面，但如果我点击返回按钮，然后再次单击第 1 项，它将不再导航或事件不会触发。

请问这种情况有补救办法吗？我浪费了 3 天时间来解决这个问题。非常感谢您的帮助。谢谢。

# svn - 用于从 SVN 检出单个修改文件的 Jenkins 插件

> ID：16212547
> 
> 赞同：2
> 
> 时间：2013-04-25T10:38:38.147
> 
> 标签：svn, jenkins, hudson, jenkins-plugins, hudson-plugins

我有一份工作，开发人员更改文件并在 SVN 中重新签入。开发人员签入文件后，[Jenkins](http://en.wikipedia.org/wiki/Jenkins_%28software%29)必须触发构建并将更改的文件（不是整个目录）从 SVN 复制到目标服务器。

例如，开发人员在 SVN 的主干中签入了一个文件。Trunk 包含大量文件，但 Jenkins 只需将更改的文件从 SVN 中继文件夹复制到目标服务器。

如何做到这一点？是否有有助于支持此功能的插件或功能？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-25T11:27:58.113

您不能从 Subversion 签出单个文件。您可以签出的最小单位是目录。

如果您已经有一个工作副本，an`svn update`将拉出差异。

您可以使用`svn export`或`svn cat`从存储库中提取单个文件，但完成后它不会与存储库建立连接（与工作副本不同）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-03-13T20:06:12.040

也许您可以在 SVN 中设置另一个文件夹，该文件夹将*svn externals*链接到该文件，然后检查该 1 个文件夹。

至于将其部署到服务器，这取决于您如何执行此操作（插件、脚本等）

# iphone - iphone sdk 中未打开电子邮件对话框

> ID：16212550
> 
> 赞同：0
> 
> 时间：2013-04-25T10:38:46.210
> 
> 标签：iphone, ios, objective-c, xcode, addressbook

在我的应用程序中，我使用 PersonPicker 视图从地址框中获取电子邮件 ID。

当我选择任何电子邮件 ID 时，我会尝试打开电子邮件对话框。但它会立即打开和关闭。

我无法解决这个问题。

我从[这里得到代码](http://gabriel-tips.blogspot.in/2012/02/how-to-import-contacts-from-address.html)

我的代码如下：

```
-(BOOL)peoplePickerNavigationController:(ABPeoplePickerNavigationController *)peoplePicker shouldContinueAfterSelectingPerson:(ABRecordRef)person property:(ABPropertyID)property identifier:(ABMultiValueIdentifier)identifier{

    // Get the first and the last name. Actually, copy their values using the person object and the appropriate
    // properties into two string variables equivalently.
    // Watch out the ABRecordCopyValue method below. Also, notice that we cast to NSString *.
    NSString *firstName = (NSString *)ABRecordCopyValue(person, kABPersonFirstNameProperty);
    NSString *lastName = (NSString *)ABRecordCopyValue(person, kABPersonLastNameProperty);

    // Compose the full name.
    NSString *fullName = @"";
    // Before adding the first and the last name in the fullName string make sure that these values are filled in.
    if (firstName != nil) {
        fullName = [fullName stringByAppendingString:firstName];
    }
    if (lastName != nil) {
        fullName = [fullName stringByAppendingString:@" "];
        fullName = [fullName stringByAppendingString:lastName];
    }

    // Get the multivalue e-mail property.
    CFTypeRef multivalue = ABRecordCopyValue(person, property);

    // Get the index of the selected e-mail. Remember that the e-mail multi-value property is being returned as an array.
    CFIndex index = ABMultiValueGetIndexForIdentifier(multivalue, identifier);

    // Copy the e-mail value into a string.
    email = (NSString *)ABMultiValueCopyValueAtIndex(multivalue, index);
    NSLog(@"%@",email);
    // Create a temp array in which we'll add all the desired values.
    NSMutableArray *tempArray = [[NSMutableArray alloc] init];
    [tempArray addObject:fullName];

    // Save the email into the tempArray array.
    [tempArray addObject:email];

    // Now add the tempArray into the contactsArray.
    [contactsArray addObject:tempArray];
    NSLog(@"%@",contactsArray);
    // Release the tempArray.
    [tempArray release];

    // Reload the table to display the new data.
    [table reloadData];

    // Dismiss the contacts view controller.
    [contacts dismissModalViewControllerAnimated:YES];
    [contacts release];

    MFMailComposeViewController* Apicker = [[MFMailComposeViewController alloc] init];
    if (Apicker != nil)
    {

        [Apicker setSubject:@""];
        NSString * someString = nil;
        someString=@"<a href=\"https://www.google.com\">Google</a>";
        [Apicker setMessageBody:someString isHTML:YES];

        NSArray *toRecipients = [NSArray arrayWithObjects:email, nil];
        [Apicker setToRecipients:toRecipients];

        Apicker.mailComposeDelegate = self;
        [self presentModalViewController:Apicker animated:YES];
        [Apicker release];

    }

    return NO;
} 
```

**我认为这可能是解雇和呈现模态视图的问题。**

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-25T10:49:28.410

您解雇和出席的问题是两者重叠。- 解雇它，然后像你做的那样显示它但是你遇到了一个问题，因为这些东西是动画的。不要在那里设置动画或将预设延迟到解雇之后

# javascript - Jquery图像滑块从右到左完美地工作，但从左到右我无法让它居中

> ID：16212552
> 
> 赞同：1
> 
> 时间：2013-04-25T10:38:52.380
> 
> 标签：javascript, jquery

我正在研究我的摄影作品集展示/画廊滑块。

我已经有一半工作原型，但我无法终生弄清楚为什么它将图像完美地集中在一个方向而不是另一个方向：S

[http://jsfiddle.net/K88Yg/3/](http://jsfiddle.net/K88Yg/3/)

有趣的是，如果我调整窗口大小并第二次调用我的 move_slide() 函数，它会转到正确的位置......那么发生了什么？任何人都可以阐明吗？

我相信这是一个相当古怪的问题。所以一双新鲜的眼睛可以帮我分配。

到目前为止我的代码：

```
jQuery(window).load(function() {

    //
    function set_slide_width(add_extra) {
        if (!add_extra) {add_extra = 0;}
        var slide_width = 0;
        $("#barely_slide article img").each(function(){
            slide_width += $(this).outerWidth();
        });
        $("#barely_slide article").css("width",slide_width + add_extra);
    }
    //
    set_slide_width();

    //
    function move_slide() {
        var focus_margin = 0;
        var img_real_height = 0;
        //
            var add_extra = 0;
            //var prev_deduct = 0;
        //
        $("#barely_slide article img").each(function(){
            //
                //if ($(this).attr("class") == "previous") {
                //  var theImage = new Image();
                //  theImage.src = $(this).attr("src");
                //  var img_real_width = theImage.width;
                //  var img_real_width_padding = img_real_width + ($(this).outerWidth() - $(this).width());
                //  prev_deduct = img_real_width_padding - $(this).outerWidth();
                //}
            //
            if ($(this).attr("class") == "focus") {
                    var theImage = new Image();
                    theImage.src = $(this).attr("src");
                    var img_real_width = theImage.width;
                    var img_real_width_padding = img_real_width + ($(this).outerWidth() - $(this).width());
                    img_real_height = theImage.height;
                    //
                        add_extra = img_real_width_padding - $(this).outerWidth();
                    //
                focus_margin += img_real_width_padding / 2;
                return false;
            }
            focus_margin += $(this).outerWidth();
        });
        //
            set_slide_width(add_extra);
        //
        var container_center = $("#barely_slide").outerWidth() / 2;
        var offset = container_center - focus_margin;
        //console.dir(offset);
        $("#barely_slide article").animate({"margin-left": offset }, "fast");
            //
            var img_height_offset = (img_real_height / 2) - 150;
            $(".focus").animate({"height":img_real_height,"margin-top":-img_height_offset}, "fast");
    }
    //
    move_slide();

    //
    var resize_timeout;
    $(window).resize(function() {
        clearTimeout(resize_timeout);
        resize_timeout = setTimeout(function(){    
            move_slide();
        },100);
    });

    //
    $("#barely_slide article img").on("click", function(){
        if ($(this).attr("class") == "focus") {return false;}

        //
            $("#barely_slide article img").removeClass("previous");
            $("#barely_slide article .focus").addClass("previous");
            $(".previous").animate({"height":300,"margin-top":0}, "fast");
        //

        $("#barely_slide article .focus").removeClass("focus");
        $(this).addClass("focus");
        move_slide();
        return false;
    });

}); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-05-12T15:39:21.537

我浏览了您的代码，发现您在第一张图片之前正在做一些数学运算（带有班级的`focus`那个被调整大小。这会影响您的数学运算。我看到当单击已经聚焦的图像时，正确的包含正在移动，但是不是左派 这是解决问题的关键。

你正在移动你的图像，它会居中。但是随后，您调整了最后一张聚焦图片的大小，这就是将您的内容向左移动的原因。

我最快的解决方案是在第一次 img 调整大小后调用计算。见这里：http: [//jsfiddle.net/K88Yg/4/](http://jsfiddle.net/K88Yg/4/)

这可能不是您想要的效果，我只是想向您展示问题所在。

我的解决方法只是在 animate 之后调用“移动”函数`complete`。

```
$("#barely_slide article img").on("click", function(){
    var $this = $(this);
    $(".focus").animate({"height":300,"margin-top":0}, {
        duration : "fast",
        complete: function(){
            $("#barely_slide article img").removeAttr("class");
            $this.addClass("focus");
            move_slide();
        }
    });
    return false;
}); 
```

请注意，在`complete`函数之前，您需要将`this`值保存到变量中。

**编辑：**我做了 2 或 3 次破解来达到你想要的结果。这里的小提琴：http: [//jsfiddle.net/K88Yg/5/](http://jsfiddle.net/K88Yg/5/)

这里列出了我所做的更改：

功能点击：

```
$("#barely_slide article img").removeClass("previous");
$("#barely_slide article .focus").addClass("previous");
var oldStyle = $(".previous").attr('style');
$(".previous").css({"height":'300px',"margin-top":0}  )  
$("#barely_slide article .focus").removeClass("focus");
$(this).addClass("focus");
move_slide();
$(".previous").attr('style', oldStyle)  
$(".previous").animate({"height":'300px',"margin-top":0}, "fast"); 
```

我正在保存当前的 CSS，然后在计算之前更改它们。计算后，我正在设置旧的 CSS 并做动画。

通过这样做，我有一个小故障，有时最后一张图像在包装。发现那是函数`add_extra`。所以我保存了旧的额外内容并做了一个小条件：

```
if(old_extra > add_extra)set_slide_width(add_extra);

var container_center = $("#barely_slide").outerWidth() / 2;
var offset = container_center - focus_margin;
$("#barely_slide article").animate({"margin-left": offset }, {duration : "fast", complete : function(){
    if(old_extra < add_extra)set_slide_width(add_extra);
}}); 
```

如果旧的附加值更高，它会在动画之前更改宽度。如果它较低，它会等到动画完成。不再有包装故障。

**EDIT2：**检查[Chango 的答案](https://stackoverflow.com/a/16527927/2324107)。他做了数学计算，允许你做与上面的代码完全相同的事情，但代码更少。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-05-12T22:37:48.817

好的，解决方法很简单，问题出在这个方法上：

```
$("#barely_slide article img").on("click", function(){
    if ($(this).attr("class") == "focus") {return false;}

    //
        $("#barely_slide article img").removeClass("previous");
        $("#barely_slide article .focus").addClass("previous");
        $(".previous").animate({"height":300,"margin-top":0}, "fast");
    //

    $("#barely_slide article .focus").removeClass("focus");
    $(this).addClass("focus");
    move_slide();
    return false;
}); 
```

问题是您在 $(".previous") 完成动画之前移动幻灯片。后果是如果“.previous”在“.focus”的左边，那么focus_margin计算错误。

这是解决方案：

```
$("#barely_slide article img").on("click", function(){
    if ($(this).attr("class") == "focus") {return false;}

    $("#barely_slide article img").removeClass("previous");
    $("#barely_slide article .focus").addClass("previous");

    var $image = $(this);
    $(".previous").animate({"height":300,"margin-top":0}, "fast",
        function () {
          $("#barely_slide article .focus").removeClass("focus");
          $image.addClass("focus");
          move_slide();
        });

    return false;
}); 
```

这是带有其他一些修改的 jsfiddle：http: [//jsfiddle.net/JQaLB/2/](http://jsfiddle.net/JQaLB/2/)

修改：

```
$(this).hasClass("focus") 
```

好于

```
$(this).attr("class") == "focus" 
```

和：

```
add_extra = add_extra || 0; 
```

好于

```
if (!add_extra) {add_extra = 0;} 
```

稍后我将进行编辑以添加更多详细信息。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-05-13T17:39:24.487

我找到了另一种效果更好的解决方案。您只需要更改`move_slide`功能：

```
function move_slide() {
  var focus_margin = 0;
  var img_real_height = 0;
  var add_extra = 0;
  $("#barely_slide article img").each(function(){
    if ($(this).hasClass("focus")) {
      var theImage = new Image();
      theImage.src = $(this).attr("src");
      var img_real_width = theImage.width;
      var img_real_width_padding = img_real_width + ($(this).outerWidth() - $(this).width());
      img_real_height = theImage.height;

      add_extra = img_real_width_padding - $(this).outerWidth();

      focus_margin += img_real_width_padding / 2;
      return false;
    /***************** This is where the changes begin *************************/
    } else if ($(this).hasClass("previous")) {
      // If has the previous class, calculate the width with a height of 300.
      var shrinked_width = 300 *  $(this).width() / $(this).height();
      // add the padding.
      var img_width_width_padding = shrinked_width + ($(this).outerWidth() - $(this).width());
      // then update the focus_margin
      focus_margin += img_width_width_padding;
    } else {
      focus_margin += $(this).outerWidth();
    }
    /***************** This is where the changes end ***************************/
  });
  set_slide_width(add_extra);

  var container_center = $("#barely_slide").outerWidth() / 2;
  var offset = container_center - focus_margin;

  $("#barely_slide article").animate({"margin-left": offset }, "fast");

  var img_height_offset = (img_real_height / 2) - 150;
  $(".focus").animate({"height":img_real_height,"margin-top":-img_height_offset}, "fast");
} 
```

这是jsfiddle：http: [//jsfiddle.net/JQaLB/4/](http://jsfiddle.net/JQaLB/4/)

# java - 从 onchange 值显示多个相同 id 的 div 或 table 内容

> ID：16212554
> 
> 赞同：1
> 
> 时间：2013-04-25T10:39:00.337
> 
> 标签：java, html, jsp

我想知道您是否可以从 onchange 值显示多个具有相同 id 的 div 或 table 内容。就像我从下拉列表中选择一个选项并显示其内容但我想在选择相同选项时从我的页面的其他位置显示另一个内容。

我的代码如下：

```
<select name="debitOrderType" id = "debitOrderType" 
onChange="display(this,'BANK','CARD','INVOICE');">
<option>Please select...</option>
<option value="BANK" selected>Debit Order (Monthly)</option>
<option value="CARD">Credit Card (Monthly)</option>
<option value="INVOICE">Invoice (Yearly)</option>
</select> 
```

然后，当从下拉列表中选择发票时，它会显示以下内容：

```
<tbody id="INVOICE" style="display: none;">
<tr>
<td class="field">Thank you for selecting to pay yearly in advance. By doing so you 
are receiving one month's free listing.
</td></tr>
</tbody> 
```

但是现在我想在选择发票但在页面的另一部分显示以下内容：

```
<tbody id="INVOICE" style="display: none;">
<tr><td height="5"></td></tr>
<tr><td align="right">This is your discounted yearly price</td></tr>  
</tbody> 
```

但只有第一部分显示，而不是两者。看起来您不能显示来自同一 ID 的多个内容。

希望你能帮我？

提前致谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-25T10:46:17.013

您不能在 HTML 中定义具有相同 id 的两个元素，这意味着它是一个**唯一**标识符。类可以多次使用，所以使用它！

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-25T10:47:08.753

首先，将相同的 id 分配给多个元素是一种习惯做法，尽管 DOM 永远不会找到相同 id 的第二个元素。将**类**分配给两个表并使其在组合框的 onChange 事件中可见，然后它将起作用。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-25T10:52:05.340

如果要在单个对象上显示或应用 css，则应使用`ID`. 如果您想在多个对象上显示或应用 css，那么您应该使用`CLASS`.

在您的示例中，您应该避免使用 ID 并使用类。

避免这种情况

```
 id="INVOICE" 
```

用这个

```
class="INVOICE" 
```

希望它会帮助你。

# c#-4.0 - 启动 ManagementEventWatcher 时未找到异常

> ID：16212561
> 
> 赞同：4
> 
> 时间：2013-04-25T10:39:26.873
> 
> 标签：c#-4.0, service, managementeventwatcher

启动 MaagementEventWatcher 时有时未找到异常

我的代码示例如下：

```
 try
        {
            string scopePath = @"\\.\root\default";
            ManagementScope managementScope = new ManagementScope(scopePath);
            WqlEventQuery query =
                new WqlEventQuery(
                    "SELECT * FROM RegistryKeyChangeEvent WHERE " + "Hive = 'HKEY_LOCAL_MACHINE'"
                    + @"AND KeyPath = 'HARDWARE\\DEVICEMAP\\SERIALCOMM'");
            registryWatcher = new ManagementEventWatcher(managementScope, query);
            registryWatcher.EventArrived += new EventArrivedEventHandler(SerialCommRegistryUpdated);

            registryWatcher.Start();
        }
        catch (Exception ex)
        {
            Console.WriteLine(ex.Message);
            if (registryWatcher != null)
            {
                registryWatcher.Stop();
            }
        } 
```

例外：

```
 Not found
  at System.Management.ManagementException.ThrowWithExtendedInfo(ManagementStatus errorCode)
  at System.Management.ManagementEventWatcher.Start()
  at MTTS.LabX.RockLog.AppService.USBMonitor.AddRegistryWatcherHandler()] 
```

注意：我检查了注册表，找到了文件夹和文件。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-26T09:40:07.267

当 WQL 查询中没有匹配项时，抛出 ManagementException“未找到”。也许您指定了错误的 KeyPath 或 KeyPath 不再可用。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-05-08T07:36:16.800

实际上问题是，在笔记本电脑（具有串行端口的电脑，所以 COM1 端口）中，第一次启动时没有在注册表中创建 SERIALCOMM 文件夹，因为，

基本上我们将设备插入 SERIALCOMM 文件夹将创建的 USB 端口或串行端口，在这种情况下，我们使用 WMI 从注册表中获取连接的通信端口。

在某些笔记本电脑中，没有连接 USB 端口和串行端口因此，未创建 SERIALCOMM 文件夹，那时我们正在访问此注册表路径，我们会收到错误消息。

所以解决方案是，

```
try
            {
                string scopePath = @"\\.\root\default";
                ManagementScope managementScope = new ManagementScope(scopePath);

                string subkey = "HARDWARE\\DEVICEMAP\\SERIALCOMM";

                using (RegistryKey prodx = Registry.LocalMachine)
                {
                    prodx.CreateSubKey(subkey);
                }

                WqlEventQuery query = new WqlEventQuery(
                    "SELECT * FROM RegistryKeyChangeEvent WHERE " +
                   "Hive = 'HKEY_LOCAL_MACHINE'" +
                  @"AND KeyPath = 'HARDWARE\\DEVICEMAP\\SERIALCOMM'");

                registryWatcher = new ManagementEventWatcher(managementScope, query);

                registryWatcher.EventArrived += new EventArrivedEventHandler(SerialCommRegistryUpdated);
                registryWatcher.Start();
            }
            catch (Exception ex)
            {
                Console.WriteLine(ex.Message);
                if (registryWatcher != null)
                {
                    registryWatcher.Stop();
                }
            } 
```

# json - 如何从 extjs 存储中获取 JSON 数组中的属性值？

> ID：16212562
> 
> 赞同：0
> 
> 时间：2013-04-25T10:39:29.930
> 
> 标签：json, extjs, store

我一直在尝试从 JSON 存储中的 JSON 数组中的值动态生成一个复选框。

```
{"MODULECATOGERY":[{"Menu":"MSU"},{"Menu":"SCHEDULE"},{"Menu":"MARKET_DASHBOARD"},{"Menu":"FE_REFERENCE"},{"Menu":"QC_TOOLS"},{"Menu":"QUICKQC_VOICE"},{"Menu":"QUICKQC_DATA"},{"Menu":"MARKETQC_VOICE"},{"Menu":"MARKETQC_DATA"},{"Menu":"SURGERY"},{"Menu":"FILE_INVENTORY"},{"Menu":"MARKET_TRACKER"},{"Menu":"DRIVE_ROUTE_TRACKER"},{"Menu":"TICKETS"},{"Menu":"TICKET_TRACKER"},{"Menu":"ASSETS"},{"Menu":"METRICS"},{"Menu":"DAILY_STATUS"},{"Menu":"DAILY_PROCESSING"},{"Menu":"WEEKLY_WORKFLOW"},{"Menu":"CUSTOMER_QUESTIONS"},{"Menu":"KPI_PERFORMANCE_METRICS"},{"Menu":"COLLECTION_METRICS"},{"Menu":"OPERATIONS_DASHBOARD"},{"Menu":"PRODUCTION_DASHBOARD"},{"Menu":"SUPPORT_DASHBOARD"},{"Menu":"REVENUE_TRACKER"},{"Menu":"DEPLOYMENT_TRACKER"},{"Menu":"TICKETS"},{"Menu":"TICKET_TRACKER"},{"Menu":"ASSET_MANAGEMENT"},{"Menu":"GENERATE_SHIPMENT"},{"Menu":"SHIPMENT_TRACKER"},{"Menu":"RESOURCES"},{"Menu":"SCHEDULE"},{"Menu":"TRACKER"}]} 
```

如何在上述 JSON 中获取与“菜单”关联的值。？如果我可以将每个值放入一个数组中，那么我可以动态分配这些值以生成一个复选框组。

提前致谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-25T12:26:19.833

您可以迭代您的商店：

```
store.each(function(record) {
    var menu = record.get('Menu');
}); 
```

编辑：既然你说这不适用于动态数据，我认为你在它完成加载之前对其进行迭代。为了确保在加载后处理迭代，您可以执行以下操作：

```
store.on({
    //Listener that fires everytime after your store has loaded
    load: function() {
        store.each(function(record) {
             var menu = record.get('Menu');
             //do stuff
        });
    }
});
store.load(); 
```

如果您只想在第一次加载商店时执行代码，您可以在`load()`方法上使用回调函数：

```
store.load(function() {
    store.each(function(record) {
        var menu = record.get('Menu');
        //do stuff
    });
}); 
```

# javascript - 区分危险的重定向和不相关的 ajax 响应

> ID：16212570
> 
> 赞同：0
> 
> 时间：2013-04-25T10:39:53.333
> 
> 标签：javascript, ajax, http, redirect

在我的网页上，可以发送 ajax 请求，然后跳转到另一个页面，这意味着 AJAX 请求无关紧要并且被浏览器中止。从这些 jquery AJAX 请求之一返回到错误处理可能是：

```
readyState = 0
responseText: ""
status=0 
```

但是，请注意错误处理程序甚至可能不会被调用。这取决于浏览器何时中止请求以及用户何时选择进入另一个页面。如果调用它，则使用上述参数调用它。

这是它变得多汁的地方。当位置设置为另一个域时，从 AJAX 请求返回 302 重定向时会发生类似的响应。浏览器（IE 和 FF）会破坏 302 并使用相同的信息调用错误处理程序：

```
readyState = 0
responseText: ""
status=0 
```

我知道这是一个 302，使用 fiddler 将位置设置为另一个域。但是把提琴手拿走，你看到的一切都在上面。

我需要能够区分

*   由于用户转到另一个页面而中止的 ajax 请求
*   由于重定向到另一个域而中止的 ajax 请求

但是，如果我得到两者的完全相同的信息，我就不能。

有小费吗？我可以检查 DOM 中的窗口对象或其他东西吗？注意：我无法预测请求何时返回 302。我也看不到`location header`服务器端。

# blackberry - 黑莓应用程序在 wi-fi 上工作，但在 Packet Data/GPRS 上不工作

> ID：16212571
> 
> 赞同：1
> 
> 时间：2013-04-25T10:39:53.323
> 
> 标签：blackberry, java-me, wifi, blackberry-simulator, gprs

我创建了在 wi-fi 上运行良好的黑莓应用程序。但是当我关闭 wi-fi 并使用移动网络时，我无法运行应用程序。它显示没有可用的 Internet 连接。

我写了这些行。

```
if (DeviceInfo.isSimulator()) 
            {
                deviceinfo = deviceinfo.concat(";deviceside=true");
            } 
```

这是我的 Http 连接类

```
import java.io.IOException;
import java.io.InputStream;

import javax.microedition.io.Connector;
import javax.microedition.io.HttpConnection;

import net.rim.device.api.system.DeviceInfo;
import net.rim.device.api.system.RadioInfo;
import net.rim.device.api.ui.UiApplication;
import net.rim.device.api.ui.component.Dialog;

public class HttpConn
{
    public String jsonresponse (String url) 
    { 
        String response = null; 
        HttpConnection httpConnection = null; 
        InputStream inStream = null; 
        int code; 
        StringBuffer stringBuffer = new StringBuffer();
        String deviceinfo=url;
        try 
        {
             if (DeviceInfo.isSimulator()) 
               {
                      deviceinfo = deviceinfo.concat(";deviceside=true");                    
               }

/*           else if (WLANInfo.getWLANState() == WLANInfo.WLAN_STATE_CONNECTED) 
             {

                 deviceinfo = ";interface=wifi";

              }*/
             else if ( (RadioInfo.getActiveWAFs() & RadioInfo.WAF_WLAN) != 0 && RadioInfo.getSignalLevel( RadioInfo.WAF_WLAN ) != RadioInfo.LEVEL_NO_COVERAGE )
             {
                      deviceinfo = deviceinfo.concat(";interface=wifi");

             }

//           else if (WLANInfo.getWLANState() == WLANInfo.WLAN_STATE_CONNECTED) 
//           {
//                   deviceinfo = ";interface=wifi";//                  
//           }
            if ( (RadioInfo.getActiveWAFs() & RadioInfo.WAF_WLAN) != 0 && RadioInfo.getSignalLevel( RadioInfo.WAF_WLAN ) != RadioInfo.LEVEL_NO_COVERAGE )
             {
                      deviceinfo = deviceinfo.concat(";interface=wifi");                     
             }

//           else if ((CoverageInfo.getCoverageStatus() & CoverageInfo.COVERAGE_DIRECT) == CoverageInfo.COVERAGE_DIRECT) 
//           {
//                  String carrierUid = getCarrierBIBSUid();
//
//                  if (carrierUid == null) 
//                  {
//                      // Has carrier coverage, but not BIBS. So use the carrier's TCP
//                      // network
//
//                      deviceinfo = ";deviceside=true";
//                      
//                  } 
//                  else 
//                  {
//                      // otherwise, use the Uid to construct a valid carrier BIBS
//                      // request
//
//                      deviceinfo = ";deviceside=false;connectionUID="+carrierUid + ";ConnectionType=mds-public";
//                      
//                  }
//              }
//           
//            // Check for an MDS connection instead (BlackBerry Enterprise Server)
//           else if ((CoverageInfo.getCoverageStatus() & CoverageInfo.COVERAGE_MDS) == CoverageInfo.COVERAGE_MDS) 
//              {
//
//                  deviceinfo = ";deviceside=false";
//                  
//              }
//
//              // If there is no connection available abort to avoid hassling the user
//              // unnecssarily.
//              else if (CoverageInfo.getCoverageStatus() == CoverageInfo.COVERAGE_NONE) 
//              {
//                  deviceinfo = "none";
//                  
//
//              }
//              else
//              {
//                  deviceinfo=";deviceside=true";
//              }

                 //if(CoverageInfo.isCoverageSufficient(CoverageInfo.COVERAGE_DIRECT,RadioInfo.WAF_WLAN,false))

//            httpConnection = (HttpConnection) Connector.open(url+";interface=wifi", Connector.READ);
            httpConnection = (HttpConnection) Connector.open(deviceinfo, Connector.READ);
            httpConnection.setRequestMethod(HttpConnection.GET); 

            code = httpConnection.getResponseCode(); 

            if(code == HttpConnection.HTTP_OK) 
            {
                inStream=httpConnection.openInputStream(); 
                int c; 

                while((c=inStream.read())!=-1) 
                { 
                  stringBuffer.append((char)c); 
                } 
                response=stringBuffer.toString(); 
                System.out.println("Response Getting from Server is ================" + response); 
            }
            // Is the carrier network the only way to connect?
            // In theory, all bases are covered by now so this shouldn't be reachable.But hey, just in case ...

        else 
            {
                UiApplication.getUiApplication().invokeLater(new Runnable() 
                {
                    public void run()
                    {       
                        Dialog.inform("Connection error"); 
                    } 
                }); 
            }        
//          return deviceinfo;
        } 
        catch (Exception e) 
        {
            System.out.println("caught exception in jsonResponse method"+e.getMessage());
        } 
        finally
        {
        //      if (outputStream != null) 
        //      { 
        //          outputStream.close(); 
        //      }
                if (inStream != null) 
                { 
                    try 
                    {
                        inStream.close();
                    } 
                    catch (IOException e) 
                    {
                        // TODO Auto-generated catch block
                        e.printStackTrace();
                    } 
                }
                if (httpConnection != null ) 
                { 
                    try 
                    {
                        httpConnection.close();
                    } 
                    catch (IOException e) 
                    {
                        // TODO Auto-generated catch block
                        e.printStackTrace();
                    } 
                } 
        }
        return response; 
    }

//  private synchronized static String getCarrierBIBSUid() {
//      ServiceRecord[] records = ServiceBook.getSB().getRecords();
//      int currentRecord;
//
//      for (currentRecord = 0; currentRecord < records.length; currentRecord++) {
//          if (records[currentRecord].getCid().toLowerCase().equals("ippp")) {
//              if (records[currentRecord].getName().toLowerCase()
//                      .indexOf("bibs") >= 0) {
//                  return records[currentRecord].getUid();
//              }
//          }
//      }
//
//      return null;
//  }

} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-26T13:51:58.340

实际上找到了解决方案。

[java.io.IOException: APN 未指定。我必须手动为 Wi-Fi 网络设备设置什么 APN？](https://stackoverflow.com/questions/8472992/java-io-ioexceptionapn-is-not-specified-what-apn-i-have-to-set-manually-to-de)

[http://m2m.icpdas.com/download/gtm-201_modem/manual/gprs_apn.pdf](http://m2m.icpdas.com/download/gtm-201_modem/manual/gprs_apn.pdf)

[http://www.faqspedia.com/list-of-all-indian-mobile-operators-access-point-names](http://www.faqspedia.com/list-of-all-indian-mobile-operators-access-point-names)

参考这个链接。

实际上我们必须手动设置 APN。我们从提供者那里得到它。

我希望有人从我的这个答案中得到解决方案。非常感谢您的支持。

# javascript - Nicedit 编辑器图片上传

> ID：16212573
> 
> 赞同：1
> 
> 时间：2013-04-25T10:39:57.247
> 
> 标签：javascript, nicedit

我在我的网站上使用“niceEdit”编辑器，无论如何它很有魅力，但现在当我尝试将图像“上传”到编辑器时，我得到了这个按摩。

**“上传您的图片时出错（将您的图片发送到 imageshack 失败。”**

我找了一下，发现有人用 niceuplod 文件更改了，你还必须获取 api 密钥。

所以我改变了从以下调用编辑器的方式：

```
bkLib.onDomLoaded(function() { 
           nicEditors.allTextAreas(new nicEditor({maxHeight : 250}).panelInstance('contect'));

         });

        $('form').submit(function(){
nicEditors.findEditor('contect').saveContent();
//console.log(nicEditors.findEditor('contect').getContent());

        });

to this one 
bkLib.onDomLoaded(function() {
    new nicEditor({
        buttonList : ['bold','italic','underline','upload'],
        iconsPath:'nicEditorIcons.gif',
        uploadURI : 'nicUpload.php', 
    }).panelInstance('contect');
});

then i got the following error 
top.nicUploadButton is undefined
and in my console the following 
TypeError: r.removeInstance is not a function

r.removeInstance(e); 
```

那么为什么你认为我有这个问题，我应该从哪里开始寻找？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-25T10:48:25.510

您必须从网站获得自己的 API 代码，然后在 niceUpload 文件中进行更改

你会在代码的开头罚款它

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-12-22T10:40:42.570

[http://wiki.nicedit.com/w/page/515/Configuration%20Options](http://wiki.nicedit.com/w/page/515/Configuration%20Options)

寻找 uploadURI 选项，它对你有用，对我也有用。

# linux - 为什么它只复制一个文件

> ID：16212575
> 
> 赞同：0
> 
> 时间：2013-04-25T10:40:03.683
> 
> 标签：linux

它只复制一个文件。

```
find ../../ -type f -name <filename.PDF> -print0 | xargs -0 -I file cp -rv file --target-directory=directory name with path 
```

为什么它只复制一个文件。我想复制所有具有相同名称但在不同日期和不同文件夹中创建的文件。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-25T10:47:34.797

尝试这样的事情：

```
cnt=1
find ../../ -type f -name filename.PDF | 
while read fname
do
  f=$(basename $fname)
  cp $file /target/directory/${f}.${cnt}
  cnt=$(( $cnt + 1 ))
done 
```

给每个目标文件一个唯一的编号。

# ios - iOS如何复制/引用C-Array？

> ID：16212582
> 
> 赞同：1
> 
> 时间：2013-04-25T10:40:20.843
> 
> 标签：ios, objective-c, arrays

我有 3 个带有整数（枚举）的数组：

```
static int *openEnv[] = {INGMenuItemLogon,INGMenuItemSpace,INGMenuItemAppointment,INGMenuItemInfo,INGMenuItemSettings};
static int *closedEnv[] = {INGMenuItemLogoff,INGMenuItemSpace,INGMenuItemOverview,INGMenuItemAccounts,INGMenuItemTransfer,INGMenuItemAnalyse,INGMenuItemAppointment,INGMenuItemInfo,INGMenuItemSettings};
int *currentEnv[]; 
```

如果用户点击一个按钮，我希望将`currentEnv`其更改为`openEnv`或`closedEnv`

```
- (void) tap
{
    if( closed ) currentEnv = closedEnv;
    else currentEnv = openEnv;
} 
```

但这会产生构建错误。 `openEnv`并且`closedEnv`有 2 种不同的尺寸，我应该怎么做才能复制它？我该怎么做才能引用或复制到它的静态数组？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-25T10:43:09.443

尝试这个：

```
static int *openEnv[] = {INGMenuItemLogon,INGMenuItemSpace,INGMenuItemAppointment,INGMenuItemInfo,INGMenuItemSettings};
static int *closedEnv[] = {INGMenuItemLogoff,INGMenuItemSpace,INGMenuItemOverview,INGMenuItemAccounts,INGMenuItemTransfer,INGMenuItemAnalyse,INGMenuItemAppointment,INGMenuItemInfo,INGMenuItemSettings};
//int *currentEnv[];
int **currentEnv;

- (void) tap
   {
     if( closed ) 
        currentEnv = closedEnv;
     else 
        currentEnv = openEnv;
   } 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-25T10:44:13.573

只需使用：`int ** currentEnv = <the array>`

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-25T10:50:54.653

*您已经声明了指向 int*的指针数组。正确的是

```
static int openEnv[] = {INGMenuItemLogon,INGMenuItemSpace,INGMenuItemAppointment,INGMenuItemInfo,INGMenuItemSettings};
static int closedEnv[] = {INGMenuItemLogoff,INGMenuItemSpace,INGMenuItemOverview,INGMenuItemAccounts,INGMenuItemTransfer,INGMenuItemAnalyse,INGMenuItemAppointment,INGMenuItemInfo,INGMenuItemSettings}; 
```

（不带星`*`号）声明 int 数组，以及

```
int *currentEnv; 
```

作为指向 int 的指针。然后您可以分配 eg`currentEnv = openEnv`以便`currentEnv`指向 的元素`openEnv`。

# r - R - ASCII 文件中的栅格函数 NAs 值低于 -9999

> ID：16212587
> 
> 赞同：1
> 
> 时间：2013-04-25T10:40:32.280
> 
> 标签：r, import, ascii, raster

`Min. :-69826220`我在导入值从到 的 ASCII 栅格时遇到问题`Max. :167780500`。我遇到的问题是，当我使用 raster 函数导入 ASCII 文件时，每个小于的值`-9999`都报告为`NA`，最小值为`-9458`.

这是该功能的错误吗？是否有解决方法？当我将相同的 ASCII 文件作为数据框导入时，一切都很好，我得到了整个值范围。我也使用相同的程序来导入其他 ASCII 栅格并且没有任何问题。

这是 ASCII 文件的链接[https://dl.dropboxusercontent.com/u/24234831/ps0011yme.asc](https://dl.dropboxusercontent.com/u/24234831/ps0011yme.asc)

这是会话信息，我打开了一个新会话以防万一。

> sessionInfo() R 版本 3.0.0 (2013-04-03) 平台：x86_64-w64-mingw32/x64 (64-bit)

语言环境：[1] LC_COLLATE=English_United States.1252 [2] LC_CTYPE=English_United States.1252
[3] LC_MONETARY=English_United States.1252 [4] LC_NUMERIC=C
[5] LC_TIME=English_United States.1252

附加的基础包：[1] stats graphics grDevices utils datasets methods base

其他附加软件包：[1] raster_2.1-16 sp_1.0-8

通过命名空间加载（未附加）：[1] grid_3.0.0 lattice_0.20-15

任何帮助表示赞赏

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-25T11:04:38.157

您可以尝试`setMinMax()`在您的光栅文件上使用来尝试计算最小值和最大值并将它们存储在返回的 Raster* 对象中。像这样尝试：

```
r <- setMinMax( raster("path/to/myraster.asc") ) 
```

我不确定发生了什么，因为如果我下载您的数据并执行以下操作：

```
r1 <- raster( "~/Downloads/test.asc")
summary(values(r1))
     Min.   1st Qu.    Median      Mean   3rd Qu.      Max.      NA's 
-69830000  -4789000    737300  16950000  13880000 167800000     71468 
```

请将 的输出添加`sessionInfo()` *到您的问题*中，即不要作为评论。

这种情况下的错误是由于没有`rgdal`安装引起的，它们是与地理空间数据抽象库的绑定，对于导入/导出栅格和 shapefile 数据非常重要。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-04-25T12:05:09.383

我无法重现您的错误。这是一个手工构建的 .asc 文件：

```
NCOLS 3 
NROWS 3 
XLLCORNER 0 
YLLCORNER 0 
CELLSIZE 0.5 
NODATA_value -9999 
1e-6 0.3 -34567891234
0.2 -1e6 25
3 68492758321934 20 
```

正确加载到`raster`对象中。你会注意到`NODATA_value`那里的项目，它解释了你的 -9999 来自哪里。我敢打赌，您的源 .asc 文件中有些内容已损坏。您可以发布标题和数据的小样本吗？

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-29T02:22:41.137

'raster' 中的内部 ascii 文件驱动程序假定如果标志值 < 0，则没有低于 NA 标志值的有效值（我不建议在值中间使用 NA 标志）。显然，这种方法可能会导致这种情况下的问题；我会改变的。如果您这样做，您可以看到内部驱动程序和 gdal 驱动程序之间的区别

```
 library(raster)
 library(rgdal)
 a1 <- raster(filename, native=TRUE)
 a2 <- raster(filename, native=FALSE) 
```

# python - django：获取模板标签中的当前语言环境

> ID：16212589
> 
> 赞同：1
> 
> 时间：2013-04-25T10:40:36.643
> 
> 标签：python, django, localization, django-templates

我有一个国际化的 django (1.4) 应用程序。

在这个应用程序中，我有一个模板标签，它需要知道当前的语言是什么。

我想我可以使用`django.utils.translation.get_language`，但似乎在模板标签内，它返回默认语言而不是当前语言。

`request.LANGUAGE_CODE`我通过阅读上下文来修复它。

但我想知道是否有更好的方法来获取模板标签中的语言

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-25T10:48:59.687

您可以使用一些[默认模板标签](https://docs.djangoproject.com/en/1.5/topics/i18n/translation/#other-tags)

```
{% get_current_language %} 
```

或者

```
{% get_current_language as FOO %} 
```

例如

```
{% render_bar request FOO %} 
```

# android - 在 ViewPager android 的中心对齐子视图

> ID：16212591
> 
> 赞同：17
> 
> 时间：2013-04-25T10:40:43.260
> 
> 标签：android, android-viewpager, center

我需要将子视图设置为 ViewPager 的中心，并且我想将下一个和上一个视图的某些部分显示到当前视图侧（如 1 下面的当前屏幕）。但目前当前视图从 ViewPager 的左侧开始（如 2 下面的预期屏幕）。我怎样才能做到这一点？

这是我的代码..

**MyViewPagerAdapter**

```
public class MyViewPagerAdapter extends PagerAdapter {
    private Activity mActivity;
    private int mPageCount;
    public MyViewPagerAdapter(Activity activity,int pageCount) {
        mActivity = activity;
        mPageCount = pageCount;
    }

    @Override
    public int getCount() {
        return mPageCount;
    }

    @Override
    public boolean isViewFromObject(View view, Object obj) {
        return (view ==(View)obj);
    }

    @Override
    public Object instantiateItem(ViewGroup container,final int position) {
        ViewGroup viewGroup = (ViewGroup)mActivity.getLayoutInflater().inflate(
                R.layout.item_view, null);

        viewGroup.setBackgroundColor(randomColor());

        TextView textView = (TextView)viewGroup.findViewById(R.id.textView1);
        textView.setText("Page: "+(position+1));
        Button button = (Button) viewGroup.findViewById(R.id.button1);
        button.setOnClickListener(new OnClickListener() {

            @Override
            public void onClick(View v) {
                Toast.makeText(mActivity, "Hey, Its clicked!!! at page "+(position+1), Toast.LENGTH_LONG).show();
            }
        });
        container.addView(viewGroup);
        return viewGroup;
    }

    Random rnd = new Random();
    private int randomColor(){
        return Color.argb(255, rnd.nextInt(256), rnd.nextInt(256), rnd.nextInt(256));
    }

    @Override
    public void destroyItem(ViewGroup collection, int position, Object view) {
        //must be overridden else throws exception as not overridden.
        Log.d("Tag", collection.getChildCount()+"");
        collection.removeView((View) view);
    }

    @Override
    public float getPageWidth(int position) {
        return 0.8f;
    }
} 
```

**主要活动**

```
public class MainActivity extends Activity {
    private ViewPager viewPager;
    LinearLayout linearLayout;
    private int ID = 100; 

    private final int count = 8;
    @Override
    protected void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.activity_main);

        viewPager = (ViewPager) findViewById(R.id.viewPager);
        linearLayout  = (LinearLayout) findViewById(R.id.indicator_layout);
        generateIndicators(count);

        MyViewPagerAdapter adapter = new MyViewPagerAdapter(this, count);
        viewPager.setAdapter(adapter);
        viewPager.setOnPageChangeListener(new OnPageChangeListener() {
            int oldPosition = 0;
            @Override
            public void onPageSelected(int position) {
                //this changes the old position's view state image
                ((TextView)linearLayout.getChildAt(oldPosition)).setText("");
                oldPosition = position;

                //this changes the current position's view state image
                ((TextView)linearLayout.getChildAt(position)).setText((position+1)+"");

            }
            //this method will be called repeatedly upto another item comes as front one(active one)
            @Override
            public void onPageScrolled(int arg0, float arg1, int arg2) {

            }
            //this will be called as per scroll state
            @Override
            public void onPageScrollStateChanged(int arg0) {

            }
        });

        viewPager.setOffscreenPageLimit(4);

    }

    private void generateIndicators(int count) {
        /// Converts 14 dip into its equivalent px
        int padd = (int)TypedValue.applyDimension(TypedValue.COMPLEX_UNIT_DIP, 3, getResources().getDisplayMetrics());

        for(int i=0;i<count;i++){
            TextView textView = new TextView(this);
            textView.setId(ID+i);
            final int currentItem = i;
            textView.setBackgroundResource(R.drawable.white_cell);
            textView.setPadding(padd,padd,padd,padd);
            /// Converts 14 dip into its equivalent px
            int size = (int)TypedValue.applyDimension(TypedValue.COMPLEX_UNIT_DIP, 10, getResources().getDisplayMetrics());
            textView.setTextSize(size);
            textView.setGravity(Gravity.CENTER);
            /// Converts 14 dip into its equivalent px
            int px = (int)TypedValue.applyDimension(TypedValue.COMPLEX_UNIT_DIP, 30, getResources().getDisplayMetrics());

            LinearLayout.LayoutParams params = new LinearLayout.LayoutParams(px, px);
            linearLayout.addView(textView,params);
        }

        ((TextView)linearLayout.getChildAt(0)).setText("1");

    }

} 
```

**activity_main.xml**

```
<RelativeLayout xmlns:android="http://schemas.android.com/apk/res/android"
    xmlns:tools="http://schemas.android.com/tools"
    android:layout_width="match_parent"
    android:layout_height="match_parent"
    tools:context=".MainActivity" >

   <android.support.v4.view.ViewPager
       android:id="@+id/viewPager"
       android:layout_width="fill_parent"
       android:layout_height="fill_parent"
       android:layout_alignParentLeft="true"
       android:layout_alignParentTop="true" >
   </android.support.v4.view.ViewPager>

   <LinearLayout
       android:id="@+id/indicator_layout"
       android:layout_width="wrap_content"
       android:layout_height="wrap_content"
       android:layout_alignParentBottom="true"
       android:layout_centerHorizontal="true"
       android:layout_marginBottom="19dp" >
   </LinearLayout>

</RelativeLayout> 
```

**item_view.xml**

```
<?xml version="1.0" encoding="utf-8"?>
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:layout_width="100dp"
    android:layout_height="match_parent"
    android:id="@+id/root_view"
    android:orientation="vertical" >

    <TextView
        android:id="@+id/textView1"
        android:layout_width="match_parent"
        android:layout_height="wrap_content"
        android:gravity="center"
        android:text="Text"
        android:textAppearance="?android:attr/textAppearanceLarge" />

    <Button
        android:id="@+id/button1"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:layout_gravity="center"
        android:text="click me" />

</LinearLayout> 
```

**当前画面** ![当前画面](https://i.stack.imgur.com/LX6Jq.png)

**预期屏幕** ![预期屏幕](https://i.stack.imgur.com/nxhAn.png)

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2013-05-02T18:58:11.577

对于一个应用程序，我用以下方式实现了类似的标准`ViewPager`：

*   使用内部布局中的实际内容使页面全屏显示。例如，使全屏布局`RelativeLayout`具有透明背景，而实际内容则以`RelativeLayout`父级为中心。如果我没记错的话，这样做的原因是仅将内部布局作为页面，`ViewPager`在某些设备（例如 Galaxy Nexus）上不会占用所有屏幕宽度。

*   用于`ViewPager.setPageMargin()`设置负页边距，即要显示多少下一页/上一页。确保它只与父全屏布局的透明区域重叠。

*   调用`ViewPager.setOffscreenPageLimit()`以将屏幕外页面计数至少`2`从默认值调整`1`为通过真正创建屏幕外页面来确保平滑分页。否则，您将看到正在绘制的下一页/上一页已经部分显示在屏幕上。

* * *

## 回答 #2

> 赞同：10
> 
> 时间：2013-11-15T16:54:20.263

对于任何因 OP 没有用解决方案更新他的问题而感到不安的人，这里有一个链接，它以最小的努力解释了如何在 XML 中解决这个问题：http: [//blog.neteril.org/blog/2013/10/ 14/android-tip-viewpager-with-protruding-children/](http://blog.neteril.org/blog/2013/10/14/android-tip-viewpager-with-protruding-children/)

基本上，当您在 XML 中声明您的 viewpager 时，给它相同的左右填充并设置 android:clipToPadding="false"。（他的 xml 示例中缺少 clipToPadding 并且是实现此效果所必需的）

* * *

## 回答 #3

> 赞同：6
> 
> 时间：2013-11-16T17:01:51.937

最后，我在 GitHub 中添加了这个问题的解决方案。我已经做了一些漂亮的技巧来获得解决方案。您可以从以下链接获取项目（实际上我计划创建一个带有解释的博客，但我没有那么多时间去做）。

这是[链接](https://github.com/noundla/Sunny_Projects/tree/master/CenterLockViewPager)（[https://github.com/noundla/Sunny_Projects/tree/master/CenterLockViewPager](https://github.com/noundla/Sunny_Projects/tree/master/CenterLockViewPager)）

您必须将文件从`com.noundla.centerviewpagersample.comps`包复制到您的项目。`MainActivity`您可以在课堂上看到该 Viewpager 的用法。

如果有人对此有问题，请告诉我。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2018-06-03T12:35:41.253

我在这篇[文章](http://www.jayrambhia.com/blog/android-viewpager-cards-1)中找到了解决方案，在我使用的代码下方：

```
// Offset between sibling pages in dp
int pageOffset = 20;

// Visible part of sibling pages at the edges in dp
int sidePageVisibleWidth = 10;

// Horizontal padding will be
int horPadding = pageOffset + sidePageVisibleWidth;

// Apply parameters
viewPager.setClipToPadding(false);
viewPager.setPageMargin(UIUtil.dpToPx(pageOffset, getContext()));
viewPager.setPadding(UIUtil.dpToPx(horPadding, getContext()), 0, UIUtil.dpToPx(horPadding, getContext()), 0); 
```

dpToPx 代码：

```
 public static int dpToPx(int dp, Context context) {
        float density = context.getResources().getDisplayMetrics().density;
        return Math.round((float) dp * density);
    } 
```

这就是你所需要的

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2018-10-28T12:32:17.113

您可以对 viewPager 使用填充并将 clipToPadding 设置**为**false

**爪哇**

```
viewPager.setClipToPadding(false);
viewPager.setPadding(50, 0, 50, 0); 
```

**科特林**

```
 viewPager.clipToPadding = false
 viewPager.setPadding(50, 0, 50, 0) 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2015-10-02T11:12:40.993

我必须在**不同页面宽度**的视图寻呼机中**居中当前页面**，因此使用填充的解决方案不合适。用户滚动也被禁用（它是标签栏视图寻呼机，由另一个视图寻呼机滚动）。这是一个非常简单的解决方案 - 只需像这样覆盖 ViewPager.ScrollTo 方法（C# 代码，Xamarin）：

 **```
public override void ScrollTo(int x, int y)
{
    x -= (int) (MeasuredWidth * (1 - Adapter.GetPageWidth(CurrentItem)) / 2);

    base.ScrollTo(x, y);
} 
```

如果您计算每个片段的页面宽度，请不要忘记将它们缓存在数组中。

* * *

## 回答 #7

> 赞同：-2
> 
> 时间：2013-05-06T08:59:28.803

扩展 Horizo **​​ntalScrollView**类作为滚动视图的父级。在**onMeasure()**方法中，您可以指定每个孩子的宽度和高度。方式有点麻烦，但效果会很好，你可以很好地掌握你的孩子的观点。**

# magento - Magento：我在哪里可以为“newsletter_subscr_success.html”电子邮件模板设置一些参数/变量？

> ID：16212593
> 
> 赞同：0
> 
> 时间：2013-04-25T10:40:46.190
> 
> 标签：magento, newsletter

我需要自定义“newsletter_subscr_success.html”电子邮件模板，并且需要将一些变量传递给它。

问题是我不知道它发送到哪里，所以我可以推送一些参数/变量。

我在哪里可以找到它？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-25T11:00:41.450

如果您在控制器文件或模型或 model/observer.php 中有任何变量，其格式应为，

```
$emailTemplateVariables['any_string'] = "这是任意字符串";
```

现在，要将这个变量抓取到您的 newsletter_subscr_success.html 中，只需给出

```
<div>{{var any_string}}</div>
```

你就完成了！

# sql - 根据 2 列从同一列中选择多个值

> ID：16212594
> 
> 赞同：-1
> 
> 时间：2013-04-25T10:40:46.600
> 
> 标签：sql

最好用一个例子来解释。我的试验和结果如下所示。

有两个表（实际上我有多个表）

## 表：产品

```
ID    name
-----------
1    apple
2    orange
3    pear 
```

## 表：属性

```
ID  prod_ID   attr_id   value
----------------------------
1   1       101     20
2   1       102     red
3   1       103     sweet
4   2       101     30
5   2       102     orange
6   2       103     sour
6   3       101     40 
7   3       102     green
8   3       103     sweet 
```

## 期望的输出

```
name   attr_id 101 AS 'price'   attr_id 102 AS 'taste'
------------------------------------------------------
apple        20           sweet
orange       30           sour
pear         40           sweet 
```

到目前为止，我一直在管理 SQL，但最近我不得不调用 3 个表并组合列值，如上所示。我就是无法理解这一点。帮助将不胜感激。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-25T10:51:31.123

由于您在问题中没有提到任何 RDBMS，因此下面的查询将适用于大多数 RDBMS。

```
SELECT  a.Name,
        MAX(CASE WHEN b.attr_ID = 101 THEN b.value END) Price,
        MAX(CASE WHEN b.attr_ID = 103 THEN b.value END) Taste
FROM    Products a
        INNER JOIN Attributes b
            ON a.ID = b.prod_ID
GROUP   BY a.Name 
```

*   [SQLFiddle 演示](http://www.sqlfiddle.com/#!2/e037b/1)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-25T11:02:07.090

您可以`CASE`为此使用语句：（这将在 MySQL 中工作）

```
SELECT p.name
   ,GROUP_CONCAT(CASE WHEN attr_id = 101 THEN value else NULL END) AS price
   ,GROUP_CONCAT(CASE WHEN attr_id = 102 THEN value else NULL END) AS color
   ,GROUP_CONCAT(CASE WHEN attr_id = 103 THEN value else NULL END) AS taste
FROM Products p JOIN Attributes a
ON p.id = a.prod_id
GROUP BY p.name; 
```

或者你也可以对 join 做同样的事情：（这适用于 MySQL 和 SQL Server）

```
SELECT Name
  ,CASE WHEN a.attr_id = 101 THEN a.value ELSE NULL END AS price
  ,CASE WHEN b.attr_id = 102 THEN b.value else NULL END AS color
  ,CASE WHEN c.attr_id = 103 THEN c.value else NULL END AS taste
FROM Products p
  LEFT JOIN Attributes a ON p.id = a.prod_id
  LEFT JOIN Attributes b ON p.id = b.prod_id AND a.attr_id = 101 AND b.attr_id = 102
  LEFT JOIN Attributes c ON p.id = c.prod_id AND a.attr_id = 101 AND c.attr_id = 103
WHERE a.attr_id IS NOT NULL and b.attr_id IS NOT NULL AND c.attr_id IS NOT NULL 
```

我还为`color`.

输出

```
|   NAME | PRICE |  COLOR | TASTE |
-----------------------------------
|  apple |    20 |    red | sweet |
| orange |    30 | orange |  sour |
|   pear |    40 |  green | sweet | 
```

### [看到这个 SQLFiddle](http://sqlfiddle.com/#!2/85db7/17)

### [SQL Server 演示](http://sqlfiddle.com/#!3/9cfd0/1)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-25T10:47:19.943

您必须分别查询每一列...

```
SELECT 
  p.name,
  (SELECT value FROM Attributes a WHERE attr_id=101 AND a.prod_ID=p.ID) AS price,
  (SELECT value FROM Attributes a WHERE attr_id=102 AND a.prod_ID=p.ID) AS taste
FROM Products p 
```

...或...如果您使用的是 MSSQL 2008 R2，您可以使用 PIVOT： http: [//msdn.microsoft.com/en-us/library/ms177410 (v=sql.105).aspx](http://msdn.microsoft.com/en-us/library/ms177410(v=sql.105).aspx)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2019-05-03T17:34:20.767

使用 PIVOT，更容易调整额外的属性。

```
SELECT NAME, [101],[102],[103]
             FROM (
                    SELECT P.NAME as NAME, A.ATTR_ID as ATTR_ID, A.VALUE as VALUE
                    FROM PRODUCTS as P, ATTRIBUTES as A
                    WHERE A.PROD_ID = P.ID  
             ) SrcTable
            PIVOT 
            (
                MAX(VALUE)
                for ATTR_ID in ([101],[102],[103])
            ) PivotTable; 
```

或者可以生成一个动态语句来调整可变数量的属性（因为这是上面语句中唯一改变的东西）

列字符串可以通过以下方式获得：

```
DECLARE @columns AS NVARCHAR(MAX);
set @columns = STUFF((SELECT distinct ',' + QUOTENAME(ATTR_ID) 
             FROM ATTRIBUTES
             FOR XML PATH(''), TYPE
            ).value('.', 'NVARCHAR(MAX)'),1,1,''); 
```

接下来，this can 变量可用于生成像静态 PIVOT 这样的字符串

```
DECALARE @stmt AS NVARCHAR(MAX);
set @stmt ='SELECT NAME, ' + @columns + '
             FROM (
                    SELECT P.NAME as NAME, A.ATTR_ID as ATTR_ID, A.VALUE as VALUE 
                    FROM PRODUCTS as P, ATTRIBUTES as A 
                    WHERE A.PROD_ID = P.ID 
             ) SourceTable
             PIVOT ( 
                MAX(VALUE)
                for ATTR_ID in (' + @columns + ') 
            ) PivotTable';

EXECUTE(@stmt); 
```

# f# - 从 F# 中的引用数组访问元素

> ID：16212596
> 
> 赞同：3
> 
> 时间：2013-04-25T10:40:53.703
> 
> 标签：f#

正在试验数组和引用——我的目的是创建对数组的引用，然后在闭包内使用该引用来访问数组的某个元素。FSI 尝试：

```
> let dk2 = Array.create 5 0
let dk2ref = ref dk2;;

val dk2 : int [] = [|0; 0; 0; 0; 0|]
val dk2ref : int [] ref = {contents = [|0; 0; 0; 0; 0|];}

> !dk2ref.[1]

stdin(3,2): error FS0039: The field, constructor or member 'Item' is not defined 
```

有没有直接的方法来访问引用数组的元素？（在这种情况下，dk2ref 的第二个元素）？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-04-25T10:56:13.060

我不确定你为什么需要一个参考数组。

查找[运算符优先级表](http://msdn.microsoft.com/en-us/library/dd233228.aspx)，`.`运算符的优先级高于`!`运算符。因此，您的示例被解析为`!(dk2ref.[1])`导致错误的原因，因为`'a ref`没有实现[索引属性](http://msdn.microsoft.com/en-us/library/dd233202.aspx)。

您只需要在正确的位置添加括号：

```
> (!dk2ref).[1]
val it : int = 0 
```

# c# - 字符文本文件到二进制文本文件

> ID：16212600
> 
> 赞同：1
> 
> 时间：2013-04-25T10:41:14.563
> 
> 标签：c#, arrays, binary, ascii

我有一个包含一组记录的文本文件，我正在尝试将其转换并保存为 1 和 0 .. 每次我使用

```
Byte [] arr=Encoding.UTF8.GetBytes(recordss) ; 
```

并使用字节写入器编写它，我仍然需要相同的记录文件，没有区别。

所以我的问题是有没有办法将字符串转换为二进制并以二进制格式将其写入文件。顺便说一句，我正在使用 c#

到目前为止，这是我的代码

```
public static void serialData()
{
    FileStream recFile = new FileStream("Records.txt", FileMode.Open, FileAccess.ReadWrite);   //file to be used for records

    StreamReader recordRead = new StreamReader(recFile);

    String recordss = recordRead.ReadToEnd();        //Reads Record file

    recordRead.Close();
    recFile.Close();

    Byte [] arr=Encoding.UTF8.GetBytes(recordss) ;

    FileStream file = new FileStream("Temp.txt", FileMode.Create, FileAccess.Write);
    StreamWriter binfile = new StreamWriter(file);

    for(int i =0; i < arr.Count();i++)
        binfile.WriteLine(arr[i]);

    binfile.Close();
    file.Close();
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-25T11:15:58.147

有一个内置函数可以将整数类型的值转换为二进制表示的字符串。换线试试

```
binfile.WriteLine(arr[i]); 
```

通过这条线

```
binfile.WriteLine(
    Convert.ToString(arr[i], 2)
); 
```

[`Convert.ToString()`](http://msdn.microsoft.com/en-us/library/8s62fh68.aspx)将输入转换为给定基础中的表示。在这种情况下，您选择`2`作为二进制表示的基础。其他常见值是`8`八进制或`16`十六进制。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-25T10:51:27.990

您的结果是“字节”格式。总是。根据定义，它是数据。您“看到”它的方式取决于您用来打开它的软件。

您想要的可能是在文本编辑器中打开时“显示”原始数据源的底层二进制数据的文件：**作为 text**。为此，您必须在文件中写入字符“0”和“1”。因此，最终文件将比原始数据源大很多。

更改此代码：

```
for(int i =0; i < arr.Count();i++)
    binfile.WriteLine(arr[i]); 
```

进入这个：

```
foreach (byte b in arr)
{
    binfile.Write((b >> 7 & 1) == 0 ? '0' : '1');
    binfile.Write((b >> 6 & 1) == 0 ? '0' : '1');
    binfile.Write((b >> 5 & 1) == 0 ? '0' : '1');
    binfile.Write((b >> 4 & 1) == 0 ? '0' : '1');
    binfile.Write((b >> 3 & 1) == 0 ? '0' : '1');
    binfile.Write((b >> 2 & 1) == 0 ? '0' : '1');
    binfile.Write((b >> 1 & 1) == 0 ? '0' : '1');
    binfile.Write((b & 1) == 0 ? '0' : '1');
} 
```

但这有点丑陋。最好使用十六进制文件查看器。

# jquery - 如何使用 jsplumb 为源端点和目标端点设置不同的颜色

> ID：16212603
> 
> 赞同：0
> 
> 时间：2013-04-25T10:41:17.423
> 
> 标签：jquery, html, jsplumb

我是 jsplumb 的新手。我需要你的帮助来完成这个样本。

如何使用 jsplumb 为源端点和目标端点设置不同的颜色？

```
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
    <title></title>

    <script type="text/javascript" src="http://ajax.googleapis.com/ajax/libs/jquery/1.8.1/jquery.min.js"></script>
    <script type="text/javascript" src="http://ajax.googleapis.com/ajax/libs/jqueryui/1.8.23/jquery-ui.min.js"></script>
    <script type="text/javascript" src="../js/jquery.jsPlumb-1.3.16-all-min.js"></script>
    <script type="text/javascript">

        jsPlumb.bind("ready", function () {

            var source= jsPlumb.addEndpoint("source", {
                overlays: [["Label", { label: "SOURCE", id: "labelsource"}]],
                paintStyle: { fillStyle: 'red' },
        //endpointStyle: { fillStyle: '#808000' },
                endpoint: ["Dot", { radius: 15}]
            });
            var secure = jsPlumb.addEndpoint("target", {
                overlays: [["Label", { label: "TARGET", id: "labeltarget"}]],
                paintStyle: { fillStyle: 'green' },
                endpoint: ["Dot", { radius: 15}]
            });
 jsPlumb.connect({
                source: 'source', target: 'target', paintStyle: { lineWidth: 10, strokeStyle: '#66CCFF' },
                sourceEndpointStyle: { fillStyle: '#808000' }, 
                targetEndpointStyle: { fillStyle: '#800000' }, 
endpoint: ["Dot", { radius: 15}], anchor: "BottomCenter",
                //connector: [ "Bezier", 0 ],
                connector: "Straight",
                detachable: false,
                overlays: [
        ["Label", {
            fillStyle: "rgba(100,100,100,80)",
            color: "white",
            font: "12px sans-serif",
            //label:"Static label",
            borderStyle: "black",
            borderWidth: 2
        }],
        ["Arrow", { location: 0.5}]
    ]

            })
 });

    </script>
</head>
<body>
    <div id="source" style="position: absolute; left: 100px; top: 250px;">
    </div>
    <div id="target" style="position: absolute; left: 600px; top: 250px;">
    </div>
</body>
</html> 
```

上面的代码没有对源节点和目标节点应用正确的颜色。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-05-27T07:14:31.723

您可以在创建连接时使用以下方法设置连接颜色

```
jsPlumb.bind("jsPlumbConnection", function (conn) {
   var source = conn.source;
   var target = conn.target;

   conn.connection.setPaintStyle({
             strokeStyle: getConnectionColor(source, target), 
             lineWidth: 3
   });                
}); 
```

实现getConnectionColor(source, target)方法根据源和目标获取颜色

# python - 如何从json中提取信息？

> ID：16212604
> 
> 赞同：0
> 
> 时间：2013-04-25T10:41:22.423
> 
> 标签：python, json

我正在尝试从 json 数据中提取一些信息。在下面的代码中，我首先提取包含我想要的信息的部分 json 数据并将其存储在一个文件中。然后我试图打开这个文件，我得到了我的代码后面的错误。你能帮我找出我错在哪里吗？

```
import json
import re

input_file = 'path'
text = open(input_file).read()
experience = re.findall(r'Experience":{"positionsMpr":{"showSection":true,"  (.+?),"visible":true,"find_title":"Find others',text)
output_file = open ('/home/evi.nastou/Documenten/LinkedIn_data/Alewijnse/temp', 'w')
output_file.write('{'+experience[0]+'}')
output_file.close()

text = open('path/temp')
input_text = text.read()
data = json.load(input_text)
positions = json.dumps([s['companyName'] for s in data['positions']])
print positions 
```

错误：

```
Traceback (most recent call last):
  File "test.py", line 13, in <module>
    data = json.load(input_text)
  File "/home/evi.nastou/.pythonbrew/pythons/Python-2.7.2/lib/python2.7/json/__init__.py", line 274, in load
     return loads(fp.read(),
 AttributeError: 'str' object has no attribute 'read' 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-25T10:45:18.860

您想使用`json.loads()`（注意`s`），**或**传入文件对象而不是结果`.read()`：

```
text = open('path/temp')
data = json.load(text) 
```

`json.load()`接受一个打开的文件对象，但你传递给它一个字符串；`json.loads()`接受一个字符串。

# javascript - 显示 JSON 的输入内容

> ID：16212622
> 
> 赞同：0
> 
> 时间：2013-04-25T10:41:49.287
> 
> 标签：javascript, jquery, json

问题 ：：

我知道这是一个多余的问题，但我在其他类似问题上找不到什么帮助......

我有一个 json 文件。

我可以很好地加载 json，但是当我尝试用这个输出特定元素时

```
div.innerHTML = jsonfromfile[element]; 
```

我只得到这个...

```
[object Object] 
```

作为我的输出...

如何让整个元素而不是这个 [object Object] 显示？

更多代码来感受它是如何完成的......

```
var activity;
function jsfr() {
    $.getJSON('myjson.json', function(response){
    jsonfromfile = response;
    })  
} 
```

.

.

.

解决方案::来自弗朗西斯·斯大林的回答

我添加了一个新功能...

```
 var items;
    function outty(data) {

            $.each(data, function(key, val) {
                items=items+key+","+val+";";
            });
    } 
```

我在 json 上设置了深度，给我留下了一个我发送给 outty 的对象......

```
 dpth = jsonfromfile["elementOne"]["elSubone"]["elsuboneSub"];
    outty(dpth);
    div.innerHTML=items; 
```

这是显示所有打印到的 div 的 HTML...

```
 <div class="col-rght">
        <div class="text" id="postcomp"></div>
    </div> <!--div class="col-rght"--> 
```

这会将您想要的 json 深度的对象变成一个丑陋的字符串，然后您可以对其进行格式化以进行显示..

如果您喜欢 html 列表，请查看斯大林是如何做到的，但要对他的 appendTo('div') 感到厌倦......这会将您的列表放在每个 div 中。尝试将要打印的 div 的类的名称放在前面的句点 appendTo('.outputbox')

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-25T10:59:41.000

您不能将 json 对象直接附加到您的 html 中。你必须解析并转换成字符串

```
$.getJSON('myjson.json', function(data) {
var items = [];
$.each(data, function(key, val) {
items.push('<li id="' + key + '">' + val + '</li>');
});
$('<ul/>', {
'class': 'my-new-list',
html: items.join('')
}).appendTo('div');
}); 
```

[http://api.jquery.com/jQuery.getJSON/](http://api.jquery.com/jQuery.getJSON/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-25T10:43:23.373

利用`JSON.stringify(yourjsonobjecthere)`

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-25T10:43:56.057

尝试`div.innerHTML = JSON.stringify(jsonfromfile[element]);`

# expect - 期望 ssh 的脚本返回无效的命令名称

> ID：16212628
> 
> 赞同：7
> 
> 时间：2013-04-25T10:42:07.820
> 
> 标签：expect

我正在尝试编写一个期望脚本，它将 ssh 到服务器，发送 sudo su，然后检查 iptables 状态并将输出放在服务器上的日志文件中。下面是脚本。

```
1 #!/usr/bin/expect
  2 exp_internal 1
  3 log_user 0
  4 set timeout 10
  5 set password  "******"
  6 
  7 spawn /usr/bin/ssh -l subhasish *.*.*.* -p 10022
  8 
  9 expect {
 10      -re "password: " {send "$password\r"}
 11      -re "$ "  {send "sudo su\r"}
 12      -re "[sudo] password for subhasish:" {send "$password\r"}
 13      -re "# "  {send "service iptables status\r"}
 14        }
 15 set output $expect_out(buffer)
 16 send "exit\r"
 17 puts "$output\r\n" >> output.log 
```

但是在调试模式下运行时，我收到这样的错误；

```
expect -d testcase
expect version 5.44.1.15
argv[0] = expect  argv[1] = -d  argv[2] = testcase  
set argc 0
set argv0 "testcase"
set argv ""
executing commands from command file testcase
parent: waiting for sync byte
parent: telling child to go ahead
parent: now unsynchronized from child
spawn: returns {24105}
invalid command name "sudo"
    while executing
"sudo"
    invoked from within
"expect {
     -re "password: " {send "$password\r"}
     -re "$ "  {send "sudo su\r"}
     -re "[sudo] password for subhasish:" {send "$password\r"}
 ..."
    (file "testcase" line 9) 
```

不知道我哪里出错了。它说无效的命令名称“sudo”，我猜这是因为期望不理解这些命令。如何绕过它。请帮忙。谢谢。

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2013-04-26T02:24:32.730

问题出在这一行

```
-re "[sudo] password for subhasish:" {send "$password\r"} 
```

在 Tcl（因此在期望中）中，方括号是命令替换的语法（就像 shell 中的反引号）。因此，您要么需要转义括号，要么使用不同的引号来防止各种扩展：

```
-re {[sudo] password for subhasish:} {send "$password\r"} 
```

这带来了一个不同的问题：您是否希望看到这些确切的字符？因为您指示 expect 将其视为正则表达式，而正则表达式中的方括号表示字符类，因此它将匹配单个字符，“s”、“u”、“d”或“o” '。所以你可能需要的是：

```
-re {\[sudo\] password for subhasish:} {send "$password\r"} 
```

或者

```
-ex {[sudo] password for subhasish:} {send "$password\r"} 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-04-29T15:30:41.763

谢谢格伦，它现在正在工作。它不起作用的另一个原因是它需要在正常登录和 sudo 登录之间休眠，否则在 $ 提示返回之前发送“sudo su”，以供参考，这里是代码，

```
#!/usr/bin/expect -f
#! /bin/bash

set timeout 60
log_user 1
set host *.*.*.*
set password ****** 
set user subhasish
set logfile output.txt
spawn ssh -p 10022 $user@$host
expect "*?assword:*"
send -- "$password\r"
#log_user 1
sleep 2
expect "$"
send -- "sudo su\r"
expect -gl {*password for subhasish:*}
send -- "$password\r"
expect "#"
send -- "service iptables status\r"
log_file /home/subhasish/output.log
expect "#"
log_file
send -- "exit\r";
send -- "exit\r";
exit 0 
```

# css - 隐藏移动设备的 Nivo 滑块标题

> ID：16212631
> 
> 赞同：0
> 
> 时间：2013-04-25T10:42:28.400
> 
> 标签：css, responsive-design

嗨，我想知道是否有人可以帮助我。目前我有一个 Nivo Slider，其中 Nivo Caption 设置为显示：无；在一定的屏幕尺寸下。我注意到，对于某些人来说，看起来就像 iPhone，标题显示，并在右侧创建一个空白区域（对于当前大小来说太大），直到刷新。有没有更好的方法来“摆脱”移动设备的元素？

谢谢。铝。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-25T13:12:40.073

您正在覆盖 CSS 规则。

在样式表的某个时刻，您拥有：

```
.theme-light .nivo-caption {
    display: none;
} 
```

更进一步：

```
.nivo-caption {
    -moz-box-sizing: border-box;
    background: none repeat scroll 0 0 #000000;
    bottom: 10%;
    color: #FFFFFF;
    display: block;
    height: 66px;
    left: 0;
    opacity: 0.9;
    overflow: hidden;
    padding: 5px 10px;
    position: absolute;
    width: 440px;
    z-index: 8;
} 
```

显示：无；

进而

显示：块；

我会根据屏幕大小甚至检测它是否是智能手机 (modernizr) 来使用 jQuery 方法来摆脱标题。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-08-16T14:44:58.267

在 jquery.nivo.slider.js

添加：

```
//Process  caption
        if ($(window).width() < 659) {
            $('.nivo-caption').hide();
        }
        else {
            processCaption(settings);
        } 
```

# c# - 如何将来自视图的多个自动生成字段的数据发送回控制器

> ID：16212635
> 
> 赞同：1
> 
> 时间：2013-04-25T10:42:30.687
> 
> 标签：c#, asp.net-mvc, razor, asp.net-mvc-4

我正在构建一个应用程序，它允许用户解决一系列问题并从 4 个预先确定的选项中选择他们的回答。我面临的问题是如何将数据发送回控制器。我有一个对象`Game`，它包含一个属性`Questions`，而每个问题都包含一个`Code`,`Question`和`Answer`, 所有`string`类型。

我创建了一个页面，在下拉列表中显示每个问题和答案（一旦我弄清楚如何将其放置为单选按钮，我将使用它），但我不知道应该如何将结果发送回控制器：`select`生成的代码中的每个元素`HTML`都具有相同的`id`，那么如何区分问答关系？

有没有更好的替代方法？我试过`PartialView`为每个问题处理一个问题，但如果可能的话，我想坚持一页的问题列表。

我用来创建当前视图的代码是这样的：

```
@using (Html.BeginForm("Save", "Game", FormMethod.Post)) {
        foreach (var question in Model.Questions) {
            <div class="question">
                <h4>@vraag.Vraag</h4>
                @Html.DropDownListFor(x => question.Code, new SelectList(question .Answers))
                @Html.HiddenFor(x => question.Code)            
            </div>
        }
        <input type="submit" value="Save" />
    } 
```

我想以一种清楚地告诉我哪个答案适用于哪个问题的代码的方式将所有答案发送回我的控制器。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-25T10:45:06.153

您不能使用 a`foreach`来绑定列表，因为它们的名称字段不会被索引（因此模型绑定器不知道如何处理它们）。您需要使用`for`循环。试试这个：

```
for (int i = 0; i < Model.Questions.Count; i++) {
        <div class="question">
            <h4>@vraag.Vraag</h4>
            @Html.DropDownListFor(x => x.Questions[i].Code, new SelectList(Model.Questions[i].Answers))
            @Html.HiddenFor(x => x.Questions[i].Code)            
        </div>
    } 
```

# php - 具有多个字符串到数组的 PHP 变量

> ID：16212640
> 
> 赞同：0
> 
> 时间：2013-04-25T10:42:50.257
> 
> 标签：php, arrays, string, loops, sum

这是 Drupal 视图表模板中的额外代码，所以 $row = 我得到的内容..

```
var_dump($row);

// output:
array(5) { 
    ["field_datum"]=> string(0) "" 
    ["field_werf"]=> string(9) "Comis Cui" 
    ["field_machine"]=> string(17) "Graafmachien D293" 
    ["field_aantal_uren"]=> string(1) "5" 
    ["view_node"]=> string(50) "Bekijk" 
}

$uren = $row['field_aantal_uren'];
var_dump($uren);

// output: string(1) "5" string(1) "7" string(1) "1" 
```

我已经尝试了从explode、str_replace、preg_replace 到数组中的3 个字符串的所有方法，这样我就可以遍历它们并求和。但我不能让它工作..

有什么建议可以将此变量转换为数组吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-25T10:46:14.597

您正在`var_dump`循环中。尝试这个：

```
$uren[] = $row['field_aantal_uren']; 
```

然后在循环之外，你有你的数组。

```
echo array_sum($uren); 
```

# entity-framework - EF 迁移 - 直接到最终模式

> ID：16212644
> 
> 赞同：0
> 
> 时间：2013-04-25T10:43:00.407
> 
> 标签：entity-framework

我的架构经过多次迭代而演变。我有一组迁移，将架构从一个空数据库转移到一个包含几十个表和几十个列的数据库。

在此过程中，有几个表、列和约束的添加，有时（根据经验或新知识或规范中的更改）随后是删除或更改。有时，表或列名已被重新使用或重新调整用途。

现在，EF 迁移似乎完全能够通过创建、更改、删​​除、再次创建、更改等顺序运行，以获取最新的架构，但感觉不对。在极端情况下，可能会有几十个迁移创建表，然后是几十个删除表，直到最终模式可能是一个或两个表（我知道这不太可能）。从头开始到那些决赛桌的选择会感觉不错。

在我使用 ActiveRecord 迁移的 Ruby 日子里，有一个选项可以仅构建最终模式，而无需逐步执行，并且可能在此过程中撤消或重做工作。当然，这意味着在每次迁移后保持模式的完整 DDL 版本是最新的，但不知何故它感觉更优雅。

有没有人用实体框架做过类似的事情？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-25T14:58:15.783

然后从这里开始 PM 命令构建脚本

[从 EF 5 Code First 迁移生成完整的 SQL 脚本](https://stackoverflow.com/questions/13939404/generate-full-sql-script-from-ef-5-code-first-migrations)

从代码中，ObjectContext 上有一个选项，而不是直接在 DbContext 上

```
 string script = (context as IObjectContextAdapter).ObjectContext.CreateDatabaseScript(); 
```

当然，如果您不需要看到魔法并更改了生成的脚本，那么自动迁移将起作用。

```
 Database.SetInitializer(new MigrateDatabaseToLatestVersion<YourDbContext,
                           YourMigrationConfiguration>()
   Context.Database.Initialize(true); 
```

如果它是 EmptyDb Schema，EF 将免费提供。

```
 Context.Database.Initialize(true); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-25T10:46:30.207

您可能想尝试`__MigrationHistory`从数据库中删除表，删除`Migrations`文件夹（备份您的 Configuration.cs 文件），然后再次启用迁移。

# javascript - 强制 Safari 始终在智能手机上显示顶部栏

> ID：16212645
> 
> 赞同：0
> 
> 时间：2013-04-25T10:43:05.920
> 
> 标签：javascript, iphone, ios, mobile-safari

我正在为智能手机开发一个网站，但我在顶部 safari bar 上遇到了一些问题。我想始终以纵向和横向显示它。

在页面上，我确实有一个链接动画。当我单击它时，浏览器正在删除顶部栏。有没有办法在动画期间让顶栏？

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-06-04T09:41:31.997

Safari automatically slides the browser top bar up on iPhones and iPod touches asoon as the page is scrolled, even by a single pixel.

The only way to get around this would to have a div that fills the screen with css property overflow:hidden but you would have to control movement of the content.

# c - 在Linux内核中拦截异常处理程序的最佳实践是什么

> ID：16212650
> 
> 赞同：1
> 
> 时间：2013-04-25T10:43:15.790
> 
> 标签：c, exception-handling, linux-kernel, intercept

我需要在Linux内核中拦截页面错误的异常处理，但是我不允许修改内核源和编译内核。我必须在内核模块中执行此操作。我现在有几种方法。

* * *

1.  复制IDT表并替换缺页的ISR。但是，我查看了内核的汇编代码，发现ISR调用了一些在模块编译时无法确定地址的函数。例如，`callq *0x2b0a07(%rip) # ffffffff81620100 <pv_irq_ops+0x30>`。
2.  使用 kprobe/jprobe 机制进行拦截`do_page_fault`，但并非所有内核都配置了启用 kprobe。
3.  `do_page_fault`用跳转到我的代码的跳转指令替换前几个字节。但是，我需要`do_page_fault`在我的代码中使用后者。我必须将替换的指令放到另一个地方，但是 x86 代码的大小很难确定，如果替换的指令之一是跳转，事情会变得更加复杂。

你们有解决问题的想法吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-25T10:48:14.543

更改 IDT 条目以指向您的处理程序。如果/需要时从那里调用原始处理程序。无需复制 IDT 或修补现有代码。

# shell - 如何在 unix shell 脚本中的 td 标签之间获取数据

> ID：16212652
> 
> 赞同：2
> 
> 时间：2013-04-25T10:43:18.203
> 
> 标签：shell, unix

我想以一种概括的方式在 unix shell 脚本中的 td 标签之间获取数据。

例如在下面

```
<td style="padding:3px;" align="center">123.456</td> 
```

如何以概括的方式检索 123.456。

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-25T11:02:04.620

您可以尝试使用 sed，

```
sat:~# cat file
<td style="padding:3px;" align="center">123.456</td>
<td>sat</td>
sat:~#  
sat:~# sed 's/<td\(.*[^<>]\+\?>\)\(.*\)<\/td>/\2/g' file
123.456
sat
sat:~# 
```

我希望它会帮助你。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-25T11:12:51.797

如果由于某种原因您不能使用 xml 解析器，

grep 是为了提取东西而诞生的。:)

```
grep -Po '(?<=>)[^<]*' 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-25T11:04:09.880

```
sed 's/^.*<td.*>\(.*\)<.*$/\1/' file 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-04-25T11:07:28.440

为了获得适当的解决方案并以通用方式使用适当的解析器，例如[html-xml-utils](http://www.w3.org/Tools/HTML-XML-utils/)

对于非正确和非一般化的方式，请使用 sed

```
sed 's/^.*>\([0-9.]*\)<.*$/\1/' 
```

# java - 为什么这段 Java 代码的性能如此不一致？

> ID：16212654
> 
> 赞同：1
> 
> 时间：2013-04-25T10:43:26.327
> 
> 标签：java, performance, jvm

我正在运行一个小型测试，虽然它是一个微型基准测试，但它确实很好地模仿了我们在生产中实际所做的事情。

我正在创建一个 2D 数组，5 列和 10,000,000 行填充了 0-19 之间的随机整数（含 0-19）。然后我想总结第三列中的所有数字，只要第二列中的值是偶数。我这样做 100 次来热身，然后再做 100 次，计算需要多长时间。

在我的机器上，绝大多数时间大约需要 9 秒，但是，有时只需要不到 6 秒。

它看起来不像垃圾收集或 JIT 编译。

有谁知道为什么它偶尔会变得如此之快？

我使用以下参数在 Linux 上使用 JDK7u11 运行代码： -server -XX:+PrintCompilation -Xms500m -Xmx500m -verbose:gc -XX:+PrintGCTimeStamps -XX:+PrintGCDetails 但是，使用各种不同的 JDK（从 6 一直到8）并删除所有这些参数似乎不会显着影响时间。

这是代码：

```
import java.util.ArrayList;
import java.util.Random;

public class JavaPerformanceTest {
    public static void main(String[] args) {
        int numColumns = 5;
        int numRows = 10000000;
        int[][] data = new int[numColumns][numRows];
        Random rand = new Random(1234);
        for (int j = 0; j < numColumns; j++) {
            for (int i = 0; i < numRows; i++) {
                data[j][i] = rand.nextInt(20);
            }
        }
        int warmUp = 100;
        ArrayList<Integer> sums = new ArrayList<Integer>();
        System.out.println("warm up " + warmUp + " times");
        long warmUpStart = System.nanoTime();
        for (int i = 0; i < warmUp; i++) {
            sums.add(sum(numRows, data));
        }
        long warmUpEnd = System.nanoTime();
        System.out.println("warm up complete " + (warmUpEnd - warmUpStart) / 1000000);
        int numberOfRuns = 100;
        int finalSum = 0;
        long startTime = System.nanoTime();
        for (int i = 0; i < numberOfRuns; i++) {
            finalSum = sum(numRows, data);
        }
        long endTime = System.nanoTime();
        long diff = (endTime - startTime) / 1000000;
        System.out.println("Time taken: " + diff + "    Sum: " + finalSum);
    }

    public static int sum(int numRows, int[][] columnBased) {
        int sum = 0;
        for (int i = 0; i < numRows; i++) {
            if ((columnBased[1][i] % 2) == 0) {
                sum += columnBased[2][i];
            }
        }
        return sum;
    }
} 
```

谢谢，尼克。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-25T10:54:49.417

性能下降的可能原因有很多，包括缓存未命中和分支预测失败。我会确保你的代码是最优的，然后重复它以确保你的结果是稳定的。

```
import java.util.ArrayList;
import java.util.Random;

public class JavaPerformanceTest {
    public static void main(String[] args) {
        int numColumns = 5;
        int numRows = 10000000;
        byte[][] data = new byte[numColumns][numRows];
        Random rand = new Random(1234);
        for (int j = 0; j < numColumns; j++) {
            for (int i = 0; i < numRows; i++) {
                data[j][i] = (byte) rand.nextInt(20);
            }
        }
        int warmUp = 10;
        ArrayList<Integer> sums = new ArrayList<Integer>();
        System.out.println("warm up " + warmUp + " times");
        long warmUpStart = System.nanoTime();
        for (int i = 0; i < warmUp; i++) {
            sums.add(sum(numRows, data));
        }
        long warmUpEnd = System.nanoTime();
        System.out.println("warm up complete " + (warmUpEnd - warmUpStart) / 1000000);
        for (int t = 0; t < 3; t++) {
            int numberOfRuns = 100;
            int finalSum = 0;
            long startTime = System.nanoTime();
            for (int i = 0; i < numberOfRuns; i++) {
                finalSum = sum(numRows, data);
            }
            long endTime = System.nanoTime();
            long diff = (endTime - startTime) / 1000000;
            System.out.println("Time taken: " + diff + "    Sum: " + finalSum);
        }
    }

    public static int sum(int numRows, byte[][] columnBased) {
        int sum = 0;
        byte[] col1 = columnBased[1];
        byte[] col2 = columnBased[2];
        for (int i = 0; i < numRows; i++)
            // use multiplication instead of "if" to avoid branch prediction failures
            sum += ((col1[i] + 1) & 1) * col2[i];
        return sum;
    }
} 
```

印刷

```
warm up 10 times
warm up complete 109
Time taken: 1006    Sum: 47505460
Time taken: 1006    Sum: 47505460
Time taken: 1026    Sum: 47505460 
```

综上所述：优化代码对性能的提升远远超过玩命令行参数。

# linux - grep 排除多个字符串

> ID：16212656
> 
> 赞同：143
> 
> 时间：2013-04-25T10:43:38.400
> 
> 标签：linux, ubuntu

我正在尝试使用 tail 查看日志文件`-f`，并希望排除包含以下字符串的所有行：

```
"Nopaging the limit is"`  and `"keyword to remove is" 
```

我可以像这样排除一个字符串：

```
tail -f admin.log|grep -v "Nopaging the limit is" 
```

但是如何排除包含 of`string1`或的行`string2`。

* * *

## 回答 #1

> 赞同：133
> 
> 时间：2014-08-11T18:28:41.740

## 使用 grep 过滤掉多行的两个示例：

把这个放在`filename.txt`：

```
abc
def
ghi
jkl 
```

**grep 命令使用 -E 选项和字符串中的标记之间的管道：**

```
grep -Ev 'def|jkl' filename.txt 
```

印刷：

```
abc
ghi 
```

**使用 -v 选项的命令在由括号包围的标记之间带有管道：**

```
egrep -v '(def|jkl)' filename.txt 
```

印刷：

```
abc
ghi 
```

* * *

## 回答 #2

> 赞同：70
> 
> 时间：2016-11-01T23:50:59.120

```
grep -Fv -e 'Nopaging the limit is' -e 'keyword to remove is' 
```

`-F`通过文字字符串匹配（而不是正则表达式）

`-v`反转比赛

`-e`允许多种搜索模式（所有文字和倒置）

* * *

## 回答 #3

> 赞同：47
> 
> 时间：2014-02-13T08:30:00.790

另一种选择是创建一个排除列表，当您有很长的排除列表时，这特别有用。

```
vi /root/scripts/exclude_list.txt 
```

现在添加您要排除的内容

```
Nopaging the limit is
keyword to remove is 
```

现在使用 grep 从文件日志文件中删除行并查看未排除的信息。

```
grep -v -f /root/scripts/exclude_list.txt /var/log/admin.log 
```

* * *

## 回答 #4

> 赞同：23
> 
> 时间：2013-04-25T10:49:43.443

```
egrep -v "Nopaging the limit is|keyword to remove is" 
```

* * *

## 回答 #5

> 赞同：17
> 
> 时间：2013-04-25T10:51:53.857

```
tail -f admin.log|grep -v -E '(Nopaging the limit is|keyword to remove is)' 
```

* * *

## 回答 #6

> 赞同：13
> 
> 时间：2014-10-21T04:43:57.947

您可以像这样使用常规 grep：

`tail -f admin.log | grep -v "Nopaging the limit is\|keyword to remove is"`

* * *

## 回答 #7

> 赞同：9
> 
> 时间：2015-02-17T17:13:32.457

greps 可以被链接。例如：

```
tail -f admin.log | grep -v "Nopaging the limit is" | grep -v "keyword to remove is" 
```

* * *

## 回答 #8

> 赞同：1
> 
> 时间：2022-01-18T15:25:41.087

如果你想使用正则表达式：

`grep -Ev -e "^1" -e '^lt' -e 'John'`

# teamcity - 从 teamcity 结帐规则中排除除 1 个子目录之外的所有子目录

> ID：16212659
> 
> 赞同：7
> 
> 时间：2013-04-25T10:43:47.530
> 
> 标签：teamcity

我有一个具有以下结帐规则的 VCS 根：

```
+:.
-:externals
+:externals/jQuery 
```

然而，TeamCity 似乎没有对`externals/jQuery`目录进行结帐。除了为此目录创建一个单独的 VCS 根目录外，是否有办法实现这一点？我正在使用 TeamCity 8.0 最新的 EAP。

**更新 (2017)**

自 TeamCity 10 以来，似乎可以做这个问题所要求的

```
+:**/* => target_directory
-:**/folder1 => target_directory 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2015-03-19T02:20:19.413

如果您只想签出 externals/jquery 目录而不是其他目录，请将其添加到您的签出条件中。

```
+:externals/jQuery -> jQueryDir(custom name) 
```

或者

```
+:externals/jQuery -> . 
```

# java - 通过方法返回对象 Bin 的麻烦。需要“投射”或更改为对象

> ID：16212668
> 
> 赞同：0
> 
> 时间：2013-04-25T10:44:02.233
> 
> 标签：java

我是一个尝试学习java的初学者！

我目前正在尝试《Building Skills in Object-Oriented Design》一书，目前正在研究轮盘赌。

我有一个类 Bin，它构造了一个包含结果对象的 TreeSet。它们是在 Outcome 类中构建的。

现在，我正在研究 Wheel 类，在这里我使用了 new Vector(38) ，我用 38 个 new Bin() 填充了它。

**现在，问题。**

我想创建一个从 Vector 中检索 Bin 对象的方法。

```
Bin get(int bin){
    return  bins.elementAt(bin);
} 
```

这不起作用，Eclipse 建议进行两个修复：

1：添加演员表

2：将 Bin 更改为 Object

这里发生了什么？为什么我不能以我想要的方式归还 Bin？当我投射或更改为对象时，它不起作用。

[这是结果类](https://gist.github.com/anonymous/5458890)

[这是 Bin 类](https://gist.github.com/anonymous/5458896)

这是轮子类

```
package Roulette;

import java.util.Random;
import java.util.Vector;

public class Wheel {

Vector bins;
Random rng;

Wheel(Random rng){
    rng =  new Random();

    bins = new Vector(38);
    for (int i=0; i<38; i++){
        bins.add(i, new Bin());
    }
}

void addOutcome(int bin, Outcome outcome){
    this.bins.elementAt(bin).add(outcome);
}

Bin next(){
    int rand = rng.nextInt(38);

    return bins.elementAt(rand);

}

Bin get(int bin){
    return  bins.elementAt(bin);
}

} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-25T10:51:02.783

编译器在运行时不知道你会得到什么`bins.elementAt()`。由于您尚未定义类型，因此它需要任何类（`Object`实例）的对象，该对象可能属于也可能不属于 class `Bin`。

所以，你所拥有的是（对于编译器）喜欢

```
 Object a = new Bin();
  Bin b = a; 
```

由于编译器不确定，它需要您对其进行强制转换以确保它将返回适当的类型（或者如果出现强制转换错误则失败）。无论如何，您必须明确表示

```
 Object a = new Bin();
  Bin b = (Bin) a;    // compiles and works

  Object a = new String("Hello world");
  Bin b = (Bin) a;    // compiles but fails at runtime with ClassCastException. 
```

另一种方法是使用泛型来指定`Vector`将只包含`Bin`实例

```
 Vector<Bin> bins = new Vector<Bin>(); 
```

这样编译器将确保`bins.getElement()`返回一个`Bin`对象。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-25T10:47:13.777

你应该转

```
Vector bins; 
```

进入

```
Vector<Bin> bins; 
```

那么它应该工作

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-25T10:53:05.490

您必须查看 Java-Generics（[http://docs.oracle.com/javase/tutorial/java/generics/index.html](http://docs.oracle.com/javase/tutorial/java/generics/index.html)）。

你必须改变你的线路

> `Vector bins;`

至

> `Vector<Bin> bins;`

这需要你改变你的初始化

> `bins = new Vector(38);`

至

> `bins = new Vector<Bin>(38);`

希望我能帮助你。

# ruby-on-rails - 从管理界面管理静态页面

> ID：16212669
> 
> 赞同：0
> 
> 时间：2013-04-25T10:44:06.813
> 
> 标签：ruby-on-rails, static, admin

我的 rails 应用程序中几乎没有静态页面（`Contacts`、、`About us`等）。通过分离路由（`namespace :admin do ...`）实现的管理界面。如何仅从管理界面管理静态页面中的静态（！）内容？谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-25T12:04:48.290

我建议使用像 Ryan Bates' [cancan](https://github.com/ryanb/cancan)或 elabs' [pundit](https://github.com/elabs/pundit)这样的授权解决方案。
在那里，您可以轻松地为仅管理员用户定义关于`:admin`命名空间中的 restful 操作的能力。

然后，您可以根据需要使用 Ruby 的`File`类（[1.9.3](http://ruby-doc.org/core-1.9.3/File.html)或[2.0](http://ruby-doc.org/core-2.0/File.html)的文档）来操作文件（仅当用户是管理员时）。

但请注意缓存机制：
如果您正在缓存这些文件（例如，在您的服务器上 nginx、unicorn 或缓存解决方案，例如 varnish、squid），则必须将它们从缓存中清除，以便您可以查看更改。

# python - 阅读命令的反馈？

> ID：16212671
> 
> 赞同：0
> 
> 时间：2013-04-25T10:44:09.610
> 
> 标签：python, linux, bash

我需要使用命令`lsmod`来检查是否加载了一个 mod，但我不知道在运行它后如何读取它。我`subprocess.Popen()`用来运行它。任何正确方向的观点都将不胜感激。:D

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-25T10:48:08.200

使用`subprocess.Popen(stdout=subprocess.PIPE)`，然后调用`subprocess.communicate()`以读取输出。基本用法：

```
process = subprocess.Popen(['lsmod'], stdout=subprocess.PIPE) # Can also capture stderr
result_str = process.communicate()[0]  # Or [1] for stderr 
```

有关更多详细信息，请参阅[Python 文档](http://docs.python.org/2.7/library/subprocess.html#subprocess.Popen.communicate)。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-25T10:47:52.540

为什么不直接使用[`subprocess.check_output()`](http://docs.python.org/2/library/subprocess.html#subprocess.check_output)？

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-25T10:48:26.337

lsmod 不会告诉你这个。你必须解析它的输出。

如果您愿意使用外部模块，请查看[https://github.com/agrover/python-kmod/ 。](https://github.com/agrover/python-kmod/)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-04-25T10:53:23.130

假设您正在寻找`ath`in `lsmod`，那么命令将是： `lsmod | grep ath`

使用`subprocess`：

```
In [60]: c=subprocess.Popen("lsmod",stdout=subprocess.PIPE)

In [61]: gr=subprocess.Popen(["grep" ,"ath"],stdin=c.stdout,stdout=subprocess.PIPE)

In [62]: print gr.communicate()[0]
ath5k                 135206  0 
ath                    19188  1 ath5k
mac80211              461261  1 ath5k
cfg80211              175574  3 ath5k,ath,mac80211 
```

# date - 谁能用“%~t1”解释这种奇怪的批处理行为并给出解决方案

> ID：16212678
> 
> 赞同：0
> 
> 时间：2013-04-25T10:44:20.700
> 
> 标签：date, time, parameters, batch-file

谁能向我解释以下内容：

编码：

```
@echo off
SETLOCAL disabledelayedexpansion

set pf=C:
set url=http://www.rarlab.com/rar
set fn=config.sys

call :SUB1 "%url%" "%fn%"
goto :EOF

:SUB1
echo:PATH=[ %pf%\%~2 ]
if exist %pf%\%~2 (call :READDATE "%pf%\%~2") & set "_datum1=%_result%"
echo:Date1=[ %_datum1% ]
if exist %pf%\%~2 (call :READDATE "%pf%\%~2") & set "_datum2=%_result%"
echo:Date2=[ %_datum2% ]
goto :EOF

:READDATE
SETLOCAL
for %%A in (%~1) do set "_tvar=%%~tA"
echo:Date=[ %_tvar% ]
ENDLOCAL & set "_result=%_tvar%"
exit /b 0 

:end 
```

输出：

```
PATH=[ C:\config.sys ]
Date=[ 10.06.2009 23:42 ]
Date1=[  ]
Date=[ 10.06.2009 23:42 ]
Date2=[ 10.06.2009 23:42 ] 
```

因此，如果您查看输出的第 3 行，则没有日期/时间 - 为什么 ????? 如果这不是 CMD.EXE 的大错误，任何人都可以帮我解决问题。我需要两个日期/时间数据进行比较。

附录：

是否有可能在不使用第二个“READDATE”的情况下读取第一个“sub”中的日期/时间？

我尝试了以下方法：

```
if exist %pf%\%~2 set "_datum1=%pf%\%~t2" 
```

但这不起作用，因为“~t2”似乎只适用于将完整路径和文件名保存在一起的变量。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-25T10:59:02.190

问题的发生是因为`%_result%`首先评估并在命令`if exist %pf%\%~2 (call :READDATE "%pf%\%~2") & set "_datum1=%_result%"`运行之前输入它的值。所以对于第一个你没有结果，对于第二个你得到第一个的结果。

您禁用延迟扩展是否有原因？解决此问题的一种方法是启用延迟扩展（通过替换`SETLOCAL disabledelayedexpansion`为`SETLOCAL enabledelayedexpansion`）并更改`%_result%`为`!_result!`.

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-25T14:04:02.780

```
@echo off
SETLOCAL disabledelayedexpansion

set pf=C:
set url=http://www.rarlab.com/rar
set fn=config.sys

call :SUB1 "%url%" "%fn%"
goto :EOF

:SUB1
echo:PATH=[ %pf%\%~2 ]
if exist %pf%\%~2 (call :READDATE "%pf%\%~2")
set "_datum1=%_result%"
echo:Date1=[ %_datum1% ]
if exist %pf%\%~2 (call :READDATE "%pf%\%~2")
set "_datum2=%_result%"
echo:Date2=[ %_datum2% ]
goto :EOF

:READDATE
SETLOCAL
for %%A in (%~1) do set "_tvar=%%~tA"
echo:Date=[ %_tvar% ]
ENDLOCAL & set "_result=%_tvar%"
exit /b 0 

:end 
```

# java - 为最大尺寸和旋转配置 log4j

> ID：16212679
> 
> 赞同：1
> 
> 时间：2013-04-25T10:44:21.000
> 
> 标签：java, log4j

我在我的 Java 应用程序中使用 log4j。我想同时配置 maxsize（最大为 1Mb）和 15 天后自动删除。

```
# Root logger option
log4j.rootLogger=INFO, file

# Direct log messages to a log file
log4j.appender.file=org.apache.log4j.RollingFileAppender
log4j.appender.file.File=C:\\loging.log
log4j.appender.file.MaxFileSize=1MB
log4j.appender.file.MaxBackupIndex=15
log4j.appender.file.layout=org.apache.log4j.PatternLayout
log4j.appender.file.layout.ConversionPattern=%d{yyyy-MM-dd HH:mm:ss} %-5p %c{1}:%L - %m%n 
```

但似乎在 log4j 中不能同时配置我的两个要求，对吧？

我该怎么做？谢谢大家。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-25T11:14:17.633

您可以创建一个用于文件删除目的的批处理文件...批处理文件的内容如下

```
cd "C:\<folder-location>\
del *.log 
```

您可以创建一个调度程序条目以每 15 天运行一次此文件...这样它将在 15 天后删除所有日志文件。（此外，使用批处理文件，您还可以创建日志文件的 zip 作为备份，并将其安全地保存在其他位置……这是您使用 log4j 根本无法做到的事情）

将文件保存为 zip 备份（使用 7-zip）

```
C:\Program Files\7-Zip\7z.exe a -tzip C:\B\ZipFile.zip C:\A\*.* 
```

这会将文件夹 A 中的所有文件复制到 zip 文件中的 B 中。

保持 maxsize 已经由您在 log4j 配置文件中完成。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-25T10:59:03.603

您的配置很好，要对其进行测试，请将 MaxFileSize 更改为 1KB 并运行以下代码：

```
public class LogTest {
    static Logger log = Logger.getLogger("LogTest");

    public static void main(String[] args)
    {
        PropertyConfigurator.configure("log4j.properties");//file should be in classpath
        for (int i = 0; i < 20000; i++)
            log.info("test");

            System.out.println("Done");

    }
} 
```

完成后，您应该共有 16 个文件 logging.txt 和 logging.txt.1 到 logging.txt.15

# jquery - 从 Jquery 确认对话框返回值

> ID：16212680
> 
> 赞同：1
> 
> 时间：2013-04-25T10:44:21.263
> 
> 标签：jquery, modal-dialog

我正在尝试使用以下代码打开一个 Jquery 确认框。

```
var a = $('#confirm')                
            .data("x","defaultValue")
            .dialog('open');

alert(a.data("x")); 
```

在对话框中，我尝试更改 x 的值。

```
 $("#confirm").dialog({
    resizable: false,
    autoOpen: false,
    height: 180,
    width: 400,
    modal: true,
    buttons: {
        "Leave the page": function() {                
            $(this).data("x","this is a test");                
            $(this).dialog("close");
        },
        Cancel: function() {
            $(this).dialog("close");
        }
    }
}); 
```

如何获得 x 的修改值。目前警报显示“DefaultValue”。但想得到“这是一个测试”。

有什么想法吗？

PS：我无法在对话框中使用 window.open() 进行重定向。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-25T14:50:03.407

终于设法解决了这个问题。只是想把它贴在这里，如果有人需要的话。

```
 $("#confirm").dialog({
    resizable: false,
    autoOpen: false,
    height: 180,
    width: 400,
    modal: true,
    buttons: {
        "Leave the page": function () {
            var anchorId = $(this).data("anchorId");
            var formId = $(this).data("formId");

            if (typeof anchorId !== "undefined")
                window.location.assign(anchorId);
            if (typeof formId !== "undefined")
                $(formId).submit();
            $(this).dialog("close");
        },
        Cancel: function () {
            $(this).dialog("close");
        }
    }
}); 
```

我打开确认对话框

```
 $("a").live("click", function () {       
    if (hasUnsavedData()) {
        $('#confirm')
         .data("anchorId", this)
         .dialog('open');
        return false;
    } else return true;
}); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-08-27T19:47:31.750

解决方案：

[带有返回的Jquery对话框确认](https://stackoverflow.com/a/18474005/1876355)

这很难找到，明智地使用它

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-25T10:49:51.123

你不能，我的意思是至少在对话框之外，“警报”在“离开页面”之前执行。您需要在“对话关闭”呼叫后立即发出警报。

```
$(this).data("x","this is a test");
$(this).dialog("close");
alert($(this).data("x")); 
```

# cmake - 为什么这个 CMake 项目没有设置合适的 MSVC 运行时？

> ID：16212682
> 
> 赞同：0
> 
> 时间：2013-04-25T10:44:23.093
> 
> 标签：cmake, msvcrt, libmysql

我试图理解为什么使用 /MD 和 /MDd 标志配置的 libmysql CMake 项目不会生成适当的 Visual Studio 10 项目文件。`CMAKE_`已配置相应的宏，如下所示：

![宏](https://i.stack.imgur.com/DYkN3.png)

然而，生成的项目仍然显示出意外的运行时库设置：

![在此处输入图像描述](https://i.stack.imgur.com/S9o1e.png)

CMake GUI 是否由于某种原因不可靠，或者是否有可能另一个选项覆盖了 CRT 设置？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-26T12:04:00.840

我发现 libmysql 的 cmake 项目有一个针对 Windows 的特定于操作系统的 cmake 文件，它强制在生成 Visual Studio 解决方案时使用静态运行时：

```
 75   # Force static runtime libraries
 83   FOREACH(flag
 84    CMAKE_C_FLAGS_RELEASE CMAKE_C_FLAGS_RELWITHDEBINFO
 85    CMAKE_C_FLAGS_DEBUG CMAKE_C_FLAGS_DEBUG_INIT
 86    CMAKE_CXX_FLAGS_RELEASE  CMAKE_CXX_FLAGS_RELWITHDEBINFO
 87    CMAKE_CXX_FLAGS_DEBUG  CMAKE_CXX_FLAGS_DEBUG_INIT)
 88    STRING(REPLACE "/MD"  "/MT" "${flag}" "${${flag}}")
 89    SET("${flag}" "${${flag}} /EHsc")
 98   ENDFOREACH() 
```

# c# - 为什么我无法捕捉到 Gridview 行的值？

> ID：16212683
> 
> 赞同：0
> 
> 时间：2013-04-25T10:44:29.370
> 
> 标签：c#, asp.net-mvc, gridview

这是我的代码。问题：当在选择页面上单击 om 一行 och 时，页面正在刷新，并且我没有得到 lable17.text 中的文本。

```
 protected void GridView1_SelectedIndexChanged(object sender, EventArgs e)
{

    GridViewRow row = GridView1.SelectedRow;

    Label17.Text = row.Cells[2].Text.ToString() ;
}

protected void GridView1_RowDataBound(object sender, GridViewRowEventArgs e)
{
    if (e.Row.RowType == DataControlRowType.DataRow)
    {
        e.Row.Attributes.Add("onmouseover", "this.style.cursor='Pointer';this.style.backgroundColor='Yellow'");

    }
}

protected void GridView1_SelectedIndexChanging(object sender, GridViewSelectEventArgs e)
{
    GridViewRow row = GridView1.Rows[e.NewSelectedIndex];
    Label17.Text = "you selected" + row.Cells[2].Text;
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-25T10:56:47.050

你`GridView`在`UpdatePanel`吗？如果不是整个页面将在您单击按钮时回发。另外，请确保如果您在第一次这样做的情况下设置`Text`of `Label17`，即`Page_Load`

```
public void Page_Load(object sender, EventArgs e)
{
    if(!Page.IsPostBack)
    {
        Label17.Text = "Default Text";
    }
} 
```

# c# - RichtextBox 中的文本计数（行和列）

> ID：16212687
> 
> 赞同：1
> 
> 时间：2013-04-25T10:44:50.970
> 
> 标签：c#, winforms

我正在使用代码编辑器，我只想知道如何在richtextbox 中计算行数和列数。特别是在实际代码编辑器中这样的东西：

![在此处输入图像描述](https://i.stack.imgur.com/aK8nw.jpg)

假设 count 将在 ListBox 中传输。

有没有一种快速的方法可以做到这一点？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-25T11:00:16.193

你可以这样做 ：

```
//This to get lines number.
int index = richTextBox.SelectionStart;
int li = richTextBox.GetLineFromCharIndex(index); 
```

* * *

```
// This to get columns number.
int firstChar = richTextBox.GetFirstCharIndexFromLine(li);
int col = index - firstChar; 
```

祝你好运！

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-25T11:07:14.313

这样就可以了，您只需在计时器内调用代码：

```
int line = 1 + richTextBox1.GetLineFromCharIndex(richTextBox1.GetFirstCharIndexOfCurrentLine());
int column = 1 + richTextBox1.SelectionStart - richTextBox1.GetFirstCharIndexOfCurrentLine();
label1.Text = "line: " + line.ToString() + ", column: " + column.ToString(); 
```

# jquery - 当在选择选项中选择的URL设置时

> ID：16212690
> 
> 赞同：0
> 
> 时间：2013-04-25T10:44:58.527
> 
> 标签：jquery, select, option, selected

大师！

我有一些网址：

```
/montazh_form/#slide1
/montazh_form/#slide2
/montazh_form/#slide3 
```

当我从第一个链接进入我的网站时，我的**选择选项**应该被**选择**为他的**值**，就像在代码中一样。这适用于我在 url 中的所有 id。

```
<option value="#slide1" selected>city_1</option>
<option value="#slide2">city_2</option>
<option value="#slide3">city_3</option> 
```

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-25T10:46:27.697

仅当链接属于这种类型时 - `montazh_form/#slide1` （*没有其他 #*）

```
$("#yourselectID").val(location.hash); 
```

# iphone - 如何在 Iphone 中调用 Magento API 登录方法

> ID：16212696
> 
> 赞同：0
> 
> 时间：2013-04-25T10:45:17.087
> 
> 标签：iphone, ios

任何人都可以告诉我如何在 iphone 中调用 megnto api 的登录方法我已经在安卓中使用 xmlrpc 库完成了它

```
// ...
String sessionId = "";
//HashMap<string , String> params = new HashMap</string><string , String>();
//params.put("apiUser", "developer");
//params.put("apiKey", "magento123");
XMLRPCClient client = new XMLRPCClient("http://some-site.com/index.php/api/xmlrpc/");
try {
    /*
        sessionId = (String)client.callEx("login", new Object[]{params});
        will cause
        DEBUG/MY_XMLRPCException_MSG(196): XMLRPC Fault: Calling parameters do not match signature 1
    */
    sessionId = (String)client.call("login", "developer", "magento123");
    Log.d("MY_XMLRPC_SUCCESS_SESSION_ID", sessionId);
}
catch (XMLRPCException e) {
    Log.d("MY_XMLRPCException_MSG", e.getMessage());
} 
```

我是 iphone 的新手，我怎么能在 iphone 中做任何事情，任何人都可以告诉我，图书馆或例子让我做我想做的事！！！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-05-03T12:17:33.437

我得到了解决方案，我正在使用来自 git hub 的 AFNetworking 库，我正在使用以下链接中给出的库 [https://github.com/lognllc/LogNMagento](https://github.com/lognllc/LogNMagento)

一些基本步骤

=> 在您的应用程序中导入 LogNMangento 应用程序

=> 在 magento.h **- (void)settingLogin:(completionBlock) completionBlock;**

=> 在 magento.m 中

```
- (void)settingLogin:(completionBlock)completionBlock
{

standardUserDefaults = [NSUserDefaults standardUserDefaults];
array =[standardUserDefaults objectForKey:@"Prefs"];

client = [[MagentoClient alloc] initWithBaseURL:[NSURL URLWithString:[array objectAtIndex:0]]];
[client setDefaultHeader:@"SOAPAction" value:@"urn:Mage_Api_Model_Server_HandlerAction"];
[client registerHTTPOperationClass:[SoapRequestOperation class]];
[SoapRequestOperation addAcceptableStatusCodes:[NSIndexSet indexSetWithIndexesInRange:NSMakeRange(200, 301)]];
[client setDefaultHeader:@"Content-Type" value:@"text/xml; charset=utf-8"];
[client postPath:@"login" parameters:@{@"username":[array objectAtIndex:1], @"apiKey": [array objectAtIndex:2] }  success:^(AFHTTPRequestOperation *operation, id responseObject) {
    sessionID = responseObject;
    completionBlock(sessionID);
} failure:^(AFHTTPRequestOperation *operationData, NSError *error) {
    NSLog(@"Response is not get");
    sessionID = FAILED_SESSION;
    completionBlock(sessionID);
}];

} 
```

=> 在你的课上叫这个

```
[Magento.service settingLogin:^(NSString *session) {
            if(session){

                NSLog(@"Session %@",session);
                if(![session isEqualToString:@"NULL"])
                {
                    [self.view hideToastActivity];

                  self.viewController = [[ViewController alloc] initWithNibName:@"ViewController" bundle:nil];
                    [self.navigationController pushViewController:self.viewController animated:YES];
                }
                else
                {
                    [self.view hideToastActivity];
                    [self.view makeToast:@"Please Check Store Info"];
                    session=nil;
                }
            }
            else{

            }
        }];
    }
    else
    {
        [self.view makeToast:@"Please insert data"
                    duration:1.0
                    position:@"bottom"
                       ];
    } 
```

是的，还可以在基本网址中对 magento.m 的 INIT 进行一些更改

# c# - 将列表< Guid > 转换为列表< Guid? >

> ID：16212699
> 
> 赞同：6
> 
> 时间：2013-04-25T10:45:21.553
> 
> 标签：c#, linq, casting

将 List< Guid > 转换为 List< Guid 的最佳做法是什么？>

以下不编译：

```
public List<Guid?> foo()
{
    List<Guid> guids = getGuidsList();
    return guids; 
} 
```

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2013-04-25T10:56:49.927

这个问题似乎改变了几次，所以我会以两种方式展示转换：

转换`List<Guid?>`为`List<Guid>`：

```
var guids = nullableGuids.OfType<Guid>().ToList();
// note that OfType() implicitly filters out the null values,
// a Cast() would throw a NullReferenceException if there are any null values 
```

转换`List<Guid>`为`List<Guid?>`：

```
var nullableGuids = guids.Cast<Guid?>().ToList(); 
```

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2013-04-25T10:47:13.680

```
public List<Guid> foo()
{
    return  foo.Where(x=>x != null).Cast<Guid>().ToList();
} 
```

* * *

## 回答 #3

> 赞同：6
> 
> 时间：2013-04-25T10:53:33.617

像这样的东西

```
return guids.Select(e => new Guid?(e)).ToList(); 
```

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2013-04-25T10:56:00.687

```
public List<Guid?> foo()
{
    List<Guid> source = getGuidsList();
    return  source.Select(x => new Guid?(x)).ToList();

} 
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2013-04-25T10:50:15.397

略有不同的做法：

```
public List<Guid> foo()
{
    return foo.Where(g => g.HasValue).Select(g => g.Value).ToList();
} 
```

# iphone - ios/core data - 为特定实体对象保存实体

> ID：16212700
> 
> 赞同：1
> 
> 时间：2013-04-25T10:45:28.843
> 
> 标签：iphone, ios, xcode, core-data, nsuserdefaults

我有一个关于核心数据和关系规则的问题。

我有一个拥有多个用户的实体。用户与称为事件的实体具有可选的一对多关系。在我的应用程序启动时，我创建了一个用户（我自己）以及其他用户并将它们保存在 CD 中。**im**的用户对象也保存在 NSUserDefaults 中。

所以，现在我创建了一个事件，并希望将它分配给我保存在核心数据中的用户对象实体。我想使用我保存在 userdefaults 中的用户对象并将事件添加到其中，如下所示：

```
Event *event = (Event *)[NSEntityDescription insertNewObjectForEntityForName:@"Event" inManagedObjectContext:managedObjectContext];
//property setters
event.createdBy = userObjectFromNSUserDefaults; 
```

这是正确的方法吗？是否会将事件分配给该特定用户（在该示例中为我）？

另一个问题是：

我的事件类（nsmanagedobject 的子类）还有一个 NSSet 属性，其中包含添加/删除该事件的受邀用户或接受用户的添加和删除方法。我如何正确使用这些方法？

任何帮助都会获得 cookie :=)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-25T10:55:38.060

关于第一个问题 - 是的，这就是在 Core Data 中建立关系的方式。您只需将特定对象（NSManagmentObject，是吗？）分配给属性。

如果是一对多的话，另一种方式就是做

```
[userObjectFromNSUserDefaults addEvent:event]; 
```

再次，如果它的管理对象。

我在这里看到的唯一问题是您将其保存在 nsuserdefualts 中。这意味着当你从那里加载它时，它并没有附加到你的 MOC 上，我猜它不会工作。您需要在 nsuserdefaults 中保存一些 id 或其他内容，而不是对象本身。当应用程序加载时，使用该 ID 从数据库中获取该对象。

# ruby-on-rails - PostgreSQL 全文搜索：我如何确定它的范围？

> ID：16212701
> 
> 赞同：2
> 
> 时间：2013-04-25T10:45:30.343
> 
> 标签：ruby-on-rails, postgresql

这主要基于 RailsCasts 截屏视频，#341。

我正在尝试使用 PostgreSQL 全文搜索，它可以工作，但我需要确定它的范围。搜索应该通过对象 where `object.state=='saved'`。

在截屏视频中搜索的方法被定义为类方法，所以我不能使用'where'，因为'where'返回数组，而搜索方法是类方法，所以这里出错。我试图以这种方式改变它：

```
def test_search(query)
 if query.present?
  self.where("title @@ :q or text_for_test @@ :q", q:query)
 else
  scoped
 end
 end 
```

至：

```
@tests=Test.where(:state=>'saved')
@tests.test_search(params[:query]) 
```

但是 Rails 会抛出未定义的方法错误。

我还能做些什么来确定搜索范围？或者如何解决此尝试的错误？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-25T11:15:38.320

```
where("title @@ :q or text_for_test @@ :q and state @@ :state", q:query, state:'saved') 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-25T10:59:23.307

使用为 postgres 提供全文搜索的[textacular gem。](https://github.com/textacular/textacular)

您可以使用 textacular 提供的“basic_search”函数，类似于使用命名范围的方式。

```
Test.basic_search('Sonic').where(:status => 'saved')

Test.where(:status => 'saved').basic_search('Sonic') 
```

# c - 如何在 gdb 中检查与其类型同名的变量

> ID：16212714
> 
> 赞同：6
> 
> 时间：2013-04-25T10:46:19.880
> 
> 标签：c, debugging, gcc, gdb

我正在使用 gdb 7.4 调试现有的 C 库
我正在尝试检查一个变量，不幸的是，该变量被声明为与其类型相同的名称：

```
extern const enum rtx_class rtx_class[NUM_RTX_CODE]; 
```

现在我只是找不到检查这个变量的方法。`p rtx_class`返回*尝试使用类型名称作为表达式*，与`p &rtx_class`and相同`p rtx_class[0]`。
但是，`info var rtx_class`按预期工作并返回 const rtx_class rtx_class[145]。

任何想法？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-04-25T12:08:57.703

试试这个解决方法。对于您的二进制文件，请执行以下操作：

nm 你的可执行文件 |grep rtx_class

你应该得到地址（假设它是 0xabcdef，假设这是全局变量。然后在 gdb 中执行以下操作：

打印 *(rtx_class*)(0xabcdef+sizeof(rtx_class)*n)

这应该打印 rtx_class[n]。或者至少在我的简单测试用例中是这样。

# c - 链接列表，对大小不完整类型的路径应用无效

> ID：16212724
> 
> 赞同：0
> 
> 时间：2013-04-25T10:46:47.510
> 
> 标签：c, pointers, memory-management, struct

我在编译我的代码时遇到一个无效的路径大小错误应用程序，但我自己找不到问题，有人可以帮忙吗？

```
/*********************************************************
* Node to represent a packet which includes a link reference*
* a link list of nodes with a pointer to a packet Struct    *

**********************************************************/
struct node {
unsigned int Source;
unsigned int Destination;
unsigned int Type;
int Port;
char *Data;
struct Packet *next;
 // Link to next packet

//unassigned int source
//unassigned int destination
//int type
//unassigned int port
//char *data
//struct node  *next link to next node
};

typedef struct Packet node; // Removes the need to constantly refer to struct

/*********************************************************
* Stubs to fully declared functions below                *
**********************************************************/
void Outpacket(node **head);
void push(node **head, node **aPacket);
node* pop(node **head);

int main() {

/*********************************************************
* pointers for the link list and the temporary packeyt to    *
* insert into the list                                   *
**********************************************************/
node *pPacket, *phead = NULL;

/*********************************************************
* Create a packet and also check the HEAP had room for it   *
**********************************************************/
pPacket = (node *)malloc(sizeof(node));
if (pPacket == NULL)
{
    printf("Error: Out of Memory\n");
    exit(1);
} 
```

这只是完整代码的片段，但断点发生在以下行：

```
pPacket = (node *)malloc(sizeof(node)); 
```

谢谢你的帮助

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-25T11:13:53.670

你为什么不使用构造：

```
typedef struct Packet { .... } node; 
```

您命名了结构节点，但从类型指向其中的下一个元素

`struct Packet *`.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-25T11:04:57.800

可能这是因为您使用`struct Packet`时没有定义它。

在您的定义中`struct node`，您正在使用`struct Packet*`. 但是没有什么叫`struct Packed`. 要么更改结构的名称，要么更改元素。

尝试以下操作：

```
struct Packet {
unsigned int Source;
unsigned int Destination;
unsigned int Type;
int Port;
char *Data;
struct Packet *next;
 // Link to next packet

//unassigned int source
//unassigned int destination
//int type
//unassigned int port
//char *data
//struct node  *next link to next node
};

typedef struct Packet node; // Removes the need to constantly refer to struct 
```

在这里，`struct Packet`和`node`都是一样的结构，并没有异常。

# ruby-on-rails - 导轨 : 未初始化的常量

> ID：16212725
> 
> 赞同：1
> 
> 时间：2013-04-25T10:46:52.433
> 
> 标签：ruby-on-rails, model, nameerror, initialization, uninitialized-constant

我有一个模型调用`class App::BaseModel`到一个名为的文件中`base_model.rb`

然后我有一个`message.rb`文件，第一行有以下内容：

`class App::Message < App::BaseModel`

启动服务器时出现错误：

```
/path/to/app/message.rb:1:in `<top (required)>': uninitialized constant App::BaseModel (NameError) 
```

有人可以帮我吗？

干杯

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-25T10:54:54.687

因为`base_model.rb`它应该是 =>`class BaseModel WebActivity < ActiveRecord::Base`

`message.rb`它应该是 = >`class Message < ActiveRecord::Base`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-25T10:56:02.817

Rails 有一个命名约定，所以如果想把你的模型放到 App 模块 ( `App::BaseModel`) 中，你应该把`base_model.rb`into app 目录放在你的模型目录中。然后 Rails 将以正确的方式加载您的文件和类。

# java - 我可以声明方法以返回类对象，但对 Java 中给定类型的子类有限制吗？

> ID：16212727
> 
> 赞同：0
> 
> 时间：2013-04-25T10:46:55.897
> 
> 标签：java, class, reflection, types, return-value

假设我声明了一些抽象方法，它将返回 Class 对象（如 Dog.class、Cat.class），如下所示：

```
abstract public Class getProducedAnimalType(); 
```

我是否可以强制扩展此 API 的客户端仅返回表示类的 Class 对象，这些对象是 Animal.class 的子类？就像是：

```
abstract public Class<representing subclass of Animal> getProducedAnimalType(); 
```

所以扩展我的课程的客户不能写：

```
public Class getProducedAnimalType() {
   // Integer not extends Animal!, shoud not compile!
   return Integer.class; 
} 
```

但可以：

```
public Class getProducedAnimalType() {
   return Fish.class; // Fish extends Animal
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-25T10:51:40.607

您可以将返回类型更改`Class`为`Class<? extends Animal>`. 以下代码将允许返回`Cat.class`and `Dog.class`，但不允许返回`Integer.class`：

```
abstract public Class<? extends Animal> getProducedAnimalType(); 
```

客户端可以编写以下代码并且可以正常编译：

```
public Class<? extends Animal> getProducedAnimalType() 
{
   return Fish.class; // Fish extends Animal
} 
```

但是下面的代码不会编译：

```
public Class getProducedAnimalType() 
{
   return Integer.class; 
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-25T11:01:23.380

```
public Class<? extends Animal> getProducedType() {
// return Integer.class; // compile time error: incompatible types
    return Dog.class;
} 
```

# javascript - 无法在 JavaScript 中获取 radcombobox 的控制类型

> ID：16212730
> 
> 赞同：0
> 
> 时间：2013-04-25T10:47:05.403
> 
> 标签：javascript, rad

我是 radcontrols 的新手。我想知道如何使用 javascript 获取 radcontrol 的控制类型。对于普通的 asp.net 控件，我们编写：

```
 var controlType=document.getElementById("hdnCode").type; 
```

上面的代码将控制类型为“隐藏”，对于文本框，它将给出“文本”。

当我尝试获取 rad 控件的类型时，它给出了 undefined ，如下所示：

```
 var controlType=document.getElementById("RadComboBox1").type; 
```

上面的代码给出了未定义的。

请建议我在 Rad Controls 的情况下如何获取类型。

谢谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-06-11T14:24:33.827

您不能像这样真正检查控件的类型，这些是复杂对象 (IScriptControls) 而不是简单的 HTML 元素。

您可以尝试以下方法来查看给定类型的实例（if 块显示如何仅进行检查）：

```
function get_allRadCombos()
        {
            var allRadCombos = [];
            var allRadControls = $telerik.radControls;
            // all RadControls are referenced

            for (var i = 0; i < allRadControls.length; i++)
            {
                var element = allRadControls[i];

                if (Telerik.Web.UI.RadComboBox && Telerik.Web.UI.RadComboBox.isInstanceOfType(element))
                {
                    allRadCombos.push(element);
                }
            }
            // only the RadCombos are gathered into an array
            return allRadCombos;
        } 
```

$telerik.radControls 是 RadControls 创建和填充的数组，您可以通过 $find(controlClientID) 方法引用它来检查给定的实例

# ruby-on-rails - 将数据从 sqlite 导出到 rails 中的 csv 文件

> ID：16212731
> 
> 赞同：0
> 
> 时间：2013-04-25T10:47:06.123
> 
> 标签：ruby-on-rails, ruby-on-rails-3, export-to-csv

我有使用的应用程序，`sqlite db`并且该表中有条目。现在我必须更改`sqlite`为`postgres`. 而且`table design`也变了。

如果它是相同的表设计，那么我会去使用`taps`或转储数据`yaml-db`，然后将数据推送到 postgres，但在我的场景中，表设计也会改变，但我想将数据从 sqlite 移动到 postgres 根据新表。

所以我想将数据从文件导出`sqlite`，`csv`然后将数据从 csv 移动到 postgres。这是我必须做的方式还是有其他方法可以做到？如果这是这样，那么我怎么能`export to csv`和`import to postgres`？

另一件事是，从 sqlite 导出数据后，有没有办法将数据推送过去`migration`？请帮我。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-25T11:21:30.987

要以 CSV 格式导出，只需向控制器操作添加 csv 的 respond_to，然后在匹配的视图文件夹中创建 .csv.erb 文件以创建 csv。然后可以通过将 .csv 添加到 URL 来调用它。

所以你的控制器会是这样的：

```
def index
  @people = Person.all

  respond_to do |format|
    format.html # index.html.erb
    format.json { render json: @people }
    format.csv
  end
end 
```

您查看哪些将保存在文件中（例如 /app/views/people/index.csv.erb）将包含：

```
First Name,Last Name
<% @people.each do |p| %>
  <%= raw "\"#{p.first_name}\"" %>,<%= raw "\"#{p.last_name}\"" %>
<% end %> 
```

这种创建 CSV 的方式不依赖于正在使用的数据库。

# java - 如何判断 Java 是否作为 Windows 服务运行以及是否正在使用 -Xrs 标志

> ID：16212737
> 
> 赞同：2
> 
> 时间：2013-04-25T10:47:18.593
> 
> 标签：java, windows, service

我们在 Windows 上的 Java 应用程序经常出现的一个问题是，客户在没有指定 Java -Xrs 标志的情况下将其作为 Windows 服务运行。这样，当管理员注销 Windows 机器时，Java 进程会收到终止信号并终止，从而导致看似随机的生产停机情况。

我想向服务器日志文件和监控工具添加有关此配置问题的警告。为此，我想知道： 1\. 我的 Java 应用程序是否作为 Windows 服务运行？2\. -Xrs 标志是否指定为 java.exe 命令的一部分？欢迎任何如何实现这一目标的想法。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-25T11:59:31.260

找到了如何检查 -Xrs 标志，仍然需要确定是否作为服务运行：

```
import java.lang.management.ManagementFactory;
import java.util.List;

public class GetCommandLineFlags {

   public static void main(String[] args) {
       System.out.println(new GetCommandLineFlags().isReducedSignal());
   }

   public boolean isReducedSignal() {
      List<String> flags = ManagementFactory.getRuntimeMXBean().getInputArguments();
      for (String flag : flags) {
         if ("-Xrs".equals(flag)) {
            return true;
         }
      }
      return false;
   }

} 
```

# java - 生产者/消费者：消费者需要从共享队列中移除元素

> ID：16212741
> 
> 赞同：2
> 
> 时间：2013-04-25T10:47:26.437
> 
> 标签：java, concurrency

我正在开发的应用程序有问题。
我有两个线程，Prod 和 Cons，它们分别写入和读取共享的`Queue`. 这里都很标准。
此应用程序的目标是让 Prod 读取文件并将每一行添加到`Queue`.Cons 必须读取这些行并成对“匹配”它们（遵循一些标准）。

问题是，为了让 Cons 发挥作用，它必须从 中“处理”几行， `Queue`并且只删除那些形成 Pair 的行。例如，如果以下是`Queue`Prod 填写的 Q：

```
Q:
-
A1  
A2  
B1  
C1  
D1  
C2  
D2    
B2  
E1  
E2 
```

缺点应该创建 Pairs (A1,A2),(B1,B2),(C1,C2) 等...（对的顺序是要求）。

我的问题是，要创建 Pair (B1,B2)，Cons 需要首先分析 C1、D1、D2 和 C2 并发现它们与 B1 不匹配；然后找到 B2 并且 B1 和 B2 都必须从 Q 中删除，而不修改先前不匹配元素（C1、D1 等）的顺序。
目前，我通过 Cons 解决了始终从队列中删除第一个元素，如果不匹配，则将其保存在 Cons 的另一个内部队列中；当找到匹配的元素时，会创建 Pair 并将保存在内部队列中的所有元素“重新注入”到 Q 的头部（实际上是 a `DeQue`）。

虽然这种方法适用于简单的情况，但它存在无可救药的缺陷。鉴于 Prod 一直在运行，很可能会发生这样的情况，当 Cons 删除不匹配的元素时，Prod 会添加新行，当 Cons 尝试在 Q 上重新插入消息时有效地产生死锁。

我还认为 Cons 只能“窥视” Q 中的元素并仅删除匹配的元素，但这意味着访问`Deque`.

有人对这个问题有建议吗？我总是可以“创建”一个`Deque`可以满足我需要的东西，但我真的不喜欢！太容易出错了...

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-25T13:48:14.677

根据匹配的执行方式（例如，如果给定“C1”，您知道匹配必须是“C2”而不是“C146”或其他），将 Queue 替换为带有“C1”的[LinkedHashMap](http://docs.oracle.com/javase/6/docs/api/java/util/LinkedHashMap.html)可能是有意义的" 和 "C2" 等作为键。生产者将元素添加到[LinkedBlockingQueue](http://docs.oracle.com/javase/6/docs/api/java/util/concurrent/LinkedBlockingQueue.html)（没有最大容量），而消费者轮询队列并使用`ContainsKey`在 hashmap 上确定匹配元素是否已经在 map 中；如果匹配，则从地图中删除匹配元素，否则将当前元素添加到地图中。当消费者处理完所有生产者数据后，LinkedHashMap 将拥有所有不匹配元素的有序列表。只需确保您能够将“C2”匹配到“C1”以及能够将“C1”匹配到“C2”

```
public class SharedCollections {
    public static LinkedBlockingQueue<Object> workList = new LinkedBlockingQueue<>();
}

public class Producer implements Runnable {
    public void run() {
        while(true) {
            SharedCollections.workList.offer(obj);
        }
    }
}

public class Consumer implements Runnable {
    LinkedHashMap<String, Object> hashMap = new LinkedHashMap<>();
    public void run() {
        while(true) {
            Object obj = SharedCollections.workList.take(); // blocks if the workList is empty
            String matchingId = getMatchingId(obj.id); // e.g. returns "C2" if the object's id is "C1"
            if(hashMap.containsKey(matchingId)) {
                hashMap.remove(matchingId);
            } else {
                hashMap.put(obj.id, obj);
            }
        }
    }
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-25T15:19:26.367

如果您可以通过仅查看单个行将行拆分为多个类别（或存储桶）（即每种行类型确实具有不同的格式），您可以继续使用 BlockingQueue 来连接生产者和消费者。

对于消费者从队列中读取的每一行，它确定该行的正确存储桶，并使用 Linked(Hash)Map 到

*   存储它，如果没有行已经存储在桶中
*   产生一对已经存储在地图中的线并发出它

队列耗尽后，消费者将产生所有遇到的对，并且消费者的 LinkedMap 按插入顺序保存所有未配对的行。

这将把匹配封装在消费者内部，保持生产者、消费者和连接它们的队列之间的关注点清晰分离。

# java - 如何解决jsp中的aui单选按钮错误？

> ID：16212742
> 
> 赞同：2
> 
> 时间：2013-04-25T10:47:28.007
> 
> 标签：java, jsp, liferay

你好我`aui`在jsp中使用收音机。但是当我在网络浏览器上看到输出时，用户可以选择所有单选按钮值。用户应该只能选择一个单选按钮，但我可以选择全部。如何解决？请帮助我。

这是我的 JSP：

```
<aui:input inlineLabel="right" name="veryhigh" type="radio" value="1" label="Very High" />
<aui:input name="high" type="radio"  label="Higher"  />
<aui:input name="neutral" type="radio"  label="Neutral"  />
<aui:input name="low" type="radio"  label="Low"  />
<aui:input name="verylow" type="radio"  label="Very Low"  /> 
```

我犯了什么错误？请告诉我。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-25T16:06:47.407

如果要从单选组中选择值，则单选类型的“名称”属性对于组中的所有单选类型都应该相同。简单的例子：

```
<input type = "radio" name = "gender" value = "Male"/> 
<input type = "radio" name = "gender" value = "Female"/> 
```

当您使用以上行时，只有一个单选按钮（男性或女性；取决于用户点击的内容被选中）如果您为上述代码提供单独的名称属性，则它们被视为单独的，因此当您单击它们时两者都会被选中。这正是您的代码中发生的事情。

```
<aui:input name="high" type="radio"  label="Higher"  /> and
 <input type = "radio" name = "gender" value = "Male"/> 
```

两者的工作方式相同.. aui 是 liferay 中使用的合金 ui 标签...

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-25T11:24:28.477

错误是你给`name`了单选按钮不同的，比如：

```
<aui:input inlineLabel="right" name="volume" type="radio" value="1" label="Very High" />
<aui:input name="volume" type="radio"  label="Higher"  value="higher"/>
<aui:input name="volume" type="radio"  label="Neutral"  value="neutral"/>
<aui:input name="volume" type="radio"  label="Low"  value="low"/>
<aui:input name="volume" type="radio"  label="Very Low"  value="very low"/> 
```

在[W3 学校](http://www.w3schools.com/html/html_forms.asp)，您可以了解有关表单元素的更多信息，它还有一个关于单选按钮的部分。

# c# - 生成日志的应用程序中的实时日志监控

> ID：16212743
> 
> 赞同：0
> 
> 时间：2013-04-25T10:47:28.003
> 
> 标签：c#, .net, logging, monitoring

我在 .NET 中有一个需要记录的应用程序。我想记录某些事件和异常。我在网上看到 log4net 被强烈推荐用于此目的。我将其设置为快速开始记录到 txt 文件。

但这对我的目的来说还不够好。在我的应用程序中，我希望能够调出一个监视器，其中包含正在生成的所有日志的实时列表。

如果 log4net 是最好的方法呢？如果不是，那是什么？

我可以毫无问题地使用日志事件并找到自己的方式来显示数据，我只是不知道将日志事件发送到我的监视器表单的最佳方式是什么。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-25T11:02:40.793

你可能想看看[log2console](http://log2console.codeplex.com/)，它是一个与 log4net 兼容的优秀日志监视器。它可以监听 log4net 远程附加程序并很好地呈现数据。

如果您需要在程序中实现自己的监视器，我建议您尝试[MemoryAppender](http://logging.apache.org/log4net/release/sdk/log4net.Appender.MemoryAppender.html)。[这里](https://stackoverflow.com/questions/5608617/log4net-memoryappender-problem)有一些有用的信息（这个问题实际上是一个非常好的教程）

如您所见，他设置了两个附加程序——一个记录到文件，一个记录到内存附加程序。在您的监视器中，您可以使用以下代码获取附加程序的句柄：

```
Hierarchy hierarchy = LogManager.GetRepository() as Hierarchy;
MemoryAppender mappender = hierarchy.Root.GetAppender("MemoryAppender") as MemoryAppender; 
```

`mappender.GetEvents()`您可以在使用清除它之前，在后台线程中循环获取新事件`mappender.Clear()`。请记住，这不是线程安全的，因此为您的日志记录创建一个线程安全的包装器可能是一个好主意。

# c - 使用`int x = x;`表达式（C语言）可能是什么情况？

> ID：16212748
> 
> 赞同：2
> 
> 时间：2013-04-25T10:47:45.353
> 
> 标签：c, syntax, coding-style

我有一个用 C 编写的库。在代码中我发现了几行这样的代码`int x = x;`。我需要重写所有这些代码以使用 /Zw 标志进行编译。在某些地方，这意味着`int x = some_struct->x;`，但在其他情况下，我不明白它是什么。在某些地方它首先使用 x 变量。那么在哪些情况下可以使用这样的`int x = x;`表达方式。

```
void oc_enc_tokenize_dc_frag_list(oc_enc_ctx *_enc,int _pli,
    const ptrdiff_t *_coded_fragis,ptrdiff_t _ncoded_fragis,
    int _prev_ndct_tokens1,int _prev_eob_run1){
    const ogg_int16_t *frag_dc;
    ptrdiff_t          fragii;
    unsigned char     *dct_tokens0;
    unsigned char     *dct_tokens1;
    ogg_uint16_t      *extra_bits0;
    ogg_uint16_t      *extra_bits1;
    ptrdiff_t          ti0;
    ptrdiff_t          ti1r;
    ptrdiff_t          ti1w;
    int                eob_run0;
    int                eob_run1;
    int                neobs1;
    int                token;
    int                eb;
    int                token1=token1;
    int                eb1=eb1;
    /*Return immediately if there are no coded fragments; otherwise we'd flush
       any trailing EOB run into the AC 1 list and never read it back out.*/
    if(_ncoded_fragis<=0)return;
    frag_dc=_enc->frag_dc;
    dct_tokens0=_enc->dct_tokens[_pli][0];
    dct_tokens1=_enc->dct_tokens[_pli][1];
    extra_bits0=_enc->extra_bits[_pli][0];
    extra_bits1=_enc->extra_bits[_pli][1];
    ti0=_enc->ndct_tokens[_pli][0];
    ti1w=ti1r=_prev_ndct_tokens1;
    eob_run0=_enc->eob_run[_pli][0];
    /*Flush any trailing EOB run for the 1st AC coefficient.
      This is needed to allow us to track tokens to the end of the list.*/
    eob_run1=_enc->eob_run[_pli][1];
    if(eob_run1>0)oc_enc_eob_log(_enc,_pli,1,eob_run1);
    /*If there was an active EOB run at the start of the 1st AC stack, read it
       in and decode it.*/
    if(_prev_eob_run1>0){
      token1=dct_tokens1[ti1r];
      eb1=extra_bits1[ti1r];
      ti1r++;
    eob_run1=oc_decode_eob_token(token1,eb1); 
```

代码示例 - 变量`token1`- 它是第一次`token1`在文件中使用，并且`token1`从未在其他文件中遇到过，它不是全局的，在任何地方都不是静态的......

**使用 /Zw 标志更新**
：错误 C4700：未初始化的局部变量 'token1' 未使用
标志：使用这个 lib 一切正常
**更新 2**
它是`theora 1.1.1`lib根据评论中的人的建议
**恢复**
，我将每个替换`int x = x;`为`int x = 0`，一切正常 =) 大家thanx寻找答案

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-04-25T10:52:43.643

如果您确实有`int x = x;`，则没有太多用处。这部分尝试`x`使用自身进行初始化，即使用未初始化变量的值。

这可能会抑制一些与未初始化或未使用的变量相关的编译器警告/错误。但是一些编译器也可以捕捉到这些可疑的情况。

从 C 标准的角度来看，这也可能导致未定义的行为。

**编辑**：[Debian Linux 中的随机数错误](http://www.schneier.com/blog/archives/2008/05/random_number_b.html)是一篇关于使用和滥用未初始化变量以及一天可能支付的价格的文章（带有更多链接）。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2013-04-25T10:51:58.470

它可以防止编译器发出变量未使用的警告。

# cruisecontrol.net - CCNet AsseblyInfo 更新不起作用。我的配置有问题吗？

> ID：16212757
> 
> 赞同：0
> 
> 时间：2013-04-25T10:48:09.570
> 
> 标签：cruisecontrol.net, ccnet-config

以下是我正在使用的配置，即使我通过签入强制构建，程序集的版本号也不会更新。

可能我错过了一些东西。

注意：新构建服务器，这是我的第一个。我们有很多 Assemblyinfo.cs 文件，在不同的项目下。

我需要使用 msbuildtaks 来解决这个问题吗？如果是这样，你能举个例子吗？

```
<cruisecontrol xmlns:cb="urn:ccnet.config.builder" xmlns="http://thoughtworks.org/ccnet/1/8">
 <!-- preprocessor settings -->
 <cb:define ArtifactsDir="\Artifacts" />
 <cb:define ProductNameCompanySvnPath = "D:\CompanySvn\Trunk\Source\"/>
 <cb:define TortoiseSvnExe = "C:\Program Files\TortoiseSVN\bin\svn.exe"/>
 <cb:define SvnPathToBuild = "http://dummy.mummy.com/svn/Company/branches/Branch-meau/" />
 <cb:define NantExecutablePath = "C:\Program Files\NANT\bin\nant.exe"/>
 <cb:define BranchNameCI="_BR_Meau_CI"/>
 <cb:define BuildMode = "Release"/>
 <cb:define PlatformCpu = "X86"/>
 <cb:define MsBuildExecutable = "C:\Windows\Microsoft.NET\Framework64\v3.5\msbuild.exe" />
 <cb:define MajorVersionNumber = "4"/>
 <cb:define MinorVersionNumber = "1"/>

<cb:define name="svn_ci_ProductName">
    <executable>$(TortoiseSvnExe)</executable>
    <workingDirectory>$(ProductNameCompanySvnPath)ProductName.Company\</workingDirectory>
    <trunkUrl>$(SvnPathToBuild)ProductName.Company/</trunkUrl>
    <cleanUp>true</cleanUp>
    <autoGetSource>true</autoGetSource>
</cb:define>
<cb:define name="svn_ci_Database">
    <executable>$(TortoiseSvnExe)</executable>
    <workingDirectory>$(ProductNameCompanySvnPath)Database\</workingDirectory>
    <trunkUrl>$(SvnPathToBuild)Database/</trunkUrl>
    <cleanUp>true</cleanUp>
    <autoGetSource>true</autoGetSource>
</cb:define>
<cb:define name="svn_ci_ThirdParty">
    <executable>$(TortoiseSvnExe)</executable>
    <workingDirectory>$(ProductNameCompanySvnPath)ThirdParty\</workingDirectory>
    <trunkUrl>$(SvnPathToBuild)ThirdParty/</trunkUrl>
    <cleanUp>true</cleanUp>
    <autoGetSource>true</autoGetSource>
</cb:define>
<cb:define name="svn_ci_Release">
    <executable>$(TortoiseSvnExe)</executable>
    <workingDirectory>$(ProductNameCompanySvnPath)Release\</workingDirectory>
    <trunkUrl>$(SvnPathToBuild)Release/</trunkUrl>
    <cleanUp>true</cleanUp>
    <autoGetSource>true</autoGetSource>
</cb:define>
  <project name="Company_SVN_Build" description="Build Trunk after merge.">
    <workingDirectory>$(ProductNameCompanySvnPath)ProductName.Company\</workingDirectory>
    <!--<triggers>
     check the source control every X time for changes, and run the tasks if changes are found 
      <intervalTrigger name="continuous" seconds="30" buildCondition="IfModificationExists" initialSeconds="5"/>
    </triggers>-->
    <triggers>
        <intervalTrigger name="continuous" seconds="180" buildCondition="IfModificationExists" initialSeconds="30" />
    </triggers>
    <labeller type="assemblyVersionLabeller">
      <major>$(MajorVersionNumber)</major>
      <minor>$(MinorVersionNumber)</minor>
      <incrementOnFailure>true</incrementOnFailure>
    </labeller>
    <!-- get all the souce from the branch required to build the binaries. -->
    <sourcecontrol type="multi">
     <sourceControls>
      <svn>
         <cb:svn_ci_ProductName/>
      </svn>
      <svn>
         <cb:svn_ci_Database/>
      </svn>
      <svn>
         <cb:svn_ci_ThirdParty/>
      </svn>
      <svn>
         <cb:svn_ci_Release/>
      </svn>
     </sourceControls>
    </sourcecontrol>
    <tasks>
        <msbuild>
           <executable>$(MsBuildExecutable)</executable>
           <projectFile>$(ProductNameCompanySvnPath)ProductName.Company\ProductName.Company.sln</projectFile>
           <buildArgs>/p:Configuration=Release /p:Platform=$(PlatformCpu) /v:diag</buildArgs>
           <targets>clean</targets>
           <timeout>9000</timeout>
           <logger>C:\Program Files (x86)\CruiseControl.NET\server\ThoughtWorks.CruiseControl.MsBuild.dll</logger>
         </msbuild>
         <msbuild>
           <executable>$(MsBuildExecutable)</executable>
           <projectFile>$(ProductNameCompanySvnPath)ProductName.Company\ProductName.Company.sln</projectFile>
           <buildArgs>/p:Configuration=Release /p:Platform=$(PlatformCpu) /v:diag</buildArgs>
           <targets>Build</targets>
           <timeout>9000</timeout>
           <logger>C:\Program Files (x86)\CruiseControl.NET\server\ThoughtWorks.CruiseControl.MsBuild.dll</logger>
         </msbuild>
        <exec>
          <executable>Prepare_ProductName_Release.bat</executable>
          <baseDirectory>$(ProductNameCompanySvnPath)Release</baseDirectory>
          <buildArgs>all</buildArgs>
          <buildTimeoutSeconds>100</buildTimeoutSeconds>
        </exec>
    </tasks>
    <!-- all plublishers are listed below -->
    <publishers>
      <xmllogger />
      <artifactcleanup cleanUpMethod="KeepLastXBuilds" cleanUpValue="50" />
    </publishers>
  </project>
<!-- End Projects -->
</cruisecontrol> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-05-01T18:40:58.267

If I'm reading this correctly:

CC.NET is not going to tag your Assemblyinfo.cs files. You have to do that yourself. The "Version" in the CC.NET context is the Cardinal/Ordinal number of the build. Your first build will be "1", then "2", etc, etc.

See my AssemblyInfo.cs "tagging" example here: [Use SVN Revision to label build in CCNET](https://stackoverflow.com/questions/1160/use-svn-revision-to-label-build-in-ccnet/12481921#12481921)

I prefer to tag it with the SVN revision. You may use the CC.NET version.

The way I think of CC.NET is "a big super fancy msbuild caller" "with some post build reporting".

# command-line - 打开一个在python中打开一个文本文件的批处理文件

> ID：16212759
> 
> 赞同：0
> 
> 时间：2013-04-25T10:48:12.823
> 
> 标签：command-line, python-3.x

我正在编写一个可以执行批处理文件的脚本，该脚本需要先在同一文件夹中打开一个文件。我目前的代码是：

```
from subprocess import Popen
p = Popen("Mad8dl.bat <RUNTHISTO.txt>", cwd=r"C:\...\test")
stdout, stderr = p.communicate() 
```

其中`...`只是文件夹的路径。但是，每次我运行它时，都会出现语法错误：

```
The syntax of the command is incorrect 
```

任何有关语法的帮助将不胜感激。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-25T13:18:04.523

首先，您可能应该从代码中删除 < 和 > 尖括号；只需将文件名（不带任何括号）传递给您的批处理文件。（除非您的文件名确实包含 < 和 > 字符，在这种情况下，我真的很想知道您是如何管理它的，因为这些字符在 Windows 的文件名中是被禁止的）。

其次，您的代码应如下所示：

```
from subprocess import Popen, PIPE
p = Popen(["Mad8dl.bat", "RUNTHISTOO.txt"], cwd=r"C:\...\test", stdout=PIPE, stderr=PIPE)
stdout, stderr = p.communicate() 
```

请注意包含调用组件的列表，而不是单个字符串。另请注意，如果您想稍后使用communicate()，则需要在您的Popen() 调用中指定`stdout=PIPE`and 。`stderr=PIPE`

# ios - 当服务在 iPhone 中运行时不是 nil 时，BLE 特性为 nil

> ID：16212762
> 
> 赞同：2
> 
> 时间：2013-04-25T10:48:20.373
> 
> 标签：ios, core-bluetooth

在我的项目中，我使用与我的 iPhone 连接的 BLE 外围设备。当我超过最大连接距离时，通信断开，然后我回来，通信连接。但重新连接后，特性无法写入数据！似乎特征是零，但服务不是零。我必须再次运行我的应用程序，以便特征可以正常写入数据。有没有人有同样的情况，或者有什么想法？等待帮助。

```
 -(void) writeCharacteristicValue:(int )value forCharacteristic:(CBCharacteristic *)charateristic  type:(CBCharacteristicWriteType ) type
{
    NSLog(@"writeCharacteristicValue");

    NSData  *data   = nil;
    u8 val = value;

    if (nil == servicePeripheral)
    {
        NSLog(@"Not connected to a peripheral");
        return ;
    }

    if (nil == charateristic)
    {
        NSLog(@"No valid characteristic");
        return;
    }

    data = [NSData dataWithBytes:&val length:sizeof (val)];
    [servicePeripheral writeValue:data forCharacteristic: charateristic type:type];
    NSLog(@"dataWithBytes value %d",val);
}
CoreBluetooth[WARNING] <CBConcreteCharacteristic: 0x1ed5f1c0> is not a valid characteristic for peripheral <CBConcretePeripheral: 0x20002520 UUID = <CFUUID 0x20078a60> BE196610-C2A1-5D22-3E71-6851718F9672, Name = "Finder", IsConnected = YES> 
```

有时 NSLog “没有有效的特征”，所以我认为特征是 nil 。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-28T03:19:53.230

问题解决了！我将连接的服务放在 NSMutableArray 中，当外围设备断开连接时，我无法从连接的服务数组中删除服务。因此，下次我从数组中获取服务时，它会返回已发布的错误服务。现在，我更改了我的代码并及时删除了断开的服务。它运作良好！

# java - Liferay Service Builder 无法识别的功能

> ID：16212766
> 
> 赞同：0
> 
> 时间：2013-04-25T10:48:29.677
> 
> 标签：java, tomcat, liferay, liferay-6

我在我的 Service Builder 上添加了一个新方法：

```
public IRRule ruleCreation()
throws SystemException, PortalException {
    IRRule rule = new IRRuleImpl();
    return rule;
} 
```

该方法是从 portlet 类中识别出来的（没有出现错误）：

```
public class RulePortlet extends MVCPortlet{

public void addRule(ActionRequest request, ActionResponse response)
throws Exception {
    ThemeDisplay themeDisplay =
    (ThemeDisplay)request.getAttribute(WebKeys.THEME_DISPLAY);

    IRRule rule = IRRuleLocalServiceUtil.ruleCreation(); // This is The Method!!!!

    rule.setCompanyId(themeDisplay.getCompanyId());
    rule.setGroupId(themeDisplay.getScopeGroupId());
    rule.setRuleName(ParamUtil.getString(request, "ruleName"));
    rule.setRuleDescription(ParamUtil.getString(request, "ruleDescription"));
    rule.setRuleFile(ParamUtil.getString(request, "ruleFile"));

    ArrayList<String> errors = new ArrayList<String>();
    if (RuleValidator.validateRule(rule, errors)) {
        IRRuleLocalServiceUtil.addRule(rule,
        themeDisplay.getUserId());
        SessionMessages.add(request, "product-saved-successfully");
    } else {
        SessionErrors.add(request, "fields-required");
    }
}
... 
```

但是在测试此功能时，我遇到此错误抛出控制台...

```
java.lang.NoSuchMethodError: com.ent.oriol.inputrules.service.IRRuleLocalServiceUtil.ruleCreation()Lcom/ent/oriol/inputrules/model/IRRule; 
```

这怎么可能？我应该怎么做才能解决这个问题？？过去我在服务构建器（LocalServiceImpl 类）中添加了其他功能，没有任何麻烦！

谢谢你的帮助，奥里奥尔

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-05-07T20:16:00.180

正如您评论说重启有帮助，问题可能是一些旧代码以某种方式被缓存，可能是在运行的调试器进程中，在重建服务时没有拾取由 servicebuilder 引起的类更改。

事后很难说 - 如果你能重现这个，了解情况会很有趣，例如 IDE、测试设置等。否则，恐怕你将不得不将其视为故障矩阵。

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2013-04-25T11:00:00.510

```
 Goto service.xml--->select Overview--->In the right corner build services option is there--->click that 
```

![在此处输入图像描述](https://i.stack.imgur.com/FXqQo.png)

如果在 service.xml 中看到任何更改，只需按照上面的屏幕进行操作，我提到的内容将很容易纠正。在他的声明中，他提到就像在服务构建器中所做的一些更改，这就是我给出解决方案的原因

# java - PriorityBlockingQueue 支持的 ThreadPoolExecutor 似乎不起作用

> ID：16212767
> 
> 赞同：6
> 
> 时间：2013-04-25T10:48:37.123
> 
> 标签：java, threadpool, priority-queue, threadpoolexecutor

我有大量图片要从服务器获取，我想获取一些优先级高于其他图片的图片，所以我实现了自己的图片`ThreadPoolExecutor`，它返回一个`FutureTask`实现`Comparable`但它似乎不起作用的图片。这些任务或多或少按照我将它们添加到队列中的顺序进行处理。我已经调试了`BlockingQueue`my`ThreadPoolExecutor`并发现当我添加`Runnable`更高优先级的 my 时，它并没有在队列顶部一直向上移动。这是代码

```
public class PriorityThreadPoolExecutor extends ThreadPoolExecutor {

    public PriorityThreadPoolExecutor(int corePoolSize, int maximumPoolSize,
            long keepAliveTime, TimeUnit unit, BlockingQueue<Runnable> workQueue) {
        super(corePoolSize, maximumPoolSize, keepAliveTime, unit, workQueue);
    }

    protected <T> RunnableFuture<T> newTaskForValue(Runnable runnable, T value) {
        return new ComparableFutureTask<T>(runnable, value);
    }

    protected class ComparableFutureTask<T> 
    extends FutureTask<T> implements Comparable<ComparableFutureTask<T>> {

        private Object object;

        public ComparableFutureTask(Runnable runnable, T result) {
            super(runnable, result);
            object = runnable;
        }

        @Override
        @SuppressWarnings({ "unchecked", "rawtypes" })
        public int compareTo(ComparableFutureTask<T> o) {
            if (this == o) {
                return 0;
            }
            if (o == null) {
                return -1; // this has higher priority than null
            }
            if (object != null && o.object != null) {
                if (object.getClass().equals(o.object.getClass())) {
                    if (object instanceof Comparable) {
                        return ((Comparable) object).compareTo(o.object);
                    }
                }
            }
            return 0;
        }
    }

} 
```

我以这种方式将任务添加到池中：

```
public BitmapLoader(Context context){
        mThreadPoolExecutor = new PriorityThreadPoolExecutor(10, Integer.MAX_VALUE,//corepool and maxpool
                1L, TimeUnit.SECONDS,//keep alive idle threads
                new PriorityBlockingQueue<Runnable>());//priority queue for jobs
    }

public void queuePhoto(String url, ImageView imageView, int priority) {     
    BitmapToLoad p = new BitmapToLoad(url, imageView, priority);
    final RunnableFuture<Object> futureTask = 
            mThreadPoolExecutor.newTaskForValue(new BitmapLoaderRunnable(p), null);
    Log.d("BitmapLoader", "Scheduling job with priority " + priority);
    mThreadPoolExecutor.execute(futureTask);
} 
```

我的`BitmapLoaderRunnable`工具`Comparable`和当我调试该`compareTo`方法时被调用。我究竟做错了什么？谢谢

编辑：下面是我的可运行文件的代码

```
private class BitmapLoaderRunnable implements Runnable, Comparable<BitmapLoaderRunnable> {
        private BitmapToLoad bitmapToLoad;

        public BitmapLoaderRunnable(BitmapToLoad bitmap) {
            this.bitmapToLoad = bitmap;
        }

        @Override
        public void run() {
            try{
                if(imageViewReused(bitmapToLoad))
                    return;
                Thread.sleep(1000);
                Bitmap bmp = getBitmap(bitmapToLoad.url);
                BitmapCache.put(bitmapToLoad.url, bmp);
                if(imageViewReused(bitmapToLoad))
                    return;
                BitmapDisplayer bd = new BitmapDisplayer(bmp, bitmapToLoad);
                mHandler.post(bd);
            } catch(Throwable th){
                th.printStackTrace();
            }
        }

        @Override
        public int compareTo(BitmapLoaderRunnable other) {
            return this.bitmapToLoad.priority - other.bitmapToLoad.priority;
        }
    } 
```

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-04-26T02:26:24.263

a 的头部`PriorityQueue`是*最小*的元素。因此，如果您首先想要*最高*优先级，则需要反转比较。

```
 @Override
    public int compareTo(BitmapLoaderRunnable other) {
        return other.bitmapToLoad.priority - this.bitmapToLoad.priority;
    } 
```

# .net - 我可以在 Task.Run 中做一个例外使程序崩溃吗？

> ID：16212769
> 
> 赞同：5
> 
> 时间：2013-04-25T10:48:39.493
> 
> 标签：.net, .net-4.5

我不是悄悄吞下异常的忠实拥护者，但下面的代码正是这样做的：

```
Task.Run(() =>
{
    var obj = DoSomethingCpuIntensive(); // returns null, due to a bug
    obj.DoMoreStuff();
    Console.WriteLine("after"); // never get here; program continues running
}); 
```

我已经阅读了有关[ThrowUnobservedTaskExceptions](http://msdn.microsoft.com/en-gb/library/jj160346.aspx)配置值的信息，但这并没有帮助，因为我从未对`Task`返回的内容做任何事情（编辑：实际上它确实有帮助，但仅在发布版本中）。

有没有办法让这个未处理的异常使程序崩溃？我是否以`Task.Run`不应该的方式使用？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-25T12:44:07.710

我强烈建议您使用`Task.Run`over `ThreadPool.QueueUserWorkItem`。

首先，退后一步。的目的是`DoSomethingCpuIntensive`什么？如果您正在计算某个值，我建议您将其返回，这样您就有 a`Task<T>`而不是 a `Task`。例如，（假设`DoMoreStuff`不是 CPU 密集型的）：

```
async Task DoWorkAsync()
{
  var obj = await Task.Run(() => DoSomethingCpuIntensive());
  obj.DoMoreStuff();
} 
```

我试图传达的想法是，您的代码*应该*关心后台操作的结果，即使“结果”只是“成功”或“异常”。这样你的代码就更干净了。否则，您将拥有一个半独立的系统，您只能通过检测应用程序状态的变化来做出响应。更乱。

也就是说，如果您确实想要拥有半独立系统并且希望它在失败时使您的进程崩溃，那么`ThrowUnobservedTaskExceptions`这正是您想要的。我不确定你为什么认为它没有帮助。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-25T11:16:44.760

看起来`Task.Run`像这样使用确实是一个错误。我想我应该这样`await`做，否则会发生上述愚蠢的事情。

当它与 . 一起崩溃时`await`，调试器相当无用，如下所示：

                ![在此处输入图像描述](https://i.stack.imgur.com/x0Kpo.png)

我认为这一切意味着我真的在`Task.Run`这里做错了。

一个简单的解决方法是改用旧的`ThreadPool.QueueUserWorkItem`：

                  ![在此处输入图像描述](https://i.stack.imgur.com/FjkQH.png)

那好多了！无论如何，我在这段代码中并不真的需要 async/await；我只是使用`Task.Run`它，因为它打字少。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-25T12:42:30.370

你说你读过[`ThrowUnobservedTaskExceptions`](http://msdn.microsoft.com/en-gb/library/jj160346.aspx)；你真的试过在你的配置中`ThrowUnobservedTaskExceptions`运行你的程序吗？`true`

.NET 4 中的默认行为是未观察到`Task`的异常将导致整个过程中断。

.NET 4.5 中的默认行为是未观察到的`Task`异常*不会*导致进程中断。由于您在 .NET 4.5 上运行，因此设置`ThrowUnobservedTaskExceptions`为`true`应该完全符合您的要求。

# facebook - 通过应用访问令牌获取页面访问令牌

> ID：16212772
> 
> 赞同：2
> 
> 时间：2013-04-25T10:48:45.847
> 
> 标签：facebook, facebook-graph-api, token, facebook-page

我无法获得我的用户页面访问令牌。我已在我的应用程序设置许可下启用了 manage_pages。

当我访问 Graph API 时，我得到了空白数据，没有访问令牌。

```
 /page_id?fields=access_token 
```

我了解到我们可以通过配置 manage_page 权限来获取用户页面访问令牌。

[https://developers.facebook.com/docs/reference/api/page/#page_access_tokens](https://developers.facebook.com/docs/reference/api/page/#page_access_tokens)

# wix - 在 Visual Studio 2008/2010 中无法看到 WIX 项目类型

> ID：16212773
> 
> 赞同：3
> 
> 时间：2013-04-25T10:48:45.860
> 
> 标签：wix, wix3.7, votive

我的机器上安装了 Visual Studio 2008、2010 和 WIX37.msi (WIX 3.7)。

但是，我无法在 Visual Studio 2008/2010 中看到 WIX 项目类型。

我需要安装额外的工具/插件吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-25T12:39:19.553

我的机器上安装了 Visual Studio 2008 和 Visual Studio 2010，并从[Codeplex](http://wix.codeplex.com/releases/view/99514)安装了 WiX v3.7 RTM 。对我来说一切正常。`RunWixToolsOutOfProc`VS2008 中有一个已知问题，需要您设置一个名为`true`. 发生这种情况是因为 WiX v3.7 的部分内容针对 NETFX4.0 构建的不正确，而 VS2008 在 NETFX2.0 上运行。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2015-12-11T14:58:39.937

安装 WiX 工具集 v3.0，使其与 Visual Studio 2008 一起使用。您可以在此处获取：[http ://wix.codeplex.com/releases/view/44406](http://wix.codeplex.com/releases/view/44406)

我不知道为什么它没有记录在他们的网站上，但显然你不能安装最新版本（目前为 3.10）并使其与 VS2008 一起使用。

# android - 在 Android 中首次启动时在应用程序上显示文本库

> ID：16212785
> 
> 赞同：0
> 
> 时间：2013-04-25T10:49:36.793
> 
> 标签：android, android-layout, progressdialog

我发布这个问题是因为我从来没有研究过这个问题，而且我不知道使用哪个组件来实现这样的功能。

请参阅此屏幕截图。这是一个示例图像。这不是我的工作，这是从谷歌图片中获取的：

![在此处输入图像描述](https://i.stack.imgur.com/QLMhT.jpg)

现在在应用程序启动时，我正在读取 Android sd 卡并更新我的数据库。与此同时，我正在像这样使用 ProgressDialog

![在此处输入图像描述](https://i.stack.imgur.com/tsE9C.jpg)

现在我想要展示 5 张图片幻灯片。不是图片幻灯片我想要一个单一的颜色背景，并且文本应该每两秒在同一个背景上更改一次，我有五个小圆圈。

现在我无法得到它是什么。图像幻灯片放映或其他本机组件。我在聊天室问他们让我在这里发帖。

如果它可以在没有图像的情况下发生，那就更好了，因为不同的设备尺寸有很多复杂性。

我该如何实施？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-25T10:54:33.560

尝试使用[android smartimageview](https://github.com/loopj/android-smart-image-view) 或[Viewflow](https://github.com/pakerfeldt/android-viewflow)

# c# - 什么是 Control.Disposing 属性？

> ID：16212787
> 
> 赞同：2
> 
> 时间：2013-04-25T10:49:39.403
> 
> 标签：c#, .net, winforms, controls

根据 MSDN：

Control.Disposing 属性 获取一个值，该值指示基 Control 类是否处于释放过程中。

但是当我检查时，控件的 Disposing 属性始终为 false（在 Dispose() 方法本身内部）。

这个 Disposing 属性什么时候会变成真的？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-25T12:44:54.713

`Control.Disposing`在被调用后变为真`Dispose()`，在它被处理后它再次变为假并`IsDisposed`变为真。

# tsql - Vim - 自定义语法 - 如何匹配第二个单词

> ID：16212793
> 
> 赞同：2
> 
> 时间：2013-04-25T10:50:07.887
> 
> 标签：tsql, vim, syntax-highlighting

我正在尝试为 Sybase T-SQL 进行自定义语法突出显示，当我尝试匹配以下行中的表名时，我被卡住了：

```
UPDATE myTableName 
```

我试过了：

```
syn match tsqlUpdateTableName "\w\+" contained
syn match tsqlUpdateLine "update.*" nextgroup=tsqlUpdateTableName

hi tsqlUpdateTableName guifg=white guibg=red 
```

但它与 myTableName 不匹配，我将不胜感激。干杯!

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-25T11:15:44.747

问题是当前组匹配*之后*`nextgroup`的唯一匹配。

 *您可以通过在行匹配中排除表名来解决此问题，方法是删除`.*`或，就像我在这里所做的那样，通过断言以下表名但以 结束匹配`\ze`：

```
syn match tsqlUpdateTableName "\w\+" contained
syn match tsqlUpdateLine "update \ze\w\+" nextgroup=tsqlUpdateTableName 
```

或者，您可以在行匹配中包含表名并`contains=`改用：

```
syn match tsqlUpdateTableName "update \zs\w\+" contained
syn match tsqlUpdateLine "update \w\+" contains=tsqlUpdateTableName 
```

* * *

PS：您可能应该将模式收紧到整个单词匹配，例如`"\<update\>`；否则，它可能会错误地匹配诸如`catchupdate`.*

# javascript - easyXDM 在 IE8 上失败，对象未定义

> ID：16212795
> 
> 赞同：0
> 
> 时间：2013-04-25T10:50:12.270
> 
> 标签：javascript, internet-explorer-8, easyxdm

该脚本在除 IE8 之外的所有浏览器中运行良好，错误将我指向第 434 列第 75 行，告诉我有一个未定义的对象。

错误日志：

```
Messaggio: 'undefined' è nullo o non è un oggetto
Linea: 434
Carattere: 75
Codice: 0
URI: http://127.0.0.1:81/apitest/js/easyXDM.js 
```

这是该行的功能：

```
function testForNamePropertyBug(){
    var form = document.body.appendChild(document.createElement("form")), input = form.appendChild(document.createElement("input"));
    input.name = IFRAME_PREFIX + "TEST" + channelId; // append channelId in order to avoid caching issues
    HAS_NAME_PROPERTY_BUG = input !== form.elements[input.name];
    document.body.removeChild(form);
} 
```

确切的第 434 行第 75 列是： *输入*

编辑： ![在此处输入图像描述](https://i.stack.imgur.com/2On6W.png) 链接： http: [//postimg.org/image/n1ogavda3/](http://postimg.org/image/n1ogavda3/)

# jquery - Jquery：选择不仅具有相同类名的子元素的元素吗？

> ID：16212796
> 
> 赞同：1
> 
> 时间：2013-04-25T10:50:14.363
> 
> 标签：jquery

如何制作一个 jQuery 选择器来选择类名为“foo”的所有元素，除了那些只有类名为“bar”的子元素的元素。

```
<!-- Don't select this -->
<div class="foo">
    <div class="bar"></div>
    <div class="bar"></div>
    <div class="bar"></div>
    <div class="bar"></div>
    <div class="bar"></div>
</div>

<!-- Don't select this -->
<div class="foo">
    <div class="bar"><p>Some text</p></div>
    <div class="bar"></div>
    <div class="bar"></div>
    <div class="bar"><p>Some text</p></div>
    <div class="bar"></div>
</div>

<!-- Select this -->
<div class="foo">
    <p>Some text</p>
    <div class="bar"></div>
    <div class="bar"></div>
    <div class="bar"></div>
    <div class="bar"></div>
</div>

<!-- Select this -->
<div class="foo">
    <p>Some text</p>
</div> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-25T10:52:08.267

像这样的东西？

```
$('.foo > :not(.bar)').closest('.foo'); 
```

[演示](http://jsfiddle.net/E8UzV/)

从 all 开始`.foo`，找到除了那些有`bar`类的直接孩子，然后恢复到`.foo`.

# php - 替换单引号和双引号

> ID：16212798
> 
> 赞同：1
> 
> 时间：2013-04-25T10:50:18.797
> 
> 标签：php, javascript, jquery, mysql

我的 MySQL 数据库中有一个变量。我希望这个变量同时处理单引号和双引号。

例如：

```
$variable = "I'm happy" or $variable = I'm happy or  $variable = "I am happy" 
```

在我的数据库中，第一个示例是：`"i'm happy"`这对我有用。现在问题出在我的 JS 函数上，因为我想调用我的数据：

```
nameFolder = "<?php echo $variable ; ?>" 
```

但是，如果`$variable = "I'm happy"`，我有 double`""`所以我得到一个 JS 错误。如果我加上单引号，则问题与另一种情况相同。

有任何想法吗？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-04-25T10:52:57.360

将数据回显到 JavaScript 的最佳方法是使用[`json_encode`](http://php.net/manual/en/function.json-encode.php)：

```
var nameFolder = <?php echo json_encode($variable); ?>; 
```

**注意：**不应该有任何引号，函数会为你处理。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-25T10:51:24.523

利用

```
nameFolder = "<?php echo str_replace('"', '\"', $variable); ?>" 
```

# java - 如何在 Java 中实现正确的异常处理？

> ID：16212799
> 
> 赞同：0
> 
> 时间：2013-04-25T10:50:24.423
> 
> 标签：java

我目前正在用 Java 编写一个简单的程序来回答一个问题。问题说：

> 您正在修复文档（表示为字符串）未能转换为正确的 xml 的错误。出现此问题的原因可能是：
> A. 某些字符在 xml 中失败，或者
> B. 传入的文档长度 > 100 个字符（它们是小文档）

然后列出 5 个需要转义的字符（例如，用转义序列替换“>”；）。

我已经编写了用转义符替换特殊字符的部分，但我不确定如何处理长度。

```
if (length of string > 100) {
    do what?
} 
```

我在考虑可能实现一个 try catch 语句，但这用于运行时异常，对吗？（空指针等）。从设计的角度来看，在完成功能工作的同时避免此错误的最佳方法是什么？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-25T10:55:15.780

您在这里没有处理异常，而是应该抛出一个异常：

```
private static final int MAX_LENGTH = 100;
// ...

if (inputString.length() > MAX_LENGTH) {
  throw new IllegalArgumentException(
      String.format("String is too large. Found %d characters, maximum is %d.",
          inputString.length(), MAX_LENGTH));
} 
```

这是您通知用户您的方法违反 API 的典型方式。确保您的方法文档指定字符串不能超过 100 个字符。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-25T10:58:10.790

发生异常时应该发生*异常*。你永远不应该使用异常来控制你的业务逻辑（特别是如果它是像 NoEntityFound 这样的第三方异常，如果抛出的第三方异常的规​​则发生变化怎么办？）。

如果长度确实是您需要停下来告诉用户的东西，请抛出自定义异常，例如...

```
throw new IllegalStringLength("String length invalid"); 
```

但是，如果这是您可以在不引发异常并更优雅地处理的情况下做的事情，我通常会说这样做会更好。这不像空指针或数据库无法连接。

然后，您必须捕获上述异常并将其输出给用户（同样，使用异常来控制您的应用程序流）。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-25T10:58:29.653

如果我理解正确，您的函数会将长度小于 100 的字符串转换为 XML。因此，从设计的角度来看，当给定的字符串长度 >= 100 时，我认为抛出 IllegalArgumentException 没有问题。

您不应该尝试继续执行，异常停止函数执行是有原因的 - 以保证符合函数合同的正确结果。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-04-25T10:58:06.073

创建您自己的异常类：

```
public class FileTooLongForXmlException extends Exception{
    public FileTooLongForXmlException() {
        super("Your file is > 100 carac");
    }
} 
```

然后你就这样做：

```
if (length of string > 100) {
    throw new FileTooLongForXmlException();
} 
```

# c# - C#、C 和 OCaml 中的模运算

> ID：16212800
> 
> 赞同：4
> 
> 时间：2013-04-25T10:50:26.023
> 
> 标签：c#, c, ocaml, complexity-theory, modulo

我想确认模运算是一项昂贵的运算，所以我测试了这段代码来检查给定数字是否为偶数：

```
bool is_even(int n) {
    return (n & 1) == 0;
} 
```

然后这个：

```
bool is_even_bis(int n) {
    return (n % 2) == 0;
} 
```

我一开始使用 C#，确实，使用逻辑的代码`&`比另一个快，有时甚至快三倍。使用 ILSpy 我看到编译到 MSIL 时没有进行任何优化，代码完全相同。

然而，正如我的朋友在 C 中发现的那样，使用`gcc -O3`代码编译为：

```
is_even:
    mov     eax, DWORD PTR [esp+4]  # tmp63, n
    and     eax, 1  # tmp63,
    xor     eax, 1  # tmp63,
    ret 
```

和：

```
is_even_bis:
    mov     eax, DWORD PTR [esp+4]  # tmp63, n
    and     eax, 1  # tmp63,
    xor     eax, 1  # tmp63,
    ret 
```

所以基本上严格来说是一样的。即使使用`-O0`优化，操作也不会出现：

```
is_even:
    push    ebp     #
    mov     ebp, esp        #,
    mov     eax, DWORD PTR [ebp+8]  # tmp63, n
    and     eax, 1  # D.1837,
    test    eax, eax        # D.1837
    sete    al      #, D.1838
    movzx   eax, al # D.1836, D.1838
    pop     ebp     #
    ret 
```

不用说编译后的代码在两者之间也是`is_even`一样的。`is_even_bis``-O0`

如果我可以说，更有趣的是，我的另一个朋友使用 OCaml 进行了同样的尝试：

```
let is_even x = ((x land 1) == 0)

let _ = 
  let i = ref 100000000 in
  while !i > 0 do
    ignore (is_even !i);
    decr i
  done 
```

和：

```
let is_even_bis x = ((x mod 2) == 0)

let _ = 
  let i = ref 100000000 in
  while !i > 0 do
    ignore (is_even_bis !i);
    decr i
  done 
```

看起来模数版本在运行字节码时速度更快，但在本机代码中速度较慢！也许有人可以解释这个谜？

然后我开始想知道为什么它在 C# 中的行为不一样（两个函数之间存在明显的性能差距）以及为什么 JIT 编译器不应用与`gcc`. 不知道有没有办法截取JIT编译器的输出，或许有助于理解？

奖励问题：我猜模是基于除法的，因为除法是在 O(n²) 时间内完成的（n 是位数），我们可以说模具有二次时间复杂度吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-25T11:15:09.523

*首先，在便携*的意义上，这些操作没有*速度的概念。*你的断言可能对*你的系统*是正确的，但它们对*所有系统*都是无效的。因此，对微优化进行推测是毫无意义的。您可以通过生成解决有意义问题的程序、对其进行分析以找到占用最多执行时间的代码部分并针对这些时间引入更快的算法来找到更重要的优化。通过*更快的算法*，我的意思是*更好的数据结构*（或*更少的操作*），而不是*不同的操作符*。停止关注微优化！

 ***您的 C 版本`is_even`定义不明确。它可能会产生负零或陷阱表示，特别是对于负数。使用陷阱表示是未定义的行为。

似乎您可能看到的差异可能是由系统上的有[符号整数表示](http://en.wikipedia.org/wiki/Signed_integer_representation)引起的。考虑是否 -1 使用一个补码表示`11111111...11111110`。你会期望`-1 % 2`得到-1，而不是0，不是吗？*（编辑：...但是，如果 -1 表示为，**您希望得到什么结果？）`-1 & 1``11111111...11111110`*对于使用补码作为有符号整数表示的实现，需要一些开销来处理这个问题。

也许您的 C 编译器已经注意到`%`您使用的表达式和您使用的表达式*在您的系统上*`&`是等效的，因此进行了优化，但无论出于何种原因，C# 或 OCaml 编译器都没有执行优化。

 *> 奖励问题：我猜模是基于除法的，因为除法是在 O(n²) 时间内完成的（n 是位数），我们可以说模具有二次时间复杂度吗？

考虑这两个基本操作的时间复杂度是没有意义的，因为它们会因系统而异。我在第一段中提到了这一点。****

# vim - 如何在不离开视觉模式的情况下调用移动光标的函数？

> ID：16212801
> 
> 赞同：7
> 
> 时间：2013-04-25T10:50:33.767
> 
> 标签：vim

我有一个使用内置函数移动光标的`cursor()`函数，它在正常模式下工作正常。
具体来说，假设这是函数：

```
function! F()
    call cursor( line('.')+1, 1)
endfunction 
```

与映射一起使用：

```
 nnoremap <buffer> a :call F()<cr> 
```

现在我想重用这个函数在任何视觉模式（视觉、线条视觉和块视觉）上移动光标，而不会丢失之前的选择。

例如，在视觉模式下使用初始缓冲区（`c`表示光标位于一行，`v`表示该行是当前视觉选择的一部分）：

```
vc 1
   2
   3 
```

击中`a`会给出：

```
v  1
vc 2
   3 
```

再次击中`a`会给出：

```
v  1
v  2
vc 3 
```

所以保留了旧的选择。

我想`F()`尽可能多地重用，因为在我的应用程序`F()`中非常大。
最好的方法是什么？

到目前为止，我能做的最好的就是使用包装函数：

```
function! VisMove(f)
    normal! gv
    call function(a:f)()
endfunction 
```

并映射为：

```
 vnoremap <buffer> a :call VisMove('F')<cr> 
```

但是我不满意，因为：

1.  它需要在我编写的每个新 fgplugin 上放置烦人的包装器。
2.  在不离开视觉（当前）模式的情况下调用移动光标（或具有其他任意副作用）的函数似乎是一件很自然的事情。甚至已经`<expr>`有几乎可以做到的，但它会重置光标位置。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-25T11:21:54.537

我通过将`mode`参数（或布尔`isVisual`标志）传递给函数来解决这个问题：

```
fu! F(mode) range
    if a:mode ==# 'v'
        normal! gv
    endif
    ...
endf
nn <buffer> a :cal F('n')<cr>
vn <buffer> a :cal F('v')<cr> 
```

# facebook - 当 facebook 应用程序使用 Secure Canvas？

> ID：16212802
> 
> 赞同：0
> 
> 时间：2013-04-25T10:50:38.923
> 
> 标签：facebook, https

我有一个 Facebook 应用程序，我的主机有自签名证书。通常这不是问题，因为我的浏览器使用 Canvas URL（带有 http），并且一切正常。但是其他一些浏览器需要 Secure Canvas URL（使用 https），如果 Secure Canvas URL 为空，或者我的主机证书不正确，则会引发异常。
那么浏览器/Facebook 是如何决定何时使用 Canvas URL 以及何时使用 Secure Canvas URL 的呢？我可以让他们只使用 Canvas URL，而不使用 https 吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-25T10:59:13.747

如果我是正确的应用程序有“2011 年 10 月”之类的设置（我会尝试为您验证）。也许如果你禁用那个你可以使用http。此实现背后的想法是将每个新应用程序都放在 https 上。

现在我可以理解你想在没有 https 的情况下尝试的开发目的。并非每个浏览器都以相同的方式使用自签名证书（Chrome <-> FF）。

在商业环境中，我强烈建议您拥有有效的证书。

**编辑：**您的问题可能重复[http://facebook.stackoverflow.com/questions/7308348/facebook-canvas-apps-https-and-http](http://facebook.stackoverflow.com/questions/7308348/facebook-canvas-apps-https-and-http)

**编辑 2：Facebook 身份验证和安全迁移 (HTTPS) 上的应用**

所有 Canvas 和 Page tab 应用程序必须转换为处理 signed_request（fb_sig 将被删除）并获取 SSL 证书以用于“Secure Canvas URL”和“Secure Page Tab URL”（除非您处于沙盒模式）。您必须在 Dev App 设置中提供 SSL 证书以避免您的应用被禁用。

所以......你在沙盒模式吗？

# arrays - 退出后返回数组中的位置

> ID：16212810
> 
> 赞同：0
> 
> 时间：2013-04-25T10:51:18.607
> 
> 标签：arrays, bash

显然我上次问这个时还不清楚，我会再试一次。

我有一个充满值的数组，让我们调用它们`primenumbers.txt`

我有一个 bash 脚本，可以调用它`primechecker`

该脚本将获取数组中的每个值和一次 1 并运行它。但是我希望能够`primechecker`在处理这个数组的某个时刻停下来；让我们称它为 X 并以数组中的起始位置为 X+1 的方式重新启动脚本。

如果有进一步的澄清需要，请告诉我。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-25T10:57:47.693

您能否将当前索引存储在 /tmp 中的文件中并在启动时检查该文件：

```
for i in nums; do
  echo $i > /tmp/marker
  ...
done 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-25T12:20:39.590

您可以尝试创建一个全局环境变量并将位置存储在其中。例如：

*   将此“ `export ARRAY_POS=""`”添加到 ./.profile
*   重新登录然后
*   像这样更新你的脚本：

    ```
    #!/usr/bin/env bash
    for i in nums; do
    ARRAY_POS="$i"
    ...
    done 
    ```

# jqgrid - 将 RTE 与 JQGrid 集成

> ID：16212814
> 
> 赞同：0
> 
> 时间：2013-04-25T10:51:28.107
> 
> 标签：jqgrid, inline-editing, rte

我正在对事件使用内联编辑。单击不可编辑的单元格时，我想打开富文本框。我尝试使用 edittype: custom 并返回 rte 但没有显示。有没有其他方法可以做到这一点。

请建议！

谢谢， 阿夏

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-25T11:57:35.813

using`edittype: custom`对于不可编辑的列没有意义。通过使用使列可编辑`editable: true`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-29T11:24:52.750

我能够使用以下解决方案实现这一目标

加载完成后，我添加了代码以在单元格单击时打开 div

```
loadComplete: function() {
        var iColNotesPresent = getColumnIndexByName($(this), 'NotesPresent'), rows = this.rows, i, c = rows.length;
        var iColNotes = getColumnIndexByName($(this), 'Notes');

        for (i = 1; i < c; i += 1) {
            $(rows[i].cells[iColNotesPresent]).click(function(e) {
                var offset = jQuery(e.target).offset();
                var rteText = $(jQuery(e.target).parent()[0].cells[iColNotes])[0].outerText;
                var rowId = jQuery(e.target).parent()[0].id;
                OpenRTEBox(offset, rteText, rowId);
            });
        }
    },

//Open the div containing RTE 
function OpenRTEBox(offset, rteText, rowId) {

isColNotes = true;
currsel = rowId;  

$('#rteDiv').css({ position: "absolute", top: offset.top, left: offset.left, "z-index": 20 });
$('#rteDiv').show();

frames['rte0'].document.body.innerHTML = rteText; 
```

}

这是 RTE 的 html 代码

```
 <script language="javascript" type="text/javascript">
                    writeRichText("rte0", "rte0", 575, 200, true, false, "Notes");
                </script>

            </td>
        </tr>
        <tr>
            <td align="right">
                <input type="button" id="btnOK" onclick="addNotes();" value="OK"/>
            </td>
            <td align="left">
                <input type="button" id="btnCancel" onclick="closeDiv();" value="Cancel"/>
            </td>
        </tr>
    </table>
</div> 
```

# windows - 使用公钥身份验证为 Windows 设置 OpenSSH

> ID：16212816
> 
> 赞同：93
> 
> 时间：2013-04-25T10:51:39.247
> 
> 标签：windows, ssh, public-key-encryption, openssh, public-key

我在使用公钥身份验证为 Windows 设置 OpenSSH 时遇到问题。

我有这个在我的本地桌面上工作，并且可以使用来自 Unix 机器或其他用于 Windows 机器的 OpenSSH 的密钥进行 ssh。

我已经将构建复制到服务器上，我可以让密码验证正常工作，但是当我使用密钥时，我遇到了以下问题：

```
debug1: Authentications that can continue: publickey,password,keyboard-interactive
debug3: start over, passed a different list publickey,password,keyboard-interactive
debug3: preferred publickey,keyboard-interactive,password
debug3: authmethod_lookup publickey
debug3: remaining preferred: keyboard-interactive,password
debug3: authmethod_is_enabled publickey
debug1: Next authentication method: publickey
debug1: Offering RSA public key: /cygdrive/c/sshusers/jsadmint2232/.ssh/id_rsa
debug3: send_pubkey_test
debug2: we sent a publickey packet, wait for reply
Connection closed by 127.0.0.1 
```

因此，出于测试目的，我一直在尝试通过 SSH 连接到 localhost，但即使在远程尝试时，我也会遇到同样的问题。

更奇怪的是，当我同时启用密码和公钥时`sshd_config`，它只会尝试使用密钥，然后用上面的消息轰炸，甚至不会尝试使用密码。

以下是我采取的步骤：

1.  为 Windows 安装 OpenSSH
2.  `mkgroup -l >>..\etc\group`（添加了本地组）
3.  `mkgroup -d >>..\etc\group`（添加域组）
4.  `mkpasswd -L -u openssh >>..\passwd`（添加了我的本地用户）
5.  `mkpasswd -D -u jsadmint2232 >>..\passwd`（添加了我的域用户）
6.  *编辑文件passwd*中的 homedir以指向 c:\sshusers%USER% - 其中 %USER% 是用户名
7.  启用密码验证，禁用密钥验证
8.  为 jsadmint2232 / OpenSSH 创建 SSH 密钥，并确保在主目录中创建文件
9.  为每个用户添加了 authorized_keys 文件到 .ssh 目录中，并为传入的连接用户添加了密钥
10.  `net stop opensshd`/`net start opensshd`
11.  测试密码身份验证是否在本地和远程都有效
12.  更新了 sshd_config，以启用密钥身份验证 - 重新启动 opensshd
13.  测试连接并得到上述错误。此外，它甚至不尝试密码验证。
14.  更新 sshd_config，完全禁用密码验证 - 重新启动 opensshd
15.  测试连接，仍然出现上述错误

似乎服务器出于某种原因正在终止连接。

* * *

## 回答 #1

> 赞同：271
> 
> 时间：2018-05-24T06:02:30.457

以下是 Windows 10 v.1803 随附的 OpenSSH 的设置步骤（2018 年 4 月更新。请参阅此帖子的评论，它可能不适用于 1809）。

服务器设置（提升的 powershell）：

1.  安装 OpenSSH 服务器：`Add-WindowsCapability -Online -Name OpenSSH.Server~~~~0.0.1.0`.

2.  启动代理和 sshd 服务：（`Start-Service ssh-agent; Start-Service sshd`这将在 中自动生成主机密钥和默认配置`$env:ProgramData\ssh`）。

3.  [可选] 安装 OpenSSHUtils powershell 模块：`Install-Module -Force OpenSSHUtils`

客户端设置（非提升的PowerShell）：

1.  生成用户密钥：`cd $env:USERPROFILE\.ssh; ssh-keygen.exe`，按照提示，同意默认建议的文件位置。这将创建 2 个文件：`id_rsa`和`id_rsa.pub`;

2.  [可选] 将密钥添加到身份验证代理，因此您不必每次使用时都输入密码：（`ssh-add .\id_rsa`或生成的任何文件）；

服务器设置继续（非提升的 powershell）：

1.  以用户身份登录，使用哪个公钥认证
2.  `cd $env:USERPROFILE; mkdir .ssh; cd .ssh; New-Item authorized_keys`;
3.  `id_rsa.pub`将来自客户端的文件内容粘贴到`.ssh\authorized_keys`上一步的文件中。
4.  正确设置权限（重要！！！）：
    1.  运行`start .`以使用当前文件夹 ( `$env:USERPROFILE\.ssh`) 打开资源管理器；
    2.  右键`authorized_keys`，转到`Properties -> Security -> Advanced`
    3.  点击“禁用继承”；
    4.  出现提示时选择“将继承的权限转换为此对象的显式权限”；
    5.  （真的，真的很重要）删除文件上的所有权限，除了`SYSTEM`and*你自己*。文件上必须**正好有两个**权限条目。一些指南建议运行`Repair-AuthorizedKeyPermission $env:USERPROFILE\.ssh\authorized_keys`- 这将尝试将`sshd`用户添加到权限列表中，它*会*破坏身份验证，因此，不要这样做，或者至少不同意添加`sshd`用户）。您和您自己都`SYSTEM`应该完全控制该文件。
5.  `C:\ProgramData\ssh\sshd_config`如果您的 Windows 版本是 1809 或更高版本，则需要在文件中注释掉以下行。然后重启`sshd`服务。

    ```
    # Match Group administrators                                                    
    #       AuthorizedKeysFile __PROGRAMDATA__/ssh/administrators_authorized_keys 
    ```

客户：

1.  运行`ssh <serverusername>@<serverhostname>`。它应该在这一点上工作。

尝试将 Windows 10 作为服务器，并将其本身和 Debian Linux 作为客户端。

* * *

## 回答 #2

> 赞同：19
> 
> 时间：2020-11-17T02:12:32.583

在 PowerShell 中使用此命令序列来更正`administrators_authorized_keys`

```
$acl = Get-Acl C:\ProgramData\ssh\administrators_authorized_keys
$acl.SetAccessRuleProtection($true, $false)
$administratorsRule = New-Object system.security.accesscontrol.filesystemaccessrule("Administrators","FullControl","Allow")
$systemRule = New-Object system.security.accesscontrol.filesystemaccessrule("SYSTEM","FullControl","Allow")
$acl.SetAccessRule($administratorsRule)
$acl.SetAccessRule($systemRule)
$acl | Set-Acl 
```

只有 SYSTEM 和 Administrators 组必须对文件具有权限而不继承。

[![administrators_authorized_keys 权限集](https://i.stack.imgur.com/7PwFP.png)](https://i.stack.imgur.com/7PwFP.png)

* * *

## 回答 #3

> 赞同：9
> 
> 时间：2020-07-11T06:35:35.300

如果您遇到困难，另一个提示是在调试模式下运行 sshd。我这样做了：

1.  停止*sshd*服务
2.  使用管理员权限打开 PowerShell 控制台
3.  输入“sshd -d”
4.  从我的客户端机器输入*登录*

事实证明，密钥需要在例如*C:\ProgramData\ssh\administrators_authorized_keys*而不是*C:\Users\yourUsers.ssh\authorized_keys*中。

* * *

## 回答 #4

> 赞同：7
> 
> 时间：2013-04-25T11:30:21.693

我已经解决了这个问题...

它与启动服务的帐户有关 - 它正在使用*本地系统*帐户 - 这正在阻止它访问公钥和 authorized_keys 文件。

一旦我停止服务并以我试图连接的用户身份启动，它就起作用了！

所以基本上，您需要从服务帐户开始，然后外部用户以该用户身份连接。

* * *

## 回答 #5

> 赞同：4
> 
> 时间：2020-10-31T22:26:26.250

这只是我的[@n0rds 好答案](https://stackoverflow.com/a/50502015/5079799)的脚本版本。

将此脚本放在带有您的私钥/公钥/对的目录中并运行！

```
PowerShell.exe -ExecutionPolicy Bypass -File "C:\bypass\prompt\standard.ps1" 2>&1>$null

Add-WindowsCapability -Online -Name OpenSSH.Server
New-NetFirewallRule -Name sshd -DisplayName 'OpenSSH SSH Server' -Enabled True -Direction Inbound -Protocol TCP -Action Allow -LocalPort 22 -Program "%WINDIR%\System32\OpenSSH\sshd.exe"

#Must Enable ssh-agent before starting
Set-Service -Name ssh-agent -StartupType Automatic
Set-Service -Name sshd -StartupType Automatic
Start-Service ssh-agent; Start-Service sshd

$sshdir="$env:USERPROFILE\.ssh"
mkdir $sshdir
copy .\id_rsa $sshdir\
cat  $sshdir\id_rsa
copy .\*.pub  $sshdir\authorized_keys
cat $sshdir\authorized_keys
ssh-add $sshdir\id_rsa

$sshd_config="C:\ProgramData\ssh\sshd_config" 
(Get-Content $sshd_config) -replace '#PubkeyAuthentication', 'PubkeyAuthentication' | Out-File -encoding ASCII $sshd_config
(Get-Content $sshd_config) -replace 'AuthorizedKeysFile __PROGRAMDATA__', '#AuthorizedKeysFile __PROGRAMDATA__' | Out-File -encoding ASCII $sshd_config
(Get-Content $sshd_config) -replace 'Match Group administrators', '#Match Group administrators' | Out-File -encoding ASCII $sshd_config
cat C:\ProgramData\ssh\sshd_config

Restart-Service ssh-agent; Restart-Service sshd

Write-Host "Use this to Login/test Now"
write-host ssh $env:UserName@localhost 
```

* * *

## 回答 #6

> 赞同：3
> 
> 时间：2014-11-04T17:25:26.017

如果您使用的是 mls-software.com 的 OpenSSH 版本，这里还有一个注意事项。

如果您使用 SSHD_SERVER 帐户和权限分离进行安装，您将能够使用公钥身份验证（根据[http://www.mls-software.com/opensshd-pki.html](http://www.mls-software.com/opensshd-pki.html)）。但是，如果启用 UAC，您将无法成功安装。将无法正确创建用户，也不会创建服务。事后手动尝试获取这些项目非常困难。在安装前简单地禁用 UAC 将允许安装过程正确创建用户和服务。安装后，您可以重新启用 UAC。

当我手动创建 SSHD_SERVER 帐户时，使用密码身份验证时身份验证成功，但客户端使用“/bin/bash: Operation not allowed”终止连接。服务器关闭了使用公钥的身份验证（Cambolie 发布的原始错误）。

* * *

## 回答 #7

> 赞同：1
> 
> 时间：2015-06-12T13:34:46.570

我通过以下方式解决了它：

1.  以 SSHD_SERVER + 权限分离模式安装。我还在配置中手动将权限分离设置为“是”。这对我来说很长时间没有用，用户没有被创建。然后它起作用了，我不知道为什么。我只去了控制面板中的用户帐户来检查 UAC 是否关闭。我也有 /var/empty 对每个人都具有完全访问权限。
2.  对于 C:\openssh\var\empty，我已将“属性获取/设置”权限设置为所有人和我自己，并将“完全”权限设置为 .\sshd_server。我也做了它的主人。

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2021-11-05T23:21:10.907

n0rd 的解决方案很划算，但对于同样属于管理员组的用户来说，还有一个额外的复杂性。如果您正在为涉及以下情况的情况寻找解决方案：

*   您想在每个用户的基础上使用公钥（或者您不想使用该`administrators_authorized_keys`文件）。
*   而且您**不想**使用 PasswordAuthentication。
*   并且一些用户也属于 admin 组。

我遇到的问题是，当我尝试 n0rd 的解决方案时，它在上述条件下对用户不起作用。经过一番修修补补，我找到了一个对我始终有效的解决方案。按照 n0rd 的解决方案，只需更改以下内容

在`ssh_config`确保设置以下设置：

```
AuthorizedKeysFile  .ssh/authorized_keys 
PasswordAuthentication no
PubkeyAuthentication yes 
```

另外，请务必注释掉 Match Group Administrators 设置：

```
#Match Group administrators
#       AuthorizedKeysFile __PROGRAMDATA__/ssh/administrators_authorized_keys 
```

`C:\Users\username\.ssh\authorized_keys`确保在服务器文件中包含客户端的公钥。

最后，为了帮助将用户与帐户匹配，我发现更具体地使用客户端上的用户数据很有帮助。我没有使用普通用户名，而是使用了用户名以及服务器上用户的域。就我而言，我的客户`C:\Users\UserName\.ssh\config`文件如下所示：

```
Host my_short_name
  HostName my.serveraddress.net
  User serversname\username
  IdentityFile .ssh\id_rsa 
```

在这种情况下，我的 Windows 10 服务器将被称为 serversname（在设备名称下）。通过以这种方式指定用户，我可以避免密码验证。

作为额外的奖励，这与 PowerShell 7 的默认 shell 配合得非常好。甚至我的默认 PowerShell 配置文件也可以通过 ssh 运行，并且我完全支持 posh-git 和 oh-my-posh。但是，我发现建议将 PowerShell 设置为默认 shell 环境的默认方法（通过编辑`ssh_conf`以包含 'Subsystem powershell c:/progra~1/powershell/7/pwsh.exe -sshs -NoLogo'）**不适**用于我。相反，在服务器上使用提升的 PowerShell 窗口中的命令：

```
New-ItemProperty -Path "HKLM:\SOFTWARE\OpenSSH" -Name DefaultShell -Value "c:/progra~1/powershell/7/pwsh.exe" -PropertyType String -Force 
```

这只是创建一个注册表项。如果需要，您可以随时弹出注册表以稍后将其删除。

* * *

## 回答 #9

> 赞同：0
> 
> 时间：2021-10-14T14:12:40.943

我遇到了不同的情况。

首先，按照gWay所说的进行调试，另一个终端窗口连接到服务器。

我有`read_keyfile_line: C:\\Users\\yieatn\\.ssh/authorized_keys line 1 exceeds size limit`

将 authorized_keys 重新编码为 utf-8

原因是我创建了authorized_keys，`cat id_rsa >> authorized_keys`而powershell中文使用UTF-16创建文件。

* * *

## 回答 #10

> 赞同：0
> 
> 时间：2020-04-17T18:42:49.953

我已经在多台 Windows Pro 1809 和 2004 计算机上彻底测试[了 n0rd 的解决方案。](https://stackoverflow.com/questions/16212816/setting-up-openssh-for-windows-using-public-key-authentication/50502015#50502015)我同意他的大部分步骤。

> 服务器设置（提升的 PowerShell）：同意所有。
> 
> 客户端设置（非提升的 PowerShell）：同意所有。
> 
> 服务器设置继续（非提升的 PowerShell）：步骤 1、2、3：同意
> 
> 服务器设置继续（非提升的 PowerShell）： 第 4 步：不要在第 4 步中执行任何操作。
> 
> 服务器设置继续（非提升的 PowerShell）：步骤 5：同意
> 
> 服务器设置继续（非提升的 PowerShell）：第 6 步：（添加）从 C:\ProgramData\ssh\sshd_config 取消注释（删除 #）：#PasswordAuthentication 是
> 
> 服务器设置继续（非提升的 PowerShell）： 步骤 7：（添加）在服务中，重新启动 OpenSSH SSH 服务器。

对于任何文件，我没有发现任何关于安全、权限或 Unicode 的问题。他们都是正确的。

* * *

## 回答 #11

> 赞同：-1
> 
> 时间：2021-02-02T11:22:48.520

这是 Microsoft 使用的非常以英语为中心的默认设置。组匹配行当前检查称为“管理员”的管理员组的英语语言版本字符串，这在许多其他语言安装的 Windows 上失败。在德语安装中，该行需要改为“administratoren”。他们最好让 le 按 SID 匹配 group 成为可能。（这在 DenyGroups 匹配功能中更为重要 - 尚未对此进行测试 - 但如果他们在那里检查字符串而不是 SID，那么拒绝是没有意义的，并且很容易通过使用不同的 Windows 语言安装来规避）

（另见[https://github.com/MicrosoftDocs/windowsserverdocs/issues/1911#issuecomment-771552030](https://github.com/MicrosoftDocs/windowsserverdocs/issues/1911#issuecomment-771552030)）

# asp.net - eBay API 上传 TrackingId by 已售列表 | 销售记录

> ID：16212819
> 
> 赞同：1
> 
> 时间：2013-04-25T10:51:47.393
> 
> 标签：asp.net, ebay-api

对于通过 API 将跟踪号上传到 eBay，我使用[CompleteSale](http://developer.ebay.com/DevZone/XML/docs/Reference/eBay/CompleteSale.html)函数，我在其中传递`OrderId`or `TransactionId`，但有时我既没有`TransactionId`也没有`OrderId`，我只有`Sold listing | Sales record`

看起来像：

```
Sold listing | Sales record 123456 
```

如何上传运单号使用`Sold listing | Sales record`值？我应该先得到`TransactionId`or`OrderId`吗？

感谢任何帮助。谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-05-03T15:44:09.423

在这种情况下，您需要调用[GetSellingManagerSoldListings](http://developer.ebay.com/DevZone/XML/docs/Reference/eBay/GetSellingManagerSoldListings.html)

然后获取 SaleRecord 数组，其中包含 Transactions 数组。每个事务项中都有 TransactionID。

# jquery - 改变行高时jquery砌体损坏

> ID：16212821
> 
> 赞同：0
> 
> 时间：2013-04-25T10:51:54.823
> 
> 标签：jquery, jquery-masonry

对于视力不佳的人，我有一些选择，其中之一是`line-height`从菜单中更改，但是，当`line-height`更改时，砖石块相互重叠。当我将窗口重新调整为非常小然后再次备份时，一切看起来都很好。重新加载页面没有帮助。我应该在哪里添加什么事件以使其工作？这`line-height`适用于所有元素，而不仅仅是砖石。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-25T11:30:40.827

选择新的行高后，您应该尝试重新加载砌体。

```
$(#your_masonry_container').masonry( 'reload' ); 
```

它在这个演示中使用 - [http://masonry.desandro.com/demos/adding-items.html](http://masonry.desandro.com/demos/adding-items.html)

# android - 从服务执行计划任务并使该服务保持活动状态

> ID：16212823
> 
> 赞同：0
> 
> 时间：2013-04-25T10:51:59.527
> 
> 标签：android, android-service, intentservice

```
public class MyHibernatedService extends Service{ 
     public void onCreate() {
        super.onCreate();
        //declaring the intents ..
        //some codes...

        AlarmManager am = (AlarmManager)getSystemService(ALARM_SERVICE);
        PendingIntent pendingIntent = PendingIntent.getService(this, 0, IntentServiceToBeRun, 0);
        Calendar calendar = Calendar.getInstance();
        calendar.add(Calendar.MILLISECOND, 10000);  
        am.setRepeating(AlarmManager.RTC_WAKEUP, calendar.getTimeInMillis(), AlarmManager.INTERVAL_DAY, pendingIntent);
        }
} 
```

我希望我每天在特定时间`Service`启动一个。`IntentService`但是，我在互联网上的某个地方、StackOverflow、谷歌等上读到过，a`Service`不能永远活着，这就是 Android 的工作方式。`Service`每当Android需要内存或使用太多内存时，它都必须杀死它。什么能保证我的代码每天都会运行并且我`Service`不会被杀死？

编辑 ：

我在 Android 文档中注意到：

**只要服务已启动或绑定了客户端，Android 系统就会尝试保留托管服务的进程**

“绑定到它的客户”实际上是什么意思？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-25T11:23:08.523

不要使用您自己的服务来定期启动另一个服务，而是使用该`AlarmManager`服务（就像您已经在做的那样）。恕我直言，不需要第二项服务。

这`AlarmManager`是一个系统服务，永远不会被Android杀死，它已经完成了你自己的服务会做的事情：定期启动（或在指定时间单次启动）。

关于“绑定到它的客户端”：题外话，但这意味着其他组件（如其他服务或活动）使用对`Context.bindService()`. 有关详细信息，请查看[开发指南](http://developer.android.com/guide/components/bound-services.html)。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-25T17:10:46.877

您实际上并不需要让您的服务保持活力。在这里，您正在设置`AlarmManager`，即使手机处于睡眠状态，也可以在时间到时唤醒您的 IntentService。这项服务可以完成工作，而不是您的。

> 什么能保证我的代码每天都会运行并且我的服务不会被杀死？

您提供的代码`MyHibernatedService`只需执行一次即可设置警报，然后您将不再需要它。如果它是唯一可以做的事情`MyHibernatedService`，那么你根本不需要它。

例如，您可以在您的意图服务中创建一个静态方法来设置警报，并根据您的需要从任何地方调用它（可能是您曾经开始的地方`MyHibernatedService`）。

此外，如果您真的不需要在您的意图服务启动时间上获得令人难以置信的准确性，请更喜欢`setInexactRepeating()`而不是`setRepeating()`.

# java - 开始下一个 moveTo 动作时的小滞后

> ID：16212825
> 
> 赞同：0
> 
> 时间：2013-04-25T10:52:07.530
> 
> 标签：java, android, animation, libgdx

[更新] 我稍微改变了顺序，所以我`super.act(delta)`在方法的最后调用了，这似乎有点帮助！但还不确定。

我的地图有一个正方形系统。所以它是一个 2D 数组，并且 ii 移动一次，图形确实从一个正方形移动到下一个正方形。虽然不可能在 2 个方格之间“停止”这个数字。

当我的角色移动时，我检查是否触摸了触摸板，如果是，我开始下一步。虽然它有时似乎滞后，我不知道为什么！？我真的希望你能找到“滞后”。`act()`以下是我如何计算`Actor`角色内部的下一步行动：

```
@Override
public void act(float delta) {
    super.act(delta); // so the actions work
    if (moveDone) {
        if (screen.gameHud.pad.isTouched()) {
            // check in which direction is the touchcontroller
            if (screen.gameHud.pad.getKnobPercentX() < 0
                    && Math.abs(screen.gameHud.pad.getKnobPercentY()) < Math
                            .abs(screen.gameHud.pad.getKnobPercentX())) {
                // checkt if the |x|>|y|
                if (checkNextMove(Status.LEFT)) {
                    this.status = Status.LEFT;
                    move(Status.LEFT);
                    this.screen.map.mapArray[(int) (this.mapPos.x)][(int) this.mapPos.y] = Config.EMPTYPOSITION;
                    this.screen.map.mapArray[(int) (this.mapPos.x - 1)][(int) this.mapPos.y] = Config.CHARSTATE;
                    this.mapPos.x--;
                    moveDone = false;
                }
            } else if //.... rest is the same just with other directions
else{ //if touchpad isnt touched!
    setIdle();
}
updateSprite(delta); //just change the textureRegion if its time for that
} //methode end 
```

好的，我相信您需要更多信息。像这样的检查动作：

```
case LEFT:
        if (this.mapPos.x - 1 >= 0)
            if (this.screen.map.mapArray[(int) (this.mapPos.x - 1)][(int) this.mapPos.y] == Config.EMPTYPOSITION)
                return true;
        break; //same for all other just direction changin 
```

最后你需要知道的是`move(_)`我猜。它确实为我的人物添加了一个 moveTo Action。

```
public void move(Status direction) {
    switch (direction) {
    case LEFT:
        this.addAction(Actions.sequence(
                Actions.moveTo((getX() - Config.BLOCK_SIZE), getY(), speed),
                moveDoneAction));
        break; 
```

moveDoneAction 很简单，如果完成移动，则将其`RunnableAction`设置为 true。 我真的希望你能帮忙。如果您需要更多信息，请在评论中告诉我！`boolean moveDone`

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-25T15:31:34.873

有比 StackOverflow 更好的工具来优化 Android 代码。使用分析器，看看实际发生了什么。具体来说，traceview profiler: [how to use traceview in eclipse for android development？](https://stackoverflow.com/questions/4850974/how-to-use-traceview-in-eclipse-for-android-development) （如果您不使用 Eclipse，您可以通过 ADT 直接使用 traceview。）

# c++ - 递归模板模式；什么时候确定类型？

> ID：16212828
> 
> 赞同：1
> 
> 时间：2013-04-25T10:52:24.173
> 
> 标签：c++, templates

链接到我的另一个问题（[我可以在返回子类类型的基类上创建一个赋值运算符](https://stackoverflow.com/questions/16210582/can-i-make-an-assignment-operator-on-a-base-class-that-returns-sub-class-type)）我有这个构造，我的想法是我想从中派生专门的类型，`GPtrBase`而不必每次都重新编写一个赋值运算符：

```
template<class BaseType,class Self>
class GPtrBase
{
public:
    ...

    Self& operator=(const BaseType& rhs)
    {
        ...
        return *this;
    }

}; 
```

但是，当我专门喜欢：

`class GDrawablePtr : public GPtrBase<MyDrawable,GDrawablePtr>`

我收到错误：

> > 'return' : 无法从 'GPtrBase<Base,Self>' 转换为 'GDrawablePtr &'

我认为模板类是根据所使用的专业化生成的，所以首先不`*this`应该是类型`GDrawablePtr`吗？

**更新：**我注意到如果我添加`using GPtrBase::operator=;`它然后工作，即使`GDrawablePtr`绝对*没有*定义任何运算符。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-25T11:43:43.137

与动态多态性`this`相比，函数中的指针`virtual`自动从基类向下转换为派生类，您需要对`static_cast`派生类使用显式

```
template<class BaseType,class Self>
class GPtrBase
{
public:
    ...

    Self& operator=(const BaseType& rhs)
    {
        ...
        return static_cast<Self&>(*this);
    }

}; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-25T17:51:19.593

> 我认为模板类是根据使用的专业化生成的，所以 *this 首先不应该是 GDrawablePtr 类型吗？

看起来你在模板实例化中投入的比实际更多。类模板就是这样：一个模板，当给定它的参数时会生成一个类。它不会以任何其他方式将模板参数绑定到结果类。

特别是，您在实例化点从实例化类继承这一事实不会改变类定义中的任何内容。它仍然是具有自己（尽管有些复杂）类型的独立类，因此它与没有模板机制定义的任何其他基类没有什么不同。例如，无论基类或子类是如何创建的，都没有从指向基类的指针到指向其任何子类的指针的隐式转换。

# ruby-on-rails - rails 2.3中的“哦”方法是什么？

> ID：16212829
> 
> 赞同：-3
> 
> 时间：2013-04-25T10:52:27.043
> 
> 标签：ruby-on-rails, ruby

下面的代码来自评论控制器。第 3 行中的“哦”在做什么？

```
@offer = Offer.find(params[:offer_id])
@offer_comment = @offer.offer_comments.build(params[:offer_comment])
@offer_comment.commenter oh = current_user
@offer_comment.save!
Notify::offer_comment_create(@offer_comment)
@offer.update_attribute(:read, false) if @offer.read? and current_user == @offer.offerer 
```

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-04-25T10:58:41.530

Ruby 会将该行视为：

```
@offer_comment.commenter(oh = current_user) 
```

所以它将分配`current_user`给`oh`并作为它的参数`commenter`接收。`current_user`

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-25T10:57:14.243

它正在创建一个名为的新局部变量`oh`并将结果分配`current_user`给它。但是，该变量从未在其他任何地方使用过，因此它基本上是无操作的。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-25T13:05:46.767

Ruby 允许方法不带括号，但我个人正是因为这种情况才使用它们。虽然 Ruby 通常可以根据其优先规则的顺序对其进行排序和理解，但它仍然可能是一个维护和支持问题。

我们人类更难阅读，特别是如果我们一直跳进跳出不同的语言，并且这些语言对方法参数使用不同的规则。对这个问题的不同答案证明了这一点，因为该陈述的含义难以辨别。（其中一个答案已被删除，但我们这些排名足够高的人仍然可以看到它。）

我已经编程了很长时间，尽管 Ruby 风格指南有不同的说法，但我几乎一直使用括号，并且在我们的团队中坚持使用它。在调试时，这些括号可能是快速找到错误或花费数小时找到它的区别。

# xml - 将多个xml节点提取到数组中而不循环

> ID：16212830
> 
> 赞同：2
> 
> 时间：2013-04-25T10:52:31.173
> 
> 标签：xml, excel, xmldom, vba

我有一个看起来像这样的 xml 文档：

```
<rng>
  <col1>
    <row1>A</row1>
    <row2>B</row2>
    <row3>C</row3>
    <row4>D</row4>
  </col1>
  <col2>
    <row1>E</row1>
    <row2>F</row2>
    <row3>G</row3>
    <row4>H</row4>
  </col2>
</rng> 
```

col节点*更多*，每个节点包含数千行元素。

我想从行元素中解析出值并最终将它们放到电子表格中。我目前这样做如下：

```
' get a list of the col elements (thi sits in a loop to go through them all)
Set oXMLColNodeList = oXMLDoc.selectNodes("//saveStates/rng/*")

' Lop through each column
For colNum = 1 To oXMLColNodeList.Length
    ' get all the row nodes for that coulmn
    Set oXMLRowNodeList = oXMLDoc.selectNodes("//saveStates/rng"/col" & colNum & "/*")

    ' loop through all the row nodes
    For rowNum = 1 To oXMLRowNodeList.Length
       ' get the node to do something with it 
       Set oXMLNode = oXMLDoc.selectSingleNode("//saveStates/rng/col" & colNum & "/row" & rowNum)

    next rowNum
next colNum 
```

即，我循环遍历 col 节点，然后遍历每个行节点以获取值 A、B、C、D 等。当行元素的数量接近数万时，它的速度非常缓慢。

我在解析 XML 文档方面没有太多经验，我正在寻找一种方法来同时从“行*”节点中提取所有值，而不必遍历它们。这可能吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-25T11:22:49.647

也许您可以使用**ADO DB Recordset**在 Recordset中打开 xml DOM 文档，然后在添加过滤器后使用**Range.CopyFromRecordset**方法将数据转储到 Excel 中以仅获取所需的记录？

这是来自 MSDN 的一些示例代码[：How to get a Recordset from XML](http://support.microsoft.com/kb/263247)

```
Public Function RecordsetFromXMLDocument(XMLDOMDocument As DOMDocument) As Recordset
Dim oRecordset As ADODB.Recordset
dim destRange as range

set destrange=range("B2")

Set oRecordset = New ADODB.Recordset

oRecordset.Open XMLDOMDocument 'pass the DOM Document instance as the Source argument

Set RecordsetFromXMLDocument = oRecordset  'return the recordset

destRange.CopyFromRecordset oRecordset 

Set oRecordset = Nothing

End Function 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2017-07-21T18:21:16.923

@chrisSpaceman，在这里您可以找到使用 XMLDOM 的更短的方法。我添加了一些声明以展示一个完整的示例（我假设您知道如何操作数组，所以我把它放在旁边）。

```
Option Explicit
Sub ReadRows()

'Declarations
Dim oXMLDoc         As Object    ' XML document (object)
'Dim oXMLColNodeList As Object   ' you don't need this list any more ! 
Dim oXMLRowNodeList As Object    ' needed node list
Dim oXMLNode        As Object    ' single node within this list
Dim xPE             As Object    ' ParseError object
Dim strErrText      As String    ' Error message
Dim sFileName       As String    ' user defined file path
' =================================
' 0\. User defined File Name <==  !
' =================================
  sFileName = ThisWorkbook.Path & "\data\test.xml"
' =================================
' 1\. XML Declaration oXMLDoc
' =================================
' Set oXMLDoc = New MSXML2.DOMDocument60                   ' Early Binding
  Set oXMLDoc = CreateObject("Msxml2.DOMDocument.6.0")     ' Late  Binding

' XPath, Validation
  oXMLDoc.setProperty "SelectionLanguage", "XPath"
  oXMLDoc.validateOnParse = False
' =================================
' 2\. Load XML File
' =================================
  If oXMLDoc.Load(sFileName) Then
     MsgBox sFileName & " successfully loaded"
  Else
  ' Set ParseError Object
    Set xPE = oXMLDoc.parseError

    With xPE
      strErrText = "Load Error " & .ErrorCode & " XML File " & vbCrLf & _
        Replace(.URL, "file:///", "") & vbCrLf & vbCrLf & _
        xPE.reason & _
        "Source Text: " & .srcText & vbCrLf & vbCrLf & _
        "Line No:    " & .Line & vbCrLf & _
        "Line Pos:  " & .linepos & vbCrLf & _
        "File Pos:  " & .filepos & vbCrLf & vbCrLf
    End With
    MsgBox strErrText, vbExclamation
    Set xPE = Nothing
    Set oXMLDoc = Nothing
   'Stop procedure
    Exit Sub
  End If
' =================================
' 3 Set only one Nodelist
' =================================
  Set oXMLRowNodeList = oXMLDoc.DocumentElement.SelectNodes("rng/*/*")

' =================================
' 4\. loop through all (row) nodes
' =================================
  For Each oXMLNode In oXMLRowNodeList
     Debug.Print oXMLNode.Text
   ' read in ...
  Next oXMLNode

 ' 5\. terminate oXMLDoc
  Set oXMLDoc = Nothing
 End Sub 
```

**备注**此代码通过通配符仅将一个 NodeList 设置为 col 标记（因为 col 和 row 节点没有兄弟节点），从而避免了过多的循环。`DocumentElement`此外，如果这实际上代表您的根节点，我会参考而不是使用 //saveStates。

# sql-server - 批量插入不适用于 NULL 数据

> ID：16212834
> 
> 赞同：2
> 
> 时间：2013-04-25T10:52:37.273
> 
> 标签：sql-server, sql-server-2008, csv, bulkinsert

当我将批量数据从 CSV 文件插入表时，它不工作，显示错误谎言：

第 2 行第 9 列的批量加载数据转换错误（指定代码页的类型不匹配或无效字符）

csv 文件中的第 9 列值为空。

我该如何处理？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-25T12:08:31.973

从这些信息中，我会说目标表的特定字段被定义为“NOT NULL”。要解决此问题，您必须：

**a）**修改 csv--> 将值添加到它们具有 null 的字段

**b）**通过将受影响的字段设置为“可为空”来修改目标表：`ALTER TABLE [tblName] ALTER COLUMN [nulColName] [varType such as INT] NULL`
如果您选择此解决方案并想转后表的状态再次更改它：
`UPDATE [tblName] SET [nulColName]=-1000 WHERE [nulColName] IS NULL`以避免更改错误，然后`ALTER TABLE [tblName] ALTER COLUMN [nulColName] [varType such as INT] NOT NULL`

**c)**非常类似于 'b' 选项，但更专业和更快：基于目标表创建一个临时表，但允许任何和所有字段为空，然后更新 temp使用“默认值”导入 csv 后表的空记录并将数据复制到目标表

*如果我对这个问题是正确的并且存在'*

# serial-port - 使用 Boost Asio 从串行端口读取消息

> ID：16212835
> 
> 赞同：0
> 
> 时间：2013-04-25T10:52:38.440
> 
> 标签：serial-port, boost-asio

我想使用[Boost Asio](http://en.wikipedia.org/wiki/Asio_C++_library)从串口读取可变长度消息。我想阅读并等待足够长的时间以确保线路空闲，但我不想完全阻塞。

以下代码是我到目前为止所拥有的，我正在对其进行测试：

```
long readData(void *_pData, unsigned long _uSize, size_t millis)
{
    size_t n = 0;    // n will return the message size.
    if (millis > 0)  // millis is the acceptable idle time, 0 is invalid in my case.
    {
        size_t uBytesTransferred = 0;
        boost::asio::deadline_timer timeout(m_ioService);
        ReadCallback readCallback(uBytesTransferred, timeout);
        WaitCallback waitCallback(m_port);

        while (_uSize - (unsigned long)n > 0)
        {
            // Setup asynchronous read with timeout
            m_ioService.reset();
            m_port.async_read_some(boost::asio::buffer((char*)_pData + n, _uSize - (unsigned long)n), readCallback);
            timeout.expires_from_now(boost::posix_time::milliseconds(millis));
            timeout.async_wait(waitCallback);

            // Block until asynchronous callbacks are finished
            m_ioService.run();

            // Continue if any bytes were received, stop otherwise
            if (uBytesTransferred > 0)
            {
                n += uBytesTransferred;
                m_uBytesReceived += uBytesTransferred;
            }
            else
            {
                break;
            }
        }
    }
    return n;
} 
```

我想知道这是否是使用 Boost Asio 执行此操作的正确方法（即读取直到线路空闲）？

这是我的回调处理程序：

```
struct ReadCallback
{
    ReadCallback(std::size_t &_uBytesTransferred, boost::asio::deadline_timer &_timeout)
        :m_uBytesTransferred(_uBytesTransferred), m_timeout(_timeout)
    {}

    void operator()(const boost::system::error_code &_error, std::size_t _uBytesTransferred)
    {
        m_uBytesTransferred = _uBytesTransferred;
        if (!_error && (_uBytesTransferred > 0) )
        {
            m_timeout.cancel();
        }
    }

    std::size_t                        &m_uBytesTransferred;
    boost::asio::deadline_timer        &m_timeout;

    private:
        ReadCallback();
        ReadCallback &operator=(const ReadCallback&);
};

struct WaitCallback
{
    WaitCallback(boost::asio::serial_port &_port)
        :m_port(_port)
    {}

    void operator()(const boost::system::error_code &_error)
    {
        if (!_error)
        {
            m_port.cancel();
        }
    }

    boost::asio::serial_port &m_port;

    private:
        WaitCallback();
        WaitCallback &operator=(const WaitCallback&);
}; 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-25T16:51:02.807

当您说您“不想完全阻塞”时，这表明您最好创建一个单独的线程来处理套接字 I/O。这样您的主线程就可以用于其他处理。我在我的客户端中使用了 2 个线程。一个线程处理从服务器接收到的消息，另一个线程处理向服务器发送消息。我的客户与多台服务器通话。这是代码：

```
#include "StdAfx.h"
#include "SSLSocket.h"

boost::shared_ptr< boost::asio::io_service > SSLSocket::IOService;
bool SSLSocket::LobbySocketOpen = false;
SSLSocket* SSLSocket::pSSLLobby = 0;
int SSLSocket::StaticInit = 0;
Callback SSLSocket::CallbackFunction;
BufferManagement SSLSocket::BufMang;
volatile bool SSLSocket::ReqAlive = true;
Logger SSLSocket::Log;
HANDLE SSLSocket::hEvent;
bool SSLSocket::DisplayInHex;
ConcurrentMsgQueue SSLSocket::SendMsgQ;
bool SSLSocket::RcvThreadCreated = 0;
BufferManagement* Message::pBufMang;
bool SSLSocket::ShuttingDown = false;
std::vector<SSLSocket *> SocketList;

SSLSocket::SSLSocket(const bool logToFile, const bool logToConsole, const bool displayInHex,
   const LogLevel levelOfLog, const string& logFileName, const int bufMangLen) : pSocket(0)
{
   // SSLSocket Constructor.
   // If the static members have not been intialized yet, then initialize them.
   LockCode = new Lock();
   if (!StaticInit)
   {
      SocketList.push_back(this);
      DisplayInHex = displayInHex;
      BufMang.Init(bufMangLen);
      Message::SetBufMang(&BufMang);
      // This constructor enables logging according to the vars passed in.
      Log.Init(logToFile, logToConsole, levelOfLog, logFileName);
      StaticInit = 1;
      hEvent = CreateEvent(NULL, false, false, NULL);
      // Define the ASIO IO service object.
      // IOService = new boost::shared_ptr<boost::asio::io_service>(new boost::asio::io_service);
      boost::shared_ptr<boost::asio::io_service> IOServ(new boost::asio::io_service);
      IOService = IOServ;
      pSSLLobby = this;
   }
}

SSLSocket::~SSLSocket(void)
{
   if (pSocket)
      delete pSocket;
   if (--StaticInit == 0)
      CloseHandle(hEvent);
}

void SSLSocket::Connect(SSLSocket* psSLS, const string& serverPath, string& port)
{
   // Connects to the server.
   // serverPath - specifies the path to the server.  Can be either an ip address or url.
   // port - port server is listening on.
   //
   try
   {
      LockCode->Acquire(); // Single thread the code.
      // Locking CodeLock(SocketLock); // Single thread the code.
      // If the user has tried to connect before, then make sure everything is clean before trying to do so again.
      if (pSocket)
      {
         delete pSocket;
         pSocket = 0;
      }                                                                                                  
      // If serverPath is a URL, then resolve the address.
      if ((serverPath[0] < '0') || (serverPath[0] > '9')) // Assumes that the first char of the server path is not a number when resolving to an ip addr.
      {
         // Create the resolver and query objects to resolve the host name in serverPath to an ip address.
         boost::asio::ip::tcp::resolver resolver(*IOService);
         boost::asio::ip::tcp::resolver::query query(serverPath, port);
         boost::asio::ip::tcp::resolver::iterator EndpointIterator = resolver.resolve(query);
         // Set up an SSL context.
         boost::asio::ssl::context ctx(*IOService, boost::asio::ssl::context::tlsv1_client);
         // Specify to not verify the server certificiate right now.
         ctx.set_verify_mode(boost::asio::ssl::context::verify_none);
         // Init the socket object used to initially communicate with the server.
         pSocket = new boost::asio::ssl::stream<boost::asio::ip::tcp::socket>(*IOService, ctx);
         //
         // The thread we are on now, is most likely the user interface thread.  Create a thread to handle all incoming socket work messages.
         // Only one thread is created to handle the socket I/O reading and another thread is created to handle writing.
         if (!RcvThreadCreated)
         {
            WorkerThreads.create_thread(boost::bind(&SSLSocket::RcvWorkerThread, this));
            RcvThreadCreated = true;
            WorkerThreads.create_thread(boost::bind(&SSLSocket::SendWorkerThread, this));
         }
         // Try to connect to the server.  Note - add timeout logic at some point.
         boost::asio::async_connect(pSocket->lowest_layer(), EndpointIterator,
            boost::bind(&SSLSocket::HandleConnect, this, boost::asio::placeholders::error));
      }
      else
      {
         // serverPath is an ip address, so try to connect using that.
         //
         // Create an endpoint with the specified ip address.
         const boost::asio::ip::address IP(boost::asio::ip::address::from_string(serverPath));
         int iport = atoi(port.c_str());
         const boost::asio::ip::tcp::endpoint EP(IP, iport);
         // Set up an SSL context.
         boost::asio::ssl::context ctx(*IOService, boost::asio::ssl::context::tlsv1_client);
         // Specify to not verify the server certificiate right now.
         ctx.set_verify_mode(boost::asio::ssl::context::verify_none);
         // Init the socket object used to initially communicate with the server.
         pSocket = new boost::asio::ssl::stream<boost::asio::ip::tcp::socket>(*IOService, ctx);
         //
         // Try to connect to the server.  Note - add timeout logic at some point.
         //pSocket->core_.engine_.do_connect(void*, int);
         // pSocket->next_layer_.async_connect(EP, &SSLSocket::HandleConnect)
         // pSocket->next_layer().async_connect(EP, &SSLSocket::HandleConnect);
         boost::system::error_code EC;
         pSocket->next_layer().connect(EP, EC);
         if (EC)
         {
            // Log an error.  This worker thread should exit gracefully after this.
            stringstream ss;
            ss << "SSLSocket::Connect: connect failed to " << sClientIp << " : " << uiClientPort << ".  Error: " << EC.message() + ".\n";
            Log.LogString(ss.str(), LogError);
         }
         HandleConnect(EC);
         // boost::asio::async_connect(pSocket->lowest_layer(), EP,
         //   boost::bind(&SSLSocket::HandleConnect, this, boost::asio::placeholders::error));
      }
   }
   catch (std::exception& e)
   {
      stringstream ss;
      ss << "SSLSocket::Connect: threw an error - " << e.what() << ".\n";
      Log.LogString(ss.str(), LogError);
      Stop();
   }
   LockCode->Release();
}

void SSLSocket::SendToServer(const int bytesInMsg, Byte* pBuf)
{
   // This method creates a msg object and saves it in the SendMsgQ object.
   // sends the number of bytes specified by bytesInMsg in pBuf to the server.
   //
   Message* pMsg = Message::GetMsg(this, bytesInMsg, pBuf);
   SendMsgQ.Push(pMsg);
   // Signal the send worker thread to wake up and send the msg to the server.
   SetEvent(hEvent);
}

void SSLSocket::SendWorkerThread(SSLSocket* psSLS)
{
   // This thread method gets called to process the messages to be sent to the server.
   //
   // Since this has to be a static method, call a method on the class to handle server requests.
   psSLS->ProcessSendRequests();
}

void SSLSocket::ProcessSendRequests()
{
   // This method handles sending msgs to the server.
   //
   std::stringstream ss;
   DWORD WaitResult;
   Log.LogString("SSLSocket::ProcessSendRequests: Worker thread " + Logger::NumberToString(boost::this_thread::get_id()) + " started.\n", LogInfo);
   // Loop until the user quits, or an error of some sort is thrown.
   try
   {
      do
      {
         // If there are one or more msgs that need to be sent to a server, then send them out.
         if (SendMsgQ.Count() > 0)
         {
            Message* pMsg = SendMsgQ.Front();
            SSLSocket* pSSL = pMsg->pSSL;
            SendMsgQ.Pop();
            const Byte* pBuf = pMsg->pBuf;
            const int BytesInMsg = pMsg->BytesInMsg;
            boost::system::error_code Error;
            LockCode->Acquire(); // Single thread the code.
            // Locking CodeLock(SocketLock); // Single thread the code.
            try
            {
               boost::asio::async_write(*pSSL->pSocket, boost::asio::buffer(pBuf, BytesInMsg), boost::bind(&SSLSocket::HandleWrite, this,
                  boost::asio::placeholders::error, boost::asio::placeholders::bytes_transferred));
            }
            catch (std::exception& e)
            {
               stringstream ss;
               ss << "SSLSocket::ProcessSendRequests: threw an error - " << e.what() << ".\n";
               Log.LogString(ss.str(), LogError);
               // Stop();
            }
            ss.str(std::string());
            ss << "SSLSocket::ProcessSendRequests: # bytes sent = " << BytesInMsg << "\n";
            Log.LogString(ss.str(), LogDebug2);
            Log.LogBuf(pBuf, BytesInMsg, DisplayInHex, LogDebug3);
            LockCode->Release();
         }
         else
         {
            // Nothing to send, so go into a wait state.
            WaitResult = WaitForSingleObject(hEvent, INFINITE);
            if (WaitResult != 0L)
            {
               Log.LogString("SSLSocket::ProcessSendRequests: WaitForSingleObject event error.  Code = " + Logger::NumberToString(GetLastError()) + ". \n", LogError);
            }
         }
      } while (ReqAlive);
      Log.LogString("SSLSocket::ProcessSendRequests: Worker thread " + Logger::NumberToString(boost::this_thread::get_id()) + " done.\n", LogInfo);
   }
   catch (std::exception& e)
   {
      stringstream ss;
      ss << "SSLSocket::ProcessSendRequests: threw an error - " << e.what() << ".\n";
      Log.LogString(ss.str(), LogError);
      Stop();
   }
}

void SSLSocket::HandleWrite(const boost::system::error_code& error, size_t bytesTransferred)
{
   // This method is called after a msg has been written out to the socket.  Nothing to do really since reading is handled by the HandleRead method.
   //
   std::stringstream ss;
   try
   {
      if (error)
      {
         ss << "SSLSocket::HandleWrite: failed - " << error.message() << ".\n";
         Log.LogString(ss.str(), LogError);
         Stop();
      }
   }
   catch (std::exception& e)
   {
      stringstream ss;
      ss << "SSLSocket::HandleHandshake: threw an error - " << e.what() << ".\n";
      Log.LogString(ss.str(), LogError);
      Stop();
   }
}

void SSLSocket::RcvWorkerThread(SSLSocket* psSLS)
{
   // This is the method that gets called when the receive thread is created by this class.
   // This thread method focuses on processing messages received from the server.
   //
   // Since this has to be a static method, call a method on the class to handle server requests.
   psSLS->InitAsynchIO();
}

void SSLSocket::InitAsynchIO()
{
   // This method is responsible for initiating asynch i/o.
   boost::system::error_code Err;
   string s;
   stringstream ss;
   //
   try
   {
      ss << "SSLSocket::InitAsynchIO: Worker thread - " << Logger::NumberToString(boost::this_thread::get_id()) << " started.\n";
      Log.LogString(ss.str(), LogInfo);
      // Enable the handlers for asynch i/o.  The thread will hang here until the stop method has been called or an error occurs.
      // Add a work object so the thread will be dedicated to handling asynch i/o.
      boost::asio::io_service::work work(*IOService);
      IOService->run();
      Log.LogString("SSLSocket::InitAsynchIO: receive worker thread done.\n", LogInfo);
   }
   catch (std::exception& e)
   {
      stringstream ss;
      ss << "SSLSocket::InitAsynchIO: threw an error - " << e.what() << ".\n";
      Log.LogString(ss.str(), LogError);
      Stop();
   }
}

void SSLSocket::HandleConnect(const boost::system::error_code& error)
{
   // This method is called asynchronously when the server has responded to the connect request.
   std::stringstream ss;
   try
   {
      if (!error)
      {
         pSocket->async_handshake(boost::asio::ssl::stream_base::client,
            boost::bind(&SSLSocket::HandleHandshake, this, boost::asio::placeholders::error));
         ss << "SSLSocket::HandleConnect: From worker thread " << Logger::NumberToString(boost::this_thread::get_id()) << ".\n";
         Log.LogString(ss.str(), LogInfo);
      }
      else
      {
         // Log an error.  This worker thread should exit gracefully after this.
         ss << "SSLSocket::HandleConnect: connect failed to " << sClientIp << " : " << uiClientPort << ".  Error: " << error.message() + ".\n";
         Log.LogString(ss.str(), LogError);
         Stop();
      }
   }
   catch (std::exception& e)
   {
      stringstream ss;
      ss << "SSLSocket::InitAsynchIO: threw an error - " << e.what() << ".\n";
      Log.LogString(ss.str(), LogError);
      Stop();
   }
}

void SSLSocket::HandleHandshake(const boost::system::error_code& error)
{
   // This method is called asynchronously when the server has responded to the handshake request.
   std::stringstream ss;
   try
   {
      if (!error)
      {
         // Try to send the first message that the server is expecting.  This msg tells the server we want to connect.
         // The first 4 bytes specifies the msg length after the first 4 bytes.  The next 2 bytes specifies the msg type.
         // The next 4 bytes specifies the source code.  The next 13 bytes specifies the msg "AttackPoker".
         // The next 2 bytes specifies the locale length.  The last 2 bytes specifies the locale - en for English.
         //
         unsigned char Msg[27] = {0x17, 0x00, 0x00, 0x00, 0x06, 0x00, 0x01, 0x00, 0x00, 0x00, 0x0b, 0x00, 0x41,
            0x74, 0x74, 0x61, 0x63, 0x6b, 0x50, 0x6f, 0x6b, 0x65, 0x72, 0x02, 0x00, 0x65, 0x6e};
         boost::system::error_code Err;
         //
         if (pSSLLobby == this)
            LobbySocketOpen = true;
         sClientIp = pSocket->lowest_layer().remote_endpoint().address().to_string();
         uiClientPort = pSocket->lowest_layer().remote_endpoint().port();
         ReqAlive = true;
         // boost::asio::async_write(*pSocket, boost::asio::buffer(Msg), boost::bind(&SSLSocket::HandleFirstWrite, this,
         //   boost::asio::placeholders::error, boost::asio::placeholders::bytes_transferred));
         int Count = boost::asio::write(*pSocket, boost::asio::buffer(Msg), boost::asio::transfer_exactly(27), Err);
         if (Err)
         {
            ss << "SSLSocket::HandleHandshake: write failed - " << error.message() << ".\n";
            Log.LogString(ss.str(), LogInfo);
         }
         HandleFirstWrite(Err, Count);
         // boost::asio::async_write(pSocket, boost::asio::buffer(Msg, 27), boost::bind(&SSLSocket::HandleWrite, this,
         // boost::asio::placeholders::error, boost::asio::placeholders::bytes_transferred));
         ss.str("");
         ss << "SSLSocket::HandleHandshake: From worker thread " << boost::this_thread::get_id() << ".\n";
      }
      else
      {
         ss << "SSLSocket::HandleHandshake: failed - " << error.message() << ".\n";
         IOService->stop();
      }
      Log.LogString(ss.str(), LogInfo);
   }
   catch (std::exception& e)
   {
      stringstream ss;
      ss << "SSLSocket::HandleHandshake: threw an error - " << e.what() << ".\n";
      Log.LogString(ss.str(), LogError);
      Stop();
   }
}

void SSLSocket::HandleFirstWrite(const boost::system::error_code& error, size_t bytesTransferred)
{
   // This method is called after a msg has been written out to the socket.
   std::stringstream ss;
   try
   {
      if (!error)
      {
         // boost::asio::async_read(pSocket, boost::asio::buffer(reply_, bytesTransferred), boost::bind(&SSLSocket::handle_read,
         //   this, boost::asio::placeholders::error, boost::asio::placeholders::bytes_transferred));
         // boost::asio::async_read(pSocket, boost::asio::buffer(reply_, 84), boost::bind(&SSLSocket::handle_read,
         //   this, boost::asio::placeholders::error, boost::asio::placeholders::bytes_transferred));
         // Locking CodeLock(ReadLock); // Single thread the code.
         // Signal the other threads that msgs are now ready to be sent and received.
         // boost::asio::async_read(pSocket, boost::asio::buffer(pRepBuf), boost::asio::transfer_exactly(4), boost::bind(&SSLSocket::HandleRead,
         //  this, boost::asio::placeholders::error, boost::asio::placeholders::bytes_transferred));
         //
         // Notify the UI that we are now connected.  Create a 6 byte msg for this.
         pDataBuf = BufMang.GetPtr(6);
         BYTE* p = pDataBuf;
         // Create msg type 500
         *p = 244;
         *++p = 1;
         CallbackFunction(this, 2, (void*)pDataBuf);
         // Get the 1st 4 bytes of the next msg, which is always the length of the that msg.
         pDataBuf = BufMang.GetPtr(MsgLenBytes);

         // int i1=1,i2=2,i3=3,i4=4,i5=5,i6=6,i7=7,i8=8,i9=9;
         //   (boost::bind(&nine_arguments,_9,_2,_1,_6,_3,_8,_4,_5,_7))
         //     (i1,i2,i3,i4,i5,i6,i7,i8,i9);

         // boost::asio::read(*pSocket, boost::asio::buffer(pReqBuf, MsgLenBytes), boost::asio::transfer_exactly(MsgLenBytes), Err);
         // boost::asio::async_read(pSocket, boost::asio::buffer(pReqBuf, MsgLenBytes), boost::bind(&SSLSocket::HandleRead, _1,_2,_3))
         //   (this, pReqBuf, boost::asio::placeholders::error, boost::asio::placeholders::bytes_transferred);
         //   boost::asio::async_read(*pSocket, boost::asio::buffer(reply_), boost::asio::transfer_exactly(ByteCount), boost::bind(&Client::handle_read,
         //      this, boost::asio::placeholders::error, boost::asio::placeholders::bytes_transferred));
         // boost::asio::async_write(*pSocket, boost::asio::buffer(pDataBuf, MsgLenBytes), boost::bind(&SSLSocket::HandleWrite, this,
         //    boost::asio::placeholders::error, boost::asio::placeholders::bytes_transferred));
         try
         {
            LockCode->Acquire(); // Single thread the code.
            // Locking CodeLock(SocketLock); // Single thread the code.
            boost::asio::async_read(*pSocket, boost::asio::buffer(pDataBuf, MsgLenBytes), boost::bind(&SSLSocket::HandleRead, this,
               boost::asio::placeholders::error, boost::asio::placeholders::bytes_transferred));
         }
         catch (std::exception& e)
         {
            stringstream ss;
            ss << "SSLSocket::HandleFirstWrite: threw an error - " << e.what() << ".\n";
            Log.LogString(ss.str(), LogError);
            Stop();
         }
         LockCode->Release();
      }
      else
      {
         ss << "SSLSocket::HandleFirstWrite: failed - " << error.message() << ".\n";
         Log.LogString(ss.str(), LogError);
         Stop();
      }
   }
   catch (std::exception& e)
   {
      stringstream ss;
      ss << "SSLSocket::HandleFirstWrite: threw an error - " << e.what() << ".\n";
      Log.LogString(ss.str(), LogError);
      Stop();
   }
}

void SSLSocket::HandleRead(const boost::system::error_code& error, size_t bytesTransferred)
{
   // This method is called to process an incomming message.
   //
   std::stringstream ss;
   int ByteCount;
   try
   {
      // ss << "SSLSocket::HandleRead: From worker thread " << boost::this_thread::get_id() << ".\n";
      // Log.LogString(ss.str(), LogInfo);
      // Set to exit this thread if the user is done.
      if (!ReqAlive)
      {
         // IOService->stop();
         return;
      }
      if (!error)
      {
         // Get the number of bytes in the message.
         if (bytesTransferred == 4)
         {
            ByteCount = BytesToInt(pDataBuf);
         }
         else
         {
            // Call the C# callback method that will handle the message.
            ss << "SSLSocket::HandleRead: From worker thread " << boost::this_thread::get_id() << "; # bytes transferred = " << bytesTransferred << ".\n";
            Log.LogString(ss.str(), LogDebug2);
            if (bytesTransferred > 0)
            {
               Log.LogBuf(pDataBuf, (int)bytesTransferred, true, LogDebug3);
               Log.LogString("SSLSocket::HandleRead: sending msg to the C# client.\n\n", LogDebug2);
               CallbackFunction(this, bytesTransferred, (void*)pDataBuf);
            }
            else
            {
               // # of bytes transferred = 0\.  Don't do anything.
               bytesTransferred = 0; // For debugging.
            }
            // Prepare to read in the next message length.
            ByteCount = MsgLenBytes;
         }
         pDataBuf = BufMang.GetPtr(ByteCount);
         boost::system::error_code Err;
         // boost::asio::async_read(pSocket, boost::asio::buffer(pDataBuf, ByteCount), boost::bind(&SSLSocket::HandleRead,
           //  this, boost::asio::placeholders::error, boost::asio::placeholders::bytes_transferred));
         LockCode->Acquire(); // Single thread the code.
         // Locking CodeLock(SocketLock); // Single thread the code.
         try
         {
            boost::asio::async_read(*pSocket, boost::asio::buffer(pDataBuf, ByteCount), boost::bind(&SSLSocket::HandleRead,
               this, boost::asio::placeholders::error, boost::asio::placeholders::bytes_transferred));
            // boost::asio::read(pSocket, boost::asio::buffer(reply_), boost::asio::transfer_exactly(ByteCount), Err);
         }
         catch (std::exception& e)
         {
            stringstream ss;
            ss << "SSLSocket::HandleRead: threw this error - " << e.what() << ".\n";
            Log.LogString(ss.str(), LogError);
            // Stop();
         }
         LockCode->Release();
      }
      else
      {
         Log.LogString("SSLSocket::HandleRead failed: " + error.message() + "\n", LogError);
         Stop();
      }
   }
   catch (std::exception& e)
   {
      stringstream ss;
      ss << "SSLSocket::HandleRead: threw an error - " << e.what() << ".\n";
      Log.LogString(ss.str(), LogError);
      Stop();
   }
}

void SSLSocket::Stop()
{
   // This method calls the shutdown method on the socket in order to stop reads or writes that might be going on.  If this is not done, then an exception will be thrown
   // when it comes time to delete this object.
   //
   boost::system::error_code EC;
   try
   {
      // This method can be called from the handler as well.  So once the ShuttingDown flag is set, don't go throught the same code again.
      if (ShuttingDown)
         return;
      LockCode->Acquire(); // Single thread the code.
      if (!ShuttingDown)
      {
         ShuttingDown = true;
         pSocket->next_layer().cancel();
         pSocket->shutdown(EC);
         if (EC)
         {
            stringstream ss;
            ss << "SSLSocket::Stop: socket shutdown error - " << EC.message() << ".\n";
            // Log.LogString(ss.str(), LogError); // Usually get this - probably not an error.
         }
         else
         {
            pSocket->next_layer().close();
         }
         delete pSocket;
         pSocket = 0;
         ReqAlive = false;
         SetEvent(hEvent);
         IOService->stop();
         LobbySocketOpen = false;
         WorkerThreads.join_all();
      }
      LockCode->Release();
      delete LockCode;
      LockCode = 0;
   }
   catch (std::exception& e)
   {
      stringstream ss;
      ss << "SSLSocket::HandleRead: threw an error - " << e.what() << ".\n";
      Log.LogString(ss.str(), LogError);
      Stop();
   }
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-05-30T17:44:33.987

现在使用 boost 线程从串口读取和缓冲数据。我现在可以将串行数据作为流读取，还可以进行窥视、非阻塞和阻塞读取。

我将串行 io 包装在一个 boost 线程中——只是无法使 asio 回调按我想要的方式工作。我现在正在缓冲线程中的读取数据，但仍然使用阻塞写入来保持尽可能低的延迟。

# sql-server - SQL中多条记录之间的日期差异

> ID：16212837
> 
> 赞同：0
> 
> 时间：2013-04-25T10:52:43.290
> 
> 标签：sql-server, sql-server-2008

我有一个场景，如果两个日期之间的日期差 <=14 天，我想得到一个计数。也就是说，在第一个表中，我必须过滤 DATE1 值的任何一个值是 <=DATE2 的 14 天的记录。

```
For Ex:
 q1="SELECT DATE1 FROM DATE1_TABLE";
 q2="SELECT DATE2 FROM DATE2_TABLE";

 My simple query :

 SELECT 
    COUNT(*) 
 FROM 
     DATE1_TABLE WHERE DATEDIFF(DD,DATE1,(SELECT DATE2 FROM DATE2_TABLE))<=14 
```

但是我在两个表中都有多条记录，但是我想选择任何有这种差异的记录，然后它会得到一个>0的计数。所以，它抛出错误子查询返回了多个记录。我想要一些解决方案。我我正在使用 SQL SERVER 2008

注意：我不能在这里使用 join。因为我想要来自两个不同查询的结果。提前致谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-25T11:04:29.160

您可以在查询中使用 TOP 1 子句。

```
SELECT TOP 1 *
    FROM DATE1_TABLE 
     WHERE DATEDIFF(DD,DATE1,(SELECT DATE2 FROM DATE2_TABLE))<=14 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-25T11:03:27.870

您不能使用 SELECT 它将返回多个值，其中函数需要标量值......但是您可以加入这些表：

```
SELECT 
  COUNT(DISTINCT dt1.*)
FROM DATE1_TABLE dt1 INNER JOIN DATE2_TABLE dt2 ON DATEDIFF(DD,DATE1,DATE2)<=14 
```

此查询将仅在 14 天内的值上连接表，并计算 DATE1_TABLE 中的唯一值。我不知道这是否明智。

# php - 在 JQuery 中使用 onchange 事件清除/刷新所有字段

> ID：16212839
> 
> 赞同：0
> 
> 时间：2013-04-25T10:52:44.973
> 
> 标签：php, jquery, cakephp

我有一组代码，其中有一个下拉列表，下面有 6-8 个文本字段。现在，每当我更改选项时，我都希望刷新所有字段，我的意思是必须将字段设为空....

我尝试过的：-

```
$(document).ready(function(){
$('#typed').change(function() {

$('#fieldid1').val("");
$('#fieldid2').val("");
....
    })
}); 
```

但我的问题是它可以只使用一行代码来完成，这样所有存在的文本框都将被清除？？？？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-25T11:17:51.220

给你所有的字段一个通用的类名，比如`class='test3'`然后：

```
<input type="text" class="test3" >
<input type="text" class="test3" >
<input type="text" class="test3" >
<input type="text" class="test3" >
<input type="text" class="test3" >

<select id="btn3">
    <option value="volvo">111</option>
    <option value="saab">222</option>
    <option value="mercedes">333</option>
    <option value="audi">444</option>
</select>

 $("#btn3").change(function(){
     $(".test3").val("");
  }); 
```

**[演示](http://jsfiddle.net/ipsjolly/ac6Fr/)**

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-25T10:57:44.463

尝试这个：

```
$('#typed').change(function () {
    $('input:text').val("");
}); 
```

此外，您可以为要清除的所有输入字段添加一个类，并执行以下操作：

```
$('#typed').change(function () {
    $('input.someclass').val("");
}); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-25T10:59:22.240

```
$('input').val(""); 
```

或者

```
$('textarea').val(""); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-04-25T10:59:59.347

给你所有的字段一个通用的类名，就像`class='resetme'`那时一样

```
$('#typed').change(function () {
    $('.resetme').val("");
}); 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-04-25T10:57:09.927

1.创建一个输入类型='reset'并使用jquery将其隐藏在表单中`.hide()`
2.`Trigger('click')`单击该输入类型。

# c# - 如何在 C# MVC 中返回 Json 作为我的视图的一部分

> ID：16212842
> 
> 赞同：0
> 
> 时间：2013-04-25T10:52:46.693
> 
> 标签：c#, asp.net-mvc, json, linq, jquery-datatables

我的问题是：**如何将这两个操作结果合并为一个？**让第一个只做一条线似乎没有意义。但我看不到出路。任何想法，将不胜感激。剩下的我提供背景。

我正在尝试并成功返回带有我需要的 Json 结果的部分视图，但我使用两个同名的 ActionResult（一个带有参数一个没有）来实现这一点。如果我以这种方式继续，我将不得不重复我所有的 ActionResults 两次。我遇到的问题是，第一个操作结果只不过是字面意思：

```
[HttpGet]
public ActionResult MyResults()
{
    return PartialView();
} 
```

用于返回视图。在视图中，我有一些 JQuery/Ajax 反过来调用另一个同名但带有参数的操作结果。此操作结果有效地填充了一个 Json 对象，然后将其解析并作为表格呈现到上面的视图中。这个 actionresult 有效地完成了所有工作。它看起来像：

```
 [HttpPost]
    public ActionResult MyResults(DataTablePrameters param)
    {
         //Get the full list of data that meets our needs
        var fullList = _myResultsRepository.GetListByID(Id);

        //Count the records in the set
        int count = fullList.Count();

        //Shorten the data to that required for the page and put into object array for Json
        var result = from r in fullList.Skip(param.iDisplayStart).Take(param.iDisplayLength)
                     select new object[]
                     {
                         r.field1,
                         r.field2,
                         r.field3
                     };

        //Return Json data for the Datatable
        return Json(new
        {
            sEcho = param.sEcho,
            iTotalRecords = param.iDisplayLength,
            iTotalDisplayRecords = count,
            aaData = result
        });
    } 
```

那些不熟悉它的人不会知道我正在使用 DI/IOC，并且为简洁起见，我没有包含详细信息。但这不是我的问题。上面的代码也使用了来自以下站点的数据表：

[http://datatables.net/index](http://datatables.net/index)

这实际上是相当不错的。再次，使用以上所有内容，我的代码运行良好。所以我没有问题。我知道它的效率有点低，因为它将结果集加载到一个变量中进行计数，然后跳过...采取等等，但同样，它有效，这不是我的问题。

所以我唯一的问题是，**我怎样才能将它们两者结合到一个视图**中。让第一个只做一条线似乎没有意义。但我看不到出路。任何想法，将不胜感激。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-25T11:48:28.753

从要使用的 中删除`[HttpPost]`和`[HttpGet]`属性。`ActionResult`

检查您的字段的有效性包含在`DataTablePrameters param`like 中：

```
public ActionResult MyResults(DataTablePrameters param = null) {
    if(string.IsNullOrEmpty(param.sEcho) && string.IsNullOrEmpty(param.iDisplayStart) && string.IsNullOrEmpty(param.iDisplayLength))
        return PartialView();

//Do something

return Json(...);
} 
```

在您看来，您仍然可以像我想的那样使用`type:"POST"`into your 。`$.ajax()``url:"/YourController/MyResults"`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-25T11:11:16.090

假设只剩下一个操作就不需要分离 POST 和 GET 访问，难道只是让“param”可选吗？

```
public ActionResult MyResults(DataTablePrameters param = null) {
  if(param == null)
    return PartialView();

  // Repository action...

  return Json([...]);
} 
```

# c++ - Cast pointer to fixed-size array in return statement

> ID：16212843
> 
> 赞同：10
> 
> 时间：2013-04-25T10:52:55.350
> 
> 标签：c++, arrays

The simplest way to ask this question is with some code:

```
struct Point
{
    int x;
    int y;
    int z;

    int* as_pointer() { return &x; }        // works
    int (&as_array_ref())[3] { return &x; } // does not work   
}; 
```

`as_pointer` compiles, `as_array_ref` does not. A cast seems to be in order but I can't figure out the appropriate syntax. Any ideas?

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2013-04-25T11:00:37.333

我发现数组类型更容易处理 typedef：

```
typedef int ints[3]; 
```

那么你的`as_array_ref`必须写成这样`&as_array_ref() == &x`。

以下语法是可能的：

1.  普通的 C 风格转换从`int*`to `ints*`：

    `ints& as_array_ref() { return *( (ints*)(&x) ); }`

2.  C++ 风格`reinterpret_cast`（@Mike Seymour 建议 - 另见他的回答）。在 C++ 中，它通常被认为是一种更好的做法：

    `ints& as_array_ref() { return *reinterpret_cast<ints*>(&x); }`

3.  Cast from which 稍微短一些，但（对我来说）不太直观`int&`：`ints&`

    `ints& as_array_ref() { return reinterpret_cast<ints&>(x); }`

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2013-04-25T11:22:53.530

您需要将对变量的引用重新解释为对数组的引用的转换是：

```
reinterpret_cast<int(&)[3]>(x); 
```

请注意，使用它会产生未定义的行为；它可能适用于任何合理的实现，但不能保证类成员之间不会有填充，而数组不会被填充。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-04-25T11:05:29.890

我认为你想要做的事情会更容易（和更清晰/更清洁）与工会。

# php - symfony 1.4 中 API 的日志

> ID：16212851
> 
> 赞同：0
> 
> 时间：2013-04-25T10:53:24.583
> 
> 标签：php, api, logging, symfony-1.4

我正在使用 Symfony 1.4 中的 REST API

我想记录进出我的“api”应用程序的所有内容。在 log/api 文件夹中，我将跟踪各种文件中的 api 调用。对于 myModule/myAction 的调用，我将拥有三个文件：

*   所有请求的 myModule_myAction_RQ.log
*   所有响应的 myModule_myAction_RS.log
*   myModule_myAction_error.log 用于所有错误响应

我知道如何手动执行此操作，在每个操作的开头和结尾添加一些代码。这是我的方法：

```
class myActions extends sfActions
{   
/**
 * log function
 */
private static function customLog($message, $seed, $url, $content, $type)
{
    $file =  sprintf('%s/%s_%s.log', sfConfig::get('sf_log_dir', "no_log_dir")."/api", $message, $type);
    $logger = new sfFileLogger(
                new sfEventDispatcher(), 
                array('file'=> $file)
            );

    $logger->log( sprintf("#%s# (%s) %s ", $seed, $url, $content),
                    0, 
                    "info"
    );
}

/**
  * Executes index action
  *
  * @param sfRequest $request A request object
  */
  public function executeIndex(sfWebRequest $request)
  {
    try {           
        $json_msg = $request->getContent();
        // LOG !!!
        $seed = rand();
        $current_uri = "http://$_SERVER[HTTP_HOST]$_SERVER[REQUEST_URI]";
        self::customLog("availability", $seed, $current_uri, $json_msg, 'RQ');

                    // Do some API logic to set $response_msg
                    // ...

                    $this->response_msg = $response_msg;

        // LOG !!!
        self::customLog("myModule_index", $seed, $current_uri, $response_msg, 'RS');

    }
    catch(Exception $e)
    {
        // throw $e;
        $this->setTemplate("error");
        $this->error = $e;

        // LOG !!!
        self::customLog("myModule_index", $seed, $current_uri, $e->getCode().":".$e->getMessage(), 'error');
    }

  } 
```

以下是一些记录信息的示例：

```
 myModule_index_RQ.log:
 Apr 25 11:49:31 symfony [emerg] #958824120# (http://host.local/api_dev.php/users/1/index {"price_km":0.66,"reservation_type":3, "position":{"long":2.139015,"lat":41.37947}} 
 Apr 25 11:56:27 symfony [emerg] #512729287# (http://host.local/api_dev.php/users/1/index {"price_km":0.66,"reservation_type":3,"position":{"long":2.161576,"lat":41.396896}}

myModule_index_RS.log:
Apr 25 11:49:32 symfony [emerg] #958824120# (http://host.local/api_dev.php/users/1/index) {"id_availability":539,"alternatives":[{"id_alternative":1,"duration":9,"reservation_type":3,"distance":3.5,"price":1.62,"original_price":2.31}]} 
Apr 25 11:56:27 symfony [emerg] #512729287# (http://host.local/api_dev.php/users/1/index) {"id_availability":540} 

myModule_index_error.log:
 Apr 25 11:38:20 symfony [emerg] #1059359810# (http://host.local/api_dev.php/users/1/index) 4205:Position to out of service area 
```

现在这可能很快就会变得乏味......

我知道，通过对 Symfony 内部结构的深入了解，我可以很好地实现这一点（DRYly）。所以我的问题来了：

*   事件可能是完成它的方法。我对吗 ？如果是这样，我应该使用哪些事件？我怎么把它放在一起？
*   使用 $request->getContent()，我可以获取发送给我的消息的内容。如何获取我的回复内容？（因为我的观点的内容只有在我的行动结束后才知道，这不是可以“像往常一样”做的事情）。
*   那么，过滤器可能是实现所有这些日志记录功能的方法吗？
*   也许这个问题太标准了，我可以在一些配置文件中设置它？傻吗？或者某些模块可能正在这样做？

这个级别的 Symfony 内部结构对我来说还是很新的，所以任何提示，一段代码......都会非常受欢迎！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-25T14:24:37.913

好吧，似乎过滤器是这样做的方法......首先，我在应用程序的 lib 文件夹中建立了一个过滤器类：

```
<?php
class LogFilter extends sfFilter{

 public function execute($filterChain){

      $request = $this->context->getRequest();
      $response = $this->context->getResponse();

      $seed = rand();
      $this->customLog($seed, $request->getContent(), 'RQ');

      $filterChain->execute($filterChain);    

      $this->customLog($seed, $response->getContent(), 'RS');
  }

/**
 * just log
 *  @param integer $seed: a random number that will be identical across request and response.
 *  @param string $content: the content of the message to be logged
 *  @param type: the type of the message (RQ = request, RS = response)
 */
private function customLog($seed, $content, $type)
{
    // get the current action information
    $moduleName = $this->context->getModuleName();
    $actionName = $this->context->getActionName();
    $message = $moduleName."-".$actionName;
    $url = "http://$_SERVER[HTTP_HOST]$_SERVER[REQUEST_URI]";

    $file =  sprintf('%s/%s-%s.log', sfConfig::get('sf_log_dir', "no_log_dir")."/api-in", $message, $type);
    $logger = new sfFileLogger(
                new sfEventDispatcher(), 
                array('file'=> $file)
            );

    $logger->log( sprintf("#%s# (%s) %s ", $seed, $url, $content),
                    0, 
                    "info"
    );
}

} 
```

在安全和缓存之间的 filters.yml 配置文件（在您的应用程序配置文件夹中）注册您的过滤器：

```
rendering: ~
security:  ~

# insert your own filters here
MyCustomFilter:  
  class: LogFilter

cache:     ~
execution: ~ 
```

而且……就是这样！

# asp.net - 将身份验证标头传递给 iframe 中的图像请求

> ID：16212854
> 
> 赞同：0
> 
> 时间：2013-04-25T10:53:27.767
> 
> 标签：asp.net, ssrs-2008, reporting-services, windows-authentication, basic-authentication

我确信我的问题的标题没有多大意义，但我现在想不通。

问题：我的主要任务是在 ASP.NET MVC 应用程序的一个页面内的弹出窗口中显示 SSRS 报告的**所有页面。**

为了实现这一点，我使用了以下方法：

1.  在 MyPage.cshtml 中添加一个 jQuery 弹出窗口（我需要在此弹出窗口中报告内容）
2.  当此弹出窗口打开时（在某些客户端操作上），我向第二页 proxyPage.aspx 发出 jquery ajax 请求
3.  在代理页面上，我使用网络凭据向报告服务器发出 Web 请求并获取报告 html

    ```
     WebRequest request = WebRequest.Create( "http://MyReportServer/ReportServer?/ MyReportName&rs:Command=Render&rs:Format =HTML4.0&rc:Toolbar=false&Param1=blabla123");
        request.Credentials = new NetworkCredential(MYUSERNAME, MYPASSWORD);
        HttpWebResponse response = (HttpWebResponse)request.GetResponse();
        Stream receiveStream = response.GetResponseStream();
        StreamReader readStream = new StreamReader(receiveStream, System.Text.Encoding.UTF8);
        string str = readStream.ReadToEnd();
        Response.Write(str); 
    ```

4.  来自 proxyPage 的 HTML 我在弹出窗口内的 div 中编写或使用 iframe 在其中显示完整的代理页面。

5.  直到这里一切顺利，此后我又遇到了另一个问题，为此我正在写这个问题

6.  当报表的 HTML 在弹出窗口中呈现时，它会请求报表服务器检索嵌入在报表中的图像。

由于这些对报告服务器的请求没有像我在步骤 3 中那样发送网络凭据，因此我会收到输入凭据的提示。

我需要一种方法，这些图像请求可以通过我之前提供的凭据以某种方式进行身份验证。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-28T01:20:23.807

SSRS 将在您指定的位置流式传输资源。

```
private byte[] InternalRenderReport(Report report, List<ReportParameter> parameters, string format, int pageNumber, ref int totalPages, string virtualTempFolder, string physicalTempFolder)
        {
            CheckConnection();
            byte[] result = null;
            ReportExecution2005.ReportExecutionService _execService=new ReportExecution2005.ReportExecutionService();

            sys = _systemService.GetCurrentSystem();
            _execService.Url = sys.ReportingServices.ServiceRootURL+"/ReportExecution2005.asmx";
            NetworkCredential credentials = new NetworkCredential(sys.ReportingServices.Credentials.UserName, 
                                                                 sys.ReportingServices.Credentials.Password,
                                                                 sys.ReportingServices.Credentials.Domain);
            _execService.Credentials=credentials;

            ReportExecution2005.ParameterValue[] rsParams = null;
            if (parameters != null)
            {
                rsParams = new ReportExecution2005.ParameterValue[parameters.Count];
                int x = 0;
                foreach (ReportParameter p in parameters)
                {
                    rsParams[x] = new ReportExecution2005.ParameterValue();
                    rsParams[x].Name = p.ParameterName;
                    rsParams[x].Value = p.SelectedValue;
                    x++;
                }
            }
            StringBuilder devInfo = new StringBuilder();
            if (format.ToUpper().StartsWith("HTML"))
            {
                devInfo.Append("<DeviceInfo>");
                devInfo.Append("<HTMLFragment>True</HTMLFragment>");
                devInfo.Append("<Section>" + pageNumber.ToString() +"</Section>");
                devInfo.Append("<StreamRoot>" + virtualTempFolder + "</StreamRoot>");
                /*devInfo.Append("<Zoom>200</Zoom>");*/
                devInfo.Append("</DeviceInfo>");                
            }
            else
                 devInfo.Append("<DeviceInfo><Toolbar>False</Toolbar></DeviceInfo>");

            string extension;
            string mimeType;
            string encoding;
            string[] streamIDs = null;
            ReportExecution2005.Warning[] warnings = null;

            ReportExecution2005.ExecutionHeader execHeader = new ReportExecution2005.ExecutionHeader();
            ReportExecution2005.ExecutionInfo rpt = _execService.LoadReport(report.ReportPath, null);

            if(rsParams!=null)
                _execService.SetExecutionParameters(rsParams, "en-us");
            _execService.ExecutionHeaderValue = execHeader;
            _execService.ExecutionHeaderValue.ExecutionID = rpt.ExecutionID;

            //result = _execService.Render2(format, devInfo, ReportExecution2005.PageCountMode.Actual, out extension, out mimeType, out encoding, out warnings, streamIDs);
            result =  _execService.Render(format, devInfo.ToString(), out extension, out mimeType, out encoding, out warnings, out streamIDs);

            if (format.ToUpper().StartsWith("HTML"))
            {

                // For each image stream returned by the call to render,
                // render the stream and save it to the application root
                string FilePath = physicalTempFolder;
                byte[] image;
                // For each image stream returned by the call to render,
                // render the stream and save it to the application root
                foreach (string streamID in streamIDs)
                {
                    image = _execService.RenderStream("HTML4.0", streamID, null, out encoding, out mimeType);

                    FileStream stream = File.OpenWrite(FilePath + streamID);
                    stream.Write(image, 0, image.Length);                    
                    stream.Close();
                }
            }

            rpt = _execService.GetExecutionInfo();
            totalPages = rpt.NumPages;

            return result;
        } 
```

这将返回原始 HTML 或内容以推送文件。我在要部署到服务器的解决方案中添加了一个 Temp 文件夹。您可以在 temp 文件夹中放置一个 web.config 文件，其中包含以下内容，以允许扩展更少的内容，因为 ssrs 在使用流时将呈现：

```
<?xml version="1.0" encoding="UTF-8"?>
<configuration>
  <system.webServer>
    <staticContent>

      <mimeMap fileExtension=".*" mimeType="image/png" />

    </staticContent>
    <handlers>
      <clear />

      <add name="StaticFile" path="*" verb="*" type="" modules="StaticFileModule,DefaultDocumentModule,DirectoryListingModule" scriptProcessor="" resourceType="Either" requireAccess="Read" allowPathInfo="false" preCondition="" responseBufferLimit="4194304" />
    </handlers>
  </system.webServer>
</configuration> 
```

然后使用以下函数来获取物理和虚拟临时文件夹：

```
PhyscicalTempFolder= AppDomain.CurrentDomain.BaseDirectory + @"Temp\";
VirtualTempFolder=return  Url.Content("~/Temp/"); 
```

最后要在每天之后进行清理，您可以添加类似于以下内容的 powershell 命令：

```
Remove-Item D:\xxx\WebApplications\ExternalReports\Temp\* -exclude *.config 
```

然后添加一个调用 PS 脚本的 .bat：

```
powershell -command "& 'C:\xxx\Scripts\SSRSCleanTempFiles\SSRSCleanTempFiles.ps1'" 
```

有了这个，您可以在服务器上配置一个计划任务来每天调用 .bat 文件并清理应用程序的临时文件夹。

# python - python reg exp：如何从字符串中删除由 [ 和 ] 分隔的字段

> ID：16212859
> 
> 赞同：-1
> 
> 时间：2013-04-25T10:53:47.497
> 
> 标签：python, regex, string

我有一个文件，每一行都是这样的：

```
2013-04-23 16:04:12.276 BLA[16878:950f] 'asdf' : 0, 'asds': 0, 'adf': 0 
```

我需要`BLA[16878:950f]`用`,`.

请注意，文本`BLA`始终相同，但`[`and`]`中的文本始终不同，并且可以具有不同的长度。

最后我需要的是：

```
2013-04-23 16:04:12.276, 'asdf' : 0, 'asds': 0, 'adf': 0 
```

有任何想法吗？我非常不擅长正则表达式，但我认为这是唯一的方法。

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-25T10:55:39.917

```
>>> import re
>>> line = "2013-04-23 16:04:12.276 BLA[16878:950f] 'asdf' : 0, 'asds': 0, 'adf': 0"
>>> re.sub(r'BLA\[[^\]]+\]', ',', line)
"2013-04-23 16:04:12.276 , 'asdf' : 0, 'asds': 0, 'adf': 0" 
```

我认为您实际上想要替换`spaceBLA[16878:950f]`：所以如果您愿意，只需添加该空间

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-25T11:08:33.280

> 我非常不擅长正则表达式，但我认为这是唯一的方法。

FWIW，它可以在没有正则表达式的情况下完成......

```
>>> s = "2013-04-23 16:04:12.276 BLA[16878:950f] 'asdf' : 0, 'asds': 0, 'adf': 0"
>>> i1 = s.find('[')
>>> i2 = s.find(']')
>>> '%s,%s' % (s[:i1-4], s[i2+1:])
"2013-04-23 16:04:12.276, 'asdf' : 0, 'asds': 0, 'adf': 0" 
```

...但这只有在您可以保证字符串中的每个`[`和`]`字符只出现一次的情况下才有效。

但是，jamylak 的解决方案会更可靠。

# c++ - passing pointer type to template argument

> ID：16212862
> 
> 赞同：2
> 
> 时间：2013-04-25T10:54:21.710
> 
> 标签：c++, templates

I wrote the following code:

```
template <typename T>
void  myname(T* x)
{
    cout<<"x is "<<x;
} 
```

and I Invoked:

```
char *p="stackOverflow";
myname(p); 
```

It prints `stackOverflow`.

But if I change the template argument from `(T* x)` to `(T x)` I get the same result.

So what is the difference between the two template parameters?

```
void  myname (T x) 
```

and

```
void myname (T* x) 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-25T10:59:30.270

第一种情况 -`T`被推导出为 char，因此`T*`将是`char*`. 第二种情况 -`T`被推导出来`char*`。此处的差异在于调用此类函数

对于第一种情况应该是

```
myname<char>(p); 
```

第二次

```
myname<char*>(p); 
```

此外，不同之处在于您使用类型输入`T`功能。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-25T11:00:32.727

当您在函数中使用 T 时，差异将是可见的

```
char *p="stackOverflow";
myname(p);

template <typename T>
void  myname(T* x)
{
    cout<<"x is "<<x;
    T t;                 // This is char now
} 
```

然而有了这个

```
template <typename T>
void  myname(T x)
{
    cout<<"x is "<<x;
    T t;                 // This is char* now
} 
```

* * *

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-25T11:02:17.130

在这两种情况下，编译器都会推导出模板参数以生成与函数参数类型匹配的函数`char *`。

在第一种情况下，它使用`T = char`给实例化模板`void myname<char>(char* x)`。

在第二种情况下，它用`T = char*`给实例化它`void myname<char*>(char* x)`。

另外，请注意字符串文字是常量，并且您永远不应该将非常量指针指向一个。

# mysql - 用大数据查询SQL中最后插入的数据

> ID：16212867
> 
> 赞同：1
> 
> 时间：2013-04-25T10:54:37.587
> 
> 标签：mysql, sql

我有这个带有对象 ID 的配置文件表，它是主要的。我正在使用脚本将缺少的用户导入配置文件表。为方便起见，我正在跟踪插入表中的对象 ID 范围。问题是数据以随机方式插入，我无法跟踪插入的最后一个对象 ID。我努力了

```
select * from managed_profile order by objectid desc limit 1,1; 
```

问题在于它给出了最后插入的数据。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-25T11:00:03.220

也许您可以添加带有时间戳的列并在您的 SQL 中使用它来按时间排序？

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-25T11:05:30.897

[mysqli_insert_id](http://php.net/manual/en/mysqli.insert-id.php)如果您正确标记了您的问题

# python - pexpect提示python中的空格

> ID：16212868
> 
> 赞同：-2
> 
> 时间：2013-04-25T10:54:44.280
> 
> 标签：python, pexpect

谁能告诉我，我们必须给出什么提示才能期望 python 脚本有一个空格。我需要执行一个命令，该命令只有在它看到期望提示后才会执行。手动执行时我得到了提示是一个空格，并且还必须通过脚本获得相同的提示。

导入 pexpect 导入 pxssh 导入时间 导入 o​​s,re,sys

def ssh(ipaddr,password): 试试:

```
 ss = pexpect.spawn(ipaddr)
    print ipaddr    
        ss.logfile = open("/tmp/mynewlog", "a")
        print "SSH connecting"
        print 
except:
    print "connection refused"
    print
    #sys.exit()

    try:
        print password
        ss.expect (':')

            ss.sendline (password +"\n")
            print "connected"
            time.sleep(30)
            ss.expect (">")
            print "connection established"
            print

    except:
            print "Permission denied, please try again."
                print
                sys.exit()
    try:
        ss.sendline ('taskkill /F /IM iperf.exe\n')
        time.sleep(30)
        ss.expect ('>')
            ss.sendline ('cd /D D:\iperf-2.0.5-2-win32\n')
            ss.expect ('>')
            ss.sendline ('iperf -s\n')#########This command i need to execute and i'm  expecting a blank space as prompt
            ss.sendline (pexpect.EOF)
            print "END"
            ssh() 
```

除了：打印“执行命令失败”
打印sys.exit()

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-25T13:59:26.637

**编辑：**

`ss.expect`将任何字符串作为[正则表达式](http://www.tutorialspoint.com/python/python_reg_expressions.htm)，并使用它来搜索程序的输出。在您的情况下，如果您想在所有破折号之前匹配该行，您可以这样做

```
ss.expect(r'TCP window size: .*yte \(default\)') 
```

更广泛地说，我不确定你想用这个来完成什么，但看看[这个页面](http://openmaniak.com/iperf.php)可能会有所帮助。

* * *

**老的：**

当您说您希望空格作为提示时，我不确定您的意思。

1）它真的是一个空间吗？如果`ss.expect(' ')`是这样，它应该可以工作。

2) 是否有行尾？如果`ss.expect('\n')`是这样，它应该可以工作。

3)`iperf`真的给你提示吗？真的是在等待输入吗？你要*发送*EOF？这会杀死程序吗？

# javascript - Get the offset position of the caret in a textarea in pixels

> ID：16212871
> 
> 赞同：30
> 
> 时间：2013-04-25T10:54:45.963
> 
> 标签：javascript, jquery, cross-browser, textarea

In my project I'm trying to get the offset position of the caret in a `textarea` in pixels. Can this be done?

Before asking here, I have gone through many [links](https://stackoverflow.com/a/7948715/1577396), especially Tim Down's, but I couldn't find a solution which works in IE8+, Chrome and Firefox. It seems [Tim Down is working on this](https://code.google.com/p/rangy/wiki/PositionModule).

Some [other](https://stackoverflow.com/a/2897510/1577396) [links](https://stackoverflow.com/a/13402035/1577396) which I have found have many issues like not finding the top offset of the caret position.

I am trying to get the offset position of the caret because I want to show an auto-complete suggestion box inside the `textarea` by positioning it based on the offset position of the caret.

**PS:** I can't use a `contenteditable div` because I have written lots of code related to a `textarea`.

* * *

## 回答 #1

> 赞同：18
> 
> 时间：2013-05-15T09:40:57.213

您可以创建一个单独的（不可见）元素，并从开始到光标位置用 textarea 内容填充它。Textarea 和“克隆”应该具有匹配的 CSS（字体属性、填充/边距/边框和宽度）。然后将这些元素堆叠在一起。

让我从一个工作示例开始，然后浏览代码：http: [//jsfiddle.net/g7rBk/](http://jsfiddle.net/g7rBk/)

### [更新了小提琴](http://jsfiddle.net/mLocgoeq/)（*带有 IE8 修复*）

HTML：

```
<textarea id="input"></textarea>
<div id="output"><span></span></div>
<div id="xy"></div> 
```

Textarea 是不言自明的。输出是一个隐藏元素，我们将向其传递文本内容并进行测量。重要的是我们将使用内联元素。“xy” div 只是用于测试目的的指标。

CSS：

```
/* identical styling to match the dimensions and position of textarea and its "clone"
*/
#input, #output {
    position:absolute;
    top:0;
    left:0;
    font:14px/1 monospace;
    padding:5px;
    border:1px solid #999;
    white-space:pre;
    margin:0;
    background:transparent;
    width:300px;
    max-width:300px;
}
/* make sure the textarea isn't obscured by clone */
#input { 
    z-index:2;
    min-height:200px;
}

#output { 
    border-color:transparent; 
}

/* hide the span visually using opacity (not display:none), so it's still measurable; make it break long words inside like textarea does. */
#output span {
    opacity:0;
    word-wrap: break-word;
    overflow-wrap: break-word;
}
/* the cursor position indicator */
#xy { 
    position:absolute; 
    width:4px;
    height:4px;
    background:#f00;
} 
```

JavaScript：

```
/* get references to DOM nodes we'll use */
var input = document.getElementById('input'),
    output = document.getElementById('output').firstChild,
    position = document.getElementById('position'),

/* And finally, here it goes: */
    update = function(){
         /* Fill the clone with textarea content from start to the position of the caret. You may need to expand here to support older IE [1]. The replace /\n$/ is necessary to get position when cursor is at the beginning of empty new line.
          */
         output.innerHTML = input.value.substr( 0, input.selectionStart ).replace(/\n$/,"\n\001");

        /* the fun part! 
           We use an inline element, so getClientRects[2] will return a collection of rectangles wrapping each line of text.
           We only need the position of the last rectangle.
         */
        var rects = output.getClientRects(),
            lastRect = rects[ rects.length - 1 ],
            top = lastRect.top - input.scrollTop,
            left = lastRect.left+lastRect.width;
        /* position the little div and see if it matches caret position :) */
        xy.style.cssText = "top: "+top+"px;left: "+left+"px";
    } 
```

[1] [textarea 中的插入符号位置，从开头开始的字符](https://stackoverflow.com/questions/263743/how-to-get-caret-position-in-textarea)

[2] [https://developer.mozilla.org/en/docs/DOM/element.getClientRects](https://developer.mozilla.org/en/docs/DOM/element.getClientRects)

编辑：此示例仅适用于固定宽度的文本区域。要使其与用户可调整大小的文本区域一起使用，您需要将事件侦听器添加到调整大小事件并设置#output 尺寸以匹配新的#input 尺寸。

* * *

## 回答 #2

> 赞同：16
> 
> 时间：2013-05-15T21:55:54.540

这是一种使用[rangyinputs](https://code.google.com/p/rangyinputs/)、[rangy](https://code.google.com/p/rangy/)和[jQuery](http://jquery.com/)的方法。

它基本上将整个文本从内部复制`textarea`到`div`相同大小的 a 中。我设置了一些 CSS 以确保在每个浏览器中，the`textarea`和 the`div`以完全相同的方式包装它们的内容。

单击时`textarea`，我读出插入符号所在的字符索引，然后`span`在`div`. 仅通过这样做，如果用户在行首单击，我最终会遇到插入符号`span`跳回上一行的问题。为了解决这个问题，我检查前一个字符是否是 a `space`（这将允许发生换行），如果是`true`，我将其包装在 a`span`中，并将下一个单词（插入符号位置之后的那个）包装在 a 中`span`。现在我比较这两个`span`'s 之间的最高值，如果它们不同，则进行一些换行，所以我假设 the`top`和 the 的`left`值`#nextword` `span`相当于插入符号的位置。

这种方法仍然可以改进，我敢肯定我没有想到所有可能出错的地方，即使我有，我也没有费心为所有这些问题实施修复，因为我没有现在是时候这样做了，你需要看看一些事情：

*   ~~它还没有处理插入的硬返回`Enter`~~（固定）
*   ~~连续输入多个空格时定位中断~~（已修复）
*   我认为连字符也会允许内容包装发生..

目前，它在 Windows 8 上使用最新版本的 Chrome、Firefox、IE 和 Safari 浏览器的工作方式完全相同。不过我的测试不是很严格。

这是一个`[**jsFiddle**](http://jsfiddle.net/wrzPk/55/)`.

我希望它会对你有所帮助，至少它可能会给你一些想法。

### 一些特点：

*   我`ul`为您添加了一个位于正确位置的内容，并修复了 Firefox 问题，即`textarea`在 DOM 操作后选择未重新设置回其原始位置。

*   我添加了 IE7 - IE9 支持并修复了评论中指出的多词选择问题。

*   我添加了对连续插入`Enter`多个空格的硬返回的支持。

*   我已经修复了 ++ 文本选择方法的默认`ctrl`行为问题`shift`。`left arrow`

**JavaScript**

```
function getTextAreaXandY() {

    // Don't do anything if key pressed is left arrow
    if (e.which == 37) return;     

    // Save selection start
    var selection = $(this).getSelection();
    var index = selection.start;

    // Copy text to div
    $(this).blur();
    $("div").text($(this).val());

    // Get current character
    $(this).setSelection(index, index + 1);
    currentcharacter = $(this).getSelection().text;

    // Get previous character
    $(this).setSelection(index - 1, index)
    previouscharacter = $(this).getSelection().text;

    var start, endchar;
    var end = 0;
    var range = rangy.createRange();

    // If current or previous character is a space or a line break, find the next word and wrap it in a span
    var linebreak = previouscharacter.match(/(\r\n|\n|\r)/gm) == undefined ? false : true;

    if (previouscharacter == ' ' || currentcharacter == ' ' || linebreak) {
        i = index + 1; // Start at the end of the current space        
        while (endchar != ' ' && end < $(this).val().length) {
            i++;
            $(this).setSelection(i, i + 1)
            var sel = $(this).getSelection();
            endchar = sel.text;
            end = sel.start;
        }

        range.setStart($("div")[0].childNodes[0], index);
        range.setEnd($("div")[0].childNodes[0], end);
        var nextword = range.toHtml();
        range.deleteContents();
        var position = $("<span id='nextword'>" + nextword + "</span>")[0];
        range.insertNode(position);
        var nextwordtop = $("#nextword").position().top;
    }

    // Insert `#caret` at the position of the caret
    range.setStart($("div")[0].childNodes[0], index);
    var caret = $("<span id='caret'></span>")[0];
    range.insertNode(caret);
    var carettop = $("#caret").position().top;

    // If preceding character is a space, wrap it in a span
    if (previouscharacter == ' ') {
        range.setStart($("div")[0].childNodes[0], index - 1);
        range.setEnd($("div")[0].childNodes[0], index);
        var prevchar = $("<span id='prevchar'></span>")[0];
        range.insertNode(prevchar);
        var prevchartop = $("#prevchar").position().top;
    }

    // Set textarea selection back to selection start
    $(this).focus();
    $(this).setSelection(index, selection.end);

    // If the top value of the previous character span is not equal to the top value of the next word,
    // there must have been some wrapping going on, the previous character was a space, so the wrapping
    // would have occured after this space, its safe to assume that the left and top value of `#nextword`
    // indicate the caret position
    if (prevchartop != undefined && prevchartop != nextwordtop) {
        $("label").text('X: ' + $("#nextword").position().left + 'px, Y: ' + $("#nextword").position().top);
        $('ul').css('left', ($("#nextword").position().left) + 'px');
        $('ul').css('top', ($("#nextword").position().top + 13) + 'px');
    }
    // if not, then there was no wrapping, we can take the left and the top value from `#caret`    
    else {
        $("label").text('X: ' + $("#caret").position().left + 'px, Y: ' + $("#caret").position().top);
        $('ul').css('left', ($("#caret").position().left) + 'px');
        $('ul').css('top', ($("#caret").position().top + 14) + 'px');
    }

    $('ul').css('display', 'block');
}

$("textarea").click(getTextAreaXandY);
$("textarea").keyup(getTextAreaXandY); 
```

**HTML**

```
<div></div>
<textarea>Lorem Ipsum is simply dummy text of the printing and typesetting industry. Lorem Ipsum has been the industry's standard dummy text ever since the 1500s, when an unknown printer took a galley of type and scrambled it to make a type specimen book.</textarea>
<label></label>
<ul>
    <li>Why don't you type this..</li>
</ul> 
```

**CSS**

```
body {
    font-family: Verdana;
    font-size: 12px;
    line-height: 14px;
}
textarea, div {
    font-family: Verdana;
    font-size: 12px;
    line-height: 14px;
    width: 300px;
    display: block;
    overflow: hidden;
    border: 1px solid black;
    padding: 0;
    margin: 0;
    resize: none;
    min-height: 300px;
    position: absolute;
    -moz-box-sizing: border-box;
    white-space: pre-wrap;
}
span {
    display: inline-block;
    height: 14px;
    position: relative;
}
span#caret {
    display: inline;
}
label {
    display: block;
    margin-left: 320px;
}
ul {
    padding: 0px;
    margin: 9px;
    position: absolute;
    z-index: 999;
    border: 1px solid #000;
    background-color: #FFF;
    list-style-type:none;
    display: none;
}
@media screen and (-webkit-min-device-pixel-ratio:0) {
    span {
        white-space: pre-wrap;
    }
}
div {
    /* Firefox wrapping fix */
    -moz-padding-end: 1.5px;
    -moz-padding-start: 1.5px;
    /* IE8/IE9 wrapping fix */
    padding-right: 5px\0/;
    width: 295px\0/;
}
span#caret
{
    display: inline-block\0/;
} 
```

* * *

## 回答 #3

> 赞同：7
> 
> 时间：2014-03-17T18:53:29.550

与其他答案中提供的相比，以像素为单位获取插入符号位置的解决方案要简单得多。

请注意，此问题与 2008 年的问题重复，我已在**[此处](https://stackoverflow.com/a/22446703/1269037)**回答。我只会在那个链接上保留答案，因为这个问题应该在几年前就已经被关闭了。

### 答案副本

[我已经为meteor-autocomplete](https://github.com/mizzao/meteor-autocomplete)寻找一个 textarea caret 坐标插件，所以我评估了 GitHub 上的所有 8 个插件。到目前为止，获胜者是来自**Component**[的 textarea-caret-position](https://github.com/component/textarea-caret-position)。

 **## 特征

*   像素精度
*   没有任何依赖
*   浏览器兼容性：Chrome、Safari、Firefox（尽管有[两个](https://bugzilla.mozilla.org/show_bug.cgi?id=753662) [错误](https://bugzilla.mozilla.org/show_bug.cgi?id=984275)）、IE9+；可以工作，但未在 Opera、IE8 或更早版本中测试
*   支持任何字体系列和大小，以及文本转换
*   文本区域可以有任意填充或边框
*   不会被文本区域中的水平或垂直滚动​​条弄糊涂
*   支持硬回车、制表符（IE 除外）和文本中的连续空格
*   比文本区域中的列长的行上的正确位置
*   换行时在行尾的[空白处](https://github.com/component/textarea-caret-position/blob/06d2197f85f96405b43724e56dc56f220c0092a5/test/position_off_after_wrapping_with_whitespace_before_EOL.gif)没有“幽灵”位置

### 这是一个演示 - [http://jsfiddle.net/dandv/aFPA7/](http://jsfiddle.net/dandv/aFPA7/)

![在此处输入图像描述](https://i.stack.imgur.com/LJiUS.png)

## 这个怎么运作

镜子`<div>`是在屏幕外创建的，其样式与`<textarea>`. 然后，直到插入符号的文本区域的文本被复制到 div 中，并在`<span>`其后插入 a。然后，将 span 的文本内容设置为 textarea 中文本的其余部分，以便忠实地再现假 div 中的换行。

这是保证处理所有与换行长线有关的边缘情况的唯一方法。GitHub 也使用它来确定其@user 下拉列表的**位置**。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2013-05-16T06:48:54.867

工作示例的 JsFiddle：http: [//jsfiddle.net/42zHC/2/](http://jsfiddle.net/42zHC/2/)

基本上，我们计算出有多少列适合宽度（因为它将是等宽的）。我们必须强制滚动条始终存在，否则计算将关闭。然后我们除以适合宽度的列数，得到每个字符的 x 偏移量。然后我们在 textarea 上设置行高。由于我们知道一行中有多少个字符，我们可以将其除以字符数并得到行号。有了线高，我们现在有了 y 偏移量。然后我们得到 textarea 的 scrollTop 并减去它，这样一旦它开始使用滚动条，它仍然会显示在正确的位置。

Javascript：

```
$(document).ready(function () {
  var cols = document.getElementById('t').cols;
  var width = document.getElementById('t').clientWidth;
  var height = $('textarea').css('line-height');
  var pos = $('textarea').position();
  $('#t').on('keyup', function () {
    el = document.getElementById("t");
    if (el.selectionStart) { 
        selection = el.selectionStart; 
      } else if (document.selection) { 
        el.focus(); 
        var r = document.selection.createRange(); 
        if (r == null) { 
           selection = 0; 
        } 
        var re = el.createTextRange(), 
        rc = re.duplicate(); 
        re.moveToBookmark(r.getBookmark()); 
        rc.setEndPoint('EndToStart', re); 
        selection = rc.text.length; 
      } else { selection = 0 }
    var row = Math.floor((selection-1) / cols);
    var col = (selection - (row * cols));
    var x = Math.floor((col*(width/cols)));
    var y = (parseInt(height)*row);
    $('span').html("row: " + row + "<br>columns" + col + "<br>width: " + width + "<br>x: " + x +"px<br>y: " + y +"px<br>Scrolltop: "+$(this).scrollTop()).css('top',pos.top+y-$(this).scrollTop()).css('left',pos.left+x+10);
  });
}); 
```

HTML：

```
<textarea id="t"></textarea>
<br>
<span id="tooltip" style="background:yellow"></span> 
```

CSS：

```
textarea {
  height: 80px;
  line-height: 12px;
  overflow-y:scroll;
}
span {
  position: absolute;
} 
```

* * *

## 回答 #5

> 赞同：-1
> 
> 时间：2013-04-25T12:42:15.413

我无法得到类似的工作，所以我的解决方案是在 textarea 中找到插入符号的字符位置，剪切当前段落并将其显示在 textarea 旁边。

使用偏移量，我在可编辑文本的这个视图中放置了一个假光标（`div`, `display:inline`, 1px 宽, ）。`border-left: 1px solid black`

这样，您可以创建一个视觉反馈区域，您可以在其中显示效果的结果（很像 stackoverflow 在您编写答案时所做的那样）。**

# sql - SQL server IF begin 语句在 where 函数中

> ID：16212880
> 
> 赞同：1
> 
> 时间：2013-04-25T10:55:08.670
> 
> 标签：sql, sql-server-2008, if-statement, where-clause

我正在尝试在 where 语句中创建以下内容。

```
 where Registration_Date >=@StartDate and Registration_Date < dateadd(day,1,@EndDate) 
        and if @affiliateid is null begin Channel in (select Value from dbo.Split(',',@Channel)) end 
             else Affiliate_Id in (select Value from dbo.Split(',', @AffiliateId))
        and Registration_Channel in (select Value from dbo.Split(',', @Channel)) 
```

所以，我想说的是，如果@AffiliateId 为空，则对所有会员ID 使用@Channel 输入，如果不是，则使用特定的@AffiliateId，而与渠道无关。

有什么办法可以使这项工作？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-25T10:57:58.197

```
SELECT  *
FROM    mytable
WHERE   DATE(registration_date) BETWEEN @startDate AND @endDate
        AND EXISTS
        (
        SELECT  NULL
        FROM    dbo.split(',', COALESCE(@affiliateId, @channel))
        WHERE   value = CASE WHEN @affiliateId IS NULL THEN channel ELSE affiliateId END
        )
        AND EXISTS
        (
        SELECT  NULL
        FROM    dbo.split(',', @channel)
        WHERE   value = registration_channel
        ) 
```

在`SQL Server 2008`,`DATE(column)`是一个 sargable 表达式。

# android - images url are not displaying in grid

> ID：16212883
> 
> 赞同：3
> 
> 时间：2013-04-25T10:55:20.277
> 
> 标签：android, image, gridview

I have set a gridview for image url..I can't able to see the image in grid.. Just shows the background...and on click the grid plays in next screen.

What im doing wrong? How to implement this?

Thanks a lot in advance

my code

> ```
>  public class act extends Activity {
> static  String uri1="https://i3.ytimg.com/vi/bQaWsVQSLdY/default.jpg";
> static String uri2="https://i4.ytimg.com/vi/cJQCniWQdno/mqdefault.jpg";
> static String uri3="https://i1.ytimg.com/vi/D8dA4pE5hEY/mqdefault.jpg";
> public static String[] urls={uri1,uri2,uri3};
> public Bitmap bitmap;
> @Override
> public void onCreate(Bundle savedInstanceState) {
>     super.onCreate(savedInstanceState);
>     setContentView(R.layout.main);
>     GridView grd=(GridView)findViewById(R.id.gridView1);
>     grd.setAdapter(new ImageAdapter(this));
>     grd.setOnItemClickListener(new OnItemClickListener()
>     {
>     public void onItemClick(AdapterView<?> parent,View v,int pos,long id)
>     {
>         Toast.makeText(getBaseContext(),"pic"+(pos+1)+"select ",Toast.LENGTH_SHORT).show();
>     }
>     });
> }
> public class ImageAdapter extends BaseAdapter
> {
>     private Context context;
>     private int itemBackground;
>     ImageAdapter(Context c)
>     {
>     context=c;
>     TypedArray a=obtainStyledAttributes(R.styleable.Gallery1);
>     itemBackground=a.getResourceId(R.styleable.Gallery1_android_galleryItemBackground,0);
>     a.recycle();
>     }
>     public int getCount()
>     {
>         return urls.length;
>     }
>     public Object getItem(int pos)
>     {
>         return pos;
>     }
>     public long getItemId(int pos)
>     {
>         return pos;
>     }
>     public View getView(int pos,View cv,ViewGroup vg)
>     {
> Bitmap bitmap=  DownloadImage( urls[pos] );
> ImageView imageview=new ImageView(context);
> imageview.setImageBitmap(bitmap);
> return cv;    
>     }
> private Bitmap DownloadImage(String URL)
>     {        
>         final String URL1=URL;       
>         new Thread()
>         {
>             public void run()
>             {               
>                 InputStream in = null;  
>                 Message msg = Message.obtain();
>                 msg.what = 1;
>                 try {
>                     in = OpenHttpConnection(URL1);
>                     Bitmap bitmap = BitmapFactory.decodeStream(in);     
>                     Bundle b = new Bundle();
>                     b.putParcelable("bitmap", bitmap);
>                     msg.setData(b);
>                     in.close();
>                 } catch (IOException e1) {
>                     // TODO Auto-generated catch block
>                     e1.printStackTrace();
>                 }
>             }
>         }.start();
>         return bitmap;
>     }
>     private InputStream OpenHttpConnection(String urlString)
>             throws IOException
>             {
>                 InputStream in = null;
>                 int response = -1;
>                 URL url = new URL(urlString);
>                 URLConnection conn = url.openConnection();
>                 if (!(conn instanceof HttpURLConnection))                    
>                     throw new IOException("Not an HTTP connection");
>                 try{
>                     HttpURLConnection httpConn = (HttpURLConnection) conn;
>                     httpConn.setAllowUserInteraction(false);
>                     httpConn.setInstanceFollowRedirects(true);
>                     httpConn.setRequestMethod("GET");
>                     httpConn.connect();
>                     response = httpConn.getResponseCode();                
>                     if (response == HttpURLConnection.HTTP_OK) 
>                     {
>                         in = httpConn.getInputStream();                                
>                     }                    
>                 }
>                 catch (Exception ex)
>                 {
>                     throw new IOException("Error connecting");            
>                 }
>                 return in;    
>     }
> }
> } 
> ```

logcat

> ```
>  E/AndroidRuntime(832): java.lang.NullPointerException
>        E/AndroidRuntime(832):   at android.widget.GridView.onMeasure(GridView.java:937)
>         E/AndroidRuntime(832):  at android.view.View.measure(View.java:8313)
>        E/AndroidRuntime(832):   at 
>        android.view.ViewGroup.measureChildWithMargins(ViewGroup.java:3138)
>        E/AndroidRuntime(832):   at 
>        android.widget.LinearLayout.measureChildBeforeLayout(LinearLayout.java:1017)
>         E/AndroidRuntime(832):  at 
>         android.widget.LinearLayout.measureVertical(LinearLayout.java:386)
>          E/AndroidRuntime(832):     at 
>         android.widget.LinearLayout.onMeasure(LinearLayout.java:309)
>          E/AndroidRuntime(832):     at android.view.View.measure(View.java:8313)
>          E/AndroidRuntime(832):     at 
>          android.view.ViewGroup.measureChildWithMargins(ViewGroup.java:3138)
>           E/AndroidRuntime(832):    at android.widget.FrameLayout.onMeasure(FrameLayout.java:250)
>          E/AndroidRuntime(832):     at android.view.View.measure(View.java:8313)
>          E/AndroidRuntime(832):     at 
>           android.widget.LinearLayout.measureVertical(LinearLayout.java:531)
>           E/AndroidRuntime(832):    at 
>           android.widget.LinearLayout.onMeasure(LinearLayout.java:309)
>           E/AndroidRuntime(832):    at android.view.View.measure(View.java:8313)
>           E/AndroidRuntime(832):    at 
>           android.view.ViewGroup.measureChildWithMargins(ViewGroup.java:3138)
>           E/AndroidRuntime(832):    at android.widget.FrameLayout.onMeasure(FrameLayout.java:250)
>           E/AndroidRuntime(832):    at android.view.View.measure(View.java:8313)
>           E/AndroidRuntime(832):    at android.view.ViewRoot.performTraversals(ViewRoot.java:839)
>           E/AndroidRuntime(832):    at android.view.ViewRoot.handleMessage(ViewRoot.java:1859)
>           E/AndroidRuntime(832):    at android.os.Handler.dispatchMessage(Handler.java:99)
>            E/AndroidRuntime(832):   at android.os.Looper.loop(Looper.java:123)
>            E/AndroidRuntime(832):   at android.app.ActivityThread.main(ActivityThread.java:3683)
>            E/AndroidRuntime(832):   at java.lang.reflect.Method.invokeNative(Native Method)
>            E/AndroidRuntime(832):   at java.lang.reflect.Method.invoke(Method.java:507)
>            E/AndroidRuntime(832):   at 
>            com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:839)
>             E/AndroidRuntime(832):  at 
>            com.android.internal.os.ZygoteInit.main(ZygoteInit.java:597)
>             E/AndroidRuntime(832):  at dalvik.system.NativeStart.main(Native Method) 
> ```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-26T05:57:07.710

尝试用`getView()`这个替换你的，让我知道结果：

```
public class ImageAdapter extends BaseAdapter
{
    private Context context;
    private int itemBackground;
    public ImageLoader imageLoader; 

    ImageAdapter(Context c)
    {
    context=c;
    TypedArray a=obtainStyledAttributes(R.styleable.Gallery1);
    itemBackground=a.getResourceId(R.styleable.Gallery1_android_galleryItemBackground,0);
    a.recycle();
    imageLoader=new ImageLoader(context);
    }
    public int getCount()
    {
        return urls.length;
    }
    public Object getItem(int pos)
    {
        return pos;
    }
    public long getItemId(int pos)
    {
        return pos;
    }
      public View getView(int position, View convertView, ViewGroup parent)
    {
       ImageView imageView;
             if (convertView == null) {
               imageView = new ImageView(context);
               imageView.setLayoutParams(new GridView.LayoutParams(85, 85));
               imageView.setScaleType(ImageView.ScaleType.CENTER_CROP);
               imageView.setPadding(2, 2, 2, 2);
    } else {
             imageView = (ImageView) convertView;
    }

       imageLoader.DisplayImage(urls[position], imageView)
       return imageView;
    }

} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-25T12:08:24.417

这是我尝试过的代码..图像正在显示..您可以根据需要自定义网格视图。您只需将以下代码复制并粘贴到您的活动中并尝试..

```
public class MainActivity extends Activity {

    static  String uri1="http://i3.ytimg.com/vi/bQaWsVQSLdY/default.jpg";
    static String uri2="http://i4.ytimg.com/vi/cJQCniWQdno/mqdefault.jpg";
    static String uri3="http://i1.ytimg.com/vi/D8dA4pE5hEY/mqdefault.jpg";
    public static String[] urls={uri1,uri2,uri3};
//  public Bitmap bitmap;
    @Override
    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.activity_main);
        GridView grd=(GridView)findViewById(R.id.gridview1);
        grd.setAdapter(new ImageAdapter(this));

    }
    public class ImageAdapter extends BaseAdapter
    {
        private Context context;
        private int itemBackground;
        ImageAdapter(Context c)
        {
        context=c;    
        }
        public int getCount()
        {
            return urls.length;
        }
        public Object getItem(int pos)
        {
            return pos;
        }
        public long getItemId(int pos)
        {
            return pos;
        }

    private Bitmap DownloadImage(String URL)
        {        
             String URL1=URL; 
             Bitmap bitmap = null;
//          new Thread()
//          {
//              public void run()
//              {               
                    InputStream in = null;  
                    Message msg = Message.obtain();
                    msg.what = 1;
                    try {
                        in = OpenHttpConnection(URL1);
                        bitmap = BitmapFactory.decodeStream(in);     
                        Bundle b = new Bundle();
                        b.putParcelable("bitmap", bitmap);
                        msg.setData(b);
                        in.close();
                    } catch (IOException e1) {
                        // TODO Auto-generated catch block
                        e1.printStackTrace();
                    }
//              }
//          }.start();
            return bitmap;
        }
        private InputStream OpenHttpConnection(String urlString)
                throws IOException
                {
//          System.out.println("Insdie conn");
                    InputStream in = null;
                    int response = -1;
                    URL url = new URL(urlString);
                    URLConnection conn = url.openConnection();
                    if (!(conn instanceof HttpURLConnection))                    
                        throw new IOException("Not an HTTP connection");
                    try{
//                      System.out.println("Inside try");
                        HttpURLConnection httpConn = (HttpURLConnection) conn;
                        httpConn.setAllowUserInteraction(false);
                        httpConn.setInstanceFollowRedirects(true);
//                      httpConn.setRequestMethod("GET");
                        httpConn.connect();
                        response = httpConn.getResponseCode();  
//                      System.out.println("res="+response);
//                      System.out.println("cccccc="+HttpURLConnection.HTTP_OK);
                        if (response == HttpURLConnection.HTTP_OK) 
                        {
//                          System.out.println("Inside if");
                            in = httpConn.getInputStream();                                
                        }                    
                    }
                    catch (Exception ex)
                    {
                        throw new IOException("Error connecting");            
                    }
                    return in;    
        }
        @Override
        public View getView(int position, View cv, ViewGroup parent) 
        {
            ImageView imageview = null;
//          System.out.println("vvvv="+urls[position]);
            Bitmap bitmap=  DownloadImage( urls[position] );        
            // TODO Auto-generated method stub
            if(cv == null)
            {
//              cv=LayoutInflater.from(parent.getContext()).inflate(R.layout.gridviewitem, null);
                imageview =  new ImageView(context);
            }
            else 
            {
                imageview = (ImageView) cv;
            }

            imageview.setImageBitmap(bitmap);
            return imageview;    
        }
    } 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-25T11:31:17.753

这是With的[示例](https://github.com/desertjim/LazyLoadingGridView)`GridView``ImageLoading`

编辑：

注意你的代码是错误的。但是您要显示来自服务器的图像（在线它不在您的应用程序资源或 sdcard、图库等中），这就是它没有显示在您的 GridView 中的原因。因此，您必须从服务器下载该图像。之后，您必须在 GridView 中显示它们。我在上面为您提供了如何下载图像并在 GridView 中显示它们的链接。

# iphone - [UIDeviceRGBColor set]: message sent to deallocated instance

> ID：16212885
> 
> 赞同：1
> 
> 时间：2013-04-25T10:55:33.653
> 
> 标签：iphone, ios, objective-c, nszombie

I am developing application like Instagram. I have code for `cellForRowAtIndexPath`, every time it creates object for unbutton and it is autorelease. this button display username and it may be 1,2,3,4,5,.. total like users. there for i create `UIButton` on depend on like cout. I am not using `ARC`.

but it crash sometimes (Not everyTime) when setColour.

I enabled `NSZombie` and it keeps saying:

**[UIDeviceRGBColor set]: message sent to deallocated instance 0x21b526f0**

```
 UIButton *btnLikeUserName = [[[UIButton alloc] init] autorelease];
                [btnLikeUserName.titleLabel setFont:[UIFont boldSystemFontOfSize:12]];

                if (posx + size.width > 280) {
                    posy = posy + 22;
                    posx = 18;
                    btnLikeUserName.frame = CGRectMake(posx,posy,size.width,size.height);
                    posx = posx + size.width + 5;
                }
                else {
                    btnLikeUserName.frame = CGRectMake(posx,posy,size.width,size.height);
                    posx = posx + size.width + 5;
                }
                btnLikeUserName.tag = shareObjU.userId;
                [btnLikeUserName setTitle:text forState:UIControlStateNormal];
                [btnLikeUserName setTitleColor:[UIColor colorWithRed:50/255.0 green:79/255.0 blue:133/255.0 alpha:1.0] forState:UIControlStateNormal]; ////Hear is crash
                [btnLikeUserName addTarget:self action:@selector(btnLikeUserNameClick:) forControlEvents:UIControlEventTouchUpInside];
                [cell.viewLikeComment addSubview:btnLikeUserName]; 
```

i also see following link

[UISwitch setThumbTintColor causing crash (iOS 6 only)?](https://stackoverflow.com/questions/12972500/uiswitch-setthumbtintcolor-causing-crash-ios-6-only)

[1 out of 4 colors return errors](https://stackoverflow.com/questions/5138047/1-out-of-4-colors-return-errors)

[iOS App crashes when using colorWithRed:green:blue:alpha](https://stackoverflow.com/questions/11318138/ios-app-crashes-when-using-colorwithredgreenbluealpha)

and other .. but all says for global Objct. not local object. how can i solved it. Thank You

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-25T11:01:26.563

试试这个代码...

```
[btnLikeUserName setTitleColor:[UIColor colorWithRed:((float) 50 / 255.0f)  
                           green:((float) 79 / 255.0f)  
                            blue:((float) 133 / 255.0f)  
                           alpha:1.0f] forState:UIControlStateNormal]; 
```

**或者**你也可以`UIColor`像下面这样设置。

```
[btnLikeUserName setTitleColor:[UIColor colorWithRed:50.0f/255.0f green:79.0f/255.0f blue:133.0f/255.0f alpha:1.0] forState:UIControlStateNormal]; 
```

在这里，您`UIButtons`在每个单元格中添加，然后尝试像下面这样定义，而不是每次都分配和自动释放.....

```
 UIButton *button = [UIButton buttonWithType:UIButtonTypeCustom]; 
```

****更新****：* *查看我在每个单元格中添加的示例，其中包含多个按钮，例如 GridView

```
 UIButton *button = [UIButton buttonWithType:UIButtonTypeCustom];
 button.frame = rect;
 button.tag = imageIndex;
 [button addTarget:self  action:@selector(btnTemp_Clicked:)
                 forControlEvents:UIControlEventTouchDown];

 [button setTitle:[arrTime objectAtIndex:imageIndex] forState:UIControlStateNormal];
 [button.titleLabel setFont:[UIFont fontWithName:@"Helvetica-Bold" size:12]];

 //[button setTitleColor:[UIColor colorWithPatternImage:[UIImage imageNamed:@"circle03.jpg"]] forState:UIControlStateNormal ];                
 [button setTitleColor:[UIColor colorWithRed:50.0f/255.0f green:79.0f/255.0f blue:133.0f/255.0f alpha:1.0] forState:UIControlStateHighlighted ];

 [button setNeedsDisplay];

 [gridCell.contentView addSubview:button]; 
```

# cygwin - cygbin：提供主机名或服务名，或未知

> ID：16212887
> 
> 赞同：2
> 
> 时间：2013-04-25T10:55:36.713
> 
> 标签：cygwin, hbase

安装**hadoop1.0.3**成功。现在运行 Hbase 服务（start-hbase.sh 命令）在**hbaseenv.sh**和**hbasesite.xml中进行更改**

**但是问题来了：**

![在此处输入图像描述](https://i.stack.imgur.com/loqgY.png)

请建议如何解决这个问题以及**cygpath: can't convert empty path**

# sql - Add Coun Expression in Join to Magento Collection

> ID：16212891
> 
> 赞同：2
> 
> 时间：2013-04-25T10:55:59.107
> 
> 标签：sql, magento, zend-db

Hi guys I'm having a hard time adding a join in Magento, well I know I can do `$collection->getSelect()->join` but I need to add a `Count()` expression in it.

What I'm concretly trying to achieve is this query:

```
SELECT `e`.*, COUNT(sfoi.product_id) as `count`
FROM `catalog_product_entity` 
AS `e` 
LEFT JOIN sales_flat_order_item sfoi
ON sfoi.product_id = e.entity_id 
ORDER BY `e`.`entity_id` asc, 
`e`.`entity_id` asc 
```

Edit:

THis is what it looks like now:

```
$e = Mage::getModel('catalog/product')->getCollection()->getSelect();
$e->join(array('c' => 'sales_flat_order_item'),
'e.entity_id = c.product_id',
array('count' => 'COUNT(c.product_id)')); 
```

Outputting this gives:

```
SELECT `e`.*, COUNT(c.product_id) AS `count` FROM `catalog_product_entity` 
AS `e` INNER         
JOIN `sales_flat_order_item` AS `c` ON e.entity_id = c.product_id 
```

doing this in my collection crashes the adminhtml grid. Tracing the reports it crashes here:

`a:5:{i:0;s:35:"Unrecognized method 'setPageSize()'";i:1;s:4771:"#0 /app/code/core/Mage/Adminhtml/Block/Widget/Grid.php(504): Zend_Db_Select->__call('setPageSize', Array)`

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-25T11:12:58.963

`Zend_Db_Select`您可以对返回的对象应用任何方法`getSelect()`。

[http://framework.zend.com/manual/1.12/en/zend.db.select.html](http://framework.zend.com/manual/1.12/en/zend.db.select.html)

您可以`COUNT()`在`join()`方法中使用，页面上有几个示例，特别是请参阅“添加 GROUP BY 子句”部分下的第一个示例：

```
->join(array('l' => 'line_items'),
    'p.product_id = l.product_id',
    array('line_items_per_product' => 'COUNT(*)')) 
```

# android - RelativeLayout check runtime if is removed or not

> ID：16212895
> 
> 赞同：0
> 
> 时间：2013-04-25T10:56:04.607
> 
> 标签：android, view, android-relativelayout

In an `activity` I am changing one of the `ViewGroup` content runtime: buttons action, other events.

At a specific case I need to check if a child is in this `layout` or not ( in this case the child is another `RelativeLayout`, which hold other views)

How can I check runtime, programmatically if `child_1_RelativeLayout` is there or is already removed from view tree, his parent is `parentRelativeLayout`

The [getParent()](http://developer.android.com/reference/android/view/View.html#getParent%28%29) is usefully? - not much explanation how to use it, thanks.

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-25T11:30:46.907

如果您存储了视图，您可以使用[getParent()](http://developer.android.com/reference/android/view/View.html#getParent%28%29)检查视图是否是其他视图的直接子视图。删除视图后，其父字段将被清除。例如：

```
ViewGroup parent = ...;
View child = ...;

assert(child.getParent() == parent); // <-- true

parent.removeView(child);

assert(child.getParent() == parent); // <-- false 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-25T11:17:01.640

不太确定我是否正确理解了您的问题，但是：

*   添加相对布局时，请务必先给它一个 id（在您的 layout.xml 文件中或从代码中）
*   要检查 中是否存在相关布局`ViewGroup`，请使用 ViewGroup 的`findViewById()`方法（继承自`View`）并将您提供给相关布局的 id 传递给它
*   如果返回null，则相对布局不存在，否则`findViewById()`会找到

所以简而言之，`findViewById()`它不仅是为一个 Activity 定义的，而且你可以在任何你想用作搜索起点的视图上调用它。

# ember.js - Ember Starter Kit with Ember Data

> ID：16212901
> 
> 赞同：1
> 
> 时间：2013-04-25T10:56:26.733
> 
> 标签：ember.js

Ember 1.0.0 RC3 ships with a Starter Kit with quite a simplistic demo to display three colors in a list.

The model data is inserted directly on the IndexRoute like this:

```
App.IndexRoute = Ember.Route.extend({
  model: function() {
    return ['red', 'yellow', 'blue'];
  }
}); 
```

I tried to change this simple demo to use ember-data (Models, Store, ...). However, with no success. The console output of my demo is:

```
DEBUG: ------------------------------- ember-1.0.0-rc.3.js:349
DEBUG: Ember.VERSION : 1.0.0-rc.3 ember-1.0.0-rc.3.js:349
DEBUG: Handlebars.VERSION : 1.0.0-rc.3 ember-1.0.0-rc.3.js:349
DEBUG: jQuery.VERSION : 1.9.1 ember-1.0.0-rc.3.js:349
DEBUG: ------------------------------- ember-1.0.0-rc.3.js:349
Uncaught TypeError: Cannot call method 'find' of undefined appDemo.js:8
Uncaught Error: assertion failed: an Ember.CollectionView's content must implement Ember.Array. You passed <(generated index controller):ember232> ember-1.0.0-rc.3.js:52 
```

My modified script looks like this:

```
App = Ember.Application.create();

App.Router.map(function() {
  // put your routes here
});

App.IndexRoute = Ember.Route.extend({
    model: App.Color.find()
});

App.ColorsController = Ember.ArrayController.extend();

// Models
App.Store = DS.Store.extend({
  revision: 12,
  adapter: 'DS.FixtureAdapter'
});

App.Color = DS.Model.extend({
  name: DS.attr('string')
});
App.Color.FIXTURES = [{name: 1}, {name: 2}, {name: 3}, {name: 4}, {name: 5}, {name: 6}]; 
```

My html looks like this:

```
<!DOCTYPE html>
<html>
<head>
<meta charset="utf-8">
<title>Ember Starter Kit</title>
  <link rel="stylesheet" href="css/normalize.css">
  <link rel="stylesheet" href="css/style.css">
</head>
<body>

  <script type="text/x-handlebars">
    <h2>Welcome to Ember.js</h2>

    {{outlet}}
  </script>

  <script type="text/x-handlebars" data-template-name="index">
    <ul>
    {{#each color in controller}}
      <li>{{color.name}}</li>
    {{/each}}
    </ul>
  </script>

  <script src="js/libs/jquery-1.9.1.js"></script>
  <script src="js/libs/handlebars-1.0.0-rc.3.js"></script>
  <script src="js/libs/ember-1.0.0-rc.3.js"></script>
  <script src="js/libs/ember-data-latest.js"></script>
  <script src="js/appDemo.js"></script>

</body>
</html> 
```

What am I doing wrong?

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-25T11:38:18.400

第一个错误在于

```
App.IndexRoute = Ember.Route.extend({
    model: App.Color.find()
}); 
```

您必须将模型选项定义为如下函数：

```
App.IndexRoute = Ember.Route.extend({
    model: function() {
        return App.Color.find();
    }
}); 
```

第二个错误我有点不确定，但先试试这个。

# html - How to resize in with float:left?

> ID：16212903
> 
> 赞同：1
> 
> 时间：2013-04-25T10:56:33.397
> 
> 标签：html, css, dynamic, height, width

I've got problem, how to automatic resize **height** of in .

***[Here](http://crazyones.tk/newshow1.html)*** I'am trying to make pure css slideshow, and its works, but when I scale browser window **width** changes and **height** - doesn't. Why? and how to fix this?

more of all I'll try to use different hack/advices and use a lot of them ***[here](http://crazyones.tk/newshow.html)***, but it didnt work. When I change **width manualy(in css), height changes**.

How to change height dynamic in this examples?

*p.s. sorry for my bad english...I hope you understand me...*

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-25T11:08:10.593

Now i have check to this

if i **remove this**

```
* {
-moz-box-sizing: border-box;
-webkit-box-sizing: border-box;
box-sizing: border-box;
} 
```

**than your slider is ok** ...

# jquery - Hide subset of background-images until children() are fully loaded with Jquery

> ID：16212908
> 
> 赞同：1
> 
> 时间：2013-04-25T10:56:46.863
> 
> 标签：jquery, html, list, background, preloading

I have some articles, each of them containig a list with multiple list items. Every list item has a background-image defined. The HTML looks something like this:

```
<article>
  <ul>
    <li><!-- background-image--></li>
    <li><!-- background-image--></li>
  </ul>
</article> 
```

I would like to hide those list items until every image is loaded and im trying to do so for each article.

My first attempt was to use two nested loops but it feels a bit akward and complicated.

```
function preloader() {

    $('article').each( function(i) {        

        $(this).addClass('loading');

        var childNum = $(this).find('ul li').size();

        $(this).find('ul li').each( function(n) {

            var bgurl = $(this).css('background-image').replace(/url\(|\)|"|'/g,'');

            $('<img/>').attr('src', bgurl).load(function() {

                if (n == childNum) {

                    // remove class .loading from current article
                }

            });                             
            n++;
        });
    });
} 
```

Is there a more elegant way of doing this ?

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-25T11:30:15.867

只需启动它们并在事件触发`visibility:hidden`时显示它们。`window.load`

**CSS**

```
.loading li{
    visibility:hidden;
} 
```

**HTML**

```
<article class="loading">
  <ul>
    <li><!-- background-image--></li>
    <li><!-- background-image--></li>
  </ul>
</article> 
```

和**jQuery**

```
$(window).load(function(){
   $('article.loading').removeClass('loading');
}); 
```

* * *

如果您想将每篇文章中的图像显示为已加载其自己的图像，那么您的代码非常接近，但您可以通过以下方式进行改进

*   同时处理`error`事件
*   缓存您的选择
*   在设置正确处理缓存图像之前绑定`load`和`error`事件`src`

这是一个实现

```
$(function () {
    var articles = $('article').addClass('loading');
    var urlRegExp = /(url\([\'\"]?)([^\'\"]+)/gi;

    articles.each(function(){
        var article = $(this),
            images = $('li', article).map(function(){
                return $(this).css('background-image').split(urlRegExp)[2];
            }).get(),
            imageCount = images.length;

        $.each(images, function(index, url){
           var img = new Image();
            $(img).on('load error', function(){
                imageCount--;
                if (imageCount === 0){
                    article.removeClass('loading');
                }
            })[0].src = url;
        });

    });
}); 
```

**演示在** [http://jsfiddle.net/gaby/2ATHQ/](http://jsfiddle.net/gaby/2ATHQ/)

# javascript - Variable Returning NaN Value - Cannot find out why

> ID：16212911
> 
> 赞同：1
> 
> 时间：2013-04-25T10:56:51.953
> 
> 标签：javascript

I am having to pickup from where someone in the business left off many years ago with an aging texting system.

It was built using ASP classic and sends a string to an API that then texts out, all this is neither here nor there. The problem i have is no JS experience, I am am a SQL Developer and did a little bit of ASP Classic (VBScript) years ago.

This piece of JScript picks up information from several form boxes and then places them in a string which is then passed to variable on a processing page to text out. The fields 'QValue, Indemnity and Excess' are all numeric. The Cover is text and it is replacing the cover text with 'NaN' now I understand this is for 'Not A Number' well that is exactly what it is, not a number but I want the text string.

Here is the snippet of code in question:

```
<script type="text/javascript">
function changeMessageText()
{

var messagetxt = document.getElementById('message').value

var QValue = document.getElementById('QValue').value
var Cover = document.getElementById('Cover').value
var Excess = document.getElementById('Excess').value
var Indem = document.getElementById('Indemnity').value

var messagetxt=messagetxt.replace("[QValue]", + QValue)
var messagetxt=messagetxt.replace("[Cover]", + Cover2)
var messagetxt=messagetxt.replace("[Excess]", + Excess)
var messagetxt=messagetxt.replace("[Indem]", + Indem)

document.getElementById('messageText').innerHTML = messagetxt;

}
</script> 
```

Cheers.

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-04-25T10:58:53.357

当你这样做时`string.replace(searchvalue,newvalue)`，就不需要`+`在`newValue`

```
var messagetxt=messagetxt.replace("[QValue]", QValue)
//cover or cover2 whichever appropriate
var messagetxt=messagetxt.replace("[Cover]",  Cover) 

var messagetxt=messagetxt.replace("[Excess]",  Excess)
var messagetxt=messagetxt.replace("[Indem]",  Indem) 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-25T11:04:16.390

在读取输入值并将其存储在**Cover**变量中的替换中使用**Cover2是否正常？**

 **这是两个不同的变量，根据您提供的代码，我们只能假设 Cover2 是用 NaN 初始化的（可能不是这种情况，它可能是复制/粘贴错误）。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-25T11:09:59.340

Here is how you do it:

```
var messagetxt = document.getElementById('message').value;

var QValue = document.getElementById('QValue').value
var Cover = document.getElementById('Cover').value

var messagetxt=messagetxt.replace("[QValue]", QValue)
var messagetxt=messagetxt.replace("[Cover]", Cover)

document.getElementById('messagetxt').innerHTML = messagetxt; 
```

Here is a working example of this: [http://jsfiddle.net/F24cr/](http://jsfiddle.net/F24cr/)

Enjoy**

# google-drive-api - Google Drive mobile offline app

> ID：16212912
> 
> 赞同：1
> 
> 时间：2013-04-25T10:56:57.460
> 
> 标签：google-drive-api

I'm developing a mobile app that will have hyperlinks to a user's Google Drive documents. If the mobile device is offline, will the hyperlinks still function if the mobile device owner has installed the Google Drive Android/iOS app? i.e. does document URL retrieved online work for offline access?

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-25T18:35:43.857

Google Drive Android/iOS 应用程序将在线文件下载到本地存储，并在设备离线时从本地文件系统提供服务。您应该遵循类似的方法。

# jquery - 下拉列表更改的批量状态更新

> ID：16212913
> 
> 赞同：0
> 
> 时间：2013-04-25T10:57:06.877
> 
> 标签：jquery, yii, cgridview

我有批量状态上传的下拉列表

```
echo CHtml::dropDownList('updateStatus',
                'updateStatus',
                Lookup::items('NodeStatus'),
                array(
                      'prompt' => '',
                      'ajax'=>array(
                                    'type'=>'POST',
                                    'url' => CController::createUrl('node/bulkStatus'),
                                    'data'=> array('updateStatus' => 'js:this.value', 'autoId' => 'js:$("input[name=autoId]:checked").map(function () {return this.value;}).get().join(",")'), 
                                    'success'=>'reloadGrid',
                                    'update'=>'#msg', //selector to update
                                    ),
                                )                          
                );
?> 
```

我正在努力获取上面 ajax 选项中输入复选框的所有选中值的值，如下所示：

```
<input id="autoId_6" type="checkbox" name="autoId[]" value="11">
<input id="autoId_5" type="checkbox" name="autoId[]" value="10">
<input id="autoId_8" type="checkbox" name="autoId[]" value="6"> 
```

我查看了 firebug 中的帖子， autoId 为空并且 updateStatus 工作正常。我想将 autoId 值作为数组发送到可以循环遍历数组的操作：

```
public function actionBulkStatus()
{ 
    if(isset($_POST['updateStatus']))
    {
        $autoIdAll = $_POST['autoId'];
        if(count($autoIdAll)>0)
        {
            foreach($autoIdAll as $autoId)
            {
                $model=$this->loadModel($autoId);
                $model->Status = $_POST['updateStatus'];
                $model->save();
            }
        }
        echo "successfully update";
    }
} 
```

如何在 dropDownList 的 ajax 数据选项中将 autoId 检查值作为数组传递？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-25T12:39:04.473

把事情简单化。Remove `.join(",")`from`.get().join(..)`和 checkboxes 名称应该是 just `autoId`, remove `[]`，你应该做的很好。

# windows-phone-7 - Cloud service for windows phone 7 apps

> ID：16212915
> 
> 赞同：0
> 
> 时间：2013-04-25T10:57:10.807
> 
> 标签：windows-phone-7, azure

In feb 2013 the windows azure toolkit for windows phone 7 apps has been suspended as per the [link](http://watwp.codeplex.com/)

Are there any cloud services that i can use instead of this azure on windows phone 7 apps ?

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-26T00:40:00.437

它没有被暂停，而是被取代。这意味着现在您可以使用[Windows Azure 移动服务](http://www.windowsazure.com/en-us/develop/mobile/)，因为它专门设计用于 Windows Phone 8 和 Windows Store 的应用程序。

就像使用“大房子”Azure 一样，您可以通过 SDK 使用 AMS：

*   [Windows Phone 8/Windows 应用商店](https://go.microsoft.com/fwLink/p/?LinkID=268375)
*   [Windows Phone 7.5](http://nuget.org/packages/WindowsAzure.MobileServices/0.3.3-rc) （预发布）

或者您可以通过标准[REST 层](http://msdn.microsoft.com/en-us/library/windowsazure/jj710108.aspx)访问它。

# android - 如何知道用户在 android 的 youtube api v2 中接受 oauth 权限

> ID：16212925
> 
> 赞同：3
> 
> 时间：2013-04-25T10:57:47.193
> 
> 标签：android, youtube-api, android-webview

我想在android中使用youtube api v2， 当我在webview中打开url时，按照[developers.google.com/youtube](https://developers.google.com/youtube/2.0/developers_guide_protocol_oauth2#OAuth2_Installed_Applications_Flow)`https://accounts.google.com/o/oauth2/auth?client_id=client_id&redirect_uri=redirect_uri&scope=https://gdata.youtube.com&response_type=code`，它要求访问应用程序。但我怎么知道用户是否接受它，因为在接受 webview 重定向到另一个页面后我可以得到`success code=4/fsgko348949`

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-26T10:26:26.050

我认为本教程很有用：

[http://blog.blundell-apps.com/tut-oauth-youtube-api-access/](http://blog.blundell-apps.com/tut-oauth-youtube-api-access/)

本教程展示了如何使用侦听器检测用户是否选择了“允许访问”：

```
package com.blundell.youtubesignin.oauth;

/**
 * This class checks what paramater's our redirect url has informing our listener
 * it also passes the auth code if access is granted.
 *
 * Google Documentation:
 * If the user granted access to your application,
 * Google will have appended a code parameter to the redirect_uri.
 * This value is a temporary authorization code that you can exchange for an access token.
 * example : http://localhost/oauth2callback?code=4/ux5gNj-_mIu4DOD_gNZdjX9EtOFf
 *
 * If the user refused to grant access to your application,
 * Google will have included the access_denied error message in the hash fragment of the redirect_uri.
 * example : http://localhost/oauth2callback#error=access_denied
 *
 * @author paul.blundell
 *
 */
public class ParamChecker implements OnOAuthCallbackListener {

    private final OnOAuthListener onOAuth;

    public ParamChecker(OnOAuthListener onOAuth) {
        this.onOAuth = onOAuth;
    }

    @Override
    public void onOAuthCallback(String params) {
        if(params.contains("access_denied")){
            // User said no
            onOAuth.onRefused();
        } else {
            // User auth'd us
            String authCode = extractAuthCode(params);
            onOAuth.onAuthorized(authCode);
        }
    }

    private static String extractAuthCode(String params) {
        return params.substring(Constants.AUTH_CODE_PARAM.length()+1);
    }

} 
```

# xpath - XPATH Error : Unable to evaluate expression

> ID：16212929
> 
> 赞同：0
> 
> 时间：2013-04-25T10:58:03.187
> 
> 标签：xpath

I have an xml like this as mentioned below. I am trying to obtain value for Cardnumber using following expression.

XPATH :

```
paymentService/ns0:submit/ns0:order/ns0:paymentDetails/ns0:VISA-SSL/cardNumber 
```

But it's giving me error. Can any1 guide me on this?

```
<?xml version="1.0" encoding="UTF-8"?>
<paymentService version="1.0">
    <ns0:submit xmlns:ns0="http://www.tibco.com/ns/no_namespace_schema_location/Payment/PaymentProcessors/WorldPay_CC/SharedResources/Schemas/paymentService_v1.dtd">
        <ns0:order>
            <description>description</description>
            <amount value="500" currencyCode="EUR" exponent="2"/>
            <ns0:paymentDetails>
                <ns0:VISA-SSL>
                    <cardNumber>00009875083428500</cardNumber>
                    <expiryDate>
                        <date month="02" year="2008"/>
                    </expiryDate>
                    <cardHolderName>test</cardHolderName>
                </ns0:VISA-SSL>
                <session shopperIPAddress="192.165.22.35" id=""/>
            </ns0:paymentDetails>
            <shopper>
                <browser>
                    <acceptHeader>text/html</acceptHeader>
                    <userAgentHeader>mozilla 5.0</userAgentHeader>
                </browser>
            </shopper>
        </ns0:order>
    </ns0:submit>
</paymentService> 
```

Thanks

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-25T11:38:01.077

~~你`xmlns:ns0`放错地方了，并且（想想这种方式）因为`ns0`是**在** `<ns0:submit>`标签之后定义的，`ns0:submit`是“未定义的”，因此是解析错误。~~

**编辑**：

如果你需要在 PHP 中使用这个 XPath，你要么必须在使用前声明命名空间：

```
<?xml version="1.0" encoding="UTF-8"?>
<paymentService version="1.0" xmlns:ns0="http://www.tibco.com/ns/no_namespace_schema_location/Payment/PaymentProcessors/WorldPay_CC/SharedResources/Schemas/paymentService_v1.dtd">
    <ns0:submit> 
```

或者在评估您的 XPath 之前注册命名空间（感谢@MiMo 指出）：

```
$xml->registerXPathNamespace("ns0","http://www.tibco.com/ns/no_namespace_schema_location/Payment/PaymentProcessors/WorldPay_CC/SharedResources/Schemas/paymentService_v1.dtd"); 
```

还要在 XPATH 之前添加一个斜杠：

```
/paymentService/ns0:submit/ns0:order/ns0:paymentDetails/ns0:VISA-SSL/cardNumber 
```

[先声明的](http://3v4l.org/XSerU)现场演示或[名称空间注册](http://3v4l.org/JtKca)的现场演示（均在 PHP 中演示）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-25T11:28:13.390

问题是节点

```
<paymentService version="1.0"> 
```

由于这没有结束，您必须对其进行评论或正确结束。如果您发表评论，请尝试使用此 XPATH

```
/ns0:submit/ns0:order/ns0:paymentDetails/ns0:VISA-SSL/cardNumber 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-25T13:34:48.310

您需要在评估 XPath 之前注册命名空间：

```
$xml->registerXPathNamespace('ns0', 'http://www.tibco.com/ns/no_namespace_schema_location/Payment/PaymentProcessors/WorldPay_CC/SharedResources/Schemas/paymentService_v1.dtd'); 
```

where`$xml`是一个`SimpleXMLElement`包含您的 XML 的变量。

您的 XPath 需要`/`按照 Passerby 的答案开始：

```
/paymentService/ns0:submit/ns0:order/ns0:paymentDetails/ns0:VISA-SSL/cardNumber 
```

# android - 读取图像并将其保存到 SQLite 数据库中

> ID：16212936
> 
> 赞同：0
> 
> 时间：2013-04-25T10:58:19.000
> 
> 标签：android, android-sqlite

嘿伙计们，我正在使用 android 从 SQLite 数据库中检索和保存图像。这是我的代码==>>

```
 public class MainActivity extends Activity implements OnClickListener {
            protected static TextView textView;
             protected static ImageView image1, image2;
           protected Button get_image, save_image, read_image;
           private String selectedImagePath;
           private static final int SELECT_PICTURE = 1;
           String DB_NAME = Environment.getExternalStorageDirectory() + "/test.db";
              String TABLE_NAME = "mytable";

    @Override
    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.activity_main);

        image1 = (ImageView) findViewById(R.id.imageView1);
        image2 = (ImageView) findViewById(R.id.imageView2);
        textView = (TextView) findViewById(R.id.textView1);

        get_image = (Button) findViewById(R.id.get_image);
        get_image.setOnClickListener(this);

        save_image = (Button) findViewById(R.id.save_image);
        save_image.setOnClickListener(this);

        read_image = (Button) findViewById(R.id.read_image);
        read_image.setOnClickListener(this);

    }

    public void onClick(View v) {

        int id = v.getId();
        switch (id) {

        case R.id.get_image:
            Intent intent = new Intent();
            intent.setType("image/*");
            intent.setAction(Intent.ACTION_GET_CONTENT);
            startActivityForResult(
                    Intent.createChooser(intent, "Select Picture"),
                    SELECT_PICTURE);
            break;

        case R.id.save_image:
            createTable();
            saveInDB();
            break;

        case R.id.read_image:
            readFromDB();
            break;
        default:
            break;

        }
    }

    public void onActivityResult(int requestCode, int resultCode, Intent data) {
        if (resultCode == RESULT_OK) {
            if (requestCode == SELECT_PICTURE) {
                Uri selectedImageUri = data.getData();
                selectedImagePath = getPath(selectedImageUri);
                System.out.println("Image Path : " + selectedImagePath);
                image1.setVisibility(View.VISIBLE);
                image1.setImageURI(selectedImageUri);
            }
        }
    }

    @SuppressWarnings("deprecation")
    public String getPath(Uri uri) {
        String[] projection = { MediaStore.Images.Media.DATA };
        Cursor cursor = managedQuery(uri, projection, null, null, null);
        int column_index = cursor
                .getColumnIndexOrThrow(MediaStore.Images.Media.DATA);
        cursor.moveToFirst();
        return cursor.getString(column_index);
    }

    void createTable() {
        SQLiteDatabase myDb = openOrCreateDatabase(DB_NAME,
                Context.MODE_PRIVATE, null);
        String MySQL = "create table if not exists "
                + TABLE_NAME
                + " (_id INTEGER primary key autoincrement, name TEXT not null, image BLOB);";
        myDb.execSQL(MySQL);
        myDb.close();
    }

    void saveInDB() {
        SQLiteDatabase myDb = openOrCreateDatabase(DB_NAME,
                Context.MODE_PRIVATE, null);
        byte[] byteImage1 = null;
        String s = myDb.getPath();

        myDb.execSQL("delete from " + TABLE_NAME);          // clearing the table
        ContentValues newValues = new ContentValues();
        String name = "CoderzHeaven";
        newValues.put("name", name);
        try {
            FileInputStream instream = new FileInputStream(selectedImagePath);
            BufferedInputStream bif = new BufferedInputStream(instream);
            byteImage1 = new byte[bif.available()];
            bif.read(byteImage1);
            newValues.put("image", byteImage1);
            long ret = myDb.insert(TABLE_NAME, null, newValues);
            if (ret < 0)
                textView.append("Error");
        } catch (IOException e) {
            textView.append("Error Exception : " + e.getMessage());
        }
        myDb.close();
        textView.append("\n Saving Details \n Name : " + name);
        textView.append("\n Image Size : " + byteImage1.length + " KB");
        textView.append("\n Saved in DB : " + s + "\n");
        Toast.makeText(this.getBaseContext(),
                "Image Saved in DB successfully.", Toast.LENGTH_SHORT).show();
    }

    void readFromDB() {
        byte[] byteImage2 = null;
        SQLiteDatabase myDb;
        myDb = openOrCreateDatabase(DB_NAME, Context.MODE_PRIVATE, null);
        Cursor cur = myDb.query(TABLE_NAME, null, null, null, null, null, null);
        cur.moveToFirst();
        while (cur.isAfterLast() == false) {
            textView.append("\n Reading Details \n Name : " + cur.getString(1));
            cur.moveToNext();
        }

        // /////Read data from blob field////////////////////
        cur.moveToFirst();
        byteImage2 = cur.getBlob(cur.getColumnIndex("image"));
        setImage(byteImage2);
        cur.close();
        myDb.close();
        Toast.makeText(this.getBaseContext(),
                "Image read from DB successfully.", Toast.LENGTH_SHORT).show();
        Toast.makeText(this.getBaseContext(),
                "If your image is big, please scrolldown to see the result.",
                Toast.LENGTH_SHORT).show();
    }

    void setImage(byte[] byteImage2) {
        image2.setImageBitmap(BitmapFactory.decodeByteArray(byteImage2, 0,
                byteImage2.length));
        textView.append("\n Image Size : " + byteImage2.length + " KB");
    }

} 
```

我面临的问题是，当我尝试执行上述代码时，我无法从/保存到 sqlite 数据库中的图像。我能够从图库中获取图像。我卡住了，请帮帮我。

谢谢你 ：）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-25T11:56:35.077

我只更改了数据库存储位置.. 它有效。

尝试这个...

```
 SQLiteDatabase myDB = MainActivity.this.openOrCreateDatabase("test.db",//your db file name
            MainActivity.this.MODE_PRIVATE, null); 
```

# php - 如何使用会话变量输出登录用户名

> ID：16212937
> 
> 赞同：0
> 
> 时间：2013-04-25T10:58:24.793
> 
> 标签：php, session

我正在构建一个应用程序，并且刚刚添加了一个运行良好的登录页面，它与数据库中的“用户名”和“密码”字段进行通信。登录后，您将获得一个用户有权查看的页面。

有没有办法可以向在下一页登录的特定用户显示“欢迎，xxx”？更重要的是，在下一页输出登录用户的详细信息？谢谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-25T11:02:44.623

您可以使用[SESSION](http://www.php.net/manual/en/session.examples.basic.php)来临时存储跨页面可以看到的数据.... 在检查成功登录凭据后，您可以将用户数据存储在会话中

```
<?php
     session_start();     
     $_SESSION['username'] = $user_name;
    ?> 
```

在会话中存储用户数据后，您现在可以跨不同页面访问这些数据，直到您取消设置这些会话数据

```
<?php 
session_start();     
if (!isset($_SESSION['username'])) {
   echo 'Welcome, '.$_SESSION['username']; 
} else {
echo 'Sorry, You are not logged in.';
}
?> 
```

当用户注销时，注销这些会话变量。可以通过以下方式注销会话变量：

```
<?php
session_start();
unset($_SESSION['username']);
?> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-25T11:02:17.353

只需验证会话并从数据库中调用相应的用户。假设您在会话中使用用户名

```
$_SESSION['loggedin'] = 'USERNAME'; 
```

因此，您只需运行一个查询，即可使用 mysql 查询从数据库中调用用户名和其他信息，例如

```
$user =$_SESSION['loggedin'];
mysql_query("SELECT * FROM TABLENAME WHERE user = '$user'"); 
```

这只是一个示例。我建议使用 salt 并加密您的会话，然后调用查询。也使用 mysqli /PDO，因为不推荐使用 mysql。以上只是示例

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-25T11:02:59.973

您是否听说过 PHP 会话，您可以像这样将用户名放入会话中

```
$_SESSION['username'] 
```

在您注销之前，可以在后续页面请求中使用它。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-04-25T11:03:07.463

是的，你可以做到这一点。我希望当您检查有效的用户名和密码时，您在会话变量中设置用户名或用户详细信息。如果您设置了变量，您始终可以打印该会话变量。确保您已在页面开头开始会话。

例如，如果您已设置

```
$_SESSION['user'] = 'Ram'; 
```

你可以简单地打印

```
echo $_SESSION['user']; 
```

# unix - 如何在 shell 脚本中打印特定列的数量？

> ID：16212950
> 
> 赞同：0
> 
> 时间：2013-04-25T10:59:07.300
> 
> 标签：unix, sed, awk

我有一个文本文件 temp1 并说它有 20 多列，它的数值如下所示，

```
1,0,3,0,5........,
1,0,5,0,8........,
3,0,6,0,3........,
5,0,6,0,4........,
................., 
```

我想删除总和为零的列，我需要将剩余的列重定向到新文件

即：例如上面第 2 列和第 4 列的总数为零，因此我需要删除第 2 列和第 4 列并将其重定向到单独的文件。

有人可以帮我吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-25T15:13:19.563

```
$ cat file
1,0,3,0,5
1,0,5,0,8
3,0,6,0,3
5,0,6,0,4

$ awk -f tst.awk file
1,3,5
1,5,8
3,6,3
5,6,4

$ cat tst.awk
BEGIN{ FS="," }
{
    for (j=1;j<=NF;j++) {
        val[NR,j] = $j
        sum[j] += val[NR,j]
    }
}
END {
    for (i=1;i<=NR;i++) {
        ofs = ""
        for (j=1;j<=NF;j++) {
            if (sum[j]) {
                printf "%s%s",ofs,val[i,j]
                ofs = FS
            }
        }
        print ""
    }
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-25T12:07:54.610

这是使用`awk`. 像这样运行：

```
awk -f ./script.awk file{,} 
```

内容`script.awk`：

```
BEGIN {
    FS=","
}

FNR==NR {
    for(i=1;i<=NF;i++) {
        if ($i != 0) {
            a[i]
        }
    }
    next
}

{
    for(j=1;j<=NF;j++) {
        if (j in a) {
            printf "%s%s", $j, (j==NF ? RS : FS)
        }
    }
} 
```

或者，这是单线：

```
awk -F, 'FNR==NR { for(i=1;i<=NF;i++) if ($i != 0) a[i]; next } { for(j=1;j<=NF;j++) if (j in a) printf "%s%s", $j, (j==NF ? RS : FS) }' filex{,} 
```

内容`file`：

```
1,0,3,0,5,0
1,0,5,0,8,1
3,0,6,0,3,2
5,0,6,0,4,5 
```

结果：

```
1,3,5,0
1,5,8,1
3,6,3,2
5,6,4,5 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-25T11:24:36.563

您可以使用 awk ：（以下内容*很难*看，但我希望可读。这就是目标。我让更好的 awkist 进一步增强/减少它）

如果数据在文件中`/path/to/zefile`：

```
awk -F',' '  
      FNR==NR { for (col=1;col<=NF;col++)
                   { if ($col != 0) 
                        {wewantthiscolumn[col]=1 } 
                   }
                next
              }

              { for (col=1;col<=NF;col++) 
                   { if (wewantthiscolumn[col]==1) 
                        { printf ("%s,",$col) } 
                   }
                print "" 
              }' /path/to/zefile /path/to/zefile | sed -e 's/,$//' 
```

这个想法：我们在 /path/to/zefile /path/to/zefile 上启动 awk（因此，它读取了两次）。

在第一遍中，我们创建了一个“wewantthiscolumn”数组。只要该列与 0 不同，该数组就包含“1”。“下一个”确保我们仅在 FNR（=当前文件中的行数）== NR（=总行数）时执行此位，这仅在第一次通过时是正确的。

在第二遍（因此我们直接进入第二个 { } ，因为现在 NR>FNR）：我们只显示`$col`具有对应的列值`wewantthiscolumn(col)==1`，然后是一个“，”（所以有一个小问题：最后一个列后面会有一个“，”）

然后我们通过 sed 传递它以去掉 ",$" 位。

我不确定有没有更好的方法：awk 可以删除一个字段吗？所以它可以在第二遍删除字段 col 吗？然后打印结果 $0 会容易得多，设置`OFS=','`为将它们与`,`...分开

这将使第二次通过：

```
 awk -F',' '  
      FNR==NR { for (col=1;col<=NF;col++)
                   { if ($col != 0) 
                        {wewantthiscolumn[col]=1 } 
                   }
                next
              }

              { for (col=1;col<=NF;col++) 
                   { if (wewantthiscolumn[col]==0) 
                        $col="DELETETHIS"
                   }
                gensub(",DELETETHIS","",g)
                gensub("DELETETHIS,","",g)
                print $0 
              }' /path/to/zefile /path/to/zefile 
```

我不想假设没有列可以是空的，因此我使用“DELETETHIS”来确保我只删除相关字段......但这意味着第一种方式实际上更简单^^：只打印你需要的字段，然后去掉行尾的“，”。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-04-25T12:02:19.967

使用python的解决方案：

```
#!/usr/bin/env python

def transpose(grid):
    return zip(*grid)

def removeBlankRows(grid):
    return [list(row) for row in grid if any(map(int,row))]

grid = []
with open("input.csv") as fd:
    for line in fd:
        grid.append(line.strip().split(','))

data = removeBlankRows(transpose(removeBlankRows(transpose(grid))))

for i in data:
    print ",".join(i) 
```

输入：

```
1,0,3,0,5
1,0,5,0,8
3,0,6,0,3
5,0,6,0,4 
```

输出：

```
1,3,5
1,5,8
3,6,3
5,6,4 
```

输入：

```
1,0,3,0,5
1,0,5,0,8
3,0,6,0,3
5,0,6,1,4 
```

输出：

```
1,3,0,5
1,5,0,8
3,6,0,3
5,6,1,4 
```

# c# - 页面重定向到子域文件夹

> ID：16212951
> 
> 赞同：0
> 
> 时间：2013-04-25T10:59:11.937
> 
> 标签：c#, asp.net

我有在用户退出时重定向用户的代码：

```
 if (IsRequestedPage("Login") && Authorization.IsAuthenticated())
            {
                Response.Redirect("CalendarView.aspx");
            }
            else if (LibKezberProjectManager.Data.Context.NeedsFirstUse() && !IsRequestedPage("FirstUse"))
            {
                Response.Redirect("FirstUse.aspx");
            }
            else if (!Authorization.IsAuthenticated() && !IsRequestedPage("Login") && !LibKezberProjectManager.Data.Context.NeedsFirstUse())
            {
                string fileName = this.Page.Request.Url.ToString();
                fileName = fileName.Remove(0, fileName.LastIndexOf("/") + 1);

                Response.Redirect("Login.aspx?redirect=" + fileName);
            }
        }
        public bool IsRequestedPage(string pageName)
        {
            return Request.RawUrl.Contains(pageName + ".aspx");
        }

protected void lnkSignOut_Click(object sender, EventArgs e)
{
    Authorization.Logout();
    Response.Redirect("Login.aspx?logout=true");
} 
```

当我退出时，在某些页面中，而不是带我去：

```
kezblu.mysite.com/Login.aspx?logout=true 
```

我最终在：

```
kezblu.mysite.com/kezblu/Login.aspx?logout=true 
```

我无法在本地进行调试...我没有 IIS 服务器。

什么可能导致这种情况？

它应该始终重定向到 kezblu.mysite.com/Destination.aspx

我没有任何附加子域目录的代码。

谢谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-25T11:23:57.733

您是否尝试过使用`Response.Redirect("~/Login.aspx?logout=true")`？

`~/`前缀对应于您的 Web 应用程序的根。

# android - 导入 HoloEverywhere 时出现问题

> ID：16212952
> 
> 赞同：1
> 
> 时间：2013-04-25T10:59:12.780
> 
> 标签：android, android-holo-everywhere

我正在关注本指南： [https ://stackoverflow.com/a/10888882/1943607](https://stackoverflow.com/a/10888882/1943607)

> 按照以下步骤添加 HoloEverywhere
> 
> 从 GitHub 下载 Zip 到您的计算机解压缩文件夹 转到 eclipse 并选择 File->New-> Android Project
> 
> 选择从现有源创建项目，然后浏览到提取文件夹内的 HoloEverywhereLib 文件夹
> 
> 按完成
> 
> 右键单击新创建的项目并转到属性。在 Android 标题下，您应该会看到带有复选框 IsLibrary 的 Library 部分。确保选中并按添加和之前添加的库 ActionBarSherlock。

我解压了文件夹。然后去 eclipse -> 右键单击​​ -> Import -> Android -> Existing Android Code into Workspace。我选择解压缩的文件夹，它显示了这个： ![在此处输入图像描述](https://i.stack.imgur.com/0xo1B.png)

当我单击完成时： ![在此处输入图像描述](https://i.stack.imgur.com/k9uL0.png)

然后如果我创建一个新项目并尝试导入它，它找不到库；我键入`org.`，但它没有显示其余部分（org.holoeverywhere.app.***Activity）。（就像它的 github 说的那样[https://github.com/Prototik/HoloEverywhere#how-to-use-maven](https://github.com/Prototik/HoloEverywhere#how-to-use-maven)）

你能帮我吗？

**编辑：我也尝试从 .classpath 文件中删除 src ，结果相同**

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-09-08T22:51:03.307

使用 Github 桌面克隆存储库。在 Eclipse 上安装 eGit。然后使用 import-->Git-->Projects from Git。

# c++ - C++ 只读文件中的随机行

> ID：16212958
> 
> 赞同：0
> 
> 时间：2013-04-25T10:59:37.640
> 
> 标签：c++, c++11, c++builder

我需要读取文本文件，但它太大了，所以我决定只读取这个文件中的一些行。我可以使用 seek 方法来跳转给定的行吗？然后我只能读取该行，因为该文本文件太大，读取整个文件会浪费大量时间。如果不可能，有人会为此提供更好的解决方案吗？（寻找给定的行并阅读它）（我知道二进制文本文件正在逐字节读取）

我的档案前

```
event1 0

subevent 1

subevent 2

event2  3 
```

（在一个事件之后的我的文件中，它显示我想寻找前一个事件的行数）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-25T11:06:18.603

是的，您可以查找文件中的某个点，然后从那里读取。一个可能的问题是，如果行的长度都不同，则文件中的随机位置将有更高的概率位于较长的行中：您不会得到不同行的均匀分布概率。如果您真的必须具有相同的概率，那么您需要至少遍历文件以找到每一行的开头 - 然后您可以将这些偏移量存储在一个向量中并随机选择一个向量元素来指导寻找行数据在文件中。如果您只关心一点点，那么您也许可以将少量但随机的行数超过您最初寻求的行……这会增加一些可能性，避免最初的通过，但并不完美。汉斯玛德

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-26T12:31:45.103

据我所知，在不知道线路在哪里的情况下，没有内置的方法可以寻找新线路。我无法告诉您实现目标的*最佳方法，因为您的大多数问题都详细**说明了*您如何尝试实现目标，而不是*您*实际想要实现的目标。因此，我可能会采用以下两种方式之一：

1）如果您确实需要文件中的每一位数据（没有可以丢弃的元数据或其他信息）：

有人提到扫描文件，跟踪行，并用它建立索引，这样你就可以一次读取一行。这可能会奏效，如果您实际上需要完整的每一行，或者您只需要行号并计划从那里一次读取小块，这将是可行的方法。但是，在不了解您的约束或要求的详细信息的情况下，我不建议使用此方法阅读整行，原因有一个：我无法知道一行本身不会太大而无法加载（如果只有文件中的一行？）。

相反，我将简单地分配一个大小合适的缓冲区，一次处理，并以该大小的块处理文件，直到你到达最后。您可以随时输入更多数据。如果没有其他详细信息，我无法告诉您该幻数应该是多少，但是您可能需要处理的最大信息块的大小至少是一个很好的起点。

2）如果您不需要文件中的每一位数据（您可以丢弃其中的一些信息），那么您只需要其中的一些。如果您只需要选择的数据片段，那么如果它们被标记（这就是 XML 的用途），则更容易找到它们。有很多免费的 XML 解析器，或者您可以编写自己的。然后，您将搜索标签而不是任意行号，并且对导致数据位于不同位置的文件的更改不会影响您找到它的能力，如果它被标记，就像您只是要去按行号。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-25T11:05:23.167

除非每条线的长度完全相同，否则您将不得不扫描它。

如果您想在其中跳转，您可以扫描它，将每行的偏移量保存在您选择的容器中，然后使用它来寻找特定的行。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-04-25T11:06:54.553

假设这些行是可变/随机长度的，我不相信有任何内置方法可以直接跳转到特定行的开头。您可以查找文件中的任意*字节位置*。但是，这可能会落在一行的开头/中间/结尾的任何位置。

我最好的建议是分两步解决问题：

首先，逐字节完整地遍历文件，搜索每一行的开头。记录每行的字节位置并将其存储到数组、向量等中。（基本上，您正在创建一个从行号映射到起始位置的索引。）然后，当您建立了这个索引时，您可以轻松跳转通过查找索引中的位置，到特定的行。

# ios - 使 iOS 两指滑动类似于苹果的四指滑动以在应用程序之间切换

> ID：16212963
> 
> 赞同：2
> 
> 时间：2013-04-25T10:59:54.767
> 
> 标签：ios, ipad, core-animation, uiswipegesturerecognizer

大家好，我们都知道 iOS 四指滑动可在应用程序之间切换

![在此处输入图像描述](https://i.stack.imgur.com/wSFiY.jpg)

我打算做类似的事情，当我做两指滑动时，我将做与四指滑动相同的事情，但在应用程序中，我将在两个视图控制器之间切换，这应该是动画，两个视图控制器在滑动过程中应该可见。![在此处输入图像描述](https://i.stack.imgur.com/uiR3F.png) **所以基本上应用程序内部会有两个迷你应用程序，用户应该能够随时在它们之间切换。**

我正在尝试一些事情，同时如果您尝试或做过类似的事情，请分享您的想法。我也在应用程序中使用复杂的手势，所以这种手势识别不应该与其他人发生冲突。

我现在正在尝试的代码

```
-(void)addSwipeToToggle
{
    UIPanGestureRecognizer *toggleSwipe=[[UIPanGestureRecognizer alloc]initWithTarget:self action:@selector(screenToggled)];
    toggleSwipe.minimumNumberOfTouches=2;
    toggleSwipe.maximumNumberOfTouches=3;
    [self.window addGestureRecognizer:toggleSwipe];
}

-(void)screenToggled
{
    UIViewController *dummyController=[[UIViewController alloc]init];
    dummyController.view.backgroundColor=[UIColor redColor];
    self.window.rootViewController=dummyController;
    [self.window makeKeyAndVisible];
} 
```

# python - 在 Python 中的两个十六进制值之间递增（迭代）

> ID：16212965
> 
> 赞同：11
> 
> 时间：2013-04-25T10:59:55.930
> 
> 标签：python, hex, iteration, increment

我正在学习 Python（缓慢但肯定），但需要编写一个程序，该程序（除其他外）在两个十六进制值之间递增，例如 30D681 和 3227FF。我很难找到最好的方法来做到这一点。到目前为止，我在这里看到了一段代码，它将十六进制分成 30、D6 和 81，然后像这样工作-

```
char = 30
 char2 = D6
  char3 = 81

 def doublehex():
    global char,char2,char3
    for x in range(255):
        char = char + 1
        a = str(chr(char)).encode("hex")
        for p in range(255):
           char2 = char2 + 1
           b = str(chr(char2)).encode("hex")
        for y in range(255):
           char3 = char3 + 1
           b = str(chr(char2)).encode("hex")
           c = a+" "+b
           print "test:%s"%(c)
doublehex() 
```

有没有一种更简单的方法来增加整个值，例如

```
char = 30D681
 char2 = 3227FF

 def doublehex():
    global char,char2
   for x in range(255):
        char = char + 1
        a = str(chr(char)).encode("hex")
        for p in range(255):
           char2 = char2 + 1
           b = str(chr(char2)).encode("hex")
           c = a+" "+b
           print "test:%s"%(c)
doublehex() 
```

为我的完全无知道歉，我真的尝试过用谷歌搜索答案但找不到......

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2013-04-25T11:14:10.467

只需将这些值视为整数，并用于`xrange()`在两个值上进行范围。用于`format(value, 'X')`将其*显示*为十六进制：

```
start = 0x30D681  # hex literal, gives us a regular integer
end = 0x3227FF

for i in xrange(start, end + 1):
    print format(i, 'X') 
```

如果您的开始和结束值是作为十六进制字符串输入的，请先使用`int(hexvalue, 16)`将它们转换为整数：

```
start = int('30D681', 16)
end = int('3227FF', 16) 
```

# c++ - 使用 OpenGL 的 C++ - 绘制正方形

> ID：16212971
> 
> 赞同：-2
> 
> 时间：2013-04-25T11:00:00.627
> 
> 标签：c++, visual-studio, opengl

我必须编写一个程序来绘制一个可以改变颜色的正方形。该程序将绘制一个白色背景的窗口，尺寸为 256x256 像素，一个红色正方形，左上顶点坐标 (x, y) = (30, 226) 右下角坐标 (x, y) = (226 , 30 ）。当按下“a”键（keycode = 97）时，方块应保持蓝色。当按下“v”键（keycode = 118）时，方块应该变回红色。当按下 ESC 键 (keycode = 27) 时，程序应该终止。

——有日志……

```
Build Log     
Build started: 
Project: square, Configuration: Debug|Win32

Command Lines      
Creating temporary file "c:\Users\TEMP\Documents\Visual Studio 2008\Projects\square\square\Debug\RSP00000544445896.rsp" with contents
[
/OUT:"C:\Users\TEMP\Documents\Visual Studio 2008\Projects\square\Debug\square.exe" /MANIFEST /MANIFESTFILE:"Debug\square.exe.intermediate.manifest" /MANIFESTUAC:"level='asInvoker' uiAccess='false'" /DEBUG /PDB:"C:\Users\TEMP\Documents\Visual Studio 2008\Projects\square\Debug\square.pdb" /DYNAMICBASE /NXCOMPAT /MACHINE:X86 kernel32.lib user32.lib gdi32.lib winspool.lib comdlg32.lib advapi32.lib shell32.lib ole32.lib oleaut32.lib uuid.lib odbc32.lib odbccp32.lib

".\Debug\square.obj"
]
Creating command line "link.exe @"c:\Users\TEMP\Documents\Visual Studio 2008\Projects\square\square\Debug\RSP00000544445896.rsp" /NOLOGO /ERRORREPORT:PROMPT"

Output Window    
Linking...
square.obj : error LNK2019: unresolved external symbol __imp____glutInitWithExit@12 referenced in function _glutInit_ATEXIT_HACK@8
square.obj : error LNK2019: unresolved external symbol __imp____glutCreateWindowWithExit@8 referenced in function _glutCreateWindow_ATEXIT_HACK@4
C:\Users\TEMP\Documents\Visual Studio 2008\Projects\square\Debug\square.exe : fatal error LNK1120: 2 unresolved externals

 Results     
 Build log was saved at "file://c:\Users\TEMP\Documents\Visual Studio 2008\Projects\square\square\Debug\BuildLog.htm"
square - 3 error(s), 0 warning(s) 
```

代码：

```
#include <GL/glut.h>

// Function callback that is called to manage the keyboard tasks
float r = 0.0f;
float g = 0.0f;
float b = 0.0f;
void GerenciaTeclado(unsigned char key, int x, int y)
{
    switch (key) {
    case 'a':// change the actual color to red
        r = 1.0f;
        g = 0.0f;
        b = 0.0f;
        break;
    case 'v':// change de color to blue
        r = 0.0f;
        g = 0.0f;
        b = 1.0f;
        break;
    case 27:// close the screen
        exit(0);
        break;
    }
    glutPostRedisplay();
}

// Function callback that is called to draw
void Desenha(void)
{
    // Clean the window
    glClearColor(0.0f, 0.0f, 0.0f, 1.0f);
    glClear(GL_COLOR_BUFFER_BIT);

    // Initializes the coordinates system
    glMatrixMode(GL_PROJECTION);
    glLoadIdentity();
    double w = glutGet( GLUT_WINDOW_WIDTH );
    double h = glutGet( GLUT_WINDOW_HEIGHT );
    double ar = w / h;
    glOrtho( -2 * ar, 2 * ar, -2, 2, -1, 1);

    glMatrixMode(GL_MODELVIEW);
    glLoadIdentity();

    // Draw a square
    glBegin(GL_QUADS);
    // Shows that the color is red
    //        R  G  B
    glColor3f(r, g, b);
    glVertex2f(-1, -1);
    glVertex2f( 1, -1);
    // Shows that the color is blue
    glColor3f(0.0f, 0.0f, 1.0f);
    glVertex2f( 1, 1);
    glVertex2f(-1, 1);
    glEnd();

    glutSwapBuffers();
}

// Main Program
int main( int argc, char** argv )
{
    glutInit( &argc, argv );
    glutInitDisplayMode(GLUT_DOUBLE | GLUT_RGB);
    glutInitWindowSize(256,256);
    glutInitWindowPosition(10,10);
    glutCreateWindow("Quadrado");
    glutDisplayFunc(Desenha);
    glutKeyboardFunc(GerenciaTeclado);
    glutMainLoop();
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-25T11:31:23.947

使用 GLUT 构建内容时，您需要将代码与 glut 库链接。尝试谷歌如何将视觉工作室与其他第三方库链接。在您的情况下，我相信您将需要添加另一个库目录，而不是在项目链接器属性中添加一个额外的依赖项（glut.lib）。

# java - 使用较旧的 JAVA API 进行正则表达式匹配

> ID：16212972
> 
> 赞同：0
> 
> 时间：2013-04-25T11:00:01.057
> 
> 标签：java, regex, string

我试图在我的字符串中用“替换”。我在用

```
java.util.regex.Pattern.compile("\\\"").matcher(myString).replaceAll("\\\\\"") 
```

当我使用较新版本的 JAVA 时，它适用于我的开发机器。在测试机器上它会抛出 NoClassDefFounError 。与生产环境非常相似的测试机器具有旧版本的 JAVA。我不确定它是哪个版本。

我也试过，

```
myString.replaceAll("\\\"","\\\\\""); 
```

它抛出 NoSuchMethod 异常。这也是同样的问题

```
myString.matches() 
```

有人可以帮我解决在旧 JAVA 版本中使用正则表达式的方法吗？

提前致谢..

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-25T11:41:19.450

从问题中的症状来看，您很可能在比 1.4 版本**更早**[`java.util.regex`](http://docs.oracle.com/javase/6/docs/api/java/util/regex/package-summary.html)的 JVM 上运行，也就是引入包的时候。我认为您可以尝试推动他们升级系统，因为 1.4 版本[于 11 年前的 2002 年首次发布](http://en.wikipedia.org/wiki/Java_version_history#J2SE_1.4_.28February_6.2C_2002.29)。

现在，您可以使用`String.indexOf`and ¹。这不是很漂亮，但足以用于固定字符串搜索和替换²。[`StringBuffer`](http://docs.oracle.com/javase/1.5.0/docs/api/java/lang/StringBuffer.html)

如果你坚持使用正则表达式，[JRegex 库](http://jregex.sourceforge.net/index.html)值得一试。该网站声称它适用于任何版本的 Java，并且它支持的正则表达式功能非常丰富。

**脚注**

¹ [`StringBuilder`](http://docs.oracle.com/javase/1.5.0/docs/api/java/lang/StringBuilder.html)仅适用于 Java 1.5

² [`String.replace(CharSequence target, CharSequence replacement)`](http://docs.oracle.com/javase/6/docs/api/java/lang/String.html#replace%28java.lang.CharSequence,%20java.lang.CharSequence%29)，它用另一个固定字符串替换一个固定字符串，仅在 Java 1.5 中可用。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-30T11:02:05.757

在这里，回答我自己的问题。

实现以下简单代码以有效地转义双引号（即用 \" 替换“）并且还忽略已经转义的引号。

```
int index = myString.indexOf('"');

while(index != -1){     
    if(index == 0 || myString.charAt(index-1) != '\\'){
        myString= myString.substring(0,index)+"\\\""+myString.substring(index+1);  //Escaping the double quote if any in the string
        index = myString.indexOf('"', index+2);
    }
    else{
        index = myString.indexOf('"', index+1);
    }
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-09-23T06:10:22.643

那么，Java 1.3 没有 String.replaceAll 吗？我们可以自己写吗？

```
public class StringReplaceAll {

    public static String replaceAll(String text, String find, String replace) {
        if (text == null || find == null || replace == null) {
            throw new NullPointerException();
        }
        if (find.length() == 0) {
            throw new IllegalArgumentException();
        }
        int start = 0;
        int end = text.indexOf(find, start);
        if (end == -1) {
            return text;
        }
        int findLen = find.length();
        StringBuffer sb = new StringBuffer(text.length());
        while (end != -1) {
            sb.append(text.substring(start, end));
            sb.append(replace);
            start = end + findLen;
            end = text.indexOf(find, start);
        }
        sb.append(text.substring(start));
        return sb.toString();
    }

    public static void assertEquals(String s1, String s2) {
        if (s1 == null || s2 == null)
            throw new RuntimeException();
        if (!s1.equals(s2))
            throw new RuntimeException("<" + s1 + ">!=<" + s2 + ">");
    }

    public static void main(String[] args) {
        assertEquals("lazy fox jumps lazy dog",
                replaceAll("quick fox jumps quick dog",
                        "quick",
                        "lazy"));

        assertEquals("quick fax jumps quick dag",
                replaceAll("quick fox jumps quick dog", "o", "a"));

        assertEquals("",
                replaceAll("quick fox jumps quick dog",
                        "quick fox jumps quick dog",
                        ""));

        assertEquals("quick fox jumps quick dog",
                replaceAll("quick fox jumps quick dog", "zzz", "xxx"));

        assertEquals("quick fox jumps quick cat",
                replaceAll("quick fox jumps quick dog", "dog", "cat"));

        assertEquals("zzzzzzzzzzzzzzzzzzzzzzzzz",
                replaceAll("aaaaaaaaaaaaaaaaaaaaaaaaa", "a", "z"));

        assertEquals("zzzz", replaceAll("aa", "a", "zz"));

        assertEquals("", replaceAll("", "a", "z"));

        try {
            replaceAll(null, "a", "z");
            throw new RuntimeException();
        } catch (NullPointerException e) {
        }

        try {
            replaceAll("a", "z", null);
            throw new RuntimeException();
        } catch (NullPointerException e) {
        }

        try {
            replaceAll("a", null, "z");
            throw new RuntimeException();
        } catch (NullPointerException e) {
        }

        try {
            replaceAll("a", "", "z");
            throw new RuntimeException();
        } catch (IllegalArgumentException e) {
        }
    }
} 
```

# sql-server-2008 - 是否可以使用单个更新语句更新包含多个条件的表值

> ID：16212976
> 
> 赞同：0
> 
> 时间：2013-04-25T11:00:02.473
> 
> 标签：sql-server-2008, oracle11g

```
Table

ID    DESC
1     Male
2     Male
3     Male
4     Female
5     Female
6     Female
7     Female 
```

我需要使用一个更新语句将男性更新为女性，将女性更新为男性。请就此提出建议。提前致谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-25T11:33:43.927

尝试这个

```
UPDATE Table
SET DESC  = CASE 
    WHEN DESC= 'Male' THEN 'Female'
    WHEN DESC  = 'Female' THEN 'Male'
    ELSE DESC        
  END 
```

输出如下

```
ID    DESC

1     Female
2     Female
3     Female
4     Male
5     Male
6     Male
7     Male 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-25T11:17:28.457

是的，您可以使用**case**语句来做到这一点

```
UPDATE TABLE
SET DESC = CASE WHEN DESC = 'MALE' THEN 'Female' WHEN DESC = 'Female' THEN 'MALE' ELSE DESC END 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-25T11:16:14.813

对于 SQL 服务器

```
update tbl
SET DESC  = CASE 
    WHEN DESC= 'Male' THEN 'Female'
    WHEN DESC  = 'Female' THEN 'Male'
    ELSE DESC        
  END 
```

# android - 如何阻止 GridView 裁剪我的图像？

> ID：16212978
> 
> 赞同：0
> 
> 时间：2013-04-25T11:00:03.237
> 
> 标签：android, android-gridview

我有一个填充了 64 个 60x60px png 的 GridView。我希望 GridView 将它们全部显示为尽可能接近完美的正方形，因此我将 XML 中的 numColumns 设置为 8，所以现在我有一个 8x8 网格。

这是它的样子：

![在此处输入图像描述](https://i.stack.imgur.com/nRIVx.jpg)

我的图像实际上在边缘有一个小边框，尽管它被裁剪掉了。在这里，我在左上角的图像上绘制了它们显示时的样子：

![在此处输入图像描述](https://i.stack.imgur.com/c2vIS.jpg)

这是我的 XML：

```
 <RelativeLayout xmlns:android="http://schemas.android.com/apk/res/android"
    xmlns:tools="http://schemas.android.com/tools"
    android:id="@+id/textFieldFU"
    android:layout_width="match_parent"
    android:layout_height="match_parent"
    android:paddingBottom="@dimen/activity_vertical_margin"
    android:paddingLeft="@dimen/activity_horizontal_margin"
    android:paddingRight="@dimen/activity_horizontal_margin"
    android:paddingTop="@dimen/activity_vertical_margin"
    tools:context=".MainActivity" >

    <GridView
    android:id="@+id/gridview"
    android:layout_width="fill_parent" 
    android:layout_height="600dp"
    android:numColumns="8"
    android:verticalSpacing="10dp"
    android:horizontalSpacing="0dp"
    android:stretchMode="columnWidth"
    android:gravity="center"
/>

</RelativeLayout> 
```

当我使用 40x40px 和 50x50px 大小的 png 时，它们工作得很好，但它们太小而无法轻易看到我的小符号。我已经更改了 XML 中我能想到的所有内容，但是无论我给多少间距或在哪里给它，即使有足够的空间，图像也会保持裁剪。

如何让 GridView 显示完整的、未裁剪的图像？

为了爱所有神圣的事物，我真的很笨。我忘记了在我设置的“ImageAdapter”类中使用了 ImageView setLayoutParams 方法并将它们设置为 (50, 50)。很抱歉浪费了你们好人的时间。

```
@Override
public View getView(int position, View convertView, ViewGroup parent) {
    ImageView iv;
    if (convertView != null) {
        iv = (ImageView) convertView;
    } else {
        iv = new ImageView(context);
        ******iv.setLayoutParams(new GridView.LayoutParams(50, 50));******
        iv.setScaleType(ScaleType.CENTER);
        iv.setPadding(0, 0, 0, 0);
    }
    iv.setImageResource(images[position]);
    return iv;
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-25T12:34:21.720

要使用 flowlayout `FlowLayout`，请在 android 中创建一个称为自定义控件的 java 类。

.../src/FlowLayout.java：

```
import android.content.Context;
import android.content.res.TypedArray;
import android.graphics.Canvas;
import android.util.AttributeSet;
import android.view.View;
import android.view.ViewGroup;

public class FlowLayout extends ViewGroup
{
    public static final int HORIZONTAL = 0;
    public static final int VERTICAL = 1;

    private int horizontalSpacing = 20;
    private int verticalSpacing = 20;
    private int orientation = 0;

    private int innerPadding = 12;

    public FlowLayout(Context context)
    {
        super(context);
    }

    public FlowLayout(Context context, AttributeSet attributeSet)
    {
        super(context, attributeSet);
    }

    public FlowLayout(Context context, AttributeSet attributeSet, int defStyle)
    {
        super(context, attributeSet, defStyle);
    }

    @Override
    protected void onMeasure(int widthMeasureSpec, int heightMeasureSpec)
    {
        int sizeWidth = MeasureSpec.getSize(widthMeasureSpec) - this.getPaddingRight() - this.getPaddingLeft();
        int sizeHeight = MeasureSpec.getSize(heightMeasureSpec) - this.getPaddingRight() - this.getPaddingLeft()+innerPadding;

        int modeWidth = MeasureSpec.getMode(widthMeasureSpec);
        int modeHeight = MeasureSpec.getMode(heightMeasureSpec);

        int size;
        int mode;

        if (orientation == HORIZONTAL)
        {
            size = sizeWidth;
            mode = modeWidth;
        }
        else
        {
            size = sizeHeight;
            mode = modeHeight;
        }

        int lineThicknessWithSpacing = 0;
        int lineThickness = 0;
        int lineLengthWithSpacing = 0;
        int lineLength;

        int prevLinePosition = 0;

        int controlMaxLength = 0;
        int controlMaxThickness = 0;

        final int count = getChildCount();
        for (int i = 0; i < count; i++)
        {
            final View child = getChildAt(i);
            if (child.getVisibility() == GONE)
                continue;

            child.measure
            (
                MeasureSpec.makeMeasureSpec(sizeWidth, modeWidth == MeasureSpec.EXACTLY ? MeasureSpec.AT_MOST : modeWidth),
                MeasureSpec.makeMeasureSpec(sizeHeight, modeHeight == MeasureSpec.EXACTLY ? MeasureSpec.AT_MOST : modeHeight)
            );

            LayoutParams lp = (LayoutParams) child.getLayoutParams();

            int hSpacing = this.getHorizontalSpacing(lp);
            int vSpacing = this.getVerticalSpacing(lp);

            int childWidth = child.getMeasuredWidth();
            int childHeight = child.getMeasuredHeight();

            int childLength;
            int childThickness;
            int spacingLength;
            int spacingThickness;

            if (orientation == HORIZONTAL)
            {
                childLength = childWidth;
                childThickness = childHeight;
                spacingLength = hSpacing;
                spacingThickness = vSpacing;
            }
            else
            {
                childLength = childHeight;
                childThickness = childWidth;
                spacingLength = vSpacing;
                spacingThickness = hSpacing;
            }

            lineLength = lineLengthWithSpacing + childLength;
            lineLengthWithSpacing = lineLength + spacingLength;

            boolean newLine = lp.newLine || (mode != MeasureSpec.UNSPECIFIED && lineLength > size);
            if (newLine)
            {
                prevLinePosition = prevLinePosition + lineThicknessWithSpacing;

                lineThickness = childThickness;
                lineLength = childLength;
                lineThicknessWithSpacing = childThickness + spacingThickness;
                lineLengthWithSpacing = lineLength + spacingLength;
            }

            lineThicknessWithSpacing = Math.max(lineThicknessWithSpacing, childThickness + spacingThickness);
            lineThickness = Math.max(lineThickness, childThickness);

            int posX;
            int posY;
            if (orientation == HORIZONTAL)
            {
                posX = innerPadding + getPaddingLeft() + lineLength - childLength;
                posY = getPaddingTop() + prevLinePosition;
            }
            else
            {
                posX = getPaddingLeft() + prevLinePosition;
                posY = innerPadding + getPaddingTop() + lineLength - childHeight;
            }
            lp.setPosition(posX, posY);

            controlMaxLength = Math.max(controlMaxLength, lineLength);
            controlMaxThickness = prevLinePosition + lineThickness;
        }

        if (orientation == HORIZONTAL)
            this.setMeasuredDimension(resolveSize(controlMaxLength, widthMeasureSpec), resolveSize(controlMaxThickness, heightMeasureSpec));
        else
            this.setMeasuredDimension(resolveSize(controlMaxThickness, widthMeasureSpec), resolveSize(controlMaxLength, heightMeasureSpec));
    }

    private int getVerticalSpacing(LayoutParams lp)
    {
        int vSpacing;
        if (lp.verticalSpacingSpecified())
            vSpacing = lp.verticalSpacing;
        else
            vSpacing = this.verticalSpacing;
        return vSpacing;
    }

    private int getHorizontalSpacing(LayoutParams lp)
    {
        int hSpacing;
        if (lp.horizontalSpacingSpecified())
            hSpacing = lp.horizontalSpacing;
        else
            hSpacing = this.horizontalSpacing;
        return hSpacing;
    }

    @Override
    protected void onLayout(boolean changed, int l, int t, int r, int b)
    {
        final int count = getChildCount();
        for (int i = 0; i < count; i++)
        {
            View child = getChildAt(i);
            LayoutParams lp = (LayoutParams) child.getLayoutParams();
            child.layout(lp.x, lp.y, lp.x + child.getMeasuredWidth(), lp.y + child.getMeasuredHeight());
        }
    }

    @Override
    protected boolean drawChild(Canvas canvas, View child, long drawingTime)
    {
        return super.drawChild(canvas, child, drawingTime);
    }

    @Override
    protected boolean checkLayoutParams(ViewGroup.LayoutParams p)
    {
        return p instanceof LayoutParams;
    }

    @Override
    protected LayoutParams generateDefaultLayoutParams()
    {
        return new LayoutParams(LayoutParams.WRAP_CONTENT, LayoutParams.WRAP_CONTENT);
    }

    @Override
    public LayoutParams generateLayoutParams(AttributeSet attributeSet)
    {
        return new LayoutParams(getContext(), attributeSet);
    }

    @Override
    protected LayoutParams generateLayoutParams(ViewGroup.LayoutParams p)
    {
        return new LayoutParams(p);
    }

    public static class LayoutParams extends ViewGroup.LayoutParams
    {
        private static int NO_SPACING = -1;

        private int x;
        private int y;
        private int horizontalSpacing = NO_SPACING;
        private int verticalSpacing = NO_SPACING;
        private boolean newLine = false;

        public LayoutParams(Context context, AttributeSet attributeSet)
        {
            super(context, attributeSet);
            this.readStyleParameters(context, attributeSet);
        }

        public LayoutParams(int width, int height)
        {
            super(width, height);
        }

        public LayoutParams(ViewGroup.LayoutParams layoutParams)
        {
            super(layoutParams);
        }

        public boolean horizontalSpacingSpecified()
        {
            return horizontalSpacing != NO_SPACING;
        }

        public boolean verticalSpacingSpecified()
        {
            return verticalSpacing != NO_SPACING;
        }

        public void setPosition(int x, int y)
        {
            this.x = x;
            this.y = y;
        }

        private void readStyleParameters(Context context, AttributeSet attributeSet)
        {
            TypedArray a = context.obtainStyledAttributes(attributeSet, R.styleable.FlowLayout_LayoutParams);
            try
            {
                horizontalSpacing = a.getDimensionPixelSize(R.styleable.FlowLayout_LayoutParams_layout_horizontalSpacing, NO_SPACING);
                verticalSpacing = a.getDimensionPixelSize(R.styleable.FlowLayout_LayoutParams_layout_verticalSpacing, NO_SPACING);
                newLine = a.getBoolean(R.styleable.FlowLayout_LayoutParams_layout_newLine, false);
            }
            finally
            {
                a.recycle();
            }
        }
    }
} 
```

然后，您为将要位于流布局视图中的视图创建自定义属性。

.../res/values/attrs.xml

```
<?xml version="1.0" encoding="utf-8"?>
<resources>
    <declare-styleable name="FlowLayout_LayoutParams">
        <attr name="layout_newLine" format="boolean"/>
        <attr name="layout_horizontalSpacing" format="dimension"/>
        <attr name="layout_verticalSpacing" format="dimension"/>
    </declare-styleable>
</resources> 
```

然后在 xml 布局中添加：

```
<[PATH_TO_CLASS].FlowLayout
    xmlns:flowLayout="http://schemas.android.com/apk/res/za.co.lawdata.searchworks"
    android:id="@+id/flow_layout"
    android:layout_width="fill_parent"
    android:layout_height="wrap_content">

    <Button
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:text="Button"
        flowLayout:layout_verticalSpacing="50dp"/>

    <Button
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:text="Button"
        flowLayout:layout_newLine="true"
        flowLayout:layout_horizontalSpacing="50dp"/>

    <Button
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:text="Button"/>

</[PATH_TO_CLASS].FlowLayout> 
```

并替换`[PATH_TO_CLASS]`为您的包路径，例如：`com.example.appname`

`flowLayout:layout_verticalSpacing="50dp"`将设置项目之间的垂直空间。默认设置在 java 类中。

`flowLayout:layout_horizontalSpacing="50dp"`将设置项目之间的水平空间。默认设置在 java 类中。

`flowLayout:layout_newLine="true"`会将项目放在新行上。

这是来自这个 git 的编辑：[https ://github.com/ApmeM/android-flowlayout](https://github.com/ApmeM/android-flowlayout)

# asp.net - 使用 webmethods Asp.net 插入 SQL (Access) 不起作用

> ID：16212982
> 
> 赞同：0
> 
> 时间：2013-04-25T11:00:14.120
> 
> 标签：asp.net, database, web-services, insert, webmethod

我正在尝试使用 webmethod(services) 和网站将一些字段插入本地 ms 访问数据库。我试过抬头，但似乎无法发现我哪里出错了。谁能告诉我我是否做得对。下面的代码不会将新数据添加到数据库中，也不会将我引导回请求的页面。

服务网络方法：

```
[WebMethod]
public void AddNewPosts(string postUserName, string postTitle, DateTime postMessagepostDateTime, int subTopicId, string postMessage)
{
    //Connection string for the datbase
    string database = "Provider=Microsoft.ACE.OLEDB.12.0;Data Source=|DataDirectory|/Forum.accdb;Persist Security Info=True";
    OleDbConnection myConn = new OleDbConnection(database);

    //Execute the query
    string queryStr = "Insert into Posts (TopicId, PostTitle, PostUserName, PostDateTime) VALUES (" + subTopicId + ",'" + postTitle + "','" + postUserName + "'," + postMessagepostDateTime + ")";

    // Create a command object 
    OleDbCommand myCommand = new OleDbCommand(queryStr, myConn);
    // Open the connection 
    myCommand.Connection.Open();
    myCommand.ExecuteNonQuery();
    myCommand.Connection.Close();
} 
```

从我的网站调用上述方法：

```
 protected void btnSubmit_Click(object sender, EventArgs e)
{
    //string postUserName = Page.User.Identity.Name;
    string postUserName = "tom123";
    string postTitle = txtTitle.Text;
    string postMessage = txtMessage.Text;
    DateTime postDateTime = DateTime.Now;
    int subTopicId = int.Parse(Request.QueryString["id"]);

    Service fs = new Service();
    fs.AddNewPosts(postUserName, postTitle, postDateTime, subTopicId, postMessage);

    //Redirect back to the SubTopic page
    Response.Redirect("SubTopic.aspx?id=" + subTopicId.ToString());

} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-25T11:22:12.523

您可以尝试在日期时间字符串周围加上引号 queryStr = "插入帖子（TopicId、PostTitle、PostUserName、PostDateTime）VALUES (" + subTopicId + ",'" + postTitle + "','" + postUserName + "',' " + postMessagepostDateTime + "')";

# java - 在检查套接字连接时从 BlueToothSocket 的 InputStream 畅通读取

> ID：16212984
> 
> 赞同：1
> 
> 时间：2013-04-25T11:00:16.317
> 
> 标签：java, android, exception, bluetooth, inputstream

我正在尝试编写一个线程来执行以下操作：

1\. 从输入流中读取；

2\. 一些其他的例行公事；

3.如果socket关闭，抛出异常。

蓝牙 Socket 和来自套接字的 inputStream 在此之前已经设置好了。代码如下：

```
public void run() {
    byte[] buffer = new byte[1024];
    int bytes;

    while (true) {
        try {
            //if(mInputStream.available() > 0){        //-------- Line 1
            bytes = mInputStream.read(buffer);
            //}                                      //-------- Line 2

            //---------------------//
            // some other routines //
            //---------------------//

        } catch (IOException e) {
            connectionLost();
            break;
        }               
    }
} 
```

问题是上面的代码会因为阻塞而挂在**mInputStream.read()处。**但是，如果我取消注释第 1 行和第 2 行，即使 BlueToothSocket 关闭， **mInputStream.available()函数也不会抛出异常。**是否有任何方法可以解除阻塞读取功能，或者在使用 available() 并关闭蓝牙套接字时抛出异常？欣赏它！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2014-10-08T20:39:17.280

这就是我使用的：

```
private boolean receivedInTimelyManner(InputStream mInStream,
        int bytesToReceive, long timeoutMillis) throws IOException,
        InterruptedException {

    long time = 0;
    while (mInStream.available() < bytesToReceive && time < timeoutMillis) {

        time+=5;
        Thread.sleep(5);
    }
    if (time == timeoutMillis) {
        return false;
    }
    return true;

} 
```

用类似的东西包围你的阅读块：

```
if receivedInTimelyManner(instream,bytes,timeout){
    read()
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-05-06T09:50:05.717

好的，似乎没有一种简单的方法可以进行畅通的 read() 和 available() 抛出不起作用。解决这个问题的最方便的方法是**创建另一个线程来执行其他例程**。而不要管这个线程，特别是用于读取输入流和检查输入流状态（抛出异常）。

# c++ - C++ 通用树迭代器 - 反向路径

> ID：16212986
> 
> 赞同：3
> 
> 时间：2013-04-25T11:00:19.033
> 
> 标签：c++, tree, iterator, traversal

我想在通用树上定义一个迭代器。这是二进制之一的示例（来自维基百科）：

![](https://i.stack.imgur.com/vpAuD.png)

迭代器应该允许我预先遍历这个树结构。我可以使用 std::stack 轻松实现这一点（从堆栈中获取节点，设置为当前节点，将其子节点添加到堆栈中）。

但我希望我也能获得“落后”的节点。

示例图中的节点应按以下顺序访问：F、B、A、B*、D、C、D*、E、D*、B*、F*、G、I、H

'*' - 表示该节点被反向访问。

如果它是“正常”访问或向后访问，迭代器还应该存储信息。

你会采取哪种方法来处理这个问题？

# android - Android在同一屏幕上间隔两个片段

> ID：16212988
> 
> 赞同：0
> 
> 时间：2013-04-25T11:00:25.503
> 
> 标签：android, android-layout, android-fragments

我有一个在屏幕上显示两个片段的活动，一个在另一个之下。顶部片段是活动的用户界面，第二个片段是自定义 ListView。我有两个可以填充顶部插槽的片段，每个片段的大小都不同。ListView 用于两者。

我面临的问题是顶部和底部片段之间存在重大差距。我知道它与 layout_weight 属性有关，而 layout_weight 是我见过的控制片段命令的屏幕大小的唯一方法。

我想知道的是，是否有办法在加载片段时动态调整保留片段区域的大小，或者我是否被这个丑陋的差距所困扰。

这是我的布局：

```
<?xml version="1.0" encoding="utf-8"?>
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:layout_width="match_parent"
    android:layout_height="match_parent"
    android:orientation="vertical" >

<TabHost
    android:id="@android:id/tabhost"
    android:layout_width="fill_parent"
    android:layout_height="fill_parent" >
    <LinearLayout
        android:orientation="vertical"
        android:layout_width="fill_parent"
        android:layout_height="fill_parent" >
        <TabWidget
            android:id="@android:id/tabs"
            android:orientation="horizontal"
            android:layout_width="fill_parent"
            android:layout_height="wrap_content"
            android:layout_weight="0"
            />

        <FrameLayout
            android:id="@android:id/tabcontent"
            android:layout_width="0dp"
            android:layout_height="0dp"
            android:layout_weight="0"/>

        <FrameLayout
            android:id="@+android:id/realtabcontent1"
            android:layout_width="fill_parent"
            android:layout_height="wrap_content"
            android:layout_weight="1"/>
        <FrameLayout
            android:id="@+android:id/realtabcontent2"
            android:layout_width="fill_parent"
            android:layout_height="0dp"
            android:layout_weight="2" />
    </LinearLayout>
</TabHost>
</LinearLayout> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-27T09:07:35.047

我已经想通了。托管片段的两个 FrameLayouts 的布局高度应设置为`android:layout_height="wrap_content"`并`layout_weight`应删除该行。然后在加载到该 FrameLayout 的片段上动态处理间距。

# sql - SQL 查询 - 如果表中的鉴别器等于某物，则将另一个表中的列内容更改为等于 PK

> ID：16212989
> 
> 赞同：0
> 
> 时间：2013-04-25T11:00:26.203
> 
> 标签：sql, foreign-keys, primary-key

假设我有两张桌子（TableA 和 TableB）

TableA 有一个 Id（主键）和一个具有特定值的鉴别器（例如“stuff”） TableB 有一个 id 列，它本质上是 TableA id 的外键（“StuffId”）

我想做的是对 TableB 进行 SQL 查询，检查 TableA 中“stuff”（例如）的鉴别器值，如果值为“stuff”，则获取 tableA 的 Id（主键）并链接“StuffId”列中 TableB 的值

这是可行的吗？

谢谢

是的，已经存在行。

**表A可能有**

```
ID     Discriminator
--------------------    
1         stuff
2        notstuff
3         stuff 
```

**表 B 可能有**

```
StuffID     Name
-----------------    
   43       ffr
   87       fd 
```

我希望 stuffId 列与 TableA 中的列相同，但前提是 TableA 中的鉴别器是“stuff”

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-25T11:28:41.887

好的，将我的评论重新发布为答案：

```
 INSERT TableB (StuffId) SELECT Id from TableA WHERE discriminator='Stuff' 
```

应该完成您想要的，如原始帖子中所述。请注意，在 TableB 中添加的新行在名称字段中将具有 null 或默认值，因为它未在查询中指定。

编辑：根据 TableB 关于唯一性和约束的设计，此查询可能不会给出正确的结果（例如，如果 TableB 中已经存在具有 StuffId 的行，如果它们应该是唯一的，或者它可能会失败如果它们不是唯一的，可能会添加重复的行）。如果没有对表格的详细描述以及它们之间的关系，很难提供一个好的答案。

# html - TD width - the minimum needed using CSS

> ID：16212991
> 
> 赞同：6
> 
> 时间：2013-04-25T11:00:31.547
> 
> 标签：html, css, html-table, width

Consider this table:

```
<table style="width: 100%">
    <tr>
        <td>Static length</td>
        <td>Static length</td>
        <td><div>Length varies</div></td>
        <td>Space filler</td>
    </tr>
    <tr>
        ...
    </tr>
</table> 
```

How can I make the 3rd column to take the minimum width (depending on its content) and the 4th column to take the rest?

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-04-25T11:04:15.547

用这个

```
td:nth-child(3){
    background:red;
    width: 1px;
    white-space: nowrap;
} 
```

**[演示](http://jsfiddle.net/AXKUZ/)**

# c - c中线程的内存分配

> ID：16212993
> 
> 赞同：3
> 
> 时间：2013-04-25T11:00:33.427
> 
> 标签：c, linux

如何减少 C 中线程使用的内存？虽然一个线程需要大约 8 到 10 MB 的内存，但是有什么办法可以减少这个内存呢？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-04-25T11:03:07.150

是的，您可以设置线程堆栈的大小。

```
pthread_attr_t attribute;
pthread_t thread;
pthread_attr_init(&attribute);
pthread_attr_setstacksize(&attribute,size); // size may be defined by u as 1024,2048,etc
pthread_create(&thread,&attribute,fun,0); 
```

...................................................

```
void *fun(void *arg)
{
      ....
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-25T14:08:47.770

正如已经回答的那样，您可以在应用程序中使用 pthread 属性。

但是您也可以使用 ulimit 命令对在当前 shell 中启动的任何应用程序设置限制：

*   `ulimit -s`: 以 kiB 显示当前限制
*   `ulimit -s 1024`：将堆栈限制为 1 MiB

# python - python交集初始状态标准实践

> ID：16212994
> 
> 赞同：1
> 
> 时间：2013-04-25T11:00:35.360
> 
> 标签：python, intersection

例子：

```
complete_dict = dict()
common_set = set()
for count, group_name in enumerate(groups_dict):
    complete_dict[group_name] = dict()  # grabs a json file = group_name.json

    if count > 0:
        common_set.intersection_update(complete_dict[group_name])
    else:
        # this accounts for the fact common_set is EMPTY to begin with
        common_set.update(complete_dict[group_name]) 
```

WHERE：`dict2`包含 k:v 个成员（组）：int(x)

是否有更合适的方法来处理交叉口的初始状态？

即我们不能与第一个相交`complete_dict[group_name]`，`common_set`因为它是空的，因此结果**也是**空的。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-25T11:46:44.607

避免这种特殊情况的一种方法是使用项目的内容初始化集合。由于与自身相交的值就是值本身，因此您不会以这种方式丢失任何东西。

这是一个尝试展示这如何工作的尝试。我不确定我是否理解您的不同`dict(...)`调用应该代表什么，因此这可能无法完美地转化为您的代码，但它应该让您走上正确的道路。

```
it = iter(dict(...)) # this is the dict(...) from the for statement
first_key = next(it)
results[first_key] = dict(...) # this is the dict(...) from inside the loop

common = set(results[first_key]) # initialize the set with the first item

for key in it:
    results[key] = dict(...) # the inner dict(...) again
    common.intersection_update(result[key]) 
```

正如 jamylak 所评论的那样，您对各种字典的方法进行的调用总是不必要的（如果您不进行任何索引或使用特定于映射的方法`keys`，字典的行为就像一个键）。`set`我还选择了更符合 Python 风格的变量（`lowercase`用于常规变量，`CAPITALS`保留用于常量）。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-25T12:43:46.937

遵循[Blcknght](https://stackoverflow.com/a/16213896/282912)的回答，但复杂性和重复性较低：

```
common = None
uncommon = {}

for key in outer_dict:
    inner = uncommon[key] = inner_dict(...)
    if common is None:
        common = set(inner)
    else:
        common.intersection_update(inner) 
```

像 Blcknght 一样，很难知道这是否抓住了原始的意图，因为变量名称既不是描述性的，也不是不同的。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-25T12:04:54.150

从逻辑上讲，当我们要分配多个集合之间的交集的输出时，我们将最小的集合（具有最小长度的集合）分配给输出集合并与其他集合进行比较，对吗？

```
uncommon_result = dict(...)  # a method that returns a dict()
common_set=sorted([(len(x),x) for x in uncommon_result.values()])[0][1]
for a_set in uncommon_result.values():
    common_set.intersection_update(a_set) 
```

我知道第二行可能是最糟糕的事情之一，`COMMON_SET`因为它做了很多不必要的工作，但从数学上讲，我们几乎一直想知道我们的哪个集合是最小的，在这种情况下，这些工作不是徒劳无功。

编辑：如果 uncommon_result 是 dicts 的 dict，您可能需要添加另一个 for 循环来检查它的键，并且在上面的内部 for 中进行一些小的更改，您会再次好起来的。