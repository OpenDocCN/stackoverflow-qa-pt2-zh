# StackOverflow 问答 14719000-14719999

# tree - 为什么二叉堆作为数组比树更好？

> ID：14719007
> 
> 赞同：16
> 
> 时间：2013-02-05T23:37:50.003
> 
> 标签：tree, binary-tree, heap, big-o

在创建二元最大堆时，为什么将其实现为基于数组而不是基于树的更好（基于树，每个节点也有一个指向其父节点的指针）？在运行时分析、内存使用、性能...

对于二进制最大堆，运行时间为：

*   插入：O(lg n)
*   删除最小值：O(lg n)
*   合并：O(n)

对于树实现

*   插入：O(lg n)
*   删除最小值：O(lg n)
*   合并：O(n)

谁能详细解释一下？

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2013-02-06T09:11:57.603

树使用更多的时间和内存。复杂性相同，但常数因素不同。

与基于数组的堆相比，树的指针使用大量内存，在这种堆中，您几乎不需要任何额外的空间，但值本身占用的空间。操纵这些指针也需要时间。分配和释放节点也可能需要一些时间和空间......

此外，不能保证树的节点会在内存中一起出现。如果这两种选择中的任何一种都利用了缓存，那么它就是基于数组的堆。

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2015-12-01T17:08:49.090

参考通过其他人的答案已经说过的话，人们可能想知道为什么我们也不将数组用于 BST。二叉堆要求它应该是一棵完整的二叉树。因此，叶节点的深度始终为 h 或 h-1。我相信正是这个属性使得使用数组成为二叉堆的理想选择，而不适合 BST（因为 BST 没有完整的二叉树要求 - 它可能是严格/完整/完整的）。

# php - 如何在 php-cli 中检索控制台 --parameter 值？

> ID：14719009
> 
> 赞同：1
> 
> 时间：2013-02-05T23:38:05.220
> 
> 标签：php

以这种方式在控制台中调用 PHP 脚本时：

```
phpscript.php --param1=value --param2=value2 
```

如何检索`param1`和`param2`取值？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-05T23:39:01.897

`$argv`可用于您的脚本，但更易于使用[`getopt()`](http://www.php.net/manual/en/function.getopt.php).

```
$options = getopt("", array("param1:", "param2:")); 
```

# api - 如何使用 DropBox API 取消共享 DropBox 文件？

> ID：14719017
> 
> 赞同：2
> 
> 时间：2013-02-05T23:39:06.030
> 
> 标签：api, share, dropbox

我已经“抓取”了整个 Dropbox API，只是找不到任何取消共享文件和文件夹的可能性。有生成链接的功能，您可以与您的朋友和同事分享，但是否有“取消分享选项”？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-05T23:58:01.880

如果您在谈论[/shares](https://www.dropbox.com/developers/reference/api#shares "/分享")，您可能会卡住移动文件以使给定地址无效，如果[/fileops/move](https://www.dropbox.com/developers/reference/api#fileops-move)不起作用，则可能是[/fileops/copy](https://www.dropbox.com/developers/reference/api#fileops-copy)然后[/fileops/delete](https://www.dropbox.com/developers/reference/api#fileops-delete)。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-06T20:15:48.200

我在 Dropbox 的开发者论坛中询问，他们说没有取消共享文件和文件夹的选项。用户必须为此使用保管箱网站。

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2013-08-23T16:44:22.007

使用生成的 Dropbox 链接打开文件并登录到您的 Dropbox 帐户。您会在页面顶部找到齿轮图标。单击图标，然后单击删除链接。指向您文件的链接将被删除，文件不再共享。希望这可以帮助。

# python - python pandas：如何计算跨度之间的经过时间？

> ID：14719018
> 
> 赞同：1
> 
> 时间：2013-02-05T23:39:11.907
> 
> 标签：python, pandas, time-series

我有一个包含时间戳事件的 pandas DataFrame。每个事件都有一个开始时间和结束时间：

```
start  end other_vars
  100  120  ...
  150  151  ...
  160  170  ...
  200  210  ... 
```

有没有一种干净的方法来计算熊猫中事件之间的时间（例如，前一个事件*结束和这个事件**开始之间的跨度）？*

```
start  end between other_vars
  100  120      NA   ...
  150  151      30   ...
  160  170       9   ...
  200  210      30   ... 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-06T00:08:20.377

我认为实现这一点的最简单方法是从另一列中减去一个移位列。shift 函数正是这样做的，它通过默认的一个索引来移动一个数组。

```
In [3]: df
Out[3]:
   start  end
0    100  120
1    150  151
2    160  170
3    200  210

In [4]: df.start - df.end.shift()
Out[4]:
0   NaN
1    30
2     9
3    30

In [5]: df['elapsed'] = df.start - df.end.shift()

In [6]: df
Out[6]:
   start  end  elapsed
0    100  120      NaN
1    150  151       30
2    160  170        9
3    200  210       30 
```

# c# - 在 C#/.NET4 中以基本类型反序列化 JSON

> ID：14719023
> 
> 赞同：0
> 
> 时间：2013-02-05T23:39:48.807
> 
> 标签：c#, json

我正在开发一个 JSON API 客户端。目标是使用方法`ToJSON(..)`和创建一个基类型`FromJSON(..)`，后续类可以从中继承。

`ToJSON(..)`[在 Scott Guthrie ( http://bit.ly/Ppgd3](http://bit.ly/Ppgd3) )的博客文章之后，相对简单。我正在与`FromJSON(..)`. 这是基本代码：

```
public class BaseType
{
    public virtual void FromJson(System.Type type, string input)
    {
        // What? How?
    }

    public virtual string ToJson()
    {
        JavaScriptSerializer serial = new JavaScriptSerializer();
        return serial.Serialize(this);
    }

    public virtual string ToJson(string verb)
    {
        JavaScriptSerializer serial = new JavaScriptSerializer();
        string value = serial.Serialize(this);
        return string.Concat("{", "\"", verb.Trim(), "\":", value, "}");
    }
} 
```

现在做到这一点的方法是`Deserialize(..)`在课堂之外工作。我的问题是如何让下面的命令以可继承的方式`Deserialize(..)`在上面的类中工作。`FromJSON(..)`

```
public class InheritedObject : BaseType { }

System.Web.Script.Serialization.JavaScriptSerializer serial = new System.Web.Script.Serialization.JavaScriptSerializer();
InheritedObject foo = serial.Deserialize<InheritedOjbect>(jsonString); 
```

语言为 C#，框架为 .NET 4.0，IDE 为 Visual Studio 2012。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-05T23:54:25.947

在这种情况下，泛型可能会有所帮助。

```
public virtual T FromJson<T>(string input)
{
    JavaScriptSerializer serial = new JavaScriptSerializer();
    return serial.Deserialize<T>(input);
} 
```

您必须像这样在类级别定义 T ：

```
public class BaseType<T> where T : new() 
```

然后像这样继承：

```
public class InheritedObject : BaseType<InheritedObject> 
```

或者，使方法静态：

```
public static T FromJson<T>(string input) where T : new()
{
    JavaScriptSerializer serial = new JavaScriptSerializer();
    return serial.Deserialize<T>(input);
} 
```

# sql - 如何在 SQL 查询中添加城市名称时消除重复的城市名称？

> ID：14719024
> 
> 赞同：0
> 
> 时间：2013-02-05T23:39:53.400
> 
> 标签：sql, oracle, oracle11g, sqlplus

```
SELECT city, COUNT(pNo) Total
FROM Zip z JOIN Property p ON (z.zipcode = p.zipcode)
WHERE state = 'AL' AND rent <= 500
GROUP BY city, p.zipcode HAVING COUNT(pNo) >= 15
ORDER BY Total DESC, city; 
```

以上是我的代码。我的目标是不要有同一个城市的多个列表，而是让每个城市显示一次，如果城市有重复，则将它们的总数加在一起。我已经尝试过 DISTINCT 子句，但它只消除了重复项而不做任何添加。我也尝试在代码中添加 SUM，但我不能完全确定它应该放在哪里。有什么建议么？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-05T23:42:33.717

问题是您按邮政编码分组，从而创建重复的城市条目（可能具有不同的计数）。

如果您只想要不同的城市，请从您的 GROUP BY 中删除 p.zipcode ，您应该很高兴。

祝你好运。

# php - 关闭 Wordpress 数据库连接以减少 CPU 使用率

> ID：14719025
> 
> 赞同：0
> 
> 时间：2013-02-05T23:40:00.920
> 
> 标签：php, mysql, wordpress, cpu, cpu-usage

随着我的 PHP 脚本运行，我的 CPU 使用率一直在下降。

每个 PHP 脚本都使用[`wp-config.php`](http://codex.wordpress.org/Editing_wp-config.php)Wordpress 中的文件打开与 MySQL 的连接。我知道 Wordpress 的连接会在每一页的末尾自动关闭，但我使用`include`or`require_once`表示打开连接的`wp-config.php`文件，以便将数据插入到我自己创建的其他表中。我的脚本运行并检查是否有 > 0 行 ( `mysql_num_rows`)。如果有，那么它会继续运行，如果没有，则我将`exit;`其放入停止运行以节省资源。

我是否需要以某种方式关闭这些连接，或者它们是否会自行关闭？如果我确实需要关闭它们，怎么办？

当多个 PHP 脚本运行时，我只是看到一些高 CPU 使用率，并且可以使用某人的建议。也许没有什么问题，我只需要升级我的服务器。我有一个具有 4 GB RAM 的四核服务器。内存使用率永远不会超过 40%，而 CPU 使用率可能高达 200%，这是我所见过的，因为 PHP 脚本最终会因 CPU 使用率高而导致运行缓慢而产生。网络流量几乎为零！

# javascript - Filepicker.io 小部件附加到“window.history”

> ID：14719026
> 
> 赞同：0
> 
> 时间：2013-02-05T23:40:02.873
> 
> 标签：javascript, backbone.js, filepicker.io

Filepicker.io 模态小部件（特别是“IMAGE_SEARCH”服务）`window.history`在搜索完成后附加到 DOM 中。当尝试返回上一页时，这会在使用[Backbone.js](http://backbonejs.org/)时产生问题。

是什么原因造成的，有什么方法可以预防吗？

[编辑] 错误引用“IMAGE_SEARCH”

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-07T18:36:58.200

这是什么原因造成的：

围绕模式进行导航`window.location.hash`以与窗口视图兼容以及许多其他便利。为什么这些更改会影响 iframe 沙箱外的 window.history，我不确定。

如何预防：

我正在调查我们是否以某种方式泄漏状态，但防止它的一种简单方法是使用`{container: 'window'}`filepicker.pick() 的选项，以便在单独的窗口中创建对话框。

# c++ - 使用函数编译 Helper 文件

> ID：14719035
> 
> 赞同：0
> 
> 时间：2013-02-05T23:40:55.377
> 
> 标签：c++, compilation

我很茫然 - 我刚刚进入 C++ 并且由于某种原因这对我来说不起作用。所以我正在使用 Netbeans，并且我有以下主文件：

```
#include <cstdlib>

#include "functions.h"

using namespace std;

int main(int argc, char** argv) {

    f("help");

    return 0;
} 
```

函数.h 文件：

```
#include <string>

#ifndef FUNCTIONS_H
#define FUNCTIONS_H

void f( string a );

#endif 
```

和 Functions.cpp 文件：

```
#include "functions.h"

void f( string a ) {
    return;
} 
```

所以，长话短说，它不编译。它说它无法理解字符串变量？我不明白，我尝试将包含字符串移动到整个地方，但似乎无处帮助。我该怎么办？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-05T23:42:32.183

如果您尝试使用`std::string`，则必须`#include <string>`在函数标题中调用它`std::string`，因为它位于`std`命名空间中。

```
#ifndef FUNCTIONS_H
#define FUNCTIONS_H

#include <string>

void f( std::string a );

#endif 
```

请参阅[此相关帖子](https://stackoverflow.com/questions/14698205/c-headers-redefining-declaring-mixup/14698224#14698224)以及[为什么“使用命名空间标准”在 C++ 中被认为是不好的做法？](https://stackoverflow.com/questions/1452721/why-is-using-namespace-std-considered-a-bad-practice-in-c)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-05T23:42:39.697

您需要在 中包含字符串头文件`Functions.h`，还需要告诉编译器`string`来自`std`命名空间。

```
#ifndef FUNCTIONS_H
#define FUNCTIONS_H

#include <string>
void f( std::string a );

#endif 
```

Functions.cpp 文件：

```
#include "functions.h"

void f( std::string a ) {
    return;
} 
```

更好的做法是通过 const 引用传递字符串

```
void f(const std::string& a ) {
    return;
} 
```

请参阅[为什么是“使用命名空间标准；” 在 C++ 中被认为是一种不好的做法？](https://stackoverflow.com/questions/1452721/why-is-using-namespace-std-considered-a-bad-practice-in-c)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-05T23:42:00.587

包括标准标题：`<string>`

```
#include <string> 
```

# mercurial-hook - 水银钩hgrc

> ID：14719041
> 
> 赞同：0
> 
> 时间：2013-02-05T23:41:30.447
> 
> 标签：mercurial-hook

我知道如何在我的本地存储库中包含 Mercurial 挂钩。这是通过将挂钩以及 Python 代码和 Python 挂钩的位置添加到 hgrc 文件来完成的。

[钩子] pretxncommit.require_case=python:.hg/require_case.py:require_case

现在我想使用这个钩子并将其添加到位于中央存储库中的 hgrc 文件中。在我对中央存储库的 hgrc 文件进行更改并且在该存储库上执行 mercurial 克隆后，hgrc 文件没有我的钩子定义。这个中央存储库在 Linux 环境下运行。

我是否遗漏了步骤中的任何内容。任何建议表示赞赏。谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-22T15:33:14.767

挂钩条目不会在存储库之间传输，hgrc 中的任何细节都不会。请参阅 “文件”下的[http://www.selenic.com/mercurial/hgrc.5.html](http://www.selenic.com/mercurial/hgrc.5.html)

> <repo>/.hg/hgrc
> 
> 仅适用于特定存储库的每个存储库配置选项。此文件不受版本控制，不会在“克隆”操作期间传输。此文件中的选项会覆盖所有其他配置文件中的选项。在 Plan 9 和 Unix 上，如果该文件不属于受信任的用户或受信任的组，则该文件的大部分将被忽略。有关详细信息，请参阅下面 [trusted] 部分的文档。

# jquery - jquery删除单选按钮值中的html

> ID：14719051
> 
> 赞同：0
> 
> 时间：2013-02-05T23:41:58.817
> 
> 标签：jquery

我有一个由 USPS 的 XML 提要动态生成的单选按钮列表，示例如下：

```
<div id="pnlCartAllowsShippingMethodSelection">
    <span id="ShipSelectionMsg"><p><b>Please select the desired shipping method below:</b></p></span>
    <input type="radio" name="ShippingMethodID" id="ShippingMethodID3" value="41|Express Mail International|55.60|0.00">&nbsp;Express Mail International $55.60 (USD)<span id="shippingdescription"> - Delivery in 3-5 Business Days*</span><br>
    <input type="radio" name="ShippingMethodID" id="ShippingMethodID3" value="9|Priority Mail International|42.58|0.00">&nbsp;Priority Mail International $42.58 (USD)<span id="shippingdescription"> - Delivery in 6-10 Business Days*</span><br>
    <input type="radio" name="ShippingMethodID" id="ShippingMethodID3" value="67|First-Class Package International Service<sup>TM</sup>**|19.53|0.00">&nbsp;First-Class Package International Service<sup>™&lt;/sup>** $19.53 (USD)<br>
    <input type="hidden" name="RequireShippingSelection" value="true">
</div> 
```

我想遍历所有标签并`<inputs>`找到任何`<sup>TM</sup>`标签并将它们从`value`字段中删除。

我相信我需要使用该`.each()`功能。只是不确定在每个函数中使用什么函数

```
$('#pnlCartAllowsShippingMethodSelection input").each(function() {
    $(this).
}); 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-02-05T23:44:27.167

您可以使用`.remove()`：

```
$('#pnlCartAllowsShippingMethodSelection sup').remove(); 
```

对于单选按钮，您可以执行以下操作：

```
$('#pnlCartAllowsShippingMethodSelection input').val(function(index, value) {
    return value.replace(/<sup>TM<\/sup>/g, '');
}); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-05T23:45:03.413

```
$('#pnlCartAllowsShippingMethodSelection sup").remove() 
```

# rally - 网格列排序重新执行网格存储中的所有应用程序代码

> ID：14719062
> 
> 赞同：2
> 
> 时间：2013-02-05T23:42:54.480
> 
> 标签：rally

尽我所能，对我的一个网格（配置有调用 LBAPI 的商店）中的任何列进行排序会从商店的定义开始重新执行我的所有应用程序代码。这是预期的行为吗？我认为我们不需要重新查询网格中使用的数据来对其进行排序。

我将商店定义如下：

```
 // fetch the snapshot of all leaf level stories for the PI
    var ssPiLeafStories = Ext.create('Rally.data.lookback.SnapshotStore', {
        context: {
            workspace: this.context.getWorkspace(),
            project: this.context.getProject()
        },
        pageSize: 10000000,
        fetch: find,
        rawFind: query,
        hydrate: ["ScheduleState", "c_" + this.gKanbanStateFieldName],
        autoLoad: true,
        listeners: {
            scope: this,
            load: this._processPiLeafStories
        }
    }); 
```

...对网格中的任何列进行排序会驱动 _processPiLeafStories 函数及其他函数中的所有应用程序逻辑（我认为！）。任何关于如何对网格进行排序而不是重新运行大部分应用程序的建议将不胜感激。

谢谢！

# python - OS X 10.8 上的 PyCuda / 多处理问题

> ID：14719065
> 
> 赞同：2
> 
> 时间：2013-02-05T23:43:16.637
> 
> 标签：python, cuda, multiprocessing, osx-mountain-lion, pycuda

我正在做一个项目，我将计算任务分配给多个 python 进程，每个进程都与自己的 CUDA 设备相关联。

产生子进程时，我使用以下代码：

```
import pycuda.driver as cuda

class ComputeServer(object):
    def _init_workers(self):
        self.workers = []
        cuda.init()
        for device_id in range(cuda.Device.count()):
            print "initializing device {}".format(device_id)
            worker = CudaWorker(device_id)
            worker.start()
            self.workers.append(worker) 
```

CudaWorker 在另一个文件中定义如下：

```
from multiprocessing import Process
import pycuda.driver as cuda

class CudaWorker(Process):
    def __init__(self, device_id):
        Process.__init__(self)
        self.device_id = device_id

    def run(self):
        self._init_cuda_context()
        while True:
            # process requests here

    def _init_cuda_context(self):
        # the following line fails
        cuda.init()
        device = cuda.Device(self.device_id)
        self.cuda_context = device.make_context() 
```

当我在 Windows 7 或 Linux 上运行此代码时，我没有任何问题。在装有 OSX 10.8.2、Cuda 5.0 和 PyCuda 2012.1 的 MacBook Pro 上运行代码时，出现以下错误：

```
Process CudaWorker-1:
Traceback (most recent call last):
  File "/Library/Frameworks/Python.framework/Versions/2.7/lib/python2.7/multiprocessing/process.py", line 258, in _bootstrap
    self.run()
  File "/Users/tombnorwood/pymodules/computeserver/worker.py", line 32, in run
    self._init_cuda_context()
  File "/Users/tombnorwood/pymodules/computeserver/worker.py", line 38, in _init_cuda_context
    cuda.init()
RuntimeError: cuInit failed: no device 
```

我没有在我的 Mac 上分叉新进程的情况下运行 PyCuda 脚本没有问题。我只在生成新进程时遇到这个问题。

有没有人遇到过这个问题？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-06T00:42:14.343

根据我的经验，这实际上只是一个有根据的猜测，但我怀疑 CUDA（或可能是 PyCuda）的 OS X 实现依赖于一些在 之后无法安全使用的 API `fork`，而 linux 实现则没有。* 因为POSIX 实现`multiprocessing`使用`fork`不`exec`创建子进程，这可以解释为什么它在 OS X 而不是 linux 上失败。（在 Windows 上，没有，*只是*`fork`一个`spawn`等价物，所以这不是问题。）

最简单的解决方案是 drop `multiprocessing`。如果 CUDA 和 PyCUDA 是线程安全的（我不知道它们是否是），并且您的代码不受 CPU 限制（只是受 GPU 限制），那么您也许可以直接`threading.Thread`代替`multiprocessing.Process`并完成它. 或者您可以考虑提供与`multiprocessing`. （有少数人使用`pp`只是因为它总是`exec`......）

但是，很容易破解`multiprocessing`/`exec`一个`spawn`新的 Python 解释器，然后执行 Windows 样式而不是 POSIX 样式的所有操作。（正确处理*每个*案例很困难，但正确处理一个特定用例却很容易。）

或者，如果您查看[错误 #8713](http://bugs.python.org/issue8713)，则正在做一些工作以使这项工作正常进行。并且有工作补丁。这些补丁适用于 3.3，而不是 2.7，因此您可能需要进行一些按摩，但应该不会太多。因此，只需`cp $MY_PYTHON_LIB/multiprocessing.py $MY_PROJECT_DIR/mymultiprocessing.py`修补它，使用它`mymultiprocessing`代替`multiprocessing`，并添加适当的调用来选择 spawn/fork+exec/无论在你做任何其他事情之前在最新补丁中调用的模式。

* * *

* OP 说他怀疑同样的事情，所以我可能不需要向他解释这一点，但对于未来的读者：这不是关于达尔文和其他 Unix 之间的区别，而是关于苹果发布了很多非-Unix-y 中级库，如 CoreFoundation.framework、Accelerate.framework 等，它们使用 unsafe-after-fork 功能（或者只是断言它们在 fork 之后没有被使用，因为 Apple 不想放入在他们可以说“从 10.X 开始，Foo.framework 在 fork 之后是安全的”之前需要进行严格的测试）。此外，如果你比较 OS X 和 linux 处理图形和其他硬件的方式，OS X 中的每个进程用户空间中都有更多的中级。

# ios - ios 6.0 ipad 模拟器中的dismissModalViewControllerAnimated 崩溃

> ID：14719067
> 
> 赞同：-2
> 
> 时间：2013-02-05T23:43:22.483
> 
> 标签：ios

我正在使用以下代码来关闭模式视图控制器：

```
- (IBAction)done {
#ifdef __IPHONE_5_0
    if ([self respondsToSelector:@selector(presentingViewController)])
        [self.presentingViewController dismissModalViewControllerAnimated:YES];
    else
#endif
        [self.parentViewController dismissModalViewControllerAnimated:YES];
} 
```

如果我使用 iOS 4.3 iPad 运行他的模拟器，它使用`self.parentViewController`并且工作正常。但是，当我使用 iOS 6.0 iPad 运行模拟器时，模拟器在使用`self.presentingViewController`.

我没有要测试的实际 iPad……有什么想法吗？

编辑：

下面是创建模态视图控制器的代码。

```
NSArray* errors = [[NSArray alloc] initWithContentsOfFile:[[NSBundle mainBundle] pathForResource:@"Errors" ofType:@"plist"]];

UIViewController* vc;
if (UI_USER_INTERFACE_IDIOM() == UIUserInterfaceIdiomPad) {
    DocumentsViewController_iPad* docsVC = [[DocumentsViewController_iPad alloc] initWithNibName:@"DocumentsViewController-iPad" bundle:nil];
    docsVC.documents = errors;
    docsVC.errors = YES;
    docsVC.navTitle = @"Troubleshooting";
    vc = docsVC;
} else {
    DocumentsViewController* docsVC = [[DocumentsViewController alloc] initWithNibName:nil bundle:nil];
    docsVC.documents = errors;
    docsVC.errors = YES;
    docsVC.navTitle = @"Troubleshooting";
    vc = docsVC;
}

vc.modalTransitionStyle = UIModalTransitionStyleCoverVertical;
[self presentModalViewController:vc animated:YES];
[vc release]; 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-05T23:49:24.817

一些东西：

*   是的，你应该`dismissViewControllerAnimated:completion:`像@rdelmar 说的那样使用
*   你应该在presentingViewController上调用它，而不是父级
*   您可以跳过进入演示控制器并关闭`self`，如果需要，它会将此消息转发给演示控制器。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-05T23:45:40.177

dismissModalViewControllerAnimated: 已弃用，请改用dismissViewControllerAnimated:completion:。

# c# - 如何处理耗时对象列表

> ID：14719069
> 
> 赞同：1
> 
> 时间：2013-02-05T23:43:52.727
> 
> 标签：c#, .net, vb.net, list

在 .Net 4.5 中，我有一些列表，其中包含加载耗时的对象。加载一个包含 5000 个对象的列表大约需要 5 秒，因此对于每个循环都需要相当长的时间来执行。

由于对象的初始化一直是我想知道是否有一种类型的列表，或者有一种方法来制作这样的列表，当需要时逐步加载对象。

类似于列表的东西，它会知道有多少对象，但仅在检索对象时才实例化对象。这存在吗？或者有可能制作这样的清单吗？

我正在寻找有关如何完成此操作的建议（如果可行的话），因此 bot C# 或 VB.Net 代码会很好。因此我添加了两个标签。

编辑

我应该补充一点，我尝试过使用延迟加载，但这似乎只是延迟了列表的加载，这并不是真正的解决方案。

编辑

这是我现在正在使用的。请注意，我删除了使用延迟加载的蹩脚尝试并恢复到我昨天使用的方式（这实际上是没有`Lazy`对象的延迟加载）

```
Public Class SISOverlayItemList : Inherits SISBaseObject : Implements IEnumerable(Of SISOverlayItem)

Default Public ReadOnly Property Item(ByVal Index As Integer) As SISOverlayItem
    Get
        Return New SISOverlayItem(Me.List(Index).ID, Me.Parent)
    End Get
End Property

Public ReadOnly Property Items As List(Of SISOverlayItem)
    Get
        Dim output As New List(Of SISOverlayItem)

        Call Me.List.Items.AsParallel.ForAll(Sub(i) output.Add(New SISOverlayItem(i.ID, Me.Parent))

        Return output
    End Get
End Property

Public ReadOnly Property Parent As SISOverlay
    Get
        Return Me._Parent
    End Get
End Property

Private ReadOnly Property List As SISList
    Get
        If Me._List Is Nothing Then
            Me._List = Me.Application.Lists(Me.Name)
        End If
        Call Me.Refresh()
        Return Me._List
    End Get
End Property

Private _List As SISList
Private _Parent As SISOverlay

Public Sub New(ByVal Parent As SISOverlay)

    Me._Parent = Parent
    Me._Application = Parent.Application
    Me._Name = String.Format("Overlay_{0}_Items", Parent.Name)
    Call Me.Refresh()

End Sub

Public Sub Refresh()

    Call Me.Application.Lists(Me.Name).ScanOverlay(Me.Parent)

End Sub

Public Function GetEnumerator() As IEnumerator(Of SISOverlayItem) Implements IEnumerable(Of SISOverlayItem).GetEnumerator

    Return Me.Items.GetEnumerator()

End Function

Private Function GetEnumerator1() As IEnumerator Implements IEnumerable.GetEnumerator

    Return Me.GetEnumerator

End Function 
```

结束类

`Items`将所有对象从 转换`List`为当前列表 ( ) 的项目的属性`SISOverlayItem`需要很长时间。如果实例化 an 所需的参数`ID`需要对存储在.`SISOverlayItem``Application``List`

如果可以小批量执行这些调用，那么它应该消除实例化列表中每个对象所需的长时间延迟。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-06T01:35:13.207

听起来这些物体还没有全部存在，这是需要这么长时间的一部分。如果您不需要将项目集合作为列表，那么值得研究`yield return`。这给出了一个`IEnumerable`可以查询、过滤或枚举的。

它可能看起来像这样：

```
public readonly IEnumerable<SISOverlayItem> Items
{
    get
    {
        SISOverlayItem myItem = intermediateList.DoSomeWork();
        yield return myItem;
    }
} 
```

这可能不切实际。此外，如果涉及大量处理，这可能更适合作为方法而不是属性。如果您知道如何过滤集合，则可以执行以下操作：

```
public IEnumerable<SISOverlayItem> ProduceSelectedItems()
{
    var intermediateItems = from item in intermediateList
                            where item.isSelected
                            select item;
    foreach (var item in intermediateItems)
    {
        yield return item.DoSomeWork();
    }
} 
```

抱歉，我手头没有 Visual Studio 可供检查，但我认为这样的事情可能会有所帮助。概述这种方法的另一个问题是[here](https://stackoverflow.com/questions/410026/proper-use-of-yield-return)。

# ajax - 如何在第二次单击按钮时有另一个事件（不是双击）

> ID：14719072
> 
> 赞同：0
> 
> 时间：2013-02-05T23:44:07.493
> 
> 标签：ajax, jquery, click

这似乎是一个非常简单的问题，但我似乎找不到答案。

现在`toggle()`不推荐使用单击事件，我怎么能说一个按钮在第一次单击时添加 DOM 元素，然后在第二次单击时删除那些相同的 DOM 元素？

`load()`另外....如何在不删除 div 本身的情况下从已将内容插入（使用）的 div 中删除内容？使用`remove()`删除 div。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-05T23:55:24.380

用于`empty()`清除元素内部 html

至于切换问题，您可以切换元素上的类并测试该类：

```
$('#myDiv').on('click', function(){
   if(! $(this).hasClass('clicked') ){
      /* code for first click*/
   }else{
      /* code for second click*/
   }
   $(this).toggleClass('clicked')
}) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-05T23:47:45.940

您的点击将首先检查是否存在添加的 dom 元素（可能使用 id）。

```
if $('div#id of the stuff you add') 
    $('element exists...').remove();
else
    $('div#id of where you want to add stuff').add( new code ); 
```

您可以使用以下命令清除 div 内容：

```
divSomeDiv.html("");

or 

divSomeDiv.empty(); 
```

# c# - 使用 LINQ to Twitter 获取所有关注者

> ID：14719074
> 
> 赞同：1
> 
> 时间：2013-02-05T23:44:35.823
> 
> 标签：c#, twitter, windows-phone, linq-to-twitter

我刚刚启动了一个 Windows Phone 应用程序，我需要获得所有用户的关注。我试过[这个](http://linqtotwitter.codeplex.com/wikipage?title=Listing%20Friends&referringTitle=Listing%20Social%20Graphs)：

```
SharedState.Authorizer = pinAuth;
ITwitterAuthorizer auth = SharedState.Authorizer;
TwitterContext twitterCtx = new TwitterContext(auth);

var friendList =
    (from friend in twitterCtx.SocialGraph
        where friend.Type == SocialGraphType.Friends && friend.ScreenName == "_TDK"
        select friend)
    .SingleOrDefault();

List<String> Followings;
foreach (var id in friendList.ScreenName)
{
    Followings.Add(id.ToString());
} 
```

但是**friendlist**总是为*空*，显然，`foreach`不喜欢这样并抛出一个`exception`.

有人可以帮助我吗？

谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-06T13:55:10.010

我有同样的问题，我用这种方式解决了（我知道这不是最好的方法）

```
public void getProfile(MyProgressBar myprogressbar)
{
    var auth = new SingleUserAuthorizer
    {
        Credentials = new InMemoryCredentials
        {
            ConsumerKey = GlobalVariables.ConsumerKey,
            ConsumerSecret = GlobalVariables.ConsumerSecret,
            AccessToken = GlobalVariables.AccessToken,
            OAuthToken = GlobalVariables.AccessTokenSecret
        }
    };

    using (var twitterCtx = new TwitterContext(auth, "https://api.twitter.com/1/", "https://search.twitter.com/"))
    {
        //Log
        twitterCtx.Log = Console.Out;

        var queryResponse = (from tweet in twitterCtx.Status
                             where tweet.Type == StatusType.User && tweet.ScreenName == GlobalVariables.ScreenName
                             select tweet);

        queryResponse.AsyncCallback(tweets =>
            Deployment.Current.Dispatcher.BeginInvoke(() =>
            {
                var publicTweets = (from tweet in tweets
                                    select tweet).FirstOrDefault();
                s.TwitterName = publicTweets.User.Name.ToString();
                s.TwitterScreenName = "@" + GlobalVariables.ScreenName;
                s.TwitterDescription = publicTweets.User.Description.ToString();
                s.TwitterStatus = publicTweets.User.StatusesCount.ToString() + " Tweets / " + publicTweets.User.FriendsCount.ToString() + " Following / " + publicTweets.User.FollowersCount.ToString() + " Followers";
                s.TwitterImage = publicTweets.User.ProfileImageUrl.ToString();

                myprogressbar.ShowProgressBar = false;

            })).SingleOrDefault();
    }
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-06T18:20:49.627

我认为您需要遍历 IDs 集合，如下所示：

```
foreach (var id in friendList.IDs)
{
    Followings.Add(id.ToString());
} 
```

您需要使用基于 Silverlight 的应用程序（包括 Windows Phone）进行异步调用。以下是如何重构查询的示例：

```
var twitterCtx = new TwitterContext(auth);

(from social in twitterCtx.SocialGraph
 where social.Type == SocialGraphType.Followers &&
       social.ScreenName == "JoeMayo"
 select social)
.MaterializedAsyncCallback(asyncResponse =>
     Dispatcher.BeginInvoke(() =>
     {
         if (asyncResponse.Status != TwitterErrorStatus.Success)
         {
              MessageBox.Show(
                  "Error during query: " + 
                  asyncResponse.Exception.Message);
              return;
         }

         SocialGraph social = asyncResponse.State.SingleOrDefault();

         SocialListBox.ItemsSource = social.IDs;
     })); 
```

The MaterializedAsyncCallback manages the callback from Twitter. Notice how I use Dispatcher.BeginInvoke to marshal the call back onto the UI thread as the callback is on a worker thread. On the asyncResponse callback parameter, use Status to see if there is an error and use State to get the data if the query is successful.

# iis - 如何使用 WiX 将应用程序添加到现有 IIS 站点

> ID：14719080
> 
> 赞同：7
> 
> 时间：2013-02-05T23:45:22.747
> 
> 标签：iis, web-applications, web, wix

我想将应用程序添加到不是默认 IIS 站点的现有 IIS 站点。这不是一个常见的请求，但在部署到 Win 2008 SBS 时需要，MVC Web API 应用程序必须移动到“SBS Web 应用程序”下才能正常工作。

在 IIS 中，我将鼠标右键单击“SBS Web 应用程序”> 添加应用程序...并设置别名、应用程序池和物理路径。

Wix 不允许我在 IIS:WebApplication 上设置这些属性，而且看起来我需要使用 IIS:WebVirtualDir，但我不想或不需要这样做。我只需要将物理路径属性指向我的 API 的安装位置即可。

为什么我不能根据 IIS UI 告诉 WiX IIS:WebApplication 我想要的别名和路径？

在我所做的所有 WiX 工作中，我原以为这是最容易做的事情之一。

注意：我想创建应用程序，我不想或不需要创建站点 - 它已经存在。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-02-07T12:23:30.717

您可以使用 WIX 实现指定目标。我有更复杂的变体：安装到新网站或现有网站，适用于 IIS 6、IIS 7 和 IIS 7.5。

至于安装到现有网站，**WIX 根据 SiteId 识别网站**。如果您的站点有非自动生成的 ID，您需要明确指定它，而不是在相应字段中设置 *。否则 siteId 是根据它的 Description 属性生成的，因此您需要正确指定 description 以引用现有站点。

下面是我的实现（我希望你能从中提取出你需要的东西）：

```
<PropertyRef Id="FRAMEWORKROOT"/>

<PropertyRef Id="SITE_INSTALL_MODE"/>
<PropertyRef Id="SITE_NAME"/>
<PropertyRef Id="SITE_PORT"/>
<PropertyRef Id="SITE_VIRT_DIR"/>
<PropertyRef Id="SITE_APP_NAME"/>
<PropertyRef Id="SITE_HEADER"/>
<PropertyRef Id="SITE_APP_POOL"/>
<PropertyRef Id="SITE_ID"/>

<Property Id="SITE_APP_NAME" Value="{ProductId}"/>

<iis:WebApplication Id="IIS6WebApp" Name="[SITE_APP_NAME]" WebAppPool="AppPool" >
  <iis:WebApplicationExtension Verbs="GET,HEAD,POST" CheckPath="no" Script="yes" Executable="[FRAMEWORKROOT]v4.0.30319\aspnet_isapi.dll" />
</iis:WebApplication>

<iis:WebApplication Id="Iis7WebApp" Name="[SITE_APP_NAME]" WebAppPool="AppPool"></iis:WebApplication>

<iis:WebSite Id="ExistingWebSite" Description="[EXISTING_SITE_NAME]" SiteId="*">
  <iis:WebAddress Id="ExistingSite_IIS7_Header_Binding" Port="[SITE_PORT]" Header="[SITE_HEADER]" />
</iis:WebSite>

<util:Group Id="IisUsersGroup" Name="[IisGroup]" Domain="[ComputerName]"/> 

<DirectoryRef Id="SITE_INSTALLDIR">
  <Component Id="AppPoolConfigure" Guid="YOURGUID-5549-48E8-B989-AFC61D279527" KeyPath="yes" Permanent="no">
    <util:User Id="SiteUser" Domain="[APP_USER_DOMAIN]" Name="[APP_USER_NAME]" Password="[APP_USER_PASSWORD]" CreateUser="no" UpdateIfExists="no" RemoveOnUninstall="no">
      <util:GroupRef Id="IisUsersGroup"/>
    </util:User>

    <iis:WebAppPool Id="AppPool" Name="[SITE_APP_POOL]" ManagedRuntimeVersion="v4.0" ManagedPipelineMode="integrated" Identity="other" User="SiteUser" />
  </Component>

  <Component Id="Iis6NewSiteConfigure" Guid="YOURGUID-8592-4E69-8D80-E42745307D7A" KeyPath="yes" Permanent="no">
    <Condition><![CDATA[Installed OR (SITE_INSTALL_MODE = "NewSite" AND IISMAJORVERSION AND (IISMAJORVERSION = "#6"))]]></Condition>
    <iis:WebSite Id="NewWebSite_IIS6" Description="[SITE_NAME]"
                 AutoStart="yes" StartOnInstall="yes" ConfigureIfExists="no"
                 Directory="SITE_INSTALLDIR" ConnectionTimeout="360" SiteId="[SITE_ID]" 
                 DirProperties="WebDirProperties" WebApplication="IIS6WebApp">
      <iis:WebAddress Id="Site_IIS6_Header_Bindings" Port="[SITE_PORT]" Header="[SITE_HEADER]" />
    </iis:WebSite>
  </Component>

  <Component Id="Iis6ExistingSiteConfigure" Guid="YOURGUID-8ECB-4AC3-95B1-B7287D0AC903" KeyPath="yes" Permanent="no">
    <Condition><![CDATA[Installed OR (SITE_INSTALL_MODE = "ExistingSiteNewVDir" AND IISMAJORVERSION AND (IISMAJORVERSION = "#6"))]]></Condition>
      <iis:WebVirtualDir Id="Site_IIS6_VDir" Directory="SITE_INSTALLDIR" Alias="[SITE_VIRT_DIR]" WebSite="ExistingWebSite" 
                         DirProperties="WebDirProperties" WebApplication="IIS6WebApp"/>
  </Component>

  <Component Id="Iis6ConfigExtentions" Guid="YOURGUID-55F2-48E3-8B08-E37BA5137D8D" KeyPath="yes" Permanent="yes">
    <Condition><![CDATA[Installed OR (IISMAJORVERSION AND (IISMAJORVERSION = "#6"))]]></Condition>
    <iis:WebServiceExtension Id="ExtensionASP4" Group="ASP.NET v4.0.30319" Allow="yes" File="[FRAMEWORKROOT]v4.0.30319\aspnet_isapi.dll" Description="ASP.NET v4.0.30319"/>
  </Component>

  <Component Id="Iis7NewSiteConfigure" Guid="YOURGUID-5DF6-4071-94F4-89D1EDAE8D90" KeyPath="yes" Permanent="no">
    <Condition><![CDATA[Installed OR (SITE_INSTALL_MODE = "NewSite" AND IISMAJORVERSION AND (IISMAJORVERSION > "#6"))]]></Condition>
    <iis:WebSite Id="WebSite_IIS7" Description="[SITE_NAME]"
                 AutoStart="yes" StartOnInstall="yes" ConfigureIfExists="yes"
                 Directory="SITE_INSTALLDIR" ConnectionTimeout="360" SiteId="[SITE_ID]"
                 DirProperties="WebDirProperties" WebApplication="Iis7WebApp">
      <iis:WebAddress Id="NewSite_IIS7_Header_Binding" Port="[SITE_PORT]" Header="[SITE_HEADER]" />
    </iis:WebSite>
  </Component>

  <Component Id="Iis7ExistingSiteConfigure" Guid="YOURGUID-FBBE-4379-8C7B-CDBD08EDCBA2" KeyPath="yes" Permanent="no">
    <Condition><![CDATA[Installed OR (SITE_INSTALL_MODE = "ExistingSiteNewVDir" AND IISMAJORVERSION AND (IISMAJORVERSION > "#6"))]]></Condition>
      <iis:WebVirtualDir Id="Site_IIS7_VDir" Directory="SITE_INSTALLDIR" Alias="[SITE_VIRT_DIR]" WebSite="ExistingWebSite"
                         DirProperties="WebDirProperties" WebApplication="Iis7WebApp"/>
  </Component>
</DirectoryRef>

<ComponentGroup Id="IisSiteOrVDirCreate">
  <ComponentRef Id="AppPoolConfigure"/>
  <ComponentRef Id="Iis6NewSiteConfigure"/>
  <ComponentRef Id="Iis6ExistingSiteConfigure"/>
  <ComponentRef Id="Iis6ConfigExtentions"/>
  <ComponentRef Id="Iis7NewSiteConfigure"/>
  <ComponentRef Id="Iis7ExistingSiteConfigure"/>
</ComponentGroup>

<CustomAction Id="SetIisGroupToIUSRS" Property="IisGroup" Value="IIS_IUSRS" />
<CustomAction Id="SetIisGroupToWPG" Property="IisGroup" Value="IIS_WPG" />

<CustomAction Id="SetIisSiteUser" Property="IisSiteUser" Value="[APP_USER_DOMAIN]\[APP_USER_NAME]"/>

<InstallExecuteSequence>
  <Custom Action="SetIisGroupToIUSRS" After="AppSearch">IISMAJORVERSION>="#7"</Custom>
  <Custom Action="SetIisGroupToWPG" After="AppSearch">IISMAJORVERSION="#6"</Custom>
  <Custom Action="SetIisSiteUser" Before="InstallInitialize">1</Custom>
</InstallExecuteSequence> 
```

# php - 将图像转化为评分系统

> ID：14719082
> 
> 赞同：-7
> 
> 时间：2013-02-05T23:45:31.133
> 
> 标签：php, javascript, html, mysql, ranking

这是一个具有良好网络开发经验的人可以真正投入其中的一个：

我有一系列 4 张图片：
1\. thumbs-up.jpeg
2\. thumbs-up-unclicked.jpeg
3\. thumbs-down.jpeg
4\. thumbs-down-unclicked.jpeg

这是我现在拥有的网页，我的四张图片在鼠标悬停时会发生变化：http: [//stateofdebate.com/test.html](http://stateofdebate.com/test.html)

我想做的是能够对每个辩论主题（[http://stateofdebate.com/debatelist.php](http://stateofdebate.com/debatelist.php)）进行评分，并对论点进行排名......查看论点，注册，输入用户名和密码，并登录。然后，您可以单击任何辩论并查看论点。

有几项我不知道如何完成的任务：
1.如何将图像与 mySQL 数据库链接（我是否将它们变成某种对象..？）
2.如何将拇指向上/向下与每个项目（即如何为每个项目做一个大拇指向上/向下排名）
3\. 如何让辩论主题根据哪个向上/向下比率更好来上下移动

我知道这可能看起来很模糊，但如果你看一下链接，它可能会搞清楚。

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-05T23:56:45.700

每个用户都应该在用户表中有一条记录

```
users
id,... 
```

每个图像都应该在图像表中有一条记录

```
images
id,created_date,file_path,... 
```

每个投票都应该在联结表中有一条记录，如下所示：

```
image_votes
user_id,image_id,vote_value 
```

其中值为 0 表示反对票，1 表示赞成票，不存在投票的记录不存在

此外，对于评论，您将有一个看起来像的表格

```
image_comments
id,image_id,user_id,text,created_date 
```

那么你可以有一个类似的评论投票系统

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-05T23:59:31.313

这里有很多工作要做，但我会尽量让你指出正确的方向：

当您单击图像时，它需要转到一个 php 脚本，告诉它是否单击了“向上”或“向下”。根据点击的内容，它将在数据库中为该帖子增加一个计数器。

要连接到您的数据库并查询它： [http ://www.php.net/manual/en/mysqli.quickstart.php](http://www.php.net/manual/en/mysqli.quickstart.php)

当包含辩论主题的页面加载时，它需要查看数据库中每个帖子的喜欢和不喜欢并将其视为分数。例如，您可以执行 10 次喜欢和 3 次不喜欢这样的操作，即得分为 7。您还需要告诉数据库查询按该得分排序，因此您返回的帖子列表将按顺序排列。您可以通过几种不同的方式设置赞成和反对票，只需考虑您希望获得哪些关于投票的数据即可。例如，数据库记住谁投票给什么对你来说重要吗？

至于如何构建数据库，这有点棘手，但有许多资源可用于如何以有意义的方式设置表。查找“关系数据库”和“规范化”。

# mysql - 如何根据列值进行特定的 MySQL 计算？

> ID：14719089
> 
> 赞同：0
> 
> 时间：2013-02-05T23:46:24.260
> 
> 标签：mysql, math

有没有办法将一列与基于另一列的预定义数字相乘？根据列中的值，使用了多个预定义的数字。

例子：

桌子

```
Columns: persons_id,activity,scale 
```

价值观

```
1,swimming,4  
1,baseball,2  
1,basketball,3  
2,swimming,6  
2,basketball,3 
```

如果我的预定义数字是：6（游泳）、8（棒球）、5（篮球）

输出看起来像这样

```
1,swimming,4,24  
1,baseball,2,16  
1,basketball,2,10  
2,swimming,6,36  
2,basketball,3,15 
```

编辑：感谢大家的贡献。我最终使用了 sgeddes 的解决方案。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-05T23:49:22.300

当然，您可以使用`CASE`：

```
SELECT Persons_Id, Activity, Scale, 
   Scale * 
   CASE 
      WHEN Activity = 'swimming' THEN 6
      WHEN Activity = 'baseball' THEN 8
      WHEN Activity = 'basketball' THEN 5
      ELSE 1
   END Total
FROM YourTable 
```

祝你好运。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-05T23:49:15.457

有另一个名为 WEIGHT 的列，它是 SCALE 值的倍数。也许您可以使用触发器来计算产品以填充列。否则，一个简单的 SELECT 就可以了。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-05T23:51:55.013

你可以使用这个查询：

```
select persons_id, activity, scale, 
 scale * case when activity = 'swimming' then 6
              when activity = 'baseball' then 8
              when activity = 'basketball' then 5 end as result
from Table1 
```

但更好的解决方案是定义一个新表 Coefficients(activity, coefficient)

这样您就可以插入行：'swimming', 6 'baseball', 8 'basketball', 5

然后使用这样的东西：

```
select persons_id, activity, scale, scale * coefficient as result
from Table1 inner join Coefficients on Table1.activity = Coefficients.activity 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-02-05T23:53:28.000

您还可以使用存储值的表或创建将返回乘数的子查询：

```
select persons_id,
  t.activity,
  scale, 
  scale * s.val  as result
from yourtable t
inner join
(
  select 'swimming' activity, 6 val
  union all
  select 'baseball' activity, 8 val
  union all
  select 'basketball' activity, 5 val
) s
  on t.activity = s.activity 
```

请参阅[带有演示的 SQL Fiddle](http://www.sqlfiddle.com/#!2/71541/2)

结果是：

```
| PERSONS_ID |   ACTIVITY | SCALE | RESULT |
--------------------------------------------
|          1 |   swimming |     4 |     24 |
|          1 |   baseball |     2 |     16 |
|          1 | basketball |     3 |     15 |
|          2 |   swimming |     6 |     36 |
|          2 | basketball |     3 |     15 | 
```

# data-structures - 实现具有 O(logn) 访问和 O(logn) 插入的数据结构？

> ID：14719099
> 
> 赞同：3
> 
> 时间：2013-02-05T23:47:07.910
> 
> 标签：data-structures, indexing, insertion, random-access

有谁知道我可以在最坏情况 O(logn) 的情况下访问和删除第 k 个项目的数据结构，并且还支持在最坏情况 O(logn) 的情况下在第 k 个项目之后插入项目的操作？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-06T05:14:01.137

是的。您所描述的可以通过增强树来实现。每个节点都有一个计数器，指示其子树（包括其自身）中的节点数。对于叶节点，计数器为 1。对于根节点，计数器为节点总数。这样，您可以通过从根开始的二进制搜索找到第 k 个项目。每当您插入/删除一个元素时，您都必须更新从该位置到根的路径中的计数器。

这种树被称为[顺序统计树](http://en.wikipedia.org/wiki/Order_statistic_tree)、等级树、计数器树……

您可以在此处找到一个实现[，](http://dl.dropbox.com/u/8437476/works/countertree/doc/index.html)[在此处](http://sourceforge.net/projects/avl-array/)找到另一个实现。

请参阅 Cormen、Leiserson、Rivest 和 Stein 所著的伟大著作“算法导论”中的第 14 章“增强数据结构”。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-05T23:57:08.760

如果您需要整数索引（而不是键），请查看[rope](https://stackoverflow.com/a/2826448/533120)或[deque](https://stackoverflow.com/a/3771681/533120)，对于这些操作而言，这基本上是 O(c) 。

对于关联数据结构，典型的哈希表也将摊销 O(c)，而平衡树将 O(log(n))。

# c# - 使用 IsDefined 而不是 GetCustomAttributes 有什么好处吗

> ID：14719104
> 
> 赞同：8
> 
> 时间：2013-02-05T23:47:40.760
> 
> 标签：c#, reflection, attributes

考虑这样一种情况，即程序集包含一个或多个具有自定义属性的类型，`MyAttribute`并且您需要获取这些类型的列表。除了更紧凑的语法之外，使用[IsDefined](http://msdn.microsoft.com/en-us/library/system.attribute.isdefined.aspx)与[GetCustomAttributes](http://msdn.microsoft.com/en-us/library/88d17d13.aspx)有什么好处吗？一个人是否暴露/隐藏了另一个人没有的东西？一个比另一个更有效吗？

这是一个演示每种用法的代码示例：

```
Assembly assembly = ...
var typesWithMyAttributeFromIsDefined = 
        from type in assembly.GetTypes()
        where type.IsDefined(typeof(MyAttribute), false)
        select type;

var typesWithMyAttributeFromGetCustomAttributes = 
        from type in assembly.GetTypes()
        let attributes = type.GetCustomAttributes(typeof(MyAttribute), false)
        where attributes != null && attributes.Length > 0
        select type; 
```

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2013-02-06T00:51:55.787

用这两种方法做了一个快速测试，它似乎`IsDefined`比`GetCustomAttributes`

200000 次迭代

```
IsDefined average Ticks = 54
GetCustomAttributes average Ticks = 114 
```

希望这可以帮助 ：）

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2016-08-31T22:14:31.413

正如萨达姆所展示的，`IsDefined`比 更有效`GetCustomAttributes`。这是可以预料的。

如此[处](https://msdn.microsoft.com/en-us/library/mt653983.aspx)所述，将属性`MyAttribute`应用于类`MyClass`在概念上等同于创建`MyAttribute`实例。`MyClass`但是，除非像 with 那样查询属性，否则实例化实际上不会发生`GetCustomAttributes`。

`IsDefined`，另一方面，不实例化`MyAttribute`。

# c - 对于 fork 进程，getenv($PATH) 为空白

> ID：14719107
> 
> 赞同：-2
> 
> 时间：2013-02-05T23:47:53.353
> 
> 标签：c, fork

所以我正在分叉我的程序，并再次执行相同的程序。

该程序在开始时通过 getenv("PATH"); 解析 $PATH 环境变量；但由于某种原因，子进程的 env $PATH 是空的。

```
char *path = getenv("PATH");
if(fork() == 0)
{
    execve(path, argv, NULL); 
}
else //parent
{
    wait(0);
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-05T23:49:53.610

这不是你使用的方式`execve()`。第一个参数是**可执行文件**的路径，而不是 PATH 环境变量。第三个参数是您为子进程指定环境的位置，当您在那里传递 NULL 时，子进程将不会继承任何环境变量（包括 PATH）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-05T23:50:53.003

“原因”是您为 的最后一个参数传递了一个 NULL `execve`，它应该是一个以 NULL 结尾的 name=value 字符串数组，代表新进程的环境；传递 NULL 意味着孩子得到一个空的环境。

您还尝试执行扩展的 PATH 变量，这从一开始就没有什么意义。

# html - 是否仅在禁用 Javascript 时才下载 noscript 标记中的图像？

> ID：14719111
> 
> 赞同：19
> 
> 时间：2013-02-05T23:48:18.773
> 
> 标签：html, http, background-image, image, noscript

考虑以下示例：

```
<noscript>
    <img class="photo" src="example.png">
</noscript> 
```

客户端是否仅在禁用 Javascript 时才下载图像文件？（我知道如果在本例中禁用了 Javascript，客户端只能看到图像）

我问的原因是因为我一直在为外部 CSS 中的几个背景图像属性使用 base64 数据 URI（避免 http 请求）。我还想通过外部 Javascript 更新它们的值，将 base64 数据 URI 用于某些 img 标签的 src 值（以保留缓存的好处）。

本质上，这样做的重点是避免/限制 http 请求，所以我想知道我是否可以优雅地降级并且仅在禁用 Javascript 时才获取图像文件？还是无论如何都下载了图像？

* * *

## 回答 #1

> 赞同：18
> 
> 时间：2013-12-22T16:41:58.043

**简短回答：**
**不，图像不会在`<noscript>`元素内下载**

**技术答案：**

我刚刚在我的个人网站上对禁用 JavaScript 的功能进行了一些测试，并看到了这篇文章……顺便说一句，JavaScript 仍然被禁用。

好吧，在此网页的最顶部，Stack Overflow 有一条警告消息，其中指出：

“Stack Overflow 在启用 JavaScript 的情况下效果最佳”</p>

作为那种倾向于在我查看的几乎*每个网站*（！）上“查看源代码”的网络极客，消息的 HTML 代码如下：

```
<noscript>
    <div id="noscript-warning">Stack Overflow works best with JavaScript enabled<img src="http://example.com/path/to/1x1-pixel.gif" alt="" class="dno"></div>
</noscript> 
```

那里没有什么太开创性的。然而，让我感兴趣的是`IMG`元素，它引用了一个 1px x 1px 的不可见图像。

我*假设*分析/统计软件必须使用此图像来检测有多少用户在没有 JavaScript 的情况下进行浏览。如果这个假设*是*正确的（并且没有任何其他原因在这里使用我在这里忽略的空白 1x1 像素图像），那么这基本上可以确认以下内容：**浏览器*不会*下载元素中任何内容的`NOSCRIPT`内容**，*除了**JavaScript 实际上被禁用*的情况。（而且我很高兴地说，似乎没有任何复古的 98 式布局技术在进行中！）;-)

（PS——我希望我不会因为指出这一点而冒犯 Stack Exchange 网络上的任何人！）

* * *

## 回答 #2

> 赞同：14
> 
> 时间：2013-02-06T06:53:20.250

HTML 4.01 规范只是说`noscript`在某些情况下不呈现的内容。但是，这表明浏览器在这种情况下不应该根据其内容执行任何 GET 操作，因为这样的操作将毫无意义并且会降低效率。

HTML5 草案更加明确，可能反映了实际的浏览器行为。它强调了[`noscript`元素](http://www.w3.org/TR/html5/scripting-1.html#the-noscript-element)：“它的工作原理是在启用脚本时'关闭'解析器，以便元素的内容被视为纯文本而不是真实元素”。（该注释涉及为什么`noscript`在使用 XHTML 语法时不起作用，但它也揭示了它的工作原理，何时起作用。）

所以我们可以预期，当启用脚本时，`noscript`甚至不会解析 的内容（除了识别结束标记）。Blender 的回答似乎证实了这一点，我对 Firefox 的小实验也是如此：

```
<img src=foo style="foo: 1">
<noscript>
<img src=bar style="bla: 1">
</noscript> 
```

启用脚本时，Firefox 发出失败的 GET 请求`foo`但没有请求。`bar`此外，它`foo: 1`在错误控制台中显示关于错误 CSS 代码的警告，但没有关于`bla: 1`. 所以显然`img`标签甚至没有被解析。

但是，我看不出这个问题与作为提出问题的理由所呈现的场景有什么关系。我认为您在`img`外部使用了一个元素`noscript`，并使用 URL 将所需的初始内容放在那里`data:`（当脚本被禁用时，它将作为后备保留为最终内容）。

# c# - 如何将可空枚举序列化为属性

> ID：14719112
> 
> 赞同：2
> 
> 时间：2013-02-05T23:48:20.947
> 
> 标签：c#, xml-serialization

我有一个需要从 xml 反序列化的类，它有一个枚举属性，该属性作为属性存储在 xml 中。有时，此属性可能会丢失或具有“”作为值。如何让序列化程序处理使 BorrowerResidencyType 属性可为空的问题？

XML:

```
<_RESIDENCE _StreetAddress="" _City="San Jose" _State="CA" BorrowerResidencyType="" />
<_RESIDENCE _StreetAddress="" _City="San Jose" _State="CA"  /> 
```

C＃：

```
[System.CodeDom.Compiler.GeneratedCodeAttribute ( "System.Xml", "4.0.30319.17929" )]
[System.SerializableAttribute ()]
[System.Xml.Serialization.XmlTypeAttribute ( AnonymousType = true )]
public enum _RESIDENCEBorrowerResidencyType
{

    /// <remarks/>
    Current,

    /// <remarks/>
    Prior,
}

public class Test{
public string StreetAddress{get;set;}
public string City{get;set;}
[System.Xml.Serialization.XmlAttributeAttribute ()]
public _RESIDENCEBorrowerResidencyType BorrowerResidencyType{get;set;}
} 
```

是否有另一个库可以更智能地处理这种情况？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-02-06T00:45:26.623

也许是这样的：

```
public enum _RESIDENCEBorrowerResidencyType
{
    [XmlEnum(Name="")]
    Default = 0,

    Current,
    Prior
} 
```

# python - Sublime text 2错误：构建游戏时

> ID：14719117
> 
> 赞同：0
> 
> 时间：2013-02-05T23:49:03.920
> 
> 标签：python, pygame, sublimetext2, building, tic-tac-toe

我不断收到此错误

```
Welcome to Tic Tac Toe
Do you want to be X or O?
Traceback (most recent call last):
  File "C:\Python27\last try.py", line 145, in <module>
    playerLetter, computerLetter = inputPlayerLetter()
  File "C:\Python27\last try.py", line 27, in inputPlayerLetter
    letter = input().upper()
EOFError: EOF when reading a line
Finished in 0.2s with exit code 1 
```

当我将代码放入 python tic tac toe 游戏时。有人可以帮忙吗？！

井字游戏的代码来自[http://inventwithpython.com/tictactoe.py](http://inventwithpython.com/tictactoe.py)

*注意*：我尝试安装和配置 sublimerepl 并没有解决问题。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-05T23:51:53.813

您需要在终端中运行代码，因为该`input()`函数要求您输入一些文本。

Sublime 环境是不够的。

# php - 在谷歌表单之上建立一个调查系统

> ID：14719121
> 
> 赞同：1
> 
> 时间：2013-02-05T23:49:18.047
> 
> 标签：php, wordpress, google-drive-api, google-spreadsheet-api, survey

我们使用 wordpress 在谷歌表单之上构建了一个调查工具。

很简单，你创建一个 google 表单，创建一个私有打开链接，放入一个 wordpress 后端页面，然后系统处理模块服务器端并生成必要的 html 文件。当用户填写表单并发送它时，服务器通过 ajax 使用 zend gdata 将结果写入连接到表单等的电子表格上。

但是这个系统是有限的，也因为谷歌表格是相当有限的。我们想改进它。这就是为什么我要征求您的意见以升级系统以具有更多功能：

*   我们希望能够保持表单打开，以便用户可以在多个场合填写。理论上，我们需要知道电子表格行连接到哪个用户。这可以通过保存某种 ID 键来识别用户来完成，但是我们不知道如何重新填充表单中的字段，因为从表单创建的电子表格不保留任何类型的键来连接列和表单域。

*   我们需要更多的字段类型！就像一个文件上传字段，将上传的文件放在特定的 gdrive 文件夹中。

*   我们需要查看单个条目的数据，而 google 只为您提供很难阅读的整个电子表格。

这不是一件容易的事！我们应该使用哪些解决方案来解决这些问题？

非常感谢！

升级：

我们决定通过 api 访问混合使用谷歌表单、谷歌融合表、谷歌图表。这是简化的算法：

1.  管理员用户通过谷歌表单创建他的表单并保存 URL。要拥有更多字段类型，用户可以在字段注释中添加标签，例如 [file] 用于文件上传。
2.  该网址被放入我们系统的管理页面。该页面获取表单页面的内容并推断为一个数组，对于每个字段、标题、ID、类型和评论；如果评论中有一些标签，这将成为字段类型。
3.  使用这些数据，如果不存在，系统会创建一个包含融合表的文件夹。如果存在文件字段，则会生成另一个子文件夹。这些文件夹和文件的地址被保存。
4.  使用数组数据，在融合表中为每个数组字段创建一列，列标题为“[field_ID field_type]field_title”，外加一列用于最终用户 ID。
5.  管理员用户可以更多地打开或关闭表单。
6.  当用户进入表单页面时，该数组用于生成表单。如果系统在内存中没有用户 ID，则意味着用户从未填写过表单。否则系统将使用用户 ID 从融合表中获取数据以填充表单。
7.  当用户填写表单时，使用字段 ID 作为参考以及用户 ID 将条目提供给列。用户 ID 也存储在系统中，记住用户已经填写了表单，如第 5 点所述。如果上传文件，它们将存储在 gdrive 文件夹中。
8.  因此，管理员用户可以进入管理页面查看有多少人填写了表格，可以要求单个用户数据，使用谷歌图表获取摘要数据，可以从单个用户、每个用户或摘要下载数据的 pdf .

当然这是想法，我们必须建立它。第一个问题是我们是否应该使用javascript或php与google通信，所以在客户端或服务器端进行处理......

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-02T16:40:33.647

如果您询问 Javascript 与 PHP，您应该知道由于跨域安全问题，Javascript API 无法写入 Google 电子表格。

PHP 可以，因为它是一种服务器端语言。Zend Framework 使与 Google 电子表格的交互变得容易。 [http://framework.zend.com/manual/1.12/en/zend.gdata.spreadsheets.html](http://framework.zend.com/manual/1.12/en/zend.gdata.spreadsheets.html)

因此，如果这是您的问题，请使用 PHP。

# javascript - 添加 target=“_blank” 以与 JavaScript 链接

> ID：14719127
> 
> 赞同：1
> 
> 时间：2013-02-05T23:49:55.330
> 
> 标签：javascript

简单的问题：如何在以下函数中将 target="_blank" 添加到返回的链接中？

```
 String.prototype.parseHashtag = function() {
    return this.replace(/[#]+[A-Za-z0-9-_]+/g, function(t) {
        var tag = t.replace("#","%23")
        return t.link("http://search.twitter.com/search?q="+tag);
    }); 
```

它是这样打印的：

```
$("#twitterFeed span").html(data[twitterNumber].text.replace(urlRegexp, "<a target=_blank href='$1'>$1</a>").parseHashtag().parseUsername()); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-05T23:53:30.067

你可能必须自己做：

```
return t.link("http://search.twitter.com/search?q="+tag)
    .replace(/^<a/, '$& target="_blank"'); 
```

# c - 编译器说 pow 是未定义的，即使我使用 -lm 链接，但编译时

> ID：14719128
> 
> 赞同：0
> 
> 时间：2013-02-05T23:49:56.747
> 
> 标签：c, compiler-construction, linker, math.h

```
value *= pow(10, 3); // this one compiles
value *= pow(10, aVar); // this one produces this error:
                         //Number.c:(.text+0x469): undefined reference to `pow' 
```

aVar 是一个 int 变量。

会是什么呢？

我正在使用生成文件。我正在执行“make lexanc”我的 makefile 看起来像这样：

```
lexanc:  lexandr.o lexanc.o scanner.o printtoken.o token.h lexan.h Number.o
    cc -o lexanc -lm lexandr.o lexanc.o scanner.o printtoken.o Number.o
...
Number.o: Number.c Number.h lexan.h
    cc -c Number.c

lexanc.o: lexanc.c token.h lexan.h Number.h
    cc -c lexanc.c
... 
```

我的 cc 版本是：laygr@xxx$ cc --version cc (Ubuntu/Linaro 4.6.3-1ubuntu5) 4.6.3

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-02-06T00:03:48.503

库应该在编译选项中的所有对象之后。将其更改为：

```
lexanc:  lexandr.o lexanc.o scanner.o printtoken.o token.h lexan.h Number.o
    cc -o lexanc lexandr.o lexanc.o scanner.o printtoken.o Number.o -lm 
```

注意`-lm`已移至最后。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-05T23:56:49.917

~~你包括`math.h`吗？尝试将`-Wall -ansi -pedantic`命令行参数添加到 C 编译器。`CFLAGS`为此目的，通常有一个地方的定义。~~

**编辑**
这实际上是一个我完全忘记的常见问题。将 移动`-lm`到参数列表的末尾。更具体地说，它需要**在**所有对象之后。请查看[此问题的答案以](https://stackoverflow.com/questions/7824439/c-math-linker-problems-on-ubuntu-11-10)获取更多详细信息。

# eclipse - 如何防止 Eclipse 在 Ctrl+Shift+F 上缩进 textarea 的内容？

> ID：14719136
> 
> 赞同：1
> 
> 时间：2013-02-05T23:50:40.763
> 
> 标签：eclipse, jsp

我正在使用 Eclipse (Juno)。我在一个 JSP 页面上有一个表单，它的文本区域如下：

```
<textarea name="t"><c:out value="${val}" /></textarea> 
```

当我格式化代码（ctrl shift F）时，它变成：

```
<textarea name="t">
    <c:out value="${val}" />
</textarea> 
```

这很好，只是它在文本区域中插入了额外的空格和行。我喜欢使用 Eclipse 格式化我的代码，但是当提交表单时，空格/行会被添加到数据库中。更糟糕的是，每次再次提交该表单时，它都会变得复杂。我究竟做错了什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-06T02:09:01.473

尝试将“textarea”添加到 Web->HTML Files->Editor 首选项页面上的内联元素列表中。

# php - 如何使用 javascript 和 PHP 将 HTML 字符串数据插入 MySQL？

> ID：14719137
> 
> 赞同：-4
> 
> 时间：2013-02-05T23:50:51.927
> 
> 标签：php, javascript, jquery, html, mysql

使用 jQuery，我可以在 HTML 文档上生成这样的字符串：

```
num0=500356,num1=853734,num2=981608,num3=795915,num4=824111,num5=831158,num6=364091,num7=368537,num8=410001 
```

此数据不在表单或输入 HTML 标记中。它是分配给变量的字符串。

有没有办法使用 javascript 和 PHP 捕获这个字符串，然后将 numX 插入到 mysql db 中，例如？db 将具有 num0、num1、num2、num3、num4、num5、num6、num7、num8 的字段

```
num0=500356
num1=853734
num2=981608
num3=795915
num4=824111
num5=831158
num6=364091
num7=368537
num8=410001 
```

感谢您的任何帮助。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-05T23:56:27.017

```
$ar = explode("=", $var);
$ar[0] // num0
$ar[1] // 500356
$ar[2] // num1
$ar[3] // 853734 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-06T04:48:00.377

我不确定，但你可以试试这个。

```
$str = explode(",","num0=500356,num1=853734,num2=981608,num3=795915,num4=824111,num5=831158,num6=364091,num7=368537,num8=410001");

foreach($str as $s){
    echo "<pre>";
    print_r($s);
} 
```

它会像这样输出。

```
num0=500356
num1=853734
num2=981608
num3=795915
num4=824111
num5=831158
num6=364091
num7=368537
num8=410001 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-05T23:55:34.833

对的，这是可能的。

如果文档在您的服务器中，您可以在此参数可用时进行 ajax 调用，然后使用 php.ini 将其插入数据库。

如果它们在另一台服务器上，您只需要制作一个 php 脚本来获取它们并插入。

# c# - Resharper：从基类中拉出成员？

> ID：14719140
> 
> 赞同：0
> 
> 时间：2013-02-05T23:51:14.567
> 
> 标签：c#, resharper, resharper-7.1

使用 Resharper 7.1，C#

我有一门`Apple`基于`Fruit`

```
public partial class Apple: Fruit, IEat 
```

使用命令**Refactor/Pull Members Up**，如何将**Fruit.Eat()**方法添加到接口？

Resharper UI 只允许我添加`Apple`成员。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-03-13T15:23:08.990

The code above (where `Apple` inherits from both `Fruit` and `IEat`) is redundant. I think how you want it is that `Apple` inherits from `Fruit`

```
public class Apple : Fruit 
```

and `Fruit` inherits from `IEat`

```
public class Fruit : IEat 
```

If `Fruit` inherits from `IEat` as I have suggested here, then you should be able to do the Resharper "pull members up" from the Fruit class.

If `Fruit` doesn't inherit from `IEat`, you can't do the refactoring.

# git - 如何在git中重用分支？

> ID：14719143
> 
> 赞同：3
> 
> 时间：2013-02-05T23:51:43.687
> 
> 标签：git, git-branch, git-merge

*   我有一个开始但没有结束的分支 featureA。
*   然后请求 featureB 并在 master 上完成。
*   然后featureB合并到master。
*   现在我将 featureA 合并到 master 中，因为它需要 featureB。
*   现在我想创建一个名为 featureA 的新分支，因为它是相同的功能，但我不能。

什么是最好的事情，或者将来管理这种事情？我不想失去我的树枝……我想保留每一步的历史。多谢！

```
featB            /--\
master --------------X--X--------
featA       \----------/   \-- I want to continue here the featB and not 
                               creating featB2, without losing the history. 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-16T13:24:19.343

这个问题也写得不好。那是我缺乏 git 知识。我的意思是如何使用相同的分支名称，这是我正在寻找的答案：

*   将专长 A 合并到大师中
*   删除专长A分支
*   再次创建专长A分支

我不知道你可以删除一个分支，或者如果被删除会发生什么（丢失历史记录左右）。

据我目前的理解，分支只是指向一些提交的指针。只是要知道提交没有丢失，它被赋予了一个名称（分支的名称）。当您将一个分支合并到另一个分支时，指针仍会在合并提交之前的提交处持续存在。

我希望我以前知道...但感谢@jthill 的评论

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-06T00:19:03.100

很简单，只是想通了：将master合并到featA中，我又得到了featA ..希望是一个好习惯

# php - javascript显示中的时区偏移

> ID：14719147
> 
> 赞同：3
> 
> 时间：2013-02-05T23:52:19.123
> 
> 标签：php, javascript, mysql, datepicker

我遇到了使用 javascript datepicker 显示并允许用户从可用日程安排日期的日历中选择日期以进行房间预订的常见问题。

浏览器的时区转换意味着这些日期总是有一定的偏差，因此通常在向用户显示保留日期时，日期将落在查看者的“明天”，当服务器（资产本地的时区或存储在数据库中的房间）将它们显示为“今天”。

我希望用户的浏览器忽略 javascript 日期转换，只使用数据库传入的实际日期时间。

然而，这甚至发生在像这样一个非常简单的例子上：

```
var date = '2013-02-05';

var newdate = new Date(date);

console.log(newdate); // Mon Feb 04 2013 16:00:00 GMT-0800 (PST) 
```

浏览器似乎`date`假定该变量为 GMT，当我从中创建一个 javascript 日期对象时，它会将 GMT 时间转换为我的本地时间。

在这种情况下，最好的做法是在数据库中使用 GMT 日期，并将站点的本地时间偏移设置为 javascript 中的变量，然后可用于偏移显示给最终用户的日期，并再次偏移收到的日期从最终用户插入数据库？

这很令人困惑，因为有很多潜在的陷阱——PHP 语言环境、mysql 语言环境或浏览器的语言环境都可能会影响它并弄乱最终日期。任何有关确保一致的日期值的建议表示赞赏！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-06T00:22:01.620

好问题，处理时区是一团糟。幸运的是，Javascript 的大多数方法都有 UTC 变体。请参阅[http://en.wikipedia.org/wiki/Coordinated_Universal_Time](http://en.wikipedia.org/wiki/Coordinated_Universal_Time)

*我认为最好的办法是在任何地方都使用 UTC 日期（可能*除了 UI 之外）。确保服务器使用和存储 UTC 日期，并在任何地方使用 javascript UTC 方法。这是第一步也是最重要的一步，因此您知道日期是一致的。

你如何在 UI 中呈现日期并不那么简单，而且有点取决于目标受众、应用程序性质等。我认为这更像是一个讨论的主题，在 Stack Overflow 中有点无法回答（还有其他用于主观思考的论坛）。

我想说不要相信浏览器或任何类型的地理位置来自动转换时区；它应该是用户可配置的，或者可能是组/项目/安装特定设置。一些软件主要在一个时区内使用，如果他们习惯于在某个“标准”时间进行交流，那么尝试自动转换时区可能会让用户感到困惑和烦恼。如果他或她正在旅行，用户是否应该看到不同时区的时间？有时它是有意义的，有时不是，但至少要确保用户在阅读和输入时间时都知道你遵循什么逻辑。

我开发项目管理软件，重要的是这些事情由应用程序和用户（！）明确地处理。我的方法是始终强制使用 UTC 进行显示和输入。在每个日期中也可以清楚地看到它是 UTC。处理各种时区会很快变得棘手，我决定最好不要这样做。我在 UI 的某些部分有一些助手，它们在用户本地时区等中以精美的形式显示相同的信息。有一个项目范围的设置来“隐藏所有与时区相关的东西，并强制时区 x”，可用于已知永远不会跨越时区边界的较小项目，有使用某个区域的协议，或者它只是一个给定的，最好不要用这种复杂性来打扰用户。

编辑：我应该补充一点，作为一个例子，这会变得多么多毛，有时一次只是一次。在某些情况下，15:00 发生的事件可能意味着它发生在 15:00 在不同的地方，在各自的当地时区。呃……

# postfix-mta - Postfix recipient_delimiter 是否需要多个字符？

> ID：14719150
> 
> 赞同：0
> 
> 时间：2013-02-05T23:52:42.493
> 
> 标签：postfix-mta, delimiter

根据此文档，没有说明分隔符是否可以是多个字符或字符串。有人可以确认是否可以使用字符串作为分隔符？也许像“-----”之类的东西？

[http://www.postfix.org/postconf.5.html#recipient_delimiter](http://www.postfix.org/postconf.5.html#recipient_delimiter)

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-02-06T01:21:07.447

阅读源代码后，看起来该变量最终被用作 int。所以分隔符只能是单个字符。

但是，从 Postfix 2.11 开始，可以有多个分隔符：

> 当 recipient_delimiter 集包含多个字符（Postfix 2.11 及更高版本）时，用户名或 .forward 文件名与其扩展名由匹配 recipient_delimiter 集的第一个字符分隔。

来源：[http ://www.postfix.org/postconf.5.html#recipient_delimiter](http://www.postfix.org/postconf.5.html#recipient_delimiter)

# mysql - 三个相关表中的记录总数

> ID：14719151
> 
> 赞同：2
> 
> 时间：2013-02-05T23:52:41.893
> 
> 标签：mysql, sql, sum, subquery

我有三个相关的表：

*   课程
*   学生
*   老师

每个`course`都由 a `teacher`to many给出`students`。

我可以找到参加课程的学生人数：

```
SELECT c.id, count(*) FROM course as c, student as s
WHERE c.id = s.course_id
GROUP BY c.id; 
```

我可以找到老师讲授的所有课程：

```
SELECT t.id, c.id FROM course as c, teacher as t
WHERE t.id = c.teacher_id; 
```

我想知道每个老师教了多少学生。以下查询是否正确？

```
SELECT t.id, sum(x.count_s) 
FROM 
   (SELECT count(*) AS count_s FROM course as c2, student as s
      WHERE c2.id = s.course_id AND c2.id = c.id
      GROUP BY c2.id) as x, 
   course as c, teacher as t
WHERE t.id = c.teacher_id; 
```

不幸的是，我无法直接对其进行测试，因为这实际上是对手头实际问题的简化。我需要找出适用于简化问题的解决方案。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-06T00:00:32.460

您只需要`LEFT JOIN`对学生使用课程，因为老师不可能教没有课程的学生。

```
SELECT  a.id as Teacher_ID,
        b.id as CourseID,
        COUNT(c.studentID) totalStudents
FROM    teacher a
        INNER JOIN course b
            ON b.teacher_ID = a.id
        LEFT JOIN student c
            ON b.id = c.course_ID
GROUP   BY a.id, b.id 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-02-05T23:57:06.720

要回答你的问题，不。您不能`c.id`在别名为`x`. 那应该会引发错误。

`x`但是，如果您删除它，那么您的查询有可能在别名为和的内联视图之间返回一个夸大的计数，这是由于半笛卡尔积`c`。

所以该谓词需要重新定位，并且您需要从返回 c2.id `x`（即，将其添加到 SELECT 列表中，您已经在 GROUP BY 中引用了它）。

这相当于您的查询，只是重写以替换逗号连接运算符并将连接谓词重新定位到 ON 子句。此声明与您的相同，无效）：

```
SELECT t.id
     , SUM(x.count_s) 
  FROM ( SELECT count(*) AS count_s 
           FROM course c2
           JOIN student s
             ON c2.id = s.course_id
            AND c2.id = c.id        -- INVALID here
          GROUP
             BY c2.id
       ) x
 CROSS                              -- no join predicate 
  JOIN course c
  JOIN teacher t
    ON t.id = c.teacher_id 
```

要解决此问题，请将 c2.id 添加到 SELECT 列表中`x`，然后重新定位该谓词。像这样的东西：

```
SELECT t.id
     , SUM(x.count_s) 
  FROM ( SELECT count(*) AS count_s
              , c2.id                 -- added
           FROM course c2
           JOIN student s
             ON c2.id = s.course_id
       --   AND c2.id = c.id          -- relocated (removed from here)
          GROUP
             BY c2.id
       ) x
  JOIN course c
    ON x.id = c.id                    -- relocated (added here)
  JOIN teacher t
    ON t.id = c.teacher_id 
```

假设它`id`是 UNIQUE 并且 NOT NULL in `course`，该查询将返回一个合理的计数（尽管零计数将“丢失”）。

要返回“零”计数，您需要使用 OUTER 联接。因为我总是更喜欢使用 LEFT JOIN，所以最外层查询中的表/内联视图需要重新排序：

```
SELECT t.id
     , IFNULL(SUM(x.count_s),0)
  FROM teacher t
  LEFT
  JOIN course c
    ON c.teacher_id = t.id
  LEFT
  JOIN ( SELECT count(*) AS count_s
              , c2.id                 -- added
           FROM course c2
           JOIN student s
             ON c2.id = s.course_id
       --   AND c2.id = c.id          -- relocated (removed from here)
          GROUP
             BY c2.id
       ) x
    ON x.id = c.id                    -- relocated (added here) 
```

假设这`id`是每个表上的 PRIMARY KEY（或等效的 UNIQUE 和 NOT NULL），那么这将返回“正确”计数。

不必将`course`表格包含在别名为`x`. GROUP BY s.course_id 就足够了。

```
SELECT t.id
     , IFNULL(SUM(x.count_s),0)
  FROM teacher t
  LEFT
  JOIN course c
    ON c.teacher_id = t.id
  LEFT
  JOIN ( SELECT count(*) AS count_s
              , s.course_id 
           FROM student s
          GROUP 
             BY s.course_id
       ) x
    ON x.course_id = c.id                 -- relocated (added here) 
```

该查询将返回一个有效的“计数”。

* * *

一个更简单的陈述会更容易理解。这是我得到计数​​的方法：

```
SELECT t.id        AS teacher_id
     , COUNT(s.id) AS how_many_students_taught
  FROM teacher t
  LEFT
  JOIN course c
    ON c.id = t.course_id
  LEFT
  JOIN student s
    ON s.course_id = c.id
 GROUP
    BY t.id 
```

* * *

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-02-05T23:57:10.853

假设您想要老师教过的学生人数不同，那么这应该可行：

```
SELECT t.Id, COUNT(DISTINCT s.id)
FROM Teacher t 
   LEFT JOIN Course c ON t.id = c.teacher_id
   LEFT JOIN Student s ON c.id = s.course_id
GROUP BY t.Id 
```

但是，如果您想知道每位老师在每门课程中教授了多少学生，请尝试以下操作：

```
SELECT t.Id, c.Id, COUNT(DISTINCT s.id)
FROM Teacher t 
   LEFT JOIN Course c ON t.id = c.teacher_id
   LEFT JOIN Student s ON c.id = s.course_id
GROUP BY t.Id, c.Id 
```

祝你好运。

# berkeley-db-je - BDB JE 异常

> ID：14719154
> 
> 赞同：0
> 
> 时间：2013-02-05T23:53:16.400
> 
> 标签：berkeley-db-je

```
com.sleepycat.je.DatabaseException: (JE 3.2.76) fetchTarget of 0x45/0x27aa63 parent IN=3316846 lastFullVersion=0x45/0x47b147 parent.getDirty()=false state=0 com.sleepycat.je.log.DbChecksumException: (JE 3.2.76) Read invalid log entry type: 97
at com.sleepycat.je.tree.IN.fetchTarget(IN.java:989)
at com.sleepycat.je.tree.Tree.getNextBinInternal(Tree.java:1441)
at com.sleepycat.je.tree.Tree.getNextBin(Tree.java:1306)
at com.sleepycat.je.dbi.CursorImpl.getNextWithKeyChangeStatus(CursorImpl.java:1498)
at com.sleepycat.je.dbi.CursorImpl.getNext(CursorImpl.java:1368)
at com.sleepycat.je.Cursor.retrieveNextAllowPhantoms(Cursor.java:1587)
at com.sleepycat.je.Cursor.retrieveNext(Cursor.java:1397)
at com.sleepycat.je.Cursor.getNext(Cursor.java:456)
at browse.bdb.dao.JENodeDao.load(JENodeDao.java:76)
    .................my code..................
at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:39)
at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:25)
at java.lang.reflect.Method.invoke(Method.java:597)
at com.intellij.rt.execution.application.AppMain.main(AppMain.java:120)

Caused by: com.sleepycat.je.log.DbChecksumException: (JE 3.2.76) Read invalid log entry type: 97
at com.sleepycat.je.log.LogEntryHeader.<init>(LogEntryHeader.java:69)
at com.sleepycat.je.log.LogManager.getLogEntryFromLogSource(LogManager.java:631)
at com.sleepycat.je.log.LogManager.getLogEntry(LogManager.java:597)
at com.sleepycat.je.tree.IN.fetchTarget(IN.java:958)
... 16 more 
```

怎么了 ？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-14T22:43:39.483

可能是某些日志文件已损坏，请在打开时尝试恢复环境。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-15T19:57:35.093

出现此异常是因为我尝试读取尚未刷新到文件系统的记录。
对于 JE，它是： environment.sync();
对于 JNI，它是： environment.syncCache(null);

# android - Android：需要异步线程？

> ID：14719157
> 
> 赞同：1
> 
> 时间：2013-02-05T23:53:30.603
> 
> 标签：android, android-asynctask, android-activity

我正在创建一个应用程序，该应用程序涉及从 Assets 文件夹中的文本文件中读取数据。对于每个文件，它将数据存储在单独的`ArrayList`. 这些文件在活动的onCreate()方法中一个接一个地读取。所有文本文件加起来总共 1.8 MB，在模拟器上，加载活动当前需要 12 秒。该应用程序不会在模拟器上崩溃（只需大约 12 秒）。

我读过关于异步线程的文章，但过去我从来没有需要它们。我正计划使用某种消息或进度条来通知用户活动实际上正在加载并且没有崩溃。

所以我的问题是：即使应用程序在加载活动时没有崩溃，我是否仍然应该将文件的读取放在异步或不同的线程上？如果是这样，我将如何正确地做到这一点？（我以前从未这样做过。）

这是读取文本文件的示例代码：

```
@Override
protected void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.activity_name);

    populateArrayLists();

}

public void populateArrayLists() {
    BufferedReader br = null;
    try {
        br = new BufferedReader(new InputStreamReader(getAssets().open(
                "text1.txt")));
        String text;
        while ((word = br.readLine()) != null) {
            ArrayList1.add(text);
        }                           
    } catch (IOException e) {
        e.printStackTrace();
    } finally {
        try {
            br.close(); // stop reading
        } catch (IOException ex) {
            ex.printStackTrace();
        }
    }

    br = null;
    try {
        br = new BufferedReader(new InputStreamReader(getAssets().open(
                "text2.txt")));

    // the same process is duplicated for 1-15
    // it may not be the best or most efficient way but it works 
```

任何帮助，将不胜感激。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-05T23:56:21.913

是的，你需要一个后台线程。[Loader api](http://developer.android.com/guide/components/loaders.html)可能是您最简单的选择。

这将允许您至少在文件加载时显示通知并提供一些内容。如果您正在这样做，甚至可以加载它们并逐步显示数据。

**编辑：加载器是**[兼容库](http://developer.android.com/tools/extras/support-library.html)中可用的 3.0 功能。如果您不愿意添加依赖项，您可以随时退回到[AsyncTask](http://developer.android.com/reference/android/os/AsyncTask.html)，在这种情况下您可以查看[this](http://blogactivity.wordpress.com/2011/09/01/proper-use-of-asynctask/)。

# command-line - Lithium：如何通过命令行访问操作？

> ID：14719158
> 
> 赞同：2
> 
> 时间：2013-02-05T23:53:31.280
> 
> 标签：command-line, lithium

我正在尝试通过 CLI 运行操作。动作是`UsersController::test()`

所以，我运行这个： `php libraries/lithium/console/lithium.php \\app\\controllers\\UsersController test`

但我一直遇到这个错误： `PHP Fatal error: Call to undefined method lithium\console\Request::get() in /var/www/example.com/libraries/lithium/action/Controller.php on line 154`

我究竟做错了什么？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-02-06T02:58:10.423

请参阅[http://li3.me/docs/lithium/console](http://li3.me/docs/lithium/console)以供参考。

据我所知，直接从命令行调用控制器是不可能的。尽管从您的错误来看，它似乎正在尝试做某事。

相反，创建一个扩展自的类`\lithium\console\Command`并将其放置在`namespace app\extensions\command`. 例如，命名该类`Users`。在该类中，创建一个调用方法`test()`，当您通过 cli 调用命令时将运行该方法。

现在，当您运行 li3（或lithium.php）时，它应该打印所有可用的命令，并且您应该在列表中看到您的命令。如果您已添加到您的 bin 路径，您会调用`li3 users test`它并且应该运行它。`lithium/console/li3`或者你可以调用`php -f path/to/lithium.php -- users test`which 应该做同样的事情。如果您遗漏了`test`，它将在您的`app\extensions\console\Users`类中查找名为 run() 的方法并调用它。

您可能会创建控制器的实例并调用 test() 方法，但正如您所见，从 Web 浏览器运行时可用的 Request 类与从命令行运行时的 Request 类不同。最好将控制器方法中的业务逻辑移至另一个类，然后将控制器的请求参数传递给该方法。然后从控制台命令类中，您将类似地调用相同的集中式方法。

# c# - 自定义 DataSourceControl 上的数据序列化

> ID：14719160
> 
> 赞同：0
> 
> 时间：2013-02-05T23:53:38.483
> 
> 标签：c#, asp.net, ienumerable, xmlserializer, .net-datasourcecontrol

我正在编写一个自定义`DataSourceControl`，它将基本上具有 Select 功能，就像正常工作一样`ObjectDataSource`，具有 a`TypeName`和`SelectMethod`属性。

来自 TypeName 类的数据将保存在由参数值的哈希和 ContextName 索引的文件中。这意味着，每次 GridView 请求 DataSource 并给出相同的参数值时，控件都会找到相应的 File 并从那里加载数据。事实上，每个不同的参数值组合都会生成一个包含数据的新文件。

在某些情况下，当数据需要很长时间才能从数据库中处理和检索并且不需要对用户实时（总是从最后一天开始）时，此功能可能非常有用。

我遇到的主要困难是序列化来自 SelectMethod 的数据。我唯一知道的是返回类型将是`IEnumerable`. 我`XMLSerializer`用于保存和检索文件中的数据内容，但是在尝试序列化时它给了我一个错误`Cannot serialize interface`。

这是执行 SelectMethod 并执行序列化部分的基本代码：

```
//Gets the select type
Type selectType = Type.GetType(TypeName);

//Gets the select method
MethodInfo selectMethod = selectType.GetMethod(SelectMethod, BindingFlags.Instance | BindingFlags.Public);

//Creates a new instance of the TypeName class
object selectInstance = Activator.CreateInstance(selectType);

//Executes the select method
object selectResult = selectMethod.Invoke(selectInstance, parameters);
IEnumerable list = (IEnumerable)selectResult;

//Create a serializer
XmlSerializer serializer = new XmlSerializer(typeof(IEnumerable));

//Writes to the XML file
using (XmlWriter writer = XmlWriter.Create(filePath))
{
    serializer.Serialize(writer, list);
} 
```

我会使用这段代码来反序列化：

```
//Creates the XML File
XmlSerializer deserializer = new XmlSerializer(typeof(IEnumerable));

IEnumerable list = null;

//Reads from the XML file
using (XmlReader writer = XmlReader.Create(filePath))
{
    list = (IEnumerable) deserializer.Deserialize(writer);
} 
```

我如何一般将 Select Method 结果序列化/反序列化为 XML？

**更新：**

我尝试使用`System.Web.UI.LosFormatter`序列化/反序列化数据。它使用 IEnumerable 实例执行了这两个操作，但我必须将`Serializable`属性放在实体上。`XMLSerializer`但是，与从文件中检索数据时相比，我注意到性能存在显着差异。`System.Web.UI.LosFormatter`在我的特定测试（4MB 文件）中反序列化速度慢了 4 倍。`XMLSerializer`与tho相比，数据文件的大小将减少一半。所以，对我来说，`XMLSerializer`仍然是最好的选择。

**更新2：**

尝试使用`ServiceStack JsonSerializer`以下代码进行简单测试：

```
List<Dummy> dummies = new List<Dummy>();

dummies.Add(new Dummy() { Name = "name" });
dummies.Add(new Dummy() { Name = "name1" });
dummies.Add(new Dummy() { Name = "name2" });

IEnumerable enumerableThing = dummies;

string filePath = Path.Combine(Server.MapPath("~/App_Data"), "data2.json");
using (StreamWriter writer = new StreamWriter(filePath))
{
    JsonSerializer.SerializeToWriter<IEnumerable>(enumerableThing, writer);
}

using (StreamReader reader = new StreamReader(filePath))
{
    enumerableThing = JsonSerializer.DeserializeFromReader<IEnumerable>(reader);
} 
```

它确实可以进行序列化，但是在尝试 DeserializeFromReader 时，它给了我错误`"Type System.Collections.IEnumerable is not of type IDictionary<,>"`。有什么办法可以使这项工作？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-08T00:08:57.810

好吧，正如您已经发现的那样，您无法序列化接口......也就是说，您可能能够解决这个问题并且仍然对实际对象类型“一无所知”：

`Cast`首先，任何 IEnumerable 都可以通过/`ToArray`组合变形为数组

```
var enumerableThing = Foo.GetEnumerable();    
var asArray = enumerableThing.Cast<object>().ToArray(); 
```

其次，“已知类型”的数组是*可*序列化的

```
var allContainedTypes = asArray.Select(x => x.GetType()).Distinct().ToArray();
var ser = new XmlSerializer(asArray.GetType(), allContainedTypes); 
```

~~var ser = new XmlSerializer(asArray.GetType());~~

```
var sb = new StringBuilder();
using(var sw = new StringWriter(sb))
using(var xw = XmlWriter.Create(sw))
    ser.Serialize(xw, asArray);

sb.ToString().Dump(); 
```

或者，一起：

```
void Main()
{
    var enumerableThing = Foo.GetEnumerable();    
    var asArray = enumerableThing.Cast<object>().ToArray();

    var allContainedTypes = asArray.Select(x => x.GetType()).Distinct().ToArray();
    var ser = new XmlSerializer(asArray.GetType(), allContainedTypes);
    var sb = new StringBuilder();
    using(var sw = new StringWriter(sb))
    using(var xw = XmlWriter.Create(sw))
        ser.Serialize(xw, asArray);

    sb.ToString().Dump();
}

public class Foo
{
    public static IEnumerable GetEnumerable()
    {
        return new[] { 1, 2, 3, 4, 5, 6, 7 };
    }
    public static IEnumerable GetEnumerable2()
    {
        return new object[] { "1", 2, "bob", 4, null, 6, 7 };
    }
} 
```

哦，这会产生格式：

```
<?xml version="1.0" encoding="utf-16"?>
<ArrayOfAnyType 
  xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" 
  xmlns:xsd="http://www.w3.org/2001/XMLSchema">
    <anyType xsi:type="xsd:int">1</anyType>
    <anyType xsi:type="xsd:int">2</anyType>
    <anyType xsi:type="xsd:int">3</anyType>
    <anyType xsi:type="xsd:int">4</anyType>
    <anyType xsi:type="xsd:int">5</anyType>
    <anyType xsi:type="xsd:int">6</anyType>
    <anyType xsi:type="xsd:int">7</anyType>
</ArrayOfAnyType> 
```

编辑：反序列化确实会带来一些问题 - 但是，您可以执行以下操作：

```
// Least common denominator...
object[] tempResult;

var assemblyStuffIsFrom = Assembly.GetExecutingAssembly();
var allSerializableTypes = assemblyStuffIsFrom
    .GetTypes()
    .Where(t => t.GetCustomAttributes(typeof(SerializableAttribute), true).Any())
    // TODO: add as much filtering as you can here to help trim down the set
    .ToArray();
var hope = new XmlSerializer(typeof(object[]), allSerializableTypes);
using(var sr = new StringReader(sb.ToString()))
using(var xr = XmlReader.Create(sr))
    tempResult = ((object[])hope.Deserialize(xr)); 
```

# sas - 在 SAS 中简单地将一组的一部分复制到另一组

> ID：14719164
> 
> 赞同：0
> 
> 时间：2013-02-05T23:53:56.983
> 
> 标签：sas

我正在尝试将数据集的一部分复制到 SAS 中的另一部分，例如：

数据集 X
XY
1 12
31 4
5 3

数据集 Y
XY
12 7
9 3

我想将在这种情况下包含 31 和 12 的单元格从数据集 X 复制到 Y 并获得：

数据集 Y
XY
12 7
9 3
31 12

我打算在一个 proc 中混合 'obs=' 'where' 'if' 和变量名，这些组合都不起作用。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-06T02:37:54.433

你谈到的各种事情的例子：

```
data want;
set have1(where=(var1=value1)) have2;
run;

data want;
set have1(in=a) have2(in=b);
if (a or (b and var1=value1));
run;

data want;
set have1(obs=2) have2;
run; 
```

我不认为你会想要混合它们，任何一个都应该足以满足你所说的。

# java - Scala案例类中无法识别Riak Java Client注释？

> ID：14719166
> 
> 赞同：1
> 
> 时间：2013-02-05T23:54:14.317
> 
> 标签：java, scala, riak

我正在使用案例类在我们的应用程序中定义不同的数据“模型”。原因是为了便于使用 Jerkson（Scala 接口到 Jackson）。为了将 my 转换`User`为 Riak 中的域对象，我`@RiakKey`在我的 guid 上使用了注释。我有以下内容：

```
case class User(
  @RiakKey val guid: String,

  @RiakIndex(name = "email") val email: String,

  val salt: String,

  val passwordHash: String,

  val emailHash: String,

  val firstName: String,

  val lastName: String,

  val suspended: Boolean=false,

  val created: Timestamp=now

) 
```

当我对案例类执行域转换时，`@RiakKey`无法识别。它抛出一个`NoKeySpecifedException`. 这是我的转换器：

```
class UserConverter(val bucket: String) extends Converter[User] {

  def fromDomain(domainObject: User, vclock: VClock) = {
    val key = getKey(domainObject)

    if(key == null) throw new NoKeySpecifedException(domainObject)

    val kryo = new Kryo()
    kryo.register(classOf[User])

    val ob = new ObjectBuffer(kryo)
    val value = ob.writeObject(domainObject)

    RiakObjectBuilder.newBuilder(bucket, key)
        .withValue(value)
        .withVClock(vclock)
        .withContentType(Constants.CTYPE_OCTET_STREAM)
        .build()
  }
} 
```

这是 Scala 中带有 Java 注释的问题吗？有解决方法吗？

## 更新

这里是创建和存储 User 对象的位置，以及引用转换器的位置：

1)

```
val user = parse[User](body) // jerkson parse, body is a string of JSON
User.store(user) 
```

2)

```
object User {

  val bucketName = "accounts-users"
  val bucket = DB.client.createBucket(bucketName).execute()

  def fetch(id: String) = bucket.fetch(id).execute().getValueAsString()

  def store(o: User) = bucket.store( o ).withConverter(new UserConverter(bucketName)).execute()

} 
```

**轨迹追踪**

```
com.basho.riak.client.convert.NoKeySpecifedException
        at com.basho.riak.client.bucket.DefaultBucket.store(DefaultBucket.java:455)
        at com.threetierlogic.AccountService.models.User$.store(User.scala:58)
        at com.threetierlogic.AccountService.controllers.Users$$anonfun$routes$3.apply(Users.scala:54)
        at com.threetierlogic.AccountService.controllers.Users$$anonfun$routes$3.apply(Users.scala:51) 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-06T20:34:27.843

（我为这个答案之前的长时间谈话道歉）

在学习了更多关于 scala 的知识后，我发现使用*案例类*你必须做一些不同的事情。

[http://piotrbuda.eu/2012/10/scala-case-classes-and-annotations-part-1.html](http://piotrbuda.eu/2012/10/scala-case-classes-and-annotations-part-1.html)

如果你这样做：

```
@(RiakKey@field) guid: String 
```

有用。

我在 scala 中编写了一个小型测试程序，并且能够使用返回 null 并导致引发异常的静态`getKey()`方法提取带注释的键。`DefaultBucket`

```
import com.basho.riak.client.convert.KeyUtil.getKey;

object Main {

  def main(args: Array[String]): Unit = {
    val u = User("my_key")
    val k = getKey(u)
    System.out.println(k);

  }
} 
```

用户.scala

```
/* scala 2.9.1 would be scala.annotation.target.field */
import scala.annotation.meta.field
import com.basho.riak.client.convert.RiakKey;

case class User (@(RiakKey@field) guid: String) 
```

输出：

> 我的钥匙

（而且，如果您将注释改回原来的样子，它会`null`按预期返回）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-06T18:05:11.450

这是我针对该问题提出的解决方法。我不依赖注释，而是使用该`DefaultBucket.store`方法并手动指定一个键。

我的用户伴随对象：

```
object User {

  val bucketName = "accounts-users"
  val bucket = DB.client.createBucket(bucketName).execute()

  def store(key: String, o: User) = bucket.store(key, o).withConverter(new UserConverter(bucketName)).execute()

} 
```

并使用它：

```
val user = parse[User](body)
User.store(user.guid, user) 
```

# css - 为什么 Chrome 显示颜色而不显示 Firefox？(CSS)

> ID：14719167
> 
> 赞同：-4
> 
> 时间：2013-02-05T23:54:18.007
> 
> 标签：css, google-chrome, firefox

所以我设计了一个网页，但是当它出现在 Firefox 中时，里面的表格颜色并没有出现在 Chrome 中。

我真的不知道这是怎么回事！这就是我所说的：（ ![在此处输入图像描述](../Images/e3dbe86613d9effba826184890140acc.png) 点击[这里](https://i.imgur.com/1Gblgc8.jpg)查看大图）

这是我的 CSS 源代码： [http ://pastebin.com/raw.php?i=hnNkwkGX](http://pastebin.com/raw.php?i=hnNkwkGX)

有人可以解决这个问题或解释问题吗？谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-05T23:56:03.303

Firefox 不通过`-webkit`渲染等操作。您必须`-moz-linear-gradient`为您的渐变以及已经存在的`-webkit-linear-gradient`.

# qt - 在qt中显示隐藏的dockwidget

> ID：14719169
> 
> 赞同：1
> 
> 时间：2013-02-05T23:54:25.070
> 
> 标签：qt, widget, hide, show, dock

嗨，我创建了一个 dockwidget，我将它作为隐藏启动。问题是之后我无法显示它，而我可以从 isHidden() 函数中正确获取状态。奇怪的是，如果我启动不隐藏的dockwidget，它就完美了。我包括一个重现这种奇怪行为的例子。

主窗口.h

```
#ifndef MAINWINDOW_H
#define MAINWINDOW_H

#include <QMainWindow>
#include <QtGui>

namespace Ui {
class MainWindow;
}

class MainWindow : public QMainWindow
{
    Q_OBJECT

public:
    explicit MainWindow(QWidget *parent = 0);
    ~MainWindow();
private slots:

    void showDock();
private:
    Ui::MainWindow *ui;

    QDockWidget *dock;
    QPushButton *button;

};

#endif // MAINWINDOW_H 
```

主窗口.cpp

```
#include "mainwindow.h"
#include "ui_mainwindow.h"

MainWindow::MainWindow(QWidget *parent) :
    QMainWindow(parent),
    ui(new Ui::MainWindow)
{
    ui->setupUi(this);

//    QMainWindow mainWindow;
//    QDockWidget *dock = new QDockWidget(&mainWindow);
    QDialog *dockDialog = new QDialog(this); // <---------edit: you need to create a parent widget for the dock
    dock = new QDockWidget(dockDialog);

    dock->setStyleSheet("QDockWidget { font: bold }");
    dock->setFloating(true);
    dock->setFeatures(QDockWidget::DockWidgetVerticalTitleBar | QDockWidget::DockWidgetFloatable | QDockWidget::DockWidgetMovable);
    QAbstractButton *floatButton = dock->findChild<QAbstractButton*>("qt_dockwidget_floatbutton");
    if(floatButton)
        floatButton->hide();

    dock->setAllowedAreas( Qt::NoDockWidgetArea );
    dock->setWindowTitle("Tools");

    this->addDockWidget(Qt::TopDockWidgetArea, dock, Qt::Vertical);

    QMainWindow *window = new QMainWindow(dock); // <------edit: set the dock to be the parent for the window
    window->setWindowFlags(Qt::Widget);
    QToolBar *bar = new QToolBar(window);

    bar->setMovable(false);
    bar->addAction("Select");
    bar->addAction("Polygon");
    bar->addAction("Brush");
    bar->addAction("Erazer");
    bar->addSeparator();
    bar->addAction("Mark");
    bar->setSizePolicy(QSizePolicy::Fixed, QSizePolicy::Fixed);
    bar->setOrientation(Qt::Vertical);

    window->addToolBar(Qt::LeftToolBarArea, bar);
    window->setSizePolicy(QSizePolicy::Fixed, QSizePolicy::Fixed);

    window->setParent(dock);
    dock->setWidget(window);
    dock->hide();            // <------------ comment this line and it will work, edit: you do not need to do that anymore, it is working nicely now

    button = new QPushButton("show", this);
    button->setCheckable(true);

    QObject::connect(button, SIGNAL(clicked()), this, SLOT(showDock()));
}

MainWindow::~MainWindow()
{
    delete ui;
}

void MainWindow::showDock()
{
//    qDebug() << "hello";
    if(button->isChecked()){
        if(dock->isHidden()){
            qDebug() << "hidden";
        dock->setFloating(true); // <-----edit: you need to add these lines in order to be able to see the dialog that contains the dock widget, i do not know why i need to that again since in the initialization i already specifying that my dock is floatable
        QAbstractButton *floatButton = dock->findChild<QAbstractButton*>("qt_dockwidget_floatbutton"); // <---------edit: add this lines in order to get rid off the floating button
        if(floatButton)
            floatButton->hide(); // <----edit: the same as previous
        dock->show();
        }
    }

    if(!button->isChecked()){
        if(!dock->isHidden()){
            qDebug() << "not hidden";
            dock->hide();
        }
    }
} 
```

因为现在是上面的代码，所以 dockwidget 没有出现在屏幕上。如果您尝试评论我在 mainwindow.cpp 中指定的行，它可以工作，但关键是我想启动隐藏的 dockwidget。有人知道发生了什么吗？

谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-06T00:31:40.417

控件的父级`QDock`应该是您的`window`小部件，而不是`MainWindow`类的对象。

所以，你需要替换这个：

```
 dock = new QDockWidget(this); 
```

有了这个：

```
QMainWindow *window = new QMainWindow(0); // I smell a potential leak here (set the parent!)
dock = new QDockWidget(window); 
```

在第一种情况下，当您按下“显示”按钮时，控件也是可见的，但它位于窗口外的某个位置，因此您可能看不到它。此外，无需创建`QMainWindow`已经继承的内部类的单独实例`QMainWindow`。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-14T14:50:55.783

我看到你显示（）/隐藏（）你的码头小部件。我自己没有尝试过，但也许您应该使用[QDockWidget::toggleViewAction](http://qt-project.org/doc/qt-4.8/qdockwidget.html#toggleViewAction)方法隐藏和显示dockwdiget。

# c++ - 从基类访问派生类

> ID：14719170
> 
> 赞同：0
> 
> 时间：2013-02-05T23:54:27.673
> 
> 标签：c++

我正在尝试从其基类中创建派生对象的向量。

```
class Animal
{
 // Do Stuff
}

class Dog : public Animal

{
 // Do Stuff
}

class AnimalKingdom
{
    vector<Animal> animals;
    vector<Dog> getDogs();
}

vector<Dog> AnimalKingdom::getDogs();
{

    vector<Dog*> dogs;        

    for(i = 0; i < animals.size(); i++)
    {
        Animal& a = *animals[i];

        if(typeid(a).name() == "class Dog")
        {
            dogs.push_back(*a);
        }
    }
} 
```

但显然 *a 不是指向狗的指针，所以它不能添加到狗？

那有意义吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-06T00:57:48.670

您需要将 cast Animal 输入 Dog。阅读一下 static_cast 和 dynamic_cast 是什么。但通常 static_cast 是如果您知道要转换为哪种类型，而 dynamic_cast 是猜测，如果不是该类型，将返回 null 。

```
for(i = 0; i < animals.size(); i++)
{
    Animal* a = &animals[i];

    if(typeid(a).name() == "class Dog")
    {
        dogs.push_back(static_cast<Dog>(a));
    }
} 
```

Ps.Im 在工作，所以我无法检查该代码，看起来是正确的 =D

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-06T01:10:12.543

首先，`typeid(a).name()`将返回一个特定于编译器的字符串。例如，在我的 gcc 中，返回的字符串会完全不同。另外，想想第三个类，它是 Dog 的子类。你`typeid(a).name()`会给你“class Chihuahua”，这是一条狗，但不是“class Dog”。

您应该使用 dynamic_cast 来查询对象类型。当您`dynamic_cast<Dog*>(a)`问“可以正确地将 a 转换为 Dog 吗？”时。如果是，您将有一个 Dog* 类型的指针，如果不是，您将有一个 NULL 指针。

最后，在 处`class AnimalKingdom`，您的向量将不允许您拥有 Dog 类型的对象。当您创建一个`std::vector<Animal>`时，您正在创建一个其元素为固定类型的向量`sizeof(Animal)`。您需要的是使用**指针**。一个指针指向一个内存地址，而不强制该地址具有任何大小或基类。

只是为了更清楚一点：当你这样做时，`Animal a;`你正在创建一个类型`Animal`为 size的变量`sizeof(Animal)`。当你这样做时，`Animal* a`你正在创建一个大小为 4 个字节（或 8 个字节）的内存地址，对于任何指针，它都将具有这个大小。因此，Animal* 可能指向与 不同的东西`Animal`，它可能指向 的子类`Animal`。

这就是静态分配（固定大小）和动态分配（动态大小，但注意指针有固定大小）的区别。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-06T11:22:24.070

您的主要问题是要了解您不能向上转换，这会产生空值。您可以将狗贬低为动物并仅使用父母的最小属性，

所以这个问题可以很容易地解决，比如：1-返回向量并使用多态流来做任何你想做的事情。2- 做一些 bool 或 int 来检查或标记动物的种类如下。例如，为狗设为 2，此变量在动物类中定义。然后使用虚函数在运行时动态地转到您想要的任何内容。所以下面的代码对你来说是很好的骨架。

```
class Animal
{
    int type;
    virtual void setType()=0;
    virtual int getType()=0;
};

class Dog :public Animal
{
    void setType()
    {
        type = 2;
    }
    int gettype()
    {
        return type;
    }
}; 
```

玩得开心。

# javascript - ClientUtils#findAll(String selector) 示例代码不起作用

> ID：14719171
> 
> 赞同：0
> 
> 时间：2013-02-05T23:54:28.300
> 
> 标签：javascript, phantomjs, casperjs

这个 CasperJS 代码示例 ( [http://casperjs.org/api.html#clientutils.findAll](http://casperjs.org/api.html#clientutils.findAll) ) 不起作用。有谁知道如何让这个东西工作？

```
var links;
casper.start('http://foo.bar/', function() {
    links = this.evaluate(function() {
        var elements = __utils__.findAll('a.menu');
        return Array.prototype.forEach.call(elements, function(e) {
            return e.getAttribute('href');
        });
    });
});

casper.run(function() {
    this.echo(JSON.stringify(links)).exit();
}); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-07T16:10:19.770

使用`Array#map`而不是`Array#forEach`.

# scala - Scala 有哪些开发良好的迭代/管道库？

> ID：14719173
> 
> 赞同：10
> 
> 时间：2013-02-05T23:54:40.653
> 
> 标签：scala, java, iterate

Scala 是否有任何以 Haskell 管道的精神开发的库，或者至少[是 iteratee](http://hackage.haskell.org/package/iteratee)？

我首先找到了 Play 的 iteratee 库，但我无法让它工作，而且它似乎与 Play 的并发原语紧密耦合`Promise`，这在许多情况下可能不合适。

Scalaz 有一些迭代支持（如[IterV](http://scalaz.github.com/scalaz/scalaz-2.9.0-1-6.0/doc/scalaz/IterV.html)），但似乎只有核心类没有额外的支持函数、预定义的迭代/枚举器等。我也找不到任何文档，即使 scaladoc 非常稀疏，所以很难正确使用。

而且我找不到任何类似于*管道*的东西。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-02-06T08:49:49.503

根据 Travis 的评论，目前有：

*   Scalaz 7 [iteratee](https://github.com/scalaz/scalaz/tree/scalaz-seven/iteratee/src/main/scala/scalaz/iteratee)包（您提到的 iterv 是与 scalaz 6 的兼容层）
*   [Conduit 库](https://github.com/arjanblokzijl/scala-conduits)的一个端口
*   Runar 的[scala-machines](https://github.com/runarorama/scala-machines)库（[介绍](https://dl.dropbox.com/u/4588997/Machines.pdf)，[haskell 版本](http://hackage.haskell.org/package/machines)）

# java - DefaultTableModel getModel() 上的 java.lang.NullPointerException

> ID：14719180
> 
> 赞同：0
> 
> 时间：2013-02-05T23:55:40.083
> 
> 标签：java, swing, jtable, defaulttablemodel

我做了一个`JTable`with `DefaultTableModel`，我在里面添加了数据和所有东西，但是当我尝试检索它时，我到了`NullPointerException`这里：

```
DefaultTableModel dm = (DefaultTableModel)finishedSaleTable.getModel(); 
```

* * *

```
private DefaultTableModel finishedSaleModel;
private JTable finishedSaleTable; 
```

* * *

```
public SaleUI() { 
String finishedSaleColumns [] = {"#", "Customer", "Employee",  "Products", "# Products", "Discount", "Price", "Date"};
        finishedSaleModel = new DefaultTableModel(null, finishedSaleColumns);
        finishedSaleTable = new JTable(finishedSaleModel){
            public boolean isCellEditable(int rowIndex, int colIndex) {
                return false;
            }
        };
        finishedSaleTable.setSelectionMode(ListSelectionModel.SINGLE_SELECTION);
        finishedSaleTable.getColumnModel().getColumn(0).setPreferredWidth(40);
        finishedSaleTable.getColumnModel().getColumn(1).setPreferredWidth(100);
        finishedSaleTable.getColumnModel().getColumn(2).setPreferredWidth(100);
        finishedSaleTable.getColumnModel().getColumn(3).setPreferredWidth(85);
        finishedSaleTable.getColumnModel().getColumn(4).setPreferredWidth(90);
        finishedSaleTable.getColumnModel().getColumn(6).setPreferredWidth(75);
        finishedSaleTable.getColumnModel().getColumn(7).setPreferredWidth(125);
            JScrollPane finishedSaleTableScroll = new JScrollPane(finishedSaleTable);
}

private void finishedSaleClearList()
    {
        DefaultTableModel dm = (DefaultTableModel)finishedSaleTable.getModel();
        while(dm.getRowCount() > 0)
           dm.removeRow(0);
    } 
```

完整错误：

```
Exception in thread "main" java.lang.NullPointerException
    at ui.SalesUI.finishedSaleClearList(SalesUI.java:641) // DefaultTableModel line
    at ui.SalesUI.finishedSaleUpdateList(SalesUI.java:674) // where I call the method
    at ui.SalesUI.<init>(SalesUI.java:248)
    at ui.SalesUI.main(SalesUI.java:752) 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-06T00:02:40.283

它可以是两件事之一。要么：`finishedSaleTable`是空的，要么是里面的东西`getModel()`。但就像其他评论一样，如果没有其余的代码，我们就无法告诉您更多信息。

# imagemagick - 为 chromakey 创建更有效的哑光？

> ID：14719183
> 
> 赞同：1
> 
> 时间：2013-02-05T23:55:53.760
> 
> 标签：imagemagick, chromakey

我正在尝试对一些图片进行色键处理。这是一个例子：

![车辆的图片](../Images/c66be33264d6f80e6f919211db356e13.png)

这里还有一个，

![车辆的图片](../Images/053fa116e3143365eca698c3c02cf19e.png)

现在使用图像魔术，我可以生成这样的垫子..

![在此处输入图像描述](../Images/0c4af6d239c2b4ce19d02e1ab13f4cc5.png)

但我永远无法让垫子“满”。我的计划是为转盘和灯组创建一个静态垫子——这些不需要移除。但是，我想解决我在烤架、车牌和窗户上看到的问题。我希望这辆车漆黑一片。我正在使用 ImageMagick 的转换来让它工作，

> `convert 1.bmp -channel g -separate +channel -fuzz 45% -fill black -opaque black -fill white +opaque black greenscreensample_mask_1.gif`

我该如何改进它以填充车辆的保险杠？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-06T20:32:55.813

我猜闪亮的部分略带绿色，你可以尝试降低绒毛值。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-03-03T17:44:34.000

您可以使用 -fx 运算符，然后使用特定通道。以下内容绝不是最佳的，而且执行起来也非常低效：

```
convert ./in.jpg -background none -transparent white -channel Alpha -fx '1-((g-r)+(g-b)+(g-(r+b)/2))^2' -channel Green -fx '(r+b)/2' ./out.png;eog ./out.png 
```

为了获得绿色通道的密钥，您可以减去

1.  由绿变红
2.  从绿色变蓝
3.  来自绿色通道的蓝色和红色通道的平均值

非常基本的色彩校正涉及用蓝色和红色通道的平均值替换边缘区域，但是这里整个图像的绿色通道被蓝色和红色通道的平均值替换。您实际上应该编写一个算法，将边缘分离成一个单独的通道，然后对整个图像进行颜色校正，并根据这个“边缘”马特将其与原始图像混合。

谢谢，祝你好运

# wordpress - 固定在滚动上的标题

> ID：14719186
> 
> 赞同：0
> 
> 时间：2013-02-05T23:56:02.290
> 
> 标签：wordpress, header

我正在寻找有关如何实现延迟固定标头的一些想法？类似于itsnicethat.com 网站上的内容，当您在页面上进一步向下滚动后，页眉会固定。我想为使用 Wordpress 的客户实现它？

任何指针将不胜感激，

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-06T00:01:01.860

我认为最直接的方法是监视 scrollTop 并更改样式或切换标题的类，将其设置为固定/正常

# jquery - kendoTabStrip - 如何动态隐藏和显示单个标签

> ID：14719190
> 
> 赞同：1
> 
> 时间：2013-02-05T23:56:20.983
> 
> 标签：jquery, html, tabs, kendo-ui, strip

我在页面上使用 kendoTabStrip，需要根据页面上的操作显示和隐藏特定选项卡。这是怎么做到的？我的代码如下：

*   数据图表

@* 数据网格 *@ @(Html.Partial("_Grid", Model)) @* 图表 *@ @(Html.Partial("_Chart")) $("#dataTabStrip").kendoTabStrip();

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-06T01:06:49.600

这是一种方法。可能不是最干净的方法，但它会起作用。注意“eq(1)”这将选择第二个选项卡。

```
var viewtabstrip = $(".viewselector").kendoTabStrip({}).data("kendoTabStrip");

viewtabstrip.disable($(".viewselector ul").children().eq(1)); 
```

# android - 在 Java 中设置 oauth“授权”标头 - Android

> ID：14719193
> 
> 赞同：0
> 
> 时间：2013-02-05T23:56:28.547
> 
> 标签：android, oauth, header, authorization, httpurlconnection

我正在尝试使用我的 Android 应用程序中的所有网络调用设置访问令牌。

```
HttpURLConnection conn = (HttpURLConnection) url.openConnection();
conn.setRequestProperty("Content-Type", "application/json");
conn.setRequestProperty("授权", "Token token="
                    + 访问令牌）；
conn.setRequestMethod("GET");

```

但是，使用此代码，我们的服务器看到的标头是“HTTP_AUTHORIZATION”，而不是“AUTHORIZATION”。在倾注了javadocs之后，我不知道如何不让它附加“HTTP_”。

谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-06T00:29:03.937

你不能。授权到 HTTP_AUTHORIZATION 的映射是[CGI 规范](http://www.ietf.org/rfc/rfc3875)的一部分，发生在服务器上。

# python - 调整reportlab.platypus.Paragraph的大小是否可以流动？

> ID：14719194
> 
> 赞同：3
> 
> 时间：2013-02-05T23:56:37.947
> 
> 标签：python, reportlab, platypus

我有以下代码尝试调整reportlab鸭嘴兽流动文本的字体大小，直到它适合我给它的可用高度。但是我发现 Paragraph flowable 没有在递归的每个循环中保存其 style.fontSize 属性，并且 python baulks 具有无限递归。

```
def fits_space(w,h,aW,aH,p):
    """
    Determines if inputted text fits in the space given for a paragraph
    and if it doesn't, reduces the font-size until it does.

    """
    if w<=aW and h<=aH:
        # return font size to apply it to the para again
        print "final font_size: %d" % p.style.fontSize
        return p # now render the paragraph in the doctemplate
    else: 
        p.style.fontSize -= 1
        w,h = p.wrap(aW, aH)
        fits_space(w,h,aW,aH,p)

def renderPage(name, text):
    doc = SimpleDocTemplate("%s.pdf" % name)
    parts = []
    style = ParagraphStyle(name='fancy')
    style.fontSize = 150
    p = Paragraph(text, style)
    aW = PAGE_WIDTH-4*inch  # available width and height 
    aH = PAGE_HEIGHT-4*inch 
    w,h = p.wrap(aW, aH) # find required space
    p = fits_space(w,h,aW,aH,p) # recursively fit the font size to the text
    parts.append(p)
    doc.build(parts) 
```

谁能告诉我为什么 - 在 fit_space() 函数中，在 else 子句中，当我调用 p.wrap(aW, aH) 时，输出的值与我将段落的 fontSize 减 1 之前的值相同吗？如果我减小字体大小，包裹的高度肯定会更小吗？

有什么想法我哪里出错了吗？

**更新** Nitzie 下面的代码*几乎可以工作*，只需要在我的情况下向 style.leading 添加调整大小：

```
def shrink_font_size(aW, aH, text, style):
    """Shrinks font size by using pdfmetrics to calculate the height
    of a paragraph, given the font name, size, and available width."""
    def break_lines(text, aW):
        # simpleSplit calculates how reportlab will break up the lines for
        # display in a paragraph, by using width/fontsize.
        return simpleSplit(text, style.fontName, style.fontSize, aW)

    def line_wrap(lines, style):
        # Get overall width of text by getting stringWidth of longest line
        width = stringWidth(max(lines), style.fontName, style.fontSize)
        # Paragraph height can be calculated via line spacing and number of lines.
        height = style.leading * len(lines)
        return width, height

    lines = break_lines(text, aW)
    width, height = line_wrap(lines, style)

    while height > aH or width > aW:
        style.fontSize -= 1
        style.leading -= 1 # do this if you're leading is based on the fontSize
        lines = break_lines(text, aW)
        width, height = line_wrap(lines, style) 
```

TIA

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-02-06T03:11:48.613

出于某种原因，`p.wrap`一旦您在调用一次之后更改了字体大小，似乎并没有真正重新计算高度/宽度。

我能够通过基于 ReportLab`stringWidth`和`splitLines`方法计算字体大小来获得工作版本。虽然这意味着它不再是递归的：

```
from reportlab.platypus import SimpleDocTemplate
from reportlab.lib.styles import ParagraphStyle
from reportlab.lib.units import inch
from reportlab.lib.pagesizes import A4
from reportlab.platypus import Paragraph
from reportlab.lib.utils import simpleSplit
from reportlab.pdfbase.pdfmetrics import stringWidth

def shrink_font_size(aW, aH, text, style):
    """Shrinks font size by using pdfmetrics to calculate the height
    of a paragraph, given the font name, size, and available width."""
    def break_lines(text, aW):
        # simpleSplit calculates how reportlab will break up the lines for
        # display in a paragraph, by using width/fontsize.
        return simpleSplit(text, style.fontName, style.fontSize, aW)

    def line_wrap(lines, style):
        # Get overall width of text by getting stringWidth of longest line
        width = stringWidth(max(lines), style.fontName, style.fontSize)
        # Paragraph height can be calculated via line spacing and number of lines.
        height = style.leading * len(lines)
        return width, height

    lines = break_lines(text, aW)
    width, height = line_wrap(lines, style)

    while height > aH or width > aW:
        style.fontSize -= 1
        lines = break_lines(text, aW)
        width, height = line_wrap(lines, style)

def renderPage(name, text):
    doc = SimpleDocTemplate("%s.pdf" % name)
    parts = []
    # Wasn't sure where PAGE_WIDTH and PAGE_HEIGHT came from for OP,
    # so I just used a standard A4 page measurement.
    PAGE_WIDTH, PAGE_HEIGHT = A4
    aW = PAGE_WIDTH - 4*inch  # available width and height 
    aH = PAGE_HEIGHT - 4*inch

    style = ParagraphStyle(name='fancy')
    style.fontSize = 200
    style.leading = 20
    shrink_font_size(aW, aH, text, style)

    p = Paragraph(text, style)
    parts.append(p)
    doc.build(parts)

if __name__ == "__main__":
    renderPage('test', '12345689019283382848248284 842828428529392381472754 842828428529392381472754 842828428529392381472754\n' * 10) 
```

# hibernate - 前端插件访问 *.hbm.xml 时出现 MappingNotFoundException

> ID：14719197
> 
> 赞同：0
> 
> 时间：2013-02-05T23:56:54.487
> 
> 标签：hibernate, eclipse-rcp, osgi

我正在使用 Hibernate 进入 Eclipse RCP 应用程序。我为休眠映射创建了一个“服务”插件 - daos 等。为了测试，我在这个插件中创建了一个“主”类/方法。“Main”执行`HibernateUtil.initSessionFactory();`，然后对数据库执行一些关于所有映射的查询。它工作正常。当我从另一个 Eclipse 插件（例如“ui”）执行相同的方法`HibernateUtil.initSessionFactory();`时，我收到一个：

> java.lang.ExceptionInInitializerError：org.hibernate.MappingNotFoundException：资源：de/da/service/data/TblItem.hbm.xml 未找到

包含映射时的异常：

> addResource("de/da/service/data/TblItem.hbm.xml")

* * *

为什么会发生这种情况，而同一方法的本地调用工作正常？

```
public static void initSessionFactory() {

    try {
        SessionFactory sf = getSessionFactory(sessionFactory);
        Session s = sf.getCurrentSession();
        s.beginTransaction();
        s.getTransaction().commit();
    }
    catch (Throwable ex) {
        if (ConnectionException.analyze(ex)) {
            throw new ConnectionException();
        }
    }
}

public static SessionFactory getSessionFactory() {
    SessionFactory current = null;
    if (config == null)
        config = new AnnotationConfiguration().configure();

    current = getSessionFactory(sessionFactory);
    return current ;
}

private static SessionFactory getSessionFactory(SessionFactory sFactory) {

    if (sFactory == null) {
        try {

            config = new AnnotationConfiguration().
            setProperty("hibernate.dialect", "org.hibernate.dialect.MySQLInnoDBDialect").
            setProperty("hibernate.current_session_context_class", "thread").
            setProperty("hibernate.connection.driver_class", "org.gjt.mm.mysql.Driver").
            setProperty("hibernate.connection.url", "jdbc:mysql://localhost:3306/db").
            setProperty("hibernate.connection.username", "username").
            setProperty("hibernate.connection.password", "password").
            setProperty("hibernate.connection.pool_size", "0").
            setProperty("hibernate.connection.autocommit", "true").
            setProperty("hibernate.show_sql", "true").
            setProperty("hibernate.format_sql", "true").
            setProperty("hibernate.jdbc.batch_size", "0").
            addResource("de/da/service/data/TblItem.hbm.xml").

            sFactory = config.buildSessionFactory();
        } catch (Throwable ex) {
            System.err.println("Initial SessionFactory creation failed." + ex);
            throw new ExceptionInInitializerError(ex.toString());
        }
    }

    return sFactory;
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-06T10:01:03.923

我不尊重服务插件的好友政策。我需要添加

> Eclipse-RegisterBuddy: 'name-of-plugin-with-hibernate-jars'

到我的服务插件的清单。Hibernates Classloader 现在将找到 xml 映射文件。

# java - OpenGL Mipmap Texture_2D

> ID：14719205
> 
> 赞同：1
> 
> 时间：2013-02-05T23:57:21.040
> 
> 标签：java, opengl, lwjgl, mipmaps

我是openGL的新手，我使用LWJGL。

我不知道如何查看“Mipmaps 是否正常工作”

这就是我加载图像 (64x64) 的方式：

```
private int loadPNGTexture(String filename) {
    ByteBuffer buf = null;
    int tWidth = 0;
    int tHeight = 0;

    try {

        InputStream in = new FileInputStream(ClassLoader.getSystemResource(filename).getPath());
        decoder = new PNGDecoder(in);

        tWidth = decoder.getWidth();
        tHeight = decoder.getHeight();

        buf = BufferUtils.createByteBuffer(4 * decoder.getWidth() * decoder.getHeight());
        decoder.decode(buf, decoder.getWidth() * 4, PNGDecoder.Format.RGBA);
        buf.flip();

        in.close();
    } catch (IOException e) {
        e.printStackTrace();
        System.exit(-1);
    }

    int texId = GL11.glGenTextures();
    GL13.glActiveTexture(GL13.GL_TEXTURE0);
    GL11.glBindTexture(GL11.GL_TEXTURE_2D, texId);

    GL11.glPixelStorei(GL11.GL_UNPACK_ALIGNMENT, 1);

    GL11.glTexImage2D(GL11.GL_TEXTURE_2D, 0, GL11.GL_RGB, tWidth, tHeight, 0, GL11.GL_RGBA, GL11.GL_UNSIGNED_BYTE, buf);
    GL30.glGenerateMipmap(GL11.GL_TEXTURE_2D);

    GL11.glTexParameteri(GL11.GL_TEXTURE_2D, GL11.GL_TEXTURE_WRAP_S, GL11.GL_REPEAT);
    GL11.glTexParameteri(GL11.GL_TEXTURE_2D, GL11.GL_TEXTURE_WRAP_T, GL11.GL_REPEAT);

    GL11.glTexParameteri(GL11.GL_TEXTURE_2D, GL11.GL_TEXTURE_MAG_FILTER, GL11.GL_LINEAR);
    GL11.glTexParameteri(GL11.GL_TEXTURE_2D, GL11.GL_TEXTURE_MIN_FILTER, GL11.GL_LINEAR_MIPMAP_LINEAR);

    return texId;
} 
```

这就是我绘制图像的方式：

```
public void drawGL() {

    GL11.glPushMatrix();

    GL11.glBindTexture(GL11.GL_TEXTURE_2D, playerTextures[0]);

    GL11.glBegin(GL11.GL_TRIANGLE_STRIP);

    GL11.glTexCoord2f(1, 0);
    GL11.glVertex2f(decoder.getWidth(), 0);

    GL11.glTexCoord2f(1, 1);
    GL11.glVertex2f(decoder.getWidth(), decoder.getWidth());

    GL11.glTexCoord2f(0, 0);
    GL11.glVertex2f(0, 0);

    GL11.glTexCoord2f(0, 1);
    GL11.glVertex2f(0, decoder.getWidth());

    GL11.glEnd();

    GL11.glPopMatrix();

} 
```

绘制是正确的，我可以看到我的图像，但如果我更改 DisplayMode（从 800x600 到 1280x960），图像不会长大。所以问题是我需要图像长大以适应分辨率。

# sql - 如何使用 Clojure JDBC 插入 Postgres 枚举值？

> ID：14719207
> 
> 赞同：15
> 
> 时间：2013-02-05T23:57:24.097
> 
> 标签：sql, jdbc, clojure

例如，这是 PostgreSQL 中的一个产品表，其状态为枚举：

```
create type product_status as enum ('InStock', 'OutOfStock');

create table product (
    pid            int primary key default nextval('product_pid_seq'),
    sku            text not null unique,
    name           text not null,
    description    text not null,
    quantity       int not null,
    cost           numeric(10,2) not null,
    price          numeric(10,2) not null,
    weight         numeric(10,2),
    status         product_status not null
); 
```

插入产品的典型 Clojure 代码是：

```
(def prod-12345 {:sku "12345"
                 :name "My Product"
                 :description "yada yada yada"
                 :quantity 100
                 :cost 42.00
                 :price 59.00
                 :weight 0.3
                 :status "InStock"})

(sql/with-connection db-spec
   (sql/insert-record :product prod-12345)) 
```

但是，`status`它是一个枚举，因此如果不将其转换为枚举，就不能将其作为普通字符串插入：

```
'InStock'::product_status 
```

我知道您可以使用准备好的声明来做到这一点，例如：

```
INSERT INTO product (name, status) VALUES (?, ?::product_status) 
```

但是有没有办法在不使用准备好的语句的情况下做到这一点？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2014-02-13T11:19:19.460

我今天使用`stringtype=unspecified` ~~hack~~解决方法得到了这个工作。

您可以将此参数添加到您`db-spec`的如下：

```
(def db-spec {:classname "org.postgresql.Driver"
              :subprotocol "postgresql"
              :subname "//myserver:5432/mydatabase"
              :user "myuser"
              :password "mypassword"
              :stringtype "unspecified"}) ; HACK to support enums 
```

然后`insert!`照常使用。

最好有一个不会严重削弱类型安全的解决方案。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2014-02-12T19:55:38.383

Kris Jurka用解决方法[回复](http://www.postgresql.org/message-id/alpine.BSO.2.00.1302081124290.16163@leary.csoft.net)了上面引用的 Mike Sherrill 的讨论：

> 使用 url 参数 stringtype=unspecified [在 JDBC 连接 URL 中] 让 setString 始终绑定到 unknown 而不是 varchar，这样就不需要任何代码更改。

我在Java中试过这个，它似乎工作正常。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-05-09T01:16:27.990

除非您将纯 SQL 传递到后端，否则您必须使用强制转换。（SQL 语句`INSERT INTO product (name, status) VALUES ('SomeName', 'InStock');`应该可以正常工作。）

在您提出问题一周后，[Tom Lane 在 pgsql-hackers 上解决了这个问题。](http://www.postgresql.org/message-id/28690.1360299322@sss.pgh.pa.us)

> AFAIK 这与 JDBC 一样正常：setString() 意味着参数是字符串类型。如果实际需要的类型不是字符串，它就会崩溃。（我不是 Java 专家，但我似乎记得使用 setObject 是标准的解决方法。）
> 
> 枚举在这里没有遇到任何特别的困难，我反对削弱类型系统给他们一个特殊的通行证。

我们自己的@CraigRinger[参与了该讨论](http://www.postgresql.org/message-id/511B0489.8000106@2ndquadrant.com)，并且现在可能已经找到了一些相关的东西。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2019-07-23T15:17:07.057

[这篇博](https://www.bevuta.com/en/blog/using-postgresql-enums-in-clojure/)文很好地解决了这个问题。`jdbc`提供[`ISQLValue`协议](https://clojure.github.io/java.jdbc/#clojure.java.jdbc/ISQLValue)，它只有一个方法，`sql-value`将 clojure 值转换为 sql 值，由 a 表示[`PGObject`](https://jdbc.postgresql.org/documentation/publicapi/org/postgresql/util/PGobject.html)。博客文章建议用表单中的关键字表示枚举`:type/value`，因此`ISQLValue`可以实现如下：

```
(defn kw->pgenum [kw]
  (let [type (-> (namespace kw)
                 (s/replace "-" "_"))
        value (name kw)]
    (doto (PGobject.)
      (.setType type)
      (.setValue value))))

(extend-type clojure.lang.Keyword
  jdbc/ISQLValue
  (sql-value [kw]
    (kw->pgenum kw))) 
```

在您的示例中，您将插入您的产品：

```
(def prod-12345 {:sku "12345"
                 :name "My Product"
                 :description "yada yada yada"
                 :quantity 100
                 :cost 42.00
                 :price 59.00
                 :weight 0.3
                 ;; magic happens here
                 :status :product_status/InStock})

(sql/with-connection db-spec
   (sql/insert-record :product prod-12345)) 
```

问题是查询数据库时，枚举是一个简单的字符串而不是关键字。这可以通过实现[`IResultSetReadColumn`协议](https://clojure.github.io/java.jdbc/#clojure.java.jdbc/IResultSetReadColumn)以类似的方式解决：

```
(def +schema-enums+
  "A set of all PostgreSQL enums in schema.sql. Used to convert
  enum-values back into Clojure keywords."
  ;; add your other enums here
  #{"product_status"})

(extend-type java.lang.String
  jdbc/IResultSetReadColumn
  (result-set-read-column [val rsmeta idx]
    (let [type (.getColumnTypeName rsmeta idx)]
      (if (contains? +schema-enums+ type)
        (keyword (s/replace type "_" "-") val)
        val)))) 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2020-09-22T08:29:16.237

如果有人在使用 clojure.java.jdbc、jdbc.next 的后继者时引用了这个问题，则插入枚举的代码类似于：

```
(ns whatever
 (:require
  [next.jdbc.sql :as jdbc.sql]
  [next.jdbc.types :as jdbc.types]
 ))

;; ...define your database connection and data source...    

(def prod-12345 {:sku "12345"
                 :name "My Product"
                 :description "yada yada yada"
                 :quantity 100
                 :cost 42.00
                 :price 59.00
                 :weight 0.3
                 :status (jdbc.types/as-other "InStock")})

(jdbc.sql/insert! ds :product prod-12345) 
```

如“使用枚举类型”标题下记录的[https://github.com/seancorfield/next-jdbc/blob/develop/doc/tips-and-tricks.md 。](https://github.com/seancorfield/next-jdbc/blob/develop/doc/tips-and-tricks.md)

# facebook - 我如何知道 Facebook 帐户是个人帐户还是公司类型帐户？

> ID：14719211
> 
> 赞同：1
> 
> 时间：2013-02-05T23:58:11.010
> 
> 标签：facebook, facebook-graph-api, user-accounts

是否有图形 API 调用来了解给定帐户是企业帐户还是个人帐户？

当我像这样调用图形 API 时，

[http://graph.facebook.com/11234545656556](http://graph.facebook.com/11234545656556)（这个号码暂时是假的）

我没有得到任何数据点告诉我这是一个企业帐户，因此没有名称/用户名等。

我只得到这种响应类型

```
 {"id": "11234545656556",   
     "link": "http://www.facebook.com/profile.php?id=11234545656556",   
      "email": "myemail@mail.com,   
     "timezone": 0,   
     "locale": "en_US",   
     "verified": true,   
     "updated_time": "2012-05-31T22:32:52+0000",   
     "type": "user"} 
```

是否有 API 调用来了解帐户的类型？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-06T00:49:48.327

您可以通过 FQL 明确获取此信息：

```
SELECT type FROM profile WHERE id=11234545656556 
```

Graph API 中有一个未记录的`/profile`端点，但它不返回类型。

对此进行测试的唯一其他方法是在 Graph API 响应中查找某个字段的存在。例如，如果响应包含`first_name`，那么您知道它是一个用户，如果它包含`category`，那么您知道它是一个页面。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-06T16:15:40.070

我遇到了同样的问题。到目前为止，了解其是否为个人 Facebook 帐户的唯一方法是检查响应是否包含 **名称**属性。

遵循 FQL（将 id 更改为某个已知帐户）：

```
 SELECT type, name, username, url, pic FROM profile WHERE id=11234545656556 
```

将返回`"user"`个人或企业帐户的类型。

假设**“11234545656556”**是一个企业帐户，名称和用户名将返回不一致的结果，它可能会返回空白或`"name": "Facebook User"`.

对这样的个人帐户进行相同的 FQL 调用：

```
 SELECT type, name, username, url, pic FROM profile WHERE id=4 
```

将导致该给定用户的公开个人信息。

```
 {
 "data": [
   {
      "type": "user", 
      "name": "Mark Zuckerberg", 
      "username": "zuck", 
      "url": "https://www.facebook.com/zuck", 
      "pic": "https://fbcdn-profile-a.akamaihd.net/hprofile-ak-prn1/157340_4_3955636_s.jpg"
    }
  ] 
```

}

# .net - 根据 Web.config Transform 中的子节点值选择节点

> ID：14719214
> 
> 赞同：5
> 
> 时间：2013-02-05T23:58:17.510
> 
> 标签：.net, xpath, web-config, web-config-transform, slowcheetah

我的 Web 配置中有以下 XML，我想使用 web.config 转换选择要删除的属性，但我想根据其中一个子元素的值选择要删除的元素。

我的 web.config 是这样的：

```
<configuration>
   <sitecore>
       <scheduling>
          <agent type="Sitecore.Tasks.DatabaseAgent">
             <param desc="database">core</param>
          </agent>
          <agent type="Sitecore.Tasks.DatabaseAgent">
             <param desc="database">master</param>
          </agent>
       </scheduling>
    </sitecore>
 </configuration> 
```

我尝试了以下尝试根据子元素选择要删除的第二个代理元素，`<param desc="database">master</param>`但没有成功。

```
<configuration>
   <sitecore>
       <scheduling>
          <!-- Attempt 1 -->
          <agent type="Sitecore.Tasks.DatabaseAgent"
                 xdt:Transform="Remove"
                 xdt:Locator="XPath(configuration/sitecore/scheduling/agent/param[text()='master'])"/>

          <!-- Attempt 2 -->
          <agent type="Sitecore.Tasks.DatabaseAgent"
                 xdt:Transform="Remove">
             <param desc="database"
                    xdt:Locator="XPath([text()='master'])"/>
          </agent>
       </scheduling>
    </sitecore>
 </configuration> 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-02-06T14:41:40.413

正如在[这个问题](https://stackoverflow.com/questions/9707108/xdt-transform-locator-that-matches-subnode-content/9707298)中回答的那样，`xdt:Locator`属性需要使用`Condition`语法。所以所需的选择器是：

```
<agent type="Sitecore.Tasks.DatabaseAgent"
       xdt:Transform="Remove"
       xdt:Locator="Condition(param/@desc='database' and param/text()='master')" /> 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-06T07:01:44.430

只需使用 Sitecores 自己的配置修补程序。这将删除您的设置：

```
<configuration xmlns:patch="http://www.sitecore.net/xmlconfig/">
  <sitecore>
    <scheduling>
       <agent patch:instead="*[@type='Sitecore.Tasks.DatabaseAgent' and param='master']">
       </agent>
    </scheduling>
 </sitecore>
</configuration> 
```

有关更多信息，请查看此处：

[http://intothecore.cassidy.dk/2009/05/working-with-webconfig-include-files-in.html](http://intothecore.cassidy.dk/2009/05/working-with-webconfig-include-files-in.html) [http://www.thescrewballdivision.com/playing-with-sitecore-include-files](http://www.thescrewballdivision.com/playing-with-sitecore-include-files)

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2013-02-06T00:00:47.490

只需添加`/..`到最后，应该这样做..

例如

```
XPath(configuration/sitecore/scheduling/agent/param[text()='master']/..) 
```

# windows-server-2008-r2 - 下次我使用相同的连接句柄调用 WinInet 调用 HttpSendRequest 时，它不会传递身份验证信息

> ID：14719215
> 
> 赞同：2
> 
> 时间：2013-02-05T23:58:20.840
> 
> 标签：windows-server-2008-r2, wininet

我对遇到的以下问题感到困惑。我们使用安装了**IE 8.0的****Windows 2008 R2**机器。**接下来，我尝试通过InternetConnect**调用以编程方式连接到服务器（身份验证凭据作为传递给它的参数提供）。它成功了。接下来我调用**HttpOpenRequest**和**HttpSendRequest**。**对HttpOpenRequest**和**HttpSendRequest**的调用是使用返回的相同连接句柄**InternetConnect**调用执行的。在某个特定时间点**HttpSendRequest**开始失败。从流量捕获中，我看到缺少身份验证信息，它使服务器轮流返回**401********************结果。**使用提供的INTERNET_OPTION_USERNAME**和**INTERNET_OPTION_PASSWORD**调用**InternetSetOption**不会产生任何效果。**HttpSendRequest**失败后，我调用**GetLastError**并首先接收**ERROR_HTTP_INVALID_SERVER_RESPONSE**和第二个**ERROR_INTERNET_INCORRECT_HANDLE_STATE如果我尝试使用****HttpSendRequest**重新发送我的请求。******************

 ******也许你们中的一些人遇到过类似的问题？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-10-02T16:08:00.440

我发现这是客户行为的正常方式。首先，它尝试匿名联系资源，然后如果失败，它会尝试使用凭据。在单个函数调用中，可以有一个 401 结果，因为下一个请求伴随着身份验证凭据。******

# oracle - 如何使用 Oracle 的 sdo_distance

> ID：14719217
> 
> 赞同：5
> 
> 时间：2013-02-05T23:58:28.927
> 
> 标签：oracle, oracle11g, geospatial, core-location

我正在尝试计算 Oracle DB 中两点之间的距离，

```
Point A is 40.716715, -74.033907
Point B is 40.716300, -74.033900 
```

使用这个 sql 语句：

```
SELECT   sdo_geom.sdo_distance( sdo_geom.sdo_geometry(2001 ,8307 ,sdo_geom.sdo_point_type(40.716715, -74.033907 , NULL) ,NULL ,NULL)
                           ,sdo_geom.sdo_geometry(2001 ,8307 ,sdo_point_type(40.716300,-74.033901, NULL) ,NULL ,NULL) ,0.0001 ,'unit=M') distance_in_m
                           from DUAL; 
```

结果是**12.7646185977151**

使用 Apple 的 CoreLocation api 执行此操作时：

```
CLLocation* pa = [[CLLocation alloc] initWithLatitude:40.716715 longitude:-74.033907];
CLLocation* pa2 = [[CLLocation alloc] initWithLatitude:40.716300 longitude:-74.033900];
CLLocationDistance dist = [pa distanceFromLocation:pa2]; 
```

结果是**46.0888946842423**

自己的实现

```
double dinstance_m(double lat1, double long1, double lat2, double long2){
 double dlong = (long2 - long1) * d2r;
 double dlat = (lat2 - lat1) * d2r;
 double a = pow(sin(dlat/2.0), 2) + cos(lat1*d2r) * cos(lat2*d2r) * pow(sin(dlong/2.0), 2);
 double c = 2 * atan2(sqrt(a), sqrt(1-a));
 double d = 6367 * c;

return d * 1000.;
} 
```

结果是 **46.120690774231**

甲骨文的实施显然是关闭的，但我不明白为什么。任何帮助将不胜感激。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-02-06T02:37:16.490

尝试颠倒纵坐标的顺序，如下所示：

```
SELECT sdo_geom.sdo_distance(sdo_geom.sdo_geometry(2001, 8307, sdo_geom.sdo_point_type(-74.033907, 40.716715, NULL), NULL, NULL),
                           sdo_geom.sdo_geometry(2001, 8307, sdo_point_type(-74.033901, 40.716300, NULL), NULL, NULL), 0.0001, 'unit=M') distance_in_m
                           from DUAL; 
```

我得到 46.087817955912。

使用 SDO_GEOMETRY，纵坐标按 X、Y（经度、纬度）顺序列出。

# mysql - 带有额外字段的 MySQL 链接表创建笛卡尔积

> ID：14719218
> 
> 赞同：1
> 
> 时间：2013-02-05T23:58:29.703
> 
> 标签：mysql, sql, django-models

我正在尝试构建一个应用程序，该应用程序除了记录销售数量外，还维护主管与其团队之间的历史记录。

```
CREATE TABLE `emp` (
  `id` int(11) NOT NULL,
  `nombre` varchar(45) NOT NULL,
  `apellido` varchar(45) NOT NULL,
  `tl_id` int(11) DEFAULT NULL,
  PRIMARY KEY (`id`),
  KEY `tlFK_idx` (`tl_id`),
  CONSTRAINT `tlFK` FOREIGN KEY (`tl_id`) REFERENCES `emp` (`id`) 

CREATE TABLE `super` (
  `id` int(11) NOT NULL,
  `nombre` varchar(45) NOT NULL,
  `apellido` varchar(45) NOT NULL,
  PRIMARY KEY (`id`)
) 

CREATE TABLE `emp_super` (
  `emp_id` int(11) NOT NULL,
  `super_id` int(11) NOT NULL,
  `fecha` date NOT NULL,
  PRIMARY KEY (`emp_id`,`super_id`,`fecha`),
  KEY `empFK_idx` (`emp_id`),
  KEY `superFK_idx` (`super_id`),
  CONSTRAINT `empsuperFK` FOREIGN KEY (`emp_id`) REFERENCES `emp` (`id`) ON DELETE NO ACTION ON UPDATE NO ACTION,
  CONSTRAINT `super_empFK` FOREIGN KEY (`super_id`) REFERENCES `super` (`id`) ON DELETE NO ACTION ON UPDATE NO ACTION
) 
```

如您所见，表 emp_super 是链接表，但有一个日期字段。

```
emp_id super_id fecha
101863  101404  2012-10-15
101863  101503  2012-10-01
102403  101404  2012-10-15
102403  101503  2012-10-01
103052  101404  2012-10-15
103052  101503  2012-10-01
103718  101404  2012-10-15
103718  101503  2012-10-01 
```

关键是要保留一个主管何时被分配到一个小组的记录，这样当有任何变化时，新的主管就不会继承他所在小组在前任领导下的表现。我一直在进行查询以提取特定组的销售额，但我立即注意到，即使我认为我建立了所有正确的联系，我还是收到了笛卡尔积。

这是销售表：

```
CREATE TABLE `sales` (
  `id` int(11) NOT NULL AUTO_INCREMENT,
  `sale_date` date NOT NULL,
  `product_id` int(11) NOT NULL,
  `emp_id` int(11) NOT NULL,
  `qty` int(11) NOT NULL DEFAULT '0',
  PRIMARY KEY (`id`),
  KEY `empFK_idx` (`emp_id`),
  KEY `campaignFK_idx` (`product_id`),
  CONSTRAINT `empFK` FOREIGN KEY (`emp_id`) REFERENCES `emp_super` (`emp_id`) ON DELETE NO ACTION ON UPDATE NO ACTION,
  CONSTRAINT `productFK` FOREIGN KEY (`product_id`) REFERENCES `products` (`id`) ON DELETE NO ACTION ON UPDATE NO ACTION
) 
```

通常，在处理日期时，我会尝试将日期限制在我的数据来自的主表中，但在这种情况下，我还需要考虑员工-主管关系的日期。

到目前为止，我的查询是这样的：

```
SELECT s.sale_date,su.id,concat_ws(' ',su.nombre,su.apellido), p.name,e.id,concat_ws(' ',e.nombre,e.apellido), s.qty
from tracker.emp e, tracker.products p, tracker.sales s,tracker.super su, tracker.emp_super es
where e.id = es.emp_id
and su.id = es.super_id
and s.product_id = p.id
and e.id = s.emp_id
and s.sale_date between '2012-10-01' and '2012-10-15'
and es.fecha between '2012-10-01' and '2012-10-15'
order by su.id,p.name,e.id; 
```

如果我将日期减少到 14，那么我会收到正确的结果，因为其他主管直到 15 才加入。有没有人遇到过这个业务要求：保持领导记录，以便新领导不继承他的前任成就还是错误？

感谢您提出的任何建议。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-06T01:52:27.440

您需要考虑监督角色何时结束。

这会给你，但我怀疑它不会很有效。

```
SELECT e1.emp_id 
      ,e1.super_id
      ,e1.fecha
      ,MIN(DATEADD(DAY, -1, e2.fecha)) AS end
FROM  emp_super e1
      INNER JOIN
      emp_super e2 ON e1.emp_id=e2.emp_id 
                      AND
                      e1.fecha<e2.fecha
GROUP BY e1.emp_id 
        ,e1.super_id
        ,e1.fecha 
```

也许由 a 更新的链接表上的结束列`TRIGGER`会更好？

# excel - 如何将单元格中的子字符串分成vba中的数组

> ID：14719219
> 
> 赞同：0
> 
> 时间：2013-02-05T23:58:36.717
> 
> 标签：excel, vba

我想知道是否有人可以给我一些指示。我在每个单元格中有一列数据排列如下：

```
Column E

E1-  name-age(nickname)   name-age(nickname)   name-age(nickname) ....
E2-  name-age(nickname)   name-age(nickname)   name-age(nickname) ....
etc... 
```

问题是全部在一列中，我知道我可以使用文本到列功能并用空格分隔它们。但是，有没有更优雅的方法来做到这一点？如果可能的话，我想通过 vba 来做。

我的最终目标是将每个“姓名-年龄（昵称）”对联捕获到一个数组中。目前我已经开始使用 vba -wise 是

```
Sub SplitColumn()
    Details = Cells(i, 5).Value  // where the big column data is located
    tempString = Left(Details, InStr(Details, "  "))
End Sub 
```

有了这个，我只能在那个单元格中得到第一个名字-年龄（昵称）对联。有没有更好的方法来解决这个问题？

提前感谢您的帮助。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-06T01:11:31.673

您将子例程命名为`Split`列，但没有使用拆分功能。

你有两个选择：

1.  按空间分割

例如，cellvalue 只是引用您的单元格的变量名称。对于多个单元格，您可以循环遍历。

```
 vArray As Variant
  vArray = Split(cellvalue, " ") 
```

1.  利用`Text to Columns`菜单栏中的向导。然后将范围转置或转储到变体数组中。

例如

```
vArray = Sheets(1).Range("A1:H10").value 
```

# php - 如何在 javascript 中转义 html / 特殊字符串

> ID：14719221
> 
> 赞同：1
> 
> 时间：2013-02-05T23:58:40.180
> 
> 标签：php, javascript, escaping, html-escape-characters

我有一个需要打印一些文本的 php / javascript 脚本。不幸的是，如果字符串有特殊字符，js似乎会崩溃

```
'
```

下面是脚本的一个片段。$messageContent 和 $subject 是带有 html 标签的字符串。（实际上是“'”字符）。

```

`echo '
<script language="javascript">
function SelectRedirect(){
switch(document.getElementById(\'s1\').value)
{
';

echo '
case "?vrj_name='.$vrj_name.'":
window.location="?vrj_name='.$vrj_name.'&messageContent='.$messageContent_vrj.'&from_email='.$from_email.'&email='.$email.'&subject='.$subject.'";
break;
';
}` 

我在 php 中添加了一个函数来用“\'”替换“'”并且它可以工作（js 执行成功）但是当我在网页中显示它们时我无法驾驭它们。

            回答 #1

赞同：3

时间：2013-02-06T00:04:17.027

最好的方法是使用 对值进行编码`json_encode`。这是一个简单的例子：

```
<?php
$name = "Jason's Bakery";

?>
<script>
   var name = <?php echo json_encode($name); ?>;
   DoSomethingWithName(name);
</script> 
```

这可用于整数、字符串和其他值。请记住，它会根据需要添加引号，因此您需要一次组装和编码“整个值”。在您使用 URL 的示例中，您需要首先使用 PHP`urlencode()`函数对其进行编码，然后将其传递`json_encode`以转换为 javascript 值。如果你把它放在一个 HTML 属性中，比如`onclick`，你需要进一步传递它`htmlspecialchars(..., ENT_QUOTES)`，然后把它放在双引号中。

[http://php.net/manual/en/function.json-encode.php](http://php.net/manual/en/function.json-encode.php)

因此，例如，您需要在 PHP 中构建一个 URL，然后在 javascript 中使用它...

```
<?php
$name = "Jason's \"Awesome\" Bakery";
$url = "http://site.com/page.php?name=" . urlencode($name);

?>
<script>
   var name = <?php echo json_encode($name); ?>;
   DoSomethingWithName(name);
</script>

<input type="button" onclick="<?php echo htmlspecialchars('window.location = ' . json_encode($url) . ';', ENT_QUOTES); ?>" value="Click Me" /> 
```

结果是这样的：

```
<script>
   var name = "Jason's \"Awesome\" Bakery";
   DoSomethingWithName(name);
</script>

<input type="button" onclick="window.location = &quot;http:\/\/site.com\/page.php?name=Jason%27s+%22Awesome%22+Bakery&quot;;" value="Click Me" /> 
```

**不用说，**你不想没有这些：

[http://php.net/manual/en/function.json-encode.php](http://php.net/manual/en/function.json-encode.php) 

[http://www.php.net/manual/en/function.urlencode.php](http://www.php.net/manual/en/function.urlencode.php) 

[http://www.php.net/manual/ zh/function.htmlspecialchars.php](http://www.php.net/manual/en/function.htmlspecialchars.php)  

            回答 #2

赞同：1

时间：2013-02-06T00:22:11.407

出于可读性和未来可维护性的考虑，我想指出一些可能对您有所帮助的事情。

首先，我看到您在 PHP 字符串中生成 HTML 元素。这本来就不是坏事，但是当你的字符串跨越 2 行或更多行时，它变得越来越难以管理。相反，您可能需要考虑转义 PHP 以输出 HTML 部分，并重新输入 PHP 以获取逻辑部分。您可以转义 PHP 并在 if 语句、函数声明等中输入 HTML，所以真的没有理由不这样做。看下面的例子（这个解决方案还以适当的方式对字符串进行转义，其中它的值可以包含单引号、双引号或换行符）：

```
<?php

function urlFriendly($input) {
    return urlencode($input);
}

function jsFriendly($input, $urlFriendly = True) {
    $output = htmlentities($input, ENT_QUOTES);
    // Double quotes in PHP translate "\n" to a newline.
    // Single quotes in PHP keep the literal value.
    $output = str_replace("\r\n", '\n', $output); // Windows support
    $output = str_replace("\n", '\n', $output); // Linux support
    if($urlFriendly) { // Encode for use in URLs
      $output = urlFriendly($output);
    }
    return $output;
}

$vrj_name = 'vrj';
$messageContent_vrj = 'message content';
$from_email = 'from email';
$email = 'email';
$subject = 'subject line';

?>
<script type="text/javascript">
    function SelectRedirect() {
    switch(document.getElementById('s1').value) {
        case '?vrj_name=<?php print jsFriendly($vrj_name);?>':
            var toloc = '?vrj_name=<?php print jsFriendly($vrj_name);?>';
            toloc    += '&messageContent=<?php print jsFriendly($messageContent_vrj);?>'';
            toloc    += '&from_email=<?php print jsFriendly($from_email);?>';
            toloc    += '&email=<?php print jsFriendly($email);?>';
            toloc    += '&subject=<?php print jsFriendly($subject);?>';
            window.location = toloc;
            break;
    }
</script> 
```

            回答 #3

赞同：0

时间：2013-02-06T00:14:44.733

就这样

```
$escaped_string = addslashes($unescaped_string); 
```

无论是之前

```
$messageContent = addslashes($messageContent);
$subject = addslashes($subject); 
```

甚至内联

```
echo '
case "?vrj_name='.$vrj_name.'":
window.location="?vrj_name='.$vrj_name.'&messageContent='.addslashes($messageContent).'&from_email='.$from_email.'&email='.$email.'&subject='.addslashes($subject).'";
break;
'; 
```

```

# mysql - MySQL - 优化选择查询

> ID：14719222
> 
> 赞同：0
> 
> 时间：2013-02-05T23:58:41.177
> 
> 标签：mysql, optimization

我的查询需要 5 秒才能完成，但对于如此基本的事情来说，这听起来很重要。我做了一个解释查询：

[https://www.dropbox.com/s/18pedm9n5fssz4e/localhost%20_%20localhost%20_%20logrede%20_%20phpMyAdmin%203.4.11.pdf](https://www.dropbox.com/s/18pedm9n5fssz4e/localhost%20_%20localhost%20_%20logrede%20_%20phpMyAdmin%203.4.11.pdf)

可以帮我优化一下吗？

谢谢 ：）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-06T01:22:15.503

我已经使用 JOIN 而不是可读性较差的 WHERE 子句重组了查询。我看到一切都基于主要的“材料”表。所以，我的第一个建议是使用“STRAIGHT_JOIN”子句来告诉 MySQL 按照您列出的顺序执行查询....否则，有时它会尝试为您考虑并做一些可以替代的事情“主”表驱动查询。所有其他表基本上都是“查找值”表。

其次......在每张桌子上，我都会在桌子上专门有以下索引。我确定您已经拥有每个表的主键...但是由于您的 GROUP_CONCAT 正在从表中获取相应的描述性字段，因此我会将该列包含在索引中。这是另一个原因...当运行查询并使用索引时，如果查询不必返回“其他”列的原始表，则不必这样做。因此，通过将描述作为索引的一部分，它可以进行连接并从索引中获取描述......

我会有一个索引

```
material ( cdomaterial )
cliente ( idcliente, nome )
classeobra ( idclasse, sigla )
dma ( iddma, nome )
desenho( iddesenho, nome )
fornecedor ( idfornecedor, nome )
modelo ( idmodelo, nome )
fabricante ( idfabri, nome )
fornecido( codmaterial, preco )
unidade( idunidade, sigla )
tipofornecimento( idtipoforn, sigla ) 
```

所以，上面说，我会运行以下查询......

```
SELECT STRAIGHT_JOIN
      material.codmaterial, 
      cliente.nome as cliente, 
      tipofornecimento.sigla as fornecimento, 
      unidade.sigla as unidade,
      GROUP_CONCAT(DISTINCT classeobra.sigla ORDER BY classeobra.idclasse SEPARATOR ', ') as classeobra, 
      GROUP_CONCAT(DISTINCT dma.nome ORDER BY dma.iddma SEPARATOR ', ') as dma, 
      GROUP_CONCAT(DISTINCT desenho.nome ORDER BY desenho.iddesenho SEPARATOR ', ') as desenho,
      GROUP_CONCAT(DISTINCT fornecedor.nome ORDER BY fornecedor.idfornecedor SEPARATOR ', ') as fornecedor, 
      GROUP_CONCAT(DISTINCT modelo.nome ORDER BY modelo.idmodelo SEPARATOR ', ') as modelo,
      GROUP_CONCAT(DISTINCT fabricante.nome ORDER BY fabricante.idfabri SEPARATOR ', ') as marca, 
      GROUP_CONCAT(DISTINCT fornecido.preco ORDER BY fornecido.preco SEPARATOR ', ') as preco 
   FROM 
      material
         JOIN unidad
            ON material.idunidade = unidade.idunidade 
         JOIN requisitado
            ON material.codmaterial = requisitado.codmaterial 
            JOIN cliente
               ON requisitado.idcliente = cliente.idcliente 
            JOIN tipofornecimento
               ON requisitado.idtipoforn = tipofornecimento.idtipoforn 
         JOIN possuimodelo
            ON material.codmaterial = possuimodelo.codmaterial 
            JOIN modelo
               ON possuimodelo.idmodelo = modelo.idmodelo 
               JOIN pertence,
                  ON modelo.idmodelo = pertence.idmodelo 
                  JOIN fabricante 
                     ON pertence.idfabri = fabricante.idfabri 
         JOIN utilizadoclasseobra
            ON material.codmaterial = utilizadoclasseobra.codmaterial 
            JOIN classeobra 
               ON utilizadoclasseobra.idclasse = classeobra.idclasse 
         JOIN possuidma
            ON material.codmaterial = possuidma.codmaterial 
            JOIN dma
               ON possuidma.iddma = dma.iddma 
         JOIN fornecido
            ON material.codmaterial = fornecido.codmaterial
            JOIN fornecedor
               ON fornecido.idfornecedor = fornecedor.idfornecedor 
         JOIN possuidesenho
            ON material.codmaterial = possuidesenho.codmaterial 
            JOIN desenho
               ON possuidesenho.iddesenho = desenho.iddesenho 
   GROUP BY
      material.codmaterial, 
      cliente.nome 
   ORDER BY 
      material.codmaterial ASC, 
      cliente.nome ASC ; 
```

# asp.net - 基于插件的 WCF Web 服务

> ID：14719223
> 
> 赞同：2
> 
> 时间：2013-02-05T23:58:45.117
> 
> 标签：asp.net, wcf, web-services, plugins, mef

我正在实施 IIS 托管 WCF Web 服务以接受来自第三方的潜在客户。在保存信息之前/之后可能会发生很多操作。我正在考虑将其实现为基于插件的架构。

预保存操作的示例是

*   保存前重复检查
*   确保信息有效（不是米老鼠）

保存后操作是

*   基于邮政编码的路由到正确的仓库
*   领导任务。

我一直在阅读有关 MEF 的信息，但我无法确定这是否真的值得实施 MEF，因为每次调用加载和卸载插件可能会增加开销？有没有办法以某种魔法加载所有插件`application_start`？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-14T12:45:18.193

我同意 Steven 的观点，您不需要为此使用插件架构。您可以使用设计合理的服务。在 Steven 的博客文章——[编写高度可维护的 WCF 服务](https://cuttingedge.it/blogs/steven/pivot/entry.php?id=95)中，有一些非常好的提示。

尽管如此，要回答问题的第二部分，没有什么可以阻止您初始化 MEF 组合容器`Application_Start`并将其静态存储（除了它引入了全局状态，这通常是一个糟糕的设计决定）。然后它将在请求之间共享，您可以根据需要使用它来组合部件，而无需重复导出发现的开销。

# java - PreparedStatement和resultSet接口如何使用batch和get方法

> ID：14719226
> 
> 赞同：3
> 
> 时间：2013-02-05T23:59:08.540
> 
> 标签：java, mysql, batch-file, prepared-statement, resultset

我现在开始使用包 java.sql 并且我正在用它做一些实验。

我有这两张桌子

第一个是：

```
`user` (
`userID` INT NOT NULL AUTO_INCREMENT ,
`nickname` VARCHAR(20) NULL ,
PRIMARY KEY (`userID`) ) 
```

第二个是：

```
`club` (
`clubID` INT NOT NULL AUTO_INCREMENT ,
'clubName` VARCHAR(20) NOT NULL ,
`userID` INT NULL , 
PRIMARY KEY (`clubID`) ,... 
```

其中 userID 是与第一个表的 userID 关联的外键。

这是应该解释我想要做什么的代码。（这仅适用于一个用户俱乐部）

```
Class.forName("com.mysql.jdbc.Driver");
this.connect = DriverManager.getConnection("jdbc:mysql://localhost/" + this.database + "?user=" + this.user + "&password=" + this.password);
String s;

s = ("insert into " + this.database + ".user (nickname) values (?)");
this.preparedStatement = this.connect.prepareStatement(s);
this.preparedStatement.setString(1, "username");
this.preparedStatement.executeUpdate();

s = ("SELECT userID from " + this.database + ".user where nickname = 'username'");
this.preparedStatement = this.connect.prepareStatement(s);
this.resultSet = this.preparedStatement.executeQuery();
int n=0;
while (resultSet.next())
{
    n = this.resultSet.getInt("userID");
}

s = ("insert into " + this.database + ".club (clubName, userID) values (?, ?)");
this.preparedStatement = this.connect.prepareStatement(s);
this.preparedStatement.setString(1, "club");
this.preparedStatement.setInt(2, n);
this.preparedStatement.executeUpdate(); 
```

如果我要为更多的情侣（用户名、俱乐部名）执行此过程，例如保存在 HashMap 中，我该如何使用preparedStatement 接口的addBatch() 方法？

我应该为每个动作使用三批：1 插入用户名 2 选择（和记录）用户 ID 3 插入与正确用户 ID 关联的俱乐部名称

或者我可以只在一批中包含所有过程？？

还有一个问题，为什么如果我尝试删除围绕 resultSet.getInt() 方法的 while 循环，它会给我一个错误？

提前感谢所有愿意帮助我的人！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-06T11:16:57.677

您不能只在一个批次中包含所有过程。该批处理旨在用于单个查询。这是一个很好的例子的[参考链接](http://www.mkyong.com/jdbc/jdbc-preparedstatement-example-batch-update/)。

您可以执行多个查询作为不同的批次，如下所示。

```
 try {
        DataSource dataSource = null;// specify data source
        Connection con = dataSource.getConnection();
        Statement s = con.createStatement();
        // or
        // PreparedStatement s =
        // con.prepareStatement("INSERT INTO profile (fullname) VALUES ('Visruth CV')");
        s.addBatch("INSERT INTO tran1 (username, password, profileid) VALUES ('visruth', 'password', 1)");
        s.addBatch("INSERT INTO testtab (name) VALUES ('testtab')");
        s.executeBatch();

    } catch (SQLException e) {
        e.printStackTrace();
    } 
```

如果删除`while (resultSet.next())`循环，它将产生*NullPointerException*`resultSet` ，因为光标在默认行中的当前位置，当您使`resultSet.next()`光标跳到下一行时，如果有可用行（从默认行到第一行，第一行到第二行等...），同时`resultSet.next()`将返回真（仅当它跳转时）否则为假。如果`resultSet`包含多于一行，则可以将其放在*while 循环*中，如果不只需要在那里使用*if 条件*。

# scala - 从scala访问公共静态java方法

> ID：14719229
> 
> 赞同：5
> 
> 时间：2013-02-05T23:59:11.333
> 
> 标签：scala, playframework-2.0

我正在尝试在 scala play2 应用程序中使用 Java facebook 库[http://restfb.com/#publishing](http://restfb.com/#publishing)，但是当尝试调用`with`下面的静态方法时，它给了我“编译错误 [标识符预期但 'with'成立。]”。

```
val fbClass = classOf[FacebookType]
val param = Parameter.with("message", msg)
val attachment = BinaryAttachment.with("cat.png", stream)
val fbResp = facebookClient.publish("me/photos", fbClass, attachment, param) 
```

我看到尝试调用*受保护*的静态方法时存在问题，但这些方法被定义为公共的，如[javadocs](http://restfb.com/javadoc/index.html)和[source](https://github.com/revetkn/restfb/blob/master/source/library/com/restfb/BinaryAttachment.java)中所示。难道我做错了什么？

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2013-02-06T00:07:15.077

`with`是 Scala 中的关键字，例如，用于混合多个特征。

```
class A extends B with C with D 
```

因此，如果在 Java 库中命名了一个方法`with`，则在调用它时需要用 ``（反引号）将其括起来：

```
BinaryAttachment.`with`("cat.png", stream) 
```

# java - 如何在java代码中放入图片？

> ID：14719233
> 
> 赞同：-1
> 
> 时间：2013-02-05T23:59:20.910
> 
> 标签：java, swing

这是我试图放置图像的代码，但每次我在 getimage() 部分都有错误。你能帮忙吗？谢谢你。我知道这是一个奇怪的项目。或者你能告诉我如何写一个画圆并将它们分成几块的代码。每件都是不同的颜色，然后我把它们放在一个链接列表中，并询问用户他们讨厌哪种颜色，然后我将其删除。我每次都做同样的事情，直到我只剩下一种颜色。我不知道该怎么做，所以我以不同的方式做到了，所以你能帮助我：

```
import java.util.*;
import java.util.Scanner;
import javax.swing.*;
import java.applet.*; 
import java.awt.*; 
public class ExtraCredit extends Applet
{
//graphic
public void paintOr(Graphics g) 
{
Image img;
  MediaTracker tr;
 tr = new MediaTracker(this);
  img = getImage(getCodeBase(), "Or.png");
  tr.addImage(img,0);
  g.drawImage(img, 0, 0, this);
}
public void paintRed(Graphics g1) 
{
Image img;
  MediaTracker tr;
 tr = new MediaTracker(this);
  img = getImage(getCodeBase(), "red.png");
  tr.addImage(img,0);
  g1.drawImage(img, 0, 0, this);
}

public void paintR(Graphics g2) 
{
Image img;
  MediaTracker tr;
 tr = new MediaTracker(this);
  img = getImage(getCodeBase(), "R.png");
  tr.addImage(img,0);
  g2.drawImage(img, 0, 0, this);
}
public void paintRBrown(Graphics g3) 
{
Image img;
  MediaTracker tr;
 tr = new MediaTracker(this);
  img = getImage(getCodeBase(), "rbrown.png");
  tr.addImage(img,0);
  g3.drawImage(img, 0, 0, this);
}
public void paintBr(Graphics g4) 
{
Image img;
  MediaTracker tr;
 tr = new MediaTracker(this);
  img = getImage(getCodeBase(), "Br.png");
  tr.addImage(img,0);
  g4.drawImage(img, 0, 0, this);
}

public void paintBrBlue(Graphics g5) 
{
Image img;
  MediaTracker tr;
 tr = new MediaTracker(this);
  img = getImage(getCodeBase(), "brblue.png");
  tr.addImage(img,0);
  g5.drawImage(img, 0, 0, this);
}

     //----

   public static void main(String[] args)
   {
       ExtraCredit ex = new ExtraCredit();

      String cF;
       int i=0;
        LinkedList<String> c = new LinkedList<String>();
        c.add("red");
        c.add("brown");
        c.add("blue");
        c.add("green");
   Scanner scan = new Scanner (System.in);
   //first loop
   while(i!=4)
   {
   i++;
    System.out.println ("You have a list of color:brown, blue, green, red"); 
    Graphics g = ex.getGraphics();

  ex.paintOr(g);
    System.out.println ("which color you most hate:"); 
    String color1 = scan.nextLine();
     //cF=c.getFirst();

    if(color1 == c.getFirst())
    {
        Graphics g1 = ex.getGraphics();
  ex.paintRed(g1);
    }

    c.remove(color1);
    }
    i=0;

    // second loop
    while(i!=3)
    {
   i++;
    System.out.println ("You have a list of color:"+ c); 
    Graphics g2 =ex.getGraphics();
  ex.paintR(g2);
    System.out.println ("which color you most hate:"); 
    String color2 = scan.nextLine();
    if(color2 == c.getFirst())
    {
        Graphics g3 = ex.getGraphics();
  ex.paintRBrown(g3);
    }

    c.remove(color2);
    }

    i=0;
    //third loop
     while(i!=2)
    {
   i++;
    System.out.println ("You have a list of color:"+ c); 
    Graphics g4=ex.getGraphics();
  ex.paintBr(g4);
    System.out.println ("which color you most hate:"); 
    String color3 = scan.nextLine();
    cF=c.getFirst();
    if(color3 == c.getFirst())
    {
        System.out.println ("The color you like:" + c);
      Graphics g5 = ex.getGraphics();
  ex.paintBrBlue(g5);  
    }

    c.remove(color3);
    }

}

} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-06T00:21:58.707

这`ex.getGraphics()`是一个非常糟糕的主意。这不是在 AWT 或 Swing 中绘制的方式。

混合命令行输入和 UI 元素从来都不是一个好主意，再加上您正在使用 a`Applet`并且您的用户失去了实际提供反馈的能力......

AWT/Swing 是事件驱动的环境。事件是从（主要）鼠标和键盘输入创建的。

花点时间阅读[使用 Swing 创建 GUI 以](http://docs.oracle.com/javase/tutorial/uiswing/)了解详细信息。

别忘了还看看[Performing Custom Painting](http://docs.oracle.com/javase/tutorial/uiswing/painting/)和[2D Graphics](http://docs.oracle.com/javase/tutorial/2d/index.html)，特别是关于形状的部分。

# java - @Column 长度大于 255 个字符的实体

> ID：14719237
> 
> 赞同：3
> 
> 时间：2013-02-06T00:00:12.920
> 
> 标签：java, sql, hibernate, postgresql, jakarta-ee

由于默认值为 255，我将如何指定“无限”长度来保存诸如大文本之类的信息？它不应该是特定于供应商的解决方案，例如“columnDefinition”属性。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-02-06T00:03:23.703

尝试“文本”（lob） [http://www.postgresql.org/docs/8.0/static/datatype-character.html](http://www.postgresql.org/docs/8.0/static/datatype-character.html)

```
@Lob
@Type(type = "org.hibernate.type.TextType") 
```

# java - 二叉树中莫里斯遍历与递归有序的性能

> ID：14719240
> 
> 赞同：0
> 
> 时间：2013-02-06T00:00:23.810
> 
> 标签：java, performance, binary-tree, tree-traversal, inorder

在去面试之前我正在做一些准备工作，我刚刚了解了 Morris Traversal。

这是我用 Java 编写的 Morris Traversal 代码（它的工作）：

```
protected void morrisTraversal(){
    BinaryNode pre = null;//BinaryNode is a class which represent a node in the tree
    BinaryNode current = this.root;//root is the root of the tree
    while(current != null){
        if(current.getLeftChild() == null){
            System.out.println(current.getNodeData().getId());//id is unique
            current = current.getRightChild();
        }//if
        else{
            pre = current.getLeftChild();
            while(pre.getRightChild() != null && pre.getRightChild().getNodeData().getId() != current.getNodeData().getId())
                pre = pre.getRightChild();
            if(pre.getRightChild() == null){
                pre.setRightChild(current);
                current = current.getLeftChild();
            }//if
            else{
                System.out.println(current.getNodeData().getId());
                current = current.getRightChild();
                pre.setRightChild(null);
            }//else
        }//else
    }//while
}//MorrisTraversal 
```

这是我的 In-Order 方法的代码：

```
protected void recInOrder() {
    if(this.root != null)
        recInOrderHelper(this.root);
    else
        System.out.println("The Tree Is Empty");;
}//recInOrder

private void recInOrderHelper(BinaryNode node)  {
    if(node != null){
        recInOrderHelper(node.getLeftChild());
        System.out.println(node.getNodeData().getId());
        recInOrderHelper(node.getRightChild());
    }
}//recInOrderHelper 
```

我主要做的是：我在我的二叉树中插入了 70,000,000 个节点，然后我做了下一个小检查：

```
long start = System.currentTimeMillis();
tree4.morrisTraversalInOrder();
System.out.println("morris traversal TOOK: " + (System.currentTimeMillis() - start) + " ms");

start = System.currentTimeMillis();
tree4.recInOrder();
System.out.println("recursive in-order TOOK: " + (System.currentTimeMillis() - start) + " ms"); 
```

结果让我吃惊！

这些是结果：

莫里斯遍历 TOOK：637 毫秒

递归有序 TOOK：367 毫秒

**注意 - 当我做这个测试时，我评论了来自 morrisTraversal() 和 recInOrderHelper() 方法的所有 System.out.println(...) 。**

这些结果让我感到惊讶，因为我认为 Morris Traversal 会更快，因为它的迭代（不打开堆栈帧等）和 In-Order 是递归的（每次递归调用打开大约 70,000,000 个堆栈帧）

我知道它们都是 O(n)，所以显然我对某些事情是错误的，但是哪个？我错过了什么？为什么 Morris Traversal 比递归 In-Order 慢得多？

**编辑**-我还进行了下一个测试：我没有向树中插入 70,000,000 个节点，而是插入了 100,000 个节点并且我确实运行了下一个代码：

```
//running the two algorithms one time before doing the actual test(but in the same execution)
tree4.recInOrder();
tree4.morrisTraversalInOrder();

//starting the actual test
long start = System.currentTimeMillis();
for(i = 0; i < 100000; i++){
    tree4.recInOrder(); 
}
System.out.println("Recursive In-Order TOOK: " + (System.currentTimeMillis() - start) + " ms");

start = System.currentTimeMillis();
for(i = 0; i < 100000; i++){
    tree4.morrisTraversalInOrder(); 
}
System.out.println("Morris Traversal TOOK: " + (System.currentTimeMillis() - start) + " ms"); 
```

结果是：

递归有序 TOOK：214434 毫秒

莫里斯遍历 TOOK：502786 毫秒

正如您所看到的，与递归 In-Order 相比，Morris Traversal 仍然非常慢。所以我又做了一次测试，只插入了 1000 个节点，每个代码只运行了 10000 次，结果是：

递归有序 TOOK：44 毫秒

莫里斯遍历 TOOK：97 毫秒

我还是不明白？为什么莫里斯遍历速度较慢？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2020-04-15T03:27:26.000

看到这里你就明白其中的逻辑了。只需对 morris 进行空运行以进行遍历，假设它需要 2k 时间。现在为递归中序遍历做空运行，我很确定你会或多或少地找到时间 k。这里的逻辑是，Morris 中序遍历所花费的时间或多或少是中序遍历所花费时间的两倍，因为我们最多到达每个节点 2 次。一次用于创建虚拟正确链接，另一次用于删除该正确链接。

现在，如果您对空间复杂性感兴趣，那么莫里斯中序遍历就像是国王。在这里你不需要额外的空间。它的空间复杂度是 O(1)，但是递归中序遍历的空间复杂度是 O(n)。希望现在您可以了解两种遍历策略的用途。:)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-06T00:17:51.843

如果不将性能估计分解为它们的组件，就很难判断，但是当用假的正确部分追溯节点时，Morris Traversal 本质上遍历了树的一部分。你也在莫里斯循环中做更多的工作，所以常数因子会更大。奇怪的是它几乎是 2 倍，但如果没有进一步的细节，我不会相信这是实际成本。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-06T00:33:45.123

你没有热身证。您应该先执行这两个方法，然后再按时执行。您还忽略了大多数 Java 代码在长时间运行的进程中运行的事实，这些进程最终会编译为机器代码。我会尝试使用较小的树并多次执行遍历。

# c - 获取Linux文件描述符的地址

> ID：14719244
> 
> 赞同：2
> 
> 时间：2013-02-06T00:00:33.750
> 
> 标签：c, linux, unix

需要`fileno`获取 FILE* 的文件描述符。

给定文件描述符编号，例如从返回的，如何获得 FILE* 的地址`pipe`？

[文件](http://pubs.opengroup.org/onlinepubs/009695399/functions/fileno.html) [管](http://www.kernel.org/doc/man-pages/online/pages/man2/pipe.2.html)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-06T00:03:15.303

您想使用以下[`fdopen()`](http://linux.die.net/man/3/fdopen)功能：

```
FILE * file = fdopen(fd, "r"); 
```

所以你可以像这样结合使用它`pipe`：

```
FILE * file = fdopen(pipe(..,..), "r"); 
```

# javascript - 为什么〜null === -1？

> ID：14719247
> 
> 赞同：2
> 
> 时间：2013-02-06T00:00:56.557
> 
> 标签：javascript

[在这个 JavaScript 测试](http://asserttrue.blogspot.co.uk/2013/02/are-you-javascript-guru-try-this-test.html?utm_source=feedburner&utm_medium=twitter&utm_campaign=Feed%3a+hnycombinator+%28HN+-+hnycombinator%29)中让我难过的一个问题是`~null`计算结果为`-1`.

为什么`~null`评价为`-1`？

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2013-02-06T00:02:24.730

那是因为`~`is 一个数字运算符，所以它转换`null`为`0`first：

```
> ~0
-1 
```

它相当于这个表达式：

```
~(+null) 
```

同样地：

```
> ~[]
-1
> ~{}
-1 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2014-01-18T21:15:13.817

首先，`~`是位运算`NOT`符。这意味着它会翻转数字表示中的所有位。`0010 1010`变成`1101 0101`.

由于计算机使用 2 的补码存储数字，这个等式成立：

```
~number == -number - 1 
```

从我之前的例子可以看出：

`0010 1010`（这代表数字`42`）

`1101 0101`（这代表数字`-43`）

现在，因为`~`is 是一个对数字进行操作的运算符，所以它的**参数**首先被转换为一个数字。由于`null`被强制转换为 a `0`，因此您会得到`-1`结果（根据上述等式）。

# php - 自动回复邮件错误 503

> ID：14719250
> 
> 赞同：0
> 
> 时间：2013-02-06T00:01:06.430
> 
> 标签：php, email, smtp

我在我的项目中安装了一个自动回复邮件，它一直运行良好，直到一周前......现在我收到了这个错误：

无法发送自动回复电子邮件。（-所有 RCPT 命令都被拒绝，并出现以下错误：503-不存在、伪造或不允许的发件人地址 (mail@mail.com) 503-用于经过身份验证的连接 (mail@mail.com) 503 有效的 RCPT 命令必须在 DATA 之前）

谁能向我解释这是什么错误？或者我该怎么做才能解决？因为我对邮件几乎一无所知

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-20T18:16:56.663

尝试使用一个 pop3 帐户并在您的自动回复中将其用作“来自电子邮件”。不要使用别名电子邮件地址。

# math - 如何使用 VBScript 计算已知大小的对象与我的相机之间的距离？

> ID：14719251
> 
> 赞同：0
> 
> 时间：2013-02-06T00:01:09.630
> 
> 标签：math, vbscript, camera, vision

我知道物体的尺寸和相机的一切。距离结果需要每秒至少更新 4 次。

摄像头信号来自一个通过 WLAN 连接到笔记本电脑的机器人。笔记本电脑运行一个应用程序，为机器人操作员显示各种仪表板。我必须使用这个特定的应用程序，它只支持自定义仪表板仪表的 VBScript。

我将如何从相机馈送中获取图像数据，然后计算距离？我不太了解VBScript。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-06T09:52:01.513

d = (FL * RHO * IH)/(OH*SH)

d = distance to object (mm)
FL = focal length (mm)
RHO = real height of the object (mm)
IH = image height (pixels)
OH = object height (pixels)
SH = sensor height (mm)

# java - 如何使用 org.osgi.service.prefs.Preferences.clear()

> ID：14719252
> 
> 赞同：0
> 
> 时间：2013-02-06T00:01:10.223
> 
> 标签：java, eclipse, osgi

我正在尝试使用`org.osgi.service.prefs.Preferences`. 第一次保存有效，但我在后续运行中所做的更改无法更改文件。查看[API](http://www.osgi.org/javadoc/r4v42/org/osgi/service/prefs/Preferences.html)和[Vogella 文章](http://www.vogella.com/articles/EclipsePreferences/article.html)，我认为我正在采取正确的步骤。当我在调试模式下运行时，在我调用 之后`clear()`，我仍然看到相同的子键/值对。此外，在我刷新首选项后，磁盘上的文件不会改变。我必须打电话`flush()`才能完成这项工作吗？（我必须刷新到磁盘以更改内存中的某些内容似乎很愚蠢——这无济于事）。

我究竟做错了什么？

这是我保存描述符的代码（请注意，这是从 McCaffer、Lemieux 和 Aniszczyk 的“Eclipse Rich Client Platform”无耻地复制而来，并进行了一些小的修改以更新 Eclipse 3.8.1 的 API）：

```
Preferences preferences = ConfigurationScope.INSTANCE.getNode(Application.PLUGIN_ID);
preferences.put(LAST_USER, connectionDetails.getUserId());
Preferences connections = preferences.node(SAVED);
try {
    connections.clear();
    //preferences.flush();
} catch (BackingStoreException e) {
    // TODO Auto-generated catch block
    e.printStackTrace();
}
preferences = ConfigurationScope.INSTANCE.getNode(Application.PLUGIN_ID);
connections = preferences.node(SAVED);
for (Iterator<String> it = savedDetails.keySet().iterator(); it.hasNext();) {
    String name = it.next();
    ConnectionDetails d = (ConnectionDetails) savedDetails.get(name);
    Preferences connection = connections.node(name);
    connection.put(SERVER, d.getServer());
    connection.put(PASSWORD, d.getPassword());
}
try {
    preferences.flush();
} catch (BackingStoreException e) {
    e.printStackTrace();
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-06T08:40:02.493

必须刷新首选项才能正确应用修改，即您必须调用`flush()`. 某些操作可能会自动刷新，但这是您不应该依赖的实现细节。此外，`clear()`仅删除选定节点上的键。为了删除一个节点及其所有子节点，`removeNode()`必须调用。

```
// get node "config/plugin.id"
// note: "config" identifies the configuration scope used here
final Preferences preferences = ConfigurationScope.INSTANCE.getNode("plugin.id");

// set key "a" on node "config/plugin.id"
preferences.put("a", "value");

// get node "config/plugin.id/node1"
final Preferences connections = preferences.node("node1");

// remove all keys from node "config/plugin.id/node1"
// note: this really on removed keys on the selected node
connections.clear();

// these calls are bogous and not necessary
// they get the same nodes as above
//preferences = ConfigurationScope.INSTANCE.getNode("plugin.id");
//connections = preferences.node("node1");

// store some values to separate child nodes of "config/plugin.id/node1"
for (Entry<String, ConnectionDetails> e : valuesToSave.entrySet()) {
    String name = e.getKey();
    ConnectionDetails d = e.getValue();
    // get node "config/plugin.id/node1/<name>"
    Preferences connection = connections.node(name);
    // set keys "b" and "c"
    connection.put("b", d.getServer());
    connection.put("c", d.getPassword());
}

// flush changes to disk (if not already happend)
// note: this is required to make sure modifications are persisted
// flush always needs to be called after making modifications
preferences.flush(); 
```

# css - 仅模糊背景图像

> ID：14719253
> 
> 赞同：2
> 
> 时间：2013-02-06T00:01:10.443
> 
> 标签：css

如您所见，链接中给出的页面顶部有两张图像是模糊的，一张是背景图像，一张是上面的图像，两者都是模糊我想要的只是模糊背景图像而不是顶部一个我不知道该怎么做请帮助这里是链接[http://www.node.au.com/projects/at38/](http://www.node.au.com/projects/at38/)

这是我的CSS

```
 #work-gallery 
  {
   background-repeat:no-repeat;
   background-size:cover;
   -webkit-filter: blur(5px);
  } 
```

这是我不想模糊的顶部图像的 html

```
 <div id="slideshow" style="margin-top: 17.5px;"> 
   <ul id="fdgSlides" style="width: 1275px; height: 425px; left: 0px;">
     <li class="fdgSlide" style="width: 1275px;">
       <img src="node.au.com/wp-content/uploads/thumb_at38_01.jpg"; alt="" style="width: auto; height: 100%; margin-top: -212.5px;"> 
     </li>  
    </ul>
 </div> 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-02-06T00:05:08.340

制作一个单独的背景元素：

**HTML**：

```
<div id="gallery-background"></div> 
```

**CSS**：

```
#gallery-background {
    position: absolute;

    top: 0;
    left: 0;
    bottom: 0;
    right: 0;

    background-image: url(http://www.node.au.com/wp-content/uploads/thumb_at38_01-450x300.jpg);
    background-repeat:no-repeat;
    background-size:cover;
    -webkit-filter: blur(5px);
} 
```

这`-webkit-filter`将影响您应用它的元素的子元素，因此您必须将背景移出。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2016-11-24T11:44:33.140

我在[小提琴中找到了解决方案](http://jsfiddle.net/jLGFp/3/)

```
<div> 
</div>
<p><span>WOW</span></p>

div {
    height:500px;
    width:100%;
    text-align:center;
    background:url('http://i0.kym-cdn.com/photos/images/original/000/051/726/17-i-lol.jpg?1318992465') no-repeat center;
    background-size:cover;
    -webkit-filter: blur(13px);
    -moz-filter: blur(13px);
    -o-filter: blur(13px);
    -ms-filter: blur(13px);
    filter: blur(13px);
    position: absolute;
    left:0;
    top: 0;
}
p {
    position: absolute;
    left:0;
    top: 0;
}
span {
    color:blue;
    font-size:50px;
    font-weight:bold;
    position:relative;
    position:absolute;
    z-index:9999;
    -webkit-filter: blur(0px);
    -moz-filter: blur(0px);
    -o-filter: blur(0px);
    -ms-filter: blur(13px);
    filter: blur(0px);
} 
```

# php - 在 .html 文档中使用 PHP

> ID：14719254
> 
> 赞同：0
> 
> 时间：2013-02-06T00:01:12.043
> 
> 标签：php, html, node.js

我正在从事需要创建网络论坛的工作。由于我的愚蠢，我决定使用 javascript，事先不知道 javascript 是一种客户端语言。我需要一种方法将数据从 javascript 保存到服务器上，然后能够读取数据。我尝试查看 node.js 之类的东西，但是为了做到这一点，我将重新配置整个 Web 服务器（这不是我的）。另一种解决方案是使用 php。这就是问题所在：在设置网页布局的 html 文件中使用了一堆包含（即 css 文件、html 文件，甚至 php 包含）。我无法将索引文件的名称更改为 index.php，因为它破坏了文件内的所有包含。所以我需要一种方法来保存，比如说一个文本文件，使用 javascript 和 html。如果有办法，我想做一些非常简单的事情，比如在 html 中包含一个 php 文件，然后在我的 javascript 代码中调用一个 php 函数来将文件的内容放入我的 index.html 页面。我认为有一种方法可以调用这样的简单命令：

```
<script>
    var thedata = <?php getData() ?>
</script> 
```

其中 php 函数 getData() 将返回一个 json 编码的字符串，其中包含所有数据（从单独的 php 文件处理）。有没有办法做到这一点？关于如何在不将我的 index.html 文件更改为 index.php 的情况下处理服务器上的数据存储的任何其他建议？

注意：我尝试访问 apache httpd.conf 文件并添加一个处理程序来将 .html 文件预处理为 php 文件，但这似乎不起作用（没有像 echo 'test' 这样简单的东西适用于 html 文件）。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-06T00:05:19.637

将此添加到您的`.htaccess`：

```
AddHandler application/x-httpd-php5 .html .htm 
```

[资源](http://support.hostgator.com/articles/cpanel/apache-handlers-running-html-as-php)

它使 Apache 将 HTML 文件视为包含 PHP 的文件。不过，请注意不要在常规 HTML 文件中意外使用 PHP 语法。

请记住，您仍然需要使用 PHP 标记才能进入 PHP 模式。这按预期工作：

```
<p>html content ...  <?php echo 'hello, world'; ?></p> 
```

但这将输出 echo 命令：

```
<p>echo 'hello, world'</p> 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-06T00:07:09.303

如果可以让您的网络服务器通过 mod_php 处理您的页面。如果您使用的是 apache，只需将其添加到您的 .htaccess

```
AddHandler x-httpd-php .html .htm 
AddHandler php-script .php .html .htm
AddHandler php5-script .php .html .htm
AddType application/x-httpd-php .htm 
AddType application/x-httpd-php .html 
```

我希望你能理解这样做的后果。您的所有页面都将被这样处理，并且页面的内存/cpu 使用量会更大。

如果这发生在一个文件中，请确保将其添加到语句中。

在您的示例中，您应该添加：

```
<script>
    var thedata = <?php echo getData(); ?>
</script> 
```

* * *

## 回答 #3

> 赞同：-2
> 
> 时间：2013-02-06T00:03:41.317

文件扩展名必须是`.php`，以便服务器知道解析文件。

# ios - 为 Facebook 移动应用安装广告安装 Facebook SDK

> ID：14719258
> 
> 赞同：3
> 
> 时间：2013-02-06T00:01:27.943
> 
> 标签：ios, facebook, sdk, mono, ads

我正在尝试为我的 iOS 应用启用 Facebook 移动应用安装广告，我已经安装了 Facebook SDK，SDK 本身大约 13MB。我只是关心我的应用程序的大小，我是否应该为 Facebook 移动应用程序安装广告的一段代码合并整个 SDK 包？或者我可以只导入所需的库吗？

因为我不想过多地增加我的应用程序大小。

顺便说一句，我使用 Mono Touch，所以整个 Facebook.dll 大约 10MB。

谢谢并恭祝安康，

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-06T07:51:31.790

Facebook 要求您拥有`Facebook iOS SDK`使用`Facebook Mobile Apps Install Ads`.

您需要在文件的`applicationDidBecomeActive`方法中添加以下代码`AppDelegate`

```
(void)applicationDidBecomeActive:(UIApplication *)application
{
    [FBSession.activeSession handleDidBecomeActive];  
    [FBSettings publishInstall:YOUR_APP_ID];
} 
```

查看[Facebook 文档](https://developers.facebook.com/docs/tutorials/mobile-app-ads/)以获取完整说明。

# android - 小部件图像视图位图错误

> ID：14719262
> 
> 赞同：0
> 
> 时间：2013-02-06T00:01:44.957
> 
> 标签：android, widget

在模拟器上完美运行，在手机崩溃......！我检查了崩溃的线路，但我不知道为什么！请查看代码当我尝试使用填充的位图数组更新视图时它会崩溃

```
public static final ArrayList<Bitmap>  sms_rubrica = new ArrayList<Bitmap>();
    public static Bitmap No_Foto = null;

    public void onUpdate(Context paramContext, AppWidgetManager appWidgetManager, 
            int[] appWidgetIds){

        ComponentName watchWidget;
        rview = new RemoteViews( paramContext.getPackageName(), R.layout.widget_layoutmain);
        watchWidget = new ComponentName( paramContext, Randomnuberwidget.class );

        Uri uriSMSURI = Uri.parse("content://sms/inbox");

        Cursor cur = paramContext.getContentResolver().query(uriSMSURI, null, null, null, "date desc limit 3");

         //Default photo

         No_Foto = BitmapFactory.decodeResource(paramContext.getResources(), R.drawable.no_photo); 

       while (cur.moveToNext()) {

            String address = cur.getString(cur.getColumnIndex("address"));
            String body = cur.getString(cur.getColumnIndexOrThrow("body"));
            String id;
            String date;
            int idColumn = cur.getColumnIndex("_id");
            int dateColumn = cur.getColumnIndex("date");

            id = cur.getString(idColumn);
            date = cur.getString(dateColumn);

      Date dateFromSms = new Date(Long.parseLong(date));

            Uri uri = Uri.withAppendedPath(PhoneLookup.CONTENT_FILTER_URI, Uri.encode(address));  
            Cursor cs= paramContext.getContentResolver().query(uri, new String[]{PhoneLookup.DISPLAY_NAME},PhoneLookup.NUMBER+"='"+address+"'",null,null);

            String idContact = fetchContactIdFromPhoneNumber(address, paramContext);

            //Add photo to array 
            if (idContact.compareTo("") != 0 )  {
                  Bitmap bit= loadContactPhoto(paramContext.getContentResolver(),Long.parseLong(idContact));
                  sms_rubrica.add(bit);
              }
             else  sms_rubrica.add(No_Foto);

            if(cs.getCount()>0)
            {
             cs.moveToFirst();
             address=cs.getString(cs.getColumnIndex(PhoneLookup.DISPLAY_NAME));
            }

            sms_num.add(address);
            sms_body.add(body);
            sms_id.add(id);
            sms_time.add(dateFromSms.toLocaleString());

       }

        Bitmap photo = sms_rubrica.get(0);

        rview.setTextViewText(R.id.Mittente,sms_num.get(0));
        rview.setTextViewText(R.id.TestoSms,  sms_body.get(0));
        rview.setTextViewText(R.id.Orario, sms_time.get(0));
            //Here's on telephone crash giving null pointer exception but not in the emulator
        rview.setImageViewBitmap(R.id.imgRubrica, photo);

      appWidgetManager.updateAppWidget( watchWidget, rview );
    } 
```

这是获取联系人uri照片的方法

```
 public static Bitmap loadContactPhoto(ContentResolver cr, long  id) {
            Uri uri =              ContentUris.withAppendedId(ContactsContract.Contacts.CONTENT_URI, id);
           InputStream input =   ContactsContract.Contacts.openContactPhotoInputStream(cr, uri);

            if (input == null) {
                return null;
            }
            return BitmapFactory.decodeStream(input);
    } 
```

这是堆栈跟踪：

```
 02-06 01:11:44.289: E/AndroidRuntime(8624): FATAL EXCEPTION: main
  02-06 01:11:44.289: E/AndroidRuntime(8624): java.lang.RuntimeException: Unable to start receiver com.imrankhanandroid.HomeWidgetRandomNum.Randomnuberwidget: java.lang.NullPointerException
   02-06 01:11:44.289: E/AndroidRuntime(8624):  at android.app.ActivityThread.handleReceiver(ActivityThread.java:1809)
    02-06 01:11:44.289: E/AndroidRuntime(8624):     at android.app.ActivityThread.access$2400(ActivityThread.java:117)
   02-06 01:11:44.289: E/AndroidRuntime(8624):  at android.app.ActivityThread$H.handleMessage(ActivityThread.java:985)
   02-06 01:11:44.289: E/AndroidRuntime(8624):  at android.os.Handler.dispatchMessage(Handler.java:99)
    02-06 01:11:44.289: E/AndroidRuntime(8624):     at android.os.Looper.loop(Looper.java:130)
    02-06 01:11:44.289: E/AndroidRuntime(8624):     at android.app.ActivityThread.main(ActivityThread.java:3687)
      02-06 01:11:44.289: E/AndroidRuntime(8624):   at java.lang.reflect.Method.invokeNative(Native Method)
    02-06 01:11:44.289: E/AndroidRuntime(8624):     at java.lang.reflect.Method.invoke(Method.java:507)
    02-06 01:11:44.289: E/AndroidRuntime(8624):     at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:842)
     02-06 01:11:44.289: E/AndroidRuntime(8624):    at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:600)
    02-06 01:11:44.289: E/AndroidRuntime(8624):     at dalvik.system.NativeStart.main(Native Method)
    02-06 01:11:44.289: E/AndroidRuntime(8624): Caused by: java.lang.NullPointerException
    02-06 01:11:44.289: E/AndroidRuntime(8624):     at android.widget.RemoteViews$ReflectionAction.writeToParcel(RemoteViews.java:730)
     02-06 01:11:44.289: E/AndroidRuntime(8624):    at android.widget.RemoteViews.writeToParcel(RemoteViews.java:1376)
     02-06 01:11:44.289: E/AndroidRuntime(8624):    at com.android.internal.appwidget.IAppWidgetService$Stub$Proxy.updateAppWidgetProvider(IAppWidgetService.java:402)
    02-06 01:11:44.289: E/AndroidRuntime(8624):     at android.appwidget.AppWidgetManager.updateAppWidget(AppWidgetManager.java:283)
    02-06 01:11:44.289: E/AndroidRuntime(8624):     at com.imrankhanandroid.HomeWidgetRandomNum.Randomnuberwidget.onUpdate(Randomnuberwidget.java:167)
      02-06 01:11:44.289: E/AndroidRuntime(8624):   at android.appwidget.AppWidgetProvider.onReceive(AppWidgetProvider.java:61)
    02-06 01:11:44.289: E/AndroidRuntime(8624):     at com.imrankhanandroid.HomeWidgetRandomNum.Randomnuberwidget.onReceive(Randomnuberwidget.java:205)
     02-06 01:11:44.289: E/AndroidRuntime(8624):    at android.app.ActivityThread.handleReceiver(ActivityThread.java:1798)
     02-06 01:11:44.289: E/AndroidRuntime(8624):    ... 10 more 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-06T00:22:01.820

看起来您用于 Randomnumberwidget 的 paramContext 可能是导致 NullPointerException 的原因。

从我对您的堆栈跟踪的阅读来看，问题似乎出在此处：Randomnuberwidget.onUpdate(Randomnuberwidget.java:167)。

尝试将 getApplicationContext() 传递到 paramContext。这意味着无论参数来自哪里，都会变成 paramContext，请确保它是 getApplicationContext()，因为有时如果您使用不同的更改上下文，您可以在那里获得一个空指针。

**编辑**：

在使用位图之前，您可能还想检查 null。因此，如果位图为空，则使用默认位图。

像这样的东西：

```
 Bitmap bit= loadContactPhoto(paramContext.getContentResolver(),Long.parseLong(idContact));
    if (idContact.compareTo("") != 0 && bit != null)  {
        sms_rubrica.add(bit);
    } 
```

# three.js - Node-Webkit 和 Three.js 动画停止并像快照一样挂在页面中

> ID：14719264
> 
> 赞同：0
> 
> 时间：2013-02-06T00:02:01.433
> 
> 标签：three.js, node-webkit

我对 node-webkit 和 three.js 的小实验包含；两页；

*   index.html（包含一个打开wayfinder.html的按钮）
*   wayfinder.html（three.js 动画代码和一个按钮（名为 'go' ）以返回 index.html ）

如果我使用后退按钮返回 index.html，动画会停止，但它会挂在屏幕上。即使加载了 index.html（我的意思是 dom 元素），我也只能看到这个停止的动画。

这看起来像一个 node-webkit 问题，但我并不完全理解这个问题。

[*源代码*](https://dl.dropbox.com/u/17279887/Kiosk.zip)

# sql - 选择 Distinct Attribute 并打印出另一个的 Count 即使计数为 0

> ID：14719267
> 
> 赞同：0
> 
> 时间：2013-02-06T00:02:17.660
> 
> 标签：sql, select

我不太清楚应该如何描述标题问题，但这是我的问题。我有一个名为和`hello`的两列的表。`time``state`

```
Time | State 
```

这是我拥有的数据示例

```
1 DC
1 VA
1 VA
2 DC
2 MD
3 MD
3 MD
3 VA
3 DC 
```

我想获得所有可能的时间和“VA”的计数（如果当时没有出现“VA”，则为 0）输出看起来像这样

```
Time Number
1 2
2 0
3 1 
```

我试着做

```
SELECT DISTINCT time,
    COUNT(state) as Number
        FROM hello
        WHERE state = 'VA'
        GROUP BY time 
```

但它似乎不起作用。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-06T00:03:54.310

这是一个条件聚合：

```
select time, sum(case when state = 'VA' then 1 else 0 end) as NumVA
from hello
group by time 
```

我想补充一点，`distinct`当您拥有`group by`. 这两个是多余的。 `Distinct`在 SQL 语言中甚至不需要关键字；从语义上讲，它只是按所有列分组的简写。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-06T00:04:05.273

```
SELECT  TIME,
        SUM(CASE WHEN State = 'VA' THEN 1 ELSE 0 END)
FROm    tableName
GROUP   BY Time 
```

*   [SQLFiddle 演示](http://www.sqlfiddle.com/#!2/2b159/2)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-06T02:17:00.923

一个经验法则是先获得计数，然后将它们放入临时温度以供以后使用。见下文：

```
 Create table temp(Num int, [state] varchar(2))
    Insert into temp(Num,[state])
    Select 1,'DC'
        UNION ALL
    Select 1,'VA'
        UNION ALL
    Select 1,'VA'
        UNION ALL
    Select 2,'DC'
        UNION ALL
    Select 2,'MD'
        UNION ALL
    Select 3,'MD'
        UNION All
    Select 3,'MD'
        UNION ALL
    Select 3,'VA'
        UNION ALL
    Select 3,'DC'

     Select t.Num [Time],t.[State]
     , CASE WHEN t.[state] = 'VA' THEN Count(t.[State]) ELSE 0 END [Number]
     INTO #temp2
    From temp t
    Group by t.Num, t.[state]
    --drop table #temp2
    Select
    t2.[time]
    ,SUM(t2.[Number])
    From #temp2 t2
    group by t2.[time] 
```

# jquery - 将滚动动画分配给jquery中的焦点

> ID：14719269
> 
> 赞同：3
> 
> 时间：2013-02-06T00:02:24.837
> 
> 标签：jquery

我有以下代码，重点关注具有验证错误的输入字段。我想在滚动到焦点位置时添加某种动画（因此，如果您单击提交它“滚动到第一个输入字段所在的位置验证失败）。

有任何想法吗？

```
 if(validation_failed == true) {
      $(selected_form).find(":input.validator_element_error:visible:enabled").first().focus();
            return false;
        } 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-02-06T00:28:35.660

您可以在应用焦点之前为 scrollTop 设置动画。这是从您的示例中简化的。

```
$('html,body').animate({scrollTop: $('input').offset().top}, 200, function() {
    $('input').focus();
}); 
```

[jsfiddle](http://jsfiddle.net/GdcUK/1/)

在您的特定情况下，我想您只需要按照您希望的方式选择错误的输入元素，然后`$('input')`用您选择的元素替换上面的代码。

```
var errorInput = $(selected_form).find(":input.validator_element_error:visible:enabled").first();
$('html,body').animate({scrollTop: errorInput.offset().top}, 200, function() {
    errorInput.focus();
}); 
```

# node.js - 客户端在流星或德比中的样子

> ID：14719270
> 
> 赞同：0
> 
> 时间：2013-02-06T00:02:36.723
> 
> 标签：node.js, meteor, client-side, derbyjs

我一直在寻找那些很酷的新 node.js 框架（主要是 derby）。它们似乎都是同构框架......如果我理解正确，这意味着您“可以为服务器和客户端使用相同的代码”。

那么它如何影响您在客户端使用的技术呢？

例如，我猜这些框架不需要主干......对吗？另一方面，您仍然可以从 jquery ui 或 bootstrap 之类的东西中受益？

你怎么看？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-06T02:32:22.967

我已经用 Meteor 做了一些工作，我可以告诉你，像 jquery 和 Backbone 这样的库仍然非常有用（几乎是必不可少的）。正如文档所说：“拥抱生态系统。Meteor 是开源的，它集成而不是替换现有的开源工具和框架。”。确实如此，您只需要调整代码以适应 Meteor 反应式编程风格。我真的推荐你 Meteor over Derby。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-11-17T06:52:41.733

没有必要使用 Backbone，因为这两个框架都有路由器和模板。您可以将 jQuery UI、Backbone 和任何其他客户端库与这些框架一起使用。

Ps：我有过 Meteor 和 Derby 的经验，我会向你推荐 Derby 而不是 Meteor。

# sql - 销售员每位客户的最高价格汇总

> ID：14719273
> 
> 赞同：2
> 
> 时间：2013-02-06T00:02:40.507
> 
> 标签：sql, arrays, postgresql, aggregate-functions, window-functions

我有一张这样的桌子：

```
SELECT * FROM orders;

 client_id | order_id | salesman_id | price
-----------+----------+-------------+-------
         1 |      167 |           1 |    65
         1 |      367 |           1 |    27
         2 |      401 |           1 |    29
         2 |      490 |           2 |    48
         3 |      199 |           1 |    68
         3 |      336 |           2 |    22
         3 |      443 |           1 |    84
         3 |      460 |           2 |    92 
```

我想为每个独特的推销员和客户对的每个最高价格的销售找到一个 order_ids 数组。在这种情况下，我想要结果表：

```
 salesman_id |   order_id
-------------+----------------
           1 | {167, 401, 443}
           2 | {490, 460} 
```

到目前为止，我有一个查询大纲：

```
SELECT salesman_id, max_client_salesman(order_id)
FROM orders
GROUP BY salesman_id; 
```

但是我在编写[聚合函数](http://www.postgresql.org/docs/9.0/static/xaggr.html)max_client_salesman 时遇到了麻烦。

postgres 中聚合函数和数组的在线文档非常少。任何帮助表示赞赏。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-06T02:28:08.380

### 标准 SQL

我会结合[窗口函数`last_value()`或`firstvalue()`](http://www.postgresql.org/docs/current/interactive/functions-window.html)with`DISTINCT`以有效地获取价格最高的订单，`(salesman_id, client_id)`然后使用简单的[聚合函数`array_agg()`](http://www.postgresql.org/docs/current/interactive/functions-aggregate.html)将其聚合到您要查找的数组中。

```
SELECT salesman_id
      ,array_agg(max_order_id) AS most_expensive_orders_per_client
FROM  (
   SELECT DISTINCT
          salesman_id, client_id
         ,last_value(order_id) OVER (PARTITION BY salesman_id, client_id
                                     ORDER BY price
                                     ROWS BETWEEN UNBOUNDED PRECEDING
                                     AND UNBOUNDED FOLLOWING) AS max_order_id
   FROM   orders
   ) x
GROUP  BY salesman_id
ORDER  BY salesman_id; 
```

回报：

```
 salesman_id |  most_expensive_orders_per_client
-------------+------------------------------------
           1 | {167, 401, 443}
           2 | {490, 460} 
```

[**SQL小提琴。**](http://www.sqlfiddle.com/#!12/68617/1)

如果每个 有多个最高价格`(salesman_id, client_id)`，则此查询仅任意选择*一个* `order_id`- 因为缺乏定义。

对于此解决方案，必须了解之前应用了窗口函数`DISTINCT`。如何`DISTINCT`与窗口函数结合：

*   [PostgreSQL：“按分钟”查询的运行行数](https://stackoverflow.com/questions/8193688/postgresql-running-count-of-rows-for-a-query-by-minute/8194088#8194088)

有关解释，`ROWS BETWEEN UNBOUNDED PRECEDING AND UNBOUNDED FOLLOWING`请参阅[dba.SE 上密切相关的答案](https://dba.stackexchange.com/questions/9798/postgresql-view-with-max-min-with-id/9800#9800)。

### 非标更简单[`DISTINCT ON`](http://www.postgresql.org/docs/current/interactive/sql-select.html#SQL-DISTINCT)

作为 SQL 标准的扩展，PostgreSQL 实现了`DISTINCT ON`. 有了它，您可以非常有效地根据一组定义的列选择唯一的行。
它不会比这更简单或更快：

```
SELECT salesman_id
      ,array_agg(order_id) AS most_expensive_orders_per_client
FROM  (
   SELECT DISTINCT ON (1, client_id)
          salesman_id, order_id
   FROM   orders
   ORDER  BY salesman_id, client_id, price DESC
   ) x
GROUP  BY 1
ORDER  BY 1; 
```

[**SQL小提琴。**](http://www.sqlfiddle.com/#!12/68617/1)

我还使用位置参数来缩短语法。细节：

*   [在每个 GROUP BY 组中选择第一行？](https://stackoverflow.com/questions/3800551/select-first-row-in-each-group-by-group/7630564#7630564)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-06T00:28:01.820

我认为您希望将 Postgres 函数`array_agg`与`row_number()` 但是，您对查询的描述对我来说没有意义。

以下获取客户和销售人员以及销售人员的最高价格订单的订单列表：

```
select client_id, salesman_id, array_agg(order_id)
from (select o.*,
             row_number() over (partition by salesman_id order by price desc) as sseqnum,
             row_number() over (partition by client_id order by price desc) as cseqnum
      from orders o
     ) o
where sseqnum = 1
group by salesman_id, client_id 
```

我不知道您所说的“每个销售人员和客户的最高价格销售”是什么意思。也许你想要：

```
where sseqnum = 1 or cseqnum = 1 
```

# user-interface - 电子表格上的 Google GUI Builder 位置面板

> ID：14719276
> 
> 赞同：2
> 
> 时间：2013-02-06T00:02:55.117
> 
> 标签：user-interface

带有谷歌电子表格的谷歌 GUI 生成器。您如何在电子表格上定位 GUI 面板？我尝试了 setStyleAttribute，但它不起作用。宽度和高度有效，但我无法定位面板。

```
function doGet() {
  var app =    UiApp.createApplication().setTitle("Measures").setStyleAttribute("position","absolute").setStyleAttribute("left", "8px").setStyleAttribute("top", "6px").setHeight(385).setWidth(100);                   
  app.add(app.loadComponent("Measures"));
  SpreadsheetApp.getActiveSpreadsheet().show(app);
  } 
```

# angularjs - 当与 Meteor 结合使用时，AngularJS 能做哪些 Handlebars 不能做的事情？

> ID：14719279
> 
> 赞同：20
> 
> 时间：2013-02-06T00:03:19.427
> 
> 标签：angularjs, meteor, handlebars.js

我正在考虑使用 AngularJS 而不是带有 MeteorJS 的 Handlebars。我对 AngularJS 比较熟悉，但它与 Meteor 的开箱即用效果不佳。Handlebars 是 MeteorJS 中使用的默认模板引擎。

我想知道两者之间的权衡，例如，AngularJS 是否提供比 Handlebars 更灵活的前端编码。

我的问题是：当与 Meteor 配对时，AngularJS 能做哪些 Handlebars 在前端编程方面做不到的事情？

（请注意，人们喜欢 AngularJS 的双向绑定和数据模型的 b/c 部分，但 Meteor-Handlebars 也做得很好）。

更新：如果您认为它与 SO 中另一个比较 Angular 和 Handlebars 的问题重复，请不要投票关闭此问题。Meteor 凭借其“基于客户端的数据库”方法为 Handlebars 增加了强大的功能。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2014-07-18T13:20:51.893

[Angular 和 Meteor 可以结合使用](https://medium.com/@zfxuan/the-wonderful-duo-using-meteor-and-angularjs-together-4d603a4651bf)，这是一个非常简洁的组合。Angular 的模板系统和它的双向绑定（DOM 到 JS 模型）甚至可以一直使用并与 Meteor 集合保持同步。Angular 和 Meteor 的这种组合意味着您可以获得即时的 DOM 到数据库同步，这非常酷。Angular 自己无法做到这一点，Meteor（无需编写或多或少乏味的事件处理程序）甚至更少的 Handlebars 也不能。

[angular-meteor](https://atmospherejs.com/urigo/angular) Meteor 包几乎是 ngMeteor的继任者（它基于 ngMeteor 代码构建）并将 Meteor 集合与 Angular 模型、两个模板系统、Meteor 会话变量等集成在一起。

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2013-11-13T20:11:48.227

**TL;DR**：Meteor 最适合与包（想想 jQuery、bootstrap、d3、underscore、stylus、less），因为它们增强了框架。那些相同的包也会增强 Angular（嗯，有点）。Angular 是一个端到端框架，因此试图将其集成到另一个端到端框架（如 Meteor）之上会让人头疼。

Handlebars 具有您可能在 Angular 中熟悉的非常相似的表达式和绑定。但是，虽然模板引擎很相似，但其余的框架却有很大的不同。

Angular 非常依赖其内部指令（ng-repeat、ng-form、ng-bind 等）来轻松地将 javascript（即力量）绑定到您的标记。幕后有很多魔法。

Meteor 非常依赖 pub/sub 模型并连接到您的真实数据存储。他们的秘诀来自于轻松添加但抽象的包（handlebars 是他们的默认包之一，但其他一些包是 bootstrap、accounts-ui、d3 等）。

Meteor 遵循非常不同的意识形态，对框架设计的看法与 Angular 不同。在我看来，尽管该项目仍处于相对起步阶段，但 Meteor 的表现更胜一筹。您会发现 Meteor 非常*非常*擅长快速制作原型，尤其是在您需要获得用户支持并想使用 Twitter/Facebook/Google 时。

您最好选择其中一个，但如果您在服务器端不强，您可以编写一个非常漂亮的 Meteor 应用程序来充当您的 API 服务器。

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2014-01-10T14:26:49.340

如果您想将 angularjs 与流星一起使用，您只需安装一个包即可。然后你可以同时使用流星和角度。

Meteor 非常适合将数据从服务器传输到客户端，而 Angular 非常适合显示数据（并且稳定）。

```
mrt add angular-stack 
```

或者

```
mrt add ngMeteor 
```

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2013-02-16T18:14:07.990

一般来说，AngularJS 已经通过了 1.0 版本的里程碑，并被认为可以投入生产使用，而流星仍然是 alpha 软件。因此，Angular 更加精致，拥有[指令](http://docs.angularjs.org/guide/directive)、模块和丰富的第三方库，如[AngularUI](http://angular-ui.github.com)。

但是如果你想尝试一个前沿的框架，不要认为你必须做超级花哨的模板，而是需要一个内置的数据库，选择 Meteor！

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2014-10-07T22:27:50.757

我想你可能会发现[这个答案](https://stackoverflow.com/questions/19853419/why-would-i-need-angular-if-i-use-meteor/26246098#26246098)很有帮助。

我也认为这可能是一个重复的问题。

# android - Toast 中显示的 SQLite 数据

> ID：14719282
> 
> 赞同：0
> 
> 时间：2013-02-06T00:03:40.553
> 
> 标签：android, sqlite, toast

我想在 toast 中显示我的数据库中我的一个数据的字符串值。这是我到目前为止所尝试的。

这是我的主要活动：

```
Button btnShow = (Button)findViewById(R.id.btnShow);
    btnShow.setOnClickListener(new OnClickListener(){

     @Override  
        public void onClick(View v) {  
            DBUser dbUser = new DBUser(EditUserActivity.this);  
            dbUser.newNumber();
            //get the new value of the number from the DB
            Cursor c = dbUser.newNumber();
            String numberRetrieved = c.getString(c.getColumnIndex("number")).toString();
            Toast.makeText(EditUserActivity.this,"Current Modem No. is:" + numberRetrieved, Toast.LENGTH_LONG).show();
            c.close();
            dbUser.close();
     }
   }); 
```

这是我在数据库类中的方法：

```
 public Cursor newNumber() {

    String query = "SELECT * FROM " + DATABASE_TABLE + " WHERE _id=1";
    System.out.println(query);
     Cursor cur = db.rawQuery(query, null);
     cur.moveToFirst();
     return cur;

   } 
```

只是为了让您知道我的数据库存在并且其中肯定有一些值。但是每当我运行这段代码时，我的应用程序总是强制关闭！希望任何人都可以帮助我。谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2016-02-20T10:35:14.963

```
public static final String COL_2 = "DRIVERNO"; 
```

请确保您的列是这样的，然后将`COL_2`值`DRIVERNO`放入`c.getColumnIndex("DRIVERNO")` 像这样

```
String numberRetrieved = c.getString(c.getColumnIndex("DRIVERNO")).toString(); 
```

我希望您的应用不会再次崩溃我会从这个解决方案中解决我的问题。谢谢

# python - 从 .txt 错误打开 .exe

> ID：14719284
> 
> 赞同：0
> 
> 时间：2013-02-06T00:03:43.523
> 
> 标签：python, file, text

我目前正在创建一个脚本，它将简单地在与脚本相同的目录中打开一个程序。我想要一个名为“target.txt”的文本文件，基本上脚本将读取“target.txt”中的内容并根据其内容打开一个文件。

例如.. 文本文件将在里面读取“program.exe”，脚本将读取它并打开 program.exe。我这样做的原因是为了轻松更改脚本打开的程序，而无需实际更改里面的内容。

我为此使用的当前脚本是：

```
import subprocess    

def openclient():
   with open("target.txt", "rb") as f:
      subprocess.call(f.read())
      print '''Your file is opening''' 
```

它给了我一个错误，说它找不到 target.txt，即使我将它放在同一个目录中。我试过拿走.txt，还是没有。但是，此代码实际上以前有效；由于某种奇怪的原因，它停止了工作。我使用的是 PythonWin 编译器而不是 IDLE，我不知道是不是这个原因。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-06T01:00:14.037

有两个可能的问题：

*   `target.txt`可能以换行符结束，这搞砸了`subprocess.call()`

*   如果`target.txt`不在当前目录中，则可以通过解析魔术变量来访问包含当前正在执行的 Python 文件的目录`__file__`。

    但是，`__file__`在脚本加载时设置，如果在加载脚本和调用之间更改当前目录`openclient()`，则 的值`__file__`可能是相对于旧的当前目录。所以第一次读入脚本时必须保存`__file__`为绝对路径，以后再用它来访问与脚本同目录的文件。

这段代码对我有用，包含运行 Unix 日期命令`target.txt`的字符串：`date`

```
#!/usr/bin/env python2.7

import os
import subprocess

def openclient(orig__file__=os.path.abspath(__file__)):
    target = os.path.join(os.path.dirname(orig__file__), 'target.txt')
    with open(target, "rb") as f:
        subprocess.call(f.read().strip())
        print '''Your file is opening'''

if __name__ == '__main__':
    os.chdir('foo')
    openclient() 
```

# github - Git 在没有 ssh 密钥的情况下拉入虚拟机

> ID：14719288
> 
> 赞同：1
> 
> 时间：2013-02-06T00:03:54.157
> 
> 标签：github, amazon-ec2, virtual-machine

我正在尝试将在本地计算机上创建的现有 github 存储库拉到运行在 EC2 上的 vm 上，供多人使用。我对使用没有密码的 ssh 密钥有些担心，所以我想知道是否有任何方法可以匿名直接拉入 VM，或者提供最初推送 repo 的帐户的用户名和密码，这样我的个人信息不必存储在 vm 上，并且让某人获得 vm 的无密码 ssh 密钥没有安全风险。这可能吗？

当前运行 Ubuntu 12.04

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-06T07:06:28.140

我建议生成一个新密钥并将其作为部署密钥添加到您的特定存储库中。这些密钥链接到特定的存储库，而不是您的帐户。

这里也有很多选择。

[https://help.github.com/articles/managing-deploy-keys](https://help.github.com/articles/managing-deploy-keys)

# java - 为什么我的战争部署在 GAE 上会占用这么多空间？

> ID：14719296
> 
> 赞同：3
> 
> 时间：2013-02-06T00:04:41.950
> 
> 标签：java, google-app-engine, gwt

当我编译我的 GAE/GWT (Java) 项目（编译所有 6 个排列）时，整个 WAR 文件夹在我的计算机上的权重为 93.9 Mo（扩展的 Mac OS 日志）。在 GAE 上部署时，管理控制台（配额详情页面）显示我的应用占用了 18% 的免费配额。意思是180Mb。这怎么可能 ？我错过了什么？谷歌是否使用大块文件系统？如何优化可用存储空间的使用？我已经 JARing 我的 'classes' 文件夹，但增益（在空间方面......）是不相关的。

最大的问题（从我的角度来看）是我自己的 GWT + 服务器端代码 +“外部”库 (PDFJet) 占用了 1.9Mb 的空间。其余的 (>91Mb) 由 appengine 和 datanucleus 自己的库获取。为什么我们需要在部署中包含这些？它们被每个人使用。我认为集中和自动部署这些对我们所有人来说都会更好。我不明白。

对此有何建议或意见？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-02-06T03:58:45.493

您需要确保 GWT 编译后输出针对**生产部署**进行调整，在您的情况下针对**"cloud"**。

## 确保生产部署

1) STYLE IS OBF 的 GWT 编译器标志

2) GWT Compilation 关闭堆栈跟踪仿真器功能。在 .gwt.xml 中

```
<set-property name="compiler.stackMode" value="strip" /> 
```

## 确保云部署

**1) extra**和**deploy**的GWT Compiler 标志用于将大部分部署冗余文件从 WAR 文件中移开。我猜您的 WEB-INF 中有大量名为 deploy 的文件夹。

**编辑**-

1) 参考 GWT 编译器选项 - [https://developers.google.com/web-toolkit/doc/latest/DevGuideCompilingAndDebugging](https://developers.google.com/web-toolkit/doc/latest/DevGuideCompilingAndDebugging)

2）参考谷歌小组讨论 - [https://groups.google.com/forum/?fromgroups=#!topic/google-web-toolkit/-WtEfDvUI4g](https://groups.google.com/forum/?fromgroups=#!topic/google-web-toolkit/-WtEfDvUI4g)

# c# - 未使用 Azure 通知中心在 iOS 上接收推送通知 - 未调用 didReceiveRemoteNotification

> ID：14719297
> 
> 赞同：3
> 
> 时间：2013-02-06T00:04:54.990
> 
> 标签：c#, azure, push-notification, apple-push-notifications, azure-notificationhub

我已关注这些通知中心资源，但未能成功在我的 iOS 设备上接收推送通知。

*   [http://msdn.microsoft.com/library/jj927169.aspx](http://msdn.microsoft.com/library/jj927169.aspx)
*   [http://channel9.msdn.com/Blogs/Subscribe/Service-Bus-Notification-Hubs-Code-Walkthrough-iOS-Edition](http://channel9.msdn.com/Blogs/Subscribe/Service-Bus-Notification-Hubs-Code-Walkthrough-iOS-Edition)

我已经检查、重新检查并重新检查了我的设置：

1.  创建了一个新的通知中心：myhubname
2.  遵循所有证书配置步骤。 ![开发推送 SSL 证书](../Images/ade221bb471b9999efc5b7b73f1a27ca.png)
3.  导出私有证书并上传到**Sandbox**下的 Notification Hub以确保使用正确的 APS 网关
4.  下载了配置文件，它与我的项目的 bundle id 匹配，自动检测到代码签名，并成功编译。不要使用“V2D7FJQXP”。如果您想知道，该字符串会显示在您的 App ID 中：V2D7FJQXP.com.yourcompany.yourproject
5.  在物理设备上运行 - 不在模拟器下

生成推送通知的演示应用程序：

```
while (true)
{
    string connectionString = ServiceBusConnectionStringBuilder.CreateUsingSharedAccessSecretWithFullAccess("myhubname-ns", "…snip");
    var hubClient = NotificationHubClient.CreateClientFromConnectionString(connectionString, "myhubname");
    var iosPayload = AppleNotificationJsonBuilder.Create("Hello!");
    iosPayload.CustomFields.Add("inAppNotification", "Hello!");
    hubClient.SendAppleNativeNotification(iosPayload.ToJsonString());

    Console.WriteLine("Sent");

    Thread.Sleep(20000);
} 
```

不会产生异常或问题。修改任何命名空间、键或集线器名称都会引发异常，并且来自 Azure 的提琴手响应代码是 2xx，所以一切看起来都很好。

我看到注册正确发生在下面的代码中：

*   我接受了设备上的推送通知
*   我看到一次 createDefaultRegistrationWithTags 调用，然后在后续调用中看到存在是真的。
*   没有调用 didFailToRegisterForRemoteNotificationsWithError，这没问题
*   在此处的代码示例中：http: [//msdn.microsoft.com/library/jj927168.aspx](http://msdn.microsoft.com/library/jj927168.aspx)，我已将 sb:// 替换为 https://，否则会抛出异常。非问题我在想

：

```
-(void)application:(UIApplication *)application didRegisterForRemoteNotificationsWithDeviceToken:(NSData *) deviceToken {
NSString* connectionString = [SBConnectionString stringWithEndpoint:@"https://gift-ns.servicebus.windows.net/" listenAccessSecret:@"…snip"];
self.hub = [[SBNotificationHub alloc] initWithConnectionString:connectionString notificationHubPath:@"gift-usw-dev"];
[self.hub refreshRegistrationsWithDeviceToken:deviceToken completion:^(NSError* error) {
    if (error == nil) {
        [self.hub defaultRegistrationExistsWithCompletion:^(BOOL exists, NSError* error2) {
            if (error2 == nil) {
                if (!exists) {
                    [self.hub createDefaultRegistrationWithTags:nil completion:^(NSError* error3) {
                        if (error3 != nil) {
                            NSLog(@"Error creating default registration: %@", error3);
                        }
                    }];
                }
            } else {
                NSLog(@"Error retrieving default registration: %@", error2);
            }
        }];
    } else {
        NSLog(@"Error refreshing device token: %@", error);
    }
}];
} 
```

启动演示应用程序，然后运行 ​​iOS 应用程序后，这是生成的仪表板，我不知道如何有效阅读。 ![在此处输入图像描述](../Images/e2bfa260dde4bc74d683971458a021c1.png)

认为我的证书不正确，或者 Azure 和 APS 之间丢失了某些东西，我深入研究了 APS 服务的故障排除并发现了这个：http: [//developer.apple.com/library/ios/#technotes/tn2265/_index.html](http://developer.apple.com/library/ios/#technotes/tn2265/_index.html)并跳转到**连接到推送服务的问题部分**

并运行以下命令：

`openssl s_client -connect gateway.sandbox.push.apple.com:2195 -cert YourSSLCertAndPrivateKey.pem -debug -showcerts -CAfile server-ca-cert.pem`

但是我没有 .pem 文件（OSX），所以我找到了这个命令来获取它们：

`openssl pkcs12 -in keyStore.pfx -out keyStore.pem -nodes`

其中 keyStore.pfx 是从钥匙串导出的 .p12 的重命名版本，用于推送通知证书。

命令运行良好。怎么了？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-06T23:44:05.857

我在通知中心功能的服务总线团队工作。正如您已经发现的那样，有效负载的格式不正确。

CustomFields 采用 JSON 编码的字符串，因此您可以将整数和对象设置为自定义字段，例如： iosPayload.C​​ustomFields.Add("inAppNotification", "{ \"my\": {\"new\" : "jsonObject" }}");

所以如果你想添加一个字符串，你必须输入一个 json 编码的字符串。iosPayload.C​​ustomFields.Add("inAppNotification", "\"Hello!\"");

考虑到混淆，我们可能会考虑改变这种行为，或者在序列化时添加 JSON 安全检查。

关于通知中心仪表板。当 APNs 接受通知时，通知中心会报告成功的通知。您还可以可视化“无效负载”的图表，该图表将显示 APNs 是否拒绝了来自通知中心的通知。

不幸的是，除了在应用程序运行时使用回调捕获通知之外，我不知道监控设备流量的方法：didReceiveRemoteNotification。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-06T00:04:54.990

AppleNotificationJsonBuilder 没有使用最新的 nuget*服务总线预览功能*正确序列化有效负载。

因此，根据 msdn 指令中的示例：

```
var iosPayload = AppleNotificationJsonBuilder.Create("Hello!");
iosPayload.CustomFields.Add("inAppNotification", "Hello!");
Console.Log(iosPayload.ToJsonString()); 
```

生成：

```
{"aps":{"alert":"This is a test"},"inAppNotification":Hello! This is a test} 
```

这是畸形的。格式良好的是“字符串”

```
{"aps":{"alert":"This is a test"},"inAppNotification":"Hello! This is a test"} 
```

[根据http://developer.apple.com/library/mac/#documentation/NetworkingInternet/Conceptual/RemoteNotificationsPG/ApplePushService/ApplePushService.html](http://developer.apple.com/library/mac/#documentation/NetworkingInternet/Conceptual/RemoteNotificationsPG/ApplePushService/ApplePushService.html)，自定义有效负载很好

一种解决方案是使用 Json.NET，或者在 Microsoft 内部 ping 某人。

开放式问题：

*   我如何监控 iOS 设备上的网络流量？
*   “JSON”是否到达设备，但解析不正确？还是它在 APS 中被杀死？
*   Azure 通知中心仪表板没有太大帮助

希望这可以节省某人的下午。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-06T23:41:56.420

尝试这个：

```
var iosPayload = AppleNotificationJsonBuilder.Create("This is a test");
iosPayload.CustomFields.Add("inAppNotification", "\"Hello!\""); 
```

> --> {"aps":{"alert":"这是一个测试"},"inAppNotification":"Hello!"}

更复杂的：

```
iosPayload.CustomFields.Add("inAppNotification", "[ \"bang\",  \"whiz\" ]"); 
```

> --> {"aps":{"alert":"这是一个测试"},"inAppNotification":[ "bang", "whiz" ]}

```
iosPayload.CustomFields.Add("inAppNotification", "42"); 
```

> --> {"aps":{"alert":"这是一个测试"},"inAppNotification":42}

# jquery - 在 jQuery 中通过 nth-child 为不同的浏览器宽度重新定位 div

> ID：14719302
> 
> 赞同：-2
> 
> 时间：2013-02-06T00:05:11.557
> 
> 标签：jquery, css-selectors

我在 jQuery 中找到了一个简单的方法，它允许我根据查看者的浏览器宽度在其他 div 之后添加 div。所以我要做的是告诉浏览器在第 30 个“内部”div 之后插入“test5”div，如果浏览器宽度超过 500px。如果浏览器宽度小于 500px，我也会告诉它删除这个 div。我还使用多个 div 进行了此操作，因此当浏览器宽度小于 500 像素时，它会隐藏放置在第 30 个“内部”div 之后的原始 div，然后再显示四个 div（test、test2、test3 和 test4）。所以我让整个事情与多个 div 一起工作。这很棒。

现在，我想`nth-child`为每个指定的浏览器宽度更改 div 的位置。所以我现在必须这样做的方法是为一个宽度插入 5 个 div，为另一个宽度隐藏它们，为另一个宽度插入另外 5 个 div，为另一个宽度隐藏它们等等。与其不断添加 5 个 div，然后为每个不同的浏览器宽度隐藏它们，我只想为不同的浏览器宽度更改第 n 个子项的位置。所以这是我的旧代码.. 请注意，对于这个例子，我只使用 5 个 div，当浏览器宽度超过 500px 时显示 1 个，然后当浏览器宽度小于 500px 时显示 4 个 div..

这是旧代码：

```
var $window = $(window);
var resized=false;
var resized500=false;
function checkWidth() {

var windowsize = $window.width();
if (windowsize > 440) {
    if(resized==false){
   $( '.inner:nth-child(5)' ).after( '<div class="test">');
   $( '.inner:nth-child(10)' ).after( '<div class="test2">');
        resized=true;
    }
}

if (windowsize > 500) {
    if(resized500==false){
 $( '.inner:nth-child(30)' ).after( '<div class="test3">');
        resized500=true;
    }
}
 if (windowsize >= 500) {
     $('.test, .test2').remove();
     resized=false;
 }
if (windowsize <= 500) {
     $('.test3').remove();
     resized500=false;
 }
}
// Execute on load
checkWidth();
// Bind event listener
$(window).resize(checkWidth); 
```

这是用于演示此代码的旧 jsfiddle（您必须调整 HTML 窗口的大小才能看到 div 出现和消失）：

[http://jsfiddle.net/EUqEm/72/](http://jsfiddle.net/EUqEm/72/)

我想提出一种方法，它不会隐藏 div 或在浏览器宽度更改时添加新的，而是我希望它只`nth-child`为每个指定的浏览器宽度重新定位 div。我不确定我会如何做到这一点，但这里是一个起始的基本 jquery 代码，我认为它可能如何工作，以及一个 jsfiddle。出于示例目的，这是使用 3 个浏览器宽度。

```
var $window = $(window);
var resized=false;
var resized500=false;
var resized600=false;
function checkWidth() {

var windowsize = $window.width();
if (windowsize > 440 && windowsize < 500) {
    //if the window is in between the sizes of 440 and 500px
    if(resized==false){
   $( '.inner:nth-child(5)' ).after( '<div class="test">');
   $( '.inner:nth-child(10)' ).after( '<div class="test2">');
   $( '.inner:nth-child(12)' ).after( '<div class="test3">');
   $( '.inner:nth-child(15)' ).after( '<div class="test4">');
        resized=true;
    }
}

if (windowsize > 500 && windowsize < 600) {
    //if the window is in between the sizes of 500 and 600px
    if(resized500==false){

 // code that repositions all four test divs up one number (5 to 6, 10 to 11, etc.)
        resized500=true;

    }
}

if (windowsize > 600 && windowsize < 700) {
    //if the window is in between the sizes of 600 and 700px
    if(resized600==false){

 // code that repositions all four test divs up one number again.(6 to 7, 11 to 12, etc.)
        resized600=true;

    }
}

}

// Execute on load
checkWidth();
// Bind event listener
$(window).resize(checkWidth); 
```

这是这个早期基本代码的 jsFiddle（由于没有为各种浏览器宽度设置值，因此不能完全工作）：

[http://jsfiddle.net/EUqEm/73/](http://jsfiddle.net/EUqEm/73/)

**所以只是快速回顾一下：**

我有通过 nth-child 放置在其他 div 之后的 div，这些 div 根据查看者浏览器的宽度出现和消失。目前，我必须通过 nth-child 将 div 放置在正确的位置（这很好），然后使 div 消失以获取分辨率，然后重新出现新的，我必须对所有浏览器宽度重复此过程/决议。我想这样做，所以我通过 nth-child 插入这个 div（就像我现在正在做的那样）但不必隐藏 div 并为每个浏览器宽度显示新的，我希望能够改变不同浏览器宽度的第 n 个子位置。

如果有人知道此问题的解决方案，请随时留下答案，甚至可以使用有效的 jsFiddle 演示。:)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-06T17:30:19.930

我已将您的代码更改为使用包含元素的对象和一个函数，该函数通过在正确的位置创建一个新元素并删除当前`div`元素来更改元素值。`nth-child``div`

这是`div`s的对象：

```
var theDivs={
    "div1":$("<div />").addClass("test"),
    "div2":$("<div />").addClass("test2"),
    "div3":$("<div />").addClass("test3"),
    "div4":$("<div />").addClass("test4")
}; 
```

这是功能：

```
function setNthPosition(theDiv,newPos){
    //Clone the specific div
    var theClone=theDivs["div"+theDiv].clone();

    //Replace the nth div with the clone
    $("#wrapper div:nth-child("+newPos+")").replaceWith(theClone);  
} 
```

此外，您的`resized`布尔检查设置不正确，所以我只是将它们注释掉。

这是完整的 JsFiddle：http: [//jsfiddle.net/EUqEm/85/](http://jsfiddle.net/EUqEm/85/)

# python - 为什么求幂 ** 与 pow() 不同？- Python

> ID：14719304
> 
> 赞同：1
> 
> 时间：2013-02-06T00:05:18.183
> 
> 标签：python, python-2.7

在 python`2**3`中等于`pow(2,3)`
但不知何故`-1**0`不等于`pow(-1,0)`
第一个给出了**-1**的意外输出？

有人可以解释为什么吗？

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2013-02-06T00:06:43.503

`**`优先于`-`，因此您的代码的评估方式如下：

```
 -(1**0)
= -(1)
= -1 
```

要获得相同的答案，请添加括号：

```
(-1)**0 
```

该文档在这里对`**`运算符进行了更多解释：http: [//docs.python.org/2/reference/expressions.html#the-power-operator](http://docs.python.org/2/reference/expressions.html#the-power-operator)

# symfony - FOSOAuthServerBundle“找不到客户端”

> ID：14719307
> 
> 赞同：2
> 
> 时间：2013-02-06T00:05:36.797
> 
> 标签：symfony, fosuserbundle, fosrestbundle

我正在尝试使用 FOSOAuthServerBundle，一切正常。我可以使用 oauth/v2/auth 对用户进行身份验证，但如果用户名和密码正确，我会收到以下错误消息：

```
Client not found.
404 Not Found - NotFoundHttpException 
```

> /var/www/www.billtrackapp.com/vendor/friendsofsymfony/oauth-server-bundle/FOS/OAuthServerBundle/Controller/AuthorizeController.php 中的堆栈跟踪在第 138 行
> ->findClientByPublicId($clientId); if (null === $client) { throw new NotFoundHttpException('Client not found.'); } $this->client = $client;

希望你能在这个问题上帮助我。

谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-06-13T10:47:38.373

好吧，我不知道这是否是您的情况，但我的情况是在名称空间中。您需要查看您的客户端是在实体文件夹还是模型文件夹中，并且取决于您正在执行的实现。希望这可以帮助。我的客户代码：

```
 <?php

    // src/Azimut/ApiBundle/Entity/Client.php

    namespace Azimut\ApiBundle\Entity;

    use FOS\OAuthServerBundle\Entity\Client as BaseClient;
    use Doctrine\ORM\Mapping as ORM;

    /**
     * @ORM\Entity
     */
    class Client extends BaseClient
    {
     /**
       * @ORM\Id
       * @ORM\Column(type="integer")
       * @ORM\GeneratedValue(strategy="AUTO")
       */
        protected $id;

        public function __construct()
        {
            parent::__construct();

        }

        /**
         * Get id
         *
         * @return integer 
         */
        public function getId()
        {
            return $this->id;
        }
    } 
```

# cocoa - 小数点前没有零

> ID：14719308
> 
> 赞同：7
> 
> 时间：2013-02-06T00:06:01.113
> 
> 标签：cocoa, cocoa-touch, nsnumberformatter

我有一个将浮点数转换为字符串的函数：

```
NSNumberFormatter *formatter = [[NSNumberFormatter alloc] init];
[formatter setMaximumFractionDigits:2];
[formatter setMinimumFractionDigits:0];
NSString *finalNumber = [formatter stringFromNumber:[NSNumber numberWithFloat:sendNumber]];
return finalNumber; 
```

在一个简单的除法运算 1/2 之后，我得到了结果，`.5`但我希望得到`0.5`.

我该如何改变呢？

* * *

## 回答 #1

> 赞同：24
> 
> 时间：2013-10-11T08:42:11.340

只需使用

```
[formatter setMinimumIntegerDigits:1]; 
```

这给出了小数点前至少一位数字。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-06T00:14:58.317

您需要设置有效数字的格式。查看此线程以获取一些有用的信息：[什么描述 NSNumberFormatter -maximumSignificantDigits？](https://stackoverflow.com/questions/1322348/what-describes-nsnumberformatter-maximumsignificantdigits/13110633#13110633)

# javascript - 隐藏文本区域文本但不闪烁光标

> ID：14719314
> 
> 赞同：1
> 
> 时间：2013-02-06T00:06:32.923
> 
> 标签：javascript, jquery, css, twitter

我试图模仿 Twitter 在撰写推文时如何突出显示用户。

我正在使用[提及输入 jQuery 插件](http://podio.github.com/jquery-mentions-input/)。我想更改@screen_name 的颜色，而不是像插件默认那样更改背景颜色。

有没有办法为@screen_name 着色并在最后显示闪烁的光标？

我能够做到，但我需要隐藏 textarea 文本，这样它就不会使上面的 CSS 样式文本变暗......但是它隐藏了我不想做的闪烁光标。

请参阅我的 jsFiddle 显示问题：http: [//jsfiddle.net/thhbe/1/](http://jsfiddle.net/thhbe/1/)

或者看到它...

必需：jQuery、Underscore.js 和插件。

HTML：

```
<div><textarea id="tweet_textarea" class="mention textarea compose_text"></textarea></div> 
```

JS：

```
/*
* Add handlers to HTML elements and set options....
*/
$('textarea.mention').mentionsInput({
    onDataRequest:function (mode, query, callback) {
        var data = [
            { id:1, name:'Kenneth Auchenberg', 'avatar':'http://goo.gl/SUCm1', 'type':'contact' },
            { id:2, name:'Jon Froda', 'avatar':'http://goo.gl/SUCm1', 'type':'contact' },
            { id:3, name:'Anders Pollas', 'avatar':'http://goo.gl/SUCm1', 'type':'contact' }
        ];

        data = _.filter(data, function(item) { return item.name.toLowerCase().indexOf(query.toLowerCase()) > -1 });

        callback.call(this, data);
    }
}); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2016-07-03T01:58:31.130

我迟到了几年，但希望我能为你的问题提供一个实际的答案。

您（或插件）的想法是正确的......使用另一个元素（“传真元素”），其中包含`textarea`. 只需要进行一些更改：

1.  分册元素应该具有与`textarea`
2.  传真元素应该放置在它的*下面*`textarea`而不是它的*上面*。
3.  的背景`textarea`应该是透明的。
4.  fascimilie 元素的文本和边框应该是透明的。

我不确定在不修改插件的情况下可以完成多少工作，但是一旦进行了这些更改，您就不必担心光标会消失，因为您不再需要隐藏`textarea`.

不过，您还没有走出困境，还需要做更多的工作才能使解决方案变得健壮。

因此，我建议您查看[Mentionator](https://github.com/klawson88/Mentionator)，这是一个 jQuery 插件，可以可靠地实现您想要的功能。它的源代码结构良好、易于理解且注释丰富，因此如果您想查看代码以了解插件和 Twitter 的扩展标记实用程序（很可能）如何工作，您应该拥有这样做有点麻烦。

还有一件事，鉴于我是透明度的大力支持者，我想让您知道 Mentionator 确实由您维护 :)。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-14T16:59:15.343

我的答案是使用`contenteditable` [http://html5demos.com/contenteditable](http://html5demos.com/contenteditable)。这似乎不是 twitter 为他们的推文输入（其中提到突出显示）所做的，但我已经放弃了弄清楚他们是如何做到的。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2017-12-29T13:41:25.777

我遇到了类似的问题，发现很难找到一个好的解决方案。我正在使用 span 标签将我自己的插入符号/光标实现到样式元素中，但这在将单词拆分到新行时存在一些问题。但是我找到了一个非常简单的解决方案，并且看到这是在谷歌上解决这个问题的第一件事，我会分享它，因为如果它在这里的话，这对我来说是几周前的理想选择！:)

如前所述，解决方案是将您的样式元素放在文本输入下方。您需要使文本输入具有 alpha=0 背景和颜色。颜色也隐藏了插入符号。但是有一个专门用于插入符号的 CSS 属性，您可以使用它来取消隐藏它：

```
background: rgba( 0, 0, 0, 0.0 );
color: rgba( 0, 0, 0, 0.0 );
caret-color: rgba( 0, 0, 0, 1.0 ); 
```

# sql-server - 行大小开销

> ID：14719315
> 
> 赞同：5
> 
> 时间：2013-02-06T00:06:35.967
> 
> 标签：sql-server, database, sql-server-2008, sqldatatypes

我在共享主机上有一个 MS SQL Server 2008 数据库，我需要尽可能减少使用的存储空间。我最大的表有以下定义：

```
CREATE TABLE [stage](
    [station_id] [smallint] NOT NULL,
    [time_utc] [smalldatetime] NOT NULL,
    [stage_mm] [smallint] NOT NULL,
CONSTRAINT [PK_stage] PRIMARY KEY CLUSTERED ([station_id] ASC,[time_utc] ASC) 
```

我试图找出表中每条记录的平均字节数。根据理论，大小应该是：4B（行标题）+ 2B（smallint）+ 4B（smalldatetime）+ 2B（smallint），即12个字节。

但是，当我运行命令时：

```
dbcc showcontig ('stage') with tableresults 
```

它显示： MinimumRecordSize=15, MaximumRecordSize=15 所以根据 SQL Server，每条记录的字节数是 15 而不是 12 当我查看表占用的总磁盘空间并将其除以时，每条记录的 15 字节数似乎也是正确的行数。

什么占用了 3 个额外的字节？？？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-02-06T00:32:29.817

额外的 3 个来自 NULL 位图。[根据 Paul 的帖子](http://www.sqlskills.com/blogs/paul/misconceptions-around-null-bitmap-size/)，它位于每一行，除了那些跨列都是 SPARSE 的行（从 SQL Server 2008 开始）。

根据[此 BOL 帖子](http://msdn.microsoft.com/en-us/library/aa933051(v=sql.80).aspx)中的一行，NULL 位图 = 2 + ((number_columns_in_clustered_index + 7) / 8)。在你的情况下，3。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2016-08-18T13:42:44.833

我部分同意@Matt，NULL 位图需要 2 个字节，这是正确的。

但是，最后一个字节被每位的列数消耗。意思是，如果我的表中有 6 列，那么我需要 1 个字节（6 位），或者如果我有 12 列，那么我需要 2 个字节（12 位）。

在您的情况下，有**3 列**，因此它只占用了**1 字节**。

# php - 通过多次刷新添加到 $_POST 数组

> ID：14719316
> 
> 赞同：0
> 
> 时间：2013-02-06T00:06:38.333
> 
> 标签：php

我需要能够存储表单中的 $_POST 数据（我正在使用 SESSION 变量执行此操作），并且我需要将数据添加到 $_POST 数组而不覆盖以前的数据。

这是我关于 SESSION 变量的原始线程：[Store Array Variables Through Page Refresh with PHP](https://stackoverflow.com/questions/14699824/store-array-variables-through-page-refresh-with-php)

这是我需要做的一个例子：

页面上有一个表格，您可以输入墙壁的宽度和高度来计算粉刷墙壁需要多少油漆/人工。输入第一个墙尺寸后，用户可以单击标有“添加墙”的提交按钮，将另一墙添加到他们的订单中。

在第一次墙输入后，POST 数据将返回如下内容：

```
Array ( [wallW] => Array ( [0] => 9 ) [wallL] => Array ( [0] => 10 ) ) 
```

进入第二面墙后，它看起来像这样：

```
Array ( [wallW] => Array ( [0] => 9 [1] => 20 ) [wallL] => Array ( [0] => 10 [1] => 15 ) ) 
```

这将一直持续到用户进入他们所有的墙为止。

我试过做`array_merge`,`array_append`等，但这些似乎都不起作用；即使我将 POST 数据带入另一个数组，它也会不断覆盖 POST 数据中的内容。

我知道最简单的方法是在其中添加一些 jQuery，但这是针对 PHP 类（我们还不允许使用 SQL），所以我想尝试仅使用 PHP 来解决这个问题。

任何帮助都是极好的。

谢谢，

切尔西

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-06T00:12:22.280

我不知道为什么这被否决了，我觉得这很粗鲁，因为你显然是 php 新手。但是您只需要在后续请求中重新发布您的帖子变量。因此，您需要将现有的帖子对象序列化为隐藏字段。您缺少的是 php / http 是无状态的。所以请求之间没有任何保留，另一个简单的解决方案可能是将这些 POST 变量移动到 SESSION 变量。

我看到您已将 POST 数据添加到会话中，但没有理由将其添加回 post，只需继续附加到会话，然后从那里使用它。如果您尝试这样做，将内容添加到 _POST 不会强制它们下次发布，请参阅关于将它们序列化到隐藏字段的部分。

祝你好运，欢迎来到网络编程。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-06T00:14:57.837

你构建数组的方式对我来说似乎有点奇怪。相反，我会做类似的事情。

```
if(!empty($_POST))
{
    $wall = array('w' => $_POST['w'], 'h' => $_POST['h']);
    $_SESSION['walls'][] = $wall;
} 
```

请试一试。

# java - Java 帮助 十进制格式无法解析为类型

> ID：14719318
> 
> 赞同：1
> 
> 时间：2013-02-06T00:06:41.283
> 
> 标签：java, decimalformat

我花了一段时间试图弄清楚为什么它不会在我的 java 代码中使用十进制格式。我已经用其他整数声明了十进制格式，但仍然出现错误。这是我的代码：

```
public class Assign31
{
  public static void main(String [] args)
  {
    DecimalFormat speedPattern = new DecimalFormat( "00.00" );
    int gearRadius = 100;
    double pi = Math.PI;
    int cadence = 90;

     double gearspeed = gearRadius * pi;

     double speedmph = gearspeed % cadence;

     System.out.println("The speed of the cyclist on a bike with gear 100.0 and cadence 90 is " + 
speedmph + " mph.");
     System.out.println("The speed (rounded) of the cycleist on the bike with gear 100.0 and cadence 90 is " + 
speedPattern.format(speedmph));
  }
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-06T00:08:49.847

您需要导入它：

```
import java.text.DecimalFormat;

public class Assign31 {
    public static void main(String [] args) {
        DecimalFormat speedPattern = new DecimalFormat( "00.00" );
        // etc. 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-06T00:11:44.930

```
import java.text.DecimalFormat;

public class Assign31 {
    public static void main(String[] args) {

        // Problem 1

        // declare variables
        DecimalFormat speedPattern = new DecimalFormat("00.00");
        int gearRadius = 100;
        double pi = Math.PI;
        int cadence = 90;

        // initialze data for first scenario
        double gearspeed = gearRadius * pi;

        // calculate speed
        double speedmph = gearspeed % cadence;

        // display speed
        System.out
                .println("The speed of the cyclist on a bike with gear 100.0 and cadence 90 is "
                        + speedmph + " mph.");
        System.out
                .println("The speed (rounded) of the cycleist on the bike with gear 100.0 and cadence 90 is "
                        + speedPattern.format(speedmph));

        // end problem 1

    }
} 
```

# jquery - 从 div 中删除除一个元素以外的所有元素

> ID：14719321
> 
> 赞同：0
> 
> 时间：2013-02-06T00:06:44.140
> 
> 标签：jquery

我正在尝试删除 div ( `.shipping_address_table`) 中的所有元素，除了一个具有 class 的表`theTable`。

我想我在这里用`html()`错了。但这似乎应该非常接近。

```
$(this).parents('div#wrapper').find('div.shipping_address_table').html().remove(':not(.theTable)'); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-06T00:11:15.143

```
$("#wrapper").find('div.shipping_address_table').children(':not(.theTable)').remove(); 
```

# mongoid - Mongoid 复合查询

> ID：14719322
> 
> 赞同：1
> 
> 时间：2013-02-06T00:06:48.257
> 
> 标签：mongoid, criteria, composite

我是 mongoid 的新手，我在查询数据库的内部关系时遇到问题：

这是我希望为其创建查询的第一个模型

```
class User
  include Mongoid::Document
  include Mongoid::MultiParameterAttributes
  include Geocoder::Model::Mongoid

  has_many :hosted_meals, class_name:'Meal', inverse_of: :host
  has_and_belongs_to_many :followers, class_name: 'User', inverse_of: :following
 .
 .
 .
end 
```

第二个模型

```
 class Meal
    include Mongoid::Document
    include Mongoid::Timestamps
    include Geocoder::Model::Mongoid

    field :privacy, type: String, default: 'p'
    belongs_to :host, class_name: 'User', inverse_of: :hosted_meals 
```

我试图创建一个执行以下操作的 mongo 查询：

1.  返回所有类型为“p”的餐点

2.  返回所有餐点的类型为“f”，并且它们的主人在当前用户的关注者中，如下所示：

Meal.where(:privacy => 'f', :host_id.in => )

# html - 如何制作一个延伸到页面长度的侧边栏？

> ID：14719323
> 
> 赞同：2
> 
> 时间：2013-02-06T00:06:57.160
> 
> 标签：html, css, layout

如果我`min-height: 700px;`在侧边栏设置 a ，它可以正常工作，但是如果内容长度超过 700 像素，则侧边栏结束并且页面内容占据页面的整个宽度。我希望侧边栏沿着页面的长度向下，与内容一样长或短。如何才能做到这一点？

这是我的侧边栏的 css 代码：

```
#sidebar
{
    float: right;
    min-height: 700px;
    min-width: 25%;
    background-color: #FFFFFF;
} 
```

将高度更改为`100%`会导致侧边栏完全消失。

这是html代码；

```
<bod>
  <div id="sidebar"></div>
  <div id="content">Content here....</div>
</div> 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-06T00:19:40.353

给它`position:absolute;`一个`bottom:0px;`

看看：http: [//jsfiddle.net/AliBassam/McJG8/](http://jsfiddle.net/AliBassam/McJG8/)

**HTML**

```
<div id="parentDiv">
  <div id="content">Content here....</div>
  <div id="sidebar"></div>
</div> 
```

**CSS**

```
#parentDiv
{
    position:relative;
    min-height:700px;
}
#sidebar
{
    position:absolute;
    right:0px;
    bottom:0px;
    top:0px;
    width:100px;
} 
```

现在`#parentDiv`有`min-height:700px;`如果它的内容被拉伸，它`#sidebar`也会被拉伸。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-06T00:43:48.680

不知道您要做什么的确切要求，这听起来像是一个可以使用[Faux Columns](http://www.alistapart.com/articles/fauxcolumns/)轻松修复的解决方案。

# java - 如何计算二叉树中“唯一子”节点的数量？

> ID：14719324
> 
> 赞同：3
> 
> 时间：2013-02-06T00:07:01.953
> 
> 标签：java

注意：这是与家庭作业相关的，但我没有这样标记它，因为“家庭作业”标签被标记为过时（？）

使用以下实现二叉树的类...

```
class TreeNode
{
  private Object value; 
  private TreeNode left, right;

   public TreeNode(Object initValue)
  { 
     value = initValue; 
     left = null; 
     right = null; 
  }

   public TreeNode(Object initValue, TreeNode initLeft, TreeNode initRight)
  { 
     value = initValue; 
     left = initLeft; 
     right = initRight; 
  }

   public Object getValue()
  { 
     return value; 
  }

   public TreeNode getLeft() 
  { 
     return left; 
  }

   public TreeNode getRight() 
  { 
     return right; 
  }

   public void setValue(Object theNewValue) 
  { 
     value = theNewValue; 
  }

   public void setLeft(TreeNode theNewLeft) 
  { 
     left = theNewLeft;
  }

   public void setRight(TreeNode theNewRight)
  { 
     right = theNewRight;
  } 
```

}

我需要计算二叉树中“独生子女”的节点数，这被定义为没有来自其父节点的另一个节点的节点。

这是我到目前为止所拥有的：

```
public static int countOnlys(TreeNode t)
  {
     if(t == null)
         return 0;
     if(isAnOnlyChild(t))
         return 1;
     return countOnlys(t.getLeft()) + countOnlys(t.getRight());
  } 
```

我不知道如何实现该`boolean`方法`isAnOnlyChild(TreeNode t)`

有人可以帮我吗？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-02-06T00:26:08.170

您非常接近并且遍历看起来不错，但是在您的 Treenode 中，您没有孩子与其父母之间的链接。因此，如果存在兄弟姐妹（右孩子），您无法判断左孩子。

您可以有一个父 Treenode（以及左和右），因此您可以检查给定节点的父节点有多少子节点。或者按照 ajp15243 的建议，改为使用检查给定节点有多少子节点的方法。

后者的一些伪代码：

```
//we still need to check if that only child has its own children
if hasOnlyChild(t) 
      return 1 + checkOnlys(left) + checkOnlys(right)
else 
      return checkOnlys(left) + checkOnlys(right) 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-06T01:13:19.043

正如您已经注意到的，一种解决方案是计算只有一个孩子的父母的数量。这应该有效：

```
public static int countOnlys(TreeNode t)
  {
     if(t == null || numberOfChildren(t)==0){
         return 0;
     }
     if(numberOfChildren(t)==1){
         return 1+ countOnlys(t.getLeft()) + countOnlys(t.getRight());
     }
         if(numberOfChildren(t)==2 ){
         return countOnlys(t.getLeft()) + countOnlys(t.getRight());
    }
         return 0;
  }

public static int numberOfChildren (TreeNode t){
    int count = 0;
    if(t.getLeft() != null ) count++;
    if(t.getRight() != null) count++;       
    return count;   
    } 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-06T00:13:03.100

如果正好有一个孩子是非空的（这意味着它的孩子正好有一个是空的），则父母有一个独生子女：

`((t.getLeft() == null || t.getRight() == null)) && !(t.getLeft() == null && t.getRight() == null)`

但是，当您在递归代码遍历树时访问该节点时，您不会测试该节点。（这类似于访问者模式。）当您坐在父母身上时，您所做的是测试独生子女。这实际上是一个逻辑异或测试，因为只有一个子节点需要为非 null 才能检测到该节点有唯一的子节点。

所以算法是

1.  访问树中的每个节点。
2.  数一下，如果节点只有一个孩子

而已。剩下的就是水管了。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2016-04-30T03:43:33.020

```
public static int onlyChild(TreeNode t){
    int res = 0;
    if( t != null){
        // ^ means XOR 
        if(t.getLeft() == null ^ t.getRight() == null){
            res = 1;
        }

        res += onlyChild(t.getLeft()) + onlyChild(t.getRight()));
    }

    return res;
} 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-02-06T00:14:39.083

每当您遍历二叉树时，请递归思考。这应该有效。

```
public static int countOnlys(TreeNode t)
  {
     if(t == null)
         return 0;
     if (t.getLeft()==null&&t.getRight()==null)
         return 1;

     return countOnlys(t.getLeft())+countOnlys(t.getRight());

  } 
```

* * *

## 回答 #6

> 赞同：-1
> 
> 时间：2013-07-02T13:58:53.750

```
public int countNode(Node root) {

         if(root == null)
             return 0;

         if(root.leftChild == null && root.rightChild == null)
             return 0;
         if(root.leftChild == null || root.rightChild == null)
             return 1 + countNode(root.leftChild) + countNode(root.rightChild);
         else
             return countNode(root.leftChild) + countNode(root.rightChild);

     } 
```

# mysql - CodeIgniter MySQL 一次更新多个表 db->update() db->where()

> ID：14719326
> 
> 赞同：1
> 
> 时间：2013-02-06T00:07:12.097
> 
> 标签：mysql, codeigniter, where-clause, updating

我正在使用 CodeIgniter 并想要进行更新多个表的 MySQL 查询，如下所示：

```
UPDATE TABLE1, TABLE2
SET 
    TABLE1.NAME='Teddy', 
    TABLE2.CLIENT_NOTES = 'Teddy is a good guy' 
WHERE VISITOR.ID = 1 
```

如何使用 CodeIgniter 的**db->update()**和**db->where()**做到这一点？这可能吗？

谢谢你看看这个。问候。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-06T07:35:38.623

首先你需要给你的表起别名，`table1 as t1`所以`table2 as t2`，你的最终查询将变成这样，

```
$this->db->set('t1.row','New value');
$this->db->set('t2.row','New value');
$this->db->where('t1.row','Your Condition');
$this->db->where('t2.row','Your Condition');
$this->db->update('table1 as t1, table2 as t2'); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-06T00:39:15.433

您需要将 $this->db->query() 用于更复杂的事情

转义、安全等方面没有区别。Active Record 只是将不同的字符串格式化为单个查询字符串。

# javascript - 在 ajax 调用视频后使用 Vimeo 的 api

> ID：14719327
> 
> 赞同：0
> 
> 时间：2013-02-06T00:07:14.170
> 
> 标签：javascript, ajax, vimeo

我正在为网站使用[装饰](http://demo.themezilla.com/garnish/)主题，当访问者单击作品集中的项目时，它会加载帖子的内容。该帖子由来自 vimeo 的一个或多个视频组成，通过 iframe 调用如下：

```
<iframe id="player_0" src="http://player.vimeo.com/video/57038297?title=0&amp;byline=0&amp;portrait=0&amp;color=FF9A00&amp;api=1&amp;player_id=player_0" frameborder="0" width="632" height="356" webkitallowfullscreen="" mozallowfullscreen="" allowfullscreen=""></iframe> 
```

我已经使用 vimeo 的 froogaloop 从外部链接停止/卸载视频（[这是一个非常基本的测试](http://kevinchevallier.com/mandrake/test/playground.html)）。这是控件的代码：

```
var vimeoPlayers = document.querySelectorAll('iframe'), 
    player;

for (var i = 0, length = vimeoPlayers.length; i < length; i++) {
    player = vimeoPlayers[i];
    $f(player).addEvent('ready', ready);
}

function addEvent(element, eventName, callback) {
    if (element.addEventListener) { 
        element.addEventListener(eventName, callback, false); 
    }
    else { 
        element.attachEvent(eventName, callback, false); 
    }
}

function ready(player_id) {
    var container = document.getElementById(player_id),
        froogaloop = $f(player_id);
    $("a.stopvid").on('live', function(){ froogaloop.api('unload'); });
} 
```

但是这次我似乎无法在 ajax 调用后加载视频时使用 api。

我试图将上面的代码包含在一个中，`$(document).ajaxComplete(function(event, xhr, settings) { ... });`但没有运气。

这是一个[测试站点](http://kevinchevallier.com/mandrake/)，可以查看它。菜单中的**投资组合**链接，然后单击**第一项**。它会加载内容并在右上角有一个小十字，应该会停止视频，但不会。

帮助将不胜感激，我很迷茫。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-07T00:59:16.900

首先要做的是检查您的页面上是否没有任何 javascript 错误。
您的 iframe 选择器可能是通用的，您可能会捕获其他“插件”（例如 Facebook）使用的其他 iframe。

要工作，froogaloop 就绪函数需要 iframe 上的 id。如果 iframe 上没有 id，您的 ready 事件将不会收到任何内容，并且 player_id 将未定义。

由于您使用的是 JQuery，因此将脚本的第一行更改为：

```
var vimeoPlayers = $("iframe#player_0"), player; 
```

使用此行，您将确保只选择您想要的 iframe。

# c++ - 在 cout.rdbuf(fout.rdbuf()) 之后，哪个语言环境将应用于 cout？

> ID：14719330
> 
> 赞同：2
> 
> 时间：2013-02-06T00:07:40.303
> 
> 标签：c++, unicode, internationalization, locale, iostream

```
#include <locale>
#include <fstream>
#include <iostream>

using namespace std;

int main()
{
    ofstream fout("test.txt");

    fout.imbue(locale("chs"));
    cout.imbue(locale("C"));

    cout.rdbuf(fout.rdbuf());
    cout << "中文"; // Which locale will apply to here? "C" or "chs"?
} 
```

该问题在代码中进行了注释。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-06T00:12:32.543

来自[http://www.cplusplus.com/reference/ios/ios/imbue/](http://www.cplusplus.com/reference/ios/ios/imbue/)

> `std::ios::imbue <ios>`
> 
> `locale imbue ( const locale& loc );`
> 
> **灌输语言环境**
> 
> 将 loc 与流及其关联的流缓冲区（如果有）关联，作为新的区域设置对象，用于区域设置敏感的操作。
> 
> 调用 register_callback 注册的所有回调函数，其中 imbue_event 作为其第一个参数。
> 
> 实际上，这个成员函数调用了它继承的同音异义词ios_base::imbue(loc)，如果流关联了一个流缓冲区，**也会调用rdbuf()->pubimbue(loc)。**

此外，请参阅[http://stdcxx.apache.org/doc/stdlibug/27-4.html](http://stdcxx.apache.org/doc/stdlibug/27-4.html)

> **27.4.4 语言环境和 Iostream 的协作**
> 
> 基类 ios_base 包含一个语言环境对象。**派生流类定义的格式化和解析函数使用该语言环境的数字方面。**
> 
> 类模板 basic_ios 包含一个指向流缓冲区的指针。这个流缓冲区也有一个语言环境对象，通常是流类的函数使用的相同语言环境对象的副本。**流缓冲区的输入和输出函数使用附加语言环境的代码转换方面。**

在您的情况下，它将使用“C”数字语言环境和“chs”字符语言环境。

# knockout.js - 淘汰赛 js 显示可观察数组的子集

> ID：14719339
> 
> 赞同：0
> 
> 时间：2013-02-06T00:08:34.077
> 
> 标签：knockout.js, knockout-sortable

我有一个包含 600 个项目（它们是任务提醒）的视图模型，在名为 workQueue 的 observableArray 中按从旧到新排序，我将其显示为 ul > li。这可能需要一些时间来渲染。

我也在使用淘汰赛排序。

```
<ul class="drop-target" data-bind="sortable: workQueue">
    <li data-bind="text: title"></li>
</ul> 
```

我希望做的只是渲染列表的前 20 项，并在弹出第一项时显示列表中的下一项。如果用户过滤列表，那么最多只会显示 20 个。

有没有一种可排序的方法：当我达到某个计数时退出渲染。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-06T01:31:05.183

不，当您达到一定数量而不调整代码时，没有办法停止渲染，但您可能需要考虑使用计算属性来模拟您指定的页面大小，如下所示：

```
var ViewModel = function () {
    var self = this;
    var work = new Array(600);
    for (var i = 0; i < work.length; i++) {
        work[i] = {
            name: i.toString()
        };
    }
    self.startPos = ko.observable(0);
    self.pageSize = ko.observable(20);
    self.workQueue = new ko.observableArray(work);
    self.workQueue.paged = ko.computed(function () {
        var start = self.startPos();
        var end = self.workQueue().length;
        end = Math.min(end, start + self.pageSize());
        return self.workQueue().slice(start, end);
    });
};

var vm = new ViewModel();
ko.applyBindings(vm);

loop();

function loop() {
    if (vm.startPos() + vm.pageSize() < vm.workQueue().length)  {
        vm.startPos(vm.startPos() + 1);
        window.setTimeout(loop, 10);
    }

} 
```

它只是创建原始数组的辅助切片，您将绑定到它而不是原始数组。

但是，如果您只能看到列表的一部分，排序行为会很奇怪吗？

[http://jsfiddle.net/Dzpkx/1/](http://jsfiddle.net/Dzpkx/1/)

# java - 在 MySQL 和 MongoDB 中插入 5000 行

> ID：14719343
> 
> 赞同：-1
> 
> 时间：2013-02-06T00:09:07.163
> 
> 标签：java, mysql, mongodb

我需要在 MySQL 和 MongoDB 中插入类似于下面的 XML 对象的数据，最多 5000 次。数据类型可以是 HTML、Excel、XML 和 CSV，因为我使用的是自动测试数据生成工具。

```
<record>
<ID>1</ID>
<Email>rhoncus.Nullam.velit@sem.edu</Email>
<DOB>18/09/2012</DOB>
<Name> sapien</Name>
</record>
<record>
<ID>2</ID>
<Email>quam@penatibusetmagnis.edu</Email>
<DOB>26/05/2012</DOB>
<Name>ac</Name>
</record> 
```

是否有一种简单的方法可以从 java 中为每个数据库执行/触发此操作？还是[将 XML 数据插入 MySQL 数据库](https://stackoverflow.com/questions/13894036/inserting-xml-data-into-mysql-database)是唯一的方法？（似乎设置一次性插入随机数据很麻烦）

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-06T00:33:30.580

mysql 和 mongo 都有很多库可以让这很简单每个数据库的数据......并不是真正的捷径。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-06T01:17:30.160

将文件转换为 CSV 并使用[此处给出的答案](https://stackoverflow.com/questions/6605765/importing-a-csv-into-mysql-via-command-line)，Bob 是你的叔叔...如果您需要有关如何将 XML、Excel、HTML 转换为 CSV 的更多代码，请在此答案下发表评论。

# c++ - 从 CHtmlView (visual studio 6) 中检索 HTML 源代码

> ID：14719345
> 
> 赞同：1
> 
> 时间：2013-02-06T00:09:19.737
> 
> 标签：c++, visual-studio-6

我正在开发一个使用 CHtmlView 的应用程序。新要求意味着我希望能够从类中获取 HTML 源以解析特定标签（或者如果可能的话，只需获取标签中的信息）。如果我们使用较新的系统，这会很好，我可以使用 CHtmlView::GetSource 但它不存在。

我在网上进行了相当广泛的搜索，但对大多数 Windows 编程来说还是很陌生，还没有实现任何有用的东西。

因此，如果有人有一个如何在不使用 GetSource 的情况下从 CHtmlView 中提取 HTML 的示例，我将不胜感激。我试过了

```
 BSTR bstr;
    _bstr_t * bstrContainer;
HRESULT hr;
IHTMLDocument2 * pDoc;
IDispatch * pDocDisp = NULL;
pDocDisp = this->GetHtmlDocument();
if (pDocDisp != NULL) {
    hr = pDocDisp->QueryInterface (IID_IHTMLDocument2, (void**)&pDoc);
    if (SUCCEEDED(hr)) {
        if (pDoc->toString(&bstr) != S_OK) {
                         //error...
        } else {
            bstrContainer = new _bstr_t(bstr);
            size = (bstrContainer->length()+1)*2;
            realString = new char[size];
            strncpy(realString, (char*)(*bstrContainer), size);
        }
    } else {
        //error
    }
    pDocDisp->Release();
} 
```

但它主要只是在 realString 中给了我“[object]”。就像我说的，Windows 新手。

任何帮助表示赞赏。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-06T06:42:10.520

将此辅助函数添加到您的 CHtmlView 派生类中以检索 html 源代码。请记住检查此函数返回的布尔状态，因为当系统资源不足时，com-interface 可能非常不可靠。

```
 /* ============================================== */
BOOL CTest1View::GetHtmlText(CString &strHtmlText) 
{
    BOOL bState = FALSE;
    // get IDispatch interface of the active document object
    IDispatch *pDisp = this->GetHtmlDocument();
    if (pDisp != NULL) 
    {   // get the IHTMLDocument3 interface
        IHTMLDocument3 *pDoc = NULL;
        HRESULT hr = pDisp->QueryInterface(IID_IHTMLDocument3, (void**) &pDoc);
        if (SUCCEEDED(hr))
        {   // get root element
            IHTMLElement *pRootElement = NULL;
            hr = pDoc->get_documentElement(&pRootElement);
            if (SUCCEEDED(hr))
            {   // get html text into bstr
                BSTR bstrHtmlText;
                hr = pRootElement->get_outerHTML(&bstrHtmlText);
                if (SUCCEEDED(hr))
                {   // convert bstr to CString
                    strHtmlText = bstrHtmlText;
                    bState = TRUE;
                    SysFreeString(bstrHtmlText);
                }
                pRootElement->Release();
            }
            pDoc->Release();
        }
        pDisp->Release();
    }
    return bState;
} 
```

# r - 错误：C 堆栈使用量太接近限制

> ID：14719349
> 
> 赞同：101
> 
> 时间：2013-02-06T00:09:39.550
> 
> 标签：r

我试图在 R 中运行一些相当深的递归代码，它一直给我这个错误：

> 错误：C 堆栈使用量太接近限制

我的输出`CStack_info()`是：

```
Cstack_info()
    size    current  direction eval_depth 
67108864       8120          1          2 
```

我的机器上有足够的内存，我只是想弄清楚如何增加 R 的 CStack。

编辑：有人要求提供可重复的示例。这是导致问题的一些基本示例代码。运行 f(1,1) 几次你会得到错误。请注意，我已经设置了 --max-ppsize = 500000 和 options(expressions=500000) 所以如果你不设置这些，你可能会得到关于这两件事之一的错误。正如你所看到的，递归在这里可能会很深，我不知道如何让它始终如一地工作。谢谢。

```
f <- function(root=1,lambda=1) {
    x <- c(0,1);
    prob <- c(1/(lambda+1),lambda/(lambda+1));
        repeat {
      if(root == 0) {
        break;
      }
      else {
        child <- sample(x,2,replace=TRUE,prob);
        if(child[1] == 0 && child[2] == 0) {
          break;
        }
        if(child[1] == 1) {
          child[1] <- f(root=child[1],lambda);
        }
        if(child[2] == 1 && child[1] == 0) {
          child[2] <- f(root=child[2],lambda);
        }
      }
      if(child[1] == 0 && child[2] == 0) {
        break;
      }
      if(child[1] == 1 || child[2] == 1) {
        root <- sample(x,1,replace=TRUE,prob);
      }
        }
    return(root)
} 
```

* * *

## 回答 #1

> 赞同：62
> 
> 时间：2013-02-06T00:20:11.127

堆栈大小是一个操作系统参数，可按进程调整（请参阅 参考资料[`setrlimit(2)`](http://pubs.opengroup.org/onlinepubs/007904975/functions/setrlimit.html)）。据我所知，您无法从 R 中对其进行调整，但是您可以在启动 R 之前使用`ulimit`命令从 shell 中对其进行调整。它是这样工作的：

```
$ ulimit -s # print default
8192
$ R --slave -e 'Cstack_info()["size"]'
   size 
8388608 
```

8388608 = 1024 * 8192；R 正在打印与 相同的值`ulimit -s`，但以字节而不是千字节为单位。

```
$ ulimit -s 16384 # enlarge stack limit to 16 megs
$ R --slave -e 'Cstack_info()["size"]'
    size 
16777216 
```

要对此设置进行永久调整，请将`ulimit`命令添加到您的 shell 启动文件中，以便在您每次登录时执行。我无法给出更具体的指示，因为这取决于您拥有的 shell 和内容。我也不知道如何登录图形环境（如果您不在终端窗口中运行 R，这将是相关的）。

* * *

## 回答 #2

> 赞同：28
> 
> 时间：2013-02-06T07:47:53.517

我怀疑，无论堆栈限制如何，您最终都会遇到太深的递归。例如，当 lambda = Inf 时，f(1) 会无限期地导致立即递归。递归的深度似乎是随机游走，有一定的概率 r 更深，1 - r 完成当前递归。当你达到堆栈限制时，你已经使大量的步骤“更深”了。这意味着 r > 1 / 2，并且大部分时间您将继续递归。

此外，即使面对无限递归，似乎也几乎可以推导出解析解或至少是数值解。可以将 p 定义为 f(1) == 1 的概率，为单次迭代后的“子”状态编写隐式表达式，并将它们与 p 等同，然后求解。然后 p 可以用作从二项分布中单次抽取的成功机会。

* * *

## 回答 #3

> 赞同：19
> 
> 时间：2018-12-19T12:37:19.970

此错误不是由于*内存*造成的，而是由于*递归*造成的。一个函数正在调用自己。从只检查一个函数的定义来看，这并不总是显而易见的。为了说明这一点，这里有两个相互调用的函数的最小示例：

```
change_to_factor <- function(x){
  x <- change_to_character(x)
  as.factor(x)
} 

change_to_character <- function(x){
  x <- change_to_factor(x)
  as.character(x)
}

change_to_character("1") 
```

> 错误：C 堆栈使用 7971600 太接近限制

这些函数将继续递归地相互调用，理论上永远不会完成，即使你增加了限制，它仍然会被超过。只有在您的系统中进行检查才能防止这种情况无限期地发生并消耗您机器的所有计算资源。您需要更改函数以确保它们不会无限期地递归调用自身（或彼此）。

* * *

## 回答 #4

> 赞同：12
> 
> 时间：2015-04-22T08:21:29.523

这发生在我身上的原因完全不同。我在组合两列时不小心创建了一个超长字符串：

```
output_table_subset = mutate(big_data_frame,
     combined_table = paste0(first_part, second_part, col = "_")) 
```

代替

```
output_table_subset = mutate(big_data_frame,
     combined_table = paste0(first_part, second_part, sep = "_")) 
```

让我永远想通了，因为我从没想过粘贴会导致问题。

* * *

## 回答 #5

> 赞同：5
> 
> 时间：2015-12-31T16:06:15.660

我遇到了同样的问题，即收到“C 堆栈使用量太接近限制”错误（尽管对于另一个应用程序，而不是上面 user2045093 所述的应用程序）。我尝试了 zwol 的建议，但没有成功。

令我惊讶的是，我可以通过安装最新版本的 R for OS X（当前：版本 3.2.3）以及最新版本的 R Studio for OS X（当前：0.99.840）来解决这个问题，因为我我正在与 R Studio 合作。

希望这对您也有一些帮助。

* * *

## 回答 #6

> 赞同：2
> 
> 时间：2018-02-26T17:49:18.180

这里的一个问题可能是你在`f`内部调用

```
plop <- function(a = 2){
  pouet <- sample(a)
  plop(pouet)
}
plop()
Erreur : évaluations trop profondément imbriquées : récursion infinie / options(expressions=) ?
Erreur pendant l'emballage (wrapup) : évaluations trop profondément imbriquées : récursion infinie / options(expressions=) ? 
```

* * *

## 回答 #7

> 赞同：2
> 
> 时间：2019-12-12T20:23:53.087

我的可能是一个更独特的案例，但可能会帮助少数遇到这个确切问题的人：

我的情况与空间使用完全无关，仍然 R 给出了：
`C stack usage is too close to the limit`

我有一个定义的函数，它是基本函数的升级：

> 保存RDS()

但是，
意外的是，这个定义的函数被调用`saveRDS()`而不是`safe_saveRDS()`.
因此，通过该定义，当代码到达实际使用的行`saveRDS(...)`（它调用原始基本版本，而不是升级版本）时，它给出了上述错误并崩溃了。

因此，如果您在调用某些保存函数时遇到该错误，请查看您是否不小心碰到了它。

* * *

## 回答 #8

> 赞同：1
> 
> 时间：2020-09-01T19:05:20.523

`source("path/to/file/thefile.R")`我经常在 R 脚本的顶部包含一个注释掉的行，例如`thefile.R`，因此我可以轻松地将其复制粘贴到终端中以运行它。如果我忘记注释掉该行，我会收到此错误，因为运行文件运行文件，运行文件，运行文件，...

如果这是原因，解决方案很简单：注释掉该行。

* * *

## 回答 #9

> 赞同：1
> 
> 时间：2020-11-26T10:10:56.753

在 Linux 上，我通过这样做永久增加了堆栈和 memlock 内存的大小：

```
sudo vi /etc/security/limits.conf 
```

然后，在文件末尾添加以下行。

```
* soft memlock unlimited
* hard memlock unlimited

* soft stack unlimited
* hard stack unlimited 
```

* * *

## 回答 #10

> 赞同：1
> 
> 时间：2019-07-17T01:50:53.670

对于大家的信息，我突然在 Windows 7（64 位）上使用 R 3.6.1 遇到了这个问题。以前这不是问题，现在当我尝试“save(.)”数据甚至执行“save.image(.)”时，堆栈限制似乎无处不在。就好像序列化正在把这些堆栈吹走。

我正在认真考虑退回到 3.6.0。那里没有发生。

* * *

## 回答 #11

> 赞同：0
> 
> 时间：2015-05-12T17:56:43.827

正如 Martin Morgan 所写的那样……问题是您对递归的了解太深了。如果递归根本不收敛，你需要自己打破它。我希望这段代码能正常工作，因为它没有经过测试。但是，至少这里应该清楚一点。

```
f <- function(root=1,lambda=1,depth=1) {
 if(depth > 256){
  return(NA)
 }
 x <- c(0,1);
 prob <- c(1/(lambda+1),lambda/(lambda+1));
 repeat {
  if(root == 0) {
    break;
  } else {
   child <- sample(x,2,replace=TRUE,prob);
   if(child[1] == 0 && child[2] == 0) {
     break;
   }
   if(child[1] == 1) {
     child[1] <- f(root=child[1],lambda,depth+1);
   }
   if(child[2] == 1 && child[1] == 0) {
     child[2] <- f(root=child[2],lambda,depth+1);
   }
  }
  if(child[1] == NA | child[2] == NA){
   return NA;
  }
  if(child[1] == 0 && child[2] == 0) {
    break;
  }
  if(child[1] == 1 || child[2] == 1) {
    root <- sample(x,1,replace=TRUE,prob);
  }
 }
 return(root)
} 
```

* * *

## 回答 #12

> 赞同：0
> 
> 时间：2021-09-30T15:04:46.357

这是我遇到此错误消息的方式。当我尝试在控制台中打印 data.table 时遇到此错误消息。原来这是因为我错误地在列中创建了一个超长字符串（当我不应该在 paste() 中使用折叠时）。

* * *

## 回答 #13

> 赞同：0
> 
> 时间：2019-05-23T20:49:09.657

导致相同问题的另一种方法：

```
library(debug)
mtrace(lapply) 
```

递归调用在这里并不那么明显。

* * *

## 回答 #14

> 赞同：0
> 
> 时间：2019-07-12T18:18:41.513

如果您使用 plot_ly 检查您传递的列。似乎对于 POSIXdt/ct 列，您必须在传递给 plotly 之前使用 as.character() ，否则会出现此异常！

* * *

## 回答 #15

> 赞同：0
> 
> 时间：2020-11-18T11:24:41.020

不确定我们是否在这里列出问题，但它发生在我身上`leaflet()`。我试图映射一个数据框，其中有一`date`列属于 class `POSIXlt`。换回`POSIXct`解决问题。

# ios - 使用某种方法管理 UIView 数组

> ID：14719351
> 
> 赞同：0
> 
> 时间：2013-02-06T00:09:47.320
> 
> 标签：ios, xcode, arrays, uiview, uiimageview

你好我是 Xcode 的菜鸟，我想问

我有一组带有一张图片的 UIView

```
NSInteger i;
for (i=0; i<CARD_AMOUNT; i++) {
    [cardArray addObject:[UIImage imageNamed:@"Back.png"]];
} 
```

我想绘制它，然后在每个（移动......等）上做不同的事情，
或者我必须创建 10 个 UIImageView 变量？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-06T01:24:48.977

可以对您尝试构建的应用程序进行更多解释，但本质上，如果您想在一个视图上显示许多不同的卡片（比如说，纸牌游戏） - 您将需要创建许多 UIImageViews。*好吧，从纯粹的设计角度来看，您可能想要一个不同的类`CardView`，它知道如何呈现自己*

所以，如果你想要一张图片有很多不同的视图，像这样：

```
for(int a=0; a<CARD_AMOUNT; a++) {
    UIImageView *view = [[UIImageView alloc] initWithImage:[UIImage imageNamed:@"Back.png"]];
    [cardArray addObject:view];
    // and maybe you'd want to set the frame locations, or add them to your current view as subviews, or .. 
} 
```

为了解决评论，您的自定义 CardView 可能有这样的东西（有优化的方法，但一般概念还不错）：

```
- (void)setRank: (int)rank andSuit:(int)suit {
    self.image = [UIImage imageNamed:[NSString stringWithFormat:@"card-%d-%d.png",rank,suit];
    self.rank = rank; self.suit = suit;
} 
```

或者，更好的是（因为卡的等级不会改变）-某种`initWithRank: andSuit:`方法..不知道。

可能还有 10 种其他方法来设计它。

# java - 一次插入具有相同列和数据类型的多个表的有效方法

> ID：14719354
> 
> 赞同：0
> 
> 时间：2013-02-06T00:09:58.863
> 
> 标签：java, sql, database, prepared-statement

我现在需要一次插入三个表。但将来我将插入三个以上的表。

这三个表都有相同的列和相同的数据类型。所以我也可以将相同的数据插入三个表中。目前我正在插入一张桌子。

我正在使用名为 XpressMP 的新数据库。它支持所有主要的 SQL 语法。

```
public final static String INSERT_SQL = "INSERT INTO COPY"
        + "("
        + "ID, ACCOUNT) VALUES"
        + "(?, ?)";

preparedStatement = dbConnection.prepareStatement(INSERT_SQL);

preparedStatement.setString(1, id);
preparedStatement.setString(2, ACCOUNT); 
```

一次插入三个表的最佳方法是什么？可以在 SQL 中执行吗？或者我需要更改 Java 代码以插入多个表？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-06T07:12:52.303

您不能参数化[表名部分](https://stackoverflow.com/questions/10841952/ora-00903-invalid-table-name-on-preparedstatement)。您可以使用表名和？创建字符串，然后将该字符串用于preparedStatement。

```
String tablename="COPY";
public final static String INSERT_SQL = "INSERT INTO " + tablename 
        + "("
        + "ID, ACCOUNT) VALUES"
        + "(?, ?)";

preparedStatement = dbConnection.prepareStatement(INSERT_SQL);

preparedStatement.setString(1, id);
preparedStatement.setString(2, ACCOUNT); 
```

# python - 为什么 Django 的 urlencode 不编码斜线？

> ID：14719355
> 
> 赞同：13
> 
> 时间：2013-02-06T00:10:14.900
> 
> 标签：python, django, url, urlencode

我看到Django的`urlencode`过滤器默认不编码斜线：

[https://docs.djangoproject.com/en/dev/ref/templates/builtins/?from=olddocs#urlencode](https://docs.djangoproject.com/en/dev/ref/templates/builtins/?from=olddocs#urlencode)

我知道我可以让它对斜线进行编码，但是为什么默认不这样做呢？考虑到它是 URL 中的保留字符，对斜线进行编码不是可接受的行为吗？

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2013-02-06T04:52:56.960

从 Django 源代码来看，`urlencode`它基本上是 Django`urlquote`实用方法的包装器。从源代码中的评论来看，`urlquote`是 UTF-8 安全版本的`urllib.quote`.

`urlencode`使用与 python 相同的默认值也是如此，并且可以在[文档](http://docs.python.org/2/library/urllib.html#utility-functions)`urllib.quote`中找到不转义斜杠的原因：`urllib.quote`

> 使用 %xx 转义符替换字符串中的特殊字符。从不引用字母、数字和字符“_.-”。默认情况下，此函数用于引用 URL 的路径部分。可选的安全参数指定不应该被引用的附加字符——它的默认值是'/'。

因此，原因是它正在转义路径，并且`'/'`是路径中完全预期且有效的字符。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2021-07-03T12:15:03.247

要在 Django 模板中`urlencode`转义`/`，请使用`{{ variable|urlencode:'' }}`.

解释：额外的可选参数告诉字符`urlencode`集是“安全的”，默认是`'/'`，所以传递一个空字符串是不安全的，应该被编码。`urlencode``/`

# python - NameError：未定义全局名称“消息”

> ID：14719359
> 
> 赞同：2
> 
> 时间：2013-02-06T00:10:37.083
> 
> 标签：python, mysql, python-2.7, gps, gprs

我是 python 的新手，目前我正在开发一个 GPS 跟踪器，它使用 Arduino Uno 与谷歌地图交互。我收到此错误，它不允许我为我的 tcpServer 运行 .py 脚本，这是整个脚本。

#!/usr/bin/env python

```
import socket
import MySQLdb

TCP_IP = 'my machine IP'
TCP_PORT = 32000
BUFFER_SIZE = 40

# ClearDB. Deletes the entire tracking table

def ClearDB(curs,d ):
    curs.execute ("""
        INSERT INTO gmaptracker (lat, lon)
        VALUES (0.0,0.0)""")
    d.commit()

# Connect to the mySQL Database

def tServer():
    try:

        db = MySQLdb.connect (host = "my host",
            user = "my user",
            passwd = "my password",
            db = "gmap" )
    except MySQLdb.Error, e:
        print "Error %d: %s" %(e.args[0], e.args[1])
        sys.exit(1);

    cursor = db.cursor()

    # Start with a fresh tracking table

    ClearDB(cursor,db)

    # Set up listening Socket

    try:
        s = socket.socket(socket.AF_INET, socket.SOCK_STREAM)
        s.setsockopt(socket.SOL_SOCKET, socket.SO_REUSEADDR, 1)
        s.bind((TCP_IP, TCP_PORT))
        print "Listening...."
        s.listen(1)
        conn, addr = s.accept()
        print 'Accepted connection from address:', addr

    except socket.error (message):
        if s:
            s.close()
            print "Could not open socket: " + message
            cursor.close()
            conn.close()
            db.close()
            sys.exit(1)

    try:
        while 1:
            data = conn.recv(BUFFER_SIZE)
            if not data:break

            str1,str2 = data.split("Long: ")
            str1 = str1.split("Lat: ")[1]
            latitude = float(str1)
            longitude = float(str2)
            cursor.execute ("""
                INSERT INTO gmaptracker (lat, lon)
                VALUES (%s,%s)""", (latitude,longitude))

            db.commit()

    except KeyboardInterrupt:
        ClearDB(cursor,db);
        cursor.close()
        conn.close()
        db.close()

if __name__ == '__main__':
   tServer() 
```

这是我得到的错误

```
Traceback (most recent call last):
 File "tcpServer.py", line 79, in <module>
   tServer()
 File "tcpServer.py", line 48, in tServer
   except socket.error(message):
NameError: global name 'message' is not defined 
```

如果有人能帮我解决这个问题，我将不胜感激，因为我说我是 python 的新手，如果有帮助的话，我也在运行 python 2.7。提前致谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-06T00:12:27.517

您没有使用正确的语法来捕获异常。相反，使用：

```
except socket.error as serror:
    message = serror.message 
```

该`socket.error`异常有两个额外的属性，`errno`和`message`. 用于捕获它的旧代码是这样的：

```
except socket.error, (value, message): 
```

因为在 Python 2 中，您可以将异常视为元组并将其解包，但在 Python 3 中已不存在，实际上不应该使用。

此外，旧的`except exceptiontype, targetvariable:`已被`except exceptiontype as targetvariable:`语法取代，因为当您尝试在同一语句中捕获多个异常类型时，这种语法不那么模棱两可了。

当抛出异常时，会中断正常的代码流；相反，流程“跳转”到异常处理程序。由于这种跳转，您的代码中还有另一个问题。在您所指的异常处理程序中`conn.close()`，但变量是在抛出套接字异常的点*之后*`conn`定义的（各种套接字操作）。这将导致一个. 在这种情况下，您的代码中*没有路径*会导致分配一个打开的套接字连接，您可以完全删除该行。*`NameError`*`conn``conn.close()`**

 **如果需要调用on ，您首先需要检测它是否已设置*。*事先将其设置为，然后仅在不再为时调用：`.close()``conn``None``.close()``conn``None`

```
conn = None
try:
    # ... do stuff ...
    conn, addr = s.accept()
    # ... do more stuff
except socket.error as serror:
    # test if `conn` was set
    if conn is not None:
        conn.close() 
```**

# jquery - jQuery 显示目标 div 不是从 0% 宽度和高度开始（更新）

> ID：14719360
> 
> 赞同：1
> 
> 时间：2013-02-06T00:10:41.327
> 
> 标签：jquery, show

抱歉，如果这已经发布了一百万次，我的搜索技能可能会让我失望。我有一个问题可能是显而易见的和容易的。

我的网站上有幻灯片功能，可以在这里找到：http: [//jasenpeterson.com/12-Years/v4/](http://jasenpeterson.com/12-Years/v4/)

幻灯片功能运行良好，但是否有办法让 div 不必从 0% 到 100% 的高度和宽度“增长”？

我可能在解释我的问题方面做得很差，但如果你查看网站并选择“概要”，你应该明白我在说什么。

提前致谢。

我会继续寻找解决方案，如果我找到了，我会回复。再次感谢！

如果有帮助，这是我的代码：

`var $btns = $('.nav a'), $slides = $('.slides > .content');`

 ````
$btns.click(function(){
  $(this).addClass('active');
  $(this).parent().siblings().find('a').removeClass('active');
  $slides.eq($btns.index(this)).show('slow').siblings().hide('slow');
  return false;
});

$btns.first().click(); 
````  `- - - - - - - -更新

大家好，我希望我不会因为更新我的主题而违反任何规则。经过一番研究，听起来我应该使用动画功能。

我一直在修改不透明度的动画，它适用于第一页（淡入和淡出），但不适用于其他页面。我可以看到控制台中的不透明度设置为 100 ..但它没有被显示。有任何想法吗？

[http://jasenpeterson.com/12-Years/v4/](http://jasenpeterson.com/12-Years/v4/)

`var $btns = $('.nav a'), $slides = $('.slides > .content');`

 ````
$btns.click(function(){
  //add 'active' class to active link
  $(this).addClass('active');
  //remove 'active' class from previous link
  $(this).parent().siblings().find('a').removeClass('active');
  $slides.eq($btns.index(this)).animate( {"opacity": "1"}, "slow").siblings().animate( {"opacity": "0"}, "slow");
  return false;
});

//First link clicked on page load
$btns.first().click(); 
````  `* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-06T02:30:38.247

没关系，我明白了。

`var $btns = $('.nav a'), $slides = $('.slides > .content');`

```
$btns.click(function(){
  //add 'active' class to active link
  $(this).addClass('active');
  //remove 'active' class from previous link
  $(this).parent().siblings().find('a').removeClass('active');
  $slides.eq($btns.index(this)).animate( {"opacity": "1"}, "slow").siblings().animate( {"opacity": "0"}, "slow");
  siblings().hide('fast');
  return false;
});

//First link clicked on page load
$btns.first().click(); 
`````

# php - PHP 和 SQL 将复选框保存为数组

> ID：14719361
> 
> 赞同：1
> 
> 时间：2013-02-06T00:10:44.917
> 
> 标签：php, mysql, arrays

我编写了以下内容以从单选按钮（var1）和一些复选框（var2）中读取数据

```
 require('config.php');

  $con = mysql_connect("localhost", $db_username, $db_password);
    if (!$con)
    {
      die('Could not connect: ' . mysql_error());
    }
    mysql_select_db($db_name, $con);

  $var1 = $_GET['var1'];
  $var1 = mysql_real_escape_string( $var1 );
  $var2 = $_GET['var2'];
  $var2 = mysql_real_escape_string( $var2 );  

  $running_total = 0;
  $last_update = "SELECT * FROM $db_tablename ORDER BY id DESC LIMIT 1";
  $result = mysql_query($last_update);

 $insert_query = "INSERT INTO $db_tablename (var1, var2) ";
  $insert_query .= sprintf( "VALUES('%s', '%s')", $var1, $var2);

  $insert_result = mysql_query($insert_query);
  if(!$insert_result) {
    die('insert query failed' . mysql_error());
  }

  mysql_close($con) 
```

输入的html看起来像......

```
<input type="radio" name="var1" value="value1">Test 1</input>
<input type="radio" name="var1" value="value2">Test 2</input>
<input type="radio" name="var1" value="value3">Test 3</input>
<input type="radio" name="var1" value="value4">Test 4</input>

<input type="checkbox" name="var2" value="checkbox1">CB 1</input>
<input type="checkbox" name="var2" value="checkbox2">CB 1</input>
<input type="checkbox" name="var2" value="checkbox3">CB 1</input>
<input type="checkbox" name="var2" value="checkbox4">CB 1</input> 
```

一切都按预期工作，但由于 var2 允许选择多个复选框，我想保存多个值。我意识到我需要将其作为一个数组来执行，但我无法解决。

任何人都可以提供帮助或有他们可以指出我的解决方案或示例吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-06T00:17:49.410

这将是`var2[]`并且`name`查看结果为

```
foreach($_POST['var2'] as $checkedItem)
{
    echo $checkedItem;
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-06T00:27:10.727

html：`

```
<input type="radio" name="var1" value="value1">Test 1</input>
<input type="radio" name="var1" value="value2">Test 2</input>

<input type="checkbox" name="var2[]" value="check" /> CB 1
<input type="checkbox" name="var2[]" value="check" /> CB 2 
```

`

和 SQL：

`Array $_POST['var2'] contains the checkboxes.`

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-06T00:16:44.727

把var1的名字改成“var1[]”，把var2的名字改成“var2[]”……

```
 $var1 = $_GET['var1'];
 $var2 = $_GET['var2'];
 echo count($var1);
 echo count($var2); 
```

玻璃钢

# css - 如何在不像类堆叠的情况下继承元素？

> ID：14719362
> 
> 赞同：5
> 
> 时间：2013-02-06T00:10:50.183
> 
> 标签：css, twitter-bootstrap, less

我们希望`h1`使用类似的 mixin 从 bootstrap 中继承

```
.btn2{ .btn; } 
```

而是想使用该`h1`元素：

```
.h1_replace{ h1; } 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-06T00:45:00.703

我不相信 less 支持这种类型的类继承。相反，您可能必须将 h1 样式重新定义为一个类并继承它。

```
.h1 {
    /* copy h1 style here */
}

.h1_replace{ 
    .h1;
} 
```

虽然如果你这样做，你可能只需要在整个代码中使用 .h1 类。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2016-08-23T22:56:49.887

您可以使用扩展：

```
.h1_replace:extend(h1) {} 
```

[http://lesscss.org/features/#extend-feature](http://lesscss.org/features/#extend-feature)

# python - 长时间运行的 python 脚本的故障安全

> ID：14719363
> 
> 赞同：3
> 
> 时间：2013-02-06T00:10:56.050
> 
> 标签：python

这可能是有史以来最愚蠢的问题，但我想知道是否有办法在函数（最好是装饰器）周围编写包装器，以便在发生异常时捕获局部变量的内部状态是在该函数中提出。它会在创建本地人时捕获它们，腌制它们，然后在没有引发异常的情况下处理它们，或者如果发现任何异常，则将它们写入文件。

是不是太天马行空了，还是有人玩弄过这种东西？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-02-06T00:48:24.317

您可以在回溯中捕获[`f_locals`帧上的变量](http://docs.python.org/2/library/inspect.html)：

```
import sys
import functools

def capturelocals(func):
    @functools.wraps(func)
    def wrapperfunc(*args, **kw):
        try:
            return func(*args, **kw)
        except Exception:
            _, _, tb = sys.exc_info()
            try:
                while tb.tb_next is not None:
                    tb = tb.tb_next  # find innermost frame
                locals = tb.tb_frame.f_locals
                print locals
            finally:
                del tb  # prevent leaking tracebacks
            raise
    return wrapperfunc 
```

为了证明它有效：

```
>>> @capturelocals
... def foobar():
...     foo = 'bar'
...     spam = 'eggs'
...     raise ValueError('Bam!')
... 
>>> foobar()
{'foo': 'bar', 'spam': 'eggs'}
Traceback (most recent call last):
  File "<stdin>", line 1, in <module>
  File "<stdin>", line 5, in wrapperfunc
  File "<stdin>", line 5, in foobar
ValueError: Bam! 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-06T01:03:44.140

另一种选择是将那些您有兴趣保存的变量作为参数传递给函数，以防发生灾难性事件。

一个可以帮助你做到这一点的装饰器：

```
import os
try:
    import cPickle as pickle
except ImportError:
    import pickle

def save_args_if_exception(pickle_folder):
    def real_decorator(function):
        def wrapper(*args, **kwargs):
            try:
                function(*args, **kwargs)
            except:
                print 'FAILING SAFE: Saving arguments to folder:'
                print pickle_folder
                for arg_position, arg in enumerate(args, start=1):
                    arg_fname = os.path.join(pickle_folder, str(arg_position) +
                                             '.pickle')
                    print 'Saving positional argument-{}'.format(arg_position)
                    with open(arg_fname, mode='wb') as f:
                        pickle.dump(arg, f)
                print 'Saving keyword arguments (kwargs)'
                with open(os.path.join(pickle_folder, 'kwargs.pickle'),
                          mode='wb') as f:
                    pickle.dump(kwargs, f)
                raise  # re-raise original exception
        return wrapper
    return real_decorator

@save_args_if_exception(os.getcwd())
def important_function(first_arg, second_arg=2, **kwargs):
    print 'About to raise an exception!'
    raise Exception

important_function(3) 
```

请注意，在此示例中，`second_arg`没有保存到文件中，可能是因为 Python 处理默认参数的方式。根据您的情况，这可能是也可能不是有用的行为。

参考：

*   [带参数的python装饰器](https://stackoverflow.com/questions/5929107/python-decorators-with-parameters)
*   [http://www.saltycrane.com/blog/2008/01/how-to-use-args-and-kwargs-in-python/](http://www.saltycrane.com/blog/2008/01/how-to-use-args-and-kwargs-in-python/)

# youtube-api - 为什么在嵌入的 YT 视频未出现时用户可以点击的按钮？

> ID：14719379
> 
> 赞同：2
> 
> 时间：2013-02-06T00:12:20.930
> 
> 标签：youtube-api, social-media-like

最后仅显示订阅按钮（以及显示直接在 YT 上查看的喜欢/不喜欢的数量）。是否有嵌入代码可以取回这些代码，以便用户可以在我的网站上投票？

示例嵌入代码：

```
<object style="height: 360px; width: 640px">
<param name="movie" value="http://www.youtube.com/v/XXXXXXXXXXXXX?version=3&controls=1&autohide=1&modestbranding=1&rel=0&autoplay=1&showinfo=0&showsearch=0&iv_load_policy=3&border=2&color1=0xB24D7E&color2=0xfff0f5&fs=1&hd=0&feature=player_embedded" /><param name="allowscriptaccess" value="always" /><param name="wmode" value="transparent" /><param name="allownetworking" value="internal" /><embed src="http://www.youtube.com/v/XXXXXXXXXXXX?version=3&controls=1&autohide=1&modestbranding=1&rel=0&autoplay=1&showinfo=0&showsearch=0&iv_load_policy=3&border=2&color1=0xB24D7E&color2=0xfff0f5&fs=1&hd=0&feature=player_embedded" type="application/x-shockwave-flash" allowfullscreen="true" allowscriptaccess="always" wmode="transparent" allownetworking="internal" width="640" height="360"></embed></object> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-06T02:48:43.597

*   **内嵌AS3播放器** 。如果你打开[http://youtube.googleapis.com/v/_Acr-FWRWXE?autoplay=1](http://youtube.googleapis.com/v/_Acr-FWRWXE?autoplay=1)，相当于AS2播放器， http://youtube.googleapis.com/v/_Acr-FWRWXE? [autoplay =1&版本=2](http://youtube.googleapis.com/v/_Acr-FWRWXE?autoplay=1&version=2)

    但是，如果只打开[http://youtube.googleapis.com/v/_Acr-FWRWXE](http://youtube.googleapis.com/v/_Acr-FWRWXE)不带参数（如自动播放），则[http://youtube.googleapis.com/v/_Acr-FWRWXE](http://youtube.googleapis.com/v/_Acr-FWRWXE)没有版本 2，那就是现在是第 3 版。

    您需要版本 3(AS3) 来显示喜欢/不喜欢的图标，这意味着 [http://youtube.googleapis.com/v/_Acr-FWRWXE?version=1234567](http://youtube.googleapis.com/v/_Acr-FWRWXE?version=1234567)或 [http://youtube.googleapis.com/v/_Acr- FWRWXE?版本=3](http://youtube.googleapis.com/v/_Acr-FWRWXE?version=3)

    你打开[http://youtube.googleapis.com/v/_Acr-FWRWXE](http://youtube.googleapis.com/v/_Acr-FWRWXE)，玩到最后，你复制嵌入代码，不幸的是嵌入代码是错误的，它给你

> name="allowScriptAccess" value="always"> src="http://www.youtube.com/v/_Acr-FWRWXE&hl=en_US&feature=player_embedded&version=3" type="application/x-shockwave-flash" allowfullscreen="真"
> allowScriptAccess="always" width="640" height="360">

如您所见，没有**问号？**在 **[http://www.youtube.com/v/_Acr-FWRWXE&hl=en_US&feature=player_embedded&version=3](http://www.youtube.com/v/_Acr-FWRWXE&hl=en_US&feature=player_embedded&version=3)** ，这意味着它仍然是第 2 版，你应该更改为 [http://www.youtube.com/v/_Acr-FWRWXE 吗？ hl=en_US&feature=player_embedded&version=3](http://www.youtube.com/v/_Acr-FWRWXE?hl=en_US&feature=player_embedded&version=3) 代替。

*   **IFrame 嵌入**。使用 www.youtube.com/embed/a6_AHH-A0ks

希望这有帮助:)

# svn - 用 composer 和 config 文件实现 SVN “branch”、“tag”和“trunk”

> ID：14719385
> 
> 赞同：6
> 
> 时间：2013-02-06T00:12:48.013
> 
> 标签：svn, branch, composer-php, webmin

我在这里阅读了很多关于 SVN 存储库中目录“branch”、“tag”和“trunk”含义的 Q/A，现在我想我理解了，我正在尝试实现它。

我使用 Virtualmin 来管理我的服务器，它通过它的 Web GUI 为我创建了存储库。但是，一旦创建我的仓库是空的，所以我想我需要自己创建目录结构并提交它。完成后，我将项目的文件放在主干中，并且由于我处于稳定的版本状态，我应该将其分支到 branch/xxx （这将是我的开发中的一个保存点）和 tags/xxx （这将是我的开发版本）。

如果直到这里我都正确，那么我将使用 Tortoise 切换到我的新标签，这就是我下一次提交中将更改的唯一标签。顺便说一句，使用 Tortoise，我需要右键单击当前标签目录，还是仍然可以直接从项目的根文件夹提交/恢复？

我当前的项目有一个配置文件定义了几个绝对路径 - 也许它是错误的，但我还没有找到任何方法来避免它。由于我希望能够看到我的项目从这些分支/主干中的任何一个运行，这是否意味着我需要为每个版本使用不同的配置文件？如果是这样，我应该将此文件添加到忽略列表中吗？我的意思是什么会被认为是好的做法？

额外的问题：如果我想在这种情况下使用 Composer，我的 composer.json 和 vendor 目录应该在哪里？

谢谢！

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-02-09T13:43:31.557

你混淆了标签和分支。标签不应该被修改。它们通常是在您每次发布应用程序时创建的（从主干​​或分支）。

分支用于保存进行中的工作。

您应该将主干目录签出到工作副本。要切换到分支，请使用 switch 命令。没有理由为每个分支都有单独的配置文件，因为您的工作副本在同一位置可以指向您想要的任何内容：主干、分支，甚至是标签。关键是工作副本的根应该是你项目的根：

因此，假设您的项目文件包含以下文件：

```
index.php
config.txt
some_folder
    foobar.php 
```

您的仓库将具有以下布局：

```
trunk
    index.php
    config.txt
    some_folder
        foobar.php
branches
    maintenance_1.0
        index.php
        config.txt
        some_folder
            foobar.php
    feature_refactor_index_page
        index.php
        config.txt
        some_folder
            foobar.php
tags
    v1.0
        index.php
        config.txt
        some_folder
            foobar.php 
```

您的工作副本将是：

```
MyProject --> references trunk
    index.php
    config.txt
    some_folder
        foobar.php 
```

如果您想在功能分支上工作，请切换到该分支，然后您的工作副本将是

```
MyProject --> references feature_refactor_index_page
    index.php
    config.txt
    some_folder
        foobar.php 
```

所以它完全一样，配置文件没有理由包含不同的文件路径。

# xslt - XSLT 获取第一个元素节点

> ID：14719390
> 
> 赞同：0
> 
> 时间：2013-02-06T00:13:44.557
> 
> 标签：xslt, xpath, nodes

```
<SMRCRLT_XML>
 <AREA>
  <DETAILS>
   <DETAIL_REQUIREMENT>
    <RULE_REQUIREMENT>
     <DETAIL_REQUIREMENT>
      <COURSE_ROWSET>
       <COURSE_SET>
        <COURSE_AREA>TESTSELECT</COURSE_AREA>
        <COURSE_KEY_RULE>1200</COURSE_KEY_RULE>
        <COURSE_SET>A</COURSE_SET>
        <COURSE_SUBSET>1</COURSE_SUBSET>
        <COURSE_SUBJ_CODE>CHEM</COURSE_SUBJ_CODE>
        <COURSE_CRSE_NUMB_LOW>345A</COURSE_CRSE_NUMB_LOW>
       </COURSE_SET>
      </COURSE_ROWSET>
     </DETAIL_REQUIREMENT>
     <DETAIL_REQUIREMENT>
      <COURSE_ROWSET>
       <COURSE_SET>
        <COURSE_KEY_RULE>1200</COURSE_KEY_RULE>
        <COURSE_SET>A</COURSE_SET>
        <COURSE_SUBSET>2</COURSE_SUBSET>
        <COURSE_SUBJ_CODE>CHEM</COURSE_SUBJ_CODE>
        <COURSE_CRSE_NUMB_LOW>476A</COURSE_CRSE_NUMB_LOW>
       </COURSE_SET>
      </COURSE_ROWSET>
     </DETAIL_REQUIREMENT>
     <DETAIL_REQUIREMENT>
      <COURSE_ROWSET>
       <COURSE_SET>
        <COURSE_AREA>TESTSELECT</COURSE_AREA>
        <COURSE_KEY_RULE>1200</COURSE_KEY_RULE>
        <COURSE_SET>A</COURSE_SET>
        <COURSE_SUBSET>3</COURSE_SUBSET>
        <COURSE_SUBJ_CODE>PHIL</COURSE_SUBJ_CODE>
        <COURSE_CRSE_NUMB_LOW>432</COURSE_CRSE_NUMB_LOW>
       </COURSE_SET>
      </COURSE_ROWSET>
     </DETAIL_REQUIREMENT>
     <DETAIL_REQUIREMENT>
      <COURSE_ROWSET>
       <COURSE_SET>
        <COURSE_AREA>TESTSELECT</COURSE_AREA>
        <COURSE_KEY_RULE>1200</COURSE_KEY_RULE>
        <COURSE_SET>B</COURSE_SET>
        <COURSE_SUBSET>4</COURSE_SUBSET>
        <COURSE_SUBJ_CODE>PHIL</COURSE_SUBJ_CODE>
        <COURSE_SUBJ_DESC>Philosophy</COURSE_SUBJ_DESC>
        <COURSE_CRSE_NUMB_LOW>433</COURSE_CRSE_NUMB_LOW>
       </COURSE_SET>
      </COURSE_ROWSET>
     </DETAIL_REQUIREMENT>
     <DETAIL_REQUIREMENT>
      <COURSE_ROWSET>
       <COURSE_SET>
        <COURSE_AREA>TESTSELECT</COURSE_AREA>
        <COURSE_KEY_RULE>1200</COURSE_KEY_RULE>
        <COURSE_SET>B</COURSE_SET>
        <COURSE_SUBSET>5</COURSE_SUBSET>
        <COURSE_SUBJ_CODE>ZOOL</COURSE_SUBJ_CODE>
        <COURSE_CRSE_NUMB_LOW>321</COURSE_CRSE_NUMB_LOW>
       </COURSE_SET>
      </COURSE_ROWSET>
     </DETAIL_REQUIREMENT>
     <DETAIL_REQUIREMENT>
      <COURSE_ROWSET>
       <COURSE_SET>
        <COURSE_AREA>TESTSELECT</COURSE_AREA>
        <COURSE_KEY_RULE>1200</COURSE_KEY_RULE>
        <COURSE_SET>B</COURSE_SET>
        <COURSE_SUBSET>6</COURSE_SUBSET>
        <COURSE_SUBJ_CODE>BIOC</COURSE_SUBJ_CODE>
        <COURSE_CRSE_NUMB_LOW>456</COURSE_CRSE_NUMB_LOW>
       </COURSE_SET>
      </COURSE_ROWSET>
     </DETAIL_REQUIREMENT>
    </RULE_REQUIREMENT>
   </DETAIL_REQUIREMENT>
  </DETAILS>
 </AREA>
</SMRCRLT_XML> 
```

我试图从每个 COURSE_SET 的 XML 中获取第一个元素，但它返回所有值。有人可以帮忙吗。这是我应用的模板：

```
<xsl:apply-templates select="//SMRCRLT_XML/AREA/DETAILS/DETAIL_REQUIREMENT/RULE_REQUIREMENT/DETAIL_REQUIREMENT/COURSE_ROWSET/COURSE_SET[COURSE_AREA='TESTSELECT' and COURSE_KEY_RULE='1200'][1]"/> 
```

我得到的结果是：

```
CHEM345A
PHIL432
PHIL433
ZOOL321
BIOC456 
```

我正在寻找的结果是 CHEM 345A，然后是 PHIL433

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-06T01:22:20.277

你在这里有几个问题。

首先，`[1]`在您的 XPath 表达式中，通过要求选择的 COURSE_SET 元素是其父元素的第一个子元素来过滤 XPath 值。没有它`[1]`，您的 XPath 表达式将显示为：

```
//SMRCRLT_XML
/AREA
/DETAILS
/DETAIL_REQUIREMENT
/RULE_REQUIREMENT
/DETAIL_REQUIREMENT
/COURSE_ROWSET
/COURSE_SET
[COURSE_AREA='TESTSELECT' and COURSE_KEY_RULE='1200'] 
```

但是*每个*匹配该路径表达式的 COURSE_SET 都是其父级的第一个子级。（唯一不是第一个孩子的 COURSE_SET 元素是 COURSE_SET 的孩子，而不是 COURSE_ROWSET 的孩子。）

第二个问题是，根据您的问题和您尝试制定所需的 XPath 表达式来判断，您希望以某种方式对课程进行分组（起初我以为您可能希望按部门对它们进行分组，但现在我希望您希望它们按嵌套 COURSE_SET 元素的值（在您的示例中具有值 A 或 B）进行分组，以便通过在某些合适的上下文中选择第一个 COURSE_SET ，您可以获得为每个组列出的第一门课程。但是您显示的 XML 实际上并没有按部门或按课程集对课程进行分组；它提供了一个完全没有分组的课程列表。这里没有任何元素 CHEM 345A 和 PHIL 433 是第一门课程。

如果您的设计要求按部门或课程集对课程进行分组，那么您的数据源没有提供您想要的数据，您需要对其进行修复。

另一方面，如果您被此 XML 卡住并想使用 XPath 来尝试提供您的数据源无法提供的结构，那么您*不*想要“每个 COURSE_SET 的第一个元素”，您想要“与前一个 COURSE_SET 不同的部门（或 COURSE_SET）中的每个 COURSE_SET”。您的 XPath 表达式可能类似于

```
//COURSE_ROWSET/COURSE_SET
  [not(COURSE_SET eq preceding::COURSE_SET[1])] 
```

您的第三个问题是您的 XML 似乎太喜欢为不同的结构使用相同的名称（一组 COURSE_SET 元素，每个元素都包含课程描述，部门和课程编号等，第二组COURSE_SET 元素，包含字符串 'A' 和 'B'，两组不同内容的 DETAIL_REQUIREMENT 等等。这会让不熟悉数据的人感到困惑，并且会让每一次对细节的讨论成为误传和误传的机会。错误。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-06T04:43:06.783

在 XSLT 1.0 中处理此类任务的有效方法是使用 Muenchian 分组，如下所示：

```
<xsl:stylesheet version="1.0" xmlns:xsl="http://www.w3.org/1999/XSL/Transform">
  <xsl:output method="xml" indent="yes" omit-xml-declaration="yes"/>
  <xsl:key name="kSet" match="COURSE_ROWSET/COURSE_SET" use="COURSE_SET" />

  <xsl:template match="/">
    <root>
      <xsl:apply-templates
        select="//COURSE_ROWSET/COURSE_SET[generate-id() = 
                  generate-id(key('kSet', COURSE_SET)[1])]" />
    </root>
  </xsl:template>

  <xsl:template match="COURSE_ROWSET/COURSE_SET">
    <item>
      <xsl:value-of select="concat(COURSE_SUBJ_CODE, COURSE_CRSE_NUMB_LOW)"/>
    </item>
  </xsl:template>
</xsl:stylesheet> 
```

将此 XSLT 应用于示例输入时，结果为：

```
<root>
  <item>CHEM345A</item>
  <item>PHIL433</item>
</root> 
```

# jquery - Fullcalendar 事件填充问题：javascript 不触发

> ID：14719391
> 
> 赞同：2
> 
> 时间：2013-02-06T00:13:44.690
> 
> 标签：jquery, asp.net-mvc, json, asp.net-mvc-3, fullcalendar

我在用事件填充 jQuery FullCalendar 时遇到了很多麻烦。

浏览器：IE8

技术：MVC 3 剃刀

正在使用的脚本：jquery-1.5.1、fullcalendar.js

控制器和支持方法：（即使我的问题是它一开始就没有出现）

```
 public JsonResult GetCalendarData()
    {
        List<CourseSection> courseSecs = //genarates list of course sections from db context
        var listOfEvents = new List<object>();

        foreach (CourseSection courseSec in courseSecs)
        {
            Course course = db.Course.Find(courseSec.CourseID);
            listOfEvents.Add(
            new
            {
                id = courseSec.ID,
                title = course.Name + "Section " + courseSec.Name,
                start = ToUnixTimespan(courseSec.sectionBeginDateAndDailyStartTime),
                end = ToUnixTimespan(courseSec.sectionEndDateAndDailyEndTime),
                allDay = false //none of the course sections run all day
            });
        }

        return Json(listOfEvents.ToArray(), JsonRequestBehavior.AllowGet);

    }
    private string ToUnixTimespan(DateTime date) //supporting method
    {
        TimeSpan tspan = date.ToUniversalTime().Subtract(
        new DateTime(1970, 1, 1, 0, 0, 0));

        return Math.Truncate(tspan.TotalSeconds).ToString();
    } 
```

看法：

```
 @model Web.Models.Registration

     @{
     ViewBag.Title = "ViewSchedule";
     Layout = "~/Views/Shared/_SiteLayout.cshtml";
     }

     <script>
     $(document).ready(function () {
     // page is now ready, initialize the calendar...
     $('#calendar').fullCalendar({
              defaultView: "agendaWeek",
              year: 2013,
              month: 0,
              date: 25,
              minTime: 6,
              maxTime: 18,
              aspectRatio: 1.5,
              allDaySlot: false,
              events: "/Course/GetCalandarData"
              });
     });
     </script>

     <div class="wrapper col3">
       <div id="container">
         <h1>View Schedule</h1>
           <div id = 'calendar'>
           </div>
        <br />
        @Html.ActionLink("Home", "Home", "Static")
        <br />
       </div>
     </div> 
```

问题：日历本身和所有配置都可以正常加载。但是，配置的最后一行（事件：“/Course/GetCalendarData”）不会触发。时期。它永远不会触发我放置在控制器方法中的任何调试块，并且不会返回任何 JSON。

我尝试在访问 URL 中添加强制性的“@Url.Content...”前缀。我曾尝试将该方法容纳在不同的控制器中。我尝试过使用不同版本的 jQuery。我已经删除了所有可能导致冲突的无关脚本。一切为了纳达。

我一直在为此扯头发。有任何想法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-06T13:43:33.933

因此，经过数小时的调试，我发现了一种解决方法。

我没有从视图向 GetCalendarData 方法发起 JSON 请求，而是修改了控制器代码并将其移至单独的静态类。然后我使用它返回一个普通的对象数组，然后在视图中动态地将数组转换为 JSON。观察：

控制器及支撑方式：

```
 public static object[] GetCalendarData()
    {
    List<CourseSection> courseSecs = //list of course sections from db context
    var listOfEvents = new List<object>();

        foreach (CourseSection courseSec in courseSecs)
        {
            Course course = db.Course.Find(courseSec.CourseID);
            listOfEvents.Add(
                new
                {
                    id = courseSec.ID,
                    title = course.Name + "Section " + courseSec.Name,
                    start = ToUnixTimespan(courseSec.sectionBeginDateAndDailyStartTime),
                    end = ToUnixTimespan(courseSec.sectionEndDateAndDailyEndTime),
                    allDay = false
                });
        }

        return listOfEvents.ToArray();

    }

    public static string ToUnixTimespan(DateTime date)
    {
        TimeSpan tspan = date.ToUniversalTime().Subtract(
     new DateTime(1970, 1, 1, 0, 0, 0));

        return Math.Truncate(tspan.TotalSeconds).ToString();
    } 
```

查看：@model Web.Models.Registration

```
 @{  
        ViewBag.Title = "ViewSchedule";
        Layout = "~/Views/Shared/_SiteLayout.cshtml";
    }

    @{
        object[] events = Web.Extensions.CourseOps.GetCalendarData();
    }

    <script>
        $(document).ready(function () {
            var allSections = @Html.Raw(Json.Encode(events));
            // page is now ready, initialize the calendar...
            $('#calendar').fullCalendar({
        defaultView: "agendaWeek",
        year: 2013,
        month: 0,
        date: 25,
        minTime: 6,
        maxTime: 18,
        aspectRatio: 1.5,
        allDaySlot: false,
        events: allSections,
        // put your options and callbacks here
    });

        });
    </script>

    <div class="wrapper col3">
      <div id="container">
        <h1>View Schedule</h1>
        <div id = 'calendar'>
        </div>
         <br />
        @Html.ActionLink("Home", "Home", "Static")
        <br />
      </div>
    </div> 
```

我的原始 javascript 配置（事件：“/Course/GetCalendarData”）没有触发的事实可能归因于我的控制器上的授权属性，或者我检查经过身份验证的 cookie 的相当激进的方式，但这是一种得到进入杂草。

关键是，我找到了一个成功的解决方法，我很满意。

特别感谢“charlietfl”一直支持我并尽力提供帮助。

直到下一次...

# jquery - jQuery发布请求失败

> ID：14719392
> 
> 赞同：-1
> 
> 时间：2013-02-06T00:14:04.003
> 
> 标签：jquery, cordova, jquery-mobile

我正在尝试使用 jQuery Mobile 在 iOS 上实现身份验证 API。我正在使用 发送发布请求，`jQuery.ajax()`但代码失败。

下面给出了代码，我正在使用 jQuery Mobile 框架和 iOS 的 Phonegap。

这段代码有什么问题吗？
是否有可能返回哪个 HTTP 错误代码（例如 500、404 等）？

```
function authenticate() {
    $.ajax({
        url: "https://someurl.com/authenticateUser",
        type: "POST",
        dataType: "json",
        contentType: "application/json; charset=utf-8",
        data: JSON.stringify("{\"jsonText\":  \"{ \"username\" : \"Test\", \"password\" : \"testing123\" } \"} "),
        success: function (result) {
            alert(result);
        },
        error: function (result) {
            console.log(result);
        }
    });
} 
```

当我通过 HTML 测试代码时 -

```
<input id="clickMe" type="button" value="Authenticate Me" onclick="authenticate();" /> 
```

我得到一个警报视图说：

```
index.html
[object Object] 
```

**编辑**：阅读一些评论后，我现在正在使用`console.log (result)`，这是我在日志中看到的错误消息

```
 {"readyState":4,"responseText":"{\"Message\":\"Cannot convert object of type \\u0027System.String\\u0027 to type \\u0027System.Collections.Generic.IDictionary`2[System.String,System.Object]\\u0027\",\"StackTrace\":\"   

at System.Web.Script.Serialization.ObjectConverter.ConvertObjectToTypeInternal(Object o, Type type, JavaScriptSerializer serializer, Boolean throwOnError, Object& convertedObject)\\r\\n   at System.Web.Script.Serialization.ObjectConverter.ConvertObjectToTypeMain(Object o, Type type, JavaScriptSerializer serializer, Boolean throwOnError, Object& convertedObject)\\r\\n   at System.Web.Script.Serialization.ObjectConverter.ConvertObjectToType(Object o, Type type, JavaScriptSerializer serializer)\\r\\n   at 

System.Web.Script.Serialization.JavaScriptSerializer.Deserialize(JavaScriptSerializer serializer, String input, Type type, Int32 depthLimit)\\r\\n   

at System.Web.Script.Serialization.JavaScriptSerializer.Deserialize[T](String input)\\r\\n   

at System.Web.Script.Services.RestHandler.GetRawParamsFromPostRequest(HttpContext context, JavaScriptSerializer serializer)\\r\\n   

at System.Web.Script.Services.RestHandler.GetRawParams(WebServiceMethodData methodData, HttpContext context)\\r\\n   

at System.Web.Script.Services.RestHandler.ExecuteWebServiceCall(HttpContext context, WebServiceMethodData methodData)\",\"ExceptionType\":\"System.InvalidOperationException\"}","status":500,"statusText":"Internal Server Error"} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-06T00:24:26.087

看着返回警报，您已经很难说出发生了什么。但是，如果您想知道返回的错误代码是什么，那么您可以尝试这样的[事情](http://api.jquery.com/ajaxError/)。您发出的 POST 请求是否也依赖于同一个域？

# php - 分解由按位运算符预先计算的参数中的整数

> ID：14719399
> 
> 赞同：0
> 
> 时间：2013-02-06T00:14:50.083
> 
> 标签：php, arguments, bitwise-operators

*我正在寻找一种方法来从按位运算符可能预先计算*的整数中找出函数中传递的参数（以及它们的顺序） 。我已经知道我应该使用像 2^n 这样的数字作为可以传递的常量（由于按位计算），但我不知道如何分解它。

所以总结一下：

1.  如何确定 1 和 4 已传递给以下函数
2.  可以通过某种特定的按位运算符以某种方式获得这些顺序吗？

这是一个显示我的意思的示例。

```
$inst = new SomeClass;
$inst->some_func( SomeClass::RULE1 | SomeClass::RULE3 );

class SomeClass {

    const RULE1 = 1;
    const RULE2 = 2;
    const RULE3 = 4;

    public function some_func($arg) {
        // what are the RULE's in the $arg here?
    } 
```

**请注意**，我试图弄清楚如何将按位运算符用作函数参数。所以我不是在寻找其他解决方案，比如将数组传递给函数或使用[`func_get_args()`](http://php.net/manual/en/function.func-get-args.php).

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-06T00:26:24.067

那么让我们看一下（语法适用于 PHP 5.4）：

```
const RULE1 = 0b0000 0001; // 1
const RULE2 = 0b0000 0010; // 2
const RULE3 = 0b0000 0100; // 4 
```

所以当你通过时`$inst->some_func( SomeClass::RULE1 | SomeClass::RULE3 );`；

arg 将是`0b0000 0101`.

所以现在要实际使用它，我们会这样做：

```
if ($arg & self::RULE1) // check if the RULE1 bit is ON (ie: equals 1)
{
    // do stuff based on RULE1;
}

if ($arg & self::RULE2) // check if the RULE2 bit is ON
{
    // do stuff based on RULE2;
}

// etc 
```

希望这会有所帮助！

* * *

> 可以通过某种特定的按位运算符以某种方式获得这些顺序吗？

那是不可能的，因为`RULE1 | RULE3`两者`RULE3 | RULE1`都产生完全相同的二进制序列。

# c - 为什么我的代码会跳过用户的输入？

> ID：14719402
> 
> 赞同：0
> 
> 时间：2013-02-06T00:14:58.620
> 
> 标签：c, debugging

所以这是我写的一些代码，我是从 c 开始的大麦，所以请耐心等待，我的代码对我来说很有意义，但它不能正常工作，当我试图拒绝停止播放并显示平均值时，它会重复播放功能。

基本上，我的程序从 1 到 100 猜测用户编号，无论用户想出什么数字。这是一些错误的输出，只是为了给您一个想法。玩游戏功能运行良好，但不是主要功能。

```
Playing guess my number game 

is your number 50 ?=
Great!
Play again? (y for yes n for no): is your number 50 ?=
Great!
Play again? (y for yes n for no): is your number 50 ?n 
```

等等我找不到我出错的地方有什么建议吗？

```
#include <stdio.h>
#include <stdlib.h>
#include <time.h>
#include <stdbool.h>
int playgame(void);
main() {
   int numberofplays = 0;
   float average = 0;
   int numberguesses = 0;

   printf("Playing guess my number game\n");
   printf("-------------------------------\n");
   bool play = true;
   int xtry = 0;
   int totaltries = 0;
   char answer;
   do {
       xtry = playgame();
       numberofplays++;
       totaltries = totaltries + xtry;
       printf("Play again? (y for yes n for no): ");
       answer = getchar();
       if(answer =='n')
                play = false;

    } while(play==true);

    average = (float)(totaltries/numberofplays);
    printf("average is %f tries per game\n",average);
    return 0;
} 
int playgame(void) {
    int guessnumber = 50;
    int xnumber = 25;
    int count=0;
    char x;
    bool stillguessing = true;

    while(stillguessing == true) {
        printf("is your number %d ?", guessnumber);
        x = getchar();

        if(x=='=') {
            count++;
            printf("Great!\n");
            stillguessing=false;
            return count;
        }
        else if(x == '<') {
            guessnumber = guessnumber - xnumber;
            xnumber = xnumber/2;
            if(xnumber<1) xnumber = 1;
            count++;
        }
        else if (x == '>') {
             guessnumber = guessnumber +xnumber;
             xnumber = xnumber/2;
             if(xnumber<1) xnumber = 1;
             count++;
        }
    }
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-06T00:36:54.777

该函数`getchar`从流中提取一个字符`stdin`。

该流`stdin`包含您输入到标准输入设备中的所有内容；在你的情况下，这是键盘。

现在，当您响应计算机的猜测时，您按下两个键。您按`=`，然后`Enter`。

您在中的代码`playgame`处理了`=`，但它保留了`Enter`on `stdin`... 因此，您的下一次调用将`getchar`拉动它。

您需要做的是刷新`stdin`流。你不能用[`fflush(stdin)`](http://www.cplusplus.com/reference/cstdio/fflush/)这个，就像`fflush`输出流一样。

相反，您可以使用类似的东西

```
void flushSTDIN() {
    while ((ch = getchar()) != '\n' && ch != EOF);
} 
```

在您提出问题之前清除缓冲区中的任何旧换行符。

您应该在程序中的所有调用之前执行此操作`getchar`。

所以：

```
flushSTDIN();
printf("is your number %d ?", guessnumber);
x = getchar(); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-06T00:40:17.093

您的问题是`getchar()`正在消耗输入中的单个字符。但是，当您输入响应时，输入流始终包含至少两个字符：您输入的字符（例如`'='`）和它后面的换行符（或回车符）。

这在函数中并不重要`playgame()`（尽管所有提示都打印了两次），但是当你到达

```
answer = getchar(); 
```

此调用`getchar()`获取您键入的前一个字符留下的换行符。

如何解决这个问题是您希望如何处理用户输入的问题 - 是否要验证它，是否希望能够输入更长的字符串等。

在您的情况下，最简单的解决方案是将您的调用替换为`getchar()`将丢弃空格的循环。

我建议执行以下操作：

在程序开始处（或附近）添加以下行：

```
#include <ctype.h> 
```

这提供了`isspace()`干净且可移植地检查字符是否为空格的功能。

换行：

```
answer = getchar(); 
```

和：

```
while (isspace(answer = getchar()))
    ; 
```

同样，替换

```
x = getchar(); 
```

和：

```
while (isspace(x = getchar()))
    ; 
```

单个分号是一个[空语句](http://msdn.microsoft.com/en-us/library/h7zyw61x.aspx)-*某些东西*（在这种情况下没有）必须进入循环体。

分配给`x`/`answer`在一个条件内通常会不受欢迎，但在这种特殊情况下，这是最惯用的写法。

请注意，不正确的宏实现可能会通过[多次](http://cse.spsu.edu/teidson/Languages/cpp/Duplication-of-Side-Effects.html#Duplication-of-Side-Effects)`isspace()`评估调用来导致问题`getchar()`

# linux - 递归检查所有文件的所有权

> ID：14719403
> 
> 赞同：11
> 
> 时间：2013-02-06T00:15:07.147
> 
> 标签：linux, bash

这是我第一次尝试 bash 脚本。我正在尝试创建一个脚本来检查从某个目录下开始的每个文件所有者和组。

例如，如果我有这个：

```
files=/*  
for f in $files; do  
    owner=$(stat -c %U $f)  
    if [ "$owner" != "someone"  ]; then  
        echo $f $owner  
    fi  
done 
```

最终目标是解决权限问题。但是，我无法让`/*`变量进入 中的所有内容`/`，它只会检查下的文件`/`并在任何新目录处停止。关于如何检查对所有内容`/`及其任何子目录的权限的任何指示？

* * *

## 回答 #1

> 赞同：29
> 
> 时间：2013-02-06T00:20:02.767

您可以`shopt -s globstar`并使用`for f in yourdir/**`在 bash4+ 中递归扩展，或者您可以使用`find`：

```
find yourdir ! -user someone 
```

如果你想要与用户名和文件名相同的输出格式，你必须得到系统特定的：

```
GNU$  find yourdir ! -user someone -printf '%p %u\n' 
OSX$  find yourdir ! -user someone -exec stat -f '%N %Su' {} + 
```

* * *

## 回答 #2

> 赞同：9
> 
> 时间：2017-07-26T01:31:17.497

以列表格式递归列出所有文件和显示所有权和权限的隐藏文件

```
ls -Rla * 
```

* * *

## 回答 #3

> 赞同：8
> 
> 时间：2013-02-06T01:21:17.427

你可以试试这个，它是一个递归的：

```
function playFiles {
    files=$1
    for f in $files; do
            if [ ! -d $f ]; then
                    owner=$(stat -c %U $f)
                    echo "Simple FILE=$f  -- OWNER=$owner"
                    if [ "$owner" != "root"  ]; then
                            echo $f $owner
                    fi
            else
                    playFiles "$f/*"
            fi
    done
}
playFiles "/root/*" 
```

*在将 playFiles "/root/ " 替换为 : playFiles "/* "之前，在另一个目录中玩一点。顺便说一句，playFiles 是一个 bash 函数。希望这会对您有所帮助。

# python - 某些网站的 Python recv 失败

> ID：14719406
> 
> 赞同：0
> 
> 时间：2013-02-06T00:15:33.617
> 
> 标签：python, http, sockets

我使用 Python 的 socket 模块编写了一个非常基本的轮询代理 Web 服务器。对于代理，我使用套接字的 recv() 函数编写了一个简单的 readline()。

它是这样的：

```
def readline(socket):
    buffer = ''
    char = socket.recv(1)
    while char != '\n' and char != '':
        buffer += char
        char = socket.recv(1)
    if char == '':
        buffer = ''
    else:
        buffer += '\n'
    return buffer 
```

据我了解，如果 recv() 返回一个空字符串，这意味着存在套接字错误或一侧已关闭它们的连接，因此当发生这种情况时，我会向我的代理返回一个空字符串，让它知道 readline() 失败.

运行代理时，我可以访问 youtube.com 和 yahoo.com 等网站，但是每当我尝试访问 www.google.com 时，我的 readline 函数总是在第一个 readline 上返回一个空字符串（读取请求行在 HTTP 请求中）。

有任何想法吗？

**编辑：** 对不起，我想我不清楚。[当在地址栏中输入“ http://www.google.com/](http://www.google.com/) ”时，我正在等待我的 Mozilla Firefox 客户端向我的代理服务器发送的请求，这就是我挂起的地方。我什至没有到达将请求转发到远程服务器并发回响应的部分。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-06T00:21:31.917

我认为谷歌可能会首先等待您的请求标头，如果它不授权您，它将关闭连接。而且您不是在阅读请求，而是在发送请求。你读的是回应。

但这可能与没有发送标头不同。

--**更新**--

尝试在连接后立即发送这些标头。

```
GET / HTTP/1.1
Host: google.com
Connection: keep-alive
Accept: text/html,application/xhtml+xml,application/xml;q=0.9,*/*;q=0.8
User-Agent: Mozilla/5.0 (Windows NT 6.1; WOW64) AppleWebKit/537.17 (KHTML, like Gecko) Chrome/24.0.1312.57 Safari/537.17
X-Chrome-Variations: CM61yQEIk7bJAQiatskBCKa2yQEIp7bJAQiptskBCLi2yQEI34PKAQ==
Accept-Encoding: gzip,deflate,sdch
Accept-Language: en-US;q=0.6,en;q=0.4
Accept-Charset: utf-8;q=0.7,*;q=0.3 
```

您还可以检查您的浏览器向 google 发送的标题以及使用 firebug 得到的响应。

# iphone - 强制 UIWebView 缩小？

> ID：14719407
> 
> 赞同：0
> 
> 时间：2013-02-06T00:15:36.893
> 
> 标签：iphone, objective-c, ipad, uiwebview, scale

我正在使用非常小的 UIWebViews，大约。100x150的尺寸，非常小！因此，缩放以适应页面是没有用的！

因此，当我的 UIWebView 如此之小时，是否可以将网页缩小以适合视图？

谢谢。

# google-search - 谷歌自定义搜索过滤

> ID：14719417
> 
> 赞同：0
> 
> 时间：2013-02-06T00:16:48.177
> 
> 标签：google-search, google-search-api, google-custom-search

我已获得一组（已批准）要求和已批准的解决方案，可将 Google 自定义搜索实施到现有网站中。

本网站有以下内容：

*   工作

    *   第一类
    *   第 2 类
    *   第 3 类
*   普通页面

    *   第一类
    *   第 2 类
    *   第 3 类

搜索功能的要求是人们可以使用 CheckBoxes 来过滤结果。因此，如果以下情况属实：

```
[x] Category 1
[ ] Category 2
[x] Category 3 
```

然后不会显示类别 2 的页面。但是，还有：

```
[x] Show jobs only 
```

我如何通过 Google 自定义搜索来实现这一点？我已经阅读过`PageMap`，使用`<meta>`标签等。但是我无法理解如何根据这些来过滤结果。。？

我看这里：[谷歌自定义搜索 API - 排序/过滤](https://stackoverflow.com/questions/12338785/google-custom-search-api-sorting-filter)

然而，它似乎并没有回答我的担忧。我仍然有点迷失在文档中。

这种事情可能吗？有没有人有一些更详尽的例子的链接？

我曾想过尝试内存过滤.. 但是，如果 Google在选中复选框*时恰好*在 10 个结果中返回了 1 个作业页面`[x] Show jobs only`.. 那么用户只会在页面上获得 1 个结果。

我倾向于使用自定义搜索引擎的基于 XML 的结果集。但是，如果需要更改，我愿意接受建议。

任何建议表示赞赏。

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2013-02-06T01:13:26.147

我已经设法弄清楚了......只有通过大量的试验和错误。

首先，`PageMap`XML 响应中的示例元素：

```
<PageMap>
    <DataObject type="metatags">
        <Attribute name="creationdate" value="D:20100902144455+10'00'"/>
        <Attribute name="creator" value="Adobe InDesign CS5 (7.0)"/>
        <Attribute name="moddate" value="D:20100902144510+10'00'"/>
        <Attribute name="producer" value="Adobe PDF Library 9.9"/>
    </DataObject>
</PageMap> 
```

Google 的过滤只会匹配由空格、特殊字符等分隔的单个单词。因此，如果我想搜索其中包含“CS5”的“creator”，我将使用以下查询字符串：

```
?q=My+Search+Text+Here+more:pagemap:metatags-creator:CS5
                                    ^^^^^^^^ ^^^^^^^
                                      type    name 
```

上面的“类型”和“名称”指的是`DataObject`和`Attribute`元素**属性名称**。最后一部分是您要过滤的单词。

所以现在我应该能够将以下内容转储到类别 1 中的页面：

```
<PageMap>
    <DataObject type="metatags">
        <Attribute name="category" value="Category1"/>
    </DataObject>
</PageMap> 
```

或者..对于一份工作：

```
<PageMap>
    <DataObject type="metatags">
        <Attribute name="IsJobPage" value="Yes"/>
    </DataObject>
</PageMap> 
```

..并使用这样的查询：

```
?q=My+Search+Text+Here+more:pagemap:metatags-category:Category1,Category3
?q=My+Search+Text+Here+more:pagemap:metatags-IsJobPage:Yes 
```

第一个示例返回元标记名称为“category”且包含值“Category1”**或**“Category3”的任何页面。

希望这个答案可以避免有人扯掉他们的头发……就像我几乎一样。

# android - （虚拟）传感器 Android 的电源使用情况

> ID：14719418
> 
> 赞同：2
> 
> 时间：2013-02-06T00:17:16.933
> 
> 标签：android, sensors, android-sensors, sensor-fusion

查看我的 Nexus 4 的功能，我注意到传感器似乎被多次报告。

我以前没有使用过传感器（或一般的智能手机），所以我使用了一些应用程序来大致了解一下：[AndroidFragmentation.com](http://www.androidfragmentation.com)的设备分析器和[传感器资源管理器](https://play.google.com/store/apps/details?id=com.salvo.sensorsexplorer)都提供了 15 个传感器。你可以在[这里](http://www.androidfragmentation.com/database/v/dr/622951/oem/LGE/dm/Nexus%204/carrier/Telco)看到结果。

虽然根据[iFixIt.com](http://www.ifixit.com/Teardown/Nexus+4+Teardown/11781/3)有一个[Invensense MPU-6050](https://play.google.com/store/apps/details?id=com.salvo.sensorsexplorer)内置作为（仅）陀螺仪和加速度计，但 Android 报告：

*   2 LGE 传感器
    *   “LGE 加速度计传感器”
    *   “LGE 陀螺仪传感器”
*   2 高通
    *   《直线加速》
    *   “旋转矢量”
*   4 由谷歌
    *   “旋转矢量传感器”
    *   “直线加速度传感器”
    *   “方向传感器”
    *   “校正陀螺仪传感器”

根据[三星 GT-I9300 中的传感器列表，其中](https://stackoverflow.com/questions/14228852/sensor-list-in-samsung-gt-i9300)一些传感器将是“虚拟的”。然而，目前我真正感兴趣的是传感器的功耗。这就是我真正感到困惑的地方。

以加速度计为例：“LGE Accelerometer Sensor”报告为 0.5 mA，而“Linear Acceleration”（高通）报告为 4.1 mA，“Linear Acceleration Sensor”（谷歌）报告为 9.1 mA。三者的分辨率相同（0.0011901855 SU），LGE 和高通的最大范围相同（39.226593 SU），而谷歌报告的最大范围为 19.6133 SU。

我首先认为这可以访问不同的操作模式，这可以解释不同的值，但话又说回来，为什么这会解释其他供应商。

现在：实际存在多少个加速器？它们真的是多余的，还是只是对同一设备的虚拟访问路径？如果是这样，为什么用电量差异如此之大？为什么范围？

**根据规格更新** ，陀螺仪将消耗 3.6mA 的电流（匹配“LGE 陀螺仪传感器”，所有其他报告为 9.1mA），加速度计可能在正常操作模式下的 500µA 和 10µA @ 1.25Hz 到 110µA @ 40Hz 之间变化电源模式。

使用 3V 的电压（根据规格的典型值），陀螺仪产生 10.8mW 的功率，加速度计产生 10µW 至 1.5mW 的功率。

报告“Google Inc.”的传感器 似乎是虚拟的，它们执行传感器融合以提供更高准确性和可用性的值。请参阅[此 Google 技术讲座](http://www.youtube.com/watch?v=C7JQ7Rpwn2k)。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-10-15T21:44:29.167

通常设备上只有一个物理加速度传感器。

然后可以将该信号分为线性加速度和重力。它可以通过像[android文档](http://developer.android.com/reference/android/hardware/SensorEvent.html#values)状态这样的低通滤波器来实现。然后可以通过陀螺仪和磁力计改善结果。这通常在软件方面完成 - 因此线性加速度、方向和重力功耗通常是加速度计、陀螺仪的总和，也可能是磁力计的功耗值。

显然 qualcomm 线性加速度传感器使用加速度计和陀螺仪来计算值，而 google 的版本也考虑了磁力计。

分辨率与物理传感器绑定。对于范围我不能肯定地说，但可能与关系有关：

> 加速度 = 线加速度 + 重力

物理传感器：

*   加速度计
*   陀螺仪
*   磁力计

传感器融合：

*   线性加速
*   重力
*   方向/旋转
*   校正陀螺仪

但是，您不能确定传感器是物理存在还是仅仅是传感器融合的产物。

# node.js - Angular Js Unexpected Token error Dynamic Routes

> ID：14719419
> 
> 赞同：3
> 
> 时间：2013-02-06T00:17:30.763
> 
> 标签：node.js, express, angularjs

当我尝试创建动态路由时，我收到了几个“意外令牌 <”错误。正常路线工作正常。因此，如果我设置以下路线：

```
.when('/user',{
    templateUrl: 'views/user/new', 
    controller: "addUserCtrl"
  }) 
```

请求到达服务器并被我的 express catch all route 处理程序捕获，然后 angular 启动并请求 express 的 api 路由、api/用户、绑定数据、控制器和模板，我看到了一个不错的页面。一切正常。没有错误。

如果我尝试创建动态路由或更深入的路由，当我尝试请求该路由时，我会收到意外的令牌错误：

```
.when('/user/:id',{
    templateUrl: 'views/user/new', 
    controller: "addUserCtrl"
  }) 
```

例如，当我请求 /user/3 时，我收到错误，并且 addUserCtrl 永远不会被调用。任何可能导致这种情况的想法。

```
.when('/user/show,{
    templateUrl: 'views/user/new', 
    controller: "addUserCtrl"
  }) 
```

请求 /user/show 也会抛出错误。在控制台中，错误显示在我在索引正文中加载的所有角度文件（angular.js、App.js、services.js、controllers.js、filters.js、directives.js）的请求旁边.html。

我注意到每当我在路由中添加多个斜杠时都会发生此问题。如果我尝试 /user/show，我可以看到以下请求：

```
 /user/show

   syntax errors for the below:
   /user/js/App.js
   /user/js/lib/angular/angular.js
   /user/js/filters.js
   /user/js/controllers.js'
   /user/js/services.js
   /user/js/directives.js 
```

如果我尝试 /abc/def，我将收到以下请求：

```
 /abc/def

    syntax errors for the below:
   /abc/js/App.js
   /abc/js/lib/angular/angular.js
   /abc/js/filters.js
   /abc/js/controllers.js'
   /abc/js/services.js
   /abc/js/directives.js 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2014-11-30T17:51:56.133

我遇到了同样的问题，正如 atentaten 描述的那样，问题是由 js 文件的相对路径引起的。但是，它与 Express 无关。它也可能是由来自 html 文件头部的脚本标签的相对包含路径引起的。所以，为了澄清，我改变了我的HTML：

```
<script src="bower_components/angular/angular.js"></script> 
```

至：

```
<script src="/bower_components/angular/angular.js"></script> 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-02-06T03:26:26.790

显然这不是一个真正的角度问题，而是一个明确的问题。

问题是我的 index.jade 中包含的角度 js 中缺少开头的斜线：

```
script(src='js/lib/angular/angular.js')
script(src='js/App.js')
script(src='js/services.js')
script(src='js/controllers.js')
script(src='js/filters.js')
script(src='js/directives.js') 
```

我将它们更改为：

```
script(src='/js/lib/angular/angular.js')
script(src='/js/App.js')
script(src='/js/services.js')
script(src='/js/controllers.js')
script(src='/js/filters.js')
script(src='/js/directives.js') 
```

错误消失了。尽管 js 加载时没有斜杠，但它仍然会导致 express 出现问题，创建语法错误，这可能会破坏角度，但我不确定具体原因。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-06T19:39:01.607

templateUrl 必须是绝对的，否则如果 url 中有多个斜杠/深度级别，Express 会阻塞：

```
.when('/user/show,{
  templateUrl: '/views/user/new', /* add slash */
  controller: "addUserCtrl"
}) 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2015-10-14T12:42:24.610

这发生在 angularJS 应用程序中的 ui-router 动态路由上。我有同样的错误。通过改变路径解决

```
<script src="app/components/services/campaign.services.js"></script> 
```

至

```
<script src="/app/components/services/campaign.services.js"></script> 
```

但在我的情况下 index.html 文件路径是由 gulp 任务**gulp-inject**生成的，所以我更改了 gulp-inject 的配置，例如

```
inject: { addRootSlash: true } 
```

它对我有用:)

# regex - Apache基于环境重写子域

> ID：14719420
> 
> 赞同：0
> 
> 时间：2013-02-06T00:17:42.747
> 
> 标签：regex, apache, mod-rewrite

我正在尝试提出一个重写规则，该规则将在我支持的所有环境（qa、stage、dev 等）的 conf 文件中工作，因此一个通用的重写条件和规则可以“统治”它们。

例子：

*   subdomain.environment.site.com 应该重定向到 environment.site.com
*   *除了*subdomain.site.com 应该重定向到 www.site.com。
*   当某些请求 URI 中有内容时，它也不应该转发。

就我而言，这是：

```
 RewriteCond %{HTTP_HOST}   subdomain.$ENV.site.com [NC]
    RewriteCond %{REQUEST_URI} !/images
    RewriteCond %{REQUEST_URI} !/blah
    RewriteCond %{REQUEST_URI} !/blah-foo
    RewriteCond %{REQUEST_URI} !/foo-bar
    RewriteRule ^/(.*)         http://$ENV.site.com/$1 [L,R=302] 
```

显然 $ENV 不会工作，但我有一个很好的时间试图找到一个合适的正则表达式来使其在所有环境中工作。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-06T17:23:10.520

更多的研究，手敲和啤酒让我找到了解决方案。

它可能不漂亮，但它有效。回答所以如果有人试图这样做，他们在这里有某种开始。

```
 RewriteCond %{HTTP_HOST}   ^(sub)(\.)((?:[a-z][a-z]+))(\.)(site)(\.)(com) [NC]
    RewriteCond %{REQUEST_URI} !/image
    RewriteCond %{REQUEST_URI} !/blah
    RewriteCond %{REQUEST_URI} !/foobar
    RewriteCond %{REQUEST_URI} !/barfoo
    RewriteRule ^/(.*)         http://%3.%5.%7/$1 [L,R=302] 
```

# java - java socket无法使用BufferedWriter发送消息

> ID：14719422
> 
> 赞同：0
> 
> 时间：2013-02-06T00:17:49.423
> 
> 标签：java

我正在尝试使用`BufferedWriter`从客户端或服务器到客户端向服务器发送消息。但是什么都不会发送，但是如果您向它发送消息，它会收听。我不确定我做错了什么，但我认为问题出在此处。

```
ActionListener buttonActive= new ActionListener(){
            public void actionPerformed(ActionEvent e) {
                messageTextArea.append(textMessage.getText()+ "\n");
                sendText = textMessage.getText();
            }
        };
        sendButton.addActionListener(buttonActive);

    private void startSending(){

        SwingWorker <Void, Void> sendingThread = new SwingWorker <Void, Void>(){
            protected Void doInBackground() throws Exception {

                BufferedWriter writer = null;
                writer = new BufferedWriter(new OutputStreamWriter(connection.getOutputStream()));
                while(connected){
                    writer.write(sendText);
                    writer.flush();
                }
                return null;
            }
        };
        sendingThread.execute();
    } 
```

@trashgod 和 @madProgrammer 给了我一个使用 printWriter 的解决方案，但我希望我使用`BufferedWriter`+和+制作更多版本`BufferedReader`，但是我想制作+ 。`OutputStream+ InputStream``BufferedWriter``PrintWriter``BufferedWriter``BufferedReader`

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-06T00:26:25.113

您的代码确实发送了数据。也许客户正在打电话`readLine()`？由于您没有发送行终止符，因此它将永远阻塞。

但是您的代码没有多大意义。在循环中编写相同的文本可能不是您想要的。并且没有`PrintReader`.

# windows - 如何获取 VLC 流并将其转换为可用的 Windows“视频源”？

> ID：14719424
> 
> 赞同：0
> 
> 时间：2013-02-06T00:17:57.357
> 
> 标签：windows, stream, directshow, vlc

本质上，我正在尝试使用 VLC 通过本地网络将现有视频源流式传输到另一台计算机。我正在尝试找到一种从该网络流中创建视频源的方法，以便可以在不同的应用程序中使用它。

所以要形象化：

```
comp1 video source --> vlc --> network stream --> unknown program on comp2 --> new video source --> any program of my choosing on comp2 
```

有谁知道我该怎么做？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-06T07:53:29.063

您通过虚拟 DirectShow 摄像头/设备向应用程序公开视频源。对此已经提出并回答了许多问题：

*   [作为字节流的虚拟网络摄像头输入](https://stackoverflow.com/questions/8557723/virtual-webcam-input-as-byte-stream/8557841#8557841)
*   [网络流的虚拟摄像机/直接显示过滤器](https://stackoverflow.com/questions/2882792/virtual-camera-direct-show-filter-for-network-stream/2926838#2926838)
*   [如何使用 directshow 过滤器作为 Expression Encoder 4 的实时输入？](https://stackoverflow.com/questions/7870843/how-to-use-directshow-filter-as-a-live-input-for-expression-encoder-4/7871719#7871719)
*   [创建将图像作为输入并将其发送到任何视频聊天应用程序的虚拟网络摄像头应用程序](https://stackoverflow.com/questions/9971329/create-virtual-webcam-application-which-takes-images-as-input-and-send-it-to-any/9974058#9974058)

单独的 VLC 无法将自己注册为虚拟相机。

# jquery - jquery mouseenter 在“a”元素上不起作用，在 h3 上工作正常

> ID：14719428
> 
> 赞同：-1
> 
> 时间：2013-02-06T00:18:17.987
> 
> 标签：jquery, mouseevent, mouseenter

我有（我相信）一个非常简单的问题，但无法弄清楚出了什么问题。代码将说明一切：

```
$(".all-products h3").mouseenter(function () {
    $(this).siblings('p').slideDown(200);
}).mouseleave(function () {
    $(this).siblings('p').slideUp(500);
}); 
```

这是html：

```
<a title="xxx" href="#">
    <img src="1.jpg"/>
    <p>description</p>
    <h3>header3</h3>
</a> 
```

这个工作正常，但是当我在jquery中用a替换h3时为什么它不起作用，所以它在下面**不起作用**：

```
$(".all-products a").mouseenter(function () {
    $(this).siblings('p').slideDown(200);
}).mouseleave(function () {
    $(this).siblings('p').slideUp(500);
}); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-06T00:23:44.760

`a`不是 的兄弟`p`，它是 的父级`p`。尝试使用`.children('p')`or`.find('p')`代替（前者更具体）。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-06T00:23:13.093

```
$(".all-products a").mouseenter(function () {
    $(this).find('p').slideDown(200);
}).mouseleave(function () {
    $(this).find('p').slideUp(500);
}); 
```

a 的兄弟姐妹将存在于 DOM 中的同一级别。在您的情况下，您想要 .find() 元素或调用 children()。无论哪种方式。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-06T00:23:26.980

因为你正在使用兄弟姐妹。

尝试这个：

```
$(".all-products a").mouseenter(function(){
          $('p', this).slideDown(200);
           }).mouseleave(function() {
          $('p', this).slideUp(500);
        }); 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-02-06T00:24:20.300

好吧，主要问题似乎是该`p`元素不是`a`. 您需要替换`siblings()`为`children()`

# jaxb - 为什么 JAXB 在解组期间调用 getter

> ID：14719429
> 
> 赞同：2
> 
> 时间：2013-02-06T00:18:21.653
> 
> 标签：jaxb

在 JAXB 解组期间看到以下堆栈跟踪，我感到很惊讶：

```
[#|2013-02-05T18:59:27.551-0500|SEVERE|glassfish3.1.2|ConfigurationService|_ThreadID=82;_ThreadName=Thread-2;|Exception processing C:\glassfish3\glassfish\domains\domain1\config\myConfig.xml : @NotNull method com/foo/services/config/Config.getBars must not return null
java.lang.IllegalStateException: @NotNull method com.foo.services.config.Config.getBars must not return null
    at com.foo.services.Config.getBars(Config.java:222)
    at com.foo.services.Config$JaxbAccessorM_getBars_setBars_java_util_List.get(MethodAccessor_Ref.java:56)
    at com.sun.xml.bind.v2.runtime.reflect.Lister$CollectionLister.startPacking(Lister.java:294)
    at com.sun.xml.bind.v2.runtime.reflect.Lister$CollectionLister.startPacking(Lister.java:269)
    at com.sun.xml.bind.v2.runtime.unmarshaller.Scope.start(Scope.java:142)
    at com.sun.xml.bind.v2.runtime.property.ArrayERProperty$ItemsLoader.startElement(ArrayERProperty.java:119)
    at com.sun.xml.bind.v2.runtime.unmarshaller.UnmarshallingContext._startElement(UnmarshallingContext.java:501)
    at com.sun.xml.bind.v2.runtime.unmarshaller.UnmarshallingContext.startElement(UnmarshallingContext.java:480)
    at com.sun.xml.bind.v2.runtime.unmarshaller.ValidatingUnmarshaller.startElement(ValidatingUnmarshaller.java:102)
    at com.sun.xml.bind.v2.runtime.unmarshaller.SAXConnector.startElement(SAXConnector.java:150)
    at com.sun.org.apache.xerces.internal.parsers.AbstractSAXParser.startElement(AbstractSAXParser.java:506)
    at com.sun.org.apache.xerces.internal.impl.XMLNSDocumentScannerImpl.scanStartElement(XMLNSDocumentScannerImpl.java:376)
    at com.sun.org.apache.xerces.internal.impl.XMLDocumentFragmentScannerImpl$FragmentContentDriver.next(XMLDocumentFragmentScannerImpl.java:2715)
    at com.sun.org.apache.xerces.internal.impl.XMLDocumentScannerImpl.next(XMLDocumentScannerImpl.java:607)
    at com.sun.org.apache.xerces.internal.impl.XMLNSDocumentScannerImpl.next(XMLNSDocumentScannerImpl.java:116)
    at com.sun.org.apache.xerces.internal.impl.XMLDocumentFragmentScannerImpl.scanDocument(XMLDocumentFragmentScannerImpl.java:488)
    at com.sun.org.apache.xerces.internal.parsers.XML11Configuration.parse(XML11Configuration.java:835)
    at com.sun.org.apache.xerces.internal.parsers.XML11Configuration.parse(XML11Configuration.java:764)
    at com.sun.org.apache.xerces.internal.parsers.XMLParser.parse(XMLParser.java:123)
    at com.sun.org.apache.xerces.internal.parsers.AbstractSAXParser.parse(AbstractSAXParser.java:1210)
    at com.sun.org.apache.xerces.internal.jaxp.SAXParserImpl$JAXPSAXParser.parse(SAXParserImpl.java:568)
    at com.sun.xml.bind.v2.runtime.unmarshaller.UnmarshallerImpl.unmarshal0(UnmarshallerImpl.java:218)
    at com.sun.xml.bind.v2.runtime.unmarshaller.UnmarshallerImpl.unmarshal(UnmarshallerImpl.java:190)
    at javax.xml.bind.helpers.AbstractUnmarshallerImpl.unmarshal(AbstractUnmarshallerImpl.java:172)
    at javax.xml.bind.helpers.AbstractUnmarshallerImpl.unmarshal(AbstractUnmarshallerImpl.java:177)
    at javax.xml.bind.helpers.AbstractUnmarshallerImpl.unmarshal(AbstractUnmarshallerImpl.java:186)
    at javax.xml.bind.helpers.AbstractUnmarshallerImpl.unmarshal(AbstractUnmarshallerImpl.java:204) 
```

getter 使用 org.jetbrains.annotation.NotNull 进行注释，目的是应将其标记为不返回 NULL，因为 getter 也使用 @XmlElementRef(required = true) 进行注释。所以基本上，@NotNull 被放在那里是为了告诉客户，这永远不应该为空，因为它是 XML 文件中的必需元素被解组，因此解析将失败，因为它丢失或将在那里。可以在[此处](http://www.jetbrains.com/idea/documentation/howto.html)找到有关 @NotNull 的更多信息。

在这种情况下，与 getter 关联的属性是 a `List<Bar>`，它没有被类初始化为任何东西，因为它期望解组过程会这样做。

在任何情况下，我都看到如果在解组 JAXB 调用 getter 期间解析失败，这会触发生成上述异常的 @NotNull。

任何人都可以阐明这种行为吗？谢谢，

-诺亚

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-06T00:45:33.837

默认情况下，[**JAXB (JSR-222)**](http://jcp.org/en/jsr/detail?id=222)实现将公共属性视为已映射。它调用 get on your `List`property 的原因是查看您的值是否已预先初始化。

**情景#1**

JAXB 将调用`getBars()`以查看是否已创建集合，这将返回`null`. 由于`null`返回 JAXB 将创建一个实例，`java.util.ArrayList`该实例将通过`setBars`.

```
public class Foo {

    private List<Bar> bars;

    public List<Bar> getBars() {
        return bars;
    }

    public void setBars(List<Bar> bars) {
        this.bars = bars;
    }

} 
```

**情景#2**

JAXB 将调用`getBars()`以查看是否已经创建了一个集合，这将返回一个`LinkList`. 由于`null`没有返回 JAXB 将使用`List`从 get 方法返回的实例。

```
public class Foo {

    private List<Bar> bars = new LinkedList<Bar>();

    public List<Bar> getBars() {
        return bars;
    }

    public void setBars(List<Bar> bars) {
        this.bars = bars;
    }

} 
```

**场景#3**

如果您希望 JAXB 使用字段而不是属性，那么您可以`@XmlAccessorType(XmlAccessType.FIELD)`在类或包上指定（请参阅：[http](http://blog.bdoughan.com/2011/06/using-jaxbs-xmlaccessortype-to.html) ://blog.bdoughan.com/2011/06/using-jaxbs-xmlaccessortype-to.html ） .

```
@XmlAccessorType(XmlAccessType.FIELD)
public class Foo {

    private List<Bar> bars;

    public List<Bar> getBars() {
        return bars;
    }

    public void setBars(List<Bar> bars) {
        this.bars = bars;
    }

} 
```

# firebird - 如何在 Firebird Embedded 中访问 UDF DLL？

> ID：14719430
> 
> 赞同：4
> 
> 时间：2013-02-06T00:18:32.763
> 
> 标签：firebird

我尝试为 Firebird 构建 UDF。我能够编译 DLL 并将 UDF 注册到数据库中，但我实际上无法运行它。每次，我都会收到一个错误：

```
invalid request BLR at offset 63.
function [FUNCTION_NAME] is not defined.
module name or entrypoint could not be found. 
```

我尝试将 UDF DLL 放在与应用程序相同的文件夹中，以及与数据库相同的文件夹中，但无论哪种方式，它似乎都不会加载它。

当我尝试用谷歌搜索寻求帮助时，我得到的所有结果似乎要么通过将它放在服务器的 UDF 文件夹中使其在 FB 服务器上工作（这不适用于我使用 FB Embedded），要么通过编辑 conf 文件来修复 FB 服务器上的权限问题（这不适用，因为我使用的是 FB Embedded）。

**那么，如果我使用 FB Embedded**，如何确定/配置放置 UDF DLL 的正确位置？

 *** * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-02-06T01:38:37.083

我认为默认情况下，Firebird 期望 UDF DLL 位于名为`udf`. 您可以使用参数通过`firebird.conf`文件配置 UDF 路径。`UdfAccess`安装时附带的conf文件有说明如何使用该参数。该`README_embedded.txt`文件还包含很好的解释如何放置嵌入式服务器文件。**

# javascript - z-index 的picturefill.js 问题

> ID：14719431
> 
> 赞同：1
> 
> 时间：2013-02-06T00:18:33.463
> 
> 标签：javascript, jquery, css, responsive-design

我正在使用图片填充来制作响应式图像。我遇到的问题是我正在调用 picturefill(); ajax 调用成功回调的方法。当动态加载时，会调用图片填充。

这很好用，但问题是图片填充的图片覆盖了覆盖在它上面的所有元素大约 1 秒。这会导致不舒服的效果，因为叠加的元素会突然出现。所以顺序是我们看到元素，元素消失，然后元素从图片填充的图片下方重新出现。

有没有其他人遇到过这个问题，有没有人对我如何处理它有任何建议？我已经尝试将图片填充图片的 z-index 更改为 z-index:1 并将其他所有内容更改为 z-index: 200 但仍然没有运气。

添加一些代码：

```
 <!-- Begin centerimage Container --> 
```

```
 <!-- Begin rightcaption -->
          <div class="rightcaption">

        OVERLAID CAPTION

          </div>
          <!-- End rightcaption -->   

<!-- Begin flip-container -->
<div class= "flip-container">
        <div class= "flipper">
            <div class= "front">
          <div class="main-pic-wrap" id="bloop">

          <div data-picture data-alt="name" data-class="relative_image">
            <div data-src=source> </div> 
            <div data-src=img2%> data-media="(min-width: 480px)"></div>
            <div data-src=img3%> data-media="(min-width: 767px)"></div>

            <!--[if (lt IE 9) & (!IEMobile)]>
            <div data-src="medium.jpg"></div>
            <![endif]-->

            <!-- Fallback content for non-JS browsers. Same img src as the initial, unqualified source element. -->
            <noscript>
                <img src=img3 alt="Image of Activity">
            </noscript>
          </div>
          </div>

            </div>
            <div class = "back">
                <div id="map"></div>
            </div>

        </div>
    <!-- End flipper -->
    </div>
    <!-- End flip-container container -->

<div id="moreShowHideGroup">
    <div id="mapShowHide" class="icon-globe"></div>
</div> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-07T08:35:46.420

好吧——终于想通了。所以我相信正在发生的事情是保存我的图片填充图片和我的位置的容器：绝对浮动元素在执行图片填充时失去了它的宽度属性，因为我认为图片填充.js从DOM中删除了图片填充div然后取代它。

当它被删除时，我设置为 width:100% 的容器元素内部没有任何东西可以给它一个实际的宽度，因此它会在一瞬间折叠，而我的固定位置元素在一瞬间消失。

为了防止这种情况，我将另一个位置：具有 100% 宽度的绝对 div 放入容器中，然后将我的另一个位置：绝对 div 放入这个新容器中。所以结构看起来像这样：

```
 <div class="main" style="position:relative"> 
      <div data-picture data-alt="name">div data-src=source> </div></div>
      <div class="always-here" style="position:absolute" top:0; left:0;>
        <div class="fixed" style="position:absolute; top:2%; left:2%; ">
        </div>
      </div>
    </div> 
```

# text - 将词法分析器 SETTEXT 与 c 目标一起使用

> ID：14719433
> 
> 赞同：1
> 
> 时间：2013-02-06T00:18:38.983
> 
> 标签：text, antlr, lexer

我正在尝试使用 C 目标更改令牌的文本。

来自 SETTEXT 宏的文档：“但是，如果您希望更改令牌所代表的文本，您可以使用此宏来明确设置它。”

```
TOKEN: 'token' { SETTEXT("text"); } 
```

SETTEXT 需要一个 pANTLR3_STRING。如何为字符串文字提供一个？

还是有另一种方法可以做到这一点..？

谢谢

# php - 真烦人的未定义变量错误

> ID：14719434
> 
> 赞同：-4
> 
> 时间：2013-02-06T00:18:55.123
> 
> 标签：php, mysql, sql

所以我有以下代码

```
$query=mysql_query("SELECT * FROM `phones` JOIN manufacturer USING (ManufacturerID) JOIN operatingsystem USING (OSID) WHERE PhoneID=$id");
$row=mysql_fetch_object($query);
echo mysql_error();

while($row=mysql_fetch_array($result))
{ ?>
<div class="phones">
<?php
echo "<img src=\"images/phones/".$row['LargeImg']."\"/>";
echo "<h2>";
echo "$row->Name $row->Model";
echo "</h2>";
echo "<p>";
echo "<ul>";
echo "<li>Running $row->OSName</li>";
echo "<br />";
echo "<li>$row->ScreenSize Display</li>";
echo "<br />";
echo "<li>$row->StorageSize of Storage</li>";
echo "</p>";
echo "</ul>";
?>
</div>
<?php
}
mysql_close($con);
?> 
```

我收到错误 **通知：未定义变量：导致第 43 行上的 phone-details.php 警告：mysql_fetch_array() 期望参数 1 是资源，第 43 行上的 phone-details.php 中给出 null**

我想要它做的是在产品详细信息旁边显示图像（产品详细信息之前工作但后来我试图让图像工作并且它坏了）。文件名存储在名为 LargeImg 的字段中，图像文件本身存储在 images/phones 文件夹中。我将如何解决此问题，以便错误消失并为数据库中的每条记录显示图像？代码越简单越好。

谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-06T00:51:10.357

```
$row=mysql_fetch_object($query);
echo mysql_error();

while($row=mysql_fetch_array($result)) 
```

无论您将如何使用 mysql_* 函数进行演讲。$result 未定义。它什么都没有。通常人们过去常常做这样的事情：

```
$result = mysql_query("QUERY");
while($row=mysql_fetch_array($result)){
//do stuff
} 
```

我的朋友，您正在混淆您的功能。另外请不要使用 mysql_* 函数，因为它们已被弃用！:)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-06T00:25:41.133

使用`$query`变量作为参数`mysql_fetch_array`。该参数必须是 mysql_query 引用。

`$result`从来没有在这里定义..

# html - 设计一个 CSS 菜单栏，0 边距，但仍有差距

> ID：14719438
> 
> 赞同：1
> 
> 时间：2013-02-06T00:19:17.367
> 
> 标签：html, css, menu

我已经在这个菜单栏上工作了一段时间，我无法摆脱我的菜单栏和主体 div 之间大约 5 像素的间隙。

我知道这不是 div 之前的换行符（我查找的类似问题之一），因为当我删除菜单栏时，div 位于页面顶部。

我还尝试在与我的菜单相关的每个项目中设置 0 个边距。我不知道我在这里做错了什么。

这是测试页面：www.PartyArtisans.com/blank.php 这是我的 CSS 样式表： http: [//www.partyartisans.com/style.css](http://www.partyartisans.com/style.css) 这是我的菜单栏 CSS。

```
#menu ul,
#menu li,
#menu span,
#menu a {
  padding: 0;
  position: relative;
}
#menu:after,
#menu ul:after {
  content: '';
  display: block;
  clear: both;
}

body {
        background-color: #95BDFF;
}

#menu {
    font-family: Helvetica, sans-serif;
    font-size: 18px;
    line-height: 24px;
    text-align: center;
    margin:0px auto 0px auto;
}
#menu ul ul {
    display: none;
}
#menu ul li:hover > ul {
    display: block;
}
#menu ul {
    background: #FFFFFF;
    background: linear-gradient(top, #FFFFFF 10%, #b87adfc 100%);
    background: -moz-linear-gradient(top, #FFFFFF 10%, #b87adfc 100%);
    background: -webkit-linear-gradient(top, #FFFFFF 10%,#b87adfc 100%);
    box-shadow: 0px 0px 9px rgba(0,0,0,0.15);

    padding:0px 20px 0px 20px;
    margin:0px 0px 0px 0px;
    -webkit-border-bottom-right-radius: 15px;
    -webkit-border-bottom-left-radius: 15px;
    -moz-border-radius-bottomright: 15px;
    -moz-border-radius-bottomleft: 15px;
    border-bottom-right-radius: 15px;
    border-bottom-left-radius: 15px;
    list-style: none;
    position: relative;
    display: inline-table;
    width:920px;
                        }
#menu ul:after {
    content: "";
    clear: both;
    display: block;
}
#menu ul li {
    width:20%;
    float:left;
}
#menu ul li:hover {
    background: #FFFFFF;
    background: linear-gradient(top, #FFFFFF 0%, #CCF0FF 100%);
    background: -moz-linear-gradient(top, #FFFFFF 0%, #CCF0FF 100%);
    background: -webkit-linear-gradient(top, #FFFFFF 0%,#CCF0FF 100%);
    background-image: linear-gradient(#FFFFFF, #CCF0FF);
    filter: progid:DXImageTransform.Microsoft.gradient( startColorstr='#FFFFFF', endColorstr='#CCF0FF',GradientType=0 ); /* IE6-9 */

}
#menu ul li:hover a {
    color: #00C5FC;
}
#menu ul li a {
    width:auto;
    display: block;
    padding: 10px 10px;
    color: #00C5FC;
    text-decoration: none;
}
#menu ul ul {
    width:auto;
    background: #E8F8FF;
    border-radius: 0px;
    padding: 0;
    position: absolute;
    top: 100%;
}
#menu ul ul li {
    width:auto;
    float: none;
    border-top: 1px solid #6b727c;
    border-bottom: 1px solid #575f6a;
    position: relative;
}
#menu ul ul li a {
    width:350px;
    color: #00C5FC;
}
#menu ul ul li a:hover {
    background: #333399;
    color: #EEFFFF;
} 
```

这是html，虽然我不认为这与它有任何关系：

```
<nav id="menu">
    <ul>
        <li><a href="index.php">Home</a></li>
        <li><a href="#">Information</a>
            <ul>
                <li><a href="DanielPeterse.php">About Dan The Balloon Man</a></li>
                <li><a href="Jobs.php">Looking for a job?</a></li>
            </ul>
        </li>
        <li><a href="#">Services</a>
            <ul>
                <li><a href="BalloonTwisting.php">Balloon Twisting Entertainment</a></li>
                <li><a href="FacePainting.php">Face Painting</a></li>
                <li><a href="InteractiveMusic.php">Interactive Music with Miss Mary Kate</a></li>               
                <li><a href="HouseBand.php">Party Artisans Cover Band</a></li>
                <li><a href="Decor.php">Balloon Decor and Large Sculptures</a></li>
            </ul>
        </li>
        <li><a href="Reviews.php">Reviews</a></li>
        <li><a href="Booking.php">Book us!</a></li>
    </ul>
</nav> 
```

我知道这有点乱，我复制了它并修改了一段时间，以便在我去的时候学习 CSS。

* * *

已解决：我在下载 Firebug 后设法弄明白了。我变了

```
line-height: 24px; 
```

至

```
line-height: 10px; 
```

以及它看起来如何我希望它看起来如何。*耸耸肩*

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-06T00:29:49.447

`line-height: 24px;`在`#menu`div 中替换为`line-height: 0px;`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-06T00:35:58.973

编辑您的 style.css（信息取自网站，而不是此处发布的代码）

你已经告诉#MainBody 周围有一个 5pix 边框

```
#MainBody { 
background-image: url("http://www.partyartisans.com/icons/pattern8-pattern-43aSunset.png");
border-bottom-color: white;
border-bottom-style: solid;
border-bottom-width: 5px;
border-left-color: white;
border-left-style: solid;
border-left-width: 5px;
border-right-color: white;
border-right-style: solid;
border-right-width: 5px;
border-top-color: white; // get rid of this line
border-top-style: solid; // and this
border-top-width: 5px; // and this one too
margin-bottom: 0px;
margin-left: auto;
margin-right: auto;
margin-top: 0px;
vertical-align: top;
width: 900px;
} 
```

MainBody 框应连接到菜单

# c - 为什么 tasklist_lock 使用 write_lock_irq 而不是 write_lock？

> ID：14719439
> 
> 赞同：1
> 
> 时间：2013-02-06T00:19:25.030
> 
> 标签：c, linux, locking, kernel

在 Linux Kernel 中，读/写自旋锁用于同步访问任务列表。然而，read_(un)lock 用于读取，而 write_(un)lock_irq 用于写入。为什么在锁定写入时需要禁用中断？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-06T08:28:32.170

对于曾经在 IRQ 上下文中使用过的锁，IRQ 在持有时必须被禁用。但是有不同的方法可以实现这一点。

（我描述的是自旋锁，读/写锁在这方面是一样的）

*   `spin_[un]lock`不要禁用 IRQ。仅当您知道它们已被禁用时才使用它们（例如在中断处理程序中）。
*   `spin_[un]lock_irq`禁用/启用 IRQ。只有在调用函数之前知道它们没有被禁用时才使用它们。
*   `sping[un]lock_irq[save|restore]`- 禁用 IRQ，然后返回之前的状态。无论 IRQ 状态如何，都可以使用（成本很低）。

我猜你看到的差异是由于不同的调用上下文，而不是读/写差异。

# iphone - 当系统改变屏幕亮度时，iOS 是否会发送通知？

> ID：14719443
> 
> 赞同：6
> 
> 时间：2013-02-06T00:20:00.693
> 
> 标签：iphone, ios, ipad, brightness, uiscreen

问题是，我的阅读应用程序有一个按钮，可以将其置于黑暗主题模式。亮度降低 10%。当用户返回正常模式时，它被设置回记忆的亮度。但与此同时，实际系统亮度可能会因自动亮度调整或用户进入设置并在那里更改而发生变化。

亮度属性的问题是您只查询实际的屏幕亮度，而您设置的任何内容都只是暂时的，直到用户锁定屏幕。解锁后系统恢复为系统亮度。

如果 iOS 在系统更改亮度时会发送通知，那将很有帮助。在文档中找不到关于此的任何内容。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-02-06T00:33:00.723

搜索`UIScreenBrightnessDidChangeNotification`哪个是`UIScreen`类的一部分。它适用于 iOS 5.0 及更高版本。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2016-04-21T15:56:16.120

如果您想在设备再次解锁时将亮度设置回编程值，请观察`UIApplicationDidBecomeActiveNotification`通知并在选择器中将亮度设置回您想要的级别。

我对整个亮度问题进行了更多研究，这就是我发现的：

仅当`UIScreenBrightnessDidChangeNotification`系统更改亮度或用户从控制面板或设置更改亮度时才会调用。不是当您以编程方式更改亮度时。

我从这里的 Apple Doc 中假设[（](https://developer.apple.com/library/ios/documentation/UIKit/Reference/UIScreen_Class/#//apple_ref/occ/instp/UIScreen/brightness)见下文）是，在您以编程方式设置亮度后，亮度将不再改变。

> 无论应用程序是否关闭，应用程序所做的亮度更改都会一直有效，直到设备被锁定。系统亮度（用户可以在“设置”或“控制中心”中设置）在下次打开显示器时恢复。

但是我发现这不是真的（或者我误解了它）。`UIScreenBrightnessDidChangeNotification`以编程方式设置亮度后，亮度确实会发生变化（并且会被调用）。然而，它只有在系统认为它应该增加或减少亮度时才会被调用（由于环境亮度的变化）*。如果环境的亮度保持不变，您的屏幕将保持与您以编程方式设置的一样亮。

这是什么意思？嗯，有两件事：

*   如果您想将亮度保持在您以编程方式设置的级别，无论环境如何变化，您都必须在`UIScreenBrightnessDidChangeNotification`每次调用时观察并将亮度重置为您想要的级别。
*   如果你想回到“系统”亮度，那你真的做不到，因为如果环境发生变化，你根本无法判断系统亮度是多少（因为你每次都在重置它）。为此，您有 2 个选项。
    1.  在以编程方式设置亮度并将其设置回该值之前，请记住亮度。或者
    2.  将亮度设置为 0.5，让系统开始工作。

这两种情况下的“危险”是它将保持在您设置的值上，直到检测到环境亮度变化。

*有两种特殊情况......当您将亮度设置为 0.0 并且系统认为它应该降低亮度时，没有任何反应，因为它已经处于 0.0。其次，当您将其设置为 1.0 时，无论环境如何变化，它都将保持在 1.0。

# c# - C# TextMetrics 属性如何工作？

> ID：14719445
> 
> 赞同：1
> 
> 时间：2013-02-06T00:20:04.527
> 
> 标签：c#

我无法弄清楚 C# TextMetrics 属性是如何工作的。下面的示例，我在某处找到并稍作修改，做了一些事情，但无论我在文本框中设置什么字体，结果似乎都是 7。

```
TextMetrics metrics;
VisualStyleRenderer renderer = new VisualStyleRenderer(VisualStyleElement.TextBox.TextEdit.Normal);
using (IDeviceContext context = textBox1.CreateGraphics() as IDeviceContext)
{
    metrics = renderer.GetTextMetrics(context);
}
int averageWidth = metrics.AverageCharWidth;
textBox1.Text = averageWidth.ToString(); // 7 
```

MSDN 没有提供任何示例，我也没有在任何其他网站上找到任何可以理解的内容。有人可以解释这是如何工作的吗？

PS：我想使用所有的 TextMetrics 属性。不仅仅是AverageCharWidth。

更新：我正在编写一个字体查看器，使用私有字体集合。我想尽可能多地获取有关每种字体的信息。然后我可以决定在字体查看器中包含什么有用，什么不是。

我的字体查看器提醒 Bitstream Font Navigator ( [http://noscope.com/2004/font-management-solution/](http://noscope.com/2004/font-management-solution/) )，但我想包含有关字体的更多信息。

更新：我可以使用 FontFamily 方法来获取一些信息，正如 Olivier Jacot-Descombes 在他的回答中指出的那样，但不是全部。我想我需要使用 TextMetrics 来获取有关例如 PitchAndFamily、MaxCharWidth 和 AverageCharWidth 的信息。还是有其他简单的方法来获取这些信息？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-06T17:05:24.273

您可以像这样检索字体指标

```
var font = new System.Drawing.Font("Arial", 11f);
var style = System.Drawing.FontStyle.Regular;
var ff = font.FontFamily;
int ascent = ff.GetCellAscent(style);
int descent = ff.GetCellDescent(style);
int height = ff.GetEmHeight(style);
int lineSpacing = ff.GetLineSpacing(style);
float pointSize = font.SizeInPoints; 
```

有关详细信息，请参阅[如何：获取](http://msdn.microsoft.com/en-us/library/xwf9s90b.aspx)MSDN 上的字体度量。

# ios - 与“集合......在枚举时发生突变”崩溃

> ID：14719447
> 
> 赞同：2
> 
> 时间：2013-02-06T00:20:10.950
> 
> 标签：ios, ios5

崩溃后出现此错误：

```
malloc: *** error for object 0x75617b4: incorrect checksum for freed object - object was probably modified after being freed.
*** set a breakpoint in malloc_error_break to debug
2013-02-05 19:15:44.950 BusinessIdea[3171:15e03] *** Terminating app due to uncaught exception 'NSGenericException', reason: '*** Collection <__NSSetM: 0x72dc5c0> was mutated while being enumerated.' 
```

我不熟悉这个错误。知道它可能是什么吗？

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2013-02-06T00:27:43.380

整个“在枚举时修改”错误意味着您可能在迭代集合时尝试从集合中删除某些内容。例如

```
for(NSString *str in array){
     if([str isequalToString:@"delete me"]){
         [array removeObject:str];   //this will cause a problem,
     }
} 
```

如果要使用快速枚举循环，则需要构建要删除的项目列表，然后在迭代步骤后将其删除。如果要删除循环主体中的项目，替代方法是使用传统的索引 for 循环。

# knockout.js - 淘汰赛映射 ObservableArray 不包含我的对象

> ID：14719454
> 
> 赞同：0
> 
> 时间：2013-02-06T00:20:51.703
> 
> 标签：knockout.js, knockout-mapping-plugin

我正在尝试将计算添加到使用 Knockout 映射填充的子视图模型中。当我闯入时，我看到角色数组正确填充在 javascript 数组中，但在我的视图模型中，可观察数组的长度始终为 0。

这是一个显示它的jsfiddle。对我所缺少的任何帮助将不胜感激。

[http://jsfiddle.net/spbrogan/aREpY/](http://jsfiddle.net/spbrogan/aREpY/)

这是子视图模型

```
var userModel = function(data) {
    data.createDate = new Date(data.createDate);

    ko.mapping.fromJS(data, {}, this);

    this.isAdmin = ko.computed(function() {
        var admin = false;
        ko.utils.arrayForEach(this.role(), function(role) {
            if(role.name == "Admin") {
                admin = true;
             }
         });
         return admin;
    }, this);
} //close userModel 
```

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-06T03:55:36.610

映射运行后，它会从您的 JS 中创建可观察对象——不仅是根对象，还包括其中的所有属性。可观察对象是一个函数，因此您需要使用 () 形式访问名称：

```
ko.utils.arrayForEach(this.role(), function(role) {
    if(role.name() == "Admin") {
         admin = true;
    }
}); 
```

这是一个更新的小提琴：http: [//jsfiddle.net/aREpY/41/](http://jsfiddle.net/aREpY/41/)

# magento - 从控制器保存付款信息

> ID：14719458
> 
> 赞同：0
> 
> 时间：2013-02-06T00:21:13.567
> 
> 标签：magento, model, controller, payment

我正在尝试从控制器保存付款信息，通常我在模型中执行此操作：

```
$payment->setTransactionAdditionalInfo(Mage_Sales_Model_Order_Payment_Transaction::RAW_DETAILS,$raw); 
```

但是在模型中我收到 $payment 作为参数，现在我正在尝试这个

```
$order = $this->getOrder();
$payment = $order->getPayment();
$payment->setTransactionAdditionalInfo(Mage_Sales_Model_Order_Payment_Transaction::RAW_DETAILS,$raw); 
```

但是不工作，知道怎么做吗？

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-06T00:52:55.900

问题已解决，必须先运行 addTransaction()

```
$payment->addTransaction ( Mage_Sales_Model_Order_Payment_Transaction::TYPE_AUTH, null, false, null ); 
```

# apache - 在一个 VPS 上托管两个域 - 第二个域不工作

> ID：14719467
> 
> 赞同：0
> 
> 时间：2013-02-06T00:22:06.937
> 
> 标签：apache, dns, hosting, vps

```
NameVirtualHost *:80

<VirtualHost *:80>
DocumentRoot /var/www/joshhornby
ServerName joshhornby.com
ServerAlias www.joshhornby.co.uk
</VirtualHost>

<VirtualHost *:80>
DocumentRoot /var/www/designerschool
ServerName designer-school.com
ServerAlias www.designer-school.com/
</VirtualHost> 
```

我正在尝试从一台 vps 服务器运行两个域

这是我在 httpd.config 文件中的设置。当我加载 joshhornby.co.uk 时，它按预期工作。我在 Designerschool 中放置了一个 index.html 文件，当我在其中输入 URL 时，它不会加载。我已经做好了`service httpd restart`

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-06T00:33:53.767

在查看了 www.joshhornby.co.uk 和 www.designer-school.com 的 A 记录后，他们看不到指向同一个地方。确保 www.designer-school.com 的 A 记录与 joshhornby.co.uk 指向同一个地方 ( `141.101.116.48`)，你应该没问题。

您的配置也可能如下所示（根据[Apache 文档](http://httpd.apache.org/docs/2.2/vhosts/name-based.html)）：

```
<VirtualHost *:80>
DocumentRoot /var/www/joshhornby
ServerName www.joshhornby.co.uk
</VirtualHost>

<VirtualHost *:80>
DocumentRoot /var/www/designerschool
ServerAlias www.designer-school.com
</VirtualHost> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-06T03:43:27.350

保留“ServerAlias”条目没有问题。joshhornby.co.uk 和 design-school.com 都指向同一个主机吗？因为它们指向不同的IP地址。如果是，那么试试这个：

```
Server configuration

Listen 80

# This is the "main" server running on 172.20.30.40
ServerName server.domain.com
DocumentRoot /www/mainserver

# This is the other address
NameVirtualHost 172.20.30.50

<VirtualHost 172.20.30.50>
DocumentRoot /www/example1
ServerName www.example.com

# Other directives here ...

</VirtualHost>

<VirtualHost 172.20.30.50>
DocumentRoot /www/example2
ServerName www.example.org

# Other directives here ...

</VirtualHost> 
```

从[这里挑选](http://httpd.apache.org/docs/2.2/vhosts/examples.html#twoips)

# cloud-foundry - 在 bosh 部署期间，从哪里同步 blob？

> ID：14719473
> 
> 赞同：2
> 
> 时间：2013-02-06T00:23:28.803
> 
> 标签：cloud-foundry

这是我一两天前提出的问题，而且回答起来非常困难，所以我会在这里发布答案，邀请任何人补充我的答案或提供更好的答案。

[vcap-services](https://github.com/cloudfoundry/vcap-services)和[cf-release](https://github.com/cloudfoundry/cf-release)的 github 存储库不包含这些服务的 blob；例如，在[cf-release/packages/redis26/spec](https://github.com/cloudfoundry/cf-release/blob/master/packages/redis26/spec)中引用的 redis-2.6.2.tar.gz 文件不在存储库中的任何位置。应该是这样 - 那些 tar 文件不属于 github。在`bosh deploy`它们被同步到我的 cf-release/blob 目录中。但从哪里来？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-06T00:23:28.803

当我准备将我们要添加到内部云代工厂云中的自定义系统服务的所有点点滴滴放入 github 存储库时，这个问题就出现了。我应该将 blob 放在哪里，以便我的同事可以克隆和部署我们的 cf-release 而无需将 blob 放入某些地方的丑陋步骤？

如前所述，在 a 期间`bosh deploy`，您可以看到 blob 同步。好吧，如果您使用 cf-release 并进行少量更改，它将从位于[http://blob.cfblob.com](http://blob.cfblob.com)的公共 blobstore（在撰写本文时和 Atmos 之一）中下载它们。[您可以在cf-release/config/final.yml](https://github.com/cloudfoundry/cf-release/blob/master/config/final.yml)文件中找到此配置。

将我们的 blob 放在哪里的问题的答案涉及更多，从[这里](https://groups.google.com/a/cloudfoundry.org/forum/?hl=en&fromgroups=#!topic/bosh-users/9YuPz1RCFuA)看来，“复合版本”是答案的一部分——但这是另一个话题。

# ruby-on-rails - 在测试控制器时与 rspec 分配混合

> ID：14719476
> 
> 赞同：4
> 
> 时间：2013-02-06T00:23:45.940
> 
> 标签：ruby-on-rails, rspec, controller, assign

我正在尝试处理测试控制器，到目前为止，我似乎被困在最简单的问题上。

文档控制器：

```
 def edit
      @document = Document.find(params[:id])
    end 
```

文档控制器规格：

```
 describe 'GET #edit', focus: true do
      before(:each) { @doc = FactoryGirl.create(:document)}

      it "should assign @document to the document" do
        get :edit, id: @doc
        assigns(:document).should eq(@doc)
      end
    end 
```

总是返回假。@document 总是分配为零。我尝试将 params[id] 指定为 @doc.id，但这并不能解决任何问题。我在这里做错了什么？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-02-06T09:21:17.247

从 rspec 的角度来看，您在行中比较的两个文档（分配给 @doc）：

```
assigns(:document).should eq(@doc) 
```

不一样 - 它们在数据库中具有相同的 ID，但是您要比较的实际 ruby​​ 对象是不同的，因为一个是在您的“之前”块中创建的，而另一个可能是在 GET 请求执行时在控制器内部实例化的在你的测试中。

我的猜测是以下将起作用：

```
assigns(:document).id.should eq(@doc.id) 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-06T05:58:54.167

尝试改变

```
get :edit, id: @doc 
```

到

```
get :edit, id: @doc.id 
```

基本上，它只需要 id 来构建路由。

# php - 从 id 相同的其他表中提取名称/值

> ID：14719477
> 
> 赞同：1
> 
> 时间：2013-02-06T00:23:48.617
> 
> 标签：php, mysql, sql, select

经销商表

```
name          id
usf south     1
usf north     2
usf east      3
usf west      4 
```

小木桌

```
distributor    itemname
1              cheese
1              apples
3              oranges
2              pineapples 
```

我目前在页面上的每个项目名称显示的“ogi table”中的“distributor”列中找到了数字。但是，我想将此编号更改为正确的分销商名称，可在“分销商表”中找到。我怎样才能做到这一点？

感谢您的帮助。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-06T00:27:03.537

```
SELECT  a.*, b.*
FROM    distributors a
        INNER JOIN ogi b
            ON a.id = b.distributor 
```

*   [SQLFiddle 演示](http://www.sqlfiddle.com/#!2/ee7ef/1)

要全面了解联接，请访问以下链接：

*   [SQL 连接的可视化表示](http://www.codeproject.com/Articles/33052/Visual-Representation-of-SQL-Joins)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-06T00:35:59.457

如果您有兴趣只替换查询而不替换任何下划线编程，这可能是一个可行的解决方案：

```
SELECT
    ogi.itemname,
    distributors.name AS distributor
FROM
    ogi
INNER JOIN
    distributors
    ON
    ogi.distributor = distributors.id 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-06T00:25:30.687

本教程将向您展示如何归档它。

[http://www.tizag.com/mysqlTutorial/mysqljoins.php](http://www.tizag.com/mysqlTutorial/mysqljoins.php)

# php - Foreach从数组数据php循环进入表

> ID：14719478
> 
> 赞同：0
> 
> 时间：2013-02-06T00:23:49.263
> 
> 标签：php, multidimensional-array, foreach

我有一个像这样的数组：var_export():

> 数组 ( 2009 => 数组 ('Jan' => 数组 ('AMT' => '79', 'QTY' => '886', ), 'Apr' => 数组 ('AMT' => '0', 'QTY' => '1', ), 'May' => 数组 ('AMT' => '19', 'QTY' => '216', ), 'Jun' => 数组 ('AMT' => '5', 'QTY' => '60', ), 'Sep' => 数组 ('AMT' => '20', 'QTY' => '196', ), 'Oct' => 数组 (' AMT' => '0', 'QTY' => '1', ), 'Feb' => 数组 ('AMT' => 0, 'QTY' => 0, ), 'Mar' => 数组 (' AMT' => 0, 'QTY' => 0, ), 'Jul' => 数组 ('AMT' => 0, 'QTY' => 0,), 'Aug' => 数组 ('AMT' => 0, 'QTY' => 0, ), 'Nov' => 数组 ('AMT' => 0, 'QTY' => 0, ), 'Dec ' => 数组 ('AMT' => 0, 'QTY' => 0, ), ), 2010 => 数组 ('Mar' => 数组 ('AMT' => '12', 'QTY' => ' 131', ), 'Apr' => 数组 ('AMT' => '0', 'QTY' => '1', ), 'Jun' => 数组 ('AMT' => '6', 'QTY ' => '65', ), 'Jul' => 数组 ('AMT' => '24', 'QTY' => '205', ), 'Aug' => 数组 ('AMT' => '20 ', 'QTY' => '169', ), 'Sep' => 数组 ('AMT' => '0', 'QTY' => '1', ),'Oct' => 数组 ('AMT' => '106', 'QTY' => '1118', ), 'Nov' => 数组 ('AMT' => '85', 'QTY' => '902 ', ), 'Dec' => 数组 ('AMT' => '0', 'QTY' => '2', ), 'Jan' => 数组 ('AMT' => 0, 'QTY' => 0, ), 'Feb' => 数组 ('AMT' => 0, 'QTY' => 0, ), 'May' => 数组 ('AMT' => 0, 'QTY' => 0, ), ), 2011 => 数组 ('Mar' => 数组 ('AMT' => '0', 'QTY' => '3', ), 'Sep' => 数组 ('AMT' => '74', 'QTY' => '582', ), 'Oct' => 数组 ('AMT' => '6', 'QTY' => '60', ),'Nov' => 数组 ('AMT' => '46', 'QTY' => '462', ), 'Jan' => 数组 ('AMT' => 0, 'QTY' => 0, ), 'Feb' => 数组 ('AMT' => 0, 'QTY' => 0, ), 'Apr' => 数组 ('AMT' => 0, 'QTY' => 0, ), 'May' = > 数组 ('AMT' => 0, 'QTY' => 0, ), 'Jun' => 数组 ('AMT' => 0, 'QTY' => 0, ), 'Jul' => 数组 (' AMT' => 0, 'QTY' => 0, ), 'Aug' => 数组 ('AMT' => 0, 'QTY' => 0, ), 'Dec' => 数组 ('AMT' => 0, '数量' => 0, ), ), )数组 ('AMT' => 0, 'QTY' => 0, ), 'Feb' => 数组 ('AMT' => 0, 'QTY' => 0, ), 'Apr' => 数组 ('AMT ' => 0, 'QTY' => 0, ), 'May' => 数组 ('AMT' => 0, 'QTY' => 0, ), 'Jun' => 数组 ('AMT' => 0 , 'QTY' => 0, ), 'Jul' => 数组 ('AMT' => 0, 'QTY' => 0, ), 'Aug' => 数组 ('AMT' => 0, 'QTY' => 0, ), 'Dec' => 数组 ('AMT' => 0, 'QTY' => 0, ), ), )数组 ('AMT' => 0, 'QTY' => 0, ), 'Feb' => 数组 ('AMT' => 0, 'QTY' => 0, ), 'Apr' => 数组 ('AMT ' => 0, 'QTY' => 0, ), 'May' => 数组 ('AMT' => 0, 'QTY' => 0, ), 'Jun' => 数组 ('AMT' => 0 , 'QTY' => 0, ), 'Jul' => 数组 ('AMT' => 0, 'QTY' => 0, ), 'Aug' => 数组 ('AMT' => 0, 'QTY' => 0, ), 'Dec' => 数组 ('AMT' => 0, 'QTY' => 0, ), ), )=> 0, 'QTY' => 0, ), 'Jun' => 数组 ('AMT' => 0, 'QTY' => 0, ), 'Jul' => 数组 ('AMT' => 0, 'QTY' => 0, ), 'Aug' => 数组 ('AMT' => 0, 'QTY' => 0, ), 'Dec' => 数组 ('AMT' => 0, 'QTY' = > 0, ), ), )=> 0, 'QTY' => 0, ), 'Jun' => 数组 ('AMT' => 0, 'QTY' => 0, ), 'Jul' => 数组 ('AMT' => 0, 'QTY' => 0, ), 'Aug' => 数组 ('AMT' => 0, 'QTY' => 0, ), 'Dec' => 数组 ('AMT' => 0, 'QTY' = > 0, ), ), )

我一直在使用一个只有一个嵌套数组的数组，并在这样的表中显示我的数据：

```
foreach($results as $key => $element){
    echo "<tr>";
    foreach($element as $subkey => $subelement){
        echo "<td width='20%'>$subelement</td>";
    }
    echo "</tr>";
} 
```

但是，现在我有 Year (2009,2010,2011) 并且不知道如何将它放入我的表中。在我刚刚显示 Month、Amt、Qty 之前......因此是上面的 foreach。

我想像这样显示它：

年份 | 月 | 安特 | 数量

我试图在 if 语句中捕捉年份，if(2009){show $subelement} 类型的想法......

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-06T00:31:19.693

您可能需要一个外部循环来循环这些年。假设您已经构建了表头，它可能如下所示：

```
foreach($results as $year => $year_data) {
    foreach ($year_data as $month => $month_data) {
        echo "<tr><td>$year</td><td>$month</td><td>{$month_data['AMT']}</td><td>{$month_data['QTY']}</td></tr>";
    }
} 
```

# linux - 使用 awk 检测正则表达式模式并逐行打印？

> ID：14719480
> 
> 赞同：0
> 
> 时间：2013-02-06T00:24:02.207
> 
> 标签：linux, sed, awk

我有一个这种格式的文本文件`[ONE testing 1 2 3] [TWO lorem ipsum] [ONE 123]`

我想逐行打印`[ONE.+]`。

一个示例输出是

```
[ONE testing 1 2 3]
[ONE 123] 
```

我试过`awk '/\[ONE.+\]/ { print $1 }'`了，但没有用。谁能教我为什么？正确的方法是什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-06T00:32:50.460

awk 逐行工作，因此表达式每行只匹配一次。要在 awk 中执行此操作，您可以`match`在循环中使用该函数。您还必须修改您的正则表达式以减少贪婪，因为您的表达式不会神奇地停在第一个]。

使用 grep 可能更容易：

```
echo  "[ONE testing 1 2 3] [TWO lorem ipsum] [ONE 123]" | grep -o '\[ONE[^]]*\]' 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-06T01:12:19.720

你可以试试这样的

```
sed -re 's/(\[ONE[^\[]*\])/\n\1\n/g' temp.txt 
```

输入

`[ONE testing 1 2 3] [TWO lorem ipsum] [ONE 123]`

输出

```
[ONE testing 1 2 3]
 [TWO lorem ipsum] 
[ONE 123] 
```

* * *

如果你想用 TWO 删除列，那么

```
sed -re 's/(\[ONE[^\[]*\])()/\n\1\n/g; s/(\[[^ONE][^\[]*\])//g' temp.txt 
```

输出

```
[ONE testing 1 2 3]

[ONE 123] 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-06T01:16:13.257

如果这是更大的一部分：

```
BEGIN { 
# Change the field-separator, from default blank, to the end-marker 
# for each "field"
    FS = "] "
}
# Get rid of lines which can't possibly match
!/\[ONE/ { next
    }
{
# Test and report each of three fields for starting with [ONE,
# "closing" the field with FS, except for the last which will 
# already be "closed"
if ( $1 ~ /^\[ONE/ ) {
    print $1 FS
    }
if ( $2 ~ /^\[ONE/ ) {
    print $2 FS
    }
if ( $3 ~ /^\[ONE/ ) {
    print $3
    }
} 
```

如果您愿意，可以在循环中将“if”替换为一个，但请注意最后一个，因为不需要 FS（字段分隔符）（除非您的数据中有尾随空白）。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-02-07T05:50:50.757

默认情况下，“awk”将“单个空格”作为分隔符，“print $1”命令尝试检索由默认分隔符分隔的第一个值。

试试这个：

假设有一个名为“test.txt”的文本文件，其中包含三行。

> > > > 猫测试.txt

[一次测试 1 2 3]

[两个 lorem ipsum]

[一123]

> > > > grep -h '[ONE*' test.txt

[一次测试 1 2 3]

[一123]

# jquery - 重复行

> ID：14719481
> 
> 赞同：0
> 
> 时间：2013-02-06T00:24:05.867
> 
> 标签：jquery, keypress, keyup

我在用户点击`enter`键时添加额外的表格行。

下面的代码表现得很奇怪。它根据键在输入字段中时按下键的次数来添加行。如果被击中
，我只想添加一行。`enter`

谁能告诉我下面的代码有什么问题？

```
$(document).on('keypress', '#quantity_sold', function () {
    var num = 0;
    console.log('key pressed');
    $(this).keypress(function (e) {
        var code = (e.keyCode ? e.keyCode : e.which);
        if (code == 13) {
            e.preventDefault();
            quantitySold = $("#quantity_sold").val();
            rowTotal = parseInt(quantitySold) * unitPrice;
            row = "";
            insertRow();
            console.log("Num inside if statement:" + num);

            $("#inventory_name").val("");
            $("#quantity_sold").val("");
            $("#inventory_name").focus();
            return false;
        }
        console.log("Num outside of if statement:" + num);
        num++;
    });
}); 
```

* * *

至少为此苦苦挣扎了 1 周，当我将代码粘贴到此处时，我发现了问题。

我刚刚删除了 $(this).keypress(function(e){ 这一行。这就是我需要做的。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-06T00:26:22.353

您每次都将`keypress`事件绑定到. 这就是触发的事件数量不断增加的原因。不要那样做。如果您只是删除包装器，这应该完全符合您的需要。`#quantity_sold``keypress``$(this).keypress(function(e){`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-06T00:36:18.927

摆脱重复的内部按键事件处理程序。将您的代码修改为：

```
 $(document).ready(function () {

        $("#quantity_sold").keypress(
            function (event) {

            var num = 0;
            console.log('key pressed');

            var code = (e.keyCode ? e.keyCode : e.which);

            if(code == 13){
                e.preventDefault();
                quantitySold= $("#quantity_sold").val();
                rowTotal = parseInt(quantitySold) * unitPrice;
                row = "";
                insertRow();
                console.log("Num inside if statement:" + num);

                $("#inventory_name").val("");
                $("#quantity_sold").val("");
                $("#inventory_name").focus();
                return false;
            }
          console.log("Num outside of if statement:" + num);
          num++;  

       }
  );

    }); 
```

# jquery - 自动完成 JSON 响应不起作用

> ID：14719488
> 
> 赞同：0
> 
> 时间：2013-02-06T00:24:39.777
> 
> 标签：jquery, json, autocomplete, response

我在 json 中得到响应（可以在 firebug 中检查），但这不会解析 json 响应并且没有显示结果。我做错了什么？[我在文档http://docs.jquery.com/Plugins/Autocomplete](http://docs.jquery.com/Plugins/Autocomplete)上找不到任何东西

这是我的 JSON 响应

```
({"Contacts":[{"Phone":"","Email":"","Labels":"","Mobile":"12345678","Firstname":"john"}]}); 
```

这是我的 jQuery：

```
$("#destinations").autocomplete({
    source: function (request, response) {
        $.getJSON("http://localhost/contactApi.do?callback=?", 
          { 'contactMobile': request.term, maxRows: 12, style: "full" }, 
          function(data) {
              if(data.Contacts){
                  var x = $.map(data.Contacts, function(v, i){
                      console.log(v)
                      return {
                          label: v.Mobile + ' - ' + v.Firstname, 
                          v: v.Firstname
                      }
                  });
                  response(x);
              }
          }
        );        
    }
}) 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-06T00:39:16.370

有一次，问题出在服务器端，这发生在我身上。我将响应作为原始字符串而不是 JSON 发送。如果您能够看到从服务器发回的正确标头（内容类型：应用程序/json），请查看 firebug。此外，您应该能够使用 firebug 看到名为 JSON 的选项卡。添加正确的标头后，我能够使用 jQuery 反序列化这些值。

# javascript - 如何使用jQuery停止列表的最后三个元素的操作

> ID：14719495
> 
> 赞同：0
> 
> 时间：2013-02-06T00:26:20.260
> 
> 标签：javascript, jquery, class, animation

我有一些列表，我通过点击继续前进 - 动画右，左。还要更改一些类以识别位置和动作。当列表的最后三个元素将具有指定类时，我需要停止动画过程。所以我这样做了，但它仅适用于最后三分之一的后退元素。你能帮我吗？

```
if (!js_films_list_top.find('li').eq(-3,-2,-1).hasClass('focus')){
    js_short_movies_list.animate({left: '-=241'}, 300);
} 
```

谢谢帮助。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-06T00:29:08.207

`.eq`只接受一个论点。如果你想一次选择多个，试试这个：

```
.find('li:eq(-3), li:eq(-2), li:eq(-1)') 
```

或尝试

```
.find('li').slice(-3) 
```

# javascript - 使用媒体查询隐藏覆盖

> ID：14719499
> 
> 赞同：2
> 
> 时间：2013-02-06T00:26:27.210
> 
> 标签：javascript, jquery, html, css, extjs

当我们将浏览器大小缩小到iphone屏幕时，会出现一个菜单按钮......当我们单击按钮时，会出现覆盖层............但是当我们增加浏览器大小时会出现覆盖层......如何隐藏覆盖层...... rajdq0383@gmail.com

[http://jsfiddle.net/QYvrt/17/](http://jsfiddle.net/QYvrt/17/) [http://jsfiddle.net/QYvrt/17/embedded/result/](http://jsfiddle.net/QYvrt/17/embedded/result/)

```
@media (max-width: 767px) {

#rightSlider{
    border: 1px solid red;
}

#rightSlider{
            display:none !important;
          }
#rightSlider{ 
            display:inherit !important;
          }

}

#slidenav{
            display:none !important;
          }
#slidenav{ 
            display:inherit !important;
          }

} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-06T00:51:26.800

进行另一个媒体查询，说当宽度大于 x 宽度时去显示无

```
@media all and (max-width:300){show overlay}
    @media all and (max-width:1024){hide overlay} 
```

# python - SQLAlchemy 中查询的单元测试

> ID：14719507
> 
> 赞同：34
> 
> 时间：2013-02-06T00:27:11.627
> 
> 标签：python, unit-testing, sqlalchemy

如何在 SQLAlchemy 中测试查询？例如假设我们有这个`models.py`

```
from sqlalchemy import (
        Column,
        Integer,
        String,
)
from sqlalchemy.ext.declarative import declarative_base

Base = declarative_base()

class Panel(Base):
    __tablename__ = 'Panels'

    id = Column(Integer, primary_key=True)
    category = Column(Integer, nullable=False)
    platform = Column(String, nullable=False)
    region = Column(String, nullable=False)

    def __init__(self, category, platform, region):
        self.category = category
        self.platform = platform
        self.region = region

    def __repr__(self):
        return (
            "<Panel('{self.category}', '{self.platform}', "
            "'{self.region}')>".format(self=self)
        ) 
```

还有这个`tests.py`

```
import unittest

from sqlalchemy import create_engine
from sqlalchemy.orm import sessionmaker

from models import Base, Panel

class TestQuery(unittest.TestCase):

    engine = create_engine('sqlite:///:memory:')
    Session = sessionmaker(bind=engine)
    session = Session()

    def setUp(self):
        Base.metadata.create_all(self.engine)
        self.session.add(Panel(1, 'ion torrent', 'start'))
        self.session.commit()

    def tearDown(self):
        Base.metadata.drop_all(self.engine)

    def test_query_panel(self):
        expected = [Panel(1, 'ion torrent', 'start')]
        result = self.session.query(Panel).all()
        self.assertEqual(result, expected) 
```

当我们尝试运行测试时，它失败了，即使两个面板看起来相同。

```
$ nosetests
F
======================================================================
FAIL: test_query_panel (tests.TestQuery)
----------------------------------------------------------------------
Traceback (most recent call last):
  File "/Users/clasher/tmp/tests.py", line 31, in test_query_panel
    self.assertEqual(result, expected)
AssertionError: Lists differ: [<Panel('1', 'ion torrent', 's... != [<Panel('1', 'ion torrent', 's...

First differing element 0:
<Panel('1', 'ion torrent', 'start')>
<Panel('1', 'ion torrent', 'start')>

  [<Panel('1', 'ion torrent', 'start')>, <Panel('2', 'ion torrent', 'end')>]

----------------------------------------------------------------------
Ran 1 test in 0.063s

FAILED (failures=1) 
```

我发现的一个解决方案是对我希望在查询中找到的每个实例进行查询：

```
class TestQuery(unittest.TestCase):

    ...

    def test_query_panel(self):
        expected = [
            (1, 'ion torrent', 'start'),
            (2, 'ion torrent', 'end')
        ]
        successful = True
        # Check to make sure every expected item is in the query
        try:
            for category, platform, region in expected:
                self.session.query(Panel).filter_by(
                        category=category, platform=platform,
                        region=region).one()
        except (NoResultFound, MultipleResultsFound):
            successful = False
        self.assertTrue(successful)
        # Check to make sure no unexpected items are in the query
        self.assertEqual(self.session.query(Panel).count(),
                         len(expected)) 
```

不过，这让我觉得非常难看，而且我什至没有达到我想要测试的复杂过滤查询的地步。有没有更优雅的解决方案，还是我总是必须手动进行一堆单独的查询？

* * *

## 回答 #1

> 赞同：34
> 
> 时间：2013-02-06T00:43:17.990

您的原始测试在正确的轨道上，您只需要做两件事之一：要么确保`Panel`具有相同主键标识的两个对象比较为`True`：

```
class Panel(Base):
    # ...

    def __eq__(self, other):
        return isinstance(other, Panel) and other.id == self.id 
```

或者您可以组织您的测试，以确保您检查的是同一个`Panel`实例（因为在这里我们利用了[身份映射](http://martinfowler.com/eaaCatalog/identityMap.html)）：

```
class TestQuery(unittest.TestCase):
    def setUp(self):
        self.engine = create_engine('sqlite:///:memory:')
        self.session = Session(engine)
        Base.metadata.create_all(self.engine)
        self.panel = Panel(1, 'ion torrent', 'start')
        self.session.add(self.panel)
        self.session.commit()

    def tearDown(self):
        Base.metadata.drop_all(self.engine)

    def test_query_panel(self):
        expected = [self.panel]
        result = self.session.query(Panel).all()
        self.assertEqual(result, expected) 
```

就引擎/会话设置/拆卸而言，我会选择一种模式，在该模式下，您对所有测试使用单个引擎，并假设您的架构是固定的，所有测试都使用一个架构，然后您确保您工作的数据with 在可以回滚的事务中执行。`Session`可以通过将`commit()`整个测试包装在显式的`Transaction`. [https://docs.sqlalchemy.org/en/latest/orm/session_transaction.html#joining-a-session-into-an-external-transaction-such-as-for-test-suites](https://docs.sqlalchemy.org/en/latest/orm/session_transaction.html#joining-a-session-into-an-external-transaction-such-as-for-test-suites)上的示例说明了这种用法。每个测试夹具上都有一个“:memory:”引擎会占用大量内存，并且不会真正扩展到除 SQLite 之外的其他数据库。

# java - 用 Java 播放 .mp3

> ID：14719508
> 
> 赞同：0
> 
> 时间：2013-02-06T00:27:13.123
> 
> 标签：java, audio, mp3, wav, javasound

我知道这个问题之前[已经在这个网站上被问](https://stackoverflow.com/questions/6045384/playing-mp3-and-wav-in-java)过，但我的问题有点偏离它。

我想在`.mp3`不使用外部 Java 库（例如`javafx`. 这有可能吗？如果有，你是怎么做到的？我没有反对图书馆`javafx`，我只是想知道用于教育目的。

我知道使用这些`javax`库可以`.wav`很容易地播放文件。

```
public void playSound() {
try {
    AudioInputStream audioInputStream = AudioSystem.getAudioInputStream(new File("D:/Music/test.wav").getAbsoluteFile());
    Clip clip = AudioSystem.getClip();
    clip.open(audioInputStream);
    clip.start();
    } catch(Exception e) {
    e.printStackTrace();
    }
} 
```

如果您只能`.wav`使用此库播放文件，为什么只有一种文件类型？仅仅是开发人员的选择，还是在选择这种文件类型时有某种策略？`.wav`通过访问其他文件类型的文件是否有一些速度优势？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-06T00:28:08.703

据我所知，MP3 受专利保护，不能包含在标准编解码器中。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-06T00:30:22.067

> 这可能吗..？

直到/除非 Oracle 在 J2SE 中为其提供 SPI，如[Java Sound 标记中所述。维基](https://stackoverflow.com/tags/javasound/info)。鉴于汤姆解释的情况，我会说这将是“永远不会”。

> 如果您只能使用此库播放 .wav 文件，为什么只有一种文件类型？

同样，请参阅 Wiki，了解如何获取 J2SE 为其提供内置支持的类型。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-05-22T18:05:17.220

有一个小型 java 库，提供所有源代码，并包含支持 mp3 甚至 MIDI 文件的声音播放器。它非常易于使用，并且您拥有所有可用的代码。如果你想尝试：http: [//imr-lib.blogspot.com](http://imr-lib.blogspot.com)

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-07-01T09:30:13.877

如果没有额外的库，您**将无法**在 Java 中播放 mp3 文件。时期。

但是，有许多不同的库支持 Java mp3：

*   已经提到 JavaFX（Oracle 开始将 JavaFX 与 Java 7 捆绑在一起，因此它很容易获得）。
*   [Javazoom](http://www.javazoom.net/javalayer/javalayer.html)，似乎在 2008 年就被抛弃了。
*   几个[FFmpeg](http://www.ffmpeg.org/)包装器，例如[Xuggle](http://www.xuggle.com)，通常需要您学习新的 API，因为它们没有实现[javax.sound.sampled.spi](http://docs.oracle.com/javase/7/docs/api/javax/sound/sampled/spi/package-summary.html)。[您可以在此处](http://www.ffmpeg.org/projects.html)找到基于 FFmpeg 的项目列表。
*   适用于 OS X 和 Windows 的[SampledSP库。](http://www.tagtraum.com/sampledsp.html)`javax.sound.sampled.spi`这是在不同程度上实现的库的集合（完全公开 - 我写了它们）。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-02-17T08:41:45.373

有一个简单的库叫做 jlayer [http://www.javazoom.net/javalayer/javalayer.html](http://www.javazoom.net/javalayer/javalayer.html)

# asp.net-mvc - @helper 和 Url.Action

> ID：14719512
> 
> 赞同：5
> 
> 时间：2013-02-06T00:27:37.977
> 
> 标签：asp.net-mvc

我正在尝试将一些简单的代码提取到一个单独的辅助函数中

```
 @helper ShowPath()
    {
    <p class="migas">
    <a href="@Url.Action("Index", "Home")">Home</a>
   &gt; <a href="@Url.Action("Index", "AboutUs")">About Us</a>
   &gt; Directory</p>
} 
```

在原始 cshtml 文件中工作正常，但是当我将 @Url.Action 提取到我放在 App_Code 文件夹中的单独文件中时，它会导致编译错误。

我需要从调用页面传入 HTMLHelper 吗？如果是这样，有什么想法吗？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-02-06T00:36:40.490

你需要传递`UrlHelper`给你的方法

```
@helper ShowPath(UrlHelper url)
{
    <p class="migas">
    <a href="@Url.Action("Index", "Home")">Home</a>
   &gt; <a href="@url.Action("Index", "AboutUs")">About Us</a>
   &gt; Directory</p>
} 
```

然后从一个角度来看，

```
@YouAppCodeName.ShowPath(Url) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-06T01:13:44.243

尝试这个

```
@using System.Web.Mvc
@using System.Web.Mvc.Html

@helper ShowPath(WebViewPage page)
{
  <p class="migas">
  <a href="@page.Url.Action("Index", "Home")">Home</a>
  &gt; <a href="@page.Url.Action("Index", "AboutUs")">About Us</a>
  &gt; Directory</p>
} 
```

当您在页面上调用它时，将*其*作为参数发送。如果您将来需要它们，它可以让您访问所有助手。

# emacs - 为什么我得到我的 emacs 标签不是有效的标签表？

> ID：14719515
> 
> 赞同：7
> 
> 时间：2013-02-06T00:27:58.663
> 
> 标签：emacs, ctags

我只是尝试通过运行以下命令为 emacs 生成一些标签：

```
ctags -e --extra=+q --sort=yes -R /codebase/one /codebase/two /usr/include /usr/include/c++ 
```

我把它放在我的主目录的某个子目录中。然后我导航到，比如说，代码库/一个并`M-x visit tags-table`加载并加载那个，它抱怨：

```
File /home/palchan/.tags/tags is not a valid tags table 
```

为什么这不是一个有效的标签表？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-02-06T03:14:04.343

尝试删除该`--sort=yes`选项。

这为我解决了`ctags`5.8（最新）和 5.5.4（随我的 Linux 版本分发）版本的问题。

您还可以尝试`ctags`Emacs 附带的二进制文件，它可能与 Emacs 二进制文件位于同一目录中。注意：命令行选项略有不同。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2020-05-15T07:38:25.357

尝试使用 -e 选项 *-e 输出标记文件以与 Emacs 一起使用。*

# ios - 在 Cocos2d 中重复播放时粒子设计器 plist 但在像爆炸一样单次运行时却没有

> ID：14719516
> 
> 赞同：0
> 
> 时间：2013-02-06T00:28:00.933
> 
> 标签：ios, xcode, cocos2d-iphone, ccparticlesystem

我在 Cocos2d 中有一个粒子设计器 plist，当我使用“循环”或重复自身的 plist（例如彩虹）时播放正常，但在单次显示（例如爆炸）时不显示。

我在香草模板中使用 cocos2d 2.0，并在粒子设计器工具中创建了一个 plist。

我在 iOS 5.1 中使用以下代码......我错过了什么吗？

```
-(void)ccTouchesBegan:(NSSet *)touches withEvent:(UIEvent *)event {

CCParticleSystemQuad *particle = [CCParticleSystemQuad particleWithFile:@"explosion.plist"]; //alt plist working with rainbow.plist
        particle.position = ccp(240,160);
        [self addChild:particle z:20];
        particle.autoRemoveOnFinish = YES; 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-12T01:35:34.843

似乎它与混合功能有关，我不明白（配置屏幕的右下角）。为了其他人的利益，除了建议将这些更改为 GL_ONE 使其可见之外，我没有低级别的解释。不能假设因为它显示在设备上的 PD 模拟器中。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-07T19:57:55.273

您是否验证过触摸事件正在触发？

一件事让我很早就对粒子设计师产生了兴趣，那就是你设置的位置对于具有宽度和高度的粒子系统确实很重要。根据您的设置方式，您的粒子系统很可能位于远离屏幕的位置。尝试将 plist 文件中的 x 和 y 更改为 0 和 0，看看是否有帮助。

我可能会尝试的最后一件事是将 zOrder 设置为 99999。

# ios - 如何更改 UITableView 的高度？

> ID：14719517
> 
> 赞同：-3
> 
> 时间：2013-02-06T00:28:01.147
> 
> 标签：ios, objective-c, xcode

我相信我用这个

```
- (CGFloat) tableView: (UITableView *) tableView heightForRowAtIndexPath: (NSIndexPath *) indexPath 
```

但是，我不确定如何实现这一点。我有一个放在 UITableView 上方的按钮，用于添加一行。手动降低 UITableView 不起作用。谢谢您的帮助。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-02-06T00:31:54.060

如果您使用的是`UITableViewController`，则无法调整`tableView`关联的大小。您将需要使用一个简单的`UIViewController`并在其上手动添加一个`tableView`，然后您就可以根据需要调整它的大小

编辑：正如@Jeremy 所指出的，如果您`UITableViewController`完全以编程方式创建，您将能够`tableView`简单地调整您的`self.tableView.frame = CGRectMake(x, y, width, height)`.

但是，如果您使用 Storyboard 或 XIB，您似乎`tableView`既不能使用 Interface Builder 也不能以编程方式调整大小。

# javascript - 光标指针出现的描述文本

> ID：14719520
> 
> 赞同：0
> 
> 时间：2013-02-06T00:28:10.540
> 
> 标签：javascript, jquery, css

可能这很容易，但我无法让它工作：

使用以下`title`属性，我可以在定义的可点击区域上显示描述文本：

```
$("#myElement").attr('title', ‘description text’); 
```

是否可以执行上述操作，而不是`title`使用“手指”光标的属性？

可能如下：

```
$("myElement").cursor("pointer") 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-06T00:31:09.313

是的，但我会推荐 css over js：

```
#myelement {
    cursor:pointer
} 
```

不确定您是否正在寻找在 js 中执行这两种操作的最简洁的方法，如果是这样，那么这将非常接近：

```
$('#myElement').title('text here').css('cursor','pointer'); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2014-05-02T04:26:05.957

```
 $( ".boxClose" ).text( "Title" ).css( 'cursor', 'pointer' );
   $("#myElement").append($(".boxClose"));

 <style>
 .boxClose{
  position:absolute;
  top:0px;
  width:100%;
  height:10px;
 }
 </style> 
```

使用 append 添加文本并将其更改为 cursor .. jquery awesome ..

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-06T00:33:34.580

我不明白标题和光标之间有什么关系，但您可以使用以下方法更改 jQuery 中的样式：

```
$("myElement").css('cursor', 'pointer') 
```

请注意，HTML 属性和样式之间有一个重要区别。 `title`是一个属性，通过`.attr`.

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-02-06T00:33:17.163

如果你真的需要用 javascript 改变元素的 css 属性，你可以在 jquery中使用[.css()函数](http://api.jquery.com/css/)

```
$("myElement").css("cursor", "pointer") 
```

# qt - Qt TextEdit 平滑滚动

> ID：14719523
> 
> 赞同：2
> 
> 时间：2013-02-06T00:28:30.300
> 
> 标签：qt, scroll, qplaintextedit

在 Qt 中，是否可以在文本区域中进行“平滑滚动”？我的意思是，有一个名为“代码编辑器”的 Qt 演示，它`QPlainTextEdit`用于可编辑的文本区域。当我滚动该区域时，它总是一次跳过一整行，即最上面的行总是完全显示。

例如，在 HTML 中，文本区域“平滑地”滚动其内容，也就是说，它的内容甚至可以滚动一个像素，从而使上面的行部分隐藏。

在 Qt 中有可能有这种行为吗？也许通过使用不同的小部件？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-15T15:18:18.743

`QTextEdit`在“syntaxhighlighter”示例中平滑滚动。

# c++ - 如何转换 std::vector 向量 不抄袭？

> ID：14719529
> 
> 赞同：17
> 
> 时间：2013-02-06T00:29:11.687
> 
> 标签：c++, vector, std

我找不到那个问题，这是我面临的一个实际问题。

我有一个文件加载实用程序，它返回`std::vector<unsigned char>`包含整个文件内容。但是，处理函数需要 contiguos 数组`char`（并且**不能**更改 - 它是一个库函数）。由于使用处理函数的类无论如何都会存储数据的副本，因此我想将其存储为`vector<char>`. 这是可能更具说明性的代码。

```
std::vector<unsigned char> LoadFile (std::string const& path);

class Processor {
    std::vector<char> cache;
    void _dataOperation(std::vector<char> const& data);

public:
    void Process() {
        if (cache.empty())
            // here's the problem!
            cache = LoadFile("file.txt");

        _dataOperation(cache);
    }
}; 
```

此代码无法编译，因为（显然）没有适当的转换。但是，我们可以肯定，临时向量将占用相同数量的内存 (IOW `sizeof(char) == sizeof(unsigned char)`)

天真的解决方案是迭代临时的内容并转换每个字符。我知道在正常情况下，`operator= (T&&)`会被调用。

在我的情况下，重新解释转换是安全的，因为我确信我只会读取 ASCII 字符。`_dataOperation`无论如何，任何其他角色都会被抓住。

所以，我的问题是：**如何以不涉及复制的方式正确安全地转换临时向量？**

如果不可能，我更喜欢安全的复制方式，而不是不安全的非复制方式。我也可以更改`LoadFile`为返回`vector<char>`或`vector<unsigned char>`。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-05-20T00:54:01.540

在 C++11 中，[basic.lval]p10 说，

> 如果程序尝试通过非下列类型之一的泛左值访问对象的存储值，则行为未定义：
> 
> *   ...
> *   char 或 unsigned char 类型。

（具体位置在其他版本的C++中可能有所不同，但意思是一样的。）

这意味着您可以使用 a`vector<unsigned char> cache`并使用 range 访问其内容`[reinterpret_cast<char*>(cache.data()), reinterpret_cast<char*>(cache.data()) + cache.size())`。（@Kerrek SB 提到了这一点。）

如果您存储 a`vector<unsigned char>`以`Processor`匹配 的返回类型`LoadFile`，并且`_dataOperation()`实际上采用了一个数组`char`（意思是 a`const char*`和一个大小），那么您可以在将参数传递给`_dataOperation()`

但是，如果专门`_dataOperation()`获取 a`vector<char>`并且您存储了 a `vector<unsigned char> cache`，那么您**将无法**通过它`reinterpret_cast<vector<char>&>(cache)`。（即@André Puel 是完全错误的。不要听他的。）这违反了别名规则，编译器会在凌晨 2 点试图激怒你的客户。（如果你的编译器的这个版本不能管理它，下一个版本将继续尝试。）

正如您所提到的，一种选择是模板`LoadFile()`并让它返回（或填充）您想要的类型的向量。另一种是复制结果，其简洁版本再次是`reinterpret_cast`源向量的`.data()`. [basic.fundamental]p1 提到“对于字符类型，对象表示的所有位都参与值表示。”，这意味着您不会丢失数据`reinterpret_cast`。我没有看到一个坚定的保证，即 an 的任何位模式都不会`unsigned char`导致陷阱 if `reinterpret_cast'ed`to `char`，但我不知道有任何现代硬件或编译器可以做到这一点。

# java - 我应该在只为 Android 修改 XML 的同时编辑 Java 文件吗？

> ID：14719532
> 
> 赞同：0
> 
> 时间：2013-02-06T00:29:30.237
> 
> 标签：java, android, eclipse

我的印象是布局 XML 文件内置在它们各自的活动`*.java`文件中，使用 XML 意味着我不应该接触`/src`.

但是，每次我修改 XML（例如更改布局、添加/删除按钮等）时，Java 文件似乎都没有重新构建。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-06T00:33:56.280

Java 文件完全独立于布局 XML 文件，因为更改 XML 不会神奇地使 Java 文件运行。XML 布局用于 UI 和 Java 文件（如果是 Activity），将 UI 设置为布局文件并处理逻辑。

更具体一点：Java 文件（用于 Activity）包含一些重要部分：即设置内容视图（通过`setContentView()`* 和 * 使用 findViewById() 访问 UI 组件。没有源文件，应用程序将无法运行, XML 依赖于源。

如果您要更改 XML 布局中的内容并将其重新上传到您的手机，根本不接触 Java 文件，**并且**Java 文件具有`setContentView(R.layout.your_xml_layout)`，请重建并重新清理（`Project -> Clean`在 Eclipse 中）您的项目。

另一方面，如果您制作了一个新的 XML 文件（例如 my_new_layout），则必须修改源代码。

例如

```
@Override
public void onCreate(Bundle b)
{
  super.onCreate (b);
  setContentView (R.layout.my_new_layout);
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-06T00:32:14.453

你的印象是错误的。您需要同时修改 XML 和 Java 文件。

# scheme - 在此示例中将 lambda 作为参数传递

> ID：14719535
> 
> 赞同：1
> 
> 时间：2013-02-06T00:29:48.493
> 
> 标签：scheme

以下过程随机选择包含一个称为选择的过程：

```
(define (random-choice strategy-1 strategy-2) 
 (choice strategy-1
 strategy-2
 (lambda (ship-state) (= (random 2) 0)))) 
```

如何创建随机选择两种策略的程序选择？您还可以解释如何将 lambda 作为参数从一个过程传递到另一个过程吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-06T01:25:39.410

下面是一个示例，说明如何在两个可能值之间随机选择一个值：

```
(define (choice s1 s2)
  (if (zero? (random 2)) s1 s2)) 
```

该过程返回随机选择的值，取决于您如何使用它。并且 a`lambda`可以作为任何其他值的参数传递，它没有任何不同。例如：

```
((choice (lambda (x) (first x))
         (lambda (x) (last  x)))
 '(1 2 3 4 5)) 
```

以上将在选择列表中第一个或最后一个元素的策略之间随机选择，然后将选择应用于列表。运行几次，你会看到有时`1`返回，有时`5`返回。

# java - 我应该将图像存储在我的内容管理系统的什么位置？

> ID：14719541
> 
> 赞同：0
> 
> 时间：2013-02-06T00:30:56.793
> 
> 标签：java, jakarta-ee, content-management-system

我正在开发一个内容管理系统，我决定将我的图像存储在硬盘上而不是数据库上。

但是有一个问题，这里是：

当我开发系统时，我在本地服务器上对其进行编程，然后将其上传到远程服务器上。如果图像存储在 Web 应用程序目录中的硬盘驱动器上，它们将在我部署新版本时自动删除。所以问题是我应该在哪里准确存储图像？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-06T00:42:04.857

您有很多选择，这取决于您需要多少存储空间。假设您使用的是 linux 服务器（EC2？），您应该在单独的磁盘上创建一个挂载，并让 Web 服务器进程访问该磁盘。将其挂载在 /data 之类的地方。如果您在 EC2 上，则可以为此挂载使用 EBS 卷，如果以后需要更多磁盘空间，则可以轻松升级它（将其复制到新卷并将其移动到挂载点）

或者，很多人使用 S3 来存储文件，因为它很便宜，您可以获取图像的 url，并使用亚马逊的 CDN 轻松地将其放在前面。

# java - Java中的这个表达式有什么问题？

> ID：14719547
> 
> 赞同：0
> 
> 时间：2013-02-06T00:31:27.450
> 
> 标签：java, string, concatenation

我想制作一个表达式，如果将其放入代码中，则打印第一个字符的第一个字符，然后是句点，然后是第二个字符的第一个字符，依此类推，直到第三个。

```
first.substring(0, 1) + "." + second.substring(0, 1) + "." + third.substring(0, 1) 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-06T00:40:09.013

> 使用字符串连接打印第一个字符的第一个字符后跟一个句点，然后第二个的第一个字符后跟一个句点，然后第三个的第一个字符后跟一个句点。所以如果 first=guy, second=person, third=thing 它会打印 gpt

```
first.charAt(0)+"."+second.charAt(0)+"."+third.charAt(0); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-06T00:37:24.470

您可以尝试使用 charAt 方法。

first.charAt(0) 应该首先返回第一个字符。

或者第一、第二和第三可能未在上下文中定义，请确保您使用与网站预期相同的变量名称和大小写。

# android - Android IAB 3 购买签名验证失败

> ID：14719552
> 
> 赞同：3
> 
> 时间：2013-02-06T00:32:01.490
> 
> 标签：android, in-app-purchase, in-app-billing

我收到此错误：无法查询库存：IabResult：刷新库存时出错（查询拥有的项目）。（响应：-1003：购买签名验证失败）。这是由 result.isFailure() 返回 false 引起的：

```
// Listener that's called when we finish querying the items we own
    IabHelper.QueryInventoryFinishedListener mGotInventoryListener = new IabHelper.QueryInventoryFinishedListener() {
        public void onQueryInventoryFinished(IabResult result, Inventory inventory) {
            Log.d(TAG, "Query inventory finished.");
            if (result.isFailure()) {
                complain("Failed to query inventory: " + result);
                return;
            }

            Log.d(TAG, "Query inventory was successful.");
            MainActivity.this.inventory = inventory;
        }
    }; 
```

我正在使用示例代码中的 IabHelper。我正在为我的应用程序使用许可证密钥，并且正在使用新的开发者控制台预览版。我也等了大约4个小时。

```
02-05 16:16:18.158: D/IabHelper(7243): Billing service connected.
02-05 16:16:18.158: D/IabHelper(7243): Checking for in-app billing 3 support.
02-05 16:16:18.168: D/Finsky(7267): [3600] InAppBillingService.getPreferredAccount: com.onescreen.naturewindow: Account from first account - [NMkNGmwqV_NmltnM8wpDMymSozQ]
02-05 16:16:18.168: D/IabHelper(7243): In-app billing version 3 supported for com.onescreen.naturewindow
02-05 16:16:18.168: D/MainActivity(7243): Setup finished.
02-05 16:16:18.168: D/MainActivity(7243): Setup successful. Querying inventory.
02-05 16:16:18.168: D/IabHelper(7243): Starting async operation: refresh inventory
02-05 16:16:18.168: D/IabHelper(7243): Querying owned items...
02-05 16:16:18.168: D/IabHelper(7243): Package name: com.onescreen.naturewindow
02-05 16:16:18.168: D/IabHelper(7243): Calling getPurchases with continuation token: null
02-05 16:16:18.168: V/Wifi-Receiver(7243): You have wifi
02-05 16:16:18.168: D/Finsky(7267): [3601] InAppBillingService.getPreferredAccount: com.onescreen.naturewindow: Account from first account - [NMkNGmwqV_NmltnM8wpDMymSozQ]
02-05 16:16:18.168: D/Finsky(7267): [3601] InAppBillingService.getPreferredAccount: com.onescreen.naturewindow: Account from first account - [NMkNGmwqV_NmltnM8wpDMymSozQ]
02-05 16:16:18.168: D/IabHelper(7243): Owned items response: 0
02-05 16:16:18.178: E/IABUtil/Security(7243): Signature verification failed.
02-05 16:16:18.178: W/IABUtil/Security(7243): signature does not match data.
02-05 16:16:18.178: W/IabHelper(7243): In-app billing warning: Purchase signature verification **FAILED**. Not adding item.
02-05 16:16:18.178: D/IabHelper(7243):    Purchase data: {"orderId":"968536977714379","packageName":"com.onescreen.naturewindow","productId":"4965353","purchaseTime":1352405691000,"purchaseState":0,"purchaseToken":"hzfiqciitiuwohxygvoiejxx.AO-J1OwDaTeQEtYrTcAX6SmSCNhrriCcBFUHqJHH-X3ILO0nXCBeoAP4NR1TA-4zbYwV5tCM7Apf5XtuVM5tYdD1Qa3v06sFdKlBXfTesZMPmA7v73hGEFdSvVoACzvVtKgbjtFAb_DQ"}
02-05 16:16:18.178: D/IabHelper(7243):    Signature: J7BEM0slF+WjHcYtW4WPm8MQM3QHfloRFXPbkdQOaVaIuWRNcKohY8J46e1lVD/VAlzS/DQjhuVH+oH+YmSqYvTmUvtzoBRMiFejU+zs8zJ74MhPoz+TweZ0GLv5XIBViZi3YyKD3Ht/QJVk6gk4JmsMm88s27EZa/tZmA/09SJ1OiVYh9uXlENpX2U5wSUdd5VmLCdEmBwwGdZE/E3tN0ZTcewvcteukhl82XqIEt//Ag8sGcD/PPC1iNOT39h+ZxxExiMf4ds+G7IhEAHlxChCcAcCWbYbTMQSrrTMC40coxYfBh72wQkvWjMEDJaUc/YYTH0VjJ2qNh5PJuONLg==
02-05 16:16:18.178: E/IABUtil/Security(7243): Signature verification failed.
02-05 16:16:18.178: W/IABUtil/Security(7243): signature does not match data.
02-05 16:16:18.178: W/IabHelper(7243): In-app billing warning: Purchase signature verification **FAILED**. Not adding item.
02-05 16:16:18.178: D/IabHelper(7243):    Purchase data: {"orderId":"12999763169054705758.1340994679114311","packageName":"com.onescreen.naturewindow","productId":"4965354","purchaseTime":1354925460000,"purchaseState":0,"purchaseToken":"jdpbejopfmimosuoijjeqapb.AO-J1OwSnpLWGucDsEpQbO5ippAUS-HEiOJHCANVqH4iOCYv4h2J0xFWaNH2t3BntUKk9QQ7yc8PS8sGhJ19atZeB1_Lhf3BOCLbvUPPhJLQ6bAjexdDYUvk8JYDGhdqfgd8Z6ObKwkM"}
02-05 16:16:18.178: D/IabHelper(7243):    Signature: d5v3Bxxc+e5k85f1PQAAExmwvu77P52o7mrG8Kw+VYmcxGSF/T77FziigKdx4bYQCHjO3nPJfQSjbh4r59mSH+X3G/GHrqRxqumpykFExDyQRl0c21beZBncZVAljMuW3hCs4Y7pcrsIalR8pZjDaZeOF9DdVxQAeQnd9ps5LutGjiSV6fjcetBd922mZErgUxE2AVo/q84wFcqckDjdG0WafsHkq4K/ax7IYENCvKD2yaVYMSagTMc8MzcghCOtBSrDSm0c1V4iZROt+13eYeLlAgJfQEluNMfq0FaqXWKoox0Ms3WV6gG73a883ixArrr8p68mOzhfStnXaxLlIw==
02-05 16:16:18.178: D/IabHelper(7243): Continuation token: null
02-05 16:16:18.178: D/IabHelper(7243): Ending async operation: refresh inventory
02-05 16:16:18.248: V/PhoneStatusBar(544): setLightsOn(true)
02-05 16:16:18.298: D/MainActivity(7243): Query inventory finished.
02-05 16:16:18.298: E/MainActivity(7243): **** TrivialDrive Error: Failed to query inventory: IabResult: Error refreshing inventory (querying owned items). (response: -1003:Purchase signature verification failed) 
```

此外，当我尝试从商店购买托管商品时，我得到用户不允许购买错误。

编辑。所以我正在查看代码，想知道是否`String signature = signatureList.get(i)`应该看起来像一个数组：`{"orderId":"968536977714379","packageName":"com.onescreen.naturewindow","productId":"4965353","purchaseTime":1352405691000,"purchaseState":0,"purchaseToken":"hzfiqciitiuwohxygvoiejxx.AO-J1OwDaTeQEtYrTcAX6SmSCNhrriCcBFUHqJHH-X3ILO0nXCBeoAP4NR1TA-4zbYwV5tCM7Apf5XtuVM5tYdD1Qa3v06sFdKlBXfTesZMPmA7v73hGEFdSvVoACzvVtKgbjtFAb_DQ"}`

这是我正在谈论的行。[http://code.google.com/p/marketbilling/source/browse/v3/src/com/example/android/trivialdrivesample/util/IabHelper.java#758](http://code.google.com/p/marketbilling/source/browse/v3/src/com/example/android/trivialdrivesample/util/IabHelper.java#758)

# python - python中的参数模块？从对象导入函数

> ID：14719554
> 
> 赞同：3
> 
> 时间：2013-02-06T00:32:09.243
> 
> 标签：python, import

我有一个我想参数化的模块，或者更确切地说我想从一个对象中导入函数。

那就是我希望能够在我从中导入东西之前给它提供改变其行为的参数。

一种方法是让我的模块成为一个对象，然后只使用这些函数。目前我这样做：

```
class MyModule(object):
    def __init__(self, previous_sayings):
        self.sayings = previous_sayings
    __all__ = ['sayhi']
    def sayhi(self):
        self.sayings.append("hi!")

mod = MyModule(["oh no!"])
sayhi = mod.sayhi
sayhi()
sayhi()
print mod.sayings 
```

这应该打印出来`["oh no!", "hi!", "hi!"]`。

但是，您拥有的功能越多，效果就越差。

我希望能够做这样的事情：

```
mod = MyModule(["oh no!"])
from mod import * 
sayhi()
sayhi()

print mod.sayings 
```

这样的事情可能吗？我可以从基本模块继承吗？如果我添加对用户来说应该很明显的约束怎么办？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-06T00:52:21.407

关于模块，有几点需要了解：

*   它们是单例，这意味着无论您导入多少个地方，您都只会拥有其中一个

*   你不能传递参数

*   `from <module> import *`是危险的，不是一个好习惯，应该只与以这种方式设计的模块一起使用

*   在一个模块中定义的所有函数、类等都将始终将该模块视为它们的全局命名空间。

你可以得到类似于你想要的东西：

```
8<--mod.py------------------------------------------------------
sayings = []
def sayhi():
    sayings.append("Hi!")
8<--------------------------------------------------------------

import mod
mod.sayings = ['oh no!']   # or mod.sayings.append('oh no')
from mod import sayhi
sayhi()
sayhi()
print mod.sayings 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-06T00:43:29.523

您可以动态创建模块然后导入它。

[http://code.activestate.com/recipes/82234-importing-a-dynamically-generated-module/](http://code.activestate.com/recipes/82234-importing-a-dynamically-generated-module/)

虽然，我的建议是使用一个类。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-06T01:16:27.907

如果唯一的问题是：

```
sayhi=mod.sayhi()
saybye=mod.saybye()
# … 40 more functions 
```

比：

```
from mod import sayhi, saybye, # … 40 more functions 
```

更好的解决方案可能只是以编程方式进行导入：

```
for name in mod.__all__:
    locals[name] = getattr(mod, name) 
```

或者：

```
locals.update({name: getattr(mod, name) for name in mod.__all__}) 
```

# javascript - javascript在输入后更改输入颜色

> ID：14719557
> 
> 赞同：1
> 
> 时间：2013-02-06T00:32:21.063
> 
> 标签：javascript, jquery, javascript-events

我目前正在使用这个脚本，并且很想扩展它来改变已经填写的字段的颜色，请帮忙？谢谢

```
<script>
    $(document).ready(function(){
    $("input").focus(function(){
    $(this).css("background-color","#cccccc");
     });

    $("input").blur(function(){
     $(this).css("background-color","#ffffff");
     });
   });
</script> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-06T00:35:43.747

只需检查该字段是否填写模糊：

```
$("input").on('blur', function () {
    if ($(this).val()) {
        $(this).css("background-color","#0f0");
    }
    else {
        $(this).css("background-color","#fff");
    }
}); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-06T00:35:31.563

虽然这不是一个“为您编写脚本”的网站，但您提出了一个简单的问题，可以给出一个简单的答案。看看你是否能弄清楚为什么会这样，下一次，在你提出问题之前，试着把这个和你在网络上找到的其他代码的答案拼凑起来：

```
$("input").change(function(){ // this just checks if there's anything in the field
    if($(this).val().length > 0)) {
        $(this).css("background-color", "green"); // input has been filled
    } else {
        $(this).css("background-color", "red"); // input has not been filled
    }
}); 
```

# windows-phone-7 - WindowsPhone 周期任务仅适用于调试

> ID：14719558
> 
> 赞同：1
> 
> 时间：2013-02-06T00:32:22.173
> 
> 标签：windows-phone-7, windows-phone-7.1, windows-phone-8, windows-phone, windows-phone-7.1.1

有什么理由可以启动定期任务

```
ScheduledActionService.Add(task);
ScheduledActionService.LaunchForTest(taskname, milis); 
```

但是一旦我删除第二行，停止工作？

我已经等了**一个多小时**（因为正常时间是 30 多分钟），多次尝试摆弄代码，**但什么也没有**。一旦我取消注释调试行，按预期工作。

提前感谢您的帮助。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-08T04:48:55.363

实际上，我在 Windows Phone 开发中心论坛中找到了答案，在 2011 年的一篇帖子中，几位开发人员抱怨同样的问题。直到今天，还没有人回答为什么在某些设备（HTC 和诺基亚）上会发生这种情况，但简单的重启应该可以解决问题，至少是暂时的。

# linux-kernel - 在系统调用实现中测试否定或失败案例

> ID：14719560
> 
> 赞同：1
> 
> 时间：2013-02-06T00:32:29.130
> 
> 标签：linux-kernel, system-calls

这是我的实验室任务：我是内核空间的初学者。

我做了一个简单的系统调用实现，它按预期工作。但是，我想更进一步，研究向我的系统调用提供不正确的数据，看看它是否能处理它。

例如，我在系统调用中使用了 access_ok。我真的想传递一个无效的用户空间指针，看看我是否在系统调用中正确使用了 access_ok。

这个怎么做？我看到了，如果我传递内核空间指针，access_ok 将失败。但是我该如何编写驱动程序来做到这一点呢？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-06T05:02:35.800

当您尝试将无效的用户空间指针传递给宏**access_ok(type,addr,size);** .

所以它只是检查**提供的指针是否不在内核空间区域**中，如果它在内核空间内存中，那么它将返回零（0），否则它将返回 true，因此您可以通过这种方式检查您想要的结果。如果您是可以接受在内核内存之外提供任何地址（**提供的地址可能不是调用此系统调用的进程的地址空间，在这种情况下，作为 VERIFY_READ 或 VERIFY_WRITE 提供的类型将决定做什么**）。

从 access_ok() 的手册页参考[http://mirror.linux.org.au/linux-mandocs/2.6.12.6/access_ok.html](http://mirror.linux.org.au/linux-mandocs/2.6.12.6/access_ok.html)。**请注意，根据架构，此函数可能只是检查指针是否在用户空间范围内 - 调用此函数后，内存访问函数可能仍会返回 -EFAULT**

如果你想将指针传递给内核，那么你可以这样做 1-> 定义一个包含指针地址的结构。2-> 在内核模块或驱动程序中添加相同的结构。所以内核和用户知道这个结构。3-> 在系统调用中添加一个参数为`char __user var`. 4->在定义结构的用户空间中创建一个结构变量，并在您在用户空间应用程序中调用时将其传递给系统调用。5-> 在为您的系统调用定义代码的内核模块或驱动程序中，创建一个与您在用户空间中使用的结构相同的结构变量。现在做任何你想做的事。

`

```
struct new_struct
{
   void *p;  //set this pointer which you want to send...
};
    //from user-application...

    int main()
    {
       ....
       struct new_struct req_kernel;
       your_system_call_function(...,(void *)&req_kernel,...);
    }

    //this is inside your kernel...
         your_system_call(...,char __user optval,...)
         {
                .....
                struct new_struct req;
                if (copy_from_user(&req, optval, sizeof(req)))

                return -EFAULT;
                //now you have the address or pointer which you want in kernel with struct req...
        } 
```

`

# ios - SVG 作为背景图像在 ios 上崩溃 safari

> ID：14719566
> 
> 赞同：2
> 
> 时间：2013-02-06T00:33:04.330
> 
> 标签：ios, css, svg

我在网站上使用 SVG 精灵。它们在缩放页面之前呈现良好 - 几乎在 90% 的情况下 Safari 崩溃并进入桌面。这发生在 iPad 3 和 iPhone 4 上。有人遇到过同样的问题吗？在谷歌上找不到任何东西，也不知道从哪里开始。

精灵是这样创建的：

```
i.sprite {
    background-image: url("sprites.svg");
    background-repeat:no-repeat;
    display:inline-block;
    height: 28px;
    width: 29px;
    vertical-align:middle;
    font-style:normal;
    font-size:0;
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-06T10:25:43.897

不打算完全阻止你，但是在 webkit 上的 SVG 存在很多问题，无论是在 Chrome 和 Safari，桌面和移动设备上。除了不完整的实现，如果你想要完整的跨浏览器支持，必须忘记 SVG 的某些部分。我用简单的 foreignObject 元素使 webkit 崩溃：[http ://webkit-crasher.esviji.com/](http://webkit-crasher.esviji.com/)

[但是，我为http://gasteroprod.com/](http://gasteroprod.com/)右上角的 3 个图标使用了 SVG 图像精灵，没有任何问题：

![这是一个 SVG 精灵](../Images/47c24ac701d66fda3d88e2913aa8c04e.png)

# javascript - Spotify API - 获取有关用户专辑的信息

> ID：14719577
> 
> 赞同：0
> 
> 时间：2013-02-06T00:33:56.233
> 
> 标签：javascript, spotify

根据 Spotify API，我可以使用[Library](https://developer.spotify.com/technologies/apps/docs/dcdebc652c.html "Spotify API - 库对象")对象来获取用户在其库中拥有的所有专辑的数组。但是，当我输入以下初步代码时：

```
var sp = getSpotifyApi(1);
var models = sp.require("sp://import/scripts/api/models");
var userlib = models.library; 
```

然后调用相册属性：

```
document.write(userlib.albums); 
```

我什么也没得到，大概是因为专辑属性未定义。如果我在 Spotify 文档中列出的其他属性（包括`.artists`and ）上尝试它`.tracks`，它会做它应该做的事情：列出用户库中包含的每个艺术家/曲目。任何 Spotify 专家都知道为什么此专辑功能不存在以及它可能在哪里？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-06T08:21:05.250

遗憾的是，无法通过 API 获取专辑。文档绝对应该更新。看看[Spotify Apps API：Library-class won't return users Playlists](https://stackoverflow.com/questions/8627627/spotify-apps-api-library-class-wont-return-users-playlists) question。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-06T20:36:39.993

在经过大量漫无目的的搜索后，我找到了一种模糊的、未记录的方法来获取用户库中所有专辑的数组。在初次调用 Spotify 的 API 之后，通常是这样进行的：

```
var sp = getSpotifyApi(1); 
```

然后你可以拨打这个电话：

```
var albums = sp.core.library.getAlbums(); 
```

返回用户库中的专辑对象数组。您可以访问文档的相册对象中说明的方法和属性。

我不知道这是否是旧版本 Spotify API 的某种保留，但我希望它会继续存在，或者他们用更好的东西代替它。专辑作为一种数据对许多听众来说仍然非常重要，就像 Spotify 似乎想用播放列表来侵蚀它们一样。

# php - 在 HTML 中嵌入 PHP 页面

> ID：14719578
> 
> 赞同：0
> 
> 时间：2013-02-06T00:33:57.847
> 
> 标签：php, javascript, embed

我想使用 Javascript 将 PHP 页面嵌入到 HTML 中。我怎么做？

PHP 页面就是[这个](http://www.oddsnavigator.eu/all_matches_baby_goal.php/)页面 ，我希望它作为一个小部件，可以添加到各种网站上。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-02-06T00:36:11.800

使用 ajax 调用从 url 获取 php 页面，然后将 php 返回的 html 附加到 javascript 调用者页面上的元素。

在 jquery 中，它在 javascript 中看起来像这样：

```
$.ajax(
           { 
               url: 'path_to_your_file.php',
               type: "POST",
               success: function(data)
               {
                   $('#div_id').append(data);
               }
           }); 
```

这只是一个基本的例子。path_to_your_file.php 必须回显 html 以将其附加到该元素。不确定您是否使用 jquery，但这种方式相对简单。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-02-06T00:37:16.900

您可以将其嵌入 iframe 中：

```
<iframe src="http://www.oddsnavigator.eu/all_matches_baby_goal.php/">
    <a href="http://www.oddsnavigator.eu/all_matches_baby_goal.php/">View matches</a>
</iframe> 
```

内部部分适用于不支持框架的浏览器。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-06T00:42:50.740

[看到这个答案](https://stackoverflow.com/questions/2789604/insert-elements-at-script-tag-position)。如果您对 javascript 死心塌地，基本上您想要做的是将页面作为 iframe 包含在脚本的位置。

这与 Google 加载 Adsense 的方式相同。在 setTimeout anon 函数中，创建一个加载所需页面的 iframe。

如果您不一定需要使用 javascript，则可以按照 Yogu 的建议进行操作，只需使用硬编码的 iframe。

# repository - DDD 和 MVC：Contoller 从工厂而不是存储库获取 AggregateRoot？嗯？

> ID：14719580
> 
> 赞同：2
> 
> 时间：2013-02-06T00:34:37.230
> 
> 标签：repository, domain-driven-design, factory, aggregateroot

我最近开始了一个使用现有数据库（Oracle）和 MVC 4 的项目。已经发生了很多编码......但代码中没有“策略”......只有 DB -> ORM -> 控制器。因此，我正在尝试为开发添加一些闪光，并练习一些 DDD 开发技术。

我已经定义了几个聚合根，每个都有一个存储库，用于处理保存和删除（及其子）等。这些聚合根中的一个引用了另一个聚合根，它通过它处理它的“子对象”它。

例子：

```
A Client has one or more purchase orders which has Line Items, 
if a client wants to add a line item to the purchase order, 
it has to go through the purchase order. 
```

很好.. 客户 Aggregate Root，采购订单 Aggregate Root。

现在，一些服务也出现了，比如修改采购订单状态的服务，它消除了采购订单*AR*的负担，而且它很好、干净、有目的（它可以被其他“东西”用来更新采购订单的状态），（也许这应该是采购订单 AR 的一部分？一个小细节..）

存储库目前正在做他们的工作，即从数据库中持久化数据并用数据“填充” *AR*。当*AR* “保存”它时，存储库会保存任何需要保存的内容。*客户AR*使用采购订单存储库，因此客户可以加载它可能包含的任何采购订单。希望我走在正确的轨道上。

现在，进入MVC。所以我也有一些 ViewModel，它们基本上是关于需要向用户输出的内容的显示定义。Automapper 已经证明 frickin AWESOME，所以我可以“自动映射”到视图模型。不需要大脑，完美..

现在，真正让我失望的实施细节..

控制器目前正在通过一个客户端工厂工作，它返回一个客户端*AR*，然后它可以执行采购订单列表控制器需要做的任何事情，即管理相关的采购订单（作为一个整体，而不是采购订单的详细信息或本例中的数据）。

所以现在我想确保这是正确的..因为我看到的很多例子都有控制器与存储库而不是工厂一起工作，但我也看到工厂被推荐用于创建*AR* ..这让我相信在示例中，控制器正在处理聚合根，但是需要“消费者”的这种方式必须查询*AR*才能获取*AR*：

像：

```
Get the Client Aggregate where the ClientID is 15 
```

或者更好：

```
get the Client Aggregate, where the ClientID is 15 
and where active purchase orders > 0 ...or something.. 
```

这可能看起来像：

```
ClientAR = ClientRepository.GetClientByIDAndHasActivePurchaseOrders(15);
resultsImLookingFor = ClientAR.PurchaseOrders(); //or something 
```

我觉得在这种情况下，存储库会根据我的需要“填充”ClientAR，所以现在我有了这个 ClientAR 东西，它根据它的使用情况而有所不同，它对我来说很臭……

使用工厂“感觉更好”，因为我只是从工厂创建一个 ClientAR 然后使用它，它不会根据情况而改变.. 它就是这样..

```
ClientAR  = ClientFactory.CreateClient(15) // returns a ClientAR 
resultsImLookingFor = ClientAR.GetPurchaseOrdersByStatus(statusID); 
```

或者也许我完全想念它，我应该这样做::

```
ClientAR = ClientRepository.GetClientByID(15, PurchaseOrderSpec) 
```

我错过了事物的规范方面吗？（在这一点上，我还没有足够的能力真正开始使用规范（只是还），因为我需要让这些东西正常工作）

我尽量不陷入实施的细节，因为我的老板当然不会对我是怎么做的..到目前为止，至少在考虑 DDD 的情况下实施事情（希望我得到它）已经证明非常好的可测试性和责任的逻辑“边界”，这是由这种“模式”或“思维方式”产生的，我想我应该说..

那么，我是否正确地接近这个？如果它是有争议的，我可以接受。如果它只是简单的错误，那么指导肯定是值得赞赏的，如果我离得很远，如果背后有充分的理由，建设性的批评不会伤害我的感情。

提前致谢。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-02-06T04:40:20.850

> 因此，我正在尝试为开发添加一些闪光，并练习一些 DDD 开发技术。

Flare 通常不是项目的理想品质，并且可能适得其反，导致首字母缩写词驱动开发、简历驱动开发等。DDD 也是如此 - 不要在不了解缺点的情况下尝试应用 DDD 战术模式。

> 这些聚合根之一引用了另一个聚合根

AR 之间的引用应仅限于身份引用，而不是尽可能地引用对象。AR 应该定义一个一致性边界，该边界不一定会导致模型以最自然的方式反映现实。可以通过身份引用来表达客户和 PO 之间的关系 - PO 上有一个客户 ID。查看[Vaughn Vernon 的 Effective Aggregate Design](http://dddcommunity.org/library/vernon_2011)了解更多信息。

> 也许这应该是采购订单 AR 的一部分？

实体状态的任何修改都应由实体封装。域服务可以为实体提供功能，而该功能不适合现有实体。

> 存储库目前正在做他们的工作，即从数据库中持久化数据并用数据“填充”AR。当 AR“保存”它时，存储库会保存任何需要保存的内容。客户 AR 使用采购订单存储库，因此客户可以加载它可能包含的任何采购订单。希望我走在正确的轨道上。

AR、实体或值对象都不应引用存储库或调用其上的任何方法。存储库应由应用程序服务调用。客户端 AR 不太可能包含 PO 集合。相反，客户的采购订单列表应由采购订单存储库提供。关系仍然存在，它只是使用存储库而不是对象遍历来实现。其原因可以追溯到 AR 是一个一致性边界。

> 控制器当前正在通过客户端工厂工作

工厂应该只用于创建新实例，而不是访问持久化实例——这就是存储库的用途。您可以通过几种方式构建表示层 (MVC)。典型的 DDD 架构是让控制器引用应用程序服务。应用服务反过来通过协调存储库、工厂、基础设施服务和调用 AR 上的行为来实现特定的用例。假设您有一个客户创建新 PO 的用例。代码看起来像：

```
public ActionResult CreatePurchaseOrder(CreatePurchaseOrderViewModel viewModel)
{
   var poData = viewModel.CreatePurchaseOrderData();

   this.purchaseOrderAppService.CreatePurchaseOrder(viewModel.ClientId, poData);

   return RedirectToAction("Index");
}

...

public class PurchaseOrderAppService
{
  readonly IClientRepository clientDb;
  readonly IPurchaseOrderRepository poDb;

  public void CreatePurchaseOrder(int clientId, PurchaseOrderData poData)
  {
     var client = this.clientDb.Get(clientId);

     var purchaseOrder = PurchaseOrderFactor.Create(client, poData);

     this.poDb.Add(purchaseOrder);
     this.poDt.Commit(); // committing of Unit of Work should be moved up to infrastructure level
  }
} 
```

看看这个[DDDSample.Net 项目](https://github.com/SzymonPobiega/DDDSample.Net/tree/master/DDDSample-Vanilla)，它包含一个 DDD 项目的 MVC UI 实现。

# ruby - 从 Ruby HTTP 请求中获取响应标头

> ID：14719581
> 
> 赞同：29
> 
> 时间：2013-02-06T00:35:04.237
> 
> 标签：ruby, httprequest

我正在使用 Net::HTTP 向 Ruby 发出 HTTP 请求，但我不知道如何获取所有响应标头。

我试过了`response.header`，`response.headers`但没有任何效果。

* * *

## 回答 #1

> 赞同：57
> 
> 时间：2013-02-06T00:38:43.360

响应对象实际上包含标头。

有关更多信息，请参阅“ [Net::HTTPResponse](http://ruby-doc.org/stdlib-1.9.3//libdoc/net/http/rdoc/Net/HTTPResponse.html) ”。

你可以做：

```
response['Cache-Control'] 
```

您还可以在响应对象上调用`each_header`或`each`来遍历标头。

如果您真的想要响应对象之外的标头，请调用`response.to_hash`

* * *

## 回答 #2

> 赞同：15
> 
> 时间：2018-02-16T05:49:07.610

响应`Net::HTTPResponse`包含标题`Net::HTTPHeader`，您可以从`each_header`@Intrepidd 所说的方法中获取这些标题，该方法将返回一个枚举器，如下所示：

```
response.each_header

#<Enumerator: #<Net::HTTPOK 200 OK readbody=true>:each_header>
[
  ["x-frame-options", "SAMEORIGIN"],
  ["x-xss-protection", "1; mode=block"],
  ["x-content-type-options", "nosniff"],
  ["content-type", "application/json; charset=utf-8"],
  ["etag", "W/\"51a4b917285f7e77dcc1a68693fcee95\""],
  ["cache-control", "max-age=0, private, must-revalidate"],
  ["x-request-id", "59943e47-5828-457d-a6da-dbac37a20729"],
  ["x-runtime", "0.162359"],
  ["connection", "close"],
  ["transfer-encoding", "chunked"]
] 
```

您可以使用以下方法获取实际哈希`to_h`：

```
response.each_header.to_h

{
  "x-frame-options"=>"SAMEORIGIN", 
  "x-xss-protection"=>"1; mode=block", 
  "x-content-type-options"=>"nosniff", 
  "content-type"=>"application/json; charset=utf-8", 
  "etag"=>"W/\"51a4b917285f7e77dcc1a68693fcee95\"", 
  "cache-control"=>"max-age=0, private, must-revalidate", 
  "x-request-id"=>"59943e47-5828-457d-a6da-dbac37a20729", 
  "x-runtime"=>"0.162359", 
  "connection"=>"close", 
  "transfer-encoding"=>"chunked"
} 
```

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2014-11-08T19:55:22.937

请注意，该[`RestClient`](https://github.com/rest-client/rest-client)库具有预期的行为`response.headers`。

```
response.headers
{
                          :server => "nginx/1.4.7",
                            :date => "Sat, 08 Nov 2014 19:44:58 GMT",
                    :content_type => "application/json",
                  :content_length => "303",
                      :connection => "keep-alive",
             :content_disposition => "inline",
     :access_control_allow_origin => "*",
          :access_control_max_age => "600",
    :access_control_allow_methods => "GET, POST, PUT, DELETE, OPTIONS",
    :access_control_allow_headers => "Content-Type, x-requested-with"
} 
```

* * *

## 回答 #4

> 赞同：4
> 
> 时间：2018-11-28T09:10:20.820

如果您需要**用户友好的**输出，则`each_capitalized`可以使用：

```
response.each_capitalized { |key, value| puts " - #{key}: #{value}" } 
```

这将打印：

```
 - Content-Type: application/json; charset=utf-8
 - Transfer-Encoding: chunked
 - Connection: keep-alive
 - Status: 401 Unauthorized
 - Cache-Control: no-cache
 - Date: Wed, 28 Nov 2018 09:06:39 GMT 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2019-10-16T10:15:58.317

将其存储在哈希中 =>

```
response_headers = {}
your_object.response.each { |key, value|  response_headers.merge!(key.to_s => value.to_s) }

puts response_headers 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2020-07-04T02:59:07.533

[使用HTTParty](https://github.com/jnunemaker/httparty)作为替代方案也很容易实现这一点：

```
HTTParty.get(uri).headers 
```

# c# - 在 C# 中将关联数组作为函数参数发送到 SOAP

> ID：14719582
> 
> 赞同：0
> 
> 时间：2013-02-06T00:35:03.823
> 
> 标签：c#, php, generics, soap, dictionary

在 php 中，它看起来很简单，如下所示：

```
$client->map(array("abc" => "def", "zxc" => "vbn")); 
```

函数定义为：

```
function map($data) { 
```

主要问题是没有一个 c# 泛型是可序列化的，所以我不能以任何方式发送那种类型的数组。经过几天的艰苦思考，我没有主意了怎么办？

# javascript - jQuery Masonry 在不同的断点更新列宽

> ID：14719584
> 
> 赞同：2
> 
> 时间：2013-02-06T00:35:28.503
> 
> 标签：javascript, jquery, responsive-design, jquery-masonry

我正在使用 jQuery Masonry，我正在尝试根据窗口宽度更新列宽。我有这个工作没有任何简单的布尔问题：

`columnWidth: $(document).width() > 1280 ? 380 : 260`

我尝试了几种不同的方法来编写一种`else if`语句，以便我可以在多个 (3+) 断点处配置不同的值，但我一直在做空。我尝试了以下方法，但没有奏效：

```
var colWidth;
if ($(window).width() <= 599) { colWidth = 180; } 
else if ($(window).width() >= 600) { colWidth = 240; }
else if ($(window).width() >= 1280) { colWidth = 380; } 
```

`columnWidth: colWidth,`

有谁知道我怎么能做到这一点？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-07-25T22:42:49.653

如果需要，一种可行但不是很好的解决方案是重新创建砌体：

```
function getColWidth() {
    return (window.innerWidth <= 500) ? 62 : 75;
}

window.onresize = attemptSetColWidth;

var prevWidth = getColWidth();
function setColWidth() {
    if(prevWidth == getColWidth()) return;
    $container.masonry('destroy');
    $container = $('.productContainer').masonry({
        columnWidth: getColWidth(),
        gutter: 10,
    });
    $container.masonry('reloadItems');
    prevWidth = getColWidth();
}

var timeOutId;
function attemptSetColWidth() {
    clearTimeout(timeOutId);
    timeOutId = setTimeout(setColWidth, 500);
} 
```

# javascript - JQuery - 将多个文本输入传递给隐藏字段

> ID：14719588
> 
> 赞同：1
> 
> 时间：2013-02-06T00:35:46.337
> 
> 标签：javascript, jquery, html

恐怕我没有用 JQuery 做很多工作，并且无法在文档中找到答案。我正在尝试使用 JQuery 将多个文本输入传递给隐藏字段。到目前为止，我得到了以下内容：

```
<script type="text/javascript">
    $(function(){
        $('#textinput1').blur(function() {
            $('input[name=hiddenField]').val($('#textinput1').val());
        });
    });
</script> 
```

这适用于将单线拉到隐藏字段。但是，我还需要在隐藏字段中显示两个附加字段，以便隐藏字段的值代表所有这三个文本输入。有什么想法吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-06T00:39:08.337

这回答了你的确切问题。

```
$(function(){
        $('#textinput1,#textinput2,#textinput3').blur(function() {
            $('input[name=hiddenField]').val(
                      $('#textinput1').val() + " " + 
                      $('#textinput2').val() + " " + 
                      $('#textinput3').val());
        });
    }); 
```

但一般来说，除非有充分的理由不这样做，否则我们希望每个隐藏字段都有不同的隐藏字段。

# html - css图片定位问题

> ID：14719596
> 
> 赞同：0
> 
> 时间：2013-02-06T00:36:28.707
> 
> 标签：html, css

我正在尝试将我的徽标放在页面上，并将其向下和向左移动以与部分部分重叠。顶部没有问题，它根据需要与内容区域重叠，但我想将其移动到离开了，但是当我这样做时，部分文字被切断了..（保龄球应该是标志，但正如你所见，一半的 B 消失了..）不知道是什么原因造成的，需要帮助修理它。

*   页面背景为白色
*   包装纸是黑色的
*   我希望徽标的一部分位于黑色包装区域左侧的白色上（如图所示）

目前 ![目前](../Images/4219674633f906424c8f7fd7a3193412.png)

想要的样子 ![想要的样子！](../Images/0c68584c8e348e7122f0990ca0d6d8d3.png)

css 文件：

```
body{
    margin:0px 0px; padding:0px;
    text-align:center;
    background-color: white;
    color: white;
}
h1{
    font-size: 22px;
    font-weight: bold;
}

#Wrapper{
    width:900px;
    margin:0px auto;
    min-height:100%;
    text-align:left;
    padding:0px;
    border-width: 0px;
    overflow: auto;
}
#Header{
    background-color: white;
    width: 100%;
    min-height: 150px;
}

#ContentWrapper{
    text-align: center;
    background-color: black;
    height: 100%;
}

#Content{
    margin-left: 200px;
    text-align: left;
}

/* HEADER */
#Logo{
    float: left;
    position: relative;
    top: 90px;
    left: -35px;

}

.imgLogo{

}
#HeaderLogin{
    float:right;
    position: relative;
    top: 30px;
    left: -30px;
}

#HeaderLoginEmail{
    float:left;
    margin:0px 10px 10px 0px;
}

#HeaderLoginPassword{
    float:left;
    margin:0px 10px 10px 0px;
}

#HeaderLoginButton{
    float:left;
} 
```

.html 文件：

```
<html>
<link rel="stylesheet" type="text/css" media="screen" href="base2.css">
    <body>
<div id="Wrapper">
  <div id="Header">
    <div id="Logo">
        <img class="imgLogo" src="images/logo2.png" />
    </div>
    <div id="HeaderLogin">
      <div id="HeaderLoginEmail">
           <input class="txtHeaderLogin" placeholder="Email" /> <br />
                <label class="lblHeaderLogin">Forgot Email?</label>
      </div>

      <div id="HeaderLoginPassword">
        <input class="txtHeaderLogin" placeholder="Password" /> <br />
        <label class="lblHeaderLogin">Forgot Password?</label>
      </div>

      <div id="HeaderLoginButton">
        <a href="#" class="btnHeaderLogin">LOGIN</a>
      </div>

    </div>
  </div>
  <div id="ContentWrapper">
    <div id="Content">

    </div>

  </div>
</div> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-06T00:42:26.967

这样做：http: [//jsfiddle.net/yc6Qa/1/](http://jsfiddle.net/yc6Qa/1/)

我没有将徽标向左浮动并设置负边距，而是将徽标设置为`position: absolute;`and used `left: 0;`。CSS/HTML 的其余部分保持不变。
根据您网站的其他部分，此解决方案将非常适合您。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-06T00:42:54.580

更改您的徽标 css：

```
#Logo{
    float: left;
    position: relative;
    top: 90px;
    left: 0px;

} 
```

基本上去掉负左。

# android - googleMap.setMapType(GoogleMap.MAP_TYPE_SATELLITE); 不工作

> ID：14719602
> 
> 赞同：1
> 
> 时间：2013-02-06T00:36:55.873
> 
> 标签：android, google-maps

我的代码运行良好，地图显示正确

```
package com.jameselsey.mapme;

import android.os.Bundle;
import android.support.v4.app.FragmentActivity;
import com.google.android.gms.maps.GoogleMap;
import com.google.android.gms.maps.SupportMapFragment;

public class MapMe extends FragmentActivity {

    @Override
    protected void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);

        SupportMapFragment fragment = new SupportMapFragment();
        getSupportFragmentManager().beginTransaction()
                .add(android.R.id.content, fragment).commit();
        GoogleMap googleMap =fragment.getMap();

    }
} 
```

但是当我尝试添加这一行时

```
googleMap.setMapType(GoogleMap.MAP_TYPE_SATELLITE); 
```

应用程序异常停止运行

# google-app-engine - GAE 上的 Boto CloudSearch：TypeError：request() 得到了意外的关键字参数“config”

> ID：14719603
> 
> 赞同：2
> 
> 时间：2013-02-06T00:36:58.993
> 
> 标签：google-app-engine, boto, amazon-cloudsearch

我在 GAE 上使用 Boto 2.8 来搜索文档并将其索引到 AWS CloudSearch。当我尝试索引文档时，出现以下错误：

```
TypeError: request() got an unexpected keyword argument 'config' 
```

网上冲浪表明请求库存在版本兼容性问题。

问题似乎来自 boto/cloudsearch/document.py 的第 189-199 行

```
request_config = {
        'pool_connections': 20,
        'keep_alive': True,
        'max_retries': 5,
        'pool_maxsize': 50
    }

    r = requests.post(url, data=sdf, config=request_config,
        headers={'Content-Type': 'application/json'}) 
```

如果我删除“config=request_config”，我可以成功索引文档并且不会收到错误。但是删除 config 参数的后果是什么？

# java - 如何防止整数值被截断

> ID：14719608
> 
> 赞同：1
> 
> 时间：2013-02-06T00:37:33.260
> 
> 标签：java

```
String s = "128166947252913248";
DecimalFormat df = new DecimalFormat("##########################.########");
Double oldTime1 = new Double(s); 
Double oldTime2 = new Double("128166947252913249"); 
Double oldTime3 = new Double("128166947252913247");
Double newTime = new Double("116444736000000000");
System.out.println(newTime.longValue());
System.out.println(df.format(oldTime1));
System.out.println(oldTime1-newTime);
System.out.println(df.format(oldTime1-newTime));
System.out.println(df.format(oldTime3-newTime)); 
```

输出是：

```
116444736000000000
128166947252913248
1.1722211252913248E16
11722211252913248
11722211252913248 
```

这是我正在处理的代码。我无法阻止双变量在最后一个变量处被截断。请帮助我在不被截断的情况下获得价值。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-06T00:42:37.293

`Double`对于 18 个十进制数字没有足够的精度：[64 位 IEEE-754 数字最多有 17 个十进制数字](http://en.wikipedia.org/wiki/Double-precision_floating-point_format)。您应该使用[`BigDecimal`](http://docs.oracle.com/javase/6/docs/api/java/math/BigDecimal.html)无限精度。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-02-06T00:43:32.387

尝试使用[BigDecimal](http://docs.oracle.com/javase/1.5.0/docs/api/java/math/BigDecimal.html)

```
String s = "128166947252913248";
DecimalFormat df = new DecimalFormat(
        "##########################.########");
BigDecimal oldTime1 = new BigDecimal(s);
BigDecimal oldTime2 = new BigDecimal("128166947252913249");
BigDecimal oldTime3 = new BigDecimal("128166947252913247");
BigDecimal newTime = new BigDecimal("116444736000000000");
System.out.println(newTime.longValue());
System.out.println(df.format(oldTime1));
System.out.println(oldTime1.subtract(newTime));
System.out.println(df.format(oldTime1.subtract(newTime)));
System.out.println(df.format(oldTime3.subtract(newTime))); 
```

# .net - 为什么我会在没有更改后得到“命名空间名称'bla'的类型不存在......”？

> ID：14719612
> 
> 赞同：0
> 
> 时间：2013-02-06T00:37:54.233
> 
> 标签：.net, reference, namespaces, compiler-errors, opennetcf

为什么我要从没有错误的构建变成 3 种类型：

> 命名空间名称“bla”的类型在类或命名空间“blah”中不存在（您是否缺少程序集引用？）

所有三个错误都指向同一组文件（“OpenNETCF”中有两个错误，“OpenNETCF.Win32”中有一个错误）；怎么可能这些类型在当天早些时候确实存在于课堂上，而现在却不存在？我没有删除或更新这些引用...

## 更新

当我在VM（XP模式）中编译这个（第二天）早上时，我得到了：

```
Automatic Updates
Updating your computer is almost complete. Your computer needs to be restarted for the updates to take effect. Windows will restart your computer automatically in .... minutes. 
```

我昨天也得到了这个，并没有想太多 - 只是点击了立即重启按钮。

重新启动和构建后，我再次得到 0 个错误，所以这显然不是代码本身的问题。

我不知道这是否相关，但我今天也得到了（两次 XP Mode VM 都启动了）：

```
Devices or applications disabled
'Virtual PC/Windows CE Emulator' will cause Windows to become unstable. Windows has prevented these drivers from loading. Click here for more details. 
```

...带我去： http: [//support.microsoft.com/default.aspx ?scid=kb;en-us;891667](http://support.microsoft.com/default.aspx?scid=kb;en-us;891667)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-06T01:44:46.473

要检查的一件事是查看您的项目是否被意外设置为使用 .NET 客户端配置文件。这会导致各种奇怪的“未知类型”问题。

要检查，请转到您的项目属性，然后转到“应用程序”选项卡，然后检查“目标框架”设置。如果它设置为“.NET Framework 4 Client Profile”，请尝试将其更改为“.NET Framework 4”并重新构建以查看导致它的原因。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-07T05:54:34.180

这只是重新启动的问题，让 Visual Studio 恢复活力。

# android - 如何将 Bitmap 的大小设置为 WRAP_CONTENT 和 FILL_PARENT？

> ID：14719613
> 
> 赞同：1
> 
> 时间：2013-02-06T00:38:01.923
> 
> 标签：android, view, bitmap, measure

现在我正在像这样静态设置宽度和高度：

```
 myBitmap = Bitmap.createBitmap(300, 400, Bitmap.Config.ARGB_8888); 
```

我怎样才能得到它所以宽度是 FILL_PARENT 高度是 WRAP_CONTENT

我一直在网上寻找，对所有可用的选项感到困惑。有 setLayoutParams()、onMeasure()、setMinimumWidth() 等....

有人可以指出我正确的方向吗？

我正在我的主要活动中的自定义视图中制作位图。

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-06T00:48:32.697

我会创建[LayoutParams](http://developer.android.com/reference/android/view/ViewGroup.LayoutParams.html)来做到这一点。

[这](https://stackoverflow.com/questions/2693744/android-runtime-layout-tutorial)或[这](https://stackoverflow.com/questions/6453877/setting-layout-parameters-in-android)可能会有所帮助。

**编辑**，更详细：

```
 LayoutParams params = new LayoutParams(LayoutParams.MATCH_PARENT, LayoutParams.WRAP_CONTENT);
    ImageView iv = new ImageView(this);
    iv.setImageBitmap(myBitmap);
    iv.setLayoutParams(params);
    customView.addView(iv); 
```

# e-commerce - Google Wallet 是否提供 API 来生成供 3rd 方商务平台使用的 Virtual OneTime Cards？

> ID：14719616
> 
> 赞同：0
> 
> 时间：2013-02-06T00:38:31.643
> 
> 标签：e-commerce, payment-processing, android-pay

我的一个客户有一个非常有趣的用例：

使消费者能够获得一个临时的一次性借记卡号码，以便在第三方零售商处购买商品。将 pinterest 用于购物，使人们能够从 3rd 方零售商处 ping 商品，并拥有一个用于购买固定商品的数字钱包。*关键是第 3 方零售商不一定实施现有的钱包解决方案，如谷歌钱包。想想奢侈品。*

谷歌钱包似乎通过其虚拟一次性卡实现了这样的用例。但是，我找不到任何可以像这样工作的 API 端点的迹象：

使用客户数据向 wallet.google.com/virtual_card 发出 POST，取回 16 位借记卡号，然后客户可以使用该卡号在第三方零售商网站上购买商品。

似乎[AMEX Serve](https://www.serve.com/)正在开发某种测试版程序：[http ://techcrunch.com/2011/10/09/american-express-to-release-an-api-for-digital-wallet-platform-服务专注于数据和个性化/](http://techcrunch.com/2011/10/09/american-express-to-release-an-api-for-digital-wallet-platform-serve-focuses-on-data-and-personalization/)

Visa有[v.me。](https://www.v.me/)

当然，这些服务似乎都没有用于发行临时借记卡的 API。

**我错过了什么吗？**

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-06T05:20:24.537

用于在线商务 API 的 Google Wallet 可能是您正在寻找的：

[https://developers.google.com/commerce/wallet/online/faq](https://developers.google.com/commerce/wallet/online/faq)

[https://developers.google.com/commerce/wallet/online/overview](https://developers.google.com/commerce/wallet/online/overview)

# r - 如何手动更改 ggplot2 中图例中的键标签值？

> ID：14719619
> 
> 赞同：1
> 
> 时间：2013-02-06T00:38:48.923
> 
> 标签：r, ggplot2, ecdf

我想知道如何更改图例框中的键标签。我需要用“Activo”这个词替换值 1，用我尝试使用的世界“Inactivo”替换值 2，`scale_fill_discrete`但它不起作用

这是数据框的示例

```
 structure(list(ZPIE = c(4109L, 4463L, 4624L, 4267L, 4569L, 4656L, 
3976L, 4136L, 4139L, 4694L, 4354L, 4615L, 4183L, 4113L, 4508L, 
4035L, 4443L, 4709L, 4575L, 4363L), ecd = c(0.0873015873015873, 
0.779220779220779, 0.916666666666667, 0.396825396825397, 0.876984126984127, 
0.961038961038961, 0.0649350649350649, 0.134920634920635, 0.285714285714286, 
0.948412698412698, 0.55952380952381, 0.904761904761905, 0.337662337662338, 
0.233766233766234, 0.785714285714286, 0.0198412698412698, 0.698412698412698, 
0.956349206349206, 0.884920634920635, 0.579365079365079), ACTIVIDAD = structure(c(1L, 
2L, 1L, 1L, 1L, 2L, 2L, 1L, 2L, 1L, 1L, 1L, 2L, 2L, 1L, 1L, 1L, 
1L, 1L, 1L), .Label = c("1", "2"), class = "factor")), .Names = c("ZPIE", 
"ecd", "ACTIVIDAD"), row.names = c(166L, 258L, 202L, 158L, 207L, 
319L, 288L, 98L, 329L, 46L, 15L, 1L, 277L, 272L, 92L, 33L, 23L, 
201L, 194L, 197L), class = "data.frame") 
```

这是我为获取情节而编写的代码：

```
a <- ggplot(intactos,aes(x = ZPIE, y = ecd))+  
     geom_line(aes(group = ACTIVIDAD,colour = ACTIVIDAD,linetype=ACTIVIDAD),size = 1,colour="black")+
     xlab("Altitud m") +
     ylab("Distribucion Acumulada (%)")+
     scale_x_continuous(limits=c(3500,5000),breaks=c(3500,3750,4000,4250,4500,4750,5000))+
     geom_vline(aes(xintercept=4000),linetype="dashed",size = 1)+
     geom_text(aes(4050,.85,label = "0°C MAAT isoterma")
                  ,vjust=0,
                  ,fontface= 'plain'
                  ,colour='black'
                  ,size=5)+
  theme(  plot.background  = element_rect(fill="white")
         ,panel.background = element_rect(fill='white')
         ,panel.grid.major = element_line(colour = 'grey', linetype = 'dashed')
         ,panel.grid.minor = element_line(colour = 'white', linetype = 'dashed')
         ,panel.border = element_blank()
         ,axis.line = element_line(colour = 'black')
         ,axis.text.x=element_text(colour="black")
         ,axis.text.y=element_text(colour="black")
         ,panel.grid.major =element_line(colour = 'grey', linetype = 'dashed')
         ,legend.key=element_rect(fill="white",colour="white"),legend.position=c(0.25,0.7))

a +    coord_flip() 
```

这是我尝试创建的情节 [https://dl.dropbox.com/u/11320858/plot_zoom_png2](https://dl.dropbox.com/u/11320858/plot_zoom_png2)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-06T08:50:48.277

好吧，鉴于您能够共享的有限数据，很难说，但我认为您可能想要以下内容。找一个修补匠，看看它是否适合你。

![截屏](../Images/0f82e0eeea936172f7fd1481f38315b3.png)

```
library(ggplot2)
library(scales)

intactos <-
    structure(list(ZPIE = c(4129L, 4547L, 4448L, 4181L, 4439L, 4113L,3893L, 4275L, 4385L, 4037L), ecd = c(0.126984126984127, 0.849206349206349,0.706349206349206, 0.222222222222222, 0.69047619047619, 0.233766233766234,0.038961038961039, 0.420634920634921, 0.626984126984127, 0.0238095238095238)), .Names = c("ZPIE", "ecd"), row.names = c(79L, 200L, 132L, 102L, 219L,272L, 278L, 84L, 17L, 133L), class = "data.frame")

intactos$ACTIVIDAD <- "one"
intactos$ACTIVIDAD[6:10] <- "two"

library(reshape)
intactos.m <- melt(intactos, id.var = c("ecd", "ACTIVIDAD"))

ggplot(data = intactos.m, aes(y = value, x = ecd, group = ACTIVIDAD)) +
    geom_line(aes(colour = ACTIVIDAD)) +
    ylab("Altitud m") +
    xlab("Distribucion Acumulada (%)\n") +
    scale_y_continuous(limits = c(3500,5000),
                       breaks = c(3500,3750,4000,4250,4500,4750,5000))+
    scale_x_continuous(limits = c(0, 1.1),
                       breaks = seq(0, 2, 0.1)) +
    scale_colour_manual("Legend", labels = c("line one", "line two"),
                        values = c("blue", "red")) +
    geom_hline(aes(yintercept = 4000),linetype = "dashed", size = 1)+
    geom_text(data = intactos[1, ], aes(y = 4050, x = 0.85),
               label = "0°C MAAT isoterma", vjust = 0, fontface = 'plain',
               colour = 'black', size=5) +
    theme() 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-06T21:24:50.290

感谢您帮助慢学习者。我刚刚用您的评论修复了代码。`melt()`我可以在开头和代码中使用函数来修复`scale_linetype_maunual`代码。**这是新代码。**

```
library(reshape)

intactos2 <- melt(intactos, id.var = c("ecd","ACTIVIDAD"))

a <- ggplot(intactos2,aes(y = value,  x= ecd,group=ACTIVIDAD))+  
     geom_line(aes(colour = ACTIVIDAD,linetype=ACTIVIDAD),colour='black',size=0.5)+
     scale_linetype_manual("Glaciares rocosos",
                            breaks=c("1","2"), 
                            values=c("solid","dashed"),
                            labels = c("Activos", "Inactivos"))+
     ylab("Altitud m") +
     xlab("Distribucion Acumulada (%)\n")+
     scale_y_continuous(limits=c(3500,5000),
                        breaks=c(3500,3750,4000,4250,4500,4750,5000))+
     scale_x_continuous(limits = c(0.00, 1.00),
                        breaks = seq(0, 1, 0.1),
                        labels=seq(0,100,10))+
  theme(  plot.background  = element_rect(fill="white")
         ,panel.background = element_rect(fill='white')
         ,panel.grid.major = element_line(colour = 'grey', linetype = 'dotted',size=0.5)
         ,panel.grid.minor = element_line(colour = 'white', linetype = 'dashed')
         ,panel.border = element_blank()
         ,axis.line = element_line(colour = 'black')
         ,axis.text.x=element_text(colour="black")
         ,axis.text.y=element_text(colour="black")
         ,panel.grid.major =element_line(colour = 'grey', linetype = 'dashed')
         ,legend.key=element_rect(fill="white",colour="white"),legend.position=c(0.3,0.8))+
          geom_hline(aes(yintercept=4000),linetype="solid",size = 0.5)
a

a   +    annotate("text",label="0°C MAAT isoterma",x=0.8,y=4050,size=4) 
```

我终于得到的情节在这里！[https://dl.dropbox.com/u/11320858/plot3.png](https://dl.dropbox.com/u/11320858/plot3.png)

# css - 文本出现在 Chrome 中但没有出现在 Firefox 中？

> ID：14719620
> 
> 赞同：0
> 
> 时间：2013-02-06T00:38:53.797
> 
> 标签：css, cross-browser

我有这个 CSS，但我的文本在 Google Chrome 和 Ie 中正确显示；但不是火狐。我不知道为什么。

```
input[type="text"] { width: 274px;  border: 1px solid #333; background-color: #181818; padding-top: 9px; color: #777; height: 13px; padding-left: 4px; padding-bottom: 8px;}
input[type="password"] { width: 274px;  border: 1px solid #333; background-color: #181818; padding-top: 9px; color: #777; height: 13px; padding-left: 4px; padding-bottom: 8px; } 
```

谁能推荐一些方法来显示这个？

**HTML：**

```
<form method="post" action="CheckCredentials.php">
Member Login <Br>
Username: <br><input type="text" name="Username"> <br><br>
Password: <br><input type="password" name="Password"> <br><br>
<input type="submit" name="Login" value="Login!">
</form> 
```

**筛网**

火狐： ![这是在火狐上](../Images/b4223584d6023047455500f441328b70.png)

铬合金： ![这是铬](../Images/b042bf774442a5bbad5563120af0fd9f.png)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-06T00:48:54.710

问题是指定的高度，如果从输入中删除高度参数，问题就解决了。

**替代（更好的 imo）解决方案：** 问题是 box-sizing 属性（[http://www.w3schools.com/cssref/css3_pr_box-sizing.asp](http://www.w3schools.com/cssref/css3_pr_box-sizing.asp)）

它被设置为*边界框*，计算指定高度和宽度内的填充以及 13 < 9+8（顶部和底部填充），因此实际内容（文本）没有空间。如果您需要使用指定的高度，最好的解决方案是使用：

```
box-sizing:content-box;
-moz-box-sizing:content-box; /* Firefox */
-webkit-box-sizing:content-box; /* Safari */ 
```

这将计算指定高度之外的元素的填充，因此现在输入的实际高度将为 13+9+8px。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-06T01:01:23.177

更改`padding`文本消失的填充原因。

对于相同的视图设置`height`为自动

# python - Python：解析和分组目录中的文件名

> ID：14719621
> 
> 赞同：3
> 
> 时间：2013-02-06T00:38:53.627
> 
> 标签：python, parsing, directory

我对 python 很陌生，但我对 MATLAB 和 C 有很多经验。

我需要做的是解析特定目录中文件的文件名，根据文件名中的字段将它们分成组，并在这些组中执行操作。

具体来说，文件名是：

```
PROJECT-x-SUBJECT-x-SESSION-x-TYPE.extension 
```

其中'-x-'已被故意插入作为字段分隔符。我需要对共享相同 PROJECT-x-SUBJECT-x-SESSION 组件的每组文件进行操作。

****_ *_* ____***我的最佳尝试如下：*****_ *_* __ *_* __******

 ****我可以通过以下方式一次解析每个文件：

```
dirList=os.listdir(directory)
for fname in dirList:  
    # kill extension
    ext = os.path.splitext(fname)
    # get the 4 fields 
    labels=ext[0].split('-x-')
    PROJECT_list.append(labels[0])
    SUBJECT_list.append(labels[1])
    ... 
```

...这反映了我对如何组织这些东西的唯一想法：通过创建 4 个列表并为每个文件名附加到它们。

然后使用我的 4 个（有序？）列表，我可以调用如下内容：

```
from collections import Counter
c=Counter(SESSION_list) 
list(c) 
```

*然后至少我有一个唯一的会话名称列表*

建议？我可以继续，但因为我真的只需要一个起点，我认为这就足够了。

多谢你们。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-02-06T00:44:50.290

您可以`defaultdict`用来制作包含列表的字典：

```
from collections import defaultdict

groups = defaultdict(list)

for filename in os.listdir(directory):
    basename, extension = os.path.splitext(filename)
    project, subject, session, ftype = basename.split('-x-')

    groups[session].append(filename) 
```

现在，`groups`包含会话名称和文件名之间的映射。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-06T00:46:08.503

如何使用 a`defaultdict`对文件名进行分组、`glob`查找适当的文件以及`fileinput`从具有相同键的所有文件中读取行。（未经测试）

```
import os
from glob import glob
import fileinput
from collections import defaultdict

filenames = glob('*-x-*')
dd = defaultdict(list)
for filename in filenames:
    name, ext = os.path.splitext(filename)
    dd[tuple(name.split('-x-')[:3])].append(filename)

for key, fnames in dd.iteritems():
     for line in fileinput.FileInput(fnames):
         pass # do something with lines from files with same key 
```****

# actionscript-3 - 从 Flash CS6 创建 PDF（客户端）

> ID：14719623
> 
> 赞同：0
> 
> 时间：2013-02-06T00:39:05.230
> 
> 标签：actionscript-3, flash, alivepdf, purepdf

我正在寻找一种直接从 Flash 100% 客户端创建 pdf 文件的方法。我无法与服务器上的其他文件进行交互（例如使用 php 创建 pdf）。

这可以直接在 AS3 中使用 purePDF / AlivePDF 库来完成吗？我正在使用 Flash CS6。

提前致谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-06T00:41:39.050

> AlivePDF 是从 FPDF PHP 项目移植的开源 ActionScript 3（Flash、Flex、AIR）PDF 生成库。它允许您生成 PDF 的 100% 客户端。

[http://alivepdf.bytearray.org/?page_id=2](http://alivepdf.bytearray.org/?page_id=2)

我说是 ：）

# xcode - Xcode 4.5 - 创建一个接收和加载不同 URL 的 UIWEbView

> ID：14719624
> 
> 赞同：0
> 
> 时间：2013-02-06T00:39:07.277
> 
> 标签：xcode, url, uiwebview

我正在尝试制作我的第一个应用程序。一些非常简单的事情，但我需要一个小细节的帮助。

这个应用程序只有两个屏幕，第一个有 10 个按钮，每个按钮指向一个不同的 URL，应该在下一个屏幕中加载。

目前我可以从第一个按钮加载第一个 URL。如何连接所有按钮，以便在下一个屏幕中加载该按钮链接/网址？

感谢所有可以帮助我的人。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-05T01:29:20.293

如果我正确理解了这个问题，您从一个具有 10 个 UIButtons 的视图开始，每个都链接到打开第二个 UIWebView，具有特定的 URL，这取决于第一个视图上的 10 个原始按钮中的哪一个被按下。

从这里您可以添加一个后退按钮，通过使用以下内容关闭第二个视图，让您的用户回到 10 个 UIButtons 的原始视图：

```
 - (IBAction)back:(id)sender {
            [self dismissViewControllerAnimated:YES completion:NULL];
       } 
```

或者您可以使用分段控件，通过滑动在所有 10 个之间切换。[在http://iphonedevsdk.com/forum/tutorial-discussion/29597-uisegmentedcontrol-tutoria.html](http://iphonedevsdk.com/forum/tutorial-discussion/29597-uisegmentedcontrol-tutoria.html)上有很好的使用它的文章。

我知道我来晚了，但也许外面有人有类似的问题。还可以查看[http://www.geekylemon.com](http://www.geekylemon.com) 那里也有一些适合初学者的好建议。

# google-apps-script - 超时后脚本自动继续/重启

> ID：14719626
> 
> 赞同：2
> 
> 时间：2013-02-06T00:39:10.240
> 
> 标签：google-apps-script

我正在使用默认服务 GroupsManager 和 Group 扫描域中的所有组，检查组是否没有所有者，在这种情况下设置默认所有者。

域中的组数几乎是 2000，这导致我超时。我在处理每个组的循环中尝试了一个 try/catch 语句，但是 Google 在超时时终止了脚本。

我很高兴分批执行此操作，但是一旦发生超时，我该如何继续执行我的脚本呢？还是我应该监控执行时间并使用某种睡眠？

还是我必须面对现实并在每次超时后重新启动脚本。

真的需要回复这个，谢谢！

/ 唐·佩德罗

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-06T15:33:50.533

您不应该让脚本超时，而是尝试使用计时器触发器在特定时间间隔内一次处理有限数量的项目。

好吧，我想您可以回答说说起来容易做起来难……但实际上很简单：

1.  确定大约 3 分钟可以签入多少组（最长执行时间为 5 分钟，但最好保持舒适的余量）
2.  计算已处理的组并将此计数器值放在某处......最好在[scriptProperties](https://developers.google.com/apps-script/class_scriptproperties?hl=en)
3.  每 10 分钟左右设置一个计时器触发器，以便从您刚刚记住的数字索引的组开始调用您的函数（触发器[可以通过编程方式设置](https://developers.google.com/apps-script/managing_triggers_programmatically?hl=en)，也可以在脚本编辑器的资源菜单中手动删除或手动删除）。
4.  当您完成任务时终止计时器（再次手动或以编程方式）

希望这会给您足够的指示。

# c# - 带有 JSON 反序列化的 Windows Phone 8 MVVM

> ID：14719632
> 
> 赞同：2
> 
> 时间：2013-02-06T00:39:49.357
> 
> 标签：c#, windows-phone-8, windows-phone, .net-4.5, c#-5.0

（需要关于可怕代码的建议）

我试图通过为所有视图模型合并 MVVM 和通用 DataService 类来为我的旧 Windows Phone 应用程序代码带来一些*优雅*，以调用它们相应的 Web 服务处理程序。

例如，在通知 ViewModel 中，我有：

```
private ObservableCollection<Notification> _notifications;
public ObservableCollection<Notification> Notifications
{
    get
    {
        return _notifications;
    }
}

public void GetNotifications()
{
    new DataService().DownloadViewModelData<ObservableCollection<Notification>>(GetNotificationsCallback, "getnotificationslist.ashx");
    this.IsDataLoaded = true;
}

public void GetNotificationsCallback(ObservableCollection<Notification> notificationsList)
{
    _notifications = notificationsList;

    Deployment.Current.Dispatcher.BeginInvoke(() =>
    {
        NotifyPropertyChanged("Notifications");
    });
    this.IsDataLoaded = true;
} 
```

在 DataService 类中，我试图创建一个与服务通信的通用方法：

```
public static string ServerUrl = "http://<ip-address>:<port>/";

public void DownloadViewModelData<T>(Action<T> callbackFunction, string handlerName, bool methodIsPOST = false, List<KeyValuePair<string, string>> querySet = null) where T : class
{
    var queryString = "";

    if(null != querySet)
    {
        foreach (KeyValuePair<string, string> tuple in querySet)
        {
            queryString += tuple.Key + "=" + tuple.Value + "&";
        }

        queryString = queryString.Remove(queryString.Length - 1, 1);
    }

    var urlQueryString = ServerUrl + handlerName;

    if (!methodIsPOST)
        urlQueryString += queryString;

    var webRequest = HttpWebRequest.CreateHttp(urlQueryString);

    webRequest.ContentType = "application/x-www-form-urlencoded";

    Func<AsyncCallback, object, IAsyncResult> requestingMethod = null;

    if (methodIsPOST)
    {
        webRequest.Method = "POST";
        webRequest.ContentLength = queryString.Length;
        webRequest.BeginGetRequestStream(
            a =>
            {

                System.IO.Stream postStream = webRequest.EndGetRequestStream(a);
                byte[] byteArray = System.Text.Encoding.UTF8.GetBytes(queryString);
                postStream.Write(byteArray, 0, queryString.Length);
                postStream.Close();
                webRequest.BeginGetResponse(
                    b =>
                    {
                        using (WebResponse response = webRequest.EndGetResponse(b))
                        {
                            using (StreamReader reader = new StreamReader(response.GetResponseStream()))
                            {
                                callbackFunction(new DataContractJsonSerializer(typeof(T)).ReadObject(response.GetResponseStream()) as T);
                            }
                        }
                    },
                    null
                );
            },
            null
        );
    }
    else
    {
        webRequest.Method = "GET";
        webRequest.BeginGetResponse(
            a =>
            {
                using (WebResponse response = webRequest.EndGetResponse(a))
                {
                    using (StreamReader reader = new StreamReader(response.GetResponseStream()))
                    {
                        callbackFunction(new DataContractJsonSerializer(typeof(T)).ReadObject(response.GetResponseStream()) as T);
                    }
                }
            },
            null
        );
    }
} 
```

# 问题：

1.  它是使用 lambda 表达式和整体正确的方法来处理 MVVM 的数据层的正确（现代）方式吗（假设我们的项目中有多个模型、视图和视图模型）？

2.  您会推荐这种方法来调用[可移植类库 (PCL)](http://mobile.dzone.com/articles/using-portable-class-libraries)中的 Web 服务吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-06T04:12:45.403

在我看来，有一种更好的方法可以做到这一点，这样你的 ViewModel 就不会知道你的数据服务的实现。

我会考虑做几件事。

1.  开始使用像[Ninject](http://www.ninject.org/)这样的依赖注入框架。这将允许您让您的 ViewModel 不知道它正在使用的数据服务的类型。您可以使用 DI 框架为您的代码注入特定的实现。
2.  创建一个代表您的数据服务的接口。为了论证起见，我将调用我的示例`IDataService`。此接口的主要目标是抽象出检索数据的方法。因此，可以通过具有任何知识（或关心）的视图模型从数据库、Web 服务或文件访问数据。

对于您的代码，我会给它签名：

```
public interface IDataService
{
    Task<IEnumerable<Notification>> ListNotifications();
} 
```

您会注意到我正在使用`Task<>`它允许我使用 .Net 4.5 异步框架。所以现在我们的界面只是说，`I have a way of returning a list of notifications, asynchronously`. 这与您的视图模型所需的信息一样多。

1.  不要重新创建你的`ObservableCollection<Notification>`. 如果您需要更改集合的内容，`Clear()`请重新填充，但不要重新绑定或重新创建集合本身。这也有许多性能优势。

2.  如果您将接口定义放在可移植库中，那么如果您需要针对特定​​平台的特定实现（例如 WP8 与 Win8），那么由于您只在 ViewModel 中引用接口，那么您可能只需要更改很少的量支持差异实现。

希望一切都说得通。

# css - rails app，更改根目录/指定根路径

> ID：14719634
> 
> 赞同：0
> 
> 时间：2013-02-06T00:40:04.543
> 
> 标签：css, ruby-on-rails, root

一段时间以来，我在遵循 Wesley 的 Ruby on Rails 3 教程时遇到了我的应用程序问题。基本上，样式表不会加载，之后我意识到默认根目录似乎是“app”文件夹，因为它在 /app/assets 中查找样式表。这是本教程未能解释的内容，它让我在 /public/stylesheets 中制作样式表。

无论如何我可以更改它，以便默认文件夹是/public/stylesheets，或者如果我指定路径“/public/stysheets/custom.css”它会起作用？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-06T05:02:32.567

app/assets/stylesheets/application.css 控制哪些 css 将包含在您的应用程序中。

在 application.css 中，您应该看到：

```
 *= require_self
 *= require_tree . 
```

您可以添加其他路径，如下所示（它们是相对的）：

```
*= require_tree ../../../public/stylesheets/. 
```

所述文件夹中的任何 css 文件都应包含在您的应用程序中。

# c# - 有列表的实体 属性没有更新

> ID：14719639
> 
> 赞同：0
> 
> 时间：2013-02-06T00:40:43.677
> 
> 标签：c#, entity-framework-5

以下代码无法按预期工作。虽然`item.ActiveEntries`在处理上下文后更新和持续存在，`user.ShoppingCart.Cart`. 此外，这两个属性都定义为`virtual List<CartEntry>`。

```
using (var context = new LocabalSqlContext())
{
    var user = Auth.GetUser(context);
    var item = context.Items.First();
    var entry = new CartEntry()
    {
        Item = item,
        Quantity = 3,
        LastRefresh = DateTime.Now
    };
    item.ActiveEntries.Add(entry);
    user.ShoppingCart.CartEntries.Add(entry);
} 
```

# json - Restlet 客户端接收 LinkedHashMap 元素数组而不是对象元素数组

> ID：14719641
> 
> 赞同：0
> 
> 时间：2013-02-06T00:41:40.197
> 
> 标签：json, object, jackson, restlet

阿罗哈。

我有一个带有@Get 方法的 Restlet 服务器应用程序，它应该返回 Object[]，但客户端接收到一个 Object[]，其元素类型为 LinkedHashMap。每个接收到的数组元素对应于服务器应该发送的对象的各个元素。

这是我的资源（接口）文件的相关部分：

```
@Get
public Object[] retrieve() ; 
```

这是我的服务器资源文件的相关部分：

```
public Object[] retrieve()
{

  User newUser = new User() ;
  newUser.firstName = "John" ;
  newUser.lastName = "Doe" ;

  Object[] objectArray = (Object[]) Array.newInstance( User.class, 1 ) ;
  objectArray[0] = newUser ;

  return objectArray ;

} 
```

这是我的客户的相关部分：

```
public static void main( String[] args ) throws Exception
{
  Object[] arrayOfObjects = (Object[]) clientResource.retrieve() ;   //  array of LinkedHashMap elements
} 
```

我假设获得我想要获得的结果很容易，但我对 Restlet 框架还是很陌生。因此，有人可以告诉我我做错了什么并向我展示如何从服务器正确发送（JSON 编码）对象数组的示例吗？

提前致谢。

保重，
达尔文

==================================================== =================================

# 更新

根据 StaxMan 的评论（如下），我也尝试返回一个通用列表，但这只会导致 LinkedHashMap 元素的 ArrayList，而不是所需元素类型的 ArrayList。

这是我的资源（接口）文件的相关部分：

```
@Get
public <T> List<T> retrieve() ; 
```

这是我的服务器资源文件的相关部分：

```
public <T> List<T> retrieve()
{
  List<T> list = ... ;
  return list ;
} 
```

这是我的客户的相关部分：

```
//  the following does not work, since the returned ArrayList's
//  elements are not User objects but LinkedHashMap objects:
User[] users = (User[]) ((ArrayList<User>)clientResource.<User>retrieve()).toArray( (User[])Array.newInstance(User.class,0) ) ; 
```

谁能告诉我如何从服务器获取我想要的对象的 Array 或 List 或 ArrayList，同时仍然保持服务器的通用（甚至伪通用）性质？

提前致谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-06T04:45:50.283

这是因为 a`List`是一个`java.lang.Object`- 你要求一个对象列表并且你得到了。如果没有额外的类型信息，这几乎是你所能得到的。在您的情况下，您应该返回`User[]`（或`List<User>`）

# javascript - HTML JQuery 显示日期

> ID：14719642
> 
> 赞同：0
> 
> 时间：2013-02-06T00:41:40.230
> 
> 标签：javascript, jquery, html

我一直试图通过这样做来显示时间。

```
<html>
<head>
<script src="//ajax.googleapis.com/ajax/libs/jquery/1.9.0/jquery.min.js"></script>
<title>My Schedule</title>
<script type="text/javascript">
    $(document).ready(function(){
        var now = new Date();
        $("#foot").append(now.toLocaleTimeString());
    });
</script>
</head>
<body>
<header>Day.</header>
<ul type="disc">
    <li>Monday</li>
    <ol type="circle">
    <li>Breakfast</li>
    <li>Lunch</li>
    <li>Dinner</li>
</ol>
<li>Tuesday</li>
<ul type="circle">
    <li>Lunch</li>
    <li>Dinner</li>
</ul>
</ul>
<footer id=”foot”&gt;Current Time:</footer>
</body>
</html> 
```

然后显示

`<footer id=”foot”&gt;`

但我无法让它工作，有人可以告诉我这是否可行以及如何解决？

感谢您的时间和帮助。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-06T01:22:40.740

这个问题中代码的唯一问题是`quotes`id 周围的怪异`foot`。更改它们并且代码有效：

[**jsFIDDLE 在这里**](http://jsfiddle.net/aaaheatair/pK5K5/1/)

# linux - epoll 服务器不会解除绑定

> ID：14719644
> 
> 赞同：1
> 
> 时间：2013-02-06T00:42:00.427
> 
> 标签：linux, epoll

我在 Ubuntu Linux 内核 3.5.0-23 上编写了一个 epoll 服务器，可以很好地解决一个问题：如果客户端连接，然后注销，我可以立即重新启动服务器。但是，如果客户端仍然连接，而我关闭服务器，他将断开连接，但端口仍然会绑定 X 秒（不能告诉 X，我会说大约 20）。如果我用编译器终止程序，也会发生这种情况。

关闭时，我使用的功能与客户离开时使用的功能完全相同：

```
int CEpollClient::Close ()
{
    if(m_socket!=SOCKET_ERROR)
    {
    int res=::epoll_ctl (m_server_handler, EPOLL_CTL_DEL, m_socket, 0);
    _debug_message("client exits");
    _debug_message(res);
    shutdown(m_socket,SHUT_RDWR);
    ::close (m_socket);
    m_socket=SOCKET_ERROR;
    }
    return 0;
 } 
```

这是客户端类的一部分，因此无论我是在客户端离开后关闭客户端还是我自己初始化它，都会调用完全相同的代码。关闭服务器时我也在关闭监听套接字：

```
if (m_listener != SOCKET_ERROR)
{
    _debug_message("stop listener");
    code=epoll_ctl(m_epoll_handler,EPOLL_CTL_DEL,m_listener,0);
    _debug_message(code);
    shutdown(m_listener,SHUT_RDWR);
    ::close(m_listener);
    m_listener = SOCKET_ERROR;
} 
```

有人可以提供任何想法吗？这并不可怕，它是可行的，但它看起来像一个错误。调试消息 s 中的返回码始终为 0 - 没有错误。那么为什么会发生呢？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2014-10-24T10:43:27.320

你的问题不是 epoll 相关的，而是 socket 相关的。您不能重用该套接字的原因是它仍处于 TCP`TIME_WAIT`状态。这是设计上的正常行为。延迟通常是最大段生命周期的两倍，以确保在任何情况下都可以执行正确关闭的完整往返，但也可以使用`SO_LINGER`. 您可能很想简单地配置`SO_LINGER`成更短的东西，但不要那样做。*不建议*使用此表盘，因为它可能会干扰正常、正常的关机。

另一个选项是设置`SO_REUSEADDR`套接字选项，这可能是您想要的。请注意，它`SO_REUSEADDR`告诉套接字层忘记它所做的正确性承诺，并故意破坏正常的可操作性。基本上你是在告诉你的网络库：*“是的，我知道这样做是错误的，但我保证没有人再关心那个套接字，也不会发生任何邪恶的事情”*。
这正是您的示例中的情况。您已经以艰难的方式关闭了套接字，它已经消失了，没有其他人在使用它，您所关心的只是尽快重新使用它。

有关可用套接字选项的描述，请参见[`socket(7)`](http://linux.die.net/man/7/socket)例如。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-14T19:10:14.490

我猜你不能重复使用套接字，因为你需要向系统请求它。在调用 bind(2) 之前，请执行以下操作：

[https://github.com/edsiper/monkey/blob/master/src/mk_socket.c#L114](https://github.com/edsiper/monkey/blob/master/src/mk_socket.c#L114)

我希望它有帮助。

# grails - Grails 中的多个键值对映射

> ID：14719647
> 
> 赞同：0
> 
> 时间：2013-02-06T00:42:06.250
> 
> 标签：grails, map

我正在尝试根据 Grails 中的对象列表动态填充地图。假设我有类似的东西......

```
def criteria = Object.createCriteria()
def listResults = criteria.list() {
 -- query statements --
}

def objMap = [:]
for each(object in listResults) {
-- assign object property and object id into map -- 
} 
```

所以我正在寻找的是地图中的一个 id 属性对条目。就像是：

```
[id:1, name:'Name'] 
```

我还需要这样对的列表。我该怎么做？提前致谢！！！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-06T03:11:50.923

根据您上面想要一些数据对象的评论，例如 carName 和 carid：

```
... listResults has result of criteria query
def results = listResults.collect { r -> [carName: r.name, carId: r.id] } 
```

将为您提供对象列表，因此 results[0].carName = 第一辆汽车的名称...

请参阅[http://groovy.codehaus.org/Collections](http://groovy.codehaus.org/Collections)了解更多 groovy 收藏乐趣。

# python - 在python中使用列表对嵌套字典进行排序

> ID：14719654
> 
> 赞同：0
> 
> 时间：2013-02-06T00:42:46.913
> 
> 标签：python, list, sorting, dictionary, nested

我正在尝试对包含列表的字典进行排序。例如，如果我有这本字典：

```
a = {'q': {3: [4, 2, 7]}, 'a': {1: [5, 45, 11]}, 'e': {23: [11, 45, 2]}} 
```

我希望排序后的输出为：

```
[(e, {23:[11,45,2}]), (a, {1:[5,45,11]}), (q,{3,[4,2,7]})] 
```

我实际上是在反向排序，使用列表中的第一项作为排序的键。

如果两个列表的第一项相同，如上所述，我按字母顺序对与列表（主键）关联的字符串进行排序。

我不确定是否可以得到带有字典的元组的输出，因为我正在对该字典中的列表进行排序。

我试过这段代码：

```
sorted((x,b.items(), key=lambda x:[1][2]) for x,b in a.items()) 
```

它引发了无效语法错误，我不知道出了什么问题。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-06T01:01:04.783

让我们分解问题。你真的想对列表进行排序`a.items()`。所以：

```
>>> to_sort = a.items()
>>> to_sort
[('q', {3: [4, 2, 7]}), ('a', {1: [5, 3, 11]}), ('e', {23: [11, 45, 2]})] 
```

现在，对于列表中的每个元素，您都有一个值（`'q'`等）和一个字典的元组。假设每个字典只包含一个键，并且您希望使用每个字典值的 index-1 元素作为主键。所以，第一个元素的键应该是：`to_sort[0][1].values()[0][1]`:`to_sort[0][1]`给你字典`{3: [4, 2, 7]}`，`.values()`给你列表`[[4, 2, 7]]`，然后`[0][1]`给你`2`。辅助排序键是简单的`to_sort[0]`。

所以我们得到：

```
>>> sorted(to_sort, key=lambda x: (x[1].values()[0][1], x[0]))
[('q', {3: [4, 2, 7]}), ('a', {1: [5, 3, 11]}), ('e', {23: [11, 45, 2]})] 
```

我们就快到了。现在你只需要告诉 sort 你想要反向输出：

```
>>> sorted(to_sort, key=lambda x: (x[1].values()[0][1], x[0]), reverse=True)
[('e', {23: [11, 45, 2]}), ('a', {1: [5, 3, 11]}), ('q', {3: [4, 2, 7]})] 
```

这是你想要的吗？

如果你想要一个单线，你可以这样做：

```
>>> sorted(a.items(), key=lambda x: (x[1].values()[0][1], x[0]), reverse=True) 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-06T00:50:29.503

至少在交互式解释器中，完整的错误消息应该准确地显示错误发生的位置：

```
>>> sorted((x,b.items(), key=lambda x:[1][2]) for x,b in a.items())
  File "<stdin>", line 1
    sorted((x,b.items(), key=lambda x:[1][2]) for x,b in a.items())
                            ^
SyntaxError: invalid syntax 
```

请注意， 位于`^`的正下方`=`。

这并没有告诉你*为什么*在那里出现错误，但至少它告诉你在哪里看。

一旦你仔细观察，就会注意到这个子表达式：

```
(x,b.items(), key=lambda x:[1][2]) 
```

所以这是一个元组，它的第三个成员是`key=lambda x:[1][2]`. 但这作为表达式无效。所以，你有一些括号在错误的地方。或者，更确切地说，您已将`key`参数添加到错误的位置。我想你的意思是：

```
sorted(((x,b.items()) for x,b in a.items()), key=lambda x:[1][2]) 
```

没有`SyntaxError`。看起来这会在`IndexError`以后发生，但是当你到达那里时你可以处理它。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-06T01:00:00.213

我不是 100% 确定，但你最终会追求吗？

```
>>> a = {'q': {3: [4, 2, 7]}, 'a': {1: [5, 3, 11]}, 'e': {23: [11, 45, 2]}}
>>> new_order = sorted(a, key=lambda L: a[L].values(), reverse=True)
>>> zip(new_order, map(a.get, new_order))
[('e', {23: [11, 45, 2]}), ('a', {1: [5, 3, 11]}), ('q', {3: [4, 2, 7]})] 
```

# ruby-on-rails - SSL_connect 返回=1 errno=0 state=SSLv3 读取服务器证书 B: 证书验证在 WINDOWS 上失败

> ID：14719670
> 
> 赞同：2
> 
> 时间：2013-02-06T00:44:04.020
> 
> 标签：ruby-on-rails, ruby, windows, ssl, openssl

启动我的服务器并转到本地主机后，我收到错误：

```
SSL_connect returned=1 errno=0 state=SSLv3 read server certificate B: certificate verify failed 
```

在这里尝试了解决方案：[http](http://railsapps.github.com/openssl-certificate-verify-failed.html) : //railsapps.github.com/openssl-certificate-verify-failed.html 并且无法让 OpenSSL 更新（它位于 0.9.8e）。我已经下载了多个 OpenSSL 包，但在我的开发环境中没有检测到。

无法使用以下解决方案：[SSL_connect 返回=1 errno=0 state=SSLv3 读取服务器证书 B：证书验证](https://stackoverflow.com/questions/4528101/ssl-connect-returned-1-errno-0-state-sslv3-read-server-certificate-b-certificat)因 Windows 操作系统而失败。

这里的解决方案也不适合我：[如何解决 Windows 上的“证书验证失败”？](https://stackoverflow.com/questions/5720484/how-to-solve-certificate-verify-failed-on-windows)

我应该采取哪些后续步骤？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-08-20T14:06:24.250

尝试将以下行添加到您的 Gemfile

```
gem 'certified' 
```

并执行

```
bundle 
```

再次运行！

# mysql - wp超级缓存导致数据库崩溃

> ID：14719671
> 
> 赞同：1
> 
> 时间：2013-02-06T00:44:28.120
> 
> 标签：mysql, database, wordpress

我有一个严重的问题：

*   我有一个专用服务器。我在 4 小时前重新启动，现在我有数据库错误：

主页还可以：[http](http://worldissmall.fr/) ://worldissmall.fr/ wp admin：[http](http://worldissmall.fr/blog/wp-admin/) ://worldissmall.fr/blog/wp-admin/（数据库问题） somes pages（示例标签）：worldissmall.fr/tag/ipad-mini /（数据库连接问题）

页面正在运行：worldissmall.fr/2013/02/04/jailbreak-ios-6-1-untethered-tutoriel/#.URGkCb92Th4

我想这个问题是由重新启动之前停用的**wp-super-cache**引起的（不仅仅是之前）。

我试过了：wordpress.org/extend/plugins/wp-super-cache/other_notes/ 没有成功（当我这样做时，所有页面都告诉存在数据库连接问题。

有人有想法吗？我从 5 小时开始就在这个问题上......

非常感谢...

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-06T01:47:42.280

在 wp-config.php 中设置 `define('WP_DEBUG', true);` ，还要检查这个文件。我认为您的 wp-config.php 文件有问题

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-06T04:04:50.087

WP Super Cache 不会使您的数据库崩溃。当您出现无法连接错误时，这是​​因为您的 MySQL 服务器超载并且没有更多可用的打开连接、已用完所有内存或 CPU 已用完。这可能来自编写不佳的主题或插件代码，或者只是大量的流量。

您可以运行 mysqltuner 以获取建议的操作，以便对您的 my.cnf 配置采取。这是从命令行执行的珍珠脚本。

从命令行运行这些
`wget https://raw.github.com/rackerhacker/MySQLTuner-perl/master/mysqltuner.pl`

`chmod +x mysqltuner.pl`

`./mysqltuner.pl`

# c# - 在行选择 JQgrid

> ID：14719674
> 
> 赞同：0
> 
> 时间：2013-02-06T00:44:39.433
> 
> 标签：c#, jqgrid-asp.net

我有两个表和 2 个 JQGrid，当我单击第一个 GRID 上的行时，
如果第一个表上的 id 与第二个表上的 id 相同，
它将显示第二个 GRID 上的所有项目

**表 1**
idA 名称
1 A
2 B
3 C

**表 2**
用户 ID idB
1 3
2 3
3 3
4 3

这是我的代码（用于在 grid2 中显示项目）

```
protected void JQGrid1_OnRowSelected(object sender, Trirand.Web.UI.WebControls.JQGridRowSelectEventArgs e)
{
    SqlCommand cmdSelect = new SqlCommand();
    cmdSelect.Connection = conn;
    cmdSelect.CommandText = "select * from table2 where idB= @idB";
    cmdSelect.CommandType = CommandType.Text;
    cmdSelect.Parameters.AddWithValue("@idB", idB);
    SqlDataAdapter daloadGrid = new SqlDataAdapter(cmdSelect);
    DataTable dtloadgrid = new DataTable();
    daloadGrid.Fill(dtloadgrid);
    JQGrid2.DataSource = dtloadgrid;
    JQGrid2.DataBind();
} 
```

**问题**当我单击网格一上的行时，如何在网格二上显示项目

像这个[http://www.trirand.net/examples/grid/selection/masterdetail/default.aspx](http://www.trirand.net/examples/grid/selection/masterdetail/default.aspx)

# ruby-on-rails - 未初始化的常量设计 (NameError)

> ID：14719676
> 
> 赞同：1
> 
> 时间：2013-02-06T00:44:41.613
> 
> 标签：ruby-on-rails, ruby, devise

在生产中部署我的应用程序时遇到问题...我的 Gemfile 包含 gem 'devise' 并且在开发中一切正常...

这是我的 unicorn_stderr.log 文件，其中 [XXXXXX] 是我的 rails 应用程序文件夹。

```
I, [2013-02-05T13:49:10.820924 #18780]  INFO -- : Refreshing Gem list
E, [2013-02-05T13:49:14.488684 #18777] ERROR -- : uninitialized constant Devise (NameError)
[XXXXXX]/releases/20130205012052/config/initializers/devise.rb:3:in `<top (required)>'
[XXXXXX]/shared/bundle/ruby/1.9.1/gems/railties-3.2.11/lib/rails/engine.rb:588:in `block (2 levels) in <class:Engine>'
[XXXXXX]/bundle/ruby/1.9.1/gems/railties-3.2.11/lib/rails/engine.rb:587:in `each'
[XXXXXX]/shared/bundle/ruby/1.9.1/gems/railties-3.2.11/lib/rails/engine.rb:587:in `block in <class:Engine>'
[XXXXXX]/shared/bundle/ruby/1.9.1/gems/railties-3.2.11/lib/rails/initializable.rb:30:in `instance_exec'
[XXXXXX]/shared/bundle/ruby/1.9.1/gems/railties-3.2.11/lib/rails/initializable.rb:30:in `run'
[XXXXXX]/shared/bundle/ruby/1.9.1/gems/railties-3.2.11/lib/rails/initializable.rb:55:in `block in run_initializers'
[XXXXXX]/shared/bundle/ruby/1.9.1/gems/railties-3.2.11/lib/rails/initializable.rb:54:in `each'
[XXXXXX]/shared/bundle/ruby/1.9.1/gems/railties-3.2.11/lib/rails/initializable.rb:54:in `run_initializers'
[XXXXXX]/shared/bundle/ruby/1.9.1/gems/railties-3.2.11/lib/rails/application.rb:136:in `initialize!'
[XXXXXX]/shared/bundle/ruby/1.9.1/gems/railties-3.2.11/lib/rails/railtie/configurable.rb:30:in `method_missing'
[XXXXXX]/releases/20130205012052/config/environment.rb:5:in `<top (required)>'
config.ru:4:in `require'
config.ru:4:in `block in <main>'
[XXXXXX]/shared/bundle/ruby/1.9.1/gems/rack-1.4.4/lib/rack/builder.rb:51:in `instance_eval'
[XXXXXX]/shared/bundle/ruby/1.9.1/gems/rack-1.4.4/lib/rack/builder.rb:51:in `initialize'
config.ru:1:in `new'
config.ru:1:in `<main>'
[XXXXXX]/shared/bundle/ruby/1.9.1/gems/unicorn-4.5.0/lib/unicorn.rb:44:in `eval'
[XXXXXX]/shared/bundle/ruby/1.9.1/gems/unicorn-4.5.0/lib/unicorn.rb:44:in `block in builder'
[XXXXXX]/shared/bundle/ruby/1.9.1/gems/unicorn-4.5.0/lib/unicorn/http_server.rb:718:in `call'
[XXXXXX]/shared/bundle/ruby/1.9.1/gems/unicorn-4.5.0/lib/unicorn/http_server.rb:718:in `build_app!'
[XXXXXX]/shared/bundle/ruby/1.9.1/gems/unicorn-4.5.0/lib/unicorn/http_server.rb:591:in `init_worker_process'
[XXXXXX]/shared/bundle/ruby/1.9.1/gems/unicorn-4.5.0/lib/unicorn/http_server.rb:611:in `worker_loop'
[XXXXXX]/shared/bundle/ruby/1.9.1/gems/unicorn-4.5.0/lib/unicorn/http_server.rb:500:in `spawn_missing_workers'
[XXXXXX]/shared/bundle/ruby/1.9.1/gems/unicorn-4.5.0/lib/unicorn/http_server.rb:511:in `maintain_worker_count'
[XXXXXX]/shared/bundle/ruby/1.9.1/gems/unicorn-4.5.0/lib/unicorn/http_server.rb:277:in `join'
[XXXXXX]/shared/bundle/ruby/1.9.1/gems/unicorn-4.5.0/bin/unicorn:121:in `<top (required)>'
[XXXXXX]/shared/bundle/ruby/1.9.1/bin/unicorn:23:in `load'
[XXXXXX]/shared/bundle/ruby/1.9.1/bin/unicorn:23:in `<main>'
E, [2013-02-05T13:49:14.502380 #17308] ERROR -- : reaped #<Process::Status: pid 18777 exit 1> worker=1
I, [2013-02-05T13:49:14.502544 #17308]  INFO -- : worker=1 spawning...
I, [2013-02-05T13:49:14.512618 #18783]  INFO -- : worker=1 spawned pid=18783
I, [2013-02-05T13:49:14.512882 #18783]  INFO -- : Refreshing Gem list 
```

我不明白这个问题......我用谷歌搜索了这个但我发现没有任何帮助，我希望有人能帮助我！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-12T14:01:07.337

我修复了它......我的`script/rails`并且`config/unicorn_init.sh`不可执行，所以`chmod u+x`这些文件的简单解决了我的问题。这不是设计的问题！

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2019-06-04T06:39:23.970

在我使用 Devise 部署新版本后，今天在生产服务器上遇到了同样的问题。我阅读了很多主题，检查了所有配置文件，一切正常，但独角兽在日志文件中写入了下一个：

> 错误——：未初始化的常量设计（NameError）

我的解决方案是：停止并启动独角兽守护进程。重新启动没有帮助。作为成功的标志 - 您需要检查 /tmp/pids/ 文件夹。当您停止该过程时，此文件夹将变为空。

# oracle10g - 联盟在 oracle 中不起作用

> ID：14719677
> 
> 赞同：0
> 
> 时间：2013-02-06T00:44:44.917
> 
> 标签：oracle10g

以下是用于根据特定条件检索记录的查询。当我单独使用查询时，我得到了结果，但是当我添加一个联合时，它给了我错误，因为命令没有正确结束。

```
 select ltrim(rtrim(LV_ID)) || '|' ||  ltrim(rtrim(EXPS_TYP_CD)) || '|'
from sysadm.OM_CDM_PC_HNDSHAKE
where ltrim(rtrim(PROC_ID)) in 'B3_HNDSHK_OTC' and RUN_ID = 'ME-BD10'
and FISCAL_YEAR=2012 and ACCOUNTING_PERIOD=8 and BUS_DAY_NO=10
and ltrim(rtrim(LV_ID)) not in (' ','0','002','BEAD0')
order by ltrim(rtrim(LV_ID)) || '|' || ltrim(rtrim(EXPS_TYP_CD)) || '|'
union
select ltrim(rtrim(LV_ID)) || '|' ||  ltrim(rtrim(EXPS_TYP_CD)) || '|'
from sysadm.OM_CDM_PC_HNDSHAKE
where ltrim(rtrim(PROC_ID)) in 'B3_HNDSHK_OTC' and RUN_ID = 'ME-BD10'
and FISCAL_YEAR=2012 and ACCOUNTING_PERIOD=8 and BUS_DAY_NO=10
and ltrim(rtrim(LV_ID)) is null
order by ltrim(rtrim(LV_ID)) || '|' || ltrim(rtrim(EXPS_TYP_CD)) || '|' 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-06T01:13:07.970

我怀疑问题在于工会的两个部分都有“order by”条款。尝试删除这些，看看你会得到什么。如果这给了你一个结果，那么你就可以在外部添加一个订单。

或者您可能想尝试重写您的查询以使用“或”而不是“联合”。

就像是：

```
select ltrim(rtrim(LV_ID)) || '|' ||  ltrim(rtrim(EXPS_TYP_CD)) || '|'
   from sysadm.OM_CDM_PC_HNDSHAKE
where 
   (ltrim(rtrim(PROC_ID)) in 'B3_HNDSHK_OTC' and RUN_ID = 'ME-BD10'
     and FISCAL_YEAR=2012 and ACCOUNTING_PERIOD=8 and BUS_DAY_NO=10
     and ltrim(rtrim(LV_ID)) not in (' ','0','002','BEAD0')) 
   or
   (ltrim(rtrim(PROC_ID)) in 'B3_HNDSHK_OTC' and RUN_ID = 'ME-BD10'
     and FISCAL_YEAR=2012 and ACCOUNTING_PERIOD=8 and BUS_DAY_NO=10
     and ltrim(rtrim(LV_ID)) is null)
order by ltrim(rtrim(LV_ID)) || '|' || ltrim(rtrim(EXPS_TYP_CD)) || '|' 
```

不幸的是，我目前没有一个 oracle 实例来测试它，但是当你从联合的两个部分的同一张表中选择相同的东西时，你应该可以用“或”来做。

# segue - 条形按钮项目可以同时连接到 IBAction 和 StoryBoard 到模态视图控制器吗？

> ID：14719678
> 
> 赞同：1
> 
> 时间：2013-02-06T00:44:47.140
> 
> 标签：segue

我有一个名为“完成”（系统按钮）的条形按钮项目，我有一个从这个按钮开始的 segue 来推动模态视图控制器。在推送模态 VC 之前，我有一些不能为空的数据字段。所以我有一个 IBAction 附加到完成按钮。在 IBAction 方法中，如果用户按下“完成”按钮并且数据为空，则会显示警报视图，否则我调用 performSegueWithIdentifier 来推送模态视图控制器。

当应用程序在模拟器模式下运行时，即使数据为空，按下“DOne”按钮也会推动模态 VC。我的 IBAction 方法没有被调用。但是，如果我删除 Segue，然后运行该应用程序，则会显示警报视图并显示正确的消息。

不可能在 Bar Button 项目上同时拥有 IBAction/StoryBoard Segue 吗？下面是我的代码。我在故事板中创建了带有标识符“NewRelationDoneToEditRelationVCSegue”的模态类型的segue。

```
- (IBAction)newViewControllerDoneButtonPressed:(id)sender 
{     
   if (self.groupSelected == NULL)
 {
   UIAlertView *alert = [[UIAlertView alloc] initWithTitle: @"Select Group" message: @"Please Select a Group for your Contact" delegate: self cancelButtonTitle:@"OK" otherButtonTitles:nil];
   alert.alertViewStyle = UIAlertViewStyleDefault;
   [alert show];
 } 
else 
{
   NSLog(@"test");
   [self performSegueWithIdentifier:@"NewRelationDoneToEditRelationVCSegue" sender:self];
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-06T18:40:38.903

问题已解决。我删除了从“完成”按钮到模态视图控制器的 segue。而是通过 CTRL 键从原始视图控制器底部最左边的小图标拖动到模态视图控制器来创建一个 segue。基本上创建了一个手动segue。它正在工作，因此栏按钮项目不能同时将 IBAction / segue 链接到它。它是任何一个。您必须创建一个手动 segue 来执行 IBAction，然后推送另一个视图控制器。您也可以参考 [this question] ( [Why a bar button item on a NavigationViewController won't trigger an IBAction](https://stackoverflow.com/questions/12830738/why-a-bar-button-item-on-a-navigationviewcontroller-wont-trigger-an-ibaction) "

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-06T00:51:53.897

我假设它只是因为您的 groupSelected bool 不等于 NULL。当视图加载时，布尔默认为 no，除非初始化为 yes。更改您的 if 语句以检查其是否等于否。然后，当有人点击你的一件东西时，只需将其设置为是。很好走。

# php - 如何在搜索框中获取结果的值

> ID：14719687
> 
> 赞同：0
> 
> 时间：2013-02-06T00:45:20.657
> 
> 标签：php

这与我在 search.php 中提出的另一个问题“（[在搜索框上获取结果](https://stackoverflow.com/questions/14683856/get-result-on-search-box/14684518#14684518)）”有关。我在执行搜索框的结果时做了一些更改，如下所示，这将在复选框形式。

```
 foreach($results as $result) {

  echo "<input type = 'checkbox' name ='studid[]'          value='".$result['studId']." onchange='get_searched_value()''>";
   echo ' ', $result['fname'],'  ',$result['mname'],' ',$result['lname'],'<br/>';
        } 
```

我创建了另一个表单名称 regitrcand.php，我只在此处包含表单 search.php。

```
<form method="post" name="searched" action="registercand.php">
                    <?php  require_once('search.php'); ?>
                    <input type="submit" name="select" value="Select">
                    </form>
//here i want to get the value of my search.php(foreach result) from the checked/selected result as i click the select button.. 
<?php
if(isset($_POST['select'])){
$studid = $_POST['studid'];
$position = $_POST['position'];
 echo $studid;
     echo $position;
}
echo "<table>";

echo "<tr><td>Running for:</td></tr><tr><td><select name='position'>
                <option value='0' style='font-size: 1em;'>---SELECT---</option>
                <option value='1'>Chairman</option>
                <option value='2'>Vice Chairman</option>
                <option value='3'>Secretary</option>
                <option value='4'>Treasurer</option>
                <option value='5'>Auditor</option>
                <option value='6'>Bus. Manager</option>
                <option value='7'>P.I.O</option>
                <option value='8'>Councilor</option>
                <option value='9'>CCEITE Representative</option>
                <option value='10'>CCJE Representative</option>
                <option value='11'>CAS Representative</option>
                <option value='12'>CTE Representative</option>
                <option value='13'>CBMA Representative</option></td></tr> ";
        $yrnw = date("Y");
        $lyr = 1;
        $lstyr = $yrnw - $lyr ;
        $sy = 10 + $yrnw;
    echo "<tr><td>SY:</td></tr><tr><td><select name= 'sy'>";              
             for($i=$yrnw; $i<$sy ; $i++){
            $lst = $i -1;
            echo "<option value='$i'>$lst-$i<br/></option>";
                       } 
echo "</select></td></tr>
    //here i put save button for another purpose, the result i selected from above will be save into my database. 
<tr><td><input type='button' name='save' value='Save'/></td></tr>
</table>
";
?> 
```

流程是这样的。从我的搜索框中执行所有结果后，我将检查学生的姓名以选择候选人（2 个或更多）并单击选择按钮，然后将选择的名称设置为他/她的职位选择一个选项，然后单击保存按钮保存在我的表中。我怎么可能得到我的复选框的值并保存按钮？请帮助，并给我一些建议....

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-06T00:54:00.497

问题是什么？在每个复选框上输入 name="candidates[]"，然后使用 $_REQUEST['candidates'] 并返回一个包含所有已选中候选人的数组

# c++ - 在 RC4 解密期间字符串被切断

> ID：14719692
> 
> 赞同：0
> 
> 时间：2013-02-06T00:45:55.297
> 
> 标签：c++, encryption

**编辑：**

似乎错误出在`ReadResource()`函数内。在解密之前打印输出时，代码已经被切断。

**旧文：**

我在我的应用程序资源中存储了一个 RC4 加密字符串。因为 RC4 加密具有最大字符串大小，所以我将大字符串拆分为子字符串并用分隔符划分它们。

现在，我的应用程序应该从资源中读取。然后使用分隔符拆分它们，解密每个子字符串并再次组合它们。

当使用'testestestestest........test'作为字符串尝试此操作时，它可以工作，但如果我使用例如'Lorem ipsum dolor sit amet，consetetur sadipscing elitr'，它会在解密期间切断部分字符串。

这是 RC4 代码：

```
char* rc4_crypt( char *s, size_t datalen, char *d, size_t keylen)

{
unsigned char S[SIZE];
char *data = s;
char *key = d;
int i,j,k,tmp;

  for(i = 0; i < SIZE;i++)
   S[i] = i;

  for(j = i = 0; i < SIZE;i++) {
   j = (j + S[i] + key[i%keylen]) % SIZE;
   tmp = S[i];
   S[i] = S[j];
   S[j] = tmp;   
  }

  for(i = j = k = 0; k < datalen;k++) {
   i = (i + 1) % SIZE;
   j = (j + S[i]) % SIZE;
   tmp = S[i];
   S[i] = S[j];
   S[j] = tmp;
   tmp = S[(S[i] + S[j]) % SIZE];
   data[k] ^= tmp;
  }
  return data;
} 
```

这是处理拆分的代码：

```
std::vector<std::string> &split(const std::string &s, 
                                char delim, std::vector<std::string> &elems) {
    std::stringstream ss(s);
    std::string item;
    while(std::getline(ss, item, delim)) {
        elems.push_back(item);
    }
    return elems;
}

std::vector<std::string> split(const std::string &s, char delim) {
    std::vector<std::string> elems;
    return split(s, delim, elems);
}
void print (std::string &elem)
{
    //This is because somehow 'ul' is still included 
    //as an extra element, this sorts it out
    if(elem.length() !=2) { 
        cout << elem << '\n';
        char *output = rc4_crypt((char *)elem.c_str(),
            strlen(elem.c_str()),key, strlen(key));
        cout << output << '\n';
        FinalString = FinalString + output;
    }

} 
```

这是我的主要功能：

```
int main() {
  char *output;
  output = ReadResource();
  std::string stringy;
  stringy = output;
  std::vector<std::string> splitted = split(stringy,'+ul+');
  for_each (splitted.begin(), splitted.end(), print);
    cout << endl;
  cout << FinalString << '\n';
} 
```

有谁知道为什么会这样？

**编辑：**

我正在添加我在 vb.net 中使用的 RC4 函数来加密代码。也许这可以帮助：

```
Private Shared Function Proper_RC4(ByVal Input As Byte(), ByVal Key As Byte()) As Byte()

        Dim i, j, swap As UInteger
        Dim s As UInteger() = New UInteger(255) {}
        Dim Output As Byte() = New Byte(Input.Length - 1) {}

        For i = 0 To 255
            s(i) = i
        Next

        For i = 0 To 255
            j = (j + Key(i Mod Key.Length) + s(i)) And 255
            swap = s(i) 'Swapping of s(i) and s(j)
            s(i) = s(j)
            s(j) = swap
        Next

        i = 0 : j = 0
        For c = 0 To Output.Length - 1
            i = (i + 1) And 255
            j = (j + s(i)) And 255
            swap = s(i) 'Swapping of s(i) and s(j)
            s(i) = s(j)
            s(j) = swap
            Output(c) = Input(c) Xor s((s(i) + s(j)) And 255)
        Next

        Return Output
    End Function 
```

**编辑2：**

这是 ReadResource() 函数：

```
char *ReadResource() {
    TCHAR buffer[MAX_PATH];
    GetModuleFileName(NULL,buffer,sizeof(buffer));
    HMODULE ModuleH = GetModuleHandle(buffer);
    HRSRC Res = FindResource(ModuleH, L"1", L"DATA");
    HGLOBAL GlobalH = LoadResource(ModuleH,Res);
    void * ptr = LockResource(GlobalH);
    Size = SizeofResource(ModuleH,Res);
    CHAR *m_pResourceBuffer = new CHAR[Size];
    if (m_pResourceBuffer != NULL)
    {
        memcpy(m_pResourceBuffer, ptr, Size);

    }
    return m_pResourceBuffer;
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-06T00:54:57.627

如果我理解正确，`ReadResource`就是读取加密数据。如果是这样，那么该数据的中间很容易有一个零。当分配给 时，该零将被视为 NULL 终止符`string`。因此，它只会解密直到第一个零。可能是第一个示例在加密结果中没有以零结尾，但第二个示例确实如此。

但正如其他人已经在评论中指出的那样，RC4 应该没有必要将其分解成碎片。它应该能够在一次调用中全部加密。实际上，在每次重置 s-box 的同时继续使用相同的密钥进行加密是不好的（不安全的）。结果非常脆弱。这[在此 Wikipedia 文章](http://en.wikipedia.org/wiki/Stream_cipher_attack)中有一些描述。

如果将其加密为单个流，则处理逻辑会变得简单得多。当您读取数据（例如，通过`ReadResource`）时，您还需要获取长度。该函数将需要返回长度。然后在调用中使用该长度来解密数据。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-06T01:05:52.660

您对此代码有一些问题。

警告：多字符常量，`std::getline`使用一个字符分隔符。这也是`ul`出现在数组中的原因`splitted`

```
splitted = split(stringy,'+ul+'); 
```

您修改从返回的字符串`c_str()`

```
rc4_crypt((char *)elem.c_str(), ...); 
```

从[`std::string::c_str`](http://www.cplusplus.com/reference/string/string/c_str/)

> 程序不得更改此序列中的任何字符。返回的指针指向字符串对象当前用于存储符合其值的字符的内部数组。
> 
> 返回的指针可能会因进一步调用修改对象的其他成员函数而失效。

最后，最有可能的截止点是

```
data[k] ^= tmp; 
```

如果`data[k] == tmp`，那么这将给出零，并且您的字符串在此位置被截断。

# matlab - 通过拆分矩阵在 Matlab 中绘图

> ID：14719694
> 
> 赞同：1
> 
> 时间：2013-02-06T00:45:58.267
> 
> 标签：matlab, plot

我有两个向量`xline`，`yline`每个向量都有 63 个值，这是我从之前的计算中得出的。在这 63 个值中，前 21 个值`xline`表示一条线的 x 坐标，同样`yline`它们是 y 坐标。接下来的 21 个值用于第二行，依此类推。

如何将这 63 个值分成 3 条单独的线并将它们绘制在 Matlab 的 xy 图中？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-06T00:49:16.017

`plot(reshape(xline,[21 3])', reshape(yline,[21 3])')`应该做的伎俩。可能你不需要转置两者 - 我永远不记得 Matlab 有多喜欢它的多线图。

这是因为 Matlab 以行优先存储矩阵：因此，当您重塑数组时，您会创建多行（变为列），并且`plot`命令会从那里找出您想要的内容。

# autohotkey - Capslock + 分号无法正常工作

> ID：14719696
> 
> 赞同：1
> 
> 时间：2013-02-06T00:46:22.297
> 
> 标签：autohotkey

这是预期的行为`Capslock+; = add semicolon to end of line`

```
Capslock & `;:: Send, {End}`; 
```

这在当前位置添加了一个分号，`End`似乎不起作用。但是，如果我将其更改为

```
Capslock & a:: Send, {End}`; 
```

它按预期工作。有任何想法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-16T08:03:46.360

原本的

```
Capslock & `;:: Send, {End}`; 
```

适用于我的 AHK Basic 和 AHK_L。我不知道为什么它不适合你。

或者，您可以尝试 SC 键码

```
Capslock & SC027::Send, {End}`; 
```

[http://www.autohotkey.com/docs/KeyList.htm#SpecialKeys](http://www.autohotkey.com/docs/KeyList.htm#SpecialKeys)

# weka - Weka 中的训练集精度

> ID：14719698
> 
> 赞同：0
> 
> 时间：2013-02-06T00:46:54.450
> 
> 标签：weka

我在 Weka 中运行了一些简单的分类器来测试水域，但我找不到这个特定的输出数据。

当使用 % split 之类的东西时，我怎样才能获得训练集的准确度，而不仅仅是测试集的准确度？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-06T15:38:49.063

`Weka Explorer``Percentage split`仅在您指定训练集时报告测试集的准确性。

要获得训练集的准确性，您可以选择`Use training set`，但在这种情况下，将使用整个数据（您可以在使用 Weka 之前对其进行拆分）。

一般来说，测试准确性更重要，因为它显示了算法如何*泛化*和处理新数据。单独训练准确率是有误导性的，因为即使算法过*拟合*数据也会变得更好

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-06T18:44:22.177

你使用训练数据来构建你的模型，所以它根本没有意义，因为你会得到很高的准确率。而且你不能用这些结果来指导“微调”，因为你可能会过度拟合（不要一概而论）。

但无论如何，你可以使用训练集来构建你的模型，保存它。一旦你有了它，就可以将你的训练集用作具有相同模型的测试集。

您还可以单击“更多选项”和“输出预测”以了解每个实例的详细情况。

# android - 使用 Google Maps v2 检索地图标记

> ID：14719699
> 
> 赞同：1
> 
> 时间：2013-02-06T00:46:57.093
> 
> 标签：android, google-maps-android-api-2

我一直在尝试在点击事件之外显示标记的信息窗口。我知道你可以使用

```
marker.showInfoWindow(); 
```

我的问题是首先获得标记。我尝试了一些效果：

```
Marker marker;

//then later
marker = mMap.addMarker(new MarkerOptions()
             .position(new LatLng(0, 0))
             .title("Hello world"));

//then later
if (condition)
    marker.showInfoWindow(); 
```

对我来说，这看起来不错，但是当我实现它时，没有出现任何窗口。当我调试时，它的 id 看起来与`marker`传入的“相同”标记的 id 不同`onMarkerClick(Marker marker)`

所以要么我错过了一些东西，要么有更好的方法来检索标记？（似乎没有类似`mMap.getMarkers()`or的方法是没有意义的`mMap.findMarkerById()`）

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-06T05:35:23.830

尴尬的是，我在这里所拥有的实际上确实可以正常工作。我的问题是我的方法`infoWindow`中有对我这一代至关重要的代码`onMarkerClick()`，因此需要将其从那里拉出到一个方法中，以便我可以在两个地方调用它。

所以任何未来的谷歌人，我的代码是你需要它的解决方案——尽管你可能不用谷歌搜索就可以解决

# facebook - Facebook 聊天 API 是否支持图片（照片）附件？

> ID：14719700
> 
> 赞同：3
> 
> 时间：2013-02-06T00:46:58.090
> 
> 标签：facebook, xmpp, facebook-chat

我正在考虑将我的 IM 应用程序与 Facebook 聊天 API 集成。从文档（[https://developers.facebook.com/docs/chat/](https://developers.facebook.com/docs/chat/)）来看，尚不清楚我是否可以发送和接收图像/照片附件。看起来它在一年前是不可行的（[在 Facebook 聊天中发送照片](http://facebook.stackoverflow.com/questions/13873691/sending-photo-in-facebook-chat)），但我希望有所改变？具体来说：

(1) 我可以使用 Facebook 聊天 API 来检索附加到传入消息的照片吗？

(2) 我可以在外发邮件中附加照片吗？

谢谢！

# javascript - 嵌入的 youtube 视频启动时如何停止音乐？

> ID：14719701
> 
> 赞同：-1
> 
> 时间：2013-02-06T00:47:27.237
> 
> 标签：javascript, jquery, html

我有一个 HTML 网站，音乐在进入时开始播放，但我希望它在用户点击嵌入到我网站的 youtube 视频上播放时停止。所以它使背景音乐和视频音乐无法运行同时因为这很烦人。

关于如何做到这一点的任何想法？或者是否有解决此问题的方法？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-06T00:56:57.293

`onStateChange`使用 JavaScript检测玩家的状态变化（事件）： [https ://developers.google.com/youtube/js_api_reference#Events](https://developers.google.com/youtube/js_api_reference#Events)

如果视频是使用`iframe`（如评论所示）加载的，请参阅[YouTube`iframe`嵌入](https://developers.google.com/youtube/iframe_api_reference)指南（请注意检测播放器事件的代码示例）。

**例子**

```
 function onYouTubeIframeAPIReady() {
    player = new YT.Player('player', {
      height: '390',
      width: '640',
      videoId: 'u1zgFlCw8Aw',
      events: {
        'onStateChange': onPlayerStateChange
      }
    });
  }

  function onPlayerStateChange(event) {
    if (event.data == YT.PlayerState.PLAYING) {
      // code to stop the audio player should probably go here
    }
  } 
```

当播放器启动时，使用 JavaScript 停止音频。您还没有告诉我们它是如何嵌入到页面中的，但几乎任何播放器都可以通过脚本停止（甚至`bgsound`可以被黑客入侵）。

并鼓励您的客户在页面加载时不要自动播放音乐。从纯粹的商业角度来看，它可能会让你付出代价。

# ios - UIimageView 和 Acessory View 在 TableViewCell 中单独工作

> ID：14719704
> 
> 赞同：1
> 
> 时间：2013-02-06T00:47:43.327
> 
> 标签：ios, uitableview

我正在开发一个类似于 Apple 提醒应用程序的应用程序。我有一个带有数据的 tableView。该单元格具有 UIImageView 和 Disclosure Indicator 附件视图。当它的任何一行被选中时，就会推送一个视图控制器。

我希望每行的 UIImageView 与行选择分开工作，就像在 Apple 提醒应用程序中一样。我怎样才能做到这一点？

我已经尝试将 UIimageview 作为单元格的子视图，并将 UITapGestureRecognizer 添加到其中。它适用于最后插入的行，但不适用于其他行。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-06T01:00:53.863

与其继承 UIImageView，不如考虑继承 UITableViewCell。在您的子类中，您仍然可以将 UITapGestureRecognizer 添加到 UIImageView，但您将针对您的单元格子类的方法（而不是您的表控制器，尽管您没有说明处理程序当前的目标是什么）。

将一个 tapRecognizer 添加到您的自定义单元格的 UIImageView，并在您的自定义单元格上添加一个 BOOL 标志（例如，imageViewTapped）。在您的点击处理程序中，将 imageViewTapped 设置为 YES。

现在，无论点击是否在 imageVIew 上，您的 tableView 控制器仍将调用 didSelectRowWithIndexPath。因此，在 didSelectRowAtIndexPath 中，评估自定义单元格的 imageViewTapped 属性。如果已设置标志，则将 viewController A（用于 imageView 行为）推送到导航堆栈上。如果 imageViewTapped == NO，推送 viewController B（大概是你已经过渡到的）。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-06T02:09:10.987

@阿德尔。您可以在 imageView 上放置一个透明按钮以响应用户的触摸。

```
CGRect imageRect = (CGRect){100, 100, 100, 100};
UIImageView *imageView = [[[UIImageView alloc] initWithFrame:imageRect] autorelease];
imageView.backgroundColor = [UIColor yellowColor];
[self.view addSubview:imageView];
imageView.userInteractionEnabled = YES;

UIButton *maskBtn = [UIButton buttonWithType:UIButtonTypeCustom];
maskBtn.frame = imageView.bounds;
maskBtn.backgroundColor = [UIColor clearColor];
[maskBtn addTarget:self action:@selector(maskBtnDidClick:) forControlEvents:UIControlEventTouchUpInside];
[imageView addSubview:maskBtn]; 
```

注意 imageView 的 userInteractionEnabled 默认为 NO。希望有所帮助。:)

# regex - 搜索或查找包含字符串或模式匹配的文件

> ID：14719705
> 
> 赞同：1
> 
> 时间：2013-02-06T00:47:54.920
> 
> 标签：regex, perl, pattern-matching

在不使用任何 Perl 模块的情况下，是否可以在 Perl 中只用几行代码来执行以下操作？

```
find . -type f | xargs grep -l "2000.*Created" | cut -c3-100 
```

上面只给了我包含“2000.*Created”的文件的文件名。我想在 Perl 中执行此操作并将结果推送到一个数组（文件名数组）中。

我发现 Perl File::Finder 模块具有类似的功能，但在我当前的工作环境中，我无法访问或下载任何模块。

这可以用一两行代码完成吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-06T01:09:45.883

当然这是可能的。

```
perl -MFile::Find -lwe '
    find(sub { -f && push @ARGV, $File::Find::name }, '.'); 
    while(<>) { if (/2000.*Created/) { print substr($ARGV,2); close ARGV; } }' 
```

[`File::Find`](http://search.cpan.org/perldoc?File%3a%3aFind)是一个核心模块，所以它应该已经在你的系统上。该`find`子例程将找到所有常规文件并将它们推送到`@ARGV`，以便我们可以使用菱形运算符读取它们。然后我们循环使用您的正则表达式检查内容的文件。如果找到，我们打印不带前 2 个字符的文件名（我假设它相当于`cut -c3-100`）。`close ARGV`线路短路以防止多次匹配。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-07T03:55:46.843

我更喜欢 File::Find 这个例子——它更便携，而且 File::Find 可以做一些非常漂亮的事情。但是，我将提到一种方法，它可以在没有内置支持的情况下对其他命令有用。

```
open F,'find . -type f | xargs grep -l "2000.*Created" | cut -c3-100 |' || die 'cannot execute';
while(<F>) { chomp ; push(@a,$_)} 
```

注意打开的尾随管道 ( `|`) ... 这很重要，因为 Perl 会自动为您完成所有连接管道的工作。

这也可以使用较新的 3 参数 open 来编写：

```
open my $fh, '-|', 'find . -type f | xargs grep -l "2000.*Created" | cut -c3-100' || die 'cannot execute';
while(<$fh>) { chomp ; push(@a,$_)} 
```

作为旁注，`find | xargs`如果您的文件名带有空格，将会遇到一些问题。您可以通过`-print0`操作 on`find`和`-0`标记 on来解决这个问题`xargs`：

```
find . -type f -print0 | xargs -0 -l "2000.*Created" | cut -c3-100 
```

# r - 预测式函数：字符串和符号之间的转换

> ID：14719706
> 
> 赞同：0
> 
> 时间：2013-02-06T00:47:57.383
> 
> 标签：r

我正在尝试`predict`为 lme4 的`lmer`模型编写样式函数。这个想法是预测函数将在包含因子和变量级别的数据帧上工作，这种数据帧由以下产生`expand.grid`：

```
level_df <- expand.grid(a=1:3, b=4:6) 
```

我现在可以得到将给定效果/交互计算为字符串的公式：

```
formula_string <- "a * b + 3" 
```

但是，我能够将该公式应用于级别数据框的唯一方法（在这种情况下，评估 and 的每个值的公式`a`）是通过一些非常自由且可能危险的使用和`b`之类的东西：`assign``eval`

```
EffectFunction <- function(df_row, formula_string) {
  l_cols <- colnames(df_row)
  for (i in 1:ncol(df_row)) {
    assign(l_cols[i], df_row[1, i])
  }
  parsed <- parse(text=formula_string)
  df_row$effect_val <- eval(parsed)
  return(df_row)
}

pred_results <- adply(
  level_df,
  1,
  formula_string=formula_string,
  EffectFunction
) 
```

是否有更安全、更快捷的方式在字符串和符号/变量名之间进行转换？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-06T01:10:22.790

您可以使用 a`data.frame` 作为 envir 参数`eval`

所以

```
 eval(parse(text = formula_string), envir = level_df) 
```

应该可以很好地工作，因为它会（首先）在其中`level_df`查找任何变量。

# java - 将牙套放置在正确的位置有问题吗？

> ID：14719711
> 
> 赞同：0
> 
> 时间：2013-02-06T00:48:48.907
> 
> 标签：java

我对编程有点陌生，我努力想弄清楚的问题就是这个。我的控制台应用程序询问用户他们想要输入多少测试分数来计算所有分数的平均值和总分。如果他们输入 3，它会要求他们输入 3 个测试分数，然后它会显示所有分数的平均值和总分。然后它会询问他们是要继续还是结束程序，如果他们输入yes continue，它应该从头开始。我的问题是，当我说是时，它并没有清除总分或分数，它只是从前一个继续，只是将新分数添加到其中。

```
 import java.util.Scanner;

 public class TestScoreApp
 {
       public static void main(String[] args)
       {
           // display operational messages
           System.out.println("Please enter test scores that range from 0 to 100.");
           System.out.println("To end the program enter 999.");
           System.out.println();  // print a blank line

           // initialize variables and create a Scanner object
           int scoreTotal = 0;
           int scoreCount = 0;
           int testScore = 0;
           Scanner sc = new Scanner(System.in);
           String choice = "y";

           // get a series of test scores from the user
           while (!choice.equalsIgnoreCase("n"))
           {
               System.out.println("Enter the number of test score to be entered: ");
               int numberOfTestScores = sc.nextInt();

               for (int i = 1; i <= numberOfTestScores; i++)
               {
                    // get the input from the user
                    System.out.print("Enter score " + i + ": ");
                    testScore = sc.nextInt();

                    // accumulate score count and score total
                    if (testScore <= 100)
                    {
                         scoreCount = scoreCount + 1;
                         scoreTotal = scoreTotal + testScore;
                    }
                    else if (testScore != 999)
                          System.out.println("Invalid entry, not counted");

                }
                double averageScore = scoreTotal / scoreCount;
                String message = "\n" +
                     "Score count:   " + scoreCount + "\n"
                   + "Score total:   " + scoreTotal + "\n"
                   + "Average score: " + averageScore + "\n";
                System.out.println(message);
                System.out.println();
                System.out.println("Enter more test scores? (y/n)");
                choice= sc.next();
          }

    // display the score count, score total, and average score

    }
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-06T00:53:02.043

只需在 while 循环开始后移动分数变量声明：

```
// create a Scanner object
Scanner sc = new Scanner(System.in);
String choice = "y";

// get a series of test scores from the user
while (!choice.equalsIgnoreCase("n"))
{
    // initialize variables
    int scoreTotal = 0;
    int scoreCount = 0;
    int testScore = 0;

    System.out.println("Enter the number of test score to be entered: ");
    int numberOfTestScores = sc.nextInt(); 
```

这样，每次进程再次开始时，它们将被初始化为 0。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-06T00:53:39.443

while 循环中的第一条语句应该将 scoreTotal 和 scoreCount 设置为 0。

# c++ - 在c ++中使用单词作为分隔符拆分字符串

> ID：14719712
> 
> 赞同：1
> 
> 时间：2013-02-06T00:48:49.627
> 
> 标签：c++, string

我的绳子真的很长！并且它之间有单词'post'，我想使用'post'作为分隔符来标记字符串！我遇到了 boost 库，它使用 split_regex 或类似的东西来做到这一点！如果有人知道一种真正有效的方法，请告诉我

-谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-06T00:59:52.677

您可以查看[Boost String Algorithms Library](http://www.boost.org/doc/libs/1_53_0/doc/html/string_algo/reference.html#header.boost.algorithm.string.iter_find_hpp)

```
#include <string>
#include <vector>
#include <algorithm>
#include <iterator>
#include <iostream>
#include <boost/algorithm/string/iter_find.hpp>
#include <boost/algorithm/string/finder.hpp>
int main()
{
    std::string input = "msg1foomsg2foomsg3";

    std::vector<std::string> v;
    iter_split(v, input, boost::algorithm::first_finder("foo"));

    copy(v.begin(), v.end(), std::ostream_iterator<std::string>(std::cout, " "));
    std::cout << std:endl;
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-06T17:55:54.147

ppl这应该工作！在这种情况下，复杂性将是字符串中的“post”-分隔符的数量。让我知道你们是否有更好的运行时间

```
#include <iostream>
#include <string>
#include <vector>
#include <algorithm>
#include <iterator>
using namespace std;

void split(const string& str, const string& delimiter = "post") {
    vector <string> tokens;

    string::size_type lastPos = 0;
    string::size_type pos = str.find(delimiter, lastPos);

    while (string::npos != pos) {
        // Found a token, add it to the vector.
        cout << str.substr(lastPos, pos - lastPos) << endl;
        //tokens.push_back(str.substr(lastPos+4, pos - lastPos));
        lastPos = pos + delimiter.size();
        pos = str.find(delimiter, lastPos);
    }

}

int main() {
   split("wat post but post get post roast post");
} 
```

# android - 如何在 ImageView 上画线而无需重新加载它

> ID：14719715
> 
> 赞同：2
> 
> 时间：2013-02-06T00:49:07.800
> 
> 标签：android, imageview, android-canvas, draw, android-view

我试图在 ImageView 上画一条线，但每当我使用 Canvas 尝试它时，我都必须重新加载位图，这不是我的意图。有没有办法使用 Canvas 在上传的 ImageView 上简单地画一条线而无需刷新图像？或者另一种在 Android ImageView 上画线的方法？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-06T01:01:20.000

或者，如果您希望能够绘制任何线条（矩形、椭圆等），请将 ImageView 子类化到您自己的 ImageView 中并自己进行绘制。

```
public class MyImageView extends ImageView {
    Paint linePaint = new Paint();

    @Override
    protected void onDraw(Canvas canvas) {
        super.onDraw();

        // And draw your line.
        // (Be sure to have set the values/fields in linePaint earlier so that you draw the correct line/type/size/etc).
        canvas.drawLine(0, getHeight()/2, getWidth(), getHeight()/2, linePaint);

    }
} 
```

在您的布局 xml 中，不要指定 <ImageView .../>，而是指定 <com.mycompany.project.widget.MyImageView ... />。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-06T00:52:25.940

我在 Android 中画线的方式是创建一个高度或宽度为 1dp 的视图。然后将其他值设置为您想要的任何值并设置颜色。

# php - PHP 自动自触发

> ID：14719718
> 
> 赞同：2
> 
> 时间：2013-02-06T00:49:26.167
> 
> 标签：php

不确定我是否完全理解 PHP 的用途/目的，但在我看来，.php 文件仅在它被之前的某些东西调用/执行时才执行，可能是 html 或 php 文件。

一个想法，是否有可能编写一个 php 文件，并且它只会被它自己激活，例如在一段时间内，每周左右它会做一些事情？

谢谢你看...

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-06T00:51:22.793

您正在寻找[cron 工作](http://www.adminschoice.com/crontab-quick-reference)。这允许您在远程服务器上保存一行代码，该代码将根据您设置的标准执行。您可以让它执行各种文件，但 PHP 文件绝对是您可以以这种方式执行的文件之一。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-06T00:54:55.467

正如 nathan 所提到的，您将寻找一份[cron 工作](http://www.adminschoice.com/crontab-quick-reference)。这是服务器中的服务器端设置，它将以设定的时间间隔调用 url。

您似乎并不真正了解 PHP 的工作原理。在向客户端发送数据之前，PHP 脚本被称为服务器端。它们在客户端访问脚本时运行一次。

# ffmpeg - 使用 H.264（带音频）的 FFmpeg 流式传输 - Red5 媒体服务器（Ubuntu 操作系统）

> ID：14719721
> 
> 赞同：2
> 
> 时间：2013-02-06T00:49:52.977
> 
> 标签：ffmpeg, streaming, red5, rtmp

我正在尝试使用 RTMP 将带有 FFmpeg 的网络摄像头流式传输到我的 Red5 服务器。我已经使用 FLV 格式成功完成了这项工作，其中包含以下行：

```
ffmpeg -f video4linux2 -i /dev/video0 -f flv rtmp://localhost/live/livestream 
```

我是 FFmpeg 和实时流媒体的新手，我尝试使用 H.264/MPEG-4 流媒体。但是我对 FFmpeg 选项的了解有点有限（我确实在这里找到了：http: [//man.cx/ffmpeg%281%29](http://man.cx/ffmpeg%281%29)）。

所以，我的问题是：

1.  如何使用 H.264/MPEG-4 流式传输到我的 Red5 服务器？

2.  还有哪些流式传输音频的选项？

3.  最后一个问题是：

当我在 Mozilla Firefox（在 Ubuntu 上）中使用 JWPlayer 播放内容时，我有大约 5 秒的延迟。你能帮我解决这个问题吗？任何建议为什么会这样？

非常感谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-06T08:42:48.660

无需使用 ffmpeg 流式传输 H.264/MPEG-4 文件，因为 red5 已内置支持此功能。使用 ffmpeg 只会给你的 CPU 使用带来不必要的负担。Red5 会自动识别文件类型，您只需在 JWPlayer 中指定 mp4 文件。

关于延迟，据我所知，JWPlayer 默认有 3 秒的缓冲区。您可以尝试降低它（属性缓冲区长度或类似的东西）。也许 JWPlayer 也有一个“实时”属性，可以以最小的延迟进行流式传输，但我不确定这一点。删除 ffmpeg 也可能会加快该过程。

# php - PHP/Curl 的更新版本，现在程序不再工作（SSL）

> ID：14719722
> 
> 赞同：1
> 
> 时间：2013-02-06T00:49:53.307
> 
> 标签：php, ssl, curl

我用Curl用PHP编写了一个小程序，它在curl 7.21版本上运行良好。我已经更新了我的 PHP，现在使用 curl 7.26。不幸的是，现在我正在尝试访问回复的服务器（标题）：HTTP/1.1 501 Method POST 未在 RFC 2068 中定义，并且不受 Servlet API 支持。之前，使用 Curl 7.21，它回复（标题）OK，一切正常。

请帮忙，因为这让我发疯:(...

这是访问其他服务器的代码：

```
function authenticateihc($username,$password,$ihcip,$timeout,$debug=0)
{
 if (cURLcheckBasicFunctions())
 {
   // Definition of XML request according to IHC standards
   $xml_request  = "<?xml version='1.0' encoding='UTF-8'?>\n";
   $xml_request .= "<SOAP-ENV:Envelope xmlns:xsi=\"http://www.w3.org/2001/XMLSchema-instance\" xmlns:SOAP-ENV=\"http://schemas.xmlsoap.org/soap/envelope/\" xmlns:xsd=\"http://www.w3.org/2001/XMLSchema\">\n";
   $xml_request .= "<SOAP-ENV:Body>\n";
   $xml_request .= "<ns1:authenticate1 xmlns:ns1=\"utcs\" xsi:type=\"ns1:WSAuthenticationData\">\n"; 
   $xml_request .= "<ns1:password xsi:type=\"xsd:string\">".$password."</ns1:password>\n";
   $xml_request .= "<ns1:username xsi:type=\"xsd:string\">".$username."</ns1:username>\n";  
   $xml_request .= "<ns1:application xsi:type=\"xsd:string\">treeview</ns1:application>\n";
   $xml_request .= "</ns1:authenticate1>\n";
   $xml_request .= "</SOAP-ENV:Body>\n";
   $xml_request .= "</SOAP-ENV:Envelope>\n";

   $ch = curl_init();
   curl_setopt($ch, CURLOPT_FRESH_CONNECT, true); 
   curl_setopt($ch, CURLOPT_RETURNTRANSFER, true); 
   curl_setopt($ch, CURLOPT_POSTFIELDS, $xml_request);
   // Forcer cURL à utiliser un nouveau cookie de session 
   curl_setopt($ch, CURLOPT_COOKIESESSION, true); 
   curl_setopt($ch, CURLOPT_COOKIEJAR, 'cookie.txt'); 
   curl_setopt($ch, CURLOPT_URL,$ihcip.'/ws/AuthenticationService');
   curl_setopt($ch, CURLOPT_SSLVERSION, 3);
   curl_setopt($ch, CURLOPT_TIMEOUT, $timeout); 
   curl_setopt($ch, CURLOPT_CONNECTTIMEOUT, $timeout); 

   // Si l'URL est en HTTPS 
   if (preg_match('`^https://`i', $ihcip))
   { 
    // Ne pas vérifier la validité du certificat SSL 
    curl_setopt($ch, CURLOPT_SSL_VERIFYPEER, false); 
    curl_setopt($ch, CURLOPT_SSL_VERIFYHOST, false); 
   } 

   if ($debug == 1) {
      curl_setopt($ch, CURLOPT_HEADERFUNCTION, 'dbg_curl_data');
      curl_setopt($ch, CURLOPT_WRITEFUNCTION, 'dbg_curl_data');
      curl_setopt($ch, CURLINFO_HEADER_OUT, true);
   }

   $result = curl_exec($ch);
   $info = curl_getinfo($ch);

   if ($debug == 1) 
   {
      echo '<fieldset><legend>request headers</legend> <pre>', htmlspecialchars(curl_getinfo($ch, CURLINFO_HEADER_OUT)), '</pre> </fieldset>';
      echo '<fieldset><legend>xml request</legend> <pre>', htmlspecialchars($xml_request), '</pre> </fieldset>';
      echo '<fieldset><legend>response</legend> <pre>', htmlspecialchars(dbg_curl_data(null)), '</pre> </fieldset>';
      echo '<fieldset><legend>curl info</legend> <pre>error: ' . curl_error($ch).'<BR>';
      echo 'Took ' . $info['total_time'] . ' seconds to send a request to ' . $info['url'].'<BR></pre> </fieldset>';
   }

   if ($debug == 2) 
   {
       echo '<fieldset><legend>Variable</legend> <pre>', htmlspecialchars($result), '</pre> </fieldset>';
   }

   $result_from_xml = array (
    "loginSuccessful" => get_string_between($result, '<ns1:loginWasSuccessful xsi:type="xsd:boolean">' , '</ns1:loginWasSuccessful'),
    "AccountInvalid" => get_string_between($result, '<ns1:loginFailedDueToAccountInvalid xsi:type="xsd:boolean">' , '</ns1:loginFailedDueToAccountInvalid'),
    "InsufficientRights" => get_string_between($result, '<ns1:loginFailedDueToInsufficientUserRights xsi:type="xsd:boolean">' , '</ns1:loginFailedDueToInsufficientUserRights')
   );

   curl_close($ch);
   return $result_from_xml;
 }
 else 
 {
     echo "Error<br>";
     echo "_____<br>";
     echo "Curl installed on this computer: ".cURLcheckBasicFunctions()."<br>";
 }
}

function cURLcheckBasicFunctions() 
{ 
  if( !function_exists("curl_init") && 
      !function_exists("curl_setopt") && 
      !function_exists("curl_exec") && 
      !function_exists("curl_close") ) return false; 
  else return true; 
} 

function dbg_curl_data($curl, $data=null) {
  static $buffer = '';

  if ( is_null($curl) ) {
    $r = $buffer;
    $buffer = '';
    return $r;
  }
  else {
    $buffer .= $data;
    return strlen($data);
  }
}

function get_string_between($string, $start, $end){
    $string = " ".$string;
    $ini = strpos($string,$start);
    if ($ini == 0) return "";
    $ini += strlen($start);   
    $len = strpos($string,$end,$ini) - $ini;
    return substr($string,$ini,$len);
} 
```

# mysql - mysql - 取决于多个分组的其他值的动态查询

> ID：14719729
> 
> 赞同：0
> 
> 时间：2013-02-06T00:50:48.553
> 
> 标签：mysql

在我的应用程序中，有产品和产品变体组，它具有一组定义的属性，该组的产品必须声明这些属性，并且属性的组合在该产品变体组中是唯一的。

**来自亚马逊的示例屏幕：**

![在此处输入图像描述](../Images/3abd7c8748afa382e9fbc6e1b5b40b3f.png)

在图像中，第一个选择菜单显然具有所有值。下一个选择菜单取决于先前选择的值，依此类推。

这些定义的组属性具有分配给它的唯一优先级，在下面的派生表中，该优先级等于属性本身。

对于给定的属性/优先级和给定的属性/优先级-值对列表。我想检索它的可能值。值对的优先级必须小于给定的优先级。

```
public String[] getProductVariantGroupValues(int productVariantGroupId, int priority, Map<Integer, String> prevValues); 
```

一个例子使它更清楚：

我有一个 sql 语句，其中列出了相关产品定义的所有产品变体组属性：

```
+---------+----------+-------- +
| 产品 | 优先 | 价值 |
+---------+---------+---------+
| 1 | 1 | 黑色 |
| 1 | 2 | 38 |
| 1 | 3 | 点 |
| 2 | 1 | 黑色 |
| 2 | 2 | 38 |
| 2 | 3 | 条纹 |
| 3 | 1 | 黄色 |
| 3 | 2 | 40 |
| 3 | 3 | 条纹 |
+---------+---------+---------+

其他理解的观点*（优先级是任意的，只是为了理解，这种观点是微不足道的）*：

+---------+--------+--------+---------+
| 产品 | 值1 | 值2 | 价值3 |
+---------+--------+--------+---------+
| 1 | 黑色 | 38 | 点 |
| 2 | 黑色 | 38 | 条纹 |
| 3 | 黄色 | 40 | 条纹 |
+---------+--------------+

```

`priority = 3`用prevValues =调用上述方法`{(1, Black), (2, 38)}`应该会产生以下结果数组：**`{Dots, Stripes}`**.

*如果`black`选择了属性/优先级`1`并`38`选择了属性/优先级，则属性/优先级`2`唯一可能的以下值`3`是`{Dots, Stripes}`*

**该示例已简化，应支持任意数量的属性/优先级。必须动态创建查询以支持任意数量的较低优先级值。**

*也许我应该只使用具有一组固定属性的第二个表方法，这将使唯一约束和此查询非常简单。*

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-06T01:50:28.543

如果我正确理解了这个问题，那么您有一个优先级 1 和优先级 2 的值，并且希望获得所有匹配的优先级 3 值。以下查询获取产品：

```
select product
from t
group by product
having max(case when priority = 1 and value = 'Black' then 1 else 0 end) = 1 and
       max(case when priority = 2 and value = 40 then 1 else 0 end) = 1 
```

要获得优先级 3 的值需要或巧妙的选择语句（假设产品的优先级不重复）：

```
select product, max(case when priority = 3 then value end)
from t
group by product
having max(case when priority = 1 and value = 'Black' then 1 else 0 end) = 1 and
       max(case when priority = 2 and value = 40 then 1 else 0 end) = 1 
```

这些查询旨在让您了解如何在代码中构造查询。概括应该非常简单。

# java - Java HashMap 不工作

> ID：14719730
> 
> 赞同：-1
> 
> 时间：2013-02-06T00:51:04.803
> 
> 标签：java, hashmap, equals, hashcode

我想我做了所有事情，但 HashMap.get 返回 null。hashCode 返回相同的整数，equals 返回 true，key 是不可变的，但现在仍然有效。

我错过了什么？

这是我的代码：

```
public enum MyEnum_1 `AA1, AA2, AA3, AA4`;
public enum MyEnum_2 `BB1, BB2, BB3, BB4`;

public void MyClass()
{
  ...
  final MyEnum_1 enum1;
  final MyEnum_2 enum2;

  public int hashCode()
  {
    return (enum1.ordinal() * 100 + enum2.ordinal());
  }
  public boolean equals(MyClass obj2)
  {
    if (obj2 == null) return false;
    else return (enum1.equals(obj2.getEnum1()) && enum2.equals(obj2.getEnum2()));
  }
...
}
...
Map<MyClass, MyOtherClass> mappp = new HashMap<MyClass, MyOtherClass>(); 
...
mappp.put(obj1, other_obj1);
MyClass obj2 = new MyClass(obj1.getEnum1(), obj1.getEnum2());

System.out.println("hashCode: " + (obj1.hashCode() == obj2.hashCode()));
System.out.println("equals: " + obj1.equals(obj2));
System.out.println("Map Size: " + mappp.size());

MyOtherClass other_objjj = mappp.get(obj2);
System.out.println("other_objjj: " + other_objjj);
... 
```

打印结果如下：

hashCode: true 等于: true 地图大小: 1 other_objjj: null

任何人都可以看到我错过了什么吗？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-02-06T00:55:13.680

您还没有*覆盖*该`equals(Object)`方法；你*用*`equals(MyClass)`. _

像这样做：

```
@Override
public final boolean equals(Object obj2)
{
  if (obj2 == this) return true;
  if (!(obj2 instanceof MyClass)) return false;
  MyClass that = (MyClass) obj2;
  return (enum1.equals(that.getEnum1()) && enum2.equals(that.getEnum2()));
} 
```

# python - 尝试在 Mac OS X 上设置 Enthought enpkg 时出现钥匙串问题

> ID：14719731
> 
> 赞同：1
> 
> 时间：2013-02-06T00:51:06.300
> 
> 标签：python, macos, ssh, terminal, enthought

`enpkg`过去，我能够通过以下方式在我的笔记本电脑上成功设置

```
$ enpkg --userpass 
```

我很确定我最初是在 10.8 下设置的。或更早。我试图在我实验室的一台机器上做同样的事情，运行 10.8.2。当我运行上述程序时，我会看到`$ enpkg --userpass`一个以以下结尾的堆栈转储：

> keyring.backend.PasswordSetError：无法在钥匙串中存储密码

输入用户名和密码后。我注意到一个小的版本差异；我的实验室机器（罪犯）是：

```
haptic:~ flip$ enpkg --version
enstaller version: 4.5.0 
```

而我的笔记本电脑正在运行 4.5.6。我在这里遇到了一个双刃剑问题，因为我无法更新 enpkg 直到我可以设置它，也许除了完全重新安装之外。

我该如何解决这个问题？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-12-30T19:42:16.307

我也遇到过这个问题——它在通过 SSH 运行时会阻止包更新，这是有问题的。我在 OS X 10.6.8 上运行 enstaller 4.6.2。

解决方案是在运行之前从 SSH 会话中**解锁**OS X 用户登录钥匙串`enpkg --userpass`：

```
security unlock-keychain
enpkg --userpass                            # now password can be stored in keychain 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-06T02:03:30.757

我相信我已经解决了问题。

在这个问题中，我`ssh`在运行`enpkg`命令时进入了实验室机器。

我去了正确的机器，登录，运行`Terminal`。

它似乎在通过 Mac OS GUI 登录时小心地解锁了钥匙串，但在您登录时却没有`ssh`。因此，我能够正确配置它。

因此，如果要将 Enthought 部署在例如无头 Mac 机架上，这可能是个问题。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-07T23:32:08.133

就更新 enpkg（安装程序）而言，您不需要任何凭据即可。也就是说，您应该能够在无法成功运行的情况下更新 enpkg `enpkg --userpass`。

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2013-04-01T02:36:45.890

手动禁用似乎有效`keyring.backend.OSXKeychain()`。 `Library/EPD/2.7-64/lib/python2.7/site-packages/enstaller/config.py`

# c# - 以 IMsoComponentManager.FPUshMessageLoop() 为根的对象

> ID：14719733
> 
> 赞同：1
> 
> 时间：2013-02-06T00:51:18.523
> 
> 标签：c#, winforms, debugging, memory-leaks

我正在调试一个内存泄漏问题。在我知道我的对象应该已被释放和取消引用的代码中，我已经使用 sos 探索了内存配置文件。原来我有一个来自 Application+ComponentManager.System.Windows.Forms.UnsafeNativeMethods.IMsoComponentManager.FPUshMessageLoop()

从 sos 中可以看出：

```
010ced70 6edcee21 System.Windows.Forms.Application+ComponentManager.System.Windows.Forms.UnsafeNativeMethods.IMsoComponentManager.FPushMessageLoop(IntPtr, Int32,     Int32)
    ebx:  (interior)
        ->  03ff3330 System.Object[]
        ->  0300cbf0 System.Collections.Generic.HashSet`1[[System.Object, mscorlib]]
        ->  1929b008 System.Collections.Generic.HashSet`1+Slot[[System.Object, mscorlib]][]
        ->  18f3d384 OurCompany.Components.ApplicationWorkflow.WorkflowBase+CallbackTransaction 
```

有谁知道这是什么？

此外，这似乎发生在装有 Windows 8 (.net 4.5) 的计算机上，而不是运行 Windows 7 (.net 4.0) 的计算机上。最后一条信息并不可靠。

# python - 用漂亮的汤-导航进行网页抓取

> ID：14719736
> 
> 赞同：2
> 
> 时间：2013-02-06T00:51:23.763
> 
> 标签：python, web-scraping, beautifulsoup

我正在尝试使用漂亮的汤来抓取网站。我可以导航到类对象，但不能进入下一个级别以获取我想要的文本。

到目前为止我有

```
soup = BeautifulSoup(urllib2.urlopen('URL...').read())

comment = soup('div', {'class' : 'PanelDarkBackground'})
print comment 
```

它只输出整个类（下）。我只想提取 0-0，它位于代码的 tr>td id="event" 部分

有什么建议么...？

```
[<div class="PanelDarkBackground" id="Event-Basic-Info" style="margin-bottom: 10px">
<div style="height: 70px; width: 100%;">
<div style="height: 70px; width: 70px; float: left; background-color: white">
<img height="70" src="ss" width="70"/>
</div>
<div style="width: 450px; float: left; height: 70px; display: table">
<table border="0" cellpadding="0" cellspacing="0" style="font-family: tahoma; font-size:      18pt; font-weight: bold; color: white;" width="450px">

    <tr>
      <td align="center" height="70" style="font-family: tahoma; font-size: 18pt; font-weight:    bold; color: white;" valign="middle" width="197">seveal</td>
      <td align="center" id="event" style="font-family: tahoma; font-size: 18pt; font- weight: bold; color: white;" valign="middle">0-0</td>
      <td align="center" style="font-family: tahoma; font-size: 18pt; font-weight: bold; color: white;" valign="middle" width="197">seveal</td>
    </tr>
 </table>
</div>
<div style="height: 70px; width: 70px; float: right; background-color: white">
<img height="70" src="" width="70"/>
</div>
</div>
</div>] 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-06T14:48:07.447

直接前往`td`。

```
print soup('td',{'id':'event'}) 
```

对于`td`您可以执行的内容：

```
print soup('td',{'id':'event'})[0].contents[0] 
```

# java - 具有本地资源而不是 JTA 数据源的 JPA

> ID：14719741
> 
> 赞同：0
> 
> 时间：2013-02-06T00:52:12.843
> 
> 标签：java, jakarta-ee, jpa

我正在构建一个我想使用 JPA 的简单 Web 应用程序。尽管我希望在 Glassfish 上进行部署，但我认为在应用程序中管理实体持久性而不是通过 JTA 数据源可能是有益的。我承认这可能不是一个非常聪明的主意？

前段时间我将以下内容放在一起（可能来自现在丢失的网络参考）：

```
public class PersistenceManager {
    private static final PersistenceManager instance = new PersistenceManager();
    protected EntityManagerFactory emf;

    public static PersistenceManager getInstance() {
        return instance;
    }

    private PersistenceManager() {
    }

    public EntityManagerFactory getEntityManagerFactory() {
        if (emf == null) {
            createEntityManagerFactory();
        }
        return emf;
    }

    public void closeEntityManagerFactory() {
        if (emf != null) {
            emf.close();
            emf = null;
        }
    }

    protected void createEntityManagerFactory() {
        this.emf = Persistence.createEntityManagerFactory("Met");
    }
} 
```

所以，我的问题；这是一种合理的方法吗？这里有什么陷阱吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-06T02:11:23.243

我总是在没有容器管理持久性的情况下部署 JPA。我什至将它与 Atomikos JTA 事务管理器一起使用。最简单的方法是不使用基于 JNDI 的查找。我会推荐使用 Spring 的 JPATransactionManager 并使用 persistence.xml 或 spring-xml 配置所有内容。

Spring-xml 中的持久性管理器：

```
<bean id="pum" class="org.springframework.orm.jpa.persistenceunit.DefaultPersistenceUnitManager">
    <property name="defaultDataSource" ref="dataSource" />
    <property name="persistenceXmlLocations">
        <list>
            <value>classpath:META-INF/etf-persistence.xml</value>
        </list>
    </property>
</bean>

<bean id="emf" class="org.springframework.orm.jpa.LocalContainerEntityManagerFactoryBean">
    <property name="persistenceUnitManager" ref="pum" />
    <property name="persistenceUnitName" value="my-pu" />
    <property name="jpaProperties">
        <props>
            <prop key="hibernate.ejb.cfgfile">my-hibernate.cfg.xml</prop>

            <prop key="hibernate.session_factory_name">mySessionFactory</prop>
            <prop key="hibernate.dialect">org.hibernate.dialect.Oracle10gDialect</prop>
            <prop key="hibernate.archive.autodetection">none</prop>

            <prop key="hibernate.show_sql">false</prop>
            <prop key="hibernate.format_sql">false</prop>       
    </property>
</bean> 
```

不要在 persistence.xml 中指定非 jta 或 jta-data-source 标记。其余设置是标准弹簧（EntityManagerFactory、DataSource 等）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-08T05:24:19.113

这确实不是最好的主意。正如@BalusC 指出的那样，您需要接管自己的所有 TX 管理管道，手动创建、启动和结束所有内容。它有大量的样板代码，会让您发现错误，并且您不会从中受益。

即使您在一个精简的 servlet 容器中也可以使用 JTA，该容器不通过自己添加它来提供它，尽管您应该有一个非常充分的理由想要自己组装堆栈，而不是仅仅抓住像 Glassfish 这样提供它的 AS全部免费给你。

就此而言，即使您选择 Glassfish 网络配置文件（与完整平台相比），您仍然可以使用它。

# hadoop - 为什么 Hadoop 不使用其他硬盘？

> ID：14719742
> 
> 赞同：3
> 
> 时间：2013-02-06T00:52:17.757
> 
> 标签：hadoop, mapreduce, bigdata

这是我第一次玩 Hadoop 集群，所以我对此很陌生。

我有一个由 3 个节点组成的小型集群，每台计算机中有 5 个 2 TB 硬盘驱动器。所有人都在运行 Ubuntu，具有相同的硬件规格，并且使用的是 Apache Hadoop 1.0.4。硬盘以 /media/diskb、/media/diskc、/media/diskd 等形式安装在每台计算机上，并配置为 JBOD。

所有 3 台计算机都充当 Data Nodes 和 Task Tracker，其中一台是主 Name Node 和 Secondary Name Node，第二台是 Job Tracker，第三台是纯从 (DT/TT) 节点。

在每台计算机的**hdfs-site.xml**文件中，我列出了挂载点，以逗号分隔，没有空格作为值。

```
<property>
 <name>dfs.datanode.data.dir</name>
 <value>/data/dfs/data,/media/diskb/data/dfs/data,/media/diskc/data/dfs/data,..</value>
</property> 
```

对于名称节点：

```
<property>
 <name>dfs.namenode.name.dir</name>
 <value>/data/dfs/name,/media/diskb/data/dfs/name,/media/diskc/data/dfs/name,..</value>
</property> 
```

**在 mapred-site.xml 中：**

```
<property>
 <name>mapred.local.dir</name>
 <value>/data/mapred/local,/media/diskb/data/mapred/local,/media/diskc/data/mapred/local,...</value>
</property> 
```

此外，在**core-site.xml**

```
<property>
 <name>hadoop.tmp.dir</name>
 <value>/media/diskb/data</value>
</property> 
```

（我尝试过一次更改要分配给磁盘的临时目录以检查权限等，Hadoop 工作正常）

对于 Hadoop 用户帐户，目录的挂载和所有权权限已满。当我运行 map/reduce 程序时，我可以看到 Hadoop 在每个节点的**mapred/local**目录下的额外磁盘内创建资源文件夹，但我没有看到数据节点目录和报告的配置容量发生同样的情况管理页面 (namenode:50070) 位于：5.36 TB（每个节点 1.78 TB）。

**为什么 Hadoop 不使用每个总容量应为 26.7 TB 的硬盘？**

**此外，与在每个节点上仅使用 1 个磁盘相比，我没有看到使用所有磁盘运行 Map/Reduce 作业的性能提高。我应该期待什么？**

谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-06T04:32:13.850

好的，非常简单的答案： **dfs.namenode.name.dir**应该是**dfs.name.dir** 和**dfs.datanode.data.dir**应该是**dfs.data.dir**

我认为它们（dfs.name.dir，dfs.data.dir）已被弃用，但显然不是。所以 Hadoop 是按照我在 core-site.xml 中设置的默认值运行的，因此只使用了 3 个驱动器。

# php - 哪个过程从站点的任何地方指向一个目录

> ID：14719746
> 
> 赞同：0
> 
> 时间：2013-02-06T00:52:30.953
> 
> 标签：php, html, hyperlink, point

如果我应该从站点的任何地方指向一个目录，这是最好的程序？

```
$folder = "http://www.mysite.com/something/foldertopoint" 
```

或者

```
$folder = "/WEB/mysite/htdocs/something/foldertopoint" 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-06T00:58:31.230

为什么不使用`__DIR__`它是一个神奇的常数。如果您在配置文件中定义路径

配置文件路径：`/var/www/include/config.php`

在里面你有说

```
define('_INC_', __DIR__); 
```

您使用常量的任何地方`_INC_`将始终指向`/var/www/include`

所以如果你在：`/var/www/some/crazy/path/of/nonsense.php`

你可以简单地使用

```
include(_INC_."/myinclude.php"); 
```

这将包括`/var/www/include/myinclude.php`

尝试在站点范围内包含文件夹/文件时节省时间。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-06T00:54:35.897

依靠。如果您要链接到目录中的文件 - 使用第一个。如果您要对脚本中目录内的文件进行文件操作，则需要使用第二个。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-06T00:57:09.573

我更喜欢`$folder = "/WEB/mysite/htdocs/something/foldertopoint"`

您的代码变得可重用，因为它不绑定到特定域。

# ajax - Twitter-Bootstrap 选项卡通过 AJAX 加载容器内容

> ID：14719747
> 
> 赞同：4
> 
> 时间：2013-02-06T00:52:30.307
> 
> 标签：ajax, jquery, twitter-bootstrap

我正在尝试为 Twitter-Bootstrap 选项卡实现此示例[http://www.dba-resources.com/scripting-programming/ajax-tabs-in-bootstrap-2-1/](http://www.dba-resources.com/scripting-programming/ajax-tabs-in-bootstrap-2-1/)通过 AJAX 加载内容，但我需要从同一文档中的 div 容器加载内容，而不是加载多个文档。我正在使用的代码如下：

jQuery

```
$(function() {
    $("#MainTabs").tab();
    $("#MainTabs").bind("show", function(e) {    
        var contentID  = $(e.target).attr("data-target");
        var contentURL = $(e.target).attr("href");
        if (typeof(contentURL) != 'undefined')
            $(contentID).load(contentURL, function(){ $("#MainTabs").tab(); });
        else
            $(contentID).tab('show');
        });
    $('#MainTabs div[data-target="#tabone"]').tab("show");
}); 
```

HTML

```
<ul id="MainTabs" class="nav nav-tabs">
    <li><div data-target="#tabone" data-toggle="tab">tab One</div></li>
    <li><div data-target="#tabtwo" data-toggle="tab" href="/test.html">Tab Two</div></li>
    <li><div data-target="#tabthree" data-toggle="tab" href="/test2.html">Tab Three</div></li>
</ul>
<div class="tab-content">
    <div class="tab-pane" id="tabone">Content Tab One</div>
    <div class="tab-pane" id="tabtwo">Loading...</div>
    <div class="tab-pane" id="tabthree">Loading...</div>
</div> 
```

预先感谢您的任何帮助。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-02-06T01:59:07.030

如果您只是将`id`容器的 传递给`href`.

```
<li><div data-target="#tabone" data-toggle="tab" href="#loadedcontent">tab One</div></li>

....

<div id="loadedcontent">My content</div> 
```

由于您有一个特殊情况，您希望通过 AJAX 调用加载页面的特定容器。你可以做这样的事情。

**HTML**

```
<li><div id="specialTab" data-target="#tabone" data-toggle="tab" href="/ajax.html">tab one</div></li> 
```

**JS**

```
$('#specialTab').click(function(e) {
    e.preventDefault();
    var containerId = '#content'; /** Specify which element container */
    var self = $(this);
    var url = self.attr('href');
    $(self.data('target'))
        .load(url +' '+ containerId, function(){
           self.tab('show');
        });
}); 
```

# c# - C/C 中“this”的等效参考是什么

> ID：14719748
> 
> 赞同：-5
> 
> 时间：2013-02-06T00:52:38.227
> 
> 标签：c#

伙计们，我刚开始学习 C#，我不知道 C# 中的“this”引用有人可以在现实生活中给我一个非常简单的例子。我的意思是为什么我需要在 C# 中使用“this”或者我在哪里可以使用“this”有什么好处？

谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-06T00:58:26.380

一个很好的例子是当你有一个带有字段的类和一个带有同名参数的构造函数时。使用“this”，您可以为字段分配参数名称。还有其他的歧义，这可以沿着同一条线解决。

```
public class MyClass
{
    private int foobar;
    public MyClass(int foobar)
    {
        this.foobar = foobar;
    }
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-06T01:01:58.510

this 关键字消除了构造函数具有唯一变量名的需要。

通常，您已经很好地命名了一个变量并为构造函数拥有一个唯一的名称，您要么必须想出一个新名称，要么以其他方式破坏您拥有的好名称。

此外，它允许您将局部变量和实例变量命名为相同的名称，并且可以使用您想要的名称。

例如：

```
public class Foo
{
    //instance variable
    private String myVar;

    public Foo(String myVar)
    {
        this.myVar = myVar;
    }

    public void someFunc()
    {
        String myVar = "Hello";// local variable
        this.myVar = "World";//instance variable
        Console.WriteLine(myVar + this.myVar);//prints HelloWorld
    }
} 
```

在 C++ 中，“this”是一个指针，因此您需要使用“->”运算符来引用成员。

# c++ - main() 末尾的段错误

> ID：14719750
> 
> 赞同：0
> 
> 时间：2013-02-06T00:52:48.927
> 
> 标签：c++, segmentation-fault, llvm, clang

我正在针对 LLVM-CLANG 编译一个程序。这是主要

```
#include <iostream>

#include "CompilerFactory.h"

#include "clang/Basic/FileManager.h"
#include "clang/Basic/SourceManager.h"
#include "clang/Lex/Preprocessor.h"
#include "clang/Basic/Diagnostic.h"

int main(int argc, char const *argv[])
{
using clang::CompilerInstance;
using clang::TargetOptions;
using clang::TargetInfo;
using clang::FileEntry;
using clang::Token;
using clang::DiagnosticOptions;
using clang::TextDiagnosticPrinter;

CompilerInstance ci;
CSFV::CompilerFactory::GetCompilerInstance(ci);
const FileEntry *pFile = ci.getFileManager().getFile("test.c");
ci.getSourceManager().createMainFileID(pFile);
ci.getPreprocessor().EnterMainSourceFile();
ci.getDiagnosticClient().BeginSourceFile(ci.getLangOpts(),
                                        &ci.getPreprocessor());
Token tok;
do
{
  ci.getPreprocessor().Lex(tok);
  if (ci.getDiagnostics().hasErrorOccurred())
    break;
  ci.getPreprocessor().DumpToken(tok);
  std::cerr << std::endl;
} while (tok.isNot(clang::tok::eof));
ci.getDiagnosticClient().EndSourceFile();
return 0;
} 
```

这是包含的课程

```
//If they are not defined we have an error at compile time
#define __STDC_LIMIT_MACROS
#define __STDC_CONSTANT_MACROS

#include "llvm/Support/Host.h"
#include "llvm/ADT/IntrusiveRefCntPtr.h"

#include "clang/Basic/DiagnosticOptions.h"
#include "clang/Frontend/TextDiagnosticPrinter.h"
#include "clang/Frontend/CompilerInstance.h"
#include "clang/Basic/TargetOptions.h"
#include "clang/Basic/TargetInfo.h"

using namespace clang;

namespace CSFV{

class CompilerFactory
{
public:

  CompilerFactory();

  ~CompilerFactory();

  /// \brief Generate and returns a compiler instance object
  static void GetCompilerInstance(CompilerInstance &ci){
    DiagnosticOptions diagOpts;
    TextDiagnosticPrinter* diagPrinter =
      new TextDiagnosticPrinter(llvm::outs(), &diagOpts, true);
    ci.createDiagnostics(diagPrinter);

    llvm::IntrusiveRefCntPtr<TargetOptions> pto (new TargetOptions());
    pto->Triple = llvm::sys::getDefaultTargetTriple();
    TargetInfo *pti =
      TargetInfo::CreateTargetInfo(ci.getDiagnostics(), pto.getPtr());
    ci.setTarget(pti);

    ci.createFileManager();
    ci.createSourceManager(ci.getFileManager());
    ci.createPreprocessor();
    return;
  }
};
} //end of namespace CSFV 
```

出于某种原因，我在 main 执行结束时遇到了段错误。我错过了什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-09-22T13:28:28.310

我不知道这是否与我遇到的问题相同，但我所做的是将 targetoptions 声明为新指针。

例如：

```
clang::TargetOptions *targetOpts=new clang::TargetOptions; 
```

我有一种感觉 targetinfo 在自身被破坏时会清理它。

# javascript - 动态更改在 Lightbox 中查看的图像

> ID：14719751
> 
> 赞同：1
> 
> 时间：2013-02-06T00:52:52.023
> 
> 标签：javascript, jquery, image, lightbox2

我有一个缩略图库，当您单击它们时会显示更大的版本。我希望那个更大的图像在点击时出现在灯箱中。在页面加载时，显示的初始图像工作正常。但是，当我单击其中一个缩略图时，虽然它显示为较大的图像，但灯箱仅显示原始图像。我是否缺少一些代码，或者这可能是灯箱的限制？

[去这里例如](http://hatzelandbuehler.com/_staging/index.php?page=project_profiles&category=healthcare&project=capital-health)

```
<a href="/uploads/portfolio/fullsize/bigimage.jpg" id="bigImgLink" rel="lightbox"><img src="/uploads/portfolio/fullsize/bigimage.jpg" alt="" class="fullsize" id="bigImg" /></a> 
```

Javascript 的片段

```
imagearray = new Array('CapitalHealth_01alt_WEB-2225.jpg','CapitalHealth_16_WEB-1311.jpg','CapitalHealth_18retouched_WEB-6133.jpg','CapitalHealth_09_retouched_WEB-6020.jpg','CapitalHealth_13_WEB-8373.jpg');
currentimage = 0;
totalimages= imagearray.length;
        $(".navigation").click(function() {
                            if ( $(this).attr('id') == 'previous-image' ) {
                                currentimage = (currentimage > 0) ? currentimage - 1 : totalimages - 1;
                            } else {
                                currentimage = (currentimage < (totalimages - 1)) ? currentimage + 1 : 0;
                            }

                            $("img#bigImg").attr('src',"/uploads/portfolio/fullsize/" + imagearray[currentimage]);
                            $("a#bigImgLink").attr('href',"/uploads/portfolio/fullsize/" + imagearray[currentimage]);
    }); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-06T01:33:47.970

这永远不会被调用`$(".navigation").click(function() {`您可以通过添加手表来使用 firebug 进行调试。只是建议您以防万一您不知道。

将其更改为正确的选择器，它将起作用。就像是`$(".thumbnail").click(function() {`

此外，最好只使用轮播脚本。

[http://www.tripwiremagazine.com/2012/12/jquery-carousel.html](http://www.tripwiremagazine.com/2012/12/jquery-carousel.html)

这个不错[http://www.agilecarousel.com/flavor_2.htm](http://www.agilecarousel.com/flavor_2.htm)

# c++ - 用于公开字段的 const 引用

> ID：14719752
> 
> 赞同：1
> 
> 时间：2013-02-06T00:52:52.327
> 
> 标签：c++, const-reference

我有一个班级日期。让日期为：

```
class Date
{
private:
    unsigned int _day;
    unsigned int _month;
    unsigned int _year;
public:
    const unsigned int& Day;
    const unsigned int& Month;
    const unsigned int& Year;

    Date() : Day(_day), Month(_month), Year(_year)
    {  }
} 
```

出于某种原因，在构造函数被调用后，Day、Month 和 Year 不要指向/引用 _day、_month 和 _year。

我的一个猜测是它们是在内存分配给类之前设置的，我将如何解决这个问题（也就是在内存分配之后设置引用）？

提前致谢！

编辑：更多信息

当我获得 Day 的值时，不会返回 _day 的值（例如）。我得到一个看似随机的数字。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-06T01:00:52.200

目前还不是很清楚你想要实现什么。在您的 Date 类中，您可以 `_date, _month, _year`直接访问为什么要设置另一个参考？

但是要回答你的问题

> 当我获得 Day 的值时，不会返回 _day 的值（例如）。我得到一个看似随机的数字

实际上，这些值正在被返回，但是你得到了垃圾，因为 _day、_month 和 _year 只是未初始化的整数。您需要先在初始化列表中初始化它们：

```
Date() : _day(0), _month(1), _year(2), Day(_day), Month(_month), Year(_year) 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-06T00:54:56.670

您应该使用返回 const 引用的 getter 来公开它们以避免必须存储它们，这更方便。

```
class Date {
private:
    unsigned int _day;
    unsigned int _month;
    unsigned int _year;

public:
    const unsigned int& Day(){return _day;}
    const unsigned int& Month(){return _month;}
    const unsigned int& Year(){return _year;}
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-06T01:00:59.860

```
Date::Date(unsigned int myDay, unsigned int myMonth, unsigned int myYear)
{
    //Assign values here in constructor.
} 
```

您可以编写单独的方法来返回类中的日、月或年，或者它们的任意组合，用于您在设计文档中计划的任何不同的日期格式。

# linux - 我的 find 命令用法有什么问题？

> ID：14719755
> 
> 赞同：0
> 
> 时间：2013-02-06T00:53:12.993
> 
> 标签：linux, bash, find

我正在尝试查找名称与某些 C++ 文件扩展名匹配但排除某些与模式匹配的目录的所有文件：

```
find /home/palchan/code -name "*.[CcHh]" -o -name "*.cpp" -o -name "*.hpp" -a ! -name "*pattern*" 
```

这仍然给我输出某些文件，例如：

```
/home/palchan/code/libFox/pattern/hdr/fox/RedFox.H 
```

其中有图案？

这是一个例子：

```
> ls -R .
.:
libFox

./libFox:
RedFox.C  RedFox.H  pattern

./libFox/pattern:
RedFox.C  RedFox.H 
```

然后我运行：

```
> find . \( -name "*.[HC]" -a ! -name "*pattern*" \)
./libFox/pattern/RedFox.C
./libFox/pattern/RedFox.H
./libFox/RedFox.C
./libFox/RedFox.H 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-06T02:33:21.803

以下应该有效：

```
find /home/palchan/code \( -name "*pattern*" \) -prune -o -type f \( -name "*.[CcHh]" -o -name "*.cpp" -o -name "*.hpp" \) -print 
```

来自`man find`：

```
 -name pattern
          Base of file name (the path with the leading directories removed) matches shell pattern pattern.  The metacharacters (`*', `?', and `[]')  match
          a  `.'  at the start of the base name (this is a change in findutils-4.2.2; see section STANDARDS CONFORMANCE below).  To ignore a directory and
          the files under it, use -prune; see an example in the description of -path.  Braces are not recognised as being special, despite the  fact  that
          some  shells  including  Bash  imbue  braces  with  a special meaning in shell patterns.  The filename matching is performed with the use of the
          fnmatch(3) library function.   Don't forget to enclose the pattern in quotes in order to protect it from expansion by the shell. 
```

所以，基本上，你应该使用[`-prune`](https://stackoverflow.com/questions/6896564/what-does-prune-option-in-find-do)排除目录而不是`! -name something`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-06T00:54:26.973

尝试这样做：

```
find /home/palchan/code \( -name "*.[CcHh]" -o -name "*.cpp" -o -name "*.hpp" -a ! -name "*pattern*" \) 
```

# javascript - 适合内容的 iframe 高度

> ID：14719757
> 
> 赞同：0
> 
> 时间：2013-02-06T00:53:28.080
> 
> 标签：javascript, html, iframe

我通过谷歌搜索在互联网上找到了大约 5 种方法，但它们似乎都不起作用……我看到人们感谢并说它有效，我只是因为它对我和我不起作用而感到沮丧不知道为什么。

我有两个文件，包含 iframe 的**test.html**和具有实际内容的**hello.html 。**我希望 test.html 中的 iframe 根据 hello.html 中的内容来适应它的高度。我正在使用的教程：[http](http://css-tricks.com/snippets/jquery/fit-iframe-to-content/) ://css-tricks.com/snippets/jquery/fit-iframe-to-content/ 以下是代码：

**测试.html**

```
 <html>
<head>
<script type='text/javascript' src='http://ajax.googleapis.com/ajax/libs/jquery/1.3.2/jquery.min.js?ver=1.3.2'></script>
<script type='text/javascript'>

    $(function(){

        var iFrames = $('iframe');

        function iResize() {

            for (var i = 0, j = iFrames.length; i < j; i++) {
              iFrames[i].style.height = iFrames[i].contentWindow.document.body.offsetHeight + 'px';}
            }

            if ($.browser.safari || $.browser.opera) { 

               iFrames.load(function(){
                   setTimeout(iResize, 0);
               });

               for (var i = 0, j = iFrames.length; i < j; i++) {
                    var iSource = iFrames[i].src;
                    iFrames[i].src = '';
                    iFrames[i].src = iSource;
               }

            } else {
               iFrames.load(function() { 
                   this.style.height = this.contentWindow.document.body.offsetHeight + 'px';
               });
            }

        });

</script>
</head>

<iframe src="hello.html" class="iframe" scrolling="no" frameborder="0"></iframe>
<html> 
```

**你好.html**

```
<html>
<body bgcolor=”#000000″&gt;

<font color=”#ffffff”&gt;
<p>Child frame.</p>
<p>Child frame.</p>
<p>Child frame.</p>
<p>Child frame.</p>
<p>Child frame.</p>
<p>Child frame.</p>
<p>Child frame.</p>
<p>Child frame.</p>
<p>Child frame.</p>
<p>Child frame.</p>
<p>Child frame.</p>
<p>Child frame.</p>
<p>Child frame.</p>
</font>

</body>
</html> 
```

这就是我得到的：

![在此处输入图像描述](../Images/ce2c35a0def26b98faab79d14bce35ab.png)

# sql - sql server - 检查是否可以转换

> ID：14719760
> 
> 赞同：28
> 
> 时间：2013-02-06T00:53:45.913
> 
> 标签：sql, sql-server, sql-server-2008, tsql

我有以下代码将 nvarchar 转换为整数：

```
 cast(@value as int) 
```

但是我无法控制参数@value，因此代码可能会失败。无论如何，在进行演员表之前检查是否可以演员表？

* * *

## 回答 #1

> 赞同：32
> 
> 时间：2013-02-06T01:02:07.917

好吧，在 SQL Server 2012 中，您可以使用新的[TRY_CAST()](http://msdn.microsoft.com/en-us/library/ea3a16de-995b-415c-b5f0-9355cf7bb401)，但在 SQL Server 2008 中，您应该能够使用[ISNUMERIC()](http://msdn.microsoft.com/en-us/library/ms186272%28v=sql.100%29.aspx)，然后包括对未通过该测试的值的处理。

* * *

## 回答 #2

> 赞同：12
> 
> 时间：2013-02-06T01:34:42.410

我最近回答了一个关于此的问题，并且使用to`ISNUMERIC`本身不会起作用。原因是，例如，对于非整数 (1.5) 返回 true。 `CAST``INT``ISNUMERIC`

这是有关该主题的最新答案：

[https://stackoverflow.com/a/14692165/1073631](https://stackoverflow.com/a/14692165/1073631)

考虑使用带有 ISNUMERIC 的 CHARINDEX 添加额外的检查，或者我更喜欢使用正则表达式来验证数据。

这是一个[Fiddle](http://sqlfiddle.com/#!3/d41d8/8509)，它展示了单独使用 ISNUMERIC 的问题。而[Fiddle](http://sqlfiddle.com/#!3/d41d8/8522)使用正则表达式代替了它。

```
DECLARE @Test nvarchar(10)
SET @Test = '1.5'
--Works
SELECT CASE WHEN @Test NOT LIKE '%[^0-9]%' THEN CAST(@Test as int) ELSE 0 END 
-- Produces Error
SELECT CASE WHEN ISNUMERIC(@Test) = 1 THEN CAST(@Test as int) ELSE 0 END 
```

祝你好运。

* * *

## 回答 #3

> 赞同：8
> 
> 时间：2017-04-30T01:59:03.707

我一般用下面的，好像涵盖了所有的情况。

```
SELECT CASE WHEN 1 = ISNUMERIC(@value + '.0') THEN CAST(@value as int) ELSE 0 END 
```

它利用了“ISNUMERIC”不允许两个句点这一事实。SQL Server 2012+ 中的“TRY_CAST”是一个更好的解决方案。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2013-02-06T01:53:57.280

正确的测试是：

```
select (case when isnumeric(val) = 1 and val not like '%e%' and val not like '%.%'
             then cast(val as int)
        end) 
```

对于任何看起来像浮点数的函数，该函数`isnumeric()`都会返回 1，因此您必须小心。

您还可以使用我认为是 SQL Server 的特性。您可以将浮点值 1.23 转换为 int，但不能转换字符串值。因此，以下方法也有效：

```
select (case when isnumeric(val) = 1
             then cast(cast(val as float) as int)
        end) 
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2013-02-06T05:17:16.060

也许我们可以这样做：

```
declare @value as nvarchar(10) = 'A';

begin try
    select cast(@value as int);
end try
begin catch
-- do something
end catch 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2017-11-20T17:15:06.223

使用带有 TRY CATCH 块的过程来抑制错误

IE

```
CREATE PROCEDURE p_try_cast
 @type nvarchar(MAX),
 @value nvarchar(MAX)
AS
BEGIN

    BEGIN TRY
        DECLARE @sql        varchar(MAX)
        DECLARE @out_table  TABLE(value varchar(MAX))

        SET @sql = 'SELECT  CONVERT(varchar(max), CAST(''' + @value + ''' AS ' + @type + '))'

        INSERT  @out_table
        EXECUTE (@sql)

        IF EXISTS ( SELECT 1 FROM @out_table WHERE value = @value)
            RETURN 1

        RETURN 0
    END TRY
    BEGIN CATCH
        RETURN 0
    END CATCH

END

GO 
```

现在您可以使用传递的字符串和所需的类型调用它，proc 返回 1 表示成功，0 表示失败

```
DECLARE @ret int

-- This returns 0 - Fail
EXEC @ret = p_try_cast 'integer', '1.5'

-- This returns 1 - Success
EXEC @ret = p_try_cast 'integer', '1.5'

-- This returns 0 - Fail
EXEC @ret = p_try_cast 'char(4)', 'HELLO'

-- This returns 1 - Success
EXEC @ret = p_try_cast 'char(4)', 'HELL' 
```

# java - eclipse生成war文件时会压缩哪些文件

> ID：14719761
> 
> 赞同：0
> 
> 时间：2013-02-06T00:53:49.170
> 
> 标签：java, eclipse, war

我有一个 Eclipse 项目，它需要大约一分钟来组装战争文件。有大量的 JavaScript 代码（~50mb）实际上不再需要了，所以我把它去掉了。当我这样做时，从需要一分半钟的时间来组装战争到需要 5 秒。

我假设额外的时间用于压缩 javascript 代码。虽然这是有道理的，但战争中还包含许多其他静态文件，它们似乎并没有造成延迟。它们主要是 jpeg 文件，所以我假设战争生成过程知道不压缩 jpeg。

有哪些文件可以压缩和不压缩的列表，该列表是否可配置？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-06T01:02:52.557

不，格式是固定的。war 文件只是一个 jar 文件，具有 Java EE 规范定义的特定文件层次结构。jar 文件实际上只是一个 zip 文件，其中添加了一些额外的元数据。所以简短的回答是......一切都被压缩了。50 兆的 javascript 代码（真的？？？）肯定会花费很长时间，尤其是如果您没有 SSD。

# asp.net-mvc - 动态创建后 Ajax BeginForm 不起作用

> ID：14719762
> 
> 赞同：1
> 
> 时间：2013-02-06T00:53:52.107
> 
> 标签：asp.net-mvc, asp.net-mvc-3

我正在创建一个在用户单击按钮后动态插入的表单。

它的工作方式是。单击按钮 --> 返回部分视图 --> 将其插入视图中。部分视图有一个 Ajax.BeginForm，我希望它同步提交。但是我得到的是一个完整的回发。我确实有这些文件，并且我在没有从 ajax 获取表单的情况下对其进行了测试，并且它可以工作。我猜这与绑定有关。

# sql-server - 我可以为存储过程的开始和结束设置逻辑条件吗？

> ID：14719765
> 
> 赞同：0
> 
> 时间：2013-02-06T00:54:15.007
> 
> 标签：sql-server, tsql

我编写了一个复杂的存储过程，它根据复杂的逻辑在多个表之间移动记录。我已经仔细检查了每一小块逻辑，但我希望对代码有最大的信心。有没有办法声明必须在 SP 的开头和结尾之间保持的逻辑关系？如果不满足这些条件，我想SP会被回滚。

具体来说，我想声明由一组逻辑条件挑选出的表 A 中的记录将在 SP 末尾的表 B 中（而不是在表 A 中），并且那些逻辑条件集没有挑选出的记录条件仍将在 SP 末尾的表 X 中。我使用布尔函数来挑选 A 中符合条件的记录。

我知道我可以用 nUnit 测试其中的一些东西，但我想知道是否有办法在 t-SQL 本身中声明和执行这种逻辑。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-06T03:32:51.800

如果您的记录有一个包含唯一 ID 的字段，您可以从 TableA 到 TableB 执行一个简单的`INSERT`+ `SELECT`，然后`DELETE`插入一个简单的原始记录。

例如，首先将所有符合您的选择条件的记录插入到 TableB 中：

```
INSERT INTO TableB (uniqueID, Field1, Field2, FieldN)
SELECT uniqueID,
       Field1,
       Field2,
       FieldN
FROM   TableA
WHERE  FieldN = SomeCriteria 
```

然后从 TableA 中删除您刚刚插入到 tableB 中的所有记录，使用字段 uniqueID 作为选择条件，以确定要删除哪些记录：

```
DELETE TableA
WHERE  uniqueID IN (SELECT uniqueID
                    FROM   TableB) 
```

如果您将两个语句放在一个带有几个错误检查的事务中，您应该受到保护，以防两个语句执行时出现问题：

```
BEGIN TRANSACTION

INSERT INTO TableB (uniqueID, Field1, Field2, FieldN)
SELECT uniqueID,
       Field1,
       Field2,
       FieldN
FROM   TableA
WHERE  FieldN = SomeCriteria;

IF @@ERROR <> 0 THEN
BEGIN
    ROLLBACK TRANSACTION
    RETURN (@@ERROR)
END

DELETE TableA
WHERE  uniqueID IN (SELECT uniqueID
                    FROM   TableB);
if @@ERROR <> 0 THEN
BEGIN
    ROLLBACK TRANSACTION
    RETURN (@@ERROR)
END

COMMIT TRANSACTION 
```

如果您没有可以唯一标识您的每条记录的单个列，您可以使用它[`EXISTS`](http://msdn.microsoft.com/en-us/library/ms188336.aspx)来代替从 TableA`IN`中选择记录：`DELETE`

```
DELETE TableA
WHERE  EXISTS (SELECT *
               FROM   TableB
               WHERE  TableA.field1 = TableB.field1
                      AND TableA.field2 = TableB.field2
                      AND TableA.FieldN = TableB.fieldn); 
```

# iphone - 如何在控制台 Xcode 中打印？

> ID：14719770
> 
> 赞同：5
> 
> 时间：2013-02-06T00:54:49.690
> 
> 标签：iphone, objective-c, xcode, json, afnetworking

我正在使用 afnetworking 来解析 JSON 数据。我想在控制台上打印数据。

我如何打印这个

```
self.videoMetaData = [JSON valueForKeyPath:@"data.items.video"]; 
```

我试过这个

```
NSLog(@" data %@",videoMetaData); 
```

当我有的时候它工作

```
NSArray *videoMetaData = [JSON valueForKeyPath:@"data.items.video"]; 
```

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2013-02-06T01:11:33.553

如评论中所述，您必须使用它`NSLog(@" data %@", self.videoMetaData);`来记录数据。没有名为 的变量`videoMetaData`。

话虽如此，您可能想看看如何使用调试器检查对象和变量。看看这个例如：[http ://www.cimgf.com/2012/12/13/xcode-lldb-tutorial/](http://www.cimgf.com/2012/12/13/xcode-lldb-tutorial/)

developer.apple.com 上有一些来自 WWDC 2012 的关于 lldb 的好视频（您必须是 iOS 或 Mac 开发者计划中的注册开发者）

# python - wxPython - 按钮动画减慢计算机速度

> ID：14719776
> 
> 赞同：0
> 
> 时间：2013-02-06T00:55:13.330
> 
> 标签：python, wxpython

我正在制作一个 wx 应用程序，其中一个按钮应该在单击时进入循环动画。背景颜色是按钮上的动画。它可以正常运行几分钟，但几分钟后应用程序开始变得无响应，有时甚至会导致计算机崩溃。
对于应用程序的使用来说，动画能够运行很长时间是很重要的。我正在使用计时器来执行动画。我尝试过定期清除 dc，使用不同的帧速率和双缓冲，每次都得到相同的结果。

我的代码如下：

```
import wx
import os

# begin wxGlade: extracode
# end wxGlade

class LbDisplay(wx.Frame):
    sixon = False
    sevenon = False
    eighton = False
    nineon = False
    tenon = False
    elevenon = False
    ID_TIMER = 1
    Speed = 1
    red = 255
    anim = 'down'

    def __init__(self, *args, **kwds):
        # begin wxGlade: LbDisplay.__init__
        kwds["style"] = wx.NO_BORDER | wx.NO_FULL_REPAINT_ON_RESIZE
        wx.Frame.__init__(self, *args, **kwds)
        self.timer = wx.Timer(self, LbDisplay.ID_TIMER)
        self.button_6 = wx.Button(self, -1, "")
        self.button_7 = wx.Button(self, -1, "")
        self.button_8 = wx.Button(self, -1, "")
        self.button_9 = wx.Button(self, -1, "")
        self.button_10 = wx.Button(self, -1, "")
        self.button_11 = wx.Button(self, -1, "")
        self.button_11.Bind(wx.EVT_BUTTON, self.close)
        self.button_6.Bind(wx.EVT_BUTTON, self.change_six)
        self.Bind(wx.EVT_TIMER, self.blink, id=LbDisplay.ID_TIMER)
        self.Bind(wx.EVT_PAINT, self.OnPaint)

        self.__set_properties()
        self.__do_layout()

        # end wxGlade

    def __set_properties(self):
        # begin wxGlade: LbDisplay.__set_properties
        self.SetTitle("LbDisplay")
        # end wxGlade

    def __do_layout(self):
        # begin wxGlade: LbDisplay.__do_layout

        self.SetMinSize(wx.GetDisplaySize())
        grid_sizer_1 = wx.GridSizer(6, 1, 0, 0)
        grid_sizer_1.Add(self.button_6, 0, wx.EXPAND, 0)
        grid_sizer_1.Add(self.button_7, 0, wx.EXPAND, 0)
        grid_sizer_1.Add(self.button_8, 0, wx.EXPAND, 0)
        grid_sizer_1.Add(self.button_9, 0, wx.EXPAND, 0)
        grid_sizer_1.Add(self.button_10, 0, wx.EXPAND, 0)
        grid_sizer_1.Add(self.button_11, 0, wx.EXPAND, 0)
        self.SetSizer(grid_sizer_1)
        grid_sizer_1.Fit(self)
        self.Layout()
        # end wxGlade
    def change_six(self, e):
        if LbDisplay.sixon == False:
            LbDisplay.sixon = True
            self.timer.Start(LbDisplay.Speed)
        else:
            self.button_6.SetBackgroundColour(wx.Colour(223, 220, 217, 0))
            self.timer.Stop()
            LbDisplay.sixon = False

    def close(self,e):
        os._exit(True)

    def blink(self,e):
        if LbDisplay.anim == 'down':
            LbDisplay.red -= 1
            self.button_6.SetBackgroundColour(wx.Colour(LbDisplay.red,0,0))
            if LbDisplay.red <= 56:
                LbDisplay.anim = 'up'
        if LbDisplay.anim == 'up':
            LbDisplay.red += 1
            self.button_6.SetBackgroundColour(wx.Colour(LbDisplay.red,0,0))
            if LbDisplay.red >= 255:
                LbDisplay.anim = 'down'
    def OnPaint(self, e):
        self.dc = wx.PaintDC(self)

# end of class LbDisplay
if __name__ == "__main__":
    app = wx.PySimpleApp(0)
    wx.InitAllImageHandlers()
    LbDisplay = LbDisplay(None, -1, "")
    app.SetTopWindow(LbDisplay)
    LbDisplay.Show()
    app.MainLoop() 
```

有任何想法吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-07T19:33:05.917

我自己想通了。如果您观察上面的代码，您会注意到计时器正在使用 300fps 的刷新率。我什至认为 GPU 的速度不能超过 60fps，而且它直接在 cpu 上运行。哈哈！将其降低到 20fps 就可以解决问题。现在它可以毫无障碍地运行一整天。

# magento - 想在 Magento 中覆盖 adminhtml

> ID：14719777
> 
> 赞同：0
> 
> 时间：2013-02-06T00:55:20.810
> 
> 标签：magento, themes, overriding

我在 Magento 管理面板中的“设计”选项卡下设置了一个自定义主题

我现在可以将我的自定义代码放入

```
 \app\design\frontend\default\MYTHEME\template 
```

代替

```
 \app\design\frontend\base\default\template 
```

我想对管理面板代码做同样的事情。换句话说，我想有选择地替换这个目录中的香草代码

```
 \app\design\adminhtml\default\default\template 
```

使用自定义代码，可能在此目录中

```
 \app\design\adminhtml\default\MYTHEME\template 
```

Magento 似乎不会自动识别这一点。

*   *   *   *   编辑 - - -

为了可维护性，像我们在“前端”中那样进行全局覆盖将是有益的。在模块布局中逐个模块地覆盖模块对于下一个查看代码的人来说可能并不明显。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-06T01:57:04.247

尝试

在 /app/code/local/MageIgniter/AdminThemeAndMod/etc/config.xml

```
<?xml version="1.0"?>
<config>
    <modules>
        <MageIgniter_AdminThemeAndMod>
            <version>0.1.0</version>
        </MageIgniter_AdminThemeAndMod>
    </modules>
    <stores>
        <admin>
            <design>
                <theme>
                    <default>mageigniter</default>
                </theme>
            </design>
        </admin>
    </stores>
</config> 
```

在 /app/etc/modules/MageIgniter_AdminThemeAndMod.xml

```
<!-- /app/etc/modules/MageIgniter_AdminThemeAndMod.xml -->
 <config>
  <modules>
    <MageIgniter_AdminThemeAndMod>
       <active>true</active>
        <codePool>local</codePool>
     </MageIgniter_AdminThemeAndMod>
    </modules>
 </config> 
```

然后将您新添加/更新的文件添加到

```
/app/design/adminhtml/default/mageigniter/layout/
/app/design/adminhtml/default/mageigniter/template/

/skin/adminhtml/default/mageigniter/ 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-06T16:54:30.523

对于“/app/etc/modules/MageIgniter_AdminThemeAndMod.xml”，您的意思是 -

```
<?xml version="1.0"?>
<!-- /app/etc/modules/MageIgniter_AdminThemeAndMod.xml -->
 <config>
  <modules>
    <MageIgniter_AdminThemeAndMod>
       <active>true</active>
        <codePool>local</codePool>
     </MageIgniter_AdminThemeAndMod>
    </modules>
 </config> 
```

# oracle - 如何将mp3文件插入oracle数据库

> ID：14719780
> 
> 赞同：0
> 
> 时间：2013-02-06T00:55:36.547
> 
> 标签：oracle

我正在使用java编写一些程序，我需要将一些文件插入数据库，例如“.mp3，.wav”文件。

顺便问一下如何将这些文件插入到 oracle 数据库中？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-06T05:17:44.037

您是否考虑过仅存储 MP3 元数据和文件位置。几年前我在一个图像服务器上工作，我们尝试将图像存储在数据库中。将文件位置交给请求它的服务器服务要快得多，然后它会获取文件。如果您真的愿意，可以将 mp3 二进制文件作为 BLOB 加载到数据库中。

# java - Java循环遍历具有子文件夹的文件夹中的同名文件

> ID：14719781
> 
> 赞同：0
> 
> 时间：2013-02-06T00:55:41.197
> 
> 标签：java, file, loops

我正在编写一些 Java 代码来遍历具有许多子文件夹的文件夹中具有相同名称的文件，并对每个文件执行一些逻辑：

```
parentFolder/
            subfolder1/file.txt
            subfolder2/file.txt
            subfolder3/file.txt
            ... ...
            subfolderx/file.txt 
```

上面是它的结构。

我该怎么做？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-06T01:01:17.410

如果您使用的是 Java 7，您可以尝试在 Path API 中实现的[访问者模式：](http://en.wikipedia.org/wiki/Visitor_pattern)[`Files.walkFileTree(...)`](http://docs.oracle.com/javase/7/docs/api/java/nio/file/Files.html#walkFileTree%28java.nio.file.Path,%20java.nio.file.FileVisitor%29)

使用它的最简单方法是传递一个（匿名）子类，[`SimpleFileVisitor`](http://docs.oracle.com/javase/7/docs/api/index.html?java/nio/file/SimpleFileVisitor.html)并在您访问文件时做任何您想做的事情。例如，

```
Files.walkFileTree(parentPath, new SimpleFileVisitor() {
  @Override FileVisitResult visitFile(Path file, BasicFileAttributes attrs) {
    // you can do whatever you want with "file" here.
    System.out.println("The file is: " + file);
    return FileVisitResult.CONTINUE;
  }
}); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-06T01:02:28.980

```
String parentFolderPath = "parentFolder";
String fileName = "file.txt";
File parent = new File(parentFolderPath);
for (File subFolder : parent.listFiles()) {
    if (subFolder.isDirectory()) {
        File f = new File(subFolder, fileName);
        if (f.exists()) {
            // your code here
        }
    }
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-06T01:02:46.990

看看Apache Commons 中的[FileUtils](http://commons.apache.org/io/api-release/org/apache/commons/io/FileUtils.html)类。

它们有[FileUtilsiterateFiles(File directory,IOFileFilter fileFilter,IOFileFilter dirFilter)](http://commons.apache.org/io/api-release/org/apache/commons/io/FileUtils.html#iterateFiles%28java.io.File,%20org.apache.commons.io.filefilter.IOFileFilter,%20org.apache.commons.io.filefilter.IOFileFilter%29)方法，您可以在其中指定文件过滤器。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2017-09-01T22:12:37.793

我只想抛出另一种方法来做到这一点。这个文件搜索和处理软件： http: [//www.softpedia.com/get/File-managers/JFileProcessor.shtml](http://www.softpedia.com/get/File-managers/JFileProcessor.shtml) [https://github.com/stant/jfileprocessor](https://github.com/stant/jfileprocessor)

将允许您按名称、大小、日期在 X 或所有深度的子文件夹中搜索带有 glob 或正则表达式的文件。您可以保存到列表窗口或文件。然后你可以运行一个groovy（想想java）脚本来对文件列表做任何你想做的事情；zip 或 tar，修改列表字符串，如 sed、删除、移动、复制文件、grep 或 ls -l 它们，等等。它还可以让您按摩您的列表，例如添加，删除，从另一个列表中减去一个列表。

# mysql - 没有 Rails 的 ActiveRecord 请安装 mysql2 适配器

> ID：14719783
> 
> 赞同：1
> 
> 时间：2013-02-06T00:55:55.957
> 
> 标签：mysql, ruby, activerecord

我正在尝试使用带有 ActiveRecord 的 ruby​​ 访问 mysql 数据库。ruby 文件是 dbtest.rb。

```
require 'rubygems'
require 'active_record'  
ActiveRecord::Base.establish_connection(  
  :adapter => "mysql2",  
  :host => "localhost",  
  :database => "students"  
)  

class Rubyist < ActiveRecord::Base  
end 
```

当我尝试通过 irb 加载此文件或使用 ruby​​ 运行它时，出现以下错误：

```
.rvm/rubies/ruby-1.9.3-p194/lib/ruby/site_ruby/1.9.1/rubygems/custom_require.rb:55:in  `require': Please install the mysql2 adapter: `gem install activerecord-mysql2-adapter` 
```

我已经成功安装了 mysql2 gem 和 activerecord-mysql2-adapter。当我安装 activerecord-mysql2-adapter 时，我收到以下消息：

```
gem install activerecord-mysql2-adapter
Fetching: activerecord-mysql2-adapter-0.0.3.gem (100%)
Successfully installed activerecord-mysql2-adapter-0.0.3
1 gem installed 
```

我需要重命名适配器吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-06T04:07:26.997

我在我的 .bash_profile 中添加了“export DYLD_LIBRARY_PATH=/usr/local/mysql/lib:$DYLD_LIBRARY_PATH”来修复它。

# c# - 在列表中传递参数的条件

> ID：14719784
> 
> 赞同：0
> 
> 时间：2013-02-06T00:55:56.517
> 
> 标签：c#

我不知道如何在我的列表中执行 if 检查条件，我相信“Lambda 表达式”可以帮助但不知道

这是我的代码

```
List<ResourceBookingEntity> ResourceBookingList = new List<ResourceBookingEntity>();
foreach (var r in query)
{
    ResourceBookingEntity RecourceEntity = new ResourceBookingEntity()
    {

        PRJ_ID = r.PRJ_ID,
        WONUM = r.WONUM,
        JOBDESC = r.JOBDESC,
        SAPCCr = // If r.PRJ_ID =1 or 2 then SAPCCr =r.WONUM 
                        // elseif r.PRJ_ID= 3then SAPCCr =r.JOBDESC
        };
    ResourceBookingList.Add(RecourceEntity); 
```

在这里我想要做什么，我有 linq 查询，它返回基于 r.PRJ.ID 值的结果，我试图填充 SAPCCr 值。

```
If r.PRJ_ID = 1 or 2 then 
SAPCCr = r.WONUM 
elseif r.PRJ_ID = 3
then 
SAPCCr = r.JOBDESC 
```

提前致谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-06T01:00:25.873

我认为您正在寻找[条件运算符](http://msdn.microsoft.com/en-us/library/ty67wk28%28v=vs.110%29.aspx)：

```
SAPCCr = r.PRJ_ID == 1 ? r.WONUM :r.JOBDESC 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-06T01:04:21.790

假设类型是兼容的，那么三元条件运算符有什么问题？

```
SAPCCr = ((r.PRJ_ID == 1) ? r.WONUM : r.JOBDESC ); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-06T01:27:18.860

您可以链接条件运算符：

```
SAPCCr = (r.PRJ_ID == 1 || r.PRJ_ID == 2) ?  r.WONUM :  
         r.PRJ_ID == 3 ?  r.JOBDESC : null; 
```

# asp.net - 从 c# 获得确认

> ID：14719786
> 
> 赞同：-2
> 
> 时间：2013-02-06T00:56:08.673
> 
> 标签：asp.net, c#-4.0

当用户单击 OnClick java 脚本函数上的导入按钮时，我会收到确认消息以继续。之后，如果输入值已经存在于数据库中。我需要从用户“你想覆盖”那里得到确认，如果他们点击是，我应该继续删除并插入新信息。

中间 C# 代码如何获得用户确认？用数据库检查输入值后，我需要确认。

我试着像这样使用，

```
if (MessageBox.Show(".Do you want to overwrite?",
    "Dialog Box", MessageBoxButtons.YesNo) == DialogResult.Yes) 
```

它在我的本地工作，但是当我搬到服务器时它不工作。

你能告诉任何解决这个问题的想法吗？

谢谢你

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-06T01:01:19.477

您混淆了运行台式计算机或服务器的代码，以及运行在客户端浏览器上的代码部分。MessageBox 是一个在桌面/服务器上创建对话框的函数。您需要使用 javascript 调用的是`confirm`在浏览器上运行和存在的类似对话框。

通过将此代码放在按钮上，您可以在提交前进行确认。

```
OnClientClick="return confirm('Do you want to overwrite?')" 
```

如果您需要对后面的代码进行更多检查，那么您需要向用户返回一个新的确认信息并让用户再次点击。

# ruby-on-rails - 如何确定 Rails 资产管道中给定资产的 MD5 摘要？

> ID：14719788
> 
> 赞同：16
> 
> 时间：2013-02-06T00:56:42.530
> 
> 标签：ruby-on-rails, ruby, md5, asset-pipeline, handlebars.js

我正在 Ruby on Rails 3.1 项目中编写一个富含 Javascript 的应用程序，并将 Handlebars 用于我的 JS 模板框架。我正在尝试找出一种方法，将资产的 MD5 摘要（在生产中的资产预编译期间生成）动态附加到我的 Handlebars 模板内的标签中。我希望有一个以资产路径为键、以 MD5 摘要为值的散列，但我一直找不到。

一个理想的解决方案是将 Ruby 中的哈希值传递到 Javascript 中，并定义一个 Handlebars 助手，该助手会自动将 MD5 摘要附加到资产的“src”属性中。

有没有人试图做类似的事情？必须有一种方法可以在 Rails 中使用 Javascript 模板，并获得资产指纹识别的好处。

* * *

## 回答 #1

> 赞同：44
> 
> 时间：2013-02-06T01:50:16.030

正如评论中提到的那样，将哈希附加到资产路径是资产管道的默认部分。

> 在生产环境中，Rails 会在每个文件名中插入一个 MD5 指纹，以便该文件被 Web 浏览器缓存

**[您可以在此处](http://guides.rubyonrails.org/asset_pipeline.html#what-is-fingerprinting-and-why-should-i-care)**阅读有关资产管道中指纹识别的更多信息。Rails 使用[Sprockets](https://github.com/sstephenson/sprockets)来编译资源。指纹识别是 Sprockets 过程的一部分。

您可以使用 Sprockets 的`find_asset`方法，将逻辑路径传递给您的资产以获取`Sprockets::BundledAsset`实例。例如

```
[1] pry(main)> Rails.application.assets.find_asset('application.js')
=> #<Sprockets::BundledAsset:0x3fe368ab8070 pathname="/Users/deefour/Sites/MyApp/app/assets/javascripts/application.js", mtime=2013-02-03 15:33:57 -0500, digest="ab07585c8c7b5329878b1c51ed68831e"> 
```

您可以调用`digest_path`此对象以将其`MD5`总和附加到资产。

```
[1] pry(main)> Rails.application.assets.find_asset('application.js').digest_path
=> "application-ab07585c8c7b5329878b1c51ed68831e.js" 
```

With this knowledge you can easily create a helper to return the `digest_path` for any asset in your application, and call this helper from within your `.js.erb` files.

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2017-07-12T20:27:21.023

This is an old question, but it seems that nowadays you can use `assets_manifest`:

`Rails.application.assets_manifest.assets["application.css"] => "application-46ae33e78e504ff295219f41d63c79719d062e48dc0c07bd9b6f7bcad72c6636.css"`

More discussion here: [https://github.com/rails/sprockets-rails/issues/311](https://github.com/rails/sprockets-rails/issues/311)

# android - 如何让android等待传入的请求

> ID：14719795
> 
> 赞同：0
> 
> 时间：2013-02-06T00:57:50.950
> 
> 标签：android

是否有可能使 android 应用程序等待传入请求。也许我的术语不好，但我需要类似 android 上的服务器。我不想不断地向服务器发送请求以检查服务器上的状态是否发生变化，而是希望服务器将此信息直接发送到我的 android 应用程序。我听说有可能，但不能用谷歌搜索，也许我用了不好的短语......

任何帮助表示赞赏

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-06T01:16:36.450

Google 建议的一种方法是使用[Google Cloud Messaging for Android](http://developer.android.com/google/gcm/index.html)：

> Google Cloud Messaging for Android (GCM) 是一项服务，可让您将数据从服务器发送到用户的 Android 设备。

尝试查看[推送](http://en.wikipedia.org/wiki/Push_technology)/[拉取](http://en.wikipedia.org/wiki/Pull_technology)通知。

相关[的 SO 线程](https://stackoverflow.com/questions/1243066/does-android-support-near-real-time-push-notification/)

# python - 为以下 python 脚本寻找高效的 p ython 程序

> ID：14719800
> 
> 赞同：-1
> 
> 时间：2013-02-06T00:58:20.817
> 
> 标签：python

我正在为以下脚本寻找内存高效的 p​​ython 脚本。以下脚本适用于较小的尺寸，但在我的实际计算中矩阵的尺寸为 5000X5000。因此，完成它需要很长时间。谁能帮助我我该怎么做？

```
def check(v1,v2):
    if len(v1)!=len(v2):
        raise ValueError,"the lenght of both arrays must be the same"
    pass
def d0(v1, v2):
    check(v1, v2)
    return dot(v1, v2)
import numpy as np
from pylab import *
vector=[[0.1, .32, .2, 0.4, 0.8], [.23, .18, .56, .61, .12], [.9, .3, .6, .5, .3], [.34, .75, .91, .19, .21]]
rav= np.mean(vector,axis=0)
#print rav
#print vector
m= vector-rav
corr_matrix=[]
for i in range(0,len(vector)):
    tmp=[]
    x=sqrt(d0(m[i],m[i]))
    for j in range(0,len(vector)):
        y=sqrt(d0(m[j],m[j]))
        z=d0(m[i],m[j])
        w=z/(x*y)
        tmp.append(w)
    corr_matrix.append(tmp)
print corr_matrix 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-06T02:01:20.653

将你的`matrix`（和你的`vector`）变成 numpy `array`s 而不是 Python `list`s。这将使其占用更少的内存（并且运行速度更快）。

要了解原因：

Python`list`是 Python 对象实例的列表。它们中的每一个都有类型信息、指针和各种其他东西，除了 8 字节数字之外还要保留。假设每个最终都是 64 字节而不是 8 字节。所以，每个元素 64 字节，乘以 25M 元素，等于 1600M 字节！

相比之下，numpy`array`是一个仅包含原始值的列表，以及所有额外信息的单个副本（在`dtype`. 所以，不是 64 * 25M 字节，而是 8 * 25M + 64 字节，这只是大小的 1/8。

至于速度提升：如果您迭代 5000x5000 矩阵，您将在内循环中调用一些代码 25M 次。如果你正在做一个像`m + m`，循环内的代码是几行 C 代码，可以编译成几十个机器代码操作，速度非常快。如果您在 Python 中显式地执行循环，则该循环的内部每次都必须驱动 Python 解释器通过循环，这要慢得多。（最重要的是，C 编译器会优化代码，numpy 也可能有一些显式的优化。）根据循环内工作的琐碎程度，加速可以从 2 倍到 10000 倍不等。所以，即使你不得不让事情变得有点复杂，试着想办法把每一步表达成数组广播而不是循环，这样会快得多。

* * *

那么，你是怎么做到的呢？简单的。而不是这个：

```
corr_matrix=[]
for i in range(len(vector)):
    tmp=[]
    # …
    for j in range(len(vector)):
        # …
        tmp.append(w)
    corr_matrix.append(tmp) 
```

做这个：

```
corr_matrix=np.zeros((len(vector), len(vector))
for i in range(len(vector)):
    # …
    for j in range(len(vector)):
        # …
        corr_matrix[i, j] = w 
```

这立即消除了由保留大约 25M Python 对象的开销引起的所有内存问题`float`，并且还将显着提高速度。你不能进一步减少内存，除非你不能`array`一次将整个内存保存在内存中，但你应该已经没问题了。（您可以通过使用广播操作代替循环来进一步提高速度，但如果内存是您的问题，并且性能很好，则可能没有必要。）

# c - 如果两个字符串中的任何一个匹配，则打印相同的输出

> ID：14719805
> 
> 赞同：0
> 
> 时间：2013-02-06T00:58:40.417
> 
> 标签：c

我正在尝试编写一个程序，如果任何一个字符串匹配，它将输出相同的 printf。我试过跟随，但它对我不起作用。在这里我确实比较了第一个字符串或第二个字符串，如果任何一个相同，那么它应该打印 printf 中列出的语句。

```
#include <stdio.h>
#include <string.h>

int main (){

    char string1[10];
    char string2[10];

    printf("Enter the first string: ");
    scanf ("%s", string1);

    printf("Enter the second string: ");
    scanf ("%s", string2);

    if ((strcmp(string1, "test1") == 0) || (strcmp (string2, "test2") ==0))

        printf ("Both strings are same\n");

    else printf("You didnt enter any matching \n");

} 
```

我在这里想念什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-06T00:59:42.250

`if`您的打印声明与您帖子的第一句话或您的表达不匹配。如果你想测试*两者*是否相等，你应该使用`&&`而不是`||`. 如果您想测试任何一个字符串是否与您的测试字符串匹配，那么您的程序就可以了。您的代码的不同部分一定有问题。这是一个示例程序来为您证明：

```
#include <stdio.h>
#include <string.h>
int main(int argc, char **argv)
{
    char *string1 = argv[1];
    char *string2 = argv[2];

    if ((strcmp(string1, "test1") == 0) || (strcmp (string2, "test2") ==0)) 
         printf ("At least one string matched\n");

    return 0;
} 
```

并输出：

```
$ ./example test1 bad
At least one string matched
$ ./example bad test2
At least one string matched
$ ./example bad bad
$ ./example test1 test2
At least one string matched 
```

编辑：我在进一步阅读时突然想到，您实际上可能想要测试其中一个是否*完全*匹配。在这种情况下，您需要在`if`. 也许是这样的：

```
int string1Matches = (strcmp(string1, "test1") == 0);
int string2Matches = (strcmp(string2, "test2") == 0);

if ((string1Matches && !string2Matches) || (!string1Matches && string2Matches))
    printf("Exactly one string matches (not both!)\n"); 
```

再次编辑：

您的新程序似乎运行良好 - 您的问题是什么？示例输出：

```
$ ./example 
Enter the first string: test1
Enter the second string: bad
Both strings are same
$ ./example 
Enter the first string: bad  
Enter the second string: test2
Both strings are same
$ ./example 
Enter the first string: test1
Enter the second string: test2
Both strings are same
$ ./example 
Enter the first string: bad
Enter the second string: bad
You didnt enter any matching 
```

# php - 信用卡费用子集的递归批量核对

> ID：14719806
> 
> 赞同：0
> 
> 时间：2013-02-06T00:58:44.347
> 
> 标签：php, arrays, recursion, accounting

**我找到了一个解决方案**，请参阅下面的答案和/或[Github Gist，它有更新的优化](https://gist.github.com/cacycleworks/4725534)。

我有一系列信用卡费用和批次总额...有时金额的 SUM() = 批次金额，所以这很容易分组到批次，我们可以检查促成当天存款的交易支票账户。

有时，适当的总和是这些费用的一个子集，其中 1 个或多个在第二天分批。**你能帮我以编程方式解决这个问题吗？**这是为了我的 authorize.net 批量会计，这很糟糕，所以我正在为我的簿记员制作一个工具。

```
+------------+--------+
| transId    | amount |
+------------+--------+
| 2863996511 | 154.00 |
| 2863992361 | 762.20 |
| 2863898975 |  49.00 |
| 2863894564 |   5.44 |
| 2863879671 |  10.88 |
| 2863858891 | 209.00 |
| 2863856334 | 148.00 |
| 2863367273 | -25.01 |
+------------+--------+ 
```

当天的批次总额为 1302.63 美元。正如经常发生的那样，该批次中没有电荷，因此该批次是阵列中电荷总和的某个子集。在这种情况下，10.88 美元的费用在第二天的批次中。这段伪代码可以通过两个嵌套的 for 循环来捕获：

```
 for( $skipdx=0; $skipdx<$size; $skipdx++){
            $total=0;
            for( $idx=0; $idx<$size; $idx++){
                if($idx!=$skipdx){
                    $total+=$charges[$idx]['amount'];
                    $thisBatch[]=$charges[$idx]['transId'];
                }
                if( abs($total-$batch['total']) < .04 ) {
                    echo "sum of charges matches $date batch total: $$total  (line: ". __LINE__ .")\n";
                    $foundIt=TRUE;
                    break;
                }
            }
            if($foundIt==TRUE)
                break;
        } 
```

如何动态选择搜索未添加两个的费用？然后三个？我可以看到，如果`$skipdx`省略了一项费用，那么跳过两项费用将添加一个`skip2dx`嵌套循环。如果仍未找到，`skip3dx`将是第 3 级嵌套。

在递归之前，我通常非常擅长算法，然后我变得愚蠢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-06T09:18:29.717

它来找我了！递归的“当前层”这样做：

1.  合计费用金额。
2.  遍历费用数组，一次减去 1 个费用并针对目标批次数量进行测试。
3.  如果金额在本次迭代中匹配，则取消设置此费用的 id 并返回结果数组。
4.  如果未找到，则再次遍历电荷数组，这次移除当前电荷。以相同的目标数量再次调用该函数，并将新的缩短数组再次调用到相同的函数。

工作代码（[Github 也有更新的优化](https://gist.github.com/cacycleworks/4725534)）：

```
$charges=Array(
     '2863996511' => 154.00 ,'2863879671' => 10.88
    ,'2863992361' => 762.20 ,'2863858891' => 209.00
    ,'2863898975' => 49.00  ,'2863856334' => 148.00
    ,'2863894564' => 5.44   ,'2863367273' => -25.01
); print_r($charges);
$targets=Array(1302.63, 1327.64, 1322.20 );
foreach( $targets as $batch ) {
    printf( "We seek combination of transIds to = $%-7.2f\n", $batch);
    $answer=reco( $batch, $charges );
    if( is_array($answer) )
        echo eval( "return ".implode("+",$answer).";" )."\nWIN!\n";
    else
        echo "Bust!\n";
}   

function reco( $target, $arr ){
    if( count($arr) < 2 )
        return FALSE;
    $killid='';
    $sum = eval( "return ".implode("+",$arr).";" );
    foreach( $arr as $id=>$amt ){
        if( abs($sum-$target-$amt) < .01 ) {
            $killid=$id;
            break;
        }
    }
    if( strlen($killid) > 1 ) {
        echo ".  omit $killid : ".$arr[$killid]."\n";
        unset($arr[$killid]); 
        return $arr;
    }
    foreach( $arr as $id=>$amt ){
        $tmp=$arr;
        unset($tmp[$id]);
        $rtn = reco( $target, $tmp );
        if( is_array($rtn) ) {
            echo ".. omit $id : ".$arr[$id]."\n";
            return $rtn;
        }
    }
    return FALSE;
} 
```

和输出：

```
We seek combination of transIds to = $1302.63
. omit 2863879671 : 10.88
1302.63
WIN!
We seek combination of transIds to = $1327.64
. omit 2863367273 : -25.01
.. omit 2863879671 : 10.88
1327.64
WIN!
We seek combination of transIds to = $1322.20
. omit 2863367273 : -25.01
.. omit 2863879671 : 10.88
.. omit 2863894564 : 5.44
1322.2
WIN! 
```

性能不是一个大问题。在大约一秒钟内处理到第三级递归。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-05-21T07:10:15.620

当您开始查看您的一组费用的所有可能子集时，您可能会注意到有时选择与您的批次总和匹配的第一个子集并不是一个好的会计解决方案。可能有几个可能的费用子集加起来就是您的批次总数。

你会选哪一个？

实际上，这会导致一个众所周知的问题，称为子集和问题 - 请参阅[此处](http://en.wikipedia.org/wiki/Subset_sum_problem)的 wiki 。

还有一个名为[SumMatch](https://www.evolucion.com.au/Admin_Pages/SumMatch.aspx)的廉价 Excel 插件，它可以找到与给定总和匹配的所有数字组合。考虑是否值得您花时间编写正确的算法。

# asp.net - 查找派生特定基类的所有用户控件，关于 typeparam？

> ID：14719807
> 
> 赞同：1
> 
> 时间：2013-02-06T00:58:49.390
> 
> 标签：asp.net, c#-4.0, asp.net-webcontrol

我有一个所有用户控件的基类：`SiteUserControlBase`. 它还需要一个类型参数：`SiteUserControlBase<T>`. 如何最好地在页面上找到源自`SiteUserControlBase`typeparam 的所有控件？

我使用下面的扩展方法来查找 type 的所有控件`SiteUserControlBase`，但它将排除所有也使用 type 参数的控件。

```
public static IEnumerable<T> FindControlsOfType<T>(this ControlCollection Controls) 
    where T : class
{
    T control;
    foreach (Control ctrl in Controls)
    {
        if ((control = ctrl as T) != null)
        {
            yield return control;
        }

        foreach (T child in FindControlsOfType<T>(ctrl.Controls))
        {
            yield return child;
        }
    }
} 
```

# sublimetext2 - SublimeText2 中的代码折叠可以保存吗？

> ID：14719808
> 
> 赞同：1
> 
> 时间：2013-02-06T00:58:52.057
> 
> 标签：sublimetext2

在 Textmate 中，我知道每次打开保存的文件时都会记住代码折叠。SublimeText2 是否可以做到这一点，如果可以的话怎么办？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-07T16:19:47.147

[有一个名为BufferScroll](https://github.com/SublimeText/BufferScroll)的 Sublime Text 插件可以记住会话之间的大部分设置。

# javascript - 如何使用jQuery按类获取列表元素编号

> ID：14719811
> 
> 赞同：-2
> 
> 时间：2013-02-06T00:59:12.100
> 
> 标签：javascript, jquery, click, find

我有这个清单：

```
<ul>
   <li>data</li>
   <li>data</li>
   <li>data</li>
   <li class="focus">data</li>
   <li>data</li>
   <li>data</li>
</ul> 
```

我需要获取具有类焦点的元素编号，并更改它，所以我这样做：

```
 btn.on('click', function(){
      var number_of_element = js_films_list_top.find('li.focus').length;
      js_films_list_bottom.find('li').length(number_of_element).addClass('focus');
  }); 
```

我想 length 方法对此没有好处，但是哪个更好用？你能帮助我吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-06T01:01:40.740

您可能正在寻找`.eq()`和`.index()`：

```
var index = js_films_list_top.find('li.focus').index();
js_films_list_bottom.find('li').eq(index).addClass('focus'); 
```

# android - OnLoadFinished() 调用了两次

> ID：14719814
> 
> 赞同：21
> 
> 时间：2013-02-06T00:59:20.230
> 
> 标签：android, android-fragments, loader, android-fragmentactivity, android-loadermanager

我想弄清楚我是否在装载机方面做错了什么。我正在使用支持库，并且我有一个片段，它在 onCreate() 调用 initLoader() 将自身设置为 LoaderCallbacks，但是在旋转时，它在 onLoadFinished() 中收到两次结果，一次是由于调用 init （并且它已经拥有数据），并且由于 FragmentActivity 循环遍历 onStart() 中的所有加载器并传递结果，因为它已经拥有数据。

如果我只调用一次 init（在 Fragment 首次启动时），它不会将自己设置为 Loader 的回调，因此它根本不会收到对 onLoadFinished 的调用。似乎 onLoadFinished 应该只被调用一次，因为一些昂贵的事情可能会在 onLoadFinished() 中完成（例如清除列表适配器等），所以我只是想弄清楚这是一个错误还是我是只是在错误的时间调用 init 或其他。

有人对这个问题有任何见解吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2015-05-28T05:55:36.740

我有一个类似的问题，原因是我的代码中有`initLoader`和`restartLoader`。根据用户的操作，我的查询可能会更改，因此我需要重新启动加载程序。

解决方案是仅使用`restartLoader`，即使在`onResume`回调方法中替换`initLoader`为`restartLoader`。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2015-11-29T21:41:28.540

这是一个相当古老的问题，但对于未来的读者，我有一个替代解决方案。基本上我最终做的是重新启动加载程序（如果存在）。

```
public void onActivityCreated(Bundle savedInstanceState) {
...
       if(getLoaderManager().getLoader(Constants.LOADER_ID) == null) {
            getLoaderManager().initLoader(Constants.LOADER_ID, null, this);
        } else {
            getLoaderManager().restartLoader(Constants.LOADER_ID, null, this);
        }

...
} 
```

这解决了我在屏幕上旋转加载程序被触发两次的问题。还有一点需要注意的是，这只对我测试过的 Android < 6 的我来说是必需的。Android 6 似乎根本没有这个问题。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-02-14T10:25:51.077

我自己也遇到了同样的问题，没有好的解决方案。它似乎是 Android 框架中的错误，这里是类似的线程，其中建议的解决方案是将 initLoader() 放入 onResume() - 我已经尝试过它并且它有效，onLoadFinished() 只被调用一次： [Android: LoaderCallbacks.OnLoadFinished called两次](https://stackoverflow.com/questions/11293441/android-loadercallbacks-onloadfinished-called-twice)

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2014-03-04T21:22:01.563

请参阅我在[Android 上的帖子：LoaderCallbacks.OnLoadFinished 调用了两次](https://stackoverflow.com/questions/11293441/android-loadercallbacks-onloadfinished-called-twice/22183247)

在 ViewPager 中重新启动 Fragments 时，我遇到了类似的问题。我的解决方案是在完成加载程序后（在 onLoadFinished 结束时）通过调用

```
getLoaderManager().destroyLoader(LOADER_ID); 
```

希望能帮助到你！

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2020-05-10T15:42:17.520

它看起来像框架加载器错误的实现/错误。 **1.**看看我从屏幕旋转后每个重要方法/回调的 Log.v(LOG_TAG, ...) 消息中得到了什么：

```
...: .initLoader() 100
...: onStartLoading()
...: onLoadFinished()
...: updateUi(); articles size=10
...: loadInBackground()
...: getInputStream() - HttpRequest
...: onLoadFinished()
...: updateUi(); articles size=10 
```

**2.**正如你所见，'updateUi()' 之后的所有内容都不需要了。

# r - 使用子集在 R 中正确标记标题

> ID：14719815
> 
> 赞同：0
> 
> 时间：2013-02-06T00:59:24.530
> 
> 标签：r

我正在尝试使用子集发送与列中的特定值匹配的行，但是在识别我定义的特定标题而不是另一个标题时遇到问题。

foo.csv 是：

```
 ,3ZSJ_ALA_A_142,ED
    1,0,0.249
    2,10,0.379
    3,20,0.542 
```

示例 r 代码：

```
 T1 = read.csv('foo.csv', header=T)
    foo <- subset(T1, 3ZSJ_ALA_A_142 == '10')
    Error: unexpected symbol in "foo <- subset(T1, 3ZSJ_ALA_A_142"
    Execution halted 
```

我还尝试将 3ZSJ_ALA_A_142 放在括号中，然后我的输出 lis 不合适，它应该给出 10 的行，但它给出了这个：

```
 [1] X               X3ZSJ_ALA_A_142 ED  
    <0 rows> (or 0-length row.names) 
```

如果我在我的 r 代码中执行 ED 而不是 3ZSJ_ALA_A_142 我得到这个 lis：

```
 X X3ZSJ_ALA_A_142    ED 
    2 2              10 0.379 
```

我是在使用不合适的函数，还是我的语法都搞砸了？任何点将不胜感激，谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-06T01:08:28.443

以诸如数字开头的名称`3ZSJ_ALA_A_142`在语法上无效。

当您调用`read.csv`它时，它有一个参数`check.names`将检查名称的语法有效性，并在必要时进行调整（默认为`check.names = TRUE)`

如果您使用它来转换为语法上有效的名称，那么它将（通常）`X`在以数字开头的名称的开头附加一个

所以以下应该工作。

```
foo <- subset(T1, X3ZSJ_ALA_A_142 == '10') 
```

如果您不想转换名称，请使用`check.names = FALSE`并使用`backticks`eg```来引用非语法名称。

```
 T2 = read.csv('foo.csv', header=TRUE, check.names = FALSE )
    foo <- subset(T1, `3ZSJ_ALA_A_142` == '10') 
```

请注意使用非语法名称，因为某些函数可能无法正确处理它们。

# list - 在列表中，如何通过将列表作为参数的函数对列表进行修改？

> ID：14719817
> 
> 赞同：0
> 
> 时间：2013-02-06T00:59:35.160
> 
> 标签：list, lisp, common-lisp, pass-by-value

我正在用 Lisp 编写一个程序，将两个列表中的公共元素放入一个新列表中。这是我的代码。

```
(defun test (a b)
  (let ((alist nil) (blist nil))
    (progn
      (join a b alist blist)
      (print blist))))

(defun join (a b alist blist)
  (cond
   ((and (null a) (null b))
    (setf blist (cons alist blist)))
   ((equal (car a) (car b))
    (setf alist (cons (list (car a) (car b)) alist)))
   (t (join (cdr a) (cdr b) alist blist)))) 
```

但函数的输出始终是`nil`。然后我在网上查了一些东西，发现当我尝试使用时`setf`，它不再指向原始列表，而是指向一个新列表。所以如果我不能使用`setf`，我还能用什么来实现呢？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-07T08:03:47.830

不要在 Lisp 中使用“输出”参数。更好地从函数返回结果。此外，CL 中有一个函数“intersection”可以满足您的需求，因此请使用它，除非它是一个练习（然后您可以查看它的实现）。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-06T09:01:25.650

```
(defun test (a b)
  (let ((alist nil) (blist nil))   ; two variables initialized to NIL
    (progn                         ; this PROGN is not needed
      (join a b alist blist)       ; you call a function, but ignore the
                                   ; return value? Why?
      (print blist))))             ; since blist was never modified, this
                                   ; can only be the initial value, NIL

(defun join (a b alist blist)      ; four new local variables
  (cond
   ((and (null a) (null b))
    (setf blist (cons alist blist)))    ; why do you set the variable BLIST?
                                        ; you never use it later

   ((equal (car a) (car b))
    (setf alist (cons (list (car a) (car b)) alist)))
                                        ; why do you set the variable ALIST?
                                        ; you never use it later

   (t (join (cdr a) (cdr b) alist blist))))
                                        ; the only recursive call of JOIN 
```

您只能更改在词法上可访问的变量。

# php - php中的数组和输入数组

> ID：14719821
> 
> 赞同：1
> 
> 时间：2013-02-06T00:59:44.910
> 
> 标签：php, html, arrays

我想确保我正确地添加了这些数组，有人可以检查我的代码并澄清一下。我尝试打印数组，但没有显示任何内容。

HTML

```
Start Date: <input type="text" name="start_date[]"/> 
End Date: <input type="text" name="end_date[]"/> 
Description:<textarea name="position[]"></textarea> 
```

PHP

```
initializeArrays(); // Initialize arrays
$_SESSION['start_date_array'][] = $_GET['start_date[]']; // Add html input arrays to a session array.
$_SESSION['end_date_array'][] = $_GET['end_date[]'];
$_SESSION['position_array'][] = $_GET['position[]'];
$_SESSION['submit_employment_message'] = 'Thank you for the submission'; 
```

我想将要访问的数组设置为会话数组。本质上，我希望有多个开始日期。正在提交到 PHP 页面。例如，可以输入多个开始日期。如果您需要任何澄清，请告诉我。感谢您的帮助！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-06T01:02:19.033

我想你想要：

```
$_SESSION['start_date_array'] = $_GET['start_date'];
$_SESSION['end_date_array'] = $_GET['end_date'];
$_SESSION['position_array'] = $_GET['position']; 
```

附加到其名称的表单字段`[]`被假定为数组

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-06T01:16:48.127

您可以进行 foreach`$_GET`并检索 key=value

```
foreach ($_GET as $key => $value) {
    $_SESSION[$key] = $value;
} 
```

并通过 key 检索会话的名称`$_GET`

# design-patterns - 对象创建的工厂模式

> ID：14719826
> 
> 赞同：1
> 
> 时间：2013-02-06T01:00:14.463
> 
> 标签：design-patterns

```
public class ConcreteService1: IService1
{
private IService2 _service2;
public void doSomething()
{
   _service2 = new ConcreteService2();
 .....
}

}

 public class ConcreateService2: IService2
{
private IService1 _service1;
public void doSomething()
{
 _service1 = new ConcreteService1();
 .....
 }

} 
```

这是可以在这里使用工厂或抽象工厂的情况吗？如果是，请您举个例子。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-06T01:24:04.863

在您的情况下，因为您有两个具有两个不同接口的类，所以 Factory 在这里真的不适用。您应该使用抽象工厂作为它的对象，并将对象初始化委托给其单独的函数。

您的示例的抽象工厂接口在这里

```
public Interface IAbstractInterfaceFactory
{

IService1 InitializeService1();
IService2 InitializeService2();

} 
```

Factory pattern is used generally when you have too many different object initialization implementing same interface or abstract class. The pattern suggest to have a Factory method and based on type of object need to be initialized it creates the specific object and return it. It helps in two ways 1\. Keeps all the initialization code at one place 2\. It never returns the concrete class which makes it more extendable and manageable

For more information please see this links [Differences between Abstract Factory Pattern and Factory Method](https://stackoverflow.com/questions/5739611/differences-between-abstract-factory-pattern-and-factory-method) [http://en.wikipedia.org/wiki/Abstract_factory_pattern](http://en.wikipedia.org/wiki/Abstract_factory_pattern) [http://www.codeproject.com/Articles/68670/The-Factory-Pattern](http://www.codeproject.com/Articles/68670/The-Factory-Pattern) [http://en.wikipedia.org/wiki/Factory_method_pattern](http://en.wikipedia.org/wiki/Factory_method_pattern)

# kendo-ui - 将类别标签位置更改为图表区域之外

> ID：14719828
> 
> 赞同：2
> 
> 时间：2013-02-06T01:00:20.283
> 
> 标签：kendo-ui

我正在使用一个非常简单的剑道 UI 图表。

当值低于零时，轴标签保持在零轴附近。这导致文本和条形重叠，这不是最佳的。

我想让标签显示在图表区域的底部。有人知道怎么做吗？

见下文，“已批准”文本与灰色条重叠。我想要图表区域底部的标签。

![剑道图的图像](../Images/1c3e7a07f8f4a9bd372aa591247c4d2e.png)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-09T00:43:01.130

@gman，您正在寻找的是`axisCrossingValues`.

```
valueAxis: {
  min: -10,
  max: 10,
  // Keeps the default axis at the 0 crossing point
  // and moves the "label" axis to the very bottom
  axisCrossingValues: [0, -10]
} 
```

看看这里的代码示例：http: [//jsfiddle.net/design48/7C3nP/](http://jsfiddle.net/design48/7C3nP/)并将`axisCrossingValues`y 坐标更改为`-8`或其他内容。希望有帮助。

# python - Windows 的 peewee 安装程序

> ID：14719832
> 
> 赞同：0
> 
> 时间：2013-02-06T01:00:40.593
> 
> 标签：python, peewee

我正在尝试在 Windows 机器上安装 peewee。有windows的安装程序吗？或Windows的安装说明？我是 Python/peewee 的新手，似乎找不到任何东西。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2014-10-19T02:00:03.937

据我所知，peewee 没有独立的安装程序。**但是您可以使用 pip**轻松安装 peewee 。

这个[stackoverflow 线程给出了](https://stackoverflow.com/questions/4750806/how-to-install-pip-on-windows)**在 windows 上安装 pip 的**详细说明。

设置 pip 后，可以在 cmd 中使用命令安装 peewee

```
pip install peewee 
```

# jquery - 为什么我的插件在初始化时会出现此错误？未捕获的类型错误：对象 [对象对象] 没有方法“计数器”？

> ID：14719844
> 
> 赞同：0
> 
> 时间：2013-02-06T01:01:24.400
> 
> 标签：jquery, jquery-plugins, include, initialization, typeerror

我不明白为什么我会收到这个错误？！？！我正在尝试为 jQuery 使用一个简单的计数器插件：

```
Uncaught TypeError: Object [object Object] has no method 'counter' 
```

我已经包含了插件文件...我可以在源代码中看到它

```
/templates/ja_wall/js/counter.js 
```

但是每次我尝试像这样初始化插件时......我得到了未捕获的 TypeError

```
$("#main_counter").counter(); 
```

我已经在页面上下移动了插件包含...就在结束头标签之前...在页面底部...它似乎没有改变任何东西...我也移动了我的初始化代码到准备好的文档和window.load部分......都不起作用：-/

我错过了一些明显的东西吗？我有其他插件做得很好？！？！

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-06T01:04:47.170

尝试使用`$("#main_counter").kCounter()`. `jQuery.fn`不扩展`counter`，仅扩展`kCounter`。

# javascript - isNaN 在输入 2 个字符之前不会触发

> ID：14719845
> 
> 赞同：0
> 
> 时间：2013-02-06T01:01:31.367
> 
> 标签：javascript

我的 HTML 代码是：

```
<input onKeyPress="validateA(this.value)" type="text" id="AAA" name="AAA" size="10" placeholder="A">
<span id="aspan" class="validate">  </span> 
```

我的Javascript是：

```
function validateA(valueOfAAA) {
if (isNaN(valueOfAAA)) {
    document.getElementById('aspan').innerHTML="Please enter a numerical value.";

}
else {
    document.getElementById('aspan').innerHTML="";
}

} 
```

为了澄清，我的问题是：

为什么在`innerHTML="Please enter a numerical value."`我的输入框中输入两个字母或数字之前不会触发？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-06T01:07:58.270

更改`onKeyPress()`为，`onKeyUp()` 因为当按键触发时，输入的实际值尚未捕获。

# ruby - 如何创建一个程序来接受来自用户的十个号码？

> ID：14719847
> 
> 赞同：0
> 
> 时间：2013-02-06T01:01:38.910
> 
> 标签：ruby, syntax-error

我正在创建一个接受来自用户的十个数字的程序。然后，它显示十个数字的总和、它们的平均值以及最小和最大数字。最后，它应该显示单词“Jackpot！” 对于输入的每个等于或大于 100 的数字，以及“运气不好”。对于每个小于 100 的数字。

我的代码似乎无法正常工作，也无法在 Ruby 中运行。

```
puts 'Please enter 10 numbers one at a time.' 
num1=gets.chomp
num2=gets.chomp
num3=gets.chomp
num4=gets.chomp
num5=gets.chomp
num6=gets.chomp 
num7=gets.chomp
num8=gets.chomp
num9=gets.chomp
num10=gets.chomp
value_list=[num1, num2, num3, num4, num5, num6, num7, num8, num9, num10] 
subtotal=0
for x in 0..9
subtotal=subtotal+value_list[x]
puts 'Total: ' + subtotal
average=subtotal/10.to_f
average=sprintf("%.2f",average)
puts 'Average: ' + average
puts 'Smallest value: ' + sprintf("%.2f",value_list.min.to_s)
puts 'Largest value: ' + sprintf("%.2f",value_list.min.to_s)
if num1..num10 >=100
puts 'Jackpot!'
else
puts 'Tough Luck.'
sleep 120 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-06T01:15:03.507

一些东西：

1.  你需要`end`你的 blocks: `for ... end`, `if ... else ... end`, 等等。这是它不能运行的主要原因，即解析器不认为它是有效的语法。

2.  `gets.chomp`返回一个字符串，但您正在寻找整数。尝试`gets.chomp.to_i`强制整数类型。

3.  `'Total: ' + subtotal`：您将在字符串中添加一个整数，这是不允许的。Ruby 字符串插值是这样的（需要双引号）`"Total: #{subtotal}"`：. 这会将`subtotal`变量转换为字符串并即时将其插入到另一个字符串中。

4.  我不确定您要在这里做什么：`if num1..num10 >= 100`. 如果范围的任何成员大于 100，或者总和大于 100，这是不是这样？

您还可以在这里进行很多优化。一个很好的机会是当你有很多重复的代码时，比如`num1 = gets.chomp.to_i; num2 = gets ... etc`.

这是您程序的一个版本，（我认为）可以按照您的意愿进行操作。如果您认真学习 Ruby，请查看其中一些方法的文档（`<<`、`inject`等`.times`）：

```
puts 'Please enter 10 numbers one at a time.' 
value_list = []
10.times do
  value_list << gets.chomp.to_i
end

subtotal = value_list.inject(:+)

puts "Total: #{subtotal}"
puts "Average: #{(subtotal/10.0).round(2)}"
puts "Smallest value: #{value_list.min}"
puts "Largest value: #{value_list.max}" 

if subtotal >= 100
  puts 'Jackpot!'
else
  puts 'Tough Luck.'
end 
```

希望这可以帮助。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-06T01:25:00.633

您的代码需要一些`end`语句，并且您需要在计算之前将输入转换为数字。您还需要`for`在末尾和`if`之前关闭`'Jackpot!'`.

您可以使用以下方法转换所有输入的字符串`map`：

```
value_list = value_list.map(&:to_i) 
```

在计算小计时，您需要将其数据转换为字符串，或者只是插入数据：

```
puts "Total: #{subtotal}" 
```

在这之后你需要重做`if num1..num10 >=100`。它与`100`错误的 Range 进行比较。

# winforms - 如何限制表单的哪一侧是相当大的？

> ID：14719851
> 
> 赞同：0
> 
> 时间：2013-02-06T01:02:06.903
> 
> 标签：winforms, visual-c++

如何只使我的 vc++ 窗口的底部变大，而其余的边（左、右和顶部）不变大？

我希望在表单的 3 侧（顶部、左侧和右侧）移动时显示默认箭头光标，并在表单底部显示尺寸 NS 箭头并使其起作用。

谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-06T01:59:56.813

这需要回退到直接处理 Windows 通知，它不被 Form 类包装。您需要重写 WndProc() 方法并自定义 WM_NCHITTEST 的处理。修改您的 stdafx.h 文件并添加，`#include <windows.h>`然后将此代码添加到您的表单中：

```
protected:
    virtual void WndProc(Message% m) override {
        __super::WndProc(m);
        if (m.Msg == WM_NCHITTEST) {
            switch ((int)m.Result) {
                case HTLEFT: case HTRIGHT: case HTTOP: 
                case HTTOPLEFT: case HTTOPRIGHT:
                case HTBOTTOMLEFT: case HTBOTTOMRIGHT:
                    m.Result = (IntPtr)HTCLIENT;
            }
        }
    } 
```

# python - 如何编写在金字塔中显示静态 html 文件的可调用视图？

> ID：14719853
> 
> 赞同：3
> 
> 时间：2013-02-06T01:02:08.453
> 
> 标签：python, url, filesystems, pyramid

在我的金字塔应用程序中，我在 tutorial/tutorial/pages/name.html 下有几个静态 html 文件（例如）。我怎样才能为此编写一个可调用的视图？这行得通吗？

```
 @view_config(renderer='view_page')
     def view_page(request):
         return {} # no values have to be passed to the template 
```

然后在**init** .py 文件中

```
config.add_route('view_page', 'tutorial:pages/{name}.html') 
```

我需要在 def view_page(request) 函数中放入什么来专门调用该 name.html 文件然后显示其内容？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-06T03:56:32.073

Pyramid`static_view`是一个能够从目录中提供文件的视图。您真正没有解释的部分是这些静态页面的 URL 是什么样的。例如，如果它们都在一个共同的前缀下，您可以使用`static_view`（选项 1）。如果不是，那么您必须为每个页面创建一个视图并直接提供它（选项 2）。

## 选项1

网址：

```
/foo/bar.html
/foo/baz/boo.html 
```

静态视图：

```
config.add_static_view('/foo', 'tutorial:pages') 
```

教程/页面层次结构：

```
tutorial/pages/bar.html
tutorial/pages/baz/boo.html 
```

`add_static_view`实际上就像 call 一样`add_route('foo', '/foo/*subpath')`，它提供了`subpath`相对于`tutorial:pages`.

## 选项 2

```
config.add_route('foo', '/foo')
config.add_route('bar', '/foo/bar')

@view_config(route_name='foo', renderer='tutorial:pages/foo.html.mako')
@view_config(route_name='bar', renderer='tutorial:pages/bar.html.mako')
def static_view(request):
    return {} 
```

注意`.mako`调用 mako 渲染器的后缀。默认情况下没有`.html`渲染器，但您可以制作一个。

# eclipse - 如何向 Eclipse IDE 添加新的 JVM 语言，例如 Scala、Clojure、Fantom、Groovy？

> ID：14719854
> 
> 赞同：2
> 
> 时间：2013-02-06T01:02:09.463
> 
> 标签：eclipse, scala, groovy, clojure, jvm-languages

通过 scala-lang.org 下载 Scala 的首选方式是什么，可以直接由 Eclipse IDE 添加还是如何将 Scala 添加到 Eclipse IDE？是否有关于如何添加 JVM 语言的约定？

## 更新

我可以从帮助中添加 Clojure 和 Scala *...安装新软件*，所以现在我可以创建这些类型的项目：

![在此处输入图像描述](../Images/7ffc245c7e1b9d8589e887218c10f7a2.png)

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-02-06T02:04:31.073

您通常使用 Eclipse 的内置插件语言安装该语言的插件。

例如对于 Clojure，您可以在插件管理器中搜索“逆时针”以获得 Clojure 支持。对于 Scala，它看起来像[http://scala-ide.org/](http://scala-ide.org/)是详细说明的一个很好的起点，并且是一个很好的设置它的截屏视频。值得注意的是，许多 JVM 语言（如 Clojure）不需要显式安装，它们是根据标准 Java 构建工具（如 Maven）的要求下载的。如果您明确安装其他语言（如 Groovy），则更容易使用它们。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2013-02-06T02:36:29.750

如果您是 IDEA 用户，目前最好的方法是使用[SBT](http://www.scala-sbt.org/)来管理您的项目并使用其[sbt-idea](https://github.com/mpeltonen/sbt-idea)插件（添加`gen-idea`任务）来创建 IDEA 项目文件和目录。

理想情况下，使用[Paul Phillips 的 SBT 启动器](https://github.com/paulp/sbt-extras)（如果您要构建指定 SBT 版本可能遍布地图的第 3 方项目，则可以获得 SBT 版本的灵活性）并配置非项目特定的插件，例如 sbt-想法，在您的每个用户共享`~/.sbt`目录中。这样，您的所有项目都会自动拥有它，但它不会侵入项目定义本身。

可选地，有一个集成了 SBT 的交互式控制台和 IDEA 应用程序的 IDEA 插件。其中最好的部分是编译错误成为您代码的超链接。

我不知道 sbt-idea 是否有 Eclipse 对应物，但即使没有，SBT 也是可行的方法。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2013-02-06T02:12:53.013

The JVM languages typically have plugins for Eclipse, e.g. [Counterclockwise](http://code.google.com/p/counterclockwise/) for Clojure.

In many cases you can also use JVM languages without a plugin in a regular Java project. For example the following approach works with Clojure:

*   Include clojure-1.4.0.jar as a dependency (using Maven or similar)
*   Include clojure source files as regular resources in your project
*   Write a short piece of Java code that executes the clojure code by calling the appropriate methods in `clojure.lang.RT` (a class provided in Clojure's jar file)

# java - 用于非 Web 应用程序的应用程序服务器

> ID：14719856
> 
> 赞同：0
> 
> 时间：2013-02-06T01:02:20.867
> 
> 标签：java, jakarta-ee

我有兴趣了解使用应用程序服务器（例如 Glassfish）的“最佳实践”。我有一个中等规模的应用程序，它由使用和获取 Web 服务的各种组件组成。这些组件托管在 Glassfish 环境中。

我现在需要一个简单的计划函数，将数据从一个数据库复制到另一个数据库。也就是说，它不需要网络类型的功能。它可以很容易地构建为一个简单的应用程序（比如围绕 Quartz），并与其他组件一起部署在同一个 Glassfish 服务器中。我知道这是一个简单的问题，但是这是一种“合理”的方法，还是真的应该是独立于应用程序服务器运行的独立应用程序？我想更普遍的问题是“应用程序服务器的适当用途是什么，什么不是？”

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-06T01:19:23.537

它可能只是一个从 cron 调用的 shell 脚本......

说真的，应用服务器不是一个很好的用途，*除非*你要从中获得某种监控或负载分配。但听起来这实际上只是一个批处理作业，在这种情况下，您应该做简单的事情，只需编写一个带有 main 方法的脚本或简单的应用程序，您可以从 cron（或类似的东西）调用或从命令行运行带有某种嵌入式计时器（或睡眠线程）。

# iphone - Apple 的 SpeakHere 示例无法在 Xcode 6.1 模拟器中录制语音，但可以在 5.1 中录制语音，可在真实设备中使用

> ID：14719857
> 
> 赞同：1
> 
> 时间：2013-02-06T01:02:24.963
> 
> 标签：iphone, xcode, ios4, simulator

我无法使用 Apple 的 SpeakHere 示例应用程序录制音频。当我在 Xcode 中的 Simulator 6.1 版中运行该应用程序时，它可以正常启动，但是当我触摸录制按钮时，电平表根本不动，并且音频文件里面没有声音，是的音频文件存在。奇怪的是，当我将模拟器更改为 5.1 版本时，看起来录音正在工作，电平表正在工作，但是当我按下播放按钮时，完全没有声音但仪表在移动，我检查了从第三方应用程序播放音频文件，没问题，所以5.1版模拟器，它可以录制，不能播放，但输出错误消息，如：Error loading /System/Library/Extensions/AppleHDA.kext/Contents/PlugIns /AppleHDAHALPlugIn.bundle/Contents/MacOS/AppleHDAHALPlugIn：

**总结：** 我的机器是 Mini Mac，OSX 10.8.2 带 USB 耳机和麦克风。

*   6.1版模拟器，不能报，不能玩。

*   5.1版模拟器，能报，不能玩。

谁能知道如何解决所有这些问题以在模拟器中工作？我推送 SpeakHere 示例应用程序，它可以在 6.1 真实设备（我的 iPad）中运行。

# c# - 尝试添加到字典列表时出现 NullReferenceException

> ID：14719865
> 
> 赞同：0
> 
> 时间：2013-02-06T01:02:48.030
> 
> 标签：c#, .net, oop, list, dictionary

执行此代码时，我在这些行上收到 NullReferenceException：

```
List<Dictionary<Slot, string>> slots = new List<Dictionary<Slot, string>>();
                Dictionary<Slot, string> somedict = new Dictionary<Slot, string>();
                somedict.Add(new Slot(), "s");
                this.slots.Add(somedict); 
```

我无法弄清楚发生了什么。我用正确的项目创建了一个字典，但是当我尝试将它添加到列表中时，我只得到一个 NullReferenceException ....

我已经在 MSDN 和这个网站上看了大约 2 个小时，但没有运气。谁能帮我吗？我只是想将字典存储到列表中。

```
namespace hashtable
{
    class Slot
    {
        string key;
        string value;

        public Slot()
        {
            this.key = null;
            this.value = null;
        }
    }

    class Bucket
    {
        public int count;
        public int overflow;
        public List<Dictionary<Slot, string>> slots;
        Dictionary<Slot, string> somedict;

        public Bucket()
        {
            this.count = 0;
            this.overflow = -1;
            List<Dictionary<Slot, string>> slots = new List<Dictionary<Slot, string>>();
            Dictionary<Slot, string> somedict = new Dictionary<Slot, string>();
            somedict.Add(new Slot(), "s");
            this.slots.Add(somedict);
            for (int i = 0; i < 3; ++i)
            {
            }
        }
    }
} 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-02-06T01:05:55.390

您的`Bucket`构造函数正在创建一个局部变量`slots`，但您正在尝试添加 `somedict`到 (未初始化)`Bucket`成员`slots`。

代替

```
List<Dictionary<Slot, string>> slots = new List<Dictionary<Slot, string>>(); 
```

和

```
this.slots = new List<Dictionary<Slot, string>>(); 
```

（与此相同）

```
slots = new List<Dictionary<Slot, string>>(); 
```

你会遇到同样的问题`somedict`。如果您的意思不是它是 中的类成员`Bucket`，请不要在那里声明它。如果这样做，请不要在`Bucket`构造函数中将其声明为局部变量。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-06T01:21:25.000

当然，如果你使用更简洁的声明局部变量`var`的语法，问题就很明显了……

```
var slots = new List<Dictionary<Slot, string>>();
var somedict = new Dictionary<Slot, string>();
somedict.Add(new Slot(), "s");
this.slots.Add(somedict); 
```

正如 DocMax 指出的那样，您尚未初始化`this.slots`并且可能意味着...

```
this.slots = new List<Dictionary<Slot, string>>();
var somedict = new Dictionary<Slot, string>();
somedict.Add(new Slot(), "s");
this.slots.Add(somedict); 
```

我怀疑该`Bucket.somedict`字段的声明可能是多余的，因为您正在创建一个本地`somedict`然后将其添加到稍后可以检索的列表中。

# api - 如何减少 neo4j 查询中的数据量？

> ID：14719869
> 
> 赞同：1
> 
> 时间：2013-02-06T01:03:12.063
> 
> 标签：api, rest, neo4j

[当通过Neo4j](http://neo4j.org)请求数据时，例如，

```
curl -i -XPOST -d'{ "query" : "start n=node(*) return n" }' 
  -H "accept:application/json;stream=true" 
  -H content-type:application/json 
  http://localhost:7474/db/data/cypher 
```

如文件所述，我得到了这样的回复：

```
{
  "columns" : [ "n" ],
  "data" : [ [ {
    "outgoing_relationships" : "http://localhost:7474/db/data/node/0/relationships/out",
    "data" : {
    },
    "traverse" : "http://localhost:7474/db/data/node/0/traverse/{returnType}",
    "all_typed_relationships" : "http://localhost:7474/db/data/node/0/relationships/all/{-list|&|types}",
    "property" : "http://localhost:7474/db/data/node/0/properties/{key}",
    "self" : "http://localhost:7474/db/data/node/0",
    "properties" : "http://localhost:7474/db/data/node/0/properties",
    "outgoing_typed_relationships" : "http://localhost:7474/db/data/node/0/relationships/out/{-list|&|types}",
    "incoming_relationships" : "http://localhost:7474/db/data/node/0/relationships/in",
    "extensions" : {
    },
    "create_relationship" : "http://localhost:7474/db/data/node/0/relationships",
    "paged_traverse" : "http://localhost:7474/db/data/node/0/paged/traverse/{returnType}{?pageSize,leaseTime}",
    "all_relationships" : "http://localhost:7474/db/data/node/0/relationships/all",
    "incoming_typed_relationships" : "http://localhost:7474/db/data/node/0/relationships/in/{-list|&|types}"
  } ], [ {
    "outgoing_relationships" : "http://localhost:7474/db/data/node/1/relationships/out",
    "data" : {
      "glyph" : "一",
      "~isa" : "glyph"
    },
    "traverse" : "http://localhost:7474/db/data/node/1/traverse/{returnType}",
    "all_typed_relationships" : "http://localhost:7474/db/data/node/1/relationships/all/{-list|&|types}",
    "property" : "http://localhost:7474/db/data/node/1/properties/{key}",
    "self" : "http://localhost:7474/db/data/node/1",
    "properties" : "http://localhost:7474/db/data/node/1/properties",
    "outgoing_typed_relationships" : "http://localhost:7474/db/data/node/1/relationships/out/{-list|&|types}",
    "incoming_relationships" : "http://localhost:7474/db/data/node/1/relationships/in",
    "extensions" : {
    },
    "create_relationship" : "http://localhost:7474/db/data/node/1/relationships",
    "paged_traverse" : "http://localhost:7474/db/data/node/1/paged/traverse/{returnType}{?pageSize,leaseTime}",
    "all_relationships" : "http://localhost:7474/db/data/node/1/relationships/all",
    "incoming_typed_relationships" : "http://localhost:7474/db/data/node/1/relationships/in/{-list|&|types}"
  } ], [ {
    "outgoing_relationships" : "http://localhost:7474/db/data/node/2/relationships/out",
    "data" : {
      "~isa" : "LPG",
      "LPG" : "1"
    },
    "traverse" : "http://localhost:7474/db/data/node/2/traverse/{returnType}",
    "all_typed_relationships" : "http://localhost:7474/db/data/node/2/relationships/all/{-list|&|types}",
    "property" : "http://localhost:7474/db/data/node/2/properties/{key}",
    "self" : "http://localhost:7474/db/data/node/2",
    "properties" : "http://localhost:7474/db/data/node/2/properties",
    "outgoing_typed_relationships" : "http://localhost:7474/db/data/node/2/relationships/out/{-list|&|types}",
    "incoming_relationships" : "http://localhost:7474/db/data/node/2/relationships/in",
    "extensions" : {
    },
    "create_relationship" : "http://localhost:7474/db/data/node/2/relationships",
    "paged_traverse" : "http://localhost:7474/db/data/node/2/paged/traverse/{returnType}{?pageSize,leaseTime}",
    "all_relationships" : "http://localhost:7474/db/data/node/2/relationships/all",
    "incoming_typed_relationships" : "http://localhost:7474/db/data/node/2/relationships/in/{-list|&|types}"
  } ], [ { 
```

等等等等。每个节点提供的 URL 固然是好意，但它们也占据了传输数据的主要部分。在我的查询之后，它们也是高度冗余的，而不是我的。有什么 办法 可以放弃 所有 这些 `traverse`，，，，，，，，，，，，，，， `all_typed_relationships`爵士 ？ `property`_ `self`_ `properties`_ `outgoing_typed_relationships``incoming_relationships``extensions``create_relationship``paged_traverse``all_relationships``incoming_typed_relationships`

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-06T04:18:03.807

唯一的方法是指定要在`return`语句中返回的属性。像：

```
return id(n), n.glyph; 
```

# css - 左侧固定位置侧边栏：50%；在小窗口尺寸上从左侧移开

> ID：14719873
> 
> 赞同：0
> 
> 时间：2013-02-06T01:03:40.577
> 
> 标签：css, css-position

我有一个固定位置的侧边栏：

```
.sidebar {
  position: fixed;
  top: 51px;
  left: 50%;
  min-height: 100%;
  width: 225px;
  margin-left: -470px;
  padding-top: 24px;
  background: url('images/side-bg.jpg') no-repeat;
  overflow: hidden;
  z-index: 20;
} 
```

在`margin: 0 auto;`'d 容器内：

```
#outside_container {
  position: relative;
  min-height: 100%;
  width: 1022px;
  margin: 0 auto;
} 
```

到目前为止，`left:50%;`左边距为负的技巧很好地使其与站点的其余部分居中。但是，当浏览器窗口大小减小到小于站点宽度时，导航会快速向左移动，直到您再也看不到它为止。在这里试试：[http ://ravictilanding.cbstage.com/](http://ravictilanding.cbstage.com/)

我能做些什么来阻止这种行为，同时保持它固定在正常宽度？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-06T01:21:43.410

为什么需要侧边栏`left: 50%, margin: -0.5width`？您没有将侧边栏本身居中，只有容器 div 并由`margin: 0 auto`. 除非我遗漏了什么，否则您根本无法定义`left`并应用正数`margin-left`以将其从`#outsidecontainer`. 这有效，似乎不会破坏 Chrome 中的任何内容，但我没有看过其他浏览器。

# java - 通过 JNI 从 C++ 应用程序调用的 Java 调用 C++ 回调

> ID：14719878
> 
> 赞同：4
> 
> 时间：2013-02-06T01:05:45.423
> 
> 标签：java, c++, callback, java-native-interface

我有一个需要与 Java 库交互的 C++ 应用程序。我想从 Java 端接收通知，因此它需要回调 C++ 应用程序。我找到了许多关于从 C++ 调用 Java 函数（这是最简单的部分）和从 Java 调用从 DLL 导出的 C/C++ 函数的示例。

到目前为止，我发现的一切都是如何从 Java 应用程序中的外部 C++ 函数调用 Java 回调。我需要相反的。

使用直接的 C++，这当然很容易。我只需将一个函数指针传递给该类，该类会在需要时作为回调调用。当我改为调用 Java 函数时，我该怎么做？

如果有比我在这里要求的更好的方法是整体应用程序：

我的 C++ 应用程序需要访问外部服务器，该服务器会将数据流式传输回我的应用程序。访问 API 是基于 Java 的 API。我目前的计划是构建一个处理所有 API 调用的 Java 包装器。这个包装器将使用 JNI 从我的 C++ 应用程序中调用。当收到数据时，它会尽可能多地处理它，然后将调整后的数据通知我的 C++ 应用程序。

总结一下如何从 Java 类调用 C++ 函数回调，而 Java 类又通过 JNI 从 C++ 应用程序调用。没有要加载的 DLL 供 Java 使用。尽管如果一切都可以正常连接，我可以根据需要制作一个。

函数路径：C++应用->Java类库->C++回调函数

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-18T18:13:39.747

我找到了。环境类中有一个名为“ [RegisterNatives](http://docs.oracle.com/javase/7/docs/technotes/guides/jni/spec/functions.html#wp17734) ”的函数。有了这个，我可以在运行时为任何 Java 类注册 C++ 回调。我试过了，它完全按预期工作。

# python - 在 Python 中以所需格式格式化字符串

> ID：14719882
> 
> 赞同：0
> 
> 时间：2013-02-06T01:06:06.933
> 
> 标签：python, d3.js

我有一个格式的数据：

id1 id2 值 类似

```
1   234  0.2
1   235  0.1 
```

等等。我想将其转换为 json 格式：

```
{
  "nodes": [ {"name":"1"},  #first element
             {"name":"234"}, #second element
             {"name":"235"} #third element
             ] ,
   "links":[{"source":1,"target":2,"value":0.2},
             {"source":1,"target":3,"value":0.1}
           ]
} 
```

因此，从原始数据到上述格式.. 节点包含原始数据中存在的所有（不同）名称集，链接基本上是节点返回的值列表中源和目标的行号。例如：

```
 1 234 0.2 
```

1 在键“nodes”持有的值列表中的第一个元素中 234 是键“nodes”持有的值列表中的第二个元素

因此链接字典是 {"source":1,"target":2,"value":0.2}

我如何在python中有效地做到这一点..我相信应该有比我正在做的更好的方法，这太混乱了:(这是我从集合导入defaultdict所做的

```
def open_file(filename,output=None):
    f = open(filename,"r")
    offset = 3429
    data_dict = {}
    node_list = []
    node_dict = {}
    link_list = []
    num_lines = 0
    line_ids = []
    for line in f:
        line = line.strip()
        tokens = line.split()
        mod_wid  = int(tokens[1]) + offset

        if not node_dict.has_key(tokens[0]):
            d = {"name": tokens[0],"group":1}
            node_list.append(d)
            node_dict[tokens[0]] = True
            line_ids.append(tokens[0])
        if not node_dict.has_key(mod_wid):
            d = {"name": str(mod_wid),"group":1}
            node_list.append(d)
            node_dict[mod_wid] = True
            line_ids.append(mod_wid)

        link_d = {"source": line_ids.index(tokens[0]),"target":line_ids.index(mod_wid),"value":tokens[2]}
        link_list.append(link_d)
        if num_lines > 10000:
            break
        num_lines +=1

    data_dict = {"nodes":node_list, "links":link_list}

    print "{\n"
    for k,v in data_dict.items():
        print  '"'+k +'"' +":\n [ \n " 
        for each_v in v:
            print each_v ,","
        print "\n],"
    print "}"

open_file("lda_input.tsv") 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-06T01:49:17.830

我假设您所说的“高效”是指程序员的效率——阅读、维护和编写逻辑代码的难易程度——而不是运行时的速度效率。如果您担心后者，您可能会无缘无故地担心。（但无论如何，下面的代码可能会更快。）

想出更好的解决方案的关键是更抽象地思考。考虑 CSV 文件中的行，而不是文本文件中的行；创建一个`dict`可以在 JSON 中呈现的，而不是尝试通过字符串处理生成 JSON；如果您想重复执行它们，请将它们包装在函数中；等等。像这样的东西：

```
import csv
import json
import sys

def parse(inpath, namedict):
    lastname = [0]
    def lookup_name(name):
        try:
            print('Looking up {} in {}'.format(name, names))
            return namedict[name]
        except KeyError:
            lastname[0] += 1
            print('Adding {} as {}'.format(name, lastname[0]))
            namedict[name] = lastname[0]
            return lastname[0]
    with open(inpath) as f:
        reader = csv.reader(f, delimiter=' ', skipinitialspace=True)
        for id1, id2, value in reader:
            yield {'source': lookup_name(id1),
                   'target': lookup_name(id2),
                   'value': value}

for inpath in sys.argv[1:]:
    names = {}
    links = list(parse(inpath, names))
    nodes = [{'name': name} for name in names]
    outpath = inpath + '.json'
    with open(outpath, 'w') as f:
        json.dump({'nodes': nodes, 'links': links}, f, indent=4) 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-06T01:25:10.647

不要手动构建 JSON。`json`使用该模块从现有的 Python 对象中创建它：

```
def parse(data):
    nodes = set()
    links = set()

    for line in data.split('\n'):
        fields = line.split()

        id1, id2 = map(int, fields[:2])
        value = float(fields[2])

        nodes.update((id1, id2))
        links.add((id1, id2, value))

    return {
        'nodes': [{
            'name': node
        } for node in nodes],
        'links': [{
            'source': link[0],
            'target': link[1],
            'value': link[2]
        } for link in links]
    } 
```

现在，您可以使用`json.dumps`来获取字符串：

```
>>> import json
>>> data = '1   234  0.2\n1   235  0.1'
>>> parsed = parse(data)
>>> parsed
    {'links': [{'source': 1, 'target': 235, 'value': 0.1},
  {'source': 1, 'target': 234, 'value': 0.2}],
 'nodes': [{'name': 1}, {'name': 234}, {'name': 235}]}
>>> json.dumps(parsed)
    '{"nodes": [{"name": 1}, {"name": 234}, {"name": 235}], "links": [{"source": 1, "target": 235, "value": 0.1}, {"source": 1, "target": 234, "value": 0.2}]}' 
```

# django - Django - 无法让时间函数（时区、日期时间）正常工作，获取 ErrorName 消息：未定义全局名称

> ID：14719883
> 
> 赞同：6
> 
> 时间：2013-02-06T01:06:10.327
> 
> 标签：django, datetime, django-models, timezone

我是 Django 新手，

我正在学习教程，我必须创建两个模型，如下所示：

```
import datetime
from django.db import models
from django.utils import timezone

class Poll(models.Model):
    question = models.CharField(max_length=200)
    pub_date = models.DateTimeField('date published')

    def __unicode__(self):
        return self.question

    def was_published_recently(self):
        return self.pub_date >= timezone.now() - datetime.timedelta(days=1)

class Choice(models.Model):
    poll = models.ForeignKey(Poll)
    choice_text = models.CharField(max_length=200)
    votes = models.IntegerField()

    def __unicode__(self):
        return self.choice_text 
```

以下代码来自教程。我应该得到真实的。

```
# Make sure our custom method worked.
>>> p = Poll.objects.get(pk=1)
>>> p.was_published_recently()
True 
```

但是当我输入（与教程相同的行）时：

```
>>> p = Poll.objects.get(pk=1)
>>> p.was_published_recently() 
```

我收到以下错误消息：

```
models.py line 12 in was_published_recently
NameError: global name 'datetime' is not defined.. 
```

我导入`datetime`了`timezone`......我不明白为什么我会收到该错误消息。

任何帮助将不胜感激！:-)

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2015-02-10T19:09:34.347

> 您需要先从 Django utils 导入 Timezone，然后再导入 datetime。

```
from django.db import models
    from django.utils import timezone
    import datetime 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2016-03-06T01:09:53.743

在测试教程（第 5 部分）中，我们处理**polls/tests.py**文件。但是，当您运行测试时，错误会抱怨**polls/models.py**文件。此文件在测试教程中未提及，但您可以在错误消息中看到它。

添加`from django.utils import timezone`到**polls/models.py**并再次尝试测试。

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2013-02-06T02:52:59.190

无法重现该问题，您的代码对我有用。你可以尝试这样的事情：

```
from datetime import timedelta as tdelta
...
def was_published_recently(self):
    return self.pub_date >= timezone.now() - tdelta(days=-1) 
```

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2018-12-21T17:42:41.543

如果您的问题是关于**编写您的第一个 Django 应用程序，第 5 部分**，您应该添加这两行

```
import datetime
from django.utils import timezone 
```

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2014-06-22T01:17:55.830

只是为了澄清，这是我需要在 polls/models.py 文件顶部添加的内容：

```
import datetime
from django.utils import timezone 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2013-10-20T14:26:34.647

我知道这是一个较旧的线程。我有同样的问题，因为我忘了添加这一行： from django.utils import timezone

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2015-01-10T16:57:20.827

关于该错误消息，请注意 Django 文档所说的内容：

> 如果您遇到查询日期或时间的异常，请在提交错误之前尝试安装它。>这很简单：

`$ sudo pip install pytz`

一旦你安装了这个包，问题就会神奇地消失！

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2019-08-27T13:27:38.580

我尝试了所有方法，但问题仍然没有得到解决。最后，当我也以与 shell 中其他人提到的相同顺序导入时，测试成功了。

我最后不得不导入日期时间，然后它才开始工作。

* * *

## 回答 #9

> 赞同：0
> 
> 时间：2021-12-08T13:47:06.347

我遇到了同样的问题。

我发现添加导入后必须重新打开 Python shell，`timezone`以便应用更改。之后它对我有用。

# c++ - 未找到成员声明？

> ID：14719885
> 
> 赞同：0
> 
> 时间：2013-02-06T01:06:35.453
> 
> 标签：c++, eclipse

我在 Eclipse 中编写一个 C++ 应用程序，在编写一些代码时，我在 ch_type.cpp 的第 18、27、41 和 81 行发现了几个错误。这是我项目的当前代码：

**ch_type.h**

```
/********************************************************
 * char_type -- Character type class            *
 *                          *
 * Member functions:                    *
 *  type -- returns the type of a character     *
 *      (Limited to simple types)       *
 *  is(ch, char_type) -- check to see if ch is  *
 *      a member of the given type.     *
 *      (Works for derrived types as well.) *
 *******************************************************/
class char_type {
    public:
        enum CHAR_TYPE {
            C_EOF,      // End of file character
            C_WHITE,    // Whitespace or control character
            C_NEWLINE,  // A Newline character
            C_ALPHA,    // A Letter (includes _)
            C_DIGIT,    // A number
            C_OPERATOR, // Random operator
            C_SLASH,    // The character '/'
            C_L_PAREN,  // The character '('
            C_R_PAREN,  // The character ')'
            C_L_CURLY,  // The character '{'
            C_R_CURLY,  // The character '}'
            C_SINGLE,   // The character '\''
            C_DOUBLE,   // The character '"'
            // End of simple types, more complex, derrived types follow
            C_HEX_DIGIT,    // Hexidecimal digit
            C_ALPHA_NUMERIC // Alpha numeric
        };
    private:
        static enum CHAR_TYPE  type_info[256];      // information of each character

        // Fill in a range of type info stuff
        void fill_range(int start, int end, CHAR_TYPE type);
    public:
        char_type();    // Initialize the data
            //~char_type -- default destructor

            // Returns true if character is a given type
            int is(int ch, CHAR_TYPE kind);

            CHAR_TYPE type(int ch);
        } 
```

**ch_type.cpp**

```
/********************************************************
 * ch-type package                  *
 *                          *
 * The class ch_type is used to tell the type of    *
 * various characters                   *
 *                          *
 * The main number functions are:           *
 *  is -- True if the character is the indicated    *
 *      type.                   *
 *  type -- Return type of character.       *
 *******************************************************/
#include <iostream>
#include <assert.h>

#include "ch_type.h"

// Define the type information array
char_type::CHAR_TYPE char_type::type_info[256];
/********************************************************
 * fill_range -- fill in a range of types for the   *
 *  character type class                *
 *                          *
 * Parameters                       *
 *  start, end -- range of items to fill in     *
 *  type -- type to use for filling         *
 *******************************************************/
void char_type::fill_range(int start, int end, CHAR_TYPE type)
{
    int cur_ch;

    for (cur_ch = start; cur_ch <= end; ++cur_ch) {
        assert(cur_ch >= 0);
        assert(cur_ch < sizeof(type_info)/sizeof(type_info[0]));
        type_info[cur_ch] = type;
    }
}

/*********************************************************
 * char_type::char_type -- initialize the char type table*
 ********************************************************/
char_type::char_type()
{
    fill_range(0, 255, C_WHITE);

    fill_range('A', 'Z', C_ALPHA);
    fill_range('a', 'z', C_ALPHA);
    type_info['_'] = C_ALPHA;

    type_info['!'] = C_OPERATOR;
    type_info['#'] = C_OPERATOR;
    type_info['$'] = C_OPERATOR;
    type_info['%'] = C_OPERATOR;
    type_info['^'] = C_OPERATOR;
    type_info['&'] = C_OPERATOR;
    type_info['*'] = C_OPERATOR;
    type_info['-'] = C_OPERATOR;
    type_info['+'] = C_OPERATOR;
    type_info['='] = C_OPERATOR;
    type_info['|'] = C_OPERATOR;
    type_info['~'] = C_OPERATOR;
    type_info[','] = C_OPERATOR;
    type_info[':'] = C_OPERATOR;
    type_info['?'] = C_OPERATOR;
    type_info['.'] = C_OPERATOR;
    type_info['<'] = C_OPERATOR;
    type_info['>'] = C_OPERATOR;

    type_info['/'] = C_SLASH;
    type_info['\n'] = C_NEWLINE;

    type_info['('] = C_L_PAREN;
    type_info[')'] = C_R_PAREN;

    type_info['{'] = C_L_CURLY;
    type_info['}'] = C_R_CURLY;

    type_info['"'] = C_DOUBLE;
    type_info['\''] = C_SINGLE;
}

int char_type::is(int ch, CHAR_TYPE kind)
{
    if (ch == EOF) return (kind == C_EOF);

    switch (kind) {
        case C_HEX_DIGIT:

            assert(ch >= 0);
            assert(ch < sizeof(type_info)/sizeof(type_info[0]));

            if (type_info[ch] == C_DIGIT)
                return (1);

            if ((ch >= 'A') && (ch <= 'F'))
                return (1);
            if ((ch >= 'a') && (ch <= 'f'))
                return (1);
            return (0);
        case C_ALPHA_NUMERIC:
            assert(ch >= 0);
            assert(ch < sizeof(type_info)/sizeof(type_info[0]));

            return ((type_info[ch] == C_ALPHA) ||
                (type_info[ch] == C_DIGIT));
        default:
            assert(ch >= 0);
            assert(ch < sizeof(type_info)/sizeof(type_info[0]));

            return (type_info[ch] == kind);
        }
}; 
```

我做错了什么？我该如何修复这些错误？

这是我的错误信息：

> 说明 资源路径 位置 类型
> 
> 未找到成员声明 ch_type.cpp /stats 第 18 行语义错误

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-06T01:20:24.757

首先，在类定义之后，您必须插入`;`

```
class char_type {
    ...
}; //HERE 
```

其次，要使用宏`EOF`，您必须包括`<stdio.h>`

# java - JVM 是否乱序执行字节码？

> ID：14719891
> 
> 赞同：3
> 
> 时间：2013-02-06T01:07:55.147
> 
> 标签：java, jvm

一些讨论线程提到了 Java 代码的乱序执行，但是他们没有明确声称 JVM 乱序执行字节码。所以我想知道这是不是真的；如果是，是否有关于该主题的（官方）技术文档？

谢谢。

编辑：我知道CPU乱序执行指令，但我想知道JVM本身是否乱序执行字节码。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-02-06T01:12:15.397

[JVMS](http://docs.oracle.com/javase/specs/jvms/se7/html/index.html)解释了这个主题。一般来说，JVM 可以自由地对字节码进行某种重新排序，这可能会在多线程应用程序中产生意想不到的行为。

对于单线程应用程序和每个单线程，重新排序不会影响行为，程序/线程执行与您在源代码中所期望的相同。

# java - 无法在 Eclipse 调试透视图中查看源代码

> ID：14719899
> 
> 赞同：7
> 
> 时间：2013-02-06T01:08:42.050
> 
> 标签：java, eclipse, debugging, perspective

我在调试透视图中移动窗口的排列。之后，无论我在 Java 透视图中打开了哪些 .java 文件，在调试透视图中只会打开带有 main 方法的源文件，我不知道如何查看其他源文件。

然后，我不小心关闭了主源文件，现在在我的调试视图中看不到任何源代码。

如果我转到 Window -> New Editor，或者如果我从导航器中双击 Main.java，则没有任何反应。

我将透视重置为默认值，在编辑器中显示“没有 id org.eclipse.ui.internal.emptyEditorTab 的编辑器描述符”

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-06-04T05:32:01.777

根据这个[链接](https://bugs.eclipse.org/bugs/show_bug.cgi?id=386648)试试这个，

关闭 Eclipse 并删除 .metadata/.plugins/org.eclipse.e4.workbench/workbench.xmi

从您的工作区中，如果您发现另一个错误，请剪切并粘贴到另一个位置..

```
 YOU CAN POST YOUR BUG TO THAT LINK 

     IF YOU FEEL THAT THAT BUG DOES NOT REPRESENT YOUR PROBLEM.. ^^

               FEEL FREE TO DO IT, THEY WILL HEAR YOU.. 
```

如果您仍想使用 eclipse，请再次重新安装，导入您的代码。它对我不利。快乐编码.. ^^

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2014-01-14T21:08:53.993

我剪切了文件 workbench.xmi --> C:\User\workspace.metadata.plugins\workbench.xmi

现在日食正在运行，没有错误！

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2014-08-14T18:12:26.663

删除 workbench.xmi，它对我有用。

# xpath - 选择跨度元素的 XPath 类和文本

> ID：14719900
> 
> 赞同：1
> 
> 时间：2013-02-06T01:08:45.357
> 
> 标签：xpath, selector, casperjs

我有一个像这样的元素：

```
<span class="myTest">Estimates</span> 
```

如何使用 XPath 来选择它？这就是我所拥有的：

```
x("//*[contains(@class,'myTest')][normalize-space(text())='Estimates']") 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-07T16:08:38.090

您的选择器实际上是正确的，这是使用 casperjs 主分支的简短测试：

```
var x = require('casper').selectXPath;

casper.test.begin('your selector is okay', 1, function(test) {
    casper.start().setContent('<span class="myTest">Estimates</span>');
    test.assertExists(x("//*[contains(@class,'myTest')][normalize-space()='Estimates']"));
    test.done();
}); 
```

演示：

```
$ casperjs test test-xpath.js
Test file: test-xpath.js
# your selector is okay
PASS Found an element matching: xpath selector: //*[contains(@class,'myTest')][normalize-space()='Estimates']
PASS 1 tests executed in 0.118s, 1 passed, 0 failed. 
```

# c - 为什么这个逻辑/按位运算返回 1？

> ID：14719902
> 
> 赞同：1
> 
> 时间：2013-02-06T01:08:49.837
> 
> 标签：c, logic, bit-manipulation, boolean-logic, conditional-statements

我不明白为什么以下返回 1：

```
0x0102 && (0xff << 8) 
```

据我了解，向左移位`0xff`八位会导致`0x00`; 任何事情都会`anding`导致0x00。我哪里错了？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-06T01:11:15.353

你正在使用`logical AND`，不是`bitwise AND`。替换`&&`为`&`。

尝试

```
0x0102 & (0xff << 8) 
```

> 据我了解，将 0xff 向左移动 8 位会导致 0x00；和任何东西都会导致0x00。我哪里错了？

0xFF 是一个`int`. 通常它是 16 位或 32 位，具体取决于编译器设置。所以左移 8 位结果是`0xFF00`.

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-02-06T01:11:33.970

`(0xff << 8)`结果`0xff00`。按位与`0x0102`将产生`0x0100`（即`true`）。

但是，你没有做按位与。`&&`是逻辑与。`&`是按位与。您基本上要做的`if 0x0102`是`true`AND `if (0xff << 8)`is `true`，由于参数不为零，`true`因此会导致（转换为 1）。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-02-06T01:10:56.680

`&&`是逻辑与。你想要按位 AND `&`，例如

```
0x0102 & (0xff << 8) 
```

此外，向左移位`0xff`八位会导致`0xff00`，因为按位算术是整数而不是字节。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-02-06T01:12:06.547

一个整数常量不是由简单的 8 位组成的，`0xFF << 8`是`0xFF00`.

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-02-06T01:17:03.993

请参见[In C Left shift (char) 0xFF by 8 并将其转换为 int](https://stackoverflow.com/questions/1097130/in-c-left-shift-char-0xff-by-8-and-cast-it-to-int)

0xff << 8 产生 -256。由于 AND 逻辑门的两边都不为 0，所以它会返回 true 或 1。

# objective-c - Mac-AVAudioRecorder 选择麦克风

> ID：14719904
> 
> 赞同：0
> 
> 时间：2013-02-06T01:09:36.173
> 
> 标签：objective-c, xcode, macos, core-audio, avaudiorecorder

在应用程序中，我使用 AVAudioRecorder 从麦克风录制音频。我希望用户能够选择他们想要使用的麦克风/录音设置，而不仅仅是使用系统偏好设置中的默认设置。但是，我还没有找到任何使用 AVAudioRecorder 的方法。是否可以使用 AVAudioRecorder 来做到这一点，如果没有，我可以使用 Core Audio 或其他东西来做到这一点吗？如果是这样，我该怎么做？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-06T12:29:15.973

您可能需要比 AVAudioRecorder 低一点，它可能从用户在“声音”系统首选项窗格中指定为默认值的任何内容中获取其设置和输入。

也许您可以考虑尝试一些 AVCapture* 类？

[您可以通过" `AVCaptureDeviceInput`" 类](https://developer.apple.com/library/mac/documentation/AVFoundation/Reference/AVCaptureDeviceInput_Class/)指定不同的音频输入，Apple 提供了一些不错的示例代码，包括[AVRecorder](http://developer.apple.com/library/mac/samplecode/AVRecorder/)。

# c++ - 我们如何将任意函数传递给另一个函数

> ID：14719911
> 
> 赞同：-1
> 
> 时间：2013-02-06T01:10:31.893
> 
> 标签：c++

我有一个问题继续[作为模板参数传递的帖子函数](https://stackoverflow.com/questions/1174169/function-passed-as-template-argument)。在提供的代码中：

```
#include <iostream>

void add1(int &v)
{
  v+=1;
}

void add2(int &v)
{
  v+=2;
}

template <void (*T)(int &)>
void doOperation()
{
  int temp=0;
  T(temp);
  std::cout << "Result is " << temp << std::endl;
}

int main()
{
  doOperation<add1>();
  doOperation<add2>();
} 
```

具有不同参数集布局的第三个函数怎么样，例如

```
double add3(double v1, double v2)
{
return v1+v2;
} 
```

如果这根本无法使用模板实现，我们如何将任意函数传递给另一个函数？以及我们如何处理具有各种可能性的参数集？我知道python可以通过传递一个元组（kwargs**）来做到这一点，但不确定C/C++。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-06T05:02:13.687

传递要调用的泛型函数的一种形式是可调用模板类型：

```
#include <functional>
#include <iostream>

template<typename F>
void callFoo(F f) {
   f();
}

int main() {
   callFoo(std::bind([](int a, int b) {std::cout << a << ' ' << b;}, 5, 6));
} 
```

`callFoo`接受一个可调用类型, `F`, 并调用它。例如，围绕这个调用，你可以做定时器工作来为函数计时。在`main`中，它是用一个 lambda 调用的，该 lambda 有两个参数，并且为绑定到它的那些参数提供了值。`callFoo`然后可以在不存储参数的情况下调用它。这与使用 type 的参数非常相似`std::function<void()>`。

但是，如果您不想使用`std::bind`，则可以通过一些更改单独传递参数：

```
template<typename F, typename... Args>
void callFoo(F f, Args... args) { //ignoring perfect forwarding
    f(args...);
}

int main() {
    callFoo(/*lambda*/, 5, 6);
} 
```

在这些情况下，传递 void 函数是有意义的。实际上，返回值可以用作参数并使用`std::ref`. 如果您打算返回函数返回的内容，则必须处理返回类型为 的特殊情况`void`，因为您不能分配给`void`变量并返回它。在这一点上，更容易将您引导到我[之前](https://stackoverflow.com/questions/9625526/check-at-compile-time-if-template-argument-is-void)关于此事的问题。我的用例被证明是没有实际意义的，但该解决方案适用于其他用途。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-06T02:39:05.700

这可能会让你更接近你想要的：

```
#include <iostream>

void add1(int &v)
{
    v+=1;
}

double add2(double v1, double v2)
{
    return v1 + v2;
}

// 1 param version
template< class aRetType, class tP1 >
aRetType doOperation( aRetType (*aFunction)( tP1 aP1 ), tP1 valP1  )
{
    return aFunction( valP1 );
}

// 2 param version
template< class aRetType, class tP1, class tP2 >
aRetType doOperation( aRetType (*aFunction)( tP1 aP1, tP2 aP2 ), tP1 valP1, tP2 valP2 )
{
    return aFunction( valP1, valP2 );
}

// 3 param version and up is not given, but you get the trick.

int main()
{
    int iTemp = 8;
    doOperation< void, int& >( add1, iTemp );
    std::cout << "Result is " << iTemp << std::endl;

    double iResult;
    iResult = doOperation< double, double, double >( add2, 2.2, 8.8);
    std::cout << "Result is " << iResult << std::endl;
} 
```

# iphone - iPhone5故事板自动布局

> ID：14719918
> 
> 赞同：2
> 
> 时间：2013-02-06T01:11:21.190
> 
> 标签：iphone, ios6, retina-display, autolayout

我正在使用自动布局编写一个 iOS 应用程序。我想在屏幕 Y 中心下方 30 点处放置一个按钮。如何为此添加约束？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-06T05:36:53.257

```
- (void)viewDidLoad
{
    [super viewDidLoad];
    UIView *superView = self.view;
    UIButton *button = [UIButton buttonWithType:UIButtonTypeRoundedRect];

    [button setTranslatesAutoresizingMaskIntoConstraints:NO];
    [button setTitle:@"Button" forState:UIControlStateNormal];
    [superView addSubview:button];

    // adding constraints to the button
    NSLayoutConstraint *cn = [NSLayoutConstraint constraintWithItem:button
                             attribute:NSLayoutAttributeTop
                             relatedBy:NSLayoutRelationEqual
                                toItem:superView
                             attribute:NSLayoutAttributeCenterY
                            multiplier:1.0
                              constant:30];// adds 30 points from Screen Center Y
    [superView addConstraint:cn];

    cn = [NSLayoutConstraint constraintWithItem:button
                                      attribute:NSLayoutAttributeCenterX
                                      relatedBy:NSLayoutRelationEqual
                                         toItem:superView
                                      attribute:NSLayoutAttributeCenterX
                                     multiplier:1.0
                                       constant:0.0];// places the button in middle of X axis
    [superView addConstraint:cn];

} 
```

# javascript - 这种 JavaScript 编码风格有什么问题？（闭包与原型）

> ID：14719926
> 
> 赞同：7
> 
> 时间：2013-02-06T01:11:42.250
> 
> 标签：javascript, closures, prototype

我们一直在讨论如何最好地处理我们的 JS 应用程序中的对象，研究 Stoyan Stefanov 的书，阅读关于“新”、“这个”、“原型”、闭包等无休止的 SO 帖子。（事实上有这么多，而且他们有这么多相互竞争的理论，表明没有完全明显的答案）。

所以让我们**假设我们不关心私有数据**。我们满足于信任用户和开发人员不会在我们定义的方式之外乱搞对象。

**鉴于此**，这种技术有什么问题（除了它似乎违背了数十年的 OO 风格和历史）？

```
// namespace to isolate all PERSON's logic
var PERSON = {};

// return an object which should only ever contain data.
// The Catch: it's 100% public

PERSON.constructor = function (name) {
     return {
         name: name
     } 
}

// methods that operate on a Person
// the thing we're operating on gets passed in

PERSON.sayHello = function (person) {
     alert (person.name); 
}

var p = PERSON.constructor ("Fred");
var q = PERSON.constructor ("Me");

// normally this coded like 'p.sayHello()'
PERSON.sayHello(p);
PERSON.sayHello(q); 
```

明显地：

1.  没有什么可以阻止某人以邪恶的方式变异“p”，或者只是 PERSON 的逻辑最终传播到了整个地方。（**规范的“新”技术**也是如此）。
2.  将“p”传递给您想要使用它的每个函数将是一个小麻烦。
3.  这是一种**奇怪的做法**。

但这些足以驳回它的理由吗？积极的一面：

1.  它是**有效**的，因为（可以说）与重复函数声明的闭包相反。
2.  它看起来**非常简单易懂**，而不是到处摆弄“这个”。

重点是**前面提到的隐私**。我知道我会为此受到抨击，但是，寻找任何反馈。干杯。

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-02-06T01:16:35.203

它本质上没有任何问题。但它确实放弃了使用 Javascript 原型系统所固有的许多优点。

*   除了它是一个对象字面量之外，您的对象对自身一无所知。所以`instanceof`不会帮助你确定它的来源。只使用鸭子打字你会被卡住。
*   您的方法本质上是*命名空间的静态函数*，您必须通过将对象作为第一个参数传入来重复自己。通过拥有一个原型对象，您可以利用*动态调度*，以便可以根据 Javascript 知道的类型或根据类型`p.sayHello()`做不同的事情。这是*多态*的一种形式。您的方法要求您在每次调用方法时命名（并且可能会出错）类型。`PERSON``ANIMAL`
**   您实际上并不需要`constructor`函数，因为函数已经是对象。您的`PERSON`变量也可能是构造函数。*

 *您在这里所做的是创建一个*模块*模式（如命名空间）。

这是另一种模式，可以保留您所拥有的但提供上述优势：

```
function Person(name)
{
    var p = Object.create(Person.prototype);
    p.name = name; // or other means of initialization, use of overloaded arguments, etc.
    return p;
}
Person.prototype.sayHello = function () { alert (this.name); }

var p = Person("Fred"); // you can omit "new"
var q = Person("Me");
p.sayHello();
q.sayHello();
console.log(p instanceof Person); // true
var people = ["Bob", "Will", "Mary", "Alandra"].map(Person);
        // people contains array of Person objects 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-11T00:31:33.177

是的，我真的不明白你为什么要避开构造函数方法，或者当构造函数本身是优雅、灵活、以及完全合理的面向对象编程方法，无论像 Crockford 这样的人给出了多少不喜欢它们的蹩脚理由（因为人们忘记使用新关键字 - 认真吗？）。JS 是高度功能驱动的，它的 OOP 机制也不例外。接受这一点比躲避它更好，IMO。

**首先，您的积分列在“显然”下**

1.  在 JavaScript 中几乎不值得一提。高度可变性是设计使然。我们不怕我们自己或其他 JavaScript 开发人员。私有与公共范式没有用，因为它可以保护我们免于愚蠢，而是因为它可以更容易地理解其他开发人员代码背后的意图。

2.  调用的努力不是问题。当你不清楚你为什么做了你在那里做过的事情时，麻烦就来了。我真的看不出你想要实现的核心语言方法对你没有更好的效果。

3.  这是 JavaScript。多年来，除了 JS 开发人员之外，所有人都觉得很奇怪。如果您找到一种更好的方法来解决给定领域中的问题，而不是更典型的解决方案，请不要担心。在尝试替换它之前，请确保您了解更典型方法的要点，就像许多人从其他语言范式转向 JS 时所做的那样。用 JS 做一些琐碎的事情很容易，但是一旦你到了想要获得更多 OOP 驱动的地步，尽你所能了解核心语言的工作原理，这样你就可以对流行的观点提出更多的怀疑。那些以副业为生的人让 JavaScript 变得比实际情况更可怕，更充满致命的诱杀陷阱。

**现在你在“积极的一面”下的观点**

1.  首先，重复的函数定义实际上只是在繁重的循环场景中需要担心的事情。如果您定期以足够快的速度生成足够多的对象，以使非原型公共方法定义成为性能问题，那么无论如何，您可能会在短时间内遇到非平凡对象的内存使用问题。然而，我用过去时说，因为无论哪种方式，它都不再是一个真正相关的问题。在现代浏览器中，由于现代 JIT 编译器的工作方式，在其他函数中定义的函数实际上通常会提高性能。无论您支持什么浏览器，每个对象定义的几个函数都不是问题，除非您期望有数万个对象。

2.  关于简单易懂的问题，这不是我的问题，因为我看不出你在这里获得了什么胜利。现在，我不必使用一个对象，而是必须同时使用该对象和它的伪构造函数. 如果我是您的代码库的新手，我会浪费大量时间试图弄清楚您为什么这样做以避免破坏我不理解的其他一些问题。

**我的问题是：**

为什么不首先在构造函数中添加对象字面量中的所有方法呢？那里没有性能问题，而且从来没有真正存在过，所以唯一可能的胜利是您希望能够在使用它创建新对象后向人员添加新方法，但这就是我们在适当的构造函数上使用原型的原因（顺便说一句，原型方法非常适合旧浏览器中的内存，因为它们只定义一次）。

而且，如果您必须不断传递对象以使方法知道属性是什么，那您为什么还要对象呢？为什么不只是期望具有某些属性的简单数据结构类型对象的函数呢？它不再是真正的 OOP。

**但我的主要批评点**

您错过了 OOP 的要点，这是 JavaScript 在不向人们隐藏方面比大多数语言做得更好。考虑以下：

```
function Person(name){
    //var name = name; //<--this might be more clear but it would be redundant
    this.identifySelf = function(){ alert(name); }
}

var bob = new Person();
bob.identifySelf(); 
```

现在，在不覆盖对象或方法的情况下更改 bob 标识的名称，这两种操作只有在您明确不想使用最初设计和构造的对象时才要做。你当然不能。这让任何看到这个定义的人都清楚地知道，在这种情况下，名称实际上是一个常数。在更复杂的构造函数中，它将确定唯一允许更改或修改名称的是实例本身，除非用户添加了一个非验证的 setter 方法，这将是愚蠢的，因为这基本上会（看着你的 Java Enterprise Beans）谋杀OOP 的主要目的。

**分工明确是关键**

暂时忘掉他们在每本书中的关键词，想想重点是什么。在 OOP 之前，一切都只是一堆函数和所有这些函数所作用的数据结构。使用 OOP，您通常拥有一组与一组数据捆绑在一起的方法，而这些数据实际上只有对象本身会发生变化。

所以让我们说输出出了点问题：

*   在我们严格的程序堆函数中，可能会弄乱该数据的手数没有真正的限制。我们可能有很好的错误处理，但是一个函数可能会以这样一种方式分支，以至于原始的罪魁祸首很难追查。

*   在适当的 OOP 设计中，数据通常位于对象看门人之后，我知道只有一个对象实际上可以使更改负责。

大多数时候暴露所有数据的对象实际上只比旧的程序方法稍微好一点。真正做的只是给你一个名字来分类松散相关的方法。

**很多关于“这个”的事**

我从来没有理解分配给“this”关键字的过度关注是混乱和混乱的。这真的没什么大不了的。'this' 标识您正在使用的实例。就是这样。如果该方法不作为属性调用，则它不会知道要查找的实例，因此它默认为全局对象。那是愚蠢的（未定义会更好），但是在这种情况下它不能正常工作应该在一种语言中预期，其中函数也像数据一样可移植并且可以很容易地附加到其他对象。在以下情况下在函数中使用“this”：

*   它被定义为实例的属性并被调用。

*   它作为事件处理程序传递（它将作为被侦听事物的成员调用它）。

*   您正在使用 call 或 apply 方法将其作为其他对象的属性临时调用，而不是这样分配它。

但请记住，真正重要的是召唤。将公共方法分配给某个 var 并从该 var 调用将执行全局操作或在严格模式下引发错误。在没有被引用为对象属性的情况下，函数只真正关心它们定义的范围（它们的闭包）以及您传递给它们的参数。*

# php - mysql 使用 AS 并显示 php

> ID：14719932
> 
> 赞同：0
> 
> 时间：2013-02-06T01:12:37.213
> 
> 标签：php, mysql

我有这个在 mysql 中运行良好的 SQL 语句，但我无法让它在 php 页面上运行并以与 mysql 中相同的方式显示数据？

`$NewSql="SELECT r1.ticket, r1.status, r1.time, r2.ticket, r2.status, r2.time FROM repair_status AS r1, repair_status AS r2 WHERE r1.status = 'New' AND r2.status = 'Fixed' AND r1.ticket = r2.ticket";`

当我尝试展示时，我会使用类似的东西：

```
while($New = mysql_fetch_array($NewSql)){

echo $New['r1.status'].$New['r1.ticket'].$New['r2.ticket'].$New['r2.status']."<br>";

} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-06T01:14:21.823

yuou 应该提供一个`ALIAS`以避免列名的歧义，这两个表上恰好是相同的，然后别名将用于获取数据，例如

```
SELECT r1.ticket r1Ticket,  
       r2.ticket r2Ticket, .....
FROM .... 
```

在 PHP 中

```
 echo $New['r1Ticket'].$New['r2Ticket']..... 
```

# function - “不能在过程调用中使用函数”编译器错误

> ID：14719935
> 
> 赞同：0
> 
> 时间：2013-02-06T01:12:48.997
> 
> 标签：function, ada, procedure

ADA 中河内程序的递归塔。

到目前为止，我认为我已经完成了大部分工作，我的问题在于我的解决功能。我想我的算法很好，但我不知道如何将它实现到函数中，我看到的所有使用它的例子都是使用函数本身，例如 [：](http://www.cs.cmu.edu/~cburch/survey/recurse/hanoiex.html)

我的错误是：

```
hanoi.adb:23:09: cannot use function "solve" in a procedure call
hanoi.adb:27:09: cannot use function "solve" in a procedure call
hanoi.adb:59:15: missing ")" 
```

到目前为止，这是我的代码。

```
with ada.text_io, ada.command_line;
use ada.text_io, ada.command_line;

procedure hanoi is

Argument_Error : EXCEPTION;
max_disks, min_disks : integer := 3;
moves : integer := 0;

verbose_bool : boolean;

function solve (N: in integer; from, to, using: in character) return integer is
begin

if N = 1 then
    if verbose_bool = true then
    put("Move disk " & integer'image(N) & " from " & character'image(from) & " to " & character'image(to));
    end if;
else
    solve(N - 1, 'A', 'B', 'C');
    if verbose_bool = true then
    put("Move disk " & integer'image(N) & " from " & character'image(from) & " to " & character'image(to));
    end if;
    solve(N - 1, 'B', 'C', 'A');
end if;
    moves := (2 ** min_disks) - 1;
    return moves;

end solve;

begin

while min_disks /= max_disks loop

IF Argument_Count > 1 THEN
      if Argument_Count = 1 then
      min_disks := integer'value("Argument(1)");
      elsif Argument_Count = 2 then
      min_disks := integer'value("Argument(1)");
      max_disks := integer'value("Argument(2)");
      elsif Argument_Count = 3 then
      min_disks := integer'value("Argument(1)");
      max_disks := integer'value("Argument(2)");
      if argument(3) = "v" or argument(3) = "V" then
      verbose_bool := true; -- if argument is V or v it is true
      end if;
      END IF;
END IF;

IF Argument_Count > 3 THEN
      RAISE argument_error;
END IF;

if (max_disks > 0) then
      solve (N: integer; from, to, using : character);
END IF;

min_disks := min_disks + 1;

end loop;
EXCEPTION
   WHEN Name_Error =>
      Put_Line("Please re-enter your arguments, check to see if you entered integers and characters. Max of 3 arguments.");
   WHEN OTHERS =>
      Put_Line("Please try to not break the program again, thank you.");

end hanoi; 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-02-06T01:42:03.493

函数返回值，过程不返回，并且您已将 Solve 定义为函数。

Ada 要求您对函数的返回值做一些事情，而您在这里没有这样做。（您不能像在其他编程语言中那样忽略返回的结果。）

正如错误消息所述，您的语法是进行过程调用的语法，即调用过程，但您提供了函数的名称。

如果从函数返回的值是有意义的，则根据其用途对其进行操作。如果它没有提供任何有意义的功能，则消除它并将 Solve 定义为一个过程。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-06T02:46:12.900

顺便说一句，您可能希望将显示代码重构为嵌套子程序。在下面的大纲中，`procedure Print`可以访问 的参数`procedure Solve`。

```
procedure Solve (N: in Integer; From, To, Using: in Character) is

   procedure Print is
   begin
      if Verbose then
      ...
      end if;
   end Print;

begin
   if N = 1 then
      Print;
   else
      Solve (N - 1, 'A', 'B', 'C');
      Print;
      Solve (N - 1, 'B', 'C', 'A');
   end if;
end Solve; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-06T15:26:39.147

除了 Marc 关于对 Solve 的调用不是正确的 Ada 函数引用的评论之外，您拥有的语法是规范的语法，而不是 Solve 调用的语法。您在 Solve 的正文中就正确了，只是在最初的调用中没有：

```
 if (max_disks > 0) then
        solve (N: integer; from, to, using : character);
  END IF; 
```

# php - php中的这段代码有什么问题

> ID：14719939
> 
> 赞同：0
> 
> 时间：2013-02-06T01:13:08.953
> 
> 标签：php

当我尝试运行 php 脚本时收到此消息

> 警告：preg_replace() [function.preg-replace]: 未知修饰符 '.'

这是代码：

```
$ext = preg_replace("^.+\\.([^.]+)$", "\\1", $file); 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-02-06T01:14:05.567

您必须为正则表达式修饰符和正则表达式本身添加一个分隔符。IE

```
$ext = preg_replace("~^.+\.([^.]+)$~", "\1", $file); 
```

# json - 无法使用 Maven 快速入门 grizzly Archetype 生成 JSON

> ID：14719941
> 
> 赞同：1
> 
> 时间：2013-02-06T01:13:24.193
> 
> 标签：json, jersey, maven-archetype, grizzly

我花了一些时间试图让我的灰熊网络服务器生成 JSON。

使用 Intellij 从 maven 原型生成，详细信息：

```
groupId untitled3
artifactId  untitled3
version 1.0-SNAPSHOT
archetypeGroupId    org.glassfish.jersey.archetypes
archetypeArtifactId jersey-quickstart-grizzly2
archetypeVersion    2.0-m05 
```

所有在线示例都使用 JSON 启用

```
rc.put(JSONConfiguration.FEATURE_POJO_MAPPING, true); 
```

但是，这在 jersey 2.x 中不起作用，put 方法不存在。

在应用程序 Main 类中，有关于取消注释一行代码以使 JSON 工作的说明。当我取消注释这行代码时，使用的方法不存在。

```
public static HttpServer startServer() {
    // create a resource config that scans for JAX-RS resources and providers
    // in untitled2 package
    final ResourceConfig rc = new ResourceConfig().packages("untitled2");

    // uncomment the following line if you want to enable
    // support for JSON on the service (you also have to uncomment
    // dependency on jersey-media-json module in pom.xml)
    // --
    rc.addModule(org.glassfish.jersey.media.json.JsonJaxbModule);

    // create and start a new instance of grizzly http server
    // exposing the Jersey application at BASE_URI
    return GrizzlyHttpServerFactory.createHttpServer(URI.create(BASE_URI), rc);
} 
```

当我尝试从 POJO 对象提供 JSON 响应时，我收到此错误：

```
org.glassfish.jersey.message.internal.MessageBodyProviderNotFoundException: MessageBodyWriter not found for media type=application/json, type=class com.example.JsonPost, genericType=class com.example.JsonPost. 
```

我不知道从哪里开始看。我用谷歌搜索，浏览了文档并查看了用户组......

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-06T16:39:41.760

确保取消注释 POM 中的依赖项。然后将`addModule`调用更改为：

```
rc.addModules(new org.glassfish.jersey.media.json.JsonJaxbModule()); 
```

并确保`@Produces`在您的资源中包含正确的注释：

```
@Produces(MediaType.APPLICATION_JSON) 
```

# c# - WPF 绑定不更新按钮内容

> ID：14719946
> 
> 赞同：1
> 
> 时间：2013-02-06T01:13:54.937
> 
> 标签：c#, wpf, ivalueconverter

有人可以告诉我这个源代码有什么问题吗？当我单击按钮时，它不更新 ist 值？起初绑定转换器使他的工作。

源代码非常大，所以我只会发布一些片段。

XAML：实例是 ObservableCollection 的类型

```
<ListBox Name="Instances">
    <ListBox.ItemTemplate>
        <DataTemplate>
            <Button Tag="{Binding Path=Instance.Name}" Content="{Binding Path=Instance.Active, Converter={StaticResource BTSC}}" Click="ChangeAccess"/>
            <TextBlock Text="{Binding Path=Instance.Name}"/>
         </DataTemplate>
    </ListBox.ItemTemplate>
</ListBox> 
```

转换器：

```
public class BoolToStringConverter : IValueConverter
{
    public object Convert(object value, Type targetType, object parameter, CultureInfo culture)
    {
        if (((Boolean)value) == true)
            return "No";
        else
            return "Yes";
    }

    public object ConvertBack(object value, Type targetType, object parameter, CultureInfo culture)
    {
        throw new NotImplementedException();
    }
} 
```

事件：

```
private void ChangeAccess(object sender, RoutedEventArgs e)
{
    for...
    if ((sender as Button).Tag.ToString() == (DP.Instances[i].Instance as CInstance).Name)
    {
        SkipIfAndElse...
        DP.Instances[i].Instance.Active = true;
    }
} 
```

实例：

```
class CInstance : INotifyPropertyChanged
{
    private Boolean active;
    public Boolean Active
    {
        get { return active; }
        set
        {
            active = value;
            NotifyPropertyChanged("Access");
        }
    }
} 
```

CInstance 类的所有其他值都按预期更新。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-06T01:19:53.990

在您的 CInstance 类中

```
NotifyPropertyChanged("Access"); 
```

应该

```
NotifyPropertyChanged("Active"); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-06T03:17:23.383

我建议你开始使用某种 INPC 框架。我个人喜欢 Simon Cropp 的[Fody](https://github.com/Fody/Fody)。Fody 添加了适当的 OnNotifyPropertyChanged 作为编译后步骤，这意味着您不会像使用基于表达式的解决方案那样获得运行时命中。

归根结底，基于字符串的 OnNotifyPropertyChanged 都非常脆弱。

# php - 如何使 PHP 中的激活链接失效？

> ID：14719950
> 
> 赞同：0
> 
> 时间：2013-02-06T01:14:06.527
> 
> 标签：php, mysql

我有一个 php 脚本，它通过电子邮件向用户发送激活链接，以便他们激活他们的帐户。链接是这样的：`mysite.com/activation.phpid?id=20`

如何创建 24 小时后过期的链接？

我没有尝试过任何东西，因为我找不到任何东西可以教我如何去做。我所知道的是，我可以通过在 mysql 中存储一些东西来做到这一点，但是怎么做呢？

如果有人能告诉我一步一步的指导，那就太好了。

谢谢

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-06T01:17:01.837

制作这样的链接：

```
$time = time();
$hash = md5($id . $time . "somerandomsalt"); // check this again in activation.php
$link = "activation.php?id=" . $id . "&hash=" . $hash . "&time=" . $time; 
```

然后`activation.php`检查哈希是否匹配。哦，当然要检查时间：P

你可以稍微混淆一下以隐藏*id*、*hash*和*time*查询参数，但这是基础。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-06T01:15:35.823

只需在您的数据库中添加一个带有链接到期日期的额外字段。单击链接后，您可以检查日期以确保它没有过期。

**编辑**

我猜你的列名和表名。

```
SELECT IF (DATEDIFF(date_registered, CURRENT_TIMESTAMP) <= 0, 1, 0) AS expired
FROM users
WHERE id = 20 
```

如果`expired`为 1，则链接已过期。如果是，`0`那么它是有效的。

# javascript - 为什么 JavaScript 的“in”操作符返回 false 不正确？

> ID：14719952
> 
> 赞同：1
> 
> 时间：2013-02-06T01:14:16.110
> 
> 标签：javascript, arrays, object

您可以通过以下方式进行复制：

```
var test = {'var1': 'bacon'};

"var1" in test;             // Returns true  - Correct
!"var1" in test;            // Returns false - Correct
"nonexistant" in test;      // Returns false - Correct
!"nonexistant" in test;     // Returns false - Incorrect - This should be true.. should it not? 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-02-06T01:18:48.977

`in`操作员绑定相当松散。给子表达式加上括号通常是个好主意`in`。

因此，`!"var1" in test`被解析`(!"var1") in test`为例如。

# php - 从 3 个随机类别 MySQL（以及更多）中选择 4 个随机项目

> ID：14719954
> 
> 赞同：2
> 
> 时间：2013-02-06T01:14:26.603
> 
> 标签：php, mysql

我有与测试页面上的幻灯片相关的具体要求：http: [//bybyweb.com/mealbook/](http://bybyweb.com/mealbook/)

所有大图片都应该是来自随机类别的图像，并在文本中列出了该类别中的三个食谱。小缩略图应显示任何类别的随机食谱。

因此，应该有 3 个随机类别，这些类别中的 12 个菜谱（按 4 分组），以及 9 个随机菜谱，与其余菜谱无关......

数据库方案： 类别：id、标题、parent_id category_to_recipe：id、rec_id、cat_id（此表存在是因为 recipe 可以属于多个类别） recipes：id、name 等，等等...

这个查询：

```
SELECT category_recipe.rec_id, category_recipe.cat_id, recipes.name, recipes.url, recipes.main_image, categories.id, categories.title
FROM recipes, category_recipe, categories
WHERE categories.id
IN ( 10, 30, 64 )
AND category_recipe.cat_id = categories.id
AND category_recipe.rec_id = recipes.id
ORDER BY RAND( )
LIMIT 12 
```

从 3 个类别返回 12 个随机食谱，但我每个类别需要 4 个食谱……我想还有更多可能的解决方案，我可能需要嵌套选择或其他东西……

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-06T01:57:32.337

我会将该查询拆分为 3 个类别中的每一个，我看不出有什么让它如此复杂的原因，因为这些选择非常简单，如果速度是你的问题，它会非常快。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-06T02:00:50.303

我认为你需要`union all`这个：

```
SELECT cr.rec_id, cr.cat_id, r.name, r.url, r.main_image, c.id, c.title

from ((select cr.* from category_recipe where cat_id = 10 order by rand() limit 4
      ) union all
      (select cr.* from category_recipe where cat_id = 30 order by rand() limit 4
      ) union all
      (select cr.* from category_recipe where cat_id = 64 order by rand() limit 4
     ) cr join
     categories c
     on cr.cat_id = c.id join
     recipes r
     on cr.rec_id = r.id 
```

此外，您应该使用 ANSI 标准连接语法。通过使用别名，您的查询也将更具可读性。

# c# - 遍历字典对象

> ID：14719955
> 
> 赞同：36
> 
> 时间：2013-02-06T01:14:44.883
> 
> 标签：c#, .net

我对 .NET 非常陌生，习惯于使用 PHP。我需要遍历`foreach`对象字典。我的设置是一个 MVC4 应用程序。

模型如下所示：

```
public class TestModels
{
    Dictionary<int, dynamic> sp = new Dictionary<int, dynamic>
    {
        {1, new {name="abc", age="1"}},
        {2, new {name="def", age="2"}}
    }
} 
```

控制器：

```
public class TestController : Controller
{
   Models.TestModels obj = new Models.TestModels();
} 
```

如何遍历`obj`对象并检索字典的值并将它们打印在视图中？

* * *

## 回答 #1

> 赞同：55
> 
> 时间：2013-02-06T01:17:15.553

一种方法是遍历字典的键，我建议这样做：

```
foreach(int key in sp.Keys)
    dynamic value = sp[key]; 
```

另一种方法是将字典作为一对序列循环：

```
foreach(KeyValuePair<int, dynamic> pair in sp)
{
    int key = pair.Key;
    dynamic value = pair.Value;
} 
```

`Keys`我推荐第一种方法，因为如果您使用适当的 LINQ 语句装饰属性，您可以更好地控制检索项目的顺序，例如，`sp.Keys.OrderBy(x => x)`帮助您按键的升序检索项目。请注意，在内部`Dictionary`使用[哈希表](https://en.wikipedia.org/wiki/Hash_table)数据结构，因此如果您使用第二种方法，则项目的顺序不容易预测。

**更新（2016 年 12 月 1 日）**：`var`用实际类型替换 s 以使答案更清楚。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-02-06T01:19:02.290

这取决于您在字典中的内容

```
Models.TestModels obj = new Models.TestModels();

foreach (var keyValuPair in obj.sp)
{
    // KeyValuePair<int, dynamic>
}

foreach (var key in obj.sp.Keys)
{
     // Int 
}

foreach (var value in obj.sp.Values)
{
    // dynamic
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-06T01:20:17.880

你可以这样做。

```
Models.TestModels obj = new Models.TestModels();
foreach (var item in obj.sp)
{
    Console.Write(item.Key);
    Console.Write(item.Value.name);
    Console.Write(item.Value.age);
} 
```

您现在最可能遇到的问题是该集合是[私有](http://msdn.microsoft.com/en-us/library/st6sy9xe%28v=vs.80%29.aspx)的。如果您将[public](http://msdn.microsoft.com/en-US/library/yzh058ae%28v=vs.80%29.aspx)添加到此行的开头

```
Dictionary<int, dynamic> sp = new Dictionary<int, dynamic> 
```

您应该能够从控制器内部的功能访问它。

***编辑**`TestModels`：添加完整实现的功能示例。*

你的`TestModels`班级应该是这样的。

```
public class TestModels
{
    public Dictionary<int, dynamic> sp = new Dictionary<int, dynamic>();

    public TestModels()
    {
        sp.Add(0, new {name="Test One", age=5});
        sp.Add(1, new {name="Test Two", age=7});
    }
} 
```

您可能还想阅读[动态](http://msdn.microsoft.com/en-us/library/dd264736.aspx)关键字。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2016-09-21T19:36:37.647

```
public class TestModels
{
    public Dictionary<int, dynamic> sp = new Dictionary<int, dynamic>();

    public TestModels()
    {
        sp.Add(0, new {name="Test One", age=5});
        sp.Add(1, new {name="Test Two", age=7});
    }
} 
```

# sql - 数据库结构、用户、类别、答案、区间

> ID：14719959
> 
> 赞同：1
> 
> 时间：2013-02-06T01:15:10.557
> 
> 标签：sql, database, structure

我正在设计一个有很多用户的数据库。每个用户都与许多问题相关联。每个问题都有一个答案。每个问题都与一个类别相关联。还有一个间隔表，我会在下一次向用户询问特定问题时跟踪该表以及询问该问题的时间间隔。

**用户表**
- 用户 ID - 用户名 - 密码 -email -created -lastlogon

**问题表**
- questionid - 问题 - 答案

**类别表**
- categoryid - 类别 - questionid

**间隔表**
- userid - questionid - 间隔 - nextdate

这是该数据的正确方法/设计吗？

我正在讨论将类别和问题表结合起来，这是个好主意吗？或者我正在考虑制作一个链接表来仅存储 categoryid 和 questionid，但我对那个设计不太确定。如果我不够清楚，请询问我会尝试澄清。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-06T01:33:49.560

我可能会这样做：

```
CREATE TABLE [Users] (UserID, Username, Password, Email, Created, LastLogon)

CREATE TABLE [Questions] (QuestionID, Question, Answer, Interval, CategoryID)

CREATE TABLE [Categories] (CategoryID, Category)

CREATE TABLE [User_Intervals] (UserID, QuestionID, NextDate) 
```

# python - Python 2.7 中的 Web 服务器：浏览器不显示页面

> ID：14719963
> 
> 赞同：0
> 
> 时间：2013-02-06T01:15:39.280
> 
> 标签：python, python-2.7, network-programming

我正在使用 select() 函数在 python 中构建一个 Web 服务器 - I/O 多路复用。我能够连接到多个客户端，在我的情况下是 Web 浏览器（safari、chrome、firefox）并接受每个客户端的 HTTP 1.1 GET 请求。收到请求后，我会将 html 页面内容返回到显示 html 页面的浏览器。

我遇到的问题是当我尝试保持连接打开一段时间时。我意识到在使用 fd.close() 关闭连接之前，我无法在浏览器中显示任何内容。

这是我用来接受和响应浏览器请求的功能。问题是在我使用 fd.sendall() 之后，我不想关闭连接，但在我这样做之前页面不会显示。请帮忙！任何帮助或建议表示赞赏..

```
def handleConnectedSocket():
    try:
        recvIsComplete = False
        rcvdStr = ''

        line1 = "HTTP/1.1 200 OK\r\n"
        line2 = "Server: Apache/1.3.12 (Unix)\r\n"
        line3 = "Content-Type: text/html\r\n" # Alternately, "Content-Type: image/jpg\r\n"
        line4 = "\r\n"

        line1PageNotFound = "HTTP/1.1 404 Not Found\r\n"
        ConnectionClose = "Connection: close\r\n"

        while not recvIsComplete:
            rcvdStr = fd.recv( 1024 )

            if rcvdStr!= "" :

# look for the string that contains the html page
                recvIsComplete = True
                RequestedFile = ""
                start = rcvdStr.find('/') + 1 
                end = rcvdStr.find(' ', start)
                RequestedFile = rcvdStr[start:end] #requested page in the form of xyz.html

                try:
                    FiletoRead = file(RequestedFile , 'r')
                except:
                    FiletoRead = file('PageNotFound.html' , 'r')
                    response = FiletoRead.read()
                    request_dict[fd].append(line1PageNotFound + line2 + ConnectionClose + line4) 
                    fd.sendall( line1PageNotFound + line2 + line3 + ConnectionClose + line4 + response )
#                    fd.close()   <--- DONT WANT TO USE THIS
                else:    
                    response = FiletoRead.read()
                    request_dict[fd].append(line1 + line2 + line3 + ConnectionClose + line4 + response)
                    fd.sendall(line1 + line2 + line3 + line4 + response)
#                    fd.close()   <--- DONT WANT TO USE THIS
            else:
                recvIsComplete = True
#Remove messages from dictionary
                del request_dict[fd]    
                fd.close() 
```

客户端（浏览器）请求采用 HTTP 1.1 形式，如下所示：

```
GET /Test.html HTTP/1.1
Host: 127.0.0.1:22222
User-Agent: Mozilla/5.0 (Macintosh; Intel Mac OS X 10_8) AppleWebKit/536.25 (KHTML, like    Gecko) Version/6.0 Safari/536.25
Accept: text/html,application/xhtml+xml,application/xml;q=0.9,*/*;q=0.8
Accept-Language: en-us
Accept-Encoding: gzip, deflate
Connection: keep-alive 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-06T02:29:45.200

`Connection: close`向浏览器指示您将在完成发送数据时通过关闭连接告诉它。由于您不想这样做，因此您可能希望对 使用不同的值`Connection`，例如[`Keep-Alive`](https://en.wikipedia.org/wiki/HTTP_persistent_connection). 但是，如果您使用它，那么您还需要发送`Content-Length`或执行其他操作，以便浏览器知道您何时完成发送数据。

即使你不使用`Keep-Alive`，`Content-Length`发送也是一件好事，因为它可以让浏览器知道当前下载页面的进度。如果你有一个大文件要发送而没有发送`Content-Length`，浏览器就不能，比如说，显示进度条。`Content-Length`实现这一点。

那么如何发送`Content-Length`标头呢？计算您将发送的数据字节数。将其转换为字符串并将其用作值。就是这么简单。例如：

```
# Assuming data is a byte string.
# (If you're dealing with a Unicode string, encode it first.)
content_length_header = "Content-Length: {0}\r\n".format(len(data)) 
```

* * *

这是一些对我有用的代码：

```
#!/usr/bin/env python3
import time
import socket

data = b'''\
HTTP/1.1 200 OK\r\n\
Connection: keep-alive\r\n\
Content-Type: text/html\r\n\
Content-Length: 6\r\n\
\r\n\
Hello!\
'''

def main(server_address=('0.0.0.0', 8000)):
    server = socket.socket(socket.AF_INET, socket.SOCK_STREAM)
    server.setsockopt(socket.SOL_SOCKET, socket.SO_REUSEADDR, True)
    server.bind(server_address)
    server.listen(5)
    while True:
        try:
            client, client_address = server.accept()
            handle_request(client, client_address)
        except KeyboardInterrupt:
            break

def handle_request(client, address):
    with client:
        client.sendall(data)
        time.sleep(5)  # Keep the socket open for a bit longer.
        client.shutdown(socket.SHUT_RDWR)

if __name__ == '__main__':
    main() 
```

# c++ - 奇怪的循环情况，不知道是什么原因造成的

> ID：14719964
> 
> 赞同：1
> 
> 时间：2013-02-06T01:15:41.157
> 
> 标签：c++, loops, infinite

一些代码遇到了一些麻烦，我无法深入了解它。这段代码：

```
int main()
{
int choice;

while (choice != -1)
{
      system("cls");
      std::cout << "Main Menu: " << std::endl
                << " 1\. Encode." << std::endl
                << " 2\. Decode." << std::endl
                << "-1 to exit." << std::endl;

      std::cin >> choice;

      switch (choice)
      {
             case 1:
                  encode();
                  break;
             case 2:
                  decode();
                  break;
             case -1:
                  break;
      }
}

getchar();
return 0;

}

void encode()
{
 std::string plainText;
 std::string encText = "Test";

 std::cout << "Enter text to be encrypted.\n";

 getline(std::cin, plainText);

 for (int x = 0; x < plainText.length(); x++)
 {
     //encText += plainText.substr(x, x + 1);
 }

 std::cout << encText;
 getchar();

 return;
} 
```

如果我在第一个 cin >> 选项中输入 '1'，我会进入 encode()，一旦在那里，输入任何文本都会导致程序返回到 while，执行 system("cls")，然后立即跳回到“输入要加密的文本”。在编码（）中。

有什么帮助吗？我一无所知。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-06T01:20:10.077

如果您想在or`while`之后退出循环，则必须满足' 条件。您可以通过在函数调用之后的简单设置来做到这一点：`encode()``decode()``while``choice``-1`

```
 case 1:
              encode();
              choice = -1;
              break;
         case 2:
              decode();
              choice = -1;
              break; 
```

只是让您知道，`return`最后`encode()`会导致`encode()`函数完成，而不是`main`. 那行代码实际上什么也没做。因为它之后什么都没有，无论如何它都会发生。

# django - 在 EC2 中运行的 Django 应用程序，但尝试访问弹性 URL 返回页面未找到

> ID：14719966
> 
> 赞同：0
> 
> 时间：2013-02-06T01:15:56.253
> 
> 标签：django, nginx, amazon-ec2

我刚开始使用 EC2，我已经下载了一个在本地机器上启动的 git repo，所以我知道它可以从那里运行服务器，当我从我正在运行的 EC2 实例，但由于某种原因，当我访问该实例的弹性 IP 地址时，我得到一个找不到页面。知道为什么会这样吗？

因此，我现在开始使用 nginx，并按照此处的说明制作了一个 conf 文件：[https](https://code.djangoproject.com/wiki/DjangoAndNginx) ://code.djangoproject.com/wiki/DjangoAndNginx ，如下所示：

```
server {
        listen 80;
        server_name ec2-54-242-149-154.compute-1.amazonaws.com;
        access_log /var/log/nginx/USBag.access.log;
        error_log /var/log/nginx/USBag.error.log;

        location /basicMap/ {
                alias /home/www/ec2-54-242-149-154.compute-1.amazonaws.com/basicMap/;
                expires 30d;
        }

        location / {
                include fastcgi_params;
                fastcgi_pass 127.0.0.1:8080;
        }
} 
```

basicMap 是我已经在我的 django 应用程序中定义的地方，链接的 ec2 ip 是我的服务器运行的地方。我很难找到有关如何继续或如何确定我的 conf 文件是否正确的文档。但是，使用标准的 python manage.py runserver 不起作用。关于如何进行的建议？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-06T05:32:59.403

那里有很多关于设置生产 django 服务器的信息，我将在下面给出我的个人偏好，但在此之前，让我们备份一下，看看我们是否可以从生产服务器获得**任何响应。**

要在您的 EC2 实例上启动开发服务器，请运行：

```
manage.py runserver 0.0.0.0:8000 
```

该命令将导致 runserver 绑定到所有接口并将文件提供给外部世界。你永远不会想在开发之外做这件事，但这是一个在复杂化之前测试你的 django 应用程序是否设置的好方法。现在尝试点击您的 EC2 实例，看看您是否得到响应。

如果这仍然不起作用，请确保您允许到服务器端口的传入连接（上面命令中的 8000，一旦启用，则为 80）。您可以使用 netcat (nc -l) 测试您是否打开了端口。

一旦您对您的应用程序设置感到满意，我建议您使用 nginx 作为您的前端网络服务器，并在生产中使用 gunicorn 作为您的 django 网络服务器。您可能需要考虑为您的生产设置设置 virtualenv、supervisord 等（这里有一个教程：[http](http://senko.net/en/django-nginx-gunicorn/) ://senko.net/en/django-nginx-gunicorn/ ），但这一切都取决于具体情况你的项目。

# jquery - 附加到附加元素

> ID：14719967
> 
> 赞同：0
> 
> 时间：2013-02-06T01:16:01.977
> 
> 标签：jquery, bigcartel

我难住了。我可以在函数中附加“新”div，但是当我尝试用其他元素填充它们时，什么也没有发生。我认为这是因为`#new`DOM 中实际上并不存在，但我无法弄清楚克服这个问题的语法。

```
function nearlyWorks(){
    // This bit works
    $('<div id="new"><div id="newInner"></div></div>').appendTo('#target');
    // But this bit doesn't
    for (var i = 0; i < array.length; i++){
        if (i==0){
            $('<span></span>').appendTo('#new');
        } else {
            $('<span></span>').appendTo('#newInner');
        }
    }
}; 
```

* * *

**更新**：由于某种原因，我遇到的问题无法在 jsfiddle 中重新创建。我正在使用 Big Cartel CMS，我只能猜测它在某种程度上是造成问题的部分原因——尽管我不知道如何做。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-06T01:23:16.923

我猜您的条件或循环存在问题，因为附加有效。看这个例子：http: [//jsfiddle.net/ZkNLL/](http://jsfiddle.net/ZkNLL/)

```
function nearlyWorks(){
    // This bit works
    $('<div id="new"><div id="newInner"></div></div>').appendTo('#target');
    // But this bit doesn't
    for (var x = 0; x < 5; x++){
        if (x%2 == 0){
            $('<span></span>').html("Something").appendTo('#new');
        } else {
            $('<span></span>').html("something else").appendTo('#newInner');
        }
    }
}; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-06T01:21:46.970

尝试这个：

```
function nearlyWorks(){
    // This bit works
    var newBit = $('<div id="new"><div id="newInner"></div></div>');
    newBit.appendTo('#target');
    // But this bit doesn't
    for (the usual){
        if (condition){
            newBit.append($('<span></span>'));
        } else {
         newBit.find("#inner").append($('<span></span>'));
        }
    }
}; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-06T01:34:25.433

cz 你的 **array.length**是 emty 值.. 尝试你将一些数字**array.length**更改为**2**。试试这个..

```
$('<div id="new"><div id="newInner">val</div></div>').appendTo('#target');
for (var i = 0; i < 2; i++){
        if (i==0){
            $('<span>'+i+'</span>').appendTo('#new');
        } else {
            $('<span>'+i+'</span>').appendTo('#newInner');
        }
    } 
```

# forms - Symfony2，对 getter 的验证，在表单上显示错误

> ID：14719970
> 
> 赞同：1
> 
> 时间：2013-02-06T01:16:31.377
> 
> 标签：forms, validation, symfony, getter

我在使用 Symfony2 FormComponent 时遇到错误问题。

我已经验证了捆绑中的吸气剂：

```
getters:
    someGetter:
        - MyOwnValidator: { message: "Fail"} 
```

之后，我想验证表单并显示错误：

```
{{form_errors(form)}} 
```

返回给我一堆错误（包括 someGetter 的错误），但是

```
{{form_errors(form.someGetter)}} 
```

不返回任何东西。

有任何想法吗？

## 更新

我找到了解决方案。我实现了验证（someGetter）的字段是一个没有`'error_bubbling' => 'false'`选项的集合类型。

当我添加 error_bubbling 时，一切正常。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2014-09-14T05:03:11.883

其他有 getters 错误的选项是[http://symfony.com/doc/current/reference/forms/types/entity.html#error-mapping](http://symfony.com/doc/current/reference/forms/types/entity.html#error-mapping)和[http://symfony.com/doc/current/reference/forms /types/entity.html#error-bubbling](http://symfony.com/doc/current/reference/forms/types/entity.html#error-bubbling)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-09-05T08:02:57.213

我找到了解决方案。我实现验证的字段 (someGetter) 是一个没有 'error_bubbling' => 'false' 选项的集合类型。

当我添加 error_bubbling 时，一切正常。

* * *

从更新的问题中提取的答案。

# ruby-on-rails - 频繁的ajax调用会杀死PC吗？我该如何处理？

> ID：14719973
> 
> 赞同：1
> 
> 时间：2013-02-06T01:16:34.910
> 
> 标签：ruby-on-rails, ajax, ruby-on-rails-3, jquery

每 10 秒，它调用这个 ajax 来重新加载收到的邮件数。
然而，随着时间的流逝，我的 MacBook 似乎变得越来越热，即使我什么都不做，只是停留在我的应用程序的同一页面上。

我应该如何处理这种交易？

**refresh_mail_count.js**

```
jQuery(document).ready(function () {
    refreshMail();
});

function refreshMail() {
  $.ajax({
    url: "/messages/refresh_mail",
    type: "GET",
    dataType: "script",
  });
} 
```

**refresh_mail.js.erb**

```
$('#message_count').html("<%= j(render(:partial => 'layouts/message_received_count', :object => @message_count)) %>");
setTimeout(refreshMail,10000); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-06T01:25:42.940

CPU 在*工作*时会变热：那么问题是 - 这项工作是否合理？也就是说，哪个进程使用 CPU，什么时候使用？

这项工作不会来自网络请求本身，因为这是一个“低 CPU 使用率”的 IO 操作，但考虑可能*导致*一些工作的原因：

1.  *处理*响应数据（过度/缓慢的DOM 操作），或
2.  *网络服务器本身*（缓慢/低效的实现），如果在本地运行，或者
3.  AJAX 请求可能会堆积起来——这会导致[滚雪球效应](http://en.wikipedia.org/wiki/Snowball_effect)¹！

* * *

¹确保仅在*收到上一个成功/失败回调****后****10 秒发布新请求***。**

# database - DBIx::Class 获取 dbh

> ID：14719977
> 
> 赞同：5
> 
> 时间：2013-02-06T01:16:51.420
> 
> 标签：database, perl, catalyst, dbix-class

我正在构建的[Catalyst](http://www.catalystframework.org)应用程序中使用[DBIx::Class 。](https://metacpan.org/module/DBIx::Class)它工作得很好，但有时我需要使用我自己开发的非常符合我需求的数据库函数。因此，我需要一个 dbh。但是，由于我已经在使用，我知道它已经有一个正在使用的 dbh。为了避免与数据库建立另一个不必要的连接，我只想使用已经创建的 dbh。我知道[DBIx::Class::Storage::DBI](https://metacpan.org/module/DBIx::Class::Storage::DBI#dbh_do)模块有两个方法和，但我不确定两者之间有什么区别，以及它们是否是访问 dbh 的最佳方式。谁能告诉我获得 dbh 的最佳方法是什么？`DBIx::Class``DBIx::Class``dbh``dbh_do``DBIx::Class``Catalyst`应用程序？我更喜欢一种我可以转发的方法，它将 dbh 存储在如下所示的存储中：

```
sub dbh :Private { 
    my ($self, $c) = @_;
    $c->stash->{dbh} = #get dbh from DBIx::Class here
} 
```

谢谢！

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2013-02-06T01:23:40.927

我总是要查查这个。假设您有一个模式对象的实例，您可以通过该`storage`方法获取它的 Storage 对象。假设这是一个[`Storage::DBI`](https://metacpan.org/module/DBIx%3a%3aClass%3a%3aStorage%3a%3aDBI)，那么有一个可用的[`dbh`](https://metacpan.org/module/DBIx%3a%3aClass%3a%3aStorage%3a%3aDBI#dbh)方法可以让你获得你的数据库句柄。所以：

```
my $dbh = $c->model( 'My::DB' )->storage->dbh; 
```

应该做的伎俩。

* * *

## 回答 #2

> 赞同：-2
> 
> 时间：2013-02-06T05:13:43.733

@srchulo 答案很棒，dbh_do 是它内置异常处理的方法，但我建议将你的函数转换为不再使用 dbh，而只使用 DBIX::Class。这样，下一次，您只需在一个地方进行更改，而不是继续寻找旧的 dbh 和原始 sql。希望这是有道理的。

# ember.js - 1.0.0-Pre.4 中的路由器基础知识 - 在当前版本中编写路由器的正确方法是什么？

> ID：14719978
> 
> 赞同：1
> 
> 时间：2013-02-06T01:16:51.713
> 
> 标签：ember.js, ember-router

我讨厌问这样一个新手和模糊的问题，但我想肯定还有其他人的大脑也即将爆炸。我看到了相关的问题，但没有一个能直接解决我的困惑。

我刚刚被介绍给 Ember.js，我正在尝试学习路由器的基础知识，但我找不到两个就如何完成达成一致的来源。我怀疑我是在不稳定的过渡期间跳进去的。我正在使用最新的 1.0.0-Pre.4 版本。

我能想到的最好的，Router 是新机制，并且可能取代 StateManager - 是吗？然而，网站上 1.0.0-Pre.4 API 下列出的类甚至没有列出 Router 对象，指南也没有提到它......但是，当我使用示例代码时，我没有收到来自 javascript 的抱怨扩展 Em.Router。

好的很酷，但是它会在路由器成员“transitionTo”上出现问题，该成员存在于许多演示项目中，但在当前版本中无法识别。

所以，我想我要问的不是一个直接的问题，而是我在矛盾信息的海洋中寻找一个基础点。

如果从 Ember.js 开始，因为它现在是现在（1.0.0-pre.4），没有历史可以抗衡，我应该看什么路由机制，是否有任何教程或简单的示例应用程序可以演示和针对这个版本的库运行？您能否证实我怀疑有关路由的文档已过时？

Ember.js 有很多东西要学，如果我想弄明白，我需要知道什么该忽略，什么该拥抱。

谢谢你。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-06T02:49:17.360

> 我能想到的最好的，Router 是新机制，并且可能取代 StateManager - 是吗？

是的，路由器是新机制。它本身并不取代 StateManager。Ember 路由器的早期版本基于 StateManager。新的（1.0.0-pre.4）不是，但 StateManager 仍然是 ember 库的重要组成部分。ember 的许多核心组件（模型、视图）都依赖于 StateManager。

> 然而，网站上 1.0.0-Pre.4 API 下列出的类甚至没有列出 Router 对象，指南也没有提到它......但是，当我使用示例代码时，我没有收到来自 javascript 的抱怨扩展 Em.Router。

路由器还没有 API 文档。我想这些正在制作中。当对快速发展的开源项目有疑问时，我总是会查看测试。Ember 有一个非常可靠的测试套件，在路由的情况下，您可以通过阅读此处的集成测试来学到很多东西：[routing/basic_test.js](https://github.com/emberjs/ember.js/blob/master/packages/ember/tests/routing/basic_test.js)

> 好的很酷，但是它会在路由器成员“transitionTo”上出现问题，该成员存在于许多演示项目中，但在当前版本中无法识别。

听起来那些演示项目已经过时了。

> 您能否证实我怀疑有关路由的文档已过时？

回复：官方文档我认为 API 和指南都可以被认为是最新的，但请注意，到目前为止，并非每个 ember 功能都有 API 文档。可以肯定的是，有许多过时的资源在流传。Trek 一直在努力编制一份[过时资源列表，](https://github.com/trek/ember-outdated-articles)以便我们可以联系作者进行更新。在 Stack Overflow 上，与旧路由器相关的任何内容现在都应标记为[https://stackoverflow.com/questions/tagged/ember-old-router](https://stackoverflow.com/questions/tagged/ember-old-router)。

> 如果从 Ember.js 开始，因为它现在是现在（1.0.0-pre.4），没有历史可以抗衡，我应该看什么路由机制，是否有任何教程或简单的示例应用程序可以演示和针对这个版本的库运行？

在过去的几个月里，ember 团队一直在为[Ember.js 指南](http://emberjs.com/guides/)投入大量精力——AFAIK它们都是最新的 WRT（1.0.0-pre.4），并且每天都在变得更加稳固。它们包含有关新路由器的许多详细信息 - 请参阅[Ember.js - 路由](http://emberjs.com/guides/routing/)以获取最新信息。

至于教程，有几个新的值得一看。查看这篇 SO 帖子以获得一些建议：[有人能指出我使用最新路由系统的 ember.js 项目吗？如果它也使用 ember-data 则加分](https://stackoverflow.com/questions/14508362/could-someone-point-me-to-an-ember-js-project-that-uses-the-latest-routing-syste/14508467#14508467)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-07T09:50:43.847

提示：从 master 分支构建您自己的 ember 版本 - 他们修复了一些错误 :)

# r - 动态创建布局标题

> ID：14719980
> 
> 赞同：0
> 
> 时间：2013-02-06T01:16:58.330
> 
> 标签：r, layout, plot

我正在寻找一种简单的方法来为布局中的每个字段赋予标题，如下所示：

```
layout(matrix(1:8, nrow=2, ncol=4, byrow=TRUE)) # Graph matrix

for (x in names(ftime.p)){
  plot(listz$x$data)
  title(x)
} 
```

请注意，在我的例子中，length(listz) = 8

我想用 sapply 代替，但问题是在其中安装 title() 函数：

```
sapply(listz, function(x) plot(x$data)) 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-06T01:30:53.317

您可以使用`main`情节的论点，例如

```
sapply(listz, function(x)  plot(x$data, main=x)) 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-06T01:35:13.480

这是一个可重现的示例：

```
layout(matrix(1:8, nrow=2, ncol=4, byrow=TRUE)) # Graph matrix
sapply(names(mtcars[1:8]), FUN=function(X) plot(mtcars[[X]], main=X)) 
```

# ios - 我应该选择哪个部署目标？

> ID：14719988
> 
> 赞同：2
> 
> 时间：2013-02-06T01:17:47.563
> 
> 标签：ios, ios6

我有一个我一直在为 ios 6.1 开发的应用程序，我终于让它按我的意愿工作了。

然后只是为了测试它在旧 iPhone 上的工作方式，我将部署目标设置为 5.1，当我运行它时，用户界面开始看起来一团糟。

有谁知道为什么会这样？我应该将部署目标保持在 6.1 吗？如果是这样，我如何确保该应用程序在旧版本的 iPhone 上看起来不错？

ps - 这是我检查自动布局选项时的崩溃

```
 *** Terminating app due to uncaught exception 'NSInvalidUnarchiveOperationException', reason: 'Could not instantiate class named NSLayoutConstraint'
*** First throw call stack: 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-06T01:47:37.953

自动布局是在 iOS6.0 中引入的

如果您希望您的应用程序在 iOS5.x 或 4.x 上运行，您必须禁用或不使用自动布局，或者根据设备运行的 iOS 对自动布局的使用进行版本控制（这很痛苦）。

部署目标是您希望应用运行的最旧的 iOS 版本。如果是 iOS5.0，那么它将在所有 iOS5.0 或更高版本的设备上运行

[这里有更好的答案](https://stackoverflow.com/questions/12411980/enabling-auto-layout-in-ios-6-while-remaining-backwards-compatible-with-ios-5)

# mongodb - mongodb：如何获取包含嵌套字段的文档

> ID：14719989
> 
> 赞同：1
> 
> 时间：2013-02-06T01:17:53.203
> 
> 标签：mongodb

如何获取包含嵌套字段 f5=12 的文档？

> db.products.insert（{ f：“卡片”，f1：{f2：{f3：15}}}）
> 
> db.products.insert（{ f：“卡片”，f1：{f2：{f4：{f5：12}}}}）
> 
> db.products.insert（{ f：“卡片”，f1：{f2：{f3：{f5：43}}}}）
> 
> db.products.insert（{ f：“卡片”，f1：{f2：{f4：98}}}）

我试过这样：

> db.products.find($where : "this.content.indexOf('f5 : 12') != -1")
> 
> db.products.find（{$elemMatch：{f5：12}}）

但它不起作用..有没有人有任何想法？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-06T04:20:40.567

您可以在查询中使用点符号来执行此操作：

```
db.products.find({'f1.f2.f4.f5': 12}) 
```

如果您想要更灵活的东西，而不必指定每个父键，则需要使用[`$where`](http://docs.mongodb.org/manual/reference/operator/where/#_S_where)运算符搜索文档。

# php - Strtoupper() PHP 用于混合字符的字符串

> ID：14719990
> 
> 赞同：-4
> 
> 时间：2013-02-06T01:17:59.203
> 
> 标签：php, capitalization

我一直在为学校做一个项目，我让你搜索一个字符串，它会查询一个数据库并返回该字符串中的所有单词。为此，我必须使用 strtoupper()，如果你有一个全是大写或小写字母的字符串，它就可以正常工作。如果您在搜索中输入 AAB 或 aab，一切都会正常工作，它会返回两个字谜，ABA 和 BAA。但是，如果您输入 aAB，它不会返回任何内容。所以它从输入中获取帖子数据，命名为 alpha，然后按字母顺序排列单词，所以如果你输入 ABA，它会返回 AAB，然后将其变为大写。

```
<title>Scrabble</title>
<?php
require 'connect.inc.php';
if (isset($_POST['al'])){
    $al=$_POST['al'];
    $al=alpha($al);
    $al=trim(strtoupper($al));
    $query="SELECT * from Words WHERE alpha='$al'";
    if ($query_run = mysql_query($query)){

        while ($query_row = mysql_fetch_assoc($query_run)){
            $alpha = $query_row['alpha'];
            $ana = $query_row['word'];

            echo "<strong>$ana</strong> $alpha<br>";

        }
    }

}
function alpha($word){
    $array=array();
    for($x=0;$x<strlen($word);$x++){
        $char=substr($word,$x,1);
        $array[$x]=$char;

    }
    sort($array);
    $alpha=implode('',$array);
    return $alpha;

}
?>
<form action='scrabble.php' method='POST'>
Enter text to anagram. Please use either all uppercase or all lowercase<input type='text'                   name='al'>
<input type='submit'>
</form> 
```

他的链接在这里 [http://newdev.shodor.org/~amalani/newdev/scrabble.php](http://newdev.shodor.org/~amalani/newdev/scrabble.php) 谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-06T01:40:41.577

**多个问题：**

PHP 的[sort 函数](http://php.net/manual/en/function.sort.php)返回一个布尔值来判断它是否成功。在您的代码中，您有：

```
$array=sort($array); 
```

什么时候应该是：

```
sort($array); 
```

* * *

您在顶部附近有一个语法错误：

```
$alphagram=trim(strtoupper($al); 
```

应该是：

```
$alphagram = trim(strtoupper($alphagram)); 
```

* * *

我还注意到在您的网站上，您使用：

```
name='al' 
```

然后在脚本中尝试访问 POST 变量`alpha`。你应该使用：

```
$_POST['al'] 
```

# java - 如何判断 Java 日期和时区是否早于当前时间？

> ID：14719994
> 
> 赞同：1
> 
> 时间：2013-02-06T01:18:57.647
> 
> 标签：java, date, jodatime

我的班级有 2 个构成其日期的属性：

```
java.util.Date date;
String timeZone; 
```

如何查看此日期是否早于服务器上的当前时间？

基本上我想写这样的东西，但要考虑 timeZone：

```
return date.before(new Date()); 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-06T01:23:15.580

`Date`在内部存储为 UTC，因此您的`timeZone`变量不是必需的。您可以简单地使用`Date.before(Date)`.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-06T04:17:16.487

```
 Calendar startCalendar = Calendar.getInstance();
    int startTimeZoneOffset = TimeZone.getTimeZone(timeZone).getOffset(startDate.getTime()) / 1000 / 60;
    startCalendar.setTime(startDate);
    startCalendar.add(Calendar.MINUTE, startTimeZoneOffset);

    Calendar nowCalendar = Calendar.getInstance();
    int nowTimeZoneOffset = nowCalendar.getTimeZone().getOffset(new Date().getTime()) / 1000 / 60;
    nowCalendar.setTime(new Date());
    nowCalendar.add(Calendar.MINUTE, nowTimeZoneOffset);

    return startCalendar.before(nowCalendar); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2018-09-04T04:26:35.133