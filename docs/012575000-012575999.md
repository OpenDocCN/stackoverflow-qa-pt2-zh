# StackOverflow 问答 12575000-12575999

# ruby - Gem 未安装最新更改

> ID：12575009
> 
> 赞同：0
> 
> 时间：2012-09-25T01:18:24.113
> 
> 标签：ruby, gem, bundler

我正在尝试为我的 Rails 项目安装lazy_high_charts gem，但遇到了一些问题。gem 安装得很好，但我没有在我的本地副本中看到对源代码的最新更改。在我的 gemfile 我有

```
gem 'lazy_high_charts' 
```

它工作正常。我也试过

```
gem 'lazy_high_charts', :git => "https://github.com/michelson/lazy_high_charts.git" 
```

基本上我想对 gem 使用[这个更改](https://github.com/michelson/lazy_high_charts/pull/76)，但我无法安装它。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-01T23:49:52.597

您现在需要使用您在上面尝试使用的 git 选项（我认为最新的更改尚未打包到 gem 中），它看起来是正确的。但是，我通常使用 git 地址。

```
gem "lazy_high_charts", git: 'git://github.com/michelson/lazy_high_charts.git' 
```

确保重新运行`bundle install`并重新启动服务器（杀死正在运行的进程并运行`rails s`）

# ios - 使用 ARC，不是每个线程都有一个自动释放池是致命的吗？

> ID：12575010
> 
> 赞同：19
> 
> 时间：2012-09-25T01:18:24.510
> 
> 标签：ios, multithreading, cocoa-touch, nsautoreleasepool

我读到这个：

> 如果您曾经在应用程序中创建辅助线程，则需要为其提供自己的自动释放池。自动释放池及其包含的对象在中进一步讨论

在 iOS 5 开发者手册中。

我正在使用 ARC 进行编译。我一直在创建许多后台线程，看来我做得很好。我的后台线程都不是长时间运行的。所有这些对象都会被主线程的自动释放池释放吗？要不然是啥？

这就是我所说的后台线程：

```
+(void)doBackground:(void (^)())block
{
    //DISPATCH_QUEUE_PRIORITY_HIGH
    //dispatch_async(dispatch_get_global_queue(DISPATCH_QUEUE_PRIORITY_BACKGROUND,0), ^{
    dispatch_async(dispatch_get_global_queue(-2,0), ^{
        block();
    });
} 
```

我应该把它改成

```
+(void)doBackground:(void (^)())block
{
    //DISPATCH_QUEUE_PRIORITY_HIGH
    //dispatch_async(dispatch_get_global_queue(DISPATCH_QUEUE_PRIORITY_BACKGROUND,0), ^{
    dispatch_async(dispatch_get_global_queue(-2,0), ^{
        @autoreleasepool{
        block();
        }
    });
} 
```

* * *

## 回答 #1

> 赞同：35
> 
> 时间：2012-09-25T04:17:26.253

如果您不为新线程创建自动释放池，则至少将其视为程序员错误。这对您的程序是否致命是由您的程序实现定义的。经典问题是对象泄漏，因此对象`dealloc`永远不会被执行（可能是致命的）。

在 ARC 下创建自动释放池的现代方法是：

```
void MONThreadsEntry() { // << entry is e.g. a function or method
  @autoreleasepool {
    ...do your work here...
  }
} 
```

更详细地说，自动释放池表现为线程本地堆栈——您可以推送和弹出，但在该线程上的任何内容被自动释放之前，总是应该有一个。自动释放消息*不会*从一个线程转移到另一个线程。

如果您“创建线程”的想法是使用更高级别的异步机制（例如使用 NSOperationQueue），或者如果底层实现创建辅助线程及其自己的自动释放池，您可能看不到问题（例如在控制台中或泄漏） .

无论如何，与其猜测何时创建自动释放池，只需了解您需要在哪里创建它们以及何时应该创建它们。这一切都是明确的——不需要猜测，也不需要害怕创造它们。

同样，如果您使用较低级别的抽象，则永远不需要为线程创建自动释放池，并且永远不会在该线程上自动释放对象。例如，pthreads 和纯 C 实现不需要担心自动释放池（除非您使用的某些 API 假设它们已经到位）。

甚至 Cocoa 应用程序中的主线程也需要一个自动释放池——它通常不是您编写的东西，因为它存在于项目模板中。

**更新——调度队列**

针对更新的问题：是的，您仍然应该为在调度队列下运行的程序创建自动释放池——请注意，使用调度队列，您不会创建线程，因此这与原始问题完全不同。原因：虽然调度队列*确实*管理自动释放池，[但不能保证](http://developer.apple.com/library/ios/documentation/General/Conceptual/ConcurrencyProgrammingGuide/OperationQueues/OperationQueues.html#//apple_ref/doc/uid/TP40008091-CH102-SW19)它们被清空的时间/点。也就是说，你的对象会被释放（在某个时候），但你*应该*还在这种情况下创建自动释放池，因为该实现可能（理论上）每运行 10,000 个块或大约每天都会耗尽池。因此，在这种情况下，它实际上只在某些情况下是致命的，例如当您最终消耗过多内存时，或者当您的程序期望其对象将以某种确定的方式被销毁时 - 例如，您可能正在加载或处理图像如果由于自动释放池而意外延长了这些图像的寿命，则后台和最终会消耗大量内存。另一个示例是共享资源或全局对象，您可以在其中响应通知或引入竞争条件，因为您的“阻塞本地”对象的寿命可能比您预期的要长得多。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-09-25T01:44:46.033

现在似乎自动为新线程创建了自动释放池。不知道这种情况何时发生变化以及为什么文档状态相反，仅此而已。

# mysql - MySQL ORDER BY 字符串问题

> ID：12575014
> 
> 赞同：1
> 
> 时间：2012-09-25T01:18:59.607
> 
> 标签：mysql, string, numbers, sql-order-by

我在以正确的顺序订购 mysql 结果时遇到问题。在某些情况下，我的字符串值也包含数字，我需要以正确的方式对它们进行排序。

例如，而不是：

```
file name aaa
Some file name 1
Some file name 10
Some file name 2
Some file name 20' 
```

我需要对它们进行“人性化”的排序：

```
file name aaa
Some file name 1
Some file name 2
Some file name 10
Some file name 20' 
```

...问题是，那`Some file name`不是某种前缀，所以我不能使用子字符串。这些字符串值可以不同。这些值也不能编号（添加了一些排序前缀）。

有一些简单的解决方案吗？谢谢你的任何想法。

# ruby - 在 ruby /ActiveRecord 中生成类似 Instagram 或 Youtube 的不可猜测的字符串 ID

> ID：12575022
> 
> 赞同：13
> 
> 时间：2012-09-25T01:19:57.280
> 
> 标签：ruby, postgresql, activerecord, sinatra

在创建给定 ActiveRecord 模型对象的实例后，我需要生成一个简短的（6-8 个字符）唯一字符串以用作 URL 中的标识符，采用 Instagram 的照片 URL 样式（如[http://instagram.com/ p/P541i4ErdL/](http://instagram.com/p/P541i4ErdL/)，我刚刚将其打乱为 404）或 Youtube 的视频 URL（如[http://www.youtube.com/watch?v=oHg5SJYRHA0](http://www.youtube.com/watch?v=oHg5SJYRHA0)）。

这样做的最佳方法是什么？[重复创建一个随机字符串](https://stackoverflow.com/questions/88311/how-best-to-generate-a-random-string-in-ruby)直到它唯一是最简单的吗？有没有办法以这样一种方式对整数 id 进行散列/混洗，以使用户无法通过更改一个字符来破解 URL（就像我对上面的 404'd Instagram 链接所做的那样）并最终获得新记录？

* * *

## 回答 #1

> 赞同：22
> 
> 时间：2012-09-25T19:50:00.800

这是一个在 plpgsql 中已经实现的没有冲突的好方法。

**第一步**：考虑 PG wiki 中的[pseudo_encrypt](http://wiki.postgresql.org/wiki/Pseudo_encrypt)函数。这个函数接受一个 32 位整数作为参数，并返回一个 32 位整数，在人眼看来它是随机的，但唯一地对应于它的参数（所以这是加密，而不是散列）。在函数内部，您可以更改公式：使用**只有您知道**`(((1366.0 * r1 + 150889) % 714025) / 714025.0)`的另一个函数，它会产生 [0..1] 范围内的结果（只需调整常量可能就足够了，请参阅下面我的尝试） . 有关更多理论解释，请参阅有关[Feistel 密码的维基百科文章。](http://en.wikipedia.org/wiki/Feistel_cipher)

 ****第二步**：在您选择的字母表中编码输出数字。这是一个以所有字母数字字符为基数的 62 位函数。

```
CREATE OR REPLACE FUNCTION stringify_bigint(n bigint) RETURNS text
    LANGUAGE plpgsql IMMUTABLE STRICT AS $$
DECLARE
 alphabet text:='abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ0123456789';
 base int:=length(alphabet); 
 _n bigint:=abs(n);
 output text:='';
BEGIN
 LOOP
   output := output || substr(alphabet, 1+(_n%base)::int, 1);
   _n := _n / base; 
   EXIT WHEN _n=0;
 END LOOP;
 RETURN output;
END $$ 
```

现在，我们将得到与单调序列相对应的前 10 个 URL：

```
select stringify_bigint(pseudo_encrypt(i)) from generate_series(1,10) as i; 
```

```
stringify_bigint
------------------
 tWJbwb
 eDUHNb
 0k3W4b
 w9dtmc
 woCi
 2hVQz
 PyOoR
 cjzW8
 比戈克
 A5tDHb

```

结果看起来是随机的，并且保证在整个输出空间中是唯一的（如果您也将整个输入空间与负整数一起使用，则结果是 2^32 或大约 40 亿个值）。如果 40 亿个值不够宽，您可以小心地组合两个 32 位结果以达到 64 位，同时不会失去输出的唯一性。棘手的部分是正确处理符号位并避免溢出。

关于修改函数以生成自己独特的结果：让我们将函数体中的常量从 1366.0 更改为 1367.0，然后重试上面的测试。看看结果是如何完全不同的：

```
NprBxb
 SY38Ob
 urrF6b
 OjKVnc
 vdS7j
 uEfEB
 3zuaT
 0fjsab
 j7OYrb
 PYiwJb

```

* * *

更新：对于那些可以编译 C 扩展的人来说，一个很好的替代`pseudo_encrypt()`是`range_encrypt_element()`from [`permuteseq extension`](https://pgxn.org/dist/permuteseq)，它具有以下优点：

*   适用于最多 64 位的任何输出空间，并且不必是 2 的幂。

*   对不可猜测的序列使用秘密的 64 位密钥。

*   快得多，如果这很重要的话。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-09-25T16:32:23.343

你可以这样做：

*随机属性.rb*

```
module RandomAttribute

  def generate_unique_random_base64(attribute, n)
    until random_is_unique?(attribute)
      self.send(:"#{attribute}=", random_base64(n))
    end
  end

  def generate_unique_random_hex(attribute, n)
    until random_is_unique?(attribute)
      self.send(:"#{attribute}=", SecureRandom.hex(n/2))
    end
  end

  private

  def random_is_unique?(attribute)
    val = self.send(:"#{attribute}")
    val && !self.class.send(:"find_by_#{attribute}", val)
  end

  def random_base64(n)
    val = base64_url
    val += base64_url while val.length < n
    val.slice(0..(n-1))
  end

  def base64_url
    SecureRandom.base64(60).downcase.gsub(/\W/, '')
  end
end
Raw 
```

*用户.rb*

```
class Post < ActiveRecord::Base

  include RandomAttribute
  before_validation :generate_key, on: :create

  private

  def generate_key
    generate_unique_random_hex(:key, 32)
  end
end 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-25T02:15:21.413

您可以散列 id：

```
Digest::MD5.hexdigest('1')[0..9]
=> "c4ca4238a0"
Digest::MD5.hexdigest('2')[0..9]
=> "c81e728d9d" 
```

但是有人仍然可以猜到你在做什么并以这种方式进行迭代。对内容进行散列可能会更好**

# c++ - 双向链表的反向函数

> ID：12575024
> 
> 赞同：1
> 
> 时间：2012-09-25T01:20:07.373
> 
> 标签：c++, linked-list, doubly-linked-list

如果我将反向函数发送到列表中，我会得到预期的输出。但是如果我使用我的 reverseNth 函数，我只会得到列表中的第一件事。ReverseNth 按部分反转列表。例如，如果我有一个列表 = <1 2 3 4 5>。调用 reverse() 将输出 <5 4 3 2 1>。在列表中调用 reverseNth(2) 应该给出 <2 1 4 3 5>。

相关代码：

```
void List<T>::reverse( ListNode * & startPoint, ListNode * & endPoint )
{
    if(startPoint == NULL || startPoint == endPoint)
        return;
    ListNode* stop = endPoint;
    ListNode* temp = startPoint;
    startPoint = endPoint;
    endPoint = temp;
    ListNode* p = startPoint; //create a node and point to head

    while(p != stop)
    {
        temp = p->next;
        p->next = p->prev;
        p->prev = temp;
        p = p->next;
    }
} 
```

反向代码：

```
void List<T>::reverseNth( int n )
{
    if(head == NULL || head == tail || n == 1 || n == 0)
        return;

    if(n >= length)
    {
        reverse(head,tail);
        return;
    }

    ListNode* tempStart = head;
    ListNode* tempEnd;

    for(int j = 0; j < length; j += n)
    {
        // make the end of the section the beginning of the next
        tempEnd = tempStart;
        // set the end of the section to reverse
        for(int i = 0; i < n-1; i ++)
        {
            // check to make sure that the section doesn't go past the length
            if(j+i == length)
                i = n; 
            else
                tempEnd = tempEnd-> next;
        }

        reverse(tempStart, tempEnd);

        if( j == 0)
            head = tempStart;
        if(tempStart == tail)
        {
            tail = tempEnd;
            return;
        }
        else
            tempStart = tempEnd-> next;
    }
    tail = tempEnd;
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-25T01:27:48.057

您没有在反向功能中使用`startPoint`and `endPoint`。目前，您的 reverse 函数反转整个列表，使 old`head->next`指向 null （因为它现在是结尾）。

我猜测用于反转整个列表的 reverse 函数，但随后被扩展为采用任意起点/终点（可能是重载？）。

# ios - 您如何向 iPhone 锁定屏幕发送通知？

> ID：12575026
> 
> 赞同：-2
> 
> 时间：2012-09-25T01:20:36.733
> 
> 标签：ios, notifications, lockscreen

当发生某些事情时，您如何从应用程序向 iPhone 的锁定屏幕发送通知？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-25T01:30:39.617

这种通知称为推送通知（不同于 NSNotification）。[这是](http://www.raywenderlich.com/3443/apple-push-notification-services-tutorial-part-12)有关如何使用 Apple 推送通知 (APN) 启动和运行的教程。还有一些工具可以简化流程，例如 Parse.com 和 Push.io，尽管我无法评价这两种产品的质量。

# matlab - 在 MATLAB 中的一行中声明和初始化变量，而不使用数组或向量

> ID：12575027
> 
> 赞同：3
> 
> 时间：2012-09-25T01:20:42.330
> 
> 标签：matlab

```
a = 0;
b = 0;
c = 0; 
```

我可以在不使用数组/向量的情况下在一个语句中执行此操作吗？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-09-25T01:25:44.240

我会尝试使用该`deal`功能。

[http://www.mathworks.com/help/matlab/ref/deal.html](http://www.mathworks.com/help/matlab/ref/deal.html)

```
 [a,b,c] = deal(0,0,0); 
```

还有其他方法，但这是一个很好的学习功能。

# .net - .NET 自定义异常没有在预期的地方被捕获

> ID：12575030
> 
> 赞同：1
> 
> 时间：2012-09-25T01:21:08.063
> 
> 标签：.net, exception-handling

这感觉像是一个愚蠢的问题，但我有一个控制台应用程序应该抛出和处理自定义异常类型。出于某种原因，它陷入了一般的异常捕获，我不知道为什么。

主程序：

```
try
{
    result = MyService.ExecuteSearch(paramItems);
}
catch (TimeoutException ex)
{
    // Catch time out exceptions here
}
catch (SearchAnticipatedException ex)
{
    // THIS IS WHERE I WANT TO BE WITH MY CUSTOM EXCEPTION & MESSAGE
}
catch (Exception ex)
{
    // THE ORIGINAL EXCEPTION IS BEING CAUGHT HERE 
} 
```

我的逻辑的主要内容捕获了一个 EndpointNotFoundException ，我试图而不是抛出那个 - 用更有意义的消息（和其他信息）抛出我的自定义异常。但是，原来的 endpoingnotfoundexception 正在那个 Catch (Exception ex) 块中处理。

```
 try
 {
          // do some logic
          ((IClientChannel)proxy).Close();
 }
 catch (CommunicationObjectFaultedException ex)
 {
      throw new SearchAnticipatedException(ServiceState.Critical, hostName, ex);
 }
 catch (EndpointNotFoundException ex)
 {
      throw new SearchAnticipatedException(ServiceState.Critical, hostName, ex);
 }
 finally
 {
    if (((IClientChannel)proxy).State == CommunicationState.Opened)
    {
         factory.Abort();
         ((IClientChannel)proxy).Close();
    }
 } 
```

如果我注释掉主要部分底部的一般异常，那么它会被正确的块捕获 - 我认为它会首先被更具体的异常捕获，如果它与其中任何一个都不匹配，它将落入最后一种一般类型的块。

希望这只是我塞满的小东西:)

我的异常类看起来像：

```
 class SearchAnticipatedException : System.Exception
    {
        public int ServiceStateCode { get; set; }

        public SearchAnticipatedException(MyService.ServiceState serviceState, string message, Exception innerException)
            : base(message, innerException)
        {
            ServiceStateCode = (int)serviceState;
        }

        public static string FormatExceptionMessage(string message, MyService.ServiceState serviceState)
        {
            return serviceState.ToString().ToUpper() + SearchResult.CODE_MESSAGE_DELIMITER + message;
        }

    } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-25T01:46:38.057

我不确定，因为我认为第一个匹配的 catch 子句会优先，但如果你这样做，你可能会取得更大的成功：

```
try 
{ 
   ...
}
catch(Exception ex)
{
     if (ex is TimeoutException)
     {
        ...
     }
     else if (ex is SearchAnticipatedException)
     {
        ...
     }
     else
     {
         ...
     }
}
finally
{
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-25T02:06:05.280

想通了 - 事实证明，如果有一个 endpointNoutFoundException 那么我无法检查通道的状态。IE。如果它是打开的，我想关闭它。它在 finally 块中抛出异常:)

相反，我只是要调用 factory.abort()。

```
finally
{
   factory.Abort();
} 
```

当我设置一个超时值时，我想确保如果发生超时异常，那么任何连接都被正确关闭。

# java - JTextPane 和空填充空间

> ID：12575031
> 
> 赞同：0
> 
> 时间：2012-09-25T01:21:18.650
> 
> 标签：java, swing, border, jtextpane, margins

我在 JScrollPane 中有一个 JTextPane，我想在 JTextPane 的顶部添加一个空的“填充空间”，以便 JTextPane 中的第一个实际文本行出现在*JViewport 的底部*。我有一个模糊的想法，即在 JTextPane 的开头可能有一个空段落，并在每次调整 JViewport 大小时修改它的高度。任何人有想法如何实现这样的事情？也许有更简单的方法？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-25T10:06:43.723

您可以在 JEditorPane 中使用自定义垂直对齐的示例[http://java-sl.com/tip_center_vertically.html](http://java-sl.com/tip_center_vertically.html)。要垂直提供底部对齐，您应该将最后的行更改为 offset = (targetSpan - textBlockHeight);

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-09-25T02:12:11.150

您可以使用[setMargin()](http://docs.oracle.com/javase/6/docs/api/javax/swing/text/JTextComponent.html#setMargin%28java.awt.Insets%29)设置组件边框与其文本之间的边距。例如：

```
textPane.setMargin(new Insets(20, 0, 0, 0)); 
```

***编辑：***

考虑以下非常简单的示例，该示例演示了 的用法`setMargin()`：

```
import java.awt.Dimension;
import java.awt.EventQueue;
import java.awt.FontMetrics;
import java.awt.Insets;

import javax.swing.JFrame;
import javax.swing.JScrollPane;
import javax.swing.JTextPane;

public class MarginDemo {
    private static void createAndShowUI() {
        final JTextPane textPane = new JTextPane();
        final JScrollPane scrollPane = new JScrollPane(textPane);

        String text = "Lorem ipsum dolor sit amet, "
                + "consectetur adipiscing elit."
                + "Fusce nec sapien id diam consequat adipiscing.";
        textPane.setText(text);

        JFrame frame = new JFrame("MarginDemo");
        frame.setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);
        frame.getContentPane().add(scrollPane);

        frame.setSize(new Dimension(200, 200));
        frame.setVisible(true);

        EventQueue.invokeLater(new Runnable() {
            public void run() {
                FontMetrics metrics = textPane.getFontMetrics(textPane
                        .getFont());
                textPane.setMargin(new Insets(scrollPane.getViewport()
                        .getHeight() - metrics.getHeight(), 0, 0, 0));
            }
        });
    }

    public static void main(String[] args) {
        EventQueue.invokeLater(new Runnable() {
            public void run() {
                createAndShowUI();
            }
        });
    }
} 
```

结果如下：

![在此处输入图像描述](../Images/2ded906bc14ffd27e5499b6433a5d88f.png)

# r - R：将数据更新/映射到 .csv 模板

> ID：12575038
> 
> 赞同：0
> 
> 时间：2012-09-25T01:21:53.537
> 
> 标签：r

我有一个如下命名的 .csv 表`mailing.csv`。它由接收者、主题和发送者组成。

```
 Receiver                                subject       sender
1   Adrian Cole    RE: [WHIRR-117] Composable services    Tom White
2   Adrian Cole    RE: [WHIRR-117] Composable services    Tom White
3   Adrian Cole    RE: [WHIRR-117] Composable services  Adrian Cole
4   Adrian Cole    RE: [WHIRR-117] Composable services  Adrian Cole
5   Adrian Cole    RE: [WHIRR-117] Composable services    Tom White
6   Adrian Cole    RE: [WHIRR-117] Composable services  Adrian Cole
7   Adrian Cole    RE: [WHIRR-117] Composable services    Tom White
8   Adrian Cole    RE: [WHIRR-117] Composable services    Tom White
9   Adrian Cole    RE: [WHIRR-117] Composable services  Adrian Cole
10  Adrian Cole    RE: [WHIRR-117] Composable services  Adrian Cole
11  Adrian Cole    RE: [WHIRR-117] Composable services    Tom White
12  Adrian Cole    RE: [WHIRR-117] Composable services    Tom White
13  Adrian Cole    RE: [WHIRR-117] Composable services    Tom White
14  Adrian Cole    RE: [WHIRR-117] Composable services    Tom White
15 Patrick Hunt RE: [WHIRR-123] Cassandra integration     Tom White
16 Patrick Hunt RE: [WHIRR-123] Cassandra integration   Andrei Savu
17 Patrick Hunt RE: [WHIRR-123] Cassandra integration   Andrei Savu
18 Patrick Hunt RE: [WHIRR-123] Cassandra integration     Tom White
19 Patrick Hunt RE: [WHIRR-123] Cassandra integration     Tom White
20 Patrick Hunt RE: [WHIRR-123] Cassandra integration   Adrian Cole
21 Patrick Hunt RE: [WHIRR-123] Cassandra integration     Tom White
22 Patrick Hunt RE: [WHIRR-123] Cassandra integration  Patrick Hunt 
```

我想做的是将上表中的信息更新/映射到 .csv 模板（命名为`AC_template.csv`），然后使用 backet 中的主题详细信息作为文件名（例如`AC_WHIRR-117`）将其保存在单独的文件中。对于上表，它应该创建两个新文件名，分别为`AC_WHIRR-117`和`AC_WHIRR-123`。

示例 .csv 模板 ( `AC_template.csv`) 如下：

```
 Adrian.Cole Patrick.Hunt Andrei.Savu Bruno.Dumon Edward.J..Yoon Eugene.Koontz Jakob.Homan Kelvin.Kakugawa Tom.White
Adrian Cole               0            0           0           0              0             0           0               0         0
Patrick Hunt              0            0           0           0              0             0           0               0         0
Andrei Savu               0            0           0           0              0             0           0               0         0
Bruno Dumon               0            0           0           0              0             0           0               0         0
Edward J. Yoon            0            0           0           0              0             0           0               0         0
Eugene Koontz             0            0           0           0              0             0           0               0         0
Jakob Homan               0            0           0           0              0             0           0               0         0
Kelvin Kakugawa           0            0           0           0              0             0           0               0         0
Tom White                 0            0           0           0              0             0           0               0         0
Lars George               0            0           0           0              0             0           0               0         0
Soren Macbeth             0            0           0           0              0             0           0               0         0
                Lars.George Soren.Macbeth
Adrian Cole               0             0
Patrick Hunt              0             0
Andrei Savu               0             0
Bruno Dumon               0             0
Edward J. Yoon            0             0
Eugene Koontz             0             0
Jakob Homan               0             0
Kelvin Kakugawa           0             0
Tom White                 0             0
Lars George               0             0
Soren Macbeth             0             0 
```

此问题的示例输出如下：

AC_WHIRR-117 的示例输出：

```
 Adrian.Cole Patrick.Hunt Andrei.Savu Bruno.Dumon Edward.J..Yoon Eugene.Koontz Jakob.Homan Kelvin.Kakugawa Tom.White
Adrian Cole               0            0           0           0              0             0           0               0         9
Patrick Hunt              0            0           0           0              0             0           0               0         0
Andrei Savu               0            0           0           0              0             0           0               0         0
Bruno Dumon               0            0           0           0              0             0           0               0         0
Edward J. Yoon            0            0           0           0              0             0           0               0         0
Eugene Koontz             0            0           0           0              0             0           0               0         0
Jakob Homan               0            0           0           0              0             0           0               0         0
Kelvin Kakugawa           0            0           0           0              0             0           0               0         0
Tom White                 9            0           0           0              0             0           0               0         0
Lars George               0            0           0           0              0             0           0               0         0
Soren Macbeth             0            0           0           0              0             0           0               0         0
                Lars.George Soren.Macbeth
Adrian Cole               0             0
Patrick Hunt              0             0
Andrei Savu               0             0
Bruno Dumon               0             0
Edward J. Yoon            0             0
Eugene Koontz             0             0
Jakob Homan               0             0
Kelvin Kakugawa           0             0
Tom White                 0             0
Lars George               0             0
Soren Macbeth             0             0 
```

AC_WHIRR-123 的样本输出

```
 Adrian.Cole Patrick.Hunt Andrei.Savu Bruno.Dumon Edward.J..Yoon Eugene.Koontz Jakob.Homan Kelvin.Kakugawa Tom.White
Adrian Cole               0            1           0           0              0             0           0               0         0
Patrick Hunt              1            0           2           0              0             0           0               0         4
Andrei Savu               0            2           0           0              0             0           0               0         0
Bruno Dumon               0            0           0           0              0             0           0               0         0
Edward J. Yoon            0            0           0           0              0             0           0               0         0
Eugene Koontz             0            0           0           0              0             0           0               0         0
Jakob Homan               0            0           0           0              0             0           0               0         0
Kelvin Kakugawa           0            0           0           0              0             0           0               0         0
Tom White                 0            4           0           0              0             0           0               0         0
Lars George               0            0           0           0              0             0           0               0         0
Soren Macbeth             0            0           0           0              0             0           0               0         0
                Lars.George Soren.Macbeth
Adrian Cole               0             0
Patrick Hunt              0             0
Andrei Savu               0             0
Bruno Dumon               0             0
Edward J. Yoon            0             0
Eugene Koontz             0             0
Jakob Homan               0             0
Kelvin Kakugawa           0             0
Tom White                 0             0
Lars George               0             0
Soren Macbeth             0             0 
```

dput(head)`mailing.csv`如下：

```
structure(list(Receiver = structure(c(1L, 1L, 1L, 1L, 1L, 1L), .Label = c("Adrian Cole", 
"Patrick Hunt"), class = "factor"), subject = structure(c(1L, 
1L, 1L, 1L, 1L, 1L), .Label = c("RE: [WHIRR-117] Composable services", 
"RE: [WHIRR-123] Cassandra integration "), class = "factor"), 
    sender = structure(c(4L, 4L, 1L, 1L, 4L, 1L), .Label = c("Adrian Cole", 
    "Andrei Savu", "Patrick Hunt", "Tom White"), class = "factor")), .Names = c("Receiver", 
"subject", "sender"), row.names = c(NA, 6L), class = "data.frame") 
```

输入（头）为`AC_template.csv`：

```
structure(list(Adrian.Cole = c(0L, 0L, 0L, 0L, 0L, 0L), Patrick.Hunt = c(0L, 
0L, 0L, 0L, 0L, 0L), Andrei.Savu = c(0L, 0L, 0L, 0L, 0L, 0L), 
    Bruno.Dumon = c(0L, 0L, 0L, 0L, 0L, 0L), Edward.J..Yoon = c(0L, 
    0L, 0L, 0L, 0L, 0L), Eugene.Koontz = c(0L, 0L, 0L, 0L, 0L, 
    0L), Jakob.Homan = c(0L, 0L, 0L, 0L, 0L, 0L), Kelvin.Kakugawa = c(0L, 
    0L, 0L, 0L, 0L, 0L), Tom.White = c(0L, 0L, 0L, 0L, 0L, 0L
    ), Lars.George = c(0L, 0L, 0L, 0L, 0L, 0L), Soren.Macbeth = c(0L, 
    0L, 0L, 0L, 0L, 0L)), .Names = c("Adrian.Cole", "Patrick.Hunt", 
"Andrei.Savu", "Bruno.Dumon", "Edward.J..Yoon", "Eugene.Koontz", 
"Jakob.Homan", "Kelvin.Kakugawa", "Tom.White", "Lars.George", 
"Soren.Macbeth"), row.names = c("Adrian Cole", "Patrick Hunt", 
"Andrei Savu", "Bruno Dumon", "Edward J. Yoon", "Eugene Koontz"
), class = "data.frame") 
```

WHIRR-117 的示例输出如下：

```
structure(list(Adrian.Cole = c(0L, 0L, 0L, 0L, 0L, 0L), Patrick.Hunt = c(0L, 
0L, 0L, 0L, 0L, 0L), Andrei.Savu = c(0L, 0L, 0L, 0L, 0L, 0L), 
    Bruno.Dumon = c(0L, 0L, 0L, 0L, 0L, 0L), Edward.J..Yoon = c(0L, 
    0L, 0L, 0L, 0L, 0L), Eugene.Koontz = c(0L, 0L, 0L, 0L, 0L, 
    0L), Jakob.Homan = c(0L, 0L, 0L, 0L, 0L, 0L), Kelvin.Kakugawa = c(0L, 
    0L, 0L, 0L, 0L, 0L), Tom.White = c(9L, 0L, 0L, 0L, 0L, 0L
    ), Lars.George = c(0L, 0L, 0L, 0L, 0L, 0L), Soren.Macbeth = c(0L, 
    0L, 0L, 0L, 0L, 0L)), .Names = c("Adrian.Cole", "Patrick.Hunt", 
"Andrei.Savu", "Bruno.Dumon", "Edward.J..Yoon", "Eugene.Koontz", 
"Jakob.Homan", "Kelvin.Kakugawa", "Tom.White", "Lars.George", 
"Soren.Macbeth"), row.names = c("Adrian Cole", "Patrick Hunt", 
"Andrei Savu", "Bruno Dumon", "Edward J. Yoon", "Eugene Koontz"
), class = "data.frame") 
```

WHIRR-123 的示例输出如下：

```
structure(list(Adrian.Cole = c(0L, 1L, 0L, 0L, 0L, 0L), Patrick.Hunt = c(1L, 
0L, 2L, 0L, 0L, 0L), Andrei.Savu = c(0L, 2L, 0L, 0L, 0L, 0L), 
    Bruno.Dumon = c(0L, 0L, 0L, 0L, 0L, 0L), Edward.J..Yoon = c(0L, 
    0L, 0L, 0L, 0L, 0L), Eugene.Koontz = c(0L, 0L, 0L, 0L, 0L, 
    0L), Jakob.Homan = c(0L, 0L, 0L, 0L, 0L, 0L), Kelvin.Kakugawa = c(0L, 
    0L, 0L, 0L, 0L, 0L), Tom.White = c(0L, 4L, 0L, 0L, 0L, 0L
    ), Lars.George = c(0L, 0L, 0L, 0L, 0L, 0L), Soren.Macbeth = c(0L, 
    0L, 0L, 0L, 0L, 0L)), .Names = c("Adrian.Cole", "Patrick.Hunt", 
"Andrei.Savu", "Bruno.Dumon", "Edward.J..Yoon", "Eugene.Koontz", 
"Jakob.Homan", "Kelvin.Kakugawa", "Tom.White", "Lars.George", 
"Soren.Macbeth"), row.names = c("Adrian Cole", "Patrick Hunt", 
"Andrei Savu", "Bruno Dumon", "Edward J. Yoon", "Eugene Koontz"
), class = "data.frame") 
```

感谢专家的帮助...

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-25T04:57:47.677

一些使用`plyr`带有基本功能的包`table`。可能需要一些组装。这应该能让你大部分时间到达那里。

```
#load template
template <- structure(list(Adrian.Cole = c(0L, 0L, 0L, 0L, 0L, 0L), Patrick.Hunt = c(0L, 
0L, 0L, 0L, 0L, 0L), Andrei.Savu = c(0L, 0L, 0L, 0L, 0L, 0L), 
    Bruno.Dumon = c(0L, 0L, 0L, 0L, 0L, 0L), Edward.J..Yoon = c(0L, 
    0L, 0L, 0L, 0L, 0L), Eugene.Koontz = c(0L, 0L, 0L, 0L, 0L, 
    0L), Jakob.Homan = c(0L, 0L, 0L, 0L, 0L, 0L), Kelvin.Kakugawa = c(0L, 
    0L, 0L, 0L, 0L, 0L), Tom.White = c(0L, 0L, 0L, 0L, 0L, 0L
    ), Lars.George = c(0L, 0L, 0L, 0L, 0L, 0L), Soren.Macbeth = c(0L, 
    0L, 0L, 0L, 0L, 0L)), .Names = c("Adrian.Cole", "Patrick.Hunt", 
"Andrei.Savu", "Bruno.Dumon", "Edward.J..Yoon", "Eugene.Koontz", 
"Jakob.Homan", "Kelvin.Kakugawa", "Tom.White", "Lars.George", 
"Soren.Macbeth"), row.names = c("Adrian Cole", "Patrick Hunt", 
"Andrei Savu", "Bruno Dumon", "Edward J. Yoon", "Eugene Koontz"
), class = "data.frame")
#the rownames of this data frame hold the names of senders/receivers 
#that we are interested in
names.to.search <- rownames(template)

#load data frame
mailing <- structure(list(Receiver = structure(c(1L, 1L, 1L, 1L, 1L, 1L), 
    .Label = c("Adrian Cole", "Patrick Hunt"), class = "factor"), 
    subject = structure(c(1L, 1L, 1L, 1L, 1L, 1L), 
    .Label = c("RE: [WHIRR-117] Composable services", 
    "RE: [WHIRR-123] Cassandra integration "), class = "factor"), 
  sender = structure(c(4L, 4L, 1L, 1L, 4L, 1L), .Label = c("Adrian Cole", 
  "Andrei Savu", "Patrick Hunt", "Tom White"), class = "factor")), .Names = c("Receiver", 
    "subject", "sender"), row.names = c(NA, 6L), class = "data.frame")
names(mailing) <- tolower(names(mailing))
#get topic to sort by
mailing$topic <- gsub(".*\\[(.*)\\].*","\\1",mailing$subject)
#restrict to rows that have sender and receiver in names list
mailing <- mailing[mailing$receiver %in% names.to.search & 
    mailing$sender %in% names.to.search,]
library(plyr)
fn <- function(x) {
    with(x, {
        #add NA-name and name-NA to the sender and receiver lists 
        #so that the resulting table is of the right dimension
        receiver <- append(as.character(receiver), 
            c(names.to.search, rep(NA,times=length(names.to.search))))
        sender <- append(as.character(sender), 
            c(rep(NA,times=length(names.to.search)),names.to.search))
        #create the table
        y <- table(receiver,sender)
        #write table to csv file
        write.csv(y,file=paste0("AC_",topic[1],".csv"))
    })
}
#perform fn on each section of data frame by topic
d_ply(mailing,.(topic),fn) 
```

# php - 从 .jpg 和 .php 获取图像之间的区别？type=3&item_id=013c23

> ID：12575051
> 
> 赞同：-1
> 
> 时间：2012-09-25T01:22:54.793
> 
> 标签：php, image

我想知道以下获取图像的方法的优缺点：

[http://image.anobii.com/anobi/image_book.php?type=3&item_id=013c23a6dd4c6115e4&time=1282904048](http://image.anobii.com/anobi/image_book.php?type=3&item_id=013c23a6dd4c6115e4&time=1282904048)

[http://static.anobii.com/anobii/static/image/welcome/icon_welcome.png](http://static.anobii.com/anobii/static/image/welcome/icon_welcome.png)

一种使用 php 获取图像，第二种只需输入 url。

例如，哪个快？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-25T01:28:10.303

它们可能用于非常不同的目的。如果您能够直接链接到该`.png`资源，那么它很可能（但不保证是）一个真实的文件，可以在网络上访问。当使用 PHP 脚本来提供图像内容时，幕后可能会发生很多不同的事情。

例如，PHP 能够检查用户的会话或身份验证凭据以提供对图像的授权。图像二进制数据可以存储在数据库中而不是文件系统中，或者如果在文件系统中，图像文件可以存储*在*Web 服务器的文档根目录之外，从而防止直接访问它。一种常见的用法是在用户未经授权时拒绝访问文件，而是在其位置提供其他图像数据，例如“拒绝访问”默认图像。

PHP 脚本的另一个潜在用途可能是对资源的每次会话命中计数，或者限制客户端多次访问资源的速率。

提供静态文件时，授权、日志记录等仅限于配置的 Web 服务器的功能。

要问的问题并不是哪个更快，而是哪个适合应用程序的业务需求。

# java - 当我知道它所在的类的 ParametrizedType 时，如何解析 ParametrizedType / TypeVariable？

> ID：12575053
> 
> 赞同：1
> 
> 时间：2012-09-25T01:23:37.497
> 
> 标签：java, generics, reflection

我正在使用反射代理对公共 API 执行额外的检查。本质上，我想包装从它返回的每个对象，以便调用者获得的任何对象都是真实对象的代理。

Java 仍然存在整个擦除问题，因此我将传递包装对象的类型。我应该知道一切是什么类型，因为 API 的入口是一个单一的、非通用的接口。

```
public class ProxyInvocationHandler implements InvocationHandler {
    private final Object delegate;
    private final Type delegateType;

    public ProxyInvocationHandler(Object delegate, Type delegateType) {
        this.delegate = delegate;
        this.delegateType = delegateType;
    }

    @Override
    public Object invoke(Object proxy, Method method, Object[] args) {
        // Omitted: additional checks performed here.

        Object result = method.invoke(delegate, args);

        Type returnType = method.getGenericReturnType();

        // e.g. if delegateType is List<Cat> and the method is the get method,
        // returnType would be E but resultType should be Cat.
        Type resultType = ???

        // Utility method I will omit, it just creates another proxy instance
        // using its own invocation handler.
        return ProxyUtils.wrap(result, resultType);
    }
} 
```

我环顾了 Type / ParametrizedType API，似乎无法找到一种方法来获取`resultType`，即使`delegateType`并且`returnType`应该有足够的信息来计算它。

这样做的“正确”方法是什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-25T15:13:50.013

您可以为此目的使用[Java ClassMate 。](https://github.com/cowtowncoder/java-classmate)您必须使用`com.fasterxml.classmate.GenericType`类型标记：

```
GenericType<?> delegateType = new GenericType<List<Cat>>() {}; 
```

`{}`请注意称为[“超类型令牌”模式](http://gafter.blogspot.com/2006/12/super-type-tokens.html)的空。

```
TypeResolver typeResolver = new TypeResolver();
MemberResolver memberResolver = new MemberResolver(

ResolvedType type = typeResolver.resolve(delegateType);
ResolvedTypeWithMembers members = memberResolver.resolve(type, null, null);
ResolvedMethod[] methods = members.getMemberMethods(); 
```

将结果缓存在`Map`：

```
Map<Method, ResolvedMethod> resolved = new HashMap<>();
for (ResolvedMethod method: methods) {
    resolved.put(method.getRawMember(), method);
} 
```

现在，当你有一个由`delegateType`, ie声明的方法时`List`，你可以得到它的*解析*返回类型：

```
Method method = List.class.getMethod("get", int.class);
ResolvedType resultType = resolved.get(method).getReturnType();
System.out.println("resultType = " + resultType);              // prints resultType = Cat 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-28T06:20:37.383

以下是番石榴的方式，适用于未来的人：

```
...
Type returnType = method.getGenericReturnType();
TypeToken<?> resultType = TypeToken.of(delegateType).resolveType(returnType); 
```

我将 delegateType 的类型更改`TypeToken<?>`为让事情变得更容易一些。当然，我添加了相当多的缓存（使用 a `LoadingCache`）以将性能降低到合理的速度。他们的解析代码比我最初做同样事情的破解代码慢。不同的是，我现在有信心正确地完成它。

# app-config - 在 SmartClient 的 .exe.config 中编辑 key->value

> ID：12575055
> 
> 赞同：1
> 
> 时间：2012-09-25T01:23:59.177
> 
> 标签：app-config, smartclient

我将从这里开始：我对 SmartClient、.Net、DotNetNuke 等一无所知。这是一个“看看 alison 是否可以提供帮助”的项目，用于 6 年前由一家公司开发的客户应用程序/网站，但没有帮助。我只是一名前端开发人员 - 我已经尽我所能搜索了。如果我不理解这里给出的建议，我将继续协助客户。只是想我会试一试。开始：

我们只需要更改连接到 Web 服务 (ASEPublisher) 的桌面应用程序配置中的键 -> 值。我有 FTP 和 SQL Server 访问权限，但仅此而已。

桌面应用程序文件夹包含以下文件：

*   数据发布者.exe
*   DataPublisher.exe.config
*   数据发布者.pdb
*   OleDBDataAccess.dll
*   OleDbDataAccess.pdb

他们的网站包含一个名为“smartclient”的文件夹，其中包含相同的文件。

我只需要更改下面代码中的所有 url 并让应用程序更新以使用新的 url。显然，只是在桌面上更改此文件并重新启动应用程序并没有这样做。所以，我在这里。我希望这不是太模糊。如果您需要更多信息，我可以尝试提供。

```
<?xml version="1.0" encoding="utf-8" ?>
<configuration>
   <configSections>
      <sectionGroup name="applicationSettings" type="System.Configuration.ApplicationSettingsGroup, System, Version=2.0.0.0, Culture=neutral, PublicKeyToken=b77a5c561934e089" >
         <section name="DataPublisher.Properties.Settings" type="System.Configuration.ClientSettingsSection, System, Version=2.0.0.0, Culture=neutral, PublicKeyToken=b77a5c561934e089" requirePermission="false" />
      </sectionGroup>
   </configSections>
   <appSettings>

      <add key="DefaultFilePath"    value="I:\Staff\fakefolder\database\SA Data.mdb" />
      <add key="DefaultASEFilePath" value="I:\Staff\fakefolder\database\SA Data.mdb" />

      <add key="CNN" value="Provider=Microsoft.Jet.OLEDB.4.0;User ID=Admin;Data Source=" />

      <add key="WebSvcUrl"    value="http://www.fakedomain.org/admin/ClassPublisher.asmx" />
      <add key="ASEWebSvcUrl" value="http://www.fakedomain.org/admin/ASEWebService.asmx" />

   </appSettings>
   <applicationSettings>
      <DataPublisher.Properties.Settings>
         <setting name="DataPublisher_ClassPublisherWS_ClassPublisher"
        serializeAs="String">
            <value>http://www.fakedomain.org/admin/ClassPublisher.asmx</value>
         </setting>
         <setting name="DataPublisher_ASEPublisherWS_ASEWebService" serializeAs="String">
            <value>http://www.fakedomain.org/admin/ASEWebService.asmx</value>
         </setting>
      </DataPublisher.Properties.Settings>
   </applicationSettings>
</configuration> 
```

# javascript - FB Like 按钮应使用哪个 Javascript SDK 代码进行哪些修改？

> ID：12575059
> 
> 赞同：1
> 
> 时间：2012-09-25T01:24:27.807
> 
> 标签：javascript, facebook, facebook-like

有两套 JavaScript SDK 代码，一套在 SDK 页面上给出：

```
<div id="fb-root"></div>
<script>
  window.fbAsyncInit = function() {
    FB.init({
      appId      : 'myappidnumbers', // App ID
      channelUrl : '//www.mywebsite.com/channel.html', // Channel File
      status     : true, // check login status
      cookie     : true, // enable cookies to allow the server to access the session
      xfbml      : true  // parse XFBML
    });

    // Additional initialization code here
  };

  // Load the SDK Asynchronously
  (function(d){
     var js, id = 'facebook-jssdk', ref = d.getElementsByTagName('script')[0];
     if (d.getElementById(id)) {return;}
     js = d.createElement('script'); js.id = id; js.async = true;
     js.src = "//connect.facebook.net/en_US/all.js";
     ref.parentNode.insertBefore(js, ref);
   }(document));
</script> 
```

以及获取按钮代码时生成的一个：

```
<div id="fb-root"></div>
<script>
(function(d, s, id) {
  var js, fjs = d.getElementsByTagName(s)[0];
  if (d.getElementById(id)) return;
  js = d.createElement(s); js.id = id;
  js.src = "//connect.facebook.net/es_ES/all.js#xfbml=1&appId=myappidnumbers";
  fjs.parentNode.insertBefore(js, fjs);
}(document, 'script', 'facebook-jssdk'));
</script> 
```

无论我使用哪个，Like 按钮都不会出现。我尝试使用调试器，并收到了 Like 按钮的警告：

**缺少管理员和应用 ID：缺少** fb:admins 和 fb:app_id 标签。这些标签对于 Facebook 呈现产生高点击率的新闻提要故事是必要的。

对于有经验的人来说，这可能是一个简单的问题，但我不知道该怎么做才能让点赞按钮出现。我错过了什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-25T02:10:38.803

尝试设置

```
<meta property="fb:app_id" content="YOUR APP ID" />
<meta property="fb:admins" content="YPUR USER ID" /> 
```

[在您的 HEADER 中，使用https://developers.facebook.com/tools/debug](https://developers.facebook.com/tools/debug)测试您的网站后url linter :)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-25T17:36:45.977

第二组较短的 SDK 代码就足够了。

最初，我正在使用 Chrome 进行测试，但没有显示任何内容。在其他浏览器上成功测试后，我意识到问题所在：我启用了 FB Disconnect（chrome 扩展）。哎呀。

# android - 由于 AsyncTask 是一个单独的类，如何将 OnPostExecute() 的结果获取到主要活动？

> ID：12575068
> 
> 赞同：374
> 
> 时间：2012-09-25T01:26:26.120
> 
> 标签：android, android-asynctask

我有这两个课。我的主要活动和扩展的`AsyncTask`活动，现在在我的主要活动中，我需要`OnPostExecute()`从`AsyncTask`. 如何将结果传递或获取到我的主要活动？

这是示例代码。

我的主要活动。

```
public class MainActivity extends Activity{

    AasyncTask asyncTask = new AasyncTask();

    @Override
    public void onCreate(Bundle aBundle) {
        super.onCreate(aBundle);            

        //Calling the AsyncTask class to start to execute.  
        asyncTask.execute(a.targetServer); 

        //Creating a TextView.
        TextView displayUI = asyncTask.dataDisplay;
        displayUI = new TextView(this);
        this.setContentView(tTextView); 
    }

} 
```

这是 AsyncTask 类

```
public class AasyncTask extends AsyncTask<String, Void, String> {

TextView dataDisplay; //store the data  
String soapAction = "http://sample.com"; //SOAPAction header line. 
String targetServer = "https://sampletargeturl.com"; //Target Server.

//SOAP Request.
String soapRequest = "<sample XML request>";    

@Override
protected String doInBackground(String... string) {

String responseStorage = null; //storage of the response

try {

    //Uses URL and HttpURLConnection for server connection. 
    URL targetURL = new URL(targetServer);
    HttpURLConnection httpCon = (HttpURLConnection) targetURL.openConnection();
    httpCon.setDoOutput(true);
    httpCon.setDoInput(true);
    httpCon.setUseCaches(false); 
    httpCon.setChunkedStreamingMode(0);

    //properties of SOAPAction header
    httpCon.addRequestProperty("SOAPAction", soapAction);
    httpCon.addRequestProperty("Content-Type", "text/xml; charset=utf-8"); 
    httpCon.addRequestProperty("Content-Length", "" + soapRequest.length());
    httpCon.setRequestMethod(HttpPost.METHOD_NAME);

    //sending request to the server.
    OutputStream outputStream = httpCon.getOutputStream(); 
    Writer writer = new OutputStreamWriter(outputStream);
    writer.write(soapRequest);
    writer.flush();
    writer.close();

    //getting the response from the server
    InputStream inputStream = httpCon.getInputStream(); 
    BufferedReader bufferedReader = new BufferedReader(new InputStreamReader(inputStream));
    ByteArrayBuffer byteArrayBuffer = new ByteArrayBuffer(50);

    int intResponse = httpCon.getResponseCode();

    while ((intResponse = bufferedReader.read()) != -1) {
        byteArrayBuffer.append(intResponse);
    }

    responseStorage = new String(byteArrayBuffer.toByteArray()); 

    } catch (Exception aException) {
    responseStorage = aException.getMessage(); 
    }
    return responseStorage;
}

protected void onPostExecute(String result) {

    aTextView.setText(result);

}       

} 
```

* * *

## 回答 #1

> 赞同：774
> 
> 时间：2012-09-25T02:08:04.227

简单的：

1.  创建`interface`类，其中`String output`是可选的，或者可以是您想要返回的任何变量。

    ```
     public interface AsyncResponse {
         void processFinish(String output);
     } 
    ```

2.  转到您的`AsyncTask`班级，并将接口声明`AsyncResponse`为字段：

    ```
     public class MyAsyncTask extends AsyncTask<Void, Void, String> {
       public AsyncResponse delegate = null;

         @Override
         protected void onPostExecute(String result) {
           delegate.processFinish(result);
         }
      } 
    ```

3.  在您的主要活动中，您需要`implements`接口`AsyncResponse`。

    ```
     public class MainActivity implements AsyncResponse{
       MyAsyncTask asyncTask =new MyAsyncTask();

       @Override
       public void onCreate(Bundle savedInstanceState) {

          //this to set delegate/listener back to this class
          asyncTask.delegate = this;

          //execute the async task 
          asyncTask.execute();
       }

       //this override the implemented method from asyncTask
       @Override
       void processFinish(String output){
          //Here you will receive the result fired from async class 
          //of onPostExecute(result) method.
        }
      } 
    ```

* * *

更新

我不知道这是你们许多人的最爱。所以这里是简单方便的使用方式`interface`。

仍在使用相同`interface`的 . 仅供参考，您可以将其结合到`AsyncTask`课堂中。

在`AsyncTask`课堂上：

```
public class MyAsyncTask extends AsyncTask<Void, Void, String> {

  // you may separate this or combined to caller class.
  public interface AsyncResponse {
        void processFinish(String output);
  }

  public AsyncResponse delegate = null;

    public MyAsyncTask(AsyncResponse delegate){
        this.delegate = delegate;
    }

    @Override
    protected void onPostExecute(String result) {
      delegate.processFinish(result);
    }
} 
```

在你的`Activity`课堂上做这个

```
public class MainActivity extends Activity {

   MyAsyncTask asyncTask = new MyAsyncTask(new AsyncResponse(){

     @Override
     void processFinish(String output){
     //Here you will receive the result fired from async class 
     //of onPostExecute(result) method.
     }
  }).execute();

 } 
```

或者，再次在Activity上实现接口

```
public class MainActivity extends Activity 
    implements AsyncResponse{

    @Override
    public void onCreate(Bundle savedInstanceState) {

        //execute the async task 
        new MyAsyncTask(this).execute();
    }

    //this override the implemented method from AsyncResponse
    @Override
    void processFinish(String output){
        //Here you will receive the result fired from async class 
        //of onPostExecute(result) method.
    }
} 
```

上面有两种解决方案，第一种和第三种，需要创建方法`processFinish`，另一种，方法在调用者参数里面。第三个更整洁，因为没有嵌套的匿名类。

**提示**：将 、 和 更改`String output`为`String response`不同`String result`的匹配类型以获得不同的对象。

* * *

## 回答 #2

> 赞同：25
> 
> 时间：2012-09-25T01:35:01.000

有几个选项：

*   将课程嵌套`AsyncTask`在您的`Activity`课程中。假设您不在多个活动中使用相同的任务，这是最简单的方法。您的所有代码都保持不变，您只需将现有任务类移动为活动类中的嵌套类。

    ```
    public class MyActivity extends Activity {
        // existing Activity code
        ...

        private class MyAsyncTask extends AsyncTask<String, Void, String> {
            // existing AsyncTask code
            ...
        }
    } 
    ```

*   为您创建一个自定义构造函数，该构造函数`AsyncTask`引用您的`Activity`. 你会用类似的东西来实例化任务`new MyAsyncTask(this).execute(param1, param2)`。

    ```
    public class MyAsyncTask extends AsyncTask<String, Void, String> {
        private Activity activity;

        public MyAsyncTask(Activity activity) {
            this.activity = activity;
        }

        // existing AsyncTask code
        ...
    } 
    ```

* * *

## 回答 #3

> 赞同：19
> 
> 时间：2015-02-14T07:39:03.787

我觉得下面的方法很简单。

我已经声明了一个回调接口

```
public interface AsyncResponse {
    void processFinish(Object output);
} 
```

然后创建异步任务来响应所有类型的并行请求

```
 public class MyAsyncTask extends AsyncTask<Object, Object, Object> {

    public AsyncResponse delegate = null;//Call back interface

    public MyAsyncTask(AsyncResponse asyncResponse) {
        delegate = asyncResponse;//Assigning call back interfacethrough constructor
    }

    @Override
    protected Object doInBackground(Object... params) {

      //My Background tasks are written here

      return {resutl Object}

    }

    @Override
    protected void onPostExecute(Object result) {
        delegate.processFinish(result);
    }

} 
```

然后在活动类中单击按钮时调用异步任务。

```
public class MainActivity extends Activity{

    @Override
    public void onCreate(Bundle savedInstanceState) {

    Button mbtnPress = (Button) findViewById(R.id.btnPress);

    mbtnPress.setOnClickListener(new View.OnClickListener() {

            @Override
            public void onClick(View v) {

                MyAsyncTask asyncTask =new MyAsyncTask(new AsyncResponse() {

                    @Override
                    public void processFinish(Object output) {
                        Log.d("Response From Asynchronous task:", (String) output);

                        mbtnPress.setText((String) output);
                   }
                });

                asyncTask.execute(new Object[] { "Your request to aynchronous task class is giving here.." });

            }
        });

    }

} 
```

谢谢

* * *

## 回答 #4

> 赞同：18
> 
> 时间：2015-05-27T14:23:41.697

您可以在 Main 类中尝试此代码。这对我有用，但我已经以其他方式实现了方法

```
try {
    String receivedData = new AsyncTask().execute("http://yourdomain.com/yourscript.php").get();
} 
catch (ExecutionException | InterruptedException ei) {
    ei.printStackTrace();
} 
```

* * *

## 回答 #5

> 赞同：17
> 
> 时间：2017-08-04T07:36:35.100

这个答案可能会迟到，但是当您`Activity`依赖`AsyncTask`. 这将帮助您防止崩溃和内存管理。正如上面答案中已经提到的那样`interface`，我们也说它们是回调。他们将充当告密者，但在这些情况下永远不会发送**强**引用`Activity`或`interface`总是使用**弱引用。**

请参阅下面的屏幕截图以了解这如何导致问题。

[![在此处输入图像描述](../Images/dee10a0ba2a0aaa03934e00a705a1536.png)](https://i.stack.imgur.com/0NyH5.png)

正如你所看到的，如果我们从`AsyncTask`一个**强**引用开始，那么在我们获得数据之前不能保证我们的`Activity`/`Fragment`会一直存在，所以`WeakReference`在这些情况下使用会更好，这也将有助于内存管理，因为我们永远不会持有我们的强引用`Activity`那么它将在其失真后有资格进行垃圾收集。

检查下面的代码片段以了解如何使用很棒的 WeakReference -

`MyTaskInformer.java`将作为告密者工作的接口。

```
public interface MyTaskInformer {

    void onTaskDone(String output);

} 
```

`MySmallAsyncTask.java`AsyncTask 执行长时间运行的任务，它将使用`WeakReference`.

```
public class MySmallAsyncTask extends AsyncTask<String, Void, String> {

    // ***** Hold weak reference *****
    private WeakReference<MyTaskInformer> mCallBack;

    public MySmallAsyncTask(MyTaskInformer callback) {
        this.mCallBack = new WeakReference<>(callback);
    }

    @Override
    protected String doInBackground(String... params) {

        // Here do whatever your task is like reading/writing file
        // or read data from your server or any other heavy task

        // Let us suppose here you get response, just return it
        final String output = "Any out, mine is just demo output";

        // Return it from here to post execute
        return output;
    }

    @Override
    protected void onPostExecute(String s) {
        super.onPostExecute(s);

        // Here you can't guarantee that Activity/Fragment is alive who started this AsyncTask

        // Make sure your caller is active

        final MyTaskInformer callBack = mCallBack.get();

        if(callBack != null) {
            callBack.onTaskDone(s);
        }
    }
} 
```

`MainActivity.java`此类用于在此类和此强制方法上启动我的`AsyncTask`实现。`interface``override`

```
public class MainActivity extends Activity implements MyTaskInformer {

    private TextView mMyTextView;

    @Override
    protected void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.activity_main);

        mMyTextView = (TextView) findViewById(R.id.tv_text_view);

        // Start your AsyncTask and pass reference of MyTaskInformer in constructor
        new MySmallAsyncTask(this).execute();
    }

    @Override
    public void onTaskDone(String output) {

        // Here you will receive output only if your Activity is alive.
        // no need to add checks like if(!isFinishing())

        mMyTextView.setText(output);
    }
} 
```

* * *

## 回答 #6

> 赞同：7
> 
> 时间：2015-03-17T16:00:41.143

您可以在几行中完成，只需在调用 AsyncTask 时覆盖 onPostExecute。这是一个例子：

```
new AasyncTask()
{
    @Override public void onPostExecute(String result)
    {
       // do whatever you want with result 
    }
}.execute(a.targetServer); 
```

我希望它对你有帮助，快乐编码:)

* * *

## 回答 #7

> 赞同：6
> 
> 时间：2014-05-30T14:43:46.063

在您的 Oncreate() 中：

`

```
myTask.execute("url");
String result = "";
try {
      result = myTask.get().toString();
} catch (InterruptedException e) {
      // TODO Auto-generated catch block
      e.printStackTrace();
}catch (ExecutionException e) {
      // TODO Auto-generated catch block
      e.printStackTrace(); 
```

}`

* * *

## 回答 #8

> 赞同：4
> 
> 时间：2012-09-25T01:30:03.820

您可以调用（或重载的）的[`get()`](http://developer.android.com/reference/android/os/AsyncTask.html#get%28%29)方法。此方法将阻塞，直到完成其工作，此时它将返回您的.`AsyncTask`[`get(long, TimeUnit)`](http://developer.android.com/reference/android/os/AsyncTask.html#get%28long,%20java.util.concurrent.TimeUnit%29)`AsyncTask``Result`

在异步任务的创建/启动和调用方法之间做其他工作是明智的`get`，否则你不能非常有效地利用异步任务。

* * *

## 回答 #9

> 赞同：4
> 
> 时间：2017-07-26T19:12:04.083

人为什么那么难。

这应该足够了。

不要在异步任务上实现 onPostExecute，而是在 Activity 上实现：

```
public class MainActivity extends Activity 
{

@Override
public void onCreate(Bundle savedInstanceState) {

    //execute the async task 
    MyAsyncTask task = new MyAsyncTask(){
            protected void onPostExecute(String result) {
                //Do your thing
            }       

    }

    task.execute("Param");

}

} 
```

* * *

## 回答 #10

> 赞同：3
> 
> 时间：2016-10-16T20:51:42.077

您可以编写自己的侦听器。[这与HelmiB](https://stackoverflow.com/a/12575319/3525814)的答案相同，但看起来更自然：

创建监听接口：

```
public interface myAsyncTaskCompletedListener {
    void onMyAsynTaskCompleted(int responseCode, String result);
} 
```

然后编写你的异步任务：

```
public class myAsyncTask extends AsyncTask<String, Void, String> {

    private myAsyncTaskCompletedListener listener;
    private int responseCode = 0;

    public myAsyncTask() {
    }

    public myAsyncTask(myAsyncTaskCompletedListener listener, int responseCode) {
        this.listener = listener;
        this.responseCode = responseCode;
    }

    @Override
    protected void onPreExecute() {
        super.onPreExecute();
    }

    @Override
    protected String doInBackground(String... params) {
        String result;
        String param = (params.length == 0) ? null : params[0];
        if (param != null) {
            // Do some background jobs, like httprequest...
            return result;
        }
        return null;
    }

    @Override
    protected void onPostExecute(String finalResult) {
        super.onPostExecute(finalResult);
        if (!isCancelled()) {
            if (listener != null) {
                listener.onMyAsynTaskCompleted(responseCode, finalResult);
            }
        }
    }
} 
```

最后在活动中实现监听器：

```
public class MainActivity extends AppCompatActivity implements myAsyncTaskCompletedListener {

    @Override
    public void onMyAsynTaskCompleted(int responseCode, String result) {

        switch (responseCode) {
            case TASK_CODE_ONE: 
                // Do something for CODE_ONE
                break;
            case TASK_CODE_TWO:
                // Do something for CODE_TWO
                break;
            default: 
                // Show some error code
        }        
    } 
```

这就是调用 asyncTask 的方式：

```
 protected void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.activity_main);
        // Some other codes...
        new myAsyncTask(this,TASK_CODE_ONE).execute("Data for background job");
        // And some another codes...
} 
```

* * *

## 回答 #11

> 赞同：2
> 
> 时间：2014-07-23T08:29:48.443

嗨，你可以做这样的事情：

1.  创建实现 AsyncTask 的类

    ```
    // TASK 
    public class SomeClass extends AsyncTask<Void, Void, String>>
    {

        private OnTaskExecutionFinished _task_finished_event;

        public interface OnTaskExecutionFinished
        {
            public void OnTaskFihishedEvent(String Reslut);
        }

        public void setOnTaskFinishedEvent(OnTaskExecutionFinished _event)
        {
            if(_event != null)
            {
                this._task_finished_event = _event;
            }
        }

        @Override
        protected void onPreExecute()
        {
            super.onPreExecute();

        }

        @Override
        protected String doInBackground(Void... params)
        {
            // do your background task here ...

            return "Done!";
        }

        @Override
        protected void onPostExecute(String result)
        {
            super.onPostExecute(result);
            if(this._task_finished_event != null)
            {
                this._task_finished_event.OnTaskFihishedEvent(result);
            }
            else
            {
                Log.d("SomeClass", "task_finished even is null");
            }
        }
    } 
    ```

2.  添加主活动

    ```
    // MAIN ACTIVITY
    public class MyActivity extends ListActivity
    {
       ...
        SomeClass _some_class = new SomeClass();
        _someclass.setOnTaskFinishedEvent(new _some_class.OnTaskExecutionFinished()
        {
        @Override
        public void OnTaskFihishedEvent(String result)
        {
            Toast.makeText(getApplicationContext(),
                    "Phony thread finished: " + result,
                    Toast.LENGTH_SHORT).show();
        }

       });
       _some_class.execute();
       ...
     } 
    ```

* * *

## 回答 #12

> 赞同：1
> 
> 时间：2012-09-25T01:38:08.873

在 Activity 类中创建一个静态成员。然后在`onPostExecute`

例如，如果 AsyncTask 的结果是一个字符串，则在 Activity 中创建一个公共静态字符串

`public static String dataFromAsyncTask;`

然后，在`onPostExecute`AsyncTask 中，只需对主类进行静态调用并设置值。

`MainActivity.dataFromAsyncTask = "result blah";`

* * *

## 回答 #13

> 赞同：0
> 
> 时间：2016-10-09T13:37:06.227

我通过使用线程和处理程序/消息使其工作。步骤如下： 声明进度对话框

```
ProgressDialog loadingdialog; 
```

创建一个函数以在操作完成时关闭对话框。

```
 private Handler handler = new Handler() {
    @Override
    public void handleMessage(Message msg) {
        loadingdialog.dismiss();

    }
    }; 
```

编码你的执行细节：

```
 public void startUpload(String filepath) {
    loadingdialog = ProgressDialog.show(MainActivity.this, "Uploading", "Uploading Please Wait", true);
    final String _path = filepath;
    new Thread() {
        public void run() {
            try {
                UploadFile(_path, getHostName(), getPortNo());
                handler.sendEmptyMessage(0);

            } catch (Exception e) {
                Log.e("threadmessage", e.getMessage());
            }
        }
    }.start();
} 
```

* * *

## 回答 #14

> 赞同：0
> 
> 时间：2018-04-26T15:36:00.220

您需要使用**“协议”**来委托或提供数据给`AsynTask`.

**代表和数据源**

委托是一个对象，当该对象遇到程序中的事件时，该对象代表另一个对象或与该对象协作。（[苹果定义](https://developer.apple.com/library/ios/documentation/general/conceptual/CocoaEncyclopedia/DelegatesandDataSources/DelegatesandDataSources.html)）

**协议是定义一些方法来委托某些行为的接口。**

[这是一个完整的例子！！！](https://stackoverflow.com/a/26820666/2835520)

* * *

## 回答 #15

> 赞同：0
> 
> 时间：2018-12-19T10:07:56.807

试试这个：

```
public class SomAsyncTask extends AsyncTask<String, Integer, JSONObject> {

    private CallBack callBack;

    public interface CallBack {
        void async( JSONObject jsonResult );
        void sync( JSONObject jsonResult );
        void progress( Integer... status );
        void cancel();
    }

    public SomAsyncTask(CallBack callBack) {
        this.callBack = callBack;
    }

    @Override
    protected JSONObject doInBackground(String... strings) {

        JSONObject dataJson = null;

        //TODO query, get some dataJson

        if(this.callBack != null)
            this.callBack.async( dataJson );// asynchronize with MAIN LOOP THREAD

        return dataJson;

    }

    @Override
    protected void onProgressUpdate(Integer... values) {
        super.onProgressUpdate(values);

        if(this.callBack != null)
            this.callBack.progress(values);// synchronize with MAIN LOOP THREAD

    }

    @Override
    protected void onPostExecute(JSONObject jsonObject) {
        super.onPostExecute(jsonObject);

        if(this.callBack != null)
            this.callBack.sync(jsonObject);// synchronize with MAIN LOOP THREAD
    }

    @Override
    protected void onCancelled() {
        super.onCancelled();

        if(this.callBack != null)
            this.callBack.cancel();

    }
} 
```

以及用法示例：

```
public void onCreate(@Nullable Bundle savedInstanceState) {
         super.onCreate(savedInstanceState);

         final Context _localContext = getContext();
         SomeAsyncTask.CallBack someCallBack = new SomeAsyncTask.CallBack() {

                @Override
                public void async(JSONObject jsonResult) {//async thread
                    //some async process, e.g. send data to server...
                }

                @Override
                public void sync(JSONObject jsonResult) {//sync thread
                    //get result...

                    //get some resource of Activity variable...
                    Resources resources = _localContext.getResources();
                }

                @Override
                public void progress(Integer... status) {//sync thread
                    //e.g. change status progress bar...
                }

                @Override
                public void cancel() {

                }

            };

            new SomeAsyncTask( someCallBack )
                                .execute("someParams0", "someParams1", "someParams2");

    } 
```

* * *

## 回答 #16

> 赞同：0
> 
> 时间：2019-02-18T01:52:32.250

可能有点过火了，但我为执行代码和结果提供了回调。显然，为了线程安全，您要小心在执行回调中访问的内容。

AsyncTask 实现：

```
public class AsyncDbCall<ExecuteType,ResultType> extends AsyncTask<ExecuteType, Void,  
ResultType>
{
    public interface ExecuteCallback<E, R>
    {
        public R execute(E executeInput);
    }
    public interface PostExecuteCallback<R>
    {
        public void finish(R result);
    }

    private PostExecuteCallback<ResultType> _resultCallback = null;
    private ExecuteCallback<ExecuteType,ResultType> _executeCallback = null;

    AsyncDbCall(ExecuteCallback<ExecuteType,ResultType> executeCallback, PostExecuteCallback<ResultType> postExecuteCallback)
    {
        _resultCallback = postExecuteCallback;
        _executeCallback = executeCallback;
    }

    AsyncDbCall(ExecuteCallback<ExecuteType,ResultType> executeCallback)
    {
        _executeCallback = executeCallback;
    }

    @Override
    protected ResultType doInBackground(final ExecuteType... params)
    {
        return  _executeCallback.execute(params[0]);
    }

    @Override
    protected void onPostExecute(ResultType result)
    {
        if(_resultCallback != null)
            _resultCallback.finish(result);
    }
} 
```

回调：

```
 AsyncDbCall.ExecuteCallback<Device, Device> updateDeviceCallback = new 
 AsyncDbCall.ExecuteCallback<Device, Device>()
    {
        @Override
        public Device execute(Device device)
        {
            deviceDao.updateDevice(device);
            return device;
        }
    }; 
```

最后执行异步任务：

```
 new AsyncDbCall<>(addDeviceCallback, resultCallback).execute(device); 
```

* * *

## 回答 #17

> 赞同：0
> 
> 时间：2019-12-09T22:00:36.767

希望你经历过[这个](https://developer.android.com/reference/android/os/AsyncTask)，如果没有，请阅读。

[https://developer.android.com/reference/android/os/AsyncTask](https://developer.android.com/reference/android/os/AsyncTask)

根据结果​​数据的性质，您应该选择您能想到的最佳选项。

使用**接口是一个很好的选择**

其他一些选择是..

*   如果 AsyncTask 类是在您要在其中使用结果的类中定义的。使用**静态全局变量或 get()** ，请从外部类中使用它（必要时使用*volatile 变量）。*但应该知道 AsyncTask 的*进度*，或者至少应该确保它已经完成了任务并且结果可以通过全局变量 / get() 方法获得。您可以使用 *轮询、[onProgressUpdate(Progress...)](https://developer.android.com/reference/android/os/AsyncTask.html#onProgressUpdate(Progress...))、同步或接口（哪个最适合您）*

*   如果 Result 与 sharedPreference 条目兼容，或者可以作为文件保存在内存中，您甚至可以从后台任务本身**保存它，并且可以使用***onPostExecute()*方法
    在结果可用时收到通知记忆。

*   如果字符串足够小，并且要与活动的开始一起使用。可以在 onPostExecute() 中使用*意图 ( putExtra() )* **，**但*请*记住 ，静态上下文 处理起来*并不安全。*

***   如果可能，您可以从 onPostExecute() 方法调用**静态方法**，结果是您的*参数***

# c - 指针未传输到分配的内存

> ID：12575071
> 
> 赞同：0
> 
> 时间：2012-09-25T01:26:37.510
> 
> 标签：c, memory-management, environment-variables

我有一个学校作业，一切都很好，除了一个我无法弄清楚的部分。以下是我的问题发生的代码片段：

```
 //something goes wrong here, wont copy over
    puts("bravo");
    //add to end of the list
    int size_list = sizeof(environ);
    //char** tmp_ptr = ( char** )calloc( size_list + 1, ( size_list + 1 ) * sizeof( char* ) );
    char** tmp_ptr = ( char** ) malloc ( ( size_list + 1 ) * sizeof( char* ) );
    int k;
    for ( k = 0; k < size_list; ++k )
    {
        tmp_ptr[k] = environ[k];
        //memcpy(tmp_ptr[k],environ[k],sizeof(environ[k]));
    }
    //char** tmp_ptr= (char**)realloc(*environ, size_list+2);
    environ = tmp_ptr;
    environ[size_list] = (char*)malloc(len_string+1);
    strcpy(environ[size_list],full_string);
    return 1; 
```

您可以忽略“bravo”，这是由我来定位问题发生的位置。我试图让 environ 拥有新的变量列表，但是当我将它设置为等于 tmp_ptr 时，它是空的。我很确定这些值被复制了，但我不知道出了什么问题。函数结束时是否会删除 tmp_ptr 中的数据？这是一个可能的解释吗？如何正确分配和复制内存。我尝试使用 realloc，但这给了我无效的指针错误，所以我依赖 calloc 或 malloc。提前致谢。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-25T01:31:48.633

`environ`的长度不是`sizeof(environ)`，因为`environ`是 a `char **`（因此`sizeof(environ)`是 4 或 8，具体取决于您的平台）。您所做的实际上是清除了大部分内容，`environ`因为您只复制了前几个条目。

要找出有多少条目`environ`，请执行

```
int cnt = 0;
char **envp = environ;
while(*envp++) cnt++; 
```

我还应该注意该方法的一个问题：因为`environ`它是一个`NULL`- 终止的字符串数组（不要与'null-terminated string'混淆），你必须用你自己的条目*替换*最后的，然后在你之后添加一个新的新条目。目前，您的代码（如果它正确计算了大小）将在 , 之后添加您的条目​​，并且对程序不可见。`NULL``NULL``NULL`

旁注：`environ`绝对不建议使用这种方式。使用`getenv`/`setenv`代替；如果您需要批量设置环境，请尝试使用`execve`。（因此，在您的情况下，您可以简单`setenv("varname", "varvalue", 1)`地添加到环境中（如果已设置`varname=varvalue`现有映射，则将其替换为）。`varname`

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-09-25T01:31:40.570

`environ`是一个*指针，*这意味着它`sizeof(environ)`不是该数组中的项目数。相反，它是指针的大小，在您的情况下可能是四或八。

如果`environ`是与（最后一个是空指针的字符指针数组）相同的结构`argv`，则需要通过遍历数组来确定其大小，直到找到 NULL。

类似的东西（未经测试，但这个想法是合理的）：

```
char **envPtr = environ;
int size_list = 0;            // probably should be size_t
while (*envPtr != NULL) {
    envPtr++;
    size_list++;
} 
```

您可以在这个完整的程序中看到效果（进行了一些更改以绕过其他一些错误）：

```
#define _GNU_SOURCE
#include <stdio.h>
#include <stdlib.h>
#include <string.h>
#include <unistd.h>

#define full_string "xyzzy=plugh"
#define len_string strlen(full_string)

int main (int argc, char **argv) {
    int k, size_list = sizeof(environ);
    char **tmp_ptr = malloc ((size_list + 1) * sizeof ( char*));

    for (k = 0; k < size_list; ++k) printf ("[%s]\n", environ[k]);
    for (k = 0; k < size_list; ++k) tmp_ptr[k] = environ[k];
    tmp_ptr[size_list] = NULL;

    environ = tmp_ptr;
    environ[size_list] = malloc (len_string + 1);
    strcpy(environ[size_list],full_string);

    printf ("=====\n");
    for (k = 0; k <= size_list; ++k) printf ("[%s]\n", environ[k]);

    return 0;
} 
```

这仅输出我的四个环境变量，因为我有四字节指针：

```
[ORBIT_SOCKETDIR=/tmp/orbit-pax]
[SSH_AGENT_PID=1978]
[GPG_AGENT_INFO=/tmp/seahorse-tNDhG9/S.gpg-agent:2005:1]
[TERM=xterm]
=====
[ORBIT_SOCKETDIR=/tmp/orbit-pax]
[SSH_AGENT_PID=1978]
[GPG_AGENT_INFO=/tmp/seahorse-tNDhG9/S.gpg-agent:2005:1]
[TERM=xterm]
[xyzzy=plugh] 
```

更改代码以正确确定环境的大小：

```
#define _GNU_SOURCE
#include <stdio.h>
#include <stdlib.h>
#include <string.h>
#include <unistd.h>

#define full_string "xyzzy=plugh"
#define len_string strlen(full_string)

int main(int argc, char **argv) {
    int k, size_list = 0;
    char **envPtr = environ;
    while (*envPtr != NULL) {
        envPtr++;
        size_list++;
    }
    char **tmp_ptr = malloc ((size_list + 1) * sizeof (char*));

    for (k = 0; k < size_list; ++k) printf ("[%s]\n", environ[k]);
    for (k = 0; k < size_list; ++k) tmp_ptr[k] = environ[k];
    tmp_ptr[size_list] = NULL;

    environ = tmp_ptr;
    environ[size_list] = malloc (len_string + 1);
    strcpy(environ[size_list],full_string);

    printf ("=====\n");
    for (k = 0; k <= size_list; ++k) printf ("[%s]\n", environ[k]);

    return 0;
} 
```

给了我很多：

```
[ORBIT_SOCKETDIR=/tmp/orbit-pax]
[SSH_AGENT_PID=1978]
[GPG_AGENT_INFO=/tmp/seahorse-tNDhG9/S.gpg-agent:2005:1]
[TERM=xterm]
[SHELL=/bin/bash]
[GTK_RC_FILES=/etc/gtk/gtkrc:/home/pax/.gtkrc-1.2-gnome2]
[WINDOWID=62914564]
[GNOME_KEYRING_CONTROL=/tmp/keyring-RADe9n]
[GTK_MODULES=canberra-gtk-module]
[USER=pax]
:
[XAUTHORITY=/var/run/gdm3/auth-for-pax-AO1dYc/database]
[_=./testprog]
=====
[ORBIT_SOCKETDIR=/tmp/orbit-pax]
[SSH_AGENT_PID=1978]
[GPG_AGENT_INFO=/tmp/seahorse-tNDhG9/S.gpg-agent:2005:1]
[TERM=xterm]
[SHELL=/bin/bash]
[GTK_RC_FILES=/etc/gtk/gtkrc:/home/pax/.gtkrc-1.2-gnome2]
[WINDOWID=62914564]
[GNOME_KEYRING_CONTROL=/tmp/keyring-RADe9n]
[GTK_MODULES=canberra-gtk-module]
[USER=pax]
:
[XAUTHORITY=/var/run/gdm3/auth-for-pax-AO1dYc/database]
[_=./testprog]
[xyzzy=plugh] 
```

* * *

对于它的价值，您的代码存在以下问题：

*   显然，环境大小的计算不正确。
*   从 - 转换返回值`malloc`- 这在 C 中是不明智的，因为它可能会导致代码问题对您隐藏。
*   不将新列表的最后一个元素设置为 NULL。
*   不检查内存不足的情况。

除了最后一个之外，所有这些都固定在我上面的最终代码示例中。

# javascript - 创建 FollowMe 链接 SoundCloud

> ID：12575075
> 
> 赞同：3
> 
> 时间：2012-09-25T01:27:11.863
> 
> 标签：javascript, api, oauth-2.0, soundcloud

我正在尝试为我们的公司创建一个简单的 FollowMe 链接，当用户不允许弹出窗口时，我遇到了问题。这是代码：

```
$(document).ready(function(){
  SC.initialize({
    client_id: '***********************',
    redirect_uri: 'http://localhost:8002/callback.html'
  });
  var isCalled = false;
  var connect = function (){
    isCalled = true;
    SC.connect(function(){
      SC.put('/me/followings/123456', function(me, error){
        console.log('me: ', me)
        console.log('error: ', error)
        window.location.replace("http://www.soundcloud.com");
      });
    });
  };
  $('a').click(function(){
    isCalled = true;
    connect();
  });
  if(!isCalled){
    console.log(isCalled);
    //console.log('connect called')
    isCalled = true;
    connect();
  }
}); 
```

目前，如果您在浏览器中允许弹出窗口，您可以正确地关注所需的用户，但是当用户阻止弹出窗口并单击链接时，他们会在对话框中收到以下错误。

```
Unsafe JavaScript attempt to access frame with URL http://localhost:8002/ from frame with URL http://soundcloud.monstercat.com/callback.html?code=79e58c1c4ee8b3fb2a1c935fb676da90&state=SoundCloud_Dialog_1c798#access_token=1-24501-24540735-ab27bed0d285f42&scope=non-expiring. Domains, protocols and ports must match. callback.html:6

Uncaught TypeError: Cannot read property 'connectCallback' of undefined callback.html:6

Unsafe JavaScript attempt to access frame with URL http://soundcloud.monstercat.com/callback.html?code=79e58c1c4ee8b3fb2a1c935fb676da90&state=SoundCloud_Dialog_1c798#access_token=1-24201-27645735-ab27bed0d285f42&scope=non-expiring from frame with URL http://soundcloud.monstercat.com/callback.html?code=79e58c1c4ee8b3fb2a1c935fb676da90&state=SoundCloud_Dialog_1c798#access_token=1-24201-27645735-ab27bed0d285f42&scope=non-expiring. Domains, protocols and ports must match. 
```

任何帮助将非常感激。

注意：callback.html 是来自 soundcloud 开发站点的标准文件。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-01T12:37:59.267

您`connect`在页面加载后立即调用（因此，试图跟随自己）。这就是弹出窗口被阻止的原因。除非在处理单击事件时弹出立即发生，否则浏览器将阻止它。从该脚本的末尾**删除此部分：**

```
 if(!isCalled){
    console.log(isCalled);
    //console.log('connect called')
    isCalled = true;
    connect();
  } 
```

# mysql - MySQL JOIN 与 WHERE 子句，不返回所有结果

> ID：12575080
> 
> 赞同：1
> 
> 时间：2012-09-25T01:28:08.743
> 
> 标签：mysql, left-join, where-clause

我正在研究基于 PHP/MySQL 的“博客帖子”系统，帖子可以有多个类别，我有 2 个表：

帖子：

```
PostId   Content
0        POST0
1        POST1
2        POST2
3        POST3 
```

post_categories:

```
PostId   CategoryId
0        1
0        2
0        3
1        2
1        4
2        3
3        1 
```

（我省略了一些列）
我还有一个第三个表“类别”，它描述了类别，但这不相关。

给出一个 CategoryId（例如：2），我想返回包含该 CategoryId 的所有帖子，格式如下：

```
PostId  Contents  CategoriesIds
0       POST0     1, 2, 3
1       POST1     2, 4 
```

（post 0 和 post 1 都必须返回，它们都有 CategoryId 2）

问题是使用这个查询：

```
SELECT p.PostId, p.Content, GROUP_CONCAT(pc.CategoryId SEPARATOR ',') AS CategoriesIds
FROM posts AS p
LEFT JOIN post_categories AS pc ON p.PostId=pc.PostId
WHERE pc.CategoryId = 2 GROUP BY p.PostId 
```

两个帖子都返回，但不是所有类别 ID，

```
PostId  Content   CategoriesIds
0       POST0     2
1       POST1     2 
```

我想返回具有 CategoryId 2 的所有帖子，但仍返回这些帖子的所有 CategoriesId。

有可能这样做吗？
谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-25T01:42:16.980

看起来您需要将 categoryId = 2 的帖子选择与字段选择分开 - 尝试这样的事情：

```
SELECT p.PostId, p.Content,
GROUP_CONCAT(pc.CategoryId SEPARATOR ',') AS CategoriesIds

FROM posts AS p
LEFT JOIN post_categories AS pc ON p.PostId=pc.PostId

where p.PostId in 
  ( select PostId from post_categories where CategoryId = 2)

GROUP BY p.PostId 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-25T01:49:41.130

没有 using`IN`子句的最简单的解决方案是

```
SELECT a.postID, c.content, 
       GROUP_CONCAT(b.categoryID ORDER BY b.categoryID ) CategoryList
FROM
    (
      SELECT  PostID
      FROM    post_categories b
      WHERE   CategoryID = 2
    ) a
    INNER JOIN post_categories b
      ON a.postID = b.postID
    INNER JOIN post c
      ON c.PostID = b.PostID
GROUP BY a.postID, c.content 
```

# [SQLFiddle 演示](http://sqlfiddle.com/#!2/3857f/11)

# java - 停止运行 for 循环，直到我的 onClickListener 得到响应

> ID：12575082
> 
> 赞同：2
> 
> 时间：2012-09-25T01:28:14.423
> 
> 标签：java, android, for-loop

我有一个 for 循环，但我需要它停止做任何事情，直到我得到用户的响应（也就是用户选择左或右）。我在 Android 中执行此操作，但我不确定解决此问题的最佳方法。“左”和“右”是图像。所以在我继续前进之前，我正在听左或右被击中。我需要循环进行大约 50 次。这就是我到目前为止所拥有的。

```
int testlength = 50;
for (int i = 0; i < testlength; i++) {
    left.setImageResource(R.drawable.left);
    right.setImageResource(R.drawable.right);

    //Stop the for loop and get the input from the user     
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-25T01:34:51.013

我认为理想的解决方案是使用信号量：

```
class Example {
     private Semaphore sem;

     public Example() {
         sem = new Semaphore(0);
     }

     public void onClick(...) {
          // Do stuff
          sem.release();
     }

     public void myLoop() {
         int testlength = 50;
         for (int i = 0; i < testlength; i++) {
             left.setImageResource(R.drawable.left);
             right.setImageResource(R.drawable.right);

             sem.acquire();
         }
     }
} 
```

请记住，这假定 myLoop 未在 UI 线程上运行。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-25T01:33:08.627

你不需要循环。

收到 50 条响应后，只需退出例程：

```
int count = 0;

String[] responses = new String[50];

left.setOnClickListener(new View.OnClickListener()
{
    public void onClick(View v)
    {
        left.setImageResource(R.drawable.left);
        right.setImageResource(R.drawable.right);

        responses[count] = "Left";

        count++;

        if(count == 50)
        {
            // Exit the activity
        }
    }
};

right.setOnClickListener(new View.OnClickListener()
{
    public void onClick(View v)
    {
        left.setImageResource(R.drawable.left);
        right.setImageResource(R.drawable.right);

        responses[count] = "Right";

        count++;

        if(count == 50)
        {
            // Exit the activity
        }
    }
}; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-25T01:30:50.420

你想做这样的事情 -

```
ImageView img = (ImageView) findViewById(R.id.myImageId); 
img.setOnClickListener(new OnClickListener() { 
    public void onClick(View v) { 
       // your code here 
    } 
}); 
```

也就是说，您想使用事件而不是循环等待某人点击。紧密的循环通常是一个讨厌的想法。

我从这个线程得到了代码 -[如何将点击事件侦听器应用于 android 中的图像](https://stackoverflow.com/questions/1839273/how-to-apply-click-event-to-image-in-android)

# sharepoint - 有人可以说明使用 SharePoint Web 部件 (SSRS) 的本机模式报表和使用 SharePoint 2.0 Web 部件的报表之间的区别吗？

> ID：12575085
> 
> 赞同：0
> 
> 时间：2012-09-25T01:28:43.993
> 
> 标签：sharepoint, reporting-services

我试图了解使用 SSRS 或带有 SharePoint 2.0 Web 部件的报表有什么优势。或者是否有任何特定的场景我们必须使用它们中的任何一个？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-09T16:32:54.037

可能是错的，但我认为这可能与您正在寻找的内容一致。

[http://www.mssqltips.com/sqlservertip/2737/sql-server-reporting-services-vs-performancepoint-services/](http://www.mssqltips.com/sqlservertip/2737/sql-server-reporting-services-vs-performancepoint-services/)

# python - 如何遍历两个列表列表并避免特定位置的值重复组合？

> ID：12575086
> 
> 赞同：0
> 
> 时间：2012-09-25T01:28:50.503
> 
> 标签：python, list, loops, duplicates, combinations

我想遍历两个列表列表，并避免每个列表的位置 1 和 2 之间的重复值组合。

```
a = [[2007, 206, 205, 8], [2007, 206, 208, 9]]
b = [[2007, 205, 206, 8], [2007, 207, 210, 10]] 
```

在这种情况下，对于 a[0]，位置 1 和 2 将分别为 206 和 205，对于 b[0]，位置 1 和 2 将分别为 205 和 206。a[0] 和 b[0] 源自相同数据集，但结构不同。但是，根据组合， b[0] 将是 a[0] 的副本。如何避免这种基于组合的重复？

谢谢你。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-25T01:37:06.583

如果您想要以下结果：

```
c = [[2007, 206, 205, 8], [2007, 206, 208, 9], [2007, 207, 210, 10]] 
```

这应该很容易：

```
a = [[2007, 206, 205, 8], [2007, 206, 208, 9]]
b = [[2007, 205, 206, 8], [2007, 207, 210, 10]]
from itertools import chain
seen = set()
c = []
for lst in chain(a,b):
    one_two = tuple(lst[:1] + sorted(lst[1:-1]) + lst[-1:])
    if one_two not in seen:
       seen.add(one_two)
       c.append(lst) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-25T01:42:09.820

```
sorted_a = [sorted(x) for x in a]
filtered_b = filter(lambda x: sorted(x) not in sorted_a, b) 
```

# html5-video - mediaelementjs 作为一个灵活的 Flash 播放器

> ID：12575087
> 
> 赞同：0
> 
> 时间：2012-09-25T01:29:07.427
> 
> 标签：html5-video

我有一个使用固定大小的 Flash 播放器播放的 Flash 视频库。我想使用 mediaelementjs 至少有一个播放器，我可以在其中选择大小 - 以添加响应大小和移动播放选项作为后期阶段。

我已将网站上的示例最小化为此，但它根本不播放示例文件。

```
<html>
    <head>
        <code>
            <script src="mediaelementjs/jquery.js"></script>
            <script src="mediaelementjs/mediaelement-and-player.min.js"></script>
            <link rel="stylesheet" href="mediaelementjs/mediaelementplayer.css" />
        </code>
    </head>
    <body>

        <div class="myvids" id="viddivap1" width="50%" style="width:100%;position:relative;">
        <video width="320" height="240" controls="controls" preload="none" style="max-width:100%;height:100%;">
            <!-- Flash fallback for non-HTML5 browsers without JavaScript -->
            <object width="320" height="240" type="application/x-shockwave-flash" data="mediaelementjs/flashmediaelement.swf">
                <param name="movie" value="mediaelementjs/flashmediaelement.swf" />
                <param name="flashvars" value="controls=true&file=echo-hereweare.mp4" />
                <!-- Image as a last resort -->
                <img src="myvideo.jpg" width="320" height="240" title="No video playback capabilities" />
            </object>
        </video>
        </div>

    </body>

</html> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-01T11:36:58.447

您的示例缺少“源”标签：

```
<html>
    <head>
        <code>
            <script src="mediaelementjs/jquery.js"></script>
            <script src="mediaelementjs/mediaelement-and-player.min.js"></script>
            <link rel="stylesheet" href="mediaelementjs/mediaelementplayer.css" />
        </code>
    </head>
    <body>
        <div class="myvids" id="viddivap1" width="50%" style="width:100%;position:relative;">
        <video width="320" height="240" controls="controls" preload="none" style="max-width:100%;height:100%;">
            <source type="video/mp4" src="echo-hereweare.mp4" />
            <!-- Flash fallback for non-HTML5 browsers without JavaScript -->
            <object width="320" height="240" type="application/x-shockwave-flash" data="mediaelementjs/flashmediaelement.swf">
                <param name="movie" value="mediaelementjs/flashmediaelement.swf" />
                <param name="flashvars" value="controls=true&file=echo-hereweare.mp4" />
                <!-- Image as a last resort -->
                <img src="myvideo.jpg" width="320" height="240" title="No video playback capabilities" />
            </object>
        </video>
        </div>
    </body>
</html> 
```

# android - 如何使用 Htpp 连接 android 发布请求

> ID：12575091
> 
> 赞同：0
> 
> 时间：2012-09-25T01:29:44.610
> 
> 标签：android, http, httpurlconnection

我有如下样品要求：

```
POST /api/something.php HTTP/1.1
Host: test.com
Accept-Charset: UTF-8
Connection: keep-alive
Content-Type: application/x-www-form-urlencoded;
Content-type: text/plain; charset=UTF-8
Content-length: 64

// Some parameters are here 
```

我如何执行此请求以获得响应？谢谢！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-25T01:58:51.587

use this :

```
String responseFromServer = startUrlConnection("http://test.com/api/something.php", "username=testing&password=123"); 
```

-

```
private String startUrlConnection(String targetURL, String urlParameters) throws IOException {

        URL url;
        connection = null;
        String output = null;
        try {
            // Create connection
            url = new URL(targetURL);

            System.setProperty("javax.net.debug", "all");
            connection = (HttpURLConnection) url.openConnection();
            connection.setRequestMethod("POST");

            connection.setUseCaches(false);
            connection.setDoInput(true);
            connection.setDoOutput(true);
            // Send request
            DataOutputStream wr = new DataOutputStream(connection.getOutputStream());
            wr.writeBytes(urlParameters);
            wr.flush();
            wr.close();

            // Get Response
            InputStream is;

            if (connection.getResponseCode() <= 400) {
                is = connection.getInputStream();
            } else {
                /* error from server */
                is = connection.getErrorStream();
            }

            BufferedReader rd = new BufferedReader(new InputStreamReader(is));
            String line;
            StringBuffer response = new StringBuffer();
            while ((line = rd.readLine()) != null) {
                response.append(line);
                response.append('\r');
            }
            rd.close();

            output = response.toString();
        } finally {

            if (connection != null) {
                connection.disconnect();
            }
        }
        return output;
    } 
```

# windows - Windows 驱动程序套件，轻量版？

> ID：12575092
> 
> 赞同：0
> 
> 时间：2012-09-25T01:29:56.997
> 
> 标签：windows, wdk

[Notepad2-mod](http://github.com/XhmikosR/notepad2-mod)程序只能使用 Windows Driver Kit (WDK) 或 Intel C++ Compiler (ICL) 构建。

正如我所见，ICL 不是免费的，WDK 似乎是[1 GB 的下载量](http://msdn.microsoft.com/en-us/windows/hardware/hh852362)。

是否有更小的 WDK 版本可用？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-25T03:08:19.397

查看“Build”目录，有一个用 VS2010 和 VS2012 构建的脚本。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-29T07:06:45.707

使用 [此脚本](http://github.com/svnpenn/a/blob/f4890e7/misc/baby-wdk.sh)，我下载了 WDK 并仅提取了我需要的内容

*   `buildtools`
*   `headers`
*   `libs`

[我将 WDK 的](http://bitbucket.org/svnpenn/a/downloads)这个子集上传 到 Bitbucket，最终大小为 52 MB。

# c++ - 为什么错误 LNK2001：在这种情况下无法解析外部符号？

> ID：12575097
> 
> 赞同：0
> 
> 时间：2012-09-25T01:30:42.637
> 
> 标签：c++

> **可能重复：使用字段**
> [定义 C++](https://stackoverflow.com/questions/3536372/defining-static-members-in-c)
> [静态方法中的静态成员](https://stackoverflow.com/questions/11249314/static-method-with-a-field)

我在网上找到了以下关于单例实现的代码，并决定试一试：

```
#include <iostream>

class Singleton
{
    Singleton(){}
    static Singleton *s_instance;

public:
    static Singleton* getInstance()
    {
        if(!s_instance)
            s_instance = new Singleton();

        return s_instance;
    }
};

int main()
{
    Singleton::getInstance();
    return(0);
} 
```

它看起来很简单。但是当我在 Visual Studio 中构建它时，它会给出一个链接器错误消息：

```
main.obj : error LNK2001: unresolved external symbol "private: static class Singleton
* Singleton::s_instance" (?s_instance@Singleton@@0PAV1@A)
C:\Users\boll\Documents\Visual Studio 2010\Projects\hello_world\Debug\hello_world.exe :
fatal error LNK1120: 1 unresolved externals' 
```

为什么`s_instance`在这种情况下 ' ' 未解决？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-25T01:54:13.077

I think you should initialize `s_instance=NULL` before. You can see the following link: [http://www.codeproject.com/Articles/1921/Singleton-Pattern-its-implementation-with-C](http://www.codeproject.com/Articles/1921/Singleton-Pattern-its-implementation-with-C)

# r - 在 R 中查看包中的所有内容（不仅仅是对象）

> ID：12575098
> 
> 赞同：10
> 
> 时间：2012-09-25T01:30:48.083
> 
> 标签：r

这可能是新手的问题，但我想我做了功课，但还没有找到答案（我希望能找到），所以我把它贴在这里寻求帮助。

以前也有人问过类似的问题，但根据我的发现，除了“昂贵”的解决方案（需要 R 的编辑器）之外，没有其他答案可以帮助我解决当前的问题。

我学到了这一点，`ls`并`objects`允许我们查看包内的对象。但即使使用`ls(all.names=TRUE)`，我仍然无法看到**所有**内容。有人建议`ls(getNAMEspace)`，但这对我来说仍然不够“好”。

例如

```
>search()
[1]".GlobalEvn"      "package:TCGAGBM"
>ls("package:TCGAGBM")
character(0)
>ls(getNamespace("TCGAGBM"),all.names=TRUE)
[1]"._NAMESPACE_."   "._S3MethodsTable_."  ".packageName" 
```

但是，在 C (cmd) 下，我看到以下内容

> C:\Users\XYZ\Documents\R\R-2.15.1\library\TCGAGBM 。.. 数据 extdata ......（共 3 个文件，7 个目录）

当我看到以下脚本行时，我遇到了这种“差异” -

```
>clinical=read.delim(system.file(
+"extdata/Clinical/clinical_patient_public_GBM.txt.gz",
+package="TCGAGBM"), header=TRUE) 
```

因此，我想知道 R 下是否有一种方法可以查看包中的所有内容，以便我们可以“知道”如何更好地利用该包。Vignette 可能会有所帮助，但在我迄今为止对 R 的有限经验中，我发现有些软件包没有随 Vignette 一起提供。

任何评论将不胜感激，以帮助我了解有关 R 的更多信息。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-09-25T04:27:38.720

这是探索任何包的功能的另一种方法。尽管它没有 Dirk 的解决方案那么全面，但它仍然很有用。当我想知道一个包的所有功能时，我会快速列出它的所有功能。然后，如果我对任何功能感到好奇，我会快速调出帮助文件`?function_name`并查看它的作用。出于这个原因，我将这个函数保留在我的函数中，`.rprofile`这样每次运行时它都会自动加载`R`。

```
lsp <- function (package, all.names = FALSE, pattern) {
    package <- deparse(substitute(package))
    ls(pos = paste("package", package, sep = ":"), all.names = all.names, 
        pattern = pattern)
} 
```

当我知道函数的部分名称以及它属于哪个包但很快需要找到它时，这尤其有用。

例如

```
> lsp(ggplot2, pattern = "geom")
 [1] "geom_abline"          "geom_area"           
 [3] "geom_bar"             "geom_bin2d"          
 [5] "geom_blank"           "geom_boxplot"        
 [7] "geom_contour"         "geom_crossbar"       
 [9] "geom_density"         "geom_density2d"      
[11] "geom_dotplot"         "geom_errorbar"       
[13] "geom_errorbarh"       "geom_freqpoly"       
[15] "geom_hex"             "geom_histogram"      
[17] "geom_hline"           "geom_jitter"         
[19] "geom_line"            "geom_linerange"      
[21] "geom_map"             "geom_path"           
[23] "geom_point"           "geom_pointrange"     
[25] "geom_polygon"         "geom_quantile"       
[27] "geom_raster"          "geom_rect"           
[29] "geom_ribbon"          "geom_rug"            
[31] "geom_segment"         "geom_smooth"         
[33] "geom_step"            "geom_text"           
[35] "geom_tile"            "geom_violin"         
[37] "geom_vline"           "update_geom_defaults" 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-09-25T01:38:50.657

*到目前为止*，我首选的方法是简单地查看相关包*的源代码*。

事实上，我实际上经常这样做，因为运行[CRANberries](http://dirk.eddelbuettel.com/cranberries)会创建一个本地 CRAN 镜像作为副作用。但即使您不这样做，CRAN 包也只需快速下载，并且会在已解析代码排除的源代码中*附带注释*。

*编辑*：我刚刚发现 Ben 也发现了什么：Sean Davis 的页面[http://watson.nci.nih.gov/~sdavis/tutorials/TCGA_data_integration/——](http://watson.nci.nih.gov/~sdavis/tutorials/TCGA_data_integration/)看起来它也使用了一些 BioC 包。我仍然会研究通常比已安装的包有更多评论、注释、额外内容的源代码。但也许这只是我的偏好。正如他们所说的那样。

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2012-09-25T02:20:48.880

如果您想查看特定软件包的所有系统文件，请尝试类似

```
list.files(system.file(package = 'TCGAGBM'), recursive = T, full.names = T) 
```

这将有多大用处取决于您的操作系统，因为软件包的安装方式取决于操作系统

有关详细信息，请参阅[R 安装和管理手册](http://cran.r-project.org/doc/manuals/R-admin.html#Windows-packages)中的相应部分。

# 笔记

@DirkEddelbuettel 建议检查源代码是一种*更好*的方法。

# scala - Scala 隐式 def 抱怨返回类型与成员 defs？

> ID：12575101
> 
> 赞同：0
> 
> 时间：2012-09-25T01:30:53.563
> 
> 标签：scala

定义了以下隐式 def，旨在实现 Akka actor 事件总线所需的一些方法。此处的文档中概述了所需的方法：http: [//doc.akka.io/docs/akka/2.0/scala/event-bus.html#Subchannel_Classification](http://doc.akka.io/docs/akka/2.0/scala/event-bus.html#Subchannel_Classification)

```
protected implicit def subclassification: Subclassification[Classifier] = {
      def isEqual(a: Classifier, b: Classifier): Boolean = {
        a.equals(b)
      }

      def isSubclass(a: Classifier, b: Classifier): Boolean = {
        a.startsWith(b)
      }

  } 
```

但是，当我去编译它时，我得到了错误：`type mismatch; found : Unit required: akka.util.Subclassification[MessageBus.this.Classifier]`

以下是文档的具体要求：

> `subclassification: Subclassification[Classifier]`是一个对象，提供 isEqual(a: Classifier, b: Classifier) 和 isSubclass(a: Classifier, b: Classifier) 供此分类器的其他方法使用。

我知道这将返回一个单元，但我将如何使实现也可以提供这些成员方法？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-25T01:33:17.223

您是要实例化的子类`Subclassification[Classifier]`吗？如果是这样，您需要这样说`new Subclassification[Classifier]`，以便 Scala 知道您正在尝试做什么。

```
protected implicit def subclassification: Subclassification[Classifier] = 
  new Subclassification[Classifier] {
    def isEqual(a: Classifier, b: Classifier): Boolean = {
      a.equals(b)
    }

    def isSubclass(a: Classifier, b: Classifier): Boolean = {
      a.startsWith(b)
    }
} 
```

它抱怨的原因是因为您为变量分配了`subclassification`一个仅包含两个函数声明的代码块。由于 Scala 总是假定块中的最后一个表达式是表达式的计算结果，并且函数声明的类型是`Unit`（基本上意味着它不计算任何东西），Scala 说整个块都有 type `Unit`。

由于您将块分配给变量`subclassification`，`subclassification`因此必须是类型`Unit`。但是您明确声明类型应该是`Subclassification[Classifier]`，因此存在不匹配，并且您会收到错误消息。

# php - .htaccess - 在真实目录中重定向 500 错误

> ID：12575103
> 
> 赞同：0
> 
> 时间：2012-09-25T01:31:03.103
> 
> 标签：php, html, apache, .htaccess

*mydomain.com/forum/ 是一个真实的目录。*

当我将这两行添加到我的 .htaccess 中时：

```
RewriteRule ^forum/([a-zA-Z0-9_-]+)/new-thread /forum/new-thread.php?comm=$1 [L]
RewriteRule ^forum/([a-zA-Z0-9_-]+) /forum/community.php?comm=$1 [L] 
```

`mydomain.com/forum/`AKA`mydomain.com/forum/index.php`引发 500 错误，以及所有应该由这些行更改的规则。我究竟做错了什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-25T02:46:57.303

您需要为正则表达式添加边界。例如，正则表达式`^forum/([a-zA-Z0-9_-]+)`匹配两者`/forum/new-thread`，`/forum/community`因此您的规则是循环的。您可以将`$`字符串匹配的结尾添加到您的正则表达式或添加条件以停止重写：

```
RewriteRule ^forum/([a-zA-Z0-9_-]+)/new-thread$ /forum/new-thread.php?comm=$1 [L]
RewriteRule ^forum/([a-zA-Z0-9_-]+)$ /forum/community.php?comm=$1 [L] 
```

或者

```
RewriteCond %{ENV:REDIRECT_STATUS} 200
RewriteRule ^ - [L]

RewriteRule ^forum/([a-zA-Z0-9_-]+)/new-thread /forum/new-thread.php?comm=$1 [L]
RewriteRule ^forum/([a-zA-Z0-9_-]+) /forum/community.php?comm=$1 [L] 
```

或者

```
RewriteCond %{REQUEST_FILENAME} !-f
RewriteCond %{REQUEST_FILENAME} !-d
RewriteRule ^forum/([a-zA-Z0-9_-]+)/new-thread /forum/new-thread.php?comm=$1 [L]

RewriteCond %{REQUEST_FILENAME} !-f
RewriteCond %{REQUEST_FILENAME} !-d
RewriteRule ^forum/([a-zA-Z0-9_-]+) /forum/community.php?comm=$1 [L] 
```

# c# - IIS ThreadAbort 异常

> ID：12575105
> 
> 赞同：1
> 
> 时间：2012-09-25T01:31:17.103
> 
> 标签：c#, iis, iis-7.5

在我的 IIS 7.5 上，我有一个带有 startMode="AlwaysRunning" 的 AppPool。另外，我将 AppPool 回收设置为 3 分钟进行测试。

当我运行一个长时间运行的任务（10 分钟）时，它会抛出 ThreadAbort。我认为“AlwaysRunning”会解决它。为什么会这样？我还需要改变什么吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-25T01:46:36.467

应用程序池回收导致 ThreadAbortException 因为它正在关闭池。无论如何，池进程将被终止并重新启动。池中的代码无法阻止这种情况（ThreadAbortException 的特殊之处在于它可以被捕获但不能被消耗）。

`startMode="AlwaysRunning"`只是意味着池将始终可用。它没有声明是哪个池进程（因此在池进程终止后，它将自动启动另一个池进程；或者如果重新启动 IIS，它将自动启动 w3wp.exe）。

删除 3 分钟的回收循环时间长度。我看不出它对测试有什么好处（因为只要修改了 ASP.NET 应用程序，IIS 就会重新启动 AppDomain）。

# javascript - 将自定义列添加到从 ModelForm 创建的表中

> ID：12575115
> 
> 赞同：0
> 
> 时间：2012-09-25T01:32:10.087
> 
> 标签：javascript, jquery, django, django-forms

所以我想为从 ModelForm 生成的表的每一行添加一个额外的列。在 Django 模板中，我使用：

```
 {{form.as_table}} 
```

根据行的不同，该列的内容会有所不同。现在我有这个：

```
$('.table tr').each(function() {
    $(this).append("<td></td>");        
})
var row = $("#id_manufacturer").parent().parent();
var cells = $("td", test);
$(cells[1]).append("Stuff I am adding for this specific row"); 
```

我们有更好的方法来做到这一点！？谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-25T02:07:42.127

如果这是您需要添加的唯一内容，那应该没问题。

您可以按如下方式稍微改进代码：

```
$('.table tr').each(function() {
    $(this).append('<td class="myNewColumn"></td>');
})
$("#id_manufacturer").closest("tr").find("td.myNewColumn").append("Stuff I am adding for this specific row"); 
```

*我不确定，`test`但假设你的意思是`row`.*

这种方法避免了`.parent().parent()`，如果将来 HTML 结构发生变化，这有点难看并且容易出错。

类似地，用于标识新添加列的类名可以使您免受未来对表结构的更改。`cells[1]`可能有一天会成为`cells[2]`例子。

从本质上讲，我的代码与您的原始代码完全相同，加上一些面向未来的代码。

# php - 检查函数是否已经运行

> ID：12575116
> 
> 赞同：-2
> 
> 时间：2012-09-25T01:32:11.667
> 
> 标签：php, function

我试图看看我是否可以让这个函数检查它是否已经在它被调用两次时运行。基本上它首先显示状态描述，再次调用 display_form 函数，在底部弹出一个表单供用户选择特定城市，我想显示所选城市的描述。我现在很困惑。

这是我的代码：

```
 <body>

        <h1>State and City Description</h1>
        <?php

            function display_form()
            {
                $stateArray = array('Pennsylvania'=>'Pennsylvania', 'California'=>'California', 'Florida'=>'Florida', 'Colorado'=>'Colorado', 'Texas'=>'Texas');
                $cityPA_Array = array('a'=>'Philadelphia', 'b'=>'Harrisburg', 'c'=>'Pittsburgh');
                $cityCA_Array = array('a'=>'San Francisco', 'b'=>'Los Angeles', 'c'=>'San Diego');
                $cityFL_Array = array('a'=>'Miami', 'b'=>'Naples', 'c'=>'Orlando');
                $cityCO_Array = array('a'=>'Boulder', 'b'=>'Auora', 'c'=>'Colorado Springs');
                $cityTX_Array = array('a'=>'Houston', 'b'=>'Dallas', 'c'=>'Austin');

                if($var == 0) {
                $form = '<form action="testsad.php" method="post">';
                $form .= '<table>';
                $form .= '<tr><td style="width:150px;">Name:</td>'.
                         '<td style="width:150px;"><input type="text" name="formName" /></td></tr>';
                $form .= '<tr><td>Select a state to visit:</td><td>
                          <select name=\'stateName\'>';

                foreach ($stateArray as $stateAbbrev => $stateName) {
                $form .= '<option value="'.$stateAbbrev.'">'.$stateName.'</option>';
                         }//end foreach loop
                $form .= '<tr><td style="text-align:center;"><input type="submit" value="Submit" /></td></tr>';

                $form .= '</select>
                          </td></tr>
                          </form><p></p>';
                $var = 1;
                }//end if statement
                elseif($GLOBALS['first'] == 1) {

                     if($stateName =='Pennsylvania') {
                        $form = '<form action="testsad.php" method="post">';
                        $form .= '<table>';
                        $form .= '<tr><td>Select a city to visit:</td><td>
                                 <select name=\'cityName\'>';

                                foreach ($cityPA_Array as $cityChoice => $cityName) {
                        $form .= '<option value="'.$cityChoice.'">'.$cityName.'</option>';
                                }//end foreach loop
                        $form .= '<tr><td style="text-align:center;"><input type="submit" value="Submit" /></td></tr>';

                        $form .= '</select>
                                 </td></tr>
                                 </form><p></p>';
                     }//end if
                        elseif($stateName =='California') {
                        $form = '<form action="testsad.php" method="post">';
                        $form .= '<table>';
                        $form .= '<tr><td>Select a city to visit:</td><td>
                                 <select name=\'cityName\'>';

                                foreach ($cityCA_Array as $cityChoice => $cityName) {
                        $form .= '<option value="'.$cityChoice.'">'.$cityName.'</option>';
                                }//end foreach loop
                        $form .= '<tr><td style="text-align:center;"><input type="submit" value="Submit" /></td></tr>';

                        $form .= '</select>
                                 </td></tr>
                                 </form><p></p>';
                     }//end elseif                         
                        elseif($stateName =='Florida') {
                        $form = '<form action="testsad.php" method="post">';
                        $form .= '<table>';
                        $form .= '<tr><td>Select a city to visit:</td><td>
                                 <select name=\'cityName\'>';

                                foreach ($cityFL_Array as $cityChoice => $cityName) {
                        $form .= '<option value="'.$cityChoice.'">'.$cityName.'</option>';
                                }//end foreach loop
                        $form .= '<tr><td style="text-align:center;"><input type="submit" value="Submit" /></td></tr>';

                        $form .= '</select>
                                 </td></tr>
                                 </form><p></p>';
                     }//end elseif                            
                        elseif($stateName =='Texas') {
                        $form = '<form action="testsad.php" method="post">';
                        $form .= '<table>';
                        $form .= '<tr><td>Select a city to visit:</td><td>
                                 <select name=\'cityName\'>';

                                foreach ($cityTX_Array as $cityChoice => $cityName) {
                        $form .= '<option value="'.$cityChoice.'">'.$cityName.'</option>';
                                }//end foreach loop
                        $form .= '<tr><td style="text-align:center;"><input type="submit" value="Submit" /></td></tr>';

                        $form .= '</select>
                                 </td></tr>
                                 </form><p></p>';
                     }//end elseif    
                        elseif($stateName =='Colorado') {
                        $form = '<form action="testsad.php" method="post">';
                        $form .= '<table>';
                        $form .= '<tr><td>Select a city to visit:</td><td>
                                 <select name=\'cityName\'>';

                                foreach ($cityCO_Array as $cityChoice => $cityName) {
                        $form .= '<option value="'.$cityChoice.'">'.$cityName.'</option>';
                                }//end foreach loop
                        $form .= '<tr><td style="text-align:center;"><input type="submit" value="Submit" /></td></tr>';

                        $form .= '</select>
                                 </td></tr>
                                 </form><p></p>';
                     }//end elseif                                         
                     $var = 0;
                }//end else statement

                return $form;
            }//end display_form()

            function display($state)
            {
                $analyze = '<h1>';
                if ($state['stateName'] == 'Pennsylvania') {

                    $analyze .= '<tr><th>'.$state['formName'].', here is info for: '.$state['stateName'].'</th></tr>';  

                    $analyze .= '<p>Pennsylvania is a wonderful state! It is a part of the appalachian mountains and has many traditions.<br/><br/> The new state Capitol drew rave reviews. Its dome was inspired by the domes of St. Peter\'s Basilica in Rome and the United States Capitol. President Theodore Roosevelt called it "the most beautiful state Capital in the nation" and said, "Its the handsomest building I ever saw" at the dedication. In 1989, the New York Times praised it as "grand, even awesome at moments, but it is also a working building, accessible to citizens ... a building that connects with the reality of daily life".<br/><br/>
                    Pennsylvania accounts for nine percent of wooded areas in the United States. In 1923 President Calvin Coolidge established the Allegheny National Forest under the authority of the Weeks Act of 1911 in the northwest part of the state in Elk, Forest, McKean, and Warren Counties for the purposes of timber production and watershed protection in the Allegheny River basin. The Allegheny is the state\'s only national forest.
                    <br/>James Buchanan, of Franklin County, the only bachelor President of the United States, was the only one to be born in Pennsylvania. The Battle of Gettysburg, the major turning point of the Civil War—took place near Gettysburg. An estimated 350,000 Pennsylvanians served in the Union Army forces along with 8,600 African American military volunteers.
                    Pennsylvania was also the home of the first commercially drilled oil well. In 1859, near Titusville, Pennsylvania, Edwin L. Drake successfully drilled the well, which led to the first major oil boom in United States history.</p>';  
                }//end if
                if ($state['stateName'] == 'California') {

                    $analyze .= '<tr><th>'.$state['formName'].', here is info for: '.$state['stateName'].'</th></tr>';  

                    $analyze .= '<p>California\'s Mount Whitney measures as the highest peak in the lower 48 states. Its most famous climb is Mount Whitney Trail to the 14,495 feet summit. Wilderness permits are required.
                                 In 1925 a giant sequoia located in California\'s Kings Canyon National Park was named the nation\'s national Christmas tree. The tree is over 300 feet in height.
                                 More turkeys are raised in California than in any other state in the United States.</p>';  
                }//end if
                if ($state['stateName'] == 'Florida') {

                    $analyze .= '<tr><th>'.$state['formName'].', here is info for: '.$state['stateName'].'</th></tr>';  

                    $analyze .= '<p>Much of Florida is situated on a peninsula between the Gulf of Mexico, the Atlantic Ocean, and the Straits of Florida. 
                        Its geography is marked by a coastline, by the omnipresence of water and the threat of hurricanes. Florida has the longest coastline in the contiguous United States, encompassing approximately 1,350 miles (2,170 km), and is the only state to border both the Gulf of Mexico and the Atlantic Ocean. 
                        Much of the state is at or near sea level and its terrain is characterized by sedimentary soils. 
                        The climate varies from subtropical in the north to tropical in the south.</p>';    
                }//end if
                if ($state['stateName'] == 'Colorado') {

                    $analyze .= '<tr><th>'.$state['formName'].', here is info for: '.$state['stateName'].'</th></tr>';  

                    $analyze .= '<p>Colorado is bordered by the northwest state of Wyoming to the north, the midwest states of Nebraska and Kansas to the northeast and east, on the south by New Mexico a small portion of the southern state of Oklahoma, on the west by Utah, and Arizona to the southwest. 
                        The four states of Colorado, New Mexico, Arizona, and Utah meet at one common point known as the Four Corners, which is known as the heart of the American Southwest. 
                        Colorado is one of only three U.S. states with no natural borders, the others being neighboring Wyoming and Utah. 
                        Colorado is noted for its vivid landscape of mountains, forests, high plains, mesas, canyons, plateaus, rivers, and desert lands.</p>'; 
                }//end if    
                if ($state['stateName'] == 'Texas') {

                    $analyze .= '<tr><th>'.$state['formName'].', here is info for: '.$state['stateName'].'</th></tr>';  

                    $analyze .= '<p>Due to its size and geologic features such as the Balcones Fault, Texas contains diverse landscapes that resemble both the American South and Southwest.
                        Although Texas is popularly associated with the Southwestern deserts, less than 10% of the land area is desert.
                        Most of the population centers are located in areas of former     prairies, grasslands, forests, and the coastline. 
                        Traveling from east to west, one can observe terrain that ranges from coastal swamps and piney woods, to rolling plains and rugged hills, and finally the           desert and mountains of the Big Bend.</p>'; 
                }//end if                       
                $analyze .= '</h1>';
                $analyze .= '<p><a href="testsad.php">Try again!</a></p>';

                return $analyze;
            }//end analyze()

            //page display

            if( empty ($_POST) )
            {
                echo display_form();

            }//end if
            else
            {
                echo display($_POST);
                echo display_form();
            }//end else

        ?> 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-25T01:35:34.107

```
$alreadyRan = false;

function something() {
    global $alreadyRan;

    if( $alreadyRan ) return;
    $alreadyRan = true;

    // do something
} 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-09-25T01:38:49.897

使用静态的，而不是全局的。保持在功能范围内 - 更安全。[http://php.net/manual/en/language.variables.scope.php](http://php.net/manual/en/language.variables.scope.php)

```
function RunOnce() { 
   static $ran = false; 

   if( $ran ) {
        // Already run;
   } else {
        $ran = true;
        // first run;  
   }
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-25T02:06:22.827

只需设置一个变量，该变量的值在函数运行时更改`false`为。`true`

所以它会是这样的：

```
$runbefore = false; // Initialize the variable
function foo() {
  global $runbefore;

  if ($runbefore == true) { // If it has been run,
    // Do stuff here if it has been run
  }
  // Do all your stuff here
  $runbefore = true; // tell the code it has been run, you must include this at the end
} 
```

如果您在页面重新加载（1 小时）后仍需要支持，请执行以下操作：

```
function foo() {
  if (isset($_COOKIE['runbefore']) && $_COOKIE['runbefore'] === true) { // the function has been run before
    // Do stuff
  }
  // Do all your stuff here
  setcookie('runbefore', true, time() + 3600);
} 
```

# haskell - 约束类型中的等式约束

> ID：12575117
> 
> 赞同：3
> 
> 时间：2012-09-25T01:32:19.327
> 
> 标签：haskell, types, type-kinds

我的问题是关于如何将等式约束放入关联的类型约束（即类型约束）

具体用例是一个由部分应用类型参数化的类：

```
class Foo c where -- c has kind *->*->*
  type Ctx c m r :: Constraint
  f :: (Ctx c m r) => c m r -> c m r 
```

在特定情况下，我想写：

```
data Bar m r = ...

instance Foo Bar where
   type Ctx Bar m r = (m~Maybe b) 
   -- m must be a Maybe, I don't care what its parameter is
   f = ... 
```

但是，GHC 抱怨：“不在范围内：类型变量 b”。我看不到任何其他方式来表达这种约束。并非每个实例都需要'm~Maybe b'，所以我不能将此约束移至 f 的类型签名。b 不在任何地方的实例范围内（也许这就是 GHC 所抱怨的），但没有必要这样做。功能

```
f :: (a ~ Maybe b) => a -> a -> a 
```

是有效的，我看不出为什么我不能用约束来做到这一点。顶级约束以及关联的类型约束都会出现此问题。

可能相关的是[这个](https://stackoverflow.com/questions/9622840/equality-on-constraints?rq=1)问题，除了我需要与不在范围内的变量相等。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-25T03:14:27.233

这是表达这种约束的另一种方式：

```
class IsMaybe m {- where ...whatever operations you need to do on Maybe values -}
instance IsMaybe (Maybe b) {- where ...implement those operations -}
instance Foo Bar where
    type Ctx Bar m r = IsMaybe m 
```

但是，鉴于 Haskell 命名约定，如果这实际上是您想要的，我会有点惊讶——`m`真的是 kind 类型变量`*`而不是 kind类型变量`* -> *`吗？如果是后者，您只需要

```
instance Foo Bar where
    type Ctx Bar m r = m~Maybe 
```

...并且可能是类声明中的一种注释`Foo`。

# java - 如何修改此 Java 程序以从命令行中指定的文件中读取名称？

> ID：12575118
> 
> 赞同：2
> 
> 时间：2012-09-25T01:32:34.513
> 
> 标签：java

现在我已经设置了这个程序，我可以在命令行中输入船只的名称，即 C:\java Proj3 "Boat 1" "Boat 2" "Boat 3" 并将结果打印到命令行基于眼镜。相反，我想在命令行 C:\java Proj3 "C:\class\Java\boatnames.txt" "C:\class\Java\results.txt" 中输入类似这样的内容，因此参数来自指定的文件结果打印在文本文件中，而不是在屏幕上。我将 println 更改为 printf，但到目前为止就是这样。我删除了所有其他失败的尝试。我什至尝试创建另一个名为 createfile.java 的类，它具有私有 Formatter x；和一些 openFile、closeFile 和 addRecords 方法，但是如果我将输出移到那里并尝试将其放入 addRecords 中，它不会

这是我的代码（我没有包含其他类，因为我需要做的就是将命令行中的 args 替换为命令行中 txt 文件中的 args）：

```
import java.util.*;
import java.io.*;
import java.lang.*;
import java.swing.*;

public class Proj3 {
    public static void main(String args[]) {

            Boat[] Boats;
        char   firstChar;
        char   secondChar;
        int    i;    

        Boats = new Boat[args.length];

        for (i = 0; i < args.length; i++) {

            firstChar = args[i].toUpperCase().charAt(0);
            secondChar = args[i].toUpperCase().charAt(1);

            if ((firstChar == 'B') || (firstChar == 'C') || (firstChar ==     'N')) {
                Boats[i] = new SailBoat();
            } else {
                Boats[i] = new RaceBoat();
            }

            Boats[i].setName(args[i]);

            if ((secondChar == 'A') || (secondChar == 'E')) {
            Boats[i].goFast();
            } else {
                Boats[i].goSlow();
            }
        }

        for (i = 0; i < args.length; i++) {
            System.out.printf("Boat number " + (i + 1) + " - \n");
            System.out.printf("   ");
            Boats[i].printBoat();
            System.out.printf("   ");
            Boats[i].whatIsBoatState();
        }

    }
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-25T01:52:46.307

Right now, the top-level program logic is contained in one monolithic `main()` method. To make life easier, you should break it down into logical pieces and implement each piece in a separate method. For instance, your `main()` method might look something like this:

```
public static void main(String[] args) {
    ArrayList<Boat> boats = getBoats(args[0]);
    PrintStream out = getOutputStream(args[1]);
    printBoats(boats, out);
    out.close();
} 
```

Then you need to write the support routines:

```
private ArrayList<Boat> getBoats(String inputFileName) {
    ...
}
PrintStream getOutputStream(String outputFileName) {
    ...
}
void printBoats(ArrayList<Boat> boats, PrintStream output) {
    ...
} 
```

You will probably have to make it all a little more complicated to deal with I/O exceptions (missing files, write permissions, etc.). You'll also have to modify the methods `Boat.printBoat()` and `Boat.whatIsBoatState()` to take a `PrintStream` argument.

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-09-25T01:47:43.640

最简单的方法是使用现有的库来读取文件。一个非常常用的库是[apache commons-io](http://commons.apache.org/io/)，它具有[`FileUtils.readLines()`](http://commons.apache.org/io/api-release/org/apache/commons/io/FileUtils.html#readLines%28java.io.File%29)实用程序方法。

```
import org.apache.commons.io.FileUtils;

// pass the filename is to your program on the command line

List<Sting> lines = FileUtils.readLines(new File(args[0]));
for (String line : lines) {
    // use "line" instead of args[i] in your current code
    ...
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-09-25T01:52:57.847

I've not tested this, but I've not tested it any great detail

```
public static void main(String[] args) {

    if (args.length == 2) {

        String inFileName = args[0];
        String outFileName = args[1];

        File inFile = new File(inFileName);
        if (inFile.exists()) {

            try {

                List<Boat> boats = new ArrayList<Boat>(25);

                // Read the "boats" file...
                BufferedReader br = null;
                try {

                    br = new BufferedReader(new FileReader(inFile));
                    String text = null;
                    while ((text = br.readLine()) != null) {

                        char firstChar = text.toUpperCase().charAt(0);
                        char secondChar = text.toUpperCase().charAt(1);

                        Boat boat = null;
                        if ((firstChar == 'B') || (firstChar == 'C') || (firstChar == 'N')) {
                            boat = new SailBoat();
                        } else {
                            boat = new RaceBoat();
                        }

                        boat.setName(text);

                        if ((secondChar == 'A') || (secondChar == 'E')) {
                            boat.goFast();
                        } else {
                            boat.goSlow();
                        }

                        boats.add(boat);

                    }

                } finally {
                    try {
                        br.close();
                    } catch (Exception e) {
                    }
                }

                BufferedWriter bw = null;
                try {

                    bw = new BufferedWriter(new FileWriter(outFileName, false));
                    for (int index = 0; index < boats.size(); index++) {

                        bw.write("Boat number " + (index + 1) + " - ");
                        bw.newLine();
                        bw.write("    " + boat.toString() + "    " + boat.getBoatState());

                    }

                    bw.flush();

                } finally {
                    try {
                        bw.close();
                    } catch (Exception e) {
                    }
                }

            } catch (IOException exp) {
                exp.printStackTrace();
            }

        }

    }

} 
```

The other problem is, you're going to need to provide some additional functionality to your `Boat` class

Namely, I used `boat.toString()` which needs to return the value `Boat.printBoat()` was printing and `boat.getBoatState()` which needs to return the value that `Boat.getBoatState()` was printing

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-09-25T01:42:56.960

按照这个

[java-将参数传递给main方法](https://stackoverflow.com/questions/8445853/java-passing-argument-into-main-method)

获取文件基不绝对路径并获取文件对象然后读取文件对象以获取内容。

# c - C基本字符串返回函数

> ID：12575123
> 
> 赞同：1
> 
> 时间：2012-09-25T01:33:32.997
> 
> 标签：c, string, function, pointers, methods

我对 C 还是很陌生。我仍然完全不了解指针的所有内容。我正在尝试创建一个返回字符串的方法。这是功能，它仍然不完整。

```
char getS(char *fileName){
    FILE *src;
    if((src = fopen(fileName, "r")) == NULL){
        printf("%s %s %s", "Cannot open file ", fileName, ". The program is now ending.");
        exit(-1);
    }
    char *get = " ";        
    //insert getting a random word here
    return(*get);
} 
```

我正在尝试调用这样的方法

```
char *article = getS("articles.txt");
char *noun = getS("nouns.txt");
char *verb = getS("verbs.txt"); 
```

编译器给了我这个：

```
error: invalid type argument of unary ‘*’ (have ‘int’) 
```

我该怎么办？

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2012-09-25T02:11:31.267

以下信息可能比您要查找的信息多得多。现在不要太担心吸收它，但你以后可能会需要它。

首先，关于术语的重要说明。C 没有“字符串”类型。引用 ISO C 标准：

> 字符串是由第一个空字符终止并包括第一个空字符的连续*字符*序列。[...]*指向字符串*的指针是指向其初始（最低地址）字符的指针。

特别是，一个`char*`值是一个指针，*而不是*一个字符串（尽管我们通常使用`char*`指针来访问和操作字符串）。即使一个数组本身也不是一个字符串，尽管它可以*包含*一个字符串。

对于您的（相对简单的）函数，`char*`您返回的值指向字符串文字的（第一个字符），因此内存管理不是问题。对于更复杂的情况，该语言坦率地说并不是特别有用，您必须自己做一些工作来管理内存。

一个函数可以很容易地返回一个`char*`指向字符串的值，允许调用者对这个字符串做它喜欢做的事情——但是组成这个字符串的字符存储在哪里呢？

有（至少）三种常见的方法。

(1) 函数返回一个指向*静态*数组开头的指针`char`：

```
char *func(void) {
    static char result[100];
    // copy data into result
    return result;
} 
```

这可行，但它有一些缺点。该数组只有一个副本`result`，连续调用`func()`将破坏该数组的内容。并且数组有固定的大小；它必须足够大以容纳它可以返回的最大字符串。标准 C`asctime()`函数以这种方式工作。

(2) 调用者可以传入一个指向字符串的指针，并让函数填充它：

```
void func(char *buffer) {
    // code to copy data into the array pointed to by buffer
} 
```

这给调用者带来了负担，它必须分配一个 的数组`char`，特别是必须知道它需要多大。

(3) 该函数可以使用以下方法为字符串分配内存`malloc()`：

```
char *func(void) {
    char *result = malloc(some_number);
    if (result == NULL) {
         // allocation failed, cope with the error
    }
    // copy data into the array pointed to by result
    return result;
} 
```

这样做的好处是函数可以决定它需要分配多少内存。但是调用者必须知道字符串是在堆上分配的，所以它可以稍后通过调用来释放它`free()`。`malloc()`and`free()`函数也可能相对昂贵（但不要担心，除非您确定程序的性能不够好）。

其实还有第四种方法，但是*错了*：

```
char *bad_func(void) {
    char result[100];
    // copy data into result
    return result; // equivalent to "return &result[0];"
} 
```

这里的问题是它`result`是函数本地的，并且没有定义为`static`，所以一旦函数返回，数组对象就不再存在。调用者将收到一个指向不再保留的内存的指针，并且可以在你背后重复使用。您可以返回指向本地`static`对象的指针（因为在程序的整个生命周期中都存在单个副本），您可以返回本地非对象的*值*`static`，但不能安全地返回本地非对象的*地址*`static`目的。

[comp.lang.c FAQ](http://www.c-faq.com/)是一个很好的资源。

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2012-09-25T01:37:52.003

您的函数应该返回一个 char *（一个字符串），而不是一个 char，并且它应该返回相同的值。所以函数变为：

```
char * getS(char *fileName) {
    FILE *src;
    if((src = fopen(fileName, "r")) == NULL) {
        printf("%s %s %s", "Cannot open file ", fileName, ". The program is now ending.");
        exit(-1);
    }

    char *get = " ";        
    //insert getting a random word here

    return get;
} 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-09-25T02:08:16.993

这完全取决于您的字符串是否具有恒定大小。通常人们对这些函数使用缓冲区参数，因为如果你在函数内部分配字符串内存空间，并返回一个指向它的指针，那么你必须释放函数外部的内存，如果不这样做，你会丢失内存引用导致内存泄漏。

所以返回字符串的函数的最佳方法是这样的：

```
void getS(char *fileName, char *output, size_t len)
{
    FILE *src;
    if((src = fopen(fileName, "r")) == NULL)
    {
        printf("Cannot open file '%s'. The program is now ending.", fileName);
        exit(-1);
    }
    fread(output, sizeof(char), len, src); // Just an example without error checking
    fclose(src);
} 
```

然后你会像这样使用它：

```
char content[512];
getS("example.txt", content, 512);
// From now, you can use 'content' safely 
```

或`malloc.h`用于动态分配：

```
char *content = (char *)malloc(512 * sizeof(char));
getS("example.txt", content, 512);
// Use 'content', and after using it, free its memory:
free(content); 
```

但是从那时起，您将学会正确使用它。但是，如果你想以任何方式返回一个文字字符串（这不是你的情况，除了你不完整的示例代码），你必须使用`char *`作为函数的返回类型，`return get;`而不是`*get`，因为`*get`你要返回一个字符（例如第一个），而不是指向字符串的指针。

FrankieTheKneeMan 的回答对您了解您返回的内容以及您的代码为何不起作用非常有用...

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-09-25T01:43:41.417

的类型`getS`是，`char`但您将其分配给类型的变量`char*`。大概你想`getS`返回一个字符串，所以它的类型应该是`char*`，你应该返回`get`而不是`*get`（这只是第一个字符`get`）。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-09-25T01:48:44.300

C 中的指针是一些其他信息的地址。C 带有两个一元运算符来处理这个问题。

```
* 
```

*取消引用*指针 - 或获取指向的内存空间的信息。

```
& 
```

获取您正在谈论的信息的地址，因此：

```
int p;
int* q = &p; //int* is a pointer to an it.

q==p; //Error (or at least a warning)
*q == p; //true
q == &p; //true
*q == &p; //ERROR
&q == &p; //false, but also probably an error, depending on your compiler and settings 
```

所以，当你声明你的 时`char * get`，你是在声明“一个指向字符的指针”——并且 C 知道按照惯例它可以被视为一个字符数组。但是，当您尝试 时`return * get`，C 认为您正在尝试将 char 返回到`get`.

因此，相反，`return get`您将返回您正在寻找的指针。

这是否为您揭开了万能指针的神秘面纱？

`malloc`（旁白：您可能希望`char *`避免指针被堆栈内存清除，但这完全是一个不同的问题）。

# iphone - 访问 plist 值返回 null

> ID：12575124
> 
> 赞同：0
> 
> 时间：2012-09-25T01:33:36.523
> 
> 标签：iphone, ios, plist, nsuserdefaults

我正在尝试访问我的 NSUserDefaults plist 中的 NSNumber Plist 条目。它最初设置为 0，但是当我尝试访问它以检查此值时，它返回为 null 并且 imi 不知道为什么。

这是我正在使用的代码

```
 // setup user defaults ready for use
    NSUserDefaults *prefs = [NSUserDefaults standardUserDefaults];

    // gets the current data base version stored in default prefs plist
    NSNumber *currentDataVersion = [prefs objectForKey: @"CurrentDBV"];

    // Check Current DataVersion
    NSLog(@"current dbv = %@", currentDataVersion); // logs (NULL) 
```

我在我的应用程序委托的 applicationDidBecomeActive 中使用此代码。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-25T04:37:27.837

**你在NSUserDefault**有你的选择：

```
 – setFloat:forKey:
 – setInteger:forKey:
 – setDouble:forKey: 
```

现在检索它：

```
 – floatForKey:
 – integerForKey:
 – doubleForKey: 
```

例如像这样：

```
[[NSUserDefaults standardUserDefaults] setFloat:3.15 forKey:@"key"];
float value = [[NSUserDefaults standardUserDefaults] floatForKey:@"key"];
NSLog(@"value: %.0f", value); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-25T01:39:02.097

试试这个 [prefs setObject:[NSNumber numberWithFloat:3.00] forKey:@"CurrentDBV"];

NSLog(@"当前 dbv = %f", [currentDataVersion floatValue]); // 日志 (NULL)

# jsp - 如何使用struts2显示等待或进度条

> ID：12575126
> 
> 赞同：0
> 
> 时间：2012-09-25T01:33:46.817
> 
> 标签：jsp, struts2, progress-bar

如何使用jsp、struts2显示进度条或等待页面？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-25T02:29:13.337

我相信[Execute and Wait Interceptor](http://struts.apache.org/2.3.4/docs/execute-and-wait-interceptor.html)是您正在寻找的，`ExecuteAndWaitInterceptor`它非常适合在后台运行长期存在的操作，同时向用户显示一个不错的进度表。这还可以防止 HTTP 请求在操作时间超过 5 或 10 分钟时超时。

看看下面的[代码](http://wiki.apache.org/struts/StrutsPleaseWait)，作者用一个详细的例子很好地解释了它，希望对你有所帮助。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-27T12:26:43.253

您可以使用 javascript 和 css 显示带有“等待消息”的 div。

# aviarc - Aviarc 工作流错误“CommandException：如果条件未产生布尔值：getArgument 返回 1”

> ID：12575128
> 
> 赞同：0
> 
> 时间：2012-09-25T01:34:03.400
> 
> 标签：aviarc

此 if 语句发生错误：

```
<if test="equal" value1="{$m.parent_id}" value2="{$var.tasks-menu-id}">
    <math:increment field="var.tasks-children"/>
</if> 
```

我已经仔细检查了数据集字段引用是否返回了正确的值，即使其中一个或两个值为空，测试也应该有效。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-25T01:34:03.400

“如果条件没有产生布尔值”错误实际上有点误导，因为我在`if`元素中设置测试的方式没有任何问题。[这是问题所在](http://dev.aviarc.com/docs/aviarc/reference/xml_commands/com.aviarc.base/1.3.0/if)：

> 如果在该条件下不需要任何操作，则可以省略`<then>`or子元素。`<else>`

该`if`命令需要其中一个或两个，`then`或者`else`作为其子级。在这种情况下，用作主体的命令`if`被视为条件，错误是由于它没有（布尔）返回值。

这有效：

```
<if test="equal" value1="{$m.parent_id}" value2="{$var.tasks-menu-id}">
    <then>
        <math:increment field="var.tasks-children"/>
    </then>
</if> 
```

# c# - 如何通过 WCF Web 服务序列化和发送 MailMessage？

> ID：12575131
> 
> 赞同：2
> 
> 时间：2012-09-25T01:34:23.013
> 
> 标签：c#, web-services, serialization, mailmessage

我想将 MailMessage 作为参数传递给我的 WCF Web 服务。问题是 MailMessage 不是可序列化的，并且它的许多属性（例如 MailAddress）也不是可序列化的。我如何序列化它？

我已经看到了通过将其用作包装类中的属性来序列化它的[教程](http://keyvan.io/how-to-serialize-a-mailmessage)，但这并不能帮助我通过 WCF 发送它，因为 MailMessage 属性没有显示在客户端（因为它不可序列化） . 我不想只发送基本的字符串值（to、from、body）。我想发送整个 MailMessage 及其所有属性。我怎样才能做到这一点？

**更新：**

我认为使用 Web 服务和序列化 MailMessage 类根本不值得。序列化类确实有效，但它们的许多方法/构造函数在 WCF 客户端/消费者上不可用。所以我不得不重新编写代码以在客户端从常规类（例如MailMessage）转换为序列化类（例如SerializedMailMessage）。

我决定使用 EmailHelper 创建一个类库，并使用调用应用程序的配置来确定 SMTP 设置。

```
SmtpSection smtpConfig = ConfigurationManager.GetSection("system.net/mailSettings/smtp") as SmtpSection;
if (smtpConfig != null) {
    // extract values to your SmtpClient
} 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-09-25T20:31:39.387

我必须制作MailMessage 类的Serializeable 版本，并为它的每个属性（例如MailAddress、Attachment...）制作Serializeable 类。

幸运的是，我发现这个免费的开源代码（Composite C1 Contrib by burn ice）已经完成了所有这些：

[源代码](https://bitbucket.org/burningice/compositec1contrib/src/bce3ed2614bb/Email/Serialization)

[许可证详情](http://compositec1contrib.codeplex.com/license)

# ruby-on-rails - RoR：如何只搜索具有特定属性的微博？

> ID：12575140
> 
> 赞同：0
> 
> 时间：2012-09-25T01:35:14.150
> 
> 标签：ruby-on-rails, ruby-on-rails-3, railscasts

现在在 app/views/microposts/home.html.erb 我有..

```
<% form_tag purchases_path, :method => 'get', :id => "products_search" do %>
  <p>
    <%= text_field_tag :search, params[:search] %>
    <%= submit_tag "Search", :name => nil %>
  </p>
<% end %>

<% form_tag sales_path, :method => 'get', :id => "sales_search" do %>
      <p>
        <%= text_field_tag :search, params[:search] %>
        <%= submit_tag "Search", :name => nil %>
      </p>
    <% end %> 
```

然后在 micropost.rb 我有

```
scope :purchases, where(:kind => "purchase")
  scope :sales, where(:kind => "sale")

 def self.search(search)
    if search
      where('name LIKE ?', "%#{search}%")
    else
      scoped
    end
  end 
```

然后最后在 microposts_controller.rb 我有

```
 def home

    @microposts=Micropost.all
    @purchases=@microposts.collect{ |m| m if m.kind == "purchase"}.compact
    @sales=@microposts.collect{ |m| m if m.kind == "sale"}.compact

  end 
```

编辑：

我也尝试过使用

```
def home

    @microposts=Micropost.all
    @purchases=@microposts.purchases
    @sales=@microposts.sales

  end 
```

相反，但随后它给了我错误未定义的方法“购买”#

无论如何，

现在使用 .collect 方法时，我收到一个错误，提示未定义的局部变量或方法“purchases_path”，它对 sales_path 也是如此。

我想要的是有两个搜索表单。在我的微博表中，我有一个名为 kind 的列，可以是“购买”或“销售”。如何更改我的代码，以便一个搜索表单仅搜索并显示具有“购买”类型的微博的结果。然后另一个搜索并仅显示那些带有“销售”类型的微博的结果

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-28T16:20:34.573

根据您对另一个回复的评论：

```
def home
  @microposts = Micropost.scoped # so you can later apply any scope
  if params[:purchases_search].present?
    @microposts = @microposts.purchases.search(params[:purchases_search])
  elsif params[:sales_search].present?
    @microposts = @microposts.sales.search(params[:sales_search])
  end
end 
```

这假设两个搜索字段的名称是“purchases_search”和“sales_search”。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-27T04:50:35.430

假设假设 '/microposts/home' 如果映射到 MictropostsController#home **app/views/microposts/home.html.erb**

```
<%= form_tag('/microposts/home', :method => :get) do
 <%= text_field_tag 'kind'%>
 <%= submit_tag 'Search' %>
%> 
```

**/app/controllers/microposts_controller.rb**

```
def home
  kind = params[:kind]
  if kind.present?
    # if search parameter passed
    @microposts = Micropost.where(:kind => kind)
  else
    # if search parameter not passed, list all micro post
    @microposts = Micropost.all
  end
end 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-02T14:07:19.520

为什么不将微博拆分为两个继承微博模型的新模型？

```
class Micropost < ActiveRecord::Base

  #do your general micropost magic here

end 
```

下一个：

```
class Purchase < Micropost

  #do your purchase specific magic here

end 
```

和：

```
class Sale < Micropost

  #do your sale specific magic here

end 
```

您的家庭行动：

```
def home

  @microposts = Micropost.all
  @purchases = Purchase.all
  @sales = Sale.all

end 
```

如果您需要搜索购买：

```
Purchase.where(:something => "great") 
```

如果您需要搜索销售：

```
Sale.where(:something => "greater") 
```

如果您需要同时搜索：

```
Micropost.where(:something => "the greatest") 
```

** 注意 ** 您需要在 microposts 表中添加一个“类型”列才能使用，更多信息：单表继承@http [://api.rubyonrails.org/classes/ActiveRecord/Base.html](http://api.rubyonrails.org/classes/ActiveRecord/Base.html)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-09-25T03:25:12.590

```
def home
  @microposts = Micropost.all
  @purchases = Micropost.search("purchase", params[:search])
  @sales = Micropost.search("sale", params[:search])
end

def self.search(kind = nil, search = nil)
  results = self.where(:kind => kind) if kind
  results = self.where('name LIKE ?', "%#{search}%") if name
end 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-09-27T02:30:53.823

好的，所以你有一个 sales_path 和一个 purchase_path，所以我假设它们都通向一个具有销售和购买操作的控制器

```
def sales
  @search = params[:search]
  @microposts = Micropost.search(@search).sales
end

def purchases
  @search = params[:search]
  @microposts = Micropost.search(@search).purchases
end 
```

该`Micropost.search`方法将返回一个范围。因此，我们将在该范围内调用#sales 或#purhases，这会将条件附加到查询中。

更新

看起来您想从 1 个表单中搜索两种不同类型的微博。

应用程序/views/home/index.html.erb

```
<%= form_tag(root_path, :method => :get) do
 <%= text_field_tag 'search'%>
 <%= submit_tag 'Search' %>
%> 
```

应用程序/模型/micropost.rb

```
scope :purchase_or_sale, where("kind IN ?", ["purchase", "sale"])
def self.search(search)
  if search
    where('name LIKE ?', "%#{search}%")
  else
    scoped
  end
end

def purchase?
  kind == "purchase"
end

def sale?
  kind == "sale"
end 
```

/app/controllers/home_controller.rb

```
def home
  @microposts = Micropost.search(params[:search]).purchase_or_sale
  @purchases = @microposts.select(&:purchase?)
  @sales = @microposts.select(&:sale?)  
end 
```

更新 2

好的，还有一个更新......这就是我认为你现在想要的：2 个搜索表单，都是 /microposts......如果我在销售表单上搜索，它将显示销售。如果我在购买表格上搜索，它将搜索购买。

你的看法：

```
<%= form_tag(microposts_path(kind: "purchases", :method => :get) do
 <label for="search">Search Purchases:</label>
 <%= text_field_tag 'search' %>
 <%= submit_tag 'Search' %>
%>

<%= form_tag(microposts_path(kind: "sales", :method => :get) do
 <label for="search">Search Sales:</label>
 <%= text_field_tag 'search' %>
 <%= submit_tag 'Search' %>
%> 
```

你的控制器：

```
def index
  @microposts = Micropost.search(params[:search).for_kind(params[:kind])
end 
```

你的模型

```
def self.search(search_text)
  if search_text
    where('name LIKE ?', "%#{search_text}%")
  else
    scoped
  end
end

scope :for_kind, lambda{|search_kind| where(kind: search_kind) } 
```

# c++ - 如何在 C++ 上的一些缺失像素中填充最近邻像素这是我的代码

> ID：12575147
> 
> 赞同：2
> 
> 时间：2012-09-25T01:36:18.457
> 
> 标签：c++, opencv, kinect

```
int depth_i=1,depth_j=1;
for(depth_i=1;depth_i<DepthShow.rows;depth_i++)
    {
        unsigned char * pixel_depth = DepthShow.ptr<unsigned char>(depth_i);

        for(depth_j=1;depth_j<DepthShow.cols;depth_j++)
            {
            if(pixel_depth[depth_j]==0) //*
                        pixel_depth[depth_j]=500;   //*
            }
    } 
```

我在注释行中使用 kinect 传感器和 opencv //* 如果缺少 1*1 像素，则填充值 500。我想用最近邻像素而不是 500 填充。

有人帮我在 C++ 上应用最近邻像素

# angularjs - Angularjs E2E 场景测试是否可以访问 GET 参数？

> ID：12575149
> 
> 赞同：0
> 
> 时间：2012-09-25T01:37:21.187
> 
> 标签：angularjs, jasmine, angularjs-e2e

我正在使用`runner.html`E2E 测试文件对 Angular 项目进行集成测试。

```
//In runner.html
<script src="scenarios.js"></script>

//In this scenarios.js file, we have some code like this: 
describe('App', function() {
  pauseAll = false;
  it('Testing index.html', function() {
      ....
      if (pauseAll) pause();
  }); 
```

当我们想要手动查看测试期间正在加载的每个页面时，此 javascript 代码允许我们仅更改`pauseAll`文件顶部的变量。

我的问题：如果 GET 参数 pauseAll 是通过 runner.html url 传入的，如何使 pauseAll 等于 true？例如：

```
../test/e2e/runner.html?pauseAll=true 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-25T03:57:04.750

一样容易

```
pauseAll = window.location.search.replace( "?pauseAll=", "" ); 
```

# iphone - 如何在 XCode 4.5 中测试 iOS 4 应用程序？

> ID：12575160
> 
> 赞同：2
> 
> 时间：2012-09-25T01:39:16.860
> 
> 标签：iphone, ios, xcode, xcode4

我的一些 iPhone 用户仍然使用 iOS 4.3，我如何在 iOS 模拟器上测试我的应用程序，因为最新的 XCode 版本 4.5 没有 iOS 4？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-25T01:45:21.620

注意：根据对此答案的评论，这似乎不适用于山狮。

1.  转到 XCode 首选项
2.  转到“下载”选项卡
3.  单击“iOS 4.3 模拟器”旁边的安装
4.  iOS 4.3 模拟器选项应该添加到您的设备中。

:)

![4.3 SCode 4.5 中的模拟器](../Images/fbca3aef81a43061f429aa59745a8026.png)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-25T05:05:30.793

无法在 xcode 4.5 中安装 iOS4，如果您需要安装 iOS4 模拟器，请下载旧版 xcode 并将其安装在单独的文件夹中。

# clojure - 在保持原始值的情况下，解构 Clojure 函数的参数。

> ID：12575161
> 
> 赞同：26
> 
> 时间：2012-09-25T01:39:25.463
> 
> 标签：clojure, destructuring

您可以解构函数参数但仍然可以使用原始参数吗？我现在这样做的方式只是`let`在函数体内使用一个表单，但我想知道是否有更简洁的方法。

* * *

## 回答 #1

> 赞同：32
> 
> 时间：2012-09-25T01:54:52.967

似乎也`:as`适用于函数：

和`vector`

```
(defn test [[x y :as v]]
  {:x x :y y :v v})

(test [1 2 3 4])
=>  {:x 1 :y 2 :v [1 2 3 4]} 
```

和`hash-map`

```
(defn test2 [{x :x y :y :as m}]
    {:x x :y y :m m})

(test2 {:x 1 :y 2 :z 3})
=> {:x 1 :y 2 :m {:x 1 :y 2 :z 3}} 
```

看到这个了不起的博客文章：[http ://blog.jayfields.com/2010/07/clojure-destructuring.html](http://blog.jayfields.com/2010/07/clojure-destructuring.html)

# python - 无法使用 Django 在评估的查询集中按索引修改对象

> ID：12575164
> 
> 赞同：0
> 
> 时间：2012-09-25T01:40:22.837
> 
> 标签：python, django, django-queryset

我通过将序数分配给 来管理`Documents`a的顺序，这是表示 a和 a交集的模型。这是我这样做的一个地方（这是在一个方法中）：`Collection``DocumentMemberships``Document``Collection``Collection`

```
memberships = self.membership_set.order_by('document__title', 'document__revision').all()
for i in range(memberships.count()):
    if memberships[i].document.category == 'SDS': 
        memberships[i].ordinal = i + 1000 # push documents in the 'SDS' category to the end
    else: memberships[i].ordinal = i # leave the rest ordered by title and then revision
    memberships[i].save() 
```

但是，当我`DocumentMemberships`在运行此代码后在管理界面中检查时，所有序数都为零（该字段的默认值）。

我将问题追溯到 QuerySet 中的对象在被索引访问时没有被正确修改。这是一个更清楚地说明问题的 shell 会话：

```
>>> memberships = s.membership_set.order_by('document__title', 'document__revision').all()
>>> memberships.all()
[large number of DocumentMembership objects]
>>> memberships[0]
[DocumentMembership object]
>>> memberships[0].ordinal = 2
>>> memberships[0].ordinal
0 
```

在进一步处理之前，序数必须完全计算为整数，所以我不能简单地迭代它。我错过了什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-25T04:00:11.307

问题是，当您使用索引从查询集中获取对象时，您获取的对象是原始对象的副本，因此您正在修改查询集中“内部”的对象副本。

如果你这样做：

```
m = memberships[0]
m is membership[0] 
```

你得到`False`结果。

试试[这个](https://stackoverflow.com/a/1042664/1029019)。也许这可以帮助您解决使用查询集中对象的索引来更新它的属性的问题。

希望能帮助到你！

# php - XAMPP 和 Notepad++ 上的 Xdebug 无法连接

> ID：12575166
> 
> 赞同：4
> 
> 时间：2012-09-25T01:40:28.043
> 
> 标签：php, xampp, xdebug

我有一个来自其他人的非常慢的脚本，我需要对其进行分析以加快速度，我已经遵循了许多教程，但是它一直指向相同的步骤。

[通过将 phpinfo 复制到 Xdebug 的网站 find_binary.php 搜索功能](http://xdebug.org/wizard.php)中，我已经从 xDebug 的网站下载了适当的二进制文件。

我有一个看似正确的设置。

Notepad++ (NPP) 配置为使用指定的 IDE 密钥通过 127.0.0.1:9000 连接到 Xdebug。

以下是特定于 xdebug 的 php.ini 部分。

```
[xdebug]
zend_extension_ts="C:\xampp\php\ext\php_xdebug.dll"
xdebug.remote_enable=1
xdebug.remote_host=localhost
xdebug.remote_port=9000
xdebug.remote_handler=dbgp 
```

我正在使用 PHP 5.4.4。

我的 phpinfo 输出没有提到 Xdebug。

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-10-02T07:36:43.187

对于**php5.3 及更高版本的 Windows，**您需要在 php.ini 文件中使用`zend_extension`而不是。`zend_extension_ts`

例子

```
zend_extension="C:\xampp\php\ext\php_xdebug.dll" 
```

如果您使用 xdebug 向导[http://xdebug.org/wizard.php](http://xdebug.org/wizard.php)并收到此消息 **Xdebug 仅作为 PHP 扩展加载，而不是作为 Zend 扩展加载** 这是因为使用了 zend_extension_ts（我认为）。

**还有一点需要注意。**

如果您不在正在测试的代码中设置断点，您将不会在记事本中看到任何内容。它运行得如此之快，以至于它看起来好像不起作用（如果你仔细观察，notepad plus 会闪烁）。我花了很长时间才意识到这一点。

**第三**

[我建议从http://xdebug.org/download.php](http://xdebug.org/download.php)为您的系统下载最新的 xdebug.dll

**xdebug 自 [2012-05-08] 以来仅与 php 5.4 兼容**- Xdebug 2.2.0 最新版本是 Xdebug 2.2.1

我还建议使用来自[http://sourceforge.net/projects/npp-plugins/files/DBGP%20Plugin/的最新版本的 DBDG 插件（notepad plus 需要此文件才能与 Xdebug 一起使用）](http://sourceforge.net/projects/npp-plugins/files/DBGP%20Plugin/)

**另一件事**

**编辑：**刚刚注意到您使用 XAMPSERVER，但我会​​留下它，以防它对其他人有用。如果您使用的是 wampserver 2.2，则预先安装了 xdebug。如果您稍后再次手动安装 xdebug 并设法安装了 2 个版本或类似的东西，这可能会导致问题。

**我最后一个用于 xdebug 的 php.ini 文件**

请注意我的上一个版本正在运行，尽管速度很慢。在 php.ini 中，我将 ide 设置为 xdebug，但我可以将其命名为任何我想要的会话名称，并且它有效。您可能不需要我在下面发布的所有信息，您很可能需要更改文件路径和文件名。我用的是D盘。

```
[xdebug]

;for windows with php5.3 and up you need to use zend_extension instead of zend_extension_ts
zend_extension="D:\wamp\bin\php\php5.4.3\ext\php_xdebug-2.2.1-5.4-vc9-x86_64.dll"
xdebug.remote_autostart=on
xdebug.profiler_output_dir = "d:/wamp/tmp/xdebug"
xdebug.profiler_output_name = "cachegrind.out.%p"
xdebug.profiler_enable = 1
xdebug.profiler_append=0
xdebug.extended_info=1
xdebug.remote_enable=1
xdebug.remote_handler=dbgp
xdebug.remote_mode=req
xdebug.remote_host=127.0.0.1
xdebug.remote_port=9000
xdebug.idekey=xdebug
xdebug.remote_log="d:/wamp/tmp/xdebug/xdebug_remot.log"
xdebug.show_exception_trace=On
xdebug.show_local_vars=9
xdebug.show_mem_delta=0
xdebug.trace_format=0 
```

![在此处输入图像描述](../Images/553cdc5f85f27f8bb84da85308208567.png)

**最后**

不要忘记`?XDEBUG_SESSION_START=sessionname`在要测试的代码的 url 地址末尾使用。

例子

```
http://localhost/codetotest.php?XDEBUG_SESSION_START=xdebug 
```

在进行任何更改后还要重新启动服务器的服务，否则它们将不会生效。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-07-30T03:42:28.600

对于 Windows 8，最近的 xamp php 5.5 确保你有 VC11 和 xdebug dll：php_xdebug-2.2.3-5.5-vc11.dll，并插入上述 php.ini 修复，将 d:dir 替换为 c:path到你的 xamp。用 127... 替换 localhost 似乎很重要。

# hibernate - 子查询在休眠中返回超过 1 行

> ID：12575170
> 
> 赞同：1
> 
> 时间：2012-09-25T01:41:30.387
> 
> 标签：hibernate

我正在执行这个方法。

```
@Override
public Page<User> searchUsers(String name, int userTypeDefId, int accountTypeDefId,
        final PageSetting pageSetting) {
    HibernateCallback<Page<User>> hibernateCB = new HibernateCallback<Page<User>>() {

        @Override
        public Page<User> doInHibernate(Session session) throws HibernateException,
                SQLException {
            Criteria c = session.createCriteria(User.class);
            DetachedCriteria dc = DetachedCriteria.forClass(UserType.class);
            dc.setProjection(Projections.property("user"));
            c.add(Subqueries.propertyEq(UserField.id.name(), dc));
            c.addOrder(Order.asc(UserField.userName.name()));
            Page<User> ret =  getAll(c, pageSetting);
            for (User user : ret.getData()) {
                getHibernateTemplate().initialize(user.getUserAccountTypes());
                getHibernateTemplate().initialize(user.getUserTypes());
            }
            return ret;
        }
    };
    return getHibernateTemplate().execute(hibernateCB);
} 
```

我有这个错误：

```
java.sql.SQLException: Subquery returns more than 1 row. 
```

我是这种编程语言的新手，我对如何解决这个错误没有足够的想法。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-25T09:37:33.850

我不知道您为什么要为此使用 Criteria 和子查询，因为它比简单的 HQL 查询更具可读性。这是等效的 HQL 查询：

```
select u from User u 
where u.id = (select userType.user from UserType userType)
order by u.name asc 
```

实际上，您会看到此查询无效：

*   将 ID 与用户进行比较无效
*   子查询按 UserType 返回所有用户引用，因此将一个用户 ID 与 N 个用户进行比较是无效的。

我不知道您的查询应该返回什么，因此很难修复代码。如果查询的目标是返回 UserType 引用的所有用户，我会使用这个简单的 HQL 查询：

```
select distinct user from UserType userType 
inner join userType.user user
order by user.name 
```

# ios - UIViewControllerHierarchyInconsistency - 一个视图一次最多只能有一个视图控制器

> ID：12575176
> 
> 赞同：3
> 
> 时间：2012-09-25T01:42:16.113
> 
> 标签：ios, xcode, ios6

我在更新我的一个旧应用程序时遇到问题，这只是因为我更新到 Xcode 4.5 并在 iOS6 上尝试它给出了以下错误；

```
*** Terminating app due to uncaught exception 'UIViewControllerHierarchyInconsistency', reason: 'A view can only be associated with at most one view controller at a time! View <MainView: 0x1e818620; frame = (0 0; 320 476); autoresize = RM+BM; layer = <CALayer: 0x1e818750>> is associated with <MainViewController: 0x1e811850>. Clear this association before associating this view with <UIViewController: 0x21149860>.' 
```

***第一掷调用堆栈：（0x377d82a3 0x35ae897f 0x377d81c5 0x38b0dd7b 0x38b0dc6b 0x1dc25 0x38b940ad 0x38b9405f 0x38b9403d 0x38b938f3 0x38b93de9 0x38abc5f9 0x38aa9809 0x38aa9123 0x37c5c5a3 0x37c5c1d3 0x377ad173 0x377ad117 0x377abf99 0x3771eebd 0x3771ed49 0x37c5b2eb 0x38afd301 0x1bf03 0x1bea8）的libc ++ abi.dylib：终止叫做抛出异常[切换处理9219线程0x2403]

我认为这是导致问题的原因；

```
 mailComposer = [[UIViewController alloc] init];
[mailComposer setView:self];
[mailComposer setModalTransitionStyle: UIModalTransitionStyleCoverVertical];

MFMailComposeViewController *picker = [[MFMailComposeViewController alloc] init];   picker.mailComposeDelegate = self; 
```

就像当我单击应该将我带到 MFMail 作曲家的按钮时，应用程序崩溃时一样。

有任何想法吗？

提前致谢

编辑 - 如果我删除前 3 行，应用程序不会崩溃，但是邮件视图不会加载......这是整个代码；

```
 // The actual mail window call

mailComposer = [[UIViewController alloc] init];
[mailComposer setView:self];
[mailComposer setModalTransitionStyle: UIModalTransitionStyleCoverVertical];

MFMailComposeViewController *picker = [[MFMailComposeViewController alloc] init];   picker.mailComposeDelegate = self;

[picker setSubject:@"Hello How are you"];

    // Fill out the email body text
NSString *pageLink = @"http://www.apple.com"; 
NSString *iTunesLink = @"http://itunes.apple.com/gb/artist/randomer";
NSString *content = @"blah blah"; 

NSString *emailFileName = [NSString stringWithFormat:@"email_.html"];

NSString *emailFilePath = [[[NSBundle mainBundle] resourcePath] stringByAppendingPathComponent: emailFileName];
NSString *body = [NSString stringWithContentsOfFile:emailFilePath encoding:NSUTF8StringEncoding error:nil];

body = [body stringByReplacingOccurrencesOfString:@"//TEXT_PLACEHOLDER//" withString:@"replace here"];
body = [body stringByReplacingOccurrencesOfString:@"//FRIENDNAME_PLACEHOLDER//" withString:pageLink];
body = [body stringByReplacingOccurrencesOfString:@"//ITUNES_PLACEHOLDER//" withString:  iTunesLink];
body = [body stringByReplacingOccurrencesOfString:@"//PASSKEY_PLACEHOLDER//" withString:  yourPassword];
body = [body stringByReplacingOccurrencesOfString:@"//PHONETIC_PLACEHOLDER//" withString:  yourPhoneticPassword];

[picker setMessageBody:body isHTML:YES];    
picker.navigationBar.barStyle = UIBarStyleBlack;    
[mailComposer presentModalViewController:picker animated:YES];
[picker release]; 
```

}

```
//HANDLE THE MAIL EVENTS
//////////////////////// 
```

*   (void)mailComposeController:(MFMailComposeViewController*)controller didFinishWithResult:(MFMailComposeResult)result error:(NSError*)error { // 通知用户与界面开关相关的错误 (result) { case MFMailComposeResultCancelled: break; case MFMailComposeResultSaved: break; case MFMailComposeResultSent: break; 案例 MFMailComposeResultFailed: 中断；

    ```
    default:
    {
        UIAlertView *alert = [[UIAlertView alloc] initWithTitle:@"Email" message:@"Sending Failed - Unknown Error :-("
                                                       delegate:self cancelButtonTitle:@"OK" otherButtonTitles: nil];
        [alert show];
        [alert release];
    }

        break; 
    ```

    } [mailComposerdismissModalViewControllerAnimated:YES]; //[mailComposer.view.superview removeFromSuperview]; }

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-04T12:14:41.930

让邮件撰写视图控制器显示的主要内容是使用当前活动的 UIViewController 来显示它。您没有共享足够的代码以使我清楚这一点，但是如果`self`在该上下文中是 UIViewController ，则您需要执行以下操作：

```
[self presentViewController:picker animated: YES completion:nil]; 
```

如果`self`不是 UIViewController，`self`则在上面的代码中替换为引用当前 UIViewController 的变量。

# javascript - 简单折线图 - 动态调整大小

> ID：12575178
> 
> 赞同：1
> 
> 时间：2012-09-25T01:42:24.040
> 
> 标签：javascript, d3.js

我正在使用 d3.js[简单线图](http://bl.ocks.org/2579599)示例，并且想知道如何动态调整 x 和 y 轴的域，以便如果数据更新，可以调整图表以适应新线。这是设置这些域的当前代码（我认为）。

```
var x = d3.scale.linear().domain([-15, 15]).range([0, w]);

var y = d3.scale.linear().domain([0, 120]).range([h, 0]); 
```

目前，域值是任意的。变量 w 和 h 是 svg 元素的宽度和高度。

任何帮助，将不胜感激。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-25T13:19:11.260

我首先将域的下限和上限设置为动态值，根据您的数据集计算得出。根据结构或您的数据，d3 具有计算值数组中的最大值/最小值的方法`max`。`min`

```
var x = d3.scale.linear().domain([d3.min(data), d3.max(data)]).range([0,w]); 
```

如果你有一些方法来更新你的数据，你可以添加功能然后重新定义`x`（你可能想附加`x`到某种命名空间，在你的函数的整个范围内都可以访问），然后调用你的行生成器（通过`d3.svg.line()`）。

### 更新

看到你的评论，让我澄清一下。

有几种不同的方法可以做到这一点，因为 d3 是一个如此低级的库（我个人认为这是吸引力的一部分）。在我自己的工作中，我使用了多个系列，这让我可以方便地使用常见的*进入、更新和退出*模型，这些模型与其他图表类型（如条形图）一起使用。但在最基本的条件下，这就是您需要的：

1.  您最初需要设置几个对象：
    *   你的 SVG 容器
    *   你的 x 和 y 比例
    *   线生成器，不绑定任何数据

2.  接下来，您将使用该行生成器`SVG:path`使用您的数据集初始化一个元素
3.  然后您需要创建一种方法来更新您的`SVG:path`元素并使用新数据进行缩放

这是一个演示这一点的[jsfiddle](http://jsfiddle.net/mbeasley183/DbXhL/)，每秒钟添加新的随机数据，持续 10 秒。

# arrays - 从 Matlab 中的单元格数组中获取唯一行

> ID：12575182
> 
> 赞同：2
> 
> 时间：2012-09-25T01:42:59.167
> 
> 标签：arrays, matlab, unique, cell

我在 Matlab 中有一个 Nx4 单元数组，它看起来像这样：

```
id1 word11 word12 word13
....
id2 word21 word22 word32
....   
idN wordN1 wordN2 wordN3 
```

其中四列中的每一列都包含一个字符串，第二列`(word11... wordN1)`可以有重复的值。我想获得另一个单元格数组，但根据第二列具有唯一的行。因此，在前面的示例中，如果`word21`与 wordN1 相同，则结果数组应仅包含以下两行（无论选择哪一行重复项都无关紧要）：

```
id1 word11 word12 word13    
....    
idN wordN1 wordN2 wordN3 
```

我试过`unique(cellArray{2})`了，但它只返回具有唯一值的第二列，我想要整行。我怎样才能做到这一点？

谢谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-25T01:52:33.540

我相信以下应该做到这一点：

```
Z = {'a', 'b'; 'a', 'c'; 'a', 'c'; 'a', 'd'; 'a', 'b'};
[~, I1] = unique(Z(:, 2));
I1 = sort(I1);
Soln = Z(I1, :); 
```

一个解释？我使用可选的附加参数`unique`来获取第二列中唯一元素的索引。我然后`sort`这个索引，以便我们可以保留原始排序`Z`。最后，我检索由`Z`索引的行`I1`。

请注意，实际上保留原始顺序而不是对其进行排序有点不直观`sort`：-) 原因是它`I1`包含唯一元素的行索引。因此对它进行排序会按从小到大的顺序返回行索引，从而保留 中的原始顺序`Z`。

# oracle10g - 分层查询和计数兄弟姐妹？

> ID：12575185
> 
> 赞同：3
> 
> 时间：2012-09-25T01:43:16.317
> 
> 标签：oracle10g, hierarchical

我在这个网站和其他网站上查看了几个不同的答案，但我没有多少运气弄清楚如何在分层查询中计算兄弟姐妹。

我正在使用 Oracle 10g。

```
SELECT LEVEL, last_name||', '||first_name AS Manager, count(employee_id)
FROM employees
START WITH manager_id IS NULL
CONNECT BY PRIOR employee_id = manager_id
GROUP BY level 
```

这将返回 4 个级别和大约 80 名员工。我想将 2 级以下的兄弟姐妹的数量加起来，而不是全部列出。但是，我在试图弄清楚它时遇到了困难。

对正确的方式有任何推动吗？谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-25T06:24:57.337

这将计算每个员工在级别 1 和 2 的后代数量：

```
SELECT employee_id, manager_id, full_name, emp_level
    ,(
        SELECT COUNT(*)
        FROM employees
        START WITH employees.manager_id = employees2.employee_id
        CONNECT BY prior employee_id = manager_id
    ) descendents
FROM
(
    SELECT employee_id, manager_id, last_name||', '||first_name full_name, LEVEL emp_level
    FROM employees
    START WITH manager_id IS NULL
    CONNECT BY PRIOR employee_id = manager_id
) employees2
WHERE emp_level <= 2; 
```

# php - PHP：Tinymce“样式”不保存更改

> ID：12575189
> 
> 赞同：0
> 
> 时间：2012-09-25T01:43:40.467
> 
> 标签：php, sql, tinymce

我遇到了最近才开始出现的 Tinymce 问题。我有一个带有 Tinymce 的 PHP 页面。当我单击提交按钮将更改保存到 TinyMCE 时，它不会保存样式 - 字体大小、粗体、图像等，而只会保存文本。它将它插入到我的 SQL 数据库中。

我觉得这与 p 标签有关，因为在问题发生之前，所有提交的文本都包含在 p 标签中，而现在不是。

我不知道有什么问题！文本没有使用 filter() 之类的东西插入，所以没有 PHP 字符串会出错。

Tinymce 标头：

```
 <script type="text/javascript">
tinyMCE.init({
        theme : "advanced",
        mode : "exact",
        plugins : "emotions,spellchecker,fullscreen",
        theme_advanced_buttons1 : "bold,italic,underline,strikethrough,separator,justifyleft, justifycenter,justifyright,justifyfull,separator,fontsizeselect,fontselect,styleselect,forecolor,backcolor,image, separator,blockquote,link,emotions,spellchecker,fullscreen",
        theme_advanced_buttons3_add : "fullpage",
        editor_selector :"mceEditor",
        elements : "tinyMCE",

    skin : "o2k7",
    skin_variant : "silver",

});
</script> 
```

附有 Tinymce 的文本框：

```
<td><textarea name="signature" align="left" style="width:760px;height:50px;" id="tinyMCE"><?php echo $lolassoc['signature']; ?></textarea></td> 
```

插入数据库的 PHP 查询（post['signature'] 部分使用 tinymce.

```
mysql_query("UPDATE users SET block_newfriends='$_POST[block_newfriends]', details='".clean($_POST['details'])."', accept_trading='clean($_POST[accept_trading])', hide_online='clean($_POST[hide_online])', signature='".$_POST['signature']."' WHERE id = '" . USER_ID . "'");
header("Location: ".WWW."/identity/settings"); 
```

如果您需要更多说明，请告诉我。谢谢！:)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-25T03:03:22.807

改变

```
mysql_query("UPDATE users SET block_newfriends='$_POST[block_newfriends]', details='".clean($_POST['details'])."', accept_trading='clean($_POST[accept_trading])', hide_online='clean($_POST[hide_online])', signature='".$_POST['signature']."' WHERE id = '" . USER_ID . "'"); 
```

到

```
mysql_query("UPDATE users SET block_newfriends='$_POST[block_newfriends]', details='".clean($_POST['details'])."', accept_trading='".clean($_POST[accept_trading])."', hide_online='".clean($_POST[hide_online])."', signature='".$_POST['signature']."' WHERE id = '" . USER_ID . "'"); 
```

请浏览文档 [http://www.tinymce.com/wiki.php/Configuration%3avalid_children](http://www.tinymce.com/wiki.php/Configuration%3avalid_children)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-28T01:12:31.807

找了好久，才发现问题所在。这与 TinyMCE 无关，它是我的一个配置文件中的一个奇怪的脚本！感谢所有的帮助家伙！

# java - jTDS JDBC 驱动程序：getNString() 抛出错误

> ID：12575194
> 
> 赞同：6
> 
> 时间：2012-09-25T01:44:01.653
> 
> 标签：java, jdbc, jtds

我正在使用 jtDS JDBC 驱动程序，当我调用时`ResultSet.getNString(index);`出现以下异常：

```
run:
Exception in thread "main" java.lang.AbstractMethodError: net.sourceforge.jtds.jdbc.JtdsResultSet.getNString(I)Ljava/lang/String;
    at javasql.ProductsController.PrePopulate(ProductsController.java:51)
    at javasql.ProductsController.<init>(ProductsController.java:37)
    at javasql.Program.main(Program.java:25)
Java Result: 1
BUILD SUCCESSFUL (total time: 6 seconds) 
```

当我使用`getString(index)`它时工作正常.. 只是`getNString()`我遇到问题并且我的 MSSQL 表中的列被定义为`NVarChar`. 那么，什么给了？jtDS不支持`getNString()`吗？也许它通过相同的功能获得`VarChar`两者？`NVarChar``getString()`

**编辑：**

相关的 unicode 问题.. 我可以看到尝试使用 Unicode 也不适用于插入。我的列定义为`nvarchar(255)`，但以下**INSERT**语句不起作用：

```
private final String INSERT_FORMAT = "INSERT INTO Products (Name, Price, QuantityInStock) VALUES (N'%s', %s, %s)";

    public void Insert(Product p) {
            products.add(p);
            try {
                statement.addBatch(String.format(INSERT_FORMAT, p.getName(), p.getPrice(), p.getQuantityInStock()));
            } catch (SQLException ex) {
                System.out.println(ex.getMessage());
            }
        }

public void SaveChanges() {
        try {
            statement.executeBatch();
        } catch (SQLException ex) {
            System.out.println(ex.getMessage());
        }
        RefreshData();
    } 
```

我输入的 unicode 字符在数据库中显示为问号。这通常发生在您忘记在插入语句中将**N**添加到所述参数之前。但是在这里您可以看到我明确指定了它。JtDS 的功能列表确实说它支持 NVARCHAR、NTEXT 等。但目前我只看到问题。我究竟做错了什么？

**编辑 2**

问题1已解决..我通过SSMS将一些汉字直接插入数据库，当我使用时`getString(index)`，它工作正常。所以我猜jTDS似乎对所有文本类型都使用了getString。`getNString(index)`奇怪的是，它不会为函数抛出某种不受支持的异常。

所以，现在我们剩下的问题是如何将 unicode 数据插入**NVARCHAR**列。这里肯定有人有过这方面的经验吗？

**编辑 3**

我将代码更改为在每个方法中使用准备好的语句，而不是尝试使用批处理并使用 setInt、setString 等方法。但是，我仍然遇到同样的问题......如果我将 setString() 用于 unicode，它会插入 ??? 进入我的数据库。如果我使用 setNString()，那么我会收到与我在执行 getNString 时在这篇文章顶部收到的错误相同的错误......这太疯狂了......如果这个驱动程序实际上不支持 unicode，它怎么会变得如此受欢迎?? 我在这里想念什么？该网站确实说它支持 NVARCHAR 等。所以为了使这项工作，我需要做什么疯狂的不直观的事情？？？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-09-25T05:32:04.987

`getNString`随 Java 1.6/JDBC 4.0 添加。看来你的司机太老了。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-06-10T08:31:11.157

你的主键是什么类型？我遇到了与您描述的完全相同的问题，即：我可以使用经典的 getString() 方法检索存储为*NVARCHAR*的数据，但更新不起作用，即使将*sendStringParametersAsUnicode*选项设置为*true* ......直到我改变主键从 NVARCHAR 回到 VARCHAR。现在它对我有用。更新实际上并没有产生任何错误，只是似乎找不到主键，因此什么也没发生......不过，我希望能够在不将*sendStringParametersAsUnicode*选项设置为*true的情况下对某些字段使用 unicode 存储*，但我的印象是这是不可能的，除非可能通过将相关列键入为 byte[] 而不是 NVARCHAR 并使用 setBytes() 方法设置它们（如此处建议[的/](http://cephas.net/blog/2005/12/02/java-jtds-preparedstatement-and-varchar/)）

# php - imap_mail_copy php 错误信息

> ID：12575195
> 
> 赞同：0
> 
> 时间：2012-09-25T01:44:21.510
> 
> 标签：php, gmail-imap

我正在尝试使用 imap_mail_copy 将邮件从收件箱复制到 Gmail 中的另一个文件夹

我能够很好地连接到邮箱并阅读邮件，但我无法在没有错误的情况下移动它们

```
if(!imap_mail_copy($connection,'$msg_num','[Gmail]/Starred', CP_UID))
        {
            echo "Didn't move messages number: $msg_num";
        }
imap_expunge($connection); 
imap_close($connection,CL_EXPUNGE); 
```

其中 $connection 是流，$msg_num 是从标头中读取的 ($msg_num = $header->Msgno;)，Starred 是文件夹

错误是

```
PHP Notice:  Unknown: IMAP protocol error: Could not parse command (errflg=2) in 

Unknown on line 0
PHP Notice:  Unknown: Could not parse command (errflg=2) in Unknown on line 0 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-25T01:48:04.763

如果`$msg_num`是您需要提供给函数的变量，则需要将代码更改为：

```
if(!imap_mail_copy($connection,"$msg_num",'[Gmail]/Starred', CP_UID)) 
```

或者：

```
if(!imap_mail_copy($connection,$msg_num,'[Gmail]/Starred', CP_UID)) 
```

或（如果您需要将其转换为字符串）：

```
if(!imap_mail_copy($connection, (string) $msg_num,'[Gmail]/Starred', CP_UID)) 
```

现在您实际上是在发送字符串`$msg_num`。

# javascript - 如何使用 angularjs e2e 测试框架测试 contenteditable 字段（基于 td）？

> ID：12575199
> 
> 赞同：3
> 
> 时间：2012-09-25T01:44:55.117
> 
> 标签：javascript, angularjs, testing, dom-events

我有一个网格，可以使用 contenteditable 标记编辑单元格。

网格工作正常并正确绑定到 angularjs 模型，但我无法使用 angularjs e2e 测试框架进行测试自动化工作。

在浏览了 Angular 场景 js 后，我发现了用于执行 e2e 测试的 dsl 方法，并注意到 contenteditable 无法与输入法一起使用。

所以我为 contenteditable 创建了一个新的 dsl 方法：

```
angular.scenario.dsl('contenteditable', function () {
    var chain = {};

    chain.enter = function (value) {
        return this.addFutureAction("contenteditable '" + this.name + "' enter '" + value + "'", function             ($window, $document, done) {
            var contenteditable = $document.elements(this.name);
            debugger;
            contenteditable.text(value);
            contenteditable.trigger('change');
            done();
        });
    };

    return function (name) {
        this.name = name;
        return chain;
    };
}); 
```

过了一会儿，我可以让它的一半工作，但它仍然不会触发对我的角度指令代码工作至关重要的“更改”事件（即使在那里有触发器调用）。

解决这个问题的最佳方法是什么？想法？

# ruby-on-rails - 从 url 的 rails 字符串表示创建完整的 url

> ID：12575200
> 
> 赞同：1
> 
> 时间：2012-09-25T01:45:00.610
> 
> 标签：ruby-on-rails, ruby-on-rails-3, routing

有没有办法从rails中路由的速记字符串表示中获取完整路径url？

即来自 rake 路由输出的字符串，`terms#index`它创建了它映射的完整路径，例如`http://what-ever.com/terms-and-conditions`

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-25T05:21:31.170

也许`url_for`可以帮助你？[文档在这里](http://api.rubyonrails.org/classes/ActionView/Helpers/UrlHelper.html#method-i-url_for)。它没有使用确切的字符串，但取决于你在做什么，也许你可以通过将变量放在里面来获得类似的结果。

就像是：

```
<%= url_for(:action => '#{action}', :controller => '#{controller}', :only_path => false %> 
```

只是一个猜测。实际上不知道它是否会起作用:)。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-25T03:29:15.317

如果

```
rake routes --trace
          terms GET    /terms(.:format)             terms#index 
```

然后我认为以下将起作用

```
terms_path #Gives /terms 
```

和

```
terms_url #Gives http://what-ever.com/terms 
```

# java - 如何在 JFrame 上保存图像

> ID：12575201
> 
> 赞同：0
> 
> 时间：2012-09-25T01:45:19.873
> 
> 标签：java, image, swing, jframe

我正在做一个白板项目，在实现保存功能时遇到了问题。

这是我如何实现绘图功能

```
Graphics2D g2d = (Graphics2D) frm.getGraphics();
g2d.setColor(Current_Color);
Line2D p2d = new Line2D.Double(StartPoint.getX(),StartPoint.getY(), e.getX() 
     + Xoffset, e.getY() + Yoffset);
g2d.setStroke(new BasicStroke(Integer.parseInt(choice_size.getSelectedItem())));
g2d.draw(p2d); 
```

我正在为文件对话框使用 JFileChooser

```
 int returnVal = saveFileChooser.showSaveDialog(frm);
            if (returnVal == JFileChooser.APPROVE_OPTION) {
                File currentDir = saveFileChooser.getCurrentDirectory();
                String fileName = saveFileChooser.getSelectedFile()
                        .getName();
                String savePath = currentDir + "\\" + fileName + ".jpg";

                try {
                    ImageIO.write(<image>,<suffix>,<file>);
                } catch (IOException e1) {
                    e1.printStackTrace();
                }
            } 
```

没有像`Frame.getImage()`JFrame 这样的方法，我想知道如何将我在 JFrame 上绘制的内容保存为图像？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-25T01:58:04.833

You need to paint the frame's content to a `BufferedImage` first. Try something like...

```
Container content = frm.getContentPane();
BufferedImage img = new BufferedImage(container.getWidth(), container.getHeight(), BufferedImage.TYPE_INT_RGB);
Graphics2D g2d = img.createGraphics();

content.printAll(g2d);

g2d.dispose(); 
```

Once you have that, you can use the `ImageIO.write` method, passing the `img` to it.

**UPDATE**

So, I did a really quick test...

I started out with this background image...

![background](../Images/ce1e815bd8d09a187de49a648df7b950.png)

Which I loaded into my frame and laid a `JLabel` ontop

![Frame](../Images/8896cc4e9a790546002aad945cfb2cb2.png)

And then saved to a file...

![Output](../Images/e73756263d43da24d3d5bfdb5deb3b96.png)

All of which worked fine.

This is the code that I used.

```
public class TestSaveFrame extends JFrame {

    public static void main(String[] args) {

        EventQueue.invokeLater(new Runnable() {
            @Override
            public void run() {
                try {
                    UIManager.setLookAndFeel(UIManager.getSystemLookAndFeelClassName());
                } catch (ClassNotFoundException ex) {
                } catch (InstantiationException ex) {
                } catch (IllegalAccessException ex) {
                } catch (UnsupportedLookAndFeelException ex) {
                }
                new TestSaveFrame();
            }
        });
    }

    public TestSaveFrame() {

        setTitle("Save me");
        setDefaultCloseOperation(EXIT_ON_CLOSE);
        setLayout(new BorderLayout());

        BackgroundPane pane = new BackgroundPane();
        pane.setLayout(new GridBagLayout());

        JLabel label = new JLabel("I'm sitting on top");
        label.setFont(label.getFont().deriveFont(Font.BOLD, 24f));
        label.setForeground(Color.WHITE);

        pane.add(label);

        add(pane);

        pack();
        setLocationRelativeTo(null);
        setVisible(true);

        pane.addMouseListener(new MouseAdapter() {
            @Override
            public void mouseClicked(MouseEvent e) {

                if (e.getClickCount() == 2 && e.getButton() == MouseEvent.BUTTON1) {
                    Container content = getContentPane();
                    BufferedImage img = new BufferedImage(content.getWidth(), content.getHeight(), BufferedImage.TYPE_INT_RGB);
                    Graphics2D g2d = img.createGraphics();
                    content.printAll(g2d);
                    g2d.dispose();

                    try {
                        ImageIO.write(img, "png", new File("C:/PrintMe.png"));
                    } catch (IOException ex) {
                        ex.printStackTrace();
                    }
                }
            }
        });

    }

    public class BackgroundPane extends JPanel {

        private Image background = null;

        public BackgroundPane() {
            try {
                background = ImageIO.read(getClass().getResource("/MT015.jpg"));
            } catch (IOException ex) {
                ex.printStackTrace();
            }
        }

        @Override
        public Dimension getPreferredSize() {
            return background == null ? new Dimension(200, 200) : new Dimension(background.getWidth(this), background.getHeight(this));
        }

        @Override
        protected void paintComponent(Graphics g) {

            super.paintComponent(g);
            if (background != null) {
                int x = (getWidth() - background.getWidth(this)) / 2;
                int y = (getHeight() - background.getHeight(this)) / 2;

                g.drawImage(background, x, y, this);
            }
        }
    }
} 
```

Without an example of the work flow, it's going to be tough to work out where you're going wrong.

I should note that I use `printAll` over `paint` because I've had issues with doing this using `paint` recently (throwing exceptions and the like)

# javascript - 如何将 twitter-bootstrap cdn 回退到本地副本

> ID：12575203
> 
> 赞同：33
> 
> 时间：2012-09-25T01:45:49.013
> 
> 标签：javascript, twitter-bootstrap, cdn

有很多关于如何通过检查全局变量*JQuery*的存在来将 JQuery CDN 回退到本地副本的[帖子](https://stackoverflow.com/questions/1014203/best-way-to-use-googles-hosted-jquery-but-fall-back-to-my-hosted-library-on-go)。

 *我的问题是，如何对 twitter-bootstrap 做同样的事情？是否在引导程序中定义了一个变量，以便我可以检查以确保 CDN 可用？

顺便说一句，我使用*netdna.bootstrapcdn.com*作为我的引导 CDN

* * *

## 回答 #1

> 赞同：40
> 
> 时间：2012-11-05T23:32:45.207

这就是我所做的，它工作正常

```
<script src="//netdna.bootstrapcdn.com/twitter-bootstrap/2.2.1/js/bootstrap.min.js"></script>
<script>    $.fn.modal || document.write('<script src="Script/bootstrap.min.js">\x3C/script>')</script> 
```

* * *

## 回答 #2

> 赞同：20
> 
> 时间：2012-09-30T08:42:43.570

我没有看到 twitter-bootstrap 为此目的公开的特定变量，并且他们没有将所有插件附加到 jQuery UI 的命名空间。您的下一个最佳选择是测试其中一个引导插件。也许是这样的：

```
if(typeof($.fn.modal) === 'undefined') {
    //load bootstrap locally
} 
```

不幸的是，它很脆。如果模态插件被重命名或删除，此检查将始终失败。*

# python - 如何在 python 的列表中访问和排序列表？

> ID：12575204
> 
> 赞同：0
> 
> 时间：2012-09-25T01:46:08.700
> 
> 标签：python, list

我有一个大数组，我想对其进行排序。在数组中，数组中的第一项是类别，第二项是需要排序的项。例如：

```
joe = [['miles', 330], ['points', 5000], ['miles', 400], ['points', 4000], ['trophy', 'explorer'], ['points', 4100]] 
```

我一直在尝试不同的方法来访问列表中的列表，但我不确定如何准确地做到这一点。我怎样才能访问这些信息？

我尝试了以下变化：

```
mylist = []
for item in joe:
    category = mylist(item[0])
    print category 
```

之后我会将这些值分配给不同的数组（我应该有 3 个单独的数组并对这些数据进行排序）。不过，我现在主要关心的是分配数据的最佳方式是什么。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-25T01:55:37.043

I'm guessing you want something like:

```
new_joe = sorted( joe,key = lambda x: x[1] ) 
```

which is the same thing as the slightly more efficient:

```
from operator import itemgetter
new_joe = sorted( joe, key = itemgetter(1) ) 
```

Or, you can sort `joe` in place:

```
joe.sort(key=lambda x: x[1]) 
```

But, what if you want to have all of the `'miles'` lists together, and then sorted in ascending order after that?

```
joe.sort() 
```

should do the trick ... (and now, hopefully I've covered enough bases that I hit the one you need).

* * *

Ahh, Now I see what you want. For this, you have a bunch of options. My favorite is a `collections.defaultdict`:

```
from collections import defaultdict
d = defaultdict(list)
for k,v in joe:
   d[k].append(v)

for k,v in d.items():
   print(k,v) 
```

But another options would be to sort `joe` (e.g. `joe.sort()`) and use `itertools.groupby`.

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-25T01:59:57.180

要将数据分成每个类别的列表，字典将帮助您 - 它可以将单个字符串与数字列表相关联。因此，从将所有类别与空列表相关联的 dict 开始 -`my_dict = {'miles': [], 'points': []}`等等，然后遍历列表 - 在每个项目中，您希望将数字附加到与字符串关联的列表中：

```
for item in joe:
    category = item[0]
    my_dict[category].append(item[1]) 
```

您可以避免使用 dict 的`setdefault`方法对所有要放入 dict 的类别进行硬编码（或预计算）：

```
my_dict = {}
for item in joe:
   category = item[0]
   my_dict.setdefault(category, []).append(item[1]) 
```

然后对这些列表中的每一个进行排序，您可以迭代字典的值并使用列表的`sort`方法对它们进行排序：

```
for category in my_dict:
   my_dict[category].sort() 
```

这会给你一个`my_dict`看起来像：

```
{'trophy': ['explorer'], 'miles': [330, 400], 'points': [4000, 4100, 5000]} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-09-25T02:01:13.053

当您执行此循环时：

```
for item in joe: 
```

`item`看起来像什么？无需猜测，您可以打印它：

```
for item in joe:
    print item 
```

显然，`item`是主列表中的每个子列表，第一个是`['miles', 330]`.

现在你怎么得到`'miles'`？ `item[0]`， 正确的？ `item[1]`将是`330`。

现在，您可以轻松地根据类别构建新列表。我们会将这些存储在字典中。

```
joedict = {}
for item in joe:
    joedict.setdefault(item[0], []).append(item[1]) 
```

现在`joedict['miles']`是所有里程的列表等等。

对这些中的每一个进行排序很简单：

```
for value in joedict.itervalues():
    value.sort() 
```

这有帮助吗？

# php - WordPress Get Page By ID 返回奇怪的结果

> ID：12575205
> 
> 赞同：0
> 
> 时间：2012-09-25T01:46:10.790
> 
> 标签：php, wordpress, function, meta-boxes

我有一个客户端的 CMS 设置，其中包含三个用于相关内容的元框。客户所要做的就是输入一个页面 slug（每个一个），该站点将返回三个相关产品。

一切正常，直到我的客户不小心拼错了一个蛞蝓。WordPress 没有返回任何内容，而是返回大约 6 个随机项目。

在 FUNCTIONS.PHP 中：

```
function get_ID_by_page_name($page_name) {
global $wpdb;
$page_name_id = $wpdb->get_var("SELECT ID FROM $wpdb->posts WHERE post_name = '".$page_name."' AND post_type = 'page'");
return $page_name_id; 
```

}

在模板文件中：

```
$goesWith = get_post_meta($post->ID, 'goes_with', true);

if (($goesWith) or ($goesWith2) or ($goesWith3)) {

            echo "<div class='goes-with'>";

            echo  "<h2>Goes Great With:</h2>";                      

            // OPTION ONE

                $pageID = get_ID_by_page_name($goesWith);

                    if ($goesWith) { 

                        $args = array(
                            'post_type'      => 'page',
                            'page_id'     => $pageID,
                            'post_status' => 'publish'
                        );
                        query_posts( $args );

                        while(have_posts()) {

                            the_post(); // vital                                                        

                            echo "<div class='post-product'>";
                            echo "<a href=";
                            the_permalink();
                            echo ">";
                            thumbPath(140, 140);
                            echo "</a><a href=";
                            the_permalink();
                            echo "><p>";
                            the_title();
                            echo "</p></a></div><!--end post-product-->";

                       }

                    }

                    else {

                        echo "";

                    } 

            wp_reset_query(); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-25T02:43:36.443

首先，您不需要任何自定义代码来执行您正在执行的操作：

```
$goes_with = get_post_meta(get_the_ID(), 'goes_with'); //Returns array when 3rd parameter is left empty or false
foreach($goes_with as $slug){
    $args = array(
        'post_type'   => 'page',
        'post_status' => 'publish',
        'pagename'    => $slug
    );
    query_posts( $args ); //Bad way
    while(have_posts()){ the_post(); //Bad way

    //$query = new WP_Query($args); //Good way
    //while($query->have_posts()){ $query->the_post(); //Good way                                                         

        echo "<div class='post-product'>";
        echo "<a href='".get_permalink()."'>";
        thumbPath(140, 140);
        echo "</a><a href='".get_permalink()."'><p>".get_the_title()."</p></a></div><!--end post-product-->";
    } 
    wp_reset_query(); //Bad way
    //wp_reset_postdata(); //Good way
} 
```

其次，你应该绝对避免使用 query_posts()。这可能为时已晚，因为您的主题已经发送给您的客户，但如果将额外的时间投入主题不是问题，您应该考虑将所有内容从 query_posts 切换到[WP Query 。](http://codex.wordpress.org/Class_Reference/WP_Query)

使用 WP_Query 可以显着提高性能，而且它不会改变任何 Wordpress 全局变量。

如果您想了解它是如何实现的，请随时注释掉所有标记为“Bad way”的行，并取消注释所有标记为“Good way”的行。

此外，使用上面的代码，您可以在自定义元字段中重复使用相同的 'goes_with' 键，以根据需要将尽可能多的其他页面链接到给定的页面查询。由于您通过页面名称而不是 ID 运行查询，因此必须在循环中执行此特定方法。

但是，与原来的相比，这样做的好处是，您依靠 Wordpress 的内置功能为您进行查询，而不是对数据库进行额外调用以返回您已经可用的结果。

此代码未经测试，可能需要进行一些重构才能使其与您的设置一起使用，但它应该可以帮助您入门。

希望这对你有所帮助，祝你好运。

# html - 将图像与左浮动 div 的底部对齐

> ID：12575210
> 
> 赞同：5
> 
> 时间：2012-09-25T01:46:57.387
> 
> 标签：html, css, positioning

试图为我的本地漫画书集创建一个 WEB 界面。外观应该与 Apple 的 iBooks 非常相似——书皮放在书架上。封面相似但高度和宽度不同。在不指明包含 div 的宽度的情况下，无法弄清楚如何将图像封面推到 div 的底部。使用absolute-inside-relative 只是将封面堆叠成一堆。

HTML：

```
<div class="cover"><a href="#"><img src="cover1.jpg"></a></div>
<div class="cover"><a href="#"><img src="cover2.jpg"></a></div>
<div class="cover"><a href="#"><img src="cover3.jpg"></a></div> 
```

CSS：

```
body {background-image: url(http://image.bayimg.com/oaddpaaea.jpg); background-repeat: repeat;}
.cover {float: left; height: 258px; border: 1px solid red; margin: 0px 5px 25px 5px;}
.cover img {border: 1px solid green; -webkit-box-shadow: 0 8px 6px -6px black; -moz-box-shadow: 0 8px 6px -6px black; box-shadow: 0 8px 6px -6px black;} 
```

jsFiddle 示例：http: [//jsfiddle.net/NATqD/](http://jsfiddle.net/NATqD/)

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-25T02:07:29.200

试试这个 CSS：

```
.cover {  float: left; height: 258px;line-height: 258px;  border: 1px solid red; margin: 0px 5px 25px 5px;}
.cover img {vertical-align: bottom; border: 1px solid green; -webkit-box-shadow: 0 8px 6px -6px black; -moz-box-shadow: 0 8px 6px -6px black; box-shadow: 0 8px 6px -6px black;} 
```

您添加`line-height: 258px`以匹配封面 div 的高度。然后`vertical-align: bottom`在图像上。工作示例：

[http://jsfiddle.net/NATqD/6/](http://jsfiddle.net/NATqD/6/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-25T02:09:40.330

这对我来说似乎是最直接的：

```
<div class="cover">
    <a href="#"><img src="http://www.emeraldinsight.com/fig/53_10_1108_S0731-9053_2009_0000024005.png"></a>
    <a href="#"><img src="http://roborfid.dyndns.org/data/book_images/backs_small/SIWE_R_GM00404130.jpg"></a>
    <a href="#"><img src="http://roborfid.dyndns.org/data/book_images/backs_small/SIWE_R_GM00624371.jpg"></a>
    <a href="#"><img src="http://www.lauren-myers.com/_img/right_arrow.jpg"></a>
    <a href="#"><img src="http://www.gotohoroscope.com/img/bg_00.gif"></a>
    <a href="#"><img src="http://roborfid.dyndns.org/data/book_images/backs_small/SIWE_R_GM00404091.jpg"></a>
    <a href="#"><img src="http://www.startplay.co.uk/images/play.png"></a>
    <a href="#"><img src="https://www.educorporatebridge.com/old_back_up_16-07-12/images/foundcourses.png"></a>
    <a href="#"><img src="http://s1.hao123.com/index/images/temple_bg.gif"></a>
</div>

.cover {
    line-height: 258px;
    height: 258px; 
    border: 1px solid red; 
    margin: 0px 5px 25px 5px;
} 
```

[http://jsfiddle.net/NATqD/5/](http://jsfiddle.net/NATqD/5/)

适用于 Firefox 和 Chrome。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-25T01:58:05.770

添加位置：相对于 .cover 这允许您将位置：绝对添加到图像，因此您可以绝对相对于 div 定位图像。

[http://jsfiddle.net/NATqD/1/](http://jsfiddle.net/NATqD/1/)

# sql - 数据库 - 按原样存储字符串

> ID：12575217
> 
> 赞同：0
> 
> 时间：2012-09-25T01:49:49.787
> 
> 标签：sql, jdbc

我编写了一个更改脚本来向数据库添加一列：

```
ALTER TABLE tr_rtl
ADD (ID_STR_RT1 varchar2(178)); 
```

我正在尝试使用 jdbc 将数字签名存储到数据库中。实际的数字签名是：

```
tNBc41Qlb3Zov2pPStcbj71DWB6hBxsByessFJsfvizQhIe+39TfzDOUDaCt4AmJ+uUYmQzDZAZ/= 
```

但在数据库中它被存储为：

```
TNBC41QLB3ZOV2PPSTCBJ71DWB6HBXSBYESSFJSFVIZQHIE+39TFZDOUDACT4AMJ+UUYMQZDZAZ/= 
```

这是大写的。 **如何按原样存储数字签名**？

谢谢

# css - IE8 和 IE9 无法正确渲染 960 网格

> ID：12575221
> 
> 赞同：0
> 
> 时间：2012-09-25T01:51:14.967
> 
> 标签：css, internet-explorer, 960.gs

新手在这里学习 960 网格和 css。我已经通过在这里的彻底搜索设法解决了我的大部分问题，但是我真的在为我的页面在所有 IE8 和 IE9 上不正确地渲染而苦苦挣扎（尽管它在 IE7/8 兼容性视图中以某种方式渲染得很好）。

在 IE 中，我的主要内容（6-col、6-col、4-col）将最后一列截断到页面底部，而不管屏幕分辨率或缩放。它在所有其他浏览器中呈现良好（减去 FF 中“大纲”定义的已知问题）。我知道 IE 在边距和/或填充方面存在问题，但我还没有完全理解这个问题。但是，我没有找到可能导致超过 960 像素的水平填充。如果有更多知识的人可以快速查看我的 css，我希望他们能指出我正确的方向。

正如我所提到的，我正在学习 CSS 和这个网格系统。我不是网络程序员，只是一个在他的计算机上安装了谷歌和网络表达式的人，试图为一个非营利机构建立一个网站。我确信代码存在一些严重的语义问题，但我感谢你的温柔。我保证会清理我的代码，因为我更好地理解了正确的语义。谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-27T20:27:00.773

原来我对麻烦制造者的代码是错误的。实际上，在包含我公司徽标的 div 左侧部分的 css 中是一些不必要的（在当时看来是无害的）代码......特别是 display:inherit 和 width=100%。删除这两行后，一切都在 IE7+ 中很好地呈现。

# javascript - Bootbox.js 正在向上滚动窗口

> ID：12575222
> 
> 赞同：2
> 
> 时间：2012-09-25T01:51:16.373
> 
> 标签：javascript, twitter-bootstrap

我这里没有太多代码要展示，我使用 bootbox.js (http://bootboxjs.com/) 来发出警报，每次弹出警报时，页面都会滚动到顶部。任何想法如何防止它？我正在从一长串列表中删除项目，并希望页面保持原位。

```
bootbox.backdrop(false)
bootbox.confirm("Delete: " + alarmId + "?", function(result){
if(result)
    doStuff
}) 
```

至于 HTML，我两种都试过了——

```
<a href="#" class="close alarmDelete">&times;</a> 
```

和

```
<a class="close alarmDelete">&times</a>; 
```

还有其他几种方式，它无论如何都会向上滚动。

谢谢！

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-12-05T04:48:47.937

启动引导箱`<a href="#" class="close alarmDelete">&times;</a>`是导致您的页面滚动到顶部的原因。

尝试从图标或 div 启动它；除了空锚之外的东西。

您的另一个选择是`return false;`从您的点击处理程序。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2014-02-20T22:56:06.000

可能的 2 个答案。href="#" 可能会将您发送到顶部，因此请尝试使用 href="javascript:;" 更改它。它也可以是关于 css 的。由于它将正文的溢出更改为隐藏，它可能会将您的页面裁剪到窗口大小以下，因此您认为它正在向上滚动您。

尝试将其添加到 css：

```
.modal{
    direction:rtl;
    overflow-y: auto;
}

.modal .modal-dialog{
    direction:ltr;
}

.modal-open{
    overflow:auto;
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-09-25T02:11:23.727

请试试这个，

```
 bootbox.confirm("Delete: " + alarmId + "?", function(result) {}, {"backdrop": false}); 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2014-11-14T18:58:50.290

我遇到过同样的问题。正如本页另一个答案中提到的，Bootbox 正在将 body 的溢出更改为隐藏，使页面变小以至于无法滚动。

这个css为我解决了它：

```
body.modal-open {
    overflow: visible;
} 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2015-07-16T11:18:34.793

```
body.modal-open {
    overflow: visible;
}
.bootbox {
  width: 100%;
  height: 100%;
  display: table;
  position: fixed;
} 
```

将 bootbox 类的位置更改为固定，将模式打开更改为溢出可见，这会将弹出窗口固定到屏幕的中心。这将防止窗口跳跃，我认为会产生更好的结果。我知道这是一篇旧帖子，但我在尝试解决相同问题时遇到了这个问题，有些人可能会觉得这很方便

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2020-02-13T11:24:23.783

可以通过将标签从“a”更改为“按钮”轻松解决

```
<p>Content here.
    <button type="button" class="show-alert">Alert!</button>
</p>
<script>
    $(document).on("click", ".show-alert", function(e) {
        var dialog = bootbox.dialog({
            title: 'A custom dialog with init',
            message: '<p><i class="fa fa-spin fa-spinner"></i> Loading...</p>'
        });

        dialog.init(function() {
            setTimeout(function() {
                dialog.find('.bootbox-body').html('I was loaded after the dialog was shown!');
            }, 3000);
        });
    });
</script> 
```

# ruby-on-rails - rails find_or_create_by 创建重复项

> ID：12575223
> 
> 赞同：2
> 
> 时间：2012-09-25T01:51:26.030
> 
> 标签：ruby-on-rails

出于某种原因，以下代码会创建重复项。它并不总是发生。如果我刷新足够多的时间，它就会停止发生。奇怪的是，它创建的“重复”甚至与我的用户 ID 不匹配！这是在开发中。User 表甚至没有 id = 1 的用户。

```
@food.page_views.find_or_create_by_user_id(current_user) 
```

这是我的 current_user 方法。

```
def current_user
  @current_user ||= User.find(session[:user_id]) if session[:user_id]
  rescue ActiveRecord::RecordNotFound
    session[:user_id] = nil
  end
  helper_method :current_user
end 
```

从控制台：

```
PageView Load (0.4ms)  SELECT "page_views".* FROM "page_views" WHERE "page_views"."food_id" = 2 AND "page_views"."user_id" = 3 LIMIT 1
(4.0ms)  BEGIN
SQL (0.6ms)  INSERT INTO "page_views" ("created_at", "food_id", "updated_at", "user_id") VALUES ($1, $2, $3, $4) RETURNING "id"  [["created_at", Tue, 25 Sep 2012 01:36:43 UTC +00:00], ["food_id", 2], ["updated_at", Tue, 25 Sep 2012 01:36:43 UTC +00:00], ["user_id", 1]] 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-25T02:02:07.197

使用`current_user.id`代替`current_user`：

```
@food.page_views.find_or_create_by_user_id(current_user.id) 
```

“魔术方法”想要一个`user_id`整数；你给它一个对象。

# ios - iOS 上导航控制器上的按钮，带有 Delete actionSheet

> ID：12575226
> 
> 赞同：0
> 
> 时间：2012-09-25T01:52:23.437
> 
> 标签：ios, iphone, cocoa, ipad

iOS：我有打开一些内容的应用程序，我在右侧导航栏上添加了按钮，可以从保存的捕获中删除消息内容，现在我想在删除消息之前放置符合用户的确认操作，我创建了 UIActionsheet 像这样：

```
sheet = [[UIActionSheet alloc] initWithTitle:@"Delete Message" delegate:self cancelButtonTitle:@"Cancel"   destructiveButtonTitle:@"Delete Message" otherButtonTitles:nil];
 // view sheet 
 [sheet showInView:self.view];
 NSLog(@"Button %d", buttonIndex); 
```

现在我如何在我的 deleteContent 函数中使用这个值？我的删除功能是

```
-(void) deleteContent 
{
   if (buttonIndex=0)
     {
      [[NSFileManager defaultManager] removeItemAtPath:fileName error:&e];
     }
} 
```

我的问题是我怎样才能在一个函数中重新排列它，这个函数可以在一次调用中调用并完成所有这些。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-25T02:01:12.500

这不是这样做的方法。从导航栏中的按钮调用函数以显示操作表。然后实现 UIActionSheetDelegate 方法 actionSheetDidDismissWithButtonIdex 来获取您实际删除的汽车。

编辑：如果您需要从导致显示操作表的方法中传递要删除的项目的标识，只需向您的 presentActionSheet 方法添加一个参数并传递该项目。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-25T05:06:54.770

有同样问题的人：

为可以调用弹出窗口的按钮创建一个函数，如下所示：

```
-(void)popUp
{

    sheet = [[UIActionSheet alloc] initWithTitle:@"Are you Sure?"
                                        delegate:self
                               cancelButtonTitle:@"Cancel"
                          destructiveButtonTitle:@"Delete Message"
                               otherButtonTitles:nil];
    // Show the sheet
    [sheet showInView:self.view];
    //[sheet release];
    NSLog(@"Button %d", buttonIndex);
} 
```

而不是创建一个更多的函数来处理基于弹出操作的删除部分，如下所示：

```
 - (void)actionSheet:(UIActionSheet *)actionSheet didDismissWithButtonIndex:(NSInteger)buttonIndex
    {
        if (buttonIndex == 0) {  //delete it

            //delete from database
            //delete from folder
            [[NSFileManager defaultManager] removeItemAtPath:fileName error:&e];
            //close
            [[self navigationController] popViewControllerAnimated: YES];
        }else if {
             NSLOG(@"USER said No");
        }

    } 
```

# jquery - jQuerytools Overlay with mask

> ID：12575227
> 
> 赞同：0
> 
> 时间：2012-09-25T01:52:30.690
> 
> 标签：jquery, overlay, lightbox, jquery-tools

I can't get the overlay to show up nicely on my site, all I want is a simple lightbox with an iframe that pulls the href from the link its clicked on and displays it on top of an overlay. I have jQueryTools setup on my site so I thought I could use their overlay functionality. Here is my code:

```
 $(function(){
    $("body").append('<div class="oiOverlay" id="overlay"><div class="oiContentWrap"></div></div>');
    $("a[rel]").overlay({
        mask: '#000',
        closeOnClick: false,
        onBeforeLoad: function() {
            // grab wrapper element inside content
            var wrap = this.getOverlay().find(".oiContentWrap");
            // load the page specified in the trigger
            wrap.load(this.getTrigger().attr("href"));
        }
    });
}); 
```

CSS

```
#overlay { display: none; width:625px; z-index: 1000; min-height:200px; border:1px solid #000; } 
```

HTML

```
<a href="http://www.google.com" rel="overlay">Google overlay</a> 
```

What I am getting is a box that's aligned to the left instead of the center and no background/mask/overlay effect behind it. I can't figure out what I've missed, this is the page I followed when writing my code: [http://jquerytools.org/demos/overlay/styling.html](http://jquerytools.org/demos/overlay/styling.html)

UPDATE: I gave up on JQuerytools overlay and created my own

# php - Rounding DateTime Value to Nearest Hour with PHP and MySQL

> ID：12575234
> 
> 赞同：1
> 
> 时间：2012-09-25T01:53:07.867
> 
> 标签：php, mysql, database, datetime

So, I'm trying to count the number of hours between a DateTime value and the current date with PHP. I don't want to do it by seconds and then divide it into minutes and then hours, because I'd like for it to count each hour individually. For example, 4PM-5PM would be 1, 5PM-6PM would be 2, and so on.

So if the DateTime was 2012-09-24 7:49:23 and the current DateTime was 2012-09-24 8:00:19 it would output the number 1\. And if the DateTime was 2012-09-24 7:49:23 and the current DateTime was 2012-09-24 8:59:45 it would still output 1\. (It wouldn't change to 2 until 9:00:00)

The DateTime I'm using for comparison is coming out a database, and if I can figure out how I will make it so that it cuts off the minutes/seconds portion of the DateTime (so that they're 0). If I could do the same with the current DateTime it would be easy. The thing is, I don't know how to do that. So how can I turn 2012-09-24 7:49:23 into 2012-09-24 7:00:00 (It still needs to be in a DateTime format so I can put it back into the MySQL database in a DateTime field)

Thanks!

EDIT: I appreciate both answers I received, but I tried tinkering with them and couldn't get exactly what I wanted. Instead, I was able to come up with on my own (through some more trial and error) what I needed to make this work. I've included it below in case anyone else has a similar issue.

```
$timea = date_format(date_create(date("c")), 'Y-m-d H:00:00');
$timeb = date_format(date_create($databasedate), 'Y-m-d H:00:00');

//hours
$diff = abs(strtotime($timeb) - strtotime($timea));
$hours = round(($diff/60/60)); 
```

That code should all be pretty straightforward and easy to understand. Thanks again everyone :)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-25T02:48:44.883

在 PHP 中有很多方法可以清除日期和时间的各个部分，但是如果您想坚持使用`DateTime`该类（我强烈推荐），并且您将在多个地方使用它，我建议`DateTime`您扩展包含该功能的自己的子类：

```
namespace my\name\space;

class MyWeirdMinuteAndSecondlessDateTime extends \DateTime {
    public function __construct($date, \DateTimeZone $tz = NULL) {
        parent::__construct($date, $tz);

        // Set the time to just the hour.  This is sort of
        // equivalent to the floor() function for floats.
        $this->setTime($this->format('G'), 0, 0);
    }
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-25T02:59:39.850

```
$time1->setTime($time1->format('G'), 0, 0);
$time2->setTime($time2->format('G'), 0, 0);
$hourdiff = $time2->diff($time1)->format('G'); 
```

# firefox - Applescript，Firefox在当前窗口中打开网址

> ID：12575238
> 
> 赞同：0
> 
> 时间：2012-09-25T01:54:00.813
> 
> 标签：firefox, applescript

有没有办法使用 Applescript 在 Firefox 的当前窗口中打开一个 url？我想出了如何使用以下方法打开指定的网址`open location`：

```
tell application "Firefox" to open location "http://duckduckgo.com" 
```

但是，这会在新选项卡中打开它。我在网上搜索并找到了一种解决方法，它使用系统事件来突出显示地址栏并通过击键输入 url，但是找到一个更优雅的解决方案会很好（而且每次我看到 url 时都会发笑鬼输入）。

我正在运行 Firefox 3.6.28，这是将在我的 ppc mac (10.4.11) 上运行的最新版本。

谢谢你的帮助！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-25T02:00:24.010

系统事件是 Firefox 的最佳选择。您应该使用 Safari 或 Chrome。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-25T19:11:21.190

在 Applescript 字典（在文件菜单 > 打开字典 > Firefox 中找到）中，您会发现 Firefox 的获取 URL 功能。我正在运行一个稍旧的版本，所以我不确定这是否可行，但我能够成功运行：

```
tell application "Firefox"
Get URL "http://duckduckgo.com"
end tell 
```

这会在现有的 Firefox 窗口中打开引号中列出的 URL。

您可以看到还有其他功能，例如*OpenURL*，它会在新窗口中打开指定的 URL，这些功能也列在 Firefox 字典中。

# perl - Perl 模块丢失错误

> ID：12575239
> 
> 赞同：-3
> 
> 时间：2012-09-25T01:54:02.903
> 
> 标签：perl, perl-module

我是一个新人，学习 perl 并按时工作。我真的被困在这一点上，过去 4 小时一直在做这件事，但没有任何结果。

我在一个目录中使用了一堆自定义模块，然后我得到了一张票来实现一个新的知识库，所以我在 Moduledirectory 中添加了一个新模块。添加后，当我尝试访问 MyModule 时，它​​根本不起作用。我明白了

```
Can't locate FolderName/MyModuleName.pm in @INC 
```

有人可以帮帮我吗。这真的很烦人。我试图重新启动 apache 服务器，但仍然出现相同的错误。

我也尝试只编译我的模块，但我得到了同样的错误，除了模块的名称不同，它是我在 MyModule 中调用/使用的那个。

如果你能帮助我，请告诉我。提前致谢。

编辑：添加更多详细信息，我得到的确切错误（带有换行符以提高可读性）是：

```
Can't locate Net2Net/KnowledgeBase.pm in @INC (@INC contains:
    (DOCUMENT_ROOT)/bin 
    /usr/local/lib/perl5/5.8.8/sun4-solaris
    /usr/local/lib/perl5/5.8.8
    /usr/local/lib/perl5/site_perl/5.8.8/sun4-solaris
    /usr/local/lib/perl5/site_perl/5.8.8
    /usr/local/lib/perl5/site_perl
    .
) at /data1/web/intradev.com-80/docs/gss/kb/ajax-kb-update.cgi line 6.
BEGIN failed--compilation aborted at /data1/web/intradev.com-80/docs/gss/kb/ajax-kb-update.cgi line 6. 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-09-25T02:09:22.280

错误消息说明了一切......

*您的自定义模块*安装在哪里？

Perl 使用一个称为跟踪目录的数组`@INC`来搜索 Perl 模块。如果你在`perl -V`命令行输入，你会看到你的默认目录列表在哪里`@INC`。您可以将模块放在`@INC`列表中的目录之一中。您还可以使用 use lib 添加`@INC`目录[；](http://perldoc.perl.org/lib.html)语用。这需要在您的 Perl 源代码中。

大多数`@INC`列表都包含当前目录，因此您通常可以在其中粘贴模块。但是，是在 Apache 还是 perl_mod 中作为 CGI 脚本运行？最好的办法是使用[use Cwd；](http://perldoc.perl.org/Cwd.html)模块来查看当前目录是什么。CGI 可能会删除某些环境变量作为安全措施。

还有一件事。如果 Perl 模块是`Foo::Bar`，则该模块位于目录列表`Foo/Bar.pm`下的某个目录下`@INC`。如果是`Foo::Bar::Foom`，它指的是模块`Foo/Bar/Foom.pm`。有些人只是复制没有目录的模块。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-25T18:26:49.360

该文件位于

```
/data1/web/intradev.com-80/docs/bin/Net2Net/KnowledgeBase.pm 
```

但是 Perl 搜索以下位置（假设 cwd 是`/`，这可能是 apache 下的 CGI）：

```
/(DOCUMENT_ROOT)/bin/Net2Net/KnowledgeBase.pm 
/usr/local/lib/perl5/5.8.8/sun4-solaris/Net2Net/KnowledgeBase.pm 
/usr/local/lib/perl5/5.8.8/Net2Net/KnowledgeBase.pm 
/usr/local/lib/perl5/site_perl/5.8.8/sun4-solaris/Net2Net/KnowledgeBase.pm 
/usr/local/lib/perl5/site_perl/5.8.8/Net2Net/KnowledgeBase.pm 
/usr/local/lib/perl5/site_perl/Net2Net/KnowledgeBase.pm 
/Net2Net/KnowledgeBase.pm 
```

因此，Perl 找不到它。你必须告诉它查看

```
/data1/web/intradev.com-80/docs/bin 
```

您可以通过添加来做到这一点

```
use lib '/data1/web/intradev.com-80/docs/bin'; 
```

到你的`.cgi`. （其他方法包括使用`-I`命令行选项和 env var `PERL5LIB`。请参阅[perlrun](http://perldoc.perl.org/perlrun.html)。）看起来有人试图这样做（或等效），但这样做（等效）搞砸了

```
use lib '(DOCUMENT_ROOT)/bin';   # Wrong! 
```

* * *

如果您想使用相对路径，以下方法也可以使用：

```
use Cwd            qw( realpath );
use File::Basename qw( dirname );

use lib dirname(realpath($0)).'/../../bin'; 
```

# apache-flex - Flex 4.6：无法解决 到组件实现

> ID：12575241
> 
> 赞同：3
> 
> 时间：2012-09-25T01:54:05.290
> 
> 标签：apache-flex, datagrid, flex4.6

我对此很陌生。为 Android 设备构建“Flex 应用程序”移动应用程序。运行最新的 Flex/FlashBuilder (4.6)。

查看项目属性： Builders: Flex & AIR application Builder Flex Compiler: "Use default SDK (currently "Flex 4.6.0") 在我的设计视图中，我绝对看不到 MX DataGrid 控件。我将控件添加到我的应用程序通过粘贴此页面上最后一个示例中的代码：http: [//help.adobe.com/en_US/flex/using/WS2db454920e96a9e51e63e3d11c0bf66ce9-7ff2.html](http://help.adobe.com/en_US/flex/using/WS2db454920e96a9e51e63e3d11c0bf66ce9-7ff2.html)

编译时出现此错误：*"could not resolve to a component implementation"*。这是我的代码：

```
<?xml version="1.0" encoding="utf-8"?>
<!-- dpcontrols/DataGridPassData.mxml -->
<s:View xmlns:fx="http://ns.adobe.com/mxml/2009"
                    xmlns:s="library://ns.adobe.com/flex/spark"
                    xmlns:mx="library://ns.adobe.com/flex/mx" 
                    title="Jobs List">
          <fx:Script>
                    <![CDATA[
                              import mx.collections.*;
                              private var DGArray:Array = [
                                        {Lease:'Bagby Heirs', Well:'1', Location:'Quitman', Customer:'Fair Oil Company', ScheduleDate:'2/23/2012', ServiceDate:'5/16/2012'},
                                        {Lease:'ITU', Well:'301', Location:'Ingram Trinity', Customer:'Southwest Operating, Inc.', ScheduleDate:'3/19/2012', ServiceDate:'4/25/2012'},
                                        {Lease:'ITU', Well:'81', Location:'ITU', Customer:'Southwest Operating, Inc.', ScheduleDate:'3/19/2012', ServiceDate:'4/25/2012'},
                                        {Lease:'Tolliver A', Well:'5', Location:'Turner Town', Customer:'SEDI', ScheduleDate:'4/16/2012', ServiceDate:'5/11/2012'},
                                        {Lease:'W R Cady', Well:'1', Location:'Coffield', Customer:'Green River Resource', ScheduleDate:'5/9/2012', ServiceDate:'4/10/2012'},
                                        {Lease:'Royal National Bar', Well:'2', Location:'Coffield', Customer:'Green River Resource', ScheduleDate:'5/9/2012', ServiceDate:'4/10/2012'},
                                        {Lease:'Pan American L', Well:'1', Location:'Chandler', Customer:'East Texas Oil & Gas', ScheduleDate:'5/14/2012', ServiceDate:'6/8/2012'},
                                        {Lease:'Paluxy B Sand', Well:'5', Location:'West Tyler', Customer:'Culver & Cain', ScheduleDate:'6/1/2012', ServiceDate:'5/25/2012'},
                                        {Lease:'Wh Pittman Hei', Well:'2', Location:'Quitman', Customer:'Southwest Operating, Inc.', ScheduleDate:'7/10/2012', ServiceDate:'6/18/2012'},
                                        {Lease:'Vivian Pruitt', Well:'1', Location:'Crow - Hwy 80M', Customer:'Buffco Productions, Inc.', ScheduleDate:'8/7/2012', ServiceDate:'8/29/2012'}
                              ];

                              [Bindable]
                              public var initDG:ArrayList;

                              //Initialize initDG ArrayList variable from the Array.
                              //If you use this technique to process an HTTPService,
                              //WebService, or RemoteObject result, use an ArrayCollection
                              //rather than an ArrayList.
                              public function initData():void {
                                        initDG=new ArrayList(DGArray);
                              }
                    ]]>
          </fx:Script>
          <!--s:states>
          <s:State name="loginState"/>
          <s:State name="State1"/>
          </s:states-->

          <fx:Declarations>

                    <!-- Place non-visual elements (e.g., services, value objects) here -->
                      <fx:Component className="AlertMsgDay">
                              <s:SkinnablePopUpContainer x="70" y="300">
                                        <s:TitleWindow title="Filtering" close="close()">
                                                  <s:VGroup horizontalAlign="center" paddingTop="8" paddingBottom="8" paddingLeft="8" paddingRight="8" gap="5" width="100%">
                                                            <s:Label text="This button will filter jobs to show only TODAY."/>
                                                            <s:Button label="OK" click="close()"/>
                                                  </s:VGroup>
                                        </s:TitleWindow>
                              </s:SkinnablePopUpContainer>
                    </fx:Component>

                    <fx:Component className="AlertMsgWeek">
                              <s:SkinnablePopUpContainer x="70" y="300">
                                        <s:TitleWindow title="Filtering" close="close()">
                                                  <s:VGroup horizontalAlign="center" paddingTop="8" paddingBottom="8" paddingLeft="8" paddingRight="8" gap="5" width="100%">
                                                            <s:Label text="This button will filter jobs to show only THIS WEEK."/>
                                                            <s:Button label="OK" click="close()"/>
                                                  </s:VGroup>
                                        </s:TitleWindow>
                              </s:SkinnablePopUpContainer>
                    </fx:Component>

          </fx:Declarations>

          <s:BorderContainer x="10"  y="111" borderColor="#808080" cornerRadius="5" borderWeight="2" width="98%" height="369">
                    <s:Scroller width="100%" height="363" verticalScrollPolicy="on">
                              <s:Group width="100%" height="100%">

                                        <mx:DataGrid id="myGrid" width="900" height="350" dataProvider="{initDG}" >  <<<< THE ERROR IS HERE
                                                  <mx:columns>
                                                            <mx:DataGridColumn dataField="Lease" />
                                                            <mx:DataGridColumn dataField="Well" />
                                                            <mx:DataGridColumn dataField="Location" />
                                                            <mx:DataGridColumn dataField="Customer" />
                                                            <mx:DataGridColumn dataField="ScheduleDate" headerText="Schedule Date" />
                                                            <mx:DataGridColumn dataField="ServiceDate" headerText="Service Date" />
                                                  </mx:columns>
                                        </mx:DataGrid>

                              </s:Group>
                    </s:Scroller>
          </s:BorderContainer>

          <s:Label x="10" y="10" width="96" height="53" fontSize="24" text="Sort by:"
                               verticalAlign="middle"/>
          <s:Button id="btn_show_today" x="104" y="11" width="105" height="53" label="Today"
                                fontSize="13" fontWeight="bold" click="(new AlertMsgDay()).open(this, false);"/>
          <s:Button id="btn_show_week" x="216" y="11" width="105" height="53" label="Week"
                                fontSize="13" fontWeight="bold" click="(new AlertMsgWeek()).open(this, false);"/>
          <s:Button x="348" y="10" width="184" height="53" label="Edit this Job" fontSize="18" click="navigator.pushView(views.JobFormView);"/>
</s:View> 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-25T02:01:46.373

mx:DataGrid 不是移动优化组件，除非您明确添加 MX SWC，否则它不会出现在 Flex Mobile 项目中。MX SWC 应该位于您的框架目录中。

在看

> [Flex 框架目录]\frameworks\libs\mx\mx.swc

如果您在 Windows 上使用默认的 Flash Builder 安装；那么你的 Flex 框架目录可能是这样的：

> C:\Program Files (x86)\Adobe\Adobe Flash Builder 4.6\sdks\4.6.0

您可以在项目设置的 Flex Build Path 页面中将 SWC 添加到您的库路径中。

我不希望在移动设备上从 MX DataGrid 获得非常好的性能，但我听说有人使用它取得了成功。

# iphone - How to select a file from device and send it to server?

> ID：12575245
> 
> 赞同：-1
> 
> 时间：2012-09-25T01:55:04.250
> 
> 标签：iphone, objective-c, ios, xcode, file-upload

I am developing an small application where when user tap on a button then a prompt will open and user can select any file like the browse option and send it to server. In iOS there are any option to do that. If yes, then please help me.

Thanks.

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-25T01:57:18.453

In iOS each app runs in its own sandbox and there's just no single place where user files are stored and from which to select them. You can implement file selection only from files previously put inside your particular app sandbox.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-25T01:58:14.247

The filesystem is sandboxed. You have access to files that are saved via your app. Also you can access things like contacts, photo library, etc. with user permissions. There is no iOS equivalent to Mac OSX Finder.

# java - Post to a servlet from AJAX code Syntax issues

> ID：12575246
> 
> 赞同：0
> 
> 时间：2012-09-25T01:55:06.887
> 
> 标签：java, ajax, jsp, servlets, path

I am sending some data from AJAX to a servlet. This syntax works very well on my local.

```
xmlhttp.open("GET", "../MyTestServlet?section="+sId, true); 
```

However, on our DEV UNIX server this does not work. I tried the following, but this does not work

```
xmlhttp.open("GET", "<%=request.getContextPath()%>/MyTestServlet?section=+sId", true); 
```

The servlets are in the following package "`com.myPackage.myApp.servlets`"

What would be the right syntax?

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-25T17:21:18.037

尝试在服务器系统上使用真实路径

[ServletContext.getRealPath()](http://docs.oracle.com/javaee/5/api/javax/servlet/ServletContext.html#getRealPath%28java.lang.String%29)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-26T22:41:25.870

好吧，问题不在于 servlet 的路径，而在于不同的路径。实际上 Query.properties 文件也有路径问题，一旦我解决了它，它就开始工作了。所以实际上第一个链接有效。抱歉，大家在这件事上浪费了你的时间。感谢所有的回复。

# html - Why is my page not scrollable?

> ID：12575251
> 
> 赞同：9
> 
> 时间：2012-09-25T01:55:48.223
> 
> 标签：html, css, scrollable

So I have made a few pages that use the following css code:

```
html { overflow-y: scroll; }
    ul.navbar {
    list-style-type: none;
    position: fixed;
    top: 00px;
    left: 00px;
    width: 200px;
    height: 700px; 

    background-image:url('/images/B_left-background.png');
}

ul.header {
    position: fixed;
    top: -20px;
    left: 240px;
    height: 100px;
    width:700px;
    background-image:url('/images/B_left-top.png');
}

body {

    position: fixed;
    top: 100px;
    left: 300px;

    font-family: Georgia, "Times New Roman",
        Times, serif;

    background-color: #D6E9B4;
}
div.scrollableContainer {
    background: none repeat scroll 0 0 ;
    border: 1px solid #999999;
    height: 400px;
    margin: 40px;
    overflow: auto;
    width: 800px;
}
h1 {font-family: Helvetica, Geneva, Arial,
        SunSans-Regular, sans-serif }
ul.navbar a {text-decoration: none }

a.send{
    color: black;
    background-image:url('/images/send-message-bt.png');
    position:fixed;
    top:200px;
    left:0px;
    height:80px;
    width:290px;
}

a.token{
    color: black;
    background-image:url('/images/token-ID-bt.png');
    position:fixed;
    top:300px;
    left:0px;
    height:80px;
    width:290px;
}

a.history{
    color: black;
    background-image:url('/images/history-bt.png');
    position:fixed;
    top:400px;
    left:0px;
    height:80px;
    width:290px;
}

a.comp{
    background-image:url('/images/competition-bt.png');
    position:fixed;
    top:500px;
    left:0px;
    height:80px;
    width:290px;
}

a.out{
    background-image:url('/images/B_log-out-bt.png');
    position:fixed;
    top:600px;
    left:50px;
    height:60px;
    width:160px;
} 
```

I would like to make the whole page scrollable, so that if someone on a low-resolution device can still scroll down. As you can see I put in the: html { overflow-y: scroll; } But this does not help.

Is there any way I can fix this? Does it have something to do with me setting the fixed-heights?

* * *

## 回答 #1

> 赞同：22
> 
> 时间：2012-09-25T02:06:14.420

尝试这个：

```
html { overflow-y: scroll; }
body { position: absolute; } 
```

或这个：

```
html { overflow-y: scroll; overflow-x:hidden; }
body { position: absolute; } 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2017-05-02T08:44:30.890

溢出-y：滚动；到正文和 html

```
html,body{overflow-y: scroll; } 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2021-02-18T12:49:02.023

对我来说，有一个：

```
overflow-y: hidden; 
```

在 body 的第一个孩子的 css 中，阻止页面变得可滚动。一旦我删除它，页面可以滚动。

# python - gstreamer videomixer2 cpu usage 164%. Any solution to decrease

> ID：12575254
> 
> 赞同：0
> 
> 时间：2012-09-25T01:56:34.947
> 
> 标签：python, gstreamer

As a part of my project, I will have to synchronize 2 videos. Since i am implementing it in python, i started using gstreamer.

My pipeline looks like this

filesrc -> decoder-> queuev -> videobox

filesrc-1 -> decoder-> queuev1 -> videobox1

both of these videobox is joined to mixer like this

[videobox 1 and 2 ] -> mixer -> ffmpegcolorspace ->videosink

All of them in a single pipeline.

But problem here is when i run the code , i get 174% cpu usage which i think is not really optimized. Is there any way to reduce this? because even if i simply run 3 videos in parallel pipelines i get 14% cpu usage.

I am also uploading part of my code here.

```
self.pipeline = gst.Pipeline('pipleline')
self.filesrc = gst.element_factory_make("filesrc", "filesrc")

self.filesrc.set_property('location', videoloc1)
self.pipeline.add(self.filesrc)

self.decode = gst.element_factory_make("decodebin2", "decode")
self.pipeline.add(self.decode)

self.queuev = gst.element_factory_make("queue", "queuev")
self.pipeline.add(self.queuev)

self.video = gst.element_factory_make("autovideosink", "video")
self.pipeline.add(self.video)

self.filesrc_2 = gst.element_factory_make("filesrc", "filesrc2")
self.filesrc_2.set_property('location', videoloc2) 
self.pipeline.add(self.filesrc_2)

self.decode_2 = gst.element_factory_make("decodebin2", "decode_2")
self.pipeline.add(self.decode_2)

self.queuev_2 = gst.element_factory_make("queue", "queuev_2")
self.pipeline.add(self.queuev_2)

self.mixer = gst.element_factory_make("videomixer2", "mixer")
self.pipeline.add(self.mixer)

self.videobox_1 = gst.element_factory_make("videobox", "videobox_1")
self.pipeline.add(self.videobox_1)

self.videobox_2 = gst.element_factory_make("videobox", "videobox_2")
self.pipeline.add(self.videobox_2)

self.ffmpeg1 = gst.element_factory_make("ffmpegcolorspace", "ffmpeg1")
self.pipeline.add(self.ffmpeg1)

gst.element_link_many(self.filesrc,self.decode)
gst.element_link_many(self.filesrc_2,self.decode_2)  
gst.element_link_many(self.queuev,self.videobox_1,self.mixer,self.ffmpeg1,self.video)                                          
gst.element_link_many(self.queuev_2,self.videobox_2,self.mixer) 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-26T09:02:20.960

Videomixer 正在使用 cpu 来混合视频。无论如何，为了知道，运行一个分析器（oprofile，sysprof）来查看哪些代码使用最多的 cpu。此外，您没有就所涉及的分辨率和色彩空间以及您运行它的硬件发表任何意见。因此，很难说它是否出乎意料地慢。最后，你不需要混合视频来同步它们，你可以在一个管道中运行它们。例如，您的应用程序可以在窗口或其他任何地方渲染到单独的绘图区域。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2016-08-12T16:05:28.070

您可以使用流同步器[https://gstreamer.freedesktop.org/data/doc/gstreamer/head/gst-plugins-base-plugins/html/gst-plugins-base-plugins-streamsynchronizer.html](https://gstreamer.freedesktop.org/data/doc/gstreamer/head/gst-plugins-base-plugins/html/gst-plugins-base-plugins-streamsynchronizer.html)

# java - Mockito 测试 - 我的测试用例失败的原因

> ID：12575258
> 
> 赞同：0
> 
> 时间：2012-09-25T01:57:44.493
> 
> 标签：java, junit4, mockito

昨天学JUnit，今天学Mockito

我写了一个简单的类；

```
public class FileOperations {
    public boolean autoMove(){
        List<byte[]> patterns = getListofPatterns();
        for(byte[] pattern: patterns){
            System.out.println(new String(pattern));
            if(seekInHeader(pattern)){
                //logic to move file of specific folder of specific extension
                return true;
            }
        }
        return false;
    }

    public boolean seekInHeader(byte[] pattern){
        return false;
    }

    public List<byte[]> getListofPatterns(){
        return null;
    }
} 
```

并尝试按如下方式对其进行测试

```
@Test
public void autoMoveTest(){
    FileOperations fo = mock(FileOperations.class);//stub
    List<byte[]> dummyPatterns = new ArrayList<byte[]>();//specify stub value
    dummyPatterns.add("amit".getBytes());

    when(fo.getListofPatterns()).thenReturn(dummyPatterns);
    when(fo.seekInHeader(anyString().getBytes())).thenReturn(true);

    System.out.println(new String(fo.getListofPatterns().get(0)));
    System.out.println(fo.seekInHeader("amit".getBytes()));
    System.out.println(fo.autoMove());
    assertTrue(fo.autoMove());
} 
```

输出：

> 阿米特
> 
> 真的
> 
> 错误的

当我将 seekHeader() 设置为返回 true 时。为什么 fo.autoMove() 返回 false？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-25T04:43:30.013

使用模拟，任何方法实际上都不会做任何事情，除非您明确指定它们应该这样做。模拟的全部意义在于功能已被替换，要么完全没有功能（默认），要么被您存根的功能所替换。

模拟的默认功能是**每个方法**什么**都不**做，然后返回`false`（对于布尔值）、零（对于数字基元）、空集合或`null`. 所以在这种情况下，`autoMove`总是会返回`false`，除非你把它存根做一些不同的事情。

使用模拟的整个想法是你***不要模拟******你试图测试***的类。相反，您模拟了与之交互的其他类。因此，如果一个类`A`的方法调用了一个类的方法`B`，并且您希望测试类`A`；然后你会使用一个模拟类`B`，并存根`B`被调用的方法。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-27T01:19:38.620

您可以使用 spy 进行如下操作；

```
@Test
    public void autoMoveTest(){
        FileOperations fo = new  FileOperations("");
        FileOperations spyFo = spy(fo);

        List<byte[]> dummyPatterns = new ArrayList<byte[]>();//specify stub value
        dummyPatterns.add("amit".getBytes());

        when(spyFo.getListofPatterns()).thenReturn(dummyPatterns);
        when(spyFo.seekInHeader(anyString().getBytes())).thenReturn(true);//stubbing a method

        assertTrue(spyFo.autoMove());
    } 
```

**为什么您的代码失败**

因为你没有存根`fo.autoMove()`。当您使用模拟对象调用真实方法时，实际方法永远不会运行。它只返回返回类型的默认值或存根值。因此，即使您`true`从中返回`autoMove()`，它也会为模拟对象返回 false。

# java - Java: Why does adding the package specification to my class cause a run-time error?

> ID：12575263
> 
> 赞同：0
> 
> 时间：2012-09-25T01:58:47.083
> 
> 标签：java, classpath, package

So, my code is pretty simple. Just wanted to try and create a package.

```
// /home/user1/Code/packageTest/src/myPackage/Test.java

package myPackage;

public class Test
{

    public static void main(String[] args)
    {
        System.out.println("Hello, world.");
    }
} 
```

let's say this code is in some directory myPackage.

If I comment out the first line (package specification) the code runs fine, prints the message. It compiles either way, but if it compiled with the package line not commented out, it causes a run-time error.

What do I need to do to successfully make a package? I can't seem to find the right search terms to turn up a real explanation on this, only stuff about package naming conventions, why they're used to separate namespaces, bla bla bla. The next part of this experiment was going to be trying import my own packages, obviously I didn't even get that far.

Something to do with the classpath perhaps...? What and where is my "base directory"? Any information on this would be greatly appreciated.

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-25T02:04:32.687

您应该在名称为的目录中的 java 文件中创建该类`myPackage`。然后你应该走出那个目录并编译它如下

```
javac myPackage/Test.java 
```

然后使用完全限定类名 (FQCN) 运行它，如下所示：

```
java myPackage.Test 
```

例如

```
C:\Temp\test1>type myPackage\Test.java
package myPackage;

public class Test
{

    public static void main(String[] args)
    {
        System.out.println("Hello, world.");
    }
}
C:\Temp\test1>javac myPackage/Test.java

C:\Temp\test1>java myPackage.Test
Hello, world.

C:\Temp\test1> 
```

# c - Linux 上的 strdup 使用了哪个宏？

> ID：12575267
> 
> 赞同：2
> 
> 时间：2012-09-25T01:59:49.807
> 
> 标签：c, strdup

我已经在 StackOverflow 上的代码示例中看到了 strdup，并且刚刚尝试在 Linux（3.0.0-21-generic x86_64）上使用它。

编译器（clang）知道它在 string.h 中，但仍然抱怨即使包含 string.h 也没有原型。事实证明，strdup 包含在 string.h 中定义的 #if 中。我搜索了这个站点，发现一个帖子说 strdup 是**POSIX**例程，而不是 C 标准库例程。

可能会暴露它的宏是

*   __USE_SVID
*   __USE_BSD
*   __USE_XOPEN_EXTENDED
*   __USE_XOPEN2K8

这些中的每一个都未在包含在 stdlib.h 中的 features.h 中定义。

为什么该列表中没有 POSIX 宏以及人们使用哪个宏/编译器开关来公开 string.h 中的 strdup？

编辑：根据吉姆在下面的评论，我发现

```
#define _POSIX_SOURCE 1 
```

或者

```
#define _POSIX_C_SOURCE 1 
```

多于

```
#include <stdlib.h>
#include <stdio.h>
#include <string.h> 
```

不要在我的系统上公开 strdup。

但这些确实：

```
#define _BSD_SOURCE 1
#define _SVID_SOURCE 1 
```

编辑2：根据基思的评论，我发现这也有效：

```
#define _POSIX_C_SOURCE 200809L 
```

编辑3：根据乔纳森的评论，这些也有效

```
#define _XOPEN_SOURCE 500
#define _XOPEN_SOURCE 600
#define _XOPEN_SOURCE 700 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-25T02:05:05.167

__USE... 宏供内部使用。您应该定义 _POSIX_SOURCE，或者可能是您的 feature.h 中的注释中描述的其他功能宏之一......例如，从我刚刚从网上抓取的版本（显然是一个旧的且有些过时的版本），

```
 __STRICT_ANSI__  ANSI Standard C.
   _POSIX_SOURCE    IEEE Std 1003.1.
   _POSIX_C_SOURCE  If ==1, like _POSIX_SOURCE; if ==2 add IEEE Std 1003.2.
   _BSD_SOURCE      ANSI, POSIX, and 4.3BSD things.
   _SVID_SOURCE     ANSI, POSIX, and SVID things.
   _GNU_SOURCE      All of the above, plus GNU extensions. 
```

所以定义 _GNU_SOURCE 会让你得到一切。

编辑：从 Keith Thompson 的评论中，你需要

```
 #define _POSIX_C_SOURCE 200809L 
```

为 strdup。

# android - OpenGLES - 如何有效地在同一个线程中渲染两个窗口（表面）？

> ID：12575269
> 
> 赞同：3
> 
> 时间：2012-09-25T02:00:11.840
> 
> 标签：android, opengl-es

在同一个线程中渲染两个不同的surface时，`eglMakeCurrent`每次都需要调用解除当前surface与线程的绑定，并在渲染某个surface之前将另一个surface绑定到当前线程，而将一个surface与线程解除绑定的操作太费时间了！

源代码：

```
int DisplayPicture(...)
{   
    if (!eglMakeCurrent(m_glesDisplay ,m_glesSurface, m_glesSurface, m_glesContext))
    {
        return 0;
    }

    glUseProgram(programObject);

    glActiveTexture( GL_TEXTURE0 );
    glUniform1i(m_nUniformLocation[0],0);
    glBindTexture( GL_TEXTURE_2D, 0);

    glTexParameteri( GL_TEXTURE_2D, GL_TEXTURE_MIN_FILTER, GL_LINEAR );
    glTexParameteri( GL_TEXTURE_2D, GL_TEXTURE_MAG_FILTER, GL_LINEAR );
    glTexParameteri( GL_TEXTURE_2D, GL_TEXTURE_WRAP_S, GL_CLAMP_TO_EDGE);
    glTexParameteri( GL_TEXTURE_2D, GL_TEXTURE_WRAP_T, GL_CLAMP_TO_EDGE);
    glTexImage2D( GL_TEXTURE_2D, 0, GL_LUMINANCE, nWidth, nHeight, 0, GL_LUMINANCE, GL_UNSIGNED_BYTE, pData );

    ....

    // Update attribute values.
    glVertexAttribPointer(ATTRIB_VERTEX, 2, GL_FLOAT, 0, 0, squareVertices);
    glEnableVertexAttribArray(ATTRIB_VERTEX);
    glVertexAttribPointer(ATTRIB_TEXCOORD, 2, GL_FLOAT, 0, 0, texCoords);
    glEnableVertexAttribArray(ATTRIB_TEXCOORD);

    glDrawArrays(GL_TRIANGLE_STRIP, 0, 4);
    eglSwapBuffers(m_glesDisplay, m_glesSurface);
    glUseProgram(0);
    return 0;
} 
```

ps: 1\. 在OpenGLES中使用纹理，`eglMakeCurrent(display, NULL, NULL, NULL)`会耗费很长时间，为什么？2\. 在某些设备中，在其他设备中`eglMakeCurrent`会正常返回`EGL_BAD_ALLOC`，为什么？

# java - 之前的注释是属性值的缺失值

> ID：12575271
> 
> 赞同：6
> 
> 时间：2012-09-25T02:00:38.303
> 
> 标签：java, netbeans, junit

我通常不会遇到 JUnit 注释的问题。但是今天不知何故，随着我新安装的 Netbeans 7.2，我在使用`@Before`注释时遇到了以下错误：

```
annotation before is missing value for the attribute value 
```

有谁知道如何解决这一问题？

* * *

更新

我正在编写一个 mavenized 网络应用程序。对于TestCase，当我尝试导入`org.junit.Before`程序而不是导入时`org.aspectj.lang.annotation.Before`

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2018-07-26T20:10:14.697

即使在添加 junit 依赖项后，您是否仍然遇到相同的错误`pom.xml`？

检查您是否正在导入正确的库，即

```
import org.junit.Before; 
```

代替

```
import org.aspectj.lang.annotation.Before; 
```

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2012-09-25T02:15:34.757

您是否声明了对最新 JUnit 版本的依赖？

```
<dependency>
    <groupId>junit</groupId>
    <artifactId>junit</artifactId>
    <version>4.10</version>
    <scope>test</scope>
</dependency> 
```

您应该能够导入正确的类：`org.junit.Before`.

# javascript - Node.js：识别脚本是异步的还是非阻塞的

> ID：12575272
> 
> 赞同：3
> 
> 时间：2012-09-25T02:00:40.210
> 
> 标签：javascript, node.js, asynchronous, nonblocking

Node.js 被声明为异步的、事件驱动的、非阻塞 I/O，但我如何识别我的脚本是否是异步的？还是非阻塞？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-25T02:07:44.290

阅读代码；）当库是异步的时，这通常很明显，因为它通常有助于延续或消息传递样式的代码。通常，您可以故意阻止呼叫并查看它的反应。或者更好：分析您的代码。

我不知道有任何工具可以对“输入代码是异步还是同步”回答真假：)

或者您可以共享代码或更多上下文:)？

**编辑：**

> > 你能给我一个阻塞或非异步代码的例子吗？– 六氰化物

这个问题对此有一个讨论：[JavaScript什么时候同步？](https://stackoverflow.com/questions/2035645/when-is-javascript-synchronous)

同步代码将是这样的：

```
console.log("first");
console.log("second");
console.log("third"); 
```

这三行代码同步运行——第一行，第二行，第三行。

相反，此代码异步运行：

```
function f() {
    alert("first");
}
function g() {
    alert("second");
}

// defer execution for 1000 ms
setTimeout(f, 1000);
// defer execution for 500 ms
setTimeout(g, 500);
// run immediately
alert("third"); 
```

您将首先看到“第三个”警报，然后是“第二个”，最后是“第一个”。这是一个非常人为的示例，但是您会看到回调（f 和 g）以及流程与同步代码的根本不同之处。

您可以阅读同步代码，并且大多数事情会像您阅读它们一样发生，其中 - 在异步代码中，事件将触发或回调被调用，并且执行路径可能不像同步阻塞代码那样明显。

Node.js 是异步代码的一个示例，其中大多数函数调用采用一组回调参数来表示成功、失败和其他可能适用的情况。

**编辑2：**

此链接有一些 Javascript 示例，其代码编写为同步/异步样式：[Asynchronous Code Design with Node.js](http://blog.shinetech.com/2011/08/26/asynchronous-code-design-with-node-js/)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-27T08:23:37.517

有一个异步函数列表，包括：

```
process.nextTick( ... )

setTimeout( ... )
setInterval( ... ) 
```

从[文件系统](http://nodejs.org/api/fs.html)模块：

```
var fs = require( 'fs' );
fs.rename( ... )
fs.stat( ... )
fs.readFile( ... )
fs.writeFile( ... )
fs... 
```

更多的`fs`，基本上是异步的，它们的同步版本最后带有“Sync”后缀（虽然应该避免同步版本）。

还有很多很多例子。[EventEmitters](http://nodejs.org/api/events.html)可以被认为是异步的（例如[HTTP 服务器](http://nodejs.org/api/http.html)或[流](http://nodejs.org/api/stream.html)），尽管从技术上讲它们不是（它们依赖于异步操作）。

基本上，几乎所有接受`callback`作为参数的东西都是异步的（或依赖于异步操作），例如：

```
process.nextTick( function( ) { // <--- the callback
    console.log( 'nextTick' );
});
console.log( 'test' ); // <--- will fire before the callback, i.e. asynchronouos 
```

请记住，这显然不是一个规则，值得注意的例子：

```
var arr = [ 1, 2, 3 ];
arr.forEach( function(el) { // <--- the callback
    console.log( el );
});
console.log( 'test' ); // <--- will fire after the callback, i.e. synchronous 
```

因此，同步代码是一种在一行之后触发一行的代码，并且行的顺序很重要。异步代码则相反：行的顺序（几乎）无关紧要。在示例中，您可以更改and`process.nextTick`的顺序，结果仍然相同。`process.nextTick``console.log('test')`

阅读[文档](http://nodejs.org/api/)并尝试记住所有基本的异步函数。

还有一个建议：最好的学习方式是*边做边学*。;-)

# python-2.7 - while循环，计算平均值

> ID：12575276
> 
> 赞同：0
> 
> 时间：2012-09-25T02:01:12.370
> 
> 标签：python-2.7, while-loop

您好我对python相当陌生，想知道我的程序在哪里失败以及为什么..谢谢，基本编码如下，

```
 grade = 0
    total = 0
    scorecount = 0
    while grade >=0:
        grade = raw_input("enter grade ->")
        grade = int(grade)
        total = total + grade
        total = int(total)
        scorecount = scorecount + 1
        scorecount= int(scorecount)
    average = total/scorecount
    print average 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-25T02:08:37.337

使用列表来管理这样的事情会更聪明。

```
grades = []

while True:
    grade = int(raw_input('Enter a grade: '))
    if grade < 0:
        break
    grades.append(grade)

print '\nAverage:', float(sum(grades)) / len(grades) 
```

有比输入负分更好的方法让用户打破循环，但你去了。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-25T02:14:07.300

您在更改后检查 -1，因此您应该检查原始等级是否是该等级，并在处理之前从循环中中断。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-25T02:16:47.767

您接受成绩，然后将其添加到平均值中，*即使它是 -1*`-1` ，因为在循环再次开始之前您不会检查。

要在中途退出循环，请使用`break`. 然后，你可以写

```
while True: # loop 'forever' until break
    grade = raw_input("enter grade ->")
    grade = int(grade)
    if grade == -1:
        break # we're done
    # rest of processing... 
```

# java - Struts2 中的全局资源包

> ID：12575280
> 
> 赞同：0
> 
> 时间：2012-09-25T02:02:34.550
> 
> 标签：java, struts2, resourcebundle

可以在 Struts2 应用程序的全局资源包中存储电子邮件吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-25T02:21:49.137

我不确定你在说什么类型的电子邮件？此外请记住，资源包包含特定于语言环境的对象。当您的程序需要特定于语言环境的资源（例如字符串）时，您的程序可以从适合当前用户语言环境的资源包中加载它。通过这种方式，您可以编写在很大程度上独立于用户语言环境的程序代码，从而将资源包中的大多数（如果不是全部）特定于语言环境的信息隔离开来。

如果您想存储用户电子邮件地址，我认为这不是存储它们的好地方，您可以将它们存储在数据库或任何其他类似的地方。

# regex - Excel VBA 的正则表达式正面后向问题

> ID：12575282
> 
> 赞同：5
> 
> 时间：2012-09-25T02:02:43.900
> 
> 标签：regex, excel, vba

我正在运行 VBA (Excel 2003) 并测试一个积极的后向正则表达式模式。我运行下面的函数，但得到以下错误：

`Run-time error '5017': Method 'Execute' of object 'IRegExp2' failed`

我也试过 `Set re = CreateObject("vbscrip.regexp")`
，但我得到了同样的错误。我已经成功地测试了一些积极的前瞻，他们工作。只是后面有问题。我已经用 Expresso 测试了下面的模式，它运行良好。这是 VBA 特有的风味问题吗？

```
Function regexSearch(pattern As String, source As String) As String
Dim re As RegExp
Dim matches As MatchCollection
Dim match As match
'Create RegEx object
pattern = "(?<=a)b"
source = "cab"
Set re = New RegExp
   re.Multiline = False 
   re.Global = True
   re.IgnoreCase = False
   re.pattern = pattern
'Execute
Set matches = re.Execute(source)
'Output
For Each match In matches
   str = str & match & " "
Next match
regexSearch = str
End Function 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-09-25T02:06:46.877

它特别适用于[vbscript](/questions/tagged/vbscript "显示标记为“vbscript”的问题") （因此也适用于[vba](/questions/tagged/vba "显示标记为“vba”的问题")）。

[vbscript](/questions/tagged/vbscript "显示标记为“vbscript”的问题")不支持lookbehind（负或正）

# c++ - 使用链表 C++ 的稀疏矩阵

> ID：12575289
> 
> 赞同：0
> 
> 时间：2012-09-25T02:03:43.797
> 
> 标签：c++, linked-list, sparse-matrix

我正在编写使用链表存储稀疏矩阵的程序。首先，我创建了一个“节点”类，其中包含条目索引、条目值以及指向下一行和下一列的两个指针。其次，我在 Google 上发现我需要像下面的代码一样创建类 Matrix，但我不明白`Node **rowList`and的含义`node** columnList`。为什么他们在那里使用指向指针的指针，我如何从中实现矩阵？非常感谢。

```
class Node
{
public:
    int iValue, jValue;
    float value;
    Node *rowPtr;
    Node *colPtr;
};

class Matrix
{
    Node **rowList;     // rowList is the pointer to the array of rows
    Node **columnList;  // columnList is the pointer to the array of columns
    int rows, cols;     // number of rows and columns
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-25T02:31:13.793

这似乎正是评论所说的。它们是数组。大概`rowList`将是一个`rows`元素数组，并且`columnList`将是一个`cols`元素数组。它是 a 的原因`Node**`是数组中的每个项目都是 a `Node*`。指向数组的指针总是有一个额外的间接级别（一个额外的`*`）。这意味着当您从该数组中索引单个元素时，您将`Node*`再次获得一个类型的值。

数组是这样创建的：

```
rowList = new Node* [rows];
columnList = new Node* [cols];

// Don't forget to initialise the values to NULL!  Here's the dull way:
for( int i = 0; i < rows; i++ ) rowList[i] = NULL;
for( int i = 0; i < cols; i++ ) columnList[i] = NULL; 
```

当您需要删除它们时（在析构函数中`Matrix`）：

```
delete [] rowList;
delete [] colList; 
```

至于您关于如何从中实现矩阵的问题，这完全取决于您。大概当您在位置创建一个节点时`(i, j)`，您将该节点附加到每个`rowList`和`columnList`。 *即*：

```
Node * node = new Node(i, j, 123.0);
rowList[i] = node;
columnList[j] = node; 
```

但这并不是那么简单，因为节点显然必须同时链接到行列表和列列表中。在最基本的层面上，并使用您提供的结构，这是一种方法：

```
// Inserts newNode at the head of the list and modifies the head pointer.
void insert_row( Node* & r, Node *newNode )
{
    newNode->rowPtr = r;
    if( r != NULL ) r->rowPtr = newNode;
    r = newNode;
}

// Similarly with insert_col()... 
```

现在将上述内容与我的原始示例一起使用：

```
Node * node = new Node(i, j, 123.0);
insert_row( rowList[i], node );
insert_col( columnList[j], node ); 
```

* * *

## 对于订购的刀片

既然你已经有了代码，我会提供我的看法。但是您仍然需要自己做一些工作。

> 我只是试图理解这个概念，但这对我来说太混乱了。

让我们从一开始就清理干净。这是一门课，你正在使用 C++，所以请使用你的 C++ 知识：

```
class Node
{
public:
    Node( int i, int j, int val );

    void InsertRowAfter( Node* node );
    void InsertColAfter( Node* node );

    int iValue, jValue;  // Row and column index, 1-based
    float value;         // Element value
    Node *rowPtr;        // Next element in this row (sorted by jValue)
    Node *colPtr;        // Next element in this column (sorted by iValue)
};

Node::Node( int i, int j, int val )
    : iValue(i)
    , jValue(j)
    , value(val)
    , rowPtr(NULL)
    , colPtr(NULL)
{}

// Inserts the given node to follow this node in the row list
void Node::InsertRowAfter( Node* node )
{
    // [go on, you do it]
}

// Inserts the given node to follow this node in the column list
void Node::InsertColAfter( Node* node );
{
    // [go on, you do it]
} 
```

所以，现在你需要实现这个`Matrix::inputData`功能......基本上你做了你朋友想做的事情，但没有错误和内存泄漏。这意味着您可以这样开始：

```
// Use 'horz' and 'vert' to search through the row and column lists.  If a
// node needs to be created, it will be stored in 'node'.
Node *horz = rowList[iValue - 1];
Node *vert = columnList[jValue - 1];
Node *node;

// If there is no row list or smallest jValue, insert at the head.
// Otherwise, search for an insert point.
if( !horz || horz->jValue > jValue )
{
    // [go on, you do it]
}
else
{
    // Move 'horz' pointer to position at which we will append a node.
    Node *next = horz->rowPtr;
    while( next && next->jValue <= jValue ) {
        horz = next;
        next = next->rowPtr;
    }

    // If replacing an existing value, there's nothing else to do.
    if( horz->jValue == jValue ) {
        horz->value = value;
        return;
    }

    // Otherwise append a new node.
    // [go on, you do it]
} 
```

现在，您完成了该功能，并且不要忘记进行列索引...

# html - Nofollow 为整个页面？

> ID：12575290
> 
> 赞同：2
> 
> 时间：2012-09-25T02:03:50.903
> 
> 标签：html, seo, nofollow

是否可以为整个页面添加nofollow而不是

```
rel="nofollow" 
```

每个链接？

我有一些个人资料页面，用户可以在其中输入他们的联系人和其他可能是垃圾邮件的内容，我 cba 可以更改所见即所得数据的过滤器。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-09-25T05:30:01.000

将此元标记放在`head`

```
<meta name="robots" content="nofollow" /> 
```

参考链接：

*   [使用机器人元标记](http://googlewebmastercentral.blogspot.co.nz/2007/03/using-robots-meta-tag.html)
*   [`rel=nofollow`](http://support.google.com/webmasters/bin/answer.py?hl=en&answer=96569)
*   [在站点链接中正确使用 NoFollow 标签 – SEO 技巧](http://www.dailybloggr.com/2008/07/dos-and-donts-with-the-might-nofollow-tag/)

# c# - 将 foreach 循环转换为 linq 代码

> ID：12575293
> 
> 赞同：3
> 
> 时间：2012-09-25T02:04:27.367
> 
> 标签：c#, linq

下面的代码按预期工作，但我希望将下面的代码转换为使用 Linq？有什么建议么？

```
 string[] selections = "Men,Women,Boys".Split(',');           

        int _chkboxId = 0;  
        int _chkboxTextId = 1;
        try
        {
            string id = "lstchk_" + _chkboxId;
            while (!driver.FindElement(By.Id(id)).Equals(null))
            {
                string checkboxId = String.Format("lstchk{0}", _chkboxTextId);
                string checkboxName = driver.FindElement(By.Id(checkboxId)).Text;

                foreach (string match in selections)
                {
                    if (checkboxName == match.Trim())
                    {
                        //matched... do more work here...
                    }
                }
           } 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-09-25T02:08:38.643

```
foreach (string match in selections.Where(match => checkboxName == match.Trim()))
{
    //matched... do more work here...
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-25T02:08:40.550

```
switch(checkboxName) {
    case "Men":
    case "Women":
    case "Boys":
        // do more work here
    default:
        // no match, bail
} 
```

有时，编写代码的方式不同。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-09-25T02:28:32.310

如果您的`selections`列表仅包含不同的值，则可以使用

```
if(selections.Any(match=>match.Trim().Equals(checkboxName)))
{
    //Do work
} 
```

而不是你的循环。如果您的列表可能包含不明确的值，则相同，但每个工作应该只完成一次`checkboxName`

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-10-23T12:21:21.150

您如何将这个简单的 foreach 转换为 linq 语句？

```
 public List<string> GetItems()
        {
        var items = new List<string>();

        foreach (Ranorex.ListItem item in ranorexComboBox.Items)
            {
            items.Add(item.Text);
            }

        return items;
        } 
```

# php - 两次打开和关闭 mysql 连接会比只做一次更会减慢我的网站速度吗？

> ID：12575298
> 
> 赞同：0
> 
> 时间：2012-09-25T02:05:33.263
> 
> 标签：php, mysql

我想了解打开和关闭 mysql 连接对网站性能有多大影响。目前，我的 PHP 网站将在代码的两个不同部分打开和关闭一个 mysql 连接。对我来说，让它们保持原样分开要容易得多。我只是担心我的网站速度变慢了很多。我的恐惧是没有根据的吗？或者我应该停止懒惰并尝试将我的所有代码塞进一个打开然后关闭的mysql连接而不是打开和关闭然后打开和关闭mysql连接两次？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-25T02:34:38.490

是的......它会影响......不会显着......但它会很明显......我根据我自己的经验告诉你这个......我已经做了两个门户网站......在这两种情况下都没有连接sequentiay 打开并 cosed....结果是每次客户端请求必须发送到服务器并等待服务器响应...在这种情况下，如果您使用的是 .net 技术，那么更喜欢使用数据集...因为它不需要每次打开数据库连接并关闭它......它只是将所需（查询）数据库的副本保存在数据集中并执行操作......谢谢......

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-25T02:39:14.927

打开和关闭mysql连接是不是有问题？当您使用大量查询或循环查询时，速度会变慢。

有关更多信息，请参阅[如何提高速度](http://developer.yahoo.com/performance/rules.html)

# regex - 正则表达式匹配时删除特殊字符

> ID：12575299
> 
> 赞同：0
> 
> 时间：2012-09-25T02:05:46.837
> 
> 标签：regex, perl, replace

我有一个像 test.l 这样的文件

```
car ( "kia"
max speed
min speed
price "XXX"
)
bike ( "R1"
max speed
min speed
price "YYY"
) 
```

我想删除具有“价格”的行中的引号。我一直在尝试使用：

```
use strict;

open FILE, "<<test.l";
#open (FILE2,">>test.l");

while (my $string = <FILE>) {

    if ($string =~ m/^price/ig) {

        $string =~ s/\"//ig;
        print  FILE $string;
    }
}
close FILE;
#close FILE2; 
```

遇到“价格”时，我可以用修改后的行覆盖输入文件吗？？？上面的代码只是打印输入而不做任何更改。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-25T02:12:22.553

不，这真的不可能。您必须创建一个临时文件。以下技巧将为您创建临时文件：

```
local @ARGV = 'test.1';
local $^I = '';          # Use .bak on Windows
while (<>) {
   s/"//g if /^price/;
   print;
} 
```

基本上和做的一样

```
perl -i -pe's/"//g if /^price/' test.1 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-25T07:22:53.220

```
perl -ne 'if(/^price/){s/\"//g;}print' your_file 
```

# python - Python重新匹配问题

> ID：12575304
> 
> 赞同：0
> 
> 时间：2012-09-25T02:06:27.160
> 
> 标签：python, regex

这是我的代码的样子......

```
if re.match('[a-z]',usrInput):
    run onlyLetters function
elif re.match('[0-9]',usrInput):
    run onlyNumbers function
elif re.match('[a-z0-9]',usrInput):
    run lettersAndNums function 
```

问题是，如果我输入诸如 之类的文本`'2394jsdkfjsdkm'`，它将读取为 onlyLetters，因为它满足 if 语句中的第一个条件。我真的希望这样的输入是字母和数字。我需要如何更改代码？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-25T02:12:49.970

如果您只想查看字符串是否全是数字、字母或字母数字：

```
if usrInput.isalpha():
    # all letters
elif usrInput.isdigit():
    # all numbers
elif usrInput.isalnum():
    # all letters or numbers 
```

请注意，这允许大写和小写字母；如果您只想要小写字母，请添加`and usrInput.islower()`.

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-25T02:09:19.233

您的代码仅检查第一个字符是否与模式匹配。如果要确保字符串中的*所有*字符都与模式匹配，请使用`[pattern]*$`，如下所示：

```
if re.match('[a-z]*$',usrInput):
    run onlyLetters function
elif re.match('[0-9]*$',usrInput):
    run onlyNumbers function
elif re.match('[a-z0-9]*$',usrInput):
    run lettersAndNums function 
```

这是因为`*`意思是“任意数量的字符”，`$`意思是“字符串的结尾”。

# c++ - c ++使用字符串的一部分查找字符串

> ID：12575305
> 
> 赞同：1
> 
> 时间：2012-09-25T02:06:28.083
> 
> 标签：c++

假设我们有：

```
string list[]= {"12.34.56.78","55.34.5","23.44.5"} 
```

我希望用户输入字符串的一部分，这也是一个字符串：例如字符串 55，它将遍历字符串 a 并查找整个字符串并打印`"55.34.5"` 我正在做的是：

`str`是字符串输入，`list`是字符串的完整列表

```
for (int i=0; i<n; i++){
  for (int j=0; j<(list[i].length()); j++){
    for (int k=0; k<(str.length()); k++){
      if (list[i][j] == str[k])
        cout<<list[i]<<endl;
      else
        break; 
```

但是，这有一个问题，它不能正常工作。

更新：

所以我已将我的代码更新为：

```
for (int i=0; i<n; i++)
    if (strncmp(list[i].c_str(), str.c_str(), str.length()) == 0)){
      cout<<list[i]<<endl;
      } 
```

但是，这不会输出任何字符串。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-25T02:14:59.873

这只是将 list[i] 中的第一个字符与字符串中的第一个字符进行比较。如果相应的第一个字符匹配，它会打印整个第 i 个字符串，然后将 k （偏移量）推进到您的 str 中，而不会将偏移量更改为您正在比较的字符串。我认为您可以省去内部两个循环，并使用固定长度的字符串比较，即

```
for (int i=0; i < n; i++) {
  if (strncmp(list[i].c_str(), str.c_str(), str.length()) == 0) {
    // match
  }
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-25T02:23:54.723

对于任何功能狂热者（[看到它的工作](http://liveworkspace.org/code/4d44b0253919cb9b9bbc31b7364bd372)）：

```
std::string findInList(const std::vector<std::string> &searchFrom, const std::string &lookFor) {
    for (const std::string &s : searchFrom) {
        if (s.find(lookFor) != std::string::npos)
            return s;
    }

    return "";
} 
```

我使用向量而不是数组，因为向量更好，并且不需要额外的工作来获取数组大小。如果不使用 C++11，则正常的 for 循环可以正常工作。

这也假设您希望返回第一个匹配项。一个可能更好的选择是返回一个字符串向量，如果没有找到则为空，这表明没有找到，或者与找到的一样多。不要返回找到的字符串，只需将其添加到向量中并继续，完成后返回向量。

如果您想对标准算法进行建模，您还可以让它采用一个开始迭代器和一个结束迭代器，而不是实际的容器。这将允许您在任何类型的容器（包括数组）上调用它，并且该容器中的任何范围都可以查看。

考虑到这两点，您可以将其演变成这样（[看它工作](http://liveworkspace.org/code/e4006e876ada93197f31996762917158)）：

```
template <typename Iterator>
std::vector<std::string> findInList(Iterator start, const Iterator end, const std::string &lookFor) {
   std::vector<std::string> ret;

   for (; start != end; ++start)
       if (start->find(lookFor) != std::string::npos)
           ret.emplace_back(*start);

   return ret;
} 
```

同样，如果不使用 C++11，`emplace_back`可以换成`push_back`.

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-25T12:19:44.310

这是一个结合了前面两个答案的答案。它使用类的[查找](http://www.cplusplus.com/reference/string/string/find/)成员函数`std::string`

```
for (int i=0; i < n; i++) {
    if (list[i].find(str) != std::string::npos) {
        std::cout << list[i] << std::endl;
    }
} 
```

# iphone - 安装新旧版本的 Xcode

> ID：12575310
> 
> 赞同：2
> 
> 时间：2012-09-25T02:07:07.933
> 
> 标签：iphone, ios, xcode, ipad, ios-simulator

所以我看到了这篇文章：http: [//mobiledevelopertips.com/xcode/download-and-install-older-versions-of-xcode-xcode-previous-releases.html](https://web.archive.org/web/20130128192100/http://mobiledevelopertips.com/xcode/download-and-install-older-versions-of-xcode-xcode-previous-releases.html)

（新位置：[在 iosdevelopertips.com 上](http://iosdevelopertips.com/xcode/download-and-install-older-versions-of-xcode-xcode-previous-releases.html)）

关于下载旧版本的 Xcode。到目前为止，我一直只是从 App Store 下载最新版本的 Xcode 并让它做它的事情。最近在一台安装了 Xcode 4.5 的计算机上，我注意到如果我创建一个新项目，我只会得到 iOS 6.0 模拟器，而不是 5.0 或 5.1。

1.  我的第一个问题是，我是否需要旧版本的 Xcode 来为旧操作系统（例如 iOS 4、iOS 5.0、5.1 等）构建应用程序？

2.  如果是这样，安装这些旧版本 Xcode 的最佳方法是什么。我看到他们也有命令行工具可供下载。我不确定所有这些东西是如何工作的。

3.  更新到最新 Xcode 但保留旧 Xcode 的最佳方式是什么？在另一台安装了 Xcode 4.4.1 的机器上，我想我可以从 ADC 网站下载 Xcode 4.5 并安装它。我下载了它，双击 .dmg，然后双击 Xcode 文件。然后安装了 Xcode 4.5，而没有询问我想将它安装在哪里，这样我就可以保留旧版本的 Xcode（假设我需要它，如我的第一个问题中所述）。

谢谢！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-25T02:20:08.553

要回答您的问题：

1) 是的。我重命名 Xcode 以添加版本号（即 Xcode_441.app）

2) 我保存了我下载的所有 Xcode 版本的存档，以便在 Apple 从他们的下载站点中提取它们之后可用。

3）重命名它们对我有用，我通常会直接下载（如果可用），而不是从 MAS 获取。在安装之前尝试重命名 Xcode。

不客气。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-25T02:17:05.260

通过自定义安装路径可以进行多个 XCode 安装。另请注意，新的 4.x 安装模型是应用程序下的应用程序包，它们是自包含的，因此可以在安装新的 XCode 之前重命名旧的。您也可以从开发者网站下载最新的 (4.5)。

您还可以通过转到 4.5 中的 XCode 首选项来添加旧模拟器。

查看 XCode、首选项、下载。XCode 4.5 提供 5.0 和 5.1 模拟器供下载。您下载命令行工具的同一位置。

例如，我将 5.0 模拟器添加到我的 XCode 4.5 安装中以与 6.0 模拟器一起使用：

![XCode 下载](../Images/4f416ba608cbb2ff264464abe100c1ff.png)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-25T02:21:00.553

> 我注意到如果我创建一个新项目，我只会得到 iOS 6.0 模拟器，而不是 5.0 或 5.1。

选择您的项目目标，然后在`Summary`选项卡中为您的应用设置最低的**部署目标**（我认为 Xcode 4.5 中的默认值为 6.0）。

> 我的第一个问题是，我是否需要旧版本的 Xcode 来为旧操作系统（例如 iOS 4、iOS 5.0、5.1 等）构建应用程序？

如果您从旧版本的 Xcode 更新，您可以在新版本中使用旧的 SDK 和模拟器。

> 如果是这样，安装这些旧版本 Xcode 的最佳方法是什么。我看到他们也有命令行工具可供下载。我不确定所有这些东西是如何工作的。

实际上，不同版本的 Xcode 可以彼此愉快地相处。它现在是一个 App Bundle。

> 第三个问题

只需将新版本的 Xcode 拖到 Application 文件夹即可。就这样完成了。:)

# entity-framework - 将 SimpleMembership 与 EF 模型优先结合使用

> ID：12575311
> 
> 赞同：24
> 
> 时间：2012-09-25T02:07:12.690
> 
> 标签：entity-framework, simplemembership

**SimpleMembership**可以与**EF 模型优先**一起使用吗？当我尝试它时，我在调用时收到“无法找到请求的 .NET Framework 数据提供程序”`WebSecurity.InitializeDatabaseConnection.`

`WebSecurity.InitializeDatabaseConnection`换句话说：当连接字符串使用`System.Data.EntityClient`提供者时（就像使用**模型优先**范式时一样），我无法调用 to work。

要重现此问题，请创建一个 MVC 4 应用程序，并将**代码优先的**UserProfile 实体类（您可以使用 MVC 4 模板免费获得）替换为您在实体设计器中创建的**模型优先的**用户类：

1.  **在VS 2012**中创建一个 MVC 4 应用程序并添加一个新的空白实体数据模型。
2.  添加一个名为`User`模型的新实体，其字段为`Id,` `UserName, and FullName`. 因此，此时，`User`数据实体被映射到一个`Users`表，并通过一个使用`System.Data.EntityClient`提供程序的时髦连接字符串进行访问。
3.  验证**EF**是否可以访问`User`实体。一种简单的方法是根据 User 表及其关联的 DbContext 搭建一个 Users 控制器。
4.  编辑该`AccountModels.cs`文件以删除`UserProfile`该类及其关联的`UsersContext`类。用对新 User 类及其关联类的引用替换对（现在缺少的）`UserProfile`和类的引用。`UsersContext``DbContext`
5.  将对 InitializeDatabaseConnection 的调用从 InitializeSimpleMembershipAttribute 过滤器类移至 Global.asax.cs 中的 Application_Start 方法。当您使用它时，修改参数以使用您的新用户实体的连接字符串、表名和 UserId 列名。
6.  删除（不再使用的）`InitializeSimpleMembershipAttribute` 类和对它的引用。

**当您运行repro**时，它会在调用`InitializeDatabaseConnection.`

鲍勃

* * *

## 回答 #1

> 赞同：24
> 
> 时间：2012-10-23T19:33:55.213

SimpleMembership 可以先使用模型。这是解决方案。

1.`InitializeSimpleMembershipAttribute.cs`来自 MVC 4 Internet Application 模板应该是这样的

```
namespace WebAndAPILayer.Filters
{
    [AttributeUsage(AttributeTargets.Class | AttributeTargets.Method, AllowMultiple = false, Inherited = true)]
    public sealed class InitializeSimpleMembershipAttribute : ActionFilterAttribute
    {
        private static SimpleMembershipInitializer _initializer;
        private static object _initializerLock = new object();
        private static bool _isInitialized;

        public override void OnActionExecuting(ActionExecutingContext filterContext)
        {
            // Ensure ASP.NET Simple Membership is initialized only once per app start
            LazyInitializer.EnsureInitialized(ref _initializer, ref _isInitialized, ref _initializerLock);
        }

        private class SimpleMembershipInitializer
        {
            public SimpleMembershipInitializer()
            {
                try
                {
                    WebSecurity.InitializeDatabaseConnection("ConnStringForWebSecurity", "UserProfile", "Id", "UserName", autoCreateTables: true);
                }
                catch (Exception ex)
                {
                    throw new InvalidOperationException("Something is wrong", ex);
                }
            }
        }
    }
} 
```

2.Delete CodeFirst Classes from`AcountModel.cs`

`AccountCotroler.cs`3.修复以使用您的模型优先的 DbContext（方法`ExternalLoginConfirmation(RegisterExternalLoginModel model, string returnUrl)`）

4.定义您的`"ConnStringForWebSecurity"`连接字符串，它与用于模型优先数据库访问的时髦 conn 字符串不同，请注意我们使用 provider `System.Data.SqlClient`not`System.Data.EntityClient`

```
 <connectionStrings>
         <add name="ModelFirstEntityFramework" connectionString="metadata=res://*/Context.csdl|res://*/Context.ssdl|res://*/Context.msl;provider=System.Data.SqlClient;provider
 connection string=&quot;data source=.\SQLEXPRESS;Initial
 Catalog=aspnet-MVC4;Integrated
 Security=SSPI;multipleactiveresultsets=True;App=EntityFramework&quot;"
 providerName="System.Data.EntityClient" />
         <add name="ConnStringForWebSecurity" connectionString="data source=.\SQLEXPRESS;Initial Catalog=aspnet-MVC4;Integrated
 Security=SSPI" providerName="System.Data.SqlClient" />
       </connectionStrings> 
```

* * *

## 回答 #2

> 赞同：12
> 
> 时间：2012-09-25T13:48:46.880

这是 MVC 4 中的一个错误。[这篇博文中有一个解决方法](http://odetocode.com/Blogs/scott/archive/2012/09/23/perils-of-the-mvc4-accountcontroller.aspx)。

> 作为一个动作过滤器，`InitializeSimpleMembershipAttribute`挂钩`OnActionExecuting`来执行延迟初始化工作，但这在生命周期中可能为时已晚。`OnAuthorization`如果需要执行基于角色的访问检查（在 期间），Authorize 属性将需要提供者提前准备好。换句话说，如果对站点的第一个请求遇到如下控制器操作：

```
[Authorize(Roles="Sales")] 
```

> ..那么你会有一个例外，因为过滤器检查用户的角色，但提供者没有初始化。
> 
> **我的建议是从项目中删除 ISMA，并在应用程序启动事件期间初始化 WebSecurity。**

* * *

## 回答 #3

> 赞同：10
> 
> 时间：2012-09-28T17:50:02.367

1 - 您需要启用迁移，最好使用 EntityFramework 5

2 - 移动你的

```
WebSecurity.InitializeDatabaseConnection("DefaultConnection", "UserProfile", "UserId", "EmailAddress", autoCreateTables: true); 
```

到 YourMvcApp/Migrations/Configuration.cs 类中的 Seed 方法

```
 protected override void Seed(UsersContext context)
    {
        WebSecurity.InitializeDatabaseConnection(
            "DefaultConnection",
            "UserProfile",
            "UserId",
            "UserName", autoCreateTables: true);

        if (!Roles.RoleExists("Administrator"))
            Roles.CreateRole("Administrator");

        if (!WebSecurity.UserExists("lelong37"))
            WebSecurity.CreateUserAndAccount(
                "lelong37",
                "password",
                new {Mobile = "+19725000000", IsSmsVerified = false});

        if (!Roles.GetRolesForUser("lelong37").Contains("Administrator"))
            Roles.AddUsersToRoles(new[] {"lelong37"}, new[] {"Administrator"});
    } 
```

现在 EF5 将负责创建您的 UserProfile 表，这样做之后您将调用 WebSecurity.InitializeDatabaseConnection 以仅向已创建的 UserProfile 表注册 SimpleMembershipProvider **（在您的情况下，您可以将“UserProfile”参数值替换为您的自定义表name)**，还告诉 SimpleMembershipProvider 哪一列是 UserId 和 UserName。我还展示了一个示例，说明如何在 Seed 方法中添加用户、角色并将两者与自定义 UserProfile 属性/字段（例如用户的手机（号码））相关联。

3 - 现在，当您从包管理器控制台运行 update-database 时，EF5 将为您的表提供所有自定义属性

有关其他参考资料，请参阅本文的源代码： **[http ://blog.longle.net/2012/09/25/seeding-users-and-roles-with-mvc4-simplemembershipprovider-simpleroleprovider-ef5-codefirst-and-custom -用户属性/](http://blog.longle.net/2012/09/25/seeding-users-and-roles-with-mvc4-simplemembershipprovider-simpleroleprovider-ef5-codefirst-and-custom-user-properties/)**

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-01-13T23:30:20.633

这个问题是由于`WebSecurity.InitializeDatabaseConnection`不能使用连接字符串和`System.Data.EntityClient`提供者名称引起的。

提供双连接字符串听起来不太好，因此您可以先在部分类的构造函数中生成 EF 模型的连接字符串。

代码如下所示

```
public partial class MyDataContext 
{
    private static string GenerateConnectionString(string connectionString)
    {
        var cs = System.Configuration.ConfigurationManager
                     .ConnectionStrings[connectionString];

        SqlConnectionStringBuilder sb = 
             new SqlConnectionStringBuilder(cs.ConnectionString);
        EntityConnectionStringBuilder builder = 
             new EntityConnectionStringBuilder();
        builder.Provider = cs.ProviderName;
        builder.ProviderConnectionString = sb.ConnectionString;
        builder.Metadata = "res://*/MyDataContext.csdl|" +
              "res://*/MyDataContext.ssdl|res://*/MyDataContext.msl";
        return builder.ToString();
    }

    public MyDataContext(string connectionName) : 
          base(GenerateConnectionString(connectionName)) { }
} 
```

通过这个技巧，您可以在 Web 配置中使用单个连接字符串，但一个问题是您不能在数据上下文中使用默认构造函数，而是在实例化数据上下文时应在任何地方播种连接字符串名称。但是当您使用依赖注入模式时，这不是一个大问题。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-09-30T21:02:37.587

我无法使用 EF 和 WebMatrix webSecurity 类，所以要避免这个问题并继续：

首先将我的 Ef 模型更改为先编码。

更改连接字符串以使用 providerName="System.Data.SqlClient"（删除所有元数据信息）或使用 EF 连接

在我的情况下，模型、数据和 web 是不同的项目，所以对我来说，从 web.project 上的 web.config 中删除这些信息不是问题。

现在 websecuroty.initializeddatabase 不使用 EF 连接字符串运行。

我希望这有帮助

# c - 简单的程序分段错误

> ID：12575326
> 
> 赞同：0
> 
> 时间：2012-09-25T02:08:45.743
> 
> 标签：c, pointers, segmentation-fault

我是 C 的新手，我一直在试图找出指针。

该程序与 -i 一起使用，但在几行之后会出现段错误，而 -f 会立即出现段错误。

```
#include <stdio.h>
#include <string.h>

void search_and_print ( char pattern[], FILE* search_file );

int main ( int argc, char *argv[] ) {
        const char TOO_MANY_VARIABLES[] = "Too many arguments from the command line!";
        const char NOT_ENOUGH_VARIABLES[] = "\nUSAGE: a.out [-i] [-f filename] (Search Pattern)\n";

        if (argc < 2) { printf(NOT_ENOUGH_VARIABLES); return(1);}
        // If input
        if (strcmp(argv[1],"-i") == 0) {
                char *pattern = argv[2];
                search_and_print(pattern, stdin);
        }

        // If file
        if (strcmp(argv[1],"-f") == 0) {
                char *pattern = argv[3];
                // Check if file exists
                // Open file
                FILE *file = fopen( argv[2], "r" );
                search_and_print(pattern, file);
                fclose( file );
        }

}

void search_and_print ( char pattern[], FILE* search_file ) {
        // Read through file
        const int MAX_CHARACTERS_PER_LINE = 1000;
        char* line[MAX_CHARACTERS_PER_LINE];
        while  ( fgets(*line, MAX_CHARACTERS_PER_LINE, search_file) != NULL )
                if  ( strstr(*line, pattern) != NULL )
                    printf(*line);
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-25T02:15:05.017

你这里有很多错误。

```
char* line[MAX_CHARACTERS_PER_LINE]; 
```

定义一个包含 1000 个指针的数组，而不是字符。`fgets(*line, ...`将这些指针中的第一个（未初始化）传递给`fgets`，很可能导致 segvio。

```
printf(*line); 
```

printf 的第一个参数是格式。永远不要将用户输入作为格式传递，因为这会在您的程序中打开一个巨大的安全漏洞......请参阅[http://en.wikipedia.org/wiki/Uncontrolled_format_string](http://en.wikipedia.org/wiki/Uncontrolled_format_string)

你应该使用`fputs(line)`or `printf("%s", line)`（一旦你修复了 line 的声明）。

```
int main 
```

您不会返回一个值（错误情况除外）......这会导致未定义的行为。

```
FILE *file = fopen( argv[2], "r" ); 
```

您应该检查这是否成功。如果文件无法打开（例如，它不存在），将其传递给 fgets 会导致未定义的行为。

```
if (argc < 2) { printf(NOT_ENOUGH_VARIABLES); return(1);} 
```

此测试不足以满足您的 -f 案例。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-25T02:29:18.240

供任何人将来参考，这里是带有似乎可行的建议更改的代码。再次感谢您的帮助！

```
#include <stdio.h>
#include <string.h>

void search_and_print ( char pattern[], FILE* search_file );
int usage(const char* err);

const char USAGE[] =
                "\nUSAGE: a.out [-i] [-f filename] (Search Pattern)";

int main ( int argc, char *argv[] ) {
        const char TOO_MANY_VARIABLES[] = "Too many arguments from the command line!";

        if (argc < 2) return usage("Not enough options");
        if (argc > 4) return usage("Too many arguments from the command line!");

        // If input
        if (strcmp(argv[1],"-i") == 0) {
                if (argc > 2) {
                        char *pattern = argv[2];
                        search_and_print(pattern, stdin);
                }
                else {
                        printf("Need a pattern to search by!");
                        return 1;
                }
        }

        // If file
        if (strcmp(argv[1],"-f") == 0) {
                if (argc > 3)   {
                        char *pattern = argv[3];
                        // Open file
                        FILE *file = fopen( argv[2], "r" );
                        // Check if file exists
                        if ( file != NULL) {
                                search_and_print(pattern, file);
                                fclose( file );
                        } else {
                                printf("File not found!");
                                return 1;
                        }
                } else {
                        printf("Need a pattern to search by!");
                        return 1;
                }
        }
        return 0;
}

int usage(const char* err) {
        fprintf(stderr, "%s\n%s\n", err, USAGE);
        return 1;
}

void search_and_print ( char pattern[], FILE* search_file ) {
        const int MAX_CHARACTERS_PER_LINE = 1000;
        char line[MAX_CHARACTERS_PER_LINE];
        // Read through file
        while  ( fgets(line, MAX_CHARACTERS_PER_LINE, search_file) != NULL )
                if  ( strstr(line, pattern) != NULL )
                    printf("%s", line);
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-25T02:29:22.663

你不需要

```
char* line[MAX_CHARACTERS_PER_LINE]; 
```

这是一个指向数组的指针（如果您想逐行存储文件或输入，这可能很有用）并且您没有先分配它。所以段错误非常明显。

将您的 search_and_print 更改为：

```
void search_and_print ( char pattern[], FILE* search_file ) {
        // Read through file
        const int MAX_CHARACTERS_PER_LINE = 1000;
        char line[MAX_CHARACTERS_PER_LINE];
        while  ( fgets(line, MAX_CHARACTERS_PER_LINE, search_file) != NULL )
                if  ( strstr(line, pattern) != NULL )
                    printf("%s\n", line);
} 
```

除了 Jim Balter 的非常好的建议之外，我还建议使用[getopt](http://pubs.opengroup.org/onlinepubs/000095399/functions/getopt.html)来解析您的参数。

# erlang - 为什么 dbg:tracer() 返回的 pid 与 dbg:get_tracer() 不同

> ID：12575337
> 
> 赞同：4
> 
> 时间：2012-09-25T02:10:31.900
> 
> 标签：erlang, dbg

```
1> dbg:get_tracer().
{error,{no_tracer_on_node,nonode@nohost}}
2> dbg:tracer().
{ok,<0.33.0>}
3> dbg:get_tracer().
{ok,<0.35.0>} 
```

[文件](http://www.erlang.org/doc/man/dbg.html)告诉：`get_tracer`退货`the process or port to which all trace messages are sent.`

但它并没有清楚地说明`pid`返回的是什么`dbg:tracer`

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-01T00:57:21.977

正如您在**pman**中看到的，确实有两个进程：

*   **<0.33.0>**位于**dbg:loop/2**
*   **<0.35.0>**位于**dbg:tracer_loop/2**

你可以在这里看到他们在做什么：[https ://github.com/erlang/otp/blob/maint/lib/runtime_tools/src/dbg.erl](https://github.com/erlang/otp/blob/maint/lib/runtime_tools/src/dbg.erl)

我没有对此进行深入研究，但乍一看，前者似乎在做更多类似经理的工作，而后者实际上是在处理跟踪。

# java - 类命名约定

> ID：12575341
> 
> 赞同：2
> 
> 时间：2012-09-25T02:11:23.070
> 
> 标签：java, coding-style, naming-conventions

随着我的项目规模越来越大，我觉得应该对具有相似功能的类名进行约定。

假设有三个具有相似功能的数据处理程序，唯一的区别是它们处理的数据类型。

有接口`DataHandler`。

```
interface DataHandler 
```

共有三种不同类型的数据，位图、视频和声音。

哪个选项是更广泛使用的命名约定？

## 选项1。

```
class BitmapHandler

class VideoHandler

class SoundHandler 
```

## 选项 2。

```
class DataHandlerBitmap

class DataHandlerVideo

class DataHandlerSound 
```

我目前正在使用选项 1，因为它听起来更好，但我认为使用选项 2 也有优势，尤其是项目规模很大。我可以通过按字母顺序对类名进行排序来轻松检查存在多少数据处理程序，并且它还使人们可以使用 IDE 的智能感知轻松找出和使用所有相似类型的类。

**已编辑**

我删除了 c# 标签。我无法认为 C# 和 Java 有不同的命名约定。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-25T02:29:19.123

选项 1 对我来说最有意义，并且似乎是整个内置 Java 类中使用的约定。例如，在`java.io`包装中，

```
BufferedReader
CharArrayReader
InputStreamReader 
```

都是 的子类`java.io.Reader`。

选项 2 似乎是多余`class DataHandlerXX implements DataHandler`的，例如 IDE 可能能够识别 的所有子类`DataHandler`，这意味着您不需要依靠排序来确定通用功能。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-25T02:14:08.533

首先，接口的命名约定是

```
IDataHandler 
```

然后，您的课程应该是：

```
class BitmapDataHandler
class VideoDataHandler
class SoundDataHandler 
```

无论如何，我认为选项 #2 不那么相关；为了发现项目中的类，请使用*Find all References*命令（例如，如果您不使用 ReSharper，这会使事情变得更容易）。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-09-25T02:14:17.607

我的公司是一家非常大的公司（财富 30 强），惯例是使用类似于您的**选项 1**的东西。即使是大型项目，它也足够具有描述性，并且对它有更好的吸引力。:)

您的**选项 2**仅用于混淆类的含义或目的，而不添加任何语义值。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-09-25T02:15:08.463

我认为您应该使用名称空间进行分组。

最重要的是，如果项目大小妨碍了检索文件：使用 ReSharper。它使您能够以非常直观的方式搜索部分文件或类名。使用正确的工具可以防止您出于错误的原因遵守奇怪的标准。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-09-25T02:44:11.777

我的首选选项是此处的许多答案的组合。

1）接口应该以 I 开头，`IDataHandler`这是常见的做法。
2) 在 Option1 之后命名类。名称不应描述结构。此类可以轻松实现多个接口，将它们全部列出会造成很大的混乱，以及由于不断变化的需求/更新而实现新接口或删除接口时会发生什么。
3) 使用命名空间对类似项目进行分组。这将使发现/理解设计更容易（正如您在选项 2 中的意图）。

将这些东西结合起来，在很少的背景下事情是如何运作的就很明显了。

```
// create a context with the namespace
namespace Media.Decoders
{
  // start interfaces with an I
  IDataHandler { ... }

  // name classes descriptively 
  class BitmapHandler : IDataHandler
  class VideoHandler : IDataHandler
  class SoundHandler : IDataHandler
}

// example if these handlers were decoding media types
// imagine navigating through the structure section by section
MyLibrary.Media.Decoders.BitmapHandler
// if everything is grouped logically if I were looking for an encoder a natural place to look would be
MyLibrary.Media.Encoders.BitmapHandler 
```

# javascript - 用javascript检测滑动方向

> ID：12575343
> 
> 赞同：0
> 
> 时间：2012-09-25T02:11:26.637
> 
> 标签：javascript, google-closure-library

寻找一种使用 TOUCHEND、TOUCHSTART 事件的方法来允许用户使用滑动手势滚动页面。我不知道如何确定方向（例如获取 TOUCHEND 和 TOUCHSTART 点的坐标以确定方向）。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-25T02:16:56.400

从概念上讲，您可以这样做：

1.  为 touchstart 和 touchend 注册事件处理程序。
2.  在 touchstart 上，您将特定手指的 x 和 y 坐标存储在持久变量中。
3.  在 touchend 上，您将 x 和 y 坐标与之前保存的值进行比较。
4.  如果 Math.abs(deltaX) 大于某个最小阈值且 Math.abs(deltaX) > Math.abs(deltaY)，则手势为左/右。如果 xEnd 大于 xBegin，则您从左向右移动，否则从右向左移动。
5.  如果 Math.abs(deltaY) 大于某个最小阈值并且 Math.abs(deltaY) > Math.abs(deltaX)，则运动向上/向下。如果 yEnd > yBegin，则向下，否则向上。
6.  如果两个方向都没有超过最小阈值，则手势不足以表示滑动手势。

有关触摸事件数据的信息，请参见[MDN 上的此处。](https://developer.mozilla.org/en-US/docs/Mozilla_event_reference/touchstart)MDN 总是我寻找这类东西的第一个地方。

# database - 连接字符串问题

> ID：12575345
> 
> 赞同：0
> 
> 时间：2012-09-25T02:11:31.013
> 
> 标签：database, connection-string

这不是一个*编程*问题，但我不确定在哪里可以获得这种水平的专业知识。

无论如何，我遇到的问题是让遗留应用程序在我的机器上本地运行。它使用此连接字符串连接到 SQL 服务器

```
Provider=SQLOLEDB.1;Persist Security Info=False;User ID=UN;password=PW;Initial Catalog=DB;Data Source=IP 
```

（当然，UN、PW、DB 和 IP 是不同的真实值）

我已将其更改为此，以连接到本地机器上的 SQL Server Express 实例：

```
Data Source=MY-PC-NAME\SQLEXPRESS;Initial Catalog=DB;Integrated Security=True 
```

带有泛型的应用程序错误*无法连接*类型错误，这一点都没有帮助。

有人有什么建议吗？我没有关于这个该死的程序的更多信息..

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-25T02:36:13.887

尝试类似：

```
Provider=SQLNCLI10;Server=Server\SQLExpress;Database=myDataBase;Uid=myUsername; Pwd=myPassword; 
```

VB6 使用 OLEDB 语法；您以前的语法是针对 .NET

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-25T03:03:49.350

这最终奏效了`Provider=SQLOLEDB.1;Persist Security Info=False;User ID=;password=;Initial Catalog=;Data Source=mypcname\SQLEXPRESS;Integrated Security=SSPI`

我不知道为什么。我需要指定集成安全性。

谢谢你的帮助！

# python - Python重新捕获每个单词的一个匹配项

> ID：12575349
> 
> 赞同：0
> 
> 时间：2012-09-25T02:12:03.317
> 
> 标签：python, regex

我需要在文本文档中查找价格。我的代码如下所示：

```
sentence = "This is test text $25,000 $25,000$20,000 $30"
pattern = re.compile(ur'[$€£]?\d+([.,]\d+)?', re.UNICODE | re.MULTILINE | re.DOTALL)
print pattern.findall(sentence) 
```

期望的结果是：

```
['$25,000', '$30'] 
```

我不需要在结果中包含 $25,000$20,000，因为这不是我的任务的有效结果。我只需要完整的单词匹配。

但我得到了这个结果：

```
['$25,000', '$25,000', '$20,000', '$30'] 
```

如何重写我的正则表达式以仅包含由空格或标点符号分隔的价格？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-25T02:22:59.153

这是我所能得到的最接近的（尽管有很多人比我拥有更多的正则表达式技能）：

```
pattern = re.compile(ur'(?:^|\s)[$€£]?\d+(?:[.,]\d+)?(?=\s|$)', re.UNICODE | re.MULTILINE | re.DOTALL)
print pattern.findall(sentence) # [' $25,000', ' $30'] 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-25T02:49:51.327

尝试以下操作：

```
ur'(?<!\S)[€£$]?\d+(?:[.,]\d+)?(?!\S)' 
```

我添加了否定断言`(?<!\S)`，`(?!\S)`分别表示“如果前面有一个非空格则不匹配”和“如果后面跟着一个非空格则不匹配”。

测试：

```
>>> sentence = "$1234 $56$78.90 This is test text $25,000 $25,000$20,000 $30"
>>> pattern = re.compile(ur'(?<!\S)[€£$]?\d+(?:[.,]\d+)?(?!\S)', re.UNICODE | re.MULTILINE | re.DOTALL)
>>> print pattern.findall(sentence)
['$1234', '$25,000', '$30'] 
```

如果您想在匹配之前或之后允许某些非空格字符，请替换`\S`为`[^\s<chars>]`您`<chars>`要允许的字符。例子：

```
ur'(?<![^\s:])[€£$]?\d+(?:[.,]\d+)?(?![^\s,.])' 
```

允许模式前面有 a`:`后面有`,`or `.`：

```
>>> sentence = "$1234 $56$78.90 This is test text:$25,000\. $45\. $25,000$20,000 $30"
>>> print pattern.findall(sentence)
['$1234', '$25,000', '$45', '$30'] 
```

# kernel-module - 如果 init_module() 失败，如何强制退出？

> ID：12575350
> 
> 赞同：4
> 
> 时间：2012-09-25T02:12:06.397
> 
> 标签：kernel-module

我正在开发一个简单的内核模块，并且正在从命令行获取参数。我想要做的是在加载模块之前检查这些参数。

我检查了参数并返回 1 表示 init_module 函数失败，因此如果参数无效，则不会加载内核模块。

问题是模块仍然被加载，即使它没有通过参数检查（使用第一个 if 语句）。我输入`sudo -f rmmod kernel_name`了，它抱怨模块很忙。如果它通过参数检查，我如何让它加载模块？

```
int init_module(){
     //check argument here
     if(failed){ 
          //arguments are not valid. Return 1 to indicate the failure of init_module
          return 1;
     }
     else{
          register hook function here
          return 0;
     }
}

void cleanup_module(){
    unregister hook here
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-26T04:36:23.970

我假设您正在使用 Linux 内核模块。

一个正的返回值仍然可以解释为成功。在您的情况下，一种常见的做法是返回`-error_code`错误。`-EINVAL`

# android - 致命信号 11

> ID：12575357
> 
> 赞同：2
> 
> 时间：2012-09-25T02:13:16.287
> 
> 标签：android, signals, segmentation-fault

我在我的模拟器上开发并测试了一个应用程序，它的 API 为 4.1（Jelly Bean）。当我在我的实际设备（三星 Galaxy Nexus）上调试我的应用程序时，它在 logcat-Fatal signal 11 (SIGSEGV) 中为我提供了 0x00000000（代码 = 1），线程 4395。你能帮忙吗？

Java XML：

```
package ID;

import java.io.IOException;
import java.io.InputStream;
import android.app.Activity;
import android.graphics.Bitmap;
import android.graphics.BitmapFactory;
import android.os.Bundle;
import android.view.View;
import android.view.View.OnClickListener;
import android.view.Window;
import android.view.WindowManager;
import android.widget.Button;
import android.widget.ImageView;

public class Menu extends Activity implements OnClickListener {

ImageView display;
int toPhone;

@Override
protected void onCreate(Bundle savedInstanceState) {
    // TODO Auto-generated method stub
    super.onCreate(savedInstanceState);

    requestWindowFeature(Window.FEATURE_NO_TITLE);
    getWindow().setFlags(WindowManager.LayoutParams.FLAG_FULLSCREEN,
            WindowManager.LayoutParams.FLAG_FULLSCREEN);

    setContentView(R.layout.activity_wallpapers);

    toPhone = R.drawable.eye;

    display = (ImageView) findViewById(R.id.IVdisplay);
    ImageView image1 = (ImageView) findViewById(R.id.IVimage1);
    ImageView image2 = (ImageView) findViewById(R.id.IVimage2);
    ImageView image3 = (ImageView) findViewById(R.id.IVimage3);
    ImageView image4 = (ImageView) findViewById(R.id.IVimage4);
    ImageView image5 = (ImageView) findViewById(R.id.IVimage5);
    ImageView image6 = (ImageView) findViewById(R.id.IVimage6);
    ImageView image7 = (ImageView) findViewById(R.id.IVimage7);
    Button setWall = (Button) findViewById(R.id.button1);

    image1.setOnClickListener(this);
    image2.setOnClickListener(this);
    image3.setOnClickListener(this);
    image4.setOnClickListener(this);
    image5.setOnClickListener(this);
    image6.setOnClickListener(this);
    image7.setOnClickListener(this);
    setWall.setOnClickListener(this);
}

@SuppressWarnings("deprecation")
public void onClick(View v) {
    // TODO Auto-generated method stub
    switch (v.getId()) {
    case R.id.IVimage1:
        display.setImageResource(R.drawable.eye);
        toPhone = R.drawable.eye;
        break;
    case R.id.IVimage2:
        display.setImageResource(R.drawable.falls);
        toPhone = R.drawable.falls;
        break;
    case R.id.IVimage3:
        display.setImageResource(R.drawable.inthemiddle);
        toPhone = R.drawable.inthemiddle;
        break;
    case R.id.IVimage4:
        display.setImageResource(R.drawable.web);
        toPhone = R.drawable.web;
        break;
    case R.id.IVimage5:
        display.setImageResource(R.drawable.watching);
        toPhone = R.drawable.watching;
        break;
    case R.id.IVimage6:
        display.setImageResource(R.drawable.similar);
        toPhone = R.drawable.similar;
        break;
    case R.id.IVimage7:
        display.setImageResource(R.drawable.solar);
        toPhone = R.drawable.solar;
        break;
    case R.id.button1:
        InputStream cont = getResources().openRawResource(R.drawable.eye);
        Bitmap background = BitmapFactory.decodeStream(cont);
        try {
            getApplicationContext().setWallpaper(background);
        } catch (IOException e) {
            e.printStackTrace();
        }
        break;
    }
} 
```

Java XML：

```
package ID;

import android.os.Bundle;
import android.app.Activity;
import android.view.Menu;
import ab.wallpapers.hd.R;

public class Wallpapers extends Activity {

@Override
protected void onCreate(Bundle Wallpapers) {
    super.onCreate(Wallpapers);
    setContentView(R.layout.activity_wallpapers);
}

@Override
protected void onStart() {
    // TODO Auto-generated method stub
    super.onStart();
}

@Override
protected void onPause() {
    // TODO Auto-generated method stub
    super.onPause();
}

@Override
protected void onResume() {
    // TODO Auto-generated method stub
    super.onResume();
}

@Override
protected void onStop() {
    // TODO Auto-generated method stub
    super.onStop();
}

@Override
protected void onDestroy() {
    // TODO Auto-generated method stub
    super.onDestroy();
}

@Override
public boolean onCreateOptionsMenu(Menu menu) {
    getMenuInflater().inflate(R.menu.activity_wallpapers, menu);
    return true;
} 
```

日志猫：

```
09-24 20:34:11.619: I/System.out(5225): Sending WAIT chunk
09-24 20:34:11.619: W/ActivityThread(5225): Application ab.wallpapers.hd is waiting for the debugger on port 8100...
09-24 20:34:11.643: I/dalvikvm(5225): Debugger is active
09-24 20:34:11.822: I/System.out(5225): Debugger has connected
09-24 20:34:11.822: I/System.out(5225): waiting for debugger to settle...
09-24 20:34:12.025: I/System.out(5225): waiting for debugger to settle...
09-24 20:34:12.221: I/System.out(5225): waiting for debugger to settle...
09-24 20:34:12.424: I/System.out(5225): waiting for debugger to settle...
09-24 20:34:12.627: I/System.out(5225): waiting for debugger to settle...
09-24 20:34:12.830: I/System.out(5225): waiting for debugger to settle...
09-24 20:34:13.033: I/System.out(5225): waiting for debugger to settle...
09-24 20:34:13.236: I/System.out(5225): debugger has settled (1435)
09-24 20:34:13.393: D/dalvikvm(5225): GC_FOR_ALLOC freed 39K, 2% free 10842K/11011K, paused 17ms, total 18ms
09-24 20:34:13.400: I/dalvikvm-heap(5225): Grow heap (frag case) to 13.618MB for 3145744-byte allocation
09-24 20:34:13.432: D/dalvikvm(5225): GC_CONCURRENT freed 1K, 2% free 13912K/14151K, paused 12ms+2ms, total 27ms
09-24 20:34:13.650: D/dalvikvm(5225): GC_FOR_ALLOC freed 0K, 2% free 13912K/14151K, paused 12ms, total 12ms
09-24 20:34:13.666: I/dalvikvm-heap(5225): Grow heap (frag case) to 18.949MB for 5591056-byte allocation
09-24 20:34:13.697: D/dalvikvm(5225): GC_CONCURRENT freed 0K, 2% free 19372K/19655K, paused 11ms+3ms, total 28ms
09-24 20:34:14.033: D/dalvikvm(5225): GC_FOR_ALLOC freed 3072K, 18% free 16308K/19655K, paused 10ms, total 10ms
09-24 20:34:14.041: I/dalvikvm-heap(5225): Grow heap (frag case) to 18.957MB for 3145744-byte allocation
09-24 20:34:14.088: D/dalvikvm(5225): GC_CONCURRENT freed <1K, 2% free 19380K/19655K, paused 12ms+19ms, total 45ms
09-24 20:34:14.143: D/dalvikvm(5225): GC_FOR_ALLOC freed 0K, 2% free 19380K/19655K, paused 12ms, total 12ms
09-24 20:34:14.150: I/dalvikvm-heap(5225): Grow heap (frag case) to 24.289MB for 5591056-byte allocation
09-24 20:34:14.174: D/dalvikvm(5225): GC_CONCURRENT freed 0K, 2% free 24841K/25159K, paused 2ms+2ms, total 25ms
09-24 20:34:14.838: D/dalvikvm(5225): GC_FOR_ALLOC freed 3072K, 14% free 21770K/25159K, paused 10ms, total 10ms
09-24 20:34:14.853: I/dalvikvm-heap(5225): Grow heap (frag case) to 28.321MB for 7372816-byte allocation
09-24 20:34:14.885: D/dalvikvm(5225): GC_CONCURRENT freed <1K, 11% free 28970K/32391K, paused 13ms+2ms, total 25ms
09-24 20:34:15.088: D/dalvikvm(5225): GC_FOR_ALLOC freed 0K, 11% free 28970K/32391K, paused 10ms, total 10ms
09-24 20:34:15.119: I/dalvikvm-heap(5225): Grow heap (frag case) to 40.824MB for 13109776-byte allocation
09-24 20:34:15.143: D/dalvikvm(5225): GC_CONCURRENT freed 0K, 8% free 41772K/45255K, paused 12ms+3ms, total 30ms
09-24 20:34:16.228: D/dalvikvm(5225): GC_FOR_ALLOC freed 7200K, 24% free 34573K/45255K, paused 11ms, total 11ms
09-24 20:34:16.236: I/dalvikvm-heap(5225): Grow heap (frag case) to 40.825MB for 7372816-byte allocation
09-24 20:34:16.283: D/dalvikvm(5225): GC_CONCURRENT freed <1K, 8% free 41773K/45255K, paused 13ms+8ms, total 49ms
09-24 20:34:16.283: D/dalvikvm(5225): WAIT_FOR_CONCURRENT_GC blocked 37ms
09-24 20:34:16.502: D/dalvikvm(5225): GC_FOR_ALLOC freed 0K, 8% free 41773K/45255K, paused 15ms, total 15ms
09-24 20:34:16.525: I/dalvikvm-heap(5225): Grow heap (frag case) to 53.327MB for 13109776-byte allocation
09-24 20:34:16.557: D/dalvikvm(5225): GC_CONCURRENT freed 0K, 7% free 54576K/58119K, paused 11ms+3ms, total 28ms
09-24 20:34:17.533: D/dalvikvm(5225): GC_FOR_ALLOC freed 7200K, 19% free 47377K/58119K, paused 14ms, total 14ms
09-24 20:34:17.541: I/dalvikvm-heap(5225): Grow heap (frag case) to 53.329MB for 7372816-byte allocation
09-24 20:34:17.580: D/dalvikvm(5225): GC_CONCURRENT freed <1K, 7% free 54577K/58119K, paused 12ms+3ms, total 40ms
09-24 20:34:17.799: D/dalvikvm(5225): GC_FOR_ALLOC freed 0K, 7% free 54577K/58119K, paused 19ms, total 19ms
09-24 20:34:17.799: I/dalvikvm-heap(5225): Forcing collection of SoftReferences for 13109776-byte allocation
09-24 20:34:17.877: D/dalvikvm(5225): GC_BEFORE_OOM freed 9K, 7% free 54568K/58119K, paused 71ms, total 74ms
09-24 20:34:17.877: E/dalvikvm-heap(5225): Out of memory on a 13109776-byte allocation.
09-24 20:34:17.877: I/dalvikvm(5225): "main" prio=5 tid=1 RUNNABLE
09-24 20:34:17.877: I/dalvikvm(5225):   | group="main" sCount=0 dsCount=0 obj=0x40d9e568 self=0x40d8e9f8
09-24 20:34:17.877: I/dalvikvm(5225):   | sysTid=5225 nice=0 sched=0/0 cgrp=apps/bg_non_interactive handle=1075160624
09-24 20:34:17.877: I/dalvikvm(5225):   | schedstat=( 0 0 0 ) utm=343 stm=24 core=1
09-24 20:34:17.877: I/dalvikvm(5225):   at android.graphics.BitmapFactory.nativeDecodeAsset(Native Method)
09-24 20:34:17.877: I/dalvikvm(5225):   at android.graphics.BitmapFactory.decodeStream(BitmapFactory.java:500)
09-24 20:34:17.877: I/dalvikvm(5225):   at android.graphics.BitmapFactory.decodeResourceStream(BitmapFactory.java:353)
09-24 20:34:17.877: I/dalvikvm(5225):   at android.graphics.drawable.Drawable.createFromResourceStream(Drawable.java:781)
09-24 20:34:17.877: I/dalvikvm(5225):   at android.content.res.Resources.loadDrawable(Resources.java:1930)
09-24 20:34:17.877: I/dalvikvm(5225):   at android.content.res.TypedArray.getDrawable(TypedArray.java:601)
09-24 20:34:17.877: I/dalvikvm(5225):   at android.widget.ImageView.<init>(ImageView.java:120)
09-24 20:34:17.877: I/dalvikvm(5225):   at android.widget.ImageView.<init>(ImageView.java:110)
09-24 20:34:17.877: I/dalvikvm(5225):   at java.lang.reflect.Constructor.constructNative(Native Method)
09-24 20:34:17.877: I/dalvikvm(5225):   at java.lang.reflect.Constructor.newInstance(Constructor.java:417)
09-24 20:34:17.877: I/dalvikvm(5225):   at android.view.LayoutInflater.createView(LayoutInflater.java:587)
09-24 20:34:17.877: I/dalvikvm(5225):   at com.android.internal.policy.impl.PhoneLayoutInflater.onCreateView(PhoneLayoutInflater.java:56)
09-24 20:34:17.877: I/dalvikvm(5225):   at android.view.LayoutInflater.onCreateView(LayoutInflater.java:660)
09-24 20:34:17.877: I/dalvikvm(5225):   at android.view.LayoutInflater.createViewFromTag(LayoutInflater.java:685)
09-24 20:34:17.877: I/dalvikvm(5225):   at android.view.LayoutInflater.rInflate(LayoutInflater.java:746)
09-24 20:34:17.877: I/dalvikvm(5225):   at android.view.LayoutInflater.rInflate(LayoutInflater.java:749)
09-24 20:34:17.877: I/dalvikvm(5225):   at android.view.LayoutInflater.rInflate(LayoutInflater.java:749)
09-24 20:34:17.877: I/dalvikvm(5225):   at android.view.LayoutInflater.inflate(LayoutInflater.java:489)
09-24 20:34:17.877: I/dalvikvm(5225):   at android.view.LayoutInflater.inflate(LayoutInflater.java:396)
09-24 20:34:17.877: I/dalvikvm(5225):   at android.view.LayoutInflater.inflate(LayoutInflater.java:352)
09-24 20:34:17.877: I/dalvikvm(5225):   at com.android.internal.policy.impl.PhoneWindow.setContentView(PhoneWindow.java:256)
09-24 20:34:17.877: I/dalvikvm(5225):   at android.app.Activity.setContentView(Activity.java:1867)
09-24 20:34:17.877: I/dalvikvm(5225):   at ab.wallpapers.hd.Wallpapers.onCreate(Wallpapers.java:13)
09-24 20:34:17.877: I/dalvikvm(5225):   at android.app.Activity.performCreate(Activity.java:5008)
09-24 20:34:17.877: I/dalvikvm(5225):   at android.app.Instrumentation.callActivityOnCreate(Instrumentation.java:1079)
09-24 20:34:17.877: I/dalvikvm(5225):   at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:2023)
09-24 20:34:17.877: I/dalvikvm(5225):   at android.app.ActivityThread.handleLaunchActivity(ActivityThread.java:2084)
09-24 20:34:17.877: I/dalvikvm(5225):   at android.app.ActivityThread.access$600(ActivityThread.java:130)
09-24 20:34:17.877: I/dalvikvm(5225):   at android.app.ActivityThread$H.handleMessage(ActivityThread.java:1195)
09-24 20:34:17.877: I/dalvikvm(5225):   at android.os.Handler.dispatchMessage(Handler.java:99)
09-24 20:34:17.877: I/dalvikvm(5225):   at android.os.Looper.loop(Looper.java:137)
09-24 20:34:17.877: I/dalvikvm(5225):   at android.app.ActivityThread.main(ActivityThread.java:4745)
09-24 20:34:17.877: I/dalvikvm(5225):   at java.lang.reflect.Method.invokeNative(Native Method)
09-24 20:34:17.877: I/dalvikvm(5225):   at java.lang.reflect.Method.invoke(Method.java:511)
09-24 20:34:17.877: I/dalvikvm(5225):   at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:786)
09-24 20:34:17.877: I/dalvikvm(5225):   at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:553)
09-24 20:34:17.877: I/dalvikvm(5225):   at dalvik.system.NativeStart.main(Native Method)
09-24 20:34:17.877: A/libc(5225): Fatal signal 11 (SIGSEGV) at 0x00000000 (code=1), thread 5225 (b.wallpapers.hd) 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-06-29T16:52:38.880

如果您使用的是 4.1.2 或更高版本的 ics，您可以查看[此处](https://www.buzztouch.com/forum/thread.php?tid=F566C948A5F7B1CB8CDBD43&fid=06DB0BCB08E3333&sortColumn=FT.id&sortUpDown=DESC&currentPage=1)讨论的问题。

有人提到，最新版本的 android 使用了一种不同类型的垃圾收集器，它以不同的方式处理大数据，这会导致致命的信号。我在三星 Galaxy SIII 上遇到了同样的问题，并通过使用较小的图像解决了。您可以将较小尺寸的图像加载到启动屏幕中（我以为您正在开发一个 baground 图像应用程序或类似的东西）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2016-11-13T21:09:19.747

尝试减小您设置为 ImageViews 源的图像的大小。问题是 Android 无法分配足够的内存来保存 ImageView 的可绘制对象。因此，首先分析哪个图像太大，并记住这里重要的是解压缩图像的大小（基本上，高度 * 宽度 * 4 字节）。

# c# - 应用程序启动时，Membership.GetUser() 返回 null

> ID：12575358
> 
> 赞同：3
> 
> 时间：2012-09-25T02:13:36.577
> 
> 标签：c#, asp.net, asp.net-mvc, asp.net-membership, membership-provider

我已经实现了我自己的[AccountProfile](https://stackoverflow.com/questions/426609/how-to-assign-profile-values)类是 ASP.net MVC，它可以工作，但现在我遇到了一个奇怪的问题。首先，我在 Views/Shared/_LoginPartial.cshtml 中调用 AccountProfile.MyProperty。AccountProfile.MyProperty 调用 Membership.GetUser().UserName 来工作。现在，当我“注册”一个帐户时，在我登录后，AccountProfile.MyProperty 工作并将信息呈现到 html 页面中。

但是，当我停止运行、更改一些代码并再次启动时，Membership.GetUser() 返回 null，即使我仍然根据成员身份登录。

页面加载失败后，如果我导航到 /Account/Login 页面，Membership.GetUser() 工作。在它工作之后，我可以导航到开始时不起作用的索引页面，并且它可以工作。

我的问题是为什么 Membership.GetUser() 在我的页面首次加载时返回 null ？

谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-26T04:21:13.010

好吧，我找到了一个解决有缺陷的 Membership.GetUser() 函数的方法。

```
HttpContext.Current.User.Identity.Name 
```

这段代码获取了登录的用户名，它实际上似乎可以工作。如果我有任何问题，我会在这里报告。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-25T03:25:36.407

请看下面的帖子，也许你有同样的问题？：

*   [FormsAuthentication Membership.GetUser() Null](https://stackoverflow.com/questions/2163141/formsauthentication-membership-getuser-null)
*   [在表单身份验证中获取当前的 MembershipUser](https://stackoverflow.com/questions/6329181/get-current-membershipuser-in-forms-authentication)

希望这可以帮助

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2014-06-17T16:20:22.913

试试这个

```
using Microsoft.AspNet.Identity;

var id = User.Identity.GetUserId(); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-07-09T15:08:13.393

刚刚遇到同样的问题。在 MVC 4 中，默认的身份验证系统是使用过滤器初始化`InitializeSimpleMembershipAttribute`的（从生成的项目的源代码中很清楚）。并且过滤器只适用于`AccountController`（因此，一旦您访问登录或该控制器的任何其他页面，身份验证系统就会被初始化，您可以`Membership.GetUser()`在任何需要的地方正常使用）。

对于我当前的项目，快速而肮脏的解决方案是拥有一些控制器，定义如下：

```
[InitializeSimpleMembership]
public abstract class DefaultController : Controller
{} 
```

`DefaultController`并从而不是直接从 Controller派生我的应用程序的其他控制器。此外，这种技术非常适合在一个地方拥有常用属性（如 dbcontext 变量等）。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2014-02-09T19:41:57.370

将 [InitializeSimpleMembership] 添加到控制器

例子：

```
using System.Linq;
using System.Web.Mvc;
using System.Web.Security;
using Bencsharp.BL.Services;
using Bencsharp.Mvc.Filters;
using Bencsharp.Mvc.Models;

namespace Bencsharp.Mvc.Controllers
{
    [InitializeSimpleMembership]
    public class HomeController : Controller
    {
        // ...
    }
} 
```

# java - Java将一个向量放入另一个向量

> ID：12575360
> 
> 赞同：1
> 
> 时间：2012-09-25T02:13:44.700
> 
> 标签：java, vector, copy, clone

当我使用这些行时：

```
vector.set(i, copyedVector.clone());

vector holds Vector<String>

copyVector holds strings 
```

当我使用克隆时，它给了我一个错误。但是当我删除克隆时，它工作正常。如何将一个向量复制到另一个向量中？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-25T03:28:52.220

正如其他人所指出的，尚不清楚您的“向量”变量是向量的向量 ( `Vector<Vector<String>>`) 还是简单的字符串向量 ( `Vector<String>`)。请参阅以下代码片段。

```
Vector<String> destVector = new Vector<String>();
Vector<String> sourceVector = new Vector<String>();
sourceVector.add("A");
sourceVector.add("B");
sourceVector.add("C");
destVector.addAll(0,sourceVector);

// If your target vector is a vector of vectors (of strings)
Vector<Vector<String>> destVector2 = new Vector<Vector<String>>();
destVector2.set(0,(Vector<String>)sourceVector.clone()); 
```

另外，请注意该`clone`方法返回一个`Object`. 因此，您必须显式转换为所需的数据类型。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-04-30T15:07:08.573

尝试这个。自己将数据添加到向量中。

```
Vector<T> vector1 = new Vector<T>();
Vector<T> vector2 = new Vector<T>();

vector1.addAll(vector2); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-25T02:36:24.650

不确定这是否正是您要问的，但如果您想复制所有元素，您可以使用 addAll 方法并传递向量以将元素复制到其中：

[http://docs.oracle.com/javase/6/docs/api/java/util/Vector.html#addAll(java.util.Collection)](http://docs.oracle.com/javase/6/docs/api/java/util/Vector.html#addAll(java.util.Collection))

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-09-25T02:54:16.193

尝试这个，

```
vector.set(i, new Vector().addAll(copyedVector)); 
```

# nserror - 查找图像时如何使用 initWithContentsOfFile 添加 NSError 检查？

> ID：12575368
> 
> 赞同：0
> 
> 时间：2012-09-25T02:14:17.780
> 
> 标签：nserror, initwithcontentsoffile

在我的应用程序中，用户可以将图像保存到他们的文档目录中。在启动时，我抓取图像，添加边框，然后将其放入 UIImageview 中，如下所示......

```
NSArray *sysPaths = NSSearchPathForDirectoriesInDomains( NSDocumentDirectory, NSUserDomainMask, YES );
        NSString *docDirectory = [sysPaths objectAtIndex:0];
        NSString *filePath = [NSString stringWithFormat:@"%@/ImageOne.jpg", docDirectory];
        UIImage *unborderedImage  = [[[UIImage alloc] initWithContentsOfFile:filePath] autorelease];

        //image found....add border
        UIImage *imageWithBorder = [self addBorderToImage:unborderedImage];
        imageOneView.image = imageWithBorder; 
```

理想情况下，我喜欢在添加边框之前先检查图像是否存在。如果没有，请加载“图像不可用”占位符。像这样的东西：

```
NSArray *sysPaths = NSSearchPathForDirectoriesInDomains( NSDocumentDirectory, NSUserDomainMask, YES );
        NSString *docDirectory = [sysPaths objectAtIndex:0];
        NSString *filePath = [NSString stringWithFormat:@"%@/ImageOne.jpg", docDirectory];
        UIImage *unborderedImage  = [[[UIImage alloc] initWithContentsOfFile:filePath] autorelease];

NSError * error;

    if (error != nil) {
        //image found....add border
        UIImage *imageWithBorder = [self addBorderToImage:unborderedImage];
        imageOneView.image = imageWithBorder;
    } else
        //no image saved
        [imageOneView setImage:[UIImage imageNamed:@"photoNotAvailable.png"]];
    } 
```

当然，这是行不通的。如果找不到“ImageOne.jpg”，我似乎无法弄清楚如何处理。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-27T14:02:20.523

事实证明，我需要在应用程序的其他地方对图像做其他事情。这也取决于用户是否保存了图像。因此，在我的用户可以保存图像的方法中，我发送了一个图像已更改的 NSNotification。然后在我的 MainView 上，我寻找通知并关闭它。

保存时：

```
[collectionOneUserDefinedDefaults setObject:@"image added" forKey:@"collectionOneImageAdded"];
[[NSNotificationCenter defaultCenter] postNotificationName:@"collectionOneImageChanged" object:self]; 
```

然后在我的 MainView 中查找通知：

```
 [[NSNotificationCenter defaultCenter] addObserver:self selector:@selector(updateCollectionOneImage) name:@"collectionOneImageChanged" object:nil];

- (void)updateCollectionOneImage {

    //check if an image was ever saved, if so, replace the noPhotoAvailalble placeholder
    NSUserDefaults *collectionOneUserDefinedDefaults = [NSUserDefaults standardUserDefaults];
    NSString *collectionOneImageTextString = [collectionOneUserDefinedDefaults stringForKey:@"collectionOneImageAdded"];

    if (collectionOneImageTextString == nil || [collectionOneImageTextString isEqualToString:@""]) {
        [collectionOneImage setImage:[UIImage imageNamed:@"photoNotAvailable.png"]];
    }
    else {
        //pull in collection one image from the Documents folder
        NSArray *sysPaths = NSSearchPathForDirectoriesInDomains( NSDocumentDirectory, NSUserDomainMask, YES );
        NSString *docDirectory = [sysPaths objectAtIndex:0];
        NSString *filePath = [NSString stringWithFormat:@"%@/CollectionOneImage.jpg", docDirectory];
        UIImage *unborderedImage  = [[[UIImage alloc] initWithContentsOfFile:filePath] autorelease];
        //image found....add border
        UIImage *imageWithBorder = [self addBorderToImage:unborderedImage];
        collectionOneImage.image = imageWithBorder;
    }
} 
```

它完美地工作。它反过来建立在错误处理中。如果用户保存和图像，它会被加载。如果没有，则加载占位符图像。

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-09-27T12:45:01.633

您在这里的错误处理什么也没做，而且被误导了。您需要做的只是检查是否`unborderedImage`为 nil。

# html - 无法覆盖 CSS 字体颜色 for a single character Possible Duplicate: CSS with Option tag - Editing text color I know I must be overlooking something very simple. I am trying to change the color of the asterik (*) next to the SELECT AN AMOU

> ID：12575370
> 
> 赞同：1
> 
> 时间：2012-09-25T02:14:24.227
> 
> 标签：html, css

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-25T02:20:21.233

我相信您不能在选项标签内设置文本样式。

类似的问题：[带有选项标签的 CSS - 编辑文本颜色](https://stackoverflow.com/questions/7717796/css-with-option-tag-editing-text-color)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-25T02:50:01.547

您正在为 设置样式`select`，但`option`元素本身`span`内部有一个具有自己颜色的元素。您是否尝试过直接覆盖它？

```
.styled-select select#id option span {color: #333 !important;} 
```

# java - 在 Java 中交换 JButton 元素

> ID：12575372
> 
> 赞同：2
> 
> 时间：2012-09-25T02:14:41.113
> 
> 标签：java, swing, awt, jbutton

**更新了我的代码**，我意识到我应该有，但 JButton 上的 actionListener （因为他们是真正做所有工作的人）。我的逻辑现在在排序部分是关闭的。我能够让 jButtons 交换值，但我的输出看起来正确，但我试图找出我在哪里搞砸了我的排序机制。这个程序“应该”通过使用单选按钮选择一个起点，并为 JButton 选择一个不同的位置来交换来正确工作。（例如，radio 3 然后 jbutton 8 会将第 3 个元素移动到第 8 个位置）我知道我已经很接近了，但是我已经把自己弄得一团糟，看不到外面。任何指针？（*免责声明*这是一个奖励积分编程 2 作业）​​。

*新代码*

```
import java.awt.*;
import java.awt.event.*;

import javax.swing.*;

public class GUIswitch 
{
    public static void main(String[] args) 
    {

        GUIswitchClass myWindow = new GUIswitchClass();
        myWindow.setSize(300,350);
        myWindow.setLocation(100,100);
        myWindow.setDefaultCloseOperation( JFrame.EXIT_ON_CLOSE );
        myWindow.setVisible( true );

    }
}
//====================================================================================================================
class GUIswitchClass extends JFrame                                         //fields
{
        JPanel          leftPanel       =   new JPanel();
        JPanel          rightPanel      =   new JPanel();                       
        JPanel          allPanel        =   new JPanel();
        JRadioButton    rdoBut[]        =   new JRadioButton[10];
        JButton         teamBut[]       =   new JButton[10];
        ButtonGroup     rdBtGp          =   new ButtonGroup();
        String          rdoButNum[]     =   {"1","2","3","4","5","6","7","8","9","10"};
        String          teamName[]      =   {"A","BB","CCC","DDDD","EEEEE","FFFFFF",
                                            "GGGGGGG","HHHHHHHH","IIIIIIIII","JJJJJJJJJJ"};
        //String            from;
        //String            to;
        int from;
        int to;
        String fromTo;  //??
        int i;

    public GUIswitchClass()                                                 //constructor
    {
        super("Proj 3");

        fromTo  = setButs();
        //to        = teamBut[ teamName[i] ];

    }
    private String setButs()
    {
        int i;
        leftPanel.setLayout(new GridLayout(10,1));
        rightPanel.setLayout(new GridLayout(10,1));
        for(i=0;i<10;i++)
        {
            rdoBut[i] = new JRadioButton(rdoButNum[i]);
            rdoBut[i].setFont(new Font("Courier", Font.PLAIN, 30) );
            rdBtGp.add(rdoBut[i]);
            leftPanel.add(rdoBut[i]);   
        }

        /*for(i=0;i<10;i++)
            if(rdoBut[i].isSelected() )
            {
                from = Integer.parseInt(rdoBut[i].getText() );
            }
        */
        for(i=0;i<10;i++)
        {
            teamBut[i]  =   new JButton(teamName[i]);
            teamBut[i].setFont(new Font("Courier", Font.PLAIN, 30) );
            teamBut[i].setHorizontalAlignment(SwingConstants.LEFT);
            teamBut[i].addActionListener(new checkHdlr() );
            rightPanel.add(teamBut[i]);
        }

        allPanel.setLayout(new BorderLayout());
            allPanel.add(leftPanel, BorderLayout.WEST);
            allPanel.add(rightPanel, BorderLayout.CENTER);
        add(allPanel);

        return fromTo;

    }
    @SuppressWarnings("unused")
    private class checkHdlr implements ActionListener
    {
        public void actionPerformed(ActionEvent event)
        {
            //String userNum;
            //userNum = event.getActionCommand();
            for(i=0;i<10;i++)
                if(rdoBut[i].isSelected() )
                {
                    from = Integer.parseInt(rdoBut[i].getText() );
                }

            for(i=0;i<10;i++)
            {
                if(event.getSource() == teamBut[i])
                {
                    //teamBut[i].
                    teamBut[i].setText(teamName[i]);
                    //to = (int)(teamBut[i]);
                }
            }
            rightPanel.revalidate();                //refresh the panels
            moveTeam(teamName, from, to);
        }
    }   

//--------------------------------------------------------------------------
     public void moveTeam(String teamName[],int from,int to)
      {
        //int             from=0;
        //int             to=0;

        if(from>to)                           //determine direction to move
          moveUp(teamName,from,to);
        else
          moveDown(teamName,from,to);
      }

 //---------------------------------------------------------------------move up
  public static void moveUp(String teamList[], int from, int to)
  {
    String clipboard;
    int    row;

    clipboard = teamList[from];           //copy

    for(row=from;row>to;row--)            //shift others down
      teamList[row] = teamList[row-1];

    teamList[row] = clipboard;            //paste
  }
  //-------------------------------------------------------------------move down
  public static void moveDown(String teamList[], int from, int to)
  {
    String clipboard;
    int    row;

    clipboard = teamList[from];           //copy

    for(row=from;row<to;row++)            //shift others up
      teamList[row] = teamList[row+1];

    teamList[row] = clipboard;            //paste
  }

} 
```

旧代码

```
import java.awt.*;
import java.awt.event.*;
import java.util.StringTokenizer;

import javax.swing.*;

public class GUIswitch 
{
    public static void main(String[] args) 
    {

        GUIswitchClass myWindow = new GUIswitchClass();
        myWindow.setSize(300,350);
        myWindow.setLocation(100,100);
        myWindow.setDefaultCloseOperation( JFrame.EXIT_ON_CLOSE );
        myWindow.setVisible( true );

    }
}
//====================================================================================================================
class GUIswitchClass extends JFrame                                         //fields
{
        JPanel          leftPanel       =   new JPanel();
        JPanel          rightPanel      =   new JPanel();                       
        JPanel          allPanel        =   new JPanel();
        JRadioButton    rdoBut[]        =   new JRadioButton[10];
        JButton         teamBut[]       =   new JButton[10];
        ButtonGroup     rdBtGp          =   new ButtonGroup();
        String          rdoButNum[]     =   {"1","2","3","4","5","6","7","8","9","10"};
        String          teamName[]      =   {"A","BB","CCC","DDDD","EEEEE","FFFFFF",
                                            "GGGGGGG","HHHHHHHH","IIIIIIIII","JJJJJJJJJJ"};
        String          from;
        String          to;
        String fromTo;
        int i;

    public GUIswitchClass()                                                 //constructor
    {
        super("Swap Elements");

        fromTo  = setButs();
        //to        = teamBut[teamName[i]];

    }
    private String setButs()
    {
        int i;
        leftPanel.setLayout(new GridLayout(10,1));
        rightPanel.setLayout(new GridLayout(10,1));
        for(i=0;i<10;i++)
        {
            rdoBut[i] = new JRadioButton(rdoButNum[i]);
            rdoBut[i].setFont(new Font("Courier", Font.PLAIN, 30) );
            rdoBut[i].addActionListener(new checkHdlr() );
            rdBtGp.add(rdoBut[i]);
            leftPanel.add(rdoBut[i]);   
        }

        for(i=0;i<10;i++)
        {
            teamBut [i] =   new JButton(teamName[i]);
            teamBut[i].setFont(new Font("Courier", Font.PLAIN, 30) );
            teamBut[i].setHorizontalAlignment(SwingConstants.LEFT);
            rightPanel.add(teamBut[i]);
        }

        allPanel.setLayout(new BorderLayout());
            allPanel.add(leftPanel, BorderLayout.WEST);
            allPanel.add(rightPanel, BorderLayout.CENTER);
        add(allPanel);

        return fromTo;

    }
    @SuppressWarnings("unused")
    private class checkHdlr implements ActionListener
    {
        public void actionPerformed(ActionEvent event)
        {
            String userNum;
            userNum = event.getActionCommand();

        }
    }   

//--------------------------------------------------------------------------
     public static void moveTeam(String teamName[],String fromTo)
      {
        int             from;
        int             to;

        if(from>to)                           //determine direction to move
          moveUp(teamName,from,to);
        else
          moveDown(teamName,from,to);
      }

 //---------------------------------------------------------------------move up
  public static void moveUp(String teamList[], int from, int to)
  {
    String clipboard;
    int    row;

    clipboard = teamList[from];           //copy

    for(row=from;row>to;row--)            //shift others down
      teamList[row] = teamList[row-1];

    teamList[row] = clipboard;            //paste
  }
  //-------------------------------------------------------------------move down
  public static void moveDown(String teamList[], int from, int to)
  {
    String clipboard;
    int    row;

    clipboard = teamList[from];           //copy

    for(row=from;row<to;row++)            //shift others up
      teamList[row] = teamList[row+1];

    teamList[row] = clipboard;            //paste
  }
  //---------------------------------------------------------------------display
  public static void disp(String teamList[])
  {
    int r;
    for(r=0;r<10;r++)
      System.out.printf("%2d %s\n",r+1,teamList[r]);
  }
} 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-25T02:56:58.840

我不会交换 JButtons 本身，而是提供 JButton 的 AbstractActions 并简单地交换这些 Actions，因为这非常容易做到。或者你可以交换 JButton 的文本和 actionCommand（如果你要走这条路，你应该两者都做），但这会涉及到并行交换，对我来说感觉不那么干净。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-09-25T03:12:50.057

我会用`JRadioButton`s替换`JCheckBox`s，主要是因为您可以同时选择两个，并且允许以这种方式选择复选框比允许单选按钮更有意义。

我会为所有复选框创建一个动作监听器，所以每次点击都会通过它。

在动作侦听器中，我将使用 a`java.util.List`来跟踪当前选择的选项（您可以遍历数组，但我发现这更简单）。

当列表包含两个项目时，我会...

*   取消选中两个复选框并清空列表
*   使用获取每个复选框的当前索引（或 Z 顺序）[`Container.getComponentZOrder(Component)`](http://docs.oracle.com/javase/7/docs/api/java/awt/Container.html#getComponentZOrder%28java.awt.Component%29)
*   从左侧面板中找到相应的按钮（这是通过使用在上一步中检索到的索引值来实现的），使用[`Container.getComponent(int)`](http://docs.oracle.com/javase/7/docs/api/java/awt/Container.html#getComponent%28int%29)
*   交换组件。这是通过使用[`setComponentZOrder(Component, int)`](http://docs.oracle.com/javase/7/docs/api/java/awt/Container.html#setComponentZOrder%28java.awt.Component,%20int%29)

就像是...

```
int index0 = leftPanel.getComponentZOrder(cb0);
int index1 = leftPanel.getComponentZOrder(cb1);

Component comp0 = rightPanel.getComponent(index0);
Component comp1 = rightPanel.getComponent(index1);

rightPanel.setComponentZOrder(comp0, index1);
rightPanel.setComponentZOrder(comp1, index0); 
```

您还需要`revalidate()`在框架上更新布局；）

# coding-style - 两种迭代的区别

> ID：12575383
> 
> 赞同：3
> 
> 时间：2012-09-25T02:15:41.583
> 
> 标签：coding-style, logic, hoare-logic

这是一个核心问题 **，请不要说关于语法或语义**，问题是两者之间的实际区别是什么

> `WHILE`循环和`FOR`循环，for循环中编写的所有内容都可以用while循环完成，那么为什么要两个循环呢？

这是在剑桥大学的一次研讨会上提出的。所以我认为我们必须在性能开销和 WC 复杂性方面进行解释。

我认为我们必须按照弗洛伊德霍尔的逻辑

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-25T02:19:01.517

就性能开销而言，这将取决于您使用的编译器和语言。

它们之间的主要区别在于，for 循环在迭代某个集合时更易于阅读，而 while 循环在评估特定条件或布尔标志时更易于阅读。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-25T02:21:23.537

两个循环结构之间的唯一区别是能够在循环头中进行`for`循环前初始化和循环后更改。两者之间没有性能差异

```
while (condition) {
    ...
} 
```

和

```
for ( ; condition ; ) {
    ...
} 
```

结构体。为了方便和可读性，添加了替代方案，没有其他含义。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-25T02:17:24.750

不同之处在于`for()`循环将多个步骤压缩为一行。最终，所有答案都会以这种方式归结为语法或语义，所以不可能有一个真正让你满意的答案。

循环仅说明循环终止的`while()`条件，而`for()`循环可以规定要测量的变量以及除此之外的计数器。

（实际上，`for()`循环是非常通用的，在它们的声明中可以发生很多事情以使它们非常漂亮，但是上面的语句总结了几乎所有`for()`你会看到的循环，即使在生产环境中也是如此。）

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-09-25T02:22:56.560

两者之间的一个偶尔相关的区别是，while 循环可以比 for 循环施加更复杂的条件

循环通过可预测大小的集合时，最好使用 FOR 循环

我想这会被认为是语法上的，但我认为它驳斥了 for 循环可以做 while 循环可以做的任何事情的概念，尽管反过来确实是正确的

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-09-25T03:11:37.083

显然不需要两个循环，你只需要一个。事实上，许多教科书都考虑了一种语言（通常命名为`Imp`），它在*while* `for`之前`while`使用初始化语句去糖。

话虽如此，如果您尝试计算循环不变量的差异，以及这两个循环的 Hoare 逻辑中的相关规则，它们会因为 init 块而略有不同。既然这看起来像家庭作业，我会让你弄清楚细节。

所以答案是：“它让事情变得更容易，在语法*和*证明方面，但它只是装饰性的，出于所有目的，你真的只需要一个......”

到目前为止，其他答案都没有指出我认为区别的真正重要部分是针对您的问题：这可能是他们用 Hoare 连接词改变了一些东西......

另外，请注意，基于 Hoare 逻辑推测性能是愚蠢的。如果您关心语义，您的教授可能不会在乎或想听听性能:-)

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-10-20T23:53:02.073

一切都可以用 if-goto 语句来完成。那么为什么有任何循环呢？它是一种语法糖，可以让开发人员的生活更轻松，并允许编写结构更好（更小、更易读）的代码。它与性能无关

# javascript - Javascript 错误：window.parent.frames[0].getElementById - 在第一次加载时工作正常然后失败

> ID：12575391
> 
> 赞同：1
> 
> 时间：2012-09-25T02:17:16.873
> 
> 标签：javascript, html

我有一个包含多个 iframe 的页面：

父母

| **__** _iframe1

| **__** _iframe2

| **__** _iframe3

iframe1 有一个带有一些隐藏值的表单。我需要（至少）iframe2 上的其中一个值

这是我的代码

```
<script type="text/javascript">
    alert(parent.frames[0].document.getElementById("UserID").value);
</script> 
```

网站第一次加载时，此页面运行良好。我得到了我的测试弹出窗口。iframe1 是一组重新加载 iframe2 的选项卡。当用户最终导航回包含我的脚本的选项卡时，我得到 parent.frames[0] 的空引用。

我正在努力解决这个问题，并希望得到任何帮助。

我可以在 Firefox 和 IE 中 100% 地复制它。使用 Chrome 和 Safari 时，情况就不那么好了。并不是因为该值不经常为空，而是更多的时候信息是不可访问的，我只是不确定我做错了什么。

编辑以便于查看：这些帧都在同一个域、相同的协议和端口上。

虽然我正在实现使用 easyXDM 以便我可以将一些数据传递到另一个站点，但如果我包含 easyXDM，我就会遇到这个问题。

谢谢！

看起来这是由于 ddr2 建议的 onLoad 所致。如果您将此作为答案发布，我很乐意将其标记为正确的答案。

我有点沮丧，我没想到:(

# c++ - 需要帮助纠正 FFmpeg DLL 的访问冲突

> ID：12575395
> 
> 赞同：3
> 
> 时间：2012-09-25T02:17:53.940
> 
> 标签：c++, dll, ffmpeg, visual-studio-2012

我正在尝试使用 Visual Studio 2012 使用 FFmpeg dll，当我调用`avcodec_find_encoder`. 这是代码：

```
// TestFFmpeg.cpp : Defines the entry point for the console application.
//

#include "stdafx.h"

extern "C" {
#include "libavcodec\avcodec.h"
#include "libavformat\avformat.h"
}

#define INBUF_SIZE 4096

int _tmain(int argc, _TCHAR* argv[])
{
    AVCodec *codec;

    const char *videoFilename = "C:\\Users\\Public\\Videos\\Sample Videos\\Wildlife.wmv";

    av_register_all(); // This works; however, no parameters or return values.

    codec = avcodec_find_encoder(CODEC_ID_WMV3);  // Run time Access Violation HERE
    if (!codec) {
    fprintf(stderr, "Codec not found\n");
        exit(1);
    }

    return 0;
} 
```

这是错误消息：

*TestFFmpeg.exe 中 0x75C18B60 (msvcrt.dll) 处的未处理异常：0xC0000005：访问冲突读取位置 0x00000049。*

堆栈跟踪是：

```
 msvcrt.dll!_strcmp()    Unknown
    avcodec-54.dll!6a56caac()   Unknown
    [Frames below may be incorrect and/or missing, no symbols loaded for avcodec-54.dll]    
>   TestFFmpeg.exe!wmain(int argc, wchar_t * * argv) Line 23    C++
    TestFFmpeg.exe!__tmainCRTStartup() Line 533 C
    TestFFmpeg.exe!wmainCRTStartup() Line 377   C
    kernel32.dll!@BaseThreadInitThunk@12()  Unknown
    ntdll.dll!___RtlUserThreadStart@8() Unknown
    ntdll.dll!__RtlUserThreadStart@8()  Unknown 
```

我猜返回`codec`指针有问题，但我是 C++ 新手，不知道如何纠正它。我尝试了 cdecl、stdcall 和 fastcall 调用约定——没有一个能纠正这个问题。我正在使用来自 Zeranoe 的最新 32 位 DLL。有什么建议么？

编辑：我在 DLL 中调用了其他函数并且它们可以工作。例如，`avformat_open_input`正常工作。我可以传递参数并且函数返回一个成功的返回值 (0) 并填充格式上下文结构。 `av_find_stream_info`也可以。我仍然无法弄清楚为什么`avcodec_find_decoder`会产生访问冲突。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-26T02:02:17.733

最后，修好了。我做了两个步骤，但我不确定哪一个有效（呵呵）：

1.  添加了“.lib”文件作为链接器输入依赖项
2.  我选择了 9 月 7 日的构建，并确保我的 dll、库和包含文件的构建日期都相同。

现在一切似乎都运行良好。

# arrays - 我在处理中有两个 ArrayList，我需要将它们都发送到 Arduino，并让 Arduino 将它们存储在自己的数组中

> ID：12575397
> 
> 赞同：2
> 
> 时间：2012-09-25T02:18:08.217
> 
> 标签：arrays, arduino, communication, processing

我在[Processing](http://en.wikipedia.org/wiki/Processing_%28programming_language%29)中编写了以下[草图](http://www.arduino.cc/en/Tutorial/Sketch)，它扫描图像，并将每个黑色像素的坐标存储到两个 ArrayLists - xList 和 yList 中。它目前会打印出坐标，但现在我需要将这些 ArrayLists 发送到 Arduino，并让 Arduino 将其存储在自己的两个数组（或一个 2D 数组）中。我遇到的问题是无法告诉 Arduino xList 中的数据何时结束，yList 中的数据何时开始，因为 ArrayLists 中没有预定义数量的元素。

```
import javax.swing.*;

PImage img;
//Threshold determines what is considered a "black" pixel
//based on a 0-255 grayscale.
int threshold = 50;

void setup() {

  // File opener
  try{
    UIManager.setLookAndFeel(UIManager.getSystemLookAndFeelClassName());
  } catch (Exception e) {
    e.printStackTrace();
  }
  final JFileChooser fc = new JFileChooser();

  int returnVal = fc.showOpenDialog(this);

  if (returnVal == JFileChooser.APPROVE_OPTION) {
    File file = fc.getSelectedFile();
    if (file.getName().endsWith("jpg")) {
      img = loadImage(file.getPath());
      if (img != null) {
        size(img.width,img.height);
        image(img,0,0);
      }
    } else {
      println("Please select a .jpg image file.");
    }
  }
  //I added noLoop() here, because the program would output 
  //the coordinates continuously until it was stopped.
  noLoop();
}

void draw() {
  //Here it scans through each pixel of the image.
  ArrayList xList = new ArrayList();
  ArrayList yList = new ArrayList();
  for (int ix = 0; ix < img.width; ix++) {
    for (int iy = 0; iy < img.height; iy++) {
      //If the brightness of the pixel at (ix,iy) is less than
      //the threshold
      if (brightness(get(ix,iy)) < threshold) {
        //Add ix, and iy to their respective ArrayList.
        xList.add(ix);
        yList.add(iy);
      }
    }
  }
  //Print out each coordinate
  //For this statement, I use xList.size() as the limiting
  //condition, because xList and yList should be the same size.
  for (int i=0; i<xList.size(); i++) {
    println("X:" + xList.get(i) + " Y:" + yList.get(i));
  }
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-25T17:48:57.943

由于已知两个数组大小相同，而不是先发送整个 X 列表，然后再发送整个 Y 列表，因此您可以先发送一个 x，然后再发送一个 y，然后再发送下一个 x，然后再发送下一个 y...

在 Arduino 方面，您将收到的第一个数字放入 x 数组，然后将第二个放入 Y 数组，第三个放入 X，第四个放入 Y，等等......

在 Arduino 上要注意的一件事是，由于它在 C++ 中，因此没有对数组进行边界检查，当向其中添加新数据时，数组也不会增长。您必须确保使用足够的存储空间初始化数组以适应所有坐标。

# jquery - 将 jQuery 循环寻呼机拆分为 div

> ID：12575402
> 
> 赞同：0
> 
> 时间：2012-09-25T02:19:39.230
> 
> 标签：jquery, cycle

我有一个 jQuery 循环滑块工作正常，但我需要将寻呼机拆分到不同的地方。分页本身可以工作，但每个 div 的活动幻灯片是相同的 - 即对于第一张幻灯片，每个 div 中的第一个寻呼机将显示为活动的。我很难弄清楚如何解决这个问题！

我试图实现的一个例子是这个网站的分页[http://www.cote-carmes.com/en-en/rooms.php](http://www.cote-carmes.com/en-en/rooms.php)。

标记的思想如下：

```
<div id="home-content">
<div class="home-sub first">
   <ul class="slide-nav">
      <li><a href="#">Link</a></li>
      <li><a href="#">Link</a></li>
      <li><a href="#">Link</a></li>
   </ul>
</div>

<div class="home-sub">
   <ul class="slide-nav">
      <li><a href="#">Link</a></li>
      <li><a href="#">Link</a></li>
      <li><a href="#">Link</a></li>
   </ul>
</div>

<div class="home-sub">
   <ul class="slide-nav">
      <li><a href="#">Link</a></li>
      <li><a href="#">Link</a></li>
      <li><a href="#">Link</a></li>
   </ul>
</div>
</div> 
```

我的jQuery如下：

```
$('#home-slider').cycle({
        pager:  '#home-content ul', 
        pagerAnchorBuilder: function(idx, slide) { 
            // return selector string for existing anchor 
            return '#home-content li:eq(' + idx + ') a'; 
        }

    }); 
```

请帮忙！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-25T05:37:19.623

克里斯，

我想我破解了它。

查看**[这个](http://jsfiddle.net/SbbTN/1/)**基于 jquery.malsup.com/cycle/pager3.html 的演示。

这就是我所做的：

*   将寻呼机 ul 拆分为两个单独的 ul
*   修改了`.cycle()`调用中的 pagerAnchorBuilder 选项，如下所示，仅使每个 ul 中的第一个链接成为活动寻呼机。
*   添加了一些 css 来为两个 uls 中的锚边框赋予不同的颜色（只是为了指示不同的 uls）并为活动的寻呼机链接提供鼠标悬停效果。

Javascript：

```
$('#slideshow').cycle({
    fx:     'turnDown',
    speed:  'fast',
    timeout: 0,
    pager:  '#nav',
    pagerAnchorBuilder: function(idx, slide) {
        var selector = '#nav li:eq(' + (idx) + ')';//li selector
        var $li = $(selector).filter(function() {
            return $(this).index() == 0;//accept only the first li in its ul
        });
        if( $li.length > 0 ) {
            $li.find('a').addClass('pager');
            return selector + ' a';//anchor selector
        }
    }
}); 
```

这可能不是你想要的，但它应该给你一条前进的道路。

## 编辑

从你的[小提琴](http://jsfiddle.net/2HFUz/1/)开始，我最终得到了这个：

```
$('#home-slider').cycle({
    pager: '#home-content',
    pagerAnchorBuilder: function(idx, slide) {
        return '#home-content li:eq(' + idx + ') a';
    },
    updateActivePagerLink: function(containerID, idx, cl) {
        $lis = $('#home-content li').removeClass(cl).eq(idx).addClass(cl);
    }
}); 
```

注意事项：

*   在 HTML 中，`<div class="home-sub">`包装器被移除 - 不必要的。
*   循环`pager`选项从更改`pager: '#home-content ul'`为`pager: '#home-content'`
*   添加了循环`updateActivePagerLink`选项 - 以提供自定义突出显示效果

**[演示](http://jsfiddle.net/2HFUz/2/)**

# c# - 我希望我的程序通过命令行接受文件路径

> ID：12575407
> 
> 赞同：-1
> 
> 时间：2012-09-25T02:20:35.433
> 
> 标签：c#, .net

简而言之，我一直在研究一种处理打开和保存加密文件的文本加密器。但是，当我单击程序外部的加密文件时，它当然会打开我的程序并将路径传递给 Main(string[] args)。但是，我不知道如何从数组中获取路径名（所以当我的程序启动时我无法自动打开文件）。目前我的程序被调用、打开并显示一个空文本框，就像它在正常情况下打开时一样。

编辑：这已解决使用

> 字符串路径 = args[0];

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-25T02:57:56.967

如所示，该`args`参数只是一个字符串数组。

传递的第一个参数是`args[0]`，第二个是`args[1]`，依此类推。

在这种情况下，假设路径是您将使用的唯一传递参数

```
string path = args[0]; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-25T03:01:34.937

如果我理解你是正确的，你想从 args 数组中获取值吗？

您可以遍历每个字符串以检查值：

```
static void Main(string[] args)
{
     foreach (string arg in args)
     {
        Console.WriteLine(arg);
     }
} 
```

然后你传递这样的参数：
>>> MyProgram.exe "argument1" "argument2"

输出，（来自我的示例）：
>>> argument1
>>> argument2

# ruby-on-rails - Web 应用程序设置存储

> ID：12575418
> 
> 赞同：1
> 
> 时间：2012-09-25T02:23:09.833
> 
> 标签：ruby-on-rails, web-applications, settings

我正在构建一个 Web 应用程序（Ruby on Rails），我需要保存应用程序范围的设置。例如，假设我需要能够允许用户通过表单修改应用程序的名称。我知道我可以在数据库中创建一个设置模型并将我的设置存储在其中并根据我的需要使用它们，但这似乎有点过头了，你知道，出于某种原因，只有一个表用于一行信息，它闻起来像是糟糕的设计。

我想知道其他人解决此类问题的方法是什么。如果有“Rails 方式”来做到这一点？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-25T03:11:26.160

检查这些：

[http://kpumuk.info/ruby-on-rails/flexible-application-configuration-in-ruby-on-rails/](http://kpumuk.info/ruby-on-rails/flexible-application-configuration-in-ruby-on-rails/)

[设置逻辑](https://github.com/binarylogic/settingslogic)

# mysql - SQL查询UPDATE两行被另一行过滤

> ID：12575419
> 
> 赞同：2
> 
> 时间：2012-09-25T02:23:14.257
> 
> 标签：mysql, sql

我有两行要更新，列是`meta_key`和`meta_value`。有`meta_key`两行我要过滤，它是`first_name`and `last_name`。我想更新，`meta_value`但它被`first_name`and过滤了`last_name`。我的查询是这样的：

```
UPDATE 
  `wp_usermeta` 
SET 
  (`meta_value` = 'First Name' WHERE `meta_key` = 'first_name'), 
  (`meta_value` = 'Last Name' WHERE `meta_key` = 'last_name') 
WHERE `user_id` = (SELECT `user_id` FROM (SELECT MAX(`user_id`) AS `user_id`
FROM `wp_usermeta`) AS `reg`) 
```

请帮助我..提前谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-25T02:28:18.077

您只需要一级子选择。

```
UPDATE `wp_usermeta`
   SET `meta_value` = IF(`meta_key` = 'first_name', 'First Name',
                      IF(`meta_key` = 'last_name', 'Last Name',
                         `meta_value`))
 WHERE `user_id` = (SELECT MAX(`user_id`) FROM `wp_usermeta`)
   AND (`meta_key` = 'first_name' OR `meta_key` = 'last_name') 
```

或者，您可以像大多数人一样只使用两个单独的查询。

```
UPDATE `wp_usermeta`
   SET `meta_value` = 'First Name'
 WHERE `user_id` = (SELECT MAX(`user_id`) FROM `wp_usermeta`)
   AND `meta_key` = 'first_name';
UPDATE `wp_usermeta`
   SET `meta_value` = 'Last Name'
 WHERE `user_id` = (SELECT MAX(`user_id`) FROM `wp_usermeta`)
   AND `meta_key` = 'last_name'; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-25T02:28:37.897

你为什么不以这种方式更新

```
UPDATE `wp_usermeta` 
SET `meta_value` = 'First Name' 
WHERE `meta_key` = 'first_name' 
  AND `user_id` = (SELECT `user_id` FROM (SELECT MAX(`user_id`) AS `user_id` FROM `wp_usermeta`) AS `reg`)

UPDATE `wp_usermeta` 
SET `meta_value` = 'Last Name'
WHERE `meta_key` = 'last_name'
  AND `user_id` = (SELECT `user_id` FROM (SELECT MAX(`user_id`) AS `user_id` FROM `wp_usermeta`) AS `reg`) 
```

# python - 在numpy中将一维数组转换为二维数组

> ID：12575421
> 
> 赞同：166
> 
> 时间：2012-09-25T02:23:30.423
> 
> 标签：python, arrays, matrix, numpy, multidimensional-array

我想通过指定二维数组中的列数将一维数组转换为二维数组。可以这样工作的东西：

```
> import numpy as np
> A = np.array([1,2,3,4,5,6])
> B = vec2matrix(A,ncol=2)
> B
array([[1, 2],
       [3, 4],
       [5, 6]]) 
```

numpy 是否有一个像我虚构的函数“vec2matrix”一样工作的函数？（我知道您可以像二维数组一样索引一维数组，但这不是我拥有的代码中的选项 - 我需要进行这种转换。）

* * *

## 回答 #1

> 赞同：238
> 
> 时间：2012-09-25T02:27:24.127

你想要[`reshape`](http://docs.scipy.org/doc/numpy/reference/generated/numpy.reshape.html)的数组。

```
B = np.reshape(A, (-1, 2)) 
```

其中`-1`从输入数组的大小推断新维度的大小。

* * *

## 回答 #2

> 赞同：52
> 
> 时间：2012-09-25T08:03:46.123

你有两个选择：

*   如果您不再想要原始形状，最简单的方法就是为数组分配一个新形状

    ```
    a.shape = (a.size//ncols, ncols) 
    ```

    您可以切换`a.size//ncols`by`-1`以自动计算正确的形状。确保`a.shape[0]*a.shape[1]=a.size`，否则你会遇到一些问题。

*   您可以使用该函数获得一个新数组，该数组的`np.reshape`工作原理与上面介绍的版本大致相同

    ```
    new = np.reshape(a, (-1, ncols)) 
    ```

    如果可能，`new`将只是初始数组的视图`a`，这意味着数据是共享的。但是，在某些情况下，`new`array 将改为 acopy。请注意，`np.reshape`它还接受一个可选关键字`order`，可让您从 C 行优先顺序切换到 Fortran 列优先顺序。`np.reshape`是`a.reshape`方法的函数版本。

如果您不能遵守要求`a.shape[0]*a.shape[1]=a.size`，那么您将不得不创建一个新数组。您可以使用该`np.resize`功能并将其与 混合使用`np.reshape`，例如

```
>>> a =np.arange(9)
>>> np.resize(a, 10).reshape(5,2) 
```

* * *

## 回答 #3

> 赞同：12
> 
> 时间：2012-09-25T04:19:41.417

尝试类似：

```
B = np.reshape(A,(-1,ncols)) 
```

您需要确保可以除以数组中的元素数`ncols`。`B`您还可以使用`order`关键字来调整数字的排列顺序。

* * *

## 回答 #4

> 赞同：10
> 
> 时间：2020-01-14T18:09:56.600

如果您的唯一目的是将一维数组 X 转换为二维数组，请执行以下操作：

```
X = np.reshape(X,(1, X.size)) 
```

* * *

## 回答 #5

> 赞同：5
> 
> 时间：2021-01-10T04:38:15.383

通过添加新轴将一维数组转换为二维数组。

```
a=np.array([10,20,30,40,50,60])

b=a[:,np.newaxis]--it will convert it to two dimension. 
```

* * *

## 回答 #6

> 赞同：2
> 
> 时间：2021-01-07T03:07:55.563

还有一个简单的方法，我们可以用不同的方式使用 reshape 函数：

```
A_reshape = A.reshape(No_of_rows, No_of_columns) 
```

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2019-03-20T16:19:53.247

您可以`flatten()`从 numpy 包中使用。

```
import numpy as np
a = np.array([[1, 2],
       [3, 4],
       [5, 6]])
a_flat = a.flatten()
print(f"original array: {a} \nflattened array = {a_flat}") 
```

输出：

```
original array: [[1 2]
 [3 4]
 [5 6]] 
flattened array = [1 2 3 4 5 6] 
```

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2020-04-18T02:27:20.460

```
some_array.shape = (1,)+some_array.shape 
```

或者买一个新的

```
another_array = numpy.reshape(some_array, (1,)+some_array.shape) 
```

这将使尺寸+1，等于在最外面添加一个括号

* * *

## 回答 #9

> 赞同：-1
> 
> 时间：2019-11-25T14:38:30.790

```
import numpy as np
array = np.arange(8) 
print("Original array : \n", array)
array = np.arange(8).reshape(2, 4)
print("New array : \n", array) 
```

* * *

## 回答 #10

> 赞同：-2
> 
> 时间：2019-09-06T10:37:43.977

不使用 Numpy 将一维数组更改为二维数组。

```
l = [i for i in range(1,21)]
part = 3
new = []
start, end = 0, part

while end <= len(l):
    temp = []
    for i in range(start, end):
        temp.append(l[i])
    new.append(temp)
    start += part
    end += part
print("new values:  ", new)

# for uneven cases
temp = []
while start < len(l):
    temp.append(l[start])
    start += 1
    new.append(temp)
print("new values for uneven cases:   ", new) 
```

# iphone - #define SIZEOF Xcode

> ID：12575424
> 
> 赞同：1
> 
> 时间：2012-09-25T02:23:59.117
> 
> 标签：iphone, objective-c, xcode

我有一个 Xcode 项目，在我的 UIView.h 中有这样的代码：

```
#define FINGER_SIZE 20 
```

请告诉我，如何从另一个 UIView 更改 FINGER_SIZE 的值。

我有 SecondView 和 UIButton。我需要类似的东西：

```
 -(IBAction)changeSize
{

//Change FINGER_SIZE from 20 to 50

} 
```

我在 SecondView 中的“changeSize”动作和#define FINGER_SIZE 20，我在 UIView.h 中

谢谢你。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-09-25T02:31:29.377

预`#define`处理器构造没有定义变量，它定义了一个常量。无法更改 的值`FINGER_SIZE`，因为在 Objective C 编译器开始查看您的代码时它并不存在：到那时它已被替换`20`。

您正在寻找的是一个*全局变量*。像这样在标题中声明它

```
extern NSUInteger FINGER_SIZE; 
```

然后在这样的`.m`文件中定义它：

```
NSUInteger FINGER_SIZE = 20; 
```

现在你有了一个可赋值的变量，你可以从任何看到声明的方法中自由地改变它。

# c# - 如何以编程方式复制网页的源代码？

> ID：12575425
> 
> 赞同：-1
> 
> 时间：2012-09-25T02:24:11.410
> 
> 标签：c#, .net

我正在使用夏普开发。我正在使用 C# 制作一个 Windows 窗体应用程序。在这个应用程序中，我使用的是 webbrowser 控件。我希望当我打开网页时，我的网络浏览器应该以编程方式将该网页的源代码复制到文本文件中。我正在使用以下代码来执行此任务

```
string MSDNpage1 = webBrowser1.Document.Body.InnerText;
cxz.My.MyProject.Computer.FileSystem.WriteAllText("F:\\Assignment.txt", MSDNpage1, true); 
```

但这给出了一个错误

> “名称空间 cxz 中不存在类型或名称空间名称“My”（您是否缺少程序集引用？）（CS0234）”

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-25T02:56:34.707

该`My`关键字存在于 VB.Net 而不是 C# 中。以下是在 C# 中将文本写入文件的代码：

```
// Compose a string that consists of three lines.
string lines = "First line.\r\nSecond line.\r\nThird line.";

// Write the string to a file.
System.IO.StreamWriter file = new System.IO.StreamWriter("c:\\test.txt");
file.WriteLine(lines);

file.Close(); 
```

参考：[代码：写入文本文件 Visual C#](http://msdn.microsoft.com/en-us/library/aa287548%28v=vs.71%29.aspx)

# c# - 如何在图像上的文字下生成阴影

> ID：12575429
> 
> 赞同：8
> 
> 时间：2012-09-25T02:24:32.393
> 
> 标签：c#, asp.net, image-processing

```
public static System.Drawing.Image GenerateGiftCard(String text, Font font, Color textColor)
{
    System.Drawing.Image img = Bitmap.FromFile(@"G:\xxx\images\gift-card.jpg");
    Graphics drawing = Graphics.FromImage(img);

    //measure the string to see how big the image needs to be
    SizeF textSize = drawing.MeasureString(text, font);

    //create a brush for the text
    Brush textBrush = new SolidBrush(textColor);

    float x, y;

    x = img.Width / 2 - textSize.Width / 2;
    y = img.Height / 2 - textSize.Height / 2;

    drawing.DrawString(text, font, textBrush, x, y);

    drawing.Save();

    textBrush.Dispose();
    drawing.Dispose();

    return img;
} 
```

但是这段代码生成的文本是“普通的”，不是立体的，下面也没有阴影。

这是我想要的字体**样式：**

![美丽的人物](../Images/69f53d801b84a7117e71406763156b54.png)

**我可以做些什么来通过我的代码生成相同的样式吗？**

**有谁知道如何使用 SiteMapPath 或 ResolveURL 对象将相对路径传输到物理路径？干杯，**

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-09-25T02:39:48.440

首先通过在偏移处使用较暗、可选半透明画笔绘制文本来渲染阴影。渲染阴影后，覆盖常规文本。

**示例**：

```
public static System.Drawing.Image GenerateGiftCard(String text, Font font, Color    textColor, Color shadowColor, SizeF shadowOffset)
{
    System.Drawing.Image img = Bitmap.FromFile(@"G:\xxxx\images\gift-card.jpg");
    Graphics drawing = Graphics.FromImage(img);

    //measure the string to see how big the image needs to be
    SizeF textSize = drawing.MeasureString(text, font);

    //create a brush for the text
    Brush shadowBrush = new SolidBrush(shadowColor); // <-- Here
    Brush textBrush = new SolidBrush(textColor);

    float x, y;

    x = img.Width / 2 - textSize.Width / 2;
    y = img.Height / 2 - textSize.Height / 2;

    drawing.DrawString(text, font, shadowBrush, x + shadowOffset.Width, y + shadowOffset.Height); // <-- Here
    drawing.DrawString(text, font, textBrush, x, y);

    drawing.Save();

    textBrush.Dispose();
    drawing.Dispose();

    return img;
} 
```

# jdbctemplate - Spring JdbcTemplate 结果集第一次为空

> ID：12575431
> 
> 赞同：-1
> 
> 时间：2012-09-25T02:24:38.277
> 
> 标签：jdbctemplate

简而言之，问题是我第一次调用 JdbcTemplate 并查询数据库时结果集为空。

当我第二次访问 DAO 方法时，我得到了预期的结果。以下是有关如何设置类的更多信息：

我有一个扩展父数据访问对象的数据访问对象。父 dao 类只是将数据源注入到 JdbcTemplate 的构造函数中：

```
public class BaseDao
{
    private JdbcTemplate usrJdbcTemplate;

    public void setUsrDataSource(DataSource usrDataSource)
    {
        this.usrJdbcTemplate = new JdbcTemplate(usrDataSource);
    }

    public JdbcTemplate getUsrJdbcTemplate()
    {
        return this.usrJdbcTemplate;
    }

} 
```

扩展它的类使用这个 JdbcTemplate 来查询一个表：

```
public class OimUserDao extends BaseDao
{
    public Date getPasswordExpiryDate(String userName)
    {

    String sql = "select USR_PWD_EXPIRE_DATE from USR where UPPER (USR_LOGIN) = ?";

    List<java.sql.Date> dtLst  = getUsrJdbcTemplate().query(sql, new Object[] {userName.toUpperCase()}, new RowMapper<java.sql.Date>() 
      {
      @Override
      public java.sql.Date mapRow(final ResultSet rs, int rowNum) throws SQLException
      {
      return rs.getDate(1);
      }
      });

    if (dtLst.size()>0)
    {
    return dtLst.get(0);
    }
    else
    {
    return null;
    }
    }
} 
```

DAO 使用@Autowired 注解在服务中自动装配。xml 中的 DAO 声明：

```
<bean id="baseDao" class="us.worldpay.portalgateway.dao.BaseDao">
    <property name="usrDataSource" ref="usrDataSource" />
</bean>

<bean id="oimUserDao" class="us.worldpay.portalgateway.dao.OimUserDao" parent="baseDao" /> 
```

Web.xml 有 xml 的声明，其中包含这些 DAO 的 bean 定义（pg-data 是我们关心的那个）：

```
<context-param>
    <param-name>contextConfigLocation</param-name>
    <param-value>
        /WEB-INF/pg-servlet.xml,
        /WEB-INF/pg-data.xml
</param-value>
</context-param> 
```

更糟糕的是，这永远不会发生在我的本地机器（Weblogic）上，它指向与我们的 QA 环境相同的数据库（Oracle）。当我在本地机器上运行它时，第一次结果集已填充并包含数据。当我在 QA 环境（Weblogic）上运行它时，结果集第一次是空的。我已经花了几个小时和几个小时，但没有得到任何地方。

我很感谢您花时间阅读这篇文章。我很感激我能得到的所有帮助。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-25T02:33:50.560

我看不出有什么理由`BaseDao`。我会放弃它，只需将其注入`SimpleJdbcTemplate`需要它的 DAO 中。

您应该`PreparedStatement`自己使用而不是转义用户名。我不会在查询中使用 LIKE 子句。您的用户名应该是唯一的；你应该得到一个日期回来。

好的，让我们再问一些问题。

您说 ResultSet “第一次”为空。你是说如果你只是重新运行它不是空的方法调用？“我想是的，是的。” 你需要确定。这是您问题的核心。

您确定您的本地机器和 QA 环境指向同一个 Oracle 实例吗？“我非常确定。是的。” 很好！

如果您使用客户端登录 Oracle 并运行相同的查询，它会返回您期望的结果吗？“是的，它确实。” 出色的！

您是否使用调试器单步执行代码以查看发生了什么？我强烈推荐它。

还有一个问题：是否抛出了您没有捕获的异常？Spring 将 SQLException 包装到未经检查的 DataAccessException 中。也许第一次发生不好的事情，在第二次通话中得到纠正。我只是在这里抓住稻草。

# python - Python：如何添加频率的行号并使用字典按字母顺序排序

> ID：12575432
> 
> 赞同：0
> 
> 时间：2012-09-25T02:24:38.370
> 
> 标签：python, defaultdict

我有一个项目，我必须通过 sys.stdin 获取每个单词的频率数量

我已经获得了那部分。第二部分是获取每个单词的行号，我觉得我已经获得了，但是我无法将行号添加到输出字符串中，如果单词具有相同的频率，我也无法找到按字母顺序排序的方法

这是我的代码：

```
if __name__ == '__main__':

wordCount = defaultdict(list)
words = {}

for i, line in enumerate(sys.stdin.readlines()):
    wordCount[line].append(i+1) #add the line number to each element in the line
    for word in line.lower().split():
        words[word] = words.get(word, 0) + 1

sortedList = sorted(words.items(), key=itemgetter(1), reverse=True)
for word, frequency in sortedList:
    print("%d %s" % (frequency, word))," " # <-- HERE I NEED TO ADD THE LINE NUMBER AND ALSO SORT ALPHABETICALLY 
```

如果我输入“Python 真的很酷”#line 1 “我真的在使用 python”#line 2

输出应该是：

```
2 python 1 2

2 really 1 2

1 am 2

1 cool 1

1 I 2

1 is 1

1 with 2

1 working 2 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-25T02:33:30.560

既然您已经了解 defaultdict，我会继续这样做——尽管我会使用 a作为键，`defaultdict(list)`而`words`值将是行号列表。然后，最后，您可以遍历您的字典`len`以获取列表中的值以获取您的计数（可能`sorted` `set`在打印行号时使用 a 以消除重复项）。

# ruby-on-rails - Rails object.valid？有论据

> ID：12575435
> 
> 赞同：1
> 
> 时间：2012-09-25T02:25:07.780
> 
> 标签：ruby-on-rails, ruby-on-rails-3, validation

是否可以将 :symbols 传递给有效值？方法，以便我可以定义对象在某个点之前是否有效？

例如。如果我有一个对象 Person 并且想要调用`Person.valid?(:basic_info)`并且仅当存在某个字段子集（例如名称和性别）时它才会返回 true？

我看到了一些我认为可能有用但无法使其工作的东西，它是条件验证[http://guides.rubyonrails.org/active_record_validations_callbacks.html#conditional-validation](http://guides.rubyonrails.org/active_record_validations_callbacks.html#conditional-validation)，特别是分组条件验证，但我无法得到它在职的...

任何人都可以在这里帮我...

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-25T02:37:29.200

我认为现在还没有这样的存在，但是您可以自己编写一个方法，如下所示

```
def is_valid_field?(field)
  self.valid?
  self.errors[field].blank?
end 
```

然后就`person.is_valid_field?(:basic_info)`

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-25T02:49:20.650

要验证`basic_info`您必须定义一个自定义验证器：

```
class Person < ActiveRecord::Base
  validate :basic_info_present

  def basic_info_present
    if name.blank? || gender.blank?
      errors.add(:basic_info, "can't be in blank")
    end
  end
end 
```

如果您想查看特定字段是否有错误，可以使用@Salil 的方法。

但是请注意，由于`basic_info`您的模型中没有调用实际属性，因此此处的验证错误不会出现在表单等中（尽管它们将在`errors`哈希中）。这可能是也可能不是你想要的。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-09-27T01:20:58.763

我使用条件验证让它工作，所以现在我可以`.valid?(:basic)`在我只想检查这个人是否有电话的名字时使用 say ......

```
validates_presence_of :name, :when => [:basic] 
```

此处的文档：http: [//apidock.com/rails/ActiveRecord/Validations/valid%3F](http://apidock.com/rails/ActiveRecord/Validations/valid%3F)

这样我可以让对象在调用时返回 true，`.valid?`即使它没有名字，好时光......

# macos - 从诺基亚手机恢复短信到 MAC

> ID：12575439
> 
> 赞同：1
> 
> 时间：2012-09-25T02:26:17.357
> 
> 标签：macos, sms, at-command, nokia-s40

我想通过 java 应用程序从我的诺基亚手机读取短信，手机通过 USB 连接到 Mac 我尝试了 AT 命令，我可以发送短信，但无法读取它们我有 noika 6303 S40 系列手机。有一个叫做 PC suite sdk 但不适用于 mac 还有一个应用程序叫做 SyncMate 它在我的收件箱中显示短信所以我知道在 mac 上是可能的......请帮帮我我只想阅读从我的手机收件箱发送短信到我的 java 应用程序

# php - 如何将 HTML 表单插入 MySQL 数据库？

> ID：12575444
> 
> 赞同：1
> 
> 时间：2012-09-25T02:26:36.283
> 
> 标签：php, mysql, html

我正在开发一个计费系统，它现在非常基础，但我想知道你是否可以帮助我编写代码。如何将 HTML 表单中的数据插入 MySQL 数据库？我的代码：

```
<?php

if (isset($_POST['submitted'])) {

    include('connect-mysql.php');

    $date = $_POST['date'];
    $charge = $_POST['charge'];
    $payment = $_POST['payment'];
    $client_no = $_POST['client_no'];
    $client_name = $_POST['client_name'];
    $check_no = $_POST['check_no'];
    $check = $_POST['check'];
    $cash = $_POST['cash'];
    $notes = $_POST['notes'];
    $staff_initials = $_POST['staff_initials'];
    $sqlinsert = "INSERT INTO payments (date, charge, payment, client_no, client_name, check_no, check, cash, notes, staff_initials) VALUES ('$date', '$charge', 'payment', '$client_no', '$client_name', '$check_no', '$check', '$cash', '$notes', '$staff_initials')";

    if (!mysqli_query($dbcon, $sqlinsert)) {
        die('There was an error when trying to process your payment. Please contact technical support.');
    } //end of nested if statement

} // end of the main if statement
?>

<html>
<head>
    <title>New Payment</title>
</head>
<body>
<h1>Please Input Payment Details</h1>
<form action="new_payment.php" method="POST">
<input type="hidden" name="submitted" value="true" />
<fieldset>
    <legend>New Payment</legend>
    <label>Date:<input type="text" name="date" /></label><br>
    <label>Today's Charge: <input type="text" name="charge" /></label><br>
    <label>Today's Payment: <input type="text" name="payment" /></label><br>
    <label>Client Number: <input type="text" name="client_no" /></label><br>
    <label>Client Name: <input type="text" name="client_name" /></label><br>
    <label>Check Number: <input type="text" name="check_no" /></label><br>
    <label>Check: <input type="text" name="check" /></label><br>
    <label>Cash: <input type="text" name="cash" /></label><br>
    <label>Notes: <input type="text" name="notes" /></label><br>
    <label>Staff Initials: <input type="text" name="staff_initials" /></label><br>
</fieldset>
<br />
<input type="submit" value="Process Payment">
</form>
</body>
</html> 
```

请帮帮我，这很重要，我及时完成这件事......

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-25T03:14:30.670

第一个错误：-

```
if (isset($_POST['submitted']))

<input type="submit" value="Process Payment"> 
```

更改为：-

```
if($_POST['process'] == 'Process Payment') 
<input name="process" type="submit" id="process" value="Process Payment"> 
```

您可以改用这个（以防止 SQL 注入）：

```
// CONNECTION TO DATABASE

$mysqli = new mysqli('HOST','USERNAME','PASSWORD','DATABASE'); 

// CHECK CONNECTION

/* check connection */
if (mysqli_connect_errno()) {
    printf("Connect failed: %s\n", mysqli_connect_error());
    exit();
}        

$sqlinsert = "INSERT INTO payments (date, charge, payment, client_no, client_name, check_no, check, cash, notes, staff_initials) VALUES (?,?,?,?,?,?,?,?,?,?)";

$stmt = $mysqli->prepare($sqlinsert);

    $date = $_POST['date'];
    $charge = $_POST['charge'];
    $payment = $_POST['payment'];
    $client_no = $_POST['client_no'];
    $client_name = $_POST['client_name'];
    $check_no = $_POST['check_no'];
    $check = $_POST['check'];
    $cash = $_POST['cash'];
    $notes = $_POST['notes'];
    $staff_initials = $_POST['staff_initials'];

$stmt->bind_param("ssssssssss",$date, $charge, $payment, $client_no, $client_name, $check_no, $check, $cash, $notes, $staff_initials );

//EXECUTE QUERY
$stmt->execute();

$rowcount = $stmt->affected_rows;

if ($rowcount > 0)
{
echo "Success!";
}

else
{
echo "Error!";
}

//CLOSE EXECUTE
$stmt->close(); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-25T02:56:01.260

我不确定，但我认为你应该改变

```
if (isset($_POST['submitted'])) 
```

至

```
if (isset($_POST['submit'])) 
```

和

```
<input type="submit" value="Process Payment"> 
```

至

```
<input type="submit" name="submit" id="submit" value="Process Payment"> 
```

并在 INSERT 命令中输入 $ 付款

```
$sqlinsert = "INSERT INTO payments (date, charge, payment, client_no, client_name, check_no, check, cash, notes, staff_initials) VALUES ('$date', '$charge', '$payment', '$client_no', '$client_name', '$check_no', '$check', '$cash', '$notes', '$staff_initials')"; 
```

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2012-09-25T02:54:52.200

如果您在插入数据库时​​遇到问题，您应该更改

```
 $sqlinsert = "INSERT INTO payments (date, charge, payment, client_no, client_name, check_no, check, cash, notes, staff_initials) VALUES ('$date', '$charge', 'payment', '$client_no', '$client_name', '$check_no', '$check', '$cash', '$notes', '$staff_initials')"; 
```

至

```
 $sqlinsert = "INSERT INTO payments (date, charge, payment, client_no, client_name, check_no, check, cash, notes, staff_initials) VALUES ('$date', '$charge', '$payment', '$client_no', '$client_name', '$check_no', '$check', '$cash', '$notes', '$staff_initials')"; 
```

您忘记在插入值付款前输入 $

# scala - 用于管理对象池的 scala-way

> ID：12575449
> 
> 赞同：8
> 
> 时间：2012-09-25T02:27:08.647
> 
> 标签：scala, objectpool

scala中管理对象池的首选方式是什么？

我需要创建和删除大规模的单线程对象（不需要同步）。在 c++ 中，我使用了静态对象数组。

在scala中处理它的惯用且有效的方法是什么？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-09-25T06:30:12.167

我会把它包装在一个演员中。如果您不熟悉，请查看 Akka：[http ://doc.akka.io/docs/akka/2.0.3/scala/actors.html](http://doc.akka.io/docs/akka/2.0.3/scala/actors.html)

这是一个很好的例子：[https ://github.com/derekjw/fyrie-redis/blob/master/src/main/scala/net/fyrie/redis/ConnectionPool.scala](https://github.com/derekjw/fyrie-redis/blob/master/src/main/scala/net/fyrie/redis/ConnectionPool.scala)

Actor 模型允许您保证单线程访问，因为 Actor 一次处理一个传入消息。这导致actor内部的代码非常简单，API也非常简单。

# regex - 正则表达式匹配 Prolog

> ID：12575450
> 
> 赞同：6
> 
> 时间：2012-09-25T02:27:15.403
> 
> 标签：regex, prolog, dcg, failure-slice

我正在尝试进行正则表达式匹配。我已经写出了所有功能，但它们没有按应有的方式工作。据我所知，当我尝试比较列表时出现问题。
例如，“re_contains(a,a)”。给出 true （显然），就像 "re_contains(union(a,b),a)" 一样。

但只要我把它列在清单上，它就失败了。“重新包含（序列（a，b），[a，b]）。” 返回假。Append 应该通过所有可能的组合来找到匹配项，但是这些函数都不能正常工作。这让我觉得也许我错过了一个基本案例。但我认为“re_contains(X, L) :- X == L。” 应该照顾它。我必须在这里寻找一些重要的东西。

这是我的代码：

```
re_contains(empty, []).

re_contains(X, L) :-
    X == L.

re_contains(seq(X, Y), L) :-
    append(L1, L2, L),
    re_contains(X, L1),
    re_contains(Y, L2). 

re_contains(union(X, _), L) :-
    re_contains(X, L).

re_contains(union(_, Y), L) :- 
    re_contains(Y, L).  

re_contains(kleene(X), L) :- 
    append([Car|L1], L2, L),
    re_contains(X, [Car|L1]),
    re_contains(kleene(X), L2).

re_contains(kleene(_),[]). 
```

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-09-25T07:54:24.820

有几个问题。以下是最明显的：

**打字。** 您的谓词`re_contains/2`需要一个列表作为第二个参数。成功是`re_contains(a,a).`巧合而非意图。

**单调性。**另一个问题是`re_contains([a],[a])`成功了，但`re_contains([X],[a])`失败了。或者，换个角度看：`re_contains([X],[a])`失败，但`X = a, re_contains([X],[a])`成功。通过添加目标`X = a`，我们专门化了查询，因此最初失败的查询应该再次失败。

身份测试 ( `==/2`) 应替换为相等 ( `=/2`)**并**确保我们有一些列表。所以：

```
re_contains(X, L) :-
    % X == L。
    X = L,
    附加（X，_，_）。

```

请注意，`append/3`此处仅用于确保 X 是一个列表 - 不使用实际的附加功能。

**效率。**第三个问题涉及您如何表示串联的实际方式。让我们看看以下规则：

```
re_contains(seq(X, Y), L) :-
    附加（L1，L2，L），
    re_contains(X, L1),
    重新包含（Y，L2）。

```

现在，假设我们这里有一个长度列表`N`。目标可能有多少个答案`append(L1, L2, L)`？其实`N + 1`。而这一点，不管所涉及的实际值如何。现在考虑：

```
?- 长度(L,1000000), 时间(re_contains(seq([a],[]),[b|L]))。
% 2,000,005 次推理，0.886 CPU 在 0.890 秒内（100% CPU，2258604 唇）
错误的。

```

`re_contains/2`这里需要的时间与列表的长度成正比。但是只要看看第一个元素就足以意识到这是不可能的。

所以背后的问题是使用`append/3`. Prolog 有一个简单的经验法则：如果您使用过多，请`append/3`考虑使用[dcg](/questions/tagged/dcg "显示标记为“dcg”的问题") s — 定从句语法。请查看标签以获取更多详细信息 - 并查阅介绍性 Prolog 文本。为了让您开始，这里是您定义的一个子集：

```
re_contains(RE, L) :-
    短语（重新（RE），L）。

重新（[]）-> []。
重新（[E]）-> [E]。
重新（序列（X，Y））-->
    重新（X），
    重新（Y）。

```

不再调查整个列表：

```
?-长度（L，1000000），时间（短语（re（seq（[a]，[]）），[b|L]））。
% 6 次推理，0.000 秒内 0.000 CPU（88% CPU，127313 唇）
错误的。

```

顺便说一句，[这](https://stackoverflow.com/a/4767227/772868)是一个完整的定义。

**终止/不终止。**与效率相关的是终止属性。理想情况下，如果可以有限地表示一组解决方案，则查询将终止。也就是说，通过有限数量的答案。好的，这就是我们正在努力的理想。Prolog 的简单但非常有效的执行算法有时会循环，当可能有有限数量的答案时。理解不终止的原因有时非常棘手。通常的调试策略——比如使用调试器进行跟踪或单步调试——不起作用，因为它们向您展示了太多细节。幸运的是，有一种更好的技术：

我不会再看你的整个程序，而只会看它的一小部分。该片段是一个[**故障切片**](https://stackoverflow.com/questions/10139640/prolog-successor-notation-yields-incomplete-result-and-infinite-loop/10141181#10141181)（有关更多详细信息，请参见链接）。它小得多，但讲述了很多关于原始程序的信息——前提是它是一个纯粹的、单调的程序：

> 如果失败切片没有终止，则原始程序不会终止。

因此，如果我们找到这样的失败片段，我们可以立即对整个程序做出结论。甚至没有阅读其余部分！

这是一个有趣的失败片段：

```
...
 re_contains(X, L) :- **false,**
     X = L
re_contains(seq(X, Y), L) :-
    附加（L1，L2，L），假，
    re_contains（X，L1），
     re_contains（Y，L2）。
re_contains(union(X, _), L) :- **false,**
     re_contains(X, L)。
...

```

现在考虑目标`re_contains(seq([],[]),L).`理想情况下，应该只有一个答案`L = []`并且目标应该终止。但是，它会循环，因为`append(L1, L2, L)`不会终止。将此与上面终止的 DCG 解决方案进行对比`phrase(re(seq([],[])),L)`。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-09-25T07:28:44.297

`append/3`将拆分`L`，两者都`L1`将`L2`是列表。

我会尝试`re_contains(X, L) :- X == L.`用`re_contains(X, [X]).`

更改后，`re_contains(a,a).`将失败。

您以不同的方式表示序列，而您的匹配器并没有同时提供这两种方式。实际上，“工作”的唯一情况**不是**序列。

# macos - 尝试在 OSX（Mountain Lion）上使用 Codelite 进行编译会导致缺少标头

> ID：12575452
> 
> 赞同：0
> 
> 时间：2012-09-25T02:27:24.230
> 
> 标签：macos, wxwidgets, codelite

我正在尝试一些跨平台的 GUI 环境，并且正在使用 codelite 评估 wxWidgets，但一开始就卡住了。

我对此很陌生，如果这是一个愚蠢的问题，请说出来。

先决条件是，

1.  使用 OSX 山狮
2.  通过 home brew 安装 wxmac
3.  下载 Codelite，创建了一个 wxWidgets Executable

我制作了一个 GUI 项目并尝试安装，但得到一堆缺少的标头错误。

```
make[1]: wx-config: Command not found
g++  -c  "xxxx/helloworld/main.cpp" -g -O0 -Wall   -o ./Debug/main.o -I. -I. 
g++  -c  "xxxx/helloworld/MainFrame.cpp" -g -O0 -Wall   -o ./Debug/MainFrame.o -I. -I. 
In file included from xxxx/helloworld/MainFrame.h:3,
                 from xxxx/helloworld/MainFrame.cpp:1:
xxxx/helloworld/wxcrafter.h:4:25: error: wx/settings.h: No such file or directory
xxxx/helloworld/wxcrafter.h:5:27: xxxx/helloworld/main.cpp:1:20: error: wx/app.h: No such file or directory
xxxx/helloworld/main.cpp:2:22: error: wx/event.h: No such file or directory
In file included from xxxx/helloworld/MainFrame.h:3,
                 from xxxx/helloworld/main.cpp:3:
xxxx/helloworld/wxcrafter.h:4:25: error: wx/settings.h: No such file or directory
xxxx/helloworld/wxcrafter.h:5:27: error: wx/xrc/xmlres.h: No such file or directory
xxxx/helloworld/wxcrafter.h:6:27: error: wx/xrc/xh_bmp.h: No such file or directory
xxxx/helloworld/wxcrafter.h:7:22: error: wx/frame.h: No such file or directory
xxxx/helloworld/wxcrafter.h:8:22: error: wx/sizer.h: No such file or directory
xxxx/helloworld/wxcrafter.h:9:22: error: wx/panel.h: No such file or directory
xxxx/helloworld/wxcrafter.h:10:21: error: wx/menu.h: No such file or directory
xxxx/helloworld/wxcrafter.h:11:24: error: wx/toolbar.h: No such file or directory
xxxx/helloworld/main.cpp:4:22: error: wx/image.h: No such file or directory
In file included from xxxx/helloworld/MainFrame.h:3,
                 from xxxx/helloworld/main.cpp:3:
xxxx/helloworld/wxcrafter.h:14: error: expected class-name before '{' token
xxxx/helloworld/wxcrafter.h:16: error: ISO C++ forbids declaration of 'wxPanel' with no type
xxxx/helloworld/wxcrafter.h:16: error: expected ';' before '*' token
xxxx/helloworld/wxcrafter.h:17: error: ISO C++ forbids declaration of 'wxMenuBar' with no type
xxxx/helloworld/wxcrafter.h:17: error: expected ';' before '*' token
xxxx/helloworld/wxcrafter.h:18: error: ISO C++ forbids declaration of 'wxMenu' with no type
xxxx/helloworld/wxcrafter.h:18: error: expected ';' before '*' token
xxxx/helloworld/wxcrafter.h:19: error: ISO C++ forbids declaration of 'wxMenuItem' with no type
xxxx/helloworld/wxcrafter.h:19: error: expected ';' before '*' token
xxxx/helloworld/wxcrafter.h:20: error: ISO C++ forbids declaration of 'wxMenu' with no type
xxxx/helloworld/wxcrafter.h:20: error: expected ';' before '*' token
xxxx/helloworld/wxcrafter.h:21: error: ISO C++ forbids declaration of 'wxMenuItem' with no type
xxxx/helloworld/wxcrafter.h:21: error: expected ';' before '*' token
xxxx/helloworld/wxcrafter.h:22: error: ISO C++ forbids declaration of 'wxToolBar' with no type
xxxx/helloworld/wxcrafter.h:22: error: expected ';' before '*' token
xxxx/helloworld/wxcrafter.h:25: error: 'wxCommandEvent' has not been declared
xxxx/helloworld/wxcrafter.h:26: error: 'wxCommandEvent' has not been declared
xxxx/helloworld/wxcrafter.h:29: error: expected `)' before '*' token
xxxx/helloworld/wxcrafter.h: In member function 'virtual void MainFrameBaseClass::OnExit(int&)':
xxxx/helloworld/wxcrafter.h:25: error: request for member 'Skip' in 'event', which is of non-class type 'int'
xxxx/helloworld/wxcrafter.h: In member function 'virtual void MainFrameBaseClass::OnAbout(int&)':
xxxx/helloworld/wxcrafter.h:26: error: request for member 'Skip' in 'event', which is of non-class type 'int' 
```

我的猜测是指定包含所有这些的文件夹，但不确定在哪里可以找到它们。

老实说，我不确定这是否是正确的操作，也许我需要安装或设置一些东西，也许我不应该使用自制软件并通过源代码安装

## 添加

感谢VZ。我得到了它的工作，不得不改变一些构建设置，如下

1.  Settings>BuildSettings>gnu g++>Tools>PATH Environment Variables 设置为

> /usr/local/bin:/usr/bin:/bin

1.  将所有编译器、链接器、共享对象链接器设置设置为绝对路径，因此更改

> 克++

到

> /usr/bin/g++

等等。

这肯定会随着机器的设置而改变，因此可能不应该完全按照它来做，但应该让你开始。

希望这可以帮助。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-25T09:22:43.973

您需要修复的错误是第一个错误：

```
make[1]: wx-config: Command not found 
```

确保`wx-config`在您的路径中。不要手动指定包含路径，这**不是**正确的做法，您必须使用`wx-config`.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-25T09:57:32.500

您可能需要下载 wxWidgets 源代码分发版（来自[此页面的 2.9.4 或来自](http://wxwidgets.org/downloads/)[SVN](http://svn.wxwidgets.org/svn/wx/wxWidgets/trunk)的最新源代码），解压它，从源代码构建库

```
./configure && make && sudo make install 
```

然后重新启动，然后尝试构建 Codellite。

# java - Java中目录的删除

> ID：12575464
> 
> 赞同：0
> 
> 时间：2012-09-25T02:29:33.190
> 
> 标签：java, eclipse, junit

我正在 Eclipse 中创建一个动态 IProject。这个 IProject 的行为类似于 eclipse 中的“带有 JAR 档案的新插件”项目。然后我指向这个外部jar文件的引用。顺便说一句，我提取然后链接到临时 IProject。

```
<linkedResources>
    <link>
        <name>SampleTestSuite</name>
        <type>2</type>
        <location>D:/eclipse-rcp-indigo/tests/SampleTestSuite</location>
    </link>
</linkedResources> 
```

现在，我打算制作这个 IProject Run-As JUnit。我想在 JUnit 之后删除提取和链接的 jar 文件。这是我在下面运行 JUnit 的代码，但在文件删除后它会抛出错误，因为linkedresource 将不存在。任何想法如何监视 JUnit 是否已经完成以便删除链接资源？

```
Activator.getDisplay().syncExec(new Runnable() {
     public void run() {
    Job job = new Job("Test Runner JUnit") {
    @Override
                protected IStatus run(IProgressMonitor monitor) {
                    monitor.beginTask("Launching JUnit", 100);
                    try {
                        ILaunch launch = new Launch(launchConfiguration,
                                "run", null);
                        launch.setAttribute(
                                "org.eclipse.debug.ui.ATTR_CONSOLE_ENCODING",
                                DebugPlugin.getDefault().getLaunchManager()
                                        .getEncoding(launchConfiguration));
                        DebugPlugin.getDefault().getLaunchManager()
                                .addLaunch(launch);
                        launchDelegate.launch(launchConfiguration, "run",
                                launch, monitor);
                    } catch (CoreException e) {
                        return e.getStatus();
                    } finally {
                        monitor.done();
                    }

                    return Status.OK_STATUS;
                }
            };

            job.addJobChangeListener(new JobChangeAdapter() {
                public void done(IJobChangeEvent event) {
                    if (event.getResult().isOK()) {
                        System.out.println("Job completed successfully");
                        // delete the file here
                    } else
                        System.out
                                .println("Job did not complete successfully");
                }
            });

            job.setPriority(Job.INTERACTIVE);
            job.schedule();
        }
    }); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-25T03:55:39.060

我刚加了这个

```
IProcess[] processes = launch.getProcesses();
    for (IProcess process : processes) {
    while (!process.isTerminated()) {
    }
        //delete here
   } 
```

# c++ - 异常的奇怪行为（执行了一些未调用的方法）

> ID：12575465
> 
> 赞同：1
> 
> 时间：2012-09-25T02:29:40.800
> 
> 标签：c++, qt, exception

我一直在努力解决一个我自己无法解决的非常奇怪的行为，所以我在这里。

我正在为一个运行良好的控制台应用程序创建一个 GUI。用户可以选择要加载的文件或重新加载先前选择的文件。这两个动作由两个不同的`slots`. 我正在处理文件格式中的错误，`exceptions`它在控制台版本中运行良好，但对于 GUI，目前不太好......

当 openFile 中抛出错误时`slot`，该`catch`块使他的工作并且该方法按预期停止但是然后另一个插槽被意外调用。我不知道为什么，所以不知道如何纠正这种行为。

这是相关代码：

```
void Loader::openSourceFile()
{
    fileName = QFileDialog::getOpenFileName(myWindow, tr("Select source file"), QString(), tr("Text files (*.txt)"));
    try{
        parseSourceFile();
    } catch(MyException &e)
    {
        QString msg = QString(e.what());
        myWindow->alertUser(msg);
        return;
    }
}

void Loader::reloadSourceFile()
{
    try{
        parseSourceFile();
    } catch(MyException &e)
    {
        QString msg = QString(e.what());
        myWindow->alertUser(msg);
        return;
    }
} 
```

使用环境：

```
myLoader = new Loader(this);
menuTop = menuBar()->addMenu(tr("&File"));

//open source file
openAction = new QAction(QIcon(":images/document.png"), tr("&Open"), this);
connect(openAction, SIGNAL(triggered()), myLoader, SLOT(openSourceFile()));
menuTop->addAction(openAction);

//reload source file
reloadAction = new QAction(QIcon(":images/reload.png"), tr("&Reload"), this);
connect(openAction, SIGNAL(triggered()), myLoader, SLOT(reloadSourceFile()));
menuTop->addAction(reloadAction); 
```

注意：经过大量调试后，我发现该类的 moc 文件中的一个函数在执行 catch 块后被调用：

```
void Loader::qt_static_metacall(QObject *_o, QMetaObject::Call _c, int _id, void **_a)
{
    if (_c == QMetaObject::InvokeMetaMethod) {
        Q_ASSERT(staticMetaObject.cast(_o));
        Loader *_t = static_cast<Loader *>(_o);
        switch (_id) {
        case 0: _t->openSourceFile(); break;
        case 1: _t->reloadSourceFile(); break;
        default: ;
        }
    }
    Q_UNUSED(_a);
} 
```

它用 _id = 1 调用，这解释了另一个插槽的意外执行。但是为什么会这样？？？有人可以解释如何避免这种情况吗？我已经让我自己的应用程序类派生`qApplication`并覆盖`notify()`，但这并没有改变任何东西。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-25T02:35:04.450

应该：

```
reloadAction = new QAction(QIcon(":images/reload.png"), tr("&Reload"), this);
connect(openAction, SIGNAL(triggered()), myLoader, SLOT(reloadSourceFile()));
menuTop->addAction(reloadAction); 
```

是：

```
reloadAction = new QAction(QIcon(":images/reload.png"), tr("&Reload"), this);
connect(reloadAction, SIGNAL(triggered()), myLoader, SLOT(reloadSourceFile()));
//      ^^^^^^^^^^^^
menuTop->addAction(reloadAction); 
```

# php - 改进 MySQL 查询

> ID：12575466
> 
> 赞同：3
> 
> 时间：2012-09-25T02:29:50.220
> 
> 标签：php, sql, group-by

目前在我的电子商务网站中有 2 个表格：我使用 2 个查询来生成

```
$query = $this->db->query("SELECT count(*) AS hits, product_id
                           FROM visitors
                           GROUP BY product_id");

if ($query->num_rows() > 0) {
    foreach ($query->result() as $row){
        $hits = $row->hits;
        $product_id = $row->product_id;
        $data = array(
           'product_id' => $product_id ,
           'hits' => $hits
        );
        $this->db->insert('visitor_days', $data);
    }
} 
```

* * *

问题：

如果10k记录，更新很慢。如何改进这个查询？我可以在单个查询中完成吗？

访客

```
 - ID     product_id   date
 - 534024   69082       2012-09-25
 - 534025   69082       2012-09-25
 - 534026   69082       2012-09-25
 - 534027   69082       2012-09-25
 - 534028   53042       2012-09-25
 - 534029   53042       2012-09-25 
```

访客天数

```
 - ID          product_id   hits
 - 534024   69082         4
 - 534025   53042         2 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-25T02:46:45.587

您应该能够使用 SELECT 子句在一个 INSERT INTO 语句中执行此操作

```
INSERT INTO visitor_days
  (product_id, hits)
  SELECT product_id, COUNT(*)
    FROM visitors
    GROUP BY product_id 
```

在您的 10k 情况下，这应该会快得多，因为您将执行一次查询而不是 10,001 次。

# css - CSS 2 div 布局浮动

> ID：12575467
> 
> 赞同：0
> 
> 时间：2012-09-25T02:30:00.220
> 
> 标签：css, layout, html, css-float

问起来有点尴尬，但至少在过去的 1 个小时里我一直在玩弄它，但无法正确理解它。

需要 2 div 布局。Div 1 向左浮动，固定宽度为 75px Div 2 向右浮动，固定宽度为 900px

现在的问题： div1-div2 和 div2-right 外边缘之间的边距需要相等。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-25T02:31:57.230

尝试将“div 2”放入不浮动的容器中。然后删除“div 2”的浮动，而是使用`display:inline-block`. 添加`text-align:center`到“div 2”的新容器中。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-25T02:44:13.750

HTML：

```
<div class="div1"></div>
<div class="container">
 <div class="div2"></div>
</div> 
```

CSS：

```
.div1{
 float:left;
 width:75px;
 height:100px;
 background-color:red;
}
.container{
 padding-left:75px;
}
.div2{
 margin:auto;
 width:500px;
 background-color:blue;
 height:100px;
}​ 
```

[演示](http://jsfiddle.net/afshinprofe/HK2Nb/)

# javascript - 更新引导弹出内容

> ID：12575470
> 
> 赞同：4
> 
> 时间：2012-09-25T02:30:32.300
> 
> 标签：javascript, jquery, html, twitter-bootstrap

我正在尝试创建一个在输入文本聚焦时弹出的指示器。弹出框的内容是html。

**JS**

```
$('.validate').popover({
    html : true,
    trigger : 'focus',
    content : function() {
        return $('#popover-content').html();
    }
}); 
```

**变化时**

```
$('.validate').change(function() {
    var eval_me = $('.validate').val();
    $('#sample').html(eval_me);
}); 
```

**的HTML**

```
 <div class="input-prepend">
        <span class="add-on"><i class="icon-lock"></i></span><input type="text" class="validate" data-placement='right' title="Hello World">
    </div>

    <div id="popover-content" style="display: none">
        <div class="row"><label id="sample">This is your div content</label></div>
    </div> 
```

标签内的内容会更新，但弹出框不会。关闭弹出框并再次聚焦输入文本（打开它）显示更新的标签。

任何帮助表示赞赏:)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-25T03:16:00.823

两件事：在`change`输入失去焦点之前事件不会触发，您可能希望将更新代码绑定到`keyup`事件。其次，尽管该代码*正在*更新您的`sample`div，但弹出框只是在触发弹出框时获取该数据；如果要更新弹出框的`sample`div，则需要将其作为`keyup`事件处理程序的一部分进行处理。尝试像这样更改该事件处理程序：

```
$('.validate').keyup(function() {
  var eval_me = $('.validate').val();
  $('#sample').html(eval_me);
  $('.popover #sample').html(eval_me);
}); 
```

你应该很好。检查[小提琴](http://jsfiddle.net/ultranaut/rK34t/)。

**编辑**：实际上玩了一下，它似乎`keyup`是一个比 更好的触发器`keypress`，否则更新会跟踪输入一个字符，但我可能只是在那里遗漏了一些东西。相应地更改了上面的代码。

# javascript - 使用 NodeJS 编写实时应用程序

> ID：12575474
> 
> 赞同：6
> 
> 时间：2012-09-25T02:31:17.063
> 
> 标签：javascript, node.js

我期待使用 NodeJS 构建 RT Web 应用程序。来自 Rails，我爱上了 NodeJS 和 Async JS 编程。

用 Node 做一些实验，然后当我搜索工具和资源来使用时，我被那里的很多东西弄得不知所措。

我在那里发现了很多库和组件，并且对如何构建一个编写良好且实施良好的大型 RT Web 应用程序感到非常困惑。

所以应用程序将`NodeJS`使用`Express`框架运行。

我读到了`knockout.js`，一个提供实时东西的客户端库，比如自动 UI 刷新，我想我可以将它与 jQuery 结合使用。另外，我发现`socket.io`. 作者说： `Socket.IO aims to make realtime apps possible in every browser and mobile device, blurring the differences between the different transport mechanisms. It's care-free realtime 100% in JavaScript.` 所以socket.io是关于兼容性的。怎么样`backbone.js`？它要去哪里？

有这么多东西，我震惊了。我应该学习什么？哪些模块值得学习？我专注于 NodeJS 和 Express，但大多数书籍/截屏视频都涵盖了旧版本的 nodejs。所以我受到其官方 API 的指导。现在我在这里征求你的意见，并以某种方式组织所有的信息。如果我的假设不准确，请纠正我，请指出正确的方向，并随时提出任何其他有助于我学习的模块。

提前致谢

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-09-25T02:41:22.923

将 node.js 服务器端库（通过 npm 等）与所有客户端（浏览器）库和技术（如 jquery、主干、淘汰赛等）分开可能对您很有用......当您考虑时. 即使是在浏览器和服务器之间公开持久套接字连接（以避免轮询）的 socket.io 也没有规定您使用什么客户端技术。

专注于从您的服务器公开一个可靠的 web-api（[随机示例](http://pixelhandler.com/blog/2012/02/09/develop-a-restful-api-using-node-js-with-express-and-mongoose/)），并且您的客户端技术可以交换、增强等......对服务器没有影响。它们相交的唯一地方是如果您使用像 Jade 这样的视图技术。在服务器只是提供客户端文件的情况下，您的客户端是一个更厚的 javascript 应用程序（使用敲除、jquery 等）调用一个好的服务器 web api，这也是一个纯分离的选项。

有些人试图统一客户端和服务器模型——例如，[本文](http://andyet.net/blog/2011/feb/15/re-using-backbonejs-models-on-the-server-with-node/)使用骨干网和节点。这取决于您使用多少数据来说明这是否可行，但它确实耦合了客户端和服务器并使服务器有状态，这可能有缺点（横向扩展，需要亲和力等......）。就个人而言，我对这么多魔法（绑定、状态、同步等）保持警惕。Node 致力于让事情变得简单、轻便和快速。它是一个快速的前端网络服务器。

我的 2 美分（有些人可能不同意）。从服务器上的节点开始并选择您的存储（mongoDb 等...）。设计一个[可靠的 RESTful（超媒体）API](http://blog.steveklabnik.com/posts/2011-07-03-nobody-understands-rest-or-http) - 无论客户端如何，都是一个好的 webapi。然后从一个基本的 html/css/js 开始，也许是 jquery 客户端，并在扩展客户端技能时添加诸如淘汰赛等内容。这将允许您随着新技术风向的变化（而且它们会）更换独立于服务器的客户端技术。

这是一个设计良好的系统的标志 - 无需重写所有内容即可替换组件/子系统的能力:)

希望这有助于消除一些迷雾:)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-06-28T04:01:39.413

如果您专注于实时 Javascript 应用程序，您可能想看看 Meteor：http: [//meteor.com/](http://meteor.com/)

# ios - 同样的情况，第二次因为用了MBProgressHUD而被拒绝:(

> ID：12575477
> 
> 赞同：-4
> 
> 时间：2012-09-25T02:31:29.253
> 
> 标签：ios, ipad, progress-bar, appstore-approval, mbprogresshud

拒绝原因：活动指示器无限旋转，用户无法访问内容

同样的情况，第二次因为用了MBProgressHUD而被拒绝。

谁能告诉我上传到appstore的应用会有什么不同？我做了各种测试，在本地没有出现这样的问题。

-----------------------------在我的控制器中------ -----------------

```
- (void)downloadList
{

    if (isLoading) {
        return;
    }

    isLoading = YES;

    //do something......

    //show the progressbar based on MBProgressHUD
    [[MyDelegate getAppDelegate] showProgressBarForTarget:self whileExecuting:@selector(showProgressBarForLoading)];
     }
}

- (void)showProgressBarForLoading
{   
    while (isLoading) {
        //i++;
        continue;
    }
}

- (void)downloadListDidReceive:(XGooConnection*)sender obj:(NSObject*)obj
{
    //do something......

    isLoading = NO;

} 
```

-----------------------------------------在我的 AppDelegate 中------ -------------

```
- (void)showProgressBarForTarget:(id)target whileExecuting:(SEL)theSelector
{
    UIViewController *controller = [splitViewController.viewControllers objectAtIndex:0];

    HUD = [[MBProgressHUD alloc] initWithView:controller.view];
    [controller.view addSubview:HUD];

    HUD.delegate = self;

    // Show the HUD while the provided method executes in a new thread
    [HUD showWhileExecuting:theSelector onTarget:target withObject:nil animated:YES];
} 
```

-----------------------------------------拒绝详细的原因------ --------------------

您的应用程序的最新版本已被拒绝........

拒绝理由：

重现的步骤是：

1.  启动应用程序
2.  选择左上角的菜单按钮
3.  选择一个菜单项
4.  活动指示器无限旋转，用户无法访问内容

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-25T06:50:43.363

首先，拒绝的原因可能是 MBProgressHUD 使用不当，而不是 MBprogressHUD 本身。

如果这只发生在应用商店测试期间，请尝试在发布配置中运行应用。那里也可能存在您没有预料到的网络条件。也许这只发生在出现网络错误（飞行模式？）时。发生网络错误时是否设置 isLoading = NO ？

FWIW，有一种更好的方法来显示/隐藏异步请求的 HUD。像这样在 while 循环中汇集一个标志是非常低效的。查看 MBProgressHUD 演示应用程序中的 NSURLConnection 示例。

# java - “输入另一个数字（Y/N？）”过程重新开始，而不是在“Y”时继续

> ID：12575478
> 
> 赞同：0
> 
> 时间：2012-09-25T02:31:43.733
> 
> 标签：java

我有两个程序：

Score.java 设置为执行以下操作：

*   从键盘上读取分数并打印他们的平均值。
*   分数将是数字，可能包括小数部分。

例如，分数可能是 8.73 或类似的分数。不同的比赛将有不同数量的评委。它会一直询问和阅读分数，直到用户输入“完成”。然后程序将打印总分、分数数和平均分。然后程序将提示用户查看是否还有更多参赛者。如果有重新开始提示分数。如果没有更多，则退出程序。”我将其设置为在您输入“N”时停止程序，并设置为在输入“Y”后将未来的条目添加到计算中。

```
import java.util.Scanner;

// This is the Score program
// Written by me

public class Score
{
    public static void main(String args[])
    {
        Scanner game = new Scanner(System.in);
        double num = 0.0;
        double sum = 0.0;
        int cnt = 0;

        while (true)
        {
            System.out.println("Enter as many non-negative integers as you like ");
            System.out.println("one at a time and I will find the average");
            System.out.println("Enter done to stop entering numbers");

            System.out.print("enter number: ");
            String ans = game.next();
            while (!ans.equals("done"))
            {
                num = Double.parseDouble(ans);
                sum = sum + num;
                cnt = cnt + 1;

                System.out.print("enter number: ");
                ans = game.next();
            }
            System.out.println(cnt);
            System.out.println(sum);

            System.out.println("Total Score " + sum + " count scores " + cnt + " avg score " + sum / cnt);

            System.out.println("Enter another contestant (Y/N)?");
            String str = game.next();
            if (!str.equals("Y"))
                break;
        }
    }
} 
```

虽然上述过程有效，但在输入“Y”以添加更多分数后，我无法让我的第二个程序Olympic.java 正常工作。相反，它开始一个全新的平均值计算，而不是添加到以前的计算中：

```
import java.util.Scanner;

// This is the Olympic program
// Written by me

public class Olympic
{
    public static void main(String args[])
    {
        Scanner game = new Scanner(System.in);
        double num = 0.0;
        double sum = 0.0;
        int cnt = 0;
        double highscore = Double.MAX_VALUE;
        double lowscore = Double.MIN_VALUE;

        while (true)
        {
            System.out.println("Enter as many non-negative integers as you like ");
            System.out.println("one at a time and I will find the average");
            System.out.println("Enter done to stop entering numbers");

            System.out.print("enter number: ");
            String ans = game.next();
            lowscore = game.nextDouble();
            highscore = game.nextDouble();
            while (!ans.equals("done"))
            {
                num = Double.parseDouble(ans);
                sum = (sum + num) - lowscore - highscore;
                cnt = cnt + 1;

                System.out.print("enter number: ");
                if (num > highscore)
                {
                    highscore = num;
                }
                if (num < lowscore)
                {
                    lowscore = num;
                }
                ans = game.next();
            }
            System.out.println("Throwing out low score " + lowscore + " and high score " + highscore);
            System.out.println("Total Score " + sum + " count scores " + cnt + " avg score " + sum / cnt);

            System.out.println("Enter another contestant (Y/N)?");
            String str = game.next();
            if (!str.equals("Y"))
                break;
        }
    }
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-25T03:29:11.887

所以我做了一个非常快速的测试

```
public static void main(String[] args) {

    Scanner game = new Scanner(System.in);

    while (true) {

        System.out.println("Enter another contestant (Y/N)?");
        String str = game.next();
        if (!str.equalsIgnoreCase("Y")) {
            break;
        }
    }

    System.out.println("I'm free");

} 
```

这将很好地退出。

至于你的第二个问题。我觉得你的逻辑有点歪。你可以尝试类似...

```
Scanner game = new Scanner(System.in);

double num = 0;
double sum = 0;
int cnt = 0;

while (true) {
    System.out.println("Enter as many non-negative integers as you like ");
    System.out.println("one at a time and I will find the average");
    System.out.println("Enter done to stop entering numbers");

    double lowscore = Double.MAX_VALUE;
    double highscore = 0;

    System.out.print("enter number: ");
    String ans = game.next();
    while (!ans.equals("done")) {

        num = Double.parseDouble(ans);

        lowscore = Math.min(lowscore, num);
        highscore = Math.max(highscore, num);

        sum += num;
        cnt++;

        System.out.print("enter number: ");
        if (num > highscore) {
            highscore = num;
        }
        if (num < lowscore) {
            lowscore = num;
        }
        ans = game.next();
    }

    sum -= lowscore;
    sum -= highscore;

    System.out.println("Throwing out low score " + lowscore + " and high score " + highscore);
    System.out.println("Total Score " + sum + " count scores " + cnt + " avg score " + sum / cnt);

    System.out.println("Enter another contestant (Y/N)?");
    String str = game.next();
    if (!str.equalsIgnoreCase("Y")) {
        break;
    }
} 
```

这将输出...

```
Enter as many non-negative integers as you like 
one at a time and I will find the average
Enter done to stop entering numbers
enter number: 1
enter number: 2
enter number: 3
enter number: 4
enter number: 5
enter number: 6
enter number: 7
enter number: 8
enter number: 9
enter number: 10
enter number: done
Throwing out low score 1.0 and high score 10.0
Total Score 44.0 count scores 10 avg score 4.4
Enter another contestant (Y/N)?
y
Enter as many non-negative integers as you like 
one at a time and I will find the average
Enter done to stop entering numbers
enter number: 1
enter number: 12
enter number: 13
enter number: 14
enter number: 15
enter number: 16
enter number: 17
enter number: 18
enter number: 19
enter number: 20
enter number: done
Throwing out low score 1.0 and high score 20.0
Total Score 168.0 count scores 20 avg score 8.4
Enter another contestant (Y/N)?
n 
```

至于你的例外。使用 时`Scanner.nextDouble`，如果输入不可解析为双精度，则会抛出异常。您将需要在您认为合适的情况下处理这种情况......

# android - 服务重启很久

> ID：12575479
> 
> 赞同：2
> 
> 时间：2012-09-25T02:31:50.123
> 
> 标签：android

我有一项服务可以使用 BroadcastReceiver 来监控几个动作（屏幕开/关和 Wifi 开/关）和一个计划任务。到目前为止，我的服务还可以。我知道当系统资源不足时服务会自动重启，这对我来说没问题，但我遇到了一个问题，有时我的服务总是在“重启服务”状态下持续超过 1 小时。当我手动重启服务时，服务可以顺利运行。不知道存在什么问题。

# c# - 如何知道一个模型是否可行

> ID：12575481
> 
> 赞同：1
> 
> 时间：2012-09-25T02:31:56.960
> 
> 标签：c#, gurobi

我正在使用 C# api。给定一个 gurobi 模型

```
GRBModel model = new GRBModel(env); 
```

在填充约束、给出目标函数并执行之后

```
model.Optimize(); 
```

有没有办法确定模型是否可行？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-25T17:34:31.680

求解模型后需要查看[优化状态码。](http://www.gurobi.com/documentation/5.0/reference-manual/node740)在大多数情况下，您只需要测试状态是否为`OPTIMAL`。例如，`mip2_cs.cs`在`examples\c#`子目录中查看。

# python - Python中的类继承

> ID：12575484
> 
> 赞同：5
> 
> 时间：2012-09-25T02:32:11.560
> 
> 标签：python, inheritance, attributes

我是 python 新手，并试图获取一个对象的类继承自的类列表。我正在尝试使用该`bases`属性来执行此操作，但没有任何成功。有人可以帮我吗？

```
def foo(C):
     print(list(C.__bases__))

class Thing(object):
    def f(self):
        print("Yo")

class Shape(Thing):
    def l(self):
        print("ain't no thang")

class Circle(Shape):
    def n(self):
        print("ain't no shape")

test = Circle()
foo(test) 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-09-25T02:36:27.173

只有类有`__bases__`; 类实例没有。您可以通过实例的`__class__`: use`foo(test.__class__)`或获取类对象`foo(Circle)`。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-09-25T02:36:36.007

使用`inspect`, 来自[文档](http://docs.python.org/library/inspect.html#inspect.getmro)

> 按方法解析顺序返回类 cls 的基类的元组，包括 cls。在这个元组中没有一个类不止一次出现。请注意，方法解析顺序取决于 cls 的类型。除非正在使用非常特殊的用户定义元类型，否则 cls 将是元组的第一个元素。

```
>>> import inspect
>>> inspect.getmro(test.__class__)
(<class '__main__.Circle'>, <class '__main__.Shape'>, <class '__main__.Thing'>, <type 'object'>)
>>> 
```

这将遍历继承层次结构并打印所有类，包括`object`. 很酷吧？

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-09-25T02:40:51.217

```
print '\n'.join(base.__name__ for base in test.__class__.__bases__) 
```

或者，使用`inspect`模块：

```
from inspect import getmro
print '\n'.join(base.__name__ for base in getmro(test)) 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-09-25T02:37:10.767

你实施的`foo`作品。但是您需要将类传递给`foo`，而不是实例。

```
In [1]: def foo(C):
   ...:          print(list(C.__bases__))
   ...:

In [2]: class Thing(object):
   ...:         def f(self):
   ...:                 print("Yo")
   ...:

In [3]: class Shape(Thing):
   ...:         def l(self):
   ...:                 print("ain't no thang")
   ...:

In [4]: class Circle(Shape):
   ...:         def n(self):
   ...:                 print("ain't no shape")
   ...:

In [5]: test = Circle()

In [6]: foo(test)
---------------------------------------------------------------------------
AttributeError                            Traceback (most recent call last)
<ipython-input-6-7b85deb1beaa> in <module>()
----> 1 foo(test)

<ipython-input-1-acd1789d43a9> in foo(C)
      1 def foo(C):
----> 2          print(list(C.__bases__))
      3

AttributeError: 'Circle' object has no attribute '__bases__'

In [7]: foo(Thing)
[<type 'object'>]

In [8]: foo(Circle)
[<class '__main__.Shape'>]

In [9]: foo(Shape)
[<class '__main__.Thing'>] 
```

# ruby - 如何对已经分组的这个哈希进行分组？

> ID：12575485
> 
> 赞同：0
> 
> 时间：2012-09-25T02:32:38.940
> 
> 标签：ruby, hash

我有一组单词字符串，我将它们变成一个哈希，按字符串的大小分组。我这样做是：

```
hash = set.group_by(&:size) 
```

导致

```
hash = {5=>[apple, andys, throw, balls], 7=>[bananas, oranges]} 
```

我想进一步按第一个字母对哈希值进行分组，因此最终结果如下所示：

```
hash = {5=>{a=>[apple, andys],b=>[balls],t=>[throw]}, 7=>{b=>[bananas], o=>[oranges]}} 
```

我试着把

```
hash.each_value do | value |
  value = value.group_by(&:chr)
end 
```

在第一个之后，`group_by`但这似乎只返回原始哈希。`(&:size)`诚然，我是一名 ruby​​ 初学者，所以如果我被要求将其写出来，我不确定我是否可以一口气做到这一点，或者确切地说，符号是如何工作的。想法？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-25T02:45:11.310

要更新您的哈希，您需要这样做

```
hash.each do |key, value|
  hash[key] = value.group_by(&:chr)
end 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-25T08:10:10.450

我会保持整个计算功能：

```
>> Hash[set.group_by(&:size).map { |k, vs| [k, vs.group_by(&:chr)] }]
=> {5=>{"a"=>["apple", "andys"], "t"=>["throw"], "b"=>["balls"]}, 
    7=>{"b"=>["bananas"], "o"=>["oranges"]}} 
```

# c - C获取单词文本文件中的行数

> ID：12575490
> 
> 赞同：0
> 
> 时间：2012-09-25T02:34:27.477
> 
> 标签：c, pointers, random, character, line

所以我试图在一个新的行上获取每个单词的文本文件中的行数。到目前为止我有这个方法......

```
char * getS(char *fileName){
    FILE *src;
    if((src = fopen(fileName, "r")) == NULL){
        printf("%s %s %s", "Cannot open file ", fileName, ". The program is now ending.");
        exit(-1);
    }
    char *get = ".";        

    int c = 0;
    char ch = 'x';
    while(ch!=EOF) {
        ch = fgetc(src);
        if(ch == '\n')  c++;
    }
    fseek(src, 0, SEEK_SET);
    printf("%i",c);
    int random = rand() % (c - 1);
    return get;
} 
```

出于某种原因，如果我在中间放了一个 ch 的 printf，它会给我正确的行数，否则它是 7801729。

另外，我将如何制作一个从 0 到行数的随机整数？在 C 中使用 random 的概念现在让我很困惑。

提前致谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-25T04:02:37.303

我认为 fgetc() 返回一个 int 但您将返回的值填充到一个 char 中（而不将其转换为 char），因此您将返回的 int 的第一个字节放在正确的位置（在您的 ch 变量中）但是额外的三个字节溢出到您的 c 变量中，该变量在堆栈上与 ch 相邻定义。当您增加 c 时，它会增加第一个字节（这表明您在大端机器上），但是 int 中额外的三个字节不会受到影响，并且会因 getc() 返回的覆盖而损坏。这就是您答案中的第一个字节看起来正确的原因。尝试将 ch 定义为 int ，我敢打赌您的问题会消失（尽管您可能必须添加一些转换以避免编译器错误/警告）。

# jquery - Jquery按ID选择标签

> ID：12575493
> 
> 赞同：1
> 
> 时间：2012-09-25T02:34:49.067
> 
> 标签：jquery, html, select, label

我在 3 个带有 ID 名称的下拉菜单周围有一个标签，但我想知道如何使用 jquery 选择它。这是我的代码：[小提琴](http://jsfiddle.net/jVHNd/)

如何按 ID 选择标签？谢谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-25T02:36:13.633

您需要 # 按 ID 选择。

```
$("#ven_label").show(); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-25T02:40:33.257

```
$('label[id="ven_label"]').show();​​​​​​​​​​​​​​​​​​ 
```

或更好

```
$('#ven_label').show();​​​​​​​​​​​​​​​​​​ 
```

但是“jsfiddle”示例中的问题是您使用的是“Mootools”而不是“jQuery”：

[使用 jQuery 运行示例](http://jsfiddle.net/adescalzo/fbEe5/)

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-09-25T02:56:44.650

您可以[通过 id 选择](http://api.jquery.com/id-selector/)，只需`#id_name`在`$()`下面键入

```
 $('#ven_label').show(); 
```

[这是 jquery 选择器的完整列表](http://api.jquery.com/category/selectors/)

# vba - 通过vba在ppt中的文本框中格式化数字

> ID：12575494
> 
> 赞同：0
> 
> 时间：2012-09-25T02:34:50.233
> 
> 标签：vba, excel, powerpoint

我已通过 VBA 连接 Excel 和 Powerpoint，以将值从 Excel 工作表发送到 PPT。

除了一件事，一切都运行良好：我需要将值从 Excel 中的单元格传输到 ppt 中的文本框形状，同时保留 excel 中的数字格式。我怎么做？

我对大约 10 个这样的框执行此操作，并且我当前的代码使用 excel 中的复制并粘贴到 powerpoint 中，不断在随机位置给出超出范围的错误。

将在短时间内粘贴我正在使用的代码。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-25T03:03:10.243

当`numberFormat`您带来`Value`.

例子：

```
With Workbooks(1).Sheets(1).Range("A1")
    valueToPaste = Format(.Value, .NumberFormat)
End With 
```

为了这个例子，我假装你是从 Excel 调用它，只想知道如何用它的格式提取值。我们正在使用范围 A1 中第一个工作簿的第一张表。它应该很容易更新到您的特定需求。

可能有一些例外，特别是对于自定义格式，但这应该适用于您在 Excel 中使用的大多数格式。

# android - 如何在 ListPreference 中使某些项目无法选择

> ID：12575499
> 
> 赞同：2
> 
> 时间：2012-09-25T02:35:05.643
> 
> 标签：android, listpreference

在 PreferenceActivity 有一个 listPreference。而且我已经通过编程方法（不在xml中）设置了条目（例如“A”到“E”）和entryValues。

是否可以使某些条目项无法选择，这些条目是指系统版本。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-25T04:13:29.743

对于常规列表项，您可能只为“boolean isEnabled (int position)”返回 false。这将使该项目不可点击。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-25T04:11:30.297

在 Preference 对象上使用 setSelectable(false)。另请参阅[http://developer.android.com/reference/android/preference/Preference.html](http://developer.android.com/reference/android/preference/Preference.html)

# java - “this”与正常初始化java

> ID：12575500
> 
> 赞同：1
> 
> 时间：2012-09-25T02:35:37.017
> 
> 标签：java

我是 java 的初学者，慢慢开始对这门语言有感觉。

我很难理解“这个”变量。

例如，哪个更好……为什么？

```
 public class Foo{
   int a;
   public Foo(int _a){
   a = _a;
     }
 } 
```

对比

```
public class Foo{
   int a;
   public Foo(int _a){
   this.a = _a;
     }
 } 
```

谢谢

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-09-25T02:38:40.133

就个人而言，我讨厌那些使用下划线或“m_”来区分变量的约定。这就是 IDE 要明确的东西。

您用于`this`清楚地描绘属于当前实例的变量。

您的两个示例都没有任何优势。您可以通过查看生成的字节码向自己证明这一点。如果您使用 javap，您会看到两者编译为相同的代码。

在我看来，它更多地与你自己和其他程序员的可读性有关。像 IntelliJ 这样的优秀 IDE 使用突出显示和颜色编码使其更加清晰。

绝对需要的一种情况是方法参数和私有成员之间存在名称冲突。然后你必须用`this`它来消除编译器的歧义：

```
public class Foo {
    private int x;
    public void setX(int x) {
        this.x = x;  // this is required here.
    }
} 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-09-25T02:36:45.080

就语言而言，两者都不是“更好”，它们是完全等价的。

但是，有充分的理由更喜欢第二种选择，即代码更明确地说明了您正在做什么。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-09-25T02:37:50.127

哪个更好是主观的事情。我*更喜欢*显式命名`this.a`（尽管我的变量会比这更具描述性），因为它清楚地表明您所指的内容属于当前对象。

否则，您必须去其他地方寻找确认。例如，它可以是在此点和函数开始之间的任何位置创建的局部变量。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-09-25T02:40:01.610

从您上面发布的代码来看，没有区别。然而，有时 Java 的作用域和阴影机制使这成为必要。例如，虽然

```
public class Foo{
   int a;
   public Foo(int _a){
       this.a = _a;
   }
 } 
```

是不必要的，这是一个

```
public class Foo{
   int a;
   public Foo(int a){
       this.a = a;
   }
 } 
```

`a`当你有更复杂的变量名而不是简单的变量名时，这有时很有用。

对于某些 C++ 类型调用 this->something 实际上确实对变量的查找方式做了不同的事情，这可能是一个奇怪的现象。然而，Java 回避了所有这些细节。

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2012-09-25T02:42:12.320

在这种情况下，它们会生成相同的字节码，所以这实际上只是你选择哪种风格的问题。通常，`this`（严格来说，它不是一个变量）指的是当前指定的类，或者更常见的是它的一个实例（调用了当前指定的方法的实例）。

# php - 无法将输入数据保存到数据库中

> ID：12575503
> 
> 赞同：-1
> 
> 时间：2012-09-25T02:35:56.707
> 
> 标签：php, mysql

我已经为使用多个表的显示输出创建了编码，所以我使用了 Join 函数。但我想添加一个额外的列来插入注释。当我点击保存按钮时，笔记确实保存在数据库中。

- 这是 JOIN 查询的编码。

```
if(isset($_POST['btnsearch']))
{
    $searchKul=$_POST['txtkul'];
    $searchSem=$_POST['txtsem'];

    if( $searchKul && $searchSem!= NULL)
    {
            $queryKul       =  "SELECT DISTINCT  _kursus.namakur_bm, _kursus.kodkursus, _kulliyah.kod_kul, kur_twr.sesi_sem, exm_penilaian.kod_skema                                                                                                        
                                FROM _kulliyah

                                JOIN _program ON _kulliyah.kod_kul = _program.kod_kul

                                JOIN kur_twr ON _program.kod_prog = kur_twr.kod_prog

                                JOIN _kursus ON kur_twr.kodkursus = _kursus.kodkursus

                                JOIN exm_penilaian ON _kursus.kodkursus = exm_penilaian.kodkursus

                                WHERE _kulliyah.kod_kul LIKE '%$searchKul%'

                                AND kur_twr.sesi_sem LIKE '%$searchSem%'

                                ORDER BY kodkursus";

            $rsKul               = mysql_query($queryKul);
            $row_rsKul           = mysql_fetch_assoc($rsKul);
            $totalRows_rsKul     = mysql_num_rows($rsKul); 
```

*   这是用于编码说明

    if(isset($_POST['btnsave'])) { $txtadd = $_POST['txtadd'];

    ```
     $result=mysql_query("INSERT INTO _kursus(remark) VALUES('$txtadd')");

                    if($result)
                    {
                            echo ("<script language='JavaScript'>alert('Succesfully INSERT data!');</script>
                                   <script language='JavaScript'>window.location='kul7.php';</script>"); 
                    }
                    else 
                    {
                            echo 'PLEASE ENTER AGAIN'; 
                    }
                }?>
                <form action="" method="POST">
                <input type="text" name="txtadd"/><input type="submit" name="btnsave" value="SAVE"/>
                </form>
                <?php 
                "</td>";
                echo "</tr>";
                }
                    while($row_rsKul = mysql_fetch_assoc($rsKul));
                {
                    echo "</table></center>";
                }
                mysql_close();
                }
            } 
    ```

* * *

```
$result=mysql_query("INSERT INTO _kursus(remark) VALUES('$txtadd')"); 
```

上面的查询似乎不起作用。我无法将数据保存到数据库。当我单击“保存”按钮时，什么也没有发生..

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-04T02:39:00.920

```
$query_rsInsert = "INSERT INTO _kursus (remark) VALUES ('$txtadd')
                   WHERE _kursus.kodkursus = " .$_POST['kodkursus']; 
```

*   我如上所述更改编码，但查询不起作用。我想做一些事情，比如当用户添加注释时，注释将根据代码出现保存在数据库中。

# bash - CentOS后台启动php脚本

> ID：12575504
> 
> 赞同：1
> 
> 时间：2012-09-25T02:36:05.493
> 
> 标签：bash, background, centos

我正在尝试从命令行在后台启动程序：

```
[root@my]# php file.php&
[1] 16897
[root@my]# bg
[1]+  Stopped file.php 
```

它总是停止无关紧要启动哪个php，问题出在哪里？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-25T02:59:51.413

尝试使用 nohup

```
nohup php -r 'while (true) { echo "a";}' & 
```

对我来说很好（在 kubuntu 上）。

* * *

*注意：标准输出：*

标准输出被重定向到`nohup.out`（如果它还没有被重定向）；`nohup.out`位于在命令行中运行命令的文件夹中。

所以要小心正确处理输出，否则几天/几个月后你可能会得到一个非常大的文件

* * *

*注2：停止进程：*

进程将打印 PID的最终**&哪个背景。**要终止 nohup 进程，请运行：

```
kill {PID} 
```

（{PID} 是执行“ `nohup php -r 'while (true) { echo "a";}' &`”命令后打印的 PID）。

`kill -9 {PID}`如果您需要强制杀死，您也可以使用。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-25T03:27:19.123

```
nohup php newEmptyPHP.php & 
```

在 CentOS 上运行良好！！！感谢塞德里克！

# cakephp - Recess PHP 框架与 CakePHP

> ID：12575507
> 
> 赞同：0
> 
> 时间：2012-09-25T02:36:23.977
> 
> 标签：cakephp, cakephp-2.0, recess

我已经有一段时间没有看 Recess PHP 框架了，但是对于那些对这两个框架都有经验的人，我会问这个问题：Recess 在 CakePHP 2.x 上提供了哪些功能？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-25T10:18:15.850

[Recess github 存储库](https://github.com/recess/recess)中的大部分代码已经 3 年没有更新，最近一次提交是在一年前。论坛是离线的，他们上一篇博文可以追溯到 2010 年。所以我不确定 Recess 是否已经被积极开发，从长远来看这可能会成为一个问题。

也就是说，Cake 拥有相当多的开发人员，得到基金会的支持并定期接收更新。与 Recess 相比，Cake 的插件、代码片段等生态系统也必将更加广泛。

# excel - 日期和图表

> ID：12575514
> 
> 赞同：1
> 
> 时间：2012-09-25T02:36:52.700
> 
> 标签：excel, vba

我有三组数据，每组有两列。第一列是日期，第二列是价格。每个数据集的日期格式不同，例如。黄金的日期（1951 年）、货币供应量 M2 的日期（1951-01）和货币供应量。M3 日期 (9/01/1951)

**我需要的：**

我想用 x 轴上的日期和 y 轴上的价格来绘制这些图表

**问题：**

*   我需要将 Gold 的 Date(YYYY) 和 Money Supply M2 的 Date(YYYY-MM) 设为日期对象吗？
*   如果是这样怎么办？
*   我是否需要将所有日期放在一列中并创建一个子项以帮助使用适当的日期对价格进行排序？

这有意义吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-27T21:00:01.400

我在 VBA 中编程的经验很少，并且很难找到有关使用日期的信息。我遇到了一个答案，由编辑此文章的人 (brettdj) 给出，其中列出了一些对 Excel 的 VBA 编程非常有用的观点。其中之一有关于 DateSerial() 函数的信息。然后我可以拼凑一些代码来快速解决我的问题。

子创建日期（）

```
Dim dt As Date
Dim s As String

For Each c In Worksheets("Sheet1").Range("A7:A27080").Cells
    s = Len(c.Value)

    If s = 4 Then '(YYYY)
        dt = DateSerial(s, 7, 1)
        c.Value = dt
    End If

    If s = 7 Then '(YYYY-MM)
        y = Left(s, 4)
        m = Right(s, 2)
        dt = DateSerial(y, m, 1)
        c.Value = dt
    End If

Next c 
```

结束子

我可能会花一些时间并添加一些正则表达式并制作一个最适合的尺寸，但这会起作用，因为我想经常使用它。

# javascript - 处理包含选定复选框的单个 cookie

> ID：12575517
> 
> 赞同：0
> 
> 时间：2012-09-25T02:36:55.087
> 
> 标签：javascript, cookies

我正在构建带有很多复选框的 html 页面。我想管理一个包含所选项目的 cookie。Cookie 看起来像分隔符`1234^9876^3456^`在哪里`^`。

当用户选中或取消选中该框时，cookie 会显示添加或删除的 ID 号。

这是我正在使用的功能。除了最后 2 个之外，所有这些都来自知名的第三方开发人员。一些问题是：

*   每个复选框都有一个`onclick`事件`AddRemoveOrdinal2(...)`；
*   用户看到好的勾选和未勾选的汇总数据，甚至刷新页面但是浏览器中存储了几个cookie，相同的名称，相同的路径，不同的内容；
*   最后一个函数`RemoveOrdinal`用于从摘要中删除一个项目，它删除 cookie 并且不替换新的。

也许从一个新的想法/程序重新开始会更好

```
function setCookie(c_name,value,expiredays)
{
 var exdate=new Date();
 exdate.setDate(exdate.getDate()+expiredays);
 document.cookie=c_name+ "=" +escape(value)+
 ((expiredays==null) ? "" : ";expires="+exdate.toUTCString());
}

function getCookie(c_name)
{
var i,x,y,ARRcookies=document.cookie.split(";");
for (i=0;i<ARRcookies.length;i++)
{
x=ARRcookies[i].substr(0,ARRcookies[i].indexOf("="));
y=ARRcookies[i].substr(ARRcookies[i].indexOf("=")+1);
x=x.replace(/^\s+|\s+$/g,"");
if (x==c_name)
  {
  return unescape(y);
  }
}
}

function del_cookie(name) 
 {
 if (dbug) alert('del_cookie');
 document.cookie = name + '=' + '; expires=Thu, 01-Jan-70 00:00:01 GMT; path=/; ' 
 }

function get_cookie(name) {
   if (dbug) alert('get_cookie'); 
   var dcookie = document.cookie; 
   var cname = name + "="; 
   var clen = dcookie.length; 
   var cbegin = 0; 
   while (cbegin < clen) {
     var vbegin = cbegin + cname.length;
     if (dcookie.substring(cbegin, vbegin) == cname) {
        var vend = dcookie.indexOf (";", vbegin); 
        if (vend == -1) vend = clen; 
        return unescape(dcookie.substring(vbegin, vend));
     } 
     cbegin = dcookie.indexOf(" ", cbegin) + 1; 
     if (cbegin == 0) break;
  } return null;
} 

function set_array(name, ary, expires) {
   if (dbug) alert('set_array'); 
   var value = ''; 
   for (var i = 1; ary[i]; i++) {
   value += ary[i] + '^';
   } 
   set_cookie(name, value, expires);
 } 

function AddRemoveOrdinal2(id, ordinal, id_checkbox){ 
var foo = document.getElementById(id_checkbox).checked;
if (foo == false)    { 
    get_array(cookieName, myarray);
    var myarray2 = init_array(); 
    for (var i=0; i<next_entry(myarray); i++) { 
        if(myarray[i] != ordinal){ 
            myarray2.push(myarray[i]); 
            }
        }
    del_cookie(cookieName);
    set_array(cookieName, myarray2, expires);
    myarray = myarray2;
    // Code here to display:none/block
    }
else {
    get_array(cookieName, myarray);
    myarray.push(ordinal); 
    set_array(cookieName, myarray, expires);
    }
 get_array(cookieName, myarray); 
 if(myarray.length > 1){ 
    // Code here to display:none/block elements
    }
else {
    // Code here to display:none/block elements 
       }

function RemoveOrdinal(id, ordinal, id_checkbox){ 
get_array(cookieName, myarray); 
var myarray2 = init_array(); 
for (var i=0; i<next_entry(myarray); i++) {
    if(myarray[i] != ordinal){ 
        myarray2.push(myarray[i]); 
    }
}
del_cookie(cookieName); 
set_array(cookieName, myarray2, expires); 
myarray = myarray2;
esconder(id); 
document.getElementById(id_checkbox).checked=false; 
 get_array(cookieName, myarray); 
 if(myarray.length > 1){ 
    // Code here to display:none/block elements
else {
    // Code here to display:none/block elements
}
} 
```

负载

```
var cookieName = 'ordinals';  
var myarray = init_array();
var timeToKeep = 60000*60*24*7; 
var expires = new Date();
expires.setTime(expires.getTime() + timeToKeep); 
var x = get_cookie(cookieName);
if ( !x || x == null) { 
    set_array(cookieName, myarray, expires);
} 
```

# mongoid - 如何选择文档，我的数据位于其数组类型字段中

> ID：12575525
> 
> 赞同：0
> 
> 时间：2012-09-25T02:37:56.723
> 
> 标签：mongoid

我有一个这样的模型：

```
class Region
field :country, type: Array
end 
```

如果我有国家名称，例如“US”，我想选择在其 :country 字段中有“US”的对象。

我能做些什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-25T04:05:10.587

我想这就是你要找的

```
Region.any_in(:country => ['US']) 
```

# r - 向量元素的乘积

> ID：12575527
> 
> 赞同：1
> 
> 时间：2012-09-25T02:38:12.787
> 
> 标签：r

我想写一个函数，给定一个向量 v 计算 v 中所有条目的乘积。（R 中有一个函数可以做到这一点，但我想自己写一个。）

但是我尝试了如何获得向量中任何元素的乘积？

```
product <- function(v){
    out <- 1
    for(i in 1:length(v)){
       out <- out*v[i]
    }
    out
} 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-25T02:56:39.630

如果您将`...`其用作函数的参数，则可以传递多个对象或仅传递一个对象。在函数内部，您可以转换为列表并使用递归地将`Reduce`函数 ( ) 应用于列表。`*`如果你结合，`list`你可以使这个非常通用。以下将使用向量，或使用 2 个或更多数字，或向量和单个数字的混合。`unlist``as.list`

```
> product <- function(...) Reduce("*", as.list(unlist(list(...))))
> product(2, 7, 3)
[1] 42
> product(c(2, 7, 3))
[1] 42
> product(2, c(7, 3))
[1] 42 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-25T15:28:34.717

`Recall`尾递归的使用：

```
 prd2 <- function(x)
     if(length(x) == 2) { x[1] *x[-1] } else x[1] * Recall(x[-1])
 prd2(c(2,3,4))
#[1] 24 
```

# extjs - 有没有办法“罗盘编译”到指定的文件路径？

> ID：12575528
> 
> 赞同：1
> 
> 时间：2012-09-25T02:38:20.493
> 
> 标签：extjs, extjs4.1, compass-sass, sass

我正在为其主题构建一个由 SASS/Compass 支持的 ExtJS 4 应用程序。

我想生成2个文件：

1.  我的扩展主题.css
2.  我的-ext-theme.min.css

我目前有一个“my-ext-theme.scss”文件，已成功编译为“my-ext-theme.css”。问题是我想要 1 个 scss 文件编译为 2+ 个 css 文件。此外，我希望这些 css 文件位于我想要的任何目录中。

注意：我**不想**添加 config.rb 文件，以便它“仅”输出到不同的目录（即“css/my-ext-theme.css”和“css2/my-ext-theme.css”）。

有什么建议么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-25T02:38:20.493

**当前解决方案（有点烦人）**

```
my-ext-theme.scss // my sass code here
my-ext-theme.min.scss // @import 'my-ext-theme';

compass compile my-ext-theme.scss // development
compass compile --output-style compressed my-ext-theme.min.scss // production 
```

# android - 为 Android 构建 OpenJPEG

> ID：12575534
> 
> 赞同：4
> 
> 时间：2012-09-25T02:39:50.447
> 
> 标签：android, makefile, jpeg, jpeg2000

我有个问题。

在 Android 上使用 OpenJPEG 我该怎么做？（我的“j2k_to_image”主要是想用。）

我想让你告诉我如何编写一个makefile。提前致谢。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-11-10T18:27:00.450

我能够使用以下大纲构建 + 使用 OpenJPEG 将 JPEG2000 图像加载到我的应用程序中。您必须根据您的环境以及您希望如何使用它来自定义它。我的回答提供了粗略的指导以及对我遇到的主要障碍的具体答案（我的 Android.mk 和 Application.mk 文件应该是什么，以及如何处理 OpenJPEG 库需要 cmake 的事实）。

由于我们谈论的是 OpenJPEG，因此此答案假定您熟悉并计划将 Android NDK 用于您的应用程序。它还假设您使用的是 Eclipse 版本的 Android IDE。答案还假设您熟悉静态库如何与 Android NDK 一起使用以及如何将它们引用到您的主应用程序中。您可以在下面扩展我的答案以创建共享库或将代码直接包含到您的应用程序中。如果您不熟悉这些先决条件，stackoverflow 和 Google 可以提供帮助。

我成功使用了 Android NDK r8e 和 OpenJPEG 2.0.0。

脚步：

1.  [从http://www.openjpeg.org/index.php?menu=download](http://www.openjpeg.org/index.php?menu=download)下载并扩展 OpenJPEG 2.0.0
2.  在 Eclipse 中创建一个本机项目。我创建了一个项目，允许我将 OpenJPEG 用作静态库
3.  在我的项目的 jni 文件夹中，我将以下内容用于我的 Application.mk 和我的 Android.mk 文件。见下文。
4.  创建自定义 opj_config.h。OpenJPEG 旨在使用 cmake 进行编译。出于多种原因，我不想处理它——我的其他内容都不依赖它（所以它会增加另一层复杂性），我在 Windows 上（它没有内置，并且此[stackoverflow 帖子](https://stackoverflow.com/questions/13941279/android-cmake-is-compatible-with-newer-ndk-versions)引用了[android-cmake](https://code.google.com/p/android-cmake)， android-cmake 的文档表明它可能无法在 Windows 上运行）。有关我的 opj_config.h，请参见下文。它应该适合你。确保将它放在包含路径中的某个位置。
5.  构建 Android NDK 静态库项目
6.  将您的静态库引用到您的主项目中

这样，我就能够成功地将 JPEG2000 图像加载到我的基于 Android NDK 的应用程序中。

应用程序.mk：

```
APP_ABI := all
APP_PLATFORM := android-9
APP_MODULES := openjpeg 
```

Android.mk（您必须自定义以下所有路径）：

```
# Taken from https://stackoverflow.com/questions/4036191/sources-from-subdirectories-in-makefile
# The trailing slash is required.

rwildcard=$(wildcard $1$2) $(foreach d,$(wildcard $1*),$(call rwildcard,$d/,$2))

ALL_CPPS := $(call rwildcard,../../openjpeg-2.0.0/src/lib/openjp2,*.c)
ALL_CPPS += $(call rwildcard,../../openjpeg-2.0.0/src/lib/openjpip,*.c)

LOCAL_PATH := $(call my-dir)

include $(CLEAR_VARS)

LOCAL_MODULE := openjpeg
LOCAL_C_INCLUDES := /path/to/openjpeg-2.0.0/src/lib/openjp2
LOCAL_SRC_FILES := $(addprefix ../,$(ALL_CPPS))

LOCAL_CFLAGS   = -DUSE_JPIP

include $(BUILD_STATIC_LIBRARY) 
```

opj_config.h（通常 cmake 会为您正在构建的平台创建此文件——但正如我上面提到的，我不想处理 cmake，所以我手动创建了这个文件）：

```
#ifndef OPJ_CONFIG_H
#define OPJ_CONFIG_H

#define OPJ_PACKAGE_VERSION "2.0.0"

#define HAVE_INTTYPES_H 1
#define HAVE_MEMORY_H 1
#define HAVE_STDINT_H 1

#ifndef HAVE_STDLIB_H  // I had a conflict with this somewhere else in my project -- good form dictates that I should probably ifndef guard the other defines in this file as well....that is a TODO for later
#define HAVE_STDLIB_H 1
#endif

#define HAVE_STRINGS_H 1
#define HAVE_STRING_H 1
#define HAVE_SYS_STAT_H 1
#define HAVE_SYS_TYPES_H 1
#define HAVE_UNISTD_H 1

// I'm not utilizing libpng or libtiff, so don't set these
//#cmakedefine HAVE_LIBPNG @HAVE_LIBPNG@
//#cmakedefine HAVE_PNG_H @HAVE_PNG_H@
//#cmakedefine HAVE_LIBTIFF @HAVE_LIBTIFF@
//#cmakedefine HAVE_TIFF_H @HAVE_TIFF_H@

#define HAVE_SSIZE_T 1

//#cmakedefine _LARGEFILE_SOURCE
//#cmakedefine _LARGE_FILES
//#cmakedefine _FILE_OFFSET_BITS @_FILE_OFFSET_BITS@

#define HAVE_FSEEKO 1

//#cmakedefine HAVE_LIBLCMS1
//#cmakedefine HAVE_LIBLCMS2
//#cmakedefine HAVE_LCMS1_H
//#cmakedefine HAVE_LCMS2_H

#endif // OPJ_CONFIG_H 
```

# ios - 使用最新的 Dropbox 框架构建支持 armv6、armv7 和 armv7s

> ID：12575537
> 
> 赞同：2
> 
> 时间：2012-09-25T02:40:03.617
> 
> 标签：ios, dropbox, iphone-5, armv6

我正在使用最新的 Dropbox 框架来支持新的 iPhone 5，并且我想继续支持 iPhone 3G 和 iPod Touch 2G（armv6，iOS 4.2.1），它们代表了大约 2% 的用户。

我保留了一个旧的 Xcode 4.4，以便能够在我仍然为我的孩子使用的旧设备上进行调试。我使用 Xcode 4.4 在 4.* 上进行调试，然后切换到 Xcode 4.5 以在我的 iPhone 5 上进行调试。我将 armv6 添加到构建架构中，但由于此错误而无法编译：

> ld：文件是通用的（2 个切片）但不包含 a(n) armv6 切片：/.../DropboxSDK.framework/DropboxSDK 用于架构 armv6

有人用 Dropbox 框架成功编译过 armv6、armv7 和 armv7s 吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-25T02:44:04.110

Xcode 4.5（及更高版本）不支持生成 armv6 二进制文件。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-09T23:03:58.913

通过遵循本手册 [How to support armv6 and armv7s for release build in xcode 4.5](https://stackoverflow.com/questions/12619124/how-to-support-both-armv6-and-armv7s-for-release-build-in-xcode-4-5) ，您可以同时支持这两者 - 但不知道 Dropbox SDK。

# php - 找不到 SOAP HTTP

> ID：12575539
> 
> 赞同：1
> 
> 时间：2012-09-25T02:40:37.443
> 
> 标签：php, soap

我遇到了 Uncaught SoapFault 异常错误：[HTTP] Not Found

这是我的代码

```
$client = new SOAPClient ( 'http://torcache.net/torcache.wsdl');
$infoHash = $client->cacheTorrent(base64_encode(file_get_contents('my.torrent'))); 
```

这是 WSDL

```
<?xml version='1.0' encoding='UTF-8' ?>
<definitions name='Cache'
  targetNamespace='urn:Torcache'
  xmlns:tns='urn:Torcache'
  xmlns:soap='http://schemas.xmlsoap.org/wsdl/soap/'
  xmlns:xsd='http://www.w3.org/2001/XMLSchema'
  xmlns:soapenc='http://schemas.xmlsoap.org/soap/encoding/'
  xmlns:wsdl='http://schemas.xmlsoap.org/wsdl/'
  xmlns='http://schemas.xmlsoap.org/wsdl/'>

<message name='cacheTorrentRequest'>
  <part name='torrent' type='xsd:string'/>
</message>

<message name='cacheTorrentResponse'>
  <part name='Result' type='xsd:string'/>
</message>

<portType name='CachePortType'>
  <operation name='cacheTorrent'>
    <input message='tns:cacheTorrentRequest'/>
    <output message='tns:cacheTorrentResponse'/>
  </operation>
</portType>

<binding name='CacheBinding' type='tns:CachePortType'>
  <soap:binding style='rpc'
    transport='http://schemas.xmlsoap.org/soap/http'/>

  <operation name='cacheTorrent'>
    <soap:operation soapAction='urn:xmethods-delayed-quotes#cacheTorrent'/>
    <input>
      <soap:body use='encoded' namespace='urn:xmethods-delayed-quotes'
        encodingStyle='http://schemas.xmlsoap.org/soap/encoding/'/>
    </input>
    <output>
      <soap:body use='encoded' namespace='urn:xmethods-delayed-quotes'
        encodingStyle='http://schemas.xmlsoap.org/soap/encoding/'/>
    </output>
  </operation>
</binding>

<service name='CacheService'>
  <port name='CachePort' binding='CacheBinding'>
    <soap:address location='http://torcache.net/api/soap/'/>
  </port>
</service>
</definitions> 
```

我的服务器统计

PHP 版本 5.3.15

知道为什么我会收到此错误吗？我从他们的 api 页面 [https://torcache.net/api得到了这个示例脚本](https://torcache.net/api)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-25T02:52:51.707

我从来没有让远程 Wsdl 加载 php 的soapclient。要进行测试，请尝试将 wsdl 下载到本地文件并使用根目录“/”的绝对文件路径而不是 url。如果它工作正常，正如我所料，你至少可以确定这不是你的错，但可以肯定它是库中的一个错误。我认为 php 开发世界中没有人关心肥皂，也没有人解决这个问题。或者，也许我们只是遗漏了一些明显的东西......

如果您不介意 php 5.3 已弃用的警告，您可以找到旧 nusoap 库的副本并使用它——它可以毫无问题地加载远程 wsdls。

# .net - 在结构中使用委托不会修改结构内部元素

> ID：12575541
> 
> 赞同：0
> 
> 时间：2012-09-25T02:41:00.573
> 
> 标签：.net, delegates, structure

我们认为这将是一种通过值限制绕过结构传递的简单方法（在现实生活中，我们的结构有更多成员）但我们注意到在结构中使用委托不会修改结构内部成员，即使那是委托数组的唯一用途。
鉴于此委托和结构：

```
public delegate void ChangeValues();

structure Effects
{
    int val1,val2,val3;

    void SetValues(int index)
    {
        ChangeValues[] delegateArray = new ChangeValues(){this.SetValSet1,this.setValSet2,this.SetValSet3};
        delegateArray[index]();  //now set the values as necessary
    }
    void setValSet1()
    {
        val1=0;val2=1;val3=2;
    }        
    void setValSet2()
    {
        val1=1;val2=2;val3=3;
    }        
    void setValSet3()
    {
        val1=2;val2=3;val3=4;
    }        
}

Effects effects = new Effects();
effects.SetValues(1);    //when stepping through code one sees the values change inside eh setValues functions, but the modified values are gone after leaving this function 
```

使用委托会导致结构的另一个实例被创建然后丢失吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-25T04:46:43.917

第一：请不要发布甚至不能编译的代码（除非你问为什么它不能编译）。这只是浪费我们的时间。

第二：是的，代表似乎是结构的值复制，不确定细节，但以下是一个解决方案：

```
public delegate void ChangeValues(ref Effects a);

public struct Effects
{
    int val1,val2,val3;

    public void SetValues(int index)
    {
        ChangeValues[] delegateArray = new ChangeValues[]{setValSet1,setValSet2,setValSet3};
        delegateArray[index](ref this);  //now set the values as necessary
    }
    public void setValSet1(ref Effects a)
    {
        a.val1 = 0; a.val2 = 1; a.val3 = 2;
    }
    public void setValSet2(ref Effects a)
    {
        a.val1 = 1; a.val2 = 2; a.val3 = 3;
    }
    public void setValSet3(ref Effects a)
    {
        a.val1 = 2; a.val2 = 3; a.val3 = 4;
    }
    public override string ToString()
    {
        return val1 + "," + val2 + "," + val3;
    }
}

class Program
{
    static void Main(string[] args)
    {
        Effects effects = new Effects();
        Effects effects2 = new Effects();
        effects.SetValues(1);    //when stepping through code one sees the values change inside eh setValues functions, but the modified values are gone after leaving this function
        Console.WriteLine(effects);
    }
} 
```

它输出：1,2,3

# android - Android putExtra 停止工作

> ID：12575546
> 
> 赞同：2
> 
> 时间：2012-09-25T02:41:35.473
> 
> 标签：android, android-activity

我有 Intent 并且我从 MainActivity 将 Parcelables 的两个 ArrayLists 传递给一个“FormActivity”，它接收 ArrayLists 完美（使用 startActivityForResult），完美地返回通过表单收集的数据。

问题是，如果我单击按钮再次打开 FormActivity，则两个 ArrayList 不会再次发送，并且我会收到 NullPointerException。

有没有人见过这个？

谢谢你。

主要活动代码：

```
 public void insertProductButtonClicked(View view){
    Intent addProductIntent = new Intent(getBaseContext(), AddProductActivity.class);
    addProductIntent.removeExtra("consumers");
    addProductIntent.removeExtra("products");
    addProductIntent.putParcelableArrayListExtra("consumers", consumers);
    addProductIntent.putParcelableArrayListExtra("products", products);
    startActivityForResult(addProductIntent, MyActivities.ACTIVITY_ADD_PRODUCT);
} 
```

AddProductActivity 代码（“FormActivity”）：

```
 Intent intent = new Intent();
intent.putExtra("productName", productNameEditText.getText().toString());
intent.putExtra("productPrice", Double.valueOf(productPriceEditText.getText().toString()));

SparseBooleanArray checkedItems = consumersListView.getCheckedItemPositions();
ArrayList<Integer> consumersToAdd = new ArrayList<Integer>();
for (int i = 0; i < consumers.size(); i++) {
    if (checkedItems.get(i)){
        consumersToAdd.add(consumers.get(i).getId());
    }
}

intent.putIntegerArrayListExtra("productConsumers", consumersToAdd);
setResult(Activity.RESULT_OK, intent);
finish(); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-25T05:34:40.517

您可以将 ArrayList 声明为静态的，请在下面查看...

```
public static ArrayList<String> array = new ArrayList<String>(); 
```

通过这样做，您可以按类型从任何地方访问您的 ArrayList

```
activity_name.array; 
```

其中activity_name 是您在其中声明静态ArrayList 的活动或类。

祝你好运。

# ios - 构建到物理设备时如何获取 gcno 文件

> ID：12575548
> 
> 赞同：2
> 
> 时间：2012-09-25T02:41:48.580
> 
> 标签：ios, code-coverage, gcov

最近，我正在研究 ios 代码覆盖率。按照这个链接：

[代码覆盖率未显示使用 Xcode + gcov 的结果](https://stackoverflow.com/questions/5101014/code-coverage-not-showing-results-using-xcode-gcov)

**在模拟器**上运行时我已经能够得到它，gcno 和 gcda 文件与构建对象一起。但是对于**真实设备**，情况有所不同，我在设备中获得了 gcda 文件，但是无论是在我的 mac 还是我的设备中，我都找不到**gcno**文件，有人可以帮我吗？非常感谢。

# jquery - 你如何在 jquery fileupload 中强制渲染上传模板

> ID：12575550
> 
> 赞同：2
> 
> 时间：2012-09-25T02:42:10.727
> 
> 标签：jquery, file-upload, blueimp

我正在使用 blueimp 的 jquery 文件上传。上传成功完成后，我可能需要将文件标记为错误。

如何强制重新渲染该行？我正在使用插件提供的 UI 小部件和默认模板。

我在 jquery.fileupload-ui.js 中看到了一个 _renderUpload 函数，但它是私有的。我在下面的示例中将文件标记为错误，但必须重新渲染才能在浏览器中将行渲染为错误。

```
$('#fileupload').bind('fileuploaddone', function (e, data) {
    data.files[0].error = true;
    // what do i need to here to force re-rendering? 
    //how do i get access to the widget instance and how can i force a re-render?
} 
```

# forms - 经典的 asp 请求表单和变量

> ID：12575554
> 
> 赞同：1
> 
> 时间：2012-09-25T02:42:33.010
> 
> 标签：forms, variables, asp-classic, request.form

我需要一些帮助。我得到了这个简单的用户名/密码脚本来启用登录页面。它基本上是一种询问用户名/密码并与代码中的一些信息进行比较的表单。

```
If Request.Form("FormUsername") = "username" AND Request.Form("FormPassword") = "password" Then 
```

我想做的是比较一些变量的用户/传递信息，比如有第二个文件和变量：

```
<%
'Username Variables
Dim PCUser, PCPass

PCUser = "username"
PCPass = "password"
%> 
```

然后将文件包含到登录页面：

```
<!--#include file="Users.inc"--> 
```

然后能够读取 request.form 上的变量：

```
If Request.Form("FormUsername") = "& PCUser &" AND Request.Form("FormPassword") = "& PCPass &" Then 
```

到目前为止，这就是我尝试过的，但没有成功:(谁能帮我找出原因？？？

如果我在页面末尾执行 response.write，它将显示变量值：

```
<%
Response.Write("user= " & PCUser & "<br />")
Response.Write("pass= " & PCPass & "<br />")
%> 
```

提前致谢

个人电脑

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-25T02:49:35.930

尝试

```
If Request.Form("FormUsername") = PCUser 
      AND Request.Form("FormPassword") = PCPass Then 
```

第二次尝试：

```
response.write "FormUsername: " & Request.Form("FormUsername")
response.write "PCUser: " & PCUser
response.write "Equals: " & (Request.Form("FormUsername") = PCUser) 
```

在主页和包含文件中使用上述内容进行检查。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-25T11:50:24.613

一种更简单的方法可能是将用户名和密码放在应用程序变量中，即站点根目录的 global.asa 中：

```
<script language=vbscript runat=server>
    SUB Application_OnStart
            Application.contents("username") = "username"
            Application.contents("password") = "password" 
    END SUB
</script> 
```

这使您的用户名和密码在整个应用程序中都可用。在您的页面中，您可以像这样检查它（不需要包含）：

```
If Request.Form("FormUsername") = Application.contents("username") AND Request.Form("FormPassword") = Application.contents("password") Then
    ...
End if 
```

当然，从那里开始的方法是创建一个登录页面，一旦用户使用正确的用户名和密码登录，设置一个会话变量（每个用户），然后检查会话变量查看是否有人登录：

全球.ASA：

```
<script language=vbscript runat=server>
    ' run when the application is started for the first time or re-started
    SUB Application_OnStart
            Application.contents("username") = "username"
            Application.contents("password") = "password" 
    END SUB

    ' run for each user when he or she first visits the site
    SUB Session_OnStart 
            Session.Contents("loggedIn") = False
    END SUB
</script> 
```

当用户成功登录时，您的登录页面可以将会话设置为 TRUE：

```
If Request.Form("FormUsername") = Application.contents("username") AND Request.Form("FormPassword") = Application.contents("password") Then
    Session("loggedIn") = True
End if 
```

在您要保护的每个页面的顶部，您可以执行以下操作：

```
If NOT Session("loggedIn") Then 
    Response.redirect("/login.asp")    ' redirect to your login page
End If 
```

最后一段代码可以放在一个包含文件中，并添加到您想要保护的所有页面的顶部。

请注意，这是一个非常初级的安全系统，代码未经测试。

希望这可以帮助

# javascript - 无法在控制器的函数中访问注入的 AngularJS 服务

> ID：12575555
> 
> 赞同：1
> 
> 时间：2012-09-25T02:42:33.160
> 
> 标签：javascript, javascript-framework, angularjs

无法在销毁函数中访问 $scope 和 Food。

```
foodProject.controller('FoodsCtrl', function($scope, Food) {

    $scope.foods = Food.index();
    $scope.destroy = function(food){
        debugger;
        console.log(Food, $scope);
        food.$destroy();
    };
}); 
```

局部范围变量仅

食物：资源

这个：$get.e.$new.a

我找不到 $scope 和 Food

[http://jsfiddle.net/fW2EA/1/](http://jsfiddle.net/fW2EA/1/) http://jsfiddle.net/wizztjh/fW2EA/3/

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-25T08:44:10.077

将此行包含在您的销毁函数中（您的小提琴中缺少它）：

```
console.log(Food, $scope); 
```

然后在你的调试器中，检查范围变量的闭包部分（我使用的是 Chrome），当你在断点处停止时。`Food`并且`$scope`在那里（正如人们所期望的那样！）。

`this`在 destroy 函数的上下文中是 ng-repeat 中的新范围，因此与 不同`$scope`，尽管两者都是范围。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-25T05:48:11.703

在您的功能内，`this`是范围，例如`this.foods`.

我相信，如果您希望`Food`可访问，请将其添加到范围，即`$scope.Food = Food;`.

我仍然是菜鸟，不确定添加`Food`到`$scope`是否是正确的做法。

# android - 在开发人员选项 android 4.1 中保护 SD 卡

> ID：12575557
> 
> 赞同：1
> 
> 时间：2012-09-25T02:43:29.913
> 
> 标签：android, permissions, sd-card, protection

在 Android 4.1 中，DEVELOPER OPTIONS 中有一个名为 Protect SD CARD 的新选项。

我知道，如果我们改变这个选项，一些进展将会被扼杀。

现在的问题是，我怎么知道这个选项有一定的变化？

通过什么价值或进步，我可以知道吗？

提前致谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-25T02:49:07.927

不完全确定你在问什么，我可以猜到......

打开该选项会强制执行`READ_EXTERNAL_STORAGE`读取外部存储/SD 卡所需的新权限 ( )。在以前的版本中，任何应用程序都可以读取外部存储，并且只需要显式权限才能写入 ( `WRITE_EXTERNAL_STORAGE`)。当您打开它时，没有`READ_EXTERNAL_STORAGE`权限的应用程序将失败（崩溃）并显示`SecurityException`. 如果那是您的应用程序，只需添加权限。如果这些不是您的应用程序，您无能为力，但请作者在下一个版本中添加权限。

如果这就是您要问的，我认为您不能以编程方式检查该选项是否已打开，但无论如何您都不应该这样做。

# operating-system - 从内核调用 root shell

> ID：12575561
> 
> 赞同：2
> 
> 时间：2012-09-25T02:44:06.680
> 
> 标签：operating-system, linux-kernel, root

我正在开发一个漏洞利用项目，该项目需要我从内核中调用 root shell。在搜索了各种文档和网站后，我了解到唯一的方法是将当前进程提升到 root 权限，然后执行指令来调用 shell。这是因为我们不能简单地从内核调用系统调用。

同样，我遇到了 call `commit_creds (prepare_kernel_cred (0));`，它可用于授予进程 root 权限。但是，我使用的是 Red Hat Enterprise Linux 4.4 Base，它没有上述调用：

```
[dmazumd@bn19-62 ~]$ grep commit_cred /proc/kallsyms 
[dmazumd@bn19-62 ~]$ grep _cred /proc/kallsyms 
c0164655 T compute_creds
c01a7cdd t dummy_bprm_apply_creds..... 
```

所以，我的问题是，如何解决这个问题？我知道需要`uid`将进程的设置为零，这将为其提供 root 权限。AFAIK，`uid`居住在`struct_cred`而不是`struct_task`现在。而且我不知道是否可以在不使用上述任何 API 的情况下直接访问这些结构。是否有任何其他呼吁来实现同样的目标？或者，还有其他方法吗？

PS：我不是要求我的问题的确切答案，任何方向/帮助将不胜感激。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-25T03:04:37.417

澄清一下：您的内核不需要“root权限”。它实际上高于此。您需要的是一个可以拥有特权的进程。

您可以开始查看`execve`启动流程并执行此操作。

如果你已经运行了一个 shell 并且你处于内核模式，你可以简单地修改( [shed.h](http://students.mimuw.edu.pl/SO/LabLinux/PROCESY/ZRODLA/sched.h.html) )`uid`中的。`task_struct`

另外，看看[这里](http://web.yl.is.s.u-tokyo.ac.jp/~tosh/kml/)。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-26T07:02:44.867

我最终可以通过首先在内核内部将进程提升为 root 状态来实现 root shell。这是通过使用`set_user(0)`内部定义的 call call 来实现的`/proc/kallsyms`。

`iret`完成此操作后，该进程将使用并生成一个 shell切换回用户空间。此 shell 具有 root 权限。

# algorithm - 如何在日志文件中找到准确的行

> ID：12575568
> 
> 赞同：-1
> 
> 时间：2012-09-25T02:46:06.760
> 
> 标签：algorithm

如果你有一个很大的日志文件，数十亿行。这些文件有一些列，例如 IP 地址：`xxx.xxx.xxx.xxx`.

我怎样才能快速找到准确的一行，就像我想找到`123.123.123.123`.

幼稚的逐行搜索似乎太慢了。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-25T03:00:14.330

如果您没有任何其他信息可以继续（例如日期范围，假设文件已排序），那么逐行搜索是您的最佳选择。现在，这并不意味着您需要逐行阅读。此外，向后搜索可能更有效，因为您知道该条目是最近的。

一般方法（用于向后搜索）是这样的：

声明一个缓冲区。您将一次尽可能快地将文件的块读取到此缓冲区中（最好使用可以直接读取而无需任何缓冲/缓存的低级操作系统调用）。

因此，您寻找文件的末尾减去缓冲区的大小并读取那么多字节。

现在您在缓冲区中向前搜索第一个换行符。稍后记住该偏移量，因为它代表部分线。从下一行开始，您向前搜索到缓冲区的末尾以查找您的字符串。如果它必须在某个列中，但其他列可能包含该值，那么您需要进行一些解析。

现在您继续向后搜索您的文件。您寻找您读取的最后一个位置减去块大小*加上您在搜索换行符时找到的偏移量*。现在，你再读一遍。如果您愿意，您可以将该部分行移动到缓冲区的末尾并读取更少的字节，但如果您的块足够大，它不会产生巨大的差异。

然后继续，直到到达文件的开头。当读取的字节数小于块大小时，当然有一种特殊情况（即，您不要忽略第一行）。我假设您不会到达文件的开头，因为很明显您不想搜索整个内容。

所以这就是当你不知道价值在哪里时的方法。如果您确实对排序有一些想法，那么您当然可能想要进行二进制搜索。在这种情况下，您可以使用较小的块大小（至少足以捕获整行）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-25T03:08:45.053

您确实需要在文件中搜索一些规律性并加以利用，除此之外，如果您有更多的处理器，您可以将文件分成多个部分并并行搜索 - 假设 I/O 不会成为瓶颈。

# javascript - Adobe Edge 问题 - 动画显示看起来像打滑痕迹

> ID：12575569
> 
> 赞同：0
> 
> 时间：2012-09-25T02:46:09.567
> 
> 标签：javascript, adobe-edge

刚开始使用 Adob​​e Edge，但对 Flash/AS 非常熟悉。我需要做不基于 Flash 的动画序列，所以试试 Adob​​e Edge。动画本身全部完成，一切正常。但是，当 JS 在站点上加载并查看（至少在 Chrome/FF 中）时，当对象缓出时，它会在其后面创建黑条 - 看起来它正在停止。

当任何东西被移动时，这些都会消失 - 背景、任何 div、任何分层的东西等。可以处理 setInterval 在其顶部闪烁一个透明 div，但似乎有点荒谬的解决方法。有没有其他人遇到过这个？有没有我缺少的设置？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-14T21:03:19.527

经过大量测试等后发现了这一点。基本上，Adobe Edge 的工作方式 - 至少在这一点上 - 如果你将动画放在其他东西之上，背景颜色将通过动画“泄漏”并显示为防滑标记看线。在玩过他们 UI 中的每个设置之后，什么都处理不了。最后的解决方法是在匹配的动画后面放置一个背景图像，这样当它显示出来时就无法检测到。

# javascript - 来自 javascript 的 Google Play 商店的应用内结算

> ID：12575571
> 
> 赞同：2
> 
> 时间：2012-09-25T02:46:18.450
> 
> 标签：javascript, android, in-app-purchase, in-app-billing

如何从我的 javascript 应用程序中进行应用内购买，这些应用程序将捆绑到一个 apk 中？我发现了 google javascript api，但它只允许您验证是否已进行购买，而不是进行实际交易。我找不到任何第三方应用程序将硬件加速画布与 HTML5 应用程序捆绑在一起，并为 android/iOS 应用程序内购买提供插件。在某个地方我可以找到 Google Play 商店的完整 REST api 吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-25T02:50:39.360

Android 应用程序的应用内计费没有 REST API。最好的办法是用 Java 编写代码，并在 HTML 应用程序中使用 JavaScript 钩子在必要时调用它们。使用[WebView.addJavascriptInterface](http://developer.android.com/reference/android/webkit/WebView.html#addJavascriptInterface%28java.lang.Object,%20java.lang.String%29)等

# javascript - 猴子补丁 XMLHTTPRequest.onreadystatechange

> ID：12575572
> 
> 赞同：7
> 
> 时间：2012-09-25T02:46:24.970
> 
> 标签：javascript, ajax, xmlhttprequest, monkeypatching

猴子如何修补`XMLHTTPRequest`'s`onreadystatechange`功能。我正在尝试添加一个函数，当从页面发出的每个 ajax 请求都返回时将调用该函数。

我知道这听起来是个糟糕的主意，但用例却很奇特。我想将某个 SDK 与控制台 (jqconsole) 一起使用，但在控制台中显示 ajax 调用的状态和结果，而无需修改外部 SDK。

我看过[这篇文章](https://stackoverflow.com/questions/3596583/javascript-detect-an-ajax-event)，里面有很多信息，但是没有关于猴子修补回调的内容，这似乎超出了我的 JavaScript 技能。

PS 不能使用 jQuery，因为它只支持从 jQuery 而不是`XMLHTTPRequests`直接从这里进行的 ajax 调用。

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-09-25T08:31:44.400

对于monkey-patch `XMLHttpRequest`，你需要知道一个AJAX请求一般是如何构造的：

1.  构造函数调用
2.  准备请求 ( `setRequestHeader()`, `open()`)
3.  发送请求 ( `.send`)。

## 通用补丁

```
(function(xhr) {
    function banana(xhrInstance) { // Example
        console.log('Monkey RS: ' + xhrInstance.readyState);
    }
    // Capture request before any network activity occurs:
    var send = xhr.send;
    xhr.send = function(data) {
        var rsc = this.onreadystatechange;
        if (rsc) {
            // "onreadystatechange" exists. Monkey-patch it
            this.onreadystatechange = function() {
                banana(this);
                return rsc.apply(this, arguments);
            };
        }
        return send.apply(this, arguments);
    };
})(XMLHttpRequest.prototype); 
```

前面假设`onreadystatechange`已分配给`onreadystatechange`处理程序。为简单起见，我没有包含[其他事件](http://www.w3.org/TR/XMLHttpRequest/#event-handlers)的代码，例如`onload`. 此外，我没有考虑使用`addEventListener`.

之前的补丁适用于所有请求。但是，如果您只想将补丁限制为特定请求怎么办？具有特定 URL 或异步标志和特定请求正文的请求？

## 有条件的猴子补丁

示例：拦截`POST`请求正文中包含“TEST”的所有请求

```
(function(xhr) {
    function banana(xhrInstance) { // Example
        console.log('Monkey RS: ' + xhrInstance.readyState);
    }
    // 
    var open = xhr.open;
    xhr.open = function(method, url, async) {
        // Test if method is POST
        if (/^POST$/i.test(method)) {
            var send = this.send;
            this.send = function(data) {
                // Test if request body contains "TEST"
                if (typeof data === 'string' && data.indexOf('TEST') >= 0) {
                    var rsc = this.onreadystatechange;
                    if (rsc) {
                        // Apply monkey-patch
                        this.onreadystatechange = function() {
                            banana(this);
                            return rsc.apply(this, arguments);
                        };
                    }
                }
                return send.apply(this, arguments);
            };
        }
        return open.apply(this, arguments);
    };
})(XMLHttpRequest.prototype); 
```

使用的主要技术是使用透明重写...

```
var original = xhr.method; 
xhr.method = function(){
    /*...*/;
    return original.apply(this, arguments);
}; 
```

我的示例非常基本，可以扩展以满足您的确切愿望。然而，这取决于你。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-25T04:39:42.233

假设你可以忽略 IE ......

```
//Totally untested code, typed at the SO <textarea>... but the concept *should* work, let me know if it doesn't.
var OldXMLRequest = XMLHttpRequest;

// Create a new instance
function XMLHttpRequest() {
  var ajax = new OldXMLRequest();

  // save old function
  var f = ajax.onreadystatechange;
  ajax.onreadystatechange = function() {
    console.log("Whatever!");
    f(); // Call the old function
  }
  return ajax;
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2017-06-03T14:39:06.493

你可以学习中文写的[Ajax-hook](https://github.com/wendux/Ajax-hook/)！

它是一个高级 js 来启用 Monkey 补丁 XMLHTTPRequest

# jquery - 保存位置的JQuery可拖动图像

> ID：12575573
> 
> 赞同：9
> 
> 时间：2012-09-25T02:46:43.053
> 
> 标签：jquery, css, image, jquery-ui, draggable

好的，它变得很尴尬，已经搜索并尝试了大约 5 个小时，我只是在绕圈子跑......

场景很简单：它是用户个人资料的标题图像，可以将其拖到某个位置，然后将图像的顶部位置保存到数据库中。

多亏了 Beetroot-Beetroot 的“containment: 'parent'”，我才知道这段代码，它实际上会按照我的意愿做出反应！除了一个大问题。图片只是跳到顶部或底部。有没有平滑滚动？如果我将“父级”更改为-“父级”，它会很好地滚动，但是......当然不再存在遏制了。帮助？:D

JS

```
$(function(){
    $(".headerimage").css('cursor','s-resize');
    $(".headerimage").draggable({ containment: 'parent', scroll: false, axis: "y",    stop: function(event, ui) {
            var data = "profileheaderposition="+ui.position.top;
            var destination = "/modules/users/profile/save.php";
            get_data(data, destination, function(test){
                notice(test);
            });
        }
    });                 
}); 
```

所以最后但并非最不重要的 Header 是这样包含的：

```
<div class="<?php if ($user->id == $profileuser->id) echo "changer"; ?> ui-corner-all" id="profileheader" style="overflow: hidden; width: 650px; height: 260px; position:relative;">
<?php if($profile->profileheader){
    $size = getimagesize($profile->profileheader);
?>
<img id="" class="draggable headerimage" style="position: absolute; top: <?php echo $profile->profileheaderposition; ?>px;" src="<?php echo $profile->profileheader; ?>" alt="profileheader" width="650" /> 
```

正如我所说，数小时的谷歌搜索没有给出任何结果 - 如果我不保存结果，它会工作得很好，但是哦，好吧......

- 编辑 -

现在我要大喊大叫了-.-我已经为此设置了赏金以及帮助我​​使用jsfiddle的工具，但我的网页上有一个访客帐户： [http ://www.animize.de](http://www.animize.de)

在那里，您可以使用用户名登录页面：Gast 和 pw gast - 单击名称（gast）的右上角，您将看到配置文件 - 在那里您可以移动标题图片 - 当然它应该表现以另一种方式 - 帮助:(

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-09-27T21:48:20.920

试试[这个小提琴](http://jsfiddle.net/UAgDA/35/)。

我在事件中添加了一个 if 语句，`drag`它检查图像的当前位置，并将当前顶部位置设置为`ui.position.top`如果条件返回 true，则可拖动事件在触及 div 的边界时不会增加或减少顶部位置。这样，您可以保留 div 的位置属性。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-09-28T14:38:30.923

请参阅[**this fiddle**](http://jsfiddle.net/ZkV7Y/16/)了解我的解决方案。我还处理了左右拖动，目前这对您的情况不是必需的，但如果您打算使用大于其父级的图像，将来可能会很有用。在您的情况下，您的图像与其父图像的宽度相同，因此我添加了一个`threshold`参数以允许使用垂直拖动，而不会因左右边界被击中而取消。

`grab`我还添加了一些用于和光标的css `grabbing`，因此要获得类似于拖动 pdf 时的光标效果，不幸的是，在某些浏览器（IE 和我的测试中的 chrome）中，对这种光标的支持有些损坏，但 firefox 显示它们是正确的.

在此处粘贴我的代码以防止将来出现小提琴断开的链接。

HTML：

```
<br><br><br><br><br><br><br>
<div class="ui-widget-content" style="padding:10px;">

<div class="picturecontainer" style="overflow: hidden; position: relative; width: 650px; height: 150px; border: 1px solid #888;">
    <img style="position: absolute;" class="headerimage ui-corner-all" src="http://www.animize.de/modules/users/profile/images/profileheader/header_3722386791348526090.jpg" />
    </div>

</div> 
```

CSS：

```
.headerimage {
    cursor:hand;
    cursor:grab;
    cursor:-moz-grab;
    cursor:-webkit-grab;
}
.grabbing {
  cursor:grabbing !important;
  cursor:-moz-grabbing !important;
  cursor:-webkit-grabbing !important;
} 
```

JAVASCRIPT：

```
var container = $(".picturecontainer");
var childimage = $(".headerimage");

childimage.draggable({  scroll: false, start:function(event,ui) {
                  childimage.addClass('grabbing');
     }, stop: function(event, ui) {
                  childimage.removeClass('grabbing');
     },drag: function(event,ui) {
        //left and right threshold
        //to ease draggin images that have same width as container
        threshold = 20;//pixels
        ltop = childimage.offset().top -1 > container.offset().top;
        lbottom = childimage.offset().top + childimage[0].offsetHeight 
                  <= container.offset().top + container[0].offsetHeight;
        lleft = childimage.offset().left > container.offset().left + threshold;
        lright = childimage.offset().left + childimage[0].offsetWidth <
                container.offset().left + container[0].offsetWidth - threshold;
        if (ltop || lbottom || lleft || lright) {
            $(this).data("draggable").cancel();
            if (ltop) {
                 $(this).offset({ top: $(this).parent().offset().top+1});
            } else if (lbottom) {
                newtop = container.offset().top + container[0].offsetHeight 
                         - childimage[0].offsetHeight;
                $(this).offset({ top: newtop+1});
            } else if (lleft) {
                newleft = container.offset().left;
                $(this).offset({ left: newleft});
            } else if (lright) {                     
                newleft = container.offset().left + container[0].offsetWidth;
                          - childimage[0].offsetWidth;
                $(this).offset({ left: newleft});
            }
         }
     }
}).parent().bind('mouseout',function() {
     childimage.trigger('mouseup');
}); 
```

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-09-25T03:48:25.910

伊万，

很难理解为什么代码应该在命名函数包装器中。除非需要打开/关闭可拖动性，否则`.draggable()`只需要在结构中调用一次`$(function(){...});`。

也很难理解为什么需要将静态数据从 php 写入 javascript。javascript/jQuery 不应该通过查询 DOM 自行发现可拖动图像，即使这样也不清楚为什么这可能是必要的。

我希望看到这样的东西：

```
$(function() {
    $(".headerimage").draggable({
        containment: 'parent',
        scroll: false,
        axis: "y",
        stop: function(event, ui) {
            $.ajax(
                url: "/modules/users/profile/save.php",
                data: "profileheaderposition=" + ui.position.top,
                success: function() {
                    //do something here to indicate that the new position has been successfully saved
                }
            );
        }
    });
}); 
```

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2014-03-14T01:04:27.450

我在我的项目中使用此代码，它工作正常。我使用了 QQping 的解决方案，我只是做了一个小改动，使图像也可以左右移动。我希望它有帮助..

[http://jsfiddle.net/UAgDA/266/](http://jsfiddle.net/UAgDA/266/)

```
//Moving left and right
if(ui.position.left >= 0)
{
    ui.position.left = 0;
}                                     
else if(ui.position.left <= x1 - x2)
{    
    ui.position.left = x1 - x2;
} 
```

干杯

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-09-27T05:06:39.447

我认为您不需要将其包含在内部`parent`，否则您将无法将其向上拖动到`parent`边界之外

或者，jQuery ui在两个坐标内提供了[包容。](http://jqueryui.com/demos/draggable/#option-containment)

试试这个代码，

**HTML**

```
<div class="picturecontainer" style="overflow: hidden; position: relative; width: 650px; height: 150px; border: 1px solid #888;">
    <img class="headerimage" src="http://www.animize.de/modules/users/profile/images/profileheader/header_3722386791348526090.jpg" />  
</div> 
```

**JS**

```
$(function() {
    var img = $(".headerimage");
    img.css('cursor', 's-resize');
    var x1 = img.parent().width() - img.width();
    var y1 = img.parent().height() - img.height();
    $(".headerimage").draggable({
        containment: [x1,y1,0,0],
        scroll: false,
        axis: "y",
        stop: function(event, ui) {

        }
    });
});​ 
```

[演示](http://jsfiddle.net/jashwant/Zf2vk/1/)

# multithreading - 为什么设置线程的终止属性？

> ID：12575590
> 
> 赞同：4
> 
> 时间：2012-09-25T02:49:41.960
> 
> 标签：multithreading, delphi

我有多线程应用程序。

```
procedure TGridUpdater.Execute;
begin
  inherited;
  CodeSite.Send('Thread executed');
  sp := ConnectionFactory.GetConnection.LoadStoredProc('rab_itemData');
  sp.CreateParam('Tahun', ftInteger, sppdInput).Value := _form.tahun;
  sp.Open;
  Synchronize(DoProgress1);
  sp.DataSet.First;
  I := 0;
  CodeSite.Send('Terminated value is ' + BoolToStr(Terminated)); //The terminated property is 'True' here. Why?

  while (not Terminated) and (not sp.DataSet.Eof) do
  begin
    CodeSite.Send('Entering loop');
    Synchronize(DoProgress);
    I := I + 1;
    sp.DataSet.Next;
  end;
  Synchronize(DoProgress2);

end; 
```

运行线程的方法

```
procedure TFRABData.RefreshDataset;
var
  GridUpdater: TGridUpdater;
begin
  GridUpdater := TGridUpdater.Create(True);
  GridUpdater.OwnerForm := Self;
  GridUpdater.Start;
  CodeSite.Send('RefreshDataset executed');
  GridUpdater.Free;
end; 
```

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-09-25T03:07:51.530

启动线程后立即释放线程。你必须让它过自己的生活。因此，要回答您的问题，是线程的析构函数将[`Terminated`](http://docwiki.embarcadero.com/Libraries/en/System.Classes.TThread.Terminated)标志设置为 True。

```
procedure TFRABData.RefreshDataset;
var
  GridUpdater: TGridUpdater;
begin
  GridUpdater := TGridUpdater.Create(True);
  GridUpdater.OwnerForm := Self;
  GridUpdater.Start;
  CodeSite.Send('RefreshDataset executed');
  GridUpdater.Free; // <-- don't do this; let the thread live its own life
end; 
```

# python - String Won't Reset Correctly at the End of Loop - Python

> ID：12575598
> 
> 赞同：0
> 
> 时间：2012-09-25T02:50:58.860
> 
> 标签：python, string, loops

I created a program where you enter in a word, and certain text is added before each vowel in the inputted word. The program will ask the user to play again until a 'n' for no is entered.

However, when a 'y' is entered it keeps playing, but what happens is this:

First time running the program:

```
Enter first syllable: ip
Enter second syllable: *zz
Enter word to translate: gibberish
Your translated word is: gipibbezzerizzish
Would you like to play again(y/n)? y
Enter first syllable: ip
Enter second syllable: *zz
Enter word to translate: gibberish
Your translated word is: gizzibbezzerizzish
Would you like to play again(y/n)? 
```

The first result, "gipibbezzerizzish" is correct. The second time it runs, there is an error, it results "gizzibbezzerizzish" which is incorrect.

At the end of the loop what I did is make final_str = "" so when it starts backup, its empty, but for some reason this doesn't work? What's wrong here?

I'm using Python 3.2.3.

Code:

```
vowels = "aeiou"
playagain = ""
wildcard = '*'
final_str = ""
vowelcount = 0
first_vowel_count = True
second_vowel_count = False

while playagain != "n": ## If playagain is not no, then keep going.
    first_syl = input('Enter first syllable: ')
    second_syl = input('Enter second syllable: ')
    word = input('Enter word to translate: ')
    for ch in word: ## Run loop for all characters in the entered word.
        if ch.lower() not in vowels: ## Checks if ch is vowel or not in word.
            first_vowel_count = True
            vowelcount += 1
        elif wildcard in first_syl and vowelcount <=2: ## Checks for first wildcard.
            final_str += ch + first_syl[1::] ## For first wildcard, remove * and add the vowel (ch) and the first_syl.
            first_vowel_count = False
            second_vowel_count = True
        elif first_vowel_count and vowelcount <= 2: ## If there is no wildcard, but a vowel, run this loop.
            final_str += first_syl       
            first_vowel_count = False
            second_vowel_count = True
        elif wildcard in second_syl: ## For second wildcard, remove * and add the vowel (ch) and the first_syl.
            final_str += ch + second_syl[1::]     
            first_vowel_count = False
            second_vowel_count = True
        elif second_vowel_count: ## If there is no wildcard, but a vowel, run this loop.
            final_str += second_syl
            second_vowel_count == False
        final_str += ch ## Finally, this is the resulting string to be printed.
    if playagain != "n": ## Ask user to play again.
        print("Your translated word is:", final_str) ## Print the word that has just been translated.
        playagain = input("Would you like to play again(y/n)? ") ## Then ask user to play again.
        final_str = "" ## Reset the string if playagain = "y" and start from the top. 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-25T02:56:46.353

There are a bunch of variables that aren't being reset inside your loop: `vowelcount`, `first_vowel_count`, and `second_vowel_count`.

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-25T02:59:07.613

Having that code in an `if` statement at the bottom is unnecessary, you wouldn't be in the while loop if `playagain` were `'n'`.

Anyway, `final_str` definitely gets reset there- but you also need to reset `vowelcount`, `first_vowel_count`, and `second_vowel_count`. You're probably better off just setting those at the beginning of the loop so as to be DRY.

# mysql - MySQL 将 YYYY-MM-DD 转换为 unix 时间戳

> ID：12575599
> 
> 赞同：2
> 
> 时间：2012-09-25T02:51:21.697
> 
> 标签：mysql, datetime, unix-timestamp

我想将 YYYY-MM-DD 列转换为 unix 时间戳。类似于这个问题：[MySQL - Convert MM/DD/YY to Unix timestamp](https://stackoverflow.com/questions/3413559/mysql-convert-mm-dd-yy-to-unix-timestamp)

MySQL 似乎没有将 '2012-05-10' 的值转换为正确的 unixtime。这是失败的建议功能： `SELECT UNIX_TIMESTAMP(CAST(dateid AS DATE)) AS unixtime`

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-25T02:58:56.160

你用的是什么版本`MySQL`？正如 MySQL 5.5.27 在 SQLFiddle 中测试的那样，这两个查询有效

```
SELECT UNIX_TIMESTAMP(CAST('2012-05-10 00:00:00' AS DATETIME)) As UnixTime;
SELECT UNIX_TIMESTAMP(CAST('2012-05-10' AS DATE))  As UnixTime; 
```

# [SQLFiddle 演示](http://sqlfiddle.com/#!2/d41d8/2301)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-25T02:59:00.253

我不确定您到底遇到了什么问题，但以下工作正常：

```
CREATE TABLE ex (dt VARCHAR(20));
INSERT INTO ex SET dt = '2012-05-10';

SELECT
UNIX_TIMESTAMP('2012-05-10') ex1,
UNIX_TIMESTAMP(dt)  ex2,
UNIX_TIMESTAMP(CAST('2012-05-10' AS DATE)) ex3,
UNIX_TIMESTAMP(CAST(dt AS DATE)) ex4
FROM ex; 
```

返回：

```
+------------+------------+------------+------------+
| ex1        | ex2        | ex3        | ex4        |
+------------+------------+------------+------------+
| 1336633200 | 1336633200 | 1336633200 | 1336633200 |
+------------+------------+------------+------------+ 
```

`CAST()`如您所见，如果字符串为`YYYY-MM-DD`or形式，则不需要`YYYY-MM-DD HH:MM:SS`，因为 MySQL 会将此格式的字符串隐式转换为`DATE`s。

见[http://sqlfiddle.com/#!2/1a215/3](http://sqlfiddle.com/#!2/1a215/3)

# html - 悬停时隐藏/显示表格单元格内容

> ID：12575607
> 
> 赞同：0
> 
> 时间：2012-09-25T02:53:22.693
> 
> 标签：html, css, hover, show-hide

我是 Web 开发、HTML 和 CSS 的初学者，所以我的问题可能有点俗气。

我有一个包含两列的表。其中只有一个是标题，其他包含链接。

我想要做的是：当悬停时，表格中的链接会出现；否则，链接将被隐藏。

另外，我想对他们的外表应用一个转换动作......

是的，我在谷歌上搜索了很多教程，但我无法在我的桌子上应用这些教程。

我认为我的表格样式存在一些问题？也许它与其他元素样式不同？

这是我到目前为止所做的。

**HTML 代码：**

```
<div id='historypanel'>
    <span class="truetables">
        <TABLE border=0><TR valign="top" class="panelfather">
            <TR>
                <TD width="130" class="linkcell">
                    <a href="link/" class="panellink">this is link</a>
                </TD><span id="options">
                <TD width="480" class="editcell">
                    <a href="edit.php" class="edit">edit &nbsp;</a>
                    <a href="drop.php" class="remove">drop &nbsp;</a>
                    <a href="hide.php" class="hide">hide permanently &nbsp;</a>
                    <a href="olden.php" class="old">old &nbsp;</a>
                    <a href="analytics.php" class="view">view analytics</a>
                </TD>
            </TR>
        </TABLE>
    </span>
</div> 
```

**CSS：**

```
#historypanel>.truetables>table {
    margin-bottom: 5;
    -webkit-box-shadow: 0px 3px 3px 2px rgba(0,0,0,0.2);
    box-shadow: 0px 3px 3px 2px rgba(0,0,0,0.2);
}

#historypanel>.truetables>table:hover {
    background: #18323c;
    -webkit-box-shadow: 2px 3px 1px rgba(0,0,0,0.1);
    box-shadow: 2px 3px 1px rgba(0,0,0,0.1);
}

#historypanel a:link,a:visited,a:active {
    color: #112229;text-decoration: normal;
}

.panellink:hover {color: #5f9998 !important;}

.edit:hover {color: #528da4 !important;}

.remove:hover {color: #fc4c6d !important;}

.hide:hover {color: #75b096 !important;}

.old:hover {color: #ab856e !important;}

.view:hover {color: #dadb82 !important;}

a:link {text-decoration: none !important;}

.panellink {font-size: 20;}

.edit,.remove,.hide,.old,.view {font-size: 14px;}

.editcell,.removecell,.hidecell,.oldcell,.viewcell{
    padding-top:10
}

.editcell{text-align:right;} 
```

你也可以在这里看到它：http: [//tinkerbin.com/xdHoEXgW](http://tinkerbin.com/xdHoEXgW)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-25T03:13:24.973

很少
的观察 A. 请正确遵循 HTML 表格结构。即表可以有“TR”，“TR”有“TD”。您不能在两者之间插入“跨度”。虽然它不会引发任何问题.. 它只是不好的编码

湾。对于转换，您可能必须使用 javascript（最好是 Jquery）。

我已经修改了你的 html [http://tinkerbin.com/9vkBMX8a](http://tinkerbin.com/9vkBMX8a)

您需要添加这些行

```
.editcell{text-align:right;display: none;}
#historypanel:hover .editcell{display: inline;} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-25T03:21:28.160

所有 CSS 答案：

```
.hidden_rows {
     display:inline-block;
     background: #18323c;
    -webkit-box-shadow: 2px 3px 1px rgba(0,0,0,0.1);
     box-shadow: 2px 3px 1px rgba(0,0,0,0.1);
     transition:all 1s ease-out;
     -o-transition:all 1s ease-out;
     -moz-transition:all 1s ease-out;
     -webkit-transition:all 1s ease-out;}

.hover_me:hover .hidden_rows {
      display:block;}` 
```

# ruby-on-rails - omn iauth-facebook 和使用 rspec 进行测试

> ID：12575610
> 
> 赞同：2
> 
> 时间：2012-09-25T02:54:18.743
> 
> 标签：ruby-on-rails, rspec, omniauth

我正在尝试测试omniauth。我已经放入 config/environments/test.rb

```
OmniAuth.config.test_mode = true 
```

在我的 spec_helper.rb

```
OmniAuth.config.add_mock(:facebook,
                             { :provider => 'facebook',
                               :uid => '1234567',
                               :info => { :first_name => 'Jonathan', :name=> 'Jonathan', :email => 'jon@jak.com', :image => 'http://graph.facebook.com/1234567/picture?type=square'},
                               :credentials => {
                                 :expires_at => 1351270850,
                                 :token=> 'AAADzk0b791YBAHCNhBI3n6ScmWvuXTY4yIUqXr9WiZCg1R808RYzaHxsHnrbn62IwrIgZCfSBZAVIP6ptF41nm8YtRtZCeBbxbbz1mF8RQZDZD'
                                } }) 
```

然后在我的请求控制器中：

```
it "testing omniauth hash" do
  visit '/auth/facebook'
  request.env["omniauth.auth"][:uid].should == '1234567'
end 
```

并得到：

```
Failures:

  1) Login logins with the OmniAuth auth hash
     Failure/Error: request.env["omniauth.auth"][:uid].should == '1234567'
     NoMethodError:
       undefined method `env' for nil:NilClass
     # ./spec/requests/login_spec.rb:38:in `block (2 levels) in <top (required)>'

Finished in 2.4 seconds
9 examples, 1 failure 
```

知道发生了什么吗？提前谢谢

**编辑 1** ![在此处输入图像描述](../Images/43ce4cdf64e6b1494889e3f32fc7dc0f.png)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-25T03:08:52.557

编辑：实际上，我重现了错误，问题似乎是请求对象没有被实例化，除非您使用 [http_verb] [url] 发出本机请求。因此，如果您使用`get '/auth/facebook'`而不是`visit '/auth/facebook'`.

# objective-c - iOS - 核心数据模型与邮件框架冲突？

> ID：12575611
> 
> 赞同：8
> 
> 时间：2012-09-25T02:54:28.533
> 
> 标签：objective-c, ios, xcode, nsmanagedobject, messageui

我有一个核心数据对象`Account`，表示为的子类`NSManagedObject`：

```
@interface Account : NSManagedObject 
```

我的整个应用程序一直开发得很好，但是，当我添加了`MessageUI.framework`这样我可以获得一个撰写电子邮件视图控制器时，一切都变得松散了。该应用程序可以正常链接和编译，并且运行良好。直到，也就是说，我开始与我以前工作的`Account`对象进行交互。然后，我开始得到这些：

```
*** Terminating app due to uncaught exception 'NSInternalInconsistencyException',
reason: '"Account" is not a subclass of NSManagedObject.'
*** First throw call stack:
(0x202b012 ... 0x2385)
libc++abi.dylib: terminate called throwing an exception 
```

这个特殊的一个是由以下原因引起的：

```
// we need to insert a new account
Account *newAccount = [NSEntityDescription
                            insertNewObjectForEntityForName:[Account entityName] 
                            inManagedObjectContext:self.managedObjectContext]; 
```

现在，我猜测有一些类`MessageUI.framework`导致了冲突，但我有几个问题：

1.  该应用程序编译并运行良好，没有编译时名称冲突
2.  框架中的其他组件似乎是前缀命名空间（即：）`MFMailComposeViewController`，那么理论上的帐户不应该是`MFAccount`吗？
3.  我什至没有做 an`#import <MessageUI/MessageUI.h>`或稍微紧一点`#import <MessageUI/MFMailComposeViewController.h>`的 ，我检查了后者并没有看到 的定义`Account`，所以我不确定为什么甚至会加载可能的冲突。
4.  可以肯定的是，我重新生成了我的核心数据类，并重置了所有模拟器设置，仍然没有骰子。
5.  从项目中删除框架并构建设置会立即解决问题。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-09-25T03:51:42.470

我遇到过这种情况，这是确切的框架（该类被称为`Broadcaster`）。在这种情况下，私有`Message`框架由 链接`MessageUI`，并且该框架提供`Account`实现。

您可以通过创建一个新项目来验证 MessageUI 框架是否加载了一个`Account`类，并在应用程序委托的`application:didFinishLaunchingWithOptions:`方法中添加以下代码：

```
NSString *account = @"Account";
Class accountClass = NSClassFromString(account);
NSLog(@"accountClass = %@",accountClass); 
```

在一个新项目上，这将打印`accountClass = (null)`，但在添加 MessageUI 后它将打印`accountClass = Account`。

此外，如果您`class-dump`在私有`Message`框架上使用，您将看到`Account`.

现在，您在帖子中列出了 5 个问题作为问题，我将尝试解决它们

1.  我对使用框架的链接时过程了解不多，可以肯定地说，但我怀疑`Message`框架链接较弱，因此不会在链接时导致重复符号错误。
2.  面向公众的名称正确，但一些未记录的名称却没有。此外，冲突的类在私有`Message`框架中。
3.  那根本不重要。编译器将使用`#import`，但在运行时，所有类都与您的应用程序一起加载，并且在运行时没有“可见性”或类似的东西。
4.  不适用
5.  与其他证据一致

就行动方案而言，我只是将我的模型类重命名为具有前缀。我不知道任何其他解决方案。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-25T03:49:22.087

消息框架可能根本不是问题。像这样的事情可能会在核心数据中意外发生，例如当您以某种方式更改模型时。尝试清理构建，删除您的模拟器/硬件安装的测试应用程序，然后再次运行。我认为 geraldWilliam 建议重命名它的原因是为了解决这个问题，但可能没有必要重命名任何东西

查看此线程：[找不到实体的 NSManagedObjectModel](https://stackoverflow.com/questions/6039660/could-not-locate-nsmanagedobjectmodel-for-entity)

# android - 试图弄清楚 Android 内部数据库的基础知识

> ID：12575614
> 
> 赞同：2
> 
> 时间：2012-09-25T02:54:46.140
> 
> 标签：android, database, internal

一般来说，我是应用程序开发、Android 和内部数据库的新手。我需要编写一个包含字符串的简单数据库，并在屏幕上按下按钮来显示字符串以进行演示。演示中最重要的部分是内部数据库。我似乎找不到关于如何为 Android 应用编写教程的好教程。任何人都可以帮忙吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-25T03:28:34.937

您将需要一个带有数据库助手的数据库适配器。适配器将处理您的数据访问，助手将处理打开、创建和升级。这是代码项目的一篇文章：

[代码项目文章](http://www.codeproject.com/Articles/119293/Using-SQLite-Database-with-Android)

下面是一个使用数据库适配器和助手的例子：

```
public void loadList() {
    String title = "";
    arrayAdapter.clear();
    DaysDatabaseAdapter dbAdapter = new DaysDatabaseAdapter(getApplicationContext());
    dbAdapter.open();
    Cursor c = dbAdapter.getAllRows();
    if (c.moveToFirst()) {
        do {
            title = c.getString(DaysDatabaseAdapter.POS_TITLE);
            arrayAdapter.add(title);
        } while (c.moveToNext());
    }
    c.close();
    dbAdapter.close();
} 
```

下面是我的一个项目中的一个数据库适配器。它是旧的，我现在有更好的技术，但它有效。

公共类 DaysDatabaseAdapter {

// 全局变量

```
public static final String TAG = "DaysDBAdapter";

public static final String COLUMN_ROWID = "_id";
public static final String COLUMN_INUSE = "inuse";
public static final String COLUMN_TITLE = "title";
public static final String COLUMN_YEAR = "year";
public static final String COLUMN_MONTH = "month";
public static final String COLUMN_DAY = "day";
public static final String[] COLUMN_NAMES = {
    COLUMN_ROWID, COLUMN_INUSE, COLUMN_TITLE, COLUMN_YEAR, COLUMN_MONTH, COLUMN_DAY
};
public static final String[] COLUMN_NAMES_NO_ROWID = {
    COLUMN_INUSE, COLUMN_TITLE, COLUMN_YEAR, COLUMN_MONTH, COLUMN_DAY
};

public static final int POS_ROWID = 0;
public static final int POS_INUSE = 1;
public static final int POS_TITLE = 2;
public static final int POS_YEAR = 3;
public static final int POS_MONTH = 4;
public static final int POS_DAY = 5;

private static final String DATABASE_NAME = "daystildayssince";
private static final String DATABASE_TABLE = "days";
private static final int DATABASE_VERSION = 1;

private static final String DATABASE_CREATE = "create table " + DATABASE_TABLE
        + " (" 
        + COLUMN_ROWID + " integer primary key autoincrement, "
        + COLUMN_INUSE + " integer not null, "
        + COLUMN_TITLE + " text not null, "
        + COLUMN_YEAR + " integer not null, "
        + COLUMN_MONTH + " integer not null, "
        + COLUMN_DAY + " integer not null"
        + ");";

private DatabaseHelper DBHelper;
private SQLiteDatabase db;

// ******************* Functions ***************************

// Constructor

public DaysDatabaseAdapter(Context ctx) {
    MyLog.d(TAG, "Adapter Constructor entered");
    DBHelper = new DatabaseHelper(ctx);
}

// Open the database

public DaysDatabaseAdapter open() throws SQLException {
    MyLog.d(TAG, "open database");
    db = DBHelper.getWritableDatabase();
    return this;
}

// Close the database

public void close() {
    MyLog.d(TAG, "close database");
    DBHelper.close();
}

// Insert row

public long insertRow(int inuse, String title, int year, int month, int day) {
    MyLog.d(TAG, "insertRow");
    initialValues.put(COLUMN_INUSE, inuse);
    initialValues.put(COLUMN_TITLE, title);
    initialValues.put(COLUMN_YEAR, year);
    initialValues.put(COLUMN_MONTH, month);
    initialValues.put(COLUMN_DAY, day);
    return db.insert(DATABASE_TABLE, null, initialValues);
}

// Delete row using COLUMN_ROWID

public boolean deleteRow(long rowid) {
    MyLog.d(TAG, "delete row " + Long.toString(rowid));
    return db.delete(DATABASE_TABLE, COLUMN_ROWID + " = " + Long.toString(rowid), null) > 0;
}

// Get all rows

public Cursor getAllRows() {
    MyLog.d(TAG, "getAllRows");
    return db.query(DATABASE_TABLE, COLUMN_NAMES, null, null, null, null, null);
}

// Get specific row using COLUMN_ROWID (primary key)

public Cursor getRowByKey(long rowid) throws SQLException {
    MyLog.d(TAG, "getRowByKey");
    Cursor mCursor = db.query(true, DATABASE_TABLE, COLUMN_NAMES, COLUMN_ROWID + " = " + Long.toString(rowid), null,
            null, null, null, null);
    if (mCursor != null) {
        mCursor.moveToFirst();
    }
    return mCursor;
}

// Get all rows that match COLUMN_INUSE (the Widget AppWidgetId used for the match.)

public Cursor getInuseMatches(int appWidgetId) throws SQLException {
    MyLog.d(TAG, "getInuseMatches");
    Cursor mCursor = db.query(DATABASE_TABLE,
            COLUMN_NAMES, COLUMN_INUSE + " = " + Integer.toString(appWidgetId),
            null, null, null, null, null);
    if (mCursor != null) {
        mCursor.moveToFirst();
    }
    return mCursor;
}

// Get row(s) that match title

public Cursor getTitleMatches(String title) throws SQLException {
    MyLog.d(TAG, "TitleMatches");
    String where[] = {title};
    Cursor mCursor = db.query(DATABASE_TABLE,
            COLUMN_NAMES, COLUMN_TITLE + " = ?",
            where, null, null, null);
    if (mCursor != null) {
        mCursor.moveToFirst();
    }
    return mCursor;
}

// Turn off COLUMN_INUSE in matching rows

public boolean setUnused(int inuse) {
    MyLog.d(TAG, "Adapter setUnused");
    ContentValues contentValues = new ContentValues();
    contentValues.put(COLUMN_INUSE, 0);
    return db.update(DATABASE_TABLE, contentValues, COLUMN_INUSE + " = " + Integer.toString(inuse), null) > 0;
}

// Turn off COLUMN_INUSE in all rows

public boolean setAllUnused() {
    MyLog.d(TAG, "Adapter setAllUnused");
    ContentValues contentValues = new ContentValues();
    contentValues.put(COLUMN_INUSE, 0);
    return db.update(DATABASE_TABLE, contentValues, null, null) > 0;
}

// Set COLUMN_INUSE to Widget id using COLUMN_ROWID (primary key)

public boolean setInuse(long rowid, int inuse) {
    MyLog.d(TAG, "setInuse (" + Long.toString(rowid) + ", " + Integer.toString(inuse) + ")");
    ContentValues contentValues = new ContentValues();
    contentValues.put(COLUMN_INUSE, inuse);
    return db.update(DATABASE_TABLE, contentValues, COLUMN_ROWID + " = " + Long.toString(rowid), null) > 0;
}

// ***************** inline classes ***********************

// Database Helper Class

private static class DatabaseHelper extends SQLiteOpenHelper {

    public static final String TAG = "DaysDBHelper";

    DatabaseHelper(Context context) {
        super(context, DATABASE_NAME, null, DATABASE_VERSION);
        MyLog.d(TAG, "Constructor");
    }

    @Override
    public void onCreate(SQLiteDatabase db) {
        MyLog.d(TAG, "Helper onCreate entered");
        db.execSQL(DATABASE_CREATE);
    }

    @Override
    public void onUpgrade(SQLiteDatabase db, int oldVersion, int newVersion) {
        MyLog.w(TAG, "Upgrading database from version " + oldVersion + " to "
                + newVersion + ", which will destroy all old data");
        db.execSQL("DROP TABLE IF EXISTS " + DATABASE_TABLE);
        onCreate(db);
    }
} 
```

}

# php - 表单验证未运行

> ID：12575617
> 
> 赞同：-2
> 
> 时间：2012-09-25T02:55:28.903
> 
> 标签：php, codeigniter, validation

我已经阅读了所有其他问题，包括谷歌上的所有内容。这与我用于注册的相同方法之间没有明显区别。这是一个非常基本的概念，不想工作。

转储 $_POST 会显示正确的空字符串，因此某处出现了其他问题。

**控制器**

```
public function details(){
    $this->load->library('form_validation');
    //$this->form_validation->set_message('current-password', 'Incorrect password');
    $this->form_validation->set_rules('current-password', 'Password', 'required');
    $this->load->view('details', $data);
} 
```

**看法**

```
<?php echo validation_errors(); ?>
<?php echo form_open('user/details'); ?>
    <input type="password" name="current-password" id="current-password" value=""/>
    <input type="submit" class="submit-save" value="save"/>
</form> 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-25T03:05:34.150

您忘记实际运行表单验证：

```
$this->form_validation->run() 
```

见这里：[http ://codeigniter.com/user_guide/libraries/form_validation.html#tutorial](http://codeigniter.com/user_guide/libraries/form_validation.html#tutorial)

# neo4j - Neo4j：REST API Cypher 查询以查找两个节点之间的关系

> ID：12575622
> 
> 赞同：2
> 
> 时间：2012-09-25T02:56:12.497
> 
> 标签：neo4j, graph-databases, cypher, spring-data-neo4j

我是 Neo4j 的新手，正在使用 REST API 创建节点和关系。我有两个节点 NA 和 NB，它们通过关系 RC 连接。'NA - RC - NB'。在创建节点和关系之前，我会检查节点和它们之间的关系是否不存在。我想出了如何检查一个节点是否存在并且正在努力如何检查两个节点之间的关系是否存在。我想出了这个 Cypher 查询。

```
"start x  = node(*), n = node(*) 
match x-[r]->n 
where (x.name? = {from} and type(r) = {rtype} and n.name? = {to}) 
return ID(r), TYPE(r)" 
```

节点具有属性“名称”。执行此查询时，我得到空的“数据：[]”。

有什么建议么？我尝试查看 Neo4j 文档和一些教程，但不太明白这一点。

TIA

这是java代码：

```
/** Check if a relationship exists between two nodes */
public boolean relationshipExists(String from /** node name */
, String to /** node name */
, String type) {
    boolean exists = false;

    /** check if relationship exists */
    String url = "http://localhost:7474/db/data/cypher";
    JSONObject jobject = new JSONObject();
    try {
        Map<String, String> params = new HashMap<String, String>();
        params.put("from", from);
        params.put("rtype", type);
        params.put("to", to);
        String query = "start x  = node(*), n = node(*) match x-[r]->n where (x.name? = {from} and type(r) = {rtype} and n.name? = {to}) return ID(r), TYPE(r)";
        jobject.put("query", query);
        jobject.put("params", params);
    } catch (JSONException e) {
        logger.error("Error", e);
    }

    String response = sendQuery(url, jobject.toString());

    try {
        jobject = new JSONObject(response);
        JSONArray data = (JSONArray) jobject.get("data");
        JSONArray next = null;
        for (int index = 0; index < data.length(); index++) {
            next = data.getJSONArray(index);
            if (!next.isNull(1) && next.getString(1).equalsIgnoreCase(type)) {
                exists = (next.getInt(0) > -1) ? true : false;
            }
        }
    } catch (JSONException e) {
        logger.error("Error", e);
    }

    return exists;
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-25T04:15:52.283

类型参数被列为`{type}`，但`"rtype"`在参数映射中定义。这能为你解决吗？您可以尝试不带参数的查询（只需将它们硬编码），看看它是否有效。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-27T08:29:09.807

也许您可以使用 RELATE 命令使其有所不同：http: [//docs.neo4j.org/chunked/1.8.M03/query-relate.html](http://docs.neo4j.org/chunked/1.8.M03/query-relate.html)

这样就不需要检查关系是否已经存在。简单地说，如果没有，那么它会创建一个。

# javascript - 处理会话 WebAPI/HTML5 应用程序

> ID：12575624
> 
> 赞同：0
> 
> 时间：2012-09-25T02:56:15.350
> 
> 标签：javascript, session, asp.net-web-api

我正在开发一个 Web 应用程序，它有一个基于 HTML5 和 Javascript 的前端，而后端是用 ASP.NET WebAPI 开发的。这两个层使用 Ajax 调用和 JSON 相互通信。

由于前端和后端是以完全断开的方式开发的，我想知道是否有任何特定的最佳实践来处理会话/用户状态？这与 ASP.NET 应用程序中的会话处理有何不同？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-25T03:33:41.587

我认为这也与身份验证有很大关系。看看我对以下问题的回答。它描述了一种使用完整的 JS 前端管理身份验证的方法。

[BoilerplateJS：处理授权和身份验证的推荐方式](https://stackoverflow.com/questions/12545476/boilerplatejs-recommended-way-to-handle-authorization-and-authentication)

在会话上，与 ASP.NET 应用程序没有太大区别。在 ASP.NET AJAX 应用程序中，在运行时您在浏览器上拥有的只是普通的 JS 和 HTML。唯一的区别是大部分 HTML 是由 ASP.NET 中的服务器处理呈现的，而在纯 JS 客户端模型中，呈现发生在客户端。

# database - 缓存还是存储在数据库中？

> ID：12575626
> 
> 赞同：0
> 
> 时间：2012-09-25T02:56:34.623
> 
> 标签：database, api, caching, gmail, memcached

我正在使用 gmails imap API 作为后端的网络邮件客户端。如果我想在收件箱中维护用户的电子邮件，我最好使用 memcache 之类的东西来存储从 API 调用收到的数据？或者将它放在数据库中以便以后调用会更好吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-25T03:03:44.417

两个都。从 api 获取结果集时，将电子邮件存储在 db 中。也将它保存在内存缓存中。如果没有任何变化，则将其从缓存中拉出，寿命很短。如果缓存陈旧，则每隔一段时间从数据库刷新一次。检查 api 时，如果发现缓存版本有差异，则刷新它，将结果保存到 db，然后将新数据添加到缓存中。

这应该会改善用户体验并减少 api 调用和数据库访问。

请记住：包括数据库在内的所有内容都只是另一个缓存层——具有不同的访问特性和性能权衡。

# mysql - 从触发器调用的存储过程中动态语句的解决方法

> ID：12575631
> 
> 赞同：4
> 
> 时间：2012-09-25T02:56:53.657
> 
> 标签：mysql, sql, stored-procedures, triggers

Mysql`PREPARE`和`EXECUTE`statements 不能在被触发器调用的存储过程中使用。结果将是`Error Code: 1336\. Dynamic SQL is not allowed in stored function or trigger`。

有谁知道解决这个问题的合理方法？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-25T05:26:27.520

您不能在 a中运行`PREPARE`/ ，但可以从 a中运行（如果您正在运行 MySQL 5.5 或更高版本）。`EXECUTE``TRIGGER``EVENT`

这是从`PREPARE`/运行的示例：`EXECUTE``EVENT`

```
DROP TABLE IF EXISTS tbl1;
DROP TABLE IF EXISTS tbl2;
DROP TABLE IF EXISTS cmds;
DROP PROCEDURE IF EXISTS proc;
DROP TRIGGER IF EXISTS trig;

CREATE TABLE tbl1 (i INT, v VARCHAR(255));
CREATE TABLE tbl2 (i INT, v VARCHAR(255));

CREATE TABLE cmds (
    id INT UNSIGNED NOT NULL AUTO_INCREMENT,
    done BOOL NOT NULL DEFAULT FALSE,
    cmd TEXT,
    PRIMARY KEY (id),
    INDEX (done, id)
);

DELIMITER //

CREATE PROCEDURE proc()
NOT DETERMINISTIC
MODIFIES SQL DATA
proc: BEGIN
    DECLARE b_not_found     BOOL DEFAULT FALSE;
    DECLARE i_id            INT UNSIGNED;
    DECLARE t_cmd           TEXT;
    DECLARE v_lock_name     VARCHAR(255) DEFAULT 'proc_lock';

    DECLARE cur CURSOR FOR
        SELECT id, cmd FROM cmds WHERE NOT done ORDER BY id;

    DECLARE CONTINUE HANDLER FOR NOT FOUND SET b_not_found = TRUE;

    IF (NOT GET_LOCK(v_lock_name, 0)) THEN
        LEAVE proc;
    END IF;

    OPEN cur;

    loop1: LOOP
        FETCH cur INTO i_id, t_cmd;
        IF b_not_found THEN
            LEAVE loop1;
        END IF;

        SET @cmd = t_cmd;

        PREPARE stmt FROM @cmd;
        EXECUTE stmt;
        DROP PREPARE stmt;

        UPDATE cmds SET done = TRUE WHERE id = i_id;
    END LOOP;

    CLOSE cur;

    DO RELEASE_LOCK(v_lock_name);
END;
//

CREATE TRIGGER trig
    BEFORE INSERT ON tbl1
    FOR EACH ROW
BEGIN
    INSERT INTO cmds SET cmd = 
        CONCAT("INSERT INTO tbl2 SET i = ", -NEW.i, ", v = ", QUOTE(NEW.v));
END;
//

DROP EVENT IF EXISTS evnt //

CREATE EVENT evnt
ON SCHEDULE 
EVERY 1 SECOND
DO
BEGIN
    CALL proc();
END;
//

DELIMITER ;

SET GLOBAL event_scheduler = 1; 
```

然后运行这个：

```
INSERT INTO tbl1 VALUES (UNIX_TIMESTAMP(), 'ex 1');
DO SLEEP(2);
INSERT INTO tbl1 VALUES (UNIX_TIMESTAMP(), 'ex 2');
DO SLEEP(1);
SELECT * FROM tbl2; 
```

将产生这个输出：

```
+-------------+------+
| i           | v    |
+-------------+------+
| -1348550619 | ex 1 |
| -1348550621 | ex 2 |
+-------------+------+
2 rows in set (0.00 sec) 
```

如果您不想使用`EVENT`，或者等待一秒钟左右让它触发，您可以`CALL proc()`在每个会导致触发的命令之后添加 a `TRIGGER`。

# ios6 - ALAssetsLibraryChangedNotification 在 iOS6 中保存我的应用程序

> ID：12575635
> 
> 赞同：0
> 
> 时间：2012-09-25T02:57:36.827
> 
> 标签：ios6

在我的应用程序中，我使用 ALAssetsLibraryChangedNotification 来更新我自己的相册，但在 iOS6 中，当我删除一些照片，然后回到我的应用程序时，它会保留。

有人知道为什么吗？

非常感谢您。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-27T03:49:16.213

收到此通知后，您是否在 uikit 中执行任何操作？如果是这种情况，请使用以下方法在主线程上执行这些操作：

```
dispatch_async(dispatch_get_main_queue(), ^{
    // do uikit stuff
}); 
```

这可能是挂起的根源。这里有同样的问题。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-02T16:14:16.540

“它持有”是什么意思？在我的机器上，没有收到 ALAssetsLibraryChangedNotification。如果这是你的意思，我同意，这是一个明显的错误。显然没有内置的可靠方法来检测照片库是否已更改。

# mysql - MyISAM vs InnoDB 在一个非常大的表中

> ID：12575646
> 
> 赞同：2
> 
> 时间：2012-09-25T02:59:49.977
> 
> 标签：mysql, database, relational-database, innodb, myisam

我有一张非常简单的桌子

```
CREATE TABLE IF NOT EXISTS `largecache` (
  `id` int(10) unsigned NOT NULL AUTO_INCREMENT,
  `tooltip` varchar(255) NOT NULL,
  `name` varchar(100) NOT NULL,
  `attributes` text NOT NULL,
  PRIMARY KEY (`id`),
  UNIQUE KEY `tooltip` (`tooltip`)
) ENGINE=InnoDB 
```

大约有 800 万个条目几乎完全用于读取。我正在努力确保尽快访问数据。我目前正在使用 InnoDB，是否值得切换到 MyISAM？我唯一关心的是读取性能。还有任何其他我可以用来加速的建议，因为数据库读取几乎是我应用程序中唯一的瓶颈。

我正在使用 MySQL 客户端版本：5.1.47

谢谢。

[编辑：更多详细信息] 我正在使用 php，并且正在根据工具提示字段的完全匹配进行查询。它托管在具有 1 gig ram 的共享 VPS 上，我可以尝试对 mysql 进行任何调整，但我知道 mysql 调整是一个非常复杂的问题。

示例查询：

```
select * from largecache where `tooltip` = "Cm8IuIyq9QMSBwgEFS0iGWAd30SUNR2EHJ0nHYYCY-odxZ6okR0pEnPgHWzQbvIiCwgBFXZCAwAYCCAiMAk4_gNAAEgPUBBg_gNqJQoMCAAQvKHZ5oCAgIA6EhUIrcC1xggSBwgEFUn1i18wCTgAQAEY2ojJgQxQAlgA" 
```

我确实安装了 APC，但没有 memcached

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-09-25T03:06:54.860

最好有您所做的确切查询。但是根据您在此处发布的内容，

您是否打算进行任何全文搜索（阅读 myISAM）？由于 innodb 执行行级锁定，而不是 myISAM 执行表级锁定，因此 innodb 适合您的要求。使用 innodb 引擎尝试以下操作-

1.  `tooltip`在字段上放置索引。
2.  尝试从 innodb 配置中[禁用事务管理。](https://stackoverflow.com/questions/7609867/can-i-turn-transactions-off-in-mysql-innodb)尽管这更多地用于写入而不是读取。
3.  尝试[增加 innodb 的缓存大小](http://www.mysqlperformanceblog.com/2007/11/03/choosing-innodb_buffer_pool_size/)。所有这些数据库引擎都是内存的吸盘，就像向它们扔更多内存一样简单，突然它们表现得很好。
4.  最后，我不能不提[memcached](http://memcached.org/)就结束这篇文章。这是一个分布式缓存管理模块，它与 mysql 完美集成。这可以显着提高您的读取操作。

在适当的地方提供链接。

为了完整起见检查这个 -[为什么在 MySIAM 上使用 InnoDB](https://stackoverflow.com/questions/4246863/why-use-innodb-over-mysiam/4246897#4246897)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-25T03:08:35.320

使用 5.1x 中的默认 innodb，所有条件相同，如果仅基于有限的细节进行适当调整，您可能会从 myisam 获得一点性能提升。

我的建议是转到 5.5 和 innodb。

实际上，我们需要查看您的一些查询以了解您如何访问它。你有很多 count(*) 吗？

此外，如果您要处理数百万行，则 1G 的 RAM 可能会有点紧张——假设这不是您拥有的唯一表。无论您选择哪种表类型，这可能是您最大的问题。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-12-14T03:12:35.050

似乎它更多的是在 MyISAM 方面。作为对“我可以用来加快速度的任何其他建议”的回应，您可以实施全文搜索。

# java - 如何使用 ParameterNameAware

> ID：12575651
> 
> 赞同：1
> 
> 时间：2012-09-25T03:00:18.557
> 
> 标签：java, parameters, struts2

我正在学习 S2 并正在开发一个应用程序，现在我想在我的操作类中使用 ParameterNameAware，但在此之前我只想向自己澄清一些问题。请帮我...

1.  ParameterNameAware 的工作原理（有基础知识但需要解释）
2.  多久接受一次参数名称被调用
3.  当我执行应用程序并尝试从 AcceptableParameterName 方法打印参数（字符串）时，它返回的不仅仅是输入参数。它们是什么以及这种方法实际上提供了什么。
4.  避免不可接受的参数的最佳方法是什么（除了 ParameterNameAware）。

如果这些问题中的任何一个没有意义，请忽略。

更多的解释将不胜感激。提前致谢 ：-）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-25T03:23:50.467

好吧，这里有一些输入可以使您的观点更加清晰。

关于这个接口的整个想法是维护一个有效参数名称的列表，并通过拒绝不在此列表中的任何请求参数来保存。

如果您希望您的操作仅接受某些值集，您只需`ParameterNameAware`在您的操作中实现接口以将消息传递给底层 S2 框架，您希望仅为您的操作类接受某些参数集。

`Parameters Interceptor`从 A 获取所有参数`ctionContext.getParameters()`并通过调用将它们设置在值堆栈上`ValueStack.setValue(String, Object)`。 `ParameterNameAware`与`ParametersInterceptor.`在你的动作类中设置参数一起工作时，如果你的动作类已经实现了接口，拦截器检查你的动作类中是否允许该参数，并将仅设置允许的参数。

处理参数的黑名单或白名单的其他方法是将列表`acceptParamNames`或`excludeParams`作为参数传递给您的`ParametersInterceptor`.

# repository - 领域驱动设计、存储库和混合实体

> ID：12575653
> 
> 赞同：6
> 
> 时间：2012-09-25T03:01:07.597
> 
> 标签：repository, domain-driven-design

如果存储库在构建过程中相互通信，是否违反了任何领域驱动的设计原则？

例如，用户地址存储库与城市/地区/国家存储库对话以获取数据？

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2012-09-25T06:25:49.163

我认为它违反了领域驱动设计，存储库不应相互引用。此外，您不应在存储库与数据库表之间进行 1 : 1 映射。

这是 和 的`Aggregate`概念`AggregateRoot`。例如，假设数据库中有 2 个表：

```
Order
OrderLine 
```

对于关系 1:n，(Order, OrderLine) 被定义为一个聚合，因为没有 Order，OrderLine 就不能单独存在。在这种情况下，Order 是这个聚合的根。

有了这个，而不是创建两个存储库：

```
OrderRepository
OrderLineRepository 
```

你应该只有一个`OrderRepository`来处理整个聚合，使用级联加载、插入和删除`OrderLine`

因此，在您的情况下，应该考虑您是否存在地址/城市/地区/国家存储库。

希望这有帮助

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-26T11:58:41.970

有几种方法可以解决您的问题：

*   保持 2 个聚合根之间的紧密关系，并在为第一个根补水时系统地为第二个根的整个聚合补水。这要求第一个存储库与第二个存储库对话，IMO 不会违反任何 DDD 原则，但在性能方面可能会出现问题。

*   将两个根松散地连接在一起。这基本上意味着指向被引用的根的 ID 而不是完整的实例。客户端代码或根本身（尽管有些人会说后者是不好的做法）然后将通过调用其存储库从其 ID 重新水化引用的根。

*   意识到诸如 City、Region 或 Country 之类的对象实际上是（不可变的）值对象，不需要 ID，并且可以由任何聚合根或实体直接引用，而不会产生进一步的后果。这也意味着这些对象没有存储库。

在选项 1 和 2 之间进行选择只是一个技术问题，只会影响性能和开发人员的舒适度。选项 3 更像是一个可能对业务产生影响的领域选择。用户可以创建、修改和删除城市、地区和国家大域实体吗？有专门的屏幕吗？这些是您在做出决定之前需要与您的领域专家讨论的问题。

您可能会发现有用的链接：

[聚合根引用其他聚合根](https://stackoverflow.com/questions/4919687/aggregate-root-references-other-aggregate-roots)

[http://tech.groups.yahoo.com/group/domaindrivendesign/message/8696](http://tech.groups.yahoo.com/group/domaindrivendesign/message/8696)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-26T09:53:57.003

我们在系统中遇到了与 ISO 货币和 ISO 国家相同的问题。我们发现，几乎我们拥有的每个聚合根（并具有相应的存储库）都需要将货币和/或国家实体作为子实体。从数据管理和数据检索的角度来看，这被证明是低效的，因此我们做了以下工作：

1.  仍然保持每个聚合根只有 1 个存储库的概念（如上面的 Cuong Le 的回答）
2.  维护国家和货币数据的缓存 - 当从数据库中耗尽聚合根时，我们使用缓存来检索货币/国家信息

根据我的经验，DDD 和蓝皮书是一个非常宝贵的指南，但您不必 100% 准确地采用它，您可以接受建议，然后您对其进行调整以使其对您有意义。

希望这可以帮助 ...

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-09-27T07:15:28.363

出色地。DDD 中存储库的全部目的是抽象出数据源。如果您的用户地址需要完整的城市/地区/国家/地区，请使用这些存储库。

这种方法的问题是查询效率很低。

相反，在数据库中创建一个视图，该视图会加载包含所有必需信息的用户地址（或者使用您的 ORM，如果有的话）。

**总结一下：**

*DDD 中没有任何内容规定您应该如何实现存储库。DDD很清楚，从repository加载的实体应该是完整的，不管信息如何存储在数据源中= **repository只是定义为抽象层***

# tfs - tf dir 没有工作文件夹映射

> ID：12575659
> 
> 赞同：2
> 
> 时间：2012-09-25T03:01:48.530
> 
> 标签：tfs, tfsbuild, tf-cli

我正在编写构建脚本，并试图通过命令行从 TFS 获取文件，但无法让它们工作。始终收到消息“所有文件都是最新的”，而没有文件存在。

我删除现有工作区并创建新工作区并映射到本地文件夹。所有这些都可以正常工作。但是之后我无法获取文件。有什么问题。我需要做哪些其他步骤来诊断它。

以下是命令和结果列表：

```
 D:\temp\tfs\Dev>tf workfold
 ====================================================================

 Workspace:  xantworkspace

Collection: https://dev.company.com/tfs/

 $/allProjects/MobileProject/Dev: D:\temp\tfs\Dev

 D:\temp\tfs\Dev>tf dir

 There is no working folder mapping for D:\temp\tfs\Dev.

 D:\temp\tfs\Dev>tf get

 All files up to date.

 D:\temp\tfs\Dev>tf get /all

 All files up to date.

 D:\temp\tfs\Dev>cd ..

 D:\temp\tfs\Dev>tf get /all /force

All files up to date.

D:\temp\tfs\Dev>tf get /all /force /overwrite
All files up to date.

D:\temp\tfs\Dev>tf get /all /force /overwrite /recursive

All files up to date.

D:\temp\tfs\Dev>tf get /all /force /overwrite /recursive /version:T

All files up to date. 
```

在 TFS 中，$/allProjects/MobileProject/Dev 下有文件、文件夹。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2015-02-05T18:58:24.820

您不是偶然使用 Team City 吗？如果是这样，Team City 有两种不同的经纪人。创建一个不以 TFS 为中心的工作区（默认）。另一个与 TFS 连接，可以像普通工作区一样使用。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-06-15T15:04:23.693

在获得读取但没有写入权限之前，我在 TFS 方面也有过类似的经历。让我的用户帐户读/写是让我真正获得文件的唯一解决方法。

# javascript - 将 javascript 传递给 WordPress 页面模板？

> ID：12575660
> 
> 赞同：0
> 
> 时间：2012-09-25T03:02:02.793
> 
> 标签：javascript, ajax, wordpress, soundcloud

我正在为 Soundcloud 开发一些 javascript，它允许用户通过单击一个按钮来验证他们的帐户，一旦他们这样做，我就将其设置为将用户转发到特定页面。下面是我正在使用的代码

```
<script>
  SC.initialize({
    client_id: "MYIDHERE",
    redirect_uri: "MYURLHERE/callback.html"
  });

  $("#connect").live("click", function(){
    SC.connect(function(){
      SC.get("/me", function(me){
        $("#username").text(me.username);
        $("#userid").text(me.id);       
        $.ajax({
          type: "POST",
          url: "MYURLHERE/my-recordings-logged-in",
          data: {
            userID: me.id
          },
            success: function(data) {
               location.href = data;
           }
        });
      });
    });
  });

</script> 
```

我遇到的问题是，当页面被转发到新页面时，URL 后面有一堆 HTML 代码：

MYURLHERE/!DOCTYPE%20html%20PUBLIC%20"-//W3C//DTD%20XHTML%201.0%20Transitional//EN"%20" ...等（整个页面的html代码在实际http栏）

而不是显示我在 WordPress 中创建的页面。不确定这是 WordPress 页面模板问题还是它没有转发到实际的 .php 扩展名？

这是我正在使用的页面模板文件的 PHP 代码：

```
<?php
/*
Template Name: My Account (Logged in)
*/
?>

<?php
require_once( 'MYURLHERE/wp-load.php' );
get_header(); ?>

    <div class="contentwrap fullwidth">
    <?php if (have_posts()) : while (have_posts()) : the_post(); ?>

<div class="postwrap pagefullwidth">

<h1><?php the_title(); ?></h1>
<?php the_content(); ?>

        <?php $userid = $_POST["userID"]; ?>
        <?php $my_query = new WP_Query('showposts=1000&tag=$userid'); while ($my_query->have_posts()) : $my_query->the_post(); $do_not_duplicate = $post->ID; ?>
            <?php the_content(); ?>
            <a href="<?php the_permalink(); ?>">View This Appreciation</a>
        <?php endwhile; ?>  

</div><!-- END postwrap -->
    <?php endwhile; else: ?>
    <?php endif; ?>

</div><!-- END contentwrap -->

<?php get_footer(); ?> 
```

任何帮助，将不胜感激

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-25T07:16:43.283

我认为这是提供 url 的问题。在 WordPress 中，我们`<?php bloginfo( $show ); ?>`用于获取不同的 url。[看看这个法典部分](http://codex.wordpress.org/Function_Reference/bloginfo)

我的建议是为您的页面提供完整的直接网址，如下所示。

```
url: "http://www.mywebsite.com/my-recordings-logged-in/" 
```

# android - 在 Eclipse 中使用 Shift-jis

> ID：12575661
> 
> 赞同：0
> 
> 时间：2012-09-25T03:02:13.423
> 
> 标签：android, shift-jis

我想用 Shift-JIS 在 eclipse 中使用日语。但我做不到。请帮我。谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-05T15:08:55.337

1.  打开 eclipse 主文件夹中的 eclipse.ini 配置文件
2.  添加新参数 -Dfile.encoding=SJIS
3.  关闭并打开日食。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-25T03:26:05.223

考虑按照建议使用 UTF-8。不清楚您的问题是什么，但通常：右键单击项目，选择属性，单击左侧的资源，然后选择 MS932 (Shift JIS) 作为“文本文件编码”。当然，您需要有兼容的字体和日文 IME。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2020-01-31T04:37:34.330

1.  首先进入地区设置，将国家或地区改为日本，地区格式改为日文。
2.  打开 eclipse 主文件夹中的 eclipse.ini 配置文件。
3.  添加新参数 -Dfile.encoding=SJIS。
4.  重新启动应用程序（eclipse）。

# asp.net-mvc - Visual Studio 2012 中数据库优先实体框架模型的 MVC4 脚手架

> ID：12575665
> 
> 赞同：11
> 
> 时间：2012-09-25T03:02:36.513
> 
> 标签：asp.net-mvc, entity-framework, visual-studio-2012, scaffolding

我在使用 Visual Studio 2012 时遇到问题，尝试添加带有脚手架的 MVC4 控制器。理想情况下，我希望在与我的 Web 应用程序分开的程序集中使用 Add New Item - ADO.NET Entity Data Model（即不是 Code First）从数据库生成一个实体框架模型（edmx 文件等）。但是，当我设置它并使用添加控制器，指定“具有读/写操作和视图的 MVC 控制器，使用实体框架”并从我的 DatabaseModel 程序集中选择模型类和数据上下文类时，会弹出以下警报消息。

> “Ifl.Payforit4.DatabaseModel.Mno”不属于指定的“Ifl.Payforit4.DatabaseModel.Payforit4Entities”类，并且无法修改“Ifl.Payforit4.DatabaseModel.Payforit4Entities”类以将“DbSet”属性添加到它。（例如，“Ifl.Payforit4.DatabaseModel.Payforit4Entities”类可能在已编译的程序集中。）

无法修改该类是有道理的，因为它在另一个程序集中，尽管在相同的解决方案中，并且通过 T4 自动生成，但查看 Payforit4Entities 的自动生成代码时，“DbSet”属性已经很明显了。

> ```
>  public DbSet<Mno> Mnoes { get; set; } 
> ```

我已经尝试了很多其他的东西。

1.  将数据模型直接放在 Web 应用程序中
2.  将模型类更改为数据库中的各种其他表，以防 Mno 类出现问题
3.  将数据模型简化为一个简单的表
4.  使用 Entity Framework Power Tools Beta 2 对 Code First 模型进行逆向工程。这产生了一组新的错误。我明白为什么它是一个测试版。
5.  将 ADO.NET 数据模型代码生成策略从 None 更改为 Default 以创建基于 ObjectContext 而不是 DbContext 的数据模型
6.  关闭复数，所以属性名称是 Mno 而不是 Mnoes

他们都没有工作。唯一有效的是手动编写 Code First DbContext 派生类和 POCO。巧合的是，我发现的每个演示 MVC4 脚手架的示例都使用这种数据模型。有没有什么地方说 Code First 是唯一一种适用于 MVC4 脚手架的数据模型？有没有人设法在 Visual Studio 2012 中构建数据库优先 (.edmx) 数据模型？数据库足够复杂，我宁愿坚持使用数据库优先策略。

我可以看到 Code First 与 Database First 模型的脚手架必须存在一些差异。例如，前者的 POCO 属性保存由 KeyAttribute 指示的键，而后者在 edmx 模型文件中保存该信息。这是 Entity Framework Power Tools 中逆向工程功能的基本原理吗？我们是否期望从 edmx 文件转向逆向工程 Code First 模型以使用 MVC4 脚手架？如果是这样，我们是否希望在 Entity Framework Power Tools 完成之前继续使用动态数据项目？

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2013-03-20T19:50:35.177

诀窍是首先编译您的解决方案，然后**手动**键入上下文类。不要从下拉列表中选择它，只需自己输入类名，它就会神奇地工作;-)

请参阅此处：[ASP.NET MVC4 – 如何在 MVC 控制器中使用 Database First EF](http://jefferytay.wordpress.com/2013/02/19/asp-net-mvc4-how-to-use-a-database-first-ef-in-a-mvc-controller/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-14T14:45:22.530

我不认为我们可以使用 Entity Framework 5 从 edmx 文件构建脚手架。

我尝试了一系列类似的事情，但仍然遇到错误。

有一些建议可能只是删除坏的 edmx 并重新开始可以生成正确的 .tt 文件以使脚手架正常工作，但我还没有看到这一点。

我将尝试更多以使其正常工作，因为我更喜欢 DB 优先方法。如果我得到任何进一步的信息，我会更新这个答案。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-05T06:33:15.513

Entity Frameork 5/VS 2012 中的 edmx 代码生成器有问题。它创建的代码充满了编译器错误。我猜当 vs2012 发布时它还没有准备好发货，这就是他们将默认代码生成标志设置为无的原因。

微软唯一的问题是：我们什么时候可以期待修复这个问题的更新？

* * *

## 回答 #4

> 赞同：-2
> 
> 时间：2014-07-22T00:11:18.727

这是事实！诀窍是首先编译您的解决方案，然后手动输入上下文类。不要从下拉列表中选择它，只需自己输入类名，它就会神奇地工作;-)

谢谢！！马库斯！

# objective-c - 如何让uiscrollview的分页页面变慢？

> ID：12575671
> 
> 赞同：1
> 
> 时间：2012-09-25T03:03:24.323
> 
> 标签：objective-c, ios, uiscrollview

甚至可以改变我们页面的速度吗？我知道 Apple 通过他们的 iOS6 App Store 做到了这一点。但也许他们正在使用未记录的 API。

任何人？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-25T07:41:22.267

我不认为官方有改变分页速度的方法，我不知道是否有任何私有属性。

如果您想自己实现它，则必须通过响应`UIScrollViewDelegate`方法来实现分页。但是，您还必须为 a 实现自定义滚动行为`UIScrollView`，因为您无法指定 的动画的持续时间`setContentOffset:animated:`。

当我试图模仿 safari 选项卡选择视图的行为时，我做了类似的事情。也许它的某些部分可以帮助您，解决您的问题。首先，我实现了一个具有持续时间和计时功能的[`UIScrollView`子类。](https://github.com/plancalculus/MOScrollView)`setContentOffset:animated:`选项卡[视图](https://github.com/plancalculus/MOTabView)通过使用 的委托方法并使用自定义持续时间`UIScrollView`调用来实现分页。`setContentOffset:animated:`

# c# - 控制对方法的访问

> ID：12575676
> 
> 赞同：7
> 
> 时间：2012-09-25T03:03:56.870
> 
> 标签：c#, .net

有没有办法控制对.net中某些角色的方法的访问。像

```
class A
{
    //should only be called by Admins**
    public void Method1() { }

    //should only be called by Admins and PM's** 
    public void Method2() { }
} 
```

我使用 Windows 身份验证仅用于检索用户名，仅此而已。用户角色在不同的应用程序中维护。我认为可以通过属性实现，但我不确定如何

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-25T03:36:07.817

有可能，我在一个使用 asp.net 和 AzMan 作为身份验证的 Web 项目中使用了它。

查看[代码访问安全性](http://msdn.microsoft.com/en-us/library/930b76w0%28v=vs.71%29.aspx)

从记忆中，我们所有的方法看起来都像

```
[Permission(SecurityAction.Demand, "Permission")]
public void Method1 
```

虽然已经有一段时间了，所以这实际上可能不是 100% 正确的。

我还强烈建议您是否要将保护降低到这个级别以查看[面向任务的权限方法](http://lostechies.com/derickbailey/2011/05/24/dont-do-role-based-authorization-checks-do-activity-based-checks/)，因为这比基于角色的权限灵活得多

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-25T08:31:12.193

您可以按如下方式执行此操作：

```
class A 
{     
    //should only be called by Admins**     
    [PrincipalPermission(SecurityAction.Demand, Role="Admin")] 
    public void Method1() 
    { 
    }      

    //should only be called by Admins and PM's**      
    [PrincipalPermission(SecurityAction.Demand, Role="Admin")] 
    [PrincipalPermission(SecurityAction.Demand, Role="PM")] 
    public void Method2() 
    { 
    } 
} 
```

为此，`Thread.CurrentPrincipal`必须将其设置为具有所需角色的主体。例如，如果您`roleManager`在 ASP.NET 应用程序中启用，`Thread.CurrentPrincipal`则将设置为`RolePrincipal`带有来自您配置的 RoleProvider 的角色。有关详细信息，请参阅[此 MSDN 文章](http://msdn.microsoft.com/en-us/library/ms731200.aspx)。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-25T04:17:54.063

您可以使用自定义验证来做到这一点。

1- 在另一个公共类中创建一个方法，该方法以登录 ID 作为参数并以位的形式返回角色。

2- 在所需类的 page_Load 事件上调用此方法，并将返回的位保存在视图状态中。

3- 现在根据角色位验证所需的方法。

# forms - Sharepoint 2010 用于文档发送到选项的自定义表单

> ID：12575677
> 
> 赞同：1
> 
> 时间：2012-09-25T03:03:59.860
> 
> 标签：forms, sharepoint-2010, asp-classic

再会！

我有一个关于 Sharepoint 2010 的项目，它需要以下内容：

1）在文档设置下，有一个“发送到”选项，我需要能够向该“发送到”添加一个位置，该位置将访问自定义表单。（思考 ASP 表单？）但问题是如何将该表格添加到选项中..

2) 此自定义表单必须能够显示另一个站点集合的文档中心的文件结构（该站点集合中大约有 19 个文档库），并且允许用户选择添加该文档的位置。

我正在考虑诸如阅读网站集的文档库并从那里构建文件结构之类的事情。（这行得通吗？担心性能，因为每次加载表单时都必须读取）

3) 确认位置后，会直接将用户引导至该文件夹的提交文档表单（Sharepoint 2010 OOB）。

我希望我可以通过某个 URL 将其直接链接到那里！或者至少传递一个访问文件夹的字符串值

谢谢大家通读！！: 我知道它很长..

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-25T03:24:04.777

这篇博文看起来可能会解释如何做你正在寻找的东西。

[http://sharepoint.microsoft.com/blogs/GetThePoint/Lists/Posts/Post.aspx?ID=22](http://sharepoint.microsoft.com/blogs/GetThePoint/Lists/Posts/Post.aspx?ID=22)

您可以将其传递到“传输中”文档库，该文档库具有事件处理程序或工作流，在添加项目时触发，允许您添加表单等需要。

# c# - 按钮内的 C# 函数单击以计算距离

> ID：12575680
> 
> 赞同：4
> 
> 时间：2012-09-25T03:05:02.440
> 
> 标签：c#

（我刚接触到 C# 编码的世界。）我目前正在尝试使用 C# 语言中的函数。该程序的目标是尝试使用`total distance traveled`和来计算平均值，`total hours traveled`并且将乘以从 NY 市到 MIAMI 的时间，得到从 NY 市到 MIAMI 的距离。

我怎样才能正确地构建功能（内容明智）来给我结果（从纽约市到迈阿密的距离）？我应该创建函数`double void`并将它们声明为公共还是私有？

4个文本框：

```
Starting Mileage
Ending Mileage
Total Driving Time 
Time from NY city to MIAMI 
```

我已经放置了我的功能，这些功能将通过单击按钮来执行。我计划如何使用这些功能的简要想法：

```
 private void button1_Click(object sender, EventArgs e)
        {
            double v = Calculate_Velocity();
            double t = Get_Time();
            double d = Calculate_Distance (v,t);
            Display_Results(v, t, d);
            Clear_TextBoxes();

        } 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-25T04:02:04.533

您需要将函数设为私有或受保护。private 和 protected 的区别在于 private 只能被类或结构中的代码访问，而 protected 只能在当前类以及从它派生的任何类中使用。

[这是 CSharp 中访问修饰符的一个很好的解释的链接。](https://stackoverflow.com/questions/614818/what-is-the-difference-between-public-private-protected-and-nothing "访问修饰符")

您的代码应如下所示：

```
private double CalculateVelocity()
{
    double distance = 0;
    double time = 0;

    if(double.TryParse(tbDistance.Text, out distance) &&
       double.TryParse(tbTime.Text, out time))
    {
        return distance/time;
    }

    return 0.0;
}

private double GetTime()
{
    //Get Time
}

private double CalculateDistance(double velocity, double time)
{
    //Calculate Distance
}

private double DisplayResults(double velocity, double time, double distance)
{
    //Display Results
}

private double ClearTextboxes()
{
    //Clear textboxes
}

private void button1_Click(object sender, EventArgs e)
{
    //You get the idea
} 
```

由于您是 csharp 的新手，这可能是尝试使用属性的好时机。例如 GetTime 可以这样写：

```
// Property to GetTime
public double GetTime
{ 
      get
      {
          // variable to hold time
          double time = double.MinValue;

          // Safely parse the text into a double
          if(double.TryParse(tbTime.Text, out time))
          {
              return time;
          }

          // Could just as easily return time here   
          return double.MinValue;
      }
      set
      {
          // Set tbTime
          tbTime.Text = value.ToString();
      }
} 
```

您可以像这样使用该属性：

```
double time = GetTime; 
```

或者

```
GetTime = time; 
```

您也可以考虑使用 TimeSpan 而不是 GetTime 的 double。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-25T03:51:04.660

> 我怎样才能正确地构建功能（内容明智）来给我结果（从纽约市到迈阿密的距离）？

首先，没有绝对正确的答案，每个人都会有自己的看法。在我看来，我建议在你的项目中添加一个新类。

```
class Formulas
{
    public static double CalculateVelocityFromMileage(double startMileage, double endMileage, double time)
    {
        return (endMileage - startMileage) / time;
    }
} 
```

这将计算速度、距离、平均时间到一个单独的地方的逻辑隔离开来，并且它不假设您命名您的 TextBox 控件或用户应该如何在这些文本框中输入信息。

您应该将这些函数设为静态。您应该将静态函数视为仅需要函数定义中提供的输入的函数。静态函数是一件好事，它不依赖于在调用函数的人看来隐藏的项目。当然，对于静态函数，你别无选择，只能返回 double。

你应该公开这个函数，这样你的点击事件中的代码可以这样调用它：

```
Formulas.CalculateVelocityFromMileage(start, end, time); 
```

请记住以下几点：
1\. 一个函数应该做一件事并做好一件事
2\. 一个函数不应该依赖隐藏值，它的输出应该只依赖于它的参数。

您可能会发现自己编写了更多代码，但是随着应用程序的增长，当您开始编写更多代码时，您会感谢自己。

但是相信你自己的直觉，找到你自己的个人风格，发现什么对你有用。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-25T03:14:29.827

因为我不知道公式，我只会给你想法，你可以相应地构建应用程序

只需将类内的函数定义为

```
double i=0;
public double Calculate_Velocity()
{
    i=double.parse(Starting Mileage.Text)*double.parse(TotalDrivingTime.Text );
    return i;   
    //Formula may be wrong but you will get idea abt the things...
} 
```

同样定义所有功能...

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-09-25T03:15:34.753

如果您想要小数英里，那么选择`double`很好。如果您想要返回 1500 或 1837 英里的结果，那么`int`就是要走的路。通过声明它`double`，您将得到 1500.33 英里（即 1500 英里和 1/3 英里）的结果。因此，如果您想要分数英里（更精确）或整数英里，您可以自行选择。

对于您的程序，我会制作函数`private`. 制作它们`private`意味着不能通过实例化类的实例来调用函数。换句话说，最终用户只想要最终结果。最终用户没有任何业务调用您的“帮助”功能。

仅供参考，您没有问，但还有第三个可见性选项，称为`protected`. `Protected`就像`private`. 不同之处在于，如果您的类被另一个类继承，则该类可以访问您的受保护函数和变量。

# javascript - 加载/刷新时显示不同的图像

> ID：12575688
> 
> 赞同：0
> 
> 时间：2012-09-25T03:07:14.857
> 
> 标签：javascript, jquery, jquery-plugins, slideshow, jquery-events

我目前正在为我的项目使用 Jquery Cycle 插件，并且幻灯片运行顺利。但是，我希望我的幻灯片在每次页面刷新时显示或以不同的图像开始。我不确定如何添加函数/脚本来实现这一点，或者是否可能。我是 JQuery 的新手，所以任何帮助将不胜感激！

脚本：

```
$(document).ready(function() {
    $('.slideshow').cycle({
         fx: 'fade',
         speed: 2500,
         timeout: 7000,
         prev: '#prev',
         next: '#next',
    });
}); 
```

* * *

我的 HTML：

```
<div class="slideshow">
    <img src="images/img_slide-1.jpg" />
    <img src="images/img_slide-2.jpg" />
    <img src="images/img_slide-3.jpg" />
</div> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-25T03:12:56.037

对这个插件进行一些快速研究（我以前从未使用过它），看起来有一个随机选项可以指定为 true。查看文档： http: [//jquery.malsup.com/cycle/options.html](http://jquery.malsup.com/cycle/options.html)（只是 ctrl-f 表示“随机”）。

如果您只是从随机的第一张图片中查看，然后是之后的连续幻灯片（如评论中所述），只需使用startingSlide：SLIDE_NUMBER_HERE，它应该可以工作，基于对文档的最少研究。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-25T03:14:12.383

使用起始幻灯片选项

```
startingSlide: 0,     // zero-based index of the first slide to be displayed 
```

要选择随机幻灯片，您需要获得这样的随机索引

```
var rand = Math.floor(Math.random() * $('.slideshow img').length); 
```

然后，当您初始化循环时，将`rand`变量用作起始幻灯片。

```
$(document).ready(function() {
  var rand = Math.floor(Math.random() * $('.slideshow img').length);
  $('.slideshow').cycle({
    fx: 'fade',
    speed: 2500,
    timeout: 7000,
    prev: '#prev',
    next: '#next',
    startingSlide: rand
  });
}); 
```

# javascript - Javascript查找最小数及其键

> ID：12575692
> 
> 赞同：1
> 
> 时间：2012-09-25T03:08:00.700
> 
> 标签：javascript

因此，如果我有，`[2,3400,500,6,710]`我想找到最低的 2 和它的密钥 0。

在我使用之前，`Math.min.apply( Math, array )`但现在我也想获得密钥。有任何想法吗？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-09-25T03:09:44.647

采用`.indexOf`

```
var array, min, index;
array = [2,3400,500,6,710];
min = Math.min.apply(null, array );
index = array.indexOf(min); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-25T03:35:54.100

xdazz's answer可以完成这项工作，您也可以这样做：

```
var a = [2, 3400, 500, 710];
var lowValue = a.concat().sort(function(a, b){return a - b})[0];
var lowIndex = a.indexOf(lowValue); 
```

请注意，这`Array.prototype.indexOf`是 ES5，因此为没有它的浏览器提供支持。

# javascript - javascript方法不在IE中编译，但在运行调试时工作正常

> ID：12575702
> 
> 赞同：0
> 
> 时间：2012-09-25T03:09:55.727
> 
> 标签：javascript, jquery

我制作了这个 javascript 方法，它是从我在网上找到的现有脚本更改的，该脚本应该旋转显示无限数量的`'.testimonial'`div。该脚本在 chrome 和 firefox 中运行良好，但不能在 Internet Explorer 中编译，除非您使用 f12 启动脚本的调试。**有没有更好的方法来编写这个脚本？**我在网上寻找想法，但找不到任何东西。我想问题出在`console.log(testimonialCount);`声明上，但不确定更好的编写方式。任何帮助将不胜感激。谢谢。

```
//rotate testimonials script
jQuery('.testimonial').hide();

var testimonialCount = $('.testimonial').length;
console.log(testimonialCount );
var currentItem = 0;
var timeout;
timeout = window.setTimeout((function(){switchDiv();}));    

switchDiv = function() {
    if (currentItem == testimonialCount - 1) {
        jQuery('.testimonial').eq(testimonialCount - 1).hide();
        currentItem = 0;
        jQuery('.testimonial').eq(0).fadeIn();
        timeout = window.setTimeout((function(){switchDiv();}),7000);
    }
    else {
        jQuery('.testimonial').eq(currentItem).hide();
        currentItem = currentItem + 1;
        jQuery('.testimonial').eq(currentItem).fadeIn();
        timeout = window.setTimeout((function(){switchDiv();}),7000);
    }
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-25T03:11:59.057

IE开发者工具未打开时，没有`console`对象。
因此，调用`console.log()`会引发错误。

为防止这种情况，您可以检查`if ('console' in window)`并制作自己的虚拟控制台（或者不记录任何内容），如果不是的话。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-25T03:13:31.203

几点注意事项：

将此添加到脚本的最顶部：

```
window.console = console || { 'log' : function(){} }; 
```

这定义`window.console`以防万一。除了避免错误，什么都不做。

接下来取出超时函数周围的括号：

```
timeout = window.setTimeout(function(){ switchDiv(); },7000); 
```

...或者只是进一步简化：

```
timeout = window.setTimeout(switchDiv,7000); 
```

我在这里很挑剔但是：

`currentItem = currentItem + 1;`是相同的`currentItem++;`

另一个挑剔的东西`window.setTimeout`是一样的`setTimeout`。

# galleria - 调用 push() 后如何在主阶段显示图像？

> ID：12575706
> 
> 赞同：2
> 
> 时间：2012-09-25T03:11:48.283
> 
> 标签：galleria

我正在尝试使用 Galleria，通过调用 push() API 动态插入图像。在轮播中推动新图像时，这部分工作得很好。但是，我想要做的是，一旦我推送一个新图像，我想在主阶段加载该图像以显示大版本。我不知道该怎么做，希望这里有人能提供帮助。

这是我到目前为止所尝试的。我想在推送新图像后，我可以调用 getDataLength()。如果它考虑了新推送的图像，则可能会返回原始长度或（原始长度 + 1）。getDataLength() 返回原始长度。所以我尝试使用 show(original length + 1) 希望能加载新图像。但是，这只是围绕并显示轮播中的第一张图像，而不是加载最后一个新推送的图像。

任何帮助将不胜感激。

谢谢。

# python - 使用python通知

> ID：12575708
> 
> 赞同：23
> 
> 时间：2012-09-25T03:12:13.553
> 
> 标签：python, windows, notifications

是否可以使用 python 在 Windows 中添加通知？就像一个通知框，其中包含有关更新或其他内容的一些信息

在 Windows 中，如果您还没有通过这张图片来计算的话..

![通知](../Images/4d711a93bdb107e594293a725f07cf8b.png)

* * *

## 回答 #1

> 赞同：27
> 
> 时间：2020-04-19T23:18:21.840

首先，使用以下命令安装 win10toast `pip`：

```
pip install win10toast 
```

然后，导入它：

```
from win10toast import ToastNotifier 
```

创建一个名为的变量`toast`：

```
toast = ToastNotifier() 
```

显示`toast`变量：

```
toast.show_toast(
    "Notification",
    "Notification body",
    duration = 20,
    icon_path = "icon.ico",
    threaded = True,
) 
```

它应该看起来像这样：

[![python toast通知](../Images/faf8542e30774e7081b21e066b6e8933.png)](https://i.stack.imgur.com/DuWIc.png)

* * *

## 回答 #2

> 赞同：20
> 
> 时间：2015-11-25T20:39:01.473

你可以使用[Jason Chen 的](https://github.com/wontoncc) [`balloontip.py`](https://gist.github.com/wontoncc/1808234)。它有将近 50 行代码，所以我不会在这里粘贴它。

似乎也适用于 Windows 10。

感谢[zack](https://stackoverflow.com/users/550900/zack)找到了这颗宝石。

* * *

## 回答 #3

> 赞同：17
> 
> 时间：2017-07-13T20:53:10.290

Github 上还有[Windows-10-Toast-Notifications](https://github.com/jithurjacob/Windows-10-Toast-Notifications)。

它适用于 Windows 10（使用 pywin32），并且允许多个通知。

[![在此处输入图像描述](../Images/f5d60c42ccf9006c59b0bd05c3c1694a.png)](https://i.stack.imgur.com/vZtUJ.png)

* * *

## 回答 #4

> 赞同：5
> 
> 时间：2020-06-09T05:49:28.290

您可以使用 plyer 显示通知：

```
from plyer import notification

notification.notify(
title = "Sample Notification",
message = "This is a sample notification",
timeout = 10
) 
```

或者您可以运行此代码并生成通知：

```
from plyer import notification

import tkinter as tk

root = tk.Tk()

tk.Label(root , text = 'NOTIFICATION DEVELOPER').grid(row = 0, column = 0)
tk.Label(root , text = 'Notification Title:').grid(row = 3, column = 0)
tk.Label(root , text = 'Notification Message').grid(row = 4, column = 0)
tk.Label(root , text = 'Seconds for which it appears'). grid(row = 5, column = 0)

t1 = tk.Entry(root)
t1.grid(row = 3, column = 1)

m = tk.Entry(root)
m.grid(row = 4, column = 1)

tm = tk.Entry(root)
tm.grid(row = 5, column = 1)

def strt():
    a = int(tm.get())
    notification.notify(
    title = t1.get(),
    message = m.get(),
    timeout = a
    )
tk.Button(root , text = 'START NOTIFICATION' , command = strt).grid(row = 6, column = 0)

root.mainloop() 
```

如果您希望他在一段时间后再次显示通知，您可以使用 time.sleep(a) 并循环代码。（a = 再次显示通知的时间。

要插入图标，请使用 app_icon：

```
app_icon = 'Full path of .ico file' 
```

# html - 使用 SVG 作为网站徽标的图像替换

> ID：12575709
> 
> 赞同：0
> 
> 时间：2012-09-25T03:12:26.303
> 
> 标签：html, svg, semantics

随着视网膜等高分辨率显示器的发展趋势，人们鼓励使用图标字体或 SVG 图形。

我的简单问题是，如果我使用 SVG 来替换我网站的徽标，它会对 SEO 产生负面影响吗？我的徽标不会在 Google 图片等中显示。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-25T09:08:04.080

自 2010 年以来，Google 一直在索引 svg 文件[[1]](http://googlewebmastercentral.blogspot.se/2010/08/google-now-indexes-svg.html.)。谷歌图片上有很多 svg 格式的标志，例如，尝试搜索“标志文件类型：svg”。

# c - 有没有办法知道 fscanf 何时读取空格或换行？

> ID：12575710
> 
> 赞同：0
> 
> 时间：2012-09-25T03:12:41.913
> 
> 标签：c, scanf

我想知道是否有办法知道 fscanf 何时读取空格或换行符。

示例：格式化询问单词斜体链接返回

当 fscanf 读取字符串直到遇到换行符或空格（使用 %s）时，它将读取格式以及它之后和之前的空格。问题是，有没有办法知道它读取了一个空格？在它进入第二行之后，有没有办法知道它读取了回车符？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-25T03:35:41.493

您可以指示 fscanf 将空格读取到变量中，而不是读取和丢弃空格。使用类似的东西，`[ \n\r\t]*`但您需要在该表达式中包含更多字符。根据语言环境和运行时字符集的某些特性，您可能需要编写一个单独的函数来计算适当的格式字符串，然后再使用它。

如果您需要将 \n 与其他类型的空格区分开来，则您的变量包含您刚刚阅读完的空格。您可能想要计算其中的所有 \n 字符，具体取决于您的需要。

# grails - grails中的URL格式是什么？

> ID：12575712
> 
> 赞同：0
> 
> 时间：2012-09-25T03:12:47.487
> 
> 标签：grails

嗨，我对 Grails 很陌生。我有一组我想测试的 api。通过使用`curl`命令，我可以像这样测试这些 api：

```
curl --verbose https://x.x.x.in/init_order     -u x-x-x-x-x-x-x-B4E4E:     -d "amount=400.00"     -d "order_id=xxxxxx"     -d "customer_id=xxxxx101"     -d "customer_email=customer@mail.com" 
```

这将以 JSON 格式给出响应。

我想要的是我需要点击这个网址。我认为`?`是`params`grails的分隔符。但是当我做这样的事情时：

```
 https://x.x.x.in/init_order/x.x.x.x.x?no=123?no2=234 
```

和`print`参数，我可以看到我`no`得到`123?no2=234`. 这里`?`没有分开我的参数。

对 Grails 非常陌生，我想知道我在哪里犯了错误。

提前致谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-25T03:18:30.247

它不是特定于 grails 的。在 HTTP 中，您使用`?`启动参数列表，然后`&`将参数彼此分开。

默认的 URL 映射是`/$controller/$action?/$id?`

因此，如果您有`BookController`一个操作`findBooks`并想要传递参数 author 和 title 它看起来像：

`http://yourdomain.com/book/findBooks?author=Grisham&title=Firm`

# c++ - C++ Valgrind 内存泄漏

> ID：12575714
> 
> 赞同：1
> 
> 时间：2012-09-25T03:12:51.077
> 
> 标签：c++, memory-leaks, new-operator, valgrind

Valgrind 告诉我：

```
==19305== 16 bytes in 1 blocks are definitely lost in loss record 19 of 179
==19305==    at 0x402842F: operator new(unsigned int)
==19305==    by 0x805273E: Loader::createLevel(int, int, std::string, Player*, int, int, int) 
==19305==    by 0x80551B0: Loader::loadLevel()
==19305==    by 0x80676C2: main (main.cpp:38) 
```

我的函数`Loader:.createLevel`有几个`new`语句。我如何知道其中哪一个导致泄漏（即线路）？

谢谢！

PS：我很乐意发布代码，但它太长了：/

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-25T03:20:41.617

`-g`将选项传递给`gcc`or`g++`以便您的可执行文件中包含调试符号。这是使用 -g 在二进制文件上运行 valgrind 的示例。

```
==20538== 4 bytes in 1 blocks are definitely lost in loss record 1 of 1
==20538==    at 0x4A05809: malloc (vg_replace_malloc.c:149)
==20538==    by 0x4004F7: main (test.c:8)
==20538==
==20538== LEAK SUMMARY:
==20538==    definitely lost: 4 bytes in 1 blocks.
==20538==      possibly lost: 0 bytes in 0 blocks.
==20538==    still reachable: 0 bytes in 0 blocks.
==20538==         suppressed: 0 bytes in 0 blocks.
==20538== Reachable blocks (those to which a pointer was found) are not shown.
==20538== To see them, rerun with: --show-reachable=yes

gcc -g test.c 
```

这样您就可以看到进行分配的行。

# javascript - 正则表达式用 javascript 包装跨度中的第一个整数

> ID：12575727
> 
> 赞同：1
> 
> 时间：2012-09-25T03:14:43.210
> 
> 标签：javascript, jquery, regex

我有一个返回列表的 cms，如下所示：

> 1 这是第一个有 100 人看过的列表项
> 
> 2 这是第二个列表项 29 人看过

我需要将第一个整数包装在 span 中以设置列表项的样式（更改呈现的输出不是一种选择），以实现以下目的：

```
<span>2</span> This is the second list item 29 people have seen it 
```

我目前有：

```
return v.replace(/(\d+)/g, '<span>$1</span>'); 
```

但这正在替换所有整数。我试过以下没有运气：

```
return v.replace(/(\^d+)/g, '<span>$1</span>'); 
```

我可以实现这一目标的最佳方法是什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-25T03:16:39.560

`g`意思是`global`，你只需要替换第一个匹配项就不需要使用`g`修饰符了。

```
return v.replace(/(\d+)/, '<span>$1</span>'); 
```

你的第二段代码放`\`错了地方。

```
return v.replace(/^(\d+)/, '<span>$1</span>'); 
```

# apache-flex - 如何在 flexmojos4.x 中构建 flex 资源模块

> ID：12575729
> 
> 赞同：1
> 
> 时间：2012-09-25T03:15:01.897
> 
> 标签：apache-flex, resourcebundle, flexmojos

我使用 flexmojos 插件来管理我的 flex 应用程序。一开始我用的是flexmojos3.8，下面是创建独立资源模块的fragment。如果我的应用支持 en_US、zh_Ch，我可以获得 MainApp_en_US.swf 和 MainApp_zh_CN.swf。在我的应用程序中，我可以根据浏览器的语言加载适当的资源模块。

```
 <plugin>
            <groupId>org.sonatype.flexmojos</groupId>
            <artifactId>flexmojos-maven-plugin</artifactId>
            <dependencies>
               <dependency>
                  <groupId>com.adobe.flex</groupId>
                  <artifactId>compiler</artifactId>
                  <version>${flex.sdk.version}</version>
                  <type>pom</type>
               </dependency>
            </dependencies>

            <configuration>
               <sourceFile>MainApp.mxml</sourceFile>
               <resourceBundlePath>
                    src/main/flex/locale/{locale}
               </resourceBundlePath>

               <runtimeLocales>${locales}</runtimeLocales>
               <mergeResourceBundle>false</mergeResourceBundle>
               <runtimeLocaleOutputPath>
                  /{contextRoot}/MainApp_{locale}.{extension}
               </runtimeLocaleOutputPath>

               <rslUrls>
                  <url>/{contextRoot}/rsl/{artifactId}.{extension}</url>
               </rslUrls>
            </configuration>
         </plugin> 
```

但是当我升级 flexmojos 4.0-RC2 时，我发现变化很大。配置更改为..... MainApp.mxml src/main/flex/locale/{locale}

```
 <localesRuntime>
                  <locale>en_US</locale>
                  <locale>fr_FR</locale>
                  <locale>zh_CN</locale>
               </localesRuntime>
               //Output resource module to current pathe (/target)
               <localesOutputPath>
                  /
               </localesOutputPath>
               //Define your resource moudle name pattern
               <resourceBundleNames>
       MainApp_{locale}
         </resourceBundleNames> 
             .....
            </configuration> 
```

经过大量尝试后，它起作用了。最后一个配置如上。

# c# - System.Web.VirtualPathUtility.ToAbsolute -- 此处不允许使用相对虚拟路径 './images/gift-card.jpg'

> ID：12575732
> 
> 赞同：1
> 
> 时间：2012-09-25T03:15:44.690
> 
> 标签：c#, asp.net

我正在尝试使用 System.Web.VirtualPathUtility.ToAbsolute() 将相对路径转换为绝对路径

但我得到了这个错误：

此处不允许使用相对虚拟路径“./images/gift-card.jpg”。

顺便说一下，文件结构是

**此代码位于 .cs 文件中，并且此文件与其他 .aspx 文件位于同一文件夹（例如 /root）中。图像位于文件夹 /root/images/**

有任何想法吗？

**ps：即使我将路径更改为“~/images/gift-card.jpg”，它仍然会引发异常：未处理的异常，没有更多信息。**

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-25T03:17:02.290

`VirtualPathUtility.ToAbsolute()`是一个静态函数，它不知道任何本地 cotnext，例如当前请求的目录。

因此，您不能将其传递给相对路径。
相反，您必须向它传递一个绝对的应用程序相对路径，以`~/`.

[请参阅文档](http://msdn.microsoft.com/en-us/library/ms150160.aspx)中的备注：

> 应用程序绝对路径是使用应用程序路径而不是根运算符（波浪号 [~]）的路径。
> 
> 如果 virtualPath 是：
> 
> *   绝对，ToAbsolute 方法返回不变的虚拟路径。
>     
>     
> *   应用程序相对，ToAbsolute 方法将当前应用程序虚拟目录路径附加到 virtualPath 的开头。例如，可以从 AppDomainAppVirtualPath 属性访问当前应用程序虚拟目录路径。
>     
>     
> *   没有根，ToAbsolute 方法引发 ArgumentOutOfRangeException 异常。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-25T03:53:09.027

我找到了解决方案

**Server.MapPath("~/path/file.ext")**

这完美地解决了我的问题，这是我正在寻找的方法。

谢谢大家的意见。

干杯

# iphone - ViewController 和 SegmentedControl

> ID：12575736
> 
> 赞同：0
> 
> 时间：2012-09-25T03:16:03.927
> 
> 标签：iphone, objective-c, xcode, uisegmentedcontrol

我有`ViewCtrl1`，并且`StartBtn`：

```
 -(IBAction)startbtn
{

ViewCtrl2 *vc2 = [[ViewCtrl2 alloc]init];
[self presentModalViewController:vc2 animated:YES];

} 
```

我也有`ViewCtrl2`,`UISegmentedControl`和`ExitBtn`:

```
 - (IBAction)exitIt {

    [self dismissModalViewControllerAnimated:YES];
} 
```

如果在`ViewCtrl2`我选择`segment 2`，或`3`。当我按`ExitBtn`时，将显示`ViewCtrl1`，如果我按`StartBtn`from `ViewCtrl1`，我将`ViewCtrl2`显示默认选定的片段，而不是我最近所做的更改。我该如何解决？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-25T03:21:02.933

`vc2`您每次都创建新的，当然它会显示默认值。初始化一次并重复使用。

# visual-studio-2010 - Visual Studio - 源代码管理

> ID：12575737
> 
> 赞同：2
> 
> 时间：2012-09-25T03:16:19.403
> 
> 标签：visual-studio-2010, version-control, tfs, azure-devops

我在源代码控制安装和内部工作方面相当新，虽然我已经使用过 TFS，但我不知道如何从头开始工作。基本上我想在我的个人 VS2010 项目中进行一些源代码控制，所以我可能会看到代码演变、回滚等，但我对如何设置它有点迷茫......据我所知，我必须有一个 Team Foundation Server 运行，所以可以在我的 PC 中安装一个吗？它是免费的吗？还是有更好的方法来做到这一点？我只想要一些简单的提示，例如“嘿，伙计，这是你应该遵循的步骤”或“这是不可能的，你必须有一个服务器”或“遵循本教程”非常感谢大家！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-25T13:06:21.583

[免责声明：我在 TFS 和 tfspreview.com 工作]

如果您正在寻找易于设置和免费产品，那么我强烈推荐 tfspreview.com。虽然它仍处于“预览”模式，但它肯定是可用且安全的。该网站本身也有[一个很棒的“学习”部分](http://tfspreview.com/en-us/learn/start/connect-to-vs/)来帮助您入门。最好的部分是它具有甚至尚未在本地产品中发布的可用功能，并且开发团队一直在添加新功能。

如果您对服务有任何疑问，我很乐意为您解答。

哦，还有一点要注意，要连接到托管服务，您需要安装[VS 2010 兼容性 GDR](http://www.microsoft.com/en-us/download/details.aspx?id=29082)，但这也是免费的。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-25T03:23:16.907

[GIT](http://git-scm.com)是一个出色的源代码控制，具有许多易于使用的功能。事实上，它也有 VS2010 的扩展。检查扩展菜单并安装 GIT 扩展。您可以在 VS 内部提交和更新。超级好用！

享受 ：）

# ios - iOS 更改引脚注释的颜色

> ID：12575738
> 
> 赞同：0
> 
> 时间：2012-09-25T03:16:22.817
> 
> 标签：ios, cocoa, mkmapview, mkannotation, mkannotationview

G'day 所有，

我正在尝试更改 MKPointAnnotations 中引脚的颜色。我尝试遵循的大多数代码示例都太复杂了，我无法遵循。我想出了这个：

```
//
//  ViewController.m
//  PlayingWithMaps
//
//  Created by custom on 22/09/12.
//  Copyright (c) 2012 __MyCompanyName__. All rights reserved.
//

#import "ViewController.h"

@interface ViewController ()

@end

@implementation ViewController

-(MKAnnotationView *)mapView:(MKMapView *)mapView viewForAnnotation:(id<MKAnnotation>)annotationPoint
{
static NSString *annotationIdentifier = @"annotationIdentifier";

MKPinAnnotationView *pinView = [[MKPinAnnotationView alloc]initWithAnnotation:annotationPoint reuseIdentifier:annotationIdentifier];

pinView.pinColor = MKPinAnnotationColorPurple;

return pinView;
}

- (void)viewDidLoad
{
[super viewDidLoad];
// Do any additional setup after loading the view, typically from a nib.

// First, choose what type of map
//mapView.mapType = MKMapTypeHybrid;
mapView.mapType = MKMapTypeStandard;

// Second, where is the centre of the map
CLLocationCoordinate2D centreCoord = {.latitude =  -37.123456, .longitude =  145.123456};
MKCoordinateSpan mapSpan = {.latitudeDelta =  0.001, .longitudeDelta =  0.001};
MKCoordinateRegion region = {centreCoord, mapSpan};

[mapView setRegion:region];

// Now lets make a single annotation.
CLLocationCoordinate2D annotationCoordinate;

annotationCoordinate.latitude = -37.781650;
annotationCoordinate.longitude = 145.076116;

MKPointAnnotation *annotationPoint = [[MKPointAnnotation alloc]init];
annotationPoint.coordinate = annotationCoordinate;
annotationPoint.title = @"My point of interest";
annotationPoint.subtitle = @"Location";

[mapView addAnnotation:annotationPoint];

// Read a set of points from files into arrays
NSString *fileString = [NSString stringWithContentsOfFile:[[NSBundle mainBundle]pathForResource:@"latitudes" ofType:@"txt"] encoding:NSUTF8StringEncoding error:nil];
NSMutableArray *latitudeStringsArray = [NSMutableArray arrayWithArray:[fileString componentsSeparatedByString:@"\n"]];

fileString = [NSString stringWithContentsOfFile:[[NSBundle mainBundle]pathForResource:@"longitudes" ofType:@"txt"] encoding:NSUTF8StringEncoding error:nil];
NSMutableArray *longitudeStringsArray = [NSMutableArray arrayWithArray:[fileString componentsSeparatedByString:@"\n"]];

// Now lets put them onto the map
int i; // Loop control
for (i=0; i<25; i++) 
{
    MKPointAnnotation *annotationPoint = [[MKPointAnnotation alloc]init];
    annotationCoordinate.latitude = [[latitudeStringsArray objectAtIndex:i]floatValue];
    annotationCoordinate.longitude = [[longitudeStringsArray objectAtIndex:i]floatValue];
    annotationPoint.coordinate = annotationCoordinate;
    annotationPoint.title = [NSString stringWithFormat:@"Point %d",i];
    annotationPoint.subtitle = [NSString stringWithFormat:@"%f, %f",[[latitudeStringsArray objectAtIndex:i]floatValue],[[longitudeStringsArray objectAtIndex:i]floatValue]];
    [mapView addAnnotation:annotationPoint];
}

}

- (void)viewDidUnload
{
[super viewDidUnload];
// Release any retained subviews of the main view.
}

- (BOOL)shouldAutorotateToInterfaceOrientation:(UIInterfaceOrientation)interfaceOrientation
{
return YES;
}

@end 
```

这些点出现在正确的位置，但它们是默认的红色，而不是我试图实现的紫色。从我所做的阅读中我的理解是，只要创建注释点但没有发生，就应该调用 (MKAnnotationView) 方法。

我知道这是我缺少的一些基本的东西，但我不知道是什么。

非常感谢所有帮助。

干杯，

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-25T03:19:09.910

如果它没有被调用，那么你还没有将你的 ViewController 设置为地图视图的委托。

# c - Flex 正则表达式识别 AWK 正则表达式

> ID：12575744
> 
> 赞同：1
> 
> 时间：2012-09-25T03:17:35.080
> 
> 标签：c, regex, awk, lex

我正在为我的 flex 扫描器整理最后一个模式，用于解析 AWK 源代码。

我无法弄清楚如何匹配 AWK 源代码中使用的正则表达式，如下所示：

```
{if ($0 ~ /^\/\// ){ #Match for "//" (Comment) 
```

或更简单地说：

```
else if ($0 ~ /^Department/){ 
```

其中 AWK 正则表达式封装在“/ /”中。

到目前为止，我尝试过的所有 Flex 模式都与我的整个输入文件匹配。我尝试更改正则表达式模式的优先级，但没有找到运气。帮助将不胜感激！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-25T04:40:14.187

正则表达式 regexen 必须是某个地方的模因。无论如何，让我们试一试。

一个 gawk 正则表达式包括：

*   `/`

*   任意数量的正则表达式组件

*   `/`

正则表达式组件（简化形式——注 1）是以下之一：

*   以外的任何字符`/`，`[`或`\`

*   a`\`后跟任何单个字符（不过，我们现在不会进入换行符。

*   一个字符类（见下文）

到这里很容易。现在是有趣的部分。

一个字符类是：

*   `[`或`[^`或`[]`或`[^]` (注 2)

*   任意数量的字符类组件

*   `]`

字符类组件是（理论上，但请参阅下面的 gawk 错误）以下之一：

*   `]`或以外的任何单个字符`\`（注 3）

*   a`\`后跟任何单个字符

*   一个字符类

*   排序规则类

一个字符类是：（注5）

*   `[:`

*   一个有效的类名，它总是一个字母字符序列，但不做假设可能更安全。

*   `:]`

排序规则类大多未实现但部分解析。您可能会忽略它们，因为 gawk 似乎还没有正确处理它们（注 4）。但对于它的价值：

*   `[.`

*   一些多字符整理字符，例如荷兰语语言环境中的“ij”（我认为）。

*   `.]`

或等价类：

*   `[=`

*   一些字符，或者也可能是一个多字符排序规则字符

*   `=]`

重要的一点是*不会*`[/]`终止正则表达式。你不需要写。（你不需要做任何事情来实现它。我只是提到它。）。*`[\/]`*

 ** * *

注1：

实际上，`\`字符类和字符类的解释要复杂得多。我只是描述了足够的词法分析。如果你真的想将正则表达式解析成它们的点点滴滴，那就更烦人了。

例如，您可以使用`\ddd`or `\xHH`（例如`\203`or `\x4F`）指定任意八位字节。然而，我们不需要关心，因为转义序列中没有什么是特殊的，所以对于词法分析而言，这并不重要；我们将得到词素的正确结尾。同样，我没有费心描述字符范围和`-`字符类内部的特殊规则，我也不担心正则表达式元字符`(){}?*+.`，因为它们不进入词法分析。您确实必须担心，`[]`因为它可以隐式隐藏 a 以`/`防止终止正则表达式。（我曾经写过一个正则表达式解析器，它可以让你隐藏`/`在带括号的表达式中，我认为这很酷——它减少了很多 kilroy-was-here 噪音`(\/)`——但似乎没有其他人认为这是个好主意。）

* * *

笔记2：

尽管 gawk`\`在字符类中做错了（见下面的注 3），但它并不要求你使用它们，所以你仍然可以使用 Posix 行为。Posix 行为是`]`如果它是字符类中的第一个字符，则不会终止字符类，可能在否定`^`. 处理这个问题的最简单方法是让字符类以四个可能的序列中的任何一个开始，总结如下：

```
\[^?]? 
```

* * *

注3：

gawk 与 Posix ERE（扩展正则表达式）的不同之处在于它将`\`字符类内部解释为转义字符。Posix 要求`\`在字符类中失去其特殊含义。我觉得 gawk 这样做很烦人（许多其他正则表达式库也是如此，同样烦人。）特别烦人的是 gawk 信息手册说 Posix 要求它这样做，而实际上它需要相反。但这只是我。无论如何，傻眼：

```
/[\]/]/ 
```

是匹配`]`或匹配的正则表达式`/`。在 Posix 中，去掉封闭`/`的 s ，这将是一个正则表达式，它匹配 a`\`后跟 a`/`后跟 a `]`。（gawk 和 Posix 都要求`]`它在不被视为字符类终止符时不是特殊的。）

* * *

注4：

我的机器上安装的 gawk 版本中有一个错误，正则表达式解析器在整理类结束时会混淆。所以它认为正则表达式在第一秒终止`/`：

```
/[[.a.]/]/ 
```

虽然它是正确的：

```
/[[:alpha:]/]/ 
```

当然，把斜线放在第一位总是有效的：

```
/[/[:alpha:]]/ 
```

* * *

注5：

字符类和整理类和朋友的解析有点棘手，因为它们有两个字符的终止符。“写一个正则表达式来识别 C /* */ 评论”曾经是一个标准的面试问题，但我想它不再是了。无论如何，这是一个解决方案（对于 [:...:]，但如果您愿意，只需将 : 替换为其他标点符号）：

```
[[]:([^:]|:*[^]:])*:+[]]   // Yes, I know it's unreadable. Stare at it a while. 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-25T09:07:52.283

正则表达式可以在没有“/.../”的情况下工作，请参见示例：

```
print all numbers starting with 7 from 1-100:

kent$  seq 100|awk '{if($0~"7[0-9]")print}'
70
71
72
73
74
75
76
77
78
79

kent$  awk --version
GNU Awk 3.1.6 
```*

# android - 具有动态布局数据的 ListView 中的内存使用情况

> ID：12575746
> 
> 赞同：2
> 
> 时间：2012-09-25T03:18:06.373
> 
> 标签：android, android-layout, android-listview, android-inflate, android-memory

我正在使用每行嵌套数据的自定义 ListView。我想用每行的复选框显示一个人的姓名，然后动态地将子行添加到 ListView 中，以获取与该人关联的一对多电话号码。

这目前正在工作。但是，对于较大的数据集，由于内存使用量很大，我看到速度变慢和崩溃。有没有更好的方法来完成我想要做的事情？

这是我想看到的一个例子：

```
[] Joe Smith
  [] 1-555-444-3333
  [] 1-555-777-6655
  [] 1-555-234-3232
[] John Doe
  [] 1-555-882-3434
[] Someone Else
  [] 1-555-949-0304
  [] 1-555-392-4433 
```

这是我当前在 ArrayAdapter 的 getView() 函数中使用的代码。我试图清理它一些，所以如果有任何编译错误，它们很可能是我清理的错字。

```
public View getView(int position, View convertView, ViewGroup parent)
{
View vi=convertView;
ViewHolder holder;

CustomContactInfo custom_contact = getItem(position);

if(convertView==null){
    inflater = (LayoutInflater)getContext().getSystemService(Context.LAYOUT_INFLATER_SERVICE);
    vi = inflater.inflate(R.layout.name_line, null);
    holder=new ViewHolder();

    holder.contact_name=(TextView)vi.findViewById(R.id.contact_name);
    holder.cb_selected=(CheckBox)vi.findViewById(R.id.contact_check);
    holder.phone_numbers=(LinearLayout)vi.findViewById(R.id.phone_number_container);                

    vi.setTag(holder);
} else {            
    holder=(ViewHolder)vi.getTag();
}

// Set the name of the contact on the main line
holder.contact_name.setText(custom_contact.name);

// Add the custom views for each phone number
holder.phone_numbers.removeAllViews();
for (Phone p : custom_contact.phones) 
{
    View v = this.inflater.inflate(R.layout.phone_number, null);

    CheckBox cb = (CheckBox)v.findViewById(R.id.phone_check);
    TextView number = (TextView)v.findViewById(R.id.phone_number);

    number.setText(p.phone_num);

    holder.phone_numbers.addView(v);
}

return vi; 
```

}

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-25T03:25:10.853

我想你想调查一个[`ExpandableListView`](http://developer.android.com/reference/android/widget/ExpandableListView.html).

# vba - 选择交叉参考项目

> ID：12575748
> 
> 赞同：1
> 
> 时间：2012-09-25T03:18:23.930
> 
> 标签：vba, ms-word

给定编号项目的文本，我需要插入对特定编号项目（来自简单编号列表）的交叉引用。用户选择他们想要交叉引用的列表项以及插入交叉引用的位置，如下所示：

```
1\. This is item 1
2\. This is item 2  <-- user selects this line
3\. This is item 3
------------------
[2]  This is a reference to item 2  <-- user ctrl selects this line too
 ^ macro will insert the 2 as a cross reference to the selected list item 
```

但是，可能有许多带有相同文本的编号项目，因此我需要一种方法来确定哪些项目是选定的项目。我计划选择具有正确文本的每个项目，检查它是否在文档中的正确位置，如果是，我现在知道它的“ReferenceItem：”编号，以便我可以插入交叉引用它。我遍历以下结果：

```
ActiveDocument.GetCrossReferenceItems(wdRefTypeNumberedItem) 
```

获取带有正确文本的编号项目的参考编号，但我不知道如何选择每个候选人，以便测试其位置。就像是：

```
ActiveDocument.Goto.CrossReferenceItem(81) 
```

这是在 Word 2010 中。

代码示例（已删除所有错误检查）：

```
'Create a temporary character style
ActiveDocument.Styles.Add "_TEMP_STYLE_", wdStyleTypeCharacter

'Apply the temporary style to the discontiguous selection
Selection.Style = ActiveDocument.Styles("_TEMP_STYLE_")

Set olRange = ActiveDocument.Range

With olRange.Find
    .ClearAllFuzzyOptions
    .ClearFormatting
    .ClearHitHighlight
    .Style = ActiveDocument.Styles("_TEMP_STYLE_")
    .Text = ""
    .Wrap = wdFindStop

    'llNumberedParaStart is used in the check of a numbered item to see if it is
    'the right one 
    llNumberedParaStart = -1
    llChildParaStart = -1

    Do While .Execute
        If .Found Then
            If olRange.Paragraphs(1).Range.ListFormat.ListType = wdListSimpleNumbering Then
                llNumberedParaStart = olRange.Characters(1).Start
                ' Do some work before this to get the text to check for
                slNumberedParaText = Selection.Text
            Else
                llChildParaStart = olRange.Characters(1).Start
            End If
    Loop
End With

slaNumItems = ActiveDocument.GetCrossReferenceItems(wdRefTypeNumberedItem)

'Loop through all the numbered items and find the correct one
For ilRefItem = 0 To UBound(slaNumItems)

    If InStr(slNumberedParaText, slaNumItems(ilRefItem)) = 0 Then

        'Check to make sure the reference is the correct one
        ********** select the numbered item and check its position **********

        'Insert the cross reference after selecting the correct location
        Selection.InsertCrossReference ReferenceType:="Numbered item", _
             ReferenceKind:=wdNumberRelativeContext, ReferenceItem:=ilRefItem, _
             InsertAsHyperlink:=True, IncludePosition:=False, SeparateNumbers:=False, _
             SeparatorString:=" "        

        Exit For

    End If
Next ilRefItem 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2017-01-13T11:37:02.440

此 maro 解析所有类型为“wdRefTypeHeading”的交叉引用项目，并将它们的段落编号与当前选定段落的编号进行比较：如果它们匹配，则将文本插入点移动上一行，并添加此文本：

§xxx, p.yyy

其中 xxx 和 yyy 当然是段落号和页码。

然后将文本剪切并放入剪贴板，因此原始文档不受影响。

**注意：标题前必须有一个空行，否则以上行的任何内容都将被剪切。**

```
Sub CreaRiferimento()
    Dim d As Document
    Set d = ActiveDocument
    Debug.Print "Current selection: " & Selection.Paragraphs(1).Range.ListFormat.ListString & " " & Selection.Paragraphs(1).Range
    n = GetRefNum()
    Debug.Print "Internal reference number = " & n

    ' Sposta punto inserimento sopra a titolo
    Selection.MoveUp Unit:=wdLine, Count:=1

    ' Scrive "§"
    Selection.TypeText Text:="§"

    ' Scrive riferimento a paragrafo
    Selection.InsertCrossReference ReferenceType:="Titolo", ReferenceKind:= _
        wdNumberRelativeContext, ReferenceItem:=Trim(Str(n)), InsertAsHyperlink:=True, _
        IncludePosition:=False, SeparateNumbers:=False, SeparatorString:=" "

    ' Scrive "p." per la pagina
    Selection.TypeText Text:=", p."

    'Scrive riferimento a pagina del paragrafo
    Selection.InsertCrossReference ReferenceType:="Titolo", ReferenceKind:= _
        wdPageNumber, ReferenceItem:=Trim(Str(n)), InsertAsHyperlink:=True, _
        IncludePosition:=False, SeparateNumbers:=False, SeparatorString:=" "

    ' Taglia in clipboard quanto appena scritto
    Selection.EndKey Unit:=wdLine
    Selection.HomeKey Unit:=wdLine, Extend:=wdExtend
    Selection.Cut

  End Sub

Function GetRefNum() As String
    CRI = ActiveDocument.GetCrossReferenceItems(wdRefTypeHeading)
    HeadNum = Selection.Paragraphs(1).Range.ListFormat.ListString
    CRINumber = 1
    For Each CR In CRI
        HeadingNumberFromFunction = Mid$(LTrim(CR), 1, InStr(LTrim(CR), " ") - 1)
        'Debug.Print HeadNum & " ? " & HeadingNumberFromFunction
        'Debug.Print "'" & CR & " ' = ReferenceItem n." & CRINumber
        If HeadingNumberFromFunction = HeadNum Then
            GetRefNum = CRINumber
            Exit Function
        End If
        CRINumber = CRINumber + 1
    Next

End Function 
```

# javascript - Joomla - 电子邮件地址作为输入值

> ID：12575750
> 
> 赞同：1
> 
> 时间：2012-09-25T03:18:31.877
> 
> 标签：javascript, html, joomla

我有下面的html；在 Joomla 中，电子邮件地址在您的网站上出现混淆或“隐藏”。我一直在使用它在我的网站 JHtml::_('email.cloak', 'demo@example.com') 上显示电子邮件地址。但我似乎无法在输入文本字段中显示电子邮件地址。

```
<input id="email_field" name="email" placeholder="<?php echo JHtml::_('email.cloak',$result->email_address, 0); ?>" type="text" /> 
```

使用上面的代码将在输入字段中生成以下脚本..

```
<script type='text/javascript'>  
    <!--  var prefix = 'ma' + 'il' + 'to';  
    var path = 'hr' + 'ef' + '=';  
    var addy16915 = 'user' + '@'; 
    addy16915 = addy16915 + 'user' + '.' + 'com';  
    document.write(addy16915);  //-->\n 
</script>

<script type='text/javascript'>  
    <!--  document.write('<span style=\'display: none;\'>');  //-->  
</script> 
```

此电子邮件地址已受到防止垃圾邮件机器人的保护。您需要启用 JavaScript 才能查看它。

```
<script type='text/javascript'>  
    <!--  document.write('</');  document.write('span>');  //-->  
</script> 
```

有任何想法吗？谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-25T14:24:40.007

JHtmlEmail::cloak 只能写入文档文本，不能像您的情况那样写入元素属性。如果你真的需要这个，你必须创建你自己的 JHtml 助手。这可以通过以下步骤来完成。

**实现 Joomla 功能以隐藏属性中的电子邮件：**

在 your_components/helpers/html/specialemail.php 创建帮助程序类：

```
<?php
defined('_JEXEC') or die;

abstract class JHtmlSpecialEmail
{
    public static function cloak($id, $attribute, $mail)
    {
        // convert text
        $mail           = JHtmlSpecialEmail::_convertEncoding($mail);
        // split email by @ symbol
        $mail           = explode('@', $mail);
        $mail_parts     = explode('.', $mail[1]);
        // random number
        $rand           = rand(1, 100000);

        $replacement    = "\n <script type='text/javascript'>";
        $replacement    .= "\n <!--";
        $replacement    .= "\n var prefix = '&#109;a' + 'i&#108;' + '&#116;o';";
        $replacement    .= "\n var path = 'hr' + 'ef' + '=';";
        $replacement    .= "\n var addy". $rand ." = '". @$mail[0] ."' + '&#64;';";
        $replacement    .= "\n addy". $rand ." = addy". $rand ." + '". implode("' + '&#46;' + '", $mail_parts) ."';";
        $replacement    .= "\n document.getElementById('$id').$attribute = addy$rand.replace(/&#(\d+);/g, function (m, n) { return String.fromCharCode(n); });";
        $replacement    .= "\n //-->";
        $replacement    .= '\n </script>';

        return $replacement;
    }

    protected static function _convertEncoding($text)
    {
        // replace vowels with character encoding
        $text   = str_replace('a', '&#97;', $text);
        $text   = str_replace('e', '&#101;', $text);
        $text   = str_replace('i', '&#105;', $text);
        $text   = str_replace('o', '&#111;', $text);
        $text   = str_replace('u', '&#117;', $text);

        return $text;
    }
} 
```

然后编写您的输入电子邮件元素，例如：

```
<input id="email_field" name="email" placeholder="" type="text" />
<?php JHTML::addIncludePath(JPATH_COMPONENT.DS.'helpers'.DS.'html'); ?>
<?php echo JHtml::_('specialemail.cloak', 'email_field', 'placeholder', 'email@domain.com'); ?> 
```

它使用与原始 Joomla cloak 函数相同的 cloak 算法。它没有使用`document.write`将电子邮件输出到文档，而是使用[此答案](https://stackoverflow.com/a/528786/86298)中的片段来解码 ASCII 实体，然后直接将值设置为所选属性。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-25T11:13:34.273

那是因为这就是 Joomla 所回显的内容，要打印出您必须禁用该地址的电子邮件保护的电子邮件。或者做一些花哨的 javascript 技巧。

# google-app-engine - 每个实体类型一个 memcache 命名空间

> ID：12575753
> 
> 赞同：0
> 
> 时间：2012-09-25T03:18:57.143
> 
> 标签：google-app-engine, namespaces, memcached

“每个实体类型一个 memcache 命名空间”是个好主意吗？与单个命名空间相比，还有其他影响吗？

```
 MemcacheServiceFactory.getMemcacheService("K1");
 MemcacheServiceFactory.getMemcacheService("K2");
 MemcacheServiceFactory.getMemcacheService("K3"); 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-09-25T03:47:54.420

馊主意。

有一堆 memecache API，例如 cas_multi()，它允许您在一次高效调用中使用多个键。不过，它们会要求您的所有键都在一个命名空间内，因此按种类拆分命名空间将意味着您人为地限制了自己。

生成密钥时，只需使用每种类型的前缀即可。

# android - 在android的listview中更改textview值

> ID：12575757
> 
> 赞同：2
> 
> 时间：2012-09-25T03:19:30.477
> 
> 标签：android, listview

我想在按钮单击事件上增加 textview 中的值我编写了相同的代码但是当我按下 +Button 时它会增加它下面的 textview 而不是在同一个 textview 上。

有 r 两个按钮 + 和 - on +button 值应该增加，on -Button 值应该在 android 的 listview 中减少 textview

这是我的示例代码...这是我的 xml 文件

```
 <TextView
        android:id="@+id/add"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:layout_alignBaseline="@+id/minus"
        android:layout_alignBottom="@+id/minus"
        android:layout_toLeftOf="@+id/qty"
        android:onClick="onClick"
        android:text="+"
        android:textAppearance="?android:attr/textAppearanceSmall"
        android:textSize="20dp"
        android:textStyle="bold" /> 
```

适配器中的代码如下

```
 text5.setOnClickListener(new OnClickListener()
        {
             public void onClick(View v) {
                 String qty=text4.getText().toString();
                 System.out.println("orginal string :"+qty);
                 int mn=Integer.parseInt(qty);
                 System.out.println("integer format : "+mn);
                 int  qty1=mn+1;
                 System.out.println("after increment :"+qty1); 
                 String s = new Integer(qty1).toString();
                 System.out.println("final string :"+s);
                 text4.setText(""+qty1);
                 App.qty=s;

            }
        });

     text6.setOnClickListener(new OnClickListener()
        {
             public void onClick(View v) {
                 String qty=text4.getText().toString();
                 int mn=Integer.parseInt(qty);
                 int qty1=mn--;
                 text4.setText(""+qty1);
                 String s = new Integer(qty1).toString();
                 text4.setText(s);
                 App.qty=s;

            }
        }); 
```

任何帮助将不胜感激谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-06-27T17:18:57.013

我使用arraylist而不是字符串数组..解决了我的问题

# windows-phone-7.1 - 如何在 Windows Phone 7 中删除包含所有文件的目标文件夹

> ID：12575759
> 
> 赞同：1
> 
> 时间：2012-09-25T03:20:38.437
> 
> 标签：windows-phone-7.1, isolatedstorage

我想删除一个文件夹，其中包含 Windows Phone 中的所有文件。在 wp7.1 SDK 中，我刚刚找到了以下 API：

```
public void DeleteDirectory(string dir);
public void DeleteFile(string file); 
```

如果文件夹不为空并且我调用该`DeleteDirectory`方法，则会出现异常。那么，有什么办法可以删除目标文件夹中的文件呢？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-25T05:35:51.860

使用`GetFileNames`获取目录中的所有文件名。然后迭代并删除所有文件。此后，当文件夹为空时，也将其删除。我希望这有帮助。

# ruby-on-rails - 在 MongoDB 中通过 ONE 查询有许多直通关系

> ID：12575764
> 
> 赞同：0
> 
> 时间：2012-09-25T03:21:25.530
> 
> 标签：ruby-on-rails, mongodb, activerecord

我想创建以下两个页面，每个页面使用一个查询：

1.  特定学生的所有课程列表
2.  特定课程的所有学生列表

我想用 MongoDB（或其他 NoSQL 解决方案）重新创建以下内容

```
 class Student < ActiveRecord::Base
  has_many :assignments
  has_many :courses, :through=>:assignments
end

class Course < ActiveRecord::Base
  has_many :assignments
  has_many :students, :through=>:assignments
end

class Assignment < ActiveRecord::Base
  belongs_to :course
  belongs_to :student 
```

使用关系数据库，我可以通过预先加载关联来完成此操作。

但是在 Mongo 中，当我按模式创建时，我可以选择在课程中嵌入或链接学生数据，或者在学生中嵌入或链接课程数据。

如果我选择将学生数据嵌入到课程文档中，我可以轻松地为特定课程（一个文档）拉取所有学生。但是，如果我想查找特定学生正在学习的所有课程，我将不得不查询 MongoDB N 次（其中 N 是学生正在学习的课程数量）！

在由关系数据库支持的 Web 应用程序中，对数据库进行 N 次调用以加载页面不是一种选择。它需要在恒定数量的查询中完成。MongoDB不是这种情况吗？有没有办法构建我的文档，以便我可以使用一个查询加载上面的两个页面？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-25T04:04:59.417

```
 If I chose to embed the student data in the course document, I
 can easily pull all students for a particular course (one document).
 However, if I want to find all courses a particular student is taking,
 I will have to query MongoDB N times (where N is the number of courses
 a student is taking)! 
```

如果您将信息高度标准化，那是正确的。但是，还有其他可能性，例如在学生记录中维护当前课程 ID 的数组，而不是依赖关系查询。

```
 In a web application backed by a relational database, making N calls
 to the database to load a page isn't an option. It needs to be done
 in a constant number of queries. Is this not the case with MongoDB?
 Is there a way to structure my documents such that I can load the two
 pages above with ONE query? 
```

MongoDB 不是关系数据库，并且故意不支持连接。MongoDB 数据建模方法更类似于数据仓库，其中一些数据被非规范化或嵌入到相关数据中以消除对连接的需要。

有一个使用[数据库引用 (DBRefs)](http://docs.mongodb.org/manual/applications/database-references/)约定的关系的客户端驱动程序概念，但没有服务器支持水合引用，这将导致额外的查询。

多个查询不一定是*坏事*……但总体设计目标是根据应用程序的常见用例对数据进行建模，以最有效地平衡插入、更新和读取的速度。

有关数据建模的更多信息，请参阅：

*   [MongoDB Schema Design](http://www.mongodb.org/display/DOCS/Schema+Design) .. 包括一些最佳实践和相关链接
*   [使用嵌入式、非嵌入式和桶结构设计 MongoDB 模式](https://openshift.redhat.com/community/blogs/designing-mongodb-schemas-with-embedded-non-embedded-and-bucket-structures)

# javascript - 点击返回后显示HTML显示的最后状态

> ID：12575766
> 
> 赞同：0
> 
> 时间：2012-09-25T03:21:27.593
> 
> 标签：javascript, jquery, html, css

我有这个问题，假设我单击一个事件（例如单选按钮 2）来显示（） div2 和隐藏（） div1。之后，我单击一个链接以重定向到下一页。

然后我点击后退按钮（浏览器<-）。单选按钮 2 被选中，但显示的是 div1 而不是 div2。这是一个示例源代码。如果这可以解决，任何人都可以帮助我。

```
<!-- test.php START -->
<div id="div_1" style="display: block;">
    <p>First Paragraph</p>
</div>
<div id="div_2" style="display: none;">
    <p>Second Paragraph</p>
</div>

<div>
    <input type="radio" id="rdo1" name="radio" checked/>First
    <input type="radio" id="rdo2" name="radio" />Second
</div>

<div>
    <a href="test1.php">Just to reload the page or go to other page</a>
</div>

<script type="text/javascript" src="js/jquery-1.8.0.min.js"></script> 
<script>
    $(document).ready(function() {
        $("#rdo1").click(function () {

            $("#div_1").show();
            $("#div_2").hide();
        });

        $("#rdo2").click(function () {
            $("#div_1").hide();
            console.log('test');
            $("#div_2").show();
        });
    });
</script>
<!-- test.php END-->

<!-- test1.php START -->
 DISPLAY SOMETHING
<!-- test1.php END --> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-25T03:27:46.240

Web 是**无状态**的，默认情况下浏览器不记得前一页的任何设置。所以当您按下后退按钮时，就像您使用默认 HTML 打开默认页面一样刷新页面

这是预期的默认行为

如果您想要您期望的行为，那么您需要缓存页面或存储状态，无论是在会话中还是在 cookie 中。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-25T03:25:42.117

您必须以某种方式保存状态，无论是使用 ajax 或表单帖子的服务器端，还是使用 cookie 或 localStorage 的客户端。

[您可以使用jquery-cookie 插件](https://github.com/carhartl/jquery-cookie)轻松设置 cookie，也可以使用 vanilla javascript 设置 localStorage，如下所示：

```
<!doctype html>
<meta charset="utf-8">
<title>html5 notepad</title>
<textarea></textarea>
<script>
var n = document.getElementsByTagName('textarea')[0];
n.onchange = function(){localStorage.setItem("n",n.value);}
n.value = localStorage.getItem("n");
</script> 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-09-25T03:29:29.000

您可以在 DOMReady 上检查选择了哪个单选输入。

```
$(document).ready(function() {
       var ind = $('input[name=radio]:checked').index();
       $('div[id^=div]').hide().eq(ind).show()

        $("#rdo1").click(function () {  
            $("#div_1").show();
            $("#div_2").hide();
        });

        $("#rdo2").click(function () {
            $("#div_1").hide();
            console.log('test');
            $("#div_2").show();
        });
}) 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-09-25T03:31:46.237

```
if ($('#rdo1').attr('checked')){
         $("#div_1").show();
         $("#div_2").hide();
}
if ($('#rdo2').attr('checked')){
         $("#div_1").hide();
         $("#div_2").show();
}

 $("#rdo1").click(function () {

    $("#div_1").show();
    $("#div_2").hide();
});

$("#rdo2").click(function () {
    $("#div_1").hide();
    console.log('test');
    $("#div_2").show();
});​ 
```

# android - android活动无法恢复

> ID：12575769
> 
> 赞同：1
> 
> 时间：2012-09-25T03:22:03.793
> 
> 标签：android, android-activity, recover

当我在桌面上单击我的应用程序图标时，splashactivity 将首先运行，然后在完成之前启动 loginactivity。我单击登录按钮登录。然后我来到主活动。然后我单击 HomeKey 转到 Android 主页。这时，我再次点击应用程序的图标，splashactivity首先启动。为什么mainactivity无法恢复？Othewirse，当我在 loginactivity 中单击 HomeKey 时，应用程序可以跳过 splashactivity 并恢复 loginactivity。谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-25T04:04:44.347

这是非常不寻常的，当按下主页键时，应用程序通常会恢复到它离开的状态。至少这就是我在手机上看到的所有应用程序的情况。您可以做的是使用 onPause() 和 onStop() 控制您的应用程序流程，因为它们在按下 HomeKey 时被调用。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-25T11:42:37.377

如果您将您的活动创建`LoginActivity`为启动活动，那么您`SplashActivity`只能在想要显示它时显示它。我的建议是每天一次。

在`onStart`你的`LoginActivity`：

```
@Override
protected void onStart()
{
    /* 
        get last stored time & date of onStart using SharedPreferences
        get the current time & date

        if (current day != stored day)
            store date and time
            startActivity(SplashActvity)
    */
} 
```

# android - 是否有任何代码可以在 Android 上阅读 MS Office PPT？

> ID：12575770
> 
> 赞同：4
> 
> 时间：2012-09-25T03:22:29.830
> 
> 标签：android, apache, ms-office, apache-poi

我正在寻找在 Android 上阅读 MS Office PPT 的代码，有没有人有兴趣分享代码？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-25T03:27:48.897

您可能想看看**Apache POI - Microsoft Documents 的 Java API**

Apache POI 项目的任务是创建和维护 Java API，用于处理基于 Office Open XML 标准 (OOXML) 和 Microsoft 的 OLE 2 复合文档格式 (OLE2) 的各种文件格式。简而言之，您可以使用 Java 读写 MS Excel 文件。此外，您可以使用 Java 读写 MS Word 和 MS PowerPoint 文件。

[http://poi.apache.org/](http://poi.apache.org/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-25T14:34:29.063

我在这里找到了一个有用的网址： [http ://code.google.com/p/display-msoffice-docs-android-with-apache-poi/source/checkout](http://code.google.com/p/display-msoffice-docs-android-with-apache-poi/source/checkout)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-05T08:36:07.367

Android上有一些关于Ms-office的试用库[http://code.google.com/p/android-office-demo/downloads/list](http://code.google.com/p/android-office-demo/downloads/list)

# makefile - 终端中的makefile和命令行

> ID：12575771
> 
> 赞同：1
> 
> 时间：2012-09-25T03:22:45.147
> 
> 标签：makefile, terminal

我有一个可以在终端中运行的命令行：

```
nwave nand_sim.fsdb -play hello.tcl 
```

但是当我在我的makefile中添加这一行时，我得到了：

未找到 nwave 命令

这是为什么？终端中的命令和makefile中的命令执行方式是否相同？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-25T03:33:36.663

通过搜索 PATH 环境变量来查找命令。这个设置在 shell 和 makefile 中是不一样的。最好始终包含命令的整个路径，尤其是当它不在标准目录中时。

# java - DAO 和 Hibernate 类的标准命名

> ID：12575773
> 
> 赞同：0
> 
> 时间：2012-09-25T03:22:58.590
> 
> 标签：java, hibernate, coding-style

这只是一个关于命名类的问题。我想知道命名 DAO 及其 Hibernate 实现的“标准”（或最被接受的）方法。

应该是吗？

*   HibenateDOMAINDAO
*   DOMAINDAOH休眠
*   HibernateDAODOMAIN

ETC

就个人而言，我自然会选择 HibernateDOMAINDAO，但我对这个更喜欢 DOMAINDAOHibernate 的同事进行了一些讨论。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-25T03:48:22.710

我通常更喜欢命名空间。

就像是

```
com.something.proyect.dao.Dao //Generic Dao Interface
com.something.proyect.dao.DomainDao // DomainDao Interface
com.something.proyect.dao.hibernate.HibernateBaseDao // Base Hibernate Impl
com.something.proyect.dao.hibernate.DomainDaoImpl // Hibernate Domain Dao Impl
com.something.proyect.dao.jdbc.JdbcBaseDao // JDBC Base impl
com.something.proyect.dao.jdbc.DomainDaoImpl // JDBC Domain DAo Impl
com.something.proyect.dao.anotherorm.AnotherOrmBaseDaoImpl 
```

这样我就知道休眠下的任何东西都是休眠的，我不必将休眠附加到我的类中。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-25T07:18:16.617

据我所知 Dao 缩写是 Data Access Object，它是我们使用[Dao](http://en.wikipedia.org/wiki/Data_access_object "道")的设计模式，所以它不仅与休眠有关，我们可以在任何编程语言中使用它（据我所知），

```
com.orm.dao.GenericDao // Generic Interface which uses every interface in the Dao layer,This has common methods like create,delete,update etc

com.orm.dao.DomainDao // Extended from Generic dao, additionally contains domain specific moethods

com.orm.dao.impl.GenericDaoImpl // Implementation of GenericDao interface, normally this class should be abstract  

com.orm.dao.impl.DomainDaoImpl // Implementation of DomainDao interface and extended from GenericDaoImpl class 
```

希望这会为你清除，干杯

# ruby-on-rails-3 - 管理员无需密码即可更新用户详细信息。Rails 3.x 设计

> ID：12575775
> 
> 赞同：0
> 
> 时间：2012-09-25T03:23:04.610
> 
> 标签：ruby-on-rails-3, devise

我想创建一个链接来批准用户注册，

1）第一个解决方案

```
<%= link_to "Approve", edit_user_registration_path(:id => user.id, :approved => true), :method => :put %>
```

然而它回落`No route matches [PUT] "/users/edit"`

2）我还在考虑一个额外的动作，它将响应特定的路线并更新用户注册，比如说

```
匹配 '/users/approve_user', :controller => 'users', :action => 'approve_user', :collection => { :my_action => :put}
```

在视图中：

```
%- link_to "批准", users_approve_user_path(:id => user.id), :method => :put

```

但是，它回馈了`Couldn't find User with ID=approve_user`

任何帮助将不胜感激

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-25T04:33:07.420

我认为您应该将自定义路由与设计一起使用

这直接来自设计文档（[https://github.com/plataformatec/devise](https://github.com/plataformatec/devise)），*配置路由*

```
devise_scope :user do
  get "sign_in", :to => "devise/sessions#new"
end 
```

所以在你的情况下尝试类似

```
devise_scope :user do
  post "Approve", :to => "users/approve_user"
end 
```

请注意，默认情况下，设备用户控制器位于名称空间“设计”下。

# javascript - 在Javascript中对值对进行排序

> ID：12575778
> 
> 赞同：1
> 
> 时间：2012-09-25T03:23:47.673
> 
> 标签：javascript, sorting, multidimensional-array, associative-array, indexing

我一定是错过了正确的术语，否则我确定我可以通过搜索找到答案......无论如何，这就是我想要做的。

通过 javascript，我得到了我想要排序的四个变量（A、B、C 和 D），并且仍然跟踪变量名称（因为它是用含义信息编码的）。

样本数据：

```
A = 2;
B = 1;
C = 4;
D = 3; 
```

我现在需要做的是按值顺序（4、3、2、1）对它们进行排序，这样我就可以真正知道变量名的顺序（C、D、A、B）。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-09-25T04:11:35.647

您可以保留一个值对对象数组，然后简单地对该数组进行排序。当然，数组的排序方法需要知道如何解释对象，但这可以通过向排序方法提供比较函数来完成。

首先声明你的对象数组：

```
sample_data = [
  { name: 'A', value: 2 },
  { name: 'B', value: 1 },
  { name: 'C', value: 4 },
  { name: 'D', value: 3 }
]; 
```

然后写一个比较函数：

```
function custom_compare (a,b) {
  // I'm assuming all values are numbers
  return a.value - b.value;
} 
```

然后简单地排序和反转：

```
sample_data.sort(custom_compare).reverse(); 
```

要打印出排序后的名称，只需遍历数组：

```
for (var i=0;i<sample_data.length;i++) {
  console.log(sample_data[i].name);
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-25T03:40:41.727

愿它帮助你：

[https://github.com/shinout/SortedList](https://github.com/shinout/SortedList)

这是排序列表库。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-25T03:51:12.600

我认为您应该寻找用 Javascript 实现的“**关联数组”之类的东西。**

[检查这个较早的线程以获得您的答案。](https://stackoverflow.com/questions/5199901/how-to-sort-an-associative-array-by-its-values-in-javascript)

# video - Explorer 9 的视频流问题

> ID：12575784
> 
> 赞同：1
> 
> 时间：2012-09-25T03:24:21.167
> 
> 标签：video, stream, internet-explorer-9

所以，我一直在研究两个网站（对于网页设计和编码来说还是比较新的）。我在 Dreamweaver 上的 Mac 上工作。在 Safari、Firefox 和 Chrome 上测试了这些网站，一切看起来都不错。无法访问 PC，但 Dreamweaver 表示 Explorer 没有浏览器冲突。太棒了，对吧？

几天前，我开始在办公室工作，使用 PC 并运行 Explorer 9。在那里测试我的网站时，我注意到两个问题：

1.  在我的首页 (www.lesbianzombies.com) 我有一个关于自动播放的开场视频（7-8 秒），没有控制。出于某种原因，在资源管理器上 - 它播放视频，但视频被踢出 div/frame，并覆盖了页面其余部分的菜单。我一生都无法弄清楚为什么它在资源管理器中这样做（尝试更改 css，但没有任何效果）。

2.  同时，我的其他页面上的视频不是自动播放的，并且有控件-视频不播放-甚至没有尝试在资源管理器上播放的选项。只显示海报。（例如：www.bigthingsproductions.com/projects.html）

在我的代码中，我使用的是 HTML5 视频对象。我有 mp4 选项，然后是 webm，然后是 ogg。然后我有一个闪光选项，如果那些不起作用，不可用。我以为我已经覆盖了我的基地。

我无法测试这些站点在 Explorer 7 或 8 中的行为。所以我很想知道这是否只是 v9 问题。关于如何解决这个问题的任何想法？

下面是我用于视频在帧外播放的首页的代码：

```
<div id="main">
      <div id="homeMain">

       <video id="OpenVideo" width="796" height="546" poster="QueenHome.jpg" autoplay />
  <source src="loading.mp4" type="video/mp4" />
  <source src="loading.webm" type="video/webm" />
  <source src="loading.ogv" type="video/ogg" />
  <!-- Non HTML5 fallback -->
  <object width="796" height="546" type="application/x-shockwave-flash" data="http://fpdownload.adobe.com/strobe/FlashMediaPlayback.swf"> 
  <param name="movie" value="http://fpdownload.adobe.com/strobe/FlashMediaPlayback.swf"></param>
  <param name="flashvars" value="src=http%3A%2F%2Fwww.lesbianzombies.com%2FQueenFront_flash.mp4&controlBarMode=none&poster=http%3A%2F%2Fwww.lesbianzombies.com%2Fimages%2FQueenFront.jpg&playButtonOverlay=false&autoPlay=true"></param>
  <param name="allowFullScreen" value="false"></param>
  <param name="allowscriptaccess" value="always"></param>
  <img src="images/QueenHome.jpg" alt="No video supported." title="No video supported." />
  </object>
  <!-- End Non HTML5 fallback -->
</video>

      </div>
    </div>
    <script src="scripts/videoHandler.js"></script>
  <!-- InstanceEndEditable --><!-- End main --> 
```

另外，相关的CSS：

```
#main #homeMain {
    margin: 0px;
    padding: 0px;
    background-color: #000;
} 
```

提前致谢！

# javascript - 原型“类”与 Jquery

> ID：12575785
> 
> 赞同：3
> 
> 时间：2012-09-25T03:24:23.627
> 
> 标签：javascript, jquery, prototype

我目前使用原型，例如，如果我想创建一个类或我会做类似的事情（将它与 asp.net 一起使用）

```
function MyTestClass()
{

this.MyHtmlDiv = $("myHtmlDiv");
this.MyButton = $("myButton");
this.init();
}

MyTestClass.prototype.init = function()
{
  Event.Observe(...some code here ..);
  Event.Observe(...more code...);
} 
```

所以你明白了。我喜欢它的组织方式，但我在其他帖子中读到 jquery 更好。我想开始使用它但是.. 是否可以创建这样的“类”，整洁吗？我通常为每个 aspx 页面创建一个单独的 .js 文件。如何使用 JQuery 创建这样的类？

任何指针、链接、想法或建议将不胜感激。当我用谷歌搜索这个时，我看到了一些 jquery 函数，但还没有真正找到一个很好的模板，如果我要迁移到 jquery，我可以按照上面的方法来维护它。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-25T03:31:45.690

jQuery 与您现在使用的样式没有冲突，您只需要改变您对 jQuery 选择器如何工作以及如何绑定事件处理程序等的想法。

```
function MyTestClass() {
  // note jQuery's selector is different from Prototype    
  this.MyHtmlDiv = $("#myHtmlDiv");
  this.MyButton = $("#myButton");
  this.init();
}

MyTestClass.prototype.init = function() {
  this.MyHtmlDiv.on('event_type', function() {
    // some code
  });
  this.MyButton.on('event_type', function() {
    // some code
  });
} 
```

# xml - 子选择中的 oracle xmlcast(xmlquery)

> ID：12575786
> 
> 赞同：3
> 
> 时间：2012-09-25T03:24:24.850
> 
> 标签：xml, oracle

我有一个带有 xmltype 列和其他非 xmltype 列的表（Oracle 11.2.0.2）。我想根据一些非 xmltype 列的值加上 xmltype 列的内容进行选择。

我已经尝试在我的选择中使用 xmlquery 来执行此操作，但我得到了一些有趣的结果。这是我的数据的简化版本：带有用户名和订单详细信息的订单表。

```
-- create order table
create table orders(username varchar2(20), order_data xmltype);

-- an order entered by jim
insert into orders values ('jim', xmltype('
<ord:order xmlns:ord="http://www.blah.com/order/1.0">
   <ord:zip>123</ord:zip>
   <ord:date_time>2012-09-24T00:27:00</ord:date_time>
   <ord:item>
      <ord:product>A</ord:product>
      <ord:quantity>12</ord:quantity>
   </ord:item>
   <ord:item>
      <ord:product>B</ord:product>
      <ord:quantity>34</ord:quantity>
   </ord:item>
</ord:order>'));

-- an order entered by bob
insert into orders values ('bob', xmltype('
<ord:order xmlns:ord="http://www.blah.com/order/1.0">
   <ord:zip>123</ord:zip>
   <ord:date_time>2012-09-24T00:27:00</ord:date_time>
   <ord:item>
      <ord:product>A</ord:product>
      <ord:quantity>56</ord:quantity>
   </ord:item>
   <ord:item>
      <ord:product>C</ord:product>
      <ord:quantity>78</ord:quantity>
   </ord:item>
</ord:order>')); 
```

作为示例查询，我尝试通过执行以下操作查找 Bob 输入的所有超过 1 个项目的订单：

```
SELECT username, itemcount
FROM
  (SELECT username,
    XMLCAST(XMLQUERY('count(/*:order/*:item)' PASSING order_data RETURNING CONTENT) AS  NUMBER) itemcount
  FROM orders
  )
WHERE username = 'bob'
AND itemcount > 1 
```

但它不会返回任何结果，但是如果我注释掉最后一行（AND itemcount > 1），我会得到：

```
username | linecount
--------------------
bob      |         2 
```

...我不确定为什么会这样，我想也许它没有将其视为正确的类型，但我将其作为 xmlcast 的数字。

更令人费解的是，如果我将最后一行设置为：

```
AND itemcount = 2 
```

...它再次消失，但如果我将其更改为：

```
AND itemcount != -7 
```

...它重新出现在结果中，但值为零：

```
username | linecount
--------------------
bob      |         0 
```

所以，我很困惑——我一定做错了什么，但我看不出是什么。

我找到了一种使用 xmltable 的解决方法，它可以正常工作，所以这对我有用：

```
SELECT username, X.*
FROM orders,
  XMLTABLE ( 
      xmlnamespaces ('http://www.blah.com/order/1.0' AS "ord" ),
      '/ord:order' PASSING order_data
          COLUMNS 
              itemcount number PATH 'count(ord:item)' ) AS X
WHERE username = 'bob'
AND itemcount > 1 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-25T04:21:11.903

我认为这是一个 Oracle 错误。它在 11.2.0.1 上对我来说很好，但就像你在 11.2.0.2 上描述的那样失败。我查看了 My Oracle Support，但找不到任何东西。您可能需要联系 Oracle 支持以帮助解决此问题。

# c++ - g++-4.1 模棱两可的类模板实例化解决方法？

> ID：12575787
> 
> 赞同：0
> 
> 时间：2012-09-25T03:24:54.757
> 
> 标签：c++, templates, template-meta-programming

此代码被其他编译器接受，但失败并显示`g++-4.1`：

```
template<typename T> struct foo;

template<template<typename> class ClassTemplate, typename Arg>
  struct foo<ClassTemplate<Arg> >
{
  typedef Arg type;
};

template<template<typename, typename> class ClassTemplate, typename Arg1, typename Arg2>
  struct foo<ClassTemplate<Arg1,Arg2> >
{
  typedef Arg1 type;
};

template<typename T1, typename T2 = int> class bar {};

int main()
{
  typedef bar<int> test_me;
  typedef foo<test_me>::type type;
  return 0;
} 
```

编译器输出：

```
$ g++ test.cpp 
test.cpp: In function ‘int main()’:
test.cpp:20: error: ambiguous class template instantiation for ‘struct foo<bar<int, int> >’
test.cpp:5: error: candidates are: struct foo<ClassTemplate<Arg> >
test.cpp:11: error:                 struct foo<ClassTemplate<Arg1, Arg2> >
test.cpp:20: error: ‘type’ in class ‘foo<bar<int, int> >’ does not name a type 
```

的默认模板参数的存在`bar`似乎是罪魁祸首。

有没有其他方法可以`foo`为这个编译器实现？

# javascript - 合并两个融合表样本不工作

> ID：12575790
> 
> 赞同：0
> 
> 时间：2012-09-25T03:25:27.687
> 
> 标签：javascript, google-maps-api-3, google-fusion-tables

我是融合表和谷歌地图的新手。我尝试将这两个样本合二为一

[样品1](http://gmaps-samples-v3.googlecode.com/svn/trunk/infowindow/tabs.html)

[样品2](https://developers.google.com/fusiontables/docs/samples/change_query)

但我不能让这两个功能同时工作。带有选项卡的信息窗口工作正常，但如果我选择下拉列表并单击“映射它”按钮没有任何反应，它应该相应地更新。

感谢任何人可以帮助我找出它有什么问题，这几天我已经受苦了。谢谢

我的最终代码 [点击我](https://docs.google.com/open?id=0B5dnb9JhVY-8WnZxTmc0Y2Eza3c)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-25T21:24:47.280

我将[您的代码放在 jsFiddle 上并进行了一些更正](http://jsfiddle.net/odi86/Um2ag/)。

*   您两次添加了 Google 地图库，但不起作用
*   图层是`refreshFusion()`函数无法访问的局部变量
*   生成的 where 子句是错误的，我将其更改为使用不带引号的列名，而不是等号 ( `=`) `CONTAINS`，最后将其更改为新语法`setOptions()`

# codeigniter - CodeIgniter：我的 upsert 函数不适用于 my_model / my_controller

> ID：12575792
> 
> 赞同：1
> 
> 时间：2012-09-25T03:25:34.287
> 
> 标签：codeigniter, function, upsert

本月第一次在 CodeIgniter 中使用 my_model 和 my_controller，我想我几乎可以完成这项工作。

我有一个插入功能正常工作，现在我正在尝试添加一个更新，如果有一个 ID。

这是我的代码：

```
function upsert_client($client_id = 0)
{
    load_model('client_model');
    $this->insertMethodJS();

    $this->fields['client'] = $this->_prototype_client();

    $user_id = get_user_id();
    $company_id = get_company_id();

    if ($client_id)
    {
        $this->data['client'] = $this->client_model->get_record($client_id);
    }   

    if (!$this->ion_auth->in_group(GROUP_NAME_MANAGER, $user_id))
    {
        redirect('members/dashboard');
    }

    if ($_POST)
    {
        $this->load->helper('string');  

        if ($this->_validate_client())
        {   

        $fields = $this->input->post(null , TRUE);
        $fields['user_id'] = $user_id;
        $fields['company_id'] = $company_id;
        $fields['active'] = 1;

            if ($client_id)
            {
            $fields['id'] = $this->client_model->get_record($client_id);    
            unset($fields['billing']);
            $this->client_model->update($client_id, $fields);       
            }

            else 
            {
            unset($fields['billing']);
            $this->client_model->insert($fields);
            redirect('members/clients/manage_clients');
            }

        }
    }

    $this->template->write_view('content',$this->base_path.'/'.build_view_path(__METHOD__), $this->data);           
    $this->template->render();
}

function _prototype_client()
{
    $fields = array();

    $fields['id']   = 0;
    $fields['name'] = '';           

    return $fields;
} 
```

从我的client_model：

```
class Client_model extends MY_Model {

function get_record($client_id)
{

    $query = $this->db->select('id')
    ->where(array('id'=>$client_id))
    ->get('clients');
    return $query->row_array();
} 
```

}

每次我尝试编辑“客户端”时，它只会插入一个新的......我目前正在尝试编辑的是“名称”字段。

我的编辑按钮：

```
<td><a href="add_client/<?= $client->id; ?>"><button class="btn btn-inverse" style="float: right;" type="button">Edit</button></a></td> 
```

任何帮助表示赞赏，谢谢！如果您需要任何其他详细信息，请告诉我...

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-25T23:52:29.107

您的超链接指向“add_client”，而您显示的功能称为“upsert”您是否调用了正确的 URL？

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-25T20:17:39.080

我从未特别使用过 ion auth，但据我所知，您有几个未正确引用的函数。

```
load_model('client_model');
//Should be
$this->load->model('client_model'); 
```

还应将其他一些功能引用为

```
$this->function_name();
//Instead of just
function_name();
//Unless they are in another library
$this->lib_name->function_name(); 
```

我不确定这是否能很好地解决您的问题，但我注意到了一些事情。

# ruby-on-rails - 无法在 RVM JRuby gemset 上安装 gem：SocketError: initialize: name or service not known (http://rubygems.org/specs.4.8.gz)

> ID：12575795
> 
> 赞同：1
> 
> 时间：2012-09-25T03:25:50.287
> 
> 标签：ruby-on-rails, linux, gem, rvm, jruby

我正在尝试在 GNU/Linux Debian 上使用 RVM 安装 JRuby 和 Ruby on Rails（或“JRuby on Rails”），但我遇到了一些错误。这就是我所做的。

首先，我进行了这些安装（因为**rvm requirements**显示的要求）：

```
sudo apt-get install curl g++ openjdk-6-jre-headless
sudo apt-get install ant openjdk-6-jdk 
```

然后（如您所见，错误在最后）：

```
pablo@martigomez:~$ rvm install jruby --1.9
jruby-1.6.7.2 - #fetching 
Cloning from git://github.com/jruby/jruby.git, this may take a while depending on your connection...
Initialized empty Git repository in /home/pablo/.rvm/repos/jruby/.git/
remote: Counting objects: 197772, done.
remote: Compressing objects: 100% (45785/45785), done.
remote: Total 197772 (delta 139597), reused 196103 (delta 138126)
Receiving objects: 100% (197772/197772), 108.15 MiB | 102 KiB/s, done.
Resolving deltas: 100% (139597/139597), done.
HEAD is now at 8e849de Tag ERB specs that depend on default runs sharing a scope.
From git://github.com/jruby/jruby
 * branch            master     -> FETCH_HEAD
Already up-to-date.
Copying from repo to src path...
jruby-1.6.7.2 - #ant jar

jruby-1.6.7.2 - #ant jar  -Djruby.default.ruby.version=1.9
Building Nailgun
jruby-1.6.7.2 - #installing to /home/pablo/.rvm/rubies/jruby-1.6.7.2
jruby-1.6.7.2 - adjusting #shebangs for (jrubyc jirb_swing jirb jgem rdoc ri spec autospec testrb ast generate_yaml_index.rb).
jruby-1.6.7.2 - #importing default gemsets (/home/pablo/.rvm/gemsets/)
Copying across included gems
pablo@martigomez:~$ rvm jruby
pablo@martigomez:~$ ruby -v
jruby 1.6.7.2 (ruby-1.9.2-p312) (2012-09-24 26e08ba) (OpenJDK 64-Bit Server VM 1.6.0_18) [linux-amd64-java]
pablo@martigomez:~$ rvm --create use jruby@r328
Using /home/pablo/.rvm/gems/jruby-1.6.7.2 with gemset r328
pablo@martigomez:~$ gem list

*** LOCAL GEMS ***

pablo@martigomez:~$ gem install rails --version 3.2.8
WARNING:  Error fetching data: SocketError: initialize: name or service not known (http://rubygems.org/specs.4.8.gz)
WARNING:  Error fetching data: SocketError: Network is unreachable (http://rubygems.org/latest_specs.4.8.gz)
ERROR:  While executing gem ... (Gem::DependencyError)
    Unable to resolve dependencies: rdoc requires json (~> 1.4); treetop requires polyglot (>= 0), polyglot (>= 0.3.1) 
```

我已经搜索过，但目前我还没有找到有用的东西。没有宝石很奇怪。这是我第一次使用 JRuby，但是当我在网上搜索时，当您安装 JRuby 时，您应该安装了一些基本的 gem，对吧？那么这可能是什么问题和解决方案呢？

提前致谢！

# plone - Diazo：在 Plone 中没有样式覆盖窗口

> ID：12575797
> 
> 赞同：0
> 
> 时间：2012-09-25T03:25:57.890
> 
> 标签：plone, diazo, xdv

我正在升级到 Plone 4.2（从 4.0.1）并将我的主题产品从 XDV 移动到 Diazo。

出现了一个错误，当我将表单从叠加层提交到自定义页面模板时，生成的页面是“普通”的。“普通”是指唯一可见的内容是主要内容区域，没有 plone 导航、徽标、没有样式表等。有一条“信息”消息传递到此页面，并且确实呈现在页面顶部（尽管没有任何 plone 或主题样式的样式）。就像目标页面完全呈现在 Plone 空间之外。

我尝试添加到我的 rules.xml 并将相应的 ajax_load = python: request.form.get('ajax_load') 添加到主题控制面板“高级设置”部分的参数中。然而，覆盖仍然是主题，表单目标页面仍然是“普通”（我不会说“非主题”，因为即使是非主题的 Plone 页面仍然具有基本徽标、导航等）。

我还尝试在我的叠加模板中添加并粘贴一个带有此 ID 的项目 - 叠加仍然是主题。

我正在使用主题规则

不知道为什么覆盖仍然是主题，如果这是问题的一部分？也不确定为什么表单目标页面模板呈现“普通”。

如果我正常提交相同的表单（不是来自覆盖），则目标页面呈现正确的主题......

任何调试这个的提示都会非常感谢。

我正在使用 Plone 4.2.0.1 和 plone.app.theming 1.1a2，我的主题是基于文件系统的。

* * *

**编辑**：好的，我的一些覆盖表单工作正常。不同之处似乎在于表单操作的位置：

form tal:attributes="action request/URL" - 工作正常

form tal:attributes="action string:${context/absolute_url}/@@view" - 当从覆盖表单调用时，在第一次渲染时给我“普通”页面（如上所述，当从同一个表单调用时很好，不是在叠加层中）

请注意，“普通”页面 html 是这样的（注意没有基本的 Plone 或主题头包含）：

```
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd"> <html xmlns="http://www.w3.org/1999/xhtml" lang="en" xml:lang="en"><head><meta http-equiv="Content-Type" content="text/html; charset=utf-8" /><base href="http://localhost:8080/Plone/sectionfoo/sectionbar/mypage" /><!--[if lt IE7]></base><![endif]--></head>
<body class="template-view portaltype-myCustomType site-Plone section-sectionfoo icons-on havePortlets haveLeftPortlets haveRightPortlets" dir="ltr">
<h1 class="documentFirstHeading">Why is this page plain?</h1>
... 
```

我还尝试完全卸载我的主题产品 - 我仍然在 vanilla plone 中看到这些特定覆盖形式的相同行为......

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-27T17:47:53.767

如果您使用 JavaScript .prepOverlay() 调用来设置 ajax 覆盖，那么它将自动附加 ajax_load 标志作为通过 AJAX 使用的查询字符串的一部分，以获取显示在覆盖中的代码。

请参阅[http://pypi.python.org/pypi/plone.app.jquerytools/1.5#ajax](http://pypi.python.org/pypi/plone.app.jquerytools/1.5#ajax)了解 ajax_load 的作用。简而言之，它会导致服务器剥离除内容区域之外的所有内容。目的是避免将不必要的页面部分加载到已显示在页面内的叠加层中。

如果您加载的表单正在向自身发布（Zope/Plone 非常常见的做法），那么 ajax_load 参数可能位于表单操作 URL 中。因此，您只得到返回的内容区域。

因此，您需要在自定义表单模板中做一些工作，以确保在设置表单操作之前从 URL 的查询字符串中去除“ajax_load”。此外，从表单中删除任何“ajax_load”隐藏输入。

# sql - 使用 T-SQL 查询通过外键关系删除对象

> ID：12575800
> 
> 赞同：1
> 
> 时间：2012-09-25T03:26:26.297
> 
> 标签：sql, sql-server, entity-framework, tsql

寻找一种方法将以下 LinQ 写入实体查询作为 T-SQL 语句。

```
repository.ProductShells.Where(x => x.ShellMembers.Any(sm => sm.ProductID == pid)).ToList().ForEach(x => repository.ProductShells.Remove(x)); 
```

下面显然不正确，但我需要它来删除相应的 ProductShell 对象，其中任何 ShellMember 包含的 ProductID 等于传入的变量`pid`。我认为这将涉及一个连接语句来获取相关的 ShellMembers。

```
repository.Database.ExecuteSqlCommand("FROM Shellmembers WHERE ProductID={0} DELETE FK_ProductShell", pid); 
```

我为 FK_ShellMembers_ProductShell 外键启用了级联删除，因此当我删除 ProductShell 时，它将删除与其关联的所有 ShellMembers。我将把这个语句传递给 System.Data.Entity`Database.ExecuteSqlCommand`方法。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-25T05:36:55.357

您应该始终显示表结构和外键链接。但是，它应该看起来像这样。

这假设两个表之间的链接是 productshell.shellid=shellmembers.shellid

```
delete productshell
where shellid in (
    select shellid
    from shellmembers
    where productid={0}
    ) 
```

也可以写成join

```
delete productshell
from productshell
join shellmembers on productshell.shellid=shellmembers.shellid
where shellmembers.productid={0} 
```

# progressdialog - 无论我如何尝试，都无法显示进度对话框

> ID：12575801
> 
> 赞同：0
> 
> 时间：2012-09-25T03:26:31.393
> 
> 标签：progressdialog

好吧，这个越来越令人沮丧了。我已经在此处查看了有关 AsyncTasks 和常规线程中的进度对话框栏的帖子，但没有任何东西可以按照我的意愿工作。

在 AsyncTask 我是这样做的：

```
@Override
 protected void onPreExecute()
 {
     super.onPreExecute();               
     // initialize the dialog
     progressDialog.setTitle("Please wait...");
     progressDialog.setMessage("Downloading team data...");
     progressDialog.setIndeterminate(true);
     progressDialog.setCancelable(true);
     progressDialog.show();
 }

    @Override
    protected Boolean doInBackground(String... parms) {
    ... stuff

     @Override protected void onPostExecute(Boolean result) {
     progressDialog.dismiss();
  } 
```

当我执行上述操作时，在 doInBackground 作业完成之前我什么也得不到。我读过的笔记说，在 main 中使用 get() 方法会阻塞进度条。

好的。我必须等待任务完成才能继续，所以我在没有 AsyncTask 的情况下写了同样的东西：

公共类 LoadTeamData2 {

```
 Context mContext;
    String teamName = "";
    Boolean result;
    String dataload = "";
    ProgressDialog progressDialog;

    public LoadTeamData2(Context mContext, String team) {
    this.mContext = mContext;
    teamName = team;
    }

    public Boolean LoadData () {

         ProgressDialog progressDialog = new ProgressDialog(mContext);
         progressDialog.setTitle("Please wait...");
         progressDialog.setMessage("Downloading team data...");
         progressDialog.setIndeterminate(true);
         progressDialog.setCancelable(true);
      //   progressDialog.show();
         ProgressDialog.show(mContext, "Title", "Message", true, true);

            ... more stuff

         progressDialog.dismiss();
             return true;
            } 
```

从上面我得到了进度对话框栏的最简短的闪光。

我什至从调用的过程中取出了进度对话框栏，并将 show() 和 dismiss() 方法放在对 DoStuff 的调用的两侧。依然没有。

我的智慧到此为止。有任何想法吗？谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-01T18:25:57.120

您可以`ProgressDialog`在开始执行之前启动`AsyncTask`，例如：

```
gpsProgress = ProgressDialog.show(this, "Searching...", "Getting...", true, true, new DialogInterface.OnCancelListener() {
    public void onCancel(DialogInterface dialog) {

    }
});

(new SampleAsyncTask(this)).execute(param..); 
```

你`onPostExecute(Result)`可以关闭对话框。

请注意，DialogBox 显示不在 中`preExecute()`，而是在启动`AsyncTask`.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-10-24T08:20:18.630

调用 asyncTask.get(XX,XX) 阻塞 UIThread，

我的解决方案是将 UIlogic 放在 onPostExecute() 方法中，删除 asyncTask.get(XX,XX)

# cakephp - cakephp 插件搜索 cakeDC 使用

> ID：12575803
> 
> 赞同：1
> 
> 时间：2012-09-25T03:26:53.100
> 
> 标签：cakephp, search, plugins, cakedc

我正在使用 cakeDC (with cakephp 2.x)(https://github.com/CakeDC/search) 提供的 cakephp 搜索插件的 2.0 版本。我需要在许多模型中进行搜索，但这些模型不相关。所以我创建了一个新模型（搜索）和一个控制器（搜索）。我收到了这个错误

“注意（8）：间接修改重载属性 SearchesController::$paginate 无效 [APP/Controller/SearchesController.php, line 17]”

模型：

```
App::uses('AppModel', 'Model');
class Search extends AppModel {
    public $actsAs = array('Search.Searchable');
    public $useTable = false;
    public $filterArgs = array(
        'terminada' => array(
            'type' => 'like',
            'field' => array(
                'Sludge.terminada',
                'SurfacesWater.terminada',
                'ResidualWater.termianda',
                'UndergroundWater.terminada',
                'PotableWater.terminada',
                'SpecifiedsResidualsWater.terminada'
            )
        ),
        'revisada' => array(
            'type' => 'like',
            'field' => array(
                'Sludge.revisada',
                'SurfacesWater.revisada',
                'ResidualWater.revisada',
                'UndergroundWater.revisada',
                'PotableWater.revisada',
                'SpecifiedsResidualsWater.revisada'
            )
        ),
        'eliminada' => array(
            'type' => 'like',
            'field' => array(
                'Sludge.eliminada',
                'SurfacesWater.eliminada',
                'ResidualWater.eliminada',
                'UndergroundWater.eliminada',
                'PotableWater.eliminada',
                'SpecifiedsResidualsWater.eliminada'
            )
        ),
    );
    public function orConditionsDates($data = array()) {
        $start = date('Y-m-d');
        $end = date('Y-m-d', strtotime('-1 month'));
        $cond = array(
            'OR' => array(
                $this->alias . '.monitoreofecha LIKE <=' => $end,
                $this->alias . '.monitoreofecha LIKE >=' => $start,
                ));

        return $cond;
    }
} 
```

控制器：

```
App::uses('AppController', 'Controller');
class SearchesController extends AppController {
    public $components = array('Search.Prg');
    public $presetVars = true; // using the model configuration
    public function index() {
        $this->Prg->commonProcess();
        $this->paginate['conditions'] = $this->Search->parseCriteria($this->passedArgs);
        $this->set('searches', $this->paginate());
    }
} 
```

使用烘焙创建的任何索引的视图都是相同的。知道我的错误是什么吗？谢谢大家！！

S。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-25T08:58:48.030

如果你这样做，你需要先在你的控制器中声明分页：

```
public $paginate = array(); 
```

或直接在您的方法中初始化它

```
 $this->paginate = array(); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-25T08:59:04.763

尝试这样做： App::uses('AppController', 'Controller');

```
class SearchesController extends AppController {
  public $components = array('Search.Prg');

  public $presetVars = true; // using the model configuration    

  public $paginate = array();

  public function index() {

    $this->Prg->commonProcess();

    $cond = $this->Search->parseCriteria($this->passedArgs);

    $this->set('searches', $this->paginate('Search', $cond));
  }
} 
```

# c++ - C++11 标准“ISO/IEC 14882:2011(E)”名称中的“E”代表什么

> ID：12575807
> 
> 赞同：11
> 
> 时间：2012-09-25T03:27:49.323
> 
> 标签：c++, c++11, iso

我看到一些地方将 C++11 标准称为**"ISO/IEC 14882:2011(E)"**，而[ISO 站点](http://www.iso.org/iso/iso_catalogue/catalogue_ics/catalogue_detail_ics.htm?ics1=35&ics2=60&ics3=&csnumber=50372)将其称为**"ISO/IEC 14882:2011"**，没有尾随的**"(E)"** .
那个**“E”**代表什么？

**编辑**：关于修订号的说明，该标准于2011年8月12日获得ISO批准，并于9月发布。[这是一个以](http://www.scribd.com/doc/77415310/ISO-IEC-14882-2011)**“(E)”**结尾的，它清楚地表明日期是 2011 年 9 月 1 日。所以我认为它不太可能很快就已经是第五次修订。

* * *

## 回答 #1

> 赞同：17
> 
> 时间：2012-09-25T04:28:48.980

AFAIK，“（E）”表示英语语言标准，而“（F）”表示法语。ISO 网站上的许多文件都有英文和法文版本。事实上，[维基百科](http://en.wikipedia.org/wiki/International_Organization_for_Standardization)提供了一些帮助，指出 ISO 的三种官方语言是英语、法语和俄语。

页面上的链接之一是：

> ISO 的 3 个官方全称可以在 PDF 文档前言部分的开头找到：[ISO/IEC Guide 2:2004 Standardization and related activities — General words](http://www.iso.org/iso/iso_iec_guide_2_2004.pdf)。

如果您下载该文档，您会看到它的代码是：ISO/IEC GUIDE 2:2004(E/F/R)，因为它是英文、法文和俄文的。

不过，我还没有找到 ISO 本身定义符号的位置，但它可能会出现在他们的指南之一中。

* * *

[J-16 SDiZ](https://stackoverflow.com/users/88442/j-16-sdiz)指出，[Unicode 联盟](http://www.unicode.org/faq/unicode_iso.html)网站明确指出：

> 问：ISO/IEC 10646 是否也可以免费下载？
> 
> 答：是的。ISO/IEC 10646:2011 (E) 可从以下网址免费下载：[http](http://standards.iso.org/ittf/PubliclyAvailableStandards/index.html) ://standards.iso.org/ittf/PubliclyAvailableStandards/index.html 。该页面列表中的“(E)”和“(F)”分别指的是英文版或法文版标准。

# css - CSS 资源/教程

> ID：12575813
> 
> 赞同：0
> 
> 时间：2012-09-25T03:29:01.950
> 
> 标签：css, resources

我正在寻找资源来提高我的 CSS 技能。我可以做基本的定位和诸如此类的事情，似乎针对 CSS 的资源要么非常简单，省略了非常重要的细节，要么是我并不真正寻找的高级主题（例如跨浏览器圆形图像） .

基本上，我通常对我想要它的外观有一个想法，但是让它看起来像我想象的那样完全是另一回事。你会建议什么来源，是书籍还是互联网？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-25T03:33:30.230

[HTMLDog](http://www.htmldog.com/)是我学习 HTML/CSS 的方式。

还做了一个快速的谷歌搜索，发现了这个：
[http ://www.noupe.com/css/css-layouts-40-tutorials-tips-demos-and-best-practices.html](http://www.noupe.com/css/css-layouts-40-tutorials-tips-demos-and-best-practices.html)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-25T04:53:37.813

我想你有基本的 css 并且想要改进它？如果你有基本的我认为很容易改进它所以你必须有关于制作“*史诗*”的想象力并且不知不觉你会提高你的css“技能”

所以当我第一次学习css时，下面的链接：

简单基本但重要：1\. [https://www.google.co.id/](https://www.google.co.id/) <史诗一

1.  [http://www.w3schools.com/](http://www.w3schools.com/)

    提示和技巧：

2.  [http://www.script-tutorials.com/](http://www.script-tutorials.com/)

3.  [http://djogzs.blogspot.com/](http://djogzs.blogspot.com/) * 印尼语版本，你需要用谷歌翻译，但你会在那里找到史诗教程

4.  另一个我只是在我喜欢的网站上按住 CTRL + U 或 F12 XD

这就是我对如何学习 css 和改进它的看法，Cheerrsss ;))

**编辑：** “我认为你不需要书或文章，因为我的经验我的 css 通过点击 f12 XD 提高了 60%，从网站上的文章提高了 20% 20% 我不知道>_< *但你必须有基本的经验”

# java - 为什么当我运行我的 Netty 应用程序时，slab 中有这么多 TCPv6 对象

> ID：12575820
> 
> 赞同：0
> 
> 时间：2012-09-25T03:29:38.527
> 
> 标签：java, linux, netty

我有一个 netty 应用程序来保存大约 1,500,000 个长连接。当我这样做时，我使用了'slabtop'，发现slab中有1,500,000个TCPv6对象（大约3GB），但我根本没有使用IPv6，所有连接都完全基于IPv4。为什么？

更新：我的服务器是 CentOS 5.5，Linux 版本 2.6.18-194.el5(x86_64)，我使用 Java HotSpot(TM) 64 位服务器 VM 来运行我的应用程序

# java - Java 游戏，游戏结束后按用户命令重启

> ID：12575823
> 
> 赞同：0
> 
> 时间：2012-09-25T03:29:54.757
> 
> 标签：java

在 Java 中，我有一个游戏，它的运行方式如下：

```
 public void start(){

    startGame();

 } 
```

现在我希望每次游戏结束时，在用户点击游戏屏幕后重新运行游戏。我在游戏中有对象，我不希望将它们一个一个删除，但如果可以完全删除所有创建的对象并重新运行游戏。这可能吗，如果是的话，有人可以告诉我任何方式吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-25T03:39:05.340

在这个基于按钮的记忆[游戏中](https://sites.google.com/site/drjohnbmatthews/buttons)，一个`javax.swing.Timer`动画开始屏幕。按下`Start`按钮会暂停计时器并调用`resetGame()`。当一场比赛获胜时，按钮被重置并且计时器恢复。

# ios - 将 UIImageView 从正常更改为突出显示不起作用

> ID：12575824
> 
> 赞同：2
> 
> 时间：2012-09-25T03:30:06.130
> 
> 标签：ios, uitableview, uiimageview

我有一个 UIImageView 作为我的 UITableViewCell 子类的背景。我已将图像放在图像字段中，并将该图像的较轻版本放在突出显示字段中。在我的 UITableViewCell 子类中，我添加了代码以将该 ImageView 设置为突出显示，但没有任何变化......

```
- (void)setSelected:(BOOL)selected animated:(BOOL)animated {
    [super setSelected:selected animated:animated];
    // Configure the view for the selected state
    self.backgroundImageView.highlighted = selected;
    NSLog(@"selected: %d", selected);
} 
```

我已验证 self.backgroundImageView 已正确连接为 IBOutlet。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-07-01T13:56:00.180

只需像这样初始化 UIImageView ：

```
[[UIImageView alloc] initWithImage:[UIImage imageNamed:@"gray_arrow"] highlightedImage:[UIImage imageNamed:@"white_arrow"]]; 
```

如果您需要保持它突出显示，在您的 tableview 的 didSelectRowAtIndexPath 方法中，获取代表您的 UIImageView 的子视图并使其突出显示。像这样的东西：

```
UIImageView* imageView = [[[dataSource objectAtIndex:[indexPath row]] subviews] objectAtIndex:2]
[imageView setHighlighted:YES]; 
```

将其他单元格中的 UIImageView 设置为：

```
 [imageView setHighlighted:NO]; 
```

# c++ - 内存分配（指针和堆栈）

> ID：12575825
> 
> 赞同：-1
> 
> 时间：2012-09-25T03:30:28.203
> 
> 标签：c++, pointers, stack, segmentation-fault

我创建了一堆指针，用于创建二叉树。虽然我可以用单个节点填充堆栈，但在尝试将顶部节点的内存分配给一个新节点以便我可以创建一个实际的树时，它会出现段错误。举个例子：

```
TreeNode *c = new TreeNode;
c = stack.top(); //this segfaults 
```

我不确定我是否误解了它是如何工作的，但由于两者都是同一类型，c 不应该能够等于堆栈的顶部吗？我已经坚持了几个小时了。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-25T03:51:39.637

我认为您误解了指针在 C++/C 中的工作方式。它们只是表示内存地址的整数值。关键字为类分配内存，`new`然后调用该类的构造函数。

所以从你写的

```
TreeNode *c = new TreeNode; 
```

为 Treenode 分配一个指针。然后为 Treenode 分配内存，调用它的构造函数并将这个内存块的地址分配给指针。

`c = stack.top(); //this segfaults`

获取函数调用stack.top()返回的地址/指针值，赋值给变量c。

正如克里斯所说，即使您的代码已经工作，它也是一个泄漏，因为在 c++ 中没有垃圾收集器，所以当您执行 c= stack.top() 时，先前分配的内存只是在堆上丢失。

任何一个

```
Treenode *c = new Treenode;
delete c;
c = stack.top(); 
```

或者

```
Treenode *c = stack.top(); 
```

您可观察到的问题在于某处对 stack.top() 的调用。我建议像这样的指针教程。

[http://www.codeproject.com/Articles/627/A-Beginner-s-Guide-to-Pointers](http://www.codeproject.com/Articles/627/A-Beginner-s-Guide-to-Pointers)

# c - 使用 execv（C 语言）从 linux 命令提示符运行命令

> ID：12575826
> 
> 赞同：2
> 
> 时间：2012-09-25T03:30:28.703
> 
> 标签：c, unix, argv, execv

到目前为止，我唯一感到困惑的部分是如何使用第一个参数设置 execv 作为当前工作目录。我已经尝试了两个“。” 和“~”，都没有对屏幕执行任何操作；“/”也一样。和“/~”。我对如何让 execv 运行这样的事情感到困惑：

```
$ ./prog ls -t -al 
```

并让它在当前目录或与文件所在的目录相同的目录中执行程序执行后的命令（存储在 argv 中）（这将根据使用它的人而有所不同。）

我的代码：

```
#include <stdlib.h>
#include <stdio.h>
#include <unistd.h>
#include <sys/types.h>

void main(int argc, char *argv[])
{
    int pid;
    int count = 0;
    char *argv2[argc+1];

    for(count = 0; count < argc-1; count++){
        argv2[count] = argv[count+1];
        printf("Argv2: %s\n", argv2[count]);  //just double checking
        argv2[argc-1] = NULL;
    }

    pid = fork();
    if(pid == 0){
        printf("Child's PID is %d. Parent's PID is %d\n", (int)getpid, (int)getppid());
        execv(".", argv2);       //<---- confused here
    }
    else{
        wait(pid);
        exit(0);
    }
} 
```

一些示例输出：

```
$ ./prog ls -t -al
Argv2: ls
Argv2: -t
Argv2: -al
Child's PID is 19194\. Parent's PID is 19193 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-25T11:19:15.997

我猜**execv**是需要使用的。**execvp**要好得多，因为它会在您的 PATH 设置中查找命令。

```
execv(".", argv2);       //<---- confused here 
```

...

```
#include <errno.h>
#include <string.h>
if ( execv(argv2[0],argv2) )
{
    printf("execv failed with error %d %s\n",errno,strerror(errno));
    return 254;  
} 
```

* * *

```
wait(pid); 
```

...

```
pid_t wait_status = wait(&pid); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-26T13:16:19.170

```
/* main() returns int */
int main(int argc, char *argv[])
{
        int pid;

        pid = fork();
        if(pid == 0){
                printf("Child's PID is %d. Parent's PID is %d\n"
                      , (int)getpid, (int)getppid());
                execv(argv[1], argv+1);
        }
        else{
        wait(NULL);
        exit(0);
        }

        return 0;
} 
```

UPDATE: execv() needs the **absolute path** of the executable; for files in the current directory you would have to construct that path (eg via pwd()). If you want the executable to seached via the $PATH environment variable, you could use execvp(), which does all the seaching for you.

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-09-25T05:17:14.180

按照惯例，第一个参数应该指向与正在执行的文件关联的文件名。你想执行`ls`，所以第一个参数应该是`/bin/ls`，这意味着代码是

```
execv("/bin/ls", argv2); 
```

你可以试试

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-09-26T13:06:06.553

第一个参数是你要运行的程序的绝对路径；换句话说，您在终端中键入的命令的第一部分。您可以使用命令找到程序所在的位置`whereis`。此外，`execv`函数可以为您查找路径，这使您的代码更具可移植性。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-09-25T03:39:34.467

execv() 的第一个参数不是要运行的目录，而是要执行的文件的路径。默认情况下，您的 exec 程序将在调用者当前目录的上下文中运行。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2015-09-07T10:03:55.857

代码示例供您参考：

```
#include <stdio.h>

int main() {

    int ret = fork();
    if(ret == 0)
    {
            char *params[4]  = {"/bin/ls", "-l",0}; //cmd params filled

            int res = execv( "/bin/ls" , params);  //parameters for cmd
            //int res = execv( "/bin/ls" , NULL);  //this is fail case (when child-exit with -1 status can be seen)
            printf("\n child exiting (%d) .. \n", res); //on successful execution of cmd, this exit never appears
        }
        else
        {
            waitpid(ret,1,0);
            printf("parent exiting\n");
    }

    return 1;
 } 
```

# php - php 的 date() 语法中的 g/G/h/H 有什么助记符或押韵 /reason？

> ID：12575828
> 
> 赞同：0
> 
> 时间：2012-09-25T03:31:05.557
> 
> 标签：php, date, time

我使用 PHP 已经有一段时间了——但是当我需要使用它`date()`来格式化时间时，我永远无法正确记住小时的语法。有什么技巧可以记住使用 g/G/h/H 的韵律和原因吗？

来自 PHP 手册`date()`：

```
g   | 12-hour format of an hour without leading zeros   | 1 through 12
G   | 24-hour format of an hour without leading zeros   | 0 through 23
h   | 12-hour format of an hour with leading zeros      | 01 through 12
H   | 24-hour format of an hour with leading zeros      | 00 through 23 
```

并以图像格式：

[php-time.png http://img593.imageshack.us/img593/5338/phptime.png](http://img593.imageshack.us/img593/5338/phptime.png)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-25T03:39:32.897

我不知道真正的*原因*是什么，但是......

`h`或者`H`显然是小时。大写字母更大，因此它使用的小时数更大（24 对 12）。

`g`or`G`是`h`或`H`没有前导`0`。在字母表中`g`紧接在前面。`h`

你会`0`更频繁地想要领先（因为它更好地对齐），所以这种格式可以`h`持续几个小时。

如果这对你有用，那就太好了。如果没有，请考虑将表格写在[Post-it® Note](http://www.post-it.com/)上并将其粘贴到您的显示器上。

# python - MRJob MR 分配给字典而不是产量？

> ID：12575831
> 
> 赞同：1
> 
> 时间：2012-09-25T03:31:41.127
> 
> 标签：python, dictionary, mapreduce, mrjob

我是 MRJob 和 MR 的新手，我想知道 MRJob MR 的传统字数 python 示例：

```
from mrjob.job import MRJob

class MRWordCounter(MRJob):
    def mapper(self, key, line):
        for word in line.split():
            yield word, 1

    def reducer(self, word, occurrences):
        yield word, sum(occurrences)

if __name__ == '__main__':
    MRWordCounter.run() 
```

是否可以将`word, sum(occurrences)`元组存储到字典中而不是产生它们，以便我以后可以访问它们？这样做的语法是什么？谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-13T07:38:08.777

您可以简单地使用列表而不是产量：

```
from mrjob.job import MRJob

class MRWordCounter(MRJob):
    def mapper(self, key, line):
        results = []
        for word in line.split():
            results.append((word, 1)) <-- Note that the list should append a tuple here.
        return results

    def reducer(self, word, occurrences):
        yield word, sum(occurrences)

if __name__ == '__main__':
    MRWordCounter.run() 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-07-09T21:16:56.040

请记住，您所做的工作将在另一台服务器上运行。输入和输出被视为由运行模块的脚本管理的问题。

如果要使用作业的输出，则需要从写入的任何位置读取它（默认为标准输出）或以编程方式运行作业。

听起来你想要后者。在一个单独的模块中，您需要执行以下操作：

```
mr_job = MRWordCounter(args=['-r', 'emr'])
with mr_job.make_runner() as runner:
    runner.run()
    for line in runner.stream_output():
        key, value = mr_job.parse_output_line(line)
        ... # do something with the parsed output 
```

查看文档以获取更多详细信息。上面的代码示例取自： http: [//pythonhosted.org/mrjob/guides/runners.html#runners-programmatically](http://pythonhosted.org/mrjob/guides/runners.html#runners-programmatically)

# java - Java“比较无法解析为类型”错误

> ID：12575833
> 
> 赞同：1
> 
> 时间：2012-09-25T03:31:45.060
> 
> 标签：java, arrays, binary, comparator

尝试在数组上使用带有二进制搜索的比较器时出现一个奇怪的错误。错误指出“compareArtist 无法解析为类型”，并由 Eclipse 在此代码上抛出：

```
Comparator<Song> compare = new Song.compareArtist(); 
```

尽管我已经在另一台计算机上尝试了代码并且错误仍然存​​在，但我已经进行了一些搜索并找到了对 Eclipse 可能存在的错误的引用。

我还发现了有关 compare 方法大写的类似问题，在本例中为 compareArtist。我见过方法名称中的第一个单词大写的示例，尽管我的理解是方法名称传统上以小写字母开头。我尝试过改变大小写，但没有任何改变。

如果类没有导入正确的包，我也发现了对这个错误的引用。我已经在两个有问题的类中导入了 java.util，据我所知，这允许使用比较器。

我已经尝试在具有二进制搜索调用的类以及“Song”类中编写 compareArtist 方法，根据我的家庭作业，它应该在哪里。我已经相应地更改了构造函数，问题仍然存在。

最后，我尝试通过在 Song 类中实现 Comparator 并创建我自己的名为“compare”的方法来覆盖 Comparator 比较方法。这将返回相同的错误。在找到几个执行相同操作的示例后，我才开始将比较器方法称为与“比较”不同的方法。

这是调用使用比较器的二进制搜索的类的相关代码。此代码还具有 compareArtist 方法的本地版本。虽然目前没有调用它，但此方法的代码与我试图从中调用它的 Song 类中的代码相同。

感谢您的任何建议和见解。

```
import java.io.*;
import java.util.*;

public class SearchByArtistPrefix {

    private Song[] songs;  // keep a direct reference to the song array
    private Song[] searchResults;  // holds the results of the search
    private ArrayList<Song> searchList = new ArrayList<Song>();  // hold results of       search while being populated. Converted to searchResults array.

    public SearchByArtistPrefix(SongCollection sc) {
        songs = sc.getAllSongs();
    }

   public int compareArtist (Song firstSong, Song secondSong) {
      return firstSong.getArtist().compareTo(secondSong.getArtist());
   }

    public Song[] search(String artistPrefix) {

       String artistInput = artistPrefix;
      int searchLength = artistInput.length();

      Song searchSong = new Song(artistInput, "", "");
      Comparator<Song> compare = new Song.compareArtist();
      int search = Arrays.binarySearch(songs, searchSong, compare); 
```

歌曲类代码：

```
import java.io.FileNotFoundException;
import java.util.*;

public class Song implements Comparable<Song> {

   private String artist, title, lyrics;
   private static int compareCounter = 0;

   public Song(String artistName, String songTitle, String songLyrics) {
      this.artist = artistName;
      this.title = songTitle;
      this.lyrics = songLyrics;
   }
   public String getArtist() {
      return artist;
   }

   public void setArtist(String artist) {
      this.artist = artist;
   }

   public String getTitle() {
      return title;
   }

   public void setTitle(String title) {
      this.title = title;
   }

   public String getLyrics() {
      return lyrics;
   }

   public void setLyrics(String lyrics) {
      this.lyrics = lyrics;
   }  

   public static int getCounter() {
      return compareCounter;
   }

   public static void setCounter(int compareCounter) {
      Song.compareCounter = compareCounter;
   }

   public int compareTo(Song secondSong) {

      String secondArtist = secondSong.getArtist();
      String secondTitle = secondSong.getTitle();

      compareCounter++;

      if (!this.artist.equals(secondArtist)) {
         return this.artist.compareToIgnoreCase(secondArtist);
      } else {
         return this.title.compareToIgnoreCase(secondTitle);
      }
   }

   public int compareArtist (Song firstSong, Song secondSong) {
      return firstSong.getArtist().compareTo(secondSong.getArtist());
   } 
```

在类的末尾还有一个 main() 方法，但它只提供内部测试代码，与手头的问题无关。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-25T03:47:23.620

在这段代码中：

```
Comparator<Song> compare = new Song.compareArtist(); 
```

`Song.compareArtist`您正在从静态内部类实例化。此错误消息说它找不到此类。为此，您必须以这种方式更改您的 Song 类：

```
class Song{

  public static class compareArtist<T> implements Comparator<T> {

    @Override
    public int compare(Object o1, Object o2) {
        // TODO Auto-generated method stub
        return 0;
    }

  }

} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-25T03:47:57.940

您的声明：

```
Comparator<Song> compare = new Song.compareArtist(); 
```

表示在 class中有命名`compareArtist`的内部类`Song`。但我认为你只想使用`compareArtist`在 class中命名的方法`SearchByArtistPrefix`。如果是这样，您应该按照以下方式进行操作，并使用匿名内部类。

一、删除`compareArtist`方法

二、实现`Comparator`接口

```
Comparator<Song> compare = new Comparator<Song>(){

    public int compareTo(Song anotherSong){
        //Implement your compare logic here
    }

}; 
```

# android - 在 Android 中测试应用内结算 - 收到空签名

> ID：12575835
> 
> 赞同：3
> 
> 时间：2012-09-25T03:32:04.633
> 
> 标签：android, billing

我正在按照此[链接](http://blog.blundell-apps.com/simple-inapp-billing-payment/)上的教程在 Android 中实现应用内计费。我在我的 Galaxy S 上试了一下，一切正常。我得到了正确的答案，包括签名。

但是，当我将它迁移到我的应用程序（与我自己的公钥相同的代码）时，我收到了所有没有签名的响应。我确定密钥已正确复制，并且我还尝试使用 Eclipse 向导导出应用程序并将其作为草稿上传到 Play 商店。

有人知道为什么会发生这种情况吗？我发现搜索的唯一两个可能原因是使用了错误的公钥并且没有将应用程序作为草稿上传，到目前为止，它们都没有解决我的问题。

非常感谢您！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-25T03:56:39.870

像往常一样，请参阅[官方文档](http://developer.android.com/guide/google/play/billing/index.html)和示例应用程序源代码以获得最佳效果。

我还没有看到这个，但是在你作为草稿上传后，你需要等待一段时间让应用程序激活（我上次测试大约一个小时）。错误的公钥与空签名无关：Play Store 服务器使用您的*私钥*对响应进行签名，您只需使用公钥验证它们即可。因此，这要么是 Play 商店出现故障（不太可能），要么是您的应用程序中缺少某些内容。

# ruby-on-rails-3 - Rails：模型或控制器中的逻辑？

> ID：12575836
> 
> 赞同：0
> 
> 时间：2012-09-25T03:32:06.947
> 
> 标签：ruby-on-rails-3, model, controller

我正在尝试清理我的控制器，我认为最好将此逻辑保留在模型中：

```
@current_issue = Issue.order(:id).last
@doc = Doc.new do |n|
  n.user_id = current_user.ftp
  n.season = Date::MONTHNAMES[Time.now.month].to_s + " " + Time.now.year.to_s
  n.article1_body = @current_issue.articles[0].body
  n.article2_body = @current_issue.articles[1].body
  n.article3_body = @current_issue.articles[2].body
  n.cover = @current_issue.cover
  n.message = @current_issue.message
  n.issue_code = @current_issue.issue_code
end
@issues = Issue.get_em_boys 
```

这样做的最佳方法是什么？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-25T04:35:23.107

作为一个起点...

控制器：

```
@doc = Doc.new
@doc.generate_from_issue(current_user, @current_issue)
...
@issues = Issue.get_em_boys 
```

模型：

```
def generate_from_issue(user, issue)
  self.user_id = user.ftp
  self.season = Date::MONTHNAMES[Time.now.month].to_s + " " + Time.now.year.to_s
  self.article1_body = issue.articles[0].body
  self.article2_body = issue.articles[1].body
  self.article3_body = issue.articles[2].body
  self.cover = issue.cover
  self.message = issue.message
  self.issue_code = issue.issue_code 
end 
```

# javascript - 你如何计算字符串中的字符数？

> ID：12575839
> 
> 赞同：-1
> 
> 时间：2012-09-25T03:32:35.447
> 
> 标签：javascript, string

```
var user_name = prompt ("Write your name in the box below","Write it here");
document.write("Hello " + user_name + ". Welcome to my page!"); 
```

这就是我现在的代码。我想拥有它，这样一旦你说出你的名字，它就会说：

> 你好维多利亚。欢迎来到我的网站！您的姓名包含 8 个字符。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-25T04:05:32.440

如果用户输入“Jon Dow”`user_name.length // output 7` 这将是不正确的，因为它会计算中间的空格。要解决此问题，您可以使用正则表达式的帮助！

改为使用

```
user_name.replace(/\s/g,"").length; 
```

所以生成的代码将是：

```
document.write("Hello " + user_name + ". Welcome to my page! Your name contains " + user_name.replace(/\s/g, "").length + " characters."); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-25T03:33:28.377

利用：

```
user_name.length 
```

所有字符串都有一个包含字符串长度的[长度属性。](https://developer.mozilla.org/en-US/docs/JavaScript/Reference/Global_Objects/String/length)在您的代码中，这看起来像：

```
document.write("Hello " + user_name + ". Welcome to my page! Your name contains " + user_name.length + " characters."); 
```

# mysql - 警告：mysql_fetch_assoc()：提供的参数不是第 5 行 /home/a8107556/public_html/index.php 中的有效 MySQL 结果资源

> ID：12575840
> 
> 赞同：0
> 
> 时间：2012-09-25T03:32:42.000
> 
> 标签：mysql, database, error-code

我一直在处理的页面有问题，我得到了那个错误。有人可以帮忙吗？

谢谢

```
<?php
include 'connect.php';
$desc1 = mysql_query("SELECT * FROM desc WHERE descnum='1'");
$desc2 = mysql_fetch_assoc($desc1);
?>
<link rel="stylesheet" type="text/css" href="style.css" />
<div id="bar" align="center">
<h3><a href="index.php"/>Home</a></h3>
</div>
<div id="desc">
<?php echo $desc2['description']; ?>
</div> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-25T03:34:36.053

由于表名 desc，您可能会遇到问题，在 sql/mysql desc 是一个排序运算符，意思是降序。它基本上是一个保留关键字，因此您的 sql 语句可能无效，因此不会返回有效结果。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-25T03:45:30.893

TomC 一针见血。“desc”不是一个理想的表名。这可以通过使用反引号“`”来包含所有表名和列名来简单地克服：

```
$desc1 = mysql_query("SELECT * FROM `desc` WHERE `descnum`='1'"); 
```

此外，您可能希望编辑查询执行以包含 mysql_error 函数以返回 sql 错误：

```
$desc1 = mysql_query("SELECT * FROM `desc` WHERE `descnum`='1'") or die(mysql_error()); 
```

最后一点是 PHP 不鼓励使用 mysql 扩展...相反，使用 MySQLi 扩展或准备好的语句 ( [http://php.net/manual/en/function.mysql-query.php](http://php.net/manual/en/function.mysql-query.php) )

# html - html pdf对象标签-参数不起作用

> ID：12575841
> 
> 赞同：1
> 
> 时间：2012-09-25T03:32:53.803
> 
> 标签：html, object, internet-explorer-9, embed, adobe-reader

在这样一个简单的 html 对象标签中：

```
<object data='Calendar2012_2013.pdf#page=2' 
        type='application/pdf' 
        width='90%' 
        height='1000px'>

<p>It appears your Web browser is not configured to display PDF files. 
No worries, just <a href='p.pdf'>click here to download the PDF file.</a></p>

</object> 
```

我试图让页面默认显示在第 2 页上，但在默认第 1 页上仍然显示。有谁知道出了什么问题？

编辑：它似乎可以与 Firefox 一起使用，但我需要它与 IE9 一起使用...

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-25T03:53:55.070

```
<object type="application/pdf" width="90%" height="1000px">
   <param name="src" value="/Calendar2012_2013.pdf#page=2" />
   <p>It appears your Web browser is not configured to display PDF files.
      No worries, just <a href="p.pdf">click here to download the PDF file.</a>
   </p>
</object> 
```

试试上面的代码。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-25T03:38:26.427

Firefox 使用 PDF.js 来显示 PDF。Chrome 也做了类似的事情。我认为使用 IE9 时，您会被困在转换为图像或某种 javascript 插件的过程中。前几天我回答了一个[类似的问题](https://stackoverflow.com/questions/12551287/show-pdf-files-in-a-php-page/12551342#12551342)

# android - 如何在不使用谷歌地图 api 的情况下获取方向箭头

> ID：12575844
> 
> 赞同：11
> 
> 时间：2012-09-25T03:33:15.790
> 
> 标签：android, google-maps, navigation

我是 Android 开发和导航应用程序的新手。我正在开发与 Google Navigation 相同但路径不同的导航应用程序。我能够走自己的路。现在我想以与 Google Navigation 应用程序相同的方式在应用程序中显示我的路径。但我不想使用 Google Navigation API。在 Google 导航应用程序中，它们用箭头表示当前位置。

有谁知道如何使用相同的表示？或者任何人都可以给我任何提示我应该在哪里寻找？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-29T10:38:44.263

[Android Asset Studio](http://android-ui-utils.googlecode.com/hg/asset-studio/dist/icons-generic.html#source.space.trim=1&source.space.pad=0&size=24&padding=8&color=33b5e5,0&name=ic_example)是一个相当不错的图标网站，您可以创建一个与通常的谷歌地图标记非常相似的网站。

使用 android 中的叠加层向地图添加标记。下面的代码位于扩展 MapActivity 的活动的 onCreate 中。

```
MapView myMap = ((MapView)findViewById(R.id.myMapView));
Drawable marker = getResources().getDrawable(R.drawable.marker);
List<Overlay> mapOverlays = null;
GeoPoint point = new GeoPoint(Latitude, Longitude)

myOverlays overlays = new myOverlays(marker, this);
Overlay item oi = new OverlayItem(point, "Desc", "");
overlays.add(oi);
mapOverlays = myMap.getOverlays();
mapOverlays.add(overlays); 
```

myOverlays 类：

```
import java.util.ArrayList;
import android.content.Context;
import android.graphics.drawable.Drawable;
import com.google.android.maps.ItemizedOverlay;
import com.google.android.maps.OverlayItem;

@SuppressWarnings("rawtypes")
public class myOverlays extends ItemizedOverlay {
    private ArrayList<OverlayItem> overlays = new ArrayList<OverlayItem>();
    Context context;

    public myOverlays(Drawable marker) {
        super(boundCenter(marker));
    }

    public myOverlays(Drawable marker, Context act) {
        super(boundCenter(marker));
        context = act;
    }

    public void addOverlay(OverlayItem overlay) {
        overlays.add(overlay);
        populate();
    }

    @Override
    protected OverlayItem createItem(int i) {
        return overlays.get(i);
    }

    @Override
    public int size() {
        return overlays.size();
    }
} 
```

# css - 什么是 CSS 选择器的正则表达式

> ID：12575845
> 
> 赞同：20
> 
> 时间：2012-09-25T03:33:17.647
> 
> 标签：css, regex

我想解析一个 CSS 文件并在每个 CSS 选择器之前添加另一个 CSS 选择器。

从：

```
p{margin:0 0 10px;}
.lead{margin-bottom:20px;font-size:21px;font-weight:200;line-height:30px;} 
```

我想要：

```
.mySelector p{margin:0 0 10px;}
.mySelector .lead{margin-bottom:20px;font-size:21px;font-weight:200;line-height:30px;} 
```

但是我的 CSS 文件真的很复杂（实际上它是引导 CSS 文件），所以正则表达式应该匹配所有的 CSS 选择器。

现在，我有这个正则表达式：

```
([^\r\n,{};]+)(,|{) 
```

你可以在这里看到结果[http://regexr.com?328ps](http://regexr.com?328ps)，但是正如你所看到的，有很多不应该匹配的匹配。

例如：

```
text-shadow:0 -1px 0 rgba(0, 
```

匹配阳性，但不应该

有人有解决方案吗？

* * *

## 回答 #1

> 赞同：30
> 
> 时间：2012-09-25T03:36:41.210

没有一个。CSS 选择器不是“[正则语言](https://en.wikipedia.org/wiki/Regular_language)”的示例，因此不能被正则表达式解析。您需要根据 CSS 语法规范构建自己的解析器：http: [//www.w3.org/TR/css3-syntax/#detailed-grammar](http://www.w3.org/TR/css3-syntax/#detailed-grammar)

CSS 被描述为 LL(1) 语法，因此您最好使用像 Yacc 这样的工具来为您生成解析器。

* * *

## 回答 #2

> 赞同：26
> 
> 时间：2012-09-25T07:36:56.047

所以我终于找到了一个适合我要求的正则表达式

```
([^\r\n,{}]+)(,(?=[^}]*{)|\s*{) 
```

关键是添加一个**积极的前瞻**以避免错误的匹配

```
(?=[^}]*{) 
```

你可以在这里看到结果：[http ://regexr.com?328s7](http://regexr.com?328s7)

我可以推荐的唯一预防措施是删除每个块评论：

*   带有块注释的坏样本：[http ://regexr.com?328sd](http://regexr.com?328sd)

* * *

## 回答 #3

> 赞同：6
> 
> 时间：2013-11-18T04:58:06.960

所以最后我找到了一种更好的方法来做到这一点。

我使用 LESS 编辑器（例如： http: [//lesstester.com/](http://lesstester.com/)）

并简单地嵌套我的整个 css 文件： .mySelector{ your css here }

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2014-09-16T15:13:23.650

确实不能使用 regex 选择 css**选择器**，但是可以使用 regex 选择 css**规则**，因此可以以相反的方式完成工作：

1.  格式化 css 文件，以便在同一行中没有选择器和规则。您的代码应如下所示：

    > p{
    > 边距：0 0 10px；
    > }
    > .lead{
    > 边距底部：20px;
    > 字体大小：21px；
    > 字体粗细：200；
    > 行高：30px；
    > }

2.  选择所有规则（正则表达式：(^(.)*;)

    > p{
    > **边距：0 0 10px；**
    > }
    > .lead{
    > **边距底部：20px;
    > 字体大小：21px；
    > 字体粗细：200；
    > 行高：30px；**
    > }

3.  为规则添加一些前缀（例如####）

    > p{
    > **####margin:0 0 10px;**
    > }
    > .lead{
    > **####margin-bottom:20px;
    > ####字体大小：21px;
    > ####字体重量：200;
    > ####行高：30px;**
    > }

4.  选择所有不以 #### 开头的行，而不是返回行，而不是 }（正则表达式：^[^#### \n }]）

    > **p{**
    > ####margin:0 0 10px;
    > }
    > **.lead{**
    > ####margin-bottom:20px;
    > ####字体大小：21px;
    > ####字体重量：200;
    > ####行高：30px;
    > }

5.  添加你的CSS前缀

    > **.my_class_prefix** p{
    > ####margin:0 0 10px;
    > }
    > **.my_class_prefix** .lead{
    > ####margin-bottom:20px;
    > ####字体大小：21px;
    > ####字体重量：200;
    > ####行高：30px;
    > }

6.  删除添加的前缀####

    > **.my_class_prefix** p{
    > 边距：0 0 10px;
    > }
    > **.my_class_prefix** .lead{
    > 边距底部：20px;
    > 字体大小：21px；
    > 字体粗细：200；
    > 行高：30px；
    > }

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2014-08-28T15:12:27.030

一个简单易读的正则表达式如下：

`[\#\.\w\-\,\s\n\r\t:]+(?=\s*\{)`

[您可以在此工具](http://regexpal.com/)中的 css 代码上对其进行测试`

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2018-09-26T15:40:37.960

遇到了类似的问题，并使用以下内容仅提取 CSS 选择器和指令，而无需注释和媒体查询：

`/^(?!.*@media)[\t ]*([a-zA-Z#.:*\[][^{\/]*\s*){[\s\S]*?}/`

示例：[https ://regex101.com/r/JmjthP/5](https://regex101.com/r/JmjthP/5)

我确定它缺少一些边缘情况，但似乎对我有用。

看到这个问题：[Ruby RegExp - 匹配所有 CSS 选择器和指令](https://stackoverflow.com/questions/52504728/ruby-regexp-match-all-css-selectors-and-directives)

* * *

## 回答 #7

> 赞同：1
> 
> 时间：2020-10-04T20:04:14.903

这就是我想出的：

`(?<=\s)[^ ]*\s*\{[^\}]+\:[^\}]+\}`

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2016-12-02T13:06:29.743

这是我用于类似问题的解决方案。我想删除所有以`@`. 为此，我使用了以下正则表达式：

`@\s*.*\s*\{((?!\n\})[\s\S])+\n\}`

它假设规则以新行结束。这样它就可以处理嵌套的 CSS 规则。

* * *

## 回答 #9

> 赞同：0
> 
> 时间：2021-05-13T10:39:46.710

有趣的讨论 - 不是纯粹的 reg exp 而是一个非常短的 JS 函数：

```
function cssNester(css, nestWith) {
  let kframes = [];
  css = css.replace(/@(-moz-|-webkit-|-ms-)*keyframes\s(.*?){([0-9%a-zA-Z,\s.]*{(.*?)})*[\s\n]*}/g, x => kframes.push(x) && '__keyframes__');
  css = css.replace(/([^\r\n,{}]+)(,(?=[^}]*{)|\s*{)/g, x => x.trim()[0] === '@' ? x : x.replace(/(\s*)/, '$1' + nestWith + ' '));
  return '/*' + nestWith + '*/\n' + css.replace(/__keyframes__/g, x => kframes.shift());
} 
```

* * *

## 回答 #10

> 赞同：0
> 
> 时间：2018-10-09T18:27:59.697

虽然不可能编写一个匹配任何有效 CSS 选择器的正则表达式，但您可以结合几个正则表达式和一些逻辑来实现您的目标。

以下使用 Node 的`fs`模块来读取 CSS，但您可以根据需要获取原始 CSS 字符串。

```
const fs = require('fs'),
    myClassName = 'mySelector',
    mySelector = '.' + myClassName,
    mySelectorRegex = new RegExp(`\\.${myClassName}([ .#[:(]|$)`),
    cssSelectorRegex = /[@.#a-zA-Z][^}]*?(?={)/g;

let css = fs.readFileSync('path/to/file.css').toString();

css = css.replace(cssSelectorRegex, match => {

    // Match is a string of selectors like '.foo' or '.foo, #bar'
    // We need to split it on the comma and handle each selector individually
    return match.split(',').map(selector => {

        selector = selector.trim();

        // Don't alter media queries, imports, or selectors that already contain '.mySelector'
        if (selector.startsWith('@') || selector.match(mySelectorRegex)) {

            return selector;

        }

        // Prepend '.mySelector ' to the selector
        return mySelector + ' ' + selector;

    // Combine the list of selectors back together
    }).join(',');

}); 
```

# amazon-ec2 - 在 EC2 中启动实例时，密钥对的“无”选项是什么？

> ID：12575846
> 
> 赞同：5
> 
> 时间：2012-09-25T03:33:20.927
> 
> 标签：amazon-ec2

我想知道你应该什么时候使用它？我正在关注[本](http://docs.amazonwebservices.com/AWSEC2/latest/GettingStartedGuide/LaunchInstance.html)教程，它说我不能使用 None 选项。

既然我有这个选项，那么它一定有一些用处，对吧？我想知道我会在哪种情况下使用它？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-09-25T08:31:47.607

当您在运行 AMI 实例时指定密钥对名称时，Amazon EC2 会向实例提供公共 ssh 密钥，以便它可以执行诸如将密钥添加到默认用户的 $HOME/.ssh/authorized_keys 等操作。默认用户取决于 AMI，可能是“ec2-user”或“ubuntu”甚至“root”。

但是，AMI 并不要求他们使用 ssh 密钥，这只是一种方便的约定，也是为运行 AMI 的人提供对实例的安全访问的少数几种方法之一。

如果您不提供 ssh 密钥对名称（即，您指定“无”），那么您将需要找出一种不同的方法来使实例可用。对于 Amazon Linux 和 Ubuntu AMI，您可以使用 CloudInit 系统并传入一个用户数据脚本，该脚本通过 ssh 设置访问权限，或者安装您想要在实例上运行的软件，即使您不想要 ssh 访问权限也是如此。

即使您不希望对实例进行 ssh 访问，当系统或在其上运行的软件出现问题时，通常也可以很方便地跟踪问题。

因此，“无”是一个有效的选项，在某些情况下可能有点实用，但通常建议您提供一个值，如果只是为了紧急情况。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-25T14:40:12.270

如果我们的 AMI 非常可靠，以至于我们不想通过安装在其上的软件以外的任何其他方式访问机器，我们会使用 none 选项。例如，我们使用一个与队列一起使用的服务总线软件，这个特定的 AMI 将启动并开始监听队列以处理消息，它完全没有其他作用。在这种情况下，由于机器本身没有托管数据（甚至没有队列数据），所以我们不需要访问它。

但是，如果您曾经走这条路，请准备好成为专家，定期提出“扔掉”机器，以巩固 AMI。我想说，在黑匣子类型的情况下，没有任何帮助。

希望这可以帮助，

# c - 查找最小值和最大值

> ID：12575856
> 
> 赞同：0
> 
> 时间：2012-09-25T03:34:55.087
> 
> 标签：c, max, min

我正在尝试编写一个简单的程序，它从数据文件中读取整数并输出最小值和最大值。输入文件的第一个整数将指示将读取多少个整数，然后将列出整数。

我的程序编译没有任何问题，但是，它返回的值不属于我的测试数据文件中的集合的一部分。任何人都可以帮助诊断这个问题吗？

```
int main(){
FILE *fp = fopen("data.txt", "r");
int count;
int num;
int i;
int min = 0;
int max = 0;

fscanf (fp, "%d", &count);

for (i = 0; i < count; i++)
    fscanf( fp, "%d", &i);  
    {   
    if (num < min)
        min = num;
    if (num > max)
        max = num;
    }
fclose (fp);

printf("Of the %d integers, the minimum value is %d and the maximum value is %d \n", count, min, max);} 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-09-25T03:47:14.283

这是您的代码中的几个错误。

首先，如 cnicutar 所说，更改`i`为`num`in the loop 。`fscanf`这样您就可以正确读取输入。左括号`{`应该在`for`循环之后。

```
for (i = 0; i < count; i++)  {   // put the { here
    fscanf( fp, "%d", &num); 
```

其次，您的`min`and`max`没有正确启动。您应该将它们更改为`INT_MAX`and `INT_MIN`。和`#include <limits.h>`。

```
#include <stdio.h>
#include <limits.h>
......
int min = INT_MAX;
int max = INT_MIN; 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-25T03:48:19.357

除了 halfelf 的更改之外，您还需要将 min 初始化为任意大的值，以便至少有一个输入数字小于该值。否则，如果您的输入值都是正数，您最终将显示一个最小值为零。比任意大的初始值更好的是使用条件逻辑来检测第一次通过循环并将最小值和最大值设置为输入流中的第一个实际值。这避免了围绕最小开始有多大（以及开始最大有多小，我没有提到但基本上是逆问题）的困境。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-09-20T07:48:19.000

```
int min=0;
int max=0;
int n = sizeof(arr);
for (int i=0;i<n;i++)
{
   if (i==0){ 
     min=arr[i];
     max=arr[i];
   }
   else{
     if (arr[i]<min) min=arr[i];
     if (arr[i]>max) max=arr[i];
   }

} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-09-25T03:53:30.727

您的`num`变量为空且未被使用。您正在将其与`max`和进行比较`min`。因此`max`，并且`min`将存储`num`. 像这样做：

```
int main(){
FILE *fp = fopen("data.txt", "r");
int count=0;
int i;
int min = 0;
int max = 0;
while (!feof(fp))
{
count++;
fscanf( fp, "%d", &i);
if (i < min)
min = i;
if (i > max)
max = i;
}
printf("Of the %d integers, the minimum value is %d and the maximum value is %d \n", count, min, max);} 
```

# javascript - 是否可以获得 node.js 正在服务的当前请求？

> ID：12575858
> 
> 赞同：10
> 
> 时间：2012-09-25T03:35:02.357
> 
> 标签：javascript, node.js, express

我正在使用 express.js。每当有人尝试记录消息时，我都需要能够记录某些请求数据。为此，我想创建一个这样的辅助方法

```
function log_message(level, message){
  winston.log(level, req.path + "" + message);
} 
```

然后我会使用这样的方法。

```
exports.index = function(req, res){
  log_message("info", "I'm here");
} 
```

请注意，我没有将 req 对象传递给 log_message 函数。我希望透明地完成，以便 log_message API 用户不需要知道正在记录的公共数据。

有没有办法用 express.js/node.js 实现这一点。请求对象是否可以从某种全局变量中获得？

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-09-25T04:14:12.067

一个有趣的方法是新的域功能。 [http://nodejs.org/api/domain.html](http://nodejs.org/api/domain.html)

域在提供出色的错误恢复的同时，可以用作一种“线程本地存储”——基本上是为每个请求存储数据。

创建一些将每个请求/响应添加到域的中间件。

```
app.use(function(req, res, next) {
  var reqd = domain.create();
  reqd.add(req);
  reqd.add(res);
  reqd._req = req; // Add request object to custom property
  // TODO: hook error event on reqd (see docs)
  next();
}); 
```

在日志功能中，您现在可以获取当前域并拉出请求对象。

```
function log_message(level, message) {
  // Pull the request from the current domain.
  var request = process.domain._req;

  // TODO: log message
}; 
```

域仍处于试验阶段，但听起来从现在到 1.0 版本之间不会有太大变化。

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2014-05-22T16:07:24.247

与域答案类似，现在使用 continuation-local-storage 更容易做到这一点：[https ://datahero.com/blog/2014/05/22/node-js-preserving-data-across-async-callbacks /](https://datahero.com/blog/2014/05/22/node-js-preserving-data-across-async-callbacks/)

在 DataHero，我们将事务 ID、用户 ID 和会话 ID 与所有日志消息一起保存。您不需要一直向下传递请求对象，因此它也有助于保持模型/业务层的清洁。

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2015-03-16T09:10:49.707

创建中间件：

```
app.use(function(req, res, next) {
       var tid = uuid.v4();
     var cls = require('continuation-local-storage');
       var namespace = cls.createNamespace('com.storage');
      var pre_ip;
          if(get_ip(req))
          { ip_info= get_ip(req).clientIp;
              pre_ip=ip_info
          }
          namespace.bindEmitter(req);
          namespace.bindEmitter(res);
        namespace.run(function() {
               console.log(logobj);
              namespace.set('tid', tid);
              namespace.set('ip',ip_info);
           namespace.set('logobj',logobj);   
              next();
          });
      }); 
```

并使用它：

```
var cls = require('continuation-local-storage');
 var namespace = cls.getNamespace('com.storage');
      namespace.get('ip'); 
```

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2012-09-25T03:43:35.373

如何`log_message`暴露给调用者（模块等）以及您对路由之前的管道有什么控制？

您可以在此路由调用之前应用中间件并让函数`log_message`来自闭包，或者您可以利用`req`EventEmitter 工具并将对 winston.log 的调用包装在 req.end 的处理程序中，并记录所有具有在请求期间提出。这将有效地将您更改`log_message`为日志消息的累加器（可能在数组中），并在请求结束时将它们全部记录下来。

这一切都取决于你如何暴露这些东西。

许多猫在这里被剥皮:)

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2012-09-25T16:15:43.493

我可以接受以下解决方案。

在这里，我有一个中间件，它将 log_message 方法添加到请求对象上。之后，我只需调用 req.log_message 来记录消息。虽然这与将 req 对象传递给每个日志记录调用非常相似，但它只是稍微干净一些。

```
function logging_middleware(req, res, next){
    req.log_message = function(level, message){
        winston.log(level, req.path + ":" + message);
    }
    next();
} 
```

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2020-03-20T23:53:06.057

我**发现工作“线程安全”解决方案**可以在整个请求中传递数据而不修改 req 对象并将其传递给所有层。

因此，我们有[continuation-local-storage](https://www.npmjs.com/package/continuation-local-storage)包，它允许我们在 req 开始时绑定 req，然后在下一次调用时重用。但是当您尝试使用异步调用链时感觉很糟糕，CLS 不是“线程安全的”，如果您尝试在少数并发请求期间调用它 - 它会失败并丢失“上下文”。

所以，我们有[cls-hooked](https://www.npmjs.com/package/cls-hooked)包，它修复了这个问题，我们可以在请求开始时轻松捕获当前的上下文绑定请求。

有一个使用 awilix（依赖注入框架）的小例子，我们将创建“RequestContext”类并**能够在我们需要的任何地方使用它**。

让我们创建 RequestContext 类：

```
module.exports = class RequestContext {

 constructor(req, res, dependencies) {
 const { myService1, myService2 } = dependencies;    
 this.req = req;
 this.res = res;
}

getMyTestHeader() {
 return this.req.headers.testHeader;
} 
```

它是一个简单的“请求包装器”。如果您需要，它会消耗请求、响应和其他依赖项，并提供 getMyTestHeader 以在课堂外使用。

让我们在请求开始时（在所有其他人之前）创建中间件：

```
 //Registering our namespace. creating it one per app
  const clsNamespace = require('cls-hooked').createNamespace('my-per-request-session'); 
  app.use((req, res, next) => {
      // binding continuation-local-storage (cls-hooked) to request and response
      clsNamespace.bind(req);
      clsNamespace.bind(res);
      clsNamespace.run(() => {
      // save here req and res to use it later in requestContext instance, it will alive during request and could be picked up from DI as other dependencies
       clsNamespace.set('req', req);
       clsNamespace.set('res', res);
       next();
      });

  }); 
```

现在，让我们使用 awilix 注册 DI 调用：

```
container.register({  
requestContextProvider: asFunction(dependencies => ({
 getCurrentContext: () => {
  //retrieve res and req on each DI call "from current request"
  //also, clsNamespace should be the same as we registered before, on original code it is also registered using DI container.
  const req = dependencies.clsNamespace.get('req');
  const res = dependencies.clsNamespace.get('res');
  //and return our RequestContext (wrapper for req and res)
  return new RequestContext(req, res, dependencies);
 },
})), 
```

因此，我们将 requestContextProvider 注册为函数，它将在每个 DI 依赖调用的每个请求上使用外部上下文 (cls) 中的 req 和 res 进行实例化。因此，我们可以在下一个方式使用它（例如在控制器中）：

```
module.exports = (dependencies) => ({
 myControllerAction: async (req, res) => {
  const {requestContextProvider} = dependencies;
  const requestContext = requestContextProvider.getCurrentContext();
  //it will return header from req!
  const myHeader = requestContext.getMyTestHeader(); 
  res.status(200).json({ myHeader });
 },    
}); 
```

正如你所看到的，我们现在在每个层级（控制器/BLL/DAL/helpers 等）可以访问 DI 的任何地方都有“requestContext”。因此，它是“线程安全的”，易于测试，并且不需要通过所有“中间”层抛出 req 对象。

同意，不是最好和最简单的例子，但希望它可以帮助某人。

# tomcat - 使用 Tomcat 的 SSO（单点登录）

> ID：12575859
> 
> 赞同：1
> 
> 时间：2012-09-25T03:35:14.027
> 
> 标签：tomcat, single-sign-on

这可行吗？1\. 用户使用 LDAP 身份验证登录到他们的办公室桌面（Windows 操作系统） 2\. 打开浏览器到我的应用程序，例如。http:///webappsABC 3\. 我的应用程序使用 LAN ID/ldap 登录 ID 与 LDAP 服务器进行身份验证。4\. 自动登录我的应用程序。（用户名/密码中没有用户密钥）

此设置的任何示例代码或 URL 将不胜感激。

谢谢

# mysql - “如果”查询mysql

> ID：12575864
> 
> 赞同：1
> 
> 时间：2012-09-25T03:35:38.913
> 
> 标签：mysql, sql, if-statement

我想创建查询跟随。

```
select member.name,depratment.name from member 
left join depratment on depratment.dep_id=member.dep_id
if(member.position_id=1){
 where member.ages>50; 
}
else{
where member.salary>50000;
} 
```

帮我？谢谢你。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-09-25T03:37:18.813

我认为你不需要`IF`这个。你只需要一个复合条件。尝试，

```
SELECT..
FROM..
WHERE (member.position_id =  1 AND member.ages   > 50   ) OR
      (member.position_id <> 1 AND member.salary > 50000) 
```

# python - ValueError：太多值无法解压 Aptana Studio 3

> ID：12575870
> 
> 赞同：0
> 
> 时间：2012-09-25T03:36:30.127
> 
> 标签：python, aptana

我正在学习 learnpythonthehardway.org 的练习 13。我应该运行这段代码：

```
from sys import argv
script, first, second, third = argv

print "The script is called:", script
print "Your first variable is:", first
print "Your second variable is:", second
print "Your third variable is:", third 
```

然后在命令行输入“python ex13.py first 2nd 3rd”，应该会输出：

```
The script is called: ex13.py
Your first variable is: first
Your second variable is: 2nd
Your third variable is: 3rd 
```

但是，我在 Vista 上使用 Aptana Studio 3 时出现“ValueError: too many values to unpack”错误。

我是 Python 和 Aptana 的新手，所以如何在此处输入单独的参数？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-25T03:38:19.870

这是因为`len(argv)`可能大于 4：

```
>>> w,x,y,z=[1,2,3,4,5]
Traceback (most recent call last):
  File "<stdin>", line 1, in <module>
ValueError: too many values to unpack 
```

尝试打印`argv`以查看`argv`实际包含的内容。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-12-14T05:45:18.293

in the script window, right click, ShowIn > Terminal. It will open a terminal window in Aptana. Then type, python 'your script'.py That will run in way you want I think; Rather with the visual you want.

# java - 使用 hessian 协议从客户端文件夹到 tomcat 服务器的图像传输

> ID：12575872
> 
> 赞同：0
> 
> 时间：2012-09-25T03:36:43.300
> 
> 标签：java, data-transfer, hessian

我的目标是通过 hessian 协议将图像（`.jpg`或`.png`）从客户端文件夹上传到 tomcat6 服务器。并在服务器上使用opencv进行图像处理，然后将图像返回给客户端。

**问题1。**以下转移步骤是否正确？

*   将`test.jpg`图像放在客户端的文件夹中
    **`-->`**转换`test.jpg`in `client.java`( `main.java`) 类以`BufferedImage`
    **`-->`**将其转换`BufferedImage`为 mat 或`Iplimage`在服务器中使用`openCV`。

我已经从[使用 Hessian 的 Simple Messaging Example](http://edwin.baculsoft.com/2011/06/simple-messaging-example-using-hessian/) 中设置了一个 hello world 示例，并从[Hessian 中搜索了大型二进制数据](http://hessian.caucho.com/doc/hessian-overview.xtp) 和其他网站，但仍然不知道如何使用它！

**问题2。**是否有相关的 Java 示例代码？

（我使用的是ubuntu12+netbeans7.2）

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-01T02:55:44.463

听起来您可能希望将图像视为客户端上的字节流，而不是使用 BufferedImage。处理后，你可以做任何你想做的事情，但是如果你只是发送文件内容，使用 hessian 会更容易。

Hessian 将 InputStream 理解为一种类型。所以你的最小方法调用 API 看起来像

```
InputStream convert(InputStream upload); 
```

客户端将打开原始文件的输入流并直接发送该输入流：

```
InputStream is = new FileInputStream("test.jpg");
InputStream resultIs = hessianProxy.convert(is);
.... // save the result 
```

需要注意的是，hessian 响应连接在您完成读取输入流之前仍然处于活动状态，因此您需要立即读取它。（它没有缓冲，这是它高效的原因之一。）

在服务器上，您需要从输入流中读取（再次，立即）。因此，返回一个从转换后的图像中读取的 InputStream：

```
InputStream convert(InputStream is) {
  ... // read from 'is' to your internal data
  InputStream result = ... // process
  return result;
} 
```

您需要确保结果输入流在文件末尾自动关闭任何内容。您可能想要创建一个包装器来调用 close()。

# bash - 如果另一个文件中的同一行与某个模式匹配，则删除该行

> ID：12575873
> 
> 赞同：3
> 
> 时间：2012-09-25T03:36:54.503
> 
> 标签：bash, vim, scripting

我有 2 个文件，fileA 和 fileB。

文件A包含：

```
71
32
23
10
... 
```

和 fileB 包含：

```
ok
no
no
ok
... 
```

如果fileB中的同一行匹配'no'，我想要做的是删除fileA中的行。所以生成的 fileA 想要：

```
71
10
... 
```

任何命令或 bash 脚本或 vim 都可以做到这一点？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-25T03:53:38.793

这是一个应该可以解决问题的快速单线：

```
sed "$(awk '/no/{print NR"d"}' fileB)" fileA 
```

你把你的正则表达式放在哪里，以匹配你在上面看到的“不”字。

它的工作原理是使用 awk 扫描第一个，并打印行号，然后打印匹配位置的字母“d”。这个模式`nd`是一个 sed 命令，它删除输入流的第 n 行。

此版本不会修改 fileA 的内容，但会将删除行的结果打印到 stdout。使用 sed 的 -i 标志来修改文件：

```
sed -i "$(awk '/no/{print NR"d"}' fileB)" fileA 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-25T03:46:16.253

您可以使用 paste 加入这些行并使用 while 循环对其进行迭代：

```
while read -r a_input b_input; do
   [[ $b_input == "ok" ]] && echo "$a_input"
done < <(paste -d' ' fileA fileB) 
```

使用 awk 来保证完整性：

```
awk '$2 == "ok" { print $1 }' < <(paste -d' ' fileA fileB) 
```

# ios - LZMA SDK 使用太多 RAM 解压缩 iOS (xcode)

> ID：12575874
> 
> 赞同：4
> 
> 时间：2012-09-25T03:36:55.367
> 
> 标签：ios, xcode, crash, ram, lzma

我正在尝试在 iPhone/iPad 应用程序中使用 LZMA SDK，我的出发点是 Mo Dejong 提供的 iPhone 的 LZMA 示例项目，可在此处获得： [https](https://github.com/jk/lzmaSDK) ://github.com/jk/lzmaSDK 原文在这里：[http： //www.modejong.com/iOS/lzmaSDK.zip](http://www.modejong.com/iOS/lzmaSDK.zip) （我都试过了，我都得到了相同的结果）。

问题是提取使用的内存与 .7z 包含的未压缩内存一样多。换句话说，假设我有一个 40MB 的压缩文件，未压缩的文件是一个大约 250MB 的二进制 sqlite DB，它会慢慢地使用越来越多的内存，因为它将文件一直解压缩到 250MB。这将使 iPad1 或 iPhone4 之前的任何设备（256MB RAM）崩溃。我感觉很多人最终都会遇到同样的问题，所以现在的解决方案可以帮助很多开发人员。

我最初使用基于 Windows 的 7-zip（最新版本）和 16MB 字典大小在 PC 上创建了 .7z 文件。它应该只需要 18MB 的 RAM 来解压缩（在查看任务管理器的 PC 上进行测试时就是这种情况）。我还尝试使用 keka（开源 mac 存档器）创建存档，但它没有解决任何问题，尽管我可以确认 keka 本身在 mac 上提取文件期间仅使用 19MB 的内存，这是我所期望的。我猜下一步是比较 Keka 的源代码和 LZMA SDK 的源代码。

创建 .7z 文件时，我尝试了不同的字典大小和其他设置，但没有任何帮助。我还尝试在压缩之前将我的单个二进制文件分成 24 个较小的部分，但这也没有帮助（仍然使用超过 250MB 的 RAM 来提取 24 个部分）。

请注意，我对原始代码所做的唯一更改是使用更大的 .7z 文件。另请注意，提取完成后它会立即释放 RAM，但这无济于事。我觉得它并没有像提取应有的那样释放 RAM，或者它正在将整个内容放入 RAM 直到完成，然后才将其移出 RAM。此外，如果我尝试使用 mac 应用程序提取相同的确切文件，同时运行仪器，我看不到相同的行为（例如，在提取文件时，StuffIt Expander 的 RAM 最大约为 60MB，Keka，开源 mac存档器最大内存为 19MB）。

我不是一个 mac/xcode/objective-c 开发人员（还）所以任何帮助都将不胜感激。我可以改用 zip 或 rar，但我使用 LZMA 获得了更出色的压缩，所以如果可能的话，我想坚持使用这个解决方案，但显然我需要让它在不崩溃的情况下工作。

谢谢！

![Instruments.app 分析示例应用程序的屏幕截图](../Images/d6d4f28a36c92b1c09138437a245a441.png)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-01T06:38:13.750

7zip 的作者 Igor Pavlov 给我发了电子邮件，他基本上说我在原始问题中所做的观察是 SDK 的 c 版本的已知限制。C++ 版本没有这个限制。实际报价：

“7-Zip 使用另一个用 C++ 编写的多线程解码器。该 C++ .7z 解码器不需要为整个实体块分配 RAM 块。另请阅读此线程：

[http://sourceforge.net/projects/sevenzip/forums/forum/45797/topic/5655623](http://sourceforge.net/projects/sevenzip/forums/forum/45797/topic/5655623) “

因此，在有人修复适用于 iOS 的 SDK 之前，解决方法是：

1) 确定文件解压缩操作所需的 RAM 限制。

2) 存档中超出上述 1 限制的任何 SINGLE 文件必须拆分，您可以使用任何二进制拆分器应用程序执行此操作，例如拆分： [http ://www.fourmilab.ch/splits/](http://www.fourmilab.ch/splits/)

3）文件准备好后，使用MoDJ在他的回答中描述的字典/块大小选项创建7z文件，例如24兆限制：7za a -mx=9 -md=24m -ms=24m CompressedFile。 7z 源文件*

4) 在您的 iOS 应用程序中，解压缩文件后，确定哪些文件已被拆分，然后将它们重新连接在一起。代码并不复杂（我假设 splits.exe 使用的命名约定是 file.001、file.002 等）

```
 if(iParts>1)
    {
        //If this is a multipart binary split file, we must combine all of the parts before we can use it
        NSString *finalfilePath = whateveryourfinaldestinationfilenameis
        NSString *splitfilePath = [finalfilePath stringByAppendingString:@".001"];

        NSFileHandle *myHandle;
        NSFileManager *fileManager = [NSFileManager defaultManager];
        NSError *error;

        //If the target combined file exists already, remove it
        if ([fileManager fileExistsAtPath:finalfilePath]) 
        {
            BOOL success = [fileManager removeItemAtPath:finalfilePath error:&error];
            if (!success) NSLog(@"Error: %@", [error localizedDescription]);
        }

        myHandle  = [NSFileHandle fileHandleForUpdatingAtPath:splitfilePath];
        NSString *nextPart;
        //Concatenate each piece in order
        for (int i=2; i<=iParts; i++) {
            //Assumes fewer than 100 pieces
            if (i<10) nextPart = [splitfilePath stringByReplacingOccurrencesOfString:@".001" withString:[NSString stringWithFormat:@".00%d", i]];
            else nextPart = [splitfilePath stringByReplacingOccurrencesOfString:@".001" withString:[NSString stringWithFormat:@".0%d", i]];
            NSData *datapart = [[NSData alloc] initWithContentsOfFile:(NSString *)nextPart];
            [myHandle seekToEndOfFile];
            [myHandle writeData:datapart];
        }    
        [myHandle closeFile];
        //Rename concatenated file
        [fileManager moveItemAtPath:splitfilePath toPath:finalfilePath error:&error];
    } 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-30T10:51:04.593

好的，所以这是一个棘手的问题。您遇到问题的原因是因为 iOS 没有虚拟内存，而您的桌面系统有。lzmaSDK 库的编写方式假定您的系统有足够的虚拟内存用于解压缩。您不会看到在桌面上运行的问题。只有在 iOS 上分配大量内存进行解压时才会遇到问题。最好通过重写 lzma SDK 来解决这个问题，以便直接更好地利用映射内存，但这不是一项简单的任务。以下是解决此问题的方法。

使用[7za](http://sourceforge.net/projects/p7zip/%207za)

实际上，您需要将 2 个命令行选项传递给 7zip 存档程序，以便将文件分割成更小的块。我将建议您只使用我最终使用的 24 兆大小，因为这是一个不错的空间/内存权衡。这是应该可以解决问题的命令行，请注意，在此示例中，我有名为 XYZ.flat 的大型电影文件，然后我想将它们一起压缩到一个 archive.7z 文件中：

```
7za a -mx=9 -md=24m -ms=24m Animations_9_24m_NOTSOLID.7z *.flat 
```

如果将此分段文件与不将文件分成分段的版本进行比较，您会看到分段后文件变大了一点：

```
$ ls -la Animations_9_24m.7z Animations_9_24m_NOTSOLID.7z
-rw-r--r--  1 mo  staff  8743171 Sep 30 03:01 Animations_9_24m.7z
-rw-r--r--  1 mo  staff  9515686 Sep 30 03:21 Animations_9_24m_NOTSOLID.7z 
```

因此，分段减少了大约 800K 的压缩，但损失并不大，因为现在解压缩例程不会尝试分配一堆内存。解压内存使用现在限制为 24 兆块，iOS 可以处理。

通过打印出压缩文件的标题信息来仔细检查您的结果：

```
$ 7za l -slt Animations_9_24m_NOTSOLID.7z

Path = Animations_9_24m_NOTSOLID.7z
Type = 7z
Method = LZMA
Solid = +
Blocks = 7
Physical Size = 9515686
Headers Size = 1714 
```

请注意上述输出中的“Blocks”元素，它表示数据已被分割成不同的 24 meg 块。

如果您将上面的分段文件信息与不带 -ms=24m 参数的输出进行比较，您会看到：

```
$ 7za l -slt Animations_9_24m.7z

Path = Animations_9_24m.7z
Type = 7z
Method = LZMA
Solid = +
Blocks = 1
Physical Size = 8743171
Headers Size = 1683 
```

请注意“块”值，您不希望只有 1 个大块，因为在 iOS 上解压缩时会尝试分配大量内存。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-02T15:00:17.880

我遇到了同样的问题，但找到了一个更实用的解决方法：

*   使用 LZMA SDK 的 CPP 接口。它只使用很少的内存，并且不会像 C 接口那样遭受内存消耗问题（正如 tradergordo 已经正确说过的那样）。

*   看看 LZMAAlone.cpp，去掉任何不必要的东西（比如编码、7-zip 文件格式的东西，顺便说一句。编码仍然需要大内存）并为你的 CPP LZMA 解压缩器创建一个小头文件，例如：

extern "C" int extractLZMAFile(const char *filePath, const char *outPath);

*   对于非常大的文件（如 100MB+ db 文件），然后我使用 LZMA 解压缩来压缩此文件。当然，由于单独的LZMA没有任何文件容器，所以需要给出解压文件的名称

*   因为我没有完整的 7Z 支持，所以我使用 tar 作为容器以及 lzma 压缩文件。[在https://github.com/mhausherr/Light-Untar-for-iOS](https://github.com/mhausherr/Light-Untar-for-iOS)有一个很小的 ​​iOS 解压器

不幸的是，即使我愿意，我也无法提供任何来源。

# java - Java构造函数：创建对象，短参数被解释为int

> ID：12575876
> 
> 赞同：1
> 
> 时间：2012-09-25T03:37:06.650
> 
> 标签：java, constructor, integer, short

我正在用 Java 编写一个小排序程序，旨在抓取一个“学生”对象并确定它的名称、职业和课堂取决于参数和属性。然而，当我尝试创建第一个对象时，出现了一个问题。到目前为止，一切看起来像这样：

```
public class Student {
    private String name, classroom;
    /**
     * The career code is as follows, and I quote:
     * 0 - Computer Science
     * 1 - Mathematics
     * 2 - Physics
     * 3 - Biology
     */
    private short career, idNumber;

    public Student (String name, short career, short idNumber){
        this.name = name;
        this.classroom = "none";
        this.career = career;
        this.idNumber  = idNumber;
    }

    public static void main(String args[]){
        Student Andreiy = new Student("Andreiy",0,0);
    }
} 
```

该错误出现在对象创建行上，由于某种原因，当构造函数调用短裤时，它坚持将 0,0 解释为整数，从而导致不匹配问题。

有任何想法吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-25T04:21:34.547

一种方法是告诉编译器该值是`short`使用强制转换：

```
Student Andreiy = new Student("Andreiy",(short)0,(short)0); 
```

或者，将`Student`类重新定义为 accept`int`而不是`short`. （对于职业代码，我建议使用`enum`.）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-25T04:44:18.380

您应该将 Integer 转换为 short。整数到短的转换需要缩小范围，因此需要显式转换。只要有内存限制，就应该在 java 中使用整数。

```
public Student (String name, Career career, int idNumber)

//Enumeration for Career so no additional checks are required.
 enum Career
 {
     Computer_Science(0),Mathematics(1),Physics(2),Biology(3);
     private Career(int code)
     {
         this.code = code;
     }
     int code ;

     public int getCode()
     {
         return code;
     }

 } 
```

然后你可以做类似下面的事情

```
new Student("Andreiy", Career.Computer_Science, 0); 
```

# java - 如何在 Java swing 应用程序中根据内容自动组织和调整 JFrame 大小

> ID：12575878
> 
> 赞同：2
> 
> 时间：2012-09-25T03:37:38.930
> 
> 标签：java, swing, netbeans

我计划创建一个要求用户在多个字段中输入数据的应用程序，但是可能并不总是使用某些字段。我将为其开发此程序的人希望每次都能选择他要使用的字段。我想到了以下内容（但我不确定该怎么做）：

首先，显示所有可用字段的列表以及用于选择每个字段的复选框。然后，准备好所有字段的 JFrame，并根据用户的选择，布置表单以抑制未使用的字段并消除可能出现的任何间隙。（我考虑过对框架的组件使用 setvisible() ，然后找到一种方法来消除它们之间的间隙，这些间隙在隐藏不需要的元素时会出现）。但我认为这不是最有效的方法。无需说框架应该看起来井井有条且美观。我愿意接受建议，并在此先感谢您。

如果有任何不同，我将为此使用 netbeans 设计模式。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-09-25T03:49:58.897

[http://docs.oracle.com/javase/6/docs/api/java/awt/Window.html#pack](http://docs.oracle.com/javase/6/docs/api/java/awt/Window.html#pack) ()

`JFrame`有一个[pack()](http://docs.oracle.com/javase/7/docs/api/java/awt/Window.html#pack%28%29)方法，它将调整窗口大小以适应其内容。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-09-25T08:45:17.877

与布局要求一样，任务是找到一个合适的 LayoutManager，然后让它完成工作：即弄清楚如何根据组件的可见性分配可用空间。有了这个，你的工作归结为切换可见性并向后倾斜。

大多数核心管理者只是忽略隐藏的组件（可能是也可能不是你想要的）。高级管理器可以进行全方位配置——从与可见组件完全相同的方式处理到忽略。Fi MigLayout（我个人目前最喜欢的），具有 4 个级别的隐藏模式（相同方式，将组件大小设置为 0,0，将组件大小设置为 0,0，周围的所有间隙都为零，完全忽略）

下面是一个简单的示例：尝试隐藏模式的不同排列，将文本字段的标签与文本字段一起隐藏以查看不同的行为。

```
// hidemode 3 == ignore in layout
// hidemode 2 == zero size and zero gaps
// hidemode 1 == zero size
// hidemode 0 == same as visible
MigLayout layout = new MigLayout("wrap 2, hidemode 3");
JComponent content = new JPanel(layout);
JPopupMenu popup = new JPopupMenu();
for (int i = 0; i < 5; i++) {
    JTextField field = new JTextField("field " + i, 20);
    field.setName(field.getText());
    JLabel label = new JLabel("Label " + i);
    label.setLabelFor(field);
    content.add(label);
    content.add(field);
    popup.add(new JCheckBoxMenuItem(new ToggleVisibilityAction(field, true)));
}
content.setComponentPopupMenu(popup);

// action to toggle the visibility of a target component
// optionally w/out its label
public static class ToggleVisibilityAction extends AbstractAction {

    private JComponent target;
    private boolean hideLabel;

    public ToggleVisibilityAction(JComponent comp, boolean hideLabel) {
        super(comp.getName());
        this.target = comp;
        this.hideLabel = hideLabel;
        putValue(SELECTED_KEY, target.isVisible());
    }
    @Override
    public void actionPerformed(ActionEvent e) {
        boolean visible = (boolean) getValue(SELECTED_KEY);
        target.setVisible(visible);
        if (hideLabel && target.getClientProperty("labeledBy") instanceof JComponent) {
            ((Component) target.getClientProperty("labeledBy")).setVisible(visible);
        }
        target.getParent().revalidate();
    }

} 
```

# python - 一键延迟QTableView中的PyQt4 Selected Item Text

> ID：12575896
> 
> 赞同：1
> 
> 时间：2012-09-25T03:39:48.433
> 
> 标签：python, database, pyqt4, qtableview, qsqltablemodel

我正在使用 a`QTableView`来显示 a 的内容`QSqlTableModel`以及使用 a`QSortFilterProxyModel`来过滤记录。在下面的代码中，我设法在用户单击单元格时显示选定的文本（无论是否应用了过滤器）。但是，它总是在后面单击 1 次，开始后的第一次单击会导致一次单击，`IndexError: pop from empty list`并且当在同一行中选择新列时，什么也不会发生。

我在初始化表后尝试选择索引，似乎没有做任何事情。我不知道下一步该尝试什么？

```
class TableViewer(QtGui.QWidget):

    self.model =  QSqlTableModel()
    self._proxyModel = QtGui.QSortFilterProxyModel()
    self._proxyModel.setSourceModel(self.model)

    self.tv= QTableView()
    self.tv.setModel(self._proxyModel)

   '''Call-able filter - pass in string to filter everything that doesn't match string'''
    QtCore.QObject.connect(self.textEditFilterBox,  QtCore.SIGNAL("textChanged(QString)"),     self._proxyModel.setFilterRegExp)

     def getItem(self):
         '''Retruns item text of selected item'''
         index = self.selectionModel.selectedIndexes().pop()
         if index.isValid():
             row = index.row()
             column = index.column()
             model = index.model()
             if hasattr(model, 'mapToSource'):
                 #proxy model
                 modelIndex = model.mapToSource(index)
                 print (modelIndex.row(), modelIndex.column())
                 return self.model.record(modelIndex.row()).field(modelIndex.column()).value().toString()
         return self.model.record(row).field(column).value().toString()

class MainWindow(QtGui.QMainWindow):

    #initialize TableViewer

    self.tblViewer.connect(self.tblViewer.tv.selectionModel(),
            SIGNAL(("currentRowChanged(QModelIndex,QModelIndex)")),
            self.tblItemChanged)

    def tblItemChanged(self, index):
        '''display text of selected item '''
        text = self.tblViewer.getItem()
        print(text) 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-25T11:30:03.387

> 并且当在同一行中选择新列时，什么也不会发生。

那是因为您正在使用`currentRowChanged`信号。如果您选择同一行中的列，则不会触发该信号。你应该使用`currentChanged`信号。（并且，您应该使用[新样式的连接](http://www.riverbankcomputing.co.uk/static/Docs/PyQt4/html/new_style_signals_slots.html)）

而且，如果您只关注数据，则不需要那些东西来获取非代理`QModelIndex`然后询问模型等。A`QModelIndex`有一个方便的方法[`.data`](http://qt-project.org/doc/qt-4.8/qmodelindex.html#data)就是为了这个目的。此外，信号会向您发送选定的索引，您不需要额外的工作。这使您的代码像这样简单：（注意：`getItem`不需要方法）

```
class MainWindow(QtGui.QMainWindow):
    def __init__(self, parent=None):
        #initialize TableViewer
        self.tblViewer.tv.selectionModel().currentChanged.connect(self.tblItemChanged)

    def tblItemChanged(self, current, previous):
        '''display text of selected item '''
        # `data` defaults to DisplayRole, e.g. the text that is displayed
        print(current.data().toString()) 
```

# jquery - jQuery mobile 未正确显示选择和按钮

> ID：12575897
> 
> 赞同：1
> 
> 时间：2012-09-25T03:40:16.547
> 
> 标签：jquery, jquery-mobile

在某些页面 jquerymobile 选择和按钮显示两次。我已经将代码与其他运行正常但无法找出问题所在的页面进行了比较。你能帮我么？这是显示不良网页的代码，这里是打印屏幕[http://i49.tinypic.com/34g7ybn.png](http://i49.tinypic.com/34g7ybn.png)。谢谢！！

```
<div data-role="page" id="two" >
<div data-role="header" data-theme="b" >
    <a href="#one" data-icon="arrow-l"  data-ajax="false">Volver</a>
    <h1>Mis autos</h1>
</div>

<div data-role="content" style="padding: 15px;" >
    <div name="mensaje_error_sistema" id="mensaje_error_sistema" style="display: none;">
        <div data-role="popup" data-overlay-theme="b">
            <div class="ui-corner-all ui-body-e" style="padding:5px 15px; margin-top: 10px;">
                <p id="mensaje_error_sistema_txt" name="mensaje_error_sistema_txt" >.</p>
            </div>
        </div>
    </div>

    <form id="forms-alta-auto" method="post" action="index.php">                
        <input type="hidden" name="action" id="action" value="agregaauto">          
        <input type="text"   name="marca"  id="marca"  value="" placeholder="Marca"  onclick='$("#mensaje_error_sistema").hide();' />
        <input type="text"   name="modelo" id="modelo" value="" placeholder="Modelo" onclick='$("#mensaje_error_sistema").hide();' />

        <select name="color" id="color" data-native-menu="false" onclick='$("#mensaje_error_sistema").hide();'>
            <option value=''>Color</option>
            <option>Amarillo</option>
            <option>Azul</option>
            <option>Beige</option>
            <option>Blanco</option>
            <option>Bordo</option>
            <option>Celeste</option>
            <option>Champagne</option>
            <option>Gris</option>
            <option>Marr&oacute;n</option>
            <option>Negro</option>
            <option>Ocre</option>
            <option>Plateado</option>
            <option>Rojo</option>
            <option>Verde</option>
            <option>Violeta</option>
            <option>Otro</option>
        </select>

        <input name="patente" id="patente" placeholder="Patente" value="" type="text"  onclick='$("#mensaje_error_sistema").hide();' />
        </fieldset>

        <button type="submit" data-theme="b" id="agregar-auto" style="margin-top: 10px !important; margin-bottom: 10px !important;">Agregar el auto</button>

    </form>

</div>
<div style="height: 50px;"></div><div data-theme="a" data-role="footer" data-mini="true" style="position:absolute; bottom:0; width:100%;"><h3 style="font-size: 12px;">&copy; 2012 CompartiendoAuto.com</h3></div> 
```

# c++ - C ++ 11编写模板以选择更大的整数类型的方法？

> ID：12575898
> 
> 赞同：11
> 
> 时间：2012-09-25T03:40:16.930
> 
> 标签：c++, templates, c++11, metaprogramming

在 C++11 中的模板函数中编译时需要 2 个模板参数，这两个模板参数都必须是无符号整数类型，我希望局部变量具有两个模板参数中具有更多位的类型。在 C++03 中，我可能会写如下内容：

```
template<bool, class T, class U>
struct pick_first;

template<class T, class U>
struct pick_first<true, T, U> {
    typedef T type;
};

template<class T, class U>
struct pick_first<false, T, U> {
    typedef U type;
};

template<class T, class U>
struct pick_bigger {
    typedef typename pick_first<(sizeof(T) >= sizeof(U)), T, U>::type type;
};

// usage
template<class uintX_t, class uintY_t>
void foo() {
    typename pick_bigger<uintX_t, uintY_t>::type mylocal = 0;
    // insert doing stuff with mylocal here
} 
```

我可以利用任何新的 C++11 特性来简化它吗？我知道我可以使用可变参数模板来使它不仅适用于成对的类型，而且我可以编写许多特化来使其适用于新的 int_leastX_t 和 int_fastX_t 类型，而不是使用 pick_first。但我很好奇是否有一个更好的方法来解决这个问题。也许以某种方式利用 auto/constexpr/decltype？

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-09-25T05:09:45.537

您的 pick_first 只是 C++11 中的 std::conditional ，因此您可以编写

```
template<class T, class U>
struct wider {
    using type = typename std::conditional<sizeof(T) >= sizeof(U), T, U>::type; // I'm using the C++11 type alias feature 1) to educate people about them and 2) because I like them better than typedefs.
}; 
```

如果您只想要一个适合保存涉及两种类型的某些表达式的结果的类型，并且不一定需要这两种类型中的一种，那么`std::common_type`，或者也许`auto`，是最好的解决方案：

```
template<class uintX_t, class uintY_t>
void foo() {
    typename std::common_type<uintX_t, uintY_t>::type mylocal = 0;
    // insert doing stuff with mylocal here
}

// or
template<class uintX_t, class uintY_t>
void foo(uintX_t x, uintY_t y) {
    auto mylocal = x + y;
} 
```

[并且您的 pick_bigger 实现在其中缺少 a `typename`：`typedef typename pick_first<(sizeof(T) >= sizeof(U)), T, U>::type type;`]

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2021-08-31T13:55:00.393

这是我的解决方案，可以从 N 类型中选择最宽的类型，直到模板递归限制。

我还包括了最窄的代码。

```
template <typename TFirst, typename... TOther>
struct widest {
private:
  using rhs_recursive_type = typename widest<TOther...>::type;

public:
  using type =
      typename std::conditional<sizeof(TFirst) >= sizeof(rhs_recursive_type),
                                TFirst, rhs_recursive_type>::type;
};

template <typename TFirst>
struct widest<TFirst> {
  using type = TFirst;
};

template <typename TFirst, typename... TOther>
struct narrowest {
private:
  using rhs_recursive_type = typename widest<TOther...>::type;

public:
  using type =
      typename std::conditional<sizeof(TFirst) <= sizeof(rhs_recursive_type),
                                TFirst, rhs_recursive_type>::type;
};

template <typename TFirst>
struct narrowest<TFirst> {
  using type = TFirst;
}; 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-09-25T04:19:50.903

由于这两种类型都是无符号的，只需执行`decltype( T1() + T2() )`.

# search - 带有草坪椅数据库的 phonegap 应用程序的搜索功能

> ID：12575902
> 
> 赞同：0
> 
> 时间：2012-09-25T03:41:34.347
> 
> 标签：search, cordova, lawnchair

我该怎么做（标题）？

我查看了[http://brian.io/lawnchair/plugins/](http://brian.io/lawnchair/plugins/)上的插件“文档” ，我可以看到正在搜索平等，但我没有看到 .indexOf() 的内容

用例：我想在我的文章数据库中搜索至少包含关键字“obama”的每篇文章我希望在文章的正文字段中看到每个带有“obama”的文章对象。

如果有与每篇文章相关联的关键字会有所帮助，我也可以添加它，我的主要问题 atm 只是进行搜索。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-06T22:00:24.740

我最终使用了正则表达式并遍历了整个数据库：如果有人有更好的想法或更简洁的代码，请随时贡献。

```
var lawnchair = Lawnchair({name:'lawnchair'},function(e){
            console.log('storage open');
        });

 $('#search').click(function(e) {
            var search_term = $("#search_field").val();
            var search_type = $('#search_type').val(); 
            var re = new RegExp(search_term, "gi")
            console.log("startings search for "+search_term);
            console.log("startings search for "+re.toString());
            lawnchair.all(function(articles){
                $('#article_list').empty();
                console.log(articles.length);
                var counter = 0;
                for(var i = 0; i<articles.length;i++)
                {
                    cur_a = articles[i].value;
                    if(cur_a["title"] != null){
                        var thing_to_search = "string";
                        if(search_type == "both"){
                            thing_to_search = cur_a["title"]+" "+cur_a["body"];
                        }else if(search_type == "title"){
                            thing_to_search = cur_a["title"];
                        }else if (search_type == "body"){
                            thing_to_search = cur_a["body"];
                        }
                        var matches = thing_to_search.match(re);
                        if (matches != null) 
                        {
                            counter = counter + 1;
                            var lyo = make_article_layout();
                            lyo.find("#title").text(cur_a["title"]);
                            //xrank is the kw density
                            //let title be 10x more important than body
                            var xrank = (1.0 * matches.length) / thing_to_search.length;
                            if(cur_a["title"] != null){
                                var m2 = cur_a["title"].match(re);
                                if(m2 != null){
                                    xrank = (xrank * m2.length)
                                }
                            }
                            lyo.find("#match_count").text(matches.length.toString());
                            lyo.find("#xrank").text(xrank.toString());
                            console.log(cur_a["title"]);
                            //console.log(cur_a["body"]);
                            lyo.id = cur_a["_id"];
                            //lyo.find("#body").text(cur_a["body"]);
                            lyo.find("#published_at").append(" "+cur_a["published_at"]);
                            lyo.find("#author").append(" "+cur_a["author"]);
                            lyo.find("#source").append(" paper_id:"+cur_a["paper_id"]+" | "+cur_a["url"]);
                        }
                    }
                }
                $('#status').text("Results Found:"+counter.toString())
            });
        }); 
```

# php - 检查数组项

> ID：12575906
> 
> 赞同：0
> 
> 时间：2012-09-25T03:42:23.683
> 
> 标签：php, javascript, mysql, loops, recursion

在下面的代码中，$rows 是一个数组值，它是 MySQL 查询数据库中 TestPhase 表的结果。

```
<?php>
    $rows = array();

$result1 = mysql_query("SELECT * FROM TestPhase where Pid<10", $db) or die("cannot select");
while($row = mysql_fetch_array($result1)) {
  $rows []= array(
    'id' => $row['id'],
    'parent' => $row['parent'],
    'name' => $row['name'],
  );

}
?>

<script type="text/javascript">

var treeData = <?php echo json_encode($rows); ?>;

</script> 
```

此代码是 js 文件的片段，用于使用查询结果和存储在 var treeData 中的值（即 $rows 数组）构建树形图。

```
function toTree(treeData) {
   var childrenById = {}; 
   var tnodes = {};        
   var i, row;
   // first pass: build child arrays and initial node array
   for (i=0; i<treeData.length; i++) {
       row = treeData[i];
       tnodes[row.id] = {name: row.name, children: []};
       if (row.parent == -1) { // assume -1 is used to mark the root's "parent"
          root = row.id; 
       } else if (childrenById[row.parent] === undefined) {
          childrenById[row.parent] = [row.id];
       } else {
          childrenById[row.parent].push(row.id);
       }
   }

   function expand(id) {
       if (childrenById[id] !== undefined) {
           for (var i=0; i < childrenById[id].length; i ++) {
               var childId = childrenById[id][i];
               tnodes[id].children.push(expand(childId));
           }
       }
       return tnodes[id];
   }
   return expand(root);
}

console.log(toTree(treeData)); 
```

我想运行另一个 sql 查询来检查 TestOptions 表，以查看构成数组 $rows 的上述查询中返回的任何记录是否也是该表的一部分。这将是因为 $rows 数组中的每个项目或数组中的每个对象都可以通过外键连接到 TestOptions 表。

这是表 TestOption：`{optionID (PK);phaseID (FK-from TestPhase table); name}`

查询可能是这样的：

`Select name from TestOption where phaseID IN (Select id from TestPhase);`

基本上，如果 $rows 数组中返回的项目在 TestPhase 表中退出，则应该识别它并打印名称。

如果从查询到 TestPhase 表的 $rows 数组的一项连接到 TestOptions 表，我想通过打印存储在 TestOptions 表的 name 属性中的 name 值来了解这一点。

我该怎么做呢？我如何对数组的每个项目进行检查？

# javascript - 如何在触发 Rails form_tag 提交操作之前将 MD5 应用于密码？

> ID：12575909
> 
> 赞同：1
> 
> 时间：2012-09-25T03:42:42.987
> 
> 标签：javascript, ruby-on-rails, md5

我是 Rails 新手。

我在用户控制器中使用 has_secure_password 。我意识到它使用河豚来安全地存储密码，但我希望在密码离开浏览器客户端之前对其进行加密。如果这意味着密码被加密两次 - 我很好。

那么，在像下面这样的简单登录表单中，如何在提交表单之前调用我已经拥有的 Javascript 函数来将 MD5 应用于密码？当然——我可以只发送“标准”HTML 和 onSubmit() javascript 调用，但肯定有一种方法可以通过“Rails 方式”来实现。如何？

提前致谢！

```
<h1>Log In</h1>

<%= form_tag sessions_path do %>
  <div class="field">
    <%= label_tag :email %><br />
    <%= text_field_tag :email, params[:email] %>
  </div>
  <div class="field">
    <%= label_tag :password %><br />
    <%= password_field_tag :password %>
  </div>
  <div class="actions"><%= submit_tag "Log In" %></div>
<% end %> 
```

**更新：**

似乎没有“Rails 方式”可以做到这一点，所以按照 Samar 的建议，我只是在显式地给表单一个 id 之后，使用 jQuery 向表单单击事件添加了一个侦听器。以下是包含更改和错字更正的完整代码段。请注意，我使用的是我自己的 MD5 库。

```
<h1>Log In</h1>

<%= form_tag sessions_path, :id => 'user_login_form' do %>
    <div class="field">
        <%= label_tag :email %><br />
        <%= text_field_tag :email, params[:email] %>
     </div>
    <div class="field">
        <%= label_tag :password %><br />
        <%= password_field_tag :password %>
    </div>
    <div class="actions"><%= submit_tag "Log In" %></div>
<% end %>

<script type="text/javascript">
    $("#user_login_form").click(function(){
        $("#password").val(EncryptMD5($("#password").val()));
    });
</script> 
```

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2012-09-25T04:05:41.120

[从http://code.google.com/p/crypto-js/](http://code.google.com/p/crypto-js/)下载 cryptojs 。如果您的密码字段的 ID 为“password”并且提交按钮的 ID 为“form_submit”。然后执行以下操作：

```
<script type="text/javascript" src="crypto.js">
    <script type="text/javascript" src="http://code.jquery.com/jquery-1.8.2.min.js">
    <script>
    $("#form_submit").click(function){
    $("#password").val(CryptoJS.MD5($("#password").val()));
    });
    </script> 
```

# python - 如何限制表达式 eval() 或 exec() 可以运行？

> ID：12575910
> 
> 赞同：0
> 
> 时间：2012-09-25T03:42:56.060
> 
> 标签：python, parsing

所以我正在尝试制作一个类似于集合论计算器的 Python 应用程序（即两个集合的并集、交集、补码等）。我想要一个文本字段，在执行时，它像 Python 表达式一样被评估，带有大括号并且全部变成集合。计算新集合时，结果将打印在屏幕上。但是，我想确保用户不会输入任何可能会搞砸整个应用程序（或更糟；系统）的 Python 命令，无论是否有意。他应该只能输入以下内容；

*   设置操作（联合、差异、基数等；我将为数学符号提供按钮并使用正则表达式使其在引擎盖下正确）
*   集合（反过来，它只能包含以下元素；其他集合、元组、整数、实数、字母字符和字符串）。

为了给你一个想法，输入和输出应该是这样的（这个应用程序将带有一个 GUI，为了方便我只是使用终端样式）：

```
>>> {1, 2, a} - {a}
{1, 2} 
```

有小费吗？还是我应该只实现一种迷你语言，然后将其转换为 Python 命令？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-25T03:48:31.077

[首先编译](http://docs.python.org/library/functions.html#compile)表达式，然后[遍历生成的 AST](http://docs.python.org/library/ast.html)以验证它仅包含您明确希望允许的操作。*然后* [评价](http://docs.python.org/library/functions.html#eval)一下。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-25T05:01:34.967

我会使用可以翻译成 python 命令的迷你语言。

如果您想用 {} 表示法表示集合，您只需确保括号中包含的每个非数字值都被视为字符串（以避免安全风险）。嵌套括号将被实例化为冻结集合，因为集合是不可散列的并且不能嵌套。

解析集之间的操作数可能应该限于：

```
s <= t  test whether every element in s is in t
s >= t  test whether every element in t is in s
s | t   new set with elements from both s and t
s & t   new set with elements common to s and t
s - t   new set with elements in s but not in t
s ^ t   new set with elements in either s or t but not both 
```

# c++ - 第 15 次循环后的链表运行时错误

> ID：12575912
> 
> 赞同：2
> 
> 时间：2012-09-25T03:43:11.203
> 
> 标签：c++, linked-list, runtime-error

我在链表上插入时遇到问题。这是我的代码：

```
 for(j = 0; j < SIZE; j++) {
        body = (textFile*) malloc (sizeof(textFile));
        body->word = words[index[j]];
        if(head == NULL) {
            head = tail = body;
        }
        else {
            tail->next = body;
            tail = body;   
            cout << tail->word << endl;
        }
    } 
```

这里发生的是程序在我的链表上显示第 15 个元素后崩溃......我不知道为什么。索引被声明为 index[20] = {0}; 并且 SIZE 定义为 20，因此链表应该包含单词数组中的所有 20 个单词。可能的原因是什么？会不会是内存分配？提前致谢 ：）

这是我的更多代码。对不起，我有点羞于发布它我不擅长代码优雅。赦免。

```
 #include <iostream>
    #include <fstream>
    #include <string>
    #include <ctime>
    #include <cstdlib>
    #define SIZE 20

    using namespace std;

    struct textFile {
        string word;
        struct textFile *next;
    };

    textFile *head, *body, *tail, *temp;

    int main() {
        ifstream wordFile("WORDS.txt", ios::in); // file object constructor
        /* stores words in the file into an array */
        string words[SIZE];
        char pointer;
        int i;
        for(i = 0; i < SIZE; i++) {
            while(wordFile >> pointer) {
                if(!isalpha(pointer)) {
                    pointer++;
                    break;
                }
                words[i] = words[i] + pointer;
            }
        }
        /* stores the words in the array to a randomized linked list */
        srand(time(NULL));
        int index[SIZE] = {0}; // temporary array of index that will contain         randomized indexes of array words
        int j = 0, ctr;
        // assigns indexes to array index
        while(j < SIZE) {
            i = rand() % SIZE;
            ctr = 0;
            for(int k = 0; k < SIZE; k++) {
                if(!i)
                    break;
                else if(i == index[k]) { // checks if the random number has         previously been stored as index
                    ctr = 1;
                    break;
                }
            }
            if(!ctr) {
                index[j] = i; // assigns the random number to the current         index of array index
                j++;
            }
        }
        /* makes sure that there are no double zeros on the array */
        ctr = 0;
        for(i = 0; i < SIZE; i++) {
            if(!index[i])
                ctr++;
        }
        if(ctr > 1) {
            int temp[ctr-1];
            for(j = 0; j < ctr-1; j++) {
                for(i = 0; i < SIZE; i++) {
                    if(!index[i]) {
                        int ctr2 = 0;
                        for(int k = 0; k < ctr-1; k++) {
                            if(i == temp[k])
                                ctr2 = 1;
                        }
                        if(!ctr2)
                            temp[j] = i;
                    }
                }
            }
            j = ctr - 1;
            while(j > 0) {
                i = rand() % SIZE;
                ctr = 0;
                for(int k = 0; k < SIZE; k++) {
                    if(!i || i == index[k]) {
                        ctr = 1;
                        break;
                    }
                }
                if(!ctr) {
                    index[temp[j-1]] = i;
                    j--;
                }
            }
        }
        head = tail = body = temp = NULL;
        for(j = 0; j < SIZE; j++) {
            body = (textFile*) malloc (sizeof(textFile));
            body->word = words[index[j]];
            if(head == NULL) {
                head = tail = body;
            }
            else {
                tail->next = body;
                tail = body;
                cout << tail->word << endl;
            }
            }
            temp = head;
        while(temp != NULL) {
            cout << temp->word << endl;
            temp = temp->next;
        }
        return 0;
    } 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-25T05:03:57.010

问题在于您初始化主体结构的方式：

```
body = (textFile*) malloc (sizeof(textFile)); 
```

字符串没有被初始化，当您尝试分配给它时会导致分段错误。您应该改用 C++`new`关键字：

```
body = new textFile; 
```

该`new`关键字将为结构以及其中包含的任何对象引用分配内存。

也见[这里](https://stackoverflow.com/questions/3411815/how-to-use-a-c-string-in-a-structure-when-malloc-ing-the-same-structure)

# python - 我怎样才能让这个总结发挥作用？

> ID：12575914
> 
> 赞同：0
> 
> 时间：2012-09-25T03:43:38.500
> 
> 标签：python

我正在尝试为我编写的笔和纸游戏制作字符生成器（python 2.7）。我整天都在做这件事，直到我写到代码的最后。现在它坏了，我想不出一种方法让它在最后打印一张字符表。请记住，我是一个完全的新手，在这里我只是在尝试使用一堆东西。如果有人可以帮助我完成工作并使用代码中预先生成的所有信息打印字符表，我将不胜感激！我认为出错的是我需要一种方法让代码忽略一个变量，如果它在 ID 生成器中被跳过。无论如何，这是代码。

```
##########################################################
# Cyberpanky N.O.W Python Character Generator by Ray Weiss
#
# Created 9/24/2012
#
# Much thanks to Connor Daliposon 
# Mho made a very readable D&D Character Generator  
# That a Python newbie like me could understand                                                                                                                                                                                                                                 
##########################################################

# Imports
import random
from pprint import pprint

# Hey there
print """
Hello world & welcome to the CYBERPANKY N.O.W. character generator.
Programmed by Ray Weiss. 
To quit at anytime, press CNTRL-C.
"""

print "Lets figure out your stats first. Press enter to continue."
raw_input()

# Stat Roller
# Rolls 3D6 and adds the sum together and prints

def roll_stats():
    a = random.randint(1, 6)
    b = random.randint(1, 6) 
    c = random.randint(1, 6)
    d = random.randint(1, 6)
    list = [a, b, c, d]
    list.sort()
    add = sum(list[1:4])
    return add

# Modifiers

def pow_mod():
    a = "|+1 to hit on mele attack rolls| "
    b = "|+1 damage on mele attack rolls|"

    if pow >= 15 and pow < 17:
        return a
    if pow >= 17:
        return a + b
    else: 
        return " ~no modifiers~"

def iq_mod():   
    a = "|-500$ to invest in cyberspace| "
    b = "|Reroll Street Doc abilities|"

    if iq >= 15 and iq < 17:
        return a
    if iq >= 17:
        return a + b
    else: 
        return " ~no modifiers~"

def agi_mod():
    a = "|+1 to hit with ranged weapons| "
    b = "|-1 to hit with ranged weapons|"

    if agi >= 12:
        return a
    if agi <= 9:
        return b
    else: 
        return " ~no modifiers~"

def con_mod():
    a = "|+1 hit point per hit dice|"
    b = "|-1 hit point per hit dice|"

    if con >= 15:
        return a
    elif con <= 6: 
        return b
    else: 
        return " ~no modifiers~"

def cyn_mod():
    a = "|Add 10% to earned experience|"
    b = "|Add 5% to earned experience|"
    c = "|Subtract 10% from earned experience|"
    d = "|Subtract 20% from earned experience|"

    if cyn >= 15:
        return a
    elif cyn > 12 and cyn < 15:
        return b
    elif cyn > 6 and cyn < 9:
        return c
    elif cyn <= 6:
        return d
    else: 
        return " ~no modifiers~"

def cha_mod():
    a = "|+1 to reaction rolls|"
    b = "|-1 to reaction rolls|"

    if cha >= 15:
        return a 
    if cha <= 8:
        return b
    else: 
        return " ~no modifiers~"

# Prints stats + modifiers.
pow = roll_stats()
print "Power:", pow, pow_mod()
iq = roll_stats()
print "Intelligence:", iq, iq_mod()
agi = roll_stats()
print "Agility:", agi, agi_mod()
con = roll_stats()
print "Constitution:", con, con_mod()
cyn = roll_stats()
print "Cynicism:", cyn, cyn_mod()
cha = roll_stats()
print "Charisma:", cha, cha_mod()

print "\nIf you dont like your stats, tough shit. This is Cyberpanky N.O.W."
print "\nPress enter to continue."
raw_input()

# Choose Class

print """In Cyberpanky N.O.W. there are only 3 character classes. 

1\. Samurai: Badass mercenaries. Can make multiple attacks.  
------------------------------------------------------------------------------
2\. Street Docs: Hackers / Doctors. Can heal & hack. 
------------------------------------------------------------------------------
3\. Shaman: Magical prophets that follow spirit animals and cast miracles 
------------------------------------------------------------------------------
"""
type = int(raw_input("Please type a 1, 2, or 3 > "))

if type == 1:
    character_class = "Samurai"
    class_power = """* Attack multiple times for a -2 to hit penalty.
* Uses a D10 for Physical hit box.
* Has a + 1 to hit bonus that levels up to level 5\. 
"""
    name = raw_input("Alright {}, tell me your name >".format(character_class))

elif type == 2:
    character_class = "Street Doc"
    class_power = """* Roll IQ to mess with electronics
* Can heal party members after combat for 1D4 Hit Points
* Can perform cyberwear installation or surgery with proper tools.
"""
    name = raw_input("Alright {}, tell me your name >".format(character_class))

elif type == 3:
    character_class = "Shaman"
    class_power = """* Can cast Miracles.
* Can call for a saving grace if they are on their last Cool Hit Box
* Can do favors for their god for more miracles, or pay a tithe.
"""
    name = raw_input("Alright {}, tell me your name >".format(character_class))

# Alignment

print"""\nAlright {}, pick an alignment, it's not that important;

1\. Narcissist: Cocky bastard, you think you are the best.
------------------------------------------------------------------------------
2\. Neutral: Pretty self explanatory dipshit. 
------------------------------------------------------------------------------
3\. Nihilist: You care about nothing Lebowski, You'll cut off their Johnson. 
""".format(name)

x = int(raw_input("Please type a 1, 2, or 3 > "))

if x == 1:
    alignment = "Narcissist"

elif x == 2:
    alignment = "Neutral"

elif x == 3:
    alignment = "Nihilist"

print "\nOk you chose {} for an alignment, press enter to continue.".format(
                                                                alignment)
raw_input()

# Functions for ID generation

def gen_id():
    global gender_id
    one = "1\. Straight male"
    two = "2\. Gay male"
    three = "3\. Transgender male pre-op"
    four = "4\. Transgender male post-op"
    five = "5\. Bisexual male"
    six = "6\. Straight female"
    seven = "7\. Gay female"
    eight = "8\. Transgender female pre-op"
    nine = "9\. Transgender female post-op"
    ten = "10\. Bisexual female"
    list = [one, two, three, four, five, six, seven, eight, nine, ten]
    pprint(list)
    print "\nPlease hit enter to roll 1D10"
    raw_input()
    gender_id = random.choice(list)
    print "You rolled {}, press enter to continue.".format(gender_id)
    raw_input()

# Ethnic Profile
def eth_pr():
    global ethnic_pr
    one = "1\. Native American"
    two = "2\. West European"
    three = "3\. East European"
    four = "4\. North Asian"
    five = "5\. South Asian"
    six = "6\. Pacific"
    seven = "7\. North African"
    eight = "8\. South African"
    nine = "9\. Slavic / Caucuses"
    ten = "10\. Hispanic"
    list = [one, two, three, four, five, six, seven, eight, nine, ten]
    pprint(list)
    print "\nPlease hit enter to roll 1D10"
    raw_input()
    ethnic_pr = random.choice(list)
    print "You rolled {}, press enter to continue.".format(ethnic_pr)
    raw_input()

# Family Class Distinction
def fam_cls():
    global fcd
    one = "1\. Homeless"
    two = "2\. Impoverished"
    three = "3\. Lower Class"
    four = "4\. Lower Middle Class"
    five = "5\. Middle Class"
    six = "6\. Comfortable"
    seven = "7\. Upper Middle Class"
    eight = "8\. Upper Class"
    nine = "9\. Job Creators"
    ten = "10\. Warren Buffett"
    list = [one, two, three, four, five, six, seven, eight, nine, ten]
    pprint(list)
    print "Please hit enter to roll 1D10"
    raw_input()
    fcd = random.choice(list)
    print "You rolled {}, press enter to continue.".format(fcd)
    raw_input()

# Whats Good With Your Folks
def wha_goo():
    global wg, one_x, two_x
    one_x = "1\. Things Are Good With Your Folks; Go to Current Family Affairs"
    two_x = "2\. Your folks are fucked; go to Your Folks Got Fucked"
    list = [one_x, two_x]
    pprint(list)
    print "Please hit enter to roll 1D2"
    raw_input()
    wg = random.choice(list)
    print "You rolled {}, press enter to continue.".format(wg)
    raw_input()

# Your Folks Got Fucked
def yo_fo():
    global fogo_fuck
    one = "1\. Your parents were mugged and murdered, just like Batman"
    two = "2\. Your parents were both convicted of murder"
    three = "3\. Parents decapitated by a truck"
    four = "4\. Parents addicted to coke, put you in an orphanage"
    five = "5\. Parents were corporate spies and assinated in front of you"
    six = "6\. Parents abandonded you at a young age and joined a cult"
    seven = "7\. Your parents died from STDs contracted from aldultery"
    eight = "8\. Parents owed mob a bunch of money, sleeping with fishies"
    nine = "9\. Nuclear explosion incinerated parents, their shadow remains"
    ten = "10\. Parents shot themselves immediately after you were born."
    list = [one, two, three, four, five, six, seven, eight, nine, ten]
    pprint(list)
    print "Please hit enter to roll 1D10"
    raw_input()
    fogo_fuck = random.choice(list)
    print "You rolled {}, press enter to continue.".format(fogo_fuck)
    raw_input()

# Current Family Affairs
def cu_fa():
    global cur_fam, one_y, two_y
    one_y = "1\. Things are ok with family, go to Nature Or Nurture"
    two_y = "2\. Your family is fucked, go to Your Family Is Fucked"
    list = [one_y, two_y]
    pprint(list)
    print "Please hit enter to roll 1D2"
    raw_input()
    cur_fam = random.choice(list)
    print "You rolled {}, press enter to continue.".format(cur_fam)
    raw_input()

# Your Family Got Fucked
def fa_fu():
    global fam_fuk
    one = "1\. Market tanked with president Paul, dead broke family."
    two = "2\. Home invaders raped and murded the women in your family"
    three = "3\. Racial Supremisicist drove your family from their home"
    four = "4\. Whole family was abducted by aliens, never seen again"
    five = "5\. Radiation leak hospitalized your whole family."
    six = "6\. Family was accidentally napalmed by the UN, all dead."
    seven = "7\. Family came down with malaria"
    eight = "8\. Family has some obvious dealings with Illuminati"
    nine = "9\. Family eaten alive by cannibals"
    ten = "10\. Make it up dipshit"
    list = [one, two, three, four, five, six, seven, eight, nine, ten]
    pprint(list)
    raw_input()
    fam_fuk = random.choice(list)
    print "You rolled {}, press enter to continue.".format(fam_fuk)
    raw_input()

# Nature Or Nurture
def na_nu():
    global nat_nur
    one = "1\. Your childhood was very boring & average" 
    two = "2\. Your childhood was spent moving from city to city"
    three = "3\. Your childhood was depraved; hungry and lonely"
    four = "4\. Your childhood was rewarding, social & fun."
    five = "5\. You were a sick child, spent a lot of time in bed"
    six = "6\. You were sent to a preppy boarding school as a kid"
    seven = "7\. You got addicted to drugs; it screwed you up."
    eight = "8\. You killed another kid, spent time in a hospital"
    nine = "9\. You were a child genius, but had few friends"
    ten = "10\. Make it up dipshit"
    list = [one, two, three, four, five, six, seven, eight, nine, ten]
    pprint(list)
    print "Please hit enter to roll 1D10"
    raw_input()
    nat_nur = random.choice(list)
    print "You rolled {}, press enter to continue.".format(nat_nur)
    raw_input()

# General Disposition
def ge_di():
    global gen_dis
    one = "1\. Friendly"
    two = "2\. Unfriendly"
    three = "3\. Shy"
    four = "4\. Outgoing"
    five = "5\. Unpretentious"
    six = "6\. Pretentious"
    seven = "7\. Hyperactive"
    eight = "8\. Depressed"
    nine = "9\. Wonderful Human Being"
    ten = "10\. Scumbag"
    list = [one, two, three, four, five, six, seven, eight, nine, ten]
    pprint(list)
    print "Please hit enter to roll 1D10"
    raw_input()
    gen_dis = random.choice(list)
    print "You rolled {}, press enter to continue.".format(gen_dis)
    raw_input()

# Whats the most important thing in the world
def wh_wo():
    global wha_wor
    one = "1\. Money"
    two = "2\. Kicking ass"
    three = "3\. Getting fucked up"
    four = "4\. Family & friends"
    five = "5\. Business"
    six = "6\. The internet" 
    seven = "7\. Faith"
    eight = "8\. Style"
    nine = "9\. Anarchy"
    ten = "10\. Selfishness"
    list = [one, two, three, four, five, six, seven, eight, nine, ten]
    pprint(list)
    print "Please hit enter to roll 1D10"
    raw_input()
    wha_wor = random.choice(list)
    print "You rolled {}, press enter to continue.".format(wha_wor)
    raw_input()

# Who is to blame for the worlds problems?
def wh_pr():
    global who_pro
    one = "1\. Corporations"
    two = "2\. Leftists"
    three = "3\. Fate"
    four = "4\. Religion"
    five = "5\. The Illuminatus"
    six = "6\. The News Media"
    seven = "7\. The UN"
    eight = "8\. Your Neighbors"
    nine = "9\. Aliens"
    ten = "10\. President Ron Paul"
    list = [one, two, three, four, five, six, seven, eight, nine, ten]
    pprint(list)
    print "Please hit enter to roll 1D10"
    raw_input()
    who_pro = random.choice(list)
    print "You rolled {}, press enter to continue.".format(who_pro)
    raw_input()

# How do you solve the worlds problems
def ho_pr():
    global how_pro
    one = "1\. Kill them all"
    two = "2\. But them out"
    three = "3\. Intimidation"
    four = "4\. Diplomacy"
    five = "5\. Free trade"
    six = "6\. Seduction"
    seven = "7\. New-Age spirituality"
    eight = "8\. Religious fanaticism"
    nine = "9\. Federal power"
    ten = "10\. Who gives a shit"
    list = [one, two, three, four, five, six, seven, eight, nine, ten]
    pprint(list)
    print "Please hit enter to roll 1D10"
    raw_input()
    how_pro = random.choice(list)
    print "You rolled {}, press enter to continue.".format(how_pro)
    raw_input()

# ID Generation

print ("Alright {}, now we need to figure out your personality & life story."
                                                               .format(name))
print "\n\t\t1\. Ethnics, Genes, & Looks"
print "\nTo figure out your age, we add 15 to 1D10.\n"
age = random.randint(1, 10) + 15
print "Press enter to continue dipshit."
raw_input()
print "Age:", age
print "\t\tGender Identity\n"
gen_id()
print "\t\tEthnic Profile\n"
eth_pr()
print "\t\t2\. Ballz Of Our Fathers"
print "\n"
print "\t\tFamily Class Distinction"
fam_cls()
print "\t\tWhat's Good With Your Folks"
wha_goo()
if wg == one_x:
    fogo_fuck = "none"
    print "\t\tCurrent Family Affairs"
    cu_fa()
    print "\t\tNature Or Nurture?"
    na_nu()
    if cur_fam == one_y:
        fam_fuk = "none"
        print "\t\tNature Or Nurture?"
        na_nu()
    if cur_fam == two_y:
        print "\t\t Your Family Is Fucked"
        fa_fu()
if wg == two_x:
    print "\t\tYour Folks Got Fucked"
    yo_fo()
    print "\t\tCurrent Family Affairs"
    cu_fa()
    print "\t\tNature Or Nurture?"
    na_nu()
    if cur_fam == one_y:
        print "\t\tNature Or Nurture?"
        na_nu()
    if cur_fam == two_y:
        print "\t\t Your Family Is Fucked"
        fa_fu()
print "\t\t3\. What Makes you tick"
print "\n"
print "\t\tGeneral Disposition"
ge_di()
print "\t\tWhat's The Most Important Thing In The World?"
wh_wo()
print "\t\tWho Is To Blame For The World's Problems?"
wh_pr()
print "\t\tHow Do You Solve Your / The Worlds Problem"
ho_pr()

#Starting Money
gold = roll_stats() * 100

print "Ok so lets sum that up, please hit enter to continue"
raw_input()

print"""
------------------------------------------------------------------------------
"""

# Character Sheet Function.
def char_shee():
    print "Name:", name
    print "Class:", character_class
    print "Class Powers:", class_power
    print "Alignment:", alignment
    print "Power:", pow, pow_mod()
    print "Intelligence:", iq, iq_mod()
    print "Agility:", agi, agi_mod()
    print "Constitution:", con, con_mod()
    print "Cynicism:", cyn, cyn_mod()
    print "Charisma:", cha, cha_mod()
    print "All Characters Start With 3 Hit Dice"
    print"""
\t\t{0}' History
\t\t------------------
\t\tAge:{1}
\t\t{2}
\t\t{3}
\t\t{4}
\t\t{5}
\t\t{6}
\t\t{7}
\t\t{8}
\t\t{9}
\t\t{10}
\t\t{11}
\t\t{12}
\t\t{13}
\t\t{14}
""".format(name, age, gender_id, ethnic_pr, fcd, wg, fogo_fuck, cur_fam,fam_fuk, nat_nur, gen_dis, wha_wor, who_pro, how_pro)

char_shee() 
```

让我知道我是否将其发布在错误的地方，或者我是否需要提供更多信息，尽管我认为这次我终于将其发布在正确的地方:)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-25T04:20:25.093

你得到一个 IndexError 因为你在第 517 行的 .format() 语句中没有足够的位置参数。你应该有 15 个，但你只有 14 个。

如果删除第 516 行：

```
 \t\t{14} 
```

一切都会好起来的。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-25T04:19:10.200

使用类

```
class player(object):
      def __init__(self):
          self.pow = roll_stats()
          self.iq = roll_stats()
          self.agi = roll_stats()
          self.con = roll_stats()
          self.cyn = roll_stats()
          self.cha = roll_stats()
          self.special = ''
      def __str__(self):
          return """"
         Power:%s
         Intelligence:%s
         Agillity:%s
         Constitution:%s
         Cynasism:%s
         Charisma:%s
         %s
"""%(self.pow,self.iq,self.agi,self.com,self.syn,self.cha,self.special) 
```

然后做

```
p = player()
print p 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-25T06:57:52.343

这不是您的问题，但让我添加`roll_stats`.

```
return roll_stats():
    def d6():
        return random.randint(1, 6)

    return sum(sorted((d6(), d6(), d6(), d6()))[1:4]) 
```

# java - log4j 堆栈溢出

> ID：12575918
> 
> 赞同：6
> 
> 时间：2012-09-25T03:44:27.160
> 
> 标签：java, log4j, stack-overflow

这是 stackoverflow 网站上真正的 stackoverflow 异常！我只是想知道是否有人以前看过它 - 以及他们用来解决这个问题的方法。

```
java.lang.StackOverflowError
at java.lang.Exception.<init>(Exception.java:41)
at java.io.IOException.<init>(IOException.java:41)
at java.io.FileOutputStream.writeBytes(Native Method)
at java.io.FileOutputStream.write(FileOutputStream.java:260)
at sun.nio.cs.StreamEncoder.writeBytes(StreamEncoder.java:202)
at sun.nio.cs.StreamEncoder.implWrite(StreamEncoder.java:263)
at sun.nio.cs.StreamEncoder.write(StreamEncoder.java:106)
at sun.nio.cs.StreamEncoder.write(StreamEncoder.java:116)
at java.io.OutputStreamWriter.write(OutputStreamWriter.java:203)
at java.io.Writer.write(Writer.java:140)
at org.apache.log4j.helpers.CountingQuietWriter.write(CountingQuietWriter.java:44)
at org.apache.log4j.WriterAppender.subAppend(WriterAppender.java:301)
at org.apache.log4j.contribs.DailyRollingFileAppender.subAppend(DailyRollingFileAppender.java:395)
at org.apache.log4j.WriterAppender.append(WriterAppender.java:159)
at org.apache.log4j.AppenderSkeleton.doAppend(AppenderSkeleton.java:230)
at org.apache.log4j.helpers.AppenderAttachableImpl.appendLoopOnAppenders(AppenderAttachableImpl.java:65)
at org.apache.log4j.Category.callAppenders(Category.java:203)
at org.apache.log4j.Category.forcedLog(Category.java:388)
at org.apache.log4j.Category.log(Category.java:835)
at org.apache.log4j.contribs.LoggingOutputStream.flush(LoggingOutputStream.java:168)
at java.io.PrintStream.write(PrintStream.java:432)
at sun.nio.cs.StreamEncoder.writeBytes(StreamEncoder.java:202)
at sun.nio.cs.StreamEncoder.implFlushBuffer(StreamEncoder.java:272)
at sun.nio.cs.StreamEncoder.flushBuffer(StreamEncoder.java:85)
at java.io.OutputStreamWriter.flushBuffer(OutputStreamWriter.java:168)
at java.io.PrintStream.write(PrintStream.java:477)
at java.io.PrintStream.print(PrintStream.java:619)
at java.io.PrintStream.println(PrintStream.java:756)
at org.apache.log4j.helpers.LogLog.error(LogLog.java:142)
at org.apache.log4j.helpers.OnlyOnceErrorHandler.error(OnlyOnceErrorHandler.java:77)
at org.apache.log4j.helpers.OnlyOnceErrorHandler.error(OnlyOnceErrorHandler.java:67)
at org.apache.log4j.helpers.CountingQuietWriter.write(CountingQuietWriter.java:48)
at org.apache.log4j.WriterAppender.subAppend(WriterAppender.java:301)
at org.apache.log4j.contribs.DailyRollingFileAppender.subAppend(DailyRollingFileAppender.java:395)
at org.apache.log4j.WriterAppender.append(WriterAppender.java:159)
at org.apache.log4j.AppenderSkeleton.doAppend(AppenderSkeleton.java:230)
at org.apache.log4j.helpers.AppenderAttachableImpl.appendLoopOnAppenders(AppenderAttachableImpl.java:65)
at org.apache.log4j.Category.callAppenders(Category.java:203)
at org.apache.log4j.Category.forcedLog(Category.java:388)
at org.apache.log4j.Category.log(Category.java:835)
at org.apache.log4j.contribs.LoggingOutputStream.flush(LoggingOutputStream.java:168)
at java.io.PrintStream.write(PrintStream.java:432)
at sun.nio.cs.StreamEncoder.writeBytes(StreamEncoder.java:202)
at sun.nio.cs.StreamEncoder.implFlushBuffer(StreamEncoder.java:272)
at sun.nio.cs.StreamEncoder.flushBuffer(StreamEncoder.java:85)
at java.io.OutputStreamWriter.flushBuffer(OutputStreamWriter.java:168)
at java.io.PrintStream.write(PrintStream.java:477)
at java.io.PrintStream.print(PrintStream.java:619)
at java.io.PrintStream.println(PrintStream.java:756)
at org.apache.log4j.helpers.LogLog.error(LogLog.java:142)
at org.apache.log4j.helpers.OnlyOnceErrorHandler.error(OnlyOnceErrorHandler.java:77)
at org.apache.log4j.helpers.OnlyOnceErrorHandler.error(OnlyOnceErrorHandler.java:67)
at org.apache.log4j.helpers.CountingQuietWriter.write(CountingQuietWriter.java:48)
at org.apache.log4j.WriterAppender.subAppend(WriterAppender.java:301)
at org.apache.log4j.contribs.DailyRollingFileAppender.subAppend(DailyRollingFileAppender.java:395)
at org.apache.log4j.WriterAppender.append(WriterAppender.java:159)
at org.apache.log4j.AppenderSkeleton.doAppend(AppenderSkeleton.java:230)
at org.apache.log4j.helpers.AppenderAttachableImpl.appendLoopOnAppenders(AppenderAttachableImpl.java:65)
at org.apache.log4j.Category.callAppenders(Category.java:203)
at org.apache.log4j.Category.forcedLog(Category.java:388)
at org.apache.log4j.Category.log(Category.java:835)
at org.apache.log4j.contribs.LoggingOutputStream.flush(LoggingOutputStream.java:168)
at java.io.PrintStream.write(PrintStream.java:432)
at sun.nio.cs.StreamEncoder.writeBytes(StreamEncoder.java:202)
at sun.nio.cs.StreamEncoder.implFlushBuffer(StreamEncoder.java:272)
at sun.nio.cs.StreamEncoder.flushBuffer(StreamEncoder.java:85)
at java.io.OutputStreamWriter.flushBuffer(OutputStreamWriter.java:168)
at java.io.PrintStream.write(PrintStream.java:477) 
```

...（重复约 10 次）

```
 at java.io.PrintStream.write(PrintStream.java:432)
at sun.nio.cs.StreamEncoder.writeBytes(StreamEncoder.java:202)
at sun.nio.cs.StreamEncoder.implFlushBuffer(StreamEncoder.java:272)
at sun.nio.cs.StreamEncoder.flushBuffer(StreamEncoder.java:85)
at java.io.OutputStreamWriter.flushBuffer(OutputStreamWriter.java:168)
at java.io.PrintStream.write(PrintStream.java:477)
at java.io.PrintStream.print(PrintStream.java:619)
at java.io.PrintStream.println(PrintStream.java:756)
at org.apache.log4j.helpers.LogLog.error(LogLog.java:142)
at org.apache.log4j.helpers.OnlyOnceErrorHandler.error(OnlyOnceErrorHandler.java:77)
at org.apache.log4j.helpers.OnlyOnceErrorHandler.error(OnlyOnceErrorHandler.java:67)
at org.apache.log4j.helpers.CountingQuietWriter.write(CountingQuietWriter.java:48)
at org.apache.log4j.WriterAppender.subAppend(WriterAppender.java:301)
at org.apache.log4j.contribs.DailyRollingFileAppender.subAppend(DailyRollingFileAppender.java:395)
at org.apache.log4j.WriterAppender.append(WriterAppender.java:159)
at org.apache.log4j.AppenderSkeleton.doAppend(AppenderSkeleton.java:230)
at org.apache.log4j.helpers.AppenderAttachableImpl.appendLoopOnAppenders(AppenderAttachableImpl.java:65) 
```

java.lang.StackOverflowError

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-09-25T05:45:27.793

此处缺少您的 log4j 配置文件和代码。

但最初的猜测是

1) [LoggingOutputStream](http://svn.apache.org/repos/asf/logging/log4j/trunk/contribs/JimMoore/LoggingOutputStream.java)在代码中的某处使用，替换`System.err`如下：

```
System.setErr(new PrintStream(new LoggingOutputStream(Category.getRoot(), Priority.WARN), true)); 
```

2) log4j 配置不正确，并尝试`System.err`在[LogLog](http://grepcode.com/file/repo1.maven.org/maven2/log4j/log4j/1.2.17/org/apache/log4j/helpers/LogLog.java#142)中打印内部错误。

这会创建导致堆栈溢出的循环日志记录调用。

尝试`System.err`从 1) 中删除拦截器。这将允许来自 2) 的内部错误浮出水面。

# android - 使用操作栏选项卡在方向上显示错误的片段

> ID：12575920
> 
> 赞同：1
> 
> 时间：2012-09-25T03:44:47.177
> 
> 标签：android, android-fragments, android-actionbar, android-orientation

我已经实现了 ActionbarSherlock 的示例 com.actionbarsherlock.sample.fragments 并且在所选选项卡具有子片段时更改设备方向之前一切正常。

**都好：**

Tab1 -> 片段 1

Tab2 -> 片段2

Tab3 -> 片段 3

一切都很好，可以毫无问题地旋转设备。现在，如果我在 Fragment2 中选择一个列表项来推送 Fragment2Child1，在我旋转设备之前一切都很好。

**设备旋转时不好：**

Tab1 -> 片段 1

Tab2 -> Fragment2 -> **Fragment2Child1**

Tab3 -> 片段 3

此时选项卡和片段被重新创建，但 Fragment2 显示在 Fragment2Child1 下。当您选择另一个选项卡时情况会变得更糟，此时 Fragment2 已分离，但 Fragment2Child1 显示在新选择的选项卡片段下。我有点理解这里的机制，但我不知道如何在旋转后不附加 Fragment2，然后在选择另一个选项卡时分离 Fragment2Child1（或任何片段）。

来自扩展 SherlockFragmentActivity 的 MainFragment

…</p>

```
int currentapiVersion = android.os.Build.VERSION.SDK_INT;
if (currentapiVersion >= android.os.Build.VERSION_CODES.ICE_CREAM_SANDWICH) {

            mTabManager.addTab(mTabHost.newTabSpec("new").setIndicator(getString(R.string.new_)), NewListSupportActivity.NewListFragment.class, null);
        mTabManager.addTab(mTabHost.newTabSpec("project").setIndicator(getString(R.string.project)), ProjectSupportActivity.ProjectListFragment.class, null);
        mTabManager.addTab(mTabHost.newTabSpec("setting").setIndicator(getString(R.string.settings)), SettingSupportActivity.SettingListFragment.class, null);

        if (savedInstanceState != null) {
            mTabHost.setCurrentTabByTag(savedInstanceState.getString("tab"));
        }

    } else { 
```

…</p>

从 TabManager 类

```
public void addTab(TabHost.TabSpec tabSpec, Class<?> clss, Bundle args) {

    tabSpec.setContent(new DummyTabFactory(this.mActivity));
    final String tag = tabSpec.getTag();

    final TabInfo info = new TabInfo(tag, clss, args);

    // Check to see if we already have a fragment for this tab, probably
    // from a previously saved state. If so, deactivate it, because our
    // initial state is that a tab isn't shown.
    info.fragment = this.mActivity.getSupportFragmentManager().findFragmentByTag(tag);
    if (info.fragment != null && !info.fragment.isDetached()) {
        final FragmentTransaction ft = this.mActivity.getSupportFragmentManager().beginTransaction();
        ft.detach(info.fragment);
        ft.commit();
    }

    this.mTabs.put(tag, info);
    this.mTabHost.addTab(tabSpec);
}

@Override
public void onTabChanged(String tabId) {

    TabInfo newTab = mTabs.get(tabId);
    if (mLastTab != newTab) {
        FragmentTransaction ft = mActivity.getSupportFragmentManager().beginTransaction();
        if (mLastTab != null) {
            if (mLastTab.fragment != null) {
                ft.detach(mLastTab.fragment);
            }
        }
        if (newTab != null) {
            if (newTab.fragment == null) {
                newTab.fragment = Fragment.instantiate(mActivity, newTab.clss.getName(), newTab.args);
                ft.add(mContainerId, newTab.fragment, newTab.tag);
            } else {
                ft.attach(newTab.fragment);
            }
        }

        mLastTab = newTab;
        ft.commit();
        mActivity.getSupportFragmentManager().executePendingTransactions();
    }
} 
```

以及推动 Fragment2Child1 或任何孩子的代码

```
public void pushFragment(TradiesFragment current, TradiesFragment fragment) {

    fragment.setFragmentListener(this);
    final FragmentManager fm = this.fragment.getFragmentManager();
    final FragmentTransaction ft = fm.beginTransaction();
    ft.setCustomAnimations(R.anim.slide_in_right, R.anim.slide_out_left, android.R.anim.slide_in_left, android.R.anim.slide_out_right);
    ft.detach(current);
    ft.add(this.fragment.getId(), fragment);
    ft.addToBackStack(null);
    ft.commit();
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-09T03:59:14.100

这个问题没有答案。至少我能想到的没有一个不是非常丑陋的。解决方案是将**Fragment2Child1**包装在 Activity 中。**导航到Fragment2Child1Activity**时，您最终会隐藏选项卡活动。并且用户每次都被迫导航回主要活动（带有标签）。从好的方面来说，它实际上使用户界面更简单。

# sql - Oracle 获取一个月内的所有日期

> ID：12575922
> 
> 赞同：3
> 
> 时间：2012-09-25T03:45:08.220
> 
> 标签：sql, oracle

我正在尝试编写一个 SQL 语句，它允许我检索在 9 月份创建的所有订单，但运气不佳。

不工作：

```
select order_number, created_date
from orders
where created_date in to_date('2012-09', 'YYYY-MM'); 
```

工作但时间过长：

```
select order_number, created_date
from orders
where trunc(created_date) between to_date('2012-09-01', 'YYYY-MM-DD') and to_date('2012-09-30', 'YYYY-MM-DD'); 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-09-25T04:09:29.213

怎么样：

```
select order_number, created_date
from orders
where created_date >= to_date('2012-09-01', 'YYYY-MM-DD') 
and created_date < to_date('2012-10-01', 'YYYY-MM-DD'); 
```

您应该尽量`created_date`保持原样，以确保您可以很好地利用索引。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-09-25T04:05:35.797

使用以下代码。

```
select order_number, created_date
from orders
where TO_CHAR(created_date, 'YYYY-MM') in '2012-09'; 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-09-25T04:08:29.403

我认为您使用的版本`between`会具有更好的性能，但是您可以随时尝试相反的方法：

```
WHERE TO_CHAR(created_date, 'YYYY-MM') = '2012-09'; 
```

另一种选择是[EXTRACT](http://docs.oracle.com/cd/B19306_01/server.102/b14200/functions050.htm)：

```
WHERE 
  EXTRACT(year FROM created_date) = 2012 
  AND EXTRACT(month FROM created_date) = 9; 
```

* * *

**更新：**

**从Oracle 8i**开始可以使用[基于函数的索引](http://docs.oracle.com/cd/B28359_01/server.111/b28310/indexes003.htm#i1006674)来提高这种查询的性能：

```
CREATE INDEX ORDS_CRTD_DT_YYYY_MM_IDX 
   ON orders (TO_CHAR(created_date, 'YYYY-MM')); 
```

当然，您应该避免无缘无故地创建索引（它们会减慢写操作的速度），当您的问题有更简单的解决方案时——比如@Rob 提供的解决方案——就可以使用它。请记住，可以使用`TRUNC`,`TO_CHAR`和等功能`EXTRACT`，但仍然可以避免完全扫描。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2019-02-18T15:42:06.343

*无需使用 重复该`created_date`列`between`，即使查询继续利用该列上的索引（如果有），通过使用`trunc(to_date('2012-09','yyyy-mm'),'Month')`该月的第一个日期和`last_day(to_date('2012-09','yyyy-mm'))`最后一个日期。*

```
with orders(order_number, created_date) as
(
 select 1, date'2012-08-31' from dual union all
 select 2, date'2012-09-01' from dual union all
 select 3, date'2012-09-02' from dual union all
 select 4, date'2012-09-29' from dual union all   
 select 5, date'2012-09-30' from dual union all   
 select 6, date'2012-10-01' from dual    
),
  param(month) as
(
 select to_date('2012-09','yyyy-mm') from dual    
)    
select order_number, created_date 
  from orders
 cross join param
 where created_date between trunc(month,'Month')
                        and last_day(month);

ORDER_NUMBER    CREATED_DATE
------------    ------------
2               01.09.2012 
3               02.09.2012 
4               29.09.2012 
5               30.09.2012 
```

`[Demo](https://rextester.com/KNTC84472)`

# javascript - 使用 null 值克隆元素输入 javascript

> ID：12575925
> 
> 赞同：1
> 
> 时间：2012-09-25T03:45:35.330
> 
> 标签：javascript, jquery

```
$(document).ready(function() {
        $('#btnAdd').click(function() {
            var num     = $('.clonedInput').length;
            var newNum  = new Number(num + 1);

            var newElem = $('#input' + num).cloneNode(true).attr('id', 'input' + newNum);

            newElem.children(':first').attr('id', 'name' + newNum).attr('name', 'name' + newNum);
            $('#input' + num).after(newElem);
            $('#btnDel').attr('disabled','');

            if (newNum == 5)
                $('#btnAdd').attr('disabled','disabled');
        }); 
```

我克隆了文本框，但代码不起作用，我该如何解决？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-25T04:09:43.190

尝试

```
var newElem = $('#input' + num).clone().attr('id', 'input' + newNum); 
```

根据[documentFragment.cloneNode(true) 不会克隆 jQuery 数据](https://stackoverflow.com/questions/2831414/documentfragment-clonenodetrue-doesnt-clone-jquery-data)

更新：也许您想克隆 num-1 因为 num 是尚不存在的新字段

# iphone - admob 集成中的可达性错误

> ID：12575927
> 
> 赞同：0
> 
> 时间：2012-09-25T03:45:48.887
> 
> 标签：iphone, ios, admob

我正在尝试将 admob 集成到我的 ios 应用程序中，但是当我添加 sdk 并构建它时出现以下错误。

```
Undefined symbols for architecture i386:
  "_SCNetworkReachabilityCreateWithName", referenced from:
      -[GADNetworkChecker startNetworkChecking] in libGoogleAdMobAds.a(GADNetworkChecker.o)
  "_SCNetworkReachabilityScheduleWithRunLoop", referenced from:
      -[GADNetworkChecker startNetworkChecking] in libGoogleAdMobAds.a(GADNetworkChecker.o)
  "_SCNetworkReachabilitySetCallback", referenced from:
      -[GADNetworkChecker startNetworkChecking] in libGoogleAdMobAds.a(GADNetworkChecker.o)
  "_SCNetworkReachabilityUnscheduleFromRunLoop", referenced from:
      -[GADNetworkChecker stopNetworkChecking] in libGoogleAdMobAds.a(GADNetworkChecker.o)
ld: symbol(s) not found for architecture i386
clang: error: linker command failed with exit code 1 (use -v to see invocation) 
```

我已经包含了所有必需的框架，包括 SystemConfiguration、CFNetwork 等。

## 更新

我在模拟器中构建时遇到此错误，但在使用设备构建时却没有。是sdk的问题吗？我正在使用模拟器 5.1。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-25T16:38:30.193

确保您添加的框架在构建设置的“将二进制文件与库链接”部分下正确链接。此外，请查看“构建阶段”下的“编译源”以确保您要编译的所有相关文件都在那里。

# python - Python bz2file 比 bz2 慢吗？

> ID：12575930
> 
> 赞同：2
> 
> 时间：2012-09-25T03:46:30.817
> 
> 标签：python, performance, bzip2

我有一个使用正则表达式解析 BZ2 压缩日志文件的 Python 脚本。

我们的表现非常糟糕，我最初认为这是我的正则表达式 - 但是，当我进一步观察时，似乎 bz2file 表现不佳。

我们使用的是 Python 2.6 和 bz2file 0.9。

我注意到使用 Bz2file (http://pypi.python.org/pypi/bz2file) 顺序读取文件似乎比使用内置 bz2 实现慢得多。

我写了两个测试脚本 - 一个使用 bz2：

```
import bz2
filename = 'some_bz2file.bz2'

if __name__ == "__main__":
    f = bz2.BZ2File(filename, 'rb')
    for line in f:
        print(line) 
```

另一个使用 bz2file：

```
import bz2file
filename = 'some_bz2file.bz2'

if __name__ == "__main__":
    f = bz2file.BZ2File(filename, 'rb')
    for line in f:
        print(line) 
```

我给他们两个计时：

```
$ time python26 testbz.py  > /dev/null

real    0m0.608s
user    0m0.596s
sys     0m0.011s

$ time python26 testbz2file.py > /dev/null

real    0m12.035s
user    0m11.952s
sys     0m0.075s 
```

为了比较， bzcat 在同一个文件上：

```
$ time bzcat some_bz2file.bz2 > /dev/null

real    0m0.503s
user    0m0.499s
sys     0m0.004s 
```

我的理解是 bz2file 只是关于 bz2 的一个包装器，但添加了对多流 BZ2 文件（我们确实使用）的处理。

bz2file 可能比 bz2 慢得多，还有其他原因吗？（或者我上面的分析有缺陷吗？）如果是这样，有什么方法可以加快 bz2file 的速度吗？

干杯，维克多

编辑 - 我做了一些更多的测试，包括在 Python 3.3 上 - 显然 bz2file 是 Python 3.3 的 bz2 模块的反向移植 - 并且还按照 jordanm 的建议刷新缓存（我在每次运行之间的单独终端中以 root 身份执行此操作）：

```
[vichoo@dev_desktop_vm Desktop]$ time /opt/python3.3/bin/python3.3 testbz2.py > /dev/null

real    0m5.170s
user    0m5.009s
sys     0m0.030s
[vichoo@dev_desktop_vm Desktop]$ time /opt/python3.3/bin/python3.3 testbz2file.py > /dev/null

real    0m5.245s
user    0m4.979s
sys     0m0.060s
[vichoo@dev_desktop_vm Desktop]$ time /opt/python2.7/bin/python2.7 testbz2.py > /dev/null

real    0m0.500s
user    0m0.410s
sys     0m0.030s
[vichoo@dev_desktop_vm Desktop]$ time /opt/python2.7/bin/python2.7 testbz2file.py > /dev/null

real    0m5.801s
user    0m5.529s
sys     0m0.050s 
```

这里似乎确实有一些有趣的东西，不确定这是我的方法，还是 Python 2.x 的 bz2 和 Python 3.x 的 bz2 之间存在实际的性能回归。

# java - 使用字符串的 IF 语句

> ID：12575932
> 
> 赞同：2
> 
> 时间：2012-09-25T03:47:11.377
> 
> 标签：java, string, if-statement

大家好，我的任务快要结束了，我往往总是陷入`if/else`Java 中的问题。我的小片段在这里：

```
// a taxi fare program where if pickup or drop off point is the airport
// and\or CBD the surcharge changes accordingly.

if(!pickup.equals("CBD") && !dropOff.equals("CBD")) {
    Surcharge = 15.0;
} else if (!pickup.equals("airport") && !dropOff.equals("CBD")) {
    Surcharge = 15.0;
} else if (!pickup.equals("airport") || !dropOff.equals("airport")) { 
    Surcharge = 10.0;
} else if (!pickup.equals("CBD") || !dropOff.equals("CBD")) {  
    Surcharge = 5.0;
} else {
    Surcharge = 0.0;
} 
```

没有错误，但似乎没有正确测试。例如，如果我输入`"airport"`为取件，然后是 的随机位置`dropOff`，它仍然会打印出 15 美元的附加费，而应该是 10 美元。但如果我把`"CBD"`as`pickup`和 airport as 下车，它会正确打印 15 美元。抱歉，如果这还不够明显，但这里是第一个计时器。我花了周末在一个类似的问题上，这非常明显。`if`即使它显然应该是，它似乎也失败了`true`。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-25T03:53:51.380

你把机场作为接送，这意味着第一条件

`if(!pickup.equals("CBD") && (!dropOff.equals("CBD"))){ Surcharge = 15.0; }`

已验证。因为接送不是中央商务区而是机场。

希望能帮助到你。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-25T03:54:08.120

用简单的英语，你的第一个 if 语句说：

> 如果此人没有从 CBD 被接走，也没有被送到 CBD，则向他们收取 15 美元的费用。

因此，如果接送地点都不是 CBD（即使其中之一是机场），那么结果将是 15 美元。

通过使用正面测试（例如“如果下车或取货地点**是**CBD”）而不是负面测试（例如“如果下车或取货地点**不是**CBD”）可能更容易解决问题。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-25T03:57:27.293

这是你的规则用英语说的：

1.  任何完全在中央商务区以外的旅行 -> 15 美元
2.  否则，任何不离开机场且未到达中央商务区的旅行 -> 15 美元
3.  否则，任何起点或终点都不是机场的旅行 -> 10 美元
4.  否则，任何起点或终点都不是 CBD -> 5 美元的旅行
5.  否则-> $ 0。

您需要确定这是否是您想要的，或者您需要向*我们*提供英文规则，以便我们检查您的逻辑。

首先，您从机场到随机地点（CBD 除外）的具体行程*将*产生 15 美元 - 请参阅上面的规则 1。

# asp.net - 验证 ASP.Net 文件上传到服务器控件

> ID：12575945
> 
> 赞同：0
> 
> 时间：2012-09-25T03:48:54.210
> 
> 标签：asp.net, vb.net, validation, web, download

我与 Visual Studio 上的同事合作，使用文件上传控件允许用户将文件上传到服务器，但是我似乎无法在允许上传之前找到验证文件的方法。

例如，如果他们试图上传与他们的问题无关的文件，我想阻止他们。

我自己只是从 asp.net 方面开始，所以任何朝着正确方向的推动都会受到赞赏。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-25T04:03:31.653

默认的 asp.net 文件上传控件不提供此检查。

您可以使用 RegularExpressionValidator 来验证扩展。

```
<asp:RegularExpressionValidator ControlToValidate="FileUpload1" 
     ValidationExpression="^.*\.(png|PNG)$" runat="server" /> 
```

html`accept`属性可以派上用场，但由于本机不支持，您必须自己添加它。

```
<!-- Match all image files (image/*) and files with the extension ".someext" -->
<input type="file" accept=".someext,image/*"> 
```

# php - 一个int字段的curdate间隔？

> ID：12575948
> 
> 赞同：0
> 
> 时间：2012-09-25T03:49:32.350
> 
> 标签：php, mysql

我想选择过去 3 年的记录...

当表列类型“released_year”是日期时，以下用法可以工作

```
$query = 'SELECT
             album.album_id,
             album.title,
             album.released_year,
      FROM album
      WHERE  album.released_year >= ( CURDATE() - INTERVAL 3 YEAR )
      ORDER BY album.released_year DESC, album.title'; 
```

但是表列类型发生了变化，现在它是一种 smallint 类型，只处理一年的 4 位数字。

我现在如何选择过去 3 年的记录？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-25T03:52:20.213

... 专辑.released_year >= year(CURDATE()) -3 ...

丑陋，因为你没有使用真实的约会，但它会工作一段时间

# java - 清除 Java 中不需要的输入

> ID：12575952
> 
> 赞同：0
> 
> 时间：2012-09-25T03:50:49.933
> 
> 标签：java, input, newline

我正在使用“ConsoleSupport”类来处理用户输入的接收和验证。我注意到的一个问题是，如果我首先在控制台 UI 中询问整数（菜单选项），然后询问几个字符串，第一个字符串将为空。可怕的换行符再次来袭！在返回值以使其工作之前，我在 getType 方法中使用了以下内容：

```
if(in.hasNextLine())
    in.nextLine(); 
```

有没有人有替代的、更“优雅”的解决方案来处理不想要的输入？

（缩写）类在下面供参考

```
import java.util.Scanner;

/**
 * This class will reliably and safely retrieve input from the user
 * without crashing. It can collect an integer, String and a couple of other
 * types which I have left out for brevity
 * 
 * @author thelionroars1337
 * @version 0.3 Tuesday 25 September 2012
 */
public class ConsoleSupport
{

    private static Scanner in = new Scanner(System.in);

    /** 
     * Prompts user for an integer, until it receives a valid entry
     * 
     * @param prompt The String used to prompt the user for an int input
     * @return The integer
     */
    public static int getInteger(String prompt)
    {
        String input = null;
        int integer = 0;
        boolean validInput = false;

        while(!validInput)
        {
            System.out.println(prompt);
            input = in.next();
            if(input.matches("(-?)(\\d+)"))
            {
                integer = Integer.parseInt(input);
                validInput = true;
            }
            else
            {
                validInput = false;
                System.out.println("Sorry, this input is incorrect! Please try again.");
            }
        }

        if(in.hasNextLine())
            in.nextLine(); // flush the Scanner

        return integer;
    } 

    /**
     * Prompts the user to enter a string, and returns the input
     * 
     * @param prompt The prompt to display
     * @return The inputted string
     */
    public static String getString(String prompt)
    { 
        System.out.println(prompt);
        return in.nextLine();
    }
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-25T04:25:42.183

`System.in`在用户点击回车之前，无法读取来自的输入。正因为如此，扫描仪缓冲区中的整数之后有一个额外的换行符。因此，当您调用`Scanner.nextInt()`时读取整数，但下次调用时`Scanner.nextLine()`，您将读取缓冲区中的换行符，它将返回一个空白字符串。

处理它的一种方法是总是像上面那样调用`nextLine()`和使用。`Integer.parseInt()`您可能会跳过正则表达式匹配，而只是抓住`NumberFormatException`：

```
 while(!validInput)
    {
        System.out.println(prompt);
        input = in.nextLine();
        try {
            integer = Integer.parseInt(input.trim());
            validInput = true;
        }
        catch(NumberFormatException nfe) {
            validInput = false;
            System.out.println("Sorry, this input is incorrect! Please try again.");
        }
    } 
```

而且您无需检查末尾是否有多余的线并冲洗扫描仪。

# android - 试图将 WebApp 的一部分转换为 Android 原生

> ID：12575953
> 
> 赞同：3
> 
> 时间：2012-09-25T03:50:54.600
> 
> 标签：android, web-applications

我有一个 webapp，它的前端是 Javascript 和 HTML，后端是 Asp.net。谁能告诉我如何将原生 Android 嵌入到 WebApp 的一部分中？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-25T03:56:38.707

您可以通过在 WebView 上调用 loadUrl() 来调用 javascript。例如：`webview.loadUrl("javascript: doSomethingInJavascript();");`

您可以设置一个 Javascript 接口，让您从 javascript 调用本机 Java 方法。有关更多信息，请参阅此 Android 文档：http: [//developer.android.com/guide/webapps/webview.html#BindingJavaScript](http://developer.android.com/guide/webapps/webview.html#BindingJavaScript)

此外，如果您想将原生 Android 视图嵌入网页中。WebView 是一个 AbsoluteLayout，您可以使用 addView 向其中添加视图。

# r - ff 对象占用了全部内存？

> ID：12575959
> 
> 赞同：0
> 
> 时间：2012-09-25T03:52:05.523
> 
> 标签：r, memory-management

**1）**我打开 RGui，然后输入`require(ff)`，然后在 RConsole 中不再输入任何内容，我检查`Windows Task Manager --> Processes --> RGui.exe`并看到`~30,000K`.

**2)**我回到 RConsole。我打字`Data <- read.csv.ffdf(file="filename.csv",row.names=1)`。此 .csv 文件约为 30MB。

**3）**计算机加载数据，我在`Rgui.exe`加载时关注内存分配。内存急剧增加`131,436K`并悬停在那里，直到 .csv 文件完成导入 R。

***之后***（不是之前！）所有这一切，我会去

```
 > object.size(Data)
  34510880 bytes 
```

这证实了它在我的记忆中。

这个问题也在[这里](https://stackoverflow.com/questions/8900898/why-does-ff-still-store-data-in-ram)找到，但唯一答案中的声明是调用`object.size`将其放入内存中。但是，在`object.size`我见证我的记忆被这个物体填满之后，我会这样做。此外，在调用 object.size 时存在零延迟，因此我的计算机不可能以 0 延迟瞬间将 30MB 放入我的内存中。将 30MB .csv 加载到内存中大约需要 60 秒！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-25T07:22:01.167

一个 30 Mb 的 csv 文件在不使用 ffdf 的情况下读入 R 应该没有问题。您可能有很多列，这与 ffdf 不兼容。以下示例运行良好，并且不使用您所说的内存量：

```
spam = as.data.frame(matrix(runif(10e7), 1000, 2500)) # 76 mb
write.table(spam, file = "spam.csv", sep = ",")
spam2 = read.table("spam.csv", sep = ",") 
```

`ffdf`设计用于处理列数有限的非常大的 csv 文件 (>> 30 mb)。在这种情况下，我认为没有任何理由使用`ffdf`. 如果您想更快地加载，只需使用`save`which 以二进制格式保存对象，然后使用`load`.

# collision-detection - 如何处理同时发生的碰撞，以便处理顺序无关紧要？

> ID：12575963
> 
> 赞同：6
> 
> 时间：2012-09-25T03:52:55.173
> 
> 标签：collision-detection

假设有 3 个球同时碰撞。我发现解决冲突的顺序会对最终结果产生影响，这当然没有意义。

为了解释和保持简单，考虑 3 个 1D 球，质量相同，弹性碰撞。顶部的数字是速度，箭头是方向。假设他们目前都在互相接触，即在碰撞中

```
 -->2   -->1 <---3
   O     O       O
   A     B       C 
```

这表明球 A 从后面击球 B，球 B 和 C 正面相撞。

现在，如果我们先解决 A 与 B 的碰撞，然后再解决 B 与 C 的碰撞，但使用 B 的新速度，如果我们改为解决 B 与 C 的碰撞，然后再解决 A 与 B 的碰撞，这应该会给出相同的结果（使用 B) 的新速度。

但事实并非如此。

# 第一种情况：A 和 B，然后是 B 和 C

A 和 B 给出

```
 -->1   -->2
   O     O  
   A     B 
```

和 B 与 C 给出（但使用上面的 2 的新 B 速度，而不是 1 的原始速度）

```
 <--3   -->2
   O     O  
   B     C 
```

因此最终结果是

```
 -->1   <--3  ---->2
   O     O       O
   A     B       C 
```

# 第二种情况：B 和 C，然后是 A 和 B

B 和 C 给出

```
 <--3   --->1
   O     O  
   B     C 
```

A 与 B （但使用上面 3 的 B 的新速度，而不是原来的 1）

```
<--3    -->2
   O     O  
   A     B 
```

因此最终结果是

```
 <--3  -->2   ---->1
   O     O       O
   A     B       C 
```

你可以看到最终的状态是不同的。

我究竟做错了什么？更重要的是，处理这个问题的正确方法是什么？

对于有许多球的模拟以及与墙壁的碰撞，这种情况是非常可能的。（例如，一个球撞到墙上，同时被另一个球击中，会产生与上述相同的问题，顺序会产生不同的结果）。

目前，我使用循环遍历所有对象并一次解决每两个对象之间的冲突。因此我使用的顺序是任意的（顺序只是数组中球的索引）。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-05T13:00:07.533

您没有做错任何事情，但您的碰撞响应尚未完成。在第一个中，AB 仍在碰撞，在第二个中，B 和 C 仍在碰撞。所以你应该解决这些冲突。

如果你碰撞你会得到相同的答案`A <--3 , B-->1, C-->2`

尽管在您的模拟中，您的对象可以同时发生碰撞，但实际上它们永远不会发生碰撞。碰撞之间总会有一点时间（可能非常少）。因此，为简单起见，物理引擎成对解决碰撞问题。但他们应该这样做，直到所有对都分开。这需要不止一次的迭代。如果您尝试模拟堆叠体（如配置），迭代次数可能会变得非常高。

你可以检查

[如何对 Guendelman 冲击传播的对象进行分类？](https://stackoverflow.com/questions/10858871/how-to-sort-objects-for-guendelman-shock-propagation)

了解更多信息以减少迭代。

# node.js - 是否可以使用 node.js 开发 Google Chrome 扩展程序？

> ID：12575965
> 
> 赞同：60
> 
> 时间：2012-09-25T03:53:05.760
> 
> 标签：node.js, google-chrome-extension

我想开始使用 node.js 开发 Google Chrome 扩展（因为我已经在 node.js 中编写了一个“文本到歌曲”脚本，我想把它变成一个 Chrome 扩展。）将是解决这个问题的最直接的方法吗？

* * *

## 回答 #1

> 赞同：72
> 
> 时间：2013-01-05T17:59:34.157

实际上是的。看看这个[开发者直播](http://www.youtube.com/watch?v=gkb_x9ZN0Vo)。这也是我一直在寻找的东西，这将对您有所帮助。

这会将您的节点应用程序捆绑到您的浏览器中。这是[回购](https://github.com/substack/node-browserify)！

**编辑：**

我注意到我的这个旧答案时不时地得到支持（谢谢大家）。

但现在我更提倡使用网络应用程序，而不是将你的应用程序捆绑到许多平台上，如 chrome 商店或其他任何平台。[您可以在此处](https://blog.chromium.org/2016/08/from-chrome-apps-to-web.html)和[此处](https://web.dev/progressive-web-apps/)查看谷歌的帖子，指出一些方向。

在实践中，我建议您开始使用 Service Worker 和渐进式东西构建具有离线功能的渐进式 Web 应用程序 (PWA)。

如今，网络上有大量资源，如果您以正确的方式进行操作，您可以提供更丰富的应用程序，从而获得更广泛的受众。

再次感谢，以及良好的编码。

* * *

## 回答 #2

> 赞同：9
> 
> 时间：2012-09-25T05:13:21.200

简单的答案是否定的，除非您能找到一种方法来[使用 NPAPI 安装带有扩展名的](https://stackoverflow.com/questions/3695476/how-do-i-perform-a-shell-execute-in-a-chrome-extension?lq=1)node.js。

Nodejs 和 Google Chrome 扩展确实有一些共同点，即它们都了解 javascript 并且都使用 v8 javascript 引擎。

**谷歌浏览器扩展**

“Google Chrome 扩展是可以修改和增强 Chrome 浏览器功能的小型软件程序”。

要开发 Google Chrome 扩展程序，您应该编写一些 javascript 和/或 html/css。然后，您可以在浏览器中运行该扩展程序。

如果您希望其他人下载您的扩展程序，则必须提供 config.json 文件来描述您的扩展程序集权限等。

**节点**

“Node.js 是一个基于 Google Chrome 的 JavaScript 运行时构建的平台，用于轻松构建快速、可扩展的网络应用程序”。

要在 nodejs 中开发应用程序，您需要为 Web 应用程序编写一些 javascript 和/或 html/css。

如果希望其他人使用您的应用程序，您可以启动 nodejs 服务器并监听传入的请求。

**概括**

尽管 Google Chrome 扩展程序和 Nodejs 有一些相似之处，但它们彼此之间没有任何关系。在正常的客户端/服务器通信之外，您不能以某种特殊方式一起使用它们。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2021-10-03T14:48:00.687

您可以使用[WebPack](https://webpack.js.org/) ( [GitHub](https://github.com/webpack/webpack) ) 或[Browserify](https://github.com/browserify/browserify) (参见[手册](https://github.com/browserify/browserify-handbook)) 来构建基于 node.js 代码的网络浏览器扩展。

使用 Browserify，要转换您的代码，您可以简单地运行：

```
browserify node-code.js -o node-code-out.js 
```

阅读更多：

*   [Browserify 与 Webpack](https://medium.com/@housecor/browserify-vs-webpack-b3d7ca08a0a9)。
*   [使用 Preact 和 Webpack 构建 Chrome 扩展](https://betterprogramming.pub/build-a-chrome-extension-with-preact-and-webpack-c90edafe05f2)（请参阅：[Preact Chrome 扩展启动器](https://github.com/andrewctate/preact-chrome-extension-starter)）。

# facebook - 在代表用户或我的应用程序在用户朋友的墙上发帖时，我有哪些选择？

> ID：12575975
> 
> 赞同：0
> 
> 时间：2012-09-25T03:54:13.473
> 
> 标签：facebook

我有一个用户注册的应用程序，该应用程序需要通知该用户的朋友即将发生的事件。

我试图弄清楚我的选择是如何使这项工作。在理想情况下，我的应用程序将能够在未来某个预定时间通过自定义消息（由用户编写）发布到朋友的墙上。但是，我在 API 中没有看到任何代表用户发布到他们朋友的墙上的任何内容，因此，我愿意接受建议。

TIA

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-25T05:19:48.530

假设用户授予您相关的 (publish_stream) 权限，您可以使用 Graph API 发布到用户的朋友的提要。

```
POST /[friend]/feed

message=hello... 
```

用户通常认为应用程序的这种非常垃圾的行为，因此不特别推荐。

来源：[https ://developers.facebook.com/docs/reference/api/post/](https://developers.facebook.com/docs/reference/api/post/)

# android - 传递_id的参数并更新SQLitedatabase

> ID：12575977
> 
> 赞同：1
> 
> 时间：2012-09-25T03:54:33.373
> 
> 标签：android, sqlite, android-listview

我正在尝试使用行 ID 作为我的 where 语句来更新 SQLite 表。我从列表视图中显示的行中获取行 _id 并使用以下语句传递给另一个活动：

```
Cursor cursor = (Cursor) nurseTableAdapter.getItem((int)id);
            showAssignments.putExtra("Nurse", cursor.getInt(cursor.getColumnIndex("_id"))); 
```

接收活动接收参数：

```
nurse = extras.getString("Nurse"); 
```

并将其作为参数传递给我的 DbCommunicator 类：

```
updateAssignments.updateNurseAssignments(listItemsArray, nurse); 
```

我的 DbCommunicator 类用它来做到这一点：

```
public void updateNurseAssignments(String[] choices, String nurseId) {
    // set parameter variables
    //int nurseIdToInt = Integer.parseInt(nurseId);
    //String strFilter = "_id=" + nurseIdToInt;
    //String where = "_id=?";
    String[] whereArgs = {String.valueOf(nurseId)};
    Log.i(TAG, "value of whereArgs is " + whereArgs[0]);

    // set content values
    ContentValues cvUpdate = new ContentValues();
    cvUpdate.put(KEY_FIRST_ASSIGNMENT, choices[0]);
    cvUpdate.put(KEY_SECOND_ASSIGNMENT, choices[1]);
    cvUpdate.put(KEY_THIRD_ASSIGNMENT, choices[2]);
    cvUpdate.put(KEY_FOURTH_ASSIGNMENT, choices[3]);
    cvUpdate.put(KEY_FIFTH_ASSIGNMENT, choices[4]);
    cvUpdate.put(KEY_SIXTH_ASSIGNMENT,  choices[5]);

    // update database
    sqldb.update(NURSE_TABLE, cvUpdate, KEY_NURSE_ROWID + "= ?", whereArgs); 
} 
```

我没有收到任何错误，但表格没有更新。我只在 Stack Overflow 中找到了一个类似的示例，并尝试在此处合并其中的一些示例，但仍然存在问题。建议表示赞赏。

# jquery - 添加一个标记并找到它的覆盖名称

> ID：12575978
> 
> 赞同：1
> 
> 时间：2012-09-25T03:54:53.963
> 
> 标签：jquery, google-maps-api-3, kml, jquery-ui-map

我正在使用[jquery-ui 地图](http://code.google.com/p/jquery-ui-map/)插件来操作一些地图

我正在使用 kml 文件中的叠加层，然后我添加了一个标记，我的目标是查看添加标记的叠加层区域有什么想法吗？我的代码可以在这里找到

[http://jsfiddle.net/theodore/twGHC/268/](http://jsfiddle.net/theodore/twGHC/268/)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-26T04:49:35.047

[概念证明](http://www.geocodezip.com/geoxml3_test/v3_geoxml3_pointInPoly_linkto.html)

用途：

*   geoxml3 解析（您的）KML 并将其作为本机 Google Maps API v3 对象添加到地图中
*   放置标记的地理编码器（为方便起见），您没有指定您的方法
*   Google Maps API v3 几何库以确定哪个多边形包含标记

基于[此 Google Maps API v2 示例](http://www.geocodezip.com/collection-map2e.html)，该示例已[移植到 Google Maps API v3](http://www.geocodezip.com/geoxml3_test/v3_collection-map2e.html)。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-25T05:18:46.770

很难找到，但在这里。您应该使用 containsLocation ， poly* 命名空间的方法。（[聚](https://developers.google.com/maps/documentation/javascript/reference#poly)）。

引用#Neograph734

```
var polyOptions = {
 ...
}

draw = new google.maps.Polygon(polyOptions);
draw.setMap(map);

if(google.maps.geometry.poly.containsLocation(point, draw) == true) {
 alert("yes");
} 
```

查看[如何使用-containslocation-in-google-maps-geometry-library](https://stackoverflow.com/questions/10836559/how-to-use-containslocation-in-google-maps-geometry-library)

请注意，多边形有事件。因此，如果在您的实际应用程序中，标记是由用户添加的，请使用多边形（[Polygon](https://developers.google.com/maps/documentation/javascript/reference#Polygon)）中的单击事件

# android - dom 解析器错误：PI 不能以 xml 开头

> ID：12575979
> 
> 赞同：1
> 
> 时间：2012-09-25T03:55:28.803
> 
> 标签：android, dom, xml-parsing

我试图阅读服务 url，它是 xml 格式的。当我尝试解析这个 xml 时，我收到了这个错误：我搜索了这个，xml 起始标题标记的问题，即 .

我从 logcat 输出的 xml：

```
09-25 09:09:37.134: I/System.out(408): ï»¿<?xml version="1.0" encoding="UTF-8"?>
09-25 09:09:37.144: I/System.out(408): <ad2app>
09-25 09:09:37.144: I/System.out(408):     <mob_interstitial>
09-25 09:09:37.154: I/System.out(408):         <size> 
09-25 09:09:37.154: I/System.out(408):             <dimension>pixel</dimension>
09-25 09:09:37.154: I/System.out(408):             <width>320</width>
09-25 09:09:37.154: I/System.out(408):             <height>416</height>
09-25 09:09:37.154: I/System.out(408):         </size>
09-25 09:09:37.154: I/System.out(408):         <duration>
09-25 09:09:37.154: I/System.out(408):             <dimension>seconds</dimension>
09-25 09:09:37.154: I/System.out(408):             <d_number>5</d_number>
09-25 09:09:37.154: I/System.out(408):         </duration> 
```

综上所述，添加了不必要的符号。像这样：`ï»¿<?xml version="1.0" encoding="UTF-8"?>`

现在，我怎样才能从我的 xml 中删除不必要的符号来解决这个问题。有什么帮助...??

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-25T04:10:44.740

问题已解决：我对 xml 字符串使用了替换方法。IE：`String noHTMLString = xml.replaceAll("ï»¿","");`

# jquery - 跨域 JSON 调用

> ID：12575983
> 
> 赞同：1
> 
> 时间：2012-09-25T03:56:08.913
> 
> 标签：jquery, asp.net, json, asp.net-mvc-3, jsonp

> **可能重复：**
> [Ajax 跨域调用](https://stackoverflow.com/questions/2558977/ajax-cross-domain-call)

我有返回 JSON 响应的 Asp.Net 控制器方法。但是我无法使用 Jquery 从不同的域调用它`$.getJSON(...){}`

快速谷歌搜索建议必须使用 JSONP。问题是 JSON 和 JSONP 有什么区别？这只是另一个新名词吗？如果 JSONP 工作正常，为什么我不能让 JSON 工作？有什么办法不使用这些花哨的 JSONP 并使用普通的旧 JSON，因为我害怕对我的服务器端代码进行任何更改。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-09-25T06:10:36.210

You cannot make cross domain AJAX calls using JSON. You need to use [JSONP](http://en.wikipedia.org/wiki/JSONP). So instead of returning a regular `JsonResult` from your controller action write a custom action result that will wrap the JSON in a callback that is passed as parameter:

```
public class JsonpResult : ActionResult
{
    private readonly object _obj;

    public JsonpResult(object obj)
    {
        _obj = obj;
    }

    public override void ExecuteResult(ControllerContext context)
    {
        var serializer = new JavaScriptSerializer();
        var callbackname = context.HttpContext.Request["callback"];
        var jsonp = string.Format("{0}({1})", callbackname, serializer.Serialize(_obj));
        var response = context.HttpContext.Response;
        response.ContentType = "application/json";
        response.Write(jsonp);
    }
} 
```

and then have your controller action return this custom action result:

```
public ActionResult SomeAction()
{
    var result = new[]
    {
        new { Id = 1, Name = "item 1" },
        new { Id = 2, Name = "item 2" },
        new { Id = 3, Name = "item 3" },
    };
    return new JsonpResult(balances);
} 
```

Now you could consume this action cross domain:

```
var url = "http://example.com/SomeController/SomeAction/";
$.getJSON(url + '?callback=?', function (data) {
    alert(data);
}); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-25T04:41:18.703

```
JSONP = JSON + PADDING 
      = additional JavaScript callback function wrapping the JSON content. 
```

在 JavaScript 中，所有 ajax 请求都遵循这个跨域策略标准。这可以防止 XMLHttpRequest 对象请求不同域上的资源。

由于 JSON 是有效的 JavaScript，我们不能使用它。JSONP 是作为一种通过编写回调函数并动态添加脚本标签到 DOM 来从某个远程域检索数据的方法创建的，脚本标签将在加载时调用回调，然后数据可供应用程序使用。

要向启用 JSONP 的服务器发出请求，我们需要发送一些关于我们站点的信息，以便服务器可以创建我们可以使用的响应。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-25T06:06:28.313

您不能使 jsonp 在所有跨域站点上工作，除了允许您通过使用额外回调（值或名称）告诉您提供有关您的服务器的一些信息的站点。

如果其他站点不允许您提供的回拨，您将一无所获。

# php - PHP preg_replace 计算不起作用

> ID：12575984
> 
> 赞同：0
> 
> 时间：2012-09-25T03:56:19.507
> 
> 标签：php

我正在尝试创建一个钩子，以便在文本中找到以下内容时：

```
level,2 
```

它用 , 替换它`$skill_level * $n`，逗号后面的数字是`$n`

这是我所拥有的：

```
$skill_level = 2;

$row['s_effect'] = "Long string of text that contains level,2."

preg_replace("/level,$n/",$skill_level * $n,$row['s_effect']) 
```

我得到的结果是：

```
Long string of text that contains 02. 
```

我想要一个结果：

```
Long string of text that contains 4. 
```

由于某种原因，计算似乎`"$skill_level * $n" (2 * 2)`不起作用。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-25T04:02:33.643

你需要使用`preg_replace_callback`

```
$skill_level = 2;
$text = "Long string of text that contains level,2.";

$ret = preg_replace_callback("/level,(\d+)/", function ($matches) use ($skill_level) {
  return $matches[1] * $skill_level;
}, $text); 
```

# python - 使用 python 计算对齐中的核苷酸突变

> ID：12575987
> 
> 赞同：1
> 
> 时间：2012-09-25T03:56:58.820
> 
> 标签：python, alignment

我有一个包含多个基因样本比对的 FASTA 文件。我正在尝试开发一个可以计算每个样本的突变数量的程序。最好的方法是什么？将每个基因样本存储在字典中并以某种方式进行比较？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-25T04:16:19.790

如果它们已经采用对齐格式，则已经计算了身份和不匹配。所以你有这样的事情：

ALN1：ACTGGTTGTCCAACCGTAATCGAAG

Aln2: ---GGTTGTCCAATTC---TCGAAG

将每个捕获到一个字符串中，然后简单地枚举它们。像这样简单的工作：

```
mutations=0
for i,j in zip(aln1,aln2):
    if i != j and i != '-' and j != '-':
        mutations+=1 
```

但是，这取决于您的个人标准，如果您想将差距包括为突变等。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-25T04:32:34.650

尝试读取 FASTA 文件并将每个序列存储为字符串。您当然可以使用“<”行中的文本作为键来组织字典中的序列。如果基因与没有突变的参考序列长度相同，[i for i, a in enumerate(gene) if a != reference[i]] 将返回突变位置列表。它的长度将是突变的数量。如果突变涉及丢失或添加 AA，则情况会复杂得多。

# android - 如何为移动应用创建无密码登录

> ID：12575989
> 
> 赞同：8
> 
> 时间：2012-09-25T03:57:19.527
> 
> 标签：android, ios, security, token, password-protection

我有兴趣在移动应用程序和 API 之间构建某种无密码登录（假设我可以同时控制两者）。动机是必须登录对用户来说非常烦人并且存在安全风险（例如，用户将重复使用现有密码），我希望用户能够立即开始使用该应用程序。

我想知道是否有一些可行的技术。例如：

1.  在移动设备上生成和随机登录/密码，并将密码存储在钥匙串中。
2.  使用此登录名/密码组合注册 API。这将返回一个令牌。
3.  令牌用于后续调用

缺点是：

*   如果用户删除应用程序，登录名/密码可能会丢失（这可以通过使用 iCloud 存储登录名来缓解 - 但这对密码不利？）
*   密码存储在设备上（但它在钥匙串中）

所以我的问题是：这样的事情是否可行且足够安全？是否有已知的技术可以做到这一点？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2014-10-31T16:07:14.740

这是我们所做的：

基本上，这个想法与大多数服务提供的“忘记密码”非常相似：

1.  向用户询问电子邮件
2.  发送带有激活链接的电子邮件。该电子邮件包含一个带有一次性令牌的深层链接，例如`myapp://login?token=.....`.
3.  **用户在安装了应用程序的设备上**打开电子邮件，这对于深层链接的工作至关重要，但无论如何在 99% 的情况下都会发生这种情况。用户点击带有深层链接的按钮
4.  用户被重定向回应用程序，您从应用程序的深层链接中提取令牌并将其发送到服务器 api 以进行身份​​验证。身份验证完成后，为用户创建一个会话，这样他们就不需要再次进行身份验证

**好的：**

1.  **更安全：**用户不必考虑新密码（通常[过于简单](http://splashdata.com/press/worstpasswords2013.htm)），也不存在用户重复使用密码的风险。对于作为开发人员的我们来说，它提供了一种解决方案，该解决方案只有一个（而且很简单！）身份验证路径，更易于理解并因此更易于保护。此外，我们不必触摸任何用户密码/散列密码。
2.  **为用户提供更流畅的入职流程：**如果您在输入字段中预先输入电子邮件，则登录流程可以短至单击 2 次按钮并且他们就在其中。（除非您还想获取他们的姓名/其他详细信息，但这需要传统登录中的附加输入字段）

**不太好:)**

1.  用户可能不太习惯这种流程，并且可能想知道为什么他们不需要密码。我会添加一个小链接，解释“为什么我们不需要密码？”
2.  如果应用程序被删除或用户注销，他们将需要使用他们的电子邮件重新登录。对于用户不偶尔注销和登录等的移动应用程序来说，这不是问题

我已经在我们的应用程序中实现了这个流程，你可以在这里阅读更深入的解释： [http ://www.drzon.net/passwordless-login-in-mobile-apps/](http://www.drzon.net/passwordless-login-in-mobile-apps/)

**还有一些注意事项：**

*   为了使其更安全，请使令牌仅可使用一次，并为其设置过期时间（例如一小时）。您还可以通过向服务器发送某种类型的唯一设备 ID 以及电子邮件地址，将令牌绑定到特定设备。这样用户就不能简单地将电子邮件转发给另一个人，而是将其打开
*   关于深层链接 - 我发现一些电子邮件提供商阻止使用带有自定义 url 方案的链接，例如`app://`. 克服这个问题的方法是将链接指向您的服务器，然后将其重定向到实际的深层链接 `https://myserver.com/login?token=...`--->`myapp://login?token=...`

[Mozilla在这里](https://hacks.mozilla.org/2014/10/passwordless-authentication-secure-simple-and-fast-to-deploy/)也写过

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-25T04:07:00.103

这是非常开放的，但通常：不要重新发明轮子，使用标准解决方案，例如 OAuth 和/或 OpenID Connect（使用 OAuth）。这样做的缺点是用户可能需要通过 WebView 或类似方式登录才能获取令牌，但您不必存储密码。

需要考虑的事项：

*   您不能真正生成随机密码，因为服务器也需要知道它
*   Android 没有类似公共钥匙串的 API，因此您必须自己保护密码。

至于“足够安全”，现在几乎每个人都使用 OAuth（Twitter、Facebook 等），所以它至少得到了证明。实际的安全性将取决于您的特定实现。

# java - java中的日历日期为yyyy-MM-dd格式

> ID：12575990
> 
> 赞同：227
> 
> 时间：2012-09-25T03:57:24.923
> 
> 标签：java, date, calendar, converter

如何将日历日期转换为`yyyy-MM-dd`格式。

```
Calendar cal = Calendar.getInstance();
cal.add(Calendar.DATE, 1);
Date date = cal.getTime();             
SimpleDateFormat format1 = new SimpleDateFormat("yyyy-MM-dd");
String date1 = format1.format(date);            
Date inActiveDate = null;
try {
    inActiveDate = format1.parse(date1);
} catch (ParseException e1) {
    // TODO Auto-generated catch block
    e1.printStackTrace();
} 
```

这将产生`inActiveDate = Wed Sep 26 00:00:00 IST 2012`. 但我需要的是`2012-09-26`. 我的目的是使用 Hibernate 标准将此日期与我的数据库中的另一个日期进行比较。所以我需要`yyyy-MM-dd`格式的日期对象。

* * *

## 回答 #1

> 赞同：364
> 
> 时间：2012-09-25T04:27:57.800

Java`Date`是自 1970 年 1 月 1 日 00:00:00 GMT 以来的毫秒数的容器。

当您使用类似的东西时`System.out.println(date)`，Java 使用`Date.toString()`来打印内容。

更改它的唯一方法是覆盖`Date`并提供您自己的`Date.toString()`. 现在在你启动你的 IDE 并尝试这个之前，我不会；它只会使事情复杂化。您最好将日期格式化为您想要使用（或显示）的格式。

# Java 8+

```
LocalDateTime ldt = LocalDateTime.now().plusDays(1);
DateTimeFormatter formmat1 = DateTimeFormatter.ofPattern("yyyy-MM-dd", Locale.ENGLISH);
System.out.println(ldt);
// Output "2018-05-12T17:21:53.658"

String formatter = formmat1.format(ldt);
System.out.println(formatter);
// 2018-05-12 
```

# 在 Java 8 之前

您应该使用[ThreeTen Backport](http://www.threeten.org/threetenbp/)

以下是出于历史目的而保留的（作为原始答案）

您可以做的是格式化日期。

```
Calendar cal = Calendar.getInstance();
cal.add(Calendar.DATE, 1);
SimpleDateFormat format1 = new SimpleDateFormat("yyyy-MM-dd");
System.out.println(cal.getTime());
// Output "Wed Sep 26 14:23:28 EST 2012"

String formatted = format1.format(cal.getTime());
System.out.println(formatted);
// Output "2012-09-26"

System.out.println(format1.parse(formatted));
// Output "Wed Sep 26 00:00:00 EST 2012" 
```

这些实际上是相同的日期，表示方式不同。

* * *

## 回答 #2

> 赞同：21
> 
> 时间：2012-09-25T04:05:05.043

你的代码是错误的。没有必要解析日期并将其保留为 Date 对象。

您可以在要显示时格式化日历日期对象并将其保留为字符串。

```
Calendar cal = Calendar.getInstance();
cal.add(Calendar.DATE, 1);
Date date = cal.getTime();             
SimpleDateFormat format1 = new SimpleDateFormat("yyyy-MM-dd");          
String inActiveDate = null;
try {
    inActiveDate = format1.format(date);
    System.out.println(inActiveDate );
} catch (ParseException e1) {
    // TODO Auto-generated catch block
    e1.printStackTrace();
} 
```

* * *

## 回答 #3

> 赞同：13
> 
> 时间：2014-02-25T08:59:05.717

# java.time

[MadProgrammer](https://stackoverflow.com/a/12576219/642706)的答案是正确的，尤其是关于[Joda-Time](http://www.joda.org/joda-time/)的提示。Joda-Time 的继任者现在作为新的[java.time 包内置到](http://download.java.net/jdk8/docs/api/index.html?java/time/package-summary.html)[Java 8](https://en.wikipedia.org/wiki/Java_version_history#Java_SE_8)中。这是 Java 8 中的示例代码。

使用日期时间（而不是本地日期）时，[**时区**](https://en.wikipedia.org/wiki/Time_zone)至关重要。日期取决于时区。例如，[印度时区](https://en.wikipedia.org/wiki/Time_in_India)（`+05:30`比 UTC 提前五个半小时），而[法国](https://en.wikipedia.org/wiki/Time_in_France)仅提前一个小时。因此，在印度新一天的某个时刻有一个日期，而在法国的同一时刻有一个“昨天”的日期。创建缺少任何时区或偏移信息的字符串输出会造成歧义。你要求 YYYY-MM-DD 输出，所以我提供了，但我不推荐它。而不是[`ISO_LOCAL_DATE`](http://docs.oracle.com/javase/8/docs/api/java/time/format/DateTimeFormatter.html#ISO_LOCAL_DATE)我本来可以[`ISO_DATE`](http://docs.oracle.com/javase/8/docs/api/java/time/format/DateTimeFormatter.html#ISO_DATE)得到这个输出：`2014-02-25+05:30`

```
ZoneId zoneId = ZoneId.of( "Asia/Kolkata" );
ZonedDateTime zonedDateTime = ZonedDateTime.now( zoneId );

DateTimeFormatter formatterOutput = DateTimeFormatter.ISO_LOCAL_DATE; // Caution: The "LOCAL" part means we are losing time zone information, creating ambiguity.
String output = formatterOutput.format( zonedDateTime ); 
```

转储到控制台...</p>

```
System.out.println( "zonedDateTime: " + zonedDateTime );
System.out.println( "output: " + output ); 
```

运行时……</p>

```
zonedDateTime: 2014-02-25T14:22:20.919+05:30[Asia/Kolkata]
output: 2014-02-25 
```

# 乔达时间

[使用 Java.time 的前身Joda-Time](http://www.joda.org/joda-time/)库的类似代码。

```
DateTimeZone zone = new DateTimeZone( "Asia/Kolkata" );
DateTime dateTime = DateTime.now( zone );
DateTimeFormatter formatter = ISODateTimeFormat.date();
String output = formatter.print( dateTime ); 
```

# ISO 8601

顺便说一句，输入字符串的格式是标准格式，是[ISO 8601](https://en.wikipedia.org/wiki/ISO_8601)定义的几种方便的日期时间字符串格式之一。

在解析和生成各种日期时间值的字符串表示时，Joda-Time 和 java.time 默认使用 ISO 8601 格式。

* * *

## 回答 #4

> 赞同：6
> 
> 时间：2012-09-25T04:02:21.920

`java.util.Date`对象不能以*自定义格式表示**日期*，而是您必须使用返回的方法。*`SimpleDateFormat.format``string`*

 *```
String myString=format1.format(date); 
```

* * *

## 回答 #5

> 赞同：3
> 
> 时间：2017-09-26T09:06:51.123

```
public static void main(String[] args) {
    Calendar cal = Calendar.getInstance();
    cal.set(year, month, date);
    SimpleDateFormat format1 = new SimpleDateFormat("yyyy MM dd");
    String formatted = format1.format(cal.getTime());
    System.out.println(formatted);
} 
```

* * *

## 回答 #6

> 赞同：2
> 
> 时间：2012-09-25T04:02:51.117

为了解析一个`java.util.Date`对象，您必须首先使用您自己的格式将其转换为字符串。

```
inActiveDate = format1.parse(  format1.format(date)  ); 
```

但我相信你在这里是多余的。

* * *

## 回答 #7

> 赞同：2
> 
> 时间：2015-05-16T11:37:45.883

```
Calendar cal = Calendar.getInstance();
cal.add(Calendar.DATE, 7);
Date date = c.getTime();
SimpleDateFormat ft = new SimpleDateFormat("MM-dd-YYYY");
JOptionPane.showMessageDialog(null, ft.format(date)); 
```

这将在 JOption 窗口窗格中以月、日和年格式显示您的日期 + 7 天。

* * *

## 回答 #8

> 赞同：2
> 
> 时间：2018-07-05T11:16:14.020

```
public static String ThisWeekStartDate(WebDriver driver) {
        Calendar c = Calendar.getInstance();
        //ensure the method works within current month
        c.set(Calendar.DAY_OF_WEEK, Calendar.SUNDAY);
        System.out.println("Before Start Date " + c.getTime());
        Date date = c.getTime();

          SimpleDateFormat dfDate = new SimpleDateFormat("dd MMM yyyy hh.mm a");

          String CurrentDate = dfDate.format(date);
          System.out.println("Start Date " + CurrentDate);
          return CurrentDate;

    }
    public static String ThisWeekEndDate(WebDriver driver) {

        Calendar c = Calendar.getInstance();
        //ensure the method works within current month
        c.set(Calendar.DAY_OF_WEEK, Calendar.SATURDAY);
        System.out.println("Before End Date " + c.getTime());
        Date date = c.getTime();

          SimpleDateFormat dfDate = new SimpleDateFormat("dd MMM yyyy hh.mm a");

          String CurrentDate = dfDate.format(date);
          System.out.println("End Date " + CurrentDate);
          return CurrentDate;
    } 
```

* * *

## 回答 #9

> 赞同：0
> 
> 时间：2015-08-19T17:26:05.093

我发现此代码以格式比较日期以与数据库中的日期字段进行比较...这可能对您有帮助...

当您使用 simpledateformat 将字符串转换为日期时，很难与 mysql 数据库中的 Date 字段进行比较。

因此，使用 select STR_to_DATE('yourdate','%m/%d/%Y') --> 以这种格式转换 java 字符串日期，然后您将获得 mysql 日期字段的确切日期格式。

[http://javainfinite.com/java/java-convert-string-to-date-and-compare/](http://javainfinite.com/java/java-convert-string-to-date-and-compare/)*

# postgresql - 何时使用 Postgresql 数组数据类型

> ID：12575992
> 
> 赞同：3
> 
> 时间：2012-09-25T03:57:53.517
> 
> 标签：postgresql

我看到 PostgreSQL 有一个数组数据类型。它是干什么用的？什么时候使用它最好？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-25T06:24:20.020

将列定义为数组通常意味着您有一个非规范化模型，因为该数组的内容也可以存储为 1:n 关系。

但有时这样做是有意义的，特别是如果您总是将“列表”视为“一件事”。但是很难给出具体的例子。如果你想不出任何东西，你可能不需要它。

# jquery - 带有淡入淡出的幻灯片在刷新时显示所有文本，而不是一次显示一个

> ID：12575994
> 
> 赞同：0
> 
> 时间：2012-09-25T03:58:03.723
> 
> 标签：jquery, slideshow, visibility, google-widget

我目前正试图弄清楚如何在最长的时间内解决这个问题，我什至不确定到底是什么问题:(。我使用 jquery 找到了这个“自动滚动幻灯片”教程并对其进行了调整以适合我的网站. 但是每当我刷新页面时, 右上角的幻灯片会立即显示我所有的报价几秒钟, 然后折叠到一次只显示一个报价. 我想知道是否有人知道解决这个问题的方法?

我在该页面上也嵌入了一个谷歌股票代码小部件，当我在 Chrome、FF 和 Safari 中嵌入代码时似乎出现了问题，但在 IE 8 中，问题是可见的。如果有人能帮我解决这个问题，我将不胜感激，因为我在盯着这个几乎一整天后都被难住了！:(

这是我目前正在处理的链接：

非常感谢您！任何帮助表示赞赏！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-25T04:03:08.543

你为什么不`style="dispaly:none"` 设置

```
<div id="quoteshow"  style="display:none" > 
```

然后再试一次

# joomla - Joomla Lof ArticleSlideShow 配置文章

> ID：12575995
> 
> 赞同：0
> 
> 时间：2012-09-25T03:58:10.900
> 
> 标签：joomla, module, slideshow, configure

我不知道如何使用这个模块（Lof 文章幻灯片），它说你必须使用类别（好的，我明白了）或文章 ID。

但是，文章在选项中没有任何空间，您可以分配一个类、一个 ID 或任何类似于菜单（可以应用类）甚至更好的模块（也可以应用 id）。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-26T10:47:09.807

最后，我弄清楚了Articile ID指的是什么。它指的是从核心 Joomla 给出的每篇文章的 ID，您可以在文章管理器的最右侧看到。

# java - 通过它们实现的接口对数组元素进行不同的处理

> ID：12575998
> 
> 赞同：0
> 
> 时间：2012-09-25T03:58:25.127
> 
> 标签：java

假设有一个 ArrayList 包含许多不同类型的“元素”元素。所有这些都将无限循环地绘制到屏幕上。

这些“元素”可以实现 0..n 个接口，如“可移动”、“可选”等。

到目前为止，我尝试的是遍历所有元素并检查以下接口：

```
ArrayList<Element> allElements;
...

for (Element element : allElements) {
  if (element instanceof Movable) {
    ((Movable)element).move();
  }
  if (element instanceof Selectable) {
    ...
  }

  element.draw();
} 
```

不过，我对这种方法并不满意，因为它违反了开放/封闭原则（可能还有数千条其他原则）。当然，我可以重新设计它，以便每个元素根据它实现的接口做出响应：

```
for (Element element : allElements) {
  element.move(); // element checks itself if it can move, and if true moves
  ...
} 
```

缺点是 Element 类必须为每个可能的行为提供签名，即它必须提供每个接口的方法，并且可能在子类中覆盖它们。这也不是我想要的，因为它使 Element 类膨胀。

我还尝试通过这样的界面选择元素：

```
getElementsByInterface(Movable, allElements) { ... } 
```

（Movable是接口，allElements是ArrayList）

但它不编译。似乎 Java 在运行时不再知道接口。

长话短说（抱歉我的帖子可能过于冗长）：让数组元素根据其能力（/接口）做出反应的最佳设计解决方案是什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-25T04:31:13.453

我认为这种方法本质上没有任何问题。

这种情况基本上有[两种方法](http://andymaleh.blogspot.com/2008/04/scalas-pattern-matching-visitor-pattern.html)：

1.  使用多态性和[访问者模式](http://en.wikipedia.org/wiki/Visitor_pattern)。由于[LSP](http://en.wikipedia.org/wiki/Liskov_substitution_principle)的（接口方面） ，这引入了描述每个处理程序必须实现所有操作的“缺点”。

2.  [使用基于本地类型的切换（这在像Scala](http://www.scala-lang.org/)这样的带有[ADT](http://en.wikipedia.org/wiki/Algebraic_data_type)的语言中更常见，这种方法是[可以接受的/常见](http://blog.nirav.name/2009/04/how-scalas-pattern-matching-can-replace.html)的；Java 语法在比较中有点笨拙）。

这里没有违反（多态）[打开/关闭](http://en.wikipedia.org/wiki/Open/closed_principle)，*因为*正在使用接口并且“动作”仍然留在实现中（它仍然支持多态，因此是“开放的”）；只是行动的*选择*不是。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-25T04:54:47.847

我建议正确的答案取决于该或类似的 switch 语句在您的代码库中出现的次数。

如果它恰好发生在一个地方，那么保持原样可能没问题。

如果它出现在一堆地方，那么使用访问者模式（或者可能同时使用命令和复合模式，具体取决于您期望的更改的性质）重构它可能是一个好主意。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-09-25T04:01:55.593

[访问者模式](http://en.wikipedia.org/wiki/Visitor_pattern)在这里可能很有用。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-09-25T04:20:02.190

为什么你不能为此使用反射？

我可以建议你一种方法。

创建一个新界面说 CanDoAction ：

```
public interface CanDoAction{
    String getAction();
} 
```

然后从此扩展您的接口，对于 getAction 方法，返回要为相应接口调用的函数的名称。例如，在实现 Movable 的类的情况下，为 getAction 返回“move”。

然后在循环中：

```
for (Element element : allElements) {
    String actionName = ((CanDoAction)element).getAction();

    try {
        element.getClass().getDeclaredMethod(actionName, null)
                .invoke(element, null);
    } catch (Exception e) {
        e.printStackTrace();
    }
} 
```