# StackOverflow 问答 15781000-15781999

# java - Apache struts 国际化和本地化问题

> ID：15781001
> 
> 赞同：1
> 
> 时间：2013-04-03T07:11:19.127
> 
> 标签：java, apache, internationalization, struts, message

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-03T07:16:02.867

check your browser encoding and set it UTF-8

try this in web.xml

```
<filter> 
<filter-name>CharacterEncodingFilter</filter-name> 
<filter-class>bt.gov.g2c.framework.common.CharacterEncodingFilter</filter-class> 
<init-param> 
<param-name>requestEncoding</param-name> 
<param-value>UTF-8</param-value> 
</init-param> 
</filter> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-12T04:29:46.863

Followed [mkyong url](http://www.mkyong.com/jsf2/jsf-2-internationalization-example/), It says.

`For UTF-8 or non-English characters, for example Chinese , you should encode it with native2ascii tool.`

With the help of `native2ascii tool`

```
farequoteautomatic.entry-area.gen.emd.fareamount=Ücret Miktarı 
```

Converted to

```
farequoteautomatic.entry-area.gen.emd.fareamount=\ufeff\u00dccret Miktar\u0131 
```

And at the browser i got desired out put that is `Ücret Miktarı`

# android - Android uiautomator - 使用条形图

> ID：15781002
> 
> 赞同：0
> 
> 时间：2013-04-03T07:11:28.737
> 
> 标签：android, android-uiautomator

在尝试 Android uiautomator 实用程序时，我在使用条形图时遇到了一些问题。（例如显示时间、wifi 状态、电池等的底部栏...）

问题是底部栏似乎不是显示器的一部分，当尝试点击它时（使用 uidevice 方法 click(x,y) ），我得到 false - 的返回值，点击它上面的像素就可以了很好（返回值为真）

使用 uiviewer 实用程序时，单击该栏不会更新右窗格，例如：“显示”似乎根本不包括该栏。

bar 和 uiautomator 是否存在已知问题？bar 可以使用 uiautomator 进行测试/交互吗？

在此先感谢，加尔。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-05T09:23:51.530

`uiautomationviewer`我的初步调查与您的调查结果相符 -尽管顶部通知栏（显示时间、状态指示器，例如电池、网络连接等）或带有软键图标（返回、主页等）的底部栏都不可用包含在 FrameLayout 中。

（注意：我正在检查 Nexus 4 手机和 Nexus 7 平板电脑。某些平板设备在屏幕底部有通知栏，例如我的 A500）

根据我的初步调查结果，UI Automator 不适合。也许`monkeyrunner`会更合适，例如查看以下问题和答案[Monkeyrunner 可以与 android 通知交互吗？](https://stackoverflow.com/questions/11259760/can-monkeyrunner-interact-with-android-notifications)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-10T12:27:45.513

当我尝试使用带有坐标定位的monkeyrunner触摸方法时，它工作正常。

我想这是谷歌将在 UiAutomator 的未来版本中修复的问题。

再次感谢，

加尔。

# celery - 芹菜中未注册的任务

> ID：15781004
> 
> 赞同：2
> 
> 时间：2013-04-03T07:11:35.457
> 
> 标签：celery, celery-task

任务.py：

```
from celery import Celery
from django.http import HttpResponse
from anyjson import serialize

celery = Celery('tasks', broker='amqp://guest@localhost//')

#@celery.task
def add(request):
    x = int(request.GET['x'])
    y = int(request.GET['y'])
    result = x+y
    response = {'status': 'success', 'retval': result}
    return HttpResponse(serialize(response), mimetype='application/json') 
```

启动工人后，我尝试了http调度程序：

```
from celery.task.http import URL
res = URL('http://localhost/add').get_async(x=10, y=10)
res.state
'PENDING' 
```

并出现错误，例如 [2013-04-03 06:39:54,791: ERROR/MainProcess] 收到 u'celery.task.http.HttpDispatchTask' 类型的未注册任务。该消息已被忽略并丢弃。

你记得导入包含这个任务的模块吗？或者，也许您正在使用相对进口？更多：[http ://docs.celeryq.org/en/latest/userguide/tasks.html#names](http://docs.celeryq.org/en/latest/userguide/tasks.html#names)

邮件正文的完整内容是： `{u'utc': True, u'chord': None, u'args': [u'http://localhost/add', u'GET'], u'retries': 0, u'expires': None, u'task': u'celery.task.http.HttpDispatchTask', u'callbacks': None, u'errbacks': None, u'taskset': None, u'kwargs': {u'y': 10, u'x': 10}, u'eta': None, u'id': u'29f83cc9-ba5a-4008-9d2d-6f7bb24b0cfc'} (288b)`

回溯（最近一次通话最后）： `File "/usr/local/gdp/python2.7.2/lib/python2.7/site-packages/celery-3.0.13-py2.7.egg/celery/worker/consumer.py", line 435, in on_task_received strategies[name](message, body, message.ack_log_error) KeyError: u'celery.task.http.HttpDispatchTask'`

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-07-27T14:30:43.820

抱歉，如果我说的很明显，但任务装饰器`#@celery.task`已被注释掉。

# iphone - 我如何根据不同的参数搜索 facebook 用户

> ID：15781006
> 
> 赞同：0
> 
> 时间：2013-04-03T07:11:37.417
> 
> 标签：iphone, ios, objective-c, facebook-graph-api

我正在开发一个 iphone 应用程序。
我如何根据姓名、大学、城市等不同参数搜索 facebook 用户？

我知道有搜索用户[https://graph.facebook.com/search?q=mark&type=user](https://graph.facebook.com/search?q=mark&type=user)的 api 。
我曾尝试使用 FbGraphApi [FacebookGraph doGraphGet:@"search?q=Bhavesh&type=user" withGetVars:nil];

但是，我收到了这个错误。" {"error":{"message":"不支持的类型，用户？","type":"Exception"}} "

我不知道使用这个 api 的正确方法是什么。
请帮我解决一下这个。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-20T11:44:49.837

[https://graph.facebook.com/search?q=SEARCH?type=user&access_token=YOUR](https://graph.facebook.com/search?q=SEARCH?type=user&access_token=YOUR) ACCESS_TOKEN。你可以传递任何东西来代替“搜索”。它可以按名称、ID、电子邮件进行搜索。

# xamarin.ios - xamarin 可以免费用于商业目的吗？

> ID：15781007
> 
> 赞同：2
> 
> 时间：2013-04-03T07:11:41.227
> 
> 标签：xamarin.ios, xamarin.android, xamarin

它与有关 Xamarin 的许可令人困惑。我的问题是“如果我使用 Xamarin 开发应用程序”，那么我可以用于商业目的吗？

请建议。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-03T07:25:25.050

既然您询问*free*，我假设您的意思是~~Indie~~ Starter 版本。

从他们的[常见问题解答](http://xamarin.com/faq#q25)：

> 对于刚开始使用 Xamarin 的开发人员，我们推出了 Starter 版本，这是一个免费版本，支持设备部署和**应用商店发布**，适用于没有第三方本机库依赖项且编译 C# 代码少于 32k 的小型应用程序。

*（我的亮点）*

由于 Starter 之上的所有版本都只是添加到此，所以是的，您可以将其用于商业目的。

对于许多其他情况，您应该查看该常见问题解答。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2016-04-07T12:06:23.880

这是一个好消息。

[适合所有人的 Xamarin](https://blog.xamarin.com/xamarin-for-all/)

您可以访问 Xamarin 商店。

[使用 Xamarin 在 Android、iOS、Windows 和 Mac 上构建 C# 应用程序。（商店）](https://store.xamarin.com/)

Xamarin 还发起了[竞赛：在 Stack Overflow 上获得答案](https://blog.xamarin.com/contest-get-answering-on-stack-overflow/)

由于这场比赛，新用户将很容易进入 Xamarin。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2016-04-07T12:30:01.000

根据您的公司规模（以及其他一些限制），是的，Xamarin 现在可以免费用于商业用途。有关更多信息，请参阅以下链接：

*   [使用 Visual Studio 和 Xamarin 轻松进行移动开发](https://blogs.msdn.microsoft.com/visualstudio/2016/03/31/mobile-app-development-made-easy-with-visual-studio-and-xamarin/)
*   [Xamarin 定价](https://store.xamarin.com)

# android - Widget 和 onUpdate 上的按钮

> ID：15781012
> 
> 赞同：0
> 
> 时间：2013-04-03T07:11:56.030
> 
> 标签：android, eclipse, widget

在一个小部件中，我必须设置两个不同的操作，我有一个 Widget.class 和一个 WidgetConfig.class

onUpdate（然后我将从 provider.xml 更改刷新率）我必须在 WidgetConfig.class 上调用一个函数，例如 WidgetConfig.routine(parameter1,parameter2)

在 button_click 上，我必须调用 WidgetConf.class 中的另一个例程，例如 WidgetConf.routine2(parameter1,parameter2)

我怎么能从小部件按钮调用该例程？

示例：每 X 次小部件自动更新（通过返回的函数值更改颜色）仅在单击时小部件必须调用另一个函数然后进行更新

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-03T08:18:59.790

这很简单，取一个布尔变量，并在你调用的方法之一中设置真或假，如果它是真的，则调用方法 1 否则方法 2，并在函数声明的末尾更改值

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-05T19:16:16.300

按照我在这篇文章中的回答解决了： [已解决：Android Widget - 点击操作，在 30 分钟内更新，单独的实例](https://stackoverflow.com/questions/15824817/solved-android-widget-click-for-action-update-under-30-minutes-separate-ins)

两种不同的意图称为...

# wpf - 使用 MVVM 是添加控件以从视图模型包装面板的好习惯吗？

> ID：15781014
> 
> 赞同：3
> 
> 时间：2013-04-03T07:12:00.800
> 
> 标签：wpf, mvvm, wrappanel

我在 WPF 中有一个使用 MVVM 模式的应用程序，我曾经有一个列表或 observableCollection，例如绑定组合框、DataGrids 等。但是我有一个控件，我想将此控件的动态项添加到包裹面板。

在我的视图模型中创建此控件的视图和视图模型并将其添加到绑定到包装面板的列表中是一个好主意吗？

如果这不是一个好主意，我如何动态地将项目添加到包装面板？

谢谢。

**编辑**

我添加代码。

我正在尝试这样做，但我没有得到解决方案。

我有一个主视图模型，它创建视图和我的辅助视图的视图模型。在这个主要视图模型中，我使用以下代码：

```
ucDialogView myDialogView = new ucDialogView ();
ucDialogViewModel myDialogViewModel = new ucDialogViewModel ();
ucDialogView.DataContext = ucDialogViewModel; 
```

我的对话框的视图模型如下：

```
public class DialogViewModel : BaseViewModel
{

    private ObservableCollection<ControlViewModel> _controls = new ObservableCollection<ControlViewModel>();
    public ObservableCollection<ControlViewModel> Controls
    {
        get { return _myControls; }
        set
        {
            _myControls = value;
            base.RaisePropertyChangedEvent("Controls");
        }
    }

    public myControlViewModel()
    {
        ControlViewModel myControlViewModel = new ControlViewModel();
        Controls.Add(myControlViewModel);
    }

} 
```

我的对话框的 axml：

```
<UserControl x:Class="MyApp.Views.DialogView"
             Name="Principal"
             xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
             xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
             xmlns:mc="http://schemas.openxmlformats.org/markup-compatibility/2006" 
             xmlns:d="http://schemas.microsoft.com/expression/blend/2008" 
             xmlns:my="clr-namespace:myApp.ViewModels"
             mc:Ignorable="d"
             d:DesignHeight="1122" d:DesignWidth="794" Width="794" Height="1122">

        <ItemsControl Grid.Row="1"
              ItemsSource="{Binding Controls, Mode=TwoWay, UpdateSourceTrigger=PropertyChanged}">
            <ItemsControl.ItemsPanel>
                <ItemsPanelTemplate>
                    <WrapPanel HorizontalAlignment="Center" Margin="0,15,0,0" Name="wrpControls" VerticalAlignment="Stretch" Width="Auto" Grid.Row="1" IsItemsHost="True" />
                </ItemsPanelTemplate>
            </ItemsControl.ItemsPanel>
            <ItemsControl.ItemTemplate>
                <DataTemplate DataType="{x:Type my:ControlViewModel}">
                </DataTemplate>
            </ItemsControl.ItemTemplate>
        </ItemsControl>
</UserControl> 
```

但是，我得到一个空对话框。控件是用户控件、视图及其视图模型。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-03T07:27:38.487

我认为更好的方法可能是为`DataTemplate`您要使用的每个 ViewModel 类型定义一个。然后，您可以将 ViewModel 对象本身添加到 WrapPanel 的项目中。
WPF 基础结构将看到此类对象有一个 DataTemplate，并将负责显示关联的 DataTemplate。

您需要在 WrapPanel 可访问的某个范围内声明 DataTemplate，例如在父页面/窗口`App.xaml`的资源或资源中：

```
<DataTemplate DataType="{x:Type local:YourViewModelClass}">
  <ComboBox>
    <!-- Define your bindings and stuff here -->
  </ComboBox>
</DataTemplate> 
```

请注意，`WrapPanel`它没有`ItemsSource`属性，因此如果要将其项目绑定到对象列表（例如 ViewModel），则需要使用`ItemsControl`：

```
<ItemsControl ItemsSource="{Binding YourListOfViewModels}">
    <ItemsControl.ItemsPanel>
        <ItemsPanelTemplate>
            <WrapPanel/>
        </ItemsPanelTemplate>
    </ItemsControl.ItemsPanel>
</ItemsControl> 
```

假设`YourListOfViewModels`是`ObservableCollection`您的一个 ViewModel，每次您将 ViewModel 添加到该列表时，它都会以正确的`DataTemplate`.

# assembly - MARIE 汇编语言中的 Skipcond

> ID：15781015
> 
> 赞同：1
> 
> 时间：2013-04-03T07:12:01.073
> 
> 标签：assembly, marie

我有以下代码：

```
 ORG    100      
LOOP, Load   X
      Add    Z
      Store  X
      Load   Y
      Skipcond 400
      Jump   Q
      Subt   Z
      Store  Y
      Jump   LOOP
Q,    Output X
      Halt
X,    Dec    0
Y,    Dec    10
Z,    Dec    1 
```

现在，如果我理解正确的话，它在某种程度上等同于以下 Python 代码：

```
x = 0
y = 10
z = 1
while True:
    x += z
    if y > 0:
        y -= 1
    else:
        exit(0) 
```

如果是这种情况，我很困惑为什么在完成循环过程后，MARIE 中的 X = 10 和 Python 中的 X = 11。根据我对 MARIE 代码的理解，skipcond 400 相当于 if y > 0。如果是这种情况，那么当 x = 10，y = 1 时，它仍然会通过 skipcond 从 y 中减去 1，因此重新启动循环并再次将 1 添加到 x 意味着当循环结束并输出数据时 x = 11。

一些帮助理解这一点将不胜感激，谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-03T08:50:35.067

你`SKIPCOND`是“颠倒的”。条件 400 表示[如果 AC==0 则跳过](http://www.edwardbosworth.com/CPSC2105/Lectures/Slides_05/Chapter_04/MARIE_Organization.htm)。所以这段代码：

```
 Load   Y
  Skipcond 400
  Jump   Q 
```

实际上会：

```
IF (Y != 0) GOTO Q 
```

这似乎与您想要做的相反。您可能想要的是`SKIPCOND 800`（如果 AC > 0 则跳过）。

# android - 具有多个数据的 ArrayList

> ID：15781016
> 
> 赞同：0
> 
> 时间：2013-04-03T07:12:01.670
> 
> 标签：android, arraylist, android-arrayadapter

我对 ArrayList 有一个小问题。我必须从服务器获取文档。该文档包含 7 个数据字段。我必须在列表视图中显示文档名称。为此，我将不同的字段数据添加到不同的 ArrayList。因此，当我单击文档名称时，根据文档的位置，我根据位置从不同的 Arraylist 中获取所有字段数据。

但是使用上述过程有一个小问题。是否有任何不依赖于位置的程序，如果我点击文档，我想要的是与位置无关，基于要提取的关键字文档数据。

任何帮助表示赞赏。提前致谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-03T07:15:19.553

我明白你的意思了。如果您尝试管理不同的 ArrayList，那么将很难管理它。我的意思是，如果您从特定 ArrayList 的特定位置删除项目，那么您将不得不从其他 ArrayList 的相同位置删除项目，如果您忘记这样做，那么它将是不平衡的。

## 解决方案：

相反，可行的解决方案是创建`ArrayList<Object>`or `ArrayList<HashMap<String,String>>`，因此您的每个项目都是特定对象的类型，并且每个对象都包含特定项目的详细信息和所有内容。

**例如：** `ArrayList<Documents>`，这里 ArrayList 将包含`Documents`对象列表，每个对象包含 7 个字段的值。

使用 getter/setter 属性定义 Documents 类很容易。

# javascript - Facebook AppRunner 是如何工作的？

> ID：15781017
> 
> 赞同：2
> 
> 时间：2013-04-03T07:12:02.147
> 
> 标签：javascript, facebook, iframe, facebook-iframe

*我们正在为我们的服务实现 OAuth API，并将支持应用程序。*

我想做的第一件事 - 允许应用 iframe 自动调整大小。

卡住。

*   在父文档中，如果 iframe 在其他域上，我无法获取 iframe 内容的大小。
*   我无法与 iframe 中的父文档/脚本进行交互，因为 iframe 位于其他域中。

但是Facebook以某种方式做到了？

我试图破解他们的应用程序加载流程，但没有任何成功。

他们在 iframe 中加载 page_proxy.php，然后以某种方式来自应用程序的代码进入该 iframe。

当然，他们可能只是从应用程序中获取 html 内容，然后将所有 url 路径转换为绝对路径.. 但是。那么 Ajax 调用如何工作（如果它们只是加载我们的 html 内容 - 那么任何 ajax 调用都将成为跨域调用）？但这一切都可以在 FB 上运行，就好像我的应用程序是作为真正的 iframe 加载的，并且没有任何跨域调用..！但话又说回来.. 调整大小是如何工作的，为什么我在 facebook 上看不到我的 iframe 而只看到 pageproxy？

这里真的需要一些光。

谢谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-03T08:40:44.973

终于找到了FB是怎么做到的：）

*   page_proxy.php#frameName - 加载一个表单，然后使用 POST 方法加载带有签名请求的 iframe。

为什么没有直接调用用应用程序加载 iframe？防止第 3 方脚本获取签名请求（其中包含所有用户信息）。

fb是如何做到的（我采用的代码）：

```
<form method="post" id="proxy_form"><input type="hidden" autocomplete="off" id="signed_request" name="signed_request" /></form>
<script>
  var frameName = window.location.href.split('#')[1];
  function submitForm(appTabUrl, signedRequest) {
    var proxyForm = document.getElementById("proxy_form");
    proxyForm.setAttribute("action", appTabUrl);
    proxyForm.setAttribute("target", frameName);
    var input = document.getElementById("signed_request");
    input.setAttribute("value", signedRequest);
    proxyForm.submit();
  }
  function waitForParams() {
    submitForm('$url_with_app', 'signed_request_goes_here');
  }
  waitForParams();</script> 
```

*   iFrame 中的应用程序正常加载，但我们在 DOM 浏览器中看不到 iframe 与我们的应用程序，因为它是使用 POST 请求加载的。

*   我们在我们的应用程序中初始化 facebook 并告诉我们的应用程序自动增长。

*   Facebook 完成初始化，等待 DOM 准备好并计算应用程序的高度。

*   现在是时候增加我们的 iframe 了。这是他们的伎俩：

[来源自FB](https://github.com/facebook/facebook-js-sdk/blob/deprecated/src/core/canvas.js#L88)

```
_sendMessageToFacebook: function(message) {
    var url = FB._domain.staticfb + 'connect/canvas_proxy.php#' +
      FB.QS.encode({method: message.method,
                    params: FB.JSON.stringify(message.params)});

     var root = FB.Content.appendHidden('');
     FB.Content.insertIframe({
       url: url,
       root: root,
       width: 1,
       height: 1,
       onload: function() {
         setTimeout(function() {
           root.parentNode.removeChild(root);
         }, 10);
       }
     });
  } 
```

他们在我们的应用程序中加载了另一个 iframe，但该 iframe 已经属于 facebook，并且可以与 FB 父级（顶部窗口）交互并将所有必需的信息发送给父级！

*   [这是它内部的样子（检查源代码）](http://static.ak.facebook.com/connect/canvas_proxy.php?method=setSize)

# requirements - 非功能需求可靠性测量？

> ID：15781018
> 
> 赞同：0
> 
> 时间：2013-04-03T07:12:05.147
> 
> 标签：requirements

作为非功能性需求的应用程序可靠性的衡量标准是什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-03T09:40:21.877

您无法衡量可靠性，因为它与许多不同的因素有关。对于网络应用程序，正常运行时间可以是其中之一。对于其他软件，它可以是在任何情况下都可以防止数据丢失。

您必须通过将其分解为您的详细期望来更准确地定义它，然后您可以量化要衡量的值。

这是非功能性需求的核心问题，您无法轻松地对其进行衡量。您必须如上所述解决该问题。

# c - 最佳 Labview IPC

> ID：15781021
> 
> 赞同：1
> 
> 时间：2013-04-03T07:12:13.427
> 
> 标签：c, ipc, labview

我需要让 labview 与 C/C++ 应用程序通信。两个应用程序都在同一台机器上运行。LabView 中具有较低开销和最高速度的 IPC 机制是什么？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-03T13:36:48.080

TCP、UDP、ActiveX、DDE、文件事务，或者可能只是直接调用 dll 是我想到的解决方案。

首先，如果您可以使用它，我会调用一个 dll。假设您使用两个单独的应用程序，那么：

我会使用 TCP 或 UDP。文件事务笨重但易于实现，DDE 较旧但可能可行（我建议不要这样做）。

[Labview 中的基本 TCP/IP](http://www.ni.com/white-paper/2710/en "Labview 中的基本 TCP/IP")

[Labview 中的 TCP/IP 和 UDP](http://zone.ni.com/reference/en-XX/help/371361J-01/lvconcepts/using_labview_with_tcp_ip_and_udp/#UDP_Multicast "Labview 中的 TCP/IP 和 UDP")

[从 Labview 调用 dll](http://digital.ni.com/public.nsf/allkb/DCB90714981A1F148625731E00797C33 "从 Labview 调用 dll")

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-03T12:38:49.347

您是否直接调查过 TCP 或 UDP？

如果您以后需要将应用程序分离到不同的机器上，它会很容易。实现也非常简单，尽管它可能不是最快的吞吐量。

我们在这里谈论什么速度？

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-05-15T00:54:12.387

NI 提供了一份详尽的文档来解释：[在 LabVIEW 中使用外部代码 [pdf]](http://www.ni.com/pdf/manuals/370109a.pdf)。简而言之，您可以使用：

1.  共享库（在 Windows 上它们称为 DLL）。根据上述文档，只要可以使用 LabVIEW 支持的调用约定之一（stdcall 或 C）调用 DLL，就可以使用任何语言编写 DLL。”
2.  代码接口节点 (CIN)，它是将 C/C++ 源代码链接到 LabVIEW 的框图节点。

3.  .NET 技术。

请注意，Windows、Max OS X、Linux 和 Solaris 支持“共享库”和“代码接口节点”。

# asp.net-mvc-3 - 如何解决跨站点脚本 (XSS) 漏洞 asp.net

> ID：15781025
> 
> 赞同：0
> 
> 时间：2013-04-03T07:12:23.810
> 
> 标签：asp.net-mvc-3

使用时

返回 Json(educationModel, JsonRequestBehavior.AllowGet);

其中educationModel 是我正在使用的控制器的对象。

但我遇到了如下所示的安全问题。

“该方法将未经验证的数据发送到 Web 浏览器，这可能导致浏览器执行恶意代码”。

我知道这是因为“跨站点脚本（XSS）漏洞”。

我将 MVC 3.0 与 Framework 4.0 一起使用。

谁能给我这个解决方案？如何解决这个问题？

提前致谢

# rest - RestTemplate 发布一个集合

> ID：15781026
> 
> 赞同：2
> 
> 时间：2013-04-03T07:12:25.790
> 
> 标签：rest, resttemplate

好的，我回来寻找解决方案。

我正在尝试使用 Spring RestTemplate`postForEntity`方法发送实例集合。当尝试spring给出错误`org.springframework.http.converter.HttpMessageNotWritableException: Could not write request: no suitable HttpMessageConverter found for request type [com.abc.base.domai n.dto.gift.GiftItemList`Appriciate时，如果有人可以告诉我如何使用spring resttemplate POST方法发送一个ArrayList。

RestTemplate 豆：

```
 <bean id="restTemplate" class="org.springframework.web.client.RestTemplate">
   <constructor-arg ref="httpClientFactory"/> 
    <property name="messageConverters">
        <list>
            <bean class="org.springframework.http.converter.FormHttpMessageConverter" />
            <bean class="org.springframework.http.converter.StringHttpMessageConverter" /> 
            <bean id="jsonViewResolver" class="org.springframework.http.converter.json.MappingJacksonHttpMessageConverter" >
               <property name="objectMapper">
                    <ref bean="JacksonObjectMapper" />
               </property>              
               <property name="supportedMediaTypes">
                          <list>
                            <bean class="org.springframework.http.MediaType">
                               <constructor-arg value="application" />
                               <constructor-arg value="json" />
                               <constructor-arg value="#{T(java.nio.charset.Charset).forName('UTF-8')}"/>
                             </bean>
                          </list>
                </property>
            </bean>                                             
        </list>
    </property>
</bean>
<bean id="JacksonObjectMapper" class="org.codehaus.jackson.map.ObjectMapper" />

 <bean id="httpClient" class="org.apache.commons.httpclient.HttpClient">
    <constructor-arg ref="httpClientParams"/>
</bean>

 <bean id="httpClientParams" class="org.apache.commons.httpclient.params.HttpClientParams">        
    <property name="connectionManagerClass"  value="org.apache.commons.httpclient.MultiThreadedHttpConnectionManager"/>
</bean>

<bean id="httpClientFactory" class="org.springframework.http.client.CommonsClientHttpRequestFactory">
    <constructor-arg ref="httpClient"/>
</bean> 
```

我试图发布的实例，

```
 public class GiftItem implements Entity, Serializable {    

    private static final long serialVersionUID = 1L;

    private String redeemLocation;  
    private String itemName;    
    private String itemDescription; 
    private String merchantName;    
    private Integer quantity;   
    private Integer imageId;

    public GiftItem() {
        super();        
    }

    //with getters and setters

} 
```

GiftItem 实例包装类

```
 public class GiftItemList implements Serializable {

    private static final long serialVersionUID = -8202204714984099030L;

    public GiftItemList() {

    }

    private List<GiftItem> giftItemList;

    public List<GiftItem> getGiftItemList() {
        return giftItemList;
    }

    public void setGiftItemList(List<GiftItem> giftItemList) {
        this.giftItemList = giftItemList;
    }
} 
```

这就是我使用它的方式，

```
public BaseResponse sendGiftEmail(final String token, final User sender,final String message, final GiftItemList giftItemList) {

    MultiValueMap<String, Object> map = new LinkedMultiValueMap<String, Object>();
    map.add("token", token);        
    map.add("sender", sender);
    map.add("message", message);
    map.add("giftItemList", giftItemList);
    return getRestTemplate().postForEntity(
            "http://localhost:8080/notification/api/notification/send_gift_email",
    map, BaseResponse.class).getBody();
} 
```

和我得到的错误，

```
 org.springframework.http.converter.HttpMessageNotWritableException: Could not write request: no suitable HttpMessageConverter found for request type [com.abc.base.domain.dto.gift.GiftItemList]
   at org.springframework.http.converter.FormHttpMessageConverter.write Part(FormHttpMessageConverter.java:310)
   at org.springframework.http.converter.FormHttpMessageConverter.write Parts(FormHttpMessageConverter.java:270)
   at org.springframework.http.converter.FormHttpMessageConverter.write Multipart(FormHttpMessageConverter.java:260)
   at org.springframework.http.converter.FormHttpMessageConverter.write(FormHttpMessageConverter.java:200)
   at org.springframework.http.converter.FormHttpMessageConverter.write(FormHttpMessageConverter.java:1)
   at org.springframework.web.client.RestTemplate$HttpEntityRequestCallback.doWithRequest(RestTemplate.java:588)
   at org.springframework.web.client.RestTemplate.doExecute(RestTemplate.java:436)
   at org.springframework.web.client.RestTemplate.execute(RestTemplate.java:401)
   at org.springframework.web.client.RestTemplate.postForEntity(RestTemplate.java:302)
   at com.tapgift.gift.client.impl.GiftClientImpl.sendGiftNotifications(GiftClientImpl.java:101) 
```

起居室：

```
<dependency>
        <groupId>org.codehaus.jackson</groupId>
        <artifactId>jackson-mapper-asl</artifactId>
        <version>1.9.2</version>
    </dependency> 
```

差点忘了接收控制器，

```
 @RequestMapping(value = "/notification/send_gift_email", method = RequestMethod.POST)
    public @ResponseBody BaseResponse sendGiftEmail(@RequestParam("token") String token,     @RequestParam("sender")final User sender, @RequestParam("message")final String message,@RequestParam("giftItemList") GiftItemList giftItemList) {

} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-03-26T11:09:12.437

您必须将 MappingJacksonHttpMessageConveter 添加到您的 messageCoverter ：

```
 List<HttpMessageConverter<?>> messageConverters = new ArrayList<HttpMessageConverter<?>>();
messageConverters.add(new FormHttpMessageConverter());
messageConverters.add(new StringHttpMessageConverter());
messageConverters.add(new MappingJacksonHttpMessageConverter());
restTemplate = new RestTemplate();

restTemplate.setMessageConverters(messageConverters); 
```

您还需要添加以下依赖项：

```
jackson-core-asl-x.x.x.jar & jaackson.mapper.asl-x.x.x.jar 
```

另一件事，您必须确保您的类具有与 JSON 属性相同的属性。例如 ：

```
{"data":{"ticket":"TICKET_870299cf98e227abdbd5f9b7064390c5723a0c6a"}} 
```

要填充您的类属性，它们必须是这样的：

人.java

```
public class person {

 private Data data;

 public Data getData() {
 return data;
 }

 public void setData(Data data) {
   this.data = data;
 }
} 
```

数据.java

```
public class Data {

 private String ticket;

 public String getTicket() {
   return ticket;
 }

 public void setTicket(String ticket) {
   this.ticket = ticket;
 }

} 
```

最后在您的应用程序中添加：

```
 person entity = restTemplate.postForObject(url, requestEntity,
    person.class); 
```

requestEntity 是一个包含您的请求正文的字符串（在我的例子中是 JSON）。

希望有帮助！

# c++ - c++ 随机数（Visual Studio 形式）

> ID：15781027
> 
> 赞同：0
> 
> 时间：2013-04-03T07:12:27.320
> 
> 标签：c++, visual-studio-2008, random

我是 C++ 新手（用于编写 C# 代码），我只是不知道如何在 Visual Studio C++ 表单环境中创建随机数。这是我使用的代码：

```
int randNumber;
srand(time(NULL));
randNumber = rand();
MessageBox::Show(randNumber.ToString()); 
```

我只是将该代码放入 form_load 块中。

我得到的错误信息是：

错误 C3861：“时间”：未找到标识符

错误 C3861：“rand”：未找到标识符

**编辑 ：**

我确实将包含在我的 Form1.h 文件中，如下所示：

```
#pragma once

#include <cstdlib>
#include <ctime>

namespace Srand { 
```

这似乎可行，但是随机数非常奇怪。

3100 3130 3146 3169 3192 3208 3231 3250 3270 3286

看起来一点也不随机，只是随机变大。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-03T07:15:05.037

您必须包含相应的标题，例如

```
#include <ctime> /* for time */ 
```

和

```
#include <cstdlib> /* for rand */ 
```

请参见[此处](http://www.cplusplus.com/reference/cstdlib/rand/)`rand`和[此处](http://www.cplusplus.com/reference/ctime/)。_`time`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-03T07:15:11.760

你需要`#include <cstdlib>`和`#include <ctime>`。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-03T10:27:28.423

因为你的数字是时间相关的，你会得到非常接近的结果。你可以尝试通过对 time() 应用一些变换来随机化你的数字，比如首先乘以一个非常大的数字，然后对一些大素数取 mod。

# java - 使用 ant 在 Web 应用程序中插入 lib jars

> ID：15781029
> 
> 赞同：2
> 
> 时间：2013-04-03T07:12:31.913
> 
> 标签：java, ant, cobertura

我有一个网络应用程序。我想在 XX.war/WEB-INF/lib 中检测 com.mycompany*jar。我必须通过 ant cobertura 任务来执行此操作。

是否可以使用 ant 任务在 war 文件中的选定 jar 中检测类？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-10-01T16:42:49.327

如果您的 jar 包含都在同一个包中的类，您可以使用带有“<includeClasses regex=...”的表单（注意：根据我的经验，在尝试 regex 之前尝试常规 glob 模式）。

您可以传递一个war 文件，它将检测WEB-INF/lib 中任何jar 中模式中的类（或WEB-INF/classes 中的类）。

```
 <cob:cobertura-instrument datafile="${todir}/${instrument.ser.filename}" >
    <includeClasses regex="com.mycompany.*" />

    <instrumentationClasspath>
      <pathelement path="${war.file}"/>
    </instrumentationClasspath>
  </cob:cobertura-instrument> 
```

或者，如果您确实需要查明 WEB-INF/lib/ 文件夹中的特定 jar，您可以尝试使用 ant zip/jar 文件集的表单（我还没有尝试过）：

```
 <cob:cobertura-instrument datafile="${todir}/${instrument.ser.filename}" >
     <zipfileset src="${war.file}" includes="WEB-INF/lib/com.mycompany*.jar"/>
  </cob:cobertura-instrument> 
```

如果一切都失败了，我会做你可能考虑过的事情：提取这些罐子，检测它们（使用第一种形式）并重新打包它们。

# linux - 切换用户到根目录或父目录，通过windows登录

> ID：15781031
> 
> 赞同：1
> 
> 时间：2013-04-03T07:12:33.887
> 
> 标签：linux, windows, ftp

我有一个用于托管文件的 linux 服务器，有多个用户可以访问服务器上的不同文件夹。我有一个用户 'ftp_user'，其默认登陆位置是 '/data/myworld/' 我在 '/data/shared/' 处创建了一个文件夹，尽管可以通过命令行或 ftp 导航到 /data/shared软件，但我的用户 'ftp_user' 想使用 ftp:/user:ip/data/shared/ 的 windows 简单命令访问此文件夹（/data/shared/），但他无法访问 /data/shared，因为默认情况下他正在登陆进入 /data/myworld/ 所以这个额外的 /data/shared 试图找到一个绝对路径为 /data/myworld/data/shared 的文件夹，我正在微软 Windows 中寻找“..”或“/ root”。请帮帮我

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-03T07:26:26.893

使用路径 /data/shared 设置一个 linux 用户并使用该用户登录到 ftp

大多数 ftp 服务器会阻止“登陆点”上方的路径遍历

如果要删除此保护，具体方法取决于所使用的特定 ftp 服务器软件

这更像是“超级用户”或“服务器故障”而不是“stackoverflow”的问题

# java - 在java中操作JPEG的库

> ID：15781033
> 
> 赞同：2
> 
> 时间：2013-04-03T07:12:44.313
> 
> 标签：java, jpeg

我是Java新手；

我需要操纵 jpeg 图像来进行隐写术。你能告诉我是否有任何库来操作 jpeg 图像？

我的意思是有什么功能可以进行 DCT 或量化吗？

提前致谢

# php - 使用 PHP 从 Google 搜索中获取原始引荐来源网址？

> ID：15781034
> 
> 赞同：6
> 
> 时间：2013-04-03T07:13:00.907
> 
> 标签：php, google-search-console

我正在使用`$_SERVER['HTTP_REFERER'];`, 来获取推荐人 URL。

当我在谷歌搜索框中输入`q='some text'`

```
`https://www.google.com.pk/#hl=en&output=search&sclient=psy-ab&q=some text%2Ftestbulkresponse&oq=some text%2Ftestbulkresponse&gs_l=hp.3...15460.24280.1.25007.30.30.0.0.0.0.325.7136.2-27j3.30.0...0.0...1c.1.8.hp.dAvuch3bBg4&psj=1&bav=on.2,or.r_qf.&bvm=bv.44697112,d.ZWU&fp=980e418276b62e8c&biw=1366&bih=595` 
```

但是当我在我的网站上使用 as `$_SERVER['HTTP_REFERER'];`

像`q=null`这样

```
`http://www.google.com.pk/url?sa=t&rct=j&q=&esrc=s&source=web&cd=1&cad=rja&ved=0CC0QFjAA&url=http%3A%2F%2Fwww.bulkresponse.com%2Ftestbulkresponse%2Fdashboard.php&ei=r9NbUfv7GcjaOYDdgKgC&usg=AFQjCNF9U_DpJEwupZ0ZLPbjWJ6DQLWZcA&bvm=bv.44697112,d.ZWU`. 
```

所以我无法在谷歌中获得搜索到的关键字，我该怎么做才能获得搜索到的关键字？

* * *

## 回答 #1

> 赞同：17
> 
> 时间：2013-04-03T07:18:09.453

Google 删除了 HTTPS 连接和登录用户的搜索查询，因此了解搜索查询的唯一方法是使用 Google Analytics

> 当您从[https://www.google.com](https://www.google.com)进行搜索时，您通过我们的自然搜索列表访问的网站仍会知道您来自 Google，但不会收到有关每个单独查询的信息。

[http://googleblog.blogspot.com.es/2011/10/making-search-more-secure.html](http://googleblog.blogspot.com.es/2011/10/making-search-more-secure.html) [http://analytics.blogspot.com.es/2011/10/making-search-more-secure-accessing .html](http://analytics.blogspot.com.es/2011/10/making-search-more-secure-accessing.html)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-03T07:16:27.470

试试这个。

```
parse_str(parse_url($_SERVER['HTTP_REFERER'], PHP_URL_QUERY), $queries);

echo $queries['q']; 
```

参考：

[http://php.net/parse_url](http://php.net/parse_url)

[http://php.net/parse_str](http://php.net/parse_str)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-11-21T18:37:53.027

```
$ref = $_SERVER['HTTP_REFERER'];
if(strstr($ref, "google.com")){
  //echo $ref;  
  $regex ='/q=(.+?)&/';
  preg_match($regex, $ref, $query);
  echo $query[1];
 } 
```

它并非每次都有效，尤其是现在他们的更新。我收到很多“ &esrc=s ”报告。

# macos - 分配的键盘快捷键的全局列表osx？

> ID：15781042
> 
> 赞同：26
> 
> 时间：2013-04-03T07:13:35.997
> 
> 标签：macos, keyboard-shortcuts

我更喜欢键盘快捷键而不是鼠标操作，因此我在各种应用程序中大量使用键盘快捷键。我时不时地遇到一种情况，我分配了一个已经在不同应用程序中使用过的键盘快捷键。当您重复使用已使用的组合时，并非所有应用程序都会显示警告。此外，由于我倾向于忘记一些较少使用的组合，因此最好找出分配了哪些内容。系统偏好设置并没有列出所有这些，但由于我的 Mac 会响应它们，因此必须有某种方法来获取所有已分配键盘快捷键的全局列表。有谁知道显示它们的命令/脚本/应用程序？

* * *

## 回答 #1

> 赞同：27
> 
> 时间：2013-12-19T21:18:42.757

你想要的可能是不可能的。考虑可以实现特定于应用程序的系统范围快捷方式的方法：[事件点击](https://stackoverflow.com/questions/15573376/registereventhotkey-cmdtab-in-mountain-lion)。应用程序可以对事件做任何它想做的事，并且从不实际向系统注册事件。因此，不能编写任何应用程序来识别每个可能的事件！

### *这是一个几乎*可以满足您需求的应用程序：

[http://www.ergonis.com/products/keycue/](http://www.ergonis.com/products/keycue/)

它甚至会在更改快捷方式时更新其列表。

您可以从他们的网站下载其他系统范围的快捷方式列表，其中包括其他任何地方未列出的键。但它没有显示持续活跃的应用程序（例如 Evernote）的快捷方式。 ![快捷方式列表](https://i.stack.imgur.com/loQtX.png)

### 此外，您可以通过编程方式查询和修改热键：

[http://www.theregister.co.uk/2009/02/24/hotkeys_framework2/](http://www.theregister.co.uk/2009/02/24/hotkeys_framework2/)

（但它仍然不知道事件水龙头）

### Apple 提供的所有系统快捷方式列表也很有用：

[http://support.apple.com/kb/HT1343](http://support.apple.com/kb/HT1343)

# java - 清除“引用文件包含错误”问题的 Eclipse 缓存

> ID：15781054
> 
> 赞同：0
> 
> 时间：2013-04-03T07:14:17.610
> 
> 标签：java, eclipse, castor

我使用 castor 进行 xml 绑定/生成，这个库适用于映射文件。

映射文件具有 castor 的标准 DOCTYPE 标头。

```
<!DOCTYPE mapping PUBLIC "-//EXOLAB/Castor Mapping DTD Version 1.0//EN"    "http://castor.org/mapping.dtd"> 
```

在我的 Eclipse 安装中，我收到以下错误

> 引用的文件包含错误 ( [http://castor.org/mapping.dtd](http://castor.org/mapping.dtd) )

我尝试过的（但没有奏效）：

*   在eclipse Prefs-General-Network Connections-Cache中清除网络缓存
*   更改了 eclipse 版本，现在使用 eclipse 3.8.2；两个版本都有同样的问题。
*   使用 -clean 选项运行 eclipse
*   将项目复制到新工作区

关于替代硬重置的任何建议？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-03T07:59:41.553

castor 文档在[http://castor.codehaus.org/schema.html](http://castor.codehaus.org/schema.html)明确说明了模式文件的使用，并明确说明

> 映射 DTD -//EXOLAB/Castor 对象映射 DTD 版本 1.0//EN [http://castor.org/mapping.dtd](http://castor.org/mapping.dtd)

但是，当您单击[架构 url](http://castor.codehaus.org/schema.html)上的 castor.org/mapping.dtd 链接时，它会链接到[http://castor.codehaus.org/mapping.dtd](http://castor.codehaus.org/mapping.dtd)

所以，事实上，正确的 dtd 位置是[http://castor.codehaus.org/mapping.dtd](http://castor.codehaus.org/mapping.dtd)，而不是 castor.org/mapping.dtd 。这显然是一个歧义，但解决了“引用文件包含错误”问题

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-09-06T09:36:16.947

[http://castor.org](http://castor.org)是（现在？）一个带有一些毫无意义的胡言乱语的网站；也许它已被黑客入侵。在网络浏览器中打开[http://castor.org/mapping.dtd](http://castor.org/mapping.dtd)链接以查看...

# wpf - 如何检查 WPF 中是否存在用于控制的特定属性？

> ID：15781055
> 
> 赞同：0
> 
> 时间：2013-04-03T07:14:19.187
> 
> 标签：wpf, wpf-controls

我如何在这里检查标签的背景

```
if([Label has any color don't do anything]){  
    if (turn == Players.p1)
                    {
                        label.Background = Brushes.Red;
                        turn = Players.p2;
                    }
                    else
                    {
                        label.Background = Brushes.Green;
                        turn = Players.p1;
                    }
    } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-03T09:02:21.607

您可以通过检查它是否为空`Background`来检查它`null`，或者它可能是`Transparent`

所以要么

```
if (label.Background == null) 
```

或者

```
if (label.Background == Brushes.Transparent) 
```

# javascript - 使用 javascript 更改按钮的文本，但单击时，服务器端接收到的按钮文本仍保持不变

> ID：15781059
> 
> 赞同：1
> 
> 时间：2013-04-03T07:14:52.320
> 
> 标签：javascript, asp.net

我有一个文本框和一个按钮（上面写着“激活”）。更改文本框的值后，按钮上的文本将更改为“搜索”。在代码隐藏中，它检查按钮的文本是搜索还是激活，并为每个文本执行不同的操作过程。但是，当我在按钮上显示“搜索”时单击按钮时，它仍然执行的操作是在显示“激活”时执行的操作。

这是我使用的函数，它被文本框的 OnKeyDown 和 OnPaste 事件调用：

```
function changeButtonText(){
    var elem = document.getElementById("btnactivate");
    if (elem.value=="Activate")
    elem.value = "Search";} 
```

我想知道为什么会这样。显然，该按钮已显示“搜索”。我不明白为什么代码隐藏似乎无法识别按钮文本的变化。顺便说一句，当我再次单击该按钮时，它会执行“搜索”的操作。我很困惑。帮助！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-03T07:19:28.330

任何仅与输入类型相关的 http 回传信息，标签信息从不发布。如果您想在服务器端获取它们，请使用隐藏字段在您的 javascript 中更新 FORM 标记的隐藏字段部分的值，然后在服务器端检查其值并执行您想做的事情

# android - 在 Android 上使用 Google Play 进行的购买的 Google 收据格式

> ID：15781061
> 
> 赞同：1
> 
> 时间：2013-04-03T07:14:56.123
> 
> 标签：android, in-app-purchase, in-app-billing

我正在尝试在我的应用程序中实现应用程序购买。我正在尝试使用测试 ID 来检查流程。

当我`android.test.purchased`作为商品 SKU 购买时，我收到以下回复作为购买

```
{"packageName":"com.sample.goo","orderId":"transactionId.android.test.purchased","productId":"android.test.purchased","developerPayload":"PRODUCT_SKU_AND_USER_ID_AND_DATE","purchaseTime":0,"purchaseState":0,"purchaseToken":"inapp:com.sample.goo:android.test.purchased"} 
```

但是在很多地方我发现谷歌返回的数据格式如下

```
{
    "nonce": 1165723044405495300,
    "orders": [
        {
            "notificationId": "android.test.purchased",
            "orderId": "transactionId.android.test.purchased",
            "packageName": "com.company.appname",
            "productId": "android.test.purchased",
            "purchaseTime": 1335874740360,
            "purchaseState": 0
        }
    ]
} 
```

我不确定为什么我没有收到上述格式的回复。

谁能告诉我这里有什么问题？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-16T11:53:36.543

如果您在应用计费中使用谷歌的 V3 API，您收到的响应是正确的。v3 和 v2 响应的明显差异是

1.  v3 没有发送/接收随机数。
2.  v3 具有新参数“开发者有效负载”，除了 purchaseID 之外，它还用于唯一标识购买。

# dll - 从vc6切换到mingw

> ID：15781075
> 
> 赞同：0
> 
> 时间：2013-04-03T07:15:27.083
> 
> 标签：dll, mingw

两个（相当旧的）库是用 C 编写的，最初是用 MSVC 6 编译的。我想改变它并开始使用 mingw。

编辑：该库看起来正在使用 __stdcall 调用约定。

因此，首先构建库“a”，然后通过 MSVC 6 生成包含 a.def 的 a.lib 和 a.dll。然后构建库 b 并使用库：a.lib。

我成功地用mingw构建了a.dll。但我不知道如何构建一个.lib 文件？另一个要求是我需要完全使用 MinGW 工具或其他（免费）解决方案来完成这项工作。

另一个问题是，如果我们假设代码完全用 C 语言完成，mingw 库会与 msvc 混合搭配吗？谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-03T18:50:29.080

MinGW 可以做而 MSVC 不能做的一件事是直接链接到 DLL - 换句话说，MinGW 不需要导入库。只需将 DLL 作为输入传递给 MinGW 链接器，这应该与使用导入库一样好。

通常，无论是由哪个工具创建的，MSVC 或 MinGW 都应该可以使用 C 语言 DLL 导出。但是，有些极端情况可能无法正常工作。在我的脑海中，ABI 在如何返回结构方面存在一些差异，并且在处理某些浮点类型的方式上可能存在一些差异。我遇到的大多数 DLL API 都不做这些事情，但可能还有其他一些我没有考虑或意识到的极端情况。

# mysql - Mysql Indexing 无法用于哪种数据类型

> ID：15781080
> 
> 赞同：0
> 
> 时间：2013-04-03T07:15:41.067
> 
> 标签：mysql

哪些数据类型不能索引？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-03T07:24:30.293

适合放在桌子上的所有东西都是可能的

您应该问的问题是，对于哪些数据类型使用索引是不明智的。您不搜索的大文本我不会添加索引。大位填充字段我不会在任何一个上使用索引...

通常，您会在整数、tinyint、bigint、varchar 等上使用索引……这些小型数据类型不需要太多的处理能力来相互比较。

# iphone - 视频缓冲实现

> ID：15781081
> 
> 赞同：1
> 
> 时间：2013-04-03T07:15:43.963
> 
> 标签：iphone, objective-c, ipad, iphone-5

我已经`Custom Video Player`在我的应用程序中实现了用于播放在线视频的功能，现在我想实现视频缓冲功能，我正在寻找它但没有得到正确的解决方案。

所以任何人都可以指导我。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-03T07:57:22.670

查看 AVPlayer + AVPlayerLayer 类。

使用视频的 URL 加载 AVPlayer。

在调用播放方法之前给它一些时间来缓冲视频，可能是这样的：

```
[self performSelector:@selector(play:) withObject:nil afterDelay:10.0]; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-09T11:20:29.843

我认为**MPMoviePlayerController**默认支持流媒体功能。你为什么不试试呢。

# android - 现有数据库不支持外键

> ID：15781084
> 
> 赞同：1
> 
> 时间：2013-04-03T07:15:44.433
> 
> 标签：android, sqlite

虚拟应用程序：我创建了一个包含 20 个表的 sqlite 数据库并启用了外键功能（`"PRAGMA foreign_keys = ON"`）。该数据库通过 Assests 文件夹用于另一个应用程序，我的问题是不支持外键。

前任。`CREATE TABLE Student(Studend_id Integer not null,student_name String, FOREIGN KEY ((Studend_id ) REFERENCES Dept(Deptid));`

```
CREATE TABLE Dept(Deptid Integer not null,dept_name String) 
```

部门表数据是

```
Deptid   dept_name
500      cse
400      ece 
```

在虚拟应用程序中，我尝试在学生中添加列，它抛出异常外键被错误捣碎

```
insert into student(300,"sri"); 
```

我尝试在我的应用程序中执行的相同查询它不会引发任何异常，并且在此处添加列不支持外键。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-03T07:20:30.483

在您的情况下，学生表引用 Dept 表的 deptid 列。如您所见，Dept 表的 deptid 列没有值 300。

```
Deptid   dept_name
500      cse
400      ece 
```

由于 dept 表中没有值 300，因此您无法插入新记录。您的学生表依赖于 Dept 表的值。如果你

```
Deptid   dept_name
500      cse
400      ece
300      eee 
```

那么它会起作用的。我的意思是你不能在学生表中创建一个不存在于部门表中的值。希望这可以帮助。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-03T09:48:57.780

`PRAGMA foreign_keys`仅适用于当前连接。

您不能为不受您控制的其他应用程序启用外键。

# jquery - 在溢出 div 中滚动选择区域

> ID：15781086
> 
> 赞同：0
> 
> 时间：2013-04-03T07:15:46.147
> 
> 标签：jquery, html

我创建了一个 div，其中包含一个图像，其父 div 可滚动。But when selecting area for cropping it does not scroll the child div. 任何人都可以提出解决方案吗？*使用 imageareaselect.min

```
<div style=" width:500px; height:300px; overflow:auto;">
    <div  style=" width:1024px; height:600px ;" >
        <img  src="abc.jpg" style=" box-shadow:3px 0px 12px rgb(192, 192, 192);" id="thumbnail" alt="Create Thumbnail">
    </div>
</div> 
```

这是用于调用选择功能的jquery

```
$(function(){
    $('#thumbnail').imgAreaSelect({ aspectRatio: '1:0.8228571428571428', onSelectChange: preview }); 
}); 
```

选择区域超出 div 而不是溢出

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-03T09:37:34.690

设置`position:absolute;`为第一个 div 并添加一个`id`

```
<div id="container" style="width:500px; height:300px; overflow:auto;position:absolute;">
    <div  style=" width:1024px; height:600px ;" >
        <img  src="abc.jpg" style=" box-shadow:3px 0px 12px rgb(192, 192, 192);" id="thumbnail" alt="Create Thumbnail">
    </div>
</div> 
```

然后在 imgAreaSelect 选项中添加`id`第一个 div 作为`parent`

```
$(function(){
    $('#thumbnail').imgAreaSelect({ aspectRatio: '1:0.8228571428571428', onSelectChange: preview, parent: '#container' }); 
}); 
```

[请参阅 JS Fiddle 中的示例](http://jsfiddle.net/Spokey/w9j3d/1/)

希望这就是你要找的

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-05-10T15:23:27.850

我将每个实例更改`fixed`为`absolute`in `jquery.imgareaselect.min.js`，然后它在`position:relative`具有`overflow:auto`.

# c# - WPF 中 Button.Content 上的 System.InvalidOperationException

> ID：15781088
> 
> 赞同：0
> 
> 时间：2013-04-03T07:15:59.717
> 
> 标签：c#, wpf

可能是一件愚蠢的事情，但我无处找到答案......

我的 C# WPF 项目中有以下代码：

```
string timer = "5:00"; 
Button.Content = timer; 
```

`System.InvalidOperationException`一旦代码执行达到这一点，它就会给我。在此代码的另一个函数中，它也不起作用`Button.Content = "5:00";`但很有趣

```
string newLabel = Math.Floor(timerSec / 60f).ToString() + ":" + (timerSec % 60).ToString("0#");
Button.Content = newLabel; 
```

工作得很好。我错过了什么？

 `**//edit：**这个问题会引起混淆，因为它是伪代码，我放的时候没有想太多。这是按钮的实际定义方式：

```
<Viewbox Grid.Row="1" Grid.Column="0">
     <Button x:Name="_5v5OwnBlueButton" Content="5:00" Margin="5" />
</Viewbox> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-03T07:29:47.627

你在使用线程吗？

试试这个：

```
string timer = "5:00"; 
     this.Dispatcher.Invoke(DispatcherPriority.Normal, (Action) () => 
            {

              Button.Content = timer;
            }); 
````

# jquery - 如果所选的 div 具有相同的 ID ，则禁用单击

> ID：15781093
> 
> 赞同：0
> 
> 时间：2013-04-03T07:16:15.813
> 
> 标签：jquery, class, unbind, disable-link

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-03T07:19:39.047

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-03T07:23:38.050

这将为所有 A 标签添加一个禁用的类，其中它们的 href 与具有所选类的任何元素的 id 匹配：

```
$(function() {
    $("a").removeClass('disabled');
    $('.selected').each(function() {
        $('a[href=#' + $(this).attr('id') + ']').addClass('disabled');
    });

// If by 'disabled', you mean you want the link not to work, then add this:

    $('a.disabled').on('click',function(e) {
        alert('you can\'t do that');
        e.preventDefault();
        return false;
    });
}); 
```

**这里的例子**：http : [//jsfiddle.net/dtxan/4/](http://jsfiddle.net/dtxan/4/)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-03T07:24:17.373

像这样的东西应该工作。

```
$(".selected").each(function() {
    $('a[href="#' + $(this).attr("id") + '"]').click(function(e) {
        e.preventDefault();
    })
}) 
```

# java - 如何将字节数组写入和读取到 DataInput 和 DataOutput Stream

> ID：15781095
> 
> 赞同：4
> 
> 时间：2013-04-03T07:16:17.043
> 
> 标签：java, hadoop, bytearray, hbase, datainputstream

Hbase 充当我的 Map reduce 作业的源和汇。我已经编写了名为 (vector writable) 的自定义可写类，它有两个字段。

```
private DoubleVector vector; // It is a Double Array
private byte[] rowKey;       // The row key of the Hbase 
```

我的映射器将此作为其值发出，因此我在我的 vectorWritable 类中实现了写入和读取方法

```
 @Override
   public final void write(DataOutput out) throws IOException {
   writeVectorCluster(this.vector, this.rowKey, out);       
   }

   @Override
   public final void readFields(DataInput in) throws IOException {
   this.vector = readVector(in);
   this.rowKey = readRowKey(in);
   } 

public static void writeVectorCluster(DoubleVector vector, byte[] rowkey, DataOutput out)
            throws IOException {
        out.writeInt(vector.getLength());
            for (int i = 0; i < vector.getDimension(); i++) {
                out.writeDouble(vector.get(i));
            }
            int length = rowkey.length;
            out.writeInt(length);

           //Is this the right way ?
            out.write(rowkey);
        }

public static DoubleVector readVector(DataInput in) throws IOException {
        int length = in.readInt();
        DoubleVector vector = null;
            vector = new DenseDoubleVector(length);
            for (int i = 0; i < length; i++) {
                vector.set(i, in.readDouble());
            }
        return vector;
    }

   @SuppressWarnings("null")
    public static byte[] readRowKey(DataInput in) throws IOException {
        int length = in.readInt();
        byte [] test = null;
            for (int i = 0; i < length; i++) {
                // getting null pointer exception here
                test[i] = in.readByte();
            }
        return test;
    } 
```

当我尝试从输入流中读取 rowKey 时，我得到了 NullPointerException。readVector 方法虽然工作正常，但我得到了正确的值。

如何在 DataInput Stream 中写入字节数组，以便在输出流中检索它

***更新：***已解决 这是我的 rowKey 方法的更新，它工作正常。谢谢@Perception

```
public static byte[] readRowKey(DataInput in) throws IOException {  
        int length = in.readInt();
        byte[] theBytes = new byte[length];
        in.readFully(theBytes); 
        return theBytes;
    } 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-03T07:38:32.703

您没有初始化字节数组：

```
byte [] test = null; 
```

应该：

```
byte [] test = new byte[length]; 
```

# android - Android adapter.getItem(position).getItemId() 不工作（方法 getId() 未定义对象类型）

> ID：15781099
> 
> 赞同：4
> 
> 时间：2013-04-03T07:16:35.040
> 
> 标签：android, android-listview, listviewitem, android-adapter

我有一个列表视图，我正在使用自定义适配器将数据填充到列表视图表单数据库中。它工作正常，但是当我单击列表项时，我想获取被单击的项的 ID，以将其传递给下一个活动以做一些事情。但是当我单击列表项时，我无法获取 ID。知道为什么会这样吗？

我的列表监听器：

```
 list.setOnItemClickListener(new OnItemClickListener() {

                @Override
                public void onItemClick(AdapterView<?> a, View view, int position,
                        long id) {

                    Intent intent = new Intent(MainActivity.this,
                            CountryActivity.class);
                     intent.putExtra("countryId", adapter.getItem(position).getId());//here i am getting error saying 
          //The method getId() is undefined for the type Object.

                    startActivity(intent);

                }
            }); 
```

但是我已经为类型规范定义了我的 countries.java (POJO)

```
public class Countries {
    Integer id;
    String countryName = "", countryIcon = "";

    public Countries(Integer id, String countryName, String countryIcon) {

        this.id = id;
        this.countryName = countryName;
        this.countryIcon = countryIcon;
    }

    public Integer getId() {
        return id;
    }

    public void setId(Integer id) {
        this.id = id;
    }

    public String getCountryName() {
        return countryName;
    }

    public void setCountryName(String countryName) {
        this.countryName = countryName;
    }

    public String getCountryIcon() {
        return countryIcon;
    }

    public void setCountryIcon(String countryIcon) {
        this.countryIcon = countryIcon;
    }

} 
```

我正在从以下代码中从游标 obj（签证）中获取数据：

```
names = new ArrayList<Countries>();
        do {

            country = new Countries(Integer.parseInt(visas.getString(0)),
                    visas.getString(1), visas.getString(2));

            // Log.d("VISA", visas.getString(0));

            names.add(country);

        } while (visas.moveToNext()); 
```

这是我的适配器代码：

```
public class VisaAdapter extends ArrayAdapter<Countries> {
    private final Context context;
    private final ArrayList<Countries> values;
    Resources resc = getContext().getResources();

    public VisaAdapter(Context context, ArrayList<Countries> values) {
        super(context, R.layout.list_item, values);
        this.context = context;
        this.values = values;
    }

    @Override
    public Countries getItem(int position) {
        return values.get(position);
    }

    @Override
    public long getItemId(int position) {
        return position;
    }

    @Override
    public View getView(int position, View convertView, ViewGroup parent) {
        LayoutInflater inflater = (LayoutInflater) context
                .getSystemService(Context.LAYOUT_INFLATER_SERVICE);

        View rowView = inflater.inflate(R.layout.list_item, parent, false);
        TextView textView = (TextView) rowView.findViewById(R.id.label);
        ImageView imageView = (ImageView) rowView.findViewById(R.id.logo);
        textView.setText(values.get(position).getCountryName());

        // Change icon based on name
        String icon = values.get(position).getCountryIcon();
        int resIcon = resc.getIdentifier(icon, "drawable", "com.m7.visaapp");

        rowView.setBackgroundResource(R.drawable.list_view_places_row);

        imageView.setImageResource(resIcon);

        return rowView;
    }

} 
```

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2013-04-03T07:21:46.003

您必须将`getItem(position)`返回值转换为`Countries`对象。

改变这个：

```
 intent.putExtra("countryId", adapter.getItem(position).getId()); 
```

对此：

```
 Countries countries = (Countries)adapter.getItem(position);
    intent.putExtra("countryId", countries.getId()); 
```

* * *

**更新**：

实际上，在阅读了@Tushar 的评论后，我认为您应该制作`names`a`VisaAdapter`而不是`ArrayList<Countries>()`. 然后，您上面的原始代码行应该按原样工作。

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2013-04-03T07:24:31.897

```
adapter.getItem(position) 
```

函数返回一个`Object`so 类型，将其转换为 Country like

```
(Countries)adapter.getItem(position) 
```

# android - BB10 中的推送通知

> ID：15781101
> 
> 赞同：1
> 
> 时间：2013-04-03T07:16:39.373
> 
> 标签：android, push-notification, blackberry-10

我正在将 Android 应用程序移植到 BlackBerry10。我已经在 Blackberry Developer 网站上查看了[本教程。](http://developer.blackberry.com/android/apisupport/creating_push-enabled_android_apps.html)他们在那里只提供模糊的信息。

我的疑问之一是是否在 GCM 或 BB Cloud 上进行服务器注册。如果是 BB Cloud，我在哪里可以找到相同的代码？

其次，对于 android，我可以通过使用 a`GCMIntenetService`并指定`com.google.android.gcm.GCMBroadcastReceiver`为接收者来接收通知。这对于黑莓的实现有何不同？

任何朝着正确方向的帮助都会有所帮助。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-03T07:39:49.723

您必须在 BB 基础设施中注册您的应用才能在黑莓设备上接收通知

[这是注册链接，](https://www.blackberry.com/profile/?eventId=8121)黑莓最多需要 6 天时间才能回复您的请求，他们还会为您提供应用程序 ID 和其他一些相关文档

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2014-08-27T11:55:27.297

您应该将 GCMBaseIntenetService 与 GCMRegisterar 一起使用。我已经成功移植了在 BB10 中启用的 Android 推送通知。如需进一步帮助，我将提供。

# javascript - 如何创建拖放区来上传 Gmail 等文件？

> ID：15781102
> 
> 赞同：2
> 
> 时间：2013-04-03T07:16:42.617
> 
> 标签：javascript, html, file-upload, drag-and-drop

在 Gmail 中，在撰写电子邮件时，如果您将文件拖到撰写区域（编辑器）以附加文件，则撰写区域将变为*拖放*区域以上传文件。

我想知道如何做以下事情：

> 当用户将文件拖到元素上时，如何将 HTML 元素变成拖放文件上传区域？

无需将元素转到拖放文件上传区域。但是可以有另一个 HTML 元素，它用作拖放文件上传区域，当用户将文件拖到第一个元素上时，它需要出现在第一个元素的顶部。所以，我需要知道如何知道用户何时拖动文件并将其移动到任何 html 元素上。这就像`mouseover`拖动文件的事件。这是什么活动？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-03T07:18:59.903

有一个 jQuery 插件可以让你拖放要上传的文件... Look for [jQuery File Upload Demo](http://blueimp.github.com/jQuery-File-Upload/)

为了做你想做的事，你必须添加`mouseIn`事件处理，并且在事件中，这样做：

```
function draggingIn(e) {

   var count =  e.dataTransfer.files.length; (like Chamika Sandamal function)

   if (count > 0) {
        //A file is dragged
        $('droppable').addClass('showBox');
   }
} 
```

对于最近的浏览器，您可以使用 HTML5 可拖动功能，[请参见此处](http://www.whatwg.org/specs/web-apps/current-work/multipage/dnd.html)

它看起来像这样：[小提琴](http://jsfiddle.net/WUGBV/10/)我做了一些测试，只是寻找拖动事件

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-03T07:18:59.307

你有没有自己尝试过，也许是谷歌？[html5demos.com 上的示例](http://html5demos.com/dnd-upload)

* * *

## 回答 #3

> 赞同：-3
> 
> 时间：2014-08-11T14:06:13.080

请参考此站点，因为 Gmail 拖放是在此概念中完成的。

[https://developer.mozilla.org/en-US/docs/Web/Events/drag](https://developer.mozilla.org/en-US/docs/Web/Events/drag)

[https://developer.mozilla.org/en-US/docs/Web/Events/drop](https://developer.mozilla.org/en-US/docs/Web/Events/drop)

如果您有任何疑问，可以在下面发布

# vb.net - 为动态创建的控件设置修饰符

> ID：15781105
> 
> 赞同：0
> 
> 时间：2013-04-03T07:16:49.307
> 
> 标签：vb.net, winforms, access-modifiers

我`controls`在运行时创建了一些，如下所示：

```
pnl1.Controls.Add(New TextBox() With _
{
    .Name = "ItemName", _
    .Anchor = AnchorStyles.Left + AnchorStyles.Right _
} 
```

我试图将其修饰符设置为`Public`. 不幸的是，我所有的尝试都失败了。
我的问题是：我们可以为动态创建的控件设置修改器吗？

如果没有，那么我如何访问`controls`other 中的那些`forms`？（**例如：** `Form1`具有动态创建的控件`ctrl1`，`Form2`它存在于 of`MDI container`中`Form1`）。

我如何`ctrl1`访问`Form2`？（如果不为in设置`public`修饰符，我们无法像这样访问它）`ctrl1``form1``Form2``me.parentform.ctrl1`

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-03T07:37:22.840

您缺少访问修饰符在编译时而不是在运行时描述表单的类。访问修饰符不是安全机制！

例如`TextBox`在表单中添加 3 个 es。给他们访问修饰符`Private`，现在创建一个表单实例并运行以下代码：

```
Dim form as Form1

For Each c As Control In form.Controls
    MessageBox.Show(c.Name) 
```

你会得到 3 个`MessageBox`es，告诉你 3 个 es 的名字`TextBox`，即使它们的访问修饰符是`Private`. 不同之`Public`处在于您不能编写这样的代码：

```
MessageBox.Show(form.TextBox1.Name) 
```

您不能以这种方式访问​​类的私有*成员*。但是，*成员*在编译时可用。它们与类一起声明。在这种情况下，它们简化了对`Control`.

在运行时向窗体添加控件**不会**在类中创建新成员！它不能，因为你的类必须被修改、重新编译、重新实例化等等。

**结论**：

1.  声明您的成员`Private`不会阻止对象访问它们封装的控件。
2.  在运行时创建控件不会影响类。
3.  您可能正在寻找像[MVC](http://en.wikipedia.org/wiki/Model_View_ViewModel)或[MVVM](http://en.wikipedia.org/wiki/Model%E2%80%93view%E2%80%93controller)这样的设计模式。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-03T07:36:39.817

如果不是动态的，Visual Studio 默认将控件设置为`Friend With Events`，在 Vb.NET 中，在添加到表单之前声明它们。您也可以这样做，声明一个 Public `List(Of Control)`（例如）并在动态创建控件时在其中添加控件。

或者更好的是，a`Dictionary(Of String, Control)`通过其名称访问控件。

或者您可以从表格中获取它们。使用`Form1.Controls`您可以访问表单中的所有控件。如果您的控件位于另一个控件内，则需要访问该控件内的控件，例如：

```
Dim btn As Label = Ctype(Form1.Controls("GroupBox1").Controls("Label1"), Label) 
```

# java - DataNucleus / Kundera 与 HBase 和 ElementCollection - 无法找到具有空 id 的对象

> ID：15781113
> 
> 赞同：0
> 
> 时间：2013-04-03T07:17:24.037
> 
> 标签：java, sql, hbase, datanucleus, kundera

首先，我使用 HBase 0.94.5（也尝试了 0.92.2，结果相同）。

我有这样的情况：

**变量类：**

```
@Entity
@Table(name = "variable", schema = "keyspace@hbase-pu")
public class Variable {
    @Id
    private String Id;

    @Column(name = "Name")
    private String Name;

    @ElementCollection(fetch = FetchType.EAGER)
   //@CollectionTable(name = "datavalues") // Doesn't work with or without.
    private List<DataValue> DataValues;

    // Getters and setters omitted.
} 
```

**数据值类：**

```
@Embeddable
public class DataValue {
    @Column(name = "Value")
    private Object Value;

    // Getters and setters omitted.
} 
```

现在，存储它完全没有问题，但是当我想取回它时，炸药爆炸了。抛出此异常：

**原因：org.datanucleus.exceptions.NucleusUserException：无法找到具有空 id 的对象！**

```
Exception in thread "main" javax.persistence.PersistenceException: Unable to find the object with a null id!
    at org.datanucleus.api.jpa.NucleusJPAHelper.getJPAExceptionForNucleusException(NucleusJPAHelper.java:414)
    at org.datanucleus.api.jpa.JPAQuery.getResultList(JPAQuery.java:203)
    at Main.main(Main.java:73)
Caused by: org.datanucleus.exceptions.NucleusUserException: Unable to find the object with a null id!
    at org.datanucleus.ExecutionContextImpl.findObject(ExecutionContextImpl.java:3441)
    at org.datanucleus.store.hbase.fieldmanager.FetchFieldManager.fetchObjectField(FetchFieldManager.java:287)
    at org.datanucleus.state.JDOStateManager.replacingObjectField(JDOStateManager.java:2178)
    at Variable.jdoReplaceField(Variable.java)
    at Variable.jdoReplaceFields(Variable.java)
    at org.datanucleus.state.JDOStateManager.replaceFields(JDOStateManager.java:3415)
    at org.datanucleus.state.JDOStateManager.replaceFields(JDOStateManager.java:3442)
    at org.datanucleus.store.hbase.query.HBaseQueryUtils$2.fetchFields(HBaseQueryUtils.java:270)
    at org.datanucleus.state.JDOStateManager.loadFieldValues(JDOStateManager.java:2547)
    at org.datanucleus.state.JDOStateManager.initialiseForHollow(JDOStateManager.java:298)
    at org.datanucleus.state.ObjectProviderFactoryImpl.newForHollow(ObjectProviderFactoryImpl.java:89)
    at org.datanucleus.ExecutionContextImpl.newObjectProviderForHollowPopulated(ExecutionContextImpl.java:1237)
    at org.datanucleus.ExecutionContextImpl.findObject(ExecutionContextImpl.java:3053)
    at org.datanucleus.store.hbase.query.HBaseQueryUtils.getObjectUsingApplicationIdForResult(HBaseQueryUtils.java:265)
    at org.datanucleus.store.hbase.query.HBaseQueryUtils.getObjectsOfType(HBaseQueryUtils.java:194)
    at org.datanucleus.store.hbase.query.HBaseQueryUtils.getObjectsOfCandidateType(HBaseQueryUtils.java:93)
    at org.datanucleus.store.hbase.query.JPQLQuery.performExecute(JPQLQuery.java:327)
    at org.datanucleus.store.query.Query.executeQuery(Query.java:1786)
    at org.datanucleus.store.query.Query.executeWithMap(Query.java:1690)
    at org.datanucleus.api.jpa.JPAQuery.getResultList(JPAQuery.java:186)
    ... 1 more 
```

这是因为 ElementCollection，因为当我删除它时，它会从 HBase 中完美地检索变量类。我还尝试了 Kundera 2.4（相同的示例代码），它比这个 DataNucleus 'enhance' 的东西更容易设置，但它会抛出一些带有 Stream 异常的东西。这两个站点都显示了类似于我上面的代码的代码示例，所以我很好奇我在这里做错了什么。

相关pom.xml：

```
 <dependency>
        <groupId>org.apache.geronimo.specs</groupId>
        <artifactId>geronimo-jpa_2.0_spec</artifactId>
        <version>1.1</version>
    </dependency>

    <dependency>
        <groupId>javax.jdo</groupId>
        <artifactId>jdo-api</artifactId>
        <version>3.0</version>
    </dependency>

   <dependency>
        <groupId>org.datanucleus</groupId>
        <artifactId>datanucleus-core</artifactId>
        <version>3.2.1</version>
    </dependency>
    <dependency>
        <groupId>org.datanucleus</groupId>
        <artifactId>datanucleus-api-jpa</artifactId>
        <version>3.2.0-release</version>
    </dependency>
    <dependency>
        <groupId>org.datanucleus</groupId>
        <artifactId>datanucleus-hbase</artifactId>
        <version>3.2.0-release</version>
    </dependency>
    <dependency>
        <groupId>org.datanucleus</groupId>
        <artifactId>datanucleus-enhancer</artifactId>
        <version>3.1.1</version>
    </dependency>
    <dependency>
        <groupId>javax.persistence</groupId>
        <artifactId>persistence-api</artifactId>
        <version>2.0</version>
    </dependency>
    <dependency>
        <groupId>org.apache.hadoop</groupId>
        <artifactId>hadoop-core</artifactId>
        <version>1.1.2</version>
        <exclusions>
            <exclusion>
                <groupId>org.codehaus.jackson</groupId>
                <artifactId>jackson-mapper-asl</artifactId>
            </exclusion>
            <exclusion>
                <groupId>org.codehaus.jackson</groupId>
                <artifactId>jackson-core-asl</artifactId>
            </exclusion>
        </exclusions>
    </dependency>
    <dependency>
        <groupId>org.apache.hbase</groupId>
        <artifactId>hbase</artifactId>
        <version>0.94.5</version>
    </dependency>

        <plugin>
            <groupId>org.datanucleus</groupId>
            <artifactId>datanucleus-maven-plugin</artifactId>
            <version>3.2.0-release</version>
            <configuration>
                <api>JPA</api>
                <persistenceUnitName>hbase-pu</persistenceUnitName>
                <verbose>true</verbose>
            </configuration>
            <executions>
                <execution>
                    <phase>process-classes</phase>
                    <goals>
                        <goal>enhance</goal>
                    </goals>
                </execution>
            </executions>
        </plugin> 
```

DataNucleus 的persistance.xml：

```
 <persistence xmlns="http://java.sun.com/xml/ns/persistence"
             xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
             xsi:schemaLocation="http://java.sun.com/xml/ns/persistence
        http://java.sun.com/xml/ns/persistence/persistence_2_0.xsd" version="2.0">

    <!-- JPA tutorial "unit" -->
    <persistence-unit name="hbase-pu" transaction-type="RESOURCE_LOCAL">
        <provider>org.datanucleus.api.jpa.PersistenceProviderImpl</provider>
        <class>Variable</class>
        <class>DataValue</class>
        <exclude-unlisted-classes>true</exclude-unlisted-classes>
        <properties>
            <property name="datanucleus.storeManagerType" value="hbase" />
            <property name="datanucleus.ConnectionURL" value="hbase:localhost:2281"/>
            <property name="datanucleus.ConnectionUserName" value=""/>
            <property name="datanucleus.ConnectionPassword" value=""/>
            <property name="datanucleus.autoCreateSchema" value="true"/>
            <property name="datanucleus.autoCreateTables" value="true" />
            <property name="datanucleus.autoCreateColumns" value="true" />
            <property name="datanucleus.validateTables" value="true"/>
            <property name="datanucleus.validateConstraints" value="false"/>
            <property name="datanucleus.Optimistic" value="false"/>
            <property name="datanucleus.Multithreaded" value="true" />
        </properties>
    </persistence-unit>
</persistence> 
```

昆德拉的persistence.xml：

```
<persistence xmlns="http://java.sun.com/xml/ns/persistence"
xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
xsi:schemaLocation="http://java.sun.com/xml/ns/persistence
https://raw.github.com/impetus-opensource/Kundera/Kundera-2.0.4/kundera-core/src/test/resources/META-INF/persistence_2_0.xsd"
version="2.0">
 <persistence-unit name="hbase-pu">
        <provider>com.impetus.kundera.KunderaPersistence</provider>
        <properties>
            <property name="kundera.nodes" value="localhost" />
            <property name="kundera.port" value="2182" />
            <property name="kundera.keyspace" value="keyspace" />
            <property name="kundera.dialect" value="hbase" />
            <property name="kundera.client.lookup.class" value="com.impetus.client.hbase.HBaseClientFactory" />
        <property name="kundera.cache.provider.class" value="com.impetus.kundera.cache.ehcache.EhCacheProvider" />
        <property name="kundera.cache.config.resource" value="/ehcache-test.xml" />
        <property name="kundera.ddl.auto.prepare" value="update" />
        </properties>
    </persistence-unit>
</persistence> 
```

我在这整个事情上有点空白，我有一种感觉，我现在几乎尝试了所有东西，但不知道如何继续。

——见下面的评论。

**新变量类：**

```
@Entity
@Table(name = "variable", schema = "keyspace@hbase-pu")
public class Variable {
    @Id
    private String Id;

    @Column(name = "Name")
    private String Name;

    @ElementCollection(fetch = FetchType.EAGER) 
    private List<Object> DataValues;

    @Column(name = "Value")
    @Lob
    private Object Value;
    // Getters and setters omitted.
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-03T07:42:03.213

所以你想要一个嵌入式集合？但是正如[这个页面清楚地显示的](http://www.datanucleus.org/products/accessplatform_3_2/datastores/datastore_features.html)那样，目前 HBase 不支持此功能（支持 MongoDB，但它具有更灵活的数据存储结构来允许它）。您可以拥有一个非实体集合（与所有者保持在同一个 HTable 中），并且您可以拥有一个（非嵌入式）实体集合，但不能拥有嵌入式集合。显然，如果这对您很重要，您可以贡献您的时间来提供支持（我什至会在代码中为您提供要查看的起点）。

没有理由为什么“CollectionTable”应该有所作为......它是 RDBMS 的模式注释（但 JPA 是专门为 RDBMS 设计的）。

PS 1，这个“增强的东西”就像在 pom.xml 中添加“插件”块一样简单。因此，除非您准备向 DataNucleus 项目表达您对它的困难是*什么*，否则他们怎么会知道它。

PS 2，如果报告问题，无论涉及什么软件，我都希望您显示异常+堆栈跟踪，因为从异常消息中您告诉人们的信息很少。

# stored-procedures - 从 sqlserver 中的另一个过程调用一个过程

> ID：15781114
> 
> 赞同：0
> 
> 时间：2013-04-03T07:17:24.527
> 
> 标签：stored-procedures

我有 2 个过程 procgetid，insertmarks.procgetid 返回一个 int 值，该值将在 insertmarks 过程中使用

`code in procgetid procedure`：

```
ALTER procedure [dbo].[procgetid](@sid int output)
as  
begin
select @sid=(select isnull(max(id),0)+100 from test2);
return @sid
end 
```

`code in insertmarks procedure`：

```
ALTER procedure [dbo].[insertmarks](@sub1 int,@sub2 int,@sub3 int)
as 
declare @student_id int
begin
exec @student_id = procgetid
insert into marks values(@sub1,@sub2,@sub3,@student_id)
end 
```

执行 insertmarks 过程时出现错误“无法将值 NULL 插入到列‘student_id’，列不允许空值。插入失败。”

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-03T11:45:36.063

```
ALTER procedure [dbo].[insertmarks](@sub1 int,@sub2 int,@sub3 int)
as 
declare @student_id int 
```

开始 **设置@student_id = exec [schemaname].procgetid**
插入标记值(@sub1,@sub2,@sub3,@student_id) end

# javascript - android上的Device Motion API应该可以工作

> ID：15781116
> 
> 赞同：0
> 
> 时间：2013-04-03T07:17:31.640
> 
> 标签：javascript, android, html, accelerometer

出于某种原因，当使用 Galaxy S3 时，我可以使用 HTML5Rocks 中关于 Device Motion 的示例演示，并从手机硬件中获取加速度值。

演示：[http ://www.html5rocks.com/en/tutorials/device/orientation/devicemotionsample.html](http://www.html5rocks.com/en/tutorials/device/orientation/devicemotionsample.html)

但我似乎无法让代码在我自己的网站上运行。它应该只是：

```
if((window.DeviceMotionEvent)||('listenForDeviceMovement'in window))    
{window.addEventListener('devicemotion',deviceMotionHandler3,false);

function deviceMotionHandler3(eventData){var     
acceleration=eventData.accelerationIncludingGravity; 
```

...

任何想法为什么此代码适用于上述网站，但当我将其复制到空白 html 页面时却不行？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-05T20:26:21.113

您确定您正在测试的设备支持检测设备运动吗？

您是否从移动设备浏览器访问网页？

当我单击您从我的 PC 提供的链接时，我被告知该设备不支持设备运动事件。

# iphone - 启用 Guard Malloc 时 UIImagePNGRepresentation 中的 EXC_BAD_ACCESS 错误

> ID：15781119
> 
> 赞同：4
> 
> 时间：2013-04-03T07:17:40.170
> 
> 标签：iphone, ios, malloc, exc-bad-access, uiimagepngrepresentation

当启用 Guard Malloc 时，我在 UIImagePNGRepresentation() 处收到**EXC_BAD_ACCESS 错误，**当我禁用时，我在转换图像时没有收到任何错误。我已经通过谷歌寻求解决方案，但我没有找到任何可行的解决方案。下面是代码。

```
UIImage  *image, *newImage;
NSData *imageData = [NSData dataWithContentsOfFile:@"somepath"];
            image = [UIImage imageWithData:imageData];
NSData* data = nil;
        data = UIImagePNGRepresentation(image);
        // write to temp directory and return URI
        NSString* docsPath = [NSTemporaryDirectory ()stringByStandardizingPath];
// more code 
```

这是 phonegap 插件代码的一部分，任何建议都非常有帮助。谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-05-29T04:22:20.807

信息不足。但我可以给你一个提示，一些委托或财产被取消分配。将其定义为强

如果您可以为您提供堆栈跟踪，它将更有帮助。

祝你好运

# mysql - MySQL - 通过查询值不同的共享值从两行中选择

> ID：15781120
> 
> 赞同：1
> 
> 时间：2013-04-03T07:17:41.693
> 
> 标签：mysql, sql

很难说这个。让我解释。我有几张桌子：teams、games 和 team_games。Team_games 有一个默认为 0 的“站立”字段。如果站位大于 0，则游戏结束并报告分数。**我正在尝试提出一个查询，该查询将采用两个团队 ID，并计算他们在排名大于零的情况下共有的游戏数量。**

这是桌子。到目前为止，除了我想要的，我什么都做了。

```
Teams
---------------------
team_id     team_name
---------------------
   1          Test
   2         Test 2

Games
---------------------
game_id    start_time
---------------------
   1         (unix)
   2           -
   3           -

Team Games
---------------------------------
game_id     team_id      standing
---------------------------------
   1           1             1
   1           2             2
   2           1             2
   2           2             1
   3           1             1
   3           2             2 
```

**因此，我想只捕获 team_id 为 1 或 2 且游戏 ID 相同的行，然后计算唯一游戏 ID。**

因此，如果我要查找第一队和第二队之间完成的比赛数量，最终结果将是：

```
-----
COUNT
-----
  3 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-03T07:31:24.563

```
SELECT  COUNT(*) totalgames
FROM   
        (
            SELECT  Game_ID
            FROM    TeamGames
            WHERE   team_ID IN (1, 2)   -- specify the teams here
            GROUP   BY Game_ID
            HAVING  COUNT(*) = 2        -- number of teams specified
                    AND SUM(standing = 0) = 0
        ) s 
```

*   [SQLFiddle 演示](http://www.sqlfiddle.com/#!2/01a45/3)

输出

```
╔════════════╗
║ TOTALGAMES ║
╠════════════╣
║          3 ║
╚════════════╝ 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-03T07:26:46.247

我不确定，但这可能有用 `select count(distinct game_id) as games_number from Team_Games where (team_id = 1 or team_id = 2) and standing >= 1;`

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-03T07:36:44.980

如果需要，您可以从 select 子句和 group by 中删除团队。

```
SELECT T1.TEAM_ID, T2.TEAM_ID, COUNT(*)
FROM
TEAM_GAMES T1, TEAM_GAMES T2
WHERE T2.TEAM_ID <> T1.TEAM_ID
AND T2.GAME_ID = T2.GAME_ID
AND T1.STANDING > 0 AND T2.STANDING > 0
GROUP BY T1.TEAM_ID, T2.TEAM_ID 
```

# javascript - HTML5 中的 Jquery 滑块

> ID：15781124
> 
> 赞同：0
> 
> 时间：2013-04-03T07:17:59.170
> 
> 标签：javascript, jquery, html, onclick, slider

我有 3 张图片-myimage1、myimage2 和 myimage3。当我单击每个图像时，我会得到一组幻灯片滑块、滑块 2 和滑块 3，它们分别位于容器 1、容器 2 和容器 2 中。这是我的 HTML：

```
 <div id="right">
    <img id="myimage1" onclick="changeimage1()"  src="images/build_i.png"  />
    <img id="myimage2" onclick="changeimage2()"  src="images/apply_i.png"  />
    <img id="myimage3" onclick="changeimage3()"  src="images/learn_i.png"  />
    </div> 
     <div id="PicInRight"> <div id="container1" > <div id="slider" > <ul><li><img      id="Img" src='slide_intro.png'/></li></ul> </div></div> <div id="container2"> <div id="slider2" > <ul><li><img id="Img" src='slide1.png' /></li></ul> </div></div> <div id="container3"> <div id="slider3" > <ul><li><img id="Img" src='slide1.png' /></li></ul> </div> </div></div> 
```

在头部，我隐藏了里面有幻灯片的容器。

```
 <script type="text/javascript">
    $(document).ready(function(){   
    $("#container1").hide();
    $("#container2").hide();
    $("#container3").hide();
    });
     </script> 
```

在我的 Javascript 中，点击功能如下所示：

```
 function changeimage1()
     {

    $("#container2").hide();
    $("#container3").hide();
    $("#container1").show();
    $("#slider").easySlider({
            auto: false, 
            continuous: true
        });
        } 
```

myimage1 和 myimage2 以此类推。

```
 function changeimage2()
    {   $("#container1").hide();
    $("#container3").hide();
    $("#container2").show();

        $("#slider2").easySlider({
            auto: false, 
            continuous: true
        });
    }

     function changeimage3()
    {           
$("#container1").hide();
    $("#container2").hide();
$("#container3").show();
$("#slider3").easySlider({
            auto: false, 
            continuous: true
        });
} 
```

现在，只有当我先单击 myimage3 时，它才能正常工作。滑块显示并且工作正常。当我稍后单击 image1 和 image2 时，它们也可以工作。但是，如果我先单击 myimage1，则只有第一个滑块起作用。当我稍后单击 myimage2 和 myimage3 时，container2 和 3 中的滑块仅显示，但不会在单击下一个和上一个时切换！如果我先单击 myimage2，则类似情况。为什么会发生这种情况，我应该怎么做才能纠正它？

# javascript - 尝试在 Icenium 中访问 jspdf 图像时出错

> ID：15781128
> 
> 赞同：0
> 
> 时间：2013-04-03T07:18:20.577
> 
> 标签：javascript, jquery, html

我正在尝试在 Icenium 中使用 JsPdf 中的图像，它在控制台中向我显示以下错误，我被卡住了。

```
 Unsafe JavaScript attempt to access frame with URL     data:application/pdf;base64,JVBERi0xLjMKMyAwIG9iago8PC9UeXBlIC9QYWdlCi9QYXJ…    NpemUgOAovUm9vdCA3IDAgUgovSW5mbyA2IDAgUgo+PgpzdGFydHhyZWYKNjk5CiUlRU9GCg== from frame with URL     http://app.icenium.com/Mist/Workspace/pdf/Simulator?targetUrl=http%3A%2F%2F…    Style=Default&allowedOrientation=Portrait%3BLandscape&fullResolution=false. The frame     requesting access has a protocol of 'http', the frame being accessed has a protocol of ''.     Protocols must match. 
```

以下是我的js文件：

```
 function demo1() {

        var imgData ='data:image/jpeg;base64,/9j/.....';
        //You'll need to make your image into a Data URL
// Use http://dataurl.net/#dataurlmaker
        var doc = new jsPDF();
      doc.setFontSize(40);
    doc.text(35, 25, "Octonyan loves jsPDF");
    doc.addImage(imgData, 'JPEG', 15, 40, 180, 180);
        doc.output('datauri');

    } 
```

您能否告诉我如何进行此操作或任何其他可以在 Icenium 中以 pdf 格式获取图像的方式。感谢您的帮助。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-03T09:28:27.767

如果您尝试通过基于 iframe 的模拟器访问它，它将无法正常工作。

在设备上试用。:)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-05-28T14:07:13.463

您正在尝试使用他们基于浏览器的客户端和模拟器，这在 CORS 场景中不起作用。

幸运的是，Icenium 有基于 Windows 的客户端和模拟器，您可以将它们用于此类目的或按照 Rahat 的建议在设备上进行测试。

# php - MySql 基于时间戳的插入查询（延迟插入）

> ID：15781130
> 
> 赞同：0
> 
> 时间：2013-04-03T07:18:25.367
> 
> 标签：php, mysql, insert

我需要`delayed` `mysql insert`根据选择的时间进入我的数据库。

示例：`Timestamp`选择 =`"2013-04-03 10:12:00"`

所以我希望我`insert query`在这个`("2013-04-03 10:12:00")`特定的时间被处决。

`$qry = mysql_query("INSERT INTO table (field) value ($value)");`

我有一个`mysql innoDB`数据库。

我将从界面接受`timestamp`用户的这个值`HTML+PHP`。

是的，我`dont want`要做`cron jobs`

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-03T07:25:03.777

没有 cron 工作就没有选择...

您需要一个`cron job`设置`every minute`，其中查询正在为插入查询寻找任何匹配的时间戳。

`cron job`但是，如果您有越来越多的数据要插入，那么每一分钟对数据库的健康并没有好处，您应该重新考虑时间间隔以获得更好的性能。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-03T07:46:57.303

您可以将数据插入到附加表中，然后使用 MySQL 事件在准确的时间将记录复制到目标表中。例如 -

```
CREATE EVENT event1
  ON SCHEDULE AT '2013-04-03 20:00:00'
  DO 
BEGIN
  INSERT INTO <table> SELECT * FROM <temp table>;
  TRUNCATE TABLE <temp table>;
END 
```

[使用事件调度程序](http://dev.mysql.com/doc/refman/5.1/en/events.html)。

# c# - 尚未为数据源“请求”提供数据源实例

> ID：15781133
> 
> 赞同：3
> 
> 时间：2013-04-03T07:18:31.717
> 
> 标签：c#, datatable, datasource, reportviewer, rdlc

我的报告查看器出现错误，我不知道如何纠正这个错误......我得到的错误是：“没有为数据源'请求'提供数据源实例。” 我已尝试搜索此内容，但找不到任何我认为是错误的内容，有人可以指出我正确的方向吗？这就是我的记者的样子：

```
 <rsweb:ReportViewer ID="rptViewer" runat="server" Height="654px" 
Width="924px" Font-Names="Verdana" Font-Size="8pt" 
    InteractiveDeviceInfos="(Collection)" WaitMessageFont-Names="Verdana" 
    WaitMessageFont-Size="14pt">
    <LocalReport ReportPath="Report.rdlc">
    </LocalReport> 
```

这是我用于报告查看器的代码：

```
 SqlConnection conn;

protected void Page_Load(object sender, EventArgs e)
{
    conn = new SqlConnection(System.Configuration.ConfigurationManager.ConnectionStrings["ConnectionString"].ConnectionString);

    conn.Open();

    if (!Page.IsPostBack)
    {
        runRptViewer();
    } 

}
    private DataTable getData()
{
    DataSet dss = new DataSet();
    string sql = "";
    sql = "SELECT CC_Request.Company, CC_Request.Attention, CC_Request.Telephone, CC_Request.Email, CC_Items.Model, CC_Items.SerialNo, CC_ItemsRequested.Item, CC_ItemsRequested.Quantity, CC_ItemsRequested.Price, CC_ItemsRequested.ModelID, CC_Items.RequestID FROM CC_Request INNER JOIN CC_Items ON CC_Request.RequestID = CC_Items.RequestID INNER JOIN CC_ItemsRequested ON CC_Items.ModelID = CC_ItemsRequested.ModelID WHERE (CC_Request.Company = 'Alpha') AND (CC_ItemsRequested.ModelID = 20) AND (CC_Items.RequestID = 1)";
    SqlDataAdapter da = new SqlDataAdapter(sql, conn);
    da.Fill(dss);
    DataTable dt = dss.Tables[0];
    return dt;
}

private void runRptViewer()
{
    this.rptViewer.Reset();
    this.rptViewer.LocalReport.ReportPath = Server.MapPath("Reports\\Report.rdlc");
    ReportDataSource rds = new ReportDataSource("dsNewDataSet_Table", getData());
    this.rptViewer.LocalReport.DataSources.Clear();
    this.rptViewer.LocalReport.DataSources.Add(rds);
    this.rptViewer.DataBind();
    this.rptViewer.LocalReport.Refresh();
} 
```

任何帮助将不胜感激。

编辑 - - - - - - - - - - - -

这也不起作用：

```
 private DataTable getData()
{
    DataTable dtable = new DataTable();
    dtable.TableName = "dtNewDataSet_Table";
    string sql = "";
    sql = "SELECT CC_Request.Company, CC_Request.Attention, CC_Request.Telephone, CC_Request.Email, CC_Items.Model, CC_Items.SerialNo, CC_ItemsRequested.Item, CC_ItemsRequested.Quantity, CC_ItemsRequested.Price, CC_ItemsRequested.ModelID, CC_Items.RequestID FROM CC_Request INNER JOIN CC_Items ON CC_Request.RequestID = CC_Items.RequestID INNER JOIN CC_ItemsRequested ON CC_Items.ModelID = CC_ItemsRequested.ModelID WHERE (CC_Request.Company = 'Alpha') AND (CC_ItemsRequested.ModelID = 20) AND (CC_Items.RequestID = 1)";
    SqlDataAdapter da = new SqlDataAdapter(sql, conn);
    da.Fill(dtable);
    DataTable dt = dtable;
    return dt;
} 
```

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-11-23T07:40:41.497

我也面临这个问题，这就是我来这里的原因。

我找出了问题所在，并将其发布在这里以帮助遇到此类问题的人。

1.  我的 RDLC 数据源是**“dsClientPayList”**
2.  我在后面的代码中添加了数据源，例如：

    ```
    ReportViewer1.LocalReport.DataSources.Clear(); 
    ReportDataSource rd = new ReportDataSource("dsData1", DAL.MyDBModel.snData().Tables[0]);
    ReportViewer1.LocalReport.DataSources.Add(rd); 
    ```

它抛出了同样的错误。

解决方案：

在我后面的代码中，我将 ReportDataSource 的参数从“ **dsData1** ”更改为“ **dsClientPayList** ”（与 RDLC 中相同）。

```
ReportDataSource rd = new ReportDataSource("dsClientPayList", DAL.MyDBModel.snData().Tables[0]); 
```

它有效

结论：***RDLC 和 ReportViewer 中的 DataSource 名称必须相同。***

谢谢快乐编码:)

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-04-03T08:02:51.833

您必须设置报告中使用的所有数据源。

在这种情况下，如果只有一个数据源，它应该是这样的

```
ReportDataSource rds = new ReportDataSource("Request", getData()); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-03T11:54:08.193

我宁愿用“使用”语句来正确处理对象和错误处理

```
using (SqlConnection conn = new SqlConnection(connStr)) {
using(SqlCommand comm = new SqlCommand()) {
comm.Connection = conn;
comm.CommandText = sql; 
```

...

```
try {
conn.Open();
comm.ExecuteNonQuery();
}
catch(SqlException e) {
// in case something is wrong
}
}
} 
```

# python - python - 字符串只匹配整个单词

> ID：15781136
> 
> 赞同：3
> 
> 时间：2013-04-03T07:18:41.970
> 
> 标签：python

我有两个列表 -`query`和`line`. 我的代码查找是否`query`为：

```
["president" ,"publicly"] 
```

包含在一个`line`（订单事项）中，例如：

```
["president" ,"publicly", "told"] 
```

这是我目前使用的代码：

```
if ' '.join(query) in ' '.join(line) 
```

问题是，我只想匹配整个单词。所以下面的查询不会通过条件语句：

```
["president" ,"pub"] 
```

我怎样才能做到这一点？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-03T07:21:49.770

您可以使用正则表达式和`\b`单词边界：

```
import re
the_regex = re.compile(r'\b' + r'\b'.join(map(re.escape, ['president', 'pub'])) + r'\b')
if the_regex.search(' '.join(line)):
    print 'matching'
else:
    print 'not matching' 
```

作为替代方案，您可以编写一个函数来检查给定列表是否是该行的子列表。就像是：

```
def find_sublist(sub, lst):
    if not sub:
        return 0
    cur_index = 0
    while cur_index < len(lst):
        try:
            cur_index = lst.index(sub[0], cur_index)
        except ValueError:
            break

        if lst[cur_index:cur_index + len(sub)] == sub:
            break
        lst = lst[cur_index + 1:]
    return cur_index 
```

您可以将其用作：

```
if find_sublist(query, line) >= 0:
    print 'matching'
else:
    print 'not matching' 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-03T07:23:32.270

只需使用“in”运算符：

```
mylist = ['foo', 'bar', 'baz'] 
```

`'foo' in mylist`-> 返回 True `'bar' in mylist`-> 返回 True `'fo' in mylist`-> 返回 False `'ba' in mylist`-> 返回 False

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-03T07:23:39.950

这是一种方法：

```
re.search(r'\b' + re.escape(' '.join(query)) + r'\b', ' '.join(line)) is not None 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-04-03T07:36:25.970

只是为了好玩，您还可以这样做：

```
a = ["president" ,"publicly", "told"]
b = ["president" ,"publicly"]
c = ["president" ,"pub"]
d = ["publicly", "president"]
e = ["publicly", "told"]

from itertools import izip
not [l for l,n in izip(a, b) if l != n] ## True
not [l for l,n in izip(a, c) if l != n] ## False
not [l for l,n in izip(a, d) if l != n] ## False
## to support query in the middle of the line:
try:
  query_list = a[a.index(e[0]):]
  not [l for l,n in izip(query_list, e) if l != n] ## True 
expect ValueError:
  pass 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-04-03T07:23:45.637

您可以使用[issubset](http://docs.python.org/2/library/stdtypes.html#set.issubset)方法来实现这一点。只需这样做：

```
a = ["president" ,"publicly"]
b = ["president" ,"publicly", "told"]

if set(a).issubset(b):
    #bla bla 
```

这将返回两个列表中的匹配项。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2013-04-03T07:32:55.897

您可以使用`all`内置的 quantor 函数：

```
if all(word in b for word in a):
    """ all words in list""" 
```

请注意，对于长列表，这可能不会提高运行时间效率。更好地使用`set`type 而不是 list for `a`（要搜索的单词列表）。

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2013-04-03T07:40:30.103

这是一种非正则表达式的方法。我确信正则表达式会比这快得多：

```
>>> query = ['president', 'publicly']
>>> line = ['president', 'publicly', 'told']
>>> any(query == line[i:i+len(query)] for i in range(len(line) - len(query)))
True
>>> query = ["president" ,"pub"]
>>> any(query == line[i:i+len(query)] for i in range(len(line) - len(query)))
False 
```

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2013-04-03T07:46:49.240

显式优于隐式。由于订购很重要，我会这样写：

```
query = ['president','publicly']
query_false = ['president','pub']
line = ['president','publicly','told']

query_len = len(query)
blocks = [line[i:i+query_len] for i in xrange(len(line)-query_len+1)] 
```

`blocks`保存所有相关组合以检查：

```
[['president', 'publicly'], ['publicly', 'told']] 
```

现在您可以简单地检查您的查询是否在该列表中：

```
print query in blocks # -> True
print query_false in blocks # -> False 
```

代码的工作方式与您可能会用文字解释直截了当的解决方案一样，这对我来说通常是一个好兆头。如果你有很长的行并且性能成为问题，你可以用生成器替换生成的列表。

# asp.net - 在 aspx 中填充下拉列表。转换失败

> ID：15781137
> 
> 赞同：0
> 
> 时间：2013-04-03T07:18:45.843
> 
> 标签：asp.net, sql, vb.net

我在 aspx 第一个页面中有两个用于位置和供应商的下拉菜单。根据在位置下拉列表中选择的值，供应商下拉列表必须填充...我正在尝试与位置名称绑定

地点：

```
 <asp:DropDownList ID="ddlAllLocations" runat="server" DataSourceID="SqlDataSourceBusinessLocations"
                    DataTextField="Location_Name" DataValueField="Location_ID" AutoPostBack="True"  AppendDataBoundItems="True">
   <asp:ListItem value="" selected="True"> 
```

供应商：

```
<asp:SqlDataSource ID="SqlDataSourceAllVendors" runat="server" ConnectionString="<%$ ConnectionStrings:xxxxx %>"
        ProviderName="<%$ ConnectionStrings:xxxxx.ProviderName %>" SelectCommand="GetAllVendorsForBUforLocation"
        SelectCommandType="StoredProcedure">
       <SelectParameters>
            <asp:SessionParameter Name="userBUIds" SessionField="BusinessUnitIds" Size="200"
                Type="String" />

             <asp:ControlParameter ControlID="ddlAllLocations" Name="LOCATION_ID" PropertyName="SelectedValue"
                Type="String" />
        </SelectParameters>

    </asp:SqlDataSource> 
```

我的存储过程是

```
-- =============================================
ALTER PROCEDURE [dbo].[GetAllVendorsForBUforLocation]
    @userBUIds varchar(200),
    @LOCATION_ID int
AS
DECLARE @sql NVARCHAR(4000)   
BEGIN
    set @sql='SELECT DISTINCT tblVendor_Payees.PayeeID, RTRIM(ISNULL(a.Name1_Last, '''')) + '' '' + ISNULL(a.Name1_First, '''') AS VendorName, tblVendor_Business.BusinessID FROM tblVendor_Payees AS a left JOIN tblFields AS f ON a.PayeeID = f.VendorID INNER JOIN tblVendor_Business ON a.PayeeID = tblVendor_Business.PayeeID INNER JOIN INVENTORY.TBL_LOCATION  on INVENTORY.TBL_LOCATION.BusinessID = tblVendor_Business.BusinessID WHERE (a.VendorType = 1) AND (tblVendor_Business.BusinessID = '+cast(@userBUIds as varchar(50))+' and INVENTORY.TBL_LOCATION.LOCATION_ID = '+cast(@LOCATION_ID as int)+') ORDER BY VendorName'
 exec sp_executeSQL @sql 
END 
```

我收到此错误：

转换 varchar 值时转换失败 'SELECT DISTINCT tblVendor_Payees.PayeeID, RTRIM(ISNULL(a.Name1_Last, '')) + ' ' + ISNULL(a.Name1_First, '') AS VendorName, tblVendor_Business.BusinessID FROM tblVendor_Payees AS a left JOIN tblFields AS f ON a.PayeeID = f.VendorID INNER JOIN tblVendor_Business ON a.PayeeID = tblVendor_Business.PayeeID INNER JOIN INVENTORY.TBL_LOCATION on INVENTORY.TBL_LOCATION.BusinessID = tblVendor_Business.BusinessID WHERE (a.VendorType = 1) AND (tblVendor_Business. BusinessID = 2 和 INVENTORY.TBL_LOCATION.LOCATION_ID = ' 到数据类型 int

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-03T16:33:22.677

您收到错误消息是因为您尝试将整数添加到字符串中。由于`int`具有比 更高的优先级`varchar`，SQL 将尝试将 转换`varchar`为`int`. 由于`varchar`不包含有效整数，因此此转换将失败。

[更重要的是，通过在存储过程中使用字符串连接和动态 SQL，您对SQL 注入](http://en.wikipedia.org/wiki/SQL_injection)敞开了大门。您的查询甚至没有做任何复杂到足以证明动态 SQL 的事情！

如果您迫切希望保留动态 SQL，请使用以下参数化版本`sp_executesql`：

```
set @sql = N'SELECT DISTINCT 
tblVendor_Payees.PayeeID, 
RTRIM(ISNULL(a.Name1_Last, '''')) + '' '' + ISNULL(a.Name1_First, '''') AS VendorName, 
tblVendor_Business.BusinessID 
FROM tblVendor_Payees AS a left 
JOIN tblFields AS f ON a.PayeeID = f.VendorID 
INNER JOIN tblVendor_Business ON a.PayeeID = tblVendor_Business.PayeeID 
INNER JOIN INVENTORY.TBL_LOCATION  on INVENTORY.TBL_LOCATION.BusinessID = tblVendor_Business.BusinessID 
WHERE (a.VendorType = 1) 
AND (tblVendor_Business.BusinessID = @userBUIds 
and INVENTORY.TBL_LOCATION.LOCATION_ID = @LOCATION_ID) 
ORDER BY VendorName'

exec sp_executeSQL 
   @stmt = @sql, 
   N'@userBUIds varchar(200), @LOCATION_ID int',
   @userBUIds = @userBUIds,
   @LOCATION_ID = @LOCATION_ID 
```

否则，跳过动态 SQL，直接执行查询。

# c# - 如何有效地将大型数据从 SQL Server 2008 流式传输到 Web 浏览器？

> ID：15781138
> 
> 赞同：1
> 
> 时间：2013-04-03T07:18:48.580
> 
> 标签：c#, sql-server, binarystream

我正在使用 C# 和 ASP.NET MVC 3。目前，我正在从 SQL Server 获取大量数据，将其添加到`StringBuilder`中，然后使用`System.Text.ASCIIEncoding`将`StringBuilder`对象转换为`byte[]`数组。

然后我将`byte[]`数组发送到视图。但是，数据量如此之大，我得到以下异常：

> 引发了“System.OutOfMemoryException”类型的异常

这是我在控制器中用于将`StringBuilder`对象转换为`byte[]`然后返回视图的代码。有没有办法将数据直接从数据库流式传输到客户端浏览器，而无需先将其全部加载到服务器的内存中？

```
System.Text.ASCIIEncoding encoding = new ASCIIEncoding();
return File(encoding.GetBytes(csv.ToString()), "text/csv", "Query_Export.csv"); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-03T07:29:31.837

您可以执行类似于以下伪代码的操作

```
 while (sqlReader.GetBytes(params))//params is a placeholder for the actual arguments and
                                    //will have a byte array buffer and some counter indexes
  {
      context.Response.BinaryWrite(buffer);
      //somecounter
  } 
```

SqlDataReader [http://msdn.microsoft.com/en-in/library/system.data.sqlclient.sqldatareader.aspx](http://msdn.microsoft.com/en-in/library/system.data.sqlclient.sqldatareader.aspx)

# nginx - nginx 大型静态文件在 AWS EBS 支持的服务器上服务缓慢

> ID：15781141
> 
> 赞同：5
> 
> 时间：2013-04-03T07:19:01.193
> 
> 标签：nginx, amazon-web-services, centos

我试图找出完全由 EBS 支持的 AWS 服务器上的 nginx 的正确调整。基本问题是，当下载约 100MB 的静态文件时，我看到的下载速率一致为约 60K/s。如果我使用 scp 从 AWS 服务器复制相同的文件，我看到的速率约为 1MB/s。（所以，我不确定 EBS 是否会在这里发挥作用）。

最初，我使用开箱即用的配置运行 nginx（对于 CentOS 6.x）。但为了加快速度，我尝试了各种调整参数，但无济于事——速度基本保持不变。

这是目前我的配置中的相关片段：

```
location /download {
    root /var/www/yada/update;
    disable_symlinks off;
    autoindex  on;

    # Transfer tuning follows
    aio        on;
    directio   4m;
    output_buffers 1 128k;
} 
```

最初，这些调整设置是：

```
sendfile       on;
tcp_nopush     on;
tcp_nodelay    on; 
```

请注意，我并不是要针对大量流量进行优化。在任何给定时间可能只有一个客户端下载。AWS 服务器是一个具有 617MB 内存的“微型”实例。无论如何，scp 可以以 ~1MB/s 的速度下载这一事实让我相信 HTTP 应该能够匹配或超过该吞吐量。

任何帮助表示赞赏。

**[更新]** 附加信息。在下载运行时运行“顶部”命令，我得到：

```
top - 07:37:33 up 11 days,  1:56,  1 user,  load average: 0.00, 0.01, 0.05
Tasks:  63 total,   1 running,  62 sleeping,   0 stopped,   0 zombie
Cpu(s):  0.0%us,  0.0%sy,  0.0%ni,100.0%id,  0.0%wa,  0.0%hi,  0.0%si,  0.0%st 
```

'iostat' 显示：

```
Linux 3.2.38-5.48.amzn1.x86_64      04/03/2013  _x86_64_    (1 CPU)

avg-cpu:  %user   %nice %system %iowait  %steal   %idle
           0.02    0.00    0.03    0.03    0.02   99.89

Device:            tps   Blk_read/s   Blk_wrtn/s   Blk_read   Blk_wrtn
xvdap1            0.23         2.66         8.59    2544324    8224920 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-05-28T08:24:14.683

您是否考虑过打开 sendfile ？ [Sendfile](http://wiki.nginx.org/HttpCoreModule#sendfile)允许 nginx 直接使用内核发送静态文件，因此它应该比任何其他选项都快。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-03T09:28:30.503

默认情况下 scp 会比你的 HTTP 连接快得多。我有一个建议给你。如果您提供静态文件，我更喜欢将 S3 与 Cloud front 一起使用。这使它更快。文件传输很难达到更好的性能。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-04T06:32:31.287

鉴于事情在同一台机器上运行良好，你会受到限制。首先检查您与 AWS 的使用政策，也许它在细则中。或者，尝试不同的 ISP。如果它们都给你 60kB/s，你就知道是 AWS。

# jquery - JQuery：更改按钮行为

> ID：15781147
> 
> 赞同：1
> 
> 时间：2013-04-03T07:19:12.233
> 
> 标签：jquery, css, button

我是 jquery 的新手，并且在制作执行以下操作的函数时遇到问题。

我有一个三行四列的表格。在每一列中，我都有一个带有单独 css 的按钮，用于悬停效果。每个按钮的想法是在按下按钮时在文本框中显示它们的值。

我尝试了不同的方法来执行以下操作，但均未成功。

1.  更改按下按钮的 css（例如将颜色更改为红色）并使所有其他按钮变回原始颜色（例如黄色）。
2.  在文本框中添加按钮的值。

这是一个aspx页面，所以我什至尝试通过调用按钮的目标来获取值。例如：

**JS：**

```
//Div Specific Function
$("#step1").click(function (e) {
    var thisID = e.target.ty;
    $('#input').data('btnType', 'Amount').each(function () {
        $(this).toggleClass('button');
    })

    $(thisID).toggleClass('button-hover');

}); 
```

**html**

```
<table cellpadding="10" cellspacing="0" width="90%">
 <tr>
  <td>
   <input type="button" data-btnType="Amount" id="btn50" runat="server" value=" $50" Text="$50"  class="button" />
  </td>
  <td>
   <input type="button" data-btnType="Amount" id="btn100" runat="server" value="$100" Text="$100" class="button"  />
  </td>
  <td>
   <input type="button" data-btnType="Amount" id="btn150" runat="server" Text="$150" value="$150" class="button"  />
  </td>
  <td>
   <input type="button" data-btnType="Amount" id="btn200" runat="server" Text="$200" value="$200" class="button"  />
  </td>
 </tr>
</table> 
```

我怎样才能让这些按钮像收音机效果一样。请注意，这个 div 一共有 10 个按钮。

问候。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-03T07:35:47.997

```
$(".button").click(function () {
    $(".red").removeClass("red").addClass("yellow"); // remove the prev pressed button class
    $(this).removeClass("yellow").addClass("red");      // add the red css class to  pressed button
    $(".button").not(".red").addClass("yellow"); // add to all other buttons yellow class
    $("#textBox").val($(this).val());    // get val of pressed button val
}); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-03T07:53:18.563

你可以试试这个：

```
$("table :button").click(function() {
  $("table :button").removeClass("selected").addClass("unselected");
  $(this).removeClass("unselected").addClass("selected");
  $("#textBox").val($(this).val());
}); 
```

// 我对你的 html 做了一点改动，在你的 html 代码中添加了未选择的类

jsfiddle 示例：

> [http://jsfiddle.net/k3J2r/](http://jsfiddle.net/k3J2r/)

# wpf - 这是在 WPF 和 MVVM 中创建对话框的坏方法吗？

> ID：15781149
> 
> 赞同：2
> 
> 时间：2013-04-03T07:19:12.570
> 
> 标签：mvvm, mvvm, wpf, mvvm

我有一个使用[mvvm](/questions/tagged/mvvm "显示标记为“mvvm”的问题")模式的 WPF 应用程序，我需要从我的主视图模型中显示一个对话框。

我有一个带有视图模型的辅助视图，我认为我有两个选项来创建对话框。

**选项1**

在主视图模型中，我可以执行以下操作：

1.  创建对话框的视图
2.  创建对话框的视图模型
3.  将视图模型分配给视图
4.  显示对话框

**选项 2**

在主视图模型中：

1.  创建对话框的视图模型

在对话框的视图模型的构造函数中：

1.  创建对话框的视图
2.  将视图模型分配给视图。在这种情况下分配“this”
3.  显示对话框

我知道在 MVVM 中，视图模型对视图一无所知，但在第二个选项中，实际上，视图模型没有任何链接到视图的属性，只是在构造函数中创建一个显示，在最终状态视图模型对视图一无所知。

不过我觉得principal view里面的代码比较清晰，因为我只需要创建view model，只需要一行代码，而不是option 1需要4行（create view, create view model, assign视图模型到视图并显示对话框）。

如果我想遵循[mvvm](/questions/tagged/mvvm "显示标记为“mvvm”的问题")模式，我认为第二个选项不是一个坏主意，我错了吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-03T07:40:51.300

在大多数情况下，有几种方法可以实现解决方案。

对于具有多个对话框、窗口或页面的大型应用程序，最好的方法是服务，例如`IDialogHandler`. 这是通过 c_tor 提供给虚拟机的。[你可以在这篇文章](https://stackoverflow.com/questions/3801681/good-or-bad-practise-for-dialogs-in-wpf-with-mvvm?rq=1)中找到一个例子。
最大的优势是使 VM 易于测试的解耦，因为它们没有对视图的引用。

对于具有 2 或 3 个不同对话框的较小应用程序，以下方法也是合适的。

```
public class DialogView : Window
{
    // a method to create easily a dialog
    public static void ShowDialog(DialogViewModelBase dialogVm)
    {
        var dialog = new DialogView { DataContext = dialogVm };
        dialog.ShowDialog(); // pls note, that this will create a modal dialog
    }
} 
```

所以`DialogView.ShowDialog(...)`可以从任何地方调用。但是这里的虚拟机有对视图的引用。
这类似于您的**OPTION 1**，好吧，步骤顺序不一样，但它足够接近。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-03T07:41:07.903

我为 wpf 中的对话框执行[此操作](https://stackoverflow.com/questions/3801681/good-or-bad-practise-for-dialogs-in-wpf-with-mvvm)

```
var result = this.uiDialogService.ShowDialog("Dialogwindow title goes here", dialogwindowVM);

... do anything with the dialog result... 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-03T08:32:19.400

无论您选择哪种方式，都会有一个麻烦。
坦率地说，它不仅与对话有关，而且与所有窗口有关。而在 MVVM 中，这可能会成为一种真正的痛苦。至少对于我们的团队来说，当我们同时使用 WinForms 和 WPF 时。

大多数开发人员忘记了窗口的父子关系。
关于对话框窗口，这会导致用户体验有些差：对话框可能位于主窗口下方，由于显示的对话框而无响应。（您可以轻松地复制它）。

因此，在 MVVM 中，您需要以某种方式设置父级。这里重要的是，View 不一定是 Window。

这里我们如何做到这一点。
我们更喜欢 ViewModel-first 方法。但是我们不会在 VM 中注入 View。我们传递 IViewService，它负责 View 实例化、父子关系和监听某些事件。
想想当用户单击右上角的十字时，您的虚拟机如何阻止其视图关闭。

# sql-server - SQL Server 2008中如何更改现有表的列顺序

> ID：15781151
> 
> 赞同：63
> 
> 时间：2013-04-03T07:19:19.497
> 
> 标签：sql-server

我有需要在 SQL Server 2008 中更改列的顺序/为现有表添加新列的情况。

现有列

```
MemberName
MemberAddress
Member_ID(pk) 
```

我想要这个订单

```
Member_ID(pk)
MemberName
MemberAddress 
```

* * *

## 回答 #1

> 赞同：109
> 
> 时间：2015-03-11T09:29:23.987

我得到了相同的答案，继续`SQL Server → Tools → Options → Designers → Table and Database Designers`并取消选择`Prevent saving changes that require table re-creation`

![在此处输入图像描述](https://i.stack.imgur.com/FG9zX.png)

2- 打开表格设计视图，上下滚动列并保存更改。

![在此处输入图像描述](https://i.stack.imgur.com/eXuKI.png)

* * *

## 回答 #2

> 赞同：14
> 
> 时间：2014-03-12T12:38:15.610

使用 ALTER 语句是不可能的。如果您希望列按特定顺序排列，则必须创建一个新表，使用 INSERT INTO newtable (col-x,col-a,col-b) SELECT col-x,col-a,col-b FROM oldtable 将数据从 oldtable 传输到 newtable，删除 oldtable 并将 newtable 重命名为 oldtable 名称。

不一定建议这样做，因为列在数据库表中的顺序无关紧要。当您使用 SELECT 语句时，您可以命名列并让它们按照您想要的顺序返回给您。

* * *

## 回答 #3

> 赞同：8
> 
> 时间：2013-04-03T07:26:07.530

如果您的表没有任何记录，您可以删除然后创建您的表。

如果它有记录，您可以使用 SQL Server Management Studio 来完成。

只需单击您的表格>右键单击>单击设计，然后您现在可以通过拖动所需顺序上的字段来排列列的顺序，然后单击保存。

最好的祝福

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2013-04-03T07:45:29.063

在 SQL 中依赖列顺序通常是一个坏主意。SQL 基于关系理论，其中从不保证顺序 - 设计使然。您应该将所有列和行视为没有顺序，然后更改查询以提供正确的结果：

对于列：

*   尽量不要使用 SELECT *，而是指定选择列表中列的顺序，如下所示：SELECT Member_ID、MemberName、MemberAddress from TableName。如果添加列，这将保证订单并简化维护。

对于行：

*   仅当您指定 ORDER BY 子句时，才能保证结果集中的行顺序。
*   如果未指定 ORDER BY 子句，则结果集可能会有所不同，因为查询计划可能不同或数据库页面可能已更改。

希望这可以帮助...

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2013-12-24T07:59:44.823

我试过了，没有看到任何方法。

这是我的方法。

1.  右键单击表和脚本表进行创建，并在其中一个 SQL 查询窗口中使用它，
2.  `EXEC sp_rename 'Employee', 'Employee1'` -- 原始表名是Employee
3.  执行 Employee 创建脚本，确保以您需要的方式排列列。
4.  `INSERT INTO TABLE2 SELECT * FROM TABLE1`. -- 插入员工选择姓名，公司从员工1
5.  `DROP table Employee1`.

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2016-02-03T10:25:47.143

当使用源代码控制和自动部署到共享开发环境时，这可能是一个问题。在我工作的地方，我们的开发层上有一个非常大的示例数据库可供使用（我们生产数据的一个子集）。

最近我做了一些工作，从表中删除一列，然后在最后添加一些额外的列。然后我不得不撤消我的列删除，所以我在最后重新添加了它，这意味着表和所有引用在环境中都是正确的，但是源代码管理自动部署将不再工作，因为它抱怨表定义发生了变化。

这里真正的问题是表+索引是~120GB，环境只有~60GB可用，所以我需要：

a）重命名顺序错误的现有列，以正确的顺序添加新列，更新数据然后删除旧列

或者

b）重命名表，以正确的顺序创建一个新表，从旧表插入新表并从旧表中删除

使用临时表的 SSMS/TFS 架构比较选项将不起作用，因为磁盘上没有足够的空间来执行此操作。

我并不是要说这是处理事情的最佳方式或列顺序真的很重要，只是我有一个问题的场景，我正在分享我想到的解决问题的选项

* * *

## 回答 #7

> 赞同：-4
> 
> 时间：2016-02-18T09:57:52.643

将 id 列更改为 first 的 SQL 查询：

```
ALTER TABLE `student` CHANGE `id` `id` INT(10) UNSIGNED NOT NULL AUTO_INCREMENT FIRST; 
```

或通过使用：

```
ALTER TABLE `student` CHANGE `id` `id` INT(10) UNSIGNED NOT NULL AUTO_INCREMENT AFTER 'column_name' 
```

# javascript - 根据同一对象的“兄弟”可观察到淘汰赛

> ID：15781154
> 
> 赞同：1
> 
> 时间：2013-04-03T07:19:30.720
> 
> 标签：javascript, knockout.js

此代码将起作用：

```
var a = {};
a.b = ko.observable(1);
a.c = ko.computed(function(){ return a.b() + 1; }); 
```

这个不会（显然）：

```
var a = {
    b : ko.observable(1),
    c : ko.computed(function(){ return a.b() + 1; })
}; 
```

可以说我真的需要像在第二个代码中那样定义我的对象，有没有办法解决这个问题？我有一个涉及 try/catch 和 setTimeout 的想法，但它会很丑陋，所以我想听听是否有人有其他想法。

### 编辑

事实证明，我不需要 try/catch，只需要一个 setTimeout，就可以将评估延迟到运行时之后。但我还是想听听你对此的评论。

```
var delayedComputed = function( comp, init ){
    var a = ko.observable( init ); 
    // added the initial value because some functions would like to use
    // string or array methods, and would fail to do so on an "undefined"
    setTimout(function (){ 
        var b = ko.computed( comp );
        b.subscribe(a);
        a(b());
    },1);
    return a;
},
a = {
    b : ko.observable(1),
    c : delayedComputed(function(){ return a.b() + 1; },"")
}; 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-03T08:08:49.730

您可以尝试使用*deferEvaluation*来延迟......好吧......计算计算的评估，直到它被实际访问：

```
var a = {
   b : ko.observable(1),
   c : ko.computed({read: function(){ return a.b() + 1; }, deferEvaluation: true})
}; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-03T07:26:58.647

您必须使用构造函数，例如

```
MyViewModel = function() {
   this.b = ko.observable(1);
   this.c = ko.computed(function() {
      return this.b() + 1;
   }, this);
} 
```

进而

```
ko.applyBindings(new MyViewModel()); 
```

# jquery - 如何使用 jquery 获取下拉列表的选项

> ID：15781158
> 
> 赞同：1
> 
> 时间：2013-04-03T07:19:46.860
> 
> 标签：jquery

我有使用 jquery 的下拉列表选项，以便根据选择在下拉列表中添加和删除。

我试过下面的代码来获取每个选项，但它对我不起作用。它是给对象，我想要像这样的 html 代码`<option value="1">1</option>`

```
<select id="drpdown" name="drpdown" multiple="multiple" size="15">
  <option data-parent="1" value="1">Test</option>                                       
</select>

 $('#drpdown').children().each(function() {
      if($(this).data('parent') != parent) 
      {
           values.push($(this));
           $(this).remove();
      } 
      else 
      {
         $(this).show();
      }
   }); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-03T08:10:00.527

当下拉列表的值发生变化时，您可以使用 jQuery 中的[change方法来执行代码。](http://api.jquery.com/change/)

要获取 html，您需要使用带有“outerHTML”属性的[prop方法。](http://api.jquery.com/prop/)

像这样的东西：

```
$("select").change(function() {
    var a = $(this).children(":selected").get(0);
    $("div").text($(a).prop("outerHTML"));
}); 
```

我创建了一个示例[小提琴](http://jsfiddle.net/nvrKw/)

# perl - Perl/Tk 中不显示窗口

> ID：15781161
> 
> 赞同：0
> 
> 时间：2013-04-03T07:19:50.147
> 
> 标签：perl, tk, perltk

```
$mw=MainWindow->new(-title=>'Game of Life');
$frmitems=$mw->Frame;
$frmsettings=$mw->Frame;
$lab1=$frmsettings->Label(-text=>'Size of square:')->pack;
$hen=$frmsettings->Entry(-textvariable=>10);
$lab2=$frmsettings->Label(-text=>' x ');
$wen=$frmsettings->Entry(-textvariable=>10);
$hen->grid($lab2,$wen);
$ststr=$frmsettings->Label(-text=>"Current step: $step")->pack;
$frmitems->grid($frmsettings);
$mw->gridColumnconfigure(0, -pad => 10);
$mw->gridColumnconfigure(1, -pad => 10);
$mw->MainLoop; 
```

这段代码应该是一个简单的窗口。但是在 MainLoop 之后什么都没有出现。如果我使用

```
$hen->pack($lab2,$wen); 
```

代替

```
$hen->grid($lab2,$wen); 
```

窗口出现，但我需要另一个几何图形（如网格）。怎么了？

Windows 上的 ActivePerl 5.16。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-03T11:12:50.880

$lab1 正在使用`pack`，但 $hen、$lab2 和 $wen 正在尝试使用`grid`（都在同一个框架中）。在小部件中混合几何管理器不起作用。从掌握 Perl/Tk 开始：

> 但是如果我们开始使用 pack，我们应该继续在 $mw 中直接包含的所有小部件上使用 pack。不要在中间切换到网格，因为两个几何管理器会陷入竞争状态：一个会创建它的布局，这会影响另一个的几何计算，这会影响第一个的布局，导致它重新计算它的几何，无限。

更改 $lab1 使用`grid`应该可以解决这个问题

# android - 来电时未在 OnReceveive 广播上显示活动

> ID：15781171
> 
> 赞同：0
> 
> 时间：2013-04-03T07:20:35.757
> 
> 标签：android, broadcastreceiver

我正在尝试制作一个应用程序，当您收到来电以启动显示呼叫号码的活动时。

我的问题是在通话结束之前不会显示活动。

我在应用程序中放了一个日志，我看到当我启动调用活动时，我已经将日志放在了活动的 Create 方法中，但是直到调用挂起后才会显示。

我把活动的源代码和广播传给了

任何人都可以帮助我吗？

**广播源**

```
public class ReceptorLlamadas extends BroadcastReceiver {

    @Override

    public void onReceive(Context context, Intent intent) {

          // Sacamos información del intent

          String estado = "Sin Estado", numero = "Sin Numero";

          Bundle extras = intent.getExtras();

          if(extras != null) {

                estado = "Sin Estado 1";
                numero = "Sin Numero 1"; 
                 estado = extras.getString(TelephonyManager.EXTRA_STATE);
                 numero = extras.getString( TelephonyManager.EXTRA_INCOMING_NUMBER);
                 if(estado.equals(TelephonyManager.EXTRA_STATE_RINGING)) {

                        numero = extras.getString( TelephonyManager.EXTRA_INCOMING_NUMBER);
                        Log.d("ReceptorAnuncio", "Weje1");
                        Intent i = new Intent(context, MainActivity.class);
                        i.putExtra("NUMERO", numero);
                        i.addFlags(Intent.FLAG_ACTIVITY_NEW_TASK);  
                        context.startActivity(i);
                        Log.d("ReceptorAnuncio", "Weje2"); 
                 }

                 Toast toast2 = Toast.makeText(context, "llamada " + estado + " de " + numero,Toast.LENGTH_LONG)    ; 
                 toast2.setGravity(Gravity.CENTER|Gravity.CENTER,0,0);
                 toast2.show();
          }

          String info = estado + " "+ numero;

          Log.d("ReceptorAnuncio", info + " intent="+ intent);

    }

} 
```

**活动来源**

```
public class MainActivity extends Activity {

    String num;
    @Override
    protected void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.activity_main);
        Bundle extras = getIntent().getExtras();

        num = "---------";
        if (extras != null)
        {   
            num = extras.getString("NUMERO");
        }
        Log.d("ReceptorAnuncio", "Arranca Activity " + num);
        TextView tel = (TextView) findViewById(R.id.textViewTelefono);
        tel.setText(num);
        Button close_button = (Button) findViewById(R.id.close_button);
        close_button.setOnClickListener(new OnClickListener() {
            @Override
            public void onClick(View v) {
                finish();
            }
        });
    }

    @Override
    public boolean onCreateOptionsMenu(Menu menu) {
        // Inflate the menu; this adds items to the action bar if it is present.
        getMenuInflater().inflate(R.menu.main, menu);

        return true;

    }

    @Override
    public void onDestroy()
    {
        super.onDestroy();
        Log.d("ReceptorAnuncio", "Fin Activity " + num);

    }

} 
```

显现

```
<?xml version="1.0" encoding="utf-8"?>
<manifest xmlns:android="http://schemas.android.com/apk/res/android"
package="com.example.llamadarecibida"
android:versionCode="1"
android:versionName="1.0" >

    <uses-sdk android:minSdkVersion="8" android:targetSdkVersion="17" />
    <uses-permission android:name="android.permission.READ_PHONE_STATE"/>

    <application
    android:allowBackup="true"
    android:icon="@drawable/ic_launcher"
    android:label="@string/app_name"
    android:theme="@style/AppTheme" >
        <activity
        android:name="com.example.llamadarecibida.MainActivity"
        android:label="@string/app_name" android:theme="@android:style/Theme.Dialog">
            <intent-filter>
                <action android:name="android.intent.action.MAIN" />

                <category android:name="android.intent.category.LAUNCHER" />
            </intent-filter>
        </activity>
        <receiver android:name="ReceptorLlamadas" >
            <intent-filter>

                <action android:name="android.intent.action.PHONE_STATE" />

            </intent-filter>

        </receiver>

    </application>

</manifest> 
```

# gwt - this.getThreadLocalRequest() 在 GWT 中返回 null

> ID：15781174
> 
> 赞同：3
> 
> 时间：2013-04-03T07:20:53.010
> 
> 标签：gwt

当我调用`getThreadLocalRequest()`servlet 中的方法（扩展`RemoteServiceServlet`）时，我总是得到 null。

```
public class UPS_LpnListRPCServiceImpl 
    extends RemoteServiceServlet 
    implements IUPS_LpnRPCService {

    @Override
    public String getUserInfoFromHeader() {
        LOGGER.debug(" getUserInfoFromHeader: ");
        HttpServletRequest req = this.getThreadLocalRequest();

        if (req != null) {
            //HttpSession session = req.getSession();
            remote_user = req.getHeader("ct-remote-user");

            LOGGER.debug("req != null");
        } else {
            remote_user = "";

            LOGGER.debug("req == null");
        }

        LOGGER.debug(" getUserInfoFromHeader: remote_user = " + remote_user);
        return remote_user;
    }
} 
```

在其他地方打电话：

```
IUPS_LpnRPCServiceAsync service = GWT.create(IUPS_LpnRPCService.class);

service.getUserInfoFromHeader(new AsyncCallbackSupport<String>(false) {

    @Override
    public void onSuccess(String remote_user) {             
        GWT.log("getting remote call");
        defaultMainScreen.setUsername(remote_user);
        GWT.log("remote_user = " + remote_user);
    }       
}); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-08T06:33:49.057

如果要访问 HttpServletRequest 对象，可以使用以下代码片段：

```
import org.springframework.web.context.request.RequestContextHolder;
import org.springframework.web.context.request.ServletRequestAttributes;

public class UPS_LpnListRPCServiceImpl extends RemoteServiceServlet implements
        IUPS_LpnRPCService {

...........
...........

public String getUserInfoFromHeader() {
  ServletRequestAttributes requestAttributes = (ServletRequestAttributes) RequestContextHolder.currentRequestAttributes();
  if (requestAttributes != null) {
       HttpServletRequest req = requestAttributes.getRequest();
       remote_user = req.getSession().getAttribute("j_username").toString();
  }

}

.........

} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2016-06-01T13:07:02.613

不要忘记在 web.xml 中添加以下配置以维护 HttpSession，否则会出现 IllegalStateException：

```
<listener>  
  <listener-class>  
    org.springframework.web.context.request.RequestContextListener  
  </listener-class>  
</listener> 
```

# java - 如何使用 IDE 在 Storm 生产集群中提交拓扑

> ID：15781176
> 
> 赞同：17
> 
> 时间：2013-04-03T07:20:55.780
> 
> 标签：java, apache-storm

我在`Must submit topologies using the 'storm' client script so that StormSubmitter knows which jar to upload`使用 IDE 向生产集群提交拓扑时遇到了一个问题，而如果我在命令行中使用`storm jar`命令执行同样的事情，它的运行就像天堂一样。我从[githublink](https://github.com/JeffersonK/storm-starter-remote)看到了同样的例子。

对于提交拓扑，我正在使用这些行

```
conf.put(Config.NIMBUS_HOST, NIMBUS_NODE);
conf.put(Config.NIMBUS_THRIFT_PORT,6627);
conf.put(Config.STORM_ZOOKEEPER_PORT,2181);
conf.put(Config.STORM_ZOOKEEPER_SERVERS,ZOOKEEPER_ID);
conf.setNumWorkers(20);
conf.setMaxSpoutPending(5000);
StormSubmitter submitter = new StormSubmitter();
submitter.submitTopology("test", conf, builder.createTopology()); 
```

如果这是正确的运行方法，请建议我？

* * *

## 回答 #1

> 赞同：29
> 
> 时间：2013-04-05T11:10:35.413

很好地找到了解决方案。当我们运行“storm jar”时，它会在提交的 jar 中触发storm.jar 的属性标志。因此，如果我们想以编程方式提交一个 jar，那么只需以这种方式设置标志

`System.setProperty("storm.jar", <path-to-jar>);`

例如：

```
System.setProperty("storm.jar", "/Users/programming/apache-storm-1.0.1/lib/storm-core-1.0.1.jar");
StormSubmitter.submitTopology("myTopology", config, builder.createTopology()); 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2014-07-04T04:47:07.680

要将拓扑提交到远程 Storm 集群，您需要将该 jar 上传到 nimbus 机器，然后使用 NimbusClient 将该 jar 提交到集群。
你可以这样做：

```
Map storm_conf = Utils.readStormConfig();
storm_conf.put("nimbus.host", "<Nimbus Machine IP>");
Client client = NimbusClient.getConfiguredClient(storm_conf)
                                .getClient();
String inputJar = "C:\\workspace\\TestStormRunner\\target\\TestStormRunner-0.0.1-SNAPSHOT-jar-with-dependencies.jar";
NimbusClient nimbus = new NimbusClient(storm_conf, "<Nimbus Machine IP>",
                                <Nimbus Machine Port>);
 // upload topology jar to Cluster using StormSubmitter
String uploadedJarLocation = StormSubmitter.submitJar(storm_conf,
                                inputJar);

String jsonConf = JSONValue.toJSONString(storm_conf);
nimbus.getClient().submitTopology("testtopology",
                      <uploadedJarLocation>, jsonConf, builder.createTopology()); 
```

这是工作示例：[向远程风暴集群提交拓扑](http://nishutayaltech.blogspot.in/2014/06/submitting-topology-to-remote-storm.html)

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2013-04-05T10:15:18.860

我没有运行 java 代码来提交自己，但我检查了storm命令 - 它是一个 python 文件，它运行 java 和[http://nathanmarz.github.com/storm/doc/backtype/storm/StormSubmitter.html](http://nathanmarz.github.com/storm/doc/backtype/storm/StormSubmitter.html)类

我认为您应该担心的唯一一件事是在执行时包含所有需要的库。

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2016-06-14T11:04:47.170

我已经根据@abhi 和@Nishu Tayal 的回答解决了这个问题，我想在这里发布我的代码：

```
public static void submitLocalTopologyWay1(String topologyName, Config topologyConf, 
        StormTopology topology, String localJar) {
    try {
        //get default storm config
        Map defaultStormConf = Utils.readStormConfig();
        defaultStormConf.putAll(topologyConf);

        //set JAR
        System.setProperty("storm.jar",localJar);

        //submit topology
        StormSubmitter.submitTopology(topologyName, defaultStormConf, topology);

    } catch (Exception e) {
        String errorMsg = "can't deploy topology " + topologyName + ", " + e.getMessage();
        System.out.println(errorMsg);
        e.printStackTrace();
    } 
}

public static void submitLocalTopologyWay2(String topologyName, Config topologyConf, 
        StormTopology topology, String localJar) {
    try {
        //get nimbus client
        Map defaultStormConf = Utils.readStormConfig();
        defaultStormConf.putAll(topologyConf);
        Client client = NimbusClient.getConfiguredClient(defaultStormConf).getClient();

        //upload JAR
        String remoteJar = StormSubmitter.submitJar(defaultStormConf, localJar);

        //submit topology
        client.submitTopology(topologyName, remoteJar, JSONValue.toJSONString(topologyConf), topology);

    } catch (Exception e) {
        String errorMsg = "can't deploy topology " + topologyName + ", " + e.getMessage();
        System.out.println(errorMsg);
        e.printStackTrace();
    } 
} 
```

那么这是一个测试，您必须先将代码构建到 JAR 文件中。

```
public void testSubmitTopologySubmitLocalTopologyWay1() {   
    Config config = new Config();
    config.put(Config.NIMBUS_HOST,"9.119.84.179");   
    config.put(Config.NIMBUS_THRIFT_PORT, 6627);
    config.put(Config.STORM_ZOOKEEPER_SERVERS, Arrays.asList("9.119.84.177","9.119.84.178","9.119.84.176")); 
    config.put(Config.STORM_ZOOKEEPER_PORT,2181);

    config.put(Config.TOPOLOGY_WORKERS, 3);

    RemoteSubmitter.submitLocalTopologyWay1("word-count-test-1", config, 
            WordCountTopology.buildTopology(), // your topology
            "C:\\MyWorkspace\\project\\storm-sample-0.0.1-SNAPSHOT-jar-with-dependencies.jar");//the JAR file
} 
```

# php - 选择最新版本的课程

> ID：15781180
> 
> 赞同：0
> 
> 时间：2013-04-03T07:20:57.770
> 
> 标签：php, class, versioning, wordpress

我创建了几个使用公共类的 WordPress 插件。插件应该单独工作，理想情况下不需要将公共类作为单独的插件安装，但它们也可以在同一个安装中激活。现在我可以通过执行 class_exists 检查来防止多次加载该类，但我想更好地控制正在使用的类的哪个版本，最好是最新版本。这是因为用户可能没有更新其中一个插件，而它可能正是所使用的公共类的那个版本。有没有办法进行这样的检查？

我想防止这种情况发生：

*   用户安装了 2 个不同的插件：WPFoo 和 WPBar，它们都使用 MyClass。
*   用户拥有最新版本的 WPBar，但 WordPress 加载了旧版本的 MyClass，包含在 WPFoo 中，即使他已经在 WPBar 中拥有最新版本的 MyClass。
*   理想情况下，用户不必担心这一点，因为他已经拥有最新版本。

我想到了以下场景：

*   定义一个将存储类版本的全局变量 ($myclassversion)
*   WordPress 加载第一次出现的公共类并存储其版本
*   WordPress 出现了第二次出现的普通类。在加载类之前，将执行 class_exists 检查并将 $myclassversion 与此类版本进行比较。当此类版本较高时，*旧类未设置*，并加载新类。

但是，afaik 你不能通过简单地再次定义来取消设置/覆盖一个类，对吧？

* * *

一些附加信息：这些类已经分成不同的文件。我曾想过只是为每个插件命名不同的类，但最终他们修改了相同的内容，当他们一个接一个地这样做时会变得混乱（如果版本不同，每个方式都会略有不同）。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-03T07:33:22.690

只要您向包含版本的类添加一个常量，就有一种方法。像这样：

```
 class MyCommonClass {
 constant VERSION = '2';

 // Accessing via INSTANCE
 function showVersion() {
    echo  self::VERSION . "\n<br/>";
 }

 }

 // Accessing globally
 echo  MyCommonClass::VERSION . "\n<br/>";

 // Programmatically As of PHP 5.3.0

 $classname = "MyCommonClass";
 echo $classname::VERSION. "\n<br/>"; // As of PHP 5.3.0 
```

所以检查：

```
 if(class_exists("MyCommonClass")){
     if (MyCommonClass::VERSION < 2){
         echo "This plugin requires newest version of MyPackage\n<br/>";
         exit(0); 
     }
 }; 
```

您还可以将类划分为文件，并通过类检查相应地包含它们。

最后，不好的做法是将类包含在这样的文件中：

```
 <?php
 $versionOfclass = 2;
 if($versionOfClass >= $requiredVersionOfClass) {
 class MyClass {

 }
 }
 ?> 
```

其中 $requiredVersionOfClass 来自包含此内容的 php 文件。

# reflection - 如何使用 Invoke with Reflection 获取 ref 参数

> ID：15781182
> 
> 赞同：1
> 
> 时间：2013-04-03T07:21:11.563
> 
> 标签：reflection, parameter-passing, invoke, ref

如何使用 Invoke with Reflection 获取 ref 参数（OutputData）。objectValues 是一个带参数的对象数组，将参数发送到“FM_DEC_ENC”方法。该方法包含 8 个参数。其中之一是 outputData re 参数

```
 mInfo.Invoke("FM_DEC_ENC", BindingFlags.Public | BindingFlags.NonPublic | BindingFlags.Instance,
                 null, objectValues,null) 
```

* * *

```
public Int32 FM_DEC_ENC(String AdapterID, String SlotID, String InputData, 
        String DecKeyName, String EncKeyName, HsmCommConstants.ENCRIPTION DecEcbOrCbc,
        HsmCommConstants.ENCRIPTION EncEcbOrCbc, ref String OutputData) 
```

![](https://i.stack.imgur.com/aqU56.png)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-03T08:03:32.700

通过保留对参数数组的引用，您已经正确地做到了。当方法返回时，结果将在`objectValues[7]`.

`FM_DEC_ENC`请注意，如果是期望可修改缓冲区的本机方法`OutputData`（因为`System.String`无法修改），则这将不起作用。在这种情况下，[您还可以将 StringBuilder 指定为参数类型](http://msdn.microsoft.com/en-us/library/s9ts558h.aspx#cpcondefaultmarshalingforstringsanchor3)。

# javascript - javascript是否有类似API的概念

> ID：15781187
> 
> 赞同：3
> 
> 时间：2013-04-03T07:21:22.563
> 
> 标签：javascript, api

我主要用java编程，几乎没有javascript知识。
我的问题是 javascript 是否允许使用 API。例如，我有一个 javascript 应用程序，我希望像中间件 API 集一样向它公开一些函数。这个中间件也可以在 javascript 中。我想划分应用程序和中间件功能。我将同时实现应用程序和中间件。这是一个有效的用例还是我用错了方法。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-04-03T07:23:04.087

API 是一个抽象概念，JavaScript 与任何编程语言一样，允许定义和使用 API。

为了定义 API，将公共函数与内部字段和函数明确分离，一种流行的模式是基于[IIFE的](http://benalman.com/news/2010/11/immediately-invoked-function-expression/)[模块模式](http://javascriptplayground.com/blog/2012/04/javascript-module-pattern)。

这是一个示例，您可以在其中看到私有数据、一个私有函数和 3 个公共函数。

```
var countLib = (function(){
   var count = 0;
   var add = function(a) { count += a };
   return {
        getCount : function() { return count },
        increment : function() { add(1) },
        decrement : function() { add(-1) }
   }
})(); 
```

它允许你做

```
countLib.increment();
var count = countLib.getCount(); // gets 1 
```

内部`count`价值和`add`功能不暴露。

这种模式在许多流行的库中都有使用。jQuery 中使用的一个常见变体让库在上下文中分配自己：

```
(function(window){
   var count = 0;
   var add = function(a) { count += a };
   window.countLib = {
        getCount : function() { return count },
        increment : function() { add(1) },
        decrement : function() { add(-1) }
   }
})(window); 
```

这具有启用缩小器以减少`window`名称的次要优势，它还允许库分配多个名称（例如“jQuery”和“$”）。

这个例子还展示了另一个有用的模式的前提，命名空间：让事情变得清晰的一个重要部分是定义专用的命名空间，它是使用属性构建的：

```
 myLib = myLib || {};
 myLib.mySubLib1 = (function(){
      ...
 })(); 
```

`myLib`在这里，许多文件可以具有相同的模式：如果不存在，它们都将在第一行初始化。

您通常会结合这些模式来构建具有最小冲突风险（即不定义全局变量）并且不会暴露太多内部结构的美观库，以便您可以使实现不断发展。

对于更复杂的 API，您还可以定义类。

# javascript - 如何检查用户输入的范围？

> ID：15781192
> 
> 赞同：1
> 
> 时间：2013-04-03T07:21:47.817
> 
> 标签：javascript, html-table, conditional, parseint

我的目标是提示用户输入行数和列数以使用 Javascript 生成表格（请参阅下面的代码）。但是，行数/列数的范围应为 1 到 10（使用**`parseInt()`**& **`isNaN`**）。如果用户输入了超出该范围的数字，应该会出现“行号超出范围 - 再试一次，页面将重新加载”的警告，然后**`location.reload()`**将使用“ ”。我已经尝试了很多次，但都失败了。我是 Javascript 初学者，请帮帮我。

```
 <script type="text/javascript">
    var rows;
    var cols;
    do
    {
    rows = prompt("How many rows? 1-10");
    }
    while (isNaN(rows));

    do
    {
    cols = prompt("How many columns? 1-10");
    }
    while (isNaN(cols));

    </script>
    <style type="text/css">
    <!--
    table {
      border-spacing: 0px;
      width: 500px;
      border-collapse: collapse;
      margin: 20px auto;

    }
    td {
      border: solid 1px grey;      
    }
    -->
    </style>
  </head>
  <body>
    <table>

    document.write('<table border="1" cellspacing="1" cellpadding="2">');

    for(var i = 1; i <= rows; i++)
    {
       document.write('<tr>');    
       for( var x = 1; x <= cols; x++ )
    {
       document.write("<td>"+ ( i * x ) + "</td>");
        }
       document.write('</tr>');
    }

    document.write('</table>');

    -->
        </script> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-03T07:52:45.997

代替

```
 do
    {
    rows = prompt("How many rows? 1-10");
    }
    while (isNaN(rows));

    do
    {
    cols = prompt("How many columns? 1-10");
    }
    while (isNaN(cols)); 
```

和

```
 do
    {
    rows = prompt("How many rows? 1-10");
    if(isNaN(rows))
         alert("Row No. Should be a number");
    if((parseInt(rows) < 1) || (parseInt(rows) > 10))
        alert("Row No. Out of Range - Try Again");
    }
    while (isNaN(rows) || (parseInt(rows) < 1) || (parseInt(rows) > 10) );

    do
    {
    cols = prompt("How many columns? 1-10");
    if(isNaN(cols))
         alert("Col No. Should be a number");
    if((parseInt(cols) < 1) || (parseInt(cols) > 10))
        alert("Col No. Out of Range - Try Again");
    }
    while (isNaN(cols) || (parseInt(cols) < 1) || (parseInt(cols) > 10) ); 
```

警觉

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-03T07:36:49.887

代替

```
while (isNaN(rows)); 
```

和

```
while (isNaN(rows) || (parseInt(rows) < 1) || (parseInt(rows) > 10) ); 
```

# cordova - Phonegap 2.5.0 中的电子邮件编辑器

> ID：15781196
> 
> 赞同：1
> 
> 时间：2013-04-03T07:21:59.697
> 
> 标签：cordova, phonegap-plugins

您好我正在尝试在 Phonegap 2.5.0 中添加 EmailComposer，甚至尝试将其添加到 2.0.0 和 2.2.0 但得到与以下相同的错误 -

**

```
2013-04-03 15:17:57.748 email[1842:907] CDVPlugin class EmailComposer (pluginName: EmailComposer) does not exist.
2013-04-03 15:17:57.749 email[1842:907] ERROR: Plugin 'EmailComposer' not found, or is not a CDVPlugin. Check your plugin mapping in config.xml. 
```

**

我已经从 - [https://github.com/phonegap/phonegap-plugins/tree/master/iOS/EmailComposer下载了插件](https://github.com/phonegap/phonegap-plugins/tree/master/iOS/EmailComposer)

我有 -

1.  安装 MessageUI.Framework
2.  将 EmailComposer 添加到 config.xml
3.  将 *.h 和 *.m 文件添加到插件文件夹
4.  并在 WWW 文件夹中有 javascript 文件

仍然无法找到问题所在..它真的很紧急，因为我有一个截止日期，任何帮助将不胜感激

谢谢，丽塔

------config.xml----------

```
<plugins>
    <plugin name="EmailComposer" value="EmailComposer" />
    <plugin name="Device" value="CDVDevice" />
    <plugin name="Logger" value="CDVLogger" />
    <plugin name="Compass" value="CDVLocation" />
    <plugin name="Accelerometer" value="CDVAccelerometer" />
    <plugin name="Camera" value="CDVCamera" />
    <plugin name="NetworkStatus" value="CDVConnection" />
    <plugin name="Contacts" value="CDVContacts" />
    <plugin name="Debug Console" value="CDVDebugConsole" />
    <plugin name="Echo" value="CDVEcho" />
    <plugin name="File" value="CDVFile" />
    <plugin name="FileTransfer" value="CDVFileTransfer" />
    <plugin name="Geolocation" value="CDVLocation" />
    <plugin name="Notification" value="CDVNotification" />
    <plugin name="Media" value="CDVSound" />
    <plugin name="Capture" value="CDVCapture" />
    <plugin name="SplashScreen" value="CDVSplashScreen" />
    <plugin name="Battery" value="CDVBattery" />
    <plugin name="Globalization" value="CDVGlobalization" />
    <plugin name="InAppBrowser" value="CDVInAppBrowser" />
</plugins> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-05-29T15:45:27.337

我在进行 ios 开发时遇到了同样的问题，问题是我将 .h 和 .m 文件复制到了 finder 的文件夹中。我注意到在 xcode 中，“插件”文件夹是空的。然后我从 finder 的 Plugins 文件夹中删除了这些文件，然后将它们拖放到 xcode 项目中的 Plugins 文件夹中。这治愈了它。希望有所帮助-必须有一种方法可以以某种方式“刷新” xcode 在文件夹中看到的内容...

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-05-29T05:28:25.797

您是否在 index.html 中引用了 EmailComposer.js 文件

```
<script type="text/javascript" charset="utf-8" src="EmailComposer.js"></script> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-04T06:53:32.053

打开 .h 和 .m 文件并检查其内容是否正确。还要确保它们的标签正确，并且实际上是 EmailComposer.h 或 .m，它是文件扩展名，而不是名称的一部分。

最后，将插件条目放在插件列表的底部（应该没关系，但以防万一）。

# php - 为什么我不能运行超过两个连续的 jQuery ajax 调用？

> ID：15781199
> 
> 赞同：3
> 
> 时间：2013-04-03T07:22:14.927
> 
> 标签：php, javascript, ajax, jquery

我有一个页面试图通过 jQuery 运行 3 个连续的单独 ajax 调用。不幸的是，每次我加载页面时，只有两个 ajax 调用会运行。此外，这 3 个调用中的哪一个将运行并不一致。

这是 jQuery 代码（在 order.php 页面上）：

```
$.ajax({
       type: "Post",
       url: "includes/get_product_info.php",
       data: "id=7",
       success: function(data) {
             console.log('First One Works!');
       }
});

$.ajax({
      type: "Post",
      url: "includes/get_product_info.php",
      data: "id=6",
      success: function(data) {
            console.log('Second One Works!');
      }
});

$.ajax({
      type: "Post",
      url: "includes/get_product_info.php",
      data: "id=1",
      success: function(data) {
            console.log('Third One Works!');
      }
}); 
```

这是 PHP 脚本 (get_product_info.php)：

```
include("connection.php");
$conn = dbConnect('query');

$sql = 'SELECT *  
        FROM products
        WHERE product_id = ' . $_POST['id'];

$result = $conn->query($sql) or die(mysqli_error($conn));
$rows = array();

while($row = $result->fetch_assoc()) {
  $rows[] = $row;
}

echo json_encode($rows); 
```

当我多次加载 order.php 页面时，有时会显示“First One Works”和“Second One Works”，但有时会显示“Third One 有效”和“First One 有效”等。这表明，它只运行每次调用两个ajax，它们是随机的，它将运行哪些。

如何以正确的顺序运行所有三个 ajax 调用？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-03T07:25:19.433

您可以在 ajax 调用中设置 async : false ，例如：

```
$.ajax({
       type: "Post",
       url: "includes/get_product_info.php",
       data: "id=7",
       async: false,
       success: function(data) {
             console.log('First One Works!');
       }
}); 
```

它将按顺序执行所有内容，尽管 async : false 杀死了 ajax 的目的。

**编辑**

或者您可以使用 ajax 队列插件。

从文档：

该插件创建了一种新方法，可确保一次只运行一个 AJAX 请求。它等待前一个请求完成，然后使用 jQuery 的内置队列开始一个新请求。

[https://github.com/gnarf37/jquery-ajaxQueue](https://github.com/gnarf37/jquery-ajaxQueue)

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-04-03T07:30:04.713

这是一种不同的方法...

你不能把它们合并成一个电话吗？

jQuery：

```
$.ajax({
       type: "Post",
       url: "includes/get_product_info.php",
       data: "id[]=7&id[]=6&id[]=1",
       success: function(data) {
           // just an example of what to do here
           $(data).appendTo('body');
       }
}); 
```

PHP：

```
include("connection.php");
$conn = dbConnect('query');

$sql = 'SELECT *  
        FROM products
        WHERE product_id IN(' . implode(',', $_POST['id']) .')';

$result = $conn->query($sql) or die(mysqli_error($conn));
$rows = array();

while($row = $result->fetch_assoc()) {
  $rows[] = $row;
}

echo json_encode($rows); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-03T07:32:39.600

最好将每个调用包装在自己的函数中，然后，您应该在前一个回调中调用每个连续的 AJAX 调用，所以...

```
function one(){
  $.ajax({
    etc...
    success : two
  });
}
function two(){
  $.ajax({
    etc...
    success : three
  });
}
function three(){
  etc...
} 
```

您不需要包装函数`one,two,three...`，但它看起来更好，并且意味着您可以重用它们。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-04-03T07:31:00.507

也许是因为 jQuery.ajax()

> 执行异步 HTTP (Ajax) 请求。

您可以尝试添加 async: fasle （默认值：true），但请记住，它已作为[文档统计信息贬值](http://api.jquery.com/jQuery.ajax/)

> 从 jQuery 1.8 开始，不推荐在 jqXHR ($.Deferred) 中使用 async: false ；您必须使用成功/错误/完成回调选项而不是 jqXHR 对象的相应方法，例如 jqXHR.done() 或已弃用的 jqXHR.success()。

使用 always() 来调用下一个 ajax 调用，例如：

```
$.ajax({
       type: "Post",
       url: "includes/get_product_info.php",
       data: "id=7",
       success: function(data) {
             console.log('First One Works!');
       }
}).always( function() {
$.ajax({
      type: "Post",
      url: "includes/get_product_info.php",
      data: "id=6",
      success: function(data) {
            console.log('Second One Works!');
      }
});
} ).always( function() { ... ; 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-04-03T08:22:39.550

您应该使用 use 发送有序的异步请求`callback`。

```
// default callback function
var noop = function(){}

$.ajax({
    // other parameters
    success: function(res1){
       secondRequest(function(res2){
         thirdRequest(function(res3){
            console.log("finished");
         })
      });
    }
});

function secondRequest(callback) {
    $.ajax({
           // other parameters
           success:callback || noop
    });
}

function thirdRequest(callback) {
    $.ajax({
           // other parameters
        success:callback || noop
    });
} 
```

Const ：使用回调方法，我们正在编写嵌套的回调函数，因此您不能在完成第一个请求之前向服务器发送第二个请求。

也可能想看 [延期](http://api.jquery.com/category/deferred-object/)也。

# ruby-on-rails - 如何通过 form_for rails 传递对象？

> ID：15781207
> 
> 赞同：3
> 
> 时间：2013-04-03T07:22:36.737
> 
> 标签：ruby-on-rails, object, form-for

我有个问题。有一种形式，需要传入两个值和两个对象（teamh，teamq）。

```
<%= form_for (Score.new) do |f| %>
          <p>

            <%= f.hidden_field :team1, value: teamh %>
            <%= f.hidden_field :team2, value: teamq %>

            <%= f.text_field :team1_score %>
            <%= f.text_field :team2_score %>
          </p>
          <p><%= f.submit "Submit" %></p>
<% end %> 
```

试图通过对象隐藏字段。但是它们以这种形式传递

```
 <input id="score_team1" name="score[team1]" type="hidden" value="#&lt;Team:0x00000002db46b8&gt;" />
 <input id="score_team2" name="score[team2]" type="hidden" value="#&lt;Team:0x00000003335380&gt;" /> 
```

如何通过 form_for rails 传递对象？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-03T07:31:33.627

将`value:`选项设置为最终会在每个实例`teamh`上调用该方法，从而导致您看到的乱码。您应该传递一些唯一标识每个团队的标识符，例如他们的数据库 ID。例如，您可以将其更改为：`#to_s``#&lt;Team:0x00000002db46b8&gt;`

```
 <%= f.hidden_field :team1_id, value: teamh.id %>
    <%= f.hidden_field :team2_id, value: teamq.id %> 
```

在您的接收操作中，您的控制器代码可能如下所示：

```
k = Team.find params[:team1_id]
d = Team.find params[:team2_id]

Score.create team1: d, team2: k, team1_score: 1, team2_score: 3 
```

# java - 如何使用 DOM 检查返回的服务器代码？

> ID：15781211
> 
> 赞同：0
> 
> 时间：2013-04-03T07:22:42.437
> 
> 标签：java, android, xml, dom, xml-parsing

我从基于 REST 的 Web 服务获取数据，以 XML 格式输出数据。当我使用 DOM 并稍后将其解析为`doc`使用时，如果有任何错误，`DocumentBuilder`我将无法获取服务器。`HTTP Status Code`

那么，是否可以退货`HTTP Status Code`？

这是一个小片段：

```
url = "MY_URL";
DocumentBuilderFactory dbFactory = DocumentBuilderFactory.newInstance();
DocumentBuilder dBuilder = dbFactory.newDocumentBuilder();
Document doc = dBuilder.parse(new InputSource(url.openStream()));
doc.getDocumentElement().normalize(); 
```

任何建议都是非常可观的。
谢谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-03T07:35:55.447

你应该在你的代码中做一些改变来做到这一点：

```
URL url = new URL("MY_URL");
DocumentBuilderFactory dbFactory = DocumentBuilderFactory.newInstance();
DocumentBuilder dBuilder = dbFactory.newDocumentBuilder();
HttpURLConnection connection = (HttpURLConnection)url.openConnection();
Document doc = dBuilder.parse(new InputSource(connection.getInputStream()));
doc.getDocumentElement().normalize();
int code = connection.getResponseCode(); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-03T07:31:38.470

如果出现问题，url.openStream() 将抛出一个 IOException 指示错误。检查异常消息/原因以获取错误的详细信息。

# javascript - HTML / CSS 中不可编辑的页脚

> ID：15781216
> 
> 赞同：-3
> 
> 时间：2013-04-03T07:22:59.797
> 
> 标签：javascript, html, css

我对如何做到这一点有一个严重的心理空白，我记得我在某个时候能够做到，但忘记了我找到的代码并且再也找不到它了。

我需要使我的 HTML 文件的一部分不可更改。我制作了一个免费的 HTML 模板供用户从我的网站下载，但我希望“强制”他们在获得版权后在页脚中有一个指向我的电子邮件的链接。

所以我需要一些可以使用 HTML5/CSS3 和 Javascript 并且不依赖于 PHP 或任何服务器端脚本的代码。

如果有人可以提供帮助，那就太好了......或者如果您可以提供任何其他方式来做到这一点，那么对于我未来的项目也将非常好

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-03T07:51:57.393

当您发布源代码时，最好的办法是使用带有附加条件的许可证，即您的电子邮件包含在页脚中。

* * *

关于你关于人类的问题，也许页脚中的电子邮件对于他们的目的来说太显眼了。如果你给他们更多关于如何给你信用的自由，我相信大多数人都会很乐意遵守。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-03T07:55:34.453

如果你要发布源代码，你永远不能保证没有人会编辑它。由于 HTML/CSS/JS 只能以源代码形式分发（至少当您想在 Web 浏览器中显示它时），您永远无法保证它不会被更改。

您最好的选择是使用要求用户以您指定的方式将工作归于您的许可（在这种情况下，页脚中的链接返回到您的电子邮件，可读性很好）。但是，它不会阻止有犯罪意图的人。

# sql - 将图像保存在 SQL Server 或磁盘上

> ID：15781224
> 
> 赞同：2
> 
> 时间：2013-04-03T07:23:22.797
> 
> 标签：sql, sql-server

我有一个用 asp.net/c# 编写的 Web 应用程序我想知道哪个（将图像保存在数据库或硬盘上）具有更好的性能、安全性和灵活性

谢谢

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-04-03T07:27:28.750

如果您的 SQL Server 版本支持它，要考虑的一个选项是[FILESTREAM](http://technet.microsoft.com/en-us/library/bb933993%28v=sql.105%29.aspx)

> FILESTREAM 通过将 varbinary(max) 二进制大对象 (BLOB) 数据存储为文件系统上的文件，将 SQL Server 数据库引擎与 NTFS 文件系统集成。Transact-SQL 语句可以插入、更新、查询、搜索和备份 FILESTREAM 数据。Win32 文件系统接口提供对数据的流式访问。

这使您可以将文件保留在磁盘上，但与您存储在数据库中的其他数据保持事务一致性。

# delphi - Delphi XE3 - 将数据从 TBytesField 复制到另一个 TBytesField

> ID：15781225
> 
> 赞同：1
> 
> 时间：2013-04-03T07:23:23.703
> 
> 标签：delphi, delphi-xe3

我有一个带有 TBytesField 的 ADO 数据集（DataSet1），该字段的 DataSize 为 12。

我想将 TBytesField 数据复制到另一个具有 DataSize 12 的 TBytesField 的 DataSet。

我使用下面给出的代码行将字段值从 DataSet1 复制到 DataSet2：

```
DataSet2.Fields[0].Value := DataSet1.Fields[0].Value. 
```

此代码在 Delphi 2009 中工作，但在迁移到 Delphi XE3 后，这不再工作了。尝试设置值时会引发错误*“无效的变体类型” 。*我尝试使用`GetData`，`SetData`但出现了同样的错误。

我认为设置数据时 Delphi XE3 ADODB 代码存在错误。

有人遇到过这个问题吗？有什么建议么？

# python - 如何在 python 中一次发送一个异步 http 请求？

> ID：15781229
> 
> 赞同：5
> 
> 时间：2013-04-03T07:23:34.270
> 
> 标签：python, asynchronous, gevent, http-request

我们有一个工作队列，工人一次处理这些工作。每个作业都需要我们格式化一些数据并发出 HTTP POST 请求，数据作为请求负载。

我们如何让每个工作人员以单线程、非阻塞的方式异步发出这些 HTTP POST 请求？我们不关心请求的响应——我们想要的只是让请求尽快执行，然后让工作人员立即进入下一个工作。

我们已经探索了使用`gevent`和`grequests`库（请参阅[为什么 gevent.spawn 在调用 Greenlet.join 之前不执行参数化函数？](https://stackoverflow.com/questions/15777274/why-does-gevent-spawn-not-execute-the-parameterized-function-until-a-call-to-gre)）。我们的工作代码如下所示：

```
def execute_task(worker, job):

    print "About to spawn request"
    greenlet = gevent.spawn(requests.post, url, params=params)

    print "Request spawned, about to call sleep"
    gevent.sleep()

    print "Greenlet status: ", greenlet.ready() 
```

第一个 print 语句执行，但第二个和第三个 print 语句永远不会被打印，并且 url 永远不会被命中。

我们如何才能让这些异步请求执行？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-21T15:51:46.227

您可能希望使用该[`join`](http://www.gevent.org/gevent.html#gevent.Greenlet.join)方法而不是`sleep`然后检查状态。如果你想一次执行一个，那将解决问题。稍微修改您的代码以测试它似乎工作正常。

```
import gevent
import requests

def execute_task(worker, job):

    print "About to spawn request"
    greenlet = gevent.spawn(requests.get, 'http://example.com', params={})

    print "Request spawned, about to call sleep"
    gevent.sleep()

    print "Greenlet status: ", greenlet.ready()
    print greenlet.get()

execute_task(None, None) 
```

给出结果：

```
About to spawn request
Request spawned, about to call sleep
Greenlet status:  True
<Response [200]> 
```

这个 Python 进程中是否还有更多可能阻止 Gevent 运行这个 greenlet？

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-03T07:41:51.610

1) 制作一个 Queue.Queue 对象

2）创建尽可能多的“工作”线程，循环并从 Queue.Queue 中读取

3) 将作业提供给 Queue.Queue

工作线程将按照放置顺序读取 Queue.Queue

从文件中读取行并将它们放入 Queue.Queue 的示例

```
import sys
import urllib2
import urllib
from Queue import Queue
import threading
import re

THEEND = "TERMINATION-NOW-THE-END"

#read from file into Queue.Queue asynchronously
class QueueFile(threading.Thread):
    def run(self):
        if not(isinstance(self.myq, Queue)):
            print "Queue not set to a Queue"
            sys.exit(1)
        h = open(self.f, 'r')
        for l in h:
            self.myq.put(l.strip())  # this will block if the queue is full
        self.myq.put(THEEND)

    def set_queue(self, q):
        self.myq = q

    def set_file(self, f):
        self.f = f 
```

了解工作线程可能是什么样的（仅示例）

```
class myWorker(threading.Thread):
    def run(self):
        while(running):           
            try:
                data = self.q.get()  # read from fifo

                req = urllib2.Request("http://192.168.1.10/url/path")
                req.add_data(urllib.urlencode(data))
                h1 = urllib2.urlopen(req, timeout=10)
                res = h1.read()
                assert(len(res) > 80)

            except urllib2.HTTPError, e:
                print e

            except urllib2.URLError, e:
                print "done %d reqs " % n
                print e
                sys.exit() 
```

要使基于 threading.Thread 的对象运行，请创建对象然后在实例上调用“start”

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-03T07:49:02.223

您必须在不同的线程中运行它或使用内置的 asyncore 库。大多数库都会在你不知道的情况下使用线程，或者它将依赖于 Python 的标准部分 asyncore。

这是线程和异步的组合：

```
#!/usr/bin/python
# -*- coding: iso-8859-15 -*-
import asyncore, socket
from threading import *
from time import sleep
from os import _exit
from logger import *  # <- Non-standard library containing a log function
from config import *  # <- Non-standard library containing settings such as "server"

class logDispatcher(Thread, asyncore.dispatcher):
    def __init__(self, config=None):
        self.inbuffer = ''
        self.buffer = ''
        self.lockedbuffer = False
        self.is_writable = False

        self.is_connected = False

        self.exit = False
        self.initated = False

        asyncore.dispatcher.__init__(self)
        Thread.__init__(self)

        self.create_socket(socket.AF_INET, socket.SOCK_STREAM)
        try:
            self.connect((server, server_port))
        except:
            log('Could not connect to ' + server, 'LOG_SOCK')
            return None

        self.start()

    def handle_connect_event(self):
        self.is_connected = True

    def handle_connect(self):
        self.is_connected = True
        log('Connected to ' + str(server), 'LOG_SOCK')

    def handle_close(self):
        self.is_connected = False
        self.close()

    def handle_read(self):
        data = self.recv(8192)
        while self.lockedbuffer:
            sleep(0.01)

        self.inbuffer += data

    def handle_write(self):
        while self.is_writable:
            sent = self.send(self.buffer)
            sleep(1)

            self.buffer = self.buffer[sent:]
            if len(self.buffer) <= 0:
                self.is_writable = False
            sleep(0.01)

    def _send(self, what):
        self.buffer += what + '\r\n'
        self.is_writable = True

    def run(self):
        self._send('GET / HTTP/1.1\r\n')

while 1:
    logDispatcher() # <- Initate one for each request.
    asyncore.loop(0.1)
    log('All threads are done, next loop in 10', 'CORE')
    sleep(10) 
```

或者你可以简单地做一个线程来完成这项工作然后死掉。

```
from threading import *
class worker(Thread):
    def __init__(self, host, postdata)
        Thread.__init__(self)
        self.host = host
        self.postdata = postdata
        self.start()
    def run(self):
        sock.send(self.postdata) #Pseudo, create the socket!

for data in postDataObjects:
    worker('example.com', data) 
```

如果您需要限制线程数（如果您发送的帖子超过 5k 条左右，可能会对系统造成负担），只需执行 a`while len(enumerate()) > 1000: sleep(0.1)`并让 looper 对象等待几个线程消失。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-04-03T07:49:42.010

将你的 url 和 params 包装在一个列表中，然后每次将一对弹出到任务池（这里的任务池要么有一个任务，要么是空的），创建线程，从任务池中读取任务，当一个线程获得任务并发送请求，然后从您的列表中弹出另一个（即这实际上是一个队列列表）

# java - 如果在java中后跟两个或更多空格/空格，则使用字符串标记器拆分单词？

> ID：15781234
> 
> 赞同：-4
> 
> 时间：2013-04-03T07:23:41.707
> 
> 标签：java, split, tokenize, stringtokenizer

在我的字符串中，我想基于两个或多个空格来标记字符串。

前任

```
String str = "I am  Chaitanya Gadam.      Split   this string."
StringTokenizer tokenizer = new StringTokenizer(str);
while (tokenizer.hasMoreTokens()) 
{
    String token = tokenizer.nextToken();
    System.out.println("==Token== : "+token);
} 
```

我出来了：

```
==Token== : [I]
==Token== : [am]
==Token== : [Chaitanya]
==Token== : [Gadam.]
==Token== : [split]
==Token== : [this]
==Token== : [string.] 
```

但所需的输出应该是：

```
==Token== : [I am]
==Token== : [Chaitanya Gadam.]
==Token== : [split]
==Token== : [this string.] 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-03T07:33:28.940

您可以`regex`在`String.split(regex)`方法中使用它。

```
String[] tokens = str.split("  +"); 
```

**更新：-**

如果您需要删除前导和尾随空格，`trim()`然后拆分您的字符串。

```
str = str.trim(); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-03T07:28:05.130

这应该工作 -

```
 String[] array = str.split("\\s{2,}");
    for (String word : array) {
        System.out.println(word);
    } 
```

# iphone - UITabBar 保持 UIPickerView 的底部显示

> ID：15781235
> 
> 赞同：1
> 
> 时间：2013-04-03T07:23:44.057
> 
> 标签：iphone, uiview, uipickerview, uitabbar

我试图在`viewDidLoad`方法被调用后立即显示选择器视图。但是，`UITabBar`阻止显示选择器视图的某些部分。如何将选择器视图带到前面`UITabBar`？pickerview 是一个`UIView`子类。编码：

```
- (void)viewDidLoad
{
    [super viewDidLoad];
    self.pickerView = [[AllPickerView alloc] initWithdelegate:self];
    [self.pickerView showInView:self.view];

} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-03T07:26:53.513

您可以在显示选择器视图时隐藏标签栏，也可以使用：

```
[[UIApplication sharedApplication].keyWindow addSubview:self.pickerView]; 
```

或者如果你愿意，你可以添加它`TabBarViewController`

```
[self.tabBarController.view addSubview:...]; or 
[self.tabBarController.tabBar addSubview:...]; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-03T07:28:30.097

正确设置框架

```
 [self.pickerView  setFrame:CGRectMake(0, self.view.frame.size.height-self.pickerView .bounds.size.height, self.pickerView .bounds.size.width, pickerView.bounds.size.height)]; 
```

编辑：

使用添加子视图而不是 showInView

```
[self.view addSubView:self.pickerView]; 
```

# javascript - Mozilla Rhino 字符编码

> ID：15781237
> 
> 赞同：0
> 
> 时间：2013-04-03T07:23:46.247
> 
> 标签：javascript, character-encoding, rhino

有人可以为我描述如何在 JavaScript Rhino 中正确指定字符编码吗？

我相当熟悉整理 Java 应用程序和数据库 (MySQL) 之间以及应用程序和浏览器之间的编码问题，但这个问题似乎涉及 shell 和文件 i/o。

我有一个主要用 JavaScript 编写的应用程序，它在 Rhino 上运行，可以在 Apache Tomcat 中运行，也可以通过 Rhino shell 独立运行。

所有 js 源代码都保存为 UTF-8（在 Eclipse 中），并使用 Rhino shell 的“加载”功能或（如果在 Tomcat 中运行）通过以下方式加载到 Rhino：

```
public static void loadScript( String sFile ) throws Exception {
    java.io.BufferedReader oReader = new java.io.BufferedReader(
        new java.io.InputStreamReader( new java.io.FileInputStream( sDir + sFile ), "UTF-8" ) );
    org.mozilla.javascript.Context cx = contextFactory.enterContext();
    try {
        cx.evaluateReader( scope, oReader, sFile, 1, null );
    } finally {
        org.mozilla.javascript.Context.exit();
    }
    oReader.close();
} 
```

从应用程序输出时，源代码中指定的“£”和“€”等字符会损坏。

任何帮助都感激不尽...

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-03T16:34:39.900

这不是犀牛的问题。必须使用“UTF-8”编码支持正确读取源文件。

您可以考虑在这里查看相关主题：[阅读任何具有奇怪编码的文本文件？](https://stackoverflow.com/questions/15511703/java-how-to-read-any-text-file-having-strange-encoding)

# chef-infra - Vagrant and Knife Solo（或任何其他非 Vagrant Chef Env）的最佳常见工作流程？

> ID：15781240
> 
> 赞同：8
> 
> 时间：2013-04-03T07:23:51.720
> 
> 标签：chef-infra, vagrant, knife, chef-solo

离开 Chef 一段时间后，我目前正在回到它来满足我所有的服务器需求。几年前我已经使用了一段时间并且很喜欢它，但最近让其他人做了操作部分。

但是我仍然在努力寻找一个非常好的开始设置（本地 Vagrant+Chef）来进行开发。单独使用 Vagrant 是一件轻而易举的事，超级容易使用，并且在其上开发服务器设置相当快。但是一旦我不得不离开 Vagrant 进行实际部署，它就会再次变得烦人。我不能总是使用 Vagrant 盒子，但有时在某个地方使用 Rackspace 甚至是实际的硬件盒子。

现在我这样做如下：

针对 Vagrant 进行开发，尽量减少 Vagrantfile 中的实际配置

*   主要使用角色，并为我的常用环境预定义默认属性
*   仅在 Vagrantfile 中指定节点特定属性
*   在步骤之间直接从 VirtualBox 手动快照运行 vagrant 配置，以避免一直从头开始重新构建

暂存并实际部署服务器：

将 Rackspace Cloud（至少暂存）与 Knife Solo 一起使用

*   从 Web 界面创建 Rackspace 服务器以通过（roo@ip 和密码）为所有服务器提供一致的第一个配置步骤
*   将公钥身份验证添加到服务器，因此不再需要密码
*   为新服务器添加本地节点配置，复制 Vagrantfile 中定义的内容
*   使用刀单独准备+引导服务器

这已经不是那么糟糕了，但仍然有一些有时很烦人的小故障：

*   来自 VirtualBox 的 Vagrant 手动快照（我还没有找到任何可用的插件）
*   节点配置和 Vagrantfile 之间的冗余（可能让 Vagrantfile 解析节点配置并以这种方式使用值）
*   Vagrant 和 Knife Solo 之间的引导不一致（如果我弄清楚如何将它添加到 Vagrant (*1)，可能会为两者使用一个通用脚本）

除此之外，我不得不遗憾地发现，厨师的食谱已经广泛地成长为一个由不相容和固执己见的人工制品组成的丛林。有时甚至很难使用默认配方进行基本设置。我有点惊讶，很多基础知识都几乎没有涵盖：

让 sshd+iptables 的组合工作我花了一天的时间研究，然后仍然修改默认模板以使其工作 - 虽然我希望它成为几乎所有服务器的起点。此外，似乎没有任何默认的厨师用户工作流程。到目前为止，我发现的所有内容要么以 root 身份运行，要么需要进行相当多的修改。最后但并非最不重要的一点是，厨师（在 ubuntu 12.04 上）仍然使用 ruby​​ 1.8.7，它在短短几个月内就即将结束。

可能是我只是没有找到合适的资源来涵盖我目前仍在努力或满意的所有要点，但似乎仍有很多方法可以改进它。

**那么 vagrant + chef 如何在真实环境中（不仅仅是本地虚拟盒子）为您工作，还有哪些需要注意的陷阱？**

似乎在本地通过 vagrant 进行所有自动引导变得非常棒，但是一旦超出范围，事情就会变得非常混乱。如果人们也使用类似这样的设置可以给我一些关于如何解决上述问题的指示，我会很高兴。我不介意付出一些努力来让它像我期望的那样运行，但也许我已经走错了部分，只是让自己更加困难，实际上需要这样做；）

现在简短的总结是：Vagrand+ChefSolo (KnifeSolo) 非常棒，但要正常工作，整个引导部分需要我们在应用食谱之前切换为自定义部分以获得适当的系统基础 - 这些需要小心从丛林中挑选出来。

进展/更新说明

(*1): 刚刚想通了，纯粹靠运气，很明显可以在一个 Vagrantfile 中添加多个供应机制：

```
config.vm.provision :shell, path: 'bootstrap.ubuntu-12.04.2-server-amd64.sh'
  config.vm.provision :chef_solo do |chef|
    ...
  end 
```

由于首先执行 shell，我可以将它用作 Vagrant 服务器的自定义准备，同时仍然使用 Chef-Solo 进行实际设置。耶。最后仍然必须看看这会有多有用，但现在有一个缺失的步骤可以使流程保持一致。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-06-29T22:38:22.840

你甚至可以做不止一个供应机制的实例。

我在笔记本电脑上运行了一个 squid 代理，所以我的标准 Vagrantfile 包括一个 shell 提供程序，它在 /etc/profile.d/proxy.sh 中设置一个指向我的 squid 的全局 http 代理，以及另一个复制 CentOS 存储库的 shell 提供程序将文件放入使用特定镜像而不是使用最快镜像的虚拟机中，以便最大限度地减少缓存未命中。在这些运行之后，Vagrantfile 中有一个 Chef 提供程序，它实际配置了 VM。

# android - 通过 SQLite 数据库使用 EditText 中的文本更新 ListView

> ID：15781242
> 
> 赞同：0
> 
> 时间：2013-04-03T07:23:59.863
> 
> 标签：android, sqlite, listview, android-edittext

我想做一个评论栏（一个 EditText），其中一个人的评论将被添加到 SQLite DB 中，评论将显示在 ListView 中。我尝试这样做，但最终导致应用程序崩溃。在加载到模拟器时它说。“不幸的是，SQLproj 已停止”。我在尖叫我做了什么。请帮帮我。几个小时以来我一直坚持下去

**我的activity_main.xml（布局**）

```
<?xml version="1.0" encoding="utf-8"?>
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:layout_width="match_parent"
    android:layout_height="match_parent"
    android:orientation="vertical"
    >

    <EditText 
        android:id="@+id/edittext"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:hint="Please Share Your Valuable Reviews"
        />
   <Button 
       android:id="@+id/button"
       android:text="Submit"
       android:layout_width="match_parent"
       android:layout_height="match_parent"
       />

    <ListView 
         android:id="@android:id/list"
        android:layout_width="match_parent"
        android:layout_height="match_parent"
        ></ListView>

    </LinearLayout> 
```

**我的 Pojo 课**

```
package com.example.sqlproj;

public class Comment {

    public long id;
    public String comment;
    public long getId() {
        return id;
    }
    public void setId(long id) {
        this.id = id;
    }
    public String getComment() {
        return comment;
    }
    public void setComment(String comment) {
        this.comment = comment;
    }
    @Override
    public String toString()
    {
        return comment;
    }

} 
```

**我的 SQLiteHelper 类：**

```
package com.example.sqlproj;

import android.content.Context;
import android.database.sqlite.SQLiteDatabase;
import android.database.sqlite.SQLiteDatabase.CursorFactory;
import android.database.sqlite.SQLiteOpenHelper;

public class MySQLiteHelper extends SQLiteOpenHelper {

    public  static final String Table_Name="Reviews";
    public  static final String DB_Name="Reviews";
    public  static final int DB_Version=1;
    public  static final String Column_Id="_id";
    public  static final String Column_Name="Comments";
    public  static final String DB_Create="create table" +Table_Name+ "(" +Column_Id+ "integer primary key autoincrement," +Column_Name+"text not null);";

    public MySQLiteHelper(Context context) {
        super(context, DB_Name, null, DB_Version);
        // TODO Auto-generated constructor stub
    }
    @Override
    public void onCreate(SQLiteDatabase db) {
        // TODO Auto-generated method stub
        db.execSQL(DB_Create);
    }
    @Override
    public void onUpgrade(SQLiteDatabase db, int oldVersion, int newVersion) {
        // TODO Auto-generated method stub

    }

} 
```

**应用类：**

```
package com.example.sqlproj;

import java.util.ArrayList;
import java.util.List;

import android.content.ContentValues;
import android.content.Context;
import android.database.Cursor;
import android.database.sqlite.SQLiteDatabase;

public class CommentsDataSource {

    public SQLiteDatabase database;
    public MySQLiteHelper dbhelper;
    public String[] allcolumns= {dbhelper.Column_Id,dbhelper.Column_Name};

    public CommentsDataSource(Context context)
    {
        dbhelper= new MySQLiteHelper(context);
    }

    public void open()
    {
        database = dbhelper.getWritableDatabase();
    }

    public void close()
    {
        dbhelper.close();
    }

    public Comment createComment(String comment)
    {
        ContentValues cv = new ContentValues();
        cv.put(dbhelper.Column_Name, comment);
        long id= database.insert(dbhelper.Table_Name, null, cv); 
        Cursor cursor = database.query(dbhelper.Table_Name, allcolumns, null, null, null, null, null);
        cursor.moveToFirst();
        Comment newcomment =  commentSetter(cursor);
        return newcomment;
    }

    public Comment commentSetter(Cursor cursor)
    {
        Comment comment = new Comment();
        comment.setId(cursor.getLong(0));
        comment.setComment(cursor.getString(1));
        return comment;

    }

    public List<Comment> getallComments()
    {
        List<Comment> comments = new ArrayList<Comment>();
        Cursor cursor = database.query(dbhelper.Table_Name, allcolumns, null, null, null, null, null);
        cursor.moveToFirst();
        while(!cursor.isAfterLast())
        {
            Comment comment = commentSetter(cursor);
              comments.add(comment);
              cursor.moveToNext();
        }
        cursor.close();
        return comments;
    }

} 
```

**主要活动课程**

```
package com.example.sqlproj;

import java.util.ArrayList;
import java.util.List;

import android.app.ListActivity;
import android.os.Bundle;
import android.view.View;
import android.widget.ArrayAdapter;
import android.widget.EditText;

public class MainActivity extends ListActivity {

    public CommentsDataSource datasource;

     @Override
      public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.activity_main);
        datasource = new CommentsDataSource(this);
        datasource.open();
        List<Comment> comments= datasource.getallComments();
        ArrayAdapter<Comment> adapter = new ArrayAdapter<Comment>(this,
                android.R.layout.simple_list_item_1, comments);
        setListAdapter(adapter);
     }

     public void onClick(View view)
     { 
         Comment comment=null;
         ArrayAdapter<Comment> adapter = (ArrayAdapter<Comment>) getListAdapter();
         EditText edittext = (EditText) findViewById(R.id.edittext);
         String com=edittext.getText().toString();
         datasource.createComment(com);
         adapter.add(comment);
         adapter.notifyDataSetChanged();
     }

     @Override
      protected void onResume() {
        datasource.open();
        super.onResume();
      }

      @Override
      protected void onPause() {
        datasource.close();
        super.onPause();
      }

    } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-04T11:19:38.063

在 MySQLiteHelper

解决这个问题 ：

```
public  static final String DB_Create="create table" +Table_Name+ "(" +Column_Id+ "integer primary key autoincrement," +Column_Name+"text not null);"; 
```

对此：

```
public  static final String DB_Create = "create table " + Table_Name + "(" + Column_Id + " integer primary key autoincrement, " + Column_Name + " text not null " + );"; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-04T11:27:24.310

`onCreate(db)`在下面的方法中添加它。因为不调用`onCreate(db)` **你的数据库是不会创建的**。因为当你使用`SQLiteOpenHelper`then`onUpgrade`方法时首先调用。

```
@Override
    public void onUpgrade(SQLiteDatabase db, int oldVersion, int newVersion) {
        // TODO Auto-generated method stub
       onCreate(db); // add this line
    } 
```

# html - 构建 haxe nme 项目的 html5 版本时出现问题

> ID：15781243
> 
> 赞同：0
> 
> 时间：2013-04-03T07:24:01.230
> 
> 标签：html, flash, haxe, nme

我尝试构建[nme-runnermark](https://github.com/elsassph/nme-runnermark)的 html5 画布版本，但没有取得任何重大成功。flash 版本构建没有任何问题。我收到以下一堆错误：

```
/usr/lib/haxe/lib/nme/3,5,5/browser/utils/ByteArray.hx:22: characters 46-47 : Property initialization is not allowed
/usr/lib/haxe/lib/nme/3,5,5/browser/utils/ByteArray.hx:24: characters 27-28 : Member variable initialization is not allowed outside of class constructor
/usr/lib/haxe/lib/nme/3,5,5/browser/utils/ByteArray.hx:26: characters 29-30 : Member variable initialization is not allowed outside of class constructor
/usr/lib/haxe/lib/nme/3,5,5/browser/utils/ByteArray.hx:30: characters 33-38 : Member variable initialization is not allowed outside of class constructor
/usr/lib/haxe/lib/nme/3,5,5/browser/display/DisplayObject.hx:833: characters 28-52 : Cannot access to private field nmeValidateMatrix
/usr/lib/haxe/lib/nme/3,5,5/browser/text/TextField.hx:905: lines 905-909 : Field get_width has different visibility (public/private) than superclass one
/usr/lib/haxe/lib/nme/3,5,5/browser/text/TextField.hx:236: lines 236-262 : Field nmeGetObjectUnderPoint has different visibility (public/private) than superclass one
/usr/lib/haxe/lib/nme/3,5,5/browser/display/DisplayObject.hx:610: characters 3-20 : Cannot access to private field nmeSetFlag
/usr/lib/haxe/lib/nme/3,5,5/browser/text/TextField.hx:265: lines 265-302 : Field nmeRender has different visibility (public/private) than superclass one
/usr/lib/haxe/lib/nme/3,5,5/browser/text/TextField.hx:740: characters 3-29 : Cannot access to private field nmeInvalidateBounds
/usr/lib/haxe/lib/nme/3,5,5/browser/text/TextField.hx:916: characters 3-29 : Cannot access to private field nmeInvalidateBounds
/usr/lib/haxe/lib/nme/3,5,5/browser/text/TextField.hx:912: lines 912-935 : Field set_width has different visibility (public/private) than superclass one
/usr/lib/haxe/lib/nme/3,5,5/browser/display/DisplayObject.hx:519: characters 3-43 : Cannot access to private field nmeGetInteractiveObjectStack
/usr/lib/haxe/lib/nme/3,5,5/browser/display/DisplayObject.hx:431: characters 3-43 : Cannot access to private field nmeGetInteractiveObjectStack
/usr/lib/haxe/lib/nme/3,5,5/browser/display/DisplayObject.hx:446: characters 4-24 : Cannot access to private field nmeDispatchEvent
/usr/lib/haxe/lib/nme/3,5,5/browser/display/DisplayObject.hx:478: characters 4-24 : Cannot access to private field nmeDispatchEvent
/usr/lib/haxe/lib/nme/3,5,5/browser/display/Bitmap.hx:62: lines 62-88 : Field nmeGetObjectUnderPoint has different visibility (public/private) than superclass one
/usr/lib/haxe/lib/nme/3,5,5/browser/display/Bitmap.hx:91: lines 91-148 : Field nmeRender has different visibility (public/private) than superclass one
/usr/lib/haxe/lib/nme/3,5,5/browser/display/DisplayObject.hx:1110: characters 3-34 : Cannot access to private field nmeInvalidateBounds
/usr/lib/haxe/lib/nme/3,5,5/browser/display/DisplayObject.hx:1116: characters 3-30 : Cannot access to private field nmeInvalidateBounds
/usr/lib/haxe/lib/nme/3,5,5/browser/display/DisplayObject.hx:1301: characters 4-30 : Cannot access to private field nmeInvalidateBounds
/usr/lib/haxe/lib/nme/3,5,5/browser/display/DisplayObject.hx:1328: characters 4-30 : Cannot access to private field nmeInvalidateBounds
/usr/lib/haxe/lib/nme/3,5,5/browser/display/Shape.hx:29: lines 29-33 : Field nmeGetGraphics has different visibility (public/private) than superclass one
/usr/lib/haxe/lib/nme/3,5,5/browser/display/Shape.hx:36: lines 36-50 : Field nmeGetObjectUnderPoint has different visibility (public/private) than superclass one
/usr/lib/haxe/lib/nme/3,5,5/browser/display/DisplayObject.hx:299: characters 6-30 : Cannot access to private field nmeGetGraphics
/usr/lib/haxe/lib/nme/3,5,5/browser/display/DisplayObject.hx:323: characters 48-73 : Cannot access to private field _topmostSurface
/usr/lib/haxe/lib/nme/3,5,5/browser/display/Sprite.hx:38: lines 38-42 : Field nmeGetGraphics has different visibility (public/private) than superclass one
/usr/lib/haxe/lib/nme/3,5,5/browser/display/DisplayObjectContainer.hx:212: lines 212-222 : Field nmeBroadcast has different visibility (public/private) than superclass one
/usr/lib/haxe/lib/nme/3,5,5/browser/utils/ByteArray.hx:441: characters 59-65 : Unknown identifier : length
/usr/lib/haxe/lib/nme/3,5,5/browser/utils/ByteArray.hx:441: characters 68-76 : Unknown identifier : position
/usr/lib/haxe/lib/nme/3,5,5/browser/utils/ByteArray.hx:446: characters 9-21 : Unknown identifier : littleEndian
/usr/lib/haxe/lib/nme/3,5,5/browser/utils/ByteArray.hx:453: characters 2-14 : Unknown identifier : littleEndian
/usr/lib/haxe/lib/nme/3,5,5/browser/utils/ByteArray.hx:453: characters 2-14 : Invalid assign
/usr/lib/haxe/lib/nme/3,5,5/browser/utils/ByteArray.hx:35: characters 19-28 : Unknown identifier : allocated
/usr/lib/haxe/lib/nme/3,5,5/browser/utils/ByteArray.hx:122: characters 2-14 : browser.utils.ByteArray has no field length
/usr/lib/haxe/lib/nme/3,5,5/browser/utils/ByteArray.hx:122: characters 17-32 : browser.utils.ByteArray has no field allocated
/usr/lib/haxe/lib/nme/3,5,5/browser/utils/ByteArray.hx:260: characters 12-25 : browser.utils.ByteArray has no field position
/usr/lib/haxe/lib/nme/3,5,5/browser/utils/ByteArray.hx:263: characters 9-22 : browser.utils.ByteArray has no field position
/usr/lib/haxe/lib/nme/3,5,5/browser/utils/ByteArray.hx:265: characters 25-38 : browser.utils.ByteArray has no field position
/usr/lib/haxe/lib/nme/3,5,5/browser/utils/ByteArray.hx:274: characters 67-80 : browser.utils.ByteArray has no field position
/usr/lib/haxe/lib/nme/3,5,5/browser/utils/ByteArray.hx:278: characters 27-40 : browser.utils.ByteArray has no field position
/usr/lib/haxe/lib/nme/3,5,5/browser/utils/ByteArray.hx:279: characters 88-101 : browser.utils.ByteArray has no field position
/usr/lib/haxe/lib/nme/3,5,5/browser/utils/ByteArray.hx:283: characters 27-40 : browser.utils.ByteArray has no field position
/usr/lib/haxe/lib/nme/3,5,5/browser/utils/ByteArray.hx:284: characters 27-40 : browser.utils.ByteArray has no field position
/usr/lib/haxe/lib/nme/3,5,5/browser/utils/ByteArray.hx:285: characters 109-122 : browser.utils.ByteArray has no field position
/usr/lib/haxe/lib/nme/3,5,5/browser/net/URLLoader.hx:150: characters 37-48 : browser.utils.ByteArray has no field length 
```

我注意到自从我将nme升级到3.5.5版本后，这些问题就开始出现了。这不仅发生在 nme-runnermark 上，而且通常发生在我尝试构建 html5 版本的几乎所有 nme 项目中。我的下一个尝试是摆脱当前版本的 nme，并尝试使用旧版本。

无论如何，我想知道是否有其他人遇到类似的问题

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-05-01T06:43:08.270

NME 3.5.5 需要 Haxe 2.10 或最新版本。下载并安装它，它应该没问题。

# jquery - 计算高度并添加到变量

> ID：15781249
> 
> 赞同：0
> 
> 时间：2013-04-03T07:24:32.320
> 
> 标签：jquery

再会

我有以下函数计算每个 div 的高度并将其添加到变量中，但它不起作用：

JS：

```
$('#latestInner, #make, #models').each(function() {
    var i = 0;
    var h = $(this).outerHeight();
    i = i + h;
});
alert(i); 
```

HTML：

```
<div id="latestInner"></div>
<div id="make"></div>
<div id="models"></div> 
```

CSS：

```
#models {height: 100px; background: red;}
#latestInner {height: 200px; background: green;}
#make {height: 150px; background: blue;} 
```

小提琴：http : [//jsfiddle.net/uwsJH/7/](http://jsfiddle.net/uwsJH/7/)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-03T07:28:00.137

你的问题是范围界定。

试试这个小提琴：

[http://jsfiddle.net/uwsJH/9/](http://jsfiddle.net/uwsJH/9/)

```
i=0;
$('#latestInner, #make, #models').each(function() {
   // var i = 0; <--- wrong scope
    var h = $(this).outerHeight();
    i = i + h;
});
alert(i); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-03T07:26:30.337

因为 i 是一个局部变量。尝试 i = 0 ，而不是 var i =0

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-03T07:27:13.097

试试这个 ：

```
var i = 0;
$('#latestInner, #make, #models').each(function() {

var h = $(this).css("height");
i = i + h;
}); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-04-03T07:26:38.780

您不需要`var i`每次都初始化...您可以这样做：

```
var i = 0;
$('#latestInner, #make, #models').each(function() {

    var h = $(this).outerHeight();
    i = i + h;
    //Or simply
    i = i + $(this).outerHeight();
});
alert(i); 
```

# google-chrome - Chrome 开发工具栏的时间轴选项卡中的“文档计数”计数器是什么？

> ID：15781250
> 
> 赞同：28
> 
> 时间：2013-04-03T07:24:43.533
> 
> 标签：google-chrome, memory-profiling, web-developer-toolbar

有人可以解释一下 Chrome 开发工具栏的时间轴选项卡中的“文档计数”计数器代表什么吗？

在我的应用程序中，我使用 iframe 并在其中一个页面的一组页面中导航。目前“文档计数”计数器显示的值范围是 23-32，它代表什么？

提前致谢。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-08-29T20:58:14.260

据我了解，这很重要`documents`和 iframe - 我不确定什么完全符合文档的条件。我刚刚遇到您的问题，因为 Chrome 报告我有两个文档，但我没有任何 iframe，并且不清楚什么是`document`

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2016-03-31T11:52:24.193

它是检查的渲染过程中的活动文档资源的数量。根据文档：

> 我的页面是否使用了太多内存？- 时间轴内存视图和 Chrome 任务管理器可以帮助您确定您是否使用了过多的内存。**内存视图可以跟踪检查的渲染过程中的活动 DOM 节点、文档和 JS 事件侦听器的数量。**作为经验法则：避免持有对不再需要使用的 DOM 元素的引用，取消绑定不需要的事件侦听器，并在存储不打算使用的大块数据时小心。

参考： [https ://developer.chrome.com/devtools/docs/javascript-memory-profiling#questions-to-ask-yourself](https://developer.chrome.com/devtools/docs/javascript-memory-profiling#questions-to-ask-yourself)

您的应用程序可能会加载文档资源（[一旦文档的所有资源（图像和 CSS 文件等）已完全加载，就会触发 load 事件](https://developer.chrome.com/devtools/docs/timeline#domcontentloaded-and-load-event-markers)）然后关闭它们。要验证某个应用程序操作不会造成泄漏（例如，通常一对直接和反向操作，例如[打开文档，然后关闭它，不应该留下任何垃圾](https://developer.chrome.com/devtools/docs/javascript-memory-profiling#comparison-view)），您可以将多个快照相互比较。

# wcf - ASMX 到 WCF 的迁移

> ID：15781251
> 
> 赞同：0
> 
> 时间：2013-04-03T07:24:49.710
> 
> 标签：wcf, migration, asmx

我是 WCF 的新手。

目前我正在尝试将我当前的 asmx 服务项目升级到 WCF。--> 我在 .net 2.0 中开发了一个虚拟客户端（Windows 应用程序）。--> 然后我为那个客户开发了一个 asmx 服务。它可以正常工作。--> 在此之后，我将当前的 asmx 项目升级到 WCF（具有 backword 兼容性）而不更改方法定义。--> 现在我试图通过更改客户端 app.config 文件中的 URL 来访问 WCF 服务方法。--> 当客户端调用服务方法时，它会转到服务器上的正确方法，但服务器将所有参数都设为 0 。即使在服务器返回有效结果后，客户端也会变为 null。

请帮忙 ...

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-03T08:56:12.060

您的代码可能会很有帮助。

此外，请从验证您的方法上的参数名称是否与您的服务合同定义**中的相同（包括大小写）开始。**

# objective-c - 如何访问另一个类中的实例变量

> ID：15781257
> 
> 赞同：2
> 
> 时间：2013-04-03T07:25:04.133
> 
> 标签：objective-c, instance-variables

我在class1中有一个实例变量，它保存整数值（tableview中的单元格数），我想在另一个类（例如class2）中使用这个变量，但我不知道使用哪种语法？？？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-03T07:27:08.187

« 如果可能，使用成员变量。

```
@interface MyClass : NSObject  
{
    int score;
}
@property (nonatomic, assign) int score;
@end

@implementation MyClass
@synthesize score;
@end

//access
MyClass *object = [MyClass alloc] init];
object.score = 99; 
```

« 你也可以使用 NSUserDefault

```
// Snippet used to save your highscore in the prefs.
int highScore  = yourGameScore;
[[NSUserDefaults standardUserDefaults] setObject:[NSNumber numberWithInt:highScore] forKey:@"HighScore"];
[[NSUserDefaults standardUserDefaults] synchronize];

// Snippet used to get your highscore from the prefs.
highScore = [[[NSUserDefaults standardUserDefaults] objectForKey:@"HighScore"] intValue ]; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-03T07:40:31.997

你可以这样做：

例如：您想从 to 传递一个`Class1`字符串`Class2`。

首先在 Class2 中创建 String 并将其定义为属性，如下所示`Class2.h`：

```
NSString *classTwoString;
@property (nonatomic, retain) NSString *classTwoString; 
```

在`Class2.m`：

```
@synthesize classTwoString; 
```

然后，例如，您想在`Class1`触摸按钮时传递字符串。在其操作（创建`IBAction`，将其与按钮链接`touchesUpInside`）中，您可以将其设置为获取第二类的实例，例如：

```
Class2 *class2 = [[Class2 alloc] init];    
class2.classTwoString= classOneString; 
```

我建议上面的方法。

`NSUserDefaults`如果应用程序崩溃，使用- 可能会丢失存储的值。

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2013-04-03T07:28:57.307

您可能想要使用属性。这是一个例子：

Class1.h

```
@property int myValue 
```

Class1.m

```
self.myValue = 2 
```

Class2.m

```
int v = instanceOfClass1.myValue 
```

这是一个关于使用属性的教程的链接：[http ://www.raywenderlich.com/2712/using-properties-in-objective-c-tutorial](http://www.raywenderlich.com/2712/using-properties-in-objective-c-tutorial)

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2013-04-03T07:30:35.170

```
@implementation classA {
    int v;
}

id x = [[classA alloc] init];
x->v = 123; 
```

谷歌搜索“objective c instance variable”并找到了这篇文章。 [http://blog.ablepear.com/2010/04/objective-c-tuesdays-instance-variables.html](http://blog.ablepear.com/2010/04/objective-c-tuesdays-instance-variables.html)

# zooming - OLECMDID_OPTICAL_ZOOM 中的“缩放因子”是什么意思？

> ID：15781260
> 
> 赞同：2
> 
> 时间：2013-04-03T07:25:11.647
> 
> 标签：zooming, webbrowser-control

我正在使用 ExecWB() 来放大/缩小我的 WebBrowser 控件，如下所示：

```
m_lpBrowser->ExecWB(OLECMDID_OPTICAL_ZOOM, OLECMDEXECOPT_DONTPROMPTUSER, &(CComVariant)zoomFactor, NULL); 
```

当我的操作系统 dpi 为 100% (96 dpi) 时，这工作得很好。但是，在 OS dpi 150% (144 dpi) 下，将缩放系数设置为 100 会使浏览器中的网页看起来更小。（我希望得到与 OS dpi 100% 下完全相同的布局）

然后我找到了一个旧的[IE8 文档](https://tracker.moodle.org/secure/attachment/13577/Zoom.pdf)。

在本文档中，`OLECMDID_OPTICAL_ZOOM`据说是设置`ZOOM FACTOR`浏览器的 ( `ZOOM FACTOR = System DPI / Layout DPI`)

但我就是想不通 的意思`Layout DPI`。这是我获得较小网页的根本原因吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-10T08:12:36.197

[This MSDN document](http://msdn.microsoft.com/en-us/library/cc849094%28v=vs.85%29.aspx) mentioned there is a flag `DOCHOSTUIFLAG_DPI_AWARE` controlling the High DPI behaviour of the web control.

When the flag is set during initialization, the web control uses IE8 High DPI behavior; otherwise, it uses IE7 High DPI behaviour by default.

Under IE8 High DPI behaviour, the parameter **zoom factor** means exactly the scaling percentage of the web page, just like what you see in the IE zoom UI.

However, under IE7 High DPI behaviour, it's a little bit more complicated. Based on my experiment result,

> the actual scaling factor = zoom factor / system dpi(%)

For example, under system 120dpi(125%), setting zoom factor 125 result in 1.0x scaling of web pages.

However, there is still something I can't explain: under system 120dpi(125%), I was expecting to get 80% scaling of web pages when I set zoom factor of 100\. It turns out that words are 80% of their original size, but the pictures still 100%. Perhaps it is a bug in IE7 zooming.

# android - 在 Android 中以编程方式设置墙纸

> ID：15781265
> 
> 赞同：0
> 
> 时间：2013-04-03T07:25:33.927
> 
> 标签：android, imageview, wallpaper

我在 android 中设置墙纸时遇到问题。我使用了以下代码，但它不起作用。

这是代码：

```
 final WallpaperManager wallpaperManager = WallpaperManager.getInstance(this);
 public void onClick(DialogInterface dialog, int item) {
             // TODO Auto-generated method stub
             try {
                wallpaperManager.setBitmap(i.getDrawingCache());
            } catch (IOException e) {
                // TODO Auto-generated catch block
                e.printStackTrace();
            }

                }
        });

  public View getView(int position, View convertView, ViewGroup parent) {

         ImageView i = new ImageView(mContext);
         i.setImageResource(mImageIds[position]);
         i.setScaleType(ImageView.ScaleType.FIT_XY); 

         BitmapDrawable drawable = (BitmapDrawable) i.getDrawable();
         drawable.setAntiAlias(true);
         return i;

           } 
```

谁能帮帮我！！@谢谢！！

错误：

我得到`Null pointer exception`：

```
04-03 12:52:29.344: E/AndroidRuntime(600): FATAL EXCEPTION: main
04-03 12:52:29.344: E/AndroidRuntime(600): java.lang.NullPointerException
04-03 12:52:29.344: E/AndroidRuntime(600):  at com.example.androiddatingapp.gallery$1$1.onClick(gallery.java:74)
04-03 12:52:29.344: E/AndroidRuntime(600):  at com.android.internal.app.AlertController$AlertParams$3.onItemClick(AlertController.java:873)
04-03 12:52:29.344: E/AndroidRuntime(600):  at android.widget.AdapterView.performItemClick(AdapterView.java:284)
04-03 12:52:29.344: E/AndroidRuntime(600):  at android.widget.ListView.performItemClick(ListView.java:3513)
04-03 12:52:29.344: E/AndroidRuntime(600):  at android.widget.AbsListView$PerformClick.run(AbsListView.java:1812)
04-03 12:52:29.344: E/AndroidRuntime(600):  at android.os.Handler.handleCallback(Handler.java:587)
04-03 12:52:29.344: E/AndroidRuntime(600):  at android.os.Handler.dispatchMessage(Handler.java:92)
04-03 12:52:29.344: E/AndroidRuntime(600):  at android.os.Looper.loop(Looper.java:123)
04-03 12:52:29.344: E/AndroidRuntime(600):  at android.app.ActivityThread.main(ActivityThread.java:3683)
04-03 12:52:29.344: E/AndroidRuntime(600):  at java.lang.reflect.Method.invokeNative(Native Method)
04-03 12:52:29.344: E/AndroidRuntime(600):  at java.lang.reflect.Method.invoke(Method.java:507)
04-03 12:52:29.344: E/AndroidRuntime(600):  at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:839)
04-03 12:52:29.344: E/AndroidRuntime(600):  at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:597)
04-03 12:52:29.344: E/AndroidRuntime(600):  at dalvik.system.NativeStart.main(Native Method) 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-12-13T10:52:49.997

尝试这个。

```
public void onClick(DialogInterface dialog, int item) {
         // TODO Auto-generated method stub
         try {
            wallpaperManager.setResource(mImageIds[item]);
        } catch (IOException e) {
            // TODO Auto-generated catch block
            e.printStackTrace();
        }

            }
    }); 
```

# android - 为同一会话设置读取和发布权限

> ID：15781266
> 
> 赞同：1
> 
> 时间：2013-04-03T07:25:36.580
> 
> 标签：android, facebook, session, facebook-graph-api, permissions

嘿，我正在尝试使用两种不同类型的权限。

我知道我不能像这样一起设置 LoginButton authButton 的权限：

```
LoginButton authButton = (LoginButton) view.findViewById(R.id.authButton);
authButton.setReadPermissions(Arrays.asList("friends_games_activity"));
authButton.setPublishPermissions(Arrays.asList("publish_actions")); 
```

我需要打电话

```
authButton.clearPermissions(); 
```

它们之间

但是如果用户例如读取数据并且现在需要通过单击“SEND SCORE”按钮发送例如分数 他需要再次按下登录按钮

有没有办法在不重新连接并按下登录按钮的情况下更改会话权限？

如何毫无问题地添加 2 个权限（friends_games_activity 和 publish_actions）？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-03T16:37:00.060

查看 SDK 附带的 Scrumptious 示例应用程序。特别是 SelectionFragment 类。里面有一个叫做handleAnnounce的方法，它显示了请求额外权限的推荐方式。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-05-04T01:10:19.027

```
 LoginButton authButton = (LoginButton) view.findViewById(R.id.authButton);
    authButton.setPublishPermissions("publish_actions");
    authButton.setFragment(this);
    Session.NewPermissionsRequest newPermissionsRequest = new 
            Session.NewPermissionsRequest(this, Arrays.asList("friends_games_activity"));
    Session.getActiveSession().requestNewReadPermissions(newPermissionsRequest); 
```

# java - 如何在 Eclipse 中备份用户库？

> ID：15781269
> 
> 赞同：2
> 
> 时间：2013-04-03T07:25:40.310
> 
> 标签：java, eclipse

我在一个项目中有 100 多个罐子。我已经为其中的大多数手动定义了源 jar 位置，以便在 IDE 中方便地使用 javadoc。

现在，如果我必须在另一台机器上配置 IDE，我不想再经历整个过程。

我可以备份用户库定义并将其导入另一个 Eclipse 实例吗？

只要使 javadoc 在 Eclipse 中可用并且不需要为每个 jar 链接源 jar 重复手动工作，就欢迎使用变通方法。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-03T07:35:27.373

在 Eclipse 中选择窗口 -> 首选项。在首选项对话框中选择 Java -> 构建路径 -> 用户库。在右侧列表中选择您的库并将其导出。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-03T07:33:20.837

考虑使用诸如 Maven 之类的工具来管理您的依赖项。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-03T07:35:43.357

窗口 -> 首选项

Java -> 构建路径 -> 用户库 -> 按钮导入和导出

# mysql - 如何编写一个查询，在多组行中聚合具有最新日期的单行？

> ID：15781270
> 
> 赞同：1
> 
> 时间：2013-04-03T07:25:41.327
> 
> 标签：mysql, sql

我有一个 MySQL 表，其中每个人都有很多行，我想编写一个查询来聚合具有特殊约束的行。（每人一份）

例如，假设该表由以下数据组成。

```
name   date                    reason
---------------------------------------
John   2013-04-01 14:00:00     Vacation
John   2013-03-31 18:00:00     Sick
Ted    2012-05-06 20:00:00     Sick
Ted    2012-02-20 01:00:00     Vacation
John   2011-12-21 00:00:00     Sick
Bob    2011-04-02 20:00:00     Sick 
```

我想看看“原因”列的分布。如果我只写如下查询

```
select reason, count(*) as count from table group by reason 
```

然后我将能够看到这个表的整体原因。

```
reason       count
------------------
Sick         4
Vacation     2 
```

但是，我只对每个人的单一原因感兴趣。应该计算的原因应该来自人员记录中最新日期的行。例如，John 的最新原因是`Vacation`，而 Ted 的最新原因是`Sick`。而 Bob 的最新原因（也是唯一的原因）是`Sick`.

该查询的预期结果应如下所示。（计数总和为 3，因为只有 3 人）

```
reason      count
-----------------
Sick        2
Vacation    1 
```

是否可以编写一个查询，以便在我想查看原因的分布（计数）时计算单个最新原因？

以下是有关该表的一些事实。

*   该表有几千万行
*   大多数时候，每个人都有一个理由。
*   有些人有多种原因，但 99.99% 的人有少于 5 个原因。
*   有大约 30 个不同的原因，而有数百万个不同的名称。
*   该表根据日期范围进行分区。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-03T07:31:39.770

```
SELECT T.REASON, COUNT(*) 
FROM
(
 SELECT PERSON, MAX(DATE) AS MAX_DATE
 FROM TABLE-NAME
 GROUP BY PERSON
) A, TABLE-NAME T
WHERE T.PERSON = A.PERSON AND T.DATE = A.MAX_DATE
GROUP BY T.REASON 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-03T08:34:17.310

您正在寻找的解决方案似乎可以通过以下查询解决：

```
select 
    reason, 
    count(*) 
from (select * from tablename group by name) abc 
group by 
    reason 
```

它非常快速和简单。您可以查看[SQL Fiddle](http://www.sqlfiddle.com/#!2/45427/2)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-03T09:48:15.120

如果此答案与现有答案重复，我们深表歉意。也许我患有某种形式的失语症，但我看不到它......

```
SELECT x.reason
     , COUNT(*) 
  FROM absentism x 
  JOIN 
     ( SELECT name,MAX(date) max_date FROM absentism GROUP BY name) y
    ON y.name = x.name 
   AND y.max_date = x.date 
 GROUP 
    BY reason; 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-04-03T08:50:44.360

在 MySQL 中，执行这种查询效率不高，因为您无法访问SQL Server或[Oracle](https://stackoverflow.com/questions/6218902/over-clause-when-and-why-is-it-useful)[中的分区查询](http://msdn.microsoft.com/fr-fr/library/ms189461.aspx)等工具。 您仍然可以通过执行子查询来模拟它，并根据您需要的条件检索行，这里是最大日期：

```
SELECT t.reason, COUNT(1) 
FROM
(
     SELECT name, MAX(adate) AS maxDate
     FROM @aTable
     GROUP BY name
) maxDateRows
    INNER JOIN @aTable t ON maxDateRows.name = t.name
                        AND maxDateRows.maxDate = t.adate
GROUP BY t.reason 
```

[您可以在此处查看示例。](https://data.stackexchange.com/stackoverflow/query/106296/how-can-i-write-a-query-that-aggregate-a-single-row-with-latest-date-among-multip)
在你的样本上测试这个查询，但我担心它会很慢。

为了您的信息，您可以在 SQL Server 中以更优雅和更快的方式执行相同的操作：

```
SELECT reason, COUNT(1)
FROM
(
     SELECT name
          , reason
          , RANK() OVER(PARTITION BY name ORDER BY adate DESC) as Rank
     FROM @aTable
     ) AS rankTable
WHERE Rank = 1
GROUP BY reason 
```

[样品在这里](https://data.stackexchange.com/stackoverflow/query/106306/how-can-i-write-a-query-that-aggregate-a-single-row-with-latest-date-among-multip)

如果你真的卡在MySql上，而且第一次查询太慢，那么你可以拆分问题。

执行第一个查询创建表：

```
CREATE TABLE maxDateRows AS
SELECT name, MAX(adate) AS maxDate
FROM @aTable
GROUP BY name 
```

然后在 name 和 maxDate 上创建索引。
最后，得到结果：

```
SELECT t.reason, COUNT(1) 
FROM maxDateRows m
    INNER JOIN @aTable t ON m.name = t.name
                        AND m.maxDate = t.adate
GROUP BY t.reason 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-04-03T07:37:29.273

尝试这个

```
select reason, count(*) from 
(select reason from table where date in 
    (select max(date) from table group by name)) t 
group by reason 
```

# python - 与常数的矩阵乘法

> ID：15781271
> 
> 赞同：1
> 
> 时间：2013-04-03T07:25:48.670
> 
> 标签：python, matrix, matrix-multiplication

我想将给定的 1x1x3 矩阵乘以一个常数值。

```
a= [[[1, 2, 3]]] 
```

预期的结果是

```
a*3 = [[[3,6,9]]] 
```

请帮我解决这个问题

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-03T07:27:25.983

使用[NumPy](http://www.numpy.org/)：

```
In [1]: import numpy as np

In [2]: a = np.array([[[1, 2, 3]]])

In [3]: a
Out[3]: array([[[1, 2, 3]]])

In [4]: a*3
Out[4]: array([[[3, 6, 9]]]) 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-03T07:28:42.997

尝试：

```
a= [[[1, 2, 3]]]
for i in range(len(a[0][0])):
    a[0][0][i] *= 3

print a 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-03T07:31:01.783

这是使用列表推导的一种方法：

```
>>> a = [[[1, 2, 3]]]
>>> b = [[x*3 for x in a[0][0]]]
>>> b
[[3, 6, 9]] 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-04-03T07:32:22.677

这是一种使用纯 Python 的方法：

```
a3 = [[[el * 3 for el in col] for col in row] for row in a] 
```

这适用于任何形状的 3D 矩阵，而不仅仅是 1x1x3。

但是，如果这是您需要定期做的事情，我会鼓励您学习[NumPy](http://www.numpy.org/)。然后你就可以写：

```
a3 = a * 3 
```

# activerecord - 如何处理分布式 Gem 中的 ActiveRecord 迁移？

> ID：15781272
> 
> 赞同：0
> 
> 时间：2013-04-03T07:25:51.310
> 
> 标签：activerecord, gem, rails-migrations

我正在尝试使用没有 Rails 的 ActiveRecord 将应用程序编写为 gem。

我的问题是如何迁移已经由没有 rake 的用户部署的数据库等。我刚刚分发了一个 schema.rb 文件并从中创建了数据库。但现在我想允许用户更新到新的 gem 并迁移他们的数据库。

我看过 ActiveRecord::Migrator，但不知道如何使用它。

例如，我如何告诉 ActiveRecord::Migrator 从 current_migration 运行所有迁移？

有人对如何解决这个问题或一个好的参考有任何建议吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-03T16:44:52.033

今天早上在这个新鲜的地方之后，我想出了以下效果很好：

```
module Byr
  module Db

    class << self
      attr_accessor :config
      attr_accessor :adapter
      attr_accessor :db_name
    end

    def self.create_sqlite(config)
      require 'sqlite3'
      config = config.merge('database' => File.join(Byr.db_dir, config['database']))
      ActiveRecord::Base.establish_connection(config)
    end

    def self.create_pg(config)
      require 'pg'
      # Connect to the postgres db to create the db
      ActiveRecord::Base.establish_connection(config.merge('database' => 'postgres',
                                                           'schema_search_path' => 'public'))
      begin
        result = ActiveRecord::Base.connection.create_database(config['database'])
      rescue PG::Error, ActiveRecord::StatementInvalid => e
        unless e.message =~ /already exists/
          raise
        end
      end
      true
    end

    def self.mysql_creation_options(config)
      @charset   = ENV['CHARSET']   || 'utf8'
      @collation = ENV['COLLATION'] || 'utf8_unicode_ci'
      {:charset => (config['charset'] || @charset), :collation => (config['collation'] || @collation)}
    end

    def self.create_mysql(config)
      require 'mysql2'
      error_class = config['adapter'] =~ /mysql2/ ? Mysql2::Error : Mysql::Error
      begin
        ActiveRecord::Base.establish_connection(config.merge('database' => nil))
        ActiveRecord::Base.connection.create_database(config['database'], mysql_creation_options(config))
        ActiveRecord::Base.establish_connection(config)
      rescue error_class => sqlerr
        access_denied_error = 1045
        if sqlerr.errno == access_denied_error
          print "#{sqlerr.error}. \nPlease provide the root password for your mysql installation\n>"
          root_password = $stdin.gets.strip
          grant_statement = "GRANT ALL PRIVILEGES ON #{config['database']}.* " \
          "TO '#{config['username']}'@'localhost' " \
          "IDENTIFIED BY '#{config['password']}' WITH GRANT OPTION;"
          ActiveRecord::Base.establish_connection(config.merge(
                                                               'database' => nil, 'username' => 'root', 'password' => root_password))
          ActiveRecord::Base.connection.create_database(config['database'], mysql_creation_options(config))
          ActiveRecord::Base.connection.execute grant_statement
          ActiveRecord::Base.establish_connection(config)
        else
          Byr.warn sqlerr.error
          Byr.warn "Couldn't create database for #{config.inspect}, charset: #{config['charset'] || @charset}, collation: #{config['collation'] || @collation}"
          Byr.warn "(if you set the charset manually, make sure you have a matching collation)" if config['charset']
        end
      rescue ActiveRecord::StatementInvalid => e
        ActiveRecord::Base.establish_connection(config)
      end
    end

    def self.migrate
      sys_migration_dir = File.join(Byr.install_dir, "db/migrate")
      ActiveRecord::Migration.verbose = true
      ActiveRecord::Migrator.migrate(sys_migration_dir)
    end

    def self.connected?
      ActiveRecord::Base.connected? and
        ActiveRecord::Base.connection_config[:adapter] == adapter
    end

    def self.disconnect
      ActiveRecord::Base.connection_pool.disconnect!
    end

    # Really only for testing
    def self.drop_db
      ActiveRecord::Base.connection.drop_database(Byr.db_config)
    end
  end
end 
```

然后，通过迁移初始化数据库：

```
module Byr
  class << self
    attr_accessor :install_dir
    attr_accessor :db_dir
    attr_accessor :config_dir
    attr_accessor :config_file
    attr_accessor :config
    attr_accessor :db_config
    attr_accessor :adapter
    attr_accessor :database
  def self.create_db
    case db_config['adapter']
    when /postgresql/
      Byr::Db.create_pg(db_config)
    when /sqlite/
      Byr::Db.create_sqlite(db_config)
    when /mysql/
      Byr::Db.create_mysql(db_config)
    else
      raise ByrError "Your config.yml file specifies an unknown database adapter \'#{config['adapter']}\'"
    end
  end

  def self.connect_db(reconnect = false)
    unless reconnect
      return true if Byr.connected?
    end
    ActiveRecord::Base.establish_connection(db_config)
  end

  def self.migrate
    Byr::Db.migrate
  end

  def self.init(connect = true, adapter = nil)
    adapter = canonicalize_adapter(adapter) if adapter
    setup_db_config
    if connect
      create_db and connect_db and migrate
    end
  end
end 
```

省略了一些不相关的代码部分，但我希望这对其他人有帮助。

很多困难的东西来自 rails 中的 rake 任务。

# java - 我怎样才能让它接受浮动点数

> ID：15781273
> 
> 赞同：-3
> 
> 时间：2013-04-03T07:25:53.967
> 
> 标签：java, eclipse

我的问题是在代码中它不接受浮点数所以我应该对代码部分进行任何更改请建议我..

{ 线程“main”中的异常 java.lang.NumberFormatException：对于输入字符串：“320.9”

```
at java.lang.NumberFormatException.forInputString(Unknown Source)
at java.lang.Integer.parseInt(Unknown Source)
at java.lang.Integer.parseInt(Unknown Source)
at org.lrap.otc.OTCVerification.verifyOtc(OTCVerification.java:26) 
```

//代码部分//int bill=Integer.parseInt(strArray[2].trim());

```
at org.lrap.main.Main.run(Main.java:68) 
```

//代码部分//boolean retVal=OTCVerification.getOTCVerificationObj().verifyOtc(message);

```
at org.lrap.main.Main.main(Main.java:111) 
```

只是调用运行函数}感谢所有帮助我的人。:-)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-03T07:27:20.437

> 对于输入字符串：“320.9”
> 
> 在 java.lang。**Integer.parseInt** (未知来源)

用于`Double.parseDouble`解析带分数的数字。不是`Integer.parseInt`。

如果输入可能不是机器格式的数字，那么您应该使用[`DecimalFormat.parse`](http://docs.oracle.com/javase/6/docs/api/java/text/DecimalFormat.html#parse%28java.lang.String,%20java.text.ParsePosition%29)适当的区域设置来识别使用本地约定格式化的数字（例如欧洲部分地区的 320,9）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-03T10:07:33.930

要转换“浮点数”，您还应该注意使用的[`NumberFormat`](http://docs.oracle.com/javase/7/docs/api/java/text/NumberFormat.html). 如果您要转换字符串“320.9”，则在大多数语言环境中都可以。如果您的程序在“法国”机器上运行，则浮点数可能以“320,9”的形式出现。

Double.parse 仅适用于“。” 作为分隔符（正确地说，它取决于 sun.misc.FloatingDecimal.readJavaFormatString(String in)）。因此，如果您可以依靠该分隔符，则可以[`Double.parse`](http://docs.oracle.com/javase/7/docs/api/java/lang/Double.html#parseDouble%28java.lang.String%29)

如果你必须处理这两种情况，你可以使用这样的东西：

```
final String num = "320,9";
final NumberFormat nf_french = NumberFormat.getInstance(Locale.FRENCH); // French Number Format (= xxx,yyy) 
final double result_french = nf_french.parse(num).doubleValue(); // => 320.9
final NumberFormat nf_us = NumberFormat.getInstance(Locale.US); // US Number Format (= xxx.yyy) 
final double result_us = nf_us.parse(num).doubleValue(); // => 3209.0 !! 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-03T07:27:46.233

好吧，如果你想要一个浮点数，请使用[`Double.parseDouble`](http://docs.oracle.com/javase/7/docs/api/java/lang/Double.html#parseDouble%28java.lang.String%29)or [`new BigDecimal`](http://docs.oracle.com/javase/7/docs/api/java/math/BigDecimal.html)。

```
double target = Double.parseDouble(theString);
// Or
BigDecimal target = new BigDecimal(theString); 
```

如果您想要一个整数，请使用[`String#indexOf`](http://docs.oracle.com/javase/7/docs/api/java/lang/String.html#indexOf%28int%29)查找`.`，然后使用[`String#substring`](http://docs.oracle.com/javase/7/docs/api/java/lang/String.html#substring%28int%29)仅获取 之前的数字`.`，然后继续使用`Integer.parseInt`。

```
int index = theString.indexOf('.');
if (index >= 0) {
    theString = theString.substring(0, index);
}
int target = Integer.parseInt(theString); 
```

或者，正如[Mike Samuel](https://stackoverflow.com/users/20394/mike-samuel)在下面的评论中指出的那样，使用`Double.parseDouble`然后转换为`int`：

```
int target = (int)Double.parseDouble(theString); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-04-03T07:32:03.863

```
Integer.parseInt(String s) 
```

用于将有效字符串转换为整数。值应介于 -2,147,483,648 到 2,147,483,647 之间。它不会接受任何浮点数。

要转换为浮点数，您可以使用`Double.parseDouble or new BigDecimal.`

# php - yii 中的文本字段或下拉列表

> ID：15781274
> 
> 赞同：0
> 
> 时间：2013-04-03T07:25:54.080
> 
> 标签：php, yii

我有两张桌子：supa 和acts。Supa 表有 ID 作为主键，Acts 表有 supa_ID 作为连接这些表的外键。现在在 Supa 表中，我有一个名为“oznaka”的字段。我想创建一个文本字段，我将在其中放置“oznaka”，但在后台假设获取 Supa 表的 ID，与表 Acts 连接，找到 supa_ID 并将他放在那里。我在使用控制器功能时遇到问题 - 我想我只使用视图 - 控制器。这并不难，但我真的有麻烦:(

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-03T07:30:08.483

```
<?php echo $form->dropDownList($model,'item_type_id', CHtml::listData(ItemType::model()->findAll(), 'id', 'type'), array('empty'=>'select Type')); ?> 
```

这是 Yii 中创建下拉列表的基本用法，从数据库中填充。如果您想要文本框，您可以在收到某些输入后进行 ajax 调用，以检查数据库中是否有与此输入对应的内容。如果有，在控制器中向某个隐藏的输入字段添加新值并在表单提交时获取该数据。

# netty - Netty 4 中的缓冲区所有权：如何管理缓冲区生命周期？

> ID：15781276
> 
> 赞同：10
> 
> 时间：2013-04-03T07:25:55.980
> 
> 标签：netty

我一直在尝试编写一个 HTTP 客户端来同时获取多个提要（最多 1k），这也是学习 Netty 4 的练习。

我的问题是，是否有一个很好的解释新的 ByteBuf 基础设施是如何工作的？谁“拥有”它们，它们是如何共享的（它们是吗？）？ChannelPipeline 中的每个 ChannelHandler 是否都有自己的 ByteBuf？

这是一个让我感到困惑的例子：

我将以下类的实例添加到 HTTP 客户端管道：

```
public class MyFilter extends MessageToMessageDecoder<HttpObject> {

    @Override
    protected Object decode(ChannelHandlerContext ctx, HttpObject msg) throws Exception {
        // do some work, but leave msg unchanged
        BufUtil.retain(msg); // Why do I need to call BufUtil.retain(msg) ???
        return msg;
} 
```

如果我不在 msg 上调用 BufUtil.retain，它似乎会得到 GCd，我会得到各种虚假错误。

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-04-04T08:17:53.930

`HttpContent`扩展`ReferenceCounted`以跟踪它所持有的缓冲区的生命周期。当 a`ReferenceCounted`被实例化时，它以`refCnt`of开始它的生命`1`。如果你调用`retain()`它，`refCnt`是增加的。 `refCnt`在 上减少`release()`，并且底层资源（`ByteBuf`在这种情况下）一旦`refCnt`变为 就被销毁`0`。

通常，处理程序不需要保留对其完成处理的消息的引用，因为消息通常在处理后被丢弃或转换为其他内容。因此，`release()`一旦您的处理程序处理完消息，就必须在消息上调用方法。这通常容易出错，并且很容易导致资源泄漏。

为避免难以追踪的泄漏，请在处理完消息后自动对消息进行`SimpleChannelInboundHandler`扩展。`release()`

有关 Netty 中引用计数的更多信息，请阅读[此 wiki 页面](http://netty.io/wiki/reference-counted-objects.html)。它还为您提供了有关如何利用 Netty 的缓冲区泄漏检测机制排除缓冲区泄漏的详细信息。

# java - 使用 (XStream) 将对象序列化/反序列化为 XML

> ID：15781280
> 
> 赞同：1
> 
> 时间：2013-04-03T07:26:08.077
> 
> 标签：java, xml, gson, xstream

尝试“反序列化”对象时出现此错误：

```
Cannot construct MyClass as it does not have a no-args constructor. 
```

查看文档，这意味着 XStream 没有运行`enhanced mode`？

但是，在同一个 JVM 中并使用同一个类，该`Google Gson`库可以毫无问题地序列化和反序列化对象：

```
MyClass c;
c = (MyClass) new Gson().fromJson(json, MyClass.class); 
```

那么为什么 XStream 不能对 XML 做 Gson 对 JSON 做的事情呢？这很容易在 XStream 代码中打补丁，还是一个不容易解决的限制？

我需要能够序列化/反序列化对象，即使是那些没有使用这个 XStream 库的构造函数的对象。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-04T22:06:50.243

XStream 要求您的类有一个没有参数的构造函数。

这些构造函数不必是公开的，但它们必须存在。

# python - 将单词插入文本的功能

> ID：15781284
> 
> 赞同：-4
> 
> 时间：2013-04-03T07:26:17.553
> 
> 标签：python

我有这样的文字：

```
text = "All human beings are born free and equal in dignity and rights. They are endowed with reason and conscience and should act towards one another in a spirit of brotherhood." 
```

如何编写一个函数 hedging(text) 来处理我的文本并生成一个新版本，在文本的每三个单词中插入单词“like”？

结果应该是这样的：

```
text2 = "All human beings like are born free like and equal in like..." 
```

谢谢！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-03T07:44:05.590

而不是给你类似的东西

```
 solution=' like '.join(map(' '.join, zip(*[iter(text.split())]*3))) 
```

我正在发布有关如何解决该问题的一般建议。“算法”不是特别“pythonic”，但希望很容易理解：

```
 words = split text into words
 number of words processed = 0

 for each word in words
      output word
      number of words processed += 1
      if number of words processed is divisible by 3 then
          output like 
```

如果您有任何问题，请告诉我们。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-03T07:40:17.213

你可以用这样的东西：

```
' '.join([n + ' like' if i % 3 == 2 else n for i, n in enumerate(text.split())]) 
```

# jsf - 在 Jqplot 折线图中显示自定义工具提示？

> ID：15781292
> 
> 赞同：1
> 
> 时间：2013-04-03T07:26:45.073
> 
> 标签：jsf, tooltip, jqplot, linechart

例如，我分别根据 x 和 y 轴上特定日期注册的学生的日期和数量绘制了一个折线图。当我将鼠标悬停在折线图中的特定点上时，我可以查看显示 x 和 y 轴值的工具提示。相反，当我将鼠标悬停到特定点时，我想显示当天注册的学生的姓名。这个问题有什么解决办法吗？如果 Jqplot 无法解决，请向我推荐任何其他图表。请帮帮我。提前致谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-03T13:33:10.590

这是我为您整理 的一个[小例子。](http://jsfiddle.net/fwRSH/86/)

`tooltipContentEditor`它使用了荧光笔插件大部分未记录的属性：

```
 highlighter: {
            show: true,
            sizeAdjust: 7.5,
            tooltipContentEditor:tooltipContentEditor
         } 
```

您的数据是预定义的，例如：

```
 var students = [
          ['Bob','Mark','Dave'],
          ['Tim','Mike']
      ];

      var data = [students[0].length,students[1].length];          

      function tooltipContentEditor(str, seriesIndex, pointIndex, plot) {
          // display series_label, x-axis_tick, y-axis value
          return students[pointIndex].join(", ");
        } 
```

# hadoop - 使用 OpenNLP (tNER) 和 Hadoop 不返回跨度

> ID：15781294
> 
> 赞同：0
> 
> 时间：2013-04-03T07:26:50.340
> 
> 标签：hadoop, mapreduce, opennlp

我正在使用带有 CDH 4 的 OpenNLP 1.5.2 并且有一个不寻常的问题。

当我运行我的 jUnit 测试时，一切都通过了。当我在 localJobRunner 模式（伪或完整模式）下运行时，很多名称并不总是被识别，并且当我期待某些东西时，我返回了“空白”跨度。

是的，在本地/伪/完整模式下找不到的名称在我的 jUnit 测试中！

每次我打电话，我一次通过一句话。我将句子标记为 String[] 然后使用这些标记来找到。

我打电话的一个例子是：

```
result = Parser.tokenizedNamedEntityRecognition("PK FRESH IGA PLUS LI PORT KENNEDY WA", nameFinder);
assertEquals("IGA", result); 
```

nameFinder 在哪里：

```
InputStream modelIn;         
try {
  modelIn = new FileInputStream(System.getProperty("user.home") + "pathToModel" + MRConstants.c_namedEntityRecognitionModelFile);
} catch (FileNotFoundException e) {
  fail("fail message here");
}
NameFinderME nameFinder = new NameFinderME(new TokenNameFinderModel(modelIn)); 
```

在我正在做的调用方法中：

```
String tokens[] = sentence.split(MRConstants.c_singleSpace);
Span nameSpans[] = nameFinder.find(tokens); 
```

当通过我的 map 方法调用时，它并不总是提取名称。我会说大约20％的失败率。

许多训练句子之一的示例是：

```
PK FRESH <START:name> IGA <END> PLUS LI PORT KENNEDY WA 
```

我不太清楚为什么，当我用相同的模型调用相同的方法时，它有时会在本地/伪/完整模式下运行，但总是在 jUnit 中运行。

任何见解将不胜感激:)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-03T23:42:48.033

**已解决：**我没有清除文档之间的自适应数据。代表我犯了愚蠢的错误！

# android - 如何将我的数据库恢复到其原始目录？

> ID：15781299
> 
> 赞同：2
> 
> 时间：2013-04-03T07:26:58.503
> 
> 标签：android, sqlite, android-sqlite, android-sdcard

这是将我的数据保存/复制到 SD 卡的代码，当我单击备份按钮时，我的数据库保存在 NOTEIT 目录中的 sdcard 中，现在我想在单击恢复按钮到我的默认目录时恢复此数据库，所以任何人都可以告诉我如何做到这一点？

```
public static void backupDatabase() throws IOException 
{
    try
    {
    File dbFile = new File(Environment.getDataDirectory() + "/data/com.neelrazin.noteit/databases/data");

        File exportDir = new File(Environment.getExternalStorageDirectory()+"/NOTEIT");

        if (!exportDir.exists()) 
        {
            exportDir.mkdirs();
        }

        File file = new File(exportDir, dbFile.getName());

        file.createNewFile();

        FileChannel inChannel = new FileInputStream(dbFile).getChannel();  //fails here

        FileChannel outChannel = new FileOutputStream(file).getChannel();

        try 
        {
            inChannel.transferTo(0, inChannel.size(), outChannel);
        } 
        finally 
        {
            if (inChannel != null)
            inChannel.close();
        if (outChannel != null)
            outChannel.close();
        }
    }
    catch(Exception e)
    {
        e.printStackTrace();
    }
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-03T07:44:04.823

我相信还原与您的备份完全相反。

**像这样**：

```
public static void restoreDatabase() throws IOException 
{
    try
    {
    File dbFile = new File(Environment.getDataDirectory() + "/data/com.neelrazin.noteit/databases/data");

        File importDir = new File(Environment.getExternalStorageDirectory()+"/NOTEIT");

        if (!importDir.exists()) 
        {
            throw new IOException("External 'NOTEIT' directory does not exist.");
            return;
        }

        File file = new File(importDir, dbFile.getName());
        if (!file.exists()) 
        {
            throw new IOException("Does not exist external db file: NOTEIT/" + dbFile.getName());
            return;
        }

        FileChannel outChannel = new FileOutputStream(dbFile).getChannel();

        FileChannel inChannel = new FileInputStream(file).getChannel();

        try 
        {
            inChannel.transferTo(0, inChannel.size(), outChannel);
        } 
        finally 
        {
            if (inChannel != null)
            inChannel.close();
        if (outChannel != null)
            outChannel.close();
        }
    }
    catch(Exception e)
    {
        e.printStackTrace();
    }
} 
```

# git - 为什么我会在 git repo 中看到 .gitignored 文件/文件夹？

> ID：15781301
> 
> 赞同：1
> 
> 时间：2013-04-03T07:27:06.247
> 
> 标签：git, github

例如，我在谈论[http://www.github.com/cakephp/cakephp](http://www.github.com/cakephp/cakephp)。在该存储库中，该[`.gitignore`](https://github.com/cakephp/cakephp/blob/master/.gitignore)文件说该文件夹`/plugins`被忽略。但是，源***确实***包含存储库中的`/plugins`文件夹。这怎么可能？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-03T07:30:18.537

您可以显式地`git add`忽略您忽略的文件或忽略您之前提交给 repo 的文件。所做的只是`.gitignore`防止将来包含这些文件。`git status``git add`

在您的示例中，可能有很多随机命名的构建产品`/plugins`很烦人，而作者只是想快速将它们从`git status`. 或者，克隆项目并放入您自己的本地插件可能很常见。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-03T07:32:33.597

添加 .gitignore 将在添加正则表达式后提交/推送到存储库时排除 /plugins 中的文件。这并不意味着所有文件都会被忽略。

# c# - 如何在 Visual Studio 2010 中正确引用 dll？

> ID：15781310
> 
> 赞同：7
> 
> 时间：2013-04-03T07:27:31.907
> 
> 标签：c#, c++, visual-studio-2010, dll

我有一个包含 C++ DLL 项目的解决方案，以及一个将使用该 DLL（通过使用 PInvoke）的 C# 项目。

dll 正在构建到`x64/Release`我的解决方案文件夹中的文件夹中，这是有道理的，因为这样 C# 项目就不必插入 DLL 项目的文件夹。

我想知道现在引用它的正确方法是什么。现在，DLL 项目是 C# 项目的依赖项。我的直觉告诉我应该已经足够了，但是 C# 项目说它找不到 DLL。

我也应该将`.dll`文件添加为参考吗？我认为这现在可能可行，但从长远来看，当项目设置可能发生变化时会破坏事情。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-03T07:33:02.163

我之前回答过一个类似的问题。所以这里不再重复正文。

你可能想看看：

*   [使用开源库时，我们应该针对源代码还是二进制文件进行编译？](https://stackoverflow.com/questions/15051174/when-using-open-source-libraries-should-we-compile-against-the-source-or-the-bi/15051516#15051516)

希望有帮助。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-03T07:34:39.863

通常在这种情况下，我会配置我的解决方案，以便所有项目都编译为`$(SolutionDir)bin\$(Configuration)`. 然后以与生产模式相同的方式定位二进制文​​件，并且可以轻松使用 DLL。

至于保持最新版本的 DLL，请记住，您可以设置一个依赖项，这样如果 DLL 中有任何更改，它将在构建您的程序集/应用程序之前重新构建。

另一种方法是使用构建事件（预构建和构建后）将您的 DLL 复制到适当的文件夹中。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-03T07:38:13.217

您不能在托管项目中添加非托管 DLL 作为引用。DLL 需要驻留在可执行文件的文件夹或系统 PATH 的任何其他文件夹中。

最好的方法是使用“构建后事件”让 VS 将 DLL 复制到每次重建时都需要它的文件夹中。

# java - 使用aspectJ的AOP中的Joinpoint VS ProceedingJoinPoint？

> ID：15781322
> 
> 赞同：23
> 
> 时间：2013-04-03T07:28:26.180
> 
> 标签：java, spring, aspectj, spring-aop

`Joinpoint`谁能告诉我和 和 有什么区别`Proceedingjoinpoint`？

什么时候在切面类的方法中`Joinpoint`使用？`Proceedingjoinpoint`

我`JoinPoint`在我的 AspectJ 类中使用了，例如：

```
@Pointcut("execution(* com.pointel.aop.test1.AopTest.beforeAspect(..))")  
public void adviceChild(){}  

@Before("adviceChild()")  
public void beforeAdvicing(JoinPoint joinPoint /*,ProceedingJoinPoint pjp - used refer book marks of AOP*/){ 

    //Used to get the parameters of the method !
    Object[] arguments = joinPoint.getArgs();
    for (Object object : arguments) {
        System.out.println("List of parameters : " + object);
    }

    System.out.println("Method name : " + joinPoint.getSignature().getName());
    log.info("beforeAdvicing...........****************...........");
    log.info("Method name : " + joinPoint.getSignature().getName());
    System.out.println("************************"); 
} 
```

但我在其他资源中看到的是：

```
@Around("execution(* com.mumz.test.spring.aop.BookShelf.addBook(..))")
public void aroundAddAdvice(ProceedingJoinPoint pjp){
    Object[] arguments = pjp.getArgs();
    for (Object object : arguments) {
        System.out.println("Book being added is : " + object);
    }
    try {
        pjp.proceed();
    } catch (Throwable e) {
        e.printStackTrace();
    }
} 
```

`ProceedingJoinPoint`与 'JointPoint pjp.proceed()` 相比，这里有什么不同之处`? Also what will`呢？

* * *

## 回答 #1

> 赞同：33
> 
> 时间：2013-04-03T09:39:18.297

环绕通知是一种特殊的通知，可以控制何时以及是否执行方法（或其他连接点）。这仅适用于 around 建议，因此它们需要 type 参数`ProceedingJoinPoint`，而其他建议只使用 plain `JoinPoint`。一个示例用例是缓存返回值：

```
private SomeCache cache;

@Around("some.signature.pattern.*(*)")
public Object cacheMethodReturn(ProceedingJoinPoint pjp){
    Object cached = cache.get(pjp.getArgs());
    if(cached != null) return cached; // method is never executed at all
    else{
        Object result = pjp.proceed();
        cache.put(pjp.getArgs(), result);
        return result;
    }
} 
```

在这段代码中（使用不存在的缓存技术来说明一点）实际的方法只有在缓存没有返回结果时才会被调用。例如，这正是[Spring EHCache Annotations](https://code.google.com/p/ehcache-spring-annotations/)项目的工作方式。

环绕通知的另一个特点是它们必须有返回值，而其他通知类型不能有返回值。

* * *

## 回答 #2

> 赞同：12
> 
> 时间：2013-04-03T08:35:34.690

```
@Around("execution(* com.mumz.test.spring.aop.BookShelf.addBook(..))") 
```

这意味着在调用方法之前调用`com.mumz.test.spring.aop.BookShelf.addBook`方法 `aroundAddAdvice` 。`System.out.println("Book being added is : " + object);`操作完成后。 它会调用你的实际方法`addBook()`。`pjp.proceed()`将调用`addBook()`方法。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2020-08-05T12:36:01.193

将**JoinPoint**与以下建议类型一起使用：

```
 @Before, @After, @AfterReturning, @AfterThrowing 
```

将**ProceedingJoinPoint**与以下建议类型一起使用：

```
@Around 
```

# python - 如何使pycharm始终在ubuntu中显示行号

> ID：15781326
> 
> 赞同：5
> 
> 时间：2013-04-03T07:28:43.290
> 
> 标签：python, ubuntu, pycharm

我知道如何在 Windows 版本中执行此操作，但在 ubuntu 上，我在设置/外观中没有“显示行号”复选框

谢谢

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2013-04-03T07:58:49.310

你找错地方了，在下面`Settings`| **编辑**| `Appearance`，请参阅[相关答案](https://stackoverflow.com/a/8086109/104891)。

![显示行号](https://img202.imageshack.us/img202/9388/20130403120311.png)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2014-12-19T17:45:16.480

我自己只花了5分钟寻找它。对于 PyCharm 4.x，可以在**Settings** -> **Editor** -> **General** -> **Appearance**下找到该设置。

![在此处输入图像描述](https://i.stack.imgur.com/WZ10g.png)

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2016-04-28T01:11:22.750

更新答案（2016 年 4 月）

> PyCharm 社区版 2016.1.2
> 
> 构建 #PC-145.844，构建于 2016 年 4 月 8 日
> 
> JRE：1.8.0_60-b27 x86
> 
> JVM：Oracle Corporation 的 Java HotSpot(TM) 服务器 VM

Windows 版本，但我猜在 Ubuntu 中会是一样的。

**视图**>**活动编辑器**>**显示行号**

[![在此处输入图像描述](https://i.stack.imgur.com/Bwckv.png)](https://i.stack.imgur.com/Bwckv.png)

* * *

编辑：[重复](https://stackoverflow.com/questions/10187228/how-to-make-pycharm-always-show-line-numbers)

# android - Android ViewFlow setFlowIndicator IndexOutOfBoundException

> ID：15781327
> 
> 赞同：1
> 
> 时间：2013-04-03T07:28:46.383
> 
> 标签：android, indexoutofboundsexception, viewflow

我对 Github 上 pakerfeldt 的 ViewFlow 类有疑问。

我正在尝试制作“不同的视图视图流”。这是我的活动代码：

```
package com.suncco.silent_communities.activity;

import org.taptwo.android.widget.TitleFlowIndicator;
import org.taptwo.android.widget.ViewFlow;

import android.app.Activity;
import android.os.Bundle;
import android.widget.ListView;

import com.suncco.silent_communities.R;

public class HousingActivity extends BaseActivity {

private ViewFlow viewFlow;
private ListView listView;

/** Called when the activity is first created. */
@Override
public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.housing_activity);
    initMenu();
    viewFlow = (ViewFlow) findViewById(R.id.viewflow);
    DiffAdapter adapter = new DiffAdapter(this);
    viewFlow.setAdapter(adapter);
    TitleFlowIndicator indicator = (TitleFlowIndicator) findViewById(R.id.viewflowindic);
    indicator.setTitleProvider(adapter);
    viewFlow.setFlowIndicator(indicator);

    /** To populate ListView in diff_view1.xml */
    // listView = (ListView) findViewById(R.id.listView1);
    // String[] names = new String[] { "Cupcake", "Donut", "Eclair",
    // "Froyo",
    // "Gingerbread", "Honeycomb", "IceCream Sandwich" };
    // listView.setAdapter(new ArrayAdapter<String>(this,
    // android.R.layout.simple_list_item_1, names));

    }
} 
```

如您所见，这与示例代码非常相似。

这是适配器：

```
package com.suncco.silent_communities.view;

import org.taptwo.android.widget.TitleProvider;

import com.suncco.silent_communities.R;

import android.content.Context;
import android.view.LayoutInflater;
import android.view.View;
import android.view.ViewGroup;
import android.widget.BaseAdapter;

public class HousingViewflowAdapter extends BaseAdapter implements
        TitleProvider {

    private static final int VIEW1 = 0;
    private static final int VIEW2 = 1;
    private static final int VIEW_MAX_COUNT = VIEW2 + 1;
    private final String[] names = { "View1", "View2" };

    private LayoutInflater mInflater;

    public HousingViewflowAdapter(Context context) {
        mInflater = (LayoutInflater) context
                .getSystemService(Context.LAYOUT_INFLATER_SERVICE);
    }

    @Override
    public int getItemViewType(int position) {
        return position;
    }

    @Override
    public int getViewTypeCount() {
        return VIEW_MAX_COUNT;
    }

    @Override
    public int getCount() {
        return 0;
    }

    @Override
    public Object getItem(int position) {
        return position;
    }

    @Override
    public long getItemId(int position) {
        return position;
    }

    @Override
    public View getView(int position, View convertView, ViewGroup parent) {
        int view = getItemViewType(position);
        if (convertView == null) {
            switch (view) {
            case VIEW1:
                convertView = mInflater.inflate(
                        R.layout.housing_flowview_view1, null);
                break;
            case VIEW2:
                convertView = mInflater.inflate(
                        R.layout.housing_flowview_view2, null);
                break;
            }
        }
        return convertView;
    }

    /*
     * (non-Javadoc)
     * 
     * @see org.taptwo.android.widget.TitleProvider#getTitle(int)
     */
    public String getTitle(int position) {
        return names[position];
    }

} 
```

也类似于示例和结束视图：

```
<?xml version="1.0" encoding="utf-8"?>
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
    xmlns:app="http://schemas.android.com/apk/res/com.suncco.silent_communities"
    android:layout_width="match_parent"
    android:layout_height="match_parent"
    android:orientation="vertical" >

    <LinearLayout
        android:layout_width="fill_parent"
        android:layout_height="wrap_content"
        android:gravity="center_horizontal"
        android:orientation="vertical" >

        <org.taptwo.android.widget.TitleFlowIndicator
            android:id="@+id/viewflowindic"
            android:layout_width="fill_parent"
            android:layout_height="wrap_content"
            android:layout_marginTop="10dip"
            app:clipPadding="5dp"
            app:footerColor="#FFFFC445"
            app:footerLineHeight="2dp"
            app:footerTriangleHeight="10dp"
            app:selectedColor="#FFFFC445"
            app:selectedSize="12dp"
            app:textColor="#FFFFFFFF"
            app:textSize="11sp"
            app:titlePadding="10dp" />
    </LinearLayout>

    <org.taptwo.android.widget.ViewFlow
        android:id="@+id/viewflow"
        android:layout_width="fill_parent"
        android:layout_height="fill_parent"
        app:sidebuffer="5" />

</LinearLayout> 
```

这是我的例外：

```
04-03 15:19:59.538: E/AndroidRuntime(1677): java.lang.IndexOutOfBoundsException: Invalid index 0, size is 0
04-03 15:19:59.538: E/AndroidRuntime(1677):     at java.util.ArrayList.throwIndexOutOfBoundsException(ArrayList.java:257)
04-03 15:19:59.538: E/AndroidRuntime(1677):     at java.util.ArrayList.get(ArrayList.java:311)
04-03 15:19:59.538: E/AndroidRuntime(1677):     at org.taptwo.android.widget.TitleFlowIndicator.onDraw(TitleFlowIndicator.java:157)
04-03 15:19:59.538: E/AndroidRuntime(1677):     at android.view.View.draw(View.java:6880)
04-03 15:19:59.538: E/AndroidRuntime(1677):     at android.view.ViewGroup.drawChild(ViewGroup.java:1646)
04-03 15:19:59.538: E/AndroidRuntime(1677):     at android.view.ViewGroup.dispatchDraw(ViewGroup.java:1373) 
```

有人知道问题是什么吗？提前致谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-03T07:34:54.810

```
@Override
public int getItemViewType(int position) {
    return position % 2;
} 
```

希望这会有所帮助。您覆盖的方法是返回精确值作为位置。而且`getCount`方法返回 0，它应该是要添加到`ListView`基于您的 DataProvider 的元素的数量。您可以`names.length`改为返回。

# android - 如何让进程等到 Android 中的 AlertDialog 事件？

> ID：15781329
> 
> 赞同：1
> 
> 时间：2013-04-03T07:28:57.077
> 
> 标签：android, android-alertdialog

我有一个问题`AlertDialog`。

如果用户点击正面按钮，我希望我`AlertDialog`返回，如果他点击负面按钮，我希望返回。`true`该功能必须阻止程序，直到用户单击按钮。

我的代码：

```
 isSuspended = true;
public boolean alertDialog(){
    final EditText input = new EditText(context);
        new AlertDialog.Builder(context)
        .setView(input)
        .setPositiveButton("Authenticate", new DialogInterface.OnClickListener() {
            public void onClick(DialogInterface dialog, int whichButton) {
                    if (isValid != 1) {
                    dialog.cancel();
                    ShowAlert.showAlertMessage(context, "title",
                            "Wrong Password!!!");
                    isSuspended = true;
                } else {
                    dialog.cancel();
                    ShowAlert.showAlertMessage(context, "title",
                            "Correct Password!!!");
                    isSuspended = true;
                }
                dialog.cancel();
            }
        })
        .setNegativeButton("Cancel", new DialogInterface.OnClickListener() {
            public void onClick(DialogInterface dialog, int whichButton) {
            isSuspended=false;
                dialog.cancel();
            }
        }).show();
return isSuspended;
} 
```

# mysql - 将txt转换成mysql

> ID：15781343
> 
> 赞同：0
> 
> 时间：2013-04-03T07:29:52.563
> 
> 标签：mysql, sql, import

所以，我必须转换格式如下的txt文件：

```
[name] John Smith

    [address]
    4260 Russell Road
    Kent, USA

    [e-mail] john.smith@something.com
    [familymember]
    - Lisa Smith
    - Randy Smith
    - Lauren Smith
    [contact] +1876543 
```

请注意，所有字段名称都在`[`和之间`]`。该值有时只有一行，有时是多行。有些甚至有空行。

**问题：**如何将上面的数据转换成 mysl，甚至 csv？

我曾尝试使用 excel 导入数据，但如果不为每行创建新行，它就无法处理多行值。

# postgresql - 我可以在 postgres 的 CASE 中使用 INSERT

> ID：15781345
> 
> 赞同：3
> 
> 时间：2013-04-03T07:29:58.367
> 
> 标签：postgresql, case, sql-insert

我正在尝试在 postgres 中创建一个函数，如果它不存在则插入一行并返回该行的 id（新创建的或现有的）。

我想出了这个：

```
CREATE OR REPLACE FUNCTION                                                      
get_enttype(name character varying, module character varying)               
RETURNS integer LANGUAGE SQL STABLE AS $$                                   
    SELECT typeid FROM enttypes WHERE name = $1 AND module = $2             
$$;                                                                             

CREATE OR REPLACE FUNCTION                                                      
    ensure_enttype(name character varying, module character varying)            
    RETURNS integer LANGUAGE SQL AS $$                                          
    SELECT CASE WHEN get_enttype($1, $2) IS NULL                                
    THEN                                                                        
        INSERT INTO enttypes(name, module) VALUES ($1, $2) RETURNING typeid                                                 
    ELSE                                                                        
        get_enttype($1, $2)                                                     
    END                                                                         
$$; 
```

但是，由于`INSERT`inside ，它会引发语法错误`CASE`。我设法通过创建一个单独的函数`INSERT`并在`CASE`. 它按预期工作，但这个修复似乎有点奇怪。我的问题是 - 我可以在不创建另一个函数的情况下解决这个问题吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-03T07:36:51.477

不，您不能在函数中使用`INSERT`inside 。但是，您可以：`CASE``sql`

*   使用带有`IF ... ELSE ... END`语句的 PL/PgSQL 函数；或者
*   使用可写公用表表达式 (wCTE) 或`INSERT INTO ... SELECT`查询

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-03T16:03:25.653

纯 SQL 可以做到：

```
create or replace function  ensure_enttype(
    name character varying, module character varying
) returns integer language sql as $$

    insert into enttypes(name, module)
    select $1, $2
    where get_enttype($1, $2) is null
    ;
    select get_enttype($1, $2);
$$; 
```

# scala - 为什么我在 Scala 延续中收到“cps-transformed unexpectedly”消息

> ID：15781348
> 
> 赞同：0
> 
> 时间：2013-04-03T07:30:06.510
> 
> 标签：scala, continuations

所以我有以下代码（做那个[教程](http://www.is.ocha.ac.jp/~asai/cw2011tutorial/main-e.pdf)的练习 4 ）：

```
import scala.util.continuations._
object Main {
  def times(lst: List[Int]): Int@cps[Int] = lst match {
    case Nil => 1
    case 0 :: rest => shift{(_: Int=>Int) => 0 } * times(rest)
    case first :: rest => first * times(rest)
  }
  def main(args: Array[String]) {
    println(reset{times(List(0 to 1000: _*))})
  }
} 
```

我正在使用 scala 2.10.0 进行编译，但收到以下警告：

```
CWSO.scala:3: warning: expression matchEnd9(x: Int){
  x
} is cps-transformed unexpectedly
  def times(lst: List[Int]): Int@cps[Int] = lst match {
                                            ^
one warning found 
```

我编写该代码的方式有问题吗？我应该怎么做才能避免警告？代码似乎在做正确的事情（当 0 是第一个元素时，将数字相乘并提前中止）。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-03T08:57:50.540

这闻起来像一个错误，并被报告为：[https ://issues.scala-lang.org/browse/SI-6817](https://issues.scala-lang.org/browse/SI-6817)

# javascript - 删除 mongoose 中的嵌入文档

> ID：15781360
> 
> 赞同：6
> 
> 时间：2013-04-03T07:30:38.363
> 
> 标签：javascript, node.js, mongodb, mongoose

我是 node.js 和 MongoDB 的新手。我正在使用 Mongoose 库通过 node.js 访问 MongoDB。

我有两个模式，书籍和作者。Author belongs_to a Book 并且 Book has_many Author。

我的模式中有这个：

```
var mongoose = require( 'mongoose' );
var Schema   = mongoose.Schema;

var Book = new Schema({
    title : String,
    isbn : String,
    authorId : [{ type: Schema.Types.ObjectId, ref: 'Author' }],
    updated_at : Date
});

var Author = new Schema({
    name  : String,
    updated_at : Date
});

mongoose.model( 'Book', Book );
mongoose.model( 'Author', Author );

mongoose.connect( 'mongodb://localhost/library' ); 
```

问题是，当我从 Author 中删除嵌入 Book 的文档时，它会在不检查引用完整性的情况下被删除。我的情况是，如果 Author 文档嵌入在 Book 中，则无法删除。Mongoose 会自动检查嵌入在书中的作者文档吗？是否可以？那怎么办？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-04T06:34:25.720

您可以为您提到的架构尝试以下代码。

```
Author.pre('remove', function(next) {
    Author.remove({name: this.name, updated_at: this.updated_at }).exec();
    Book.remove({authorId : this._id}).exec();
    next();
}); 
```

[有关SchemaObj.pre（方法，回调）](http://mongoosejs.com/docs/api.html#schema_Schema-pre)的更多信息

# javascript - 解密 Javascript 源

> ID：15781361
> 
> 赞同：-1
> 
> 时间：2013-04-03T07:30:39.000
> 
> 标签：javascript, jquery, security, encryption

我已经编写了一个 javascript 代码并对其进行加密。它与此类似：

```
var _0xbf1b = ["\x2F\x70\x61\x67\x65\x73\x2F", "\x69\x6E\x64\x65\x78\x4F\x66", "\x74\x6F\x4C 
```

[JsFiddle 中的所有代码](http://jsfiddle.net/e3EVV/)

我在互联网上搜索，但没有解决方案可以帮助我解密我的脚本。

请帮我解密我的源代码。

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-03T07:33:55.480

这称为混淆的 JavaScript。它没有加密，只是更难阅读。您可以尝试 JSBeautifier ( [http://jsbeautifier.org/](http://jsbeautifier.org/) ) 使其更具可读性。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-03T07:35:14.703

通过使用[http://jsbeautifier.org/](http://jsbeautifier.org/)

您可以获得：

[http://jsfiddle.net/VFNVx/](http://jsfiddle.net/VFNVx/)

```
 function getAlarm() {
     try {
         var _0xdca7x2 = window['location'].toString()['toLowerCase']()['indexOf']('/pages/');
         var _0xdca7x3 = window['location'].toString()['substring'](0, _0xdca7x2) + '/pages/Alarm/Alarm.aspx/GetAlarm';
         $['ajax']({
             type: 'POST',
             url: _0xdca7x3,
             data: '{}',
             contentType: 'application/json; charset=utf-8',
             dataType: 'json',
             success: function (_0xdca7x4) {
                 if (_0xdca7x4['d'] != '') {
                     var _0xdca7x5 = _0xdca7x4['d']['split']('_');
                     $('#hidAlarmID')['val'](_0xdca7x5[0]);
                     $('#lblAlarmMessage')['text'](_0xdca7x5[1]);
                     if (parseInt(_0xdca7x5[0]) > 0) {
                         $('#pnlAlarm')['slideDown']();
                     } else {
                         $('#pnlAlarm')['slideUp']();
                     };
                 };
             }
         });
     } catch (e) {};
 };
 $(document)['ready'](function () {
     $('body')['on']('click', '.NotpostBack', function (_0xdca7x6) {
         _0xdca7x6['preventDefault']();
     });
     $('#UpTablnkUserName')['on']('click', function () {
         $('#divTools')['slideUp']();
         $('#divHelp')['slideUp']();
         $('#Specifications')['slideToggle']();
     });
     $('#UpTablnkTools')['on']('click', function () {
         $('#divHelp')['slideUp']();
         $('#Specifications')['slideUp']();
         $('#divTools')['slideToggle']();
     });
     $('#UpTablnkHelp')['on']('click', function () {
         $('#divTools')['slideUp']();
         $('#Specifications')['slideUp']();
         $('#divHelp')['slideToggle']();
     });
     if ($('#lblAlarmMessage')['text']() != '' && parseInt($('#hidAlarmID')['val']()) > 0) {
         $('#pnlAlarm')['slideDown']();
     };
     window['setInterval']('getAlarm()', 300000);
     $('#btnAware')['on']('click', function (_0xdca7x6) {
         try {
             _0xdca7x6['preventDefault']();
             var _0xdca7x2 = window['location'].toString()['toLowerCase']()['indexOf']('/pages/');
             var _0xdca7x3 = window['location'].toString()['substring'](0, _0xdca7x2) + '/pages/Alarm/Alarm.aspx/Aware';
             $['ajax']({
                 type: 'POST',
                 url: _0xdca7x3,
                 data: '{\'MessageID\':\'' + $('#hidAlarmID')['val']() + '\'}',
                 contentType: 'application/json; charset=utf-8',
                 dataType: 'json',
                 success: function (_0xdca7x4) {
                     if (_0xdca7x4['d'] == true) {
                         $('#pnlAlarm')['slideUp']();
                     };
                 }
             });
         } catch (_0xdca7x6) {};
     });
     $('#pnlAlarm')['on']('click', function () {
         $('#pnlAlarm')['slideUp']();
     });
     $('#menuUL li')['on']('mouseenter', function () {
         var _0xdca7x7 = $(this)['position']();
         $(this)['find']('ul')['css']('top', _0xdca7x7['top'] + 28);
         if (jQuery['browser']['version'] == '7.0' || jQuery['browser']['version'] == '8.0') {
             $(this)['find']('ul')['css']('left', _0xdca7x7['left'] - 105 - $(document)['scrollLeft']());
         } else {
             $(this)['find']('ul')['css']('left', _0xdca7x7['left'] - 105);
         };
         $(this)['find']('ul')['css']('top', _0xdca7x7['top'] + 27 - $(document)['scrollTop']());
         $(this)['find']('ul')['css']('position', 'fixed');
         $(this)['find']('ul')['css']('display', 'block');
     });
     $('#menuUL li')['on']('mouseleave', function () {
         $(this)['find']('ul')['css']('display', 'none');
     });
 }); 
```

# iphone - 使用 phonegap 插件从 iphone 使用 smtp 服务器发送电子邮件

> ID：15781363
> 
> 赞同：1
> 
> 时间：2013-04-03T07:30:41.130
> 
> 标签：iphone, email, cordova, plugins, smtp

我已经使用 smtp 服务器搜索了从 iphone 发送的电子邮件，但我只找到了电子邮件撰写和发送电子邮件插件。需要插件来发送邮件而不撰写邮件。

有人能帮我吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2015-06-16T11:22:09.217

您可以向服务器中发送电子邮件的 php 页面发出 ajax 发布请求。检查[https://stackoverflow.com/a/29677288](https://stackoverflow.com/a/29677288)

# php - 如何使用 php_codesniffer 进行升级和兼容性检查（PHP 5.2 对 PHP 5.4）

> ID：15781364
> 
> 赞同：3
> 
> 时间：2013-04-03T07:30:45.967
> 
> 标签：php

我正在使用 PHP 5.2 版开发一个 PHP 项目。现在我想升级我的项目以使用 PHP 5.4 版。我安装了 php 5.4 并部署了我的项目以使用 PHP 5.4。现在是否有任何工具可以检查语法错误或编码标准或针对 PHP 5.4 的兼容性检查？

如果我同样使用 php_codesniffer 怎么样？如果我从 PHP 5.2 升级到 PHP 5.4，是否可以使用 php_codesniffer 检查类型兼容性？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-07-11T22:50:55.257

是的，这当然是可能的。从 Wim Godden 安装 PHP_CodeSniffer 的 PHPCompatibility 标准：

[https://github.com/wimg/PHPCompatibility](https://github.com/wimg/PHPCompatibility)

在此处阅读更多信息：

[http://techblog.wimgodden.be/2012/03/04/php-5-4-compatibility-checks-using-php_codesniffer/](http://techblog.wimgodden.be/2012/03/04/php-5-4-compatibility-checks-using-php_codesniffer/)

这真的就像安装 PHP_CodeSniffer 和 PHPCompatibility 标准然后针对您的代码库运行它一样简单。希望有帮助。

# asp.net - Silverlight 和 ASP.net 位图转换问题

> ID：15781365
> 
> 赞同：2
> 
> 时间：2013-04-03T07:30:45.997
> 
> 标签：asp.net, bitmap, silverlight-5.0, writeablebitmap

我的应用程序使用网络摄像头拍摄快照并将它们保存在本地文件夹中。所以我使用以下代码将我的 Silverlight 快照转换为字节数组并通过 Web 服务发送。我的 Web 服务的名称是 ImageService。

```
ImageServiceSoapClient client = new ImageServiceSoapClient();

private void source_CaptureImageCompleted(object sender, CaptureImageCompletedEventArgs e)
        {            
            WriteableBitmap bmp = new WriteableBitmap(320, 240);
            bmp = e.Result;
            byte[] buffer = bmp.ToByteArray();            

            client.SaveImageToLocalAsync(buffer, txtUserName.Text);            
        } 
```

这是我的服务器端代码..

```
[WebMethod]
        public string SaveImageToLocal(byte[] buffer,string name)
        {                  

            try
            {                
                Bitmap bmp = new Bitmap(320, 240);
                using (MemoryStream stream = new MemoryStream(buffer))
                {
                    bmp = new Bitmap(stream);
                    string saveString = GetFolder() + name + ".jpg";
                    bmp.Save(saveString, System.Drawing.Imaging.ImageFormat.Jpeg);
                }

                return "Servers says : Saved..!!";
            }
            catch (Exception ex)
            {
                return "Server says : " + ex.Message;
            }
        } 
```

所以当我运行这个应用程序时，我得到一个异常说**“服务器说：参数无效”** ..

谁能告诉我这段代码有什么问题？我花了几个星期来解决这个问题。请帮助... :( 谢谢...

# ios - iOS：计算 CVPixelBufferRef 中出现次数最多的颜色

> ID：15781366
> 
> 赞同：1
> 
> 时间：2013-04-03T07:30:48.000
> 
> 标签：ios, objective-c, image-processing, colors

我想知道如何从 iOS 中的 CVPixelBufferRef 中找到“最常见”的颜色。我的意思不一定是代码示例，而只是它背后的技术。

我的第一个想法就是：添加所有颜色，划分它们。这会给你一个平均的。但是，我猜，这总是会变成丑陋的棕色。

其他想法：计算某种颜色的出现次数最多。但这会给我带来问题：255,0, **135**和 255,0, **134**不会是相同的颜色，尽管每个人都同意它是粉红色的。也许这个，但在 50 或其他的“步骤”中，最终得到 50 的“中间”？所以即：数字 153 将在 150-200 范围内，因此 175 ？

它应该给我一个 RGB 颜色（或其他颜色），但它应该具有与图像相同的“感觉”..

**注意：**如果它复杂或其他什么都不是问题，我只是希望它是好的。只是不知道从哪里开始。:)

**更新：**我现在正在使用下面的代码，它工作得非常好，因为代码很简单：

```
for(int i = 0; i < bufferSize; i += 4) {
    int b = myPixelBuf[i];
    int g = myPixelBuf[i+1];
    int r = myPixelBuf[i+2];

    float th, br;
    UIColor *color = [[UIColor alloc] initWithRed:( r / 255.0f) green:( g / 255.0f ) blue:( b / 255.0f ) alpha:1.0f];
    [color getHue:&th saturation:nil brightness:&br alpha:nil];

    int hueInt = floor(th / 0.05f);
    hueInt += 0.5;
    [array addObject:[NSNumber numberWithFloat:hueInt]];
} 
```

最后，我只是从数组中获取最常见的色调，然后再次将其乘以 0.05，以获得 iOS 的“正常”色调值，范围为 0...1。0.05 因子目前只是一个猜测。似乎效果很好，但我会在这个因素上玩一点。

# java - 在 sbt 但不是原始 Java 中工作：使用 `javac` 编译 .class 文件后，为什么 `java` 找不到它？

> ID：15781374
> 
> 赞同：0
> 
> 时间：2013-04-03T07:31:08.487
> 
> 标签：java, sbt, java-bytecode-asm

我使用 ObjectWeb 的 ASMifier 来获得一个“HelloDump.java”，并添加了类加载器和一个 main 方法来加载和运行一个欺骗性的“HelloWorld”。

如果我在构建工具 sbt 中运行“HelloDump.java”，一切正常并输出“HelloWorld！”。

但如果我使用原始 Java，它就会中断。'HelloDump.java' 似乎可以编译，但生成的 'HelloDump.class' 显然存在，但似乎无法识别（检查以下序列）：

```
$ julianpeeters@julianpeeters-virtual-machine ~/asm-example $ javac -cp lib/asm-all-4.1.jar HelloDump.java

$ julianpeeters@julianpeeters-virtual-machine ~/asm-example $ ls
DumpLoader.java.bak  HelloDump.class.bak                 Hello.java.bak
Hello.class.bak      HelloDump$DynamicClassLoader.class  lib
HelloDump.class      HelloDump.java                      README.md

$ julianpeeters@julianpeeters-virtual-machine ~/asm-example $ java -cp lib/asm/all/4.1.jar HelloDump
Exception in thread "main" java.lang.NoClassDefFoundError: HelloDump
Caused by: java.lang.ClassNotFoundException: HelloDump
    at java.net.URLClassLoader$1.run(URLClassLoader.java:217)
    at java.security.AccessController.doPrivileged(Native Method)
    at java.net.URLClassLoader.findClass(URLClassLoader.java:205)
    at java.lang.ClassLoader.loadClass(ClassLoader.java:321)
    at sun.misc.Launcher$AppClassLoader.loadClass(Launcher.java:294)
    at java.lang.ClassLoader.loadClass(ClassLoader.java:266)
Could not find the main class: HelloDump. Program will exit. 
```

显式添加`.`到类路径也无济于事。

那么为什么这在 sbt 中有效，但在原始 Java 中无效，我该如何解决呢？

谢谢，任何建议表示赞赏，-朱利安

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-03T07:35:03.967

添加`.`到您的 CLASSPATH，因此您的命令变为： `java -cp lib/asm-all-4.1.jar:. HelloDump`

JVM 找不到该类的原因是**它只**在类路径上查找，而在其他任何地方都看不到。

# cocos2d-x - 在 Windows 机器上使用 eclipse 为 iOS 创建 Cocos2dxGame

> ID：15781377
> 
> 赞同：1
> 
> 时间：2013-04-03T07:31:17.523
> 
> 标签：cocos2d-x

我正在使用 windows 机器并尝试在 cocos2dx 中为 iOS 制作游戏。我使用的编辑器是 Eclipse。cocos2dx 的版本是最新的。

我学习了许多教程，但没有一个教程指导我如何使用 cocos2dx 在 iOS 的 eclipse 中编写代码。

我见过 Classes 文件夹，其中包含 Appdelegate.h 和 cpp 以及 helloworld.h 和 cpp。

当我使用现有项目创建一个新的 android 项目时，我无法找到 classes 文件夹。

我需要有关如何开始的帮助。

谢谢

# php - PHP如何正确显示输入标签中的文本

> ID：15781381
> 
> 赞同：0
> 
> 时间：2013-04-03T07:31:26.127
> 
> 标签：php, character-encoding

当我将输入（html中的表单）中的某些内容回显到php

html 中的输入值为：

```
强化课程 
```

回声（php）输出是：

```
å¼ºåŒ–è¯¾ç¨‹ 
```

如何让它正确显示？

我正在使用 PHP 5.3.10

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-03T07:36:48.940

在您的 HTML 文件中，确保此元标记在您的`<head></head>`标记内：

```
 <meta http-equiv="content-type" content="text/html; charset=UTF-8"> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-03T07:37:53.167

1.  确保在 html 中设置正确的元数据。

    <META http-equiv="Content-Type" content="text/html; charset=utf-8">

2.  在 php.ini 中设置正确的语言环境。

    setlocale(LC_ALL, "en_US.UTF-8");

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-03T07:39:42.430

应通过响应标头正确设置页面编码（如果尚未完成）：

```
header('Content-Type: text/html; charset=utf-8'); 
```

# php - Symfony2 中的本地化错误页面

> ID：15781387
> 
> 赞同：7
> 
> 时间：2013-04-03T07:31:42.667
> 
> 标签：php, symfony, exception-handling, twig

我们正在 Symfony2 中创建一个本地化为荷兰语和英语的应用程序。现在我知道如何[自定义 Symfony 错误页面](http://symfony.com/doc/current/cookbook/controller/error_pages.html)，但在任何地方都找不到如何翻译错误页面。我尝试`trans`在错误模板中使用过滤器，但它似乎没有使用我的翻译文件。

此外，我找不到任何选项来制作多个错误页面，每种语言一个，并将它们本地化。

有谁知道这是否可能，我可以想象这很难实现，因为翻译错误可能会引发错误。但是，如果是这样，我会喜欢有关如何正确执行此操作的提示或链接。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-04-03T11:13:29.287

您可以尝试使用模板中可用的全局变量（symfony 2.1 之前的 app.request.locale 或 app.session.locale）。

```
{% if app.request.locale == 'nl' %}
    some error message
{% else %}
    error message in other language
{% endif %} 
```

# ios - 在 iOS 6 MKMapView 上显示中转站、餐馆和其他地方

> ID：15781389
> 
> 赞同：2
> 
> 时间：2013-04-03T07:31:44.543
> 
> 标签：ios, objective-c, xcode, ios6, mkmapview

是否可以在您自己的应用程序中的 MKMapView 上显示企业、餐馆、中转站、公园等？

下面是在 iOS 6 地图应用程序中的外观图片。我可以在自己的应用程序中做同样的事情吗？如何？

![MKMapView 与企业](https://i.stack.imgur.com/ohTTE.jpg)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-07-30T20:52:22.277

虽然在 MKMapViews 中拥有这个功能会非常非常好，但我认为这是 Apple 为他们自己的 Maps 应用程序保留的功能。然而，[iOS 6.1 的发布带来了一个搜索](http://developer.apple.com/library/ios/#releasenotes/General/WhatsNewIniOS/Articles/iOS6_1.html)功能，您可以将其添加到您的应用程序中，该功能将返回所有匹配的地点。

iOS 7 还开放了许多新的地图 API——当操作系统公开时，我会添加更多细节。

您还可以查看[Foursquare API](https://developer.foursquare.com)。您可能会对他们的[Venue's Platform](https://developer.foursquare.com/overview/venues)感兴趣：

> 只需要一个地点数据库吗？场地平台允许开发人员搜索地点并访问有关这些地点的大量信息，包括地址、人气、提示和照片。只要应用程序包含足够的属性，它就可以免费使用且无需任何用户身份验证。

# matlab - 在matlab中将数组传递给gui

> ID：15781390
> 
> 赞同：0
> 
> 时间：2013-04-03T07:31:57.470
> 
> 标签：matlab

我想将一个数组传递给 gui 并在轴上显示该数组的每个元素...这些元素是图像的文件名...我编写了一段代码...这是我的 xyz.m 文件我想将数组“结果”传递给 gui result_image.m

```
result_image(result); 
```

在我写的gui的opening_fn中......

```
result = varargin{1};
handles.output = hObject;

% Update handles structure
guidata(hObject, handles);
%axes(handles.axes1);
%imshow(im2fn);
for jj = 1:length(result)
axes(handles.axesjj);
imshow(result(jj)); 
```

我收到一个错误，因为 str2func Invalid function name ''
我不知道这里的 '' 是什么，而且我在 result_image(result);
请帮我！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-03T09:40:36.877

如果您查看[此](http://www.mathworks.co.uk/support/solutions/en/data/1-19YHX/?solution=1-19YHX)内容，它将详细告诉您如何将输入参数添加到您的 UI。事实上，它比简单地添加 a`varargin`到你的`OpeningFcn`论点要复杂一些。原因是您必须编辑以单词开头的代码`DO NOT EDIT`:-)

您必须添加一些代码，使其能够确定不应运行该代码`gui_State.gui_Callback = str2func(varargin{1});`。通常，这段代码允许外部访问文件中的函数（即 UI 回调），但因为它在`if`语句内部`if nargin && ischar(varargin{1})`，当您将参数传递给 UI 时，它会认为您正在尝试获取处理文件中的一个函数并调用`str2func`您传递给它的空字符串（在 中`varargin{1}`）。

所以这就是为什么它不起作用。您可以简单地通过使用`varargin{2}`作为您的输入参数并使用打开您的 UI 来解决此问题`result_image([], result)`，所以这`ischar(varargin{1})`是错误的。为了使它更健壮一点，你可能应该改变

```
if nargin && ischar(varargin{1}) 
```

至

```
if nargin > 0 && nargin < 2 && ischar(varargin{1}) 
```

请注意，您首先向它传递了一个空字符串这一事实可能表明您的代码中存在打开 UI 的错误（即，无论生成什么`result`）。

# jquery - Fancybox 2 加载后更改 z-index

> ID：15781397
> 
> 赞同：0
> 
> 时间：2013-04-03T07:32:12.363
> 
> 标签：jquery, fancybox, z-index, fancybox-2

我正在使用fancybox 2 - 在它被加载后，我想让几个div在单击按钮时“出现”。对于出现，我的意思是将 z-index 更改为超过 8030 的值（这是 fancybox 的默认值）。但它没有按预期工作。我看到 z-index 被应用了——但它仍然在黑色覆盖层后面。

编辑：这里是 jsfiddle：http: [//jsfiddle.net/Z8dWa/17/](http://jsfiddle.net/Z8dWa/17/)

**解决方案：**位置：相对

CSS：

```
.inline_div{
    display:none;
}
.first{
    z-index:1;
    position:fixed:
        top:1;
    left:1;
    display:block;
    width:200px;
    height:100px;
    background:#ccc;
}
#m_help{
    z-index:2;
    position:relative;
    background:white;
    color:#888;
    width:100%;
    display: block;
    padding:10px 0 10px 10px;
    margin:5px 0 5px;
} 
```

html:

```
<div class="first">
    <a href="#help_overlay" class="inline_helper" id="m_help">Show Box</a>
    <div id="help_overlay" class="inline_div">
        <h1>It works!</h1>
    </div>
</div> 
```

花式盒：

```
$(".inline_helper").fancybox({
    maxWidth    : 500,
    maxHeight   : 500,
    autoSize    : true,
    closeClick  : false,
    scrolling   : false,
    openEffect  : 'elastic',
    openSpeed   : 150,

    closeEffect : 'elastic',
    closeSpeed  : 150

}); 
```

按钮点击：

```
$('#m_help').click(function(){
    $('#m_help').css('z-index','8050');
}); 
```

我想念什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-03T07:41:11.650

添加更多价值，例如：

```
$('#m_help').click(function(){
    $('#m_help').css('z-index','10000');
}); 
```

还请使用 Firebug 检查 z-index 以使您的 div 可见。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-03T07:45:36.413

[http://jsfiddle.net/Z8dWa/16/](http://jsfiddle.net/Z8dWa/16/)

将 #m_help 更改为`position:fixed`. 然后它工作......需要一些美化但它工作。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-03T08:19:01.763

添加`position:relative`到#m_help 即可解决。

[http://jsfiddle.net/Z8dWa/17/](http://jsfiddle.net/Z8dWa/17/)

# ruby-on-rails - 在 rspec 测试中创建一个对象变量但得到了 nil

> ID：15781403
> 
> 赞同：4
> 
> 时间：2013-04-03T07:32:27.630
> 
> 标签：ruby-on-rails, rspec

这是我的 rspec 代码：

```
describe User do
  before{(@user=User.new(username:"abcdefg",email:"123456@123.com",password:"123456")}
  subject(@user)
  @user.save
end 
```

我得到了这样的错误：`undefined method 'save' for nil:NilClass(NoMethodError)`

我尝试在 Rails 控制台中编写相同的代码，它只是工作。但是当谈到Rspec时，它失败了，我找不到任何理由......

有人可以帮我吗？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-04-03T07:42:25.043

这是Rspec方式：

```
describe User do
  let(:valid_user) { User.new(username:"abcdefg",email:"123456@123.com",password:"123456") }

  it "can be saved" do
    expect(valid_user.save).to be_true
  end
end 
```

请注意，您应该在规范中避免数据库操作，这会使它们变慢。

还有一点，考虑使用工厂来清理你的规格。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2013-04-03T07:35:54.160

您需要将代码包装在示例块中（即，`it`用块调用方法），因为在`describe`块的上下文中，`@user`没有定义。例如：

```
describe User do
  before{(@user=User.new(username:"abcdefg",email:"123456@123.com",password:"123456")}
  subject(@user)

  it "can be saved" do
    @user.should respond_to(:save)
    @user.save.should_not be_false
  end
end 
```

**编辑：**我也注意到你有`subject(@user)`，但可能需要一个块才能正确设置它。以下是整体更清洁：

```
describe User do
  let(:user) { User.new(username:"abcdefg",email:"123456@123.com",password:"123456") }

  it "can be saved" do
    user.should respond_to(:save)
    user.save.should_not be_false
  end
end 
```

# c# - 如何将样式应用于相同类型的所有控件？

> ID：15781404
> 
> 赞同：0
> 
> 时间：2013-04-03T07:32:33.303
> 
> 标签：c#, wpf, styles, controls

如何将样式应用于相同类型的所有控件（例如按钮）？无需每次在 XAML 中声明 Control 时指定样式。即我想为所有按钮指定一次样式。是否可以？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-03T07:35:04.633

不用钥匙就放

```
<Style TargetType="{x:Type Button}">
</Style> 
```

# windows - 如何在cmd中使用通配符重命名目录

> ID：15781414
> 
> 赞同：4
> 
> 时间：2013-04-03T07:32:57.270
> 
> 标签：windows, batch-file, cmd, directory

我正在尝试以下操作：

```
rename "*12" "12" 
```

我得到错误

> 该命令的语法不正确。

我做错了什么，我该如何做到这一点？

是不是我们不能在引号中使用通配符？如果是的话，我如何将它们与引号一起使用？

![](https://i.stack.imgur.com/exNJM.png)

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-04-03T08:03:34.390

`rename`使用通配符仅适用于文件，要重命名目录，请使用`move`;

```
C:\Temp>echo "test" > olle12  
C:\Temp>mkdir olle13
C:\Temp>rename "*12" 12
C:\Temp>rename "*13" 13
The syntax of the command is incorrect.
C:\Temp>move "*13" 13
C:\Temp\olle13
    1 dir(s) moved.
C:\Temp>dir
 Directory of C:\Temp

2013-04-03  10:01                 9 12
2013-04-03  10:01    <DIR>          13 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-04-03T08:42:00.403

重命名也适用于文件夹：

```
ren "the god of high school 12" 12 
```

.. 或者您使用 for 循环：

```
for /d %i in (*12) do ren "%~i" 12 
```

# dotnetnuke - DNN 自定义日志类型

> ID：15781415
> 
> 赞同：0
> 
> 时间：2013-04-03T07:32:57.850
> 
> 标签：dotnetnuke

我目前正在使用 Community DNN 版本 7。我想向现有期刊添加新的自定义期刊类型。有什么办法可以做到这一点吗？如果可以，请提供一些链接，以便我参考。

非常感谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-05T03:11:22.383

在 6.2 中确实不建议添加自定义期刊类型，这就是为什么他们一开始就添加了 32。

我在 API 中似乎没有任何方法可以直接添加，因此您可能无法直接插入数据库或创建自己的方法来执行此操作。

您要添加它们的表是 Journal_Types。

更多信息可以在这里找到：

[http://www.dotnetnuke.com/Community/Community-Exchange/Question/770/Journal-Can-we-create-custom-Journal-types.aspx](http://www.dotnetnuke.com/Community/Community-Exchange/Question/770/Journal-Can-we-create-custom-Journal-types.aspx)

# javascript - 调整 iScroll 4 的大小以 100% 适应任何设备

> ID：15781421
> 
> 赞同：1
> 
> 时间：2013-04-03T07:33:18.663
> 
> 标签：javascript, resize, iscroll, iscroll4

我正在尝试调整包装器的大小，因此当在 iPhone、iPad 或计算机上查看时，我的网站 100% 都在视图中。我已经使用`<ul>`and`<il>`方法在我的滚动条中放置了图片。
目前一切都在我的电脑上，但在 iPhone 上，图片被截断了。它让我可以水平和垂直滚动我的图片，但需要调整包装器的大小以使我的图片更小。
任何帮助都会很棒。提前喝彩

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-23T20:35:31.647

您没有提供任何代码，因此这些代码可能对您有所帮助：

1.  当浏览器调整大小和 window.onload 时，为包装器设置适当的***宽度/高度。*****因为在window.onload**之前我们不知道设备处于横向还是纵向模式。[这里](https://stackoverflow.com/a/15840822/1344509)更好地解释了如何获得调整大小的浏览器宽度/高度。

2.  检查您的图像*宽度/高度*。也许图像的尺寸比**wrapper**宽。您可以以百分比设置图像的*宽度/高度。*

3.  并且不要忘记在浏览器调整大小时刷新 iScroll。你可以这样做：

    `setTimeout(function(){myScroller.refresh()}, 400); // browser need time to rotate`

# android - 如何通过 Google Play 商店报告的崩溃报告了解设备信息？

> ID：15781428
> 
> 赞同：-1
> 
> 时间：2013-04-03T07:33:39.243
> 
> 标签：android, android-intent, google-play-services

几天前，我在 Play 商店中上传了我的应用程序。今天我收到了一份崩溃报告和用户对我帐户的评论。我们如何才能知道发生崩溃的设备的详细信息。谁能告诉我该怎么做？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-03T07:41:29.597

您可以实现崩溃报告工具，例如 Bugsense 或 Acra。这些都是免费的并且易于集成。请检查

错误感[https://www.bugsense.com/](https://www.bugsense.com/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-03T07:45:29.113

在您的**崩溃和 ANR**选项卡中，您`Google Play Developer Console`可以`Device`在打开崩溃报告时查看报告的来源。

您将看到两个选项卡，`Stack Traces`并且`User Messages`在“用户消息”选项卡中，您可以看到崩溃发生在哪个设备上。

**编辑**：
如果用户未`Description`在设备的崩溃报告中输入 a，则可能缺少设备信息。

# java - 动态多态性

> ID：15781431
> 
> 赞同：0
> 
> 时间：2013-04-03T07:33:59.857
> 
> 标签：java

```
class Test {
    public static void main(String[] args) {
        Animal a = new Dog();
        Dog d = new Dog();

        d.makeNoise();  // output "Sub"
        a.makeNoise();  // output "Sub"  then what is use of calling this. why not call d.makeNoise() only.

    }
}

abstract class Animal {
    public void makeNoise() {
        System.out.println("Super");
    }
}

class Dog extends Animal {
    @Override
    public void makeNoise() {
        System.out.println("Sub");
    }
} 
```

我们就这个话题进行了 15 分钟的讨论（我想 15 分钟太长了）我向面试官解释了如何`a.makeNoise();` 在
`a.makeNoise();`输出“Sub”然后调用它有什么用。为什么不只调用 d.makeNoise()
我也去了接口，但仍然有问题是子类引用是否给出相同的输出，那么为什么要使用超类引用。

> 面试官的问题是，有什么区别`a.makeNoise();`？为什么`d.makeNoise();`不只在两者都提供相同的输出时才调用？

可能的正确答案是什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-03T07:39:04.690

下面的示例说明了动态多态性。a 和 d 都被声明为 Animals，但 d 实际上是一只狗。

请注意，当我在 Animal d 上调用 makeNoise 时，java 会知道 d 实际上是一只狗，而不仅仅是任何动物。

```
class Test {
    public static void main(String[] args) {
        Animal a = new Animal();
        Animal d = new Dog();

        d.makeNoise();  // output "Bark"  - d is an animal that barks
        a.makeNoise();  // output "Squawk"  - a is an animal that squawks

    }
}

class Animal {
    public void makeNoise() {
        System.out.println("Squawk");
    }
}

class Dog extends Animal {
    @Override
    public void makeNoise() {
        System.out.println("Bark");
    }
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-03T07:39:37.240

```
Animal a = new Dog();    // this animal is a dog
Dog d = new Dog();       // this dog is a dog 
```

狗就是狗，不管你怎么宣布它。

`a.getClass()`等于`d.getClass()`等于`Dog.class`。

另一方面：

```
Animal a = new Animal(); // this animal is an animal
a.makeNoise();           // prints "Super" 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-03T07:35:43.427

这就是原因——

```
Animal a = new Dog(); 
```

动物是狗，所以噪音是一样的:)

如果使用该方法创建另一种动物，例如 Cat，并将动物指向 Cat，您应该会得到不同的噪音。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-04-03T07:45:43.270

您的简化示例不能很好地展示这个案例。

```
Collection<Animal> caged = getCagedAnimals();
for (Animal a : caged)
  a.makeNoise(); 
```

由于有许多类型的动物（类），每一种都会发出不同的声音。可以这么说，我们不需要任何类型转换来获得不同的行为。想象一下，如果我们希望每只动物在没有多态性的情况下发出声音，将会发生什么可怕的事情：

```
for (Animal a : caged) {
  if (a instanceof Dog)
    ((Dog)a).woof(); // or, ((Dog)a).makeNoise()
  else if (a instanceof Cat)
    ((Cat)a).meow(); // or, ((Cat)a).makeNoise()
  else {...}
} 
```

让我们有一个类型为 T 的对象。我们试图调用 toString()（由 Object 类定义） 动态方法调用过程如下（实际上是使用虚拟方法表）：

```
C = T
do
  if (C defines toString()) {
    call T.toString()
    break
  }
  C = superclass of C
while (C != null)
throw new NoSuchMethodError(); 
```

现在，如果我们有

```
Object obj = new T(); 
```

我们打电话给

```
obj.toString(); 
```

我们实际上是在调用 T 类的 toString()。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2016-12-25T19:54:49.857

考虑有3个类

1.  动物
2.  狗
3.  猫猫和狗是动物的子类。

* * *

```
class Test {
    public static void main(String[] args) {
        Animal a = new Animal();

    int user_input=userinput();  //returns 1 for cat and 2for dog
    switch(user_input)
    {
    case 1:Animal d=new Cat();
    break;
    case 2: Animal d=new Dog();
    break;
    }
        d.makeNoise();  // output "Bark"/"meow"  as per user input(dynamic linking)
        a.makeNoise();  // output "Squawk"  - a is an animal that squawks
    }
    } 
    class Animal {
    public void makeNoise() {
        System.out.println("Squawk");
    }
    } 
    class Cat extends Animal {
    @Override
    public void makeNoise() {
        System.out.println("meow");
    }
    }
    class Dog extends Animal {
    @Override
    public void makeNoise() {
        System.out.println("Bark");
    }
    }
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2013-04-03T08:42:56.020

```
class Account {
    public static void main(String[] args) {
        Animal a = new Dog();
        Dog d = new Dog();
        d.makeNoise();
        a.makeNoise();
        a = new Cat();
        a.makeNoise();
    }
}

abstract class Animal {
    public void makeNoise() {
        System.out.println("Super");
    }
}

class Dog extends Animal {
    public void makeNoise() {
        System.out.println("Sub");
    }
}

class Cat extends Animal {

} 
```

参见上面的修改示例和观察结果

1.  我们有一个抽象类 Animal，它有一个 makeNoise 的实现（这里我说默认实现）
2.  我们有一个 Dog 类，它是 Animal 类型，但有一个自定义的 makeNoise 方法
3.  我们有一个 Cat 类，它属于动物类型，但没有自定义的 makeNoise 方法。它使用 Animal 类型的默认 makeNoise。
4.  如果我使用 Animal a = new Dog() 和 a.makeNoise()，那么我可以随时从 Dog 类中删除我的 makenoise 方法，而无需更改任何其他类。它仍然会编译和执行而不会出现任何错误。
5.  如果我使用 Dog d = new Dog() 和 d.makeNoise()，那么我无法随时从 Dog 类中删除我的 makenoise 方法。如果这样做，我还需要更改要编译的应用程序的主类。

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2013-04-03T09:23:02.013

我会给一个普通的前任：-personA 有一个银行账户，他拥有该账户的所有权限（提款、存款、贷款等）。personB 想在这个时候将钱存入 personA 的账户，他想访问 personA 的账户，但我们只需要提供存款权限。

```
 class perosnB
{
 public void deposit()
{ 
................
 } 
 } 
class personA extends personB
{  
public void deposit()
{
......
}
public void withdraw() 
{ 
...... 
} 
} 
personA p=new personB(); 
PersonB p2=new personB(); 
```

通过使用 p 对象，我们只能访问withdraw 方法。通过使用p2，我们也可以访问存款。天气人A类是否抽象。如果 personA 是抽象类，则不可能为 personA 类创建对象（ personA p=new personA()) 。personA p=new personB() 是可能的。

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2014-05-19T17:33:46.427

```
Animal a = new Dog(); 
```

a 是**Animal**类型的引用，但它引用**Dog**类型的对象。

这里**Dog**覆盖了**Animal**类的**makeNoise()**方法。

 **```
class Animal {
    public void makeNoise() {
        System.out.println("Squawk");
    }
}

class Dog extends Animal {
    @Override
    public void makeNoise() {
        System.out.println("Bark");
    }
} 
```

由于对象属于**Dog**类，JVM 会将**Dog**类的**makeNoise()**方法绑定到对象，并且绑定将在运行时完成。

所以输出

```
a.makeNoise(); 
```

将会

**子****

# c# - 正则表达式：检查某个枢轴字符左侧的字符串是否等于枢轴右侧的字符串

> ID：15781433
> 
> 赞同：0
> 
> 时间：2013-04-03T07:34:14.667
> 
> 标签：c#, .net, regex

我想编写一个正则表达式来检查左右部分（相对于某些枢轴字符）是否相等，例如

`m2/m2`-> 是的

`m3/m2`-> 没有

如何编写一个正则表达式来检查枢轴字符左侧的捕获是否等于右侧？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-03T07:37:58.807

我不确定 C# 语法，但以下适用于 Python 和 perl：

```
([^/]+)/\1 
```

`\1`指回第一个捕获组并匹配那里捕获的任何内容。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-03T07:38:06.260

像这样的东西应该工作：

```
/(\w*)\/\1\b/g 
```

这将匹配字符串中的 m1/m1，无论其大小如何（请注意，它不会被 m1/m11 愚弄，但在第二个单词之后需要一个空格）。
如果你的字符串只像 m1/m1，那就更好了：

```
/^(\w*)\/\1$/ 
```

在 C# 中：`new Regex(@"^(.*?)/\1$")`

# javascript - 禁用 Internet Explorer 关闭按钮

> ID：15781434
> 
> 赞同：-1
> 
> 时间：2013-04-03T07:34:20.353
> 
> 标签：javascript, asp.net, internet-explorer, c#-4.0

我有一个要求，当 ajax 模式弹出窗口显示在页面内以满足业务需求时，应禁用 IE 浏览器关闭。请让我们知道相同的可行性或解决需求的选项。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-03T07:47:48.387

在任何现代浏览器中禁用关闭按钮是不可能的**。**

如果您正在寻找的只是让用户留在您的页面中，那么我建议使用 window.onbeforeunload JavaScript 事件

```
window.onbeforeunload = function(){ return 'Do you want to leave ?';} 
```

通过向用户询问他们是否要在关键操作中间离开的问题，所有主要浏览器都支持它。

这是一篇帮助您开始[使用 OnBeforeUnload JavaScript 事件的参考文章](http://bytes.com/topic/javascript/insights/825556-using-onbeforeunload-javascript-event)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-03T07:43:46.307

您不能禁用浏览器的关闭按钮，但是可以在 Jquery 的帮助下捕获浏览器的关闭按钮

# java - Google App Engine Java 全文搜索索引不存储所有文本

> ID：15781435
> 
> 赞同：1
> 
> 时间：2013-04-03T07:34:21.137
> 
> 标签：java, google-app-engine, full-text-search

我正在使用 Google App Engine SDK 1.7.5。并遵循全文搜索 api com.google.appengine.api.search

在为对象创建全文搜索索引时，我的索引已成功为该对象创建，但一些内容相当长的文本属性并未完全存储，而是被截断，我无法找到原因为什么。有没有人遇到过这个问题

# c++ - 自定义链表排序方法

> ID：15781436
> 
> 赞同：0
> 
> 时间：2013-04-03T07:34:25.657
> 
> 标签：c++, sorting, linked-list

嗨，我正在制作一个自定义链表（为了好玩！）并希望实现一个排序方法，该方法使用存储类型 > 和 < 运算符对存储的数据进行排序（将要求类型重载这些运算符）

做这个的最好方式是什么？我想人们可能会跳到的第一件事是将当前节点与其“右边”的节点进行比较，看看一个是否大于另一个。然后继续遍历列表，直到不再交换任何节点。但是我认为可能有一种更有效的方法来做到这一点。到目前为止，这是我的代码：

```
#ifndef LIST_HPP
#define LIST_HPP

#include <string>

template <typename T>
class Node;

template <typename T>
class List
{   
    public:
        List();
        ~List();

        bool isEmpty() const;
        T& front();
        T& back();
        inline unsigned int size() const;
        void pushFront(const T& s);
        void removeElement(const T& s);
        void insert(const T& s);
        T popFront();
        const T* each();

    private:
        unsigned int size_;
        Node<T>* head_;
        Node<T>* current_;      
};

template <typename T> List<T>::List() : size_(0), head_(0), current_(0)
{
}

template <typename T> List<T>::~List()
{
    while (isEmpty())
    {
        popFront();
    }
    head_ = 0;
}

template <typename T> bool List<T>::isEmpty() const
{
    return (!size_ || !head_);
}

template <typename T> T& List<T>::front()
{
    if (isEmpty())
        throw std::string("List Empty");

    return head_->data();
}

template <typename T> T& List<T>::back()
{
    Node<T>* cur = head_;

    while (true)
    {
        if (cur->next() == 0)
            return cur->data();

        cur = cur->next();
    }
}

template <typename T> void List<T>::pushFront(const T& s)
{
    current_ = head_ = new Node<T>(s, head_);

    size_++;
}

template <typename T> T List<T>::popFront()
{
    if (isEmpty())
    {
        throw std::string("List Empty");
    }

    Node<T>* current_head = head_;
    current_ = head_ = head_->next();

    T temp = current_head->data();

    delete current_head;

    size_--;

    return temp;
}
template <typename T> const T* List<T>::each()
{
    if (isEmpty())
        return 0;

    if (current_ == 0)
    {
        current_ = head_;
        return 0;
    }

    const T* ret_str = &current_->data();

    current_ = current_->next();

    return ret_str;
}
template <typename T> void List<T>::removeElement(const T& s)
{
    if (isEmpty())
    {
        throw std::string("List Empty");
        return;
    }

    Node<T>* prev = 0, *rnode;

    rnode = head_;

    while (rnode != 0)
    {
        if (rnode->data() == s)
            break;

        prev = rnode;
        rnode = rnode->next();
    }

    if (prev == 0)
    {
        Node<T>* temp = head_;
        current_ =  head_ = head_->next();

        delete temp;        
    }
    else
    {
        prev->next(rnode->next());
        delete rnode;
    }

    size_--;
}
template <typename T> void List<T>::insert(const T& s)
{
    if (isEmpty())
    {
        pushFront(s);
    }
    else if (size_ == 1)
    {
        if (s <= head_->data())
            pushFront(s);
        else
            head_->next(new Node<T>(s, 0));

        size_++;
    }
    else
    {
        Node<T>* current, *prev = 0, *new_node = 0;

        while (current != 0)
        {
            if (s <= current->data())
                break;

            prev = current;
            current = current->next();
        }

        if (prev == 0)
            pushFront(s);
        else
            prev->next(new Node<T>(s, current));

        size_++;

    }

}

template <typename T> unsigned int List<T>::size() const {return size_;}

template <typename T>
class Node
{
    public:
        Node(const T& data, Node<T>* next = 0);
        T& data();
        Node* next();
        void next(Node<T>* n);

    private:
        T data_;
        Node* next_;
};

template <typename T> Node<T>::Node(const T& data, Node* next): data_(data), next_(next)
{
}

template <typename T> void Node<T>::next(Node<T>* n)
{
    next_ = n;
}
template <typename T> Node<T>* Node<T>::next()
{
    return next_;
}
template <typename T> T& Node<T>::data()
{
    return data_;
}
#endif //LIST_HPP 
```

当然有一种方法可以通过列表仅进行一次迭代进行排序？或者可能不是。

提前感谢您的帮助！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-03T11:40:38.183

可以使用[基数排序](http://en.wikipedia.org/wiki/Radix_sort)，并且有一篇关于链表排序的非常好的文章，比在 O(n * n) 时间内执行一个节点与每个其他节点的比较更[有效](http://www.drdobbs.com/database/efficiently-sorting-linked-lists/184410973)。

# sharepoint-2010 - sharepoint 日期时间控件 ClearSelection 方法在 OnDateChanged 事件中不起作用

> ID：15781438
> 
> 赞同：1
> 
> 时间：2013-04-03T07:34:48.033
> 
> 标签：sharepoint-2010

我在我的 Visual Web 部件中使用 SharePoint DateTimeControl。在这里，我正在检查选择的日期不应该是未来的日期，为此我使用 ScriptManager.RegisterStartupScript 来显示该警报消息，如果用户输入了未来的日期。这些活动在 OnDateChanged 事件下处理。当我显示警报消息并使用 ClearSelection() 方法从 DateTimecontrol 清除所选日期时，它不会清除该值。下面我粘贴了我的代码。

在设计方面：

```
<SharePoint:DateTimeControl ID="dtManagerJoiningDate" runat="server" AutoPostBack="true"
                    DateOnly="true" OnDateChanged="dtManagerJoiningDate_OnDateChanged" /> 
```

在后面的代码中：

```
 protected void dtManagerJoiningDate_OnDateChanged(object sender, EventArgs e)
    {
        if (dtManagerJoiningDate.IsValid)
        {
            if (dtManagerJoiningDate.SelectedDate > todayDate)
            {
                ScriptManager.RegisterStartupScript(this, this.GetType(), "Invalid Date", "alert('Joining Date should be past Date');", true);
                dtManagerJoiningDate.ClearSelection();
            }
        }
    } 
```

请帮我解决这个问题......

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-04T14:42:24.623

我能够使用更新面板和脚本管理器复制该问题。

我不能告诉你为什么，但我通过将 clearSelection 代码放在**OnPreRender中来完成这项工作**

```
bool _clearSelection = false
protected void dtManagerJoiningDate_OnDateChanged(object sender, EventArgs e)
{
    if (dtManagerJoiningDate.IsValid)
    {
        if (dtManagerJoiningDate.SelectedDate > todayDate)
        {
           _clearSelection = true;
        }
    }
 }

    protected override void OnPreRender(EventArgs e)
    {
        //see if it clear selection is set
        if(_clearSelection)
        {
            ScriptManager.RegisterStartupScript(this, this.GetType(), "Invalid Date",           "alert('Joining Date should be past Date');", true);
            dtManagerJoiningDate.ClearSelection();
         }
    } 
```

# permissions - 域用户以管理员身份访问共享

> ID：15781441
> 
> 赞同：1
> 
> 时间：2013-04-03T07:34:57.860
> 
> 标签：permissions, windows-server-2008, share, windows-server-2003, administration

我有一个很奇怪的情况（在网上找不到），让我解释一下：

在我的网络中，我有文件服务器（SERV1、Windows Server 2003）和带 AD 的域控制器（SERV2、Windows Server 2008）

在文件服务器上，每个员工都有一个带有子文件夹的共享文件夹 TOPLEVELFOLDER > emp1, emp2, emp3... 每个用户只能完全控制自己的文件夹，并且可以读取其他用户的文件夹。

toplevelfolder 上的共享权限如下所示：SERV1\Administrators=full control, Authenticated Users=Change, Read

NTFS 安全设置：SERV1\Administrators=full，Everyone=read，SYSTEM=full，%MYDOMAINUSERNAME%=full

每个子文件夹都有从顶级文件夹继承的所有这些设置 + 对特定用户的完全控制。

AD 中的所有用户都来自域用户组，其中没有一个用户在本地管理员组或 SERV1\Administrators 组中。

问题是有一些用户（这里绝对没有逻辑）可以完全访问顶层文件夹的所有子文件夹和文件，当我通过 SERV1 > Computer Management > Shared Folders > Sessions 或 Open Files 查看时，我看到这些用户显示 ACCESSED BY ADMINISTRATOR ，但其他用户按应有的方式显示 ACCESSED BY %DOMAINUSERNAME%。

在一切正常之前，这个问题发生在某个随机的日子。

我不明白为什么有些用户以管理员身份进行身份验证。

有任何想法吗？:)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-03T08:05:00.543

好的，伙计们，这是解决方案，它是在问了我现在挣扎了很多天的问题之后才诞生的。

似乎我使用我的域管理员帐户从随机用户的计算机登录了该共享资源，并且 Windows 记住了该帐户和密码。我需要做的就是删除记住的信息。首先，我从用户的计算机上运行“控制 userpasswords2”，然后在“高级”>“管理密码”下看到列表为空，然后我运行“控制 keymgr.dll”和 VIOLA ！！！这是记住的信息，只需将其删除，问题就消失了:)

也许这种做法/故事将来也会对其他人有所帮助。谢谢你们！

# php - 值不为空的 PHP 表单验证

> ID：15781442
> 
> 赞同：1
> 
> 时间：2013-04-03T07:34:58.793
> 
> 标签：php, validation, isnumeric

尝试验证字段时，它似乎不起作用。我只需要在不是`!is_numeric`时执行。我确实有客户端验证，但我想确保我也有服务器端验证。`$postcode``null`

代码：

```
else if(!is_null($postcode) && !is_numeric($postcode))  
{
    $msg_to_user = '<br /><br /><h4><font color="FF0000">Postcode must be a numeric value.</font></h4>';
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-03T07:47:59.810

假设`$postcode` 来自 a`$POST`或`$GET`，它总是一个字符串。`!is_null()`因此将是 FALSE，无论：

```
php> var_dump(is_null(""))
#=> bool(false) 
```

您可以恢复使用`empty()`更自由的 using 。然而，当涉及到这些检查时，PHP 是完全不一致和奇怪的。例如，`empty()`也将返回`FALSE`0。是的。

```
php> $postcode = "";
php> var_dump(empty($postcode))
#=> bool(true)
php> $postcode = 0;
php>var_dump(empty($postcode))
#=> bool(true) 
```

一个更好的方法是做某种“[鸭式打字](https://en.wikipedia.org/wiki/Duck_typing)”。在您的情况下：当它可以转换为数值时，请执行此操作并使用它。然后将其留给语言来确定它认为“数字-ish”足以转换的内容。

```
php> var_dump((int) "")
int(0)
php> var_dump((int) "13")
int(13) 
```

所以：

```
else if(($postcode = (int) $postcode) && ($postcode > 0)) {
} 
```

最后，题外话：注意关于您的业务假设的警告：邮政编码并不总是数字。是的，在美国大多数是。但是那里有更多的国家（说这是欧盟公民，他们经常出现在假设每个人都是普通美国公民的网站上）

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-03T07:48:39.137

也许您想在 strlen() 函数上使用 empty() 函数，因为 is_null() 检查 NULL 值。如果 $postcode 是 == "" 它不是 NULL。

```
http://php.net/manual/en/function.is-null.php 
```

比你可以使用

```
else if(!empty($postcode) && !is_numeric($postcode))  { 
```

或者

```
else if(strlen($postcode) > 0 && !is_numeric($postcode))  { 
```

或者

```
else if($postcode != "" && !is_numeric($postcode))  { 
```

如链接中所述，如果要使用 is_null，最好使用 $postcode !== NULL。快多了

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-03T07:49:05.190

尝试这个

```
else if(!empty($postcode) && !is_numeric($postcode))  {
  $msg_to_user = '<br /><br /><h4><font color="FF0000">Postcode must be a numeric value.</font></h4>';
} 
```

希望这可以帮助

# c# - Itextsharp“无法识别令牌类型”

> ID：15781443
> 
> 赞同：-1
> 
> 时间：2013-04-03T07:34:59.940
> 
> 标签：c#, pdf-generation, itextsharp, tiff

我正在从 tiff 文件生成 pdf。使用 Acrobat 7 打开时出现无法识别令牌类型的错误。我只看到全文中的一些文字，但没有看到这个pdf中的图片！

使用 acrobat reader XI 可以正确查看 pdf。当我向下滚动时，我收到一条消息，指出此文件中有错误，但没有更多信息。

有谁知道问题出在哪里？我在 Itext 中尝试了许多 PDF 版本，但没有其他结果！

这是一些代码：

```
 Clock.hocr.Elements.hDocument hdoc = new Clock.hocr.Elements.hDocument();
        hdoc.AddFile("out3.html");
        Clock.hocr.PDFSettings pdfset = new Clock.hocr.PDFSettings();
        pdfset.ImageType = Clock.hocr.PdfImageType.JPeg;
        pdfset.ImageQuality = 50;
        //pdfset.Subject = "Fulltext";
        //pdfset.Title = "ft";
        //pdfset.Language = "german";
        //pdfset.Author = "datapool";
        pdfset.Dpi=300;
        //pdfset.Keywords="...";
        //pdfset.PdfOcrMode =Clock.hocr.OcrMode.Tesseract;
        pdfset.WriteTextMode = Clock.hocr.WriteTextMode.Word;

        //pdfset.Dpi = 300;

        Clock.hocr.PdfCreator pdfcreat = new Clock.hocr.PdfCreator(pdfset,"test.pdf");
        List<Image> pages = GetAllPages("test.tif");

        for (int i = 0; i<hdoc.Pages.Count;i++)
        {
            Clock.hocr.Elements.hPage hpage = hdoc.Pages[i];
            pdfcreat.AddPage(hpage, pages[i]);

        }

        pdfcreat.SaveAndClose(); 
```

您可以在以下位置找到 Clock.hocr 模块：http: [//hocrtopdf.codeplex.com/](http://hocrtopdf.codeplex.com/)

```
public void AddPage(hPage page, System.Drawing.Image pageImage)
    {
        doc.NewPage();
        doc.AddHeader("COPYRIGHT", "DATAPOOL GmbH");
        AddImage(pageImage);
        WriteUnderlayContent(page);

    } 
```

doc 来自类型 itextsharp.text.document

```
public void AddImage(System.Drawing.Image image)
    {
        try
        {
            if (OnProcessImage != null)
            {
                AddImage(OnProcessImage(image));
                return;
            }

            iTextSharp.text.Image i = GetImageForPDF(ImageProcessor.GetAsBitmap(image));

            i.SetAbsolutePosition(0, 0);
            // doc.SetPageSize(new iTextSharp.text.Rectangle(i.Width, i.Height));
            i.ScaleAbsolute(doc.PageSize.Width, doc.PageSize.Height);
            doc.Add(i);

        }
        catch (Exception x)
        {
            Debug.WriteLine(x.Message);
            throw x;
        }
    } 
```

...

```
 private void WriteUnderlayContent(hPage page)
    {
        string pageText = page.Text;
        foreach (hParagraph para in page.Paragraphs)
        {
            foreach (hLine line in para.Lines)
            {
                if (pdfSettings.WriteTextMode == WriteTextMode.Word)
                {
                    line.AlignTops();
                    foreach (hWord c in line.Words)
                    {
                        c.CleanText();
                        BBox b = BBox.ConvertBBoxToPoints(c.BBox, pdfSettings.Dpi);
                        BBox lineBox = BBox.ConvertBBoxToPoints(line.BBox, pdfSettings.Dpi);
                        PdfContentByte cb = cb = writer.DirectContentUnder;

                        BaseFont base_font = BaseFont.CreateFont(BaseFont.HELVETICA, BaseFont.WINANSI, false);
                        iTextSharp.text.Font font = new iTextSharp.text.Font(base_font);

                        float h = (int)Math.Ceiling(b.Height);
                        int font_size = (int)Math.Ceiling(h);
                        if (font_size == 0)
                            font_size = 2;

                        cb.BeginText();
                        cb.SetFontAndSize(base_font, (float)font_size);
                        cb.SetTextMatrix(b.Left, doc.PageSize.Height - b.Top - b.Height);
                        //float spacing = (c.BBox.Width / (c.Text.ToCharArray().Count())) / 100;
                        float spacing = (c.BBox.Width / (c.Text.ToCharArray().Count())) / 100 ;
                        cb.SetCharacterSpacing(spacing);
                        cb.ShowText(c.Text + " ");
                        cb.EndText();
                    }
                }
                else
                {
                    line.CleanText();
                    BBox b = BBox.ConvertBBoxToPoints(line.BBox, pdfSettings.Dpi);
                    BBox lineBox = BBox.ConvertBBoxToPoints(line.BBox, pdfSettings.Dpi);
                    PdfContentByte cb = cb = writer.DirectContentUnder;

                    BaseFont base_font = BaseFont.CreateFont(BaseFont.HELVETICA, BaseFont.WINANSI, false);
                    iTextSharp.text.Font font = new iTextSharp.text.Font(base_font);

                    float h = (int)Math.Ceiling(b.Height);
                    int font_size = (int)Math.Ceiling(h);
                    if (font_size == 0)
                        font_size = 2;

                    cb.BeginText();
                    cb.SetFontAndSize(base_font, (float)font_size);
                    cb.SetTextMatrix(b.Left, doc.PageSize.Height - b.Top - b.Height);
                    float spacing = (line.BBox.Width / (line.Text.ToCharArray().Count())) / 100;
                    cb.SetCharacterSpacing(spacing);
                    cb.ShowText(line.Text);
                    cb.EndText();
                }
            }
        }
    } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-04T09:30:43.187

解决了问题！错误出现在错误的 CharacterSpacing... 将其修复为 -0.0025 并且 pdf 正在工作！

# compiler-errors - JRE 抛出的致命错误

> ID：15781448
> 
> 赞同：0
> 
> 时间：2013-04-03T07:35:11.020
> 
> 标签：compiler-errors, runtime, native, java

我在 Eclipse IDE 中处理我的应用程序，突然在尝试运行应用程序时开始出现这样的错误：

```
#
# A fatal error has been detected by the Java Runtime Environment:
#
#  EXCEPTION_ACCESS_VIOLATION (0xc0000005) at pc=0x064ed42a, pid=720, tid=5424
#
# JRE version: 7.0_17-b02
# Java VM: Java HotSpot(TM) Client VM (23.7-b01 mixed mode, sharing windows-x86 )
# Problematic frame:
# C  [ig4icd32.dll+0x3d42a]
#
# Failed to write core dump. Minidumps are not enabled by default on client versions of Windows
#
# If you would like to submit a bug report, please visit:
#   http://bugreport.sun.com/bugreport/crash.jsp
# The crash happened outside the Java Virtual Machine in native code.
# See problematic frame for where to report the bug.
# 
```

从日志文件中，我以某种方式意识到错误存在于本机代码中（问题框架：#C [ig4icd32.dll+0x3d42a]）。但是，我不知道如何解决它，谁能告诉我这是什么程序？

这是日志文件：[http ://ulozto.cz/xM8uaxf/hs-err-pid720-log](http://ulozto.cz/xM8uaxf/hs-err-pid720-log)

谢谢你的帮助。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-03T07:45:32.750

通常没有解决此类错误的方法，除非您可以自己确定自己做错了什么（或者这是一个错误）。从有问题的 dll 文件中，我看到您正在处理图形，也许是 3d？DLL 描述为“OpenGL(R) Driver for Intel(R) Graphics Accelerator, Intel Graphics Accelerator Drivers for Windows NT(R)”。

所以我可以建议

*   检查您的代码是否违反了某些图形限制
*   查看错误数据库，可能是已知错误
*   更新图形驱动程序
*   将 JRE 更新到某个较新的版本

# database - Postgres：发生重复时是否可以只显示一个条目？

> ID：15781452
> 
> 赞同：2
> 
> 时间：2013-04-03T07:35:17.417
> 
> 标签：database, postgresql

我有一个包含重复条目的 postgres 数据库。我想显示 created_by 列和

```
id | name    | created_on
1  | 'Hello' | 3/29
2  | 'Hey'   | 4/3
3  | 'Hello' | 3/31
4  | 'Hey'   | 4/1 
```

由于“你好”和“嘿”是重复的，我想形成一个查询来列出以下内容：

```
id | name    | created_on
2  | 'Hey'   | 4/3
3  | 'Hello' | 3/31 
```

我怎样才能形成那个 SQL 查询？

实际上，我尝试将 'DISTINCT ON' 和 'ORDER BY' 放在一个查询中（使用 JOIN）它给了我以下错误：

```
SELECT DISTINCT ON expressions must match initial ORDER BY expressions 
```

提前致谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-03T07:40:59.717

试试这个：

```
SELECT t1.*
FROM tablename AS t1
INNER JOIN
(
  SELECT name, MAX(created_on) AS MaxDate
  FROM tablename 
  GROUP BY name
) AS t2  ON t1.name       = t2.name
        AND t1.created_on = t2.maxdate; 
```

## [SQL 文件演示](http://www.sqlfiddle.com/#!10/b7f55/6)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-03T07:50:48.853

试试这个查询

```
select 
  a.* 
from 
  table1 a
inner join 
  (select 
     name, 
     max(created_on) as date 
  from 
     table1 
  group by 
     name)b
on 
  a.name = b.name AND 
  a.created_on = b.date 
```

[**小提琴**](http://sqlfiddle.com/#!12/f399e/4)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-03T11:17:30.817

[SQL小提琴](http://www.sqlfiddle.com/#!10/b7f55/9)

```
select distinct on (name)
    id, name, created_on
from tablename
order by name, created_on desc 
```

如果您需要按 id 订购：

```
select *
from (
    select distinct on (name)
        id, name, created_on
    from tablename
    order by name, created_on desc
) s
order by id 
```

# php - .htaccess 不接受密码

> ID：15781455
> 
> 赞同：0
> 
> 时间：2013-04-03T07:35:24.163
> 
> 标签：php, .htaccess

.ht 访问代码

```
AuthType Basic
AuthName "Authentication Required"
AuthUserFile ".htpasswd"
Require valid-user 
```

`.htaccess`文件和`.htpasswd`文件存在于同一个地方，当我访问 URL 时，它会询问用户名和密码，但页面重定向到`Internal Server Error`.

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-03T07:43:33.790

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-03T07:42:17.683

您需要在 AuthUserFile 中提供完整路径。例如像这样：

```
AuthUserFile "/var/www/DOMAIN/docs/admin/.htpasswd" 
```

因此，从 $_SERVER （或任何其他方式）中找出确切的文档根路径。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-03T09:39:51.117

`i dont like to hard code this path`

如果是这种情况，`.htpasswd`请在 $DOCUMENT_ROOT 目录中创建一个符号链接，如下所示：

```
cd "\wamp\bin\apache\Apache2.2.17\"
MKLINK \actual\path\of\.htpasswd .htpasswd 
```

### 请参见此处：[如何在 Windows 中创建符号链接？](https://serverfault.com/questions/7109/how-do-i-create-a-symbolic-link-in-windows)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-04-03T07:38:13.093

您是否尝试过查看 Apache 日志？

这`Internal Server Error`意味着 Apache 认为您的配置出现问题，并且很可能它在`/var/log/apache2/error.log`您的服务器中放置了一些日志。

寻找它，您应该对出了什么问题有一个很好的了解。

祝你好运。

# javascript - Windows Phone WebBrowser - onClick javascript 不起作用

> ID：15781456
> 
> 赞同：1
> 
> 时间：2013-04-03T07:35:26.567
> 
> 标签：javascript, windows-phone-7, webbrowser-control, windows-phone, href

在 WindowsPhone 7.8 上使用 WebBrowser 控件时，我遇到了一些 javascript 问题。当我使用`href="#"`onClick 方法时工作正常，但是当我将其更改为`href="javascript:;"`onClick 方法时不起作用。我尝试在 WindowsPhone 网络浏览器中使用它，没有问题，两个链接都可以正常工作。

这是我的测试页面的完整代码（[http://klamborowski.pl/test/js.html](http://klamborowski.pl/test/js.html)）：

```
<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="pl">
<head>
<title>
</title>

<meta http-equiv="content-type" content="text/html; charset=ISO-8859-2" />

<script type="text/javascript">function post_to_url() {
    var form = document.createElement("form");
    form.setAttribute("method", "post");
    form.setAttribute("action", "http://stackoverflow.com/");

    document.body.appendChild(form);form.submit();
}
</script> 
</head>
<body>
<b>
    <a href="javascript:;" onclick="post_to_url();">Click <br>here - javascript:;</a> <br>
    <br>
    <br>
    <br>
    <a href="#" onclick="post_to_url();">Click <br>here - #</a> <br>
</b>
</body>
</html> 
```

和使用它的 C# 代码：

```
myWebBrowser.IsScriptEnabled = true;
myWebBrowser.Navigate(new Uri("http://klamborowski.pl/test/js.html")); 
```

提前感谢您的任何提示和帮助。

编辑：这只是示例页面。在我的真实项目中，我使用第三方支付页面（其中包含`href="javascript:;"`），我无法对其进行任何更改。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-06-12T14:55:29.350

尝试将`onclick`在您的链接中的**第一个位置**，在其他任何事情之前。

```
<a onclick="post_to_url();" href="javascript:;" > 
```

不要问我为什么，但它对我有用。

# jquery - 使用 jquery 1.9 引导日期选择器

> ID：15781458
> 
> 赞同：0
> 
> 时间：2013-04-03T07:35:38.203
> 
> 标签：jquery, twitter-bootstrap

我正在尝试这个[datepicker 插件](https://github.com/eternicode/bootstrap-datepicker)。我似乎无法让它工作。引导程序与 jquery 1.9+ 不兼容吗？

```
<div class="alert alert-error" id="alert">
    <strong>Oh snap!</strong>
</div>
<table class="table">
    <thead>
        <tr>
          <th>
              Start date
              <a href="#" class="btn small" id="date-start" data-date-format="yyyy-mm-dd" data-date="2012-02-20">Change</a>
          </th>
          <th>
              End date
              <a href="#" class="btn small" id="date-end" data-date-format="yyyy-mm-dd" data-date="2012-02-25">Change</a>
          </th>
        </tr>
    </thead>
    <tbody>
        <tr>
          <td id="date-start-display">2012-02-20</td>
          <td id="date-end-display">2012-02-25</td>
        </tr>
    </tbody>
</table> 
```

知道我缺少什么吗？[这是我的代码](http://jsfiddle.net/jbDUe/1/)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-03T07:40:42.183

你去了.. [http://jsfiddle.net/jbDUe/2/](http://jsfiddle.net/jbDUe/2/) 你忘了加载 datepicker-plugin.js。

我已将其添加为外部资源，一切正常。

使用此 GitHub CDN 将您的文件加载到 jsFiddle 外部资源中： [https ://raw.github.com/eternicode/bootstrap-datepicker/master/js/bootstrap-datepicker.js](https://raw.github.com/eternicode/bootstrap-datepicker/master/js/bootstrap-datepicker.js)

```
var startDate = new Date(2012,1,20);
var endDate = new Date(2012,1,25);

$('#date-start')
    .datepicker()
    .on('changeDate', function(ev){
        if (ev.date.valueOf() > endDate.valueOf()){
            $('#alert').show().find('strong').text('The start date must be before the end date.');
        } else {
            $('#alert').hide();
            startDate = new Date(ev.date);
            $('#date-start-display').text($('#date-start').data('date'));
        }
        $('#date-start').datepicker('hide');
    });
$('#date-end')
    .datepicker()
    .on('changeDate', function(ev){
        if (ev.date.valueOf() < startDate.valueOf()){
            $('#alert').show().find('strong').text('The end date must be after the start date.');
        } else {
            $('#alert').hide();
            endDate = new Date(ev.date);
            $('#date-end-display').text($('#date-end').data('date'));
        }
        $('#date-end').datepicker('hide');
    }); 
```

# javascript - 检测范围取消选择

> ID：15781460
> 
> 赞同：0
> 
> 时间：2013-04-03T07:35:40.940
> 
> 标签：javascript, jquery, dom

在一个包含大量数字的数据表的站点中，我添加了一个帮助函数来选择给定的表，以便用户可以将数据复制到剪贴板并将其粘贴到他最喜欢的电子表格软件中。请注意，我的函数不会将任何内容复制到剪贴板，它只是突出显示适当的 HTML 元素（即完整的`<table>`）。这部分工作正常。

我现在正在实现一个功能请求：表格内的图像不应该被复制。我的第一个想法是在我选择表格时将它们*隐藏起来，而且效果很好。*但我想在不再选择表格时向他们*展示*，这是我的问题：我不确定如何完成那部分。

我[用一个简化的例子组成了一个小提琴](http://jsfiddle.net/3wuzX/4/)。一个典型的表如下所示：

```
<div>
    <table class="data">
        <tr>
            <th>Table</th><td>#1</td><td><img src="/img/logo.png"></td>
        </tr>
    </table>
    <input type="button" class="select" value="Select">
</div> 
```

可以通过两种方式选择：

1.  下面的“选择”按钮
2.  双击表格本身

...完成它的代码是：

```
jQuery(function($){
    $("body").on("dblclick", "table.data", function(){
        selectTable($(this));
        return false;
    });
    $("body").on("click", ".select", function(){
        selectTable($(this).siblings("table.data:first"));
        return false;
    });
    $(document).on("click", noTableSelected);
});

function selectTable($table){
    $table.find("img").hide();
    selectNode($table[0]);
}
function noTableSelected(){
    $("table.data img").show();
} 
```

... where`selectNode()`负责创建文本范围并选择它。

我需要帮助`$(document).on("click", noTableSelected);`。除了过度杀伤之外，它还会在用户使用上下文菜单到达“复制到剪贴板”命令时触发。我也尝试过捕获`blur`表格上的事件，但是当我认为它会触发时，这样的事件并没有触发（我想在不处理表单控件时它是没用的）。

有什么想法可以`noTableSelected()`在适用时启动吗？或者，有没有更好的方法来避免将图像复制到剪贴板？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-03T09:49:44.213

一种可能的解决方案是检查[`event.target`](http://api.jquery.com/event.target/)文档单击处理程序中的属性。根据文档：

> 启动事件的 DOM 元素。

您可以检查表是否生成了这样的点击事件：

```
$(document).on("click", function(e){
    console.log("document was clicked");
    if ($(e.target).closest(".data").length == 0) {
        console.log("but the click wasn't triggered by .data");
    }
}); 
```

我想到的另一种解决方案是将图像放在表格之外并使用 jQuery 将它们定位在单元格上。如果图像和单元格的大小已知，则更容易。您还可以将图像放在背景中（不确定它们是否被复制）。

# android - 使用 ActionBarSherlock 4.1 版时找不到资源错误？

> ID：15781472
> 
> 赞同：0
> 
> 时间：2013-04-03T07:36:08.473
> 
> 标签：android, android-actionbar, actionbarsherlock

我已将 ABS 作为库项目添加到我的 android 应用程序中，并将库和我的项目的目标版本设置为**API 15**，但我仍然收到这些错误。谁能告诉我我做错了什么？

```
[2013-04-03 13:00:25 - com.hello.home.Login] C:\Documents and Settings\User\My Documents\My Workspace\library\res\layout\abs__search_dropdown_item_icons_2line.xml:21: error: Error: No resource found that matches the given name (at 'paddingLeft' with value '@dimen/abs__dropdownitem_text_padding_left').
[2013-04-03 13:00:25 - com.hello.home.Login] C:\Documents and Settings\User\My Documents\My Workspace\library\res\layout\abs__search_dropdown_item_icons_2line.xml:21: error: Error: No resource found that matches the given name (at 'layout_height' with value '?attr/searchResultListItemHeight').
[2013-04-03 13:00:25 - com.hello.home.Login] C:\Documents and Settings\User\My Documents\My Workspace\library\res\layout\abs__search_dropdown_item_icons_2line.xml:29: error: Error: No resource found that matches the given name (at 'layout_width' with value '@dimen/abs__dropdownitem_icon_width').
[2013-04-03 13:00:25 - com.hello.home.Login] C:\Documents and Settings\User\My Documents\My Workspace\library\res\layout\abs__search_dropdown_item_icons_2line.xml:38: error: Error: No resource found that matches the given name (at 'src' with value '?attr/searchViewEditQuery').
[2013-04-03 13:00:25 - com.hello.home.Login] C:\Documents and Settings\User\My Documents\My Workspace\library\res\layout\abs__search_dropdown_item_icons_2line.xml:38: error: Error: No resource found that matches the given name (at 'background' with value '?attr/searchViewEditQueryBackground').
[2013-04-03 13:00:25 - com.hello.home.Login] C:\Documents and Settings\User\My Documents\My Workspace\library\res\layout\abs__search_dropdown_item_icons_2line.xml:62: error: Error: No resource found that matches the given name (at 'textAppearance' with value '?attr/textAppearanceSearchResultSubtitle').
[2013-04-03 13:00:25 - com.hello.home.Login] C:\Documents and Settings\User\My Documents\My Workspace\library\res\layout\abs__search_dropdown_item_icons_2line.xml:78: error: Error: No resource found that matches the given name (at 'textAppearance' with value '?attr/textAppearanceSearchResultTitle').
[2013-04-03 13:00:25 - com.hello.home.Login] C:\Documents and Settings\User\My Documents\My Workspace\library\res\layout\abs__search_view.xml:41: error: Error: No resource found that matches the given name (at 'src' with value '?attr/searchViewSearchIcon').
[2013-04-03 13:00:25 - com.hello.home.Login] C:\Documents and Settings\User\My Documents\My Workspace\library\res\layout\abs__search_view.xml:41: error: Error: No resource found that matches the given name (at 'contentDescription' with value '@string/abs__searchview_description_search').
[2013-04-03 13:00:25 - com.hello.home.Login] C:\Documents and Settings\User\My Documents\My Workspace\library\res\layout\abs__search_view.xml:63: error: Error: No resource found that matches the given name (at 'layout_width' with value '@dimen/abs__dropdownitem_icon_width').
[2013-04-03 13:00:25 - com.hello.home.Login] C:\Documents and Settings\User\My Documents\My Workspace\library\res\layout\abs__search_view.xml:63: error: Error: No resource found that matches the given name (at 'layout_marginLeft' with value '@dimen/abs__dropdownitem_text_padding_left').
[2013-04-03 13:00:25 - com.hello.home.Login] C:\Documents and Settings\User\My Documents\My Workspace\library\res\layout\abs__search_view.xml:63: error: Error: No resource found that matches the given name (at 'src' with value '?attr/searchViewSearchIcon').
[2013-04-03 13:00:25 - com.hello.home.Login] C:\Documents and Settings\User\My Documents\My Workspace\library\res\layout\abs__search_view.xml:75: error: Error: No resource found that matches the given name (at 'background' with value '?attr/searchViewTextField').
[2013-04-03 13:00:25 - com.hello.home.Login] C:\Documents and Settings\User\My Documents\My Workspace\library\res\layout\abs__search_view.xml:84: error: Error: No resource found that matches the given name (at 'style' with value '?attr/searchAutoCompleteTextView').
[2013-04-03 13:00:25 - com.hello.home.Login] C:\Documents and Settings\User\My Documents\My Workspace\library\res\layout\abs__search_view.xml:84: error: Error: No resource found that matches the given name (at 'minWidth' with value '@dimen/abs__search_view_text_min_width').
[2013-04-03 13:00:25 - com.hello.home.Login] C:\Documents and Settings\User\My Documents\My Workspace\library\res\layout\abs__search_view.xml:84: error: Error: No resource found that matches the given name (at 'paddingLeft' with value '@dimen/abs__dropdownitem_text_padding_left').
[2013-04-03 13:00:25 - com.hello.home.Login] C:\Documents and Settings\User\My Documents\My Workspace\library\res\layout\abs__search_view.xml:84: error: Error: No resource found that matches the given name (at 'paddingRight' with value '@dimen/abs__dropdownitem_text_padding_right').
[2013-04-03 13:00:25 - com.hello.home.Login] C:\Documents and Settings\User\My Documents\My Workspace\library\res\layout\abs__search_view.xml:84: error: Error: No resource found that matches the given name (at 'contentDescription' with value '@string/abs__searchview_description_query').
[2013-04-03 13:00:25 - com.hello.home.Login] C:\Documents and Settings\User\My Documents\My Workspace\library\res\layout\abs__search_view.xml:106: error: Error: No resource found that matches the given name (at 'background' with value '?attr/selectableItemBackground').
[2013-04-03 13:00:25 - com.hello.home.Login] C:\Documents and Settings\User\My Documents\My Workspace\library\res\layout\abs__search_view.xml:106: error: Error: No resource found that matches the given name (at 'src' with value '?attr/searchViewCloseIcon').
[2013-04-03 13:00:25 - com.hello.home.Login] C:\Documents and Settings\User\My Documents\My Workspace\library\res\layout\abs__search_view.xml:106: error: Error: No resource found that matches the given name (at 'contentDescription' with value '@string/abs__searchview_description_clear').
[2013-04-03 13:00:25 - com.hello.home.Login] C:\Documents and Settings\User\My Documents\My Workspace\library\res\layout\abs__search_view.xml:121: error: Error: No resource found that matches the given name (at 'background' with value '?attr/searchViewTextFieldRight').
[2013-04-03 13:00:25 - com.hello.home.Login] C:\Documents and Settings\User\My Documents\My Workspace\library\res\layout\abs__search_view.xml:128: error: Error: No resource found that matches the given name (at 'background' with value '?attr/selectableItemBackground').
[2013-04-03 13:00:25 - com.hello.home.Login] C:\Documents and Settings\User\My Documents\My Workspace\library\res\layout\abs__search_view.xml:128: error: Error: No resource found that matches the given name (at 'src' with value '?attr/searchViewGoIcon').
[2013-04-03 13:00:25 - com.hello.home.Login] C:\Documents and Settings\User\My Documents\My Workspace\library\res\layout\abs__search_view.xml:128: error: Error: No resource found that matches the given name (at 'contentDescription' with value '@string/abs__searchview_description_submit').
[2013-04-03 13:00:25 - com.hello.home.Login] C:\Documents and Settings\User\My Documents\My Workspace\library\res\layout\abs__search_view.xml:142: error: Error: No resource found that matches the given name (at 'src' with value '?attr/searchViewVoiceIcon').
[2013-04-03 13:00:25 - com.hello.home.Login] C:\Documents and Settings\User\My Documents\My Workspace\library\res\layout\abs__search_view.xml:142: error: Error: No resource found that matches the given name (at 'background' with value '?attr/selectableItemBackground').
[2013-04-03 13:00:25 - com.hello.home.Login] C:\Documents and Settings\User\My Documents\My Workspace\library\res\layout\abs__search_view.xml:142: error: Error: No resource found that matches the given name (at 'contentDescription' with value '@string/abs__searchview_description_voice'). 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-03T07:47:03.303

我想这就是你所做的：[ActionBarSherlock 4.0 不起作用。但是 3.5.1 做](https://stackoverflow.com/questions/9442781/actionbarsherlock-4-0-doesnt-work-but-3-5-1-do)

我唯一记得做的就是将我的应用程序的项目构建目标设置为 API 级别 17（15 也可能很好）。

我的清单是：

```
<uses-sdk
        android:minSdkVersion="8"
        android:targetSdkVersion="16" /> 
```

# performance - 高效执行详细表格中使用的复杂计算

> ID：15781473
> 
> 赞同：1
> 
> 时间：2013-04-03T07:36:09.700
> 
> 标签：performance, ms-access-2007, calculated-columns

我有一个产品列表，双击一个产品会将您带到一个详细表单，其中包含一个结果“总和”，这是对几个子表单中的列求和以及在 3 个单独的价格表中查找价格的结果。简而言之，这是由四个部件列表和十几个参数构建的产品所产生的利润。但是，您不必双击产品来查看利润，您甚至应该能够在产品列表视图中按利润排序。

因此，当任何表格中的价格发生变化或导入新的产品定义时，产品价目表应反映所有产品的新价格。

我可以通过“喋喋不休”所有产品来更新所有产品的利润，计算价目表中的利润列，或者使用**a）**代码，**b）**复杂查询，或者**c）**打开并保存具有计算的表单，对于每个产品。

**问题**：哪一个最有效？

（很可能，在代码中为产品列表的利润列进行实时计算会更有效 - 但如果它是为每个过滤行计算的“实时”，我可以使用什么回调或类似的方法对其进行排序？）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-03T08:41:34.507

这听起来像是 VBA 函数可能适用的情况之一。您在 Access 中创建一个新模块，然后定义形式的函数

```
Public Function CalculateProfit(ProductID As Long) As Currency
Dim Profit As Currency
'' do your lookups, calculations, etc.
CalculateProfit = Profit  '' return value
End Function 
```

现在您可以在查询、报告等中使用此功能，就像它是内置的 VBA 功能一样，例如，

```
SELECT [ProductID], CalculateProfit([ProductID]) AS Profit 
FROM [Products] ORDER BY 2 DESC; 
```

# powershell - 从Powershell中的复杂字符串中提取特定字符串

> ID：15781474
> 
> 赞同：-1
> 
> 时间：2013-04-03T07:36:18.007
> 
> 标签：powershell, extract, substring

我有一个类似下面的字符串，我从文件中读取。

```
...

{File}
Filecopied;Source;Destination;Archived;
feed_ma_expected_close_date.sql;C:\Users\subiswal\Desktop\Minor_DataEntry\Source\feed\;C:\Users\subiswal\Desktop\Minor_DataEntry\Destination1\feed\;C:\Users\subiswal\Desktop\Minor_Data    Entry\Destination1\Backup\2013-04-03-12-12-58_Backup\feed\;
{\File}

{File}
Filecopied;Source;Destination;Archived;
feed_ma_expected_close_date.csv;C:\Users\subiswal\Desktop\Minor_DataEntry\Source\feed\;C:\Users\subiswal\Desktop\Minor_DataEntry\Destination1\feed\;C:\Users\subiswal\Desktop\Minor_DataEntry\Destination1\Backup\2013-04-03-12-12-58_Backup\feed\;
{\File}

... 
```

我需要找到我需要存储在字符串数组中的所有字符串之间`{File}`的所有文本。`{\File}`

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-04T06:41:17.390

所以你需要做的是：

1.  阅读文件。抬头看`Get-Content`。
2.  遍历文件内容并查找所需的数据。最简单的方法是使用 for 循环。多行正则表达式也可以工作。
3.  匹配时，提取数据。
4.  保存数据。向上看`Set-Content`和`Add-Content`。

# grails - 无法从命令提示符运行 Grails - 出现错误

> ID：15781475
> 
> 赞同：0
> 
> 时间：2013-04-03T07:36:18.393
> 
> 标签：grails, grails-2.0

```
Error opening zip file or JAR manifest missing : `D:/ESSENTIAL`

Error occurred during initialization of VM

agent library failed to init: instrument 
```

**系统变量**

```
JAVA_HOME =C:\Program Files (x86)\Java\jdk1.7.0
GRAILS_HOME=D:\ESSENTIAL SOFTWERE\grails-2.2.0\grails-2.2.0

path=C:\Program Files (x86)\Intel\iCLS Client\;C:\Program Files\Intel\iCLS Client\;%SystemRoot%\system32;%SystemRoot%;%SystemRoot%\System32\Wbem;%SYSTEMROOT%\System32\WindowsPowerShell\v1.0\;C:\Program Files\Intel\Intel(R) Management Engine Components\DAL;C:\Program Files\Intel\Intel(R) Management Engine Components\IPT;C:\Program Files (x86)\Intel\Intel(R) Management Engine Components\DAL;C:\Program Files (x86)\Intel\Intel(R) Management Engine Components\IPT;C:\Program Files (x86)\Intel\OpenCL SDK\2.0\bin\x86;C:\Program Files (x86)\Intel\OpenCL SDK\2.0\bin\x64;C:\Program Files (x86)\Java\jdk1.7.0\bin;D:\ESSENTIAL SOFTWERE\grails-2.2.0\grails-2.2.0\bin 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-03T10:26:32.793

最好将 JDK 安装到没有空格的路径中。尝试重新安装到例如`JAVA_HOME=C:\Java\jdk1.7.0`.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-10-29T07:13:47.103

> GRAILS_HOME=D:\ESSENTIAL SOFTWERE\grails-2.2.0\grails-2.2.0........我已经找到了这个问题的解决方案并且......并且文件夹名称中的空格在ESSENTIAL SOFTWERE中的意思是对我来说，大小写错误...我已将文件夹重命名为 essentialsoftwere，没有任何空间，并且我能够从 comman promt 运行 grails

# string - 连接 .htaccess 中的字符串

> ID：15781480
> 
> 赞同：0
> 
> 时间：2013-04-03T07:36:34.570
> 
> 标签：string, .htaccess, concatenation

看起来很简单，事实证明很难找到......在我的`.htaccess`文件中，我想创建以下 rewriteRule：

```
RewriteRule (.*)$  %{HTTP_HOST} + /home.html 
```

有人可以告诉我如何连接`.htaccess`变量（HTTP_HOST）和字符串（`/home.html`）

不，我不能`/home.html`直接重定向到，因为这个 .htaccess 文件服务于 2 个不同的域，每个域都位于我网站空间的子目录中。显然，该`.htaccess`文件在放入子目录时不起作用。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-03T07:50:14.307

不需要特殊的“连接运算符”或其他东西 - 您只需将变量引用放入替换中，它将自动在那里解析。

不过你应该记住的是，`%{HTTP_HOST}`它只包含主机名，不包含协议——因此可能需要在它前面加上一个协议，这样它就不会被视为目录。

```
RewriteRule .* http://%{HTTP_HOST}/home.html [R] 
```

应该管用。（我为显式重定向添加了 [R] 标志 [我猜你想要？]，否则如果主机与当前主机匹配，它可能只是一个内部重定向。）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-03T08:07:15.280

你的意思是你想重定向而不是将特定域重写到`/home.html`？只需简单地使用重写条件：

```
Options +FollowSymlinks
RewriteEngine on

RewriteCond %{HTTP_HOST} domain1\.com$
RewriteRule ^/?$ /home.html [R] 
```

请简要解释您的问题，以便我可以将代码编辑到正确的位置。

# php - 从外部服务器使用 Javascript 连接到 PHP MySQL

> ID：15781481
> 
> 赞同：1
> 
> 时间：2013-04-03T07:36:38.130
> 
> 标签：php, javascript, html

好的，问题就在这里。我有以下 PHP 代码。

```
 <?php
$con=mysqli_connect("example.com","peter","abc123","my_db");
// Check connection
if (mysqli_connect_errno())
  {
  echo "Failed to connect to MySQL: " . mysqli_connect_error();
  }

$result = mysqli_query($con,"SELECT * FROM Persons");

echo "<table border='1'>
<tr>
<th>Firstname</th>
<th>Lastname</th>
</tr>";

while($row = mysqli_fetch_array($result))
  {
  echo "<tr>";
  echo "<td>" . $row['FirstName'] . "</td>";
  echo "<td>" . $row['LastName'] . "</td>";
  echo "</tr>";
  }
echo "</table>";

mysqli_close($con);
?> 
```

我从[W3Schools](http://www.w3schools.com/php/php_mysql_select.asp)上下来，在数据库所在的服务器上工作正常。但是，我想做的是使用以下 Javascript 在另一个站点上显示它。

```
 function displaydata()
{
var xmlhttp;
if (window.XMLHttpRequest)
  {// code for IE7+, Firefox, Chrome, Opera, Safari
  xmlhttp=new XMLHttpRequest();
  }
else
  {// code for IE6, IE5
  xmlhttp=new ActiveXObject("Microsoft.XMLHTTP");
  }
xmlhttp.onreadystatechange=function()
  {
  if (xmlhttp.readyState==4 && xmlhttp.status==200)
    {
    document.getElementById("datalist").innerHTML=xmlhttp.responseText;
    }
  }
xmlhttp.open("GET","phpscripthere.com/myphp.php",true);
xmlhttp.send();
} 
```

上面的 javascript 有效，但仅当它位于数据库所在的服务器上时。我需要的是让 Javascript 在另一个位置工作，而 PHP 仍然可以存储在主服务器上。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-03T07:47:17.130

请不要将此标记为答案，因为它不是。

但这是相当的建议。

这是 w3Schools 病毒传播....

```
$con=mysqli_connect("example.com","peter","abc123","my_db");
// Check connection
if (mysqli_connect_errno())
{
   echo "Failed to connect to MySQL: " . mysqli_connect_error();
} 
```

在此脚本中，即使**连接失败，****处理也会继续**。

 **您应该像这样合并更多的故障检查并退出它们：

```
if (mysqli_connect_errno())
{
   echo "Failed to connect to MySQL: " . mysqli_connect_error();
   exit(0);
} 
```

你也不知道有没有

```
$result = mysqli_query($con,"SELECT * FROM Persons"); 
```

查询成功。

除了这些陷阱

您应该更好地为页面收集数据并将其编码为 JSON 并发送到客户端。如下所示：

```
$r = array();
while(true){
    $row = mysqli_fetch_array($result);
    if(!$row)break;
    $r[] = json_encode((object)$row);
}
echo json_encode($r);

forming [  {"firstName":"John", "lastName": "Smith"}, 
           {"firstName":"Abraham", "lastName":"Lincoln"}, ...etc ]

then upon receiving decode the data in js and inject to your page. 
```

当然，使用 ajax 跨域请求（不太安全）或让您的服务器与其他服务器通信（更安全）来解决您的问题。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-04-03T07:42:19.893

您需要进行跨域请求[https://stackoverflow.com/search?q=javascript+cross+domain](https://stackoverflow.com/search?q=javascript%20cross%20domain)（其中一些是[AJAX 跨域调用](https://stackoverflow.com/questions/2558977/ajax-cross-domain-call)）

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-04-03T07:45:46.370

尝试使用具有跨域 true 的 $.ajax 发出请求，如下所示：

```
$.ajax({
type: "GET",
crossDomain:true,
url: "phpscripthere.com/myphp.php"
}); 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-04-03T07:48:38.637

如果你从 W3Schools 学习这些东西，听起来可能有点复杂，但不要气馁 :)

无论如何，就像@LoneWOLFs 在评论中所说的那样，您可能还可以在您的 JavaScript 来自的同一服务器上设置另一个 PHP 页面，并在另一个远程服务器上调用该页面。

基本上，您的新 PHP 脚本将执行与旧脚本类似的操作 - 从某个远程位置调用一些数据。然后它将这些数据传回调用它的浏览器。**

# xcode4.6 - 删除 UITableView 中的边框线

> ID：15781489
> 
> 赞同：-1
> 
> 时间：2013-04-03T07:36:52.170
> 
> 标签：xcode4.6

我想删除表格视图的外边框

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-03T07:39:25.177

tableview 基本上没有边框。问题可能是您添加了未覆盖整个视图区域的 imageView/TableView

# java - 使用 mongotemplate 滚动更新 mongodb 中的现有记录

> ID：15781490
> 
> 赞同：0
> 
> 时间：2013-04-03T07:36:53.867
> 
> 标签：java, spring, mongodb

对我来说，我想使用 spring mongotemplate 更新 mongodb 中的现有记录。为此，我必须从 mongodb 中搜索现有记录。在 mongodb 中保存记录时，它会自动创建`"_id"`在每条记录中调用的字段。我尝试了很多来访问这个领域。但我做不到.. :(

所以我手动创建了一个`myid`在我的 DTO 对象中调用的字段。每次保存时，我都会序列化文件中的 id 并保存。使用此搜索`myid`。我知道硬代码文件路径会在服务器中部署时产生问题。

有什么办法可以做到这一点，或者有什么办法可以访问`_id`为搜索和更新而生成的系统.. ??

谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-08T01:22:43.390

`_id`是主键。如果您没有在对象中指定带有注释的字段，`@id`那么`Mongo`将为您创建一个。您无法访问它，因为`Mongo`无法填充该字段，因为它不存在或缺少映射。

您的代码中必须包含类似的内容[如果您也可以发布代码，那就太好了。]

```
import org.springframework.data.annotation.Id;

@Id
protected String id; 
```

高温高压

# http-post - Java，如何从 HTTP POST 方法获取连接响应代码？

> ID：15781491
> 
> 赞同：1
> 
> 时间：2013-04-03T07:36:53.947
> 
> 标签：http-post, http-get

当我使用以下代码时，我可以获得数据：

```
 private static String getHttpPostContent(String address, String token) {    
        try {
            HttpClient client = new DefaultHttpClient();
            HttpPost post = new HttpPost(address);

            List<NameValuePair> pairs = new ArrayList<NameValuePair>();
            pairs.add(new BasicNameValuePair("token", token));
            post.setEntity(new UrlEncodedFormEntity(pairs));

            HttpResponse httpResponse = client.execute(post);
            HttpEntity entity = httpResponse.getEntity();
            String serverResponse = EntityUtils.toString(entity);

            return serverResponse;

        } catch (UnsupportedEncodingException e) {
            e.printStackTrace();
        } catch (ClientProtocolException e) {
            e.printStackTrace();
        } catch (IOException e) {
            e.printStackTrace();
        }

        return null;
    } 
```

根据我的文档，如果发生错误，则服务器发送错误 418 告诉我发生了错误。我不知道如何抓住它？

当我使用 HTTP GET 方法时，有一种方法可以检查响应代码，如下所示：

```
int responseCode = conn.getResponseCode();
if (responseCode == HttpURLConnection.HTTP_OK) 
... 
```

HTTP POST 方法中是否有类似的方法？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-03T09:37:01.387

你试过观察`httpResponse.getStatusLine().getStatusCode()`吗？

# tfs - 谁能分享我对 TFS 服务器的访问权限？

> ID：15781495
> 
> 赞同：-1
> 
> 时间：2013-04-03T07:37:18.597
> 
> 标签：tfs, share

我只想测试我的团队资源管理器，但由于一些不好的限制，我无法安装自己的 TFS 服务器。
具有一些工作项的示例项目的只读权限就可以了，
我不会经常访问它。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-03T07:40:51.260

你为什么不使用免费的`Team Foundation Service`？可以在[这里](https://tfs.visualstudio.com/)找到。

您将免费获得自己的 TFS 集合。最多有 5 个用户

# google-maps-api-3 - 黑莓 10 移动应用程序错误（谷歌地图 API）

> ID：15781500
> 
> 赞同：1
> 
> 时间：2013-04-03T07:37:45.983
> 
> 标签：google-maps-api-3, blackberry-webworks, blackberry-10

我正在尝试使用 google map api

```
 script type="text/javascript" src="http://maps.google.com/maps/api/js?sensor=false" 
```

但是当我在我的黑莓 10 中运行我的应用程序时，我收到了这个错误：

```
 Access to "http://maps.google.com/maps/api/js?sensor=false" not allowed 
```

解决方案：http: [//supportforums.blackberry.com/t5/Web-and-WebWorks-Development/Blackberry-10-Error-Google-Maps-API/mp/2284235/highlight/false](http://supportforums.blackberry.com/t5/Web-and-WebWorks-Development/Blackberry-10-Error-Google-Maps-API/m-p/2284235/highlight/false)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-05T13:32:50.250

这实际上是因为该域未在 config.xml 中列入白名单。您需要为计划向其发送请求的任何域添加以下内容。

例如...

```
<access uri="*" subdomains="true" />
<access uri="http://google.com" subdomains="true" /> 
```

如果您查看我创建的示例应用程序，它也应该有助于为您指明正确的方向。 [https://github.com/blackberry/BB10-WebWorks-Samples/tree/master/Maps](https://github.com/blackberry/BB10-WebWorks-Samples/tree/master/Maps)

# ios - 将 NSNumber 修剪到小数点后 8 位

> ID：15781514
> 
> 赞同：1
> 
> 时间：2013-04-03T07:38:28.470
> 
> 标签：ios, nsnumberformatter

我有一个 ios 应用程序，可以显示您当前位置的纬度。我想将纬度的位数限制为小数点后 8 位。我使用了 NSNumberFormatter 但代码不起作用，我不知道为什么这里是代码

```
NSNumber* lat = [[NSNumber alloc]   initWithDouble:self.currentLocation.coordinate.latitude];
NSNumberFormatter *formatter = [[NSNumberFormatter alloc] init];
[formatter setNumberStyle:NSNumberFormatterDecimalStyle];
[formatter setMaximumFractionDigits:8];
[formatter setRoundingMode: NSNumberFormatterRoundUp];
NSString *latit = [lat stringValue];
NSNumber *lati= [formatter numberFromString:(latit)];
NSLog(@"lat %@", lat);
NSLog(@"lati %@", lati); 
```

我尝试了很多东西，你可以看到转换为字符串等。我的控制台显示两个纬度是相同的。

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2013-04-03T07:43:25.477

试试这个，

```
NSNumber* lat = [[NSNumber alloc]  initWithDouble:self.currentLocation.coordinate.latitude];
NSNumberFormatter *formatter = [[NSNumberFormatter alloc] init];

[formatter setMaximumFractionDigits:8];

[formatter setMinimumFractionDigits:0];
NSString *result = [formatter stringFromNumber:lat];
NSLog(@"lat %@", result); 
```

# c# - 读取二进制文件时避免 LOH

> ID：15781521
> 
> 赞同：0
> 
> 时间：2013-04-03T07:38:59.610
> 
> 标签：c#, memory-management, io, large-object-heap

[这个问题是Efficient way to transfer many binary files into SQL Server database](https://stackoverflow.com/questions/15712371/efficient-way-to-transfer-many-binary-files-into-sql-server-database)的后续问题

我最初问为什么 using`File.ReadAllBytes`会导致快速的内存使用，并得出结论使用该方法将数据放在大型对象堆上，在运行时不容易回收。

我现在的问题是如何避免这种情况？

```
using (var fs = new FileStream(path, FileMode.Open))
{
    using (var ms = new MemoryStream())
    {
        byte[] buffer = new byte[2048];
        int bytesRead;
        while ((bytesRead = fs.Read(buffer, 0, buffer.Length)) > 0)
        {
            ms.Write(buffer, 0, bytesRead);
        }
        return new CustomFile { FileValue = ms.ToArray() };
   }
} 
```

以下代码旨在通过分块读取文件而不是一次读取文件来解决该问题，但它似乎有同样的问题。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-03T07:45:26.677

内存流保存整个数据的内部数组（最终返回）。只要您继续连接到内存流，您读取 2048 字节的块并不重要。如果您需要将数据作为包含整个文件的数组返回，那么您最终会经常在大对象堆中创建该数组。

如果目标（BLOB 字段或类似字段）不允许您以除单字节数组之外的任何其他方式传入数据，那么您将无法绕过分配包含所有数据的字节数组。

将数据传输到目的地的最佳方式当然是目的地也支持流语义。

```
int Transfer(Stream source, Stream target)
{
   byte buffer = new byte[BufSize];
   int totalBytesTransferred = 0;
   while ((bytesRead = source.Read(buffer, 0, BufSize)) > 0)
   {
      target.Write(buffer, 0, bytesRead);
      totalBytesTransferred += bytesRead;       
   }
   return totalBytesTransferred;
} 
```

这是否可能取决于目标（例如数据库 BLOB）是否支持向目标打开流。

# javascript - Jquery：如果列表元素离开屏幕，则隐藏它们

> ID：15781524
> 
> 赞同：0
> 
> 时间：2013-04-03T07:39:05.783
> 
> 标签：javascript, jquery, html, list

我有一个图标列表，它将作为页面左侧的导航。导航设置为页面高度的 100%。

如果将来我希望向列表中添加更多图标并且它们最终离开页面，我希望隐藏重叠的图标并使用按钮来隐藏当前可见的 x 个图标并显示第二个 x 个图标。

基本上我现在的问题是：*如果项目列表溢出屏幕，我怎样才能找到不适合的元素并隐藏它们？*

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-03T07:46:43.290

你可以通过css来实现。它不会隐藏元素但不会显示在屏幕上，它比找到所有元素并隐藏它们要快：

```
.leftNav{
   height:80px;  
   overflow-y: hidden;
   border-style:solid;
   border-width:1px;
} 
```

html:

```
<div class='leftNav'>
   <div>nav 1</div>
   <div>nav 2</div>
   <div>nav 3</div>
    .
    .
    .
</div> 
```

[工作演示](http://jsfiddle.net/YzhdY/1/)

CSS：

```
 overflow-y: auto; 
```

可用于显示滚动条的[Demo](http://jsfiddle.net/YzhdY/3/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-03T07:39:57.640

您可以获取一个元素[`offset()`](http://api.jquery.com/offset/)并将其与窗口的宽度进行比较。

例如，如果您有一个垂直的图标列表并且想知道它们是否可见：

```
$('nav a').each(function(index)() {
    if ($(this).offset().top > $(window).height()) {
        $(this).hide();
    }
}); 
```

# asp.net-mvc - ASP.NET MVC：与非移动视图一起使用的移动布局

> ID：15781526
> 
> 赞同：4
> 
> 时间：2013-04-03T07:39:07.177
> 
> 标签：asp.net-mvc, mobile

我一直在使用这篇文章开发我网站主页的移动版本：[http](http://www.hanselman.com/blog/MakingASwitchableDesktopAndMobileSiteWithASPNETMVC4AndJQueryMobile.aspx) ://www.hanselman.com/blog/MakingASwitchableDesktopAndMobileSiteWithASPNETMVC4AndJQueryMobile.aspx作为指南。

我有两个控制器： HomeController 和 EventController

HomeController 有一个 Index 视图，EventController 有一个 Detail 视图

我设法创建了一个正确使用 _Layout.mobile.cshtml 的 Index.mobile.cshtml 视图。现在，当用户在她的手机上访问 mysite.com/Home/Index 时，它会正确显示移动版本。

现在，我预计如果同一用户访问 mysite.com/Event/Detail/123，将显示默认的“桌面”视图（我**没有**Detail.mobile.cshtml 视图）。

问题是确实调用了 Detail.cshtml 视图，但它尝试使用 _Layout.mobile.cshtml 布局，使页面看起来很糟糕。

有没有办法实现这一点（只是为那些我没有在移动设备上实现**的桌面布局渲染桌面视图）？**

谢谢！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2014-04-22T12:51:00.460

将以下行添加到 _ViewStart.cshtml 文件的末尾：

```
DisplayModeProvider.Instance.RequireConsistentDisplayMode = true; 
```

这将阻止应用程序在您的移动布局中显示非移动视图，反之亦然。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-11-08T14:32:42.430

请注意，您似乎可以通过将这行代码放在控制器操作中来基于每个视图解决此问题。

`HttpContext.SetOverriddenBrowser(BrowserOverride.Desktop);`

但是，我真正想要的是一个解决方案，它基本上说如果当前视图的名称/路径中没有 .Mobile，请不要将布局切换到 .Mobile 版本

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-11-10T08:48:02.083

我以前没有使用过这个[NUGET 包](http://www.nuget.org/packages/MobileViewEngines)，但**请注意它提到：**

> 默认情况下，它允许您在桌面和移动设备之间来回切换，但仅限于移动设备。为什么？查看第一行代码：代码首先检查移动设备，如下所示：

```
@if (Request.Browser.IsMobileDevice && Request.HttpMethod == "GET")
{
    <div class="view-switcher ui-bar-a">
        @if (ViewContext.HttpContext.GetOverriddenBrowser().IsMobileDevice)
        {
            @: Displaying mobile view
            @Html.ActionLink("Desktop view", "SwitchView", "ViewSwitcher", new { mobile = false, returnUrl = Request.Url.PathAndQuery }, new { rel = "external" })
        } 
        else 
        {
            @: Displaying desktop view
            @Html.ActionLink("Mobile view", "SwitchView", "ViewSwitcher", new { mobile = true, returnUrl = Request.Url.PathAndQuery }, new { rel = "external" })
        }
    </div>
} 
```

**根据 MSDN ：**

> 一般来说，我们建议您避免在视图中包含逻辑。它可能很难发现，甚至更难测试。相反，视图中的逻辑应该移动到视图模型或控制器操作中。

*问题解决：*根据您的需要更改默认逻辑，也许通过跟踪视图（断点也适用于视图）来满足您的目的。

您需要结合 MVC 和命名包来了解[这个 MSDN 主题。](http://msdn.microsoft.com/en-us/library/jj149688.aspx)了解 Action 中发生的事情可以解决您的问题。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-11-14T18:42:35.313

最简单的解决方案是使用 _Layout.cshtml 显式覆盖 Detail.cshtml 上的布局：

```
@{
    Layout = "~/Views/Shared/_Layout.cshtml";
} 
```

如果您想要更通用的解决方案，您可以尝试以下方法：

创建自定义显示模式：

```
public class MobileDisplayMode : IDisplayMode
{
    private bool _mobileViewWasUsed = false;

    public override DisplayInfo GetDisplayInfo(HttpContextBase httpContext, string virtualPath, Func<string, bool> virtualPathExists)
    {
        string filePath = this.TransformPath(virtualPath, this._suffix);
        if (filePath != null && virtualPathExists(filePath))
        {
            if (!_mobileViewWasUsed)
            {
                if (virtualPath.IndexOf("layout", StringComparison.InvariantCultureIgnoreCase) != -1)
                    return (DisplayInfo) null;

                _mobileViewWasUsed = true;
            }
            return new DisplayInfo(filePath, (IDisplayMode) this);
        }
        else
            return (DisplayInfo) null;
    }
} 
```

在 global.asax 中添加它：

```
DisplayModeProvider.Instance.Modes.Insert(0, new MobileDisplayMode("mobile")); 
```

不幸的是，当它基于一些未经批准的假设（如根据请求创建 DisplayMode 等）时，没有机会对其进行测试。无论如何，如果您有兴趣并有机会对其进行测试，那就太好了。

# javascript - 来自其他包的包中的 Javascript 和类

> ID：15781528
> 
> 赞同：0
> 
> 时间：2013-04-03T07:39:17.623
> 
> 标签：javascript, apache-servicemix, jsr223

我试着描述我的问题。以下配置：

1.  在 Servicemix 上，我有两个捆绑包：一个带有模型，第二个带有服务。模型包导出模型包，服务包从模型包中导入模型包。
2.  在服务包中，我有具有一种服务方法的 Web 服务 (CXF)：执行。此方法使用两个参数：第一个（String）是 javascript 文件的名称，第二个是参数的映射（HashMap）。该服务使用 javax.scipt.CompiledScript.eval(Bindings bindings) 执行 javascript 脚本。这个想法是在脚本语言中拥有业务逻辑。
3.  javascript 脚本可以通过以下方式访问 Java 对象：

a/ 绑定 - 没有问题。我在脚本中看到我使用 bindings.put(name, object) 添加的所有对象的实例

b/ importPackage(Packages.my.java.package.from.model.bundle) - 现在我遇到了问题：当我尝试使用关键字“new”从模型包中创建 javascript Java 对象时，我收到以下错误：

com.google.code.scriptengines.js.util.ExtendedScriptException 类：org.mozilla.javascript.EcmaError：ReferenceError：“产品”未定义。(#4) 在文件中的 [4]

其中 Product 是模型包中的我的 Java 类，在第 4 行中，我尝试使用以下命令创建此对象：

```
var product = new Product(); 
```

而且，我认为，非常重要的信息：Servicemix 4.2.0 中的一切都很好。现在我必须升级到 4.3.1 并且不起作用（两个版本都来自 Fusesource）

有什么帮助吗？

问候， 雅克

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-05-12T07:11:34.843

似乎脚本引擎包对您的产品包没有包可见性。

您可以尝试使用脚本引擎在捆绑包上启用动态导入

```
list | grep -i javascript 
```

然后找到带有引擎的捆绑包的捆绑包ID，例如

然后使用

```
dev:dynamic-import  ID of that bundle 
```

如果更改未被采纳，您可能需要重新启动 ESB。

# perl - 如何使用perl在大写字母前插入下划线

> ID：15781529
> 
> 赞同：-2
> 
> 时间：2013-04-03T07:39:23.923
> 
> 标签：perl

嗨，我有一个字符串 $string = "insertUnderScore"; 现在我需要在大写字母之前插入 _。输出应该是这样的：

```
$string = "insert_Unser_Score"; 
```

任何人都可以帮助我吗？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-04-03T07:44:53.683

```
my $string = "insertUnderScore";
$string =~ s/([A-Z])/_$1/g;
print $string; 
```

或者

```
$string =~ s/(?=[A-Z])/_/g; 
```

# php - 如何自定义 Joomla 2.5 联系人组件？

> ID：15781530
> 
> 赞同：0
> 
> 时间：2013-04-03T07:39:24.143
> 
> 标签：php, components, joomla2.5

我正在尝试为 Joomla 2.5 中的联系人组件设置替代布局，但页面加载时似乎没有使用我的模板。这是我使用[此处找到的文档进行设置的方法](http://docs.joomla.org/How_to_override_the_output_from_the_Joomla!_core)

```
/templates/MyTemplate/html/com_contact/contact/alternativelayout.php 
```

然后在“显示选项”下我的联系人组件的管理员视图中，我选择了替代布局作为我的“替代布局”并对文件进行了修改（甚至删除了其中的所有代码）但似乎总是加载默认布局. 请帮忙。谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-04T19:24:15.443

请务必包含在您的

```
templates/YourTemplate/ 
```

一份文件

```
templateDetails.xml 
```

描述您的模板并包含您的文件夹和文件（来自 beez5 默认模板的示例）

```
<files>
    <folder>css</folder>
    <folder>html</folder>
    <folder>images</folder>
    <folder>javascript</folder>
    <folder>fonts</folder>
    <folder>language</folder>
    <filename>index.html</filename>
    <filename>index.php</filename>
    ...
    ...
</files> 
```

在其他模板根文件夹中检查此文件。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-11-22T21:35:31.770

我遇到过同样的问题。我设法解决了这个问题：

1.  将alternativelayout.php 文件名设置为原始名称：

    /templates/MyTemplate/html/com_contact/contact/default.php

2.  将“联系人”->“显示选项”->“替代布局”设置为“使用全局”

这个对我有用。

# c# - 在 MVC4 视图中显示图像

> ID：15781538
> 
> 赞同：2
> 
> 时间：2013-04-03T07:39:37.587
> 
> 标签：c#, asp.net-mvc-3, image, qr-code

参考此[链接，](http://www.jphellemons.nl/post/Generate-QR-Codes-with-AspNet-C.aspx)我使用 MessagingToolkit.QRCode.dll 创建了一个二维码图像。如何在与 myLayout 相同的视图中显示保存的图像。
**控制器代码**

```
 [HttpPost]
    public ActionResult GenerateExcelQR(string Command, FormCollection collection)
    {
    if (Command == "Excel")
    {
    //  logic to generate Excel
    }
    else if(Command =="QRCode")
     // qr code logic //
        QRCodeEncoder encoder = new QRCodeEncoder();
        Bitmap img = encoder.Encode(qrcode);
        string path = Server.MapPath("/Images/QRCode.jpg"); 
        img.Save(path, ImageFormat.Jpeg);
        return base.File(path,"image/jpeg"); // Displays the QR image without my layout.
     // return View(path,"image/jpeg");      // Returns an error specifying "Images\QRCode.jpg' or its master was not found or no view engine supports the searched locations."
    } 
```

如何在与布局相同的视图中显示 QRCode 图像。
有什么建议么。
**编辑** ImageModel.cs

```
public static class ImageModel
    {
        public static string Image(this HtmlHelper htmlHelper, string path, string alt)
        {
            var img = new TagBuilder("img");
            img.MergeAttribute("src", path);
            img.MergeAttribute("alt", alt);
            return img.ToString(TagRenderMode.SelfClosing);
        }
    } 
```

在视图中

```
@model IEnumerable<SampleECommerce.Models.CheckoutModel> // reference to 1st model to return values
@using SampleECommerce.Models; // for Imagemodel 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-03T10:09:21.343

您应该返回的不是文件，而是视图，并在视图中渲染您的图像。这里的 Image - 是一个 html 助手：

```
public static HtmlString Image(this HtmlHelper helper, string path, string alt)
{
    var img = new TagBuilder("img");
    img.MergeAttribute("src", path);
    img.MergeAttribute("alt", alt);
    return new HtmlString(img.ToString(TagRenderMode.SelfClosing));
} 
```

然后在视图中使用它：

```
@Html.Image(path_to_your_image, "Description") 
```

在你的控制器中使用`return View();`

要使用此帮助程序，您应该在项目中创建一个文件夹，例如“Helpers”。然后，在此文件夹中创建文件，例如'HtmlImageHelper.cs'，然后将帮助程序的内容放入此文件中。在此之后，在您的视图顶部写：`using YourProjectName.Helpers`。在此之后，您可以使用这个 html 助手来渲染图像

# ios - 如何将参数传递到 PhoneGap 应用程序中的本地页面？

> ID：15781540
> 
> 赞同：2
> 
> 时间：2013-04-03T07:39:42.237
> 
> 标签：ios, cordova, parameters

在 PhoneGap 应用程序中，我们可以使用以下代码设置起始页面。

```
self.viewController.wwwFolderName = @"www";
self.viewController.startPage = @"index.html"; 
```

但是如果我想将参数传递给该页面，它将不起作用。

```
self.viewController.startPage = @"index.html?parameter=abc"; 
```

它会导致`NSURLErrorRedirectToNonExistentLocation`错误。

有没有一种简单的方法可以将参数传递到本地页面？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-04-03T12:59:58.823

在 phonegap 应用程序中，您无法通过向本地页面传递参数来调用本地页面，因为系统会搜索与您传递的名称完全相同的文件。它不会将参数视为查询字符串。

```
Ex: when you say "index.html?param=abc", instead of calling page index.html with a
parameter called param having value abc. It calls the page "index.html?param=abc"
which doesn't exist in the system. Hence, the error. 
```

解决此问题的最佳方法是将参数保存为调用页面中的本地存储，在下一页中使用它们并销毁它们。

```
Ex: In your calling JavaScript file, use:
window.localStorage.setItem('param', 'abc');

Now, in your called file, access the local storage and delete it
param abc = window.localStorage.getItem('param');

window.localStorage.removeItem('param'); 
```

希望有帮助。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2014-08-07T15:37:03.723

编辑：对于 Cordova 和 Phonegap 应用程序，这个插件很有用[http://goo.gl/TWN8wq](http://goo.gl/TWN8wq)所以你不必自己手动修改 Android 清单或 iOS plist 文件。还有一个优势是能够`handleOpenURL()`在两个平台上使用相同的功能（你不能没有插件，`handleOpenURL()`这只是 iOS 的东西）

无论如何，手动：

为了实现你想要的，你必须：

`customurl`1 -在 xCode 中注册自定义方案（如 HelloWorld）和自定义 url（如）

2 - 在页面上放置一个链接，例如`<a href=”HelloWorld://customurl/username=James Bond”&gt;HelloWorld</a>`

3 -使用Phonegap < 3.0 或Phonegap 3+`username`的函数获取参数值，例如：`handleOpenURL``OpenURL`

```
function handleOpenURL(url) {

                    //Here we can parse the url .

                    var link = url.split(‘=’);

                    var username = link[1];

                    alert(username);

} 
```

[这里](http://mindfiremobile.wordpress.com/2013/10/03/handling-phonegap-ios-application-using-custom-url-scheme/)有一个关于如何做的完整教程（iOS），这是我从中获取所有内容的地方。

归功于 Sourabha Kumar Sahoo

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-11-04T21:01:34.640

如果我是你，我会通过你将创建的插件方法（即 plugin.GetQueryString() ）将所有信息传递给 javascript 你可以创建一个通用插件方法，它将所有查询参数作为字符串返回，然后您可以使用以下方法在javascript中处理它：

```
function getQueryParams(qs) {
    var params = {},
    tokens,
    re = /[?&]?([^=]+)=([^&]*)/g;

    while (tokens = re.exec(qs)) {
        params[decodeURIComponent(tokens[1])]
        = decodeURIComponent(tokens[2]);
    }

    return params;
}

window.$_GET = getQueryParams(plugin.GetQueryString()); 
```

结果，您将获得一个很好的数据结构，其中包含您可以通过名称访问的所有 GET 参数。

# ipad - iOS6.x 的 iPad 运行 iPhone 应用程序，屏幕尺寸错误

> ID：15781550
> 
> 赞同：1
> 
> 时间：2013-04-03T07:40:05.743
> 
> 标签：ipad, ios6, screen, resolution

我发现在 iPad 下使用 iOS6（真机，不是模拟器）运行 iPhone 应用时，检查 [UIScreen mainScreen].applicationFrame = {{0,0}, {300,480}} 时，仔细看，是 300 而不是 320当然高度应该是 460（480-status_bar_height=460）。我不知道这是怎么发生的。同时，[UIScreen mainScreen].bounds 值是正确的 {{0,0}, {320, 480}}。

但是在 iPad 模拟器 6.1 [UIScreen mainScreen].applicationFrame = {{0,20}, {320, 460}} 中运行时，在 iPhone 4 和 iOS6 上运行应用程序时也是如此。

这是一个错误吗？如何获得正确的屏幕分辨率？

我发现了另一个奇怪的事情。在横屏上运行纵向应用程序时，导航栏的高度应该是44.0，但实际上是32.0，iOS 6.1也出现这种情况。

# asp.net-mvc - 使用 ajax 更新局部视图并向其添加元素

> ID：15781551
> 
> 赞同：0
> 
> 时间：2013-04-03T07:40:09.807
> 
> 标签：asp.net-mvc, asp.net-mvc-3, razor, asp.net-mvc-4, razor-2

我正在使用 ASP.Net MVC 4（C#，Entity Framework Code First），并且需要有一个表格，用户在其中单击添加按钮，然后我将产品添加到列表（表格）中，我到处寻找最后在这里找到了以下示例：

[asp.net MVC 3中的简单Ajax，更新模型并重新渲染部分](https://stackoverflow.com/questions/9465475/simple-ajax-in-asp-net-mvc-3-update-the-model-and-rerender-part)

我让它工作得很好，但我似乎无法将当前列表（上面示例中的 IList 中的任何内容）发送回操作以向其中添加新行。我怎样才能做到这一点？

例如，我尝试使用约定`name="TheData[1].foo"`并接受`List<TheData>`作为操作的参数，但似乎没有任何效果。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-07T06:08:48.873

事实证明，我只需要`@Html.HiddenFor(...`为所有值包含 s，我不知道我是怎么错过的，但这就是问题所在。一旦添加它就全部发布回来就好了。

# c# - 了解 LINQ 中的执行

> ID：15781552
> 
> 赞同：3
> 
> 时间：2013-04-03T07:40:11.777
> 
> 标签：c#, linq

我有以下产品列表

```
List<Product> products = new List<Product> {
                new Product { 
                    ProductID = 1, 
                    ProductName = "first candy", 
                    UnitPrice = (decimal)10.0 },
                new Product { 
                    ProductID = 2, 
                    ProductName = "second candy", 
                    UnitPrice = (decimal)35.0 },
                new Product { 
                    ProductID = 3, 
                    ProductName = "first vegetable", 
                    UnitPrice = (decimal)6.0 },
                new Product { 
                    ProductID = 4, 
                    ProductName = "second vegetable", 
                    UnitPrice = (decimal)15.0 },
                new Product { 
                    ProductID = 5, 
                    ProductName = "third product", 
                    UnitPrice = (decimal)55.0 }
            };

var veges1 = products.Get(IsVege);   //Get is a Extension method and IsVege is a Predicate

//Predicate
 public static bool IsVege(Product p)
        {
            return p.ProductName.Contains("vegetable");
        }

//Extension Method
public static IEnumerable<T> Get<T>(this IEnumerable<T> source, Func<T, bool> predicate)
        {
            foreach (T item in source)
            {
                if (predicate(item))
                    yield return item;
            }
        } 
```

我知道在这些主题上已经很晚了，但仍然试图通过在 Visual Studio 中调试来理解

我在所有函数中都有断点（谓词，扩展方法）

我的问题是

1.当下面的行被执行时会发生什么

```
var veges1 = products.Get(IsVege);   // i dont see the breakpoint hitting either predicate or GET method) 
```

但是在调试时的结果视图中，我看到了 veges1 的输出。

如果我点击下面的代码

```
veges1.Count()   // Breakpoint in Predicate and GET is hit and i got the count value. 
```

这是如何运作的 ？能不能给点理解。

PS：我知道这有很多例子和问题。我试图用这个例子来理解，因为它会让我更容易得到东西。

# 更新的问题

我在上面做的同一个样本试图对 Lamda Expression 做同样的事情

```
var veges4 = products.Get(p => p.ProductName.Contains("vegetable")); 
```

我得到了预期的结果。

其中 GET 是我的扩展方法，但是当执行该行时，我从未调用过 GET 方法上的断点？

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-03T07:44:17.290

使用`yield return item;`时返回一个 Enumerator 所以你应该做这样的事情：

```
foreach (var item in products.Get(IsVege))
{...} 
```

或使用`.ToList()`将为您执行 foreach 循环并返回项目列表的扩展方法。但通过编写以下代码：

```
var item = products.Get(IsVege); 
```

您刚刚收到了用于遍历所需集合的适当枚举器。

有关如何调试`yield return`代码的良好参考，请参阅此：[What is the yield keyword used for in C#?](https://stackoverflow.com/questions/39476/what-is-the-yield-keyword-used-for-in-c)

```
public void Consumer()
{
    foreach(int i in Integers())
    {
        Console.WriteLine(i.ToString());
    }
}

public IEnumerable<int> Integers()
{
    yield return 1;
    yield return 2;
    yield return 4;
    yield return 8;
    yield return 16;
    yield return 16777216;
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-03T07:42:41.513

LINQ 和迭代器使用*延迟执行*。简而言之，`yield`等待直到需要该值，*然后*继续执行。

`veges1`包含*查询*，而不是结果。仅当您对需要*执行*查询的查询执行操作时才完成工作。例如，要给你`Count`of `veges1`，`Get`需要完全执行。再举一个例子，如果你执行`veges1.First`了，那么只有你的循环的第一次迭代`Get`需要被执行。

强制执行查询的常用方法是使用`ToList`：

```
// veges1 will now contain a List<Product> instead of an IEnumerable<Product>
var veges1 = products.Get(IsVege).ToList(); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-03T07:47:58.373

你打电话时

```
var veges1 = products.Get(IsVege); 
```

您只需向它分配一个匿名方法，它将在其第一次迭代时执行。IEnumerable - 是一个延迟执行的接口，这意味着它的内容将在您进行第一次迭代时被填充。它只是描述了你的行为，而不是实现它。您可以将代码更改为

```
var veges1 = products.Get(IsVege).ToList(); 
```

这将引导您执行您的方法，因为 ToList() 将导致您的迭代的实现。

在方法之外构建更大的数据集时，IEnumerable 非常有用，有时您可以避免对其进行迭代。

# mysql - MySQL：对日期时间求和而不计算重叠时段两次

> ID：15781555
> 
> 赞同：5
> 
> 时间：2013-04-03T07:40:22.260
> 
> 标签：mysql

我需要根据如下表格计算花费的总时间：

```
编号 | 开始时间 | 结束时间 |
```

期间可以重叠的地方。我只需要计算一次卵泡期。

例如，如果我有这样的时期：

```
*----A----* *--------C-----* *------------D----------*
                  * -  - -是 - -*
```

总和将是：`(A.end-A.start) + (C.end - B.start) + (D.end - D.start)`

我对编写此查询应使用的方法有点困惑，我将不胜感激。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-03T08:42:18.960

好的，我认真地坚持你在生产中使用它之前要以各种方式测试它。特别是测试如果在 1 个时间跨度内有 MULTIPLE 重叠会发生什么。

此查询所做的是计算每个时间跨度的持续时间，以及与具有更高 id 的其他时间跨度存在多少重叠。

```
select
    t1.id,
    t1.start_time,
    t1.end_time,
    t1.end_time - t1.start_time as duration,
    sum(
          if(t2.start_time <  t1.start_time and t2.end_time >  t1.end_time  , t1.end_time - t1.start_time, 0) -- t2 completely around t1
        + if(t2.start_time >= t1.start_time and t2.end_time <= t1.end_time  , t2.end_time - t2.start_time, 0) -- t2 completely within t1
        + if(t2.start_time <  t1.start_time and t2.end_time >  t1.start_time and t2.end_time   < t1.end_time  , t2.end_time - t1.start_time, 0) -- t2 starts before t1 starts and overlaps partially
        + if(t2.start_time <  t1.end_time   and t2.end_time >  t1.end_time   and t2.start_time > t1.start_time, t1.end_time - t2.start_time, 0) -- t2 starts before t1 ends and overlaps partially
    ) as overlap
from
    times t1
    left join times t2 on
        t2.id > t1.id --  t2.id is greater than t1.id
        and (
               (t2.start_time <  t1.start_time and t2.end_time >  t1.end_time  ) -- t2 completely around t1
            or (t2.start_time >= t1.start_time and t2.end_time <= t1.end_time  ) -- t2 completely within t1
            or (t2.start_time <  t1.start_time and t2.end_time >  t1.start_time) -- t2 starts before t1 starts and overlaps
            or (t2.start_time <  t1.end_time   and t2.end_time >  t1.end_time  ) -- t2 starts before t1 ends and overlaps
        )
group by
    t1.id 
```

所以你最终想要的是这样的：

```
select
    sum(t.duration) - sum(t.overlap) as filtered_duration
from
    (
        OTHER QUERY HERE
    ) as t 
```

所以最后你有这个查询：

```
select
    sum(t.duration) - sum(t.overlap) as filtered_duration
from
    (
        select
            t1.id,
            t1.start_time,
            t1.end_time,
            t1.end_time - t1.start_time as duration,
            sum(
                  if(t2.start_time <  t1.start_time and t2.end_time >  t1.end_time  , t1.end_time - t1.start_time, 0) -- t2 completely around t1
                + if(t2.start_time >= t1.start_time and t2.end_time <= t1.end_time  , t2.end_time - t2.start_time, 0) -- t2 completely within t1
                + if(t2.start_time <  t1.start_time and t2.end_time >  t1.start_time and t2.end_time   < t1.end_time  , t2.end_time - t1.start_time, 0) -- t2 starts before t1 starts and overlaps partially
                + if(t2.start_time <  t1.end_time   and t2.end_time >  t1.end_time   and t2.start_time > t1.start_time, t1.end_time - t2.start_time, 0) -- t2 starts before t1 ends and overlaps partially
            ) as overlap
        from
            times t1
            left join times t2 on
                t2.id > t1.id --  t2.id is greater than t1.id
                and (
                       (t2.start_time <  t1.start_time and t2.end_time >  t1.end_time  ) -- t2 completely around t1
                    or (t2.start_time >= t1.start_time and t2.end_time <= t1.end_time  ) -- t2 completely within t1
                    or (t2.start_time <  t1.start_time and t2.end_time >  t1.start_time) -- t2 starts before t1 starts and overlaps
                    or (t2.start_time <  t1.end_time   and t2.end_time >  t1.end_time  ) -- t2 starts before t1 ends and overlaps
                )
        group by
            t1.id
    ) as t 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-05-03T15:09:26.987

我想建议另一种方法来获得时间，同时确保结果是正确的。但我不知道，如何用 MySQL 完成这项工作。

我将在接下来的几个小时内重复使用上面的示例 - 甚至可能有一个 3 级条目“F”：

```
1         3              7           12 13    (15 16)        20
|----A----|              |------C-----| |----------D----------|
                  |-----B-----|              |---E---|
                  5           9              14     17
                                                |F| 
```

1.  查询按时间排序的所有时间戳的组合列表，并添加每个“动作”的类型

    ```
    SELECT 1 as onoff, start_time as time FROM table
    UNION
    SELECT -1 as onoff, end_time as time FROM table
    ORDER BY time 
    ```

2.  通过带有临时计数器的循环 (?) 处理列表，该计数器在开始/登录时递增 1，在结束/注销时递减 1

    `tmp.start=<time>`如果计数器从 0 更改为 1 并更新临时表中的前一行，则计数器应导致脚本将新行添加到临时表`tmp.end=<time>`中。表，如果它从 1 变为 0。

    该脚本将为上面的示例执行此操作，如下所示：

    ```
    QUERY                       TMP TABLE
    onoff | time  | ctr         ID | start | end
    1     | 01:00 | 1           1  | 01:00 |            (record 1 added,   ctr 0->1)
    -1    | 03:00 | 0           1  | 01:00 | 03:00      (record 1 updated, ctr 1->0)
    1     | 05:00 | 1           2  | 05:00 |            (record 2 added,   ctr 0->1)
    1     | 07:00 | 2                                   (nothing to do)
    -1    | 09:00 | 1                                   (nothing to do)
    -1    | 12:00 | 0           2  | 05:00 | 12:00      (record 2 updated, ctr 1->0)
    1     | 13:00 | 1           3  | 13:00 |            (record 3 added,   ctr 0->1)
    1     | 14:00 | 2                                   (nothing to do)
    1     | 15:00 | 3                                   (nothing to do)
    -1    | 16:00 | 2                                   (nothing to do)
    -1    | 17:00 | 1                                   (nothing to do)
    -1    | 20:00 | 0           3  | 13:00 | 20:00      (record 3 updated, ctr 1->0) 
    ```

3.  最后一步非常简单：在单元中获取`timestampdiff()`from `start`to `end`，您需要/喜欢它并进行任何进一步的过滤或分组。

    例如：在别处使用数据

    ```
    SELECT ID, start, end, timestampdiff(MINUTE, start, end) FROM tmp 
    ```

    或例如：总结每个用户的工作时间/登录时间

    ```
    SELECT user_id, SUM(timestampdiff(MINUTE, start, end)) FROM tmp GROUP BY user_id 
    ```

我敢肯定，这将为任何级别的嵌套提供正确的持续时间，但是有人知道如何在 MySQL 中完成此操作吗？我也想用这个。

最好的祝福

*PS：脚本也可能“关闭”最后一个会话或抛出错误，如果它以计数器 > 1 结束并抛出错误，如果计数器在任何时候变为 < 0*

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2015-11-04T12:50:52.023

[我为另一个问题](https://stackoverflow.com/questions/33498277/summing-range-of-dates-without-counting-overlaps-in-mysql/33507197)写了一个类似的查询，所以我想我会针对这个问题调整它，以防有人感兴趣。

```
SELECT SUM(a.end_time - a.start_time) total_duration
  FROM (
    SELECT MIN(g.start_time) start_time, MAX(g.end_time) end_time 
      FROM (
        SELECT @group_id := @group_id + (@end_time IS NULL OR o.start_time > @end_time) group_id,
               start_time,
               @end_time := CAST(CASE 
                 WHEN (@end_time IS NULL OR o.start_time > @end_time) THEN o.end_time
                 ELSE GREATEST(o.end_time, @end_time)
               END AS DATETIME) end_time  
          FROM times o
          JOIN (SELECT @group_id := 0, @end_time := NULL) init
      ORDER BY o.start_time ASC  
            ) g
  GROUP BY  g.group_id  
        ) a 
```

最里面的查询将您的时间组合在重叠的组中，在适当的情况下延长 end_time。end_time 可以灵活处理完全被前一个包围的时间。

下一个包装查询从每个组中提取完整的时间范围。

外部查询总结了每个组的差异。

# android - 如何为 Jelly Bean Device 使用 systrace 工具

> ID：15781561
> 
> 赞同：1
> 
> 时间：2013-04-03T07:40:31.027
> 
> 标签：android, debugging

我有一些设备变得迟缓。我想使用新的 Android Jelly Bean systrace 调试这个设备。你们中的任何人都可以指点我正确的工具以及如何使用它。

问候，

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-03T08:45:24.147

请阅读[http://developer.android.com/tools/debugging/systrace.html](http://developer.android.com/tools/debugging/systrace.html)页面。

您应该注意某些设备没有 systrace 功能。

您必须检查设备上的 /sys/kernel/debug/tracing/tracing_on 文件。

# api - 在 BigCommerce 中创建货件时使用哪种日期格式

> ID：15781569
> 
> 赞同：0
> 
> 时间：2013-04-03T07:40:56.707
> 
> 标签：api, bigcommerce

我正在尝试为`BigCommerce`使用中的订单创建新货件`BigCommerce API`。

我正在传递这样的所有参数：

```
{
  "order_address_id":8,
  "tracking_number":"",
  "order_date":"Thu, 28 Mar 2013 11:17:22 +0000"," <—I have problem here
  items":
         [
           {"order_product_id":44,"quantity":8},
           {"order_product_id":39,"quantity":0}, 
           {"order_product_id":39,"quantity":0}                              
         ],
  "comments":""
} 
```

我得到的回应是：

```
[{"status":400,"message":"The field 'order_date' is not supported by this resource."}] 
```

谁能告诉我传递“ `order_date`”参数值的正确方法是什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-03T16:24:59.943

这似乎是一个文档和控制台错误。我相信 order_date 字段不可访问。现在应该修好了。

[http://developer.bigcommerce.com/api/orders/shipments](http://developer.bigcommerce.com/api/orders/shipments)

[https://developer.bigcommerce.com/console](https://developer.bigcommerce.com/console)

创建货件时，您应该无法修改 order_date 字段，因为它与订单创建相关联。希望这可以帮助。谢谢！

# c - const char* 的地址是什么数据类型？

> ID：15781572
> 
> 赞同：0
> 
> 时间：2013-04-03T07:41:05.273
> 
> 标签：c, gcc, types

我有以下代码：

```
const char* names = {"apples", "oranges", "grapes"}; 
```

什么数据类型`&name[0]`？海湾合作委员会在抱怨。它不是 const char** 因为 GCC 抱怨这个：

```
const char** address_of_first_name = &name[0];

"note: expected 'const char ** ' but argument is of type 'char **' " 
```

是常量`char * const` 还是什么？头痛进行中...

什么数据类型`&name[0]`？我不想错误地修复这个编译器错误。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-03T07:42:52.187

如果您创建`names`一个指针数组`const char* names[]`并像以前一样初始化它们，那么您可以执行以下操作：

```
#include <stdio.h>

int main()
{
   const char* names[] = {"apples", "oranges", "grapes"};

   const char* first = names[0];
   const char* second = names[1];
   const char* third = names[2];

   const char* foo = &(*names[0]);

   printf("%s", foo);
   printf("%s", second);
   printf("%s", third);

} 
```

[现场示例](http://liveworkspace.org/code/jQJvy%2419)

如果你想要地址，你可以这样做：

```
 const char* addr = &(*names[0]); //print addr gets "apples"
 const char** add = &names[0]; //print add gets 0x7fff14531990 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-04-03T07:45:14.237

正确地，您的数组应该看起来像

```
const char* names[] = {"apples", "oranges", "grapes"}; // array of pointer to char 
```

现在，当你申请

```
name[0]; 
```

这会将地址返回到第一个元素。（“苹果”）

而不是

```
const char** first_name = &name[0]; 
```

尝试

```
const char* first_name = name[0]; 
```

所以你得到了数组中的第一个字符串。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-04-03T07:42:59.663

这个问题是有缺陷的，因为

```
const char* names = {"apples", "oranges", "grapes"}; 
```

`const char*`像数组一样初始化标量。

# java - 服务器在使用 Velocity 实现 Tiles 时进入无限循环

> ID：15781574
> 
> 赞同：0
> 
> 时间：2013-04-03T07:41:08.583
> 
> 标签：java, spring, velocity, infinite-loop, tiles

**编辑：** 我正在尝试使用 spring MVC 将 Tiles 与 Velocity 集成。我的服务器进入无限循环。服务器的控制台读数是：我已将循环的开始标记为“-->”。

```
--> at org.apache.tiles.jsp.taglib.InsertAttributeTag.doTag(InsertAttributeTag.java:311)
    at org.apache.jsp.WEB_002dINF.views.layout_jsp._jspx_meth_tiles_005finsertAttribute_005f0(layout_jsp.java:102)
    at org.apache.jsp.WEB_002dINF.views.layout_jsp._jspService(layout_jsp.java:69)
    at org.apache.jasper.runtime.HttpJspBase.service(HttpJspBase.java:70)
    at javax.servlet.http.HttpServlet.service(HttpServlet.java:728)
    at org.apache.jasper.servlet.JspServletWrapper.service(JspServletWrapper.java:432)
    at org.apache.jasper.servlet.JspServlet.serviceJspFile(JspServlet.java:390)
    at org.apache.jasper.servlet.JspServlet.service(JspServlet.java:334)
    at javax.servlet.http.HttpServlet.service(HttpServlet.java:728)
    at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:305)
    at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:210)
    at org.apache.catalina.core.ApplicationDispatcher.invoke(ApplicationDispatcher.java:749)
    at org.apache.catalina.core.ApplicationDispatcher.doInclude(ApplicationDispatcher.java:605)
    at org.apache.catalina.core.ApplicationDispatcher.include(ApplicationDispatcher.java:544)
    at org.apache.jasper.runtime.JspRuntimeLibrary.include(JspRuntimeLibrary.java:954)
    at org.apache.jasper.runtime.PageContextImpl.doInclude(PageContextImpl.java:684)
    at org.apache.jasper.runtime.PageContextImpl.include(PageContextImpl.java:678)
    at org.apache.tiles.jsp.context.JspTilesRequestContext.include(JspTilesRequestContext.java:103)
    at org.apache.tiles.jsp.context.JspTilesRequestContext.dispatch(JspTilesRequestContext.java:96)
    at org.apache.tiles.renderer.impl.TemplateAttributeRenderer.write(TemplateAttributeRenderer.java:44)
    at org.apache.tiles.renderer.impl.AbstractBaseAttributeRenderer.render(AbstractBaseAttributeRenderer.java:106)
    at org.apache.tiles.impl.BasicTilesContainer.render(BasicTilesContainer.java:670)
    at org.apache.tiles.impl.BasicTilesContainer.render(BasicTilesContainer.java:690)
    at org.apache.tiles.impl.BasicTilesContainer.render(BasicTilesContainer.java:644)
    at org.apache.tiles.impl.BasicTilesContainer.render(BasicTilesContainer.java:627)
    at org.apache.tiles.impl.BasicTilesContainer.render(BasicTilesContainer.java:321)
    at org.apache.tiles.renderer.impl.DefinitionAttributeRenderer.write(DefinitionAttributeRenderer.java:56)
    at org.apache.tiles.renderer.impl.AbstractBaseAttributeRenderer.render(AbstractBaseAttributeRenderer.java:106)
    at org.apache.tiles.renderer.impl.ChainedDelegateAttributeRenderer.write(ChainedDelegateAttributeRenderer.java:76)
    at org.apache.tiles.renderer.impl.AbstractBaseAttributeRenderer.render(AbstractBaseAttributeRenderer.java:106)
    at org.apache.tiles.impl.BasicTilesContainer.render(BasicTilesContainer.java:670)
    at org.apache.tiles.impl.BasicTilesContainer.render(BasicTilesContainer.java:336)
    at org.apache.tiles.template.InsertAttributeModel.renderAttribute(InsertAttributeModel.java:210)
    at org.apache.tiles.template.InsertAttributeModel.end(InsertAttributeModel.java:126)
--> at org.apache.tiles.jsp.taglib.InsertAttributeTag.doTag(InsertAttributeTag.java:311)
    at org.apache.jsp.WEB_002dINF.views.layout_jsp._jspx_meth_tiles_005finsertAttribute_005f0(layout_jsp.java:102)
    at org.apache.jsp.WEB_002dINF.views.layout_jsp._jspService(layout_jsp.java:69)
    at org.apache.jasper.runtime.HttpJspBase.service(HttpJspBase.java:70)
    at javax.servlet.http.HttpServlet.service(HttpServlet.java:728)
    at org.apache.jasper.servlet.JspServletWrapper.service(JspServletWrapper.java:432)
    at org.apache.jasper.servlet.JspServlet.serviceJspFile(JspServlet.java:390)
    at org.apache.jasper.servlet.JspServlet.service(JspServlet.java:334)
    at javax.servlet.http.HttpServlet.service(HttpServlet.java:728)
    at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:305)
    at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:210)
    at org.apache.catalina.core.ApplicationDispatcher.invoke(ApplicationDispatcher.java:749)
    at org.apache.catalina.core.ApplicationDispatcher.doInclude(ApplicationDispatcher.java:605)
    at org.apache.catalina.core.ApplicationDispatcher.include(ApplicationDispatcher.java:544)
    at org.apache.jasper.runtime.JspRuntimeLibrary.include(JspRuntimeLibrary.java:954)
    at org.apache.jasper.runtime.PageContextImpl.doInclude(PageContextImpl.java:684)
    at org.apache.jasper.runtime.PageContextImpl.include(PageContextImpl.java:678)
    at org.apache.tiles.jsp.context.JspTilesRequestContext.include(JspTilesRequestContext.java:103)
    at org.apache.tiles.jsp.context.JspTilesRequestContext.dispatch(JspTilesRequestContext.java:96)
    at org.apache.tiles.renderer.impl.TemplateAttributeRenderer.write(TemplateAttributeRenderer.java:44)
    at org.apache.tiles.renderer.impl.AbstractBaseAttributeRenderer.render(AbstractBaseAttributeRenderer.java:106)
    at org.apache.tiles.impl.BasicTilesContainer.render(BasicTilesContainer.java:670)
    at org.apache.tiles.impl.BasicTilesContainer.render(BasicTilesContainer.java:690)
    at org.apache.tiles.impl.BasicTilesContainer.render(BasicTilesContainer.java:644)
    at org.apache.tiles.impl.BasicTilesContainer.render(BasicTilesContainer.java:627)
    at org.apache.tiles.impl.BasicTilesContainer.render(BasicTilesContainer.java:321)
    at org.apache.tiles.renderer.impl.DefinitionAttributeRenderer.write(DefinitionAttributeRenderer.java:56)
    at org.apache.tiles.renderer.impl.AbstractBaseAttributeRenderer.render(AbstractBaseAttributeRenderer.java:106)
    at org.apache.tiles.renderer.impl.ChainedDelegateAttributeRenderer.write(ChainedDelegateAttributeRenderer.java:76)
    at org.apache.tiles.renderer.impl.AbstractBaseAttributeRenderer.render(AbstractBaseAttributeRenderer.java:106)
    at org.apache.tiles.impl.BasicTilesContainer.render(BasicTilesContainer.java:670)
    at org.apache.tiles.impl.BasicTilesContainer.render(BasicTilesContainer.java:336)
    at org.apache.tiles.template.InsertAttributeModel.renderAttribute(InsertAttributeModel.java:210)
    at org.apache.tiles.template.InsertAttributeModel.end(InsertAttributeModel.java:126)
    at org.apache.tiles.jsp.taglib.InsertAttributeTag.doTag(InsertAttributeTag.java:311)
--> at org.apache.jsp.WEB_002dINF.views.layout_jsp._jspx_meth_tiles_005finsertAttribute_005f0(layout_jsp.java:102)

    AND SO ON... 
```

我的 servlet-context.xml 中有以下代码

```
<beans:bean id="tilesViewResolver" class="org.springframework.web.servlet.view.UrlBasedViewResolver">
        <beans:property name="viewClass" value="org.springframework.web.servlet.view.tiles2.TilesView"/>
        <beans:property name="order" value="0"/>
    </beans:bean>

    <beans:bean id="velocityConfig" class="org.springframework.web.servlet.view.velocity.VelocityConfigurer">
        <beans:property name="resourceLoaderPath" value="/WEB-INF/views/" />
    </beans:bean>

    <beans:bean id="viewResolver" class="org.springframework.web.servlet.view.velocity.VelocityViewResolver">
        <beans:property name="cache" value="true"/>
        <beans:property name="prefix" value=""/>
        <beans:property name="suffix" value=".vm"/>
        <beans:property name="order" value="2"/>
    </beans:bean>

    <beans:bean id="tilesConfigurer" 
    class="org.springframework.web.servlet.view.tiles2.TilesConfigurer">
    <beans:property name="definitions">
        <beans:list>
            <beans:value>/WEB-INF/tiles.xml</beans:value>
        </beans:list>
    </beans:property>
    </beans:bean> 
```

我的 WEB-INF/views/layout.jsp 是

```
<%@ page language="java" contentType="text/html; charset=ISO-8859-1"
    pageEncoding="ISO-8859-1"%>
<%@ taglib uri="http://tiles.apache.org/tags-tiles" prefix="tiles" %>
<!DOCTYPE html PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<html>
<head>
<meta http-equiv="Content-Type" content="text/html; charset=ISO-8859-1">
<title><tiles:insertAttribute name="title"/>  </title>
</head>
<body>
<tiles:insertAttribute name="body"/>
</body>
</html> 
```

最后我的速度文件 home.vm 是：

```
<html>
<body>
<h1>
    Hello world!  
</h1>
##This is comment
<P>  The time on the server is ${serverTime}. </P>
</body>
</html> 
```

瓷砖.xml：

```
<tiles-definitions>
  <definition name="base.definition" template="/WEB-INF/views/layout.jsp">
             <put-attribute name="title" value="" />
             <put-attribute name="body" value="" />
  </definition>

  <definition name="home" extends="base.definition">
             <put-attribute name="title" value="home" />
             <put-attribute name="body" value="/WEB-INF/views/home.vm" />
  </definition>
<tiles-definitions> 
```

我读到了，您可以使用多视图解析器来指定顺序。所以我指定了视图解析器的顺序。

我对这项技术很陌生。请帮忙。提前致谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2014-07-31T08:56:31.730

错误是因为您将属性“title”设置为与定义名称相同的值。瓷砖可以使用嵌套；案例中的标题会重定向到自身，从而导致循环。一个简单的解决方法是将标题值更改为不是定义名称的东西。

改变

```
<put-attribute name="title" value="home" /> 
```

到

```
<put-attribute name="title" value="home page" /> 
```

--

```
<tiles-definitions>
    <definition name="base.definition" template="/WEB-INF/views/layout.jsp">
        <put-attribute name="title" value="" />
        <put-attribute name="body" value="" />
    </definition>
    <definition name="home" extends="base.definition">
        <put-attribute name="title" value="home page" />
        <put-attribute name="body" value="/WEB-INF/views/home.vm" />
    </definition>
<tiles-definitions> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-03T07:43:20.023

尝试添加

```
</tiles-definitions> 
```

在结束时`tiles.xml`。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-08-17T11:53:49.300

修改您的tiles.xml，如下所示`template="WEB-INF/views/layout.jsp"`，它为我解决了无限循环问题，但仍然存在一些问题。如果你修复它也帮助我

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2016-05-28T02:59:28.210

一般来说，我是 Tiles 和 Spring 的新手，在定义我的 tiles.xml 文件时遇到了同样的问题。

特此回答上面发布的解决方案和我自己的经验来详细说明我面临的问题：

问题在于 的属性值`<definition name="welcome" .. >`。

我将“ `movies`”作为标题和标题属性的值。但是，' `movies`' 不应该被用作值，因为它被用作定义。

将 ' `movie`' 更改为其他值（“我的电影之家”）时，效果很好。

我的错误（堆栈溢出）导致代码：

```
<definition name="welcome" extends="baseLayout">
    <put-attribute name="title" value="movies" />
    <put-attribute name="heading" value="movies" />
    <put-attribute name="tagline" value="Welcome to Movie Store" />
    <put-attribute name="content" value="/WEB-INF/views/movies.jsp" />
</definition>
<definition name="movies" extends="baseLayout">
    <put-attribute name="title" value="Movies list" />
    <put-attribute name="heading" value="Movies List" />
    <put-attribute name="tagline" value="Available Products" />
    <put-attribute name="content" value="/WEB-INF/views/movies.jsp" />
</definition> 
```

以下是该问题的解决方案：

```
<definition name="welcome" extends="baseLayout">
    <put-attribute name="title" value="My Movies Home" />
    <put-attribute name="heading" value="My Movies Home" />
    <put-attribute name="tagline" value="Welcome to Movie Store" />
    <put-attribute name="content" value="/WEB-INF/views/movies.jsp" />
</definition>
<definition name="movies" extends="baseLayout">
    <put-attribute name="title" value="Movies list" />
    <put-attribute name="heading" value="Movies List" />
    <put-attribute name="tagline" value="Available Products" />
    <put-attribute name="content" value="/WEB-INF/views/movies.jsp" />
</definition> 
```

# java - eclipse for android app中NO-HEAD的含义是什么？

> ID：15781577
> 
> 赞同：1
> 
> 时间：2013-04-03T07:41:18.063
> 
> 标签：java, android, eclipse

我是 Android 和 eclipse 的新手。当我制作一个测试项目时，我可以运行它。现在，当我从 eclipse 中删除它并再次导入时，它不起作用。因为它存在于我的工作空间中。

对于导入，我将它们移动到另一个文件夹。现在，当我通过 Option-> 打开现有的 android 项目打开它们时，它会显示“NO-HEAD”。

它是什么以及为什么我的项目中的每个文件夹都有一个图标（不同），然后是以前的。有人可以告诉我。我附上了图片以供解释![在此处输入图像描述](https://i.stack.imgur.com/rgesE.png)。 ![在此处输入图像描述](https://i.stack.imgur.com/1iYyM.png)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-03T07:45:13.860

您的 Eclipse 安装了一个版本控制插件（可能是 Subclipse，一个用于 subversion 的客户端插件，或者可能是另一个）。

“NO HEAD”我相信意味着 Eclipse/Subclipse 无法再找到您的项目的最新副本，因为您将它移到了那里。如果您右键单击其中一个图标，您应该会发现一些与版本控制相关的上下文菜单命令。

通常在 Eclipse 中，您会尽可能多地在其图形界面中进行操作，否则当您在其外部删除/移动/重命名文件时，它可能会感到困惑。在那些您还没有这样做的情况下，您通常必须在 Eclipse 项目资源管理器中右键单击并选择“刷新”。在涉及版本控制系统的情况下，它可能会更复杂一些，但这也是一个好兆头，因为这意味着 subversion 可能保留了该项目的备份副本（如果你决定恢复你刚刚所做的） .

此外，每当您将项目导入 Eclipse 时，最好将其复制到您的工作区中，否则当您必须删除项目时会变得混乱。您一定已经发现，当您删除一个项目（不从磁盘中删除）以及当您立即尝试在同一个工作区中重新创建另一个同名项目时，Eclipse 可能会很烦人。

这就是我养成在导入时复制项目内容的习惯的主要原因。这样，我就不必记住我是否复制了，或者没有复制，如果我必须删除一个项目才能重新开始，我不必担心删除我的原始来源'已经导入（即使勾选复选框也可以从磁盘中删除）。

# ruby-on-rails - Rails 中的 Sphinx - 错误：索引“user_core”：sql_connect：致命：角色“root”不存在

> ID：15781579
> 
> 赞同：1
> 
> 时间：2013-04-03T07:41:24.813
> 
> 标签：ruby-on-rails, postgresql, sphinx, thinking-sphinx

当我运行 rake ts:index 时，我收到以下错误：

```
Generating Configuration to /Users/main/rails_projects/glassboard/config/development.sphinx.conf
Sphinx 2.0.4-release (r3135)
Copyright (c) 2001-2012, Andrew Aksyonoff
Copyright (c) 2008-2012, Sphinx Technologies Inc (http://sphinxsearch.com)

using config file '/Users/main/rails_projects/glassboard/config/development.sphinx.conf'...
indexing index 'user_core'...
ERROR: index 'user_core': sql_connect: FATAL:  role "root" does not exist
 (DSN=pgsql://root:***@localhost:5432/glassboard_development).
total 0 docs, 0 bytes
total 0.005 sec, 0 bytes/sec, 0.00 docs/sec
skipping non-plain index 'user'...
total 0 reads, 0.000 sec, 0.0 kb/call avg, 0.0 msec/call avg
total 0 writes, 0.000 sec, 0.0 kb/call avg, 0.0 msec/call avg 
```

我找不到关于此错误的任何在线信息，Sphinx 我的数据库有什么问题？

我的操作系统是 Mac 10.6.8，我使用的是 (PostgreSQL) 9.1.4。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-05T01:04:31.787

您使用的是什么版本的 Thinking Sphinx？很久以前有一个错误假设默认数据库用户是 root 如果没有指定（适用于 MySQL，但不适用于 PostgreSQL），但已修复。我建议将您正在使用的 Rails 更新到最新的适当版本（Rails 2：TS 1.4.14，Rails 3：TS 2.0.14）。

或者，如果您使用的是 Rails 3.1 或更新版本，则可以更新到 TS 3.0.2 - 但那里有重大变化：http: [//pat.github.com/thinking-sphinx/upgrading.html](http://pat.github.com/thinking-sphinx/upgrading.html)

# javascript - jQuery 插件与 AJAX 结果混淆

> ID：15781583
> 
> 赞同：1
> 
> 时间：2013-04-03T07:41:40.133
> 
> 标签：javascript, jquery, ajax

我有一个函数可以在按键上进行 AJAX 调用，如果结果不为空，它会将其放在工具提示中。如果我停用它，一切都会按预期工作，但是一旦启用 AJAX 似乎会在返回空变量和实际结果之间“切换”。

这是进行 AJAX 调用并激活工具提示的部分：

```
jQuery(document).ready(function() {
    jQuery('.qty').keyup(function() {
        var qty   = jQuery(this).val();
        var pid = jQuery(this).next().html();
        var element = this;

        jQuery.post('shopping_cart_ajax.php', {products_id: pid, products_quantity: qty}, function(data) {
            if (data)
            {
                jQuery(element).tooltip();
                jQuery(element).unbind('mouseenter mouseleave');
                jQuery(element).tooltip('update', data);
                jQuery(element).tooltip('show');
            }
            else
            {
                jQuery(element).tooltip('destroy');
            }
        });
    });
}); 
```

和插件本身：

```
(function($) {
var methods = {
    //създаване на tooltip-а
    init: function(options) {
        //настройки по подразбиране
        if (!options)
        {
            options = {
                method: "hover",    //метод за активация на tooltip-а по подразбиране (за момента има само hover опция)
                color: "#dc143c"    //цвят по подразбиране
            };
        }

        return this.each(function() {
            //намиране текста на tooltip-а
            var tooltip_text = $(this).attr("tooltip");

            //добавяне на тялото и стрелката
            $(this).after('<div></div>');
            $(this).after('<div class="tooltip_base">'+tooltip_text+'</div>');

            switch (options.method)
            {
                case "hover":
                    methods.hover(this, options.color);
                break;
            }
        });
    },

    //показване на tooltip-а при посочване с мишката
    hover: function(object, color) {
        $(object).hover(
            function() {
                methods.position(object, color);
                $(object).next().next().fadeIn();   //показване на стрелката
                $(object).next().fadeIn();          //показване на тялото
            },
            function() {
                $(object).next().next().hide();     //скриване на стрелката
                $(object).next().hide();            //скриване на тялото
            }
        );
    },

    //позициониране на tooltip-а
    position: function(object, color) {
        //намиране позицията на елемента, под който трябва да се появи tooltip-а
        var offset = $(object).offset();

        //намиране размерите на елемента
        var parent_width = $(object).outerWidth();
        var parent_height = $(object).outerHeight();

        //намиране размерите на tooltip-а
        var tooltip_width = $(object).next().outerWidth();
        var tooltip_height = $(object).next().outerHeight();

        //намиране вида на tooltip-а и начина на позициониране
        var pos_tooltip_top;
        var pos_tooltip_left;
        var pos_arrow_top;
        var pos_arrow_left;
        var arrow_type;

        if ($(object).hasClass("tooltip_top_center") == true)
        {
            pos_tooltip_top  = offset.top-tooltip_height-5;
            pos_tooltip_left = offset.left+(parent_width/2)-(tooltip_width/2);
            pos_arrow_top    = offset.top-5;
            pos_arrow_left   = offset.left+(parent_width/2)-5;
            arrow_type       = "tooltip_bottom_arrow";
        }
        else if ($(object).hasClass("tooltip_top_right") == true)
        {
            pos_tooltip_top  = offset.top-tooltip_height-5;
            pos_tooltip_left = offset.left+(parent_width/2)-12;
            pos_arrow_top    = offset.top-5;
            pos_arrow_left   = offset.left+(parent_width/2)-5;
            arrow_type       = "tooltip_bottom_arrow";
        }
        else if ($(object).hasClass("tooltip_top_left") == true)
        {
            pos_tooltip_top  = offset.top-tooltip_height-5;
            pos_tooltip_left = offset.left-tooltip_width+(parent_width/2)+12;
            pos_arrow_top    = offset.top-5;
            pos_arrow_left   = offset.left+(parent_width/2)-5;
            arrow_type       = "tooltip_bottom_arrow";
        }
        else if ($(object).hasClass("tooltip_bottom_center") == true)
        {
            pos_tooltip_top  = offset.top+parent_height+5;
            pos_tooltip_left = offset.left+(parent_width/2)-(tooltip_width/2);
            pos_arrow_top    = offset.top+parent_height;
            pos_arrow_left   = offset.left+parent_width/2-5;
            arrow_type       = "tooltip_top_arrow";
        }
        else if ($(object).hasClass("tooltip_bottom_right") == true)
        {
            pos_tooltip_top  = offset.top+parent_height+5;
            pos_tooltip_left = offset.left+(parent_width/2)-12;
            pos_arrow_top    = offset.top+parent_height;
            pos_arrow_left   = offset.left+parent_width/2-5;
            arrow_type       = "tooltip_top_arrow";
        }
        else if ($(object).hasClass("tooltip_bottom_left") == true)
        {
            pos_tooltip_top  = offset.top+parent_height+5;
            pos_tooltip_left = offset.left-tooltip_width+(parent_width/2)+12;
            pos_arrow_top    = offset.top+parent_height;
            pos_arrow_left   = offset.left+parent_width/2-5;
            arrow_type       = "tooltip_top_arrow";
        }
        else if ($(object).hasClass("tooltip_left") == true)
        {
            pos_tooltip_top  = offset.top-(tooltip_height/2)+(parent_height/2);
            pos_tooltip_left = offset.left-tooltip_width-5;
            pos_arrow_top    = offset.top-5+(parent_height/2);
            pos_arrow_left   = offset.left-5;
            arrow_type       = "tooltip_right_arrow";
        }
        else if ($(object).hasClass("tooltip_right") == true)
        {
            pos_tooltip_top  = offset.top-(tooltip_height/2)+(parent_height/2);
            pos_tooltip_left = offset.left+parent_width+5;
            pos_arrow_top    = offset.top-5+(parent_height/2);
            pos_arrow_left   = offset.left+parent_width;
            arrow_type       = "tooltip_left_arrow";
        }
        else
        {
            pos_tooltip_top  = offset.top+parent_height+3;
            pos_tooltip_left = offset.left+(parent_width/2)-(tooltip_width/2);
            arrow_type       = "tooltip_no_arrow";
        }

        //позициониране на тялото
        $(object).next().css({
            "top": pos_tooltip_top,
            "left": pos_tooltip_left
        });

        //избиране на подходящата стрелка
        $(object).next().next().addClass(arrow_type);

        //позициониране на стрелката
        $(object).next().next().css({
            "top": pos_arrow_top,
            "left": pos_arrow_left
        });

        if (color != "")
        {
            //задаване цвят на тялото
            $(object).next().css({
                "background-color": color
            });

            var tooltip_class = $(object).next().next().attr("class");
            var arrow_color;

            //задаване цвят на стрелката
            switch (tooltip_class)
            {
                case "tooltip_top_arrow":
                    arrow_color = "transparent transparent "+color+" transparent";
                break;

                case "tooltip_bottom_arrow":
                    arrow_color = color+" transparent transparent transparent";
                break;

                case "tooltip_left_arrow":
                    arrow_color = "transparent "+color+" transparent transparent";
                break;

                case "tooltip_right_arrow":
                    arrow_color = "transparent transparent transparent "+color;
                break;
            }

            $(object).next().next().css({
                "border-color": arrow_color
            });
        }
    },

    //показване
    show: function() {
        $(this).next().next().fadeIn();     //показване на стрелката
        $(this).next().fadeIn();            //показване на тялото
    },

    //скриване
    hide: function() {
        $(this).next().next().hide();       //скриване на стрелката
        $(this).next().hide();              //скриване на тялото
    },

    //промяна на съдържанието на tooltip-а
    update: function(content, color) {
        if (!color)
        {
            color = "#dc143c";
        }

        $(this).attr({
            "tooltip": content
        });

        $(this).next().html(content);

        methods.position(this, color);
    },

    //изтриване на tooltip-а
    destroy: function() {
        if ($(this).next().hasClass('tooltip_base'))
        {
            $(this).removeAttr('tooltip');
            $(this).next().next().remove();
            $(this).next().remove();
            $(this).unbind('mouseenter mouseleave');
        }
    }
};

$.fn.tooltip = function(method) {
    if (methods[method])
    {
        return methods[method].apply(this, Array.prototype.slice.call(arguments, 1));
    }
    else if (typeof method === 'object' || !method)
    {
        return methods.init.apply(this, arguments);
    }
    else
    {
        $.error('Method '+method+' does not exist on jQuery.tooltip');
    }
};
})(jQuery); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-13T22:36:51.840

我认为您的插件与您看到的问题无关。

**您的代码会在每次击键时**启动 Ajax 调用。

因此，在多次击键后，您会一个接一个地收到多个响应，其中一些可能是空的，也可能不是空的，这解释了您所看到的“切换”效果。

我假设您真正想要的是**仅在用户停止键入之后才处理最终的 Ajax 一次**。或者换一种说法，在任何给定时间，“每个目的”都应该只有一个活动的 Ajax 请求。

因此，您需要对初始 Ajax 调用有一个引用，并在后续击键时中止它，然后启动一个新调用。

```
jQuery(document).ready(function() {

    var xhr;

    jQuery('.qty').keyup(function() {
        var qty   = jQuery(this).val();
        var pid = jQuery(this).next().html();
        var element = this;

        // abort the Ajax request invoked by previous keystrokes
        if (xhr) xhr.abort();

        xhr = jQuery.post('shopping_cart_ajax.php', {products_id: pid, products_quantity: qty}, function(data) {
            if (data)
            {
                jQuery(element).tooltip();
                jQuery(element).unbind('mouseenter mouseleave');
                jQuery(element).tooltip('update', data);
                jQuery(element).tooltip('show');
            }
            else
            {
                jQuery(element).tooltip('destroy');
            }
        });
    });
}); 
```

供您参考，`.post()`返回一个 jqXHR 对象[(http://api.jquery.com/jQuery.post/)](http://api.jquery.com/jQuery.post/)，它公开了`abort()`方法[(http://api.jquery.com/jQuery.ajax/#jqXHR)](http://api.jquery.com/jQuery.ajax/#jqXHR)

对于 Ajax 调用，尤其是那些通过悬停或在您的情况下为击键调用的调用，这是我始终牢记的那种例程：即中止以前的 Ajax 调用。

# javascript - 在两个 div 之间创建 javascript 动画

> ID：15781588
> 
> 赞同：-2
> 
> 时间：2013-04-03T07:42:11.100
> 
> 标签：javascript, jquery

我有一个容器，里面包含两个主要的 div。容器的可见区域是 540px 高 x 1024px （这意味着该容器之外的任何东西都“隐藏”在视图之外。）

我想在容器内的两个主要 div 之间创建一个自动滚动，所以它从第一个 div 可见开始，等待 10 秒，然后“滚动”到第二个 div 并停止，并且不循环回到起点。

我想我必须使用 javascript 或 Jquery，因为 CSS3 动画将无法做到这一点（因为我希望动画在页面加载后开始）。我已经为我想要做的事情绘制了一个基本图像，但除此之外我不知道从哪里开始。帮助！！！

更新：我使用我所拥有的极其有限的知识在这里发布了一个更新的 js fiddle：

[http://jsfiddle.net/D7Aad/16/](http://jsfiddle.net/D7Aad/16/)

目前我在两张幻灯片之间有一个“淡入淡出”，想法是页面不会淡出，而是自动向下滚动到第二个 div，然后停止而不重复。

我认为我的问题可能在于 javascript 代码：

```
var continuous = function() {
$("#slide_one").fadeToggle(600);
$("#slide_two").fadeToggle(600);   
}

setInterval(continuous,5000); 
```

![在此处输入图像描述](https://i.stack.imgur.com/ndjri.jpg)

如果有任何细节可以特别帮助我解释我在寻找什么，请将它们发布在评论中，我会回复你。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-03T10:47:15.053

这是一个[工作小提琴](http://jsfiddle.net/D7Aad/17/)

```
$(document).ready(function() {
    //Show both slides
    $('#slide_one, #slide_two').show();
    //Define a 2 seconds timeout before starting the animation
    setTimeout(function() {
        $('body').animate({
             //Scroll to #slide_two div
             scrollTop: $("#slide_two").offset().top
         }, 2000); // the scroll down animation will last 2 seconds
    }, 2000); // after 2 seconds, scroll down
}); 
```

来源：[jQuery 滚动到元素](https://stackoverflow.com/questions/6677035/jquery-scroll-to-element)

# asp.net - 使用中继器在按钮的单击事件上获取多个标签的值

> ID：15781600
> 
> 赞同：0
> 
> 时间：2013-04-03T07:43:03.240
> 
> 标签：asp.net, sql-server-2008-r2

我正在尝试 ASP 中继器控件。

我正在使用 3labels（在中继器内部）显示我的数据库中的值，

我也可以在按钮的单击事件上获取一个标签的值（这也在中继器内）

但，

我想在单击同一个按钮时获取所有 3 个标签的值

我的 aspx 文件是：

```
<asp:Repeater ID="rptrHotel" runat="server" 
                                onitemcommand="rptrHotel_ItemCommand">
                                <HeaderTemplate>
                                    <table width="500px"  class="bidTab">
                                        <tr class="bidHeading">
                                            <th>
                                                Hotel Name
                                            </th>
                                            <th>
                                                Room Type
                                            </th>
                                            <th>
                                                Bid
                                            </th>
                                        </tr>
                                </HeaderTemplate>
                                <ItemTemplate>
                                    <tr>
                                        <td>
                                            <asp:Label ID="lblHotelName" runat="server" Text='<%#Eval("hotel_name")%>'></asp:Label>
                                        </td>
                                        <td>
                                            <asp:Label ID="lblRoomType" runat="server" Text='<%#Eval("room_type_name")%>'></asp:Label>
                                        </td>
                                        <td>
                                            <asp:Label ID="lblBaseBidAmt" runat="server" Text='<%#Eval("base_bid_ammount")%>'></asp:Label>
                                        </td>
                                        <td>
                                            <asp:Button ID="btnBidNow" runat="server" Text="Bid Now" CommandName="BidNow" CommandArgument='<%#Eval("hotel_name") %>'/>
                                        </td>
                                    </tr>
                                </ItemTemplate>
                                <FooterTemplate>
                                    </table>
                                </FooterTemplate>
                            </asp:Repeater> 
```

我在 aspx.cs 文件中尝试过的代码是：

```
protected void rptrHotel_ItemCommand(object source, RepeaterCommandEventArgs e)
    {
        if (e.CommandName == "BidNow")
        {
            Label hotel_name = e.Item.FindControl("lblHotelName") as Label;
            hotel_name.Text = e.CommandArgument.ToString();

            Label room_type_name = e.Item.FindControl("lblRoomType") as Label;
            room_type_name.Text = e.CommandArgument.ToString();

            Label base_bid_ammount = e.Item.FindControl("lblBaseBidAmt") as Label;
            base_bid_ammount.Text = e.CommandArgument.ToString();

            lblhotelresult.Text = lblhotelresult.Text;
            lblRoomResult.Text = room_type_name.Text;
            lblBaseamtresult.Text = base_bid_ammount.Text;

            //Session["hotel_name"] = hotel_name.Text;
            //Session["room_type_name"] = room_type_name.Text;
            //Session["base_bid_ammount"] = base_bid_ammount.Text;

            //Response.Redirect("BidRoomCustomer.aspx");
        }
    } 
```

请建议可以做什么并帮助我访问所有 3labels。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-03T13:13:19.717

我自己做的。

需要处理多个参数。

将我的 .aspx 文件更改为：

```
<asp:Repeater ID="rptrHotel" runat="server" OnItemCommand="rptrHotel_ItemCommand">
                                <HeaderTemplate>
                                    <table width="500px" class="bidTab">
                                        <tr class="bidHeading">
                                            <th>
                                                Hotel Name
                                            </th>
                                            <th>
                                                Room Type
                                            </th>
                                            <th>
                                                Bid
                                            </th>
                                        </tr>
                                </HeaderTemplate>
                                <ItemTemplate>
                                    <tr>
                                        <td>
                                            <asp:Label ID="lblHotelName" runat="server" Text='<%#Eval("hotel_name")%>'></asp:Label>
                                        </td>
                                        <td>
                                            <asp:Label ID="lblRoomType" runat="server" Text='<%#Eval("room_type_name")%>'></asp:Label>
                                        </td>
                                        <td>
                                            <asp:Label ID="lblBaseBidAmt" runat="server" Text='<%#Eval("base_bid_ammount")%>'></asp:Label>
                                        </td>
                                        <td>
                                            <asp:Button ID="btnBidNow" runat="server" Text="Bid Now" CommandName="BidNow" CommandArgument='<%#Eval("hotel_name")+","+ Eval("room_type_name")+","+Eval("base_bid_ammount")%>'>
                                            </asp:Button>

                                        </td>
                                    </tr>
                                </ItemTemplate>
                                <FooterTemplate>
                                    </table>
                                </FooterTemplate>
                            </asp:Repeater> 
```

我的 .aspx.cs 文件是：

```
protected void rptrHotel_ItemCommand(object source, RepeaterCommandEventArgs e)
    {
        if (e.CommandName == "BidNow" )
        {

            string[] arguments = e.CommandArgument.ToString().Split(new char[] { ',' });
            string hotel_name = arguments[0];
            string hotel_room_type = arguments[1];
            string base_bid_amt=arguments[2];

        } 
```

这很好用:)

# android - 在 Android 上打开 CllLog 并选择一个数字

> ID：15781602
> 
> 赞同：0
> 
> 时间：2013-04-03T07:43:07.087
> 
> 标签：android, android-intent, calllog

我读过很多人试图解释如何在 Android 上打开呼叫日志并允许用户选择一个项目，但他们都不起作用。有人有好的工作样本吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-03T07:53:49.360

以下代码片段非常适合我

```
Intent showCallLog = new Intent();
showCallLog.setAction(Intent.ACTION_VIEW);
showCallLog.setType(CallLog.Calls.CONTENT_TYPE);
context.startActivity(showCallLog); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-22T16:11:38.877

我使用自己的版本进行了此操作。我使用了一个对话框并将光标交给了通话记录。这是功能：

```
public void getCallLog() {

    String[] callLogFields = { android.provider.CallLog.Calls._ID,
            android.provider.CallLog.Calls.NUMBER,
            android.provider.CallLog.Calls.CACHED_NAME /* im not using the name but you can*/};
    String viaOrder = android.provider.CallLog.Calls.DATE + " DESC";
    String WHERE = android.provider.CallLog.Calls.NUMBER + " >0"; /*filter out private/unknown numbers */

    final Cursor callLog_cursor = getActivity().getContentResolver().query(
            android.provider.CallLog.Calls.CONTENT_URI, callLogFields,
            WHERE, null, viaOrder);

    AlertDialog.Builder myversionOfCallLog = new AlertDialog.Builder(
            getActivity());

    android.content.DialogInterface.OnClickListener listener = new DialogInterface.OnClickListener() {
        public void onClick(DialogInterface dialogInterface, int item) {
            callLog_cursor.moveToPosition(item);

            Log.v("number", callLog_cursor.getString(callLog_cursor
                    .getColumnIndex(android.provider.CallLog.Calls.NUMBER)));

            callLog_cursor.close();

        }
    };
    myversionOfCallLog.setCursor(callLog_cursor, listener,
            android.provider.CallLog.Calls.NUMBER);
    myversionOfCallLog.setTitle("Choose from Call Log");
    myversionOfCallLog.create().show();
} 
```

# mysql - 在 MySQL 中，我无法将主键设置为 auto_increment（加上自动表示数据类型（11））

> ID：15781603
> 
> 赞同：0
> 
> 时间：2013-04-03T07:43:07.607
> 
> 标签：mysql, auto-increment, mysql-workbench

我有一个表，它的主键是 Measurement_Id 我希望它是整数和 auto_increment 但是当我选择 Int 并单击应用时，它会自动转向（11）而不是 int。只是说 (11​​) 作为数据类型，即使在单击应用 auto_increment 框变成未选中并且数据类型从 INT 变成 (11) 后选中了 auto_increment 框。

正常吗？单击应用后，它不会成为 auto_increment 检查...

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-03T08:13:19.883

从文档中，常规 INT 可以是 -2147483647 和 2147483647 之间的任何数字，或从 0 到 4294967295 的无符号数。请注意，除非您使用负数，否则这是 10 个字符，那么您需要 11 个。大多数时候，SMALLINT 或 MEDIUMINT 就足够了。但是，具有自动增量的主键默认为 INT(11)。

# python - api_limit_status().remaininghits key ERROR ; 脚本不工作；无法获取好友

> ID：15781604
> 
> 赞同：2
> 
> 时间：2013-04-03T07:43:16.990
> 
> 标签：python, twitter, tweepy

```
#!/usr/bin/env python # encoding: utf-8

import tweepy
import networkx 
from networkx import core
import time
import sys
import json
import codecs
import os

consumer_key=""
consumer_secret=""
access_token=""
access_token_secret=""

auth = tweepy.OAuthHandler(consumer_key, consumer_secret)
auth.set_access_token(access_token, access_token_secret)

api = tweepy.API(auth)

AN_HOUR = 3630
TWENTY_MIN = 20*60
THIRTY_MIN = 30*60
LIMIT = 500

def create_egonet(twitter_api, seed_user):
    try:
        egonet = networkx.DiGraph()
        if (api.rate_limit_status()['remaining_hits'] < 5):
            print(api.rate_limit_status())
            time.sleep(TWENTY_MIN)

        friends = tweepy.Cursor(api.friends, id=seed_user).items(LIMIT)
        print "processing user" + str(seed_user)
        count = 0
        for fr in friends:
            count = count + 1
            egonet.add_edge(seed_user, str(fr.screen_name))
        print str(count) + ' edges added'
        return egonet
    except tweepy.error.TweepError as e:
        print e.reason
        return False

def build_friends_of_friends_network(twitter_api, cur_network):
    min_degree = 1
    users = nodes_at_degree(cur_network, min_degree)
    for user in users:
        time.sleep(1)
        new_network = create_egonet(twitter_api, user)
        if new_network != False:
            cur_network = networkx.compose(cur_network, new_network)
            print(str(networkx.info(cur_network)))
    return cur_network

def nodes_at_degree(network, min_degree):
    d = network.degree()
    d = d.items()
    return [(user) for (user,degree) in d if (degree >= min_degree)]

def save_network(network, original_seed):
    network._name = "original_seed_network"
    networkx.write_edgelist(network, path="twitter_network_edgelist.csv", delimiter='\t')

def core_the_network(new_network, k):
    G = new_network
    kcores = core.find_cores(G)
    core_items = kcores.items()
    two_core_or_higher = [(a) for (a,b) in core_items if b>(k-1)]
    K = networkx.subgraph(G, two_core_or_higher)
    print(str(networkx.info(K)))
    return K

def find_core_friends(cored_network, original_seed):
    K = cored_network
    # get your current friends from K
    N = K.neighbors(original_seed)
    F = []
    # for each of your current friends, gather their friends.  There hopefully will be repeats.
    for u in N:
        D = K.neighbors(u)
        for i in D:
            if N.count(i) < 1 and i is not original_seed:
                F.append(i)
    return F

def order_new_friends(friend_counts):
    F = friend_counts
    counts = dict((k, F.count(k)) for k in set(F))
    counts_items=counts.items()
    counts_items=[(b,a) for (a,b) in counts_items]
    counts_items.sort()
    counts_items.reverse()
    ff = open('suggested_friends', 'w')
    for i in counts_items:
        ff.write(str(i[0])+' of your friends are already following '+i[1] + '\n')
        print(str(i[0])+' of your friends are already following '+i[1])

from operator import itemgetter    
def find_highest_degree_friends(K):
    items = K.in_degree().items()
    items.sort(key=itemgetter(1))
    items.reverse()
    print(str(items[0:20]))

def highest_centrality(cent_dict):
    cent_items=[(b,a) for (a,b) in cent_dict.iteritems()]
    cent_items.sort()
    cent_items.reverse()
    return tuple(reversed(cent_items[0:20])) 
```

终端执行

import TweetRecs as tr
import networkx as nx
main_net=tr.create_egonet(tr.api,'gilad')
Traceback（最近一次调用最后）：
文件“”，第 1 行，在
文件“TweetRecs.py”中，第 59 行，在 create_egonet
if (api.rate_limit_status()['remaining_hits'] < 5):
KeyError: 'remaining_hits'

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-06-01T22:55:09.420

我遇到了同样的问题，在 Stackoverflow 上没有找到任何帮助。无论如何，经过一些试验，我能够弄清楚并考虑发布这个问题的答案，尽管我迟到了大约 2 个月:-) api.rate_limit_status()['remaining_hits'] 不起作用，因为 Twitter 已经改变了它的速率限制. Twitter 的 API 限制变得更加严格。Streaming API 不再有 350 次调用，Search API 调用次数未知（但高于 350）。

它现在按资源对限制进行速率限制，限制为 15 或 180，具体取决于您查询的资源。阅读资源文档的[速率限制以了解更多详细信息。](https://dev.twitter.com/docs/rate-limiting/1.1/limits)因此，如果您想找到剩余的搜索结果，您可以发出以下命令。

```
limits = api.rate_limit_status()
remain_search_limits = limits['resources']['search']['/search/tweets']['remaining'] 
```

# java - 如何在 Eclipse 中生成扩展更改 .aidl 到 .java？

> ID：15781605
> 
> 赞同：1
> 
> 时间：2013-04-03T07:43:18.210
> 
> 标签：java, aidl

我知道 Eclipse 会自动生成扩展更改 [src/ ~.aidl] 到 [gen/ ~.java]。

但是，我想知道如何生成扩展更改 .aidl 到 .java 自动详细。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-03T15:29:22.640

Eclipse 不只是更改文件扩展名；它使用一个 Android SDK 工具`aidl`，根据文件中的信息创建一个完整的 Java 类`.aidl`。

[这里有关于aidl 格式](http://developer.android.com/guide/components/aidl.html)的文档，它被编译成基于[`IBinder`](http://developer.android.com/reference/android/os/IBinder.html).

可以[在此处找到](http://androidxref.com/4.1.1/xref/frameworks/base/tools/aidl/)aidl 工具本身的源代码，但真正了解其功能的最佳方法是查看生成的 .java 文件之一。

# javascript - PUBNUB：在“PUBNUB.subscribe”上，window.print() 不起作用

> ID：15781614
> 
> 赞同：1
> 
> 时间：2013-04-03T07:43:51.283
> 
> 标签：javascript, google-chrome, printing, real-time-updates, pubnub

在我的一个应用程序中，我使用 PUBNUB 进行实时网络通信。

但是我面临一些奇怪的问题，因为当我订阅一些频道时**`window.print()`**（打印预览对话框未打开）根本不起作用。

＆如果我取消订阅频道，打印工作正常。

即使我也在[PubNub 控制台](http://www.pubnub.com/console)上尝试过。这可能是 pubnub 方面的错误。

我们中的任何人都面临同样的问题并得到解决，然后请指导我。

**注意：**我在 chrome 的最新版本上使用它。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-05T19:24:52.647

# 如何使用 PubNub 和 JavaScript 远程打印

使用 PubNub 实时网络，您可以指示打印机代表用户进行远程打印。 **WANRING：这通常不是一个好主意，可能对您的用户来说非常烦人。我们不建议您这样做。** 但是，如果您仍想继续前进，这就是解决方案！

```
<script src="https://pubnub.a.ssl.fastly.net/pubnub-3.4.3.min.js"></script>
<script>(function(){

    var channel = "my_channel";
    var pubnub  = PUBNUB.init({
        publish_key   : 'demo',
        subscribe_key : 'demo'
    });

    pubnub.subscribe({ restore: true, channel: channel, message: receive });

    function receive(message) {
        window.print();
        pubnub.unsubscribe({ channel : channel });
        setTimeout( function() { 
            pubnub.subscribe({
                restore : true,
                channel : channel,
                message : receive
            });
        }, 2500 );
    }
})();</script> 
```

### 完整的工作示例

如果您想查看一个完整的示例：[https ://github.com/pubnub/javascript/blob/master/examples/print-remote/print.html](https://github.com/pubnub/javascript/blob/master/examples/print-remote/print.html)

# vim - 如何有条件地在vim中映射序列以运行外部程序而不打印else子句

> ID：15781615
> 
> 赞同：2
> 
> 时间：2013-04-03T07:43:53.137
> 
> 标签：vim

如何`vim`有条件地映射一个序列以运行两个外部程序中的任何一个，这样屏幕**不会**被清除以显示该`else`子句？

例如：

```
:nmap <c-l> :if filereadable('Makefile')<CR>!make<CR>else<CR>!ls<CR>endif<CR> 
```

`ctrl`+`m`执行`make`但随后清除屏幕并在其底部打印以下内容：

```
:  else
:  !ls
:  endif
Press ENTER or type command to continue 
```

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-04-03T07:58:29.000

您可以使用*表达式映射*( `:help map-expr`)

```
:nnoremap <expr> <c-m> filereadable('Makefile') ? ':make<CR>' : ':!ls<CR>' 
```

笔记：

*   [你应该使用`:noremap`](http://learnvimscriptthehardway.stevelosh.com/chapters/05.html); 它使映射不受重新映射和递归的影响。
*   `<C-m>``<CR>`与;相同 目前无法区分两者；更好地使用不同的键。有关更多信息，请参阅[此答案](https://stackoverflow.com/a/15768723/813602)。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-04-03T08:01:03.340

你需要`map <expr>`

例如：

```
nnoremap <expr> <c-t> line('.')>=6? ':!ls<cr>' : ':!seq 10<cr>' 
```

在你的例子中：

```
:nnoremap <expr> <c-m> filereadable('Makefile') ? ':make<CR>' : ':!ls<CR>' 
```

详细信息：

```
:h :map-<expr> 
```

请注意，如果您 map `<c-m>`，`Enter`也将遵循该映射。除非您打算这样做，否则最好使用另一个组合键。

# php - $_SERVER['REMOTE_ADDR'] 在 2 个服务器之间不同

> ID：15781619
> 
> 赞同：1
> 
> 时间：2013-04-03T07:44:05.380
> 
> 标签：php

我有 2 台服务器从那里获得我的客户`$_SERVER['REMOTE_ADDR']`

在服务器 (A) 上，我将 IP 存储`$_SERVER['REMOTE_ADDR']`在数据库中并执行`header('Location: ...')`到服务器 (B)。服务器 (B)，`$_SERVER['REMOTE_ADDR']`在屏幕上打印/回显 ip。

旁注：服务器（A）上的页面从 iframe 内部被调用，服务器（B）的页面随后被加载到同一个 iframe 中。

但是，当我比较两个结果时，我可以看到服务器 (A) 返回本地网络 IP，服务器 (B) 返回外部 IP。这是什么原因？我希望两者都是本地/外部 ip 作为行为。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-03T07:50:25.647

从 php 手册：

> $_SERVER 是一个包含标题、路径和脚本位置等信息的数组。此数组中的条目由 Web 服务器创建。**无法保证每个 Web 服务器都会提供其中任何一个；服务器可能会省略一些，或提供此处未列出的其他内容。** 也就是说，在 » CGI/1.1 规范中包含了大量这些变量，因此您应该能够预料到这些变量。

出于安全原因，您的服务器 A 可能不允许获取远程 IP 地址。

# c# - 将时间格式应用于模型 MVC 中的字符串字段

> ID：15781622
> 
> 赞同：0
> 
> 时间：2013-04-03T07:44:28.063
> 
> 标签：c#, model-view-controller, model, time-format

我在数据库中有一个字符串字段 TimeAdd，我使用下一个扩展名计算：

```
 public static string ToIso8601Date(this DateTime dateTime)
    {
        DateTimeOffset dateOffset = new DateTimeOffset(dateTime, TimeZoneInfo.Local.GetUtcOffset(dateTime));
        return dateOffset.ToString("o");
    }
    // here is its result: 2013-04-01T16:16:17.7646200+03:00 
```

这是我的模型字段：

```
 [Column("TimeAdd")]
    [DisplayFormat(DataFormatString = @"{0:dd/MM/yyyy HH\:mm}")]
    public string TimeAdd { get; set; } 
```

和 View() 部分：

```
 <td>
         @Html.DisplayFor(modelItem => item.TimeAdd)
     </td> 
```

我没有实现我的目标。我必须如何正确使用 DataFormatString？在我的输出中没有任何改变。

编辑

好的。我不想浪费我的时间，所以我接下来做了：

```
 public string TimeAdd
    {

        get
        {
            return _timeAdd.Substring(0, 16).Replace("-", " ").Replace("T", "  ") ;
        }

        set
        {
           _timeAdd = value;
        }
    } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-23T07:49:57.210

首先，您的 DataFormatString 需要一个 DateTime，但您传递的是一个字符串。我的建议是，您将类型更改为 DateTime，它本质上是一个日期时间，然后您的格式字符串应该可以工作。

# clickjacking - IE8中的clickJacking预防方法？

> ID：15781625
> 
> 赞同：2
> 
> 时间：2013-04-03T07:44:44.660
> 
> 标签：clickjacking

我们了解到的一个 Web 应用程序容易受到 clickJacking 问题的影响。我们使用的是 IE8。上网后我发现我们可以安装“No Script”，但看起来它与我们使用 IE8 时的 mozilla 更相关。即使它在 IE8 中是可能的，那么还有更好的选择吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-03T10:13:02.113

我找到了如下答案。

打开 IIS，右键单击“网站”并选择属性。2\. 选择 Http 标头选项卡。3\. 单击添加 4\. 将值指定为“x-frame-options”和“Deny”或 4.将值指定为“x-frame-options”和“SAMEORIGIN”。

![在此处输入图像描述](https://i.stack.imgur.com/qBQvz.jpg)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2014-10-15T20:25:34.513

正确的点击劫持防御是一个两管齐下的方法：

在服务器上，由于我们的是 Apache Web Server，因此您在 Apache Web Server 的 httpd.conf 文件 **X-Frame-Options 中添加以下行：DENY**

然后在我们的jsp中使用一些javascript代码：

```
<style id="antiClickjack">body{display:none !important;}</style>
<script type="text/javascript">
   if (self === top) {
       var antiClickjack = document.getElementById("antiClickjack");
       antiClickjack.parentNode.removeChild(antiClickjack);
   } else {
       top.location = self.location;
   }
</script> 
```

我从这个链接得到了代码：[OWASP Clickjacking Defense Cheat Sheet](https://www.owasp.org/index.php/Clickjacking_Defense_Cheat_Sheet)

我将它用于之前/之后，以确保问题确实得到了解决。 [OWASP 如何测试点击劫持](https://www.owasp.org/index.php/Testing_for_Clickjacking_%28OTG-CLIENT-009%29)

# c# - C#：一个属性用于多个声明 (DLLImport)

> ID：15781627
> 
> 赞同：9
> 
> 时间：2013-04-03T07:44:51.070
> 
> 标签：c#, attributes, dllimport

我正在使用该`[DLLImport]`属性来访问我的 .NET 代码中的一堆 C++ 函数。目前，我通过以下方式拥有所有功能：

```
const string DLL_Path = "path\\to\\my\\dll.dll";

[DllImport(DLL_Path, 
    CallingConvention = CallingConvention.StdCall, 
    CharSet = CharSet.Ansi)] 
public static extern int MyFunction1();

[DllImport(DLL_Path, 
    CallingConvention = CallingConvention.StdCall, 
    CharSet = CharSet.Ansi)]
public static extern ErrorCode MyFunction2(int id);

[DllImport(DLL_Path, 
    CallingConvention = CallingConvention.StdCall, 
    CharSet = CharSet.Ansi)]
public static extern ErrorCode MyFunction3(string server, byte timeout, 
    ref int connection_id, ref DeviceInfo pInfos);

[DllImport(DLL_Path, 
    CallingConvention = CallingConvention.StdCall,
    CharSet = CharSet.Ansi)]
public static extern ErrorCode MyFunction4([MarshalAs(UnmanagedType.LPArray)] byte[] pVersion, 
    ref int psize);

[DllImport(DLL_Path, 
    CallingConvention = CallingConvention.StdCall, 
    CharSet = CharSet.Ansi)]
public static extern ErrorCode MyFunction5(int errorcode, 
    [MarshalAs(UnmanagedType.LPTStr)] string pmsg, ref int psize); 
```

这很不讨人喜欢：属性的重复似乎效率低下，并且破坏了函数原型的可读性。特别是因为我有 20 或 30 个函数要导入。

我想知道我是否可以在`[DllImport(DLL_Path, CallingConvention = CallingConvention.StdCall, CharSet = CharSet.Ansi)]`某个地方只使用一次并且更清楚地识别函数定义，比如这个伪代码：

```
const string DLL_Path = "path\\to\\my\\dll.dll";
// some code defining a section which tells that the next functions are DLLImport
[DllImport(DLL_Path, CallingConvention = CallingConvention.StdCall, CharSet = CharSet.Ansi)] 
{
    public static extern int MyFunction1();

    public static extern ErrorCode MyFunction2(int id);

    public static extern ErrorCode MyFunction3(string server, byte timeout, ref int connection_id, ref DeviceInfo pInfos);

    public static extern ErrorCode MyFunction4([MarshalAs(UnmanagedType.LPArray)] byte[] pVersion, ref int psize);

    public static extern ErrorCode MyFunction5(int errorcode, [MarshalAs(UnmanagedType.LPTStr)] string pmsg, ref int psize);
} 
```

这可能吗？
我在 SO 中发现了这个问题：[Shorten amount of DllImport in C#?](https://stackoverflow.com/questions/15328712/shorten-amount-of-dllimport-in-c) 但它建议通过`LoadLibrary`and动态加载函数`GetProcAddress`，我发现它的可读性较差。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-04-03T07:50:43.137

不，没有办法将属性减少为单个声明。您需要将 Attribute 应用于所有方法。

但是您至少可以将 Attribute 声明缩短为`[DllImport(DLL_Path)]`，因为您指定的值[`CallingConvention`](http://msdn.microsoft.com/en-us/library/system.runtime.interopservices.dllimportattribute.callingconvention.aspx)和[`CharSet`](http://msdn.microsoft.com/en-us/library/system.runtime.interopservices.dllimportattribute.charset.aspx)与默认值相同。

# c# - 日期时间解析精确

> ID：15781628
> 
> 赞同：-1
> 
> 时间：2013-04-03T07:44:53.467
> 
> 标签：c#, parsing, datetime, datetime-format

我正在尝试将日期格式从更改`"4/01/2013 0:00:00"`为`"01/4/2013 00:00:00"`.

```
DateTime.ParseExact(fromDate.ToString(), "m/dd/yy HH:mm:ss", CultureInfo.InvariantCulture).ToString("dd/mm/yy HH:mm:ss"); 
```

但是我得到

> *“字符串未被识别为有效的日期时间。”*

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-04-03T07:45:39.767

您的年份部分是`yy`，但应该是`yyyy`因为您使用的是 4 位数年份。此外，小写`m`代表分钟，而不是月份——如果是大写的话`M`。你的代码应该是这样的：

```
string fromDate = "4/01/2013 0:00:00";
DateTime dt = DateTime.ParseExact(fromDate, "M/dd/yyyy H:mm:ss", CultureInfo.InvariantCulture);
string formattedDate = dt.ToString("dd/M/yyyy HH:mm:ss"); 
```

你正在做的`fromDate.ToString()`，如果`fromDate`已经是一个你不必调用的字符串`ToString`，如果它是一个日期类型，那么你不必解析它，而是你可以直接格式化它。

# decimal - 只删除小数位而不是逗号

> ID：15781630
> 
> 赞同：0
> 
> 时间：2013-04-03T07:44:54.953
> 
> 标签：decimal, rounding

请我有 123,788.98，我想在存储到 dbase 之前删除小数位，以便只有 123,789。我尝试了 round(123,789.98) 但它只给了我 123。

请问如何在不删除逗号的情况下删除小数位？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-03T07:58:36.100

用逗号分隔，这是两个数字。123 和 788.98。所以只需 round(788.98) 并将它们都插入一行。

```
INSERT INTO table(row) VALUES ('123,'.round(788.98).'') 
```

如果您有逗号，则可以从表单输入创建两个变量：

```
list($one, $two) = explode(",", "S_POST['amount']", 2); 
```

# email - 从 Laravel 4 发送邮件时使用子视图

> ID：15781633
> 
> 赞同：1
> 
> 时间：2013-04-03T07:45:01.263
> 
> 标签：email, laravel, subview, laravel-4

从 Laravel 4 发送邮件时，有没有办法使用嵌套视图？

你这样发送邮件：

```
Mail::send('emails.welcome', $data, function($m)
{
    $m->to('foo@example.com', 'John Smith')->subject('Welcome!');
}); 
```

然后你创建一个像这样的子视图：

```
$view = View::make('greeting')->nest('child', 'child.view', $data); 
```

所以你会认为你可以像这样将一个视图传递给发送邮件方法：

```
$view = View::make('emails.welcome')->nest('child', 'child.view', $data);
Mail::send($view, $data, function($m)
{
    $m->to('foo@example.com', 'John Smith')->subject('Welcome!');
}); 
```

但是从邮件类来看，发送方法的第一个参数似乎需要是一个字符串，并且它基于它为您组成视图。谁能想到解决这个问题的方法？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-11T12:14:47.973

将子视图作为数据传递给主视图怎么样？这对你来说几乎是什么`nest()`......

```
$child = View::make('child.view', $data);
$data['child'] = $child;
Mail::send('emails.welcome', $data, function($m) use ($user)
{
    $m->to($user->email, $user->name)->subject('Welcome!');
}); 
```

# android - 如何在 android 中生成 Google API 密钥

> ID：15781635
> 
> 赞同：1
> 
> 时间：2013-04-03T07:45:04.160
> 
> 标签：android, google-maps-api-3

我是 android 新手，我对如何为地图生成 Google API 密钥有疑问，我尝试了很多步骤，但对我来说没有任何结果。如果您有任何想法，请建议我。

谢谢你。

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2015-01-28T20:18:11.947

尝试完成[Google Maps API 文档](https://developers.google.com/maps/documentation/javascript/tutorial#api_key)中的步骤。

# ios - 崩溃 UIScrollView EXC_BAD_ACCESS

> ID：15781637
> 
> 赞同：2
> 
> 时间：2013-04-03T07:45:04.940
> 
> 标签：ios, cocoa, uiscrollview, uikit, exc-bad-access

我无法使用 UIScrollView 诊断崩溃

```
UIKit
-[UIScrollView setContentOffset:] 
```

异常类型：`EXC_BAD_ACCESS`0xe0000008`KERN_INVALID_ADDRESS`处的代码

```
com.apple.main-thread Crashed
0    libobjc.A.dylib     objc_msgSend + 15
1    UIKit   -[UIScrollView setContentOffset:] + 618
2    UIKit   -[UITableView setContentOffset:] + 330
3    UIKit   -[UIScrollView(Static) _adjustContentOffsetIfNecessary] + 1474
4    UIKit   -[UIScrollView(UIScrollViewInternal) _stopScrollingNotify:pin:tramplingDragFlags:] + 414
5    UIKit   -[UIScrollView(UIScrollViewInternal) _stopScrollingNotify:pin:] + 30
6    UIKit   -[UIScrollView removeFromSuperview] + 30
7 ...    UIKit   -[UIView dealloc] + 296
8    UIKit   -[UIView dealloc] + 296
9    libobjc.A.dylib     (anonymous namespace)::AutoreleasePoolPage::pop(void*) + 168
10   CoreFoundation  _CFAutoreleasePoolPop + 16
11   CoreFoundation  __CFRunLoopRun + 1296
12   CoreFoundation  CFRunLoopRunSpecific + 356
13   CoreFoundation  CFRunLoopRunInMode + 104
14   GraphicsServices    GSEventRunModal + 74
15   UIKit   UIApplicationMain + 1120
16   iTV Shows  main.m line 12 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2014-10-09T21:52:17.947

我有同样的问题。在方法中将`TableView`and`ScrollView`委托（或您可能拥有的任何其他委托）设置为 nil`dealloc`解决了这个问题。

```
- (void)dealloc {
    self.tableView.delegate = nil;
    self.tableView.dataSource = nil;
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-03T08:14:51.793

不看代码就很难给出具体答案，但[iOS Debugging Magic](http://developer.apple.com/library/ios/#technotes/tn2239/_index.html)技术说明始终是一个很好的资源，其中包含调试崩溃的提示。

> [技术说明 TN2239：iOS 调试魔法](http://developer.apple.com/library/ios/#technotes/tn2239/_index.html)

# c# - 在C#中合并两个EmailMessage

> ID：15781642
> 
> 赞同：1
> 
> 时间：2013-04-03T07:45:19.003
> 
> 标签：c#, email, system.net.mail

合并两个 EmailMessage 的正确方法是什么？我试过以下：

```
mergedMessage.Body.Text = message1.Body.Text + message2.Body.Text 
```

但它在合并的消息中创建了两个 html 标签，这是不正确的。

我应该解析`message1.Body.Text`and`message2.Body.Text`并获取 html 的内容并复制到`mergedMessage`?

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-03T07:51:36.183

您可以使用 System.Text.RegularExpressions 执行此操作；

```
const string HTML_TAG_PATTERN = "<.*?>";

static string StripHTML (this string inputString)
{
   return Regex.Replace 
     (inputString, HTML_TAG_PATTERN, string.Empty);
}

mergedMessage.Body.Text = message1.Body.Text.StripHTML()  + message2.Body.Text.StripHTML() 
```

# iphone - 将 NSString 从一种方法传递到另一种方法

> ID：15781656
> 
> 赞同：-1
> 
> 时间：2013-04-03T07:45:51.373
> 
> 标签：iphone, objective-c, nsstring

我遇到了一些新手问题。

我得到了这种方法来根据 GPS 坐标确定 iPhone 所在的邮政编码。反向地理编码。我的方法有效，我知道这一点，因为将正确的邮政编码写到标签上没有问题。

但我需要将此邮政编码存储在一个字符串中，以便在我用来编写 SMS 的方法中使用该字符串。

任何人都可以帮助我吗？

告诉我是否需要源代码！（只是目前没有坐在我的工作补偿上）

显然我被误解了，应该发布 som 代码。

```
- (void)locationManager:(CLLocationManager *)manager didUpdateToLocation:(CLLocation *)newLocation fromLocation:(CLLocation *)oldLocation
{
    NSLog(@"didUpdateToLocation: %@", newLocation);
    CLLocation *currentLocation = newLocation;

    // Reverse Geocoding
    NSLog(@"Resolving the Address");
    [geocoder reverseGeocodeLocation:currentLocation completionHandler:^(NSArray *placemarks, NSError *error) {
        NSLog(@"Found placemarks: %@, error: %@", placemarks, error);
        if (error == nil && [placemarks count] > 0) {
            placemark = [placemarks lastObject];
            **postalCode** = [NSString stringWithFormat:@"%@",
                            placemark.postalCode];
        } else {
            NSLog(@"%@", error.debugDescription);
        }
    } ];

} 
```

在这里，我尝试将邮政编码保存在名为 postalCode 的 NSString 中（以“**”突出显示）

我尝试在短信作曲家中再次加载它

```
-(void)displaySMSComposerSheet
{
    CLLocation *currentLocation;

    // Reverse Geocoding
    NSLog(@"Resolving the Address");
    [geocoder reverseGeocodeLocation:currentLocation completionHandler:^(NSArray *placemarks, NSError *error) {
        NSLog(@"Found placemarks: %@, error: %@", placemarks, error);
        if (error == nil && [placemarks count] > 0) {
            placemark = [placemarks lastObject];
            postalCode = [NSString stringWithFormat:@"%@",
                          placemark.postalCode];
        } else {
            NSLog(@"%@", error.debugDescription);
        }
    } ];

    MFMessageComposeViewController *picker = [[MFMessageComposeViewController alloc] init];
    picker.recipients = [NSArray arrayWithObjects:@"1220", nil];
    picker.body = [NSString stringWithFormat:@"Dog %@", (placemark.)postalCode];
    picker.messageComposeDelegate = self;

    [self presentModalViewController:picker animated:YES];

} 
```

仅在 SMS 窗口中打印： Dog (null) 我确定我有坐标，它们会在输出中打印出来。

希望这有助于更好地理解这个问题

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-03T08:04:10.070

```
#import <CoreLocation/CoreLocation.h>

@interface SomeController : UIViewController <CLLocationManagerDelegate>
@property (strong,nonatomic) CLLocationManager *locationManager;
@end

@implementation SomeController

-(void) trackUpdates
{    
    self.locationManager = [CLLocationManager new];
    self.locationManager.delegate = self;
    self.locationManager.desiredAccuracy = kCLLocationAccuracyNearestTenMeters;
    self.locationManager.distanceFilter = 10.0f;
    if ([CLLocationManager locationServicesEnabled]){
        [self.locationManager startUpdatingLocation];
    }
}

- (void)locationManager:(CLLocationManager *)manager 
     didUpdateLocations:(NSArray *)locations 
{
    CLGeocoder* gcrev = [[CLGeocoder alloc] init];
    [gcrev reverseGeocodeLocation:[locations lastObject] 
                completionHandler:^(NSArray *placemarks, NSError *error)
     {
         CLPlacemark* revMark = [placemarks objectAtIndex:0];
         NSString *zip = [revMark.addressDictionary objectForKey:@"ZIP"];
         NSLog(@"%@",zip);
         // ... do something with the zip, store in an ivar, call a method, etc.
     }];
}

-(void)viewDidLoad {
    [super viewDidLoad];
    [self trackUpdates];
}

@end 
```

# c# - 在客户端中使用 HandlerAttribute 而不引用 Unity 但使用自己的框架

> ID：15781657
> 
> 赞同：1
> 
> 时间：2013-04-03T07:45:55.897
> 
> 标签：c#, unity-container

我们正在构建一个使用 PolicyInjection 来执行某些任务的框架。我们为此使用属性。此代码是在单独的框架解决方案中编写的。

Out CallHandler 可能如下所示：

```
[AttributeUsage(AttributeTargets.Class | AttributeTargets.Property | AttributeTargets.Method)]
public class MyCallHandlerAttribute : HandlerAttribute
{
    ...
} 
```

在 Unity 中，我们有：

```
namespace Microsoft.Practices.Unity.InterceptionExtension
{
    public abstract class HandlerAttribute : Attribute
    {
        ...
    }
} 
```

在客户端解决方案中，我们有一个使用 Unity 注册的调用处理程序 (MyCallHandler)。要在调用处理程序中执行代码，我们需要在模型的类/方法/属性上方添加属性：

```
[MyCallHandler(params[])]
public class MyModel : IMyModel
{
    ...
} 
```

现在的问题是，要使用 MyCallHandler，我们需要对 PolicyInjection DLL 的引用，以便编译器了解 HandlerAttribute 是一个属性。如果没有引用，我们会得到*“MyCallHandler”不是属性类*警告（编译时出错）。

**我们如何以这种方式实现这一点，而不需要在我们的客户端解决方案中引用 Unity DLL，而只需要我们的框架 DLL？**

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-16T08:31:07.167

行。因此，经过一些研究并找到类似但更简单的示例后，我得出的结论是，除非您在项目中包含大量（如果不是全部）Unity 代码，否则这是不可行的。

我所做的尝试是创建自己的策略注入行为，它只查找`MyCallHandler`属性而不是任何`HandlerAttribute`. 这意味着我可以让`MyCallHandlerAttribute`implementation`Attribute`而不是`HandlerAttribute`. 所以`MyModel`知道这`MyCallHandlerAttribute`是一个属性。

这就像一个魅力，但现在的问题是`MyModel`不知道是什么`ICallHandler`。同样，这是一个 Unity 定义的接口。`IUnityContainer`对于其他几件事（以及诸如此类），这可能会继续。

如果有人感兴趣，我可以提供我所做的代码示例。

# http - 使用 C# 从 url 获取 HTTP 响应

> ID：15781659
> 
> 赞同：5
> 
> 时间：2013-04-03T07:46:03.943
> 
> 标签：http, c#-4.0, get, httpwebrequest, httpwebresponse

环境：使用 C# 的 ASP.Net MVC 4

`/inbound/faxes/{id}/image` 我需要通过对使用以下代码的 URL 的 GET 请求来获取图像

```
HttpWebRequest request = (HttpWebRequest)WebRequest.Create("/inbound/faxes/238991717/image");
HttpWebResponse response = (HttpWebResponse)request.GetResponse();

System.IO.StreamReader stream = new StreamReader(response.GetResponseStream()); 
```

但它标记“URL 无效”

我使用了完整的网址`www.interfax.net/inbound/faxes/{id}/image`

但结果是一样的

我想按照这篇文章接收传真

[通过回拨接受传入的传真通知](http://www.interfax.net/en/dev/rest/dev-guide/2985)

谁能帮我取传真...？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-08-29T16:01:09.233

试试这样：

```
using (var client = new WebClient())
{
    byte[] imageData = client.DownloadData("http://www.interfax.net/inbound/faxes/{id}/image");
} 
```

请注意 url 如何以协议为前缀（在本例中为 HTTP）。还要确保您已将`{id}`url 的部分替换为您尝试检索的图像的实际 id。

# sql - SQL Azure - 瞬态“ExecuteReader 需要打开的连接”异常

> ID：15781667
> 
> 赞同：0
> 
> 时间：2013-04-03T07:46:47.980
> 
> 标签：sql, azure, ado.net

我在作为云服务运行的 Windows Azure 应用程序中使用 SQL Azure。大多数情况下，我的数据库操作完全正常（也就是说，在处理了各种超时之后），但是我遇到了一个似乎

```
 using (var connection = new SqlConnection(m_connectionString))
        {
            m_ConnectionRetryPolicy.ExecuteAction(() => connection.Open());
            using (var command = connection.CreateCommand())
            {
                command.CommandText = "SELECT * FROM X WHERE Y = Z";
                var reader = m_CommandRetryPolicy.ExecuteAction(() => command.ExecuteReader());
                return LoadData(reader).FirstOrDefault();
            }
        } 
```

失败的行是 Command.ExecuteReader 与：

```
ExecuteReader requires an open and available Connection. The connection's current state is closed 
```

我已经考虑过的事情

*   我不是“重用”旧连接或保存连接是成员变量
*   不应该存在并发问题 - 这些方法所属的存储库类在每次需要时创建

有没有其他人经历过这个？我当然可以将其添加到会产生重试的异常列表中，但我对此不太满意

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-03T07:56:22.453

把所有的东西都写在 try and catch 中，最后阻塞。

如下：

```
try
{
con.open();
m_ConnectionRetryPolicy.ExecuteAction(() => connection.Open());
            using (var command = connection.CreateCommand())
            {
                command.CommandText = "SELECT * FROM X WHERE Y = Z";
                var reader = m_CommandRetryPolicy.ExecuteAction(() => command.ExecuteReader());
                return LoadData(reader).FirstOrDefault();
            }
con.close();
}
catch(exception ex)
{
}
finally
{
 con.close();
} 
```

记得在 finally 块中关闭连接。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-03T08:14:17.200

MS 专门为 SQL Azure 制作了一个企业库，这里有一些来自他们的模式和实践的例子。

它与您正在做的事情相似，但是它在可靠性方面做得更多（这些示例显示了如何获得可靠的连接）

[http://msdn.microsoft.com/en-us/library/hh680899(v=pandp.50).aspx](http://msdn.microsoft.com/en-us/library/hh680899(v=pandp.50).aspx)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-03T08:17:52.310

几天前（西欧）我在生产部署中遇到了一堆这样的错误，但它们自己消失了。同时，我看到了 SQL Azure 的超时、限制和其他错误。我假设平台（或者至少是我正在运行的服务器）存在临时问题。

您可能没有在代码中做错任何事情，但在 SQL Azure 上性能下降。尝试并处理错误、执行重试、指数回退、队列（以减少并发性）、跨数据库分配负载——诸如此类。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-07-12T19:34:17.647

您确定是阅读器失败而不是打开连接吗？当我`connection.Open()`将`m_ConnectionRetryPolicy.ExecuteAction()`.

但是，如果我跳过 ExecuteAction 包装器并使用`connection.OpenWithRetry(m_ConnectionRetryPolicy)`.

而且我也在使用`command.ExecuteReaderWithRetry(m_ConnectionRetryPolicy)`哪个对我有用。

我不知道为什么它在包裹在 ExecuteAction 中时不起作用。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2015-11-17T01:58:23.033

我相信这意味着 Azure 已经在幕后关闭了连接，而没有告诉连接池。这是设计使然。因此，连接池为您提供了它认为可用的、打开的连接，但是当您尝试使用它时，它发现它根本没有打开。

这对我来说似乎很笨拙，但这是 Azure 目前的方式。

# jquery - 在 MVC3 中验证客户端的下拉列表和列表框

> ID：15781669
> 
> 赞同：0
> 
> 时间：2013-04-03T07:46:49.823
> 
> 标签：jquery, asp.net-mvc-3, razor

我想验证客户端的下拉列表和列表框。

//模型

```
 public class NewStreamViewModel
    {
        public NewStreamViewModel()
        {
            this.Subjects = new List<SelectListItem>();
            this.Languages = new List<SelectListItem>();
        }

        [Display(Name = "Language")]
        [Required(ErrorMessage = "{0} is Required")]
        public int LanguageId {get;set;}

        [Display(Name = "Subject")]
        [Required(ErrorMessage = "{0} is Required")]
        public int[] SubjectIds {get;set;}

        public List<SelectListItem> Languages {get;set;}
       public List<SelectListItem> Subjects {get;set;}

    } 
```

//看法

```
<div id="tab1">
    <table style="background: none; width: 100%;">
        <tr>
            <td>
                Language
            </td>
            <td>
                @Html.DropDownListFor(m=>m.LanguageId,Model.Languages)
                @Html.ValidationMessageFor(m=>m.LanguageId)
            </td>
        </tr>
        <tr>
            <td>Stream
            </td>
            <td>
                @Html.DropDownListFor(m => m.StreamId, Model.Streams)
            </td>
        </tr>
        <tr>
            <td>Subjects
            </td>
            <td>
                @Html.ListBoxFor(m => m.SubjectIds, Model.Subjects, 
                    new { Style = "width:300px;" })
                @Html.ValidationMessageFor(m=>m.SubjectIds)
            </td>
        </tr>

    </table>
    <input type="button" id="addspan">
</div>   
<script type="text/javascript" src="~/Scripts/jquery-1.7.1.min.js"></script>
<script src="@Url.Content("~/Scripts/jquery.validate.min.js")" 
    type="text/javascript"></script>
<script src="@Url.Content("~/Scripts/jquery.validate.unobtrusive.min.js")"
    type="text/javascript"></script>

<script type="text/javascript">
    $(function () {
        $('#addspan').click(function () {
            var $step = $('#tab1');
            var validator = $("form").validate(); // obtain validator
            var anyError = false;
            $step.find('select').each(function () {
                // validate every input element inside this step
                if (!validator.element(this)) { 
                    anyError = true;
                }
            })
</script> 
```

我使用了不显眼的验证，但它仍然对我不起作用，我如何验证客户端的下拉列表和列表框？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-03T07:53:41.033

我的第一个猜测是 jquery 的脚本标签不行。像下面的标签一样改变它：

```
<script type="text/javascript" src="@Url.Content("~/Scripts/jquery-1.7.1.min.js")"></script> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-04T15:12:10.487

您可以执行以下操作：

```
$('#addspan').click(function () {
        if($('#dropDownID1').val() != 0 && $('#dropDownID2').val() != 0)
//do something
else alert("Please complete required fileds");
        }) 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-03T08:00:51.380

使用 hack 在下拉列表中应用验证

```
@Html.DropDownListFor(m => m.DetailsData.TypeSelected, new SelectList(Model.Types, "Value", "Key"), "- Choose Offer Type -", new { @class = "" })
 @Html.TextBoxFor(m => m.DetailsData.TypeSelected, new { @style = "visibility : hidden" })
@Html.ValidationMessageFor(m => m.DetailsData.TypeSelected, null, new { @class ="validation_arrow shift_arrow" })
@Html.ValidationMessageFor(m => m.DetailsData.TypeSelected) 
```

# report - 为什么在 ax 2012 X++ 中为报表使用菜单项时出现“菜单函数对象未初始化”错误？

> ID：15781670
> 
> 赞同：3
> 
> 时间：2013-04-03T07:46:51.547
> 
> 标签：report, axapta, x++, dynamics-ax-2012

我们正在从 AX2009 转换为 AX2012 R2（2013 年 1 月 15 日版）。我们正在将旧报告转换为 AX2012 R2 中的“已弃用”报告功能，以节省重新开发我们自己的所有报告的时间。该过程一直很好，但我收到此错误：某些报告上的“菜单功能对象未初始化”。如果我直接运行这些报告，它们就可以正常工作。其他报告适用于菜单项。

任何关于如何克服这个问题的想法或建议将不胜感激。我看不出有效报告和无效报告之间的结构、使用的方法、属性等之间没有真正的区别。

请记住，这些报告都不是 SSRS。在数据结构发生变化的地方，我通过在报告中编写方法来克服这些变化。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-03T11:02:08.107

验证菜单项是否指向有效报告。

# android - Paypal 定期付款 - Android

> ID：15781674
> 
> 赞同：0
> 
> 时间：2013-04-03T07:46:57.603
> 
> 标签：android, paypal, paypal-subscriptions, recurring-billing

我需要在 Android 应用程序中添加 Paypal 定期付款选项。是否可以使用 Paypal Android MECL 或 MPL SDK？

我用谷歌搜索并找不到任何解决方案。任何帮助，将不胜感激。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-05T05:09:11.763

来自 Developer@paypal.com 的回复

我们没有特定的定期付款 Android SDK，但您可以使用 Mobile Express Checkout 来实现该功能。请参阅[此页面](https://www.x.com/developers/paypal/products/mobile-overview)了解更多信息。[如果您还有其他问题，请与我们的技术支持团队](https://www.paypal.com/dts)一起创建票证，以获得有关此问题的帮助。

# ajax - 从 url 解析 JSON 数据

> ID：15781676
> 
> 赞同：0
> 
> 时间：2013-04-03T07:47:02.967
> 
> 标签：ajax, json, parsing, getjson

我有以下格式的 JSON 数据：

```
parent: {
       child: {
             sample:[
                     {
                      key:value,
                      key:value,
                     }
                     {
                      key:value,
                      key:value,
                     }
                     {
                      key:value,
                      key:value,
                     }
                    ] 
                 }
            } 
```

我应该如何使用 jquery 解析这些数据？使用 $ ajax 或 getJSON？哪种方法更可取？请帮忙

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-03T07:53:40.963

如果您只需要 json 数据，您可以使用 getJSON。但是两者都是等效的，因为 getJSON 是 $.ajax.More 的简写，您可以阅读： [Difference between $.getJSON() and $.ajax() in jQuery](https://stackoverflow.com/questions/1076013/difference-between-getjson-and-ajax-in-jquery#) In my script ：

```
$.getJSON('test.php',{ val:"test" }, function (data) {
     $.each(data, function (i, v) {
               //do your work here with each value returned from server side.
     });
}); 
```

在我的 test.php 文件中：

```
if($_SERVER["REQUEST_METHOD"]=="GET"&&$_REQUEST['val']=="test")
{
    header("Content-type: application/json");
    $a1 = array(  'answer1' => 'a', 'score1'=>3, 'answer2' => 'b', 'score2'=>5);
    echo json_encode($a1);
    die();
} 
```

您将收到一个包含：{"answer":"a","score":3,"answer1":"b","score1":5} 的对象

**如果您正在使用 aspx 页面，那么您必须使用 $.ajax，因为内容标头有一个选项必须是“application/json”否则 asp.net 将拒绝该请求**

例子：

```
 $.ajax({
            url: "Demo.aspx/Demo_Method",
            contentType: "application/json; charset=UTF-8",
            dataType: "JSON",
            type: "GET",
            success: function (response) {
                alert('Success' + response);
            }
        }); 
```

在我的 aspx 页面中：

```
 [WebMethod()]
    [System.Web.Script.Services.ScriptMethod(UseHttpGet = true)] 
    public static string Demo_Method()
    {
        return "test";
    } 
```

正如您在问题中提到的那样。您的数据似乎不正确。正确的 Json 格式应该是这样的：

```
 parent: { 
     child: { 
          sample: [
                   { key: "1", value: "value1" }, 
                   { key: "2", value: "value2" }, 
                   { key: "3", value: "value3" }
                  ]
            }
         } 
```

如果您收到上述格式的回复，那么您可以像这样简单地访问：

```
 var response= { parent: { child: { sample: [{ key: "1", value: "value1" }, { key: "2", value: "value2" }, { key: 3, value: "value3"}]}} };

 var samples_arr=response.parent.child.sample;  //create a sample Array.

 $.each(samples_arr,function(){
      alert(v.key+" and "+ v.value); // access here your each element
 }); 
```

# iphone - 在 iphone 中解析推送通知

> ID：15781679
> 
> 赞同：2
> 
> 时间：2013-04-03T07:47:08.950
> 
> 标签：iphone, ios, xcode, cocos2d-iphone, parse-platform

在 iOS 项目中集成[解析](https://www.parse.com/)推送通知。不工作。

这是我的代码：

```
#ifdef ENABLE_PARSE_PUSH
#import "Parse/Parse.h"
#endif

//in appDelegate didFinishLaunchingWithOptions

#ifdef ENABLE_PARSE_PUSH

    // Obtain the installation object for the current device

    [Parse setApplicationId:PARSE_APP_ID clientKey:PARSE_APP_SIGNATURE];

    PFInstallation *myInstallation = [PFInstallation currentInstallation];

    // Save some data
    [myInstallation setObject:@"YES" forKey:@"scoreUpdates"];

    // Save or Create installation object
    [myInstallation saveInBackground];

    [application registerForRemoteNotificationTypes:
     UIRemoteNotificationTypeBadge |
     UIRemoteNotificationTypeAlert |
     UIRemoteNotificationTypeSound];
#endif

#ifdef ENABLE_PARSE_PUSH
- (void)application:(UIApplication *)application
didRegisterForRemoteNotificationsWithDeviceToken:(NSData *)newDeviceToken
{
    [PFPush storeDeviceToken:newDeviceToken]; // Send parse the device token
    // Subscribe this user to the broadcast channel, ""
    [PFPush subscribeToChannelInBackground:@"" block:^(BOOL succeeded, NSError *error) {
        if (succeeded)
        {
            //#ifdef DEBUG
            //NSLog(@"Successfully subscribed to the broadcast channel.");
            //#endif
        }
        else
        {
            //#ifdef DEBUG
            //NSLog(@"Failed to subscribe to the broadcast channel.");
            //#endif
        }
    }];
}

- (void)application:(UIApplication *)application
didReceiveRemoteNotification:(NSDictionary *)userInfo {
    [PFPush handlePush:userInfo];
}

#endif 
```

这是一篇[类似的帖子](https://stackoverflow.com/questions/15260273/parse-push-notification-ios)，对我没有帮助..尝试了所有建议的解决方案。怎么了..已经在 parse.com 中上传了开发推送 SSL。帮助我获得解决方案。

现在来自 parse.com 的测试推送消息未在设备中传递。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-03T10:00:22.367

嗨，你有没有尝试这个 Parse 一步一步教程 [https://www.parse.com/tutorials/ios-push-notifications](https://www.parse.com/tutorials/ios-push-notifications)

按照教程，如果你得到堆栈，你可以在这里发帖寻求帮助。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-11T06:23:01.883

好的 终于解决了这个问题。

• 我们需要在app id 部分配置push SLL 后创建新的配置文件。然后我们需要使用新的配置文件。

这解决了我的问题，现在从 Parse 获得测试推送消息。

# android - Android ImageView 动态宽高

> ID：15781680
> 
> 赞同：1
> 
> 时间：2013-04-03T07:47:09.017
> 
> 标签：android, android-layout, android-imageview

我有一个从 url 加载的图像水平列表。所以我有一个 ImageLoader，然后是一个适配器，然后是我的 Activity。我的 xml 布局如下所示：

**主布局.xml**

```
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:layout_width="match_parent"
    android:layout_height="match_parent"
    android:orientation="horizontal">

  <com.devsmart.android.ui.HorizontalListView
      android:id="@+id/hlist_view" 
      android:layout_width="match_parent" 
      android:layout_height="match_parent"
      android:overScrollMode="always" > 
  </com.devsmart.android.ui.HorizontalListView>

</LinearLayout> 
```

然后我的**list.xml**

```
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
android:layout_width="match_parent" 
android:layout_height="match_parent"
android:orientation="vertical"
android:translationY="200dp" > <!-- make this dynamic -->

    <FrameLayout 
        android:id="@+id/mainlayout" 
        android:layout_height="wrap_content" 
        android:layout_width="wrap_content" >

       <ImageView
        android:id="@+id/prof_pic"    
        android:clickable="true"
        android:adjustViewBounds="true"
        android:layout_width="360dp" 
        android:layout_height="360dp" />

    <ProgressBar
        android:id="@+id/img_progress"
        style="?android:attr/progressBarStyleLarge"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content" />
        </FrameLayout>      

    <TextView
        android:id="@+id/sname"
        android:layout_width="fill_parent"
        android:layout_height="wrap_content"
        android:textStyle="bold" />

    <TextView
        android:id="@+id/sdesc"
        android:layout_width="fill_parent"
        android:layout_height="wrap_content" />

</LinearLayout> 
```

使用这种布局，结果是图A。灰色虚线是imageView，我们实际上看不到它，只能看到那些图像（绿色框）。我想要实现的是图 B 中的那个。

![在此处输入图像描述](https://i.stack.imgur.com/8UWAe.png)

所以，为了解决这个问题，我尝试在我的 imageView 中添加

```
 <ImageView
                android:id="@+id/prof_pic"    
                android:clickable="true"
                android:adjustViewBounds="true"
                android:layout_width="wrap_content" 
                android:layout_height="wrap_content"
                android:maxWidth="360dp"
                android:maxHeight="360dp"
                android:minHeight="240dp"
                android:minWidth="240dp"
                 /> 
```

但是发生的事情是，当我打开应用程序时，我的图像列表看起来像图 A。但是当沿着图像滚动时，它调整到有点像图 B。但是当我滚动回第一个图像时，只有仅显示图像的第一个，或者有时，我的图像列表从我的第二个图像开始。这真是太疯狂了。

有什么方法可以在不破坏我的图像列表的情况下实现图 B，或者在应用程序启动时，它已经显示为图 B？

编辑：

这是我的适配器的样子：

```
public View getView(int position, View convertView, ViewGroup parent){
    ViewHolder holder = null;

    LayoutInflater inflater = (LayoutInflater) context.getSystemService(Activity.LAYOUT_INFLATER_SERVICE);

    if(convertView == null){
        convertView = inflater.inflate(R.layout.list_layout, null);
        holder = new ViewHolder();
        holder.txtShopName = (TextView) convertView.findViewById(R.id.shop_name);
        holder.txtDesc = (TextView) convertView.findViewById(R.id.desc);
        holder.imageView = (ImageView) convertView.findViewById(R.id.prof_pic);
        holder.progBar = (ProgressBar) convertView.findViewById(R.id.img_progress);

        convertView.setTag(holder);
    }else{
        holder = (ViewHolder) convertView.getTag();
    }

    imageLoader=new ImageLoader(context.getApplicationContext(), holder.progBar);

    SRowItem sItem = (SRowItem) getItem(position);

    holder.txtName.setText(sItem.getShopName());
    holder.txtDesc.setText(sItem.getShopDesc());
    imageLoader.DisplayImage(sItem.getImageUrl(), holder.imageView);

    return convertView;
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-03T08:04:32.693

尝试这样的事情：

```
LinearLayout.LayoutParams params = new LinearLayout.LayoutParams(width, height);

ImageView imageView = (ImageView) LayoutInflater.from(context).inflate(R.layout.image, null);
imageView.setLayoutParams(params); 
```

# opencv - opencv Mat_.at<_tp>。这是什么意思？

> ID：15781681
> 
> 赞同：1
> 
> 时间：2013-04-03T07:47:15.770
> 
> 标签：opencv, k-means

我无法理解`.at<_tp>`openCV 中的含义。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-03T08:04:47.383

[at](http://opencv.willowgarage.com/documentation/cpp/basic_structures.html#cv-mat-at)是[Mat](http://opencv.willowgarage.com/documentation/cpp/basic_structures.html#mat)类的一个方法，它返回对指定元素的引用。尖括号内的参数是矩阵的元素类型。

`H`例如，要将类型矩阵中位置 (1,2) 的元素设置`int`为`3`，您可以：

```
H.at<int>(1,2)=3; 
```

# objective-c - 如何将 NSString 作为 HTTP 发布请求发送到 python 服务器？

> ID：15781682
> 
> 赞同：2
> 
> 时间：2013-04-03T07:47:16.643
> 
> 标签：objective-c, python-2.7

我在我的 xcode 项目中遵循了这个[链接的教程](https://stackoverflow.com/questions/11261928/how-to-send-post-data-and-image-file-to-server-xcode)，但我需要它来为 python 服务器工作，该教程适用于 PHP 服务器......任何人都可以帮助我为我提供一个相关的 python 服务器。提前致谢！:)

# ios - 最佳方法：显示“这里什么都没有”屏幕而不是空的 tableView 单元格

> ID：15781684
> 
> 赞同：1
> 
> 时间：2013-04-03T07:47:20.103
> 
> 标签：ios, uitableview

打开 a`UITableViewController`时，我想显示一个屏幕说“这里还没有”（参见下面 Dropbox 应用程序的屏幕截图），而不是在没有部分/行时显示空行。这已经在多个应用程序中完成，但我想知道是否有推荐的方法来实现这一点。

![Dropbox：清空收藏夹选项卡](https://i.stack.imgur.com/i6eqC.png)

我可以想象有多种方法可以做到这一点，包括

*   将 a`UIView`作为 subView 添加到 tableViewController 的视图中
*   切换到 a`UIViewController`并自行实现 tableView 行为
*   设置`UIView`为`backgroundView`并隐藏 tableView 单元格

谢谢你的所有想法！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-03T07:54:24.127

我通常这样做的方式是在没有可显示的内容时显示单个自定义单元格。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2014-06-25T12:23:57.513

有一个名为[DZNEmptyDataSet](https://github.com/dzenbot/DZNEmptyDataSet)的新库（截至 2014 年 6 月）正好处理这种情况。它使用问题中描述的第一种方法（UIView 作为子视图）。非常整洁的实现。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-03T07:58:59.877

你必须有一些数据数组，通过它你可以在表格视图中定义一些东西。你只能在你的表格视图中使用它的委托方法来实现这一点。

```
- (NSInteger)tableView:(UITableView *)tableView numberOfRowsInSection:(NSInteger)section{
    if([dataArr count] == 0)
     return 1;
    return [dataArr count];
}

- (CGFloat)tableView:(UITableView *)tableView heightForRowAtIndexPath:(NSIndexPath *)indexPath{
      if([dataArr count]==0){
          return self.view.frame.size.height;

      }
  return 44.0;
} 
```

进而

```
- (UITableViewCell *)tableView:(UITableView *)tableView cellForRowAtIndexPath:(NSIndexPath *)indexPath{
     if([dataArr count]==0){
        //Create a cell with the no data image
        tableView.scrollEnabled=NO;
     }else{
         //Create your default cell with data..
         tableView.scrollEnabled=YES;
     }

   return nil;
} 
```

我只是给你一个想法，它是你使用它的选择..

# push-notification - 从主函数注册两个应用程序

> ID：15781685
> 
> 赞同：0
> 
> 时间：2013-04-03T07:47:25.033
> 
> 标签：push-notification, blackberry

我正在开发应用程序，我必须从主函数注册两个侦听器。在两个中，一个用于注册推送通知，另一个用于当通知到来时，将在通知栏上显示图标，单击我必须启动应用程序。我在代码中做错了，但不知道在哪里请帮助我。

```
public static void main(String[] args)
{
    // Create a new instance of the application and make the currently
    // running thread the application's event dispatch thread.
    //System.out.println("====main function===="+args[0]);
    System.out.println("====args.length==="+args.length);

    if(args.length > 0 && args[0].equals("BB_push") )
    {

        System.out.println("====IN IF====");

        theApp = new MyApp();       
        theApp.enterEventDispatcher();

    }else if(args.length == 1 && args[0].equals("gui"))
    {
        System.out.println("====IN 1 GUI===");
        // Create a GUI instance for displaying a DemoMessageScreen.
        // This will occur when this application is invoked by the
        // View Demo Message menu item.
        MyApp messageScreenApp = new MyApp();
        messageScreenApp.enterEventDispatcher();

    }
    else{

        MessageListDemoDaemon daemon = new MessageListDemoDaemon();

        // Register application indicator
        EncodedImage indicatorIcon = EncodedImage.getEncodedImageResource("img/indicator.png");
        ApplicationIcon applicationIcon = new ApplicationIcon(indicatorIcon);
        ApplicationIndicatorRegistry.getInstance().register(applicationIcon, false, false);
        ApplicationMessageFolderRegistry reg = ApplicationMessageFolderRegistry.getInstance();
        if(reg.getApplicationFolder(INBOX_FOLDER_ID) == null)
        {
            daemon.init();
        }
try
{
        daemon.enterEventDispatcher();
}catch (Exception e) 
{
System.out.println("======catch after daemnon even===="+e);

}

        // push notificationlistener===============
        BackgroundApplication backApp=new BackgroundApplication();
        register.registerBpas();
        backApp.setupBackgroundApplication();

        backApp.enterEventDispatcher();
    }

} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-04T07:04:01.250

试试这个 -

```
public static void main(String[] args)
{

   if(args != null && args.length > 0 && args[0].equals("gui"))
     {

       //Main Screen 

    }
    else if(args != null && args.length > 0 && args[0].equals("Background1")) {

       //First background application

    }else{

       //Second background application 

    } 
```

在您的**BlackBerry_App_Descriptor.xml** - **1.**应用程序 - 标记 - 启动时自动运行并且不在主屏幕上显示应用程序图标。 **2.**备用入口点 - **A)。**gui- 取消选中 - 启动时自动运行，并且不在主屏幕上显示应用程序图标。 **乙）。**Background1 - 标记 - 启动时自动运行，并且不在主屏幕上显示应用程序图标。

# android - 数组列表 安卓

> ID：15781686
> 
> 赞同：0
> 
> 时间：2013-04-03T07:47:29.737
> 
> 标签：android, arraylist

我使用 Jsoup 来获取肥皂内容的标签值。例如：

```
Document doc = Jsoup.parse(getxml);
Elements element1 = doc.select("codeSession");
code_session = element1.text(); 
```

其中getxml =`</soap><root><one></one><two></two><three></three></root><root><one></one><two></two><three></three></root></soap>`

我想将每个根元素详细信息存储到一个数组列表中，我该如何实现这一点。我现在在这两个小时。

```
public ArrayList<Post> PostList = new ArrayList<Post>(); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-03T08:38:58.337

这个代码片段应该做到这一点。

```
 String html = "<?xml version=\"1.0\" encoding=\"UTF-8\"></soap><root><one></one><two></two><three></three></root><root><one></one><two></two><three></three></root></soap>";
    Document doc = Jsoup.parse(html, "", Parser.xmlParser());
    List<Element> list = new ArrayList<Element>(); 
    for (Element e : doc.select("root")) 
    {
        System.out.println(e);
        list.add(e);
    } 
```

输出

```
<root>
<one></one>
<two></two>
<three></three>
</root>
<root>
<one></one>
 <two></two>
 <three></three>
</root> 
```

# c# - 返回作为参数传递的相同对象的方法

> ID：15781687
> 
> 赞同：9
> 
> 时间：2013-04-03T07:47:29.823
> 
> 标签：c#, oop, methods

将对象传递给方法，然后返回相同的对象而不是在方法本身内部创建新对象是否可以接受？

例如：如果有一个实体类如下：

```
class UserDetails {
    int UserID { get; set; }
    string UserName { get; set; }
    string UserAge { get; set; }
} 
```

然后我将这个类的一个实例传递给一个方法，如下所示：

```
UserDetails UserInfo = new UserDetails();
UserInfo = Get_Details(UserInfo); 
```

该方法执行以下操作是否合理？

```
public UserDetails Get_Details(UserDetails user) {
    // SQL Operations...
    user.age = 32;
    return user;
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-03T07:54:31.507

IMO，**无需返回 object**。由于**它是通过****引用**传递给方法的，因此调用者已经拥有对同一对象的引用（在方法完成后具有更新的值）。

另一方面，在某些情况下有用的是流式接口，其中类的实例方法再次返回实例，例如：

```
class X
{
  public X DoThis(int number)
  {
    // do something
    return this;
  }
  public X DoThat(string name)
  {
    // do something else
    return this;
  }
} 
```

这允许编写非常易读的代码，例如：

```
var x = new X().DoThis(23).DoThat("asdf"); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-03T07:51:17.017

[这对于构建器模式](https://en.wikipedia.org/wiki/Builder_pattern)很有用（当您想逐步构建复杂的对象时）。

作为一个非常糟糕的例子：

```
class FooBuilder {
  FooBuilder WithAge(int age);
  FooBuilder WithUrl(Url url);

  Foo ToFoo();
}

new FooBuilder().WithAge(12).WithUrl(new Url("http://www.happybirthday.com/").ToFoo(); 
```

在您的特定情况下，我更喜欢使用初始化语法一次性初始化所有内容。

```
new User { Age = 45, UserName = "Bob", Id = 101 }; 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-03T07:56:12.273

除了一些观察之外，这并没有什么可怕的错误；

*   您在一个名为的方法中设置细节`get`可能`load`更合适。
*   如果你只是`UserDetails`因为你想要你的 id 而传入，那么参数应该只是`id`。这样可以保持界面的凝聚力。
*   在方法中修改参数对象通常被认为是不好的形式，即变异原则。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-04-03T07:52:05.473

这是一种可能的方法，当您只有一个项目可以工作时，也是最好的。您也可以考虑使用`ref`，它创建对传递参数的引用

```
public void Get_Details(ref UserDetails user)
{
    // SQL Operations. . .
    user.age= 32;
} 
```

这样，您不会传递副本，而是引用您传入的对象。但这可能会变得非常晦涩，并且在您的情况下是不必要的。请参阅[此处](https://stackoverflow.com/questions/8209476/best-practice-ref-parameter-or-return-value#)以获取见解。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-04-04T12:42:28.530

您可以在实体的构造方法或实体类中的其他方法中填充实体。它将在创建时准备好使用。

```
public class SomeClass
{
    public string Field_1;
    public int Field_2;

    public SomeClass(int ID)
    {
        // Sql operations by ID or another value
        // set fields
    }

    public AnotherMethod(int ID)
    {
        // Sql operations by ID or another value
        // set fields
    }
} 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2013-04-03T07:53:48.527

您最好查看存储库模式和 OOD 的概念。一般来说，我更喜欢投影或满载实体。

```
public UserDetailsProjection GetDetailsByUserId(Guid userID)
{
   // Code goes here
   return user;
} 
```

注意： ref 不是必需的，因为所有对象都是通过引用传递的。

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2013-04-03T07:55:30.287

那样做是毫无意义的，因为你所做的任务不会改变任何事情。

像这样称呼它：

```
UserInfo = Get_Details(UserInfo); 
```

给出与调用它并忽略返回值相同的结果：

```
Get_Details(UserInfo); 
```

返回引用可能只会令人困惑，导致某人相信该方法返回一个新实例，因为这将是返回引用的唯一合乎逻辑的原因。

在类中使用该方法会更有意义，因此您将其称为：

```
UserInfo.Get_Details(); 
```

如果您的方法应该初始化对象，您宁愿将代码放在构造函数中，也不愿在创建实例后调用它：

```
class UserDetails {

  int UserID { get; set; }
  string UserName { get; set; }
  string UserAge { get; set; }

  public UserDetails() {
    Get_Details(this);
  }

} 
```

然后你只需要创建实例，构造函数就会加载数据：

```
UserDetails UserInfo = new UserDetails(); 
```

# objective-c - 如何使 UIButton 自动闪烁？

> ID：15781688
> 
> 赞同：1
> 
> 时间：2013-04-03T07:47:36.747
> 
> 标签：objective-c

嗨，我正在尝试使 uibutton 自动闪烁。我知道有一个功能“在突出显示时显示触摸”，当用户触摸时它会闪烁，但我需要我的按钮自动闪烁。有什么办法吗？谢谢！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-03T08:02:21.650

首先：**不要那样做！！！**

但是如果你这样做了，那么你可以设置计时器或使用`performSelector ...withDelay:`或类似的东西来触发图像的切换。

或者使按钮透明并将其布局在`UIImageView`. A`UIImageView`可以设置为一组图像，而不仅仅是单个图像，以及用于从阵列的一个图像交换到下一个图像的时间间隔。有关详细信息，请参阅文档。这是非常直截了当的。

# android - Android：每行一堆短文本；文字管理

> ID：15781691
> 
> 赞同：0
> 
> 时间：2013-04-03T07:47:44.033
> 
> 标签：android, text, textview

我有很多短文本要放在自己的行中，以便在 Android 的 TextView 中显示。

像这样：

名称：斯莫

年龄：100

年份：1099

等等

我现在在一个超过 50 行的简单文本编辑器中拥有它。

我的问题：我如何管理它以有效地编码和显示？我应该做很多体力劳动并为每个人添加“\r\n”并放入Strings.xml吗？

或者有没有办法可以把它放在一个 txt 文件中以便它有效地加载它的代码？

请提供煽动，我提前感谢您的帮助，请原谅我在 Android JAVA 方面最环保的东西。:)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-03T08:43:22.047

如果您只想加载静态文本，可以将文件放在资产目录中。然后您不必担心添加手动换行符。

通过这种方式获取资产的输入流：

```
is = mContext.getAssets().open("myfile.txt"); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-03T08:16:32.300

然后尝试使用表。就像是 ：

```
<TableView>
    <TableRow>
        <TextView> <!-- to display the label -->
        <TextView> <!-- to display the value -->
    </TableRow>
    <TableRow>
        <TextView> <!-- to display the label -->
        <TextView> <!-- to display the value -->
    </TableRow>
    <TableRow>
        <TextView> <!-- to display the label -->
        <TextView> <!-- to display the value -->
    </TableRow>
    .
    .
    .
<TableView> 
```

这些 tablerows 可以动态创建并添加到 tableView。

# android - 如何使用 scrollTo Android 创建动画

> ID：15781694
> 
> 赞同：2
> 
> 时间：2013-04-03T07:47:51.550
> 
> 标签：android, slider, android-animation, android-4.0-ice-cream-sandwich

是否有任何好的（或不太好的）解决方案来为 RelativeLayout.scrollTo(x,y) 方法设置动画？

我制作了一个相对布局，它可以向左/向右滚动模拟一些 gApps 菜单。左右拖动时滚动。现在我想要的是避免这个布局在它的中间，并且根据用户离开手指的位置，布局应该向左或向右移动，但我不能找到正确的解决方案...

任何帮助，将不胜感激。谢谢！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-03T11:08:11.850

最终我移到了RelativeLayout.setTranslationX(float value)。

那时，我遇到了 TranslateAnimation() 的问题，因为它有一个错误。由于我的 minSdkVersion > 11，我可以使用 ObjecAnimator，如下所示：

```
ObjectAnimator objAnim = ObjectAnimator.ofFloat(view, "translationX", TARGET_TRANSLATE);
objAnim.setDuration(200);
objAnim.start(); 
```

这是一个常见的问题，所以这里是一个答案 =)。

# c# - 在 asp:ListView 中嵌入视频

> ID：15781700
> 
> 赞同：0
> 
> 时间：2013-04-03T07:48:01.530
> 
> 标签：c#, asp.net

我有一个`Link`领域。像这样的样本值`Link`：`https://vimeo.com/62941191`

我想绑定并`Link`在`asp:ListView`其中显示视频。不知道怎么放视频。有人可以告诉我吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-03T07:58:27.200

使用链接按钮并在链接按钮 postbackurl 属性中设置您的网址

# extjs4 - 停止对动作列的双击动作

> ID：15781702
> 
> 赞同：1
> 
> 时间：2013-04-03T07:48:06.090
> 
> 标签：extjs4, extjs4.1

我在 extJS 4.1.1 中有一个网格面板。对于其他列，我有一个 actioncolumn(xtype:'actioncolumn')。我在该列中包含一个处理程序。当我单击它时，它可以正常工作并打开一个新窗口，其中加载了许多内容。但是当我双击该列时出现错误。提前欢迎任何帮助.......

```
{
        text            : 'Signature',
        menuDisabled    : true,
        sortable        : false,
        id              : 'signature',
        xtype           : 'actioncolumn',            
        width           : 60,            
        items           : [{
            icon        : "${resource(dir: 'images', file: 'ADD01003.png')}",
            tooltip     : 'Add Signature',
            scope       : this,
            handler     : function(grid, rowIndex, colIndex) {
                var records = grid.getStore().getAt(rowIndex).data,
                  fullName    = records.fullName,
                  nickName    = records.nickName,
                  salutation  = grid.getStore().getAt(rowIndex).raw.m00i012001.name,
                  searchValue = records.id ;

                  var filters    = new Array();
                  var store =Ext.data.StoreManager.lookup('S02X004001');
                  store.clearFilter(); 
                  filters.push({property:'member', value:searchValue});
                  store.loadPage(1, {
                      filters  : filters,
                      callback : function(records, options, success) {
                      var view = Ext.widget('v02x004001');
                      view.show();
                      Ext.getCmp('fullName-sv02x00400104').setValue(fullName);
                      Ext.getCmp('nickName-sv02x00400104').setValue(nickName);                      
                      Ext.getCmp('member-sv02x00400104').setValue(searchValue);
                      Ext.getCmp('salutation-sv02x00400104').setValue(salutation);
                      }
                  });
            }
        }]
    } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2015-11-24T19:17:59.520

不要复活任何僵尸，但对于在 ExtJS 4、5 或 6 中遇到相同问题的任何人，这种解决方法应该可以工作（可能需要稍微修改类名，粘贴的代码在 5.1.1 中被证明可以工作）。

诀窍是不要修改 actioncolumn，而是修复 itemdblclick 事件处理程序，可能会像这样：

```
listeners:
{
    itemdblclick: function(v, record, item, index, e)
    {
        var flyTarget = Ext.fly(e.target);
        if(flyTarget.hasCls('x-action-col-icon') || flyTarget.hasCls('x-grid-cell-inner-action-col'))
        {
            e.stopEvent();
            return;
        }
        //your code here
    }
} 
```

# c - 将 PPM 图像旋转 90 度

> ID：15781703
> 
> 赞同：0
> 
> 时间：2013-04-03T07:48:06.640
> 
> 标签：c, ppm

我正在尝试将 PPM 图像旋转 90 度。我目前能够将图像旋转 180 度。我不确定如何做到这一点。

我知道高度和宽度是交换的，但我不知道从那里去哪里。

```
void write_ppm_image(const char *filename, Image_ppm *img)
{
FILE *fp;
//open file for output
fp = fopen(filename, "wb");
if (!fp) {
    fprintf(stderr, "Unable to open file '%s'\n", filename);
    exit(1);
}

//write the header file
//image format
fprintf(fp, "P6\n");

//comments
fprintf(fp, "# Created by %s\n",CREATOR);

//image size
fprintf(fp, "%d %d\n",img->x,img->y);

// rgb component depth
fprintf(fp, "%d\n",RGB_COMPONENT_COLOR);

// pixel data
fwrite(img->data, 3 * img->x, img->y, fp);
fclose(fp);
}

 void rotatePPM(Image_ppm *img)
 {
int x = 0, y = 0;
int size = img->x*img->y;
int width = img->x;
int height = img->y;

if(img)
{

    for(i=0;i<size;i++)
    {
        int temp = img->data[i].red;
        int temp_one = img->data[i].green;
        int temp_two = img->data[i].blue;
        img->data[i].red = img->data[size].red;
        img->data[i].green = img->data[size].green;
        img->data[i].blue = img->data[size].blue;
        img->data[size].red = temp;
        img->data[size].green = temp_one;
        img->data[size].blue = temp_two;
        size--;
    }

}
 }

 int main()
 {
char  filename[256];
printf("Enter the name of a PPM image file: \n");
scanf("%s",filename);
Image_ppm *image;
image = read_ppm_image(filename);
rotatePPM(image);
write_ppm_image("can_bottom3.ppm",image);
printf("Press any key...");
getchar();
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-03T08:00:48.710

虽然我从未实现过任何旋转算法，但我认为首先在纸上实际执行它会有所帮助......

在方格纸上画一个长方形，每个正方形代表一个像素。用像素的坐标标记每个正方形。然后将纸旋转 90 度，绘制第二个同样大的矩形，再次用坐标标记每个“像素”。

现在，当您将纸张转回以使第一个矩形正常时，您可以轻松查看将像素放置在输出（第二个）矩形中的位置。

找到一个通用的算法应该不会太难。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-03T08:00:59.847

您的方法似乎非常痛苦，并且仅针对 PPM。

相反，您可以简单地使用 ImageMagick`mogrify`或[GraphicsMagick](http://www.graphicsmagick.org/mogrify.html) `gm mogrify`实用程序。`gm`您可以下载大小小于 2MB的静态编译版本的 GraphicsMagick 。

`gm`可以被认为是任何图像处理的“瑞士军刀”。除了让它变得简单之外，它不仅支持 PPM，而且支持几乎任何其他已知的图形格式，毫不费力。

# cuda - CUDA模型中硬件与程序的层次对应关系

> ID：15781705
> 
> 赞同：0
> 
> 时间：2013-04-03T07:48:23.103
> 
> 标签：cuda

以我目前的理解，CUDA模型的硬件层次是GPU卡->流式多处理器(SMs)->核心，程序层次是内核->网格->块->warp->单线程。我想知道硬件和程序层次结构之间的对应关系。也就是说，一个内核通常是由几个网格组成的吗？网格包含在 GPU 卡中还是 SM 中？如果GPU卡中包含网格，GPU卡可以只包含一个网格还是多个网格？块是否对应于短信？一个 SM 可以只包含一个块还是多个块？一个块可以跨越多个 SM 吗？一个核心可以只执行一个线程还是多个线程？等等

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-03T13:48:35.560

内核是在 GPU 上运行的函数。

网格是与内核启动相关的所有线程块。内核启动会创建一个网格。网格可以在整个 GPU 设备（GPU 中的所有 SM）上运行。网格由线程块组成。

线程块是线程组。为了执行目的，线程被分组为warp（32个线程），所以我们也可以说threadblocks是warp组。

线程块（它们包含的扭曲）在 SM 上执行。一旦线程块开始在特定 SM 上执行，它就会停留在该 SM 上并且不会迁移到另一个 SM。

SM 由内核组成。每个核心执行一个线程。核心执行引擎可能有能力一次处理多条指令，因此它实际上可以处理多个线程，但不能来自同一个warp。这部分变得复杂，对于初学者了解 GPU 的工作原理并不是很重要，因此考虑一个核心在任何给定时刻（指令周期）只处理一个线程是方便和有用的。

一个 SM 可以同时处理多个块。

请不要发布包含很多问题的问题。关于 SO 的问题应该显示一些研究工作。

对此类问题进行良好的研究工作需要从[nvidia 网络研讨会页面上](https://developer.nvidia.com/gpu-computing-webinars)进行一些基本的网络研讨会，这只需要几个小时的学习。

先试试这两个：

GPU Computing using CUDA C – An Introduction (2010) 介绍使用 CUDA C 进行 GPU 计算的基础知识。将通过代码示例的演练来说明概念。无需先前的 GPU 计算经验

GPU Computing using CUDA C – Advanced 1 (2010) 一级优化技术，例如全局内存优化和处理器利用率。将使用真实的代码示例来说明概念

# c++ - 如何使用 googletest 失败进入断点

> ID：15781710
> 
> 赞同：26
> 
> 时间：2013-04-03T07:48:46.417
> 
> 标签：c++, visual-studio, unit-testing, debugging, googletest

我最近使用命令行选项**gtest_break_on_failure**或通过定义**GTEST_BREAK_ON_FAILURE**环境变量从 googletest 中发现了**故障进入断点选项。**

 ****我尝试使用**gtest_break_on_failure**。从命令行，我没有看到任何效果（老实说，我看到希望 VS2010 会被注册为调试器，并且会以某种方式神奇地弹出并指向错误源）。

在 VS 环境中使用它作为命令行参数失败的断言触发了中断，但调用堆栈不包括导致失败的测试方法。我找到了步骤 (F10) 的工作，直到我到达我的测试代码，但这似乎并不方便。

**是否可以从命令行使用该选项？**

**有没有人建议如何在环境中获得正确的调用堆栈？**

* * *

## 回答 #1

> 赞同：38
> 
> 时间：2013-04-03T20:49:54.593

在 VS 中，您可以添加`--gtest_break_on_failure`到目标属性页中的 Command Args，然后只需运行 exe 而无需跨步。

![显示命令参数的属性页](https://i.stack.imgur.com/nlXpw.png)

从命令行，您应该能够运行带有标志的 Debug 可执行文件，`--gtest_break_on_failure --gtest_catch_exceptions=0`这应该允许您在测试失败时闯入 MSVC 调试器。****

# android - android:targetSdkVersion 在签署 apk 并将其上传到 Google Play 后发生变化

> ID：15781714
> 
> 赞同：0
> 
> 时间：2013-04-03T07:48:51.733
> 
> 标签：android, menu, android-actionbar, google-play, sign

我有一个应用程序`android:targetSdkVersion="4"`。这是因为它是一个“旧”应用程序，并且因为要在**下面**的导航栏中获取 MENU s/w 按钮。不能在上面。在测试过程中一切都很好，但是在签署 apk 并将其上传到 Google Play 后，我下载了它，并且 MENU 按钮位于操作栏的顶部 - 顺便说一下，操作栏不是我自己的操作栏，它被一个默认的操作栏（不同的颜色、大小）取代。目标 sdk 版本似乎发生了变化……怎么会发生这种情况？

编辑：我在 android 版本 4.2 上测试它

# drupal - 向特定内容类型内容创建中的电子邮件字段发送电子邮件

> ID：15781716
> 
> 赞同：0
> 
> 时间：2013-04-03T07:49:02.327
> 
> 标签：drupal, drupal-7

我正在使用 Drupal 7。在创建的特定内容类型内容中，我不知道如何将邮件发送到电子邮件字段。例如，有人创建内容并在该内容中填写电子邮件字段，然后网站应向该电子邮件字段发送电子邮件通知。是否可以？我研究了规则，但使用规则基本功能无法做到这一点。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-03T14:15:06.020

如果我是对的，如果创建了新内容，您想发送电子邮件吗？我没有“规则”的经验，但您可以为此构建自己的自定义模块。您只需要挂钩您可能需要的所有事件。

例如： hook_insert：响应新节点的创建

这需要对 Drupal 模块系统有基本的了解。

Hooks 的完整列表：[http](http://api.drupal.org/api/drupal/includes!module.inc/group/hooks/7) ://api.drupal.org/api/drupal/includes!module.inc/group/hooks/7 模块开发者指南：[http ://drupal.org/developing/modules](http://drupal.org/developing/modules)

问候。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-04T10:52:07.027

我确信这可以使用规则来完成，您只需要在规则操作中使用替换模式，所有字段值都可用，例如节点标题的 [node:title] 和正文的 [node:body]对于节点，类似地，您的电子邮件字段必须有一些可用的东西，您只需将该替换字符串放在规则操作中的“To value”中。希望能帮助到你。

# jsf - 禁用 ViewExpiredException 的日志记录

> ID：15781717
> 
> 赞同：2
> 
> 时间：2013-04-03T07:49:04.250
> 
> 标签：jsf

ViewExpriedException 始终记录在服务器日志文件中。

```
2013-02-23 10:24:10,165 ERROR [org.apache.catalina.core.ContainerBase.[jboss.web].[localhost].[/proshop].[FacesServlet]] 14-dac@172.19.15.65 (ajp-0.0.0.0-8009-6) Servlet.service() for servlet FacesServlet threw exception: javax.faces.application.ViewExpiredException: viewId:/index.jsf - La vue «/index.jsf» n?a pas pu être restaurée. 
```

如何避免记录此异常

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-03T13:41:05.357

你不应该避免登录`ViewExpiredException`，你应该处理它。

关于这个主题的一个很好的链接是：[在 JSF2 中优雅地处理 ViewExpiredException](https://web.archive.org/web/20140926062323/http://weblogs.java.net/blog/edburns/archive/2009/09/03/dealing-gracefully-viewexpiredexception-jsf2)。

# php - 更改网址经纬度

> ID：15781723
> 
> 赞同：0
> 
> 时间：2013-04-03T07:49:29.580
> 
> 标签：php, javascript, url

我有一个 URL：-[链接](http://services.gisgraphy.com/geoloc/search?lat=43.00034713745117&lng=-75.4999008178711&radius=7000)
我想更改 lat 和 lng 值
我有一个代码来从 IP 地址获取区域名称和纬度和经度值
这是我的代码：-

```
<html xmlns="http://www.w3.org/1999/xhtml">
    <head>
        <link rel="stylesheet" href="index.css">
        <script type="text/javascript" src="http://j.maxmind.com/app/geoip.js" ></script>
        <script src="http://ajax.googleapis.com/ajax/libs/jquery/1.8.3/jquery.min.js"></script>
        <script>
                function load(){
                var region= geoip_city();
                var lan=geoip_latitude();
                var lng=geoip_longitude()
                    $('div').html(region)
                    alert(lan);
                    alert(lng);
                    }
        </script>
    <body onload="load()">
        <div></div>
    </body>
    </head>
</html> 
```

使用此代码，我可以提醒一个纬度和经度值。
我想用这个 lat 和 lng 值更改我给定的 url 链接。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-03T08:10:45.993

您可以使用 javascript 重定向到您的网页。

```
window.location.replace('http://services.gisgraphy.com/geoloc/search?lat='+lan+'&lng='+lng+'&radius=7000'); 
```

或者：

```
window.location.href = 'http://services.gisgraphy.com/geoloc/search?lat='+lan+'&lng='+lng+'&radius=7000'; 
```

**更新：**

或者，就像 Amit 所说，使用该 vars 进行 AJAX 调用

# java - 单击保存或提交按钮时，光标应自动出现丢失的文本字段

> ID：15781734
> 
> 赞同：2
> 
> 时间：2013-04-03T07:50:33.457
> 
> 标签：java, android

```
if(productItem.ProductName.equals(""))
{
Toast.makeText(getApplicationContext(), "Please Enter the Product Name...",
                        Toast.LENGTH_LONG).show();

                ((InputMethodManager) MainFormActivity.this
                        .getSystemService(Context.INPUT_METHOD_SERVICE))
                        .showSoftInput(pName, 0);
            } 
```

这段代码对我不起作用，我想每次点击保存按钮时都应该验证缺失的字段，如果缺少的光标应该出现在缺失的字段中。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-03T08:02:26.560

我在这里可能错了，但`productItem.ProductName`在我看来，它就像一个具有您创建的属性的类。如果要检查 an 中的文本，`EditText`则应将 if 语句更改为以下内容：

```
EditText txt = (EditText)findViewById(R.Id.textID);
if(txt.GetText().Equals("")){
  //do something
{ 
```

这样，您将`EditText`在单击按钮时检查布局中的 是否为空。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-03T08:02:30.930

试试这个验证它会将编辑文本上的红色气球显示为空白 if(edittext.lenth()<=0) edittext.setError(error msg);

# ibm-mobilefirst - Worklight 5.0.6 Dojo 代码迁移

> ID：15781735
> 
> 赞同：0
> 
> 时间：2013-04-03T07:50:36.253
> 
> 标签：ibm-mobilefirst

我在 worklight 5.0.5 上开发了一个简单的应用程序，它工作正常，但在更新到 5.0.6 版本后我遇到了一些问题。当我启动应用程序时，dojo 的库没有与我的应用程序集成。有人可以帮我解决这个问题吗？谢谢，

它给了我以下错误

```
Uncaught TypeError: Object function klass() {
this.initialize.apply(this, arguments);
} has no method 'setConnected' 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-03T10:13:01.720

有关升级时代码迁移的详细信息，请参阅 Worklight 5.0.6 信息中心：http: [//pic.dhe.ibm.com/infocenter/wrklight/v5r0m6/topic/com.ibm.worklight.help.doc/devenv/r_migrating_to_a_newer_version_of_ibm_worklight。 html](http://pic.dhe.ibm.com/infocenter/wrklight/v5r0m6/topic/com.ibm.worklight.help.doc/devenv/r_migrating_to_a_newer_version_of_ibm_worklight.html)

> 如果您使用早期版本的 IBM Worklight Studio 创建了当前项目，除了升级 Dojo 工具包之外，还可以考虑将代码迁移到新的 Dojo 模块加载技术。它确保代码执行更可靠，并确保页面在 RPE 中进行进一步更改时继续工作。
> 
> 具体来说，Dojo 层不再从 HTML 元素加载，而是通过 wlCommonInit() 方法内的 require() 调用加载。各个模块是从 dojoInit() 方法中的 require() 调用加载的。

以下是特定 Dojo 1.8.3 代码更改的链接：http: [//pic.dhe.ibm.com/infocenter/wrklight/v5r0m6/topic/com.ibm.worklight.help.doc/devenv/t_dojo_183_code_migration.html](http://pic.dhe.ibm.com/infocenter/wrklight/v5r0m6/topic/com.ibm.worklight.help.doc/devenv/t_dojo_183_code_migration.html)

# java - 如何使用 Log4j 为每个用户创建单独的日志

> ID：15781736
> 
> 赞同：0
> 
> 时间：2013-04-03T07:50:37.817
> 
> 标签：java, logging, log4j

我们正在使用 Log4j 创建应用程序日志，并将其附加到一个文件中，该文件的路径在其 logger-config 文件中提供。

我们正在为每个登录系统的用户创建日志。而这个系统在生产和应用中的用户在300-500之间同时登录。好吧，这种基于用户的日志记录将是基于规则的，并且仅适用于特定用户（用于监视任何错误/异常）

目前我只想知道如何使用 Log4j 和 JAVA 为每个用户创建单独的文件日志。

此外，我想知道是否还有其他提供此类选项的 API？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-03T08:05:08.717

在独立的 java 程序/fat-client 中，如果每个用户使用不同的 os-user name 运行应用程序，您可以在 log4j.properties 中使用“${user.name}”变量。

```
log_path=./
log_foldername=logs/
log_prefix=logfileprefix_${user.name}_logfilesuffix

log4j.appender.LogDebug=org.apache.log4j.RollingFileAppender
log4j.appender.LogDebug.File=${log_path}${log_foldername}${log_prefix}_LogDebug.txt
log4j.appender.LogDebug.MaxFileSize=5000KB
log4j.appender.LogDebug.MaxBackupIndex=2
log4j.appender.LogDebug.layout=org.apache.log4j.PatternLayout
log4j.appender.LogDebug.layout.ConversionPattern=[%-20t]-[%d] %-5p %c.%M():%L - %m%n
log4j.appender.LogDebug.threshold=debug 
```

# java - Iterable 接口是否有关于多次使用的官方合同？

> ID：15781739
> 
> 赞同：15
> 
> 时间：2013-04-03T07:50:43.160
> 
> 标签：java, iterable

从 Java 5 开始，我们有了[`java.lang.Iterable`](http://docs.oracle.com/javase/7/docs/api/java/lang/Iterable.html)可以在 foreach 循环中使用的新类型：

```
for (Object element : iterable); 
```

[`Iterable`](http://docs.oracle.com/javase/7/docs/api/java/lang/Iterable.html)合约没有指定[`iterator()`](http://docs.oracle.com/javase/7/docs/api/java/lang/Iterable.html#iterator%28%29)在处理 Iterable 之前是否可以多次调用它的方法。即，尚不清楚以下内容是否适用于所有人`Iterables`：

```
for (Object element : iterable);
for (Object element : iterable); 
```

例如，一个`Iterator`包装实现不能被使用两次：

```
public class OneShotIterable<T> implements Iterable<T> {
    private final Iterator<T> it;

    public OneShotIterable(Iterator<T> it) {
        this.it = it;
    }

    @Override
    public Iterator<T> iterator() {
        return it;
    }
} 
```

对于大多数人来说`Iterables`，这无关紧要，因为它们实际上是经过改造的 Collection API 类型，例如`List`, `Set`，它们的`iterator()`方法已经有了明确定义的契约。

我的问题是：我的`OneShotIterable`实施是否违反了我忽略的某些合同？换句话说，用户会`Iterable`期望它是可重用的吗？如果是这样，Java 5 专家组是否有“官方”建议如何处理这种“一次性” （例如在第二次调用时`Iterables`抛出）？`IllegalStateException`

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2013-04-03T08:03:55.073

我可以在标准库中找到的一个先例是[`DirectoryStream`](http://docs.oracle.com/javase/7/docs/api/java/nio/file/DirectoryStream.html)接口。

它的 Javadoc 包含以下段落（强调他们的）：

> **虽然`DirectoryStream`extends `Iterable`，它不是通用的`Iterable`，因为它只支持一个`Iterator`; 调用该`iterator`方法以获取第二个或后续迭代器 throws `IllegalStateException`。**

对我来说，这表明了两件事：

*   隐含的合同[`Iterable`](http://docs.oracle.com/javase/7/docs/api/java/lang/Iterable.html)是您应该能够多次迭代（甚至可能同时进行！）
*   文档中的**粗体**警告加上抛出[`IllegalStateException`](http://docs.oracle.com/javase/7/docs/api/java/lang/IllegalStateException.html)可能是处理您自己的类/接口中不合规的最佳方法。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-03T08:01:47.667

不是我的问题的真正答案，但 Apache Commons Collections 在其`IteratorUtils`课程中解决了这个问题：

*   [`IteratorUtils.asIterable(Iterator)`](https://commons.apache.org/proper/commons-collections/apidocs/org/apache/commons/collections4/IteratorUtils.html#asIterable-java.util.Iterator-)
*   [`IteratorUtils.asMultipleUseIterable(Iterator)`](https://commons.apache.org/proper/commons-collections/apidocs/org/apache/commons/collections4/IteratorUtils.html#asMultipleUseIterable-java.util.Iterator-)

`IteratorIterable`两者都是该类型的工厂方法。上述区别清楚地表明，在包装时必须`Iterators`小心`Iterables`。

# android - 在 Android 中解析 URL 字符串时获取 NULL 值

> ID：15781743
> 
> 赞同：1
> 
> 时间：2013-04-03T07:50:53.400
> 
> 标签：android, string, parsing, url, referrer

我在下面的循环中获取 URL 字符串

```
 referrer = intent.getStringExtra("referrer"); 
```

以下是日志

```
action: 'com.android.vending.INSTALL_REFERRER' referrer string: 'utm_source=tooyoou&utm_medium=banner&utm_term=foursquare&utm_content=foursquare-tooyoou&utm_campaign=foursquare' 
```

我想解析这个 URL 字符串并得到下面的字符串 "utm_source" "utm_medium" "utm_term" "utm_content" "utm_campaign"

我尝试了下面的代码，但得到了 null

```
Uri referrerUri = Uri.parse(referrer);
String utmsource= referrerUri.getQueryParameter("utm_source");
String utmmedium= referrerUri.getQueryParameter("utm_medium");
String utmterm= referrerUri.getQueryParameter("utm_term");
String utmcontent= referrerUri.getQueryParameter("utm_content");
String utmcampaign= referrerUri.getQueryParameter("utm_campaign");

Log.d("utmsource===" , utmsource);
Log.d("utmmedium===" , utmmedium);
Log.d("utmterm===" , utmterm);
Log.d("utmcontent===" , utmcontent);
Log.d("utmcampaign===" , utmcampaign); 
```

可能是什么问题呢 ？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-03T07:54:10.900

你可以用`split`..

```
String[] referrerList = referrer.split('&');
String utmsource= referrerList[0].substring(referrerList[0].indexOf("=") + 1);
String utmmedium= referrerList[1].substring(referrerList[1].indexOf("=") + 1);
String utmterm= referrerList[2].substring(referrerList[2].indexOf("=") + 1);
.... 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-04-03T07:59:50.983

您可以执行类似的操作，而不是将其解析`String`为`URI`.

```
String[] uriTokens = referrer.split("&");
for(int i=0;i<uriTokens.length;i++){
    String[] valTokens = uriTokens[i].split("=");
    switch(valTokens[0]){
    case "utm_source":
        utmsource = valTokens[1];
        break;
    case "utm_medium":
        utmmedium = valTokens[1];
        break;
    case "utm_term":
        utmterm = valTokens[1];
        break;
    case "utm_content":
        utmcontent = valTokens[1];
        break;
    case "utm_campaign":
        utmcampaign = valTokens[1];
        break;
    }
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-07-28T08:12:23.287

或与番石榴：

```
private static final String REFERRER = "referrer";
private static final String EQUALS = "%3D";
private static final String AMPERSAND = "%26";

Map<String, String> map = Splitter.on(AMPERSAND).withKeyValueSeparator(EQUALS)
            .split(intent.getStringExtra(REFERRER)); 
```

# clearcase - 在 Linux 上更新 clarcase 快照视图时出错

> ID：15781749
> 
> 赞同：1
> 
> 时间：2013-04-03T07:51:22.337
> 
> 标签：clearcase

我在 linux 上有一个快照视图并尝试对其进行更新，但我遇到了这样的错误。

cleartool：无法访问“/vobs/myvob/myfolderinvob”：数据库超时

有没有人可以建议做什么。

Clearcase 7.1.2，Kubuntu 12.10 x86_64

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-03T08:05:31.160

由于锁定管理器问题（在 Vob 服务器端），可能会出现该特定错误消息。
从[这个文档](http://www.ibm.com/developerworks/rational/library/content/RationalEdge/jul02/TheRationalEdge200207Issue.pdf)：

> 锁管理器管理来自任何需要访问 VOB 数据库的进程的锁请求。
> 其实只有两种：
> 
> *   `db_server`,
> *   `vobrpc_server`,
> 
> `lockmgr`无论服务器上有多少 VOB，每个 VOB 服务器只有一个进程。
> 并且锁管理器在启动时定义了各种限制，通过命令行或通过文件表（`-f`参数）、用户表（`-u`参数）或队列表（`-q`参数）的注册表值。
> 
> *   该`-f`参数间接决定了系统上任何时候可以访问多少个VOB。
>     VOB 数据库在 VOB 存储区 db 子目录中各有 7 个文件（3 个数据文件和 4 个关键文件）。
>     256个文件的默认`-f`值意味着一个服务器上可以有36个VOB（256除以7）而无需修改。
>     如果您在服务器上有超过 36 个 VOB 并且您没有修改它，您可能会遇到问题，例如在等待锁定时最终用户响应不佳，以及日志文件中出现各种错误消息。
>     尝试增加`-f`参数以增加`lockmgr`过程。文件表的大小没有实际限制，但我们建议您将该值设置为系统上将拥有的 VOB 数量的 7 倍。
>     
>     
> *   该参数确定可以从锁管理器请求锁的最大进程数`-u`。 同样，默认值为 256。 通常，每个活动的客户端 ClearCase 命令只有一个活动进程。无论系统上有多少 VOB，此参数实质上限制了并发 ClearCase 活动的数量。同样，如果参数设置得太低，您将看到糟糕的最终用户响应和“锁定管理器正忙”错误。 `db_server``vobrpc_server`
>     
>     `db_server``-u`
>     
>     
> *   该`-q`参数决定了锁管理器在任何时候可以将多少个锁请求排队。默认值为 1024。同样，如果此参数设置得太低
>     ，您将在日志文件中看到糟糕的最终用户响应和“ ”消息。 为了解决这个问题，我们建议您将参数增加到最大参数值的五倍（尽管实际上没有上限），因为该进程通常会在一次请求中请求锁定五个数据库文件。**`database timed out`**
>     `-q``-u``db_server`

有关如何调整这些值的更多信息，请参阅“[**关于锁管理器的管理员指南补充**](http://www-01.ibm.com/support/docview.wss?uid=swg21125258)”。

对于 Unix Vob 服务器：

> 现在可以通过使用名为**`vob_almd_params`**.
> 
> 注意：虽然可以设置每个 VOB 的 almd 参数，但我们建议您只使用`/opt/rational/clearcase/config/vob/db`.
> 
> *   服务器范围的**`vob_almd_params`**配置文件位于`/opt/rational/clearcase/config/vob/db`目录中，并控制主机上所有 VOB 的设置。
> *   **`vob_almd_params`**单个 VOB db 目录 ( ) 中的文件`<vob-storage-dir>/db/vob_almd_params`将修改该单个 VOB 的设置，而不是主机上的所有 VOB。
> 
> 注意：参数值可以低于以前版本中使用的值。
> 
> 文件中使用的语法**`vob_almd_params`**：

```
–u num –q num 
```

# php - OpenEMR 和 HL7

> ID：15781750
> 
> 赞同：1
> 
> 时间：2013-04-03T07:51:22.810
> 
> 标签：php, joomla, hl7, emr

我对 EMR 和 HL7 非常陌生。

我有单独的 Joomla CMS 和 OpenEMR 安装。我需要我的 JoomlaCMS 将 HL7 消息发送到 OpenEMR 并通过 Internet 在 HL7 中接收响应。

我不知道从哪里开始，有没有办法做到这一点。

**我的其他问题：** 是否有任何在线 EMR 服务接收和发送 HL7 消息？PHP 可以创建和解析 HL7 消息吗？因为我看到[https://github.com/pear/Net_HL7](https://github.com/pear/Net_HL7)只创建 hl7 消息而不解析它。

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2013-09-13T13:36:30.687

尝试使用 Mirth Connect 接口引擎来转换 hl7 消息。

# python - Django Python 服务器处理时间太长

> ID：15781757
> 
> 赞同：0
> 
> 时间：2013-04-03T07:51:51.870
> 
> 标签：python, django

cpu处理时间过长的原因可能是什么？

```
Debug Toolbar Results:
CPU: 3568.22ms (25360.93ms)
SQL: 27 queries in 132.51ms 
```

当我尝试 ping 我们的服务器时，结果是**0.994 毫秒**

此问题并非一直出现，有时一小时后一切恢复正常。

这是处理请求的视图：

```
def pes_to_list(request):
    v = 0
    val = {}
    val['gridlist'] = PesKgmTo.objects.all()
    return render_to_response('to/tolist.html',{'y':v,'page':val},context_instance=RequestContext(request)) 
```

# listview - Sencha Touch2：带有布局 vbox 的 Container 内的列表和详细信息面板

> ID：15781763
> 
> 赞同：0
> 
> 时间：2013-04-03T07:52:28.653
> 
> 标签：listview, extjs, sencha-touch, sencha-touch-2

嗨，我是 sencha touch2 的新手，在容器中，我在左侧显示列表，在右侧显示详细视图。现在想用列表的单击项文本显示详细布局。这是我的观点。

```
 Ext.define('TestApp.view.VboxEx',{
    extend:'Ext.Container',
    xtype:'vbox_ex',
    requires:['Ext.dataview.List'],
    config:{
        layout:{
          type:'hbox'
        },
        items:[
        {
            docked:'top',
            xtype:'titlebar',
            title:'Vertical box'
         },

            {
                xtype: 'list',
                id: 'mylist',
                flex:1,
                docked: 'left',
                style:'background-color:lightgreen',
                store: 'Training_data',
                pinHeaders: false,
                width: 331,
                itemTpl: [
                    '{name}'
                ]

             },

            {
                xtype:'component', 
                flex:3,
                id: 'myDetail',
                html:'Flex3',
                style:'background-color:lightyellow'
            }

        ]

    }

}); 
```

这是我的控制器：

```
Ext.define('TestApp.controller.MyController', {
    extend: 'Ext.app.Controller',
    config:{
        refs: {
            listView: '#mylist'
             },

        control: {
            'listView': {
                 itemtap: 'onItemTap'
            }

        }
    },

    onItemTap: function(view, index, target, record, event) {
        console.log('Item was tapped on the Data View');
        var record = view.getStore().getAt(index);
        var selectdValue = record.get('name');
        console.log('Selceted Item index: '+index);
        console.log('Selceted Item value: '+selectdValue);
        // here how can i change the text(selected value) in my detail panel ? 
    },

    onLaunch: function () {
        console.log('onLaunch');
    }
}); 
```

我怎样才能做到这一点？谁能帮帮我吗 ？谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-03T09:45:55.263

首先在控制器中添加新的参考 -

```
refs:{
 listView: '#mylist',
 detailsPanel : '#myDetail'
} 
```

这将为您`getter`提供 sencha touch 提供的现成产品，包括以下内容 -

```
var panel =  this.getDetailsPanel(); 
```

然后将您的`onItemTap`方法更改为以下 -

```
onItemTap: function(view, index, target, record, event) {
        console.log('Item was tapped on the Data View');      
        var selectdValue = record.get('name');
        console.log('Selceted Item index: '+index);
        console.log('Selceted Item value: '+selectdValue);
        // here how can i change the text(selected value) in my detail panel ? 

       this.getDetailsPanel().setData(record.getData());
    }, 
```

这将为您的`myDetails`组件设置数据。

仔细看，我已经从这个方法中删除了一行 -

```
var record = view.getStore().getAt(index); 
```

您已经拥有`record`了方法论点所需的一切`onItemTap`。因此，您可能不需要再次从商店获取它。

*最重要* 的是，要使其正常工作，您需要添加`template`到您的组件中。喜欢以下

```
 {
            xtype:'component',
            flex:3,
            id: 'myDetail',
            style:'background-color:lightyellow',
            tpl: "<h2>{name}</h2>"
        } 
```

这里`{name}`将显示从控制器传递的值。

这肯定会奏效。尝试一下。作为旁注，不要使用**面板**`component`来显示详细信息。组件更通用。所以你可以改用面板。

# php - zf2如何上传文件，多于1个文件

> ID：15781771
> 
> 赞同：3
> 
> 时间：2013-04-03T07:52:56.373
> 
> 标签：php, file-upload, file-io, zend-framework2

我参考[http://samsonasik.wordpress.com/2012/08/31/zend-framework-2-creating-upload-form-file-validation/](http://samsonasik.wordpress.com/2012/08/31/zend-framework-2-creating-upload-form-file-validation/)并按照这个，我可以通过使用重命名过滤器成功上传1个文件ZF2。

但是，当我使用这种方式上传 2 个文件时，它就出错了。我粘贴我的代码如下：

```
$this->add(array(
'name' => 'bigpicture',
'attributes' => array(
    'type' => 'file'
    ),
    'options' => array(
        'label' => 'Big Pic'
    )
));
$this->add(array(
'name' => 'smallpicture',
'attributes' => array(
    'type' => 'file'
    ),
'options' => array(
    'label' => 'Small Pic'
    )
));

<div class="row"><?php echo $this->formRow($form->get('smallpicture')) ?></div>
<div class="row"><?php echo $this->formRow($form->get('bigpicture')) ?></div>

$data = array_merge(
  $request->getPost()->toArray(),
  $request->getFiles()->toArray()
);

$form->setData($data);
if ($form->isValid()) {
  $product->exchangeArray($form->getData());
  $picid = $this->getProductTable()->saveProduct($product);
  $pathstr = $this->md5path($picid);
  $this->folder('public/images/product/'.$pathstr);
  //move_uploaded_file($data['smallpicture']['tmp_name'], 'public/images/product/'.$pathstr.'/'.$picid.'_small.jpg');
//move_uploaded_file($data['bigpicture']['tmp_name'], 'public/images/product/'.$pathstr.'/'.$picid.'_big.jpg');
$fileadaptersmall = new \Zend\File\Transfer\Adapter\Http();
$fileadaptersmall->addFilter('File\Rename',array(
    'source' => $data['smallpicture']['tmp_name'],
    'target' => 'public/images/product/'.$pathstr.'/'.$picid.'_small.jpg',
    'overwrite' => true
));

$fileadaptersmall->receive();
$fileadapterbig = new \Zend\File\Transfer\Adapter\Http();
$fileadapterbig->addFilter('File\Rename',array(
    'source' => $data['bigpicture']['tmp_name'],
    'target' => 'public/images/product/'.$pathstr.'/'.$picid.'_big.jpg',
    'overwrite' => true
));
$fileadapterbig->receive();
} 
```

以上是形式，观点，行动。使用这种方式，只有小图上传成功。大局出了问题。警告闪烁如下：

> 警告：move_uploaded_file(C:\WINDOWS\TMP\small.jpg):failed to open stream:Invalid argument in E:\myproject\vendor\zendframework\zendframework\library\zend\file\transfer\adapter\http.php 在线173
> 
> 警告：move_uploaded_file():Unable to move 'C:\WINDOWS\TMP\php76.tmp' to 'C:\WINDOWS\TEMP\big.jpg' in E:\myproject\vendor\zendframework\zendframework\library\zend\第 173 行的文件\传输\适配器\http.php

谁能告诉我如何以这种方式上传多个文件。你知道的，重命名过滤方式和上面类似。谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-04T07:37:21.000

我在一个网站上遇到了同样的问题。解决方案是通过获取所有图像然后单步执行它们来在控制器本身中进行重命名。

```
if ($file->isUploaded()) {
            $pInfo = pathinfo($file->getFileName());
            $time = uniqid();
            $newName = $pName . '-' . $type . '-' . $time . '.' . $pInfo['extension'];
            $file->addFilter('Rename', array('target' => $newName));
            $file->receive();
        } 
```

希望这有助于为您指明正确的方向。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-06-13T03:46:03.387

我遇到了同样的问题，我设法使用下面的代码使它工作；

```
$folder = 'YOUR DIR';        
$adapter = new \Zend\File\Transfer\Adapter\Http();
$adapter->setDestination($folder);
foreach ($adapter->getFileInfo() as $info) {
     $originalFileName = $info['name'];
     if ($adapter->receive($originalFileName)) {          
         $newFilePath = $folder . '/' . $newFileName;
         $adapter->addFilter('Rename', array('target' => $newFilePath,
             'overwrite' => true));
     }
 } 
```

# cmake - cmake 更改选项不会导致重新编译

> ID：15781772
> 
> 赞同：0
> 
> 时间：2013-04-03T07:52:58.310
> 
> 标签：cmake

我遇到了以下问题：

我有一个 CMakeLists.txt，包括以下行：

```
option(SCALAR_SINGLE_PRECISION "Use float as scalar" OFF) 
```

我希望当我切换选项（并在此之后配置和构建）时这会导致重新编译，但事实并非如此。我究竟做错了什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-03T08:09:31.867

我错过了该选项本身对编译没有影响。所以我需要补充：

option(SCALAR_SINGLE_PRECISION "使用浮点数作为标量" OFF) add_definitions( -DCALAR_SINGLE_PRECISION=${SCALAR_SINGLE_PRECISION} )

我不是 cmake 的专家，所以如果有人知道更好，请纠正我。

# iphone - 以编程方式从 UITabBarController 中选择选项卡并加载视图

> ID：15781777
> 
> 赞同：3
> 
> 时间：2013-04-03T07:53:28.323
> 
> 标签：iphone, uitabbarcontroller

我在加载所选选项卡项目的视图时遇到问题。

我在 的`viewDidLoad`第`UIViewController`1 项中使用下面的代码`UITabBar`。

```
UITabBarController *tab = self.tabBarController;

if (tab){
   NSLog(@"I have a tab bar");
   [self.tabBarController setSelectedIndex:1];
   [self.tabBarController.view setNeedsDisplay];
   self.tabBarController.selectedIndex=1;
} else {
    NSLog(@"I don't have");
} 
```

当我按下返回选项卡控制器按钮时，它会选择选项卡，但不会打开所需的视图。它显示索引 0 处的选项卡视图。

![在此处输入图像描述](https://i.stack.imgur.com/U29Du.png)

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-04-03T07:59:40.877

在 viewDidAppear: 方法中编写代码，而不是 view did load。它会工作..

# iphone - 如何删除 box2d 夹具

> ID：15781780
> 
> 赞同：0
> 
> 时间：2013-04-03T07:53:42.463
> 
> 标签：iphone, ios, xcode, cocos2d-iphone, box2d

我有一个方形屏障，它在运行时根据用户放置我的屏障的位置和旋转来定义边缘。

```
b2BodyDef barrierBodyDef;
barrierBodyDef.type = b2_staticBody;
barrierBodyDef.position.Set(curBarrier
                            .position.x/PTM_RATIO, curBarrier.position.y/PTM_RATIO);
barrierBodyDef.userData = curBarrier;

b2Body *barrierBody;
barrierBody = _world->CreateBody(&barrierBodyDef);

b2EdgeShape barrierEdge;
b2FixtureDef barrierShapeDef;
barrierShapeDef.shape = &barrierEdge;
barrierShapeDef.friction = 1.0f;

barrierEdge.Set(b2Vec2((x1)/PTM_RATIO, (y1)/PTM_RATIO),
                b2Vec2((x2)/PTM_RATIO, (y2)/PTM_RATIO));
barrierBody->CreateFixture(&barrierShapeDef);
barrierEdge.Set(b2Vec2((x2)/PTM_RATIO, (y2)/PTM_RATIO),
                b2Vec2((x3)/PTM_RATIO, (y3)/PTM_RATIO));
barrierBody->CreateFixture(&barrierShapeDef);
barrierEdge.Set(b2Vec2((x3)/PTM_RATIO, (y3)/PTM_RATIO),
                b2Vec2((x4)/PTM_RATIO, (y4)/PTM_RATIO));
barrierBody->CreateFixture(&barrierShapeDef);
barrierEdge.Set(b2Vec2((x4)/PTM_RATIO, (y4)/PTM_RATIO),
                b2Vec2((x1)/PTM_RATIO, (y1)/PTM_RATIO));
barrierBody->CreateFixture(&barrierShapeDef); 
```

我现在想删除这些边缘，以便用户可以重新定位障碍。

如何去除点 x1，y1，-> x4，y4 之间的边缘，以便它们免受碰撞。

我对 Box2D 有点陌生。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-03T09:00:19.907

创建夹具时保留夹具（例如，此处为本地变量，您应该使用 ivar）：

```
b2Fixture* barrierFixture = barrierBody->CreateFixture(&barrierShapeDef); 
```

然后销毁夹具：

```
barrierBody->DestroyFixture(barrierFixture);
barrierFixture = nil; 
```

您还可以使用 body`GetFixtureList()`来迭代固定装置。

您不能做的是从夹具中添加或删除形状，或修改形状的顶点。要从身体的形状中删除一个点，您必须破坏固定装置并用新的固定装置替换它。

没有必要重新创建整个身体，事实上这可能会出现问题，因为您可能想要保留身体的当前状态（不仅是位置，还包括线性和角速度，也许还有其他东西）。

# javascript - 递归扩展和合并javascript对象

> ID：15781787
> 
> 赞同：0
> 
> 时间：2013-04-03T07:54:07.017
> 
> 标签：javascript, merge, extend, javascript-objects

我已经编写了两种扩展和合并 javascript 对象的方法。这可能是个坏问题，但我不确定我做得对。你能看看代码并告诉我是否需要改进以及我是否做错了什么（代码乍一看就有效）

```
merge: function (a, b) {
    var copy = {};
    CL.extend(copy, a, [HTMLElement, Array]);
    CL.extend(copy, b, [HTMLElement, Array]);
    return copy;
},

extend: function extend(a, b, excludeInstances) {
    for (var prop in b)
        if (b.hasOwnProperty(prop)) {
            var isInstanceOfExcluded = false;
            if (excludeInstances)
                for (var i = 0; i < excludeInstances.length; i++)
                    if (b[prop] instanceof excludeInstances[i])
                        isInstanceOfExcluded = true;

            if (typeof b[prop] === 'object' && !isInstanceOfExcluded) {
                a[prop] = a[prop] !== undefined ? a[prop] : {};
                extend(a[prop], b[prop], excludeInstances);
            } else
                a[prop] = b[prop];
        }
} 
```

# html - 如何在导航栏中添加空白空间？

> ID：15781789
> 
> 赞同：-1
> 
> 时间：2013-04-03T07:54:13.060
> 
> 标签：html, css, navigation

[http://i.stack.imgur.com/mDS5o.png](http://i.stack.imgur.com/mDS5o.png)

我基本上想在该导航栏的任一侧添加空白空间，以便它一直跟随到屏幕的末尾。如果有可能能够做到这一点，它会适合任何屏幕尺寸，那就太好了！我已经在 codeacademy 学习了两天的编码，所以我不完全了解如何做这样的小事情。

**非常感谢您的帮助。**

*（导航栏两侧的空白区域应与导航栏道具匹配，即不透明度、大小）*

此外，我更希望有人可以向我解释它是如何完成的，因为我注意到这里提出的很多问题都用所需的确切代码回答，并且只需要复制 + 粘贴。

这就是我的工作

**[http://cssmenumaker.com/builder/459273](http://cssmenumaker.com/builder/459273)**

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-03T08:10:32.597

我希望这个例子可以帮助你

```
<div class="container">
     <div class="nav">
        <label>foo1</label><label>foo2</label><label>foo3</label>
     </div>
<div> 
```

CSS

```
.container{width:300px;height:50px; background-color:blue}
.nav{width:120px; height:50px; background-color:green; margin:0 auto;}
.nav label{line-height:50px;} 
```

[http://jsfiddle.net/r3D4b/](http://jsfiddle.net/r3D4b/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-03T08:44:04.357

为了阐明 pconline 的代码在做什么，如果您创建一个 100% 的 div，然后为导航分隔 div，您可以将外部 div 扩展为 100% 以获得全宽，然后分别设置导航的样式和对齐。

# jquery - Jquery 在 div 标签内插入

> ID：15781790
> 
> 赞同：0
> 
> 时间：2013-04-03T07:54:14.200
> 
> 标签：jquery

我有一个 Json 响应。我必须插入

*   里面

    ```
     <div id="xyz1">
        <ul>

        </ul>
        </div>
        <div id="xyz2">
        <ul>

        </ul>
        </div>
    for(var i=0; i<test.length; i++)
    {
    $("#xyz" + i).html('<li>' + test[i]  +'<li>'):

    } 
    ```

    如果我使用上面的代码，只插入一个

    *   但如果我打印我的 test.length，它给出的正确值为 2。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-03T08:44:08.283

嘿男孩，数组的第一个索引是 0，但你的 div 的第一个索引是 1；像这样试试；

```
 <div id="xyz0">
    <ul>

    </ul>
    </div>
    <div id="xyz1">
    <ul>

    </ul>
  </div> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-03T07:55:55.750

更正，你错过了`#`，你错过了`/`in`</li>`

```
for(var i=0; i<test.length; i++)
{
    $("#xyz" + i).html('<li>' + test[i]  +'</li>');
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-03T08:09:28.420

你应该向内推`<li>`而`ul`不是向内推`<div>`

试试这个

```
$("#xyz" + i + " ul").html('<li>' + test[i]  +'<li>');
    //-----------^^---here addd this 
```

**更新**（见评论）

```
$("#xyx" + i + "qwerty ul").html('<li>' + test[i]  +'<li>'); 
```

# spring - Spring roo jams at create new spring roo 项目

> ID：15781791
> 
> 赞同：0
> 
> 时间：2013-04-03T07:54:16.480
> 
> 标签：spring, spring-roo

只是想知道过去是否有人遇到过这个问题以及他们是否解决了这个问题。我在我的 Mac 上使用 STS 程序，但每当我尝试创建一个新的 roo 项目时，程序都会在打包 JAR 文件时停止。请参考下图谢谢

![在此处输入图像描述](https://i.stack.imgur.com/uUitl.png)

# javascript - jquery / javascript: jQuery.fn.reverse = [].reverse;

> ID：15781794
> 
> 赞同：6
> 
> 时间：2013-04-03T07:54:26.393
> 
> 标签：javascript, jquery

这个小 jQuery 插件：

```
jQuery.fn.reverse = [].reverse; 
```

它是如何工作的？对象绑定在哪里 - 数组原型反转功能？我真的不明白它在幕后是如何运作的。一些解释会很好。问候

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2013-04-03T07:58:22.600

`[].reverse`是`.reverse()`来自*Array*原型的函数。jQuery 正在利用这一点而不是定义自己的。

`[]`创建一个空*数组*，从中引用`.reverse`函数是完全有效的。

所以现在，在 jQuery 中，`$.reverse()`如果 jQuery 对象包含一组元素，就可以做到这一点。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2013-04-03T07:59:51.880

`jQuery.fn`是 的别名`jQuery.prototype`。

所以这个插件将 Array 的`reverse`函数添加到使用 . 创建的所有对象中`new JQuery()`，使用 . 构建的集合就是这种情况`$`。

它之所以有效，是因为该`reverse`函数的[规范](http://es5.github.com/#x15.4.4.8)使其适用于任何具有长度和索引属性的对象。您可以使用以下方法对其进行测试：

```
var a = {0:'a', 1:'b'};
a.length = 2;
console.log([].reverse.call(a)); // it works 
```

# ios - makeKeyAndVisible 更改视图 iOS 5 的方向

> ID：15781797
> 
> 赞同：0
> 
> 时间：2013-04-03T07:54:36.207
> 
> 标签：ios, objective-c, ios5, uiviewcontroller, appdelegate

在 AppDelegate 中的方法 application:didFinishLaunchingWithOptions 中，我启动了一个视图控制器并添加到成为窗口根视图控制器的导航视图控制器。因为我的 iPad 应用程序只是水平方向，所以我的所有视图控制器都是为横向制作的。

这是代码：

```
self.myViewController = [[MyViewController alloc] init];
self.myNavigationController = [[MyNavigationController alloc] initWithRootViewController: self.myViewController];
self.window.rootViewController = self.myNavigationController;
[self.window makeKeyAndVisible];

return YES; 
```

当我在“self.window.rootViewController = self.myNavigationController;”上放置断点时 行并在控制台中调用以显示视图详细信息，我得到以下信息： $0 = 0x0c89d010 >

我读到的矩形是方向模式（1024 宽和 748 高）

“return YES;”上的下一个断点 给我看这个：$1 = 0x0c89d010 >

~~它复制一个对象（据我所知）并~~改变方向（768 宽度和 1004 高度）

这只发生在 iOS5 中，但是 iOS6 可以正常工作

MakeKeyAndVisible 方法是否有任何我应该知道的已知问题？或者可能是我不了解 makeKeyAndVisible 的工作原理

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-03T08:21:52.060

尝试创建一个自定义 UINavigationController，其中包含所有方向方法，并在您的应用程序中使用它。

会是这样的

**自定义导航控制器.h**

```
#import <UIKit/UIKit.h>
@interface CustomNavigationController : UINavigationController
@end 
```

**自定义导航控制器.m**

```
#import "CustomNavigationController.h"

@interface CustomNavigationController ()

@end

@implementation CustomNavigationController

//overriding shouldAutorotateToInterfaceOrientation method for working in navController

- (BOOL)shouldAutorotateToInterfaceOrientation:(UIInterfaceOrientation)interfaceOrientation {

    return   [self.topViewController shouldAutorotateToInterfaceOrientation];

}

//other methods 
```

这样，您的方向将在相应的 viewCorollers 中相应地工作。

# c# - MVC4 - 使用 Json 自动完成

> ID：15781799
> 
> 赞同：0
> 
> 时间：2013-04-03T07:54:38.373
> 
> 标签：c#, jquery, asp.net-mvc, json, jquery-ui

我正在使用 ASP.NET MVC4 和实体框架开发 Intranet Web 应用程序。根据我的一个观点，我有一份未来可能会很庞大的人名单。因此，为了让事情变得更简单，我想使用 jQuery UI 和 Json 实现一个自动完成字段组件。

问题是当我使用我的数据库为我的 jQuery 代码提供源时，它不起作用。但是，当我通过硬编码数据创建变量时，它可以工作。

我的行动：

```
public ActionResult AutoComplete(string term)
{
    BuSIMaterial.Models.BuSIMaterialEntities db = new Models.BuSIMaterialEntities();

    //var result = new [] {"A","B","C","D","E","F"}; with this, it works

    var result = (from obj in db.Persons where obj.FirstName.ToLower().Contains(term.ToLower()) select obj).ToArray(); // with this, it doesn't work

    return Json(result, JsonRequestBehavior.AllowGet);
} 
```

我的观点 ：

```
@{
    ViewBag.Title = "Auto";
}

<h2>Auto</h2>
<label for="persons">Persons : </label><input type="text" id="persons" name="persons"/>

@section Scripts
{
    @Scripts.Render("~/bundles/jqueryval")
    @Scripts.Render("~/bundles/jqueryui")
    @Styles.Render("~/Content/themes/base/css")

    <script type="text/javascript" language="javascript">
        $(document).ready(function () {
            $('#persons').autocomplete({
                source: '@Url.Action("AutoComplete")'
            });
        });
    </script>
} 
```

我试图修改我的返回类型（JsonResult 而不是 ActionResult），但没有任何改变。有什么想法可以解决这个问题吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-03T07:59:12.403

您的代码不起作用的原因是因为您试图将域模型发送到视图，该视图很可能在其对象图中包含循环引用并且不是 JSON 可序列化的。要解决此问题，请执行以下操作：

```
public ActionResult AutoComplete(string term)
{
    BuSIMaterial.Models.BuSIMaterialEntities db = new Models.BuSIMaterialEntities();

    //var result = new [] {"A","B","C","D","E","F"}; with this, it works

    var result = db
        .Persons
        .Where(p => p.FirstName.ToLower().Contains(term.ToLower()))
        .Select(p => p.FirstName) // <!-- That's the important bit you were missing
        .ToList();

    return Json(result, JsonRequestBehavior.AllowGet);
} 
```

请注意我如何将 Person 实体投影到字符串（仅使用它的`FirstName`）。在您的示例中，您直接获取了整个 Person 对象，这对自动完成插件没有意义，因为您需要将字符串数组发送到视图。

# django - Django难以在保存方法中保存多个模型对象

> ID：15781800
> 
> 赞同：2
> 
> 时间：2013-04-03T07:54:40.883
> 
> 标签：django, django-models

这对我来说是一个很难描述的问题，但我会在这里尽力而为。

我有一个用于日历事件的模型：

```
class Event(models.Model):
    account = models.ForeignKey(Account, related_name="event_account")
    location = models.ForeignKey(Location, related_name="event_location")
    patient = models.ManyToManyField(Patient)
    datetime_start = models.DateTimeField()
    datetime_end = models.DateTimeField()
    last_update = models.DateTimeField(auto_now=False, auto_now_add=False, null=True, blank=True)
    event_series = models.ForeignKey(EventSeries, related_name="event_series", null=True, blank=True)
    is_original_event = models.BooleanField(default=True) 
```

保存后，我将覆盖 save() 方法以检查是否设置了 event_series（重复事件）。如果是，那么我需要为每个重复日期迭代地创建另一个事件对象。

以下似乎可行，尽管它可能不是最好的方法：

```
def save(self,  *args, **kwargs):
    if self.pk is None:
        if self.event_series is not None and self.is_original_event is True :
            recurrence_rules = EventSeries.objects.get(pk=self.event_series.pk)

            rr_freq = DAILY                    
            if recurrence_rules.frequency == "DAILY":
                rr_freq = DAILY
            elif recurrence_rules.frequency == "WEEKLY":
                rr_freq = WEEKLY
            elif recurrence_rules.frequency == "MONTHLY":
                rr_freq = MONTHLY
            elif recurrence_rules.frequency == "YEARLY":
                rr_freq = YEARLY

            rlist = list(rrule(rr_freq, count=recurrence_rules.recurrences, dtstart=self.datetime_start))

            for revent in rlist:
                evnt = Event.objects.create(account = self.account, location = self.location, datetime_start = revent, datetime_end = revent, is_original_event = False, event_series = self.event_series)
                super(Event, evnt).save(*args, **kwargs)          

    super(Event, self).save(*args, **kwargs) 
```

但是，我发现的真正问题是，使用这种方法并从管理表单中保存，它会创建重复事件，但是如果我尝试获取 self.patient 这是一个 M2M 字段，我会不断收到此错误：

```
'Event' instance needs to have a primary key value before a many-to-many relationship can be used 
```

我的主要问题是关于这个 m2m 错误，但如果您对重复事件的嵌套保存有任何反馈，那也很好。

非常感谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-03T11:17:30.830

如果尝试访问的代码`self.patient`在 save 方法中并且在保存实例之前发生，那么这显然是预期的行为。请记住，模型对象只是 SQL 数据库上的一个薄（嗯...）包装器...此外，即使您首先保存新实例然后尝试`self.patient`从保存方法访问，您仍然会有一个空查询集，因为m2m 不会被管理表单保存。

IOW，如果您要做的事情取决于设置的 m2m，则必须将其放在不同的方法中，并确保在适当的时候调用该方法

关于您的代码段：

1/`recurrence_rules = EventSeries.objects.get(pk=self.event_series.pk)`只是多余的，因为您已经在名称下拥有相同的对象`self.event_series`

2/ 无需调用`save`您创建的事件`Event.objects.create`- 该`ModelManager.create`方法真正*创建*了一个实例（即：将其保存到数据库中）。

# python - Python Tkinter 清除帧

> ID：15781802
> 
> 赞同：48
> 
> 时间：2013-04-03T07:54:46.607
> 
> 标签：python, tkinter, frame

我正在尝试清除 tkinter 中的一个框架，以便可以写入新内容（刷新信息），但我无法做到。我知道这些

```
frame.destroy()
frame.pack_forget()
frame.grid_forget() 
```

但 frame.destroy() 将完全删除框架。而另外两个也不能给我想要的结果。我需要的只是**清除框架中的每个项目，但框架本身会保留**。有什么办法吗？

* * *

## 回答 #1

> 赞同：88
> 
> 时间：2015-02-20T07:36:17.307

[https://anzeljg.github.io/rin2/book2/2405/docs/tkinter/universal.html](https://anzeljg.github.io/rin2/book2/2405/docs/tkinter/universal.html)

> w.winfo_children()
> 返回 w 的所有孩子的列表，按照从最低（底部）到最高（顶部）的堆叠顺序。

```
for widget in frame.winfo_children():
    widget.destroy() 
```

将销毁框架中的所有小部件。不需要第二帧。

* * *

## 回答 #2

> 赞同：33
> 
> 时间：2013-04-03T10:46:15.627

`pack_forget`并且`grid_forget`只会从视图中删除小部件，它不会破坏它们。如果您不打算重新使用这些小部件，那么您唯一真正的选择就是使用该`destroy`方法销毁它们。

要做到这一点，您有两个选择：单独销毁每一个，或者销毁将导致其所有子项都被销毁的框架。后者通常是最简单和最有效的。

由于您声称不想破坏容器框架，因此请创建一个辅助框架。让这个辅助框架成为您要删除的所有小部件的容器，然后将这一框架放在您不想破坏的父框架*中*。然后，只需销毁这一帧，所有内部小部件都会随之销毁。

* * *

## 回答 #3

> 赞同：9
> 
> 时间：2020-02-03T07:06:45.677

为了清晰的框架，首先需要销毁框架内的所有小部件，。它将清除框架。

```
import tkinter as tk
from tkinter import *
root = tk.Tk()

frame = Frame(root)
frame.pack(side="top", expand=True, fill="both")

lab = Label(frame, text="hiiii")
lab.grid(row=0, column=0, padx=10, pady=5)

def clearFrame():
    # destroy all widgets from frame
    for widget in frame.winfo_children():
       widget.destroy()

    # this will clear frame and frame will be empty
    # if you want to hide the empty panel then
    frame.pack_forget()

frame.but = Button(frame, text="clear frame", command=clearFrame)
frame.but.grid(row=0, column=1, padx=10, pady=5)

# then whenever you add data in frame then you can show that frame
lab2 = Label(frame, text="hiiii")
lab2.grid(row=1, column=0, padx=10, pady=5)
frame.pack()
root.mainloop() 
```

# php - 需要显示文件图标，而不仅仅是 html 中的链接

> ID：15781808
> 
> 赞同：0
> 
> 时间：2013-04-03T07:54:55.523
> 
> 标签：php, html

我有使用 php 的文件上传功能，然后我需要提供这些文件的链接以下载它们。目前我刚刚给出了一个超链接，例如：

```
<a href="/files/testbook.pdf"> Text Book </a> 
```

但这只是显示一个链接.. 而需要显示一个 pdf 文件图标。我怎样才能做到这一点？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-03T08:02:49.593

您可以使用 css 选择器选择所有指向 pdf 文件的链接并动态应用图标。这意味着您不需要`img`为所有链接添加单独的标签。您可以为不同的文件类型或外部链接和内部链接等添加其他选择器。

您的 CSS 中的示例如下所示。

```
a[href$='.pdf'] {    
    display:inline-block;    
    line-height:18px; /* check your icon height */    
    padding-right:20px;    
    background: transparent url(images/pdf.png)  center right no-repeat;    
}     
/* change padding-right to padding left and background 
position center right to center left 
if you want  to display icon on the left side */ 
```

这个有用的代码取自[http://www.vision.to/add-a-small-icon-to-your-links-css-only.php](http://www.vision.to/add-a-small-icon-to-your-links-css-only.php)

并在此处对主题进行有趣的阅读[http://www.portent.com/blog/design-dev/class-up-your-link-icons-with.htm](http://www.portent.com/blog/design-dev/class-up-your-link-icons-with.htm)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-03T07:58:05.867

在线搜索PDF图标，然后下载

```
<a href=file.pdf><img src=pdficon.jpg> test book</a> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-03T07:59:15.563

您可以使用以下内容：

```
<a href="/files/testbook.pdf"> <img src="path_to_image" alt="Textbook"/> </a> 
```

它将图像显示为链接。当您单击图像时，浏览器将开始下载 PDF 或在浏览器中显示 PDF。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-04-03T08:04:13.363

你可以用 CSS 做得更好。我还建议使用 target 属性来强制链接在新选项卡中打开，这样网站访问者在单击外部链接时不会离开您的网站（在这种情况下，所有意图和目的都是外部的......）

```
<a id="pdf-link" target="_BLANK" href="/files/testbook.pdf"> Text Book </a>

a#pdf-link {
    background: url('../images/pdf-icon.png') left center no-repeat;
    display: block;
    min-height: <USE-IMAGE-HEIGHT>px;
    padding-left: <USE-IMAGE-WIDTH-PLUS10/20>px;
} 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-04-03T08:04:16.533

正如@Jocelyn 在评论中所说，您需要使用标签 img 来显示图像：

```
<a href="/files/testbook.pdf"><img src="/path/to_your_image.png" alt="Text Book"/> Text Book </a> 
```

我建议您检查文件的类型，然后放入正确的图像（PDF、ZIP、DOC ...），您可以使用：

```
<?php
$finfo = finfo_open(FILEINFO_MIME_TYPE);
echo finfo_file($finfo, 'YOUR_FILENAME'); 
```

然后根据您允许的 mime 类型进行切换或 if..else。

# php - PHP MySQL 订单列表

> ID：15781821
> 
> 赞同：-3
> 
> 时间：2013-04-03T07:55:38.630
> 
> 标签：php, mysql

任何人都可以帮忙吗？

我的代码是这样的：

```
<ol><li>{$student_Value}</li> <ol>' 
```

它给出了结果：

```
 1\. Student101Name
 1\. Student102Name
 1\. Student103Name 
```

我想要类似的东西：

> 1.  学生101姓名
> 2.  学生102姓名
> 3.  学生103姓名

请帮忙...谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-03T07:59:03.137

如果您用于`MySQL`获取数据，您可以添加`ORDER BY`到查询中以对结果进行排序！

[这里有更多信息如何使用 ORDER BY](http://dev.mysql.com/doc/refman/5.0/en/order-by-optimization.html)

并将 HTML 代码更改为：

```
<ol>
    <li>$student_Value</li>
    <li>$student_Value</li>
    <li>$student_Value</li>
</ol> 
```

PHP 代码将是：

```
echo "<ol>";
echo "   <li> $student_Value </li> ";//write all student values like this
//more student values
echo "</ol>"; 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-03T08:03:26.313

不要每次都关闭OL标签

OL = 有序列表

LI = 列表项

如果您关闭并重新打开 OL，它会创建一个新的有序列表，因此从 1 重新开始。

```
<pre>

echo "&lt;ol&gt;";
foreach loop {
echo "&lt;li&gt;{$student_Value}&lt;/li&gt;";
}
echo "&lt;/ol&gt;";

</pre> 
```

祝你好运。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-03T08:00:57.320

看起来你的问题比 PHP 或 SQL 更与 CSS 相关。

原因可能是您的输出是：

```
<ol><li>$student_Value</li></ol>
<ol><li>$student_Value</li></ol>
<ol><li>$student_Value</li></ol> 
```

每个学生都应该是有序列表中的一个列表项：

```
<?php

print "<ol>";

while ($row = $result->fetch_assoc())
{
    print "<li>{$row['student']}</li>";
}

print "</ol>";

?> 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-04-03T08:04:33.353

你需要这样的东西

```
<ol>
<?php
   for($i=0; $i<count($studentValue); $i++)
   {
?>
      <li><?php echo $studentValue[$i]; ?></li>
<?php 
   }
?>
<ol> 
```

我给你上面的例子是为了告诉你在'ol'标签下'li'必须是多个才能得到你需要的结果。

# android - 在android中显示分数

> ID：15781822
> 
> 赞同：1
> 
> 时间：2013-04-03T07:55:50.863
> 
> 标签：android, textview, android-input-method

我想在android中显示分数。但它显示为 1/2。我不想要这个。[我想要这个问题](https://stackoverflow.com/questions/7525977/how-to-write-fraction-value-using-html)中的确切描述。

怎么可能在TextView中得到它？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-03T08:00:32.473

为什么不使用链接问题中描述的 WebView 和 html 代码？

[http://developer.android.com/reference/android/webkit/WebView.html](http://developer.android.com/reference/android/webkit/WebView.html)

对于有限的子集，您还可以在 TextView 中使用以下 unicode 字符：¼½¾

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2017-06-23T11:57:21.090

```
chm2.setText(Html.fromHtml("<sup>12</sup>&frasl;<sub>6</sub>")); 
```

或者

```
chm5.setText(Html.fromHtml("<u>1</u><br/>" +
            "&emsp;2")); 
```

这里

```
&emsp; 
```

用于在第二行之前为兼容位置提供空间

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-04T18:28:01.087

根据您的要求，您还可以通过使用 3 个 TextView 和一个 Shape 来绘制线条（一个矩形）来实现这一点：

```
|---------- |      [topTextView]
|           |
|bigTextView| ---[rectangle shape]---
|           |
|---------- |    [bottomTextView] 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-04-03T08:03:39.770

**我几乎不这么认为**。A`TextView`显示文本。这几乎每次都使用特定的表示语言（如 HTML，但用于数学）完成，因此您的输入只会在无法理解时显示表示语言（带有标签等），而不是结果公式。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2014-09-27T02:28:59.130

您可以按如下方式创建布局

```
<RelativeLayout
    android:id="@+id/RelativeLayout"
    android:layout_width="40dp"
    android:layout_height="wrap_content"
    android:layout_marginLeft="5dp"
    android:layout_marginRight="5dp"
    android:layout_marginTop="10dp"
    android:orientation="vertical" >

    <TextView
        android:id="@+id/textTop"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:layout_alignParentLeft="true"
        android:layout_alignParentTop="true"
        android:text="0"
        android:textColor="@color/gray"
        android:textSize="14sp" />

    <TextView
        android:id="@+id/textSlash"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:layout_centerVertical="true"
        android:layout_gravity="center"
        android:layout_toRightOf="@+id/textTop"
        android:text="/"
        android:textColor="@color/gray" />

    <TextView
        android:id="@+id/textBottom"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:layout_below="@+id/textSlash"
        android:layout_gravity="right"
        android:layout_toRightOf="@+id/textSlash"
        android:text="10"
        android:textColor="@color/gray"
        android:textSize="14sp" />

 </RelativeLayout> 
```

我确信这可以改进 - 但给出了基本的想法。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2019-10-23T06:57:26.250

在字符串中，您可以在“ **U\00BC** ”中使用Unicode，即（1/4）。

# android - 在不同的ROM中安装apk

> ID：15781824
> 
> 赞同：0
> 
> 时间：2013-04-03T07:56:00.737
> 
> 标签：android, installation, apk

我开发了一个APK。我希望 apk 应该只安装在特定的 ROM 中。无法安装在第三个 ROM 中。怎么做 ？谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-03T08:43:17.767

您可以匹配[Build 类](http://developer.android.com/reference/android/os/Build.html#FINGERPRINT)`ID`中的or`FINGERPRINT`字符串。我不确定您将如何阻止该应用程序的安装，但您当然可以阻止它正确启动。

# html - 更改画布内 SVG 元素的填充？

> ID：15781825
> 
> 赞同：0
> 
> 时间：2013-04-03T07:56:01.523
> 
> 标签：html, dom, canvas, svg

有没有一种好方法可以将外部 SVG 文件绘制到 HTML5 标记中，然后通过 Javascript 动态更改 SVG 文件中元素的填充颜色？

***到目前为止我做了什么：**

1.  制作了一个新的 Image 对象

2.  将它的 src 设置为有问题的 .svg 文件

3.  给它一个 onload 函数，将它绘制到 via ctx.drawImage()

# java - 需要帮助以使用 Java 正则表达式匹配特定字符

> ID：15781826
> 
> 赞同：3
> 
> 时间：2013-04-03T07:56:01.937
> 
> 标签：java, regex, regex-negation

我需要匹配**不**属于以下字符集的字符：

> abcdefghijklmnopqrstu vwxyz ABCDEFGHIJKLMNOPQRSTU VWXYZ 0 1 2 3 4 5 6 7 8 9 / - ? : ( ) 。, ' + 空格

为此，我正在使用这个正则表达式：

```
String regex = "[^\\da-zA-Z/\\-\\?:\\(\\)\\.\\,'\\+ ]+"; 
```

不幸的是，这不起作用。

我也试过这个（否定）：

```
String regex = "(?![\\da-zA-Z/\\-\\?:\\(\\)\\.\\,'\\+ ]+)"; 
```

但这不行。

任何人都可以帮忙吗？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-04-03T08:00:32.850

# ios6 - 以多种方法访问变量

> ID：15781832
> 
> 赞同：0
> 
> 时间：2013-04-03T07:56:22.350
> 
> 标签：ios6, collectionview

仍然有点新，我遇到了一些问题，希望有人能提供帮助。我正在尝试将来自我的服务器的 JSON 字符串加载到 iOS6 中的集合视图中，我可以使用从 viewDidLoad 方法调用的 fetchedData 方法提取数据，并且该部分工作正常。在 fetchedData 方法中，我分解 JSON 数据并将其放在 NSDictionaries 和 NSArrays 中，并且可以将正确的数据转储到日志中以查看它。

问题是当我尝试在代码中的其他位置使用任何信息时，例如获取任何 hte 数组中的元素数量以用作填充 collectionview 的计数器。

可能是我累了，但我似乎无法理解这部分。许多主要变量的声明都在 fetchedData 方法中，我认为因为在那里声明了这可能是我在其他地方看不到它们的原因，所以我将变量的声明移到了接口部分并希望这样做变量 GLOBAL 和 fetchedData 方法继续正常工作，但没有其他地方。

当我在单元格定义区域中插入中断时，我可以在调试器窗口中看到变量显示为空。

我不确定您可能想查看代码的哪些部分，因此请告诉我，我可以发布它们，但也许有人可以举一个示例，说明如何以多种方法访问数组和字典项。

为了避免混淆并在这一点上暴露我的代码大杂烩，这里是 .m 文件，或者至少是其中的大部分 请不要对我一直在尝试的任何我能想到的东西和撕毁它的编码风格进行严厉批评我自己很努力，已经很晚了。

```
#import "ICBCollectionViewController.h"
#import "ICBCollectionViewCell.h"
#import "ICBDetailViewController.h"

@interface ICBCollectionViewController () {

NSDictionary* json;
NSDictionary* title;
NSDictionary* shortDescrip;
NSDictionary* longDescrip;
NSDictionary* price;
NSDictionary* path;
NSDictionary* sKU;
NSDictionary* audiotrack;
NSDictionary* audiotracksize;

NSArray* titles;
NSArray* shortDescription;
NSArray* longDescription;
NSArray* prices;
//    NSArray* paths;
NSArray* SKUs;
NSArray* audiotracks;
NSArray* audiotracksizes;
}
@end
/*
@interface NSDictionary(JSONCategories)
+(NSDictionary*)dictionaryWithContentsOfJSONURLString:(NSString*)urlAddress;
-(NSData*)toJSON;
@end

@implementation NSDictionary(JSONCategories)
+(NSDictionary*)dictionaryWithContentsOfJSONURLString:(NSString*)urlAddress
{
NSData* data = [NSData dataWithContentsOfURL: [NSURL URLWithString: urlAddress] ];
__autoreleasing NSError* error = nil;
id result = [NSJSONSerialization JSONObjectWithData:data options:kNilOptions error:&error];
if (error != nil) return nil;
return result;
}

-(NSData*)toJSON
{
NSError* error = nil;
id result = [NSJSONSerialization dataWithJSONObject:self options:kNilOptions error:&error];
if (error != nil) return nil;
return result;
}
@end
*/
@implementation ICBCollectionViewController
@synthesize paths;

- (id)initWithNibName:(NSString *)nibNameOrNil bundle:(NSBundle *)nibBundleOrNil
{
self = [super initWithNibName:nibNameOrNil bundle:nibBundleOrNil];
if (self) {
    // Custom initialization
}
return self;
}

- (void)viewDidLoad
{
[super viewDidLoad];
dispatch_async(kBgQueue, ^{
        NSData* data = [NSData dataWithContentsOfURL: imobURL];
        [self performSelectorOnMainThread:@selector(fetchedData:) withObject:data waitUntilDone:YES];
});

// Do any additional setup after loading the view.
}

- (void)fetchedData:(NSData *)responseData {
NSError* error;
//parse out the json data
json = [NSJSONSerialization JSONObjectWithData:responseData options:kNilOptions error:&error];

titles = [json objectForKey:@"title"]; //2
shortDescription = [json objectForKey:@"shortD"];
longDescription =  [json objectForKey:@"longD"];
prices = [json objectForKey:@"price"];
self.paths = [json objectForKey:@"path"];
SKUs = [json objectForKey:@"SKU"];
audiotracks = [json objectForKey:@"audiotrack"];
audiotracksizes = [json objectForKey:@"audiotracksize"];

 NSLog(@"paths: %@", paths); //3
//  NSLog(@"shortDescrip: %@", shortDescription);

NSInteger t=7;
    // 1) Get the latest loan
    title = [titles objectAtIndex:t];
    shortDescrip = [shortDescription objectAtIndex:t];
    longDescrip = [longDescription objectAtIndex:t];
    price = [prices objectAtIndex:t];
    path = [paths objectAtIndex:t];
    sKU = [SKUs objectAtIndex:t];
    audiotrack = [audiotracks objectAtIndex:t];
    audiotracksize = [audiotracksizes objectAtIndex:t];

    //NSLog(title.count text);
    //NSLog(title.allValues);

    // 2) Get the data
    NSString* Title = [title objectForKey:@"title"];
    NSString* ShortDescrip = [shortDescrip objectForKey:@"shortD"];
    NSString* LongDescrip = [longDescrip objectForKey:@"longD"];
    NSNumber* Price = [price objectForKey:@"price"];
    NSString* Path = [path objectForKey:@"path"];
    NSString* SKU = [sKU objectForKey:@"SKU"];
    NSString* AudioTrack = [audiotrack objectForKey:@"audiotrack"];
    NSNumber* AudioTrackSize = [audiotracksize objectForKey:@"audiotracksize"];

    /*************************HERE THE DATA EXISTS*******************************/
    /******** Path = "XYXYXYXYXYXY" for example  ********************************/

    // 3) Set the label appropriately
    NSLog([NSString stringWithFormat:@"Here is some data: Title: %@ Path %@ SKU: %@ Price: %@ Track %@ Size %@",Title, Path, SKU, Price, LongDescrip, AudioTrackSize]);

}

- (void)didReceiveMemoryWarning
{
[super didReceiveMemoryWarning];
// Dispose of any resources that can be recreated.
}

- (void)prepareForSegue:(UIStoryboardSegue *)segue sender:(id)sender {
//DetailSegue

if ([segue.identifier isEqualToString:@"DetailSegue"]) {
    ICBCollectionViewCell *cell = (ICBCollectionViewCell *)sender;
    NSIndexPath *indexPath = [self.collectionView indexPathForCell:cell];
    ICBDetailViewController *dvc = (ICBDetailViewController *)[segue destinationViewController];
    dvc.img = [UIImage imageNamed:@"MusicPlayerGraphic.png"];

}
}

- (NSInteger)collectionView:(UICollectionView *)collectionView numberOfItemsInSection:(NSInteger)section{
NSLog(@"paths qty = %d",[paths count]);
return 20;
}

// The cell that is returned must be retrieved from a call to    -dequeueReusableCellWithReuseIdentifier:forIndexPath:
- (UICollectionViewCell *)collectionView:(UICollectionView *)collectionView cellForItemAtIndexPath:(NSIndexPath *)indexPath{
static NSString *identifier=@"Cell";
ICBCollectionViewCell *cell = (ICBCollectionViewCell *)[collectionView dequeueReusableCellWithReuseIdentifier:identifier forIndexPath:indexPath];

//    paths = [json objectForKey:@"path"];
NSDictionary* path = [paths objectAtIndex:indexPath.row];
NSString* Path = [path objectForKey:@"path"];
//    NSString* Path = [paths objectAtIndex:indexPath.row];
NSLog(@"%d",indexPath.row);

    /***********************HERE IT DOES NOT**************************/
    /******** Path = "" **********************************************/

NSLog(@"xxx");
NSLog(path);
NSLog(paths);
NSLog(Path);
NSLog(@"ZZZ");

Path=@"deepsleep";
NSLog(@"xxx");
NSLog(Path);
NSLog(@"ZZZ");

//    paths = [json objectForKey:@"path"];

//    NSString* Path = [path objectForKey:@"path"];

NSString *imagefile = [NSString stringWithFormat:@"https://imobilize.s3.amazonaws.com/glennharrold/data/%@/mid.png", Path];
NSLog(imagefile);
NSURL *url1=[NSURL URLWithString:imagefile];
dispatch_async(kBgQueue, ^{
    NSData *data1 = [NSData dataWithContentsOfURL:url1];
    cell.imageView.image =[[UIImage alloc]initWithData:data1];
});
return cell;
}

@end 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-05T05:46:33.343

我发现主要问题是 ViewDidLoad 方法，我正在使用后台活动从服务器获取 JSON 数据，并且由于该进程正在运行，前台也正在处理中，因为其余代码基于一个值当后台进程完成时返回数据实际上是空的，所以基于该单件的所有数据也是空的，看起来好像它不可用。一旦我让进程在前台运行，所有变量都开始具有值。

感谢您对此的帮助

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-03T15:31:08.203

尝试分解 JSON 数据并在 appDelegate 中对其进行排序。如果您在那里声明公共变量`@property (nonatomic, strong) NSDictionary *myDict`等，那么您可以通过导入您的 appDelegate 并使用以下代码来访问这些变量：

```
AppDelegate *appDelegate = [[UIApplication sharedApplication] delegate];
NSDictionary *newDict = appDelegate.myDict; 
```

否则，您可以将信息存储在[单例](https://stackoverflow.com/a/10093449/542400)或根视图控制器中。关键是将变量存储在不会被释放的类中。大多数情况下，为此目的使用 viewController 是一个坏主意——它们倾向于被导航离开，这会释放内存并摆脱你的变量。谷歌“模型视图控制器”了解更多信息。

# javascript - 与 JS 或 jQuery 异步加载画廊缩略图

> ID：15781837
> 
> 赞同：0
> 
> 时间：2013-04-03T07:56:48.747
> 
> 标签：javascript, jquery, performance, asynchronous

我在 WP 网站中使用 TN3 库（不是 WP 插件，而是 jQuery 库）。

在图库中，大图像会在您需要时加载，这很棒，因为页面加载不会阻塞。但是缩略图被全部加载（即使是那些不可见的）并且页面被卡住，直到所有这些都被加载。

```
$images = get_field('gallery_images');
if( $images ): ?>
  <div id="" class="mygallery">
    <ol class="">
      <?php foreach( $images as $image ): ?>

        <li>
          <?php if($image[$captionKey]): ?>
            <div class="tn3 description"><?php echo $image[$captionKey]; ?></div>
          <?php endif; ?>                        

          <a href="<?php echo $image['sizes']['large']; ?>">
            <?php echo wp_get_attachment_image( $image['id'], 'gallery-thumb' ); ?>
          </a>
        </li>

      <?php endforeach; ?>
    </ol>
  </div>
<?php endif; ?> 
```

有没有我可以让缩略图在后台加载而不阻塞页面的其余部分？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-03T08:05:18.047

作为变体，您可以插入缩略图 1px 图像并添加一些带有真实缩略图 src 的属性。在 jQuery 事件中准备好页面后，将所有缩略图 src 替换为该属性值。

# c# - 与 Arduino 的 C# 串行通信

> ID：15781840
> 
> 赞同：3
> 
> 时间：2013-04-03T07:57:05.323
> 
> 标签：c#, arduino, serial-communication

我正在开展一个项目，该项目涉及我的客户端软件通过串行通信将数据发送到 Arduino 微控制器 AtMega32U4。到目前为止，我已经查看了许多已回答的问题，但没有一个是针对我的问题的。但是，我相信我的问题可能仅限于线程问题或 Arduino 自动重置问题。

**代码 1：**

```
public MainForm()
    {
        InitializeComponent();
        serialPort1.DataReceived += new SerialDataReceivedEventHandler(serialPort1_DataReceived);
        serialPort1.DtrEnable = true;
        //serialPort1.RtsEnable = true;
    }
private void button3_Click(object sender, EventArgs e)
    {
        // Disables button while processing
        button3.Enabled = false;

        GetDir dir = new App.GetDir();
        dir.getCoords(Origin.Text, Destination.Text, Application.StartupPath + @"\temp2.html", "temp2.xml");
        dataBrowser.Navigate(Application.StartupPath + @"\temp2.html");
        dataBrowser.Update();

        waypoints = dir.coordsLat.Length;
        counter = dir.coordsLat.Length;
        coords = new double[dir.coordsLat.Length, 2];

        for (int i = 0; i < counter; i++)
        {
            coords[i, 0] = (Convert.ToDouble(dir.coordsLat[i]));
            coords[i, 1] = (Convert.ToDouble(dir.coordsLon[i]));
        }

        //serialPort1.Close();
        //System.Threading.Thread.Sleep(1000);

        if (serialPort1.IsOpen && !doubleClick)
        {
            serialPort1.Close();
            System.Threading.Thread.Sleep(2000);
            try
            {
                serialPort1.Open();
            }
            catch (Exception exception)
            {
                MessageBox.Show(exception.Message, "Cannot open serial port");
            }
            System.Threading.Thread.Sleep(2000);
        }
        else
        {
            if (!serialPort1.IsOpen)
            {
                try
                {
                    serialPort1.Open();
                    doubleClick = true;
                }
                catch (Exception exception)
                {
                    MessageBox.Show(exception.Message, "Cannot open serial port");
                }
                System.Threading.Thread.Sleep(2000);
                serialPort1.Write("^");
                System.Threading.Thread.Sleep(1000);
                Console.WriteLine('^');
                //button3.Enabled = true;
            }
        }  
    }

    private void serialPort1_DataReceived(object sender, SerialDataReceivedEventArgs e)
    {
        //System.Threading.Thread.Sleep(1000);
        readData = serialPort1.ReadLine();
        Console.WriteLine(readData);
        // If microcontroller sends "&", it is ready to receive next piece of data
        if (readData == "&")
        {
            sendRequest = true;
        }
        else
        {
            sendRequest = false;
        }

        // Write next piece of data to microcontroller if it is ready
        if (sendRequest)
        {
            this.BeginInvoke( new EventHandler (write_serialPort1));
        }
    } 
```

在代码 1 的调试过程中，事件处理程序 (serialPort1_DataReceived) 永远不会被调用。在此过程中，由于控制台两次输出“^”，因此 button3_click 会以某种方式被调用两次。之后，客户因为没有收到任何东西而停滞不前。请记住，Arduino 将在收到回音符号 ('^') 后以 & 符号 ('&') 响应。Arduino 代码已经在 Arduino IDE 上进行了测试，看起来运行良好。我相信 button3_click 被调用两次的问题来自于 button3_down 和 button3_up。

但是，我能够使用 Code 2 绕过这个问题。但也遇到了另一堵砖墙。

**代码 2：**

```
 private void button3_Click(object sender, EventArgs e)
    {
        // Disables button while processing
        button3.Enabled = false;

        GetDir dir = new App.GetDir();
        dir.getCoords(Origin.Text, Destination.Text, Application.StartupPath + @"\temp2.html", "temp2.xml");
        dataBrowser.Navigate(Application.StartupPath + @"\temp2.html");
        dataBrowser.Update();

        waypoints = dir.coordsLat.Length;
        counter = dir.coordsLat.Length;
        coords = new double[dir.coordsLat.Length, 2];

        for (int i = 0; i < counter; i++)
        {
            coords[i, 0] = (Convert.ToDouble(dir.coordsLat[i]));
            coords[i, 1] = (Convert.ToDouble(dir.coordsLon[i]));
        }

        serialPort1.Close();

        try
        {
            serialPort1.Open();
        }
        catch (Exception exception)
        {
            MessageBox.Show(exception.Message, "Cannot open serial port");
        }

        if (serialPort1.IsOpen)
        {
            System.Threading.Thread.Sleep(2000);
            using (serialPort1)
            {
                serialPort1.Write("^");
                System.Threading.Thread.Sleep(1000);
                Console.WriteLine("^");
                serialPort1.Close();
                System.Threading.Thread.Sleep(5000);
            }
        }
        else
        {
            button3.Enabled = true;
        }

    }

    private void serialPort1_DataReceived(object sender, SerialDataReceivedEventArgs e)
    {
        //SerialPort sp = (SerialPort)sender;

        System.Threading.Thread.Sleep(10000);
        /*if (!serialPort1.IsOpen)
        {
            serialPort1.Close();
            System.Threading.Thread.Sleep(10000);
            serialPort1.Open();
            System.Threading.Thread.Sleep(10000);
        }*/
        //serialPort1.Open();
        //using (sp)
        using (serialPort1)
        {
            serialPort1.Open();
            System.Threading.Thread.Sleep(5000);
            readData = serialPort1.ReadExisting();
            Console.WriteLine(readData);
            // If microcontroller sends "&", it is ready to receive next piece of data
            if (readData == "&")
            {
                sendRequest = true;
            }
            else
            {
                sendRequest = false;
            }

            // Write next piece of data to microcontroller if it is ready
            if (sendRequest)
            {
                this.BeginInvoke(new EventHandler(write_serialPort1));
            }
        }
    } 
```

在代码 2 中，确实调用了事件处理程序，并且 button3_click 仅运行一次。但是当它尝试打开端口时，它返回错误' `Access to Port X denied`'。此外，我希望我不必像这样关闭和打开端口，但是当调用事件处理程序时（在前面的代码中）它返回了 COM 端口未打开的错误。为了解决这个错误，我不得不在`button3_click`事件处理期间关闭它并重新打开它。

在阅读了有关处理串行通信线程问题的许多问题后，我在代码中添加了很多延迟。我什至尝试过一分钟的延迟，希望线程结束来解决问题。但是，那里没有运气。

我还在 MainForm 设计器中指定了我的串行端口，而不是在代码中声明它（起初我两者都做了，并意识到它是多余的）。我不确定这是否会导致问题，但我已经看到了两者都被使用的例子。

最后，每次进行串行连接（例如打开和关闭端口）时，它肯定可以处理 Arduino 自动重置。总之，它似乎是通过串口发送数据，但无法从串口读取传入的数据。

感谢您阅读本文，如果有人能指出我正确的方向，将不胜感激。

**编辑 #1：**即使在代码 1 中使用 BeginInvoke 之后，它仍然会死锁，因为从未调用过事件处理程序。

**编辑#2：**根据新手的建议对代码 1 进行编辑。

**编辑#3：**添加主窗体初始化并将代码 1 更新为当前状态。

**编辑＃4：**删除（注释掉）事件处理程序的睡眠。我在事件处理程序期间正在睡觉，因此我无法收到微控制器发送给我的任何内容。代码现在按预期工作正常。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-06T08:26:36.470

> 确保您使用的是**COM1**，如果您不使用 COM1 串口，请通过**计算机**->**设备管理器**->**端口（COM & LPT）** -> **选择要更改的 COM** ->**端口设置**->**高级**-> **ComPort 编号**- >**选择 COM1**。
> 
> 确保您已在 COM1 的 pin2 和 pin3 之间安装跳线**/****用**螺丝刀**连接**。
> 
>  **将**button1**和**textBox1**添加到**Form**并运行此程序**

 **```
using System;
using System.Windows.Forms;
using System.IO.Ports;
using System.Threading;
using System.Text;

namespace WindowsFormsApplication1 {
    public partial class Form1 : Form {

        const int MAX_BUFFER = 100;

        int i = 0;
        byte[] DataReceived = new byte[MAX_BUFFER];
        SerialPort serialPort = new SerialPort();

        public Form1() {
            InitializeComponent();
            serialPort.DataReceived += new SerialDataReceivedEventHandler(serialPort_DataReceived);
        }

        void serialPort_DataReceived(object sender, SerialDataReceivedEventArgs e) {
            // wait data ready
            Thread.Sleep(500);

            // while data ready in buffer
            while (serialPort.IsOpen && serialPort.BytesToRead > 0) {
                // read data serial
                DataReceived[i] = Convert.ToByte(serialPort.ReadByte());

                // counter data
                i++;

                // reset conter if more then maxvalue
                if (i >= MAX_BUFFER) {
                    i = 0;
                }
            }

            if (i == 1 && DataReceived[0] == ASCIIEncoding.ASCII.GetBytes("^")[0]) {
                this.textBox1.Invoke(new Action(() => {
                    this.textBox1.Text = ASCIIEncoding.ASCII.GetString(DataReceived, 0, 1);

                }));
            }

        }

        public void InitSerialPort() {
            serialPort.PortName = "COM1";
            serialPort.BaudRate = 9600;
            serialPort.Parity = Parity.None;
            serialPort.DataBits = 8;
            serialPort.StopBits = StopBits.One;
            serialPort.ReceivedBytesThreshold = 1;
        }

        private void Form1_Load(object sender, EventArgs e) {
            // initialize serial port
            InitSerialPort();

            // assure port is closed before open it
            if (serialPort != null && serialPort.IsOpen) {
                serialPort.Close();
            }
            serialPort.Open();
        }

        private void button1_Click(object sender, EventArgs e) {
            if (serialPort.IsOpen) {
                serialPort.Write("^");
                // wait data sent
                Thread.Sleep(500);
            }
        }
    }
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-17T06:54:21.713

根据我的第四次编辑，删除（注释掉）事件处理程序的睡眠。我在事件处理程序期间正在睡觉，因此我无法收到微控制器发送给我的任何内容。代码现在按预期工作正常。两个组件上的串行端口都没有问题。**

# java - 尝试将照片动态插入水平滚动视图（android）

> ID：15781841
> 
> 赞同：0
> 
> 时间：2013-04-03T07:57:13.230
> 
> 标签：java, android, arrays, horizontalscrollview

我正在尝试将我的可绘制文件夹中的照片提取到 ImageView 数组中，并将该数组中的视图作为子元素添加到作为水平滚动视图的一部分的线性布局中。

但是，当我启动该应用程序时，它会意外停止。有谁知道我的代码是否有问题。谢谢你的帮助。

```
package com.example.myfirstapp;

import java.lang.reflect.Field;

import android.os.Bundle;
import android.app.Activity;
import android.graphics.drawable.Drawable;
import android.text.Layout;
import android.view.Menu;
import android.view.View;
import android.widget.ImageView;
import android.widget.LinearLayout;

public class NewGallery extends Activity {

@Override
protected void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.activity_new_gallery);

    LinearLayout gallery = (LinearLayout) findViewById(R.id.mygallery);

    Field[] field = R.drawable.class.getFields();

    final int arraylength = field.length;

        ImageView[] images = new ImageView[arraylength];

        for (int i=0; i<=arraylength; i=i+1)
                { 

                  images[i] = new ImageView(getApplicationContext());           
                  images[i].setImageDrawable(getResources().getDrawable(getResources().getIdentifier("icon"+i, "drawable", getPackageName())));
                  gallery.addView(images[i]);

                }

}

@Override
public boolean onCreateOptionsMenu(Menu menu) {
    // Inflate the menu; this adds items to the action bar if it is present.
    getMenuInflater().inflate(R.menu.activity_new_gallery, menu);
    return true;
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-03T08:13:00.190

如果您使用的是 Eclipse，请参阅 logcat 错误消息。我认为你有一个 ClassCastException 由于不正确的转换：

```
LinearLayout gallery = (LinearLayout) findViewById(R.id.mygallery). 
```

你确定你正在投射正确的观点吗？

# javascript - Python (GAE) 中的 Pubnub Presence 功能

> ID：15781842
> 
> 赞同：1
> 
> 时间：2013-04-03T07:57:14.050
> 
> 标签：javascript, python, google-app-engine, pubnub, user-presence

PubNub，对于实时通信来说真的很棒。根据 pubnub 团队提供的文档，我已经完成了`subscribe`，`publish`例如，它的工作正常。

现在想知道如何在 Python（GAE）应用程序中使用 PubNub 频道获得特定用户已经/存在，但我没有找到如何在服务器端和客户端实现此功能的完整指南。

**注意：**我在这里使用 Python Google App Engine 和 Javascript。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-03T11:15:15.907

PubNub presence is a way to follow up on joins/leaves in a channel, what you need is the here_now feature if I understand correctly,

Taken from the Pyton lib is ([https://github.com/pubnub/pubnub-api/tree/master/python/](https://github.com/pubnub/pubnub-api/tree/master/python/))

```
here_now = pubnub.here_now({
'channel' : 'hello_world',
})

print(here_now['occupancy'])
print(here_now['uuids']) 
```

And now you can iterate on whoever is in the channel right now, this can't be done in the javascript though so you'd have to have perhaps another channel for each of your real channels that you can send the information from the server-side to the client side and then update something accordingly.

# jquery - 尝试通过 url 加载到 jquery 滑块中的特定幻灯片

> ID：15781846
> 
> 赞同：0
> 
> 时间：2013-04-03T07:57:31.443
> 
> 标签：jquery, arrays, load, slider

我正在尝试从位于单独页面上的按钮链接到滑块中的特定幻灯片，因此锚链接将不起作用。我曾考虑在位于滑块上方的滑块文档中使用锚链接，但没有奏效。

理想情况下，我希望能够以这样的方式访问特定的幻灯片。

```
http://myslider.com/index.html#1
http://myslider.com/index.html#2
http://myslider.com/index.html#3, etc. 
```

我正在使用 Awkward Showcase 滑块。每张幻灯片都位于这样的 div 中：

```
<div class="showcase-slide">
    <!-- Put the slide content in a div with the class .showcase-content. -->
    <div class="showcase-content">
        <img src="images/01.jpg" alt="01" />
    </div>
</div> 
```

这是滑块的示例页面：http: [//showcase.awkwardgroup.com/](http://showcase.awkwardgroup.com/)

基本上，我正在寻找一种通过指定 url 直接加载到幻灯片 2 或 4 等的方法。

我知道我需要链接到数组，我想我需要在这个函数中添加一些东西......可能。

```
 var contentArray = [];
    var thumbnailArray = [];
    var content_count = 0;
    showcase.children('.showcase-slide').each(function()
    {
        // Get content
        var object = jQuery(this);
        content_count++;

        if(window.location.hash) {
        // Fragment exists
        var myhash = window.location.hash.substring(1);
        $("a[i++'" + myhash + "']").click();
        } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-03T16:53:52.950

在加载时尝试找到导航元素并触发点击。

```
$(window).load(function() {
  if(window.location.hash) {
   // Fragment exists
   var myhash = window.location.hash.substring(1);
   $("#showcase-navigation-button-"+myhash).trigger('click');
  }
}); 
```

上面的例子只是一个展示。

# php - 自定义正则表达式

> ID：15781849
> 
> 赞同：-12
> 
> 时间：2013-04-03T07:57:55.613
> 
> 标签：php, regex

如何使用正则表达式来分隔

```
BCT34385Z0000N07518Z
BCT34395Z0000N07518Z 
```

成`BCT343`格式？我正在使用它来让 magento 打破 2 种类型的序列号 ie `BCT34385Z0000N07518Z`并`BCT34395Z0000N07518Z`转换为正则表达式来识别前 6 个字符 ie `BCT343`。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-03T08:16:53.380

如果您需要将这些字符串分成两部分（前六个字符和其余部分），则根本不需要正则表达式。你可以这样做[`substr`](http://php.net/manual/en/function.substr.php)：

```
<?php
    $str1 = substr("BCT34385Z0000N07518Z", 0, 6); // BCT343
    $str2 = substr("BCT34385Z0000N07518Z", 6); // 85Z0000N07518Z
?> 
```

如果您想使用正则表达式执行此操作，您应该设置两个捕获组，一个用于前六个字符，另一个用于字符串的其余部分。正则表达式看起来像：

```
/^(.{6})(.*)$/

/^                // Start of input
(                 // Start capture group 1
  .               // Any charactger
  {6}             // Repeated exactly 6 times
)                 // End of capture group 1
(                 // Start capture group 1
  .               // Any character
  *               // Repeated 0 or more times
)                 // End of capture group 2
$/                // End of input 
```

你应该使用[`preg_match()`](http://php.net/manual/en/function.preg-match.php)它。请记住，每个捕获组都将位于匹配数组的位置。[请参阅此RegExr](http://regexr.com?34cjb)中的正则表达式示例。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-03T08:19:27.817

这是**非常糟糕的做法**，但是因为您要求这样做：

```
$str = 'BCT34385Z0000N07518Z';
preg_match('/^(.{6})(.*?)$/', $str, $result);

echo $result[1]; // 'BCT343'
echo $result[2]; // '85Z0000N07518Z' 
```

或者如果你想要一个 if 语句：

```
$str = ...;

if (preg_match('/^BCT343/', $str)) {
    // yes!
} 
```

# django - django-registration 没有名为 simple 的模块

> ID：15781853
> 
> 赞同：2
> 
> 时间：2013-04-03T07:58:17.613
> 
> 标签：django, django-registration

我正在尝试使用本教程在我的项目上安装 django-registration：http: [//www.michelepasin.org/blog/2011/01/14/setting-up-django-registration/](http://www.michelepasin.org/blog/2011/01/14/setting-up-django-registration/) 但我收到此错误：

```
ImportError at /
No module named simple
Request Method: GET
Request URL:    http://127.0.0.1:8000/
Django Version: 1.5
Exception Type: ImportError
Exception Value:    
No module named simple
Exception Location: C:\Python27\lib\site-packages\registration\backends\default\urls.py in <module>, line 22
Python Executable:  C:\Python27\python.exe
Python Version: 2.7.3
Python Path:    
['C:\\Users\\Fabrizio\\Desktop\\django\\test\\gym',
 'C:\\Python27\\lib\\site-packages\\setuptools-0.6c11-py2.7.egg',
 'C:\\Python27\\lib\\site-packages\\pip-1.2.1-py2.7.egg',
 'C:\\Windows\\system32\\python27.zip',
 'C:\\Python27\\DLLs',
 'C:\\Python27\\lib',
 'C:\\Python27\\lib\\plat-win',
 'C:\\Python27\\lib\\lib-tk',
 'C:\\Python27',
 'C:\\Python27\\lib\\site-packages']
Server time:    Wed, 3 Apr 2013 09:39:44 +0200 
```

我在这里找到了一些答案，但我无法完全理解解决方案，您能解释一下如何解决吗？谢谢你。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-03T09:31:47.860

该教程中的下载链接指向旧版本的 django-registration，它与 Django 1.5 不兼容。您应该直接从 bitbucket 查看最新版本并按照那里的说明进行操作。

# vb.net - 禁用 DataGridView 中一行的排序

> ID：15781859
> 
> 赞同：2
> 
> 时间：2013-04-03T07:58:32.260
> 
> 标签：vb.net, datagridview

我在我的 VB.NET-GUI 上显示了一个 DataGridView。在该表中，最后一行是显示平均值的 Total-Row。

在列之后排序实际上必须是可能的，但我想以某种方式修复 Total-Row 以便它保持最后一行。这是可能的还是某种标准行为？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-03T08:09:59.270

似乎*TotalRow*属性不存在。

可以肯定的是，通过使用自定义排序功能。

首先，确保所有列都`SortMode`设置为`Automatic`.

您需要以某种方式识别您的*TotalRow*，因此您可以将其`Tag`属性设置为 string `"Average"`：

```
row.Tag = "Average" 
```

然后添加此代码：

```
Private Sub DataGridView1_SortCompare(sender As Object,
        e As DataGridViewSortCompareEventArgs) Handles DataGridView1.SortCompare

    If (DataGridView1.Rows(e.RowIndex1).Tag = "Average") Then
        e.SortResult = If(DataGridView1.SortOrder = SortOrder.Ascending, 1, -1)
    ElseIf (DataGridView1.Rows(e.RowIndex2).Tag = "Average") Then
        e.SortResult = If(DataGridView1.SortOrder = SortOrder.Ascending, -1, 1)
    Else
        e.SortResult = System.String.Compare(e.CellValue1.ToString(),
                                             e.CellValue2.ToString())
    End If

    e.Handled = True

End Sub 
```

这会成功的！

**编辑 ：**

既然您谈到了*平均值*，我假设您想按元素的数值而不是按 ASCII 顺序排列元素。

如果您确定您的 DataGridView 将只包含数字，您可以使用*大于*运算符而不是`String.Compare`最后一个 if 分支中的运算符：

```
e.SortResult = If(e.CellValue1 > e.CellValue2, 1, -1) 
```

这样，您的号码将正确排序（*10, 20, 100, 200*而不是*10, 100, 20, 200*）。

如果需要比较字符串*和*数字，我会寻找一种[Natural String Compare algorithm](https://stackoverflow.com/a/11624488/1409881)。

# apache2 - 修改 apache 上的代理内容

> ID：15781861
> 
> 赞同：0
> 
> 时间：2013-04-03T07:58:38.140
> 
> 标签：apache2, mod-proxy

我有一个运行 mod_proxy 的 Apache 2.2 服务器，我想在代理将输出发送到客户端之前对其进行操作，但我需要比 mod_substitute 更强大的东西。有没有办法可以通过 mod_perl 之类的东西运行代理内容，这样我就可以修改部分输出？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-05T12:27:09.883

是的，您可以使用 mod_perl 输出过滤器：

[https://perl.apache.org/docs/2.0/user/handlers/filters.html#Output_Filters](https://perl.apache.org/docs/2.0/user/handlers/filters.html#Output_Filters)

# javascript - 关闭浏览器时抑制/绕过 IE 警报消息

> ID：15781862
> 
> 赞同：1
> 
> 时间：2013-04-03T07:58:40.243
> 
> 标签：javascript, asp.net, c#-4.0

我有一个网页，其中加载了一个 ajax 模式弹出窗口。当模式弹出窗口存在时，我们需要限制用户关闭浏览器。我们已经处理了 onbeforeunload 事件，但它显示了一个弹出窗口“你确定你想要ot 离开此页面”。如何抑制此弹出窗口并阻止页面关闭。

```
<script>
window.onbeforeunload=function() {
window.alert("Hai");return false;
}
</script> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-03T08:39:27.640

不幸的是，您永远无法阻止关闭浏览器窗口，因为这会导致各种滥用（想象一个色情网站打开一个您无法关闭的窗口）。

onbeforeunload 事件处理程序应该返回一个字符串，该字符串可以向用户解释如果他关闭窗口会发生什么，因为返回的字符串显示在确认框中。例如：

```
window.onbeforeunload = function() { 
    return "If you close the window your unsaved changes will be lost!";
} 
```

该字符串与带有确定和取消按钮的不可覆盖的确认对话框相结合，有望引导用户做出正确的决定。

# c# - 许多链接按钮的字符串文本（asp.net c#）

> ID：15781873
> 
> 赞同：0
> 
> 时间：2013-04-03T07:59:11.517
> 
> 标签：c#, asp.net, string, linkbutton

我正在从为文章保存标签的表格列中检索数据，**例如：** `"animals dogs cats"`并在`linkbutton`. 如果我单击它，则页面将重定向到`"Tags.aspx?name=animals dogs cats"`.

`"Tags.aspx?name=cats"` 如果我点击了“猫”，是否可以将页面重定向到，或者可以拆分字符串并自己显示每个单词`linkbutton`（不使用类似的东西`listview`）？

谢谢，橡树

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-03T08:19:05.807

如果您不想使用 Web 数据绑定控件，`Repeater`您可以`LinkButton`动态创建 s。`Page_Load`请记住最迟在具有与以前相同的 ID 的回发中重新创建它们：

```
protected void Page_Init(object sender, EventArgs e)
{
    createTagButtons();
}

private void createTagButtons()
{ 
    var tblTags = new DataTable();
    using (var con = new SqlConnection(connectionString))
    using (var da = new SqlDataAdapter("SELECT TagID, TagName FROM dbo.Tags ORDER BY TagName", con))
    {
        da.Fill(tblTags);
    }

    foreach (DataRow row in tblTags.Rows)
    {
        int tagID =  row.Field<int>("TagID");
        string tagName = row.Field<string>("TagName");
        LinkButton tagButton = new LinkButton();
        tagButton.ID = "tagButton_" + tagID;
        tagButton.CommandArgument = tagName;
        tagButton.Click += TagLinkClicked;
        this.TagPanel.Controls.Add(tagButton);
    }
}

private void TagLinkClicked(Object sender, EventArgs e)
{
    LinkButton tagLink = (LinkButton)sender;
    string url = string.Format("Tags.aspx?name={0}", tagLink.CommandArgument);
    Response.Redirect(url);
} 
```

在 aspx 上，您可以使用`Panel`：

```
<asp:Panel ID="TagPanel" runat="server"></asp:Panel> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-03T08:06:55.780

您可以使用`string[] words = your_string.Split();`然后使用循环创建按钮

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-03T08:06:16.967

链接将仅显示从控制器调用的一个视图。也就是说，如果你有一个标签“cat”并且这个标签与某个视图相关，那么这个标签会调用写在控制器中的那个视图。

# javascript - 在javascript中自动生成一个字段

> ID：15781876
> 
> 赞同：0
> 
> 时间：2013-04-03T07:59:20.730
> 
> 标签：javascript

我一直在尝试填写一个自动生成的字段，例如在选项选择框中选择 70 岁以上时自动填写“退休”。

请问我能得到任何帮助吗:)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-03T08:16:32.927

这是一种可能的方法：

```
var age = document.getElementById('age');
var status = document.getElementById('status');
age.onchange = function(){
    switch(parseInt(this.value)){
        case 20: status.value = 'working'; break;
        case 50: status.value = 'working'; break;
        case 70: status.value = 'retired'; break;
        default: status.value = 'Unknown';
    }
}; 
```

演示：http: [//jsfiddle.net/louisbros/zV6D8/](http://jsfiddle.net/louisbros/zV6D8/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-03T08:09:11.623

您可以有条件地更改现有字段的可见性，而不是“生成”新字段。最简单的例子：

```
<script>
    function checkAge(f){

      var age = f.options[f.selectedIndex].value
      var field = document.getElementById('field');

      if(age>69) 
         field.style.display='';
      else
          field.style.display='none';
    }
</script>
<select onchange="checkAge(this)">
<option value="10">10 years</option>
<option value="30">30 years</option>
.
.
.
<option value="70">70 years</option>
</select>
<input type="text" id="field" value="" style="display:none" /> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-03T08:20:54.990

最好是用字段显示/隐藏 div。另外，它消耗的资源更少......否则请尝试以下操作：

```
<form id="my-form">
    <input id="age-textbox" name="age" text="" />
</form>

$('#age-textbox').blur(function(){
   if (!isNaN($(this).val())
       && parseInt($(this).val()) >= 70)
   {    
       var field = $('<input/>', { id: "test", name: "test" });
       $('#my-form').append(field);
   }
}); 
```

# objective-c - 如何使用 UIActivityViewController 发送 PDF 文件

> ID：15781877
> 
> 赞同：37
> 
> 时间：2013-04-03T07:59:23.347
> 
> 标签：objective-c, swift, ios6, uiactivityviewcontroller

我正在尝试使用`UIActivityViewController`. 到目前为止，使用一种相当基本的方法一切正常，但我遇到的一个问题是，当我选择通过邮件发送选项时，PDF 的文件名`Attachment-1`而不是`Calculation.PDF`我给文件的名称。

我不介意标题的太多变化，但是在将文件发送给使用 Windows PC 的人时，缺少 .pdf 扩展名似乎确实会导致问题，我想解决这个问题。

我看过： [使用 UIActivityViewController 发送的 UIImage 的控制文件名](https://stackoverflow.com/questions/15479284/control-file-name-of-uiimage-send-with-uiactivityviewcontroller)

但看不到等效的方法：

```
[mailComposer addAttachmentData: UIImagePNGRepresentation(viewImage) mimeType:@"" fileName:@"myImage.png"]; 
```

这将适用于 PDF 文件。这是没有定制就无法解决的问题，还是有一个简单的解决方案来解决这个问题？

* * *

## 回答 #1

> 赞同：65
> 
> 时间：2014-03-26T14:02:56.573

尝试这个

```
NSData *pdfData = [NSData dataWithContentsOfFile:pdfFilePath];
UIActivityViewController *activityViewController = [[UIActivityViewController alloc] initWithActivityItems:@[@"Test", pdfData] applicationActivities:nil];

[self presentViewController:activityViewController animated:YES completion:nil]; 
```

并且

```
NSString *str = [[NSBundle mainBundle] pathForResource:@"AppDistributionGuide" ofType:@"pdf"];   
UIActivityViewController *activityViewController = [[UIActivityViewController alloc] initWithActivityItems:@[@"Test", [NSURL fileURLWithPath:str]] applicationActivities:nil]; 
```

* * *

## 回答 #2

> 赞同：16
> 
> 时间：2015-10-21T12:42:52.797

**迅速**

```
let url = NSURL.fileURLWithPath(fileName)

let activityViewController = UIActivityViewController(activityItems: [url] , applicationActivities: nil)

presentViewController(activityViewController, animated: true, completion: nil) 
```

* * *

## 回答 #3

> 赞同：12
> 
> 时间：2018-03-19T08:46:34.507

# 斯威夫特 4.0

在这里我附加了代码。我只是添加了线程处理来呈现“activityViewController”，因为在加载实际数据之前存在这个视图控制器。

```
let url = NSURLfileURL(withPath:fileName)

let activityViewController = UIActivityViewController(activityItems: [url] , applicationActivities: nil)

DispatchQueue.main.async {

    self.present(activityViewController, animated: true, completion: nil)
} 
```

* * *

## 回答 #4

> 赞同：9
> 
> 时间：2016-10-01T20:20:32.857

以上关于 Swift 的列表在 Swift 3 中已弃用

```
let url = NSURL.fileURL(withPath: fileName)

let activityViewController = UIActivityViewController(activityItems: [url] , applicationActivities: nil)

present(activityViewController,
    animated: true,
    completion: nil) 
```

* * *

## 回答 #5

> 赞同：3
> 
> 时间：2018-08-18T11:16:16.780

**让 Objective-C 测试代码共享 PDF**

```
- (void)downloadPDFfile:(NSString *)fileName withFileURL:(NSString *)shareURL {
    dispatch_async(dispatch_get_main_queue(), ^ {
        NSString *documentDir = [NSSearchPathForDirectoriesInDomains(NSDocumentDirectory, NSUserDomainMask, YES) firstObject];
        NSString *filePath = [documentDir stringByAppendingPathComponent:[NSString stringWithFormat:@"/%@",[self generateName:fileName withFiletype:@"pdf"]]];
        NSURLRequest *request = [NSURLRequest requestWithURL:[NSURL URLWithString:shareURL]];
        NSURLSession *session = [NSURLSession sharedSession];
        NSURLSessionDataTask *task = [session dataTaskWithRequest:request
                                                completionHandler:
                                      ^(NSData *data, NSURLResponse *response, NSError *error) {
                                          if (error) {
                                              NSLog(@"Download Error:%@",error.description);
                                          } else if (data && error == nil) {
                                              dispatch_async(dispatch_get_main_queue(), ^{
                                                  [data writeToFile:filePath atomically:YES];
                                                  [self shareFile:fileName withFilepath:filePath];
                                              });
                                          }
                                      }];

        [task resume];
    });
}

-(void)shareFile:(NSString*)withfileName withFilepath:(NSString*)filePath {
    NSMutableArray *items = [NSMutableArray array];

    if (filePath) {
        [items addObject:[NSURL fileURLWithPath:filePath]];
    }

    UIActivityViewController *activityViewController = [[UIActivityViewController alloc] initWithActivityItems:items applicationActivities:nil];
    [activityViewController setValue:withfileName forKey:@"subject"];

    if (UI_USER_INTERFACE_IDIOM() == UIUserInterfaceIdiomPad) {
        activityViewController.modalPresentationStyle = UIModalPresentationPopover;
        UIPopoverPresentationController *popPC = activityViewController.popoverPresentationController;
        popPC.sourceView = self.view;
        CGRect sourceRext = CGRectZero;
        sourceRext.origin = CGPointMake(self.view.frame.size.width-30, 0);
        popPC.sourceRect = sourceRext;
        popPC.permittedArrowDirections = UIPopoverArrowDirectionDown;
    }

    [activityViewController setCompletionWithItemsHandler:
     ^(NSString *activityType, BOOL completed, NSArray *returnedItems, NSError *activityError) {

     }];
    [self presentViewController:activityViewController animated:YES completion:nil];
}

-(NSString*)generateName:(NSString*)title withFiletype:(NSString*)type {
    NSString *subject = [title stringByReplacingOccurrencesOfString:@" " withString:@"_"];
    subject = [NSString stringWithFormat:@"%@.%@",subject,type];
    return subject;
} 
```

**调用函数如下**

```
[self downloadPDFfile:@"yourFileName" withFileURL:shareURL]; 
```

* * *

## 回答 #6

> 赞同：2
> 
> 时间：2016-12-02T20:10:17.917

**对于斯威夫特 3**

您必须有一个`URL`包含要发送的 PDF 路径的数组。

```
let urlArray = [pdfPath1, pdfPath2] 
```

然后创建一个`UIActivityViewController`：

```
let activityController = UIActivityViewController(activityItems: urlArray, applicationActivities: nil) 
```

如果您使用 a`UIBarButtonItem`来执行该操作，则可以实施此操作以防止 iPad 上出现错误：

```
if let popover = activityController.popoverPresentationController {
   popover.barButtonItem = self.barButtonItem
} 
```

最后你必须提出`activityController`：

```
self.present(activityController, animated: true, completion: nil) 
```

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2018-10-11T09:34:06.247

Muruganandham K 的回答简单而优雅。但是，它在 iOS 9 中不起作用。为了使它起作用，如果您删除`@[@"Test"`并仅传递 pdfData，则会生成一个附件。

```
NSData *pdfData = [NSData dataWithContentsOfFile:pdfFilePath];
UIActivityViewController *activityViewController = [[UIActivityViewController alloc] initWithActivityItems:pdfData applicationActivities:nil];

[self presentViewController:activityViewController animated:YES completion:nil]; 
```

* * *

## 回答 #8

> 赞同：-3
> 
> 时间：2016-04-29T04:32:48.863

可以试试这个。。

```
 #define IS_IPAD UI_USER_INTERFACE_IDIOM() == UIUserInterfaceIdiomPad

    // Validate PDF using NSData
    - (BOOL)isValidePDF:(NSData *)pdfData {
        BOOL isPDF = false;
        if (pdfData.length >= 1024 ) {

            int startMetaCount = 4, endMetaCount = 5;
            // check pdf data is the NSData with embedded %PDF & %%EOF
            NSData *startPDFData = [NSData dataWithBytes:"%PDF" length:startMetaCount];
            NSData *endPDFData = [NSData dataWithBytes:"%%EOF" length:endMetaCount];
            // startPDFData, endPDFData data are the NSData with embedded in pdfData
            NSRange startRange = [pdfData rangeOfData:startPDFData options:0 range:NSMakeRange(0, 1024)];
            NSRange endRange = [pdfData rangeOfData:endPDFData options:0 range:NSMakeRange(0, pdfData.length)];

            if (startRange.location != NSNotFound && startRange.length == startMetaCount && endRange.location != NSNotFound && endRange.length == endMetaCount ) {
                // This assumes the checkstartPDFData doesn't have a specific range in file pdf data
                isPDF = true;

            } else  {
                isPDF = false;
            }
        }
        return isPDF;
    }

    // Download PDF file in asynchronous way and validate pdf file formate.
    - (void)downloadPDFfile:(NSString *) fileName withFileURL:(NSString *) url {
        NSString *filePath = @"";
         dispatch_async(dispatch_get_main_queue(), ^ {
            NSString *documentDir = [NSSearchPathForDirectoriesInDomains(NSDocumentDirectory, NSUserDomainMask, YES) firstObject];
            filePath = [documentDir stringByAppendingPathComponent:[NSString stringWithFormat:@"/Attachments/%@",[self generateName:fileName withFiletype:@"pdf"]]];
            NSURLRequest *request = [NSURLRequest requestWithURL:[NSURL URLWithString:url]];
            [NSURLConnection sendAsynchronousRequest:request queue:[NSOperationQueue currentQueue] completionHandler:^(NSURLResponse *response, NSData *data, NSError *error) {
                if (error) {
                        NSLog(@"Download Error:%@",error.description);
                } else if (data && error == nil) {
                    bool checkPdfFormat = [self isValidePDF:data];
                    if (checkPdfFormat) {
                        //saving is done on main thread
                        dispatch_async(dispatch_get_main_queue(), ^{
                            [data writeToFile:filePath atomically:YES];
                            NSURL *url = [NSURL fileURLWithPath:filePath];
                            [self triggerShare:fileName withFilepath:filePath];
                        });
                    }
                }
            }];
        });
    }

    // Trigger default share and print functionality using UIActivityViewController
    -(void) triggerShare:(NSString*)fileName withFilepath:(NSString*)filePath {
            * Set this available field on the activity controller */
            NSMutableArray *items = [NSMutableArray array];

            if (filePath) {
                [items addObject:[NSURL fileURLWithPath:filePath]];
            }

            UIActivityViewController *activityViewController = [[UIActivityViewController alloc] initWithActivityItems:items applicationActivities:nil];
            [activityViewController setValue:fileName forKey:@"subject"]; // Set the mail subject.

            if (IS_IPAD) {
                activityViewController.modalPresentationStyle = UIModalPresentationPopover;
                UIPopoverPresentationController *popPC = activityViewController.popoverPresentationController;
                popPC.sourceView = self.view;
                CGRect sourceRext = CGRectZero;
                sourceRext.origin = CGPointMake(self.view.frame.size.width-30, 0 ); // I have share button in navigation bar. ;)
                popPC.sourceRect = sourceRext;
                popPC.permittedArrowDirections = UIPopoverArrowDirectionUp;
            }

            [activityViewController setCompletionWithItemsHandler:
             ^(NSString *activityType, BOOL completed, NSArray *returnedItems, NSError *activityError) {
             }];
            [self presentViewController:activityViewController animated:YES completion:nil];
    }

    -(NSString*) generateName:(NSString*)title withFiletype:(NSString*)type {

        NSString *subject = [title stringByReplacingOccurrencesOfString:@" " withString:@"_"];
        subject = [NSString stringWithFormat:@"%@.%@",subject,type];
        return subject;
    } 
```

# jquery - 尝试使用 jQuery 解析 json 文件时显示 304 Not Modified 消息

> ID：15781878
> 
> 赞同：0
> 
> 时间：2013-04-03T07:59:27.323
> 
> 标签：jquery, json

```
$(document).ready(function() {

            console.log(getJ());
            function getJ() {
                $.getJSON('json.json', function(data) {

                    $.each(data, function(key, val) {
                        console.log(key);

                    });
                });

            }

        }); 
```

上面是我的 HTML 代码，下面是我的 json.json 文件的代码

```
{
    "message": {
        "success":"Information inserted successfully.",
        "update":"Information updated successfully.",
        "delete":"Information deleted successfully.",
    },
    "Jennifer": {
        "status":"Active"
    },
    "James": {
        "status":"Active",
        "age":56,
        "count":10,
        "progress":0.0029857,
        "bad":0
    }
} 
```

当我尝试解析这一堆代码时，它显示 304 消息，我没有得到任何所需的结果。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-03T08:29:26.157

您可以使 url 独一无二：

```
$.getJSON('json.json?_=' + new Date().getTime(), function(data) {
    $.each(data, function(key, val) {
        console.log(key);
    });
}); 
```

或使用`$.ajax`：

```
$.ajax({
    url: 'json.json',
    dataType: 'json',
    cache: false,
    success: function(data) {
        // ...
    }
}); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-03T08:02:32.650

因为您的 JSON 不在数组中..您不需要使用`$.each`.. 直接使用`.`

这里

```
 $.getJSON('json.json', function(data) {

                console.log(data.message.success); //show Information inserted successfully.
                console.log(data.Jennifer.status); //Active
            }); 
```

# android - 使用 for 循环和 1000 毫秒延迟更新 android 中的 TextView

> ID：15781880
> 
> 赞同：0
> 
> 时间：2013-04-03T07:59:36.373
> 
> 标签：android

我无法制作一个简单的程序来更新 UI。

我要做的是在 for 循环中创建一个计时器，该计时器在单击按钮时启动

```
public void buttonClick(View v);

for(int i=0;i<100;i++){
    textView.setText(i+"");

    try{
        thread.sleep(1000);
        catch{(yadayadayada)
    }
} 
```

我正在尝试在 for 循环中创建一个计数器，以延迟一毫秒来更新文本视图。

我的第二次尝试仍然没有好

```
package com.example.dbq;

import android.os.Bundle;
import android.os.Handler;
import android.app.Activity;
import android.view.Menu;
import android.view.View;
import android.widget.Button;
import android.widget.TextView;

public class MainActivity extends Activity {
    Handler mHandler = new Handler();
    TextView tv1;
    Button b1;
    int n=1;
    @Override
    protected void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.activity_main);

        tv1=(TextView)findViewById(R.id.textView1);
        b1 =(Button)findViewById(R.id.button1);
        b1.setOnClickListener(new View.OnClickListener() {
            @Override
            public void onClick(View v) {
                for(int i=0;i<100;i++){ 
                    Runnable r=new Runnable() {
                        @Override
                        public void run() {
                            tv1.setText(n +" runs");
                        }
                    };

                    mHandler.post(r);
                    mHandler.postDelayed(r, 1000);
                    n++;
                }
            }
        }); //end onclick
    }

    @Override
    public boolean onCreateOptionsMenu(Menu menu) {
        // Inflate the menu; this adds items to the action bar if it is present.
        getMenuInflater().inflate(R.menu.main, menu);
        return true;
    }
} 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-03T08:06:17.273

不要使用`thread.sleep`——你不需要让你的线程休眠——你需要每隔一段时间更新你的 UI，这是不同的。只需使用`Handler`，然后创建`Runnable`更新您的 UI 或调用方法来执行此操作，最后发布您的`Runnable`使用`Handler.postDelayed()`。为了保持计时器工作，您`Runnable`必须再次发布，但这很明显。当你要离开你的片段/活动时，记得删除你排队的可运行文件

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-03T08:34:52.843

使用按固定速率安排的计时器。下面更新的文本视图具有每秒递增的计数。

请记住在 UI 线程上更新文本视图并在需要时取消计时器。

```
 _tv = (TextView) findViewById( R.id.textView1 ); 
```

在按钮上单击启动计时器。开始按钮启动计时器。

```
 _t = new Timer(); 
    _t.scheduleAtFixedRate( new TimerTask() {
            @Override
            public void run() {
                _count++;

                runOnUiThread(new Runnable() //run on ui thread
                 {
                  public void run() 
                  { 
                     _tv.setText(""+_count);
                 }
                 });
            }
        }, 1000, 1000 ); 
```

让另一个按钮停止以取消计时器

```
 _t.cancel(); 
```

您还可以使用 WebnetMobile 建议的处理程序

# java - 如何使用 RestTemplate 转发大文件？

> ID：15781885
> 
> 赞同：41
> 
> 时间：2013-04-03T08:00:07.243
> 
> 标签：java, spring, groovy, resttemplate

我有一个网络服务调用，可以通过它上传 zip 文件。然后将文件转发到另一个服务进行存储、解压缩等。现在文件存储在文件系统上，然后构建 FileSystemResource。

```
Resource zipFile = new FileSystemResource(tempFile.getAbsolutePath()); 
```

我可以使用 ByteStreamResource 来节省时间（在转发之前不需要将文件保存在磁盘上），但为此我需要构建一个字节数组。如果文件很大，我会收到“OutOfMemory : java heap space”错误。

```
ByteArrayResource r = new ByteArrayResource(inputStream.getBytes()); 
```

使用 RestTemplate 转发文件而不出现 OutOfMemory 错误的任何解决方案？

* * *

## 回答 #1

> 赞同：43
> 
> 时间：2013-04-03T10:49:22.697

**编辑**：其他答案更好（使用`Resource`）[https://stackoverflow.com/a/36226006/116509](https://stackoverflow.com/a/36226006/116509)

我原来的答案：

您可以`execute`用于这种低级操作。在这个片段中，我使用了 Commons IO 的`copy`方法来复制输入流。您需要`HttpMessageConverterExtractor`针对您期望的响应类型自定义。

```
final InputStream fis = new FileInputStream(new File("c:\\autoexec.bat")); // or whatever
final RequestCallback requestCallback = new RequestCallback() {
     @Override
    public void doWithRequest(final ClientHttpRequest request) throws IOException {
        request.getHeaders().add("Content-type", "application/octet-stream");
        IOUtils.copy(fis, request.getBody());
     }
};
final RestTemplate restTemplate = new RestTemplate();
SimpleClientHttpRequestFactory requestFactory = new SimpleClientHttpRequestFactory();
requestFactory.setBufferRequestBody(false);     
restTemplate.setRequestFactory(requestFactory);     
final HttpMessageConverterExtractor<String> responseExtractor =
    new HttpMessageConverterExtractor<String>(String.class, restTemplate.getMessageConverters());
restTemplate.execute("http://localhost:4000", HttpMethod.POST, requestCallback, responseExtractor); 
```

（感谢 Baz 指出你需要打电话`setBufferRequestBody(false)`，否则会失败）

* * *

## 回答 #2

> 赞同：25
> 
> 时间：2015-09-21T14:16:06.603

您真正需要的@artbristol[答案](https://stackoverflow.com/a/15785322/25625)的唯一部分是（您可以将其设置为`RestTemplate`Spring bean）：

```
final RestTemplate restTemplate = new RestTemplate();
SimpleClientHttpRequestFactory requestFactory = new SimpleClientHttpRequestFactory();
requestFactory.setBufferRequestBody(false);     
restTemplate.setRequestFactory(requestFactory); 
```

在那之后，我认为只使用 a`FileSystemResource`作为您的请求正文会做正确的事情。

我也`InputStreamResource`成功地使用了这种方式，对于您已经拥有数据`InputStream`并且不需要多次使用它的情况。

就我而言，我们已经 gzip 压缩了我们的文件并将 a 包装`GZipInputStream`在一个`InputStreamResource`.

* * *

## 回答 #3

> 赞同：24
> 
> 时间：2016-03-25T18:45:38.437

我认为上面的答案有不必要的代码——你不需要创建一个匿名的 RequestCallback 内部类，也不需要使用 apache 的 IOUtils。

我花了一些时间研究与您类似的解决方案，这就是我想出的：

[通过使用Spring 资源接口](http://docs.spring.io/spring-framework/docs/current/javadoc-api/org/springframework/core/io/Resource.html "Spring 资源接口")和 RestTemplate， 您可以更简单地实现您的目标。

```
RestTemplate restTemplate = new RestTemplate();

SimpleClientHttpRequestFactory requestFactory = new SimpleClientHttpRequestFactory();
requestFactory.setBufferRequestBody(false);
restTemplate.setRequestFactory(requestFactory);

File file = new File("/whatever");

HttpEntity<FileSystemResource> requestEntity = new HttpEntity<>(new FileSystemResource(file));
ResponseEntity e = restTemplate.exchange("http://localhost:4000", HttpMethod.POST, requestEntity, Map.class); 
```

（此示例假设您发布到的响应是 JSON。但是，这可以通过更改返回类型类来轻松更改...设置为上面的 Map.class）

# mysql - Mysql：设置列字符集

> ID：15781886
> 
> 赞同：54
> 
> 时间：2013-04-03T08:00:14.797
> 
> 标签：mysql, utf-8, character-encoding

我有一个现有的表，我只想将一个特定列的字符集转换为 utf-8。

我知道该命令`ALTER TABLE table_name CONVERT TO CHARACTER SET utf8`对整个表执行此操作，但我正在寻找特定于列的命令。

有这个命令吗？

* * *

## 回答 #1

> 赞同：89
> 
> 时间：2013-04-03T08:02:37.890

试试这个：

```
ALTER TABLE t MODIFY col1 CHAR(50) CHARACTER SET utf8mb4; 
```

* * *

## 回答 #2

> 赞同：21
> 
> 时间：2018-09-12T20:08:04.737

我分享一下，它总能帮上忙……我最近修改了一个数据库；从 utf8 移动到 utf8mb4；这是允许我生成更改的脚本...

生成 SQL 命令以更改表：

```
SELECT CONCAT("ALTER TABLE `",`TABLE_NAME`,"` DEFAULT CHARACTER SET utf8mb4 COLLATE utf8mb4_unicode_ci;") 
FROM `information_schema`.`TABLES` 
WHERE `TABLE_SCHEMA` = 'xxxx'; 
```

生成 SQL 命令以更改每一列：

```
SELECT CONCAT("ALTER TABLE `",`TABLE_NAME`,"` MODIFY `",`COLUMN_NAME`,"` ",COLUMN_TYPE," CHARACTER SET utf8mb4 COLLATE utf8mb4_unicode_ci ",IF(`IS_NULLABLE`='YES', 'NULL', 'NOT NULL')," ",IF(`COLUMN_DEFAULT` IS NOT NULL, CONCAT(" DEFAULT '", `COLUMN_DEFAULT`, "'"), ''),";") 
FROM `information_schema`.`COLUMNS` 
WHERE `TABLE_SCHEMA` = 'xxx' AND `TABLE_NAME` = 'xxxx' AND (`CHARACTER_SET_NAME` IS NOT NULL OR `COLLATION_NAME` IS NOT NULL); 
```

请注意，对于建立关系的外键和主键，您需要在修改列之前禁用外键检查

```
SET FOREIGN_KEY_CHECKS=0; 
```

并在之后启用。

```
SET FOREIGN_KEY_CHECKS=1; 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2018-12-28T05:11:27.823

下面一个对我有用。

```
ALTER TABLE table_name   
MODIFY column_name VARCHAR(255) CHARACTER SET utf8 COLLATE utf8_unicode_ci; 
```

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2019-08-08T05:33:26.303

这个对我有用。

```
ALTER TABLE `table_name` CHANGE `column_name` `column_name` TEXT CHARACTER SET utf8 COLLATE utf8mb4_unicode_ci; 
```

# asp-classic - 使用带有vbscript的asp从站点的url获取参数

> ID：15781887
> 
> 赞同：3
> 
> 时间：2013-04-03T08:00:19.977
> 
> 标签：asp-classic, vbscript

我有用于链接到 asp 页面的 Jquery 代码，如下所示：

jQuery代码：

```
var url = "script_right2.asp?soc="+societe+"&phoneNum="+phoneNumber+"&seleDro="+sedro+"&desc="+des; 
```

我想获取`societe,phoneNumber,seleDro,desc`页面的值`script_right2.asp`

但问题是我不知道如何使用 vbscript 在 asp 页面中获取这些数据。

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2013-04-04T11:30:06.517

我不确定问题是什么，所以我会回答两次！

要使用 VBScript 复制您所拥有的内容：

```
dim stringUrl
stringUrl = "script_right2.asp?soc=" & societe & "&phoneNum=" & phoneNumber & "&seleDro=" & sedro & "&desc=" & des; 
```

* * *

或者，如果您想从查询字符串中获取变量的值，您可以这样做

```
dim soc
dim phone
dim sedro
dim desc

soc = Request.QueryString("soc")
phone = Request.QueryString("phoneNum")
sedro = Request.QueryString("seleDro")
desc = Request.QueryString("desc") 
```

# mysql - 带有记录的插入查询超出限制

> ID：15781894
> 
> 赞同：1
> 
> 时间：2013-04-03T08:00:46.353
> 
> 标签：mysql, import, phpmyadmin, dump

警告：33797274 字节的 POST 内容长度超过第 0 行未知中 8388608 字节的限制

我导出了 mysql 表的内容，并希望使用 PHPMyadmin 将其导入本地计算机中与源同名的数据库，但是当我想导入转储文件时出现此错误。

这是否意味着文件太大或什么？有什么办法可以解决这个问题吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-03T08:07:19.247

由于您的转储文件太大而无法像这样传输（某些服务器设置），您可以使用以下方法：

*   转储表的结构（没有数据）。
*   `select`特定大小的数据块；每个块小于 8MB。
*   加载结构转储，然后加载数据（以正确的顺序）

此过程可能会破坏对该表及其数据集的引用。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-03T08:04:57.543

PHPMyAdmin 通常有关于 SQL 上传的限制。

最简单的方法 - 将该 SQL 文件分成多个文件。

其他方法 -

1.  试试 GZip。
2.  在您的服务器上编辑您的 php.ini 文件并增加您的 post_max_size 和 upload_max_filesize。
3.  使用命令行总是有效的。您需要将 SQL 文件上传到远程主机才能正常工作。

    mysql -u myuser -p mydatabase < myfile.sql

# spring - javax.servlet.ServletException 无法解析为 Spring Web 应用程序中的类型

> ID：15781902
> 
> 赞同：87
> 
> 时间：2013-04-03T08:01:06.053
> 
> 标签：spring, jsp, servletexception

我正在使用 Spring 框架开发 Web 应用程序，但在某些 jsp 页面中出现以下错误。

```
javax.servlet.ServletException cannot be resolved to a type 
```

我也包括在内`servlet-api`，但仍然显示相同的错误消息。如何克服这个问题？

* * *

## 回答 #1

> 赞同：275
> 
> 时间：2013-04-03T08:12:53.927

我想这可能可行，在 Eclipse 中**选择您的项目**→ 然后单击顶部的**项目菜单栏**→ 转到**属性**→ 单击**目标运行**时→ 现在您必须选中用于运行当前项目的服务器旁边**的复选框→ 单击****应用**→然后单击**确定按钮**。就是这样，试一试。

* * *

## 回答 #2

> 赞同：27
> 
> 时间：2014-12-08T12:03:55.493

在我看来，eclipse 无法识别 java ee web api（servlet、el 等）。如果您使用的是 maven 并且不想使用指定的服务器运行时配置 eclipse，请将以下依赖项放在您的 web 项目 pom 中：

```
<dependency>  
    <groupId>javax</groupId>    
    <artifactId>javaee-web-api</artifactId>    
    <version>7.0</version> <!-- Put here the version of your Java EE app, in my case 7.0 -->
    <scope>provided</scope>
</dependency> 
```

* * *

## 回答 #3

> 赞同：12
> 
> 时间：2015-01-19T06:36:17.600

![导入 javax.servlet](https://i.stack.imgur.com/4QFXL.png)

## 第1步

转到项目的**属性**（使用`Alt`+`Enter`或右键单击）

## 第2步

检查**Targeted Runtime**下的*Apache Tomcat v7.0*，它可以工作。

 **来源：[https ://stackoverflow.com/a/9287149](https://stackoverflow.com/a/9287149)

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2017-11-05T14:36:54.773

从右键单击项目添加服务器（tomcat）并选择“属性”转到“项目事实”“运行时选项卡”其他明智的“目标运行时”

如果是 maven pom.xml 问题，请尝试将其添加到 pom.xml

```
 <dependency>
    <groupId>javax.servlet.jsp</groupId>
    <artifactId>javax.servlet.jsp-api</artifactId>
    <version>2.3.1</version>
    <scope>provided</scope>
</dependency> 
```

它将解决问题。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2016-07-05T13:35:14.077

正如几乎所有人所说，添加运行时服务将解决问题。**但是，如果**没有运行时服务，或者您不喜欢***Google App Engine***之类的东西，请单击**Targeted Runtimes列表右下方的****新建**按钮并添加新的运行时服务器环境。然后检查它并单击**确定**并让编译器再次编译您的项目。 希望能帮助到你 ;）

 ***** * *

## 回答 #6

> 赞同：0
> 
> 时间：2017-10-29T18:45:11.037

```
<dependency>
    <groupId>javax.servlet.jsp</groupId>
    <artifactId>javax.servlet.jsp-api</artifactId>
    <version>2.3.2-b02</version>
    <scope>provided</scope>
</dependency> 
```

为我工作。******

# php - 在 entityRepository (Symfony2 & Doctrine2) 中查找连接实体的最后一个实体

> ID：15781904
> 
> 赞同：1
> 
> 时间：2013-04-03T08:01:14.883
> 
> 标签：php, symfony, join, doctrine-orm, dql

在代表资产管理系统的 Symfony2 应用程序中，有一个名为 Asset 的实体。该实体与另一个名为 AssetLog 的实体具有 OneToMany 关系。每个 AssetLog 都链接到一个状态，该状态也是一个实体。

例如：可能有一个名为 Car 的资产。这辆车记录了发生的事情、发生的时间以及谁对此负责。每个日志条目都链接到一个状态，该状态可能是：完美状态、损坏、丢失、被盗等。

我正在尝试做的是在assetRepository 中编写一个查询，它将为我提供具有特定状态的所有资产，比如Stolen。

例如，这意味着：其最近的日志条目与状态被盗相关联的所有汽车。

我正在努力解决我需要每个资产的最后一个日志条目这一事实。只有当该条目链接到特定状态时，我才需要资产。

在我的具体示例中，曾经被盗但再次归还的汽车不应出现在列表中。

有谁知道这是否可以使用 Querybuilder，如果可以，该怎么做？

**编辑：**

如果我描述我为在 SQL 中获得所需结果所做的工作，也许会有所帮助。这是我的 SQL 查询：

```
select *
from asset a
join asset_log l
on l.asset_id = a.id
left join asset_log l2
on l2.asset_id = l.asset_id
and l.id > l2.id
where l.receiver_id = 12345
group by l.asset_id 
```

这很好用，但是如何在 DQL 中编写呢？这是我最好的尝试：

```
$qb->select('a', 'l', 'l2')
->from('AssetBundle:Asset', 'a')
->join('a.logEntries', 'l')
->leftJoin('a.logEntries', 'l2', 'ON', 'l2.asset = l.asset')
->where("l.receiver = 12345")
->andWhere('l.id > l2.id')
->groupBy('a.id') 
```

此 DQL 查询执行时没有错误，但会给出不同的结果：应该可见的资产（就像它们在 SQL 查询中一样）丢失了。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-03T08:22:03.537

我曾经在“正常”SQL 中遇到过这个问题。为此，您需要一个子查询：创建一个 WHERE 条件，将每个日志条目的当前时间戳（或序列号，如果您愿意）与该日志的最大时间戳进行比较。要获得此最大值，您需要子查询。

像这样的东西（我不太确定，如果我的子查询满足教义语法；但我想你会明白的）：

```
SELECT a FROM asset
JOIN a.log l
JOIN l.status s
WHERE s.statusCode = ?
AND (l.timestamp = (SELECT MAX(timestamp) FROM log l2 WHERE l2.assetId = a.id) 
```

# xpages-ssjs - XPages SSJS setValue 或 replaceItemValue

> ID：15781905
> 
> 赞同：0
> 
> 时间：2013-04-03T08:01:17.207
> 
> 标签：xpages-ssjs

在按下保存按钮时，我在脚本编辑器中有代码来抓取一个字段，将其拆分并将这些部分放入 XPage 上的其他字段中，这些字段绑定到表单上的字段。但是， getComponent("x").setValue("1") 有效，但 currentDocument.save() 不会保存这些更改。如果我使用 currentDocument.replaceItemValue("x", "1") 他们会被保存。为什么？如果我设置这些字段的方式不同怎么办？是前端保存还是后端保存？

# java - javascript中的JSP标签警报

> ID：15781906
> 
> 赞同：1
> 
> 时间：2013-04-03T08:01:17.653
> 
> 标签：java, javascript, jsp

如何在 javascript 中提醒 JSP 标签？是否可以？我想提醒

```
 <%=%> 
```

我试过：

```
 alert("<%=%>") 
```

但它不工作。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-03T08:08:42.877

无需转义字符：

[它在这里工作](http://jsfiddle.net/McDHD/)

```
alert("<%=%>") 
```

检查控制台是否有错误，这会阻止它发出警报。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-03T08:04:01.040

试试这个：

```
alert("\<\%=\%\>"); 
```

'\' 字符转义后面的字符以阻止它们被解释为 jsp 分隔符。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-03T08:05:21.357

你可以试试：

```
<script language="javascript">  
function one()  
{  
    alert("var: "+<%= var %> );  
}
</script> 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-04-03T08:06:01.747

```
<%
String a = "123";
%>

var v = '<%=a%>';
alert(v); 
```

像这样试试；

# java - Android开发中如何使用SMIL文件

> ID：15781908
> 
> 赞同：0
> 
> 时间：2013-04-03T08:01:33.553
> 
> 标签：java, android, media-player, smil

我的要求是在 android 平台上制作基于 SMIL 语言的媒体播放器，是否可以在 android 中使用 SMIL 文件？

谢谢建议

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-05-28T16:26:50.870

不是“开箱即用”（尽管您没有确切告诉我们您可能在哪个 android 盒子中）。

但是还有其他几个提问者也在问这个问题，这让我相信这属于“为我做作业”类别。快速搜索就会发现这个答案：

[在 android 上解析 application/smil MMS MIME 类型](https://stackoverflow.com/questions/11556633/parse-application-smil-mms-mime-type-on-android)

...第一个答案包括指向基于 Java 的 SMIL 播放器的链接。在询问之前始终搜索。谢谢！

# c# - 正则表达式替换，在短语周围添加括号

> ID：15781909
> 
> 赞同：-1
> 
> 时间：2013-04-03T08:01:35.400
> 
> 标签：c#, regex

我需要一个正则表达式，它会在遇到逗号时将括号添加到字符串中。一个例子可能更简单：

> 我在这里，那里-->（我在这里），那里
> 
> Bob,here you there,somewhere --> Bob,(here you there),somewhere
> 
> Sue,Bob,Joe,你在这里 --> Sue,Bob,Joe,(你在这里)
> 
> Milly Barry Molly,Joe Sandy Mary --> (Milly Barry Molly),(Joe Sandy Mary)

任何帮助或指示将不胜感激。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-03T09:17:54.367

尝试

```
string input = "Milly Barry Molly,Joe Sandy Mary";

Regex regex = new Regex(
    @"(?<=^|,)\s*(?>[^\s,]+\s*){2,}(?=,)|(?<=,)\s*(?>[^\s,]+\s*){2,}$" );
string result = regex.Replace(input, "($&)");

Console.WriteLine(result);
// (Milly Barry Molly),(Joe Sandy Mary) 
```

应要求提供进一步解释。

# java - 发送压缩日志文件到 ftp

> ID：15781911
> 
> 赞同：0
> 
> 时间：2013-04-03T08:01:38.590
> 
> 标签：java, ftp, log4j

是否可以使用 log4j 将文件发送到带有压缩的 ftp？，我已经阅读了这个[log4j 附加程序](http://logging.apache.org/log4j/2.x/manual/appenders.html#SyslogAppender)，但我不明白。

再次嗨，我有这个附加程序，但不起作用

```
<appenders name="FileDebugFTP" class="org.apache.log4j.RollingFileAppender">
    <param name="file" value="test.log" />
    <param name="MaxFileSize" value="8000KB"/>
    <Syslog format="RFC5424" host="localhost" port="21"
        protocol="TCP" includeMDC="true"
        facility="FTP" enterpriseNumber="18060" newLine="true"/>
    <filter class="org.apache.log4j.varia.LevelRangeFilter">
        <param name="levelMin" value="DEBUG" />
        <param name="levelMax" value="FATAL" />
    </filter>
    </layout>
</appenders> 
```

有人可以帮助我吗？抱歉，我是 log4j 的新手，我需要通过用户并通过。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-03T08:06:20.810

希奥·吉杰雷纳，

环顾四周，因为这不是我的专长，但这看起来是一个好的开始。

> [http://www.simonsite.org.uk](http://www.simonsite.org.uk)提供了两个附加程序用于 Log4J 1.2.x。每个都作为单独的组件打包在自己的 JAR 中，并带有自己的测试报告和测试覆盖率报告。

**比较矩阵 **

> 比较 TimeAndSizeRollingAppender、开箱即用的 Log4J Appender 和 Log4J Extras RollingFileAppender 的功能。

希望这可以帮助 ：）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-03T08:06:21.420

可以使用简单的选项..但这是解决方法。创建自定义电子邮件附加程序，将文件压缩并发送到 FTP 服务器，而不是实际发送邮件。

基本上，您只需要一些可以做您想做的事情的自定义附加程序。

# extjs - 创建 Sencha touch 2 应用仪表板

> ID：15781916
> 
> 赞同：0
> 
> 时间：2013-04-03T08:02:12.440
> 
> 标签：extjs, sencha-touch, sencha-touch-2

我正在开发一个 sencha touch 2 应用程序。我的应用程序应该对用户进行身份验证并根据用户授权加载动态仪表板（可能是不同用户的不同菜单图标）。

我的问题：哪个 sencha touch 2 组件更适合动态仪表板（菜单）创建？我猜我的仪表板如下图所示：

![在此处输入图像描述](https://i.stack.imgur.com/kOpKI.png)

谁能帮我？谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-03T14:01:41.650

这非常类似于[Touch Style 示例](http://www.shopstyleapp.com/app/)中显示的缩略图库/列表，该示例与示例文件夹中的 Sencha 触摸库捆绑在一起。正如@TDeBailleul 所说，这可以使用 DataView 完成，但如果您觉得这有点棘手或触摸，您可以轻松使用模板方法。

# regex - 使用正则表达式重新排序编号项目列表

> ID：15781918
> 
> 赞同：0
> 
> 时间：2013-04-03T08:02:26.107
> 
> 标签：regex, ssms

我得到了这个项目列表（它在一个 sql 脚本中），我想按数字重新排序：

由此 ：

```
,user_1
,user_2
,user_3
,name_1
,name_2
,name_3 
```

对此

```
,user_1
,name_1
,user_2
,name_2
,user_3
,name_3 
```

我使用 sql server management studio 2008，所以我有能力使用正则表达式替换，但我不知道这种操作是否可以用正则表达式进行。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-03T08:12:59.890

只需将它们复制粘贴到excel中，然后排序然后复制粘贴回ssms。

就这么简单:)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-03T08:18:30.367

我认为您需要添加更多描述才能真正有意义。也许发布 SQL 脚本？此数据是否存储在单个 varchar 字段中，这就是您正在寻找正则表达式解决方案的原因？

您可以使用正则表达式轻松解析逗号分隔的值，但是您需要一些其他函数来对该结果进行排序，并且在 SQL 中执行此操作会很快变得混乱。

一般来说，我会说这个问题在 SQL 语句之外处理得更好——例如。在从 SQL 中获取结果后，使用您最喜欢的编程/脚本语言进行处理。

此外，此问题表明数据库布局存在设计问题，如果可能的话，解决此问题的首选方法可能是对其进行重组。

# gwt - servlet 的 GWT RPC 服务分配异常

> ID：15781922
> 
> 赞同：1
> 
> 时间：2013-04-03T08:02:34.527
> 
> 标签：gwt, servlets, gwt-rpc, classcastexception

我正在尝试创建一个简单的 RPC 服务，该服务会出现以下错误消息：

```
[tomcat:launch] Apr 3, 2013 12:50:38 AM org.apache.catalina.core.ApplicationContext log
[tomcat:launch] INFO: Marking servlet SummaryBuilderServiceImpl as unavailable
[tomcat:launch] Apr 3, 2013 12:50:38 AM org.apache.catalina.core.StandardWrapperValve invoke
[tomcat:launch] SEVERE: Allocate exception for servlet SummaryBuilderServiceImpl
[tomcat:launch] java.lang.ClassCastException: com.test.server.SummaryBuilderServiceImpl cannot be cast to javax.servlet.Servlet
[tomcat:launch]     at org.apache.catalina.core.StandardWrapper.loadServlet(StandardWrapper.java:1149)
[tomcat:launch]     at org.apache.catalina.core.StandardWrapper.allocate(StandardWrapper.java:827)
[tomcat:launch]     at org.apache.catalina.core.StandardWrapperValve.invoke(StandardWrapperValve.java:129)
[tomcat:launch]     at org.apache.catalina.core.StandardContextValve.invoke(StandardContextValve.java:191)
[tomcat:launch]     at org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.java:127)
[tomcat:launch]     at org.apache.catalina.valves.ErrorReportValve.invoke(ErrorReportValve.java:103)
[tomcat:launch]     at org.apache.catalina.core.StandardEngineValve.invoke(StandardEngineValve.java:109)
[tomcat:launch]     at org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:293)
[tomcat:launch]     at org.apache.coyote.http11.Http11Processor.process(Http11Processor.java:861)
[tomcat:launch]     at org.apache.coyote.http11.Http11Protocol$Http11ConnectionHandler.process(Http11Protocol.java:606)
[tomcat:launch]     at org.apache.tomcat.util.net.JIoEndpoint$Worker.run(JIoEndpoint.java:489)
[tomcat:launch]     at java.lang.Thread.run(Thread.java:662)
[tomcat:launch] Apr 3, 2013 12:53:32 AM org.apache.catalina.core.StandardWrapperValve invoke
[tomcat:launch] INFO: Servlet SummaryBuilderServiceImpl is currently unavailable 
```

我`web.xml`有以下映射

```
 <!--  Summary Builder Service -->
    <servlet>
        <servlet-name>SummaryBuilderServiceImpl</servlet-name>
        <servlet-class>com.test.server.SummaryBuilderServiceImpl</servlet-class>
    </servlet>
    <servlet-mapping>
        <servlet-name>SummaryBuilderServiceImpl</servlet-name>
        <url-pattern>/test/SummaryBuilder</url-pattern>
    </servlet-mapping> 
```

服务文件是

```
@RemoteServiceRelativePath("SummaryBuilder")
public interface SummaryBuilderService extends RemoteService {
    String sayHelloWorld();
} 
```

和异步版本

```
public interface SummaryBuilderServiceAsync {
    void sayHelloWorld(AsyncCallback<String> hello);
} 
```

和实施

```
public class SummaryBuilderServiceImpl implements SummaryBuilderService {
    @Override
    public String sayHelloWorld() {
        return "Hello World";
    }
} 
```

我在入口点调用它，比如

```
final SummaryBuilderServiceAsync summaryBuilderService = GWT.create(SummaryBuilderService.class);

        summaryBuilderService.sayHelloWorld(new AsyncCallback<String>() {

            @Override
            public void onSuccess(String arg0) {
                Window.alert(arg0);

            }

            @Override
            public void onFailure(Throwable arg0) {
                arg0.printStackTrace();
                Window.alert("Failed to create servlet");

            }
        }); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-03T08:40:44.070

您忘记扩展`RemoteServiceServlet`，这使您的`impl`类成为一个 servlet。

```
import com.google.gwt.user.server.rpc.RemoteServiceServlet;

public class SummaryBuilderServiceImpl extendes 
                       RemoteServiceServlet implements SummaryBuilderService {
    @Override
    public String sayHelloWorld() {
        return "Hello World";
    }
} 
```

[如何进行 GWT 服务器调用（GWT RPC？）](https://stackoverflow.com/questions/15717089/how-to-make-an-gwt-server-callgwt-rpc/15717130#)

# wordpress - 高级自定义字段 - 显示在所有页面上

> ID：15781924
> 
> 赞同：6
> 
> 时间：2013-04-03T08:02:37.120
> 
> 标签：wordpress, custom-fields

有没有办法让高级自定义字段（ACF）设置规则=“ALL”？所以这个特定的组显示在所有页面类型上？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2015-12-11T18:51:04.140

[页不等于 x 或等于 x](http://i.stack.imgur.com/nvoqv.png)

只需指定该字段应该出现在除特定帖子之外的每个帖子上，或者它应该出现在该帖子上。

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2015-07-28T14:36:28.207

上面写着“显示此字段组，如果”选择“帖子类型”，“等于”和“页面”

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2016-09-06T19:01:16.397

使用“帖子类型等于帖子”或“帖子类型不等于帖子”将起作用：

[![在此处输入图像描述](https://i.stack.imgur.com/jfNmy.png)](https://i.stack.imgur.com/jfNmy.png)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-06-18T10:47:48.073

这就是您将使用规则部分和“和”属性并选择您希望启用它的每个帖子类型的地方。据我所知，默认情况下，没有办法让自定义字段显示在每个帖子类型上。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2018-04-23T13:12:44.680

就我而言，我将其设置为显示帖子类型是否不等于某个插件插入的类型之一，例如编辑器未使用该类型。“模块”或“小部件块”。检查你的清单 - 你会发现一些你不使用的东西。

但是，我更喜欢其他帖子中的'等于'+'不等于'的想法！

# php - 为什么 strtotime(1st January 1970) 在 PHP 中返回 -3600 而不是 0？

> ID：15781926
> 
> 赞同：10
> 
> 时间：2013-04-03T08:02:42.670
> 
> 标签：php, datetime

我`strtotime`过去用过几秒钟`1 January 1970`，但我不明白为什么`-3600`时钟设置为时`12.00AM`会得到`0`，而时钟设置为时会得到，那是`1 AM`怎么回事`1 HOUR`？是时区的问题吗？

```
echo 'I Expect 0 Here '.strtotime('1st January 1970').'<br />';
//This gives me -3600

echo 'I Expect 3600 Here '.strtotime('1st January 1970 01.00AM'); 
//This gives me 0 
```

> PS 我没有在我的 PHP 文件中设置任何时区，或者我什至没有修改我的 .ini 文件（新安装的 XAMPP）

更新：时区：欧洲/柏林

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-04-03T08:07:43.470

这很可能是由于您当地的[时区](https://en.wikipedia.org/wiki/Time_zone)。
的输出是什么

```
var_dump(date_default_timezone_get()); 
```

在那台机器上？
您还可以检查 mktime 和 gmmktime 之间的区别

```
echo " mktime: ", mktime(), "\n";
echo " gmmktime: ", gmmktime(), "\n"; 
```

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2013-04-03T08:07:06.483

您的时区必须设置为 UTC+1。您所在时区的午夜发生在 UTC 午夜前一小时，这解释了 -3600 秒的偏移量。

您可以将时区设置为 UTC 以获得预期结果：

```
date_default_timezone_set('UTC'); 
```

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2013-04-03T08:10:12.220

您需要检查您的时区设置。或者，如果您将 default_time_zone 设置为 UTC，您将获得所需的结果。

```
date_default_timezone_set('UTC'); 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-04-03T08:15:55.190

添加此设置时区“欧洲/柏林”

```
 date_default_timezone_set('Europe/Berlin'); 
```

# javascript - 如何将 div 的 id 设置为 cookie？

> ID：15781927
> 
> 赞同：6
> 
> 时间：2013-04-03T08:02:48.457
> 
> 标签：javascript, jquery, html, cookies

我的任务是在刷新页面时突出显示所选菜单。为此，我想使用 cookie。html代码是

```
<div class="menuBar">
            <div class="menuHeader ui-corner-top">
             <span><a href="#" onclick="Home()" id="home">Home</a></span>
            </div>
            <div class="menuHeader ui-corner-top">
             <span><a href="#" onclick="NewTransaction()" id="newtransaction">New Transaction</a></span>
            </div>
</div> 
```

Javascript文件是

```
function Home() {
            window.location.href = "../../home/welcome";
        }
        function NewTransaction() {
            window.location.href = "../../EnergyCatagory/index";
        } 
```

但是我有一个代码可以将菜单设置为选中。但这不是一个好方法。如何在刷新时将所选菜单的值传递给页面？这是突出显示菜单的代码

```
 $(document).ready(function () {
                var currentUrl = window.location.href;
                if (currentUrl.indexOf("home/welcome") !== -1) {
                    $("#home").parent().parent().addClass('menuHeaderActive');
                }
                else if (currentUrl.indexOf("EnergyCatagory/index") !== -1) {
                    $("#newtransaction").parent().parent().addClass('menuHeaderActive');
                }
                else if (currentUrl.indexOf("portfolio/Index") !== -1) {
                    $("#portfolio").parent().parent().addClass('menuHeaderActive');
                }
            }); 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-03T09:03:10.627

为每个菜单项提供 id。

然后在菜单项的 onclick() 函数中将该 id 设置为 cookie。

设置 cookie

```
$.cookie("selectedId", $(this).attr('id')); 
```

在 document.ready 函数中，将选定的类添加到具有从 cookie 获得的 id 的元素

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-03T08:16:23.397

你可以像这样实现它：

```
function goToLocation(sLocation, id) {
   $.cookie("activediv", id);
   window.location.href = sLocation;
} 
```

在 html 中：

```
<a href="#" onclick="goToLocation('../../home/welcome', 'home')" id="home">Home</a> 
```

在 jQuery 中准备好：

```
$('#' + $.cookie("activediv")).parent().parent().addClass('menuHeaderActive'); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-03T08:05:44.603

尝试使用 jQuery 将 cookie 设置为：

```
$.cookie("name", "value"); 
```

您可以在这里阅读更多内容：[如何使用 jQuery 设置/取消设置 cookie？](https://stackoverflow.com/questions/1458724/how-to-set-unset-cookie-with-jquery#)

# javascript - 带有剑道菜单模板的剑道网格列

> ID：15781929
> 
> 赞同：0
> 
> 时间：2013-04-03T08:02:51.310
> 
> 标签：javascript, jakarta-ee, web, kendo-ui

我有一个带有以下列的剑道网格：

```
var columns = [
    {title: "row", template: "#= gridRowCounter++ #"},
    {field: "FName", title: "Name"},
    {field: "LName", title: "Family"},
    {title: "Actions", template: 
            '<ul id="menu#=gridRowCounter-1#" >'+  
                '<li>Action<ul>'+  
                    '<li><span class="k-link" onclick="edit()">Edit</span></li>'+  
                    '<li><span class="k-link" onclick="delete()">Delete</span></li>'+  
                '</ul></li>'+  
            '</ul>'}
    ]; 
```

* * *

我首先生成并初始化网格：

```
$("#grid").kendoGrid({
    dataSource : myDS,
    columns : columns,
    change: function() {
        var menus = $("ul[id*='menu']");
        for(var i = 0; i < menus.length; i++){  
            $(menus[i]).kendoMenu({
                direction: "right",
                animation: { open: { effects: "slideIn:right" } }
            });
        }
    }
}); 
```

然后通过选择一行来初始化菜单。
它可以工作并且制作了菜单，但子菜单在网格边界下打开并且不出现。
我希望你帮我把所有元素的菜单放在首位。
谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-06T06:32:20.173

默认情况下，网格表格单元格具有溢出：隐藏样式。你可以用

```
.k-grid tr td
{
     overflow:visible;
} 
```

# php - PHP 是否允许类函数和属性共享相同的名称？

> ID：15781932
> 
> 赞同：8
> 
> 时间：2013-04-03T08:02:59.210
> 
> 标签：php

我的一位老同事在我们的代码中写道：

```
public function paginate() {
    return $this->paginate;
} 
```

我想知道：这会返回函数 paginate() 还是类属性 $paginate？

我猜是后者，但奇怪的是我还没有找到关于这个主题的任何信息。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-04-03T08:05:14.517

这将返回类属性`$paginate`。

如果它是`return $this->someName();`

然后它返回函数`someName()`。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-03T08:17:09.507

PHP 中函数调用后的括号不是可选的，普通的方法和函数也不是“第一类对象”（它们本身不能作为变量进行操作，例如在 JavaScript 中）。

因此没有歧义，因为`$this->paginate();`必须是函数调用，并且`$this->paginate;`必须是变量引用。

但是，这不是特别好的做法，编辑器、IDE 等可能会将其突出显示为警告。一般来说，函数和方法应该以动词而不是名词开头，所以函数最好命名为`getPaginate()`

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-03T08:06:58.563

返回一个对象属性：

```
$this->paginate; 
```

对比

使对象方法运行（类中的函数称为方法）

```
$this->paginate(); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-04-03T08:05:16.357

如果它被声明为，它将返回`$paginate`函数所属的类的属性或来自另一个类的 ihnerits `public`。

# java - JLabel 图标抵制变化

> ID：15781938
> 
> 赞同：1
> 
> 时间：2013-04-03T08:03:37.657
> 
> 标签：java, swing, jpanel, jlabel

我有一个 JLabel 图标，我只能看到一次更改。空白时，以下代码的新设置图像可以正常工作。但在那之后，图像被卡住了。没有新的图像可以取代它。当我在没有 revalidate() 的情况下在 panelPainting 上使用 repaint 时，我根本没有得到任何图片。这也很奇怪。

这是代码，（panelMain 房屋 panelPainting）

```
//get image from somewhere
JLabel imageLabel = new JLabel();
Icon imageIcon = new ImageIcon(image);
imageLabel.setIcon(imageIcon);

panelPainting.setAlignmentX(JLabel.CENTER);
panelPainting.add(imageLabel);  // default center section

//my insanity starts here
panelPainting.revalidate();

panelMain.remove(panelPainting);
panelMain.revalidate(); 
```

编辑：我仔细检查了**图像**每次都会改变。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-03T08:07:47.053

*   作为标准方式使用`JLabel.setIcon()`，则没有理由`JComponents`在运行时删除、修改和添加新的

*   `Icon`在某些情况下`JLabel`（从外部来源、www 网站等）重新绘制存在问题，那么您必须致电，

> ```
> myIcon.getImage().flush();
> myLabel.setIcon(myIcon); 
> ```

*   使用 CardLayout 和几个视图，那么任何动作都只是在卡片之间切换

    * * *

除此以外

*   必须调用`container.revalidate()`and `container.repaint()`，作为最后的代码行，一次，在所有更改完成后

*   为了获得更好的帮助，请尽快发布[SSCCE](http://sscce.org/)，简短，可运行，可编译，几乎带有 JLabel 的 JFrame 包含[动态创建的 ImageIcon / Icon](https://stackoverflow.com/a/7944388/714968)

# php - 如何显示？php mysql数据中的选框

> ID：15781941
> 
> 赞同：-3
> 
> 时间：2013-04-03T08:03:46.613
> 
> 标签：php, mysql, marquee

我正在尝试使用 mysql 数据在 php 中制作字幕文本，但这是仅显示简单 mysql 数据的脚本。如何在我的 php 页面上显示选框？请帮我解决这个问题。谢谢

```
 <?php
    $con=mysqli_connect("something.com","someusername","somepassword.","somedatabase");
    // Check connection
    if (mysqli_connect_errno())
      {
      echo "Failed to connect to MySQL: " . mysqli_connect_error();
      }

    $result = mysqli_query($con,"SELECT * FROM itomi");

    while($row = mysqli_fetch_array($result))
      {
    echo "{$row['ntitle']}: {$row['ndetails']} ";
       echo "</font></marquee>";
      }

    mysqli_close($con);
    ?> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-03T08:08:19.283

我希望你想在选框里打印列表

```
echo "<font><marquee>";

 while($row = mysqli_fetch_array($result))
      {
    echo "{$row['ntitle']}: {$row['ndetails']} <br>";

      }

echo "</font></marquee>"; 
```

# javascript - Javascript循环原型

> ID：15781943
> 
> 赞同：0
> 
> 时间：2013-04-03T08:03:57.253
> 
> 标签：javascript

请考虑代码：

```
// define the GameObject constructor function

    var GameObject = function(width, height) {
    this.x = Math.floor((Math.random() * myCanvasWidth) + 1);
    this.y = Math.floor((Math.random() * myCanvasHeight) + 1);
    this.width = width;
    this.height = height;
    return this;
};

// (re)define the GameObject prototype object

GameObject.prototype = {
    x: 0,
    y: 0,
    width: 5,
    width: 5,
    draw: function() {
        myCanvasContext.fillRect(this.x, this.y, this.width, this.height);
    }
}; 
```

然后我们可以实例化 GameObject 100 次。

```
var x = 100,
arrayOfGameObjects = [];
do {
    arrayOfGameObjects.push(new GameObject(10, 10));
    } while(x--); 
```

现在我们有一个包含 100 个游戏对象的数组，它们都共享相同的原型和绘制方法的定义，这极大地节省了应用程序内的内存。

当我们调用 draw 方法时，它将引用完全相同的函数。

```
var GameLoop = function() {
    for(gameObject in arrayOfGameObjects) {
        gameObject.draw(); // this is my problem. Is this correct? gameObject is simply and index who draw() method gets executed
    }
}; 
```

我的问题是执行方法 draw() 的最后一行代码。既然 gameObject 只是一个索引，那么 draw() 方法怎么能被执行呢？该索引不包含任何对象。它只是一个索引，对吗？

[这](http://www.google.com.np/url?sa=t&rct=j&q=&esrc=s&frm=1&source=web&cd=1&sqi=2&ved=0CCUQFjAA&url=http%3A%2F%2Fnet.tutsplus.com%2Ftutorials%2Fjavascript-ajax%2Fprototypes-in-javascript-what-you-need-to-know%2F&ei=BuVbUaCuAsz9rAeR-oGwBA&usg=AFQjCNGhA6fB7EFB1kd1ORDCBidrhIWr0A&bvm=bv.44697112,d.bmk)是一个链接

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-03T08:06:39.513

您应该真正使用以下内容`GameLoop`：

```
var GameLoop = function() {
    for(var i = 0; i < arrayOfGameObjects.length; i++) {
        arrayOfGameObjects[i].draw();
    }
}; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-03T08:06:58.513

使用普通`for`循环遍历数组。

```
var GameLoop = function() {
    for (var i = 0; i < arrayOfGameObjects.length; i++) {
        arrayOfGameObjects[i].draw();
    }
}; 
```

`for in`在数组上使用循环实际上是一种不好的做法，因为它只是一种获取所需索引的方法。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-03T08:10:00.487

我喜欢 jquery **$.each**

```
$.each(arrayOfGameObjects, function(i, gObject) {
    gObject.draw();
}); 
```

否则，如其他人所述，使用数组长度进行迭代**。**

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-04-17T00:46:09.243

```
var GameLoop = function() {
    for(var i = 0, len = arrayOfGameObjects.length; i<len; i++) {
        gameObject.draw();
    }
}; 
```

[在http://jsfiddle.net/SdBcx/2/](http://jsfiddle.net/SdBcx/2/)上看到这个工作

一些注意事项：

*   使用`for(obj in array)`on Array 对象是不好的做法。原因是，如果你在 中添加自定义函数`Array.prototype`，自定义函数就会出现在你的 for 循环中！我在这里写了一个例子：http: [//jsfiddle.net/BUp6T/](http://jsfiddle.net/BUp6T/)
*   您可以看到我将 保存`arrayOfGameObjects.length`在`len`变量中。这只发生一次，在循环执行之前。这比常见的解决方案要快得多，后者是：`for(var i = 0; i < arrayOfGameObjects.length; i++)`每次循环迭代都检索数组长度。

# c# - 如何编写 Web API 路由映射，以便允许我将参数设为可选？

> ID：15781945
> 
> 赞同：0
> 
> 时间：2013-04-03T08:03:57.743
> 
> 标签：c#, asp.net-mvc, asp.net-web-api, asp.net-mvc-routing

我有如下 Web API 服务：

```
[HttpGet]
public UserProfile SearchByEmail(string siteName, string providerName, string email)
{} 
```

我想将 providerName 设为可选，并且下面的 url 应该可以工作：

```
{0}: http://www.domain.com/sites/siteName1/providerName1/User/SearchByEmail?email=email1
{1}: http://www.domain.com/sites/siteName1/User/SearchByEmail?email=email1 
```

我写了下面的映射：

```
 config.Routes.MapHttpRoute(
               name: "SearchUserByEmail",
               routeTemplate: "sites/{siteName}/{providerName}/User/SearchByEmail",
                defaults: new
                {
                    controller = "User",
                    action = "SearchByEmail",
                    providerName = UrlParameter.Optional
                }); 
```

但它只支持 {0} 网址，不适用于 {1} 网址。

如何编写映射以便它允许我将 providerName 设为可选？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-03T08:32:35.530

只有 url 片段的最后一个标记可以是可选的。您必须将您的路线模式更改为：`sites/{siteName}/User/SearchByEmail/{providerName}`如果您希望它工作。或者，如果参数是可选的，我的建议是在查询字符串中传递它。

# oop - 文字字符串预期错误

> ID：15781946
> 
> 赞同：1
> 
> 时间：2013-04-03T08:04:00.200
> 
> 标签：oop, ada, gnat, gnat-gps

请看下面的代码

```
with text_io;
use text_io;

procedure hello is

begin
put_line("hello");
new_line(3);
end hello; 
```

当我在 GPS IDE 中单击“全部构建”时，出现此错误

```
gnatmake -d -PC:\Users\yohan\firstprogram.gpr
firstprogram.gpr:1:06: literal string expected
firstprogram.gpr:2:01: "end" expected
gnatmake: "C:\Users\yohan\firstprogram.gpr" processing failed

[2013-04-03 13:29:58] process exited with status 4 (elapsed time: 00.47s) 
```

我对 Ada 很陌生，如您所见，这是我的第一个程序。请帮忙。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-03T16:26:33.373

在命令行上，`gnatmake`将愉快地编译一个包含 Ada 代码但扩展名为`.gpr`. GPS比这“更好”，并坚持将`myfirstprogram.gpr`其视为GNAT项目文件，当然不是。

如果您坚持使用 GNAT 的文件命名约定，您会发现使用 GNAT*会更*`.ads`轻松：对于规范，`.adb`对于正文，文件名必须是小写的单位名称。在您的情况下，该文件应该被称为`hello.adb`.

在 GPS 中创建 GNAT 项目文件的最简单方法是转到*Project*菜单并选择*New*。您必须输入数据的唯一地方是“命名项目”页面（您可以选择`firstproject`！）和“主文件”页面，您可以在其中单击蓝色 + 添加`hello.adb`；您可以通过其他人*转发。*

添加主文件后，可以点击*Apply*安装新的项目文件；现在您可以*全部构建*并*运行*。

您可能会发现 GPS 教程很有帮助（*帮助*菜单、*GPS* ...）

# matlab - 函数“spmak”中的参数“knots”是什么意思（在matlab中）

> ID：15781948
> 
> 赞同：0
> 
> 时间：2013-04-03T08:04:01.240
> 
> 标签：matlab, spline

我有一个保存在矩阵“数据”中的数据集，它是二维的。我想使用这个数据集在matlab中用函数“spmak”拟合曲线。怎么做 ？SPMAK(KNOTS,COEFS)：matlab中的函数原型。“结”和“系数”是什么意思？如何从数据矩阵“数据”中获取这两个参数？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-03T08:07:40.943

因为`knots`是多项式部分以样条连接的点的名称。

这就是该`knot`术语的来源，多项式部分的连接（用结系在一起）。

有关更多信息，请参阅[Wikipedia 上的数学样条条目。](http://en.wikipedia.org/wiki/Spline_%28mathematics%29)

系数是项的乘法因子。例如，表达式具有系数和。`3x³ + x² + 4x``3``1``4`

# html - windows phone 8 开发：HTML5/CSS/Javascript 与 XAML

> ID：15781950
> 
> 赞同：0
> 
> 时间：2013-04-03T08:04:11.380
> 
> 标签：html

我是开发移动应用程序的新手。

我需要为我最后一年的项目使用 HTML5 做 windows phone 8 应用程序。但同时我想包括在 windows phone 8 模板上可用的全景视图。

有可能将它们结合起来吗？我的意思是应用程序的登录页面是 HTML 页面，当用户登录时，它会将他们定向到全景视图，并在全景视图上显示 HTML5 内容。

正如我已经使用 XAML/C# 进行全景视图，但标准是使用 HTML5，同时我想拥有那个全景视图，所以由于搜索所有细节，我坚持做这个项目 1 周但还没有找到。

我需要你们的建议......我不需要你们写或给我任何代码。我只需要关于我应该在哪里寻找知识的指南。我希望你们帮助我。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-03T08:11:14.250

您可以使用[phonegap](http://phonegap.com)和这个 Jquery 插件来支持[全景视图](https://github.com/grohman/js-panorama)。

# mongodb - 使用删除 API 在弹性搜索中未删除索引

> ID：15781954
> 
> 赞同：0
> 
> 时间：2013-04-03T08:04:13.350
> 
> 标签：mongodb, elasticsearch

我创建了一个索引

```
curl -XPUT 'http://localhost:9200/tipindex/' -d '{
     "settings" : {
        "index" : {
            "number_of_shards" : 1,
            "number_of_replicas" : 1,
          }
     }
  }
}' 
```

然后我使用以下命令将河流与索引相关联：

```
curl -XPUT "localhost:9200/_river/tipindex/_meta" -d '
{
"type": "mongodb",
"mongodb": {
    "host": "<machine-name>",
    "port": "27017",
    "db": "mydb",
    "collection": "tips"
},
"index": {
    "name": "tipindex",
    "type": "tips"
 }
}' 
```

索引已正确创建，所有文档都已编入索引。但是，如果我使用以下方法删除索引：

```
curl -XDELETE '<machine-name>:9200/tipindex/' 
```

它完成了`{"ok":true,"acknowledged":true}`

ES log : [tipindex] 删除索引

现在如果我执行 curl -XDELETE 'localhost:9200/tipindex/'

```
{"error":"IndexMissingException[[tipindex] missing]","status":404} 
```

这意味着该索引被删除。

但是，如果我重新启动 elasticsearch，则会再次创建索引，其中包含 0 个文档且没有映射。

如果我重新创建索引并关联一条河流，则不会索引任何文档。ES 日志也不显示任何错误。

现在我的问题是：

*   为什么索引没有被删除？
*   当我重新创建索引时，为什么文档没有再次被索引？
*   如何强制删除索引？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-03T08:46:40.763

这可能是由于mongo河。

> 为什么索引没有被删除？

如果索引不存在，它会在您每次重新启动河流时重新创建索引。

> 当我重新创建索引时，为什么文档没有再次被索引？

我认为 Mongo 河存储在`_river/tipindex`索引中的最后一个提取点。当你已经跑过这条河时，里面还有一些东西。您可以检查此索引中剩余的所有文档：

```
curl localhost:9200/_river/tipindex/_search?q=* 
```

如果您需要*重新启动*河流，对我来说最好的选择是像以前一样删除并重新创建河流。

高温高压

# ios - 如何摆脱 iOS 应用程序首屏的导航栏

> ID：15781955
> 
> 赞同：0
> 
> 时间：2013-04-03T08:04:15.167
> 
> 标签：ios, navigationcontroller

我对导航控制器感到困惑，我在应用程序中的第一个视图由内部的 4 个按钮组成，我想在这个视图中添加一个导航控制器，以便根据按下的按钮将另一个视图推送到导航控制器，我可以看到导航栏我被重定向的其他观点。

但是我不想在第一个视图的顶部看到导航栏。有没有办法将导航控制器添加到 appdelagete 并使导航栏在我的第一个屏幕上不可见。

提前致谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-03T08:07:17.020

在您的应用程序中添加导航栏

`didFinishedLaunching:withOptions:`在类中使用以下代码`AppDelegate`：

```
ViewController *homeController = [[HomeController alloc] init];
self.controller = [[UINavigationController alloc] initWithRootViewController:viewController];
[self.window addSubview:self.controller.view];
[self.window makeKeyAndVisible]; 
```

在`ViewController`'s`viewWillAppear`方法中，添加以下代码行：

```
[[self navigationController] setNavigationBarHidden:YES animated:NO]; 
```

在`ViewController`'s`viewWillDisappear`方法中，添加以下代码行：

```
[[self navigationController] setNavigationBarHidden:NO animated:NO]; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-03T08:06:16.090

将下面的代码放在您的**viewWillAppear**方法中，以便在您每次返回第一个视图时调用它

```
[self.navigationController setNavigationBarHidden:YES animated:NO]; 
```

并放

```
[self.navigationController setNavigationBarHidden:NO animated:NO]; 
```

在要推送的下一个控制器的viewDidLoad中，也可以将上面的代码放在FirstViewController的**viewWillDisappear**中。

# spring - 如何在 SPring HSQLDB 中执行嵌套查询

> ID：15781962
> 
> 赞同：0
> 
> 时间：2013-04-03T08:04:53.130
> 
> 标签：spring, hsqldb

我正在为 HSQLDB 创建一个插入嵌套脚本，例如

插入表 (col1, col2) 值 ('val1', (select val2 from table2 where col3='val3'))

当我尝试使用 Spring JDBCTemplate 作为

`jdbcTemplate.execute(query);`

它给了我带有未知标记的 BadSQL 语法：

但是，如果我对 MySQL 运行相同的查询，它可以正常工作，但对于 HSQLDB 它不是 1。

谁能告诉我这个问题？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-03T18:00:38.337

最新的 HSQLDB 2.x 支持查询语法。

如果总是恰好有一行，`table2`则`col3='val3'`语句成功。但是如果有超过一排，它就会失败。众所周知，MySQL 会忽略 SQL 标准的此类细节。

如果这是问题，那么您可以使用

```
 insert into table (col1, col2) 
 values ('val1', (select val2 from table2 where col3='val3' limit 1)) 
```

# java - 在 Python 脚本上实现 ExpectJ

> ID：15781963
> 
> 赞同：0
> 
> 时间：2013-04-03T08:04:57.223
> 
> 标签：java, python, python-2.7, expect

我有一个名为 age.py 的 Python 脚本

```
#!/usr/bin/env python
#file: age.py

age = raw_input("Enter your age: ")
print "Your age in dog years is", float(age)/7 
```

我正在使用 Expectj 库，这是我正在使用的 java 代码片段

```
ExpectJ exp = new ExpectJ();
Spawn s = null;
try {
    s = exp.spawn(test1);       
    s.expect("Enter your age: ");
    System.out.println("Current status: "+s.getCurrentStandardOutContents());
    s.send("y\n");
} catch (IOException e) {
      // TODO Auto-generated catch block
        e.printStackTrace();
        System.out.println("ioe\n");
} catch (TimeoutException e) {
      // TODO Auto-generated catch block
         e.printStackTrace();
         System.out.println("toe\n");
} finally {
         if (s != null) 
         s.stop();           
} 
```

这没有捕获 sysout 消息`"Enter your age: "`，因此脚本进入无限等待状态。ExpectJ 需要什么修复才能使用 python 脚本？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-03T08:08:47.927

我对 ExpectJ 不熟悉，但我猜它期待一条以新行终止的行，这`raw_input`不会产生。从[raw_input 文档](http://docs.python.org/2/library/functions.html#raw_input)：

> 如果提示参数存在，则将其写入标准输出，不带尾随换行符。

# c# - 如何在 Windows 服务中获取所有打印机名称？

> ID：15781965
> 
> 赞同：1
> 
> 时间：2013-04-03T08:05:00.133
> 
> 标签：c#, service, windows-services, printers

我想在计算机和网络上安装所有打印机名称。我在下面使用这些功能来获取所有打印机的列表。所有这些功能。在控制台和表单应用程序中正常工作，我可以获得所有打印机的列表，但是当我尝试使用这些功能时。在 Windows 服务中，我只能安装在没有网络的计算机上。还有我的服务在`LocalSystem`账户下工作。

**功能 1：**

```
 WinsPool.PrinterEnumFlags Flags = WinsPool.PrinterEnumFlags.PRINTER_ENUM_CONNECTIONS | WinsPool.PrinterEnumFlags.PRINTER_ENUM_LOCAL;
        const int ERROR_INSUFFICIENT_BUFFER = 122;
        uint cbNeeded = 0;
        uint cReturned = 0;
        if (WinsPool.EnumPrinters(Flags, null, 2, IntPtr.Zero, 0, ref cbNeeded, ref cReturned))
        {
            return null;
        }
        int lastWin32Error = Marshal.GetLastWin32Error();
        if (lastWin32Error == ERROR_INSUFFICIENT_BUFFER)
        {
            IntPtr pAddr = Marshal.AllocHGlobal((int)cbNeeded);
            if (WinsPool.EnumPrinters(Flags, null, 2, pAddr, cbNeeded, ref cbNeeded, ref cReturned))
            {
                WinsPool.PRINTER_INFO_2[] printerInfo2 = new WinsPool.PRINTER_INFO_2[cReturned];
                int offset = pAddr.ToInt32();
                Type type = typeof(WinsPool.PRINTER_INFO_2);
                int increment = Marshal.SizeOf(type);
                for (int i = 0; i < cReturned; i++)
                {
                    printerInfo2[i] = (WinsPool.PRINTER_INFO_2)Marshal.PtrToStructure(new IntPtr(offset), type);
                   string printerName =  printerInfo2[i].pPrinterName;
                    offset += increment;
                }
                Marshal.FreeHGlobal(pAddr);
            }
            lastWin32Error = Marshal.GetLastWin32Error();
        } 
```

**功能 2：**

```
 foreach (string printer in System.Drawing.Printing.PrinterSettings.InstalledPrinters)
        {
            string printerName = printer;
        } 
```

**功能 3：**

```
 ManagementObjectSearcher searcher = 
                new ManagementObjectSearcher("root\\CIMV2", 
                "SELECT * FROM Win32_Printer"); 

            foreach (ManagementObject queryObj in searcher.Get())
            {
               string printerName = queryObj["Name"].ToString();
            } 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-03T08:31:46.493

打印机通常安装到特定的 Windows 帐户，因此只有当您以该帐户登录时才能看到它们。对于需要访问打印机的 Windows 服务，通常将其作为所需打印机可见的命名帐户运行，即不要将其作为 LocalSystem 运行。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-03T18:57:34.413

以下是如何开始：

```
public partial class Service : ServiceBase
{
    List<string> printers = new List<string>();
    public Service()
    {
        InitializeComponent();
    }

    protected override void OnStart(string[] args)
    {
        getPrinters();
    }

    private void getPrinters()
    {
        foreach (string printer in System.Drawing.Printing.PrinterSettings.InstalledPrinters)
        {
            printers.Add(printer);
        }

    }

    static void Main()
    {
        (new Service()).OnStart(null); // allows easy debugging of OnStart()
    } 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2021-05-12T11:02:24.270

我知道这是几年前的事了……但我今天遇到了同样的问题，终于解决了……

转到您的 ServiceProcessInstaller 属性并在杂项选项卡上更改帐户为用户。

在此之后，每当您安装该服务时，系统都会提示您输入用户，首先向您的用户添加密码并像这样登录：

```
<machine_name>\<user_name>
<password>
<password_again> 
```

# github - 如何使用 github 上的当前版本覆盖本地文件？

> ID：15781966
> 
> 赞同：-1
> 
> 时间：2013-04-03T08:05:00.397
> 
> 标签：github, ruby-on-rails-3.2, local, scaffolding

我生成并销毁了一个脚手架，生成了一个新的脚手架，这导致了巨大的混乱，例如 CSS（导航字体不正确，按钮有悬停但文件中最初没有指定任何内容）。新的脚手架等没有出现“描述”字段。我已经浏览了新的脚手架文件，并且花了几个小时只希望让我推送的当前版本覆盖本地文件并从那时开始重新开始。

有没有办法下载我推送到 github 的最后一个版本来覆盖当前的本地文件并从那里开始？我没有提交任何当前的更改。

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2013-04-09T15:07:11.790

您可以使用 reset 命令非常轻松地“撤消”您在 git 中的更改。

`git reset HEAD --hard`

将强制删除对它们在 HEAD 修订中的状态的所有更改。

# entity-framework - 添加新迁移时，EF 数据迁移不会检测到更改

> ID：15781968
> 
> 赞同：44
> 
> 时间：2013-04-03T08:05:07.607
> 
> 标签：entity-framework, entity-framework-migrations

我首先使用 Entity Framework 5.0 数据迁移和代码。当我向我的模型添加一个新字段并在包管理器控制台中执行以下命令时。

```
 "Add-migration AddedField" 
```

我得到的只是一个名为“n_AddedField”的空迁移，向上和向下方法不包含任何逻辑。

我尝试了很多东西，重新安装 EF nuget 包，清理我的解决方案，重建，手动删除所有生成的文件和目录。

然后我决定放弃我所有的迁移并重新开始，然后它变得很奇怪。删除所有迁移和数据库中的迁移历史表后，我使用 CreateDatabaseIfNotExists 初始化程序重新创建了数据库。完成此操作后，我应该能够创建一个新的初始迁移。但是当我尝试创建一个新的迁移时，我收到一条错误消息，指出有待处理的迁移，并列出了我刚刚从项目中删除的所有迁移。

我不知道 EF 为什么以及如何仍然记得这些迁移。我什至尝试搜索文件内容以查看迁移是否保存在其他地方或其他地方。但是什么都没有。。

当 scott hansleman 在舞台上演示时，数据迁移看起来非常整洁，但对于实际工作，我开始寻找替代方案。

项目开始时，我们使用的是 EF 4.x，不久前切换到 5.0，但自从切换后，我已经成功添加了一堆迁移。

有谁知道如何解决这个问题？基本上我只想能够添加迁移，并生成一个带有更改的 sql 脚本。

* * *

## 回答 #1

> 赞同：47
> 
> 时间：2015-01-12T04:47:31.560

我有一个类似的问题，没有找到新的迁移，所以`update-database`无论我做什么都会给我以下错误：

```
Unable to update database to match the current model because there are pending changes and automatic migration is disabled. Either write the pending model changes to a code-based migration or enable automatic migration. Set DbMigrationsConfiguration.AutomaticMigrationsEnabled to true to enable automatic migration.
You can use the Add-Migration command to write the pending model changes to a code-based migration. 
```

执行“批量清理”解决了我的问题，这表明 EF 正在使用文件夹中的旧/无效程序集，而不是当前选择的“解决方案配置（例如调试）”。

要进行批量清理：

1.  选择`Main Menu -> Build -> Batch Build...`
2.  点击`Select All`
3.  点击`Clean`

关闭对话框，重建并重新尝试迁移。

希望这对其他人有帮助。

* * *

## 回答 #2

> 赞同：38
> 
> 时间：2016-03-10T12:31:44.210

哎呀。就我而言，我正在添加一个未被任何其他实体引用的新根实体。结果很简单，代码首先没有理由为实体生成迁移。一旦我将代码添加到 DbContext（一个 dbset）中，它就像一个魅力。

* * *

## 回答 #3

> 赞同：13
> 
> 时间：2015-11-27T17:53:30.227

刚遇到同样的问题，但发现我的新字段是作为成员变量而不是属性添加的 - 它缺少 {get; set;} 部分，这使得迁移跳过该字段。

可能不是你的情况，但它可能会帮助别人。

* * *

## 回答 #4

> 赞同：11
> 
> 时间：2016-05-20T14:38:51.357

我的问题是由以下原因引起的：

1.  创建迁移（成功）
2.  决定我要重新创建它，并删除迁移`.cs`文件
3.  尝试重新生成它，并以空迁移`Down`和`Up`功能结束

在这种情况下，我忘了删除`ApplicationDbContextModelSnapshot.cs`模型更改的条目。删除此文件中的新映射解决了我的问题，然后正确生成。

* * *

## 回答 #5

> 赞同：9
> 
> 时间：2013-04-03T17:24:29.630

你“不同步”——数据库、迁移、代码——你可能会遇到各种各样的问题。

我这样做了`million times`（几乎：）而且效果很好——但你需要保持稳定，对你正在做的事情一丝不苟。

你可以通读我做的这个“总结”——从某个地方开始（但也要检查连接）。

[代码先创建表](https://stackoverflow.com/questions/15747162/code-first-create-tables/15747585#15747585)

...如果它不起作用，我建议您制作一个小的“可重复”场景/模型 - 准确发布您拥有的内容。

**迁移的工作原理：**

迁移与“迁移表”相关联。

何时`Add-Migration`运行 - 它检查“现有数据库”结构和迁移表 - 并产生“差异”（有时你没有得到任何“向上”“向下”，因为它们也是同步的）。

因此，每个“迁移”都是代码、现有迁移、数据库和迁移表之间的复杂差异。除了删除数据库之外，肯定不会重置其他任何东西 - Db“迁移”表可能还不够 - 这不能保证完全“清理”（如果可能，我总是会完全删除 Db）。您还需要删除代码迁移。

确保在相关的之后/之前“编译”项目（最好让它们在配置中自动编译）。

确保您的“连接”匹配。

一旦一切都同步了——一切都应该很好地工作——但你必须保持同步。除非您打算删除 Db（测试） - 不要像那样删除迁移（您可以使用`Update-Database -0`（我认为）返回某些迁移（这是“零状态”）。

* * *

## 回答 #6

> 赞同：7
> 
> 时间：2014-09-05T15:06:25.773

我遇到了与此类似的问题，在该问题上，使用`-force`on 标志`add-migration`重新构建现有迁移无缘无故停止工作。

无论我做什么，我都会收到愚蠢的“无法生成显式迁移，因为以下显式迁移正在等待”错误消息。在尝试了我能想到的几乎所有事情并且没有把我的笔记本电脑砸成碎片之后，出于绝望，我`enable-migrations`再次跑了，当然得到了“迁移已经在项目'Blah.Blah'中启用”消息。再次尝试`add-migration -force`，神奇地它起作用了。

我不知道它改变了什么——一定是源代码控制之外的一些用户设置/配置文件。希望这会对其他人有所帮助。

* * *

## 回答 #7

> 赞同：5
> 
> 时间：2016-04-19T02:26:39.133

批量构建 -> 清洁选项对我不起作用。

我通过以下方式解决了这个问题：

1.  使用“Add-Migration NameOfMigration”创建迁移
2.  删除创建的迁移类的 up 和 down 函数的内容。
3.  通过运行迁移脚本来更新数据库（它只会使用“Update-Database -Verbose”向 _MigrationHistory 表中添加一行

Web 应用程序现在成功运行，所以基本上我遇到了一个问题，该问题仅通过添加元数据来解决。

* * *

## 回答 #8

> 赞同：1
> 
> 时间：2018-03-15T00:00:39.340

我将一个新类添加到我的数据模型的子目录中，使用添加迁移的脚手架看不到生成的命名空间。

修复是重命名新类的命名空间以符合模型的其余部分，和/或将“public virtual DbSet ..”等添加到您的实体上下文类中，这将要求您引用这个新命名空间，然后运行 ​​add-再次迁移。

* * *

## 回答 #9

> 赞同：1
> 
> 时间：2020-06-10T12:17:08.383

它发生在我身上，没有任何效果。然后我自己做了这个，现在一切正常。

**问题：** 我创建了一个模型“汽车”。当我使用命令“add-migartion AddCarModel”为其创建迁移时，创建了一个迁移但它是空的。我尝试使用不同的名称，也尝试删除迁移的 .cs 文件，但没有任何效果。然后我做了以下事情：

**解决方法：** 按照以下步骤：

**1.**删除您为模型创建的所有空迁移。（但请记住步骤 2 的迁移名称）

**2.**同时从“_MigrationHistory”表中删除那些迁移条目。

**3.**注释掉模型数据库上下文的行，（在我的情况下，它是“public DbSet Cars{ get; set; }”）

**4.**清洁和重建解决方案。（最好是批量清洁）

**5.**确保您的更新命令正常工作并且没有抛出错误。（命令：“更新数据库 -verbose”）

**6.**现在取消注释您在步骤 3 中注释的行。

**7.**现在为该模型创建迁移。（我创建了与以前同名的迁移）

希望它有效。:-)

* * *

## 回答 #10

> 赞同：0
> 
> 时间：2013-04-03T08:47:39.813

看来我设法通过将模型和上下文类移动到另一个项目来解决问题。

我仍然不知道为什么会这样，而且这个解决方案真的根本没有解决方案:(

* * *

## 回答 #11

> 赞同：0
> 
> 时间：2015-09-29T08:30:09.970

我有同样的问题。迁移已启用，但未检测到任何更改。我的解决方案是使用 -Force 属性重新启用迁移，然后一切正常。

> 启用迁移 -ProjectName -StartupProjectName --ConnectionStringName -Force

* * *

## 回答 #12

> 赞同：0
> 
> 时间：2016-02-08T23:19:31.093

我不得不删除 EF 生成的 _MigrationHistory 表。然后我再次运行 add-migration。不过要小心这一点，因为它会从头开始生成所需的查询，包括已经存在的表。

* * *

## 回答 #13

> 赞同：0
> 
> 时间：2016-03-16T18:11:37.040

就我而言，这是因为我添加了一个辅助上下文“ApplicationDbContext”作为 ASP.net 身份信息的一部分。当我再次运行“启用迁移”命令时，我收到一个错误，提示存在多个上下文。一旦我将这两件事结合起来，就又开始工作了。

* * *

## 回答 #14

> 赞同：0
> 
> 时间：2017-11-02T11:23:27.777

也许是最愚蠢的：

我正在添加一个与我正在创建的新对象**同名**的迁移。

* * *

## 回答 #15

> 赞同：0
> 
> 时间：2020-06-01T02:48:54.800

`dotnet ef migrations remove`即使我删除了之前的迁移，我也必须运行

* * *

## 回答 #16

> 赞同：0
> 
> 时间：2020-09-27T09:18:56.730

如果您使用 fluent api 为 DbSet 设置配置，那么您将不会遇到任何问题

# c# - 使用 .DefaultIfEmpty() 而不是 .FirstOrDefault() ?? 字符串.空；

> ID：15781975
> 
> 赞同：14
> 
> 时间：2013-04-03T08:05:23.963
> 
> 标签：c#, linq

如何集成`.DefaultIfEmpty()`扩展方法，所以我**不必**使用

```
.FirstOrDefault() ?? String.Empty; 
```

代码：

```
(from role in roleList
let roleArray = role.RoleId.Split(new char[] { WorkflowConstants.WorkflowRoleDelimiter })
where roleArray.Length.Equals(_SplittedRoleIdArrayLength) && 
      HasAccessToCurrentUnit(roleArray[_UnitIndexInRoleId])
select roleArray[_LevelIndexInRoleId]).FirstOrDefault() ?? String.Empty; 
```

* * *

## 回答 #1

> 赞同：18
> 
> 时间：2013-04-03T08:09:52.743

你可以使用：

```
var query = ...;

return query.DefaultIfEmpty(string.Empty).First(); 
```

但这并没有降低 IMO 的复杂性。

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2013-04-03T08:11:30.437

如果你对扩展方法感兴趣，那么你可以使用这样的东西：

```
public static class Helpers
{
    public static string FirstOrEmpty(this IEnumerable<string> source)
    {
        return source.FirstOrDefault() ?? string.Empty;
    }
} 
```

**编辑**

这个方法不是通用的，因为那时我们必须使用`default(T)`它，它会给我们`null`而不是`string.Empty`.

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2016-01-07T14:16:23.737

我发现 PluralSight 上的这门课程很有趣，当我看到这个问题时我就记住了。

您可以观看整个课程，但 Map Reduce 和`Option<T>`策略，尤其是 DefaultIfEmpty 似乎很适合您的用例。

**.NET 中的战术设计模式：Zoran Horvat 的控制流** [https://app.pluralsight.com/library/courses/tactical-design-patterns-dot-net-control-flow/table-of-contents](https://app.pluralsight.com/library/courses/tactical-design-patterns-dot-net-control-flow/table-of-contents)

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-04-03T08:39:21.247

编码：

```
var query=(
    from role in roleList
    let delimiter=WorkflowConstants.WorkflowRoleDelimiter
    let roleArray=role.RoleId.Split(new char[] { delimiter })
    where roleArray.Length.Equals(_SplittedRoleIdArrayLength)
    where HasAccessToCurrentUnit(roleArray[_UnitIndexInRoleId])
    select roleArray[_LevelIndexInRoleId]
    ).DefaultIfEmpty("").FirstOrDefault(); 
```

`DefaultIfEmpty`由于对and语义的怀疑`FirstOrDefault`，下面是从库中反编译的代码：

*   代码

    ```
    public static IEnumerable<TSource> DefaultIfEmpty<TSource>(this IEnumerable<TSource> source)
    {
        return source.DefaultIfEmpty<TSource>(default(TSource));
    }

    public static IEnumerable<TSource> DefaultIfEmpty<TSource>(this IEnumerable<TSource> source, TSource defaultValue)
    {
        if (source == null)
        {
            throw Error.ArgumentNull("source");
        }
        return DefaultIfEmptyIterator<TSource>(source, defaultValue);
    }

    public static TSource First<TSource>(this IEnumerable<TSource> source)
    {
        if (source == null)
        {
            throw Error.ArgumentNull("source");
        }
        IList<TSource> list = source as IList<TSource>;
        if (list != null)
        {
            if (list.Count > 0)
            {
                return list[0];
            }
        }
        else
        {
            using (IEnumerator<TSource> enumerator = source.GetEnumerator())
            {
                if (enumerator.MoveNext())
                {
                    return enumerator.Current;
                }
            }
        }
        throw Error.NoElements();
    }

    public static TSource FirstOrDefault<TSource>(this IEnumerable<TSource> source)
    {
        if (source == null)
        {
            throw Error.ArgumentNull("source");
        }
        IList<TSource> list = source as IList<TSource>;
        if (list != null)
        {
            if (list.Count > 0)
            {
                return list[0];
            }
        }
        else
        {
            using (IEnumerator<TSource> enumerator = source.GetEnumerator())
            {
                if (enumerator.MoveNext())
                {
                    return enumerator.Current;
                }
            }
        }
        return default(TSource);
    } 
    ```

这里有一点需要提一下：

1.  `DefaultIfEmpty`有一个无参数重载，它调用参数化重载`default(TSource)`并返回其结果。

2.  `FirstOrDefault`无参数和之间的唯一区别`First`是后者会在集合为空时抛出。

    有关详细信息，请参阅MSDN 上的[Enumerable.FirstOrDefault<TSource> 方法](http://msdn.microsoft.com/en-us/library/bb340482.aspx)。

3.  `FirstOrDefault`语义上表达`first or default`的，所谓的；它没有命名`first or null`。在 c# 中，`default(T)`对于引用类型是*null*，但对于非引用类型，它不是。例如，`default(int)`为零。

    关键字`default`从未在语义上说为*null 。*它是**默认**的。

    此外，有关详细信息，请参阅MSDN 上的[默认关键字](http://msdn.microsoft.com/en-us/library/xwth0h0d.aspx)。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2021-11-27T11:36:26.140

.NET 6 引入了能够传入默认值的概念，如果找不到该项目。例如，此代码现在在 .NET 6 中有效：

```
source.FirstOrDefault(String.Empty); 
```

或者：

```
List<int> numbers = new List<int>();
var custom = numbers.FirstOrDefault(-1); 
```

> 在上面的示例中，我们不再需要依赖于返回 0，这是 int 的默认值。当 0 在使用数字列表的上下文中是有效数字时，这可能很方便，而 -1 不是。

你可以阅读更多：

[https://dotnetcoretutorials.com/2021/09/02/linq-ordefault-enhancements-in-net-6/](https://dotnetcoretutorials.com/2021/09/02/linq-ordefault-enhancements-in-net-6/) [https://adamstorr.azurewebsites.net/blog/default-your-firstordefault-in-net6.0](https://adamstorr.azurewebsites.net/blog/default-your-firstordefault-in-net6.0)

# php - Zend 框架 2：表单绑定未设置从数据库中提取的值

> ID：15781979
> 
> 赞同：4
> 
> 时间：2013-04-03T08:05:35.640
> 
> 标签：php, zend-framework2

我想为我的应用程序创建一个带有 Zend Framework 2 的表单，我已经准备好了所有内容，并且表单正在显示，但我的问题是我无法绑定来自数据库的初始表单值

```
$myUserDetails = <details of my user coming from DB>;
$form = $form->bind($myUserDetails); //This should set the values for the form to display but it doesnt 
```

我的显示逻辑很简单如下图

```
$form = $this->form;
$form->setAttribute('action', 
$this->url('<routename>',array('action'=>'<actionname>')));
$form->prepare();
echo $this->form()->openTag($form) . PHP_EOL;
echo $this->formRow($form->get('email_id')) . PHP_EOL;
echo $this->formRow($form->get('dob')) . PHP_EOL;
echo $this->formRow($form->get('gender')) . PHP_EOL;
echo $this->formRow($form->get('user_page_name')) . PHP_EOL;
echo $this->formInput($form->get('submit')) . PHP_EOL;
echo $this->form()->closeTag($form) . PHP_EOL; 
```

现在我尝试在我的控制器操作中设置绑定到表单的对象中的数据

```
$myUserDetails = <details of my user coming from DB>;
$form = $form->bind($myUserDetails);
$data = $myUserDetails->getArrayCopy();
$form->setData($data['data']); 
```

这似乎以某种方式起作用，并且在视图中显示了我的值。所以我只想知道我在第一种方法中做错了什么？提前致谢 ：）

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-03T10:31:19.317

感谢@Stoyan Dimov，我解决了这个问题。基本上它在我的模型中使用 getArrayCopy 函数，因为我直接返回一个包含在索引“数据”中的数组

所以我将我的 getArrayCopy 更改为

```
public function getArrayCopy() {
        $data = get_object_vars($this);
        return $data['data'];
    } 
```

瞧，它奏效了。

再次感谢斯托扬·迪莫夫

# r - 在 r 中使用 strptime 选择特定日期

> ID：15781980
> 
> 赞同：2
> 
> 时间：2013-04-03T08:05:39.030
> 
> 标签：r, time-series, strptime

我有一个带有标题的文本文件数据集

```
YEAR MONTH DAY value 
```

从 2010 年 1 月 6 日到 2012 年 14 月 7 日，每小时运行一次。我使用以下命令打开并绘制数据：

```
data=read.table('example.txt',header=T)
time = strptime(paste(data$DAY,data$MONTH,data$YEAR,sep="-"), format="%d-%m-%Y")
plot(time,data$value) 
```

但是，在绘制数据时，x 轴只显示 2011 年和 2012 年![在此处输入图像描述](https://i.stack.imgur.com/OwuYK.png)。我怎样才能保留 2011 和 2012 的标签，但还要添加一些特定的月份，例如，如果我想要 3 月、6 月和 9 月？

我已在此链接上提供数据

[https://dl.dropbox.com/u/107215263/example.txt](https://dl.dropbox.com/u/107215263/example.txt)

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-04-03T08:29:48.227

您需要根据需要使用函数`axis.POSIXct`来格式化和处理您的日期标签：

```
plot(time,data$value,xaxt="n") #Skip the x-axis here
axis.POSIXct(1, at=pretty(time), format="%B %Y") 
```

![在此处输入图像描述](https://i.stack.imgur.com/slMBk.png)

要查看所有可能的格式，请参阅`?strptime`。
您当然可以使用参数`at`将刻度放置在您想要的任何位置，例如：

```
axis.POSIXct(1, at=seq(time[1],time[length(time)],"3 months"), 
             format="%B %Y") 
```

![在此处输入图像描述](https://i.stack.imgur.com/NXs4N.png)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-03T08:40:03.833

虽然这不能直接回答问题，但我建议您使用`xts`包进行任何时间序列分析。它使时间序列分析非常方便

```
require(xts)

DF <- read.table("https://dl.dropbox.com/u/107215263/example.txt", header = TRUE)
head(DF)
##   YEAR MONTH DAY    value
## 1 2010     6   1  95.3244
## 2 2010     6   2  95.3817
## 3 2010     6   3 100.1968
## 4 2010     6   4 103.8667
## 5 2010     6   5 104.5969
## 6 2010     6   6 107.2666

#Get Index for xts object which we will create in next step
DFINDEX <- ISOdate(DF$YEAR, DF$MONTH, DF$DAY)

#Create xts timeseries
DF.XTS <- .xts(x = DF$value, index = DFINDEX, tzone = "GMT")

head(DF.XTS)
##                         [,1]
## 2010-06-01 12:00:00  95.3244
## 2010-06-02 12:00:00  95.3817
## 2010-06-03 12:00:00 100.1968
## 2010-06-04 12:00:00 103.8667
## 2010-06-05 12:00:00 104.5969
## 2010-06-06 12:00:00 107.2666

#plot xts
plot(DF.XTS) 
```

![在此处输入图像描述](https://i.stack.imgur.com/tqOz2.png)

# jquery - colorbox 的高度和宽度不是每隔一个打开设置一次

> ID：15781982
> 
> 赞同：2
> 
> 时间：2013-04-03T08:05:43.813
> 
> 标签：jquery, colorbox

我对彩盒有疑问。第一次启动没问题，第二次启动宽度为 0，高度为 20，第三次启动再次正常（700/700px），然后第四次 0/20 等等

开头的代码非常简单：

```
 $(".invoicepullhours").colorbox({
        iframe:true, 
        width:'700px', 
        height:'700px'               
     }); 
```

我使用jquery 1.7.1，目标来自href。更改 href 链接无效。检查员在保管箱上的屏幕截图：[https](https://dl.dropbox.com/u/6939592/stackoverflow-colorbox.png) ://dl.dropbox.com/u/6939592/stackoverflow-colorbox.png 控制台没有显示任何错误。

任何人？

干杯，戴夫。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-03T10:07:04.010

不要在“a”标签中添加额外的类。"class='iframe'" 就足够了；然后在“ColorBox”本身决定如何在任何浏览器中打开它之后。

```
<!DOCTYPE html>
<html>
    <head>
        <meta charset='utf-8'/>
        <title>Colorbox Examples</title>
        <style>
            body{font:12px/1.2 Verdana, sans-serif; padding:0 10px;}
            a:link, a:visited{text-decoration:none; color:#416CE5; border-bottom:1px solid #416CE5;}
            h2{font-size:13px; margin:15px 0 0 0;}
        </style>
        <link rel="stylesheet" href="colorbox.css" />
        <script src="https://ajax.googleapis.com/ajax/libs/jquery/1.9.1/jquery.min.js"></script>
        <script src="../jquery.colorbox.last.js"></script>
        <script>
            $(document).ready(function () {
    $(".iframe").colorbox({
        iframe: true,
        width: "700px",
        height: "700px"
    });
});
        </script>
    </head>
    <body>
<p><a class='iframe' href="http://wikipedia.com">Outside Webpage (Iframe)</a></p>
    </body>
</html> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-03T19:02:59.390

实际上是通过从 v1.4.8 更新到 v1.4.10 来解决的...

# android - ACRA 集成和 Google Drive

> ID：15781986
> 
> 赞同：4
> 
> 时间：2013-04-03T08:06:04.403
> 
> 标签：android, acra

几天前，我成功地将[ACRA](https://github.com/ACRA/acra/wiki/BasicSetu)集成到项目中以获取崩溃日志，但是由于大量条目，我刚刚删除了整个表单，但是当我尝试创建新表单时，我无法获得创建新的`legacy form within Tools`.

我遵循了与之前相同的步骤，但不知道现在发生了什么，为什么我无法选择`Legacy form`在电子表格内的工具中创建。

你的建议是可观的。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-03T09:14:42.073

```
using Google Drive Forms as the ACRA reporting endpoint will not be supported anymore with the next releases. 
```

我建议您`BugSense`作为报告的后端进行连接`ACRA`。那是我设置的，效果很好。

要获得崩溃报告，`BugSense`您应该：

**1.**创建一个帐户。

**2.**放置这条线：

```
@ReportsCrashes(formUri = "http://www.bugsense.com/api/acra?api_key=key_received_from_bugsense", formKey="") 
```

`Application`在你的班级声明之前：

[http://blog.bugsense.com/post/8083993853/using-acra-and-bugsense](http://blog.bugsense.com/post/8083993853/using-acra-and-bugsense)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-03T08:57:00.710

好像被砍了 [无论如何，谷歌并没有很好](https://github.com/ACRA/acra/wiki/Notice-on-Google-Form-Spreadsheet-usage)地接受 ACRA 的这种用法，所以我建议你寻找替代方案。一旦这些表格变得足够大，它们也会丢失数据。编写您自己的自定义 POST 操作并将其与 ACRA 链接或使用[第三方提供商](http://www.bugsense.com/docs/android#acra)。

# expresso-store - 添加新的送货区域后结帐不会转到付款页面

> ID：15781997
> 
> 赞同：0
> 
> 时间：2013-04-03T08:06:41.490
> 
> 标签：expresso-store

我最近将澳大利亚添加到允许的运输区域（以前只是英国）。选择英国地址 + 英国作为账单/发货国家/地区，结帐流程运行良好，提交详细信息会将买家带到贝宝。选择澳大利亚地址 + 澳大利亚作为计费/发货国家/地区，提交根本不执行任何操作 - 它只是返回相同的页面。知道为什么吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-03T08:32:57.780

没有看到您的模板就很难诊断。我最初的想法是，您当前在模板中打开了内联错误，并且表单中有错误，但您没有 `{error:field_name}'`为相关字段提供模板。由于这只发生在澳大利亚，我会进一步说您正在使用默认运输方式进行运输，并且您目前没有处理您所需运输地点的规则设置。

要修复，请确保您在该模板中关闭了内联错误处理。这将为您提供标准的 EE 错误页面以帮助诊断。

如果您使用默认运输方式，请确保您有处理澳大利亚的规则。

# php - php代码里面的codeigniter需要添加语言类型

> ID：15781998
> 
> 赞同：-3
> 
> 时间：2013-04-03T08:06:53.093
> 
> 标签：php, codeigniter

**这是它加载我的动态菜单的代码**

```
<?php echo $this->dynamic_menu->build_menu('1'); ?> 
```

**这是我的语言类型的代码**

```
<?php echo lanchor($uri, lang('menuenglish')); ?> 
```

**在这里我想像这样添加**

```
<?php echo $this->"<?php echo lanchor($uri, lang('menuenglish')); ?>"->build_menu('1'); ?> 
```

我知道上层代码是错误的，但为了清楚起见..

而不是**我**想从我的语言变量中呼应的动态菜单

我在动态菜单中的语言变量之一

问候

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-03T08:10:50.560

只需这样做：

```
<?php 
    $menu = lanchor($uri, lang('menuenglish'));
    echo $this->{(string) $menu}->build_menu('1');
?> 
```

但是如果你在谷歌中搜索这个，你将能够找到答案。