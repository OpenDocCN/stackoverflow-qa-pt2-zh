# StackOverflow 问答 14179000-14179999

# jquery - 无法使背景图像全屏

> ID：14179006
> 
> 赞同：1
> 
> 时间：2013-01-06T03:30:25.827
> 
> 标签：jquery, html, css

我正在尝试使用视差制作网站。

我在使用 CSS 时遇到了麻烦。下面是 HTML：

```
<div id="skrollr-body">

        <div class="subnav"> 
            <ul  id="nav">
                <li><a href="#home">Home</a></li>
                <li><a href="#foo">Foo</a></li>

            </ul> 
        </div>

            <div id="home" class="centered" data-0="height:100%;" data-1000="height:0%;" > 
                <div class="zebra">
                     <div class="contentWrap">

                          test

                     </div>         
                </div> 
            </div>

            <div id="foo" class="centered" data-1000="height:100%;" data-2000="height:0%;">
                <div class="world">
                         <div class="contentWrap">

                              test

                         </div>         
                 </div> 

            </div> 
</div> 
```

这是CSS：

```
#home {  
    background: #dedede;
    height: 100%;
    z-index: 901;
} 
#foo{background: yellow; z-index:800;}  

.zebra {
    background-image: url("/img/zebra-pattern.png");
    background-position: center center;
    background-repeat: repeat-x;
    background-size: cover;
    height: 100%;
    position: relative;
    width: 100%;
}

.world {
    background-image: url("/img/world.jpg");
    background-position: center center;
    background-repeat: repeat-x;
    background-size: cover;
    height: 100%;
    position: relative;
    width: 100%;
}

.contentWrap{ 
    position: absolute; 
    border: 1px solid red;
} 
```

我的问题是，如果我没有明确放置高度，背景图像就不会变成全屏。

有什么建议吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-06T03:32:45.737

对于任何元素的百分比高度，它的父元素必须设置某种高度。该父级的高度也可以是一个百分比，但是，在这种情况下，要使该百分比起作用，它自己的父级也必须设置某种高度。这一直到 html 元素。

在您的情况下，如果`#skrollr-body`是元素的直接子`body`元素，则必须将其包含在样式表中：

```
html,
body, 
#skrollr-body {
    height: 100%;
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-09-09T21:03:57.447

我在使用“background:cover”和 skrollr 时遇到了同样的问题。

问题源于“封面”指定图像的大小（以覆盖元素）并且skrollr使用“背景位置”来偏移图像......如果图像仅与包含它的元素一样大，当它'skrolls'时，它会留下空白。我正在写一些 jquery 来调整我的背景大小，使其相当于“cover + 10%”。

如果有人在我之前完成这个，我很乐意看到它！

**~~ 一个更简单的选择是确保您的图像比它的宽度高得多。（如果您使用 skrollr 对其进行垂直动画处理）**

# mysql - mysqld无法启动，mysql错误2002

> ID：14179007
> 
> 赞同：5
> 
> 时间：2013-01-06T03:30:26.117
> 
> 标签：mysql, debian, lamp

好的，我环顾四周，但我对这个问题感到非常困惑。如果这是愚蠢的，请原谅我。:*S 我正在运行 32 位 Debian 6.0.6。

```
 root@debian:~# service mysql start
    Starting MySQL database server: mysqld . . . . . . . . . . . . . . failed! 
```

因此，该服务无法启动。

```
 root@debian:~# mysql
    ERROR 2002 (HY000): Can't connect to local MySQL server through socket '/var/run/mysqld/mysqld.sock' (2) 
```

这是运行命令mysql时给出的错误。这个错误是因为mysqld无法启动吗？还是另有原因？

我转到目录 /var/mysqld/ 并没有名为 mysqld.sock 的文件。是这个问题，还是我傻？哈哈。任何帮助将不胜感激。感谢您的时间。

*编辑*：此外，与 mysql 关联的日志（例如 mysql.log 和 mysql.err）似乎对它们没有任何价值，它们是空白的。此外，我已经 chmod 777'd mysql 所作用的所有目录。该服务仍然继续拒绝运行。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-01-06T05:21:45.167

尝试以不同的方式追踪错误。在前台运行 MySQL。

```
mysqld_safe --log-error=/var/log/mysql.err 
```

这应该会产生一个包含一些详细信息的日志，`/var/log/mysql.err`如果有的话，可以将详细信息添加到您的问题中，以防我下面的解决方案不起作用并且其他人可以提供帮助。

您最终可能会遇到错误`mysqld_safe: command not found`，如果这样做，请使用该`locate`命令查找它。

```
locate mysqld_safe 
```

这会告诉你它在哪里。例如，如果它返回`/usr/bin/mysqld_safe`，请运行命令

```
/usr/bin/mysqld_safe --log-error=/var/log/mysql.err 
```

如果我不得不冒险猜测，您会发现有关*pthreads*的错误。

```
InnoDB: Error: pthread_create returned 12 
```

如果是这种情况，简单的解决方案是禁用*InnoDB* for MySQL。您可能不需要这个，所以在配置中禁用它。

要关闭 InnoDB，请编辑 MySQL 配置文件`/etc/mysql/my.cnf`并将其添加到其中

```
skip-innodb 
```

现在启动 MySQL

```
/etc/init.d/mysql start 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2014-02-07T16:03:29.437

我有同样的问题。

/tmp 目录不是 writbale，因此 MYSQL 无法写入一些需要的文件。

只需这样做：

```
chmod 777 /tmp 
```

并重新启动mysql

```
/etc/init.d/mysql start 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2014-05-26T00:20:16.800

几天来我遇到了同样的问题，这是我的网络（DHCP）以及 mysql 配置（我一直在尝试）。

这可能会帮助您：

*   打开`/etc/mysql/my.cnf`
*   查找`bind-address`并确保 IP 地址正确或像这样注释掉 `#bind-address`

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-03T19:53:12.337

我有同样的

我已经卸载了 zlib1g-dev 一切都很好

# visual-studio - 如何在 MS Visual Studio 2010 中搜索子程序/模块

> ID：14179009
> 
> 赞同：2
> 
> 时间：2013-01-06T03:30:37.383
> 
> 标签：visual-studio, visual-studio-2010, fortran, intel-fortran

MS Visual Studio 2010（我使用 Intel Visual Fortran Composer XE 2011）中有没有办法搜索子例程和模块？例如，如果我在一个调用另一个子例程子名的子例程（由其他人编写）中，我通常使用“在文件中查找”来查找后一个子例程，但是有没有更直接的方法，例如通过右键单击函数（或模块）名称？我找不到任何东西。谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-06T20:03:43.380

从 Composer XE 2011 更新 6（编译器版本 12.1）开始，您所追求的源代码浏览风格在英特尔 Fortran Visual Studio 集成中可用。您需要确保已启用它 - 在 Text Editor > Fortran > Advanced 类别中的 Tools > Options 下，将 Collect Call/Callers graph information 和 Collect Object Browser information 设置为 true 并将 Disable Database 设置为 false。

可能需要重新启动 Visual Studio。然后可以使用源代码编辑窗口顶部的下拉列表和编辑器窗口中右键菜单上的各种选项来浏览当前解决方案中的模块和过程。

对于具有大型代码库的解决方案，源浏览器所依赖的信息的获取和维护可能会耗费大量资源。对通过通用接口访问的过程的支持很差。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2018-03-07T04:05:02.360

1.  Fortran CodeNav 的源代码编辑器增强功能。

    **Fortran CodeNav**是使用 MS VS 进行 fortran 编码的有用扩展。它支持“跳转到成员声明”、“元素的列表用法”、“自动完成”和搜索。我推荐 Fortran CodeNav，因为它支持快捷键。Fortran CodeNav for VS2010 可以在其[旧站点](https://publicwiki.deltares.nl/display/FCN/Home)下载。

2.  IVF 的源代码编辑器增强功能

    @IanH 的回答提到了它。也许您可以在您的 IVF 版本的开发人员指南和参考书中找到 Source Editor Enhancements 指南。从 XE2018 更新 1（IVF 编译器 18.0）开始，该指南在[此处](https://software.intel.com/en-us/fortran-compiler-18.0-developer-guide-and-reference-using-source-editor-enhancements-in-microsoft-visual-studio)。但它不支持快捷键。

# ruby-on-rails - 以表单形式提交 API 密钥？

> ID：14179014
> 
> 赞同：1
> 
> 时间：2013-01-06T03:32:28.883
> 
> 标签：ruby-on-rails, api-key

我有一个用于用户拥有的一些资源的 json API。我已使用此 railscast 中所述的 API 访问密钥保护 API 访问：[http: //railscasts.com/episodes/352-securing-an-api](http://railscasts.com/episodes/352-securing-an-api)

这很好用，当他们想要添加/更新/删除资源时，我为每个用户必须提交一个唯一的密钥。我遇到的问题是，除了 API 之外，用户应该能够从 Web 表单中编辑资源。但这不起作用，因为表单没有在标头中提交 API 密钥，因此访问被拒绝。

有没有办法让表单为用户发送访问密钥，因为他们已经登录了？或者也许我做错了？也许我应该检查是否存在活动会话，在这种情况下将其用作身份验证而不是 API 密钥？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-06T05:24:10.773

> 有没有办法让表单为用户发送访问密钥，因为他们已经登录了？

可以通过将 API 访问密钥作为`hidden`字段包含在表单中来为用户发送 API 访问密钥。收到后，您可以将其与为登录用户分配的访问密钥进行比较。

但是想想你的客户和你的业务。在表单中以明文形式包含 API 密钥就像让黑客从字面上看可以更改他们想要的任何内容，尤其是在未配置 HTTPS 的情况下。

> 也许我应该检查是否存在活动会话，在这种情况下将其用作身份验证而不是 API 密钥？

是的，这是执行此操作的安全方法之一。您提到的第一种方法根本不安全。不要将任何与*身份验证*相关的东西放在容易更改的地方（表单、cookie）。

如果您愿意，您可以同时`session-based authentication`使用`API access Key`. 如何？假设您为每个修改请求生成一个带有*到期日期的 API 访问密钥。*每次修改都需要在`x`触发后的几分钟内提交。提交后，您针对用户*进行*身份验证`session`并*针对*`API`. 这**只是**一个例子。

# wordpress - Wordpress 主题不会为匿名用户更新

> ID：14179017
> 
> 赞同：0
> 
> 时间：2013-01-06T03:33:17.830
> 
> 标签：wordpress, wordpress-theming

我在 hostgator 中安装了一个新的 WordPress 3.5 版本，当我将 2011 主题更改为 2012 时，并与匿名用户核实，主题没有更新给他。

我不明白为什么会这样。我已经安装了以下插件

*   阿基斯梅特
*   左右浮动广告
*   你好，多莉
*   无限滚动
*   WordPress.com 的 Jetpack [活动]
*   WP 超级缓存 [ACTIVE]

请帮忙

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-06T03:52:59.873

您需要清除 W3 Total Cache 插件的缓存。

转到性能 - >清空所有缓存

清除浏览器缓存

如果需要，重新启动 httpd Apache 服务器

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-06T03:54:18.177

删除*WP Super Cache*插件中的缓存，它会正常工作。

# css - 尽管光标仍在悬停，如何应用 CSS 过渡 2s 然后取消？

> ID：14179019
> 
> 赞同：3
> 
> 时间：2013-01-06T03:33:27.907
> 
> 标签：css, css-transitions

几年前我似乎在 CSS 中遇到了一些东西，在*end*或*stop*上，一些术语或语法，用于在声明中提供一段时间后关闭动画......但在谷歌上没有找到任何运气。有没有办法在 :hover 状态仍处于活动状态时*快速恢复/撤消转换？*

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-06T03:43:52.363

我很确定这`animation-play-state`就是你要找的。请注意，没有浏览器支持此属性。Safari、Chrome、Opera 和 Firefox 确实通过前缀支持它，但请注意前缀`-moz-`（对于 FireFox）、`-webkit-`（对于基于 Webkit 的浏览器，如 Chrome 和 Safari）和`-o-`（对于 Opera）是代码运行所必需的，或者根本不被认可。

对于更跨浏览器的解决方案，您可能会发现自己转向 JavaScript 或使用它的库。例如，`function()`可以在执行期间调用 JavaScript，触发动画停止，延迟使用`setTimeout`. 这绝对是一件完全不难完成的事情。

你在你的问题中提到了一个`stop`脚本。jQuery（一个 JavaScript 库）确实有类似的东西：[http](http://api.jquery.com/stop/) ://api.jquery.com/stop/ 。唯一的问题是必须使用 jQuery 代码来触发转换`transition`，但考虑到 jQuery 是一种速记编码语言，并且有很好的文档记录，这应该不难。

告诉我这是否有帮助。

如果有帮助，不要忘记接受这个答案是正确的。:)

# vim - 如何为在 vim 中打开的所有文件设置 fileformat=unix？

> ID：14179021
> 
> 赞同：7
> 
> 时间：2013-01-06T03:34:48.887
> 
> 标签：vim

我想更改所有文件的文件格式。

所以我打开它们使用`vim *`.

然后我想知道是否有任何简单的方法可以做到这一点，而不是一个一个地为每个文件键入`:set fileformat=unix`和。`:w`

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2013-01-08T06:33:51.183

`argdo`是你想要的，不是`bufdo`，因为你想在每个参数上都这样做，而且你不（必然）想先打开每个文件。

```
:argdo set ff=unix | update 
```

应该做的伎俩。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-01-06T06:59:08.427

也许你需要 `bufdo`？

```
 :help bufdo
 bufdo[!] {cmd}     Execute {cmd} in each buffer in the buffer list.
 It works like doing this: 
                :bfirst
                :{cmd}
                :bnext
                :{cmd}
                etc. 
```

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2014-02-24T07:24:12.960

当然，您可以使用 vim 录制和播放功能来做到这一点。跟着这些步骤

```
1\. Open all files using vim *
2\. Press "qq" to start recording
3\. :set ff=unix
4\. :wn
5\. Press again "q" to stop recording
6\. Execute like "100@q" 
```

这里 100 是文件的大致数量，但如果您也提供更多数量，请不要担心。当它完成所有缓冲区说“E165：不能超出最后一个文件”时，它将停止。您可以通过在打开之前执行“ls | wc -l”来获取文件的数量。

# iphone - 如果您拥有多个 iOS SDK，Xcode 可能会显示多个 iOS 设备。我试图清楚地了解它们的区别

> ID：14179024
> 
> 赞同：2
> 
> 时间：2013-01-06T03:35:30.027
> 
> 标签：iphone, objective-c, ios, xcode

![在此处输入图像描述](../Images/84727b320411abceb634483126cd713a.png)

请看那个，我不明白那些 iPod 设备之间的区别。它们看起来就像是一样的东西。如果我选择 iOS 6.0 作为 iOS SDK，并选择 4.3 作为部署目标，它将在方案中显示几个相同的设备。真的让我很困惑。
你能帮我解决这个问题吗？非常感谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-06T04:51:46.467

尝试进入 Xcode 管理器并查看左侧的设备

# javascript - html5 - 页面之间的无缝音频连接

> ID：14179032
> 
> 赞同：1
> 
> 时间：2013-01-06T03:38:22.310
> 
> 标签：javascript, html, audio, local-storage

好吧，

我已经让 localStorage 做它的事情来保持两个页面之间的音频标签：

[http://tablapusher.com/location.php](http://tablapusher.com/location.php)

（点击黑框查看实际效果）

......那么，如何防止这种突然的跳过发生？可以这样做吗？我看到 beatport 的播放器 (html5) 成功地进行了这些转换。我不想使用 iframe，因为我正在努力摆脱它。我想这与在切换之前和之后设置音频缓冲区有关，并通过 javascript 将其与播放音频相匹配，不是吗？任何帮助是极大的赞赏！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-06T04:19:01.140

看起来暂时在一个元素上重新加载 ajax 并且 pushState 会为我解决问题。如果有人对最初提到的方法有解决方案，那也很好！

# javascript - 结束时隐藏不相关的按钮 标签

> ID：14179033
> 
> 赞同：0
> 
> 时间：2013-01-06T03:38:33.327
> 
> 标签：javascript, tinymce

我是 TinyMCE 的新手，但我设法制作了一个按钮，该按钮`<pre><code>...</code></pre>`带有一些代码的标签。

在那里，用户只能编写源代码，但如果他们使用像 一样的按钮`bold`，那么它会变成粗体..

我一直在试图找出一种禁用它的方法，并发现当您超过特殊标签时可以禁用按钮。

所以我想知道，是否有人知道这是怎么可能的？

我有这个插件，它的例子是： [https](https://code.google.com/p/tinymce-pre-plugin/) ://code.google.com/p/tinymce-pre-plugin/ 如果你看视频你会明白我的意思，他`<pre><code>...</code></pre>`在`0:40`.

您可以在此处查看插件文件的来源：

```
(function() {
    tinymce.PluginManager.requireLangPack('pre');

    tinymce.create('tinymce.plugins.PrePlugin', {       
        init : function(ed, url) {          
            var t = this;
            t.editor = ed;

            ed.addCommand('mcePre', function() {
                ed.windowManager.open({
                    file : url + '/dialog.htm',
                    width : 500 + parseInt(ed.getLang('pre.delta_width', 0)),
                    height : 300 + parseInt(ed.getLang('pre.delta_height', 0)),
                    inline : 1
                }, {
                    plugin_url : url
                });
            });

            ed.addButton('pre', {
                title : 'pre.desc',
                cmd : 'mcePre',
                image : url + '/img/pre.gif'
            });

            ed.onNodeChange.add(function(ed, cm, n) {
                cm.setActive('pre', n.nodeName == 'CODE');

                if(n.nodeName == 'CODE') t._setDisabled(1);
                else t._setDisabled(0);

                var notEmptyNode = n.innerHTML.replace(new RegExp('<\/?[^>]+>', 'gi'), '').replace(new RegExp('&nbsp;', 'gi'), '').match(/.*?[\S].*?/);
                if(notEmptyNode && n.nodeName != 'CODE')
                cm.setDisabled('pre', true);

            });
        },

        createControl : function(n, cm) {
            return null;
        },

        getInfo : function() {
            return {
                longname : 'Pre plugin',
                author : 'Marchenko Alexandr',
                authorurl : 'http://webdiz.com.ua',
                infourl : 'http://webdiz.com.ua',
                version : "1.0"
            };
        },

        _block : function(ed, e) {
            var k = e.keyCode;

            // Don't block arrow keys, pg up/down, and F1-F12
            if (k == 46 || (k > 32 && k < 41) || (k > 111 && k < 124))
                return;

            if (e.preventDefault) {
                e.preventDefault();
                e.stopPropagation();
            }
            else {
                e.returnValue = false;
                e.cancelBubble = true;
            }
            return false;
        },

        _setDisabled : function(s) {
            var t = this, ed = t.editor;

            tinymce.each(ed.controlManager.controls, function(c) {
                if(c.settings.cmd != 'mcePre') {
                    c.setDisabled(s);
                }
            });

            if (s !== t.disabled) {
                if (s) {
                    ed.onKeyDown.addToTop(t._block);
                    ed.onKeyPress.addToTop(t._block);
                    ed.onKeyUp.addToTop(t._block);
                    ed.onPaste.addToTop(t._block);
                } else {
                    ed.onKeyDown.remove(t._block);
                    ed.onKeyPress.remove(t._block);
                    ed.onKeyUp.remove(t._block);
                    ed.onPaste.remove(t._block);
                }

                t.disabled = s;
            }
        }
    });

    // Register plugin
    tinymce.PluginManager.add('pre', tinymce.plugins.PrePlugin);
})(); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-06T04:09:40.657

我发现。

这是执行此操作的代码：

```
ed.onNodeChange.add(function(ed, cm, n) {
    cm.setActive('pre', n.nodeName == 'PRE');

    if(n.nodeName == 'PRE') t._setDisabled(1);
    else t._setDisabled(0);

    var notEmptyNode = n.innerHTML.replace(new RegExp('<\/?[^>]+>', 'gi'), '').replace(new RegExp('&nbsp;', 'gi'), '').match(/.*?[\S].*?/);
    if(notEmptyNode && n.nodeName != 'PRE')
    cm.setDisabled('pre', true);

}); 
```

更改`PRE`为应设置的任何标签，但它会禁用所有按钮，仅保留活动按钮，但也无法写入任何文本。

# java - 休眠：对象不会保存到数据库中

> ID：14179034
> 
> 赞同：0
> 
> 时间：2013-01-06T03:38:36.477
> 
> 标签：java, database, spring, hibernate, struts2

我正在开发一个 web 应用程序，一旦用户提交表单，控制器就会接受用户信息，控制器将填充值并将其传递给服务层。然后服务层将调用将其添加到数据库的 DAO，但在调用 save 时，它​​只显示查询但没有将用户保存到数据库中。

这是我的一个片段`ServiceLayer`

```
public void addUser(User user){
    userDao.save(user);
} 
```

这是我的用户 dao

```
@Override
    public void save(User type) {
        sess().save(type);
    } 
```

在我的控制台上，这出现了。

```
Hibernate: insert into USERS (USERNAME) values (?) 
```

但它没有保存到数据库中，为什么？

我正在使用 strut2-spring-plugin 和休眠。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-06T03:43:38.040

我发现了我的错误！在达菲莫评论之前。我的服务层中没有@Transactional，这就是更改不会保存到数据库中的原因

```
@Transactional
public class MyService(){

  //Other methods
} 
```

# c++ - 为什么我的 Arduino 的计算速度比我的 MacBook Air 快 0 到 10 亿？

> ID：14179035
> 
> 赞同：5
> 
> 时间：2013-01-06T03:38:36.823
> 
> 标签：c++, arduino

这是我用 c++ 编写的 MacBook Air 结果，执行时间：2.692 秒

![](../Images/6b7b2d227ce714f8ad32142cf67fe094.png)

这是我的 Arduino 代码。它在“for”之前和之后获取时间（以微秒为单位）。
差异是 732 微秒，即 0.000732 秒

![](../Images/3685eddd426bcc26720a63dd988d201b.png)

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2013-01-06T04:15:33.543

让我们看看 MSVC 如何在调试模式下编译您的代码，因为您似乎正在编译它...

```
unsigned int max = 1000000000L;
    011643BE  mov         dword ptr [max],3B9ACA00h  
for (unsigned int i=0; i<max; i++)
    011643C5  mov         dword ptr [ebp-14h],0  
    011643CC  jmp         main+37h (011643D7h)  
    011643CE  mov         eax,dword ptr [ebp-14h]  
    011643D1  add         eax,1  
    011643D4  mov         dword ptr [ebp-14h],eax  
    011643D7  mov         eax,dword ptr [ebp-14h]  
    011643DA  cmp         eax,dword ptr [max]  
for (unsigned int i=0; i<max; i++)
    011643DD  jae         main+4Eh (011643EEh)  
{
    n++;
    011643DF  mov         eax,dword ptr ds:[0116F218h]  
    011643E4  add         eax,1  
    011643E7  mov         dword ptr ds:[0116F218h],eax  
}
011643EC  jmp         main+2Eh (011643CEh) 
```

好的，现在让我们看看在发布模式下......

```
unsigned int max = 1000000000L;
for (unsigned int i=0; i<max; i++)
    00FC1270  mov         eax,dword ptr ds:[00FC4430h]  
{
    n++;
}
std::cout << n;
    00FC1275  mov         ecx,dword ptr ds:[0FC3030h]  
    00FC127B  add         eax,3B9ACA00h  
    00FC1280  push        eax  
    00FC1281  mov         dword ptr ds:[00FC4430h],eax  
    00FC1286  call        dword ptr ds:[0FC3038h] 
```

注意到区别了吗？发布模式已经完全**优化了循环**。

好的，现在让我们换个角度看看 Arduino 是如何做到的。为一些 AVR asm 做好准备...

```
for(i=0; i<1000000000; i++)
{
 n++;
}
Serial.println(n);
    d8: c8 01           movw    r24, r16
    da: 40 e0           ldi r20, 0x00   ; 0
    dc: 5a ec           ldi r21, 0xCA   ; 202
    de: 6a e9           ldi r22, 0x9A   ; 154
    e0: 7b e3           ldi r23, 0x3B   ; 59
    e2: 2a e0           ldi r18, 0x0A   ; 10
    e4: 30 e0           ldi r19, 0x00   ; 0
    e6: 0e 94 c4 04     call    0x988   ; 0x988 <_ZN5Print7printlnEli> 
```

哇！它也优化了循环！编译器是个聪明的小混蛋，init ?!?!

...而且当您考虑时，执行那么长的循环不是 0.0007 秒有点快吗？那只够大约 43 个时钟周期的时间——勉强够调用`Serial.println()`.

* * *

## 回答 #2

> 赞同：12
> 
> 时间：2013-01-06T03:55:22.990

首先，您编写的代码非常简单。根据编译器和编译器设置，此类代码的编译结果会有很大差异。正确配置的优化编译器通常会将其编译为`n`无任何循环的最终值的普通赋值。或者它甚至可以`n`完全消除。在这种情况下，您真正​​衡量的只是“空虚”：一个几乎什么都不做的程序的启动和终止时间。

其次，您使用的测量方法在两个版本的代码之间似乎完全不同。在第一种情况下，您似乎在系统级别使用某些东西，这意味着它可能包括各种启动和结束时间到最终计数中。在第二种情况下，您将测量值嵌入到实际代码中，确保只测量周期（同样，编译器可能会消除它）。

换句话说，您正在使用不一致的方法来计时甚至可能不存在的东西。您获得的结果与代码的性能几乎没有相关性，或者更有可能根本没有相关意义。

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2013-01-06T04:04:04.163

AndreyT 已经给出了相关的技术解释，但这里有一个快速而肮脏的估计，有助于寻找正确的方向：

假设 Arduino 实际上在大约一毫秒（730 微秒）内管理了 10 亿（1e9）个增量，并且忽略了额外的增量并检查循环计数器以及跳转指令，这意味着 Arduino 可以以一定频率处理增量至少为 1e12 Hz，即 1000 GHz（请注意，这是对已处理增量指令频率的估计，它不一定等同于“CPU 频率”，但在没有任何其他信息的情况下是一个相当不错的估计器）。不太可能。因此可以安全地假设您的 arduino 编译器只是简单地消除了整个循环。

（对你的 MacBook 的相同估计给出了至少 (1e9/2.7) Hz 的频率，因此增量大约为 370Mhz - 考虑到操作系统开销以及循环需要额外增量、跳转和比较的事实，这可以解决相当接近您的处理器频率，所以我猜您的 Mac 程序编译器实际上会保持循环。）

# wpf - WPF 绑定已停止

> ID：14179037
> 
> 赞同：0
> 
> 时间：2013-01-06T03:38:56.790
> 
> 标签：wpf, binding

在后面的代码中：

```
musicChooser.SetBinding(ComboBox.SelectedIndexProperty, musicIndexBinding); 
```

当另一个按钮单击时：

```
musicChooser.SelectedIndex = -1; 
```

然后绑定停止了，为什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-06T04:02:01.310

`-1`您通过在下一行中显式设置显式删除了绑定。

```
 musicChooser.SelectedIndex = -1; 
```

如果要重置绑定目标，则需要将绑定源（在本例中为musicIndexBinding）值重置为`-1`并将`mucisChooser`其拾取。

# php - 使用 PHP 同时下载多个文件 - Forking, Sockets

> ID：14179039
> 
> 赞同：1
> 
> 时间：2013-01-06T03:40:05.230
> 
> 标签：php, file, download, fork

我正在使用以下代码来管理从我的站点下载的内容（文件位于验证码后面）：[http ://www.richnetapps.com/php-download-script-with-resume-option/](http://www.richnetapps.com/php-download-script-with-resume-option/)

麻烦的是，当一个文件被下载时，它会锁定站点的其余部分，并且不可能同时下载另一个文件。（“锁定”，例如在下载正在进行时尝试转到主页会导致长时间等待。主页仅在下载完成或取消时出现。这是一个问题，因为有些文件是几个百兆）。

我希望发生两件事：1- 能够在下载文件的同时浏览该站点，以及 2- 能够同时下载另一个文件（或两个、三个或十个......）。

我的直觉是我需要分叉进程，创建一个新进程，或者打开另一个套接字。但是我已经超出了我的深度，即使这是正确的方法，我也不知道该怎么做。有什么想法吗？

提前谢谢了....

**编辑----我找到了！我在下载脚本中设置标题之前添加了 session_write_close() 。显然，这种行为是由于 PHP 会话处理造成的 - 此处提供更多信息：[从同一浏览器和同一 php 脚本同时下载 php 文件](https://stackoverflow.com/questions/1797807/php-simultaneous-file-downloads-from-the-same-browser-and-same-php-script?rq=1)（我在询问之前进行了搜索和搜索，但显然错过了这篇文章）。非常感谢....**

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-06T04:00:46.553

内容交付网络 (CDN) 将从您的服务器上卸载，允许您的服务器处理主页（或其他）页面请求，并允许许多、许多同时下载。它的带宽应该更便宜，对于大多数用户来说也可能更快。

关键是配置为仅在验证码之后保护文件，而不是像大多数 CDN 设置那样免费提供。

# c - 如何退出 C 中长时间运行的函数？

> ID：14179045
> 
> 赞同：0
> 
> 时间：2013-01-06T03:41:24.047
> 
> 标签：c, multitasking

我的情况如下：

```
int funcA()
{
   /*There will call  funcB*/
   funcB();
} 
```

`funcB()`也许会持续很长时间。如果我发现它已经运行了超过 5 分钟，我想中止`funcB()`并继续做其他事情。

我怎样才能做到这一点？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-06T03:48:06.220

一种方法是测量自进入以来经过的时间*，* `funcB()`例如，如果您在`funcB()`. 理想情况下，您的函数返回一个指示成功或提前终止的值，因此`funcA()`有办法知道是否`funcB()`已完成。

另一种方法是`funcB()`在自己的线程中运行。如果您的主线程确定已经过了 5 分钟，它可以终止正在执行的线程`funcB()`。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-06T06:23:01.423

如果您是初学者，为什么不使用`fork()`. 然后在新进程内开始计时，如果超过 5 分钟则终止该进程。尽管在大多数情况下线程更好用，但初学者更容易创建新进程。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-06T07:03:56.360

您应该在 funcB 中编写一个功能，以便它知道返回。如果 funcB 例如写入文件，则其他任何事情都有些不安全。有很多方法可以做到这一点。我假设你在 funcB 中有一个循环，你想中止它。如果你有别的东西，比如阻塞 IO 操作，你必须做一些不同的事情。

如果您有单线程，则可以将中止逻辑直接编码到 funcB 中。您还可以为 funcB 提供函数指针参数，然后在每个循环轮次调用该函数以查看它是否可以中止。这样，您可以更轻松地获得不同的中止条件。

如果您有多个线程，则应使用原子标志变量，当您希望 funcB 中止时从其他线程设置该变量，然后在 funcB 循环中对其进行测试。这是让线程运行循环退出的最常用方法。

补充：如果您要中止文件操作，如果您执行以下操作，则可以安全地执行此操作：

1.  该函数必须写入临时文件（在同一磁盘分区），然后关闭它并使用重命名操作（当文件在同一分区时，在操作系统级别是原子的）来创建/替换最终文件。这样，如果操作被中止，最终文件将不会处于损坏状态。

2.  调用者必须具有临时文件的文件句柄或文件描述符，因此如果文件操作在文件打开时中止，它可以关闭文件。如果文件操作发生在另一个被杀死的进程中，那么这将关闭所有文件句柄，这不是必需的。

3.  调用者还应始终尝试删除临时文件，以防中止的函数/线程/进程没有机会将其重命名为最终名称或将其删除。

补充 2：在 Unix/Linux 中可以使用 alarm() 函数。看到这个：[简单的信号 - C 编程和报警功能](https://stackoverflow.com/questions/1784136/simple-signals-c-programming-and-alarm-function)

# html - 使用drupal 进行主题化。自定义 css

> ID：14179046
> 
> 赞同：-1
> 
> 时间：2013-01-06T03:41:28.783
> 
> 标签：html, css, drupal, drupal-6, themes

这是我第一次正确使用 CSS。我正在尝试自定义插入到 drupal 内容块中的分隔符。在styles.css（见下面的链接）我有以下内容：

```
#cont-grey {
  background-color:: #393939;
  margin: 20px 30px 20px 30px
  width: 100%;
} 
```

块内容为：

```
<div id="cont-grey">
  <p> Hello </p>
<div> 
```

我希望打印一个分隔线，其中包含单词“Hello”，上下边距为 +20px，并且“Hello”打印为 30px（右侧也为 30px）。分隔线应该是彩色的#393939。我没有得到我期望的输出。分隔线似乎没有任何特殊的格式。请在下面检查我用于测试目的的页面。

我哪里错了？有一个更好的方法吗？

相关来源的链接如下：

[我的 styles.css 表（希望这有效）](http://oni-host.com/sites/all/themes/jackson/styles/styles.css "我的styles.css 表")

[我用于测试目的的页面](http://oni-host.com/node/1 "我用于测试目的的页面。")

感谢 CSS 的 drupal 的 Jackson 主题的开发者

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-06T05:49:05.060

删除多余的`:`并尝试清除缓存。

# ruby-on-rails - 关于将实例变量传递给 redirect_to 方法的困惑。正如在 Rails 指南中看到的

> ID：14179050
> 
> 赞同：8
> 
> 时间：2013-01-06T03:42:51.660
> 
> 标签：ruby-on-rails, ruby, ruby-on-rails-3

我正在研究 ruby​​ on rails 指南，即[http://guides.rubyonrails.org/layouts_and_rendering.html上的“布局和渲染”主题](http://guides.rubyonrails.org/layouts_and_rendering.html)

我对将实例变量传递给`redirect_to`方法感到困惑。这怎么可能？我认为`redirect_to`与重定向到另一个网页或网址有关。

在指南中给出的示例中，它说明了以下内容：

> **2.2.2 渲染一个动作的视图**
> 
> 如果要渲染与同一模板中的不同操作对应的视图，可以使用带有视图名称的 render：
> 
> ```
> def update
>   @book = Book.find(params[:id])
>   if @book.update_attributes(params[:book])
>     redirect_to(@book)
>   else
>     render "edit"
>   end
> end 
> ```

渲染“编辑”完全有意义，它将再次渲染该新表单。但是世界上到底发生了`redirect_to(@book)`什么？那到底要渲染什么，书籍对象将如何被重定向到？顺便说一句，图书模型有列、名称、作者、页面等......

* * *

## 回答 #1

> 赞同：19
> 
> 时间：2013-01-06T04:01:28.177

[重定向到文档](http://api.rubyonrails.org/classes/ActionController/Redirecting.html)

> redirect_to(options = {}, response_status = {}) 将浏览器重定向到选项中指定的目标。 **记录**- 将通过使用选项调用 url_for 生成 URL，该选项将引用该记录的命名 URL。

因此，当一个`redirect_to(@book)` `@book`特定的记录带有`id`.

因此，关联的记录（在本例中为@book）**显示**方法用作模板。

除了上述之外，如果您查看`routes.rb`定义这些路径的文件，您会注意到

```
resources :books 
```

现在这条路线基本上被翻译为（你可以通过运行看到`rake routes`）

```
 books GET    /books(.:format)                   books#index
          POST   /books(.:format)                   books#create
 new_book GET    /books/new(.:format)               books#new
edit_book GET    /books/:id/edit(.:format)          books#edit
     book GET    /books/:id(.:format)               books#show
          PUT    /books/:id(.:format)               books#update
          DELETE /books/:id(.:format)               books#destroy 
```

注意`book GET /books/:id books#show`- 当你这样做时会匹配`redirect_to(@book)`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-06T03:53:04.903

它会重定向到一本书，例如“/books/65”

# android - When I am developing an Android application,how to set ListView not scrolling but,can Click and long Click

> ID：14179051
> 
> 赞同：-1
> 
> 时间：2013-01-06T03:43:00.363
> 
> 标签：android, listview, scroll

When I am developing an Android application,how to set that a ListView can not scroll，but it can be clicked and long clicked,thank you

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-06T03:51:21.820

To disable scrolling in ListView and keep it responding for clicking at the same time you need to override dispatchTouchEvent() method in your customListView as shown below:

```
@Override
public boolean dispatchTouchEvent(MotionEvent event){
   if( event.getAction() == MotionEvent.ACTION_MOVE)
      return true;
   return super.dispatchTouchEvent(event);
} 
```

or

```
listView.setOnTouchListener(new OnTouchListener() {

    public boolean onTouch(View v, MotionEvent event) {
        if (event.getAction() == MotionEvent.ACTION_MOVE) {
            return true;
        }
        return false;
    }
}); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-07T17:33:46.577

If your list should not scroll use a ViewGroup like a `LinearLayout` and add all the items to this ViewGroup in a loop in your code. If you want a whole row to be clickable you have to use another ViewGroup as the root node for each row and add the `OnClickListener` and `OnLongClickListener` to this View.

# java - ByteBuffer 的 DataOutputStream.readBoolean 和 DataOutputStream.writeBoolean 的等价物？

> ID：14179053
> 
> 赞同：0
> 
> 时间：2013-01-06T03:43:13.067
> 
> 标签：java, networking, bytebuffer

我该如何做*ByteBuffer.putBoolean*和*ByteBuffer.getBoolean*之类的事情？

与*DataInputStream*一样，有*readBoolean*和*DataOutputStream*有*writeBoolean*；我找不到使用 ByteBuffer 写入/读取布尔值的能力。有没有办法实现相同的行为？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-06T04:41:45.420

请参阅 Javadoc。writeBoolean() 根据参数是真还是假，写入一个字节，即 1 或 0。就这样做吧。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-06T06:25:52.407

你可以做类似的事情

```
 boolean b = buf.get() == 1;
    buf.put((byte) (b ? 1 : 0)); 
```

# .htaccess - SEO 友好的 URL 不起作用

> ID：14179055
> 
> 赞同：0
> 
> 时间：2013-01-06T03:43:40.660
> 
> 标签：.htaccess, mod-rewrite, rewrite, seo

我正在尝试为我的网站设置 SEO 友好的 URL，但似乎无法让它们正常工作。这是我的 htaccess 的代码：

```
Options +FollowSymLinks
RewriteEngine On

deny from all
allow from 46.763.65.235

RewriteCond %{HTTP_HOST} ^www\.mywebsite\.com
RewriteRule ^(.*)$ http://mywebsite.com/$1 [R=301,L]

RewriteRule ^(link1|link2|link3|link4)$ http://mywebsite.com/$1/ [R=301]

RewriteRule ^(link1|link2|link3|link4)/(.*)$ http://mywebsite.com/m_$1.php/$2 [L] 
```

基本上当去[http://mywebsite.com/link1](http://mywebsite.com/link1)它应该显示[http://mywebsite.com/m_link1.php的内容](http://mywebsite.com/m_link1.php)

但是，现在发生的事情是我去[http://mywebsite.com/link1](http://mywebsite.com/link1)它只是重定向到[http://mywebsite.com/m_link1.php](http://mywebsite.com/m_link1.php)

谁能证明需要更换或添加什么床？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-06T03:55:13.063

看到[这个问题](https://stackoverflow.com/questions/1304492/htaccess-redirect-without-changing-address-bar)。您正在使用导致重定向的 R 标志。如果没有该标志，它将执行内部重定向（不会导致浏览器发出另一个请求）。

更新：我认为问题在于尝试重定向到另一个 URL，假设“mywebsite.com”是您的 URL 的占位符。在这种情况下，您确实需要 [L] 标志，以便匹配的任何规则都是将起作用的 [L]ast 。这对我来说很好：

（注意：# 注释掉这些行，所以它们什么都不做）

```
Options +FollowSymLinks
RewriteEngine On

#deny from all
#allow from 46.763.65.235

#RewriteCond %{HTTP_HOST} ^www\.mywebsite\.com
#RewriteRule ^(.*)$ http://mywebsite.com/$1 [R=301,L]

#RewriteRule ^(link1|link2|link3|link4)$ http://mywebsite.com/$1/ [R=301]

#one rule for /link1 or /link2 etc
RewriteRule ^(link1|link2|link3|link4)$ m_$1.php [L]
#another rule for /link1/foo or /link2/something-else
RewriteRule ^(link1|link2|link3|link4)/(.*)$ m_$1.php/$2 [L] 
```

# java - 单击 Jbutton 时，要么按钮移动，要么更改标签文本。我只想同时执行

> ID：14179058
> 
> 赞同：0
> 
> 时间：2013-01-06T03:44:21.287
> 
> 标签：java, swing, layout, jlabel, grid-layout

```
import java.awt.EventQueue;
import java.awt.GridLayout;
import java.awt.event.ActionEvent;
import javax.swing.AbstractAction;
import javax.swing.JButton;
import javax.swing.JFrame;
import javax.swing.JLabel;
import javax.swing.JPanel;

public class JavaGUI extends JPanel {

    private Control control = new Control();
    private Keys keys = new Keys("Original starting value.");

    public JavaGUI() {
        this.setLayout(new GridLayout(0, 1));
        this.add(keys);
        this.add(control);

        private class Control extends JPanel {

            public Control() {
                this.add(new JButton(new AbstractAction("Update") {

                    @Override
                    public void actionPerformed(ActionEvent e) {
                        System.out.println("Command: " + e.getActionCommand());
                        keys.string = String.valueOf(System.nanoTime());
                        //keys.label.setText(keys.string);  //remove comments cause button move
                        JButton j = (JButton) e.getSource();
                        j.setLocation(j.getX() + 10, j.getY() + 10);
                    }
                }));
            }
        }

        private class Keys extends JPanel {

            private String string;
            private JLabel label = new JLabel();

            public Keys(String s) {
                this.string = s;
                label.setText(s);
                this.add(label);
            }
        }

        private void display() {
            JFrame f = new JFrame("JavaGUI");
            f.setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);
            f.add(this);
            f.pack();
            f.setLocationRelativeTo(null);
            f.setVisible(true);
        }

        public static void main(String[] args) {
            EventQueue.invokeLater(new Runnable() {

                @Override
                public void run() {
                    new JavaGUI().display();
                }
            });
        }
    } 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-06T05:37:10.960

您正在使用 GridLayout，因此您不能随意移动组件。[我建议你阅读关于在容器内布局组件](http://docs.oracle.com/javase/tutorial/uiswing/layout/index.html)的 Swing 教程，以了解布局管理的工作原理。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-06T06:22:01.700

我会全力以赴。错误是，您设置了 String `string`，而不是 JLabel `label`。

这种没有 GUI 效果的行为也可能是`invokeLater`由于`actionPerformed`.

您为使用的对象创建了类以设置特定属性。那是官僚主义的浪费，因此我将其重写了一些。

如果调整窗口大小，您将看到 GridLayout 管理器再次布局，因此 JButton 出现在其原始位置。您可以使用绝对定位翼和`setLayout(null)`使用单个`setLocation`s。

```
public class JavaGUI extends JPanel {

    private JPanel control;
    private JLabel keys;

    public JavaGUI() {
        setLayout(new GridLayout(0, 1));

        keys = new JLabel("Original starting value.");
        keys.setHorizontalAlignment(SwingConstants.CENTER);
        add(keys);

        control = new JPanel();
        control.setPreferredSize(new Dimension(200, 100));
        control.setMinimumSize(new Dimension(200, 100));
        control.setLayout(null);
        JButton button = new JButton(new AbstractAction("Update") {
            @Override
            public void actionPerformed(ActionEvent e) {
                System.out.println("Command: " + e.getActionCommand());
                keys.setText(String.valueOf(System.nanoTime()));
                //keys.label.setText(keys.string);  //remove comments cause button move
                JButton j = (JButton) e.getSource();
                j.setLocation(j.getX() + 10, j.getY() + 10);
            }
        });
        button.setBounds(10, 10, 90, 24);
        control.add(button);
        add(control);
    }

    public static void main(String[] args) {
        final JFrame f = new JFrame("JavaGUI");
        f.setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);
        f.add(new JavaGUI());
        f.pack();
        f.setLocationRelativeTo(null);

        EventQueue.invokeLater(new Runnable() {
            @Override
            public void run() {
                f.setVisible(true);
            }
        });
    }
} 
```

PS我见过相当糟糕的代码。这实际上是简洁的代码，只有多余的类。

# java - 首选项管理器和共享首选项

> ID：14179060
> 
> 赞同：0
> 
> 时间：2013-01-06T03:45:33.930
> 
> 标签：java, android

我不确定我在这里做错了什么，希望能得到一些帮助。

在我的主要活动的 onCreate 方法中，我有这个：

```
 // set the default preferences
    PreferenceManager.setDefaultValues(context, R.xml.preferences, false);

    // get the preferences
    prefs = getPreferences(MODE_PRIVATE);

    // Load the values or defaults from the SharedPreferences
    msMainClockStart = prefs.getLong( "Main_Clock_Minutes", 0 );
    useShotClock = prefs.getBoolean( "Use_ShotClock", false );
    msShotClockStart = prefs.getLong( "Shot_Clock_Seconds", 20000 );
    tvPeriodPrefix = prefs.getString( "Period_Prefix", "P" );
    valMaxPeriods = prefs.getInt( "Max_Periods", 4 ); 
```

在我的 res/xml/preferences.xml 文件中，我有以下内容

```
<?xml version="1.0" encoding="utf-8"?>

<PreferenceScreen xmlns:android="http://schemas.android.com/apk/res/android" >
<EditTextPreference
    android:key="Main_Clock_Minutes"
    android:positiveButtonText="SAVE" 
    android:negativeButtonText="CANCEL" 
    android:title="Main Clock (minutes)" 
    android:defaultValue="480000" 
    android:summary="How many minutes for the main clock."/>

<CheckBoxPreference 
    android:key="Use_ShotClock"
    android:title="Enable Shot Clock"
    android:defaultValue="true"/>

<EditTextPreference 
    android:key="Shot_Clock_Seconds"
    android:title="Shot Clock (seconds)" 
    android:summary="How many seconds for the shot clock." 
    android:defaultValue="30000"/>

<EditTextPreference 
    android:key="Period_Prefix"
    android:title="Period Prefix (e.g. Q, Shift, Period)" 
    android:defaultValue="Q"/>

<EditTextPreference 
    android:key="Max_Periods"
    android:title="Maximum number of periods" 
    android:defaultValue="4"/> 
```

由于某种原因，默认值不会从 xml 文件中读取/加载。在使用的 getLong() 方法或 getBool() 方法中输入的默认值。

有谁知道为什么？

编辑@Gunnar Karlsson

更改为后，`getDefaultSharedPreferences`我在第 121 行遇到错误，即：

```
msMainClockStart = prefs.getLong( "Main_Clock_Minutes", 0 ); 
```

错误说“无法从 long 转换为字符串。但是 msMainClockStart 是 Long 并且 prefs.getLong() 返回 Long 所以我不确定为什么它不起作用。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-06T20:19:45.900

为了使用 PreferenceManager，我发现了两个选项。第一个是我可以创建一个首选项子类，或者另一个是将它保存为字符串，然后将其转换为 Long。

这是代码：

```
 // set the default preferences
    PreferenceManager.setDefaultValues(context, R.xml.preferences, false);

    // get the preferences
    prefs = PreferenceManager.getDefaultSharedPreferences( context );

    // Load the values or defaults from the SharedPreferences
    msMainClockStart = Long.valueOf( prefs.getString( "Main_Clock_Minutes", "0" ) ) * 60000; 
```

这非常有效。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-06T04:59:38.213

由于您正在设置首选项

```
PreferenceManager.setDefaultValues(context, R.xml.preferences, false); 
```

利用

```
prefs = PreferenceManager.getDefaultSharedPreferences(context) 
```

检索首选项，而不是`getPreferences()`

# mongodb - 使用嵌套 where 条件查询 mongodb

> ID：14179061
> 
> 赞同：1
> 
> 时间：2013-01-06T03:45:45.853
> 
> 标签：mongodb

```
{
   "name": "comments",
   "rid": 456,

   "refs": [
     {
       "no": 1,
       "info": "this is first"  
    },
     {
       "no": 2,
       "info": "this is second" 
    },
     {
       "no": 3,
       "info": "this is third"  
    } 
  ] 
}
{
   "name": "comments",
   "rid": 321,

   "refs": [
     {
       "no": 1,
       "info": "this is first-h"  
    },
     {
       "no": 2,
       "info": "this is second-h" 
    },
     {
       "no": 3,
       "info": "this is third-h"  
    } 
  ] 
} 
```

假设我有一个像上面这样的文档结构。我需要得到 rid 为 456 而 no 为 2 的数组。所以，我只想得到数组

```
 {
       "no": 2,
       "info": "this is second" 
    } 
```

我怎么能那样做？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-06T04:31:10.617

除了 JohnnyHK 使用[位置运算符](http://docs.mongodb.org/manual/reference/operator/positional/)之外，在 MongoDB 2.2+ 中还有更多方法可以解决此问题：

### 方法#1：使用`$elemMatch`投影

[`$elemMatch`投影](http://docs.mongodb.org/manual/reference/projection/elemMatch/)可用于包含数组的单个匹配元素。默认情况下，结果还包括 document `_id`，但如果不需要，您可以将其排除：

```
db.comments.find(
    { rid: 456 },
    { _id:0, refs: { $elemMatch: { no: 2 } }}
) 
```

示例输出：

```
{ "refs" : [ { "no" : 2, "info" : "this is second" } ] } 
```

### 方法#2：使用聚合框架

[聚合框架](http://docs.mongodb.org/manual/applications/aggregation/)包括[`$unwind`](http://docs.mongodb.org/manual/reference/aggregation/#_S_unwind)数组和[`$match`](http://docs.mongodb.org/manual/reference/aggregation/#_S_match)文档标准的运算符。这种方法比使用`$elemMatch`投影更灵活，因为现在可以返回每个数组的多个匹配项。

```
db.comments.aggregate(

    // Find matching documents of interest (can use an index)
    { $match: { rid: 456 }},

    // Create stream of documents based on the `refs` array
    { $unwind: "$refs" },

    // Match the specific refs element(s) of interest
    { $match: { "refs.no" : 2 }},

    // Project the desired output
    { $project: {
        _id: 0,
        no: "$refs.no",
        info: "$refs.info"
    }}
) 
```

示例输出：

```
{
    "result" : [
        {
            "no" : 2,
            "info" : "this is second"
        }
    ],
    "ok" : 1
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-06T04:22:50.830

您可以使用[点表示法](http://docs.mongodb.org/manual/core/document/#dot-notation)来查找所需的文档，并使用[`$`](http://docs.mongodb.org/manual/reference/operator/positional/)位置运算符在结果中仅包含匹配的数组元素：

```
 db.test.find({rid: 456, 'refs.no': 2}, {_id: 0, 'refs.$': 1}) 
```

返回：

```
{ "refs": [ { "no": 2, "info": "this is second" } ] } 
```

# database - “无法转换为整数类型”错误

> ID：14179063
> 
> 赞同：10
> 
> 时间：2013-01-06T03:46:13.907
> 
> 标签：database, django, django-south

这是我的第一个问题，所以我会很感激耐心。

我将一些属性从 CharField 更改为 IntegerField。下面列出的是代码：

```
rating_choices = (
    (1,"1"),
    (2,"2"),
    (3,"3"),
    (4,"4"),
    (5,"5"),
)

class Rating(models.Model):
    article = models.ForeignKey(Article,null=True)
    organization = models.IntegerField(choices=rating_choices, default=1)
    support = models.IntegerField(choices=rating_choices, default=1)
    readability = models.IntegerField(choices=rating_choices, default=1)
    tags = models.IntegerField(choices=rating_choices, default=1)
    comments = models.TextField()
    def get_overall_rating(self):
        return fsum(self.organization + self.support + self.support + self.readability + self.tags)/5.0
    overall_rating = property(get_overall_rating)
admin.site.register(Rating) 
```

我进行了南迁移以在 Postgres 上迁移，这是我得到的错误：

```
Error in migration: collect_data:0010_auto__chg_field_rating_tags__chg_field_rating_support__chg_field_ratin
Traceback (most recent call last):
  File "manage.py", line 15, in <module>
    execute_from_command_line(sys.argv)
  File "/Users/narensathiya/Documents/Documents/Jellow/Jellow/jellowenv/lib/python2.7/site-packages/django/core/management/__init__.py", line 443, in execute_from_command_line
    utility.execute()
  File "/Users/narensathiya/Documents/Documents/Jellow/Jellow/jellowenv/lib/python2.7/site-packages/django/core/management/__init__.py", line 382, in execute
    self.fetch_command(subcommand).run_from_argv(self.argv)
  File "/Users/narensathiya/Documents/Documents/Jellow/Jellow/jellowenv/lib/python2.7/site-packages/django/core/management/base.py", line 196, in run_from_argv
    self.execute(*args, **options.__dict__)
  File "/Users/narensathiya/Documents/Documents/Jellow/Jellow/jellowenv/lib/python2.7/site-packages/django/core/management/base.py", line 232, in execute
    output = self.handle(*args, **options)
  File "/Users/narensathiya/Documents/Documents/Jellow/Jellow/jellowenv/lib/python2.7/site-packages/south/management/commands/migrate.py", line 108, in handle
    ignore_ghosts = ignore_ghosts,
  File "/Users/narensathiya/Documents/Documents/Jellow/Jellow/jellowenv/lib/python2.7/site-packages/south/migration/__init__.py", line 213, in migrate_app
    success = migrator.migrate_many(target, workplan, database)
  File "/Users/narensathiya/Documents/Documents/Jellow/Jellow/jellowenv/lib/python2.7/site-packages/south/migration/migrators.py", line 235, in migrate_many
    result = migrator.__class__.migrate_many(migrator, target, migrations, database)
  File "/Users/narensathiya/Documents/Documents/Jellow/Jellow/jellowenv/lib/python2.7/site-packages/south/migration/migrators.py", line 310, in migrate_many
    result = self.migrate(migration, database)
  File "/Users/narensathiya/Documents/Documents/Jellow/Jellow/jellowenv/lib/python2.7/site-packages/south/migration/migrators.py", line 133, in migrate
    result = self.run(migration)
  File "/Users/narensathiya/Documents/Documents/Jellow/Jellow/jellowenv/lib/python2.7/site-packages/south/migration/migrators.py", line 107, in run
    return self.run_migration(migration)
  File "/Users/narensathiya/Documents/Documents/Jellow/Jellow/jellowenv/lib/python2.7/site-packages/south/migration/migrators.py", line 81, in run_migration
    migration_function()
  File "/Users/narensathiya/Documents/Documents/Jellow/Jellow/jellowenv/lib/python2.7/site-packages/south/migration/migrators.py", line 57, in <lambda>
    return (lambda: direction(orm))
  File "/Users/narensathiya/Documents/Documents/Jellow/Jellow/jellow/jellow/apps/collect_data/migrations/0010_auto__chg_field_rating_tags__chg_field_rating_support__chg_field_ratin.py", line 13, in forwards
    db.alter_column('collect_data_rating', 'tags', self.gf('django.db.models.fields.IntegerField')())
  File "/Users/narensathiya/Documents/Documents/Jellow/Jellow/jellowenv/lib/python2.7/site-packages/south/db/generic.py", line 44, in _cache_clear
    return func(self, table, *args, **opts)
  File "/Users/narensathiya/Documents/Documents/Jellow/Jellow/jellowenv/lib/python2.7/site-packages/south/db/generic.py", line 522, in alter_column
    flatten(values),
  File "/Users/narensathiya/Documents/Documents/Jellow/Jellow/jellowenv/lib/python2.7/site-packages/south/db/generic.py", line 273, in execute
    cursor.execute(sql, params)
  File "/Users/narensathiya/Documents/Documents/Jellow/Jellow/jellowenv/lib/python2.7/site-packages/django/db/backends/util.py", line 40, in execute
    return self.cursor.execute(sql, params)
  File "/Users/narensathiya/Documents/Documents/Jellow/Jellow/jellowenv/lib/python2.7/site-packages/django/db/backends/postgresql_psycopg2/base.py", line 52, in execute
    return self.cursor.execute(query, args)
django.db.utils.DatabaseError: column "tags" cannot be cast to type integer 
```

任何帮助将不胜感激，并在此先感谢您！！

* * *

## 回答 #1

> 赞同：19
> 
> 时间：2013-01-06T11:49:24.827

如果您愿意丢弃您的数据，您可以删除该列并创建一个新列

如果要保留数据，则需要

a) 为您的新列指定不同的名称，或
b) 创建一个临时列以在转换期间保存数据

然后你需要一系列迁移

1.  架构迁移以添加新（或临时）列
2.  显式移动数据的数据迁移，进行任何所需的转换（例如“A”-> 1）
3.  可能是架构迁移删除您的临时列

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2015-12-12T21:10:25.527

您需要添加“USING (col_name::integer)”来消除此错误。但在这种情况下，您必须使用直接查询。

migrateEngine.execute('ALTER TABLE test ALTER COLUMN testScore TYPE INTEGER USING testScore::integer')

# css - td 忽略宽度但尊重高度

> ID：14179070
> 
> 赞同：0
> 
> 时间：2013-01-06T03:47:57.760
> 
> 标签：css, html

我正在尝试使用 css 来设置 td 的宽度和高度。高度工作正常，宽度被忽略。我敢肯定，当我看到答案时，我会打自己一巴掌。我检查了拼写，尝试了 em 和 px 但只是忽略了宽度。这是一个显示问题的小提琴的链接：http: [//jsfiddle.net/kdubs/jBjr2/](http://jsfiddle.net/kdubs/jBjr2/)

html

```
<div class="overall_theme">
<table id="disp_output">
<tbody>
  <tr>
    <th>Advantages</th>
    <td id="disp_ads">00</td>
  </tr>
  <tr>
    <th>Disadvantages</th>
    <td id="disp_disads">0</td>
  </tr>
  <tr>
    <th>Total</th>
    <td id="disp_total">0</td>
  </tr>
  <tr>
    <th>dbg</th>
    <td id="dbg_td">txt</td>
  </tr>
</tbody>
</table>
</div> 
```

和CSS

```
.overall_theme table, .overall_theme tr, .overall_theme td, .overall_theme th {
  text-align:center;
  border-collapse:collapse;
  border: 1px solid black;
  width:2em;
}
.overall_theme table {
  background-color:cornflowerblue;
  margin-top:.5em;
  margin-bottom:.5em;
}
.overall_theme > table > tbody > tr > td:nth-child(odd), .overall_theme th:nth-   child(odd) {
background-color:#00cc00;
}
#disp_output td {
  width:30em;
  height:35px;
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-06T04:06:07.647

有几个原因：

您的第一条规则比最后一条规则更具体。尝试使最后一条规则更具体：

```
.overall_theme #disp_output td {
  width:30em;
  height:35px;
} 
```

有关特异性的更多详细信息，请参阅：[http ://coding.smashingmagazine.com/2007/07/27/css-specificity-things-you-should-know/](http://coding.smashingmagazine.com/2007/07/27/css-specificity-things-you-should-know/)

其次， 的宽度`#disp_output td`明显大于`.overall_theme table`。对于第 1 列中的内容，表格已经大于 2em。

如果你`.overall_theme table`放大，你将能够看到对宽度的调整`#disp_output td`。

考虑将 CSS 规则拆分为宽度`.overall_theme table, .overall_theme tr, .overall_theme td, .overall_theme th`或用于`min-width`实现我认为您正在尝试实现的目标。

# ios - 无法呈现视图控制器 (SLComposeViewController)

> ID：14179072
> 
> 赞同：0
> 
> 时间：2013-01-06T03:48:20.133
> 
> 标签：ios, ipad, ios6, social-framework, slcomposeviewcontroller

我正在尝试在 iOS6 上为 iPad 应用程序集成 Facebook 并遇到问题：

执行以下代码时，屏幕会变暗（就像出现模态控制器时一样），但随后什么也没有发生。没有 Facebook 表格，什么都没有 - 甚至无法点击当前视图，好像 Facebook 表格被隐藏或其他东西一样。

关于为什么会发生这种情况的任何想法？我尝试使用 UINavigationController 的根视图控制器和可见/顶部控制器来呈现工作表，但都做同样的事情。

顺便说一句，下面的代码在 AppDelegate 中。还调用该方法以响应按钮单击。

谢谢，尼科斯。

```
-(BOOL)socialPost:(UIImage*)image initialText:(NSString*)initialText url:(NSURL*)url
{
    if (![self canSocialPost])
        return NO;

    SLComposeViewController* SLComposerSheet = [SLComposeViewController composeViewControllerForServiceType:SLServiceTypeFacebook];
    if (SLComposerSheet == nil)
        return NO;

    [SLComposerSheet setInitialText:initialText];
    [SLComposerSheet addImage:image];
    [SLComposerSheet addURL:url];
    [SLComposerSheet setCompletionHandler:^(SLComposeViewControllerResult result) {

        switch (result) {
            case SLComposeViewControllerResultCancelled:
                DLog(@"Social post Canceled");
                break;
            case SLComposeViewControllerResultDone:
                DLog(@"Social post Sucessful");
                break;

            default:
                break;
        }
    }];

    [[self window].rootViewController presentViewController:SLComposerSheet animated:YES completion:nil];
    return YES;
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-06T04:13:48.790

0x7fffffff 是对的 - 问题实际上出在其他地方：

我正在将嵌套视图添加到“根视图”，但也没有将它们的视图控制器添加为子视图，即

我在做：

```
[_ContainerView addSubview:_ViewControllers[tabId].view]; 
```

没有

```
[self addChildViewController:_ViewControllers[tabId]]; 
```

现在已修复 - 感谢您测试此 0x7fffffff。

# java - 即使我没有编写要记住的代码，也会在第二次加载弹出窗口时记住多选框中的选定值

> ID：14179074
> 
> 赞同：0
> 
> 时间：2013-01-06T03:48:31.627
> 
> 标签：java, javascript, html, velocity

我正在使用包含 HTML 多选框的 Apache Velocity Macro (*.vm) 模板文件。此选择框的值由返回 ArrayList 的 Java 函数填充。

速度代码循环遍历此 ArrayList of Strings 中的值，并生成渲染时可选择的元素。

呈现的 HTML 由 javascript 花式框弹出窗口显示，用户可以选择上述 Java 函数返回的任何/所有值。

整个操作在弹出窗口第一次出现时完美运行。在用户从多选框中选择一堆值并关闭弹出窗口后，我可以使用 jQuery(#selectbox).val() 并毫无问题地访问用户选择的值。

但是，如果用户第二次重新打开弹出窗口并选择一组不同的值并关闭弹出窗口，则 jQuery(#selectbox).val() 返回第一次选择的值！除非我在浏览器中刷新网页，否则此行为会继续。

所以我的问题是：有人知道是什么导致了这种行为吗？有没有办法停止记住以前选择的值？

如果这是相关的，我在 OSx 10.6.4、Apache Tomcat 6、Java 6 上使用 Safari 5。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-06T04:27:23.450

您的fancybox 弹出式调用可能会创建一个带有#selectbox id 的新dom 元素，而不是使用已经在页面中呈现的元素。检查页面中呈现的元素，看看是否是这种情况。

# javascript - 更改函数中的第一个参数

> ID：14179076
> 
> 赞同：4
> 
> 时间：2013-01-06T03:48:44.093
> 
> 标签：javascript, function, arguments, apply

我想做这样的事情：

```
function start(){
    // Change the first argument in the argument list
    arguments[0] = '<h1>' + arguments[0] + '</h1>';

    // Call log with the new arguments
    // But outputs: TypeError: Illegal invocation
    log.apply(this, arguments);
}

function log(){ 
    console.log(arguments);   
    // should output -> ['<h1>hello<h1>', 'world', '!']
}

start('hello', 'world', '!'); 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-06T03:54:44.430

您的代码确实有效（我刚刚在最新版本的 Firefox 中进行了测试）。

但是，我可以想象某些实现在将*对象*`arguments`作为值传递给`Function.prototype.apply`. 所以试试：

```
function start(){
    var args = Array.prototype.slice.call( arguments );
    args[0] = '<h1>' + args[0] + '</h1>';

    log.apply(this, args);
} 
```

通过调用`Array.prototype.slice`-object `arguments`，我们创建了一个“*真正*的”ECMAscript *Array*，我们可能需要它作为第二个参数`.apply()`

# ios - 在 Cocos2D 中强制设备上的人像

> ID：14179081
> 
> 赞同：0
> 
> 时间：2013-01-06T03:49:38.107
> 
> 标签：ios, cocos2d-iphone, ios-simulator, orientation

我按照这篇文章的建议将方向设备强制为 Cocos2d 中的人像。

但是，这只会在模拟器中发生变化。在实际的 iPhone 上，程序被迫并保持在横向模式。有什么建议吗？

[如何在 Cocos2D 中强制人像模式？](https://stackoverflow.com/questions/10475309/how-do-i-force-portrait-mode-in-cocos2d)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-06T04:01:37.927

你确定你的应用委托中有这个代码吗？

```
 // Supported orientations: Landscape. Customize it for your own needs
    - (BOOL)shouldAutorotateToInterfaceOrientation:(UIInterfaceOrientation)interfaceOrientation
    {
        return UIInterfaceOrientationIsLandscape(interfaceOrientation);
    } 
```

然后，如果您单击项目图标，在支持的方向下确保仅选择纵向。

如果您有任何问题，请告诉我。

# asp.net-web-api - 我如何告诉 RavenDB 忽略一个属性而不是 WebAPI？

> ID：14179082
> 
> 赞同：8
> 
> 时间：2013-01-06T03:49:40.117
> 
> 标签：asp.net-web-api, json.net, ravendb

我有一个不想存储在 RavenDB 中的属性。如果我添加 JsonIgnore 属性，RavenDB 会很好地忽略，但 WebApi 也会如此。不过，我仍然希望 WebApi 将数据序列化到 Web 客户端。

如何告诉 RavenDB 忽略一个属性但仍然让 WebApi 序列化它？

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2013-01-06T05:43:48.463

**在 RavenDB 2.0 中**

```
using Raven.Imports.Newtonsoft.Json

public class Foo
{
    [JsonIgnore]
    public string Bar { get; set; }
} 
```

因为它使用 raven 的 json.net 内部化副本 - WebApi 不会获取该属性。

**在 RavenDB 1.0*或*2.0中**

您可以使用自定义 json 合同解析器直接自定义对象的 json 序列化。

```
public class CustomContractResolver : DefaultRavenContractResolver
{
    public CustomContractResolver(bool shareCache) : base(shareCache)
    {
    }

    protected override List<MemberInfo> GetSerializableMembers(Type objectType)
    {
        var members = base.GetSerializableMembers(objectType);

        if (objectType == typeof(Foo))
            members.RemoveAll(x => x.Name == "Baz");

        return members;
    }
} 
```

在初始化时将其连接到您的文档存储：

```
documentStore.Conventions.JsonContractResolver = new CustomContractResolver(true);
documentStore.Initialize(); 
```

因为它没有连接到其他任何地方，它只会影响 RavenDB。根据您的需要自定义它。

# objective-c - Obj-C：我有 `addTarget:action:forControlEvents` 但目标没有响应选择器

> ID：14179084
> 
> 赞同：1
> 
> 时间：2013-01-06T03:50:24.177
> 
> 标签：objective-c, uiviewcontroller, selector, uigesturerecognizer, uicontrol

我创建了一个类`SYFactory`，其中包含用于组装对象（主要是`UIView`s 和`UIControl`s）的各种类方法。这些类方法由`UIViewController`对象调用（或更准确地说，由名为 的子类的实例`UIViewController`调用`SYViewController`）。

我正在尝试将选择器添加到由`UIControl`创建的对象`SYFactory`，目标设置为 的实例`SYViewController`。

因此在`SYFactory`：

```
+ (UIControl*)replyPaneWithWidthFromParent:(UIView*) parent selectorTarget:(id) target
{
//...
    [replyPane addTarget:target
                  action:@selector(showTheVideoPane:)
        forControlEvents:UIControlEventTouchUpInside];

    return replyPane;
} 
```

在`UIViewController`子类中（称为`SYViewController`）：

```
@interface SYViewController ()

@property (readonly, nonatomic) IBOutlet UIImageView *pane;
@property (strong, nonatomic) UIControl *videoPane;

//...
@end

@implementation SYViewController

@synthesize videoPane;
//...

- (void)viewDidLoad
{
    //...
    self.replyPane = [SYFactory replyPaneWithWidthFromParent:self.pane selectorTarget:self];
}

- (void)showTheVideoPane:(id) sender
{
NSLog(@"Selector selected!");
}
//...
@end 
```

当我运行代码并尝试点击`UIControl`我创建的代码时，`unrecognized selector sent to instance`出现错误。我不知道为什么，因为我将`SYViewController`对象作为参数传递给`+replyPaneWithWidthFromParent:parent selectorTarget:target`.

出于某种奇怪的原因，`UIControl`对象认为不应该将消息发送给`SYViewController`对象，而是尝试将消息发送给不同类的对象。很奇怪，对吧？

有什么建议么？

**编辑：**

因此，在发布问题后，我立即弄清楚了问题所在（另一个证明写下来有助于思考问题的证据！）：

该对象是在循环`SYViewController`内的局部变量中创建的。`for`一旦`for`循环终止，`SYViewController`对象就被 ARC 销毁，不再对该对象进行引用。

面对一个不存在的目标，该`UIControl`对象试图在响应者链中找到一个它认为最有可能回答该消息的对象。该对象属于 class `SYFixedMarginView`，因此出现错误消息：

```
*** Terminating app due to uncaught exception 'NSInvalidArgumentException', reason:
'-[SYFixedMarginView showTheVideoPane:]: unrecognized selector sent to instance 0x1f877d60' 
```

所以修复很简单。`__strong`除了`for`循环中的局部变量之外，我还将视图控制器分配给了一个属性。

希望其他人不要落入同样的陷阱。

# android - Android：创建自定义视图

> ID：14179092
> 
> 赞同：2
> 
> 时间：2013-01-06T03:52:49.503
> 
> 标签：android, view

在我的应用程序中，我正在尝试创建自己的 Horizo​​ntalScrollView，当您在其中滑动视图时会“捕捉”。每次尝试加载布局时，它都会崩溃。所以，我正在采取婴儿步骤。我不熟悉以编程方式创建自定义视图，所以如果可能存在一些“常识”错误。

这是我的`CustomView.java`文件：

```
import android.content.Context;
import android.view.View;

public class CustomView extends View {

    public CustomView(Context context) {
        super(context);
    }
} 
```

这是我的`MainActivity.java`文件：

```
import android.app.Activity;

public class MainActivity extends Activity {

    @Override
    protected void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.main_layout);
    }
} 
```

这是我的`main_layout.xml`文件：

```
<?xml version="1.0" encoding="utf-8"?>
<RelativeLayout xmlns:android="http://schemas.android.com/apk/res/android"
    xmlns:tools="http://schemas.android.com/tools"
    android:layout_width="match_parent"
    android:layout_height="match_parent"
    android:orientation="vertical"
    android:id="@+id/lchoose_weapon"
    tools:context=".ChooseWeaponActivity" >

<TextView
    android:id="@+id/tvTitle"
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"
    android:layout_centerHorizontal="true"
    android:text="Title"
    android:textSize="40sp" />

<com.javaknight.ultimaterps.CustomView
    android:id="@+id/CustomVw"
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"
    android:layout_below="@+id/tvTitle"
    android:layout_centerHorizontal="true" />
<TextView
    android:id="@+id/tv2"
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"
    android:layout_below="@+id/CustomVm"
    android:layout_centerHorizontal="true"
    android:text="Another TextView Below" />

<Button
    android:id="@+id/bOK"
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"
    android:layout_below="@+id/tv2"
    android:layout_centerHorizontal="true"
    android:text="ok" />

</RelativeLayout> 
```

使用以下代码无法显示布局。一旦我从 xml 文件中删除 CustomView，它就可以正常工作。我希望 xml 布局文件在其中包含自定义视图。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-01-06T04:25:19.110

您应该在自定义视图中创建所有构造函数：

```
public CusatomView(Context context) {
    super(context);
}

public CustomView(Context context, AttributeSet attrs) {
    super(context, attrs);
}

public CustomView(Context context, AttributeSet attrs, int defStyle) {
    super(context, attrs, defStyle);
} 
```

如果你这样做，我想你的布局会起作用。

# css - 如何制作一个带有弹簧条件的类选择器？

> ID：14179093
> 
> 赞同：0
> 
> 时间：2013-01-06T03:52:58.253
> 
> 标签：css, css-selectors

> **可能重复：**
> [是否有 CSS 父选择器？](https://stackoverflow.com/questions/1014861/is-there-a-css-parent-selector)

这是我的 HTML 代码：

```
<li class='href-parent'> <a class='href'></a> </li> 
```

我希望所有带有“href”类的“a”标签的“li”标签都可以改变颜色。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-06T04:00:45.040

使用 jQuery，您可以使用`$('li.href-parent > a.href').parent().dosomething()`;

# glib - 更新 glib-1.2 项目以使用 glib2

> ID：14179096
> 
> 赞同：1
> 
> 时间：2013-01-06T03:53:25.650
> 
> 标签：glib, autoconf

我正在复活一个使用 glib-1.2 的旧开源项目。我认为我应该做的一件事是将它更新为使用 glib2-2.34，但我找不到任何关于这样做的文档。特别是，我想知道我需要对我的 autoconf 设置进行的更改，目前

```
configure.ac:AM_PATH_GLIB(1.2.0)

src/Makefile.am:AM_CPPFLAGS = @GLIB_CFLAGS@
src/Makefile.am:arccc_LDADD = @GLIB_LIBS@ 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-06T05:50:55.530

在查看开源项目示例后发现：将上述行替换为

```
configure.ac:PKG_CHECK_MODULES([DEPS], [glib-2.0 >= 2.34.3])

src/Makefile.am:AM_CPPFLAGS = @DEPS_CFLAGS@
src/Makefile.am:arccc_LDADD = @DEPS_LIBS@ 
```

另外，我决定将整个项目移至`cmake`，并且可以推荐该路线。

# java - 在 ubuntu 中运行 java 代码时出错

> ID：14179101
> 
> 赞同：1
> 
> 时间：2013-01-06T03:54:06.380
> 
> 标签：java, ubuntu

我最近在我的 ubuntu 服务器中安装了 open-jdk 7。但版本仍显示为：

```
java version "1.6.0_24"
OpenJDK Runtime Environment (IcedTea6 1.11.3) (6b24-1.11.3-1ubuntu0.12.04.1)
OpenJDK Server VM (build 20.0-b12, mixed mode) 
```

如果我尝试运行 java 程序，我会得到以下异常：

```
Exception in thread "main" java.lang.UnsupportedClassVersionError: hello : Unsupported major.minor version 51.0 
```

这是用更高的 jdk 编译程序并尝试在更低的 jdk 中运行的结果。我该如何纠正这个。

**编辑**：但是当我做 javac -version 我得到 javac 1.7.0_09 作为响应。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-06T04:10:07.397

这听起来像：

1）您安装了多个版本的Java（这完全可以！）......和......

2）“javac”选择了正确的版本……但“java”选择了不同的版本。

解决方案：

[更新-java-替代品](http://manpages.ubuntu.com/manpages/hardy/man8/update-java-alternatives.8.html)

例如，看看这个链接：

> [https://askubuntu.com/questions/64329/how-to-replace-openjdk-6-with-openjdk-7](https://askubuntu.com/questions/64329/how-to-replace-openjdk-6-with-openjdk-7)
> 
> ```
> # EXAMPLE:
> $ update-java-alternatives -l
> java-1.6.0-openjdk 1061 /usr/lib/jvm/java-1.6.0-openjdk
> java-1.7.0-openjdk-amd64 1051 /usr/lib/jvm/java-1.7.0-openjdk-amd64
> $ sudo update-java-alternatives -s java-1.7.0-openjdk-amd64 
> ```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-06T03:56:14.097

将源代码移过来并在 ubuntu 机器上重新编译？

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-06T04:10:52.403

可能新安装的 JDK 位于另一个不属于您的 $PATH 的目录中（非常常见）。我会做一个 find / -name "javac" 并查看找到了多少条目。

你可能会发现不止一个。

# c++ - 在动态中重复分配一个 char 数组会导致问题吗？

> ID：14179102
> 
> 赞同：0
> 
> 时间：2013-01-06T03:54:14.477
> 
> 标签：c++, dynamic-arrays, dynamic-allocation

C++ 中的伪代码

```
char* data = new char[determine_size()];
// ... do some stuff with data
delete[] data;
// ... repeat process 
```

所以基本上，数据每次都被重复分配给一个不同大小的新数组。尽管每次之前的分配总是首先被取消分配。

这会导致内存碎片吗？

我对 C++ 中的内存管理不是很熟悉；我的直觉告诉我这不是一个好主意。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-01-06T03:58:11.160

你问，

> “这会导致内存碎片吗？”

内存分配是产生碎片所*必需*的，但这还*不够*。

即**它取决于**很多事情，包括分配模式和内存管理器。

如前所述，这个问题确实无法回答。

但是仍然可以给出一些好的建议。

**不要使用原始数组 and `new`，而是使用例如`std::vector`and `std::string`。**

# .net - 使用子域或子目录之间的技术差异？

> ID：14179107
> 
> 赞同：1
> 
> 时间：2013-01-06T03:55:07.770
> 
> 标签：.net

任何人都可以建议使用 .net 的网站使用子域或子目录之间是否存在任何技术差异？哪个是更好的选择？

从我到目前为止的研究来看，它可以归结为以下内容：但会感谢对此的进一步澄清：

子域： - 需要为子域应用 SSL（可以为 *.abc.com 使用通配符证书，但会很昂贵） - 基本 URL 可以简单地在编码中使用 / - 需要主机文件条目的 DNS 和网络服务器配置

子目录： - 使用子目录，您可以将应用程序放到一个目录中，然后继续

请指教谢谢:)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-06T04:13:36.917

你几乎回答了你自己的问题，我想补充一下：

*   您可以轻松地在不同的 IP/服务器上运行子域，这在某些情况下可能会带来好处，而不是真正的负载均衡器。
*   web.config、跨域文件等配置文件默认由子目录共享。它既可以使配置更容易，也可以根据用例更复杂。
*   在搜索引擎优化方面，子目录方法可能有好处，其中保留子目录的排名，但不保留子域，[但似乎没有就该主题达成共识](http://www.seomoz.org/q/blog-on-subdomain-vs-subdirectory-best-practices)。

# python - 如何正确制作我自己的模块，在其中导入另一个模块？

> ID：14179112
> 
> 赞同：3
> 
> 时间：2013-01-06T03:55:46.853
> 
> 标签：python, class, csv, module, python-2.7

我使用了一个 .txt 文件，每一行如下所示：

```
 1/2/09,902,898.5,905.25,913.25,914.5,914.25,915.5,924.5,926.25,929.25,927.5,926 
```

.txt 文件中可能有 50 行这样的行。

这是我制作的代码：

```
class PriceProcesseor(object):

    import csv
    import datetime

    def __init__(self, text_file_with_prices):
        self.text_file_with_prices = text_file_with_prices
        self.file_each_date_is_a_list_of_strings = self.__turn_file_into_list()

    def __turn_file_into_list(self):
        self.text_file_with_prices1 = open(self.text_file_with_prices, 'rU')
        self.text_file_with_prices2 = csv.reader(self.text_file_with_prices1)
        return self.text_file_with_prices2

    def file_as_list(self):
        '''Returns the file as a list of strings'''
        self.whole_file_as_list_of_lists = []
        for x in self.file_each_date_is_a_list_of_strings:
            self.whole_file_as_list_of_lists.append(x)
        return self.whole_file_as_list_of_lists

    # Make a method that can return any given line

    def return_line(self,line_number):
        self.line_number = line_number
        return self.file_as_list()[line_number]

    def the_works(self):
        self.the_works_list = []
        for date in self.file_as_list():
            self.mini_list = []
            for item in date:
                if '/' in item:
                    self.date = str(datetime.datetime.strptime(item,'%m/%d/%y'))
                    self.date_munged = self.date.strip('00:00:00')
                    self.date_munged_1 = self.date_munged.strip()
                    self.mini_list.append(self.date_munged_1)
                elif '/' not in item:
                    self.mini_list.append(float(item))
            self.the_works_list.append(self.mini_list)
        return self.the_works_list 
```

但是当我这样做时：

```
my_file = '/directory1/directory2/the_file.txt'
xyz = PriceProcesseor(my_file)
xyz.the_works() 
```

我收到错误消息：

```
NameError: global name 'csv' is not defined 
```

做错了什么？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-06T03:56:54.453

将`import`语句放在类定义之外。

```
import csv
import datetime

class PriceProcesseor(object):
#etc. 
```

类块创建一个范围。当您在该范围内导入内容时，它们只能在该范围内访问。类范围不能直接访问类的方法，因此他们看不到导入的模块。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-06T18:04:07.890

因此，正确的处理方法如下：

```
import csv
import datetime

class PriceProcesseor(object):

    def __init__(self, text_file_with_prices):
        self.text_file_with_prices = text_file_with_prices
        self.file_each_date_is_a_list_of_strings = self.__turn_file_into_list()

    def __turn_file_into_list(self):
        self.text_file_with_prices1 = open(self.text_file_with_prices, 'rU')
        self.text_file_with_prices2 = csv.reader(self.text_file_with_prices1)
        return self.text_file_with_prices2

    def file_as_list(self):
        '''Returns the file as a list of strings'''
        self.whole_file_as_list_of_lists = []
        for x in self.file_each_date_is_a_list_of_strings:
            self.whole_file_as_list_of_lists.append(x)
        return self.whole_file_as_list_of_lists

    # Make a method that can return any given line

    def return_line(self,line_number):
        self.line_number = line_number
        return self.file_as_list()[line_number]

    def the_works(self):
        self.the_works_list = []
        for date in self.file_as_list():
            self.mini_list = []
            for item in date:
                if '/' in item:
                    self.date = str(datetime.datetime.strptime(item,'%m/%d/%y')) 
```

接下来我将文件保存为 ABC123.py。当我输入 import ABC123 时，一切都会完美运行。

# php - PayPal IPN 记录但不插入 MySQL

> ID：14179116
> 
> 赞同：0
> 
> 时间：2013-01-06T03:56:22.787
> 
> 标签：php, mysql, paypal-ipn

我有这个脚本应该将信息插入到 MySQL 表中，但由于某种原因，它只会将其保存在 ipn.log 文件中，但不会运行插入查询。这是我拥有的代码。

```
<?php 

//Lets do MySql connection stuff 
$mysql_host = 'SERVER'; //Leave at localhost 
$mysql_user = 'USER'; //DB User 
$mysql_pass = 'PASSWORD'; //DB Pass 
$mysql_db = 'DATABASE'; //DB Name 

//------------------------------------------------------------------ 
// Open log file (in append mode) and write the current time into it. 
// Open the DB Connection. Open the actual database. 
//------------------------------------------------------------------- 
$log = fopen("ipn.log", "a"); 
fwrite($log, "\n\nipn - ".gmstrftime("%b %d %Y %H:%M:%S", time())."\n"); 
$db = mysql_connect($mysql_host, $mysql_user, $mysql_pass); 
mysql_select_db($mysql_db, $db); 

//------------------------------------------------ 
// Read post from PayPal system and create reply 
// starting with: 'cmd=_notify-validate'... 
// then repeating all values sent - VALIDATION. 
//------------------------------------------------ 
$postvars = array(); 

while(list($key, $value) = each($_POST)) 
{ 
  $postvars[] = $key; 
} 
$req = 'cmd=_notify-validate'; 

for($var = 0; $var < count($postvars); $var++) 
{ 
  $postvar_key = $postvars[$var]; 
  $postvar_value = $$postvars[$var]; 
  $req .= "&".$postvar_key."=".urlencode($postvar_value); 
} 

//-------------------------------------------- 
// Create message to post back to PayPal... 
// Open a socket to the PayPal server... 
//-------------------------------------------- 
$header .= "POST /cgi-bin/webscr HTTP/1.0\r\n"; 
$header .= "Content-Type: application/x-www-form-urlencoded\r\n"; 
$header .= "Content-Length: ".strlen($req)."\r\n\r\n"; 
$fp = fsockopen("www.paypal.com", 80, $errno, $errstr, 30); 

//--------------------------------------------- 
fwrite($log, "Vals: ". $invoice." ". $receiver_email." ". $item_name." ". $item_number." ". $quantity." ". $payment_status." ". $pending_reason." ".$payment_date." ". $payment_gross." ". $payment_fee." ". $txn_id." ". $txn_type." ". $first_name." ". $last_name." ". $address_street." ". $address_city." ". $address_state . " ".$address_zip." ". $address_country." ". $address_status." ". $payer_email. " ". $payer_status." ". $payment_type." ". $notify_version." ". $verify_sign. "\ n"); 

// assign posted variables to local variables 
$item_name = $_POST['item_name']; 
$item_number = $_POST['item_number']; 
$payment_status = $_POST['payment_status']; 
$payment_amount = $_POST['mc_gross']; 
$payment_currency = $_POST['mc_currency']; 
$txn_id = $_POST['txn_id']; 
$receiver_email = $_POST['receiver_email']; 
$payer_email = $_POST['payer_email']; 

//---------------------------------------------------------------------- 
// Check HTTP connection made to PayPal OK, If not, print an error msg 
//---------------------------------------------------------------------- 
if(!$fp) 
{ 
  echo $errstr."(".$errno.")"; 
  fwrite($log, "Failed to open HTTP connection!"); 
  $res = "FAILED"; 
} 
//-------------------------------------------------------- 
// If connected OK, write the posted values back, then... 
//-------------------------------------------------------- 
else 
{ 
  fputs($fp, $header . $req); 
  //------------------------------------------- 
  // ...read the results of the verification... 
  // If VERIFIED = continue to process the TX... 
  //------------------------------------------- 
  while(!feof($fp)) 
  { 
    $res = fgets($fp, 1024); 
    if(strcmp($res, "VERIFIED") == 0) 
    { 
      //-------------------------------------- 
      // Insert Transaction details into DB. 
      //-------------------------------------- 
      $qry = "INSERT INTO DONATIONS (invoice, receiver_email, item_name, item_number, quantity, payment_status, pending_reason, payment_date, payment_gross, payment_fee, txn_id, txn_type, first_name, last_name, address_street, address_city, address_state, address_zip, address_country, address_status, payer_email, payer_status, payment_type, notify_version, verify_sign) VALUES('$invoice', '$receiver_email', '$item_name', '$item_number', '$quantity', '$payment_status', '$pending_reason', '$payment_date', '$payment_gross', '$payment_fee', '$txn_id', '$txn_type', '$first_name', '$last_name', '$address_street', '$address_city', '$address_state', '$address_zip', '$address_country', '$address_status', '$payer_email', '$payer_status ', '$payment_type', '$notify_version', '$verify_sign')"; 
      $result = mysql_query($qry); 
    } 
  } 
} 
//------------------------------------------- 
// Close PayPal Connection, Log File and DB. 
//------------------------------------------- 
fclose($fp); 
fclose($log); 
mysql_close($db); 

?> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-06T04:14:53.420

最好的方法是通过在代码中进行一些测试以查看错误所在的位置，从而找出“某种原因”：

您连接到 mysql 数据库的位置：

```
$db = mysql_connect($mysql_host, $mysql_user, $mysql_pass);
if (!$db) {
    die('Could not connect: ' . mysql_error());
} else {
$db_selected = mysql_select_db($mysql_db, $db);
if (!$db_selected) {
    die ('Can\'t use selected db : ' . mysql_error());
    } 
} 
```

以及在数据库中插入数据的位置：

```
$result = mysql_query($qry); 
  if (!$result) {
    die('Could not insert in db: ' . mysql_error());
  } 
```

现在您可以通过查看错误找出为什么信息没有输入到数据库中。

在开发以在屏幕上显示错误时，还要确保将其添加到 php 文件的开头：

```
<?php
ini_set('display_errors', 1); error_reporting(E_ALL); 
```

这将在屏幕上显示错误并报告所有类型的错误，这将简化您的编码。

我希望这是解决您的问题的良好开端。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-06T04:24:18.283

我不确定我做了什么不同，但删除了表格并重新创建了它。现在它起作用了。

# android - 画布上的和谐？

> ID：14179117
> 
> 赞同：2
> 
> 时间：2013-01-06T03:56:27.760
> 
> 标签：android, android-canvas

我们如何像这样为画布着色：

![在此处输入图像描述](../Images/63eed96aa3835604985922edaea03dcc.png)

如果注意，颜色会相对于半径变化，并且不是恒定的。我不能使用形状和渐变。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-06T05:24:47.607

它可以通过使用 Gradients>Shape(ring)>United 和 LayerList 的组合来实现。你必须花一些时间来实现它。

# algorithm - 动态规划复杂性中的k-means？

> ID：14179123
> 
> 赞同：0
> 
> 时间：2013-01-06T03:57:10.500
> 
> 标签：algorithm, complexity-theory, dynamic-programming, k-means

我们都知道 k-means 算法：![在此处输入图像描述](../Images/1201f0898f0a25a84acbca1aef717d36.png)它的复杂度为**O( n * K * I * d ) 其中：**

1.  n = 点数
2.  K = 聚类数
3.  I = 迭代次数
4.  d = 属性数

但我的问题是在**动态编程**中应用 K-means 时，我无法弄清楚它的复杂性。

**简而言之，使用DP**的 K-means 的想法如下：

*   计算邻近矩阵
*   让每个数据点成为一个簇
*   **重复**
    *   合并两个最近的集群
    *   更新邻近矩阵
*   **直到**只剩下一个集群

我试图为它找到一个伪代码，以便我可以尝试找出复杂性，但我做不到。

那么，我怎样才能找到它的复杂性呢？它可能是什么？

提前谢谢你们的任何回答。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-06T04:20:10.520

您描述的算法不是具有动态编程的 k-means，而是一种称为[凝聚聚类 的层次聚类](http://en.wikipedia.org/wiki/Hierarchical_clustering)。通常，凝聚聚类实现需要时间 (IIRC) O(n ³ d)，其中 n 是数据点的数量，d 是特征的数量。维基百科更深入地介绍了它的工作原理。

请注意，以这种方式找到*的*集群与您使用 k-means 获得的集群不同。凝聚聚类倾向于产生具有不同属性集的非常不同的聚类。

希望这可以帮助！

# c# - 如何根据项目的属性组织视图中的项目列表？

> ID：14179124
> 
> 赞同：1
> 
> 时间：2013-01-06T03:57:19.380
> 
> 标签：c#, asp.net, asp.net-mvc, linq, razor

我有一个项目集合。这是我的视图模型：

```
public class MyViewModel
{
    public IEnumerable<MyClass> MyCollection { get; set; }
}

public class MyClass
{        
    public string VendorName { get; set; }
    public decimal Amount { get; set; }
    public decimal Tax { get; set; }           
} 
```

所以我的收藏有大约 200 行。多行可以具有相同的供应商名称，因此我的集合中有 5 个不同的供应商名称。

在我将视图模型传递到的视图中，我想显示每个供应商的名称，并且在每个供应商下，我想显示该供应商名称的金额和税金网格。

我认为我需要在我的观点范围内这样做，但我不确定如何去做。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-07T10:32:31.743

我宁愿让视图模型紧密地适应视图，并尽可能少地在视图中进行数据操作。毕竟，塑造数据不是视图的责任，只是将它们暴露给用户。所以我会用

```
public class Vendor
{
    public string VendorName { get; set; }
    public IEnumerable<VendorInfo> VendorData { get; set; }
}

public class VendorInfo
{
    public decimal Amount { get; set; }
    public decimal Tax { get; set; }
}

public class MyViewModel
{
    public IEnumerable<Vendor> Vendors { get; set; }
} 
```

因此，您只需一次即可从供应商名称及其详细信息构建 UI 元素。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-06T05:05:46.267

您可以采用两步过程。在您的控制器中执行以下操作：

```
var vendors = MyCollection.Select(myc => myc.VendorName).Distinct(); 
```

并确保将供应商（连同 MyCollection）传递给您的视图（或者您可以在您的视图中执行此操作——这取决于您自己的个人喜好）。然后在视图中执行以下操作：

```
foreach(var vendor in vendors)
{
  var currentCollection = MyCollection.Select(myc => myc.VendorName.Equals(vendor));
  foreach(MyClass something in currentCollection)
  {
     //Do what you want
  }
} 
```

确保当您在 View 中获取供应商列表时（通过 ViewBag 或 ViewData）确保将其转换回`IEnumerable<string>`（以及 MyCollection 到`IEnumerable<MyClass>`），您应该一切顺利。

# python - 使用目录| Python

> ID：14179125
> 
> 赞同：1
> 
> 时间：2013-01-06T03:57:22.597
> 
> 标签：python, directory, organization

我正在编写代码来组织 +40G 的音乐，现在所有文件都在一个大文件夹中，我的目标是为每个艺术家建立一个目录。现在，我已经能够提取艺术家信息，并用它创建一个目录，但我发现的一个问题是，如果我有两个具有相同艺术家信息的文件，我会收到两个文件夹的错误同名。

我需要帮助防止第二个文件夹发生。

```
import os #imports os functions
import eyed3 #imports eyed3 functions

root_folder = '/Users/ntoscano/desktop/mp3-organizer'

files = os.listdir(root_folder) #lists all files in specified directory
if not files[1].endswith('.mp3'):
    pass #if the file does not end with ".mp3" it does not load it into eyed3

for file_name in files:
    if file_name.endswith('.mp3'): #if file ends with ".mp3" it continues onto the next line

        abs_location = '%s/%s' % (root_folder, file_name)

        song_info = eyed3.load(abs_location) #loads each file into eyed3 and assignes the return value to song_info
        if song_info is None:
            print 'Skippig %s' % abs_location
            continue
        os.mkdir(os.path.expanduser('~/Desktop/mp3-organizer/%s' % song_info.tag.artist))
        print song_info
        print song_info.tag.artist
    else:
        pass 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-06T04:02:18.747

将其包装`mkdir`在 try/except 中并捕获目录存在时引发的异常。确保还导入`errno`模块。

```
try:
    os.mkdir(os.path.expanduser('~/Desktop/mp3-organizer/%s' % song_info.tag.artist))
except OSError as e:
    if e.errno != errno.EEXIST:
        raise 
```

您还可以使用 来检查目录是否存在`os.path.isdir()`，但这会引入竞争条件。

# java - Spring MVC 设置不起作用 - 路径问题？

> ID：14179127
> 
> 赞同：0
> 
> 时间：2013-01-06T03:58:04.450
> 
> 标签：java, spring, jsp, model-view-controller

当我输入 /localhost:8080/springapp2/ 时，我收到以下消息

```
 HTTP Status 404 - Servlet spring is not available 
```

甚至根 URL 也不起作用。

这是我的文件...

web.xml

```
<?xml version="1.0" encoding="UTF-8"?>
<web-app xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" 
     xmlns="http://java.sun.com/xml/ns/javaee" 
     xmlns:web="http://java.sun.com/xml/ns/javaee/web-app_2_5.xsd" 
     xsi:schemaLocation="http://java.sun.com/xml/ns/javaee http://java.sun.com/xml/ns/javaee/web-app_2_5.xsd" 
     id="WebApp_ID" version="2.5">
<servlet>
    <servlet-name>spring</servlet-name>
    <servlet-class>
        org.springframework.web.servlet.DispatcherServlet
    </servlet-class>
     <init-param>
        <param-name>contextConfigLocation</param-name>
        <param-value>spring-servlet.xml</param-value>
    </init-param>
    <load-on-startup>1</load-on-startup>
</servlet>

<servlet-mapping>
    <servlet-name>spring</servlet-name>
    <url-pattern>/*</url-pattern>
</servlet-mapping>

<display-name>Spring MVC Sample</display-name>
</web-app> 
```

spring-servlet.xml

```
 <beans xmlns="http://www.springframework.org/schema/beans"
xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
xmlns:context="http://www.springframework.org/schema/context"
xmlns:mvc="http://www.springframework.org/schema/mvc"
xsi:schemaLocation="http://www.springframework.org/schema/beans    http://www.springframework.org/schema/beans/spring-beans.xsd http://www.springframework.org/schema/context  http://www.springframework.org/schema/context/spring-context.xsd http://www.springframework.org/schema/mvc http://www.springframework.org/schema/mvc/spring-mvc.xsd">

<context:annotation-config />
<context:component-scan base-package="org.nara.controllers"/>

<bean id="jspViewResolver"
class="org.springframework.web.servlet.view.InternalResourceViewResolver">
    <property name="viewClass" value="org.springframework.web.servlet.view.JstlView" />
    <property name="prefix" value="/" />
    <property name="suffix" value=".jsp" />
</bean>    
</beans> 
```

控制器类

```
 package org.nara.controllers;

 import javax.servlet.http.HttpServletRequest;
 import javax.servlet.http.HttpServletResponse;

 import org.springframework.stereotype.Controller;
 import org.springframework.web.bind.annotation.RequestMapping;
 import org.springframework.web.bind.annotation.RequestMethod;
 import org.springframework.web.servlet.ModelAndView;

 @Controller
 @RequestMapping (value="/")
 public class HelloWorldControllder {

   public String HelloWorld() {
    return "hello";
}

@RequestMapping(value="/greetme", method = RequestMethod.GET)
public ModelAndView handlePOST( HttpServletRequest request, HttpServletResponse response) {
    ModelAndView mav = new ModelAndView("index.jsp");
    mav.addObject("Greeting", "Hello you");
    return mav;
 }  
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-06T04:41:00.593

我解决了这个问题。我改变了几件事。

*   将 URL 模式更改为`/`
*   将 spring 表达式 jar 添加到类路径
*   ContextConfigLocation URL 存在问题。我更新了

现在它就像一个魅力。希望这可以帮助某人。

# php - 从 reddit 抓取图像

> ID：14179134
> 
> 赞同：0
> 
> 时间：2013-01-06T03:59:31.157
> 
> 标签：php, json

```
 <?php

 $reddit = 'pics';

 $url = "http://reddit.com/r/$reddit/.json?limit=100";

 $json = file_get_contents($url);
 $js = json_decode($json);

  foreach($js->data->children as $n) {

        if(preg_match('(jpg$|gif$|png$)', $n->data->url, $match)) {
            echo $n->data->url."</br>";
        }
  } 
```

?>

我正在写一些东西来从 reddit 上抓取图片。我查看了其他一些执行此操作的代码，唯一让我无法理解的部分是：

```
$js->data->children 
```

我相信它正在做的是告诉 foreach 循环查看 $js 和数据，然后查看这些数组的子项。

我对这个不是很清楚，谁能解释一下？

# jquery - val() 不抓取当前输入值

> ID：14179140
> 
> 赞同：2
> 
> 时间：2013-01-06T04:00:24.557
> 
> 标签：jquery, html

我正在尝试获取输入字段的值，但更新时不会获取它。我正在尝试创建一个 ajax 登录表单。这是代码

```
<form method="post" id="contactform">
    <label for="name">Username</label>
    <input type="text"  id="un" placeholder="Username"  />

    <label for="password">Password</label>
    <input type="password"  id="pw" placeholder="Password"  />

    <br/>
    <button name="submit" type="submit" class="btn" id="submit" onclick="logUserIn(); return false;">Log In</button>

    <script type="text/javascript">
    function logUserIn()
    {
        var un = $("#un").val();
        var pw = $("#pw").val();

        alert(un);
    }
    </script> 
```

如果我在输入字段中输入内容并单击提交按钮，它不会为我更新。

如果我要像这样手动更改输入值字段

```
<input type="text"  id="un" placeholder="Username" value="test" /> 
```

然后我收到警报“测试”。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2016-05-30T06:06:12.540

jquery 站点上 val() 的定义指出“获取匹配元素集中**第一个**元素的当前值”。我不确定“元素”指的是什么，但在调试模式下单步执行我的 Javascript 我可以看到 jquery 对象（由 $('#field_id') 返回在第一个数组元素中但在输入之后保存了原始值文本已更改，更新的值保存在第二个数组元素中。使用 last() 对我有用，例如 $('#field_id').last().val();

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-06T04:07:57.473

我建议您以不显眼的方式编写 JavaScript，即将 JavaScript 中的所有内容保存在脚本标记中，并将标记分开。参见[Unobtrusive JavaScript - 维基百科](http://en.wikipedia.org/wiki/Unobtrusive_JavaScript)

HTML：

```
 <form method="post" id="contactform">
      <label for="name">Username</label>
      <input type="text" id="un" placeholder="Username" />
      <label for="password">Password</label>
      <input type="password" id="pw" placeholder="Password"
      />
      <br/>
      <button id="btnLogin" name="submit" type="submit" class="btn" id="submit">Log In</button>
</form> 
```

JavaScript：

```
$(function() {
  $('#btnLogin').click(logUserIn);
});

function logUserIn() {
  var un = $("#un").val();
  var pw = $("#pw").val();

  alert(un);

  return false;
} 
```

[**现场演示**](http://jsfiddle.net/6Gadm/4/)

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-01-06T04:10:17.070

向输入标签添加空值属性，我希望这对你有用。例如：

```
<input type="text"  id="un" placeholder="Username" value="" />
<input type="password"  id="pw" placeholder="Password" value="" /> 
```

# css - 试图在css中并排对齐4个div

> ID：14179145
> 
> 赞同：0
> 
> 时间：2013-01-06T04:00:59.877
> 
> 标签：css, css-float, html

我在一个包装 div 中有 4 个 div，我正在尝试对齐它们。前 2 个对齐，但其他 2 个在下方，无论我尝试什么，我都不想让它们去哪里！

**包装器**

```
#contentbk{

margin:auto;
width:90%;
background-color:#000;
padding-top:2%;
padding-bottom:1%;
text-align:center;
height:300px;
    } 
```

**包装器内的 4 个 div**

```
 #contentbk div { 
    height:100px; 
    width:10%; 
    float:left;        
    } 
```

# meteor - 模板渲染后的 Meteorjs

> ID：14179146
> 
> 赞同：0
> 
> 时间：2013-01-06T04:01:03.027
> 
> 标签：meteor

我编写了代码以在模板呈现后将一些 jquery 插件应用于选定的字段。但是选择字段中的每个选项都会调用下面的代码，但它应该只调用一次。我还有其他工作，但我想了解模板的渲染事件。请帮助我理解这一点。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-10T15:44:02.960

你可能在谈论`Template.name.rendered`. 每次模板中发生反应性更改时（例如，当您将文档添加到模板中引用的集合时，必须重新渲染以容纳新数据。

如果您不希望重新渲染您的选择框，请查看[preserve](http://docs.meteor.com/#template_preserve)。它可用于从 Meteor 的反应性中排除元素

# php - 对于多租户系统，php 会话是否足够安全

> ID：14179147
> 
> 赞同：4
> 
> 时间：2013-01-06T04:01:15.527
> 
> 标签：php, session

我正在创建一个多租户系统（第一次）。我有点担心这个系统，因为应用程序的所有用户详细信息都将保存在数据库中的同一个表中。当用户登录时，我计划设置一个`$_SESSION`包含他们的变量`clientid`并使用它来访问他们的所有信息（数据库中的所有信息都将有`clientid`列）。

我认为这是使用 PHP 和 MySQL 处理多租户系统的唯一解决方案。这足够安全吗？或者我应该为每个客户选择单独的数据库。我担心如果客户可以将他们的`$_SESSION['clientid']`发言权从“12”更改为“45”，这意味着他们将可以访问其他人的数据。

有没有更好的方法？还是解决方案是在多租户系统中处理访问数据（PHP 和 MySQL）的唯一方法？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-06T04:26:47.137

PHP 通过使用会话来跟踪谁是谁，而会话又使用 cookie 来识别*服务器*数据。

会话 cookie 类似于

```
PHPSESSID=0f0f0f0f0f0f0f0f0f... (32 hexits, usually) 
```

会话数据存储在服务器端，因此用户将无法（轻松*）将其更改`clientid`为其他人。我说的很简单，因为用户可以尝试[暴力破解他们的 PHPSESSID 值](https://www.owasp.org/index.php/Session_Fixation)并获得对另一个服务器会话的访问权限（但这需要很长时间）。

也可以使用其他策略（例如[XSS 漏洞利用](https://www.owasp.org/index.php/PHP_Top_5#P2:_Cross-site_scripting)）来发现其他服务器会话。

您可以搜索 StackOverflow 以获取更多信息：

*   [会话固定](https://stackoverflow.com/search-new?tab=votes&q=%5Bphp%5D%20session%20fixation)
*   [会话劫持](https://stackoverflow.com/search-new?tab=votes&q=%5Bphp%5D%20session%20hijacking)
*   [跨站脚本](https://stackoverflow.com/search-new?tab=votes&q=%5Bphp%5D%20XSS)

为了安全起见，请确保在没有事先清理的情况下（通过使用 HTMLPurifier 或 ）不输出用户输入，并在您登录/注销或提升用户权限时`htmlspecialchars()`调用。[`session_regenerate_id()`](http://php.net/manual/en/function.session-regenerate-id.php)

# android - 将数据库中的数据显示到文本视图中

> ID：14179148
> 
> 赞同：3
> 
> 时间：2013-01-06T04:01:23.180
> 
> 标签：android, database

当我单击下一步按钮时，我正在尝试将数据库中的随机数据显示到两个文本视图中（TextView1 显示 NAME，TextView2 显示 PHONENUMBER），但我不知道该怎么做。请帮忙！我正在使用一些类和 xml 文件（我在 androidhive.info 中引用过）：

```
 public class DatabaseHandler extends SQLiteOpenHelper {

    // All Static variables
    // Database Version
    private static final int DATABASE_VERSION = 1;

    // Database Name
    private static final String DATABASE_NAME = "contactsManager";

    // Contacts table name
    private static final String TABLE_CONTACTS = "contacts";

    // Contacts Table Columns names
    private static final String KEY_ID = "id";
    private static final String KEY_NAME = "name";
    private static final String KEY_PH_NO = "phone_number";

    public DatabaseHandler(Context context) {
        super(context, DATABASE_NAME, null, DATABASE_VERSION);
    }

    // Creating Tables
    @Override
    public void onCreate(SQLiteDatabase db) {
        String CREATE_CONTACTS_TABLE = "CREATE TABLE " + TABLE_CONTACTS + "("
                + KEY_ID + " INTEGER PRIMARY KEY," + KEY_NAME + " TEXT,"
                + KEY_PH_NO + " TEXT" + ")";
        db.execSQL(CREATE_CONTACTS_TABLE);
    }

    // Upgrading database
    @Override
    public void onUpgrade(SQLiteDatabase db, int oldVersion, int newVersion) {
        // Drop older table if existed
        db.execSQL("DROP TABLE IF EXISTS " + TABLE_CONTACTS);

        // Create tables again
        onCreate(db);
    }

    /**
     * All CRUD(Create, Read, Update, Delete) Operations
     */

    // Adding new contact
    void addContact(Contact contact) {
        SQLiteDatabase db = this.getWritableDatabase();

        ContentValues values = new ContentValues();
        values.put(KEY_NAME, contact.getName()); // Contact Name
        values.put(KEY_PH_NO, contact.getPhoneNumber()); // Contact Phone

        // Inserting Row
        db.insert(TABLE_CONTACTS, null, values);
        db.close(); // Closing database connection
    }

    // Getting single contact
    Contact getContact(int id) {
        SQLiteDatabase db = this.getReadableDatabase();

        Cursor cursor = db.query(TABLE_CONTACTS, new String[] { KEY_ID,
                KEY_NAME, KEY_PH_NO }, KEY_ID + "=?",
                new String[] { String.valueOf(id) }, null, null, null,        null);
        if (cursor != null)
            cursor.moveToFirst();

        Contact contact = new Contact(Integer.parseInt(cursor.getString(0)),
                cursor.getString(1), cursor.getString(2));
        // return contact
        return contact;
    }

    // Getting All Contacts
    public List<Contact> getAllContacts() {
        List<Contact> contactList = new ArrayList<Contact>();
        // Select All Query
        String selectQuery = "SELECT  * FROM " + TABLE_CONTACTS;

        SQLiteDatabase db = this.getWritableDatabase();
        Cursor cursor = db.rawQuery(selectQuery, null);

        // looping through all rows and adding to list
        if (cursor.moveToFirst()) {
            do {
                Contact contact = new Contact();
                contact.setID(Integer.parseInt(cursor.getString(0)));
                contact.setName(cursor.getString(1));
                contact.setPhoneNumber(cursor.getString(2));
                // Adding contact to list
                contactList.add(contact);
            } while (cursor.moveToNext());
        }

        // return contact list
        return contactList;
    }

    // Updating single contact
    public int updateContact(Contact contact) {
        SQLiteDatabase db = this.getWritableDatabase();

        ContentValues values = new ContentValues();
        values.put(KEY_NAME, contact.getName());
        values.put(KEY_PH_NO, contact.getPhoneNumber());

        // updating row
        return db.update(TABLE_CONTACTS, values, KEY_ID + " = ?",
                new String[] { String.valueOf(contact.getID()) });
    }

    // Deleting single contact
    public void deleteContact(Contact contact) {
        SQLiteDatabase db = this.getWritableDatabase();
        db.delete(TABLE_CONTACTS, KEY_ID + " = ?",
                new String[] { String.valueOf(contact.getID()) });
        db.close();
    }

    // Getting contacts Count
    public int getContactsCount() {
        String countQuery = "SELECT  * FROM " + TABLE_CONTACTS;
        SQLiteDatabase db = this.getReadableDatabase();
        Cursor cursor = db.rawQuery(countQuery, null);
        cursor.close();

        // return count
        return cursor.getCount();
    }

   } 
```

Contact.java 类：

```
 public class Contact {

    //private variables
    int _id;
    String _name;
    String _phone_number;

    // Empty constructor
    public Contact(){

    }
    // constructor
    public Contact(int id, String name, String _phone_number){
        this._id = id;
        this._name = name;
        this._phone_number = _phone_number;
    }

    // constructor
    public Contact(String name, String _phone_number){
        this._name = name;
        this._phone_number = _phone_number;
    }
    // getting ID
    public int getID(){
        return this._id;
    }

    // setting id
    public void setID(int id){
        this._id = id;
    }

    // getting name
    public String getName(){
        return this._name;
    }

    // setting name
    public void setName(String name){
        this._name = name;
    }

    // getting phone number
    public String getPhoneNumber(){
        return this._phone_number;
    }

    // setting phone number
    public void setPhoneNumber(String phone_number){
        this._phone_number = phone_number;
    }
  } 
```

AndroidSQLiteTutorialActivity.java 类：

```
 public class AndroidSQLiteTutorialActivity extends Activity {
    /** Called when the activity is first created. */
    @Override
    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.main);

        DatabaseHandler db = new DatabaseHandler(this);

        /**
         * CRUD Operations
         * */
        // Inserting Contacts
        Log.d("Insert: ", "Inserting ..");
        db.addContact(new Contact("Ravi", "9100000000"));
        db.addContact(new Contact("Srinivas", "9199999999"));
        db.addContact(new Contact("Tommy", "9522222222"));
        db.addContact(new Contact("Karthik", "9533333333"));

        // Reading all contacts
        Log.d("Reading: ", "Reading all contacts..");
        List<Contact> contacts = db.getAllContacts();       

        for (Contact cn : contacts) {
            String log = "Id: "+cn.getID()+" ,Name: " + cn.getName() + " ,Phone: " +    cn.getPhoneNumber();
                // Writing Contacts to log
        Log.d("Name: ", log);

        }
    }
    private void contactList() {
        //set the question text from current question

        DatabaseHandler db = new DatabaseHandler(this);

        /**
         * CRUD Operations
         * */
        // Inserting Contacts
        Log.d("Insert: ", "Inserting ..");
        db.addContact(new Contact("Ravi", "9100000000"));
        db.addContact(new Contact("Srinivas", "9199999999"));
        db.addContact(new Contact("Tommy", "9522222222"));
        db.addContact(new Contact("Karthik", "9533333333"));

        // Reading all contacts
        Log.d("Reading: ", "Reading all contacts..");
        List<Contact> contacts = db.getAllContacts();       
        TextView name = (TextView) findViewById(R.id.textView1);

        for (Contact cn : contacts) {
            String name1 = "Id: "+cn.getID()+" ,Name: " + cn.getName() + " ,Phone: " + cn.getPhoneNumber();
                // Writing Contacts to log
        Log.d("Name: ", name1);

        }

    }

}

<?xml version="1.0" encoding="utf-8"?>
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
android:layout_width="fill_parent"
android:layout_height="fill_parent"
android:orientation="vertical"
android:background="@android:color/white" >

<TextView
    android:id="@+id/textView1"
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"
    android:text="Large Text"
    android:textAppearance="?android:attr/textAppearanceLarge" />

<TextView
    android:id="@+id/textView2"
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"
    android:text="Large Text"
    android:textAppearance="?android:attr/textAppearanceLarge" />

<Button
    android:id="@+id/next"
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"
    android:text="Button" />

</LinearLayout> 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-06T05:29:19.657

您将需要为按钮设置[setOnClickListener](http://developer.android.com/reference/android/view/View.html#setOnClickListener%28android.view.View.OnClickListener%29)以对按钮单击和使用执行一些操作，并使用 Counter 变量在按钮单击时显示下一个值：

```
List<Contact> contacts = db.getAllContacts();   

    TextView name = (TextView) findViewById(R.id.textView1);

    Button buttonnext = (Button) findViewById(R.id.next);
    buttonnext.setOnClickListener(onclickListener);
    int listcounter=0;

private OnClickListener onclickListener = new OnClickListener() {
    @Override
    public void onClick(final View v) {
       if(listcounter<contacts.size()){
          Contact cn=contacts.get(listcounter);

          name.setText("");
          name.append("Id: "+cn.getID());
          name.append(" ,Name: "+cn.getName());
          name.append(",Phone: "+cn.getPhoneNumber());

          listcounter++;
        }
       else{
             //Reset the Counter here
            listcounter = 0;

       }
    }
}; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-06T06:44:18.350

尝试这个 ：

```
 Button buttonnext = (Button) findViewById(R.id.next);
    buttonnext.setOnClickListener(onclickListener);

private OnClickListener onclickListener = new OnClickListener() {
    @Override
    public void onClick(final View v) {

int randInt = new Random().nextInt(contacts.size()) + 1;
       Contact cn=contacts.get(randInt);
          name.setText("Id: "+cn.getID()+" ,Name: " + cn.getName() + "
                    ,Phone: " + cn.getPhoneNumber());
    }
}; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-06T04:31:24.480

你需要一个`OnClickListener`按钮。`android:onClick`您可以使用属性在 XML 中声明它。

[这在http://developer.android.com/guide/topics/ui/controls/button.html#HandlingEvents](http://developer.android.com/guide/topics/ui/controls/button.html#HandlingEvents)中有详细解释。

# flash - 结合 Flash 和 Flex

> ID：14179154
> 
> 赞同：0
> 
> 时间：2013-01-06T04:02:09.543
> 
> 标签：flash, apache-flex, flash-builder, flash-cs5

我有一个使用 Adob​​e Flash CS5 构建的 Flash 应用程序。有没有办法将它集成到 Adob​​e Flex 中（我使用的是 FLash Builder 4）？

为什么我要问：Adobe Flash 似乎是在 Flash 应用程序中导入动画和图形的最佳方式。同时，看起来 Flex 是制作 GUI（按钮、列表、对话框等）的最佳选择。我正在制作游戏，所以我需要两者。此外，如果有人建议这些替代方案，将不胜感激。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-06T17:04:33.750

Adobe Flash 非常适合在时间轴上创建资源并将它们导出为 swf 或 swc。

Flex 不在乎你如何给它资产，这完全取决于哪种方法适合你的应用程序。

您可以在 swf 中导出资产，并在编译时嵌入（较大的应用程序 swf），或在运行时加载（较小的应用程序 swf，资产仅在加载后可用）。

您也可以将资产放在 swc 中，但这些资产不能在运行时加载，只能在编译时嵌入。

使用上面的术语资产，我指的是舞台上使用时间线的电影剪辑，您还可以将 PNG 和 JPG 作为资产嵌入或加载。

# jquery - codeigniter wkhtmltopdf 介绍

> ID：14179157
> 
> 赞同：0
> 
> 时间：2013-01-06T04:02:43.060
> 
> 标签：jquery, codeigniter, wkhtmltopdf

谁能帮我？我想在我的 codeigniter 中以 pdf 格式显示日历报告的可打印报告。该日历使用一个名为 fullcalendar 的 jquery 库。最近我使用 mpdf 来创建我的 pdf 报告。但是当我在我的日历上使用它时，它没有显示日历，尽管页面的其余部分确实被调用了。我想用这个大家推荐的wkhtmltopdf。如何将此 wkhtmltopdf 放入我的 CI 库？如何在 Codeigniter 中使用它？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-06T05:25:18.740

它是一个 CLI 工具，因此您需要将二进制文件添加到您的服务器（本地、测试、生产等），并在确保目标可写的同时执行`exec()`或执行。`shell_exec()`

该工具本身采用如下命令：

```
path/to/wkhtmltopdf url/to/pdf new_file.pdf 
```

有很多设置。您可以通过以下方式查看它们：

```
path/to/wkhtmltopdf -extended-help 
```

您可能很想使用人们组合的一些 PHP 包装器。我建议你不要那样做。它让我除了头痛什么都没有。

# php - 在解析的项目中插入空格

> ID：14179158
> 
> 赞同：0
> 
> 时间：2013-01-06T04:03:09.613
> 
> 标签：php, parsing

我有一个有效的解析脚本。我将大部分工作外包，但只剩下一小部分。我正在解析的页面呈现一个没有空格的邮政编码（这是不正确的）。所以，我需要在第三个字符之后插入空格。我知道执行此操作的字符串，只是不知道如何将其放入此代码部分：

```
if(preg_match('/postal: (.*),/', $tempscript, $matches))
$temppostcode = $matches[1];
$postcode=str_replace('"','',substr($temppostcode,0,strpos($temppostcode,'", '))); 
```

我试图放入上述部分的字符串：

```
$postcode = str_replace(' ','',$postcode);
$postcode = wordwrap($postcode, strlen($postcode)-3,' ', true); 
```

我只是不知道将它放在第一部分的哪个位置以使其工作，或者我有什么替代方案。

# c++ - OpenCV图像变换和透视变化

> ID：14179164
> 
> 赞同：9
> 
> 时间：2013-01-06T04:05:20.477
> 
> 标签：c++, opencv, matrix, transformation, perspective

我正在尝试实现以下效果，此处使用 GIMP 中的透视工具显示。

**原始图像（620x466 像素）**

![原始图像（620x466 像素）](../Images/34e3ad41b6ccf6f3dd0cb6d3fe8e4025.png)

**转换图像**

![转换图像](../Images/1a472ff912af504a775cd24c92ad4ff7.png)

我拥有的是一个固定的网络摄像头，并想插入上述变换矩阵图，从而产生梯形不失真的输出。

我知道在 OpenCV 中还有其他选项可用于使图像不失真，但我真的很想手动提供变换矩阵图，同时最终得到一个梯形图像。

从阅读中我有一种感觉`warpPerspective`，`findHomography`或者`getPerspectiveTransform`可能有用，但不确定如何在 C++ 中进行此操作

任何有用的建议将不胜感激。

* * *

尝试使用以下代码运行，但我只得到一个显示 1 个像素的窗口。

也许我以像素为单位指定点的方式，这是正确的吗？

```
 #include <opencv2/core/core.hpp>
    #include <opencv2/opencv.hpp>
    #include <cv.h>
    #include <opencv2/highgui/highgui.hpp>
    #include <iostream>

    using namespace cv;
    using namespace std;

            cv::Mat OpenWarpPerspective(const cv::Mat& _image
              , const cv::Point2f& _lu
              , const cv::Point2f& _ru
              , const cv::Point2f& _rd
              , const cv::Point2f& _ld
              , const cv::Point2f& _lu_result
              , const cv::Point2f& _ru_result
              , const cv::Point2f& _rd_result
              , const cv::Point2f& _ld_result
              , cv::Mat& _transform_matrix)
            {
              // todo do some checks on input.

              cv::Point2f source_points[4];
              cv::Point2f dest_points[4];

              source_points[0] = _lu;
              source_points[1] = _ru;
              source_points[2] = _rd;
              source_points[3] = _ld;

              dest_points[0] = _lu_result;
              dest_points[1] = _ru_result;
              dest_points[2] = _rd_result;
              dest_points[3] = _ld_result;

              cv::Mat dst;
              _transform_matrix = cv::getPerspectiveTransform(source_points, dest_points);
              cv::warpPerspective(_image, dst, _transform_matrix, dst.size());

              return dst;  
            }

    int main( int argc, char** argv )
    {

        Mat image;
        Mat edited;

        image = imread("c:/org.png", CV_LOAD_IMAGE_COLOR);   // Read the file

        namedWindow( "Display window", CV_WINDOW_AUTOSIZE );// Create a window for display.

            Point2f one = (0.0, 0.0);
            Point2f two = (317.0, 0.0);
            Point2f three = (317.0, 240.0);
            Point2f four = (0.0, 240.0);

            Point2f five = (-100.0, 0.0);
            Point2f six = (617.0, 0.0);
            Point2f seven = (317.0, 240.0);
            Point2f eight = (0.0, 240.0);

            OpenWarpPerspective(image,one,two,three,four,five,six,seven,eight,edited);  

        imshow( "Display window", edited );                   // Show our image inside it.

        waitKey(0);                                          // Wait for a keystroke in the window
        return 0;
} 
```

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2013-01-06T06:28:40.327

如果您有三个角点，请使用 Warp Affine 变换。如果您有四个角点，请使用 Warp Perspective 变换。以下是您应该如何使用 Warp Perspective 变换。选择图像的四个角点。然后选择所需矩形的四个对应点。翘曲变换将完成其余的工作。

```
cv::Mat OpenWarpPerspective(const cv::Mat& _image
  , const cv::Point2f& _lu
  , const cv::Point2f& _ru
  , const cv::Point2f& _rd
  , const cv::Point2f& _ld
  , const cv::Point2f& _lu_result
  , const cv::Point2f& _ru_result
  , const cv::Point2f& _rd_result
  , const cv::Point2f& _ld_result
  , cv::Mat& _transform_matrix)
{
  // todo do some checks on input.

  cv::Point2f source_points[4];
  cv::Point2f dest_points[4];

  source_points[0] = _lu;
  source_points[1] = _ru;
  source_points[2] = _rd;
  source_points[3] = _ld;

  dest_points[0] = _lu_result;
  dest_points[1] = _ru_result;
  dest_points[2] = _rd_result;
  dest_points[3] = _ld_result;

  cv::Mat dst;
  _transform_matrix = cv::getPerspectiveTransform(source_points, dest_points);
  cv::warpPerspective(_image, dst, _transform_matrix, cv::Size(_width, _height));

  return dst;  
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2017-07-14T05:28:42.440

以下作品：请更正输入图像上的坐标，我没有得到线索。

```
 #include <opencv2/core/core.hpp>
            #include <opencv2/opencv.hpp>
            //#include "cv.hpp"
            #include <opencv2/highgui/highgui.hpp>
            #include <iostream>

            using namespace cv;
            using namespace std;

            cv::Mat OpenWarpPerspective(const cv::Mat& _image
                , const cv::Point2f& _lu
                , const cv::Point2f& _ru
                , const cv::Point2f& _rd
                , const cv::Point2f& _ld
                , const cv::Point2f& _lu_result
                , const cv::Point2f& _ru_result
                , const cv::Point2f& _rd_result
                , const cv::Point2f& _ld_result
                )
            {
                // todo do some checks on input.

                cv::Point2f source_points[4];
                cv::Point2f dest_points[4];
                cv::Mat _transform_matrix;

                source_points[0] = _lu;
                source_points[1] = _ru;
                source_points[2] = _rd;
                source_points[3] = _ld;

                dest_points[0] = _lu_result;
                dest_points[1] = _ru_result;
                dest_points[2] = _rd_result;
                dest_points[3] = _ld_result;

                cv::Mat dst = _image.clone();
                _transform_matrix = cv::getPerspectiveTransform(source_points, dest_points);
                cv::warpPerspective(_image, dst, _transform_matrix, dst.size());

                return dst;
            }

            int main(int argc, char** argv)
            {

                Mat image;
                Mat edited;

                image = imread("img.png", CV_LOAD_IMAGE_COLOR);   // Read the file   // original image(620x466 pixels)
                imshow("InputImage", image);
                waitKey(0);

                Point2f one = (0.0, 0.0);
                Point2f two = (500.0, 0.0);
                Point2f three = (500.0, 100.0);
                Point2f four = (250.0, 100.0);

                Point2f five = (250.0, 0.0);
                Point2f six = (500.0, 0.0);
                Point2f seven = (500.0, 1000.0);
                Point2f eight = (250.0, 100.0);

                edited= OpenWarpPerspective(image, one, two, three, four, five, six, seven, eight);

                namedWindow("Display window", CV_WINDOW_AUTOSIZE);// Create a window for display.
                imshow("Display window", edited);                   // Show our image inside it.

                waitKey(0);                                          // Wait for a keystroke in the window
                return 0;
            } 
```

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2016-09-08T09:18:14.453

添加 dst 的初始化： Mat dst = _image.clone();

# emacs - 有没有办法像鼠标滚动一样滚动emacs视图？

> ID：14179165
> 
> 赞同：1
> 
> 时间：2013-01-06T04:05:40.200
> 
> 标签：emacs, scroll

如果在 GUI 模式下启动 emacs，右边通常会有一个滚动条。如果我上下拖动滚动条，则光标不会移动，但emacs的视图会根据滚动条的位置发生变化。有没有办法做到这一点，但不拖动滚动条或鼠标滚动？顺便说一句，我知道命令：Ctrl+V，MV，但这并不是我想要的。我想要这样的效果，看起来你点击emacs窗口并上下拖动它，如果我使用Ctrl+v，ctl+n等命令，光标会改变它的位置，这不是我想要的。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-06T08:19:13.670

我相信你想要的是[centered-cursor-mode](http://emacswiki.org/emacs/centered-cursor-mode.el)。无论何时向上或向下滚动，无论是使用一行、向下/向上翻页还是鼠标，光标都会停留在中间。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-06T04:16:47.303

默认情况下，`C-v`调用`scroll-up-command`和`M-v`— `scroll-down-command`。当不带前缀参数调用时，它们会滚动整个屏幕，但是`M-2 C-v`，例如，将滚动`scroll-up`两行。

如果您想要一种更简单的方法来做到这一点，您可以定义自己的命令，这些命令将`scroll-up`使用预定义的参数进行调用，并将它们绑定到您选择的键上。

请注意，只要滚动到足以将光标留在后面，它就会移动。

另一个有用的命令是`recenter-top-bottom`，绑定到`C-l`.

# html - HTML&CSS + Twitter Bootstrap：整页布局或高度 100% - Npx

> ID：14179166
> 
> 赞同：60
> 
> 时间：2013-01-06T04:05:42.987
> 
> 标签：html, css, twitter-bootstrap

我正在尝试进行以下布局：

```
 +-------------------------------------------------+
  |       Header + search (Twitter navbar)          |
  +------------+------------------------------------+
  |            |                                    |
  |            |                                    |
  |Navigation  |         Content column             |
  |            |                                    |
  |            |                                    |
  |            |                                    |
  |            |                                    |
  |            |                                    |
  |            |                                    |
  +------------+------------------------------------+
  |              Footer                             |
  +-------------------------------------------------+ 
```

布局必须占用所有可用的高度和宽度，导航和内容列占用所有可用空间并在溢出时滚动，页脚应固定在底部。

HTML 现在看起来像这样：

```
<!DOCTYPE html>
<html>
  <head>
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
    <title>Bootstrap 101 Template</title>
    <!-- Bootstrap -->
    <link href="css/bootstrap.min.css" rel="stylesheet" media="screen">
    <link href="css/bootstrap-responsive.min.css" rel="stylesheet" media="screen">
    <link href="css/app.css" rel="stylesheet" media="screen">
    <script src="http://code.jquery.com/jquery-latest.js"></script>
    <script src="js/bootstrap.min.js"></script>
    <script src="js/app.js"></script>
  </head>
  <body>
    <div class="container-fluid">   
      <div class="navbar">
        <!-- navbar content -->
      </div>

      <div class="row-fluid columns"> 
        <div class="span2 article-tree">
          <!-- navigation column -->
        </div>
        <div class="span10 content-area">
          <!-- content column -->
        </div>
      </div>

      <div class="footer">
        <!-- footer content -->
      </div>
    </div>
  </body>
</html> 
```

CSS：

```
 body, html, .container-fluid { /// take all available height
  height: 100%;
}

.article-tree {
  color: #DCE6E5;
  background: #2F323B;
}

.content-area {
  overflow: auto;
  height: 100%; /// explicit height to make scrolling work
}

.columns {
  height: 100%; /// columns should take all height
  margin-top: 42px; /// minus header
  margin-bottom: 20px; // minus footer
}

.columns > div {
    height: 100%; // make each column to take all available height
}

.footer {
  background: red;
  height: 20px;
} 
```

理论上它应该可以工作，但是 columns.margin 并没有像我预期的那样工作。我认为它应该使高度 = 100% - magin，但它只是移动容器。

我在 StackOverflow 上搜索并看到了许多问题。所有这些都包括 JavaScript 或位置：绝对和手动定位。恕我直言，它们比解决方案更多，我认为应该有一些更简单、更优雅和跨浏览器的方法来解决这个问题。

那么如何进行上述布局呢？也许 Bootstrap 可以帮助我（我查看了文档，但没有提到这样的案例）？

* * *

## 回答 #1

> 赞同：32
> 
> 时间：2013-01-06T06:15:26.330

我在 Stackoverflow 上找到了一篇文章并实现了您的设计：

[http://jsfiddle.net/bKsad/25/](http://jsfiddle.net/bKsad/25/)

这是原始帖子：[https ://stackoverflow.com/a/5768262/1368423](https://stackoverflow.com/a/5768262/1368423)

那是你要找的吗？

HTML：

```
<div class="container-fluid wrapper">

  <div class="row-fluid columns content"> 

    <div class="span2 article-tree">
      navigation column
    </div>

    <div class="span10 content-area">
      content column 
    </div>
  </div>

  <div class="footer">
     footer content
  </div>
</div> 
```

CSS：

```
html, body {
    height: 100%;
}
.container-fluid {
    margin: 0 auto;
    height: 100%;
    padding: 20px 0;

    -moz-box-sizing: border-box;
    -webkit-box-sizing: border-box;
    box-sizing: border-box;
}

.columns {
    background-color: #C9E6FF;
    height: 100%;   
}

.content-area, .article-tree{
    background: #bada55;
    overflow:auto;
    height: 100%;
}

.footer {
    background: red;
    height: 20px;
} 
```

* * *

## 回答 #2

> 赞同：16
> 
> 时间：2014-06-17T21:48:49.840

我知道现在已经很晚了，但可能会帮助别人！

```
body,html {
  height: 100%;
}

.contentarea {

 /* 
  * replace 160px with the sum of height of all other divs 
  * inc padding, margins etc 
  */
  min-height: calc(100% - 160px); 
} 
```

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2014-09-27T13:55:09.060

如果您使用 Bootstrap 2.2.1，那么也许这就是您正在寻找的。

示例文件 index.html

```
<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
    <title></title>
    <link href="Content/bootstrap.min.css" rel="stylesheet" />
    <link href="Content/Site.css" rel="stylesheet" />
</head>
<body>
    <menu>
        <div class="navbar navbar-default navbar-fixed-top">
            <div class="container">
                <div class="navbar-header">
                    <button type="button" class="navbar-toggle" data-toggle="collapse" data-target=".navbar-collapse">
                        <span class="icon-bar"></span>
                        <span class="icon-bar"></span>
                        <span class="icon-bar"></span>
                    </button>
                    <a class="navbar-brand" href="/">Application name</a>
                </div>
                <div class="navbar-collapse collapse">
                    <ul class="nav navbar-nav">
                        <li><a href="/">Home</a></li>
                        <li><a href="/Home/About">About</a></li>
                        <li><a href="/Home/Contact">Contact</a></li>
                    </ul>
                    <ul class="nav navbar-nav navbar-right">
                        <li><a href="/Account/Register" id="registerLink">Register</a></li>
                        <li><a href="/Account/Login" id="loginLink">Log in</a></li>
                    </ul>

                </div>
            </div>
        </div>
    </menu>

    <nav>
        <div class="col-md-2">
            <a href="#" class="btn btn-block btn-info">Some Menu</a>
            <a href="#" class="btn btn-block btn-info">Some Menu</a>
            <a href="#" class="btn btn-block btn-info">Some Menu</a>
            <a href="#" class="btn btn-block btn-info">Some Menu</a>
        </div>

    </nav>
    <content>
       <div class="col-md-10">

               <h2>About.</h2>
               <h3>Your application description page.</h3>
               <p>Use this area to provide additional information.</p>
               <p>Use this area to provide additional information.</p>
               <p>Use this area to provide additional information.</p>
               <p>Use this area to provide additional information.</p>
               <p>Use this area to provide additional information.</p>
               <p>Use this area to provide additional information.</p>
               <hr />
       </div>
    </content>

    <footer>
        <div class="navbar navbar-default navbar-fixed-bottom">
            <div class="container" style="font-size: .8em">
                <p class="navbar-text">
                    &copy; Some info
                </p>
            </div>
        </div>
    </footer>

</body>
</html>
```

文件内容/Site.css

```
body {
    padding-bottom: 70px;
    padding-top: 70px;
}
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-01-06T06:23:08.623

这是你想要的？这是一个小提琴[演示](http://jsfiddle.net/FzVtx/4/)。

布局基于百分比，颜色是为了清晰。如果内容栏溢出，应该会出现一个滚动条。

```
body, html, .container-fluid {
  height: 100%;
}

.navbar {
  width:100%;
  background:yellow;
}

.article-tree {
  height:100%;
  width: 25%;
  float:left;
  background: pink;
}

.content-area {
  overflow: auto;
  height: 100%;
  background:orange;
}

.footer {
   background: red;
   width:100%;
   height: 20px;
} 
```

# x3dom - 如何在 x3dom 形状上放置渐变？

> ID：14179167
> 
> 赞同：1
> 
> 时间：2013-01-06T04:05:44.013
> 
> 标签：x3dom

这是一个简单的问题。如何在 x3dom 形状上放置渐变？我有这个：

```
<shape>
    <appearance>
        <material diffuseColor='green'></material>
    </appearance>
    <box height="1" />
</shape> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-08T23:28:45.703

不幸的是，在大多数原始形状上它是不可能的，我在 x3d 列表 [http://www.web3d.org/x3d/publiclists/x3dpublic_list_archives/0504/msg00104.html上找到了这个线程](http://www.web3d.org/x3d/publiclists/x3dpublic_list_archives/0504/msg00104.html)

这是你如何在圆柱体上做到这一点注意像素纹理，那就是肉和土豆：

```
<X3D>
<Scene>
<NavigationInfo headlight='FALSE' type='"EXAMINE" "ANY"' />
<DirectionalLight ambientIntensity='0.5' direction='1 -0.5 -1' />
<Viewpoint DEF='VP1' position='0 0 10' orientation='0 1 0 0' fieldOfView='0.785398'      description = "Front" />
 <Transform translation='0 0 0'> 
  <Shape>
    <Appearance>
      <Material/>
      <PixelTexture image='1 2 3 0xFF0000 0x0000FF' repeatS='FALSE' repeatT='FALSE' />
    </Appearance>
    <Cylinder height='4' />
  </Shape>
</Transform>
</Scene>
</X3D> 
```

# android - 当用户关闭应用程序时，是否有让 MyService 不会被破坏的方法？

> ID：14179170
> 
> 赞同：0
> 
> 时间：2013-01-06T04:06:12.117
> 
> 标签：android, service, media-player, android-mediaplayer

好吧，可以说我有一个可以播放您的音乐的服务（例如 Google 音乐），我的服务运行良好，但是如果用户退出应用程序，按下后退按钮或将其从最近使用中删除，我的服务调用 onDestroy 等待约 5 秒并再次调用 onCreate .

所以问题是，我怎样才能让它保持活动状态，直到用户用按钮关闭它？（就像 Gogle Music 一样）

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-06T04:18:26.103

您可以使用前台启动您的服务`Service.startForeground`

# wpf - WPF - 将 VisualBrush 插入样式时出错？

> ID：14179172
> 
> 赞同：1
> 
> 时间：2013-01-06T04:06:19.683
> 
> 标签：wpf, path, styles, resourcedictionary, visualbrush

我需要将所有路径保存在画布中，以便轻松检索它们。我发现它适用于`VisualBrush`. 当我尝试检索`VisuahBrush`并放入`Style`s时，它有错误：

该类型的对象`System.Windows.Media.VisualBrush`不能应用于需要该类型的属性`Systems.Windows.Style`。

我还能如何将所有路径保存在画布中并且仍然可以在`Style`s 中检索？

任何想法都会有很大帮助，谢谢！

```
<VisualBrush x:Key="myVisualBrush">
    <VisualBrush.Visual>
        <Canvas>
            <Path Fill="#FF231F20" Stretch="Fill" Width="12.69" Height="14.477" Canvas.Left="652.196" Canvas.Top="88.61" Data="F1M617.2051,52.7275C616.7281,52.4525,616.3391,52.6775,616.3391,53.2275L616.3391,66.4695C616.3391,67.0195,616.7281,67.2445,617.2051,66.9695L628.6721,60.3485C629.1481,60.0735,629.1481,59.6235,628.6721,59.3485z"/>
        </Canvas>
    </VisualBrush.Visual>
</VisualBrush>

<Style x:Key="myVisualStyle" BasedOn="{StaticResource myVisualBrush}" TargetType="{x:Type TextBox}">
    <!-- Styles -->
</Style> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-06T04:33:34.157

您的 VisualBrush 旨在分配给接受画笔的对象，例如背景而不是您尝试的样式。我建议你做这样的事情。（*如果你需要能够挑选和选择你的画笔，**这个例子将为`VisualBrush`每个人分配相同的东西，那么我建议你添加回你的样式并将样式单独分配给你的文本框的`TextBox``x:Key`*）

```
<Window x:Class="WpfApplication4.MainWindow"
        xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
        xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
        Title="MainWindow" Height="400" Width="400">
    <Window.Resources>
        <VisualBrush x:Key="myVisualBrush">
            <VisualBrush.Visual>
                <Canvas>
                    <Path Fill="#FF231F20" Stretch="Fill" Width="12.69" Height="14.477" Canvas.Left="652.196" Canvas.Top="88.61" Data="F1M617.2051,52.7275C616.7281,52.4525,616.3391,52.6775,616.3391,53.2275L616.3391,66.4695C616.3391,67.0195,616.7281,67.2445,617.2051,66.9695L628.6721,60.3485C629.1481,60.0735,629.1481,59.6235,628.6721,59.3485z"/>
                </Canvas>
            </VisualBrush.Visual>
        </VisualBrush>

        <Style  TargetType="{x:Type TextBox}">
            <Setter Property="Background" Value="{StaticResource myVisualBrush}"/>
        </Style>
        <Style x:Key="myPathStyle" TargetType="{x:Type Path}">
            <Setter Property="Fill" Value="{StaticResource myVisualBrush}"/>
        </Style>
    </Window.Resources>
    <Grid>
        <TextBox  x:Name="MyTextBox" />
        <Path Style="{StaticResource myPathStyle}"  x:Name="myPath" >
            <Path.Data>
                <RectangleGeometry Rect="100,100,100,100"/>
            </Path.Data>        
        </Path>
    </Grid>
</Window> 
```

# c# - 静态类中的 HTTP 上下文

> ID：14179175
> 
> 赞同：0
> 
> 时间：2013-01-06T04:06:51.547
> 
> 标签：c#, asp.net, httpcontext

据我所知，静态类的静态方法在 Web 应用程序中共享给所有用户。
HttpContext.Current.Session["Key"] 如何在静态类中工作。
由于会话是为每个用户创建的。
下面的示例返回会话中的用户名

```
 using System.Web;

 namespace WebApplication1 
 {
    public static class UserInfo
    {
        public static string showName()
        { 
            return HttpContext.Current.Session["UserName"] ?? "";
        }
     }
  } 
```

我知道这可能已经回答了，但我找不到答案。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-06T04:26:41.153

它会表现得很好。是的，该类可能是静态的，但它将访问不同的内存部分，并且不应从此处产生冲突。

在内部，我相信 Session 的工作方式与 Cache 完全相同，只是 Session 使用唯一的 Key（我相信是当前会话 Id）来存储和检索字典中的数据。所以当你存储 Session["Foo"]= "Bar" 真的是在做 Session[session_id+"Foo"] = "Bar"

# 更新

我的假设是准证实的：

比较状态提供程序 默认情况下，ASP.NET 应用程序将会话状态存储在工作进程的内存中，特别是在 Cache 对象的私有槽中。选择INPROC模式时，会话状态存储在缓存对象内的插槽中。此插槽被标记为私有并且不能以编程方式访问。换句话说，如果您枚举 ASP.NET 数据缓存中的所有项目，则不会返回看起来像给定会话状态的对象。Cache 对象提供了两种类型的槽——私有的和公共的。允许程序员添加和操作公共插槽；系统，特别是在 system.web 程序集中定义的类，为自己保留私有插槽。每个活动会话的状态在缓存中占用一个私有槽。插槽以会话 ID 命名，值是名为 SessionStateItem 的内部未记录类的实例。InProc 状态提供程序获取会话 ID 并检索缓存中的相应元素。然后将 SessionStateItem 对象的内容注入到 HttpSessionState 字典对象中，并由应用程序通过 Session 属性访问。请注意，ASP.NET 1.0 中的一个错误使 Cache 对象的私有插槽可以编程方式枚举。如果您在 ASP.NET 1.0 下运行以下代码，您将能够枚举与包含每个当前活动会话的状态的对象相对应的项。然后将 SessionStateItem 对象的内容注入到 HttpSessionState 字典对象中，并由应用程序通过 Session 属性访问。请注意，ASP.NET 1.0 中的一个错误使 Cache 对象的私有插槽可以编程方式枚举。如果您在 ASP.NET 1.0 下运行以下代码，您将能够枚举与包含每个当前活动会话的状态的对象相对应的项。然后将 SessionStateItem 对象的内容注入到 HttpSessionState 字典对象中，并由应用程序通过 Session 属性访问。请注意，ASP.NET 1.0 中的一个错误使 Cache 对象的私有插槽可以编程方式枚举。如果您在 ASP.NET 1.0 下运行以下代码，您将能够枚举与包含每个当前活动会话的状态的对象相对应的项。

来源：http: [//msdn.microsoft.com/en-us/library/aa479041.aspx](http://msdn.microsoft.com/en-us/library/aa479041.aspx)

（为格式道歉。从手机发布）

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-06T04:43:55.880

我认为您将静态属性与静态字段混淆了。神奇的是它`HttpContext.Current`是一个静态属性，它返回的实例`HttpContext`不是来自普通静态字段，而是来自（松散地）称为执行上下文的东西，它允许 ASP.NET 查看您的特定线程当前属于许多并发请求中的哪一个为了`HttpContext`为您返回正确的实例。

该特定实例有一`Session`本专为您的用户准备的字典。

# java - 将 json 结果传递给 sencha touch

> ID：14179178
> 
> 赞同：-1
> 
> 时间：2013-01-06T04:07:35.900
> 
> 标签：java, json, sencha-touch, restful-architecture

我是煎茶触摸的新手。我需要通过使用 RESTful 架构来传递 json 数据。但我不知道如何启动它。有人能给我举个例子吗？顺便说一句，我正在使用 JACKSON 库。

这是我的 java 文件 - jsonTest.java

```
 package jsonTest;

import java.io.File;
import java.io.IOException;
import java.util.Map;

import java.util.ArrayList;
import java.util.List;
import java.util.StringTokenizer;

import org.codehaus.jackson.JsonEncoding;
import org.codehaus.jackson.JsonFactory;
import org.codehaus.jackson.JsonGenerationException;
import org.codehaus.jackson.JsonGenerator;
import org.codehaus.jackson.map.JsonMappingException;
import org.codehaus.jackson.map.ObjectMapper;

import com.sun.xml.internal.bind.api.TypeReference;

public class jsonTest {

      private static List<String> countries;
        private static List<String> tags;

         public static void main(String[] args) {

            String data = "Afghanistan, Albania, Algeria, Andorra, Angola, Antigua & Deps,"+ 
                    "United Kingdom,United States,Uruguay,Uzbekistan,Vanuatu,Vatican City,Venezuela,Vietnam,Yemen,Zambia,Zimbabwe";

            countries = new ArrayList<String>();
            StringTokenizer st = new StringTokenizer(data, ",");

            //Parse the country CSV list and set as Array
            while(st.hasMoreTokens()) {
                countries.add(st.nextToken().trim());
            }

            String strTags = "SharePoint, Spring, Struts, Java, JQuery, ASP, PHP, JavaScript, MySQL, ASP, .NET";
            tags = new ArrayList<String>();
            StringTokenizer st2 = new StringTokenizer(strTags, ",");

            //Parse the tags CSV list and set as Array
            while(st2.hasMoreTokens()) {
                tags.add(st2.nextToken().trim());
            }

        }

        public List<String> getCountryList(String query) {

            String country = null;
            query = query.toLowerCase();
            List<String> matched = new ArrayList<String>();
            for(int i=0; i < countries.size(); i++) {
                country = countries.get(i).toLowerCase();
                if(country.startsWith(query)) {
                    matched.add(countries.get(i));
                }
            }
            return matched;
        }

        public List<String> getTechList(String query) {
            String country = null;
            query = query.toLowerCase();
            List<String> matched = new ArrayList<String>();
            for(int i=0; i < tags.size(); i++) {
                country = tags.get(i).toLowerCase();
                if(country.startsWith(query)) {
                    matched.add(tags.get(i));
                }
            }
            return matched;
        }

} 
```

如何将结果显示到我的煎茶触摸项目？通过使用列表或面板？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-06T04:17:43.317

我建议使用[JAX-RS](http://en.wikipedia.org/wiki/Java_API_for_RESTful_Web_Services)来开发 Web 服务。具体来说，正如我与 Jersey 合作的那样，它支持 POJO 映射，即您的 Web 服务可以返回一个 POJO（普通旧 Java 对象），Jersey 可以将其隐式转换为 JSON。

这是 mkyong 网站上的一个工作示例，用于[POJO](http://www.mkyong.com/java/how-to-convert-java-object-to-from-json-jackson/) Mapping 和[JSON with Jersey](http://www.mkyong.com/webservices/jax-rs/json-example-with-jersey-jackson/)。

**PS**：我没有使用 sencha Touch 的经验，因此对此无能为力。

# licensing - 软许可证检查

> ID：14179179
> 
> 赞同：0
> 
> 时间：2013-01-06T04:07:40.820
> 
> 标签：licensing, autohotkey

嗨，我正在尝试向我正在开发的脚本添加软许可证，我不想让任何事情变得复杂，也不必万无一失。过去我使用了一个列表，我也添加了捐赠者姓名，但在这种情况下它不起作用，因为该软件不会在任何地方显示登录名。我以为我可以获取 Windows 登录或主板信息任何想法？

```
List=userxys,user123,etc
Loop, Parse, List, `,
GroupAdd, DONATORS, %A_LoopField% ahk_class QDPKGamesSystems
Return

Freeware:
IfWinExist, ahk_group DONATORS
    {
        SetTimer, Freeware, Off
        Return
    }
Else
    {
        MsgBox ,, Script123, Script123 has closed `if you find Script123 useful please consider making a donation. Find details Menu>Donate. , 30
        ExitApp
    } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-06T08:08:03.700

您可以使用注册机。它们是一种糟糕的安全方法，因为它们可以（有点容易）被逆向工程（例如，99% 的“许可”软件）。但是，如果您没有很多用户，这不是问题。

```
Gui, 2:Add, Edit, w300 vName2, name
Gui, 2:Add, Edit, w300 vCode2, code
Gui, 2:Add, Button, w300 gSubmit2, Submit
Gui, 2:Add, Button, w300 gTestCode, Test Code ; Remove this button in production

; Run this when they press the "Enter Donor Key" button elsewhere
Gui, 2:Show,, Enter Donor Key
return

TestCode: ; Remove this label in production
Gui, 2:submit, nohide
GuiControl,, Code2, % GetCodeFromName(name2)
return

GetCodeFromName(name) {
    len := StrLen(name)
    sum := 0
    loop %len%
    {
        sum += Asc(SubStr(name, A_Index, 1))
    }
    Random,, %sum%

    outs := ""
    loop 15
    {
        Random, rand, 1, 26
        outs .= Chr(64 + rand)
    }
    return outs
}

CheckCode(name, code) {
    return GetCodeFromName(name) = code
}

Submit2:
Gui, 2:Submit
if CheckCode(name2, code2) 
    MsgBox Rodger that, captain!
else
    MsgBox Invalid
return

2GuiClose:
ExitApp 
```

您应该将自己的算法放入 中`GetCodeFromName`，但这允许您将 ID/代码对传递给您的捐赠者。它可能是他们的电子邮件地址、名字等。它区分大小写，但将 StrLower 放在那里可以解决这个问题。

算法描述（以防它有助于修改它）：名称的字符代码加在一起产生一个很大的数字。该数字用作随机数生成器的种子。这意味着相同的名称给出相同的种子，即给出相同的随机数序列。根据种子，选择 15 个大写字母（ASCII 为 65 到 90）。那是你的代码。相同的名称-> 相同的代码。

# jsf - JSF 使用 p:dialog 删除 DataTable 上的实体

> ID：14179180
> 
> 赞同：0
> 
> 时间：2013-01-06T04:07:44.680
> 
> 标签：jsf, jsf-2, primefaces

我目前正在处理 CRUD 表单，现在正在处理应该是最简单的最后一部分 - 删除。但我想在用户进行实际删除之前显示一个对话框。这就是我遇到 Primefaces 3.4 问题的地方。由于某种原因，我无法在 p:dialog 内的按钮中设置操作，ajax=false 失败。所以这就是我所做的：

```
<p:column headerText="#{msgs['action.delete']}"
                    styleClass="a-center">
    <p:commandButton icon="ui-icon-trash"
        oncomplete="confirmation.show()">
        <f:setPropertyActionListener
            target="#{marketingCodeBean.marketingCode}" value="#{code}"></f:setPropertyActionListener>
    </p:commandButton>
</p:column> 
```

对话框：

```
<p:confirmDialog id="confirmDialog"
                message="#{msgs['message.marketingCode.confirmDelete']}"
                header="#{msgs['common.confirmDelete']}" severity="alert"
                widgetVar="confirmation">
    <p:commandButton id="confirm" value="#{msgs['common.yes']}"
        oncomplete="confirmation.hide()" update=":form:mktgCodeTable"
        actionListener="#{marketingCodeBean.remove}" />
    <p:commandButton id="decline" value="#{msgs['common.no']}"
        onclick="confirmation.hide()" type="button" />
</p:confirmDialog> 
```

我知道 actionListener 不应该用于业务操作，但我想不出给定数据表和对话框的解决方法。关于如何在 p:confirmDialog 中的 p:commandButton 中设置 ajax=false 的任何想法？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-06T12:31:11.983

渲染后，对话框的 HTML 输出由一些 onload JavaScript 重新定位到 HTML 末尾，`<body>`以实现最佳的跨浏览器兼容覆盖/定位。但是，这意味着如果将它放在 a`<form>`中，它将不再位于 a 中`<form>`，并且同步（非 ajax）请求将不再起作用。这不完全是一个`action`vs`actionListener`问题。

（`<p:dialog>`并且`<p:confirmDialog>`您似乎实际上正在使用）应该有自己的`<h:form>`组件。

```
<h:form>
    <p:dataTable>
        ...
    </p:dataTable>
</h:form>
...
<p:confirmDialog>
    <h:form>
        ...
    </h:form>
</p:confirmDialog> 
```

# google-app-engine - 上传 Google appengine 应用程序时出现错误 400

> ID：14179189
> 
> 赞同：1
> 
> 时间：2013-01-06T04:09:08.667
> 
> 标签：google-app-engine, eclipse-plugin

尝试从 Eclipse 中部署示例应用程序时，我不断收到以下消息。我试图发布我的应用程序设置的图像，但作为一个新手它不会让我。

------------ 部署前端 ------------ com.google.appengine.tools.admin.HttpIoException：错误发布到 URL：[https ://appengine.google .com/api/appversion/getresourcelimits?app_id=http%3A%2F%2Fgdbguesttest.appspot.com%2F&version=1&](https://appengine.google.com/api/appversion/getresourcelimits?app_id=http%3A%2F%2Fgdbguesttest.appspot.com%2F&version=1&) 400 错误请求

这是应用程序设置的复制和粘贴： 应用程序标识符别名：gdbguesttest.appspot.com 6 到 30 个字符。提供替代 URL 以通过 appspot.com 访问您的应用程序。它可用于为您的应用程序启用 Channel、XMPP、Email 和 SSL 访问。 [http://gdbguesttest.appspot.com](http://gdbguesttest.appspot.com) 数据存储复制选项：高复制 使用高度复制的数据存储，可同时在多个位置同步复制数据。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-06T15:02:10.323

OK found my problem. You only should put your app ID, not the entire path.

So in my case.

gdbguesttest

NOT

http://gdbguesttest.appspot.com

# magento - Magento 一页结账模式

> ID：14179190
> 
> 赞同：0
> 
> 时间：2013-01-06T04:09:27.300
> 
> 标签：magento

我正在为客户编写一种新的运输方式；我的运输计算很顺利，它们出现在“运输方法”步骤中 - 但是，我想：

a) 在用户点击第一个（计费）选项卡中的继续按钮触发的 billing.save() 后，强制打开“运送信息”选项卡，即使他们选择运送到帐单地址；和

b) 在运输信息选项卡中添加“已收货”、“运输保证”和“尾卡车取货”选项 - 重新计算运输报价时将考虑这些选项。

在 b) 部分中，我假设我使用 /layout 中的 xml 配置文件覆盖 shipping.phtml 模板，然后在 collectRates() 方法中查找那些添加的帖子字段。

提前致谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-08T15:23:21.380

至于 a) 部分，您将需要覆盖控制器`Mage_Checkout_OnepageController`。为此，请创建您自己的模块（我假设您知道如何执行此操作），并且在 app/code/local/YourModule/etc/config.xml 中您应该有这部分：

```
<config>
...
    <frontend>
        <routers>
            <checkout>
                <args>
                    <modules>
                        <YourModule_Checkout before="Mage_Checkout">YourModule_Checkout</YourModule_Checkout>
                    </modules>
                </args>
            </checkout>
        </routers>
    </frontend>
</config> 
```

然后在 app/code/local/YourModule/controllers/OnepageController.php 中您要覆盖该行为，因此当您单击保存计费按钮时，您将始终登陆运输页面。

```
include_once("Mage/Checkout/controllers/OnepageController.php");

class YourModule_Checkout_OnepageController extends Mage_Checkout_OnepageController
{
  public function saveBillingAction()
  {
    if ($this->_expireAjax()) {
        return;
    }
    if ($this->getRequest()->isPost()) {
        $data = $this->getRequest()->getPost('billing', array());
        $customerAddressId = $this->getRequest()->getPost('billing_address_id', false);

        if (isset($data['email'])) {
            $data['email'] = trim($data['email']);
        }
        $result = $this->getOnepage()->saveBilling($data, $customerAddressId);

        if (!isset($result['error'])) {
            /* check quote for virtual */
            if ($this->getOnepage()->getQuote()->isVirtual()) {
                $result['goto_section'] = 'payment';
                $result['update_section'] = array(
                    'name' => 'payment-method',
                    'html' => $this->_getPaymentMethodsHtml()
                );
            } else { // Removed elseif block here which usually skips over shipping if you selected to use the same address as in billing
                $result['goto_section'] = 'shipping';
            }
        }

        $this->getResponse()->setBody(Mage::helper('core')->jsonEncode($result));
    }
  }
} 
```

然后对于 b) 部分，您有两个选择。正如您所指出的，您使用 XML 布局系统为 shipping.phtml 设置不同的模板：

```
<checkout_onepage_index>
   <reference name="checkout.onepage.shipping">
      <action method="setTemplate">
         <new>my_shipping.phtml</new>
      </action>
   </reference>
</checkout_onepage_index> 
```

甚至更简单，您可以使用自定义设计文件夹覆盖 shipping.phtml 模板。为了评估您的自定义数据，模型`Mage_Checkout_Model_Type_Onepage`会处理方法中的数据`saveShipping()`，所以我想这将是寻找实现您的自定义逻辑的好点。

# php - jQuery 检索 id 并修改其文本

> ID：14179195
> 
> 赞同：-4
> 
> 时间：2013-01-06T04:10:25.243
> 
> 标签：php, javascript, jquery

我有一个由 php 生成的表并实现了一个模式以允许用户更改由变量生成的文本`$l_id`；我有一个显示模态 div 部分的链接类“eloc”。我拦截了表单提交 ID“renameLocation”并处理输入并禁用默认提交操作。我想修改显示用户重命名的新文本。

我有这个通过迭代数组重复的php代码，迭代ID是`$l`

```
$id_l="\"location_".$l."\"";
echo "<table class=\"add\" border=\"1px\" width=\"100%\">";
echo "<tr class=\"header\"><td class=\"stretch\"><a class=\"eloc\" rel=\"leanModal\" href=\"#modal_location\"><img src=\"images/edit-icon.png\" alt=\"Location\"></a></td><td id=\"".$id_l."\" class=\"location\" colspan=\"6\">Location: ".$row['location']."</td></tr>"; 
```

然后我有一个div：

```
<div id="modal_location" class="modal_prompt">      
    <div class="modal_prompt-ct">           
        <div class="modal_prompt-header">
            <h2>Rename Location</h2>
            <a class="modal_close" href="#"></a>            
        </div>

        <form id="renameLocation">
            <div class="txt-dpy">
                <span id="mlocation_name"></span>
            </div>
            <div class="txt-fld">
                <label for="">Change to</label> 
                <input id="newLocation" name="" type="text" />
            </div>
            <div class="btn-fld">
                <button type="submit">Save &raquo;</button>
            </div>          
        </form>         
    </div>  
</div> 
```

如何修改生成的 $l_id 的文本？

```
$("#renameLocation").submit(function(e) 
{
    $("#lean_overlay").fadeOut(200);
    $("#modal_location").css({"display" : "none" })
    // How to modify the text of "$l_id"?
    return false; //do not submit form the normal way        
}); 
```

非常感谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-06T04:17:34.417

你可以这样试试——

```
$("#<?php echo $l_id?>").html("Your updated text here"); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-06T04:28:32.707

问题模棱两可。听起来您要编辑的文本不止一个。

您需要一种方法来告诉 JS 更新哪个位置，因此添加一个全局变量。这不是通常的做法，但应该没问题。

向元素添加数据

```
$id_l="\"location_".$l."\"";
echo "<table class=\"add\" border=\"1px\" width=\"100%\">";
echo "<tr class=\"header\"><td class=\"stretch\"><a class=\"eloc\" rel=\"leanModal\" href=\"#modal_location\" 
    data-location=\"".$l."\"><img src=\"images/edit-icon.png\" alt=\"Location\"></a></td><td id=\"".$id_l."\" class=\"location\" colspan=\"6\">Location: ".$row['location']."</td></tr>"; 
```

将此设置在您的 js 的顶部

```
var selectedlocation=0; 
```

绑定单击编辑链接以设置选定位置

```
$('.eloc').on('click', function(){
    selectedlocation=$(this).data('location');
}); 
```

在代码中使用 var

```
$("#renameLocation").submit(function(e) 
{
    var location=$(this).data('location');
    $("#lean_overlay").fadeOut(200);
    $("#modal_location").css({"display" : "none" })
    $('#location_'+selectedlocation).text();
    e.preventDefault(); //return false; //do not submit form the normal way        
}); 
```

**这是另一种方式**

忘记全局变量。

添加隐藏的表单域

```
<form id="renameLocation">
    <input type="hidden" name="location" value="" id="renameLocation_location"/> 
```

把价值放进去

```
$('.eloc').on('click', function(){
    $('#renameLocation_location').val($(this).data('location'));
}); 
```

并使用它。

```
$('#location_'+ $('#renameLocation_location').val() ).text(); 
```

您提供它的方式，模式完全独立于您需要在某处设置以实现您想要的东西的链接。

# stata - 如何解释 AREG 输出中的常数？

> ID：14179197
> 
> 赞同：4
> 
> 时间：2013-01-06T04:10:36.027
> 
> 标签：stata

我在`Stata`, using中运行具有固定效果的回归`areg`，我刚刚意识到它的报告是一个常数项。据称，`areg`所做的是对数据执行“内部”转换，然后在转换后的数据上运行 OLS。但是，原始模型的常数项被“内部”变换破坏了。

因此，报告的常数`areg`是什么意思？是编程错误吗？我不这么认为，因为`areg`不允许 -nocons- 选项，而且似乎原因与常量的含义有关。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-07T19:22:58.723

使用 areg（以及带有 fe 选项的 xtreg），截距是拟合的，因此 y-bar 减去 x-bar 乘以 beta-hat 等于 0。换句话说，Stata 计算一个截距，使以自变量的平均值计算的预测等于因变量的平均值。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2017-05-31T06:38:44.680

正如 Stata 手册中所说： areg 报告的截距值得一些解释，因为给定 k 互斥且详尽的假人，它是任意的。areg 通过选择截距来识别模型，该截距使以自变量的平均值计算的预测等于因变量的平均值：y = xb。

areg 确实给出了与使用回归不同的常数。areg 有点棘手，因为它基于（吸收的）否的假设。组的数量不会随着样本量的增加而增加。

# asp.net-mvc-3 - 无法通过“application/json”正确传递参数

> ID：14179207
> 
> 赞同：1
> 
> 时间：2013-01-06T04:12:02.647
> 
> 标签：asp.net-mvc-3, jquery

我整个早上都试图找到一种解决方法（浏览了 SO 中的每个相关帖子并自己做了几个实验），但失败了。

这是服务器代码：

控制器：

```
[HttpGet]
    public JsonResult Test(Entity e)
    {
        return Json(new { success = true }, JsonRequestBehavior.AllowGet);
    } 
```

实体：

```
public class Entity
{
    public string A { set; get; }

    public string B { set; get; }
} 
```

使用客户端代码：

```
var e = {
        A: "1",
        B: "2"
    };

    $.ajax({
        url: "/Home/Test",
        contentType: "application/json; charset=utf-8",
        dataType: "json",
        data: JSON.stringify(e)
        //                data: e
    }); 
```

我得到： ![不精细](../Images/02f42c0ab902df624eb140268610a3bd.png)

使用客户端代码：

```
var e = {
        A: "1",
        B: "2"
    };

    $.ajax({
        url: "/Home/Test",
        //contentType: "application/json; charset=utf-8",
        dataType: "json",
        //data: JSON.stringify(e)
        data: e
    }); 
```

我得到： ![美好的](../Images/da12895620b01ca00df2b0d0520e4013.png)

希望能找到答案，因为 application/json 更有用

**编辑**

**当我将协议更改为POST**时，可以正确传递参数。这是新问题：为什么不**GET**？因为转换后的请求查询字符串不符合 mvc3 的需要？？

**编辑2**

[http://forums.asp.net/t/1766534.aspx/1](http://forums.asp.net/t/1766534.aspx/1)

似乎所有问题都在**GET**方法上。**GET**不应该传递复杂的参数？？如果你是restFUL的粉丝，那就太奇怪了

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-06T04:30:25.163

尝试指定请求类型（尽管它默认为 GET）：

```
var e = {
            A: "1",
            B: "2"
        };

$.ajax({
            type: "GET",
            url: "/Home/Test",
            contentType: "application/json;charset=utf-8",
            dataType: "json",
            data: JSON.stringify(e)
}); 
```

或者，尝试使用请求并使用属性`POST`装饰`JsonResult`操作方法：`[HttpPost]`

```
[HttpPost]
public JsonResult Test(Entity e)
{
     return Json(new { success = true }, JsonRequestBehavior.AllowGet);
} 
```

然后

```
$.ajax({
            type: "POST",
            url: "/Home/Test",
            contentType: "application/json;charset=utf-8",
            dataType: "json",
            data: JSON.stringify(e)
      }); 
```

# javascript - 需要登录才能进行写访问的后端即服务？

> ID：14179208
> 
> 赞同：1
> 
> 时间：2013-01-06T04:12:04.653
> 
> 标签：javascript, parse-platform, single-page-application

我正在尝试编写一个 javascript 单页应用程序，允许用户登录，然后在登录后创建/修改数据库中的记录。如果可能的话，我想避免使用自己的服务器端脚本，而是使用 Parse.com、Kinvey.com 或 Cloudmine.me 之类的东西。

我的问题是这些服务具有用户登录能力，但使用 API 密钥来确定您的应用程序是否具有写入权限。一旦您的用户登录，他们似乎不会让您拥有写访问权限。我能想到的唯一方法是将写访问 API 密钥存储在用户的用户数据中，所以我会让用户登录，获取隐藏的 API 密钥，然后将应用程序的 API 密钥更改为使用该密钥，这样他们就有了写访问权限。显然这不是很安全，因为一旦通过网络发送 API 密钥，即使我们删除了他们的帐户或他们更改了密码，该用户也将具有写入权限。

也许我会以错误的方式解决这个问题，所以请随时告诉我。希望这是有道理的。谢谢！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-06T07:25:34.263

您应该能够使用以下命令限制对一组用户的访问：http `Parse.ACL`: [//www.parse.com/docs/js/symbols/Parse.ACL.html](http://www.parse.com/docs/js/symbols/Parse.ACL.html)

如果您想在每个用户的基础上控制访问，那么您将必须在用户对象上维护一个自定义属性。然后您可以检查`BeforeSaveRequest()`函数中的自定义属性并确定用户是否具有写入权限： http: [//www.parse.com/docs/js/symbols/Parse.Cloud.BeforeSaveRequest.html](http://www.parse.com/docs/js/symbols/Parse.Cloud.BeforeSaveRequest.html)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-07T18:49:53.593

默认情况下，大多数 BaaS 提供商应该提供集合级别的安全性，有些甚至通过 ACL（访问控制列表）提供每个条目的安全性。

例如，Kinvey 在集合级别的安全性上有几个变化：http: [//devcenter.kinvey.com/html5/guides/security#Collectionlevelpermissions](http://devcenter.kinvey.com/html5/guides/security#Collectionlevelpermissions)

make 它的默认安全级别`Shared`使用户有权读取集合中的所有内容，但只能写入他们自己的项目。您可能还想使用`Private`安全级别来使其只能读取和写入自己的项目。

如果您想对安全性进行更细粒度的控制，您可以利用入门级权限： [http ://devcenter.kinvey.com/html5/guides/security#Entitylevelpermissions](http://devcenter.kinvey.com/html5/guides/security#Entitylevelpermissions)

使用入门级权限，您可以为您管理的特定用户或用户组授予细粒度访问权限。您甚至可以确定用户对您的条目（读取或写入）的安全级别。如果您需要更好地控制，您可以完全访问使用业务逻辑编写自己的安全性。

全面披露 - 我是 Kinvey 的一名工程师。

# php - MySql 连接错误

> ID：14179211
> 
> 赞同：-1
> 
> 时间：2013-01-06T04:12:56.867
> 
> 标签：php, mysql, sql

我遇到了问题

```
<?php
//create_cat.php
include 'connect.php';
include 'header.php';

$sql = "SELECT
            topic_id,
            topic_subject,
            topic_cat
        FROM
            topics
        WHERE
            topics.topic_id = " . mysql_real_escape_string($_GET['id']);

$result = mysql_query($sql);
$row = mysql_fetch_assoc($result);

echo '<a href="index.php">Nexus</a> > <a href="category.php?id=' . $row['topic_cat'] . '">Category will go here.</a> > <a href="topic.php?id=' . $row['topic_id'] . '">' . $row['topic_subject'] . '</a><br>';

if(!$result)
{
    echo 'The topic could not be displayed, please try again later.';
}
else
{
    if(mysql_num_rows($result) == 0)
    {
        echo 'This topic doesn&prime;t exist.';
    }
    else
    {

        {
            //display post data
            echo '<table class="topic">
                    <tr>
                        <th colspan="2">' . $row['topic_subject'] . '</th>
                    </tr>';

            //fetch the posts from the database
            $posts_sql = "SELECT
                        posts.post_topic,
                        posts.post_content,
                        posts.post_date,
                        posts.post_by,
                        posts.post_id,
                        users.user_id,
                        users.user_name,
                        users.user_title,
                    FROM
                        posts
                    LEFT JOIN
                        users
                    ON
                        posts.post_by = users.user_id
                    WHERE
                        posts.post_topic = " . mysql_real_escape_string($_GET['id']);

            $posts_result = mysql_query($posts_sql);

            if(!$posts_result)
            {
                echo '<tr><td>The posts could not be displayed, please try again later.</tr></td></table>';
            }
            else
            {
                while($posts_row = mysql_fetch_assoc($posts_result))
                {
                    echo '<tr class="topic-post">

                            <td class="user-post"><div id="user">
                                <b>' . $posts_row['user_name'] . '</b><br/>' . $posts_row['user_title'] . '</div><br/>' . date('m-d-Y h:ia', strtotime($posts_row['post_date'])) . '</td>
                            <td class="post-content">
                            <a name="postid=' . $posts_row['post_id'] . '"></a>
                            ' . htmlentities(stripslashes($posts_row['post_content'])) . '</td>
                          </tr>';
                }
            }

            if(!$_SESSION['signed_in'])
            {
                echo '<tr><td colspan=2>You must be <a href="signin.php">signed in</a> to reply. You can also <a href="signup.php">sign up</a> for an account.';
            }
            else
            {
                //show reply box
                echo '<tr><td colspan="2"><h2>Reply:</h2><br />
                    <form method="post" action="reply.php?id=' . $row['topic_id'] . '">
                        <textarea name="reply-content"></textarea><br /><br />
                        <input id="button" type="submit" value="Submit reply" />
                    </form></td></tr>';
            }

            //finish the table
            echo '</table>';
        }
    }
}

include 'footer.php';
?> 
```

它说

> 您的 SQL 语法有错误；检查与您的 MySQL 服务器版本相对应的手册，以在第 10 行的“FROM posts LEFT JOIN users ON posts.post_by = u”附近使用正确的语法

在底部（我添加了一个 echo mysql_error(); 在底部）。这是相当重要的，因为它是其他人实际使用的论坛软件，它在我的网站上支持大约 4 种不同的东西（似乎过多，但所有暂时都连接到同一个数据库，一个用于积极开发它，并且其他用于实际软件）。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-06T04:15:07.460

`from`您在要删除的子句前有多余的逗号，

```
SELECT
        posts.post_topic,
        posts.post_content,
        posts.post_date,
        posts.post_by,
        posts.post_id,
        users.user_id,
        users.user_name,
        users.user_title   // << remove extra comma here
FROM
        posts
LEFT JOIN
        users
ON
        posts.post_by = users.user_id 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-06T04:15:12.000

`SELECT`第 49 行 - 在列表中的最后一项之后有一个逗号。

# reporting-services - 在 SSRS 中，“内部”参数与“隐藏”参数有何不同？

> ID：14179219
> 
> 赞同：23
> 
> 时间：2013-01-06T04:14:34.297
> 
> 标签：reporting-services, ssrs-2008

我一直在努力解决这个报告很长一段时间，终于想出了该怎么做，但它是偶然的。

好吧，我将依赖于前一个参数的参数更改为“内部” - 然后一切都像我想要的那样工作！谢谢

![在此处输入图像描述](../Images/03645ec9eeb806131cd4d95972e1168a.png)

SSRS 中的“内部”与“隐藏”有何不同？

* * *

## 回答 #1

> 赞同：31
> 
> 时间：2013-01-06T04:23:05.290

内部没有公开，当使用另一个参数调用时，您不能将其传递给报告。请注意，它不会出现在用户可以更改的顶部。

隐藏意味着它不会显示在页面顶部以允许用户手动调整它，但它可以通过从另一个报表调用传递给报表。

我更喜欢使用 hidden 并对其进行合理的默认设置。这样，在报告之间导航时，如果我需要它们，我总是可以覆盖它们。

我也会看看这个类似的答案：[What are the rules for using "Internal" parameters in SSRS](https://stackoverflow.com/questions/9844357/what-are-the-rules-for-using-internal-parameters-in-ssrs)。它显示了一个很好的内部参数用例，我有时也使用过。

* * *

## 回答 #2

> 赞同：10
> 
> 时间：2015-02-03T06:17:55.883

> PromptUser == false --> 参数为“内部”
> 
> PromptUser == true && 提示为空或为空 --> 参数为“隐藏”
> 
> PromptUser == true && 提示不为空或为空 --> 参数可见

# clojure - 如何在多个 Clojure 命名空间中调用相同的方法？

> ID：14179221
> 
> 赞同：3
> 
> 时间：2013-01-06T04:15:05.337
> 
> 标签：clojure

我有一系列命名空间符号：

```
(def namespace-symbols (namespace-1 namespace-2 namespace-3)) 
```

我想在每个方法上调用*完全相同的方法*（比如， ）。`run`

```
(map #{%/run} namespace-symbols) 
```

不会工作。

我也试过

```
(defmacro namespace-run
  [namespace]
  `(~(identity namespace)/run)) 
```

这也行不通。有没有办法做到这一点？

## 更新：

我终于想出了一个这样的宏：

```
(defmacro namespace-run
  [namespace]
  `(~(symbol (str namespace "/run"))))

(macroexpand-1 '(namespace-run foobar))
;=> (foobar/run) 
```

当然有更好的方法来做到这一点？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-06T05:20:24.533

查看[clojure.core/ns-resolve](http://clojuredocs.org/clojure_core/clojure.core/ns-resolve)

```
(doseq [ns namespace-symbols]
  ((ns-resolve ns 'run))) ;; resolve and execute fn 
```

你可以把它当作一个`fn`

```
(let [p (ns-resolve *ns* 'println)]
  (p "Hello")
  (p "World")) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-06T04:40:34.627

也许使用类似的东西`symbol`

```
clojure.core/symbol
([name] [ns name])
  Returns a Symbol with the given namespace and name. 
```

# ios - 故事板上的 iPhone 5 屏幕切换不适用于所有视图控制器（实际的控制器和里面的东西）

> ID：14179227
> 
> 赞同：3
> 
> 时间：2013-01-06T04:16:12.650
> 
> 标签：ios, xcode, uistoryboard

出于某种原因，当我单击情节提要中的小按钮时，某些视图控制器无法展开（我的意思是视图控制器本身以及其中的内容）。真正奇怪的是，当我再次点击按钮时，一些确实展开的视图控制器会以这种方式卡住（再次，我的意思是视图控制器本身和它里面的东西）。现在，当我按下按钮时，只有少数人移动，而其他人仍然卡住。我做错了什么？

# xcode - iTunes Connect 中的“无效二进制”（对于 OSX）

> ID：14179229
> 
> 赞同：1
> 
> 时间：2013-01-06T04:16:34.403
> 
> 标签：xcode, macos, app-store, submit

我在 OSX 上开发了一个应用程序。

我试图将它上传到 MAC App Store，但它显示“**无效二进制**”。

我的**XCode 版本**是**4.5**，**操作系统版本**是**10.7.5**。

在 plist 文件中，

*   “**架构**”=“**标准（32/64 位英特尔）** ”

*   “**基础 SDK** ”=“ **OS X 10.8** ”

*   “**支持的平台**”=“ **OS X** ”

*   “**有效架构**”=“ **i386 x86_64** ”

*   “**代码签名权利**”为空

*   “**代码签名识别**”=“**第 3 方 MAC 开发人员应用程序**”

我做错了什么？

# java - 剪切、复制和粘贴为 JMenuItems

> ID：14179233
> 
> 赞同：1
> 
> 时间：2013-01-06T04:16:52.463
> 
> 标签：java, swing, jtextarea, jmenu, jmenuitem

我有两个 JTextAreas，想实现剪切、复制和粘贴菜单项。我知道 JTextArea.cut 和其他方法，但无法弄清楚如何确定用户在哪里（在哪个 JTextArea 中）选择了文本，或者放置了他们的光标。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-06T05:11:03.883

使用编辑器工具包提供的操作。例如：

```
JMenuItem copy = new JMenuItem( new DefaultEditorKit.CopyAction() ); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-06T04:37:14.707

对于选定的文本，请查看[`JTextArea#getSelectedText`](http://docs.oracle.com/javase/7/docs/api/javax/swing/text/JTextComponent.html#getSelectedText%28%29)

对于插入符号位置，请查看[`JTextArea#getCaretPosition`](http://docs.oracle.com/javase/7/docs/api/javax/swing/text/JTextComponent.html#getCaretPosition%28%29)

# xcode - 如何确定 uipageviewcontroller 横向页面的大小？

> ID：14179238
> 
> 赞同：0
> 
> 时间：2013-01-06T04:17:26.490
> 
> 标签：xcode, uipageviewcontroller

我正在使用 Apple 的默认 UIPageViewController 模板。基本上只是涉足它以了解它是如何工作的。

我想为 dataview 控制器加载背景图像并根据方向自动调整它的大小（而不是加载不同的图像）。

有没有什么快速的方法可以确定横向每个页面的大小？我不是说

```
self.pageViewController.view.frame 
```

这似乎给出了包括两个页面在内的整个视图的大小，而是以横向显示的两个页面**之一的大小。**我已经或多或少地实现了我需要这样的东西

```
CGRectOffset(CGRectInset(self.pageViewController.view.bounds,125,0), -125, 0)]; 
```

但肯定有更好的方法吗？这感觉就像一个丑陋的黑客。

提前致谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-09T17:25:20.237

我还没有使用拆分视图 UIPageViewController，但据我了解，您将传入两个视图，它们将呈现为两个页面。那么为什么不让页面视图根据 UIPageViewController 在框架中的设置来确定图形本身的大小呢？

# objective-c - Objective-c 中的全局对象

> ID：14179242
> 
> 赞同：-2
> 
> 时间：2013-01-06T04:17:58.097
> 
> 标签：objective-c, xcode, oop

我应该如何创建一个对象的多个全局实例？据我了解，（如果我错了，请原谅我）单身人士只会让我创建一个类的实例。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-06T04:27:05.790

有许多 Cocoa 类公开了全局实例，但从只能是其中一个的意义上说，它们并不是真正的单例。例如考虑`NSTimeZone`。有全局可访问的实例，如`localTimeZone`、`defaultTimeZone`和`systemTimeZone`，但您也可以根据需要创建任意数量的附加时区对象。

通过创建多个允许您访问特定全局实例的类方法，您可以轻松地为您自己的类使用类似的模式。事实上，这实际上比创建一个阻止创建多个实例的*真正单例更容易。*

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-06T05:09:26.470

听起来你想要这样的东西，假设有问题的类被称为`PFXObject`：

```
static NSMutableArray *sharedObjects = nil;
+ (PFXObject *)newSharedObjectAtIndex:(NSUInteger *)indexOut
{
    static dispatch_once_t onceToken;
    dispatch_once(&onceToken, ^{
        sharedObjects = [NSMutableArray array];
    });
    NSUInteger index = 0;
    PFXObject *newObject = [[PFXObject alloc] init];
    @synchronized(sharedObjects) {
        [sharedObjects addObject:newObject];
        index = sharedObjects.count - 1;
    }
    if (indexOut) {
        *indexOut = index;
    }
    return newObject;
}

+ (PFXObject *)sharedObjectAtIndex:(NSUInteger)index
{
    PFXObject *object = nil;
    @synchronized(sharedObjects) {
        object = [sharedObjects objectAtIndex:index];
    }
    return object;
} 
```

这将允许您创建任意数量的共享实例`PFXObject`并按索引检索它们。或者，您可能想要使用字典：

```
static NSMutableDictionary *sharedObjects = nil;
+ (PFXObject *)sharedObjectForKey:(id<NSCopying>)key
{
    static dispatch_once_t onceToken;
    dispatch_once(&onceToken, ^{
        sharedObjects = [NSMutableDictionary dictionary];
    });
    PFXObject *object = nil;
    @synchronized(sharedObjects)
    {
        if (!(object = sharedObjects[key])) {
            object = [[PFXObject alloc] init];
            sharedObjects[key] = object;
        }

    }
    return object;
} 
```

这将允许您拥有任意多个共享对象，并且每个共享对象都与您选择的密钥相关联。

* * *

编辑：你写的

> 你能解释一下我将如何使用它并初始化对象吗

要使用这种机制，你会写

```
PFXObject *sharedObject = [PFXObject sharedObjectForKey:theKey]; 
```

获取与您想要使用共享对象的任何地方`PFXObject`的键（实现和（几乎可以肯定）覆盖`theKey`的某个类的实例）对应的共享。在要使用共享实例的任何文件中，您需要做的就是适当的头文件（在这种情况下），并确保在该文件中声明类方法（）：`NSCopying``-hash``#import``PFXObject.h``sharedObjectForKey:``@interface`

```
//PFXObject.h

@interface PFXObject : NSObject
//...
+ (PFXObject *)sharedObjectForKey:(id<NSCopying>)theKey;
//...
@end 
```

* * *

**编辑**：示例

以下示例程序演示了`PFXObject`使用实例化共享`+sharedObjectForKey:`

```
@interface PFXObject : NSObject
+ (PFXObject *)sharedObjectForKey:(id<NSCopying>)key;
@end

@implementation PFXObject
static NSMutableDictionary *sharedObjects = nil;
+ (PFXObject *)sharedObjectForKey:(id<NSCopying>)key
{
    static dispatch_once_t onceToken;
    dispatch_once(&onceToken, ^{
        sharedObjects = [NSMutableDictionary dictionary];
    });
    PFXObject *object = nil;
    @synchronized(sharedObjects)
    {
        if (!(object = sharedObjects[key])) {
            object = [[PFXObject alloc] init];
            sharedObjects[key] = object;
        }
    }
    return object;
}
@end

int main(int argc, char *argv[]) 
{
    @autoreleasepool {  
        PFXObject *sharedObject = [PFXObject sharedObjectForKey:@"key"];
        NSLog(@"%@", sharedObject);
    }
} 
```

# java - 通过知道名称来选择 JLabel

> ID：14179249
> 
> 赞同：3
> 
> 时间：2013-01-06T04:20:29.973
> 
> 标签：java, swing, jlabel

如果屏幕上有很多 JLabel 并且我知道它们的名字，我将如何选择查找它们？

例如，我知道我之前（动态）创建了一个名为 2340 的新 JLabel。有没有类似的东西

```
JLabel image = findJlabel ("2340"); 
```

为了选择 JLabel 组件？

谢谢， 内科

编辑：只想展示我如何创建这些 JLabel

```
// Initially creates all the imagelabels
    public static void createImageLabels (){
        int xcord, ycord;
        JLabel image;
        String imageLabelName; 

        xcord = 0;
        ycord = yOffset;
        for (int row = 0 ; row < map.length; row++) {
            xcord = 0;
            for (int  col = 0 ; col < map[0].length; col++) {
                imageLabelName = Integer.toString(row);
                imageLabelName += Integer.toString(col);
                image = new JLabel(new ImageIcon(space));
                image.setName(imageLabelName);      
                image.setLocation(xcord, ycord);
                image.setSize(24, 24);
                imagePanel.add(image);  
                System.out.println ("Created a Jlabel Named "+imageLabelName);
                xcord += 24;
            }
            ycord += 24;
        }
    } 
```

我在屏幕上创建了一个 imageIcons 平铺，然后如果我想更改它们显示的图像，我想选择它并更改它。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-06T04:33:06.763

好吧，假设您对所有标签都有不同的名称，我建议您使用 HashMaps。

```
HashMap<String, JLabel> labels = new HashMap<String,JLabel>(); 
```

在你“for” sicle 里面，使用：

```
labels.put("1233", new JLabel(new ImageIcon(space))); 
```

要使用您想要的标签，请使用：

```
labels.get("1233"); 
```

如需更多信息，请查看：

[http://docs.oracle.com/javase/6/docs/api/java/util/HashMap.html](http://docs.oracle.com/javase/6/docs/api/java/util/HashMap.html)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-06T04:33:58.993

如果你只想找到具有当前容器概念的组件很容易，如果你想搜索子容器或父容器，它变得有点复杂......

```
public JLabel findLabelByName(Container parent, String name) {
    JLabel found = null;
    if (name != null) {
        for (Component child : parent.getComponents()) {
            if (child instanceof JLabel) {
                JLabel label = (JLabel)child;
                if (name.equals(label.getName()) {
                    found = label;
                    break;
                }
            }
        }
    }
    return found;
} 
```

现在，如果你想向上或向下搜索容器层次结构，你需要对这个方法执行递归调用，传入新的父级，但我相信你可以弄清楚，不想抢劫你所有的乐趣;）

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-06T05:52:50.157

> 为了选择 JLabel 组件？

你是如何“选择”标签的？

如果是通过鼠标，只需添加一个 mouseListener 并使用 getSource()

# xml - 在 XSLT 中，我可以使用当前节点属性作为动态值来应用模板吗

> ID：14179252
> 
> 赞同：1
> 
> 时间：2013-01-06T04:20:48.847
> 
> 标签：xml, xslt, xpath

我正在尝试使用当前节点属性作为与我的 xml 中的名称匹配的值。xml 节点与句柄同名。有多个不同名称的节点对应于句柄。

由于它遍历了许多具有不同名称的不同节点，我不想写大量的选择语句。请看里面的 xpath `apply-template`- 它不工作，但有没有办法做这样的事情？

```
<xsl:for-each select="data/navigation/page">
    <xsl:element name="{@handle}">
        <xsl:attribute name="id"><xsl:value-of select="current()/@id"/></xsl:attribute>
        <xsl:value-of select="name"/>
        <xsl:apply-templates select="/data/[current()/@handle]" mode="page"/>
    </xsl:element>
</xsl:for-each> 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-06T04:52:19.817

> ```
> <xsl:apply-templates select="/data/[current()/@handle]" mode="page"/> 
> ```

**这在语法上是非法的——定位步骤不能以谓词开头**。

**可能你想要这样的东西：**

```
<xsl:apply-templates select="/data/*[name()=current()/@handle]" mode="page"/> 
```

# php - 如何单击 DOM 元素并使用 PHP 将其作为变量传递？

> ID：14179253
> 
> 赞同：1
> 
> 时间：2013-01-06T04:20:56.277
> 
> 标签：php, javascript, ajax, forms, web

如何设置一个表格，以便当用户单击一行时，该行的数据被发送到一个 PHP 脚本，该脚本被加载到网站上的一个部分中？

基本上，我想部分填充数据输入表单，然后我可以向其中添加更多数据，然后提交表单。

我想设置 JavaScript，以便单击事件加载 Web 表单（简单），但此 Web 表单将包含来自已获取记录的一些数据。

所以数据流的顺序是：

1.  客户端浏览器（用户点击行，JavaScript）
2.  该特定行的数据属性用于从与该属性关联的数据库中获取数据 (php)
3.  提交网络表单

## 这是Javascript：

```
$(document).on('click', 'tr', function() {
    var id = $(this).attr("data-recordId");
    $('#section2').load('data_entry_form.php?id='+id);
}); 
```

## 这是用于 Web 表单的 PHP

```
<html>

<?php

$id = $_GET['id'];

$sql = ("
    SELECT a_aif.aif_id, a_aif.fee_source_id, a_aif.company_name_per_sedar, a_aif.document_filing_date
    FROM a_aif
        LEFT JOIN a_aif_remaining
            ON a_aif_remaining.aif_id = a_aif.aif_id
    WHERE a_aif.aif_id = :id
    ORDER BY aif_id DESC");
$sth = $dbh->prepare($sql);
$sth->execute();

?>

<?php echo $id; ?> <br>
<?php echo $row[fee_source_id]; ?> <br>
<?php echo $row[company_name_per_sedar]; ?> <br>
<?php echo $row[document_filing_date]; ?> <br>

<form>
<input type="date"> </input>
<br>
<input list="auditors" placeholder="Auditor" />
<datalist id="auditors">
    <option value="/Foo" />
</datalist>
<br>
<input list="city" placeholder="City" />
<datalist id="city">
    <option value="Bar" />
</datalist>
<br>
<input type="submit" name="submitbutton" id="submitbutton" value="Submit" />

</form>

</html> 
```

**问题**

*   使数据属性等于每行的第一个单元格有什么意义？我不能只使用每行第一个单元格中的数据作为“id”吗？
*   如果 1 为真，那么我想我应该使用`data`元素而不是`attr`元素？
*   PHP 不工作！我收到此错误“致命错误：调用非对象上的成员函数 prepare()..”

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-06T05:53:43.450

这么多问题，你知道你在这里做什么的基础吗？

您的 Javascript 正在使用`id=`参数发送记录 ID，但您的 PHP 正在使用`$_GET['rowid']`. 您需要更改其中一个以匹配另一个。

您需要将其分配给一个变量：

```
$id = $_GET['id']; 
```

您需要`rowid`将 SQL 更改为`:rowid`，并准备语句：

```
$stmt = $dbh->prepare($sql); 
```

# android - 禁止滑动抽屉打开

> ID：14179255
> 
> 赞同：0
> 
> 时间：2013-01-06T04:21:15.447
> 
> 标签：android, slidingdrawer

如何通过拖动手柄来禁用 SlidingDrawer 打开？我只是希望它在您单击手柄时打开。谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2014-05-23T14:12:15.423

你也可以像这里一样锁定组件并使用 .toggle

```
mySlidingDrawer.lock();  //  .unlock()
handle.setOnClickListener(new OnClickListener(){

@Override
public void onClick(View v) {
    mySlidingDrawer.toggle();

    }

}); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-06T04:39:25.037

您需要扩展 SlidingDrawer 并禁用相关的事件处理程序，例如

```
public class ClickOnlySlidingDrawer extends MySlidingDrawer {

    ...

    @Override
    public boolean onInterceptTouchEvent(MotionEvent event) {
        return false;
    }

    @Override
    public boolean onTouchEvent(MotionEvent event) {
        return false;
    }
} 
```

# javascript - 为什么托管 Web 应用程序的运行速度可能比在 localhost 上更快？

> ID：14179257
> 
> 赞同：-4
> 
> 时间：2013-01-06T04:22:25.243
> 
> 标签：javascript, node.js, angularjs, nodejitsu

我最近使用 Node/Express/Angular 编写了一个应用程序，它正在 Nodejitsu 上运行。我也在使用 Mongolab 来托管数据库。当应用程序“在云中”运行时，它显然比在我的计算机上通过 localhost 运行得快得多，这对我来说是违反直觉的。造成这种情况的原因是什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-06T04:32:52.660

听起来他们的服务器组合比您的本地计算机更快，并且它们对您的数据库具有更快的网络速度，而您的应用程序中最慢的部分不是来回发送信息所需的网络时间浏览器，而是服务器上的处理。

# jquery - jQuery offset() 返回 null

> ID：14179263
> 
> 赞同：1
> 
> 时间：2013-01-06T04:23:16.090
> 
> 标签：jquery, offset

为什么我的代码不返回顶部和左侧的值？而是返回 null。是否需要为 offset() 设置一些值；去工作？

```
var divOrg = $( "#portfolioButton" );
var pos = divOrg.offset();
console.log( "left : " + pos.left + ", top : " + pos.top ); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-06T04:26:52.383

只要`div`不隐藏，您的代码应该可以正常工作。见[小提琴](http://jsfiddle.net/kRUuL/3/)

```
<div id="portfolioButton">text</div> 
```

您无需设置任何值`offset()`即可工作。它从元素相对于文档的位置获取其值。

> .offset() 方法允许我们检索元素相对于文档的当前位置。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-07T08:17:57.903

在你的页面头部试试这个：

```
<script type="text/javascript">
$(document).ready(function() {

     var divOrg = $( "#portfolioButton" );

        var offset = divOrg.offset();
        divOrg.html ("left : " + offset.left + ", top : " + offset.top );

 console.log(divOrg)
});
    </script> 
```

在体内：`<div id="portfolioButton">Test1.</div>`

参考：[http ://api.jquery.com/offset/](http://api.jquery.com/offset/)

# azure - 不支持使用 TableBatchOperation 检索多行？

> ID：14179269
> 
> 赞同：13
> 
> 时间：2013-01-06T04:24:50.483
> 
> 标签：azure, nosql, azure-storage, azure-table-storage

这是一段初始化 TableBatchOperation 的代码，该操作旨在一次批处理中检索两行：

```
 TableBatchOperation batch = new TableBatchOperation();
 batch.Add(TableOperation.Retrieve("somePartition", "rowKey1"));
 batch.Add(TableOperation.Retrieve("somePartition", "rowKey2")); 
 //second call throws an ArgumentException:
 //"A batch transaction with a retrieve operation cannot contain 
 //any other operation" 
```

如前所述，抛出异常，并且似乎**不支持在单个批次中检索 N 行**。这对我来说很重要，因为每个请求我需要检索大约 50 行。**这个问题在性能方面与成本方面一样重要。**您可能知道，Azure 表存储定价基于事务量，这意味着 50 次检索操作的成本是单个批处理操作的 50 倍。

我错过了什么吗？

**旁注** 我正在使用新的 Azure Storage api 2.0。我注意到这个问题从未在网络上提出过。这个约束可能是最近添加的？

**编辑**

我在这里找到了一个相关的问题：[Very Slow on Azure Table Storage Query on PartitionKey/RowKey List](https://stackoverflow.com/questions/11966450/very-slow-on-azure-table-storage-query-on-partitionkey-rowkey-list)。似乎在行键上使用带有“或”的 TableQuery 将导致全表扫描。这里真的有一个很严重的问题...

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-08T03:33:25.577

在 Azure 表存储 (ATS) 中设计分区键 (PK) 和行键 (RK) 方案时，您的主要考虑应该是如何检索数据。正如您所说，您运行的每个查询都会花费金钱，但更重要的是时间，因此您需要在一个有效的查询中获取所有数据。您可以在 ATS 上运行的高效查询属于以下类型：

*   精确的PK和RK
*   精确的 PK、RK 范围
*   PK范围
*   PK 范围，RK 范围

根据您的评论，我猜您有一些与此类似的数据：

```
PK    RK     Data
Guid1 A      {Data:{...}, RelatedRows: [{PK:"Guid2", RK:"B"}, {PK:"Guid3", RK:"C"}]}
Guid2 B      {Data:{...}, RelatedRows: [{PK:"Guid1", RK:"A"}]
Guid3 C      {Data:{...}, RelatedRows: [{PK:"Guid1", RK:"A"}];} 
```

并且您已经在 Guid1 检索到数据，现在您需要加载 Guid2 和 Guid3。我还假设这些行没有共同点，就像它们都是针对同一个用户一样。考虑到这一点，我将创建一个额外的“索引表”，如下所示：

```
PK      RK      Data
Guid1-A Guid2-B {Data:{....}}
Guid1-A Guid3-C {Data:{....}}
Guid2-B Guid1-A {Data:{....}}
Guid2-B Guid1-A {Data:{....}} 
```

其中PK是父行的组合PK和RK，RK是子行的组合PK和RK。然后，您可以运行一个查询，返回所有带有 PK="Guid1-A" 的行，您只需一次调用（或两次调用）即可获得所有相关数据。这产生的最大开销是在您的写入中，因此现在当您对一行进行正确处理时，您还必须为每个相关行写入行，并确保数据保持最新（这可能不是问题如果这是一种只写一次的场景，对你来说）。

如果我的任何假设是错误的，或者如果您有一些示例数据，我可以使用更多相关示例更新此答案。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-09-16T20:55:05.687

尝试这样的事情：

```
TableQuery<DynamicTableEntity> query = new TableQuery<DynamicTableEntity>()
                                                .Where(TableQuery.CombineFilters(
                                                    TableQuery.GenerateFilterCondition("PartitionKey", QueryComparisons.Equal, "partition1"),
                                                    TableOperators.And,
                                                    TableQuery.CombineFilters(
                                                        TableQuery.GenerateFilterCondition("RowKey", QueryComparisons.Equal, "row1"),
                                                        TableOperators.Or,
                                                        TableQuery.GenerateFilterCondition("RowKey", QueryComparisons.Equal, "row2")))); 
```

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2016-05-29T19:08:36.993

我知道这是一个老问题，但由于 Azure STILL 不支持二级索引，它似乎会在一段时间内相关。

我遇到了同样类型的问题。在我的场景中，我需要在同一个分区中查找数百个项目，其中有数百万行（将 GUID 想象为行键）。我测试了几个选项来查找 10,000 行

1.  (PK&&RK)
2.  (PK && RK1) || (PK & RK2) || ...
3.  PK && (RK1 || RK2 || ... )

我使用的是异步 API，最大并行度为 10 度（最多 10 个未完成的请求）。我还测试了几个不同的批量大小（10 行、50、100）。

```
Test                        Batch Size  API calls   Elapsed (sec)
(PK && RK)                  1           10000       95.76
(PK && RK1) || (PK && RK2)  10          1000        25.94
(PK && RK1) || (PK && RK2)  50          200         18.35
(PK && RK1) || (PK && RK2)  100         100         17.38
PK && (RK1 || RK2 || … )    10          1000        24.55
PK && (RK1 || RK2 || … )    50          200         14.90
PK && (RK1 || RK2 || … )    100         100         13.43 
```

注意：这些都在同一个分区中 - 只是多个行键。

我很乐意减少 API 调用的数量。但作为一个额外的好处，经过的时间也显着减少，节省了计算成本（至少在我这边！）。

毫不奇怪，100 行的批次提供了最佳的经过性能。显然还有其他性能考虑，尤其是网络使用情况（例如，#1 几乎不使用网络，而其他的则更加努力）

**编辑** 查询许多行键时要小心。查询存在（或当然）URL 长度限制。如果超出长度，查询仍然会成功，因为服务无法判断 URL 已被截断。在我们的例子中，我们将组合查询长度限制为大约 2500 个字符（URL 编码！）

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-01-07T13:59:51.947

每个分区有多少个实体？通过一次检索操作，您可以在每个查询中提取多达 1000 条记录。然后，您可以对内存集进行 Row Key 过滤，并且只需支付 1 次操作费用。

另一种选择是执行[行键范围查询](http://www.windowsazure.com/en-us/develop/net/how-to-guides/table-services/#header-10)以在一次操作中检索部分分区。本质上，您指定要返回的行键的上限和下限，而不是整个分区。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-01-06T06:29:08.343

Azure 表存储不支持批量“获取”操作。支持的操作有：添加、删除、更新和合并。您需要将查询作为单独的请求执行。为了加快处理速度，您可能希望并行执行这些查询。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2013-01-07T13:13:35.893

您最好的选择是创建一个 Linq/OData 选择查询......它将获取您正在寻找的内容。

为了获得更好的性能，您应该对每个分区进行一次查询并同时运行这些查询。

我没有亲自测试过，但认为它会起作用。

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2018-01-30T18:22:26.317

好的，所以批量检索操作，最好的情况是表查询。不太理想的情况将需要并行检索操作。

根据您的 PK、RK 设计，您可以基于 (PK, RK) 的列表找出您需要执行的最小/最有效的检索/查询操作集。然后，您可以并行获取所有这些内容并整理出客户端的确切答案。

`Retrieve`IMAO，将方法添加到类中是 Microsoft 的设计失误，`TableBatchOperation`因为它传达了表存储 API 不支持的语义。

现在，我没有心情写一些超级高效的东西，所以我将把这个超级简单的解决方案留在这里。

```
var retrieveTasks = new List<Task<TableResult>>();

foreach (var item in list)
{
    retrieveTasks.Add(table.ExecuteAsync(TableOperation.Retrieve(item.pk, item.rk)));
}

var retrieveResults = new List<TableResult>();

foreach (var retrieveTask in retrieveTasks)
{
    retrieveResults.Add(await retrieveTask);
} 
```

此异步代码块将`list`并行获取实体并将结果以`retrieveResults`保留顺序存储。如果您需要获取连续范围的实体，则可以使用范围查询来改进这一点。

有一个最佳点（您必须通过测试找到）是查询比特定批次检索所需的更多实体可能更快/更便宜的地方，然后丢弃您不需要的检索结果。

如果您有一个小分区，您可能会从这样的查询中受益：

```
where pk=partition1 and (rk=rk1 or rk=rk2 or rk=rk3) 
```

如果您的键之间的字典（即排序顺序）距离很大，您可能希望并行获取它们。例如，如果您将字母表存储在表存储中，那么在 fetching 时，最好使用并行检索操作来进行 fetching`a`和`z`哪些相距较远的操作`a`，`b`而哪些相距`c`较近则最好使用查询来进行。获取`a`、`b` `c`和`z`将受益于混合方法。

如果您事先了解所有这些，您可以计算出在给定一组 PK 和 RK 的情况下最好的做法是什么。您对基础数据的排序方式了解得越多，您的结果就会越好。我会建议一种通用的方法，而是尝试应用您从这些不同的查询模式中学到的知识来解决您的问题。

# vb.net - 使用 vb.net 检查 word 中的复选框

> ID：14179275
> 
> 赞同：1
> 
> 时间：2013-01-06T04:25:44.180
> 
> 标签：vb.net, ms-word, automation

我有一个带有几个复选框字段的 word doc。我可以填写文本字段，但还没有弄清楚如何检查复选框。

我不能只在 word 中创建一个宏，然后看看 word 是如何做到的，因为要使用键盘选中复选框（空格键），您必须启用文档保护，这会禁用宏创建。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-06T04:58:05.703

每个复选框都有一个`Value`属性。您可以将此属性设置为`True`或`False`选中或取消选中该复选框。

**编辑**

我写了一个小宏来勾选活动文档中的所有框。您可以对其进行编辑以满足您的需要。VBA 真的很讨厌，我花了大约 15 分钟才弄明白。

```
Sub CheckAllBoxes()
    Dim ctrl As ContentControl
    For Each ctrl In ActiveDocument.ContentControls
        If ctrl.Type = wdContentControlCheckBox Then
            ctrl.Checked = True
        End If
    Next
End Sub 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-06T06:06:04.827

我刚刚尝试使用 VBA 设置一个老式的**Word2003 Checkbox**。使用那段代码：

```
' demo purposes - added a command
Private Sub CommandButton1_Click()
    ' FormFields refers to Word2003 FormFields
    If ActiveDocument.FormFields(1).Type = wdFieldFormCheckBox Then
        ActiveDocument.FormFields(1).CheckBox.Value = True
    End If

   ' ContentControls refers to >= Word2007 Controls - thx to StevenDotNet for the hint
   ActiveDocument.ContentControls(1).Checked = True
End Sub 
```

![WordCheckBoxControl_Form](../Images/8f22dce9b461e0148499229e2d0bb924.png)

另一方面，我**用 VB.net 创建了一个 VS2012 WordProject，**并添加了一些代码来检查加载框。

```
Private Sub ThisDocument_Open() Handles Me.Open
    Me.FormFields(1).CheckBox.Value = True
End Sub 
```

# javascript - 正则表达式规则的解释

> ID：14179278
> 
> 赞同：0
> 
> 时间：2013-01-06T04:26:10.577
> 
> 标签：javascript, regex

我继承了一些验证优惠券的代码。这张优惠券的逻辑是用 JS 验证的正则表达式规则。我对此没有太多经验，如果有人能帮助我理解它，我将不胜感激。

这是规则：

```
theStr.match('^[a-z]{1}[0-9]{3}[a-z]{1}$') 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-06T04:30:04.060

必须以小写字母开头，后跟三个数字和另一个小写字母。另请注意，在 JS 中您使用`/regex/`not `'regex'`。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-06T04:30:06.560

行以 1 个小写字母 az 开头，后跟 3 个数字，并以 1 个小写字母 az 结尾

符号表示“`^`行首”，`$`符号表示“行尾”，[] 中的内容是要匹配的字符，{} 中的数字是重复的次数。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-01-06T04:30:45.187

该站点对于解释正则表达式非常有帮助：[http ://regex101.com/](http://regex101.com/)

在这种情况下，该正则表达式按以下顺序匹配以下内容：

`beginning of a string/line`

`any lower case letter`

`repeated only once (no repetitions)`

`any digit`

`repeated exactly 3 times`

`any lower case letter`

`repeated only once`

`end of string/line`

这将匹配一个字符串，如`"b589n"`.

# c++ - 在 C++ 中使用 Boost-Python 访问 Python 中定义的函数数组

> ID：14179279
> 
> 赞同：1
> 
> 时间：2013-01-06T04:26:26.900
> 
> 标签：c++, python, boost, python-2.7, boost-python

我在python中有一系列函数

```
Func[0](x,y,z)
Func[1](x,y,z)
...
Func[N](x,y,z) 
```

如何通过使用 boost-python 在 c++ 中访问 Func[0] 到 Func[N] 来加载 c++ 中的函数指针数组。

```
typedef double (*CPP_Function)(double, double, double);
CPP_Function* Funcs; // Array of Function pointers 
```

我希望能够打电话

```
for(int i=0; i<N; i++)
   a += (*CPP_Function[i])(0,0,0) 
```

* * *

我尝试关注 2 个仿函数**，但没有成功**！

```
 Py_Initialize();

  bp::object main_module = bp::import("__main__");
  bp::object main_dict   = main_module.attr("__dict__");

  bp::exec(
    "def f1(x):\n"
    "  return  sin(x)*cos(x)\n"
    "def f2(x):\n"
    "  return  sin(x)*cos(x)\n"
    "f=[f1, f2]",
    main_dict
  );

  bp::object f = main_dict["f"];
  bp::object this_f = f[0];

  std::cout << bp::extract<double>(this_f(1.0)) << std::endl; 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-06T08:59:28.010

你的问题让我有点困惑：你有一个函数指针的 typedef，但你知道你将调用函子。无论如何，您发布的代码不起作用，因为您忘记导入数学，请尝试

```
 bp::exec(
    "from math import *\n"
    "def f1(x):\n"
    "  return  sin(x)*cos(x)\n"
    "def f2(x):\n"
    "  return  sin(x)*cos(x)\n"
    "f=[f1, f2]",
    main_dict
  ); 
```

然后对于 c++ 类型，您可能想要使用：

```
 typedef std::function<double (double, double, double)> CPP_Function; // (a bad name) 
```

使用标准库，它不会咬人：

```
 typedef vector< CPP_Function > CPP_Function_vector; 
```

然后构建一个适配器，从 python 对象构造 CPP_Function 对象。如今，使用 lambda 函数非常容易。全部一起：

```
#include <boost/python.hpp>

#include <functional>
#include <vector>

using namespace std;
namespace bp = boost::python;

typedef function<double(double, double, double)> CPP_Function;
typedef vector< CPP_Function > CPP_Function_vector; 

CPP_Function_vector convert_functions( bp::object const& functions ) 
{
    int l = bp::len( functions );
    CPP_Function_vector result;
    for (int i=0; i < l; i++ )
    {
        bp::object f = functions[i];
        result.push_back( [f]( double a, double b, double c)->double { return bp::extract<double>(f(a,b,c)); } );
    }
    return result;
}

int main( int argc, char* argv[] )
{

    Py_Initialize();

    bp::object main_module = bp::import("__main__");
    bp::object main_dict   = main_module.attr("__dict__");

    bp::exec(
        "from math import *\n"
        "def f1(x,y,z):\n"
        "  return  sin(x)*cos(y)*tan(z)\n"
        "def f2(x,y,z):\n"
        "  return  sin(x)*cos(z)\n"
        "f=[f1, f2]",
        main_dict
    );

    bp::object f = main_dict["f"];

    CPP_Function_vector function_vector = convert_functions( f );

    cout << function_vector[1](1.0, 0.2, 0.3) << endl;

    return 0;

} 
```

# ruby - 关于xml文件编码的困惑

> ID：14179280
> 
> 赞同：0
> 
> 时间：2013-01-06T04:26:27.727
> 
> 标签：ruby, xml, encoding, nokogiri

我正在复制遗留系统当前输出​​的 xml 文件的生成。

这是我试图复制的 XML 的样子：

```
<?xml version="1.0" encoding="UTF-8"?>    
<DESCRIPTION>&#1052;&#1054;&#1044;&#1059;&#1051;&#1068;- ELECTRONIC  OUTPUT 120 V DC 5 mA</DESCRIPTION> 
```

但是，当我使用编码“UTF-8”生成带有 nokogiri 的 xml 时，这就是我得到的：

```
<?xml version="1.0" encoding="UTF-8"?>
<DESCRIPTION>МОДУЛЬ- ELECTRONIC  OUTPUT 120 V DC 5 mA</DESCRIPTION> 
```

当我使用编码“ASCII”生成带有 nokogiri 的 xml 时，这就是我得到的：

```
<?xml version="1.0" encoding="ASCII"?>
      <DESCRIPTION>&#1052;&#1054;&#1044;&#1059;&#1051;&#1068;- ELECTRONIC  OUTPUT 120 V DC 5 mA</DESCRIPTION> 
```

描述节点的内容按我想要的方式编码，但现在处理指令节点与我将要替换的文件不匹配。

为什么我只能使用与我的目标格式不同的编码来获得所需的输出编码？

如果我将其发布到外部应用程序进行处理，处理指令是否重要，或者数据被正确编码的事实是否足够？

任何可以散发的光都会很棒。

# python - 从 python 中的另一个文件导入类 - 我知道修复，但为什么原来的工作不起作用？

> ID：14179290
> 
> 赞同：1
> 
> 时间：2013-01-06T04:28:14.513
> 
> 标签：python, file, class, import

我可以使这段代码工作，但我仍然很困惑为什么它不能以我尝试的第一种方式工作。

我正在练习 python，因为我的论文将在其中进行编码（使用 Arduino 和 PC 接口做一些很酷的事情）。我正在尝试将另一个文件中的类导入到我的主程序中，以便我可以创建对象。两个文件都在同一个目录中。如果您此时查看代码，可能会更容易。

```
#from ArduinoBot import *
#from ArduinoBot import ArduinoBot
import ArduinoBot

# Create ArduinoBot object
bot1 = ArduinoBot()

# Call toString inside bot1 object
bot1.toString()

input("Press enter to end.") 
```

这是非常基本的 ArduinoBot 类

```
class ArduinoBot:

def toString(self):
    print ("ArduinoBot toString") 
```

前两个注释掉的 import 语句中的任何一个都可以完成这项工作，但不是最后一个，这对我来说似乎是最直观和最通用的。这里没有太多代码可以解决问题，当我听到一些关于 Python 的好消息时，遇到这些挑剔的语言特定的怪癖有点令人沮丧。无论如何，我一定是做错了什么，但为什么简单的“导入类名”或“导入文件名”不起作用？

谢谢您的帮助。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-06T04:31:47.947

考虑一个文件 ( `example.py`)：

```
class foo(object):
    pass

class bar(object):
    pass

class example(object):
    pass 
```

现在在你的主程序中，如果你这样做：

```
import example 
```

应该从文件中导入什么`example.py`？只是上课`example`？班级也应该一`foo`起来吗？`import module`如果将整个模块的名称空间直接拉到您当前的名称空间中，则含义将过于模糊。

这个想法是命名空间很棒。他们让您知道类/函数/数据的来源。它们还可以让您将相关的事物组合在一起（或者等效地，它们可以帮助您将不相关的事物分开！）。一个模块设置一个命名空间，你告诉 python 你想如何通过你使用的方式将该命名空间带入当前上下文（命名空间）`import`。

`from ... import *`说——将该模块中的所有内容直接带入我的命名空间。

`from ... import ... as ...`说，只将我直接指定的东西带入我的命名空间，但在这里给它一个新名称。

最后，`import ...`简单地说将该模块带入当前命名空间，但将其分开。由于（至少）两个原因，这是生产代码中最常见的形式。

*   它可以防止名称冲突。你可以有一个名为的本地类`foo`，它不会与`foo`in冲突`example.py`——你可以通过`example.foo`
*   它可以很容易地跟踪一个类来自哪个模块以进行调试。

考虑：

```
from foo import *
from bar import *
a = AClass() #did this come from foo?  bar? ... Hmmm... 
```

* * *

`example`在这种情况下，要从访问类`example.py`，您还可以执行以下操作：

```
import example
example_instance = example.example() 
```

但你也可以得到`foo`：

```
foo_instance = example.foo() 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-06T04:51:28.377

简单的答案是模块是 Python 中的东西。模块作为类、函数和其他对象的容器具有自己的地位。当你这样做时`import ArduinoBot`，你导入模块。如果你想要那个模块中的东西——类、函数等——你必须明确地说你想要它们。您可以使用 直接导入它们，也可以使用然后`from ArduinoBot import ...`通过模块访问它们。`import ArduinoBot``ArduinoBot.ArduinoBot`

你应该利用模块的容器特性来允许你将相关的东西分组到一个模块中，而不是反对这个。当你在一个文件中只有一个类时可能看起来很烦人，但是当你开始将多个类和函数放在一个文件中时，你会发现你实际上并不希望在你这样做时自动导入所有这些东西`import module`，因为那时所有模块中的所有内容都会与其他内容发生冲突。这些模块在分离不同的功能方面提供了有用的功能。

对于您的示例，您应该问自己的问题是：如果代码如此简单紧凑，为什么不将它们全部放在一个文件中？

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-06T05:01:51.027

模块本身就是一个对象。如果您以模块成员的身份访问您的类，最后一种方法实际上确实有效。以下是否可行，或者是否合适，具体取决于您对导入项目的其他需求：

```
from my_module import MyClass 
foo = MyClass() 
```

或者

```
import my_module
foo = my_module.MyClass() 
```

正如评论中提到的，您的模块和类在 python 中通常没有相同的名称。这更像是 Java 的事情，有时会在这里导致一些混乱。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-01-06T04:49:45.297

导入并不像您认为的那样工作。它*确实*按照文档记录的方式工作，因此有一个非常简单的解决方法可以解决您的问题，但尽管如此：

```
import ArduinoBot 
```

这会在导入路径上查找模块（或包），在新命名空间中执行模块的代码，然后将**模块对象本身**绑定到`ArduinoBot`当前命名空间中的名称。`ArduinoBot`这意味着模块中命名的模块全局变量`ArduinoBot`现在可以在导入命名空间中以`ArduinoBot.ArduinoBot`.

```
from ArduinoBot import ArduinoBot 
```

这会像上面一样加载并执行模块，但不会将模块对象绑定到 name `ArduinoBot`。相反，它在模块中查找模块全局变量，并绑定在当前命名空间`ArduinoBot`中引用该名称的任何对象。`ArduinoBot`

```
from ArduinoBot import * 
```

与上面类似，这会加载并执行一个模块，而不会将模块对象绑定到当前命名空间中的任何名称。然后它查找*所有*模块全局变量，并将它们全部绑定到当前命名空间中的相同名称。

最后一种形式非常方便在 python shell 中进行交互工作，但在实际开发中通常被认为是不好的样式，因为不清楚它实际绑定了哪些名称。考虑到它会在导入的模块中导入*所有*全局内容，包括它在全局范围内导入的任何名称，*如果*您普遍使用这种样式，那么很快就很难知道范围内的名称或它们的来源。

# delphi - CURL 作为纯 URL 字符串

> ID：14179293
> 
> 赞同：2
> 
> 时间：2013-01-06T04:28:40.990
> 
> 标签：delphi, curl, delphi-xe3, firemonkey-fm2

早上好。

[我正在开发一个使用Echonest API](http://developer.echonest.com)内置支持音频识别的小型媒体播放器。我之前处理过 API 并且知道如何提交和解析结果，但是其他 API`POST/GET`在他们的文档中提供了简单的示例，因此无论语言或平台如何，它几乎适用于所有情况。

然而，Echonest API 仅提供 CURL 示例。CURL 是我从未处理过的事情。我正在工作`Delphi XE3`，或者`Firemonkey 2`具体来说，因此没有内置的 CURL 库或组件。有一些第三方可用，但我不确定它们是否是最新的，因为他们将 Delphi 6 列为他们的开发环境，并且简短的搜索表明他们不再使用现代版本的 Delphi （这是否属实是另一回事）。

因为我想尝试尽可能地保持跨平台的东西，以便`OS X`在将来编译一个版本，并且对处理`POST`和`GET`已经有信心，我将如何着手将这个 CURL 命令“翻译”成我可以的东西与`Indy`（例如）一起使用；

```
curl -F "api_key=FILDTEOIK2HBORODV" -F "filetype=mp3" -F "track=@audio.mp3" "http://developer.echonest.com/api/v4/track/upload" 
```

这直接取自他们的[API 文档](http://developer.echonest.com/docs/v4/track.html#upload)，用于将曲目上传到他们的服务。

我不确定有关 CURL 的具体细节，因此在我向服务中抛出随机数据之前，我觉得最好看看 SO 社区是否可以给出我可以使用的简要解释和示例。在任何情况下，解释都比示例更有价值，但是对于碰巧遇到类似问题的其他人来说，示例可能会很好。

问候，斯科特·普里查德。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-06T05:59:09.303

该`-F`选项使用 HTTP Content-Type 告诉 curl`POST`提供的数据`"multipart/form-data"`，在 HTTP 层看起来像这样：

```
POST /api/v4/track/upload HTTP/1.1
Host: developer.echonest.com
Content-Type: multipart/form-data; boundary="boundaryvalue"

--boundaryvalue
Content-Disposition: form-data; name="api_key"

FILDTEOIK2HBORODV
--boundaryvalue
Content-Disposition: form-data; name="filetype"

mp3
--boundaryvalue
Content-Disposition: form-data; name="track"; filename="audio.mp3"
Content-Type: audio/x-mpg

<binary audio data here>
--boundaryvalue-- 
```

`Post()`Indy组件的方法`TIdHTTP`通过实用程序类实现该 Content-Type `TIdMultipartFormDataStream`，例如：

```
uses
  ..., IdHTTP, IdMultipartFormData;

var
  Data: TIdMultipartFormDataStream;
begin
  Data := TIdMultipartFormDataStream.Create;
  try
    Data.AddFormField('api_key', 'FILDTEOIK2HBORODV');
    Data.AddFormField('filetype', 'mp3');
    Data.AddFile('track', 'C:\path to\audio.mp3');
    IdHTTP1.Post('http://developer.echonest.com/api/v4/track/upload', Data);
  finally
    Data.Free;
  end;
end; 
```

# c# - 排序数组，使所有正数首先出现

> ID：14179294
> 
> 赞同：3
> 
> 时间：2013-01-06T04:29:46.557
> 
> 标签：c#, arrays, sorting

我正在用 C# 编写代码来对数组进行排序，我想要右侧的所有负值和左侧的所有正值，不应该按降序排列

```
namespace SortApp
{
    class Program
    {
        static void Main(string[] args)
        {
            int[] newInt = new int[] { 5, -2, -1, -4, -20, 6, 7, -14, 15, -16, 8, 9, 10 };
            int size = 12, i= 0;             // or newInt.Length

            for (i = 0; i < newInt.Length; i++)
            {
                if (newInt[i] < 0 && newInt[size] > 0)
                {
                    int temp = newInt[i];
                    newInt[i] = newInt[size];
                    newInt[size] = temp;
                    size--;
                }
            }
            for (i = 0; i < newInt.Length; i++)
            {
                Console.Write(newInt[i]);
                Console.Write(" ");
            }
        }
    }
} 
```

但输出是这样的（-20 在错误的一边）：

```
5 10 9 8 -20 6 7 -14 15 -16 -4 -1 -2 
```

但预期的输出是：

```
5 10 9 8 15 6 7 -14 -20 -16 -4 -1 -2 
```

为什么我的代码没有产生我想要的输出？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-06T04:43:37.903

您的解决方案错误地决定何时完成循环。`i`此外，它在循环头中无条件地递增，`size`即使它指向负数也不会递减。

以下是您修复它的方法：

```
for (i = 0; i < size ; ) {
    if (newInt[i] < 0 && newInt[size] >= 0) {
        int temp = newInt[i];
        newInt[i] = newInt[size];
        newInt[size] = temp;
        size--;
        i++;
        continue;
    }
    if (newInt[i] >= 0) {
        i++;
    }
    if (newInt[size] < 0) {
        size--;
    }
} 
```

这是[关于 ideone 的演示](http://ideone.com/SCcH19)。

您可以为您的`left`and`right`指针使用更具可读性的标识符来重写此循环，而不是使用`i`and `size`。这将使您的算法在代码中看起来更加“对称”，以识别其设计中的对称性：

```
int left = 0, right = newInt.Length-1;
while (left < right) {
    if (newInt[left] < 0 && newInt[right] >= 0) {
        int temp = newInt[left];
        newInt[left] = newInt[right];
        newInt[right] = temp;
        right--;
        left++;
        continue;
    }
    if (newInt[left] >= 0) {
        left++;
    }
    if (newInt[right] < 0) {
        right--;
    }
} 
```

这是[替代实现的 ideone 链接](http://ideone.com/myAwLp)。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-01-06T04:38:16.010

试试这个解决方案：

```
var newInt = new[] {5, -2, -1, -4, -20, 6, 7, -14, 15, -16, 8, 9, 10};
var solution = newInt.GroupBy(i => i > 0).
    SelectMany(g => g).
    ToArray(); 
```

您的算法的问题是，当您减少时`size`，您最终会得到`newInt[size]`一个负值，并且`if`不会输入该块。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-06T05:12:57.603

一个非常简单的解决方案的一般想法是启动一个索引，`left`在数组的开头调用它，然后在数组`right`的末尾调用另一个索引。

递增`left`直到找到负数，或直到`left == right`。当你遇到一个负数时，递减`right`直到你找到一个正数，或者直到`right == left`.

如果`left`正在索引一个负数并且`right`正在索引一个正数，则交换这两个项目并`left`再次开始递增。

总体思路，未经测试：

```
int left = 0;
int right = a.Length-1;
while (left < right)
{
    if (a[left] < 0)
    {
        while (right > left)
        {
            if (a[right] >= 0)
            {
                // swap here
                int temp = a[left];
                a[left] = a[right];
                a[right] = temp;
                break;
             }
             --right;
        }
    }
    ++left;
} 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-01-06T05:18:48.837

这会产生具有最少循环的所需顺序

```
int[] newInt = new int[] { 5, -2, -1, -4, -20, 6, 7, -14, 15, -16, 8, 9, 10 };
int lt = 0;
int rt = newInt.Length - 1;
while (true) {
    // Find first negative number
    while (newInt[lt] >= 0 && lt < rt) {
        lt++;
    }

    // Find last positive number
    while (newInt[rt] < 0 && rt > lt) {
        rt--;
    }

    if (lt == rt) {
        break; // Finished
    }

    // Swap
    int temp = newInt[lt];
    newInt[lt] = newInt[rt];
    newInt[rt] = temp;
}
//TODO: Print result 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-01-06T04:33:23.953

如果您可以使用泛型和 linq，那么最简单的解决方案是：

```
int[] newInt = new int[] { 5, -2, -1, -4, -20, 6, 7, -14, 15, -16, 8, 9, 10 };
newInt.ToList().Sort();
newInt.Reverse();
newInt = newInt.ToArray(); 
```

希望这会有所帮助！

# arduino - Arduino 将 sd 卡上的字符串与 now.unixtime 进行比较

> ID：14179300
> 
> 赞同：3
> 
> 时间：2013-01-06T04:30:32.153
> 
> 标签：arduino, unix-timestamp

我认为这会很简单，但陷入了 ascii、unsigned long、atoi 等的困境。

我有一个unix时间戳字符串作为sd卡上文件（setup.txt）的第一行。我想将此字符串与 now.unix 时间进行比较，并在它们匹配时开始记录。unsigned long to now.unixtime 显然不是问题。sd 卡字符串到无符号长的主要头痛（对我来说）。任何指针或建议将不胜感激。

问候史蒂夫

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-09T07:26:58.147

是的，假设您有一个所需时间的文本表示，已经转换为存储在文件中的数字，例如

```
3459039345 
```

您可以通过简单但晦涩的调用转换为 long ：

```
char s[20] = "3459039345";
unsigned long startAt = strtoul(s, NULL, 10); 
```

# mysql - MySql 文本搜索查找相似字符串

> ID：14179301
> 
> 赞同：1
> 
> 时间：2013-01-06T04:30:34.157
> 
> 标签：mysql

我正在尝试找到一种方法来查询特定数据库表列中的相似字符串或单词。例如，如果我有一个字符串

```
I have a foo bar in my kitchen 
```

查询将返回结果，例如...

```
foo fighters are a good band
raise the bar
kitchen remodeling contractors
foo bar is a funny word 
```

这可以通过一个查询来完成吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-06T04:38:41.123

您似乎正在尝试匹配给定列表中的任何单词。我会使用“OR”运算符。

示例（假设您的表被调用`my_table`并且您正在搜索的列是`my_column`）：

```
SELECT * FROM my_table WHERE my_column like '%I%'
OR my_column LIKE '%have%'
OR my_column LIKE '%a%'
OR my_column LIKE '%foo%'
OR my_column LIKE '%bar%'
OR my_column LIKE '%in%'
OR my_column LIKE '%my%'
OR my_column LIKE '%kitchen%'; 
```

但是，由于双通配符，此查询将运行非常缓慢。你也可以试试[http://dev.mysql.com/doc/refman/5.0/en/fulltext-search.html](http://dev.mysql.com/doc/refman/5.0/en/fulltext-search.html)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-06T04:47:36.737

在基本级别上，您希望在列上实现[全文索引](http://dev.mysql.com/doc/refman/5.5/en/fulltext-search.html)，因此（假设您的列是 col1 并且您的表是 tbl），您需要`alter table tbl add fulltext(col1);`使用`select id from tbl where match(col1) against 'foo' or match(col1) against 'bar' or match(col1) against`kitchen`...`等进行搜索，依此类推，如所述在[本教程](http://devzone.zend.com/26/using-mysql-full-text-searching/)中。@WinnieTong 的回答没有错，只是这种用例正是全文索引的设计目的。

当您超出[mysql](http://www.mysql.com)的能力时，人们通常使用[Sphinx](http://sphinx-search.com)或[Apache SoLR](http://lucene.apache.org/solr)来完成可搜索的索引。

# android - 在图像视图上移动形状？

> ID：14179311
> 
> 赞同：1
> 
> 时间：2013-01-06T04:31:43.230
> 
> 标签：android, android-canvas

我正在尝试找到一种方法来实现可以在图像上移动的形状（矩形）。用户将矩形拖动到图像中的一个区域，以最终选择它。

如何才能做到这一点？我应该使用什么？任何帮助，将不胜感激！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-06T06:15:03.837

使用画布

```
 choosenImageView = (ImageView) this.findViewById(R.id.ChoosenImageView);

    canvas = new Canvas(bitmap); //Bitmap
    mBitmapPaint = new Paint();
    mBitmapPaint.setAntiAlias(true);
    mBitmapPaint.setStyle(Paint.Style.STROKE);
    mBitmapPaint.setStrokeWidth(5);
    choosenImageView.setOnTouchListener(this); 
```

# objective-c - 在我的幻灯片菜单上似乎无法达到与 Any.Do 相同的效果

> ID：14179312
> 
> 赞同：0
> 
> 时间：2013-01-06T04:31:43.137
> 
> 标签：objective-c, ios

我正在尝试创建与 Any.do iPhone 应用程序相同类型的上拉/上拉菜单（从底部），但没有任何成功。

我遇到的问题是该应用程序是用故事板构建的，所以我想我可能不得不放弃这个想法并只使用代码。

有任何想法吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-06T04:40:34.757

无需摆脱故事板来重新创建它，这就是 IBOutlets 的用途。无论如何，看起来这是通过创建一个占据整个屏幕的 UIScrollView 来实现的。然后在滚动视图的上半部分添加一个 UITableView。请注意，为了使其正常工作，您需要在后台的滚动视图上禁用滚动。

从那里您可以以编程方式将其他元素添加到滚动视图以在屏幕外呈现，因为只有三个它们可能只是按钮。最后，由于在背景滚动视图上禁用滚动，您可以在屏幕底部添加带有 UISwipeGestureRecognizer 的图像，以手动更改滚动视图的内容偏移属性。

# php - php 和 mysql 会话在更新前被破坏

> ID：14179316
> 
> 赞同：1
> 
> 时间：2013-01-06T04:32:02.083
> 
> 标签：php, mysql

所以我试图有一个表格来显示哪些用户在我的网站上在线除了如果有人在没有先注销的情况下关闭网站的部分之外，我还可以正常工作我能做到的最好的。

在我的数据库中，我在该表中有一个用户表，`online`当您登录时，您的`online`状态设置为 1，当您单击注销时`online`设置为 0。这是我尝试使用的代码，如果有人在 10 分钟内不活动，他们将注销（`online`设置为 0）

```
<?php
session_start();
$timeout = 10; // Set timeout minutes
$logout_redirect_url = "logout.php"; // Set logout URL

$timeout = $timeout * 60; // Converts minutes to seconds
if (isset($_SESSION['last_activity'])) {
    $elapsed_time = time() - $_SESSION['last_activity'];
    if ($elapsed_time >= $timeout) {
        mysql_query("UPDATE users SET online = 0 WHERE username = '".$_SESSION['username']."'")
        or die(mysql_error());
        session_destroy();
        header("Location: $logout_redirect_url");
    }
}
$_SESSION['last_activity'] = time();
?> 
```

这很好用，如果他们等待 10 分钟，它会将它们注销，但如果他们只是关闭浏览器，它会保持`online`= 1，将它们显示在列表中。

我认为问题在于，当他们关闭浏览器时会破坏会话，然后才有机会更新用户`online`并将其设置为 0

有没有办法解决？非常感谢您的帮助谢谢:)

顺便说一句，我知道不再使用 mysql 和一切，一旦我了解更多并首先让一切正常工作，我将尝试切换到其他东西。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-06T04:56:33.027

潜在的问题是，当用户关闭浏览器时，没有*可靠*的方式首先与您的服务器通信。[有些事情你可以尝试，但在我看来这是一个你不应该陷入困境的兔子洞] 你真正“知道”的是用户最近访问你的网站的时间。（在你的情况下`$_SESSION['last_activity']`）。

在基本层面上，您将希望开始将这些信息持久保存在您的数据库中，然后偶尔启动一个进程来清理过时的会话。

例如

```
//On page load with a logged-in user
mysql_query("UPDATE `users`
             SET `last_activity` = '" . time() . "' 
             WHERE `username` = '" . mysql_real_escape_string($_SESSION['username']) . "'"); 
```

**请注意**，假设您已将一`INT`列添加到名为`last_activity`

然后在每 15 分钟执行一次的进程中：

```
mysql_query("UPDATE `users` 
             SET `online` = 0 
             WHERE `last_activity` < '" . strtotime('-30 minutes') . "'"); 
```

Unix 服务器有一个叫做**cron**的东西，特别是用于周期任务/脚本，所以这就是我推荐的启动清理脚本的方法。

# javascript - html代码插入javascript错误

> ID：14179318
> 
> 赞同：1
> 
> 时间：2013-01-06T04:32:48.917
> 
> 标签：javascript, jquery, html

我已经创建了一个 javascript 函数，并且我已经放入了 html 代码 javascipt，但是当我使用 if else 进行分支时，边线“if”上的语句“SyntaxError: missing) after argument list”出现错误是. 按照我的javascript代码。

```
function tabelListPegawai(data){
    return baris = $('<tr>\
            <td>'+data.nik+'</td>\
            <td>'+data.nama_pegawai+'</td>\
            <td>'+data.nama+'</td>\
            <td>'+data.nama_jabatan+'</td>\
            <td>'if(data.status == 1){'Karyawan Tetap'}else if(data.status == 2){'Karyawan Tidak Tetap'}'</td>\
            <td style="text-align: center;">\
            <a class="btn btn-small aksi_atas" rel="tooltip" title="Ubah" onclick="editPegawai('+data.id_pegawai+')"><i class="icon-edit"></i></a>\
            <a class="btn btn-small aksi_atas" rel="tooltip" title="Hapus" onclick="hapusPegawai('+data.id_pegawai+', '+data.nik+')"><i class="icon-remove"></i></a>\
            </td>\
    </tr>'); 
} 
```

你能帮助我吗。谢谢你

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-06T04:37:48.747

如果开关只有 1 或 2，那么这将起作用

```
 <td>' + (data.status == 1?  'Karyawan Tetap' : 'Karyawan Tidak Tetap') + '</td>\ 
```

或者你可以这样做

```
 var baris = $('<tr>\
  ...
 <td>';
 if(data.status == 1) baris+='Karyawan Tetap';
 else if(data.status == 2) baris+='Karyawan Tidak Tetap';
 baris+=' <td style="text-align: center;">\
 .... 
```

# c# - 是否可以将 C 引用添加到目标 c 绑定？

> ID：14179327
> 
> 赞同：6
> 
> 时间：2013-01-06T04:34:28.050
> 
> 标签：c#, objective-c, c, binding, xamarin.ios

我绑定的 Objective C 库中有一些 C 风格的函数，我需要在我的应用程序中访问这些函数。是否可以以任何方式将这些添加到绑定中，以便我可以在我的 C# 应用程序中访问它们？

来自 Cocos2d 的示例：

```
void ccGLActiveTexture( GLenum textureEnum )
{
#if CC_ENABLE_GL_STATE_CACHE
    NSCAssert1( (textureEnum - GL_TEXTURE0) < kCCMaxActiveTexture, @"cocos2d ERROR: Increase kCCMaxActiveTexture to %d!", (textureEnum-GL_TEXTURE0) );
    if( (textureEnum - GL_TEXTURE0) != _ccCurrentActiveTexture ) {
        _ccCurrentActiveTexture = (textureEnum - GL_TEXTURE0);
        glActiveTexture( textureEnum );
    }
#else
    glActiveTexture( textureEnum );
#endif
} 
```

编辑

链接到标题与我试图导入的功能：http: [//www.cocos2d-iphone.org/api-ref/2.0.0/cc_g_l_state_cache_8h_source.html](http://www.cocos2d-iphone.org/api-ref/2.0.0/cc_g_l_state_cache_8h_source.html)

我在我的 Extras.cs 中试过这个

```
public partial class CCGLProgram {
[DllImport("__Internal")]
    public static extern void ccGLUseProgram( uint program );

    public static void CCGLUseProgram(uint test)
    {
        ccGLUseProgram(test);
    }
} 
```

不幸的是，我得到一个未找到入口点的错误。我想我的第一个想法可能是函数被破坏了，但我想既然'extern C'在那里不应该发生？谁能帮我？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-01-06T16:20:23.833

您可以为您需要的任何其他 C API 添加*经典*的.NET **p/invokes** , `[DllImport]`。它们可以很容易地添加到您的绑定程序集中，因为绑定是一个**两步**过程。

首先，您的 API 定义（接口）与额外的定义（例如`enums`）一起被编译到一个临时程序集中。

接下来，该程序集将用于生成代码（使用`btouch`）：您将使用的绑定。在那个阶段可以包含更多代码，例如**p/invokes**，因此它们将成为您最终的、编译的、绑定程序集的一部分。

*[技巧：在 GIT 的monotouch-bindings](https://github.com/mono/monotouch-bindings)中有很多可用的示例，只需 grep`DllImport`即可找到一些。*

**编辑 (2013-01-08)**

Makefile 完成的**Release**构建（即使它只是调用`xcodebuild`）有问题，因为它在我`libcocos2d.a`在调试中重建时工作。例如

```
cd monotouch-bindings/cocos2d/binding
make debug 
```

为了测试这一点，我将您的代码（有点简化）添加到现有的`extra.cs`：

```
public partial class CCGLProgram {
    [DllImport ("__Internal", EntryPoint="ccGLUseProgram")]
    public static extern void UseProgram (uint program);
} 
```

`CCGLProgram.UseProgram (0);`并从`FinishedLaunching`Jumpy 演示应用程序的方法中添加了对的调用。

**编辑 (2013-01-12)**

调试和发布版本非常相似（不足为奇）。**调试**版本有一些与调试相关的定义（同样不足为奇）。OTOH**发布**版本已经完成`-fvisibility=hidden`（我需要稍后验证）听起来像是这个问题的一个很好的候选者。

这确实是 Xcode 项目中的一个（非默认设置，参见最后一列）构建设置。将此设置更改为**否**（通常是默认设置）将生成一个**发布**版本，您可以在其中使用*正常* `[DllImport]`（如上）调用 C 函数。谜团已揭开 ：-）

![Xcode 设置](../Images/e9e6541e2199784b22f6298d0e14c077.png)

**编辑 (2013-01-13)**

这个[变化现在](https://github.com/mono/monotouch-bindings/commit/336e84c3a5be77c70e362d447622ee52f3632c99)在 MonoTouch 的绑定 Makefile 中处理，即重新构建你的 Cocos2d.dll 程序集（同时执行`make clean`和`make clean all`删除托管代码和本机代码）将自动解决这个问题。玩得开心！

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-11T00:18:07.603

只是一个疯狂的猜测，您提到它适用于调试但不适用于发布。这可能会发生，因为符号它被 mtouch “剥离”了。

为了测试这一点，请在实际引用您的绑定项目的项目上添加`--nosymbolstrip`到发布配置并试一试。

这确实对应用程序的最终大小有影响，但至少您会知道这是问题所在，我们可以制定解决方法，将发布有关它的博客文章。

请让我知道这是否适合您。

希望这可以帮助。

亚历克斯

# php - 自定义帖子类型的永久链接在帖子名称之前添加帖子类型的名称

> ID：14179331
> 
> 赞同：0
> 
> 时间：2013-01-06T04:35:23.643
> 
> 标签：php, wordpress, custom-post-type

所以我创建了一个似乎有效的自定义帖子类型。

但是，创建帖子的永久链接在帖子名称前面具有自定义帖子类型的名称。

我收到的地址如下： `http://demoforhim2.e-ddl.com/movie_reviews/secondone/`

并试图将其更改为：`http://demoforhim2.e-ddl.com/secondone/`

我试过用空弹头重写，但没有用。

这是我的自定义帖子类型

```
add_action( 'init', 'create_movie_review' );
function create_movie_review() {
register_post_type( 'movie_reviews',
    array(
        'labels' => array(
            'name' => 'Movie Reviews',
            'singular_name' => 'Movie Review',
            'add_new' => 'Add New',
            'add_new_item' => 'Add New Movie Review',
            'edit' => 'Edit',
            'edit_item' => 'Edit Movie Review',
            'new_item' => 'New Movie Review',
            'view' => 'View',
            'view_item' => 'View Movie Review',
            'search_items' => 'Search Movie Reviews',
            'not_found' => 'No Movie Reviews found',
            'not_found_in_trash' => 'No Movie Reviews found in Trash',
            'parent' => 'Parent Movie Review'
        ),
        'public' => true,
        'menu_position' => 15,
        'supports' => array( 'title', 'editor', 'comments', 'thumbnail' ),
        'taxonomies' => array( '' ),
        'menu_icon' => plugins_url( 'images/16x16.png', __FILE__ ),
        'has_archive' => true,
        'rewrite' => array('slug' => '', 'with_front' => FALSE) /*doesnt seem to work*/
    )
);
} 
```

由于某种原因，上述内容无法正常工作。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-07T02:55:06.407

尝试这个...

```
'rewrite' => array('slug' => '/') 
```

输出：example.com/headline/

删除了弹头——没有多余的斜线。

记得刷新永久链接（设置->永久链接）

资料来源：[http ://wordpress.org/support/topic/how-can-i-create-a-custom-post-type-with-empty-slug](http://wordpress.org/support/topic/how-can-i-create-a-custom-post-type-with-empty-slug)

# javascript - 将 SVG 路径转换为相对命令

> ID：14179333
> 
> 赞同：6
> 
> 时间：2013-01-06T04:35:50.353
> 
> 标签：javascript, svg

给定一个 SVG 路径元素，如何将所有路径命令转换为相对坐标？例如，转换此路径（包括每个命令，绝对和相对，交错）：

```
<path d="M3,7 L13,7 m-10,10 l10,0 V27 H23 v10 h10
         C33,43 38,47 43,47 c0,5 5,10 10,10
         S63,67 63,67       s-10,10 10,10
         Q50,50 73,57       q20,-5 0,-10
         T70,40             t0,-15
         A5,5 45 1 0 40,20  a5,5 20 0 1 -10,-10
         Z" /> 
```

进入这个等效路径：

```
<path d="m3,7 l10,0 m-10 10 l10,0 v10 h10 v10 h10
         c0,6 5,10 10,10    c0,5 5,10 10,10
         s10,10 10,10       s-10,10 10,10
         q-23,-27 0,-20     q20,-5 0,-10
         t-3,-7             t0-15
         a5,5 45 1 0 -30,-5 a5,5 20 0 1 -10,-10
         z"/> 
```

这个问题是由[这个问题引起](https://stackoverflow.com/questions/9677885/convert-svg-path-to-absolute-commands)的。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2014-05-17T22:38:27.697

Snap.SVG 有`Snap.path.toRelative()`.

```
var rel = Snap.path.toRelative(abspathstring); 
```

[小提琴](http://jsfiddle.net/MC53K/)

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2013-01-06T04:41:43.647

我将[Phrogz'`convertToAbsolute`](https://stackoverflow.com/a/9677915/1130377)调整为这个`convertToRelative`函数：

```
function convertToRelative(path) {
  function set(type) {
    var args = [].slice.call(arguments, 1)
      , rcmd = 'createSVGPathSeg'+ type +'Rel'
      , rseg = path[rcmd].apply(path, args);
    segs.replaceItem(rseg, i);
  }
  var dx, dy, x0, y0, x1, y1, x2, y2, segs = path.pathSegList;
  for (var x = 0, y = 0, i = 0, len = segs.numberOfItems; i < len; i++) {
    var seg = segs.getItem(i)
      , c   = seg.pathSegTypeAsLetter;
    if (/[MLHVCSQTAZz]/.test(c)) {
      if ('x1' in seg) x1 = seg.x1 - x;
      if ('x2' in seg) x2 = seg.x2 - x;
      if ('y1' in seg) y1 = seg.y1 - y;
      if ('y2' in seg) y2 = seg.y2 - y;
      if ('x'  in seg) dx = -x + (x = seg.x);
      if ('y'  in seg) dy = -y + (y = seg.y);
      switch (c) {
        case 'M': set('Moveto',dx,dy);                   break;
        case 'L': set('Lineto',dx,dy);                   break;
        case 'H': set('LinetoHorizontal',dx);            break;
        case 'V': set('LinetoVertical',dy);              break;
        case 'C': set('CurvetoCubic',dx,dy,x1,y1,x2,y2); break;
        case 'S': set('CurvetoCubicSmooth',dx,dy,x2,y2); break;
        case 'Q': set('CurvetoQuadratic',dx,dy,x1,y1);   break;
        case 'T': set('CurvetoQuadraticSmooth',dx,dy);   break;
        case 'A': set('Arc',dx,dy,seg.r1,seg.r2,seg.angle,
                      seg.largeArcFlag,seg.sweepFlag);   break;
        case 'Z': case 'z': x = x0; y = y0; break;
      }
    }
    else {
      if ('x' in seg) x += seg.x;
      if ('y' in seg) y += seg.y;
    }
    // store the start of a subpath
    if (c == 'M' || c == 'm') {
      x0 = x;
      y0 = y;
    }
  }
  path.setAttribute('d', path.getAttribute('d').replace(/Z/g, 'z'));
} 
```

像这样使用问题的路径：

```
var path = document.querySelector('path');
convertToRelative(path);
console.log(path.getAttribute('d'));
// m 3 7 l 10 0 m -10 10 l 10 0 v 10 h 10 v 10 h 10 c 0 6 5 10 10 10 c 0 5 5 10 10 10 s 10 10 10 10 s -10 10 10 10 q -23 -27 0 -20 q 20 -5 0 -10 t -3 -7 t 0 -15 a 5 5 45 1 0 -30 -5 a 5 5 20 0 1 -10 -10 z 
```

我还制作了一个小 phantomjs shell 实用程序[svg2rel](https://gist.github.com/4464828#file-svg2rel)，它以这种方式转换 svg 中的所有路径（在同一个 gist 中有一个相应的[svg2abs](https://gist.github.com/4464828#file-svg2abs)，这是很好的衡量标准）。

# sql - 使用 SELECT 语句查询自定义 postgresql 参数

> ID：14179335
> 
> 赞同：6
> 
> 时间：2013-01-06T04:36:41.677
> 
> 标签：sql, database, postgresql, settings

在另一个[问题](https://stackoverflow.com/questions/8288823)中，有人询问如何`SHOW search_path;`使用 SELECT 查询来查询 postgresql 运行时参数（例如）。在答案中，建议使用

```
SELECT * FROM pg_settings WHERE name = 'search_path'; 
```

这很好用，但是如何为扩展中定义的自定义参数做到这一点？[（请参阅有关自定义选项](http://www.postgresql.org/docs/current/interactive/runtime-config-custom.html)的文档 ）。

例子：

```
SET abc.my_var = 1;
SHOW abc.my_var; 
```

输出

```
1 
```

但

```
SELECT * FROM pg_settings WHERE name = 'abc.my_var'; 
```

不返回任何行。是否有其他表/视图可以使用 SELECT 语句查询我的自定义参数？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-06T11:43:33.613

使用功能`current_setting()`

```
SELECT current_setting('abc.my_var'); 
```

[http://www.postgresql.org/docs/current/static/functions-admin.html#FUNCTIONS-ADMIN-SET](http://www.postgresql.org/docs/current/static/functions-admin.html#FUNCTIONS-ADMIN-SET)

# javascript - 函数对象、上下文和 this

> ID：14179339
> 
> 赞同：2
> 
> 时间：2013-01-06T04:37:16.063
> 
> 标签：javascript, this

> **可能重复：**
> [javascript 中的此运算符](https://stackoverflow.com/questions/3320677/this-operator-in-javascript)

术语*上下文*让我有点困惑。如果我在函数中声明一个函数，即嵌套函数并在那里执行本身，如下所示......

```
function  foo(){
    function fo(){
    alert(this);
       }
    fo();
   } 
```

*this*关键字应该指向函数对象而不是*窗口*，因为函数 fo() 在其父函数中。既然函数也是一个 javascript 对象，那么为什么 this 关键字遍历函数对象并指向窗口？同样this关键字指向函数操作的当前对象，所以函数对象就是嵌套函数操作的对象。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-06T04:42:39.140

如果你只是调用`foo()`顶层，它与`window.foo()`.
并且是foo`window`的实际值，所以，指向对象。`context``this``window`

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-06T05:07:30.527

如果您`this`在不是构造函数的函数内部随机使用，那么您将得到几个不同的结果之一：

```
function callThis () { return this; }

callThis(); // returns window object

var Bob = { func : callThis };

Bob.func(); // returns Bob

callThis.call(Bob);  // returns Bob 
```

Call 是一种用于确定调用上下文的方法。
如果无法通过以下方式确定调用的上下文：

一个。“。”前面是什么。( `Bob.func();`)
乙。明确传入的内容`.call()`，`.apply()`或`.bind()`

然后设置为`window`。

这就是解决上下文的方式。

因此，如果您有一个特定的对象`this`，那么您的解决方案如下：

```
function objMethod () {
    var self = this;
    function doStuff () {
        self.otherFunc();
        self.otherProperty = "bob";
    }

    doStuff();
}

var myObj = { myMethod : objMethod };
myObj.myMethod(); 
```

`myObj`调用`objMethod`上下文设置为`myObj`. 将对当前上下文 ( )
`objMethod`的引用保存为. 使用引用来修改被引用对象的属性。`myObj``self``doStuff`

```
function outer () {
    function inner () { this.property = "Bob"; }
    inner.call(this);
}

var obj = {};
outer.call(obj); 
```

在这里，`outer`传递了一个上下文，使用`.call()`.
然后`inner`通过`this`of `outer`，再次使用`.call()`

```
var bob = { name : "Bob" };

function sayName () { console.log(this.name); }

var bobFunc = sayName.bind(bob);
bobFunc(); 
```

在这里，我们使用`.bind()`创建一个版本的 sayName ，其中`this`始终设置为`bob`。
您可以随意混合和匹配这些系统（在处理异步编程时，您可能会这样做）。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-06T04:49:42.947

添加到 dlutxx 所说的内容。如果您有一个函数（在全局空间中）并且您只需将其`foo()`称为上下文就是窗口本身（因为该函数是窗口对象的成员）。但是，如果使用`new`关键字来获取函数的新实例，`this`则会引用函数对象。

```
function foo() {
    alert(this);
}

foo(); // "this" inside the function will be window

new foo(); // "this" inside the function will be the function object. 
```

如果你想`this`在函数内部有一个自定义值，你可以使用如下方式调用它`.call()`：

```
foo.call(x); // "this" inside the function will be x 
```

* * *

您的案例的示例代码：

```
function  foo(){
    function fo(){
        alert(this);
    }
    fo(); // "this" is window
    new fo(); // "this" is the function object
    fo.call('x'); // "this" is 'x'
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-01-06T05:04:53.200

我的理解是，虽然`function fo()`定义在 的范围内`function foo()`，这意味着`foo`除非你返回它，否则它不能从外部访问，但当你调用这个内部函数时，适用于值的规则`this`仍然和你调用的一样任何其他功能。

```
function f() {
    function g() {
        console.log(this)
    }
    console.log(this);
    g();
    g.apply(this);
    }

f()           // => Window, Window, Window
f.apply(this) // => Window, Window, Window
f.apply({})   // => Object, Window, Object 
```

# php - CakePHP 如何在一个字段上自动包含第三级关系？

> ID：14179349
> 
> 赞同：0
> 
> 时间：2013-01-06T04:38:58.057
> 
> 标签：php, cakephp

简而言之，`Users`have many `Posts`，拥有且属于 many `Tags`。

此外，`Users`拥有 many `Recipes`，拥有且属于 many `Ingredients`。

```
$this->User->find('all'); // Yields one level, no associated Tags or Ingredients. 
```

添加：

```
$this->User->find('all', array('recursive' => 2); // Yields two levels, all Tags and Ingredients 
```

如果我只想递归一个字段，即`Recipe`，那么我得到所有的`Ingredients`怎么办？

看来我想使用该[`contain`](http://book.cakephp.org/2.0/en/core-libraries/behaviors/containable.html)行为，但这似乎没有效果。如果我删除该`recursive`行为，我只会获得一级数据。

也将其包含在我的模型中。

```
public $actsAs = array('Containable'); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-06T05:49:13.437

您可以使用以下可[包含的](http://book.cakephp.org/2.0/en/core-libraries/behaviors/containable.html)行为。

```
$this->User->find('all', array('contain' => 'Ingredient')); 
```

虽然如果您已经使用过`recursive`，并且如果您希望删除所有帖子数据，那么一个快速的解决方案是`unbind`您的帖子模型，如下所示。

```
$this->User->unbindModel(
    array('hasMany' => array('Post'))
);
$this->User->find('all', array('recursive' => 2); 
```

# ios - 核心数据：如何在不通过字符串引用实体的情况下创建托管对象

> ID：14179350
> 
> 赞同：2
> 
> 时间：2013-01-06T04:39:14.087
> 
> 标签：ios, xcode, core-data

为了提高代码的可读性，我一直在为我的实体生成 Core Data 类，这样我就可以使用 getter 和 setter（我个人使用点符号）而不是`setValue: forKey:`

例如，`[aDateObject setValue:nameString forKey:@"name"];`
我将使用：`aDateObject.name = nameString;`

我想知道是否有一种等效的方法可以将新的托管对象插入到托管对象上下文中。例如，我目前`DateTimeFlightDataType`使用以下内容创建一个新的：

```
 aDateObject = (DateTimeFlightDataType*)[NSEntityDescription insertNewObjectForEntityForName:@"DateTimeFlightDataType"
                                                                         inManagedObjectContext:self.managedObjectContext]; 
```

`DateTimeFlightDataType`有没有办法使用我的类（ ）而不是实体字符串名称来创建这个对象并将其插入到上下文中以保持一致性？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-01-06T12:20:45.117

你可以写：

```
NSString *name = NSStringFromClass([DateTimeFlightDataType class]);
NSManagedObjectContext *ctx = self.managedObjectContext;
aDateObject = [NSEntityDescription insertNewObjectForEntityForName:name 
                                            inManagedObjectContext:ctx]; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-06T11:07:10.887

创建 MO 始终需要一个实体，并且这些实体始终由字符串定义。

常见的方法是以某种方式使其不需要硬编码，但可以从 MO 的类中派生出来。通常使用`NSStringFromClass`

# ios - ios - 将 NSArray 转换为 NSDictionary

> ID：14179354
> 
> 赞同：0
> 
> 时间：2013-01-06T04:40:20.890
> 
> 标签：ios, nsarray, nsdictionary

我想将 nsarray 转换为我正在使用的 nsdictionary

```
- (NSDictionary *) indexKeyedDictionaryFromArray:(NSArray *)array
{
    id objectInstance;
    NSUInteger indexKey = 0;

    NSMutableDictionary *mutableDictionary = [[NSMutableDictionary alloc] init];
    for (objectInstance in array)
        [mutableDictionary setObject:objectInstance forKey:[NSNumber numberWithUnsignedInt:indexKey++]];

    return (NSDictionary *)[mutableDictionary autorelease];
} 
```

输出结果是：

```
{
    0 =     {
        Event = "";
        ID = 1;    };
    3 =     {
        Event = "";
        ID = 77;    };
    2 =     {
        Event = "";
        ID = 23;    };
    1 =     {
        Event = "";
        ID = 45;    };
    7 =     {
        Event = "";
        ID = 10;    };
    5 =     {
        Event = "";
        ID = 26;    };
    6 =     {
Event = "";
        ID = 27;
    };
    8 =     {
Event = "";
        ID = 28;
    };
} 
```

转换为 nsdictionary 后，nsdictionary 的顺序与原来的顺序不一样，我想在 nsarray 中显示相同的顺序，我不知道怎么做？你能帮助我吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-06T04:46:09.923

`NSDictionary`没有订单。对键进行排序并使用它们来访问条目。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-06T20:02:34.130

如果我从您在评论中对@ACB 和@Zaph 的回复中理解正确，您需要执行以下操作：

> 维护一个集合，将整数键映射到按键排序的对象值。

如果我理解正确，那么数组对于您的目的来说还不够好，因为数组中的整数键不允许“漏洞”。但是，您需要考虑漏洞：在您问题的输出中，缺少 4 的键值对。出于这个原因，字典对你很有吸引力。

不幸的是，正如@Zaph 指出的那样，字典不允许您*维护*它包含的键值对的顺序。但是，您说，您只想显示按 a 中的键排序的字典中的值`UITableView`。据推测，字典序列化到磁盘的顺序（使用`writeToFile:atomically:`）并不重要，只要字典的内容在表视图中以正确的顺序显示即可。

字典可用于此目的，如下所示。首先，我们需要一个类`PFXKeyValuePair`；

```
@interface PFXKeyValuePair : NSObject
@property (nonatomic) id<NSCopying> key;
@property (nonatomic) id value;
+ (PFXKeyValuePair *)pairWithValue:(id)value forKey:(id<NSCopying>)key;
+ (NSArray *)pairsWithValues:(NSArray *)values forKeys:(NSArray *)keys;
@end

@implementation PFXKeyValuePair
+ (PFXKeyValuePair *)pairWithValue:(id)value forKey:(id<NSCopying>)key
{
    PFXKeyValuePair *pair = [[PFXKeyValuePair alloc] init];
    pair.value = value;
    pair.key = key;
    return pair;
}
+ (NSArray *)pairsWithValues:(NSArray *)values forKeys:(NSArray *)keys
{
    NSAssert(values.count == keys.count, @"The array of values must be the same size as the array of keys.");
    NSUInteger count = values.count;
    NSMutableArray *mutableRes = [NSMutableArray array];
    for (NSUInteger index = 0; index < count; index++) {
        PFXKeyValuePair *pair = [PFXKeyValuePair pairWithValue:values[index] forKey:keys[index]];
        [mutableRes addObject:pair];
    }
    return [mutableRes copy];
}
@end 
```

其次，我们需要一个类别方法`NSDictionary`：

```
@interface NSDictionary (PFXAdditions)
- (NSArray *)pfx_keyValuePairsSortedByKeyUsingComparator:(NSComparator)comparator;
@end

@implementation NSDictionary (PFXAdditions)
- (NSArray *)pfx_keyValuePairsSortedByKeyUsingComparator:(NSComparator)comparator
{
    NSArray *sortedKeys = [self.allKeys sortedArrayUsingComparator:comparator];
    NSArray *sortedValues = [self objectsForKeys:sortedKeys notFoundMarker:[NSNull null]];
    return [PFXKeyValuePair pairsWithValues:sortedValues forKeys:sortedKeys];
}
@end 
```

*注意*：在上面，`PFX`和`pfx`是占位符。您应该用适合您项目的前缀替换它们。

然后我们可以在填充我们的`UITableView`. 假设我们有一个财产

```
@property (nonatomic) NSDictionary *events; 
```

让我们假设表格视图只有一个部分将显示这些事件。

然后我们可以`–tableView:numberOfRowsInSection:`在我们的`UITableViewController`子类中实现如下：

```
– (NSInteger)tableView:(UITableView *)tableView numberOfRowsInSection:(NSInteger)section
{
    return self.events.count;
} 
```

在我们的实现中，`–tableView:numberOfRowsInSection:`我们可以确定字典中要使用的适当条目，如下所示：

```
- (UITableViewCell *)tableView:(UITableView *)tableView cellForRowAtIndexPath:(NSIndexPath *)indexPath
{
    //...
    NSArray *pairs = [self.events pfx_keyValuePairsSortedByKeyUsingComparator:^(id obj1, id obj2) {
        NSNumber *key1 = (NSNumber *)obj1;
        NSNumber *key2 = (NSNumber *)obj2;
        return [key1 compare:key2];
    }];

    NSUInteger index = [indexPath indexAtPosition:1];
    PFXKeyValuePair *pair = pairs[index];
    /*
    At this point, pair.value will be a dictionary as in your output above 
    holding a value for the key @"Event" and a value for the key @"ID".
    */
    //...
} 
```

这可以通过创建`pairs`一个属性并仅在必要时计算它来加快速度（例如，仅`pairs`在重新加载表数据之前进行计算）。

**注意**：使用这种方法，字典仍然不会`-writeToDisk:atomically:`“按顺序”序列化到磁盘（调用时），并且您的输出看起来仍然与您的问题相同。然而，这并不重要：当数据在表格视图中显示给用户时，数据将按照您的希望排序。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2015-10-29T07:07:29.730

这是获取员工列表 NSMutableArray 并创建 NSMutableDictionary 的示例之一......

```
NSMutableArray *emloyees = [[NSMutableArray alloc]initWithObjects:@"saman",@"Ruchira",@"Rukshan",@"ishan",@"Harsha",@"Ghihan",@"Lakmali",@"Dasuni", nil];

NSMutableDictionary *dict = [NSMutableDictionary dictionary];
for (NSString *word in emloyees) {

NSString *firstLetter = [[word substringToIndex:1] uppercaseString];
letterList  = [dict objectForKey:firstLetter];

if (!letterList) {
    letterList = [NSMutableArray array];
    [dict setObject:letterList forKey:firstLetter];
}

[letterList addObject:word];}NSLog(@"dic %@",dict); 
```

# c - 如何在 C 中删除文件的第一行（未覆盖）？

> ID：14179355
> 
> 赞同：0
> 
> 时间：2013-01-06T04:40:29.447
> 
> 标签：c, logging

> **可能重复：**
> [从 C 语言文件中删除一行](https://stackoverflow.com/questions/1151713/delete-a-line-from-a-file-in-c-language)

我知道我们可以覆盖第一行，但在这里我需要完全删除它。

例如，该文件包含 100 行，在我删除第一行后，还剩下 99 行，如果减小文件大小。

请注意，该文件非常大。

我不知道如何开始，有什么建议吗？非常感谢 ！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-06T05:03:10.403

将文件的所有文本收集到缓冲区中并将其复制回您的文件中，只要出现所需的行，就跳过它。这就是你所能做的。

# google-app-engine - GAE Go 模板包中的条件语句

> ID：14179359
> 
> 赞同：11
> 
> 时间：2013-01-06T04:40:38.080
> 
> 标签：google-app-engine, templates, go, conditional

如何在 GAE GO 的 html 模板中执行条件语句？我试图完成此操作以在选择 html 标记中选择一个选项：

```
<select name=".Grade">
          <option value=""></option>
          <option value="1" {{ if .Grade="1" }} selected="selected" {{ end }}>Grade One</option>
          <option value="2" {{ if .Grade="2" }} selected="selected" {{ end }}>Grade Two</option>
          <option value="3" {{ if .Grade="3" }} selected="selected" {{ end }}>Grade Three</option>
          <option value="4" {{ if .Grade="4" }} selected="selected" {{ end }}>Grade Four</option>
          <option value="5" {{ if .Grade="5" }} selected="selected" {{ end }}>Grade Five</option>
          <option value="6" {{ if .Grade="6" }} selected="selected" {{ end }}>Grade Six</option>
</select> 
```

有

```
{{ if .Grade }} selected="selected" {{ end }} 
```

在参考文档中，但这仅在`.Grade`具有价值时才评估为真。任何帮助将不胜感激。谢谢！

* * *

## 回答 #1

> 赞同：18
> 
> 时间：2013-01-06T07:55:33.510

基本模板包中没有相等语句。
这是[来自 golang-nuts 的一个有趣的讨论](https://groups.google.com/forum/?fromgroups=#!topic/golang-nuts/OEdSDgEC7js)。

你有几种可能性：

*   为相等定义一个外部函数，就像 Russ Cox 在 golang-nuts 线程中建议的那样，并使用`if`条件对其进行测试
*   使用基本模板包可以理解的东西（见下面我的代码）
*   从模板中删除一些逻辑：您可以构造一个带有`selected`布尔字段的数据类型，而不是使用 6 个硬编码字段，并将包含 6 个这些对象的数组提供给带有`range`语句的模板

我使用一片布尔值重新创建了您的示例：

```
func main() {
    temp,err := template.ParseFiles("template.html")
    if err != nil {
        panic(err)
    }

    g := make([]bool, 7)
    g[1] = true
    temp.Execute(os.Stdout, &g)
} 
```

模板中的一行如下所示：

```
<option value="3"{{ if index . 3 }} selected="selected"{{ end }}>Grade Three</option> 
```

这对我来说看起来不太好。但我想说所有解决方案都有其缺点，这是一个口味问题（第三种解决方案应该更干净，但对于这样一个简单的事情可能被认为是矫枉过正）。

**编辑 (2013/12/11)**

在[Go 1.2](http://golang.org/doc/go1.2)（[2013/12/01 发布](http://blog.golang.org/go12)）中，[模板引擎](http://tip.golang.org/pkg/text/template)已经更新并包含了新的操作符，包括比较。现在应该可以按预期工作：

```
{{if eq .Grade 1 }} selected="selected" {{end}} 
```

不过，您仍然可以选择在模板中保留尽可能少的逻辑。

# apache - mod_deflate 日志记录

> ID：14179362
> 
> 赞同：0
> 
> 时间：2013-01-06T04:40:59.247
> 
> 标签：apache, logging

我在 Apache2.2 设置的 Includes 目录中有以下内容，但没有记录

```
 AddOutputFilterByType DEFLATE text/html text/plain php application/x-httpd-php application/json
    #Highest 9 - Lowest 1                                                                
    DeflateCompressionLevel 9

   #Optional
   #Skip browsers with known problems
   BrowserMatch ^Mozilla/4 gzip-only-text/html
   BrowserMatch ^Mozilla/4\.0[678] no-gzip
   BrowserMatch \bMSIE !no-gzip !gzip-only-text/html

   #Optional
   #Logging
   DeflateFilterNote ratio
   LogFormat '"%r" %b (%{ratio}n) "%{User-agent}i"' deflate
   CustomLog /usr/vhosts/example.com/logs/deflate_log deflate 
```

但是，我没有记录。日志文件的权限是 root:wheel -rw-r--r--

想法？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-28T13:59:07.973

这里有一个猜测，但您提到 Apache 包含这让我觉得您的站点有单独的文件或多个虚拟主机减速，因此请确保您指定要使用的日志格式，例如：

```
<VirtualHost *:443>
...

ServerAdmin support@danols.com
ServerName webdesign.danols.com
ServerAlias www.webdesign.danols.com new.webdesign.danols.com

#LogLevel info
ErrorLog ${APACHE_LOG_DIR}/webdesign.danols.com-errors.log
CustomLog ${APACHE_LOG_DIR}/webdesign.danols.com-vhost_combined_deflate-access.log vhost_combined_deflate

...
    </VirtualHost> 
```

然后验证该站点实际上正在使用 - [http://www.whatsmyip.org/http-compression-test/](http://www.whatsmyip.org/http-compression-test/)进行压缩，现在您的日志应该显示如下（注意请求末尾的压缩统计信息）：

```
webdesign.danols.com:443 72.38.184.18 - - [28/Mar/2013:09:52:19 -0400] "GET /static/template/images/icons/dark/ohloh-w32-h32.png HTTP/1.1" 200 3076 "https://webdesign.danols.com/" "Mozilla/5.0 (Windows NT 6.1; WOW64) AppleWebKit/537.31 (KHTML, like Gecko) Chrome/26.0.1410.43 Safari/537.31" "2595/2867 (90%)"
webdesign.danols.com:443 72.38.184.18 - - [28/Mar/2013:09:52:19 -0400] "GET /static/template/images/icons/dark/designquote-w32-h32.png HTTP/1.1" 200 2564 "https://webdesign.danols.com/" "Mozilla/5.0 (Windows NT 6.1; WOW64) AppleWebKit/537.31 (KHTML, like Gecko) Chrome/26.0.1410.43 Safari/537.31" "2079/2360 (88%)"
webdesign.danols.com:443 72.38.184.18 - - [28/Mar/2013:09:52:19 -0400] "GET /static/template/images/bg_direction_nav.png HTTP/1.1" 200 2612 "https://webdesign.danols.com/" "Mozilla/5.0 (Windows NT 6.1; WOW64) AppleWebKit/537.31 (KHTML, like Gecko) Chrome/26.0.1410.43 Safari/537.31" "2137/2427 (88%)"
webdesign.danols.com:443 72.38.184.18 - - [28/Mar/2013:09:52:19 -0400] "GET /static/template/images/icons/dark/designgigs-w32-h32.png HTTP/1.1" 200 2372 "https://webdesign.danols.com/" "Mozilla/5.0 (Windows NT 6.1; WOW64) AppleWebKit/537.31 (KHTML, like Gecko) Chrome/26.0.1410.43 Safari/537.31" "1887/2171 (86%)" 
```

# android - 如何在不使用缩放控件的情况下检测 webview 中的缩放何时更改？

> ID：14179363
> 
> 赞同：1
> 
> 时间：2013-01-06T04:40:58.370
> 
> 标签：android, android-webview

我有一个 webview 列表，我需要知道用户何时更改一个 webview 中的缩放级别，以便在其他 webview 中应用新的缩放。

目前我添加了 OnZoomListener 接口并且我有`onZoom(int i)`，但它仅在从缩放控件更改缩放时调用，并且当用户使用手指更改缩放时我需要检测缩放更改。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-06T07:21:45.457

setLoadWithOverviewMode(boolean) 加载完全缩小的 WebView，setUseWideViewPort(boolean) 使 Webview 具有正常的视口。所以用这些方法来评价。

[http://developer.android.com/reference/android/webkit/WebSettings.html](http://developer.android.com/reference/android/webkit/WebSettings.html)

# c++ - #define 字符串的类型是什么？

> ID：14179365
> 
> 赞同：0
> 
> 时间：2013-01-06T04:41:00.653
> 
> 标签：c++, types, registry

我想我做错了。我正在为 MSR 类型对象制作 SO。默认情况下（如果我没看错的话）OPOS 使用 unicode。所以我让我的 C++ 自动化类也使用 unicode，据我所知，没有办法绕过它。在 OPOS 头类中有 2 个字符串定义，第三个是我创建的：

```
#define OPOS_ROOTKEY "SOFTWARE\\OLEforRetail\\ServiceOPOS"
#define OPOS_CLASSKEY_MSR     "MSR"
#define OPOSMSR OPOS_ROOTKEY "\\" OPOS_CLASSKEY_MSR "\\" 
```

这样一个人就可以访问注册表。所以我决定让自己成为一个注册表助手类，而不是把它全部放在我的 SO 中。看起来我很难弄清楚我最终应该如何做到这一点。我从另一个 SO 复制了工作代码，但我觉得该代码没有正确制作，我希望我的代码第一次正确制作。

所以我想出了这个，但我不知道如何将我的字符串与类名结合起来。我将类名作为构造函数中的参数。

```
RegistryHelper::RegistryHelper(LPCTSTR deviceName) {
    cout << "RegistryHelper::RegistryHelper()+" << endl;
    baseOpen = true;

    CString test;
    test.Format("%s%s",OPOSMSR, theClass); //fail
    REGSAM access = KEY_READ | KEY_WOW64_64KEY;
    LONG nError = RegOpenKeyEx(HKEY_LOCAL_MACHINE, theClass ,0, access,&hBaseKey); //not what I want, but would compile, I want test here instead of theClass

    if (nError != ERROR_SUCCESS) {
        cerr << "(E)RegistryHelper::RegistryHelper(): Failed to load base key. [" <<(int)nError << "]" << endl;
        RegCloseKey(hBaseKey);
        baseOpen = false;
    }

    cout << "RegistryHelper::RegistryHelper()-" << endl;
} 
```

关于我做错了什么的任何提示？因为我在这个主题上：我将为此发布我的所有代码。有多糟糕？

我所追求的是这样的

```
unsigned int baud;
char* parity;

bool MSRSO::LoadRegistryValuesIntoMemory(LPCSTR deviceName) {
    RegistryHelper reg(deviceName);
    bool required = reg.LoadDWORD("BaudRate", 19200, baud);
    required = required && reg.LoadREGSZ("Parity", "NONE", parity);
    //other values
    reg.Close();
    return required;
} 
```

请记住，我是 C# 和 java 人，所以我的数据类型可能有误。以前，我只在一个超级旧的 linux 机器上用 C++ 为自己编写了简单的 hello world 程序和临时转换程序。尽管我在 C++ 方面越来越好，但我仍然对此感到不舒服。那么总结一下#define类型的数据类型是什么？如何将它与 LPCTSTR 结合使用？我应该这样做以便我只能访问注册表值吗？

谢谢你。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-07T21:00:25.983

您的代码在窄字符串和宽字符串之间存在不一致。文字`'a'`具有类型`char`，并且是一个窄字符。文字`L'a'`具有类型`wchar_t`，并且是宽字符。

接下来，我们可以将这些应用于字符串：
`"abc"`是一个窄字符串类型`const char (&)[4]`。
`L"abc"`是一个宽字符串类型`const wchar_t (&)[4]`。

为了减少同时支持两者的麻烦，有所谓的`TCHAR`. 在 Windows 标头中定义，此类型为`char`或`wchar_t`，取决于是否`UNICODE`定义。如果已定义，`TCHAR`将是`wchar_t`. 如果未定义，`TCHAR`则为`char`.

这还带有一个`TEXT`宏，可以将字符串文字转换为 type 的字符`TCHAR`。也就是说，如果`UNICODE`已定义，`TEXT("abc")`则等价于`L"abc"`，如果未定义，`TEXT("abc")`则等价于`"abc"`。

字符串也被赋予了一些类型定义：

```
LP[C][W|T]STR 
```

`LP`表示指针，表示“`STR`指向字符串”。如果`C`包含，该字符串将是一个常量。如果包含`W`or `T`，则字符串将分别由`wchar_t`或类型的字符`TCHAR`组成。

例如：

```
LPSTR: char *
LPCSTR: const char *
LPWSTR: wchar_t *
LPCTSTR: const TCHAR * 
```

使用此信息，您可以正确理解为什么使用`TCHAR`并且`TEXT`会导致您的代码与其他内容兼容，无论它使用窄字符还是宽字符。

这是一个简单的示例，请记住`std::string`，出于我们的目的，`std::basic_string<char>`：

```
std::basic_string<TCHAR> s(TEXT("abcd"));
s += TEXT("ZYXW"); //s is now `TEXT("abcdZXW") 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-06T04:47:09.160

改变

```
#define OPOS_ROOTKEY "SOFTWARE\\OLEforRetail\\ServiceOPOS"
#define OPOS_CLASSKEY_MSR "MSR"
#define OPOSMSR OPOS_ROOTKEY "\\" OPOS_CLASSKEY_MSR "\\"

```

至

```
#define OPOS_ROOTKEY L"SOFTWARE\\OLEforRetail\\ServiceOPOS"
#define OPOS_CLASSKEY_MSR L"MSR"
#define OPOSMSR OPOS_ROOTKEY L"\\" OPOS_CLASSKEY_MSR "\\"

```

# r - 重塑\堆叠R中的多个变量，三元组到二元组

> ID：14179373
> 
> 赞同：1
> 
> 时间：2013-01-06T04:43:02.237
> 
> 标签：r, reshape

我有数据描述了一个人（玩家 1）与其他两个人（玩家 2 和玩家 3）的互动。每一行都描述了玩家的独特组合，但我想分别分析玩家 1 到玩家 2 和玩家 1 到玩家 3 对子。为了实现这一点，我设想了某种堆叠，我可以在其中融合玩家二和三的描述性变量，同时在每一行中保留玩家 1 的数据。让事情变得更复杂我对每个人都有多个描述性变量。

这里有一小部分数据可供使用（实际上，我想堆叠/融化的玩家 2 和 3 的描述性变量要多得多）：

```
 p1_id <- c(1021, 1021, 1021, 1021, 1021, 1021, 1021, 1021, 1021, 1021, 1021, 1021, 1021, 1021, 1032, 1032, 1032, 1032, 1032, 1032)
    p1_age <- c(53, 53, 53, 53, 53, 53, 53, 53, 53, 53, 53, 53, 53, 53, 53, 45, 45, 45, 45, 45)
    p2_id <- c(14372, 15022,  9072, 15052, 2161, 18381, 15032, 14451, 16322, 11142, 8182,  1131, 7092, 4071, 16191, 18142, 4222, 11052, 2202, 16151)
    p2_money <- c(4, 2, 2, 2, 2, 2, 2, 2, 2, 2, 10, 0, 0, 10, 0, 6, 6, 4, 6, 6)
    p2_age <- c(50, 33, 56, 23, 29, 26, 28, 34, 20, 41, 34, 45, 23, 35, 25, 30, 40, 41, 45, 28)
    p3_id <- c(5151, 16181, 5182, 18462, 7231, 14372, 3052, 14532, 4152, 15012, 19212, 9062, 9032, 18351, 14461, 16291, 17102, 10102, 7051, 16282)
    p3_money <- c(4, 2, 2, 2, 2, 2, 2, 2, 2, 2, 0, 10, 10, 0, 10, 6, 6, 4, 6, 4)
    p3_age <- c(30, 29, 22, 22, 43, 50, 23, 32, 31, 46, 36, 36, 21, 27, 49, 38, 40, 48, 26, 32)
    df <- data.frame(p1_id, p1_age, p2_id, p2_money, p2_age, p3_id, p3_money, p3_age) 
```

数据框：

```
 p1_id p1_age p2_id p2_money p2_age p3_id p3_money p3_age
     1   1021     53 14372        4     50  5151        4     30
     2   1021     53 15022        2     33 16181        2     29
     3   1021     53  9072        2     56  5182        2     22
     4   1021     53 15052        2     23 18462        2     22
     5   1021     53  2161        2     29  7231        2     43
     6   1021     53 18381        2     26 14372        2     50
     7   1021     53 15032        2     28  3052        2     23
     8   1021     53 14451        2     34 14532        2     32
     9   1021     53 16322        2     20  4152        2     31
     10  1021     53 11142        2     41 15012        2     46
     11  1021     53  8182       10     34 19212        0     36
     12  1021     53  1131        0     45  9062       10     36
     13  1021     53  7092        0     23  9032       10     21
     14  1021     53  4071       10     35 18351        0     27
     15  1032     53 16191        0     25 14461       10     49
     16  1032     45 18142        6     30 16291        6     38
     17  1032     45  4222        6     40 17102        6     40
     18  1032     45 11052        4     41 10102        4     48
     19  1032     45  2202        6     45  7051        6     26
     20  1032     45 16151        6     28 16282        4     32 
```

如果我上面的描述太令人困惑，我希望重塑后的数据如下所示：

```
 row p1_id p1_age p23_id p23_money p23_age 
     1   1021     53 14372        4     50  
     2   1021     53 15022        2     33 
     3   1021     53  9072        2     56  
     4   1021     53 15052        2     23 
     5   1021     53  2161        2     29  
     6   1021     53 18381        2     26 
     7   1021     53 15032        2     28 
     8   1021     53 14451        2     34
     9   1021     53 16322        2     20
     10  1021     53 11142        2     41 
     11  1021     53  8182       10     34 
     12  1021     53  1131        0     45  
     13  1021     53  7092        0     23  
     14  1021     53  4071       10     35 
     15  1032     53 16191        0     25 
     16  1032     45 18142        6     30 
     17  1032     45  4222        6     40 
     18  1032     45 11052        4     41 
     19  1032     45  2202        6     45  
     20  1032     45 16151        6     28 
     21  1021     53  5151        4     30  
     22  1021     53 16181        2     29
     23  1021     53  5182        2     22
     24  1021     53 18462        2     22
     25  1021     53  7231        2     43 
     26  1021     53 14372        2     50
     27  1021     53  3052        2     23 
     28  1021     53 14532        2     32 
     28  1021     53  4152        2     31
     30  1021     53 19212        0     36
     31  1021     53  9062       10     36 
     32  1021     53  9032       10     21 
     33  1021     53 18351        0     27
     34  1032     53 16191        0     25
     35  1032     53 14461       10     49
     36  1032     53 16291        6     38
     37  1032     53 17102        6     40 
     38  1032     53 10102        4     48 
     39  1032     53  7051        6     26 
     40  1032     53 16282        4     32 
```

谢谢你的帮助！

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-06T07:58:50.583

如果您按如下方式修改列名，这很容易完成：

```
names(df) <- gsub("(.*)_(.*)", "\\2\\.\\1", names(df))
names(df)
# [1] "id.p1"    "age.p1"   "id.p2"    "money.p2" 
# [5] "age.p2"   "id.p3"    "money.p3" "age.p3" 
```

接下来，使用`data.frame`您的“row.names”作为基础 R 中的“idvar” `reshape()`。

```
reshape(df, direction = "long", idvar = "row.names",
        timevar = "person", varying = 3:8)
#       id.p1 age.p1 person    id money age row.names
# 1.p2   1021     53     p2 14372     4  50         1
# 2.p2   1021     53     p2 15022     2  33         2
# 3.p2   1021     53     p2  9072     2  56         3
# 4.p2   1021     53     p2 15052     2  23         4
# 5.p2   1021     53     p2  2161     2  29         5
# 6.p2   1021     53     p2 18381     2  26         6
# 7.p2   1021     53     p2 15032     2  28         7
# 8.p2   1021     53     p2 14451     2  34         8
# 9.p2   1021     53     p2 16322     2  20         9
# 10.p2  1021     53     p2 11142     2  41        10
# 11.p2  1021     53     p2  8182    10  34        11
# 12.p2  1021     53     p2  1131     0  45        12
# 13.p2  1021     53     p2  7092     0  23        13
# 14.p2  1021     53     p2  4071    10  35        14
# 15.p2  1032     53     p2 16191     0  25        15
# 16.p2  1032     45     p2 18142     6  30        16
# 17.p2  1032     45     p2  4222     6  40        17
# 18.p2  1032     45     p2 11052     4  41        18
# 19.p2  1032     45     p2  2202     6  45        19
# 20.p2  1032     45     p2 16151     6  28        20
# 1.p3   1021     53     p3  5151     4  30         1
# 2.p3   1021     53     p3 16181     2  29         2
# 3.p3   1021     53     p3  5182     2  22         3
# 4.p3   1021     53     p3 18462     2  22         4
# 5.p3   1021     53     p3  7231     2  43         5
# 6.p3   1021     53     p3 14372     2  50         6
# 7.p3   1021     53     p3  3052     2  23         7
# 8.p3   1021     53     p3 14532     2  32         8
# 9.p3   1021     53     p3  4152     2  31         9
# 10.p3  1021     53     p3 15012     2  46        10
# 11.p3  1021     53     p3 19212     0  36        11
# 12.p3  1021     53     p3  9062    10  36        12
# 13.p3  1021     53     p3  9032    10  21        13
# 14.p3  1021     53     p3 18351     0  27        14
# 15.p3  1032     53     p3 14461    10  49        15
# 16.p3  1032     45     p3 16291     6  38        16
# 17.p3  1032     45     p3 17102     6  40        17
# 18.p3  1032     45     p3 10102     4  48        18
# 19.p3  1032     45     p3  7051     6  26        19
# 20.p3  1032     45     p3 16282     4  32        20 
```

### 更新：使用`dcast()`“reshape2”

希望更精通“reshape2”包（或者可能使用“plyr”）的人能够提出比以下更简洁的解决方案。该解决方案包括：

1.  一个虚拟的“id”列。
2.  “融化”数据集。
3.  使用`colsplit()`（来自“reshape2”）生成几个新列。
4.  用于`dcast()`获得所需的形式。

这是它的样子：

```
df$id <- 1:nrow(df)
df2 <- melt(df, id.vars=c("id", "p1_id", "p1_age"))
df2 <- cbind(df2[-4], 
             colsplit(df2$variable, "_", c("person", "var")))
head(df2)
out <- dcast(df2, id + p1_id + p1_age + person ~ var)
list(head(out), tail(out))
# [[1]]
#   id p1_id p1_age person age    id money
# 1  1  1021     53     p2  50 14372     4
# 2  1  1021     53     p3  30  5151     4
# 3  2  1021     53     p2  33 15022     2
# 4  2  1021     53     p3  29 16181     2
# 5  3  1021     53     p2  56  9072     2
# 6  3  1021     53     p3  22  5182     2
# 
# [[2]]
#    id p1_id p1_age person age    id money
# 35 18  1032     45     p2  41 11052     4
# 36 18  1032     45     p3  48 10102     4
# 37 19  1032     45     p2  45  2202     6
# 38 19  1032     45     p3  26  7051     6
# 39 20  1032     45     p2  28 16151     6
# 40 20  1032     45     p3  32 16282     4 
```

所以，基本上，无论你采取什么方法，看起来你都必须对你的方法进行一些预处理，`data.frame`以使其格式对这种转换更友好。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-06T05:15:40.117

这可能不是最有效的方法，但我认为它可以满足您的要求。

```
df <- data.frame(p1_id, p1_age, p2_id, p2_money, p2_age, p3_id, p3_money, p3_age)

player2 <- df[,names(df) %in% c('p1_id','p1_age','p2_id','p2_money','p2_age')]
colnames(player2) <- c('p1_id', 'p1_age', 'p23_id', 'p23_money', 'p23_age')

player3 <- df[,names(df) %in% c('p1_id','p1_age','p3_id','p3_money','p3_age')]
colnames(player3) <- c('p1_id', 'p1_age', 'p23_id', 'p23_money', 'p23_age')

df2 <- rbind(player2, player3)
df2 
```

除了为什么您发布的数据集中 1032 的年龄会发生变化？玩家 1032 在一个数据集中是 45 岁，在另一个数据集中是 53 岁。所以我不明白一些事情，也许我的回答没有做你想做的事。

实际上，玩家 1032 在原始数据集的一行中是 53 岁，在五行中是 45 岁。一共6行。

在您的重构数据集中，玩家 1032 在八行中为 53 岁，在五行中为 45 岁。一共13行。

这是印刷错误吗？如果不是，我的回答是不正确的。

编辑：

`n.player1`假设我上面的回答是正确的，并且假设列总是按玩家和属性排序，下面的代码将适用于任意数量的玩家属性，并且只需要更改`df2`.

```
df <- data.frame(p1_id, p1_age, p2_id, p2_money, p2_age, p3_id, p3_money, p3_age)

n.player1 <- 2

player2 <- df[,1:(n.player1+((ncol(df)-n.player1)/2))]
colnames(player2) <- paste("X", seq_along(1:ncol(player2)), sep="")

player3 <- df[,c(1:n.player1,(ncol(player2)+1):ncol(df))]
colnames(player3) <- paste("X", seq_along(1:ncol(player3)), sep="")

df2 <- rbind(player2, player3)
colnames(df2) <- c('p1_id', 'p1_age', 'p23_id', 'p23_money', 'p23_age')
df2 
```

# php - PHP多个数组到一个关联数组

> ID：14179374
> 
> 赞同：1
> 
> 时间：2013-01-06T04:43:08.303
> 
> 标签：php, arrays, merge, multidimensional-array, associative

如何合并这三个数组

```
$name ={"Tom", "John", "David"};
$v1 = {"Tom":100, "David":200};
$v2 = {"John":500, "Tom":400}; 
```

以两种不同的方式进入一个多维关联数组？一种方法是键顺序应该与数组“名称”的键顺序相同。

```
$name_merged_original_order = array (
    "Tom" => Array(
        "v1" => 100,
        "v2" => 400
    ),
    "John" => Array(
        "v1" => "N/A",
        "v2" => 500
    ),
    "David" => Array(
        "v1" => 100,
        "v2" => "N/A"
    )
) 
```

另一种方法是数组“名称”的字母顺序：

```
$name_merged_asc = array (
    "David" => Array(
        "v1" => 100,
        "v2" => "N/A"
    ),
    "John" => Array(
        "v1" => "N/A",
        "v2" => 200
    ),
    "Tom" => Array(
        "v1" => 100,
        "v2" => 400
    ),
) 
```

棘手的部分是数组“v1”和“v2”没有作为“name”的键排序。他们也没有“名称”中的所有键。谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-06T04:59:49.197

它未经测试且最简单的解决方案：

```
$name_merged_original_order = array();
foreach($name as $key){
    $name_merged_original_order[$key] = array();
    if(array_key_exists($key, $v1)){
        $name_merged_original_order[$key]['v1'] = $v1[$key];
    }
    else{
        $name_merged_original_order[$key]['v1'] = 'N/A';
    }
    if(array_key_exists($key, $v2)){
        $name_merged_original_order[$key]['v2'] = $v2[$key];
    }
    else{
        $name_merged_original_order[$key]['v2'] = 'N/A';
    }
}

sort($name);
$name_merged_asc = array();
foreach($name as $key){
    $name_merged_asc[$key] = array();
    if(array_key_exists($key, $v1)){
        $name_merged_asc[$key]['v1'] = $v1[$key];
    }
    else{
        $name_merged_asc[$key]['v1'] = 'N/A';
    }
    if(array_key_exists($key, $v2)){
        $name_merged_asc[$key]['v2'] = $v2[$key];
    }
    else{
        $name_merged_asc[$key]['v2'] = 'N/A';
    }
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-28T13:00:58.613

例如，您有以下数组：

```
<?php
$FirstArrays = array('a', 'b', 'c', 'd');
$SecArrays = array('1', '2', '3', '4'); 
```

1)

```
foreach($FirstArrays as $index => $value) {
    echo $FirstArrays[$index].$SecArrays[$index];
    echo "<br/>";
} 
```

或 2)

```
for ($index = 0 ; $index < count($FirstArrays); $index ++) {
  echo $FirstArrays[$index] . $SecArrays[$index];
  echo "<br/>";
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-06T05:06:43.993

据我了解，您想要这样的东西：

```
$name = array("Tom", "John", "David");
$result = array();
$v1 = array("Tom" => "200", "John" => "100", "David" => "10");
$v2 = array("Tom" => "254", "David" => "156");
$vars = array("v1", "v2");
foreach($name as $n)
{
  $result[$n] = array();
  foreach($vars as $v)
  {
    if(array_key_exists($n, ${$v}))
      $result[$n][$v] = ${$v}[$n];
  }
} 
```

我希望`$result`是你需要的。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-01-06T04:59:49.867

从您的评论中假设您只想要在所有 3 个数组中匹配的项目：

```
for( $i=0; $i< count($name) ; $i++){
    if( !empty( $v1[ $name[$i]]) &&  !empty( $v2[ $name[$i]]) ){
       $newArray[$name[$i]]= array( 'v1'=> $v1[ $name[$i]], 'v2'=> $v2[ $name[$i]]):
    }
} 
```

排序：

```
 asort($newArray); 
```

# css - 子 Div 漂浮在父级之外

> ID：14179376
> 
> 赞同：0
> 
> 时间：2013-01-06T04:43:25.323
> 
> 标签：css, html

```
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
<title>Untitled Document</title>
<style type="text/css">
<!--
#container{
    background:#0033FF;
    float:left;
    width:150px;
}
#text{
background:#00FF00;
width:150px;
float:left;
}
#tooltip{
position:relative;
right:-100%;
background:#FF0000;
display:inline-block;
float:left;
}
-->
</style>
</head>

<body>

<div id="container">
    <div id="text">Here is some text</div>
<div id="tooltip">tip</div>
</div>
</body>
</html> 
```

我试图用上面的代码做的是有一个容器 div，然后是一个带有文本的 div，然后是一个带有工具提示的 div。我将工具提示定位为相对位置和右：-100%，以便无论文本和容器的宽度如何，它都应该直接显示在文本的右侧。这种工作，但是工具提示现在出于某种原因转到了新行。

我的问题是这个。为什么在上面的代码中 id tooltip 的 div 在一个新行上？我真正想要的是它在同一条线上。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-06T04:51:01.943

```
#container{
background:#0033FF;
float:left;
width:150px;
position:relative;
}
#text{
background:#00FF00;
width:150px;
float:left;
word-wrap:break-word;
}
#tooltip{
right:0px;
top:0px;
position:absolute;
background:#FF0000;
display:inline-block;
float:left;
} 
```

您可以使容器的位置相对。并且 Tooltip 被定位为绝对。[工作小提琴](http://jsfiddle.net/Edqh8/)

# php - 如何在 PHP 中替换/转义 U+2028 或 U+2029 字符以阻止我的 JSONP API 中断

> ID：14179377
> 
> 赞同：20
> 
> 时间：2013-01-06T04:43:27.513
> 
> 标签：php, escaping, jsonp, str-replace, json

好的，我正在运行一个公共 JSONP API，数据由我的 PHP 服务器提供。我刚读了这篇文章：

*   [JSON：不是的 JavaScript 子集（Magnus Holm；2011 年 5 月）](http://timelessrepo.com/json-isnt-a-javascript-subset)
    *（请阅读说明）*

基本上，如果我的 JSON 字符串包含 U+2028 字符（Unicode 行分隔符）或 U+2029 字符（Unicode 段落分隔符），那么这是完全有效的 JSON。但是，当使用 JSONP 时，JSON 将作为 JavaScript 执行，并且 JavaScript 中的任何字符串都不能包含文字 U+2028 或 U+2029，因为它会破坏 JavaScript。显然，只要您使用正确的 JSON 解析器，这通常不是问题，但在 JSONP 的情况下，浏览器*就是*JSON 解析器。

本质上，如果这些字符在我发送到客户端的 JSONP 数据中的字符串中，这将在字符串中抛出一个行或段落中断，这会破坏 JavaScript 并停止它的执行。这是一种可能性，因为 API 正在发回一些客户端输入的数据。有人可能会在数据库中输入 U+2028 或 U+2029，因此当我将其作为 JSONP 发回时，它会破坏使用我的 API 的任何实现。

所以我的问题是，在 PHP 中，我如何清理/输出转义 JSON 数据以删除或转义 U+2028 和 U+2029 字符，然后再将其发送到客户端？

目前，我的流程正在对数据数组执行[json_encode并将该数据发送到客户端。](http://php.net/manual/en/function.json-encode.php)我应该通过遍历数组并对其进行过滤来转义数据，还是一次转义所有 JSON 编码的字符串？

另一件事是我不确定如何在 PHP 中转义 U+2028 和 U+2029 字符。我可以做一个 str_replace 吗？我不确定 str_replace 是否是多字节安全的，并且[没有 mb_str_replace](http://php.net/manual/en/ref.mbstring.php)函数，除非我使用一些定制的函数。那么如何删除/转义那些 unicode 字符呢？

非常感谢。

* * *

## 回答 #1

> 赞同：22
> 
> 时间：2013-01-06T04:57:24.553

您可以在 PHP 端或 JavaScript 端，或两者都替换`U+2028`, `U+2029`，只要它至少发生一次（它是幂等的）就没有关系。`"\u2028"``"\u2029"`

您可以只使用普通的字符串替换函数。它们不需要是“多字节安全的”，您可以在任何 Unicode 编码中轻松做到这一点（UTF-8、UTF-16、UTF-32 都一样好）。上次我检查时 PHP 没有 Unicode 转义序列，这只是 PHP 是个笑话的另一个原因，但您可以使用`\x`UTF-8 转义...

（简而言之，没有多字节字符串替换函数的原因是因为它是多余的——它与非多字节字符串替换函数完全相同。）

```
// Javascript
data = data.replace("\u2028", "\\u2028").replace("\u2029", "\\u2029");

// PHP
$data = str_replace("\xe2\x80\xa8", '\\u2028', $data);
$data = str_replace("\xe2\x80\xa9", '\\u2029', $data); 
```

或者你可以什么都不做，因为 PHP 在默认情况下会转义非 Unicode 字符`json_encode()`：

```
// Safe
echo json_encode("\xe2\x80\xa9");
--> "\u2029"

// Correct JSON, but invalid Javascript...
// (Well, technically, JSON root must be array or object)
echo json_encode("\xe2\x80\xa9", JSON_UNESCAPED_UNICODE);
--> "
" 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2017-07-14T16:35:54.437

值得指出的是，这不再是必要的。

默认情况下，*对所有*[`json_encode()`](http://php.net/manual/en/function.json-encode.php)非 ASCII 字符（包括 U+2028 和 U+2029）进行编码，并转义正斜杠，即使 JSON 规范不需要转义。逃避它并没有什么害处，而且在某些情况下它可能更安全。因此，默认情况下，这些字符无论如何都会被转义。

 *常量输出未转义的`JSON_UNESCAPED_UNICODE`Unicode，可以节省字节。然而，正如斜线字符被转义，因为它在某些情况下可能是危险的，所以 U+2028 和 U+2029*也被*转义，因为它们在某些情况下也是危险的。在您提出问题时情况并非如此：[此功能最近已添加到 PHP 中](https://github.com/php/php-src/pull/1701)。

`JSON_UNESCAPED_SLASHES`（这些额外的转义可以分别用和关闭`JSON_UNESCAPED_LINE_TERMINATORS`。）*

# java - 在 TextArea java 中显示数据

> ID：14179378
> 
> 赞同：0
> 
> 时间：2013-01-06T04:43:31.033
> 
> 标签：java, textarea

我正在尝试显示我在 textarea 中获得的所有数据

```
 public static void randNumQueue(){
    Queue<String> myQueue = new LinkedList<>();
    if(average12==30){
        long range = (long)randNum2 - (long)randNum1 + 1;
        long fraction = (long)(range * random.nextDouble());
        number = (int)(fraction + randNum1);
        System.out.println(number);
        Set mySet = new HashSet();
        for (int j = 0; j<number; j++)
        {
            int pick;
            do{
                pick = random.nextInt(number)+1;
            }while(!mySet.add(pick));
            myQueue.add(Integer.toString(pick));
        }
        System.out.println("the queue size: "+myQueue.size());
        sizeQ = myQueue.size();
        Iterator it = myQueue.iterator();
        while(it.hasNext()){
                String iteratorValue = (String)it.next();
                Qnum = Integer.parseInt(iteratorValue);
                System.out.println("queue next value: "+Qnum);
            }
    }
}
@Override
public void actionPerformed(ActionEvent e) {
    if(e.getSource().equals(b1)){
        randomAverage();
        testAmount = testAmount + 1;
        label5.setText(""+testAmount);
        area3.setText(""+sizeQ);
        area1.setText(""+Qnum);
    }

} 
```

area1 是我试图显示从 IteratorValue 获得的所有数据的区域文本

从上面的函数 area1 只显示了我从 iteratorValue 得到的最后一个值

有人知道如何显示 area1(textarea) 中的所有值吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-06T04:46:40.007

`setText`当你想替换文本区域的内容时使用，[`JTextArea#append`](http://docs.oracle.com/javase/7/docs/api/javax/swing/JTextArea.html#append%28java.lang.String%29)当你想将文本添加到文本区域的末尾时使用

**更新**

评估您正在尝试做的事情是“有点”困难，但是类似...

```
while(it.hasNext()){
    String iteratorValue = (String)it.next();
    area1.append(iteratorValue + "\n");
    Qnum = Integer.parseInt(iteratorValue);
    System.out.println("queue next value: "+Qnum);
} 
```

在您的操作执行方法中，删除`area1.setText(""+Qnum);`. 这会将每个结果附加到文本区域。如果要清除文本，请使用类似`area1.setText(null)`

# visual-studio - 错误 c1107 找不到程序集 请使用 /AI 或通过设置 LIBPATH 环境变量指定程序集搜索路径

> ID：14179382
> 
> 赞同：3
> 
> 时间：2013-01-06T04:44:11.487
> 
> 标签：visual-studio, c++-cli

我正在制作两个简单的 C++/CLI 项目，一个是可执行文件，另一个是 DLL。在可执行文件中，我写

```
#using "DllLibName.dll" 
```

它给了我错误 c1107，我认为这很容易解决。我搜索了 LIBPATH 并转到链接器、常规、附加库目录并添加了包含 DllLibName.dll 的文件夹，但它仍然无法正常工作。同样的错误。

我尝试将指令替换为

```
#using "D:\AbsolutePath\DllLibName.dll" 
```

一切正常。我不想输入完整的绝对路径。我错过了什么？这感觉太愚蠢了。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-02-25T11:04:41.717

可能在您的情况下，必须为编译器设置路径，而不是链接器。

Properties -> C/C++ -> General -> "Resolve #using References" 或者查看[AI-flag的文档](http://msdn.microsoft.com/en-us/library/x1x72k9t.aspx)

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2013-01-06T06:06:24.740

这两个项目是否在同一个解决方案中？如果是这样，则不要使用#using，添加对其他项目的引用，并让 Visual Studio 处理路径。

*   右键单击可执行项目，选择“属性”。
*   在属性窗口中，选择左侧列表顶部的“常用属性”。
*   单击“添加新引用”按钮。
*   从“项目”选项卡中选择您的 DLL 项目。

# ajax - codeigniter 中没有给出 Ajax 调用

> ID：14179383
> 
> 赞同：0
> 
> 时间：2013-01-06T04:44:16.773
> 
> 标签：ajax, codeigniter

```
<script type="text/javascript" language='javascript'>
    $('#view_comment').submit(function() {
        alert("msg");   
        var sec={'post_id_for_view_comment' : $("#post_id_for_view_comment").val()}
        $.ajax({
            url: "<?php echo base_url().'index.php/'; ?>post_comment/get_all_comments",
            type: 'POST',                          
            data: sec,
            success: function(msg) {
                alert(msg); 
            }
        });
    });
</script> 
```

形式

```
<form id="view_comment" method="post" >
    <input type="hidden" name="post_id_for_view_comment" id="post_id_for_view_comment" value="<?php echo $row->post_id; ?>" /> 
    <input type="submit" id="post_button" value="View Comments" />
</form> 
```

控制器

```
public function get_all_comments()
{   
    echo 'OK';  
} 
```

Ajax 调用未提供给控制器。我在单页上有多个表格。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-07T01:21:31.837

这是实现您需要的新方法：

```
$('#post_button').click(function(e){
e.preventDefault;
var sec = $('#post_id_for_view_comment').val();
//no need to mention index.php when using site_url() function
 $.post('<?php echo site_url("post_comment/get_all_comments")?>', 
{"post_id_for_view_comment": sec },
         function(data.res == "ok"){ // simple test if it returned ok
         //here you can process your returned data. 
         }, "json"); //**
}); 
```

**提示：**使用`$.post`来自[jquery](http://api.jquery.com/jQuery.post/) - 是 ajax 调用的类型。

现在在你的控制器中：

```
function get_all_comments()
{
//getting your posted sec token.
   $sec = $this->input->post('post_id_for_view_comment'); 
   $data['res'] = "ok";// return anything you like.
// you should use json_encode here because your post's return specified as json. see **
   echo json_encode($data); //$data is checked in the callback function in jquery.
} 
```

*真的希望我有所帮助。*

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-06T05:25:53.350

对不起，jquery 还没有准备好。

```
 $(function(){
        $('#view_comment').submit(function(e) {
        var id = $("#post_id_for_view_comment").val();
        $.ajax({
             url: "<?php echo base_url()?>index.php/post_comment/get_all_comments",
             type: "POST",                          
             data: {post_id_for_view_comment:id} ,
             success: function(msg) {
                   alert(msg); 

             }
        });
             e.preventDefault();
        });
     }); 
```

# android - Android 解析 XML

> ID：14179385
> 
> 赞同：0
> 
> 时间：2013-01-06T04:45:01.207
> 
> 标签：android, xml-parsing, android-sqlite

我的应用程序中需要关系数据，其数据将从两个 XML 文件加载，这些文件将存储在`assets`文件夹中或从`Server`.

```
categories(id, name, slug) // using a slug string to select the category icon drawable in list view
places(id, name, ...., category_id)
images(id, path, place_id) 
```

现在基于此构建了以下XML

类别.xml

```
<?xml version="1.0" encoding="utf-8"?>
<categories>
    <category>
        <name>Hill Station</name>
        <icon>hill-station</icon>
    </category>

    <category>
        <name>Water Fall</name>
        <icon>water-fall</icon>
    </category>
.
.
.
.

</categories> 
```

地方.xml

```
<places>
    <place>
        <name>Nandi hills</name>
        <category>hill-station</category>
        <distance>70</distance>
        <days>1</days>
        <latitude>13.3333</latitude>
        <longitude>77.6500</longitude>
        <weather>Summer 25°-28°C, Winter 8°-10°C</weather>
        <todo>Para-Gliding, Tippu Drop, Gardens, Jumping Jacks</todo>
        <about>Nandi Hills or Nandidurg is an ancient hill fortress of southern India, 
            in the Chikkaballapur district of Karnataka state. It is located just 10 km from 
            Chickballapur town and approximately 60 km from the city of Bangalore. The hills are 
            nestled between the neighboring towns of Nandi, Muddenahalli, and Kanivenarayanapura.
            The hills are traditionally held as the origin of the Arkavathy river.
        </about>
        <images>
            <image>http://i.imgur.com/Y2MMa.jpg</image>
            <image>http://i.imgur.com/DoRXC.jpg</image>
            <image>http://i.imgur.com/ZA8PR.jpg</image>
            <image>http://i.imgur.com/aSeYa.jpg</image>
        </images>
    </place>

    <place>
        <name>Kemmannugundi</name>
        <category>hill-station</category>
        <distance>260</distance>
        <days>2</days>
        <latitude>13.5470</latitude>
        <longitude>75.7580</longitude>
        <weather>Summer 17°-34°C, Winter 12°-29°C</weather>
        <todo>Rajendra hill, Rock garden, Z point, Shiva temple</todo>
        <about>Kemmannugundi is a hill station in Tarikere taluk of Chikkamagaluru district in the state of Karnataka, India. 
            It is 1434m above sea level. This was the summer retreat of Krishnaraja Wodeyar IV and as a mark of respect to the king, 
            it is also known as Sri Krishnarajendra Hill Station. The station is ringed by the Baba Budan Giri Range, with cascades, 
            mountain streams, and lush vegetation, Kemmangundi’s has ornamental gardens and mountains and valleys views. 
            There is a spectacular sunset view from the Raj Bhavan.</about>
        <images>
            <image>http://i.imgur.com/Y2MMa.jpg</image>
            <image>http://i.imgur.com/DoRXC.jpg</image>
            <image>http://i.imgur.com/ZA8PR.jpg</image>
            <image>http://i.imgur.com/aSeYa.jpg</image>
        </images>
    </place>
</places> 
```

我现在正在使用 OrderXMLHandler 来解析数据。是否有任何可以解析 xml 并自动提供对象的库？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-06T04:54:13.030

看看卡斯特。很多年前我用过。它似乎仍然是一个活跃的项目。它提供 XML/Object marsahlling/unmarshalling：[http ://castor.codehaus.org/index.html](http://castor.codehaus.org/index.html)

JAXB 提供了相同的功能，但我听说（即未证实）在 Android 上运行 JAXB 存在问题。

# iphone - 呈现视图控制器后，工具栏高度在横向中重置为 44px

> ID：14179386
> 
> 赞同：0
> 
> 时间：2013-01-06T04:45:02.297
> 
> 标签：iphone, ios, toolbar, landscape

我正在使用[此处](https://stackoverflow.com/a/12111810/61478)发布的方法在旋转设备时调整工具栏的大小。这很好用，它显示了适当的大小，包括图标大小等。

然而，当我展示一个带有 的视图控制器时`[self presentViewController:theViewController animated:YES completion:nil];`，工具栏的高度会重新设置为 44px 而不是 32。很容易看出，在展示视图控制器时尺寸已经增加，因为它在动画期间已经更高了。关闭视图控制器后它也保持高。该应用程序针对 iOS 6。以防万一可能相关。

有没有办法让较小的尺寸保持在横向？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-06T06:52:06.493

将您的目标开发减少到低于 iOS 6 并且它将起作用。只是一个疯狂的猜测。:)

# cordova - 如何在 AngularJS 中更改主机（在 iOS 中使用 PhoneGap）

> ID：14179391
> 
> 赞同：1
> 
> 时间：2013-01-06T04:45:16.620
> 
> 标签：cordova, angularjs

我是移动网络应用程序开发的新手。Phonegap 访问我的原生 index.html。该网址将是“file://localhost/Users/.../www/index.html”。因此，当我使用 $routeProvider 时，AngularJS 中的 $location 无法提供正确的主机。我需要在 www 文件夹中启动主机。如何使用 Angular 或 Phonegap 修复它？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-17T20:45:23.830

我认为你会想要在你的 $http 请求将命中的 URL 中烘焙，而不是试图从 $location 推断。

# android - SimpleCursorAdapter 不断为 API 10 抛出错误

> ID：14179392
> 
> 赞同：1
> 
> 时间：2013-01-06T04:45:48.053
> 
> 标签：android, simplecursoradapter, android-support-library

我的项目的 minSDK 为 10，目标为 17。我已`android-support-v4.jar`通过右键单击`.jar`文件并选择“构建路径 -> 添加到构建路径”将其添加到项目构建路径中。当我清理项目时，错误`SimpleCursorAdapter`消失了。但是，当我尝试运行活动时，出现以下错误：

> 01-05 23:42:56.187: E/AndroidRuntime(483): java.lang.NoSuchMethodError: android.widget.SimpleCursorAdapter。

此外，如果我对活动进行更改，我必须每次都清理项目，以消除`SimpleCursorAdapter`.

我在这里想念什么？为什么这不能正常工作？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-06T04:47:36.023

您应该使用该类的兼容版本。检查您的导入并确保您使用的是：

```
import android.support.v4.widget.SimpleCursorAdapter; 
```

# iphone - 如何为 UITableViewCell 高度设置动画？

> ID：14179395
> 
> 赞同：4
> 
> 时间：2013-01-06T04:46:20.830
> 
> 标签：iphone, objective-c, ios, ipad

我有一个`UITableView`并且我想要它，这样当您点击单元格时，高度会动画到更高的高度（即：它会扩展）。我该怎么做？

* * *

## 回答 #1

> 赞同：17
> 
> 时间：2013-01-06T04:53:09.717

实际上很简单，为一个创建一个实例变量`NSIndexPath`，我称之为`selectedIndexPath`。然后你需要做的就是创造一个条件`heightForRowAtIndexPath`来调整这个特定单元格的高度，独立于其他单元格。

然后`didSelectRowAtIndexPath`将选定的索引路径 iVar 设置为选定单元格的路径，并在表格上调用开始/结束更新。单元格将自动扩展并带有漂亮的动画。

```
- (void)tableView:(UITableView *)tableView didSelectRowAtIndexPath:(NSIndexPath *)indexPath
{
    selectedIndexPath = indexPath;
    [self.tableView beginUpdates];
    [self.tableView endUpdates];
}

- (CGFloat)tableView:(UITableView *)tableView heightForRowAtIndexPath:(NSIndexPath *)indexPath
{
    if ([indexPath compare:selectedIndexPath] == NSOrderedSame) {
        return 80;
    }
    return 40;
} 
```

# html - 渐变导航栏宽度

> ID：14179400
> 
> 赞同：1
> 
> 时间：2013-01-06T04:47:02.797
> 
> 标签：html, css, navigation, gradient

我正试图让我的导航栏转到我的页面末尾，我遇到了麻烦。我的导航栏是渐变的，我尝试了一些方法让它从页面的最左侧到右侧的最末端，我可以帮忙吗？
CSS：

```
.nav ul {
list-style-type:none;
margin:0px;
padding:0px;
}

    .nav li {
float:left;
}

    .nav a:link, a:visited {
display:block;
width: %100;
font-weight:bold;
color: #FFFFFF;
background-color:#363636;
background-image:url('../images/nav.png');
background:-webkit-gradient(linear,left top,left bottom,from(#363636),to(#0A0A0A));
background:-webkit-linear-gradient(top,#363636,#0A0A0A);
background:-moz-linear-gradient(top,#363636,#0A0A0A);
background:-o-linear-gradient(top,#363636,#0A0A0A);
background:-ms-linear-gradient(top,#363636,#0A0A0A);
background:linear-gradient(top,#363636,#0A0A0A);
text-align: center;
padding: 10px;
padding-left: auto;
padding-right: auto;
text-decoration:none;
}

    .nav a:hover, a:active {
color: #FFFFFF;
background-color:#0A0A0A;
background:-webkit-gradient(linear,left top,left bottom,from(#363636),to(#363636));
background:-webkit-linear-gradient(top,#0A0A0A,#363636);
background:-moz-linear-gradient(top,#0A0A0A,#363636);
background:-o-linear-gradient(top,#0A0A0A,#363636);
background:-ms-linear-gradient(top,#0A0A0A,#363636);
background:linear-gradient(top,#0A0A0A,#363636);
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-06T04:55:11.887

既然您`Width`在问题的标题中提到...在查看您的代码后从我的头顶开始，请尝试更改：

```
width: %100; 
```

至

```
width: 100%; 
```

# javascript - 使用 javascript 调用 expressjs restful webservice => 结果总是空响应

> ID：14179402
> 
> 赞同：2
> 
> 时间：2013-01-06T04:47:09.593
> 
> 标签：javascript, web-services, node.js, restful-architecture

目的：
1）创建一个在 NodeJs 网络服务器上运行的网站。（expressjs、stylus、jade）+NodeJS
2）在NodeJs webserver上创建一个restful webservice（expressjs）+NodeJS
3）网站调用一个restful web service入口（javascript文件）

* * *

使用 ubuntu 终端，我为网站启动 nodeJs，为其余 webservice 启动另一个 nodeJs。测试 restful webservice（在浏览器中）：

网址：localhost:1337/wines/

数据结果为： [ { "name": "New wine", "Year": "2012", "_id": "50e8255197f0b5260f000001" } ]

测试网站Url：localhost:3000/

这是我在网站中使用的 javascript 文件，这里我想调用其余的 url localhost:1337/wines/ 获取结果数据。

```
alert('hello!');  (popup)

var xhr = new XMLHttpRequest();
xhr.open('GET', 'http://localhost:1337/wines/');
xhr.onreadystatechange = function () {
  if (this.status == 200 && this.readyState == 4) {
    console.log('response: ' + this.responseText);
    alert("Yes");
  }
};
xhr.send(); 
```

在终端中，我看到执行了 GET：
Restful 终端：
GET /wines/ 200 3ms - 93

网站终端：
GET / 200 11ms
GET /JavaScript/script.js 304 1ms
GET /stylesheets/style.css 304 1ms

当我调试时，我是这样的：
var xhr = new XMLHttpRequest(); 好的
xhr.open('GET', 'http://localhost:1337/wines/'); 好的
xhr.send(); 好的

xhr.onreadystatechange = function () 跳转到回调 OK
but 'readystate=4 but this.status = 0' 而且我没有给出结果

最后我得到这个错误：
组件返回失败代码：0x80004005（NS_ERROR_FAILURE）

* * *

来自 firebug 的结果信息（用于调试此 java 脚本）

内容类型应用程序/json；charset=utf-8
日期 Sun, 06 Jan 2013 04:15:07 GMT
X-Powered-By Express
Request Headers
Accept text/html,application/xhtml+xml,application/xml;q=0.9, */* ;q=0.8
Accept -Encoding gzip, deflate
Accept-Language en-us,en;q=0.5
Connection keep-alive
Host localhost:1337
Origin //localhost:3000
Referer //localhost:3000/
User-Agent Mozilla/5.0 (X11; Ubuntu; Linux x86_64; rv:13.0) Gecko/20100101
Firefox/13.0.1

* * *

我搜索了堆栈溢出，它可能是一个“跨域问题”，因此我应该在我的 restful 网络服务中添加一些 javascript：

```
var express = require('express'),
wine = require('./routes/wines');
var app = express();
app.configure(function () {
app.use(express.logger('dev')); /* 'default', 'short', 'tiny', 'dev' */
app.use(express.bodyParser());

//Added part
app.all('/', function(req, res, next) {
  res.header("Access-Control-Allow-Origin", "*");
  res.header("Access-Control-Allow-Headers", "*");
  res.header("Access-Control-Allow-Methods", "XPOST, GET, OPTIONS");
  res.header("Access-Control-Max-Age", "1000");
  next();
 });
//Added part

});

app.get('/wines', wine.findAll);
app.get('/wines/:id', wine.findById);
app.post('/wines', wine.addWine);
app.put('/wines/:id', wine.updateWine);
app.delete('/wines/:id', wine.deleteWine);
app.listen(1337);
console.log('Listening on port 1337...'); 
```

* * *

> 仍然没有结果，有人知道如何解决这个问题吗？多谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-06T05:11:10.340

您必须在调用之前注册事件处理程序`open()`。

```
var xhr = new XMLHttpRequest();
xhr.onreadystatechange = function () {
  if (this.status == 200 && this.readyState == 4) {
    console.log('response: ' + this.responseText);
    alert("Yes");

  }
};
xhr.open('GET', 'http://localhost:1337/wines/');
xhr.send(); 
```

# javascript - 分派的事件从捕获/冒泡周期的哪个阶段开始？

> ID：14179408
> 
> 赞同：1
> 
> 时间：2013-01-06T04:47:51.910
> 
> 标签：javascript, dom, browser

假设我有这个布局

```
<body>
  <div class="A">
    <span class="B">span</span>
  </div>
<body> 
```

我使用委托的非捕获处理程序将各处的点击转换为自定义事件并在其原始目标上调度它：

```
document.addEventListener('click',function(e){ 
  e.target.dispatchEvent(new CustomEvent('custom'));
}, false); 
```

我为 A 分配了一个捕获事件侦听器：

```
div_class_A_element.addEventListener('custom',function(){ 
  console.log('captured custom on A'); 
}, true); 
```

当我点击 B 时会发生什么？我需要一个播放一个播放。另外请不要告诉我只是 jsfiddle 它，我知道我可以做到，但我想知道的是规范说它应该做什么？

这是我的猜测：

一旦单击事件从文档一直向下传递到 B，然后一直返回到文档，文档的委托处理程序就会在 B 上运行。现在会发生什么我不知道：它在 B 上调度自定义事件：自定义事件是否从 B 开始并开始冒泡？如果是这样，那么 A 的捕获处理程序将不会运行（因为捕获处理程序在冒泡阶段不会捕获）。或者调度的事件是否会像其他事件一样运行，并从文档开始执行整个捕获阶段？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-06T05:03:32.543

分派的事件也会经历一个捕获阶段。根据 w3c dom 3 级规范：

> 应用程序可以使用 EventTarget.dispatchEvent() 方法分派事件对象，并且实现必须像通过此方法一样分派事件对象。-[来源](http://www.w3.org/TR/DOM-Level-3-Events/#event-flow)

该引用本身并没有太大帮助，但规范继续解释（和内部实现）必须遵循的事件流*：*`dispatchEvent`

1.  捕获阶段
2.  目标阶段
3.  泡沫阶段

[W3C：事件流](http://www.w3.org/TR/DOM-Level-3-Events/#event-flow)

**必须**进行捕获（除非它被 停止`stopPropagation()`。可以通过设置`Event.bubbles`来跳过冒泡`false`。

> 从树的顶部到事件目标的 EventTargets 链是在事件的初始分派之前确定的。如果在事件处理过程中对树进行了修改，则事件流将根据树的初始状态进行。-[来源](http://www.w3.org/TR/DOM-Level-2-Events/events.html#Events-flow-capture)

因此，在您的示例中，当您从 B 分派事件时，*将*调用`custom`A 上的事件处理程序。

 *来自 MDN（上`dispatchEvent`）：

> 将事件分派到事件系统中。该事件与直接分派的事件具有相同的捕获和冒泡行为。-[来源](https://developer.mozilla.org/en-US/docs/DOM/element.dispatchEvent)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-06T05:25:56.583

如果您的场景中的每个元素都有事件，则此[演示会](http://jsfiddle.net/pxfunc/Ed5eb/2/)显示操作顺序。

1.  .B 点击
2.  .点击
3.  身体点击
4.  文档监听器
5.  在 A 上捕获的自定义
6.  窗口点击

`document`侦听器会`A`立即触发 div 调度，然后继续冒泡（到`window`）*

# enterprise-library - 禁用事件查看器中的信息

> ID：14179410
> 
> 赞同：-4
> 
> 时间：2013-01-06T04:48:03.253
> 
> 标签：enterprise-library

嗨，你能帮帮我吗，在事件查看器中，有警告、信息、错误。我想禁用事件查看器中的**信息**。我正在使用 Microsoft 企业库。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-06T16:16:58.203

要按严重性禁用日志记录，请参阅：[启用/禁用生产环境中的企业库日志记录](https://stackoverflow.com/questions/5077696/enable-disable-enterprise-library-logging-on-production)。

要禁用“常规”类别的信息消息，配置将如下所示：

```
<categorySources>
    <add switchValue="Warning" name="General">
        <listeners>
            <add name="Formatted EventLog TraceListener" />
        </listeners>
    </add>
</categorySources> 
```

# ruby-on-rails - 设计 after_sign_in_path

> ID：14179411
> 
> 赞同：1
> 
> 时间：2013-01-06T04:48:27.043
> 
> 标签：ruby-on-rails, devise, routes, nested-forms

我在嵌套模型表单中同时创建位置和用户。我希望用户被带到刚刚创建的位置 ID 的位置显示页面。我怎样才能做到这一点？

我知道我可以通过将其放入应用程序控制器来获取位置索引

```
def after_sign_in_path_for(resource)
      locations_path # <- Path you want to redirect the user to.
    end 
```

我试过了

```
def after_sign_in_path_for(resource)
      location_path(@location) # <- Path you want to redirect the user to.
    end 
```

但它为 id 提供了 nil 值。有什么想法吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-06T05:44:24.457

你应该做的就是

```
def after_sign_in_path_for(resource)
  location_path(resource) # <- Path you want to redirect the user to.
end 
```

但如果您`resource`很可能是用户，则更安全的是：

```
def after_sign_in_path_for(resource)
  if resource.class == User
    location_path(resource.location) 
  elsif resource.class == Location
    location_path(resource) 
  end
end 
```

这将处理两种资源类型，并假定您`User`与`Location`创建的资源类型相关联。

# jquery - Rails、collection_select 和 Proc

> ID：14179412
> 
> 赞同：1
> 
> 时间：2013-01-06T04:49:40.153
> 
> 标签：jquery, ruby-on-rails, collections, ruby-on-rails-2, view-helpers

我有一个国家/地区的州列表，我想在 a 上显示它们`<select>`。因为我试图显示一个代表每个州的标志的图标，所以我正在使用[这个](http://www.marghoobsuleman.com/jquery-image-dropdown)JQuery 插件。无论如何，在这一点上，这是一个纯粹的 Rails 问题。

要使用该插件，我需要`option`在 this 中包含的每个标签上设置一个“data-image”属性`select`。

到目前为止，我所拥有的是：

```
<%= collection_select(:state, :code, @states, :code, 
:name, {"data-image" => lambda {|state| image_path("/flags/#{state.code}.png") }}) %> 
```

我已经尝试了很多方法来为每个设置“数据图像”属性，`option`但到目前为止结果是：

```
<select id="state_code" name="state[code]">
  <option value="foo">State Foo</option>
  <option value="bar" selected="selected">State Bar</option>
</select> 
```

因此，我没有成功*注入*我的“数据图像”属性。我一直在寻找一些光明，我看到了[这个](http://api.rubyonrails.org/classes/ActionView/Helpers/FormOptionsHelper.html)[api.rubyonrails] 和下面的例子，

```
collection_select(:post, :category_id, Category.all, :id, :name, {:disabled => lambda{|category| category.archived? }}) 
```

这基本上就是我要找的东西，我的东西几乎是一样的，但它不起作用。我正在使用 Rails 2.3.11。我会感谢你的建议。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-06T18:05:12.740

查看[此 Stackoverflow 问题](https://stackoverflow.com/questions/5052889/ruby-on-rails-f-select-options-with-custom-attributes)的第二个答案。

基本上，它涉及使用`options_for_select`帮助程序来创建自定义`data`前缀属性。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-07T20:25:55.207

所以，我最终解决了这个问题，以下是完整的解决方案。据我了解，由于我使用的是 Rails 2.3，因此没有帮助程序来支持`data`前缀属性。[事实证明，正如这个](https://stackoverflow.com/a/13962481/914874)答案`options_for_select`所指出的那样，我需要使用 Rails 3助手。作为旁注，我没有使用 msDropDown 插件，而是最终使用了[ddSlick](http://designwithpc.com/Plugins/ddSlick)。另外，我没有使用 ，而是使用了. 那么基本上你必须拥有的是：`collection_select``select_tag`

**rails_overrides.rb**

```
# https://stackoverflow.com/a/13962481/914874
module RailsOverrides
  def options_for_select(container, selected = nil)
      return container if String === container
      container = container.to_a if Hash === container
      selected, disabled = extract_selected_and_disabled(selected)

      options_for_select = container.inject([]) do |options, element|
        html_attributes = option_html_attributes(element)
        text, value = option_text_and_value(element)
        selected_attribute = ' selected="selected"' if option_value_selected?(value, selected)
        disabled_attribute = ' disabled="disabled"' if disabled && option_value_selected?(value, disabled)
        options << %(<option value="#{html_escape(value.to_s)}"#{selected_attribute}#{disabled_attribute}#{html_attributes}>#{html_escape(text.to_s)}</option>)
      end

      options_for_select.join("\n").html_safe
  end

  def option_text_and_value(option)
    # Options are [text, value] pairs or strings used for both.
    case
    when Array === option
      option = option.reject { |e| Hash === e }
      [option.first, option.last]
    when !option.is_a?(String) && option.respond_to?(:first) && option.respond_to?(:last)
      [option.first, option.last]
    else
      [option, option]
    end
  end

  def option_html_attributes(element)
    return "" unless Array === element
    html_attributes = []
    element.select { |e| Hash === e }.reduce({}, :merge).each do |k, v|
      html_attributes << " #{k}=\"#{ERB::Util.html_escape(v.to_s)}\""
    end
    html_attributes.join
  end
end 
```

**application_helper.rb**

```
module ApplicationHelper
  include RailsOverrides
end 
```

**index.html.erb**

```
<%= select_tag(:state, options_for_select (states.map { |state| [state.name, state.code, {"data-imagesrc" => image_path("flags/#{state.code}.png"), "data-description" => "Data from #{state.name}"}]}, current_state.code)) %> 
```

这里，`current_state`是要选择作为默认选项的状态。例如，我将它存储在一个`session`变量中，但为了简单起见，它可能是一个`@current_state`.

解决此问题的另一种方法是使用[options_from_collection_for_select_with_data](http://thehungrycoder.com/ruby-on-rails/rails-options_from_collection_for_select-with-custom-attributes-for-each-option.html)的修改版本，因此无需公开`map`.

# apache - 重写规则更改 URL

> ID：14179414
> 
> 赞同：1
> 
> 时间：2013-01-06T04:49:44.160
> 
> 标签：apache, .htaccess, mod-rewrite

好的，我需要从这里更改所有董事会网址：

```
http://dream-portal.net/board_65.0/ 
```

对此：

```
http://dream-portal.net/board_65/ 
```

基本上，我需要去掉 URL 末尾的 .0，就在最后一个 / 字符之前。

我怎样才能通过.htaccess 做到这一点？

目前在我的 .htaccess 文件中使用它：

```
RewriteEngine on
# RewriteBase /
RewriteCond %{REQUEST_FILENAME} !-f
RewriteCond %{REQUEST_FILENAME} !-d
RewriteRule ^(.*)$ index.php?q=$1 [L,QSA] 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-06T14:35:56.677

```
RewriteEngine on
RewriteBase /

RewriteRule ^(board_[0-9]+)\.0/$ $1 [L,R=302]

RewriteCond %{REQUEST_FILENAME} !-f
RewriteCond %{REQUEST_FILENAME} !-d
RewriteRule ^(.*)$ index.php?q=$1 [L,QSA] 
```

# twitter-bootstrap - 引导容器宽度

> ID：14179416
> 
> 赞同：1
> 
> 时间：2013-01-06T04:50:58.253
> 
> 标签：twitter-bootstrap

有没有办法改变`container`类的宽度，使其更宽？我想要一个大小与此类似的 3 列固定宽度布局：

```
 <div class="container">
    <div class="span3">
      span3
    </div>
    <div class="span6">
      span6
    </div>
    <div class="span3">
      span3
    </div>
  </div> 
```

但是第三个 div 不适合一行。它被转移到下一行，所以我猜`container`它太窄了。

麦克风

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-06T11:05:13.817

第三列不合适，因为您的 span 元素不在行 div ( `<div class="row">`)内

下面的代码（也在[http://jsfiddle.net/3yG6j/1/](http://jsfiddle.net/3yG6j/1/)上）应该解决您的问题，并将所有跨度放在同一行

```
<!DOCTYPE html>
<html>
  <body>
    <div class="container">
      <div class="row">
        <div class="span3">
          span3
        </div>
        <div class="span6">
          span6
        </div>
        <div class="span3">
          span3
        </div>
      </div>
    </div>
  </body>
</html> 
```

# jquery - jQuery 验证规则和消息

> ID：14179417
> 
> 赞同：3
> 
> 时间：2013-01-06T04:51:00.233
> 
> 标签：jquery, jquery-validate

我在设置 jQuery 验证的规则和消息时遇到问题。

我正在尝试从 resume[zip_code] 中获取值，但我不知道如何在 JQuery 中编写它。我试过了

```
rules: {
  resume[zip_code]: required: true
} 
```

但不起作用。

这是我需要从中获取值的地方。

```
<div class='control-group'><label class='control-label'>Zip Code: </label>
  <div class='controls'>
    <input class="required" type='text' name='resume[zip_code]'>
  </div>
</div> 
```

应用代码

```
post '/create_resume' do
  session[:errors].clear
    @user = User.first(:email_address => session['user'])
    @resume = @user.resumes.new(params[:resume])
    @resume.save

  params[:education].each_key do |school|
    @school = @resume.educations.new(params[:education][school]
    @school.save
  end

  params[:job].each_key do |job|
    @job = @resume.jobs.new(params[:job][job])
    @job.save
  end

  params[:otherskill].each_key do |other|
    @otherskill = @resume.otherskills.new(params[:otherskill][other])
    @otherskill.save
  end

  if session[:errors].empty? === false
    erb :resume_form
  else
    session[:resume_output].clear
    erb :resume_output 
  end
end 
```

jQuery

我知道布局是什么，但只是不知道如何检索值

```
$(#myForm).validate({
  rules: {
    something: key => value
  },
  messages: {
    something: "value"
  }
}); 
```

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2013-01-06T19:32:09.617

我不知道如何编写您的规则，因为您从未说过您想要哪些规则。仅使用您提供的 HTML，这就是您设置规则和消息的方式。

为了演示用法，我*任意*`required`设置最小长度为 5 个数字的字段。

相应地编辑并添加您自己的规则。

```
$('#myForm').validate({
  rules: {
    "resume[zip_code]": {
         required: true,
         minlength: 5,
         digits: true
     }
  },
  messages: {
    "resume[zip_code]": {
         required: "this field is required",
         minlength: "this field must contain at least {0} characters",
         digits: "this field can only contain numbers"
     }
  }
}); 
```

您也不需要放入HTML 中，因为您的 jQuery方法`class="required"`已经指定了此规则。`.validate()`

```
<input type='text' name='resume[zip_code]' /> 
```

**工作演示：**

[**http://jsfiddle.net/vL7ps/**](http://jsfiddle.net/vL7ps/)

有关所有方法和规则，请参阅文档：

[http://docs.jquery.com/Plugins/Validation](http://docs.jquery.com/Plugins/Validation)

* * *

如果您想将该字段验证为必需的美国邮政编码，只需使用该`zipcodeUS`规则，但您必须首先包含[此处找到](http://bassistance.de/jquery-plugins/jquery-plugin-validation/)的“其他方法”文件。

[http://ajax.aspnetcdn.com/ajax/jquery.validate/1.10.0/additional-methods.js](http://ajax.aspnetcdn.com/ajax/jquery.validate/1.10.0/additional-methods.js)

jQuery：

```
rules: {
  "resume[zip_code]": {
    required: true,
    zipcodeUS: true
  }
},
messages: {
  "resume[zip_code]": {
    required: "this field is required",
    zipcodeUS: "this field must contain valid US zip code"
  }
} 
```

演示：http: [//jsfiddle.net/k6eLf/](http://jsfiddle.net/k6eLf/)

# php - Javascript 变量 - 未定义

> ID：14179422
> 
> 赞同：2
> 
> 时间：2013-01-06T04:51:28.290
> 
> 标签：php, javascript, jquery

为什么当我单击表格行时，它会提醒该行数据属性为“未定义”吗？

```
$(document).on('click', 'tr', function() {

    alert($(this).data("recordId"))

}); 
```

这是PHP，它（成功）将变量`fee_source_id`作为数据属性传递到表行中

```
<table = "all_aifs">
<tr>
    <th><b>Invoice ID</b></th>
    <th><b>Company Name</b></th>
    <th><b>Invoice Date</b></th>
    <th><b>Link</b></th>
</tr>
<?php foreach($result as $index => $row) : ?>
<tr data-recordId="<?=$row[id];?>"
    class="<?=$row["match"] ? "match" : "";?>">
    <td><?php echo $row[id]; ?></td>
    <td><?php echo $row[company_name]; ?></td>
    <td><?php echo $row[invoice_date]; ?></td>
    <td></td>
</tr> 
```

**更新** 感谢下面的评论，我发现上面的 JavaScript 代码中有一些错误，如下所示：

1.  警报方法正在调用`data`元素而不是`attr`元素。
2.  该`attr`方法的参数已更改为`("data-recordId")`. （注意：jQuery 知道忽略此参数的第一部分，因此`data-`没有作为参数包含在内。）
3.  警报方法末尾缺少分号

## 更新了 jQuery（现在可以使用）

```
$(document).on('click', 'tr', function() {

    alert($(this).attr("data-recordID"));

}); 
```

**问题**：

*   我正在使用 jQuery 1.7.2，它支持`$.on()`并且应该也支持`.data()`等等，我原来使用该`.data()`方法的 positng 是否仍然有效？为什么它不起作用？
*   不要将数据属性设置为“x”，因为它完全等于表格中每一行的第一列，（`fee_source_id`）我可以只使用表格每一行中的第一列/单元格而不是数据- 已通过的属性，以引用该记录？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-08T01:28:55.733

> 我正在使用 jQuery 1.7.2，它支持`$.on()`并且应该也支持`.data()`等等，我原来使用该`.data()`方法的 positng 是否仍然有效？为什么它不起作用？

如果您使用 访问数据属性`.data`，[您实际上是从 jQuery 的`data`object](http://api.jquery.com/data/#data-html5)中读取数据，它恰好将 cameCased 键映射到连字符键 ( `recordId -> record-id`)。这意味着如果您将属性重命名为，则可以使用and`data-record-id`获取它。[看演示](http://jsbin.com/emeyux/1/edit)。`.data('record-id')``.data('recordId')`

> 不要将数据属性设置为“x”，因为它完全等于表格中每一行的第一列，（`fee_source_id`）我可以只使用表格每一行中的第一列/单元格而不是数据- 已通过的属性，以引用该记录？

是的，您可以这样做（同一个[演示](http://jsbin.com/emeyux/1/edit)中包含的示例）：

```
$(document).on('click', 'tr', function() {
    var record_id = $(this).find('td:first-child').text();
    alert(record_id);
}); 
```

# java - 如何在文件中存储和检索对象的arraylist？

> ID：14179425
> 
> 赞同：0
> 
> 时间：2013-01-06T04:52:23.930
> 
> 标签：java, file-io, arraylist

> **可能重复：**
> [如何在 java 中序列化 ArrayLIst 而不会出错？](https://stackoverflow.com/questions/7943197/how-to-serialize-an-arraylist-in-java-without-getting-errors)

我在两个不同的类中有两个数组列表。一种是`temporarily`为`permanent`. 我使用一种`addAll`方法将对象从`temporary`arraylist 复制到`permanent`. 然后将对象从`permanent`arraylist 保存到`file`. 当我的程序重新启动时，`permanent`arraylists 中的对象将从`file`. 但我得到了一个例外。我的代码有什么问题？

> 导入 java.io.FileInputStream；导入 java.io.FileOutputStream；导入 java.io.ObjectInputStream；导入 java.io.ObjectOutputStream；导入 java.util.ArrayList；
> 
> /** * * @author Haleemdeen */ public class FileImportExport {
> 
> ```
> private ArrayList<Stock> permntTransactions=new ArrayList<Stock>();
> 
> void cancatToPerrmntTransactions(ArrayList<Stock> arraylist1){
>     permntTransactions.addAll(arraylist1);
> }
> 
> ArrayList<Stock> displayPermntTransactions(){
>     return permntTransactions;
> }
> 
>     void exportToFile(){
> 
>     try{  // Catch errors in I/O if necessary.
>     // Open a file to write to, named SavedObj.sav.
>     FileOutputStream saveFile=new FileOutputStream("SaveObj.sav");
> 
>     // Create an ObjectOutputStream to put objects into save file.
>     ObjectOutputStream save = new ObjectOutputStream(saveFile);
> 
>     // Now we do the save.
>     save.writeObject(permntTransactions);
> 
>     // Close the file.
>     save.close(); // This also closes saveFile.
>     }
>     catch(Exception exc){
>     exc.printStackTrace(); // If there was an error, print the info.
>     }
> }
> 
>         void importFromFile(){
> 
>     try{
>     // Open file to read from, named SavedObj.sav.
>     FileInputStream saveFile = new FileInputStream("SaveObj.sav");
> 
>     // Create an ObjectInputStream to get objects from save file.
>     ObjectInputStream save = new ObjectInputStream(saveFile);
> 
>     // Now we do the restore.
>     // readObject() returns a generic Object, we cast those back
>     // into their original class type.
> 
>     permntTransactions = (ArrayList<Stock>) save.readObject();
> 
>     // Close the file.
>     save.close(); // This also closes saveFile.
>     }
>     catch(Exception exc){
>     exc.printStackTrace(); // If there was an error, print the info.
>     }
> 
>     // Print the values, to see that they've been recovered.
>     System.out.println("\t\t" + permntTransactions);
>     System.out.println();
> } } 
> ```

在主要方法中：

> ```
> FileImportExport file1=new FileImportExport();
> file1.cancatToPerrmntTransactions(transactions);
> file1.exportToFile(); 
> ```

这是我得到的例外：

> java.io.NotSerializableException: m_media_cdstore.Stock at java.io.ObjectOutputStream.writeObject0(ObjectOutputStream.java:1156) at java.io.ObjectOutputStream.writeObject(ObjectOutputStream.java:326) at java.util.ArrayList.writeObject(ArrayList. java:570) 在 sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method) 在 sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:39) 在 sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:25) 在 java.lang .reflect.Method.invoke(Method.java:597) 在 java.io.ObjectStreamClass.invokeWriteObject(ObjectStreamClass.java:945)

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-06T04:56:47.253

您要序列化的类（`Stock`在这种情况下）必须实现[Serializable 接口](http://docs.oracle.com/javase/6/docs/api/java/io/Serializable.html)。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-01-06T05:04:19.457

该类`Stock`必须实现 Serializable，并且它的所有字段（完全深度）必须实现 Serializable 或者是原始的。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-06T05:26:35.447

尝试序列化对象时，请确保特定类 ( `Stock`.java) 必须实现`java.io.Serializable`，如果 Stock 类有任何其他必须实现的类`java.io.Serializable`

# php - PHP：在目录树中搜索文件并返回文件路径

> ID：14179429
> 
> 赞同：0
> 
> 时间：2013-01-06T04:53:03.383
> 
> 标签：php, search, directory-traversal

考虑这个工作流程：

用户请求`website.com/lolmyblogpost`

我的 .htacces 就像...

```
RewriteCond %{REQUEST_URI} !=/index.php
RewriteRule .* /index.php 
```

在 index.php 中，我将搜索模板文件树以`lolmyblogpost.html`返回：

```
/path/to/lolmyblogpost.html 
```

所以在我的主模板中，我可以：

```
{include file="{$pathToTemplate}"} 
```

**如何在目录树中搜索文件并返回文件路径？**

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-06T05:14:09.557

您真正想要的是具有默认类型的“回顾”支持。像这样设置你的 Apache 虚拟主机（东西）：

```
<VirtualHost *:80>
    ServerName  example.com:80
    ServerAlias www.example.com
    DocumentRoot    "/path/to/root/dir"
    AddDefaultCharset UTF-8
    ErrorDocument 403 "/403.php"
    ErrorDocument 404 "/404.php"
    <Directory /path/to/root/dir>
            Options Indexes FollowSymLinks
            DefaultType application/x-httpd-php
            AllowOverride All
            Order deny,allow
            Allow from all
            AddOutputFilterByType DEFLATE application/javascript text/css text/html text/plain text/xml
            RewriteEngine On
            RewriteBase /
            RewriteCond %{REQUEST_FILENAME} !.index.ph.*
            RewriteRule ^(.*)$  /index.php
    </Directory>
</VirtualHost> 
```

重要的一行是`DefaultType application/x-httpd-php`，这意味着您现在可以摆脱`.php`文件扩展名。

您现在可以使用类似的 URL `http://example.com/this_is_a_php_page`，也可以使用`http://example.com/this_is_a_php_page/with_a_path_info_var`.

因此，在`this_is_a_php_page`（实际上是一个没有扩展名的 .php 文件）上，您可以使用它`$_SERVER['PATH_INFO']`来检查在 URI 中传递的变量和变量。

**编辑：** 添加了`RewriteEngine`and 规则以将所有内容推送到`index.php`. 这意味着您现在在服务器上有一个（真实的）单页，`index.php`它需要检查`$_SERVER['REDIRECT_URL']`var 以了解真正请求的内容。

例如，`http://example.com/a_page`现在将加载一个请求`index.php`并`a_page`传递给`$_SERVER['REDIRECT_URL']`. 注意：此解决方案会将所有内容推送到 index.php。您将需要包括一个例外，如：

```
 RewriteCond %{REQUEST_FILENAME} !.not_me_plz.* 
```

`not_me_plz`允许“按预期”提供以文件开头的所有文件。

# android - Android：子视图在 Jelly Bean 中从其父视图共享按下状态

> ID：14179431
> 
> 赞同：5
> 
> 时间：2013-01-06T04:53:08.757
> 
> 标签：android, view, touch-event

代码注释： 1\. 一个RelativeLayout Clickable attr 设置为true，它有一个子视图Clickable attr 设置为false。2.没有任何duplicateParentState attr，也就是说duplicateParentState为false。3.子视图是TextView，其textColor是颜色选择器，所以可以检查按下状态。

行为：在level16之前，点击RelativeLayout时，按下状态不会传递到他的chlid视图。但是在 16 级或更高级别，它可以。

原因：setPressed----->dispatchSetPressed----->将按下状态传递给子视图----->childView.setPressed

View.java onTouchEvent 在级别 15，

```
case MotionEvent.ACTION_DOWN:
                mHasPerformedLongPress = false;

                if (performButtonActionOnTouchDown(event)) {
                    break;
                }

                // Walk up the hierarchy to determine if we're inside a scrolling container.
                boolean isInScrollingContainer = isInScrollingContainer();

                // For views inside a scrolling container, delay the pressed feedback for
                // a short period in case this is a scroll.
                if (isInScrollingContainer) {
                    mPrivateFlags |= PREPRESSED;
                    if (mPendingCheckForTap == null) {
                        mPendingCheckForTap = new CheckForTap();
                    }
                    postDelayed(mPendingCheckForTap, ViewConfiguration.getTapTimeout());
                } else {
                    // Not inside a scrolling container, so show the feedback right away
                    mPrivateFlags |= PRESSED; //comment by bran
                    refreshDrawableState();
                    checkForLongClick(0);
                }
                break; 
```

View.java onTouchEvent 16 级，

```
case MotionEvent.ACTION_DOWN:
                 mHasPerformedLongPress = false;

                 if (performButtonActionOnTouchDown(event)) {
                     break;
                 }

                 // Walk up the hierarchy to determine if we're inside a scrolling container.
                 boolean isInScrollingContainer = isInScrollingContainer();

                 // For views inside a scrolling container, delay the pressed feedback for
                 // a short period in case this is a scroll.
                 if (isInScrollingContainer) {
                     mPrivateFlags |= PREPRESSED;
                     if (mPendingCheckForTap == null) {
                         mPendingCheckForTap = new CheckForTap();
                     }
                     postDelayed(mPendingCheckForTap, ViewConfiguration.getTapTimeout());
                 } else {
                     // Not inside a scrolling container, so show the feedback right away
                     setPressed(true); //comment by bran
                     checkForLongClick(0);
                 }
                 break; 
```

请注意 Bran 的代码行，它们是不同的。setPressed(true); 不仅是 mPrivateFlags |= PRESSED; 和 refreshDrawableState(); ，但 dispatchSetPressed。

如果 Google 中有任何 Android SDK 开发人员，您想告诉我为什么将 mPrivateFlags |= PRESSED 更改为 setPressed(true);。

# iphone - 如何确定何时使用 AFNetworking 完成文件下载

> ID：14179432
> 
> 赞同：0
> 
> 时间：2013-01-06T04:53:49.877
> 
> 标签：iphone, ios, ipad

我已经阅读了大多数与 AFNetworking 的异步性质有关的帖子。但是，我的问题有点独特，我可以使用一些帮助。

我正在从模态视图控制器启动一个新的异步线程，该线程应该告诉用户我正在从 Web 服务器下载内容。这个想法是下载一堆文件（超过 100 个），效果很好。我什至将重试计数放入下载中，以便在失败时重试下载任何文件（最多）。一切都很好下载。问题是我不知道什么时候完成。

原因如下：我正在下载 JSON 文件列表。这些 JSON 文件定义了具有 PDF 和其他类型文件列表的其他 JSON 文件列表。由于我正在下载的内容的性质，我必须按顺序下载它。例如：

1.  下载文件1.json
2.  下载后从 file1.json 获取 JSON 文件列表
3.  加载每个辅助 JSON 文件（subFile1.json、subFile2.json 等）
4.  下载辅助 JSON 文件 (subFile1.json) 后，我会从该 JSON 文件 (subFile1.json) 中获取要下载的文件列表
5.  下载 JSON 子文件中指定的每个文件（例如 subFile1.json）

所以我的过程看起来是分层的，以确保在子文件之前下载父文件： 1\. 初始下载方法在成功时调用 SubDownloadMethod2（在成功块内） 2\. SubDownloadMethod2 从下载的文件中获取列表并调用 SubSubDownloadMethod3 3\. SubSubDownloadMethod3 下载 PDF 文件（和其他文件） ) ON SUCCESS (在成功块内)

如您所见，我有动态数量的文件要下载。因此我不知道我会预先下载多少文件。由于它可以进入多个级别并来自 Web 服务器上的多个目录，因此它变得更加困难。

如果下载失败（达到最大重试次数），我也会对每个方法进行递归回调，这也使它变得更加困难。

因为每次下载都会启动它自己的线程（我假设这就是 AFNetworking 正在做的事情），所以我不确定所有下载何时完成。我不知道 enqueueBatchOfHTTPRequestOperations 是否有帮助。我不完全理解它，我正在从网络服务器上的多个目录下载。我还需要根据每个下载级别进行批处理操作，因为我不知道在下载和解析定义的 JSON 文件之前我会走多远。

帮助！！！！

我认为将代码放入其中可能会有所帮助。要查看的代码很多，但这是一个难题（嗯，对于具有我技能的人来说）。

如果你看代码，每次我需要下载另一个文件时，我都会调用最底部的方法：

```
- (void)downloadLibraryFile:(NSString *)fileOnServer targetFile:(NSString *)targetFile retryCount:(int)retryCount completionBlock:(DownloadLibraryFileCompletionBlock)completionBlock
{
NSURLRequest *request = [NSURLRequest requestWithURL:[NSURL URLWithString:fileOnServer]];
AFHTTPRequestOperation *operation = [[AFHTTPRequestOperation alloc] initWithRequest:request];

operation.outputStream = [NSOutputStream outputStreamToFileAtPath:targetFile append:NO];

[operation setCompletionBlockWithSuccess:^(AFHTTPRequestOperation *operation, id responseObject)
    {
         //NSLog(@"Successfully downloaded file to %@", path);
         completionBlock(fileOnServer, targetFile, retryCount, nil);
    } failure:^(AFHTTPRequestOperation *operation, NSError *error) {
         completionBlock(fileOnServer, targetFile, retryCount, error);
    }];

[operation start];
} 
```

这将启动 AFNetorking 并开始下载。完成后它会调用我的完成块，但我怎么知道它们什么时候完成？

这是剩下的代码（包括上面的方法）

```
- (void)downloadLibraryOnReset
{
// Find and copy the page defintion file to the documents directoy
// TODO localize the call to get the appropriate file based on language
dispatch_queue_t queue = dispatch_queue_create("Library Download Queue", NULL);
dispatch_async(queue, ^{
    NSUserDefaults *defaults = [NSUserDefaults standardUserDefaults];
    NSString *serverLibraryURL = [defaults objectForKey:kRootURL];
    serverLibraryURL = [serverLibraryURL stringByAppendingPathComponent:kPageDefinitionsDirectory];

    // Save server root URL
    self.serverRootURL = serverLibraryURL;

    // Add last component onto download path
    serverLibraryURL = [serverLibraryURL stringByAppendingPathComponent:kPageDefinitions];

    // Get target location
    NSArray *dirPaths = NSSearchPathForDirectoriesInDomains(NSDocumentDirectory, NSUserDomainMask, YES);;
    NSString *targetFile = [dirPaths objectAtIndex:0];
    targetFile = [targetFile stringByAppendingPathComponent:@"en"]; // TODO this needs to be localized based on language
    targetFile = [targetFile stringByAppendingPathComponent:kPageDefinitionsDirectory];
    self.pageDefintiionDirectoryURL = targetFile;
    // Create the subdirectory off of the documents directory to contain the config files
    NSFileManager *filemgr = [NSFileManager defaultManager];
    if ([filemgr createDirectoryAtPath:targetFile withIntermediateDirectories:YES attributes:nil error: NULL] == NO)
    {
        // Failed to create directory
    }

    NSString *pageDefinitionsFileURL = [targetFile stringByAppendingPathComponent:kPageDefinitions];

    [self downloadPageDefinitionsFile:serverLibraryURL targetFile:pageDefinitionsFileURL retryCount:kDownloadRetryCount];

    // Reset the resetContent flag to false
    [defaults setBool:NO forKey:kResetContent];
});
}

- (void)downloadPageDefinitionsFile:(NSString *)fileOnServer targetFile:(NSString *)targetFile retryCount:(int)retryCount
{
[self downloadLibraryFile:fileOnServer targetFile:targetFile retryCount:retryCount completionBlock:^(NSString *fileOnServer, NSString *targetFile, int retryCount, NSError *error) {
    if(error)
    {
        retryCount--;
        if(retryCount)
        {
            NSLog(@"RETRY DONWLOAD (Attempt: %d, Method: %@) > File: %@", kDownloadRetryCount - retryCount, NSStringFromSelector(_cmd), fileOnServer);
            [self downloadPageDefinitionsFile:fileOnServer targetFile:targetFile retryCount:retryCount];
        }
        else
        {
            NSLog(@"RETRY COUNT EXCEEDED (Attempt: %d, Method: %@) > File: %@", kDownloadRetryCount, NSStringFromSelector(_cmd), fileOnServer);
        }
    }
    else
    {
        // Check to see if this file was downloaded after an error
        if(retryCount < kDownloadRetryCount)
        {
            NSLog(@">>RETRY SUCCESSFUL (Attempt: %d, Method: %@) > File: %@", kDownloadRetryCount - retryCount, NSStringFromSelector(_cmd), fileOnServer);
        }

        // Copy down all config files defined in the pagedefinitions.json file
        //code from other library
        NSError* err = nil;

        NSString *path = self.pageDefintiionDirectoryURL;
        path = [path stringByAppendingPathComponent:kPageDefinitions];

        NSData *data = [NSData dataWithContentsOfFile:path];

        if(data)
        {
            // Convert to JSON Directory
            NSMutableDictionary *pageDefinitionsDict = [NSJSONSerialization JSONObjectWithData:data options:kNilOptions error:&err];

            //fileVersion = pageDefinitionsDict[kFileVersion];
            NSMutableArray *pages = pageDefinitionsDict[kPages];
            for (NSMutableDictionary *page in pages)
            {
                MINPageDefinition *pageDef = [[MINPageDefinition alloc] initWithDictionary:page];
                NSString *targetDirectory = [targetFile stringByDeletingLastPathComponent];
                pageDef.pageURL = [targetDirectory stringByAppendingPathComponent:pageDef.pageConfigFileName];

                //NSString *imageURL = [pageDef.pageURL stringByDeletingLastPathComponent];
                pageDef.pageImageURL = [self.pageDefintiionDirectoryURL stringByAppendingPathComponent:pageDef.pageImageName];

                [[MINPageStore sharedInstance].pageArray addObject:pageDef];
            }
            // Write modified pagedefinitions.json to the appropriate directory in Documents
            [[MINPageStore sharedInstance] writePageDefinitionFile:path];

            // Continue downloading page images and other config files,
            for (MINPageDefinition *currPage in [[MINPageStore sharedInstance] pageArray])
            {
                [self downloadPageDefinitionImageFile:currPage retryCount:kDownloadRetryCount];
                [self downloadPageDefinitionJSONFile:currPage retryCount:kDownloadRetryCount];
            }
        }
    }
}];
}

- (void)downloadPageDefinitionJSONFile:(MINPageDefinition *)pageDef retryCount:(int)retryCount
{
NSUserDefaults *defaults = [NSUserDefaults standardUserDefaults];
NSString *serverLibraryURL = [defaults objectForKey:kRootURL];
serverLibraryURL = [serverLibraryURL stringByAppendingPathComponent:kPageDefinitionsDirectory];
serverLibraryURL = [serverLibraryURL stringByAppendingPathComponent:pageDef.pageConfigFileName];

[self downloadLibraryFile:serverLibraryURL targetFile:pageDef.pageURL retryCount:retryCount completionBlock:^(NSString *fileOnServer, NSString *targetFile, int retryCount, NSError *error) {

    if(error)
    {
        retryCount--;
        if(retryCount)
        {
            NSLog(@"RETRY DONWLOAD (Attempt: %d, Method: %@) > File: %@", kDownloadRetryCount - retryCount, NSStringFromSelector(_cmd), serverLibraryURL);
            [self downloadPageDefinitionJSONFile:pageDef retryCount:retryCount];
        }
        else
        {
            NSLog(@"RETRY COUNT EXCEEDED (Attempt: %d, Method: %@) > File: %@", kDownloadRetryCount, NSStringFromSelector(_cmd), serverLibraryURL);
        }
    }
    else
    {
        // Check to see if this file was downloaded after an error
        if(retryCount < kDownloadRetryCount)
        {
            NSLog(@">>RETRY SUCCESSFUL (Attempt: %d, Method: %@) > File: %@", kDownloadRetryCount - retryCount, NSStringFromSelector(_cmd), serverLibraryURL);
        }

        // Copy down all config files defined in the pagedefinitions.json file
        if([pageDef.pageType isEqualToString:kGridView])
        {
            [self downloadGridViewContent:pageDef];
        }
        else
        {
            //NSLog(@">>>>FINISHED DOWNLOADING PAGE: %@", pageDef.pageName);
        }

    }
}];
}

- (void)downloadPageDefinitionImageFile:(MINPageDefinition *)pageDef retryCount:(int)retryCount
{
NSUserDefaults *defaults = [NSUserDefaults standardUserDefaults];
NSString *serverLibraryURL = [defaults objectForKey:kRootURL];
serverLibraryURL = [serverLibraryURL stringByAppendingPathComponent:kPageDefinitionsDirectory];
serverLibraryURL = [serverLibraryURL stringByAppendingPathComponent:pageDef.pageImageName];

[self downloadLibraryFile:serverLibraryURL targetFile:pageDef.pageImageURL retryCount:retryCount completionBlock:^(NSString *fileOnServer, NSString *targetFile, int retryCount, NSError *error) {
    if(error)
    {
        retryCount--;
        if(retryCount)
        {
            NSLog(@"RETRY DONWLOAD (Attempt: %d, Method: %@) > File: %@", kDownloadRetryCount - retryCount, NSStringFromSelector(_cmd), serverLibraryURL);
            [self downloadPageDefinitionImageFile:pageDef retryCount:retryCount];
        }
        else
        {
            NSLog(@"RETRY COUNT EXCEEDED (Attempt: %d, Method: %@) > File: %@", kDownloadRetryCount, NSStringFromSelector(_cmd), serverLibraryURL);
        }
    }
    else
    {
        // Check to see if this file was downloaded after an error
        if(retryCount < kDownloadRetryCount)
        {
            NSLog(@">>RETRY SUCCESSFUL (Attempt: %d, Method: %@) > File: %@", kDownloadRetryCount - retryCount, NSStringFromSelector(_cmd), serverLibraryURL);
        }
        dispatch_async(dispatch_get_main_queue(), ^{
            [self.masterViewController.tableView reloadData];
        });
    }

}];
}

- (void)downloadGridViewContent:(MINPageDefinition *)pageDef
{
// Parse off the json extension
// Use this to create a subdirectory under the pagedefinitions directoy
NSString *newDirectoryForGridView = [pageDef.pageURL stringByDeletingPathExtension];
newDirectoryForGridView = [newDirectoryForGridView lastPathComponent];
NSString *newGridViewDirectoryURL = [pageDef.pageURL stringByDeletingPathExtension];

// Create the subdirectory off of the documents directory to contain the config files
NSFileManager *filemgr = [NSFileManager defaultManager];
if ([filemgr createDirectoryAtPath:newGridViewDirectoryURL withIntermediateDirectories:YES attributes:nil error: NULL] == NO)
{
    // Failed to create directory
}

// Load the grid view config file
[MINVolume loadAlbumItems:pageDef.pageURL completionBlock:^(NSString *fileName, MINVolume *newVolume, NSError *error) {
    if(!error)
    {
        if(newVolume && [newVolume.albumsArray count] > 0)
        {
            // Iterate through the albums and create directories for each album
            for(MINAlbum *album in newVolume.albumsArray)
            {
                NSString *localAlbumDirectory = [newGridViewDirectoryURL stringByAppendingPathComponent:album.albumURL];
                if ([filemgr createDirectoryAtPath:localAlbumDirectory withIntermediateDirectories:YES attributes:nil error: NULL] == NO)
                {
                    // Failed to create directory
                }
                // Copy down all album content
                for(MINAlbumItem *albumItem in album.albumItemsArray)
                {
                    // Create names for local file and thumbnail
                    NSString *localAlbumItemFileURL = [localAlbumDirectory stringByAppendingPathComponent:albumItem.itemFileName];
                    NSString *localAlbumItemFileThumbURL = [localAlbumDirectory stringByAppendingPathComponent:albumItem.itemThumbnailImageName];

                    // Define paths for file and thumbnail on server
                    NSString *serverAlbumItemFileURL = [self.serverRootURL stringByAppendingPathComponent:newDirectoryForGridView];
                    serverAlbumItemFileURL = [serverAlbumItemFileURL stringByAppendingPathComponent:album.albumURL];
                    serverAlbumItemFileURL = [serverAlbumItemFileURL stringByAppendingPathComponent:albumItem.itemFileName];
                    NSString *serverAlbumItemFileThumbURL = [self.serverRootURL stringByAppendingPathComponent:newDirectoryForGridView];
                    serverAlbumItemFileThumbURL = [serverAlbumItemFileThumbURL stringByAppendingPathComponent:album.albumURL];
                    serverAlbumItemFileThumbURL = [serverAlbumItemFileThumbURL stringByAppendingPathComponent:albumItem.itemThumbnailImageName];

                    // Copy album item file
                    BOOL bFileExists = [filemgr fileExistsAtPath:localAlbumItemFileURL];
                    if(!bFileExists)
                    {
                        [self downloadAlbumItem:albumItem isThumbnail:(BOOL)false fileOnServer:serverAlbumItemFileURL targetFile:localAlbumItemFileURL retryCount:kDownloadRetryCount];
                    }
                    else
                    {
                        albumItem.itemURL = localAlbumItemFileURL;
                    }

                    // Copy album item thumbnail
                    BOOL bFileThumbnailExists = [filemgr fileExistsAtPath:localAlbumItemFileThumbURL];
                    if(!bFileThumbnailExists)
                    {
                        [self downloadAlbumItem:albumItem isThumbnail:true fileOnServer:serverAlbumItemFileThumbURL targetFile:localAlbumItemFileThumbURL retryCount:kDownloadRetryCount];
                    }
                    else
                    {
                        albumItem.itemThumbnailURL = localAlbumItemFileThumbURL;
                    }
                }
            }
        }
        else
        {
            NSLog(@"No volume found for file: %@", pageDef.pageConfigFileName);
        }
    }
}];
}

- (void)downloadAlbumItem:(MINAlbumItem *)albumItem isThumbnail:(BOOL)isThumbnail fileOnServer:(NSString *)fileOnServer targetFile:(NSString *)targetFile retryCount:(int)retryCount
{
[self downloadLibraryFile:fileOnServer targetFile:targetFile retryCount:retryCount completionBlock:^(NSString *fileOnServer, NSString *targetFile, int retryCount, NSError *error) {
    if(error)
    {
        retryCount--;
        if(retryCount)
        {
            NSLog(@"RETRY DONWLOAD (Attempt: %d, Method: %@) > File: %@", kDownloadRetryCount - retryCount, NSStringFromSelector(_cmd), fileOnServer);
            [self downloadAlbumItem:albumItem isThumbnail:isThumbnail fileOnServer:fileOnServer targetFile:targetFile retryCount:retryCount];
        }
        else
        {
            NSLog(@"RETRY COUNT EXCEEDED (Attempt: %d, Method: %@) > File: %@", kDownloadRetryCount, NSStringFromSelector(_cmd), fileOnServer);
        }
    }
    else
    {
        // Check to see if this file was downloaded after an error
        if(retryCount < kDownloadRetryCount)
        {
            NSLog(@">>RETRY SUCCESSFUL (Attempt: %d, Method: %@) > File: %@", kDownloadRetryCount - retryCount, NSStringFromSelector(_cmd), fileOnServer);
        }

        if(isThumbnail)
            albumItem.itemThumbnailURL = targetFile;
        else
            albumItem.itemURL = targetFile;
    }
}];
}

- (void)downloadLibraryFile:(NSString *)fileOnServer targetFile:(NSString *)targetFile retryCount:(int)retryCount completionBlock:(DownloadLibraryFileCompletionBlock)completionBlock
{
NSURLRequest *request = [NSURLRequest requestWithURL:[NSURL URLWithString:fileOnServer]];
AFHTTPRequestOperation *operation = [[AFHTTPRequestOperation alloc] initWithRequest:request];

operation.outputStream = [NSOutputStream outputStreamToFileAtPath:targetFile append:NO];

[operation setCompletionBlockWithSuccess:^(AFHTTPRequestOperation *operation, id responseObject)
    {
         //NSLog(@"Successfully downloaded file to %@", path);
         completionBlock(fileOnServer, targetFile, retryCount, nil);
    } failure:^(AFHTTPRequestOperation *operation, NSError *error) {
         completionBlock(fileOnServer, targetFile, retryCount, error);
    }];

[operation start];
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-06T05:38:28.540

如果您正在执行 AFHTTPRequestOperation，则可以使用它的 setCompletionBlockWithSuccess 方法设置一个块，一旦下载（甚至上传）完成，就会调用该块。

例子：

```
AFHTTPRequestOperation *httpreq = [[AFHTTPRequestOperation alloc] initWithRequest:[NSURLRequest requestWithURL:downloadURL]];
[httpreq setCompetionBlockWithSuccess^(AFHTTPRequestOperation *operation, id responseObject) {
NSLog(@"%@",@"Done!");
}]; 
```

此外，您不需要在不同的线程中启动操作，因为它已经异步运行。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-06T06:36:48.330

您在 NSOperationQueue 中添加所有操作，如下所示：

```
NSOperationQueue *queue = [[NSOperationQueue alloc] init];
[queue addOperation: operation]; //your operation here
[operation start] 
[operation waitUntilFinish] 
```

如何维护 NSOperationQueue 请参考以下链接：

请参阅[ios-how-to-know-when-nsoperationqueue-finish-processing-a-few-operations](https://stackoverflow.com/questions/9998532/ios-how-to-know-when-nsoperationqueue-finish-processing-a-few-operations)链接。

请参阅[ios-how-to-check-if-an-nsoperation-is-in-an-nsoperationqueue](https://stackoverflow.com/questions/5217504/ios-how-to-check-if-an-nsoperation-is-in-an-nsoperationqueue)链接。

请参阅[ios-nsoperationqueue-operations-all-run-when- added-and-dont-queue](https://stackoverflow.com/questions/6988307/ios-nsoperationqueue-operations-all-run-when-added-and-dont-queue)链接。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-07-05T11:09:56.007

我会考虑使用 an`AFHTTPClient`来处理您的下载，特别是因为您想管理多个下载。初始化客户端后，您需要创建所有操作，然后使用方法将它们添加到客户端操作队列中`-[AFHTTPClient enqueueBatchOfHTTPRequestOperations: progressBlock: completionBlock:]`。这样，您还可以使用进度块确定下载进度。此外，完成块将允许您在完成时执行自己的自定义代码。

因此，您将从初始化客户端开始：

```
AFHTTPClient *client =[AFHTTPClient clientWithBaseURL:baseURL]; 
```

然后你想创建你的 HTTP 请求操作：

```
NSMutableURLRequest *request = [client requestWithMethod:@"GET" path:@"/" parameters:nil];
AFHTTPRequestOperation *firstOperation = [client HTTPRequestOperationWithRequest:request success:nil failure:nil];
AFHTTPRequestOperation *secondOperation = [client HTTPRequestOperationWithRequest:request success:nil failure:nil]; 
```

然后，您只需将这些操作添加到客户端操作队列中：

```
[client enqueueBatchOfHTTPRequestOperations:@[firstOperation, secondOperation, thirdImageRequestOperation] 
                              progressBlock:^(NSUInteger numberOfFinishedOperations, NSUInteger totalNumberOfOperations) {
                              //Handle progress here
                              } 
                            completionBlock:^(NSArray *operations) {
                             //Handle completion of all downloads here
}]; 
```

希望这可以帮助：）

# mysql - mysql服务未启动：地址已在使用中

> ID：14179434
> 
> 赞同：5
> 
> 时间：2013-01-06T04:54:00.343
> 
> 标签：mysql

我正在尝试在 ubuntu 上安装 mysql-5.5.29 源代码。每次我重新启动或启动服务时，它都会告诉我 MySQL Daemon 无法启动..

```
shell>>service mysql.server start

Starting MySQL
... * The server quit without updating PID file (/usr/local/mysql/data/ytl-HP-Pavilion-          g4-Notebook-PC.pid).

shell>>less /usr/local/mysql/data/ytl-HP-Pavilion-g4-Notebook-PC.err

130106 12:20:27 mysqld_safe Starting mysqld daemon with databases from /usr/local/mysql/data
130106 12:20:27 InnoDB: The InnoDB memory heap is disabled
130106 12:20:27 InnoDB: Mutexes and rw_locks use GCC atomic builtins
130106 12:20:27 InnoDB: Compressed tables use zlib 1.2.7
130106 12:20:27 InnoDB: Using Linux native AIO
130106 12:20:27 InnoDB: Initializing buffer pool, size = 128.0M
130106 12:20:27 InnoDB: Completed initialization of buffer pool
130106 12:20:27 InnoDB: highest supported file format is Barracuda.
130106 12:20:27  InnoDB: Waiting for the background threads to start
130106 12:20:28 InnoDB: 1.1.8 started; log sequence number 1595675
130106 12:20:28 [Note] Server hostname (bind-address): '0.0.0.0'; port: 3306
130106 12:20:28 [Note]   - '0.0.0.0' resolves to '0.0.0.0';
130106 12:20:28 [Note] Server socket created on IP: '0.0.0.0'.
130106 12:20:28 [ERROR] Can't start server : Bind on unix socket: Address already in use
130106 12:20:28 [ERROR] Do you already have another mysqld server running on socket: /var/lib/mysql ?
130106 12:20:28 [ERROR] Aborting

130106 12:20:28  InnoDB: Starting shutdown...
130106 12:20:29  InnoDB: Shutdown completed; log sequence number 1595675
130106 12:20:29 [Note] /usr/local/mysql/bin/mysqld: Shutdown complete

130106 12:20:29 mysqld_safe mysqld from pid file /usr/local/mysql/data/ytl-HP-Pavilion-g4-Notebook-PC.pid ended

shell>>ps aux |grep mysql
root      4884  0.0  0.0   5832   836 pts/1    S+   12:27   0:00 grep --color=auto mysql

shell>ll /usr/local/mysql

drwxr-xr-x 13 root  mysql  4096  1月  5 14:54 ./
drwxr-xr-x 13 root  root   4096  1月  5 14:54 ../
drwxr-xr-x  2 root  mysql  4096  1月  5 14:54 bin/
-rw-r--r--  1 root  mysql 17987 12月 10 14:16 COPYING
drwxr-xr-x  5 mysql mysql  4096  1月  6 12:23 data/
drwxr-xr-x  2 root  mysql  4096  1月  5 14:54 docs/
drwxr-xr-x  3 root  mysql  4096  1月  5 14:54 include/
-rw-r--r--  1 root  mysql  7605 12月 10 14:16 INSTALL-BINARY
drwxr-xr-x  3 root  mysql  4096  1月  5 14:54 lib/
drwxr-xr-x  4 root  mysql  4096  1月  5 14:54 man/
drwxr-xr-x 10 root  mysql  4096  1月  5 14:54 mysql-test/
-rw-r--r--  1 root  mysql  2552 12月 10 14:16 README
drwxr-xr-x  2 root  mysql  4096  1月  5 14:54 scripts/
drwxr-xr-x 27 root  mysql  4096  1月  5 14:54 share/
drwxr-xr-x  4 root  mysql  4096  1月  5 14:54 sql-bench/
drwxr-xr-x  2 root  mysql  4096  1月  5 14:54 support-files/ 
```

昨天安装mysql时，我使用：

```
cmake . -DCMAKE_INSTALL_PREFIX="/usr/local/mysql" \
-DMYSQL_UNIX_ADDR=/var/lib/mysql 
```

但是我发现 /var/lib/mysql 在我使用时是空的：

```
shell>> ll /var/lib/mysql
drwxr-xr-x  2 root root 4096  1月  2 23:38 ./
drwxr-xr-x 65 root root 4096  1月  2 23:38 ../ 
```

似乎 3306 套接字未在使用中

```
shell>>netstat -na | grep LISTEN
tcp        0      0 127.0.0.1:631           0.0.0.0:*               LISTEN     
tcp        0      0 127.0.1.1:53            0.0.0.0:*               LISTEN     
tcp6       0      0 ::1:631                 :::*                    LISTEN     
unix  2      [ ACC ]     流        LISTENING     14474    @/tmp/.ICE-unix/1685
unix  2      [ ACC ]     流        LISTENING     14475    /tmp/.ICE-unix/1685
unix  2      [ ACC ]     流        LISTENING     14449    /tmp/ssh- KTntrIp1gXrU/agent.1685
unix  2      [ ACC ]     流        LISTENING     2030     /tmp/.X11-unix/X0
unix  2      [ ACC ]     流        LISTENING     14142    /tmp/.com.google.Chrome.faNSdW/SingletonSocket
unix  2      [ ACC ]     流        LISTENING     13570    /run/user/ytlreal/keyring-cuLMzX/ssh
unix  2      [ ACC ]     流        LISTENING     14533    /tmp/pulse-dTohrWydajmn/native
unix  2      [ ACC ]     流        LISTENING     13581    /run/user/ytlreal/keyring-cuLMzX/pkcs11
unix  2      [ ACC ]     流        LISTENING     13583    /run/user/ytlreal/keyring-cuLMzX/gpg
unix  2      [ ACC ]     流        LISTENING     18200    /var/run/cups/cups.sock
unix  2      [ ACC ]     流        LISTENING     11828    /run/user/ytlreal/keyring-cuLMzX/control
unix  2      [ ACC ]     流        LISTENING     8408     @/com/ubuntu/upstart
unix  2      [ ACC ]     流        LISTENING     7998     @/org/bluez/audio
unix  2      [ ACC ]     流        LISTENING     2029     @/tmp/.X11-unix/X0
unix  2      [ ACC ]     流        LISTENING     11869    @/tmp/dbus-oZvW58NsSp
unix  2      [ ACC ]     流        LISTENING     8081     /var/run/acpid.socket
unix  2      [ ACC ]     流        LISTENING     9896     /var/run/dbus/system_bus_socket
unix  2      [ ACC ]     流        LISTENING     14913    @/tmp/dbus-2gkvFVNb
unix  2      [ ACC ]     流        LISTENING     9933     /var/run/sdp
unix  2      [ ACC ]     流        LISTENING     14457    @/tmp/dbus-kTBAyCa0aq
unix  2      [ ACC ]     流        LISTENING     9209     /var/run/avahi-daemon/socket
unix  2      [ ACC ]     SEQPACKET  LISTENING     8445     /run/udev/control 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-06T04:59:50.040

还有另一个软件正在侦听端口 3306。尝试做

```
网络统计-na | grep 听

```

然后看看是不是真的。3306 不应该在那里。如果你看到有东西在那个端口上监听，你必须在尝试启动 MySQL 之前杀死它

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-01-06T05:29:40.030

这些是关键线

```
130106 12:20:28 [ERROR] Can't start server : Bind on unix socket: Address already in use
130106 12:20:28 [ERROR] Do you already have another mysqld server running on socket: /var/lib/mysql ? 
```

查找正在使用的程序`/var/lib/mysql`

```
lsof /var/lib/mysql 
```

杀了它

```
kill -HUP `lsof -t /var/lib/mysql` 
```

也尝试卸载它。

现在再次安装新安装的服务器

# html - 复选框的 onclick 事件处理程序表现出不一致的行为

> ID：14179438
> 
> 赞同：0
> 
> 时间：2013-01-06T04:54:18.967
> 
> 标签：html, javascript-events

我已将大型应用程序中的一个难以跟踪的错误隔离到以下最小工作示例：

```
<html>
<head>
    <title>Test page</title>
    <script type="text/javascript" language="JavaScript">
        function OnClickHandler (t) {
            t.disabled = true;
            var n = parseInt (t.getAttribute ("num"));
            document.body.appendChild (document.createTextNode (
                "num = " + t.getAttribute ("num") + ", checked = " + t.checked.toString () + " | "
            ));
            t.setAttribute ("num", n + 1);
            t.disabled = false;
        }
    </script>
</head>
<body>
    <input type="checkbox" num="0" onclick="OnClickHandler(this)" />
    <br />
</body>
</html> 
```

我期待的是`num`属性的值和复选框的选中状态之间会有完美的同步。但是这个条件不成立，可以通过快速单击复选框来查看。以下是示例输出：

> 输入：两次非常快速的点击，短暂的暂停，两次非常快速的点击，短暂的暂停，单击
> 
> 数 = 0，检查 = 真 | 数 = 1，检查 = 真 | 数 = 2，检查 = 假 | 数 = 3，检查 = 假 | 数字 = 4，检查 = 真 |

该逻辑的意图是该`num`属性仅在检查状态更改时才更改。应用程序的很多后续逻辑都依赖于这种同步。实现此同步的推荐方法是什么？

在此先感谢您的帮助。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-06T04:56:33.243

好吧，我在发布问题后几乎立即发现了我的问题。我的错误是非常基本的，但我想我还是会发布我的回复。

看起来正确的实现应该使用`onchange`而不是`onclick`复选框。因此，代码应如下所示：

> 测试页面函数 OnClickHandler (t) { t.disabled = true; var n = parseInt (t.getAttribute ("num")); document.body.appendChild (document.createTextNode ("num = " + t.getAttribute ("num") + ", 检查 = " + t.checked.toString () + " | " )); t.setAttribute("num", n + 1); t.disabled = 假；}

希望这可以为一些可怜的灵魂节省一些白发。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-06T04:58:01.597

您是否尝试过将 onchange 与复选框一起使用而不是 onclick？

# c++ - 如果我只想指定一个哈希函数，我应该将什么传递给 unordered_map 的存储桶计数参数？

> ID：14179441
> 
> 赞同：25
> 
> 时间：2013-01-06T04:54:49.500
> 
> 标签：c++, stl, c++11, unordered-map

C++11 的`unordered_map`默认构造函数如下所示：

```
explicit unordered_map( size_type bucket_count = /*implementation-defined*/,
                    const hasher& hash = hasher(),
                    const key_equal& equal = key_equal(),
                    const allocator_type& alloc = allocator_type() ); 
```

我想`unordered_map`使用自定义哈希函数创建一个，但它是构造函数的第二个参数。

我应该使用什么桶数？我可以使用一个神奇的值来告诉容器自己决定吗？否则，是否有一种启发式方法可以用来根据我希望我的地图包含的键数之类的东西来猜测一个好的桶数？我还应该关心吗？

* * *

## 回答 #1

> 赞同：19
> 
> 时间：2013-01-06T13:33:12.257

我不会太担心它。

容器保证桶数*至少*是您提供的值，即如果需要它会增加它。您可以将零作为存储桶计数传递，并且实现将执行类似的操作`std::max(count, 10)`并覆盖零值，或者它只会在第一次插入时重新散列。

另一种选择是从默认构造的对象中复制值：

```
H hasher;
unordered_map<K,T,H,P> m{ unordered_map<K,T,H,P>{}.bucket_count(), hasher }; 
```

这会将存储桶计数设置为实现的默认值（但确实需要`H`哈希函数类型为 DefaultConstructible。）

FWIW GCC`unordered_map`使用 10 作为您展示的构造函数的默认值（因此这可能也是一个合理的默认值），并使用 0 作为构造函数采用一对迭代器或`initializer_list`.

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-06T05:10:49.943

unordered_map 的模板参数之一是散列函数。如果您在那里指定哈希函数对象，则可以将构造函数参数保留为默认设置。

# android - Atrix 4G(MB860) 无法将音频路由到听筒

> ID：14179447
> 
> 赞同：1
> 
> 时间：2013-01-06T04:55:36.630
> 
> 标签：android, routes

我正在 Android 上开发一个 VOIP 应用程序，在开始通话之前，我将音频模式设置为 MODE_IN_CALL，并使用 STREAM_VOICE_CALL 播放声音。

在大多数手机上它都可以工作，但它在运行 Android 2.2.2 的 Atrix 4G (MB860) 上不起作用。

我将模式更改为 MODE_NORMAL 并使用 STREAM_MUSIC 它可以播放和录制，但声音是通过扬声器而不是听筒播放的。

我尝试使用 setSpeakerPhoneOn(false) 将声音路由到耳机，但这没有区别。

有人遇到过这个问题吗？

任何帮助，将不胜感激！

# python - 为什么在 Python 中使用多线程没有输出？

> ID：14179448
> 
> 赞同：1
> 
> 时间：2013-01-06T04:55:53.790
> 
> 标签：python, multithreading, python-3.x, parallel-processing, thread-safety

我正在阅读 Python 编程第 4 版。

以下是代码（Python3.2）：

```
import _thread

def action(i):
    print(i ** 32)

class Power:
    def __init__(self, i):
        self.i = i
    def action(self):
        print(self.i ** 32)

_thread.start_new_thread(action,(2,))
_thread.start_new_thread((lambda: action(2)), ())

obj = Power(2)
_thread.start_new_thread(obj.action,()) 
```

当我运行它时，屏幕上没有输出：

```
$python3 thread-example.py
$ 
```

有人对此有想法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-06T05:27:13.030

下划线`_`表示它是一个私有 API（`thread`模块自 2005 年以来已过时）；您应该改用`threading`模块：

```
from threading import Thread

# ...
Thread(target=action, args=[2]).start()
Thread(target=lambda: action(2)).start()
Thread(target=obj.action).start() 
```

您不需要`.join()`显式调用方法；非守护线程在主线程退出之前自动加入。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-06T05:03:23.297

当主线程退出时，整个进程退出。

您需要让主线程等到其他线程完成。API中对此没有任何规定`_thread`（它太低级了）。

`threading.Thread.join()`如果您愿意使用更好的 API，可以使用 。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-06T05:41:52.870

你为什么不使用`threading`模块（[在这里查看](https://stackoverflow.com/q/5568555/155813)）？在您的示例中，主线程在子线程可以打印任何内容之前退出。例如，如果您在示例末尾添加以下内容，则适用于我的系统：

```
import time
time.sleep(5) 
```

但是在更复杂的情况下，您仍然不能保证在所有子线程退出之前主线程不会退出。您有以下选择：

*   从每个子线程设置标志，并在退出前继续检查主线程的标志（不好的方法）。
*   用于[`time.sleep`](http://docs.python.org/3/library/time.html#time.sleep)休眠所有子线程可以退出的最长时间（也是一种不好的方法）。
*   用于[`threading.Thread.join`](http://docs.python.org/3/library/threading.html#threading.Thread.join)等到每个孩子退出（好方法）。（从其他答案中可以看出）

# jquery - 如何根据文章的长度更改垂直内容的长度？

> ID：14179456
> 
> 赞同：0
> 
> 时间：2013-01-06T04:57:55.877
> 
> 标签：jquery, content-length

如果有一个 500px 长的垂直内容滑块，有没有办法用 jquery 修改这个数字，取决于它旁边的（例如）“文章”有多长？

附加信息：内容滑块中有许多框，我使用了一个带有溢出的包装器：隐藏，所以我只需要知道一种测量文章长度的方法，然后修改包装器的长度（默认为 500px）。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-06T05:01:46.197

```
$( function () {
if($("div").height() < $("article").height()) {
$("div").height($("article").height());
}
}); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-06T05:00:10.230

也许 jQuery 的[高度](http://api.jquery.com/height/)函数就是您要寻找的。

# collections - 集合和索引

> ID：14179468
> 
> 赞同：0
> 
> 时间：2013-01-06T04:59:54.177
> 
> 标签：collections

是否存在您不希望被视为可索引的集合类型？我正在编写一个集合库，但我想不出你不想要的集合类型。您可以获取和设置索引，在索引处删除并在链接列表中插入，尽管它的工作方式不同......

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-06T05:10:26.210

当您允许集合可索引时，您承担了限制您优化集合内部的能力的合同。

特别是，有一种隐含的理解是，如果您在某个时间点在某个索引处看到某个项目，`i`然后将更多项目添加到集合中，那么在添加`i`之后该项目出现在不同的索引处是极不寻常的. 这提出了一个限制：如果您想使用索引器实现基于哈希的集合，您将无法自动调整它的大小，并且忽略索引。与放弃索引要求相比，您的实现必须做更多的工作。

# css - 如何将页脚粘贴到底部？有点扭曲

> ID：14179481
> 
> 赞同：1
> 
> 时间：2013-01-06T05:04:07.067
> 
> 标签：css, footer, sticky-footer

所以基本上我想把页脚贴在我的页面底部

但是我的页面内容是动态的，所以有的时候内容很长，有的时候很短

我已经通过谷歌搜索并找到了很多结果，但是当我尝试时，它们在内容很短时会起作用，但如果内容很长，它会粘在窗口底部（不是页面）并与内容重叠

是否使用javascript无关紧要，但如果你有纯CSS的会更好

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-06T05:09:59.443

```
#footer{
    position:fixed; 
    bottom:0;
    height:200px;
}

body
{
    min-height:100%;
    padding-bottom:200px; /* same as footer height */
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-06T05:17:04.833

这不使用固定位置，因此它不会总是显示在视口的底部。

[从这里开始](http://ryanfait.com/sticky-footer/)的 CSS

您还可以[在此处查看有关此问题的讨论](https://stackoverflow.com/questions/42294/how-do-you-get-the-footer-to-stay-at-the-bottom-of-a-web-page?rq=1)

```
* {
    margin: 0;
}
html, body {
    height: 100%;
}
.wrapper {
    min-height: 100%;
    height: auto !important;
    height: 100%;
    margin: 0 auto -142px; /* the bottom margin is the negative value of the footer's height */
}
.footer, .push {
    height: 142px; /* .push must be the same height as .footer */
}

/*

Sticky Footer by Ryan Fait
http://ryanfait.com/

*/ 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-06T05:11:18.527

我可以找到一个 CSS 解决方案（不是 100%）

```
#footer {
   position:fixed;
   left:0px;
   bottom:0px;
   height:30px;
   width:100%;
   background:#999;
}

/* IE 6 */
* html #footer {
   position:absolute;
   top:expression((0-(footer.offsetHeight)+(document.documentElement.clientHeight ? document.documentElement.clientHeight : document.body.clientHeight)+(ignoreMe = document.documentElement.scrollTop ? document.documentElement.scrollTop : document.body.scrollTop))+'px');
} 
```

在下面的这个链接 [固定的css页脚](http://css-tricks.com/snippets/css/fixed-footer/)

您还可以查看其他 SO 帖子

[页脚位置底部和中心](https://stackoverflow.com/questions/5587740/footer-position-bottom-and-center)

[如何使页脚固定在页面中](https://stackoverflow.com/questions/5189238/how-to-make-a-footer-fixed-in-the-page-bottom)

# java - Java swing - ActionListener 应该去哪里？

> ID：14179485
> 
> 赞同：2
> 
> 时间：2013-01-06T05:04:28.757
> 
> 标签：java, swing, user-interface, actionlistener, code-organization

按照惯例，用户界面的 ActionListener 应该放在哪里？我有几个选择，但似乎都不对。

速记：

*   GUI - 包含所有 JPanels/可显示对象的主类
*   Logic - 处理应用程序逻辑的主类

* * *

1.  我可以在 GUI 中内联声明一个新的 ActionListener，存储它，然后将它的指针传递到需要它的位置。
2.  我可以让 GUI 本身实现 ActionListener 并将对自身的引用传递到需要它的地方。
3.  我可以在主逻辑中内联声明一个新的 ActionListener（这是有道理的，因为按钮执行的操作是不应出现在 GUI 中的逻辑），然后将其传递给 GUI，GUI 会将其传递到需要的地方。
4.  我可以在一个全新的文件 GUIListener.java 中编写逻辑，并在需要/传递它的地方声明 GUIListener。
5.  其他一些方法，我敢肯定有很多。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-06T07:50:35.457

这基本上提出了一个关注点分离的问题。在我看来，您应该将 GUI、Controller 和 Model(bean) 对象保存在单独的文件中。控制器促进与应用程序相关的所有处理。

# javascript - 如何在页面 WinJS 之间传递变量？

> ID：14179492
> 
> 赞同：5
> 
> 时间：2013-01-06T05:05:37.553
> 
> 标签：javascript, html, windows-8, winjs

我正在尝试将两个变量从一页传递到下一页。我该怎么做呢？

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2013-01-06T09:27:00.233

将此代码放在第一页：

```
WinJS.Navigation.navigate("/pages/secondpage.html", yourvalue); 
```

然后在第二页检索数据使用：

```
ready: function (element, options) {
    //your data yourvalue is inside options parametr 
} 
```

[关于导航的很好的例子](http://windows8center.sourceforge.net/31-days-of-windows-8-day-13-navigation/)

[WinJS 导航示例](http://www.codefoster.com/post/2012/06/21/Page-Navigation-in-Windows-8-JavaScript-Apps.aspx)

[WinJS导航示例2](http://www.progware.org/Blog/post/%28Windows8%29-WinJS-single-page-navigation-and-ViewModels.aspx)

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2013-01-06T15:57:34.553

正如诺伯特在他的评论中回答的那样，只是想包括一个传递多个值的例子。

```
WinJS.Navigation.navigate("/pages/page2/page2.html", {value1:"hello",value2:"world"} 
```

# 3dsmax - 如何通过 3ds MAXScript 添加弹出式注释？

> ID：14179496
> 
> 赞同：1
> 
> 时间：2013-01-06T05:06:08.740
> 
> 标签：3dsmax, 3ds, maxscript

3ds Max 中有一个名为“添加弹出式注释”的功能。如果我按照 Tudor Nita 在[此处](http://www.cgrats.com/how-to-add-a-pop-up-note-in-3ds-max.html "这里")的帖子中描述的手动过程，该功能可以完美运行，但我很难在[MAXScript 文档](http://docs.autodesk.com/3DSMAX/15/ENU/MAXScript-Help/ "MAX 脚本文档")中找到正确的 API 调用。

有人能告诉我应该调用哪个 MAXScript 函数以编程方式在 *.max 文件中嵌入弹出式注释吗？

这个简单的代码似乎允许我以编程方式设置 Author 和 Comments 文件属性，但它似乎没有显示 Nita 演示的酷对话框：

```
loadMaxFile "d:\\3DSTestBed\fileToProcess.max" 
fileProperties.addProperty #summary "Author" "Shawn Eary"
fileProperties.addProperty #summary "Comments" "Rendered on an Amiga 5000 (I Wish...)"
saveMaxFile "d:\\3DSTestBed\processedFile.max" 
```

如果我不仅可以以编程方式更新文件属性，而且还可以让它们显示在 Nita 在加载 *.max 文件时提到的对话框中，那就太好了。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-06T08:18:43.517

“添加弹出式注释”功能是您可以自由检查的宏脚本。当您转到*Customize User Interface*时，右键单击“Add Pop-Up Note”命令并选择*Edit Macro Script*。

然后，您可以确切地看到它是如何完成的。

在这种情况下，它是通过**持久的 #filePostOpen 回调**完成的：

```
callbacks.addscript #filepostopen "Execute Note_NoteString" id:#SceneNote persistent:true 
```

**持久**回调是保存在场景文件中的回调。

# opengl - 在 OpenGL 2.1 中使用纹理之前是否需要调用 glEnable(GL_TEXTURE)？

> ID：14179497
> 
> 赞同：6
> 
> 时间：2013-01-06T05:06:11.517
> 
> 标签：opengl, textures

在 OpenGL 2.1+ 中，我们需要`glEnable(GL_TEXTURE)`在使用纹理之前调用吗？如果我们遇到纹理问题，可能是什么原因？

**更新：**

我正在使用 OpenGL 2.1 for Desktop，我的步骤是：

1.  加载 bmp 24 位图像（我检查了 gDebuger，它显示我的纹理正常，所以我确定我的加载图像过程没有失败）。

2.  `init()`在procedude中调用几个OpenGL函数：

    ```
    glGenTextures(1, &texture_id);
    glBindTexture(GL_TEXTURE_2D, texture_id);
    glTexParameteri(GL_TEXTURE_2D, GL_TEXTURE_MAG_FILTER, GL_LINEAR);
    glTexParameteri(GL_TEXTURE_2D, GL_TEXTURE_MIN_FILTER, GL_LINEAR);
    glTexImage2D(GL_TEXTURE_2D, 0, GL_RGB, image_width, image_height, 0, GL_BGR, GL_UNSIGNED_BYTE, image_data); 
    ```

3.  在 draw_scene() 中：

    ```
    glUseProgram(program);
    glActiveTexture(GL_TEXTURE0);
    glBindTexture(GL_TEXTURE_2D, texture_id);
    glUniform1i(uniform_texture, 0);
    ... 
    ```

4.  顶点着色器（版本 120）：

    ```
    attribute vec3 vPos;
    attribute vec2 vTexCoord;

    uniform mat4 MV;
    uniform mat4 Projection;

    varying vec2 fragTexCoord;

    void main()
    {
        fragTexCoord = vTexCoord;
        gl_Position = Projection * MV * vPos;
    } 
    ```

5.  片段着色器：

    ```
    uniform sampler2D my_texture;
    varying vec2 fragTexCoord;

    void main()
    {
        gl_FragColor = texture2D(my_texture, fragTexCoord);
    } 
    ```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-08-29T13:43:36.697

如果您在 OpenGL 2.1 中使用 GLSL 着色器，那么对的调用`glEnable(GL_TEXTURE_*)`没有任何意义。您在片段着色器中应用纹理。

如果您打算继续使用 OpenGL 3.x 核心配置文件，请记住`glEnable(GL_TEXTURE_*)`已弃用。

# linq - 实体框架：加入不同类型的实体并按日期排序

> ID：14179500
> 
> 赞同：1
> 
> 时间：2013-01-06T05:06:33.373
> 
> 标签：linq, entity-framework, ef-code-first

我读过一些听起来很相似的文章，但我不太能理解所讨论的内容。我使用的是 C# Entity Framework Code First 和 MVC 4。这是一些分层模型的大纲。

```
 Project
      ProjectImage
      ProjectDoc
           Comment
                CommentVote
                CommentReply
                     CommentReplyVote 
```

所有这些模型都有一个 DateCreated 字段。我想运行一个查询，我可以按日期排序，并在同一个列表中显示所有这些事件中最新到最旧的事件。我想以不同的方式处理（显示）每一个。我不知道从哪里开始，也不知道在 Stackoverflow 上使用什么搜索词来找到答案。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-06T05:43:39.463

这是我承诺的代码...

它不是最先进的，但它是一个简单的控制台应用程序，可让您了解如何处理此问题。我基本上是从列表中读取的（在您的情况下，您将从数据库表中读取）。然后我将`DateCreated`对象本身添加到一个自定义类中，该类允许按`DateCreated`字段对所有对象进行排序。演示代码由您决定，但我将向您展示如何根据对象类型打印到控制台。

```
class Program
{
    static void Main(string[] args)
    {
        var projects = new List<Project>{
        new Project() {  ProjectId = 1, ProjectName = "My Secret Project", DateCreated = DateTime.Today.AddHours(-1) },
        new Project() {  ProjectId = 2, ProjectName = "My Big Project", DateCreated = DateTime.Today.AddHours(-2) }};

        var projectImages = new List<ProjectImage> {
        new ProjectImage() {  ProjectImageId = 1, ProjectImageSize = 17.17, DateCreated = DateTime.Today.AddHours(-3) },
        new ProjectImage() {  ProjectImageId = 2, ProjectImageSize = 10.17, DateCreated = DateTime.Today.AddHours(-4) }};

        var objects = new List<MyCustomClass>();

        foreach (var project in projects)
        {
            objects .Add(
                new MyCustomClass() { DateCreated = project.DateCreated, Object = project });
        }

        foreach (var projectImage in projectImages)
        {
            objects.Add(
                new MyCustomClass() { DateCreated = projectImage.DateCreated, Object = projectImage });
        }

        // Objects ordered by Date, Newest first...
        var objectsByDateCreated = objects.OrderByDescending(o => o.DateCreated);

        foreach (var @object in objectsByDateCreated)
        {
            Console.WriteLine(string.Format("{0} => {1}", @object.Object.GetType().Name, @object.DateCreated));
        }

        // Displaying objects according to type
        foreach (var @object in objectsByDateCreated)
        {
            if (@object.Object is Project)
            {
                var project = @object.Object as Project;

                Console.WriteLine(project.ProjectName);
            }
            else if (@object.Object is ProjectImage)
            {
                var projectImage = @object.Object as ProjectImage;

                Console.WriteLine(projectImage.ProjectImageSize);
            }
        }
    }
}

public class MyCustomClass
{
    public DateTime DateCreated { get; set; }
    public object Object { get; set; }
}

public class Project
{
    public int ProjectId { get; set; }
    public string ProjectName { get; set; }
    public DateTime DateCreated { get; set; }
}

public class ProjectImage
{
    public int ProjectImageId { get; set; }
    public double ProjectImageSize { get; set; }
    public DateTime DateCreated { get; set; }
} 
```

# c - 中值滤波，窗口大小 3,5,7，带 C

> ID：14179504
> 
> 赞同：-3
> 
> 时间：2013-01-06T05:06:55.427
> 
> 标签：c, image, algorithm, filtering, median

我想对窗口大小为 3、5 和 7 的黑白 256x256 图像应用中值过滤...我找不到可以使用的排序算法。你能帮助我并给我一些想法吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-06T13:33:15.673

**我做了一个排序代码**：

整数 m = 1

对于 (i = 0; i = 2; i++)

对于 (j = 0, j = 2, j++)

x[m] <- outputImage[i,j];

米=米+1；

}

}

对于 (i = 1; i = 9; i++)

```
for ( j = 9; j = i; j-- )

    if x[m] < x [m - 1]

        x[m] = x[m - 1] 
```

}

}

}

m = 1 对于 ( i = 0; i = 2; i++)

```
for ( j = 0, j = 2, j++)

outputImage[i,j] = x[m];

m = m + 1; 
```

}

}

**好的，排序后我取中间的数字......我现在的问题是我不知道如何将它应用到我的代码中，因为代码的 for 循环是这样的，我想使用中值过滤3x3 窗口大小（我放了椒盐噪声）**：

```
for (i = 0; i < ROWS; i++)

{
    for (j = 0; j < COLUMNS; j++)

    {   

            outputImage[i][j] = inputImage[i][j];

    }

}
    for( p = 0; p <500; p++)

    {
        outputImage[rand() % 256 ] [rand() % 256] = 0;

        } 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-06T12:31:18.817

您可以使用选择算法找到中位数而不进行排序： [http ://en.wikipedia.org/wiki/Selection_algorithm](http://en.wikipedia.org/wiki/Selection_algorithm)

但是任何一种都可以。只需排序并取中间的数字。

# ruby-on-rails - Ruby on Rails 上的递归树

> ID：14179508
> 
> 赞同：4
> 
> 时间：2013-01-06T05:07:40.467
> 
> 标签：ruby-on-rails, recursion

以下是在 html.erb 中完成的迭代树，它在树结构中仅达到两个级别：

```
 <ul>
    <li><%= root_template.id  %></li>
      <ul>
          <% for template in root_template.children  %>
              <li><%= template.id  %></li>
              <% if template.has_children? %>
                <ul>
                <% for template_child in template.children  %>
                    <li><%= template_child.id  %></li>
                <% end %>
                </ul>
              <% end %>
          <% end %>
      </ul>
  </ul> 
```

结果： ![迭代的](../Images/2ec7733331fa2b53d099a3505819d12c.png)

我想移动帮助文件中的代码并应用递归以达到所有级别：

html.erb（因此，从模板设置根）：

```
 <% html = '' %>
  <ul>
    <li><%= root_template.id  %></li>
    <ul>
        <%= recursive_tree root_template, html %>
    </ul>
  </ul> 
```

然后辅助方法：

```
 def recursive_tree(root, html)
    html << ''
    if !root.has_children?
      html << "<li>#{root.id}</li>"
      return html.html_safe
    else
      for template_child in root.children
        html << "<ul>#{recursive_tree(template_child, html)}</ul>"
      end
    end
    return html.html_safe
  end 
```

结果：![错误的递归结果](../Images/f7c5f783a8c5fe2771f5692ac6901024.png)

我已经花了一天的时间来弄清楚如何将正确的 html 从帮助程序发送到模板，现在即使我使用了调试器，也无法弄清楚这种递归和解决方案的问题是什么。有意见吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-06T23:54:46.990

以下是我上面遇到的递归问题的最终答案，它们都共享一个类似的模板调用，如下所示：

对于溶胶 1：

```
 <% html = '' %>
  <ul>
    <%= recursive_tree root_template, html %>
  </ul> 
```

对于溶胶 2：

```
 <ul>
    <%= call_me_baby_two root_template %>
  </ul> 
```

**解决方案 1）**使上述有问题的给定代码无需任何清理即可工作：

*   **解释 1）**我将整个 html 代码传递给递归调用，所以这是最大的错误，现在我传递一个空白字符串并在递归调用返回到主 html 后附加它，对于更深层次的递归调用也是如此。
*   **解释 2）**如果它是孩子，我没有添加根的 id，在解决上一个问题后我已经意识到这一点。

    ```
    def recursive_tree(root, html)
    html << ''
    if !root.has_children?
      html << "<li>#{root.id}</li>"
      return html.html_safe
    else
      html << "<li>#{root.id}</li>" # Explanation 2
      for template_child in root.children 
        temp_html = '' # Explanation 1
        html << "<ul>#{recursive_tree(template_child, temp_html)}</ul>"
      end
    end
    return html.html_safe
    end 
    ```

**解决方案 2）**下面我还花额外的时间使 @davidrac 的伪代码工作：

```
 def recursive_tree_three(root)
    html=''
    if root
      html = "<li>#{root.id}</li>"
      if root.has_children?
        for template_child in root.children
          html << "<ul>"
          html << recursive_tree_three(template_child)
          html << "</ul>"
        end
      end
    end
    return html
  end

  def call_me_baby_two(root)
    recursive_tree_three(root).html_safe
  end 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-06T07:55:31.137

我可以在这里发现的一个问题是您使用 html_safe 的次数超出了您的需要。由于您将 html_safe 作为递归方法的一部分，因此会为更深的节点一遍又一遍地调用它。

您的实现中似乎有问题的另一件事是`<li>`标签没有`<ul>`正确包装标签，因此对于具有多个子节点的节点，这可能会得到错误的结果

也许您可以稍微不同地构造递归方法（主要是伪代码）：

```
def recursive_tree(root)
  res = ''
  if root
    res = "<li>#{root.id}"
    # if root has children
    #   add <ul>
    #   for each of the children res << recursive_tree(child)
    #   add </ul>
    # end
    res << "</li>"
  end
  res
end 
```

现在添加一些包装函数来创建初始列表并添加 html_safe：

```
wrapping_func(root)
  "<ul>#{recursive_tree(root)}</ul>".html_safe
end 
```

顺便说一句，如果您在问题中添加您期望的结构以及 html 输出是什么，这可能会有所帮助。

# javascript - Highcharts 的 JSON 解析

> ID：14179509
> 
> 赞同：-1
> 
> 时间：2013-01-06T05:08:35.247
> 
> 标签：javascript, json, highcharts, highstock

我看过很多例子。然而，我仍然坚持这一点。如何解析此 JSON 响应以使用我的 Highstock Highchart？

```
[{"averageprice":"18.7","date":"2000-01-01"},{"averageprice":"41.73","date":"2000-01-02"},{"averageprice":"34.27","date":"2000-01-03"},{"averageprice":"30.06","date":"2000-01-04"}] 
```

这是我到目前为止的图表...

```
 $.getJSON('http://example.com/dailyaverages.json', function(data) {
    // Create the chart
    window.chart = new Highcharts.StockChart({
        chart : {
            renderTo : 'ppcontent'
        },

        rangeSelector : {
            selected : 0
        },

        title : {
            text : 'Trade Prices'
        },

        xAxis: {
            type: 'datetime'
        },
        series : [{
            data : data
        }]
    });
}); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-06T05:54:08.243

轴和数据期望数组。请试试：

```
$.getJSON('http://example.com/dailyaverages.json', function(data) {
    // Create the chart
    var dataObj = JSON.parse(data);
    window.chart = new Highcharts.StockChart({
        chart : {
            renderTo : 'ppcontent'
        },

        rangeSelector : {
            selected : 0
        },

        title : {
            text : 'Trade Prices'
        },

        xAxis: {
            type: 'datetime'
        },
        series : [{
            name: "Trade Prices",
            data : function() {
                  var dataArr = [];
                  dataObj.forEach(function(d) {
                    dataArr.push(parseInt(d.averageprice, 10));
                  });
                  return dataArr;
              }() 
        }]
    });
}); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-07T06:16:25.080

这对我有用。必须将日期转换为 UNIX 格式：

```
function addPriceChart(chartcontainerID, chartTitle, dataURL) {
          $.getJSON(dataURL, function (jsonresult) {

            window.chart = new Highcharts.StockChart({
              chart: {
                renderTo: chartcontainerID
              },

              rangeSelector: {
                selected: 1
              },

              title: {
                text: chartTitle
              },

              credits: {
                enabled: false
              },

              series: [{
                name: 'Price1',
                data: function () {
                  var dataArr = [];
                  jsonresult.forEach(function (row) {
                    var dateParts = row.date.split('-');
                    var date = new Date(dateParts[0], (dateParts[1] - 1), dateParts[2]);
                    var data = [date.getTime(), parseFloat(row.averageprice)];
                    dataArr.push(data);
                  });
                  return dataArr;
                }(),
                tooltip: {
                  valueDecimals: 2
                }
              }]
            });
          });
    } // END addPriceChart Function

    addPriceChart('ppcontent', 'Prices, 'http://mysite.com/data.json'); 
```

# java - 方法中“太多”局部变量的性能影响？

> ID：14179510
> 
> 赞同：5
> 
> 时间：2013-01-06T05:08:52.623
> 
> 标签：java, android, performance, dalvik, local-variables

我被指派扩展软件的某个组件（由其他人编写）。它是为 Android 编写的，完全用 Java 编写（没有我所知道的本机/c++ 组件）。

在熟悉代码时，我遇到了一个方法（渲染类的绘图方法）。该方法涉及一个更新对象的大循环（然后另一个方法将在稍后呈现它们）。该方法的创建者似乎在循环*之前将所有/大多数成员变量和数组以及其他对象的字段缓存到局部变量中。*代码如下所示：

```
 float[] coordArr = mCoordArr;
    float[] texCoordArr = mTexCoordArr;
    float[] cArray = mColArray;

    // ... there are further locals too, I didn't copy all here

    float[] color = mColor;
    float r = color[0];
    float g = color[1];
    float b = color[2];
    float a = color[3];

    int texw = mTexW;
    int texH = mTexH;
    Font font = mFont;
    float[] ccords = font.ccords;
    float cf = font.cf;
    float cu = font.cu;
    int len = mCurLength;

    // Update the objects
    for (int i = 0; i < len; ++i) {

        // A quite big loop body

        // ... all locals are accessed from the loop

    } 
```

渲染组件是单线程的，具有其所有成员变量。

我用 Java/Dalvik 反汇编器检查了它，字节码注释说该方法使用*41 个*寄存器。我假设作者将它们缓存到本地以帮助 JIT 并为字段/数组访问节省一些时间，但是**这么**多本地人不是对性能不利吗？例如，我听说过“注册压力”。

我只是不想在没有必要的情况下重写代码（即，如果当前代码是好的），为了分析它，我需要重写它（否则只有一个版本 - 当前版本，所以没有什么可以与之相比的......）。

如果不鼓励使用“太多”本地人，那么是否有一些不应超过的“最佳”最大值？（当然，我知道系统的堆栈大小是硬限制。）因为如果是这种情况，我可能还需要修改软件的其他部分（如果原作者好心将所有内容都放入本地）。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-01-06T05:23:04.100

虽然许多局部变量可能会导致“寄存器压力”，但这仅仅意味着编译器可能会进行更多的内存获取。但是，替代方法是（例如）替换引用`r`，`colour[0]`理论上涉及索引检查和间接获取，这*可能*导致更多的内存获取，而不是可以归因于寄存器短缺。

简而言之，没有简单的答案。

所以，我倾向于不理会代码，特别是如果

*   有证据表明原始/以前的作者是通过分析得出当前设计的，或

*   代码已经运行*得足够快了*......

# wordpress - 3.5 媒体管理器中未显示自定义 Wordpress 图像大小

> ID：14179524
> 
> 赞同：7
> 
> 时间：2013-01-06T05:11:05.350
> 
> 标签：wordpress, wordpress-theming

我有一个主题，它使用 add_image_size 来定义几个自定义图像大小。这 5 种图像尺寸用于在将图像插入帖子时显示在 Wordpress 3.4 媒体管理器中，但它们不再显示在新的 Wordpress 3.5 媒体管理器中。事实上，当我尝试向帖子“添加媒体”时，我得到的唯一图像尺寸选项是缩略图 (100x100) 和全尺寸 (3260x988)。显然我的主题设置没有覆盖设置>>媒体中的默认媒体设置。这是我的functions.php文件中的代码：

```
function custom_theme_support() {
  add_theme_support('post-thumbnails');
  set_post_thumbnail_size(180, 120, true);
  add_image_size( 'hero-desktop-2x', 3200, 800, true);
  add_image_size( 'hero-desktop', 1600, 400, true);
  add_image_size( 'hero-mobile-2x', 1534, 800, true);
  add_image_size( 'hero-mobile', 767, 400, true);
}

add_action('after_setup_theme','custom_theme_support'); 
```

所以，我的问题是我需要做什么才能让我的主题覆盖 Wordpress 3.5 中的 Wordpress 管理设置？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-03-13T16:38:05.537

我使用了以下代码，这似乎有效。

注意：您必须重新生成此尺寸的所有缩略图才能追溯显示在现有图像上：

```
function setup_image_sizes() {
    if( function_exists('add_theme_support') ) {
        add_theme_support('post-thumbnails');
    }
    if ( function_exists( 'add_image_size' ) ) {
        add_image_size( 'custom-image', 576, 320, true );
    }

    function my_image_sizes($sizes){
        $custom_sizes = array(
            'custom-image' => 'Custom Image'
        );
        return array_merge( $sizes, $custom_sizes );
    }

    add_filter('image_size_names_choose', 'my_image_sizes');
}

add_action( 'after_setup_theme', 'setup_image_sizes' ); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-06T10:44:35.267

当我过去遇到类似问题时，我不得不使用`image_size_names_choose`过滤器添加图像。不过那是 WordPress 3.5 之前的版本；你说它在 3.4 上工作，所以我不知道它是否会有所帮助，但值得一试。

[本教程](http://wp.tutsplus.com/tutorials/theme-development/using-custom-image-sizes-in-your-theme-and-resizing-existing-images-to-the-new-sizes/)的第二步中有一个示例。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2021-07-14T20:50:36.857

在文本编辑器中打开 php.ini 文件（对我来说在目录 C:\xampp\php 中）并添加 extension=php_gd.dll 然后重新启动服务器并清除浏览器缓存。

# jsp - request.getAttribute 转发后返回 null

> ID：14179531
> 
> 赞同：0
> 
> 时间：2013-01-06T05:13:32.580
> 
> 标签：jsp, servlets

form.html（这是原始表单）：

```
<html>
    <head>
        <title>Beer Advisor</title>
        <meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
    </head>
    <body>
        <h1>Beer Selection Page</h1>
        <form action="BeerSelect.do" method="POST">
            Select bear characteristics
            <p>
            Color:
            <select name="color" size="1">
                <option value="light">light</option>
                <option value="amber">amber</option>
                <option value="brown">brown</option>
                <option value="dark">dark</option>
            </select>
            <br><br>
            <input type="SUBMIT" style="alignment-adjust: central">
        </form>
    </body>
</html> 
```

Servlet（在原始表单上单击“提交查询”后，控制权转移到 servlet。servlet 添加一个 List 对象，它从 BeerExpert java 对象中获取，并将其添加到请求中。然后将请求对象转发到JSP）：

```
package com.example.web;

import java.io.IOException;
import java.io.PrintWriter;
import javax.servlet.ServletException;
import javax.servlet.http.HttpServlet;
import javax.servlet.http.HttpServletRequest;
import javax.servlet.http.HttpServletResponse;

import com.example.model.*;
import java.util.*;
import javax.servlet.RequestDispatcher;

public class BeerSelect extends HttpServlet {

    /**
     * Processes requests for both HTTP
     * <code>GET</code> and
     * <code>POST</code> methods.
     *
     * @param request servlet request
     * @param response servlet response
     * @throws ServletException if a servlet-specific error occurs
     * @throws IOException if an I/O error occurs
     */
    protected void processRequest(HttpServletRequest request, HttpServletResponse response)
            throws ServletException, IOException {
        response.setContentType("text/html;charset=UTF-8");

        try {
            /* TODO output your page here. You may use following sample code. */
            String c = request.getParameter("color");
            BeerExpert be = new BeerExpert();
            List brands = be.getBrands(c);

            request.setAttribute("styles", brands);

            RequestDispatcher view = request.getRequestDispatcher("result.jsp");
            view.forward(request, response);

        } finally {            

        }
    }

    // <editor-fold defaultstate="collapsed" desc="HttpServlet methods. Click on the + sign on the left to edit the code.">
    /**
     * Handles the HTTP
     * <code>GET</code> method.
     *
     * @param request servlet request
     * @param response servlet response
     * @throws ServletException if a servlet-specific error occurs
     * @throws IOException if an I/O error occurs
     */
    @Override
    protected void doGet(HttpServletRequest request, HttpServletResponse response)
            throws ServletException, IOException {
        processRequest(request, response);
    }

    /**
     * Handles the HTTP
     * <code>POST</code> method.
     *
     * @param request servlet request
     * @param response servlet response
     * @throws ServletException if a servlet-specific error occurs
     * @throws IOException if an I/O error occurs
     */
    @Override
    protected void doPost(HttpServletRequest request, HttpServletResponse response)
            throws ServletException, IOException {
        processRequest(request, response);
    }

    /**
     * Returns a short description of the servlet.
     *
     * @return a String containing servlet description
     */
    @Override
    public String getServletInfo() {
        return "Short description";
    }// </editor-fold>
} 
```

JSP（这是我遇到问题的地方。在下面的代码中，“样式”为空）：

```
<%@page contentType="text/html" pageEncoding="UTF-8"%>
<%@page  import="java.util.*" %>
<!DOCTYPE html>
<html>
    <head>
        <meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
        <title>Beer Advisor</title>
    </head>
    <body>
        <h1 style="alignment-adjust: central">Beer Recommendations JSP</h1>
        <p>
            <% 
                List styles = (List)request.getAttribute("styles");

                if(styles != null) {
                    Iterator it = styles.iterator();
                    while (it.hasNext()) {
                        out.println("<br>try: " + it.next());
                    }
                }
            %>
        </p>
    </body>
</html> 
```

BeerExpert.java（这个类由 Servlet 访问）：

```
/*
 * To change this template, choose Tools | Templates
 * and open the template in the editor.
 */
package com.example.model;
import java.util.*;
/**
 *
 * @author
 */
public class BeerExpert {

    public List getBrands(String color) {
        List brands  = new ArrayList();
        if (color.equals("amber")) {
            brands.add("Jack Amber");
            brands.add("Red Moose");
        }
        else {
            brands.add("Jail Pale Ale");
            brands.add("Gout Stout");
        }
        return (brands);
    }

} 
```

以下是我的 JSP 输出：

```
Beer Recommendations JSP 
```

我正在使用 Apache Tomcat。

为什么会这样？有人可以为我提供解决方案吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-06T05:24:36.090

看起来您的 BeerExpert.getBrands() 方法中确实出现了异常。这是啤酒清单可能为空的唯一方法。

servlet 肯定会被调用，因为我们看到了来自转发的 JSP 的输出。

所以它看起来好像列表是空的。这只有在抛出异常时才会发生。我看到的唯一可能原因是“颜色”参数是否为空。

您能否将调试器连接到您的 tomcat Java 进程？如果是这样，单步执行 servlet 代码将很快为您提供答案。

# php - 查询不适用于表单验证器

> ID：14179537
> 
> 赞同：0
> 
> 时间：2013-01-06T05:15:15.687
> 
> 标签：php, mysql

我有这段代码，它基本上是一个注册表单验证器：

```
 $con = mysql_connect("localhost","root","conan");

   function quitar($mensaje)
   {
   $mensaje = str_replace("<","<",$mensaje);
   $mensaje = str_replace(">",">",$mensaje);
   $mensaje = str_replace("\'","'",$mensaje);

   return $mensaje;
   }

   if(trim($HTTP_POST_VARS["nick"]) != "" && trim($HTTP_POST_VARS["email"]) != "")
   {
   $sql = "SELECT id FROM usuarios WHERE nick='".quitar($HTTP_POST_VARS["nick"])."'";
   $result = mysql_query($sql);
   if($row = mysql_fetch_array($result))
   {
   echo "Error, nick escogido por otro usuario";
   }
   else
   {
   $sql = "INSERT INTO usuarios (nick,password,nombre,email) VALUES (";
   $sql .= "'".quitar($HTTP_POST_VARS["nick"])."'";
   $sql .= ",'".quitar($HTTP_POST_VARS["password"])."'";
   $sql .= ",'".quitar($HTTP_POST_VARS["nombre"])."'";
   $sql .= ",'".quitar($HTTP_POST_VARS["email"])."'";
   $sql .= ")";
   mysql_query($sql);
   mysql_close();
   echo "Registro exitoso!";

   mysql_select_db("usuarios", $con);
   $sql2 = "CREATE TABLE persons
   (
   Test varchar(15),
   test2 varchar(15),
   Moni varchar(15),
   Age int
   )";

   // Execute query
  mysql_query($sql2,$con);

   }
  mysql_free_result($result);
  }
  else
  {
    echo "Debe llenar como minimo los campos de email y password";
   }
  mysql_close(); 
```

代码有效但 $sql2 查询无效我不知道为什么，我想创建该表但不工作。我错过了什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-06T05:37:18.147

*执行第一个查询*后不要关闭数据库连接。

```
mysql_query($sql);
//mysql_close(); remove it 
echo "Registro exitoso!"; 
```

* * *

并使用正确的字符串连接：

```
$sql2 = "CREATE TABLE persons ";
$sql2 .= "( ";
$sql2 .= "Test varchar(15), ";
$sql2 .= "test2 varchar(15), ";
$sql2 .= "Moni varchar(15), ";
$sql2 .= "Age int ";
$sql2 .= ") "; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-06T05:18:55.460

你已经关闭了一个mysql连接：

```
 mysql_query($sql);
   mysql_close();
   echo "Registro exitoso!"; 
```

之后，您尝试运行另一个查询。试着跑到`mysql_close()`最后。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-06T05:22:39.837

```
 if(!$result)
   {
   echo "Error, nick escogido por otro usuario";
   }
   else
   {
   $sql = "INSERT INTO usuarios (nick,password,nombre,email) VALUES (";
   $sql .= "'".quitar($HTTP_POST_VARS["nick"])."'";
   $sql .= ",'".quitar($HTTP_POST_VARS["password"])."'";
   $sql .= ",'".quitar($HTTP_POST_VARS["nombre"])."'";
   $sql .= ",'".quitar($HTTP_POST_VARS["email"])."'";
   $sql .= ")";
   mysql_query($sql);
   mysql_close();
   echo "Registro exitoso!";

   $con = mysql_connect("localhost","root","conan"); // You closed the connection above!
   mysql_select_db("usuarios", $con);
   $sql2 = "CREATE TABLE persons
   (
   Test varchar(15),
   test2 varchar(15),
   Moni varchar(15),
   Age int
   )"; // you have to specify which type of table you wanna create! Wrong Query here!
   mysql_query($sql2,$con);
  } 
```

在 $sql2 中，您必须指定要创建的表类型。它变成了一个错误的查询，而且 PHP 也被弃用了

## mysql_

功能。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-01-06T06:44:04.567

我非常惭愧。代码很好。

我只是在测试一个名称几乎相同的 php 文档，而不会发现不是运行代码的那个。

我向你们每一个人道歉，这样的事情是第一次发生在我身上，邻居们制造了很多噪音，也许这让我分散了注意力。

请原谅我真的很抱歉。

# javascript - 禁用一些按钮 TinyMCE

> ID：14179539
> 
> 赞同：3
> 
> 时间：2013-01-06T05:15:41.167
> 
> 标签：javascript, tinymce, wysiwyg

我可以通过运行 javacript 命令以某种方式禁用某些按钮..

不在 上`TinyMCE.init`，因为我需要在发生特殊事件时禁用某些按钮。

我已经尝试过`cm.setDisabled(1);`，但这会使所有按钮都被禁用。

如果有这样的要求，有什么想法吗？或者我应该尝试制作一个javascript函数，我可以随时调用它来再次禁用/重新启用按钮？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-07T05:25:19.660

试着跟着这个[小提琴..](http://fiddle.tinymce.com/O6caab/1)

```
Here Bold and Save buttons get disabled on clicking Disable button
and enabled on clicking Enable button.

Buttons are at the bottom of the page 
```

要禁用特定按钮，您需要该按钮的 id，即您的 divId_buttonName 之类

```
tinyMCE.activeEditor.controlManager.get('disable_save').setDisabled(true) ; 
```

为了再次启用它

```
tinyMCE.activeEditor.controlManager.get('disable_save').setDisabled(false) ; 
```

希望能帮助到你！

# python - 如何编写一个python程序来返回文本中至少出现5次的所有单词？

> ID：14179543
> 
> 赞同：3
> 
> 时间：2013-01-06T05:16:51.330
> 
> 标签：python, nlp, nltk

我只需要按照这篇文章的标题所说的去做：编写一个 python 程序，返回在文本中至少出现 5 次的所有单词。我意识到这是一个非常简单的问题。我是一名新手程序员，试图学习一些 NLP 技能，但由于某种原因我无法弄清楚这一点。您的帮助将不胜感激！

谢谢！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-06T06:18:47.707

您应该定义“单词”是什么意思。不同的定义会产生不同的结果。通用模板为：

```
from collections import Counter

count = Counter(getwords(normalize(text)))
words = [w for w, c in count.items() if c >= 5] 
```

您可以在哪里使用 的各种定义`getwords()`，`normalize()`例如：

```
import re

def normalize(text): # remove non-ascii, convert to lowercase
    return text.encode('ascii', 'ignore').lower().decode()

def getwords(text): # allow only a-z
    return re.findall(ur"[a-z]+", text) 
```

或基于 nltk 的标记器：

```
from nltk.tokenize import sent_tokenize, word_tokenize

def getwords(text):
    return (w for sent in sent_tokenizer(text) for w in word_tokenize(sent)) 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-01-06T05:25:53.443

作为第一步，你如何使用 str.split() 标记字符串。然后，使用 for 循环遍历结果数组，执行以下操作：如果单词不包含在字典的键集中，则将其添加到字典中，存储其计数，在本例中为 1。否则，单词已经包含，在字典中查找它的计数，增加计数，然后将其推回字典。最后，当你数完单词后，翻阅字典，只保留计数为 5 或更多的内容。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-06T05:56:16.357

几分钟的谷歌搜索就会把你[`nltk`](http://nltk.org/book/ch01.html#bigrams_index_term)和`FreqDist`班级指出来。

```
import nltk
words = nltk.word_tokenize(text)
freq1 = nltk.FreqDist(words)
words_above_five_times = [w for w in freq1.keys() if freq1[w] >= 5] 
```

# python - 复制没有发生

> ID：14179544
> 
> 赞同：0
> 
> 时间：2013-01-06T05:16:59.270
> 
> 标签：python

Guyz - 我有这个问题，shutil.copy 树认为一个目录存在，即使它不存在..源和目录都是本地的......我第一次运行它运行时没有错误，但内容实际上没有被复制，第二次它运行它认为该目录已经存在，详细信息如下..请提供您的输入，如果除了shutil之外还有其他复制方式..请建议

第一次运行，没有任何错误，但实际上并未复制

```
 <username:/local/mnt/workspace/username/Scripts>python test.py
    //local/mnt/workspace/loc/04.01.01.00.303_HY11/out
    //local/mnt/workspace/test/out
    copying 
```

第二次重新运行，它认为它认为目录存在

```
 <username:/local/mnt/workspace/username/Scripts>python test.py
    //local/mnt/workspace/loc/04.01.01.00.303_HY11/out
    //local/mnt/workspace/test/out
    copying
    Traceback (most recent call last):
      File "test.py", line 21, in <module>
        main()
      File "test.py", line 18, in main
        copytree(src,dst)
      File "test.py", line 11, in copytree
        shutil.copytree(s, d)
      File "/pkg/qct/software/python/2.5.2/.amd64_linux26/lib/python2.5/shutil.py", line 110, in copytree
        os.makedirs(dst)
      File "/pkg/qct/software/python/2.5.2/.amd64_linux26/lib/python2.5/os.py", line 171, in makedirs
        mkdir(name, mode)
    OSError: [Errno 17] File exists: '//local/mnt/workspace/test/out'
    <username:/local/mnt/workspace/username/Scripts> 
```

Python代码

```
import os,shutil

def copytree(src, dst, symlinks=False, ignore=None):
    for item in os.listdir(src):
        s = os.path.join(src, item)
        print s
        d = os.path.join(dst, item)
        print d
        if os.path.isdir(s):
            print "copying"
            shutil.copytree(s, d, symlinks, ignore)
        else:
            shutil.copy2(s, d)
def main ():
    src="//local/mnt/workspace/loc/04.01.01.00.303_HY11"
    dst="//local/mnt/workspace/test"
    copytree(src,dst)

if __name__ == '__main__':
    main() 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-06T06:13:22.853

试试这个版本，目标目录会自动清空...

```
import os,shutil,errno

def copytree(src, dst, symlinks=False, ignore=None):
    if os.path.exists(dst):
        shutil.rmtree(dst)

    os.mkdir(dst)

    for item in os.listdir(src):
        s = os.path.join(src, item)
        d = os.path.join(dst, item)
        print s + " >> " + d

        if ".git" in s:
            return

        if os.path.isdir(s):
            print "Copying directory..."

            try:
                copytree(s, d, symlinks, ignore)

            except OSError as e: 
                # File already exist
                if e.errno == errno.EEXIST:
                    print "Path exists : " + d
        else:
            shutil.copy2(s, d)

def main ():
    src="//local/mnt/workspace/loc/04.01.01.00.303_HY11"
    dst="//local/mnt/workspace/test"
    copytree(src,dst)

if __name__ == '__main__':
    main() 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-06T06:14:31.400

请问为什么不用`shutil.copytree()`代替呢？如果您确实想要一个包装器`shutil.copytree()`（例如考虑现有目录），请将您的函数命名为不同的名称，例如`copytree_wrapper()`（因为您正在混合您的`copytree`with `shutil.copytree`，并且递归不涉及您的`copytree`）以下对我有用：

```
import os,shutil

def copytree_wrapper(src, dst, symlinks=False, ignore=None): ### Name it different, no confusion!
    for item in os.listdir(src):
        s = os.path.join(src, item)
        print (s)
        d = os.path.join(dst, item)
        print (d)
        if os.path.isdir(s):
            print ("copying")
            if not os.path.exists(d): ### Create directory if does not already exist 
                print ("directory '%s' created" % d)
                os.makedirs(d)
            copytree_wrapper(s, d, symlinks, ignore) ### shutil.copytree(s, d, symlinks, ignore)
        else:
            shutil.copy2(s, d)
def main ():
    src="/tmp/a"
    dst="/tmp/b"
    copytree_wrapper(src,dst)

if __name__ == '__main__':
    main() 
```

# spring - Java Spring @ModelAttribute 方法模型名称

> ID：14179545
> 
> 赞同：1
> 
> 时间：2013-01-06T05:16:59.987
> 
> 标签：spring, model-view-controller, modelattribute

我已经阅读这个论坛很长一段时间了，发现它非常有用，感谢贡献者。我有一个问题困扰了我好几个星期。就这样。

```
 @RequestMapping(value="updateNote.htm",method=RequestMethod.POST)
     public String updateNote(@ModelAttribute("note")NoteBean nb, BindingResult res,Model model){
        daoobj.updateNote(nb.getName(),nb.getPath(), nb.getNote());

        model.addAttribute("note",daoobj.getByName(nb.getName()));
        return("success");
}

    @RequestMapping(value="updateNote.htm",method=RequestMethod.GET)
    public String updateNote(@ModelAttribute("note")NoteBean nb,Model model){  
        populateNoteBean();
        model.addAttribute("note",daoobj.getByName(nb.getName()));
        return("editNote");
}

@ModelAttribute("WHAT")
  public NoteBean populateNoteBean() {
    NoteBean nnb = new NoteBean();
    return nnb;
  } 
```

使用方法 populateNoteBean() 模型属性是“WHAT”。但是，我使用的名称是“note”。因此，当我运行代码时，NoteBean 已正确保存到数据库中。我的问题是如何？似乎名称“WHAT”应该是“note”，或者模型属性将其保存为无名称。

谢谢你的时间。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-06T07:33:10.100

使用您当前的代码，您将在模型中拥有两个 notebean 实例！

第一个 spring 在你的控制器中调用所有模型属性注释的方法，并将结果放在模型中。其次，它评估来自您的请求映射方法的那些。

模型属性注释方法的要点是您可以选择如何创建 bean。例如从数据库加载它。

我们像这样使用这种方法：

*   modelattr 方法 (name="note")

从 db 加载 bean

*   使用 modelattr 参数的 requestmapping 方法（name="note"）

例如，将第一种方法创建的注释 bean 与来自提交的请求参数合并，您可以直接访问修改后的 bean。

一个很好的效果：我们不想将所有属性的隐藏输入字段放在表单中，只是为了能够将实体与实体管理器合并。这样，您可以拥有一个只有一个属性的表单（加上一个用于 id 能够获取实体的属性）

或者另一个：如果你的note bean是一个抽象类，spring不可能实例化bean，因为它不知道要实例化什么。例如，您可以在 modelattr 注释方法中添加 requestparam 参数，然后自己决定做什么。

这在文档中有很好的描述。我相信，无论是参考还是在任一控制器、reqestmapping 或模型属性的 api 中。

# php - PHP在相应键中合并数值数组的值

> ID：14179552
> 
> 赞同：2
> 
> 时间：2013-01-06T05:18:27.287
> 
> 标签：php, arrays, array-merge

所以考虑一个包含我最喜欢的 3 种水果的数组：

```
$array1 = array("Apple", "Banana","Raspberry") 
```

我想将它与自己美丽自然的颜色融合在一起

```
$array2 = array("Green ", "Yellow ","Red ") 
```

**所以结果看起来像**

```
([0] => Green Apple [1] => Yellow Banane [2] => Red Raspberry) 
```

我需要一些可扩展的东西（2 到 6 个键，数组之间总是相同的）

我尝试过的和结果

*   `array_combine($array2,$array1)`

    结果：`Array ( [Green ] => Apple [Yellow ] => Banana [Red ] => Raspberry )`

*   `array_merge($array2,$array1)`
    结果：`Array ( [0] => Green [1] => Yellow [2] => Red [3] => Apple [4] => Banana [5] => Raspberry )`

*   `array_merge_recursive($array2,$array1)`
    结果：`Array ( [0] => Green [1] => Yellow [2] => Red [3] => Apple [4] => Banana [5] => Raspberry )`

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-06T05:21:15.300

您实际上应该循环遍历数组以组合它们。

```
$combinedArray = array();
foreach ( $array1 as $key=>$value ) {
    $combinedArray[$key] = $array2[$key] . ' ' . $array1[$key];
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-06T05:23:13.127

为什么不简单地遍历每个数组。

```
$array1 = array("Apple", "Banana","Raspberry");
$array2 = array("Green ", "Yellow ","Red ")

$array3 = arrayCombine($array1, $array2);

function arrayCombine($array1, $array2) {
  $array_out = array();

  foreach ($array1 as $key => $value)
    $array_out[] = $value . ' ' . $array2[$key];

  return $array_out;
} 
```

# ruby-on-rails - 从 S3 下载 Carrierwave 上传

> ID：14179553
> 
> 赞同：5
> 
> 时间：2013-01-06T05:18:32.527
> 
> 标签：ruby-on-rails, ruby, amazon-s3, download, carrierwave

我想下载一张使用carrierwave上传到S3的图片。图像在卡片模型上，作为上传器安装。我看到了[这个答案](https://stackoverflow.com/questions/7193516/how-to-send-file-to-user-with-carrierwave)，但无法让该解决方案发挥作用。我的代码是：

```
#download image from S3
uploader = card.image       #image is the mounted uploader
uploader.retrieve_from_store!(File.basename(card.image.url))
uploader.cache_stored_file! 
```

最后一行抛出：“......导致异常（nil：NilClass的未定义方法'body'）......”

我的carrierwave配置如下：

```
#config/initializers/carrierwave.rb
CarrierWave.configure do |config|
  config.storage = :fog
  config.cache_dir = "#{Rails.root}/tmp/upload"
  ...
end 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-19T05:09:11.437

感谢[apneadiving](https://stackoverflow.com/users/350087/apneadiving)。这很简单：

```
image = MiniMagick::Image::open(card.image.to_s)
image.write(somepath) 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2017-02-17T07:21:01.143

我已经在 Rails 5 中尝试过从 AWS S3 下载文件。

```
def download
  image = card.image

  # validate existing image from AWS S3
  if image.try(:file).exists?
    data = open(image.url)
    send_data data.read, type: data.content_type, x_sendfile: true
  end

end 
```

希望对大家有所帮助。

# css - 用 CSS 创建亚麻纹理？

> ID：14179554
> 
> 赞同：4
> 
> 时间：2013-01-06T05:18:41.863
> 
> 标签：css

[亚麻布](http://elixirgraphics.com/images/blog/final.jpg)

是否可以使用 CSS 创建 Apple 的亚麻纹理？诸如背景渐变之类的东西，以避免图像速度变慢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2014-04-29T07:44:57.093

使用 CSS 的噪点特性可以让您在创建纯 CSS 纹理方面走得更远。玩弄[http://www.noisetexturegenerator.com/](http://www.noisetexturegenerator.com/)看看可能性。如果你同时设置不透明度和密度，你可以得到一个有点像布的条纹图案。

特别提到这篇文章，使用 css 渐变来为您的噪声纹理提供一些额外的东西： [http ://www.rd2inc.com/blog/2013/01/tips-and-tricks-css3-gradients-and-纹理/](http://www.rd2inc.com/blog/2013/01/tips-and-tricks-css3-gradients-and-textures/)

请注意，噪音功能是相当新的功能，并非所有浏览器都支持。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-06T05:33:55.923

我认为渐变是可能的。点击链接：[使用 CSS3 渐变加速](http://css-tricks.com/css3-gradients/)

# c - 在 C 中更改工作目录？

> ID：14179559
> 
> 赞同：5
> 
> 时间：2013-01-06T05:19:38.810
> 
> 标签：c, chdir

我是 C 新手，在使用 chdir() 时遇到问题。我使用一个函数来获取用户输入，然后我从中创建一个文件夹并尝试 chdir() 进入该文件夹并创建另外两个文件。但是，当我尝试通过 finder（手动）访问该文件夹时，我没有权限。无论如何，这是我的代码，有什么提示吗？

```
int newdata(void){
    //Declaring File Pointers
    FILE*passwordFile;
    FILE*usernameFile;

    //Variables for
    char accountType[MAX_LENGTH];
    char username[MAX_LENGTH];
    char password[MAX_LENGTH];

    //Getting data
    printf("\nAccount Type: ");
    scanf("%s", accountType);
    printf("\nUsername: ");
    scanf("%s", username);
    printf("\nPassword: ");
    scanf("%s", password);

    //Writing data to files and corresponding directories
    umask(0022);
    mkdir(accountType); //Makes directory for account
    printf("%d\n", *accountType);
    int chdir(char *accountType);
    if (chdir == 0){
        printf("Directory changed successfully.\n");
    }else{
        printf("Could not change directory.\n");
    }

    //Writing password to file
    passwordFile = fopen("password.txt", "w+");
    fputs(password, passwordFile);
    printf("Password Saved \n");
    fclose(passwordFile);

    //Writing username to file
    usernameFile = fopen("username.txt", "w+");
    fputs(password, usernameFile);
    printf("Password Saved \n");
    fclose(usernameFile);

    return 0;

} 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-06T05:25:09.490

您实际上并没有*更改*目录，您只需为`chdir`. 然后，您继续将该函数指针与零（与 相同`NULL`）进行比较，这就是它失败的原因。

您应该包含原型的头文件`<unistd.h>`，然后实际*调用*该函数：

```
if (chdir(accountType) == -1)
{
    printf("Failed to change directory: %s\n", strerror(errno));
    return;  /* No use continuing */
} 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-01-06T05:30:52.370

```
int chdir(char *accountType); 
```

没有调用该函数，请尝试以下代码：

```
mkdir(accountType); //Makes directory for account
printf("%d\n", *accountType);
if (chdir(accountType) == 0) {
    printf("Directory changed successfully.\n");
}else{
    printf("Could not change directory.\n");
} 
```

另外， printf 行看起来很可疑，我想你想要的是 print accountType 字符串：

```
printf("%s\n", accountType); 
```

# python - Removing a period from a several file names using Python

> ID：14179561
> 
> 赞同：1
> 
> 时间：2013-01-06T05:20:16.203
> 
> 标签：python, python-2.7

I've found several related posts to this but when I try to use the code suggested I keep getting "The system cannot find the file specified". I imagine it's some kind of path problem. There are several folders within the "Cust" folder and each of those folders have several files and some have "." in the file name I need to remove. Any idea what I have wrong here?

```
customer_folders_path = r"C:\Users\All\Documents\Cust"
for directname, directnames, files in os.walk(customer_folders_path):
    for file in files:
        filename_split = os.path.splitext(file)
        filename_zero = filename_split[0]            
        if "." in filename_zero:
            os.rename(filename_zero, filename_zero.replace(".", "")) 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-06T05:29:23.913

When you use `os.walk` and then iterate through the files, remember that you are only iterating through file names - not the full path (which is what is needed by `os.rename` in order to function properly). You can adjust by adding the full path to the file itself, which in your case would be represented by joining `directname` and `filename_zero` together using `os.path.join`:

```
os.rename(os.path.join(directname, filename_zero), 
          os.path.join(directname, filename_zero.replace(".", ""))) 
```

Also, not sure if you use it elsewhere, but you could remove your `filename_split` variable and define `filename_zero` as `filename_zero = os.path.splitext(file)[0]`, which will do the same thing. You may also want to change `customer_folders_path = r"C:\Users\All\Documents\Cust"` to `customer_folders_path = "C:/Users/All/Documents/Cust"`, as the directory will be properly interpreted by Python.

**EDIT:** As intelligently pointed out by @bozdoz, when you split off the suffix, you lose the 'original' file and therefore it can't be found. Here is an example that should work in your situation:

```
import os

customer_folders_path = "C:/Users/All/Documents/Cust"
for directname, directnames, files in os.walk(customer_folders_path):
    for f in files:
        # Split the file into the filename and the extension, saving
        # as separate variables
        filename, ext = os.path.splitext(f)
        if "." in filename:
            # If a '.' is in the name, rename, appending the suffix
            # to the new file
            new_name = filename.replace(".", "")
            os.rename(
                os.path.join(directname, f),
                os.path.join(directname, new_name + ext)) 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-06T06:53:10.567

You need to use the original filename as the first parameter to os.rename and handle the case where the filename didn't have a period in the first place. How about:

```
customer_folders_path = r"C:\Users\All\Documents\Cust"
for directname, directnames, files in os.walk(customer_folders_path):
    for fn in files:
        if '.' in fn:
            fullname = os.path.join(directname, fn)
            os.rename(fullname, os.path.splitext(fullname)[0]) 
```

# php - 自定义代码点火器配置

> ID：14179564
> 
> 赞同：0
> 
> 时间：2013-01-06T05:20:53.223
> 
> 标签：php, codeigniter

在文件夹配置中，我创建了一个名为 validation_rules.php 的文件，该文件如下所示：（短版）

```
$form_registration = array(
        array(
            'field' => 'language',
            'label' => 'language',
            'rules' => 'required|min_length[5]|max_length[12]'
        ),
        array(
            'field' => 'email',
            'label' => 'email',
            'rules' => 'required|valid_email'
        )); 
```

然后我在某处读到我需要像这样为表单验证器加载它

```
$this->ci->load->config('validation_rules', TRUE);
$this->form_validation->set_rules($form_registration); 
```

但我得到一个错误，我做对了吗？这是错误：

```
Fatal error: Call to a member function config() on a non-object in 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-06T05:26:21.057

从[文档](http://ellislab.com/codeigniter/user-guide/libraries/config.html)中：

> 注意：如果您确实创建了自己的配置文件，请使用与主文件相同的格式，将您的项目存储在一个名为 $config 的数组中。CodeIgniter 将智能地管理这些文件，因此即使数组具有相同的名称也不会发生冲突（假设数组索引的名称与另一个不同）。

尝试将数组包装在 $config 数组中

# grammar - 在我的语法中引入指针时减少/减少冲突

> ID：14179565
> 
> 赞同：1
> 
> 时间：2013-01-06T05:21:04.207
> 
> 标签：grammar, bnf, happy, reduce-reduce-conflict

我正在开发一个小型编译器，以便更好地了解创建自己的语言的困难。现在我正处于向我的语法添加指针功能的阶段，但是这样做我遇到了减少/减少冲突。

这是我的语法的简化版本，可由`bnfc`. 我使用`happy`解析器生成器，这就是程序告诉我存在减少/减少冲突。

```
entrypoints Stmt ;

-- Statements
-------------
SDecl. Stmt ::= Type Ident; -- ex: "int my_var;"
SExpr. Stmt ::= Expr;       -- ex: "printInt(123); "

-- Types
-------------
TInt.      Type ::= "int" ;
TPointer.  Type ::= Type "*" ;
TAlias.    Type ::= Ident ; -- This is how I implement typedefs

-- Expressions
--------------
EMult.     Expr1 ::= Expr1 "*" Expr2 ;
ELitInt.   Expr2 ::= Integer ;
EVariable. Expr2 ::= Ident ;

-- and the standard corecions
_.         Expr  ::= Expr1 ;
_.         Expr1 ::= Expr2 ; 
```

我正处于语法如何工作的学习阶段。但我想我知道会发生什么。考虑这两个程序

```
main(){
  int a;
  int b;
  a * b;
} 
```

和

```
typedef int my_type;
main(){
  my_type * my_type_pointer_variable;
} 
```

（`typedef`和`main(){}`部分不相关，在我的语法中。但它们给出了一些上下文）

在第一个程序中，我希望它解析`a "*" b`为`Stmt ==(SExpr)==> Expr ==(EMult)==> Expr * Expr ==(..)==> Ident "*" Ident`，即基本上开始使用`SExpr`规则进行单步执行。

同时我想`my_type * my_type_pointer_variable`扩展使用规则。`Stmt ==(SDecl)==> Type Ident ==(TPointer)==> Type "*" Ident ==(TAlias)==> Ident "*" Ident`.

但是语法阶段不知道标识符最初是类型别名还是变量。

* * *

（1）我怎样才能摆脱减少/减少冲突，（2）我是唯一一个有这个问题的人吗？有没有明显的解决方案，c 语法如何解决这个问题？

到目前为止，我已经成功地通过使用“&”或其他符号而不是“*”来更改我的语言的语法，但这是非常不可取的。此外，我无法从各种公共 c 语法中理解，并试图了解为什么他们没有这个问题，但我在这方面没有运气。

最后，我如何自己解决这些问题？我从`happy`更详细的输出中了解到冲突是如何发生的，聪明是解决这些冲突的唯一方法吗？恐怕我会偶然发现更多问题，例如在介绍时`EIndir. Expr = '*' Expr;`

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-07T00:52:58.303

在 C 解析器中处理此问题的常用方法通常称为[“词法分析器反馈黑客”](http://en.wikipedia.org/wiki/The_lexer_hack)。从某种意义上说，它根本不在语法中处理它，因此它是一种“黑客”；相反，当词法分析器识别出一个标识符时，它将该标识符分类为类型名或非类型名，并为每种情况返回一个不同的标记（通常为类型名的标识符指定“TypeIdent”，而对于任何其他）。词法分析器通过查看符号表的当前状态来进行选择，因此它会看到在解析中当前点之前发生的所有 typedef，但看不到当前点之后的 typedef。这就是为什么 C 要求您在每个编译单元中第一次使用 typedef 之前声明它们。

# php - 我的“if 语句”有语法错误

> ID：14179570
> 
> 赞同：-3
> 
> 时间：2013-01-06T05:22:30.527
> 
> 标签：php, syntax-error

如何正确编写此 if 语句，以便“||” 作品？|| 顺便说一句，代表“或”。当我取出“|| >30”时，我没有收到任何语法错误。但是当我确实包含“|| >30”时，我收到一个语法错误，说“>”是意外​​的。

```
if (strlen($_POST['password']) < 7 || >30){
            $errors[] = 'Your password must be 7 to 30 characters long.' 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-06T05:24:28.607

```
if (strlen($_POST['password']) < 7 || >30){ 
```

我认为应该是这样的：

```
if (strlen($_POST['password']) < 7 || strlen($_POST['password']) > 30){ 
```

由于您要求更短的版本，这是使用相同逻辑和功能的最简单方法：

```
$length = strlen($_POST['password']);
if ($length < 7 || $length > 30){ 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-06T05:39:46.557

我认为使它更容易的唯一方法是将密码长度存储在这样的变量中：

```
 $pwd_len = strlen($_POST['password'])

 if ($pwd_len < 7 || $pwd_len > 30){ 
```

这在您的情况下可能没有用，但当您需要多次参考密码长度时会很有帮助。所以它会节省你很多时间而不是总是写`strlen($_POST['password'])`

也许我错了，但希望它有所帮助:)

# ruby-on-rails-3 - 在 Rails 插件中使用 Haml

> ID：14179572
> 
> 赞同：0
> 
> 时间：2013-01-06T05:22:46.330
> 
> 标签：ruby-on-rails-3, plugins, haml

我使用haml作为模板制作了一个可挂载插件。我在我的 gemspec 中添加了 haml 和 haml-rails。

我在一个项目中使用它，我将它添加到我的 Gemfile 中，如下所示：

**gem 'my_plugin', :git=> "git@github.com:lishoubo/my_plugin.git"**

执行 bundle install 后，我看到 haml 和 haml-rails 已安装。

但是当我启动服务器时，它提示错误：

**缺少模板**

似乎该项目无法加载安装它们的haml gem 事件。我猜是因为haml gems 是为插件而不是为项目安装的。所以我在项目 Gemfile 中添加了 haml 和 haml-rails。它起作用了。

但是，我认为不需要“再次”将 haml gem 添加到项目 Gemfile 中。因为我使用了一个插件，而这个插件使用了haml，为什么我要把它添加到我的Gemfile中呢？

有谁知道为什么？

# .net - BitConverter ToInt32 .NET

> ID：14179573
> 
> 赞同：1
> 
> 时间：2013-01-06T05:23:03.487
> 
> 标签：.net

使用 .NET 4.0
使用 dotPeek .NET 反编译器

与 System.BitConverter.ToInt32() 的代码有点混淆：

```
public static unsafe int ToInt32(byte[] value, int startIndex)
    {
      if (value == null)
        ThrowHelper.ThrowArgumentNullException(ExceptionArgument.value);
      if ((long) (uint) startIndex >= (long) value.Length)
        ThrowHelper.ThrowArgumentOutOfRangeException(ExceptionArgument.startIndex, ExceptionResource.ArgumentOutOfRange_Index);
      if (startIndex > value.Length - 4)
        ThrowHelper.ThrowArgumentException(ExceptionResource.Arg_ArrayPlusOffTooSmall);
      fixed (byte* numPtr = &value[startIndex])
      {
        if (startIndex % 4 == 0)
          return *(int*) numPtr;
        if (BitConverter.IsLittleEndian)
          return (int) *numPtr | (int) numPtr[1] << 8 | (int) numPtr[2] << 16 | (int) numPtr[3] << 24;
        else
          return (int) *numPtr << 24 | (int) numPtr[1] << 16 | (int) numPtr[2] << 8 | (int) numPtr[3];
      }
    } 
```

如何理解这部分代码？：

```
if (startIndex % 4 == 0)
  return *(int*) numPtr; 
```

我的意思是为什么字节数组中的起始位置很重要？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-06T05:31:38.800

numPtr 指向字节数组中存储 32 位值的位置。

如果该地址是 4 字节对齐的，则可以简单地通过强制转换为整数直接读取它：字节指针转换为整数指针，然后将其推迟。

否则，必须单独读取每个字节，然后将它们加在一起以形成 32 位整数。这是因为大多数 CPU 只能在 4 字节对齐的情况下直接读取 4 字节值。

# java - Java - 什么数据结构为预加载字符串数组和检查字符串是否存在提供最快的性能？

> ID：14179575
> 
> 赞同：0
> 
> 时间：2013-01-06T05:23:07.780
> 
> 标签：java, string, data-structures

我有一个国家代码列表，例如我们、fra、uk 等。

我需要预加载它们并检查那里是否存在字符串。由于比较字符串可能会占用大量资源，因此我可以使用的最快的数据结构是什么？

我应该制作一个静态的字符串数组还是一个 ArrayList 或其他东西？

谢谢！

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-01-06T05:26:08.500

如果您有一组固定的短字符串并想测试给定的字符串是否在其中，您可能需要使用 a `HashSet<String>`，它提供了非常快速的查找并可以非常快速地回答您的查询。例如：

```
Set<String> myStrings = new HashSet<String>();
myStrings.add("us");
myStrings.add("fra");
/* ... */
if (myStrings.contains("test-string")) {
   // String is there.
} else {
   // Nope!  String is not there.
} 
```

如果您有大量更长的字符串，则[trie](http://en.wikipedia.org/wiki/Trie)将是一种合适的（但空间效率稍低）的数据结构。如果您事先知道您正在使用哪些字符串并且该集合永远不会改变，请考虑查看[DAWG](http://en.wikipedia.org/wiki/DAWG)数据结构。这些都不是 Java 标准库的一部分，尽管快速的谷歌搜索应该会找到关于这两者的信息。

希望这可以帮助！

# java - 寻找：Java 库中的弹出式实现，具有特定操作

> ID：14179576
> 
> 赞同：1
> 
> 时间：2013-01-06T05:23:09.273
> 
> 标签：java, filemaker, popupmenu

Filemaker（我知道，Amigas）有一个弹出菜单，它不同于 JPopup 或 SWT.POPUP：

当您将鼠标悬停在包含当前选定值的（比如说）文本字段上时，它就会出现。

选择突出显示在拖动时随鼠标指针移动。

当您退出（通过鼠标向上）时，选择被设置为鼠标悬停的项目。

如果鼠标不在某个项目上（即您已退出菜单并仍在拖动），则所选值保持不变。

它使从一组有限的选项中进行选择变得非常快速和容易。

有谁知道以这种方式运行的java实现？

编辑：

[https://stackoverflow.com/questions/13782365/swt-popup-menu-rant-some-code?rq=1](https://stackoverflow.com/questions/13782365/swt-popup-menu-rant-some-code?rq=1)

包含一个很好的想法实现，我很高兴接受它并将其应用于我的解决方案。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-06T08:39:53.433

[https://stackoverflow.com/questions/13782365/swt-popup-menu-rant-some-code?rq=1](https://stackoverflow.com/questions/13782365/swt-popup-menu-rant-some-code?rq=1)

包含一个很好的想法实现，我很高兴接受它并将其应用于我的解决方案。

# objective-c - Google API 客户端库无法针对 iOS 4.3 进行编译

> ID：14179600
> 
> 赞同：1
> 
> 时间：2013-01-06T05:26:57.347
> 
> 标签：objective-c, ios, ios4, google-drive-api, google-api-objc-client

我正在按照[https://developers.google.com/drive/quickstart-ios](https://developers.google.com/drive/quickstart-ios)上的步骤将 Google Drive API 与我的 iOS 驱动器集成它适用于 iOS>=5.0。但是，如果我将 GTL 项目的目标更改为 4.3，则会失败并出现以下错误：

/google-api-objectivec-client-read-only/Source/Utilities/GTLJSONParser.m:87:20：找到多个名为“dataWithJSONObject:options:error:”的方法

/google-api-objectivec-client-read-only/Source/Utilities/GTLJSONParser.m:127:32：找到多个名为“JSONObjectWithData:options:error:”的方法

如果我没有将目标设置为 4.3，则会出现错误：

未找到符号：_OBJC_CLASS_$_NSJSONSerialization 引用自：.....

在下载页面[http://code.google.com/p/google-api-objectivec-client/](http://code.google.com/p/google-api-objectivec-client/)它说该库与为 iOS 3 及更高版本构建的应用程序兼容。所以有人知道出了什么问题吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-07T04:50:26.313

当为 iOS 4.x 构建 GTL 库时，它还希望将 SBJSON 类编译到目标中，因为 iOS 5 中引入了系统的 JSON 解析器 NSJSONSerialization。SBJSON 类与其他库源一起签出，但默认情况下不包含在库项目中，因为不再有很多项目支持 iOS 4。

查看[GTLJSONParser](http://code.google.com/p/google-api-objectivec-client/source/browse/trunk/Source/Utilities/GTLJSONParser.m)以了解该库如何在不同版本的 iOS 上解析 JSON 的详细信息。

# layout - 如何在 Zend 2 中将数据传递给布局？

> ID：14179606
> 
> 赞同：1
> 
> 时间：2013-01-06T05:28:45.087
> 
> 标签：layout, view, zend-framework2

我环顾四周，在 Zend 1 中最多有一些关于此的链接。我发现的最佳解决方案是

```
// controller:
return array('viewValue' => 'something');
// layout.phtml
$children = $this->viewModel()->getCurrent()->getChildren();
$viewValue = $children[0]->viewValue; 
```

在布局上，但似乎有点笨拙。它甚至更奇怪，因为当我`get_class_methods`在布局上做时它没有显示`viewModel()`方法。基本上，我查看了 API（和源代码）并没有找到太多。Zend 1 似乎也有更多的访问权限；一些旧的解决方案涉及获取视图并直接修改它，但在 Zend 2 中，我们返回一个新数组（或视图模型）。有小费吗？

至于为什么，我使用的是 jQuery 移动布局。所以标题和内容是分开的，但结构应该是一样的（应该属于布局）。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-06T10:01:21.547

视图模型是分层构建的。顶层视图模型是“布局”，在调度控制器后注入子视图模型。这意味着您可以为您的应用程序构建相当多的模型树。

顶层视图模型（即代表布局的模型）也位于`MvcEvent`. 该对象在引导期间在应用程序中传递，但在控制器初始化时也链接到控制器。

MvcEvent 可以`$this->getEvent()`在控制器中访问，视图模型通过`$event->getViewModel()`. 因此，为了缩短事情的时间，只需执行以下操作：

```
controller MyController
{
  public function myAction()
  {
    $this->getEvent()->getViewModel()->foo = 'bar';
  }
} 
```

在你的 layout.phtml 中：

```
<?php echo $this->foo; ?> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-06T09:23:47.777

这几乎是，它是如何完成的。新的`Zend\View`-Components 几乎都是相互嵌套的 ViewModel。Rob Allen 写了[一篇](http://akrabat.com/zend-framework-2/access-view-variables-in-another-view-model/)关于如何在整个 ViewModel 中使用变量的精彩文章。

此外，我通常认为这种方法不是最好的方法。最好有一个`ViewHelper`或一个`Layout-Placeholder`来做这项工作。再一次写了[一篇很棒的文章](http://www.michaelgallego.fr/blog/2012/10/06/how-to-replace-the-action-helper-in-zf-2-and-make-great-widgetized-content/)，这次是我亲爱的 Bakura，又名 Michael Gallego。

目前，这两种方法中的任何一种都是您的选择。

# jquery - 我所有可排序的 jQuery 函数都停止工作

> ID：14179607
> 
> 赞同：1
> 
> 时间：2013-01-06T05:28:48.030
> 
> 标签：jquery, jquery-ui-sortable

好吧，这很奇怪。突然间，我所有的 jQuery 脚本都在我的网站上被禁用了。

我检查了指向 jquery 脚本的链接，它们仍然存在。哥特两个链接包括：

```
<script type="text/javascript" src="http://code.jquery.com/jquery-1.8.3.min.js"></script>
<script type="text/javascript" src="http://ajax.googleapis.com/ajax/libs/jqueryui/1.9.2/jquery-ui.min.js"></script> 
```

这是突然无法正常工作的众多 jQuery 脚本之一：

```
<script type="text/javascript">
    $(document).ready(function() {

        $(function() {
            $("#sortable").sortable({ opacity: 0.6, cursor: 'move', update: function() {
                var order = $(this).sortable("serialize") + '&action=updateRecordsListings';
                $.post("?id=", order, function(theResponse){
                    $("#contentRight").html(theResponse);
                });
            }
            });
        });

    });

</script> 
```

他们早点工作没有问题。我的网站是[http://www.silverart.me](http://www.silverart.me)，但是当您没有登录时，您看不到任何脚本，这就是为什么我在上面包含我的一个 jQuery 脚本的示例。当我登录时，我使用不同的 jquery 脚本控制了我网站上的所有元素，我不明白为什么它在之前的时候不起作用。

我尝试添加以测试 jquery 是否正在加载： $("div").css("border", "3px solid red"); 并且 jquery 确实按预期加载。但是可排序函数没有。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-06T06:06:55.173

好吧，似乎这个微不足道的问题的答案仍然未知。您粘贴的代码看起来和感觉都是有效的，正如评论中所讨论的，浏览器会逐行解释 JavaScript，直到遇到未捕获的错误。成功修复该错误后，浏览器应该能够运行您的可排序功能。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2019-11-20T16:28:54.637

我有这个问题。我打开了控制台，当我关闭它时，它恢复了生机。

# python - 支持哪些源包文件类型？

> ID：14179613
> 
> 赞同：1
> 
> 时间：2013-01-06T05:30:01.647
> 
> 标签：python, amazon-web-services, amazon-elastic-beanstalk

我正在使用[API](http://docs.aws.amazon.com/elasticbeanstalk/latest/api/API_CreateApplicationVersion.html)将应用程序部署到 AWS Elastic Beanstalk ：

```
https://elasticbeanstalk.us-east-1.amazon.com/?ApplicationName=SampleApp
&SourceBundle.S3Bucket=amazonaws.com
&SourceBundle.S3Key=sample.war
... 
```

我从阅读中获得的印象是 Java 部署使用`.war`, `.zip`s 是受支持的（[docs](http://docs.amazonwebservices.com/elasticbeanstalk/latest/dg/using-features.deployment.html)）并且可以使用`.git`（但只能使用 PHP 或使用`eb`? [doc](http://ruby.awsblog.com/post/Tx2AK2MFX0QHRIO/Deploying-Ruby-Applications-to-AWS-Elastic-Beanstalk-with-Git)）。

我可以使用 API 从`.git`Python 应用程序创建应用程序版本吗？或者是`zip`唯一支持的类型？

（或者，我可以在不使用命令行工具的情况下将 git push 推送到 AWS 吗？）

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-09T11:39:39.080

有两种方法可以部署到 AWS：

1.  API 后端，它基本上是从 S3 引用的 .zip 文件。部署时，实例将解压缩并运行一些自定义脚本（您可以从 AMI 或通过自定义配置文件覆盖这些脚本，这是推荐的方式）。请注意，为了在 AWS Elastic Beanstalk 环境中创建和部署新版本，您需要三个调用：上传到 s3、创建应用程序版本和更新环境。

2.  git 端点，其工作方式如下：

    *   您安装[AWS Elastic Beanstalk DevTools](http://aws.amazon.com/code/6752709412171743)并在您的 git 存储库上运行设置脚本
    *   运行时，安装脚本会修补您`.git/config`的支持`git aws.push`，特别是`git aws.remote`（未记录）
    *   `git aws.push`只需获取您的密钥，构建自定义 URL (git aws.remote)，然后执行 git push -f master
    *   一旦`<api>/<app>/<commitid>(/<envname>)`AWS`<app>`收到这个（url 基本上是URL 就像所有 AWS 调用一样，但作为用户名/密码身份验证令牌发送。`<commitid>``<envname>`

（[完整的参考文档](http://aws.amazon.com/code/6752709412171743)）

几个月前我将它移植为一个 Maven 插件，[这个文件](https://bitbucket.org/aldrinleal/beanstalker/src/9ad3e6be1610/beanstalk-maven-plugin/src/main/java/br/com/ingenieux/mojo/beanstalk/bundle/FastDeployMojo.java?at=default)展示了它是如何在纯 Java 中完成的。它实际上涵盖了很多代码（因为它实际上构建了一个自定义 git 存储库 - 使用 jgit，计算散列并推入其中）

我强烈考虑将反向移植作为一项 ant 任务，或者只是在没有`pom.xml`文件的情况下使其工作，因此用户只使用 maven 进行部署。

从历史上看，只有第一种方法得到支持，而第二种方法的重要性越来越大。由于第二个实际上要容易得多（在 beanstalk-maven-plugin 中，您必须调用三种不同的方法，而简单的 git push 完成所有这三种方法），我们支持基于 git 的部署，甚至发布了它的原型（您会[在此处](https://bitbucket.org/aldrinleal/maven-elasticbeanstalk-blank/src)看到一个示例项目，尤其是 README.md）。

（顺便说一句，如果你使用 .war 文件，我的[弹性 beanstalk 插件](http://beanstalker.ingenieux.com.br/beanstalk-maven-plugin/)支持这两种方式，我们实际上支持 git，因为它允许我们进行一些增量部署）

# 所以，你还想实现它吗？

我建议您阅读三个文件：

*   [FastDeployMojo.java](https://bitbucket.org/aldrinleal/beanstalker/src/9ad3e6be1610/beanstalk-maven-plugin/src/main/java/br/com/ingenieux/mojo/beanstalk/bundle/FastDeployMojo.java?at=default)是主要外观

*   [RequestSigner](https://bitbucket.org/aldrinleal/beanstalker/src/9ad3e6be1610/beanstalk-maven-plugin/src/main/java/br/com/ingenieux/mojo/beanstalk/bundle/RequestSigner.java?at=default)真正的魔法

*   [这是 RequestSigner 的测试用例](https://bitbucket.org/aldrinleal/beanstalker/src/9ad3e6be1610/beanstalk-maven-plugin/src/test/java/br/com/ingenieux/mojo/beanstalk/bundle/RequestBuilderTest.java?at=default)

想进去

*   Python？我会找[德威](http://www.samba.org/~jelmer/dulwich/docs/)
*   C＃？powershell版本基于它
*   红宝石？Linux是基于它的
*   爪哇？使用我的，它使用 jgit

# ruby - Ruby Mechanize：验证“选择”元素值

> ID：14179615
> 
> 赞同：0
> 
> 时间：2013-01-06T05:30:32.867
> 
> 标签：ruby, nokogiri, mechanize-ruby

我正在尝试使用 ruby​​ 的机械化验证下拉列表的值

我有这个漂亮的打印表格：

前：

```
#<Mechanize::Form
  ...
  [selectlist:0xefdae4 type:  name: time_entry[activity_id] value: []]}
  ...
 {buttons [submit:0xefe124 type: submit name: commit value: Save]}> 
```

后：

```
#<Mechanize::Form
  ...
  [selectlist:0xefdae4 type:  name: time_entry[activity_id] value: []]}
  ...
 {buttons [submit:0xefe124 type: submit name: commit value: Save]}> 
```

我正在运行的代码：

```
 @form.field_with(:name => "time_entry[activity_id]").options[2].select 
```

...对应于第三个选项：“测试”

以及选择 HTML 元素：

```
<select id="time_entry_activity_id" name="time_entry[activity_id]">
  <option value="">--- Please select ---</option>
  <option value="8">Design</option>
  <option value="9">Development</option>
  <option value="13">Testing</option>
  <option value="14">Dingo</option>
  <option value="15">ABPs</option>
</select> 
```

我正在尝试对从选择框中选择的项目进行某种验证。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-06T09:13:27.597

只需检查：

```
@form.field_with(:name => "time_entry[activity_id]").value 
```

或者更简单：

```
@form.values 
```

# solr - 搜索 Solr 停用词

> ID：14179619
> 
> 赞同：0
> 
> 时间：2013-01-06T05:31:08.643
> 
> 标签：solr, solr-schema

在我的 solr 字段中配置以下载人，

```
<fieldType name="text_exact" class="solr.TextField" positionIncrementGap="100" autoGeneratePhraseQueries="true">
 <analyzer type="index">
    <charFilter class="solr.HTMLStripCharFilterFactory"/>
    <tokenizer class="solr.WhitespaceTokenizerFactory"/>
    <filter class="solr.StopFilterFactory" ignoreCase="true" words="stopwords.txt" enablePositionIncrements="true"/>
    <filter class="solr.WordDelimiterFilterFactory" generateWordParts="1" generateNumberParts="1" catenateWords="1" catenateNumbers="1" catenateAll="0" splitOnCaseChange="0" splitOnNumerics="0" preserveOriginal="1" types="wdfftypes.txt"/>
    <filter class="solr.LowerCaseFilterFactory"/>
 </analyzer>
 <analyzer type="query">
   <tokenizer class="solr.WhitespaceTokenizerFactory"/>
   <filter class="solr.StopFilterFactory" ignoreCase="true" words="stopwords.txt" enablePositionIncrements="true"/>
   <filter class="solr.WordDelimiterFilterFactory" generateWordParts="1" generateNumberParts="1" catenateWords="1" catenateNumbers="1" catenateAll="0" splitOnCaseChange="0" splitOnNumerics="0" preserveOriginal="1" types="wdfftypes.txt"/>
   <filter class="solr.LowerCaseFilterFactory"/>
</analyzer>
</fieldType> 
```

这适用于我不想要词干的情况，但现在有另一个导致问题的用例，人们开始寻找以下组合，

*   The Ivy ：在这种情况下，只返回 ivy 的结果，而预期的结果是 The。我知道这是因为停用词，但这是实现这一目标的方法。例如，如果他们在引号内搜索“常春藤”，则应该可以。

*   (Mom & Me) OR ("mom and me")：在这种情况下，& 也会被删除，或者在语句的某些部分同时包含 mom 和 me 的结果被返回。

如果只有新数据以正确的方式运行但无法重新索引，我就可以了。此外，更改 schema.xml 文件会触发完整复制吗？

问候，
阿尤什

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-06T09:13:28.223

您正在使用空白标记器。所以“常春藤”被分成两个词。

您可以使用不那么激进的标记化 an 后跟`WordDelimiterFilterFactory`以激活`protected="protwords.txt"`选项，您可以在其中将“常春藤”设置为受保护的单词，这样 solr 就不会对其进行标记化。

[http://wiki.apache.org/solr/AnalyzersTokenizersTokenFilters#solr.WordDelimiterFilterFactory](http://wiki.apache.org/solr/AnalyzersTokenizersTokenFilters#solr.WordDelimiterFilterFactory)

# python - 理解python类变量

> ID：14179623
> 
> 赞同：0
> 
> 时间：2013-01-06T05:32:12.297
> 
> 标签：python, class, variables, instance

为什么我们在这里有 template_name = None 作为类变量？（来自 django 源代码）

这是因为如果 self.template_name 为 None，会引发错误吗？
（self.template_name 会查找实例变量，如果它不存在，则返回类变量）
如果是这样，最好有`def __init__(self): self.template_name = None ?`

```
class TemplateResponseMixin(object):
    """                                                                                                                                                                                                                                                                       
    A mixin that can be used to render a template.                                                                                                                                                                                                                            
    """
    template_name = None
    response_class = TemplateResponse

    def render_to_response(self, context, **response_kwargs):
        """                                                                                                                                                                                                                                                                   
        Returns a response with a template rendered with the given context.                                                                                                                                                                                                   
        """
        return self.response_class(
            request = self.request,
            template = self.get_template_names(),
            context = context,
            **response_kwargs
        )

    def get_template_names(self):
        """                                                                                                                                                                                                                                                                   
        Returns a list of template names to be used for the request. Must return                                                                                                                                                                                              
        a list. May not be called if render_to_response is overridden.                                                                                                                                                                                                        
        """
        if self.template_name is None:
            raise ImproperlyConfigured(
                "TemplateResponseMixin requires either a definition of "
                "'template_name' or an implementation of 'get_template_names()'")
        else:
            return [self.template_name] 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-06T05:40:00.457

TemplateResponseMixin 是一个不使用 init 的 mixin，以便在多重继承中更容易使用。它不需要自己的状态，因此不需要构造函数。这也使继承更容易，因为您不需要在子类中对其调用构造函数。

The template_name is set as a class instance obviously because there is no constructor. It implies that it should be set from the subclass. Also, changing the value of it will affect all future instances of that mixin.

# python - 如何查找数组的类型

> ID：14179624
> 
> 赞同：0
> 
> 时间：2013-01-06T05:32:17.647
> 
> 标签：python, arrays, csv, arff

我正在尝试编写将 CSV 转换为 ARFF 的代码。我将每个之间的值导入`","`到数组的一个单元格中，例如一个实例，例如：

```
Monday,176,49,203,27,77,38,Second 
```

转换为：

```
['Monday', '176', '49', '203', '27', '77', '38', 'Second'] 
```

问题是 Python 将每个单元格识别为字符串，您可以在示例中看到 Python 识别的类型：

```
[<type 'str'>, <type 'str'>, <type 'str'>, <type 'str'>, <type 'str'>, <type 'str'>, <type 'str'>, <type 'str'>] 
```

我正在寻找一种区分名义属性和数字属性的方法？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-06T06:04:15.453

我能想到的最好的就是这样，使用[ast.literal_eval](http://docs.python.org/2/library/ast.html#ast.literal_eval)：

```
import ast

def converter(x):
    try:
        val = ast.literal_eval(x)
        return val
    except ValueError:
        return x 
```

这使

```
>>> seq = ['Monday', '176', '49', '203', '27', '77', '38', 'Second']
>>> newseq = [converter(x) for x in seq]
>>> newseq
['Monday', 176, 49, 203, 27, 77, 38, 'Second']
>>> map(type, newseq)
[<type 'str'>, <type 'int'>, <type 'int'>, <type 'int'>, <type 'int'>, <type 'int'>, <type 'int'>, <type 'str'>] 
```

使用的好处`ast.literal_eval`是它以一种很好的方式处理更多的情况：

```
>>> seq = ['Monday', '12.3', '(1, 2.3)', '[2,"fred"]']
>>> newseq = [converter(x) for x in seq]
>>> newseq
['Monday', 12.3, (1, 2.3), [2, 'fred']] 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-06T05:45:57.323

```
for i in lst:
    try:
        int(i)
        #whatever you want to do
    except ValueError:
        #error handling 
```

这将起作用，尽管这样会更好：

```
for i in lst:
    if i[-1].isdigit():  #it is a number
        #whatever
    else:
        #whatever else 
```

取自[这里](https://stackoverflow.com/q/354038/1907098)

参见：[str.isdigit() 方法](http://docs.python.org/2/library/stdtypes.html#str.isdigit)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-06T05:59:27.597

如果性能在这里很重要，我将尝试采用三步法。这种方法不必要地避免了将字符串转换为`int`or`float`然后通过对第一个字符进行简单检查而失败。

*   对于每个块，检查第一个字符是否为数字
*   如果是，首先尝试将其解析为 an `int`，如果失败，则将其解析为`float`
*   如果一切都失败了，那你就有大问题了:)

就像是：

```
for chunk in chunks:
    if chunk[0].isdigit():
        try:
            return int(chunk)
        except ValueError:
            return float(chunk)
    else:
        # It's a string (a non-numeric entity)
        return chunk 
```

您当然需要更特殊的处理来支持 text/csv 文件中的十六进制/八进制文字，但我认为这对您来说不是正常情况？

**编辑**：想一想，[Volatility](https://stackoverflow.com/a/14179686/193906)使用了类似的方法，唯一的区别是调用`isdigit`整个字符串而不仅仅是第一个字符。`isdigit`如果我们有长的数字序列，在每个字符上都调用它，这可能需要更多的时间，而我的方法总是检查第一个字符，所以可能会更快一些。

# ios - 添加子视图控制器时容器中断中的 UIView 帧动画

> ID：14179625
> 
> 赞同：1
> 
> 时间：2013-01-06T05:32:21.510
> 
> 标签：ios, animation, uiviewcontroller, touch

因此，我有一个正在设置的自定义容器视图控制器，并且我有一个自定义动画，假设您在子视图控制器之间滑动时会发生这种动画，该控制器运行良好，直到我将临时 UILabel 从占位符视图中取出并将子视图控制器中的视图添加到占位符。如果我注释掉“addSubview”行，那么动画就会再次完美运行，但很明显我没有孩子，这有点意思......

现在我说动画不起作用，但这并不完全正确，因为任何与我在 init 中添加的东西（即通知和用户占位符和子项）相关的东西都可以完美地动画。不过，提要视图在它们下方是可见的，并且页眉和页脚栏有时只会移动。如果我将触摸 y 轴和 x 移动到一起，它会随机抽搐……这很奇怪。

用于设置和添加子 VC 的初始化代码：

```
UIStoryboard* sb = [UIStoryboard storyboardWithName:@"MainStoryboard" bundle:nil];
    self.feedVC = (NiTActionFeedViewController*)[sb instantiateViewControllerWithIdentifier:@"Feed"];
    self.feedVC.delegate = self;
    [self addChildViewController:self.feedVC];
    self.feedVC.view.frame = self.mainPage.bounds;//mainPage view is the only UIView that is placed in the IB as template for the other views (so I don't have to worry about resizing for 4" retina^^;)
    [self.mainPage addSubview:self.feedVC.view];
    [self.feedVC didMoveToParentViewController:self];

    //notify
    self.notifyPage = [[UIView alloc] initWithFrame:CGRectOffset(self.mainPage.frame, -kPageShift, 0)];// this is one of the placeholder views
    [self.notifyPage setClipsToBounds:YES];

    self.notifyVC = (NiTNotificationViewController*)[sb instantiateViewControllerWithIdentifier:@"Notify"];
    self.notifyVC.delegate = self;
    [self addChildViewController:self.notifyVC];
    self.notifyVC.view.frame = self.notifyPage.bounds;
    [self.notifyPage addSubview:self.notifyVC.view];
    [self.notifyVC didMoveToParentViewController:self];

    //user
    self.userPage = [[UIView alloc] initWithFrame:CGRectOffset(self.mainPage.frame, kPageShift, 0)];
    [self.userPage setClipsToBounds:YES];

    self.userVC = (NiTUserViewController*)[sb instantiateViewControllerWithIdentifier:@"UserScreen"];
    self.userVC.delegate = self;
    [self addChildViewController:self.userVC];
    self.userVC.view.frame = self.userPage.bounds;
    [self.userPage addSubview:self.userVC.view];
    [self.userVC didMoveToParentViewController:self];

    [self.view addSubview:self.notifyPage];
    [self.view addSubview:self.userPage];

     //and then re-add the header and footer views so that the children don't cover them^^
    [self.view addSubview:self.headerbar];
    [self.view addSubview:self.headerButton];
    [self.view addSubview:self.footerbar];
    [self.view addSubview:self.footerButton];
    [self.view addSubview:self.rightPageIndicator];
    [self.view addSubview:self.leftPageIndicator]; 
```

这是touchesMoved代码（如果您需要更多代码，请告诉我，但即使最后他们也不让步）：

```
if (touches.count > 0) {
        UITouch* touch = [touches anyObject];
        CGPoint currentPoint = [touch locationInView:self.view];
        float diff = currentPoint.x - startingPoint.x;

        //currentScreen is an enum that I set on load and on trigger of the screen change so I always know what screen is showing and it is always accurate
        //this line is just to make sure we don't go past the "edge" of the screen and is working perfectly
        if ((self.currentScreen - (diff<0?-1:1)) > userScreen||(self.currentScreen - (diff<0?-1:1)) < notifScreen) {
            return;
        }

            self.headerbar.frame = CGRectOffset(initheaderbar, (int)(kHeaderBarShift * (diff/kPageShift)), 0);
            self.headerButton.frame = CGRectOffset(initheaderButton, kHeaderButtonShift * (diff/kPageShift), 0);
            self.footerbar.frame = CGRectOffset(initfooterbar, kFooterBarShift * (diff/kPageShift), 0);
            self.mainPage.frame = CGRectOffset(initmainPage, kPageShift * (diff/kPageShift), 0);
            self.userPage.frame = CGRectOffset(inituserPage, kPageShift * (diff/kPageShift), 0);
            self.notifyPage.frame = CGRectOffset(initnotifyPage, kPageShift * (diff/kPageShift), 0);

        //this always updates and looks right even though nothing changes on the screen
            NSLog(@"move main:%@(%@)\nnotify:%@\nuser:  %@",NSStringFromCGRect(CGRectOffset(initmainPage, kPageShift * (diff/kPageShift), 0)),NSStringFromCGRect(self.mainPage.frame),NSStringFromCGRect(CGRectOffset(initnotifyPage, kPageShift * (diff/kPageShift), 0)),NSStringFromCGRect(CGRectOffset(inituserPage, kPageShift * (diff/kPageShift), 0)));

            lastPoint = currentPoint;
    }else{
        //never seen this called thus why I have it here so I know if something mind blowing has happened
        NSLog(@"W.T.F");
    } 
```

现在，您可能需要知道的最后一点是，我设置了一个“touchController”协议，该协议可以在所有指向父级的子级中设置“touchDelegates”，以便他们收到的任何触摸都会转发到容器VC，他们都在正确转发，所以不是这样（如果是这种情况，动画根本不起作用）......

帮助我欧比旺克诺比，你是我唯一的希望！说真的，可以使用任何人都可以提供的任何帮助^^;

**要求的信息** 我几乎为屏幕上的所有内容设置动画。由于项目的性质，我无法发布屏幕截图或视频，但希望您能够与我一起使用下面的图表（对不起，我不是 Photoshop 期望 =P）。图中唯一没有显示的是 headerButton，但基本上它只是在 headerBar 的顶部，并且移动速度稍慢，因为它没有移动那么远。该设计的理念是，如果您向一个方向滑动，它会向相反的方向滑动屏幕（如您所料），并且页眉和页脚栏以不同的速度滑动，因为它们更短，因此它们上的项目始终可见，但在显示您所在的一侧/页面时具有“酷”效果。（两个栏都不会在屏幕上显示“结束”，“结束” 直接到屏幕边缘，但从不出现）所有的常量就是这样。kPageShift 是屏幕宽度 (320)。剩下的就是它们需要在屏幕之间移动多远，因为除了页面之外它们的大小都不同。如果您需要更多信息，请告诉我！

![在此处输入图像描述](../Images/d7e1e084f3d99738aff50b1809fa8e05.png)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-14T18:31:38.557

在 Storyboard 文件中关闭 AutoLayout。

已设置的约束导致您所说的随机抽搐。

![在此处输入图像描述](../Images/18ba008b7fc2f29c0a809b4c25176d15.png)

# django - 使用 Django-Registration 验证自定义电子邮件域

> ID：14179629
> 
> 赞同：3
> 
> 时间：2013-01-06T05:33:26.373
> 
> 标签：django, django-registration

[我在这里](https://stackoverflow.com/questions/8686537/jquery-form-validation-only-allow-edu-email-addresses)看到了一个 JQuery EDU 验证版本，但我很想用它`django-registraion`来检查一个完整的域`@someschool.edu`或`@alumni.someschool.edu`

有任何想法吗？谢谢你的帮助。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-30T16:18:12.463

您可以在 forms.py 中创建自己的表单，您已经有一些示例：

*   有服务期限的注册
*   使用唯一邮件注册
*   无需免费电子邮件注册

在您的情况下添加：

```
class RegistrationFormEduMail(RegistrationForm):

    good_domains = ['edu']

    def clean_email(self):

        email_domain = self.cleaned_data['email'].split('.')[-1]
        if email_domain not in self.good_domains:
            raise forms.ValidationError(_("Registration using non edu email addresses is prohibited. Please supply a different email address."))
        return self.cleaned_data['email'] 
```

然后进入 registration/backends/default/ **init** .py 并导入你的表单，将 get_form_class() 方法返回的表单名称更改为你的表单名称（这里：RegistrationFormEduMail）

# c# - 使用 HtmlAgilityPack 将 HTML 转换为 XML 或 HTML 时出错

> ID：14179630
> 
> 赞同：1
> 
> 时间：2013-01-06T05:33:33.573
> 
> 标签：c#, html-agility-pack

我的 HtmlAgilityPack 版本是 1.3.0。我的例子：

```
StringBuilder sbXml = new StringBuilder();
StringWriter sw = new StringWriter(sbXml);
XmlTextWriter tw = new XmlTextWriter(sw);
HtmlWeb htmlWeb = new HtmlWeb();
htmlWeb.LoadHtmlAsXml("http://finance.qq.com/a/20121126/000974.htm", tw);
richTextBox1.Text = sbXml.ToString(); 
```

错误：

> System.ArgumentOutOfRangeException：长度不小于0。（tw为null）

为什么这个 URL 的 HTML 有问题？

# html - 使用 .load() 函数刷新 div

> ID：14179633
> 
> 赞同：0
> 
> 时间：2013-01-06T05:34:12.623
> 
> 标签：html, jquery

```
$(document).ready(function(){
$('#container').load('contents/home.html');
$('#nav ul#navigation li a').click(function(){
        var page = $(this).attr('href');
        $('#container').fadeOut('slow').load('contents/' + page + '.html').fadeIn('slow');
        return false;
    });
}); 
```

*这在 div容器中*加载页面时效果很好。 **`home.html`**包含*`nivoSlider`*，当整个页面刷新时它运行良好，但在使用功能加载页面后 **`home.html`**再次加载，则无法正常工作。我必须刷新整个页面才能刷新. 因此，每次将页面加载到 div 时，我都需要一个代码来刷新。**`#container`****`$('#container').load('contents/' + page + '.html')`***`nivoSlider`*`div``div`**`#container`**

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-06T05:45:07.837

确保将独特的知识封装在代码中的一个位置。如果您需要刷新某些内容，请确保将其放在一个地方，然后根据需要调用它。您的代码可能如下所示：

```
$(document).ready(function() {
    var container = $('#container');
    function loadContent(url, callback) {
        return container.load(url, {}, function () {
            // Add code here to refresh nivoSlider

            // Run a callback if exists
            if (callback) {
                callback();
            }
        });
    }
    loadContent('contents/home.html');

    $('#nav ul#navigation li a').click(function (event) {
        var page = $(this).attr('href');
        container.fadeOut('slow').loadContent('contents/' + page + '.html').fadeIn('slow');
        event.preventDefault();
    });
}); 
```

# javascript - 链接到关闭的 jquery ui 选项卡中的命名锚点（drupal）

> ID：14179635
> 
> 赞同：3
> 
> 时间：2013-01-06T05:34:39.117
> 
> 标签：javascript, jquery, drupal, drupal-7, jquery-ui-tabs

所以，这是目标很简单的事情之一，但毕竟我仍然难过。使用 drupal，我正在尝试链接到 jquery ui 选项卡内的命名锚点。我能找到的最有希望的事情是在这里：[链接到 JQuery 选项卡式内容中的锚点](https://stackoverflow.com/questions/10595351/link-to-an-anchor-within-jquery-tabbed-content?rq=1)，但我无法让它工作。历史记录已开启，我在链接中使用“goto”参数。

我使用的javascript如下：

更新，下面的新jquery。单击链接时，我现在导航到相应的选项卡，但是页面停留在同一位置，而不是滚动到锚点

```
jQuery(document).ready(function($) {

$('a[goto]').click(function(evt) {
evt.preventDefault();
var whereTo = $(this).attr('goto');
$tabs = $("ul.ui-tabs-nav li");
$tabs.find('a[href=#' + whereTo + ']').trigger('click');
//alert(attr('name'));
//alert( $('#'+whereTo+' a').offset().top );
$('html, body').animate({
    scrollTop: $('#'+whereTo+' a').offset().top
});

});

}); 
```

相关的html结构是：

```
<div id="quicktabs-event" class="quicktabs-ui-wrapper qt-ui-tabs-processed-processed     ui-tabs ui-widget ui-widget-content ui-corner-all">
<ul class="ui-tabs-nav ui-helper-reset ui-helper-clearfix ui-widget-header ui-corner-all">
<li class="ui-state-default ui-corner-top">
<li class="ui-state-default ui-corner-top">
<li class="ui-state-default ui-corner-top ui-tabs-selected ui-state-active ui-state-focus">
<a href="#qt-event-ui-tabs3" tabindex="2">Classes</a>
</li>
<li class="ui-state-default ui-corner-top">
<::after>
</ul>
<div id="qt-event-ui-tabs1" class="ui-tabs-panel ui-widget-content ui-corner-bottom ui-tabs-hide">
<div id="qt-event-ui-tabs2" class="ui-tabs-panel ui-widget-content ui-corner-bottom ui-tabs-hide">
<div id="qt-event-ui-tabs3" class="ui-tabs-panel ui-widget-content ui-corner-bottom">
<div id="qt-event-ui-tabs4" class="ui-tabs-panel ui-widget-content ui-corner-bottom ui-tabs-hide">
</div>
</div> 
<::after>
</div>
</div> 
```

我很感激任何帮助。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-06T05:49:58.937

您没有绑定哈希更改事件，因此永远不会调用更新客户端的函数。

```
window.onhashchange = function(evt){
  console.log(evt);
  // Logic for opening tab and navigating to child anchor
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-06T22:50:28.567

最终答案：

*   在引用目标选项卡的链接上设置“goto”属性。
*   确保目标元素的 id 设置为与锚匹配。这将不适用于目标元素或链接上的“名称”属性。

代码：

```
jQuery(document).ready(function ($) {
 var $tabs = $("ul.ui-tabs-nav li");
 $('a[goto]').click(function (evt) {
  evt.preventDefault();
  var whereTo = $(this).attr('goto');
  var anchor = this.hash;
  $tabs.find('a[href=#' + whereTo + ']').trigger('click');
  setTimeout(function(){
     $('html,body').animate({
      scrollTop: $(anchor).offset().top
     }, 500);
    }, 250)
  });
}); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-01T07:35:16.607

问题是在实际激活选项卡时如何向下滚动到锚点。

有一个事件`tabsactivate`，您可以在其上绑定一个事件侦听器，以便让您知道您实际上是在活动选项卡上，并且所有内容都可以滚动。

1.  您单击用于选择选项卡 selectedIndex 的链接，比方说（Windows 背景 ;-)）
2.  然后单击您的链接激活该选项卡
3.  您的选项卡现在已被选中，因此这是您要滚动的位置
4.  其实滚动...

从我的脑海中，我猜想是这样的：

> [根据jQuery UI API 文档](http://api.jqueryui.com/tabs/)绑定选项卡`tabsactivate`事件侦听器

```
$( ".selector" ).on( "tabsactivate", function( event, ui ) {
    // This is here you want to scroll to your anchor.
}); 
```

要订阅链接单击事件以便您可以更改选项卡 selectedIndex，您可以执行以下操作，我觉得这很容易。

```
$(".linkSelector").click(function( event, ui ) {
    $(".tabSelector").tabs( 'option', 'active', selectedIndex);
    return false; // actually preventing default behaviour.
}); 
```

selectedIndex 变量的值应随您要选择滚动的选项卡而变化。

因此，首先，处理您要更改所选选项卡的点击事件。

其次，`tabsactivate`通过滚动到您的锚点来处理事件。

如果没有对您的需求进行更深入的分析，这不是我快速理解的经过测试的代码。我希望我理解正确。否则，请告诉我。

# php - 使用 PHP 输出到 CSS 多个背景

> ID：14179638
> 
> 赞同：0
> 
> 时间：2013-01-06T05:36:08.510
> 
> 标签：php

在我的模板上，我有许多字段，用户可以在其中选择并从几个选项中进行选择，以用作其网站的背景。

有两个单独的背景，从 和 的 ID 调用`background-one`，`background-two`存储在单独的数组中。

输出第一个背景：

```
<?php $background = of_get_option('background-one'); {  
    if ($background['color'] && $background['image']) {
    echo 'body {
    background: ' . $background['color'] . ' url(' . $background['image']. ') ' .$background['repeat']. ' ' .$background['position']. ' ' .$background['attachment']. ';';
echo '
}';
    }

    else if ($background['color']) {  
    echo 'body {
    background: ' . $background['color']. ';';
    echo '
}';         
    }

    else if ($background['image']) {
    echo 'body {
    background: ' . 'url(' . $background['image']. ') ' .$background['repeat']. ' ' .$background['position']. ' ' .$background['attachment']. ';';
    echo '
}'; 
    };
}
?> 
```

但是，由于我对 PHP 非常陌生，我的问题是如何输出第二个背景？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-06T06:53:01.423

```
<?php 
    $backgroundArray1 = of_get_option('background-one');
    $backgroundArray2 = of_get_option('background-two'); 
    $backgroundText = false;

    if($backgroundArray1['image'] && $backgroundArray2['image'])
    {
      $backgroundText = 'background: url(images/' . $backgroundArray1['image'] . ') no-repeat top center scroll, url(images/' . $backgroundArray1['image'] . '.jpg) repeat top left scroll;';
    }
    else if($backgroundArray1['color'] && $backgroundArray2['color']) 
    {
       $backgroundText = 'background: linear-gradient(to bottom, #'.backgroundArray1['color'].', #'.backgroundArray2['color'].')';
    }
    else if($backgroundArray1['color'] && $backgroundArray1['image']) 
    {
      $backgroundText = 'background: ' . $backgroundArray1['color'] . ' url(' . $backgroundArray1['image'] . ') ' . $backgroundArray1['repeat']. ' ' .$backgroundArray1['position']. ' ' .$backgroundArray1['attachment']. ';';
    }
    else if($backgroundArray1['color']) 
    {  
      $backgroundText = 'background: ' . $backgroundArray1['color']. ';';
    }
    else if($backgroundArray1['image']) 
    {
      $backgroundText = 'background: ' . 'url(' . $backgroundArray1['image']. ') ' .$backgroundArray1['repeat']. ' ' .$backgroundArray1['position']. ' ' .$background['attachment']. ';';
    }

    if($backgroundText)
    {
      echo "body { " . $backgroundText . " } ";
    }
}
?> 
```

# windows-7 - 这个批处理脚本的语法有什么问题？

> ID：14179640
> 
> 赞同：2
> 
> 时间：2013-01-05T20:42:46.647
> 
> 标签：windows-7, command-line, putty, batch-file

我正在尝试使用带有批处理脚本的一些 SSH 密钥自动加载 Putty Pageant，但是因为我想绕过它已经在运行的 Pageant 的错误消息，所以我将它放在 IF 语句中。但是由于某种原因，它不起作用：

```
tasklist /FI "IMAGENAME eq pageant.exe" 2>NUL | find /I /N "pageant.exe">NUL
if %ERRORLEVEL%==1 ( :: checks whether pageant.exe is running or not

    :: set the SSH-keys
    if exist "C:\SSH keys\key1.ppk" (set KEYS="C:\SSH keys\key1.ppk")
    if exist "C:\SSH keys\key2.ppk" (set KEYS=%KEYS% "C:\SSH keys\key2.ppk")

    if not defined KEYS (
        msg * A SSH-key is propably missing.
    )

    :: Start pageant with the defined SSH-keys
    start /d"C:\Program Files (x86)\PuTTY" pageant.exe %KEYS%

) 
```

虽然他们确实分开工作：（1）

```
 tasklist /FI "IMAGENAME eq pageant.exe" 2>NUL | find /I /N "pageant.exe">NUL
 if %ERRORLEVEL%==1 ( :: checks whether pageant.exe is running or not

       :: This works!
       start /d"C:\Program Files (x86)\PuTTY" pageant.exe

 ) 
```

(2)

```
:: set the SSH-keys
if exist "C:\SSH keys\key1.ppk" (set KEYS="C:\SSH keys\key1.ppk")
if exist "C:\SSH keys\key2.ppk" (set KEYS=%KEYS% "C:\SSH keys\key2.ppk")

if not defined KEYS (
    msg * A SSH-key is propably missing.
)

This works as well!
start /d"C:\Program Files (x86)\PuTTY" pageant.exe %KEYS% 
```

是语法问题吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-05T21:56:09.523

如果没有错误消息，我只能猜测。

**您是否启用了延迟扩展？见[`setlocal /?`](http://technet.microsoft.com/en-us/library/cc772046%28v=ws.10%29.aspx)。**

将此添加到脚本的开头和脚本 `setlocal EnableExtensions EnableDelayedExpansion` 的 `endlocal`末尾。

这允许`KEYS`变量评估实际值。延迟扩展允许将值立即设置为变量，而不仅仅是在`if`语句范围结束时。也不要忘记使用if 语句中设置的变量来`!`代替。`%`

**示例：（**一次运行`.bat`一次，`EnableDepayedExpansion`一次不运行，你会看到区别。）

```
setlocal EnableExtensions EnableDelayedExpansion

set "Value=Hello World"
echo %Value%
if 1==1 (
    set "Value=Goodbye World"
    echo %Value%
    echo !Value!
)
echo %Value%

endlocal 
```

# android - 无法在 google play 中上传 android 应用程序

> ID：14179646
> 
> 赞同：0
> 
> 时间：2013-01-06T05:37:36.530
> 
> 标签：android

在我为我的 android 应用程序完成“导出签名的应用程序包”后，我想将我的最新版本应用程序上传到 google play。

我收到这样的错误消息：

> **上传失败**
> 
> 您上传的 APK 使用与之前的 APK 不同的证书进行签名。您必须使用相同的证书。您现有的 APK 使用证书签名 > 使用指纹：
> 
> SHA1：FC:DA:7B:3C:33:A2:87:41:D6:25:8C:FB:81:BD:07:62:37:16:CA:95
> 
> 并且用于签署您上传的 APK 的证书有指纹：
> 
> SHA1: 34:BF:77:B0:49:FF:BB:6F:FA:29:49:90:F4:70:0A:94:74:45:15:A8

如何解决此错误？

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-08-19T09:43:00.140

* ***Apk 必须使用相同的旧证书签名，但现在你正在使用新证书签名****

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-06T05:42:59.407

您必须确保您上传的原始 APK 使用相同的证书进行签名。否则，您必须将文件作为新包（新应用程序）上传。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-06T06:02:11.990

apk 必须使用相同的旧证书签名，如果您有它的备份，请尝试使用旧证书签署 apk。如果你没有旧证书，那就没有办法了。

# php - 使用正则表达式提取表格数据

> ID：14179647
> 
> 赞同：-1
> 
> 时间：2013-01-06T05:37:40.740
> 
> 标签：php, regex

我有一个包含多个表的文本文件，如下所示：

```
_____________________________________
Heading 1       | Heading 2
_______________ | ___________________
Label1 18857.10 | Label3 710.00
Label2 2361.50  | Label4 0.00
                | Label5 2531.37
                | Label6 0.00
                | Label7 0.00
                | Label8 0.01
________________| ___________________
       16495.60 | Label9 3969.06
_______________ | ___________________ 
```

我想使用正则表达式将数值存储到变量中。由于我是正则表达式的新手，所以我找不到办法。谁能帮我这个？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-06T06:52:41.730

```
$table="_____________________________________
Heading 1       | Heading 2
_______________ | ___________________
Label1 18857.10 | Label3 710.00
Label2 2361.50  | Label4 0.00
                | Label5 2531.37
                | Label6 0.00
                | Label7 0.00
                | Label8 0.01
________________| ___________________
       16495.60 | Label9 3969.06
_______________ | ___________________
";

$num = preg_match_all('/(\w+) (\d+(\.\d+)?)/', $table, $result);

for($i=0; $i<$num; $i++){
  echo "{$result[1][$i]} = {$result[2][$i]}<br>";
} 
```

如果您的桌子与您展示的完全一样，则此方法有效。

正则表达式：`/(\w+) (\d+(\.\d+)?)/`

开头和结尾的斜线`/`用于分隔正则表达式。

`(\w+)`意思是“匹配任何字母、数字或下划线一次或多次

后跟一个空格，您可以在空格后添加 + 以匹配多个，或者将 \s 代替空格以匹配任何白色字符，例如制表符..

`(\d+(\.\d+)?)`... `\d+`表示一位或多位数字，`(\.\d+)`表示点后跟一位或多位数字，问号表示前面的括号`(\.\d+)`是可选的。

Preg_match_all 将这些匹配存储在第三个参数中并返回匹配数。in`$result[$i][0]`是整个匹配，`$result[$i][1]`是第一个子表达式`(\w+)`，`$result[$i][2]`是第二个括号`(\d+(\.\d+)?)`，`$result[$i][3]`是小数部分`(\.\d+)`，它在里面`$result[$i][2]`，但你不需要`$result[$i][3]`，只是为了解释:)

代码打印：

```
Heading = 1
Heading = 2
Label1 = 18857.10
Label3 = 710.00
Label2 = 2361.50
Label4 = 0.00
Label5 = 2531.37
Label6 = 0.00
Label7 = 0.00
Label8 = 0.01
Label9 = 3969.06 
```

**编辑：对不起，它不起作用，它与那个裸 16495.60 值不匹配。让我再想一想……**

...

```
$regex='/([a-zA-Z0-9]+)? +(\d+(\.\d+)?)/'; 
```

更好一点，这是它的工作原理：

*   `[a-zA-Z0-9]+`匹配非零数量的字母或数字
*   `?`括号表示后，整个括号表达式是可选的。
*   `+`一个或多个空格
*   `(\d+(\.\d+)?)`非零位数后跟可选的{点和另一个非零位数}

整个正则表达式不包含`|`或换行，因此所有匹配都应仅发生在表的一个字段中。

结果变量应该是：

```
array (size=4)
  0 => 
    array (size=12)
      0 => string 'Heading 1' (length=9)
      1 => string 'Heading 2' (length=9)
      2 => string 'Label1 18857.10' (length=15)
      3 => string 'Label3 710.00' (length=13)
      4 => string 'Label2 2361.50' (length=14)
      5 => string 'Label4 0.00' (length=11)
      6 => string 'Label5 2531.37' (length=14)
      7 => string 'Label6 0.00' (length=11)
      8 => string 'Label7 0.00' (length=11)
      9 => string 'Label8 0.01' (length=11)
      10 => string '           16495.60' (length=19)
      11 => string 'Label9 3969.06' (length=14)
  1 => 
    array (size=12)
      0 => string 'Heading' (length=7)
      1 => string 'Heading' (length=7)
      2 => string 'Label1' (length=6)
      3 => string 'Label3' (length=6)
      4 => string 'Label2' (length=6)
      5 => string 'Label4' (length=6)
      6 => string 'Label5' (length=6)
      7 => string 'Label6' (length=6)
      8 => string 'Label7' (length=6)
      9 => string 'Label8' (length=6)
      10 => string '' (length=0)
      11 => string 'Label9' (length=6)
  2 => 
    array (size=12)
      0 => string '1' (length=1)
      1 => string '2' (length=1)
      2 => string '18857.10' (length=8)
      3 => string '710.00' (length=6)
      4 => string '2361.50' (length=7)
      5 => string '0.00' (length=4)
      6 => string '2531.37' (length=7)
      7 => string '0.00' (length=4)
      8 => string '0.00' (length=4)
      9 => string '0.01' (length=4)
      10 => string '16495.60' (length=8)
      11 => string '3969.06' (length=7)
  3 => 
    array (size=12)
      0 => string '' (length=0)
      1 => string '' (length=0)
      2 => string '.10' (length=3)
      3 => string '.00' (length=3)
      4 => string '.50' (length=3)
      5 => string '.00' (length=3)
      6 => string '.37' (length=3)
      7 => string '.00' (length=3)
      8 => string '.00' (length=3)
      9 => string '.01' (length=3)
      10 => string '.60' (length=3)
      11 => string '.06' (length=3) 
```

**编辑2：再次抓住那些片段！**点之前应该有一个反斜杠，在**`(\.\d+)`**!!! 我格式错误，它消失了。**重写它，现在应该没问题。

# iphone - 将 appDelegate 中 locationManager 的坐标传递给 viewController

> ID：14179651
> 
> 赞同：5
> 
> 时间：2013-01-06T05:38:09.607
> 
> 标签：iphone, ios, xcode, core-location, locationmanager

当 viewController 出现时，我试图获取用户的坐标。我需要几个viewController中的位置，所以我把locationManager放在appDelegate中。我的问题是，在第一个 viewDidAppear 上，坐标还没有找到。我应该如何去改变这个？谢谢你们！！！

我的 AppDelegate 有这个：

```
- (NSString *)getUserCoordinates
{
NSString *userCoordinates = [NSString stringWithFormat:@"latitude: %f longitude: %f", 
locationManager.location.coordinate.latitude,     locationManager.location.coordinate.longitude];
locationManager = [[CLLocationManager alloc] init];
locationManager.distanceFilter = kCLDistanceFilterNone; // whenever we move
locationManager.desiredAccuracy = kCLLocationAccuracyHundredMeters; // 100 m
[locationManager startUpdatingLocation];
return userCoordinates;
} 
```

我的 viewController 通过以下方式获取坐标：

```
- (void)viewDidAppear 
{
NSString *userCoordinates =[(PDCAppDelegate *)[UIApplication sharedApplication].delegate 
getUserCoordinates];
} 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-01-06T07:09:45.227

我最近在 AppDelegate 中实现了相同的位置管理器，以便我的 ViewControllers 都可以访问位置数据。

不要忘记实现 CoreLocation 委托方法，尤其是 didUpdateLocations 以获取新的位置数据。我会把它放在 AppDelegate 类中。

因为，你有一个对象（AppDelegate）需要通知许多 viewControllers 位置更新的关系，我建议使用 NSNotification。

在您的 AppDelegate 中，您将编写...

```
- (BOOL)application:(UIApplication *)application didFinishLaunchingWithOptions:(NSDictionary *)launchOptions
{
// set up location manager
self.locationManager = [[CLLocationManager alloc] init];
[self.locationManager setDelegate:self];
[self.locationManager setDesiredAccuracy:kCLLocationAccuracyBest];
[self.locationManager startUpdatingLocation];
return YES;
}

- (void)locationManager:(CLLocationManager *)manager
 didUpdateLocations:(NSArray *)locations {
CLLocation * newLocation = [locations lastObject];
// post notification that a new location has been found
[[NSNotificationCenter defaultCenter] postNotificationName:@"newLocationNotif"
                                                            object:self
                                                          userInfo:[NSDictionary dictionaryWithObject:newLocation
                                                                                               forKey:@"newLocationResult"]];
} 
```

在您的 ViewController 中，您不会使用 viewDidAppear 方法。相反，你会这样做......

```
- (void)viewDidLoad
{
[super viewDidLoad];
// subscribe to location updates
[[NSNotificationCenter defaultCenter] addObserver:self
                                         selector:@selector(updatedLocation:)
                                             name:@"newLocationNotif"
                                           object:nil];
} 
```

你会有一个看起来像这样的方法 updatedLocation

```
-(void) updatedLocation:(NSNotification*)notif {
CLLocation* userLocation = (CLLocation*)[[notif userInfo] valueForKey:@"newLocationResult"];
} 
```

您可以通过将其他 viewController 添加为观察者来订阅通知更新。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-02-12T09:12:37.317

您还可以做的是将`CLLocation`具有纬度和经度的字典保存到 keypath @"currentUserLocation" 下的 userDefaults （只是一个命名示例）。

在您的`viewDidLoad`设置中，您将控制器设置为 keypath 的观察者，如下所示：

```
[[NSUserDefaults standardUserDefaults] addObserver:self forKeyPath:@"currentUserLocation" options:NSKeyValueObservingOptionNew context:NULL]; 
```

并实现类似的东西：

```
-(void)observeValueForKeyPath:(NSString *)keyPath ofObject:(id)object change:(NSDictionary *)change context:(void *)context{
if ([keyPath isEqualToString:@"currentUserLocation"]) {

    NSUserDefaults *df = [NSUserDefaults standardUserDefaults];
    NSDictionary *dict = [df objectForKey:@"currentUserLocation"];
    NSLog(@"yea we have updated location dict %@", dict);
} 
```

}

这意味着您可以在应用程序中的任何位置更新您的用户位置，并且只要您更新`UserDefault`（在我的情况下为keyPath @“currentUserLocation”）任何观察者都会得到这个。我想它在某种程度上有点像通知中心？:)

这个解决方案非常适合我的情况。

# jquery - 如何在 BxSlider 没有动画的情况下移动到下一张幻灯片？

> ID：14179654
> 
> 赞同：1
> 
> 时间：2013-01-06T05:38:36.457
> 
> 标签：jquery, jquery-plugins, bxslider

我正在使用 jQuery 插件[bxSlider](http://bxslider.com/options)。

有两个自定义按钮，`prev`用于`next`切换滑动。
但是，在特定情况下，我需要移动到没有动画的幻灯片，我希望它是即时的。

有没有办法做到这一点？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-06T05:55:19.023

从[可用选项](http://bxslider.com/options)中，

将选项设置`speed`为`0`，您将不会获得任何动画。

```
$('.bxslider').bxSlider({
  mode: 'fade',
  speed: 0,
  captions: true
}); 
```

[演示](http://jsbin.com/eyajuc/1/edit)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-12-06T16:33:37.903

jQuery：

```
$('#slider').bxSlider({...});

$('.pager-item').on('click', function(){
  // bx-slider instant slide hack

  $('#slider').addClass('instant-slide');
  setTimeout(function(){
    $('#slider').removeClass('instant-slide');
  }, 100);

}); 
```

SCSS：

```
#slider {
 &.instant-slide {
   -webkit-transition: 0.001s ease !important;
   transition: 0.001s ease !important;
 }
} 
```

这对我有用，可以适应 goToSlide()

```
{ useCSS: true } 
```

必需的。

# php - 在函数调用 PHP 中声明数组

> ID：14179655
> 
> 赞同：3
> 
> 时间：2013-01-06T05:38:57.960
> 
> 标签：php, arrays, function, call

嘿只是想知道除了 array() 之外是否有更简单的方法来在函数调用中声明数组

```
$setup = new setupPage();
$setup->setup(array(
                   type => "static",
                   size => 350
                 ));

class setupPage {
    public function setup($config){
        echo $config[size] . $config[type];
    }
} 
```

感谢：D

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-01-06T05:42:52.223

如果您使用 PHP 5.4+，您可以使用简写，但它对性能没有影响，但实际上可能会使其更难阅读：

```
$setup->setup(['type' => 'static',
               'size' => 350]); 
```

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2021-04-27T09:01:36.823

创建一个包含以下类别的数组 (student) 的 PHP 程序：student_id、student_name、student_address、student_state、student_zip 和 student_age。程序中的函数将接受所有值并限制为每个值传递的数据类型。该函数创建数组并将值放入数组中。显示数组中的值。如果一个或多个值不是正确的数据类型，请使用 try/catch 显示错误消息。

# ruby-on-rails - Rails 使用 .last 并获取 id 一个而不是第一个使用的 id

> ID：14179661
> 
> 赞同：0
> 
> 时间：2013-01-06T05:40:12.183
> 
> 标签：ruby-on-rails

当我的应用程序创建新的工作订单时，它还会创建与该工作订单关联的第一个任务。新任务应将其 taskstatus 设置为 Taskstatus 表中的第一个 id。

Taskstatus 表中的第一条记录恰好有一个 id = 2。
但是，代码设置 task.taskstatus_id = 1

工单控制器代码：

```
 before_create :first_task

  protected
  def first_task
   self.tasks.build taskstatus_id: Taskstatus.first, taskname: self.description
  end 
```

我错过了什么？谢谢！

UPDATE ---- taskstatus 表中的第一条记录id = 2。id = 1 的记录被删除。我希望新任务记录的 taskstatus_id = 2。

在 taskstatus.rb 中，我有：

```
 default_scope :order => 'id ASC' 
```

这也创建了一个 taskstatus = 1 的任务

```
Taskstatus.limit(1) 
```

我正在使用 postgreSQL。

在 taskstatus 索引页面上，显示 3 条记录 =

身份状态码

2 新

3 开始

4 完成

奇怪的事情发生了！！

更新 2 - 你不会相信这个!!!!!! （我不会）-但是，这是真的。

我将代码更改为：

```
Taskstatus.where(:statuscode => "New") 
```

即使 New 的 id = 2，任务也得到了 1

postgreSQL 有什么问题吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-06T14:54:27.177

试试这个

```
Taskstatus.order("id").first 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-06T15:01:25.687

正如其他人所说，`.first`是无序的。

您可以通过添加显式排序 ( `.order(:id).first`) 或使用 a*始终*对结果`default_scope`进行排序来解决此问题：

 *```
class Taskstatus < ActiveRecord::Base

  default_scope order(:id)

end 
```

现在`Taskstatus.first`将永远是第一条记录，按 id 排序。如果您的订单发生变化，这可能很有用，并且您最终考虑将最早`created_at`的记录作为“第一个”记录。*

# html - 如何将鼠标指针箭头转换为手 onmouseover 链接或按钮。？

> ID：14179669
> 
> 赞同：1
> 
> 时间：2013-01-06T05:42:28.247
> 
> 标签：html, css

> **可能重复：**
> [当鼠标悬停在 <li> 元素上时，让鼠标指针变成一只手？](https://stackoverflow.com/questions/3087975/make-mouse-pointer-a-hand-when-hover-over-li-element)

我想在任何链接或按钮上将鼠标指针（箭头）转换为手（用手指）。我在这个网站上看到了很多帖子。但它们都在 asp.net 或其他语言中。因为我想让这仅在 javascript 或 css 或 php 或这些语言的组合中发生，所以这些帖子对我没有任何帮助。所以请帮助...

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-06T09:46:29.190

试试这个 `a:hover,button:hover { cursor: pointer;}`

等待好消息

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-06T05:47:24.387

使用 CSS：

```
a, button, input[type="submit"] {
    cursor: pointer;
} 
```

但是**IE6**不支持 CSS 选择器..( `input[type="submit"]`)

您可能会发现[How to workaround: IE6 不支持 CSS “属性”选择器](https://stackoverflow.com/questions/649341/how-to-workaround-ie6-does-not-support-css-attribute-selectors)，值得一读。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-06T05:48:35.727

默认情况下，锚元素使用手形指针。

按钮的 CSS 也使用手形指针：

```
button, 
input[type=submit], 
input[type=reset] {cursor:pointer;} 
```

[演示](http://jsfiddle.net/pxfunc/nZzkd/)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-01-06T05:58:49.737

与强制完整***光标指针一起使用***

```
a,
button {
  cursor: pointer !important;
} 
```

# c# - 试图通过其类之外的公共属性设置 int 数组的私有字段的多个值

> ID：14179671
> 
> 赞同：1
> 
> 时间：2013-01-06T05:42:53.173
> 
> 标签：c#, arrays, properties, field

我正在尝试通过公共属性访问器从类外部设置整数数组的私有字段。我几乎可以肯定问题是我缺乏完成这项工作的语法知识。如果我在通过对象访问属性时指定数组的索引，我已经想出了如何设置单个值。这是我到目前为止所拥有的。

下面是我的课。

```
using System;
using System.Collections.Generic;
using System.Linq;
using System.Text;

namespace paramRefVal
{
    class ParamaterTest
    {
        private int[] _ints = new int[5];
        private int _i;

        public int[] Ints
        {
            get { return _ints; }
            set { _ints = value; }
        }

        public int I
        {
            get { return _i; }
            set { _i = value; }
        }

        public void SomeFunction(int[] Ints, int I)
        {
            Ints[0] = 100;
            I = 100;
        }
    }
} 
```

这是我的主要方法

```
using System;
using System.Collections.Generic;
using System.Linq;
using System.Text;

namespace paramRefVal
{
    class Program
    {
        static void Main(string[] args)
        {
            ParamaterTest paramTest = new ParamaterTest();
            paramTest.I = 0;
            paramTest.Ints[0] = 99;
            Console.WriteLine("Ints[0] = {0}", paramTest.Ints[0]);
            Console.WriteLine("I = {0}", paramTest.I);
            Console.WriteLine("Calling SomeFunction...");
            paramTest.SomeFunction(paramTest.Ints, paramTest.I);
            Console.WriteLine("Ints[0] = {0}", paramTest.Ints[0]);
            Console.WriteLine("I = {0}", paramTest.I);
            Console.ReadLine();
        }
    }
} 
```

我感兴趣的行是

```
paramTest.Ints[0] = 99; 
```

我试图像这样设置多个值无济于事。

```
paramTest.Ints[] = { 0, 1, 2, 3, 4 }; 
```

我收到两个编译错误。“找不到类型或命名空间名称'paramTest'（您是否缺少 using 指令或程序集引用？）”没有引号。

其次。没有引号的“预期标识符”。

谢谢你的帮助！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-06T05:48:55.523

您可以使用：

```
paramTest.Ints = new int[] { 0, 1, 2, 3, 4 }; 
```

可以简化为：

```
paramTest.Ints = new[] { 0, 1, 2, 3, 4 }; 
```

如果你想使用数组初始化器，你可以这样做：

```
int[] ints = {0, 1, 2, 3, 4};
paramTest.Ints = ints; 
```

不过，我没有收到任何关于该类型的编译错误。你可以再详细一点吗？

# cuda - nsight 的 Cuda/输出不同于命令行 (nvcc) 输出

> ID：14179677
> 
> 赞同：0
> 
> 时间：2013-01-06T05:44:11.137
> 
> 标签：cuda

我使用 nvcc 命令运行代码，它给出了正确的输出，但是当我在 nsight eclipse 上运行相同的代码时，它给出了错误的输出。任何人都知道为什么会出现这种行为。

* * *

最后我发现其中一个数组分配存在问题。虽然命令行没有产生任何问题，但 nsight 确实存在。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-08T17:10:10.303

Nsight EE 通过基于项目设置生成 make 文件并调用 OS make 实用程序来构建项目来构建项目。它使用在 PATH 中找到的 nvcc 编译器，但它依赖于 NVCC 编译器 5.0 中引入的一些较新的选项（这是同一工具包分发的一部分）。

请在 Nsight Eclipse 中进行干净的重建 - 它会打印出用于构建应用程序的命令行。然后，您可以将该命令行与您在外部使用的命令行进行比较。可能的区别是：

1.  Nsight 在调试和发布模式下构建时指定调试标志和优化标志。
2.  默认情况下，Nsight 将新项目设置为为系统上检测到的硬件构建。NVCC 默认为 SM 1.0。
3.  确保 Nsight 使用的编译器和命令行使用的编译器相同。您的系统上可能安装了不同的编译器（例如 4.x 和 5.0），生成的代码可能略有不同。

无论如何，您的代码很可能有一些错误，这些错误会在不同的编译设置下表现出来。我建议在您的程序上运行[CUDA memcheck](http://docs.nvidia.com/cuda/cuda-memcheck/index.html)以确保没有隐藏的错误。

# html - 使用引导程序时，如何使初始加载的页面适合显示的宽度？

> ID：14179680
> 
> 赞同：0
> 
> 时间：2013-01-06T05:44:28.213
> 
> 标签：html, css, twitter-bootstrap

我使用 twitter-bootstrap.css 获得了宽长的表格。
内容从桌子边缘伸出，所以我将此行添加到 bootstrap.css。

> 最小宽度：400px；

**引导程序.css**

```
body { 
    min-width: 400px;
    padding-top: 60px;
    padding-bottom: 40px;
    background-color: #27292b;
    background: url('/assets/body-bg.jpg');
} 
```

但是现在，当我的智能手机加载页面时，初始外观默认放大。
我怎样才能使它适合？

**索引.html**

```
<meta name="viewport" content="width=device-width, initial-scale=1.0"> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-06T10:55:50.860

使用引导程序，显示包含大量内容的表格并不简单，尤其是在移动设备上。

首先考虑在移动设备上需要多少内容，如果仍然存在问题，您可以通过减小视口元标记中的初始缩放来增加移动视口的大小，如下所示：

`<meta name="viewport" content="width=device-width, initial-scale=0.5">`

这将使您可以看到的数量翻倍 -`initial-scale`根据需要调整值。

如果您想了解如何在移动设备上隐藏某些元素，请查看[http://twitter.github.com/bootstrap/scaffolding.html#responsive 。](http://twitter.github.com/bootstrap/scaffolding.html#responsive)`<td>`

# erd - 关于 ERD 中关系的查询

> ID：14179684
> 
> 赞同：1
> 
> 时间：2013-01-06T05:45:36.090
> 
> 标签：erd

是否有可能有两个实体链接到一个弱实体？如果是的话，这个例子怎么样。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-06T06:16:38.683

是的，在某些情况下它是可能的。

例如

您有一个“Employee”实体，它具有较弱的实体“Dependent”，它具有较弱的实体“Hobby”。（史密斯先生有一个儿子丹尼尔，他会踢足球）

# android - 如何实现“主菜单”ListView？

> ID：14179685
> 
> 赞同：-1
> 
> 时间：2013-01-06T05:45:38.603
> 
> 标签：android, listview, android-intent, listactivity, listadapter

我有一个显示“主菜单”项目列表的活动。单击时，每个列表项都应启动一个新活动。我通过使用它的类名加载适当的活动来做到这一点。

代码：

```
public class MenuActivity extends ListActivity {

    String classes[] = { "AboutUsActivity", "CompanyProfileActivity", "ProductsActivity", "ContactActivity" };

    @Override
    protected void onCreate(Bundle savedInstanceState) {

        super.onCreate(savedInstanceState);

        setListAdapter(new ArrayAdapter<String>(this, android.R.layout.simple_list_item_1, classes));
    }

    @Override
    protected void onListItemClick(ListView l, View v, int position, long id) {

        super.onListItemClick(l, v, position, id);

        String cheese = classes[position];
        try {
            Class ourClass = Class.forName("com.example.test." + cheese);
            Intent ourIntent = new Intent(this, ourClass);
            startActivity(ourIntent);
        }
        catch (ClassNotFoundException e) {
            e.printStackTrace();
        }
    } 
```

因为我将类名存储在列表中，这就是向用户显示的内容，所以它对用户不是很友好。我怎样才能解决这个问题？

例如，我怎样才能让列表显示“关于我们”或“关于公司名称”之类的内容，而不是显示“AboutUs”？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-06T06:01:53.033

试试这个：

```
import android.app.ListActivity;
import android.content.Intent;
import android.os.Bundle;
import android.view.View;
import android.widget.ArrayAdapter;
import android.widget.ListView;

public class MenuActivity extends ListActivity
{
    private String[] menuItems = { "About Us", "Company Profile", "Products", "Contact" };
    private String[] menuClassNames = { AboutUsActivity.class.getName(), CompanyProfileActivity.class.getName(), ProductsActivity.class.getName(), ContactActivity.class.getName() };

    @Override
    protected void onCreate(Bundle savedInstanceState)
    {
        super.onCreate(savedInstanceState);

        setListAdapter(new ArrayAdapter<String>(this, android.R.layout.simple_list_item_1, menuItems));
    }

    @Override
    protected void onListItemClick(ListView l, View v, int position, long id)
    {
        super.onListItemClick(l, v, position, id);
        try
        {
            Intent intent = new Intent(this, Class.forName(menuClassNames[position]));
            startActivity(intent);
        }
        catch (ClassNotFoundException e)
        {
            e.printStackTrace();
        }
    }
} 
```

或者，您可以创建`menuClassNames`一个`Class[]`，然后您不需要执行按名称加载类的额外步骤。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-06T05:51:08.603

使用 2 个数组，一个用于类，另一个用于要显示的名称。

# php - mysql 搜索 % 和 $ 字符没有结果

> ID：14179688
> 
> 赞同：0
> 
> 时间：2013-01-06T05:46:38.460
> 
> 标签：php, mysql, search

```
 $word ="50%";
 $searchSQL = "SELECT * FROM discounts WHERE keyword LIKE '%$word%' "; 
```

当我执行此查询时，它不返回任何结果。我认为问题是 % 符号，它是 mysql 中的通配符。搜索该 $word 的正确方法是什么

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-06T05:51:15.220

尝试这样的事情，

```
 $word ="50%";
 $searchSQL = "SELECT * FROM discounts WHERE keyword LIKE '%$word%' escape '%'"; 
```

作为旁注，`SQL Injection`如果值（*s*）来自外部，则查询很容易受到攻击。请看下面的文章，了解如何预防。通过使用 PreparedStatements，您可以摆脱在值周围使用单引号。

*   [如何*防止*PHP 中的 SQL 注入？](https://stackoverflow.com/questions/60174/how-to-prevent-sql-injection-in-php)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-06T05:49:17.567

您尝试搜索`%`? 如果没有，请更改`keyword = '%$word%'`为`keyword LIKE '%$word%'`. 如果这样做，请`%`使用以下命令转义：`LIKE '50\%' ESCAPE '\'":`

```
$word ="50\\%";
$searchSQL = "SELECT * FROM discounts WHERE keyword LIKE '%$word%' ESCAPE '\' "; 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-06T05:49:18.253

在 MySQL 中进行查询时，您必须在特殊字符之前添加前导斜杠。所以像这样：

```
$word = "50\\%";

```

# css - 边框左图像、边框右图像、边框顶部图像和边框底部图像是什么？

> ID：14179691
> 
> 赞同：3
> 
> 时间：2013-01-06T05:48:09.350
> 
> 标签：css

所以，我是那些以始终使用最新浏览器版本而自豪的人之一（当然除了 Internet Explorer ——我不谈论*那个*浏览器）。

我遇到了[这个很棒的 CSS3 网站](http://www.css3.info/preview/border-image/)，它详细介绍了 CSS3 中引入的属性，包括它的扩展属性，`border-image`例如`border-left-image`、`border-right-image`、等等。`border-top-image``border-bottom-image`

如此处详述，大多数主流浏览器至少部分支持此属性[。](http://caniuse.com/#search=border-image)所以，一切都很好，对吧？没那么快...

我能够`border-image`按预期工作，但它的扩展属性没有呈现。例如，`border-right-image: url(border.png) 27 27 27 27 round round;`不在 Firefox、Chrome 或 Safari 中做任何事情！

`border-image`在我们的互联网上相对有记录，但任何扩展属性的结果都非常有限（即少于十个结果）。

我们的 CSS3 大师有什么见解吗？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-01-06T05:55:41.423

扩展的属性在[当前规范](http://www.w3.org/TR/css3-background/#border-images)`border-*-image`中不再存在，并且很长一段时间都没有。¹如果任何浏览器仍然实现这些属性，它们是非标准的，您不应期望它们获得跨浏览器支持。

对于它的价值，CSS3.info 已经非常过时并且这些天几乎没有更新，所以我不再将它用作参考。[http://caniuse.com](http://caniuse.com)上的表格总是尽可能参考当前规范（带有针对特殊情况的注释），因此您需要确保在查看功能时查看最新规范，尤其是那些在草案中，尚未标准化。

* * *

^(1在) [[边框模块](http://www.w3.org/TR/2002/WD-css3-border-20021107/#the-border-image-uri)][（上面的 CSS3.info 页面链接到！）中，向各个边][扩展是一个非常古老的想法，它与背景模块合并，所有这些都发生在很多年前。合并发生在 2005 年，当时扩展的属性被删除，留下了和其他几个不属于盒子侧面的属性。从那以后，这些属性就再也没有出现过；甚至在背景和边框级别 4 中也没有。`border-image`[`border-image`](http://www.w3.org/TR/css3-background/#border-images)]

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-06T05:53:27.403

[http://css-tricks.com/understanding-border-image/](http://css-tricks.com/understanding-border-image/)

请参阅浏览器怪癖。另外，我没有看到任何地方说您可以使用border-right-image 上的完整属性，对吗？

# javascript - 检测 div 是否在浏览器窗口中不可见

> ID：14179692
> 
> 赞同：-2
> 
> 时间：2013-01-06T05:48:28.420
> 
> 标签：javascript, jquery

我想检测我正在构建的交互式地图是否在浏览器窗口中不可见。如果 div 不可见，我会显示一个弹出窗口，上面写着“这种方式”或类似的东西。主要问题是检测 div 何时在文档窗口中不可见。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-06T06:28:11.420

我从您的问题中收集到的是您想检测是否可以在屏幕的可见部分看到 div，而不是根据其 CSS（显示、可见性）是否可见。

如果是这样，您需要确定 div 的偏移量，然后检查它是否在文档尺寸或其他元素尺寸的范围内。

像这样的东西（假设你正在使用 jQuery）......

```
var div_offset = $('#div').offset();

if( div_offset.top < $(document).height() &&
    div_offset.left < $(document).width() ) {
    // div is within window bounds
} 
```

这是一个非常基本的例子。您当然需要考虑要显示多少 div 元素以使其被视为“可见”......即使只有 div 的单个顶部/左侧像素位于其中，上面的代码也是正确的文档边界。通过将宽度/高度添加到偏移量来测试右下角是否显示来做到这一点。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-06T05:49:41.560

您可以使用`is`功能`:visible`

**[现场演示](http://jsfiddle.net/NkKMv/1/)**

```
if($('#divId').is(':visible'))
{
     alert("div is visible");
}
else
{
     alert("div is not visible");
} 
```

或者

```
if($('#divId :visible').length)
{
     alert("div is visible");
}
else
{
     alert("div is not visible");
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-06T05:53:35.283

您可以检查如下：

```
if (document.getElementById("myDiv").style.visibility == 'hidden'){
//
}else{
//
} 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-01-06T05:54:04.047

你也可以像这样使用没有“是”

```
 // check if div is visible
     $("div:visible").click(function () {
        alert("hello to all");
       });

     // check if div is hidden
     $("div:hidden").show("fast"); 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2021-11-20T10:54:19.050

如果要检查元素是否在视口中可见，可以使用[InView](https://github.com/opuu/InView)

使用 npm 安装它：

```
npm install @opuu/inview 
```

像这样使用它：

```
// import it
import InView from "@opuu/inview";

// select elements to track
let elements = new InView(".selector");

// add enter event listener
elements.on("enter", (event) => {
    console.log(event);
    // do something on enter
});

// add exit event listener
elements.on("exit", (event) => {
    console.log(event);
    // do something on exit
}); 
```

*注意：我写了这个包。*

# plsql - 为什么我会收到 PL/SQL 触发器错误 PLS-00103？

> ID：14179697
> 
> 赞同：0
> 
> 时间：2013-01-06T05:49:10.237
> 
> 标签：plsql, triggers

如果表的字段已经具有某些值，我已经编写了一个不更新表字段的触发器：

```
CREATE TRIGGER DO_NOT_UPDATE BEFORE UPDATE ON CONCERNED_TABLE
FOR EACH ROW
BEGIN
   IF :OLD.CONCERNED_FIELD IS NOT NULL 
   THEN
      RAISE_APPLICATION_ERROR(-20182,'Concerned dataitem already exists!');
   END IF;
END; 
```

我在编译时收到此错误：

```
LINE/COL ERROR
-------- -----------------------------------------------------------------
5/3      PLS-00103: Encountered the symbol "end-of-file" when expecting
         one of the following:
         ; <an identifier> <a double-quoted delimited-identifier>
         The symbol ";" was substituted for "end-of-file" to continue. 
```

看起来是什么问题？我完全忽略了一些东西。

# emacs - 如何让 Emacs 在我的 C++ 代码中将访问级别修饰符放在他们自己的缩进级别中？

> ID：14179700
> 
> 赞同：1
> 
> 时间：2013-01-06T05:49:16.870
> 
> 标签：emacs

我想以类似于`"bsd"`样式的方式在 Emacs 中缩进我的 C++ 代码，但有一个区别：访问级别修饰符必须属于它们自己的缩进级别。（由于我不使用`switch`or 标签/ `goto`，因此通常可以说以冒号结尾的行必须属于它们自己的缩进级别。）这是一个例子：

```
 class somewhat
 {
   private:
     int whatever;

   public:
     void somehow()
     {
       if (something_about(whatever))
         like_this();
       else
       {
         std::cerr << "It is not true that something_about("
                   << whatever << ").";
         like_that();
       }
     }
 }; 
```

如何配置 my`~/.emacs`以反映此偏好？这是我当前的配置：

```
; No tabs at all.
(setq indent-tabs-width nil)
(setq tab-width         2)

; [C-like languages]-specific configuration.
(setq c-basic-offset  2)
(setq c-default-style "bsd")

; Configuration for other languages.
; ... 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-06T12:20:23.467

您需要`access-label`修改`c-offsets-alist`. 我建议您自己创建一个新的“样式”`c-offsets-alist`并添加如下一行：

`(access-label . +)`

如果你想从`bsd`风格派生，你可以这样做：

```
(c-add-style "modified-bsd"
'("bsd"
  (c-basic-offset . 2)
  ;;...MORE MODS...
  (c-offsets-alist
   (access-label . +))))` 
```

另外，我如何找到要修改的偏移量？转到相关代码行并按 `C-c``C-s`显示CC-mode的语法分析。也一定要检查帮助`c-offsets-alist`。

# android - 如何在 HTML 中使用自定义字体？

> ID：14179702
> 
> 赞同：1
> 
> 时间：2013-01-06T05:49:25.367
> 
> 标签：android, android-layout, android-webview, android-fonts

我正在生成 HTML 页面运行时，我已将字体文件放在 assets 文件夹中。“MyriadProRegular.otf”

```
String mStyle = "<style type=\"text/css\"> body { font-size: 100%; font-family: 'MyriadProRegular'; src: url('file:///android_asset/MyriadProRegular.otf'); }  </style>";

String mHTML = "<html><head> " + mStyle + " </head><body>"
    + " Hello World " + "</body></html>"; 
```

并像这样加载。

```
WebView mWebview = new WebView(this);
mWebview.loadDataWithBaseURL(null, mHTML, "text/html","utf-8", null); 
```

HTML 不加载字体。

我也试过

```
body { font-size: 100%; font-family: 'MyriadProRegular'; src:url('MyriadProRegular.otf'); } 
```

和

```
mWebview.loadDataWithBaseURL("file:///android_asset/", mHTML, "text/html","utf-8", null); 
```

但它仍然没有加载，没有得到我所缺少的东西？

编辑：

我得到以下日志，只有这五行。

```
01-06 11:39:34.724: E/Trace(2090): error opening trace file: No such file or directory (2)
01-06 11:39:35.923: D/dalvikvm(2090): GC_CONCURRENT freed 53K, 3% free 8410K/8583K, paused 40ms+28ms, total 216ms
01-06 11:39:36.253: I/Choreographer(2090): Skipped 56 frames!  The application may be doing too much work on its main thread.
01-06 11:39:36.293: D/gralloc_goldfish(2090): Emulator without GPU emulation detected.
01-06 11:39:36.794: I/Choreographer(2090): Skipped 80 frames!  The application may be doing too much work on its main thread. 
```

编辑：我认为上面的日志与问题无关，特别是“打开跟踪文件时出错：”每次运行任何应用程序时都会出现。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-08T10:49:24.823

你检查过这个字体是否有问题吗？MyriadPro-Regular.otf 我有类似的问题，其他字体在那里工作正常。

# php - 通过 AWS SES 发送的重复电子邮件

> ID：14179704
> 
> 赞同：2
> 
> 时间：2013-01-06T05:49:44.330
> 
> 标签：php, amazon-ses

我正在使用 Amazon AWS 并尝试使用他们的 SES 服务发送电子邮件。

我正在使用他们推荐的库 (http://www.orderingdisorder.com/aws/ses/) 发送电子邮件。

我遇到的问题是它正在发送重复的电子邮件。我已经使用回显数据到屏幕上，看到代码在哪里加倍，发送电子邮件的调用只被调用一次，但始终收到 2 封电子邮件。

我回显了通过 CURL 发送的数据，并且只列出了一个电子邮件地址，但收到了两封电子邮件。

我做错了什么还是 SES 有问题？

# iphone - 将子层添加到 view.layer 会改变框架位置？

> ID：14179707
> 
> 赞同：2
> 
> 时间：2013-01-06T05:50:40.677
> 
> 标签：iphone, ios, cocoa-touch, core-animation, calayer

我将 a`CALayer`作为子层添加到 a`UIView`的`layer`属性中，如下所示：

```
_graphicLayer = [[GraphicLayer alloc] init];
        self.bounds = _graphicLayer.bounds;
        _graphicLayer.position = CGPointMake(CGRectGetMidX(self.bounds), CGRectGetMidY(self.bounds));
        [self.layer addSublayer:_graphicLayer]; 
```

如您所见，我更改了 _ 的位置`graphicLayer`以说明居中的`anchorPoint`. 添加此子层后，我注意到它正在将视图更改`frame`为`(-self.bounds.width / 2, -self.bounds.height / 2)`. 为什么会这样？如果我改变 _ 的位置`graphicLayer`，我认为这只是相对于它的父视图。为什么它会影响 views`frame`属性？（而且我不想调整视图层属性的 anchorPoint 或`_graphicLayer`）。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-06T08:16:41.543

你目前正在做

```
self.bounds = _graphicLayer.bounds; 
```

这会改变视图的（自我）框架，因为它会改变宽度和高度。也许你打算这样做：

```
_graphicLayer.bounds = self.bounds; 
```

请参阅此处了解边界如何影响框架：[链接](http://developer.apple.com/library/ios/#documentation/uikit/reference/uiview_class/uiview/uiview.html#//apple_ref/occ/instp/UIView/bounds)

# objective-c - Alloc initWithString vs 保留

> ID：14179709
> 
> 赞同：0
> 
> 时间：2013-01-06T05:50:55.623
> 
> 标签：objective-c, ios, memory-management

以下两行之间的*内存角度*是否有任何区别

```
NSString *dbFilePath =[[NSString alloc]initWithString:[[NSBundle mainBundle] pathForResource:dbName ofType:nil]]; 
```

和

```
 NSString *dbFilePath =[[[NSBundle mainBundle] pathForResource:dbName ofType:nil] retain]; 
```

"[NSString alloc]initWithString:" 或者只是 "retain"

提前致谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-06T06:10:41.860

实际上，没有区别。但是，在第一种情况下，您暂时`NSString`比第二种情况多一个对象，即返回的对象`pathForResource`将在不久后自动释放，*并且*它是幸存的副本。

在第二种情况下，不制作副本。`pathForResource`而是直接保留返回的对象。高峰期少一个对象。

我发现第二段代码更直接。

但是，我想知道为什么您保留从堆栈中引用的东西。我希望`dbFilePath`改为更持久的东西，比如成员变量。

# sql - 在 postgresql 中锁定表

> ID：14179713
> 
> 赞同：4
> 
> 时间：2013-01-06T05:51:16.793
> 
> 标签：sql, postgresql

我有一个名为 as 的表`'games'`，其中包含一个名为 as 的列`'title'`，该列是唯一的，数据库用于`PostgreSQL`

我有一个用户输入表单，允许他`'game'`在`'games'`表中插入一个新表单。插入新游戏的功能会检查先前输入`'game'`的相同游戏是否`'title'`已经存在，为此，我得到`count of rows`, 与相同的游戏`'title'`。

我为此使用事务，开始时的插入函数使用`BEGIN`，获取行数，如果行数为0，则插入新行，处理完成后，它`COMMITS`会发生变化。

问题是，`title`如果用户同时提交 2 个相同的游戏，有可能会被插入两次，因为我只是获取行数来检查重复记录，并且每个事务都是彼此**隔离**

我想在获取行数时**锁定表：**

```
LOCK TABLE games IN ACCESS EXCLUSIVE MODE;
SELECT count(id) FROM games WHERE games.title = 'new_game_title' 
```

这也会锁定表以供读取（这意味着另一个事务必须等待，直到当前事务成功完成）。这将解决问题，这是我怀疑的。有没有更好的解决方法（避免`games`重复`title`）

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-06T09:06:48.093

在这种情况下，您不需要锁定您的表。

相反，您可以使用以下方法之一：

*   `UNIQUE`为必须唯一的列定义索引。在这种情况下，第一个事务将成功，第二个事务将出错。
*   定义`AFTER INSERT OR UPDATE OR DELETE`将检查您的条件的触发器，如果​​它不成立，它应该`RAISE`出错，这将中止违规交易

在所有这些情况下，您的客户端代码应该准备好正确处理可能通过执行语句返回的可能失败（如失败的事务）。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-01-06T12:32:31.177

使用[最高的事务隔离](https://www.postgresql.org/docs/current/static/transaction-iso.html)（Serializable），您可以实现与您的实际问题类似的事情。但请注意，这可能会失败`ERROR: could not serialize access due to concurrent update`

*我完全*不同意约束方法。您**应该**有一个约束来保护数据完整性，但是依赖于约束会迫使您不仅要识别发生了什么错误，还要识别是哪个约束导致了错误。问题不是像某些人讨论的那样捕获错误，而是确定导致错误的原因并提供人类可读的失败原因。根据您的应用程序是用哪种语言编写的，这几乎是不可能的。例如：告诉用户“游戏标题 [foo] 已经存在”而不是“游戏必须有价格”以获得单独的约束。

您的两阶段方法有一个单一的语句替代方案：

```
INSERT INTO games ( [column1], ... )
SELECT [value1], ...
WHERE NOT EXISTS ( SELECT x FROM games as g2 WHERE games.title = g2.title ); 
```

I want to be clear with this... **this is not an alternative to having a unique constraint** (which requires extra data for the index). You must have one to protect your data from corruption.

# windows-phone-7 - 检查数据是否已加载到 Windows Phone 应用程序中

> ID：14179716
> 
> 赞同：0
> 
> 时间：2013-01-06T05:51:48.250
> 
> 标签：windows-phone-7, xaml, pivot

我正在编写一个基本的 Windows Phone 应用程序。第一次启动应用程序时，数据会正确加载到列表框中。现在单击列表框中的任何项目后，我正在导航到另一个页面。但是当我按下返回按钮返回主页时。一组新的类似数据被附加到列表框项目中。如何检查数据是否已经加载。

`InitializeComponent();`

 ````
this.Loaded += new RoutedEventHandler(MainPage_Loaded); 
````  `在我的回调 MainPage_Loaded 中，我正在绑定我的数据。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-06T15:14:50.300

您应该了解导航在 Windows Phone 中的工作方式。当您返回时，每 tmie 都会引发 Loaded 事件。

但是，只有在第一次创建页面时才会调用构造函数。当你回去的时候，你实际上并没有再次调用构造函数，页面被缓存了。因此，为了阻止数据再次加载，您可能想尝试在构造函数中加载它。这是最简单的方法。

另一种方式包括某种形式的布尔标志来跟踪它。`

# java - 如何在java中打开终端窗口并执行客户程序

> ID：14179717
> 
> 赞同：0
> 
> 时间：2013-01-06T05:51:50.943
> 
> 标签：java, linux, process, terminal, runtime.exec

我想打开一个新的终端窗口并用 java 代码执行我的程序。所以我使用：

```
Runtime.getRuntime().exec("gnome-terminal -x /path/to/my/program arg1 arg2"); 
```

这在 Ubuntu 中可以正常工作，但不幸的是它在 CentOS 中不起作用，问题是终端窗口立即关闭。

我在stackoverflow中搜索了很多次，但找不到解决方案。非常感谢你！！！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-09T08:59:30.220

谢谢大家。我发现问题是当我将程序复制到 CentOS 时，缺少执行权限，因此终端无法执行它然后关闭。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2017-03-06T06:32:45.520

```
try{
    Process pr =new ProcessBuilder("gnome-terminal", "-e", "pathToScript/script.sh").start();
    }catch(Exception e){
        e.printStackTrace();
    } 
```

# ruby-on-rails - Rails - 如何使您的应用程序与多个子域一起工作

> ID：14179718
> 
> 赞同：0
> 
> 时间：2013-01-06T05:52:06.770
> 
> 标签：ruby-on-rails

我正在编写一个 RoR 应用程序。我想允许我的多个客户将其用作基于云的应用程序。我不想为每个客户复制代码。

我假设这意味着为我的每个客户使用一个子域，并为客户提供一个表。客户表将有一个域字段。

换句话说——我希望每个客户只看到他们的记录。

我的问题是：

*   有人记录了如何在 Rails 中执行此操作吗？它在哪里？

*   每个表都必须有一个 customer_id 吗？或者，如果您有一个带有 Customer_id 的项目表，然后有该项目的任务，那么您就不需要任务记录中的 customer_id - 对吧？

*   您是否必须从客户开始每个视图。??

任何想法都会有所帮助！谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-06T06:42:08.257

这里有一个关于在 Rails 3 中处理子域的 railscast：[http ://railscasts.com/episodes/221-subdomains-in-rails-3](http://railscasts.com/episodes/221-subdomains-in-rails-3)

关于第 2 点，您只需要`customer_id`on `Project`，您也不需要 on `Task`。

我不确定您从 Customer. 开始每个视图是什么意思，但我猜不是。也许通过 railscast 会在这里回答你的问题。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-06T10:13:27.770

您还需要考虑授权，即当前用户是否有权查看/更新这些记录？为此，我个人推荐使用 cancan gem [https://github.com/ryanb/cancan](https://github.com/ryanb/cancan)，您可以在应用程序中定义一个包含用户所有权限的 model/abilities.rb 文件。我发现它真的很好用。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-06T06:45:35.483

> 有人记录了如何在 Rails 中执行此操作吗？它在哪里？

整个东西？不是我知道的。

对于子域？是的，它被称为*catch-all A record*、*catch-all subdomain*等。只需将通配符 (*) 添加`A record`到域中，然后`request.subdomain`在 RoR 中使用以提取请求的子域。

@cheeseweasal 回答了其余的问题。

# entity-framework-4 - Generic Repository 应该直接使用 Unit of Work 或 DbContext

> ID：14179719
> 
> 赞同：0
> 
> 时间：2013-01-06T05:52:23.863
> 
> 标签：entity-framework-4, repository-pattern, unit-of-work

1.  当我将通用存储库与实体框架一起使用时，我是否需要使用工作单元，因为据我所知，UOW 在多个存储库之间进行协调。或者让通用存储库直接在 DbContext 上工作，因为不需要 UOW。

2.  最佳实践：使用通用存储库或为每个实体类型实现存储库类。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-27T19:22:41.000

我不知道您指的是哪个通用存储库，但这是我对通用存储库的体验。

通常，EntityFramework 不需要工作单元或存储库。EntityFramework 完成了这一切。

然而，在我的第一个 EF 项目中，我发现自己创建了一个工厂类来分发并保存所有实体。该类在没有完成工作单元的完整工作的情况下这样做，也没有像存储库那样提供标准化的接口。庞大的班级需要一些结构。因此，我个人的建议是反对为所有实体建立一个大型存储库，这个存储库将会增长并且将越来越难以维护。如果您想到这样的课程，您最好按原样使用 EF。

在第二个项目中，我使用 UnitOfWork 和通用存储库。这更适合我的目的。一个工作单元进行保存操作，在一次保存操作中保存所有更改，并且所有存储库的界面相同。我只需要更改其中的两个类以适应新实体的工作单元。工作单元还隐藏了 dbContext 的使用，我认为这会导致丑陋的代码。

我不使用花哨的工作单元或通用存储库（我在以下位置找到了我的：[http ://www.asp.net/mvc/tutorials/getting-started-with-ef-using-mvc/implementing-the-repository-and- unit-of-work-patterns-in-an-asp-net-mvc-application](http://www.asp.net/mvc/tutorials/getting-started-with-ef-using-mvc/implementing-the-repository-and-unit-of-work-patterns-in-an-asp-net-mvc-application)），足以在实施中获得一些指导。

我同意格特立即回复的观点：这完全取决于个人喜好。

# mysql - 在 SQL 端查询分页

> ID：14179736
> 
> 赞同：1
> 
> 时间：2013-01-06T05:55:56.227
> 
> 标签：mysql

如何使用查询在 mysql 中实现自定义分页？根据我需要从数据库中获取记录的页码，有可能吗？对此进行一些查询会很有帮助。

谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-06T06:03:24.737

```
SELECT * FROM items LIMIT 0,10 
```

要显示您的分页，您还需要知道总行数，以便计算要显示的页面链接数，例如：

页码：1 2 3 4 5 6 ...。

对 MySQL 进行查询以计算诸如“SELECT COUNT(*) ...”之类的行数不是一种选择，您将首先失去使用“LIMIT”查询保存的一些性能。有一种更有效的方法可以做到这一点，您只需稍微修改原始查询，例如：

```
$result = mysql_query('SELECT SQL_CALC_FOUND_ROWS * FROM items LIMIT 0,10'); 
```

在第一个查询之后立即运行：

```
$countData = mysql_fetch_assoc(mysql_query('SELECT found_rows() AS total'));
$totRows = $countData['total']; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-06T06:00:37.793

通过 PHP，您需要：

**$PageSize** - 表示您要显示的行数。
**$Pageoffset** - 表示 (CurrentPageNo * PageSize)

```
 $query =" select * from table limit $Pageoffset, $PageSize';
     // limit restricts the no. of rows fetching. 
```

明智地你可以在 mysql 中做。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-06T06:01:41.583

*   [见 MySQL 限制](http://php.about.com/od/mysqlcommands/g/Limit_sql.htm)

例子，

```
SELECT * FROM `your_table` LIMIT 0, 10 
```

将显示从第一条记录开始的 10 条记录。

# jetty - UnExpectedException - UnsatisfiedLinkError

> ID：14179738
> 
> 赞同：1
> 
> 时间：2013-01-06T05:56:40.537
> 
> 标签：jetty, rpc, m2e, gwt-maven-plugin

我正在使用 m2e 插件使用 maven-gwt Projekt。我实现了一个 rpc 来访问我的服务器端数据存储。

但是启动我的网络客户端会给我一个 UnsatisfiedLinkError：

```
com.google.gwt.user.server.rpc.UnexpectedException: Service method 'public abstract java.util.List   de.myPackage.client.SearchService.doSearch(java.lang.String,de.myPackage.shared.Coordinate,de.myPackage.shared.Coordinate)' threw an unexpected exception: java.lang.UnsatisfiedLinkError: org.gwtopenmaps.openlayers.client.LonLatImpl.create(DD)Lorg/gwtopenmaps/openlayers/client/util/JSObject;
at com.google.gwt.user.server.rpc.RPC.encodeResponseForFailure(RPC.java:389)
at com.google.gwt.user.server.rpc.RPC.invokeAndEncodeResponse(RPC.java:579)
at com.google.gwt.user.server.rpc.RemoteServiceServlet.processCall(RemoteServiceServlet.java:208)
at com.google.gwt.user.server.rpc.RemoteServiceServlet.processPost(RemoteServiceServlet.java:248)
at com.google.gwt.user.server.rpc.AbstractRemoteServiceServlet.doPost(AbstractRemoteServiceServlet.java:62)
at javax.servlet.http.HttpServlet.service(HttpServlet.java:637)
at javax.servlet.http.HttpServlet.service(HttpServlet.java:717)
at org.mortbay.jetty.servlet.ServletHolder.handle(ServletHolder.java:487)
at org.mortbay.jetty.servlet.ServletHandler.handle(ServletHandler.java:362)
at org.mortbay.jetty.security.SecurityHandler.handle(SecurityHandler.java:216)
at org.mortbay.jetty.servlet.SessionHandler.handle(SessionHandler.java:181)
at org.mortbay.jetty.handler.ContextHandler.handle(ContextHandler.java:729)
at org.mortbay.jetty.webapp.WebAppContext.handle(WebAppContext.java:405)
at org.mortbay.jetty.handler.HandlerWrapper.handle(HandlerWrapper.java:152)
at org.mortbay.jetty.handler.RequestLogHandler.handle(RequestLogHandler.java:49)
at org.mortbay.jetty.handler.HandlerWrapper.handle(HandlerWrapper.java:152)
at org.mortbay.jetty.Server.handle(Server.java:324)
at org.mortbay.jetty.HttpConnection.handleRequest(HttpConnection.java:505)
at org.mortbay.jetty.HttpConnection$RequestHandler.content(HttpConnection.java:843)
at org.mortbay.jetty.HttpParser.parseNext(HttpParser.java:647)
at org.mortbay.jetty.HttpParser.parseAvailable(HttpParser.java:211)
at org.mortbay.jetty.HttpConnection.handle(HttpConnection.java:380)
at org.mortbay.io.nio.SelectChannelEndPoint.run(SelectChannelEndPoint.java:395)
at org.mortbay.thread.QueuedThreadPool$PoolThread.run(QueuedThreadPool.java:488)
Caused by: java.lang.UnsatisfiedLinkError:     org.gwtopenmaps.openlayers.client.LonLatImpl.create(DD)Lorg/gwtopenmaps/openlayers/client/util/JSObject;
at org.gwtopenmaps.openlayers.client.LonLatImpl.create(Native Method)
at org.gwtopenmaps.openlayers.client.LonLat.<init>(LonLat.java:26)
at de.iisys.sara2.sara2lightWebclient.server.SearchServiceImpl.doSearch(SearchServiceImpl.java:43)
at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
at sun.reflect.NativeMethodAccessorImpl.invoke(Unknown Source)
at sun.reflect.DelegatingMethodAccessorImpl.invoke(Unknown Source)
at java.lang.reflect.Method.invoke(Unknown Source)
at com.google.gwt.user.server.rpc.RPC.invokeAndEncodeResponse(RPC.java:561)
... 22 more 
```

有人知道如何处理吗？

# javascript - 使用连接和传递的参数循环遍历数组

> ID：14179741
> 
> 赞同：1
> 
> 时间：2013-01-06T05:57:07.100
> 
> 标签：javascript, arrays, loops, parameter-passing, concatenation

```
var Animals = {
    "Europe": { "weasel.jpg": "squeak", "cow.jpg": "moo"},
    "Africa": { "lion.jpg": "roar", "gazelle.jpg": "bark"},         
};

function region(a){
    var b = "Animals."+a;
    for(var index in b) {
        var target = document.getElementById('div1');
        var newnode = document.createElement('img');
        newnode.src = index;
        target.appendChild(newnode)
    }
} 
```

相关的 HTML

```
<li onclick="europe('Europe')">Europe</li> 
```

目标：点击 Europe `<li>`，将 Europe 这个词传递到我的 region 函数中，然后将它连接起来产生 Animals.Europe

这是为了使用`for(var index in Animals.Europe)`循环在顶部的对象结构中识别一个数组。为什么产生 Animals.Europe 的连接没有像我输入的那样处理？

此外，您可以看到我使用数组来存储不同动物的图像源和描述。使用我有限的编码知识，这就是我能想到的。是否有更简单的方法来存储图像/描述数据以便以 HTML 格式生成？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-06T06:03:30.537

“动物。” + a 只是一个字符串值，例如“Animals.Europe”，它与 Animals.Europe 不同。如果您将第一行更改为`var b = Animals[a];`，您应该已准备就绪。

编辑：正如 elclanrs 指出的那样，它应该是`region('Europe')`，而不是`europe('Europe')`。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-06T06:05:17.933

> 为什么产生 Animals.Europe 的连接没有像我输入的那样处理？

在这种情况下，变量`b`只是一个字符串（“Animals.Europe”），它被视为任何其他字符串（即字符列表）。这意味着当您尝试遍历它时 ( `for(index in b)`)，您将遍历一个简单的字符列表。

您可以做的是使用方括号表示法访问对象属性。这意味着您可以改为编写，从 Animals`var b = Animals[a]`中检索属性。[您可以在此 MDN 页面上](https://developer.mozilla.org/en-US/docs/JavaScript/Guide/Working_with_Objects)`a`阅读有关以这种方式处理对象的更多信息

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-06T06:11:00.170

您可以使用以下方式访问欧洲财产

```
Animals[a] 
```

当你应该调用“区域”时，你也在调用“欧洲”函数

您不是将动物存储在数组中，而是存储在以图像名称作为键的对象中。通常您会希望使用相关名称作为键。例如，如果您想要每个大陆的动物数组

```
var Animals = {
    "Europe": [{ 
      imageSrc: "weasel.jpg",
      cry: "squeak"
    },{
      imageSrc: "cow.jpg",
      cry: "moo"
    }],
    "Africa": [{
      imageSrc: "lion.jpg",
      cry: "roar"
    },{
      imageSrc: "gazelle.jpg",
      cry: "bark"
    }]         
}; 
```

现在 Animals['Europe'] 给出了一个对象数组，你最终可以在其中存储其他属性。所以如果 b 是一个数组，你的循环现在看起来像：

```
var b = Animals['Europe'];

for(var i=0; i < b.length; i++) {
    var target = document.getElementById('div1');
    var newnode = document.createElement('img');
    var animalData = b[i];   // The array item is now an object
    newnode.src = animalData.imageSrc;
    target.appendChild(newnode)
} 
```

# jquery - 为什么 .mouseleave() 事件的不透明度不会改变？

> ID：14179742
> 
> 赞同：0
> 
> 时间：2013-01-06T05:57:10.817
> 
> 标签：jquery, css, mouseleave

在下面的代码中，部分工作正常，但是当部分被触发`.mouseover()`时会发生一些有趣的事情。`.mouseleave()`一方面，不透明度`'.step_details'`不会重置。我尝试同时使用这两种方法`.animate()`并将`.css()`不透明度重置为 0，但没有成功。关于为什么会这样的任何想法？

```
$('.step').mouseover(function() {
    $(this).css({'border': 'solid #CCC 1px', 'background-color': '#FFF'})
        .animate({'margin-top': '0', height: '300px'}, 500);
    $(this).children('.step_details').css('display', 'block')
        .animate({opacity: 1},700); 
})

$('.step').mouseleave(function() {
    $(this).css({'border': 'none', 'background-color': 'inherit'})
        .animate({'margin-top': '150px', height: '150px'}, 200);
    $(this).children('.step_details').css({'display': 'none', 'opacity': 0});
}) 
```

此外，在重置边框/背景与重置顶部边距和高度的动画开始之间存在不一致的延迟`'.step'`。这似乎暗示不透明度问题可能只是我滥用`.mouseleave()`事件触发器的症状。我究竟做错了什么？我应该这样做有更好的方法吗？

谢谢阅读！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-06T06:10:17.050

[http://jsfiddle.net/DXgr8/1/](http://jsfiddle.net/DXgr8/1/)

你不见了`.stop()`

```
$('.step').mouseenter(function() {
    $(this).css({border: 'solid #CCC 1px', backgroundColor: '#FFF'})
        .stop().animate({marginTop: '0', height: '300px'}, 500);
    $(this).children('.step_details').stop().animate({opacity: 1},700); 
}).mouseleave(function() {
    $(this).css({border: 'none', backgroundColor: 'inherit'})
        .stop().animate({marginTop: '150px', height: '150px'}, 200);
    $(this).children('.step_details').stop().animate({opacity: 0},200);
}); 
```

注意任何测试这个的人，div 隐藏但仍然悬停在那里，只是比它更向下

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-06T06:27:19.487

不透明度不会改变，因为动画设置`display:none`为不显示该元素的二进制开关，因此不会看到任何不透明度变化。但是，[`fadeIn`](http://api.jquery.com/fadeIn/)并且[`fadeOut`](http://api.jquery.com/fadeOut/)是您正在做的事情的一个很好的解决方案。

[演示 jsfiddle](http://jsfiddle.net/pxfunc/wELqx/2/)

```
$('.step').hover(function() { // mouse enter

  $(this).animate({
      'margin-top': '0', 
      height: '300px'
  }, 500).children('.step_details').fadeIn(700);

}, function() { // mouse leave

  $(this).animate({
    'margin-top': '150px', 
    height: '150px'
  }, 200).children('.step_details').fadeOut(200);

}); 
```

可以使用`:hover`伪类在 CSS 中处理边框/背景更改

```
.step {
  margin-top:150px;
  border:none;
  background-color:#eee;
}
.step:hover {
  border:solid #CCC 1px;
  background-color:#fff;
} 
```

# android - android中Flurry中的“广告服务器已响应但未发送任何广告单元”

> ID：14179744
> 
> 赞同：0
> 
> 时间：2013-01-06T05:57:28.283
> 
> 标签：android, ads, flurry

我想从[这里](http://support.flurry.com/index.php?title=Publisher/Code/Android)集成 Flurry Ad 。但我在日志中遇到问题..

```
01-06 11:05:28.746: E/FlurryAgent(440): Ad server responded but sent no ad units. 
```

[http://support.flurry.com/index.php?title=Publisher/GettingStarted/TechnicalQuickStart/Android](http://support.flurry.com/index.php?title=Publisher/GettingStarted/TechnicalQuickStart/Android)

我创建了 adSpace @ [http://support.flurry.com/index.php?title=Publisher/GettingStarted/SetUp](http://support.flurry.com/index.php?title=Publisher/GettingStarted/SetUp)

我的代码是

```
FlurryAgent.enableTestAds(true);
FrameLayout fViewGroup = (FrameLayout) findViewById(R.id.bannerframe);
if (mContext != null) {
        FlurryAgent.onStartSession(mContext, API_KEY);
        FlurryAgent.setUserId(Utils.getUserId(mContext));
        FlurryAgent.setLogEnabled(Debug.DEBUG);
        FlurryAgent.initializeAds(mContext);
    } else {
        Debug.e("", "mContext is null");
    }

FlurryAgent.getAd(Flurry.getContext(), "my adSpace", fViewGroup,
            FlurryAdSize.BANNER_BOTTOM, 0); 
```

**注意**：

`"my adSpace"`替换为我在 Flurry 上的原始广告空间。

帮助！！！谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2014-01-02T10:36:01.683

我对此问题的解决方案：查找接口函数 shouldDisplayAd() 并将 return 更改为 true ：

```
@Override
public boolean shouldDisplayAd(String arg0, FlurryAdType arg1) {
    return true;
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-07T13:41:23.950

在调用 onStartSession() 之后尝试调用 enableTestAds()。

（全面披露：我在 Flurry 的支持团队工作）

# jquery - 9列后用尽Highcharts列向下钻取颜色？

> ID：14179745
> 
> 赞同：1
> 
> 时间：2013-01-06T05:57:53.510
> 
> 标签：jquery, highcharts

我正在研究 highcharts 列向下钻取，如果没有，我会感到震惊。列数超过 9，highcharts 不会生成新颜色。我在这里错过了什么吗？

```
Highcharts.getOptions().colors 
```

返回 9 种颜色。

这里的例子：http: [//jsfiddle.net/C96tE/1/](http://jsfiddle.net/C96tE/1/)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-06T08:08:44.010

看到这个：http: [//jsfiddle.net/C96tE/2/](http://jsfiddle.net/C96tE/2/)

采用 ：

```
 Highcharts.setOptions({
 colors: ['#50B432', '#ED561B', '#DDDF00', '#24CBE5', '#64E572', '#FF9655', '#FFF263',      '#6AF9C4', '#EAEAEA', '#666999', '#006699']
}); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-10T11:04:39.613

我使用 Java 函数根据单一颜色生成颜色。它基本上需要一种颜色 - 将其转换为 HSV 并为色调添加一个步骤。饱和度和值是相当固定的，带有一点随机性以获得变化。我想这个功能可以改进，但它会产生漂亮的颜色:)

```
 private Color getNextColorHue(Color color){
    if(color != null){
        float hsbVals[] = Color.RGBtoHSB( color.getRed(), color.getGreen(), color.getBlue(), null );
        hsbVals[0] += STEP;
        hsbVals[1] = (float) ((Math.random() * 0.3) + 0.7);
        hsbVals[2] = (float) ((Math.random() * 0.2) + 0.7);

        if (hsbVals[0] > 1) {
            hsbVals[0] -= 1;
        }
        color = Color.getHSBColor(hsbVals[0], hsbVals[1], hsbVals[2]);
    }
    return color;
} 
```

应该很容易将其转换为 JS： [RGB to HSV color in javascript?](https://stackoverflow.com/questions/8022885/rgb-to-hsv-color-in-javascript)

# unit-testing - 使用嵌入式 Jetty 对 servlet 进行单元测试

> ID：14179746
> 
> 赞同：13
> 
> 时间：2013-01-06T05:57:53.797
> 
> 标签：unit-testing, servlets, jetty

我们如何使用嵌入式 Jetty 服务器对 servlet 进行单元测试？

比如下面的servlet方法怎么测试？

```
protected void doGet(HttpServletRequest request,
        HttpServletResponse response) throws ServletException, IOException {
    //any logic inside
} 
```

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2013-01-06T12:05:57.743

我非常喜欢使用 junit 之类的东西来测试带有 jetty 嵌入式实例的 servlet 来引导它。

[http://git.eclipse.org/c/jetty/org.eclipse.jetty.project.git/tree/examples/embedded/src/main/java/org/eclipse/jetty/embedded/MinimalServlets.java](http://git.eclipse.org/c/jetty/org.eclipse.jetty.project.git/tree/examples/embedded/src/main/java/org/eclipse/jetty/embedded/MinimalServlets.java)

这是如何做到这一点的最小示例。

这也是我们测试绝大多数码头本身的方式，启动它并按照它的速度运行它。

对于特定的 servlet 或处理程序，我们经常在 jetty-test-helper 工件中使用 jetty-client 或 SimpleRequest。URLConnection 也可以。

[http://git.eclipse.org/c/jetty/org.eclipse.jetty.toolchain.git/tree/jetty-test-helper/src/main/java/org/eclipse/jetty/toolchain/test/SimpleRequest。爪哇](http://git.eclipse.org/c/jetty/org.eclipse.jetty.toolchain.git/tree/jetty-test-helper/src/main/java/org/eclipse/jetty/toolchain/test/SimpleRequest.java)

这是 jetty-client 中的一个测试，它是针对 jetty-9 的，所以如果你想要 7 或 8 然后查看相应的标签，它在 jetty-9 中进行了相当多的重构。

[http://git.eclipse.org/c/jetty/org.eclipse.jetty.project.git/tree/jetty-client/src/test/java/org/eclipse/jetty/client/HttpClientTest.java](http://git.eclipse.org/c/jetty/org.eclipse.jetty.project.git/tree/jetty-client/src/test/java/org/eclipse/jetty/client/HttpClientTest.java)

Note: I recommend you pass 0 as the port for jetty to start up with and that will give you an random open port which you can then pull out of jetty for testing purposes, this avoids the situation where multiple builds are running on CI or parallel builds where there might be a port conflict.

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-06T06:37:35.630

你不需要Jetty来测试servlet，你需要一个单元测试框架，比如JUnit、[Mockito](http://code.google.com/p/mockito/)、JMock等。

一般来说，您在进行单元测试时不想使用 servlet 容器，因为您希望将测试重点放在被测试的实际方法上，使用 jetty 意味着您也在测试 jetty 行为。完成所有单元测试后，您可以继续进行集成测试和系统测试，这部分可能涉及外部系统，例如 jetty（使用[Selenium](http://seleniumhq.org/)等自动化框架。）

我使用 Mockito 和[PowerMock](http://code.google.com/p/powermock/)进行单元测试，您可以查看[此代码](http://code.google.com/p/basic-service/)以获取真实在线服务的工作示例（您可以在[此处](http://basicservice.zucksoft.cloudbees.net)找到）。我写了一个关于这个服务的教程和它包含的内容，可以在[这里](http://amirzucker.wordpress.com/2012/11/05/creating-an-online-service-dont-start-from-scratch/)找到。

[在对此答案不时投反对票后添加]：并且冒着获得更多投反对票的风险，所有投反对票的人都需要在单击 -1 按钮之前阅读 UNIT TESTING 的定义。你只是不知道你在说什么。

# gcc - “#pragma pack”和“__attribute__((aligned))”有什么区别

> ID：14179748
> 
> 赞同：27
> 
> 时间：2013-01-06T05:58:14.503
> 
> 标签：gcc, attributes

```
#pragma pack(L1_CACHE_LINE)
struct A {
  //...
};
#pragma pack()

A a; 
```

和

```
struct A {
  //...
};

A a __attritube__((aligned(L1_CACHE_LINE))) 
```

他们之间有什么区别？

* * *

## 回答 #1

> 赞同：19
> 
> 时间：2016-10-14T12:26:24.900

* * *

## 回答 #2

> 赞同：15
> 
> 时间：2013-01-06T06:32:45.090

#pragma pack(byte-alignment) 影响结构的每个成员，由字节对齐输入指定，或在它们的自然对齐边界上，以较小者为准。

`__attribute__((aligned(byte-alignment)))`影响变量（或结构字段，如果在结构中指定）的最小对齐

我相信以下是等价的

```
#define L1_CACHE_LINE 2

struct A
{
    u_int32_t   a   __attribute__ ( (aligned(L1_CACHE_LINE)) );
    u_int32_t   b   __attribute__ ( (aligned(L1_CACHE_LINE)) );
    u_int16_t   c   __attribute__ ( (aligned(L1_CACHE_LINE)) );       
    u_int16_t   d   __attribute__ ( (aligned(L1_CACHE_LINE)) );      
    u_int32_t   e   __attribute__ ( (aligned(L1_CACHE_LINE)) );     
};

#pragma pack(L1_CACHE_LINE)
struct A
{
    u_int32_t   a;  
    u_int32_t   b;  
    u_int16_t   c;  
    u_int16_t   d;  
    u_int32_t   e;  
};
#pragma pack() 
```

哪里是 A`a __attritube__((aligned(L1_CACHE_LINE)))`将确保`u_int32_t a`内部`struct A`将与 2 个字节对齐，但不会以相同的方式对齐其他变量。

参考：

1.  [http://publib.boulder.ibm.com/infocenter/macxhelp/v6v81/index.jsp?topic=%2Fcom.ibm.vacpp6m.doc%2Fcompiler%2Fref%2Frnpgpack.htm](http://publib.boulder.ibm.com/infocenter/macxhelp/v6v81/index.jsp?topic=%2Fcom.ibm.vacpp6m.doc%2Fcompiler%2Fref%2Frnpgpack.htm)
2.  [http://www.khronos.org/registry/cl/sdk/1.0/docs/man/xhtml/attributes-variables.html](http://www.khronos.org/registry/cl/sdk/1.0/docs/man/xhtml/attributes-variables.html)

# .net - 托管 C++/CLI 从另一个类访问 serialport1

> ID：14179750
> 
> 赞同：0
> 
> 时间：2013-01-06T05:58:58.770
> 
> 标签：.net, c++-cli, serial-port, managed

我很难从另一个班级访问一个班级的成员。我已经宣布了两个班级。第一个是Form1，第二个是packet_class。该类的较短版本如下。我的问题是尝试从 packet_send_data 类更新 serialPort1。如何访问 serialPort1 对象，以便可以通过 packet_class::packet_send_data 发送数据？我尝试将引用 serialPort1 传递给 packet_class 实例化的 packet_class 对象，但没有成功。
感谢您的帮助（最好使用简单的代码示例）。
谢谢

```
namespace Form_Example {
using namespace System;
using namespace System::ComponentModel;
using namespace System::Collections;
using namespace System::Windows::Forms;
using namespace System::Data;
using namespace System::Drawing;

public ref class Form1 : public System::Windows::Forms::Form
{
    //Form Initialisation ETC
public:
    Form1(void)
    {
        this->serialPort1 = (gcnew System::IO::Ports::SerialPort(this->components));
    }
protected:
public: System::IO::Ports::SerialPort^  serialPort1;
}; 
```

}

packet_class 如下

```
ref class packet_class
{
public:
    //Constructor Prototype
packet_class(void);
void packet_send_data(void);
String^ data_to_send; // Create an array to store 100 integers
};

//Packet_class Prototype
packet_class::packet_class(void)
{
 data_to_send="SEND ABC";
}

void packet_class::packet_send_data(void)
{
    //I want to access serialPort in the packet_class function here
    //serialPort1->Write(data_to_send);
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-06T06:10:10.053

如果`Form1`是实例化的`packet_class`，只需将其作为参数传递给构造函数。

```
ref class packet_class
{
    SerialPort^ serial;

    packet_class(SerialPort^ serial)
    {
        this->serial = serial;
        data_to_send="SEND ABC";
    }
};

// Somewhere in Form1....
packet_class packet = gcnew packet_class(this->serialPort1); 
```

# perl - IO::Handle 获取和取消获取 unicode 字符

> ID：14179751
> 
> 赞同：2
> 
> 时间：2013-01-06T05:59:00.923
> 
> 标签：perl, unicode, getc, perl-io, ungetc

我想我遇到了 Unicode 和 IO::Handle 的问题。我很可能做错了什么。我想从 IO::Handle 获取和取消获取单个 unicode 字符（不是字节）。但我遇到了一个令人惊讶的错误。

```
#!/usr/local/bin/perl

use 5.016;
use utf8;
use strict;
use warnings;

binmode(STDIN,  ':encoding(utf-8)');
binmode(STDOUT, ':encoding(utf-8)');
binmode(STDERR, ':encoding(utf-8)');

my $string = qq[a Å];
my $fh = IO::File->new();

$fh->open(\$string, '<:encoding(UTF-8)');

say $fh->getc(); # a
say $fh->getc(); # SPACE
say $fh->getc(); # Å LATIN CAPITAL LETTER A WITH RING ABOVE (U+00C5)
$fh->ungetc(ord("Å"));
say $fh->getc(); # should be A RING again. 
```

来自 ungetc() 行的错误消息是“在 unicode.pl 第 21 行中说的格式错误的 UTF-8 字符（字符串的意外结尾）。” `\x{00c5}`“未映射到 unicode.pl 第 21 行的 utf8。” 但这是字符的正确十六进制，它应该映射到字符。

我使用十六进制编辑器来确保 A-RING 的字节对于 UTF-8 是正确的。

这似乎是任何两字节字符的问题。

最后的输出'\xC5'（字面意思是四个字符：反斜杠，x，C，5）。

我已经通过从文件而不是标量变量中读取来测试了这一点。结果是一样的。

这是为 darwin-2level 构建的 perl 5，版本 16，subversion 2 (v5.16.2)

并且脚本以 UTF-8 保存。这是我检查的第一件事。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-06T23:02:34.403

鉴于此输出，我很确定这证明存在严重的 Unicode 处理错误：

```
perl5.16.0 ungettest
ungettest 98896 @ Sun Jan  6 16:01:08 2013: sending normal line to kid
ungettest 98896 @ Sun Jan  6 16:01:08 2013: await()ing kid
ungettest 98897 @ Sun Jan  6 16:01:08 2013: ungetting litte z
ungettest 98897 @ Sun Jan  6 16:01:08 2013: ungetting big sigma
ungettest 98897 @ Sun Jan  6 16:01:08 2013: kid looping on parental input
98897: Unexpected fatalized warning: utf8 "\xA3" does not map to Unicode at ungettest line 40, <STDIN> line 1.
 at ungettest line 10, <STDIN> line 1.
    main::__ANON__('utf8 "\xA3" does not map to Unicode at ungettest line 40, <ST...') called at ungettest line 40
98896: parent pclose failed: 65280,  at ungettest line 28.
Exit 255 
```

由这个程序产生：

```
#!/usr/bin/env perl

use v5.16;
use strict;
use warnings;
use open qw( :utf8    :std );

use Carp;

$SIG{__WARN__} = sub {  confess "$$: Unexpected fatalized warning: @_" };

sub ungetchar($) {
    my $char = shift();
    confess "$$: expected single character pushback, not <$char>" if length($char) != 1;
    STDIN->ungetc(ord $char);
}

sub debug {
    my $now = localtime(time());
    print STDERR "$0 $$ \@ $now: @_\n";
}

if (open(STDOUT, "|-")                          // confess "$$: cannot fork: $!") {
    $| = 1;
    debug("sending normal line to kid");
    say "From \N{greek:alpha} to \N{greek:omega}.";
    debug("await()ing kid");
    close(STDOUT)                               || confess "$$: parent pclose failed: $?, $!";
    debug("child finished, parent exiting normally");
    exit(0);
}

debug("ungetting litte z");
ungetchar("z")                                  || confess "$$: ASCII ungetchar failed: $!";

debug("ungetting big sigma");
ungetchar("\N{greek:Sigma}")                    || confess "$$: Unicode ungetchar failed: $!";

debug("kid looping on parental input");
while (<STDIN>) {
    chomp;
    debug("kid got $_");
}
close(STDIN)                                    || confess "$$: child pclose failed: $?, $!";
debug("parent closed pipe, child exiting normally");
exit 0; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-06T06:17:32.343

`ungetc`在底层输入流中添加一个字节。要返回 U+00C5，流必须包含`C3 A5`（该字符的 UTF-8 编码），而不是`C5`( `ord("Å")`)。请改用[IO::](http://search.cpan.org/perldoc?IO%3a%3aUnread) Unread `unread`。

# knockout.js - 使用 Knockout.js 过滤和排序数据馈送

> ID：14179752
> 
> 赞同：0
> 
> 时间：2013-01-06T05:59:07.653
> 
> 标签：knockout.js

假设我有一个公寓列表，我需要能够按价格、床位、位置等进行过滤，还需要按价格和日期进行排序。

这是淘汰赛的好场景吗？这种场景是否有类似的项目/示例。如果没有，我想我只会使用 Handlebars.js 模板

干杯!

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-06T08:12:41.833

是的，这是对 Knockout 的出色使用，我假设您将通过 Ajax/REST API 等检索数据。

虽然请注意，它是一个 UI+Data 绑定库 - 因此它不提供一些“开箱即用”的 UI 组件供您“插入”以执行您所描述的操作。

# php - 如何在 Laravel 中构建基于条件的查询？

> ID：14179758
> 
> 赞同：26
> 
> 时间：2013-01-06T05:59:50.907
> 
> 标签：php, laravel

我可以在 Code Igniter 中做到这一点：

```
$this->db->select();
$this->from->('node');
if ($published == true)
{
    $this->db->where('published', 'true');
}
if (isset($year))
{
    $this->db->where('year >', $year);
}
$this->db->get(); 
```

如何翻译这段代码以便它在 Laravel 中工作？

* * *

## 回答 #1

> 赞同：53
> 
> 时间：2013-01-06T06:11:23.650

在 Fluent 中，您可以：

```
$query = DB::table('node');

if ($published == true)
    $query->where('published', '=', 1);

if (isset($year))
    $query->where('year', '>', $year);

$result = $query->get(); 
```

* * *

## 回答 #2

> 赞同：17
> 
> 时间：2016-08-19T18:51:20.497

从[Laravel 5.2.27 开始](https://github.com/laravel/framework/pull/12878)，您可以通过编写条件来避免破坏链：

```
$query = DB::table('node')
    ->when($published, function ($q) use ($published) {
        return $q->where('published', 1);
    })
    ->when($year, function($q) use ($year) {
        return $q->where('year', '>', $year);
    })
    ->get(); 
```

要使用 Eloquent，只需交换`$query = DB::table('node')`，`Node::`但要意识到如果两个条件都失败，除非在查询 db/model 或从查询本身中检查其他条件，否则您将恢复表中的所有内容。

请注意，`$published`并且`$year`必须在闭包使用的本地范围内。

您可以通过创建宏使其更加简洁和可读。请参阅：[有条件地向 Laravel 的查询构建器添加指令](http://themsaid.com/laravel-query-conditions-20160425/)

* * *

## 回答 #3

> 赞同：12
> 
> 时间：2013-01-06T06:08:37.820

以下是完成查询的方法：

```
$year = 2012;
$published = true;

DB::table('node')
->where(function($query) use ($published, $year)
{
    if ($published) {
        $query->where('published', 'true');
    }

    if (!empty($year) && is_numeric($year)) {
        $query->where('year', '>', $year);
    }
})
->get( array('column1','column2') ); 
```

要查找更多信息，我建议阅读 Laravel 文档中的 Fluent 和 Eloquent。 [http://laravel.com/docs/database/fluent](http://laravel.com/docs/database/fluent)

* * *

## 回答 #4

> 赞同：9
> 
> 时间：2019-03-15T19:51:47.653

我在这里没见过。您甚至可以像这样开始查询

`$modelQuery = Model::query();`

然后链接其他查询命令。也许这对新人会有所帮助。

* * *

## 回答 #5

> 赞同：7
> 
> 时间：2017-04-29T05:16:59.893

您可以`Model::when()`在 Condition 中使用，也可以创建`Builder::micro()`

例如

```
$results = Model::where('user_id', Auth::id())
    ->when($request->customer_id, function($query) use ($request){
        return $query->where('customer_id', $request->customer_id);
    })
    ->get(); 
```

如果您需要为条件创建微，那么。按照以下说明进行操作。

**在您的服务提供商中编写代码**

```
Builder::macro('if', function ($condition, $column, $operator, $value) {
    if ($condition) {
        return $this->where($column, $operator, $value);
    }

    return $this;
}); 
```

**使用如下示例**

```
$results = Model::where('user_id', Auth::id())
    ->if($request->customer_id, 'customer_id', '=', $request->customer_id)
    ->get(); 
```

参考：[他们说](http://themsaid.com/laravel-query-conditions-20160425/)

* * *

## 回答 #6

> 赞同：5
> 
> 时间：2015-03-08T20:17:55.260

如果你需要使用 Eloquent，你可以像这样使用它，我不确定 whereNotNull 是最好的用途，但我找不到另一种方法来返回我们真正想要的空查询实例：

```
$query = Model::whereNotNull('someColumn');
if(x < y)   
    {
        $query->where('column1', 'LIKE', '%'. $a .'%');
    }else{
        $query->where('column2', 'LIKE', '%'. $b .'%');
    }
$results = $query->get(); 
```

这样任何关系仍然有效，例如在您的视图中您仍然可以使用

```
foreach($results as $result){
    echo $result->someRelationship()->someValue;
} 
```

这里有大量关于这类东西的信息[http://daylerees.com/codebright/eloquent-queries 。](http://daylerees.com/codebright/eloquent-queries)

* * *

## 回答 #7

> 赞同：4
> 
> 时间：2019-06-19T16:44:28.663

在 Laravel > 5.2 中，您可以使用`when()`：

```
$results = DB::table('orders')
    ->where('branch_id', Auth::user()->branch_id)
    ->when($request->customer_id, function($query) use ($request){
        return $query->where('customer_id', $request->customer_id);
    })
    ->get(); 
```

文档：[https ://laravel.com/api/5.8/Illuminate/Contracts/Container/Container.html#method_when](https://laravel.com/api/5.8/Illuminate/Contracts/Container/Container.html#method_when)

博文：[https ://themsaid.com/laravel-query-conditions-20160425/](https://themsaid.com/laravel-query-conditions-20160425/)

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2017-03-30T12:50:07.903

对于雄辩的查询，我使用了以下仅在条件具有值时执行

```
->where(function($query) use ($value_id)
                    {

                            if ( ! is_null($value_id)) 
                                $query->where('vehicle_details.transport_type_id', $value_id);

                    }) 
```

* * *

## 回答 #9

> 赞同：0
> 
> 时间：2019-06-10T05:38:12.160

我们可以这样写（更精确的方式）：

```
$query = DB::table('node')->when($published, function ($q, $published) {
        return $q->where('published', 1);
    })->when($year, function($q, $year) {
        return $q->where('year', '>', $year);
    })->get() 
```

Laravel 文档中没有提到。这是拉取[请求](https://github.com/laravel/framework/pull/18419)。

# java - 如何在 Java 中以特定字符代码读取 XML 响应

> ID：14179759
> 
> 赞同：0
> 
> 时间：2013-01-06T06:00:12.157
> 
> 标签：java, xml, character-encoding, mediawiki, domdocument

我使用 Wikimedia API Sandbox for Japanese。

[日文版](http://ja.wikipedia.org/wiki/%E7%89%B9%E5%88%A5%3aApiSandbox)

[英文版](http://en.wikipedia.org/wiki/Special%3aApiSandbox)

我向维基媒体发送了一个 HTTP 请求，我得到了一个以 XML 格式形成的结果。当我尝试在 API Sandbox 网页上发送请求并获得结果时，结果中没有字符损坏。

但是当我在 Java 中得到结果时，结果包括字符损坏。

我无法在 XML 文件中分配特定的字符代码。

如何为结果分配特定的字符代码？我该如何解决我的问题？

```
 try {
        DocumentBuilderFactory dbf = DocumentBuilderFactory.newInstance();
        DocumentBuilder db = dbf.newDocumentBuilder();
        Document doc = db
                .parse(new URL(
                        "http://ja.wikipedia.org/w/api.php?action=query&prop=categories&format=xml&cllimit=10&titles="
                                + key).openStream());
        Element root = doc.getDocumentElement();
        NodeList queryList = root.getChildNodes();
        Node query = queryList.item(0);
        if (query instanceof Element) {
            Element queryEle = (Element) query;
            NodeList pagesList = queryEle.getChildNodes();
            Node pgs = pagesList.item(0);
            if (pgs instanceof Element) {
                Element pagesElement = (Element) pgs;
                NodeList pageList = pagesElement.getChildNodes();
                Node page = pageList.item(0);
                if (page instanceof Element) {
                    Element pageElement = (Element) page;
                    String title = pageElement.getAttribute("title");
                    title = new String(title.getBytes("UTF-8"), "UTF-8");
                }
            }
        }
    } catch (ParserConfigurationException e) {
    } catch (SAXException e) {
    } catch (IOException e) {
    } 
```

现在我发送一个[请求](http://ja.wikipedia.org/wiki/%E7%89%B9%E5%88%A5%3aApiSandbox#action=query&prop=categories&format=xml&cllimit=10&titles=%E5%A4%A7%E5%AD%A6)，我得到一个页面标题为“大学”的结果。但是在Java中，它显示“??”。

我将上述代码用于 Android 应用程序。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-06T11:26:36.950

`title = new String(title.getBytes("UTF-8"), "UTF-8");`可以省略。

它对我有用，因为 key=1 （接收 UTF-8）。不过，我有一台 UTF-8 Linux PC。也许你没有在 UTF-8 上下文中输出。尝试将文档写入文件。

你可以做更多的检查：

```
URLConnection connection = new URL("...").openConnection();
... connection.getContentEncoding();
... connection.getContentType();
InputStream in = connection.openStream(); 
```

# php - 显示数据库中的数据并将其链接到新页面

> ID：14179765
> 
> 赞同：2
> 
> 时间：2013-01-06T06:01:06.280
> 
> 标签：php, mysql

我可以使用下面的代码显示表格中的内容，但是正如您在代码中看到的那样，我将行链接到新页面，并且在该页面上我试图显示其余部分行，我在同一张表中。

我的意思是，我`ID, photo, Firstname, Lastname, Age, StreetAdd, PhoneNum, EmailAdd`的桌子上有列。我`photo, Firstname, Lastname`在第一页上只显示行。

所以我想做的是当用户点击我从数据库中显示的名字时，他将被重定向到新页面并查看其余信息。我该怎么做？

这是显示三个列的 PHP 页面。我可以在新页面上显示其余的列，但它会显示行中的所有信息。我想显示每个用户的个人信息，而不是整个列表。一个可能的例子是 eBay。当您搜索项目时，您不会看到完整的描述，直到您单击图片或标题。

```
<?php
  $con = mysql_connect("localhost","root","");
  if (!$con) {
    die('Could not connect: ' . mysql_error());
  }
  mysql_select_db("simple_login", $con);
  $result = mysql_query("SELECT * FROM test ");
  echo "<table align='center' bgcolor='#F9F0F0' border='0' cellspacing='0'>
    <tr>
      <th><font color='red'>Firstname</font></th>
    </tr>";
  while($row = mysql_fetch_array($result)) {
    echo "<tr>";
    echo "<td><a href='send.php'><img src='".$row['photo']."' \" width=\"150px\" height=\"150px\" /></a><br><br><br>";
    echo "<a href='send.php'><td align='center' style='vertical-align:text-top' width='200px'>" . $row['Firstname'] . "</td>";
    echo "<td align='center' style='vertical-align:text-top' width='200px'>" . $row['Lastname'] . "</td>";
    echo "</tr>";
  }
  echo "</table>";
  mysql_close($con);
?> 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-06T06:19:39.907

在您已将文本级元素`a`放入块级元素`td`中，其中显示了名字的单元格。你也没有`a`在那里关闭标签。正确的形式是这样的。

```
echo "<td align='center' style='vertical-align:text-top' width='200px'>";
echo "<a href='send.php'>" . $row['Firstname'] . "</a></td>"; 
```

要获得相同的用户简历，`send.php`您需要传递该行的主键。例如，如果主键是您在查询字符串中`id`传递它。`send.php`

```
echo "<a href='send.php?id=".$row['id']."'>" . $row['Firstname'] . "</a></td>"; 
```

现在`send.php`用于`$_GET['id']`获取主键并使用它从数据库中检索用户生物。

但**请确保您对传递给 sql 数据库的参数进行转义**。不要直接使用这些变量！查看 Nullpointer 的[答案](https://stackoverflow.com/a/14179824/376535)

* * *

## 更新1：

当您获得一行的主键时，只需调用 a `SELECT *`with**`LIMIT 1`**

```
$pkey = mysql_real_escape_string($_GET['id']);
$sql = "SELECT * FROM test where id='$pkey' LIMIT 1";
/* Run this sql */ 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-06T06:13:16.303

显示每个用户的个人信息，您可以在查询中使用 where close ，例如

```
SELECT * FROM test WHERE user = bla 
```

* * *

## **警告**

您的代码容易受到[sql 注入](http://en.wikipedia.org/wiki/SQL_injection)的影响，您需要全部转义`get`，`post`更好的方法是使用[Prepared 语句](http://en.wikipedia.org/wiki/Prepared_statement)

**好读**

1.  [如何防止 PHP 中的 SQL 注入？](https://stackoverflow.com/questions/60174/how-to-prevent-sql-injection-in-php)
2.  [**PDO 准备好的语句是否足以防止 SQL 注入？**](https://stackoverflow.com/a/12202218/1723893)

* * *

## **笔记**

1.  整个**`ext/mysql`**PHP 扩展提供了所有以 mysql_ 为前缀的函数，[从 PHP v5.5.0 开始正式弃用，](http://php.net/manual/en/changelog.mysql.php)并将在未来删除。所以使用`PDO`或者`MySQLi`

**好读**

1.  [不推荐使用 mysql 扩展并将在将来删除：请改用 mysqli 或 PDO](https://stackoverflow.com/questions/13944956/the-mysql-extension-is-deprecated-and-will-be-removed-in-the-future-use-mysqli/13944958#comment19236631_13944958.)
2.  [Pdo 初学者教程](https://stackoverflow.com/questions/12859942/why-shouldnt-i-use-mysql-functions-in-php/14110189#14110189)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-06T18:38:39.597

这应该是您的第一页

```
<?php
  $con = mysql_connect("localhost","root","");
  if (!$con) {
    die('Could not connect: ' . mysql_error());
  }
  mysql_select_db("simple_login", $con);
  $result = mysql_query("SELECT * FROM test ");
  echo "<table align='center' bgcolor='#F9F0F0' border='0' cellspacing='0'>
    <tr>
      <th><font color='red'>Firstname</font></th>
    </tr>";
  while($row = mysql_fetch_array($result)) {
    echo "<tr>";
    echo "<td><a href='send.php'><img src='".$row['photo']."' \" width=\"150px\" height=\"150px\" /></a><br><br><br>";
    echo "<a href='send.php?".$row['id']."'><td align='center' style='vertical-align:text-top' width='200px'>" . $row['Firstname'] . "</td>";
    echo "<td align='center' style='vertical-align:text-top' width='200px'>" . $row['Lastname'] . "</td>";
    echo "</tr>";
  }
  echo "</table>";
  mysql_close($con);
?> 
```

现在 send.php 应该是

```
<?php
$con = mysql_connect("localhost","root","");
      if (!$con) {
        die('Could not connect: ' . mysql_error());
      }
      mysql_select_db("simple_login", $con);
      $sql = "SELECT * FROM test where id = " . $_Get['id'] ;
      $result = mysql_query($sql);

//then display the result here

?> 
```

希望这可以帮助

# javascript - input type="submit", onclick handler调用this.form.submit(), 不返回值

> ID：14179769
> 
> 赞同：6
> 
> 时间：2013-01-06T06:01:56.347
> 
> 标签：javascript, cross-browser, submit, dom-events

**编辑：在考虑回答之前，请仔细阅读整个问题。我*不是*在询问在生产代码中使用内联事件处理程序的可取性，也不是在询问实现我参考的文章所承诺的结果的最佳方法。这是一个关于 Javascript 语义和浏览器实现细节的问题，而不是关于最佳编码实践的问题。**

听起来像是一场噩梦，对吧？

然而，我发现了一些[在线建议](http://www.hesk.com/knowledgebase/?article=63)，提倡这样做以防止重复提交表单：

```
<input type="submit" 
       onclick="this.disabled=true;
                this.value='Sending, please wait...';
                this.form.submit();" /> 
```

撇开任何关于内联事件处理程序弊端的讨论，我在这里看到的问题是：

1.  标签的类型是`"submit"`，所以提交它的包含表单是它的默认行为；
2.  `onclick`处理程序*显式*提交包含表单；
3.  `onclick`处理程序不会返回以`false`阻止默认行为（参见 1）。

直觉上，我认为单击此项目将与文章声称的完全*相反*——即提交表单两次，一次是作为显式`submit()`调用的结果，然后再次作为未抑制的默认行为`"submit"`类型控制。

另一方面，我编写了一个很小的 ​​PHP 脚本（如下）并在 Firefox 和 Safari（目前我唯一方便使用的浏览器）上进行了尝试，每次单击按钮时它只写入一个日志条目：

```
<html>
<head></head>
<body>
<?php
  if (isset($_GET['action']) && $_GET['action'] == 'submit') {
    $s = 'Got form submission at ' . time();
    error_log($s);
    echo $s;
  }
  else {
?>
  <form action="http://localhost/~hephaestus/phptests/submittest.php?action=submit" 
        method="post">
    <input type="submit" 
           onclick="this.disabled=true;
                    this.value='Sending, please wait...';
                    this.form.submit();" />
  </form>
<?php
  }
?>
</body>
</html> 
```

那么这两个浏览器实际上是否在做“正确”的事情（其中“正确”在一些我没有看过或没有仔细阅读的文档中定义） - 这意味着我对问题的分析不完整或错误?

或者，我的分析是否正确——意味着观察到的单个提交是浏览器实现者放入特殊情况逻辑的结果，以拯救幼稚的编码人员？

**更新：**

为了从经验上检验@sourcecode 的说法，即该`form.submit()`方法是表单上的某种“第二个提交按钮”，因此受[HTML4 规范第 17.13.2](http://www.w3.org/TR/html401/interact/forms.html#h-17.13.2)节中规定的规则的约束，即只能有一个“成功”的提交按钮，我在我的 PHP 测试脚本中添加了一些内容：

```
<?php
  if (isset($_GET['action']) && $_GET['action'] == 'submit') {
    $s = 'Got form submission at ' . time() . ', tellme = ' . $_POST['tellme'];
    error_log($s);
    echo $s;
  }
  else {
?>
  <form action="http://localhost/~hephaestus/phptests/submittest.php?action=submit" 
        method="post">
    <input type="hidden" id="tellme" name="tellme" value="0" />
    <input type="submit" 
           onclick="this.disabled=true;
                    this.value='Sending, please wait...';
                    this.form.submit();
                    document.getElementById('tellme')=1;" />
  </form>
<?php
  }
?> 
```

在 Firefox 中，此代码生成单个错误日志条目：

> *在时间戳*得到表单提交，tellme = 1

这*确实*表明方法调用以某种方式被控件的内在事件驱动行为所取代。

`return false;`此外，如果我在将值设置为 1 之后包含一个附加项`tellme`（从而防止单击事件传播，从而防止控件的内在行为），则单个错误日志条目是：

> *在时间戳*得到表单提交，tellme = 0

这意味着在这种情况下，提交是调用的结果`this.form.submit()`。

另一方面，当我在 Safari 中尝试相同的两个变体时，它们中的*每*一个都给了我相同的单个错误日志条目：

> *在时间戳*得到表单提交，tellme = 0

所以在 Safari 的情况下，方法调用总是优先于事件驱动的提交——大概是因为它发生得更早。

那是。只是。惊人的。：-/

**进一步更新：**我有机会在 Windows NT 5.1 上的 IE 8.0 上对此进行测试。

IE 8 反映了 Safari 的行为，即`form.submit()`方法总是优先于偶数驱动的提交。

尽管今天几乎不相关，但我也意识到我在运行 OS X 10.4.11 的更古老的 PowerPC iMac 上有一个古老的 IE 5.22。这里有趣的历史琐事是 IE5 的工作方式与 IE8 的工作方式**完全相反**：事件驱动的提交总是取代`form.submit()`方法——*即使单击事件已被*`return false;`处理程序末尾的a禁止传播`onclick`！（不过，我还没有深入研究这是一个错误还是一个功能。我还没有 - 可能永远不会！ - 运行测试以确定它是否破坏了事件抑制，或者试图做一些“聪明的事情” “。）

尽管如此，不管有什么不一致，两个 IE 都只进行一次提交。

我的初步（嗯，到目前为止，实际上非常确定）的结论是，“提交”类型的控件和 DOM`form.submit()`方法之间的精确关系没有明确定义，并且浏览器实现者，在没有任何明确指导的情况下，通常做他们认为最好的事情（例如，参见[@Boris Zbarsky 的回答](https://stackoverflow.com/a/14184844/1337498)）。

至少在 Firefox、Safari 和 IE 的情况下，它们的实现者预见到事件和方法调用可能会竞争提交相同表单的可能性，并采取措施（尽管不同——几乎运行范围）来确保只有其中一个会成功。

（我*仍然*欢迎那些非常了解不同浏览器内部结构的人发表评论，或者使用我测试过的浏览器以外的浏览器加载了我的简单 PHP 脚本。）

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-06T17:39:28.113

Gecko (Firefox) 肯定会检测到多个提交并在新提交时取消旧提交。[请参阅http://hg.mozilla.org/mozilla-central/file/c4abfca219e5/content/html/content/src/nsHTMLFormElement.h](http://hg.mozilla.org/mozilla-central/file/c4abfca219e5/content/html/content/src/nsHTMLFormElement.cpp)中的 mPendingSubmisson 成员及其在[http://hg.mozilla.org/](http://hg.mozilla.org/mozilla-central/file/c4abfca219e5/content/html/content/src/nsHTMLFormElement.h)中的处理[mozilla-central/file/c4abfca219e5/content/html/content/src/nsHTMLFormElement.cpp](http://hg.mozilla.org/mozilla-central/file/c4abfca219e5/content/html/content/src/nsHTMLFormElement.cpp)（例如在`nsHTMLFormElement::Submit`和`nsHTMLFormElement::PostHandleEvent`（后者是从提交控件的默认操作内容中调用的内容）。

就规范所说的而言，我不清楚规范是否一定是理智的，但它位于[http://www.whatwg.org/specs/web-apps/current-work/multipage/association-of- controls-and-forms.html#concept-form-submit](http://www.whatwg.org/specs/web-apps/current-work/multipage/association-of-controls-and-forms.html#concept-form-submit)并建议两次提交都会发生，但由于“导航”算法的内部细节，后者可能会有效地取消较早的提交。我提交了[https://www.w3.org/Bugs/Public/show_bug.cgi?id=20580](https://www.w3.org/Bugs/Public/show_bug.cgi?id=20580)来整理规范。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-06T06:29:16.613

这是 w3 org 的建议：

*   如果一个表单包含多个**提交按钮**，**只有激活的提交按钮是成功的**。

    提交点击和本地 JS form.Submit 函数也是如此，只有“提交”被激活，而不是 form.submit 函数。因为提交是主要的，JS函数是次要的..
    你可以在这里了解更多[链接](http://www.w3.org/TR/html401/interact/forms.html#submit-format)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-06T06:09:47.800

我想您将需要使用该`stopPropogation()`方法。理想情况下，您会从 onclick 处理程序中调用一个函数，而不是使其全部内联。[请参阅this other stackoverflow answer以获得详尽的解释](https://stackoverflow.com/questions/387736/how-to-stop-event-propagation-with-inline-onclick-attribute)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-01-06T07:02:54.093

永远不要在点击提交时执行脚本，并且一定不要提交表单！！！此外，如果您禁用按钮，提交可能会停止！

如果文章中的代码能够正常工作，那完全是幸运的，我想许多浏览器会进入一个禁用提交按钮和单击此禁用按钮时提交事件的竞赛状态。

这是在任何浏览器中都可以使用的内联建议

```
<form action="..." method="post" 
 onsubmit="document.getElementById('subbut').innerHTML='Sending, please wait...'">
  <span id="subbut"><input type="submit" /></span>
</form> 
```

同样不引人注目：

```
window.addEventListener('load',function() {
  document.getElementById('form1').addEventListener('submit', function(e) {
    document.getElementById('subbut').innerHTML = 'Sending, please wait...';
  })
})
```

```
<form action="..." method="post" id="form1">
  <span id="subbut"><input type="submit" /></span>
</form>
```

# html - 从 NSAttributedString 生成 HTML 文件

> ID：14179777
> 
> 赞同：1
> 
> 时间：2013-01-06T06:03:29.447
> 
> 标签：html, objective-c

最近，我在项目中遇到了一个问题。我需要将 NSAttributedString 转换为 HTML 文件。解决方案 Click [here](https://stackoverflow.com/questions/5298188/how-do-i-convert-nsattributedstring-into-html-string "参考")对我不起作用，因为只想输出带有 TagName 和 idName 和 ClassName 的 HTML 文件，同时输出 CSS 样式文件以控制 HTML 文件的显示方式。这是我的示例代码，我希望你能得到我的意图：

```
    - (NSDictionary *)html
    {
        NSTextStorage *textStorage = [自身内容];
        NSArray *arr = [textStorage 段落];
        // 初始化 CSS 字典
        NSMutableDictionary *dict = [NSMutableDictionary dictionaryWithObjectsAndKeys:
                                     零];

        NSEnumerator *paragraphEnumerator;
        段落枚举器 = [arr objectEnumerator];
        NSAttributedString *段落;
        NSMutableArray *paragrapHTMLStrings = [[NSMutableArray alloc] initWithCapacity:[arr count]];

        NSMutableString *cssString = [[NSMutableString alloc] initWithCapacity:0];
        [cssString appendString:@"div{"];
        [cssString appendString:[NSString stringWithFormat:@"-webkit-column-count:%ld;", self.columnCount]];
        [cssString appendString:[NSString stringWithFormat:@"width:%fpx;", self.bounds.size.width]];
        [cssString appendString:[NSString stringWithFormat:@"height:%fpx;", self.bounds.size.height]];
        [cssString appendString:@"}"];

        [dict setObject:cssString forKey:@"css"];

        而（段落= [paragraphEnumerator nextObject]）{
            // 初始化
            NSU整数长度；
            NSRange 有效范围 = NSMakeRange(0, 0);
            id 属性值；

            长度 = [段落长度]；
            // 获取字体属性
            attributeValue = [段落属性：NSFontAttributeName atIndex：NSMaxRange（有效范围）有效范围：&有效范围]；
            NSLog(@"字体为 %@", [attributeValue fontName]);
            NSLog(@"font-size is %f", [[[attributeValue fontDescriptor] objectForKey:NSFontSizeAttribute] floatValue]);
            NSMutableString *htmlString = [NSMutableString stringWithFormat:@"", [attributeValue fontName],
                                           [[[attributeValue fontDescriptor] objectForKey:NSFontSizeAttribute] floatValue]];

            [htmlString appendString:[段落字符串]];
            [htmlString 附加字符串：@”"];
            NSLog(@"htmlString 是 %@", htmlString);
            [段落HTMLStrings addObject:htmlString];
            htmlString = 无；

        }

        NSMutableString *htmlStringOfGraphToReturn = [NSMutableString stringWithString:@""];
        NSString *stringToAdd;
        NSEnumerator *stringEnumerator;
        stringEnumerator = [paragraphHTMLStrings objectEnumerator];

        while (stringToAdd = [stringEnumerator nextObject])
        {
            [htmlStringOfGraphToReturn appendString:stringToAdd];
        }
        [htmlStringOfGraphToReturn appendString:@""];

        [dict setObject:htmlStringOfGraphToReturn forKey:@"html"];

        // 测试部分
        CSSSetGenerator *generator = [[CSSSetGenerator alloc] init];

        NSMutableString *string = [生成器输出CSSStyleContent:self];
        NSLog(@"%@", 字符串);
        返回字典；
    }

            回答 #1

赞同：0

时间：2013-01-10T02:53:58.007

我从 Github 获得了解决方案，有一个名为 DTCoreText 的开放项目。我希望这可能对某人有用。

```

# c# - 用 where 子句覆盖泛型函数

> ID：14179780
> 
> 赞同：1
> 
> 时间：2013-01-06T06:03:56.213
> 
> 标签：c#, .net, generics, overriding

已编辑：重构示例代码以包含一组更相关的对象。

我有一个有趣的情况，我很难找到解决方案。我有一个带有使用泛型的抽象函数的抽象类（请参见下面的示例代码）。在继承类中，我试图重载函数，但我得到了

> 错误 CS0030：无法将类型“Sample.Thingy”转换为“T”（CS0030）

当然，这不是我的真实代码，但这段代码产生的结果与我得到的结果相同。如果我尝试将返回值转换为 (T)，我会收到类似的错误。如果我尝试添加`where T : BaseThingy`or `where T : Thingy`，那么我会得到

> 错误 CS0460：“Sample.Container.GetThingy(Guid)”：无法为覆盖和显式接口实现方法指定约束 (CS0460)

```
namespace Sample {
    // The abstract base class for thingies
    public abstract class BaseThingy {
        private Guid m_ID;
        private String m_Name;

        public BaseThingy( ) {
            m_ID = Guid.NewGuid( );
        }

        public BaseThingy( Guid id ) {
            m_ID = id;
        }

        public Guid ID {
            get {
                return m_ID;
            }
        }

        public String Name {
            get {
                return m_Name;
            }
            set {
                m_Name = value;
            }
        }
    }

    // The abstract base class for containers
    public abstract class BaseContainer {
        public abstract T GetThingy<T>(Guid id) where T : BaseThingy;
    }

    // Inherits from BaseThingy
    public class RedThingy : BaseThingy {
        private DateTime m_Created;

        public RedThingy( ) : base( ) {
            m_Created = DateTime.Now;
        }

        public RedThingy( Guid id ) : base( id ) {
            m_Created = DateTime.Now;
        }

        public DateTime Created {
            get {
                return m_Created;
            }
        }
    }

    // Inherits from BaseThingy
    public class BlueThingy : BaseThingy {
        public BlueThingy( ) : base( ) {
        }

        public BlueThingy( Guid id ) : base( id ) {
        }
    }

    // Inherits from BaseContainer
    public class Container : BaseContainer {
        private System.Collections.Generic.Dictionary<Guid, RedThingy> m_RedThingies;
        private System.Collections.Generic.Dictionary<Guid, BlueThingy> m_BlueThingies;

        public Container( ) {
            m_Thingies = new System.Collections.Generic.Dictionary<Guid, BaseThingy>();
        }

        public override T GetThingy<T>( Guid id ) where T : BaseThingy {
            if( typeof( T ) == typeof( RedThingy ) {
                if( m_RedThingies.ContainsKey( id ) ) {
                    return m_RedThingies[ id ];
                } else {
                    return null;
                }
            } else if( typeof( T ) == typeof( BlueThingy ) ) {
                if( m_BlueThingies.ContainsKey( id ) ) {
                    return m_BlueThingies[ id ];
                } else {
                    return null;
                }
            } else {
                return null;
            }
        }

        public void AddThing( RedThingy item ) {
            if( item != null && !m_RedThingies.ContainsKey( item.ID ) ) {
                m_RedThingies.Add( item.ID, item );
            }
        }

        public void AddThing( BlueThingy item ) {
            if( item != null && !m_BlueThingies.ContainsKey( item.ID ) ) {
                m_BlueThingies.Add( item.ID, item );
            }
        }
    }
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-06T06:17:31.490

答案是您传递的类型必须继承自，`BaseThingy`但这并不意味着您可以`Thingy`对其进行强制转换。让我举一个例子来简化它：

```
abstract class BaseThingy
{
}

class Thingy1 : BaseThingy
{
    public void DoSomething()
    {
    }
}

class Thingy2 : BaseThingy
{
    public void DoSomethingElse()
    {
    }
}

class Foo
{
    static T GetItem<T>() where T : BaseThingy
    {
        //Won't compile, Thingy1, while deriving from BaseThingy
        //Could not be the same type of T, derive from it or have
        //An implicit cast operator to T.
        return new Thingy1();
    }

    static void Bar()
    {
        var result = GetItem<Thingy2>();
        //But your method is returning a Thingy1,
        //which doesn't have the following method
        result.DoSomethingElse();
    }
} 
```

`Bar()`将期望`result`是类型`Thingy2`，但`GetItem`正试图返回一个`Thingy1`.

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-06T06:22:59.967

问题是，由于您已经在基类中设置了约束，您不需要在派生类中再次指定它们。这就是它给出该错误的原因。

除了它产生这个错误，我不明白你有什么问题。只是不要在继承的类中指定约束。

为了解决转换问题，您必须对其进行转换：

```
public T Get<T>() where T : Thingy
{
    RedThingy thingy = GetRedThingy();
    return (T)thingy;
} 
```

如果编译器不允许您这样做（我现在没有打开 Visual Studio），您可以先将其转换为 object，然后再转换为 T（这是一种解决方法）。

```
public T Get<T>() where T : Thingy
{
    RedThingy thingy = GetRedThingy();
    return (T)((object)thingy);
} 
```

希望能帮助到你。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-06T06:29:12.950

最快的解决方法是将基本实现约束更改为 Thingy 而不是 BaseThingy。如果这对您的应用程序没有意义，那么您很可能只是没有使用最佳设计模式来解决您的问题。在后一种情况下，如果可以在高层次上对您的问题进行更多解释，那么我相信我们可以为您提供一些其他关于如何解决问题的建议。

# python - 使用 PyCrypto AES 进行 Python 加密

> ID：14179784
> 
> 赞同：16
> 
> 时间：2013-01-06T06:05:03.770
> 
> 标签：python, pycrypto

我今天才发现 pycrypto，我一直在研究我的 AES 加密课程。不幸的是，它只奏效了一半。self.h.md5 以十六进制格式输出 md5 哈希，为 32 字节。这是输出。它似乎解密了消息，但它在解密后放置了随机字符，在这种情况下 \n\n\n ...我认为我对 self.data 的块大小有问题，有人知道如何解决这个问题吗？

> Jans-MacBook-Pro:test2 jan$ ../../bin/python3 data.py b'RLfGmn5jf5WTJphnmW0hXG7IaIYcCRpjaTTqwXR6yiJCUytnDib+GQYlFORm+jIctest 1 2 3 4 5 endtest\n\n\n\n\n\n\n\n \n\n'

```
from Crypto.Cipher import AES
from base64 import b64encode, b64decode
from os import urandom

class Encryption():
    def __init__(self):
        self.h = Hash()

    def values(self, data, key):
        self.data = data
        self.key = key
        self.mode = AES.MODE_CBC
        self.iv = urandom(16)
        if not self.key:
            self.key = Cfg_Encrypt_Key
        self.key = self.h.md5(self.key, True)

    def encrypt(self, data, key):
        self.values(data, key)
        return b64encode(self.iv + AES.new(self.key, self.mode, self.iv).encrypt(self.data))

    def decrypt(self, data, key):
        self.values(data, key)
        self.iv = b64decode(self.data)[:16]
        return AES.new(self.key, self.mode, self.iv).decrypt(b64decode(self.data)[16:]) 
```

* * *

## 回答 #1

> 赞同：79
> 
> 时间：2013-01-07T22:36:51.750

老实说，字符*“\n\n\n\n\n\n\n\n\n\n”*在我看来并不那么随意。;-)

您在 CBC 模式下使用 AES。这要求明文和密文的长度始终是 16 字节的倍数。`data`使用您显示的代码，您实际上应该看到在传递给`encrypt()`不满足此类条件时引发的异常。看起来您添加了足够的换行符（*'\n'*到输入的任何内容，直到明文恰好对齐。

除此之外，还有两种常见的方法来解决对齐问题：

1.  从 CBC ( `AES.MODE_CBC`) 切换到 CFB ( `AES.MODE_CFB`)。使用 PyCrypto使用的默认值`segment_size`，您将不会对明文和密文长度有任何限制。

2.  保留 CBC 并使用 PKCS#7 之类的填充方案，即：

    *   在加密字节的明文之前`X`，在后面附加您需要达到下一个 16 字节边界的字节数。所有填充字节都具有相同的值：您要添加的字节数：

        ```
        length = 16 - (len(data) % 16)
        data += bytes([length])*length 
        ```

        那是 Python 3 的风格。在 Python 2 中，您将拥有：

        ```
        length = 16 - (len(data) % 16)
        data += chr(length)*length 
        ```

    *   解密后，从明文后面删除填充指示的字节数：

        ```
        data = data[:-data[-1]] 
        ```

尽管我理解在您的情况下这只是一个课堂练习，但我想指出，在没有任何形式的身份验证（例如 MAC）的情况下发送数据是不安全的。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2018-06-08T07:32:00.723

只要您记住初始有效负载的长度，就可以使用修复字符，因此您不会“丢弃”有用的结束字节。试试这个：

```
import base64

from Crypto.Cipher import AES

def encrypt(payload, salt, key):
    return AES.new(key, AES.MODE_CBC, salt).encrypt(r_pad(payload))

def decrypt(payload, salt, key, length):
    return AES.new(key, AES.MODE_CBC, salt).decrypt(payload)[:length]

def r_pad(payload, block_size=16):
    length = block_size - (len(payload) % block_size)
    return payload + chr(length) * length

print(decrypt(encrypt("some cyphertext", "b" * 16, "b" * 16), "b" * 16, "b" * 16, len("some cyphertext"))) 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2014-07-28T13:07:19.880

```
from hashlib import md5
from Crypto.Cipher import AES
from Crypto import Random
import base64

def derive_key_and_iv(password, salt, key_length, iv_length):
    d = d_i = ''
    while len(d) < key_length + iv_length:
        d_i = md5(d_i + password + salt).digest()
        d += d_i
    return d[:key_length], d[key_length:key_length+iv_length]

def encrypt(in_file, out_file, password, key_length=32):
    bs = AES.block_size
    salt = Random.new().read(bs - len('Salted__'))
    key, iv = derive_key_and_iv(password, salt, key_length, bs)
    cipher = AES.new(key, AES.MODE_CBC, iv)
    #print in_file
    in_file = file(in_file, 'rb')
    out_file = file(out_file, 'wb')
    out_file.write('Salted__' + salt)
    finished = False
    while not finished:
        chunk = in_file.read(1024 * bs)
        if len(chunk) == 0 or len(chunk) % bs != 0:
            padding_length = bs - (len(chunk) % bs)
            chunk += padding_length * chr(padding_length)
            finished = True
        out_file.write(cipher.encrypt(chunk))
    in_file.close()
    out_file.close()

def decrypt(in_file, out_file, password, key_length=32):
    bs = AES.block_size

    in_file = file(in_file, 'rb')
    out_file = file(out_file, 'wb')
    salt = in_file.read(bs)[len('Salted__'):]
    key, iv = derive_key_and_iv(password, salt, key_length, bs)
    cipher = AES.new(key, AES.MODE_CBC, iv)
    next_chunk = ''
    finished = False
    while not finished:
        chunk, next_chunk = next_chunk, cipher.decrypt(in_file.read(1024 * bs))
        if len(next_chunk) == 0:
            padding_length = ord(chunk[-1])
            if padding_length < 1 or padding_length > bs:
               raise ValueError("bad decrypt pad (%d)" % padding_length)
            # all the pad-bytes must be the same
            if chunk[-padding_length:] != (padding_length * chr(padding_length)):
               # this is similar to the bad decrypt:evp_enc.c from openssl program
               raise ValueError("bad decrypt")
            chunk = chunk[:-padding_length]
            finished = True
        out_file.write(chunk)    
    in_file.close()
    out_file.close()

def encode(in_file, out_file):
    in_file = file(in_file, 'rb')
    out_file = file(out_file, 'wb')
    data = in_file.read()
    out_file.write(base64.b64encode(data))    
    in_file.close()
    out_file.close()

def decode(in_file, out_file):
    in_file = file(in_file, 'rb')
    out_file = file(out_file, 'wb')
    data = in_file.read()
    out_file.write(base64.b64decode(data))    
    in_file.close()
    out_file.close() 
```

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2013-01-06T09:07:02.147

`AES.new().encrypt()`并将`.decrypt()`长度为 16 的倍数的输入和输出字符串作为输入和输出字符串。您必须以一种或另一种方式修复它。例如，您可以在开始时存储实际长度，并使用它来截断解密的字符串。

另请注意，虽然它是 AES 的唯一限制，但其他模块（尤其是 in `Crypto.PublicKey`）具有来自其数学实现的额外限制，并且（在我看来）最终用户不应该看到，但确实如此。例如`Crypto.PublicKey.ElGamal`，将加密任何短字符串，但如果它以空字符开头，它们会在解密时丢失。

# asp.net - 搜索框组合两列（搜索页面）ASP.NET

> ID：14179790
> 
> 赞同：1
> 
> 时间：2013-01-06T06:05:48.573
> 
> 标签：asp.net, sql, ms-access, textbox, expression

我的 search.aspx 页面（搜索页面）遇到了一些问题

这是我的代码：

```
<asp:AccessDataSource runat="server" ID="AccessDataSource1" DataFile="_private/records.mdb" SelectCommand="SELECT * FROM [DriversRecords] WHERE ([LastName] LIKE '%' + ? + '%') OR ([FirstName] LIKE '%' + ? + '%')">
   <SelectParameters>
   <asp:formparameter FormField="LastName1" Name="FirstName" Type="String" />
   <asp:formparameter FormField="LastName1" Name="LastName" Type="String" />
   </SelectParameters>
</asp:AccessDataSource> 
```

当我在文本框中输入名字时......当我输入姓氏时，它的工作方式相同。

但是当我试图**将**它们组合在一起时，我将在文本框中输入：“George Santos”，结果是“No data found”？？

合并两列返回null？？怎么做？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-06T06:11:41.473

试试这个 SQL：

```
SELECT * FROM [DriversRecords] WHERE [FirstName]+' '+[LastName] LIKE '%' + ? + '%' 
```

连接 2 列（`FirstName`+`LastName`之间有一个空格`' '`）然后搜索全名将为您提供`George Santos`数据库中提供的匹配项。:)

如果您想允许多种搜索方式，您也可以这样做：

```
SELECT * FROM [DriversRecords] WHERE
([LastName] LIKE '%' + ? + '%') OR
([FirstName] LIKE '%' + ? + '%') OR
([FirstName]+' '+[LastName] LIKE '%' + ? + '%') 
```

这是一个`SQLFiddle`测试：[http ://sqlfiddle.com/#!6/ae63a/6](http://sqlfiddle.com/#!6/ae63a/6)

# jquery - 如何知道元素是父元素的子元素

> ID：14179796
> 
> 赞同：2
> 
> 时间：2013-01-06T06:07:00.947
> 
> 标签：jquery

```
<ul id="ulel">
  <li id="liel">
     <a id="ael"></a>
  </li>
  ...
</ul> 
```

我怎么知道jquery中是否`#ael`存在锚？`#ulel`

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-06T06:11:43.327

如果要查找 child 是否存在于 parent ：

```
if ($('#ulel').find('#ael').length > 0) {
     //do something
} 
```

或者反过来，如果你想检查一个孩子是否有父母：

```
if ($('#ael').parents('#ulel').length > 0) {
    //do something
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-06T06:13:54.133

尝试以下操作：

```
if ( $('#ael', '#ulel').length ) {
  // #ael exists in #ulel
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-06T06:09:41.397

我喜欢使用`.find(...)`jQuery 函数。[您可以在文档](http://api.jquery.com/find/)中找到更多信息。

如果你想在 "ulel" 中选择 id "ael"，你可以这样做：

```
myAel = $("#ulel").find("#ael");
// Verify if myAel isn't null
if(myAel) {
  alert("My id exists. :)");
} 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-01-06T06:11:20.547

在这种情况下：

```
if ($("#ael").parents('#ulel').length) {
    alert('Has parent "ulel"');
} 
```

请参阅[.parents()](http://api.jquery.com/parents/) jQuery ...

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2013-01-06T06:33:05.637

如果识别任何级别的孩子，我们可以使用`jquery find()`方法

参考[http://api.jquery.com/find/](http://api.jquery.com/find/)

```
<!DOCTYPE html>
<html>
<head>
    <script src="http://code.jquery.com/jquery-latest.js"></script>
</head>
<body>
    <ul id="ulel">
  <li id="liel">
     <a id="ael"> tst</a>
  </li>
</ul>

<script>
 if( $('#ulel').find('#ael')) {
  $('#ael').css('color','green');
  }
</script>

</body>
</html> 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2013-01-06T06:10:18.787

假设您的起点是孩子，那么：

```
if ($("#ael").closest("#ulel")[0]) {
    // Yes, it's in there
} 
```

[`closest`](http://api.jquery.com/closest)在元素的层次结构中找到与选择器匹配的第一个元素，从您调用它的那个开始，然后查看其父级，然后查看其父级的父级，等等。

最后的`[0]`检查是查看生成的 jQuery 集是否为空。如果是，则将没有元素 at `[0]`，因此条件为假。如果有，则为`[0]`第一个元素，条件为真。您还可以检查`.length`：

```
if ($("#ael").closest("#ulel").length) {
    // Yes, it's in there
} 
```

甚至

```
if ($("#ael").closest("#ulel").length > 0) {
    // Yes, it's in there
} 
```

# vba - 在列表框中输入掩码

> ID：14179797
> 
> 赞同：1
> 
> 时间：2013-01-06T06:07:16.637
> 
> 标签：vba, ms-access, ms-access-2010

我在 Microsoft Access 2010 中有一个列表框，如何使第 5 列有输入掩码？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-06T09:30:56.840

列表框不接受数据输入，尤其是在第 5 列中，因此即使您有输入掩码，它对您也没有用处。如果您希望列具有特定格式，您可以使用以下格式：

```
 Row Source: SELECT f1,f2,f3,f4, Format(f5,"\Str00.00") 
```

有关格式的更多信息：http: [//office.microsoft.com/en-ie/access-help/format-function-HA001228839.aspx](http://office.microsoft.com/en-ie/access-help/format-function-HA001228839.aspx)

# c - 显示 html 并将数据从 html 传递到 mongoose 服务器

> ID：14179799
> 
> 赞同：2
> 
> 时间：2013-01-06T06:07:35.900
> 
> 标签：c, mongoose-web-server

我想通过 mongoose Web 服务器显示 html 页面，但是当我尝试使用 mg_send_file(conn,filename) css 加载页面并且 js 文件没有被加载时，有没有其他方法可以通过 mongoose 服务器加载 html 并传递输入的数据在 html 中返回到网络服务器。

# compiler-construction - 在 Makefile 中设置编译器名称

> ID：14179809
> 
> 赞同：3
> 
> 时间：2013-01-06T06:10:24.903
> 
> 标签：compiler-construction, makefile, icc

我有一个 Makefile 假设可以在多个主机上编译我的应用程序，其中一些内置了 intel 编译器（icpc），而另一些只有 g++。我希望 makefile 自动检测 icpc 的可用性，如果可用，则使用英特尔编译器编译应用程序，否则只需使用 g++ 编译它。

如何更改 Makefile 以自动检测 icpc 编译器的可用性？

这是我的尝试，根本没有用

```
ERR = $(shell icpc 2>/dev/null ; echo $? )
ifeq "$(ERR)" "127"
    CXX = g++
else
    CXX = icpc
endif 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-06T15:27:11.313

您可以改为[`which`](http://linux.die.net/man/1/which)用于检测。`icpc`也更好地检查`0`而不是`127`，因为从一个系统到另一个系统可能存在差异

```
ERR = $(shell which icpc >/dev/null; echo $$?)
ifeq "$(ERR)" "0"
    CXX = icpc
else
    CXX = g++
endif

all:
    echo $(CXX) 
```

# javascript - 用 JS 控制 CSS 动画？

> ID：14179811
> 
> 赞同：2
> 
> 时间：2013-01-06T06:10:43.730
> 
> 标签：javascript, css, css-animations

假设我有以下 CSS 动画：

```
@animation experiencebar {
    from {background:blue;width:0}
    80% {background:blue;width:100%}
    90% {background:yellow;opacity:1}
    to {opacity:0}
} 
```

在英语中，条形从空变为蓝色，然后逐渐变为黄色，然后逐渐消失。

有什么办法可以说“将此元素设置为动画的 50%”？（本例中，背景为蓝色，宽度为 62.5%）

如果是这样，是否有任何方法可以转换它，例如当获得经验时我可以将其转换为 70% 动画？更进一步，我可以将位置设置为 120% 以让动画填充条形图，使其淡出，然后似乎为下一个级别开始一个新条形图吗？

或者这对于 CSS 过渡/动画来说是否过于牵强，应该在 JavaScript 中完成？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-06T06:26:11.960

不幸的是，没有办法用你提到的方式直接操纵 CSS 过渡。您可以设置具有不同动画的不同类，并通过该`.setAttribute("class","classname")`方法简单地切换类。此外，您可以在 JavaScript 中操作特定属性，但这需要您将其更改回来；这比轮班要优雅得多。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-06T06:18:48.777

目前无法从 javascript 访问动画，但我认为有一个解决此问题的方法。充分计算和使用过渡。您可以拥有具有不同转换属性的不同类，并且在 javascript 中您可以应用您想要的类。此方法将从 javascript 显示您所需的动画。

# r - NextMethod 中的错误（“[<-”）：下标超出范围

> ID：14179813
> 
> 赞同：1
> 
> 时间：2013-01-06T06:11:01.580
> 
> 标签：r

我有一个加载到 R 中的动物园类数据集，我正在尝试运行一个`for`循环。但我一直遇到错误

> NextMethod("[<-") 中的错误：下标越界。

循环非常简单

```
startobs=5
for (i in startobs:(NROW(data)-startobs)) {
  data[startobs+i,"dummy"]=startobs+i

} 
```

我认为问题出在`startobs+i`. R 似乎不喜欢在遍历每个元素时将循环 ( `i`)的索引放在 中。`data[i,]`我究竟做错了什么？

* * *

数据结构如下

```
>data

     obs     date   weight  dummy
      1   2010-10-04 52495   NA 
      2   2010-10-01 53000   NA 
      3   2010-09-30 52916   NA 
      4   2010-09-29 52785   NA 
      5   2010-09-28 53348   NA 
      6   2010-09-27 52885   NA 
      7   2010-09-24 52174   NA 
      8   2010-09-23 51461   NA 
      9   2010-09-22 51286   NA 
      10  2010-09-21 50968   NA 
      11  2010-09-20 49250   NA 
```

和

```
>dput(head(data))
structure(c(100, 101.01, 110.75, 111.24, 104.96, 104.95, 104.06, 
109.08, 113.48, 111.6, 108, 107.95, 95.96, 100.5, 109.05, 103.57, 
103.88, 104.66, 100.34, 108.31, 109.4, 104.87, 106, 107.91, 22351900, 
11428600, 9137200, 7631300, 4598900, 3551000, 100.34, 108.31, 
109.4, 104.87, 106, 107.91, NA, NA, NA, NA, NA, NA), .Dim = 6:7, .Dimnames = list(
    NULL, c("weight", "height", "BMI", "Age", "Age2", "Intr", 
    "Chol")), index = structure(c(12649, 12650, 12653, 12654, 
12655, 12656), class = "Date"), class = "zoo") 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-06T06:46:23.437

你的意思是：

```
for (i in 1:NROW(data)) {
    data[i, "dummy"] = i
} 
```

但是，无论您在 for 循环中尝试做什么，使用矢量化解决方案（例如使用`ifelse`.

# ruby - 执行 ruby 文件而不在终端上调用“ruby”

> ID：14179814
> 
> 赞同：1
> 
> 时间：2013-01-06T06:11:01.673
> 
> 标签：ruby, bash

`todo`我在第一行以这个 shebang命名的文件上有一个应用程序： `#!/usr/bin/env ruby`. 在终端上，我希望能够运行这个文件调用`todo new "Some Task"`而不是`ruby todo new "Some task"`，但我不能让它工作；我总是得到一个`bash: todo: command not found`. 我究竟做错了什么？

我在 MacOsX 10.7 上

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-06T08:39:49.160

从当前目录执行文件：

```
./todo new "Some Task" 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-06T06:23:28.050

首先，做`chmod +x todo`.

其次，通过将文件移动到路径中已经存在的导向器或编辑路径，将文件放入路径中。

要查看您现在的路径，请执行`echo $PATH`. 您可以将文件移动到列出的任何目录中。

要编辑您的路径，请打开 ~/.profile 并添加该行`PATH=$PATH:/directory/of/todo`

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-01-06T06:14:02.367

你需要给它适当的权利：`chmod +x todo`. 并且该文件必须位于`$PATH`.

# c++ - Glowcode 内存使用量与 Window 任务管理器不同

> ID：14179815
> 
> 赞同：0
> 
> 时间：2013-01-06T06:11:02.300
> 
> 标签：c++, memory, memory-leaks, glowcode

我正在尝试使用 Glowcode 来跟踪我们应用程序中的 C++ 内存泄漏问题。

但首先，glowcode 无法跟踪从我们的应用程序分配的所有内存。当 TaskManager 显示我们正在使用 700MB 时，它只跟踪 300MB 内存使用情况；

我怀疑丢失的内存是由某些 3rd-party dll 分配的，但很难找到它。

您对此有任何类似的问题或任何想法吗？提前致谢。

编辑：哇！VMMap 是一个很棒的工具，它的时间线功能非常适合我。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-29T02:46:19.970

好吧，VMMap 似乎非常适合这项工作，时间线功能确实是一个杀手级功能。我已经解决了我们的 memleak 问题。谢谢@sergmat！

至于 Glowcode，它看起来只跟踪堆分配，而不是 VirtualAlloc-ed 内存（在 VMMap 中显示为“私有数据”），这就是为什么这些数字与任务管理器不匹配的原因。

为了跟踪堆栈跟踪，与 Glowcode 相比，VMMap 为自己占用了相当多的内存。但是对于一台8GB内存的机器来说，这不会是什么大问题。

# python - python中的JOptionPane等价物？

> ID：14179821
> 
> 赞同：0
> 
> 时间：2013-01-06T06:12:25.227
> 
> 标签：python, graphics

python中有没有类似于JOptionPane的东西？如，它是否有内置的图形库，如果有，你能否展示一下如何在 Python 中做类似的事情？

在 Java 中，您可以简单地执行以下操作：

```
import java.swing.*;
JOptionPane.showMessageDialog(null, "Hello, World"); 
```

此外，javaScript 有类似的东西：

```
alert("Hello, World"); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-06T06:25:44.043

这实际上取决于您使用的 GUI 框架。

*   PyQt：

```
QtGui.QMessageBox.question(self, 
         'Message',
         "Are you sure to quit?",
         QtGui.QMessageBox.Yes, 
         QtGui.QMessageBox.No) 
```

*   wxPython：

```
wx.MessageBox('Download completed',
       'Info', 
        wx.OK | wx.ICON_INFORMATION) 
```

*   [tkInter 示例](http://effbot.org/tkinterbook/tkinter-standard-dialogs.htm)（tkInter 是 python 中的默认 GUI 库）

# f# - 让 F# 中的绑定和构造函数

> ID：14179822
> 
> 赞同：0
> 
> 时间：2013-01-06T06:12:28.273
> 
> 标签：f#, functional-programming

我在 F# 中定义秒表：

```
open System.Diagnostics

let UptimeStopwatch = Stopwatch.StartNew() 
```

我每 3 秒打印一次

```
printfn "%A" UptimeStopwatch.Elapsed 
```

每次我得到“00：00：00.0003195”或类似的小东西。每次我引用 UptimeStopwatch 时，F# 都会调用构造函数吗？如果是这样，我如何绕过这个广告来达到预期的效果？这是函数式编程和命令式编程的混乱混合。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-01-06T06:35:55.247

F# 似乎可以解释如下语句

```
let MyFunction = DoSomething() 
```

和

```
let MyFunction() = DoSomething() 
```

不同。第一个将 的返回值绑定`DoSomething()`到变量`MyFunction`，第二个将操作绑定`DoSomething()`到函数`MyFunction()`。

我的使用`UptimeStopwatch`是正确的，错误在我的实现中的其他地方。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-06T11:08:56.427

我看到您已经在代码的其他地方发现了一个问题，但是您问题中的两行仍然需要一些时间来运行，而且有趣的是，您可以使开销更小。

当我在您的示例中运行这两行时，它会打印一个大约 0.0002142 的值。您可以通过使用 存储经过的时间来使其更小`let`，因为构造`printf`格式字符串的表示（第一个参数）会产生一些开销：

```
let UptimeStopwatch = Stopwatch.StartNew()
let elapsed = UptimeStopwatch.Elapsed
printfn "%A" elapsed 
```

这平均打印一个大约 0.0000878 的数字（小两倍）。如果你使用`Console`，结果是相似的（因为`Elapsed`属性是在`Console`调用之前获得的，在此期间不需要做任何其他事情）：

```
let UptimeStopwatch = Stopwatch.StartNew()
System.Console.WriteLine(UptimeStopwatch.Elapsed) 
```

# php - php 中的 imap 功能

> ID：14179823
> 
> 赞同：0
> 
> 时间：2013-01-06T06:12:57.300
> 
> 标签：php, imap

> **可能重复：**
> [PHP imap 问题](https://stackoverflow.com/questions/14158961/php-imap-problems)

为什么有些字符在显示时会乱七八糟；

这是我的代码

```
$inbox = imap_open($hostname,$username,$password) or die('Cannot connect to Gmail: ' . imap_last_error());

$emails = imap_search($inbox,'TEXT "$variable"');

if($emails) {

  $output = '';

  rsort($emails);

  foreach($emails as $email_number) {

    $overview = imap_fetch_overview($inbox,$email_number,0);
    $message = imap_fetchbody($inbox,$email_number,2);

    $output.= '<div class="body">'.$message.'</div>';
  }

  echo $output;
} 
```

电子邮件的输出为 =3 并编辑了其他奇怪的字符文件，请参阅给出的答案，

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-06T07:09:50.293

答案是使用这个函数

imap_qprint

# asp.net - 通过asp.net控件修改css显示

> ID：14179825
> 
> 赞同：1
> 
> 时间：2013-01-06T06:13:17.067
> 
> 标签：asp.net, css, vb.net-2010

好的，所以我试图获得一个下拉菜单来取消隐藏在选择特定索引时隐藏的一些 div。我知道需要更改内联样式，但不知道如何使用背面控件来执行它。

```
<%@ Page Title="" Language="vb" AutoEventWireup="false" MasterPageFile="~/Site.Master"
CodeBehind="Estimation.aspx.vb" Inherits="CIS212FinalProjectASPportion.WebForm1" %>
<body Id="mainBody" runat="server">
<asp:Content ID="Content1" ContentPlaceHolderID="HeadContent" runat="server">
</asp:Content>
<asp:Content ID="Content2" ContentPlaceHolderID="MainContent" runat="server">
<div id="EstimationSelection">
                <asp:DropDownList ID="DropDownList1" runat="server" AutoPostBack="True">
                <asp:ListItem>Select Value</asp:ListItem>
                <asp:ListItem>Lawn Care</asp:ListItem>
                <asp:ListItem>Plowing</asp:ListItem>
                <asp:ListItem>Both</asp:ListItem>
            </asp:DropDownList>
            <br />
</div>

<div id="UserInfo" style="display: none;">
    <asp:Label ID="firstName" runat="server" Text="Label">First Name &nbsp;</asp:Label>
    <input id="Text1" type="text" />
    <asp:Label ID="lastName" runat="server" Text="Label">Last Name &nbsp;</asp:Label>
    <input id="Text2" type="text" /> <br />
    <asp:Label ID="address" runat="server" Text="Label">Address       &nbsp&nbsp;&nbsp;&nbsp;&nbsp;</asp:Label>
    <input id="Text3" type="text" />
    <asp:Label ID="city" runat="server" Text="Label">City &nbsp;</asp:Label>
    <input id="Text4" type="text" /><br />
    <asp:Label ID="state" runat="server" Text="Label">State&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</asp:Label>
    <input id="Text5" type="text" />
    <asp:Label ID="zipCode" runat="server" Text="Label">Zip Code &nbsp;</asp:Label>
    <input id="Text6" type="text" /> <br />
    <asp:Label ID="emailAddress" runat="server" Text="Label">Email Address &nbsp;</asp:Label>
    <input id="Text7" type="text" />
</div>
</body>
</asp:Content> 
```

然后现在对于我拥有的背面代码

```
Protected Sub DropDownList1_SelectedIndexChanged(sender As Object, e As EventArgs) Handles DropDownList1.SelectedIndexChanged
    If DropDownList1.SelectedIndex(1) Then
         Me.Body.Div.UserInfo.Style.add("display", "block")
        ' set div id="LawnCare" style="display: block;"
    End If
End Sub 
```

Option Explicit 和 Strict 都打开。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-10T01:04:25.907

试试这样…………

```
Protected Sub DropDownList1_SelectedIndexChanged(sender As Object, e As EventArgs) Handles DropDownList1.SelectedIndexChanged
  Dim oPanel As Panel
  oPanel = Me.FindControl("UserInfo")
  If DropDownList1.SelectedIndex = 1 Then
    oPanel.Visible = True
  Else
    oPanel.Visible = False
  End If
  oPanel = Nothing
End Sub

<div id="EstimationSelection">
  <asp:DropDownList ID="DropDownList1" runat="server" AutoPostBack="True">
    <asp:ListItem>Select Value</asp:ListItem>
    <asp:ListItem>Lawn Care</asp:ListItem>
    <asp:ListItem>Plowing</asp:ListItem>
    <asp:ListItem>Both</asp:ListItem>
  </asp:DropDownList>
  <br />
</div>

<asp:Panel id="UserInfo" Visible="false" runat="server">
  <asp:Label ID="firstName" runat="server" Text="Label">First Name</asp:Label>
    <input id="Text1" type="text" />
  <asp:Label ID="lastName" runat="server" Text="Label">Last Name</asp:Label>
    <input id="Text2" type="text" /> <br />
  <asp:Label ID="address" runat="server" Text="Label">Address</asp:Label>
    <input id="Text3" type="text" />
  <asp:Label ID="city" runat="server" Text="Label">City</asp:Label>
    <input id="Text4" type="text" /><br />
  <asp:Label ID="state" runat="server" Text="Label">State</asp:Label>
    <input id="Text5" type="text" />
  <asp:Label ID="zipCode" runat="server" Text="Label">Zip Code</asp:Label>
    <input id="Text6" type="text" /> <br />
  <asp:Label ID="emailAddress" runat="server" Text="Label">Email Address</asp:Label>
    <input id="Text7" type="text" />
</asp:Panel> 
```

基本上我将您的客户端 DIV 更改为服务器端 PANEL

# mysql - MySql 语法错误

> ID：14179829
> 
> 赞同：0
> 
> 时间：2013-01-06T06:13:38.507
> 
> 标签：mysql, sql, stored-procedures

我在以下存储过程中有错误语法错误：

```
DROP PROCEDURE IF EXISTS `SP_IncDecReferenceCount`;
CREATE DEFINER = `root`@`localhost` PROCEDURE `SP_IncDecReferenceCount`(pReferenceID int)
BEGIN
IF EXISTS(SELECT * from filesrefrences where filesrefrences.ReferenceID= pReferenceID and filesrefrences.RefrenceCount>1) then 
update filesrefrences
set 
    filesrefrences.RefrenceCount= filesrefrences.RefrenceCount-1
where 
        filesrefrences.ReferenceID= pReferenceID;
SELECT pReferenceID;
ELSE IF EXISTS(SELECT * from filesrefrences where filesrefrences.ReferenceID= pReferenceID) then 
DELETE from filesrefrences WHERE filesrefrences.ReferenceID = pReferenceID;
SELECT -77;
ELSE
SELECT -99;
end if ;
END; 
```

错误是：[Err] 1064 - 您的 SQL 语法有错误；检查与您的 MySQL 服务器版本相对应的手册，以在第 8 行的 '' 附近使用正确的语法

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-06T06:17:20.490

你需要改变`DELIMITER`. 例如，

```
DROP PROCEDURE IF EXISTS `SP_IncDecReferenceCount`;

DELIMITER &&

CREATE PROCEDURE `SP_IncDecReferenceCount`(pReferenceID int)
BEGIN
    IF EXISTS(SELECT * from filesrefrences where filesrefrences.ReferenceID= pReferenceID and filesrefrences.RefrenceCount>1) then 
        update filesrefrences
        set 
            filesrefrences.RefrenceCount= filesrefrences.RefrenceCount-1
        where 
                filesrefrences.ReferenceID= pReferenceID;
        SELECT pReferenceID;
    ELSE IF EXISTS(SELECT * from filesrefrences where filesrefrences.ReferenceID= pReferenceID) then 
        DELETE from filesrefrences WHERE filesrefrences.ReferenceID = pReferenceID;
        SELECT -77;
    ELSE
        SELECT -99;
    end if ;
END &&

DELIMITER ; 
```

# ruby - Ruby 全局变量替代

> ID：14179830
> 
> 赞同：-1
> 
> 时间：2013-01-06T06:13:39.460
> 
> 标签：ruby, global-variables

我知道永远不应该使用全局变量，但现在这是我唯一可以开始工作的事情。所以我正在寻找替代品。我想要做的是将类`@array`中的方法传递给方法。我能够做到这一点的唯一方法是使用.`two``New``one``$array`

```
module Test::Abc
  class << self
    def one
      ....
    end

    class New
      def two
        @array=[]
      end
    end
  end
end 
```

这是我为获得所需结果所做的工作...

```
module Test::Abc
  class << self
    def one(array)
      ....
    end
  end

  class New
    def two
      @array=[]
      array=@array
      Test::Abc::one(array)
    end
  end
end 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-13T14:44:53.430

这是我想出的解决方案...

```
module Test::Abc
  class << self
    def one(array)
      ....
    end
  end

  class New
    def two
      @array=[]
      array=@array
      Test::Abc::one(array)
    end
  end
end 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-11-03T22:09:29.183

随着您的回答，这也应该有效（稍作修改）：

```
module Test::Abc
  class << self
    def one(array)
      ....
    end
  end

  class New
    def two
      @array=[]
      Test::Abc::one(@array)
    end
  end
end 
```

# ruby-on-rails-3 - ruby on rails signup_path 不可用 - 遵循 ruby on rails 教程

> ID：14179833
> 
> 赞同：2
> 
> 时间：2013-01-06T06:14:19.247
> 
> 标签：ruby-on-rails-3, railstutorial.org

我正在关注 ruby​​ on rails 教程。坚持获得注册页面集成测试通过。这是错误：

```
Failures:

  1) User signup with valid information should create a user
     Failure/Error: before { visit signup_path }
     NameError:
       undefined local variable or method `signup_path' for #<RSpec::Core::ExampleGroup::Nested_1::Nested_14::Nested_2:0x007fb7a99749e8>
     # ./spec/models/user_spec.rb:127:in `block (3 levels) in <top (required)>'

  2) User signup with invalid information should not create a user
     Failure/Error: before { visit signup_path }
     NameError:
       undefined local variable or method `signup_path' for #<RSpec::Core::ExampleGroup::Nested_1::Nested_14::Nested_1:0x007fb7a9bf84d0>
     # ./spec/models/user_spec.rb:127:in `block (3 levels) in <top (required)>' 
```

测试抱怨路由 signup_path 不存在。这是路由文件：

```
SampleApp::Application.routes.draw do
  # get "users/new"
  resources :users

  # get "static_pages/home"
  root to: 'static_pages#home'

  # get "static_pages/help"
  match '/help', to: 'static_pages#help'

  # get "static_pages/about"
  match '/about', to: 'static_pages#about'
  # automatically creates:
  # about_path => '/about'
  # about_url  => 'http://localhost:3000/about'

  # get "static_pages/contact"
  match '/contact', to: 'static_pages#contact'

  match '/signup', to: 'users#new'
end 
```

和路线命令：

```
 users GET    /users(.:format)          users#index
          POST   /users(.:format)          users#create
 new_user GET    /users/new(.:format)      users#new
edit_user GET    /users/:id/edit(.:format) users#edit
     user GET    /users/:id(.:format)      users#show
          PUT    /users/:id(.:format)      users#update
          DELETE /users/:id(.:format)      users#destroy
     root        /                         static_pages#home
     help        /help(.:format)           static_pages#help
    about        /about(.:format)          static_pages#about
  contact        /contact(.:format)        static_pages#contact
   signup        /signup(.:format)         users#new 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-06T06:24:30.960

我的错。我在模型和请求文件夹中定义了相同的测试。所以我猜models文件夹下的测试无权访问路由。

# kinect - 使用 Kinect 进行视频会议

> ID：14179835
> 
> 赞同：0
> 
> 时间：2013-01-06T06:14:41.463
> 
> 标签：kinect, video-processing, kinect-sdk

我正在做一个关于使用 Kinect 进行视频会议的项目。

但是，我不熟悉 C#。因此，我想问一下是否有书籍或/和网站可以解释如何使用它进行编程。

备注：我用Kinect SDK做的

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-06T06:20:32.420

[这个](http://msdn.microsoft.com/en-us/library/aa288436%28v=vs.71%29.aspx)网站有很好的代码示例。这是一个很好的开始方式。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-06T12:03:07.070

这三本书可能会帮助你：

*   [从这里开始！™ 学习 Microsoft® Visual C#® 2010](http://shop.oreilly.com/product/0790145319210.do)
*   [从这里开始！™ Microsoft® .NE​​T 编程基础](http://shop.oreilly.com/product/0790145330536.do)
*   [从这里开始！™ 学习 Kinect™ API（如果您是 Kinect SDK 的新手，这是一本好书](http://shop.oreilly.com/product/0790145338785.do)

# ios - 仅 iPad 应用肖像？

> ID：14179838
> 
> 赞同：1
> 
> 时间：2013-01-06T06:15:05.503
> 
> 标签：ios, xcode, ipad, uitabbarcontroller, autorotate

我的应用程序完全是为 IOS6 设计的。我为 iPhone 使用一个 xib，为 iPad 使用另一个。我的 AppDelegate 设置了一个 TabBarController，尽管 TabBarController 本身没有类。TabBarController 有两个选项卡项，1 个 NavigationController，1 个 View Controller，每个都有自己的类。我希望 iPad 能够以纵向模式、倒置模式和正常模式运行。在 Xcode 中 Target 的摘要选项卡上，我支持将界面方向设置为 Portrait 和 Portrait Upside Down。

我对 iOS 6 的理解是你只需要把

```
- (NSUInteger)supportedInterfaceOrientations 
```

在类的最高父控制器中，并设置您希望它使用的掩码以及所有要使用的子容器。所以，在导航控制器的根视图控制器中，我放了：

```
- (NSUInteger)supportedInterfaceOrientations {
    return UIInterfaceOrientationMaskPortrait|UIInterfaceOrientationMaskPortraitUpsideDown;
} 
```

在每个子类中，我放了：

```
- (BOOL)shouldAutorotate{

    if( UI_USER_INTERFACE_IDIOM() == UIUserInterfaceIdiomPad )
    {

        return YES;

    }
    else
    {
        return NO;
    }

} 
```

然后我将相同的两种方法放在第二个选项卡中，它只是一个视图控制器类。

我在我的 iPad 上安装了该应用程序，它在纵向模式下运行良好，但当我将其倒置时没有旋转。我退出应用程序并将 iPad 倒置，但当我再次启动应用程序时，它仍然停留在同一个位置。所以，我完全杀死了这个应用程序，并从头开始颠倒了它。启动画面是倒置的，但是当屏幕消失时，应用程序仍然只以纵向模式显示，导致显示倒置。

我错过了什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-06T06:26:43.117

单击 appName 选择目标，然后选择您想要支持的方向。谢谢

![在此处输入图像描述](../Images/36ee9e89823c32fd0f6b1fff74401c03.png)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-06T06:34:07.013

上面的代码非常适合 iOS 6 之前的版本。对于 iOS 6，您必须使用蒙版方向。如果您希望 iPad 中的所有视图旋转或仅旋转一些视图，您可以选择使用上述答案。如果您想对其进行硬编码，请在以下链接中查看我的答案以获取所有蒙版自动旋转的详细代码，或者仅旋转一个视图而让其他视图不旋转。无论如何这里是链接 [iOS 6 supportedInterfaceOrientations 问题](https://stackoverflow.com/questions/13902469/ios-6-supportedinterfaceorientations-issue/13902779#13902779)

上面的答案也为您提供了正确的解决方案，但如果您想学习如何对其进行编码，请查看我在上面链接中的答案。快乐编码。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-06T12:40:00.707

旋转锁定是否启用？（如果您是 iOS 新手，请双击主页按钮，然后向右滑动：它是箭头形状的金属风格小按钮）。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2016-02-02T14:34:31.657

如果您希望仅在纵向模式下运行您的应用程序，1\. 选择您的目标。2\. 在一般 -> 开发信息 -> 设备方向 取消选中所有其他方向。只应选中纵向模式。然后运行您的项目。

# ios - 在 iOS 应用程序中使用 UIDeviceOrientation 的 if/else 语句有问题

> ID：14179844
> 
> 赞同：0
> 
> 时间：2013-01-06T06:16:12.713
> 
> 标签：ios, if-statement, uideviceorientation

我正在编写一个检查设备初始物理位置的应用程序。如果它是平的，则设备应该做一些事情，然后用户应该将设备定位在其他位置，以便应用程序可以做额外的工作。如果应用程序不是平的，那么用户应该定位该位置使其变平，然后继续按照应用程序的要求将设备移动到不同的位置。

无论设备最初是否是平的，或者如果用户必须移动设备以使其变平，这两个动作都应该调用相同的方法，从而导致一系列需要处理的 if/else 语句。以下是检查设备初始物理方向的方法：

```
- (void) accelerometerCheck {

    UIDeviceOrientation orientation = [[UIDevice currentDevice] orientation];

    if (orientation == UIDeviceOrientationFaceUp || orientation == UIDeviceOrientationFaceDown) {

        currentTest++;
        [self orientationChanged:nil];

    }

    else {

        [[UIDevice currentDevice] beginGeneratingDeviceOrientationNotifications];
        [[NSNotificationCenter defaultCenter] addObserver:self
                                                 selector:@selector(orientationChanged:)
                                                     name:UIDeviceOrientationDidChangeNotification
                                                   object:[UIDevice currentDevice]];

    }

} 
```

currentTest 是一组枚举，每次设备的方向改变时，其值都必须改变。每次设备改变位置时，都会执行一次新的测试，总共进行三个测试（平面、横向和纵向测试）。上述代码块调用的方法如下所示：

```
- (void) orientationChanged:(NSNotification *)note {

    if (note == nil) {

        device = [UIDevice currentDevice];
    }

    else
        device = note.object; 
```

由于某种原因，我的代码没有达到下面的“if”语句

```
 if(currentTest == flatTest) {

        if (device.orientation == UIDeviceOrientationFaceUp || device.orientation == UIDeviceOrientationFaceDown) {

            //do something 

        }

        else {

          //do something other stuff

        }

    }
    // If the device is initially in the flat position, then it should
    // call the method "orientationChanged" and come directly to this
    // point in the method...which it is not doing. 
    else if (currentTest == landscapeTest) {

        if (device.orientation == UIDeviceOrientationLandscapeLeft || device.orientation == UIDeviceOrientationLandscapeRight) {

            //do some tests

        }

        else {

        }

        currentTest++;

    }

    else if (currentTest == portraitTest) {

        if (device.orientation == UIDeviceOrientationPortrait || device.orientation == UIDeviceOrientationPortraitUpsideDown) {

            //do more tests

        }

        else {

            return;

        }

        currentTest++;
    }

    else if(currentTest == doneTest) {

       //give test results to the user

        }

        else

            [self testFail];

    }

    else if(currentTest == timeoutTest) {

        //Do something to tell the user the test timed out

    }

} 
```

谁能看到我做错了什么？我的感觉是，我要么没有将 NSNotification 参数的正确值传递给方法“orientationChanged”，要么由于某种原因，我无法将orientationChanged 方法中的前两个 if/else 语句连接到 if/else 语句来吧。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-08T06:16:44.173

尝试在您的每个条件中设置断点，并查看设备方向的每次更改编码如何工作。然后您可以轻松找到故障所在。

# android - zxing 中的 ActivityNotFoundException

> ID：14179848
> 
> 赞同：0
> 
> 时间：2013-01-06T06:17:30.340
> 
> 标签：android, barcode, zxing

我是安卓新手。我正在开发一个应用程序，我必须使用 zxing 来扫描条形码和二维码。在我的应用程序中，我不能使用第三方软件。这意味着我不能在我的应用程序中使用这些代码行

```
 IntentIntegrator integrator = new IntentIntegrator(shopping.this);
            integrator.initiateScan(); 
```

所以，在那种情况下，我在阅读了几个教程后使用了这些行代码。

```
 Intent intent = new Intent("com.google.zxing.client.android.SCAN"); 
              intent.setPackage("com.google.zxing.client.android"); 
             // intent.putExtra("SCAN_MODE", "PRODUCT_MODE");
              intent.putExtra("SCAN_FORMATS", "CODE_39,CODE_93,CODE_128,DATA_MATRIX,ITF,CODABAR,EAN_13,EAN_8,UPC_A,QR_CODE");
              startActivityForResult(intent, 0); 
```

但不幸的是，这对我来说是例外，我的总 log-cat 输出如下 -

```
 01-06 06:00:02.131: D/AndroidRuntime(956): Shutting down VM
                  01-06 06:00:02.131: W/dalvikvm(956): threadid=1: thread exiting with uncaught exception (group=0x40a13300)
                  01-06 06:00:02.161: E/AndroidRuntime(956): FATAL EXCEPTION: main
                  01-06 06:00:02.161: E/AndroidRuntime(956): android.content.ActivityNotFoundException: No Activity found to handle Intent { act=com.google.zxing.client.android.SCAN pkg=com.google.zxing.client.android (has extras) }
                  01-06 06:00:02.161: E/AndroidRuntime(956):    at android.app.Instrumentation.checkStartActivityResult(Instrumentation.java:1545)
                  01-06 06:00:02.161: E/AndroidRuntime(956):    at android.app.Instrumentation.execStartActivity(Instrumentation.java:1416)
                  01-06 06:00:02.161: E/AndroidRuntime(956):    at android.app.Activity.startActivityForResult(Activity.java:3351)
                  01-06 06:00:02.161: E/AndroidRuntime(956):    at android.app.Activity.startActivityForResult(Activity.java:3312)
                  01-06 06:00:02.161: E/AndroidRuntime(956):    at com.google.zxing.shopping.shopping$1.onClick(shopping.java:99)
                  01-06 06:00:02.161: E/AndroidRuntime(956):    at android.view.View.performClick(View.java:4084)
                 01-06 06:00:02.161: E/AndroidRuntime(956):     at android.view.View$PerformClick.run(View.java:16966)
                 01-06 06:00:02.161: E/AndroidRuntime(956):     at android.os.Handler.handleCallback(Handler.java:615)
                  01-06 06:00:02.161: E/AndroidRuntime(956):    at android.os.Handler.dispatchMessage(Handler.java:92)
                 01-06 06:00:02.161: E/AndroidRuntime(956):     at android.os.Looper.loop(Looper.java:137)
                 01-06 06:00:02.161: E/AndroidRuntime(956):     at android.app.ActivityThread.main(ActivityThread.java:4745)
               01-06 06:00:02.161: E/AndroidRuntime(956):   at java.lang.reflect.Method.invokeNative(Native Method)
                 01-06 06:00:02.161: E/AndroidRuntime(956):     at java.lang.reflect.Method.invoke(Method.java:511)
                01-06 06:00:02.161: E/AndroidRuntime(956):  at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:786)
                 01-06 06:00:02.161: E/AndroidRuntime(956):     at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:553)
                01-06 06:00:02.161: E/AndroidRuntime(956):  at dalvik.system.NativeStart.main(Native Method) 
```

但是当我只是替换这条线

```
 Intent intent = new Intent("com.google.zxing.client.android.SCAN"); 
```

到这条线

```
 Intent intent = new Intent(shopping.this, CaptureActivity.class); 
```

我运行我的应用程序，它为我成功运行，但问题是**它只扫描 **QR 码，它不适用于 BAR 码**。为了方便那些想要帮助的人，我将展示我的清单文件

```
 <?xml version="1.0" encoding="UTF-8"?>
<manifest xmlns:android="http://schemas.android.com/apk/res/android"
package="com.xyrad.xybuy"
android:versionCode="1"
android:versionName="1.0" >

<uses-permission android:name="android.permission.CAMERA" />
<uses-permission android:name="android.permission.INTERNET" />
<uses-permission android:name="android.permission.ACCESS_GPS" />
<uses-permission android:name="android.permission.ACCESS_FINE_LOCATION" />
<uses-permission android:name="android.permission.ACCESS_COARSE_LOCATION" />
<uses-permission android:name="android.permission.READ_PHONE_STATE" />
<uses-permission android:name="android.permission.CALL_PHONE" >
</uses-permission>
<uses-permission android:name="android.permission.VIBRATE" />
<uses-permission android:name="android.permission.FLASHLIGHT" />
<uses-permission android:name="android.permission.READ_CONTACTS" />
<uses-permission android:name="com.android.browser.permission.READ_HISTORY_BOOKMARKS" />
<uses-permission android:name="android.permission.WRITE_EXTERNAL_STORAGE" />
<uses-permission android:name="android.permission.CHANGE_WIFI_STATE" />
<uses-permission android:name="android.permission.ACCESS_WIFI_STATE" />
<uses-permission android:name="android.permission.BLUETOOTH_ADMIN" />
<uses-permission android:name="android.permission.BLUETOOTH" />

<uses-sdk
    android:minSdkVersion="7"
    android:targetSdkVersion="15" />

<uses-feature android:name="android.hardware.camera" />
<uses-feature
    android:name="android.hardware.camera.autofocus"
    android:required="false" />
<uses-feature
    android:name="android.hardware.camera.flash"
    android:required="false" />
<uses-feature android:name="android.hardware.screen.landscape" />
<uses-feature
    android:name="android.hardware.wifi"
    android:required="false" />
<uses-feature
    android:name="android.hardware.touchscreen"
    android:required="false" />

<application
    android:hardwareAccelerated="true"
    android:icon="@drawable/logo_xybuy"
    android:label="@string/app_name"
    android:theme="@style/AppTheme" >
    <uses-library
        android:name="com.google.android.maps"
        android:required="true" />

    <activity
        android:name=".RegisterCustomer"
        android:label="@string/title_activity_register_customer" >
        <intent-filter>
            <action android:name="android.intent.action.MAIN" />

            <category android:name="android.intent.category.LAUNCHER" />
        </intent-filter>
    </activity>
    <!-- BarCodeScanner -->
    <activity
        android:name="com.google.zxing.client.android.CaptureActivity"
        android:clearTaskOnLaunch="true"
        android:configChanges="orientation|keyboardHidden"
        android:screenOrientation="landscape"
        android:stateNotNeeded="true"
        android:theme="@android:style/Theme.NoTitleBar.Fullscreen"
        android:windowSoftInputMode="stateAlwaysHidden" ><intent-filter>
            <action android:name="com.google.zxing.client.android.SCAN" />

            <category android:name="android.intent.category.DEFAULT" />
        </intent-filter>

        <intent-filter>
            <action android:name="android.intent.action.MAIN" />

            <category android:name="android.intent.category.ALTERNATIVE" />
        </intent-filter>

        <!-- Allow web apps to launch Barcode Scanner by linking to http://zxing.appspot.com/scan. -->
        <intent-filter>
            <action android:name="android.intent.action.VIEW" />

            <category android:name="android.intent.category.DEFAULT" />
            <category android:name="android.intent.category.BROWSABLE" />

            <data
                android:host="zxing.appspot.com"
                android:path="/scan"
                android:scheme="http" />
        </intent-filter>
        <!-- We also support a Google Product Search URL. -->
        <intent-filter>
            <action android:name="android.intent.action.VIEW" />

            <category android:name="android.intent.category.DEFAULT" />
            <category android:name="android.intent.category.BROWSABLE" />

            <data
                android:host="www.google.com"
                android:path="/m/products/scan"
                android:scheme="http" />
        </intent-filter>
        <!-- And the UK version. -->
        <intent-filter>
            <action android:name="android.intent.action.VIEW" />

            <category android:name="android.intent.category.DEFAULT" />
            <category android:name="android.intent.category.BROWSABLE" />

            <data
                android:host="www.google.co.uk"
                android:path="/m/products/scan"
                android:scheme="http" />
        </intent-filter>
        <!-- Support zxing://scan/?... like iPhone app -->
        <intent-filter>
            <action android:name="android.intent.action.VIEW" />

            <category android:name="android.intent.category.DEFAULT" />
            <category android:name="android.intent.category.BROWSABLE" />

            <data
                android:host="scan"
                android:path="/"
                android:scheme="zxing" />
        </intent-filter>
    </activity>
    <activity
        android:name="com.google.zxing.client.android.PreferencesActivity"
        android:label="@string/preferences_name"
        android:stateNotNeeded="true" >
    </activity>
    <activity
        android:name="com.google.zxing.client.android.encode.EncodeActivity"
        android:label="@string/share_name"
        android:stateNotNeeded="true" >
        <intent-filter>
            <action android:name="com.google.zxing.client.android.ENCODE" />

            <category android:name="android.intent.category.DEFAULT" />
        </intent-filter>
        <!-- This allows us to handle the Share button in Contacts. -->
        <intent-filter>
            <action android:name="android.intent.action.SEND" />

            <category android:name="android.intent.category.DEFAULT" />

            <data android:mimeType="text/x-vcard" />
        </intent-filter>
        <!-- This allows us to handle sharing any plain text . -->
        <intent-filter>
            <action android:name="android.intent.action.SEND" />

            <category android:name="android.intent.category.DEFAULT" />

            <data android:mimeType="text/plain" />
        </intent-filter>
    </activity>
    <activity
        android:name="com.google.zxing.client.android.history.HistoryActivity"
        android:label="@string/history_title"
        android:stateNotNeeded="true" >
        <intent-filter>
            <action android:name="android.intent.action.VIEW" />

            <category android:name="android.intent.category.DEFAULT" />
        </intent-filter>
    </activity>
    <activity android:name="WelcomeCustomerSplash" >
    </activity>
    <activity android:name="HomePage" >
    </activity>
    <activity android:name=".buy.BuyClick" >
    </activity>
    <activity android:name=".shoppinglistmanage.ShoppingListManageCompulsory" >
    </activity>
    <activity android:name=".otw.OtwClick" >
    </activity>
    <activity android:name=".buy.ClickIHaveList" >
    </activity>
    <activity android:name=".buy.WaitToPopulateData" >
    </activity>
    <activity android:name=".buy.ListWithDiscountNetPrice" >
    </activity>
    <activity android:name=".buy.PaymentOption" >
    </activity>
    <activity android:name=".buy.PurchaseItemList" >
    </activity>
    <activity android:name=".buy.UnPurchaseItemList" >
    </activity>
    <activity android:name=".googlemap.LocateForNearestStore" >
    </activity>
    <activity android:name=".googlemap.WhereIam" >
    </activity>
    <activity android:name=".paymentgateway.ShoppingPaymentGatewayPayPalActivity" >
    </activity>
    <activity
        android:name="com.paypal.android.MEP.PayPalActivity"
        android:configChanges="keyboardHidden|orientation"
        android:theme="@android:style/Theme.Translucent.NoTitleBar" >
    </activity>
    <activity
        android:name="com.google.zxing.shopping.PurchaseList"
        android:configChanges="orientation|keyboardHidden" >
    </activity>
    <activity android:name="com.google.zxing.shopping.DeviceListActivity" >
    </activity>
    <activity android:name="com.google.zxing.shopping.shopping" >
    </activity>

    <!-- purchase -->
    <!-- DeviceList -->
    <activity android:name="com.google.zxing.shopping.DataLayer" >
    </activity>
    <activity android:name="com.xyrad.xybuy.ecommerce.payment.BillingAddress" >
    </activity>
    <activity android:name="com.xyrad.xybuy.ecommerce.cart.ListCart" >
    </activity>
    <activity android:name="com.xyrad.xybuy.ecommerce.category.ListCategory" >
    </activity>
    <activity android:name="com.xyrad.xybuy.ecommerce.subcategory.ListCategorySubCategory" >
    </activity>
    <activity android:name="com.xyrad.xybuy.ecommerce.subcategory.TabSubCategory" >
    </activity>
    <activity android:name="com.xyrad.xybuy.ecommerce.catalog.ListCatalog" >
    </activity>
    <activity android:name="com.xyrad.xybuy.ecommerce.checkout.ListCheckOut" >
    </activity>
    <activity android:name="com.xyrad.xybuy.ecommerce.item.ItemDetails" >
    </activity>
    <activity android:name="com.xyrad.xybuy.ecommerce.item.ListItem" >
    </activity>
    <activity android:name="com.xyrad.xybuy.ecommerce.item.ItemReview" >
    </activity>
    <activity android:name="com.xyrad.xybuy.ecommerce.merchant.ListMerchant" >
    </activity>
    <activity android:name="com.xyrad.xybuy.ecommerce.merchant.TabMerchant" >
    </activity>
    <activity android:name="com.xyrad.xybuy.ecommerce.payment.ModeOfPayment" >
    </activity>
    <activity android:name="com.xyrad.xybuy.ecommerce.offer.ListOffer" >
    </activity>
    <activity android:name="com.xyrad.xybuy.ecommerce.payment.Payment" >
    </activity>
    <activity android:name="com.xyrad.xybuy.ecommerce.category.TabCategry" >
    </activity>
    <activity android:name="com.xyrad.xybuy.ecommerce.item.TabItem" >
    </activity>
    <activity android:name="com.xyrad.xybuy.ecommerce.item.TabItemDetails" >
    </activity>
    <activity android:name="com.xyrad.xybuy.ecommerce.item.TabItemDetailsAndReview" >
    </activity>
    <activity android:name="com.xyrad.xybuy.ecommerce.deparment.ListDepartment" >
    </activity>
    <activity android:name="com.xyrad.xybuy.ecommerce.catalog.TabCatalog" >
    </activity>
    <activity android:name="com.xyrad.xybuy.ecommerce.subcategory.TabSubCategoryegory.TabSubCategoryegory.TabSubCategory" >
    </activity>
</application>

<!-- Category --> 
```

所以，这是我对我的问题的描述。所以请有人帮助我。我真的会从心底里感谢所有人。提前感谢所有人。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-06T06:33:59.803

您是否在运行应用程序的手机或模拟器中安装了此第 3 方应用程序？

Android 操作系统找不到该活动。

```
 01-06 06:00:02.161: E/AndroidRuntime(956): android.content.ActivityNotFoundException: No Activity found to handle Intent { act=com.google.zxing.client.android.SCAN pkg=com.google.zxing.client.android (has extras) } 
```

使用 try and catch 块，确保应用程序已安装在您的手机中，如果没有：将用户指向 Playstore 上的第 3 方应用程序。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-06T07:00:46.077

使用提供的 IntentIntegrator 类，因为它将处理您需要处理的情况，例如未安装的应用程序。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-06T07:30:36.860

由于 Zxing 应用程序未安装在您的设备中，您将收到 ActivityNotFoundException。所以请检查它是否已安装。如果不是，则将用户重定向到 Zxing 的 playstore-page：

我已经为这些实现了一些代码。根据您的需要修改它：

```
boolean isZxingInstalled;
/*
 *Checking whether Zxing is installed or not
 */ 
try
{
ApplicationInfo info = getPackageManager().getApplicationInfo("com.google.zxing.client.android", 0 );
boolean isZxingInstalled = true;
    }
catch(PackageManager.NameNotFoundException e){
                isZxingInstalled=false;
          }

/*
 * Store the boolean value on the basis of Zxing is installed or not
 */

if(isZxingInstalled) //If it is then intent Zxing application
 {
         //start the facebook app
         Intent intent = new Intent("com.google.zxing.client.android.SCAN");
          intent.setPackage("com.google.zxing.client.android"); 
          intent.putExtra("SCAN_MODE", "PRODUCT_MODE");
          intent.putExtra("SCAN_FORMATS",    "CODE_39,CODE_93,CODE_128,DATA_MATRIX,ITF,CODABAR,EAN_13,EAN_8,UPC_A,QR_CODE");
          startActivityForResult(intent, 0); 
  }
 else //It's not then redirect user to PlayStore-ZxingPlage
  {
    /*
     *Checking whether PlayStore is installed in device or not?
     */
     boolean isPlayStoreInstalled
     try
     {
      ApplicationInfo i=getPackageManager().getApplicationInfo("com.google.vending", 0 );
      boolean isPlayStoreInstalled = true;
      }
     catch(PackageManager.NameNotFoundException e){
                isPlayStoreInstalled=false;
          }

      /*
       * If it is the download Zxing
       */ 
      if(isPlayStoreInstalled)
       {
        Intent DownloadZxing = new Intent(Intent.ACTION_VIEW,Uri.parse("market://detailsid=com.google.zxing.client.android"));
        startActivity(DownloadZxing);
        }
      else //Toast message indicating No PlayStore Found
       {
         Toast.makeText(this,"Install PlayStore First",Toast.LENGHT_SHORT).show();
        }
  } 
```

希望这些可以帮助！:)

# ruby-on-rails - 将 facebook 链接到现有帐户/omniauth

> ID：14179849
> 
> 赞同：1
> 
> 时间：2013-01-06T06:17:31.013
> 
> 标签：ruby-on-rails, facebook, ruby-on-rails-3, devise, omniauth

就这么简单，我想使用omniauth和devise在我的rails应用程序中链接到现有用户帐户他的facebook个人资料（优先考虑最初注册的电子邮件）。

我已阅读[此](https://stackoverflow.com/questions/7837737/using-omniauth-to-facebook-connect-existing-user-with-different-permissions)内容，但对我没有多大帮助。

我目前的结构是[这样的](https://github.com/plataformatec/devise/wiki/OmniAuth:-Overview)。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2016-05-10T19:29:18.550

下面是我如何实现这一点的示例。如果用户已经登录，那么我调用一个将他们的帐户与 Facebook 关联的方法。否则，我将执行[Devise-Omniauth wiki 页面](https://github.com/plataformatec/devise/wiki/OmniAuth:-Overview)中列出的相同程序。

```
# users/omniauth_callbacks_controller.rb

def facebook
  if user_signed_in?
    if current_user.link_account_from_omniauth(request.env["omniauth.auth"])
      flash[:notice] = "Account successfully linked"
      redirect_to user_path(current_user) and return
    end
  end

  @user = User.from_omniauth(request.env["omniauth.auth"])

  if @user.persisted?
    sign_in_and_redirect @user, event: :authentication #this will throw if @user is not activated
    set_flash_message(:notice, :success, kind: "Facebook") if is_navigational_format?
  else
    session["devise.facebook_data"] = request.env["omniauth.auth"]
    redirect_to new_user_registration_url
  end
end

# app/models/user.rb

class << self
  def from_omniauth(auth)
    new_user = where(provider: auth.provider, uid: auth.uid).first_or_initialize
    new_user.email = auth.info.email

    new_user.password = Devise.friendly_token[0,20]
    new_user.skip_confirmation!
    new_user.save
    new_user
  end
end

def link_account_from_omniauth(auth)
  self.provider = auth.provider
  self.uid = auth.uid
  self.save
end 
```

# python - Python 文档问题

> ID：14179852
> 
> 赞同：-1
> 
> 时间：2013-01-06T06:17:41.087
> 
> 标签：python

我正在努力学习 Python。我来自 C++ 和 Ruby，基本上，我很难理解文档。

[这个](http://www.ruby-doc.org/core-1.9.3/Array.html)Ruby 文档列出了所有的方法和操作符，并给出了一个例子和解释。

[这个](http://www.cplusplus.com/reference/vector/vector/)C++ 文档（虽然不是官方的）做了类似的事情。

我的问题是，这对于 python 来说在哪里？我现在正在看[这里](http://docs.python.org/2/tutorial/datastructures.html)；但是，我的问题是我看不到示例在哪里（是否有使用该`append`方法的示例-我知道这是一种非常简单明了的方法；但是，我确定那里是不那么明显的方法）。此外，我不明白操作员的记录在哪里。例如，`+`运算符在与字符串一起使用时追加一个字符，当与列表一起使用时，追加一个元素。这是在哪里记录的？没有类似于 Ruby 或 C++ 的文档吗？

谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-06T06:22:19.370

`append`您链接到的页面显示了其他列表方法的示例。那是教程，并不意味着是所有信息的完整、简洁的列表。如果您想要在一个地方列出方法等的参考手册，请查看[库参考](http://docs.python.org/2/library/)。`str`例如，[这里](http://docs.python.org/2/library/stdtypes.html#sequence-types-str-unicode-list-tuple-bytearray-buffer-xrange)记录了其他序列类型的方法和运算符。

# iphone - 如何在 iphone 中获得重要位置更新的准确性？

> ID：14179854
> 
> 赞同：1
> 
> 时间：2013-01-06T06:17:52.407
> 
> 标签：iphone, objective-c, location

如何知道 iphone 中重要位置更新的准确度？作为标准位置，可以根据可以设置的参数来设置精度等级，但是不能为精度设置显着的位置精度，但是如何读取接收到的位置更新的精度呢？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-06T06:28:16.593

该类`CLLocationManager`有一个精度参数，称为`desiredAccuracy`哪个是类的`CLLocationAccuracy`。但是坚持住！它不是一个类，它是一个`typedef double`所以这里是常量

```
extern const CLLocationAccuracy kCLLocationAccuracyBestForNavigation __OSX_AVAILABLE_STARTING(__MAC_10_7,__IPHONE_4_0);
extern const CLLocationAccuracy kCLLocationAccuracyBest;
extern const CLLocationAccuracy kCLLocationAccuracyNearestTenMeters;
extern const CLLocationAccuracy kCLLocationAccuracyHundredMeters;
extern const CLLocationAccuracy kCLLocationAccuracyKilometer;
extern const CLLocationAccuracy kCLLocationAccuracyThreeKilometers; 
```

我建议您做的是将您的位置管理器的准确性分配给一个新变量，然后将其进行比较，如下所示：

```
CLLocationAccuracy locationAccuracy = self.locationManager.desiredAccuracy;

if (locationAccuracy == kCLLocationAccuracyBest) {

    NSLog(@"It is the kCLLocationAccuracyBest my life is complete!");
}
else if (/*other comparisons stuff here*/) {

} 
```

此外，您必须导入：

```
#import <CoreLocation/CLLocation.h> 
```

罗汉

# bash - 重复命令替换文本文件中的值

> ID：14179859
> 
> 赞同：1
> 
> 时间：2013-01-06T06:19:52.450
> 
> 标签：bash

我想重复运行 ldapsearch 查询，从列表中替换 uid 并将结果输出到新文件。

```
ldapsearch -h ldap.com -p 389 -x -b "dc=top,dc=com" \
              "uid=**value_from_a_text_file**" >>ldap.query.results. 
```

关于如何实现这一点有什么建议吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-06T06:24:48.610

假设您的文件是一个 UID 列表，每行一个，并且命名为 uidfile.txt

```
for line in `cat uidfile.txt`; do
    ldapsearch -h ldap.com -p 389 -x -b "dc=top,dc=com" "uid=${line}" >>ldap.query.results
done 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-06T06:59:01.150

假设数据为 CSV 格式，第一个字段为 UID

```
awk -F ","  '{print $1}' data.csv | \
while read uiddata
do 
 ldapsearch -h ldap.com -p 389 -x -b "dc=top,dc=com" "uid=${uiddata}" >> ldap.query.results

done 
```

# streaming - Initial-Burst HTTP 标头 - 单位

> ID：14179863
> 
> 赞同：0
> 
> 时间：2013-01-06T06:20:37.240
> 
> 标签：streaming, shoutcast, internet-radio

我正在实施一个广播电台客户端。

我的参考客户端将“Initial-Burst”HTTP 请求标头发送到 960000。我不知道我的参考客户端的初始缓冲区大小，它是一个 iOS 应用程序，我没有源代码。我所知道的是，只要用户选择一个频道，它就会立即开始播放。

当我将初始缓冲区大小提高到约 100 KB 以上时，我的收音机不再立即播放，在某些流上它会等待来自服务器的数据，这会持续几秒钟。

服务器说它正在运行 Icecast 2.3.3-kh3 和 Linux v1.9.8。Icecast 是一个开源软件，不用说它没有文档。

哪些单位有 Initial-Burst 标头？字节，位，滴答声等？

是否有一些推荐值/最佳实践？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-07T03:33:01.483

我怀疑正在发生的事情是您请求的数据比服务器缓冲的数据多。如果您要请求 1MB，但缓冲区中只有 512KB，那么您将接收来自编码器的数据，直到 1MB 客户端缓冲区填满。您可以使用数据包嗅探器（例如 Wireshark）来确认这一点。

如果您构建自己的客户端，您应该能够将播放缓冲区大小与标头分开。完成此操作后，您可以将`Initial-Burst`标题设置为任意大小。

另一种可能性（我怀疑不太可能）是服务器正在创建服务器端缓冲区并在发送之前将其填充到请求的大小。这对我来说没有多大意义，但同样，您可以使用数据包嗅探器确认行为。

我所做的是在服务器端有一个固定的缓冲区大小，并忽略任何与缓冲区控制相关的标头。这使我能够尽快刷新大缓冲区，而无需依赖客户端行为。不过，我使用自定义代码执行此操作...我认为这在 Icecast 中不可配置，但我可能是错的。

# android - Android：在确定需要更新的行后更新数据库中的行时遇到问题

> ID：14179865
> 
> 赞同：2
> 
> 时间：2013-01-06T06:20:49.903
> 
> 标签：android, sqlite, sql-update

我有一个表，其中包含设备列表，其中包含类型、制造商和型号等类别以及设备 ID。另一个名为 system 的表使用设备 ID 指向包含设备的表。我有一个编辑系统功能，我正在尝试开始工作，我可以在系统表的记录中编辑设备 ID 字段，以更改设备表中我也指向的设备。我运行更新命令，它看起来应该可以工作，但该行没有得到更新。有谁知道我做错了什么？

这是我的更新代码例程。

```
SQLiteDatabase db = dbHelper.getWritableDatabase();
String UpdateDeviceName = txtEditDeviceName.getText().toString();
String UpdateDeviceIP = txtEditDeviceIP.getText().toString();
//get the new device id based off of the three spinner values
String dbQuery = "SELECT * FROM " + dbHelper.Devices_Table + ";";
Cursor c = db.rawQuery(dbQuery, null);
if (c.getCount() > 0)
{
    while (c.moveToNext())
    {
        int iColumnID = c.getColumnIndex(dbHelper.Attribute_Device_ID);
        int iColumnDeviceType = c.getColumnIndex(dbHelper.Attribute_Device_Type);
        int iColumnDeviceManufacturer = c.getColumnIndex(dbHelper.Attribute_Device_Manufacturer);
        int iColumnDeviceModel = c.getColumnIndex(dbHelper.Attribute_Device_Model);
        String CheckDeviceType = c.getString(iColumnDeviceType);
        if (CheckDeviceType.equals(DeviceType))
        {
            String CheckDeviceManufacturer = c.getString(iColumnDeviceManufacturer);
            if (CheckDeviceManufacturer.equals(DeviceManufacturer))
            {
                String CheckDeviceModel = c.getString(iColumnDeviceModel);
                if (CheckDeviceModel.equals(DeviceModel))
                {
                    DeviceID = c.getString(iColumnID);
                }
             }
         }
      }
}
db.close();
c.close();
db = dbHelper.getWritableDatabase();
//with the device ID update the system
dbQuery = "UPDATE " + dbHelper.System_Table + " SET " + dbHelper.Attribute_Device_ID + " = " + DeviceID + ", " +
    dbHelper.Attribute_Device_Name + " = '" + UpdateDeviceName + "', " +
    dbHelper.Attribute_Device_IP + " = '" +
    UpdateDeviceIP + "' WHERE " + dbHelper.Attribute_Device_ID + " = " + OrginalDeviceID + ";";
c = db.rawQuery(dbQuery, null);
Log.d("Database Dump", "Edit Device Query: " + dbQuery);
c.close();
db.close(); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-06T06:29:02.433

您在搜索后关闭了数据库：

```
db.close(); 
```

省略这一行，因为 DB 帮助程序代码更喜欢保持 DB 处于打开状态，直到不再使用它（使用`dbHelper.close()`完成后关闭 DB）。

更新后同样适用。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-06T10:24:11.440

首先，任何`rawQuery`语句都不能包含结尾的分号！请参阅 的文档[`SQLiteDatabase`](https://developer.android.com/reference/android/database/sqlite/SQLiteDatabase.html#rawQuery%28java.lang.String,%20java.lang.String%5B%5D,%20android.os.CancellationSignal%29)。

此外，您始终必须在关闭数据库之前关闭游标。当您为每个查询获得一个新数据库时，您*必须关闭数据库。*否则系统稍后会抛出异常。虽然这些只会被记录并且不会导致强制关闭，但您仍然应该关心适当的资源管理。

最后，您应该使用该[`updateWithOnConflict`](https://developer.android.com/reference/android/database/sqlite/SQLiteDatabase.html#updateWithOnConflict%28java.lang.String,%20android.content.ContentValues,%20java.lang.String,%20java.lang.String%5B%5D,%20int%29)方法而不是使用[`CONFLICT_REPLACE`](https://developer.android.com/reference/android/database/sqlite/SQLiteDatabase.html#CONFLICT_REPLACE)冲突算法。这只是忽略任何`UNIQUE`约束并覆盖冲突的行。所以要小心。如果您不想覆盖现有行，则必须确保约束违规不会导致您的问题。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-06T17:16:24.460

我找到了答案。首先，我要感谢 Henry 和 Wolfram Rittmeyer。你们非常有帮助。:)

无论出于何种原因，android SQLite 都不喜欢以原始 sql 查询形式使用更新语句。在研究 Wolfram Rittmeyer 所说的关于 updateWithConflict 的内容时，我在我的 dbHelper 扩展的 SQLiteOpenHelper 对象中找到了 update 方法。当我切换到该方法时，我能够更新数据库。我的 where 条件已扩展为包括设备名称，以防系统具有多个相同类型的设备制造商和型号并且只需更改一个。

作为参考，更新数据库的工作代码如下。我只发布代码的更改部分。if (c.getCount() > 0) 块及以上的所有内容均未更改。

```
c.close();
dbHelper.close();
db = dbHelper.getWritableDatabase();
//with the device ID update the system
ContentValues values = new ContentValues();
values.put(dbHelper.Attribute_Device_ID, DeviceID);
values.put(dbHelper.Attribute_Device_Name, UpdateDeviceName);
values.put(dbHelper.Attribute_Device_IP, UpdateDeviceIP);
String Where = dbHelper.Attribute_Device_ID + " = " + OrginalDeviceID +  " AND " + dbHelper.Attribute_Device_Name + " = '" + OrginalDeviceName + "'";
db.update(dbHelper.System_Table, values, Where, null);
c.close();
dbHelper.close();
finish(); //this exits the activity and goes back to the calling activity 
```

# jax-rs - Resteasy 不适用于 @ApplicationPath

> ID：14179868
> 
> 赞同：1
> 
> 时间：2013-01-06T06:21:38.927
> 
> 标签：jax-rs, resteasy

我无法使用简单的 @ApplicationPath 注释让 JAX-RS 与 Resteasy 2.3.5 一起使用。这是我正在使用的代码：

```
@ApplicationPath("/rest")
public class MyApplication extends Application {
  @Override
  public Set<Class<?>> getClasses() {
    final Set<Class<?>> s = new HashSet<Class<?>>();
    s.add(ViewController.class);
    return s;
  }
}

@Path("/")
public class ViewController {
  @GET
  @Path("/test")
  public String test() {
    return "Yes!";
  }
} 
```

请求“/uri-context/rest/test/”会引发 404。使用 Jersey 一切都可以无缝运行。由于这是 JAX-RS 的一个非常微不足道的部分，这是怎么回事？

目前我只使用了 4 个我需要的 Resteasy 库：

*   async-http-servlet-3.0-2.3.5.Final.jar
*   jaxrs-api-2.3.5.Final.jar
*   resteasy-jaxrs-2.3.5.Final.jar
*   scannotation-1.0.3.jar

尽管如此，把所有的库（除了resteasy-cdi-2.3.5.Final.jar），也不能解决问题。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2014-09-29T12:58:45.920

小心**Jax-RS** 1.0、**路径**和**斜线**

```
@ApplicationPath("api") //NO slash
public class MyApplication extends Application {
}

@Path("/users")  // YES slash
public class ViewController {

  @GET
  @Path("all") //NO slash
  public String all() {
    return "Yes!";
  }
} 
```

通常处理斜线会使它很快变得更好。

* * *

JAX-RS 2 的更新：

在 JAX-RS 2 中，规范确实说在`@ApplicationPath`或`@Path`将被忽略的前导和尾随斜杠。

```
(3)If the resource class URI template does not end with a ‘/’ character
then one is added during the concatenation. 
```

对于我用 Jersey 2 和 Resteasy 测试过的东西，这现在得到了尊重。

# forms - Codeigniter：set_value 未正确重新填充数组表单字段

> ID：14179874
> 
> 赞同：1
> 
> 时间：2013-01-06T06:23:07.533
> 
> 标签：forms, codeigniter, validation, populate

我有一个带有 CI 验证的表单，它使用数组作为输入名称。该视图最初具有以下代码：

```
<input type="text" name="feed_urls[]"
   value="<?php echo set_value('feed_urls[]', ''); ?>" > 
```

当加载到浏览器中时，它会正确转换为：

```
<input type="text" name="feed_urls[]" value=""> 
```

然后通过 Jquery，用户可以`<input>`在提交之前向 DOM 添加更多相同的 's，所以最终发布的内容可能是例如

```
<input type="text" name="feed_urls[]" value="">
<input type="text" name="feed_urls[]" value="">
<input type="text" name="feed_urls[]" value=""> 
```

现在，如果提交的数据通过验证，一切都很好并存储在数据库中。但是如果验证失败，控制器会发送回视图，但我看不到`<input>`POSTed 表单的 N 。我只看到一个并且它是空的，这是可以理解的，因为我没有向 set_values() 提供第二个参数，但是再次预期的是通过 $this->input->post 重新填充输入(feed_urls) 数组，其中包含无效的 POST 数据。

我确实在控制器上验证 $this->input->post('feed_urls') 是否有发布的内容（无效或无效）。

我已阅读 CI 用户指南文档，了解使用[数组作为字段名称进行验证](http://ellislab.com/codeigniter/user-guide/libraries/form_validation.html#arraysasfields)

关于 set_value() 的正确用法有什么想法吗？正确的意思是，在验证失败时，我得到了 N 个已发布的输入，并一一正确地重新填充。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-10-31T23:03:51.543

您可以使用：

```
<input type="text" name="feed_urls[]" value="<?php echo set_value('feed_urls[0]'); ?>"> 
```

我已经在 CI 2.0 上对其进行了测试，但它应该也可以在以前的版本中使用。

干杯!

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-08T12:31:24.077

由于您只提供了一小部分代码，我只能就我认为您的主要问题给您一个提示。

可以使用 jQuery 填充输入数组的第 n 个元素，如下所示：

```
$("[id^=feed_urls]").eq(0).val(someURL);
$("[id^=feed_urls]").eq(1).val(someURL);
$("[id^=feed_urls]").eq(2).val(someURL); 
```

等等。

# android - R.java 丢失但没有 xml 错误

> ID：14179876
> 
> 赞同：0
> 
> 时间：2013-01-06T06:23:10.937
> 
> 标签：android, resources, r.java-file

我一直在尝试将我的活动转换为片段，并且在此过程中，我在某个文件中搞砸了一些东西。我收到了找不到我的 R.java 文件的错误，我检查了我的所有库，但它们的 xml 文件中没有错误。我的应用程序 xml 文件中也没有错误。嗯，可能有，但他们没有出现。

我已经多次清理我的项目，并重新启动了 Eclipse，但似乎没有任何效果。我的 xml 文件中没有出现任何错误，所以你们都有解决这个问题的想法吗？

```
<manifest xmlns:android="http://schemas.android.com/apk/res/android"
    package="com.fotolife.app"
    android:versionCode="1"
    android:versionName="1" >

    <uses-sdk
        android:minSdkVersion="8"
        android:targetSdkVersion="16" />

    <uses-permission android:name="android.permission.INTERNET" />
    <uses-permission android:name="android.permission.WRITE_EXTERNAL_STORAGE" />
    <uses-permission android:name="android.permission.ACCESS_FINE_LOCATION" />
    <uses-permission android:name="android.permission.ACCESS_NETWORK_STATE" />
    <uses-permission android:name="android.permission.ACCESS_COARSE_LOCATION" />

    <uses-feature android:name="android.hardware.camera" />

    <application
        android:icon="@drawable/icon_retina"
        android:label="The Foto Life"
        android:screenOrientation="portrait" >
        <uses-library
            android:name="com.google.android.maps"
            android:required="true" />

        <activity
            android:name=".Splash"
            android:exported="true"
            android:screenOrientation="portrait"
            android:theme="@android:style/Theme.NoTitleBar" >
            <intent-filter>
                <action android:name="android.intent.action.MAIN" />

                <category android:name="android.intent.category.LAUNCHER" />
            </intent-filter>
        </activity>
        <activity
            android:name=".Login"
            android:excludeFromRecents="true"
            android:exported="false"
            android:screenOrientation="portrait"
            android:theme="@android:style/Theme.NoTitleBar" >
            <intent-filter>
                <action android:name="com.fotolife.app.LOGIN" />

                <category android:name="android.intent.category.DEFAULT" />
            </intent-filter>
        </activity>
        <activity
            android:name=".MainView"
            android:exported="false"
            android:screenOrientation="portrait"
            android:theme="@android:style/Theme.NoTitleBar" >
            <intent-filter>
                <action android:name="com.fotolife.app.MAINVIEW" />

                <category android:name="android.intent.category.DEFAULT" />
            </intent-filter>
        </activity>
        <activity
            android:name=".Menu"
            android:exported="false"
            android:screenOrientation="portrait"
            android:theme="@android:style/Theme.NoTitleBar" >
            <intent-filter>
                <action android:name="com.fotolife.app.MENU" />

                <category android:name="android.intent.category.DEFAULT" />
            </intent-filter>
        </activity>
        <activity
            android:name=".Upload"
            android:configChanges="keyboardHidden|orientation|screenSize"
            android:exported="false"
            android:screenOrientation="portrait"
            android:theme="@android:style/Theme.NoTitleBar" >
            <intent-filter>
                <action android:name="com.fotolife.app.UPLOAD" />

                <category android:name="android.intent.category.DEFAULT" />
            </intent-filter>
        </activity>
        <activity
            android:name=".Map"
            android:exported="false"
            android:label="@string/app_name"
            android:screenOrientation="portrait"
            android:theme="@android:style/Theme.NoTitleBar" >
            <intent-filter>
                <action android:name="com.fotolife.app.MAPS" />

                <category android:name="android.intent.category.DEFAULT" />
            </intent-filter>
        </activity>
        <activity
            android:name=".AndroidCustomGalleryActivity"
            android:configChanges="keyboardHidden|orientation"
            android:exported="false"
            android:screenOrientation="portrait"
            android:theme="@android:style/Theme.NoTitleBar" >
            <intent-filter>
                <action android:name="com.fotolife.app.GALLERY" />

                <category android:name="android.intent.category.DEFAULT" />
            </intent-filter>
        </activity>
        <activity
            android:name=".EditGallery"
            android:configChanges="keyboardHidden|orientation"
            android:exported="false"
            android:screenOrientation="portrait"
            android:theme="@android:style/Theme.NoTitleBar" >
            <intent-filter>
                <action android:name="com.fotolife.app.GALLERY" />

                <category android:name="android.intent.category.DEFAULT" />
            </intent-filter>
        </activity>
        <activity
            android:name=".UploadQueue"
            android:configChanges="keyboardHidden|orientation"
            android:screenOrientation="portrait"
            android:theme="@android:style/Theme.NoTitleBar"
            android:windowSoftInputMode="adjustPan" >
        </activity>
        <activity
            android:name="com.aviary.android.feather.FeatherActivity"
            android:configChanges="keyboardHidden|orientation|screenSize"
            android:hardwareAccelerated="true"
            android:largeHeap="true"
            android:screenOrientation="portrait"
            android:theme="@style/FeatherDefaultTheme.Custom" />

        <receiver
            android:name="com.aviary.android.feather.receivers.FeatherSystemReceiver"
            android:exported="true"
            android:process=":feather_system_receiver" >
            <intent-filter>
                <action android:name="android.intent.action.PACKAGE_ADDED" />
                <action android:name="android.intent.action.PACKAGE_REMOVED" />
                <action android:name="android.intent.action.PACKAGE_REPLACED" />

                <data android:scheme="package" />
            </intent-filter>
        </receiver>

        <provider
            android:name="com.aviary.android.feather.library.providers.FeatherContentProvider"
            android:authorities="com.fotolife.app.upload"
            android:exported="false" >
        </provider>

        <meta-data
            android:name="ADMOB_PUBLISHER_ID"
            android:value="a150e7b057ac915" />
    </application>

</manifest> 
```

我的清单中有一个标签，我可以四处移动并且不会出错。你能告诉我它的正确位置吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-05-30T11:42:54.523

更新 Android SDK 管理器中的构建工具

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-06T16:48:02.713

删除您的“gen”和“bin”文件夹，然后检查“问题”选项卡（在 Eclipse 中）。我敢打赌，您缺少 XML 引用，或者 XML 文件中有另一个错误（有时不转义斜杠或引号可以做到这一点）。

最后，检查您的项目属性以确保您仍然以适当的 SDK 版本为目标，并且您的库仍然是链接的。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-06T16:51:08.830

我发现了问题。我的edit.xml文件中隐藏了一个8.....我摆脱了它，问题得到了解决。

# django - Django 查询集订单过滤器

> ID：14179878
> 
> 赞同：2
> 
> 时间：2013-01-06T06:23:22.773
> 
> 标签：django, django-queryset

我有两个模型对象，它们具有多对多关系-

```
class Note(models.Model):
    title = models.CharField(max_length=127)
    body = models.TextField()
    is_deleted = models.BooleanField()

    def __unicode__(self):
        return "{} - {}".format(self.title, self.body)

class Tag(models.Model):
    tag_name = models.CharField(max_length = 100)
    notes = models.ManyToManyField(Note) 
```

我正在尝试根据未删除笔记的数量来订购 Tag 对象。我可以使用`Tag.objects.annotate(notes_count=Count('notes')).order_by('-notes_count')`按笔记计数排序，但此计数包括已删除标记为 true 的笔记。我的问题是，我如何运行它以按未删除笔记的数量对标签进行排序（即 note.is_deleted=False）？

我尝试在 Tag 中定义一个仅返回未删除笔记的方法，即 -

```
def non_deleted_notes(self):
    return self.notes.filter(is_deleted=False) 
```

然后用 替换`Count('notes')`，`Count('non_deleted_notes')`但这会导致错误。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-06T11:56:26.810

我认为queryset api不支持这一点，所以你可能需要求助于[`.extra()`](https://stackoverflow.com/questions/2096580/filtering-only-on-annotations-in-django)

# node.js - 如何在线编辑cloudfoundry应用程序？

> ID：14179880
> 
> 赞同：0
> 
> 时间：2013-01-06T06:23:34.143
> 
> 标签：node.js, cloud-foundry, vmc

有时候，我们只需要改变一点线，所以 vmc push 太慢了。

有没有可以直接在线编辑代码的 NodeSJ 模块或服务？

Cloudfoundry 有仪表板吗？

顺便问一下，你如何下载`app`并`log`作为 zip 文件？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-06T09:00:51.173

1.  如果您查看[vmc push 的工作原理](http://blog.cloudfoundry.com/2011/04/18/what-happens-when-you-vmc-push-an-application-to-cloud-foundry/)，您将从第 11 点知道，通过查看所有差异，应用程序由 vmc 打包，然后推送到服务器。所以cloudfoundry本身并没有代码编辑器。

2.  要在线编辑您的代码，您可以使用其他服务，例如[http://c9.io](http://c9.io)并按照这些文档查看[如何推送到 cloudfoundry](https://docs.c9.io/deploying_via_cli.html)

3.  > CloudFoundry 没有仪表板。（截至撰写本文时）

    但是还有另一项基于 micro cloudfoundry 的服务，称为[appfog](http://appfog.com/) - 它拥有所有 UI 内容 + 对其他平台的支持。

4.  可以在[此答案的帮助下下载应用程序日志](https://stackoverflow.com/a/13740390/156775)

# php - Mysql数据库查询

> ID：14179881
> 
> 赞同：0
> 
> 时间：2013-01-06T06:23:45.970
> 
> 标签：php, mysql, sql, database

我想从三个 3 表中的 mysql 获取数据。我正在使用`LEFT OUTER JOIN`. 这是我的查询：

```
SELECT cms_addresses.address1 as add1, 
  cms_addresses.email as ademail, 
  cms_addresses.city as adcity, 
  cms_addresses.clientid 
  cms_addresses.country as adcountry, 
  cms_addresses.province as adprovince, 
  cms_addresses.postal as adprovince, 
  cms_delivery_info.d_address1, 
  cms_delivery_info.d_city, 
  cms_delivery_info.d_country, 
  cms_delivery_info.d_province, 
  cms_delivery_info.d_postal, 
  cms_orders.id, 
  cms_orders.cdate, 
  cms_orders.message 
FROM cms_addresses 
LEFT OUTER JOIN cms_delivery_info 
  ON cms_addresses.clientid = cms_delivery_info.d_clientid 
LEFT OUTER JOIN cms_orders = cms_addresses.clientid = cms_orders.clientid
WHERE cms_orders.id = 10
  and cms_addresses.addresstypeid = 1 
```

问题是这个查询没有运行并且给了我那个错误。

> 不是唯一的表/别名：'cms_addresses'

请帮我解决这个问题。谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-06T06:26:05.267

您在第二个左连接中有一个语法错误，表名后面有'=' 试试这个::

```
SELECT 
cms_addresses.address1 as add1, 
cms_addresses.email as ademail, 
cms_addresses.city as adcity, 
cms_addresses.clientid, 
cms_addresses.country as adcountry, 
cms_addresses.province as adprovince, 
cms_addresses.postal as adprovince, 
cms_delivery_info.d_address1, 
cms_delivery_info.d_city, 
cms_delivery_info.d_country, 
cms_delivery_info.d_province, 
cms_delivery_info.d_postal, 
cms_orders.id, 
cms_orders.cdate, 
cms_orders.message 

FROM cms_addresses 

LEFT OUTER JOIN cms_delivery_info ON cms_addresses.clientid = cms_delivery_info.d_clientid 
LEFT OUTER JOIN cms_orders on cms_addresses.clientid = cms_orders.clientid 
WHERE cms_orders.id = 10 and cms_addresses.addresstypeid = 1 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-06T06:26:38.400

`cms_addresses.clientid`在和之间加一个逗号`cms_addresses.country AS adcountry`，看看它是否有效

```
SELECT  cms_addresses.address1 AS add1,
        cms_addresses.email AS ademail,
        cms_addresses.city AS adcity,
        cms_addresses.clientid,                  // add comma here
        cms_addresses.country AS adcountry,
        cms_addresses.province AS adprovince,
        cms_addresses.postal AS adprovince,
        cms_delivery_info.d_address1,
        cms_delivery_info.d_city,
        cms_delivery_info.d_country,
        cms_delivery_info.d_province,
        cms_delivery_info.d_postal,
        cms_orders.id,
        cms_orders.cdate,
        cms_orders.message
FROM    cms_addresses
        LEFT JOIN cms_delivery_info
                ON cms_addresses.clientid = cms_delivery_info.d_clientid
        LEFT JOIN cms_orders 
                // use ON instead of = (equal sign) here
                ON cms_addresses.clientid = cms_orders.clientid
WHERE   cms_orders.id = 10 AND cms_addresses.addresstypeid = 1 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-06T06:40:49.177

在你`SELECT`的某个时刻，你有：

```
cms_addresses.clientid cms_addresses.country as adcountry, 
```

看起来你错过了`,`某个地方？

在你的`FROM`你有：

```
LEFT OUTER JOIN cms_orders = cms_addresses.clientid = cms_orders.clientid 
```

我再次猜测这是一个错字（首先`=`应该是 a `ON`）。

您收到的消息意味着您正在重用链中的表`cms_addresses`，`JOIN`并且您没有给它一个别名，这是消歧所必需的，但在您的情况下，这很奇怪，因为您在子句中没有`cms_addresses`超过一次。`FROM`

我会尝试重写为所有表提供别名的查询。还启用完整日志记录并检查真正到达 Mysql 的内容。

# extract - 在图像之后提取锚点，然后使用 IMACROS 单击该特定锚点

> ID：14179886
> 
> 赞同：0
> 
> 时间：2013-01-06T06:24:24.203
> 
> 标签：extract, imacros

我希望在图像之后提取锚点，然后单击我提取的特定锚点。

我试图在 "img src="http:mydomain.com/img/tags.png" 之后提取锚标记

HTML：

```
 <tr>
 <td align="right">50.</td>
 <td>
  <img src="http:mydomain.com/img/tags.png">
  <a href="/tag/dog/">
   <strong>#dog</strong>
  </a>
   <span style="color:#999;">(</span>
    <a title="" target="_blank" href="http://mydomain">+</a>
  <span style="color:#999;">)</span>
</td>
 <td style="vertical-align:middle;">
 </tr> 
```

宏指令：

```
SET !TIMEOUT_PAGE 2
SET !ERRORIGNORE YES
URL GOTO=http://mydomain.com    
TAG POS=1 TYPE=A ATTR=HREF:* EXTRACT=TXT 
```

我是一个完全的菜鸟，所以我很抱歉不知道该怎么做......

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-06T09:38:54.460

如果你想提取“/tag/dog/”时可以使用：

```
TAG POS=1 TYPE=A ATTR=HREF:* EXTRACT=href 
```

如果你想点击抓取的链接，你可以使用：

```
TAG POS=1 TYPE=A ATTR=HREF:{{!extract}} 
```

# django - 应该区别对待空字符串和 NULL 的用例是什么？

> ID：14179893
> 
> 赞同：2
> 
> 时间：2013-01-06T06:25:46.277
> 
> 标签：django, oracle, null

应该将空字符串和 NULL 视为不同值的场景示例是什么？

（我问是因为 Django 和 Oracle 认为它们无法区分，但有些数据库将空字符串和 NULL 视为 2 个不同的值。）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-06-19T08:06:48.423

简而言之，这允许可选的唯一字段。

让我们以金融证券为例：有些是使用多个代码识别的。彭博代码、ISIN 代码、Sedol 代码、路透社代码……但很少有所有证券同时注册所有类型的代码。

但是，如果已经为一种证券分配了一种类型的代码，则您不希望另一种证券重用相同的值。

因此需要唯一性和可选性，混合 '' 和 NULL 可以防止，因为如果您尝试为未分配的代码插入 '' 两次，数据库会抱怨。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-06T06:30:35.103

您可以有一个表示继承层次结构的数据库表（在 .NET 的实体框架中称为 Table-Per-Hierarchy）。这意味着单个表存储该层次结构中所有派生类型以及基类的状态。

看看这个类层次结构：

```
public class Animal
{
   int Id,
   int NumberOfLegs
}

public class Cat : Animal
{
   string FurColor;
} 
```

基类 Animal 没有字符串属性。但是，名为 Cat 的派生类型有一个名为 FurColor 的字符串属性。如果我们使用 Table-Per-Hierarchy，那么我们将拥有以下列：

```
ID | NumberOfLegs | FurColor 
```

我们可能还会有一个所谓的*鉴别*器列，它有助于区分不同的类型，但这在这里并不重要。

现在，如果您有一个`Animal`基类的实例，您的对象将只有 2 个属性。当这个对象被存储到数据库表中时，因为该属性与类`FurColor`无关，所以没有任何价值。`Animal`因此`NULL`是最合适的值，因为它表明该属性没有明确的值。另一方面，空字符串可以被认为具有某种含义，这对于`Animal`对象来说在结构上是不正确的，因为该属性在其上不存在。

如果你有一个`Cat`类的实例，那么你的对象将有 3 个属性。将其保存到数据库表在概念上需要所有 3 个字段。如果`FurColor`没有特定值，空字符串是完全有效的，在我看来是比`NULL`. 这是因为当您从数据库中读回对象时，您不必`NULL`在将其用于字符串连接等操作之前专门检查该属性（这将在大多数静态类型中抛出类似于 NULL 引用异常的内容C# 等语言）。

长话短说，NULL 可以被认为是“无价值”的，其中空字符串可能是您的应用程序中完全有效的值。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-06T07:17:42.843

在我看来，这两个值在语义上是不同的。空字符串是一个有效的字符串实例，而 null 表示该值根本没有设置（请注意，通常 null 不是仅为字符串类型保留的，而是适用于任何可空类型的一般概念，因此我不处理null 作为字符串值（即来自所有可能字符串值的集合中的值），而空字符串特定于字符串类型并且是字符串值 - 即它属于可能的字符串值集合）。要理解我的意思，请查看可空整数类型 - 0 和 null 之间有区别吗？显然有。string 和 int 示例之间的区别在于，在现实世界中 0 比空字符串更有用。在现实世界中，空字符串和 null 也经常是等价的。当您可能想要空字符串而不是 null 时，一种用例是您想要从字符串中删除所有出现的字符/子字符串。最简单的方法是将要删除的内容替换为空字符串。我不知道用空值替换子字符串意味着什么 - 根据您使用的语言，它的行为可能会有所不同。但是，如果我使用空字符串，无论语言如何，我都会期望相同的行为。

# java - 在创建spring hibernate sessionfactory后插入数据库

> ID：14179898
> 
> 赞同：0
> 
> 时间：2013-01-06T06:26:12.710
> 
> 标签：java, database, spring-3, sessionfactory, hibernate-4.x

我想在`SessionFactory`创建 spring hibernate 之后在数据库表中插入一些数据。

我有一个表，如果不存在`CUSTOMER`，我想在该表中插入一个特定的。`Customer``Customer`

这是以下配置`SessionFactory`：

```
<bean id="sessionFactory" class="org.springframework.orm.hibernate4.LocalSessionFactoryBean">
    <property name="dataSource" ref="dataSource" />
    <property name="hibernateProperties">
        <props>
            <prop key="hibernate.dialect">org.hibernate.dialect.MySQLDialect</prop>
            <prop key="hibernate.show_sql">true</prop>
            <prop key="hibernate.hbm2ddl.auto">update</prop>
        </props>
    </property>
    <property name="packagesToScan" value="com.edfx.adb.persist.entity" />
    <property name="entityInterceptor" ref="entityInterceptor" />
</bean> 
```

我知道有一个选项`hibernate.hbm2ddl.import_files`，我们可以从中提及一个 sql 文件，并且查询将在`SessionFactory`初始化时执行。但我不想走这条路。

我也发现我们可以`ServletContextListener`用于这种目的，但我不确定这是实现我想要的好方法。因为我的理解是在部署war文件后，当第一个用户点击应用程序时，监听器将被初始化。因此，如果我有一个运行的调度程序，`Customer`并且如果调度程序在任何用户点击应用程序之前执行，那么调度程序就不会找到需要插入的数据。

任何指针都会对我很有帮助。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-06T06:38:15.997

您可以根据需要扩展`org.springframework.orm.hibernate4.LocalSessionFactoryBean`和覆盖方法。`buildSessionFactory()`

# php - 通过 Facebook 应用程序了解用户是否登录的方式。

> ID：14179901
> 
> 赞同：0
> 
> 时间：2013-01-06T06:26:20.070
> 
> 标签：php, facebook, codeigniter, facebook-graph-api

所以我正在使用 Facebook 登录和身份验证构建一个应用程序。使用下面的代码一切都很好（根据文档）

```
require 'facebook-php-sdk/src/facebook.php';

$facebook = new Facebook(array(
  'appId'  => 'YOUR_APP_ID',
  'secret' => 'YOUR_APP_SECRET',
));

// Get User ID
$user = $facebook->getUser();

if ($user) {
  try {
    // Proceed knowing you have a logged in user who's authenticated.
    $user_profile = $facebook->api('/me');
  } catch (FacebookApiException $e) {
    error_log($e);
    $user = null;
  }
} 
```

我的问题是如何判断用户是否已登录，而无需在其他地方再次执行上述所有操作。例如，在我看来，我如何能够快速测试用户是否登录？`Facebook::getUser()`如果它在我的 Codeigniter 应用程序中不起作用，我会简单地调用它。我在我看来尝试了下面的代码。

```
$user =  Facebook::getUser(); 
```

并得到错误：

```
A PHP Error was encountered

Severity: Notice

Message: Undefined property: CI_Loader::$user

Filename: src/base_facebook.php

Line Number: 504

Fatal error: Call to undefined method CI_Loader::getUserFromAvailableData() in /home/syklone911/webapps/meme/application/libraries/facebook/src/base_facebook.php on line 509 
```

有人可以对此有所了解吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-06T19:39:36.663

**在application/config**文件夹中创建一个新文件，并将其命名为**facebook.php**，内容如下：

```
if ( ! defined('BASEPATH')) exit('No direct script access allowed');
$config['appId'] = 'your_app_id';
$config['secret'] = 'your_app_secret'; 
```

**在application/libraries**中创建一个文件夹，并将其命名为**facebook**，其中包含内容（facebook php SDK 文件）：

*   base_facebook.php
*   Facebook.php**注意**：（将 facebook.php 重命名为 Facebook.php 并在第一行添加：

    if ( !defined('BASEPATH')) exit('不允许直接访问脚本');

*   fb_ca_chain_bundle.crt

当您想在任何控制器中**加载库**时，您只需执行以下操作：

```
$config = $this->load->config('facebook', TRUE);  
$this->load->library('facebook/facebook', $config); 
```

在您看来要测试用户是否已登录：

```
$user = $this->facebook->getUser();  
if($user){
    try{
        $user_profile = $this->facebook->api('/me');
        $access_token = $this->facebook->getAccessToken();
    }catch (FacebookApiException $e) {
        $user = null;
    }
}
if($user){  
    //User is logged in via Facebook  
}else{  
    //User is not logged. Prompt the user to log in via Facebook  
    echo '<a href="'.$this->facebook->getLoginUrl().'">Login Via Facebook</a>';
} 
```

就这样。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-06T08:08:29.143

好吧，您需要将所需的 facebook 数据存储在某种会话变量中，以便您可以在整个应用程序中使用

和更好的清洁编码实践，您可能有带有会话检查的中间控制器 MY_Controller 以及用户是否登录并在中间控制器中设置超级对象

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-06T09:29:59.907

`if($user)`放置 之后`if( session_id() ){} else { session_start() ; }` 并且在每个页面的开头，您必须使用它`if( session_id() ){} else { session_start() ; }`，无论您想在所有页面中使用什么数据，都应该将其存储在会话变量中，如下所示：`$_SESSION['VARIABLE_NAME'] ='DATA TO STORE'`这将使该数据在所有页面上保持活动状态。注意：您必须在要使用 GRAPH API 的每个页面上启动 facebook 类。IE `require 'facebook-php-sdk/src/facebook.php'; $facebook = new Facebook(array( 'appId' => 'YOUR_APP_ID', 'secret' => 'YOUR_APP_SECRET', ));`

# asp.net - 会话结束后应用程序变量被重置

> ID：14179908
> 
> 赞同：0
> 
> 时间：2013-01-06T06:27:30.273
> 
> 标签：asp.net, asp.net-mvc

我想在我的 ASP 站点中插入一个访问者计数器，所以我使用了 global.asax 文件来实现它。问题是当会话结束时，“AllVisitorCount”获取默认值，在我的 web.Config 中设置为 0。

代码是：

```
void Session_Start(object sender, EventArgs e) {
  // Code that runs when a new session is started
  int allVisitorCount = 0;
  if (Application["AllVisitorCount"] != null)
    allVisitorCount = (int)(Application["AllVisitorCount"]);
  else
    Application.Add("AllVisitorCount", 0);
  allVisitorCount++;
  Application["AllVisitorCount"] = allVisitorCount;
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-06T08:41:33.773

“应用程序”不是永久对象。它在您的应用程序启动时创建（例如，第一个会话启动）并在您的应用程序池超时后处理。您可以保留变量或简单地更改 AppPool 中的“空闲超时”参数（IIS=>应用程序池 => 您的 AppPool（或 DefaultAppPool，如果您尚未定义）=> 高级设置 => 空闲超时）。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-06T06:42:13.123

确保你的 web.config 中的 slipExpiration 设置为 False

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-06T06:53:54.140

您的应用程序池可能会因会话超时，从而清除所有应用程序变量。

请提供更多详细信息，例如：这是否托管在 IIS、IIS Express、Cassini 中；会话如何结束（以编程方式、超时等）；您是否在 Application_End 上放置了断点以查看是否触发了事件。

# java - 如何使用 GoogleAppEngine 创建表

> ID：14179910
> 
> 赞同：0
> 
> 时间：2013-01-06T06:28:09.087
> 
> 标签：java, google-app-engine

我想在 googleAppengine 上存储朋友列表及其位置（GPS 坐标）。我正在将 J2ME 与 Netbeans 一起使用。如何在 Google App Engine 中存储或创建表？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-06T08:38:36.793

App Engine 数据存储区是无架构的。与关系数据库中的表最接近的是*kind*。每种*类型*都包含*实体*（记录），所有这些实体（记录）都具有*属性*（字段）。重要的是要注意给定*种类的**实体*不需要具有相同的*属性*。有关详细信息，请参阅[数据存储文档](https://developers.google.com/appengine/docs/java/datastore/overview#Entities)。

 **写入 App Engine 数据存储区时，您无需预先创建表/种类，而是只需创建要存储的给定种类的实体（记录），然后告诉 App Engine 进行存储。请参阅[此处](https://developers.google.com/appengine/docs/java/datastore/entities#Kinds_and_Identifiers)以获取简短示例。

如果您想在 App Engine 中使用关系数据库，请使用 Google Cloud SQL（本质上是与您的 App Engine 应用程序位于同一位置的 MySQL 数据库）。**

# php - PHP：SimpleXML 写入问题

> ID：14179915
> 
> 赞同：1
> 
> 时间：2013-01-06T06:28:43.977
> 
> 标签：php, xml, simplexml

我正在使用 SimpleXML 写入我的 Apache 服务器上的 XML 文件。这是我的PHP代码：

```
<?php
  $xmlFile = 'http://localhost/database.xml';
  //$xml = new SimpleXMLElement($xmlFile, NULL, TRUE);
  $xml = simplexml_load_file($xmlFile);
  $xml->addChild("User", "TestUser2");
  file_put_contents($xmlFile, $xml->asXML());
?> 
```

我的 XML 文件代码：

```
<Usernames>
  <User>TestUser1</User>
</Usernames> 
```

我遇到的问题是 SimpleXML 不会写入我的 XML 文件。我尝试了许多不同的方法（`$xml->asXML($xmlFile), DOMDocument ... ->save`），但都没有奏效。我更改了文件的权限，但仍然无法写入：

![权限](../Images/c3550eb1c9ec5ed4c13591bdcaaa8d2d.png)

我今天花了几个小时试图让这个工作没有成功。如果有人有任何类型的解决方案，很高兴听到。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-06T06:42:12.703

当您将内容写入文件时，您应该传递一个系统文件路径作为第一个变量，您的 $xmlFile 变量是一个 URL。将其更改为本地文件名，它应该保存。

根据您的评论，以下应该有效

```
<?php
  $xmlFile = 'http://localhost/database.xml';
  $xml = simplexml_load_file($xmlFile);
  $xml->addChild("User", "TestUser2");
  file_put_contents('/Applications/MAMP/htdocs/DataBase/database.xml', $xml->asXML()); 
```

但是，我会仔细检查 $xmlFile URL - 根据您所说的，您的本地 URL 可能是`http://localhost/DataBase/database.xml`- 您应该检查您是否可以使用 $xmlFile URL 在 Safari 中打开您的 XML 文件。

# ios - 试图理解 PageViewController

> ID：14179922
> 
> 赞同：0
> 
> 时间：2013-01-06T06:30:07.190
> 
> 标签：ios, uipageviewcontroller

我通读了文档，但是我仍然无法理解这个文档。我有一个导航 VC，我将一个 pageview VC 设置为它的根（虽然它没有在 PageViewController 的 viewdidload 中命中我的断点）。到目前为止，一切都在故事板中完成。

我现在是否在情节提要中创建两个新的视图控制器并用这两个创建一个数组？他们从哪里获得此页面 VC 的 VC？

谢谢。

这是来自 pageviewcontroller 的一些代码：（没有任何反应，只是黑屏）

@实现结果视图控制器

```
- (void)viewDidLoad
{
    [super viewDidLoad];
    self.delegate=self;
    self.dataSource=self;

    NSMutableArray *array=[[NSMutableArray alloc]init];
    [array addObject:[[Page1ViewController alloc]init]];
     [array addObject:[[Page2ViewController alloc]init]];

    [self setViewControllers:[NSArray arrayWithArray:array] direction:UIPageViewControllerNavigationDirectionForward animated:YES completion:nil];
    // Do any additional setup after loading the view.
}
-(void)setViewControllers:(NSArray *)viewControllers direction:(UIPageViewControllerNavigationDirection)direction animated:(BOOL)animated completion:(void (^)(BOOL))completion{};

- (void)didReceiveMemoryWarning
{
    [super didReceiveMemoryWarning];
    // Dispose of any resources that can be recreated.
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-06T15:20:00.230

要了解 UIPageViewController 如何使用故事板工作，您应该只创建一个新项目，而不是选择单视图应用程序，只需选择基于页面的视图应用程序，它将自动连接所有内容，然后您可以从那里进一步自定义。

# ruby-on-rails - jQuery-TokenInput 预填充数据更改的意外结果

> ID：14179930
> 
> 赞同：0
> 
> 时间：2013-01-06T06:31:11.180
> 
> 标签：ruby-on-rails, ruby-on-rails-3, jquery-ui, jquery-tokeninput

[通过jQuery-TokenInput](http://loopj.com/jquery-tokeninput/) pre_populated 数据集更改，我得到了意想不到的结果。
我遵循[Railscasts - Token Fields并使用](http://railscasts.com/episodes/258-token-fields)[Railscasts - Token Fields Revised source code](https://github.com/railscasts/258-token-fields/tree/master/revised) acc更新了必要的代码。到最新的 Rails 版本。

我处理令牌搜索查询的咖啡脚本代码是：

`jQuery ->
$('#user_tracker_ids').tokenInput '/trackers.json'
prePopulate: $('#user_tracker_ids').data('load')
minChars: 3
hintText: "Type in name"
preventDuplicates : true`

我奇怪的结果是：

1.  案例1：[*初始案例*][正确]
    当令牌字段为空时，即没有预先填充的数据，我输入任何没有。令牌，我在我的服务器端操作中获得了与令牌相关联的 ID，这是正确的。

2.  案例2：[*结束案例*][正确]
    当我删除之前输入的所有ID，即删除所有预先填充的数据时，我得到了`0`ID，这也是正确的。

3.  **案例3**：[***失败案例***][错误]
    当令牌输入中已经有值并且我更新它们时，例如添加更多令牌，删除一些现有令牌，我只获得添加的令牌的ID当前的编辑会话。对 query-tokenInput 中的预填充数据所做的更改不会发送到服务器端操作。

我确定我在这里遗漏了一些细节设置，但我无法找到并修复它。
如果您需要更多信息。要找到问题，请告诉我。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-16T11:59:41.183

用这个

```
 $(elementId).tokenInput("",
                {
                    prePopulate:JSON.parse(YourJsonFormatStringHere)
                }); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-01T17:31:49.033

这对我来说是一个错误，而且确实是一个愚蠢的错误。
`prePopulate: $('#user_tracker_ids').data('load')`

在`prePopulate`调用的输入中，正在发送的数据不完整。我只传递了 对象的**名称**字段，没有传递**id**字段。

因此，token-input 能够正确显示预填充数据的名称，但对其所做的任何更改都没有反映出来，正如我在上面的问题中提到的那样。

# c++ - SFML 生成等距平铺

> ID：14179931
> 
> 赞同：1
> 
> 时间：2013-01-06T06:31:49.130
> 
> 标签：c++, graphics, 2d, sfml

我有一个精灵，一个正方形，只是用于正交投影。现在我想以一种非常基本、简单的等距方式投影它。（我知道这可能不漂亮，但我只是想弄清楚）

给定我的正方形，我将它旋转 45 度。现在，如果我理解正确，我仍然应该将我的身高除以 2。这在 SFML 中对我来说是不可能的。有一个缩放功能，但如果我在 y 轴方向上缩放 0.5 倍，我的立方体只会被拉伸，而不是菱形。看起来 SFML 似乎根据它自己的相对轴（之前旋转过......）来转换精灵。

由于您无法访问精灵的高度，我想知道这是否可能？

**我可以在 SFML 中将方形精灵转换为菱形吗？**

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-06T07:34:54.453

使用 sf::RenderTexture 是一种选择（请参阅[其他答案](https://stackoverflow.com/a/14180047/1801919)）。另一种选择是摆弄`sf::View`. 将视图的高度加倍，并调整坐标。它会是这样的：

```
my_sprite.setRotation(45.f);
//adjust the position for new screen coordinates (once)
my_sprite.setPosition(my_sprite.getPosition().x, my_sprite.getPosition().y * 2);

//...

//when drawing:
sf::View v = my_render_window.getDefaultView();
v.setSize(v.getSize().x, v.getSize().y * 2);
v.setCenter(v.getSize() *.5f);

my_render_window.setView(v);
my_render_window.draw(my_sprite);
my_render_window.setView(my_render_window.getDefaultView()); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-06T06:51:46.303

像现在一样旋转你的精灵。将其渲染到[sf::RenderTexture](http://www.sfml-dev.org/documentation/2.0/classsf_1_1RenderTexture.php)。使用成员函数[`getTexture`](http://www.sfml-dev.org/documentation/2.0/classsf_1_1RenderTexture.php#a95bc5152c497066d31fdc57da8e17678)，并从中创建一个新的精灵，或者重用旧的精灵。沿 y 轴缩放精灵。将其绘制到渲染窗口。

为了设置`RenderTexture`正确的大小并将原始精灵绘制在正确的位置，您可能需要进行一些数学运算。

```
original_sprite.setRotation(45);
sf::RenderTexture rt;
rt.create(FigureOutWidth(),FigureOutHeight());
original_sprite.setPosition(MoreMathHere());
rt.draw(original_sprite);
sf::Sprite new_sprite(rt.getTexture());
new_sprite.setScale(1.0,0.5); 
```

不言而喻，但在初始化时执行一次，而不是每一帧。

# python - 尝试使用 Python 2.7 时出现导入错误

> ID：14179934
> 
> 赞同：0
> 
> 时间：2013-01-06T06:32:10.350
> 
> 标签：python, xlwt

我需要从`xlwt`模块导入类，因此我尝试出错。为什么这样？你能在这里指导我吗？

```
Microsoft Windows [Version 6.1.7600]
Copyright (c) 2009 Microsoft Corporation.  All rights reserved.

C:\Users\Matty>python
Python 2.7.3 (default, Apr 10 2012, 23:31:26) [MSC v.1500 32 bit (Intel)] on win
32
Type "help", "copyright", "credits" or "license" for more information.
>>> from xlwt import easyxf
Traceback (most recent call last):
  File "<stdin>", line 1, in <module>
ImportError: No module named xlwt
>>> from xlwt import Workbook
Traceback (most recent call last):
  File "<stdin>", line 1, in <module>
ImportError: No module named xlwt
>>> 
```

**编辑**

```
C:\Users\matt>easy_install xlwt
Searching for xlwt
Best match: xlwt 0.7.4
Processing xlwt-0.7.4-py2.7.egg
Adding xlwt 0.7.4 to easy-install.pth file

Using c:\python27\lib\site-packages\xlwt-0.7.4-py2.7.egg
Processing dependencies for xlwt
Finished processing dependencies for xlwt

C:\Users\matt> 
```

**编辑1**

**根据@Ab 的评论，它可以工作。**

***但是为什么我需要导入 sys ？***

```
C:\Users\matt>python
Python 2.7.3 (default, Apr 10 2012, 23:31:26) [MSC v.1500 32 bit (Intel)] on win
32
Type "help", "copyright", "credits" or "license" for more information.
>>> import sys
>>> sys.path
['', 'C:\\Python27\\lib\\site-packages\\beautifulsoup4-4.1.3-py2.7.egg', 'C:\\Py
thon27\\lib\\site-packages\\selenium-2.28.0-py2.7.egg', 'C:\\Python27\\lib\\site
-packages\\xlwt-0.7.4-py2.7.egg', 'C:\\Windows\\system32\\python27.zip', 'C:\\Py
thon27\\DLLs', 'C:\\Python27\\lib', 'C:\\Python27\\lib\\plat-win', 'C:\\Python27
\\lib\\lib-tk', 'C:\\Python27', 'C:\\Python27\\lib\\site-packages']
>>> from xlwt import easyxf
>>> from xlwt import Workbook
>>> from xlwt import *
>>> 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-06T07:03:40.403

您可以运行`import sys ; sys.path`并查看是否`c:\python27\lib\site-packages\`在您的路径列表中。如果是，那么再次尝试运行`from xlwt import easyxf`

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-06T06:41:18.820

你显然没有`xlwt`安装，或者 Python 不知道你安装了。

尝试运行`pip install xlwt`。

您还可以查看代码的物理`xlwt`位置，然后将该文件目录添加到您的目录中，`PYTHONPATH`以便 Python 知道在那里查找模块。

这可能是因为您正在从`virtualenv`尚未`xlwt`安装的代码中运行代码。

# php - 自定义配置文件不适用于表单验证

> ID：14179936
> 
> 赞同：2
> 
> 时间：2013-01-06T06:32:27.150
> 
> 标签：php, codeigniter, validation

我已经在 application/config/validation_rules.php 中设置了验证规则，它看起来像这样（短版）

```
$config = array(
        'member/register' => array(
            'field' => 'language',
            'label' => 'language',
            'rules' => 'required|min_length[5]|max_length[12]'
        ),
        array(
            'field' => 'email',
            'label' => 'email',
            'rules' => 'required|valid_email'
        ),
        array(
            'field' => 'password',
            'label' => 'password',
            'rules' => 'required|min_length[8]'
        ),
        array(
            'field' => 'verify_password',
            'label' => 'password',
            'rules' => 'required|min_length[8]|matches[password]'
        )); 
```

我这样称呼它：

```
$this->config->load('validation_rules');
$this->form_validation->set_rules($config);
if($this->form_validation->run('member/register') == FALSE)
{
    $page = array(
            'meta_title' => 'member registration',
            'load_page' => 'front/register_view'
    );

    $this->load->view('front/template', $page);
} 
```

不仅 validation_errors() 函数没有显示任何内容，而且我也收到此错误：

```
Message: Undefined variable: config 
```

更新：（这是我的控制器）

```
class register extends CI_Controller
{
    function __construct()
    {
        parent::__construct();
        $this->load->library('form_validation');
    }
    function index()
    {
        $this->config->load('validation_rules', TRUE);
        $this->form_validation->set_rules($this->config->item('config', 'validation_rules'));
        if($this->form_validation->run('member/register') == FALSE)
        {
            //validation doesnt pass, load view
            $page = array(
            'meta_title' => 'member registration',
            'load_page' => 'front/register_view'
            );

            $this->load->view('front/template', $page);
        }
        else
        {
            $register_data = array(
            'language' => $this->input->post('language'),
            'email' => $this->input->post('email'),
            'password' => md5($this->input->post('password')),
            'fname' => $this->input->post('fname'),
            'lname' => $this->input->post('lname'),
            'phone' => $this->input->post('phone'),
            'address' => $this->input->post('address'),
            'address2' => $this->input->post('address2'),
            'city' => $this->input->post('city'),
            'state' => $this->input->post('state'),
            'zipcode' => $this->input->post('zipcode'),
            'gfname' => $this->input->post('gfname'),
            'glname' => $this->input->post('glname'),
            'gphone' => $this->input->post('gphone')
            );
            $this->session->set_userdata($register_data);

        }
    }

    function package()
    {
        $page = array(
        'meta_title' => 'Register Package',
        'load_page' => 'register_package_view'
        );
        $this->load->view('includes/template', $page);
    }

} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-11-15T11:51:34.773

我遇到了同样的问题，但我设法通过使用以下配置来解决它：

在我的应用程序/config/form_validation.php 中：

```
$config = array(
    "register" => array(
        array(
            "field" => "username",
            "label" => "Username",
            "rules" => "required"
        )
    )
); 
```

在 application/config/autoload.php 中自动加载自定义配置文件“form_validation.php”：

```
$autoload['config'] = array('form_validation'); 
```

在我的控制器中：

```
// manually set rules by taking $config["register"] from form_validation.php
$this->form_validation->set_rules($this->config->item("register"));

// call run() without parameter
if ($this->form_validation->run() == FALSE) {
    $this->load->view("user/register_test");
} else {
    echo "Form content is correct";
} 
```

我尝试使用 调用验证器`$this->form_validation->run("register")`，而不使用`$this->form_validation->set_rules()`函数，但我没有运气。通过从 form_validation.php 中的配置数组中检索规则来手动设置规则让我很开心。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-12-18T23:03:57.803

如果要扩展 form_validation 库，则需要将`$config`数组传递给父构造函数：

```
class MY_Form_validation extends  CI_Form_validation {

/**
 * constuctoooor
 */
function MY_Form_validation($config){
    parent::__construct($config);

} 
```

[http://ellislab.com/forums/viewthread/181937/](http://ellislab.com/forums/viewthread/181937/)

使用文档中概述的方法也更清洁：http: [//ellislab.com/codeigniter%20/user-guide/libraries/form_validation.html#savingtoconfig](http://ellislab.com/codeigniter%20/user-guide/libraries/form_validation.html#savingtoconfig)以避免调用`$this->form_validation->set_rules(...);`

```
/**
 * This is the POST target for the password reset form above
 * @return null
 */
    public function submit(){

        // perform validation //
        if($this->form_validation->run() == FALSE){
            // display error on sign-up page //
            $this->session->set_flashdata("system_validation_errors", validation_errors());
            redirect('member/forgot/password');
        }

        // more awesome code
    } 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-06T06:34:10.163

```
$this->config->load('validation_rules');
$this->form_validation->set_rules($config); 
```

应该：

```
$this->config->load('validation_rules', TRUE);
$this->form_validation->set_rules($this->config->item('validation_rules', 'validation_rules')); 
```

根据[文档](http://ellislab.com/codeigniter/user-guide/libraries/config.html)：

```
// Loads a config file named blog_settings.php and assigns it to an index named "blog_settings"
$this->config->load('blog_settings', TRUE);

// Retrieve a config item named site_name contained within the blog_settings array
$site_name = $this->config->item('site_name', 'blog_settings'); 
```

你的规则是错误的，你忘了把验证组放在一个数组中：

```
$config['validation_rules'] = array(
        'member/register' => array(
            array(
                'field' => 'language',
                'label' => 'language',
                'rules' => 'required|min_length[5]|max_length[12]'
            ),
            array(
                'field' => 'email',
                'label' => 'email',
                'rules' => 'required|valid_email'
            ),
            array(
                'field' => 'password',
                'label' => 'password',
                'rules' => 'required|min_length[8]'
            ),
            array(
                'field' => 'verify_password',
                'label' => 'password',
                'rules' => 'required|min_length[8]|matches[password]'
            )
        )
); 
```

# select - 选择与多列不同

> ID：14179938
> 
> 赞同：-1
> 
> 时间：2013-01-06T06:32:48.053
> 
> 标签：select, distinct

a 中有 col1 和 col2 `<dataset>`。对于每个 col1 条目，在 col2 中可能有也可能不超过 1 行具有不同的值。如果我使用 Select distinct(col1), col2`<dataset>`我会得到什么结果？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-06T06:54:11.047

我给出了使用 Oracle 进行演示的简单示例。我正在使用 SCOTT 帐户来执行命令。我有 14 条记录和 8 列：

```
empno ename job mgr hiredate sal comm deptno 
```

您知道您会为每条记录找到唯一的 empno。现在，如果您将命令编写为：

```
select distinct deptno, job from emp order by deptno; 
```

您将获得以下记录：

```
DEPTNO JOB 
```

* * *

```
 10 CLERK
    10 MANAGER
    10 PRESIDENT
    20 ANALYST
    20 CLERK
    20 MANAGER
    30 CLERK
    30 MANAGER
    30 SALESMAN 
```

这意味着它将选择唯一的 deptno，并且在每个 deptno 中，如果该作业有一个不同的作业，并且将显示相应的 deptno。它为每个部门提供了不同的工作。

# neo4j - 我们可以检查 Cypher 或 Gremlin 生成的翻译后的函数调用吗？

> ID：14179940
> 
> 赞同：2
> 
> 时间：2013-01-06T06:33:21.033
> 
> 标签：neo4j, cypher, gremlin

我相信在内部 Cypher / Gremlin 将语句转换为相应的 Java 方法调用。有没有办法跟踪运行中的方法调用？

例如，在 Hibernate 中，我们可以指定“show sql”来查看生成的 sql 语句。

[编辑] 我想这样做的原因： 1\. 出于调试目的：找出密码 / gremlin 没有产生预期结果的原因。

1.  用于学习目的：找出幕后发生的事情

2.  优化：找出瓶颈在哪里。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-06T09:07:44.723

在 Cypher 中，计划在未来几个月内添加。最终，是的，目前在 Hood 下使用的方法是 Java Neo4j 核心 API 和 Traversal Framework。介意添加一个导致您出现问题的案例吗？

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-06T19:30:07.740

对于 Gremlin，在 Gremlin 表达式的末尾执行 .toString() 以查看它最终编译到的 Pipes (http://pipes.tinkerpop.com)。

# python - 如何在没有root权限的情况下安装python包？

> ID：14179941
> 
> 赞同：32
> 
> 时间：2013-01-06T06:33:47.493
> 
> 标签：python, numpy, installation, scipy

我正在使用`numpy`// 在 Mac OS X 上做一些研究计算`scipy`。`pynest`为了性能，我们从我们大学租用了一个 400 节点的集群（使用 Linux），以便可以并行完成任务。问题是我们不允许在集群上安装任何额外的包（没有`sudo`或任何安装工具），它们只提供原始 python 本身。

那么如何在集群上运行我的脚本呢？有什么方法可以集成模块（我认为 numpy 和 scipy 也有一些已编译的二进制文件），以便可以在不安装包的情况下解释和执行它？

* * *

## 回答 #1

> 赞同：43
> 
> 时间：2013-01-06T14:39:32.653

You don't need root privileges to install packages *in your home directory*. You can do that with a command such as

```
pip install --user numpy 
```

or from source

```
python setup.py install --user 
```

See [https://stackoverflow.com/a/7143496/284795](https://stackoverflow.com/a/7143496/284795)

* * *

The first alternative is much more convenient, so if the server doesn't have `pip` or `easy_install`, you should politely ask the admins to add it, explaining the benefit to them (they won't be bothered anymore by requests for individual packages).

* * *

## 回答 #2

> 赞同：12
> 
> 时间：2013-01-06T06:39:11.097

[您可以通过virtualenv](http://pypi.python.org/pypi/virtualenv)包创建一个虚拟环境。

这将创建一个文件夹（例如`venv`），其中包含 Python 可执行文件的新副本和一个新`site-packages`目录，您可以在其中“安装”任意数量的包，而根本不需要任何类型的管理访问权限。因此，通过激活环境`source venv/bin/activate`将为 Python 提供一个相当于安装了这些包的环境。

我知道这适用于 SGE 集群，尽管激活虚拟环境的方式可能取决于集群的配置。

您可以尝试`virtualenv`使用以下步骤在您自己的站点包目录中的集群上安装：

1.  [从这里](https://github.com/pypa/virtualenv/archive/develop.zip)下载 virtualenv ，把它放到你的集群上

2.  将其安装`setup.py`到特定的本地目录以用作您自己的站点包：

    ```
    python setup.py build
    python setup.py install --install-base /path/to/local-site-packages 
    ```

3.  将该目录添加到您的 PYTHONPATH：

    ```
    export PYTHONPATH="/path/to/local-site-packages:${PYTHONPATH}" 
    ```

4.  创建一个虚拟环境：

    ```
    virtualenv venv 
    ```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2014-01-13T04:46:25.913

您可以通过调用从任意路径导入模块：

`sys.path.append()`

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2015-12-02T02:46:15.063

Python Distribution Anaconda 解决了这个问题中讨论的许多问题。Anaconda 不需要管理员或 root 访问权限，并且能够安装到您的主目录。Anaconda 附带了许多有问题的软件包（scipy、numpy、sklearn 等）以及 conda 安装程序，用于在需要其他软件包时安装其他软件包。

可以从[https://www.continuum.io/downloads下载](https://www.continuum.io/downloads)

# javascript - 在更改不透明度时更改另一个 div 内的可点击 div 的单击事件

> ID：14179943
> 
> 赞同：2
> 
> 时间：2013-01-06T06:34:00.570
> 
> 标签：javascript, jquery, html, css

我的HTML结构如下：

```
<div class="boxes workshops wrapl">
    <a href="#" id="showw1" class="workshops-button lfloat">Show it</a>
</div>

<div class="boxes exhibitions">
    <a href="#" id="showex1" class="exhibitions-button lfloat">Show it</a>
</div> 
<div class="boxes gallery">
    <a href="#" id="showex1" class="gallery-button lfloat">Show it</a>
</div> 
```

类`.boxes`是彼此相邻设置的正方形。大约有30个盒子。最初，所有框都设置为`opacity:1`，所有`-button`类都设置为`opacity:0`。

但是，如果我将鼠标悬停在 .boxes 内，链接也是可点击的。

[我的代码在 Jsfiddle 上](http://jsfiddle.net/prateeksachan/qGpML/)

如果您看到 Jsfiddle，我仍然可以`click`为`.boxes`那些已经淡出或当我目前处于`home`状态时。

**编辑＃1** 以下是相关代码：

[HTML 代码](http://dpaste.com/865902/)

[Javascript代码](http://dpaste.com/865899/)

[CSS 代码](http://dpaste.com/865903/)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-06T07:00:49.793

看到这个：http: [//jsfiddle.net/qGpML/5/](http://jsfiddle.net/qGpML/5/)

```
var isHome = true;
    $(function () {
$('.boxes').find('a').hide();
        $("#navi a").click(function() {
            c = $(this).text().toLowerCase();
           $('.boxes').find('a').show();
            isHome = c=="home";
            if (isHome){
                $('.events-button, .workshops-button, .gallery-button, .sponsors-button, .hospitality-button, .lectures-button, .exhibitions-button').animate({opacity:0.0},500);
                $('.boxes').find('a').hide();
                $(".boxes").animate({opacity: 1.0}, 500 );

            } else {
                $('.' + c).animate({opacity: 1.0}, 500 );
                $('.' + c + "-button").animate({opacity: 1.0}, 500 ).addClass('activehack');
                $('.activehack').not('.' + c + "-button").animate({opacity: 0.0}, 500 );
                $('.boxes').not('.' + c).animate({opacity: 0.3}, 500 );
        $('.boxes').not('.' + c ).find('a').hide();
            }
        });
    }); 
```

# html - 使用html创建一个在一个页面中打开多个图像的超链接

> ID：14179947
> 
> 赞同：0
> 
> 时间：2013-01-06T06:34:25.140
> 
> 标签：html

如何创建仅在一个页面中打开多个图像的可点击链接？我将所有图像托管在 photobucket 中。我能够创建一个链接以仅打开一个图像但不能同时打开多个图像。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-06T09:16:34.717

您必须为所有图像集创建不同的 HTML 文件。您不仅要创建 HTML 文件，还必须将这些 HTML 文档在线上传到服务器上，以便人们可以从任何地方访问它。

**1\. 创建一个 HTML 文件** 打开记事本或任何纯文本编辑器并将其粘贴到您的文件中

```
<!DOCTYPE html>
<html>
<head>
<meta charset=utf-8 />
<title>Your page title</title>
  <style type='text/css'>
    .image-container {text-align:center;}
    img {width:80%;height:auto;display:block;margin:10px auto;border:2px solid black;padding:5px;}
  </style>
</head>
<body>
  <h2> The first 50 pictures (or whatever title you want)</h2>

<!-- Images below -->

<div class='image-container'>

  <!-- Each images are in img tag, put the photobucket images link into the src attribute. Repeat the img tags if you want more images -->

  <img src='http://i923.photobucket.com/albums/ad77/kihani_1996/Troll_Face_.png'/>

  <img src='http://i923.photobucket.com/albums/ad77/kihani_1996/Troll_Face_.png'/>

  <img src='http://i923.photobucket.com/albums/ad77/kihani_1996/Troll_Face_.png'/>

  </div>

</body>
</html> 
```

并将其保存为以 .html 结尾的易于理解的名称`[name].html`，并将类型保存为所有文件 - 确保使用编码 UTF-8 保存文件。只需进行必要的更改并将其上传到服务器并链接它。

对包含不同图像的更多其他 HTML 文件重复这些步骤。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-06T06:42:29.397

将您的图像放在像“images.html”这样的sperated html文件中，并将超链接链接到该页面

```
<a href="images.html">click me </a> 
```

这是 HTML 示例页面：将所有图像放在同一 HTML 页面根目录的 images 文件夹中

```
<html>
<head></head>
<body>
<img src="/images/01.jpg"/> <br>
<img src="/images/01.jpg"/> <br>
<img src="/images/01.jpg"/> <br>
<img src="/images/01.jpg"/> <br>
</body>

</html> 
```

![在此处输入图像描述](../Images/fa1a088eeaff92bf53ec7b8fa7b04a7f.png)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-06T07:16:43.380

将所有 6 个文件保存在同一目录 Image1（名称：html1.html）中

```
<html><body>
 <img src="/image1.jpg"><br>
 </body></html> 
```

Image2（名称：html2.html）

```
<html><body>
 <img src="/image2.jpg"><br>
 </body></html> 
```

Image3（名称：html3.html）

```
<html><body>
 <img src="/image3.jpg"><br>
 </body></html> 
```

Image4（名称：html4.html）

```
<html><body>
 <img src="/image4.jpg"><br>
 </body></html> 
```

Image5（名称：html5.html）

```
<html><body>
 <img src="image5.jpg"><br>
 </body></html> 
```

主要的 html

```
<html><body>
<a href="html1.html">image1</a>
 <a href="html2.html">image2</a>
 <a href="html3.html">image3</a>
 <a href="html4.html">image4</a>
 <a href="html5.html">image5</a>
 </body></html> 
```

我是一个新手，只是一个 12 岁的男孩。为任何错误道歉

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-01-06T08:04:32.567

工作示例：http: [//jsbin.com/eluqod/4/](http://jsbin.com/eluqod/4/)

你不需要成为专家。如果你有 HTML 和 JavaScript 的基本知识，你可以自己做。最简单的选择是使用[jQuery 框架](http://jquery.com)，它是一个少写多做的 JavaScript 库，使交互式网页设计变得容易。

您要做的是创建一个`<div>`容器并使用 HTML 放置所有图像，`<img>`现在您必须在文档中包含 jQuery 库

`<script src="//ajax.googleapis.com/ajax/libs/jquery/1.8.3/jquery.min.js"></script>`

现在使用`hide`和`show`或任何其他效果，如 FadeToggle、SlideToggle 等效果 (http://api.jquery.com/category/effects/) 来切换图像容器 div 的隐藏和显示。使用图像容器和链接设置您的完整页面，首先使用隐藏图像容器，`display:none;`然后使用 jQuery 函数在单击该锚元素时触发一个函数。

这是 jQuery

```
$(document).ready(function(){
  $('#showimg').on('click',function(){

   //Trigger FadeToggle function on click
   $('.image-container').fadeToggle();  

  });
}); 
```

和 HTML

```
 <a id='showimg'>Hide/Show Images</a>

   <div class='image-container' style='display:none;'>
      <img src='images/sample.png'/>
        <img src='images/sample.png'/>
        <img src='images/sample.png'/>
        <img src='images/sample.png'/>
        <img src='images/sample.png'/>
    </div> 
```

请记住在您的页面中添加 JavaScript 库。

检查代码以了解它：http: [//jsbin.com/eluqod/4/edit](http://jsbin.com/eluqod/4/edit)

# android - Android：如何从 Activity 到 Service 再到第二个 Activity

> ID：14179951
> 
> 赞同：1
> 
> 时间：2013-01-06T06:34:50.530
> 
> 标签：android, android-intent, service, android-activity, extras

我正在尝试通过意图向服务发送额外内容，然后该服务打开一个应该接收意图额外内容的活动。当我寻找额外的东西时，在第二个活动中它们似乎是空的，

这是代码片段。

ToDoActivity.java 片段（活动）

```
public void sendNotification(String title, String body){
        Calendar c= Calendar.getInstance(TimeZone.getDefault(), Locale.getDefault());
        c.set(mYear, mMonth, mDay, mhour, mminute, 0);

        Intent intent = new Intent(this, MyAlarmService.class);
        intent.putExtra(TO_DO_ITEM, body);
        intent.putExtra(TO_DO_NAME, title);
        intent.putExtra(TO_DO_TIME, c.getTimeInMillis());
        intent.setFlags(Intent.FLAG_ACTIVITY_SINGLE_TOP);
        intent.setFlags(Intent.FLAG_ACTIVITY_BROUGHT_TO_FRONT);

        PendingIntent mAlarmSender = PendingIntent.getService(ToDoActivity.this,  0, intent, 0);

        AlarmManager alm = (AlarmManager)getSystemService(ALARM_SERVICE);

        alm.set(AlarmManager.RTC_WAKEUP, c.getTimeInMillis(), mAlarmSender);
        Toast.makeText(this, "Alarm has been set for: " + body, Toast.LENGTH_LONG).show();

    } 
```

MyAlarmService.java（服务）

```
@Override
    public int onStartCommand(Intent intent, int flags, int startId){
        super.onStartCommand(intent, flags, startId);

        Intent alert = new Intent();
        try{
            alert.putExtras(intent);
        }catch(NullPointerException npe){

        }

        alert.setClass(this, Alert.class);
        alert.setFlags(Intent.FLAG_ACTIVITY_NEW_TASK);
        startActivity(alert);

        return START_REDELIVER_INTENT;
    } 
```

Alert.java 片段（活动）

```
@Override
public void onCreate(Bundle savedInstanceState){
    super.onCreate(savedInstanceState);

    Builder alert = new AlertDialog.Builder(this);

    Intent i = new Intent();

    Bundle b = savedInstanceState;
    String title="";
    String itemToDo="";
    long time =0;
    try{
        title = b.getString(ToDoActivity.TO_DO_NAME);
        itemToDo = b.getString(ToDoActivity.TO_DO_ITEM);
        time = b.getLong(ToDoActivity.TO_DO_TIME);
    }catch (NullPointerException npe){
        try{
            title = i.getStringExtra(ToDoActivity.TO_DO_NAME);
            itemToDo = i.getStringExtra(ToDoActivity.TO_DO_ITEM);
            time = i.getLongExtra(ToDoActivity.TO_DO_TIME, System.currentTimeMillis());

        }catch(NullPointerException npe2){

        }
    }
    if((!title.equals("") && !itemToDo.equals("") && time !=0))
        makeNotif(title, itemToDo, time);
    alert.setTitle("Alert: Do the item on your to do list!!");
    if(!itemToDo.equals(""))
        alert.setMessage(itemToDo);
    else
        alert.setMessage("There is an item on your To Do List that needs to get done, please check the list and the time");
    alert.setPositiveButton("OK", new DialogInterface.OnClickListener(){
        @Override
        public void onClick(DialogInterface dialog, int which) {
            mp.stop();
            finish();

        }
    });

    playSound(this, getAlarmUri());
    alert.setIcon(R.drawable.ic_launcher);

    AlertDialog ad = alert.create();
    ad.show();

} 
```

此方法在警报中创建通知（与附加功能有关的另一个问题）这里也没有显示信息（因为我将信息从以前的方法传递到这里）

```
static final int uniqueid= 139686;
    public void makeNotif(String title, String body, long timeInMil){
        try{
            NotificationManager nm = (NotificationManager)getSystemService(NOTIFICATION_SERVICE);
            Intent intent = new Intent(this, ToDoActivity.class);

            final String itemToDo=intent.getStringExtra("TDL");
            //          final String title = b.getString("Name");
            final String titleA = intent.getStringExtra("Name");
            //          final long time = b.getLong("Time");
            final long time =intent.getLongExtra("Time",0);

            PendingIntent pi = PendingIntent.getActivity(this, 0, intent, 0);
            //Notification n = new Notification(0, body, System.currentTimeMillis());

            //Notifaction n = Notification

            Notification n = new Notification.Builder(this)
            .setContentTitle(title)
            .setContentText(body)
            //.setContentTitle(titleA)
            //.setContentText(itemToDo)
            .setSmallIcon(R.drawable.ic_launcher)
            .setWhen(timeInMil)
            .build();

            //n.setLatestEventInfo(this, title, body, pi);
            n.defaults=Notification.DEFAULT_ALL;
            n.flags = Notification.FLAG_AUTO_CANCEL;
            nm.notify(uniqueid, n);

        }catch(Exception e){
            e.printStackTrace();
        }

    } 
```

如果有人可以告诉我为什么我的临时演员没有被转移，那就太好了。

谢谢，文格

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-06T06:45:55.330

将您的 MyAlarmService onStartCommand 方法更改为将接收到的意图值发送到 Alert Activity ：

```
@Override
    public int onStartCommand(Intent intent, int flags, int startId){
        super.onStartCommand(intent, flags, startId);

        Intent alert = new Intent();
        try{
            alert.putExtra(TO_DO_ITEM, intent.getExtras().getString(TO_DO_ITEM));
            alert.putExtra(TO_DO_NAME, intent.getExtras().getString(TO_DO_NAME));
            alert.putExtra(TO_DO_TIME, intent.getExtras().getLong(TO_DO_TIME));
        }catch(NullPointerException npe){

        } 
```

并 用于在 Activity 而不是在 Alert 活动中`getIntent().getExtras()`接收意图：`savedInstanceState`

```
Bundle b = getIntent().getExtras();

 if(b !=null){
 title = b.getString(TO_DO_ITEM);
 itemToDo = b.getString(TO_DO_NAME);
 time = b.getLong(TO_DO_TIME);

} 
```

# mysql - 需要 SQL 查询将列值映射到列名

> ID：14179953
> 
> 赞同：0
> 
> 时间：2013-01-06T06:35:22.717
> 
> 标签：mysql, sql, select

我有以下表结构（表名是问题）

```
c1   c2   c3  Selection

X    Y    Z   2

A    B    C   3 
```

这里 c1,c2,c3 和 Selection 是列名。我想根据列选择的值检索 c1 或 c2 或 c3 的值。例如。如果选择值是 2，那么我想要 c2 列的相应值，即 Y。如果选择值是 3，那么它应该选择 c3 列的值，这里是 C。

请帮助我在这里形成 Select Sql 查询。我尝试了自己，但无法找到正确的解决方案。

提前致谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-06T06:39:11.010

您必须使用**CASE**或**IF**

```
 select if(selection=2 ,b,if(selection=3,c,a)) from Table1 ; 
```

例如，请参见此处...[链接](http://sqlfiddle.com/#!2/7bf18/8)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-06T06:41:47.790

```
SELECT  CASE Selection
            WHEN 1 THEN c1
            WHEN 2 THEN c2
            ELSE c3
        END val
FROM    tableName 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-06T06:38:39.677

这非常简单，只需运行一个简单的查询，它将返回所有列，然后您应该使用适当的列。

```
SELECT * FROM mytable WHERE selection = 'yourvalue' 
```

# iphone - 为什么 Rails 在我的 iPhone 上以开发模式缓存资产？

> ID：14179959
> 
> 赞同：2
> 
> 时间：2013-01-06T06:36:42.383
> 
> 标签：iphone, ruby-on-rails

根据[Ruby on Rails 指南：缓存](http://guides.rubyonrails.org/caching_with_rails.html#configuration)，在开发和测试环境中默认禁用缓存。如果我做一个小的 CSS 更改，运行`rails server`并访问我的网站`localhost:3000`，我可以看到我的更改。但是，如果我在 iPhone 上访问我的 rails 服务器`10.0.1.2:3000`，CSS 不会更新，即使 Chrome 处于隐身模式。当我尝试其他具有空缓存的 iPhone 时，变化就在那里。

我发现了一个描述相同问题的[堆栈溢出帖子。](https://stackoverflow.com/q/8158987/262125)以下是建议的解决方案：

*   删除`public/assets`目录。我没有。
*   添加`config.serve_static_assets = false`到`environments/development.rb`. 它已经在那里了。
*   删除`/tmp/cache/assets`、添加并`config.serve_static_assets = false`重新`environments/development.rb`启动服务器。我试过了，但没有用。

这是我的相关`environments/development.rb`配置：

```
# In the development environment your application's code is reloaded on
# every request. This slows down response time but is perfect for development
# since you don't have to restart the web server when you make code changes.
config.cache_classes = false

# Show full error reports and disable caching
config.consider_all_requests_local       = true
config.action_controller.perform_caching = false 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-13T23:44:52.477

我很确定这是因为 Rails 只在生产中进行指纹识别：http: [//guides.rubyonrails.org/asset_pipeline.html#in-production](http://guides.rubyonrails.org/asset_pipeline.html#in-production)

这意味着在开发中更具缓存攻击性的浏览器可能会遇到此问题。

尝试将此添加到您的 development.rb 中：

```
config.assets.digest = true 
```

或者更可取的条件是您进行移动开发时的条件

```
# One of the few exceptions I'd make to a no ENV variables rule 
# for my rails environment config files
config.assets.digest = true if ENV["MOBILE_DEBUG"] 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-08T17:13:31.370

我没有要测试的 iPhone，但这听起来像是正常的浏览器缓存问题。尝试使用这些说明[清除浏览器缓存](http://support.apple.com/kb/TA38615?viewlocale=en_US)。如果可行，则每次更新 CSS（或 J

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-06T07:05:31.550

如何通过你的 iphone 访问你的本地机器？

您是否配置了任何网络设置，或者您将其推送到另一台服务器并从那里访问，因为如果您将其推送到另一台服务器，则该服务器可能正在生产模式下运行。

高温高压

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2015-11-18T13:16:42.243

我有一个类似的问题。它的发生是因为我`config/environments/development.rb`已经包含`config.asset_host = 'http://localhost:3000'`

我已将其删除，一切正常。

# java - 我可以从子列表中检索开始和结束索引吗？

> ID：14179960
> 
> 赞同：0
> 
> 时间：2013-01-06T06:36:44.783
> 
> 标签：java, list, collections

我正在使用一个使用异构“插槽”列表的库。此列表中有几种类型的插槽（输入、输出、存储……），每种类型都在一个连续的范围内。我想使用[`list.subList(start, end)`](http://docs.oracle.com/javase/6/docs/api/java/util/List.html#subList%28int,%20int%29)将这些类型中的每一种都拉到自己的列表中，以便更好地管理，但我仍然需要调用期望原始列表中的索引的库方法，所以我需要一些方法来生成那些来自我的子列表。

是否可以提取原始`fromIndex`并`toIndex`用于创建子列表？还是我需要自己进行簿记？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-06T06:49:06.933

由于`List.sublist`返回`List<T>`，您无法检索用于创建子列表的 from 和 to 索引。但是，没有什么能阻止您自己存储这些索引：您可以轻松地自己编写一个包装器来保存索引，如下所示：

```
class SubList<T> implements List<T> {
    private final int fromIndex;
    private final int toIndex;
    private final List<T> wrapped;
    public SubList<T>(List<T> orig, int from, int to) {
        wrapped = orig.subList(from, to);
        fromIndex = from;
        toIndex = to;
    }
    public int getFromIndex() {
        return fromIndex;
    }
    public int getToIndex() {
        return toIndex;
    }
    public T get(int index) {
        return wrapped.get(index);
    }
    public int indexOf(object o) {
        return wrapped.indexOf(o);
    }
    ...
    // Implement the remaining List<T> methods here
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-06T07:23:14.367

你可以通过反射来做到这一点。所有 JCF 列表都继承 AbstractList.sublist

```
public List<E> subList(int fromIndex, int toIndex) {
    return (this instanceof RandomAccess ?
            new RandomAccessSubList<>(this, fromIndex, toIndex) :
            new SubList<>(this, fromIndex, toIndex));
} 
```

RandomAccessSublist 是 SubList 的子类。这是子列表

```
class SubList<E> extends AbstractList<E> {
    private final AbstractList<E> l;
    private final int offset;
    private int size; 
```

所以你可以从这里获取你的索引。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-06T06:48:36.170

是的，如果您需要开始和结束索引，则必须进行簿记。可以扩展 ArrayList 并覆盖`subList`，以便返回的 CustomList 具有后备列表的开始和结束索引。

但是您可以对`subList`诸如此类的所有操作进行所有操作`clear()` `indexOf()`，您可以处理子列表并将其反映在父列表中。这在大多数情况下都有帮助。

来自 Javadoc

> 返回此列表在指定的 fromIndex（包括）和 toIndex（不包括）之间的部分的视图。（如果 fromIndex 和 toIndex 相等，则返回列表为空。）返回列表由此列表支持，因此返回列表中的非结构性更改会反映在此列表中，反之亦然。返回的列表支持此列表支持的所有可选列表操作。这种方法消除了显式范围操作的需要（通常存在于数组中的那种）。通过传递 subList 视图而不是整个列表，任何需要列表的操作都可以用作范围操作。例如，以下习惯用法从列表中删除一系列元素：

```
 list.subList(from, to).clear(); 
```

> 可以为 indexOf 和 lastIndexOf 构造类似的习语，并且 Collections 类中的所有算法都可以应用于子列表。如果后备列表（即此列表）以除通过返回列表之外的任何方式进行结构修改，则此方法返回的列表的语义将变为未定义。（结构修改是改变这个列表的大小，或者以其他方式扰乱它，使得正在进行的迭代可能会产生不正确的结果。）

# c - C - 返回字符指针数组中重复/出现次数最多的字符串

> ID：14179966
> 
> 赞同：1
> 
> 时间：2013-01-06T06:38:04.047
> 
> 标签：c, string, similarity

我几乎已经完成了这个问题的代码，我将说明如下：

**鉴于：**

长度为“n”的数组（例如 n = 10000）声明如下，

```
 char **records = malloc(10000*sizeof(*records)); 
```

每个 record[i] 都是一个 char 指针，指向一个非空字符串。

```
 records[i] = malloc(11); 
```

字符串是固定长度的（10 个字符 + '\0'）。

**要求：**

返回上述数组中出现频率最高的字符串。

但是现在，我有兴趣获得一种比我目前拥有的原始算法稍微不那么残酷的算法，即在两个 for 循环中筛选整个数组:(，将两个循环遇到的字符串存储在一个类似的临时数组中大小（'n' - 如果都是唯一字符串）用于与下一个字符串进行比较。内部循环从'*外部循环位置 + 1* '迭代到' *n* '。同时，我有一个类似的整数数组size - 'n', 用于计算重复出现次数，每个第 i*个*元素对应于比较数组中的第 i*个*（唯一）字符串。然后找到最大的整数并使用它在比较数组中的索引返回最常出现的字符串.

我希望我足够清楚。我自己对算法感到很羞耻，但必须这样做。我相信在 C 中有更聪明的方法可以做到这一点。

有一个伟大的星期天，

干杯!

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-06T06:44:21.140

如果不擅长好的算法（谷歌、维基百科和 Stackoverflow 对我来说已经足够好了），我想到的一个解决方案是对数组进行排序，然后使用单个循环来遍历条目。只要当前字符串与前一个字符串相同，就为该字符串增加一个计数器。完成后，您将获得一个字符串及其出现的“列表”，然后可以根据需要对其进行排序。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-06T08:05:44.787

在大多数语言中，通常的方法是构造一个哈希表，将字符串映射到计数。这具有 O(N) 复杂度。

例如，在 Python 中（尽管通常您会为此使用 collections.Counter，甚至可以使用更专业的 Python 知识使这段代码更简洁，但我已经明确说明以进行演示）。

```
def most_common(strings):
    counts = {}
    for s in strings:
        if s not in counts:
            counts[s] = 0
        counts[s] += 1
    return max(counts, key=counts.get) 
```

但是在 C 中，标准库中没有哈希表（尽管在 C++ 中，您可以使用 STL 中的 hash_map），因此可以进行排序和扫描。这是 O(N.log(N)) 复杂度，比最优更差，但非常实用。

这是一些实现此功能的 C（实际上是 C99）代码。

```
int compare_strings(const void*s0, const void*s1) {
    return strcmp((const char*)s0, (const char*)s1);
}

const char *most_common(const char **records, size_t n) {
    qsort(records, n, sizeof(records[0]), compare_strings);
    const char *best = 0;  // The most common string found so far.
    size_t max = 0;  // The longest run found.
    size_t run = 0;  // The length of the current run.
    for (size_t i = 0; i < n; i++) {
        if (!compare_strings(records[i], records[i - run])) {
            run += 1;
        } else {
            run = 1;
        }
        if (run > max) {
            best = records[i];
            max = run;
        }
     }
     return best;
} 
```

# sql-server - 直接从 sql server 填写 observableCollection

> ID：14179967
> 
> 赞同：0
> 
> 时间：2013-01-06T06:38:04.420
> 
> 标签：sql-server, observablecollection

我想知道是否有任何方法可以直接从 SQL 服务器填充 ObservableCollection。目前我正在将我的数据加载到 DataTable 中（使用 sqlDataAdapter）并手动转换为 ObservableCollection，但效率非常低。

怎么做？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-06T17:07:10.803

好的，我找到了一种方法来做到这一点：

可以使用 SqlDataReader 来完成。

```
public ObservableCollection<DataItem> LoadCategoriesData()
{
    Command = new SqlCommand(StoredProcedure, Connection);
    Command.CommandType = CommandType.StoredProcedure;
    ObservableCollection<DataItem> myColl = new ObservableCollection<DataItem>();
    Connection.Open();
    SqlDataReader reader = Command.ExecuteReader();
    while (reader.Read())
    {
        int mainCatID = reader.GetInt32(0);
        string categoryName = reader.GetString(1);
        //adding row data to observable
        myColl.Add(new DataItem(mainCatID, categoryName));
    }
    Connection.Close();
    return myColl;
} 
```

# php - 使用 spotify-api-server 将曲目添加到 Spotify 播放列表

> ID：14179968
> 
> 赞同：0
> 
> 时间：2013-01-06T06:38:12.723
> 
> 标签：php, terminal, spotify, playlist

我已经向项目的所有者寻求帮助，但我想我也会问堆栈溢出。

有谁知道如何使用 spotify-api-server 正确添加曲目？我确定我缺少一些简单的东西：

你能告诉我如何发布并将曲目添加到播放列表吗？无论我尝试什么，我都会不断收到错误消息。如果我尝试按照自述文件中的详细信息发布 URI，则会出错：

```
["spotify:track:1lDWb6b6ieDQ2xT7ewTC3G"]

error: {"message":"Invalid input"} 
```

* * *

```
["1lDWb6b6ieDQ2xT7ewTC3G"]

error: {"message":"No valid tracks"} 
```

```

如果我尝试 POST 到`localhost:1337/playlist/{playlist ID}/add?index`我得到错误`{"message":"Bad parameter: index must be numeric"}`。只有在更改`index`为之后才能`index=1`让我继续前进并尝试添加曲目。这个对吗？

我正在通过 PHP 执行此操作，但很高兴看到我可以尝试然后适应的终端命令。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-06T11:02:49.887

关于`{"message":"Bad parameter: index must be numeric"}`，是的，这是正确的 - 这是将曲目插入播放列表的索引。`0`将使其成为第一项。

# linux - -L/libpath 和 /etc/ld.so.conf 有什么区别 配置在 gcc/g++ 中编译的 libpath

> ID：14179969
> 
> 赞同：1
> 
> 时间：2013-01-06T06:38:12.773
> 
> 标签：linux, g++

我编译我的代码，但失败了。

```
# g++ -g test.cpp -o test -lboost_filesystem                                  
/tmp/cc5yybJZ.o(.text+0xb0): In function `__static_initialization_and_destruction_0':
/usr/local/include/boost/system/error_code.hpp:214: undefined reference to `boost::system::generic_category()'
/tmp/cc5yybJZ.o(.text+0xbc):/usr/local/include/boost/system/error_code.hpp:215: undefined reference to `boost::system::generic_category()'
/tmp/cc5yybJZ.o(.text+0xc8):/usr/local/include/boost/system/error_code.hpp:216: undefined reference to `boost::system::system_category()'
/tmp/cc5yybJZ.o(.gnu.linkonce.t._ZN5boost10filesystem9file_sizeERKNS0_4pathE+0x19): In function `boost::filesystem::file_size(boost::filesystem::path const&)':
/usr/local/include/boost/filesystem/operations.hpp:447: undefined reference to `boost::filesystem::detail::file_size(boost::filesystem::path const&, boost::system::error_code*)'
collect2: error: ld returned 1 exit status 
```

但是当我使用 -L/usr/local/lib 编译时它是成功的

```
g++ -g test.cpp -o test -lboost_filesystem -L/usr/local/lib 
```

并且`/usr/local/lib`已经配置在`/etc/ld.so.conf`

```
# cat /etc/ld.so.conf
include ld.so.conf.d/*.conf
/usr/lib64
/usr/local/lib
/usr/local/mpc/lib
/usr/local/mpfc/lib 
```

什么原因？
-L/libpath 和 /etc/ld.so.conf 配置 libpath 有什么区别？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-06T07:14:15.940

`/etc/ld.so.conf`动态链接器（参见手册页`ld.so(8)`）使用它来确定搜索库文件的路径。这发生在运行时。

您仍然需要传递`-L/usr/local/lib`to `gcc`，它将传递给`ld`（参见手册页`ld(1)`）。这发生在编译时。

为什么不`gcc`或`ld`只是自动查找路径`/etc/ld.so.conf`？我猜有几个可能的原因：（1）像这样有更多的自动行为会使系统更复杂，更难理解；(2)`gcc`在具有不同动态链接器（或根本没有）的系统上运行；(3) 也许这种行为不是你想要的，然后你需要一些额外的方法来关闭它。

无论如何，在大多数 Linux 系统上，您只会有一个包管理器，它将库放在正确的位置（通常是`/usr/lib`），所以这通常不是问题。否则，通常只定义您自己的`CFLAGS`变量以包含必要的`-L...`指令。

也可以通过修改[规范文件](http://gcc.gnu.org/onlinedocs/gcc-4.7.2/gcc/Spec-Files.html)`gcc`来配置自动传递各种`-L...`指令（除其他外）。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-06T07:17:10.877

/etc/ld.so.conf 是一个运行时的东西——它允许 Linux 找到你的可执行文件需要运行的共享库。

您可以通过在您的环境中定义 $LD_LIBRARY_PATH 来扩充 /etc/ld.so.conf。

另一方面，“-L”完全用于链接您的程序。这是一个“ld”的事情。在您的 g++ 命令中指定“-L”应该可以修复您的链接错误。

您可以使用“ldd”命令查看二进制文件需要哪些共享库，以及它希望在环境中的什么位置找到它们。

# java - Spring MVC 和 thymeleaf ModelAttribute 为 null 或未评估

> ID：14179972
> 
> 赞同：1
> 
> 时间：2013-01-06T06:38:41.107
> 
> 标签：java, html, spring-mvc, thymeleaf

我正在开发一个使用 Spring MVC 和 Thymeleaf 作为我的 ViewResolver 的 Web 应用程序。我有以下控制器处理程序方法：

```
 @RequestMapping(value = "/something", method = RequestMethod.POST, params = "submit")
    public String doSomething(@ModelAttribute("error") String error /*, other attributes */) {
        // find out if there is an error 
        error = getErrorMessage();

        return "someHTMLfile";
    } 
```

我的观点包含这一行：

```
<p><span th:text="${error}">Error Message goes here</span></p> 
```

执行时，标签不会呈现给任何东西。这可能是由于`${error}`评估为空字符串，但我不明白为什么。Spring的`@ModelAttribute`注解不会自动将对象添加到模型图中，Thymeleaf在哪里可以找到它？

如果我有：

```
@RequestMapping(value = "/something", method = RequestMethod.POST, params = "submit")
public String doSomething(ModelMap map /*, other attributes */) {
    // find out if there is an error 
    String error;
    error = getErrorMessage();
    map.addAttribute("error", error);

    return "someHTMLfile";
} 
```

错误消息使视图呈现得非常好。@ModelAttribute 不会将对象添加到请求模型中吗？

**编辑：**我已经尝试过两者：

```
@RequestMapping(value = "/something", method = RequestMethod.POST, params = "submit")
public String doSomething(@ModelAttribute("error") String error, ModelMap map /*, other attributes */) {
    // find out if there is an error 
    error = getErrorMessage();
    map.addAttribute("error", error);

    return "someHTMLfile";
} 
```

这也行不通。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-06T23:59:08.140

我觉得自己很愚蠢，但无论如何，我们都会犯错。

Spring 正在为我创建一个新`String`实例并将其注入我的方法和 key 下的模型中`error`。String 是一个不可变的对象，所以当我这样做时`error = getErrorMessage()`，我将另一个实例分配给我的`error`对象。现在在 Spring 的模型中有我`error`的和错误`String`，值为`""`. 这就是为什么 Thymeleaf 渲染只找到空字符串的原因。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-06T11:33:15.643

实际上，我认为您的问题与 Thymeleaf 无关，只是 SpringMVC :-)

在您的第一个片段中，您没有向请求模型添加任何内容，而是尝试从表单中获取一个名为“error”的对象。

在您的第二个片段中，您确实向模型添加了一个对象，这就是您的视图渲染良好的原因。

在这里查看[SpringMVC 文档](http://static.springsource.org/spring/docs/3.1.x/spring-framework-reference/html/mvc.html#mvc-ann-modelattrib-arguments)(16.3.3.8) 以更好地理解方法参数上的 @ModelAttribute 注释。

# facebook - Facebook 贝宝支付

> ID：14179977
> 
> 赞同：0
> 
> 时间：2013-01-06T06:39:36.733
> 
> 标签：facebook, paypal, payment

大约一个月前，我正在测试一个 facebook 应用程序/paypal 付款处理。我让一切正常，并通过普通的 Facebook 帐户（不是支付测试员）购买了一些 facebook 积分。一切看起来都很好。提供的信用卡已收费。那是差不多一个月前的事了。我还没有看到这些资金或其中的一部分出现在我为此目的创建的贝宝账户中。

我找不到遇到此问题的其他人的任何有用文档或博客文章。我想知道是否有已知的原因。我的 facebook 应用程序仍处于沙盒模式，我的 paypal 帐户未经验证。但是，这笔钱实际上是在我的信用卡上收取的。我可以在 facebook 管理页面中看到此交易的报告，我将在此处粘贴。它缺少 payment_detail 这可能是我的问题的症状。

这是由于处于沙盒模式、未经验证的贝宝帐户，还是我缺少某些步骤？

RH, ***** *** ,daily_detail,2012-12-09 00:00:00 PST,2012-12-09 23:59:59 PST,1

```
SH,********,credits_detail

    CH,app_id,txn_type,txn_id,order_id,txn_time,value,credits

    SD,********,S,********,********,2012-12-09 09:22:43 PST,0.1,50.0

SF,1

SH,********,payment_detail

    CH,app_id,payment_type,product_type,payment_id,time_completed,recv_currency,recv_amount,fx_batch_id,fx_rate,settle_currency,reference_id,tax_country
SF,0 
```

射频,2,1

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-08-22T18:43:03.370

我和 facebook 的一个乐于助人的人来来回回。我离开了 Paypal 并需要帮助，因为当我尝试自己进行更改时，他们的门户网站抛出异常。他解释说，在 Facebook 发出付款之前，您需要 100 美元的信用额度。所以这对于测试来说绝对是件好事。

# javascript - WebView中文件的iOS Javascript资源路径？

> ID：14179979
> 
> 赞同：0
> 
> 时间：2013-01-06T06:40:46.867
> 
> 标签：javascript, iphone, ios, uiwebview, webview

所以我想弄清楚将 javascript 文件加载到 webview .html 文档中的路径是什么？

基本上，我试图通过 webview 的 stringByEvaluatingJavascriptFromString 方法来做到这一点，并传入将脚本元素附加到当前页面的 javascript，并且该脚本从设备的应用程序包中加载到文件中。

到目前为止我尝试过的是：

```
[webView stringByEvaluatingJavaScriptFromString:[NSString stringWithFormat:@"s=document.createElement('script');s.src='%@';document.body.appendChild(s);", [NSString stringWithFormat:@"%@/file.js", [[NSBundle mainBundle] resourcePath]]]]; 
```

我知道 webview 附加 javascript 的方法有效，因为我可以通过 http:// 路径毫无问题地加载脚本，我只是很难为我的应用程序资源中的 file.js 获取正确的路径。

有任何想法吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-07T05:56:00.160

```
 NSBundle* bundle = [NSBundle mainBundle];
    NSString* path = [bundle bundlePath]; 
```

这为您提供了包的路径。从那里开始，您可以浏览您的文件夹结构。

# c# - HttpClient.PostAsync 使用退出代码 0 敲出应用程序

> ID：14179981
> 
> 赞同：29
> 
> 时间：2013-01-06T06:41:01.503
> 
> 标签：c#, visual-studio-2012, httpclient, .net-4.5, async-await

今天一切正常，直到它停止...以下是最低源代码（我使用的是 VS 2012 Update 1，.Net 4.5）。当我运行它时，应用程序在调用 client.PostAsync() 时退出，因此它永远不会到达 Console.ReadLine()。在调试器中也一样，没有异常，什么都没有，退出代码 0。

我尝试重新启动机器，重新启动 VS2012 - 没有任何效果。

同样，今天一切都在运行，不确定发生了什么变化（没有安装软件等，所有其他网络应用程序仍然有效）。

有任何想法吗？我想我正在失去理智。

```
class Program
{
    static void Main(string[] args)
    {
        Run();
    }

    private async static void Run()
    {
        using (var client = new System.Net.Http.HttpClient())
        {
            var headers = new List<KeyValuePair<string, string>>
                              {
                                  new KeyValuePair<string, string>("submit.x", "48"),
                                  new KeyValuePair<string, string>("submit.y", "15"),
                                  new KeyValuePair<string, string>("submit", "login")
                              };

            var content = new FormUrlEncodedContent(headers);

            HttpResponseMessage response = await client.PostAsync("http://www.google.com/", content);

            Console.ReadLine();
        }
    }
} 
```

* * *

## 回答 #1

> 赞同：58
> 
> 时间：2013-01-06T14:28:27.423

您的问题是程序通常在其`Main()`方法完成时退出。并且您`Main()`一击中就完成了`await`in `Run()`，因为这就是`async`方法的工作方式。

你应该做的是制作`Run()`一个方法，然后在你的方法中`async Task`等待：`Task``Main()`

```
static void Main()
{
    RunAsync().Wait();
}

private static async Task RunAsync()
{
    …
} 
```

在 C# 7.1+ 中，您应该`async Main`改用：

```
static async Task Main()
{
    await RunAsync();
}

private static async Task RunAsync()
{
    …
} 
```

还有一些注意事项：

1.  你不应该使用`async void`方法，除非你必须（这是异步事件处理程序的情况）。
2.  `await`在 GUI 应用程序或ASP.NET 中混合`Wait()`使用是危险的，因为它会导致死锁。但如果您想`async`在控制台应用程序中使用，这是正确的解决方案。

# c - 使用单链表实现 BinarySearchTree

> ID：14179987
> 
> 赞同：0
> 
> 时间：2013-01-06T06:41:56.323
> 
> 标签：c, algorithm, data-structures, binary-tree

我有以下用于实现 BinarySearchTree 的代码。不知何故，它没有构建二叉树。任何人都可以帮助解决问题吗？

```
typedef struct BinarySearchTree

{

    struct BinarySearchTree *left;
    int nodeval;
    struct BinarySearchTree *right;

} 
BST;

BST *root=NULL;

void addrootnode(BST *,int );

void addnode(BST *,int );

void deletenode(int );

void printnodes();

main()

{

    int nodeval;
    char choice;
    printf("\n r->rootnode \n a->add \n d->delete \n p->print \n e->exit\n");
    while (1)
    {   
        printf("\nEnter your choice:");
        scanf("%c",&choice);
        switch (choice)
        {
        case 'r':
            printf("\nEnter the root node value to add: ");
            scanf("%d",&nodeval);
            addrootnode(root,nodeval);
            break;
        case 'a':
            printf("\nEnter the node value to add: ");
            scanf("%d",&nodeval);
            addnode(root,nodeval);
            break;
        case 'd':
            printf("\nEnter the node value to delete: ");
            scanf("%d",&nodeval);
            break;
        case 'p':
            //printf("\n");
            printnodes(root);
            break;
        case 'e':           
            exit(0);
        default:
            break;
        }
    }
    getchar();

}//end of main

//addrootnode

void addrootnode(BST *ptr,int num)

{

    if(ptr==NULL)
    {
        ptr=(BST *) malloc(sizeof(BST));
        ptr->left=NULL;
        ptr->nodeval=num;   
        ptr->right=NULL;        
        root=ptr;       
    }
}
//add node

void addnode(BST *ptr,int num)
{

    if(ptr==NULL)
    {
        ptr=(BST *) malloc(sizeof(BST));
        ptr->left=NULL;
        ptr->nodeval=num;   
        ptr->right=NULL;        

    }
    else if(num < ptr->nodeval )
    {       
        addnode(ptr->left,num);
    }
    else
    {

        addnode(ptr->right,num);
    }

}

//delete functionality

void deletenode(int nodeval)
{
}

//print all nodes

void printnodes(BST *ptr)

{

    if (ptr)

    {
        printnodes(ptr->left);
        printf("%d\t",ptr->nodeval);
        printnodes(ptr->right);
    }

} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-06T06:46:51.440

您不应将`BST *ptr`其用作 addnode 的参数。您尝试为其分配一个值，但此时它`ptr`是函数 addnode 的局部变量，不会改变父节点的预期左或右指针。

尝试考虑改用 BST **ptr。

# javascript - Python 的“u”Unicode 前缀是否有 Javascript 等价物？

> ID：14179988
> 
> 赞同：2
> 
> 时间：2013-01-06T06:42:04.823
> 
> 标签：javascript, python, unicode

我有一个看起来像这样的字符串：`\u1234hello\u1234\u1234`. 我想将字符串的所有 Unicode 片段转换为它们的实际字符。

在 Python 中，我只需要`u`预先指定它是一个[Unicode 字符串](http://docs.python.org/2/tutorial/introduction.html#unicode-strings)，但我怎么能在 Javascript 中做到这一点？

干杯

高西

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-06T06:44:23.610

在 JavaScript 中，所有字符串都是 Unicode。不需要`u`前缀，所有`\u`转义都会被识别。

# c# - 在 ASP.NET 中使用 SQL Server 的推荐方法是什么？

> ID：14179989
> 
> 赞同：-1
> 
> 时间：2013-01-06T06:42:05.573
> 
> 标签：c#, asp.net, sql-server, .net-4.5

我开始学习 ASP.NET（Razor，.NET Framework 4.5），现在正试图弄清楚如何在 ASP.NET 中使用 SQL Server（我习惯于 PHP 中的 MySQL，但从我所了解的SQL Server 在 ASP.NET 中更流行/效果更好）。环顾四周，似乎有很多方法可以做到这一点，我见过的一些方法包括：

*   网络
*   数据库
*   LINQ 到 SQL

LINQ to SQL 将是我最喜欢的选择，因为我个人喜欢在 C# 中使用 LINQ，但我遇到的文档看起来像是针对 .NET Framework 3.5 的（尽管它可能只是过时的文档，或者我可能读错了），而且我不太确定是否有一个额外的层/瓶颈来考虑速度。最常用的方法是什么，最好的文档在哪里？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-06T07:03:58.853

LINQ to SQL 基本上已经被抛弃了。要获得更好的版本，请使用实体框架。

见[http://www.redmond-recap.com/2012/08/27/entity-framework-a-sorry-history-new-release-5-0-and-future-openness/](http://www.redmond-recap.com/2012/08/27/entity-framework-a-sorry-history-new-release-5-0-and-future-openness/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-06T06:52:46.440

个人最好的选择是 [实体框架](http://msdn.microsoft.com/en-us/data/ef.aspx)

# android - 如何在android中制作完整的圆形图像视图

> ID：14179993
> 
> 赞同：16
> 
> 时间：2013-01-06T06:42:22.250
> 
> 标签：android, android-layout, imageview, android-canvas

> **可能重复：**
> [如何使图像适合android中的圆形框架](https://stackoverflow.com/questions/14050813/how-to-make-an-image-fit-into-a-circular-frame-in-android)

我想要一个 360 度圆形图像视图，我在 stackoverflow 上找到了相关的解决方案，但它们都在图像视图中产生了圆角。但我想要完整的圆形图像视图。

对于圆角图像视图链接是：

*   [imageView 中的圆角](https://stackoverflow.com/questions/10684469/rounded-corners-in-imageview)
*   [如何制作带圆角的 ImageView？](https://stackoverflow.com/questions/2459916/how-to-make-an-imageview-to-have-rounded-corners)

有什么想法吗。

* * *

## 回答 #1

> 赞同：33
> 
> 时间：2013-01-06T07:07:11.010

获取位图：

```
Bitmap bitmap = getthebitmapyouwanttoshowinacirclefromsomewhere;
Bitmap circleBitmap = Bitmap.createBitmap(bitmap.getWidth(), bitmap.getHeight(), Bitmap.Config.ARGB_8888); 
```

使用着色器：

```
BitmapShader shader = new BitmapShader (bitmap,  TileMode.CLAMP, TileMode.CLAMP);
Paint paint = new Paint();
        paint.setShader(shader); 
```

绘制画布；

```
Canvas c = new Canvas(circleBitmap);
c.drawCircle(bitmap.getWidth()/2, bitmap.getHeight()/2, bitmap.getWidth()/2, paint); 
```

设置图像：

```
myImageView.setImageBitmap(circleBitmap); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-06T07:04:50.893

创建一个位图，然后在其画布上绘制，然后将此位图添加到图像视图或按钮或任何您想要的。

**创建位图：**

```
Bitmap bmp = Bitmap.createBitmap(width, height, config); 
```

**在位图画布上绘制**

```
Canvas c = new Canvas(bmp);
c.drawCircle(cx, cy, radius, paint) 
```

**设置为图像视图**

```
img.setBackgroundDrawable(new BitmapDrawable(bmp)); 
```

# linux - 具有 FIFO 问题的输入循环

> ID：14179994
> 
> 赞同：0
> 
> 时间：2013-01-06T06:42:24.357
> 
> 标签：linux, bash, shell, redirect, fifo

我在为标准输入使用 FIFO 时遇到了一些麻烦。

我有一个这样的脚本：

```
#!/usr/bin/env ruby
while true do
    data = gets
    puts "Got: #{data}"
end 
```

然后我像这样运行它：

```
$ ./script < input.fifo &
$ echo testdata > input.fifo 
```

它将打印如下内容：

```
Got: testdata
Got:
Got:
Got:
Got:
Got:
etc. 
```

我怀疑FIFO有问题。在将某些内容发送到脚本后，它并没有被清除。

我使用 scanf("%d" ...) 对具有类似输入循环的 C 程序尝试了相同的操作，它的行为如下：

```
$ echo 1 > input.fifo
Got: 1
Got: 1
Got: 1
Got: 1
etc. 
```

所以看起来 FIFO 中的最后一个东西被卡在那里了。在 ruby​​ 示例中，它是一个空行，因为 gets 捕获了 \n。第二个是 1 本身。

任何人都可以提供任何见解吗？

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-06T08:33:49.217

情况很简单，在：
'echo 1 > input.fifo'之后，文件'input.fifo'被打开，“1”被写入它，
它被关闭了。

问题是它是关闭的。当 fifo 从写入端关闭时，这相当于读取端的“文件结尾”。因此，如果您在 C 示例中检查“scanf”的返回码，它将等于 EOF 常量。

在“文件结束”之后，当您从 fifo 读取所有数据并尝试读取某些内容时，“正在读取”代码将立即返回并报告“文件结束”。