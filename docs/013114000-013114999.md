# StackOverflow 问答 13114000-13114999

# php - 最大值，最小值和总和随机数php

> ID：13114010
> 
> 赞同：2
> 
> 时间：2012-10-28T23:16:21.563
> 
> 标签：php

这是代码

```
<?php
echo "<table border=\"0\">";
for ($d = 1; $d <= $times;$d++ )
 {
echo "<tr><td>";
echo  rand(1,6), "\n";
echo "</td></tr>";
} 
echo "</table>"; ?> 
```

我试图得到最大值，最小值和总和，`rand(1,6), "\n";` 但我无法弄清楚。它正在杀死我。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-28T23:18:28.123

```
$rands = array(); // rand() storage
for($d = 1; $d <= $times; $d++){
    $rands[$d] = rand(1, 6); // store rands
}
var_dump($min = min($rands)); // min() of rands
var_dump($min = max($rands)); // max() of rands 
```

^ 见示例代码。

（**PS**：我使用`[$d]`他有一个基于 1 的增量，他的进一步逻辑可能需要它。这样 rands 键与他的 $d 匹配，以后可以轻松访问。）

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-28T23:20:31.640

```
<?php

$min = 10;
$max = -1;
$sum = 0;

for ($d = 1; $d <= $times; $d++) {
    $n = rand(1, 6);
    if ($n < $min) $min = $n;
    if ($n > $max) $max = $n;
    $sum += $n;
}

echo $min . ' ' . $max . ' ' . $sum . '<br/>';

?> 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-28T23:22:37.400

您还需要在数组中收集随机数：

```
echo "<table border=\"0\">";
$rands = array();
#################
for ($d = 1; $d <= $times; $d++)
{
    echo "<tr><td>";
    echo $rands[] = rand(1,6), "\n"; 
         ###########
    echo "</td></tr>";
} 
echo "</table>"; ?> 
```

之后，您可以使用 [`max`](http://php.net/max),[`min`](http://php.net/min)和[`array_sum`](http://php.net/array_sum)（所有这些链接都带有很好的示例）。

正如您的代码已经显示的那样，您应该开始区分执行数据处理的代码和执行 HTML 输出的代码：

```
// handle the data

$randomNumbers = array();
foreach (range(1, $times) as $d)
{
    $randomNumbers[$d] = rand(1,6);
}

// output the data

echo '<table border="0">';
foreach ($randomNumbers as $number) {
    printf("<tr><td>%d</tr></td>", $number);
}
echo "</table>"; 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-28T23:22:48.167

```
$sum=0; 
for ($d = 1; $d <= $times;$d++ ) { 
  echo "<tr><td>";  
  $r=rand(1,6);
  $sum +=$r;
  echo  "$r, \n"; 
  echo "</td></tr>"; 
  if ($d==1) { $min=$r; $max=$r; } 
  if ($r>$max) $max=$r;
  if ($r<$min) $min=$r;
} 
// do something with $min, $max and $sum; 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-10-28T23:25:10.720

```
<?php      
  $total = 0;
  echo "<table border=\"0\">";

  for ($d = 1; $d <= $times;$d++ )
  { 
       $rand = rand(1,6);
       $total += $rand;    
       $array[] = $rand;

       echo "<tr><td>";
       echo  $rand, "\n";
       echo "</td></tr>";
  } 
echo "</table>"; ?>

echo $total;
echo min($array);
echo max($array); 
```

# c++ - 使用 boost build 构建 python 扩展

> ID：13114015
> 
> 赞同：0
> 
> 时间：2012-10-28T23:16:42.697
> 
> 标签：c++, python, boost-python, boost-build

我正在尝试使用 boost.python 并从 c++ 构建一个 python 扩展。

我的 cpp 文件使用了一个名为 'BZ2_bzopen' 的函数，它位于标准路径 (/usr/lib/) 下的库 'libbz2' 中。[但是，当我尝试按照说明](http://www.boost.org/doc/libs/1_51_0/libs/python/example/quickstart/Jamroot)使用 boost build 构建扩展时，我收到一条错误消息：

```
====== BEGIN OUTPUT ======
Traceback (most recent call last):
  File "CrossTrade.py", line 11, in <module>
    from custom_c import GoThroughFile
ImportError: /home/jliu/toolpak/custom_c.so: undefined symbol: BZ2_bzopen

EXIT STATUS: 1
====== END OUTPUT ====== 
```

在我看来，这似乎是由于未链接到库而导致的错误，这与我在不使用“-lbz2”命令的情况下编译 cpp 文件几乎相同。

任何人都可以提供一些解决它的帮助，好吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-07T15:28:37.230

也许你没有链接到`libbz2`？在这种情况下，请按照[http://www.boost.org/doc/libs/1_46_1/doc/html/bbv2/tutorial.html#bbv2.tutorial.prebuilt](http://www.boost.org/doc/libs/1_46_1/doc/html/bbv2/tutorial.html#bbv2.tutorial.prebuilt)中的说明查看如何链接到库。

# rdf - 如何在 RDF/OWL 中声明“Pat 知道 Mike 的电话号码”

> ID：13114018
> 
> 赞同：4
> 
> 时间：2012-10-28T23:17:24.833
> 
> 标签：rdf, semantic-web, owl

我如何声明 Pat 知道 Mike 的电话号码是一个概念，而不是 RDF/OWL 中的具体电话号码 1112223333？

能够说明玛丽知道帕特知道迈克的电话号码的奖励积分....

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-29T17:19:34.970

使用合适的属性“知道”，您可以使用 rdf 物化：

```
:Pat :knows [ 
  rdf:subject :Mike ;
  rdf:predicate :telephoneNumber ;
  rdf:object <tel:1112223333> 
] 
```

很少有人喜欢物化，但对于这种事情，没关系。对于第二种情况，享受双重具体化：

```
:Mary :knows [
  rdf:subject :Pat ;
  rdf:predicate :knows ;
  rdf:object [
    rdf:subject _:b1 ;
    rdf:predicate rdf:subject ;
    rdf:object :Mike ;
    rdf:subject _:b2 ;
    rdf:predicate rdf:predicate ;
    ... sanity barrier exceeded ...
  ]
] 
```

如果您乐于离开单个图表，生活会更简单。你可能只有几个文件：

文件1：

```
:Mary :knowsContentsOf <FILE2> 
```

文件2：

```
:Mike :telephoneNumber <tel:1112223333> 
```

或者甚至将两者都粘贴在一个文件信封中并指向文件的片段。这本质上就是命名图在 SPARQL 中为您提供的内容。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-11-01T10:21:59.273

以下情况如何（使用有效的 OWL DL 来娱乐）：

```
# assume prefixes defined
<>  a  owl:Ontology .
:Person  a  owl:Class .
:PhoneNumber  a  owl:Class .
:knowsThing  a  owl:ObjectProperty;
    rdfs:domain  :Person .
:belongsTo  a  owl:ObjectProperty;
    rdfs:range  :Person .
:Mike  a  :Person .
:Pat  a  :Person;
    :knowsThing  [
        a  :PhoneNumber;
        :belongsTo  :Mike
    ] . 
```

你关于 Mary 的另一个陈述比较困难，因为我们不只是在谈论知道一个“事物”，我们在谈论关于知识的知识，这在 OWL 和 RDF 中非常不方便。但是，让我们坚持在 OWL DL 中进行挑战，使用以下本体：

```
<>  a  owl:Ontology .
:Person  a  owl:Class .
:PhoneNumber  a  owl:Class .
:knowsThing  a  owl:ObjectProperty;
    rdfs:domain  :Person .
:knownBy  a  owl:AnnotationProperty;
    rdfs:range  :Person .
:belongsTo  a  owl:ObjectProperty;
    rdfs:range  :Person .
:Mike  a  :Person .
:Pat  a  :Person;
    :knowsThing  _:mikesnumber .
_:mikesnumber  a  :PhoneNumber;
    :belongsTo  :Mike .
:Mary  a  :Person .
[]  a  owl:Annotation;
    owl:annotatedSource  :Pat;
    owl:annotatedProperty  :knowsThing;
    owl:annotatedTarget  _:mikenumber;
    :knownBy  :Mary . 
```

问题是它不会让你在推理方面得到太多。user205512 和 cygri 的答案是合理的选择，但在推理方面它们也没有给你太多帮助。

要获得更多推理能力，您可以做一些疯狂的事情，例如（仅适用于 OWL 2 DL 或 OWL Full）：

```
:subject  a  owl:ObjectProperty;
    rdfs:domain  :Statement .
:predicate  a  owl:ObjectProperty;
    rdfs:domain  :Statement .
:object  a  owl:ObjectProperty;
    rdfs:domain  :ObjectStatement .
:dataObject  a  owl:DatatypeProperty;
    rdfs:domain  :DataStatement .
:hasPhone  a  owl:DatatypeProperty .
:knowsFact  a  owl:ObjectProperty;
    rdfs:domain  :Person;
    rdfs:range  :Statement .
:ObjectStatement  a  owl:Class;
    rdfs:subClassOf  [
        owl:onProperty  :object;
        owl:cardinality 1
    ] .
:DataStatement  a  owl:Class;
    rdfs:subClassOf  [
        owl:onProperty  :dataObject;
        owl:cardinality 1
    ] .
:Statement  a  owl:Class;
    owl:unionOf  ( :ObjectStatement :DataStatement );
    rdfs:subClassOf  [
        owl:onProperty  :subject;
        owl:cardinality 1
    ], [
        owl:onProperty  :predicate;
        owl:cardinality 1
    ] .
:Person  a  owl:Class .
:Pat  :knowsFact  [
    :subject  :Mike;
    :predicate  :hasPhone
] .
:Mary  :knowsFact  [
    :subject  :Pat;
    :predicate  :knowsFact;
    :object  [
        :subject  :Mike;
        :predicate  :hasPhone
    ] . 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-10-29T06:39:21.047

我会用命名图来解决这个问题。将三元组“Mike 的电话号码是 1112223333”粘贴到一个命名图中，然后将另一个三元组放入默认图中，“Pat 知道那个命名图”。

OWL 不支持命名图，但 SPARQL 1.0 和 RDF 1.1 支持，尽管还没有标准语法，因此您需要将各种图从单独的文件单独加载到 SPARQL 存储中。

# php - 我的嵌套锚标签不会嵌套？

> ID：13114022
> 
> 赞同：0
> 
> 时间：2012-10-28T23:18:18.193
> 
> 标签：php

我正在尝试使用递归构建我的网站导航，但我似乎无法让`<div>`标签正确嵌套。我什至不确定这段代码是否是我应该走的路，但这是一个开始。所需的输出：

```
<div class="parent">1</div>
<div class="child">
    <a href="#">1.1</a>
    <a href="#">1.2</a>
    <a href="#">1.3</a>
</div>

<div class="parent">2</div>
<div class="child">
    <a href="#">2.1</a>
    <a href="#">2.2</a>
    <a href="#">2.3</a>
</div> 
```

这是我的数据库：

![在此处输入图像描述](../Images/c4cd04392be67ebc720038c2ce7ad17f.png)

这是我要开始工作的代码：（此代码需要大量工作）

```
/* here's the call */
$this->buildNav($array,NULL,false);

private function buildNav($array,$parent,$loop)
{
    $html = '';
    $class = ($loop) ? 'child' : 'parent';
    $tag   = '<div>%s</div>';
    $child = false; 
    foreach($array as $item)
    {
        if($item['parent']===$parent)
        {
            $child = true;
            $html .= '<div>'.$item['category_name'];
            $html .= $this->buildNav($array,$item['category_id'],true);
            $html .= '</div>';
            $html .= '<a href="#">'.$item['category_name'].'</a>';
        }
        if(!$child)
        {
            $tag = '';
        }
    }
    return sprintf($tag,$html);
} 
```

**更新**

根据变形者的建议，我放弃了递归，只是调用了一个函数来让孩子们......好主意；）这是代码：

```
private function buildNav($array,$parent)
{
    $html = '';
    foreach($array as $item)
    {
        if($item['parent'] === NULL)
        {
            $html .= '<div class="parent">'.$item['category_name'].'</div>';
            $html .= '<div class="child">'.$this->getChildren($array,$item['category_id']).'</div>';
        }
    }
    return $html;
}
private function getChildren($array,$parent)
{
    $html = '';
    foreach($array as $item)
    {
        if($item['parent']===$parent)
        {
            $html .= '<a href="#">'.$item['category_name'].'</a>';
        }
    }
    return $html;
} 
```

再次感谢其他提供如此深刻的选择和/或方向的人；）

# asp.net - 手动证书验证

> ID：13114036
> 
> 赞同：0
> 
> 时间：2012-10-28T23:19:46.203
> 
> 标签：asp.net, web-services, asmx, ssl-certificate, x509certificate

我有一个 ASP.net Webservice (asmx) 从我的应用程序返回一些安全的东西。我想创建一个客户端应用程序，它使用证书连接到此服务并调用此方法。使用证书我想确保只有这个特殊的客户端应用程序可以调用这个 web 服务方法。

我已经阅读了数百篇如何设置基础设施的复杂文章，但由于烦人的设置和非常复杂的部分（iE 证书存储设置，...），我感到很沮丧。我决定在我的服务方法中手动进行证书验证。这样我就知道发生了什么，我不必依赖复杂的服务器设置。

但问题是：我该怎么做？

这个存根代表我想要做的事情：

```
[WebMethod]
public string GetSecureData() {
    if(!ValidateClientCertificate()) {
        throw new HttpException((int) (HttpStatusCode.BadRequest), "Bad Request");
    }
    return "i am secure";
}

private bool ValidateClientCertificate() {
    HttpClientCertificate cert = HttpContext.Current.Request.ClientCertificate;
    if (!cert.IsPresent || !HttpContext.Current.Request.IsSecureConnection) {
        return false;
    }

    bool isValid = /* is cert the almighty client certificate? */
    return isValid;
} 
```

在客户端我做这样的事情：

```
X509Certificate Cert = X509Certificate.CreateFromCertFile("C:\\secure.cer");
ServicePointManager.CertificatePolicy = new CertPolicy();
HttpWebRequest Request = (HttpWebRequest)WebRequest.Create("https://myserver/Secure.asmx/GetSecureData");
Request.ClientCertificates.Add(Cert);
Request.Method = "GET";
HttpWebResponse Response = (HttpWebResponse)Request.GetResponse(); 
```

如果我可以将某种“公钥”放入应用程序（App_Data）并检查收到的客户端证书是否是该公钥所代表的证书，那就太棒了。

问题是：

1.  如何执行第一个代码段中显示为注释的魔法？
2.  我猜 IIS 和 ASP.net 会阻止未知/未经验证的客户端证书。对于这种特殊的服务方法，我需要禁用此检查。

如果答案很简单并且已经回答了数千次，请不要怪我。关于这个主题的文章有数千篇，有 100 种不同的解决方案和变体。我找不到适合我的问题的匹配项。

# java - 试图从数组中获取一个随机元素，以便我可以将其标记为“已预订”

> ID：13114037
> 
> 赞同：0
> 
> 时间：2012-10-28T23:19:46.337
> 
> 标签：java, arrays, random

这就是我在我的数组中随机选择一个元素的方法中的内容，但是我不确定它为什么不起作用，我觉得我已经尝试了所有的写法，任何想法。

```
public static Seat BookSeat(Seat[][] x){

  Seat[][] book = new Seat[12][23];

    if (x != null){  

      book = x[(Math.random()*x.length)];  

    }

  return book;    
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-28T23:31:09.733

你解释事情的方式让我觉得有几个概念以某种方式交叉。我假设这本书是一些（二维）Seat 对象数组，您想从中选择一个随机对象。为此，您需要为数组的每个维度指定一个随机选择：

```
// this should be declared elsewhere because if it's local to bookSeat it will be lost
// and reinitialized upon each call to bookSeat
Seat[][] book = new Seat[12][23];

// and this is how, after previous declaration, the function will be called
Seat theBookedSeat = bookSeat(book);

// Okay, now we have selected a random seat, mark it as booked, assuming Seat has a 
// method called book:
theBookedSeat.book();

// and this is the modified function.  Note also that function in Java by convention
// start with a lowercase letter.
public static Seat bookSeat(Seat[][] x){
    if (x != null){  
        // using Random as shown by chm052
        Random r = new Random();
        // need to pick a random one in each dimension
        book = x[r.nextInt(x.length)][r.nextInt(x[0].length)];  
    }
    return book;  
} 
```

您还应该集成一个测试以检查所选座位是否已被预订并重复选择：

```
 do {
            // need to pick a random one in each dimension
            book = x[r.nextInt(x.length)][r.nextInt(x[0].length)];
        while (book.isBooked()); // assuming a getter for a boolean indicating
                                 // whether the seat is booked or not 
```

但是像这样的完全随机选择有几个缺点：

1.  选择是随机的，您可以反复落在已预订的座位上，并且发生的机会随着已预订座位的数量而增加。但即使预订的座位很少，你也可能真的很倒霉，看到循环旋转了几十次，然后才撞到未预订的座位。
2.  您绝对应该在进入循环之前测试是否还有未预订的座位，否则它将无限旋转。

因此，实施更智能的选择例程可能是一个好主意，例如通过随机选择一排和一个座位并从那里开始搜索，直到遇到第一个空闲座位，但对于第一步，这应该做得很好。

我希望这是您想要实现的目标，如果不能随意发表评论并让我更正和适应。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-28T23:21:26.327

`(Math.random()*x.length)`Floor表达式返回的数字。

```
Math.floor(Math.random()*x.length); 
```

目前，您正在尝试使用浮点数为数组下标。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-28T23:24:13.460

另一个答案将完全有效，但是如果您不想进行所有数学运算，这是使用[Random.nextInt()的另一种方法：](http://docs.oracle.com/javase/1.4.2/docs/api/java/util/Random.html#nextInt%28%29)

```
Random r = new Random();
book = x[r.nextInt(x.length)]; 
```

它使用[java.util.Random](http://docs.oracle.com/javase/1.4.2/docs/api/java/util/Random.html)，所以如果你这样做，请确保你导入它。

# javascript - JSON.stringify 使用带有 Spine 的子类时缺少超类属性

> ID：13114038
> 
> 赞同：0
> 
> 时间：2012-10-28T23:20:09.943
> 
> 标签：javascript, json, requirejs, spine.js

我看到对 Spine 中的子类模型使用 JSON.stringify 的奇怪行为，我希望有人能提供帮助！

这是我们在一个项目中获得的一些代码的简化摘录：

```
define([
    "jquery",
    "underscore"
],

function ($, _) {
    var SuperClass = Spine.Model.sub();
    SuperClass.configure("SuperClass", "SuperClassProperty");

    var SubClass = SuperClass.sub();
    SubClass.configure("SubClass", "SubClassProperty");

    var instance = new SubClass({ SuperClassProperty: "Super", SubClassProperty: "Sub" });
    console.log(instance);

    var json = JSON.stringify(instance);
    console.log(json);
}); 
```

“console.log(instance)”正在打印出我在这种情况下所期望的：

```
result
    SubClassProperty: "Sub"
    SuperClassProperty: "Super"
    cid: "c-0"
    __proto__: ctor 
```

但是，当我对实例使用 JSON.stringify 时，这就是我返回的全部内容：

```
{"SubClassProperty":"Sub"} 
```

为什么 SuperClassProperty 不包含在 stringify 中？

我通过强制 JSON2 覆盖 Chrome 的原生 JSON 对象，排除了 JSON.stringify 方法的问题；两种实现都产生相同的结果。看起来 stringify 将委托给对象上的“toJSON”函数（如果有的话）——在这种情况下有（作为 Spine 的一部分）。

因此，看起来（a）这是 Spine 中的一个错误，或者（b）我做错了什么，这是更有可能的选择。

我知道我也可以通过在子类上重新配置超类属性来解决这个问题：

```
SubClass.configure("SubClass", "SuperClassProperty", "SubClassProperty"); 
```

然而，这对我来说似乎违反直觉（子类化有什么意义？），所以我希望这不是答案。

**更新：**我已经通过 Spine 源代码进行了一些调试，据我所知，问题是我配置子类的方式：

```
 var SubClass = SuperClass.sub();
    SubClass.configure("SubClass", "SubClassProperty"); 
```

在这里调用“配置”似乎消除了超类的属性。Model原型上的“toJSON”实现如下：

```
Model.prototype.toJSON = function() {
    return this.attributes();
}; 
```

由于在配置 SubClass 时会重置属性集合，因此在 JSON 字符串中不会出现 SuperClass 属性。

我不确定我是否不应该在子类对象上调用“配置”，但我在文档中找不到任何地方说我应该做其他事情 - 这是我可以找到的子类模型的唯一参考（来自：[http](http://spinejs.com/docs/models) ://spinejs.com/docs/models ）：

> 模型也可以很容易地被子类化：
> 
> ```
> var User = Contact.sub();
> User.configure("User"); 
> ```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-31T03:39:06.930

正如我所怀疑的，问题出在我使用 Spine 的方式上。[Spine 的作者的这条评论](https://github.com/maccman/spine/issues/120#issuecomment-2421930)推断在子类上使用“配置”将消除超类的属性。我不得不承认我不明白*为什么*会这样；这对我来说似乎违反直觉，但至少我现在知道这不是一个错误。

万一其他人遇到这个问题，我解决它的方法是将我自己的扩展方法添加到 Spine 模型中，如下所示：

```
(function () {
    var Model = Spine.Model;

    Model.configureSub = function () {
        var baseAttributes = this.attributes.slice();
        this.configure.apply(this, arguments);

        this.attributes = baseAttributes.concat(this.attributes);
        return this;
    };
})(); 
```

现在配置我的子类：

```
var SubClass = SuperClass.sub();
SubClass.configureSub("SubClass", "SubClassProperty"); 
```

现在我的 JSON 正确地反映了超类和子类的属性。

# java - 如果包含的元素被修改，Java HashSet 包含重复项

> ID：13114043
> 
> 赞同：9
> 
> 时间：2012-10-28T23:21:00.557
> 
> 标签：java, duplicates, hashset

假设你有一个类并且你创建了一个 HashSet 来存储这个类的实例。如果您尝试添加相等的实例，则集合中只保留一个实例，这很好。

但是，如果您在 HashSet 中有两个不同的实例，并且您将其中一个作为另一个的精确副本（通过复制字段），则 HashSet 将包含两个重复的实例。

这是演示这一点的代码：

```
 public static void main(String[] args)
    {
         HashSet<GraphEdge> set = new HashSet<>();
        GraphEdge edge1 = new GraphEdge(1, "a");
        GraphEdge edge2 = new GraphEdge(2, "b");
        GraphEdge edge3 = new GraphEdge(3, "c");

        set.add(edge1);
        set.add(edge2);
        set.add(edge3);

        edge2.setId(1);
        edge2.setName("a");

        for(GraphEdge edge: set)
        {
            System.out.println(edge.toString());
        }

        if(edge2.equals(edge1))
        {
            System.out.println("Equals");
        }
        else
        {
            System.out.println("Not Equals");
        }
    }

    public class GraphEdge
    {
        private int id;
        private String name;

        //Constructor ...

        //Getters & Setters...

        public int hashCode()
        {
        int hash = 7;
        hash = 47 * hash + this.id;
        hash = 47 * hash + Objects.hashCode(this.name);
        return hash;    
        }

        public boolean equals(Object o)
        {
            if(o == this)
            {
                return true;
            }

            if(o instanceof GraphEdge)
            {
                GraphEdge anotherGraphEdge = (GraphEdge) o;
                if(anotherGraphEdge.getId() == this.id && anotherGraphEdge.getName().equals(this.name))
                {
                    return true;
                }
            }

                return false;
        }
    } 
```

上述代码的输出：

```
1 a
1 a
3 c
Equals 
```

有没有办法强制 HashSet 验证其内容，以便删除在上述场景中创建的可能重复条目？

一种可能的解决方案可能是创建一个新的 HashSet 并将内容从一个哈希集复制到另一个哈希集，这样新的哈希集就不会包含重复项，但是我不喜欢这种解决方案。

* * *

## 回答 #1

> 赞同：18
> 
> 时间：2012-10-28T23:29:53.693

你描述的情况是无效的。请参阅[Javadoc](http://docs.oracle.com/javase/7/docs/api/java/util/Set.html)：“如果对象的值以影响相等比较的方式更改，而对象是集合中的元素，则不指定集合的​​行为。”

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-10-29T00:09:35.023

为了补充@EJP的答案，如果您在 a 中改变对象`HashSet`以使它们重复（在`equals`/`hashcode`合同的意义上），实际上会发生什么是哈希表数据结构将破坏。

*   根据突变的具体细节和哈希表的状态，其中一个或两个实例将变得对查找不可见（例如`contains`和其他操作）。要么它在错误的哈希链上，要么因为另一个实例出现在它之前的哈希链上。而且很难预测哪个实例将是可见的......以及它是否会保持可见。

*   如果您迭代该集合，两个实例仍将存在......违反`Set`合同。

当然，这从应用程序的角度来看是非常破碎的。

* * *

您可以通过以下任一方式避免此问题：

*   为您的集合元素使用不可变类型，
*   在将对象放入集合和/或将它们拉出集合时制作对象的副本，
*   编写您的代码，以便它“知道”在持续时间内不要更改对象......

从正确性和鲁棒性的角度来看，第一种选择显然是最好的。

* * *

Incidentally, it would be really difficult to "fix" this in a general way. There is no pervasive mechanism in Java for knowing ... or being notified ... that some element has changed. You can implement such a mechanism on a class by class basis, but it has to be coded explicitly (and it won't be cheap). Even if you did have such a mechanism, what would you do? Clearly one of the objects should now be removed from the set ... but which one?

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-28T23:35:08.760

你是对的，我认为没有任何方法可以防止你讨论的情况。所有使用散列和等号的集合都会遇到这个问题。集合没有通知对象自添加到集合后发生了更改。我认为您概述的解决方案很好。

如果您如此关心这个问题，也许您需要重新考虑您的数据结构。例如，您可以使用不可变对象。使用不可变对象，您将不会遇到此问题。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-10-28T23:35:17.903

`HashSet`在添加对象后不知道其成员的属性发生变化。如果这对您来说是个问题，那么您可能需要考虑将其设为`GraphEdge`不可变。例如：

```
GraphEdge edge4 = edge2.changeName("new_name"); 
```

在不可变的情况下`GraphEdge`，更改值会导致返回新实例，而不是更改现有实例。

* * *

## 回答 #5

> 赞同：-1
> 
> 时间：2012-10-28T23:26:38.893

Objects.hashCode 旨在用于使用参数对象生成 hascode。您将其用作 hascode 计算的一部分。

尝试用以下代码替换您的 hashCode 实现：

```
public int hashCode()
{
    return Objects.hashCode(this.id, this.name);
} 
```

* * *

## 回答 #6

> 赞同：-1
> 
> 时间：2012-10-28T23:45:46.187

您需要在迭代列表时进行唯一检测。制作一个新的 HashSet 似乎不是正确的方法，但为什么不试试这个......也许不使用 HashSet 开始......

```
public class TestIterator {
    public static void main(String[] args) {
        List<String> list = new ArrayList<String>();

        list.add("1");
        list.add("1");
        list.add("2");
        list.add("3");

        for (String s : new UniqueIterator<String>(list)) {
            System.out.println(s);
        }
    }
}

public class UniqueIterator<T> implements Iterable<T> {
    private Set<T> hashSet = new HashSet<T>();

    public UniqueIterator(Iterable<T> iterable) {
        for (T t : iterable) {
            hashSet.add(t);
        }
    }

    public Iterator<T> iterator() {
        return hashSet.iterator();
    }
} 
```

# php - 防止 DOMDocument 在空标签后去除空格

> ID：13114050
> 
> 赞同：8
> 
> 时间：2012-10-28T23:21:38.623
> 
> 标签：php, html, domdocument

我有一个加载的 html 文件，[`DOMDocument`](http://www.php.net/manual/en/class.domdocument.php)在该文件中我对 html 的输出进行了一些 DOM 操作[`saveHTML`](http://www.php.net/manual/en/domdocument.savehtml.php)。

问题是输入标签后的空格被删除，这里是HTML

```
<!DOCTYPE html>
<html lang="en">
    <head>
        <meta http-equiv="Content-Type" content="text/html; charset=utf-8">
        <title></title>
        <link rel="stylesheet" type="text/css" href="/style.css">
        <script src="//ajax.googleapis.com/ajax/libs/jquery/1.7.2/jquery.min.js"></script>
        <script>
            window.jQuery || document.write(unescape('%3cscript src="/script/jquery.min.js"%3e%3c/script%3e'));
        </script>
    </head>
    <body>
        <div>
<div>
    <form method="post" action="/register/">
        <label>First name: <input type="text" name="firstname"></label>
        <label>Last name: <input type="text" name="lastname"></label>
        <label>Date of birth: <input type="date" name="dateofbirth"></label>
        <label>Address: <input type="text" name="address"></label>
        <label>Phone number: <input type="text" name="phonenumber"></label>
        <label>Sex: <input type="text" name="sex"></label>
        <label>Email address: <input type="email" name="email"></label>
        <label>Account password: <input type="password" name="password"></label>
        <input id="register-button" type="submit" value="Register">
        <input type="reset" value="Reset">
        <input type="button" value="Cancel">
    </form>
</div>
        </div>
    </body>
</html> 
```

PHP

```
$template_file = $_SERVER['DOCUMENT_ROOT']."/application/template/template.html";
$doc = new DOMDocument('1.0', 'utf-8');
$doc->loadHTMLFile($template_file);
/* dom manipulation, importing and appending nodes from other documents etc */ 
echo $doc->saveHTML(); 
```

除了. _ `<br>`_`<hr>``<head>`

我尝试设置[`formatOutput`](http://www.php.net/manual/en/class.domdocument.php#domdocument.props.formatoutput)为 true ，但只保留结束标记前的空格。

有没有办法让 DOMDocument 在我的 s 之后保留空格`<input>`？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2015-08-15T19:38:21.037

我知道这是一个老问题，当我遇到这个[https://bugs.php.net/bug.php?id=50278时，我正在寻找同样的东西](https://bugs.php.net/bug.php?id=50278)

在注释中它说`LIBXML_HTML_NODEFDTD`作为这样的选项传递：

```
$doc = new DOMDocument();

$doc->loadHTMLFile($file, LIBXML_HTML_NODEFDTD);

echo $doc->saveHTML(); 
```

这将保留空白。

# css - CSS 框 - DIVS

> ID：13114051
> 
> 赞同：0
> 
> 时间：2012-10-28T23:21:46.310
> 
> 标签：css, html, alignment

我在[这里放了以下代码](http://jsfiddle.net/Yqyeq/)

我的盒子有问题，它们在 jsfiddle 上显示它们的状态，但在我的 960 网格的顶行还有另外 2 个空间。

为什么要把它推到两条线上？

**HTML：**

```
 <div id="holder">
            <div id="box" class="box">
                <p>Text</p>
                </div>
                <div id="box" class="box">
                    <p>Text</p>
                    </div>
                    <div id="box" class="box">
                        <p>Text</p>
                        </div>
                        <div id="box" class="box">
                            <p>Text</p>
                            </div>
                            <div id="box" class="box">
                                <p>Text</p>
                                </div>
                                <div id="box" class="box">
                                    <p>Text</p>
                                    </div>
            </div><!-- Holder End --> 
```

**CSS：**

```
#holder{width:100%;height:600px;}    
.box{width:260px;min-height:350px;float:left; border:1px solid red;}
    #box{margin-right:80px;}​ 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-28T23:32:05.517

你的margin-right：80px；正在为每个元素添加额外的 80px 宽度，因此您很可能会用完那里的空间。尝试删除右边距的 80px，看看它是否合适。从那里，调整边距以将所有内容都放在正确的位置。也许可能是 60 像素。那应该工作

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-28T23:27:24.230

# c++ - 如何在 Boost Spirit 中实现 const？

> ID：13114052
> 
> 赞同：2
> 
> 时间：2012-10-28T23:21:46.407
> 
> 标签：c++, compiler-construction, grammar, boost-spirit

我现在对 Boost Spirit 很感兴趣，并尝试构建一些东西。我们可以使用 Spirit 在 C++ 中实现类似 const 的东西吗？例如，用户将定义一个类似的项目；

```
constant var PROG_LANG="Java"; 
```

“constant var”似乎很奇怪，我接受，但你明白了。我搜索了互联网，但找不到任何关于它的信息。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-29T08:55:31.177

BigBoss说了什么:)

只有我会不使用语义动作 - 让它少得多......冗长（另见[Boost Spirit：“语义动作是邪恶的”？](https://stackoverflow.com/questions/8259440/boost-spirit-semantic-actions-are-evil/8259585#8259585)）：

```
vdef = 
    ("constant" >> attr(true) | attr(false)) >>
    "var" >> identifier >> '=' >> identifier_value >> ';' ; 
```

就这样。这`qi::attr`用于说明默认值（缺少`constant`关键字）。

这是一个带有输出的完整演示：

[http://liveworkspace.org/code/c9e4bef100d2249eb4d4b88205f85c4b](http://liveworkspace.org/code/c9e4bef100d2249eb4d4b88205f85c4b)

输出：

```
parse success: 'var myvariable = "has some value";'
data: false;myvariable;has some value;
parse success: 'constant var myvariable = "has some value";'
data: true;myvariable;has some value; 
```

代码：

```
#include <boost/fusion/adapted.hpp>
#include <boost/spirit/include/qi.hpp>
#include <boost/spirit/include/karma.hpp>

namespace qi    = boost::spirit::qi;
namespace karma = boost::spirit::karma;
namespace phx   = boost::phoenix;

struct var_definition {
    bool is_constant;
    std::string name;
    std::string value;

    var_definition() : is_constant( false ) {}
};

BOOST_FUSION_ADAPT_STRUCT(var_definition, (bool, is_constant)(std::string, name)(std::string, value))

void doParse(const std::string& input)
{
    typedef std::string::const_iterator It;

    qi::rule<It, std::string()> identifier, identifier_value;
    qi::rule<It, var_definition(), qi::space_type> vdef;

    {
        using namespace qi;

        identifier_value = '"' >> lexeme [ +~char_('"') ] > '"';
        identifier       = lexeme [ +graph ];
        vdef             = 
            ("constant" >> attr(true) | attr(false)) >>
            "var" >> identifier >> '=' >> identifier_value >> ';' ;
    }

    var_definition data;

    It f(std::begin(input)), l(std::end(input));
    bool ok = qi::phrase_parse(f,l,vdef,qi::space,data);
    if (ok)   
    {
        std::cout << "parse success: '" << input << "'\n";
        std::cout << "data: " << karma::format_delimited(karma::auto_, ';', data) << "\n";
    }
}

int main()
{
    doParse("var myvariable = \"has some value\";");
    doParse("constant var myvariable = \"has some value\";");
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-28T23:56:45.627

我没有正确理解你的问题，`spirit`它是一个解析器，它与它的含义无关，`constant`只能解析它，但如果你的意思是解析一个可选变量，`constant`那么它可以是一行：

```
namespace qi = boost::spirit::qi;
namespace phx = boost::phoenix;

typedef std::string::const_iterator it;
struct var_definition {
    bool is_constant;
    std::string name;
    std::string value;
    var_definition() : is_constant( false ) {}
};
qi::rule<it, std::string()> identifier;
qi::rule<it, std::string()> identifier_value;
qi::rule<it, var_definition(), boost::spirit::ascii::space_type> vdef;

void mark_var_as_constant(var_definition& vd) {vd.is_constant=true;}
void set_var_name(var_definition& vd, std::string const& val) {vd.name=val;}
void set_var_value(var_definition& vd, std::string const& val) {vd.value=val;}

vdef %=
    -qi::lit("constant")[phx::bind(mark_var_as_constant, qi::_val)] >>
    qi::lit("var") >>
    identifier[phx::bind(set_var_name, qi::_val, qi::_1)] >>
    qi::char_('=') >>
    identifier_value[phx::bind(set_var_value, qi::_val, qi::_1)] >>
    qi::char_(';'); 
```

当然还有其他方法，例如：

```
(qi::lit("constant")[phx::bind(mark_var_as_constant, qi::_val)] | qi::eps) 
```

最简单的是：

```
qi::hold[ qi::lit("constant")[phx::bind(mark_var_as_constant, qi::_val)] ] 
```

# asp.net-mvc-4 - 将“现有网站”项目类型更改为 MVC 项目

> ID：13114053
> 
> 赞同：0
> 
> 时间：2012-10-28T23:22:00.727
> 
> 标签：asp.net-mvc-4, visual-studio-2012, project-types

我想在我的解决方案中将 Visual Studio (2012) 中加载的现有网站更改为 MVC4 项目 Web 应用程序！实际上，加载的网站（来自本地 IIS）是一个真正的 MVC 应用程序（所以我不是在询问一些转换），但 Visual Studio 不能像这样识别它！使用现有的解决方案，Visual Studio 菜单就像我有一个 webform 应用程序：我不能添加控制器，视图或其他 MVC 特定项目！

那么如何将项目更改为 MVC 呢？

谢谢 ！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-10-02T14:48:54.093

我将此添加到我的 .csproj 中，现在右键单击我的“视图”文件夹时，我的上下文中有“添加->视图”。希望这可以帮助。

```
<ProjectTypeGuids>{E3E379DF-F4C6-4180-9B81-6769533ABE47};{349c5851-65df-11da-9384-00065b846f21};{fae04ec0-301f-11d3-bf4b-00c04f79efbc}</ProjectTypeGuids> 
```

# java - 在 Java 中使用队列解决迷宫

> ID：13114056
> 
> 赞同：0
> 
> 时间：2012-10-28T23:22:44.610
> 
> 标签：java, queue

我的作业是确定不使用队列是否可以解决迷宫。如果是，打印路径。我可以让 Queue 走到最后，但它说它无法解决。实际上是什么时候。如果我将 Final check if 语句更改为：

```
if (queue.isEmpty())
    {
        System.out.println("The maze is solvable!");
    }
else
    {
        System.out.println("The maze is unsolvable!");
    } 
```

然后它说它是可解的，但是当我尝试另一个不可解的迷宫时，它说它是可解的。不知道我哪里错了。

我有一个单独的 Point 类，它定义了 Points 和右、左、上和下位置。我必须使用 Point (0,0) 来标记起点，使用 Point (row-1,col-1) 来标记目标。

如果您需要更多代码，请告诉我。它正在搜索一个 char 二维数组。

**maze1.txt - （第一行定义行数和列数） - 可解**

```
7 12
..+.+.++++++
.++...++...+
..++.....+.+
+.+..++.+..+
+...++....++
+.+++..++..+
++++++++++.. 
```

**表示无法解决**

```
 QueueMaze
The maze is unsolvable!
p p + p + p + + + + + + 
p + + p p p + + p p p + 
p p + + p p p p p + p + 
+ p + p p + + p + p p + 
+ p p p + + p p p p + + 
+ p + + + p p + + p p + 
+ + + + + + + + + + p . 
```

**m解迷宫的方法**

```
public void queueMaze() {

char[][] storedMaze = copy(); 

LinkedList<Point> queue = new LinkedList<Point>();
    int count = 0;
    Point start = new Point(0,0);
    Point cur, end, above, right, left, below;

    Boolean solved = false;

queue.add(start); 

while (!queue.isEmpty())
    {
    //Store the first element position 0 in cur
        cur = queue.removeFirst();
        //System.out.println(cur.toString());

        //compare cur's points to the isEnd points
        //(row-1, col-1) if it is the end, break out
        //of the While
        if (isEnd(cur) && isSafe(cur))
        {
            //System.out.println("cur's final : " + cur.toString());
            end = cur;
            break;
        }

        //mark cur as visited with a P
    markVisited(cur, P);

        //check the position above cur to see if it is
        //
    right = cur.getRight(); 
    if (inBounds(right) && isSafe(right))
        {
            queue.add(right);
        }

        below = cur.getBelow(); 
    if (inBounds(below) && isSafe(below))
        {
            queue.add(below);
        }

        left = cur.getLeft(); 
    if (inBounds(left) && isSafe(left))
        {
            queue.add(left);
        }

        above = cur.getAbove(); 
    if (inBounds(above) && isSafe(above))
        {
            queue.add(above);
        }

}//while
//System.out.println("The queue size is: " + queue.size());

    if (!queue.isEmpty())
    {
        System.out.println("The maze is solvable!");
    }
else
    {
        System.out.println("The maze is unsolvable!");
    }

print();

returnMaze(storedMaze);
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-28T23:30:07.190

队列为空并不能确定迷宫是否已解决。队列只是跟踪哪些空间仍然需要检查。来到迷宫的尽头，还有很多空间可以检查您的队列，这是非常好的。

看起来如果你`if (isEnd(cur) && isSafe(cur))` 被触发，那么迷宫是可以解决的。

# php - PHPUnit 和 CodeIgniter - 致命错误：找不到类“CIUnit_TestCase”

> ID：13114064
> 
> 赞同：2
> 
> 时间：2012-10-28T23:23:42.710
> 
> 标签：php, codeigniter

我目前有一个设置，在我的本地电脑上我有一个 CodeIgniter 网站，为单元测试安装了 CIUnit 和 phpunit。这里一切正常。我可以进入测试目录并输入 phpunit，所有的单元测试都会像往常一样运行。耶

今天我设置了一个构建服务器并安装了 Hudson 和 phpunit，并创建了一个构建文件和一切让它运行的东西。构建失败是因为单元测试破坏了一切。我尝试转到测试目录 /var/lib/hudson/jobs/website/workspace/tests 并输入 phpunit，我收到以下错误：

```
Fatal error: Class 'CIUnit_TestCase' not found in /var/lib/hudson/jobs/website/workspace/tests/controllers/CI_Unit_Test_class_Test.php on line 8 
```

我知道代码不同没有问题，因为它是在构建期间从 git repo 中提取的。我一生都无法弄清楚为什么它可以在本地工作，但不能在构建服务器上工作。

两台机器都运行 Ubuntu 12.04

谁能给我一些关于检查什么的建议或见解？我将不胜感激。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-01-16T09:50:17.917

我必须在 Tests 文件夹下运行命令 phpunit，而不是在其子文件夹中。例如：

代替

测试/模型/ phpnuit sometest.php 使用

测试/phpunit 模型/sometest.php

希望这有帮助，请检查。

# oracle - ORA-00932 更新 CLOB 列时

> ID：13114065
> 
> 赞同：0
> 
> 时间：2012-10-28T23:23:45.513
> 
> 标签：oracle, clob, ora-00932

我有一个大约 10 列类型为 VARHCAR 且大小 > 2000 的表。我试图通过使用临时列并在复制数据后重命名将它们转换为 CLOB。其中 4 列没有问题，但我得到所有剩余列的 ORA-00932。下面是为每一列重复的 SQL。

```
ALTER TABLE TABLE1 ADD (TEMP_CLOB CLOB );
UPDATE TABLE1 SET TEMP_CLOB=BIG_VARCHAR_COLUMN;
ALTER TABLE TABLE1 DROP COLUMN BIG_VARCHAR_COLUMN;
ALTER TABLE TABLE1 RENAME COLUMN TEMP_CLOB TO BIG_VARCHAR_COLUMN; 
```

这是错误报告：

```
SQL Error: ORA-00932: inconsistent datatypes: expected - got CLOB
00932\. 00000 -  "inconsistent datatypes: expected %s got %s"
*Cause:    
*Action: 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-29T03:50:05.820

这是由与正在修改的列相关的触发器引起的。修复是在此更改之前禁用触发器，然后启用它们。

# image - 具有优雅降级的响应式、透明 CSS 图像标题？

> ID：13114069
> 
> 赞同：4
> 
> 时间：2012-10-28T23:24:36.817
> 
> 标签：image, html, css, responsive-design, graceful-degradation

在图像上创建响应式、透明的 CSS 标题的正确方法是什么——在旧浏览器中优雅地降级？

我正在努力实现：

*   居中的垂直图像列
*   图像的高度和宽度相等
*   每个图像都有一个应该居中的标题
*   字幕应具有透明背景
*   如果在不支持透明度的旧浏览器中背景变黑就好了

如果你看一下[这个 Fiddle 例子](http://jsfiddle.net/Baumr/XjthT/3/)，它显然有很多问题。

HTML5 的基本前提是：

```
<section>
    <figure>
        <img src="1.jpg">
        <figcaption>Caption 1</figcaption>
    </figure>

    <figure>
        <img src="2.jpg">
        <figcaption>Caption 2</figcaption>
    </figure>

    <figure>
        <img src="3.jpg">
        <figcaption>Caption 3</figcaption>
    </figure>
</section> 
```

但是[CSS3 代码](http://jsfiddle.net/Baumr/XjthT/3/)是我们遇到问题的地方。这是正确的方法吗？我让它与一些微调（不包括在内）一起工作，但微调对我来说似乎没有语义意义。

例如，这是结果：

![在此处输入图像描述](../Images/5ec088e35dcbadc1ebf16935ed7b013b.png)

我感觉 CSS 在很多层面上都是错误的（双关语）。

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-10-28T23:32:08.487

我稍微修改了你的 CSS。主要更改是添加`position: relative;`到父元素和`position: absolute;`标题。

**CSS**：

```
section {
    overflow: auto;
}

section figure {
    float: left;
    clear: both;

    position: relative;
    overflow: auto;

    margin: 0 auto;
    padding: 30px 0 0 0;
    font-size: 15px;
}

section figure img {
    vertical-align: bottom;
}

section figure figcaption {
    position: absolute;
    bottom: 0;
    left: 0;
    right: 0;

    background: rgba(0,0,0,0.7);
    text-align: center;
    color: #fff; 
    padding: 10px;
}

section {
    padding-bottom: 30px;
    background: #ccc;

} 
```

**演示：http: [//jsfiddle.net/XjthT/6/](http://jsfiddle.net/XjthT/6/)**

# c - 带有字符类的 fscanf

> ID：13114073
> 
> 赞同：2
> 
> 时间：2012-10-28T23:25:03.290
> 
> 标签：c

假设我有一个文件 dog.txt

```
The quick brown fox jumps over the lazy dog. 
```

我可以像这样从文件中读取

```
# include <stdio.h>
int main(){
  char str[10];
  FILE *fp;
  fp = fopen("dog.txt", "r");
  fscanf(fp, "%[ABCDEFGHIJKLMNOPQRSTUVWXYZ]", str);
  printf("%s\n", str);
  return 0;
} 
```

程序将输出`T`. 但是，我可以使用 POSIX 字符类，而不是列出所有字母，比如`[:upper:]`？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-28T23:29:01.607

不，你不能。这是你可以做的`[]`：

> *转换规范包括格式*字符串中的所有后续字节，直到并包括匹配的 <right-square-bracket> (' `]`')。方括号（*scanlist*）之间的字节组成了扫描集，除非 <left-square-bracket> 之后的字节是 <circumflex> (' `^`')，在这种情况下，扫描集包含所有未出现在和 <right-square-bracket> 之间的扫描列表。如果转换规范以 " `[]`" 或 " `[^]`" 开头，则 <right-square-bracket> 包含在扫描列表中，并且下一个 <right-square-bracket> 是结束转换规范的匹配 <right-square-bracket> ; 否则，第一个 < right-square-bracket> 是结束转换规范的那个。如果一个 '`-`' 在扫描列表中并且不是第一个字符，也不是第一个字符是 ' `^`' 的第二个字符，也不是最后一个字符，行为是实现定义的。

（[POSIX 标准`scanf`](http://pubs.opengroup.org/onlinepubs/9699919799/functions/scanf.html)。C 标准有类似的措辞，请参阅 Adam Rosenfield 的回答。）

因此，根据实现，您可能可以这样做`fscanf(fp, "%[A-Z]", str)`，但不能保证这将适用于任何 POSIX 系统。在任何情况下，`[:upper:]`都与 相同`[:epru]`。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-28T23:29:44.150

不，没有便携的方法可以做到这一点。一些实现允许您使用诸如 之类的字符范围`%[A-Z]`，但这不是 C 标准所保证的。C99 §7.19.6.2/12 说明了`[`转换说明符（添加了重点）：

> 转换说明符包括字符串中的所有后续字符`format`，直到并包括匹配的右括号 ( `]`)。括号（*scanlist*）之间的字符组成扫描集，除非左括号之后的字符是一个抑扬符（`^`），在这种情况下，扫描集包含所有未出现在抑扬符和右括号之间的扫描列表中的字符。如果转换说明符以`[]`or开头`[^]`，则右括号字符在扫描列表中，并且下一个右括号字符是结束说明的匹配右括号；否则后面的第一个右括号字符是结束规范的字符。**如果一个`-`字符在扫描列表中，不是第一个，也不是第二个，第一个字符是 a `^`，也不是最后一个字符，行为是实现定义的。**

[POSIX.1-2008 描述](http://pubs.opengroup.org/onlinepubs/9699919799/functions/scanf.html)具有几乎相同的措辞（甚至在意外冲突的情况下遵循 ISO C 标准），因此在使用 POSIX 系统时在这种情况下没有额外的保证。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-28T23:30:00.247

试试这个：

```
fscanf(fp, "%[A-Z]", str); 
```

# magento - magento 属性、类别和分层导航

> ID：13114078
> 
> 赞同：0
> 
> 时间：2012-10-28T23:26:31.280
> 
> 标签：magento, configuration, attributes, product, catalog

可配置产品的属性不会显示在类别页面的分层导航中，除非与该可配置产品关联的至少一个简单产品分配给该类别。在我看来，可配置产品的相关简单产品也应该继承可配置产品类别。到目前为止，我必须手动浏览所有简单的产品并分配类别。

这是 Magento 中的正常行为吗？您是否总是必须手动为可配置产品下的简单产品分配类别，以便它们的属性显示在分层导航中？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-29T11:46:14.220

您不必这样做，当您创建子产品时，它们应该自动与父产品具有相同的类别。

它们是使用后端的快速创建功能创建的吗？

# ruby-on-rails - 从 Rails 应用程序搜索 WordPress 博客

> ID：13114081
> 
> 赞同：4
> 
> 时间：2012-10-28T23:26:38.833
> 
> 标签：ruby-on-rails, ruby-on-rails-3, wordpress

我的 Rails 3 应用程序有一个站点范围的自定义编写的搜索控制器，并希望包含来自该站点的 WordPress 博客的结果。在我的 Rails 应用程序中对帖子执行关键字搜索的最佳方式是什么？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-11-05T03:31:39.320

如果您共享数据库，则只需对其使用 SQL 查询。此解决方案为您提供直接数据库查询的速度，但您需要正确构建该查询才能获取所有相关数据。

如果您无法从 Rails 应用程序访问 WP 数据库，那么最好的方法是使用 curl、httparty、RestClient 或任何其他文件检索库。

为此，请使用自定义模板创建 Wordpress 页面，该页面将以最适合您在 Rails 应用程序中解析的格式输出搜索结果（json、xml、csv、urlencoded 等）。

然后使用 curl/RestClient/httparty 从您的 Ruby 应用程序请求该 WP 页面...</p>

该解决方案为您提供了 WP 模板标签和功能的强大功能来获得结果。

此外，无需从头开始创建自定义模板，您只需从核心模板复制和调整 search.php 即可以 Rails 应用程序所需的格式提供结果。

使用此解决方案，您缺乏直接访问 db 的速度，因为所有搜索结果都必须通过 http 管道传输，并且您必须两次处理数据（在 WP 中编码为正确格式并在 Rails 应用程序中解码）。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-06T21:11:55.753

有趣的问题。我想我会这样处理它：

*   使用**RSS**作为从博客到您的 rails 应用程序的文本传输。这允许将来灵活地添加更多博客、更改您的博客引擎、数据库主机等。它还可以保护您免受 Wordpress 代码更新的影响。鉴于 Wordpress 的安全历史，无论如何我都喜欢将它们托管在受保护的沙箱中。RSS 是博客的母语，因此它似乎很适合这种内容集成。

*   使用[feedzirra gem](https://github.com/pauldix/feedzirra)将**RSS 条目**导入到 rails 模型中。

*   使用[Elasticsearch](http://www.elasticsearch.org/)和[轮胎](https://github.com/karmi/tire)在您的 rails 应用程序和博客条目中进行**模糊文本搜索。**有关详细信息，请参阅[此 Railscast](http://railscasts.com/episodes/306-elasticsearch-part-1)。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-09T13:28:16.120

选项 1\. 是对两个站点都使用搜索引擎，例如 elasticsearch、solr 等。因此，您可以从 rails 和 wordpress 填充索引。

选项 2。您编写脚本，定期读取您的 wordpress RSS 并将数据保存在您的 rails 应用程序中。

最后你应该避免从不同的来源搜索，你应该将数据收集到一个地方然后搜索。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-11-10T09:16:35.290

您不必坚持使用 wordpress。您可以使用 Google 搜索 API。[Web 搜索 api](https://developers.google.com/web-search/)已被弃用但[仍在工作](http://ajax.googleapis.com/ajax/services/search/web?v=1.0&q=http://en.blog.wordpress.com%20blog)。它的替代品是[自定义搜索 API](https://developers.google.com/custom-search/v1/overview)。如果您查询超过限额，您可能需要付费。

或者，您可以利用其他搜索引擎 API，例如[Bing Search API](https://datamarket.azure.com/dataset/5BA839F1-12CE-4CCE-BF57-A49D98D29A44)。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-11-11T21:52:51.613

我建议使用 Wordpress JSON API 并使用 solr 或类似的东西将其插入您的搜索中。您可以在创建帖子时建立索引，然后通过 sam JSON 接口调用文章。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-12-11T11:55:47.847

将[Tire](https://github.com/karmi/tire)和[wp-](http://searchbox-io.github.com/wp-elasticsearch/) elasticsearch 与 ElasticSearch 一起使用。

# google-app-engine - Google App Engine (GAE) Task Queue Failure and Recovery Time Window

> ID：13114085
> 
> 赞同：1
> 
> 时间：2012-10-28T23:27:24.310
> 
> 标签：google-app-engine, task-queue

We're interested in using a push queue in GAE but one thing I can't find is the window for recovery in the event of queue or appengine downtime.

For example, I have a push queue with a number of tasks on it. Some of these tasks get pulled off and are executing. Let's say now the queue goes down (for whatever reason), while these tasks are executing, and then comes back up. What is the time window for the restoration of the queue? Is there a set time window of recovery?

There's the possibility of these tasks that were pulled off the queue and executing now reappearing on the queue and having them execute again due to the restoration time window.

We've got idempotence considerations in our code, but it would be good to know if there are time window recovery strategies for the GAE Queue downtimes.

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-29T00:55:28.027

如果我正确理解您的问题，您担心队列可能会下降，因为特定 eta 范围的执行完成知识丢失，并且必须重新执行这些任务。

这不是 GAE 任务队列系统中的工作方式。我们逐个任务跟踪执行情况。（我们必须这样做，因为不需要按照严格的 eta 顺序分派任务。）在您所指的意义上，队列不会“下降”。

在当前系统下，单个任务可能会成功执行两次。当这种情况发生时（而且这种情况非常罕见），连续执行之间应该至少间隔一分钟。

没有您需要考虑的时间窗口恢复策略。

# extjs - 为什么 ExtJS 4 中的 Array 的 clone 方法会倒退？

> ID：13114086
> 
> 赞同：1
> 
> 时间：2012-10-28T23:27:24.650
> 
> 标签：extjs

我正在阅读 ExtJS 4 源代码。这是克隆方法的一部分。为什么 EntJS 4 中的 Array 的 clone 方法会倒退？

```
 if (type === '[object Array]') {
        i = item.length;

        clone = [];

        while (i--) {
            clone[i] = Ext.clone(item[i]);
        }
    } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-28T23:29:00.670

向后迭代意味着他们不需要添加额外的比较`item.length`或以其他方式单独存储它。他们只需要一个变量，`i`。

# authentication - 如何让工作流身份验证在 Aviarc 中工作

> ID：13114089
> 
> 赞同：0
> 
> 时间：2012-10-28T23:27:47.370
> 
> 标签：authentication, aviarc

我们正在尝试在我的应用中推出身份验证，但它对我们不起作用。

我们已经设置了当前权限和当前授权者，甚至将登录查询设置为仅选择“a”，因此我们可以保证获得结果集。

我们已将登录工作流复制到工作流/系统目录。

它看起来甚至没有尝试运行登录查询。

**start.xml**工作流程：

```
<workflow>
    <authenticate error-screen="login-error" dataset="login">
        <show-screen name="login" />
    </authenticate>
    <call-workflow name="home"/>
</workflow> 
```

**login.xml**屏幕：

```
<screen xmlns:action="urn:aviarc:widget:com.aviarc.toronto.widget.core.action:1"
    xmlns:app="urn:aviarc:widget:application">

    <group-box visible="y" left="10" right="4" top="10" bottom="4" class="blue">

        <image height="80" width="245" left="10" top="5" class="mfcologo" />
        <line height="5" left="0" right="0" top="120" class="myerblue" />

        <text-static visible="y" left="74" top="151" width="80" height="20" text="User name:" />
        <text-static visible="y" left="234" top="151" width="80" height="20" text="Password:" />

        <text-edit name="username" left="74" top="182" width="100" height="20" field="login.user_name" />
        <text-edit name="password" left="234" top="182" width="100" height="20" field="login.user_password" datatype="password" />

        <button left="376" top="182" width="60" height="20" label="Login" action="Next"/>
    </group-box>
</screen> 
```

**system/Login.xml**工作流程：

```
<workflow xmlns:au-security="urn:aviarc:xmlcommand:au.com.aviarc.xmlcommand.security">

    <au-security:hash-text text="{$login.user_password}" result-field="login.hashed-password" />

    <dataset name="cslogin" databroker="loginqry" query="get-all">
        <param name="username" value="{$login.user_name}" />
        <param name="password" value="{$login.hashed-password}" />
    </dataset>

    <if test="dataset-empty" value1="cslogin">
        <then>
            <set-field field="login.authenticated" value="n"/>
        </then>
        <else>
            <set-field field="login.authenticated" value="y"/>
        </else>
    </if>
</workflow> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-28T23:27:47.370

工作流程身份验证需要在输入之前填写“用户名”字段，否则身份验证将立即失败并显示登录错误屏幕。

在您的示例中，很容易修复，将**login.xml**屏幕中的行更改为：

```
<text-edit name="username" left="74" top="182" width="100" height="20" field="login.user_name" /> 
```

成为：

```
<text-edit name="username" left="74" top="182" width="100" height="20" field="login.username" /> 
```

**并在系统/登录**工作流程中更新对它的引用。

# java - SwingUtilities.invokeLater on full speed thread

> ID：13114097
> 
> 赞同：2
> 
> 时间：2012-10-28T23:28:54.547
> 
> 标签：java, multithreading, swing

I have a thread that does display updates on my JFrame by using SwingUtilities.invokeLater. The thread's speed is adjustable, and when it set to full speed (no sleeping between updates), my program gets slowed down badly. I guess the problem is my thread is generating too much SwingUtilities.invokeLater events that JFrame's thread can not consume. So is there anything I can do on my thread to remove previously added but not consumed events? Or should I use some other ways to update JFrame without using SwingUtilities.invokeLater?

Thanks in advance.

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-28T23:31:53.600

这可能是一个完美的工作[`SwingWorker`](http://docs.oracle.com/javase/6/docs/api/javax/swing/SwingWorker.html#publish%28V...%29)。您可以发布增量更新，并将`SwingWorker`它们批处理以解决性能问题：

> 因为流程方法是在事件调度线程上异步调用的，所以在流程方法执行之前可能会发生对发布方法的多次调用。出于性能目的，所有这些调用都合并为一个带有串联参数的调用。

你想在 EDT 上运行的代码，你通过实现`process()`. 更新列表在参数中传递给您。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-10-29T01:24:18.457

听起来您想避免使事件调度线程饱和。类`javax.swing.Timer`，在[*如何使用 Swing Timers*](http://docs.oracle.com/javase/tutorial/uiswing/misc/timer.html)中讨论，包括[`setCoalesce()`](http://docs.oracle.com/javase/7/docs/api/javax/swing/Timer.html#setCoalesce%28boolean%29)“合并多个挂起`ActionEvent`的触发”。它可能是您更新更新速度的另一种方式。

[如此处](https://stackoverflow.com/a/11838349/230513)所述，`SwingWorker`仅限于 33 Hz。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-29T01:57:06.867

你可以使用一个简单的 repaint() 吗？这样做的好处是多个调用合并为一个。

（添加了详细说明）

假设您不断更新 GPS 位置并将其显示在两个文本字段中。您进行更新的线程：

```
run() {
  while (keepGoing) {
    Point myLocation = computeMyLocation();
    locationModel.setLocation(myLocation);
    locationComponent.repaint();
  }
} 
```

然后，在 MyLocationComponent

```
@Override
public void paintComponent(Graphics g) {
   Point myLocation = locationModel.getLocation();

   // you'd really want a NumberFormat
   latitudeTextArea.setText(String.valueOf(myLocation.y));
   longitudeTextArea.setText(String.valueOf(myLocation.x));

   super.paintComponent(g);
} 
```

优点是这将模型与视图分开（如果您将线程视为控制器，这就是 MVC），并且所有线程都应该工作 - 不需要任何 invokeLater()。一个缺点是您的线程需要知道所有需要更新的 JComponent。在“真实”场景中，您可能会从“控制器”（您的线程）或模型中向触发重绘的侦听器触发事件​​。

注意：正如@trashgod 所指出的，在 LocationModel 中，`getLocation()`and`setLocation()`方法应该是`synchronized`更新立即出现。

# c++ - Formatting SSN using string member functions

> ID：13114100
> 
> 赞同：0
> 
> 时间：2012-10-28T23:29:19.827
> 
> 标签：c++

What are some different ways I can modify a string holding ssn so that

123-45-8999 becomes XXX-XX-8999 ?

Must use string member functions to accomplish this.

Thanks!

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-28T23:31:41.773

尝试[`replace`](http://en.cppreference.com/w/cpp/string/basic_string/replace)：

```
std::string s = "123-45-8999";

s.replace(0, 6, "XXX-XX"); 
```

如果字段宽度是动态的，您可以将这个想法与我们之前所做的[字符串标记化结合起来，以获得更灵活的东西。](https://stackoverflow.com/a/13112901/596781)

# java - postgresql error: canceling statement due to user request

> ID：13114101
> 
> 赞同：32
> 
> 时间：2012-10-28T23:29:25.893
> 
> 标签：java, postgresql, exception

**What causes this error in postgresql?**

```
org.postgresql.util.PSQLException: ERROR: canceling statement due to user request 
```

**My Software Versions:**

PostgreSQL `9.1.6 on x86_64-redhat-linux-gnu, compiled by gcc (GCC) 4.7.2 20120921 (Red Hat 4.7.2-2), 64-bit".`

My postgresql driver is: `postgresql-9.2-1000.jdbc4.jar`

Using java version: `Java 1.7`

Clue: My postgresql database is on a solid state hard drive and this error happens randomly and sometimes not at all.

* * *

## 回答 #1

> 赞同：29
> 
> 时间：2013-01-04T14:02:45.087

我们已经找出了这个问题的原因。这是由最新的 JDBC 驱动程序 9.2-100x 中的 setQueryTimeout() 的错误实现来解释的。如果您手动打开/关闭连接，则可能不会发生这种情况，但通常会在连接池到位且**autocommit**设置为**false**时发生。在这种情况下，应该使用非零值调用 setQueryTimeout()（例如，使用 Spring 框架 @Transactional(timeout = xxx) 注释）。

事实证明，无论何时在语句执行期间引发 SQL 异常，取消计时器都没有被取消并保持活动状态（这就是它的实现方式）。由于池化，后面的连接没有关闭，而是返回到池中。稍后，当取消计时器触发时，它会随机取消当前与创建此计时器的连接关联的查询。目前，这是一个完全不同的查询来解释随机性效应。

建议的解决方法是放弃 setQueryTimeout() 并改用 PostgreSQL 配置 (statement_timeout)。它没有提供相同级别的灵活性，但至少总是有效。

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2012-11-12T17:34:37.500

这假定 postgresql 的 jdbc jar 文件中的竞争条件错误是造成上述错误的原因。

**解决方法1，定期刷新与数据库的连接**

一种解决方法是关闭与数据库的连接并定期创建与数据库的新连接。在每几千条 sql 语句之后，只需关闭连接并重新创建它。然后由于某种原因不再抛出此错误。

**解决方法 2，打开日志记录**

如果您在设置驱动程序时在 JDBC 驱动程序级别打开日志记录，那么在某些情况下会消除竞争条件问题：

```
Class.forName("org.postgresql.Driver");
org.postgresql.Driver.setLogLevel(org.postgresql.Driver.DEBUG); 
```

**解决方法3，捕获异常并重新初始化连接**

您还可以尝试捕获特定异常，重新初始化连接并再次尝试查询。

**解决方法 4，等到 postgresql jdbc jar 出现错误修复**

我认为这个问题可能与我的 SSD 硬盘驱动器的速度有关。如果您收到此错误，请在此处发布如何始终如一地重现它，开发人员非常有兴趣消除此错误。

* * *

## 回答 #3

> 赞同：6
> 
> 时间：2012-10-28T23:29:25.893

**If you are getting this error without using transactions**

The user has requested the statement be cancelled. The statement is doing exactly what it is told to do. The question is, who requested this statement be cancelled?

Look at every line in your code which prepares the SQL for execution. You could have some method that applies to the statement which cancels the statement under some circumstances, like this:

```
statement = conn.createStatement();
conn.setAutoCommit(true);
statement.setQueryTimeout(25);
my_insert_statement.setString(1, "moobars");

my_insert_statement.executeUpdate();
statement.close(); 
```

In my case, what happened was I had set the query timeout to 25 seconds, and when the insert took longer than that. It passed the 'canceling statement due to user request' exception.

**If you are getting this error while using transactions:**

If you receive this Exception, double check all your code that does SQL transactions.

If you have a query that is in a transaction and you forget to commit, and then you use that connection to do something else where you operate as if you are not in a transaction, there could be undefined behavior which produces this Exception.

Make sure all code that does a transaction is cleaning up after itself. Make sure the transaction begins, work is done, more work is done, and the transaction is rolled back or committed, then make sure the connection is left in the `autocommit=true` state.

If this is your problem, then the Exception is not thrown where you have forgotten to clean up after yourself, it happens somewhere long after you have failed to clean up after a transaction, making this an elusive exception to track down. Refreshing the connection (closing it and getting a new one) will clear it up.

* * *

## 回答 #4

> 赞同：4
> 
> 时间：2012-10-29T01:05:33.037

除了 Eric 的建议之外，您还可以在以下情况下看到语句取消：

*   以同一用户身份登录的管理员或其他连接`pg_cancel_backend`用于要求您的会话取消其当前语句
*   管理员向运行您的语句的 PostgreSQL 后端发送信号
*   管理员请求`fast`关闭或重新启动 PostgreSQL 服务器

检查可能取消长时间运行的查询的 cron 作业或负载管理工具。

# php - Matching all three kinds of PHP comments with a regular expression

> ID：13114104
> 
> 赞同：3
> 
> 时间：2012-10-28T23:29:30.327
> 
> 标签：php, regex, comments, sublimetext2

I need to match all three types of comments that PHP might have:

*   `# Single line comment`

*   `// Single line comment`

*   `/* Multi-line comments */`

*   ```
     /**
      * And all of its possible variations
      */ 
    ```

Something I should mention: I am doing this in order to be able to recognize if a PHP closing tag (`?>`) is inside a comment or not. If it is then ignore it, and if not then make it count as one. This is going to be used inside an XML document in order to improve [Sublime Text](https://en.wikipedia.org/wiki/Sublime_Text)'s recognition of the closing tag (because it's driving me nuts!). I tried to achieve this a couple of hours, but I wasn't able. How can I translate for it to work with XML?

So if you could also include the if-then-else login I would really appreciate it. BTW, I really need it to be in pure regular expression expression, no language features or anything. :)

Like Eicon reminded me, I need all of them to be able to match at the start of the line, or at the end of a piece of code, so I also need the following with all of them:

```
<?php
    echo 'something'; # this is a comment
?> 
```

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-10-28T23:34:25.750

解析编程语言对于正则表达式来说似乎太多了。您可能应该寻找一个 PHP 解析器。

但这些将是您正在寻找的正则表达式。我假设他们所有人都使用 DOTALL 或 SINGLELINE 选项（尽管前两个在没有它的情况下也可以工作）：

```
~#[^\r\n]*~
~//[^\r\n]*~
~/\*.*?\*/~s 
```

请注意，如果注释分隔字符出现在字符串或其他地方，这些字符中的任何一个都会导致问题，而它们实际上并没有打开注释。

您还可以将所有这些组合成一个正则表达式：

```
~(?:#|//)[^\r\n]*|/\*.*?\*/~s 
```

如果您使用一些不需要分隔符的工具或语言（如 Java 或 C#），请删除那些`~`. 在这种情况下，您还必须以不同的方式应用 DOTALL 选项。但是在不知道您将在哪里使用它的情况下，我无法告诉您如何使用。

如果您不能/不想设置 DOTALL 选项，这将是等效的（我还省略了分隔符来举例）：

```
(?:#|//)[^\r\n]*|/\*[\s\S]*?\*/ 
```

有关工作演示，[请参见此处。](http://regexr.com?32k88)

现在，如果您还想捕获组中评论的内容，那么您可以这样做

```
(?|(?:#|//)([^\r\n]*)|/\*([\s\S]*?)\*/) 
```

无论评论的类型如何，评论内容（没有语法分隔符）都将在捕获 1 中找到。

另一个[工作演示](http://regexr.com?32k8b)。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2016-10-25T14:06:49.277

### 单行注释

```
singleLineComment = /'[^']*'|"[^"]*"|((?:#|\/\/).*$)/gm 
```

使用此正则表达式，您必须替换（或删除）由`((?:#|\/\/).*$)`. 此正则表达式将忽略看起来像注释的字符串内容（例如`$x = "You are the #1";`or `$y = "You can start comments with // or # in PHP, but I'm a code string";`）

### 多行注释

```
 multilineComment = /^\s*\/\*\*?[^!][.\s\t\S\n\r]*?\*\//gm 
```

# node.js - backbone boilerplate: How to start the development server

> ID：13114110
> 
> 赞同：2
> 
> 时间：2012-10-28T23:30:00.433
> 
> 标签：node.js, backbone.js

I've cloned Backbone boilerplate which comes with an example Todo app. I have also read that the boilerplate comes with a development server, but I don't know how to start it. In the tutorial, it says you can run this command

```
node build/server 
```

but I get an error saying that it can't find the module /build/server

Can anyone explain?

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-29T11:00:10.357

如果您已经安装了[nodejs](http://nodejs.org/)，它应该很简单，只需将目录更改为 TODO 应用程序的根目录并运行以下命令（尽管您可能还需要将路径添加`node`到您的环境设置中）：

```
bbb server 
```

然后，您应该能够访问 localhost:8000 上的示例。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-11T21:14:01.330

仅供参考，您可以更改 grunt.js 中的服务器值以在特定主机和端口上运行 bbb。

```
server: {
   host: "10.111.X.1", port: 3303,
   ...
} 
```

# c# - mvc3 - 从视图返回布尔值到控制器

> ID：13114114
> 
> 赞同：0
> 
> 时间：2012-10-28T23:30:26.657
> 
> 标签：c#, asp.net-mvc-3, html-helper

***背景***

我在视图模型类中有一个布尔值。我有一个 if 语句检查布尔值是真还是假。如果为假，我将值设置为真并调用视图。在视图中，我有按钮，当点击更新并再次调用视图时。我的问题是加载视图时 bool 一直设置为 false。我不知道为什么会这样。有没有办法阻止布尔值被改变？

***尝试***

我知道 MVC 是无状态的。

我使用的视图是一个 .aspx 视图，其中输入标记的“值”属性已被使用。所以我无法更新提交按钮的值。

```
<input type="submit" class="button" value="bvCalc" /> 
```

***问题***

无论以何种方式，我都希望保持 bool 的状态。我不知道该怎么做，我不确定此时最好的做法是否是

1.  在视图中使用隐藏字段
2.  构建一个 HTML Helper Extension，它将 bool 从 true 更新为 false
3.  返回修改后的值，并将模型信息发送回控制器，以便我可以评估 if 语句中的数据。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-29T00:37:20.677

值从视图到控制器的方式是通过`ModelBinding`. 如果你不熟悉它是如何工作的，你可能想谷歌它以获得更好的理解。

举个简单的例子，假设您想要将 bool 传递给的控制器中的操作方法如下所示：

```
public ActionResult MyAction(MyViewModel model)
{
  //.. do something here.
} 
```

你的 ViewModel 看起来像这样：

```
public class MyViewModel
{  
   public bool MyBool { get; set; }
   // ...more properties...
} 
```

只要您的视图有某种字段（例如文本框、复选框、隐藏字段），其名称与属性名称（在本例中为“MyBool”）完全匹配，并且值将转换为属性（在本例中）字符串 'True' 可以映射到布尔`true`值） -`ModelBinding`将能够在您的控制器操作中`model.MyBool`填充。`true`

如果您使用内置的辅助方法，则无需担心在字段元素中获取正确的名称/值 - MVC 将为您完成此操作

例如`@Html.HiddenFor(model => model.MyBool)` ，将呈现 HTML 之类的东西

```
<input type="hidden" id="MyBool" name="MyBool" value="True" /> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-28T23:36:11.873

使用布尔？在你的模型中。没有它，布尔值将始终默认为假。

# algorithm - Finding shortest path with FGL

> ID：13114115
> 
> 赞同：9
> 
> 时间：2012-10-28T23:30:40.797
> 
> 标签：algorithm, haskell, graph, shortest-path

I'm using Martin Erwig's Functional Graph Library (FGL) to represent the following simple directed weighted graph.

![graph](../Images/082ed4bf46b75bc1fbece4d651b2d773.png)

```
genLNodes :: [LNode String]
genLNodes = zip [1..5] ["A","B","C","D","E"]

genLEdges :: [LEdge Int]
genLEdges = [(1,2,4),(1,3,1),(2,4,2),(3,4,2),(2,5,1),(4,5,1),
             (2,1,4),(3,1,1),(4,2,2),(4,3,2),(5,2,1),(5,4,1)]

mygraph :: Gr String Int
mygraph = mkGraph genLNodes genLEdges 
```

Now I want to find the shortest path from one node to another e.g. `A` to `E` using dijkstra's algorithm. There seems to be a function to do that in `Data.Graph.Inductive.Query.SP`:

```
dijkstra :: (Graph gr, Real b) => Heap b (LPath b) -> gr a b -> LRTree b 
```

But I'm not able to figure out how to use it from the interface provided. Any help would be much appreciated. I would also like to hear any other suggestions, if I'm creating the directed weighted graph the right way, or if there's any other (better) package to do so?

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-10-28T23:51:47.240

为了得到两个节点之间的最短路径，模块提供了一个特殊的功能，[`sp`](http://hackage.haskell.org/packages/archive/fgl/5.4.2.4/doc/html/Data-Graph-Inductive-Query-SP.html#v%3asp)（大概是“最短路径”的缩写），所以得到最短路径最简单的方法是

```
sp 1 5 mygraph 
```

`sp`用途`dijkstra`：

```
spTree :: (Graph gr, Real b) => Node -> gr a b -> LRTree b
spTree v = dijkstra (H.unit 0 (LP [(v,0)]))

sp :: (Graph gr, Real b) => Node -> Node -> gr a b -> Path
sp s t = getLPathNodes t . spTree s 
```

从中您可以看到如何生成生成树并自己从中获得最短路径，但除非您有充分的理由不使用提供的函数，否则您应该坚持下去。

# python - What is good software design practice for taking multiple pairs of files on the command line?

> ID：13114116
> 
> 赞同：0
> 
> 时间：2012-10-28T23:30:42.447
> 
> 标签：python, software-design

I'm writing a Python script that takes five pairs of files as arguments. I would like to allow the user to input these files as command-line arguments, but I'm worried he will put the files in the wrong order or not put a file right after the file it's paired with. How can I design my command-line arguments to avoid this problem in the least clunky way possible?

For example, if the files are "U1", "M1", "U2", "M2", "U3", "M3", "U4", "M4", "U5", "M5", I'm afraid the person might put the files in the order "U1 U2 U3 U4 U5 M1 M2 M3 M4 M5", or "U1 M2 U3 M4 M5 ..."

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-28T23:37:21.160

如果文件在逻辑上成对属于一起，最不容易出错的方法可能是要求它们一起输入，例如

> mycommand -Pair FileA1,FileA1 -Pair FileB1,FileB2

这样，您可以强制要求文件必须成对输入（任何没有两个输入文件的 -Pair 参数都可能产生错误），并且对用户来说很明显文件必须一起输入。

# tfs - Receiving error TF277003 when trying to update TFS 2010 project to 2012

> ID：13114118
> 
> 赞同：1
> 
> 时间：2012-10-28T23:30:46.053
> 
> 标签：tfs

When trying to update a TFS 2010 project to 2012, I'm receiving the following error:

TF277003: Cannot add more than one upgrade process template from team project.

Can anyone point me in the right direction? The search here and google both brought up nothing...

# javascript - 将值与 .innerHTML 一起传递

> ID：13114121
> 
> 赞同：0
> 
> 时间：2012-10-28T23:31:11.680
> 
> 标签：javascript, python, django

我正在尝试使用 django 建立一个有论坛的网站。我希望用户能够发布新评论或回复其他用户的评论。我有，所以当他们点击回复按钮时，会弹出一个新的文本区域

HTML

```
<button onclick="myFunction({{forloop.counter}})">Reply</button> 
<div id="{{forloop.counter}}"> </div> 
```

Javascript

```
function myFunction(x)
{
 document.getElementById(x).innerHTML="<form action='' method='post'> {% csrf_token %} <textarea id=reply_body name=reply_body value={{reply_body}}> </textarea> <input type=submit> </form> ";
} 
```

....我想要做的是将正文的文本传递给我的意见，以便我可以知道回复的评论是什么。但是，我无法将 textbody 传递到 .innerHTML= ... 每当我尝试它时，它只会说那里什么都没有。我在这里缺少什么吗？或者更简单的方法来做到这一点？任何帮助，将不胜感激。让我知道我是否应该发布更多代码或更详细地描述任何内容。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-28T23:35:05.060

你不是说

```
<textarea id=reply_body name=reply_body >{{reply_body}}</textarea> 
```

# java - Java 或 Javascript 中的分类 API

> ID：13114124
> 
> 赞同：1
> 
> 时间：2012-10-28T23:31:30.777
> 
> 标签：java, javascript, json, taxonomy

我想知道是否有任何可用的 api 或库为 JSON 中的给定术语提供分类。

例如，如果参数是鞋子，它应该返回一个包含所有同义词或鞋子类型的数据结构，如靴子、人字拖、拖鞋、细高跟鞋等。

谢谢 ：）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-28T23:47:55.850

JSON 本身不是类型化的，您必须使用另一种表示法将类型添加到以 JSON 编码的数据中。[例如， JSON-LD](http://json-ld.org/)允许将链接数据/语义网络的概念添加到[json](/questions/tagged/json "显示标记为“json”的问题")数据中。使用此信息可以查询定义数据结构的分类。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-28T23:49:15.827

最好的办法是使用 WordNet 的 Java API

[http://lyle.smu.edu/~tspell/jaws/index.html](http://lyle.smu.edu/~tspell/jaws/index.html)

您可以将其包装在一个 servlet 中，并在您的应用程序中通过 jquery 调用它。

# ruby-on-rails - 使用 Rails 使用 Web 服务/api

> ID：13114125
> 
> 赞同：15
> 
> 时间：2012-10-28T23:31:33.117
> 
> 标签：ruby-on-rails, ruby, service, web, httparty

我是 Rails 世界的新手，我正在尝试构建一个应用程序，让我可以根据用户输入在亚马逊和此类网站上搜索内容。

我做了一些研究，似乎 httparty gem 是一个不错的起点？到目前为止，我发现的文件并不是最好的。他们并没有真正给我很多信息（将代码放在哪里等）。

是否有任何现有的教程或代码示例可供我使用或查看以让我更好地了解这个东西是如何工作的？

* * *

## 回答 #1

> 赞同：31
> 
> 时间：2012-10-29T04:20:56.933

我现在正在开发这样的应用程序，所以让我提供一些想法。

首先，如果您是 Rails 的新手，那么作为第一步，我建议您采用并行方法来解决这个问题，包括两条轨道：

1.  了解 Rails
2.  了解如何在 Ruby 中与 API 交互（发出请求和解析响应）

这是两个独立的问题，尽管您最终可能会一起实施它们，但最好先孤立地考虑它们。

对于第一个，我建议先编写几个简单的应用程序，以了解事情的运作方式。即使只有一个简单的应用程序也需要一定数量的用户交互，可能会将记录保存到数据库等，这些问题与从 API 消费数据是分开的。关于 Rails 的教程数不胜数，但仅举一例，您可以尝试 Michael Harti 的[Learn Web Development with Rails](http://ruby.railstutorial.org/)作为起点。

第二点，消费 API 数据，与设计应用程序本身的问题不同。要了解有关问题的这方面的更多信息，我建议使用我自己使用的流行的 API 客户端 gem（如您提到的）[HTTParty](https://github.com/jnunemaker/httparty)。与其立即尝试在 Rails 应用程序中使用 HTTParty 方法，不如作为练习，我建议在控制台 (irb) 中玩一下。如果您安装 gem ( `gem install httparty`)，您可以`require 'httparty'`从控制台请求它 ( ) 并立即发出请求并解析来自 API 的响应。

例如：

```
irb(main):001:0> require 'httparty'
=> true
irb(main):002:0> response = HTTParty.get('http://twitter.com/statuses/public_timeline.json')
=> ... 
```

一旦您对 Rails 和在 ruby​​ 中访问 API 有了更熟悉的了解，您就可以继续实际构建应用程序本身。根据您对 API 的请求的复杂程度，您可以通过以下几种方式在 Rails 应用程序中构建 API 请求：

1.  直接从控制器操作使请求成为 Rails 应用程序本身的一部分。如果您只在有限数量的服务上支持非常有限数量的请求类型（例如简单搜索），这实际上是可以的。任何更复杂的东西，你的控制器都会变胖，这在 MVC 框架中是一个禁忌。
2.  创建一个单独的 ruby​​ 类（通常称为 API 包装器）以将用于发出请求和解析来自 API 的响应的方法组合在一起。使用 HTTParty 之类的 gem，您只需`include HTTParty`在类中添加一行，即可将模块添加到类中。有很多关于如何做到这一点的例子，[这里有一个](http://railstips.org/blog/archives/2008/07/29/it-s-an-httparty-and-everyone-is-invited/)。
3.  使用专门的 gem 来访问特定的 API，或者自己创建一个（或多个）。大多数流行服务都有 gem，例如[Twitter](https://github.com/jnunemaker/twitter)、[Linkedin](https://github.com/pengwynn/linkedin)、[Flickr](https://github.com/commonthread/flickr_fu)等。有关更多信息，请参阅[此 API 客户端 gem 列表](https://www.ruby-toolbox.com/categories/api_clients)。这消除了与 API 交互的许多痛苦，但仅适用于所有服务的子集。

您提到您正在考虑使用 HTTParty，我可以推荐它，因为我自己正在使用它。有诸如[Faraday](https://github.com/technoweenie/faraday)之类的替代方案（有关更多信息，请参阅[此 HTTP 客户端列表](https://www.ruby-toolbox.com/categories/http_clients)），但我发现 HTTParty 可以完成大多数任务。文档可能有点稀疏，但有很多[示例](https://github.com/jnunemaker/httparty/tree/master/examples)可供您参考。

希望有帮助！

# excel - 在每个基本方向上查找到最近单元格的距离，值为“#”？

> ID：13114128
> 
> 赞同：1
> 
> 时间：2012-10-28T23:31:55.160
> 
> 标签：excel, artificial-intelligence, excel-formula

换一种说法，在找到值为“#”的单元格之前，您必须向下、向上、向左和向右移动多少个单元格？

所需的最终结果是让单元格显示在找到具有值“#”的单元格之前您可以至少走“x”个单元格的方向。

我是个新手，我确信这个问题并不完全是正常的问题，但我似乎无法在任何地方找到任何可以为我提供任何解决方案的信息。

四瓦长船的可能放置位置的战舰板分布：转0

![转0](../Images/190493f756e2adc8950d7b669b8da5d6.png)

四瓦长船的可能放置位置的战舰板分布：第 1 回合

![第 1 回合](../Images/f943aee5beadb1b6da5f02ac8c45f31c.png)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-30T07:22:46.677

我在上班前稍微摆弄了一下。

最终得到了一个部分公式

```
=MIN(ROW(B2)-ROW(Upper_edge),ROW(Lower_edge)-ROW(B2),COLUMN(B2)-COLUMN(Left_edge),COLUMN(Right_edge)-COLUMN(B2),MATCH("#",INDIRECT(ADDRESS(ROW(B2),COLUMN(B2)+1) & ":" & ADDRESS(ROW(B2),COLUMN(Right_edge))))) 
```

公式需要锻炼MATCH到左、上、下，类似于公式中的MATCH

Excel 文件位于 [http://www.bumpclub.ee/~jyri_r/Excel/Battleship_distance.xls](http://www.bumpclub.ee/~jyri_r/Excel/Battleship_distance.xls)

# php - mysql插入到datetime没有输出正确的时间

> ID：13114134
> 
> 赞同：0
> 
> 时间：2012-10-28T23:33:02.133
> 
> 标签：php, mysql, datetime, format

我想用这种格式将给定日期保存到数据库：

```
date('Y-m-d H:i:s') 
```

使用 datetime 数据类型，它输出：

```
2012-10-29 00:18:14 
```

为了检查它是否给出正确的输出，我在我的表中添加了一个时间戳，它返回插入/更新的当前日期和时间，它返回：

```
2012-10-29 07:18:14 
```

我怀疑我的格式有问题。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-28T23:35:26.973

听起来像是时区问题。

您可以使用`date_default_timezone`或`date.timezone`ini 设置让 PHP 使用与 MySQL 相同的时区。

您可以通过以下方式查看 MySQL 时区：

```
select @@session.time_zone; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-28T23:44:44.317

你肯定要使用这种格式：`date('Y-m-d H:i:s')` 根据 php 手册 (http://php.net/manual/en/function.date.php) - “H” 用于 24 小时时间格式，“h” 用于 12小时格式，mysql 将使用 24 小时制。MySQL 标准格式为“Ymd H:i:s”

但是，您在这里遇到了时区问题。我敢打赌你离 UTC 有 7 小时的路程。尝试先设置您的时区：

`date_default_timezone_set('UTC');`或您想要的任何时区。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-28T23:45:59.573

`TIMESTAMP`存储在`UTC (GMT)` [http://dev.mysql.com/doc/refman/5.5/en/datetime.html](http://dev.mysql.com/doc/refman/5.5/en/datetime.html)而`DATETIME`不是，因此您的区别。

# wpf - WPF 控制可见性取决于配置

> ID：13114136
> 
> 赞同：1
> 
> 时间：2012-10-28T23:34:03.073
> 
> 标签：wpf, controls, visibility

我想构建一个应用程序，供不同的运营商在不同的活动中使用。这个应用程序将使用大约 5 个不同的事件。并非每次使用都需要所有控件（主要是按钮，还有文本框、复选框等）。为了不混淆事件“C”中的操作员，它仅使用事件“A”中使用的控件的子集，我想要一种方法来使所有事件中未使用的任何控件都可见基于主应用程序配置中设置的事件。

我不确定是否以某种方式将 Visible 属性绑定到转换器？获取配置中的当前设置，或者我是否应该有一些代码来解决它。

理想情况下，我认为如果我可以创建一个属性和一些代码，并从中继承任何需要此功能的控件，那么它可能几乎是“自动的”。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-29T00:24:38.093

我认为您将拥有一个变量来保存选择运算符（A、B、C 等）的结果，该变量可用于测试您希望在表单上显示哪些控件。

前任：

用户选择“A”

将“A”或相关值（哎呀，整数“1”可以工作）存储到变量“choice”中。

在您的代码主体中，执行

```
if(choice == 1){
    window.Bcontrol.visibility = "False";
} 
```

其中 Bcontrol 是用于选择 B 的控件...只需将 B 替换为您的其他控件名称...依此类推，以用于每个不同的配置选项。这可能不是最优雅的方式，但是如果没有看到代码（或者不知道你是在 VB、C#、C++ 还是 F# 中），我无法更具体。

# jquery - jQuery 获取父级 OL x 位置

> ID：13114138
> 
> 赞同：2
> 
> 时间：2012-10-28T23:34:18.197
> 
> 标签：jquery

```
$(".subTab").css("left", $(this).parent("ol").position().left); 
```

亲爱的 JQuery 用户，为什么上面的方法不起作用？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-28T23:37:54.030

`this`在您的代码中没有引用所选元素（*subTab*）。

```
$(".subTab").css("left", function(){
   return $(this).closest("ol").position().left;
}) 
```

# java - Java JTable，如何更改单元格数据（写入文本）？

> ID：13114139
> 
> 赞同：3
> 
> 时间：2012-10-28T23:34:20.487
> 
> 标签：java, swing, jtable, listener, tablemodel

我希望在 jtable 中更改单元格的数据。我怎样才能做到这一点？当我执行以下代码时，出现错误。

```
JFrame f= new JFrame();
final JTable table= new JTable(10,5);

TableModelListener tl= new TableModelListener(){
  public void tableChanged(TableModelEvent e){

    table.setValueAt("hello world",2,2);
  }
};

table.getModel().addTableModelListener(tl);
f.add(table);
f.pack();
f.setVisible(true); 
```

我也在下面尝试过，但它仍然不起作用。是什么赋予了？

```
table.getModel().setValueAt("hello world",2,2); 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-28T23:45:11.373

`table.setValueAt()`在 a 内调用`TableModelListener`会导致该`tableChanged()`方法被调用，然后该`setValueAt()`方法被再次调用，以此类推，*无穷无尽*，导致一个`StackOverflowError`.

一种解决方案是使用 a`CellEditorListener`代替。请参阅此[示例](https://web.archive.org/web/20100727035247/http://www.gammelsaeter.com/programming/simple-celleditorlistener-example-in-java/)。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-29T10:57:41.060

您可以使用对我有很大帮助的 Rob Camick 的示例，此外，您还可以通过使用此类获得新旧价值。 [例子](http://tips4java.wordpress.com/2009/06/07/table-cell-listener/)！

另请查看博客的末尾以查看我的帖子，将附加代码添加到表单加载事件以处理您的表发生的最后更改。

```
 MouseEvent me = new MouseEvent(tblDetailInfo, 0, 0, 0, 100, 100, 1, false);
for(MouseListener ml: tblDetailInfo.getMouseListeners()){
ml.mouseClicked(me); } 
```

# json - 通过 ajax 调用发送 JSON 时基于行

> ID：13114146
> 
> 赞同：0
> 
> 时间：2012-10-28T23:34:56.890
> 
> 标签：json, node.js, jquery

我需要执行 AJAX 调用以将一些 JSON 对象发送到服务器

```
 $.ajax({
    url: serviceURL+'stores/'+store_id+'/karaoke/song/new',
    type: "POST",
    contentType: "application/json; charset=utf-8",
    data: { song: id, date: "date", user: "test", help: false, partners: [], likes: 0 },
    dataType: "json"
  }); 
```

这就是我得到的，我用wireshark记录我发送的内容，我发送的是这个

```
JavaScript Object Notation: application/json
Line-based text data: application/json
song=name&date=date&user="test"&help=false&partners=[]&likes=0 
```

该调用如何使用指定的 dataType 和 contentType 将 JSON 转换为基于行的文本数据，我该如何发送 JSON 对象

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-28T23:51:43.037

您可以使用[Json2 库](https://github.com/douglascrockford/JSON-js/blob/master/json2.js)在发送 json 之前将其转换为字符串。一旦它到达服务器，它将被解析。

```
var song = { song: id, date: "date", user: "test", help: false, partners: [], likes: 0 }

var json = JSON.stringify(song)

$.ajax({
    url: serviceURL+'stores/'+store_id+'/karaoke/song/new',
    type: "POST",
    contentType: "application/json; charset=utf-8",
    data: json,
    dataType: "json"
 }); 
```

# python - 如何在所有路由参数上自动生成处理程序 .decode('utf-8')？

> ID：13114151
> 
> 赞同：1
> 
> 时间：2012-10-28T23:35:24.710
> 
> 标签：python, google-app-engine, webapp2

我试图让 webapp2 在将所有路由参数发送到处理程序的 get() 方法之前自动将它们解码为 utf-8。我试图在所有处理程序继承的 BaseHandler 类中覆盖 dispatch() ，但我只设法通过请求对象读取参数，而不是更改它们。我最好如何做到这一点？

**编辑**

我的错，这不是关于传统的 GET 参数，而是处理程序的 get() 方法作为关键字参数接收的 URL 的路由部分。当它们包含来自匹配的 URL 的 unicode 字符时，它们必须是 .decode('utf-8') 否则它们将给出 UnicodeDecodeError。我想避免必须为我系统中的每个处理程序和路由参数手动进行这些解码。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-30T21:39:08.610

这是我解决的解决方案，因为解码是完全自动处理的。

覆盖其他处理程序继承自的基本处理程序类的 dispatch() 方法，并向其中添加以下代码：

```
route_kwargs_decoded = {}
for key, value in self.request.route_kwargs.iteritems():
    route_kwargs_decoded[key] = value.decode('utf-8')
self.request.route_kwargs = route_kwargs_decoded 
```

对于 webapp2 开发人员，我认为可能值得考虑在未来的 webapp2 版本中将此作为功能实现，因为它似乎应该由框架自动处理，或者至少通过设置来处理。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-29T14:39:32.033

一种方法是使用装饰器。它不是完全自动的，但也更明确：

```
def decode_utf8(inner):
  def func(self, *args, **kwargs):
    args = [x.decode('utf8') for x in args]
    kwargs = dict((k, v.decode('utf8')) for k, v in kwargs.items())
    return inner(self, *args, **kwargs)
  return func 
```

然后，只需使用它来装饰您想要解码参数的任何方法：

```
class MyHandler(webapp2.RequestHandler):
  @decode_utf8
  def get(self, foo, bar):
    #... 
```

# javascript - 数组不重新编号

> ID：13114154
> 
> 赞同：0
> 
> 时间：2012-10-28T23:35:50.573
> 
> 标签：javascript, arrays, indexing

我有一种情况，我必须从数组和 .splice 中删除一个 obj。发生的事情是数组没有正确重新编号，如下所示。

为了在删除数组的对象后删除数组中未定义的占位符，我执行 [].concat()。这样做的问题是新数组的编号不正确。

以低开销正确重新编号新数组的最有效方法是什么？

```
for (var o = 0; o < uncheckedQue[i].childNodes.length; o += 1) {
    uncheckedQue[i].removeChild(uncheckedQue[i].childNodes[o]);
    if (uncheckedQue[i].childNodes.length < 1) {
        delete uncheckedQue[i];//remove the document fragment if has no childnodes
    };
};

 uncheckedQue = [].concat(uncheckedQue);

0: DocumentFragment
2: DocumentFragment
3: DocumentFragment
4: DocumentFragment
5: DocumentFragment
6: DocumentFragment
7: DocumentFragment
length: 8 
```

***让我澄清一些事情。这些子节点包含在数组中的文档片段中。这些 childNode 不在 Dom 中。

这是外循环。你会注意到我为什么使用删除，所以我保持外循环的长度正确。

```
 for (var i = 0; i < uncheckedQue.length; i += 1) {
                 //
                 if (t.mucs === t.mucsstop) { break; };
                 for (var o = 0; o < uncheckedQue[i].childNodes.length; o += 1) {
                     uncheckedQue[i].removeChild(uncheckedQue[i].childNodes[o]);
                     t.mucs += 1;
                     if (uncheckedQue[i].childNodes.length < 1) {
                         delete uncheckedQue[i];//remove the document fragment if has no childnodes
                     };
                     if (t.mucs === t.mucsstop) { break; };
                 };
             }; 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-28T23:41:57.020

[`childNodes`](http://www.w3.org/TR/DOM-Level-3-Core/core.html#ID-1451460987)是一个**活动**的NodeList，因此每次删除一个项目时，列表都会变短，因此您可以有效地跳过每个第二个节点。如果要从文档片段中删除所有 childNode，最简单的方法是继续删除 firstChild 节点，直到不再有：

```
var node = uncheckedQue[i];
while (node.firstChild) {
  node.removeChild(node.firstChild);
} 
```

此外，NodeList 是一个宿主对象，它不是一个数组，因此在其上调用数组方法会引发错误。

## 编辑

从您的代码：

```
> for (var o = 0; o < uncheckedQue[i].childNodes.length; o += 1) { 
```

用通用格式会更清楚：

```
for (var j=0; j < uncheckedQue[i].childNodes.length; j++) { 
```

如果`uncheckedQue`是文档片段数组，则：

```
> uncheckedQue[i].removeChild(uncheckedQue[i].childNodes[o]); 
```

正在从片段中删除子节点。`childNodes[o]`因此，现在所在的子节点`childNodes[o + 1]`是执行该语句之前所在的子节点。因此，在下一次迭代中，该`o + 1`节点将是以前位于的节点`o + 2`。简而言之，它将删除每个第二个孩子。

还：

```
> if (uncheckedQue[i].childNodes.length < 1) { 
```

可：

```
if (!uncheckedQue[i].childNodes.length) { 
```

因为 NodeList 的[长度值](http://www.w3.org/TR/DOM-Level-3-Core/core.html#ID-203510337)是从 0 开始的无符号整数，如果长度为零，则测试返回 true。

要从数组中删除片段，请按照 VeXii 的建议使用[Array.prototype.splice](http://ecma-international.org/ecma-262/5.1/#sec-15.4.4.12)。但请注意，您必须调整索引或通过数组向后工作，原因与删除活动 NodeList 的成员时相同。

> 你会注意到我为什么使用删除，所以我保持外循环的长度正确。

因为 delete 运算符不调整数组成员索引（只是属性名称），所以你有一个稀疏数组。您可以使用拼接并随时调整索引，或者向后遍历数组，或者在最后压缩数组（这可能是性能最差的解决方案），例如

```
function compressArray(a) {
  for (var i=0; i<a.length; i++) {
    while (!a.hasOwnProperty(i) && a.length > i) {
      a.splice(i, 1);
    } 
  }
  return a;
} 
```

请注意，上面修改了原始数组。将数组成员复制到新数组更简单：

```
function compressArray(a) {
  for (var i=0, iLen=a.length, b=[]; i<iLen; i++) {
    if (a.hasOwnProperty(i)) {
      b.push(a[i]);
    } 
  }
  return b;
} 
```

任你选。请注意，这两种方法都不会删除值为`undefined`或其他一些虚假值的成员，只有那些根本不存在的成员。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-28T23:38:03.000

插入删除使用拼接像

```
if (uncheckedQue[i].childNodes.length < 1) {
   uncheckedQue.splice(i,1)//remove the document fragment if has no childnodes
}; 
```

# security - 如何修复 Joomla 1.5 URL 重定向漏洞？

> ID：13114157
> 
> 赞同：0
> 
> 时间：2012-10-28T23:36:10.717
> 
> 标签：security, joomla, xss

我今天在我的网站上发现了一个问题

此漏洞将我的访问者发送到自定义 URL“ya.ru”

在这里你可以看到**漏洞是什么**

**http://www.exploit-db.com/exploits/14722**

帮助找到解决方法请提前谢谢你

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-29T00:04:49.943

这是一个相当古老的漏洞利用 - 保持任何 Joomla 安装安全的最佳方法是使软件保持最新。

Joomla 的最后一个版本！1.5 是 1.5.26，它不再在主下载页面上可用，因为它不再受支持。但是，它仍然可以通过“[更新管理器](http://extensions.joomla.org/extensions/core-enhancements/installers/9332)”或此页面[http://www.joomla.org/component/content/article/185-uncategorised/5465-download.html获得](http://www.joomla.org/component/content/article/185-uncategorised/5465-download.html)

更新到 Joomla 的最新版本！1.5 将修复此漏洞。

# groovy - Groovy 类型定义

> ID：13114158
> 
> 赞同：0
> 
> 时间：2012-10-28T23:36:13.010
> 
> 标签：groovy

```
class GroovyClass {
  def aVariable

  void setAVariable(aVariable)
  {
      this.aVariable  = aVariable;
  }
} 
```

我的理解是我们不需要在 groovy 类中指定变量的类型。但是如果我声明 'aVariable'，Groovy 编译器会抱怨，为什么不将它视为具有默认可访问性的无类型变量？每个变量都应该在 Groovy 中定义 local 和 class 吗？为什么函数定义不必以 def 开头？当我将变量传递给setter时，它不需要任何def吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-28T23:57:58.950

该代码工作正常。*“Groovy 编译器抱怨”*是什么意思？

如果需要，您可以使用 a 定义该函数`def`，它会返回`aVariable`（因为这是赋值操作返回的内容），但是，它不会遵循 Java Beans 的标准，因为 setter 应该返回 null

但是，鉴于此，我可以运行：

```
a = new GroovyClass()
a.aVariable = 3 
```

它工作正常

### 编辑

基本上，这完全取决于 Groovy 解析器。解析器需要某种类型的 1..N 关键字列表来定义它的类型或可见性，然后是变量的名称。所以以下都是有效的：

```
class OkA {
  def aValue
}

class OkB {
  private aValue
}

class OkC {
  private String aValue
} 
```

但是你不能只是（使用当前的解析器）说：

```
class BadA {
  aValue
} 
```

想一想，我目前没有理由想到这个限制（因为您可以`def`在没有 Groovy 的情况下声明 vars），但是限制是存在的，因此您需要`def`在定义类属性时键入。

# html - 获取不同形式的html标签

> ID：13114159
> 
> 赞同：0
> 
> 时间：2012-10-28T23:36:21.540
> 
> 标签：html, css, forms

我想只使用 Html 和 Css 来实现一种选择。我需要获得一个字段，让我的用户做出选择，而后者会导致不同的形式。确切地说，如果我的用户决定更改他的密码将出现两个输入字段，或者如果他决定更改他的居住地信息将出现四个输入字段。仅使用 Html 和 Css 可能吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-28T23:44:14.893

听起来您需要使用 javascript 库来执行此操作。不要以为你可以只用 html 和 css 来触发它。虽然我可能是错的。

# mysqli - zend 框架 2 使用 mysqli 进行身份验证失败

> ID：13114167
> 
> 赞同：0
> 
> 时间：2012-10-28T23:38:22.203
> 
> 标签：mysqli, zend-framework2, zend-auth, mysqli-multi-query

我已按照 zend 说明使用配置了 Mysqli 驱动程序的数据库表来实现我的 Web 身份验证。

渲染页面时，执行 authenticate 方法后出现以下异常：

```
 Zend\Db\Adapter\Exception\ErrorException
    File:
    C:\xampp\htdocs\pfc\vendor\ZF2\library\Zend\Db\Adapter\Driver\Mysqli\Statement.php:188
    Mensaje:
    Commands out of sync; you can't run this command now 
```

这似乎是因为驱动程序不能执行多个查询而不首先释放前一个查询的结果（多查询问题）。

我发现如果将 dbAdapter 的驱动程序更改为 pdo_mysql，则验证方法可以正常工作。但出于性能原因，我不想使用 PDO 驱动程序。

我如何配置 Mysqli 驱动程序才能做到？

我的代码如下：

```
 $dbAdapter = new DbAdapter(array(
        //'driver' => 'Mysqli',   //This driver fail when call authenticate method
        'driver' => 'Pdo_Mysql',  //This driver works ok
        'database' => 'securedraw',
        'username' => 'root',
        'password' => ''
    ));     
    $authAdapter = new AuthDbTableAdapter($dbAdapter);
    $authAdapter->setTableName('users')
                ->setIdentityColumn('mail')
                ->setCredentialColumn('password')
                ->setIdentity('josep')
                ->setCredential('josep');
    $authResult = $authAdapter->authenticate();   //Method fail 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-23T20:19:51.297

我很确定问题是您混淆了执行查询的方式。所以你所拥有的是一个 PDO 调用和使用你需要做的 MySQLi

```
$dbAdapter = new DbAdapter(array(
   'driver' => 'Mysqli',   //This driver fail when call authenticate method
    'database' => 'securedraw',
    'username' => 'root',
    'password' => ''
));     
$adapter = new Zend\Db\Adapter\Adapter($configArray);

$adapter->query("QUERY HERE"); 
```

我会在此处参考此页面[https://packages.zendframework.com/docs/latest/manual/en/modules/zend.db.adapter.html](https://packages.zendframework.com/docs/latest/manual/en/modules/zend.db.adapter.html)因为我正在尝试自己学习如何做到这一点

# assembly - 汇编中的用户标志是什么？

> ID：13114168
> 
> 赞同：0
> 
> 时间：2012-10-28T23:38:22.480
> 
> 标签：assembly, x86

我有一个家庭作业，其中作业说明在一个程序中，我必须：

> *   从键盘获取数字
> *   虽然未设置用户标志
> *   将数字存储在数组中
> *   公司指数
> *   从键盘获取新号码

我的功能目前读取

```
mov ah, 09h                     ;reads for $
mov dx, offset arrayprompt      ; Asks for number
int 21h                         ;control given OS

mov ah,01h                      ;read number
int 21h                         ;control to OS
mov count, 0                    ;set counter to 0
mov si, count 
```

“未设置用户标志时”是什么意思？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-29T01:32:18.580

x86 程序集中没有“用户标志”。因此，我假设该标志是您函数的一部分（例如普通变量），并且编写分配的人未能提供足够的详细信息。

例如，如果用户按下 Escape 或数组已满，则“用户标志”变量可能由您的代码设置（中断循环）。

无论如何，我建议询问写作业的人他们想要什么，因为他们可能是唯一可以知道的人。

# google-apps-script - 来自 WebApp 的 ScriptDb 使用

> ID：13114172
> 
> 赞同：1
> 
> 时间：2012-10-28T23:38:36.250
> 
> 标签：google-apps-script

当`ScriptDb`从任何人都可以访问的 WebApp 中使用并作为访问用户与`Triggers`从该 WebApp 中一起运行时，似乎无法正确确定用户。

1.  `WebApp`用于`Anyone`运行的Google Apps 脚本`as the accessing user`
2.  `ScriptApp.newTrigger("myfunc").timeBased().everyMinutes(1).create();`

其中函数`myfunc`是：

```
var q = {
  user: Session.getActiveUser().getEmail()
};
result = db.query(q).sortBy('when', db.ASCENDING); 
```

`result``myfunc`从触发器访问时似乎为空。

触发器中的活动用户不应该是安装它的用户吗？例如，第一次授权时访问 WebApp 的用户？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-29T11:36:50.023

[Session.getEffectiveUser](https://developers.google.com/apps-script/class_session#getEffectiveUser)方法按预期返回正确的用户电子邮件。因为当脚本从触发器运行时，没有人“活跃”使用它。“有效”用户始终被设置，因为它是脚本在“下”运行的帐户。这是一个示例 Web 应用程序，它通过电子邮件发送主题和正文中的预期电子邮件地址。

```
function doGet() {
  var trigger = ScriptApp.newTrigger("testTrigger").timeBased().everyMinutes(1).create();
  var app = UiApp.createApplication();
  app.add(app.createLabel("test"));
  return app;
}

function testTrigger(e) {
  MailApp.sendEmail("xxx@sample.com", "Subject: " + Session.getEffectiveUser().getEmail(), "Body: " + Session.getEffectiveUser().getEmail());
} 
```

# python - web2py - 是否可以使用 SQLFORM.grid/smartgrid 顺序添加搜索字段？

> ID：13114177
> 
> 赞同：1
> 
> 时间：2012-10-28T23:40:11.483
> 
> 标签：python, web2py

假设您的数据库有 N 个字段，并且您希望使用 SQLFORM.grid/smartgrid 显示内容，并使用户可以搜索该字段集的某个子集（名为“field1”、“field2”、 ETC）。什么是实现以下内容的好方法：

1.  默认情况下，一个字段是可搜索的，用户可以从下拉/选择器菜单中选择哪个字段是可搜索的
2.  如果用户想在搜索中添加另一个字段（即搜索 field1 AND field2），他们可以单击某个图标（例如加号），然后会弹出另一个搜索输入字段 - 再次，用户可以选择可搜索的通过选择器菜单字段
3.  如有必要，重复步骤 2 几次

换句话说，用户顺序添加搜索字段，并搜索这些字段的一些组合。例如，用户在field2中选择“item1”作为搜索查询，添加并选择field4，使用“thing9”作为field4的查询；搜索在 field2 中查找“item1”和在 field4 中查找“thing9”的行。谢谢！

# python - Python: dict 默认参数...我怎么不知道它们是这样工作的？

> ID：13114178
> 
> 赞同：1
> 
> 时间：2012-10-28T23:40:22.963
> 
> 标签：python

> **可能的重复：**
> [Python 中的“Least Astonishment”：可变默认参数](https://stackoverflow.com/questions/1132941/least-astonishment-in-python-the-mutable-default-argument)

```
class Klass(object):

    def a(self, d={}):
        print d
        self.b(d)

    def b(self, d={}):
        import random
        print d
        d[str(random.random())] = random.random() 
```

我假设每次我`c.a()`不带参数地打电话，我都会得到一个新的 empty `dict`。然而，这就是实际发生的情况：

```
>>> c = Klass()
>>> c.a()
{}
{}
>>> c.a()
{'0.637151613258': 0.61491180520119226}
{'0.637151613258': 0.61491180520119226}
>>> c.a()
{'0.637151613258': 0.61491180520119226, '0.960051474644': 0.54702415744398669}
{'0.637151613258': 0.61491180520119226, '0.960051474644': 0.54702415744398669}
... 
```

我真的不想做某种`lambda`/`iscallable`事情。在这里使用什么好的模式？

当然，当我开始输入问题时，我发现我解决了这个问题。但是，如果有人对此有不同的宠物方式，我很想听听。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-28T23:40:22.963

可以得到一个新鲜的，空`dict`的：

```
 def a(self, d=None):
        if d is None:
            d = {} 
```

这个问题在 Mutable Default Arguments 下得到[了](http://code.activestate.com/recipes/577786-smarter-default-arguments/)**很好**的描述。

# mysql - 数据库设计以将特定标签分配给项目

> ID：13114180
> 
> 赞同：0
> 
> 时间：2012-10-28T23:40:26.867
> 
> 标签：mysql, database-design, tags

我正在尝试构建一个小系统，可以将特定标签分配给一个项目，或者准确地说是一个人。所以，我有一个人员列表和一个标签列表。我需要为每个人分配 3 个特定标签（对应于这个人可能拥有的 3 种不同技能）。

简而言之，输出将如下所示：

```
Person 1 | webdesign, ux, jquery
Person 2 | blogging, photography, wordpress
Person 3 | graphic-design, 3d, inventor
... 
```

目前，这些列表存储在两个不同的表中：

```
persons
-------
person_id
person_name

tags
-------
tag_id
tag_name 
```

我的主要目标是避免重复并简单地将 3 个现有标签分配给现有人员。

你能给我一些关于如何实现这一点的提示吗？我知道[三表](http://www.pui.ch/phred/archives/2005/04/tags-database-schemas.html)设计对于标记系统很常见，但它与我的情况相关吗？

谢谢你的帮助。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-28T23:45:18.707

如果您想确保没有任何重复项并能够`N`为一个人添加标签，那么要正确实施规范化设计，您需要第三个表来链接`tags`到每个人`person`

```
persons_2_tags
--------------
person_id
tag_id 
```

为了保证唯一性，您可以使用复合主键，也可以将 a 添加`unique index`到包含两列的表中。

[请参阅此SQL Fiddle](http://sqlfiddle.com/#!2/01633)中的上述示例。

如果您需要在数据库级别强制执行 3 个标签限制，您可以将第三列添加到`persons_2_tags`表中（`tag_number`例如），它的`enum`值是 of`1, 2, 3`并将其添加到您的`unique index`. 插入逻辑需要在应用程序级别处理，但将由`index`.

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-28T23:51:20.493

您的要求是否指定“完全”3 个标签？

建议第三张表保持标准化。这是典型的多对多关系。这提供了最大的灵活性，因为您可以拥有无​​限但唯一的用户/标签对列表。

每个标签的用户表中可以有 3 列。性能会以牺牲灵活性为代价来提高。像“列出所有带有标签 = 'X' 的用户”这样的查询有点困难。如果您允许少于 3 个标签，则可能有多个空值。当然，在此设置中，您必须创建一个新列和大量代码才能扩展到三列之外。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-29T00:01:34.283

*我想我可能会做 Jeff O 提到的三张桌子设计，但是，只是为了呈现另一种观点......*

如果您只是在谈论标签，即没有其他元数据的短字符串，我不知道您*需要*一个`tags`表格。本质上，标签本身可以是它的 id。

```
persons (person_id, person_name);
tags (person_id, tag); 
```

是的，你会在那里得到一些重复，但无论如何它们都是短字符串，它应该真的有所作为。

# php - 从 php 读取 perl stout

> ID：13114181
> 
> 赞同：1
> 
> 时间：2012-10-28T23:40:33.213
> 
> 标签：php, json, perl

我有一个返回 json 字符串的 perl 脚本。

```
$json = `/usr/bin/perl /var/www/private/data.pl`; 
```

data.pl 返回`{"key1": "value1", "key2": "value2"}`

**访问 $json 变量中的 json 字符串的最佳方法是什么？**

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-28T23:42:24.333

所有你需要的是

```
exec('/usr/bin/perl /var/www/private/data.pl',$jsonArray);
$json = reset($jsonArray); 
```

# orchardcms - Azure 网站果园更新

> ID：13114182
> 
> 赞同：0
> 
> 时间：2012-10-28T23:40:35.117
> 
> 标签：orchardcms, azure-web-app-service

所以我有几个网站在 Azure 上运行。一个有自己的实例，我知道我可以通过更新代码来升级它。但我拥有的不少网站都是 Azure 网站。我从画廊安装了果园。Orchard 1.6 刚刚发布，尚未在画廊中发布，但我想很快就会发布。有没有办法在发布时将我现有的网站升级到 1.6？

还是我必须喜欢 ftp 最新的代码？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-29T04:44:42.133

Azure 网站就像一个常规的托管计划：您可以像在其他任何地方一样进行升级（WebDeploy、FTP、Git...）。请参阅[http://docs.orchardproject.net/Documentation/Upgrading-a-site-to-a-new-version-of-Orchard](http://docs.orchardproject.net/Documentation/Upgrading-a-site-to-a-new-version-of-Orchard)

# android - 模仿 Gmail 应用标签列表

> ID：13114184
> 
> 赞同：1
> 
> 时间：2012-10-28T23:40:36.070
> 
> 标签：android, android-layout

我正在尝试为我的`ListView`项目构建一个布局，类似于 Gmail 应用程序的标签列表，其中左侧有标签文本，右侧有计数。除了长文本外，我所拥有的大部分都有效。我的结果导致文本与计数重叠。

这就是我试图模仿的：

![在此处输入图像描述](../Images/d50ca01399178c357d7a0d5ffa59c232.png)

如您所见，底部标签没有包裹顶部标签所在的位置（请阅读下文了解更多详细信息）。

当两个标签都有计数时，每行的计数阵容：

![在此处输入图像描述](../Images/247be0b243896d91e0ab93609a9bb91c.png)

有了我所拥有的，最后一个项目应该有 3 个显示，但它正在重叠。另外，我希望`TextView`每一行的“计数”与 Gmail 应用程序的排列方式相同（中心，右对齐，我猜？）：

![在此处输入图像描述](../Images/db6b7a51027930b04a869ff82cfd77cc.png)

布局代码：

```
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:layout_width="fill_parent"  
    android:layout_height="fill_parent" 
    android:orientation="horizontal" 
    android:weightSum="1"       
>

    <TextView 
        android:id="@+id/text"
        android:layout_width="wrap_content"
        android:layout_height="fill_parent"
        android:padding="10dp"
        android:gravity="left"
        android:layout_weight=".75"
    />

    <TextView 
        android:id="@+id/count"
        android:layout_width="wrap_content"
        android:layout_height="fill_parent"
        android:gravity="right|center_vertical" 
        android:padding="10dp"
        android:layout_weight=".25"
    />
</LinearLayout> 
```

我知道当您使用时，`layout_weight`您应该将其设置`layout_width`为 0px，但是，这会导致每一行都在同一位置被截断。如果它比 count 长，我只想要文本换行`TextView`。

我不擅长 Android 布局，我认为使用它们非常令人沮丧，所以这可能很容易。谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-29T00:01:18.913

您应该能够通过使用 a`RelativeLayout`而不是您的`LinearLayout`、使用`layout_toRightOf`或`layout_toLeftOf`XML 属性来相对于彼此定位视图来防止视图重叠。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-01T01:40:45.907

弄清楚了。我需要添加`android:layout_toLeftOf="@+id/count"`到`TextView`上面 Ernir 回答的第一个

# php - 如何检查 PHP 会话是否存在？

> ID：13114185
> 
> 赞同：15
> 
> 时间：2012-10-28T23:40:38.933
> 
> 标签：php, session

只是想知道如何检查 PHP 会话是否存在......我的理解是，无论如何，如果我使用会话，我必须使用 session_start() 启动我的文件才能访问会话，即使我知道它已经存在.

我已阅读用户 session_id() 以了解是否存在会话，但由于我必须在调用 session_id() 之前使用 session_start()，并且如果没有会话，session_start() 将创建一个新 ID，如何我可以检查会话是否存在吗？

* * *

## 回答 #1

> 赞同：26
> 
> 时间：2012-10-28T23:42:02.320

在 5.4 之前的 PHP 版本中，您可以只使用以下[`session_id()`](http://php.net/manual/en/function.session-id.php)函数：

```
$has_session = session_id() !== ''; 
```

在 PHP 5.4+ 版本中，您可以使用[`session_status()`](http://php.net/manual/en/function.session-status.php)：

```
$has_session = session_status() == PHP_SESSION_ACTIVE; 
```

* * *

## 回答 #2

> 赞同：18
> 
> 时间：2012-10-28T23:47:13.023

```
isset($_SESSION) 
```

应该是这样的。如果您想检查是否存在单个会话变量，请使用`if(isset($_SESSION['variablename']))`.

* * *

## 回答 #3

> 赞同：10
> 
> 时间：2016-02-07T13:40:57.450

我发现最好（取决于应用程序的性质）简单地测试以查看是否在客户端中设置了会话 cookie：

```
<?php

if (isset($_COOKIE["PHPSESSID"])) {
    echo "active";
} else {
    echo "don't see one";
}

?> 
```

当然，将默认会话名称“PHPSESSID”替换为您正在使用的任何自定义名称。

* * *

## 回答 #4

> 赞同：7
> 
> 时间：2012-10-28T23:49:45.947

在 PHP 中有一个叫做会话名称的东西。*如果*会话已经开始，该名称与将要设置的 cookie 相关。

`$_COOKIE`因此，如果有可用的会话 cookie，您可以检查数组。Cookie 通常是与浏览器交换会话名称的会话 ID 的首选形式。

如果 cookie 已经存在，则意味着 PHP 会话已较早启动。如果没有，那么`session_start()`将创建一个新的会话 id 和会话。

第二种检查方法是[检查传出标头](http://www.php.net/manual/en/function.headers-list.php)是否设置了会话的 cookie。如果它是一个新会话，它将被设置。或者如果会话 id 发生了变化。

* * *

## 回答 #5

> 赞同：3
> 
> 时间：2014-03-16T01:46:04.913

**isset($_SESSION)**是不够的，因为如果`session_destroy()`在同一次执行中创建和销毁会话（使用 ），**isset($_SESSION)**将返回**true**。当使用 3rd 方代码时，这种情况可能会在您不知情的情况下发生。`session_id()`但是，正确返回一个空字符串，并且可以在`session_start()`.

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-10-28T23:46:41.507

您可以在 session_start 之前调用 session_id。[http://www.php.net/manual/en/function.session-id.php](http://www.php.net/manual/en/function.session-id.php) - 读取 id 参数

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2014-02-10T16:08:45.107

我一直只是简单地使用

```
if (@session_id() == "") @session_start(); 
```

还没有让我失望。

使用这个已经很久了。

*注意*：`@`简单地抑制警告。

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2015-03-05T12:56:25.123

存放`session_id`并`$_SESSION`检查它。

第一次

```
session_start();
$_SESSION['id'] = session_id(); 
```

启动会话并存储随机给定的会话 ID。

下次

```
session_start();
$valid_session = isset($_SESSION['id']) ? $_SESSION['id'] === session_id() : FALSE;
if (!$valid_session) {
   header('Location: login.php');
   exit();
} 
```

启动一个会话，检查当前会话 id 和存储的会话 id 是否相同（用三元 ? 作为 php 中不存在的短路 AND 的替换）。如果没有，请再次登录。

* * *

## 回答 #9

> 赞同：0
> 
> 时间：2016-08-17T05:29:25.727

如果注意在您的 php 版本中工作，请关闭错误报告将您的 php 代码放在首位

`error_reporting(0);`

* * *

## 回答 #10

> 赞同：0
> 
> 时间：2017-09-06T05:36:54.643

在调用 session_start() 之前检查会话是否存在

```
if(!isset($_SESSION))session_start(); 
```

* * *

## 回答 #11

> 赞同：-1
> 
> 时间：2017-10-30T20:29:04.077

我在三年前解决了这个问题，但我无意中从我的电脑上删除了文件。

它是这样的。用户必须按我想要的顺序访问的 3 个页面。

1）每个php页面 `enter code here`会话的顶部start（）；`enter code here` 2) 第一页： a) `enter code here`$_session["timepage1"] = 一个 php 日期函数；time() 简单易用 b) `enter code here`$_session["timepage2"]= $_session["timepage1"]; b) `enter code here`$_session["timepage3"]=$_session["timepage1"]; 3) 第二页：a) `enter code here`$_session["timepage2"] = 一个 php 日期函数；time() 简单易用 b) `enter code here`$_session["timepage3"]= $_session["timepage3"]; 3) 第三页： a) `enter code here`$_session["timepage3"] = 一个php日期函数；time() 简单易用

逻辑：如果第 2 页上的 timepage3 小于 timepage3 {用户在第 2 页之前到第 3 页做某事}

如果第 2 页上的 timepage2 小于 timepage1 {用户可能试图破解第 2 页，我们希望他们在第 1 页做点什么}

timepage1 在除 page1 之外的任何页面上都不应等于 timepage2 或 timepage3，因为如果在第二页或第三页上它不是更大，则用户可能试图破解“做某事”

您可以使用 3 个 timepage1-2-3 变量通过简单的算术来完成复杂的事情。您可以重定向或发送消息说请转到第 2 页。您还可以判断用户是否跳过第 2 页。然后发送回第 2 页或第 1 页，但最好的安全功能是什么都不说，只需重定向回第 1 页。

如果你`enter code here`回显 time(); 在每个页面上，在测试期间，如果您以正确的顺序访问，您将看到最后 3 位数字上升。

# live - 如何使用 PHP 找出我的网站上有多少人

> ID：13114187
> 
> 赞同：3
> 
> 时间：2012-10-28T23:41:20.653
> 
> 标签：live, counter, visitor-pattern

我有一台服务器，我想制作一个控制面板，其中包含有关当前连接到我网站的人员的统计信息。我应该如何使用 PHP 或 Javascript 来做到这一点？

# xcode - Xcode：在运行时使用标签添加动态文本字段

> ID：13114188
> 
> 赞同：1
> 
> 时间：2012-10-28T23:41:22.030
> 
> 标签：xcode, dynamic

我想知道，如何在运行时向窗口添加多个文本字段。

现在的代码：

```
 int numberTextFields = 10;
int x = 300;
int y = 150;
int w = 100;
int h = 30;

for(int i=1; i< numberTextFields; i++)
{
    NSTextField *textField = [[[NSTextField alloc] init] initWithFrame:CGRectMake(x+20, y+60, w, h)];
    textField.tag = i;
    [[window contentView] addSubview:textField];
} 
```

它适用于 1 个文本字段，但不会添加其他文本字段...

任何帮助将不胜感激！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-28T23:59:45.437

我认为您需要更新`y`如下所示：

```
int numberTextFields = 10;
int x = 300;
int y = 150;
int w = 100;
int h = 30;

for(int i=1; i< numberTextFields; i++)
{
    NSTextField *textField = [[[NSTextField alloc] init] initWithFrame:CGRectMake(x+20, y+60, w, h)];
    textField.tag = i;
    [[window contentView] addSubview:textField];
    y += 40;   // Add this line
} 
```

# cassandra - 在 Cassandra 中同步 02 个节点

> ID：13114190
> 
> 赞同：0
> 
> 时间：2012-10-28T23:41:37.530
> 
> 标签：cassandra, kundera

我有 02 个节点，一个在 127.0.0.1 上运行，另一个在 127.0.0.2 上运行
我添加到集群的数据会同时出现在两个节点上吗？目前，当我停止节点1时，第二个节点中没有类似的数据，当我使用list命令时也会抛出一些异常：

```
Using default limit of 100                                      
Using default column limit of 100
null
UnavailableException()
    at org.apache.cassandra.thrift.Cassandra$get_range_slices_result.read(Cassandra.java:12346)
    at org.apache.thrift.TServiceClient.receiveBase(TServiceClient.java:78)
    at org.apache.cassandra.thrift.Cassandra$Client.recv_get_range_slices(Cassandra.java:692)
    at org.apache.cassandra.thrift.Cassandra$Client.get_range_slices(Cassandra.java:676)
    at org.apache.cassandra.cli.CliClient.executeList(CliClient.java:1425)
    at org.apache.cassandra.cli.CliClient.executeCLIStatement(CliClient.java:273)
    at org.apache.cassandra.cli.CliMain.processStatementInteractive(CliMain.java:219)
    at org.apache.cassandra.cli.CliMain.main(CliMain.java:346) 
```

还有一件事是我在我的 java 应用程序中使用 kundera 连接到 cassandra db（在 Play FW 2.0.4 上构建），我的持久性文件如下：

```
<?xml version="1.0" encoding="UTF-8"?>
<persistence xmlns="http://java.sun.com/xml/ns/persistence" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
    xsi:schemaLocation="http://java.sun.com/xml/ns/persistence
    http://java.sun.com/xml/ns/persistence/persistence_2_0.xsd"
    version="2.0">
    <persistence-unit name="cassandra_pu">
        <provider>com.impetus.kundera.KunderaPersistence</provider>     
        <properties>            
            <property name="kundera.nodes" value="localhost"/>
            <property name="kundera.port" value="9160"/>
            <property name="kundera.keyspace" value="LSYCS"/>
            <property name="kundera.dialect" value="cassandra"/>
            <property name="kundera.client.lookup.class" value="com.impetus.client.cassandra.pelops.PelopsClientFactory" />
            <property name="kundera.cache.provider.class" value="com.impetus.kundera.cache.ehcache.EhCacheProvider"/>
            <property name="kundera.cache.config.resource" value="/ehcache-test.xml"/>                  
        </properties>       
    </persistence-unit>
</persistence> 
```

我假设当节点 1 关闭时，应用程序仍然能够连接到第二个节点，但它无法做到这一点。这里真的有问题吗？我期望的是当 127.0.0.1 离线时，127.0.0.2 将能够处理这些作业，还是他们需要一个顶级应用程序来管理它们？

P/S：我在我的电脑上设置，因此 127.0.0.1 和 127.0.0.2 都指向 localhost

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-29T08:53:39.097

您是否更改了 cassandra 连接的 replication_factor（默认为 1）。看一下：

[https://github.com/impetus-opensource/Kundera/wiki/Cassandra-Specific-Features](https://github.com/impetus-opensource/Kundera/wiki/Cassandra-Specific-Features)

用于在 kundera 中配置 cassandra 设置。

-维维克

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-30T16:32:34.267

您应该在此处阅读有关 Cassandra 复制的信息：[http ://www.datastax.com/docs/1.1/cluster_architecture/replication](http://www.datastax.com/docs/1.1/cluster_architecture/replication)

# c++ - 为什么我的代码在运行时继续崩溃？

> ID：13114194
> 
> 赞同：0
> 
> 时间：2012-10-28T23:42:04.180
> 
> 标签：c++, visual-c++

这是我的项目欧拉问题编号 4 的代码。

> 回文数的两种读法都是一样的。由两个 2 位数乘积构成的最大回文数是 9009 = 91 99。求由两个 3 位数乘积构成的最大回文数。

但是，我的代码无法在 Visual C++ 上编译。它一直说“访问冲突”。那么有人可以告诉我为什么我的代码不起作用吗？如果我的代码确实适用于您的编译器，它是否给出了正确的答案？

```
#include <iostream>
#include <cmath>
int isitapalindrome(int num);

int main (void) 
{
bool pali = false;
int a, b, c, d, e = 0;
for (a = 999; a > 100; a-- ) 
{
    for (b = 999; b > 100; b--) 
    {
        c = a*b;
        pali = isitapalindrome(c);
        if (pali == true) 
        {           
            c > e? c: e;                            
            d = c;                                  
            e = c;
        }
        else continue;
    }
}
std::cout<<d<<std::endl;
system ("pause");
return 0;
}

int isitapalindrome (int num) 
{
bool isit = false;
int digits[8];
int test = num;
int i, j, palindrome = 0;

for (i = 0; test >= 0; i++) 
{           
    digits[i] = test%10;            
    test = (test -  test%10)/10;    
}
for (j = 0; i>=j; j++) 
{
    palindrome += digits[j] * 10^(i-j);
}

if(palindrome = test) 
{
    isit = true; 
}
return isit;
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-29T00:52:17.540

这

```
for (i = 0; test >= 0; i++) 
```

是一个无限循环，因为

```
test = (test -  test%10)/10; 
```

永远不会`test`否定。用 替换循环条件`test > 0`。

# python - Python中单行匹配的多行输出

> ID：13114196
> 
> 赞同：1
> 
> 时间：2012-10-28T23:42:22.430
> 
> 标签：python, list, beautifulsoup, weather

我在 Python 方面仍然非常陌生，但我正在尝试编写代码来解析来自 NOAA 的天气并按照我们的无线电广播的顺序显示它。

我已经设法整理了一个使用 python 表达式的当前条件列表，其中 html 文件被分割成行列表，然后以正确的顺序重新输出，但每一个都是单行数据. 该代码如下所示：

```
#other function downloads  
#http://www.arh.noaa.gov/wmofcst_pf.php?wmo=ASAK48PAFC&type=public
#and renames it currents.html
from bs4 import BeautifulSoup as bs
import re
soup = bs(open('currents.html')
weatherRaw = soup.pre.string
towns = ['PAOM', 'PAUN', 'PAGM', 'PASA']
townOut = []
weatherLines = weatherRaw.splitlines()
for i in range(len(towns)):
    p = re.compile(towns[i] + '.*')
    for line in weatherLines:
        matched = p.match(line)
        if matched:
            townOut.append(matched.group()) 
```

现在我正在处理预测部分，我遇到了一个问题，因为每个预测都必须跨越多行，并且我已经将文件切分为行列表。

所以：我正在寻找的是一个允许我使用类似循环的表达式，这次从找到的行开始追加，并在仅包含 && 的行结束。像这样的东西：

```
#sample data from http://www.arh.noaa.gov/wmofcst.php?wmo=FPAK52PAFG&type=public
#BeautifulSouped into list fcst (forecast.pre.get_text().splitlines())
zones = ['AKZ214', 'AKZ215', 'AKZ213'] #note the out-of-numerical-order zones
weatherFull = []
for i in range(len(zones)):
    start = re.compile(zones[i] '.*')
    end = re.compile('&&')
    for line in fcst:
        matched = start.match(line)
        if matched:
            weatherFull.append(matched.group())
            #and the other lines of various contents and length
            #until reaching the end match object 
```

我应该怎么做才能改进这段代码？我知道这很冗长，但是当我开始的时候，我喜欢能够跟踪我在做什么。提前致谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-29T01:41:15.573

如果这不是您所追求的，请道歉（在这种情况下，很乐意调整）。您使用 BeautifulSoup 真是太棒了，但您实际上可以更进一步。查看 HTML，似乎每个块都以一个`<a name=zone>`结构开始，并以下一个`<a name=zone>`. 在这种情况下，您可以执行以下操作来为每个区域提取相应的 HTML：

```
from bs4 import BeautifulSoup

# I put the HTML in a file, but this will work with a URL as well
with open('weather.html', 'r') as f:
  fcst = f.read()

# Turn the html into a navigable soup object
soup = BeautifulSoup(fcst)

# Define your zones
zones = ['AKZ214', 'AKZ215', 'AKZ213']

weatherFull = []

# This is a more Pythonic loop structure - instead of looping over
# a range of len(zones), simply iterate over each element itself
for zone in zones:
  # Here we use BS's built-in 'find' function to find the 'a' element
  # with a name = the zone in question (as this is the pattern).
  zone_node = soup.find('a', {'name': zone})

  # This loop will continue to cycle through the elements after the 'a'
  # tag until it hits another 'a' (this is highly structure dependent :) )
  while True:
    weatherFull.append(zone_node)
    # Set the tag node = to the next node
    zone_node = zone_node.nextSibling
    # If the next node's tag name = 'a', break out and go to the next zone
    if getattr(zone_node, 'name', None)  == 'a':
      break

# Process weatherFull however you like
print weatherFull 
```

希望这会有所帮助（或者至少在您想要的范围内！）。

# sql - SQL Server 调优 - 索引与统计信息

> ID：13114198
> 
> 赞同：0
> 
> 时间：2012-10-28T23:42:23.867
> 
> 标签：sql, sql-server

我们运行了 SQL 调优顾问，它生成了一个可能的索引和统计信息列表。什么索引很清楚，但这些“统计数据”对创建也很重要吗？他们究竟是什么（我假设他们收集数据，但谁使用它）？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-28T23:48:23.073

查询计划器使用统计信息来确定哪种方式是获取结果的最有效方式。

如果没有统计信息，查询计划器只有表布局可用于尝试确定不同操作的成本。通过统计数据，它可以更好地预测成本。

# sql - Rails 中唯一性助手中的范围选项

> ID：13114199
> 
> 赞同：0
> 
> 时间：2012-10-28T23:42:27.050
> 
> 标签：sql, ruby-on-rails, ruby, ruby-on-rails-3, helper

在阅读 Rails 指南时，我遇到了一些我不确定的事情。在示例中，它表明我可以编写一个范围选项来添加额外的选项来检查唯一性。我的问题是，我是否必须写出一种专门针对某个时间段进行查询的方法。换句话说，在下面的示例中，是否有比看上去更多的代码？如果不是，Rails 怎么知道在表数据库中检查正确的时间戳列？

```
class Holiday < ActiveRecord::Base
   validates :name, 
             :uniqueness => { :scope => :year,
             :message => "should happen once per year" }
end 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-28T23:47:36.147

`Holiday`如果模型有一个`year`字段（即如果`holidays`表有一个`year`列），这将起作用。然后 AR 将简单地将名称唯一性限制为具有相同的记录`year`

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-28T23:47:56.997

所有这一切都是为了确保模型上列的上下文中的唯一性`year`——该列可以是任何东西，但它需要存在。它不会自动检查带有完整日期的时间戳的年份部分。您的模型负责实际存储该`year`值。

您当然可以`year`自动填充它。假设`holiday_date`您的模型中有一个列。然后您可以确保该`year`列始终设置如下：

```
before_save :set_year

def set_year
  self.year = holiday_date.try(:year)
end 
```

（这些`try`方法只是确保如果`holiday_date`碰巧没有错误`nil`）

# c - C：sendto() 到多个客户端 - 所有消息都发送到同一个客户端？

> ID：13114200
> 
> 赞同：0
> 
> 时间：2012-10-28T23:42:50.653
> 
> 标签：c, sockets, udp

我正在使用 UDP 套接字将许多客户端连接到一台服务器。在`recvfrom()`ing 客户端的登录数据包之后，我将它们存储`struct addrinfo *`在一个数组中，如下所示：

```
struct addrinfo * userAddrs[64];

recvfrom(sockfd, req, 4096, 0, serverAddr->ai_addr, &serverAddr->ai_addrlen);
userAddrs[userindex] = (struct addrinfo *) malloc(sizeof(struct addrinfo));
memcpy(userAddrs[userindex], serverAddr, sizeof(struct addrinfo)); 
```

然后服务器从客户端接收消息并将其发送给该通道上的每个人：

```
// user x channel matrix. 1 means listening on that channel.
int userchannel_matrix[64][64];
for(int i = 0; i < 64; i++){
    if(userchannel_matrix[i][channelindex] == 1){
       sendto(sockfd, &textsay, sizeof (struct text_say), 0, userAddrs[i]->ai_addr, userAddrs[i]->ai_addrlen);
    }
} 
```

但是，这最终会将所有消息发送给一个客户端。例如：如果三个客户端订阅了频道 4，其中一个发送了一条消息，则该客户端将收到所有 3 条消息，而不是每个客户端都收到一条。我在这里做错了什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-29T00:44:11.107

基本问题是 struct addrinfo 包含一个*指向*struct sockaddr 的指针，显然您只初始化了一次。因此，每个 recvfrom() 都会覆盖相同的 sockaddr 数据（addrinfo.ai_addr），并且每个 userAddr[] 项都指向同一个。

正如@Troy 建议的那样，您应该使用 struct sockaddr。否则*首先分配数组中的所有 addrinfo 结构，*每个结构都有自己的 struct sockaddr *ai_addr 指针。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-30T05:10:01.437

除了其他人所说的，您正在实施的基本上是手动多播，那么为什么不直接使用实际的多播呢？这样，您的服务器可以将单个消息“sendto()”发送到单个多播 IP 组，并且操作系统将处理将消息的副本发送到已为您订阅该多播 IP 组的每个客户端。

# operating-system - 为什么 x86-64 长模式不需要分段？

> ID：13114202
> 
> 赞同：3
> 
> 时间：2012-10-28T23:42:58.643
> 
> 标签：operating-system

X86_64 长模式（64 位）不需要段选择器。为什么分段在 32 位中是必要的，而在 64 位中却没有用？谢谢，

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-23T02:37:13.020

X86_64 长模式下的 CPU 使用 PAE（物理地址扩展）技术来控制内存。

所以段选择器不是必需的。

我建议您阅读此 pdf 手册`AMD64 Architecture Programmer’s Manual Volume 2: System Programming`。

谷歌`amd64 volume 2`，第一个结果是pdf手册。

看第 5.3 章`Long-Mode Page Translation`，你就会明白了。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-05-29T02:39:01.223

当内存实际按段加载和卸载时，段选择器很有用，这是 x86 最初开发时的一个选项。然而，现代操作系统都使用分页，它后来被引入 x86，并且（尽管有一些折衷）它的简单性最终导致它取代了分段。

32 位 x86 保持分段可用，而 16 位操作系统过渡到新的处理器架构，但在 64 位 x86 的设计过程中，一些遗留功能（包括分段）被删除。另一个在操作系统教科书中经常描述但在实践中从未使用过的特性是不同权限“环”的概念。传统上，有 4 个环（编号 0-3），但实际上除了 0（内核）和 3（用户空间）之外没有人使用任何东西，因此 x86-64 删除了环 1 和 2。但是，为了添加对新虚拟机管理程序的支持- 相关指令，x86-64 在 0 以下引入了一个新的环，称为 -1。

分段使检测内存的[缓存别名](https://stackoverflow.com/questions/5947117/definition-meaning-of-aliasing-cpu-cache-architectures)变得更加困难，因此支持它也会使 x86-64 芯片的设计更加复杂。

# ruby - Ruby：捕获输出

> ID：13114209
> 
> 赞同：3
> 
> 时间：2012-10-28T23:44:16.767
> 
> 标签：ruby

为了更多地了解 Ruby，我正在查看这篇博客文章[http://mentalized.net/journal/2010/03/08/5_ways_to_run_commands_from_ruby/](http://mentalized.net/journal/2010/03/08/5_ways_to_run_commands_from_ruby/)讨论了不同的命令执行方法，例如 Kernel#exec 和 Kernel ＃系统。他的示例文件有两行代码

```
 #!/usr/bin/env ruby
puts "out"
STDERR.puts "error" 
```

他指出，每当他运行命令时，无论输出是否被捕获。例如，这里捕获了 STDOUT，但没有捕获 STDERR。

```
 >> `./err.rb`
err
=> "out\n" 
```

但为什么这很重要？输出是否被“捕获”在实际方面有什么区别。我试图在我的 Ruby 书中找到答案，但无济于事。

谢谢你的解释。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-28T23:52:18.630

作者在您链接的帖子的顶部指出了是否捕获输出的重要性：

> [...] 它是由我的 Redmine Github Hook 插件的问题触发的，在该插件中没有记录 STDERR 消息。

听起来作者发现写入 stderr 的错误消息没有被“捕获”并放入程序的日志文件中，这可能使诊断这些错误更加困难。

如果你还没有，你可能想了解更多关于[标准流](http://en.wikipedia.org/wiki/Standard_streams)的知识，它决定了你的程序输出的方向。如果您能够有效地操作标准流，您可以捕获程序的输出并将其重定向到适当的位置，例如错误转到日志文件、生成的数据输出到数据文件、用户可能希望查看的状态更新转到屏幕等。

# regex - 我的 sed 正则表达式有什么问题（在 egrep 中有效，但在 sed 中无效）？

> ID：13114211
> 
> 赞同：1
> 
> 时间：2012-10-28T23:44:36.890
> 
> 标签：regex, linux, sed, clojure, grep

我想从我的 Clojure 源代码中删除类型提示，所以我尝试了：

```
echo "(def ^Integer a 1)" | egrep '\^\w+ ' 
```

它成功匹配类型提示。

接下来，我尝试了：

```
echo "(def ^Integer a 1)" | sed s/\^\w+//g 
```

但是`sed`不会用空替换类型提示。

我的正则表达式有什么问题？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-28T23:52:13.997

几乎所有版本都`sed`实现了所谓的 POSIX*基本*正则表达式，而不是*扩展*正则表达式。'e'`egrep`代表 ... 扩展。猜猜它实现了哪种正则表达式。`:)` 基本正则表达式和扩展正则表达式之间的最大区别之一是它`+`只是扩展正则表达式中的一个元字符。 *基本 RE 的某些*实现接受`\+`具有相同含义，但您不能可移植地依赖`sed`支持它。

此外，`\w`它甚至不是 POSIX 扩展正则表达式语法的一部分；它是一种 Perl 主义，后来被广泛采用（例如被 Python 和 Javascript），但 AFAIK 在任何地方都没有正式标准化。

您需要的构造是

```
echo "(def ^Integer a 1)" | sed 's/\^[A-Za-z0-9][A-Za-z0-9]*//g' 
```

不，没有更短的方法可以便携地编写它。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-28T23:51:06.697

您需要将正则表达式包含在`'`其中并转义`+`：

```
echo "(def ^Integer a 1)" | sed 's/\^\w\+//g' 
```

# mysql - MySQL多重计数

> ID：13114215
> 
> 赞同：2
> 
> 时间：2012-10-28T23:45:00.047
> 
> 标签：mysql, sql

我有下表：

```
+----+----------+------------+
| id | drink    | gender     |
+----+----------+------------+
|  1 | Beer     | m          |
|  2 | Milk     | f          |
|  3 | Milk     | f          |
|  4 | Tea      | m          |
+----+----------+------------+ 
```

现在我想计算哪种性别更喜欢哪种饮料。结果应如下所示：

```
+-------+-------+--------+
| drink | fem   | male   |
+-------+-------+--------+
|  Beer | 0     | 1      |
|  Milk | 2     | 0      |
|  Tea  | 0     | 1      |
+----+----------+--------+ 
```

有人有想法吗？

提前感谢您的建议。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-28T23:46:27.590

```
SELECT drink,
       SUM(CASE WHEN gender = 'f' THEN 1 ELSE 0 END) fem,
       SUM(CASE WHEN gender = 'm' THEN 1 ELSE 0 END) male
FROM tableName
GROUP BY drink 
```

# [SQLFiddle 演示](http://sqlfiddle.com/#!2/ac3e8/1)

上面的查询可以进一步转换为准备好的语句。这很有帮助，例如，如果您设法在不修改原始查询的情况下为性别添加另一个值（*例如，`u`对于中性）。*例子，

```
SET @sql = NULL;
SELECT
  GROUP_CONCAT(DISTINCT
    CONCAT(
      'SUM(case when gender = ''',
      gender,
      ''' then 1 ELSE 0 end) AS ',
      gender
    )
  ) INTO @sql
FROM tableName;

SET @sql = CONCAT('SELECT drink, ', @sql, ' 
                   FROM tableName 
                   GROUP BY drink');

PREPARE stmt FROM @sql;
EXECUTE stmt;
DEALLOCATE PREPARE stmt; 
```

# [SQLFiddle 演示](http://sqlfiddle.com/#!2/ac3e8/2)

# google-drive-api - Google Drive SDK - 图片元数据

> ID：13114216
> 
> 赞同：2
> 
> 时间：2012-10-28T23:45:08.747
> 
> 标签：google-drive-api

我正在为 Google Drive (PHP) 创建一个客户端应用程序。参考 Files API (https://developers.google.com/drive/v2/reference/files)，虽然我看到了主要的 EXIF 元数据，但我缺少一些常用的其他 EXIF 参数和 IPTC 元数据。

EXIF 字段缺失：焦距、测光模式、传感器类型、曝光模式、曝光偏差、镜头和最大光圈值。

此外，没有解析任何 IPTC 元数据：关键字、类别、作者、版权、标题、标题、署名、城市、州、国家、子位置

问题：是否有其他解决方案可以为存储在 Google Drive 中的图像导出上述数据？

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-29T15:53:20.003

编辑：我们添加了一些 EXIF 字段：

```
"imageMediaMetadata": {
  "width": 500,
  "height": 375,
  "rotation": 0,
  "location": {
   "latitude": 41.8898575,
   "longitude": 12.486211666666666,
   "altitude": 56.819
  },
  "date": "2011:12:31 17:07:29",
  "cameraMake": "SONY",
  "cameraModel": "DSC-HX9V               ",
  "exposureTime": 0.004,
  "aperture": 5.9,
  "flashUsed": false,
  "focalLength": 68.48,
  "isoSpeed": 100,
  "meteringMode": "Pattern",
  "exposureMode": "Auto",
  "colorSpace": "sRGB",
  "whiteBalance": "Auto",
  "exposureBias": 0.0,
  "maxApertureValue": 3.4375
 } 
```

注意：使用[这个测试文件](http://www.summitpost.org/test-this-image-contains-exif-data/769474)

感谢您的功能请求，我们将寻求添加这些功能。

# oracle - 在 oracle 过程中设置 serveroutput on

> ID：13114220
> 
> 赞同：11
> 
> 时间：2012-10-28T23:45:20.450
> 
> 标签：oracle, procedure

我创建了一个简单的程序。在这个过程中，我想输出一些数据。但是，无论我在哪里设置服务器输出

它说

错误（26,5）：PLS-00103：在预期以下情况之一时遇到符号“SERVEROUTPUT”：。( ) , * @ % & = - + < / > at 是 mod 余数 not rem => <> or != or ~= >= <= <> and or like2 like4 likec as between || 多集成员子多集

不管我把它放在哪里，它一直在说。

```
create or replace PROCEDURE discount  

is --- signature 

BEGIN --- executable part

update dvd set me_our_price = me_our_price*0.90 WHERE me_release_year = 2011;
update dvd set me_our_price = me_our_price*0.80 WHERE me_release_year = 2010;

update bluray set me_our_price = me_our_price*0.95 WHERE me_release_year = 2011;
update bluray set me_our_price = me_our_price*0.90 WHERE me_release_year = 2010;

DBMS_OUTPUT.PUT_LINE(' Blurays '); 
for i in ( 
SELECT e.mo_title, e.mo_bluray.me_list_price as me_list_price, e.mo_bluray.me_our_price    as  me_our_price FROM movie e  where e.mo_bluray is not null
 ) 
loop 

DBMS_OUTPUT.PUT_LINE(i.mo_title|| '  ' || i.me_list_price|| '  ' || i.me_list_price); 

end loop; 

DBMS_OUTPUT.PUT_LINE(' DVDs '); 
for i in ( 
set serveroutput on
SELECT e.mo_title, e.mo_dvd.me_list_price as me_list_price, e.mo_dvd.me_our_price as      me_our_price FROM movie e  where e.mo_dvd is not null
 ) 
loop 
DBMS_OUTPUT.PUT_LINE(i.mo_title|| '  ' || i.me_list_price|| '  ' || i.me_list_price); 
end loop; 

END discount; 
```

* * *

## 回答 #1

> 赞同：29
> 
> 时间：2014-04-08T04:46:23.310

为了理解“SET SERVEROUTPUT ON”的使用，我举个例子

```
DECLARE
a number(10)  :=10;
BEGIN
dbms_output.put_line(a) ;
dbms_output.put_line('Hello World ! ')  ;
END ; 
```

有输出：PL/SQl 程序成功完成，即没有预期的输出

背后的主要原因是，无论我们在**dbms_output.put_line('ARGUMENT'/VALUES)**中传递什么，即 ARGUMENT/VALUES，都内部存储在 SGA（共享全局区域）内存区域的缓冲区中，最多 2000 字节。

***注意：***但是应该注意，这个缓冲区仅在我们使用 **dbms_output**包时创建。而且我们只需要为会话设置一次环境变量！

为了从该缓冲区中获取它，我们需要为 session 设置环境变量。我们正在设置服务器输出（因为它的命名法），这让初学者很困惑，但不幸的是它不是那样的。使用**SET SERVER OUTPUT ON**只是告诉 PL/SQL 引擎

*嘿，请打印我将在 dbms_output.put_line
中传递的 ARGUMENT/VALUES，然后 PL/SQl 运行时引擎在主控制台上打印参数。

我想我对你们都很清楚。祝你一切顺利 。要了解有关**Oracle Server Engine***架构结构*的更多信息， 您可以在 Quora [http://qr.ae/RojAn8上查看我的答案](http://qr.ae/RojAn8)

 **并回答您的问题“应该在会话开始时使用 SET SERVER OUTPUT。”

* * *

## 回答 #2

> 赞同：22
> 
> 时间：2012-10-29T04:09:08.623

“SET serveroutput ON”是一个 SQL*Plus 命令，不是有效的 PL/SQL。

* * *

## 回答 #3

> 赞同：10
> 
> 时间：2015-11-26T20:43:03.077

首先在你的 sp 中添加下一个代码：

```
BEGIN
    dbms_output.enable();
    dbms_output.put_line ('TEST LINE'); 
END; 
```

在您的 Oracle SQL 开发人员中编译您的代码。所以转到菜单视图-> dbms 输出。单击 Icon Green Plus 并选择您的架构。现在运行你的 sp。

* * *

## 回答 #4

> 赞同：4
> 
> 时间：2018-03-29T17:26:50.723

实际上，您需要在调用`SET SERVEROUTPUT ON;`之前`BEGIN`调用。

每个人都建议这样做，但没有提供实际放置线路的建议：

```
SET SERVEROUTPUT ON;

BEGIN
    FOR rec in (SELECT * FROM EMPLOYEES) LOOP
        DBMS_OUTPUT.PUT_LINE(rec.EmployeeName);
    ENDLOOP;
END; 
```

否则，您将看不到任何输出。

* * *

## 回答 #5

> 赞同：3
> 
> 时间：2019-01-25T05:49:38.430

```
If you want to execute any procedure then firstly you have to set serveroutput on in the sqldeveloper work environment like.

->  SET SERVEROUTPUT ON;
-> BEGIN
dbms_output.put_line ('Hello World..');
dbms_output.put_line('Its displaying the values only for the Testing purpose');
END;
/ 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2019-09-09T12:22:52.127

**程序成功但有任何输出**

错误行 1：意外的标识符

这是代码：

```
SET SERVEROUTPUT ON 

DECLARE

    -- Curseurs 
    CURSOR c1 IS        
    SELECT RWID FROM J_EVT
     WHERE DT_SYST < TO_DATE(TO_CHAR(SYSDATE,'DD/MM') || '/' || TO_CHAR(TO_NUMBER(TO_CHAR(SYSDATE, 'YYYY')) - 3));

    -- Collections 

    TYPE tc1 IS TABLE OF c1%RWTYPE;

    -- Variables de type record
    rtc1                        tc1;    

    vCpt                        NUMBER:=0;

BEGIN

    OPEN c1;
    LOOP
        FETCH c1 BULK COLLECT INTO rtc1 LIMIT 5000;

        FORALL i IN 1..rtc1.COUNT 
        DELETE FROM J_EVT
          WHERE RWID = rtc1(i).RWID;
        COMMIT;

        -- Nombres lus : 5025651
        FOR i IN 1..rtc1.COUNT LOOP               
            vCpt := vCpt + SQL%BULK_RWCOUNT(i);
        END LOOP;            

        EXIT WHEN c1%NOTFOUND;   
    END LOOP;
    CLOSE c1;
    COMMIT;

    DBMS_OUTPUT.PUT_LINE ('Nombres supprimes : ' || TO_CHAR(vCpt)); 

END;
/
exit 
```**

# java - 二次公式

> ID：13114228
> 
> 赞同：1
> 
> 时间：2012-10-28T23:47:27.293
> 
> 标签：java, math

问题是写出二次公式的两个解。一种结果是在公式中使用加号运算符，另一种结果是在使用负号运算符时。

我的计划是创建两种不同的方法来计算公式的不同结果，一种方法使用 (+)，另一种方法使用 (-)。然后我想调用这两个方法来显示结果。问题是当我在 Eclipse 中调用这些方法时，它说有一个错误“我无法解析为变量”。我对问题的解决方案是否正确，我是否遗漏了什么以及如何解决该错误？

```
import acm.program.*;

public class QuadraticFormula extends ConsoleProgram {

public void run(){
    println("Enter the coefficients for the quadratic equation: ");
    int a = readInt("Please enter the value of a: ");
    int b = readInt("Please enter the value of b: ");
    int c = readInt("Please enter the value of c: "); 

    println("Your first solution is" + QuadPlus(i));
    println("Your second solution is" + QuadMinus(i)); 

}

private double QuadPlus (double a, double b, double c, double x){
    double i = ((+(b)) + Math.sqrt(( b * b) - (4 * a * c)) / (2 * a));

    return i;

}

private double QuadMinus (double a, double b, double c, double x) {
    double i = ((-(b)) + Math.sqrt(( b *b) - (4 * a * c)) / ( 2 * a));

    return i; 
} 
```

}

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-28T23:49:19.153

这

```
 println("Your first solution is" + QuadPlus(i)); 
```

不知道我是什么

它知道 a、b 和 c 是什么

```
 println("Your first solution is: " + QuadPlus(a,b,c)); 
```

将 x 从您的函数中删除

```
private double QuadPlus (double a, double b, double c){
    double i = ((+(b)) + Math.sqrt(( b * b) - (4 * a * c)) / (2 * a));
   return i;

} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-28T23:59:08.247

其他人已经回答了你的直接问题，所以我不会在这里重复，但我注意到你在函数中使用的方程是不正确的。平方根结果的符号变化，而不是`-b`前面的。功能应该是：

```
private double QuadPlus (double a, double b, double c){
    return ((-b) + Math.sqrt(( b * b) - (4 * a * c))) / (2 * a);
}

private double QuadMinus (double a, double b, double c) {
    return ((-b) - Math.sqrt(( b *b) - (4 * a * c))) / ( 2 * a);
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-28T23:49:56.723

您必须使用正确的参数调用函数，如下所示：

```
 println("Your second solution is" + QuadMinus(a, b, c, x)); 
```

您没有使用参数 x。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-10-28T23:53:38.027

线

```
println("Your first solution is" + QuadPlus(i)); 
```

它有两个问题。

1.  它试图引用`i`不同方法的本地变量。由于`i`超出了 main 方法的范围（您声明调用的变量`i`仅在 QuadPlus 和 QuadMinus 方法的范围内），因此 eclipse 找不到定义`i`，因此它会抛出您的错误。

2.  QuadPlus 和 QuadMinus 方法被定义为`double`每个接受四个参数，因此当您调用它们时，您必须在参数括号中放置四个双精度值。否则，程序怎么会知道 a, b, ... etc 是`i`什么？

您最终的调用应该类似于：

```
println("Your first solution is" + QuadPlus(aDouble, bDouble, cDouble, xDouble)); 
```

* * *

**编辑**：您实际上似乎没有`x`在 QuadThing 方法中使用该参数，因此您可以将其从定义中删除，例如：

```
... QuadPlus(double a, double b, double c) { ... 
```

然后打电话：

```
QuadPlus(a, b, c); 
```

* * *

**编辑2**：另外，

```
double i = ((+(b)) + Math.sqrt(( b * b) - (4 * a * c)) / (2 * a)); 
```

...将仅将平方根除以 2a，而不是像二次公式中的整个事物。要修复它，请移动斜线分隔之前的最后一个括号。这适用于两种方法。最后，公式的 +/- 部分不会影响前面的 b；b 始终为 (-b)。+/- 是*加还是减平方根*：

```
double plus = ( (-(b)) + Math.sqrt(( b * b) - (4 * a * c)) )  / (2 * a);
double minus = ( (-(b)) - Math.sqrt(( b * b) - (4 * a * c)) )  / (2 * a); 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-10-28T23:52:53.837

您可以在方法参数中删除“double x”，因为它没有使用，然后您必须将函数调用为： double i=QuadPlus(a, b, c); 另外，使用 double a=read double...

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-10-29T00:57:39.483

如果问题是写一个二次方程的解，你应该注意不同的可能结果。您可以有 2 个解决方案、1 个解决方案或 0 个解决方案。

要处理这个问题，您可以检查判别式：d = b*b - 4*a*c

*   如果 d == 0 => 你有 1 个解决方案，打印它（注意如何检查/比较 d 和 0）
*   如果 d > 0 => 你有 2 个解决方案，将它们都打印出来
*   如果 d < 0 => 您有 0 个解决方案，请打印一条消息

还有一些障碍（浮点取消、溢出等）但作为入门级练习，只是不要关心深入的细节。

--待定

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2015-03-05T17:00:49.977

这是我所做的：

```
Math.quadform = function(a, b, c) {

  var pos = (-b + Math.sqrt(Math.pow(b, 2)-4*a*c))/2*a;
  var neg = (-b - Math.sqrt(Math.pow(b, 2)-4*a*c))/2*a;

  return {
    "positiveRoot": pos,
    "negativeRoot": neg
  };

}; 
```

使用 IMO 更简单、更容易。

# python - GAE/P：mail_stub.get_sent_messages 自 v 1.7.1 以来因非 ascii 而失败

> ID：13114235
> 
> 赞同：0
> 
> 时间：2012-10-28T23:48:23.017
> 
> 标签：python, google-app-engine, unicode

我的测试代码在 GAE 版本 1.7.1 中开始失败。我回到 1.7.0 等待修复，但我的测试代码在 1.7.2 中仍然失败。这是导致失败的最小测试：

```
mail.send_mail("sender@example.com", "receiver@example.com", 
               u"sübject".encode("utf-8"), "body")
mail_list = self.mail_stub.get_sent_messages() 
```

我收到以下错误：

```
Traceback (most recent call last):
  File "/Users/.../tests/unit_tests.py", line 19, in testTest
    mail_list = self.mail_stub.get_sent_messages()
  File "/Applications/GoogleAppEngineLauncher.app/Contents/Resources/GoogleAppEngine-default.bundle/Contents/Resources/google_appengine/google/appengine/api/apiproxy_stub.py", line 184, in WrappedMethod
    return method(self, *args, **kwargs)
  File "/Applications/GoogleAppEngineLauncher.app/Contents/Resources/GoogleAppEngine-default.bundle/Contents/Resources/google_appengine/google/appengine/api/mail_stub.py", line 183, in get_sent_messages
    email_message = mail.EmailMessage(mime_message=mime_message)
  File "/Applications/GoogleAppEngineLauncher.app/Contents/Resources/GoogleAppEngine-default.bundle/Contents/Resources/google_appengine/google/appengine/api/mail.py", line 742, in __init__
    self.update_from_mime_message(mime_message)
  File "/Applications/GoogleAppEngineLauncher.app/Contents/Resources/GoogleAppEngine-default.bundle/Contents/Resources/google_appengine/google/appengine/api/mail.py", line 1213, in update_from_mime_message
    super(EmailMessage, self).update_from_mime_message(mime_message)
  File "/Applications/GoogleAppEngineLauncher.app/Contents/Resources/GoogleAppEngine-default.bundle/Contents/Resources/google_appengine/google/appengine/api/mail.py", line 1093, in update_from_mime_message
    subject = _decode_and_join_header(mime_message['subject'], separator=u'')
  File "/Applications/GoogleAppEngineLauncher.app/Contents/Resources/GoogleAppEngine-default.bundle/Contents/Resources/google_appengine/google/appengine/api/mail.py", line 558, in _decode_and_join_header
    for s, c in email.header.decode_header(header))
  File "/Applications/GoogleAppEngineLauncher.app/Contents/Resources/GoogleAppEngine-default.bundle/Contents/Resources/google_appengine/google/appengine/api/mail.py", line 558, in <genexpr>
    for s, c in email.header.decode_header(header))
UnicodeDecodeError: 'ascii' codec can't decode byte 0xc3 in position 1: ordinal not in range(128) 
```

如果我做错了什么或者这是 GAE 错误，你能告诉我吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-29T01:04:03.173

在阅读了这篇[文章](https://stackoverflow.com/questions/6913170/encoding-mail-subject-smtp-in-python-with-non-ascii-characters)和这个[页面](http://mg.pov.lt/blog/unicode-emails-in-python.html)之后，这似乎是正确的做法：

```
from email import header
mail.send_mail("sender@example.com", "receiver@example.com", 
               str(header.Header(u"sübject", "utf-8")), "body") 
```

到目前为止，它对我有用。

# javascript - 检测点击是否在 OverlayView 内

> ID：13114236
> 
> 赞同：5
> 
> 时间：2012-10-28T23:48:31.117
> 
> 标签：javascript, google-maps, google-maps-api-3, d3.js

我想在用户单击地图上的任意位置时显示某个信息框，而当用户在 OverlayView 内单击时显示不同的信息框。

我正在为地图对象的单击事件添加一个侦听器，但此事件仅提供一个 latLong 参数，这似乎不足以判断是否点击了 OverlayView。

```
 google.maps.event.addDomListener(map, 'click', function(param) {
        // if( an OverlayView was clicked)
        // showInfoboxForOverlayView();
        // else
        // showStandarInfobox();
    }); 
```

我知道我可以为 OverlayView 对象添加一个单独的侦听器，但是当我这样做时，两个事件都会被触发（一个来自 OverlayView 对象，一个来自地图对象）。

这就是我构造我的 OverlayView 对象的方式，

```
 var overlay = new google.maps.OverlayView();
    overlay.onAdd = function () {

        var layer = d3.select(this.getPanes().overlayMouseTarget).append("div").attr("class", "SvgOverlay");
        var svg = layer.append("svg");
        var adminDivisions = svg.append("g").attr("class", "AdminDivisions");

        overlay.draw = function () {
            var markerOverlay = this;
            var overlayProjection = markerOverlay.getProjection();

            // Turn the overlay projection into a d3 projection
            var googleMapProjection = function (coordinates) {
                var googleCoordinates = new google.maps.LatLng(coordinates[1] + 0.0005, coordinates[0] - 0.0006);
                var pixelCoordinates = overlayProjection.fromLatLngToDivPixel(googleCoordinates);
                return [pixelCoordinates.x + 4000, pixelCoordinates.y + 4000];
            }

            path = d3.geo.path().projection(googleMapProjection);
            adminDivisions.selectAll("path")
                    .data(geoJson.features)
                    .attr("d", path) // update existing paths
                    .enter().append("svg:path")
                    .attr("d", path);;
        };
    }; 
```

有任何想法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-02T14:41:10.770

尝试在覆盖元素的处理程序中使用全局*事件*对象中的**cancelBubble**标志：

 *```
event.cancelBubble = true; 
```

这应该可以防止触发第二次点击处理程序。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-03T09:21:00.300

我不确定这是否可行。这也不是一个容易解决的问题。

1.  根本不要使用谷歌地图事件
2.  为每个地理路径添加单独的事件侦听器 - 通过 d3`.on()`方法
3.  创建`svg:rect`整个地图大小的透明，位于所有路径的后面。订阅它的点击事件。这表示常规地图点击。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-29T01:38:55.767

在你的`OverlayView`：

`onAdd`: 移除监听器`map`，添加覆盖层监听器。

`onRemove`：添加监听器`map`并删除覆盖层的监听器。*

# java - 使用 Servlet 填充从 JSP 调用的弹出窗口

> ID：13114238
> 
> 赞同：2
> 
> 时间：2012-10-28T23:49:13.947
> 
> 标签：java, jsp, session, servlets, popup

我的问题可能是建筑问题。我有一个包含项目数量的页面，当我单击链接时，我希望显示一个弹出窗口，其中包含有关所选项目的更多信息。此信息是从数据库中提取的。

在我看来，架构应该是这样的......

1.  JSP初始化对servlet的调用并同时打开弹窗
2.  Servlet 使用来自 JSP 的信息从数据库中选择项目并将信息传递到弹出页面，该页面是 HTML
3.  弹出窗口显示有关项目的信息

*我看到了几个问题：*

1.  浏览器打开弹窗并使用 servlet 的结果的过程是什么？我不希望在没有 servlet 准备结果的情况下加载页面，这可以通过从 Servlet 传递到 JSP 的会话变量来解决？

2.  我应该如何将在 JSP 上单击的项目的参数传递给 Servlet？JSP 项目部分正在动态生成。

希望有人可以阐明我的困惑。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-06-11T07:18:01.563

使用 javaScript

Servlet 响应基本上是一个 Http 文档/片段。因此，您可以返回对将在客户端执行的 javascript 函数的调用。该函数可以在该 Servlet 响应中传递，也可以预先包含在 .js 文件中。

# c++ - c++：联合->结构，解释？

> ID：13114241
> 
> 赞同：1
> 
> 时间：2012-10-28T23:49:23.657
> 
> 标签：c++, typedef, unions

我有以下类型定义：

```
typedef union{
unsigned int Entry;
struct {
    unsigned char EntryType;
    unsigned char EntryOffset[3];
};
} TLineDescriptor; 
```

我也有以下使用类型：

```
TLineDescriptor LineDescriptor;
LineDescriptor.Entry = 40;
LineDescriptor.EntryType = 0x81; 
```

`sizeof(LineDescriptor)`表明这个变量占用了 4 个字节的内存，起初我假设它保存了 int 或 struct。

```
cout << LineDescriptor.Entry << " " << LineDescriptor.EntryType << endl; 
```

但是，上面的行打印了两个不同的值，即`129 ü`显然`LineDescriptor.Entry`是指保存值 0x81 的内存位置。我不确定 40 发生了什么。但很明显我的假设是错误的。有人可以正确解释和解释类型定义吗？理解它对我使用我找到的代码至关重要。

先感谢您。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-28T23:54:18.113

以这种方式打印EntryType：

```
cout << "0x" << hex << (unsigned)LineDescriptor.EntryType << endl; 
```

你会看到 ü 是 0x81。

打印这个：

```
cout << LineDescriptor.Entry 
```

是未定义的行为——因为联合中只有一个元素可以在某一时刻“活动”——而您的最后一项任务是对 EntryType。

但是，假设我们可以假设这实际上并不像 C++ 所希望的那样未定义，那么 129 来自：

`Entry=40`- 在您的系统上是二进制格式`28 00 00 00`（首先是不重要的字节）。

随着`LineDescriptor.EntryType = 0x81;`你改变了第一个字节：`81 00 00 00`- 所以你的条目打印输出现在是 129。

做这个实验，你会得到其他结果：

TLineDescriptor LineDescriptor;

```
LineDescriptor.Entry = 256;
LineDescriptor.EntryType = 0x81;

cout << LineDescriptor.Entry << " " << unsigned(LineDescriptor.EntryType) 
     << endl;
>> 385  129 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-28T23:54:27.543

实际上，这些不是不同的值。`129`是字符的字符代码`ü`。`operator <<`处理和数据类型不同，第`ostream`一个打印数值，后一个打印字符值。`int``char`

所以，你对联合类型的理解是正确的。但是，请注意，在处理联合类型时，字节序可能是一个问题。例如，在 little-endian 机器上，`EntryType`将保存 的最低有效字节`Entry`和`EntryOffset`数组中的其他字节。但在大端机器上，`EntryType`将保存最高有效字节。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-28T23:57:59.450

您的假设没有错，联合将持有int**或**struct。当您将值分配给`0x81`EntryType 字段时，您之前分配给的整数`Entry`将被覆盖，这就是为什么当您`cout`使用两个字段时，您会得到相同的数量出现在两个字段中，一个作为 int (129)，一个作为 char ( ü)。两者都有十六进制值`0x81`。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-10-28T23:59:03.967

它同时持有一个`int`和一个，并且两者占用相同的内存空间**。**通过访问，您将这 4 个字节解释为. 如果通过 访问它，则将其解释为 4 s。`struct`**`TLineDescriptor::Entry``int``struct``unsigned char`**

 **```
LineDescriptor.Entry = 40; 
```

这会将 4 个字节的`int`值设置为 40。在小端系统中，这意味着第一个字节为 40，其他 3 个字节为 0。

```
LineDescriptor.EntryType = 0x81; 
```

这会将第一个字节设置为值 129 (0x81)。（在小端系统中，这意味着 的值`Entry`现在也为 129，前提是您将其余部分设置为 0）。

关于不同的输出：当您输出 EntryType 时，它​​显示为字符而不是数字。尝试：

```
cout << LineDescriptor.Entry << " " << static_cast<int>(LineDescriptor.EntryType) << endl; 
```**

# java - 使用 JAVA 比较不同格式的值

> ID：13114242
> 
> 赞同：-4
> 
> 时间：2012-10-28T23:49:37.097
> 
> 标签：java

我想知道如何使用 3k=3000 之类的 java 比较不同格式的两个值，并且必须以某种方式设置它以使代码产生通过或失败的方式

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-29T00:01:15.903

欢迎来到堆栈溢出！为了将来参考，我们希望看到显示您已经尝试过的问题（例如伪代码）。对于这样的事情，几个示例案例可能会有所帮助。

根据我对这个问题的理解，您希望您的程序以两种格式接收输入：第一个输入标有公制风格的后缀，第二个输入是标准整数。

示例案例：

输入

```
1.000K 1000
1.123K 1000
1.1M 1100000 
```

输出

```
Pass
Fail
Pass 
```

为了帮助解决这个问题，我会阅读正则表达式（regex）。

也许编写一个将“非标准”整数格式作为`String`参数并返回`int`等于参数的方法。然后，您可以简单地使用`==`运算符。

# mysql - SQL Select 包括数据类型和数据值

> ID：13114243
> 
> 赞同：4
> 
> 时间：2012-10-28T23:49:37.247
> 
> 标签：mysql, sql, types, sqldatatypes

如何从表中选择数据并将数据类型包含在值中？例如，我有一个名为 EMPLOYEE 的表，其中包含 fname、lastname、phone 等。如果我这样做：

```
SELECT * FROM EMPLOYEE 
```

我得到了所有的专栏。如果我做：

```
SELECT COLUMN_NAME, DATA_TYPE
FROM INFORMATION_SCHEMA.COLUMNS
WHERE TABLE_NAME = 'EMPLOYEE'
ORDER BY ORDINAL_POSITION 
```

我得到了所有的列名和它们的数据类型。

我需要将这两者结合起来，以便将值与数据类型一起显示。

我是 SQL 新手，但我在网上搜索了一些并尝试了各种 JOIN 和 UNION 语句，但我可能只是输入错误。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-29T00:10:33.540

您可以`SELECT EMPLOYEE.COL1, INFO.DATA_TYPE FROM EMPLOYEE, INFORMATION_SCHEMA.COLUMNS INFO WHERE INFO.TABLE_NAME='EMPLOYEE' AND COLUMN_NAME='COL1'` 但是要选择更多字段，您必须使用不同的别名再次添加另一个 INFORMATION_SCHEMA.COLUMNS 实例。

但出于多种原因，您不应该这样做。

从技术上讲：CROSS JOIN（FROM 中的表仅用逗号列出）对数据库服务器造成很大压力。`FROM T1, T2`将 T1 的所有行与 T2 的所有行配对并检查结果行。如果 T1 有 n 行而 T2 有 m 则结果有 n*m 行。

逻辑 1：您不应该需要返回此信息。当您输入查询（SELECT）时，返回的模式是已知的；查询确定结果列的数据类型。逻辑2：由于每一行在列中具有相同的数据类型，因此您不需要在每一行中返回类型信息。例如，您的示例返回 1000 名员工的数据将不必要地在 AGE 字段为 INTEGER、NAME 为 VARCHAR等的**每一行上传输......**

如果您不知何故不知道结果的架构（例如，由于生成的查询等），那么上述解决方案对您没有帮助。

# php - 一个漂亮的 MYSQL 打印数据的想法

> ID：13114244
> 
> 赞同：0
> 
> 时间：2012-10-28T23:49:42.197
> 
> 标签：php, mysql

例如

```
id - Name - Surname - Phone - Married
1 - Ann - AnnS - 123 - No
2 - Mary - MarryS - [empty] - Yes
3 - Jane - JaneS - 321 - [empty] 
```

现在我想通过**id**记录并打印这样的信息（将行**名称更改为 SMTH ELSE 并且如果行为空 - 根本不显示行**）：

```
SELECT * FROM `girls` WHERE `id`='1'

The girls name - Ann 
The girls surname - AnnS
The girls number - 123
Is the girl married? - No 
```

//-/

```
SELECT * FROM `girls` WHERE `id`='2'

The girls name - Ann
The girls surname - AnnS
Is the girl married? - No 
```

*在不使服务器超载的情况下如何更容易做到（表中有大约 130 行）？*

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-28T23:53:48.387

一次全选

```
$sql = "select * from girls"; 
```

然后遍历 php 中的结果集

```
$result = mysql_query($mysql);

while ($row = mysql_fetch_array($result, MYSQL_ASSOC)) {
    echo "The girls name - ".$row['name'].";
     //....
} 
```

# python - 如何在 Python 中找到开放阅读框

> ID：13114246
> 
> 赞同：13
> 
> 时间：2012-10-28T23:49:52.740
> 
> 标签：python, python-3.x, python-2.7, biopython

我正在使用 Python 和正则表达式来查找`ORF`（开放阅读框）。

查找子字符串 仅由以下字母`ATGC`（无空格或换行符）组成的字符串：

以 开头`ATG`，以`TAG`or结尾`TAA`，`TGA`并且应该考虑从第一个字符开始的顺序，然后是第二个字符，然后是第三个字符：

```
Seq= "CCTCAGCGAGGACAGCAAGGGACTAGCCAGGAGGGAGAACAGAAACTCCAGAACATCTTGGAAATAGCTCCCAGAAAAGC
AAGCAGCCAACCAGGCAGGTTCTGTCCCTTTCACTCACTGGCCCAAGGCGCCACATCTCCCTCCAGAAAAGACACCATGA
GCACAGAAAGCATGATCCGCGACGTGGAACTGGCAGAAGAGGCACTCCCCCAAAAGATGGGGGGCTTCCAGAACTCCAGG
CGGTGCCTATGTCTCAGCCTCTTCTCATTCCTGCTTGTGGCAGGGGCCACCACGCTCTTCTGTCTACTGAACTTCGGGGT
GATCGGTCCCCAAAGGGATGAGAAGTTCCCAAATGGCCTCCCTCTCATCAGTTCTATGGCCCAGACCCTCACACTCAGAT
CATCTTCTCAAAATTCGAGTGACAAGCCTGTAGCCCACGTCGTAGCAAACCACCAAGTGGAGGAGCAGCTGGAGTGGCTG
AGCCAGCGCGCCAACGCCCTCCTGGCCAACGGCATGGATCTCAAAGACAACCAACTAGTGGTGCCAGCCGATGGGTTGTA
CCTTGTCTACTCCCAGGTTCTCTTCAAGGGACAAGGCTGCCCCGACTACGTGCTCCTCACCCACACCGTCAGCCGATTTG
CTATCTCATACCAGGAGAAAGTCAACCTCCTCTCTGCCGTCAAGAGCCCCTGCCCCAAGGACACCCCTGAGGGGGCTGAG
CTCAAACCCTGGTATGAGCCCATATACCTGGGAGGAGTCTTCCAGCTGGAGAAGGGGGACCAACTCAGCGCTGAGGTCAA
TCTGCCCAAGTACTTAGACTTTGCGGAGTCCGGGCAGGTCTACTTTGGAGTCATTGCTCTGTGAAGGGAATGGGTGTTCA
TCCATTCTCTACCCAGCCCCCACTCTGACCCCTTTACTCTGACCCCTTTATTGTCTACTCCTCAGAGCCCCCAGTCTGTA
TCCTTCTAACTTAGAAAGGGGATTATGGCTCAGGGTCCAACTCTGTGCTCAGAGCTTTCAACAACTACTCAGAAACACAA
GATGCTGGGACAGTGACCTGGACTGTGGGCCTCTCATGCACCACCATCAAGGACTCAAATGGGCTTTCCGAATTCACTGG
AGCCTCGAATGTCCATTCCTGAGTTCTGCAAAGGGAGAGTGGTCAGGTTGCCTCTGTCTCAGAATGAGGCTGGATAAGAT
CTCAGGCCTTCCTACCTTCAGACCTTTCCAGATTCTTCCCTGAGGTGCAATGCACAGCCTTCCTCACAGAGCCAGCCCCC
CTCTATTTATATTTGCACTTATTATTTATTATTTATTTATTATTTATTTATTTGCTTATGAATGTATTTATTTGGAAGGC
CGGGGTGTCCTGGAGGACCCAGTGTGGGAAGCTGTCTTCAGACAGACATGTTTTCTGTGAAAACGGAGCTGAGCTGTCCC
CACCTGGCCTCTCTACCTTGTTGCCTCCTCTTTTGCTTATGTTTAAAACAAAATATTTATCTAACCCAATTGTCTTAATA
ACGCTGATTTGGTGACCAGGCTGTCGCTACATCACTGAACCTCTGCTCCCCACGGGAGCCGTGACTGTAATCGCCCTACG
GGTCATTGAGAGAAATAA" 
```

我试过的：

```
# finding the  stop codon here 

def stop_codon(seq_0):

        for i in range(0,len(seq_0),3):
            if (seq_0[i:i+3]== "TAA" and i%3==0) or (seq_0[i:i+3]== "TAG" and i%3==0) or (seq_0[i:i+3]== "TGA" and i%3==0) :
                a =i+3

                break

            else:
                a = None

# finding the start codon here 

startcodon_find =[m.start() for m in re.finditer('ATG', seq_0)] 
```

我怎样才能找到一种方法来检查起始密码子，然后找到第一个终止密码子。随后找到下一个起始密码子和下一个终止​​密码子。

我希望将其运行三帧。如前所述，三帧将序列的第一个、第二个和第三个字符作为开始。

此外，序列需要分成 3 的小部分。它应该是这样的：

```
ATG TTT AAA ACA AAA TAT TTA TCT AAC CCA ATT GTC TTA ATA ACG CTG ATT TGA 
```

任何帮助将不胜感激。

我的最终答案：

```
def orf_find(st0):

    seq_0=""
    for i in range(0,len(st0),3):
        if len(st0[i:i+3])==3:
            seq_0 = seq_0 + st0[i:i+3]+ " "

    ms_1 =[m.start() for m in re.finditer('ATG', seq_0)]
    ms_2 =[m.start() for m in re.finditer('(TAA)|(TAG)|(TGA)', seq_0)]

    def get_next(arr,value):
        for a in arr:
            if a > value:
                return a
        return -1

    codons = []
    start_codon=ms_1[0]
    while (True):
        stop_codon = get_next(ms_2,start_codon)
        if stop_codon == -1:
            break
        codons.append((start_codon,stop_codon))
        start_codon = get_next(ms_1,stop_codon)
        if start_codon==-1:
            break

    max_val = 0
    selected_tupple = ()
    for i in codons:
        k=i[1]-i[0]
        if k > max_val:
            max_val = k
            selected_tupple = i

    print "selected tupple is ", selected_tupple

    final_seq=seq_0[selected_tupple[0]:selected_tupple[1]+3]

    print final_seq
    print "The longest orf length is " + str(max_val)

output_file = open('Longorf.txt','w')
output_file.write(str(orf_find(st0)))

output_file.close() 
```

上面的 write 函数不能帮助我将内容写入文本文件。我进去的都是NONE..为什么会出现这个错误..有人可以帮忙吗？

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2014-07-30T12:24:57.707

如果你想手动编码：

```
import re
from string import maketrans

pattern = re.compile(r'(?=(ATG(?:...)*?)(?=TAG|TGA|TAA))')

def revcomp(dna_seq):
    return dna_seq[::-1].translate(maketrans("ATGC","TACG"))

def orfs(dna):
    return set(pattern.findall(dna) + pattern.findall(revcomp(dna)))

print orfs(Seq) 
```

* * *

## 回答 #2

> 赞同：9
> 
> 时间：2012-10-29T00:06:56.457

正如您已将其标记为 Biopython，我想您知道 Biopython。你检查过文档吗？[http://biopython.org/DIST/docs/tutorial/Tutorial.html#htoc231](http://biopython.org/DIST/docs/tutorial/Tutorial.html#htoc231)可能会有所帮助。

我稍微调整了上面链接中的代码以处理您的序列：

```
from Bio.Seq import Seq

seq = Seq("CCTCAGCGAGGACAGCAAGGGACTAGCCAGGAGGGAGAACAGAAACTCCAGAACATCTTGGAAATAGCTCCCAGAAAAGCAAGCAGCCAACCAGGCAGGTTCTGTCCCTTTCACTCACTGGCCCAAGGCGCCACATCTCCCTCCAGAAAAGACACCATGAGCACAGAAAGCATGATCCGCGACGTGGAACTGGCAGAAGAGGCACTCCCCCAAAAGATGGGGGGCTTCCAGAACTCCAGGCGGTGCCTATGTCTCAGCCTCTTCTCATTCCTGCTTGTGGCAGGGGCCACCACGCTCTTCTGTCTACTGAACTTCGGGGTGATCGGTCCCCAAAGGGATGAGAAGTTCCCAAATGGCCTCCCTCTCATCAGTTCTATGGCCCAGACCCTCACACTCAGATCATCTTCTCAAAATTCGAGTGACAAGCCTGTAGCCCACGTCGTAGCAAACCACCAAGTGGAGGAGCAGCTGGAGTGGCTGAGCCAGCGCGCCAACGCCCTCCTGGCCAACGGCATGGATCTCAAAGACAACCAACTAGTGGTGCCAGCCGATGGGTTGTACCTTGTCTACTCCCAGGTTCTCTTCAAGGGACAAGGCTGCCCCGACTACGTGCTCCTCACCCACACCGTCAGCCGATTTGCTATCTCATACCAGGAGAAAGTCAACCTCCTCTCTGCCGTCAAGAGCCCCTGCCCCAAGGACACCCCTGAGGGGGCTGAGCTCAAACCCTGGTATGAGCCCATATACCTGGGAGGAGTCTTCCAGCTGGAGAAGGGGGACCAACTCAGCGCTGAGGTCAATCTGCCCAAGTACTTAGACTTTGCGGAGTCCGGGCAGGTCTACTTTGGAGTCATTGCTCTGTGAAGGGAATGGGTGTTCATCCATTCTCTACCCAGCCCCCACTCTGACCCCTTTACTCTGACCCCTTTATTGTCTACTCCTCAGAGCCCCCAGTCTGTATCCTTCTAACTTAGAAAGGGGATTATGGCTCAGGGTCCAACTCTGTGCTCAGAGCTTTCAACAACTACTCAGAAACACAAGATGCTGGGACAGTGACCTGGACTGTGGGCCTCTCATGCACCACCATCAAGGACTCAAATGGGCTTTCCGAATTCACTGGAGCCTCGAATGTCCATTCCTGAGTTCTGCAAAGGGAGAGTGGTCAGGTTGCCTCTGTCTCAGAATGAGGCTGGATAAGATCTCAGGCCTTCCTACCTTCAGACCTTTCCAGATTCTTCCCTGAGGTGCAATGCACAGCCTTCCTCACAGAGCCAGCCCCCCTCTATTTATATTTGCACTTATTATTTATTATTTATTTATTATTTATTTATTTGCTTATGAATGTATTTATTTGGAAGGCCGGGGTGTCCTGGAGGACCCAGTGTGGGAAGCTGTCTTCAGACAGACATGTTTTCTGTGAAAACGGAGCTGAGCTGTCCCCACCTGGCCTCTCTACCTTGTTGCCTCCTCTTTTGCTTATGTTTAAAACAAAATATTTATCTAACCCAATTGTCTTAATAACGCTGATTTGGTGACCAGGCTGTCGCTACATCACTGAACCTCTGCTCCCCACGGGAGCCGTGACTGTAATCGCCCTACGGGTCATTGAGAGAAATAA")

table = 1
min_pro_len = 100

for strand, nuc in [(+1, seq), (-1, seq.reverse_complement())]:
    for frame in range(3):
        for pro in nuc[frame:].translate(table).split("*"):
            if len(pro) >= min_pro_len:
                print "%s...%s - length %i, strand %i, frame %i" % (pro[:30], pro[-3:], len(pro), strand, frame) 
```

ORF 也被翻译。您可以选择不同的翻译表。查看[http://biopython.org/DIST/docs/tutorial/Tutorial.html#sec:translation](http://biopython.org/DIST/docs/tutorial/Tutorial.html#sec:translation)

**编辑：**代码说明：

在顶部，我从您的字符串中创建了一个序列对象。注意`seq = Seq("ACGT")`. 两个 for 循环创建了 6 个不同的帧。内部 for 循环根据选择的翻译表翻译每一帧，并返回一个氨基酸链，其中每个终止密码子编码为`*`。该`split`函数拆分此字符串，删除这些占位符，从而生成可能的蛋白质序列列表。通过设置 min_pro_len，您可以定义要检测的蛋白质的最小氨基酸链长度。1是标准表。查看[http://www.ncbi.nlm.nih.gov/Taxonomy/Utils/wprintgc.cgi#SG1](http://www.ncbi.nlm.nih.gov/Taxonomy/Utils/wprintgc.cgi#SG1)在这里您可以看到起始密码子`AUG`（等于`ATG`）和结束密码子（核苷酸序列中的 *）是`TAA`, `TAG`,和`TGA`，就像你想要的那样。您还可以使用不同的转换表。

当你添加

```
print nuc[frame:].translate(table) 
```

在第二个 for 循环中，您会得到如下内容：

```
PQRGQQGTSQEGEQKLQNILEIAPRKASSQPGRFCPFHSLAQGATSPSRKDTMSTESMIRDVELAEEALPQKMGGFQNSRRCLCLSLFSFLLVAGATTLFCLLNFGVIGPQRDEKFPNGLPLISSMAQTLTLRSSSQNSSDKPVAHVVANHQVEEQLEWLSQRANALLANGMDLKDNQLVVPADGLYLVYSQVLFKGQGCPDYVLLTHTVSRFAISYQEKVNLLSAVKSPCPKDTPEGAELKPWYEPIYLGGVFQLEKGDQLSAEVNLPKYLDFAESGQVYFGVIAL*REWVFIHSLPSPHSDPFTLTPLLSTPQSPQSVSF*LRKGIMAQGPTLCSELSTTTQKHKMLGQ*PGLWASHAPPSRTQMGFPNSLEPRMSIPEFCKGRVVRLPLSQNEAG*DLRPSYLQTFPDSSLRCNAQPSSQSQPPSIYICTYYLLFIYYLFICL*MYLFGRPGCPGGPSVGSCLQTDMFSVKTELSCPHLASLPCCLLFCLCLKQNIYLTQLS**R*FGDQAVATSLNLCSPREP*L*SPYGSLREI 
```

（注意星号位于终止密码子位置）

**编辑：回答你的第二个问题：**

您必须返回要写入文件的字符串。创建一个输出字符串并在函数末尾返回它：

```
output = "selected tupple is " + str(selected_tupple) + "\n"
output += final_seq + "\n"
output += "The longest orf length is " + str(max_val) + "\n"
return output 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2021-11-12T19:30:30.407

以类似的方式工作：

```
#!/usr/bin/python3

import re

pattern = re.compile(r'(?=(ATG(?:...)*?)(?=TAG|TGA|TAA))')

Seq= """CATGCTCAGCGAGGACAGCAAGGGCCCATTTACAGGAGCATAGTAA"""

revcompseq = Seq[::-1].maketrans("ATGC", "TACG") #reverse complement

print (pattern.findall(Seq)) #forward search
print (pattern.findall(Seq[::-1].translate(revcompseq))) #backward search 
```

它通过这个小演示序列为您提供以下结果：

```
['ATGCTCAGCGAGGACAGCAAGGGCCCATTTACAGGAGCA']
['ATGCTCCTG', 'ATGGGCCCTTGCTGTCCTCGC'] 
```

# objective-c - 如何在 ios6 #ios 中为常用短语制作自定义键盘快捷键

> ID：13114248
> 
> 赞同：2
> 
> 时间：2012-10-28T23:50:01.280
> 
> 标签：objective-c, ios, ios5, ios6

我是 iOS 开发的新手。我很难找到合适的资源来为我的应用程序自定义键盘快捷键。我知道在 ios 5 中已经开发了它。但我想我想为只在我的应用程序中工作的常用短语有一个自定义键盘快捷键。

所以请帮帮我..

我也想知道如何控制整个应用程序的字体大小？使用一个标签很容易做到。我的意思是当用户使用 UISlider 为一个标签更改字体大小时，我如何为每个文本框、标签、表格视图控制器等应用更改。

另外，在这个[通过app在键盘设置中添加快捷方式？](https://stackoverflow.com/questions/9080607/add-shortcut-in-keyboard-settings-through-app)

如果我必须使用`UITextChecker`，有什么方法可以制作自己的字典来从核心数据中检索数据？

任何帮助将不胜感激！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-29T00:43:14.327

三个问题合二为一，哇。那么让我们开始吧：

**自定义键盘快捷键：**回顾您的功能...您想在您的应用程序中拥有自己的文本替换块吗？比如将文本替换为*brb*就*可以了*？如果是这样，我建议使用字典，例如：

```
NSDictionary replacement = [NSDictionary dictionaryWithObjectsAndKeys:@"be right back",@"brb",@"see you",@"cu",nil]; 
```

之后，您可以遍历每个条目，替换文本框中的文本：

```
NSString text = @"Hello. brb... cu";
for(NSString* key in [replacement allKeys])
    text = [text stringByReplacingOccurrencesOfString:key withString:[replacement valueForKey:key]]; 
```

**字体大小控制：**这里有两个想法。第一个是在您的任何类（例如您的 AppDelegate 类）中创建一个名为 fontScale（类型 CGFloat）的公共属性。从 iOS 6 开始，您可以将`minimumFontScale`属性设置为所有文本字段/框，如下所示：

```
textField.minimumFontScale = [[UIApplication sharedApplication] delegate].fontScale; 
```

我的第二个想法是继承 UITextField/View 并使用全局存储的字体大小在 init 方法中设置字体大小。

**Core Data 中的字典**：请参阅[此处](https://stackoverflow.com/questions/1562676/best-practice-array-dictionary-as-a-core-data-entity-attribute)。

# scala - 在 Scala 中使用 Slick 库获取自动增量值

> ID：13114255
> 
> 赞同：17
> 
> 时间：2012-10-28T23:50:59.697
> 
> 标签：scala, slick

如何获取使用 Slick 插入的记录的自动递增值？以下代码打印 1111。我本来希望它打印 1234

```
import scala.slick.driver.H2Driver.simple._

object TestMappedTable extends App{
    case class User(id: Option[Int], first: String, last: String)

    object Users extends Table[User]("users") {
        def id = column[Int]("id", O.PrimaryKey, O.AutoInc)
        def first = column[String]("first")
        def last = column[String]("last")
        def * = id.? ~ first ~ last <> (User, User.unapply _)
    }

  implicit val session = Database.forURL("jdbc:h2:mem:test1", driver = "org.h2.Driver").createSession()
  session.withTransaction{
    Users.ddl.create

    print(Users.insert(User(None, "Jack", "Green" )))
    print(Users.insert(User(None, "Joe", "Blue" )))
    print(Users.insert(User(None, "John", "Purple" )))
    print(Users.insert(User(None, "Jim", "Yellow" )))
  }
} 
```

我正在为 Scala 2.10.0-RC1 使用 Slick 0.11.2

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-10-29T01:40:09.290

您可以像这样检索生成的值。

向对象添加`autoInc`方法。`Users`

> def autoInc = id.? ~ first ~ last <> (User, User.unapply _) 返回 id

改为使用`Users.autoInc.insert`。

> 打印（Users.autoInc.insert（用户（无，“杰克”，“绿色”）））

也可以看看：

[https://github.com/slick/slick/issues/10](https://github.com/slick/slick/issues/10)

[https://github.com/slick/slick/commit/09a65a8e88a0363412e218dc5c06023b69809649](https://github.com/slick/slick/commit/09a65a8e88a0363412e218dc5c06023b69809649)

* * *

## 回答 #2

> 赞同：9
> 
> 时间：2014-12-05T10:55:01.513

最新版本的 Slick (2.1.0) 会自动[忽略自动递增的 id](http://slick.typesafe.com/doc/2.1.0/queries.html#inserting)，文档演示了如何检索 id：

```
val userWithId =
  (users returning users.map(_.id)
         into ((user,id) => user.copy(id=Some(id)))
  ) += User(None, "Stefan", "Zeiger") 
```

这是完整的内容，然后将检索到的值插入回要添加到表中的对象中。如果您只想掌握 id 本身：

```
val userId =
  (users returning users.map(_.id)) += User(None, "Stefan", "Zeiger") 
```

两个代码片段均取自官方文档。对于从未使用过早期版本的 Slick 的新手（比如我）来说，这个问题似乎需要更新。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-12-11T04:53:56.023

根据[SLICK Inserting document](http://slick.typesafe.com/doc/1.0.1/lifted-embedding.html#inserting)，您应该定义一个方法，`forInsert`如下所示：

```
def forInsert = first ~ last <> (
    { t =>
        User(None, t._1, t._2)},
    { (u: User) =>
        Some((u.first, u.last))
    }) returning id 
```

要获得结果：

```
def save(user: User): User = {
    val id = users.forInsert.insert(user)
    new User(Some(id), user.first, user.last)
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2015-08-31T12:49:21.083

对我来说，以下来源有效（Slick 3.0.2）

```
class Track(tag: Tag)
   extends Table[(Int, String, String)](tag, "TRACK") {
   // This is the primary key column:
   def id: Rep[Int] = column[Int]("ID", O.PrimaryKey, O.AutoInc)
   def artist: Rep[String] = column[String]("ARTIST")
   def name: Rep[String] = column[String]("NAME")

   def * : ProvenShape[(Int, String, String)] =
     (id, artist, name)
} 
```

# mysql - C MySQL API 准备好的语句限制

> ID：13114256
> 
> 赞同：0
> 
> 时间：2012-10-28T23:51:05.610
> 
> 标签：mysql, c, api, prepared-statement, bind

我正在尝试在用 C 编写的 CGI 脚本中构建 SQL 查询。用户在查询页面时传递了某种参数，脚本需要查询：

```
SELECT `name`, `address`, `phone_number` FROM `restaurants` WHERE `name` LIKE '%{parameter}%' 
```

由于转义和安全问题，我显然不能将 {parameter} 替换为 %s 和 sprintf 为字符串。

因此，我构建了一个准备好的语句：

```
const char * statement = "SELECT `name`, `address`, `phone_number` FROM `restaurants` WHERE `name` LIKE '%?%'"; 
```

最终发生的是我的问号没有被解析并且绑定失败。当我将语句的结尾更改为“ `name`LIKE ？”时，这很有效，除了我丢失了包含该术语而不是等于它的结果，这很糟糕。

是否有可能解决这个问题，并且仍然可以正确、安全地在字符串中使用 LIKE 和参数构造 SQL 语句？

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-29T00:08:36.520

尝试在查询中使用，并在*参数*字符串`LIKE ?`前面添加/附加- 我认为这应该可以工作（无论如何它都是通过 PHP api 实现的，它可能在后台使用相同的库）。*`%`*

 *在 PHP 中看到同样的问题：[如何使用 LIKE 语句创建 PDO 参数化查询？](https://stackoverflow.com/questions/583336/how-do-i-create-a-pdo-parameterized-query-with-a-like-statement-in-php)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-29T00:01:41.457

使用 php 和 mysli 也存在同样的问题。那里的技巧是使用sql函数concat，例如`LIKE CONCAT('%',?,'%')`也应该在C中工作..

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2012-10-29T00:02:36.103

为什么不使用 strcat 函数构建一个新的查询字符串呢？ [http://home.fhtw-berlin.de/~junghans/cref/MAN/strcat.htm](http://home.fhtw-berlin.de/~junghans/cref/MAN/strcat.htm) 它应该可以解决您的问题。

//编辑：例如：

```
char *cmd = "SELECT `name`, `address`, `phone_number` FROM `restaurants` WHERE `name` LIKE '%":
char *cmdEnd = "%'";

// concat strings
strncat(cmd, parameter, strlen(parameter);
strncat(cmt,cmdEnd); 
```*

# c++ - 计算数组中每个连续整数的总和

> ID：13114258
> 
> 赞同：0
> 
> 时间：2012-10-28T23:51:10.090
> 
> 标签：c++, arrays, for-loop, multidimensional-array

我有一个如下所示的数组（[2][10] 大小）：

5 | 13 | 12 | 2 | 7 | 12 | 3 | 1 | 4 | 5
1 | **10 | 5 | 1 | 14| 6 | 4 | 1 | 7** | 2
4 | 9 | 17 | 5 | 6 | 2 | **7 | 21 | 8** | 1

用户将输入一个数字，代码将计算连续数字的总和，并将返回起始行和列。

例如：输入 = 48，返回行 = 1，列 = 1
输入 = 36，返回行 = 2，列 = 6

我的示例代码只返回“完成”而不是行 = 0，列 = 1。怎么了？

```
int sum;
int column;
int row;
bool situ = false;
int number = 12;
int puzzle[] = { (4,6,5,1,2), (3,5,6,7,8) };

for(int i=0; i<2; i++)
{
    sum = 0;
    for(int j=0; j<6; j++)
    {
        sum = 0;
        for(int k=j; k<6; k++)
        {
            sum += puzzle[j];
            if( number == sum && !situ)
            {
                row = i;
                column = k;
                cout << "row = " << i << endl;
                cout << "column = " << j << endl;

            }
            if( !situ)
                break;
        }
        if( !situ)
            break;
    }
    if( !situ)
        break;
}
cout << "finished"; 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-29T00:54:56.413

您的

```
if( !situ)
    break; 
```

陈述是一个问题。您初始化`situ`并`false`永远不会更改它。因此，您总是在第一个循环之后中断。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-10-25T08:48:50.373

```
 #include<iostream>

using namespace std;
int main()
{
int sum;
int column;
int row;
bool situ = false;
int number = 12;
int puzzle[2][10] = { {4,6,5,1,2}, {3,5,6,7,8} };

for(int i=0; i<2; i++)
{
    sum = 0;
    for(int j=0; j<5; j++)
    {
        sum = 0;
        for(int k=j; k<5; k++)
        {
            sum += puzzle[i][k];
            if( number == sum && !situ)
            {
                row = i;
                column = k;
                cout << "row = " << i << endl;
                cout << "column = " << j << endl;

            }
     //       if( !situ)
    //            break;
        }
 //       if( !situ)
//            break;
    }
 //   if( !situ)
//        break;
}

cout << "finished";
}enter code here 
```

# css - 更多的 CSS，更少的 HTML？

> ID：13114260
> 
> 赞同：2
> 
> 时间：2012-10-28T23:51:20.330
> 
> 标签：css, performance, html

哪个性能更好？

```
<a class="btn loginbtn" href="#">Login</a>​

.btn {
    background: #555 
}
.loginbtn {
    padding: 10px
}​ 
```

**或者**

```
<a class="loginbtn" href="#">Login</a>​

.btn,.loginbtn {
    background: #555  
}
.loginbtn {
    padding: 10px     
}​ 
```

由于我的 CSS 将被缓存，我认为第二个会更好。

请帮帮我。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-29T00:05:25.210

您可以计算由文件大小差异引起的平均性能差异，即获取更多 TCP/IP 包所需的时间乘以由于该更改而发生的概率（即包大小除以添加的字符数）。

你可能会得到类似的东西`10 ms * 1/1000`，这会给你`10 µs`。

这是一个很小的性能差异，以至于您必须多次制作相同的东西才能引起注意。

因此，您应该使用更清晰、更易于维护的那个。

我个人会选择第一个选项。如果从类名到规则只有一条路径可以遵循，而不是让一个类分散在多个规则中，我发现更容易查看应用于元素的内容。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-29T00:15:03.933

两者之间的差异将非常微不足道，我会更关心代码可维护性和*可能* [选择器性能](https://stackoverflow.com/a/11218699/1081234)。

如果您真的处于从 html 中删除的单个字节的好处加起来很重要的位置，您可能需要检查支持 CSS 类重命名的[闭包样式表](http://code.google.com/p/closure-stylesheets/)等。

# jquery - jQuery：在模态窗口中使用 jQuery DataTables 时出错

> ID：13114262
> 
> 赞同：0
> 
> 时间：2012-10-28T23:51:39.457
> 
> 标签：jquery, datatable, modal-dialog

我在表单中有一个按钮，按下时会显示一个包含 jQuery DataTable 的模式窗口，我可以搜索、导航或分页并显示 10 或 20 个条目，但是当我按下任何 TR 以获取其中每个 TD 的信息时TR 并将此信息放在表单中的 3 个元素中并关闭模式窗口... 可以，但如果我再次按下按钮以打开带有数据表的模式窗口、搜索功能、显示更多条目或分页不再起作用

**创建数据表**

```
$('#tableResults').dataTable({
    "sPaginationType" : "full_numbers"
}); 
```

**执行模态窗口**

```
$('#button').click(function() {
        $("#divModal").modal({onClose: function (dialog) {
              dialog.container.fadeOut('slow', function () {
                    $.modal.close();
              });
        }});
    }); 
```

**事件点击 TR**

```
$('#tableResults tr:gt(0)').live('click', function() {  
        name = $(this).closest('tr').find('td:eq(0)').text();
        lastname = $(this).closest('tr').find('td:eq(1)').text();
        email = $(this).closest('tr').find('td:eq(2)').text();

        $('#name').text("Name: "+name);
        $('#lastname').text("Last Name: "+lastname);
        $('#email').text("Email: "+email);
        $.modal.close();
    }); 
```

我希望我提前解释并感谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-29T01:36:05.893

Simplemodal 文档说：

> 默认情况下，SimpleModal 将克隆您传入的数据元素。当对话框关闭时，克隆的、未更改的数据元素将重新插入到原始位置的 DOM 中。如果persist 选项为真，SimpleModal 将“重新插入”原始元素，更改保持不变。如果您使用 onClose 回调，则需要调用 $.modal.close(); （请参阅上面选项和回调部分中的 onClose）。

和

> **persist [Boolean:false]** 跨模式调用持久化数据？仅用于现有的 DOM 元素。如果为真，数据将在模态调用中保持，如果为假，数据将恢复到其原始状态。

所以诀窍似乎是`persist: true`在 Simplemodal 选项中进行设置。

```
$('#button').click(function() {
    $("#divModal").modal({
        persist: true,
        onClose: function (dialog) {
            dialog.container.fadeOut('slow', function () {
                $.modal.close();
            });
        }
    });
}); 
```

# git - 通过 git 将密码传递给 libcurl？

> ID：13114268
> 
> 赞同：5
> 
> 时间：2012-10-28T23:52:22.877
> 
> 标签：git, https, libcurl

环境：Fedora 15 x64（是的，我们正在远离它），git 1.7.11.1。

我们遇到了 git clone 的问题，该问题在 https 存储库上失败，因为客户端默认情况下未启用 Git 服务器使用的密码。

我们设法用普通的“curl -v”（curl 7.21.3，但 git 似乎使用它自己的副本）复制了这个问题：

```
curl -v https://git.repo.com 
```

（内部服务器名称被替换）像 Git 一样失败，但是：

```
curl --cipher rsa_rc4_128_sha -v https://git.repo.com 
```

成功。

现在的问题是我们如何将这样的标志传递给 Git 使用的 libcurl。到目前为止，我还没有找到这样的方法（谷歌搜索了 libcurl、git，查看了 Git 和 libcurl 的来源）。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2014-01-21T10:26:02.800

不，为 libcurl 指定密码列表的选项称为[CURLOPT_SSL_CIPHER_LIST](http://curl.haxx.se/libcurl/c/curl_easy_setopt.html#CURLOPTSSLCIPHERLIST)但 git 不使用该选项。

您需要修改 git 源代码以引入此功能。不应该太难，也许你可以说服[git 项目](http://git-scm.com/)在未来接受这个改变！

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2018-01-02T22:38:24.847

# Git 支持选择 SSL 密码

由于 Git 版本 2.5.0（[请参阅发行说明](https://github.com/git/git/blob/master/Documentation/RelNotes/2.5.0.txt#L85)），您可以使用`http.sslCipherList`git 配置变量来执行此操作。如果您能够升级您的 Git 版本，这是通过 Git 将密码列表传递给 libcURL 的最佳方式。

该`http.sslCipherList`变量在 Git 的文档中描述如下：

> 协商 SSL 连接时使用的 SSL 密码列表。可用的密码取决于 libcurl 是针对 NSS 还是 OpenSSL 构建的，以及正在使用的加密库的特定配置。这在内部设置了`CURLOPT_SSL_CIPHER_LIST`选项；有关此列表格式的更多详细信息，请参阅[libcurl 文档。](https://curl.haxx.se/libcurl/c/CURLOPT_SSL_CIPHER_LIST.html)

## git 命令

要为 Git 全局设置密码列表，您将运行：

`git config --global http.sslCipherList "<List of Cipher Identifiers>"`

了解**cURL 接受的密码标识符根据 cURL 链接的 SSL 库而有所不同**，这一点**非常重要**！这使得此配置值在其链接的 SSL 库中不同的所有 cURL 安装之间不可移植。

 **此外，虽然我在下面链接了后端特定文档，**但只有关于密码标识符的 cURL 文档是可靠**的，因为 cURL 开发人员没有完美地重现每个后端的各种标识符，如[邮件列表线程](https://curl.haxx.se/mail/lib-2016-05/0093.html)中所述。

# 资源

*   [git config 部分`http.sslCipherList`](https://git-scm.com/docs/git-config#git-config-httpsslCipherList)
*   [CURLOPT_SSL_CIPHER_LIST 变量的 cURL 手册页](https://curl.haxx.se/libcurl/c/CURLOPT_SSL_CIPHER_LIST.html)
*   [所有后端的 cURL 密码（可靠）](https://curl.haxx.se/docs/ssl-ciphers.html)
*   [openSSL 后端支持的密码](https://www.openssl.org/docs/manmaster/man1/ciphers.html)
*   [NSS 后端支持的 mod_NSS 密码](https://pagure.io/mod_nss/blob/master/f/docs/mod_nss.html#_589)
*   [NSS 后端支持的 mod_SSL 密码](https://httpd.apache.org/docs/current/mod/mod_ssl.html#sslciphersuite)**

# plugins - wordpress 插件 - 如何更改发布日期时间？

> ID：13114270
> 
> 赞同：2
> 
> 时间：2012-10-28T23:52:44.890
> 
> 标签：plugins, wordpress

我有一个插件，我需要更改发布日期时间。我应该使用什么 WP 功能来做到这一点？

谢谢

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-28T23:56:28.160

您想使用`wp_update_post($post)`新`post_date`值 - [http://codex.wordpress.org/Function_Reference/wp_update_post](http://codex.wordpress.org/Function_Reference/wp_update_post)

```
$mypost = array();
$mypost['ID'] = 111; // the post ID you want to update
$mypost['post_date'] = $your_date; // uses 'Y-m-d H:i:s' format
wp_update_post($mypost); 
```

# java - 为什么我的程序没有正确检查列表是否已包含特定字符？

> ID：13114272
> 
> 赞同：1
> 
> 时间：2012-10-28T23:53:12.833
> 
> 标签：java

我正在创建一个类，它解析文件中的所有字符并查找每个字母的出现次数。

在一个步骤中，当我浏览添加字符的文件时，我检查字符列表是否已经包含我所在的特定字符。如果没有，它将其添加到列表中，出现值为 1，如果它已经包含它，则将出现值加 1。

但是，我下面的代码没有正确确定列表是否已经包含特定字符。

我正在使用 ArrayList，并且我知道我必须重写 CharProfile 类中的 equals 方法，我这样做了，以便让 contains() 使用的 equals() 方法正常工作。

覆盖 CharProfile 中的 equals 方法：

```
 @Override
    public boolean equals(Object o) {
        if (this.character == ((Character)o)) {
            return true;
        }
        else {
            return false;
        }
    } 
```

代码：

```
import java.util.*;
import java.io.*;

public class HuffmanCoder {
    public static void main(String[] args) throws IOException {
        Scanner keyboard = new Scanner(System.in);

        System.out.print("Please enter the name of the file to be read from: ");
        String fileName = keyboard.nextLine();

        File file = new File(fileName);
        Scanner inputFile = new Scanner(file);

        int charCount = 0;
        ArrayList<CharProfile> charOccurrences = new ArrayList<CharProfile>();

        while (inputFile.hasNext()) {
            // Grabs the next word in the file and converts it into a char array
            String word = inputFile.next();
            char[] wordArray = word.toCharArray();

            // Parses the word on a char-by-char basis
            for (int i = 0; i < wordArray.length; i++) {
                if (wordArray[i] != ' ') {
                    charCount++;

                    // Constructs the list of chars and their respective number of occurrences
                    if (!charOccurrences.contains(wordArray[i])) {
                        charOccurrences.add(new CharProfile(wordArray[i]));
                    }
                    else {
                        for (int j = 0; j < charOccurrences.size(); j++) {
                            if (charOccurrences.get(j).getCharacter() == wordArray[i]) {
                                charOccurrences.get(j).incremementOccurrences();
                                break;
                            }
                        }
                    }
                }
            }
        }

        // Figure out each char's probability
        for (int i = 0; i < charOccurrences.size(); i++) {
            System.out.println(charOccurrences.get(i).getCharacter());
        }
    }   
} 
```

完整的 CharProfile 类：

```
public class CharProfile {
    private char character;
    private int occurrences;
    private double probability;

    public CharProfile(char character) {
        this.character = character;
        occurrences = 1;
    }

    public void incremementOccurrences() {
        occurrences++;
    }

    public char getCharacter() {
        return character;
    }

    public void setCharacter(char character) {
        this.character = character;
    }

    public int getOccurrences() {
        return occurrences;
    }

    public void setOccurrences(int occurrences) {
        this.occurrences = occurrences;
    }

    public double getProbability() {
        return probability;
    }

    public void setProbability(double probability) {
        this.probability = probability;
    }

    public boolean equals(char character) {
        if (this.character == character) {
            return true;
        }
        else {
            return false;
        }
    }

    @Override
    public boolean equals(Object o) {
        if (this.character == ((Character)o)) {
            return true;
        }
        else if (this.character == ((Character)o).charValue()) {
            return true;
        }
        else {
            return false;
        }
    }
} 
```

简而言之：在检查列表是否已包含该字符时，它不会返回 true，而是似乎总是返回 false，从而导致文件中的每个字符都被添加到列表中，而它应该只是唯一的字符。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-28T23:56:28.950

这只是比较对象引用是否相同，并且实例`Character`不是`CharProfile`。

```
@Override
public boolean equals(Object o) {
    if (this.character == ((Character)o)) {
        return true;
    }
    else {
        return false;
    }
} 
```

您需要更改您的 equals 方法以接受实例`CharProfile`并比较其中的字符值，如下所示：

```
@Override
public boolean equals(Object o) {
    if(this.character == ((CharProfile)o).getCharacter()) {
        return true;
    }else {
        return false;
    }
} 
```

**编辑：**您的 equal 方法没有被调用，因为您将 char 传递给`contains`方法。

请将其更改为：

```
 // Constructs the list of chars and their respective number of occurrences
         CharProfile charProfile = new CharProfile(wordArray[i]);
         if (!charOccurrences.contains(charProfile)) {
              charOccurrences.add(charProfile);
         } 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-29T00:27:50.620

你犯了一个典型的错误：`==`混淆`equals()`.

在java中（不同于javascript）：

*   `==`测试两个操作数是否*是同一个实例*
*   `equals()`具有与 相同的默认行为`==`，但在实现时通常会测试两个操作数是否具有相同的*值*

如果你改变所有你`==`的`.equals()`问题应该得到解决。

您的`equals()`方法有太多代码 - 它可以用这个替换，它的作用*完全相同*：

```
@Override
public boolean equals(Object o) {
    return this.character.equals(o);
} 
```

但我会这样做，以处理所有合理的类型：

```
@Override
public boolean equals(Object o) {
    if (o instanceof Character) {
        return character.equals(o);
    }
    if (o instanceof CharProfile) {
        return character.equals(((CharProfile)o).character);
    }
    return false;
} 
```

此外，在覆盖时，`equals()`您还应该覆盖`hashCode()`以保持一致 - 即返回正在比较的值的 hashCode，如下所示：

```
@Override
public int hashCode() {
    return character.hashCode();
} 
```

# ms-access - 删除查询错误消息“无法从指定表中删除”

> ID：13114273
> 
> 赞同：1
> 
> 时间：2012-10-28T23:53:27.137
> 
> 标签：ms-access

我正在尝试对本地 Access 表运行此删除查询，但我收到错误消息

> 无法从指定表中删除

请为我提供正确的 SQL 以进行复制和粘贴。

非常感谢你，纳撒尼尔

```
DELETE RO.*, RO.STATUS, CO.ID, CO.PRINTED_DATE
FROM tmpReleasedOrders AS RO 
LEFT JOIN SYSADM_CUSTOMER_ORDER AS CO ON RO.orderID = CO.ID
WHERE (((RO.STATUS)="C" Or (RO.STATUS)="X")) OR (((CO.ID) Is Null)) OR (((CO.PRINTED_DATE) Is Null)); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-29T00:05:17.113

此查询依赖于 SYSADM_CUSTOMER_ORDER 在 ID 上具有唯一索引。

```
DELETE ro.*
FROM tmpReleasedOrders AS ro
LEFT JOIN SYSADM_CUSTOMER_ORDER AS CO 
ON RO.orderID = CO.ID
WHERE RO.STATUS="C" Or RO.STATUS="X" OR CO.ID Is Null OR CO.PRINTED_DATE Is Null 
```

如果您在 SYSADM_CUSTOMER_ORDER 上没有索引，则可以在这些行中使用一些内容：

```
DELETE tmpreleasedorders.*
FROM tmpreleasedorders
WHERE  status IN ( "c", "x" )
OR orderid IN (
   SELECT orderid
   FROM   tmpreleasedorders AS ro
   LEFT JOIN sysadm_customer_order AS CO
   ON RO.orderid = CO.id
   WHERE  CO.id IS NULL
   OR CO.printed_date IS NULL) 
```

# php - 从Arduino返回PHP串口数据

> ID：13114275
> 
> 赞同：15
> 
> 时间：2012-10-28T23:53:35.100
> 
> 标签：php, serial-port, arduino

我想知道是否有一种方法可以通过 PHP 完成读取我的串行端口 - 有效:-)

在练习我的 Arduino 技能时，我开发了一个简单的 LED 开/关草图。它通过在串行监视器中输入**或**关闭来工作**。**

下一步，我整理了一个网页作为 GUI 界面，点击链接并执行上面的开关功能。这个基于 Web 的 GUI 通过 PHP 工作。我正在使用[PHP SERIAL](http://www.phpclasses.org/browse/file/17926.html)类与我的 Arduino 使用的串行端口进行交互。

**问题是我需要找到一种从串口获取反馈的方法。使用 Arduino IDE 串行监视器，我可以看到我打印的消息以响应我的每个串行输入，并且我需要在我的 PHP 代码中检索相同的反馈。**

PHP Serial 类提供了一个**readPort()**函数，但我没有返回我的数据。

**更新[2]：**

阿杜诺：

```
const int greenPin = 2;
const int bluePin = 3;
const int redPin = 4;

int currentPin = 0; //current pin to be faded
int brightness = 0; //current brightness level

void setup(){
  Serial.begin(9600);

  pinMode(greenPin, OUTPUT);
  pinMode(bluePin, OUTPUT);
  pinMode(redPin, OUTPUT);
}

void loop(){
  //if there's any serial data in the buffer, read a byte
  if( Serial.available() > 0 ){
    int inByte = Serial.read();

      //respond only to the values 'r', 'g', 'b', or '0' through '9'
      if(inByte == 'r')
        currentPin = redPin;

      if(inByte == 'g')
        currentPin = greenPin;

      if(inByte == 'b')
        currentPin = bluePin;

      if(inByte >= '0' && inByte <= '9'){
        //map the incoming byte value to the range of the analogRead() command
        brightness = map(inByte, '0', '9', 0, 255);
        //set the current pin to the current brightness:
        analogWrite(currentPin, brightness);
      }

      Serial.print("Current Pin : ");
      Serial.println(currentPin);

      Serial.print("Brightness : ");
      Serial.println(brightness);

  }//close serial check

} 
```

PHP/HTML：

```
<?php
    require("php_serial.class.php");
// include("php_serial.class.php");

    // Let's start the class
    $serial = new phpSerial();

    // First we must specify the device. This works on both Linux and Windows (if
    // your Linux serial device is /dev/ttyS0 for COM1, etc.)
    $serial->deviceSet("/dev/ttyACM0");

    // Set for 9600-8-N-1 (no flow control)
    $serial->confBaudRate(9600); //Baud rate: 9600
    $serial->confParity("none");  //Parity (this is the "N" in "8-N-1")
    $serial->confCharacterLength(8); //Character length     (this is the "8" in "8-N-1")
    $serial->confStopBits(1);  //Stop bits (this is the "1" in "8-N-1")
    $serial->confFlowControl("none");

    // Then we need to open it
    $serial->deviceOpen();

    // Read data
    $read = $serial->readPort();
print "<pre>";
print_r($read);
print "</pre>";

    // Print out the data
    echo $read;
        // print exec("echo 'r9g9b9' > /dev/ttyACM0");
    print "RESPONSE(1): {$read}<br><br>";

    // If you want to change the configuration, the device must be closed.
    $serial->deviceClose();
?>

<?php
    if( isset($_REQUEST['LED']) )
        response();
?>

<form action='index.php' method='POST'>
    <select id='led' name='LED'>
        <option id='nil'>-</option>
        <option id='red'>RED</option>
        <option id='green'>GREEN</option>
        <option id='blue'>BLUE</option>
        <option id='all'>ALL</option>
    </select>
    <input type='submit' value='SET'>
</form>

<?php
    print "Hi, Earthlings!";

    function response(){
        $CMDString = "";
        $execute   = false;

        if( isset($_REQUEST['LED']) ){
                switch ($_REQUEST['LED']) {
                    case 'RED':
                        $CMDString = 'r9';
                        $execute = true;

        exec("echo 'r9g0b0' > /dev/ttyACM0");

                print "<br>FOUND: {$_REQUEST['LED']}";
                        break;
                    case 'GREEN':
                        $CMDString = 'g9';
                        $execute = true;
                print "<br>FOUND: {$_REQUEST['LED']}";
                        break;
                    case 'BLUE':
                        $CMDString = 'b9';
                        $execute = true;
                print "<br>FOUND: {$_REQUEST['LED']}";
                        break;
                    case 'ALL':
                        $CMDString = 'r9g9b9';
                        $execute = true;
                print "<br>FOUND: {$_REQUEST['LED']}";
                        break;
                    default:
                        print exec("echo 'r0g0b0' > /dev/ttyACM0");
                        $execute = false;
                        break;
                }

                if($execute){
                    print exec("echo '{$CMDString}' > /dev/ttyACM0");
                    print "<br><br>executing: {$CMDString}";
                }
        }
    }
?> 
```

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2013-01-26T19:53:37.620

我假设你在 linux 上工作。

首先设置你的串口：

```
stty -F /dev/ttyACM0 cs8 9600 ignbrk -brkint -imaxbel -opost -onlcr -isig -icanon -iexten -echo -echoe -echok -echoctl -echoke noflsh -ixon -crtscts 
```

然后你可以使用好的老式 fread/fwrite

```
$fp =fopen("/dev/ttyACM0", "w+");
if( !$fp) {
        echo "Error";die();
}

fwrite($fp, $_SERVER['argv'][1] . 0x00);
echo fread($fp, 10);

fclose($fp); 
```

你只需要记住一件事。**Arduino 将在每次连接时重新启动**。如果你不知道它会让你感到困惑。例如，如果您连接（fopen）并立即发送数据，Arduino 会因为它正在启动而错过它（这需要一两秒）。尝试睡眠，给它一些时间。如果要禁用重启，请在 GRD 到 RST 之间使用 10uF 电容。

祝你好运

附言。您可以使用“屏幕”进行故障排除

```
screen /dev/ttyACM0 9600 
```

发布关于使用 Arduino [http://systemsarchitect.net/connecting-php-with-arduino-via-serial-port-on-linux/](http://systemsarchitect.net/connecting-php-with-arduino-via-serial-port-on-linux/)设置 PHP 的帖子以及此处的另一个[http://systemsarchitect.net/arduino-and-php-串行通信与协议/](http://systemsarchitect.net/arduino-and-php-serial-communication-with-a-protocol/)。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-12-24T00:26:35.490

/dev/ttyUSB0 以用户 root 运行，如果您使用 apache 尝试 chown /dev/ttyUSB0 到 apache 或用户已登录。

```
$ sudo chown apache2:apache2 /dev/ttyACM0
OR
$ sudo chown yourusername:yourusername /dev/ttyACM0 
```

然后再试一次，或者尝试从 ubuntu 注销并以 root 用户身份登录。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-10-29T09:11:33.390

您可能正在尝试读取串行端口上何时没有数据。您需要实现[JavaScript](http://en.wikipedia.org/wiki/JavaScript)代码来调用可以定期读取的[PHP代码。](http://en.wikipedia.org/wiki/PHP)

当你有数据时，你应该处理它。

`readPort()`对我来说效果很好。如果波特率、奇偶校验等调整得当，那么读取串口应该没有问题。

这是使用 Arduino 库的示例。前段时间它对我有用：

```
<?php
    include "php_serial.class.php";

    // Let's start the class
    $serial = new phpSerial();

    // First we must specify the device. This works on both Linux and Windows (if
    // your Linux serial device is /dev/ttyS0 for COM1, etc.)
    $serial->deviceSet("/dev/ttyUSB0");

    // Set for 9600-8-N-1 (no flow control)
    $serial->confBaudRate(9600); //Baud rate: 9600
    $serial->confParity("none");  //Parity (this is the "N" in "8-N-1")
    $serial->confCharacterLength(8); //Character length     (this is the "8" in "8-N-1")
    $serial->confStopBits(1);  //Stop bits (this is the "1" in "8-N-1")
    $serial->confFlowControl("none");

    // Then we need to open it
    $serial->deviceOpen();

    // Read data
    $read = $serial->readPort();

    // Print out the data
    echo $read;

    // If you want to change the configuration, the device must be closed.
    $serial->deviceClose();
?> 
```

# java - 从java恢复Mysql转储：为什么它会挂起进程？

> ID：13114282
> 
> 赞同：2
> 
> 时间：2012-10-28T23:54:06.660
> 
> 标签：java, mysql, process, runtime, dump

我正在尝试从 Java 应用程序恢复 Mysql 转储。我正在使用这段代码：

```
 Runtime rt = Runtime.getRuntime();
                try {
                   comando = "mysql -u root -ppass -e \"source " + path + "\\sql\\backup.sql\" legapelis" ; 

                   Process proceso = rt.exec(comando);
                   System.out.println("ejecutando");
                   System.out.println(comando);

                   proceso.getInputStream().close();
                   proceso.getOutputStream().close();
                   proceso.getErrorStream().close();

                   completado = proceso.waitFor();
                   if (completado != 0) {
                       System.out.println("error");
                       addActionError(getText("backup.errcopia") + ": " + String.valueOf(completado));
                       consultarCopias();
                       return "error";
                   }
                   System.out.println("fin");

                } catch (Exception e) {
                    addActionError(e.getLocalizedMessage());
                    consultarCopias();
                    return "error";
                } 
```

但是这段代码打开的Mysql进程永远不会结束。它挂起，如果我杀死它，Mysql 服务将停止正常工作（我必须重新启动它）。我尝试了很多代码：关闭流，读取它......但结果相同。

有什么提示吗？

对不起，如果我的英语不是那么好。

谢谢

Ps：我尝试将 -v 选项添加到命令中以从输入流中读取它。它开始读取但随后又挂起（并且它没有完成读取命令的输出：它突然停止）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-29T00:00:52.673

JavaDoc 用于`Process`：

> 创建的子进程没有自己的终端或控制台。它所有的标准io（即stdin、stdout、stderr）操作都会通过三个流（getOutputStream()、getInputStream()、getErrorStream()）重定向到父进程。父进程使用这些流向子进程提供输入并从子进程获取输出。由于部分原生平台只为标准输入输出流提供有限的缓冲区大小，未能及时写入子进程的输入流或读取输出流可能会导致子进程阻塞，甚至死锁。

您需要从这些流中读取，而不是关闭它们。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-02T09:21:44.853

好吧，最后我改变了程序，因为我无法解决这个问题。现在，我阅读了 SQL 文件，并用句子创建了一个 ArrayList，然后我自己执行它们。

谢谢大家的支持。

# php - 图像卷积的高斯模糊

> ID：13114292
> 
> 赞同：0
> 
> 时间：2012-10-28T23:56:15.207
> 
> 标签：php, blur, gaussian, image-conversion

一段时间以来，我一直在尝试使用 PHP 中的以下代码来模糊一些文本：

```
$image = imagecreate(150,25);
$background = ImageColorAllocate($image, 255, 255, 255);
$foreground = ImageColorAllocate($image, 0, 0, 0);

ImageColorTransparent($image, $background);
ImageInterlace($image, false);

ImageTTFText($image, 20, 0, 0, 20, $foreground, "font.ttf", "some text");

$gaussian = array(array(1.0, 2.0, 1.0), array(2.0, 4.0, 2.0), array(1.0, 2.0, 1.0));
imageconvolution($image, $gaussian, 16, 0);

imagePNG($image) 
```

然而图像并没有模糊，它只是分辨率降低，变得颗粒状......[在这里演示......](http://www.jarbol.com/projects/eduRate/lib/draw.php)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-29T00:14:05.253

去掉`ImageColorTransparent($image, $background);`看看效果

例子

```
$image = imagecreate(150,25);
$background = ImageColorAllocate($image, 255, 255, 255);
$foreground = ImageColorAllocate($image, 0, 0, 0);

ImageInterlace($image, false);
ImageTTFText($image, 20, 0, 0, 20, $foreground, "verdana.ttf", "some text");

$gaussian = array(array(1.0,2.0,1.0),array(2.0,4.0,2.0),array(1.0,2.0,1.0));
imageconvolution($image, $gaussian, 16, 0);

header('Content-Type: image/png');
imagepng($image, null, 9); 
```

输出

![在此处输入图像描述](../Images/37562ceb1de26f073638fb074344aa46.png) ![在此处输入图像描述](../Images/b5be5d6d78819fea827f7d61c8d936be.png)

```
 ^ Before ^           ^ After ^ 
```

# c - 蒙蒂霍尔游戏：如何打印计算机打开的门

> ID：13114293
> 
> 赞同：1
> 
> 时间：2012-10-28T23:56:16.440
> 
> 标签：c, loops, random, printf, scanf

```
#include <stdio.h>
#include <time.h>

int main(void)
{
    static int games = 0;
    static int stayWins = 0;
    static int switchWins = 0;
    int chosenDoor;
    int remainingDoor;
    int revealedDoor;
    int winningDoor;
    int option;

    printf("Type 0 to stop choosing and print results:  ");

    srand (time(NULL));
    do
    {
    printf("Choose door 1, 2, or 3:  ");
    scanf("%d",&chosenDoor);

    if (chosenDoor==0)
        break;

    printf("Enter '1' for stay; Enter '2' for switch:");
    scanf("%d",&option);

    winningDoor = rand() % 3 + 1;
        do
        {
            revealedDoor = rand() % 3 + 1;
        } while (revealedDoor == chosenDoor || revealedDoor == winningDoor);

        do
        {
            remainingDoor = rand() % 3+1;
        } while (remainingDoor == chosenDoor || remainingDoor == revealedDoor);

        option = rand() % 2 + 1;
        if (option == 1)
        {
            if (chosenDoor == winningDoor)
            {
                printf("You win.\n");
                stayWins++;
            }
            else
            {
                printf("You lose.\n");
            }
        }
        if (option == 2)
        {
            chosenDoor = remainingDoor;
            if (chosenDoor == winningDoor)
            {
                printf("You win.\n");
                switchWins++;
            }
            else
            {
                printf("You lose.\n");
            }
        }
        games++;
    } while (chosenDoor!=0);

printf("Out of %d games, the contestant won %d times by staying with his/her original choice and won %d times by switching his/her choice.",games,stayWins,switchWins);

    return 0;
} 
```

这是运行 Monty Hall 游戏的代码，用户在其中从三扇门中选择一扇门。一扇门有奖，另外两扇是假的。用户选择门 1、2 或 3 并选择在程序打开其中一扇假门时是否切换门。

我怎样才能让程序打开一扇门，这扇门必须是后面没有奖品并且用户没有选择的门并**打印**它的决定。

这是打印的内容：

```
...
Choose door (1,2,3): 
Enter 1 for stay; 2 for switch: 
You win/lose.
... 
```

这是我要打印的内容：

```
...
Choose door (1,2,3): 
Door X has been opened to reveal a false door.
Enter 1 for stay; 2 for switch: 
You win/lose.
... 
```

我感谢您的所有帮助。谢谢你和欢呼！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-29T00:33:07.377

只需选择一扇随机门，如果门是所选门和/或奖品门，则增加或减少门号。

以 1,2,3,1,2,3,... 的顺序递增到下一个门：

```
door = door%3 + 1; 
```

递减：

```
door = (door + 1)%3 + 1; 
```

...或者只是增加两次。

# c - 原始终端模式 - 如何接受输入？

> ID：13114301
> 
> 赞同：4
> 
> 时间：2012-10-28T23:57:07.313
> 
> 标签：c, io, terminal

我有一个聊天客户端，它以原始终端模式接收输入，但我不知道在这种模式下处理输入。我需要知道两件事：

*   如何逐个字符地读取输入并显示它？我是否必须有某种读取循环，一次读取一个字符并将其存储在缓冲区中？
*   如果我希望我的服务器处理新行条目的输入，我是否必须在每个字符进入我的缓冲区时扫描它并查找`\n`？

此外，一个示例的逐字符读取循环刷新`\n`将非常棒。谢谢！

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-10-29T21:07:18.777

在 Windows 中有一个非常有用的函数 kbhit() 但不幸的是在 linux 中没有。为此可以有多种方法。我们将为 linux 创建自己的 kbhit() 方法。当在输入缓冲区中检测到某些东西时，kbhit() 将返回非零值，否则它将返回 0 并继续。简而言之，它是非阻塞的。只要结果为真，则调用 getch() 方法来获取该按下的键。

```
#include <stdio.h>
#include <termios.h>
#include <unistd.h>
#include <sys/types.h>
#include <sys/time.h>

void changemode(int);
int  kbhit(void);
int main(void)
{
  int ch;
  changemode(1);
  while ( !kbhit() );      // Waiting for some keyboard input.

  // something has been detected. now get that.
  ch = getchar();

  printf("\nGot %c\n", ch);

  changemode(0);
  return 0;
}

void changemode(int dir)
{
  static struct termios oldt, newt;

  if ( dir == 1 )
  {
    tcgetattr( STDIN_FILENO, &oldt);
    newt = oldt;
    newt.c_lflag &= ~( ICANON | ECHO );
    tcsetattr( STDIN_FILENO, TCSANOW, &newt);
  }
  else
    tcsetattr( STDIN_FILENO, TCSANOW, &oldt);
}

int kbhit (void) 
{
  struct timeval tv;
  fd_set rdfs;

  tv.tv_sec = 0;
  tv.tv_usec = 0;

  FD_ZERO(&rdfs);
  FD_SET (STDIN_FILENO, &rdfs);

  select(STDIN_FILENO+1, &rdfs, NULL, NULL, &tv);
  return FD_ISSET(STDIN_FILENO, &rdfs);

} 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-10-29T00:05:55.247

我为此推荐[GNU readline 库](http://en.wikipedia.org/wiki/GNU_readline)。它负责获取输入行的繁琐工作，并允许用户使用退格键、左右箭头等编辑行，并使用向上箭头调用旧命令，甚至使用 ^R 搜索旧命令，等。Readline 安装了典型的类 unix 发行版，如 linux，但如果你没有它，你可以在[这里找到它](ftp://ftp.cwru.edu/pub/bash/readline-6.2.tar.gz)

编辑：这是一个最小的 readline 示例：

```
#include <stdio.h>
#include <readline/readline.h>
#include <readline/history.h>

int main(int argc, char ** argv)
{
    while(1)
    {
        char * line = readline("> ");
        if(!line) break;
        if(*line) add_history(line);
        /* Do something with the line here */
    }
} 
```

使用 gcc -o test test.c -lreadline -lncurses 编译。

如果您不能使用 readline，getline 是一种替代方法：

```
#include <stdio.h>
int main()
{
    char * line = NULL;
    size_t len;
    while(getline(&line, &len, stdin) >= 0)
       printf("I got: %s", line);
} 
```

如果连 getline 都不可接受，您可以使用 fgets。它不会动态分配合适大小的缓冲区，所以太长的行会被截断。但至少它是标准C：

```
#include <stdio.h>
int main()
{
    char buf[1000];
    while(fgets(buf, sizeof(buf), stdin)
        printf("I got: %s, line);      
} 
```

# iphone - 旧版本的 iOS 用户可以浏览最新 iOS 独有的应用程序吗？（例如 iOS5 用户在 App Store 中查看 iOS6 应用程序）

> ID：13114302
> 
> 赞同：1
> 
> 时间：2012-10-28T23:57:34.127
> 
> 标签：iphone, ios, ipad, cocoa-touch

我打算让我的应用程序只发布 iOS6 版本。不过我很好奇，旧版本的 iOS 用户（iOS5 等）是否仍然能够在 App Store 中浏览和搜索我的应用程序？独占 iOS6 会限制我的曝光率吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-29T00:12:21.130

不会。如果您将目标部署操作系统设置为 6，则 5.1 或更早版本的用户在其设备上使用 App Store 应用程序时将看不到您的应用程序，因为 App Store 会根据目标操作系统进行过滤。但是，他们*将*能够在通过桌面上的 iTunes 浏览 App Store 时看到并下载它，但他们将无法在他们的设备上运行它。

我的建议：除非您的应用程序使用专为 iOS 6 提供的功能（例如 Passbook），否则您的应用程序的目标操作系统至少应为 5.1。我估计仍然有很多用户因为地图本身而对升级到 iOS 6 犹豫不决。

# clojure - `#^` 类型提示和 `^` 类型提示有什么区别？

> ID：13114305
> 
> 赞同：5
> 
> 时间：2012-10-28T23:58:10.103
> 
> 标签：clojure

我见过两种风格的类型提示，例如，`clojure-contrib.server-socket`写道：

```
(.close #^ServerSocket (:server-socket server)) 
```

Clojure 的 java-interop 文档仅`^`用于进行类型提示。

两者有什么区别吗？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-10-29T00:17:43.993

不推荐使用该`#^`语法以支持该`^`语法。请参阅[上一个问题](https://stackoverflow.com/questions/4245540/clojure-type-hints-syntax)。

# themes - Wordpress 将自定义 CSS 添加到样式表

> ID：13114307
> 
> 赞同：0
> 
> 时间：2012-10-28T23:59:02.223
> 
> 标签：themes, wordpress-theming

[我正在尝试使用http://codex.wordpress.org/Theme_Customization_API](http://codex.wordpress.org/Theme_Customization_API)提供的代码为 WP 主题创建主题选项部分（示例主题自定义类）

我添加了一些部分，修改了一些 CSS 元素，并且在 Theme Customizer 中一切正常。问题是当我按下保存和发布时，更改会直接写入 WP 主题的标题，我不喜欢它。

有没有办法修改该脚本以保存到样式表文件？

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-19T06:19:01.033

它保存到`wp_head`第 149 行。您可以注释掉该行并尝试如下操作：

```
$old = fopen(get_template_directory().'/style.css', a);
fwrite($old, array( 'MyTheme_Customize' , 'header_output' ));
fclose($old); 
```

# c# - 实体框架自动分配外键？

> ID：13114311
> 
> 赞同：3
> 
> 时间：2012-10-28T23:59:35.280
> 
> 标签：c#, entity-framework

我遇到了以下“问题”（它可能只是一个功能，但这将是一个很奇怪的功能）。使用 Entity Framework 5，当插入实体而不通过外键指定链接实体时，EF 会自动将值分配给相关实体（如果同时插入。

好吧，这不是很清楚，所以这里有一些重现行为的代码：

```
[TestClass]
public class TestEntityFramework
{
    [TestMethod]
    public void Test()
    {
        using (var context = new TestDataContext())
        {
            context.Foos.Add(new Foo { FooProp = "FooProp"});                
            context.Bars.Add(new Bar {BarProp = "BarProp"});                
            context.SaveChanges();
        }
    }       
}

public class Foo
{
    [Key]
    public int Id { get; set; }

    public string FooProp { get; set; }
}

public class Bar
{
    [Key]
    public int Id { get; set; }

    public int FooId { get; set; }
    [ForeignKey("FooId")]
    public virtual Foo Foo { get; set; }

    public string BarProp { get; set; }
}

public class TestDataContext : DbContext
{      
    public virtual IDbSet<Foo> Foos { get; set; }
    public virtual IDbSet<Bar> Bars { get; set; }        
} 
```

测试方法出奇地有效，没有冲突。

即使我没有指定，插入的 Bar 实体也会链接到同时插入的 Foo 实体。

但是，以下代码都引发了外键异常：

```
[TestMethod]
public void Test()
{
    using (var context = new TestDataContext())
    {
        context.Foos.Add(new Foo { FooProp = "FooProp"});
        context.SaveChanges();
        context.Bars.Add(new Bar {BarProp = "BarProp"});                
        context.SaveChanges();
    }
}

[TestMethod]
public void Test2()
{
    using (var context = new TestDataContext())
    {
        context.Foos.Add(new Foo { FooProp = "FooProp" });
        context.Foos.Add(new Foo { FooProp = "FooProp2" });                
        context.Bars.Add(new Bar { BarProp = "BarProp" });
        context.SaveChanges();
    }
} 
```

任何人都知道这种行为是否是预期的？有什么想法吗 ？

谢谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-29T00:31:32.260

我的猜测是，当您在保存之前创建它们时，它们的 ID 均为 0。当您创建 a`Bar`时，它`FooId`是 0，它“将它”“连接”到`Foo`. 当您单独保存它们时，上下文将 0 以外的 ID 分配给`Foo`，并且当您创建0 时，`Bar`它`FooID`不会将其连接到现有的`Foo`，因此您会遇到异常。

# python - python 3中的子类化文件

> ID：13114312
> 
> 赞同：8
> 
> 时间：2012-10-28T23:59:38.777
> 
> 标签：python, python-3.x

在 python 2 中，文件是一个合适的类，所以我写了

```
class MyFile(file):  
  def floats_from_csv(self):  
    strs = self.read(1000000).split(',')  
    for i in strs:  
      yield float(i)

with MyFile("x.csv", "rt") as x:
  for i in x.floats_from_csv():
    ... 
```

在 python3 中，许多文件替换没有公共构造函数，所以我不能子类化并获取`__init__`函数。我有一个使用委托的技巧，但它很难看。创建内置 IO 类的子类的批准方法是什么？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-29T13:55:22.323

我要做的是将您的子类型替换为支持*任何*类似文件的对象的通用类型（如果它有`read`方法，那就足够了），然后像这样封装它。

```
class MyCsvHandler():
    def __init__ (self, fileObj):
        self.file = fileObj

    def floatsFromCsv (self):
        strs = self.file.read(1000000).split(',')  
        for i in strs:  
            yield float(i)

with open('x.csv', 'r') as f:
    h = MyCsvHandler(f)
    for i in h.floatsFromCsv():
        # ... 
```

这样，您总是可以用完全不同的东西替换您的文件对象，例如您从网站获得的 IO 对象，或来自其他地方的其他流。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-29T13:42:09.477

从您展示的一小段代码来看，我认为子类化不是最好的选择。但是，如果这是您真正想做的，请查看[IO 模块](http://docs.python.org/3.3/library/io.html)。

# objective-c - 内存管理何时自动释放返回值

> ID：13114314
> 
> 赞同：1
> 
> 时间：2012-10-28T23:59:54.533
> 
> 标签：objective-c, memory-management

我一直在网上搜索并阅读了很多帖子，但还没有人能解释我这到底是如何工作的。我知道约定说任何方法都必须返回一个自动释放的对象（alloc、new、copy 和 mutableCopy 除外），所以这样的事情很好：

```
-(MyClass*)findRandomName { return [[[MyClass alloc] initWithString:@"Something"] autorelease]; } 
```

我的问题是，如果我使用便利方法或类似方法，我是否也应该在返回值上调用 autorelease？像这儿：

```
-(MyClass*)findRandomName { return [[MyClass startFromString:@"Something"] autorelease]; } 
```

为什么，或者为什么不呢？提前致谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-29T00:02:38.830

您的第一个示例不正确，因为它应该在调用`[MyClass alloc]`之前调用`initWithString`，例如：

```
-(MyClass*)findRandomName { 
    return [[[MyClass alloc] initWithString:@"Something"] autorelease]; 
} 
```

在第二个示例中，您不应该***使用*** `autorelease`该对象。该`startFromString`方法应该已经`autorelease`是对象，如果您`autorelease`再次使用它，您将过度释放该对象。

在第二个示例中，该`findRandomName`方法不获取对象的所有权（因为它调用的方法不包含、 或`alloc`名称`new`）所以它不应该是对象。`copy``mutableCopy``release`

你所说的“约定说任何方法都必须返回一个自动释放的对象（init、new 和 copy 除外）”并不完全正确。[内存管理策略](https://developer.apple.com/library/mac/#documentation/Cocoa/Conceptual/MemoryMgmt/Articles/mmRules.html)说：

> **您拥有您创建的任何对象**
> 
> 您使用名称以“alloc”、“new”、“copy”或“mutableCopy”开头的方法创建对象（例如，alloc、newObject 或 mutableCopy）。

# mysql - 提高 LIKE 子句的性能

> ID：13114315
> 
> 赞同：6
> 
> 时间：2012-10-29T00:00:16.107
> 
> 标签：mysql, sql

在过去的几天里，这一直让我头疼。我之前创建了数据库，对`LIKE`. 我使用的查询是这样的，

```
SELECT  ....
FROM    .... JOINS ....
WHERE   tableA.col1 LIKE '%keyword%' OR
        tableB.col2 LIKE '%keyword%' OR
        tableC.col2 LIKE '%keyword%' OR
        ..... 
```

当我测试查询时，它非常快，因为它只有大约 100-150 条记录。我想搜索包含关键字的任何字符串。几个月过去了，该数据库变得庞大，包含 50,000 条记录。而这一次，我已经体验到了查询的低性能。它非常低。

有什么建议可以改进吗？我无法更改数据库，因为它已被公司使用。

顺便说一句，我的桌子都是`INNODB`。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-29T00:04:13.353

使用通配符前缀`'%abc'`很可能会停止使用任何索引。

没有索引=全表扫描=（通常）慢...

顺便说一句，50,000 条记录并不多；它很小。

您是否考虑过使用 MySql 的[全文搜索功能](http://dev.mysql.com/doc/refman/5.0/en/fulltext-search.html)？（需要 MyISAM 表）

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-29T00:11:29.140

这种类型的搜索称为[全文搜索](http://en.wikipedia.org/wiki/Full_text_search)，您确实需要为此使用专门的系统，而不是强制数据库不断进行表扫描。您基本上将要搜索的所有文本移交给搜索引擎，然后搜索引擎将其编入索引以进行快速搜索。

一种选择是[Apache Lucene](http://lucene.apache.org/core/)。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-29T06:04:25.933

如果你不能像其他朋友提到的那样使用全文搜索，有一个 SQL 优化点可以改进你的查询：

```
SELECT  ....
FROM    (SELECT * FROM tableA WHERE col1 LIKE '%keyword%') A JOIN 
        (SELECT * FROM tableB WHERE col2 LIKE '%keyword%') B ON ... JOIN
        (SELECT * FROM tableC WHERE col2 LIKE '%keyword%') C ON ... 
```

关键是在任何加入之前缩小结果集。

# php - 如何在 PHP iconv_substr 中转义特殊字符？

> ID：13114316
> 
> 赞同：0
> 
> 时间：2012-10-29T00:00:16.700
> 
> 标签：php, magento

我发现 magento 正在使用 iconv_substr 函数来删除多余的字符。但是当有特殊字符时它会中断。例如问号（？）。有没有办法解决这个问题？

```
Notice: iconv_substr() [function.iconv-substr]: Detected an illegal character in input string  in Core/Helper/String.php on line 98

app/code/core/Mage/Core/Helper/String.php(98): iconv_substr('Natural Foam?Co...', 0, 255, 'UTF-8')

catalog/Block/Product/View.php(42): Mage_Core_Helper_String->substr('Natural Foam?Co...', 0, 255) 
```

**更新 1：**

我正在尝试覆盖magento的view.php并将**iconv**与**//ignore**一起使用，但这也无济于事，仍然出现同样的错误。

见代码：[https ://github.com/dbashyal/magento-product-view-meta/blob/master/app/code/community/Technooze/Tcatalog/Block/Product/View.php](https://github.com/dbashyal/magento-product-view-meta/blob/master/app/code/community/Technooze/Tcatalog/Block/Product/View.php)

**更新 2：**

使用**@**来抑制上述错误的 php 通知，现在很好。有关代码，请参见上面的链接。所以，现在对我来说**[已解决]**。

# java - 使用线程调用方法时，Java 不会绘制我的图像

> ID：13114317
> 
> 赞同：0
> 
> 时间：2012-10-29T00:00:17.793
> 
> 标签：java, multithreading, image, graphics, awt

我有这个花程序，它应该从上面放花......我需要它等待几秒钟，然后调用方法来放花。我知道该方法运行，因为我让它打印出下降的 y 值。但它不会在屏幕上绘制它。我真的不知道我做错了什么。这是一些代码...

```
 //Ignore starting here
    import java.awt.*;
    import javax.swing.*;
    import java.awt.event.*;
    import java.util.Random;
    //Ignore ending here

    public class RedFlower implements ActionListener{
        Timer time;
        ImageIcon i = new ImageIcon("graphics//flowers//red_flower.png");
        Image flower = i.getImage();
        int y, x;
        int dy = 1;
        public void dropFlower(){
            Random rnd = new Random();
            y = 50;
            x = rnd.nextInt(1216);
            time = new Timer(5, this);
            time.start();
}
public void actionPerformed(ActionEvent e){// used for stoping the timer when off the screen
    int checky = y++;
    if(checky < 720){
        y++;
    }else{
        time.stop();
    }
    System.out.println(y);

}
//everything after this is what i call in the other method
    public Image getImage(){
    return flower;
}
public int getX(){
    return x;
}
public int getY(){
    return y;
}
    } 
```

现在这是我的绘图代码......

```
 public void paintComponent(java.awt.Graphics g){
    super.paintComponent(g);
    Graphics2D g2d = (Graphics2D) g;

    g2d.drawImage(rf.getImage(), rf.getX(), rf.getY(), null);// rf is what i called the method
    g2d.drawImage(sc.getImage(), sc.getX(), sc.getY(), null);//this is the basket that you control
} 
```

还有一个奇怪的事情是当我按下按钮调用它工作的方法但不是当线程运行它时......

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-29T00:12:00.337

删除双斜线。

```
 ImageIcon i = new ImageIcon("graphics/flowers/red_flower.png"); 
```

# java - 对象要求的序列化

> ID：13114319
> 
> 赞同：-1
> 
> 时间：2012-10-29T00:00:54.873
> 
> 标签：java

如果我不实现可序列化，那么我的对象就不能被序列化，这是真的吗？什么情况下对象不能在 Java 中序列化？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-29T00:03:31.173

除非您实现，否则您不能使用 Java 序列化机制`Serializable`，但这不是唯一的选择。

您可以使用 JAX-B 将任何对象序列化为 XML 并返回。如果您愿意，可以使用 Google 的 protobuf 或任何其他协议。

# rss - 使用 ROME 下载 RSS 提要中的所有条目

> ID：13114321
> 
> 赞同：2
> 
> 时间：2012-10-29T00:01:10.193
> 
> 标签：rss, rss-reader, rome

我正在使用来自 Scala 的 ROME 下载 RSS 提要，但它只获取条目的一个子集。例如，Google Reader 至少找到 61 个[Bing Images](http://feeds.feedburner.com/bingimages)条目，但 ROME 只找到 10 个条目。这是一些代码：

```
val sfi = new SyndFeedInput
val url = new URL("http://feeds.feedburner.com/bingimages")
val feed = sfi.build(new XmlReader(url))
println(feed.getEntries.size) // prints "10", but should find more 
```

这不是特定于提要的；[这个 Flickr 提要](http://api.flickr.com/services/feeds/photos_public.gne?id=49598046@N00&lang=en-us&format=rss_200)有很多条目，但在本例中 ROME 找到 20 个条目。

如何获取提要中条目的完整列表？

# objective-c - 使用按钮删除注释

> ID：13114322
> 
> 赞同：0
> 
> 时间：2012-10-29T00:01:12.283
> 
> 标签：objective-c, annotations, mkmapview

我在 mapView 上有注释，注释视图上的标注按钮将另一个名为 PinViewController 的视图推送到堆栈上。我在 PinViewController 上有一个按钮，我想在按下它时删除它。我不知道该怎么做，有人可以帮我吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-29T00:48:35.703

当您初始化 PinViewController 时，您可以将其传递给稍后可用于识别注释的变量。也许他们有唯一的 ID 或名称。通过它，当按下按钮时，您告诉您以前的视图控制器删除该注释。您可以通过将其设置为委托或弱引用（以避免引用循环）来连接到您以前的 vc。当前一个 vc 被赋予 ID 时，它必须遍历所有注释，直到找到与 ID 匹配的注释，然后告诉地图视图删除该注释。希望有帮助。

# javascript - Uncaught syntax error in my javascript code

> ID：13114328
> 
> 赞同：1
> 
> 时间：2012-10-29T00:02:28.333
> 
> 标签：javascript, identifier

Im getting an "Uncaught Syntax Error: Unexpected Identifier" error in my javascript code on. This code is basically just a 1 to 1 copy from a tutorial which I adapted to fit to my html file.The error occurs on line 86 within the "Create StickyNote" function. Here goes the code:

```
(function ($, $S) {
//$ jQuery
//$S window.localStorage
//Variables Declaration
var $board = $('#board'),
    //Board where the stickyNotes are stuck
    stickyNoteClass, //Singleton Object containing the Functions to work with the LocalStorage
    len = 0,
    //Length of Objects in the LocalStorage 
    currentNotes = '',
    //Storage the html construction of the stickyNotes
    o; //Actual stickyNoteClass data in the localStorage

//Manage the stickyNotes in the Local Storage
//Each stickyNote is saved in the localStorage as an Object  
stickyNoteClass = {
    add: function (obj) {
        obj.id = $S.length;
        $S.setItem(obj.id, JSON.stringify(obj));
    },

    retrive: function (id) {
        return JSON.parse($S.getItem(id));
    },

    remove: function (id) {
        $S.removeItem(id);
    },

    removeAll: function () {
        $S.clear();
    }

};

//If any stickyNote exists, Create it/them
len = $S.length;
if (len) {
    for (var i = 0; i < len; i++) {
        //Create all stickyNotes saved in localStorage
        var key = $S.key(i);
        o = stickyNoteClass.retrive(key);
        currentNotes += '<div class="stickyNote"';
        currentNotes += ' style="left:' + o.left;
        currentNotes += 'px; top:' + o.top;
        //data-key is the attribute to know what item delete in the localStorage
        currentNotes += 'px"><div class="toolbar"><span class="delete" data-key="' + key;
        currentNotes += '">x</span></div><div contenteditable="true" class="editable">';
        currentNotes += o.text;
        currentNotes += '</div></div>';
    }

    //Append all the stickyNotes to the board
    $board.html(currentNotes);
}

/*Dont need to implement this one, as it is already implemented in the html index file
---------------------------------------------------------------------------------------
---------------------------------------------------------------------------------------
//When the document is ready, make all stickyNotes Draggable
$(document).ready(function () {
    $(".stickyNote").draggable({
        cancel: '.editable',
        "zIndex": 3000,
        "stack" : '.stickyNote'
    });
});*/

//Remove stickyNoteClass
$('span.delete').live('click', function () {
    if (confirm('Are you sure you want to delete this Note?')) {
        var $this = $(this);
        //data-key is the attribute to know what item delete in the localStorage
        stickyNote.remove($this.attr('data-key'));
        $this.closest('.stickyNote').fadeOut('slow', function () {
            $(this).remove();
        });
    }
});

//Create stickyNote
$('#new stickyNote').click(function () {
    $board.append('<div class="stickyNote" style="left:20px;top:70px">
            <span class="delete" title="Close">x</span>
            <h1>Drag Me</h1>
            <p class="editable">Lorem ipsum dolor sit amet, consetetur sadipscing elitr, sed diam nonumy eirmod tempor invidunt ut labore et dolore magna aliquyam erat, sed diam voluptua. At vero eos et accusam et justo duo dolores et ea rebum..</p>
</div>');

    /*Dont need to do this, as the draggable is implemented in the html file for all
    divs which are placed within the #board.
    ------------------------------------------------------------------------------------
    ------------------------------------------------------------------------------------
    $(".stickyNote").draggable({
        cancel: '.editable'
    });*/
});

//Save all the stickyNotes when the user leaves the page
window.onbeforeunload = function () {
    //Clean the localStorage
    stickyNoteClass.removeAll();
    //Then insert each stickyNote into the LocalStorage
    //Saving their position on the page, in order to position them when the page is loaded again
    $('.stickyNote').each(function () {
        var $this = $(this);
        stickyNoteClass.add({
            top: parseInt($this.position().top),
            left: parseInt($this.position().left),
            text: $this.children('.editable').text()
        });
    });
}
})(jQuery, window.localStorage); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-29T00:14:30.287

As @FelixKling has pointed out, a multiline string is not allowed the way you have it. Change this:

```
$('#new stickyNote').click(function () {
    $board.append('<div class="stickyNote" style="left:20px;top:70px">
            <span class="delete" title="Close">x</span>
            <h1>Drag Me</h1>
            <p class="editable">Lorem ipsum dolor sit amet, consetetur sadipscing elitr, sed diam nonumy eirmod tempor invidunt ut labore et dolore magna aliquyam erat, sed diam voluptua. At vero eos et accusam et justo duo dolores et ea rebum..</p>
</div>');

    /*Dont need to do this, as the draggable is implemented in the html file for all
    divs which are placed within the #board.
    ------------------------------------------------------------------------------------
    ------------------------------------------------------------------------------------
    $(".stickyNote").draggable({
        cancel: '.editable'
    });*/
}); 
```

to this:

```
 $board.append('<div class="stickyNote" style="left:20px;top:70px">' +
            '<span class="delete" title="Close">x</span>' +
            '<h1>Drag Me</h1>' +
            '<p class="editable">Lorem ipsum dolor sit amet, consetetur sadipscing elitr, sed diam nonumy eirmod tempor invidunt ut labore et dolore magna aliquyam erat, sed diam voluptua. At vero eos et accusam et justo duo dolores et ea rebum..</p>' +
            '</div>'); 
```

# java - 检测字符串中的空格

> ID：13114331
> 
> 赞同：0
> 
> 时间：2012-10-29T00:02:47.553
> 
> 标签：java, string, space

如何确定用户输入的输入中是否有空格？用户的输入存储在一个字符串中。我指的是星号之间的部分。我读到可以使用正则表达式，但我不知道如何使用它来检测字符串 s 中是否有空格。

```
import java.util.Scanner;
import java.util.regex.Matcher;
import java.util.regex.Pattern;

public class LAnalyze{

public static void main(String[] args) {

    int j = 0;
    String s = null;
    Scanner scan = new Scanner(System.in);

    System.out.println("Enter an input:  ");
    s = scan.nextLine();

    ****************************************************
              Pattern pattern = Pattern.compile("\\s");
    Matcher matcher = pattern.matcher(s);
    boolean found = matcher.find(); 

    if(spaceIsFound)
             *******************************************************
    {
        System.out.println("Invalid character(s) entered.. Program terminated!\n");
        System.exit(0);
    }
    else if( s.charAt(0)=='a'||s.charAt(0)=='b'||s.charAt(0)=='c'||s.charAt(0)=='d'||s.charAt(0)=='e'||s.charAt(0)=='f'||
            s.charAt(0)=='g'||s.charAt(0)=='h'||s.charAt(0)=='i'||s.charAt(0)=='j'||s.charAt(0)=='k'||s.charAt(0)=='l'||
            s.charAt(0)=='m'||s.charAt(0)=='n'||s.charAt(0)=='o'||s.charAt(0)=='p'||s.charAt(0)=='q'||s.charAt(0)=='r'||
            s.charAt(0)=='s'||s.charAt(0)=='t'||s.charAt(0)=='u'||s.charAt(0)=='v'||s.charAt(0)=='w'||s.charAt(0)=='x'||
            s.charAt(0)=='y'||s.charAt(0)=='z'||s.charAt(0)=='A'||s.charAt(0)=='B'||s.charAt(0)=='C'||s.charAt(0)=='D'||
            s.charAt(0)=='E'||s.charAt(0)=='F'||s.charAt(0)=='G'||s.charAt(0)=='H'||s.charAt(0)=='I'||s.charAt(0)=='J'||
            s.charAt(0)=='K'||s.charAt(0)=='L'||s.charAt(0)=='M'||s.charAt(0)=='N'||s.charAt(0)=='O'||s.charAt(0)=='P'||
            s.charAt(0)=='Q'||s.charAt(0)=='R'||s.charAt(0)=='S'||s.charAt(0)=='T'||s.charAt(0)=='U'||s.charAt(0)=='V'||
            s.charAt(0)=='W'||s.charAt(0)=='X'||s.charAt(0)=='Y'||s.charAt(0)=='Z') {

        System.out.print( (s) + ": Identifier\n");
        for (int k = 0; k < s.length(); k++) {  
            j++;
            System.out.println("Token " + (j) + " = " + (s.charAt(k)));

        }
    }
    else if(s.charAt(0)=='0'||s.charAt(0)=='1'||s.charAt(0)=='2'||s.charAt(0)=='3'||s.charAt(0)=='4'||s.charAt(0)=='5'||
            s.charAt(0)=='6'||s.charAt(0)=='7'||s.charAt(0)=='8'||s.charAt(0)=='9') {

        System.out.print( (s) + ": Unsigned Integer\n");
        for (int m = 0; m < s.length(); m++) {  
            j++;
            System.out.println("Token " + (j) + " = " + (s.charAt(m)));
        }
    }   
    else {
        System.out.println("Invalid character(s) entered.. Program terminated!\n");
        System.exit(0);
    }

} 
```

}

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-29T00:06:28.720

您可以使用 s.indexOf(' '); 如果它返回 -1，则字符串不包含空格。

此外，您可以使用 switch(s.charAt(0)){ case 'a': case 'b': ... break; 案例'c'：... }

代替多个 if。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-29T00:09:26.770

您不需要使用正则表达式来检查字符串是否包含空格。请改用[String.contains()](http://docs.oracle.com/javase/6/docs/api/java/lang/String.html#contains%28java.lang.CharSequence%29)。

# iphone - 向 UIScrollView 添加标签

> ID：13114332
> 
> 赞同：2
> 
> 时间：2012-10-29T00:02:49.990
> 
> 标签：iphone, ios, xcode, xcode4.5

我正在制作我的第一个应用程序，但我遇到了 UIScrollView 问题。我将滚动视图添加到我的故事板并在 viewDidLoad 中调用我的方法

```
-(void)createScroll{
[scroll setScrollEnabled:YES];
[scroll setContentSize:CGSizeMake(320, 900)];
} 
```

当我构建应用程序时，滚动视图运行良好，并且似乎滚动了整个设置值 900。但是，当我通过界面生成器向滚动视图添加标签并运行程序时，它不会滚动整个长度。它只会滚动大约 500。无论我将值更改为什么，它仍然滚动相同的数量。如果我删除标签，它应该会正常工作。有人知道发生了什么吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-29T02:24:55.443

如果您使用自动布局，则将对“createScroll”的调用移动到 viewDidAppear 方法，看看会发生什么。

# google-app-engine - 在 Travis-CI 上运行 Google App Engine 并使用 PhantomJS 进行测试

> ID：13114334
> 
> 赞同：3
> 
> 时间：2012-10-29T00:03:06.387
> 
> 标签：google-app-engine, phantomjs, casperjs, travis-ci

有没有办法在[Travis-CI上运行 Google App Engine](http://about.travis-ci.org/)[开发应用服务器](https://developers.google.com/appengine/docs/python/tools/devserver)实例，然后使用[PhantomJS](http://phantomjs.org/) / [CasperJS](http://casperjs.org/)测试该应用程序？

人们不一定认为这是一件极具挑战性的事情，但我会感谢任何相关的文件、想法和建议。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-12-20T13:38:04.720

Travis Github/issues对此进行[了讨论](https://github.com/travis-ci/travis-ci/issues/738)，无论如何我的解决方案是将其添加到`.travis.yml`：

```
before_script:
- wget https://googleappengine.googlecode.com/files/google_appengine_1.8.9.zip -nv
- unzip -q google_appengine_1.8.9.zip 
```

我希望这有帮助。

# clojure - clojure 命名空间 .core 文件和 repl

> ID：13114335
> 
> 赞同：4
> 
> 时间：2012-10-29T00:03:15.010
> 
> 标签：clojure, namespaces

一个初学者的问题。

使用 lein + emacs + nrepl 运行 clojure。

我对以下内容有些困惑：

我希望使用指数函数。该函数位于以下位置`clojure.math.numeric-tower`。我添加`[org.clojure/math.numeric-tower "0.0.1"]`到依赖项并运行`lein deps`.

现在有可能（我确信有可能）将其添加到我`.core ns`的如下：

```
(ns learning.core
  (:require [clojure.math.numeric-tower :as math]))

(def i-know-the-answer
  (math/expt 2 10)) 
```

现在，当我尝试将 ( `ctl-x e`) 加载到 REPL 中时，它会引发错误。

`clojure.lang.Compiler$CompilerException: java.lang.RuntimeException: No such namespace: math, compiling:(NO_SOURCE_PATH:2)`

依赖项是否需要直接加载到 REPL 中？我可以不只是更改源文件/重新编译并使用它吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-29T00:26:23.687

使用 ctrl-c ctrl-l 加载文件，然后将您的 repl 切换到该文件中的命名空间

```
(in-ns 'learning.core) 
```

或者从 Clojure 缓冲区中按 ctrl-c alt-n 以将 repl 切换到缓冲区的命名空间。您可以通过查看 repl 中的提示来判断它是否有效。

# sql-server - 表中没有外键对应的行时，无法构建 SQL Server OLAP Cube

> ID：13114338
> 
> 赞同：0
> 
> 时间：2012-10-29T00:03:48.197
> 
> 标签：sql-server, ssas, data-warehouse, olap-cube

我是 SQL Server OLAP 多维数据集的新手。我有以下问题

ex 我有在数据源视图中使用的采购订单和发票表。这两个表按采购订单 ID 关联，与发票有一对多的关系。

对于我没有发票的采购订单，我收到以下错误

OLAP存储引擎错误：处理时找不到属性键：表：采购订单

任何人都可以对此有所帮助吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-02T16:00:45.760

此错误的最常见原因是处理事实表中的顺序和 NULL。

确保在处理度量值组之前处理维度。

当事实表中的键值具有 NULL 值时，SSAS 默认将 INT 视为 0，将 Char 数据类型视为 ''（空白）。确保事实键没有 NULL 值。如果存在空值，一种解决方案是使用维度表中的默认未知成员（通常为 -1），并将事实表中的空值替换为 -1。

# vb.net - UpdateAll 方法相关表问题.net

> ID：13114339
> 
> 赞同：0
> 
> 时间：2012-10-29T00:03:57.090
> 
> 标签：vb.net, visual-studio-2010, tableadapter

我正在尝试使用`updateAll`表适配器管理器中的方法。当我尝试更新作为孩子存储在另一个表中的任何记录时，会`updateAll`引发异常，告诉我“无法删除或更改，因为表“竞争”包括相关记录”。这种方法不应该处理所有的表关系吗？

这是我要保存的代码：

```
Public Sub saveAll(ByVal dataSet As SudokuDataSet)
  Try
    Dim tbAdapterManager As New SudokuDataSetTableAdapters.TableAdapterManager

    tbAdapterManager.CompetitorTableAdapter = competitorTableAdapter
    tbAdapterManager.PuzzleTableAdapter = puzzleTableAdapter
    tbAdapterManager.CompetitionTableAdapter = competitionTableAdapter

    tbAdapterManager.UpdateAll(dataSet)
  Catch ex As Exception
    MessageBox.Show(ex.Message, "Saving Error", MessageBoxButtons.OK, MessageBoxIcon.Error)
  End Try
End Sub 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-02T00:08:26.787

> 该记录不能删除或更改，因为表中包含相关记录。（错误 3200）
> 
> 您尝试执行的操作违反了相关表的参照完整性规则。例如，当“many”表中有相关​​记录时，如果您尝试以一对多关系删除或更改“one”表中的记录，则会出现此错误。
> 
> 如果要删除或更改记录，首先从“many”表中删除相关记录。

从[这里](http://office.microsoft.com/en-ca/access-help/HV080761327.aspx)。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-07T12:11:39.717

我发现该方法运行良好。问题出在数据库中，我必须配置表之间的关系并将它们设置为级联。

即在关系中启用“级联更新相关字段”和“级联删除相关字段”

# javascript - Javascript RegEx 匹配没有前后连字符的单词

> ID：13114340
> 
> 赞同：4
> 
> 时间：2012-10-29T00:04:10.890
> 
> 标签：javascript, regex, hyphen

我需要一个用于 Javascript 的 RegEx，它将匹配第 1-4 行中的字符串“smith”，但不匹配下面第 5-8 行中的字符串。
编号的行是 Access 数据库中的字段（字段不包含数字）。
到目前为止，我所拥有的是：

```
var xy = 'smith';
MyString = new RegExp('(^|\\W)' + xy + '(\\W|$)', 'i'); 
```

这与第 1-4 行中的 Smiths 匹配，但也与第 7 行和第 8 行中的 Smiths 匹配。
我怎样才能让表达式也忽略前面或后面有连字符的 Smiths？

1.  史密斯、琼斯、威尔逊
2.  史密斯琼斯威尔逊
3.  琼斯，史密斯（JR），威尔逊
4.  琼斯、威尔逊、史密斯
5.  阿罗史密斯，琼斯
6.  威尔逊，史密森
7.  琼斯、史密斯-崔德斯通、威尔逊
8.  威尔逊、布莱克利-史密斯、琼斯

经过一周和几十次的尝试，我在问专家！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-29T00:08:55.300

自己编写否定字符类 ( `\W`) 并包含连字符：

```
MyString = new RegExp('(^|[^a-z0-9_-])' + xy + '([^a-z0-9_-]|$)', 'i'); 
```

While`\W`匹配任何非单词字符（除了字母、数字和下划线之外的所有字符），`[^a-z0-9_-]`匹配任何既不是单词字符也不是连字符的字符。

您当然可以`\w`在该字符类中使用：

```
MyString = new RegExp('(^|[^\\w-])' + xy + '([^\\w-]|$)', 'i'); 
```

# mysql - 触发器从第二个 MySQL 表中删除

> ID：13114341
> 
> 赞同：0
> 
> 时间：2012-10-29T00:04:11.850
> 
> 标签：mysql, sql, triggers

我在 MySQL 数据库中编写了表。恰好有一个艺术表，以及三个相关的表，雕塑、绘画和照片。

Art 中的每个项目也恰好在其他三个项目中的一个中，并且仅在其中一个中。我正在尝试编写一个触发器，以便当我在绘画中删除一个元组时，触发器将删除艺术中对应的元组。

这应该只适用于绘画，而不影响雕塑或照片。这些项目中的每一个都有一个 id_no，并且在绘画中对于每一个画作都有一个匹配的 id_no。我不能只删除 Art 中不在绘画中的任何 id_no，因为它可能仍然存在于 Sculpture 或 Photo 中。

所以我不确定我是否应该通过将 id_no 临时保存在某处（从绘画中删除），然后在触发器中进行比较并删除（从艺术），甚至如何做到这一点。

> DELIMITER $ 创建触发器 delete_painting 删除绘画后从艺术中删除

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-29T01:59:04.080

```
DELIMITER $
CREATE TRIGGER delete_painting AFTER DELETE ON Painting
    DELETE FROM Art WHERE OLD.id_no = Art.id_no; $ 
```

“表”`OLD`仅包含您已删除的行，因此您可以执行此操作。

# kineticjs - KineticjS：为什么 Kinetic.Text verticalAlign 属性被删除？备择方案？

> ID：13114344
> 
> 赞同：6
> 
> 时间：2012-10-29T00:04:16.133
> 
> 标签：kineticjs

我使用带有渐变填充等的 KineticJS 文本对象作为按钮。但是现在verticalAlign 属性最近被删除了，我如何在它的边界框中垂直对齐我的文本呢？如果没有其他选择，为什么要移除财产？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-15T15:53:59.170

据此[，](https://github.com/ericdrowell/KineticJS/issues/281)支持已暂时放弃，并有望在不久的将来增加。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-15T17:11:37.603

文本的 verticalAlign 属性对我来说没有任何意义。

Text 不是 Kinetic.Container 而是 Kinetic.Shape。

IMO，Kinetic.Shape 不应该有 vertialAlign。这就像一个圆有verticalAlign。与什么对齐？与任何容器、层或阶段对齐？明白我在说什么？

这就是为什么它被删除的原因，我猜，希望这些属性应该与水平对齐一起添加回 KineticContainer。

如果您希望文本垂直对齐到矩形或圆形。此时，您需要将文本的 y 位置设置为与容器垂直对齐。

如果你的容器是 100 像素高并且你的文本是 30 像素高，那么你会得到 35 的 y 位置。

```
var newY= (box.getHeight()-text.getHeight())/2
text.setY(newY);
layer.draw(); 
```

# javascript - 检测失败的插件加载并显示消息

> ID：13114349
> 
> 赞同：0
> 
> 时间：2012-10-29T00:05:06.620
> 
> 标签：javascript, html, css

我正在为学校作业创建一个网站，并且正在使用 google reader flash 插件来播放一些音乐。当我在家时，插件可以正常工作，但在学校却无法加载，我只是在应该在的地方找到一个空白点。这是因为学校代理过滤器阻止了托管插件的谷歌服务器。

我想知道是否有办法检测插件何时被阻止并显示一些替代文本。这是我正在使用的代码：

```
<embed type="application/x-shockwave-flash" flashvars="audioUrl=http://k006.kiwi6.com/hotlink/zhxhgz5q0z/island_of_peace.mp3" src="http://www.google.com/reader/ui/3523697345-audio-player.swf"  width="400" height="27" quality="best" alt="Flash plugin failed to load">  </embed> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-29T00:30:43.343

您需要通过 PHP 执行此操作：

```
<?PHP
if (getenv('HTTP_X_FORWARDED_FOR')) {
   //Hide flash
}

// otherwise no proxy detected

else {
   //Display flash
}
?> 
```

只是一个快速的解决方案，但可能并不总是有效。取决于代理是否匿名

# javascript - 引导编码文本覆盖

> ID：13114353
> 
> 赞同：2
> 
> 时间：2012-10-29T00:05:27.350
> 
> 标签：javascript, text, twitter-bootstrap, compiler-errors, overlapping

我会说我不够聪明，无法解决这个问题。我正在使用 Twitter 引导程序的 spacelab 版本。我刷新页面的 50% 时间看起来像这样。另一半时间加载正常。这可能是什么原因？？？[http://i.imgur.com/8rhDZ.png](http://i.imgur.com/8rhDZ.png)

当我禁用 JS 时似乎不会发生。哪个脚本可能是罪魁祸首？

```
<script>
$(document).scroll(function(){
    // If has not activated (has no attribute "data-top"
    if (!$('.subnav').attr('data-top')) {
        // If already fixed, then do nothing
        if ($('.subnav').hasClass('subnav-fixed')) return;
        // Remember top position
        var offset = $('.subnav').offset()
        $('.subnav').attr('data-top', offset.top);
    }

    if ($('.subnav').attr('data-top') - $('.subnav').outerHeight() <= $(this).scrollTop())
        $('.subnav').addClass('subnav-fixed');
    else
        $('.subnav').removeClass('subnav-fixed');
});

</script>

<!-- Le javascript
================================================== -->

<!-- Placed at the end of the document so the pages load faster -->
<script src="http://bootswatch.com/js/bsa.js"></script>
<script type="text/javascript" src="http://twitter.github.com/bootstrap/assets/js/bootstrap-dropdown.js"></script>
<script type="text/javascript" src="http://twitter.github.com/bootstrap/assets/js/bootstrap.js"></script>
<script src="http://ajax.googleapis.com/ajax/libs/jquery/1.7.2/jquery.min.js"></script>
<script src="http://twitter.github.com/bootstrap/assets/js/bootstrap.min.js"></script>
<script src="http://twitter.github.com/bootstrap/assets/js/application.js"></script>
<script src="http://twitter.github.com/bootstrap/assets/js/bootswatch.js"></script> 
```

# java - 如何将多个 Java 文件漂亮地打印到一个页面上？

> ID：13114358
> 
> 赞同：2
> 
> 时间：2012-10-29T00:06:27.793
> 
> 标签：java, eclipse, pdf, pretty-print

我是一名教师，希望我的学生在他们面前有漂亮的源代码打印输出到 4 个简短的 Java 文件。我不想浪费纸张（或者让他们乱扔文件），所以我希望将四个文件放在一个页面上。我不想将每个（从 Eclipse）打印到一个单独的 PDF，然后将它们组合成 4-up，因为这会使文本变小。我尝试在 Eclipse 中将这四个文件连接成一个 .java 文件，但是，尽管阅读[了这个问题](https://stackoverflow.com/questions/9014223/how-can-i-hide-all-errors-from-an-eclipse-project)，但我发现无法抑制错误的显示（即在单个文件中定义多个公共类）。

更新：我不只是想将代码打印为文本。我希望它打印得漂亮，即带有语法突出显示。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-29T00:09:19.480

将它们全部复制到文本编辑器，然后从那里打印。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-29T00:25:01.567

*   您可以将它们从 eclipse 复制到 open/libreoffice 或 word 以保持格式，尤其是颜色。
*   您可以使用 Highlight 之类的程序：[http](http://www.andre-simon.de/) ://www.andre-simon.de/ （结果可以通过突出显示复制到）
*   您可以使用 Latex 来处理格式
*   您可以将源代码放在一个文件中，您必须进行必要的更改以确保只有一个公共类：

    公共类 a {}

    B类{}

# python - 如何从 Tkinter 获取输入

> ID：13114359
> 
> 赞同：2
> 
> 时间：2012-10-29T00:06:30.537
> 
> 标签：python, tkinter

我正在使用 Tkinter 制作一个程序，其中用户以磅为单位输入他们的体重，然后以公斤为单位输出他们的体重。

我在`Entry`从用户那里获取内容时遇到问题。我正在计算磅到公斤`clicked1`。

有人可以告诉我如何在那里获得 Entry 输入吗？

```
from Tkinter import *
import tkMessageBox

class App(object):
    def __init__(self):
        self.root = Tk()
        self.root.wm_title("Question 7")
        self.label = Label (self.root, text= "Enter your weight in pounds.")
        self.label.pack()

        self.entrytext = StringVar()
        Entry(self.root, textvariable=self.entrytext).pack()

        self.buttontext = StringVar()
        self.buttontext.set("Calculate")
        Button(self.root, textvariable=self.buttontext, command=self.clicked1).pack()

        self.label = Label (self.root, text="")
        self.label.pack()

        self.root.mainloop()

    def clicked1(self):
        input = 3423 #I would like the user input here.
        self.label.configure(text=input)

    def button_click(self, e):
        pass

App() 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-10-29T10:54:33.590

这是你要找的东西吗？

```
from Tkinter import *
import tkMessageBox

class App(object):
    def __init__(self):
        self.root = Tk()
        self.root.wm_title("Question 7")
        self.label = Label (self.root, text= "Enter your weight in pounds.")
        self.label.pack()

        self.entrytext = StringVar()
        Entry(self.root, textvariable=self.entrytext).pack()

        self.buttontext = StringVar()
        self.buttontext.set("Calculate")
        Button(self.root, textvariable=self.buttontext, command=self.clicked1).pack()

        self.label = Label (self.root, text="")
        self.label.pack()

        self.root.mainloop()

    def clicked1(self):
        input = self.entrytext.get()
        result = int(input)*2
        self.label.configure(text=result)

    def button_click(self, e):
        pass

App() 
```

我认为这就是您要寻找的东西，尽管不只是乘以 2。如果值不是 int，您可能还想设置一个例外。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2014-08-10T19:46:12.313

你正在寻找的是`[widget].get()`

## 文本小部件

如果您使用 Text 小部件，则必须使用`[widget].get(1.0, END)`where`1.0`表示“第一行，第 0 个字符”

## 代码审查

我注意到您的代码中还有其他一些可以改进的地方：

*   [PEP8](http://legacy.python.org/dev/peps/pep-0008/)符合性；见[pep8online.com](http://pep8online.com/)
*   如果你添加一个[Shebang](http://martin-thoma.com/what-does-usrbinpython-mean/)，Linux 用户将可以直接用`./script.py`.
*   变量命名：
    *   [`input`](https://docs.python.org/2/library/functions.html#input)是一个内置函数，你应该避免覆盖它
    *   使用有意义的变量名（如果您扩展程序，entrytext 可能会出现问题）
*   避免`from Tkinter import *`。这可能会导致意外的命名冲突。

## 完整代码

```
##!/usr/bin/env python

import Tkinter as Tk

class App(object):
    def __init__(self):
        self.root = Tk.Tk()
        self.root.wm_title("Question 7")
        self.label = Tk.Label(self.root, text="Enter your weight in pounds.")
        self.label.pack()

        self.weight_in_kg = Tk.StringVar()
        Tk.Entry(self.root, textvariable=self.weight_in_kg).pack()

        self.buttontext = Tk.StringVar()
        self.buttontext.set("Calculate")
        Tk.Button(self.root,
                  textvariable=self.buttontext,
                  command=self.clicked1).pack()

        self.label = Tk.Label(self.root, text="")
        self.label.pack()

        self.root.mainloop()

    def clicked1(self):
        weight_in_kg = self.weight_in_kg.get()
        self.label.configure(text=weight_in_kg)

    def button_click(self, e):
        pass

App() 
```

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2012-10-29T00:18:15.597

由于您已将 a`StringVar`与您的`Entry`小部件相关联，因此您可以使用 StringVar 的 get 和 set 方法轻松访问/操作小部件的文本。

请参阅[此处](http://effbot.org/tkinterbook/variable.htm)了解更多信息。

# jquery - jquery fadeToggle 与子对象？

> ID：13114362
> 
> 赞同：1
> 
> 时间：2012-10-29T00:06:48.460
> 
> 标签：jquery

我只是试图为我的投资组合创建一个企业页面。一切看起来都很好，但我的 jquery 代码无法正常工作。

当悬停在屏幕中间的一个圆圈周围时，我想淡入包含“音乐”和“网页设计”内容的 2 个框。div.hidden-elements 在 Circle 元素中。

现在，当我悬停圆圈时，它会淡入，当我离开圆圈时，它会淡出。问题：当我在一个新的“隐藏”框中移动光标时，它们会因为我离开圆形元素而淡出？

你能帮我解决这个问题吗？这是我的代码：

```
<script src="//ajax.googleapis.com/ajax/libs/jquery/1.8.2/jquery.min.js"></script>

<script type="text/javascript">
   $(document).ready(function () {
      console.log('DOM READY');

      $('#me').mouseover(function () {
         $('.hidden').fadeIn(1000);
      });

      $('#me').mouseout(function () {
         $('.hidden').fadeOut(1000);
      });

   });
</script> 
```

HTML：

```
<!DOCTYPE HTML>    
<html>
   <head>
      <title>DominikBiedebach - Web- und Printdesigner</title>
      <style type="text/css">
         @import url(http://fonts.googleapis.com/css?family=Open+Sans:400,700|Open+Sans+Condensed:300,700);

         html, body { background:  #f4f4f4; color: #202020; }
         div#me{
            background: url(images/me.png) no-repeat;
            height:  256px;
            width: 256px;
            margin: 40px auto 10px auto;
            position: relative;
         }
         div#container{
            width: 960px;
            margin: 0px auto;
            text-align: center; 
         }
         h1 {
            font-size: 100px;
            font-family: 'Open Sans Condensed', Arial, Helvetica, sans-serif;
            margin: 0px;
         }
         h3 {
            font-family: 'Open Sans', Arial, Helvetica, sans-serif;
            font-size: 30px;
            line-height: 26px;
            text-transform: uppercase;
         }

         .hidden { display: none; }
         #music {
            position: absolute;
            left: -200px;
            width: 200px;
            height: 400px;
         }

      </style>
   </head>
   <body>
      <div id="container">
         <div id="me">
            <div class="hidden" id="music">Testbox</div>
            <div class="hidden" id="webdesign">Testbox</div>
         </div>

         <h1>xxxx</h1>
         <h3>xxxx</h3>
      </div>
   </body>
</html> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-29T00:17:51.327

您可以尝试替换`mouseover/mouseout`为`mouseenter/mouseleave`或使用`hover`方法：

```
$('#me').hover(function() {
    $('.hidden', this).fadeToggle(1000);
}); 
```

# memory-leaks - iOS UITabBarItem setFinishedSelectedImage：withFinishedUnselectedImage：内存泄漏？

> ID：13114366
> 
> 赞同：1
> 
> 时间：2012-10-29T00:07:07.893
> 
> 标签：memory-leaks, uitabbaritem

我有关于 UITabBarItem 的内存泄漏情况。我的应用程序有一个带有自定义图片的 TabBarController。所以这是我放在图形文件中的代码。

```
UIImage *selectedImage0 = [UIImage imageNamed:@"A-click.png"];
UIImage *unselectedImage0 = [UIImage imageNamed:@"A.png"];

UIImage *selectedImage1 = [UIImage imageNamed:@"B-click.png"];
UIImage *unselectedImage1 = [UIImage imageNamed:@"B.png"];

UITabBar *tabBar = self.mytabbarcontroller.tabBar;
UITabBarItem *item0 = [tabBar.items objectAtIndex:0];
UITabBarItem *item1 = [tabBar.items objectAtIndex:1];

[item0 setFinishedSelectedImage:selectedImage0 withFinishedUnselectedImage:unselectedImage0];
[item1 setFinishedSelectedImage:selectedImage1 withFinishedUnselectedImage:unselectedImage1]; 
```

而且效果很好！！！但是，当我使用 Instruments 工具检查内存泄漏时，它显示存在泄漏

```
[item0 setFinishedSelectedImage:selectedImage0 withFinishedUnselectedImage:unselectedImage0];
[item1 setFinishedSelectedImage:selectedImage1 withFinishedUnselectedImage:unselectedImage1]; 
```

如果我在不使用 setFinishedSelectedImage 的情况下评论这两行，就不会泄漏。我觉得这很奇怪，对我来说没有意义。已经搜索了文档和参考，找不到相关信息。我正在使用 iOS 6 和 Xcode 4.5 。有人知道吗？提前致谢。

# mysql - 有没有办法检索更准确的 MySQL 错误消息？

> ID：13114367
> 
> 赞同：1
> 
> 时间：2012-10-29T00:07:25.180
> 
> 标签：mysql, error-handling

```
You have an error in your SQL syntax; check the manual that corresponds to your MySQL server version for the right syntax to use near [random snippet of query code] 
```

我很少能够从 MySQL 错误中推断出一些有价值的东西，有没有办法获得一些更具体的数据？

我看到有人驳回这个问题，说由于 MySQL 的语法如何工作，不可能获得准确的错误数据。真的是这样吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-29T00:21:25.253

不仅 MySQL 会给出这样的语法错误，MS SQL Server 也会给出非常相似的消息。

错误消息非常准确，因为错误消息中显示的代码正是解析器确定无法继续解析查询的确切位置。

但是，查询中的实际错误通常在查询中稍早一些。例如，如果您在查询中将“from”拼错为“fom”，解析器将继续认为“fom”是之前出现的最后一个字段的别名，并在找到表名时给您一个语法错误而不是预期的逗号或“from”关键字。它将指向表名作为错误的位置，而不是拼写错误的关键字。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-29T00:13:49.833

有时它有助于将您的查询分解成几行而不是一长行。这仍将仅向您显示错误的大致位置，但它可能会有所帮助。

# web-applications - 测试 OpenId 登录，但如何注销？

> ID：13114370
> 
> 赞同：1
> 
> 时间：2012-10-29T00:08:23.303
> 
> 标签：web-applications, openid, logout

我正在开发一个允许通过 openid 登录的网页。感谢 restlet 的 openid 实现，它运行良好。

但是：当我登录时，我想再次测试，可能与另一个提供商或因为我怀疑存在错误等。问题是：页面记得我已登录。我立即获得受保护的页面而不是重定向到我的 OpenIdProvider。

即使删除所有cookie，重新启动浏览器和重新启动开发服务器也没有任何区别。如何注销并再次尝试？

我的 OpenIdProviders 是 google 和 myopenid（两个帐户，因为我想确保这两个提供程序都与我的页面一起工作）。访问 accounts.google.com/Logout 也无济于事。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-10T07:28:38.267

在我的情况下，重新启动浏览器确实会导致我的 OpenID 测试用户从 OpenID 提供程序（在我的情况下为 Gmail）注销。（我的意思是从测试套件中自动重新启动浏览器。）

我使用 Selenium 和 Chrome，请参阅：[http ://code.google.com/p/selenium/wiki/ChromeDriver](http://code.google.com/p/selenium/wiki/ChromeDriver)

当 ChromeDriver 启动 Chrome 时，它​​指定了许多命令行选项，这显然启动了一个 Chrome 浏览器，它不记得过去的任何内容（没有插件，没有 cookie（我认为），没有登录到任何地方，据我所知）。

因此，也许您正在使用另一个浏览器或测试框架，它不会在每次测试运行之间重置浏览器的状态。一种解决方案是使用 Selenium + Chrome 和 ChromeDriver。

# c# - MVC 业务逻辑助手

> ID：13114377
> 
> 赞同：0
> 
> 时间：2012-10-29T00:09:45.050
> 
> 标签：c#, asp.net-mvc, entity-framework

我有一些通用功能适用于我的应用程序，以在发生操作时更新数据库的特定部分（审计跟踪、修改日期等）。我将使用 AuditTrail 作为示例。

**我应该在哪里存储这些功能？**

目前我将它们存储在 dbcontext 类中

```
//... my db context class ...

public bool AddAuditEntry(int ID, string objectName)
{
    // Here I create a new AuditTrail object, assign values then insert into db.
    // This mode doesn't have a controller.
}

// We also have a table that keeps track of modified state for 
// client side caching (nothing I have control over)
public bool ModifyObject(int ID)
{
    // Here I mark the object id with modified date then save to db
    // This particular model doesn't have a controller either.
} 
```

我认为它们应该属于模型，但我不太确定如何实现它。将它们放在控制器中并不是最好的选择，因为其中一些仅与可能没有控制器的特定模型类相关。

我在模型中遇到的问题是更新实体的最佳方法是什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-29T00:15:46.557

我不确定这是否是其他人这样做的方式，但我实际上有两个模型。我的业务模型包含这些类型的功能和验证。诸如帐户余额之类的东西不能小于零或类似的东西。完成所有这些后，模型将被转换为数据库模型，这些模型在必要时负责数据库级别的验证和数据库操作。

# sorting - 在 CCW 或 CW 方向上对多边形的顶点进行排序

> ID：13114378
> 
> 赞同：1
> 
> 时间：2012-10-29T00:09:55.510
> 
> 标签：sorting, polygon, ccw

我有一组定义多边形的边和顶点（不一定是凸的）。顶点和边是随机顺序的，我想按顺时针（或逆时针）方向对该多边形的顶点进行排序/排序。

知道如何实现吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-29T00:23:23.363

我认为这本质上是柯尼斯堡桥问题的简化版本。

如果没有任何情况下在单个节点上连接了两个以上的边，则可以构建一个相邻列表并“遍历”所有节点。

如果有> 2条边在一个节点处连接的情况，......嗯，我认为可能会有不止一个顺序。只需参考柯尼斯堡桥问题的解决方案即可。

```
for v,u in edges:
  adjacent[v].append(u)
  adjacent[u].append(v)

order=[]

start = v0 #start from an arbitrary node

def draw(now,last):
  if now==start and len(order)>0:
    return
  order.append(now)
  for i in adjacent[now]:
    if i != last:
      draw(i,now)

draw(start,NULL) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-29T00:30:39.810

我假设 CW/CCW 方向无关紧要（保证一个或另一个要复杂得多）。这种伪代码算法对顶点进行顺时针或逆时针排序。

```
marked_edge <- any edge
first <- marked_edge.start
list <- [first]
current <- marked_edge.end
while current <> first
    list <- list + [current]
    new_edge <- find the edge that is not the marked_edge and has the vertex current as either start or end
    if new_edge.start=current then
        current <- new_edge.end
    else
        current <- new_edge.start
   endif
   marked_edge <- new_edge
endwhile 
```

# ios - Xcode 4.5 UITableView

> ID：13114387
> 
> 赞同：0
> 
> 时间：2012-10-29T00:11:36.590
> 
> 标签：ios, uitableview

我对 Xcode 上的 UITableView 有疑问。我在单元格中有文本，但是当我测试它时，它没有显示。我刚开始编程，所以任何帮助将不胜感激。如果有人可以给我发电子邮件，那么我可以提供最有帮助的项目文件。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-23T11:29:14.030

您需要了解表视图的工作方式。我建议仔细阅读一些关于这个主题的优秀在线文档，包括示例代码（如果有）。

您需要记住，系统负责决定表格视图的哪些部分应该是可见的，然后要求您的代码提供应该看到的内容的详细信息。

如果您确实提供了提供单元格内容的例程，请尝试放置断点或一些日志记录以确保正在调用您的代码。如果是这样，首先返回一些简单的东西并验证它是否显示。

此外，准备代码并解释它正在做什么以添加到问题中。你永远不知道，只是这样做可能会向你澄清出了什么问题。如果没有，请张贴出来，让其他人有机会帮助您。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-23T11:39:34.790

我不能真正直接解决您的问题，因为据我所知，您出人意料地没有给出代码，您可能会丢失分号！(JK)

这是我前段时间给某人的详细答案，与您的情况非常相关

但是对于表格视图，请使用以下代码：

```
 - (UITableViewCell *)tableView:(UITableView *)tableView2 cellForRowAtIndexPath:(NSIndexPath *)indexPath 

{

    UITableViewCell *cell = [tableView
                             dequeueReusableCellWithIdentifier:@"UITableViewCell"];

    if (cell == nil) {

        cell = [[[UITableViewCell alloc] initWithStyle:UITableViewCellStyleDefault
                                       reuseIdentifier:@"UITableViewCell"]
                autorelease];

        cell.textLabel.text = nil;                

    }

    if (cell) {

        //customization 
        cell.textLabel.text = @"Text Label";
    }

    return cell;
} 
```

你说你正在开始编码......让我解释一下。首先尝试拿起书：

大书呆子牧场指南

我建议您阅读大量书籍，以了解语言、API 和编程技能

出队基本上是 nilling 和缓存任何不可见的单元格，也就是你滚动过去。因此，`cell == nil`可能会在四种情况下调用（我能想到的）：

当我们第一次设置表视图时（单元格将为 nil） 当我们重新加载数据时 每当我们可能到达此类时 当单元格从表视图中变得不可见时 所以，出队的标识符就像一个 ID。然后在查看cell是否为nil的语句中，我们初始化cell，可以看到重写的init方法：initWithStyle。这就是存在的单元格类型，您可以自定义具有不同变量的不同类型。我向你展示了默认值。然后我们使用reuseIdentifier，它是我们之前所说的出队标识符。他们必须匹配！我`nil`textLabel 只是为了更好的结构，在这种情况下，每个单元格都有相同的文本，所以这并不重要。它使出队的单元格以您实施的正确自定义返回。然后一旦单元格实际有效，我们就可以自定义。

此外，您对每个单元格使用相同的文本。如果您确实想为每个单元格设置不同的文本，请熟悉 NSArray。然后您可以在 numberOfRowsForSection 中提供数组计数，然后执行以下操作：

```
cell.textLabel.text = [array objectAtIndex: [indexPath row]]; 
```

其中 indexPath 是 cellForRowAtIndexPath 方法中提供的 NSIndexPath 参数。行变量是行号，所以一切都合适！

哇，有很多东西要接受！现在不要再做一个客观的菜鸟了，开始读一些书吧！

欲了解更多信息，请阅读：

[表查看 Apple 文档](http://developer.apple.com/library/ios/#documentation/userexperience/conceptual/tableview_iphone/AboutTableViewsiPhone/AboutTableViewsiPhone.html)

# c# - 如何在同一个视图上编辑多个类型（具有相同的基础）？

> ID：13114388
> 
> 赞同：1
> 
> 时间：2012-10-29T00:11:41.490
> 
> 标签：c#, asp.net-mvc, razor

可以说我有两个类一个基类：

```
public class BaseModel {

} 
```

还有几个孩子：

```
public class FooModel : BaseModel {

}

public class BarModel : BaseModel {

} 
```

现在我的观点是，我希望有这样的模型：

```
@model IEnumerable<BaseModel> 
```

在我的行动中，我会按照以下方式传递子类：

```
return View(new List<BaseModel>(){ new FooModel(), new BarModel() }) 
```

然后我会在一页上编辑这些，使用`EditFor`（这很好用）

问题是当我回帖时，我希望能够将这些类型转换为那里的实现类型，但这不起作用。如果我尝试强制转换它，则它为 null 或引发异常。

```
 [HttpPost]
    public ActionResult BaseModelUpdate(IList<BaseModel > model)
{
// I would like to access items in the list as FooModel and BarModel 
} 
```

我怎样才能做到这一点？（将列表中的项目返回到它们的子类类型？）

我在想我可以尝试使用 TryUpdateModel 吗？

谢谢你的帮助。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-29T01:42:02.517

您需要指定集合中项目的索引。

这是控制器代码：

```
public class HomeController : Controller
{
    //
    // GET: /Home/

    public ActionResult Index()
    {

        return 
            View(new List<BaseModel>() { new BarModel() { BaseProp = "Bar" }, new FooModel() { BaseProp = "Foo" } });
    }

    [HttpPost]
    public ActionResult Index(IList<BaseModel> model)
    {
        return this.View(model);
    }

} 
```

如您所见，它没有什么特别之处。神奇之处在于：

```
@using MvcApplication1.Models
@model IList<MvcApplication1.Models.BaseModel>

@{
    ViewBag.Title = "title";
    //Layout = "_Layout";
}

<h2>title</h2>
@using (Html.BeginForm())
{
    for (int i = 0; i < Model.Count; i++)
     {

         @Html.EditorFor(p => p[i])
     }
    <input type="submit" value="Save" />
} 
```

如您所见，传递给 EditorFor 的表达式包含集合中当前项目的索引。[这里](http://haacked.com/archive/2008/10/23/model-binding-to-a-list.aspx)解释了为什么需要这样做。简而言之，EditorFor 为 name 属性包含集合中项目索引的每个属性返回一个输入元素，例如

```
<input class="text-box single-line" name="[0].BaseProp" type="text" value="Bar" /> 
```

**更新**

如果您试图保留对象的类型，您将需要在模型中具有一个特殊的属性，该属性将存储特定的模型类型和一个自定义`IModelBinder`实现，它将基于该属性创建特定的模型实例。下面是模型类。该`Type`属性将呈现为隐藏输入：

```
namespace MvcApplication1.Models
{
    using System.Web.Mvc;

    public class BaseModel
    {

        public string BaseProp { get; set; }

        [HiddenInput(DisplayValue = false)]
        public virtual string Type
        {
            get
            {
                return _type ?? this.GetType().FullName;
            }
            set
            {
                _type = value;
            }
        }
        private string _type;
    }

    public class FooModel : BaseModel
    {
        public string FooProp { get; set; }
    }

    public class BarModel :BaseModel
    {
        public string BarProp { get; set; }
    }
} 
```

这是自定义模型绑定器的示例实现：

```
 public class BaseModelBinder : DefaultModelBinder
    {
        public override object BindModel(ControllerContext controllerContext, ModelBindingContext bindingContext)
        {
            // call to get the BaseModel data so we can access the Type property
            var obj = base.BindModel(controllerContext, bindingContext);
            var bm = obj as BaseModel;
            if(bm != null)
            {
                //call base.BindModel again but this time with a new 
                // binding context based on the spefiic model type
                obj = base.BindModel(
                    controllerContext,
                    new ModelBindingContext(bindingContext)
                        {
                            ModelMetadata =
                                ModelMetadataProviders.Current.GetMetadataForType(null, Type.GetType(bm.Type)),
                                ModelName = bindingContext.ModelName
                        });
            }
            return obj;
        }
    } 
```

您需要在 application_start 上注册自定义活页夹：

```
ModelBinders.Binders.Add(typeof(BaseModel), new BaseModelBinder()); 
```

# meteor - 在 Meteor 中，如何检测新用户何时登录？

> ID：13114390
> 
> 赞同：8
> 
> 时间：2012-10-29T00:11:48.873
> 
> 标签：meteor

文档：

[http://docs.meteor.com/#publish_userId](http://docs.meteor.com/#publish_userId)

说

> 这是恒定的。但是，如果登录用户发生更改，则使用新值重新运行发布函数。

是否有某种方法可以运行一些仅在登录用户更改的事件时触发的事件驱动代码？

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-10-29T08:55:47.077

`Meteor.user()`，`Meteor.userId()`并且`Meteor.userLoaded()`都是反应式数据源（[文档](http://docs.meteor.com/#meteor_user)）。

如果您将它们放在模板助手中或围绕它们构建自己的上下文，您会注意到当前用户何时更改。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-06-28T06:44:32.793

您也可以通过订阅来完成，您可以跟踪用户并登录服务器。看[我的博客](http://meteorhacks.com/logging-support-for-meteor.html)

导航到博客文章中的代码部分。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2016-05-18T03:12:27.403

`{{#if currentUser}}`可能在您的模板中为您工作。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2018-04-22T12:55:51.707

您可以使用内置的`currentUser`帮助程序。

这是它如何工作的示例：

```
 {{#if currentUser}}
     <p>User logged code</p>
  {{else}}
     <p>User not logged code</p> 
  {{/if}} 
```

# c++ - C++ 数组：从一维到二维

> ID：13114395
> 
> 赞同：0
> 
> 时间：2012-10-29T00:12:22.000
> 
> 标签：c++

我有一个整数数组：

```
int a[1]; 
```

然后我想让中的项目`a`成为指向数组下一维的指针。

```
a[0] = new int b[3]; 
```

然后我可以使用双括号索引吗？

```
a[0][0] = 1; //Assign 1 to b[0] 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-29T00:15:56.607

是的，但您必须创建`a`一个指针数组：

```
int *a[1]; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-29T00:18:18.887

如果你想在`a`数组中创建项目，那么你必须以这种方式定义它。

```
int *a[1];
a[0] = new int[3]; 
```

或类似的

```
int a[1][3]; 
```

或者

```
int **a;
a = new int *[1];
a[0] = new int[3]; 
```

但是当你有`c++`标签时，你应该使用`std::vector`（或`std::array`in `c++11`）。

# python - 输出文件仅包含一次迭代的数据

> ID：13114396
> 
> 赞同：0
> 
> 时间：2012-10-29T00:12:22.130
> 
> 标签：python, xml, parsing, for-loop, elementtree

该脚本仅获取一个站的天气信息。我想获取链接中列出的所有内容，并将值写入具有以下脚本格式的文件。

```
#! /usr/bin/python

#import module to open urls
from urllib import urlopen

#import module to parse xml
import xml.etree.ElementTree as ET

#settings
airport = 'KORF,KPHF,KRIC,KDCA,KIAD,KADW,KBWI,KACY,KPHL,KMDT,KPIT,KEWR,KJFK,KLGA,KBOS'

#open xml file
xml_link = urlopen('http://weather.aero/dataserver_current/httpparam?dataSource=metars&requestType=retrieve&format=xml&hoursBeforeNow=1&stationString=KORF,KPHF,KRIC,KDCA,KIAD,KADW,KBWI,KACY,KPHL,KMDT,KPIT,KEWR,KJFK,KLGA,KBOS')

#parse data and assign root to element tree module
tree = ET.parse(xml_link)
root = tree.getroot()

#search for data under <data> and <METAR> tags
data = root.findall('data/METAR')

for metar in data:
    raw_text = metar.find('raw_text').text
    station = metar.find('station_id').text
    category = metar.find('flight_category').text

    file = open('metar.txt', 'w')
    file.write("%s is now reporting %s condition:" % (station, category))
    file.write("\n%s" %raw_text)
    file.close() 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-29T01:49:02.117

[正如此评论](https://stackoverflow.com/questions/13114396/get-all-values-from-xml-file#comment17829798_13114396)中所解释的，您的问题不在于您如何迭代 XML 值，而在于您`metar.txt`每次都在通过循环进行覆盖。

相反，您应该在循环之外打开和关闭文件。该`with`声明可以在这里为您提供帮助，为您处理结案：

```
with open('metar.txt', 'w') as f:
    for metar in data:
        raw_text = metar.find('raw_text').text
        station = metar.find('station_id').text
        category = metar.find('flight_category').text

        f.write("%s is now reporting %s condition:" % (station, category))
        f.write("\n%s" %raw_text) 
```

（您也不应该将其`file`用作文件对象的名称，因为`file`它是文件对象的内置 Python 类型，如果这样做，您将对其进行隐藏。）

# php - 我如何匹配两个字符串，即使它们有 1 个字符不同？

> ID：13114398
> 
> 赞同：2
> 
> 时间：2012-10-29T00:13:00.210
> 
> 标签：php, mysql

我有一个庞大的句子数据库，并且有一个问题是“我很好”这样的句子与“我很好”不匹配，反之亦然或“那是我的吗？” 与“是我的”不匹配，反之亦然，当我希望它们被检测为匹配时。

我已经制作了复杂而混乱的函数，试图用通配符和研究来做到这一点，但这只是一个大混乱。而且我确定必须有一种方法可以使用这种 1 字符 lee 方式进行搜索。如果可以的话，我想控制哪些字符以这种背风方式出现，就像在我的示例中，主要问题原因是问号和半引号。（？'）。

我目前使用带有 php 和 mysql 的平面选择查询来进行匹配查询。

我希望得到一些帮助来解决这个问题，这样我就可以清理当前执行工作不一致的大量代码。

如果有人想查看检查匹配项的代码查询，如下所示：

```
$checkqwry = "select * from `eng-jap` where (eng = '$eng' or english = '$oldeng' or english = '$oldeng2') and (jap = '$jap' or japanese = '$oldjap' or japanese = '$oldjap2');"; 
```

查询的目的是检查数据库中是否已经存在 $eng 和 $jap 的翻译。你看到 $oldeng $oldeng2 和 $oldeng3 等等的原因就像我说的那样，即使有或没有问号等等，我的混乱愚蠢尝试匹配。其中一些 $oldeng 变量有问号或半引号等，而其他变量则没有。上面有更多代码附加和删除问号和东西。是的，它一团糟。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-29T00:15:48.623

在比较字符串之前简单地去除非字母数字字符可能更好。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-29T00:43:01.030

您想使用上面提到的字符串度量算法，PHP 在[http://php.net/manual/en/function.levenshtein.php](http://php.net/manual/en/function.levenshtein.php)以及[http://www.php.net/manual/中内置了这个函数en/function.similar-text.php](http://www.php.net/manual/en/function.similar-text.php)。

MySQL 本身并没有实现这个（特定算法），但有些人继续编写存储过程来完成同样的任务：[http ://www.artfulsoftware.com/infotree/queries.php#552](http://www.artfulsoftware.com/infotree/queries.php#552)

在我看来，使用可以处理任意更改的字符串度量比去除标点符号更好，并且还可以捕获遗漏、换位等......

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-29T00:16:44.473

可以使用sql中的replace函数将“'”替换为“”和“?” 和 ””。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-29T00:43:32.687

您可能想查看 MySQL 中的[自然语言全文搜索](http://dev.mysql.com/doc/refman/5.0/en/fulltext-natural-language.html)。将 FULLTEXT 索引添加到 eng 列。

```
 ALTER TABLE `eng-jap` ADD FULLTEXT INDEX `full` (`eng`) ; 
```

然后，使用匹配功能：

```
 select * from `eng-jap` where match(eng)  against ('Im happy'); 
```

这将返回*我很高兴*和*我很高兴*

如果您选择相关性分数，例如：

```
 select id, match(eng)  against ('Im happy') from `eng-jap` where match(eng)  against ('Im happy'); 
```

您可以使用它来进一步处理 PHP 中的匹配项并进行过滤。

[编辑]：刚刚验证了*昨天*和*昨天的相关性分数？*也一样：

```
 select *, match(eng)  against ('yesterday') as mc from `eng-jap` 
```

结果是：

```
 6, yesterday?, 0.9058732390403748
  7, yesterday, 0.9058732390403748 
```

注意：要应用全文索引，您的 mysql 引擎必须是 MyISAM。此外，句子必须包含超过 3 个字符。该索引似乎与“是”之类的词不匹配。

# xaml - 找出 WinRT 主题动画的缓动函数

> ID：13114401
> 
> 赞同：1
> 
> 时间：2012-10-29T00:13:35.437
> 
> 标签：xaml, animation, windows-runtime

一个有点奇怪的问题，但无论如何要找出 WinRT XAML 主题动画中使用了哪些缓动函数 - 更具体地说，我正在尝试复制 EntranceThemeTransition 的缓动函数（我不能直接使用它）。

我天真地认为使用 .NET Reflector 之类的东西会有所帮助，但我认为我需要*实际*的源代码而不是 .Net Reflector 显示的内容。

有人有什么想法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-19T00:18:23.840

您可能想查看 MSDN 上的 AnimationMetrics 示例。

有一个`AnimationDescription`类会告诉你关于内置动画类型的各种信息，基本上是`Windows.UI.Core.AnimationMetrics.AnimationEffect`枚举中的任何内容。

例如：

```
var animationDescription = new AnimationDescription(AnimationEffect.EnterPage, AnimationEffectTarget.Incoming);

var s = new System.Text.StringBuilder();
s.AppendFormat("Stagger delay = {0}ms", animationDescription.StaggerDelay.TotalMilliseconds);
s.AppendLine();
s.AppendFormat("Stagger delay factor = {0}", animationDescription.StaggerDelayFactor);
s.AppendLine();
s.AppendFormat("Delay limit = {0}ms", animationDescription.DelayLimit.TotalMilliseconds);
s.AppendLine();
s.AppendFormat("ZOrder = {0}", animationDescription.ZOrder);
s.AppendLine();
s.AppendLine();
//etc 
```

链接：[http ://code.msdn.microsoft.com/windowsapps/Animation-metrics-sample-acb0220c](http://code.msdn.microsoft.com/windowsapps/Animation-metrics-sample-acb0220c)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-29T22:13:00.970

我相信这些内置动画以不同的方式实现，并且它们独立于常规 Storyboard + 子动画运行，因此您需要通过一些测试来近似这些，这些测试将这些与您并排运行的常规 Storyboard 动画进行比较。

可视化缓动函数的一种方法是运行主题转换，在一个轴上移动 UI 元素，同时运行另一个在垂直轴上以线性运动（未应用缓动函数）移动元素的主题转换。

# objective-c - 选择器的生命周期是多少？

> ID：13114406
> 
> 赞同：3
> 
> 时间：2012-10-29T00:14:13.850
> 
> 标签：objective-c, selector, objective-c-runtime

在 Objective-C 中，至少有两种方法可以获取（或创建？因此是问题）选择器：`@selector(foo:bar:)`或`NSSelectorFromString(@"foo:bar:")`. 但是选择器的生命周期是多少？

由于选择器（至少）知道它们的名字，它们不太可能是固定大小的可复制值，可以在程序中随机播放。这意味着有人需要分配并可能取消分配它们。Cocoa 框架中的大多数对象都具有保留-释放语义，这使得它们的所有权明确并且相对容易跟踪。但是，我没有看到选择器所有权的明确概念。

我希望使用第一种语法获得的选择器在程序的整个生命周期中都作为全局变量存在（如文字字符串），但是另一个呢？如果我创建/获取一个选择器`NSSelectorFromString(@"foo:bar:")`，它在我的程序的整个生命周期中也有效吗？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-10-29T00:23:08.513

是“获得”，而不是“创造”。两者都只是*检索*由运行时系统创建和拥有的选择器。因此`SEL`， 的寿命实际上是不朽的。

如果您想自己创建选择器，则需要使用运行时函数[`sel_registerName()`](http://developer.apple.com/library/mac/documentation/Cocoa/Reference/ObjCRuntimeRef/Reference/reference.html#//apple_ref/doc/uid/TP40001418-CH1g-BCIGFJBB)。`NSSelectorFromString()`如果您向它传递一个运行时还不知道的名称，则使用此函数。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-10-29T00:24:41.383

根据 Apple 的[文档](https://developer.apple.com/library/mac/documentation/cocoa/reference/foundation/miscellaneous/foundation_functions/reference/reference.html#//apple_ref/c/func/NSSelectorFromString)，选择器在全球范围内注册并且永远存在。如果您传递一个新的或未知的选择器名称，`NSSelectorFromString`它将被注册为一个新的选择器。

# c++ - std::vector::erase 是否使指针无效？

> ID：13114407
> 
> 赞同：0
> 
> 时间：2012-10-29T00:14:23.913
> 
> 标签：c++, pointers, stdvector, erase

假设我有 a`std::vector<Node*> nodes;`和 a `std::vector<Unit*> units;`。每个节点指向一个单元，每个单元又指向节点，因此它们是相连的。但是当我使用**擦除**从任一数组的中间删除一个元素时会发生什么？如果它调整了数组的大小，这是否意味着它会删除所有元素，将它们存储在某个缓冲区中并重新构建调整后的数组？所以如果我在节点上使用擦除，单元中的指针会变得无效吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-29T00:27:35.853

从向量的中间删除或插入元素会适当地向下或向上移动所有较高的元素。但是由于您只是在移动指针，因此这几乎是微不足道的操作。其他指针（您没有擦除的指针）没有任何反应，任何指针都没有任何*反应*。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-29T00:33:10.347

从指针向量中删除元素不会调用指针指向的对象的删除。您的 Node<->Unit 指针将保持有效。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2016-10-08T07:17:42.243

在向量上使用擦除会使擦除元素之后的所有元素的指针无效。

当您在向量中间使用擦除/插入时，其他元素将在内存中向下或向上移动，并且使用这些指针现在将产生未定义的行为。

如果您想保持这些指针有效，您的选择是：

1.  擦除后，循环遍历刚刚使用擦除的向量并将元素指针重新分配给另一个向量。

2.  使用列表。list.erase() 不会使指针/迭代器无效，除了您正在擦除的元素，因此请确保删除您在其他向量中擦除的项目的指针。

列表的缺点是它们没有随机访问权限，因此您需要遍历，没有 list[] 适合您。

希望这可以帮助。

# python - 运行 Django 的 syncdb (mac OS 10.7.5) 时出现 Postgresql 套接字错误

> ID：13114411
> 
> 赞同：0
> 
> 时间：2012-10-29T00:14:51.250
> 
> 标签：python, django, postgresql

我正在尝试运行 Django 的 syncdb 操作并收到以下错误：

```
psycopg2.OperationalError: could not connect to server: Permission denied
    Is the server running locally and accepting
    connections on Unix domain socket "/var/pgsql_socket/.s.PGSQL.5432"? 
```

我已阅读[此问题](https://stackoverflow.com/questions/9133870/postgresql-socket-error-on-osx-10-7-3-when-running-djangos-syncdb)的答案并尝试了以下方法：

*   在 /Library/PostgreSQL/9.1/data/potsgresql.conf 中将“listen_address”更改为“localhost”或“*”
*   在我的 settings.py 文件中将“主机”更改为“本地主机”（对于 Django）
*   用户在 settings.py 中设置为“postgres”，密码正确

（我在每一步之后都重新启动了 postgresql 服务器。）

我还检查了我的 pg_hba.conf 文件以查看 Unix 域套接字是否正在接受来自所有用户的连接（基于[此页面](http://www.faqforge.com/linux/server/postgresql/configure-postgresql-accept-connections/)）。这是我在那里的：

```
# "local" is for Unix domain socket connections only
local   all             all                                     md5
# IPv4 local connections:
host    all             all             127.0.0.1/32            md5
# IPv6 local connections:
host    all             all             ::1/128                 md5 
```

我以前从来没有遇到过这个问题。我最近升级到了 Lion，并且正在开发一个新的 virtualenv，并且安装了最少的模块。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-30T02:59:22.153

[找到了Bradley Ayers](http://bradleyayers.blogspot.com/2011/07/repairing-postgresql-after-upgrading-to.html?showComment=1351477812187#c5832541126778786188)提供的答案：

*   在 postgres.conf 中将“unix_socket_directory”设置为“/var/pgsql_socket/”
*   执行以下命令：
    *   “$ sudo dscl。附加 /Groups/_postgres GroupMembership postgres”
    *   "$ sudo chmod g+w,o+rx /var/pgsql_socket/"
*   重新启动postgresql

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-29T05:43:24.007

你的数据库没有运行试试

```
pg_ctl -D /usr/local/var/postgres 启动

```

假设那是您的 postgre 数据目录所在的位置

# google-chrome - 在 Chrome 中打开 Sans Google Web 字体渲染

> ID：13114417
> 
> 赞同：10
> 
> 时间：2012-10-29T00:15:36.507
> 
> 标签：google-chrome, safari, google-webfonts

我注意到从 Chrome 到 Safari/Firefox 的 Open Sans（Google Web 字体）的渲染存在显着差异。我附上了两张照片，第一张是 chrome，第二张是 safari。

我在样式表中只有：

```
 font-family: 'Open Sans', sans-serif;
        font-size:14px; 
```

希望您能提供帮助，因为我真的很喜欢 chrome（第一张图片）渲染，但讨厌另一个！

![铬合金](../Images/b29d67502ab1cf56d5cc0d548590e883.png)

![Safari/火狐](../Images/71e8ad566fc72b097dea3e197fb034d8.png)

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-04-03T04:39:38.813

添加到头部

```
<link href='http://fonts.googleapis.com/css?family=Open+Sans:400,600,300' rel='stylesheet' type='text/css'> 
```

CSS 规则

```
.btn{
    font-family: 'Open Sans', sans-serif;
    font-weight:300;
    text-rendering: optimizeLegibility;
font-size: .9em;
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-29T05:24:52.097

过去，我很幸运地使用`font-weight: lighter!important;`了看起来更粗、与预期外观完全不同的字体。每个浏览器对字体的解释都不同。Google Web Fonts 尽最大努力提供正确的版本，但有时浏览器和操作系统之间会发生巨大的变化。

希望这些信息有帮助！让我知道这个解决方案是否有效，否则我可以进一步研究。Open Sans 是一款不错的网页字体，不错的选择 :)

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2015-07-15T15:47:10.350

我直接在我的标题中添加了这一行，它正在工作！

```
<link href='//fonts.googleapis.com/css?family=Open+Sans:300,400,600' rel='stylesheet' type='text/css'>

.nav > li > a {
    color: #000; font-size: 13px; font-weight: 600;
} 
```

而不是只在 Header 中调用没有大小的字体，然后将其定义为粗体，这是一种不起作用的方法。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2014-11-30T12:28:11.130

存在一个问题，即**Safari 以固定大小呈现字体，**而**其他浏览器更准确地呈现它们：**

[tech.Ozake.com 上的示例](http://tech.ozake.com/safari-size-rendering.html)

因此，如果您要求文本的**大小介于 Safari 的两个步骤之间，**您将在 Safari 中获得与在其他浏览器中**不同的结果。**

因此，根据您声明字体大小和窗口大小的方式，您将获得不同大小的结果。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2020-01-10T12:22:30.580

这种解决方法帮助我使 Open Sans 在不同的浏览器中看起来非常接近。

```
<script>
function loadCss(path){
    var fileref=document.createElement("link");
    fileref.setAttribute("rel", "stylesheet");
    fileref.setAttribute("type", "text/css");
    fileref.setAttribute("href", path);

    document.getElementsByTagName("head")[0].appendChild(fileref);
}

if (ViewUtil.isChromeBrowser()) {
    loadCss('https://fonts.googleapis.com/css?family=Open+Sans:400,600');
} else {
    loadCss('https://fonts.googleapis.com/css?family=Open+Sans:300,600');
} 
```

我们正在为 chrome 强制使用更“大胆”的字体版本

* * *

## 回答 #6

> 赞同：-2
> 
> 时间：2012-10-29T00:19:02.813

您显然没有重置默认浏览器 CSS，请尝试明确设置 font-weight。

# date - 迄今为止解析字符串不起作用

> ID：13114424
> 
> 赞同：0
> 
> 时间：2012-10-29T00:16:01.620
> 
> 标签：date, groovy

我尝试在 namedQuery 中解析一个字符串，但它似乎不起作用。我的域类中有这段代码：

```
 searchBirthdaten{ q ->
        def dates = Date.parse("yyyyy:MM:dd HH:mm:ss", "2011-9-21 00:00:00")
         eq 'birthDate' , dates)
    } 
```

但我总是得到这个错误：

```
 Unparseable date: "2011-9-21 00:00:00" 
```

我真的不明白为什么会这样。任何想法？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-10-29T00:18:30.250

您的日期输入字符串必须采用您定义的格式：（已`yyyy:MM:dd HH:mm:ss`更正）

所以你的3个问题是：

1.  您正在使用“-”字符来分隔您的解析日期，但您的格式字符串使用的是“：”
2.  `y`您的格式字符串中有 5 个，即`yyyyy:MM...`. 这将在另外 8 千年内无效；）
3.  您将月份格式定义为，`MM`但您仅传递“9”，这将需要为“09”以匹配您的格式字符串。

# c - C 列表 - 访问结构的成员并打印它

> ID：13114426
> 
> 赞同：0
> 
> 时间：2012-10-29T00:16:14.867
> 
> 标签：c, list, struct, nodes

我在使用 C 中的列表时遇到了一些问题。

我做了这个结构：

```
typedef struct str {
char * str;
struct str * prox;
struct str * ant;
} cadena; 
```

然后在主目录中，我以第一个指向 NULL 的指针开始列表。

```
cadena * lista = NULL; 
```

然后我创建了一个函数，用户可以在其中向列表添加新元素（“str”成员中的字符串），并管理构建列表的指针。这似乎工作正常。我希望。

但是当我想打印一个节点的成员时，我正在尝试使用这样的东西，但它不起作用：

```
void showdata (cadena *lista) {
    int i=0;
    while (lista.str[i] != '\0')
    {
        printf("%c\n",str[i]);
        i++;
    }
} 
```

我收到这些错误：

```
from line "while (lista.str[i] != '\0')"
.error: request for member ‘str’ in something not a structure or union 
```

（为什么它需要一个结构？我以为我正在访问那里的成员）

```
from line "printf("%c\n",str[i]);"     
.error: ‘str’ undeclared (first use in this function) 
```

（不是用结构声明的吗？）

我肯定做错了什么，但我不明白哪种方法是访问 char 成员并打印它的正确方法。

先感谢您。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-29T00:19:21.713

```
lista.str[i] 
```

应该

```
lista->str[i] 
```

任何你有一个指向你使用的结构的指针的地方 -> not 。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-29T00:20:45.160

尝试：

```
while (lista->str[i] != '\0')
    printf("%c\n",lista->str[i++]); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-29T00:49:32.777

这是一个指针符号问题。C 可能会以这种方式令人困惑。

`lista.str[i]`

不起作用，因为 C 无法识别“。” 就像搬到一个领域一样。对于像我这样习惯于 C# 或其他 OOP 语言的人来说，这可能是个问题，您可以在其中使用“.”。修改对象的属性，例如

`control.visibility = "False"`

在 C 中，结构是基于指针的，所以你需要像 Keith 所说的那样使用 -> 。您*指向*内存中的某个位置，或者指向某个字段所在的结构中的“位置”。这么想，应该不会有太多问题。

C 还允许您使用“.”...但前提是您强烈键入引用。对你来说，这意味着去

`(*lista).str[i]`

这样您对 lista 实例的引用就被视为指向该结构的指针。

因此，在审查中，要么

`lista->str[i]`

或者

`(*lista).str[i]`

*应该*工作。

# java - 我应该如何设计这段代码（并行类层次结构）？

> ID：13114428
> 
> 赞同：1
> 
> 时间：2012-10-29T00:16:35.963
> 
> 标签：java, design-patterns

我有一组应用程序都需要与网络服务同步：

1.  从 Web 服务下载一些 XML。
2.  解析那个 XML。
3.  然后更新数据库以匹配解析的 XML。

我想将尽可能多的相关代码保留在一个通用库中以避免重复，并且我想让不同的应用程序都将它们的解析和更新代码放入一个相当简单的通用框架中。

所以有一个常见的sync()方法：

```
public void sync(URI updateUrl, XMLParser parser, Updater animalUpdater) {
    String raw = getXML();
    List<ParsedAnimal> parsed = parser.parse(raw);
    // try:
    // begin transaction
    for (ParsedAnimal pi : parsed) {
        animalUpdater.updateItem(pi);
    }
    // commit transaction
    // catch: rollback transaction, rethrow
    // finally: close database connection
} 
```

解析器返回 ParsedCat 或 ParsedDog 或其他任何东西，所有这些都继承自一个公共 ParsedAnimal 类：

```
public abstract class ParsedAnimal {...}
public class ParsedCat extends ParsedAnimal {...}
public class ParsedDog extends ParsedAnimal {...} 
```

然后我有一个更新程序，它需要获取已解析的项目并将内容注入数据库：

```
public abstract class Updater {
    public abstract void updateItem(ParsedAnimal parsed);
}
public class CatUpdater extends Updater {
    @Override
    public void updateItem(ParsedCat parsed) {}
}
public class DogUpdater extends Updater {...} 
```

这不起作用——Updater 的合同规定 updateItem() 接受 ParsedAnimal，而 CatUpdater 和 DogUpdater 都通过只接受特定类型的动物来打破该合同。

我拥有的是一个并行的类层次结构——ParsedX 与 XUpdater 一对一匹配。Coding Horror 上的[Code Smells](http://www.codinghorror.com/blog/2006/05/code-smells.html "代码气味")页面建议将两个类层次结构合并到一个层次结构中，但我觉得“正在处理的东西”和“正在工作的东西”足够不同，它们应该是单独的类。

有没有一种简洁的方式来构建它，或者一些可以派上用场的设计模式？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-29T00:20:46.297

`Updater`泛型可以为您的合同问题派上用场：

```
public abstract class Updater<T extends ParsedAnimal> {
    public abstract void updateItem(T parsed);
}
public class CatUpdater extends Updater<ParsedCat> {
    @Override
    public void updateItem(ParsedCat parsed) {}
}
public class DogUpdater extends Updater<ParsedDog> {...} 
```

但是，您的`sync`方法有一个`Updater`作为参数，它尝试将其用于所有已解析的项目。这行不通。如果您将有一个单独的`Updater`每个解析类型，您需要根据您拥有的解析结果来实例化更新程序。这可以通过某种形式的“工厂”来处理。首先，您可能想看看使用[工厂方法](http://en.wikipedia.org/wiki/Factory_method_pattern)模式。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-29T00:23:56.860

```
updateItem(ParsedAnimal parsed){
    if (parsed instanceof ParsedCat) {
        ... 
    } else if (parsed instanceof ParsedDog) {
        ... 
    } 
} 
```

# python - 正则表达式匹配重复字符串python

> ID：13114430
> 
> 赞同：0
> 
> 时间：2012-10-29T00:17:05.297
> 
> 标签：python, regex

我得到了字符串：

> abc123abc123abc123
> 
> abc123
> 
> abc123abc123abc123abc123abc123abc123
> 
> 等（我不知道重复长度的 abc123 的不同单位）

任务是提取第一个 1 和第一个 a 以及最后一个 c 和最后一个 3。是否可以使用 1 个正则表达式来做到这一点，如果可能的话，该怎么做？我保留了重复单元的计数，并且根据计数，我已经能够使用一些正则表达式来执行任务，但如果可能的话，我想使用一个正则表达式。谢谢

编辑：在真实情况下。它更像是 a:(a number)bc:(a number)1:(a number)23:(a number) 等，我必须捕获第一个 a 数字、第一个 1 数字、最后一个 c 数字和最后 3 个数字。

杰夫

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-29T00:30:27.820

使用两个正则表达式最容易做到这一点。`"^(a)bc(1)23" and "ab(c)12(3)$"`. 可能可以合并这两个，但正则表达式将变得非常不可读。

# android - 如何知道我应该在扩展另一个类的类中实现的方法

> ID：13114431
> 
> 赞同：2
> 
> 时间：2012-10-29T00:17:07.127
> 
> 标签：android, inheritance, interface, adapter

我有这门课

```
public class AdapterListView extends BaseAdapter { } 
```

如果我不实现某些方法，例如 getCount()，则会出现错误

错误是：

> AdapterListView 类型必须实现继承的抽象方法 Adapter.getCount()

该类`BaseAdapter`实现`ListAdapter`和`SpinnerAdapter`。这些接口继承了`Adapter`接口的方法，但是这个接口有以下抽象方法：

*   获取计数（）
*   获取项目 ()
*   获取项目标识 ()
*   获取项目视图类型 ()
*   获取视图（）
*   获取视图类型计数 ()
*   hasStableIds ()
*   是空的 （）
*   registerDataSetObserver ()
*   unregisterDataSetObserver ()

有关详细信息，请参阅[适配器接口。](http://developer.android.com/reference/android/widget/Adapter.html)

但我只是实现了getCount()、getItem()、getItemId()、getView()。并且编译器不会给出这个错误。为什么会发生这种情况？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-29T01:03:54.937

您不需要实现这些方法的原因是它们已经在抽象类中实现了`BaseAdapter`。

请参阅源代码链接：[BaseAdapter](http://grepcode.com/file/repository.grepcode.com/java/ext/com.google.android/android/2.2_r1.1/android/widget/BaseAdapter.java)

类类型`abstract`可以实现一些方法，并为扩展它的类保留一些方法。

问候。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-29T00:43:20.000

如果你扩展一个类，你不需要实现这个类的所有方法。某些方法必须至少像您的情况一样声明 getCount()、getId() 等，如果需要，您也可以覆盖它们。在 Eclipse 中，当您悬停类名并单击它时，您可以看到必须声明哪些方法。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2016-12-24T20:40:30.900

不要更改这些方法的名称

获取计数（）；

获取项目（）；

getItemId();

获取项目视图类型（）；

获取视图（）；

getViewTypeCount();

# ant - Jenkins 访问窗口服务器

> ID：13114432
> 
> 赞同：2
> 
> 时间：2012-10-29T00:17:12.247
> 
> 标签：ant, air, window, jenkins

我有以下问题：我在 Jenkins-CI 中有一个 ANT 任务（显然）需要访问 OSX 的窗口服务器（它需要显示一个窗口）。经过一番研究，似乎只有当前登录的用户和“root”用户（或 SUDO）才能访问 OSX 的窗口服务器。ANT 任务 (Adobe ADL) 是实际“运行”构建的任务，因此它必须弹出一个屏幕。

我在运行 OSX 10.7.something (Lion)、Jenkins 1.487、Ant 1.8.4 的 MacBook 上。

到目前为止我已经尝试过：

*   首先，尝试使用“准系统”<exec> 任务来调用 ADL。有效，但出现错误意味着 Jenkins 作为守护进程运行（使用 homedir /Users/shared/Jenkins/Home）无法访问 OSX 的 Window Server。

*   以我自己的身份运行 Jenkins，通过更改 jenkins launchd.conf 文件中的 USER_NAME、GROUP_NAME、JENKINS_HOME：[https](https://wiki.jenkins-ci.org/display/JENKINS/Thanks+for+using+OSX+Installer) ://wiki.jenkins-ci.org/display/JENKINS/Thanks+for+using+OSX+Installer 这提供了很多错误/麻烦，我试图通过与 Jenkins CI 的创建者的沟通来解决，但不幸的是无济于事。

*   尝试让 Ant 运行一个 < exec > 任务（运行一个 shell 脚本），在该任务中，我尝试使用这种偷偷摸摸地将密码传递给 stdinput 的方式使用密码来 sudo：sudo -S < command > 这真的很糟糕，但是当我在本地运行 Jenkins（无法从我的 LAN 外部访问）时，它是 np.

*   试图让 Ant 运行 < exec > 任务，使用“重定向器”和我的密码作为输入字符串。也很棒，但是是的，我只是想让它工作。它没有。

*   尝试了 Jenkins SSH 插件：没有用。但是，我可以使用终端 SSH 到我自己的本地主机，事情是，我不知道 Jenkins SSH 试图做什么（我怎么能弄清楚呢？）所以我不知道为什么它不会工作。

*   试图让 Ant 运行一个 SSHEXEC 任务（几个小时后，它终于工作了。Ant for mac 很糟糕，一些可选的 .jar 任务没有被正确重命名或其他东西），但我得到了一个“com.jcraft。 jsch.JSchException：身份验证失败”，我用谷歌搜索，似乎无法解决。唯一适用的解决方案是让 sshd 接受密码身份验证，这样做，仍然得到同样的错误。

我认为我想要完成的事情不值得我在这个问题上花费的 2 天时间，尽管我学到了很多东西。但是，我只是希望它起作用并且不会接受失败：）

我的问题：您是否必须解决类似的问题，您是如何解决的？有没有其他方法可以尝试解决这个问题？有没有提到的方法应该*只是*_WORK_而我做错了什么？

**[编辑] 我决定使用 Jenkins 独立应用程序，因为我认为（对我而言）这是一个更好的解决方案，因为我的笔记本电脑不是构建服务器。此外，Jenkins 应用程序可以在启动时启动，因此它实际上充当本地服务器。**

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-29T15:55:14.453

快速猜测一下：如果您不想要脚本的交互性，而脚本可以没有它，您可以尝试在 java 命令行上设置无头模式：

```
-Djava.awt.headless=true 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-29T20:54:07.433

我决定使用 Jenkins 独立应用程序，因为我认为（对我而言）这是一个更好的解决方案，因为我的笔记本电脑不是（无头）构建服务器。此外，Jenkins 应用程序可以在启动时启动，因此它也可以充当服务器。

# xcode - 页面视图控制器 - 从图像到另一个视图控制器

> ID：13114433
> 
> 赞同：0
> 
> 时间：2012-10-29T00:17:22.330
> 
> 标签：xcode, storyboard, uipageviewcontroller

我对我想要完成的事情有点困惑。我有一个页面视图控制器，它有一个包含图像数组列表的数据源。它实际上是一个用户可以翻阅的教程。我要做的是使最后一页成为登录屏幕，以便用户可以输入信息并点击登录按钮。我认为这就像在数组中添加一个登录视图控制器一样简单，但是我错了 D：当我尝试时，我得到了这个错误：

***由于未捕获的异常“NSInvalidArgumentException”而终止应用程序，原因：“-[UIViewController _isResizable]：无法识别的选择器发送到实例 0xa160660”

我为自己是一个菜鸟而道歉，我对所有这些都是新手，只是想弄清楚它。这是我的代码（实际上是通过使用这个网站完成的）：

我的数据源（ModelController.h）

```
#import <Foundation/Foundation.h>
@class DataViewController;
@interface ModelController : NSObject <UIPageViewControllerDataSource>
- (DataViewController *)viewControllerAtIndex:(NSUInteger)index storyboard:(UIStoryboard   *)storyboard;
- (NSUInteger)indexOfViewController:(DataViewController *)viewController;`
@end 
```

模型控制器.m

```
#import "ModelController.h"
#import "DataViewController.h"
#import "LoginViewController.h"

@interface ModelController()
@property (readonly, strong, nonatomic) NSArray *pageData;
@end

@implementation ModelController

- (id)init
{
self = [super init];
if (self)
{

    // Create the data model
    _pageData = [[NSArray alloc] initWithObjects:

                    [UIImage imageNamed:@"tutorial1.png"],
                    [UIImage imageNamed:@"tutorial2.png"],
                    [UIImage imageNamed:@"lastWishes.png"],
                    [UIImage imageNamed:@"todo.png"],
                    [UIImage imageNamed:@"web.png"],
                 (LoginViewController*)[[UIViewController alloc] init],

                     nil];
}
return self;
}

- (DataViewController *)viewControllerAtIndex:(NSUInteger)index storyboard:(UIStoryboard *)storyboard
{
// Return the data view controller for the given index.
if (([self.pageData count] == 0) || (index >= [self.pageData count]))
{
    return nil;
}

// Create a new view controller and pass suitable data.
DataViewController *dataViewController = [storyboard      instantiateViewControllerWithIdentifier:@"DataViewController"];
dataViewController.dataObject = self.pageData[index];
return dataViewController;
}

- (NSUInteger)indexOfViewController:(DataViewController *)viewController
{
// Return the index of the given data view controller.
// For simplicity, this implementation uses a static array of model objects and the view      controller stores the model object; you can therefore use the model object to identify the index.
return [self.pageData indexOfObject:viewController.dataObject];
}

#pragma mark - Page View Controller Data Source

- (UIViewController *)pageViewController:(UIPageViewController *)pageViewController     viewControllerBeforeViewController:(UIViewController *)viewController
{
NSUInteger index = [self indexOfViewController:(DataViewController *)viewController];
if ((index == 0) || (index == NSNotFound)) {
    return nil;
}

index--;
return [self viewControllerAtIndex:index storyboard:viewController.storyboard];
}

- (UIViewController *)pageViewController:(UIPageViewController *)pageViewController     viewControllerAfterViewController:(UIViewController *)viewController
{
NSUInteger index = [self indexOfViewController:(DataViewController *)viewController];
if (index == NSNotFound) {
    return nil;
}

index++;
if (index == [self.pageData count]) {
    return nil;
}
return [self viewControllerAtIndex:index storyboard:viewController.storyboard];
}

@end 
```

父级 (RootViewController.h)

```
#import <UIKit/UIKit.h>

@interface RootViewController : UIViewController <UIPageViewControllerDelegate>

@property (strong, nonatomic) UIPageViewController *pageViewController;

@end 
```

根视图控制器.m

```
#import "RootViewController.h"

#import "ModelController.h"

#import "DataViewController.h"

@interface RootViewController ()
@property (readonly, strong, nonatomic) ModelController *modelController;
@end

@implementation RootViewController

@synthesize modelController = _modelController;

- (void)viewDidLoad
{
[super viewDidLoad];
// Do any additional setup after loading the view, typically from a nib.
// Configure the page view controller and add it as a child view controller.
self.pageViewController = [[UIPageViewController alloc]   initWithTransitionStyle:UIPageViewControllerTransitionStylePageCurl  navigationOrientation:UIPageViewControllerNavigationOrientationVertical options:nil];
self.pageViewController.delegate = self;

DataViewController *startingViewController = [self.modelController viewControllerAtIndex:0 storyboard:self.storyboard];
NSArray *viewControllers = @[startingViewController];
[self.pageViewController setViewControllers:viewControllers direction:UIPageViewControllerNavigationDirectionForward animated:NO completion:NULL];

self.pageViewController.dataSource = self.modelController;

[self addChildViewController:self.pageViewController];
[self.view addSubview:self.pageViewController.view];

// Set the page view controller's bounds using an inset rect so that self's view is visible around the edges of the pages.
CGRect pageViewRect = self.view.bounds;
self.pageViewController.view.frame = pageViewRect;

[self.pageViewController didMoveToParentViewController:self];

// Add the page view controller's gesture recognizers to the book view controller's view so that the gestures are started more easily.
self.view.gestureRecognizers = self.pageViewController.gestureRecognizers;
}

- (void)didReceiveMemoryWarning
{
[super didReceiveMemoryWarning];
// Dispose of any resources that can be recreated.
}

- (ModelController *)modelController
{
// Return the model controller object, creating it if necessary.
// In more complex implementations, the model controller may be passed to the view controller.
if (!_modelController) {
    _modelController = [[ModelController alloc] init];
}
return _modelController;
}

#pragma mark - UIPageViewController delegate methods

/*
- (void)pageViewController:(UIPageViewController *)pageViewController didFinishAnimating:    (BOOL)finished previousViewControllers:(NSArray *)previousViewControllers transitionCompleted:  (BOOL)completed
{

}
*/

- (UIPageViewControllerSpineLocation)pageViewController:(UIPageViewController *)pageViewController spineLocationForInterfaceOrientation:(UIInterfaceOrientation)orientation
{
// Set the spine position to "min" and the page view controller's view controllers array to contain just one view controller. Setting the spine position to 'UIPageViewControllerSpineLocationMid' in landscape orientation sets the doubleSided property to YES, so set it to NO here.
UIViewController *currentViewController = self.pageViewController.viewControllers[0];
NSArray *viewControllers = @[currentViewController];
[self.pageViewController setViewControllers:viewControllers direction:UIPageViewControllerNavigationDirectionForward animated:YES completion:NULL];

self.pageViewController.doubleSided = NO;
return UIPageViewControllerSpineLocationMin;
}

@end 
```

孩子 (DataViewController.h)

```
#import <UIKit/UIKit.h>

@interface DataViewController : UIViewController
@property (strong, nonatomic) id dataObject;
@property (weak, nonatomic) IBOutlet UIImageView *imageView;

@end 
```

数据视图控制器.m

```
#import "DataViewController.h"

@interface DataViewController ()

@end

@implementation DataViewController

- (id)initWithNibName:(NSString *)nibNameOrNil bundle:(NSBundle *)nibBundleOrNil
{
self = [super initWithNibName:nibNameOrNil bundle:nibBundleOrNil];
if (self) {
    // Custom initialization
}
return self;
}

- (void)viewDidLoad
{
[super viewDidLoad];
// Do any additional setup after loading the view.
}

- (void)didReceiveMemoryWarning
{
[super didReceiveMemoryWarning];
// Dispose of any resources that can be recreated.
}

- (void) viewWillAppear:(BOOL)animated
{
[super viewWillAppear:animated];
self.imageView.image = _dataObject;
}

@end 
```

再次，有问题的代码在这里我试图将视图控制器添加到数据源作为最后一页：

```
_pageData = [[NSArray alloc] initWithObjects:

                [UIImage imageNamed:@"tutorial1.png"],
                [UIImage imageNamed:@"tutorial2.png"],
                [UIImage imageNamed:@"lastWishes.png"],
                [UIImage imageNamed:@"todo.png"],
                [UIImage imageNamed:@"web.png"],
             (LoginViewController*)[[UIViewController alloc] init],

                 nil]; 
```

并在运行时出现无法识别的选择器错误。我也试过这个：

```
- (id)init
{
self = [super init];
if (self)
{
    LoginViewController *viewController = [self.storyboard instantiateViewControllerWithIdentifier:@"LoginViewController"];
    // Create the data model
    _pageData = [[NSArray alloc] initWithObjects:

                    [UIImage imageNamed:@"tutorial1.png"],
                    [UIImage imageNamed:@"tutorial2.png"],
                    [UIImage imageNamed:@"lastWishes.png"],
                    [UIImage imageNamed:@"todo.png"],
                    [UIImage imageNamed:@"web.png"],
                     viewController,

                     nil];
}
return self;
} 
```

任何建议都会很棒。谢谢！！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-29T13:59:42.457

你的想法是 100% 正确的，但你的实现不是。

这一行：

> dataViewController.dataObject = self.pageData[索引];

非常可疑，因为在您的登录屏幕的情况下，这将返回一个 UIViewController。我建议您对页面数据进行[类型检查](http://developer.apple.com/library/mac/#documentation/Cocoa/Reference/Foundation/Protocols/NSObject_Protocol/Reference/NSObject.html#//apple_ref/occ/intfm/NSObject/isKindOfClass%3a)，如果它已经是 UIViewController 子类，只需返回它，如果它（在您的情况下）是 UIImage，请将其添加为数据对象。

# jquery - jQuery Ui 选项卡无法处理加载文档中的 onclick

> ID：13114434
> 
> 赞同：0
> 
> 时间：2012-10-29T00:17:25.820
> 
> 标签：jquery, jquery-ui, jquery-ui-tabs

我有这样的 jQuery Ui 标签

```
<div id="tabs">
    <ul>
        <li><a href="#tabs-1">Preloaded</a></li>
        <li><a href="ajax/content1.php">Tab 1</a></li>
        <li><a href="ajax/content2.php">Tab 2</a></li>
        <li><a href="ajax/content3-slow.php">Tab 3 (slow)</a></li>
        <li><a href="ajax/content4-broken.php">Tab 4 (broken)</a></li>
    </ul>
    <div id="tabs-1">

    </div>
</div> 
```

在我拥有的 JavaScript 中

```
$(document).ready(function() {
    $( "#moreinfotabs" ).tabs();
    $('a').click(function(){
        alert("asdas");
    }); 
```

例如，当 content1.php 被加载时，我想处理点击 content1.php 中的链接并发出警报，但它没有发生。怎么做 ？

PS：我写了一个链接，我想用a.classname ....

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-29T00:25:58.243

对于动态生成的元素，应该从元素的静态父级之一或文档对象委托事件。

```
$(document).on('click', 'a', function(){
    alert("asdas");
}); 
```

请注意，您尚未关闭文档就绪处理程序：

```
$(document).ready(function() {
    $( "#moreinfotabs" ).tabs();
    $(document).on('click', 'a', function(){
        alert("asdas");
    });
}) // <-- 
```

# php - 带有变量名称的 PHP 回显动态单选按钮

> ID：13114436
> 
> 赞同：0
> 
> 时间：2012-10-29T00:17:45.380
> 
> 标签：php, variables, dynamic, radio

所以我在 XHTML 中有这些单选按钮，我想将它们放入 PHP 函数中来生成，但我无法让它工作。

在 XHTML 中它看起来像这样并且正在工作；

```
<p><input type="radio" value="<? echo blabla; ?>" name="radioA" checked="checked" /></p>
<input type="hidden" value="<? echo $value; ?>" name="hiddenA[]" /> 
```

在 PHP 中，我需要将“radioA”和“hiddenA”分别设置为变量“radioB”/“hiddenB”、“radioC”/“hiddenC”等，这样我的代码才能正常工作。这是我到目前为止所拥有的，但它不起作用。第一个无线电名称是一个字符串，但第二个是数组。提前致谢。

```
function radio($Radio, $Array) {
    echo '<p><input type="radio" value="$value>" name="$Radio" />', $value, '</p>';
    echo '<input type="hidden" value="$value" name="$Array" />';
} 
```

我想我想要做的是将变量的名称作为字符串返回。$_POST['hiddenA'] ===> hiddenA[]

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-29T00:31:33.260

基本的php语法：

```
$a = 'hello';
echo '$a'; // outputs the literal characters $ and a
echo "$a"; // outputs "hello" 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-29T00:47:58.673

您在这里有一些语法问题：

```
function radio($Radio, $Array) {
    echo '<p><input type="radio" value="$Value>" name="$Radio" />', $Value, '</p>';
    echo '<input type="hidden" value="$Value" name="$Array" />';
} 
```

1.  嵌入变量时必须使用 "" 而不是 ''：

    `echo "My name is {$name}.";`

2.  在 PHP 中。字符用于附加字符串 not ,

    `echo "My name is " . $name . " and I am cool";`

3.  如果您尝试回显一个数组，您将得到单词 Array 而不是数组本身。相反，您可以在数组中回显一个值：

    `echo "$array[0]";`

4.  您正在尝试使用示例中未定义的变量：`$Value`. 这会给你一个 VariableUndefined 异常。

5.  在 PHP 中变量名的开头使用大写字母通常是不好的做法。`$Array`应该如此`$array`。

考虑到这些，您的代码应该类似于：

```
function radio($radio, $array) {
    $value1 = $array[0];
    $value2 = $array[1];

    echo "<p><input type=\"radio\" value=\"$value1>\" name=\"$radio\" />$value1</p>";
    echo "<input type=\"hidden\" value=\"$value2\" name=\"$value2\" />";
} 
```

从你的例子的声音来看，你需要一个 for 循环。

# matlab - 如何通过在 Matlab 中使用 probplot() 来获取数据对分布的适应度？

> ID：13114443
> 
> 赞同：2
> 
> 时间：2012-10-29T00:19:00.090
> 
> 标签：matlab, plot, matplotlib, python-2.7, probability

我有两组浮点数数据，一组 A 和一组 B。它们都是大小为 40*40 的矩阵。我想知道哪个集合更接近正态分布。我知道如何在 matlab 中使用 probplot() 来绘制一组概率。但是，我不知道如何找出分布的适应度水平。

In python, when people use problot, a parameter ,R^2, shows how good the distribution of the data is against to the normal distribution. The closer the R^2 value to value 1, the better the fitness is. Thus, I can simply use the function to compare two set of data by their R^2 value. However, because of some machine problem, I can not use the python in my current machine. Is there such parameter or function similar to the R^2 value in matlab ?

Thank you very much,

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-31T01:52:43.233

@nate (+1) 的方法绝对是解决这个问题的一种可能方法。但是，我的统计学家不得不提出以下替代方案（唉，这确实需要统计工具箱 - 但如果你有学生版，你就有这个）：

鉴于您的数据是正态的（不是多元正态的），请考虑使用[Jarque-Bera](http://www.mathworks.com.au/help/stats/jbtest.html)检验。

Jarque-Bera 检验给定数据集由正态分布生成的零假设，而不是由其他分布生成的替代假设。如果 Jarque-Bera 检验统计量小于某个临界值，则我们无法拒绝原假设。

那么这如何帮助解决拟合优度问题呢？好吧，测试统计量越大，数据就越“非正态”。检验统计量越小，数据越“正常”。

因此，假设您已将矩阵转换为两个向量，`A`并且`B`（根据您在问题中提供的维度，每个向量应为 1600 x 1），您可以执行以下操作：

```
%# Build sample data
A = randn(1600, 1);
B = rand(1600, 1);

%# Perform JB test
[ANormal, ~, AStat] = jbtest(A);
[BNormal, ~, BStat] = jbtest(B);

%# Display result
if AStat < BStat
    disp('A is closer to normal'); 
else
    disp('B is closer to normal');
end 
```

作为这样做的一点好处，`ANormal`并告诉您是否可以拒绝或无法拒绝样本属于或来自正态分布`BNormal`的原假设！具体来说，如果是 1，那么您无法拒绝空值（即测试统计表明它可能来自正态）。如果为 0，则其中的数据可能不是从正态分布生成的。`A``B``ANormal``A``ANormal``A`

**注意：**我在这里提倡的方法仅在大小相同时才有效`A`，`B`但是您在问题中指出它们是:-)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-29T06:52:58.733

可以使用函数 将曲线或曲面拟合到数据并获得拟合优度，即 sse、rsquare、dfe、adjrsquare、rmse `fit`。 [更多信息在这里。](http://www.mathworks.com/help/curvefit/fit.html)..

# asp.net-mvc - Send variable to controller through url MVC 3

> ID：13114450
> 
> 赞同：0
> 
> 时间：2012-10-29T00:19:35.623
> 
> 标签：asp.net-mvc, url, razor

我需要这个 url "Home/Details/123" 显示一个页面 Details，其中包含 id 为 123 的项目的详细信息，我该怎么做？我认为必须注册路线，但我需要有关此的更多信息。

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-29T00:24:03.283

在您的`Home`控制器中，创建一个带有名称的操作方法，`Details`该方法具有一个`int`带有名称的参数`id`

```
public class HomeController: Controller
{
   public ActionResult Details(int id)
   {
     //get the item from the id and return the view
     Customer customerModel=repositary.GetCustomerFromId(id);
     return View(customerModel);
   }
} 
```

假设该`repositary.GetCustomerFromId`方法返回一个`Customer`类对象，并且您的详细信息视图是强类型的客户类。

```
@model Customer
<h2>@Model.FirstName</h2>
<p>@Model.AddressLine1</p> 
```

您在 global.asax 中的默认路由定义就足够了。

# ios - MKMapView 旋转

> ID：13114451
> 
> 赞同：3
> 
> 时间：2012-10-29T00:20:02.320
> 
> 标签：ios, ios6, mkmapview

Apple 最新的地图应用程序允许用户旋转地图。如何将此功能添加到我的 MKMapView？我认为这只是设置布尔属性（类似于）的情况，但我在[文档](http://developer.apple.com/library/ios/#documentation/MapKit/Reference/MKMapView_Class/MKMapView/MKMapView.html)`zoomEnabled`中找不到任何相关内容。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-05-23T09:17:13.050

`MapKit`iOS中没有内置的旋转支持。您可以使用常规视图转换（但当然所有街道名称等也会被旋转），或者您使用[Google Maps SDK](https://developers.google.com/maps/)或[MapBox](http://www.mapbox.com/mapbox-ios-sdk/)或其他东西。

Google Maps SDK 确实支持旋转，甚至是 3D 旋转。SDK 下载包含一个展示该功能的示例项目。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-07-01T13:48:57.470

实际上 MKMapView 从 iOS 5.0 开始支持地图旋转。要么使用`MKUserTrackingBarButtonItem`工具栏中的控件（用户点击它直到地图旋转），要么将`userTrackingMode`属性设置为`MKUserTrackingModeFollowWithHeading`.

# javascript - 时间倒计时到分钟和秒

> ID：13114453
> 
> 赞同：2
> 
> 时间：2012-10-29T00:20:26.700
> 
> 标签：javascript, jquery

我有一个倒计时的小脚本

[http://jsfiddle.net/yv4H4/](http://jsfiddle.net/yv4H4/)

问题之一是从秒到更好的可读性 0:00

另一个问题是倒计时开始所需的时间

编辑：我想我混了一点 php

```
window.onload = function() {
    canvas  = document.getElementById('timer'),
    seconds = document.getElementById('counter'),
    ctx     = canvas.getContext('2d'), 
    sec     = seconds.innerHTML | 0,
    countdown = sec;

ctx.lineWidth = 8;
ctx.strokeStyle = "#528f20";

var 
startAngle = 0, 
time       = 0,
mins       = 0,
secs       = 0,
intv       = setInterval(function(){

    // Making 180 look like 3:00 is not working 
    if(sec > 59)
{
    mins = Math.floor(sec/60);
    secs = Math.floor(sec - mins*60);

    if(mins < 10) mins = "0" + mins;
    if(secs < 10) secs = "0" + secs;
}

    var endAngle = (Math.PI * time * 2 / sec);
    ctx.arc(50, 50, 35, startAngle , endAngle, false);   
    startAngle = endAngle;
    ctx.stroke();

    seconds.innerHTML = countdown--;

    if (++time > sec) { clearInterval(intv); }

}, 1000); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-29T00:28:03.317

倒计时的延迟是由于它被链接到`window.onload`事件引起的，该事件仅在页面的所有内容都已加载时触发（因此需要时间来启动它）。如果您希望它更快地触发，我建议您查看*DOM 就绪事件*。（例如[这样）。](https://stackoverflow.com/a/1207005/532978)

至于“可读性更好的 0:00”，我用一个简单的解决方案制作了一个[jsFiddle ：](http://jsfiddle.net/yv4H4/1/)

```
countdown--;
seconds.innerHTML = Math.floor(countdown/60);
seconds.innerHTML += ":" + countdown%60; 
```

它将当前时间除以 60（并向下舍入到最接近的整数）作为分钟，并将这种除法的倒数作为秒。

# artificial-intelligence - 网格世界策略迭代背后的直觉

> ID：13114454
> 
> 赞同：3
> 
> 时间：2012-10-29T00:20:30.793
> 
> 标签：artificial-intelligence, reinforcement-learning, markov

我应该想出一个 MDP 代理，它使用策略迭代和值迭代进行分配，并将其性能与状态的效用值进行比较。

鉴于 MDP 代理知道转移概率和奖励，它如何知道要移动哪个动作？

据我了解，MDP 代理将执行策略迭代，并在给定策略的情况下计算它在达到终止状态时获得的奖励。该策略是从值迭代算法发展而来的。

有人可以提供一些关于策略迭代如何工作的直觉吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-06-26T20:27:49.937

假设您已经了解了策略迭代和值迭代算法是什么，代理只需通过为每个状态选择具有最高值的操作来构建新策略。

一个动作的价值是该动作所有可能的下一个状态到达下一个状态的概率*（下一个状态的值+转换的奖励）的总和。

# jquery - 特定的 $.ajax url 相对路径在 FF 和 IE 中有效，但在 Chrome 中无效

> ID：13114457
> 
> 赞同：0
> 
> 时间：2012-10-29T00:20:47.453
> 
> 标签：jquery, .net, ajax, asp.net-mvc

这很奇怪。我在下面有一个 jQuery $.ajax 调用。在 Firefox 中，只有当我取出 MyAppName 时它才会起作用。在 Chrome 中，只有当我在 url 中包含 MyAppName 时它才会起作用。不知道为什么

`http://localhost/MyAppName`当我测试这个时，我正在浏览。

**这适用于 FireFox 和 IE 9**

```
$.ajax({
    url: '/MyAppName/Search/Member/260491', 
```

这在 FireFox 或 IE 中不起作用：

```
 $.ajax({
    url: 'Search/Member/260491', 
```

**这适用于 Chrome**

```
$.ajax({
    url: 'Search/Member/260491', 
```

这在 Chrome 中不起作用：

```
 $.ajax({
    url: '/MyAppName/Search/Member/260491', 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-29T00:28:15.190

您可以在 if 语句中使用 jQuery 的 $.browser() 函数并以这种方式纠正问题。

[http://api.jquery.com/jQuery.browser/](http://api.jquery.com/jQuery.browser/)

> 例子：

```
if ($.browser.chrome) {
    $.ajax({
        url: 'Search/Member/260491',
        ...
    })
}
else {
    $.ajax({
        url: '/MyAppName/Search/Member/260491',
        ...
    })
} 
```

> 可用的标志是：

*   铬合金
*   webkit（从 jQuery 1.4 开始）
*   野生动物园（已弃用）
*   歌剧
*   米西
*   Mozilla

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-29T00:27:03.423

如果您使用“/”作为前缀，则可能在所有浏览器中都有效，假设它是来自站点根目录的路径。

“/搜索/会员/260491”

# c++ - 就快结束了！套接字上的 C++ 素数筛选

> ID：13114458
> 
> 赞同：0
> 
> 时间：2012-10-29T00:20:54.677
> 
> 标签：c++, sockets, segmentation-fault, sieve

在过去的 5 个小时里，我倾注了我的代码，但一无所获。每当我运行我的代码时，我都会遇到分段错误。有时它发生在客户端，有时发生在服务器端，所以我只是不确定发生了什么。 **当我尝试查找最大为 100 的素数时，该代码有效，但之后就没有了。**当我上次在这里发布时，我被告知要发布我的完整代码，所以这里是：

**服务器：**

```
void sieve(int *isComposite, int maximum, int maxSqrt) {

    int m = isComposite[0];
    int currentPrime = m-1;

    //Loop through "maxSqrt" times through the array
    if(m <= maxSqrt){
        //Loop through the multiples of the number we're
        //looking at (m) and mark them as composite (1)
        for (int k = currentPrime * currentPrime; k <= maximum; k += currentPrime){
            if(isComposite[k+1] == 0){
                //cout << "Removing: " << k << endl;
                isComposite[k+1] = 1;
            }
        }
    }
}

int main(int argc, char *argv[]){
    int sockfd, newsockfd, portno; // listen on sock_fd, new connection on new_fd, port number
    socklen_t clilen;

    struct sockaddr_in serv_addr, cli_addr;  // my address information, connector's address information
    int n;
    int open = 1; //true

    if (argc < 2) {
        fprintf(stderr,"ERROR, no port provided\n");
        exit(1);
    }

    //Socket setup
    sockfd = socket(AF_INET, SOCK_STREAM, 0);
    if (sockfd < 0) {
        error("ERROR opening socket");
    } 
    bzero((char *) &serv_addr, sizeof(serv_addr));
    portno = atoi(argv[1]);             //port number (ex. 10.12.110.57 or thing-1.uwec.edu)
    serv_addr.sin_family = AF_INET;     // host byte order
    serv_addr.sin_port = htons(portno); // short, network byte order
    serv_addr.sin_addr.s_addr = INADDR_ANY;  // use my IP address

    //Bind socket
    if (bind(sockfd, (struct sockaddr *) &serv_addr, sizeof(serv_addr)) < 0) {
        error("ERROR on binding");
    }
    //Listen for connection
    listen(sockfd,5);

    //Accept the connection
    clilen = sizeof(cli_addr);
    newsockfd = accept(sockfd, (struct sockaddr *) &cli_addr, &clilen);
    if (newsockfd < 0){
        error("ERROR on accept");
    }
    printf("Connection accepted!\n");

    // Variable to college the largest number in the range
    int maximum;

    // Collect the maximum
    cout << "\nEnter a Maximum:";
    cin >> maximum;
    cout << "\n";

    int *maxToSend = new int[1];
    maxToSend[0] = maximum;

    if(send(newsockfd, maxToSend, 10, 0) < 0){
        perror("ERROR sending to socket");
    }

    int maxSqrt = (int)sqrt((double)maximum);

    // Declare the array to hold important 
    // information and the numbers to sieve
    int *isComposite= new int[maximum+1]();

    // Insert the variable that keeps track of where we
    // are in the array, starting with 2 (the first prime)
    // which is held in isComposite[3]
    isComposite[0] = 3;

    // Run the sieve for each prime we come accross
    // until we reach the prime that is the square
    // root of the maximum (isComposite[2])
    while(isComposite[0] <= maxSqrt){

        // Unless it is the first time through
        // Receive from the client
        if(isComposite[0] > 3){
            if(recv(newsockfd, isComposite, (maximum+1)* sizeof(int), 0) < 0){
                perror("ERROR receiving from socket");
            }
        }

        // If we're not done:
        if(isComposite[0] <= maxSqrt){
            // Sieve the range
            sieve(isComposite, maximum, maxSqrt);
            isComposite[0]++;

            // Find the next prime
            while(isComposite[isComposite[0]] == 1){
                isComposite[0]++;
            }
            cout << "Doing next Sieve on: " << isComposite[0]-1 << endl;

        }

        // If we're still not done:
        if(send(newsockfd, isComposite, (maximum+1)* sizeof(int), 0) < 0){
            if(send(newsockfd, isComposite, maximum+1500, 0) < 0){
                perror("ERROR sending to socket");
            }
        }
    }
    return 0;
} 
```

**客户：**

```
void sieve(int *isComposite, int maximum, int maxSqrt) {

    int m = isComposite[0];
    int currentPrime = m-1;

    //Loop through "maxSqrt" times through the array
    if(m <= maxSqrt){
        //Loop through the multiples of the number we're
        //looking at (m) and mark them as composite (1)
        for (int k = currentPrime * currentPrime; k <= maximum; k += currentPrime){
            if(isComposite[k+1] == 0){
                //cout << "Removing: " << k << endl;
                isComposite[k+1] = 1;
            }
        }
    }
}

int main(int argc, char *argv[]){

    int sockfd, portno, n;
    struct sockaddr_in serv_addr;
    struct hostent *server;
    int open = 1; //true
    char c = 'a';

    if (argc < 3) {
       fprintf(stderr,"usage %s hostname port\n", argv[0]);
       exit(0);
    }

    portno = atoi(argv[2]);  //parse port number

    sockfd = socket(AF_INET, SOCK_STREAM, 0);
    if (sockfd < 0) {
        error("ERROR opening socket");
    }

    server = gethostbyname(argv[1]);
    if (server == NULL) {
        fprintf(stderr,"ERROR, no such host\n");
        exit(0);
    }

    bzero((char *) &serv_addr, sizeof(serv_addr));
    serv_addr.sin_family = AF_INET;   // host byte order
    bcopy((char *)server->h_addr,(char *)&serv_addr.sin_addr.s_addr, server->h_length);
    serv_addr.sin_port = htons(portno);  // short, network byte order

    if (connect(sockfd,(struct sockaddr *) &serv_addr, sizeof(serv_addr)) < 0) {
        error("ERROR connecting");
    }

    int *maxToSend = new int[1];

    if(recv(sockfd, maxToSend, 10, 0) < 0){
        perror("ERROR receiving from socket");
    }

    int maximum = maxToSend[0];
    int maxSqrt = (int)sqrt((double)maximum);

    int *isComposite= new int[maximum+1]();

    while(isComposite[0] <= maxSqrt){

        if(recv(sockfd, isComposite, (maximum+1)* sizeof(int), 0) < 0){
            perror("ERROR receiving from socket");
        }

        // Sieve the range
        sieve(isComposite, maximum, maxSqrt);
        isComposite[0]++;

        // Find the next prime
        while(isComposite[isComposite[0]] == 1){
            isComposite[0]++;
        }
        cout << "Doing next Sieve on: " << isComposite[0]-1 << endl;

        if(send(sockfd, isComposite, (maximum+1)* sizeof(int), 0) < 0){
            perror("ERROR sending to socket");
        }

    }

    close(sockfd);
    return(0);
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-29T00:46:07.937

原因是你的筛子越来越大，比一个包所能容纳的要大。您只能在一个数据包中存储大约 1400 个字节，而您的发送和接收功能不考虑这一点。您必须循环，直到您发送了您尝试发送的所有数据或读取您尝试读取的所有数据。看起来您尝试使用 执行此操作`send(newsockfd, isComposite, maximum+1500, 0)`，但您需要使用循环执行此操作，并跟踪您从 的返回值发送了多少数据`send`。

一个简单的函数可能看起来像

```
bool sendAll(int socket, const void *data, ssize_t size) {
    ssize_t sent = 0;
    ssize_t just_sent;
    while (sent < size) {
        just_sent = send(socket, data + sent, size - sent, 0);
        if (just_set < 0) {
            return false;
        }
        sent += just_sent;
    }
    return true;
} 
```

和类似的东西`recv`。

# c++ - C++ 最早可以表现出来的未定义行为是什么？

> ID：13114459
> 
> 赞同：10
> 
> 时间：2012-10-29T00:21:13.257
> 
> 标签：c++, undefined-behavior

我知道未定义的行为可能会导致任何事情，这使得任何包含 UB 的程序都可能毫无意义。我想知道是否有任何方法可以识别程序中未定义行为可能导致问题的最早点。这是一个例子来说明我的问题。

```
void causeUndefinedBehavior()
{
   //any code that causes undefined behavior
   //every time it is run
   char* a = nullptr;
   *a;
}

int main()
{
 //code before call
 //...
 causeUndefinedBehavior();
 //code after call
 //...
} 
```

据我了解，可能引发（不一定表现出来）未定义行为的可能时间是：

1.  什么时候`causeUndefinedBehavior()`编译。
2.  什么时候`main()`编译。
3.  程序运行时。
4.  当时`causeUndefinedBehavior()`被执行。

或者对于每种情况和每种实现，未定义行为的触发点是否完全不同？

另外，如果我注释掉`causeUndefinedBehavior()`调用的行，那会消除 UB，还是因为编译了包含 UB 的代码，它仍然在程序中？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-29T00:30:11.867

正如您的代码所展示的那样，未定义的行为几乎总是尝试行为时的**运行时状态条件。**对您的代码稍作修改就会使这一点变得非常明显：

```
void causeUndefinedBehavior()
{
   //any code that causes undefined behavior
   //every time it is run
   char* a = nullptr;
   *a;
}

int main()
{
 srand(time(NULL));
 //code before call
 //...
 if (rand() % 973 == 0)
    causeUndefinedBehavior();
 //code after call
 //...
} 
```

您可以执行一千次或更多次，并且永远不会触发 UB 执行条件。这并没有改变函数本身显然是 UB 的事实，但是在编译时在调用者的上下文中*检测*它*并不是*微不足道的。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-29T12:12:52.437

“未定义的行为”意味着语言定义没有告诉你你的程序会做什么。这是一个非常简单的陈述：没有信息。您可以根据自己的喜好推测您的实现可能会或可能不会做什么，但除非您的实现记录了它的作用，否则您只是在猜测。编程不是猜测。这是关于知道的。如果您的程序的行为未定义，请修复它。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-10-29T00:26:48.547

我认为这取决于未定义行为的类型。会影响诸如结构偏移之类的东西可能会导致未定义的行为，这将在执行触及该结构的任何时间代码时显示出来。

然而，一般来说，大多数未定义的行为发生在**运行时**，这意味着只有在执行该代码时才会发生未定义的行为。

[例如](http://en.wikipedia.org/wiki/Undefined_behavior)，修改字符串文字的尝试具有未定义的行为：

```
char* str = "StackOverflow";
memcpy(str+5, "Exchange", 8);    // undefined behavior 
```

`memcpy`这种“未定义的行为”在执行之前不会发生。它仍然会编译成完全正常的代码。

另一个示例是省略具有非 void 返回类型的函数的返回：

```
int foo() {
    // no return statement -> undefined behavior.
} 
```

在这里，正是在`foo`返回点发生未定义的行为。（在这种情况下，在 x86 上，`eax`寄存器中发生的任何事情都是函数的结果返回值。）

[`-Wall`通过启用更高级别的编译器错误报告（例如，在 GCC](http://gcc.gnu.org/onlinedocs/gcc/Warning-Options.html)上），可以识别其中许多场景。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-10-29T00:26:56.167

虽然它是“未定义的行为”，但给定特定的编译器，它将具有某种可预测的行为。但是因为它是未定义的，在不同的编译器上，它可能导致在编译/运行时的任何时候发生这种行为

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2018-02-28T15:23:32.217

> 这使得任何包含 UB 的程序都可能毫无意义

不太对。程序不能“包含”UB；当我们说“UB”的缩写时：程序的行为是未定义的。所有的！

因此，该程序从一开始就不仅是潜在的，而且实际上是毫无意义的。

> `[intro.execution]/5`：执行格式良好的程序的一致实现应产生与具有相同程序和相同输入的抽象机的相应实例的可能执行之一相同的可观察行为。但是，如果任何此类执行包含未定义的操作，**则本国际标准对使用该输入执行该程序的实现没有要求（甚至不考虑第一个未定义操作之前的操作**）。

# expressionengine - 在插件中输出变量

> ID：13114460
> 
> 赞同：4
> 
> 时间：2012-10-29T00:21:15.317
> 
> 标签：expressionengine

继[这个问题](https://stackoverflow.com/posts/comments/17814936)之后，我现在正在尝试重新设计插件，以便我可以做到：

```
{exp:deetector}
     {user_agent}
     {hash}
{/exp:deetector} 
```

但是使用下面的代码，我没有得到任何输出：

```
public function __construct()
{
    $this->EE =& get_instance();

    include(PATH_THIRD.'/deetector/libraries/detector.php');

    $this->ua = $ua;

    $tagdata = $this->EE->TMPL->tagdata;

    $variables[] = array(
        'user_agent'   => $this->ua->ua,
        'hash'         => $this->ua->uaHash,
        'browser_os'   => $this->ua->full,
        'browser'      => $this->ua->browser,
        'browser_full' => $this->ua->browserFull
    );

    return $this->EE->TMPL->parse_variables($tagdata, $variables);
} 
```

如果我`$this->return_data = $this->ua->xx`对上面列出的每个变量都执行此操作，我会得到输出，但如果我解析 $variables 数组则不会。

我也试过`$variables = array`但得到*Undefined offset: 0*。

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-10-29T09:29:32.403

如果您只是使用*构造函数*进行输出，请确保插件类具有`return_data`包含已解析标记数据的公共属性：

```
$this->return_data = $this->EE->TMPL->parse_variables($tagdata, $variables); 
```

对于类中的任何其他方法，您可以根据您的示例简单地返回解析的数据。

作为旁注，我认为您没有在此处循环任何数据。考虑改用该`parse_variables_row`方法，因此省略`count`,`total_results`和等额外变量。`switch`使用该方法不需要嵌套数组，因此可以归结为：

```
$variables = array(
    'user_agent' => $this->ua->ua,
    ...
);

$this->return_data = $this->EE->TMPL->parse_variables_row($tagdata, $variables); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-29T12:53:55.147

关于您引用的另一篇文章，没有人指出您定义了 2 个构造函数：

```
__construct() and deetector() 
```

你应该放弃第二个，然后`use __construct()`. 不确定这是否可能导致奇怪的 PHP 错误。

# java - Android教程thenewboston空指针异常崩溃

> ID：13114461
> 
> 赞同：2
> 
> 时间：2012-10-29T00:21:16.410
> 
> 标签：java, android, crash, nullpointerexception

我在 Android 开发的“新波士顿”这个系列中，我被困在第 49 个视频上，因为我收到一个错误（我认为是 NullPointerException），我不知道如何解决这个问题。该应用程序的测试是在 eclipse 的 android 模拟器 5554:droidX 上完成的。

```
package bogdy2p.ro.clicknet.web;

 import android.app.Activity;
 import android.os.Bundle;
 import android.view.View;
 import android.view.View.OnClickListener;
 import android.widget.Button;
 import android.widget.RadioGroup;
 import android.widget.RadioGroup.OnCheckedChangeListener;
 import android.widget.TextView;

   public class OpenedClass extends Activity implements OnClickListener,OnCheckedChangeListener {

TextView question, test;
Button returnData;
RadioGroup selectionList;
String gotBread;
String setData;

@Override
protected void onCreate(Bundle savedInstanceState) {
    // TODO Auto-generated method stub
    super.onCreate(savedInstanceState);
    setContentView(R.layout.send);
    initialize();
    Bundle gotBasket = getIntent().getExtras();
    gotBread = gotBasket.getString("key");
    question.setText(gotBread);
}

private void initialize() {
    // TODO Auto-generated method stub
    question = (TextView) findViewById(R.id.tvQuestion);
    test = (TextView) findViewById(R.id.tvText);
    returnData = (Button) findViewById(R.id.bReturn);
    returnData.setOnClickListener(this);
    selectionList = (RadioGroup) findViewById(R.id.rgAnswers);
    selectionList.setOnCheckedChangeListener(this);
}

public void onClick(View arg0) {
    // TODO Auto-generated method stub
}

public void onCheckedChanged(RadioGroup arg0, int arg1) {
    // TODO Auto-generated method stub
    switch (arg1) {
    case R.id.rCrazy:
        setData = "Probably right!";
        break;

    case R.id.rSexy:
        setData = "Definetly right!";
        break;

    case R.id.rBoth:
        setData = "Spot On!";
        break;
    }
    test.setText(setData);
}
   } 
```

来自 Eclipse 的 LogCat：

```
 10-29 00:43:45.111: E/AndroidRuntime(637): FATAL EXCEPTION: main
       10-29 00:43:45.111: E/AndroidRuntime(637): java.lang.RuntimeException: Unable to               start activity ComponentInfo{bogdy2p.ro.clicknet.web/bogdy2p.ro.clicknet.web.OpenedClass}: java.lang.NullPointerException
        10-29 00:43:45.111: E/AndroidRuntime(637):  at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:2059)
        10-29 00:43:45.111: E/AndroidRuntime(637):  at android.app.ActivityThread.handleLaunchActivity(ActivityThread.java:2084)
        10-29 00:43:45.111: E/AndroidRuntime(637):  at android.app.ActivityThread.access$600(ActivityThread.java:130)
        10-29 00:43:45.111: E/AndroidRuntime(637):  at android.app.ActivityThread$H.handleMessage(ActivityThread.java:1195)
        10-29 00:43:45.111: E/AndroidRuntime(637):  at android.os.Handler.dispatchMessage(Handler.java:99)
        10-29 00:43:45.111: E/AndroidRuntime(637):  at android.os.Looper.loop(Looper.java:137)
        10-29 00:43:45.111: E/AndroidRuntime(637):  at android.app.ActivityThread.main(ActivityThread.java:4745)
         10-29 00:43:45.111: E/AndroidRuntime(637):     at java.lang.reflect.Method.invokeNative(Native Method)
        10-29 00:43:45.111: E/AndroidRuntime(637):  at java.lang.reflect.Method.invoke(Method.java:511)
        10-29 00:43:45.111: E/AndroidRuntime(637):  at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:786)
         10-29 00:43:45.111: E/AndroidRuntime(637):     at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:553)
         10-29 00:43:45.111: E/AndroidRuntime(637):     at dalvik.system.NativeStart.main(Native Method)
         10-29 00:43:45.111: E/AndroidRuntime(637): Caused by: java.lang.NullPointerException
         10-29 00:43:45.111: E/AndroidRuntime(637):     at bogdy2p.ro.clicknet.web.OpenedClass.onCreate(OpenedClass.java:27)
         10-29 00:43:45.111: E/AndroidRuntime(637):     at android.app.Activity.performCreate(Activity.java:5008)
         10-29 00:43:45.111: E/AndroidRuntime(637):     at android.app.Instrumentation.callActivityOnCreate(Instrumentation.java:1079)
         10-29 00:43:45.111: E/AndroidRuntime(637):     at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:2023)
         10-29 00:43:45.111: E/AndroidRuntime(637):     ... 11 more 
```

Manifest.Xml 在这里：

```
<manifest xmlns:android="http://schemas.android.com/apk/res/android"
package="bogdy2p.ro.clicknet.web"
android:versionCode="1"
android:versionName="1.0" >

<uses-sdk
    android:minSdkVersion="8"
    android:targetSdkVersion="15" />

<uses-permission android:name="android.permission.SET_WALLPAPER" />

<application
    android:icon="@drawable/ic_launcher"
    android:label="@string/app_name"
    android:theme="@style/AppTheme" >
    <activity
        android:name=".Splash"
        android:label="@string/title_activity_main" >
        <intent-filter>
            <action android:name="android.intent.action.MAIN" />

            <category android:name="android.intent.category.LAUNCHER" />
        </intent-filter>
    </activity>
    <activity
        android:name=".MainActivity"
        android:label="@string/title_activity_main" >
        <intent-filter>
            <action android:name="bogdy2p.ro.clicknet.web.STARTINGPOINT" />

            <category android:name="android.intent.category.DEFAULT" />
        </intent-filter>
    </activity>
    <activity
        android:name=".Menu"
        android:label="@string/title_activity_main" >
        <intent-filter>
            <action android:name="bogdy2p.ro.clicknet.web.MENU" />

            <category android:name="android.intent.category.DEFAULT" />
        </intent-filter>
    </activity>
    <activity
        android:name=".TextPlay"
        android:label="@string/app_name" >
    </activity>
    <activity
        android:name=".Email"
        android:label="@string/app_name" >
    </activity>
    <activity
        android:name=".Camera"
        android:label="Camera Application"
        android:screenOrientation="portrait" >
    </activity>
    <activity
        android:name=".Data"
        android:label="Data Application" >
    </activity>
    <activity
        android:name=".OpenedClass"
        android:label="Opened Class" >
    </activity>
</application> 
```

和 Data.java 类在这里：

```
package bogdy2p.ro.clicknet.web;

      import android.app.Activity;
      import android.content.Intent;
      import android.os.Bundle;
      import android.view.View;
      import android.view.View.OnClickListener;
      import android.widget.Button;
      import android.widget.EditText;
      import android.widget.TextView;

  public class Data extends Activity implements OnClickListener {

Button start, startFor;
EditText sendET;
TextView gotAnswer;

@Override
protected void onCreate(Bundle savedInstanceState) {
    // TODO Auto-generated method stub
    super.onCreate(savedInstanceState);
    setContentView(R.layout.get);
}

private void initialize() {

    start = (Button) findViewById(R.id.bSA);
    startFor = (Button) findViewById(R.id.bSAFR);
    sendET = (EditText) findViewById(R.id.etSend);
    gotAnswer = (TextView) findViewById(R.id.tvGot);
    start.setOnClickListener(this);
    startFor.setOnClickListener(this);
}

public void onClick(View arg0) {
    // TODO Auto-generated method stub
    switch (arg0.getId()) {
    case R.id.bSA:
        String bread = sendET.getText().toString();
        Bundle basket = new Bundle();
        basket.putString("key", bread);
        Intent a = new Intent(Data.this, OpenedClass.class);
        a.putExtras(basket);
        startActivity(a);
        break;
    case R.id.bSAFR:
        Intent i = new Intent(Data.this, OpenedClass.class);
        startActivityForResult(i, 0);
        break;
    }
}

@Override
protected void onActivityResult(int requestCode, int resultCode, Intent data) {
    // TODO Auto-generated method stub
    super.onActivityResult(requestCode, resultCode, data);
}
 } 
```

就我读到 LogCat 而言，问题是 @ Line 27 in OpenedClass.java file ，但我不知道问题是什么。我的程序与视频中的程序相同，但我的程序不起作用，并且在视频中，程序运行成功。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-29T00:27:18.873

你`gotBasket`在某些时候是空的。这意味着，出于某种原因，您的意图的附加功能不存在。

使用 try-catch 保护您的代码，或者您可以执行以下操作：

```
Bundle gotBasket = getIntent().getExtras();
if(gotBasket!=null){
    gotBread = gotBasket.getString("key");
    question.setText(gotBread);
} 
```

# php - 我可以保护我的 CRON 脚本免受远程用户的攻击吗？

> ID：13114466
> 
> 赞同：4
> 
> 时间：2012-10-29T00:22:00.917
> 
> 标签：php, permissions, cron, file-permissions, user-permissions

我目前正在从事一个涉及使用 CRON 作业的新项目。

CRON 脚本基本上运行 SQL 查询，将数据生成到文件中，然后通过 FTP 将该文件发送到另一台服务器。

该脚本位于实时网站 (www.website.com/sendOrders.php)

我没有看到任何安全问题或威胁，而且我认为任何人都不太可能在服务器上找到 PHP 脚本。但是我不希望脚本被任何外人执行。

有没有办法保护这个脚本？

谢谢彼得

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-10-29T00:26:41.080

您可以将“秘密文件”移动到子文件夹中，然后在其中创建一个[.htaccess 文件](http://httpd.apache.org/docs/2.2/howto/htaccess.html)，以防止所有人访问该文件，运行 Cronjob 的服务器除外。

例子：

```
DENY FROM ALL
ALLOW FROM 123.123.123.123 
```

如果您有 shell 访问权限，您也可以将脚本放在可访问文件夹之外，并通过命令行或 cronjob 直接运行，如下所示`php script.php`：

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2019-01-15T01:59:44.737

这是我的解决方案：

检查`cron.php`是否发送了某些特定的标头

cron.php

```
if (secure_cron_script() === false) {
    echo 'Unauthorized';
    return;
}
echo 'OK'; 
```

函数.php

```
function secure_cron_script () {
    if (DEBUG)
        return true;

    $http_headers = getallheaders();
    if (empty($http_headers['X-My-Cron-token'])
    || $http_headers['X-My-Cron-token'] !== SECURE_CRON_TOKEN) {
        return false;
    }
    return true;
} 
```

如何使用 curl 调用 cron：

```
curl --header "X-My-Cron-token: 321123321sd"  https://example.com/cron.php 
```

没有IP限制。没有 GET/POST。如果是开发模式，则跳过限制。您可以将脚本放在任何您想要的地方。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-10-29T00:24:59.353

为什么不直接将脚本移到服务器的 Web 根目录之外并从 CLI 执行呢？这是没有其他人执行它的机会。

如果您必须将它放在 webroot 中（并且应该没有理由），只需确保请求的客户端是您正在运行它的服务器，它应该绰绰有余。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-10-29T00:30:01.140

这似乎相当愚蠢。当您可以简单地让机器 B 的本机调度系统（无论它碰巧是什么操作系统）自己完成工作时，为什么要让 cron on`machine A`通过 HTTP on 调用脚本？`machine B`

然后，您可以将脚本隐藏在无法通过 HTTP 访问的某个地方，并使您的安全问题完全没有实际意义。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2016-12-30T06:32:34.033

如果文件位于不应完全锁定的文件夹中，请将这些行包含在`<Files whatever.php>...</Files>`

```
<Files "cron.php">
  Order deny,allow
  Allow from name.of.this.machine
  Allow from another.authorized.name.net
  Allow from 127.0.0.1
  Deny from all
</Files> 
```

# asp.net-mvc - 在 MVC 项目中从 TinyMCE 获取和设置 html

> ID：13114468
> 
> 赞同：1
> 
> 时间：2012-10-29T00:22:33.770
> 
> 标签：asp.net-mvc, tinymce

我正在使用 TinyMCE 开发一个 MVC 项目。我有一个模型，其中包含一个字符串属性，即 HTMLContent。我希望 Get 操作方法从文件中提取 HTML 并为 TinyMCE 设置文本。post 方法应该拉取新的 TinyMCE html 并将其保存到文件中。

目前，当使用 Html.TextArea 然后使用 HttpUtility.Decode 解码 .aspx 页面中的 model.HTMLContent 属性时，get 有效。

```
<%= Html.TextArea("elm1", HttpUtility.HtmlDecode(Model.HTMLContent), new {@name="elm1", @class="tinymce" }) %> 
```

但是，在发布时，model.HTMLContent 属性为空。如果我使用 Html.TextAreaFor，则 post 模型包含 html，但 GET 不会解码 TinyMCE 的文本区域最初设置为的字符串。我尝试在服务器端解码或编码，但这不起作用。

我做了很多研究，找不到任何使用 MVC 设置和获取 TinyMCE HTML 的示例，只是获取。任何帮助将不胜感激。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-29T00:34:14.203

遇到此类问题时，您应该检查您的请求对象。您正在尝试绑定到名为 HTMLContent 的模型属性，但您的字段有一个名为 elm1 的名称。如果您希望自动模型绑定起作用，则该字段的名称应与模型中的属性名称相匹配。

# c++ - 如何在网格中的两个单元格之间找到路径中最窄的点

> ID：13114469
> 
> 赞同：4
> 
> 时间：2012-10-29T00:22:53.427
> 
> 标签：c++, algorithm, game-physics

我正在为 rts 游戏编写机器人（网格地图上一个村庄与另一个村庄对抗，还有可穿越的单元格 - 草、森林和不可穿越的单元格 - 水、山丘）。如何找到这两个单元格之间路径上的最窄点？对算法有什么建议吗？（我正在使用 A* 来寻找最近的路径，并且我想通过机器人决定将塔（坚固的防御建筑）放置在最窄的点上，这样敌人就无法穿越 - 可能可以，取决于地图，但可能性较小） .

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-29T00:53:34.270

一些想法。

考虑一个（可能太多）简化版本，其中 X 代表不可交叉细胞，. 代表crossable，A代表一个村庄，B代表另一个。

```
XXXA.XXXXX
XXX..XXXXX
XX.....XXX
XXX....XXX
XXX...XXXX
XXX.....XX
XXXX....XX
XXXX.BXXXX 
```

由于连接两个村庄的道路上没有“分支”，我们可以将地图转移到

```
 000A100000
    0001100000
    0011111000
    0001111000
   C0001110000D
    0001111100
    0000111100
    00001B0000 
```

其中 0 和 1 表示在单元格上旅行的成本。道路上最窄的点是从 C 到 D 花费最少的路径。路径在下面的地图中用 # 表示

```
 000A100000
    ##########
    #01111100#
    #00111100#
   C#00111000#D
    0001111100
    0000111100
    00001B0000 
```

由于只有原始地图“道路”上的单元格成本大于 0，因此 C 和 D 之间成本最小的最短路径确实会给出道路上“最窄点”位置的线索。

好吧，这只是一个简化版本，因为只有一条“主要道路”连接两个村庄。但我希望它能以某种方式指出解决方案的正确方向。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-29T15:27:42.867

请记住，这甚至不一定是您想要的。`T`考虑一个具有攻击范围的塔`t`

```
..t..
.ttt.
ttTtt
.ttt.
..t.. 
```

`A`和一个分支图，其中从点到点有一条窄的直接路径和一条宽的间接路径`B`。`A`假设标记周围的直接点`n`是可步行的，但不能建造塔。

```
xBxxxxxxx
x.......x
x.......x
x.......x
x..xx...x
x..xx...x
x..xx...x
x.......x
xnnn....x
xnnn....x
xAnxxxxxx 
```

最初，字符将跟随路径`p`

```
xBxxxxxxx
xp......x
xp......x
xp......x
xp.xx...x
xp.xx...x
xp.xx...x
xp......x
xp......x
xp......x
xA.xxxxxx 
```

放置`T`在最窄的点上，如果角色继续在同一路径上，将导致 3 次命中。但是，如果塔的痛苦相对于速度目标很高，例如肯定是致命的，则不会发生这种情况。相反，字符将被转移到更长的路径。

```
xBxxxxxxx
xp......x
xppppp..x
x.t..p..x
xttxxp..x
xtTxxp..x
xttxxp..x
x.t..p..x
x....p..x
xppppp..x
xA.xxxxxx 
```

在这种情况下，更好的位置是保证至少一次命中的位置。（请记住，最接近的最佳位置`T`被`A`认为是不可建造的。）

```
xBxxxxxxx
x.......x
x.......x
x.......x
x..xx...x
x..xx...x
x.txx...x
xttTtt..x
x.ttt...x
x..t....x
xA.xxxxxx 
```

因此，您可能想要的是一个`T`可以最大化最小成本路径的成本的位置，该路径将*在*`T`. 研究 maximin (minimax) 算法。当然，放置时还有其他需要考虑的事情，例如塔本身的防御性。

# smalltalk - vwnt 在 smalltalk 中弹出

> ID：13114470
> 
> 赞同：0
> 
> 时间：2012-10-29T00:23:02.413
> 
> 标签：smalltalk, visualworks, gnu-smalltalk

当我尝试打开我的 smalltalk 项目文件时，会弹出 vwnt。项目打不开。上次我处理这个项目时，我确实正确地保存了这个项目。如果有人知道如何解决此问题，请提供帮助。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-29T09:25:42.963

smalltalk 项目文件是什么意思？VisualWorks 没有这样的东西。它有一个 .im 和 .cha 文件。.im 文件是图像，其中包含 VisualWorks 以及您对其所做的所有更改。因此，当您打开 .im 文件时，它会打开 VisualWorks。您在 VisualWorks 中创建类和方法，并通过这样做修改整个系统。当您保存图像时，整个 VisualWorks 系统会被持久化，当您再次打开图像文件时，系统会恢复。.cha 文件是一个文本文件，其中包含您对图像所做的所有更改。

# node.js - 在 MongooseJS 上通过更简单的 ID 查找项目

> ID：13114474
> 
> 赞同：0
> 
> 时间：2012-10-29T00:23:31.340
> 
> 标签：node.js, mongoose

我正在玩猫鼬模式。我有 3 个项目，每个项目都有一个相应的 ID 字段，如下所示：

```
"_id": "508dcb79cb1c8ad910000001","
"_id": "508dcba389e2f32e11000002","
"_id": "508dcba389e2f32e11000003"," 
```

是否有任何默认方法来处理那一大块 ID 以获得更干净的 ID，而无需设置自定义 ID 的数字来获取与 ID 对应的最后一个数字？或者我应该使用正则表达式或其他东西来通过 id 获取它们，如下所示：

```
app.get('/fields/:id', function(req, res) { ; }); 
```

并使用`/field/1`,`/field/3`或其他方式访问它们。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-29T02:38:37.967

[如此处](http://www.mongodb.org/display/DOCS/Object+IDs#ObjectIDs-BSONObjectIDSpecification)所述，文档的 ObjectID 由时间戳、机器 ID、进程 ID 和计数器组成。我看不出有一种方法可以单独使用计数器并得出 ObjectID。使用正则表达式搜索索引可能不是一个好主意，因为您最终会遍历索引中的所有 ObjectID。[正如这里](http://www.mongodb.org/display/DOCS/Advanced+Queries#AdvancedQueries-RegularExpressions)所指出的，只有简单的前缀正则表达式才能利用索引。此外，我认为多个文档可能具有相同的计数器，例如，如果在两台不同的机器上对同一个集合进行写入。

所以简短的回答是“不”。如果你真的想要短 ID，你可能应该滚动你自己的[序列号](http://www.mongodb.org/display/DOCS/Object+IDs#ObjectIDs-SequenceNumbers)，使用类似[shortid](https://github.com/dylang/shortid)的东西，或者只是通过一个自然唯一的索引（如果你的集合恰好有一个）来查找文档，比如电子邮件、用户名等。

# java - 编译我的简单 Java 文件时出现编译错误

> ID：13114475
> 
> 赞同：0
> 
> 时间：2012-10-29T00:23:48.373
> 
> 标签：java, compilation, compiler-errors

我编写了一个简单的 java 程序，如下所述。不幸的是发生了编译错误。

```
class String {
    public static void main(String[] args) {
         System.out.println("stre");
    }
} 
```

在命令提示符下编译期间会出现以下内容：

c:\Java>java String Error: Main method not found in class String，请将main方法定义为：public static void main(String[] args)

它不适用于我的任何程序，甚至不是这个简单的程序！为什么是这样？

***编辑：***

我现在有：

```
import java.lang.*;
import java.lang.String.*;

class incogn {
    public static void main(String[] args) {
        System.out.println("stre");
    }
} 
```

它不工作。为什么这不起作用？

它说的和以前一样。

你所说的 Java.lang.String[] 有效，但为什么不能呢？为什么我以前不需要穿上这些？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-29T00:26:05.763

这可能是因为您使用班级的名称，与;`String`冲突。`java.lang.String`换句话说，您已经编写了您的 main 方法将您的类的实例作为输入，而不是 main 方法需要采用的实例，即`java.lang.String`. 尝试任一

1.  重命名你的班级
2.  将您的签名更改为`public static void main(java.lang.String[] args) {`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-01T09:50:42.473

1.  不要创建名为“String”的 java 文件，因为它是 java.lang.String 中的 java 库类
2.  将课程设为公开

所以，编写你的源代码如下：

```
public class StringDemo {
    public static void main(String[] args) {
         System.out.println("stre");
    }
} 
```

现在编译它。我相信它会运作良好。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-01T11:29:22.900

**1）班级应该是`public`**

**2）避免称你为 class `String`，因为它有重复的名称`java.lang.String`（你仍然可以，但不好）。否则，您的主要方法的参数类型错误。**

**3）您不必从`java.lang`包中显式导入。**

* * *

```
public class String {
    public static void main(java.lang.String[] args) {
         System.out.println("stre");
    }
} 
```

或者

```
public class YourClass {
    public static void main(String[] args) {
         System.out.println("stre");
    }
} 
```

尝试使用第二种形式。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-29T00:27:16.993

好吧，给出你的类名`String`然后调用`main(String[] args)`是模棱两可的，如果它意味着`java.lang.String`或者你新定义的类，但是使用java范围规则，它将使用你的，除非另有声明。

* * *

**修改后更新**

没有`java.lang.String` ***包***，但它是一个***类***。因此，你不能说

```
import java.lang.String.*; 
```

通过添加“ `.*`”，编译器可以理解这指的是某个包`String`。

一个例外是静态导入，但这不是您需要的。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-10-29T00:27:30.417

你不应该调用你的类 String，它会与 java 类 String 冲突。

或者，您可以将代码更改为：

```
class String {
    public static void main(java.lang.String[] args) {
         System.out.println("stre");
    }
} 
```

# sql-server-2008 - LineString 查找通过我的 2 线的车辆（4 点）

> ID：13114479
> 
> 赞同：1
> 
> 时间：2012-10-29T00:24:36.623
> 
> 标签：sql-server-2008, tsql, geometry, geospatial, spatial

我有一个任务，我必须在 Google 地图（4 点）上绘制 2 条线，并且在提交事件中我需要显示通过这些点的车辆。我能够在谷歌地图上绘制 2 条线，这给了我 4 个纬度/经度格式的点。

现在的主要问题是如何查询数据库以使车辆通过两条线。我知道我可能必须在 T-SQL 中使用 LineString 函数，但我如何让所有车辆通过这些线路？欢迎任何建议。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-31T08:03:17.597

鉴于我不确定您是如何表示您的“汽车”或您的“线条”并且必须做出假设，这个代码示例可能会为您提供帮助。它将返回一个数据集，指示哪些汽车已经通过了哪些线路。空间查询不是我的强项。也许其他人可以提供优化。

```
--  This is the first line as describer by 2 points
DECLARE @line1  GEOMETRY = geometry::STGeomFromText('LINESTRING(0 10, 10 10)', 0)
--  This is the second line as describer by another 2 points
DECLARE @line2  GEOMETRY = geometry::STGeomFromText('LINESTRING(0 20, 10 20)', 0)
--  @Car1's path is represented as a line that does NOT intersect the 2 defined lines above
DECLARE @Car1   GEOMETRY = geometry::STGeomFromText('LINESTRING(5 0, 5 11)', 0)
--  @Car2's path is represented as a line that DOES intersect that 2 defined lines above
DECLARE @Car2   GEOMETRY = geometry::STGeomFromText('LINESTRING(5 0, 5 23)', 0)

;WITH Lines (LineID, LineGeom) AS
(
    SELECT 1, @line1    UNION ALL
    SELECT 2, @line2
)
,Cars (CarID, CarGeom) AS
(
    SELECT 1, @Car1 UNION ALL
    SELECT 2, @Car2
)
SELECT   C.CarID
        ,L.LineID
FROM Cars   C
JOIN Lines  L ON L.LineGeom.STIntersects(C.CarGeom) = 1 
```

# java - 如何使用 QuadCurve2D.Double 绘制曲线段？

> ID：13114483
> 
> 赞同：1
> 
> 时间：2012-10-29T00:24:57.433
> 
> 标签：java, swing, graphics2d, paintcomponent

这是我声明曲线的代码行：

```
QuadCurve2D.Double curve = new QuadCurve2D.Double(50,100,100,170,150,100); 
```

现在我可以用什么代码来绘制这条曲线？我试过类似的东西：

```
g.draw(curve); 
```

但显然这不起作用。有什么建议么？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-29T00:45:18.360

我已经对我认为您在此处描述的内容做了一个最低限度的测试用例。该程序有效，但除非我能看到您正在使用的代码，否则我无法真正帮助您。

```
import java.awt.geom.*;
import java.awt.*;
import javax.swing.*;

public class CurveDraw extends JFrame {
        public static void main(String[] args) {
                CurveDraw frame = new CurveDraw();
                frame.setVisible(true);
        }
        public CurveDraw() {
                setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);
                setSize(400,400);
        }
        public void paint(Graphics g) {
                QuadCurve2D.Double curve = new QuadCurve2D.Double(50,100,100,170,150,100);
                ((Graphics2D)g).draw(curve);
        }
} 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-10-29T00:47:45.987

对我来说很好...

![在此处输入图像描述](../Images/fdc887aab05d50e3c4f7a5a8390e109a.png)

```
public class PaintQuad {

    public static void main(String[] args) {
        new PaintQuad();
    }

    public PaintQuad() {
        EventQueue.invokeLater(new Runnable() {
            @Override
            public void run() {
                try {
                    UIManager.setLookAndFeel(UIManager.getSystemLookAndFeelClassName());
                } catch (ClassNotFoundException ex) {
                } catch (InstantiationException ex) {
                } catch (IllegalAccessException ex) {
                } catch (UnsupportedLookAndFeelException ex) {
                }

                JFrame frame = new JFrame();
                frame.setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);
                frame.setLayout(new BorderLayout());
                frame.add(new PaintMyQuad());
                frame.setSize(200, 200);
                frame.setLocationRelativeTo(null);
                frame.setVisible(true);
            }
        });
    }

    public class PaintMyQuad extends JPanel {

        @Override
        protected void paintComponent(Graphics g) {

            super.paintComponent(g);
            Graphics2D g2d = (Graphics2D) g.create();

            QuadCurve2D.Double curve = new QuadCurve2D.Double(50,100,100,170,150,100);

            g2d.setColor(Color.RED);
            g2d.draw(curve);

        }

    }

} 
```

我想到了两件事。

1.  确保您已设置图形的颜色，默认为窗格的背景颜色
2.  确保容器的大小足够大（并且布局正确）以显示图形。

# jquery - Grails 中的 Twitter Bootstrap 预输入示例？

> ID：13114487
> 
> 赞同：1
> 
> 时间：2012-10-29T00:25:20.383
> 
> 标签：jquery, grails, twitter-bootstrap, bootstrap-typeahead

我有一个文本字段，我正在尝试将其设置为[Twitter Bootstrap 预输入](http://twitter.github.com/bootstrap/javascript.html#typeahead)，它调用控制器操作以返回用户查询的结果列表，我承认我有点不确定如何设置它. 有人可以举一个简单的例子来说明这种事情是如何在 Grails 中完成的吗？

谢谢！

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-29T12:21:17.743

BootStrap Typeahead 最简单的用法之一是给它一个值数组。因此，在模板中为用户创建以下 Javascript 示例：

```
var users = [
             <g:each in="users" var="u">
              '${ u.username } ( ${ u.first_name } ${ u.last_name } )',
             </g:each>
            ]

$( '#search_users' ).typeahead( { 'source': users } ); 
```

在 HTML 部分：

```
<input type="text" id="search_users" /> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-29T09:37:24.913

我完全按照你说的做了。

首先下载[Grails UI 插件](http://grails.org/plugin/grails-ui)，它应该很简单。这是前一段时间，但如果你被卡住了，请回来。

# ios - 在 MonoTouch 中使用字典

> ID：13114488
> 
> 赞同：2
> 
> 时间：2012-10-29T00:25:38.560
> 
> 标签：ios, dictionary, xamarin.ios, aot

我对 MonoTouch 字典的限制很困惑：http: [//docs.xamarin.com/ios/about/limitations#Value_types_as_Dictionary_Keys](http://docs.xamarin.com/ios/about/limitations#Value_types_as_Dictionary_Keys)

**我的理解是不允许**这样的代码：

```
var foo = new Dictionary<int, int>(); 
```

但是我在这样的书中看到了代码，这没有意义：

```
protected Dictionary<int, CustomCellController> _cellControllers = new Dictionary<int, CustomCellController>(); 
```

此外，有人发布说，如果您使用可为空的类型，它会将值转换为引用，因此以下工作（只要键不为空）：

```
var foo = new Dictionary<int?, int?>(); 
```

这也没有意义，因为可空类型是值类型的结构。

那么在设备上使用字典的真正规则是什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-29T12:23:45.150

由于设备上不允许使用 JITin，所有代码都必须使用 AOT（提前）编译器进行编译。

> 我的理解是不允许这样的代码：

对于 AOT 编译器来说，这个限制是关于确定在运行时将使用什么的困难。这样的代码可能会起作用，您会在示例中看到这样的代码 - 但它也可能会失败，具体取决于您对代码所做的事情（创建 a`Dictionary`不是问题）。

> 那么在设备上使用字典的真正规则是什么？

使用值类型意味着生成的代码不能共享（就像引用类型一样）。例如，使用泛型`Dictionary`with `int`and `long`需要单独的代码，而相同的代码可以用于`string`and `CustomCellController`。

找到`Dictionary<int,int>`需要的东西不是问题（很清楚）。然而，事情往往在内部变得复杂，例如确保`KeyValuePair`生成正确的权利。嵌套泛型也很难正确。

这就是为什么第*一个*通用解决方法是尝试向AOT 编译器*提示需要什么。*如果 AOT 编译器可以找到需要它来生成所需内容的代码，那么它将在运行时可用。

下一个解决方法是尝试使用引用类型（例如 a `string`）而不是值类型（因为这种情况对于 AOT 编译器来说更容易处理）。

最后，AOT 编译器正在变得更好（每个版本），并且工作继续减少这个（和其他）限制。因此，您在此处阅读的内容可能不适用于 3、6、12 个月……

# pug - 通过条件逻辑嵌套玉

> ID：13114489
> 
> 赞同：5
> 
> 时间：2012-10-29T00:25:43.920
> 
> 标签：pug, express

我有一组检索到的 json 数据，称为 data_list。我想遍历它并拉出它的名称字段并将其嵌入到 twitter 引导网格隐喻中。其输出如下所示：

```
<div class="row">
   <div class="span4">Name 1</div>
   <div class="span4">Name 2</div>
   <div class="span4">Name 3</div>
</div>
<div class="row">
   <div class="span4">Name 4</div>
   <div class="span4">Name 5</div>
   <div class="span4">Name 6</div>
</div> 
```

问题是我不确定如何在 Jade 中完成此操作。我知道如何遍历我的数据

```
- for (var key in data_list)
    div.span4
        p= data_list[key].name 
```

我不知道该怎么做是为每三条数据记录注入一个数据，并让它围绕这三条记录。我知道如何通过

```
- if ((key % 3) == 0)
    .row 
```

但我只能让它输出 a 但我不能让它包围其他行。非常欢迎任何建议。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-10-31T09:06:48.567

我昨天使用引导程序遇到了同样的问题。

我是这样解决的：

```
each element, i in dataset
  if i % 3 == 0
    div.row
      each elementInRow, j in dataset.slice(i, i+3)
        div.span4
          ...cell code... 
```

希望能帮助到你！

# haskell - Yesod 一个站点的多个持久后端

> ID：13114497
> 
> 赞同：5
> 
> 时间：2012-10-29T00:26:53.920
> 
> 标签：haskell, yesod

开发和生产之间的常见模式是开发网站将使用 sqlite，因为它是零设置，然后在生产中使用 PostgresSQL 或 MySQL。但是，Yesod 生成的默认 Settings.hs 脚手架文件中，只指定了一个持久化后端。有没有办法让开发配置使用一个持久后端，而生产配置使用另一个？此外，这些应该具有不同的数据库设置 YAML 文件，以便可以为 sqlite 配置简单的文件名，但生产数据库凭据永远不会命中 VCS 存储库。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-30T05:35:11.193

我一般不喜欢这种做法，因为数据库引擎之间可能存在细微的差异，直到生产才会出现。（这可以通过在中间放置一个登台服务器来缓解。）

无论如何，您当然可以通过条件编译来做到这一点，尽管脚手架站点并非旨在以开箱即用的方式工作。只需查找引用特定后端的所有位置，并使其以 DEVELOPMENT CPP 变量为条件。

# html - Google 内容实验 - 使用 Div 添加 onClick 事件？

> ID：13114500
> 
> 赞同：1
> 
> 时间：2012-10-29T00:27:06.307
> 
> 标签：html, onclick, google-analytics

我有一个链接的视频图像，它被启动我的内容储物柜的 Div 标签包围。我想跟踪人们使用 Google 内容实验打开内容储物柜的次数（我有一个单独的目标设置来实际完成储物柜）。

div 类“link_loc”成功启动了我的储物柜，但我不确定 onClick 事件是否与 Google 内容实验一起正常工作。

所以这是我的代码......这是正确的吗？

```
<div class="link_loc" 
  onclick="_gaq.push(['_trackEvent', 'ExperimentConversions', 'Click', 'Video']); return false;">
  <a href="http://example.com/">
    <img class="size-full wp-image-8 aligncenter" title="Play Video" 
      src="http://example.com/video_player_image.jpg" alt="Play Video" 
      width="640" height="366">
  </a>
</div> 
```

我已经寻找了一个解决方案，但仍然很困惑（我不是很有技术头脑）。

任何帮助表示赞赏。

谢谢，本

# python - 在 Python / Pandas 中计算两行之间的差异

> ID：13114512
> 
> 赞同：71
> 
> 时间：2012-10-29T00:28:10.363
> 
> 标签：python, pandas

在 python 中，我如何引用前一行并针对它计算一些东西？具体来说，我正在使用`dataframes`-`pandas`我有一个充满股票价格信息的数据框，如下所示：

```
 Date   Close  Adj Close
251  2011-01-03  147.48     143.25
250  2011-01-04  147.64     143.41
249  2011-01-05  147.05     142.83
248  2011-01-06  148.66     144.40
247  2011-01-07  147.93     143.69 
```

这是我创建此数据框的方式：

```
import pandas

url = 'http://ichart.finance.yahoo.com/table.csv?s=IBM&a=00&b=1&c=2011&d=11&e=31&f=2011&g=d&ignore=.csv'
data = data = pandas.read_csv(url)

## now I sorted the data frame ascending by date 
data = data.sort(columns='Date') 
```

从第 2 行开始，或者在这种情况下，我猜它是 250（PS - 那是索引吗？），我想计算 2011-01-03 和 2011-01-04 之间的差异，对于这个数据框中的每个条目. 我相信适当的方法是编写一个获取当前行的函数，然后计算前一行，并计算它们之间的差异，使用该`pandas` `apply`函数用该值更新数据框。

这是正确的方法吗？如果是这样，我应该使用索引来确定差异吗？（注意 - 我仍然处于 python 初学者模式，所以 index 可能不是正确的术语，甚至不是正确的实现方式）

* * *

## 回答 #1

> 赞同：115
> 
> 时间：2012-10-29T03:17:30.307

我想你想做这样的事情：

```
In [26]: data
Out[26]: 
           Date   Close  Adj Close
251  2011-01-03  147.48     143.25
250  2011-01-04  147.64     143.41
249  2011-01-05  147.05     142.83
248  2011-01-06  148.66     144.40
247  2011-01-07  147.93     143.69

In [27]: data.set_index('Date').diff()
Out[27]: 
            Close  Adj Close
Date                        
2011-01-03    NaN        NaN
2011-01-04   0.16       0.16
2011-01-05  -0.59      -0.58
2011-01-06   1.61       1.57
2011-01-07  -0.73      -0.71 
```

* * *

## 回答 #2

> 赞同：18
> 
> 时间：2020-06-25T20:10:49.920

计算一列的差异。这是你可以做的。

```
df=
      A      B
0     10     56
1     45     48
2     26     48
3     32     65 
```

我们只想计算 A 中的行差异，并想考虑小于 15 的行。

```
df['A_dif'] = df['A'].diff()
df=
          A      B      A_dif
    0     10     56      Nan
    1     45     48      35
    2     26     48      19
    3     32     65      6
df = df[df['A_dif']<15]

df=
          A      B      A_dif
    0     10     56      Nan
    3     32     65      6 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-29T01:04:32.113

我不知道 pandas，而且我很确定它有一些特定的东西；但是，我会给你纯 Python 解决方案，即使你需要使用 pandas，它也可能会有所帮助：

```
import csv
import urllib

# This basically retrieves the CSV files and loads it in a list, converting
# All numeric values to floats
url='http://ichart.finance.yahoo.com/table.csv?s=IBM&a=00&b=1&c=2011&d=11&e=31&f=2011&g=d&ignore=.csv'
reader = csv.reader(urllib.urlopen(url), delimiter=',')
# We sort the output list so the records are ordered by date
cleaned = sorted([[r[0]] + map(float, r[1:]) for r in list(reader)[1:]])

for i, row in enumerate(cleaned):  # enumerate() yields two-tuples: (<id>, <item>)
    # The try..except here is to skip the IndexError for line 0
    try:
        # This will calculate difference of each numeric field with the same field
        # in the row before this one
        print row[0], [(row[j] - cleaned[i-1][j]) for j in range(1, 7)]
    except IndexError:
        pass 
```

# codeigniter - Active Record 登录限制功能

> ID：13114514
> 
> 赞同：0
> 
> 时间：2012-10-29T00:28:15.727
> 
> 标签：codeigniter, activerecord, login, throttling

我发现一个函数是为使用 PDO 而编写的，我将其修改为使用 codeigniters 活动记录数据库类。除非我将代码放在这样的函数中，否则一切正常：

```
 function login_attempt_count() {

      $seconds = 10;
         // First we delete old attempts from the table 
      $oldest1 = strtotime(date('Y-m-d H:i:s').' - '.$seconds.' seconds');
      $oldest2 = date('Y-m-d H:i:s',$oldest1);
      $del_data = $oldest2;
      $this->db->where('when <', $del_data);
      $this->db->delete('Login_Attempts');
        // Next we insert this attempt into the table
      $data = array(
      'ip' => $_SERVER['REMOTE_ADDR'],
      'when' => date("Y-m-d H:i:s"));
      $this->db->insert('Login_Attempts', $data);

        // Finally we count the number of recent attempts from this ip address 
      $count = 'SELECT count(*) as number FROM Login_Attempts WHERE ip = ?';
      $num = $this->db->query($count, $_SERVER['REMOTE_ADDR']);
      if ($num->num_rows() > 0){
        foreach($num->result() as $attempt){
          $attempts = $attempt->number;
            return $attempts;
        }
      }
 } 
```

像这样使用它：

```
 $max_attempts = 3;

    if(login_attempt_count() <= $max_attempts) {
        echo 'login';
    }else{
        echo 'To many attempts';
    } 
```

或这个：

```
 $a = login_attempt_count(); 
```

导致页面的其余部分无法加载。所以这表明一个错误。同样，如果我在函数内、函数外使用代码，它会按预期工作。

或者，如果我应该使用一种完全更好、更安全的方法，我愿意接受建议。谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-29T01:24:11.197

好的，我在这里回答我自己的问题。;) 该功能工作正常！但是，在视图中对其进行测试会导致错误吗？在我的模型中放置函数并在我的控制器中调用函数后效果很好。像这样使用它：

```
class Auth extends CI_Controller{

   function login(){

   $max_attempts = 3;
        if($this->auth_model->login_attempt_count() <= $max_attempts) {
          //Do something
        }else{
          //Something else
        } 
   }//End Function
}//End Class 
```

# c# - 一旦 mp3 文件的音量低于阈值，就停止播放 mp3 文件

> ID：13114516
> 
> 赞同：1
> 
> 时间：2012-10-29T00:28:23.250
> 
> 标签：c#, audio, naudio

我想在 C# 中播放一个 mp3 文件。表单应该有一个开始和停止按钮。

当用户单击停止按钮时，播放不会立即停止，而是当当前播放音量低于某个阈值时，即当 mp3 - 文件在给定的最短时间内出现“静音”时。

什么是一种有效的方法来做到这一点？

我需要知道

1.  使用哪个 dll/import 来播放 mp3 文件
2.  如何使用“1”中的相同 dll 获取正在播放的文件的*当前*音量级别。**作为整数、浮点数或双精度数**。

有了这两个问题的答案，我就可以自己继续了。

PS：我不想知道一般文件中的静音在哪里。我想要一个函数来告诉我现在是否有沉默。所以我将一些流的字节传递给它和一个阈值，它返回真或假。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-29T00:37:30.683

您没有指定用于播放 MP3 的内容。但我正在使用[BASS](http://www.un4seen.com/bass.html)。您的问题是在他们的论坛中提出的。[在](http://www.un4seen.com/forum/?topic=13147.0)这里。顺便说一句，您可能需要[BASS .NET](http://www.un4seen.com/download.php?z/4/Bass24.Net.zip)（它是 BASS 的 .NET 包装器）才能将 BASS 与 C# 一起使用。

由于有问题的变化而编辑：

您可以在我上面给出的链接中使用 bass.dll。下载 .NET 包装器，将其添加到您的引用中。这是VB 6中的一个示例。只需将longs更改为整数，将整数更改为shorts，函数名称相同。你应该从这里得到这个想法。

```
Public Sub GetSilenceLength(ByVal file As String, ByVal threshold As Long, ByRef startp As Long, ByRef endp As Long)
   Dim buf(50000) As Integer
   Dim count As Long, pos As Long
   Dim chan As Long
   Dim a As Long, b As Long
   Dim c As Long, d As Long
   count = 0

   chan = BASS_StreamCreateFile(BASSFALSE, file, 0, 0, BASS_STREAM_DECODE) 'create decoding channel

   If (chan = 0) Then Exit Sub

   Do
         b = BASS_ChannelGetData(chan, buf(0), 20000) 'decode some data
         b = b / 2 'bytes -> samples
         a = 0
         Do      'count silent samples
               a = a + 1
         Loop While ((a < b) And (Abs(buf(a)) <= threshold))
         count = count + (a * 2)
         If (a < b) Then 'sound has bagun
               'move back to a quieter sample (to avoid "click")
               Do
                     a = a - 1
                     count = count - 2
               Loop While ((a) And (Abs(buf(a)) > threshold / 4))
               Exit Do
         End If
   Loop While (BASS_ChannelIsActive(chan))

   startp = count

   pos = BASS_StreamGetLength(chan)
   Do
         pos = IIf(pos < 100000, 0, pos - 100000) 'step back a bit
         BASS_ChannelSetPosition chan, pos
         d = BASS_ChannelGetData(chan, buf(0), 100000) ' decode some data
         d = d / 2 'bytes -> samples
         c = d
         Do
               c = c - 1  'count silent samples
         Loop While (c > 0) And (Abs(buf(c)) <= threshold / 2) 'Here is the correction
         If (c > 0) Then   'sound has begun
               count = pos + c * 2
               Exit Do
         End If
   Loop While (pos > count)
   endp = count
   BASS_StreamFree (chan)
End Sub 
```

此外，如果你想褪色，那是另一个简单的故事。

# html - 谷歌网络字体编码/渲染问题

> ID：13114520
> 
> 赞同：1
> 
> 时间：2012-10-29T00:28:44.767
> 
> 标签：html, character-encoding, webfonts, google-webfonts

我正在尝试解决 Google WebFonts 的问题。我想使用他们的字体[Signika](http://www.google.com/webfonts/specimen/Signika)。如您所见，它有诸如Š、Ů 声明/实现之类的字母。然而，在我们的[网站上](http://idband.collin.sk)，它不会呈现这些字母，而只是标准的，并且在**DOMŮ**字中- 字母**Ů**是另一种字体，而**DALŠI**字母**Š**是另一种字体。有什么解决办法吗？我应该为这些类型的字母声明一些编码，还是问题出在哪里？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-10-29T01:10:12.540

当我查看您的网站时，我看到您在 Signika 字体中列出的有问题的单词（和单个字母）。

但是，我确实注意到，您只需要标准字体集，而不是 Laten-Extended 子集。如果其他浏览器遇到问题，您可能需要在[此页面上选中该框并更新您的代码。](http://www.google.com/webfonts#UsePlace:use/Collection:Signika)`Latin Extended (latin-ext)`

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2014-10-17T06:01:48.553

如果在字体文件中实现了字符但您的站点无法显示它，您需要检查您是否正在调用正确的子集：

例如，要请求 Oswald 的拉丁文和以拉丁文结尾的子集，URL 将是：

```
http://fonts.googleapis.com/css?family=Oswald&subset=latin,latin-ext 
```

了解更多信息：

[https://developers.google.com/fonts/docs/getting_started#Subsets](https://developers.google.com/fonts/docs/getting_started#Subsets)

希望能帮助到你。

# php - php更好的处理文件扩展名的方法

> ID：13114525
> 
> 赞同：-1
> 
> 时间：2012-10-29T00:30:28.637
> 
> 标签：php, filenames

> **可能重复：**
> [如何在 PHP 中提取文件扩展名？](https://stackoverflow.com/questions/173868/how-to-extract-a-file-extension-in-php)
> [获取文件扩展名（基本名称？）](https://stackoverflow.com/questions/1351543/get-the-file-extension-basename)

尝试从其他人的代码中学习，我看到很多方法可以从扩展名中删除文件名，但是大多数方法似乎过于本地化，因为它们假设了某种条件。例如 ：

这将假设只有 3 个字符的扩展名（如`.txt`, `.jpg`, `.pdf`）

```
substr($fileName, 0, -4); 
```

或者

```
 substr($fileName, 0, strrpos($fileName, '.')); 
```

但这可能会导致文件名出现问题，例如`.jpeg`, `.tiff` `.html`。或只有 2 个喜欢`.js`或`.pl`

（浏览[此列表](http://en.wikipedia.org/wiki/List_of_file_formats)显示某些文件名只能有 1 个字符，而有的则多达 10 个（！））

我见过的其他一些方法依赖于这一点（`.`）

例如 ：

```
 return key(explode(“.”, $filename)); 
```

可能会导致文件名出现问题，例如`20121029.my.file.name.txt.jpg`

同样在这里 ：

```
return preg_replace('/\.[^.]*$/', '', $filename); 
```

有些人使用`pathinfo($file)`和/或 `basename()`（它总是安全的吗？？）

```
basename($filename); 
```

和许多其他方法..

所以我的问题有几个部分：

*   “剥离”文件扩展名的最佳方法是什么？（有要点）

*   “获取”文件扩展名（没有重点）和/或检查它的最佳方法是什么

*   php 自己的函数（基本名称）是否会识别所有扩展名，无论它们可能多么奇特或文件名是如何构造的？

*   如果操作系统对此事有任何影响怎么办？（赢，linux，unix...）

*   所有那些我想得到答案的小问题都可以总结为一个整体的问题： **是否有一个防弹的、整体的、始终有效的、防故障的、最佳实践的、über_function将在所有和任何条件下工作？？**

**编辑 I** -[另一个文件扩展名列表](http://en.wikipedia.org/wiki/List_of_file_formats_%28alphabetical%29)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-29T00:54:04.037

引用重复问题的最佳答案：

```
$ext = pathinfo($filename, PATHINFO_EXTENSION); 
```

这是最好的方法。它由操作系统提供，并且是您能做的最好的。我知道没有任何情况下它不起作用。

一个例外是包含`.`. 但是没有一个理智的人会引入这样的文件扩展名，因为它会破坏*任何地方*，而且它会破坏隐式约定。

> 例如在文件 20121021.my.file.name.txt.tar.gz -`tar.gz`将是扩展名..

不，它更简单——也许这就是你担心的根源。的扩展`20121021.my.file.name.txt.tar.gz`是`.gz`。它是一个`.gz`用于所有意图和目的的 gzip 文件。只有当你解压缩它时，它才会变成一个`.tar`文件。在此之前，`.tar`文件名中的 没有意义，仅作为`gunzip`工具的信息。没有名为`.tar.gz`.

也就是说，检测文件扩展名并不能帮助您确定文件是否实际上是它声称的类型。但我相信你知道这一点，只是把它放在这里给未来的读者。

# regex - Perl 正则表达式禁用括号提取

> ID：13114528
> 
> 赞同：1
> 
> 时间：2012-10-29T00:30:43.237
> 
> 标签：regex, perl, extract

我正在尝试在[另一个答案](https://stackoverflow.com/questions/948795/how-can-i-do-a-global-regular-expression-match-in-perl)中找到的东西，但我遇到了一些问题：

我知道 URL 有更好的正则表达式，但例如考虑一下：

```
@links=($content =~ m/(https?)?.*[.]com/g);
*$content has text or html 
```

该部分`(https?)?`用于链接之类`www.google.com`的，但有括号返回`"http"`到`$1`其中`@links`！这是一个问题，因为我想要整个链接。

什么会从文本中全局提取*简单*链接（或指定的任何正则表达式）并将它们放入列表中？
简单来说，我的意思是：

*   `http://www.google.com`
*   `www.google.com`
*   `google.com`
*   `https://www.google.com`

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-29T00:57:20.647

您的方法太天真了，它不会捕获许多其他 URL。相反，请使用 Regexp::Common，如下所示：

```
use Regexp::Common qw/URI/;

my @links = ($content =~ /$RE{URI}/g); 
```

这适用于 HTTP、HTTPS、FTP 等，并正确捕获 URL 参数的更高级组合。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-10-29T02:45:50.420

非捕获版本如下所示：

```
m/(?:https?)?.*[.]com/g 
```

为了捕获链接，我使用了这个从 URI::Find 派生的正则表达式：

```
m<https?://[;/\?:\@&=+\$,\[\]A-Za-z0-9\-_.!~*'()%#]*[/\?:\@&=+\$\[A-Za-z0-9\-_!~*(%#]> 
```

# java - 坚持尝试实现 KeyListener

> ID：13114529
> 
> 赞同：-1
> 
> 时间：2012-10-29T00:30:48.370
> 
> 标签：java, swing, coding-style, jpanel, keylistener

试图让我的代码在屏幕上移动玩家（船舶）时遇到了很多麻烦。我可以让行星在屏幕和玩家飞船上绘制，但我不知道如何实现 keyListener 以至少打印出一些东西。预先感谢您的所有帮助！

```
 import javax.swing.JFrame;
   import javax.swing.JPanel;
   import java.awt.Canvas;
   import java.awt.Color;
   import java.awt.Dimension;
   import java.awt.Graphics;
   import java.awt.Point;
   import java.awt.Toolkit;
   import java.awt.event.KeyAdapter;
   import java.awt.event.KeyEvent;
   import java.awt.event.KeyListener;

  public class MapPanel extends JPanel {
  public static final int WIDTH = 25;
  public static final int HEIGHT = 20;
  int zone = 0;
  private int xValue;
  private int yValue;
  private Color color;
  public Planet[][] planetGrid = new Planet[WIDTH][HEIGHT];
  static Player currPlayer = new Player("h");
  static Universe universe = new Universe(currPlayer);

  /**
  * Create the panel.
  */
  public MapPanel(Universe univ, Player p) {
 this.universe = univ;
 currPlayer = p;
 int i = 0;
 this.setSize(new Dimension(450,450));
 setVisible( true );
 //this.addKeyListener(new KeyController());
 KeyController kc = new KeyController();
 this.addKeyListener(kc);
 repaint();

  }

  /**
  * Draw method to draw the playing field
  * @param g Graphics object
  * @param tileDimension dimension of the tile
  */
   public void draw(Graphics g)
   {
    universe.draw(g);

  //    KeyController key = new KeyController();
  }
  public void paintComponent(Graphics g) {
   super.paintComponent(g);
  draw(g);
   }
   public static void main(String[] args)
   {
    MapPanel mp = new MapPanel(universe, currPlayer);
   JFrame f = new JFrame();
   f.add(mp);
   f.setSize(new Dimension(450,450));
   f.setVisible(true);
   f.setFocusable(true);

    }
    private class KeyController implements KeyListener {
    public KeyController()
    {
     System.out.println("ghgh");
     setFocusable(true);
    // addKeyListener(this);
    }
    @Override
    public void keyPressed(final KeyEvent key) {
        System.out.println("fgfgf");
        if (currPlayer != null) {

            int oldX = currPlayer.getPosition().x;
            int oldY = currPlayer.getPosition().y;

            switch (key.getKeyCode()) {
                case KeyEvent.VK_RIGHT:
                  currPlayer.setPosition(new Point(oldX+1, oldY)); //move right
                  System.out.println("RIGHT");
                    break;
                case KeyEvent.VK_LEFT:
                      currPlayer.setPosition(new Point(oldX-1, oldY));         //move             left
                    break;
                case KeyEvent.VK_DOWN:
                      currPlayer.setPosition(new Point(oldX, oldY+1));         //move           down
                    break;
                case KeyEvent.VK_UP:
                      currPlayer.setPosition(new Point(oldX, oldY-1));         //move up
                    break;
            }

          }
          repaint();
        }
       @Override
    public void keyReleased(KeyEvent e) {
        System.out.println("ggg");
    }
    @Override
    public void keyTyped(KeyEvent e) {
        System.out.println("typeeeddd");
    }
     }

   } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-29T00:40:33.780

A`JPanel`不会自动获得键盘焦点，您应该在构造函数中调用它：

```
addMouseListener(new MouseAdapter(){
    public void mousePressed(MouseEvent evt){
        requestFocus();
    }
}); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-08-17T22:58:18.483

你可能需要做

```
MapPanel panel = new MapPanel();
panel.setFocusable(true); 
```

我遇到了同样的问题，我必须为所有其他组件（例如 JButton 的）执行以下操作：

```
myButton.setFocusable(false); 
```

为我工作。

# javascript - 使用 javascript 的替换函数在图中表示值

> ID：13114530
> 
> 赞同：1
> 
> 时间：2012-10-29T00:30:59.593
> 
> 标签：javascript, replace

是否可以使用 JavaScript 的替换功能将 HTML 文档中的任何值表示/转换/转换为（任何）图形。

例如，当我的 HTML 文档中有给定值“3 ghz”时，我希望它被（例如）一个进度条替换，该进度条将值“3”放在进度条中，进度条，表示从 0 到 5 的数字，以便您可以直观地表示数字 3，以给出给定值“3 ghz”的视觉反馈。

只是想知道它是否可能，以及是否有类似的东西。

在此先感谢，亚历山大

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-29T01:05:35.703

是的，你可以做这样的事情。主要问题是将命令与页面内容区分开来。首先，如果可以的话，使用更易于区分的命令名称（例如，“my_progress_bar(3)”而不是“3 ghz”。如果信息在用户看不到的地方，而不是直接在内容中，那就更好了：`<span class="my_progress_bar_3"></span>`.如果您出于某种原因必须使用这些内容，请尝试使用不会改变页面的内容对其进行标记：`<span class="dont_change_formating command">3 ghz</span>`. 如果即使这不是一个选项，并且您确实必须在文本内容中找到“3 ghz”“一些单词 1 2 3 ghz kql bsk”，那么您必须确保“3 ghz”不包括在进度条之外的任何其他原因的内容中，或者您必须以某种方式标记其他用法或忍受那些也被替换的用法。

# r - 如何将 RMSE、斜率、截距、r^2 添加到 R 图中？

> ID：13114539
> 
> 赞同：9
> 
> 时间：2012-10-29T00:31:51.643
> 
> 标签：r, plot, statistics

如何使用 R 将 RMSE、斜率、截距和 r^2 添加到绘图中？我附上了一个带有示例数据的脚本，它与我的真实数据集的格式相似——不幸的是，我处于静止状态。有没有比从方程式创建对象并将其插入到图表中更简单的方法将这些统计信息添加到图表中`text()`？理想情况下，我希望统计数据显示在图表上。我怎样才能做到这一点？

```
## Generate Sample Data
x = c(2,4,6,8,9,4,5,7,8,9,10)
y = c(4,7,6,5,8,9,5,6,7,9,10)

# Create a dataframe to resemble existing data
mydata = data.frame(x,y)

#Plot the data
plot(mydata$x,mydata$y)
abline(fit <- lm(y~x))

# Calculate RMSE
model = sqrt(deviance(fit)/df.residual(fit))

# Add RMSE value to plot
text(3,9,model) 
```

* * *

## 回答 #1

> 赞同：17
> 
> 时间：2012-10-29T10:06:36.520

这是一个使用基本图形并`?plotmath`绘制绘图并对其进行注释的版本

```
## Generate Sample Data
x = c(2,4,6,8,9,4,5,7,8,9,10)
y = c(4,7,6,5,8,9,5,6,7,9,10)

## Create a dataframe to resemble existing data
mydata = data.frame(x,y)

## fit model
fit <- lm(y~x, data = mydata) 
```

接下来计算要出现在注释中的值。我更喜欢`bquote()`这一点，其中任何标记的内容`.(foo)`都将替换为 object 的值`foo`。答案@mnel 在评论中指出您使用`substitute()`不同的方式实现相同的目标。因此，我在工作区中为您可能希望在注释中显示的每个值创建对象：

```
## Calculate RMSE and other values
rmse <- round(sqrt(mean(resid(fit)^2)), 2)
coefs <- coef(fit)
b0 <- round(coefs[1], 2)
b1 <- round(coefs[2],2)
r2 <- round(summary(fit)$r.squared, 2) 
```

现在使用描述的构造建立方程`?plotmath`：

```
eqn <- bquote(italic(y) == .(b0) + .(b1)*italic(x) * "," ~~ 
                  r^2 == .(r2) * "," ~~ RMSE == .(rmse)) 
```

完成后，您可以绘制绘图并用您的表达式对其进行注释

```
## Plot the data
plot(y ~ x, data = mydata)
abline(fit)
text(2, 10, eqn, pos = 4) 
```

这使：

![在此处输入图像描述](../Images/5450ba80dd679be7ccfb35630c0bbe15.png)

# qt - QDockWidget 带有标题栏的内容错误

> ID：13114540
> 
> 赞同：0
> 
> 时间：2012-10-29T00:32:06.773
> 
> 标签：qt, position, qdockwidget

这是我的问题：我创建了一个 QDockWidget 并在其中放置了一个 QGraphicsView，虽然它正在浮动，但所有内容都正确显示，但如果将它停靠在某个地方，我的内容的起始 X 和 Y 位于 QDockWidget 的标题栏上。显然，它应该在：

```
tilesetWindow = new QDockWidget(tr("Tileset"), this);
tilesetWindow->setMinimumSize(256,256);
tilesetWindow->setFloating(true);
connect(tilesetWindow, SIGNAL(visibilityChanged(bool)), this, SLOT(triggeredTileset()));

tilesetViewer = new QGraphicsView(tilesetWindow);
tilesetViewer->resize(256,256);
tilesetViewer->show(); 
```

一张图片来说明这一点：http: [//img86.xooimage.com/files/d/7/6/problem-391a96a.png](http://img86.xooimage.com/files/d/7/6/problem-391a96a.png)

我尝试将 QGraphicsView 放入容器中，然后放入 QDockWidget 中，但结果与上述相同。这是我为 QDockWidget 编写代码的唯一地方。

我怎样才能让它在停靠时从正确的位置开始？

编辑：

我尝试了一个新的 QtProject 并制作了一个带有 QTextBrowser 的 QDockWidget 并且有同样的错误：

```
MainWindow::MainWindow(QWidget *parent) :
QMainWindow(parent),
ui(new Ui::MainWindow)
{
    ui->setupUi(this);

    QDockWidget *dock = new QDockWidget(this, 0);
    dock->setFloating(true);

    QTextBrowser *t = new QTextBrowser(dock);
    t->show();
} 
```

我错过了一些我认为...

Qt Creator 2.4.1 基于 Qt 4.7.4（32 位）

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-30T21:57:13.660

将 QDockWidget 设置为 Parent 后，您还需要将 QDockWidget 的 Widget 设置为 QGraphicsView，或者您想要的任何其他。

```
MainWindow::MainWindow(QWidget *parent) :
QMainWindow(parent),
ui(new Ui::MainWindow)
{
ui->setupUi(this);

QDockWidget *dock = new QDockWidget(this, 0);
dock->setFloating(true);

QTextBrowser *t = new QTextBrowser(dock);
dock->setWidget(t);
} 
```

# php - 提交此表单后似乎无法阻止页面刷新

> ID：13114542
> 
> 赞同：1
> 
> 时间：2012-10-29T00:32:07.913
> 
> 标签：php, jquery, ajax, forms

好吧，我花了一段时间在互联网上搜索我似乎是一个简单的解决方案。我将向您展示我一直在查看的代码和 ajax 模板。

```
<form style="padding:10px 2px;" name="test" class="searchform" action="#" method="GET">
<input style="margin-top:22.5px;" name="input_value" type="text" class="searchbx" size="" placeholder="Search songs..." />
<select name="cbb">
<?php
echo "<option value='artist'>$Artist</option>";
echo "<option value='name'>$Title</option>";
?>
</select>
<input id="sa" style="position:absolute;margin-top:35px;width:90px;" name="submit" type="submit" class="searchbutton" value="OK" />
</form>
<div id="sidebar-query-results">
         <ul id="current-list" style="list-style: none; padding: 0;">
<?php
if (isset($_GET['submit']))
{
// Execute this code if the submit button is pressed.
if (empty($_GET['input_value'])) {
die();
}
include "db_config.php";

$input_value = $_GET['input_value'];
$combo_box_value = $_GET['cbb'];
echo $formvalue;
echo $cbbvalue;
$query =  "SELECT * FROM `links` WHERE `$combo_box_value` LIKE '%$input_value%' LIMIT 0, 20" ;   
$result = mysql_query($query);
if($result) {
while($row = mysql_fetch_assoc($result)){
$cover = $row['cover'];
$title = $row['title'];
$name = $row['name'];
$artist= $row['artist'];
$url = $row['url']; 
```

脚本的其余部分只是打印结果等。

脚本本身就像一个魅力，虽然我知道它很“邋遢”，但功能是我目前真正关心的全部。

无论如何这里是ajax模板：

```
 <script>
 $('form[name="test"]').submit(function(e) {
 e.preventDefault();

 $.ajax({
 url : #.action,
 type : this.method,
 data : $(this).serialize(),
 success : function(response) {

 }
 });
 });
 </script> 
```

无论哪种方式，这只是我无法使用 php 脚本的 ajax 脚本，我真的不想改变，我看过几十个教程，但是，我在将它们实施到我的情况时遇到了很多麻烦。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-29T00:34:58.537

那是因为脚本实际上导致了语法错误，因此您的 AJAX 绑定没有按预期发生（整个`<script>`被拒绝，因此它没有被绑定到提交事件并且从不调用`.preventDefault()`） - 主要是因为以下原因：

```
url : #.action, 
```

尝试将其更改为使用：

```
url : $(this).prop('action') 
```

（如果您想引用该`<form action="...">`属性）否则使用类似的字符串`url: '/submit.php',`

一个更通用的脚本是这样的：

```
$('form.ajax').on('submit',function(e){
  var $form = $(this);
  $.ajax({
    'type': $form.prop('method'),
    'url': $form.prop('action') || document.location,
    'data': $form.serialize(),
    'success': function(response){
      // handle response
    }
  });
  e.preventDefault();
}); 
```

然后，您可以将该`ajax`类添加到您希望使用 ajax 增强的任何形式（当然，那些不支持 javascript 的将默认返回“传统”方法）。

# linux - 命令挂头/ netcat

> ID：13114543
> 
> 赞同：0
> 
> 时间：2012-10-29T00:32:45.330
> 
> 标签：linux, shell, ssh, head, netcat

我正在使用两台 linux 机器来模拟一些防火墙测试......我`nc`通过在远程机器上运行 ssh 来执行测试......如果我产生`ssh`这样的东西，它就可以工作......

```
ssh -i id_dsa -o UserKnownHostsFile=/dev/null -o StrictHostKeyChecking=no \
    -p 2224 root@a2-idf-lab nc -s 10.26.216.82 10.195.18.132 \
    21 < /var/log/messages 
```

但是，如果我尝试控制`/var/log/messages`with`head -c 20 /var/log/messages`的数量，命令会挂起，但我不明白为什么......

```
ssh -i id_dsa -o UserKnownHostsFile=/dev/null -o StrictHostKeyChecking=no \
    -p 2224 root@a2-idf-lab nc -s 10.26.216.82 10.195.18.132 \
    21 < head -c 20 /var/log/messages 
```

我也试过这个没有更好的成功......

```
ssh -i id_dsa -o UserKnownHostsFile=/dev/null -o StrictHostKeyChecking=no \
    -p 2224 root@a2-idf-lab nc -s 10.26.216.82 10.195.18.132 \
    21 < (head -c 20 /var/log/messages) 
```

问题：为什么第二个命令会挂起，我该如何完成我需要的？

仅供参考，这些实验实际上是在准备发送`cat /dev/urandom | base64 | head -c 20 -`到...如果您可以给我可以通过 ssh 会话使用的`nc`cli，则可以加分...`nc`

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-29T00:40:02.533

`<`是shell重定向，它将输入流重定向到从文件中读取，而不是执行命令。尝试：

```
head -c 20 /var/log/messages | ssh -i id_dsa -o UserKnownHostsFile=/dev/null \
  -o StrictHostKeyChecking=no \
  -p 2224 root@a2-idf-lab nc -s 10.26.216.82 10.195.18.132 21 
```

这个管道`/var/log/messages`从本地机器到`nc`远程机器上。如果要`/var/log/messages`在远程计算机上使用该文件，请在命令周围使用引号：

```
ssh -i id_dsa -o UserKnownHostsFile=/dev/null -o StrictHostKeyChecking=no \
  -p 2224 root@a2-idf-lab "head -c 20 /var/log/messages |\
     nc -s 10.26.216.82 10.195.18.132 21" 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-29T00:37:52.443

尝试使用 head -n 20 我的猜测是问题是缺少最后的回车。

# jquery - jQuery DataTables 过滤多个表

> ID：13114548
> 
> 赞同：3
> 
> 时间：2012-10-29T00:33:09.253
> 
> 标签：jquery, datatable, datatables, filtering

我在我的一些 HTML 表中使用 jQuery DataTables。好吧，我有一个页面，我在其中列出了几个表，我必须通过相同的过滤器过滤所有这些表。在这种情况下是我自定义的日期范围。

所有的表都使用相同的 css 类来构造 dataTable 和我在日期范围内进行的搜索

```
$.fn.dataTableExt.afnFiltering.push(fn). 
```

我还有另一个文本搜索，使用

```
$('.dataTable').dataTable().fnFilter(
    searchVal,
    4,
    false,
    true
); 
```

这个也只能在一张桌子上工作，而不是像我期望的那样在所有桌子上工作。

谢谢，

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-29T01:07:26.433

你有没有注意到这个 **范围过滤（日期）**

*显示详细信息 筛选特定日期范围内的列。**请注意，您可能需要更改**输入的 id 以及存在开始和结束日期的列。*

```
$.fn.dataTableExt.afnFiltering.push(
function( oSettings, aData, iDataIndex ) {
    var iFini = document.getElementById('fini').value;
    var iFfin = document.getElementById('ffin').value;
    var iStartDateCol = 6;
    var iEndDateCol = 7;

    iFini=iFini.substring(6,10) + iFini.substring(3,5)+ iFini.substring(0,2)
    iFfin=iFfin.substring(6,10) + iFfin.substring(3,5)+ iFfin.substring(0,2)       

    var datofini=aData[iStartDateCol].substring(6,10) + aData[iStartDateCol].substring(3,5)+ aData[iStartDateCol].substring(0,2);
    var datoffin=aData[iEndDateCol].substring(6,10) + aData[iEndDateCol].substring(3,5)+ aData[iEndDateCol].substring(0,2);

    if ( iFini == "" && iFfin == "" )
    {
        return true;
    }
    else if ( iFini <= datofini && iFfin == "")
    {
        return true;
    }
    else if ( iFfin >= datoffin && iFini == "")
    {
        return true;
    }
    else if (iFini <= datofini && iFfin >= datoffin)
    {
        return true;
    }
    return false;
}); 
```

还

**范围过滤（数字）** 根据介于两个给定数字之间的值过滤特定的数字列。**请注意，您可能需要更改***输入*的id和给出**数值的***列*。

# android - Android将日期作为长值

> ID：13114552
> 
> 赞同：1
> 
> 时间：2012-10-29T00:33:50.043
> 
> 标签：android, date

如何将前一天晚上的 11:59 PM 和今晚的 12:00 AM 表示为长值？？？

这么多不同的日期选项我很困惑

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-29T05:32:29.283

you can use this calculation to do so.

```
//11:59 PM of the previous night and 12:00 AM of tonight 

    Calendar prevDate = Calendar.getInstance();
    if(prevDate.get(Calendar.DATE)==1)
    {
        if(prevDate.get(Calendar.MONTH)==0)
        {
            prevDate.set(Calendar.YEAR, prevDate.get(Calendar.YEAR)-1);
            prevDate.set(Calendar.MONTH,Calendar.DECEMBER);
            prevDate.set(Calendar.DAY_OF_MONTH,31);
        }
        else
        {
            prevDate.set(Calendar.MONTH,prevDate.get(Calendar.MONTH)-1);
            prevDate.set(Calendar.DAY_OF_MONTH, prevDate.getMaximum(Calendar.DAY_OF_MONTH));
        }
    }   
    else
    {
        prevDate.set(Calendar.DAY_OF_MONTH,prevDate.get(Calendar.DAY_OF_MONTH)-1);
    }

    prevDate.set(Calendar.HOUR_OF_DAY, 11);
    prevDate.set(Calendar.MINUTE, 59);

    Calendar currDate = Calendar.getInstance();
    currDate.set(Calendar.HOUR_OF_DAY, 0);
    currDate.set(Calendar.MINUTE, 0);

    long prevDateLong = prevDate.getTimeInMillis();
    long currDateLong = currDate.getTimeInMillis();

    Log.i("", prevDate.toString()+" >>>>>>>> "+currDate.toString());
    Log.i("", prevDateLong+" >>>>>>>>> "+currDateLong); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-29T00:36:01.040

所有 Java 日期都在下面。这是自 1970 年 1 月 1 日午夜以来的毫秒数。

```
Date today = new SimpleDateFormat("yyyy-MMM-dd").parse("2012-Oct-28");  // today at midnight
long millis = today.getTime(); 
```

我建议你看看`java.util.Calendar`课堂。这并不难，只是乏味。

[http://www.exampledepot.com/search/luceneapi_node/Calendar](http://www.exampledepot.com/search/luceneapi_node/Calendar)

# visual-studio-2010 - Visual Studio 禁用拼写检查

> ID：13114557
> 
> 赞同：27
> 
> 时间：2012-10-29T00:34:44.873
> 
> 标签：visual-studio-2010, visual-assist

如何在 Visual Studio 2010 中禁用拼写检查？通过拼写检查，我的意思是在注释、字符串等中，而不是在实际代码中

* * *

## 回答 #1

> 赞同：19
> 
> 时间：2013-01-05T06:03:38.127

在`Underlines`页面上的 Visual Assist X 选项对话框中，取消选中“在注释和字符串中为拼写错误下划线”选项。

* * *

## 回答 #2

> 赞同：13
> 
> 时间：2012-10-29T00:43:01.700

**Cory** - 这将禁用语法高亮。

这可能是您安装的扩展。您需要在扩展管理器中禁用它或将其配置为不检查拼写。

[http://blogs.msdn.com/b/yardman/archive/2011/02/01/visual-studio-2010-spell-checker.aspx](http://blogs.msdn.com/b/yardman/archive/2011/02/01/visual-studio-2010-spell-checker.aspx)

例如，在我的安装中，拼写检查由 Visual Assist 提供。如果我禁用此扩展程序，那么评论中的波浪线就会消失。

* * *

## 回答 #3

> 赞同：9
> 
> 时间：2012-10-29T00:40:14.577

我相当肯定 VS2010 没有内置拼写检查器，但是，C/C++ 选项包含可能导致“红色曲线”的 IntelliSense。以下是禁用这些的方法：

工具 -> 选项 -> 文本编辑器 -> C/C++ -> 高级

在“IntelliSense”下将有一个名为“禁用 Squiggles”的选项。将其设置为真。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2021-04-13T09:32:24.617

在 Visual Studio 2019 中遇到了这个问题。原来是我的 Resharper 扩展。Extensions->Resparper->Options->Tools->Respeller->Enable Respeller（取消勾选）

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2016-01-05T14:14:31.747

在 javascript 中，我通过转到工具 > 选项 > 文本编辑器 > Javascript > 高级 > 取消选中显示语法错误来解决这个问题。

# c++ - 有没有办法在平均值中不包含负数，当输入负数时如何终止程序？

> ID：13114560
> 
> 赞同：0
> 
> 时间：2012-10-29T00:35:37.540
> 
> 标签：c++

上次看到我之前的帖子的人很抱歉。它充斥着粗心的错误和错别字。这是我的任务：

> > “编写一个程序，使用户能够通过输入语句输入一系列非负数。在输入过程结束时，程序将显示：奇数个数及其平均值；偶数个数“

这是我的代码：

```
#include <iostream>
#include <iomanip>

using namespace std;

int main()
{
    int number, total1=0, total2=0, count1=0, count2=0;
    do
    {
        cout << "Please enter a number. The program will add up the odd and even ones separately, and average them: ";
        cin >> number;

        if(number % 2 == 0)
        {
            count1++;
            total1+=number;
        }
        else if (number >= 0)
        {
            count2++;
            total2+=number;
        }
    }
    while (number>=0);
        int avg1 = total1/count1;
        int avg2 = total2/count2;
        cout << "The average of your odd numbers are: " << avg1 << endl;
        cout << "The average of your even numbers are " << avg2 << endl;
} 
```

它似乎工作正常，但是当我输入一个负数来终止程序时，它会将它与其余的平均数一起包含在内。有什么建议可以解决这个问题吗？我知道这是可能的，但我没有想到这个想法。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-29T00:38:51.690

你的主循环应该是这样的：

```
#include <iostream>

for (int n; std::cout << "Enter a number: " && std::cin >> n && n >= 0; )
{
    // process n
} 
```

或者，如果您想发出诊断：

```
for (int n; ; )
{
    std::cout << "Enter a number: ";

    if (!(std::cin >> n)) { std::cout << "Goodbye!\n"; break; }

    if (n < 0) { std::cout << "Non-positve number!\n"; break; }

    // process n
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-29T00:38:36.837

在这里之后：

```
cout << "Please enter a number. The program will add up the odd and even ones seperately, and average them: ";
cin >> number; 
```

立即检查数字是否为负数

```
if(number < 0) break; 
```

现在您不需要使用 do-while 循环来检查数字是否为负数。因此，您可以使用无限循环：

```
while(true) {
   cout << "Please enter a number. The program will add up the odd and even ones seperately, and average them: ";
   cin >> number;

   if(number < 0) break;

   // The rest of the code...
} 
```

**附加**：您的代码有问题。您没有向用户显示偶数和奇数的数量以及输入的数字总数。

**另一个附加**：您应该使用更有意义的变量名称：

```
int totalNumEntered = 0, sumEven = 0, sumOdd = 0, numEven = 0, numOdd = 0; 
```

当然，我并不限制您使用这些名称。您也可以使用其他类似的名称。

**对于整数除法问题**：您必须将表达式值转换为正确的类型（在这种情况下，它是`float`）。您还应该将平均变量的类型更改为`float`：

```
float avg1 = float(total1) / float(count1);
float avg2 = float(total2) / float(count2); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-29T00:39:08.397

在 cin >> number 之后，立即检查 < 0，如果是则中断。尝试逐行逐步执行程序，以了解执行流程。祝您学习愉快，祝您好运！

# javascript - javascript继承奇怪

> ID：13114563
> 
> 赞同：1
> 
> 时间：2012-10-29T00:36:07.000
> 
> 标签：javascript, inheritance

为什么下面的“Cat.prototype = new Mammal()”行在 Cat() 函数内部不起作用，但在 Cat() 函数外部起作用？

```
function Mammal() {
  Mammal.prototype.hasHair = function() { return true; }
}

alert( new Mammal().hasHair() ); // dispays true here

function Cat() {
  Cat.prototype = new Mammal();
}

try {
  new Cat().hasHair(); // doesn't work. why?
} catch ( err ) {
  alert('error'); // displays error here
}

Cat.prototype = new Mammal(); // same line as inside Cat() function

alert( new Cat().hasHair() ); // now it works 
```

我尝试了几种不同的 javascript 实现，所以我怀疑它是一种实现特性。我想知道这主要是出于好奇，但也只是为了组织，我想在 Cat 的函数中定义 Cats，而不是到处传播。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-29T00:53:48.747

在您执行的那一刻`new Cat`，将创建一个继承自的空对象`Cat.prototype`。是什么`Cat.prototype`？这是一个空对象，因为您还没有修改它。

在构造函数内部，您正在分配`Cat.prototype = new Mammal();`. 的下一个实例`Cat`将从该`Mammal`实例继承。但是，创建第二个实例也会创建另一个`Mammal`实例，第三个实例从该`Cat`实例继承，依此类推。

你最终得到这个继承链（`catX`是的第x个实例`Cat`并且`mammalX`是的第x个实例`Mammal`）：

```
cat0 -> Object
cat1 -> mammal0 -> Mammal.prototype
cat2 -> mammal1 -> Mammal.prototype
... 
```

每个`Cat`实例都有自己的原型，这在某种程度上与原型的用途相反（共享公共代码）。它可能看起来没什么大不了的，但它有几个后果，包括：

*   增加内存使用：（几乎）每个`Cat`实例都有一个对应的`Mammal`实例，所以你有`2N`对象而不是`N + 1`.
*   继承测试中断：`instanceof`通过比较原型来工作，并且由于原型`cat0`不同`Cat.prototype`（在创建多个实例之后），`cat instanceof Cat`将产生`false`。

您真正想要的继承链是：

```
cat0 -> Mammal.prototype
cat1 -> Mammal.prototype
cat2 -> Mammal.prototype
... 
```

* * *

永远不要在构造函数中为原型赋值（或覆盖原型）。构造函数应该只设置**实例特定**的属性（在某些情况下，您可能想要更改静态属性，但这些不太常见）。

在构造函数之外设置原型：

```
function Mammal() {}       
Mammal.prototype.hasHair = function() { return true; }

function Cat() {
    Mammal.apply(this, arguments);
}
Cat.prototype = Object.create(Mammal.prototype);
Cat.prototype.constructor = Cat; 
```

`Object.create`创建一个继承自作为参数传递的对象的对象。见[MDN](https://developer.mozilla.org/en-US/docs/JavaScript/Reference/Global_Objects/Object/create)。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-29T00:40:20.283

因为成员在构造函数执行**之前**`prototype`被传递给对象实例。

 **[http://jsfiddle.net/vSDbB/](http://jsfiddle.net/vSDbB/)

```
function Mammal() {
  Mammal.prototype.hasHair = function() { return true; }
}

function Cat() {
    Cat.prototype = new Mammal();
}

new Cat();
alert(new Cat().hasHair()); 
```

所以上面的代码可以工作，但是如果你注释了第一`new Cat();`行它就不会因为在这`new Cat().hasHair()`条线上 Cat's prototype doesn't have `hasHair()`method

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-29T00:53:16.473

我编辑了您的代码，以便它可以实现您的目标。以下代码创建一个基类，然后创建一个与您尝试执行的样式相同的子类。

```
function Mammal() {
  this.hasHair = function() { return true; }
}

alert( new Mammal().hasHair() ); // dispays true here

function Cat() {
   Mammal.call(this);

}

try {
  alert( new Cat().hasHair() ); // dispays true here
} catch ( err ) {
  alert('error'); // should not fire
} 
```

​</p>

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-10-29T00:40:35.573

我有点困惑。你实际上期待什么？

您正在将一个*函数*分配到*原型链*中`Cat`，但是您是在调用构造函数时这样做的。如果您将其称为 like `new Cat().hasHair()`，则*调用对象*根本不知道该函数。

**您需要`.prototype`在实际调用构造函数之前扩展 。**

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-10-29T01:03:40.020

因为您在每次实例化时都覆盖了原型。Javascript 并没有真正的继承。

当你这样做时

```
function Mammal() {
    Mammal.prototype.hasHair = function() { return true; }
}
new Mammal().hasHair(); 
```

它的意思是

1.  用作`Mammal`构造函数并实例化`new Mammal`类型对象
2.  覆盖`Mammal`每次执行此操作的原型

但如果你这样做：

```
function Cat() {
}
Cat.prototype = new Mammal();
new Cat().hasHair(); 
```

它的意思是

1.  让`Cat`构造函数的原型为`new Mammal type object`
2.  通过“类”实例化一个`new Cat type object`“继承”方法的方法`hasHair()``Mammal`

希望这可以帮助。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-10-29T00:47:06.040

函数的原型（充当类）是创建新对象时复制的对象。您不应该在构造函数的原型上设置属性。

要么：

```
function Mammal() {
}
Mammal.prototype.hasHair = function(){ return true }; 
```

或这个：

```
function Mammal() {
    this.hasHair = function(){ return true }
} 
```**

# objective-c - NSMutableIndexSet 中最高索引的索引

> ID：13114564
> 
> 赞同：0
> 
> 时间：2012-10-29T00:36:14.613
> 
> 标签：objective-c, ios, set, indexing, nsindexset

如何获取包含在 中的最高（数字）索引的索引`NSMutableIndexSet`？

即最高 NSUInteger（索引）在`NSMutableIndexSet`？

```
NSArray *results = [subCategory filteredArrayUsingPredicate:predicate];

if([results count] == 1) {

    returns = [results objectAtIndex:0];

 }

else if ([results count] > 1) {

     NSMutableIndexSet *set = [NSMutableIndexSet indexSet];

     for (NSString *subCat in results) {

        NSUInteger indexs = 0;

        for (NSString *comp in components) {

            if ([subCat rangeOfString:comp].location != NSNotFound) {

                indexs ++;

            }

        }

        [set addIndex:indexs];

    }

    // find the position of the highest amount of matches in the index set

    NSUInteger highestIndex = ...;

    returns = [results objectAtIndex:highestIndex];   

} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-29T00:40:36.993

`NSMutableIndexSet`是 的子类`NSIndexSet`。 `NSIndexSet`了解[`lastIndex`选择器](http://developer.apple.com/library/ios/documentation/cocoa/reference/Foundation/Classes/NSIndexSet_Class/Reference/Reference.html#//apple_ref/doc/uid/20002197-BAJDDCAC)：

> 返回索引集中的最后一个索引或未找到的指示符。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-29T00:42:08.193

在向索引集添加值时跟踪：

```
NSMutableIndexSet *set = [NSMutableIndexSet indexSet];
NSUInteger maxIndexs = 0;
NSUInteger indexOfMax = NSNotFound;
for (NSString *subCat in results) {
    NSUInteger indexs = 0;
    for (NSString *comp in components) {
        if ([subCat rangeOfString:comp].location != NSNotFound) {
            indexs ++;
        }
    }

    if (indexes > maxIndexs) {
        maxIndexs = indexs;
        indexOfMax = set.count;
    }
    [set addIndex:indexs];
}

// find the position of the highest amount of matches in the index set
NSUInteger highestIndex = indexOfMax;

returns = [results objectAtIndex:highestIndex]; 
```

# ruby - rake import - 仅将一行从 csv 添加到数据库

> ID：13114568
> 
> 赞同：2
> 
> 时间：2012-10-29T00:37:18.383
> 
> 标签：ruby, ruby-on-rails-3.2

我正在尝试按照本[教程](http://dwradcliffe.com/2011/12/29/import-csv.html)将 CSV 文件导入我的 rails 数据库（SQLite 开发中） 。数据实际上被插入到我的数据库中，但它似乎只插入了 CSV 文件中的第一条记录。耙子似乎运行没有问题。并且使用 --trace 运行它不会显示任何其他信息。

```
require 'csv'
desc "Import Voters from CSV File"
task :import => [:environment] do

  file = "db/GOTV.csv"

  CSV.foreach(file, :headers  => false) do |row|
    Voter.create({
      :last_name              => row[0], 
      :first_name             => row[1],
      :middle_name            => row[2],
      :name_suffix            => row[3],
      :primary_address        => row[4],
      :primary_city           => row[5],
      :primary_state          => row[6],
      :primary_zip            => row[7],
      :primary_zip4           => row[8],
      :primary_unit           => row[9],
      :primary_unit_number    => row[10],
      :phone_number           => row[11],
      :phone_code             => row[12],
      :gender                 => row[13],
      :party_code             => row[14],
      :voter_score            => row[15],
      :congressional_district => row[16],
      :house_district         => row[17],
      :senate_district        => row[18],
      :county_name            => row[19],
      :voter_key              => row[20],
      :household_id           => row[21],
      :client_id              => row[22],
      :state_voter_id         => row[23]
      })
  end
end 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-05-15T16:37:27.880

刚刚也遇到了这个问题 - 猜你以其他方式解决了它，但仍然可能对其他人有用。

就我而言，问题似乎是 CSV 库中的不兼容更改。

我猜你使用的是 Ruby 1.8，其中

```
CSV.foreach(path, rs = nil, &block) 
```

这里的文档严重缺乏，实际上根本没有文档，所以必须从源代码中猜测：[http ://ruby-doc.org/stdlib-1.8.7/libdoc/csv/rdoc/CSV.html#method-c- foreach](http://ruby-doc.org/stdlib-1.8.7/libdoc/csv/rdoc/CSV.html#method-c-foreach) .. 无论如何，'rs' 显然不是选项哈希，它看起来像记录分隔符。

在 Ruby 1.9 这更好：[http ://ruby-doc.org/stdlib-1.9.2/libdoc/csv/rdoc/CSV.html#method-c-foreach](http://ruby-doc.org/stdlib-1.9.2/libdoc/csv/rdoc/CSV.html#method-c-foreach)

```
self.foreach(path, options = Hash.new, &block) 
```

所以这是支持诸如`:headers`..

# python - 基本 Python 元编程：填充字典？

> ID：13114571
> 
> 赞同：1
> 
> 时间：2012-10-29T00:37:40.023
> 
> 标签：python, exception-handling, dictionary, metaprogramming, conditional

我一直在学习 Ruby 中的元编程，并且发现它非常有用。我确信我可以在 Python 中做同样的事情。

例如：我将如何使用元编程以简洁和通用的方式重写这个函数？

```
def foo(bar=None, baz=None, qux=None, haz=None):
    txt = {}

    if bar:
        txt.update({'bar': bar})
    if baz:
        txt.update({'baz': baz})
    if qux:
        txt.update({'qux': qux})
    if haz:
        txt.update({'haz': haz})

    return txt 
```

（这显然过于简单，在实践中可能会根据单个键的值集执行不同的任务）

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-10-29T00:42:47.520

您可以使用以下`**kwargs`语法：

```
def foo(**kwargs):
    txt = {}
    for k, v in kwargs.items():
        if v:
            txt[k] = v
    return txt 
```

或者，如果您的墨水不足：

```
def foo(**kwargs):
    return dict(((k,v) for k, v in kwargs.items() if v)) 
```

*正如克莱门特·贝洛特所建议的：*

如果您想确保这些参数在您的预期集合中，您可以有一个`ALLOWED_PARAMS = ('bar','baz','qux','haz')`常量并替换`if v`为`if v and k in ALLOWED_PARAMS`.

*正如帝斯曼建议的那样：*

如果您正在运行 Python 2.7+，则可以使用[dict comprehension](http://www.python.org/dev/peps/pep-0274/)。
此版本还提供了“允许的变量”问题的替代方案：

```
def foo(bar=None, baz=None, qux=None, haz=None): 
    return {k:v for k,v in locals().items() if v} 
```

* * *

假设您实际上想根据存在的那些参数调用函数，您可以这样做：

```
KWARGS_TO_FUNCTIONS = {
    'bar':fn_bar,
    'baz':fn_baz, 
    'qux':fn_qux,
    'haz':fn_haz,
}

def foo(**kwargs):
    for k, v in kwargs.items():
        if v:
            try:
                KWARGS_TO_FUNCTIONS[k](v)
            except KeyError:
                pass # We didn't want that kwarg. 
```

* * *

现在，总而言之，我不完全确定这真的是“元”。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-10-29T01:19:50.200

Thomas 给出了一些使用`**kwargs`. 我认为您在使用时不需要`if`s `**kwargs`。在原始代码中，需要测试参数是否被省略。使用`**kwargs`时，字典将包含给定的参数，所以我们只需要

```
def foo(**kwargs):
    return kwargs 
```

甚至不需要这个实现——你可以使用`dict()`构造函数来代替：

```
>>> dict(bar=1, baz=2, qux=3, haz=4)
{'qux': 3, 'haz': 4, 'baz': 2, 'bar': 1} 
```

# php - SimpleXML 获得不同的属性

> ID：13114577
> 
> 赞同：0
> 
> 时间：2012-10-29T00:39:22.843
> 
> 标签：php, xml, simplexml

> **可能重复：**
> [一个简单的程序来 CRUD 节点和 xml 文件的节点值](https://stackoverflow.com/questions/4906073/a-simple-program-to-crud-node-and-node-values-of-xml-file)

如何从此 XML 提要中获取特定属性？

示例 - 我一直在使用与此类似的行来获取其他 XML 详细信息，但我不确定如何更改它以获取特定属性。

`$mainPropertyDetails = $mainPropertyUrl->Attributes->attribute;`

**属性：**

```
<Attributes>
<Attribute>
<Name>bedrooms</Name>
<DisplayName>Bedrooms</DisplayName>
<Value>4 bedrooms</Value>
</Attribute>
<Attribute>
<Name>bathrooms</Name>
<DisplayName>Bathrooms</DisplayName>
<Value>2 bathrooms</Value>
</Attribute>
<Attribute>
<Name>property_type</Name>
<DisplayName>Property type</DisplayName>
<Value>House</Value>
</Attribute> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-29T00:44:26.083

`SimpleXML`将这些节点实现为数组。如果你`var_dump()`这样做，你会看到类似的东西：

```
// Dump the whole Attributes array
php > var_dump($xml->Attributes);

object(SimpleXMLElement)#6 (1) {
  ["Attribute"]=>
  array(3) {
    [0]=>
    object(SimpleXMLElement)#2 (3) {
      ["Name"]=>
      string(8) "bedrooms"
      ["DisplayName"]=>
      string(8) "Bedrooms"
      ["Value"]=>
      string(10) "4 bedrooms"
    }
    [1]=>
    object(SimpleXMLElement)#5 (3) {
      ["Name"]=>
      string(9) "bathrooms"
      ["DisplayName"]=>
      string(9) "Bathrooms"
      ["Value"]=>
      string(11) "2 bathrooms"
    }
    [2]=>
    object(SimpleXMLElement)#3 (3) {
      ["Name"]=>
      string(13) "property_type"
      ["DisplayName"]=>
      string(13) "Property type"
      ["Value"]=>
      string(5) "House"
    }
  }
} 
```

因此，只需通过数组索引访问特定的问题：

```
// Get the second Attribute node
var_dump($xml->Attributes[0]->Attribute[1]);

object(SimpleXMLElement)#6 (3) {
  ["Name"]=>
  string(9) "bathrooms"
  ["DisplayName"]=>
  string(9) "Bathrooms"
  ["Value"]=>
  string(11) "2 bathrooms"
} 
```

### 根据孩子的值获取属性节点：

使用您可以根据孩子的文本值[`xpath()`](http://php.net/manual/en/simplexmlelement.xpath.php)查询父节点：`Attribute`

```
// Get the Attribute containing the Bathrooms DisplayName
// Child's text value is queried via [AttrName/text()="value"]
var_dump($xml->xpath('//Attributes/Attribute[DisplayName/text()="Bathrooms"]');

array(1) {
  [0]=>
  object(SimpleXMLElement)#6 (3) {
    ["Name"]=>
    string(9) "bathrooms"
    ["DisplayName"]=>
    string(9) "Bathrooms"
    ["Value"]=>
    string(11) "2 bathrooms"
  }
} 
```

# php - 通过要求页面查看的顺序来限制对特定页面的访问

> ID：13114580
> 
> 赞同：0
> 
> 时间：2012-10-29T00:39:39.870
> 
> 标签：php, security

我正在尝试限制页面访问，以便用户必须通过单击 3 个页面中的 1 个上的按钮进入相关页面。

因此，需要明确的是，只有当用户单击页面 1、2 或 3 中的按钮时，才能访问页面 x。

我尝试过使用`isset`if/`else`块，但似乎无法通过这种方式限制页面访问取得任何进展。如果有人有任何建议，我将不胜感激！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-29T02:24:46.470

使用会话...

例如

```
session_start();
$_SESSION=array(); 
```

在每个页面中向数组添加一个值

```
 $_SESSION['page1']="viewed";
 $_SESSION['page2']="viewed"; 
```

在您的安全页面中检查`$_SESSION`数组的元素

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-29T00:42:11.043

单击所述按钮时设置一个cookie，并在访问该页面时检查该cookie。

# javascript - Firefox & iPad 2 (Safari) 在水平滚动中有额外的空间

> ID：13114590
> 
> 赞同：1
> 
> 时间：2012-10-29T00:41:23.590
> 
> 标签：javascript, css, firefox, safari, cross-browser

当您滚动到 Firefox 底部和 iPad 2（运行 Safari）时，会出现水平滚动，这让我们感到困惑。

在 Mac 和 PC 上的 Firefox 中，根据 Firebug，所有元素的大小都是正确的。但是，如果您滚动，则会出现这个灰色区域。滚动条不反映这个额外的空间；您需要通过触控板访问它。在 iPad 上，灰色空间显示为身体的一部分。也就是说，浏览器认为该站点比实际宽 200 像素左右。它在桌面 Safari 上正常工作。

我已经遍历了每个子元素，并且一切都合适。任何帮助将不胜感激。！

谢谢！

[在这里你可以看到我们不想要的灰色空间！](http://i.stack.imgur.com/N2iVv.png)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-29T00:46:04.600

也没有完全理解你的问题——图像比它的帮助更大，但我的第一个建议是在你的 CSS 中，设置`overflow: hidden`为你的身体或主容器 div。

# r - 在 R 中保存多个 pdf 文件时出现问题

> ID：13114594
> 
> 赞同：3
> 
> 时间：2012-10-29T00:42:15.147
> 
> 标签：r, pdf, save

我正在尝试保存在 R 中使用“for”循环创建的几个 xyplots，如果执行以下循环，我将无法获得完整的 pdf 文件（所有文件的大小相同，我无法打开它们）：

```
for (i in 1:length(gases.names)) {
   # Set ylim;
   r_y <- round(range(ratio.cal[,i][ratio.cal[,i]<999], na.rm = T), digits = 1);
   r_y <- c(r_y[1]-0.1, r_y[2]+0.1);

   outputfile <- paste (path, "/cal_ratio_",gases.names[i], ".pdf", sep="");
   dev.new();
   xyplot(ratio.cal[,i] ~ data.GC.all$data.time, groups = data.vial, panel = 
      panel.superpose, xlab = "Date", ylab = gases.names[i], xaxt="n", ylim = r_y);
   savePlot(filename = outputfile, type = 'pdf', device = dev.cur());
   dev.off();
} 
```

（以前的版本使用`trellis.device()`而不是`dev.new() + savePlot()`）

你知道为什么我不能得到好的 pdf 文件吗？如果我“手动”执行它，它会起作用……知道吗？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-29T00:46:33.053

`pdf`直接使用

```
for (i in seq_along(gases.names)) {
  # Set ylim
  r_y <- round(range(ratio.cal[,i][ratio.cal[,i]<999], na.rm = T), digits = 1)
  r_y <- c(r_y[1]-0.1, r_y[2]+0.1)

   outputfile <- paste (path, "/cal_ratio_",gases.names[i], ".pdf", sep="")
   pdf(file = outputfile, width = 7, height = 7)
   print(xyplot(ratio.cal[,i] ~ data.GC.all$data.time, groups = data.vial, 
                 panel =  panel.superpose, xlab = "Date", ylab = gases.names[i], 
                 xaxt="n", ylim = r_y))

  dev.off()

} 
```

# php - 如果子类未定义构造函数，是否会调用父构造函数？

> ID：13114602
> 
> 赞同：20
> 
> 时间：2012-10-29T00:43:09.020
> 
> 标签：php, class, constructor, parent-child

在[PHP Constructors and Destructors 文档](http://php.net/manual/en/language.oop5.decon.php)中它指出

> **注意：**如果子类定义了构造函数，则不会隐式调用父构造函数。为了运行父构造函数，需要在子构造函数中调用 parent::__construct()。

但是如果子类不调用构造函数，还会调用父构造函数吗？还是我们应该创建一个调用父构造函数的构造函数？

IE：

```
class BaseClass {
   function __construct() {
       print "In BaseClass constructor\n";
   }
}

class SubClass extends BaseClass {
   function __construct() {
       parent::__construct();
   }
} 
```

* * *

## 回答 #1

> 赞同：19
> 
> 时间：2012-10-29T00:43:09.020

也许这有点明显，但做了一些环顾四周，令人惊讶的是，这个问题的直接答案并不容易找到，所以这里是：

如果子类没有**定义**构造函数，则将调用父构造函数。

在下面的示例中，$obj 仍然会从 BaseClass 调用构造函数，因为 SubClass 从未调用过构造函数。

```
class BaseClass {
    function __construct() {
       print "In BaseClass constructor\n";
    }
}

class SubClass extends BaseClass {
    //I do not have a constructor :(
}

$obj = new SubClass(); 
```

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-10-29T01:04:18.287

考虑到构造函数是一种可以像任何其他方法一样被覆盖的方法。如果父类有构造函数，它的所有子类都将继承该构造函数。如果子代重写构造函数，则在创建新对象时将使用 this，并且不会隐式调用父代的构造函数。如果子级没有覆盖构造函数，则将使用父级的构造函数。这个概念适用于多重继承。

# c# - 如何将三个 Windows 窗体应用程序转换为一个？

> ID：13114609
> 
> 赞同：2
> 
> 时间：2012-10-29T00:44:14.233
> 
> 标签：c#, winforms, visual-studio-2010

我创建了 3 个不同（但共享相同的数据库连接）的 Windows 窗体应用程序。每个这样的应用程序都非常简单，并且仅包含一个表单。

假设我有 3 个表单：Form1、Form2 和 Form3，我现在想定义 Form1 是主表单（也是唯一的应用程序），并从 Form1 中调用 Form2 和 Form3，作为 Form1 应用程序的一部分，而不是作为独立应用程序。类似于：

```
private void btnForm2_Click(object sender, EventArgs e)
{
    Form2 form2 = new Form2();
    form2.Show();
}

private void btnForm3_Click(object sender, EventArgs e)
{
    Form3 form3 = new Form3();
    form3.Show();
} 
```

虽然这看起来很简单，但我对如何将 Form2 和 Form3 导入 Form1 项目感到困惑，而不会损害 VS 2010 已经“自动”执行的操作的完整性。

`Form2.cs`也就是说，我相信我需要拖放到项目中的不仅仅是文件`Form1`，还有其他文件，例如`Form2.Designer.cs`，`Form2.resx`和...更多？

我还需要复制项目下的文件`Properties`吗`References`？

有条不紊地将三个项目合二为一需要哪些步骤？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-29T00:49:04.473

从您的解决方案“Form1”中，您可以将其他项目导入其中。

（右键单击解决方案：添加>现有项目）

所以现在你将拥有：

```
- MySolution
    - Project: Form1
    - Project: Form2
    - Project: Form3 
```

您必须设置项目之间的构建顺序和构建依赖关系。

另一种方法是手动将文件从一个项目复制到另一个项目并将它们添加到您的项目中。是的，您需要 VS 创建的所有文件。（resx、.Designer.cs 等）只需将整个包复制并拖放到项目的文件夹中即可。

不，您不需要触摸属性或引用，除非另外两个项目之一有不同的引用。它应该很容易跟踪，因为你复制的文件在文件的“使用xxx”部分会有错误。您只需要添加正确的引用。

（右键单击项目：添加 > 现有项目）

由于您的项目看起来并不大，我会选择解决方案二。

# c# - Visual Studio 2012 的混合在哪里

> ID：13114611
> 
> 赞同：14
> 
> 时间：2012-10-29T00:44:49.000
> 
> 标签：c#, xaml, windows-8, blend, blend-2012

我看到很多关于“混合视觉工作室”的参考资料，我了解 W8 版本的混合。我在 W8 上安装了 VS2012 Ultimate，但没有看到任何混合。

我查看了我的 MSDN Pro 订阅，我没有看到单独的 Blend for VS2012 下载和 VS2012 和 Blend 下载..

我如何得到它？

* * *

## 回答 #1

> 赞同：24
> 
> 时间：2012-10-29T00:52:34.803

这是您在安装时选择的安装选项之一（或者至少是在 2012 Professional 中）。

你应该可以通过去得到它

1.  添加/删除程序
2.  选择 VS 2012 并单击更改
3.  在 VS 安装程序中单击修改
4.  勾选 Blend for Visual Studio 选项

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-10-16T12:14:02.860

Blend 作为单独的应用程序安装在 VS 文件夹中。

如果已安装（有关如何执行此操作的详细信息，请参阅 Stank 的答案），然后双击 Visual Studio 安装文件夹或开始菜单中的 Blend 图标。

快乐的融合

# java - 超级、构造函数、意图服务和 SQLite 数据库？

> ID：13114615
> 
> 赞同：-1
> 
> 时间：2012-10-29T00:45:18.657
> 
> 标签：java, android, sqlite, constructor

我知道如何做 SQLite 数据库，特别是在它自己的专用 java 类中。但是每当我希望它位于某个东西的内部时，在这种情况下，它是一个 Intent 服务，它总是给我错误，我无法调试它。

```
package my.skul;

    import android.app.IntentService;
    import android.app.Notification;
    import android.app.NotificationManager;
    import android.app.PendingIntent;
    import android.content.Context;
    import android.content.Intent;
    import android.database.Cursor;
    import android.database.sqlite.SQLiteDatabase;
    import android.database.sqlite.SQLiteOpenHelper;

    public class CheckClassroom extends IntentService {

                /**
                 * A constructor is required, and must call the super IntentService(String)
                 * constructor with a name for the worker thread.
                 */
                public CheckClassroom() {
                    super("CheckClassroom");
                }

                /**
                 * The IntentService calls this method from the default worker thread with
                 * the intent that started the service. When this method returns,
                 * IntentService stops the service, as appropriate.
                 */
                @Override
                protected void onHandleIntent(Intent intent) {

                }
                private DbHelper ourHelper;
                private final Context ourContext;
                private SQLiteDatabase ourDatabase;

                private static class DbHelper extends SQLiteOpenHelper {

                    public DbHelper(Context context) {
                        super(context, "myschool", null, 1);
                        // TODO Auto-generated constructor stub
                    }

                    @Override
                    public void onCreate(SQLiteDatabase arg0) {
                        // TODO Auto-generated method stub

                    }

                    @Override
                    public void onUpgrade(SQLiteDatabase arg0, int arg1, int arg2) {
                        // TODO Auto-generated method stub

                    }

                    public CheckClassroom(Context c) {
                        ourContext = c;
                    }

                    public CheckClassroom open() {
                        ourHelper = new DbHelper(ourContext);
                        ourDatabase = ourHelper.getWritableDatabase();

                        return this;

                    }

                    public void close() {
                        ourHelper.close();
                    }

            }
                getColumns()
                {
                    //retrieve sqlitedatabase data

                }

    } 
```

我一直在阅读很多关于构造函数的内容，但我并不能完全理解它，在这里解释我所有的错误真的会让我更好地理解这一点。谢谢..

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-29T01:00:18.247

> 当我将鼠标悬停在 public CheckClassroom() { super("CheckClassroom"); } 空白的 final 字段 ourContext 可能没有被初始化

因为您将`DbHelper`类声明为静态，所以它会在实例化后立即创建一个实例`CheckClassroom`。那个时候ourContext还没有初始化。

要解决此问题，请删除`DbHelper`类的静态并将一个实例改为静态字段。然后在构造函数中你可以初始化它（在你初始化ourContext之后）。

```
private static DbHelper myDbHelper;

public CheckClassroom() {
    super("CheckClassroom");
    ourContext = this;
    myDbHelper = new DbHelper();
} 
```

而不是使用ourContext，你可以`CheckClassroom.this`在`DbHelper`类中使用。

还...

该`public CheckClassroom(Context c) { ourContext = c; }`函数与类内部无关`DbHelper`....

此外，打开和关闭功能似乎不正确，相反，我认为您应该覆盖 onCreate 和 onDestroy

这是您的代码，已修复：

```
package my.skul;

import android.app.IntentService;
import android.app.Notification;
import android.app.NotificationManager;
import android.app.PendingIntent;
import android.content.Context;
import android.content.Intent;
import android.database.Cursor;
import android.database.sqlite.SQLiteDatabase;
import android.database.sqlite.SQLiteOpenHelper;

public class CheckClassroom extends IntentService {

            /**
             * A constructor is required, and must call the super IntentService(String)
             * constructor with a name for the worker thread.
             */
            public CheckClassroom() {
                super("CheckClassroom");
            }

            /**
             * The IntentService calls this method from the default worker thread with
             * the intent that started the service. When this method returns,
             * IntentService stops the service, as appropriate.
             */
            @Override
            protected void onHandleIntent(Intent intent) {

            }
            private DbHelper ourHelper;
            private SQLiteDatabase ourDatabase;

            @Override
            public void onCreate() {
                ourHelper = new DbHelper();
                ourDatabase = ourHelper.getWritableDatabase();
            }

            @Override
            public void onDestroy() {
                ourHelper.close();
            }

            private class DbHelper extends SQLiteOpenHelper {

                public DbHelper() {
                    super(CheckClassroom.this, "myschool", null, 1);
                    // TODO Auto-generated constructor stub
                }

                @Override
                public void onCreate(SQLiteDatabase arg0) {
                    // TODO Auto-generated method stub

                }

                @Override
                public void onUpgrade(SQLiteDatabase arg0, int arg1, int arg2) {
                    // TODO Auto-generated method stub

                }
            }
            /* not sure what that is... 
            getColumns()
            {
                //retrieve sqlitedatabase data

            }
            */
} 
```

# c# - 为接口属性提供一个重要的 setter，但不是 getter

> ID：13114616
> 
> 赞同：2
> 
> 时间：2012-10-29T00:45:31.883
> 
> 标签：c#, unity3d

对于我正在开发的 Unity3d 游戏，我有一种情况，我想要一个带有微不足道的 getter 的读/写属性，但是一个 setter 可以做更多的工作。我的代码如下所示：

```
// IColor.cs
interface IColor {
    Color colorPainted { get; set; }
}

// Player.cs
public class Player : Monobehaviour, IColor {
    // ...
    public Color colorPainted {
        get { }
        set {
            colorPainted = value;
            // some other code
        }
     // ...
    }
} 
```

不过，我不确定如何处理该`get`部分。我不能`return colorPainted;`，因为这会导致堆栈溢出。编写的代码不会编译，因为我没有返回值。

我不是 C# 向导，但似乎我需要有一个`_colorPainted`支持变量，并通过 and 提供`get`对它的访问`set`。不过，这似乎有点冗长——有更好的方法吗？在 Objective-C 中，我只是让 getter 未实现，但这似乎不起作用。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-29T00:53:54.463

不幸的是，在 C# 中没有办法解决它。您需要为该属性提供一个支持字段：

```
// Player.cs

private Color _colorPainted;

public class Player : Monobehaviour, IColor {
    // ...
    public Color colorPainted {
        get { return _colorPainted; }
        set {
            _colorPainted = value;
            // some other code
        }
     // ...
    }
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-29T00:54:15.843

使用支持成员来保存值：

```
public class Player : Monobehaviour, IColor {
    // ...
    private Color _colorPainted;
    public Color colorPainted {
        get { return _colorPainted; }
        set {
            _colorPainted = value;
            // some other code
        }
     // ...
    }
} 
```

在您无法返回属性本身的示例中，您的设置器也不起作用。同样的问题。本质上，当你写这个时：

```
public Color colorPainted { get; set; } 
```

你*真正*写的是这个，只是更短：

```
private Color _colorPainted;
public Color colorPainted
{
    get { return _colorPainted; }
    set { _colorPainted = value; }
} 
```

编译器只是为您处理支持字段，允许您以更短的方式编写它。但是，当您跳出这种较短的语法时，您必须自己管理支持字段。

由于支持字段是私有的，因此使用类或接口类型的任何代码都没有区别。

# multithreading - 关于 CPU 内核数量的多线程和并行性

> ID：13114618
> 
> 赞同：2
> 
> 时间：2012-10-29T00:45:46.987
> 
> 标签：multithreading, concurrency, parallel-processing, cpu-cores

我在某处读到真正的多线程受限于您正在运行的 CPU 内核的数量。这是否意味着如果你拥有一个双核 CPU，那么你所得到的就是真正的多线程，只有...... 2 个并行线程？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-29T01:16:35.297

是的，它本质上意味着最多 2 个线程可以并行运行。英特尔处理器实现超线程，其中单个内核充当两个内核并且可以并行运行两个线程（大多数情况下），因此在这种情况下，您最终会获得最多 2*2=4 个并发线程，但大多数操作系统会区分 HT 内核并处理双核HT 好像它有 4 个核心。但所有这些冥想都是无用的。对于性能方面，除了核心数量之外，还有更多需要考虑的因素。对于并行性问题，存在多任务操作系统，即使在一个内核上也可以模拟大量并行线程。从某种意义上说，这些模拟是完美的，因为它们可以解决实际并行性的任何问题/好处都可以观察到的情况。

# c# - 在 NHIbernate 中使用带有公式的属性映射

> ID：13114619
> 
> 赞同：8
> 
> 时间：2012-10-29T00:45:56.893
> 
> 标签：c#, nhibernate, properties, mapping-by-code

我正在尝试将属性映射到另一个表的任意列。文档说公式可以是任意 SQL，我看到的示例显示类似。

但是，NHibernate 生成的 SQL 甚至无效。公式中的整个 SQL 语句被注入到`SELECT`语句的中间。

```
 Property(x => x.Content, map =>
            {
                map.Column("Content");
                map.Formula("select 'simple stuff' as 'Content'");
            }); 
```

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-10-30T14:42:08.497

这是`Formula`设计的方式，它应该以这种方式工作。您需要将 SQL 语句包装在括号中，以便生成有效的 SQL。

此外，您不能同时指定列和公式。您必须提供整个 SQL 语句。任何非前缀/转义列（以下示例中的“id”）都将被视为拥有实体的表的列。

```
Property(x => x.Content, map =>
{
    map.Formula("(select 'simple stuff' as 'Content')");
});

// or what you probably want

Property(x => x.Content, map =>
{
    map.Formula("(select t.Content FROM AnotherTable t WHERE t.Some_id = id)");
}); 
```

# c# - Java 和 C# 按值传递的差异

> ID：13114621
> 
> 赞同：2
> 
> 时间：2012-10-29T00:46:06.783
> 
> 标签：c#, java

我认为下面的代码将使我的问题清楚。如果它们都按值传递，为什么它们不同。

C#如下：

```
static void Main(string[] args)
    {
        var list = new List<int> {1, 2, 3,};
        ChangeVars(list);
        foreach (var i in list)
        {
            Console.WriteLine(i);
        }
        Console.Read();
    }

    private static void ChangeVars(List<int> list)
    {
        for(int i = 0; i < list.Count; i++)
        {
            list[i] = 23;
        }
    } 
```

返回 23、23、23、

下面是Java：

```
public static void main(String[] args)
{
    List<Integer> goods = new ArrayList<Integer>();
    goods.add(1); goods.add(2); goods.add(3);
    ChangeThings(goods);

    for(int item: goods)
    {
        System.out.println(item);
    }
}

private static void ChangeThings(List<Integer> goods)
{
    for(int item: goods)
    {
        item = 23;
    }
} 
```

返回 1、2、3。

我不明白这种差异。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-10-29T00:48:39.807

您会看到`foreach`循环和常规`for`循环之间的区别。
您的 Java 代码只分配局部`item`变量；它实际上并没有修改列表。

如果你写`goods.set(i, 23)`，你将修改列表。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-10-29T00:48:59.010

“差异”与按值传递无关。您在 Java 中使用了另一种循环，即未修改列表的循环。这就是为什么你会看到差异。

如果将 Java 循环替换为`for (int i = 0 ... )`kind 或将 C# 循环替换为`foreach`，则两个程序之间没有区别。事实上，C#程序不会编译，因为分配循环变量是一个很常见的错误：

```
 foreach(int item in list)
    {
        item = 23; // <<=== This will not compile in C#
    } 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-29T00:54:50.493

在这两种情况下，列表都是通过引用传递的。只是，但是

```
for(int item: goods)
{
    item = 23;
} 
```

不会从列表中提取对项目的引用，而是将其复制到变量中，如果您在 C# 中编写 x=list[i] 后跟 x=23，您将得到相同的结果。你必须使用

```
for(int i=0;i<goods.size() )
{
    goods.set(i, 23);
} 
```

# python - python tkinter bmi计算器

> ID：13114624
> 
> 赞同：0
> 
> 时间：2012-10-29T00:46:36.363
> 
> 标签：python, tkinter

嗨，我很难让字符串变成花车。我试图让我的输入文本将输入转换为浮点数，以便我可以计算 bmi。

```
from Tkinter import *
import tkMessageBox

class MyApp(object):
    def __init__(self):
        self.root = Tk()
        self.root.wm_title("bmi!")
        self.label = Label(self.root, text="Enter your height in box one and weight in box two",
        font=('Helvetica', 20))
        self.label.pack(padx=20,pady=10)
        self.labeltext = StringVar()
        self.labeltext.set("Another nice label!")
        Label(self.root, textvariable=self.labeltext).pack()
        self.entrytext = StringVar()
        Entry(self.root, textvariable=self.entrytext).pack()
        self.entrytext.trace('w', self.entry_changed)
        self.entrytext2 = StringVar()
        Entry(self.root, textvariable=self.entrytext2).pack()
        self.entrytext2.trace('w', self.entry_changed)

        self.root.mainloop()

    def entry_changed(self, a, b, c):
        s = self.entrytext.get()
        b=self.entrytext2.get()
        a=getdouble(s)
        d=getdouble(b)
        c=(a/(d**2))*703
        self.labeltext.set(c)

MyApp() 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-29T01:00:48.823

我会尝试使用`float()`而不是`getdouble()`使用`str()`将结果转换回字符串。

您还需要处理`ValueError`输入的文本不是数字时发生的异常。

```
def entry_changed(self, a, b, c):
    try:
        mass = float(self.entrytext.get())
        height = float(self.entrytext2.get())
    except ValueError:
        self.labeltext.set("--")
        return

    c = (mass/(height**2))*703
    self.labeltext.set(str(c)) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2018-03-29T11:44:49.320

尝试

```
 bmiheight=self.heightcm.get()
  print(bmiheight)
  bmiweight=self.weightkg.get()
  bmi= float((bmiweight)/((bmiheight / 100)**2))
  self.bmi = bmi
  print(bmi)
  self.label1=Label(self.master,text='Your BMI is %.2f' % bmi).grid(row=5,column=0)

  if bmi <= 18.5:
       self.label2=Label(self.master,text='This places you in the underweight group.',fg='blue').grid(row=6,column=0)
       totalindex = 'underweight'
       self.totalindex = totalindex
  elif bmi >18.5 and bmi <25:
       self.label3=Label(self.master,text='This places you in the healthy weight group.',fg='green').grid(row=6,column=0)
       totalindex = 'healthy'
       self.totalindex = totalindex
  elif bmi >= 25 and bmi < 30:
       self.label4=Label(self.master,text='This places you in the overweight group.',fg='orange').grid(row=6,column=0)
       totalindex = 'overweight'
       self.totalindex = totalindex
  elif bmi >=30:
       self.label5=Label(self.master,text='This places you in the obese group.',fg='red').grid(row=6,column=0)
       totalindex = 'obese'
       self.totalindex = totalindex

  if bmi >0 and bmi <999999999999999999999:
       self.button6=Button(self.master,text="Store Data",fg='red',command=self.dynamic_data_entry).grid(row=8,column=0) 
```

# java - 如何替换数组java中的字符？

> ID：13114625
> 
> 赞同：0
> 
> 时间：2012-10-29T00:46:41.920
> 
> 标签：java

我正在做一个函数，我需要获取用户输入并用用户输入的内容替换数组中的所有元音。这是我的数组：老实说，我不知道我在做什么。

```
char [] letters = {'A', 'B', 'C', 'D', 'E', 'F', 'G', 'H', 'I', 'J'} 
```

我正在考虑在里面做一个嵌套`if`，`for loop`但就像我说的那样，我不知道我是否朝着正确的方向前进。

```
/********************************************************************************
  This function will prompt the user to replace all vowels in the array
********************************************************************************/
public static void replace( char [] letters ){      
    for(int i =0; i < letters.length; i++){
       if(i >= 'A')
        if(i <='Z')
         System.out.println(letters[i]);
        else
          break;        
    }        
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-29T01:06:19.783

假设用户输入是`b`，你可以做到这一点：

```
public static char [] replace(char [] src) {
    String s = new String(src);
    s = s.replaceAll("[aeiouAEIOU]", "b");

    return s.toCharArray();
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-29T00:56:23.830

除了打印出所有大写字母之外，您的循环看起来不会做太多事情。您需要一些代码来显示提示并获取用户输入。您还需要一种方法来测试字符是否为元音。做后者的一种方法是：

```
if ("AEIOU".indexOf(letter) >= 0) {
    // letter is a vowel
} 
```

如果您还需要处理小写字母，则可以使用`"AEIOUaeiou".indexOf(letter)`或`"AEIOU".indexOf(Character.toUpperCase(letter))`。这将嵌套循环隐藏在标准 API 函数调用中，从而使您的代码更具可读性和更易于调试。（您可以放心地假设它`indexOf`是正确编写的。）

对于用户交互，您应该查看`System.in`使用[`Scanner`](http://docs.oracle.com/javase/6/docs/api/java/util/Scanner.html). 或者（也许更好），使用 a[`Console`](http://docs.oracle.com/javase/6/docs/api/java/io/Console.html)来管理所有用户 I/O。看看[这个教程](http://docs.oracle.com/javase/tutorial/essential/io/cl.html)，看看你是否可以自己解决，如果你遇到困难，请发布另一个问题。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-29T01:00:27.857

如果我正确解释了您的问题，您想用用户输入的另一个字符替换 a、e 和 i。

1.  您正在将索引“i”与字符进行比较，您可能希望将其更改为

> ```
> if(letters[i] >= 'A') 
> if(letters[i] <= 'Z') 
> System.out.println(letters[i]); 
> else 
> break; 
> ```

另一件事，如果你想测试它是否是一个元音，你可以像这样将所有的比较 OR 在一起：

> ```
> if(letters[i] == 'A' ||
>    letters[i] == 'E' ||
>    letters[i] == 'I' ||
>    letters[i] == 'O' ||
>    letters[i] == 'U')
> letters[i] = users_input 
> ```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-29T01:00:56.043

也许是这样的？

```
public static void replace( char [] letters )
{      

    Scanner s = new Scanner(System.in);

    for(int i = 0; i < letters.length; i++)
    {

        if ("AEIOU".indexOf(letters[i]) >= 0)
        {
              System.out.println("\nVowel Found, What should it be replaced with?");
              String line = s.read();
              letter[i] = line.charAt(0);
        }
    }

} 
```

# sql - SQL Server/T-SQL 需要修改动态存储过程吗？

> ID：13114627
> 
> 赞同：1
> 
> 时间：2012-10-29T00:47:01.757
> 
> 标签：sql, sql-server, tsql, stored-procedures

我有一个存储过程，它动态生成`MERGE`TSQL 语句来处理给定 Dimension / Staging 表转储之间的 SCD 类型 1 更新。

这是 T-SQL 代码（由 Alex Whittles 修改自原始代码）：

```
USE [OPPY_DWUSD]
GO

ALTER PROCEDURE [dbo].[GenerateMerge]
/***************************************************************
*                                                              *
*   Script for use with blog post                              *
*     "Automating T-SQL Merge to load Dimensions (SCD)"        *
*     http://www.purplefrogsystems.com/blog/2012/04/automating-t-sql-merge-to-load-dimensions-scd
*                                                              *   
*   Posted: 6th April 2012                                     *
*                                                              *
*   By: Alex Whittles - Purple Frog Business Intelligence      *
*       www.PurpleFrogSystems.com                              *
*                                                              *
*   All code samples are provided “AS IS” without warranty of  *
*   any kind, either express or implied, including but not     *
*   limited to the implied warranties of merchantability       *
*   and/or fitness for a particular purpose.                   *
*                                                              *
***************************************************************/

@Dimension  varchar(50),
@Schema     varchar(50),
@ETLTable   varchar(50),
@ETLSchema  varchar(50),
@Execute    bit=0  --Should the resulting merge be returned or executed
AS
BEGIN
SET NOCOUNT ON;

--Create Carriage return variable to format the resulting query
DECLARE @crlf char(2)
SET @crlf = CHAR(13)

--Find out which Audit fields are used
DECLARE @UseIsInferred bit
DECLARE @UseFirstCreated bit
DECLARE @UseValidTo bit
DECLARE @UseIsRowCurrent bit
DECLARE @UseLastUpdated bit

SET @UseIsInferred = ISNULL((SELECT MAX(1) 
FROM sys.columns c
        INNER JOIN sys.tables t on c.object_id = t.object_id
        INNER JOIN sys.schemas s ON t.schema_id = s.schema_id
WHERE       s.name = @Schema
        AND t.name = @Dimension
        AND c.name = 'IsInferred'
),0)

SET @UseFirstCreated= ISNULL((SELECT MAX(1) 
FROM sys.columns c
        INNER JOIN sys.tables t on c.object_id = t.object_id
        INNER JOIN sys.schemas s ON t.schema_id = s.schema_id
WHERE       s.name = @Schema
        AND t.name = @Dimension
        AND c.name = 'FirstCreated'
),0)

SET @UseValidTo = ISNULL((SELECT MAX(1) 
FROM sys.columns c
        INNER JOIN sys.tables t on c.object_id = t.object_id
        INNER JOIN sys.schemas s ON t.schema_id = s.schema_id
WHERE       s.name = @Schema
        AND t.name = @Dimension
        AND c.name = 'ValidTo'
),0)

SET @UseIsRowCurrent = ISNULL((SELECT MAX(1) 
FROM sys.columns c
        INNER JOIN sys.tables t on c.object_id = t.object_id
        INNER JOIN sys.schemas s ON t.schema_id = s.schema_id
WHERE       s.name = @Schema
        AND t.name = @Dimension
        AND c.name = 'IsRowCurrent'
),0)

SET @UseLastUpdated = ISNULL((SELECT MAX(1) 
FROM sys.columns c
        INNER JOIN sys.tables t on c.object_id = t.object_id
        INNER JOIN sys.schemas s ON t.schema_id = s.schema_id
WHERE       s.name = @Schema
        AND t.name = @Dimension
        AND c.name = 'LastUpdated'
),0)

--Identify the business key column(s)
--Also define what the null replacement should be
DECLARE myCurBK Cursor FOR 
SELECT c.name
    , CASE WHEN ty.name IN ('text', 'ntext', 'varchar', 'char', 'nvarchar', 'nchar') THEN ''''''
        WHEN ty.name IN ('tinyint', 'smallint', 'int', 'real', 'money', 'float', 'bit', 'decimal', 'numeric','smallmoney','bigint') THEN '0'
        WHEN ty.name IN ('date', 'datetime') THEN '''19000101'''
        ELSE 'NULL' END AS NullRep
FROM sys.columns c
    INNER JOIN sys.tables t on c.object_id = t.object_id
    INNER JOIN sys.schemas s ON t.schema_id = s.schema_id
    INNER JOIN sys.types ty ON c.user_type_id = ty.user_type_id
    INNER JOIN sys.extended_properties ep 
         ON t.object_id=ep.major_id
        AND c.column_id=ep.minor_id
        AND ep.class=1
        AND ep.name='SCD'
WHERE s.name = @Schema
    AND t.name = @Dimension
    AND ep.value = 'BK'
ORDER BY c.column_id

--Identify all fields to be merged (Exclude Type 0)
DECLARE myCurType1 Cursor
FOR SELECT c.name
    , CASE WHEN ty.name IN ('text', 'ntext', 'varchar', 'char', 'nvarchar', 'nchar') THEN ''''''
        WHEN ty.name IN ('tinyint', 'smallint', 'int', 'real', 'money', 'float', 'bit', 'decimal', 'numeric','smallmoney','bigint') THEN '0'
        WHEN ty.name IN ('date', 'datetime') THEN '''19000101'''
        ELSE 'NULL' END AS NullRep
    FROM sys.columns c
        INNER JOIN sys.tables t on c.object_id = t.object_id
        INNER JOIN sys.schemas s ON t.schema_id = s.schema_id
        INNER JOIN sys.types ty ON c.user_type_id = ty.user_type_id
        LEFT JOIN sys.extended_properties ep 
             ON t.object_id=ep.major_id
            AND c.column_id=ep.minor_id
            AND ep.class=1
            AND ep.name='SCD'
    WHERE s.name = @Schema
        AND t.name = @Dimension
        AND c.is_identity=0
        AND ISNULL(ep.value,'1') NOT IN ('0', 'Audit', 'BK')
    ORDER BY c.column_id ASC

--Identify all fields for insert
DECLARE myCurAll Cursor
FOR SELECT c.name
    , CASE WHEN ty.name IN ('text', 'ntext', 'varchar', 'char', 'nvarchar', 'nchar') THEN ''''''
        WHEN ty.name IN ('tinyint', 'smallint', 'int', 'real', 'money', 'float', 'bit', 'decimal', 'numeric','smallmoney','bigint') THEN '0'
        WHEN ty.name IN ('date', 'datetime') THEN '''19000101'''
        ELSE 'NULL' END AS NullRep
    FROM sys.columns c
        INNER JOIN sys.tables t on c.object_id = t.object_id
        INNER JOIN sys.schemas s ON t.schema_id = s.schema_id
        INNER JOIN sys.types ty ON c.user_type_id = ty.user_type_id
    WHERE s.name = @Schema
        AND t.name = @Dimension
        AND c.name NOT IN ('LastUpdated', 'IsInferred', 'FirstCreated', 'ValidTo', 'IsRowCurrent')
        AND c.is_identity=0
    ORDER BY c.column_id ASC

DECLARE @Field varchar(255)
DECLARE @NullRep varchar(20)
DECLARE @SQL varchar(max)
DECLARE @SQL2 varchar(max)
DECLARE @SQL3 varchar(max)

--Now start building up the dynamic SQL

SET @SQL ='MERGE [' + @Schema + '].[' + @Dimension + '] AS Target'
SET @SQL = @SQL + @crlf + 'USING [' + @ETLSchema + '].[' + @ETLTable + '] AS Source'

OPEN myCurBK
FETCH NEXT FROM myCurBK INTO @Field, @NullRep
IF (@@FETCH_STATUS>=0)
    BEGIN
        SET @SQL = @SQL + @crlf + '       ON Target.' + '[' + @Field + ']' +  ' = Source.' + '[' + @Field + ']'
        FETCH NEXT FROM myCurBK INTO @Field, @NullRep
    END
WHILE (@@FETCH_STATUS<>-1)
BEGIN
    IF (@@FETCH_STATUS<>-2)
        SET @SQL = @SQL + @crlf + '       AND Target.' + '[' + @Field + ']' +  ' = Source.' + '[' + @Field + ']'
    FETCH NEXT FROM myCurBK INTO @Field, @NullRep
END
CLOSE myCurBK

IF @UseIsRowCurrent>0   SET @SQL = @SQL + @crlf + '       AND Target.IsRowCurrent=1'

SET @SQL = @SQL + @crlf + '    WHEN MATCHED'

OPEN myCurType1
FETCH NEXT FROM myCurType1 INTO @Field, @NullRep

IF (@@FETCH_STATUS>=0)
    BEGIN
        SET @SQL = @SQL + @crlf + '       AND (ISNULL(Target.' + '[' + @Field + ']' + ',' + @NullRep + ') <> ISNULL(Source.' + '[' + @Field + ']' + ',' + @NullRep + ')'
        FETCH NEXT FROM myCurType1 INTO @Field, @NullRep
    END
WHILE (@@FETCH_STATUS<>-1)
BEGIN
    IF (@@FETCH_STATUS<>-2)
        SET @SQL = @SQL + @crlf + '       OR ISNULL(Target.' + '[' + @Field + ']' + ',' + @NullRep + ') <> ISNULL(Source.' + '[' + @Field + ']' + ',' + @NullRep + ')'
    FETCH NEXT FROM myCurType1 INTO @Field, @NullRep
END
CLOSE myCurType1

SET @SQL = @SQL + @crlf + '      )'
SET @SQL2 = '    THEN UPDATE SET'

OPEN myCurType1
FETCH NEXT FROM myCurType1 INTO @Field, @NullRep
IF (@@FETCH_STATUS>=0)
    BEGIN
        SET @SQL2 = @SQL2 + @crlf + '       ' + '[' + @Field + ']' + ' = Source.' + '[' + @Field + ']'
        FETCH NEXT FROM myCurType1 INTO @Field, @NullRep
    END
WHILE (@@FETCH_STATUS<>-1)
BEGIN
    IF (@@FETCH_STATUS<>-2)
        SET @SQL2 = @SQL2 + @crlf + '      ,' + '[' + @Field + ']' + ' = Source.' + '[' + @Field + ']'
    FETCH NEXT FROM myCurType1 INTO @Field, @NullRep
END
CLOSE myCurType1

IF @UseLastUpdated>0   SET @SQL2 = @SQL2 + @crlf + '      ,LastUpdated = GetDate()'

SET @SQL3 = '    WHEN NOT MATCHED THEN'
SET @SQL3 = @SQL3 + @crlf + '         INSERT ('

OPEN myCurAll
FETCH NEXT FROM myCurAll INTO @Field, @NullRep
IF (@@FETCH_STATUS>=0)
    BEGIN
        SET @SQL3 = @SQL3 + @crlf + '           ' + '[' + @Field + ']'
        FETCH NEXT FROM myCurAll INTO @Field, @NullRep
    END
WHILE (@@FETCH_STATUS<>-1)
BEGIN
    IF (@@FETCH_STATUS<>-2)
        SET @SQL3 = @SQL3 + @crlf + '           ,' + '[' + @Field + ']'
    FETCH NEXT FROM myCurAll INTO @Field, @NullRep
END
CLOSE myCurAll

IF @UseIsInferred>0     SET @SQL3 = @SQL3 + @crlf + '           ,IsInferred'
IF @UseFirstCreated>0   SET @SQL3 = @SQL3 + @crlf + '           ,FirstCreated'
IF @UseValidTo>0        SET @SQL3 = @SQL3 + @crlf + '           ,ValidTo'
IF @UseIsRowCurrent>0   SET @SQL3 = @SQL3 + @crlf + '           ,IsRowCurrent'
IF @UseLastUpdated>0    SET @SQL3 = @SQL3 + @crlf + '           ,LastUpdated'
SET @SQL3 = @SQL3 + @crlf + '         ) VALUES ('

OPEN myCurAll
FETCH NEXT FROM myCurAll INTO @Field, @NullRep
IF (@@FETCH_STATUS>=0)
    BEGIN
        SET @SQL3 = @SQL3 + @crlf + '            Source.' + '[' + @Field + ']'
        FETCH NEXT FROM myCurAll INTO @Field, @NullRep
    END
WHILE (@@FETCH_STATUS<>-1)
BEGIN
    IF (@@FETCH_STATUS<>-2)
        SET @SQL3 = @SQL3 + @crlf + '           ,Source.' + '[' + @Field + ']'
    FETCH NEXT FROM myCurAll INTO @Field, @NullRep
END
CLOSE myCurAll    

IF @UseIsInferred>0     SET @SQL3 = @SQL3 + @crlf + '           ,0'
IF @UseFirstCreated>0   SET @SQL3 = @SQL3 + @crlf + '           ,GetDate()'
IF @UseValidTo>0        SET @SQL3 = @SQL3 + @crlf + '           ,NULL'
IF @UseIsRowCurrent>0   SET @SQL3 = @SQL3 + @crlf + '           ,1'
IF @UseLastUpdated>0    SET @SQL3 = @SQL3 + @crlf + '           ,GetDate()'
SET @SQL3 = @SQL3 + @crlf + '         );'

--clean up
DEALLOCATE myCurType1
DEALLOCATE myCurAll
DEALLOCATE myCurBK

IF @Execute = 1
BEGIN
    EXEC(@SQL + @SQL2 + @SQL3)           
END
ELSE
BEGIN    
    PRINT @SQL
    PRINT @SQL2
    PRINT @SQL3
END

END 
```

在上面的存储过程中，当我传入变量时，它会生成以下代码：

```
MERGE [DIM].[COMPANY] AS Target
USING [DBO].[DWUSD_LIVE] AS Source
    ON Target.[comp] = Source.[comp]
 WHEN MATCHED
    AND (ISNULL(Target.[comp name],'') <> ISNULL(Source.[comp name],'')
    OR ISNULL(Target.[comp description],'') <> ISNULL(Source.[comp description],'')
   )
THEN UPDATE SET
    [comp name] = Source.[comp name]
   ,[comp description] = Source.[comp description]
   ,LastUpdated = GetDate()
WHEN NOT MATCHED THEN
      INSERT (
        [comp]
        ,[comp name]
        ,[comp description]
        ,FirstCreated
        ,LastUpdated
      ) VALUES (
         Source.[comp]
        ,Source.[comp name]
        ,Source.[comp description]
        ,GetDate()
        ,GetDate()
      ); 
```

我需要做的是`DISTINCT` `SELECT`在开头添加一个子查询......

```
MERGE [dim].[Company] AS Target
USING (
SELECT DISTINCT 
[COMP NAME],
[COMP DESCRIPTION],
[COMP]
FROM [dbo].[DWUSD_LIVE]
) AS Source 
```

因此，当它查看源（临时表）时，它会`SELECT DISTINCT`在维度中找到的相同列上执行 a，但不包括审计列 ( `FirstCreated`/ `LastUpdated`)。

我的临时表有重复的记录，因此我只需要`SELECT DISTINCT`否则我的维度中有多个记录。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-29T01:19:46.337

看起来您将要用作源的表传递给这些变量中的存储过程：

```
@ETLTable   varchar(50),
@ETLSchema  varchar(50), 
```

这些相同的变量用于定义源：

```
--Now start building up the dynamic SQL

SET @SQL ='MERGE [' + @Schema + '].[' + @Dimension + '] AS Target'
SET @SQL = @SQL + @crlf + 'USING [' + @ETLSchema + '].[' + @ETLTable + '] AS Source' 
```

我相信，只要您拥有与实际源表相同的列，您就可以获取您想要使用的不同查询，使用它创建一个视图并将该表传递给存储过程。

```
CREATE VIEW dbo.vwDWUSD_LIVE
AS 
SELECT DISTINCT 
[COMP NAME],
[COMP DESCRIPTION],
[COMP]
FROM [dbo].[DWUSD_LIVE]
GO 
```

exec 语句看起来像：

```
EXEC [dbo].[GenerateMerge] 'COMPANY', 'DIM', 'vwDWUSD_LIVE', 'DBO', 1 
```

此外，您不必修改存储过程，看起来它可能被其他进程调用，如果您对其他表有同样的情况，您可以应用类似的解决方案。

# c# - 绑定到数据源的 DataGridViewComboBox 允许空条目

> ID：13114632
> 
> 赞同：1
> 
> 时间：2012-10-29T00:48:02.973
> 
> 标签：c#, datagridview, datagridviewcombobox

是否可以设置 DataGridViewComboBox 以允许用户在绑定到数据源（如 BindingList）时清除条目？

如果是这样，如何实现？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-30T13:24:03.690

通常我会在绑定列表或数据源中添加一个表示空白条目的条目。所以我过去所做的就是在我的数据表中添加一行，例如，ID 为 -1，值为“”，然后只需处理保存代码以在数据库中将该值设置为 NULL。

# c# - 为什么输入字符串的格式不正确？

> ID：13114633
> 
> 赞同：0
> 
> 时间：2012-10-29T00:48:03.880
> 
> 标签：c#

我正在使用 String.Format 并不断收到错误消息：输入字符串格式不正确。

我试图消除不同的可能性，但我找不到解决方案。

解决方案一定很简单，但我找不到。

```
var peanuts = String.Format("{label: '{0}', legendEntry: true, data: { y: [new Date('{1}')], x: [new Date('{2}')], y1: [{3}] } }",
"name", "sync date", "download date", "100"); 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-29T00:49:31.057

您必须转义`{`格式字符串中的任何字符，否则它们将被解释为要格式化（替换）的项目。

要插入文字括号，请将其`{`加倍，如下所示`{{`。

所以你的字符串是：

```
var peanuts = String.Format("{{label: '{0}', legendEntry: true, data: {{ y: [new Date('{1}')], x: [new Date('{2}')], y1: [{3}] }} }}",
    "name", "sync date", "download date", "100"); 
```

请参阅[复合格式 MSDN 页面](http://msdn.microsoft.com/en-us/library/txafckwd.aspx)上的**转义大括号**。

# ruby - Ruby 1.8 与 1.9 在列表元素比较中的差异

> ID：13114634
> 
> 赞同：1
> 
> 时间：2012-10-29T00:48:18.373
> 
> 标签：ruby, list, ruby-1.9, ruby-1.8

两个 Ruby 版本是：1.8.7（学校使用）与 1.9.3（当前版本，我的系统上有）。

只是好奇 1.9.3 中有什么不同导致以下内容无法正常工作。`true`如果列表中的所有元素都相同，则函数输出，`false`如果不完全相同。

```
e.g.
[1,1,1] => true
[1,2,1] => false 
```

在 Ruby 1.9.4 中，

```
odd_one_out_in_list?([1,1,1])
=> false  #which is should output 'true' 
```

在 Ruby 1.8.7 中，

```
odd_one_out_in_list?([1,1,1])
=> true  #which is good 
```

下面的逻辑在我看来没问题。1.9.4 有什么不同？我已经检查过： [Ruby 1.8 和 Ruby 1.9 之间有什么区别，](https://stackoverflow.com/questions/21574/what-is-the-difference-between-ruby-1-8-and-ruby-1-9)但我无法在那里找到答案。

这是我的功能：

```
def odd_one_out_in_list?(list)
  sorted_list = list.sort
  if sorted_list[0] == sorted_list[list.length-1]
    return true
  else
    return false
  end
end 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-03-31T16:02:03.043

> 试试 defodd_one_out_in_list?(list); list.uniq.size == 1; 结尾。更简单，可能更快

# ios - 附加字符串不起作用

> ID：13114643
> 
> 赞同：0
> 
> 时间：2012-10-29T00:49:27.450
> 
> 标签：ios, nsstring

我正在尝试这段代码...

```
NSString *tileString = [[NSString alloc] init];    

for (int i = 0; i < [[GameP objectForKey:@"groundMap"] length]; i += 5) {

            tileString = [[GameP objectForKey:@"groundMap"] substringWithRange:NSMakeRange(i, 5)];

            [tileString stringByAppendingString:@"0000"];

            [sharedInstance.groundMap addObject:tileString];
        } 
```

来自对象的 5 个字符字符串是“t0001”，所以我想以“t0001000”结束，但它不起作用，当我检查 sharedInstance.groundMap 时，数组中的所有字符串仍然是“t0001”

我应该改用 NSMutableString 吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-29T00:52:44.133

您没有分配结果。改变这个：

```
[tileString stringByAppendingString:@"0000"]; 
```

至：

```
titleString = [tileString stringByAppendingString:@"0000"]; 
```

你也可以做更多的清理工作：

```
for (int i = 0; i < [[GameP objectForKey:@"groundMap"] length]; i += 5) {
    NSString *tileString = [[GameP objectForKey:@"groundMap"] substringWithRange:NSMakeRange(i, 5)];
    titleString = [tileString stringByAppendingString:@"0000"];
    [sharedInstance.groundMap addObject:tileString];
} 
```

# compilation - 代码驱动编译 - 从代码中获取未解析的符号

> ID：13114648
> 
> 赞同：1
> 
> 时间：2012-10-29T00:51:11.503
> 
> 标签：compilation, working-set

我尝试编写有助于 C/C++ 代码开发的简单应用程序；它查找丢失的对象/函数并自动包含标准 C/C++ 头文件之一。我假设没有外部库，因此不会发生名称冲突。

我想到的第一种方法是从另一个 C 代码运行编译过程（ gcc / clang ）并获取丢失的符号。如果它很愚蠢，请告诉我。那么：如何在没有硬编码 gcc 输出解析的情况下获取未解析符号的列表？

如果其中一个编译器是帮助代码驱动编译的库，请写。

谢谢！：） 亚当

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-30T18:01:19.273

与 GCC 极客的全面谈话将我带到[https://developer.mozilla.org/en-US/docs/Dehydra/Using_Dehydra](https://developer.mozilla.org/en-US/docs/Dehydra/Using_Dehydra)

可能没有更简单的方法可以做到这一点。最好的办法是包含所有标题（GCC 将删除未使用的）或只解析输出，因为可能 Dehydra 不能做我想做的所有事情。

# ruby - 守护 Mailman 应用程序

> ID：13114650
> 
> 赞同：2
> 
> 时间：2012-10-29T00:51:24.180
> 
> 标签：ruby, daemon, daemons, mailman-gem

通过运行启动我的邮递员应用程序可以正常`rails runner lib/daemons/mailman_server.rb`工作。

从我的守护程序脚本和命令开始时`bundle exec rails runner script/daemon run mailman_server.rb`，脚本会生成错误：

```
.rvm/gems/ruby-1.9.3-p194/gems/mailman-0.5.3/lib/mailman/route/conditions.rb:21:in `match': undefined method `each' for nil:NilClass (NoMethodError) 
```

我的代码如下：

lib/守护进程/mailman_server.rb

```
require 'mailman'

# Config Mailman
Mailman.config.ignore_stdin = false
Mailman.config.graceful_death = true
Mailman.config.poll_interval = 15
Mailman.config.logger = Logger.new File.expand_path("../../../log/mailman.log", __FILE__)

Mailman.config.pop3 = {
  :username => 'alias@mygoogleapp.com',
  :password => 'password',
  :server   => 'pop.gmail.com',
  :port     => 995,
  :ssl      => true
}

# Run the mailman
Mailman::Application.run do
  from('%email%').to('alias+q%id%@mygoogleapp.com') do |email, id|
    begin
      # Get message without headers to pass to add_answer_from_email
      if message.multipart?
        reply = message.text_part.body.decoded
      else
        reply = message.body.decoded
      end

      # Call upon the question to add answer to his set
      Question.find(id).add_answer_from_email(email, reply)
    rescue Exception => e
      Mailman.logger.error "Exception occured while receiving message:\n#{message}"
      Mailman.logger.error [e, *e.backtrace].join("\n")
    end
  end
end 
```

我的脚本/守护程序文件是：

```
#!/usr/bin/env ruby
require 'rubygems'
require "bundler/setup"
require 'daemons'

ENV["APP_ROOT"] ||= File.expand_path("#{File.dirname(__FILE__)}/..")

script = "#{ENV["APP_ROOT"]}/lib/daemons/#{ARGV[1]}"

Daemons.run(script, dir_mode: :normal, dir: "#{ENV["APP_ROOT"]}/tmp/pids") 
```

关于为什么它作为守护进程失败的任何见解？

# c - 使用 Qsort 在 C 程序中对地址进行排序

> ID：13114652
> 
> 赞同：1
> 
> 时间：2012-10-29T00:51:54.033
> 
> 标签：c, sorting, qsort

我正在尝试按内存地址对指针数组进行排序：

```
#include <stdio.h>
#include <stdlib.h>

typedef struct flist {
    int size;
    struct flist *blink;
    struct flist *flink;
} *Flist;

int compare(const void *x, const void *y)
{
    Flist a = (Flist)x;
    Flist b = (Flist)y;

    if(a < b)
        return -1;
    else
        return 1;
}

int main()
{
    int a[] = {3, 1, 2, 4, 0};
    Flist b[5];
    int i;

    for(i = 0; i < 5; i++)
        b[a[i]] = (Flist)malloc(12);

    printf("Here is the array before sorting:\n");
    for(i = 0; i < 5; i++)
        printf("%p\n", b[i]);

    qsort(b, 5, sizeof(Flist), compare);

    printf("Here is the array after sorting:\n");
    for(i = 0; i < 5; i++)
        printf("%p\n", b[i]);
} 
```

但是，该程序对地址的顺序没有影响：

这是排序前的数组：
0x759090
0x759030
0x759050
0x759010
0x759070
这是排序后的数组：
0x759090
0x759030
0x759050
0x759010
0x759070

我们欢迎所有的建议！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-29T00:57:01.043

`compare`接收数组元素的地址。这些当然已经按顺序排列了。

要按值排序，您需要更改`compare`为

```
int compare(const void *x, const void *y)
{
    Flist a = *(Flist*)x;
    Flist b = *(Flist*)y;

    if(a < b)
        return -1;
    else if (a == b)
        return 0;
    else
        return 1;
} 
```

但由于指针并非都指向同一个数组（或末尾的一个），因此在技术上这是未定义的行为。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-29T00:56:39.547

您缺少一个间接级别：`qsort`发送正在排序的元素的*地址*，而不是元素本身。

在您的情况下，您会看到`Flist`正在传递的元素地址的地址。您需要取消引用转换后传入的指针`Flist*`（这是一个指向指针的指针）：

```
int compare(const void *x, const void *y) {
    Flist a = *((Flist*)x);
    Flist b = *((Flist*)y);

    if(a < b)
        return -1;
    else
        return 1;
} 
```

# c# - 文本框输入和离开事件重复

> ID：13114657
> 
> 赞同：0
> 
> 时间：2012-10-29T00:52:20.690
> 
> 标签：c#, .net, winforms

在我的 C# windows 窗体上，我有 3 个名为 textBuyPrice、textSell 和 textMargin 的文本框。用户可以输入买入价，如果他们输入卖出价，那么代码将为他们计算保证金。如果用户输入保证金，则代码将输入卖出价格。请参阅构成边际计算的这 2 位代码。

此代码捕获文本框中光标的输入并将当前值设置为变量。

```
private void textMargin_Enter(object sender, EventArgs e)
        {
        OriginalMarginValue = this.textMargin.Text;
        } 
```

此代码捕获文本框中的离开事件并进行任何更改，运行一些计算并更新任何相关字段。

```
private void textMargin_Leave(object sender, EventArgs e)
        {
        if (this.textMargin.Text != OriginalMarginValue)
            {
            Parts part = new Parts();
            decimal dcmBuy = part.RemoveDollarSign(this.textBuyPrice.Text);
            decimal dcmMargin = part.RemovePercentSign(this.textMargin.Text);
            decimal dcmSell = part.GetSellPrice(dcmBuy, dcmMargin / 100);
            string strSell = dcmSell.ToString("C");
            this.textSellPrice.Text = strSell; 
            }

        } 
```

正在发生的事情似乎是 Enter 和 Leave 事件之间的循环。当我尝试跳出文本框时，离开事件触发后。Enter 事件再次触发，它不会让我退出。

到底是怎么回事？我应该强制选项卡将焦点设置在另一个字段上吗？

上面的代码与 textSellPrice 代码相同，我在该文本框中没有同样的问题。

谢谢

***编辑*** 这是调用堆栈，因为代码在尝试离开文本框后第二次进入 Enter 事件：

> AutoShop.exe!AutoShop.formPartDetail.textMargin_Enter(object sender = {Text = "57.14 %"}, System.EventArgs e = {System.EventArgs}) 第 168 行 C# System.Windows.Forms.dll!System.Windows.Forms。 Control.OnEnter(System.EventArgs e) + 0x88 字节
> System.Windows.Forms.dll!System.Windows.Forms.Control.NotifyEnter() + 0x1f 字节
> System.Windows.Forms.dll!System.Windows.Forms.ContainerControl。 UpdateFocusedControl() + 0x195 字节 System.Windows.Forms.dll!System.Windows.Forms.ContainerControl.AssignActiveControlInternal(System.Windows.Forms.Control 值 = {Text = "57.14 %"}) + 0x60 字节
> System.Windows.Forms .dll!System.Windows.Forms.ContainerControl.ActivateControlInternal(System.Windows.Forms.Control control, bool originator = false) + 0x48 bytes
> System.Windows.Forms.dll!System.Windows.Forms.ContainerControl.SetActiveControlInternal(System.Windows.Forms.Control value = {Text = "57.14 %"}) + 0x73 bytes
> System.Windows.Forms.dll!System.Windows .Forms.ContainerControl.ValidateThroughAncestor(System.Windows.Forms.Control originalControl, bool preventFocusChangeOnError) + 0x212 字节
> System.Windows.Forms.dll!System.Windows.Forms.ContainerControl.EnterValidation(System.Windows.Forms.Control enterControl) + 0x7c 字节
> System.Windows.Forms.dll!System.Windows.Forms.ContainerControl.UpdateFocusedControl() + 0x8a 字节
> System.Windows.Forms.dll!System.Windows.Forms.ContainerControl.AssignActiveControlInternal(System.Windows.Forms.Control 值= {文本 = ""}) + 0x60 字节
> System.Windows.Forms.dll!System.Windows.Forms.ContainerControl.ActivateControlInternal(System.Windows.Forms.Control control, bool originator = false) + 0x48 bytes
> System.Windows.Forms.dll!System.Windows.Forms.ContainerControl .SetActiveControlInternal(System.Windows.Forms.Control value = {Text = ""}) + 0x73 字节
> System.Windows.Forms.dll!System.Windows.Forms.ContainerControl.SetActiveControl(System.Windows.Forms.Control ctl) + 0x33 字节
> System.Windows.Forms.dll!System.Windows.Forms.ContainerControl.ActiveControl.set(System.Windows.Forms.Control 值) + 0x5 字节
> System.Windows.Forms.dll!System.Windows.Forms.Control。选择（布尔定向，布尔转发）+ 0x1b 字节
> System.Windows.Forms.dll!System.Windows.Forms.Control.SelectNextControl(System.Windows.Forms.Control ctl, bool forward, bool tabStopOnly, bool nested, bool wrap) + 0x7e 字节
> System.Windows.Forms.dll！ System.Windows.Forms.Form.ProcessTabKey(bool forward = true) + 0x24 字节
> System.Windows.Forms.dll!System.Windows.Forms.ContainerControl.ProcessDialogKey(System.Windows.Forms.Keys keyData = LButton | Back) + 0x71 字节

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-06-25T15:36:09.823

尝试对文本框使用验证事件。您还将获得取消验证的选项。

例如

```
 private void textBox2_Validating(object sender, CancelEventArgs e)
        {
            if (DoSomething(textBox2))
            {
                textBox3.Text = textBox2.Text;
            }
            else
            {
                e.Cancel = true; //cancel the validation.
            }

        } 
```

# java - 检测 .app 和 .exe 文件位置的最佳方法

> ID：13114659
> 
> 赞同：0
> 
> 时间：2012-10-29T00:52:32.630
> 
> 标签：java, minecraft

我用 Java 编写了一个程序，可以很容易地在不同版本的 Minecraft 之间进行设置和切换。该程序几乎完成了，但我遇到了一个我无法找到解决方案的问题。我在程序中有一个按钮，允许您通过 Runtime 对象启动 Minecraft。这在我的计算机上运行良好，因为我知道我的 .app 或 .exe 文件在哪里（取决于操作系统）。但是，我不知道该文件在其他任何人的计算机上的位置。我已经想到了一些解决这个问题的方法，但似乎没有一个是可行的。

一种想法是提示用户通过文件选择器定位文件，然后缓存该文件。这可以工作，但不是很优雅，特别是对于不太懂计算机的用户。

我还考虑将 .app 和 .exe 文件与我的应用程序捆绑在一起，但这带来了更多问题。一方面，我不知道在我的应用程序中分发该文件是否完全合法。此外，它将改变我必须分发我的应用程序的方式，以包含某种设置所有内容的安装程序。

有没有人对如何处理这个问题有更好的想法？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-29T01:01:23.970

你至少有三个我能想到的选择

1.  您可以使用配置系统来存储程序的位置并提示用户/提供配置 API 来设置值。这很好，而且做起来很简单
2.  您可以搜索该位置的众所周知的位置，如果未找到，则提示用户（并希望存储结果）。这没关系，但它依赖于许多因素，包括操作系统和程序实际上被加载到“通用”位置并以“通用”方式命名。
3.  搜索硬盘。这很糟糕，因为它很耗时，并且该应用程序实际上可能不存在于您正在搜索的驱动器上...搜索所有可用位置可能会将您引导到网络驱动器上，这会更慢...如果找不到则提示用户

鉴于几乎所有解决方案都无法“提示用户”，我可能会使用 1 和 2 的组合。允许用户指定位置，如果他们没有，请搜索一些常见的已知位置，如果你仍然不能找到它，提示用户（并希望保存该值以供重用）。

恕我直言

# c# - LINQ：从 LINQ 到 sql 查询的错误转换

> ID：13114664
> 
> 赞同：1
> 
> 时间：2012-10-29T00:53:00.753
> 
> 标签：c#, linq

我在将 linq 查询转换为 sql 查询时遇到了一些问题。问题的根源是当我使用 IBPUNO 字段时，edmx 文件中的字符串类型和 sql server 中的 nchar 是什么）

```
var query = (from c in ContextM3.MPLINE where c.IBSUNO == supplier.M3Code.Trim() &&       orderNumbers.Contains(c.IBPUNO) 
```

“where”子句从 linq 查询到 sql servr 的转换类似于：

```
...WHERE ([Extent1].[IBSUNO] = (LTRIM(RTRIM(@p__linq__0)))) AND ([Extent1].[IBPUNO] IN (N''177828'',N''7115912'))',N'@p__linq__0 nvarchar(4000)',@p__linq__0=N'8100033   ' 
```

如果我在 ssms 中执行这个 sql 查询，我没有行但是如果我将 sql 查询更改为

```
WHERE ([Extent1].[IBSUNO] = (LTRIM(RTRIM(@p__linq__0)))) AND ([Extent1].[IBPUNO] IN (177828,7115912))',N'@p__linq__0 nvarchar(4000)',@p__linq__0=N'8100033   ' 
```

然后炒锅很好，它检索我想要的行（我所做的更改是将值 N''177828'' 转换为仅 177828 所以我的问题是我怎么能对 Net 说这个改变？

```
[Extent1].[IBPUNO] IN (N''177828'',N''7115912')) 
```

到 [Extent1].[IBPUNO] IN (177828,7115912))

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-29T01:40:15.510

您可以使用以下方法存储整数而不是字符串`orderNumbers`并转换`c.IBPUNO`为 int `Convert.ToInt32()`：

```
var orderNumbers = new [] { 177828, 7115912 };
var query = (from c in ContextM3.MPLINE 
             where c.IBSUNO == supplier.M3Code.Trim() &&       
                   orderNumbers.Contains(Convert.ToInt32(c.IBPUNO))
             // select etc... 
```

如果可能的话，你首先应该`IBPUNO`是一个 int 。

# java - JSpinner：显示一系列带符号的 HexBinary 值

> ID：13114666
> 
> 赞同：2
> 
> 时间：2012-10-29T00:53:27.607
> 
> 标签：java, swing, hex, jspinner

在 a 中显示一系列带符号的 HexBinary 数字的最佳方法是`JSpinner`什么？

例如从`0x8000`到`0x7ffe`

我尝试了以下解决方案，但运气不佳：

1.  使用`JSpinnerNumberModel`带有默认格式化程序的 a 从 int 转换为 Hexbinary。[无法显示范围的负数部分]
2.  使用 a`JSpinnerListModel`并将其传递给该范围内的 HexBinary 值的构造列表（带有不必要代码的人为解决方案。不能完美运行）。

有没有更好的通用解决方案？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-29T12:33:29.983

> 我......认为可能有一种方法可以在不构建整个范围的实际列表的情况下做到这一点。

一种方法是扩展`AbstractSpinnerModel`创建一个`LongNumberModel`，如下所示。另请参阅此相关[示例](https://stackoverflow.com/a/9758714/230513)。

![六角微调器测试图像](../Images/6b737f2b8e1d4b2ca41c4fc90776c6ee.png)

```
import java.awt.BorderLayout;
import java.awt.EventQueue;
import java.awt.HeadlessException;
import java.text.ParseException;
import javax.swing.AbstractSpinnerModel;
import javax.swing.JFormattedTextField;
import javax.swing.JFormattedTextField.AbstractFormatter;
import javax.swing.JFrame;
import javax.swing.JSpinner;
import javax.swing.text.DefaultFormatter;
import javax.swing.text.DefaultFormatterFactory;

/**
 * @see https://stackoverflow.com/a/13121724/230513
 * @see https://stackoverflow.com/a/9758714/230513
 */
public class HexSpinnerTest {

    public static void main(String[] args) {
        EventQueue.invokeLater(new Runnable() {

            @Override
            public void run() {
                display();
            }
        });
    }

    private static void display() throws HeadlessException {
        JFrame f = new JFrame();
        f.setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);
        JSpinner sp = new JSpinner(new LongNumberModel(0x8000L, 0x8000L, 0xFFFFL, 1L));
        JSpinner.DefaultEditor editor = (JSpinner.DefaultEditor) sp.getEditor();
        JFormattedTextField tf = editor.getTextField();
        tf.setFormatterFactory(new MyFormatterFactory());
        f.getContentPane().add(sp, BorderLayout.NORTH);
        f.pack();
        f.setLocationRelativeTo(null);
        f.setVisible(true);
    }

    private static class LongNumberModel extends AbstractSpinnerModel {

        private Long value, stepSize;
        private Comparable<Long> minimum, maximum;

        public LongNumberModel(Long value, Long minimum, Long maximum, Long stepSize) {
            this.value = value;
            this.minimum = minimum;
            this.maximum = maximum;
            this.stepSize = stepSize;
        }

        @Override
        public Object getValue() {
            return value;
        }

        @Override
        public void setValue(Object value) {
            this.value = (Long) value;
            fireStateChanged();
        }

        @Override
        public Object getNextValue() {
            long v = value.longValue() + stepSize.longValue();
            return bounded(v);
        }

        @Override
        public Object getPreviousValue() {
            long v = value.longValue() - stepSize.longValue();
            return bounded(v);
        }

        private Object bounded(long v) {
            if ((maximum != null) && (maximum.compareTo(v) < 0)) {
                return null;
            }
            if ((minimum != null) && (minimum.compareTo(v) > 0)) {
                return null;
            }
            return Long.valueOf(v);
        }
    }

    private static class MyFormatterFactory extends DefaultFormatterFactory {

        @Override
        public AbstractFormatter getDefaultFormatter() {
            return new HexFormatter();
        }
    }

    private static class HexFormatter extends DefaultFormatter {

        @Override
        public Object stringToValue(String text) throws ParseException {
            try {
                return Long.valueOf(text, 16);
            } catch (NumberFormatException nfe) {
                throw new ParseException(text, 0);
            }
        }

        @Override
        public String valueToString(Object value) throws ParseException {
            return Long.toHexString(
                ((Long) value).intValue()).toUpperCase();
        }
    }
} 
```

# java - 无论焦点如何，都向 Java Swing 应用程序添加键盘支持

> ID：13114668
> 
> 赞同：0
> 
> 时间：2012-10-29T00:53:43.933
> 
> 标签：java, swing, event-handling, keyboard, keylistener

我有一个`JFrame`具有多个面板的面板，这些面板累积在一个相当复杂的 Swing UI 中。我想添加键盘支持，以便*无论*组件焦点如何，某个按键，例如 [ENTER] 键，都会导致听众做出反应。

我尝试添加一个`KeyListener`，但如果选择了另一个改变焦点的`JFrame`，那将不起作用。`JComponent`

有没有合适的方法来做到这一点？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-29T01:05:48.147

向 KeyboardFocusManager 注册 KeyEventDispatcher 允许您在所有键事件发送到焦点组件之前查看它们。您甚至可以修改事件或阻止它被传递到焦点组件：

```
KeyboardFocusManager.getCurrentKeyboardFocusManager().addKeyEventDispatcher(
    new KeyEventDispatcher() {
        public boolean dispatchKeyEvent(KeyEvent e) {
            //Get the char which was pressed from the KeyEvent:
            e.getKeyChar();
            //Return 'true' if you want to discard the event.
            return false;
        }
    }); 
```

如果您只想获取一个窗口/组件或特定键的键输入，则可以按照 kleopatra 的建议使用 KeyBindings。作为一个关于如何在按下 Enter 时注册到键盘事件的示例（您可以使用 KeyEvent 提供的任何 VK_，对于修饰符 [alt、ctrl 等]，请参见 InputEvent），请参见：

```
JFrame frame = new JFrame(); //e.g.
JPanel content = (JPanel)frame.getContentPane(); 
content.getInputMap().put(KeyStroke.getKeyStroke(java.awt.event.KeyEvent.VK_ENTER,0),"enterDown");
content.getActionMap().put("enterDown",new AbstractAction() {
    private static final long serialVersionUID = 1l;
    @Override public void actionPerformed(ActionEvent e) {
        //This action is called, as the Enter-key was pressed.
    }
}); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-29T01:05:14.533

我这样做的方法是使 JFrame 可聚焦并将侦听器附加到它。然后，遍历所有的 JFrame 子级并使其他所有内容都无法聚焦。当然，这仅在您没有文本框或类似内容的情况下才有效，因为它们将变得不可编辑。

# c - posix线程阻塞信号和解除阻塞

> ID：13114678
> 
> 赞同：6
> 
> 时间：2012-10-29T00:55:05.640
> 
> 标签：c, multithreading, signals, posix, block

有没有办法阻止某些信号并取消阻止同一组中的其他信号？我只是似乎不明白它！

一个例子

```
sigset_t set;
sigemptyset(&set);

sigaddset(&set, SIGUSR1);
// Block signal SIGUSR1 in this thread
pthread_sigmask(SIG_BLOCK, &set, NULL);
sigaddset(&set, SIGALRM);
// Listen to signal SIGUSR2
pthread_sigmask(SIG_UNBLOCK, &set, NULL);

pthread_t printer_thread1, printer_thread2;
pthread_create(&printer_thread1, NULL, print, (void *)&f1);
pthread_create(&printer_thread2, NULL, print, (void *)&f2);

bool tl = true;
while(1)
{
    if(tl)
    {
        // thread1 does something
        kill(pid, SIGUSR1);
        // main thread waits for SIGALRM
        sigwait(&set, &sig);
        tl = !tl;
    }
    else
    {
        // thread2 does something
        kill(pid, SIGUSR2);
        // main thread waits for SIGALRM
        sigwait(&set, &sig);
        tl = !tl;
    }
} 
```

我不允许只使用互斥锁、信号量等信号。

有人可以帮忙吗？:)

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-10-29T01:46:05.933

> 有没有办法阻止某些信号并取消阻止同一组中的其他信号？

使用`pthread_sigmask`，您可以选择：

*   使用常数将一组信号添加到一组阻塞信号中`SIG_BLOCK`
*   使用常数将一组信号移到一组阻塞信号中`SIG_UNBLOCK`
*   使用常量定义要阻塞的信号集`SIG_SET`

换句话说，线程当前有一组阻塞信号，您可以按照上面指定的方式修改它，一次一个操作。

重要的一点是，新创建的线程继承了创建线程的信号掩码，因此您可以在创建新线程之前设置新线程的掩码，或者在新线程将运行的函数中，在您方便时设置。

关于您的示例，我假设您正在尝试使用`printer_thread1`block `SIGUSR2`and `SIGALRM`，并且有`printer_thread2`block `SIGUSR1`and `SIGALRM`，并且有主线程 block `SIGUSR1`and `SIGUSR2`，这样每个线程都可以发送一个将被单个线程捕获的信号（没有代码`print`，`f1`并且`f2`，不可能确定您在示例中的意图是什么）。

您应该能够通过以下代码实现这一点：

```
sigset_t set;
pthread_t printer_thread1, printer_thread2;

// Block signal SIGUSR1 & SIGALRM in printer_thread1
sigemptyset(&set);
sigaddset(&set, SIGUSR1);
sigaddset(&set, SIGALRM);
pthread_sigmask(SIG_SET, &set, NULL);
pthread_create(&printer_thread1, NULL, print, (void *)&f1);

// Block signal SIGUSR2 & SIGALRM in printer_thread2
sigaddset(&set, SIGUSR2);
sigaddset(&set, SIGALRM);
pthread_sigmask(SIG_SET, &set, NULL);
pthread_create(&printer_thread2, NULL, print, (void *)&f2);

// Block signal SIGUSR1 & SIGUSR2 in the main thread
sigemptyset(&set);
sigaddset(&set, SIGUSR1);
sigaddset(&set, SIGUSR2);
// Listen to signal SIGALRM
pthread_sigmask(SIG_SET, &set, NULL);

bool tl = true;
while(1)
{
    if(tl)
    {
        // thread1 does something
        kill(pid, SIGUSR1);
        // main thread waits for SIGALRM
        sigwait(&set, &sig);
        tl = !tl;
    }
    else
    {
        // thread2 does something
        kill(pid, SIGUSR2);
        // main thread waits for SIGALRM
        sigwait(&set, &sig);
        tl = !tl;
    }
} 
```

请参阅这些手册页：

*   [pthread_sigmask](https://www.kernel.org/doc/man-pages/online/pages/man3/pthread_sigmask.3.html)
*   [信号掩码](https://www.kernel.org/doc/man-pages/online/pages/man2/sigprocmask.2.html)

了解更多详情。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-29T01:17:00.470

我想你想在这里做的是

```
// Block signal SIGUSR1 in this thread
sigemptyset(&set);
sigaddset(&set, SIGUSR1);
pthread_sigmask(SIG_BLOCK, &set, NULL);

// Listen to signal SIGALRM
sigemptyset(&set);
sigaddset(&set, SIGALRM);
pthread_sigmask(SIG_UNBLOCK, &set, NULL); 
```

该集合仅用于告诉它要阻止或取消阻止什么。一旦传递给命令，您就可以自由地重置它并建立另一个信号掩码。如果您跳过 sigemptyset，该集合仍将包含 SIGUSR1，随后将再次解除阻塞。好吧，我认为它至少是这样工作的——我已经很久没有使用信号了。

# php - 将整个类作为参数传递给另一个类

> ID：13114679
> 
> 赞同：6
> 
> 时间：2012-10-29T00:55:19.373
> 
> 标签：php, oop, methods

到目前为止，我觉得我已经理解了 OOP 编程的概念和优点，而且我在理解如何使用 PHP 中的类方面并没有遇到任何困难。

然而，这让我有点困惑。我想我可以理解它，但我仍然不确定。

我一直在关注一组视频教程（不确定链接到外部资源的规则，但我在 youtube 上找到了它们），它们很容易解释。除了，令人沮丧的是，当导师决定将一个类作为另一个类中的参数传递时。至少我认为这就是正在发生的事情。

```
Class Game
{

    public function __construct()
    {
        echo 'Game Started.<br />';
    }
    public function createPlayer($name)
    {
        $this->player= New Player($this, $name);
    }
}

Class Player
{

    private $_name;

    public function __construct(Game $g, $name)
    {
        $this->_name = $name;
        echo "Player {$this->_name} was created.<br />";
    }
} 
```

然后我实例化 Game 类的一个对象并调用它的方法；

```
$game = new Game();
$game-> createPlayer('new player'); 
```

相当令人沮丧的是，导师并没有真正解释他为什么这样做，而且据我所知，也没有显示代码中任何可以证明这一点的调用。

Player 中的魔术方法构造函数是否将 Game 类作为引用传入？这是否意味着整个类都可以在 Player 类中通过引用访问？当引用 $this 而不指向任何特定的方法或属性时，您是在引用整个类吗？

如果这是正在发生的事情，那我为什么要这样做？如果我在我的游戏类中创建了一个玩家，那么我当然可以在游戏类中访问我的玩家属性和方法，对吗？为什么我希望我的游戏类也包含在我的 Player 类中？例如，我可以在 Player 类中调用 createPlayer() 吗？

如果我的解释令人困惑，我深表歉意。

我想我的问题归结为：我作为参数传递的究竟是什么，为什么我要在每天的 OOP 编程中这样做？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-29T01:01:23.810

这称为[类型提示](http://php.net/manual/en/language.oop5.typehinting.php)，他没有将整个类作为参数传递，而是向 Class Player 提示第一个参数的类型

> PHP 5 引入了类型提示。函数现在能够强制参数为对象（通过在函数原型中指定类的名称）、接口、数组（自 PHP 5.1 起）或可调用（自 PHP 5.4 起）。但是，如果将 NULL 用作默认参数值，则将允许它作为任何以后调用的参数。

（摘自php手册）

> 这是否意味着整个类都可以在 Player 类中通过引用访问？

不是整个类，但您可以访问作为参数传递的类的实例

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-10-29T01:55:18.273

该方法确实期望获得一个对象，该对象是`Game`其他任何事物的实例，并且会出错。

你在这里传递了一个实例`Game`：`New Player($this, $name);` 关键字`$this`是指你所在的对象实例。

最后....我（以及其他人）不知道作者为什么这样做，因为他在通过`Game`实例后没有使用该实例。

你为什么要传递一个类的实例？
想象一个接受用户作为输入的类，并根据某些逻辑对他们做一些事情。（代码中没有注释，因为函数名和类名应该是不言自明的）

```
class User{
  protected $name,$emp_type,$emp_id;
  protected $department;

  public function __construct($name,$emp_type,$emp_id){
     $this->name = $name;
     $this->emp_type = $emp_type;
     $this->emp_id = $emp_id;
  }

  public function getEmpType(){
     return $this->emp_type;
  }

  public function setDep($dep){
    $this->department = $dep;
  }
}

class UserHub{

  public function putUserInRightDepartment(User $MyUser){
      switch($MyUser->getEmpType()){
           case('tech'):
                $MyUser->setDep('tech control');
                break;
           case('recept'):
                $MyUser->setDep('clercks');
                break;
           default:
                $MyUser->setDep('waiting HR');
                break;
      }
  }
}

$many_users = array(
    0=>new User('bobo','tech',2847),    
    1=>new User('baba','recept',4443), many more
}

$Hub = new UserHub;
foreach($many_users as $AUser){
   $Hub->putUserInRightDepartment($AUser);
} 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-10-29T01:39:25.483

```
/**
* Game class.
*/
class Game implements Countable {
    /**
    * Collect players here.
    * 
    * @var array
    */
    private $players = array();

    /**
    * Signal Game start.
    * 
    */
    public function __construct(){
        echo 'Game Started.<br />';
    }

    /**
    * Allow count($this) to work on the Game object.
    * 
    * @return integer
    */
    public function Count(){
        return count($this->players);
    }

    /**
    * Create a player named $name.
    * $name must be a non-empty trimmed string.
    * 
    * @param string $name
    * @return Player
    */
    public function CreatePlayer($name){
        // Validate here too, to prevent creation if $name is not valid
        if(!is_string($name) or !strlen($name = trim($name))){
            trigger_error('$name must be a non-empty trimmed string.', E_USER_WARNING);
            return false;
        }
        // Number $name is also not valid
        if(is_numeric($name)){
            trigger_error('$name must not be a number.', E_USER_WARNING);
            return false;
        }
        // Check if player already exists by $name (and return it, why create a new one?)
        if(isset($this->players[$name])){
            trigger_error("Player named '{$Name}' already exists.", E_USER_NOTICE);
            return $this->players[$name];
        }
        // Try to create... this should not except but it's educational
        try {
            return $this->players[$name] = new Player($this, $name);
        } catch(Exception $Exception){
            // Signal exception
            trigger_error($Exception->getMessage(), E_USER_WARNING);
        }
        // Return explicit null here to show things went awry
        return null;
    }

    /**
    * List Players in this game.
    * 
    * @return array
    */
    public function GetPlayers(){
        return $this->players;
    }

    /**
    * List Players in this game.
    * 
    * @return array
    */
    public function GetPlayerNames(){
        return array_keys($this->players);
    }
} // class Game;

/**
* Player class.
*/
class Player{
    /**
    * Stores the Player's name.
    * 
    * @var string
    */
    private $name = null;

    /**
    * Stores the related Game object.
    * This allows players to point to Games.
    * And Games can point to Players using the Game->players array().
    * 
    * @var Game
    */
    private $game = null;

    /**
    * Instantiate a Player assigned to a Game bearing a $name.
    * $game argument is type-hinted and PHP makes sure, at compile time, that you provide a proper object.
    * This is compile time argument validation, compared to run-time validations I do in the code.
    * 
    * @param Game $game
    * @param string $name
    * @return Player
    */
    public function __construct(Game $game, $name){
        // Prevent object creation in case $name is not a string or is empty
        if(!is_string($name) or !strlen($name = trim($name))){
            throw new InvalidArgumentException('$name must be a non-empty trimmed string.');
        }
        // Prevent object creation in case $name is a number
        if(is_numeric($name)){
            throw new InvalidArgumentException('$name must not be a number.');
        }
        // Attach internal variables that store the name and Game
        $this->name = $name;
        $this->game = $game;
        // Signal success
        echo "Player '{$this->name}' was created.<br />";
    }

    /**
    * Allow strval($this) to return the Player name.
    * 
    * @return string
    */
    public function __toString(){
        return $this->name;
    }

    /**
    * Reference back to Game.
    * 
    * @return Game
    */
    public function GetGame(){
        return $this->game;
    }

    /**
    * Allow easy access to private variable $name.
    * 
    * @return string
    */
    public function GetName(){
        return $this->name;
    }
} // class Player;

// Testing (follow main comment to understand this)
$game = new Game();
$player1 = $game->CreatePlayer('player 1');
$player2 = $game->CreatePlayer('player 2');
var_dump(count($game)); // number of players
var_dump($game->GetPlayerNames()); // names of players 
```

以更好的方式重写了您的代码，并添加了一些使该代码毫无意义的缺失变量：

*   在玩家类中，您不存储游戏。
*   在游戏类中，您只支持一名玩家。
*   没有错误检查......任何地方。

修复了所有这些加：

*   添加了异常*（以防止创建对象）*
*   `Try{} catch(...){}`任何 OOP 开发人员都应该知道的异常处理
*   实现 Countable 接口以允许 count($game) 玩家
*   还有一些技巧可以让您很好地阅读

关注评论，我希望您的代码在阅读后会更有意义。

# cmake - 从集合中删除文件

> ID：13114680
> 
> 赞同：8
> 
> 时间：2012-10-29T00:55:21.090
> 
> 标签：cmake

我有一个目录，其中包含属于组成 Qt 项目的集合的文件，以及不属于其他文件的文件。也就是说，文件 A.cxx、ADriver.cxx 和 A.ui 都属于需要使用 Qt 选项编译的集合。然后我有一个非 qt 文件 B.cxx。那么 C.cxx、CDriver 和 C.ui 是另一个 Qt 集合。有几十个，所以我想使用 glob 而不是手动编写每个 add_executable。我正在考虑做类似的事情

```
for(all ui files) 
  create an executable from the ui and its matching .cxx and *Driver.cxx"
end 
```

那么所有“保留”的cxx文件（上面循环中没有用到）都是非Qt的，需要自己编译。我的问题是如何从“集合”中“减去”文件。也就是说，要使用上述方法，我必须拥有一组所有 cxx 文件，并删除在 .ui 文件循环中使用的文件。这可能吗？有没有更好的方法来做这样的事情？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-10-29T03:36:26.923

首先，使用 glob 收集所有文件：

```
file(GLOB ALL_SRCS *) 
```

`ALL_SRCS`然后选择 ui 文件并为它们创建 Qt 目标，同时从列表中减去它们：

```
file(GLOB UIS *.ui)

foreach(ui ${UIS})
get_filename_component(f ${ui} NAME_WE)

# Do Qt stuff
qt4_wrap_ui( ${f}uis ${ui} )
qt4_wrap_cpp( ${f}srcs ${f}.cpp ${f}Driver.cpp )
add_executable( ${f} ${f}uis ${f}srcs )

list(REMOVE_ITEM ALL_SRCS ${ui} ${f}.cpp ${f}Driver.cpp)
endforeach() 
```

在此之后，您将拥有所有非 qt 源文件`ALL_SRCS`。

# r - R WGCNA Cytoscape 枢纽基因

> ID：13114681
> 
> 赞同：3
> 
> 时间：2012-10-29T00:55:23.140
> 
> 标签：r, attributes, count, genetics, cytoscape

我有以下问题

WGCNA - [http://labs.genetics.ucla.edu/horvath/htdocs/CoexpressionNetwork/Rpackages/WGCNA/Tutorials/](http://labs.genetics.ucla.edu/horvath/htdocs/CoexpressionNetwork/Rpackages/WGCNA/Tutorials/)

处理第 1.6 节，将网络导出到外部软件 (Cytoscape)

我目前正在尝试对一组基因执行 WGCNA，但我无法获得每个模块的 top x hub 基因。我正在尝试将网络导出到 Cytoscape，并使用与导出到 VisANT 概述的相同方法来获取 top x hub 基因。

```
# Select modules (only interested in one for now)
modules = c("greenyellow")

# Select module probes
probes = names(datExpr)
inModule = is.finite(match(bwModuleColors, modules))
modProbes = probes[inModule]
modGenes = annot$gene_symbols[match(modProbes, annot$geneID)]

# Select the corresponding Topological Overlap
modTOM = TOM[inModule, inModule]
dimnames(modTOM) = list(modProbes, modProbes)

# Restrict the network to the top 30 genes
nTop = 30
IMConn = softConnectivity(datExpr[, modProbes]
top = (order(-IMConn) <= nTop)

# Export the network into a fomat that Cytoscape can read
cyt = exportNetworkToCytoscape(modTOM[top, top],
  edgeFile = paste("CytoscapeInput-edges-", paste(modules, collapse="-"), ".txt", sep = ""),
  nodeFile = paste("CytoscapeInput-nodes-", paste(modules, collapse="-"), ".txt", sep = ""),
  weight = TRUE,
  threshold = 0.02,
  nodeNames = modProbes,
  altNodeNames = modGenes,
  nodeAttr = bwModuleColors[inModule]) 
```

我写了一个短循环来计算每个基因的连接数，它按预期工作，但第 x 个基因始终有零连接。假设 x 为 30。如果我将截止值增加到 31 个中心基因，则第 30 个基因现在显示与网络中其他基因的连接，但第 31 个基因没有显示任何内容。此外，这种变化增加并减少了与网络中其他基因的一些连接数。这真的让我很困扰，因为应该只添加连接，因为网络变大了一个基因，而变化应该由第 30 个基因来解释，但输出的情况并非如此。

```
# Split the cytoscape file into two parts: edge and node
node <- cyt$nodeData
edge <- cyt$edgeData

# The limit covers all of the connections in the edge file by determining the length of the column ‘fromNode’
limit <- length(edge$fromNode)

# Create an empty list to store the counts for each gene
counts = list()

# Loop for the genes going from 1 to the number of genes specified for the network, ‘nTop’
for (i in 1:nTop) {

# Reset the count for each new gene and specify the names of the gene of interest and the matching genes
  name = node$nodeName[[i]]

  count = 0

# Nested loop that searches for matches to the gene in question in both the ‘fromNode’ and ‘toNode’columns, and adds one to the count for each match.
  for (j in 1:limit) {
    matchName1 = edge$fromNode[[j]]
    matchName2 = edge$toNode[[j]]
    if (name == matchName1 || name == matchName2)
      {count = count + 1}
    }

# Create a string for the attribute in the correct format
    attribute <- paste(name, "=", count)

# Adds the count to the list
  counts <- c(counts, attribute)
  }
# End of loop 
```

循环似乎按预期工作，所以我认为问题出在网络建设上。我目前正在回顾我对线性代数、矩阵和拓扑的了解，以尝试查看问题是否在于它们的排序方式或类似的方式，但这可能只是 exportNetworkToCytoscape() 函数的方式作品。

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2016-06-30T12:46:11.923

模块=“棕色”；

probes = rownames(datExpr_human) ======> 行中的数据基因和列中的样本。

inModule = is.finite(match(modules_human,modules))

modTOM = dissTOM_Human[inModule, inModule];

modProbes = 探针[inModule];

暗名（modTOM）=列表（modProbes，modProbes）

nTop = 30;

datExpr = t(datExpr_human)

IMConn = softConnectivity(datExpr[, modProbes]);

top = (rank(-IMConn) <= nTop)

cyt = exportNetworkToCytoscape(modTOM[top, top], edgeFile = paste("CytoscapeInput-edges-", paste(modules, collapse="-"), ".txt", sep=""), nodeFile = paste("CytoscapeInput -nodes-", paste(modules, collapse="-"), ".txt", sep=""), weighted = TRUE)

# c# - C# 中的列表未使用 MongoDB 官方客户端呈现为数组

> ID：13114684
> 
> 赞同：0
> 
> 时间：2012-10-29T00:55:54.193
> 
> 标签：c#, asp.net, mongodb, nosql

我正在将 MongoDB 与 ASP.NET 和 10gen 的官方驱动程序一起使用。我的问题是如何将我的课程呈现为文档（序列化）。

我有一个名为“box”的类，另一个类称为“items”。

项目在类中出现如下：

```
 [BsonIgnoreIfNull]
    [BsonElementAttribute("items")]
    public List<Item> Items { get; set; } 
```

每个项目都在其自己的类中分配了几个属性。

当我查看插入到 Mongo 中的 JSON 文档时，我看到它是这样的：

```
Items: {
   "0": {
      "_id": ObjectId("33423423423434343434"),
       "name": "Item1"
     },
} 
```

但是，我不希望它看起来像那样，而是像这样显示为一个数组：

```
Items: [
    {
       "_id": ObjectId("34234234234234234"),
       "name": "some name",
    },
   {
       "_id": ObjectId("34234234234234234"),
       "name": "some name",
    }
] 
```

在后面的代码中添加项目：

```
 List<Item> theItems = new List<Item>();
        Item singleitem = new Item{
           Title = "single item one"
        };

    theItems.Add(singleitem);
    theItems.Add(singleitem);

    var box= new Box
    {
        IsPublic = true,
        Items = theItems
    };

    SafeModeResult sf = collectionBoxes.Insert(box); 
```

所以这些项目将显示为一个数组。我怎样才能改变我的代码来做到这一点？谢谢。

# iphone - 我怎样才能像一直在后台工作一样使用 UIWebview

> ID：13114685
> 
> 赞同：0
> 
> 时间：2012-10-29T00:55:57.597
> 
> 标签：iphone, xcode, multithreading, uiwebview, background

我想设置`UIWebview`总是在后台运行。 `UIWebview`当 iPhone 进入 ' ' 时不工作`applicationDidEnterBackground`。所以我想`UIWebview`总是在后台运行。可能吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-29T00:59:00.933

每个应用程序都可以在后台继续执行大约 10 分钟，然后才会终止。只有某些应用程序可以在后台继续执行，例如音频/gps/蓝牙等相关应用程序。[您可以在此处](http://developer.apple.com/library/ios/#documentation/iphone/conceptual/iphoneosprogrammingguide/ManagingYourApplicationsFlow/ManagingYourApplicationsFlow.html)了解更多信息。

以下代码示例来自应用程序文档，可以帮助您入门 -

```
- (void)applicationDidEnterBackground:(UIApplication *)application
{
    bgTask = [application beginBackgroundTaskWithExpirationHandler:^{
        // Clean up any unfinished task business by marking where you.
        // stopped or ending the task outright.
        [application endBackgroundTask:bgTask];
        bgTask = UIBackgroundTaskInvalid;
    }];

    // Start the long-running task and return immediately.
    dispatch_async(dispatch_get_global_queue(DISPATCH_QUEUE_PRIORITY_DEFAULT, 0), ^{

        // Do the work associated with the task, preferably in chunks.

        [application endBackgroundTask:bgTask];
        bgTask = UIBackgroundTaskInvalid;
    });
} 
```

# syntax-highlighting - 在 Eclipse 4.2.1 中获得 OpenCL 语法高亮的更好方法？

> ID：13114686
> 
> 赞同：2
> 
> 时间：2012-10-29T00:56:14.773
> 
> 标签：syntax-highlighting, opencl, eclipse-cdt

我想知道在 Eclipse 4.2.1 CDT 中是否有更好的方法来突出显示 OpenCL 的语法。我能弄清楚的唯一方法是我偶然做的事情，这似乎到目前为止有效，但我希望有更好的方法，因为这种方法看起来几乎像一个错误或其他东西：

> 转到：窗口 -> 首选项 -> 常规 -> 内容类型 -> 文本 -> C 源文件 -> C++ 源文件
> 
> 在文件关联下，单击添加，然后在弹出窗口中输入：*.cl
> 
> 单击确定，然后单击确定
> 
> 从 Project Explorer 打开任何 .cl 文件，看看它几乎没有问题。现在有一些语法高亮显示，但有语法错误显示完全有效的 OpenCL 代码......
> 
> 返回到您之前所在的“首选项”菜单的同一区域，删除您之前添加的 *.cl 规则。
> 
> 单击确定，然后单击确定
> 
> 关闭 .cl 文件并再次打开它，现在它应该是好的！

当然，这种方法只突出显示有效的 C++ 代码（甚至不是全部），并忽略特定于 OpenCL 的内容，但它是最接近正确语法突出显示的方法，我可以弄清楚如何在 Eclipse 中使用。

这似乎“有效”，因为它允许使用 Eclipse 的 C/C++ 编辑器打开 .cl 文件（启用一些语法突出显示），并且还从静态分析器（删除一些语法错误）和自动生成的项目中排除该文件Makefile（防止 Eclipse 尝试构建 .cl 文件，就好像它是 C++ 源代码一样）。

# jquery - 两列上的 datatables.net 正则表达式过滤器

> ID：13114688
> 
> 赞同：2
> 
> 时间：2012-10-29T00:56:33.070
> 
> 标签：jquery, regex, jquery-datatables

我正在使用 jQuery Datatables，我想在两列上使用正则表达式来过滤表中的数据。

我有过滤器第 5 列的代码，但我希望它同时过滤第 5 列和第 6 列。是否可以？

```
$("#venuefilterit li").click(function(e) {
                var venue = $(this).text();
                var venueFilterRegex = "^\\s*"+venue+"\\s*$";
                oTable.fnFilter(venueFilterRegex,5,true,false);
}); 
```

[我在jQuery DataTables Filtering for Specific Columns Only](https://stackoverflow.com/questions/8023701/jquery-datatables-filtering-for-specific-columns-only)中看到了类似于我需要的东西- 但无法让它与正则表达式一起使用。

有任何想法吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-29T03:45:51.023

是的，您可以使用，`fnMultifilter`或者如果您使用`fnFilter`，则必须调用此函数的次数与要过滤的列一样多。例如，您想在代码中过滤第 5 列和第 6 列： 将是：

```
$("#venuefilterit li").click(function(e) {
  oTable.fnFilter(venueFilterRegex,5,true,false);
  oTable.fnFilter(venueFilterRegex,6,true,false);
} 
```

如果你想使用 'fnMultifilter' 你可以检查这个[fnMultiFilter](http://datatables.net/plug-ins/api#fnMultiFilter)

# c# - NHibernate 中的单列连接使用代码映射

> ID：13114693
> 
> 赞同：0
> 
> 时间：2012-10-29T00:57:16.873
> 
> 标签：c#, hibernate, nhibernate, mapping-by-code

考虑以下 Item 和 ItemContent 之间的关系。

**项目**
ItemId项目
名称

**ItemContent**
ContentId
ItemId
内容
ContentType

我想做的是`Content`在 Item 上有一个属性，它根据映射本身中提供的 ContentType 或以其他方式注入的 ContentType 加入 ItemContent 的 Content 列。

实现这一目标的最佳方法是什么？完成此任务的最简单方法是什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-29T07:02:14.127

好吧 - 根据 Ayend Rahien 的说法，可以直接在映射中使用过滤器。我没有尝试过 - 但如果说它有效，它通常应该有效。

```
<set name="Comments"
   table="Comments">
   <key column="PostId"/>
   <one-to-many class="Comment"/>
   <filter name="effectiveDate"
   condition=":asOfDate >= PostedAt"/>
</set> 
```

[这是他博客上关于 NHibernate 过滤器](http://ayende.com/blog/3993/nhibernate-filters)的整篇文章

# objective-c - 将注释标题传递给新视图

> ID：13114695
> 
> 赞同：0
> 
> 时间：2012-10-29T00:57:24.630
> 
> 标签：objective-c, annotations

在我的应用程序中，我有一个使用 UILongPressGestureRecognizer 放置图钉的 mapView。当屏幕被按下时，坐标被地理编码并且一个大头针被放下，并且地址被设置为标题。屏幕上会有多个引脚，注释视图有一个标注附件，它将另一个控制器（称为 PinViewController）推到堆栈上。PinViewController 有一个标签，我想显示图钉的标题。

这是删除引脚的代码：

```
-(void)press:(UILongPressGestureRecognizer *)recognizer
{
    CGPoint touchPoint = [recognizer locationInView:worldView];
    CLLocationCoordinate2D touchMapCoordinate = [worldView convertPoint:touchPoint toCoordinateFromView:worldView];

    geocoder = [[CLGeocoder alloc]init];
    CLLocation *location = [[CLLocation alloc]initWithCoordinate:touchMapCoordinate
                                                    altitude:CLLocationDistanceMax
                                          horizontalAccuracy:kCLLocationAccuracyBest
                                            verticalAccuracy:kCLLocationAccuracyBest
                                                   timestamp:[NSDate date]];
    [geocoder reverseGeocodeLocation:location
               completionHandler:^(NSArray *placemarks, NSError *error) {
                   NSLog(@"reverseGeocoder:completionHandler: called");
                   if (error) {
                       NSLog(@"Geocoder failed with error: %@", error);
                   } else {
                       CLPlacemark *place = [placemarks objectAtIndex:0];
                       geocodedAddress = [NSString stringWithFormat:@"%@ %@, %@ %@", [place subThoroughfare], [place thoroughfare], [place locality], [place administrativeArea]];

                       if (UIGestureRecognizerStateBegan == [recognizer state]) {
                           addressPin = [[MapPoint alloc]initWithAddress:geocodedAddress coordinate:touchMapCoordinate
                                                                   title:geocodedAddress];
                           [worldView addAnnotation:addressPin];
                       }
                   }
               }];
} 
```

这是 PinViewController 被推送到堆栈的代码：

```
-(void)mapView:(MKMapView *)mapView annotationView:(MKAnnotationView *)view calloutAccessoryControlTapped:(UIControl *)control
{
    PinViewController *pinViewController = [[PinViewController alloc]init];
    [[self navigationController]pushViewController:pinViewController animated:YES];
    pinViewController.label.text = addressPin.title;
} 
```

我遇到的问题是标签只显示要进行地理编码的最后一个地址。因此，当我放下一个引脚并按下标注附件按钮时，正确的地址被推送到 PinViewController。但是如果我按下另一个注解的标注附件按钮，最后一个引脚的地址会被推送到 PinViewController。所以我需要找到一种方法，以便当我按下注解视图的标注附件按钮时，将注解的标题传递给 PinViewController。我真的很感激一些帮助。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-29T01:14:17.600

您的问题是您使用`addressPin`的始终是最后一个被地理编码的引脚。您需要使用`annotationView`来访问被按下的注释。

```
-(void)mapView:(MKMapView *)mapView annotationView:(MKAnnotationView *)view calloutAccessoryControlTapped:(UIControl *)control
{
    PinViewController *pinViewController = [[PinViewController alloc]init];
    [[self navigationController]pushViewController:pinViewController animated:YES];
    pinViewController.label.text = view.annotation.title;
} 
```

# c# - foreach 循环中的可枚举更新

> ID：13114698
> 
> 赞同：-5
> 
> 时间：2012-10-29T00:58:39.763
> 
> 标签：c#, linq

我有这样的代码。

```
IEnumerable<string> imagesFileNames = FindImages(imagesFolder);

 foreach(string imageFileName in imagesFileNames)

            {
                //my code
                //IEnumerable<string> imagesFilesNames = FindImages(imagesFolder);
                // it doesn't work!!  
            } 
```

我可以在 foreach 循环中更新 IENumerable 集合吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-29T02:26:15.127

欢迎来到[Stackoverflow](http://www.Stackoverflow.com)。您不能更改在该循环中迭代的 IEnumerable。

**看起来您想递归查找文件：**

```
IEnumerable<string> imagesFileNames = FindImages(imagesFolder, "*.jpg", true);

private IEnumerable<string> FindImages(string dir, string extension, bool isRecursive)
try
{
    foreach (string d in Directory.GetDirectories(dir))
    {
        try
        {
            foreach (string f in Directory.GetFiles(d, extension))
            {
                imagesFileNames.Add(f);
            }
            if (isRecursive) FindImages(d,extension, true);
        }
        catch (Exception)
        {    
        }
    }
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-29T12:13:50.357

谢谢你们。我意识到在你的评论之后，这是一个坏主意。并决定改变我的方法。我用计时器解决了这个问题，按顺序调用图像的名称。

```
private void timer2_Tick(object sender, EventArgs e)
{
 a++;
 imageFileName = "IMAGES\DB\"+a+".jpg"
\\\my code
} 
```

# jquery - RoR：通过 jQuery 删除表单字段，远程调用

> ID：13114699
> 
> 赞同：0
> 
> 时间：2012-10-29T00:58:41.010
> 
> 标签：jquery, ruby-on-rails

我在使用 jQuery remove() 函数从表单中删除某些字段时遇到了一些问题。在视图中我有一个表格。此表单有一组用于某些子元素的循环字段。用户可以删除每组。我在我的控制器中使用远程调用destroy方法，该方法调用带有jquery的js文件，该文件将淡出并删除相关字段集所在的div。

我的问题是，尽管对象被破坏并且 div 很好地淡出，但字段仍然处于活动状态，因此在发布表单时显然会出错。

我试图添加一个字段集标记并将其删除除了 div 之外，还尝试禁用整个字段集，但结果是一样的。这些字段仍在发布中（并且由于对象已被销毁，因此返回错误）。

这是视图的相关部分

```
- i = 0             # a bit crude, see if can make index count more Railsy
= f.simple_fields_for :fund_levels do |fl|
   %div{id: "flheader-#{fl.object.id}"}
     %div
       = link_to "Sponsor levels", "#", :class => "show_hide", :id => "initiator1_fl#{i}", :style=>"margin-bottom:2px;", :onclick=>"return false"
     %div{:class => "slidingDiv #{fund_levels_last?(i, @fund_level_count) ? "shown": "hidd" } whitebg leftadj", :id=>"body_fl#{i}", :style=>"width:100%;" }
       = fl.input :title
       = fl.input :description
       = fl.input :maxnumber
       = fl.input :price
       %div{:style => "float: right; padding: 20px 20px 20px 0"}
         = fund_levels_last?(i, @fund_level_count) ? ( link_to "add new level", ad, {class: 'button orange sm'} ) : ( link_to "remove", accounts_ad_fund_level_path(ad, fl.object.id), {:class => 'button orange sm', :method => :delete, :remote => true, :confirm => t('q.are_you_sure')} )
       - i += 1 
```

这是 jQuery 调用

```
$('#flheader-<%= @fundlevel.id %>').fadeOut(300, function() { $(this).remove(); }); 
```

正如我所说，对象被成功销毁并且 div 淡出。我只需要弄清楚在发布时如何从页面中完全删除已删除的对象（字段集）。

**编辑：问题似乎是 simple_fields_for 在每个循环开始时立即生成一个隐藏的 ID 字段。这意味着 ID 字段实际上在被销毁的 div 之外，因此正在发布。关于如何强制隐藏 id 字段位于 DIV 内的任何想法？**

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-29T03:05:02.897

好的，经过几个小时的研究，我解决了这个问题。

首先 - 为了避免在循环 div 之外打印对象 ID，有必要手动将对象 ID 作为隐藏字段包含在内。完成后，simple_forms 不会自动包含它，因此您可以将其放置在您想要的位置。

此外，有必要对主表单控制器进行更改，以允许_destroy 和 reject_if values.all 为空。

# css - Outlook 电子邮件签名中的 CSS 行间距问题

> ID：13114700
> 
> 赞同：0
> 
> 时间：2012-10-29T00:58:42.820
> 
> 标签：css, outlook, html-email

我们正在 Outlook 中测试此电子邮件签名，并遇到一个问题，即在最后一行之前出现额外的几个像素行距。

这似乎与 Outlook 呈现 HTML 与其他电子邮件客户端或站点的方式有关。如果有人对如何解决此问题或是否有可能提出建议。

我们进行了一些研究，到目前为止没有任何帮助，但我们能够确认这不会发生在任何地方，而是在 Outlook 版本中。

```
<body>
<p><br />
  <br />
  <span style="line-height: 14px; color: #414042; letter-spacing: 1px; font-size: 10px; font-family:Georgia, 'Times New Roman', Times, serif;">FIRST NAME</span><br />
  <span style="line-height: 14px; color: #414042; font-style:italic; font-size: 10px; font-family:Georgia, 'Times New Roman', Times, serif;">partner</span><br />
  <span style="line-height: 14px; color: #414042; font-size: 10px; font-family:Georgia, 'Times New Roman', Times, serif;">&nbsp;</span><br />
  <span class="appleLinks" style="line-height: 14px; color: #414042; font-size: 10px; font-family:Georgia, 'Times New Roman', Times, serif;">111&nbsp;Adress&nbsp;Plaza&nbsp;|&nbsp;14<sup style="font-size: 8px; line-height: 0; vertical-align: 3px">th</sup>Floor&nbsp;|&nbsp;New&nbsp;York,&nbsp;NY&nbsp;10122</span><br />
  <span class="appleLinks" style="line-height: 14px; color: #414042; font-size: 10px; font-family:Georgia, 'Times New Roman', Times, serif;">tel: 212.xxx.xxxx&nbsp;|&nbsp;fax: 212.xxx.xxxx</span><br />

  <a style="line-height: 14px; color: #2D4F68; font-size: 10px; font-family:Georgia, 'Times New Roman', Times, serif;" href="mailto:email@websitecom">email@website.com</a>&nbsp;
  <a style="line-height: 14px; color: #2D4F68; font-size: 10px; font-family:Georgia, 'Times New Roman', Times, serif;" href="http://www.linkedin.com/in/xxx">LinkedIn</a>&nbsp;
  <a style="line-height: 14px; color: #2D4F68; font-size: 10px; font-family:Georgia, 'Times New Roman', Times, serif;" href="http://www.website.com">www.website.com</a><br /><br />  
<span style="line-height: 14px; mso-line-height-rule:exactly; color: #414042; font-size: 9px; font-weight:bold; font-family:Georgia, 'Times New Roman', Times, serif; letter-spacing: 1px;">TAGLINE<br />
</span><span style="line-height: 14px; mso-line-height-rule:exactly; color: #414042; font-size: 10px; font-family:Georgia, 'Times New Roman', Times, serif;">Service Name | Service Name | Service Name<br /></span><span style="line-height: 14px; mso-line-height-rule:exactly; color: #414042; font-size: 10px; font-family:Georgia, 'Times New Roman', Times, serif;">Service Name | Service Name</span>
</p>
</body> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-29T01:02:58.650

Outlook 2007 中对 CSS 的支持已被删除，取而代之的是 Word 呈现引擎。您的电子邮件在旧版 Outlook 中是否正确呈现？

真正解决问题的唯一方法是通过老式的表格方式来解决。您应该能够以这种方式实现您想要的，并且其他电子邮件阅读器当然也支持表格。这有点麻烦，但据我所知，这是唯一的方法......

# overflow - 句子中的第一个单词具有更大的字体大小：容器元素将其从顶部截断

> ID：13114701
> 
> 赞同：0
> 
> 时间：2012-10-29T00:58:47.763
> 
> 标签：overflow, font-size, css

我网站的第一个单词的正文的字体大小比其余的要大得多。出于某种原因，包含文本的容器将第一个单词从顶部截掉。可能是因为第一个单词的行高与文本的其余部分相同，因此容器无法正确计算自己的高度。

Codepen 片段：[http](http://codepen.io/sardasht/pen/maJup) ://codepen.io/sardasht/pen/maJup （我已经包含了我的 css 文件的全部内容以便能够正确调试，所以不会在这里嵌入。如果需要，我会愉快地编辑我的帖子以包含它，但它将是大约 300 行文本）

如果我增加第一个单词的 line-height，同一行上的其余文本将获得相同的 line-height，从而从下面的其余文本跳转。如果我在容器元素中添加一个 margin-top，第一个单词就不再被截断，但是文本的底线被截断。

我在所有父元素上也玩了溢出：可见/隐藏，但无济于事。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-29T01:18:13.563

`p`元素有`line-height: 1.5em`，它将设置其中文本行的高度。由于`em`单位的原因，高度是根据字体大小确定的，并且`p`是为使用的元素设置的字体大小，因此行高不会因为子元素上设置的较大字体大小而增加。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-29T01:31:34.727

我会尝试使用未在 px 或 ems 中设置的行高声明。

`p, span { line-height:1 }`

我也试过

`span { line-height:0.8 }`

这似乎给出了最少量的顶级“推动”，但我只在 Mac 上的 FF 中查看过它。

我注意到，对于字体，它们的高度和宽度因浏览器而异。这可能会因未给予适当前导、字距调整等的字体而加剧。这可能会导致“奇怪”的换行符，从而导致设置块高度的“问题”——尤其是从 FF 和 Chrome 到 IE . FWIW。

**编辑：http:** [//jsfiddle.net/mvf6j/](http://jsfiddle.net/mvf6j/)

将 line-height 设置为 1（子级的）等于父级 line-height 的 100%；因此，在您的示例代码中 1 = 1.5em。在我的小提琴/示例中，1 = 1em（即使孩子是 2em 字体）。是传承。它使孩子相对于父母。如果您想更改父母的大小，请进行猜测。当您为子项设置明确的行高时，所有在调整大小/关系方面的轻松都会消失。

# sql-server - MDX 方程转换为 DAX 方程

> ID：13114702
> 
> 赞同：1
> 
> 时间：2012-10-29T00:58:53.083
> 
> 标签：sql-server, dax

我正在研究 SQL Server 表格模型。
我很难将 MDX 方程转换为 DAX 方程。

我想使用以下计算显示每个月的 PC 计数变化率（增量或减量）。
（当月 PC 计数 - 上月 PC 计数）/ 上月 PC 计数

这是 MDX 方程，它在多维模型中运行良好。
[PC Count] 是最后一个非空值。

```
(([Date].[Fiscal QTR].CURRENTMEMBER, [Measures].[PC Count])
-
([Date].[Fiscal QTR].PREVMEMBER, [Measures].[PC Count]))
/
([Date].[Fiscal QTR].PREVMEMBER, [Measures].[PC Count]) 
```

我为当前月份的 PC 计数做了一个 DAX 方程

```
PC Count:=
CALCULATE(
    SUM([PC Count]),
    FILTER(Time, Time[DateKey] = MAX(vwFact_PCCount[DateKey]))
) 
```

这在网格视图（SSDT）和性能点中运行良好。但是上个月 PC 计数的以下 MDX 方程在网格视图（SSDT）中运行良好，但是当我在底部轴（月）时，这个方程在性能点中显示错误。

```
Previous Month Count:=CALCULATE(
    SUM([PC Count]),
    FILTER(Time, Time[DateKey] = FORMAT(DATE(LEFT(Max(vwFact_PCCount[DateKey]),4),
                                             RIGHT(LEFT(Max(vwFact_PCCount[DateKey]),6),2)
                                             ,1)-1
                                        , "yyyyMMdd") *1)
) 
```

我不知道我的上个月计数方程有什么问题。如何使用 DAX 获得此结果？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-08T14:12:45.910

您的“当前月份 PC 计数”表达式的编写方式始终是表中最近的月份。这与您在帖子中显示的 MDX 代码不同。

MDX - 当月 PC 计数

```
([Date].[Calendar Month].CURRENTMEMBER, [Measures].[PC Count]) 
```

DAX - 当月 PC 计数

```
SUM('table name'[PC Count]) 
```

在 DAX 中，“当前”的概念是上下文相关的……请参阅MSDN 论坛上的[此线程](http://social.msdn.microsoft.com/Forums/en/sqlkjpowerpivotforexcel/thread/15e3c411-8aa8-4caa-bea2-dc9b3e8f280c)以获得很好的讨论。

这是一个示例，显示了使用 AdventureWorksDW2012 数据集在 DAX 中的当前/先前情况：

```
DEFINE
    MEASURE 'Internet Sales'[SalesAmount_CurrMth] = 
        'Internet Sales'[Internet Total Sales]
    MEASURE 'Internet Sales'[SalesAmount_PrevMth] = 
        CALCULATE (
             'Internet Sales'[SalesAmount_CurrMth]
            ,PREVIOUSMONTH('Date'[Date])
        )
EVALUATE (
    FILTER(
        ADDCOLUMNS (
            SUMMARIZE (
                'Date'
                ,'Date'[Calendar Year]
                ,'Date'[Month Name]
            )
            ,"Current Month", 'Internet Sales'[SalesAmount_CurrMth]
            ,"Prior Month", 'Internet Sales'[SalesAmount_PrevMth]
        )
        ,'Internet Sales'[SalesAmount_CurrMth] <> BLANK()
    )
) 
```

尝试这个...

```
Previous Month Count :=
CALCULATE (
     SUM('<insert table name here>'[PC Count])
    ,DATEADD('Date'[Date],-1, MONTH)
) 
```

# joomla - Joomla k2 - 从面包屑中删除项目标题

> ID：13114705
> 
> 赞同：0
> 
> 时间：2012-10-29T00:59:33.850
> 
> 标签：joomla, breadcrumbs, joomla-k2

我应该如何从 k2 面包屑中删除项目标题并且只显示类别名称？

例如：

首页> Category1 > Category2 > 项目名称

转为：

首页> 类别1 > 类别2

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-26T12:15:17.170

我分享我几个月前找到的答案：

在路径`/modules/mod_k2_tools/helper.php`中，该行`$title = $row->title;`应更改为`$title = "";`

而且，还有一些很好的扩展来操作面包屑。

# html - 谷歌浏览器间歇性负载问题：可能以编程方式禁用“预测网络操作...”？

> ID：13114709
> 
> 赞同：5
> 
> 时间：2012-10-29T01:00:40.900
> 
> 标签：html, google-chrome, load

我在 Google Chrome 中的一个网站遇到了一个非常奇怪的问题：

当我单击链接（从列表视图到详细信息页面）时，页面挂起，Chrome 会弹出一个对话框，要求我终止该页面。该页面从不显示。

*但是*，如果我直接导​​航到该页面，它会毫无问题地加载到 Chrome 中。两种操作（单击链接*或*导航到页面）在 Safari 和 Firefox 中都可以正常工作。

在 Chrome 的设置中禁用“预测网络操作以提高页面加载性能”似乎可以解决问题，但这不是一个可行的解决方案，因为我无法控制用户的浏览器设置。

**有关情况的更多详细信息：**

*   该链接只是一个常规的`<href>`. 我没有做任何 javascript `click()`处理或其他任何事情。我没有使用任何“预取”或“预渲染”`<link>`元素。

*   所有页面都使用 W3 html5 验证器进行验证。

*   我正在导航的页面加载了很多 JS，使用[Knockout.js](http://knockoutjs.com/)进行渲染并通过 HTTP 加载视频文件。

*   在页面*确实*加载的情况下（经过很长时间的等待），Chrome 似乎已经在后台渲染了整个页面并加载了所有外部资源。如果我直接导​​航到该页面，它不会预加载任何内容（我正在使用敲除在加载外部资源时显示“请稍候”消息）。

*   当我使用[Charles](http://www.charlesproxy.com/)记录网络请求时，Chrome 似乎会立即加载页面的 HTML，但对外部资源的请求似乎需要很长时间。

*   如果我查看 Activity Monitor 中的 CPU 使用率，“Google Chrome 渲染器”在从 加载时使用 100% CPU `href`，但在直接从页面加载时仅使用 30%。

*   我正在使用最新版本的 Chrome (22.0.1229.94)

**所以 - 我的问题**

有没有办法以编程方式禁用“预测网络操作以提高页面加载性能”？

或者这个问题还有其他解决方案吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-06-22T21:00:02.083

刚刚经历了高票未回答的问题，我遇到了这个问题，我曾经因为完全不同的原因陷入类似的情况（chrome 正在预加载一个我无法为每个用户加载的**巨大文件）。**我当时应用的相当简单的解决方案是通过 Javascript 打开链接，而不是一个简单`href`的奇迹。无论哪种方式，您的问题可能已经解决，但是看到我认为我至少可以分享这个小见解的视图数量。

# sql - 使用数据作为外键删除带有其他表的 SQL 中的多个条目

> ID：13114719
> 
> 赞同：1
> 
> 时间：2012-10-29T01:02:09.510
> 
> 标签：sql, postgresql, foreign-keys, cascade

我有几个表使用外键引用一个主表。

我的目标是从主表中删除一条一揽子删除语句，然后删除所有将数据作为外键的语句。

但是，由于引用在从其他表中删除之前被删除，因此我得到了约束错误。有什么方法可以告诉 SQL 我想从所有将数据用作外键的表中删除？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-29T01:06:34.657

要将父表上的删除级联到引用表，请使用`ON DELETE CASCADE`外键。但是，如果您要从主表中删除*所有*`TRUNCATE`行，则可以使用更好的方法来解决您的问题；看到这篇文章的结尾。

您可以[`ALTER TABLE`将默认`ON DELETE NO ACTION`外键更改为`ON DELETE CASCADE`](http://www.postgresql.org/docs/current/static/sql-altertable.html). `ON DELETE CASCADE`删除约束，然后使用修改器重新创建它。[`CREATE TABLE`](http://www.postgresql.org/docs/current/static/sql-createtable.html)有关外键约束语法的信息， 请参阅[约束文档](http://www.postgresql.org/docs/current/static/ddl-constraints.html)。

简而言之，而不是`col coltype REFERENCES fktable(fkcol)`您使用`col coltype REFERENCES fktable(fkcol) ON DELETE CASCADE`.

如果您使用`ON DELETE CASCADE`then 来获得稍微不错的性能，那么在外键列上创建索引至关重要。即使这样，对于目标表的批量删除，首先从每个外键引用表中删除通常要快得多，而不是依赖于级联。

如果您`ON UPDATE CASCADE`正在使用`ON DELETE CASCADE`.

* * *

如果要从主表中删除所有行，而不仅仅是其中的一部分，[则最好使用以下命令截断表`TRUNCATE ... CASCADE`](http://www.postgresql.org/docs/current/static/sql-truncate.html)：

> `CASCADE`
> 
> 自动截断所有具有对任何命名表或由于 CASCADE 添加到组中的表的外键引用的表。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-29T01:06:47.683

`DELETE`将外键链接到正在运行语句的表的表级联的唯一方法是`ON DELETE CASCADE`在键上设置选项，您需要运行`ALTER TABLE`语句将它们从当前值更改为此选项：

[http://www.postgresql.org/docs/current/interactive/ddl-constraints.html](http://www.postgresql.org/docs/current/interactive/ddl-constraints.html)

# django - 从 db 中的 html 访问静态文件

> ID：13114720
> 
> 赞同：0
> 
> 时间：2012-10-29T01:02:14.830
> 
> 标签：django

我将 html 存储在包含图像标签的数据库中。如何对其进行编码以便从静态目录中提取图像？

我想要相当于：

```
<img src='{% static 'images/pic1' %}'> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-29T01:17:57.747

您真的想在数据库中保留 HTML 是非常罕见的。通常，最好将其保存在静态提供的文件中。

也就是说，只需使用 RequestContext 呈现您的 html：

```
from django.template import Template, RequestContext

def get(self, request, *args,  **kwargs):
    ...
    html = HtmlModel.objects.get(name='unusual_practice').html
    template = Template(html)
    rendered_html = template.render(RequestContext(request))
    ... 
```

RequestContext 获取上下文处理器，因此您应该在其中拥有 STATIC_URL。

# java - 软键盘监听器

> ID：13114726
> 
> 赞同：0
> 
> 时间：2012-10-29T01:03:27.167
> 
> 标签：java, android, keyboard, listener, andengine

我正在使用使用设备软键盘的 AndEngine 制作游戏。

我没有使用`EditText`，而是我自己的。我正在尝试检测软键盘上的按下，我已经成功地在 AndEngine 场景中显示和隐藏键盘。

我的活动实现了`OnKeyboardActionListener`，我阅读它用作软键盘侦听器，但我不确定如何使用`this`类（活动）注册键盘。显然，此刻，里面的代码`onPress()`是没用的..

我找不到任何示例，其中大多数是指`EditText`我没有使用的 .. 可能吗？也许是服务之类的？

提前致谢。

编辑：

`KeyboardView`我正在尝试使用和自定义创建自己的键盘`Keyboard`，这样我可以做到

```
KeyboardView kbView = new KeyboardView(this,null);
kbView.setKeyboard(new Keyboard(this, R.xml.keyboard);
kbView.setOnKeyboardActionListener(new OnKeyboardActionListener() {
    ....
} 
```

有人做过吗？有效，不是吗？

谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-03T17:51:21.800

我最终创建了自己的`Keyboard`View` `Keyboard`，然后我使用了这段代码

```
CustomKeyboardView kbView = (CustomKeyboardView) findViewById(R.id.keyboard_view);
kbView.setKeyboard(new Keyboard(this, R.xml.myCustomKeyboard);
kbView.setOnKeyboardActionListener(new OnKeyboardActionListener() {
    @Override
    public void onPress(int primaryCode) {
        // A Key was pressed
    }
    ....
} 
```

并`KeyboardView`在 xml 布局中创建了一个

```
<pathToCustomKeyboardView.CustomKeyboardView
    android:id="@+id/keyboard_view"
    android:layout_width="fill_parent"
    android:layout_height="fill_parent"
    android:visibility="gone"
    android:layout_alignParentBottom="true" /> 
```

`CustomKeyboardView`仅扩展`KeyboardView`，不知道为什么，但它适用于自定义而不是原始

编辑：另外，活动扩展`SimpleLayoutGameActivity`，然后我选择了包含`CustomKeyboardView`

# python - 使用 Twisted 发送任意数据

> ID：13114728
> 
> 赞同：2
> 
> 时间：2012-10-29T01:03:40.253
> 
> 标签：python, multithreading, networking, asynchronous, twisted

我的代码示例如下。我想在程序的各个点任意发送数据。Twisted 似乎非常适合聆听然后做出反应，但我如何简单地发送数据。

```
 from twisted.internet.protocol import DatagramProtocol
    from twisted.internet import reactor
    import os

    class listener(DatagramProtocol):

        def __init__(self):

        def datagramReceived(self, data, (host, port)):
            print "GOT " + data

        def send_stuff(data):
            self.transport.write(data, (host, port))

    reactor.listenUDP(10000, listener())
    reactor.run()

    ##Some things happen in the program independent of the connection state
    ##Now how to I access send_stuff 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-29T15:39:58.197

您的示例已经包含一些发送数据的代码：

```
 def send_stuff(data):
        self.transport.write(data, (host, port)) 
```

换句话说，您的问题的答案是“call send_stuff”甚至是“call tr​​ansport.write”。

在评论中你问：

```
#Now how to I access send_stuff 
```

当您使用 Twisted 时，您如何“访问”对象或方法并没有什么特别之处。它与您可能编写的任何其他 Python 程序中的相同。使用变量、属性、容器、函数参数或任何其他工具来维护对对象的*引用。*

这里有些例子：

```
# Save the listener instance in a local variable
network = listener()
reactor.listenUDP(10000, network)

# Use the local variable to connect a GUI event to the network
MyGUIApplication().connect_button("send_button", network.send_stuff)

# Use the local variable to implement a signal handler that sends data
def report_signal(*ignored):
    reactor.callFromThread(network.send_stuff, "got sigint")
signal.signal(signal.SIGINT, report_signal)

# Pass the object referenced by the local variable to the initializer of another
# network-related object so it can save the reference and later call methods on it
# when it gets events it wants to respond to.
reactor.listenUDP(20000, AnotherDatagramProtocol(network)) 
```

等等。

# matlab - Matlab：递归获取决策树

> ID：13114737
> 
> 赞同：0
> 
> 时间：2012-10-29T01:04:32.423
> 
> 标签：matlab, recursion, machine-learning, classification, decision-tree

我正在尝试用递归实现决策树：到目前为止，我已经写了以下内容：

1.  从给定的数据集中，找到最佳拆分并返回分支，以提供更多详细信息，假设我的数据具有矩阵列的特征，最后一列表示数据 1、-1 的类别。
2.  基于 1。我有一个最佳特征与该拆分下的分支一起拆分，假设基于信息增益，我得到特征 9 是最佳拆分，特征 9 {1,3,5} 中的唯一值是9
3.  我已经想出了如何获取与每个分支相关的数据，然后我需要遍历每个分支的数据以获得下一组拆分。我在计算这种递归时遇到了麻烦。

这是我到目前为止的代码，我现在正在做的递归看起来不正确：我该如何解决这个问题？

```
function [indeces_of_node, best_split] = split_node(X_train, Y_train)

    %cell to save split information
    feature_to_split_cell = cell(size(X_train,2)-1,4);

    %iterate over features
    for feature_idx=1:(size(X_train,2) - 1)
        %get current feature
        curr_X_feature = X_train(:,feature_idx);

        %identify the unique values
        unique_values_in_feature = unique(curr_X_feature);

        H = get_entropy(Y_train); %This is actually H(X) in slides
        %temp entropy holder

        %Storage for feature element's class
        element_class = zeros(size(unique_values_in_feature,1),2);

        %conditional probability H(X|y)
        H_cond = zeros(size(unique_values_in_feature,1),1); 

        for aUnique=1:size(unique_values_in_feature,1)
            match = curr_X_feature(:,1)==unique_values_in_feature(aUnique);
            mat = Y_train(match);
            majority_class = mode(mat);
            element_class(aUnique,1) = unique_values_in_feature(aUnique);
            element_class(aUnique,2) = majority_class;
            H_cond(aUnique,1) = (length(mat)/size((curr_X_feature),1)) * get_entropy(mat);
        end

        %Getting the information gain
        IG = H - sum(H_cond);

        %Storing the IG of features
        feature_to_split_cell{feature_idx, 1} = feature_idx;
        feature_to_split_cell{feature_idx, 2} = max(IG);
        feature_to_split_cell{feature_idx, 3} = unique_values_in_feature;
        feature_to_split_cell{feature_idx, 4} = element_class;
    end
    %set feature to split zero for every fold
    feature_to_split = 0;

    %getting the max IG of the fold
    max_IG_of_fold = max([feature_to_split_cell{:,2:2}]);

    %vector to store values in the best feature
    values_of_best_feature = zeros(size(15,1));

    %Iterating over cell to get get the index and the values under best
    %splited feature.
    for i=1:length(feature_to_split_cell)
        if (max_IG_of_fold == feature_to_split_cell{i,2});
            feature_to_split = i;
            values_of_best_feature = feature_to_split_cell{i,4};
        end
    end
    display(feature_to_split)
    display(values_of_best_feature(:,1)')

    curr_X_feature = X_train(:,feature_to_split);

    best_split = feature_to_split
    indeces_of_node = unique(curr_X_feature)

    %testing
    for k = 1 : length(values_of_best_feature)
        % Condition to stop the recursion, if clases are pure then we are
        % done splitting, if both classes have save number of attributes
        % then we are done splitting.
        if (sum(values_of_best_feature(:,2) == -1) ~= sum(values_of_best_feature(:,2) == 1))
            if((sum(values_of_best_feature(:,2) == -1) ~= 0) || (sum(values_of_best_feature(:,2) == 1) ~= 0))
                mat1 = X_train(X_train(:,5)== values_of_best_feature(k),:);
                [indeces_of_node, best_split] = split_node(mat1, Y_train);
            end
        end
    end
end 
```

这是我的代码：在我的递归中看起来像一些我只深入一个分支，之后我再也不会回到其余的分支

```
feature_to_split =

     5

ans =

     1     2     3     4     5     6     7     8     9

feature_to_split =

     9

ans =

     3     5     7     8    11

feature_to_split =

    21

feature_to_split =

    21

feature_to_split =

    21

feature_to_split =

    21 
```

如果您有兴趣运行此代码：[git](https://github.com/colombounplug/matlab)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-30T05:40:38.270

经过多轮调试，我想出了答案，希望有人能从中受益：

```
for k = 1 : length(values_of_best_feature)
    % Condition to stop the recursion, if clases are pure then we are
    % done splitting, if both classes have save number of attributes
    % then we are done splitting.
    if((sum(values_of_best_feature(:,2) == -1) ~= 0) || (sum(values_of_best_feature(:,2) == 1) ~= 0))
        X_train(:,feature_to_split) = [];
        mat1 = X_train(X_train(:,5)== values_of_best_feature(k),:);
        %if(level >= curr_level)
        split_node(mat1, Y_train, 1, 2, level-1);
        %end
    end

end
return; 
```

# core-graphics - 如何摆脱 drawRect 绘制的线条在用户触摸屏幕后消失 0.05 秒？

> ID：13114739
> 
> 赞同：0
> 
> 时间：2012-10-29T01:04:56.837
> 
> 标签：core-graphics, drawrect

在此之前我有触发此事件的 touchesBegan void，但我需要显示此行，等待这么多秒，然后消失：

```
 - (void)drawRect:(CGRect)rect {
      // Drawing code

//Make a simple rectangle and fill background BLUE with half Opeque
CGContextRef context = UIGraphicsGetCurrentContext();
//[[UIColor blueColor] set];
//CGContextSetRGBFillColor(context, 0.0, 0.0, 1.0, 1.0);
//rect = CGRectMake(20, 20, 40, 40);
//CGContextFillRect(context, rect);

//Make a simple RED line from 0,0 to 100, 100 in a FRAME
//CGContextSetRGBFillColor(context, 100.0, 0.0, 0.0, 1.0);
[[UIColor redColor] set];
CGContextMoveToPoint(context, _spaceShip.center.x, _spaceShip.center.y);
CGContextAddLineToPoint( context, nextLocX, nextLocY); 
```

**使线路消失的代码**

```
 } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-07T02:31:48.183

重绘没有那条线的框架将是明显的解决方案。

以背景颜色对其进行绘制将是一个不太漂亮的解决方案，在某些情况下可能会运行得更快。

# java - Java过滤器无限循环

> ID：13114743
> 
> 赞同：3
> 
> 时间：2012-10-29T01:05:33.817
> 
> 标签：java, authentication, servlets, servlet-filters, infinite-loop

我想实现一个过滤器来进行身份验证，但不知何故它陷入了无限循环......任何想法都值得赞赏。

```
 HttpServletRequest httpRequest = (HttpServletRequest) request;
    HttpServletResponse httpResponse = (HttpServletResponse) response;

    doBeforeProcessing(request, response);

    Throwable problem = null;
    HttpSession session = httpRequest.getSession(true);
    if(session.getAttribute("userName")!=null&&session.getAttribute("userName")!=(""))
    {
        try {
            chain.doFilter(request, response);
        } catch (Throwable t) {
            // If an exception is thrown somewhere down the filter chain,
            // we still want to execute our after processing, and then
            // rethrow the problem after that.
            problem = t;
            t.printStackTrace();
        }   
    }else{
        httpResponse.sendRedirect("login.jsp");
        return;
    } 
```

调试模式下的这段代码只是无限次运行，基本上我想在用户未登录时将用户重定向到 login.jsp。任何答案表示赞赏。

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-10-29T01:22:38.780

这里，

```
httpResponse.sendRedirect("login.jsp"); 
```

您正在为目标页面发送**新**的HTTP 请求，而不是使用当前的请求。如果这个新的 HTTP 请求被映射到一个过于通用的 URL 模式，例如`/*`. 并且将执行相同的检查，并将再次重定向。等等。这是一个永无止境的故事。

`FilterChain#doFilter()`当当前请求的页面是登录页面时，您还需要添加额外的检查以执行。

```
String loginURL = httpRequest.getContextPath() + "/login.jsp";

if (httpRequest.getRequestURI().equals(loginURL)) || session.getAttribute("userName") != null) {
    chain.doFilter(request, response);
} else {
    httpResponse.sendRedirect(loginURL);
} 
```

请注意，我还删除了对空字符串作为用户名的无意义检查（但是，您要确保*您的*代码无处将空字符串设置为用户名。仅用于`null`表示未登录的用户。另请注意，我修复了重定向 URL 也是如此，因为当当前请求的 URL 位于子文件夹中时它会失败。

另一种选择是将所有这些受限页面放在一个公共子文件夹中，例如`/app`, `/secured`,`/restricted`等，然后将过滤器映射到 , , 等的 URL`/app/*`模式`/secured/*`上`/restricted/*`。如果您将登录页面保留在此文件夹之外，则在请求登录页面时不会调用过滤器。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-10-29T01:23:20.863

问题是您的过滤器正在运行`login.jsp`，并且当用户未登录时将重复重定向到自身。因为过滤器上没有排除语法，所以`url-pattern`您需要检测过滤器中的 URL，如果您已经在`login.jsp`页面上，则忽略重定向：

```
 // your auth code
} else {
    String redirect = httpRequest.getContextPath() + "/login.jsp";
    String uri = httpRequest.getRequestURI().toString();
    if (uri.endsWith(redirect)){
        // URI ends with login.jsp, just process the chain
        chain.doFilter();
    } else {
        // not on the login page and not logged in, redirect
        httpResponse.sendRedirect(redirect);
        return;
    }
} 
```

# c# - 在 WPF 中使用 MVVM 从 UserControl 冒泡事件..？

> ID：13114746
> 
> 赞同：1
> 
> 时间：2012-10-29T01:05:49.020
> 
> 标签：c#, wpf, events, mvvm, user-controls

首先，我想让大家知道我对 MVVM 概念非常陌生，并且已经非常广泛地寻找了一些关于我想要做什么的解释，但无济于事。

在我正在处理的程序中，我有一个带有几个按钮的 UserControl，它们需要控制主窗口的导航。我希望能够在主窗口中切换 3 个不同的“页面”。而不是页面，我决定（无论出于何种原因，如果这不是最好的方法，请纠正我）为每个页面使用 UserControl，并将可见性切换到正确的页面。我需要数据在切换时保持不变，所以我不相信创建用户控件的新实例会起作用。

我的问题是：如何以允许我切换可见性但以 MVVM 方式将事件从“NavBarView”冒泡到主窗口？我知道我可能完全走错了路，我很高兴就更好地实现这种导航的方式提出任何建议。

我必须使用 WPF，所以 WinForms 不是一个选项。WinForms 的透明度和自定义控件过多。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-29T04:24:57.960

如果可能，我会将“NavBar”作为主窗口的一部分，并使用它来控制表单中的子控件。我会小心嵌套用户控件。如果你能避免它，我会（关键指示是你要在其他地方重用它）。不久前，我接手了一个项目，该项目有一个主窗口，其中包含 3 个独立的高度耦合的用户控件，它们必须一起工作，这是一场噩梦。我可以让它稍微安全地工作的唯一方法是让它们都将它们的数据上下文设置为相同的视图模型。如果我必须从头开始 - 将采用单一视图的完全不同的方法。

# ajax - 基于 AJAX 的动态图像服务 - Google App Engine Python 2.7

> ID：13114748
> 
> 赞同：0
> 
> 时间：2012-10-29T01:06:17.787
> 
> 标签：ajax, image, google-app-engine, python-2.7

谷歌关于使用 GAE 动态提供图像的说明在这里：[https](https://developers.google.com/appengine/articles/python/serving_dynamic_images) ://developers.google.com/appengine/articles/python/serving_dynamic_images 唯一的问题是这种方法不使用 AJAX，我不认为它是和我期望的一样高效。

我正在尝试将 AJAX 与 GAE Python 2.7 一起使用来动态提供多个图像，但我现在专注于提供一个。

Python 服务器端代码：

```
class GetImage(webapp2.RequestHandler):
    def get(self):
        problem = Problem.all()[0]
        if(problem and problem.prompt_image):
            self.response.headers['Content-Type'] = "image/png"
            self.response.out.write(problem.prompt_image) 
```

客户端 AJAX 代码：

```
$.ajax({
    url: "/img",
    type: "POST",
    dataType: "html",
    success: function(msg){
        $("#right").append("<img>"+msg+"</img>");
    }
}); 
```

我面临的问题是我不知道如何通过 AJAX 将 blobstore 内容提供给 DOM。谁能指出我正确的方向？

谢谢！

编辑：voscausa 的解决方案似乎是在正确的轨道上。但是，它需要一个 blob_key。我的模型如下：

```
class Problem(db.Model):
    prompt_image = db.BlobProperty() 
```

我似乎无法弄清楚如何从 db.BlobProperty 获取 Blob 密钥。这可能吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-29T01:45:20.970

要使用 GET 从 blobstore 提供图像：

```
http://{{ your_appid }}.appspot.com/imgserve/{{ blob_key }} 
```

从 blobstore 提供图像的代码：

```
class ImgServe(blobstore_handlers.BlobstoreDownloadHandler):

    def get(self, blob_key):                                       

    blob_info = blobstore.BlobInfo.get(blob_key)     
    self.send_blob(blob_info, save_as=True)

app = webapp2.WSGIApplication(
                          [
                           ('/imgserve/([^/]+)?', ImgServe),
                          ], debug=True) 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-02T04:07:19.567

这个问题让我非常头疼。感谢所有人，尤其是 voscausa，他们让我走上了获得解决方案的正确道路。那里有很多旧材料，这是我使用的解决方案： [https](https://developers.google.com/appengine/docs/python/blobstore/overview#Uploading_a_Blob) ://developers.google.com/appengine/docs/python/blobstore/overview#Uploading_a_Blob （请参阅完整的示例应用程序）

```
import os
import urllib
import webapp2

from google.appengine.ext import blobstore
from google.appengine.ext.webapp import blobstore_handlers

class MainHandler(webapp2.RequestHandler):
  def get(self):
    upload_url = blobstore.create_upload_url('/upload')
    self.response.out.write('<html><body>')
    self.response.out.write('<form action="%s" method="POST" enctype="multipart/form-data">' % upload_url)
    self.response.out.write("""Upload File: <input type="file" name="file"><br> <input type="submit"
        name="submit" value="Submit"> </form></body></html>""")

class UploadHandler(blobstore_handlers.BlobstoreUploadHandler):
  def post(self):
    upload_files = self.get_uploads('file')  # 'file' is file upload field in the form
    blob_info = upload_files[0]
    self.redirect('/serve/%s' % blob_info.key())

class ServeHandler(blobstore_handlers.BlobstoreDownloadHandler):
  def get(self, resource):
    resource = str(urllib.unquote(resource))
    blob_info = blobstore.BlobInfo.get(resource)
    self.send_blob(blob_info)

app = webapp2.WSGIApplication([('/', MainHandler),
                               ('/upload', UploadHandler),
                               ('/serve/([^/]+)?', ServeHandler)],
                              debug=True) 
```

# c++ - 位域对大小/类型的影响？

> ID：13114752
> 
> 赞同：2
> 
> 时间：2012-10-29T01:06:56.420
> 
> 标签：c++

如果我编写以下代码，该代码在 Code::Blocks GCC 上编译：

```
struct ByteSize
{
   unsigned char Test:64;
}; 
```

ByteSize 结构的大小为 8。这是有道理的。但是当我访问 ByteSize 的测试时，它是否仍被视为无符号字符或其他变量？这很危险吗？我真的应该这样做吗？编译器会将 8 字节变量转换为单字节字符吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-29T03:45:44.033

浏览标准，我在 §9.6 中发现：

> 常量表达式可能大于位字段类型的对象表示（3.9）中的位数；在这种情况下，额外的位被用作填充位并且不参与位域的值表示（3.9）。

`Test`是一个位域，它不是无符号字符或其他类型。这是危险的，因为它假定 unsigned char 可以容纳 64 位或更多位。你不应该真的这样做。我没有记住所有的转换规则，但是编译器不应该将 8 字节的非字符转换为字符，除非你明确告诉它（例如使用强制转换）。

...

你在找`uint64_t`吗？

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-29T01:17:57.617

Clang 发出警告：

```
warning: size of bit-field 'Test' (64 bits) exceeds the size of its type;
         value will be truncated to 8 bits 
```

此外，如果尝试将大于 255 的值存储到其中，则会发出警告：

```
warning: implicit conversion from 'int' to 'unsigned char' changes 
         value from 256 to 0 
```

然后，尝试从中读取会产生 0。因此，即使`sizeof(ByteSize) == 8`它看起来只是将其作为无符号字符访问，并且它不希望您实际上可以在成员中存储超过 1 个字节。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-29T04:14:32.303

宣言

```
struct ByteSize
{
   unsigned char Test:64;
} 
```

是不正确的。位域应该只使用裸无符号类型。

```
struct ByteSize
{
   unsigned Test:64;
} 
```

该值是无符号的，因此不会混淆符号位。该字段被视为所选字段大小的无符号整数。

# django - 分页搜索结果 ListView

> ID：13114753
> 
> 赞同：2
> 
> 时间：2012-10-29T01:07:01.973
> 
> 标签：django, django-views

我正在使用 ListView 显示所有 NewPersons 并按 5 个结果分页。NewPersons 显示在表格中，左侧有一个搜索框。在 GET 中请求搜索“q”时。为了在搜索时更改查询集，我重写了视图的 get_queryset 方法。

我遇到的问题是，如果搜索返回的结果超过 5 个，我将按 5 个结果分页，因此它们被分页；但是，如果您单击“下一步”查看第二页，则会返回完整对象列表的第二页，而不是搜索结果的第二页。

所以我想知道如何正确分页我的搜索结果。谢谢。京东

```
class PersonListView(ListView):
model = NewPerson
template_name = 'list.html' 
paginate_by = 5

def get_queryset(self):
    """
    Get the list of items for this view. This must be an interable, and may
    be a queryset (in which qs-specific behavior will be enabled).
    """
    if 'q' in self.request.GET:
        q = self.request.GET['q']
        queryset = NewPerson.objects.filter(Q(FirstName__icontains=q) | Q(LastName__icontains=q))
    else:
        if self.queryset is not None:
            queryset = self.queryset
            if hasattr(queryset, '_clone'):
                queryset = queryset._clone()
        elif self.model is not None:
            queryset = self.model._default_manager.all()
        else:
            raise ImproperlyConfigured(u"'%s' must define 'queryset' or 'model'"
                                       % self.__class__.__name__)
    return queryset 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-18T13:23:43.140

向您添加 ListView 的模板，如下所示：

```
{% if request.GET.q %}

<a href="?search={{ request.GET.search}}&page={{ page_obj.next_page_number }}">
Next&nbsp;&raquo;
</a>

{% else %}

<a href="?page={{ page_obj.next_page_number }}">Next&nbsp;&raquo;</a>

{% endif %} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2015-03-23T23:35:19.573

或者，如果您有多个搜索词

```
 <a href="?{{ request.GET.urlencode }}&page={{ page_obj.next_page_number }}">
Next&nbsp;&raquo;
</a> 
```

# python - Tkinter 'if' 语句返回不正确的文本

> ID：13114757
> 
> 赞同：0
> 
> 时间：2012-10-29T01:08:23.730
> 
> 标签：python, tkinter

当我尝试一个数字时，它给了我`invalid`，但我只想说它`invalid`是负数还是不是数字：

```
from Tkinter import *
import tkMessageBox

class MyApp(object):
def __init__(self):
    self.root = Tk()
    self.root.wm_title("Question 7")
    self.label = Label(self.root, text="Enter weight in pounds",
                       font=('Calibri', 50))
    self.label.pack(padx=20,pady=10)
    self.labeltext = StringVar()
    self.labeltext.set("")
    Label(self.root, textvariable=self.labeltext).pack()
    self.entrytext = StringVar()
    Entry(self.root, textvariable=self.entrytext).pack()
    self.entrytext.trace('w', self.entry_changed)

    self.root.mainloop()

def entry_changed(self, a, b, c):
    s = self.entrytext.get()
    try:
        a=int(s)*4.3
        self.labeltext.set(a)
    except:
        if s=="":
           self.labeltext.set("")
    else:
        self.labeltext.set("invalid")

MyApp() 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-29T03:13:34.717

**编辑：**正如@BillTheLizard 指出的那样，您更有可能忘记`else`正确缩进您的陈述。`else:`因此，基本上忽略下面的所有内容，并在and前面添加四个空格`self.labeltext.set("invalid")`:)

您的问题在于`try/except`. 当您用作块的`else`一部分时，如果子句没有引发异常，则该块将执行。因此，在您的情况下，只要块成功完成并执行，它就会转到子句并覆盖相同的文本。`try/except``else``try``try``self.labeltext.set(a)``else`

为了完成我认为您正在尝试完成的事情，请尝试以下操作：

```
def entry_changed(self, a, b, c):
    s = self.entrytext.get()

    try:
        a = int(s)
        if a > 0:
            a *= 4.3 # -> a = a * 4.3
            self.labeltext.set(a)
    except ValueError: # Always specify what kind of exception you are catching
        if s == "":
            self.labeltext.set("")
        else:
            self.labeltext.set("invalid") 
```

我删除了，`else`因为听起来你想要任何不是数字或 < 0 的东西来 return `invalid`。您以前`except`处理空字符串的方式不同，因此可以根据需要进行调整。

# python - 如何在 Python 中创建与以下内容匹配的正则表达式？

> ID：13114760
> 
> 赞同：3
> 
> 时间：2012-10-29T01:08:54.980
> 
> 标签：python, regex

假设我有很多这样的字符串：

```
<a id="1.1">
<a id="1.1.1">
<a id="1.1.2">
<a id="1.1.3">
<a id="1.2">
<a id="1.2.1"> 
```

我想制作一个只捕获带有“#.#”的正则表达式，所以我试图匹配它，使其以双引号结尾，但我没有得到匹配。

```
re.compile("[1-9].[1-9]\"") 
```

我期望的结果输出是一个列表，其中包含：

```
 <a id="1.1">
  <a id="1.2"> 
```

我究竟做错了什么？（请建议是否有比我使用的方法更好的匹配方法。）

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-29T01:12:00.363

在两边加上双引号：`r'"\d\.\d"'`.

例如，

```
In [109]: import re

In [110]: text = '''<a id="1.1">
<a id="1.1.1">
<a id="1.1.2">
<a id="1.1.3">
<a id="1.2">
<a id="1.2.1">'''.splitlines()

In [111]: [line for line in text if re.search(r'"\d\.\d"', line)]
Out[111]: ['<a id="1.1">', '<a id="1.2">'] 
```

# wpf - 媒体播放器解决方案

> ID：13114761
> 
> 赞同：1
> 
> 时间：2012-10-29T01:09:06.227
> 
> 标签：wpf, mediaelement, crash

我们需要开发一个应用程序，它可以同时播放六个视频。我们首先开发一个测试项目。操作系统：Windows 7 64bit 平台：.net framework 4.0 语言：C# 应用程序类型：WPF CPU：i5-3450 3.10GHz RAM：16GB

这是一个非常简单的项目。循环固定文件夹并随机选择一个视频文件，然后使用 MediaElement 播放。这个应用程序会运行没有任何问题，但两三个小时后它会崩溃并出现异常：AppCrash Module:KERNELBASE.dll 但无法捕获任何异常，只是崩溃。

有没有人有同样的问题？有什么解决办法吗？

如果需要测试项目，请告诉我。谢谢

# wpf - 绑定到 WPF 自定义控件依赖项属性

> ID：13114763
> 
> 赞同：2
> 
> 时间：2012-10-29T01:09:23.513
> 
> 标签：wpf, binding, custom-controls, dependency-properties

我很难绑定 wpf 自定义控件的属性。这是我的 xaml 自定义数据网格单元格的摘录，其数据上下文是列表（日期）：

```
<DataGridTemplateColumn Header="Start" MinWidth="100">
                    <DataGridTemplateColumn.CellTemplate>
                        <DataTemplate>
                            <timePicker:CustomTimePicker selectedTime="{Binding Path=startDate}" MinWidth="100" />
                        </DataTemplate>
                    </DataGridTemplateColumn.CellTemplate> 
```

如您所见，我尝试将我的 List(Of Date) 的 startDate 属性绑定到我的自定义 wpf 控件 TimePicker 中的 selectedTime 依赖项属性。这是具有 selectedDate 依赖属性的 customtimepicker 类的定义：

```
Public Class CustomTimePicker

Private _hours As String
Private _minutes As String

Private _hoursChoices As List(Of String)
Private _minutesChoices As List(Of String)

Public Shared selectedTimeProperty As DependencyProperty = DependencyProperty.Register("selectedTime", GetType(Date), GetType(CustomTimePicker), New FrameworkPropertyMetadata(DateTime.MinValue, FrameworkPropertyMetadataOptions.BindsTwoWayByDefault, New PropertyChangedCallback(AddressOf CustomTimePicker.OnSelectedTimeChanged)))

Public Property selectedTime() As Date
    Get
        Return DirectCast(GetValue(selectedTimeProperty), Date)
    End Get
    Set(value As Date)
        SetValue(selectedTimeProperty, value)
    End Set
End Property

Public Property hours As String
    Get
        Return _hours
    End Get
    Set(value As String)
        _hours = value
    End Set
End Property

Public Property minutes As String
    Get
        Return _minutes
    End Get
    Set(value As String)
        _minutes = value
    End Set
End Property

Public Property hoursChoices As List(Of String)
    Get
        Return _hoursChoices
    End Get
    Set(value As List(Of String))
        _hoursChoices = value
    End Set
End Property

Public Property minutesChoices As List(Of String)
    Get
        Return _minutesChoices
    End Get
    Set(value As List(Of String))
        _minutesChoices = value
    End Set
End Property

Protected Shared Sub OnSelectedTimeChanged(ByVal obj As DependencyObject, ByVal args As DependencyPropertyChangedEventArgs)
    Console.WriteLine("@@@@@@@")
    Console.WriteLine(CType(obj, CustomTimePicker).selectedTime.ToString)
End Sub

Protected Shared Sub OnCoerce()

End Sub

Protected Sub OnSelectedHourChanged(obj As Object, e As System.Windows.Controls.SelectionChangedEventArgs) Handles hourComboBox.SelectionChanged
    Dim minute As Integer = 0

    Dim result As Date = New Date(2000, 1, 1, hourComboBox.SelectedIndex, selectedTime.Minute, 0)
    selectedTime = result

    Console.WriteLine("---")
    Console.WriteLine(result.ToString)
    Console.WriteLine(selectedTime.ToString)

End Sub

Protected Sub OnSelectedMinuteChanged(obj As Object, e As System.Windows.Controls.SelectionChangedEventArgs) Handles minutesComboBox.SelectionChanged
    Dim minute As Integer = 0
    Console.WriteLine("bbbbbb")
    Console.WriteLine(selectedTime.ToString)
    Select Case minutesComboBox.SelectedIndex
        Case 0
            minute = 0
        Case 1
            minute = 15
        Case 2
            minute = 30
        Case 3
            minute = 45
    End Select

    Dim result As Date = New Date(2000, 1, 1, selectedTime.Hour, minute, 0)
    selectedTime = result
End Sub

Protected Overrides Sub OnInitialized(e As System.EventArgs)
    MyBase.OnInitialized(e)
    _hoursChoices = New List(Of String)
    _minutesChoices = New List(Of String)

    Console.WriteLine("aaaaaaa")
    Console.WriteLine(selectedTime.ToString)

    For i As Integer = 0 To 23
        _hoursChoices.Add(i.ToString)
    Next
    _minutesChoices.Add("00")
    _minutesChoices.Add("15")
    _minutesChoices.Add("30")
    _minutesChoices.Add("45")

    hourComboBox.ItemsSource = hoursChoices
    hourComboBox.DisplayMemberPath = hours
    hourComboBox.SelectedValuePath = hours
    hourComboBox.SelectedValue = hours

    minutesComboBox.ItemsSource = minutesChoices
    minutesComboBox.DisplayMemberPath = minutes
    minutesComboBox.SelectedValuePath = minutes
    minutesComboBox.SelectedValue = minutes

    Select Case selectedTime.Minute
        Case 0 To 14
            minutesComboBox.SelectedIndex = 0
        Case 15 To 29
            minutesComboBox.SelectedIndex = 1
        Case 30 To 44
            minutesComboBox.SelectedIndex = 2
        Case 45 To 59
            minutesComboBox.SelectedIndex = 3
    End Select

    hourComboBox.SelectedIndex = selectedTime.Hour

End Sub 
```

结束类

如果我更改 selectedTime 属性，例如

```
selectedTime = New Date(2000,1,1,23,59,0) 
```

数据网格中的值不会改变。反过来也是同样的问题。我没有得到 wpf 控件的 startTime 值。

即使应用程序编译并运行无错误，绑定似乎也确实不起作用。

有人可以帮助我吗？

亲切的问候

# python - 直方图上的泊松分布

> ID：13114765
> 
> 赞同：0
> 
> 时间：2012-10-29T01:09:44.650
> 
> 标签：python, graph, plot, matplotlib, distribution

该程序应该在绘图图上放置泊松分布。但是当我运行它时，什么也没有出现。我试图重新排列代码，但它告诉我 x 和 y 不在同一个维度......

有人能弄清楚吗？

```
from numpy import *
from scipy.special import gamma
import pylab
import matplotlib.pyplot
mu = 70
counts = range(45,101,1)
for counts in range(46,96,1):

p = exp(-mu) * mu**counts / gamma(counts +1)
pylab.plot(counts,p)

pylab.show() 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-29T01:39:13.857

您正在使用 gamma 函数...我相信您应该改用阶乘，因为泊松分布是`P = e^(-L) * L^k / k!`

您可能已经从 Gamma 分布的表达式中获取了 gamma 函数，它与 Poisson 分布有关。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-29T01:54:56.337

您正在使用“x”变量作为迭代变量：

```
counts = range(45,101,1)
print "'counts' before for loop:",counts
for counts in range(46,96,1):
    pass
print "'counts' after for loop:",counts 
```

计数已重新分配到 95

# windows-8 - 是否有免费的方式来分发免费的 Windows 8 应用程序？

> ID：13114769
> 
> 赞同：6
> 
> 时间：2012-10-29T01:10:32.253
> 
> 标签：windows-8, open-source, windows-store-apps, windows-store, sideloading

我正在考虑开发一个免费的非企业 Windows 8 风格的应用程序。我希望能够在不向我自己或用户收取任何费用的情况下分发它。（请注意我不是在询问 Windows 7 风格的桌面应用程序。）

从[Microsoft Community](http://answers.microsoft.com/en-us/windows/forum/windows_cp-windows_store/will-windows-8-allow-developers-to-post-metro-apps/9f28242b-4943-4ca2-bf63-d6f9b3a5b35f)看来，分发这些类型的应用程序的唯一方法是使用 Windows 应用商店。事实上，自从删除了*Metro*一词后，在我看来，替代短语之一是*Windows Store Apps*，这显然暗示了与 Windows Store 的紧密关联。

该商店的许可协议似乎支持分发免费应用程序。但是，我也读到没有（永久）免费的方式来使用商店作为开发人员。（例如，参见[这个](http://msdn.microsoft.com/en-au/library/windows/apps/br230836.aspx)。）微软似乎确实推销了一些“免费”方法来做到这一点，但它们似乎是第一年免费订阅，在随后的几年里仍然需要信用卡详细信息。

我已经查看并考虑了以下有关此问题的 Stack Overflow 问题：

1.  [如何在没有 Windows Store 的情况下分发已编译的 Windows 8 Metro 应用程序？](https://stackoverflow.com/q/7493090/238753)
    *   这个问题似乎是在商店可用之前使用预发布的 Windows 8 的上下文中的。
2.  [如何在不提交到商店的情况下安装 Windows 8 应用程序](https://stackoverflow.com/q/12512196/238753)
    *   这似乎与企业用户和应用程序有关。

如何分发免费的 Windows 8 应用程序而无需为 Windows 应用商店开发者帐户付费？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-10-29T02:22:36.973

你不能。**在 Windows 应用商店**中分发应用程序需要商店帐户；但是，有些程序会吸收这笔费用（个人开发人员每年 49 美元），例如 MSDN 订阅和 BizSpark。

侧载（如您提供的第一个链接中所述）仍然是可能的，但需要（并自动提供）一个免费的“开发者”帐户来运行它。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-10-29T21:26:22.517

有点。

你要做的是进入商店菜单，然后点击“构建商店包”。当它询问您是否要为商店构建一些东西时，您点击***no***。

您将看到一个包含 .sh1 脚本的目录，然后您可以使用它来安装应用程序。

缺点是，这需要企业 Windows 或（免费）开发人员许可证才能安装。所以一般人群不够用。

现在，我应该指出，`.EXE`旧的方式仍然可以正常工作。如果您指的是现代 UI 应用程序，那么*只有*一个障碍。

# .net - 上传前的 S3 .NET SDK 哈希？

> ID：13114772
> 
> 赞同：0
> 
> 时间：2012-10-29T01:11:21.390
> 
> 标签：.net, amazon-s3

当我使用 S3 上传文件时，SDK 是否会对文件进行哈希处理并在上传之前确保当前版本不同？我想在我的代码中使用 MD5 函数，但如果它已经完成，我不想浪费时间两次散列大文件，但我也不想浪费时间上传已经存在的文件。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-11-06T21:50:37.000

如果您指的是适用于 .NET 的 AWS 开发工具包，那么在您上传对象时，它当前不会对 Amazon S3 进行检查。

# c++ - 最简单的冒泡排序

> ID：13114773
> 
> 赞同：-1
> 
> 时间：2012-10-29T01:11:29.283
> 
> 标签：c++, algorithm, sorting

假设我想对一个大小为 n 的整数数组进行排序。假设我有交换方法

我的这种冒泡排序实现正确吗？

```
for(int i=0;i<n;i++)
 for (int j=0;j<n;j++)
  if (array[i]<array[j]) swap(array[i], array[j]); 
```

（我只是想知道它是否正确，我不在乎效率低下）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-29T02:47:23.697

是的，这是正确的。证明可以按照以下思路构建。

总是当 j 循环（内部）完成时（所以 j=n，i 将作为下一个操作增加），然后 a[i] 是最大值，a[i] 之前的部分按升序排列（下面的证明） . 因此，当外部循环即将以 i=n-1 完成时，a[i] 为最大值，并且直到索引 i 的项目都是有序的（并且因为前面的项目都没有大于最大值）所以整个数组被订购。

要证明在 j 循环之后 a[i] 始终是最大值很简单：当 j 循环时 i 没有变化，如果 j 遇到大于 a[i] 的项目，那么将其带到 a[i] 并且因为j 扫描了整个数组，它不可能包含大于 a[i] 的元素。

证明直到 i 的项目是有序的是完全归纳。我们将使用上面关于 a[i] 为最大值的陈述。
对于 i=0 微不足道的（没有前面的元素）。a[0] 是最大值并且“它是有序的”。
i=1（只是为了好玩）：1 个项目到了 a[0]（不要关心它的值，它不能大于 max），并且 a[1] 是最大值。所以 a[0..1] 排序。

现在，如果在以 i=k 结束的 j 循环之后满足这些命题，则会发生以下情况：
i <- k+1
假设当前项 a[i]=q。
j 将 a[] 扫描到 k。由于 k 是最大值，它将被交换为 i。超出我的项目还没有被打扰。所以基本上 max 向上移动了一个，所以一个项目，特别是 q 被添加到数组的第一部分。让我们看看如何：
j 扫描到 max 的排序部分，直到它在索引 m 处找到大于 a[i] 的项目。（它会在最坏的情况下找到 a[i-1]。）直到 m 的项目被排序。现在将在此处插入 a[i]，范围 [m..i-1] 中的所有项目将向上移动一个。由于 m 是插入 a[i] 的正确位置，因此 a[0..i] 将在移动后排序。现在唯一要证明的是 [m..i] 中的 j 循环确实执行了移动：
开始时序列 a[i],a[m..i-1] 是有序的，因此此区间内的每次比较都会触发交换：a[i] 始终是 a[j..i] 中最小的部分。交换（i 与 j）将使第 j 个位于正确的位置（前面的最小项目），并且 j 进入间隔的剩余部分。
所以 j 达到 i=k+1 （这里没有交换）并且 a[k+1] 是最大的，所以在这个 j 循环中没有更多的交换，所以最后 a[0..k+1] 被排序。

所以最后，如果这些论点对于 i=k 成立，那么它们在 j 循环之后对于 i=k+1 成立。我们确定它们在 1 个 j-loop 之后对于 i=0 成立，并且从 i-loop 表明总共会有 n 个 j-loop 所以这些论文对于 i=n-1 成立，这正是我们所承诺的在第一段中证明。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-29T01:18:43.120

降序排序是不正确的..

想一想`array = [2, 1]`，它输出`[1, 2]`

您可以通过更改`j=0`为`j=i+1`

```
for(int i=0;i<n;i++)
 for (int j=i+1;j<n;j++)
  if (array[i]<array[j]) swap(array[i], array[j]); 
```

**但是对于*升序排序***是正确的。

这里简单证明：

假设在我们有循环输出的每一步之后`a[0] <= a[1] <= ... <= a[i-1] <= a[i]`，我们称之为**假设_i**

**假设_i**是对的`i = 0`

如果**假设_i对于***0 <= i < M <= N*是正确的。什么时候`i = M`，我们有`a[0] <= a[1] <= ... <= a[M - 2] <= a[M - 1]`。`j`在从 0 到 M 的内循环之后，我们得到`a[0] <= a[1] <= ... <= a[M - 2] <= a[M - 1] <= a[M]`. 当从 M+1 继续内循环`j`到 N - 1 时，a[M] 会变得更大。所以**假设_i**也适用于`i = M`.

# javascript - 隐藏没有 CSS 的元素

> ID：13114777
> 
> 赞同：-1
> 
> 时间：2012-10-29T01:13:25.850
> 
> 标签：javascript, css

如果 CSS 被禁用，但 JavaScript 不是，我如何隐藏元素（在我的情况下是文件输入字段）？以下都不起作用，尽管它们在启用 CSS 时都起作用：

```
element.style.display = 'none';
element.style.visibility = 'hidden';
element.hidden = 'hidden';
element.hidden = true;
element.setAttribute('hidden','hidden');
element.setAttribute('hidden',true); 
```

据我所知，当 CSS 被禁用时唯一可以隐藏的是隐藏的输入字段。也许这可能会导致解决方案。任何帮助表示赞赏，谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-29T01:18:00.830

因为它是一个`input`元素，您可以将其更改`type`为隐藏：

```
element.type = "hidden"; 
```

但请注意，这在某些 IE 版本中不起作用。在这种情况下，我认为您需要创建一个新元素，为其指定`hidden`类型并交换它们。

***演示：http:*** [//jsfiddle.net/gLvRz/](http://jsfiddle.net/gLvRz/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-29T03:14:35.677

我想你可以滥用这个`AREA`元素来隐藏它里面的东西。

```
//hide element
var hiddenContainer = document.createElement("AREA");
element.parentNode.insertBefore(hiddenContainer, element);
hiddenContainer.appendChild(element);

//show element
hiddenContainer.parentNode.insertBefore(element, hiddenContainer); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-29T01:17:04.390

您可以从 DOM 中删除元素：

```
element.parentNode.removeChild(element); 
```

如果您想稍后恢复它，您可以将其 HTML 代码（或对元素本身的引用）存储在一个变量中。对于表单字段，可能还需要存储其值，然后在恢复元素本身后恢复该值。

此外，考虑使用[`hidden`HTML5-attribute](https://developer.mozilla.org/en-US/docs/HTML/Global_attributes#attr-hidden)，尽管浏览器对它的支持可能还不是太广泛（并且属性本身可能从 HTML 标准中删除）。

# oracle - 在存储过程（oracle）中输出单行

> ID：13114778
> 
> 赞同：2
> 
> 时间：2012-10-29T01:14:00.753
> 
> 标签：oracle, procedure

我正在尝试遵循[http://dba-oracle.com/t_pl_sql_plsql_select_into_clause.htm上的示例](http://dba-oracle.com/t_pl_sql_plsql_select_into_clause.htm)

但是当我这样做时

```
create or replace PROCEDURE age
is
declare
info movie%rowtype;
BEGIN
dbms_output.enable();
select * into info from movie where mo_id=1;

dbms_output.put_line('The name of the product is ' || info.mo_id);

END age; 
```

/

它给出了几个错误：

*错误（4,1）：PLS-00103：在预期以下情况之一时遇到符号“DECLARE”：开始函数杂注过程子类型类型当前游标删除存在先前的外部语言符号“开始”被替换为“声明”以继续.*

和

*错误（14,8）：PLS-00103：在预期以下情况之一时遇到符号“文件结尾”：（开始案例声明结束异常退出 goto if loop mod null pragma raise return select update while with <<继续关闭当前删除获取锁插入打开回滚保存点设置sql执行提交forall合并管道清除*

它出什么问题了？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-29T03:38:16.667

尝试以下操作，您不需要在过程中声明。

```
create or replace PROCEDURE
age
is
info movie%rowtype;
BEGIN
--dbms_output.enable();
select * into info from movie where mo_id=1;

dbms_output.put_line('The name of the product is ' || info.mo_id);

END age;
/ 
```

并执行您可以执行的程序

```
exec age 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-29T06:13:48.747

您的代码中有几件事需要查看：首先。正如@Polppan 已经提到的，`DECLARE`从存储过程中删除关键字。没有必要。但是，当您编写匿名 PL/SQL 块时，您将需要它。第二。如果您`dbms_output.enable()`在过程中使用然后显示行，我假设您为此使用 sql*plus，您将需要调用，`dbms_output.get_lines()`否则它不会给您想要的结果。因此，为了简化使用`set serveroutput on`sql*plus 的命令来启用输出。`dbms_output.enable()`并且不要混合`setserveroutput on`使用它们中的任何一个。不是都。这是一个例子：

```
SQL> CREATE OR REPLACE PROCEDURE Print_data
  2  is
  3    l_var_1 varchar2(101);
  4  BEGIN
  5    select 'Some data'
  6      into l_var_1
  7      from dual;
  8    dbms_output.put_line(l_var_1);
  9  END;
 10  /

Procedure created

SQL> set serveroutput on;
SQL> exec print_data;

Some data

PL/SQL procedure successfully completed

SQL> 
```

# scala - 从 Specs2 调用时发生 ClassCastException

> ID：13114779
> 
> 赞同：1
> 
> 时间：2012-10-29T01:14:01.973
> 
> 标签：scala, playframework, specs2

我正在 play_2.9.1-2.0.3 上构建一个应用程序**并**使用**specs2_2.9.1-1.7.1**（与 play 捆绑在一起）进行测试。我有一个看起来像这样的动作：

```
def createPoll() = Action { request =>
    request.body.asJson.map {jsonBod =>
        Poll.fromJsonValue(jsonBod).fold(
            thrown => CommonResponses.invalidCreatePollRequest(this),
            poll => (CommonResponses.createdPoll(poll, this))
    )}.getOrElse(CommonResponses.expectingJson(this))
} 
```

当我从 curl 向它发送消息时，这可以按预期工作，但是在我的 specs2 测试中，我得到了这个异常：

```
ClassCastException: java.lang.String cannot be cast to play.api.mvc.AnyContent(PollController.scala:16) 
```

其中第 16 行是：

```
def createPoll() = Action { request => 
```

这是测试的相关部分：

```
 routeAndCall(
        FakeRequest(
            PUT, controllers.routes.PollController.createPoll().url,
            FakeHeaders(),
            "{\"userId\":\"%s\",\"title\":\"%s\"}".format(userId, title)
        ).withHeaders(("Content-type", "application/json"))
    ) 
```

如果我将`createPoll`def 更改为：`def createPoll() = Action(parse.tolerantText) {`

然后我可以通过 specs2 测试使其工作。

**有谁知道我做错了什么？**理想情况下，我想使用 parse.json 正文解析器，但我希望能够使用规范而不仅仅是 curl 进行测试。谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-29T01:44:06.043

Action 上的 apply 方法采用`Request[AnyContent] => Result`. FakeRequest 的参数化类型是第四个参数（请求体）的类型。考虑到这些，问题就很明显了：你试图将 a`Request[String]`作为输入传递给一个接受 a 的函数`Request[AnyContent]`。因此类转换异常。您需要做的就是创建一个带有`AnyContentAsJson`（A 的子类型`AnyContent`）的 FakeRequest，如下所示：

```
import play.api.libs.json.Json.parse

FakeRequest(
        PUT, controllers.routes.PollController.createPoll().url,
        FakeHeaders(),
        AnyContentAsJson(parse("{\"userId\":\"%s\",\"title\":\"%s\"}".format(userId, title)))
    ) 
```

# javascript - 如何在 Bower 中注册本地 git 包？

> ID：13114781
> 
> 赞同：62
> 
> 时间：2012-10-29T01:14:17.903
> 
> 标签：javascript, git, package, bower, bower-register

如何在 bower 中注册本地 git 包？

我当前的component.json如下

```
{
  "name": "myproject",
  "version": "1.0.0",
  "dependencies": {
    "jquery": "1.8.0",
    "twitter/bootstrap": "2.1.1"
  }
} 
```

但是，我还想添加一个我创建的包，`C:/mypackage`它是一个带有版本标记的 git 存储库。当我这样做`bower install --save C:/mypackage`时，它会正确地将其添加到项目中，但不会将其添加到我的 component.json 中。

我正在尝试`bower register mypackage C:/mypackage`，但它一直在给我

```
bower error Incorrect format 
```

我究竟做错了什么？

* * *

## 回答 #1

> 赞同：71
> 
> 时间：2013-01-28T21:40:00.293

## 选项 1：公共凉亭注册

Bower 主要用于以“非主见”的方式共享公共（客户端）代码。那么，主要用例是拥有一个可公开访问的存储库（在 GitHub 上），该`register`存储库具有名称和 git 存储库 url。我自己就是这样做的：

```
bower register linksoup git://github.com/automatonic/linksoup 
```

这只是告诉 bower 服务器，当你`install linksoup`去获取`git://github.com/automatonic/linksoup`存储库中的代码时，将它放在本地项目的`component`目录中。

如果这是您想要做的，那么只需在 github/etc. 上设置一个存储库，将您的代码推送到那里，然后`register`使用生成的存储库信息。

## 选项 2：私有依赖

有很多理由不将您的代码发布到可公开访问的存储库中。它可能不是开源的，等等。如果您的`mypackage`代码不打算公开，那么您可能不应该`register`在公共凉亭服务器上使用它...此外，即使您可以`register`使用本地目录，它也只能在你的机器......这违背了通过凉亭共享代码的目的。

如果您只想让 bower 管理本地的私有依赖项，那么我将重复[blockhead 的](https://stackoverflow.com/a/13807081/8668)解决方案：

```
{
  "name": "myproject",
  "version": "1.0.0",
  "dependencies": {
    "jquery": "1.8.0",
    "twitter/bootstrap": "2.1.1",
    "mypackage": "file:///path/to/mypackage/.git"
  }
} 
```

这只是说`myproject`需要`mypackage`，并使用 git clone 来检索它。我的猜测是这可以使用 git 可以理解的任何东西（包括本地存储库）。但是您应该注意，这可能会给其他任何处理此代码而无法访问您的本地路径的人带来问题。

## 最佳的揣测

在我看来，您可能已经假设这`bower register`是一个本地操作（告诉 bower 如何通过某种本地注册表查找依赖项）。据我所知，这只是远程和公共注册，这就是不支持的原因。

您可能还在寻找一种方法来[使用 npm 进行链接操作](https://npmjs.org/doc/link.html)。也就是说，在依赖模块上工作，而不总是让您的开发周期包含发布。

关于涉及多少人以及您试图完成的工作的一些细节将有助于更有针对性的答案。

* * *

## 回答 #2

> 赞同：53
> 
> 时间：2012-12-10T18:37:43.160

您可以按如下方式添加任何 git 存储库：

```
{
  "name": "myproject",
  "version": "1.0.0",
  "dependencies": {
    "jquery": "1.8.0",
    "twitter/bootstrap": "2.1.1",
    "myrepo":"git://myrepo.com/myrepo"
  }
} 
```

* * *

## 回答 #3

> 赞同：33
> 
> 时间：2013-12-07T18:29:34.290

您可以使用`bower link`：

> 链接功能允许开发人员轻松测试他们的包。链接是一个两步过程。
> 
> 在项目文件夹中使用`bower link`将创建一个全局链接。然后，在其他一些包中，`bower link <pkg>`将在 components 文件夹中创建一个指向先前创建的链接的链接。
> 
> 这允许轻松测试包，因为更改将立即反映。请注意，bower 不会获取链接的包依赖项。
> 
> Bower 将在安装/更新时覆盖链接。

* * *

## 回答 #4

> 赞同：24
> 
> 时间：2013-11-11T20:02:25.133

最大的想法[`bower`](https://github.com/bower/bower)是轻松共享项目的依赖项。所以**使用本地 repo 应该仅限于 testing**。

一旦你理解了这一点，你就应该知道，`register`为了将它用作依赖项，你的包并不是严格必要的。

这是因为 bower 依赖可以指定*版本*、*文件夹*或*包*。所以**你可以使用本地存储库**。

## 定义为 bower 包

首先，您需要将[依赖项定义为 bower 包](https://github.com/bower/bower#defining-a-package)：

```
# create the bower package
cd /path/to/you-need-me
bower init
# answer questions… 
```

## 添加为项目依赖项

然后在您的主项目中，需要`you-need-me`依赖项，编辑`bower.json`文件以添加（或扩展）：

```
 "dependencies": {
    …
    "you-need-me":  "file:///path/to/you-need-me/.git/"
    "you-need-me-windows":  "C:/path/to/you-need-me-windows/.git/"
  } 
```

因此，您不提供版本，而是提供本地`git`端点，即**subdirectory`.git/`**。

## 安装依赖

在 man 项目中安装 bower 依赖项：

```
cd /path/to/main-project/
bower install 
```

### 失败

```
bower you-need-me#*              ENOTFOUND Package /path/to/you-need-me/ not found 
```

再次检查您的路径并确保您指向`.git/`依赖项的目录。

### 成功

你应该得到类似的东西：

```
bower you-need-me#*             not-cached file:///path/to/you-need-me/.git/#*
bower you-need-me#*                resolve file:///path/to/you-need-me/.git/#*
bower you-need-me#*               checkout master
bower you-need-me#*               resolved file:///path/to/you-need-me/.git/#b18c753c6f
bower you-need-me#*                install you-need-me#b18c753c6f 
```

写一篇博客文章：[在注册包之前在本地测试 bower.json](http://blog.edouard-lopez.com/testing-bower-dot-json-locally-before-registering-package/)。

# makefile - 为多个目标编译

> ID：13114784
> 
> 赞同：0
> 
> 时间：2012-10-29T01:14:59.190
> 
> 标签：makefile, gnu-make

我想分别使用 g++ 和 mingw 将我的程序编译到 linux 和 windows。编译之间的唯一区别是使用的编译器和输出文件名。

单个`make`命令应生成两个输出文件。在生成文件中尽可能少地重复实现这一目标的最佳方法是什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-29T01:45:40.267

这个怎么样：

```
linux-name: CC:=g++
windows-name: CC:=mingw

linux-name windows-name:
    $(CC) whatever -o $@ 
```

**编辑：**

我上面写的只是makefile的*新*部分；我假设 makefile 的其余部分是隐含的。更明确地说：

```
all: linux-name windows-name

linux-name: CC:=g++
windows-name: CC:=mingw

linux-name windows-name: foo.o bar.o baz.o SomethingElse
    $(CC) $(CCFLAGS) whatever $^ -o $@

%.o: %.cc
    $(CC) $(CFLAGS) -I$(INC_DIR) whatever -c $< -o $@

SomethingElse:
    build somehow 
```

# java - 更改文件编码后 Windows 弄错了

> ID：13114785
> 
> 赞同：1
> 
> 时间：2012-10-29T01:15:06.293
> 
> 标签：java, encoding

我想将文件的编码形式更改为另一个（不管哪个）。但是，当我打开带有结果的文件（文件 w.txt）时，里面就乱了。Windows 不理解它正确。

我应该输入什么结果编码（args [1]），这样它才能被 Windows 记事本正确解释？

```
 import java.io.*;
import java.nio.charset.Charset;

public class Kodowanie {

    public static void main(String[] args) throws IOException {
        args = new String[2];
        args[0] = "plik.txt";
        args[1] = "ISO8859_2";
        String linia, s = "";
        File f = new File(args[0]), f1 = new File("w.txt");
        FileInputStream fis = new FileInputStream(f);
        InputStreamReader isr = new InputStreamReader(fis,
                Charset.forName("UTF-8"));
        BufferedReader in = new BufferedReader(isr);

        FileOutputStream fos = new FileOutputStream(f1);
        OutputStreamWriter osw = new OutputStreamWriter(fos,
                Charset.forName(args[1]));
        BufferedWriter out = new BufferedWriter(osw);
        while ((linia = in.readLine()) != null) {
            out.write(linia);
            out.newLine();
        }
        out.close();
        in.close();

    }

} 
```

输入：

```
Ala
ma 
Kota 
```

输出：

```
?Ala
ma 
Kota 
```

为什么有一个'？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-29T01:32:20.427

US-ASCII 是 unicode 的一个子集（顺便说一句，它很小）。您正在读取 UTF-8 格式的文件，然后将其写回 US-ASCII 格式。因此，当给定的 UTF 字符不能用缩减的 7 位 US-ASCII 子集表示时，您的编码器将不得不做出决定。经典地，这被一个默认字符取代，比如？。

考虑到 UTF-8 中的字符在许多情况下是多字节的，而 US-ASCII 只有 7 位长。这意味着字节 127 以上的所有 unicode 字符都不能用 US-ASCII 表示。这可以解释文件转换后您看到的问号。

我已经回答了一个类似的问题[Reading Strange Unicode Characters in Java](https://stackoverflow.com/a/9889800/697630)。也许它有帮助。

我还建议您阅读[每个软件开发人员绝对、肯定必须了解 Unicode 和字符集的绝对最低要求（没有借口！）](http://www.joelonsoftware.com/articles/Unicode.html)。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-29T01:18:52.753

Windows 中的默认编码是 Cp1252。

# sql - Postgresql：触发函数以使其可更新，如可更新视图

> ID：13114787
> 
> 赞同：1
> 
> 时间：2012-10-29T01:15:11.043
> 
> 标签：sql, postgresql, triggers

我在 PostgreSQL 中创建了一个函数，该函数适用于几个表，并根据传递的参数组合结果。它工作得很好，从客户的角度来看，它看起来像一个带有附加参数的普通表（即，它可以像通常的选择查询一样被查询）。

为了继续隐藏有关基础数据的信息，我还想创建一种写入表的方法。我想我会创建一个触发器来执行一个基本上会更新相关基础表的函数。但是，我无法在函数上创建触发器。除了表之外，还有什么方法可以在其他任何东西上创建触发器吗？我也在考虑使用视图（因为我相信可以在视图上创建触发器），但是我需要将函数更改为不适合的视图，因为我无法传入一个参数。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-29T01:22:59.493

您似乎想要在函数上创建等效的可更新视图，您可以在其中`INSERT`或`UPDATE`在`DELETE`函数上。这是不可能的。

如果您要提供类似函数的接口，请同时提供用于数据修改的函数。

或者，将您的函数转换为视图。允许他们使用`WHERE`子句来限制视图，而不是将参数传递给函数。然后使用视图触发器（PostgreSQL 9.1 及更高版本）或规则（PostgreSQL 9.0 及更低版本，如果可能，请勿在较新版本上使用）启用`INSERT`,`UPDATE`和`DELETE`视图。见[`CREATE TRIGGER`](http://www.postgresql.org/docs/current/static/sql-createtrigger.html)和[`CREATE RULE`](http://www.postgresql.org/docs/current/static/sql-createrule.html)。规则很棘手，因此请根据偏好使用视图触发器。

PostgreSQL 非常聪明地将过滤器下推到视图中，因此`SELECT * FROM some_view WHERE some_col = 4`通常不会扫描整个视图然后过滤它。它会将子句“推送”`WHERE`到视图的查询中并执行它。因此，如果您的观点是`SELECT * FROM some_table WHERE NOT is_archived`PostgreSQL 实际上会执行相当于`SELECT * FROM some_table WHERE (NOT is_archived) AND some_col = 4`. 因此，在查询仅几行与所有行的视图时，您可以并且经常确实获得完全不同的查询计划。[在我不久前写的一篇文章中有一个例子](http://blog.ringerc.id.au/2012/07/postgresql-rocks-and-so-does.html)。

仅将您的函数包装在视图中不会很好地工作，除非它是一个 SQL 函数，`STABLE`而不是`IMMUTABLE`（因此它可以被内联）。您最好从函数中提取 SQL 并基于相同的 SQL 创建视图，而不是基于函数自身。

如果您的函数参数未在简单`WHERE`子句中使用，那么它会变得更加复杂，因为无法像在函数中那样将参数传递到视图中。您可以在参数的所有可能值上创建一个视图，然后对其进行过滤，但是如果 Pg seq 扫描该视图，这可能会导致非常糟糕的性能。在这些更复杂的情况下，我想提供一个函数调用接口来进行修改。

# wpf - WPF：防止 ContextMenu 出现在子 TreeViewItems 上

> ID：13114791
> 
> 赞同：1
> 
> 时间：2012-10-29T01:15:32.520
> 
> 标签：wpf, data-binding, treeview, contextmenu

我正在尝试设计一个 WPF TreeView，其中 ContextMenu 在特定节点上激活。

在我的示例中，尽管我尽了最大努力，但我无法阻止 BarNode 的 ContextMenu 在其子项 'FooNode' 被单击时出现。

**C＃：**

```
public abstract class NodeBase
{
    public NodeBase[] ChildNodes { get; set; }
}

public class FooNode : NodeBase
{

}

public class BarNode : NodeBase
{
}

public class ExampleModel : BaseModel
{
    private NodeBase[] _nodes;

    public NodeBase[] Nodes
    {
        get
        {
            _nodes = new NodeBase[]
                {
                    new FooNode(), 
                    new BarNode()
                        {
                            ChildNodes = new NodeBase[]
                            {
                                new FooNode(),
                                new FooNode()
                            }
                        }
                };
            return _nodes;
        }
    }

    public ExampleModel()
    {

    }
}

public class TreeViewStyleSelector : StyleSelector
{
    public Style FooNodeStyle { get; set; }

    public Style BarNodeStyle { get; set; }

    public override Style SelectStyle(object item, DependencyObject container)
    {
        var fooNode = item as FooNode;
        if (fooNode != null)
        {
            return FooNodeStyle;
        }

        var barNode = item as BarNode;
        if (barNode != null)
        {
            return BarNodeStyle;
        }

        return base.SelectStyle(item, container);
    }
} 
```

**XAML**

```
<Window
        xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
        xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
        xmlns:Nodes="clr-namespace:UnderstandingWPFTreeView.Nodes"
        xmlns:Models="clr-namespace:UnderstandingWPFTreeView.Models"
        xmlns:Common="clr-namespace:UnderstandingWPFTreeView.Common" 
    x:Class="UnderstandingWPFTreeView.MainWindow" 
        Title="MainWindow" Height="350" Width="525">

    <Window.DataContext>
        <Models:ExampleModel/>
    </Window.DataContext>

    <Window.Resources>
        <ContextMenu x:Key="testContextMenu">
            <MenuItem Header="Test Context Item"></MenuItem>
            <MenuItem Header="Test Context Item"></MenuItem>
        </ContextMenu>

        <Style TargetType="{x:Type TreeViewItem}"  x:Key="FooNodeStyle">
        </Style>

        <Style TargetType="{x:Type TreeViewItem}"  x:Key="BarNodeStyle">
            <Setter Property="ContextMenu" Value="{StaticResource testContextMenu}" />
        </Style>

        <Common:TreeViewStyleSelector
                x:Key="treeViewStyleSelector"
                FooNodeStyle="{StaticResource ResourceKey=FooNodeStyle}"
                BarNodeStyle="{StaticResource ResourceKey=BarNodeStyle}" />

    </Window.Resources>

    <StackPanel HorizontalAlignment="Left" Height="320" VerticalAlignment="Top" Width="517">
        <TreeView Height="100">
            <TreeView.Resources>
                <HierarchicalDataTemplate DataType="{x:Type Nodes:BarNode}" ItemsSource="{Binding Path=ChildNodes}">
                    <TextBlock Text="Bar" />
                </HierarchicalDataTemplate>

                <HierarchicalDataTemplate DataType="{x:Type Nodes:FooNode}" ItemsSource="{Binding Path=ChildNodes}">
                    <TextBlock Text="Foo" />
                </HierarchicalDataTemplate>
            </TreeView.Resources>

            <TreeViewItem Header="Testing" ItemsSource="{Binding Nodes}" ItemContainerStyleSelector="{StaticResource ResourceKey=treeViewStyleSelector}"/>
        </TreeView>
    </StackPanel>

</Window> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-02T02:32:21.917

我在 MSDN 论坛上问了同样的问题，并得到了一个可以确认为有效的答案。

[http://social.msdn.microsoft.com/Forums/en-US/wpf/thread/7dd183bc-d616-4ec4-8b2a-0b438c9a115c](http://social.msdn.microsoft.com/Forums/en-US/wpf/thread/7dd183bc-d616-4ec4-8b2a-0b438c9a115c)

将 ContextMenu 对象放置在 TextBlock 上会提供相同的视觉外观，但会减去将 ContextMenu 沿 TreeNode 链传递的效果。

```
<HierarchicalDataTemplate DataType="{x:Type local:BarNode}" ItemsSource="{Binding Path=ChildNodes}">
    <TextBlock Text="Bar" ContextMenu="{StaticResource testContextMenu}" />
</HierarchicalDataTemplate> 
```

# php - 从 mysql 获取数据的谷歌饼图

> ID：13114793
> 
> 赞同：0
> 
> 时间：2012-10-29T01:16:18.613
> 
> 标签：php, mysql, charts

我正在尝试从 mysql 中的数据制作谷歌饼图，但不知道如何。我想在图表中显示的是保存的 id 数据库，例如：

```
Ads Table:
ad_id location price sourceId(FG)
1     London   500      3
2     Moscow   2000     4
3     London   600      3
4     Berlin   400      4 
```

我想做的是通过 id 为 3 的源的次数、id 为 4 的源的次数等来获取 sourceId，并在此数据上构建图表。也无法确定将这些数据保存在哪里，因此 js 可以从谷歌图表中读取它。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-29T02:59:40.110

这听起来像一个频率分布.. 但是对于所有其他信息，我不确定这是否是您正在寻找的。

SQL：

```
SELECT COUNT(ad_id),`sourceId(FG)` FROM Ads GROUP BY `sourceId(FG)`; 
```

然后你应该有你的频率分布。

对于绘制数据，最直接的方法是在设置图表时使用 PHP 输出作为 Google Chart 的值对。如何做到这一点的变化是无穷无尽的。

# python - 如何在 python 递归函数中保留列表或字典？

> ID：13114794
> 
> 赞同：3
> 
> 时间：2012-10-29T01:16:22.140
> 
> 标签：python

我必须在python中使用递归函数，下面的代码是一个简化的模型。我想在递归中保留结果列表和dict字典不生成新的列表或字典，并在递归后返回，如何解决？

```
def test(length):
    result = []
    dict = {}
    if length == 10:
        return result, dict
    else:
        result.append(length)
        dict[length] = length + 1
        test(length + 1)

x, y = test(0)
print x, y 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-29T01:22:00.157

使用执行递归的辅助函数，以及使用初始默认值调用辅助函数的主函数。

```
def test(length):
    result = []
    dict = {}
    _test(length, result, dict)
    return result, dict

def _test(length, result, dict):
    if length == 10:
        return
    else:
        result.append(length)
        dict[length] = length + 1
        _test(length + 1, result, dict)

x, y = test(0)
print x, y 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-29T04:51:46.960

我认为你的递归有点坏了。

Python 提供了一些其他选项来做你想做的事。我喜欢这种格式：

```
def t(length, result = [], d = {}):
    if length == 10:
        return
    else:
        result.append(length)
        d[length] = length + 1
        t(length + 1)

    return (result, d)

x, y = t(0)
print x, y 
```

数组和字典的初始化只发生在解释器看到函数时，而不是每次调用函数时。有关 python 中默认参数的详细介绍，请参阅此[页面](http://effbot.org/zone/default-values.htm)。

在这种情况下，它们就像附加到函数的数组和字典一样。

# java - 正则表达式匹配重复出现的模式

> ID：13114796
> 
> 赞同：2
> 
> 时间：2012-10-29T01:16:35.510
> 
> 标签：java, regex

我正在尝试为 java 编写一个匹配以下字符串的正则表达式：

number,number,number（可以是这么简单，也可以有可变数量的数字，但每个数字后面必须有一个逗号，但不会有任何空格）

这是我的尝试：

```
[[0-9],[0-9]]+ 
```

但它似乎与其中有数字的任何东西相匹配

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-29T01:20:05.727

你可以尝试一些类似的东西`([0-9]+,)*[0-9]+`

这将匹配：

*   只有一个数字，例如：`7`
*   两个数字，例如：`7,52`
*   三个数字，例如：`7,52,999`
*   等等

这将不匹配：

*   带空格的东西，例如：`7, 52`
*   以逗号结尾的列表，例如：`7, 52,`
*   许多其他事情超出了这个问题的范围。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-29T01:19:44.843

我认为这会奏效

```
\d+,(\d+,)+ 
```

请注意，如您所愿，这只会捕获数字后跟逗号

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-29T01:20:30.420

我猜你是从一个字符串开始的。你为什么不直接使用`String.split(",")`？

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-29T01:22:49.623

^ 表示字符串的开头，$ 表示结尾。如果你不使用这些，你可以在中间匹配一些东西（`b`匹配的“abc”）。

它之前的元素上的`+`作品。 `b`是一个元素，`[0-9]`是一个元素，组也是如此（括号中的东西）。

所以，你想要的正则表达式匹配：

*   字符串的开始`^`
*   一个号码`[0-9]`
*   任何数量的昏迷按数字流动`(,[0-9])+`
*   字符串的结尾`$`

或者，`^[0-9](,[0-9])+$`

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-10-29T01:44:35.710

尝试将正则表达式作为`[\d,]*`字符串表示，`[\\d,]*`如下所示：

```
 Pattern p4 = Pattern.compile("[\\d,]*");
   Matcher m4 = p4.matcher("12,1212,1212ad,v");
   System.out.println(m4.find()); //prints true
   System.out.println(m4.group());//prints 12,1212,1212 
```

**如果您想匹配至少一个逗号 (,) 和两个数字，**例如`12,1212`，那么您可能希望使用正则表达式 as**`(\d+,)+\d+`**和字符串表示 as `\\d+,)+\\d+`。此正则表达式匹配一个区域，其数字最少为一位数字，后跟一个逗号 (,)，后跟最少一位数字。

# google-maps-api-3 - Google Maps API V3 - 使用地理编码器时仅显示空白地图

> ID：13114797
> 
> 赞同：0
> 
> 时间：2012-10-29T01:16:52.280
> 
> 标签：google-maps-api-3

所以我有一些使用谷歌地图 API V3 并使用地理编码器从地址获取坐标并在这些坐标处显示地图的 javascript。它工作得很好，但几天前我再次检查它，现在它没有显示正确的地图，它只显示一个空白的蓝色地图，并且不允许你放大或缩小或移动地图。似乎没有任何 javascript 错误或从谷歌地图返回的错误，所以不确定是什么原因造成的......

这是问题的一个例子：[点击这里](http://vietnamenus.com/restaurants/4P%27s-Pizza)

有人对可能导致这种情况的原因有任何想法吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-29T04:48:10.070

您正在使用未记录的属性：

```
var center = results[0].geometry.location.Xa - 0.0062;
var centerCoord = new google.maps.LatLng(center, results[0].geometry.location.Ya); 
```

（几何.Xa，几何.Ya）

当 API 的版本发生变化时，这肯定会在某个时候失败。

使用[记录的属性（geometry.lat()、geometry.lng()）](https://developers.google.com/maps/documentation/javascript/reference#LatLng)

# c - 如何获得一个数组来读取用户输入然后根据特定数字输出？

> ID：13114800
> 
> 赞同：-1
> 
> 时间：2012-10-29T01:17:51.203
> 
> 标签：c

所以现在程序从 MAX 正确输出到 MIN 但是响应数是错误的。似乎它只输出最后一个正确连续放置的响应。代码在最后。

它能做什么：

```
Enter a integer rating between -20 and 5 for the product: 5
Enter a integer rating between -20 and 5 for the product: 4
Enter a integer rating between -20 and 5 for the product: 3
Enter a integer rating between -20 and 5 for the product: 2
Enter a integer rating between -20 and 5 for the product: 3
Enter a integer rating between -20 and 5 for the product: 1

Rating            Number of Responses
------            -------------------
  5                       1
  4                       1
  3                       1
  2                       1
  1                       1
  0                       1
 -1                       1
 -2                       1
 -3                       1
 -4                       1
 -5                       1
 -6                       1
 -7                       1
 -8                       1
 -9                       1
-10                       1
-11                       1
-12                       1
-13                       1
-14                       1
-15                       1
-16                       1
-17                       1
-18                       1
-19                       1
-20                       1
Process returned 0 (0x0)   execution time : 13.643 s
Press any key to continue. 
```

它应该做什么：

```
Enter a integer rating between -20 and 5 for the product: 5
Enter a integer rating between -20 and 5 for the product: 4
Enter a integer rating between -20 and 5 for the product: 3
Enter a integer rating between -20 and 5 for the product: 2
Enter a integer rating between -20 and 5 for the product: 3
Enter a integer rating between -20 and 5 for the product: 1

Rating            Number of Responses
------            -------------------
  5                       1
  4                       1
  3                       2
  2                       1
  1                       1
  0                       0
 -1                       0
 -2                       0
 -3                       0
 -4                       0
 -5                       0
 -6                       0
 -7                       0
 -8                       0
 -9                       0
-10                       0
-11                       0
-12                       0
-13                       0
-14                       0
-15                       0
-16                       0
-17                       0
-18                       0
-19                       0
-20                       0
Process returned 0 (0x0)  execution time : 13.643 s
Press any key to continue. 
```

另一个例子（工作不正确）：

```
Enter a integer rating between -20 and 5 for the product: 5
Enter a integer rating between -20 and 5 for the product: 4
Enter a integer rating between -20 and 5 for the product: 22

Not within range. Try again.
You have 3 more attempts before program outputs total:2

Enter a integer rating between -20 and 5 for the product: 2
Enter a integer rating between -20 and 5 for the product: 2
Enter a integer rating between -20 and 5 for the product: 2

Rating            Number of Responses
------            -------------------
  5                       3
  4                       3
  3                       3
  2                       3
  1                       3
  0                       3
 -1                       3
 -2                       3
 -3                       3
 -4                       3
 -5                       3
 -6                       3
 -7                       3
 -8                       3
 -9                       3
-10                       3
-11                       3
-12                       3
-13                       3
-14                       3
-15                       3
-16                       3
-17                       3
-18                       3
-19                       3
-20                       3
Process returned 0 (0x0)   execution time : 8.426 s
Press any key to continue. 
```

这里是...

```
#include <stdio.h>                                                             /* Necessary header */
#define MAX_RESPONDENTS 6
#define MIN_RESPONSE_VALUE -20                                                 /* Abbreviated MiRV */
#define MAX_RESPONSE_VALUE 5                                                   /* Abbreviated MaRV */
#define RESPONSE_VALUE 26                                                      /* Equals |(MiRV)| + |(MaRV)| + 1 */
#define STOP 3
#define BREAK 1

int main(void)
{
    CountRating();

    return 0;
}

void CountRating()
{
    int ratingCounters, rating[RESPONSE_VALUE] = {0}, Response, response;

    for (ratingCounters = 0; ratingCounters < MAX_RESPONDENTS;)
    {
        int response, stop = STOP;
        printf("Enter a integer rating between %d and %d for the product: ", MIN_RESPONSE_VALUE, MAX_RESPONSE_VALUE);
        scanf("%d", &response);

        if (response <= MAX_RESPONSE_VALUE && response >= MIN_RESPONSE_VALUE)
            stop = STOP, Response = response;
        else
        {
            int stopElse = stop;
            if (stopElse < BREAK)
                break;
            else
            {
                do
                {
                    printf("\nNot within range. Try again.\nYou have %d more attempts before program outputs total:", stop);
                    scanf("%d", &response);
                    printf("\n");
                    --stop;
                    if (stop < BREAK)
                    break;
                } while (response > MAX_RESPONSE_VALUE || response < MIN_RESPONSE_VALUE);
            }   if (stop < BREAK)
                break;
        }
        ++rating[Response];
        ++ratingCounters;

    }
    printf("\nRating            Number of Responses\n");
    printf("------            -------------------");
    for (ratingCounters = MAX_RESPONSE_VALUE; ratingCounters >= MIN_RESPONSE_VALUE; --ratingCounters)
    {

        printf("\n%3d %23d", rating[RESPONSE_VALUE], rating[Response]);

    }
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-29T01:24:39.870

从你所知道的开始，打印输出不是预期的。验证您的代码是否符合您的预期。`RESPONSE_VALUE`和的值是`Response`多少？

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-29T01:26:10.233

您的数组索引从 0 开始，但您的响应数字范围从 -20 到 +5（26 个值）。所以，当你写：

```
++rating[Response]; 
```

您没有访问您应该访问的数组元素。您需要执行一些操作，例如从输入的值中减去 MIN_RESPONSE_VALUE。

您的输出循环每次都打印相同的响应，因为您每次都访问相同的数组元素：

```
for (ratingCounters = MAX_RESPONSE_VALUE; ratingCounters >= MIN_RESPONSE_VALUE; --ratingCounters)
{
    printf("\n%3d %23d", rating[RESPONSE_VALUE], rating[Response]);
} 
```

循环索引和数组索引的名称如下`i`：此代码是一个示例。它使代码难以阅读。您应该通过从`ratingCounters`. 其中一个值应该是`ratingCounters`; 另一个数组元素基于从 计算的值`ratingCounters`。

# python - 为什么不打印这个？

> ID：13114806
> 
> 赞同：0
> 
> 时间：2012-10-29T01:18:25.130
> 
> 标签：python, variables, for-loop

```
class anagram_generator:
    words = ""
    letters = []
    def get_words():
        words = raw_input("input the letters\n")
        letters = []
        i = 0

    def sort_words():
        for word in words:
            letters.append(word)
            print letters[i]
            i = i + 1

    get_words()
    sort_words() 
```

为什么 sort_words 不打印出 words 字符串和 letters 数组？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-29T01:28:55.560

您需要将函数中的变量“单词”和“字母”声明为全局变量，如下所示：

```
def sort_words():
global words
global letters
i=0
for word in words:
    letters.append(word)
    print letters[i]
    i = i + 1 
```

函数内部的变量只能在函数中访问，不能访问“外部”的变量，并且在您的情况下保持为空（“”或 []），另请参见[Python Doc](http://docs.python.org/2/tutorial/controlflow.html#defining-functions)（搜索“全局”）。

另一件事是未使用初始值声明的 i 变量也会引发错误。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-29T01:38:00.967

我不知道你为什么把类放在这里，因为缩进不是真的，你使用“**方法**”的方式不像你想使用类。我有两个代码。一个是使用类，另一个是没有。

首先，假设您真的想使用 class （我认为这最适合您的问题）：

```
class Generator:
    words = ""  # you should put words and letters here. this will be attribute and both get_words() and sort_words() can see this
    letters = []
    def get_words(self):
        words = raw_input("input the letters\n")
        letters = []
        # i = 0 : no effect. it just local variable with method get_words

    def sort_words(self):
        i = 0  # must be assign value before use
        for word in words:
        letters.append(word)
        print letters[i]
            i = i + 1 
```

你应该注意到，当你使用类时，每个方法都必须有关键字`self`。这是测试：

```
generator = Generator()
generator.get_words()
generator.sort_words() 
```

如果这只是**正常功能**。您的问题不起作用，因为某些原因：

1)**单词和字母可能不会被声明为 global**。因此，当您在 get_words() 中为这些变量赋值时，sort_words() 看不到这一点。如果您编译并且没有错误，只是出于某种原因，您已经在全局中分配了这些值（类型名称并在其他地方分配值，而不是在任何函数中）。但在这种情况下，当您使用 get_words() 时，那些全局仍然不会更新。因此，没有您看到的“打印字”，因为您使用的“字”还没有更新。

**2) i 变量：必须在使用前**赋值。

所以，这是我修复的代码：

```
def get_words():
    global words
    global letters
    words = raw_input("input the letters\n")
    letters = []
    # global i=0 : you can do that, but SHOULDN'T

def sort_words():
    i = 0 # i must be assign value before use
    for word in words:
        letters.append(word)
        print letters[i]
        i = i + 1 
```

测试将是：

```
get_words()
sort_words() 
```

希望对你有帮助 ：）

# javascript - 基本链接和搜索 api

> ID：13114808
> 
> 赞同：1
> 
> 时间：2012-10-29T01:18:33.107
> 
> 标签：javascript, jquery, base

我正在尝试通过我不完全理解的 API 查询数据库。我收到了一个与关键字搜索表单一起使用的 API 示例。表单是一个html文件，使用jquery返回JSON文档，将项目格式化成数组数组，然后显示。

我试图构建我的应用程序的设计并操纵表单以在我的页面中工作。使用 API 的文件要求使用基本链接。

```
<base href="{{app_root}}"> 
```

如果我删除此基本链接，我的搜索功能将丢失。如果我使用基本链接，所有演示文稿和 CSS 都会丢失。

我想也许我可以在需要调用搜索文件时动态更改基本链接：

```
<script type="text/javascript"> 
function setbasehref(basehref) { 
     var thebase = document.getElementsByTagName("base"); 
     thebase[0].href = basehref; 
} 
//setbasehref("{{app_root}}");
setbasehref("{{app_root}}");
</script> 
```

然后使用 setbasehref() 将其更改回我原来的基本链接，但这不起作用。

我是 javascript 和 JSON 的新手，我不完全确定 app_root 在做什么。有什么想法吗？

# r - R中的插补

> ID：13114812
> 
> 赞同：5
> 
> 时间：2012-10-29T01:18:56.927
> 
> 标签：r, imputation

我是 R 编程语言的新手。我只是想知道有没有办法在我们的数据集中**只计算一列的空值。**因为我见过的所有插补命令和库都插补了整个数据集的空值。

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2012-10-29T01:30:28.183

这是一个使用`Hmisc`包的示例`impute`

```
library(Hmisc)
DF <- data.frame(age = c(10, 20, NA, 40), sex = c('male','female'))

# impute with mean value

DF$imputed_age <- with(DF, impute(age, mean))

# impute with random value
DF$imputed_age2 <- with(DF, impute(age, 'random'))

# impute with the media
with(DF, impute(age, median))
# impute with the minimum
with(DF, impute(age, min))

# impute with the maximum
with(DF, impute(age, max))

# and if you are sufficiently foolish
# impute with number 7 
with(DF, impute(age, 7))

 # impute with letter 'a'
with(DF, impute(age, 'a')) 
```

查看`?impute`有关如何实施插补的详细信息

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2017-03-13T15:44:30.857

为什么不使用更复杂的插补算法，例如鼠标（链式方程的多重插补）？下面是 R 中的代码片段，您可以根据自己的情况进行调整。

```
library(mice)

#get the nhanes dataset
dat <- mice::nhanes

#impute it with mice
imp <- mice(mice::nhanes, m = 3, print=F)

imputed_dataset_1<-complete(imp,1)

head(imputed_dataset_1)

#     age  bmi hyp chl
# 1   1   22.5   1 118
# 2   2   22.7   1 187
# 3   1   30.1   1 187
# 4   3   24.9   1 186
# 5   1   20.4   1 113
# 6   3   20.4   1 184

#Now, let's see what methods have been used to impute each column
meth<-imp$method
#  age   bmi   hyp   chl
#"" "pmm" "pmm" "pmm"

#The age column is complete, so, it won't be imputed
# Columns bmi, hyp and chl are going to be imputed with pmm (predictive mean matching)

#Let's say that we want to impute only the "hyp" column
#So, we set the methods for the bmi and chl column to ""
meth[c(2,4)]<-""
#age   bmi   hyp   chl 
#""    "" "pmm"    "" 

#Let's run the mice imputation again, this time setting the methods parameter to our modified method
imp <- mice(mice::nhanes, m = 3, print=F, method = meth)

partly_imputed_dataset_1 <- complete(imp, 3)

head(partly_imputed_dataset_1)

#    age  bmi hyp chl
# 1   1   NA   1  NA
# 2   2 22.7   1 187
# 3   1   NA   1 187
# 4   3   NA   2  NA
# 5   1 20.4   1 113
# 6   3   NA   2 184 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2016-11-11T00:35:05.737

有很多软件包可以为您做到这一点。（有关数据的更多信息可以帮助向您建议最佳选择）

一个例子是使用**VIM**包。

它有一个名为**kNN**（k-nearest-neighbor imputation）的函数。这个函数有一个选项**变量**，您可以在其中指定哪些变量应被估算。

这是一个例子：

```
library("VIM")
kNN(sleep, variable = c("NonD","Gest")) 
```

我在本例中使用的睡眠数据集与 VIM 一起提供。

如果您的列中存在一些时间依赖性，您想使用时间序列插补包进行插补也是有意义的。在这种情况下，您可以使用例如**imputeTS**包。这是一个例子：

```
 library(imputeTS)
  na_kalman(tsAirgap) 
```

此处用作示例的 tsAirgap 数据集也与 imputeTS 一起提供。

# mysql - 带有 MySQL 和 UTF-8 的 Django

> ID：13114813
> 
> 赞同：2
> 
> 时间：2012-10-29T01:19:14.157
> 
> 标签：mysql, django, utf-8, mysql-5.1, utf8mb4

> **可能重复：**
> [如何过滤（或替换）在 UTF-8 中占用超过 3 个字节的 unicode 字符？](https://stackoverflow.com/questions/3220031/how-to-filter-or-replace-unicode-characters-that-would-take-more-than-3-bytes)

**背景：**

我正在将 Django 与 MySQL 5.1 一起使用，我遇到了 4 字节 UTF-8 字符的问题，导致整个 Web 应用程序出现致命错误。

我使用[脚本](https://stackoverflow.com/a/11597447/98187)将数据库中的所有表和列转换为 UTF-8，它修复了大多数 unicode 问题，但 4 字节 unicode 字符仍然存在问题。如[其他地方所述](https://stackoverflow.com/a/3060537/98187)，MySQL 5.1 不支持长度超过 3 个字节的 UTF-8 字符。

每当我在我的 Django 网站上的 ModelForm 中输入一个 4 字节的 unicode 字符（例如 ）时，表单都会验证，然后引发类似于以下内容的异常：

```
Incorrect string value: '\xF0\x9F\x80\x90' for column 'first_name' at row 1 
```

**我的问题：**

在具有 MySQL 5.1 数据库的 Django Web 应用程序中，避免由 4 字节 UTF-8 字符引起的致命错误的合理方法是什么。

我考虑过：

1.  有选择地禁用 MySQL 警告以专门避免该错误消息（不确定这是否可能）
2.  创建将查看`request.POST` `QueryDict`并替换/删除所有无效 UTF8 字符的中间件
3.  以某种方式挂钩/更改/猴子修补为 Django 或 MySQLdb 输出 SQL 查询的机制，以在执行查询之前替换/删除所有无效的 UTF-8 字符

* * *

[替换无效字符的示例中间件（受此SO question](https://stackoverflow.com/a/11597447/98187)启发）：

```
import re

class MySQLUnicodeFixingMiddleware(object):

    INVALID_UTF8_RE = re.compile(u'[^\u0000-\uD7FF\uE000-\uFFFF]', re.UNICODE)

    def process_request(self, request):
        """Replace 4-byte unicode characters by REPLACEMENT CHARACTER"""
        request.POST = request.POST.copy()
        for key, values in request.POST.iterlists():
            request.POST.setlist(key,
                [self.INVALID_UTF8_RE.sub(u'\uFFFD', v) for v in values]) 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-17T11:09:45.310

你有升级mysql的选项吗？如果这样做，您可以升级并将编码设置为 utf8mb4。

假设您没有选项，我会为您看到以下选项：

1) 添加 java 脚本/前端验证以防止输入 1,2 或 3 字节 unicode 字符以外的任何内容，

2）在您的模型中添加清理功能以去除任何 4 字节 unicode 字符的数据（这将是您的选项 2 或 3）

同时，看起来您的用户实际上使用的是 4 字节字符。如果有在您的应用程序中使用它们的商业案例，您可以行使权力并请求升级。

# php - php - 如何对具有“+1”、“-20”等值的数组进行排序

> ID：13114814
> 
> 赞同：0
> 
> 时间：2012-10-29T01:19:22.697
> 
> 标签：php, arrays, sorting

我有一个这样的数组的 PHP 脚本：

```
array (

"+15" => 5,
"-5" => 20,
"+2" => 2,
"-1" => 9

) 
```

键都是唯一的（+15 等）。我想按键排序，所以：

```
foreach($array as $k => $v ) {

echo $k . ' has a count of ' . $v;

} 
```

关于按 + 和 - 键排序的任何想法。我无法让它正常工作

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-29T01:22:35.427

您可以只使用`ksort`, （您的键都是数字字符串，它们将被视为整数。）

```
ksort($array);
var_dump($array); 
```

结果：

```
array(4) {
  [-5]=>
  int(20)
  [-1]=>
  int(9)
  ["+2"]=>
  int(2)
  ["+15"]=>
  int(5)
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-29T01:25:18.697

natsort [()](http://php.net/manual/en/function.natsort.php)会起作用吗？

来自 php.net：

```
<?
    $array1 = $array2 = array("img12.png", "img10.png", "img2.png", "img1.png");

    asort($array1);
    echo "Standard sorting\n";
    print_r($array1);

    natsort($array2);
    echo "\nNatural order sorting\n";
    print_r($array2);
?> 
```

输出：

```
Standard sorting
Array
(
    [3] => img1.png
    [1] => img10.png
    [0] => img12.png
    [2] => img2.png
)

Natural order sorting
Array
(
    [3] => img1.png
    [2] => img2.png
    [1] => img10.png
    [0] => img12.png
) 
```

# html - 定位元素在右上角

> ID：13114819
> 
> 赞同：4
> 
> 时间：2012-10-29T01:19:59.657
> 
> 标签：html, css, layout

我有一个[Fiddle](http://jsfiddle.net/pTNqe/9/)，其中包含一个 div、一些文本和一个按钮。

无论 div 有多大，或者 div 中有多少文本，我都想将按钮放在 div 的右上角。

我虽然像

```
float: right;
position: relative; 
```

可能会成功，但这不起作用，因为 div 中的“文本”会按下按钮。

有一个更好的方法吗？也许`absolute`将按钮放置在右上角，而不是`relative`？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-29T01:22:45.413

如果您使用绝对定位，您可以简单地使用`top`和`right`来相对于右上角定位按钮。

```
#myButton {
    position: absolute;
    top: 0;
    right: 0;
} 
```

[jsFiddle 演示](http://jsfiddle.net/pTNqe/11/)

请注意，当绝对定位时，元素会[从 flow 中取出](https://developer.mozilla.org/en-US/docs/CSS/position#Absolute_positioning)`<p>`，因此如果它们足够大，其他元素（例如那里）可以“低于”它。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-29T01:24:39.230

只是将按钮样式更改为

```
#myButton {
    cursor: pointer;
    position: absolute;
    top:5px; 
    right: 5px;    
} 
```

这是你想要的？

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-29T01:22:49.087

我想你想要的是绝对定位，所以试试吧

```
position: absolute;
top: 0;
right: 0; 
```

# c++ - 启动梅森捻线机 PRNG

> ID：13114823
> 
> 赞同：8
> 
> 时间：2012-10-29T01:20:58.113
> 
> 标签：c++, math, random, boost-random

[围绕mt19937](http://en.wikipedia.org/wiki/Mersenne_twister)的使用似乎有一些神话，特别是一旦播种生成器产生的“一些”比特数应该被忽略，以便尽可能接近伪随机性。

我见过的代码示例如下：

```
boost::mt19937::result_type seed = 1234567; //taken from some entropy pool etc
boost::mt19937 prng(seed);
boost::uniform_int<unsigned int> dist(0,1000);
boost::variate_generator<boost::mt19937&,boost::uniform_int<unsigned int> > generator(prng,dist);

unsigned int skip = 10000;
while (skip--)
{
   generator();
}

//now begin using for real.
.... 
```

我的问题是：

1.  这是神话还是这一切都有真相？

2.  如果它是可行的，应该忽略多少位？因为我看到的数字
    似乎是任意的

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-08T14:48:03.340

第一条评论中引用的论文[Mersenne Twister 具有改进的初始化](http://www.math.sci.hiroshima-u.ac.jp/~m-mat/MT/MT2002/emt19937ar.html)，不仅仅是某个人，他是 Boost 实现所基于的论文的两位合著者之一。

根据[Boost 文档](http://www.boost.org/doc/libs/1_52_0/doc/html/boost/random/mersenne_twister_engine.html)，使用单个 32 位整数（4 字节）作为此生成器的种子的问题在于，生成器的内部状态为 2496 字节。这么小的种子需要一段时间才能传播到生成器的其余内部状态，这并不奇怪，特别是因为 Twister 并不意味着加密安全。

为了解决您对需要运行生成器一段时间才能开始的担忧，您需要备用（和显式）构造函数。

```
template<typename SeedSeq> explicit mersenne_twister_engine(SeedSeq &); 
```

这是第三条评论的精神，在这里您使用比单个整数更长的东西进行初始化。序列提供来自某个生成器。要使用熵池，请将生成器编写为熵池中的适配器，并根据需要从池中返回值。

# php - 检查空密码字段而不发布未加密的密码

> ID：13114824
> 
> 赞同：0
> 
> 时间：2012-10-29T01:21:23.213
> 
> 标签：php, encryption, passwords

假设我有一个简单的表格：

```
<form action="register.php" method="post">
<label>Password:</label>
<?php if (isset($errors[1])) echo $errors[1]; ?> <- Displays error message if there is one
<input type="password" name="user_pass" />
<label>Confirm Password:</label>
<input type="password" name="user_pass_confirm" />

<input type="submit" />
</form>

$user_pass = $security->encrypt($_POST['user_pass']);
$user_pass_confirm = $security->encrypt($_POST['user_pass_confirm']);

$registration->form($user_pass, $user_pass_confirm); 
```

还有一个类：

```
if (empty($user_pass)) {
$errors[1] = 'Passwords  required';
} else if ($user_pass != $user_pass_confirm) {
$errors[1] = 'Passwords don't match';
}

//if error array empty, create member 
```

我要做的是验证密码以使其成为必需，确保它们匹配，我还将添加一个 preg_match 正则表达式以确保它至少有 8 个字符长或其他任何东西。

我的问题是，我在提交之前已经加密了密码（我认为不应该发布未加密的密码，如果我错了，请纠正我）。

然后当我的班级获得编码字符串时，我无法做任何事情来验证它。我可以通过将字段与什么都没有的加密/加盐版本进行比较来检查是否为空，但我确信这不是这样做的方法。

任何人都可以指出验证密码的标准程序或您对解决方案的任何建议。

非常感谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-29T01:39:39.820

PHP 不能在客户端执行。由于 PHP 是一种服务器端语言，因此您无法使用 PHP 加密纯密码而不将其发送到服务器。必须先将密码发送到服务器，然后才能访问它。您可以通过 https 使用 SSL/TLS 等机制，但这不会影响您的 PHP 代码。

**这意味着**：在提交表单之前，您不能使用 PHP 加密密码。这可以通过 JavaScript 等客户端编程语言来完成。您可以实现一个 JavaScript 函数来检查密码是否正常（不是空的并且足够长/足够安全），然后让 JavaScript 对其进行加密，然后将其发送到服务器，以便将加密的密码传输到服务器。

```
<form action="register.php" method="post">
...
</form>
<?php
//$user_pass = $security->encrypt($_POST['user_pass']);
//$user_pass_confirm = $security->encrypt($_POST['user_pass_confirm']);
//$registration->form($user_pass, $user_pass_confirm);
//YOUR PASSWORD HAS NOT BEEN SENT TO YOUR SERVER YET. YOU CANNOT ACCESS IT USING PHP.
//YOU WOULD NORMALLY DO SOMETHING LIKE THIS (IN REGISTER.PHP)
if(isset($_POST["name_of_your_submit_field"])) //WHICH MEANS THAT YOUR FORM HAS BEEN SUBMITTED NOW
{
    //This checks whether the POST-variable of your submit field is set.
    //If it is, you know that the client has submitted the form and sent the form data to your server.
    //Only here you can access the form data.
    $user_pass=$_POST['user_pass'];
    if(strlen($user_pass) > 8)
    {
        $user_pass = $security->encrypt($user_pass);
        $user_pass_confirm = $security->encrypt($_POST['user_pass_confirm']);
        $registration->form($user_pass, $user_pass_confirm);
    }
}
?> 
```

# ruby-on-rails - 如何提供要委托的符号数组

> ID：13114826
> 
> 赞同：1
> 
> 时间：2012-10-29T01:21:27.967
> 
> 标签：ruby-on-rails, ruby

我想做类似的事情：

```
project_paths = project_hash.keys
delegate :params, :h, :raw, :link_to, project_paths, to: :@view 
```

but`project_paths`是一个数组，在这里不起作用。

如何将一组符号转换为可以输入的逗号分隔符号的“列表” [`delegate`](http://apidock.com/rails/Module/delegate)？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-29T01:26:36.233

使用 splat 运算符：

```
delegate :params, :h, :raw, :link_to, *project_paths, to: :@view 
```

# javascript - Dijkstra 的算法实现

> ID：13114827
> 
> 赞同：1
> 
> 时间：2012-10-29T01:21:30.443
> 
> 标签：javascript, graph-theory, dijkstra

所以我正在编写 Dijkstra 算法的 JavaScript 实现。

我从[Wikipedia page](http://en.wikipedia.org/wiki/Dijkstra%27s_algorithm)阅读了很多内容，它帮助我将这些步骤转换为代码。我也读过[这个 Stack Overflow question](https://stackoverflow.com/questions/8597727/dijkstras-algorithm-doesnt-appear-to-work-my-understanding-must-be-flawed)，这是我的问题的一部分。

> 从 A 出发，唯一的路径是 B，这给了我们
> 
> O => AB = 12；
> 
> O => C = 7
> 
> C 现在是最低距离，并且是新的当前节点
> 
> O => CD = 8
> 
> 由于 D 是目的地且 8 < 12，因此选择路线 CD。

你如何在代码中实现这个决定？现在，我的脚本根据哪些节点与当前节点相邻来选择哪个节点，是否每个决定都需要通过这种新的评估来运行？

顺便说一句，[这](http://pastebin.com/4emAnLYv)是我的（凌乱的）代码。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-29T01:37:59.460

> 我的脚本基于要选择的节点与当前节点相邻的节点

不。您的`connectedNodes`列表（按距离排序）应该是全局的，而不仅仅是当前节点。

然后，对于第一个（最小距离）节点，将所有未访问的邻居添加到列表中，仍然按距离排序。标记当前访问的节点并继续下一个最小距离未访问的节点。

# python - Tkinter - 简单程序不会更新

> ID：13114847
> 
> 赞同：0
> 
> 时间：2012-10-29T01:24:39.470
> 
> 标签：python, tkinter

我用 Tkinter 做了一个 BMI 计算器。我已经成功编码了接受用户输入并计算其 BMI 的位。我遇到的一个问题是它只在第一次点击时显示“你体重不足/正常/肥胖”。第一次单击后，此标签不再更新，但 BMI 标签会更新。

有人可以告诉我如何解决这个问题吗？

```
from Tkinter import *
import tkMessageBox

class App(object):
    def __init__(self):
        self.root = Tk()
        self.root.wm_title("Question 7")
        self.label = Label (self.root, text= "Enter your weight in pounds.")
        self.label.pack()  
        self.entrytext = StringVar()
        Entry(self.root, textvariable=self.entrytext).pack()

        self.label = Label (self.root, text= "Enter your height in inches.")
        self.label.pack()  
        self.entrytext2 = StringVar()
        Entry(self.root, textvariable=self.entrytext2).pack()

        self.buttontext = StringVar()
        self.buttontext.set("Calculate")
        Button(self.root, textvariable=self.buttontext, command=self.clicked1).pack()

        self.label = Label (self.root, text="")
        self.label.pack()

        self.dec = Label (self.root, text="")
        self.dec.pack()

        self.root.mainloop()

    def clicked1(self):
        w = float(self.entrytext.get())
        h = float(self.entrytext2.get())
        bmi = float((w/(h**2))*703)
        bmi = ("Your BMI is %.2f" %bmi)
        self.label.configure(text=bmi)
        if bmi < 18.5:
            self.dec.configure(text="You are underweight")
        if 18.5 <= bmi < 25:
            self.dec.configure(text="You are normal")
        if 25 <= bmi < 30:
            self.dec.configure(text="You are overweight")
        if 30<= bmi > 30:
            self.dec.configure(text="You are obese")

App() 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-29T02:12:05.400

我会先说我的 Tkinter 经验......有限:) 但是下面似乎可以满足您的需求。主要的调整在于定义标签本身。

```
from Tkinter import *
import tkMessageBox

class App(object):
    def __init__(self):
        self.root = Tk()
        self.root.wm_title("Question 7")

        self.label = Label(self.root, text="Enter your weight in pounds.").pack()
        self.entrytext = StringVar()
        Entry(self.root, textvariable=self.entrytext).pack()

        self.label = Label(self.root, text="Enter your height in inches.").pack()
        self.entrytext2 = StringVar()
        Entry(self.root, textvariable=self.entrytext2).pack()

        self.buttontext = StringVar()
        Button(self.root, textvariable=self.buttontext, command=self.clicked1).pack()
        self.buttontext.set("Calculate")

        # Here we set bmi_num (the actual number) as a StringVar
        # and then pack a label with the textvariable property = bmi_num.
        # This ensure that whenever we change that variable, the label updates
        self.bmi_num = StringVar()
        Label(self.root, textvariable=self.bmi_num).pack()

        # Same thing here
        self.bmi_text = StringVar()
        Label(self.root, textvariable=self.bmi_text).pack()

        self.root.mainloop()

    def clicked1(self):
        w = float(self.entrytext.get())
        h = float(self.entrytext2.get())
        bmi = float((w/(h**2))*703)
        # Now we just use the below syntax to update the label
        self.bmi_num.set("Your BMI is %.2f" % bmi)
        if bmi < 18.5:
            self.bmi_text.set("You are underweight")
        if 18.5 <= bmi < 25:
            self.bmi_text.set("You are normal")
        if 25 <= bmi < 30:
            self.bmi_text.set("You are overweight")
        if 30<= bmi > 30:
            self.bmi_text.set("You are obese")

App() 
```

# c# - 如何使用桌面应用程序获取 Metro 应用程序包中 resouce.pri 文件的内容

> ID：13114850
> 
> 赞同：1
> 
> 时间：2012-10-29T01:25:08.437
> 
> 标签：c#

如何使用桌面应用程序获取 Metro 应用程序包中 resource.pri 文件的内容？

我想在清单中获取可本地化的 displayName，例如 ms:resource，有什么方向吗？或者这里有人可以解释一下resource.pri 文件的结构吗？非常感谢。

# java - 在 Java 中使用资源文件

> ID：13114852
> 
> 赞同：1
> 
> 时间：2012-10-29T01:25:37.360
> 
> 标签：java, file, deployment, resources, embedded-resource

我刚刚开始使用“Java 资源文件”，我有几个问题......

1.  我希望将我的程序分发给其他人，并且我假设 JAR 文件不是最好的方法。我可能会通过“转换为 exe”来解决这个问题，这是一种好习惯吗？有什么限制？
2.  如果我转换为 exe，它会保留资源文件吗？
3.  我实际上只是想使用资源文件。该文件是一个文本文件，只会保存某些文件的用户目录，因此他们不需要在每次打开程序时都进行设置。这甚至是最好的方法吗？
4.  您如何在代码本身中引用资源文件？

这是我所做的。创建了一个新的资源文件，因为我使用的是 Netbeans，所以我可以在导航器的文件选项卡下看到它的位置，它看起来像这样：

*   主要项目
    1.  建造
    2.  班级
    3.  我的课
    4.  资源
        *   目录.txt

这是我尝试访问它的方式，但是当我调试它时它又返回空值。

```
private void getPaths()//todo
{   

try
{
 InputStream is = getClass().getResourceAsStream("/resources/directories.txt");
InputStreamReader isr = new InputStreamReader(is);
BufferedReader br = new BufferedReader(isr);
String line;
while ((line = br.readLine()) != null) 
{
    System.out.println(line);
}
br.close();
isr.close();
is.close();
}
 catch(Exception e)
  {

    }
} 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-29T01:38:11.627

“转换为 EXE”只是“将 Jar 文件包装到可执行容器中”的一种奇特方式

*“我假设 JAR 文件不是最好的方法”*不是真的。有时提供一种特定于操作系统的方法来启动程序是很好的，但它并不总是最好的解决方案。

*“有什么限制？”* . 好吧，首先，您将自己限制在一个平台上。对于 Mac，您需要将应用程序捆绑到“应用程序”捆绑包中。对于 linux，我认为大多数人提供脚本来启动他们的代码。

您也可以将自己限制在特定的位深度。如果您提供的只是 x32 位可执行文件，那么您将只能在 x32 位环境中运行。这可能不是问题，但您开始限制可用内存......

所以是的，一般来说，你的资源文件是安全的。

资源文件通常是嵌入的。您在第 3 部分中描述的内容更类似于配置文件。该文件需要存储在文件系统中（在您的 exe/jar 之外），以便可以轻松更新。

*“你如何在代码本身中引用资源文件？”*

对于嵌入式资源，您需要首先使用`getClass().getResource(...)`. 对于您的配置文件，我想说就像任何其他文件一样...

我还想看看[Deployment](http://docs.oracle.com/javase/tutorial/deployment/index.html)一些关于部署 Java 程序的建议机制的想法，

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-29T01:35:40.880

Jar 是一种完美的分发格式。您可以转换为 exe ，但用户仍需要安装 JVM 才能运行它。如果安装了 JVM 并且 jar 具有格式正确的清单文件，则通过双击执行 jar。

您可以从 JVM、文本、二进制文件、XML、属性文件等打开任何文件。

要保存用户设置，一个不错的选择是属性文件 - 请参阅[http://www.mkyong.com/java/java-properties-file-examples/](http://www.mkyong.com/java/java-properties-file-examples/)

# jquery - 将类添加到这个的孩子

> ID：13114853
> 
> 赞同：13
> 
> 时间：2012-10-29T01:25:41.123
> 
> 标签：jquery, addclass

此代码不起作用。`this+'>a'`不是有效的语法。那么，如何在 的子级中添加/删除一个类`this`？在这种情况下是一个`a`元素。

```
 jQuery(function ($) {
        $("nav.menu>ul>li").hover(
            function () {
               $(this+'>a').addClass("hover_triangle");//error
            },

            function () {
               $(this+'>a').removeClass("hover_triangle");//error
            });
    }); 
```

我不能这样做`nav.menu>ul>li>a`，因为会选择`a`菜单中的所有元素。

* * *

## 回答 #1

> 赞同：24
> 
> 时间：2012-10-29T01:27:50.490

```
$(this).children('a').addClass('hover_triangle'); 
```

并使用完整的代码：

```
jQuery(function($) {
    $('nav.menu>ul>li').hover(function() {
       $(this).children('a').addClass('hover_triangle');
    },function() {
       $(this).children('a').removeClass('hover_triangle');
    });
}); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-29T01:28:50.213

`$('a', this)`允许您仅查看`this`对象内部

```
jQuery(function ($) {
    $("nav.menu>ul>li").hover(
        function () {
           $('a', this).addClass("hover_triangle");//error
        },

        function () {
           $('a', this).removeClass("hover_triangle");//error
        });
}); 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-10-29T01:30:55.810

您可以使用`.find()`

```
$(this).find('> a').addClass("hover_triangle"); 
```

这将只访问的直接子元素`nav.menu>ul>li`

[**检查小提琴**](http://jsfiddle.net/sushanth009/CfQkB/)

如果你只想选择直接的孩子`.find('a')` ，甚至会得到嵌套的锚点。为了避免这种情况，你需要使用`.find('> a')`或者`.children('a')`

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-10-29T01:29:14.010

`$(this).find('a').addClass('hover_triangle')`- 更常见的方式，因为不必是直系子女

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-10-29T01:36:54.780

有 2 种方法可以搜索`this`. 大多数人都回答了`find()`（而且更容易阅读），但是 jquery 选择器也可以有第二个参数，即`context`.

`$('a', this)`是另一种语法，与`$(this).find('a)`. 在内部，jQuery 将采用第一种情况并使用`find()`，但语法是有效的，许多人使用它

API 参考： **[jQuery( 选择器 [, context] )](http://api.jquery.com/jQuery/)**

# c++ - 为什么我的计算失败了？

> ID：13114854
> 
> 赞同：0
> 
> 时间：2012-10-29T01:26:06.467
> 
> 标签：c++, class, compiler-construction, unresolved-external, lnk

我几乎完成了这个程序。我唯一的问题是我的计算，我猜。我的号码完全关闭。我太新了，无法发布图片，所以这是我的输出的链接。示例：http: [//imageshack.us/photo/my-images/62/16902078.jpg/](http://imageshack.us/photo/my-images/62/16902078.jpg/)

数字天数.h

```
#ifndef NUMDAYS_H
#define NUMDAYS_H
#include <iostream>
#include <math.h>
using namespace std;

class NumDays
{
private:
    double hours, days;
    void calcDays();
public:
    // Constructors
    NumDays();
    NumDays(double);
    // Mutator Functions
    void setHours(double);

    // Accessor Functions
    double getHours();
    double getDays();

    // Overloaded operator functions
    NumDays operator + (const NumDays &);   // Overloaded +
    NumDays operator - (const NumDays &);   // Overloaded -
    NumDays operator ++ ();                 // Overloaded Prefix ++
    NumDays operator ++ (int);              // Overloaded Postfix ++
    NumDays operator -- ();                 // Overloaded Prefix --
    NumDays operator -- (int);              // Overloaded Postfix --

};
#endif 
```

NumDays.cpp

```
// Implementation file for the NumDays class
#include <iostream>
#include <math.h>
#include "NumDays.h"
using namespace std;

// Recalculation function
void NumDays::calcDays()
{
    days = hours / 8;
}

// Default Constructor
NumDays::NumDays()
{
    hours = 0;
    days = 0;
}

// Constructor 1
NumDays::NumDays(double h)
{
    hours = h;         
    days = hours * 1 / 8;   
}

// Mutatory Functions
void NumDays::setHours(double h)
{
    hours = h;
}

// Accessor Functions
double NumDays::getHours()
{
    return hours;
}

double NumDays::getDays()
{
    NumDays::calcDays();
    return days;
}

// Overloaded operator functions
NumDays NumDays::operator + (const NumDays &a)
{
    NumDays temp;
    temp.hours = this->hours + a.hours;
return temp;
}

NumDays NumDays::operator - (const NumDays &a)
{
    NumDays temp;
    temp.hours = this->hours + a.hours;
    return temp;
}

NumDays NumDays::operator ++ ()
{
    ++hours;
    calcDays();
    return *this;
}

NumDays NumDays::operator -- ()
{
    --hours;
    calcDays();
    return *this;
}

NumDays NumDays::operator ++ (int)
{
    NumDays temp(*this);
    ++hours;
    return temp;
}

NumDays NumDays::operator -- (int)
{
    hours--;
    calcDays();
    return *this;
} 
```

主文件

```
#include <iostream>
#include "NumDays.h"
using namespace std;

int main()
{
    double hours1, hours2;

    //Prompt for the data for the first 2 objects
    cout << "Enter the number of hours for the the object called One: ";
    cin >> hours1;
    cout << "Enter the number of hours for the the object called Two: ";
    cin >> hours2;

    // Define two objects of WorkHours
    NumDays one(hours1), two(hours2);

    cout << "One: " << one.getDays() << " day(s)" << endl;
    cout << "Two: " << two.getDays() << " day(s)" << endl << endl;

    // Demonstrate addition and subtraction operators
    cout << "Three = One + Two: " << (one - two).getDays() << " day(s)" << endl;
    cout << "One - Two: " << (one - two).getDays() << " day(s)" << endl << endl;

    // Define a third and fourth object to be used for further operator demonstrations
    NumDays three(one + two), four;

    // Demonstrate increment and decrement operators
    four = three++;
    cout << "Four = Three++ " << endl;
    cout << " Three: " << three.getDays() << " day(s)" << endl;
    cout << " Four: " << four.getDays() << " day(s)" << endl << endl;

    four = ++three;
    cout << "Four = ++Three: " << endl;
    cout << " Three: " << three.getDays() << " day(s)" << endl;
    cout << " Four: " << four.getDays() << " day(s)" << endl << endl;

    four = three--;
    cout << "Four = Three--: " << endl;
    cout << " Three: " << three.getDays() << " day(s)" << endl;
    cout << " Four: " << four.getDays() << " day(s)" << endl << endl;

    four = --three;
    cout << "Four = --Three: " << endl;
    cout << " Three: " << three.getDays() << " day(s)" << endl;
    cout << " Four: " << four.getDays() << " day(s)" << endl;

    system("pause");
    return 0;
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-29T01:28:42.427

那么，你的`operator <<`函数的实现在哪里呢？

您发布的代码不包含任何内容。你在`NumDays.h`

```
friend ostream &operator << (ostream &, NumDays &); 
```

`NumDays.cpp`但在其他地方或任何地方都没有对它的定义。

显然，链接器告诉您它找不到它。我也不行。

你必须去你的`NumDays.cpp`并**实施**你的运营商`<<`和`>>`那里

```
ostream &operator << (ostream &s, NumDays &n)
{
  // Whatever
  return s;
}

istream &operator >> (istream &s, NumDays &n);
{
  // Whatever
  return s;
} 
```

# wordpress - 如何在 wordpress 中创建指向特定页面的链接？

> ID：13114856
> 
> 赞同：1
> 
> 时间：2012-10-29T01:26:27.883
> 
> 标签：wordpress, hyperlink

这似乎是一项简单的任务，但我很难找到有关此的任何信息。基本上，我在 wordpress 中创建了一个“事件”页面，我想在我的主页上创建一个链接。我不希望它像（https://mysite.com/events）一样是静态的。有没有办法动态地做到这一点？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-10-29T01:27:53.830

您想使用`get_permalink()`函数来编写链接 - [http://codex.wordpress.org/Function_Reference/get_permalink](http://codex.wordpress.org/Function_Reference/get_permalink)

此函数接受一个参数，该参数是帖子或页面 ID（默认为当前页面的 ID），因此如果您的事件页面是 ID #11，它看起来也需要链接文本与页面标题匹配（例如，将来是否应该更改为“Events！”）：

```
<?php $events_page = get_post(11); ?>
<a href="<?php echo get_permalink($events_page->ID); ?>"><?php echo $events_page->post_title; ?></a> 
```

# bash - Applescript .app 总是给出 -1708

> ID：13114860
> 
> 赞同：1
> 
> 时间：2012-10-29T01:27:07.590
> 
> 标签：bash, applescript, runtime-error

我正在做一个基本的 pingtest 来扩展我对 bash 和 Applescript 的了解，所以我做了这个：

```
on run argv
try
    if (count argv) is less than 1 or (count argv) is greater than 1 then
        set IP_address to ""
        set dialog_1 to display dialog "Enter IP Address:" default answer "" with title "Ping"
        set the IP_address to the text returned of dialog_1
        try
            set ping to (do shell script "ping -c 2 " & IP_address)
            display dialog "Connection Successful." buttons {"OK"} default button 1
            return 1
        on error
            --if we get here, the ping failed
            display dialog "Conection failed. Host is down" buttons {"Darn"} default button 1
            return 0
        end try
    end if
    if (count argv) = 1 then
        set IP_address to item 1 of argv
        try
            set ping to (do shell script "ping -c 2 " & IP_address)
            return 1
        on error
            -- if we get here, the ping failed
            return 0
        end try
    end if
on error error_message number error_number
    if (error_number) is not equal to -128 then
        display alert ("An error has occured!") message error_message & (" Error number ") & error_number & "."
    end if

    return error_number
end try 
```

结束运行

（我无法在代码片段中结束运行）

在bash中我做了这个：

!/bin/bash currentDir= `pwd` Success= `$currentDir/$1/Contents/MacOS/applet $2` echo $Success

（我无法在代码片段中得到任何内容）

当我只运行 AppleScript 时，它在编辑器中运行良好，但 .app 和 bash 版本给了我 -1708 错误。我已将问题缩小到这个：`if (count argv) is less than 1 or (count argv) is greater than 1 then`

我能做些什么来解决这个问题，或者甚至只是让我的代码更整洁？

谢谢

编辑（1）：如果我的程序没有提供任何参数，我希望我的程序运行一个 GUI 版本，并且当它被传递参数时，我希望它在后台运行。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-29T04:50:34.013

您可以像这样直接从 bash 将参数传递给 AppleScript：

```
--AppleScript named myScript.scpt
    on run {argv}
        beep argv
    end run 
```

命令：

```
osascript -e 'run script "/Users/user1781742/Desktop/myScipt.scpt" with parameters {2}' 
```

# c++ - C++/V8 调用非静态函数/创建临时实例的便捷方式

> ID：13114861
> 
> 赞同：-2
> 
> 时间：2012-10-29T01:27:26.060
> 
> 标签：c++, v8, temporary-objects

我正在寻找一种方法来解决这个问题（可行）：

```
HandleScope scope;
scope.Close(stuff); 
```

变成*这样*：

```
(HandleScope scope).Close(stuff); 
```

我试过：

```
HandleScope::Close(stuff); 
```

但它不起作用。

[@Xeo]

这是V8的这个类。

[http://bespin.cz/~ondras/html/classv8_1_1HandleScope.html](http://bespin.cz/~ondras/html/classv8_1_1HandleScope.html)

* * *

如果你投反对票，至少解释一下你为什么这样做。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-29T01:29:22.620

这只能通过构造函数来完成。变量声明和函数调用都是语句。为什么要这么做？您按代码付费`;`？

正如@Adam 指出的那样，如果函数是静态的，则可以直接调用它，但是根本不需要创建该类的实例。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-10-29T01:29:54.000

如果函数是静态的，我想你可以调用`MyClass::static_fn();`

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-29T10:59:05.257

如果我正确猜测这`Close`是一种非静态方法，那么您希望的正确语法是

```
HandleScope().Close(stuff); 
```

`HandleScope`创建一个临时实例，`Close`在其上调用，然后立即销毁该临时实例。

# openlayers - 未知宽度的Openlayers矢量图层外部图形

> ID：13114863
> 
> 赞同：2
> 
> 时间：2012-10-29T01:27:49.697
> 
> 标签：openlayers

我有一个 OpenLayers 矢量图层，对于该层中的点，我使用了一个外部图形，即该位置的名称。每个地方都有不同的名称，因此图像宽度也不同。而不是让名称以点为中心，我希望它指向指向该点的一侧（我猜该图形的形状有点像路标）。通过将graphicXOffset设置为0，我可以很容易地将图像移动到一边，但我无法设置graphicWidth，因为我不知道图像的宽度。

如果我将其设置为错误的值，则图像会被压扁。如果我不设置图形高度和图形宽度，则图像不会出现。

我目前唯一的想法是使图像具有固定宽度，额外空间是透明的，但该区域仍然是可点击的，这对用户来说会很奇怪。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-29T08:45:57.503

您是否在功能属性中存储图标的文件名并使用属性替换来设置 externalGraphic，即：

```
'externalGraphic': '${icon}' 
```

您可以为所有图像创建预定义的查找表并使用样式或样式映射的上下文函数：

```
var style = new OpenLayers.Style({
    externalGraphic: '${icon}',
    graphicWidth: '${getWidth}',
    /* etc... */
}, {
    context: {
        getWidth: function(feat) {
            var lookup = {
                'london.png': 120,
                'manchester.png': 150
            }
            var defaultWidth = 100;
            return lookup[feat.attributes.icon] || defaultWidth;
        }
    }
}); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-31T00:36:45.710

1.  为图层添加事件监听器`'beforefeatureadded'`
2.  对另一个返回图像大小的 Web 服务方法进行同步 AJAX 调用。
3.  然后将`width`和设置`height`为特征的属性。
4.  在样式中使用`${widthAttr}`、`${heightAttr}`替换。

# algorithm - 我正在编写排序算法 - Shellsort。错误在哪里？

> ID：13114865
> 
> 赞同：-3
> 
> 时间：2012-10-29T01:27:52.590
> 
> 标签：algorithm, shell, sorting, shellsort

我正在编写排序算法——Shellsort。错误在哪里？

```
int shellsort( int ai_numbers[], const int ci_count ){

    int i, j, temp, counter = 0, inc;
    inc = ci_count / 2;

    while ( inc > 0 )
    {
        for ( i = inc + 1; i < ci_count ; i++)
        {
            temp = ai_numbers[i];
            j = i;

            while ( j > inc && ai_numbers[j - inc] > temp )
            {
                ai_numbers[j] = ai_numbers[j - inc];
                j = j - inc;
                counter++;
            }
            ai_numbers[j] = temp;
        }

        inc = (int) (inc / 2.2);
    }
    return counter;
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-29T15:22:19.860

内循环中的条件，

```
while ( j > inc && ai_numbers[j - inc] > temp ) 
```

导致算法甚至看不到`ai_numbers[0]`. 该算法似乎在编写时考虑到了基于 1 的数组索引。

循环控制应该是

```
for ( i = inc; i < ci_count ; i++) 
```

和

```
while ( j >= inc && ai_numbers[j - inc] > temp ) 
```

正确地纳入`ai_numbers[0]`.

# php - 使用正则表达式解析会话数据

> ID：13114868
> 
> 赞同：0
> 
> 时间：2012-10-29T01:27:56.597
> 
> 标签：php, regex

我有一个来自会话的数据，我想基于正则表达式进行解析。以下是我想要登录的 3 个数据，名字和姓氏。

```
login = James 
firstName = James.S 
lastName = Steal

Array (
[user] => __PHP_Incomplete_Class Object (
    [__PHP_Incomplete_Class_Name] => DEX_User
    [permissionID:DE_User:private] => 9
    [login:DE_User:private] => James.S
    [email:DE_User:private] => james.s@domain.com
    [firstName:DE_User:private] => James
    [lastName:DE_User:private] => Steal
    [title:DE_User:private] => Warehouse Man
    [manager:DE_User:private] => Manager's Name
    [workPhone:DE_User:private] => +1 (111) 111-1111
    [mobilePhone:DE_User:private] => +1 (222) 222-2222
    [homePhone:DE_User:private] => +1 (333) 333-3333
    [im:DE_User:private] =>
    [timeDelta:DE_User:private] => Asia/Hongkong
    [lastLogin:DE_User:private] => __PHP_Incomplete_Class Object ( 
        [__PHP_Incomplete_Class_Name] => GB_Date
        [valueStored:protected] => 13545544126666309821
        [mode:protected] => BASE
        [master:protected] =>
    )
    [description:DE_User:private] => Warehouse Engineer
    [isActive:DE_User:private] => __PHP_Incomplete_Class Object (
        [__PHP_Incomplete_Class_Name] => GB_Boolean
        [valueStored:protected] => 1
        [mode:protected] => BASE
        [master:protected] =>
    )
    [isTerminate:DE_User:private] => __PHP_Incomplete_Class Object (
        [__PHP_Incomplete_Class_Name] => GB_Boolean
        [valueStored:protected] =>
        [mode:protected] => BASE
        [master:protected] =>
    )
    [id:protected] => 231968
    [isModifyed:protected] => 
    [needInsert:protected] => 
    [isDeleted] => 
    [isRemoved] => 
)
[enter_password] => 2asas(qwqw) 
```

我试图执行正则表达式`'/\[[\/]?[A-Za-z0-9]+\]/';`，但我只能在括号内得到它。

谢谢你。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-29T05:12:58.173

您可以评估它，而不是使用 RegExp 解析它。

看看`var_export($_SESSION['user']);`。这将返回一个可解析的字符串，您将看到的唯一问题是：

```
__PHP_Incomplete_Class::__set_state 
```

"__PHP_Incomplete_Class" 表示，Session 启动时类未知，仍然无法解析字符串。

但是您可以获取由返回的字符串`var_export($_SESSION['user'],true)`，替换出现的`__PHP_Incomplete_Class::__set_state`with`array`并且可以评估该字符串：

```
eval('$user='.str_replace('__PHP_Incomplete_Class::__set_state',
                          'array',
                          var_export($_SESSION['user'],true)).';');

echo $user[0]['login'].',<br/>'.
     $user[0]['firstName'].',<br/>'.
     $user[0]['lastName']; 
```

# objective-c - 如何检查函数的参数是否为零？

> ID：13114870
> 
> 赞同：0
> 
> 时间：2012-10-29T01:27:57.400
> 
> 标签：objective-c

我制作了 Sender 类和 sender 对象：

```
Sender *sender = [[Sender alloc] init]; 
```

然后，我写了测试：

```
// should success
[sender upload:[UIImage imageNamed:@"test2.jpg"] withName:@"test2.jpg"];
// should fail
[sender upload:nil withName:@"test2.jpg"]; 
```

然后，我写了 nil 检查代码：

```
- (void)upload:(UIImage *)image withName:(NSString *)name
{
    if ([image isEqual:nil]) {
        ...
    }
    ...
} 
```

但 nil 检查被忽略。如何检查图像参数是否为零？谢谢你的好意。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-29T01:32:08.177

尝试

```
if(!image) 
```

或者

```
if(image == nil) 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-29T02:08:19.567

简短的回答，替换`[image isEqual:nil]`为`image == nil`.

长答案，当你写：

```
[image isEqual:nil] 
```

您要求将消息`isEqual:`发送到其引用存储在变量中的对象`image`。

但是，您不希望向对象发送消息，而是希望确定变量是否`image`包含对对象的引用。为此，您需要将您的参考*值*与“无参考”值进行比较 - 这是写的`nil`。Objective-C（和 C 等）中的值比较运算符是`==`所以你需要测试：

```
image == nil 
```

现在你可能会问，既然没有对象可以发送消息，为什么你的代码执行没有错误，只是没有产生你期望的结果？Objective-C 支持向“无对象”（又名）发送消息`nil`，并为结果类型（即 ie 等）返回“零”值`0`。`nil`当转换为布尔值时，如在您的`if`语句中，“零”值产生`NO`.

高温高压

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-29T03:08:32.067

@yeesterbunny 的回答是关于在这种情况下你应该做什么，但知道为什么也很好。

请记住，每个 objc 方法调用都是一条消息。你打电话时

```
[objA isEqual:objB] 
```

您正在向 objA 发送一条消息，询问它是否认为自己与 objB“相等”。

如果您的方法的“图像”参数为 nil，则没有任何内容可以发送消息。根据定义，任何给 nil 的消息都返回 nil。（并且“nil”与 if 语句中的零相同。）

故事的寓意：如果您正在寻找 nil，则使用 ==（或！=，或隐式如“if (!image)”）测试指针相等性。使用 isEqual：仅当您想测试两个对象（已知存在且类型相似）在语义上是否相等时（例如，当您想知道 NSString 的两个实例是否包含相同的文本时）。

# php - 我把这个 PHP 代码放在哪里？

> ID：13114873
> 
> 赞同：0
> 
> 时间：2012-10-29T01:28:24.890
> 
> 标签：php, image

我正在尝试让网页显示图像，但它似乎不起作用。

这是代码：

```
 <?php
$files = glob("images/*.*");
for ($i=1; $i<count($files); $i++)
{
    $num = $files[$i];
    echo '<img src="'.$num.'" alt="random image">'."&nbsp;&nbsp;";
    }
?> 
```

如果代码应该工作，我把它放在哪里？如果没有，有没有更好的方法来做到这一点？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-29T01:32:20.937

您需要将此代码放在包含名为“images”的目录的目录中。名为“images”的目录还需要具有`*.*`名称格式的文件。肯定有更好的方法来做你想做的事情。这将使用包含您要显示的所有图像的数据库。

如果这不适合您想要做的事情，那么您必须更具描述性。我不知道你想做什么，我从你展示给我们的代码中得到的只是将名为“images”的目录中的每个文件渲染为图像。

但是，如果这篇文章的这一点只是简单地问“我如何执行 PHP？”，请做一些搜索，不要用这样的问题来打扰我们。

@zerkms 注意到的另一件事是您的`for ..`循环从迭代 1 ( `$i = 1`) 开始。这意味着将跳过数组中的结果。

```
for ($i = 0; $i < count($files); $i++) { 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-29T01:32:40.647

此代码片段遍历目录 images/ 中的文件，并回显其包含在`<img>`标签中的文件名。你不会把它放在你想要图像的地方吗？

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-29T01:36:39.600

这将进入您列出图像的文件夹`images.php`的父目录中的 PHP 文件（例如） 。`images`您还可以使用以下语法简化循环（并更正它，因为数组索引应该从 开始`0`，而不是）：`1`

```
<?php
foreach (glob("images/*.*") as $file){
    echo '<img src="'.$file.'" alt="random image">&nbsp;&nbsp;';
}
?> 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-29T02:02:37.327

```
/**
* Lists images in any folder as long as it's inside your $_SERVER["DOCUMENT_ROOT"].
* If it's outside, it's not accessible.
* Returns false and warning or array() like this:
* 
* <code>
* array('/relative/image/path' => '/absolute/image/path');
* </code>
* 
* @param string $Path
* @return array/bool
*/
function ListImageAnywhere($Path){
    // $Path must be a string.
    if(!is_string($Path) or !strlen($Path = trim($Path))){
        trigger_error('$Path must be a non-empty trimmed string.', E_USER_WARNING);
        return false;
    }
    // If $Path is file but not folder, get the dirname().
    if(is_file($Path) and !is_dir($Path)){
        $Path = dirname($Path);
    }
    // $Path must be a folder.
    if(!is_dir($Path)){
        trigger_error('$Path folder does not exist.', E_USER_WARNING);
        return false;
    }
    // Get the Real path to make sure they are Parent and Child.
    $Path = realpath($Path);
    $DocumentRoot = realpath($_SERVER['DOCUMENT_ROOT']);
    // $Path must be inside $DocumentRoot to make your images accessible.
    if(strpos($Path, $DocumentRoot) !== 0){
        trigger_error('$Path folder does not reside in $_SERVER["DOCUMENT_ROOT"].', E_USER_WARNING);
        return false;
    }
    // Get the Relative URI of the $Path base like: /image
    $RelativePath = substr($Path, strlen($DocumentRoot));
    if(empty($RelativePath)){
        // If empty $DocumentRoot ===  $Path so / will suffice
        $RelativePath = DIRECTORY_SEPARATOR;
    }
    // Make sure path starts with / to avoid partial comparison of non-suffixed folder names
    if($RelativePath{0} != DIRECTORY_SEPARATOR){
        trigger_error('$Path folder does not reside in $_SERVER["DOCUMENT_ROOT"].', E_USER_WARNING);
        return false;
    }
    // replace \ with / in relative URI (Windows)
    $RelativePath = str_replace('\\', '/', $RelativePath);
    // List files in folder
    $Files = glob($Path . DIRECTORY_SEPARATOR . '*.*');
    // Keep images (change as you wish)
    $Files = preg_grep('~\\.(jpe?g|png|gif)$~i', $Files);
    // Make sure these are files and not folders named like images
    $Files = array_filter($Files, 'is_file');
    // No images found?!
    if(empty($Files)){
        return array(); // Empty array() is still a success
    }
    // Prepare images container
    $Images = array();
    // Loop paths and build Relative URIs
    foreach($Files as $File){
        $Images[$RelativePath.'/'.basename($File)] = $File;
    }
    // Done :)
    return $Images; // Easy-peasy, general solution!
}

// SAMPLE CODE COMES HERE
// If we have images...
if($Images = ListImageAnywhere(__FILE__)){ // <- works with __DIR__ or __FILE__
    // ... loop them...
    foreach($Images as $Relative => $Absolute){
        // ... and print IMG tags.
        echo '<img src="', $Relative, '" >', PHP_EOL;
    }
}elseif($Images === false){
    // Error
}else{
    // No error but no images
} 
```

**试穿这个尺寸。**评论是不言自明的。

# android - 在android中旋转90度

> ID：13114876
> 
> 赞同：1
> 
> 时间：2012-10-29T01:28:52.197
> 
> 标签：android, bitmap, rotation, android-canvas

我正在使用数组作为像素在画布上绘图：

```
 g.drawBitmap(imageBuffer, offset, stride, 0, 0, width, height, false, mPaint); 
```

由于 imageBuffer 是一个数组，而不是位图，我如何旋转，同时尽量减少在内存中复制数据的额外工作？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-01T14:11:17.587

假设这`g`是您正在绘制的画布，您可以通过以下方式轻松完成此操作：

```
g.save();
g.rotate(degrees);
g.drawBitmap(imageBuffer, offset, stride, 0, 0, width, height, false, mPaint);
g.restore(); 
```

应该就是这样。

# c# - 根据 MVC ASP.net 的 LINQ 查询中的每条记录运行总计

> ID：13114878
> 
> 赞同：0
> 
> 时间：2012-10-29T01:29:10.930
> 
> 标签：c#, .net, sql, linq

我遇到了两个问题：

我尝试将 ROW_NUMBER 分配给我的 SQL 视图并根据行号进行运行总和（因此根据每条记录获取总和），但由此产生的性能影响非常明显。

我知道如何在 T-SQL 中为日期执行此操作：

[![在此处输入图像描述](../Images/655ef8e55f11f18be1c25f5ec28b0a1a.png)](https://i.stack.imgur.com/WevNY.gif)

此 SQL 语句中的`RunningTotal`列正是我所需要的（逐项汇总）。

[![在此处输入图像描述](../Images/0349731e165adabee244dd812859cf8d.png)](https://i.stack.imgur.com/7mHFj.gif)

但是执行起来需要很长时间。

**更新 2**
这是我创建第二个视图的方式。

```
CREATE VIEW [dbo].[vCI_UNIONALL_ROW] AS
SELECT ROW_NUMBER() OVER(ORDER BY EffChkDt DESC) AS [Row]
    ,*
FROM vCI_UNIONALL
GO 
```

我的模型：

```
public class UnionAllModel
{
    public int? InvoiceNumber { get; set; }
    [DataType(DataType.Currency)]
    public Decimal? Amount { get; set; }
    [DataType(DataType.DateTime)]
    public DateTime? EffChkDt { get; set; }
    [omitted for clarity]
} 
```

到目前为止，这是我的 LINQ 查询：

```
using (var db = new PLOGITENS01Entities())
{
    var rvUnionAll = (from u in db.vCI_UNIONALL
                      orderby u.EffChkDt ascending
                      select new UnionAllModel()
                      {
                          InvoiceNumber = u.InvoiceNumber,
                          Date = u.Date,
                          AccountNumber = u.AccountNumber,
                          ClientName = u.ClientName,
                          Amount = u.Amount,
                          InAmount = u.InAmount,
                          OutAmount = u.OutAmount,
                          ClientRiskAdjs = u.ClientRiskAdjs,
                          SpecificAdjs = u.SpecificAdjs,
                          EffChkDt = u.EffChkDt,
                          PayStatus = u.PayStatus,
                          Type = u.Type
                      })
                     .ToList();

    return View(new GridModel(rvUnionAll));
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2021-05-12T10:23:53.267

您可以尝试创建将值添加到局部变量的运行总和：

```
int runningSum = 0;
var rvUnionAll = (from u in db.vCI_UNIONALL.AsEnumerable()
                      orderby u.EffChkDt ascending
                      select new UnionAllModel()
                      {
                          InvoiceNumber = u.InvoiceNumber,
                          Date = u.Date,
                          AccountNumber = u.AccountNumber,
                          ClientName = u.ClientName,
                          Amount = u.Amount,
                          InAmount = u.InAmount,
                          OutAmount = u.OutAmount,
                          ClientRiskAdjs = u.ClientRiskAdjs,
                          SpecificAdjs = u.SpecificAdjs,
                          EffChkDt = u.EffChkDt,
                          PayStatus = u.PayStatus,
                          Type = u.Type,
                          RunningSum = runningSum += u.Amount
                      })
                     .ToList(); 
```

# c - 打印二进制文件

> ID：13114879
> 
> 赞同：0
> 
> 时间：2012-10-29T01:29:11.287
> 
> 标签：c

假设你有一个文件 dog.txt

```
The
quick
brown
fox
jumps
over
the
lazy
dog 
```

您可以像这样打印行

```
#include <stdio.h>
int 
main (void)
{
  char buf[10];
  FILE *fp = fopen ("dog.txt", "r");
  while (fgets (buf, sizeof buf, fp))
    printf ("%s", buf);
  return 0;
} 
```

但是，如果每个“行”由空字符 ( `\0`) 分隔，而不是换行符 ( `\n`) 会怎样？您将如何打印每条“行”？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-29T01:32:35.507

如果文件不是文本文件（即，如果它包含不可打印的 ASCII 字符），则将其视为二进制文件。

与其一次读取一个“行”（这是一个文本文件概念），不如一次读取一个缓冲区（例如一次读取 1024 个字符）。

一次输出您读取的每个字符，除非您遇到文件使用的任何行分隔符（例如问题中的“空”字符）。遇到该字符时，改为输出换行符。

您可以通过包含“b”标志以二进制模式打开文件，例如

```
FILE *fp = fopen("dog.txt", "rb"); 
```

使用[fread](http://www.cplusplus.com/reference/clibrary/cstdio/fread/)一次读取一个缓冲区的数据。

```
n = fread(buffer, sizeof(char), BUFFER_SIZE, source); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-29T01:33:05.053

“文本”文件处理和任何其他文件处理之间的区别在于“文本”函数假设某些事情（例如，\n 是分隔符）。如果您不是这种情况，您显然不能使用“文本”操作功能。您这样做`fread`，并自己解析内容。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-05-18T06:55:39.027

这是 [WhozCraig](https://stackoverflow.com/users/1322972) 已删除答案的精简版

如果您只想将输入文件中的数据转储到标准输出，用换行符替换任何嵌入的空字符 (0)，那么就这样做。对于这个问题的简单性来说，预读缓冲确实有点过头了，此外，fopen/fread/etc.. 系列已经为你缓冲了。

注意：这*完全*假设OP 指定的内容，否则这是一个常规的“文本”文件，除了嵌入的空字符（0）应该被视为输出流中的换行符的奇怪之处：

```
#include <stdio.h>
#include <errno.h>

int main(int argc, char* argv[])
{
    FILE *fp = NULL;        
    fp = fopen(argv[1], "rb");        
    do
    {   // pull next char, break on EOF, subst '\n' on 0.
        int ch = fgetc(fp);
        if (EOF == ch)
            break;
        if (0 == ch)
            ch = '\n';
        fputc(ch, stdout);
    } while (true);

    fclose(fp);
    return EXIT_SUCCESS;
} 
```

# c++ - 在 C++ 中将对象数组设置为 null

> ID：13114881
> 
> 赞同：11
> 
> 时间：2012-10-29T01:29:15.117
> 
> 标签：c++, arrays, object, null

假设我在 C++ 中有一个 Foo 类型的对象数组：

```
Foo array[10]; 
```

在 Java 中，我可以简单地将这个数组中的一个对象设置为 null：

```
array[0] = null //the first one 
```

我怎样才能在 C++ 中做到这一点？

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2012-10-29T01:31:10.323

改用指针：

```
Foo *array[10];

// Dynamically allocate the memory for the element in `array[0]`
array[0] = new Foo();
array[1] = new Foo();

...

// Make sure you free the memory before setting 
// the array element to point to null
delete array[1]; 
delete array[0]; 

// Set the pointer in `array[0]` to point to nullptr
array[1] = nullptr;
array[0] = nullptr;

// Note the above frees the memory allocated for the first element then
// sets its pointer to nullptr. You'll have to do this for the rest of the array
// if you want to set the entire array to nullptr. 
```

请注意，您需要考虑 C++ 中的内存管理，因为与 Java 不同，它没有垃圾收集器，当您设置对 nullptr 的引用时，它会自动为您清理内存。此外，nullptr 是现代且正确的 C++ 方法，因为它并不总是指针类型，而不仅仅是零。

* * *

## 回答 #2

> 赞同：10
> 
> 时间：2012-10-29T01:32:34.017

所以，在这里忘记Java，它对你没有帮助。问你自己; 对象为空意味着什么？对象可以为空吗？答案是否定的，一个*对象*不能为空，但一个对象的引用（C++ 术语中的指针）可以。

在 java 中，您有引用类型，它们类似于引擎盖下的指针。但是，即使在 java 中，也不能将*对象*设置为 null，只能设置引用。

在 C++ 中，您拥有完全成熟的对象以及对对象的指针和引用。*指向对象（或原始类型）*的指针可以是 null ，但对象本身不能。

所以，当你创建一个`Foo`对象数组时，你有一个`Foo`对象数组。你没有指针，你有对象。如果您的数组是*指向*对象的指针数组，那么可以，您可以将它们初始化为`null`（`nullptr`在 C++0x 中），即它们不引用有效对象。

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2012-10-29T02:13:18.957

您拥有的另一种方法是使用一个动态的 Foo 指针数组，如下所示：

```
Foo** array = new Foo*[10];// Pointer of array of pointers. 
```

然后你可以初始化所有指向对象 Foo 的指针

```
for(int i=0;i<10;i++)
    array[i] = new Foo();// Give memory to pointers of object Foo in array 
```

将 null 分配给数组的一项：

```
array[0] = 0; 
```

我认为在 C++ 中，NULL 是 0。这意味着它甚至可以分配给一个 int 或任何可以接受 0 的地方。按照惯例，它只与指针一起使用。

要删除此内存：

```
for(int i=0;i<10;i++)
    delete array[i]; 
```

最后

```
delete[] array; 
```

代码示例：

```
#include <iostream.h>
#include <stdio.h>
class Foo
{
  private:
    int a;
  public:
    Foo()
    {
      a = 0;
    }
   void Set_V(int p){a = p;}
   int Get_V(){return a;}
};

int main()
{
  Foo **array = new Foo*[10];
  for(int i=0;i<10;i++)
   {
     array[i] = new Foo();
   }

  //array[0] = 0;
  for(int i=0;i<10;i++)
    array[i]->Set_V(i);
  for(int i=0;i<10;i++)
    cout<<array[i]->Get_V()<<endl;
  for(int i=0;i<10;i++)
    delete array[i];
  delete[] array;
  return 0;
} 
```

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-10-29T02:08:51.463

> 那么是否可以在不创建新元素的情况下“删除”数组中的元素？即在某种数组中打一个洞？

在 C++ 中，如果你有一个数组：

```
Foo array[10]; 
```

然后所有 10 个元素将被默认构造。一般来说，没有数组元素正在使用与“删除”的概念。跟踪这个想法的一种方法是让数组元素中的实际值是可选的，如下所示：

```
boost::optional<Foo> array[10]; 
```

[您可以在http://www.boost.org/doc/libs/release/libs/optional/](http://www.boost.org/doc/libs/release/libs/optional/)阅读有关 boost 库的`optional<>`库

为了记录替代方案，我将介绍一个可怕的替代方案。您可以在其中一个元素上调用析构函数：`array[3].~Foo();` 这是非常危险的，因为当数组本身超出范围时，将调用每个元素的析构函数，并且前提条件是要有一个正确构造的对象，所以你有确保事先在该元素中再次构造了一个 Foo （使用“放置”`new`）。数组本身没有任何内容可以帮助您跟踪哪些元素的析构函数已被您调用 - 您需要自己跟踪（在对象中对此进行一些记录可能在实践中有效，但访问销毁后的对象是未定义的行为）。您需要非常小心，在所有代码路径中 - 包括由于异常而导致的路径 - 您跟踪了暂时未使用的数组元素。你*真的*不想这样做。

如果您关心的是从数组中删除一个元素以节省内存，请使用智能指针：

```
shared_ptr<Foo> array[10]; 
```

然后，您可以独立控制特定的数组元素，当元素超出范围时，只有仍然填充的元素被破坏。合适的智能指针在 boost 或 C++11 中可用，或者您可以使用`std::auto_ptr<>`，但应该事先仔细阅读它的语义，看看它是否合适以及如何安全地使用它。

另外，如果有一个`Foo::operator=(Some_Type*)`then 你可以设置`array[3] = NULL;`，它会做任何赋值运算符对`array[3]`. 尽管如此，如果`Foo`不是一个指针，允许某人分配`NULL`给它可能是一个坏主意。

# python - numpy 和 pytables 问题（错误：元组索引超出范围）

> ID：13114899
> 
> 赞同：1
> 
> 时间：2012-10-29T01:32:21.503
> 
> 标签：python, numpy, pytables

我是 python 和 pytables 的新手。目前我正在写一个关于聚类和 KNN 算法的项目。这就是我所拥有的。

****** *** ** *** ** ****** 代码 ******* ****** ***** ****** ******* ****** ******* ****** ******* ******** ***_*****

 *****```
import numpy.random as npr
import numpy as np 
```

# step0：获取集群

```
dtype = np.dtype('f4')

pnts_inds = np.arange(100)
npr.shuffle(pnts_inds)
pnts_inds = pnts_inds[:10]
pnts_inds = np.sort(pnts_inds)
for i,ind in enumerate(pnts_inds):
    clusters[i] = pnts_obj[ind] 
```

# step1：将结果保存到名为 clst_fn.h5 的 HDF5 文件中

```
filters = tables.Filters(complevel = 1, complib = 'zlib')
clst_fobj = tables.openFile('clst_fn.h5', 'w')  
clst_obj = clst_fobj.createCArray(clst_fobj.root, 'clusters',
           tables.Atom.from_dtype(dtype), clusters.shape,
           filters = filters)
clst_obj[:] = clusters
clst_fobj.close() 
```

# step2：其他功能

废话

# step3：从 clst_fn 加载集群

```
pnts_fobj= tables.openFile('clst_fn.h5','r')
for pnts in pnts_fobj.walkNodes('/', classname = 'Array'):
    break 
```

#

# step4：唤起另一个函数（称为knn）。函数输入参数是来自 pnts 的数据。我已经单独检查了 knn 功能。如果输入为 pnts = npr.rand(100,128)，此函数运行良好

```
def knn(pnts):
    pnts = numpy.ascontiguousarray(pnts)
    N = ctypes.c_uint(pnts.shape[0])
    D = ctypes.c_uint(pnts.shape[1]) 
```

#

# 使用 clst_fn 中的集群调用 knn（参见步骤 3）

```
knn(pnts) 
```

****** *** ** *** **** ******* 代码 **结束********* ****** ******* ****** ***** ****** ******* ******** ******* *************

 *****我现在的问题是python通过显示给我带来了困难：错误：IndexError：元组索引超出范围此错误来自“D = ctypes.c_uint（pnts.shape [1]）”这一行。

显然，输入参数一定有问题。有没有想过解决这个问题？先感谢您。**********

# rest - 通过 URL 将图像发布到foursquare？

> ID：13114900
> 
> 赞同：0
> 
> 时间：2012-10-29T01:32:32.153
> 
> 标签：rest, api, foursquare, photo-upload

浏览[Foursquare 文档](https://developer.foursquare.com/docs/)，我发现了[照片添加](https://developer.foursquare.com/docs/photos/add)部分。

在其他社交平台的 API 中，我已经能够通过其源 URL 发布图像，例如：（`https://www.google.com/images/srpr/logo3w.png`例如，这在 Facebook 和 Tumblr 上是可能的）

`post*`该文档对开发人员预览参数的功能有点不清楚。

是否可以通过源 URL 将图像“上传”到 Foursquare？

（否则我可以将它添加到功能请求队列中吗？！）

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-29T20:21:41.873

目前无法通过 url 上传图片。您需要将图像数据与您的照片/添加请求一起上传。

# ruby-on-rails - 在 Ruby on Rails 中使用黄瓜/水豚测试弹出窗口

> ID：13114901
> 
> 赞同：3
> 
> 时间：2012-10-29T01:32:32.403
> 
> 标签：ruby-on-rails, ruby, ruby-on-rails-3, cucumber, capybara

我正在编写测试来测试确认和驳回构象弹出窗口的工作。但是，我收到错误：

```
And I dismiss popup                                     # features/step_definitions/web_steps.rb:74
  undefined method `switch_to' for #<Capybara::RackTest::Browser:0xa6f0dec> (NoMethodError)
  ./features/step_definitions/web_steps.rb:75:in `/^I confirm popup$/'
  features/add_session.feature:121:in `And I confirm popup' 
```

运行我的测试时。

我的 .features 文件中的步骤如下所示：

```
And I press "Delete"
And I confirm popup 
```

在 web_steps.rb 中，我定义了以下内容：

```
When /^I confirm popup$/ do
  #page.evaluate_script('window.confirm = function() { return true; }')
  #page.click('OK')
  page.driver.browser.switch_to.alert.accept
  #popup.confirm 
end

When /^I dismiss popup$/ do
  page.driver.browser.switch_to.alert.dismiss
  #page.evaluate_script('window.confirm = function() { return true; }')
  #page.click('Cancel')
  #popup.dismiss
end 
```

我正在使用我在 Gemfile 中包含的 prickle gem：

```
group :test do
  gem 'cucumber-rails'
  gem 'prickle'
end 
```

我在我的 Gemfile 中添加了几行，如此处所述[，](https://github.com/ExtractMethod/prickle#configuration)包括 prickle。我最初像 World 那样拥有它，就像它们在 github 页面上显示的那样，但这给了我错误，因为 World 被使用了两次（另一次在黄瓜库中）。这是我添加到 env.rb 文件中的行：

```
require 'prickle/capybara'    # require

module Prickle_helper
  include Capybara::DSL
  include Prickle::Capybara  # include  Prickle
end

World(Prickle_helper) 
```

关于可能导致我的错误的任何想法？谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-05T06:54:59.373

我在要使用 selenium 的方法之前省略了 @javascript。例如：

```
@javascript
Scenario: Delete the class
  Given I am on the home page
  And I press "Delete"
  And I confirm popup
  Then I am on the homepage
  And I should not see the deleted class 
```

# xml - 第一个最后一个元素

> ID：13114907
> 
> 赞同：2
> 
> 时间：2012-10-29T01:33:32.770
> 
> 标签：xml, xslt

XSLT XML 问题。

研究一个简单的转变。我有简单的索引 xml 输入。我必须为每一章输出第一个和最后一个元素。如下所示。任何帮助都感激不尽。

问候 JJ

输入

```
<book>
  <page number="1">Chapter01</page> 
  <page number="2">Chapter01</page> 
  <page number="3">Chapter01</page> 
  <page number="4">Chapter01</page> 
  <page number="5">Chapter01</page> 
  <page number="6">Chapter01</page> 
  <page number="7">Chapter02</page> 
  <page number="8">Chapter02</page> 
  <page number="9">Chapter02</page> 
  <page number="10">Chapter02</page> 
  <page number="11">Chapter02</page> 
  <page number="12">Chapter02</page> 
  <page number="13">Chapter03</page> 
  <page number="14">Chapter03</page> 
  <page number="15">Chapter03</page> 
  <page number="16">Chapter03</page> 
  <page number="17">Chapter03</page> 
  <page number="18">Chapter03</page> 
 </book> 
```

输出

```
<book>
  <page number="1">Chapter01</page>  
  <page number="6">Chapter01</page> 
  <page number="7">Chapter02</page> 
  <page number="12">Chapter02</page> 
  <page number="13">Chapter03</page> 
  <page number="18">Chapter03</page> 
</book> 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-29T02:27:19.393

*更新以利用更简洁的谓词 - 感谢@SeanB.Durkin。*

**一、XSLT 1.0 解决方案**

**当这个 XSLT：**

```
<?xml version="1.0" encoding="utf-8"?>
<xsl:stylesheet xmlns:xsl="http://www.w3.org/1999/XSL/Transform"
version="1.0">
  <xsl:output omit-xml-declaration="no" indent="yes" />
  <xsl:strip-space elements="*" />

  <xsl:key name="kChapters" match="page" use="." />

  <xsl:template match="/*">
    <book>
      <xsl:apply-templates 
        select="page[generate-id() = generate-id(key('kChapters', .)[1])]" />
    </book>
  </xsl:template>

  <xsl:template match="page">
    <xsl:copy-of select=".|key('kChapters', .)[last()]" />
  </xsl:template>

</xsl:stylesheet> 
```

**...应用于原始 XML：**

```
<book>
  <page number="1">Chapter01</page>
  <page number="2">Chapter01</page>
  <page number="3">Chapter01</page>
  <page number="4">Chapter01</page>
  <page number="5">Chapter01</page>
  <page number="6">Chapter01</page>
  <page number="7">Chapter02</page>
  <page number="8">Chapter02</page>
  <page number="9">Chapter02</page>
  <page number="10">Chapter02</page>
  <page number="11">Chapter02</page>
  <page number="12">Chapter02</page>
  <page number="13">Chapter03</page>
  <page number="14">Chapter03</page>
  <page number="15">Chapter03</page>
  <page number="16">Chapter03</page>
  <page number="17">Chapter03</page>
  <page number="18">Chapter03</page>
</book> 
```

**...产生了预期的结果：**

```
<?xml version="1.0"?>
<book>
  <page number="1">Chapter01</page>
  <page number="6">Chapter01</page>
  <page number="7">Chapter02</page>
  <page number="12">Chapter02</page>
  <page number="13">Chapter03</page>
  <page number="18">Chapter03</page>
</book> 
```

**解释：**

*   请注意正确使用[`Muenchian Grouping`](http://www.jenitennison.com/xslt/grouping/muenchian.html)来确定唯一`<page>`元素的值。
*   对于每个唯一`<page>`元素，复制两个`<page>`元素：包含唯一值的组中的第一个元素和最后一个元素。

* * *

**二、XSLT 2.0 解决方案**

请注意，在 XSLT 2.0 中，解决方案变得更加简单。

**当这个 XSLT：**

```
<?xml version="1.0" encoding="utf-8"?>
<xsl:stylesheet xmlns:xsl="http://www.w3.org/1999/XSL/Transform"
version="2.0">
  <xsl:output omit-xml-declaration="no" indent="yes" />
  <xsl:strip-space elements="*" />

  <xsl:template match="/*">
    <book>
      <xsl:for-each-group select="page" group-by=".">
        <xsl:copy-of select=".|current-group()[last()]" />
      </xsl:for-each-group>
    </book>
  </xsl:template>

</xsl:stylesheet> 
```

**...应用于原始 XML，产生相同的期望结果：**

```
<?xml version="1.0"?>
<book>
  <page number="1">Chapter01</page>
  <page number="6">Chapter01</page>
  <page number="7">Chapter02</page>
  <page number="12">Chapter02</page>
  <page number="13">Chapter03</page>
  <page number="18">Chapter03</page>
</book> 
```

**解释：**

*   应用了相同的方法，但使用了 XSLT 2.0 的[`for-each-group`](http://www.w3.org/TR/xslt20/#xsl-for-each-group)元素和`current-group()`指令，而不是 Muenchian Grouping。

# c++ - 如何填充贝塞尔曲线gdi c

> ID：13114908
> 
> 赞同：2
> 
> 时间：2012-10-29T01:33:59.027
> 
> 标签：c++, mfc, gdi+, bezier

我需要用颜色填充封闭的贝西尔曲线......谁能帮我改进这段代码，因为它不起作用：

```
 COLORREF collor = RGB(100,50,150);
    CPen g(PS_INSIDEFRAME, 50, collor);
    pDC->SetBkColor(RGB(90, 100, 128));
    pDC->SelectObject(&g);
    CPoint Pt[10]=
{ 

    CPoint(400, 260),
    CPoint(480, 260),
    CPoint(500, 260),
    CPoint(470, 290),
    CPoint(450, 350),
    CPoint(470, 370),
    CPoint(430, 370),
    CPoint(420, 391),
    CPoint(405, 410),
    CPoint(400, 260),
};
    pDC->PolyBezier(Pt, 10); 
```

谢谢！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-29T01:36:27.400

您需要选择一个已创建为纯色的画笔，并使用您要填充的颜色。

```
CBrush brush;
brush.CreateSolidBrush(collor);
CBrush * pOldBrush = (CBrush *) pDC->SelectObject(&brush);
...
pDC->SelectObject(pOldBrush); 
```

# scala - 为什么 PushEnumerator 会挂在这里？

> ID：13114911
> 
> 赞同：3
> 
> 时间：2012-10-29T01:34:53.027
> 
> 标签：scala, playframework, playframework-2.0, iterate

在一个 sbt play 项目`console-project`中，我运行并粘贴以下代码：

```
import play.api.libs.iteratee._

val e = Enumerator.imperative[String]()

e.push("foo")
e.push("bar")
e.push("bah")
e.close

val i: Iteratee[String, String] = Iteratee.consume[String]()

val applied = (e andThen Enumerator.eof) |>> i

Iteratee.flatten(applied).run.value.get 
```

但是它会因超时而死。我在这里做错了吗？

# java - 我如何获取先前计算的 x 和 y 值并将它们放入 g.drawLine 参数中

> ID：13114913
> 
> 赞同：1
> 
> 时间：2012-10-29T01:35:02.923
> 
> 标签：java, graphics

我正在尝试创建一个程序，该程序采用 y=mx+b 形式的用户输入字符串，并使用输入的方程绘制一条线。我唯一不满意的是这个单一的问题：如何获取计算的 x 和 y 值并将它们放在 g.drawLine 参数中？

```
 public void paint(Graphics g){
    g.drawLine(x,y,x2,y2);
    g.setColor(Color.black);
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-29T01:40:09.190

您可以定义一个具有 m、b 等实例变量的 Line 类，并让其paint 或 display 方法使用这些变量绘制一条线。然后，从该类中创建一个 Line 对象并在该类中调用其绘制方法（将图形对象作为参数传递）。这将有一个额外的好处，如果您想绘制多条线，您可以只创建多个 Line 对象并调用它们的每个绘制方法。

主要是这样的：

```
public void paint(Graphics g) {
    myLine.paint(g);
    ... 
```

...在 Line 类中：

```
public void paint(Graphics g) {
    g.drawLine(myx1, myy1, myx2, myy2);
    .... 
```

* * *

编辑：如果您想要一个非常快速的解决方案并且不需要使程序可扩展，您还可以将行的属性存储为主类的[静态变量](http://www.javatutorialhub.com/java-static-variable-methods.html)。那看起来像：

```
class Main {
    static int lineInformation;

    void userInputMethod() {
        lineInformation = ... // the user input
        ...
    }

    public void paint(Graphics g) {
        g.drawLine(lineInformation,...);
        ...
    }
} 
```

不过，我肯定会再次为您以后使用或修改的程序推荐一个 Line 类。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-29T01:38:30.913

一份粗略的清单

1.  从字符串中提取 m 和 b。
2.  为 x 插入 0 并将 (x,y) 对用作第一个点
3.  插入 x 的宽度并将该结果用于第二个点
4.  `-y + height`如果您希望它在我们向上移动时随着 y 的增长而绘制成图表，您需要采取

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-29T01:48:24.293

这将确保线条填充组件的区域：

```
double m= ...
double b= ...
double x=g.getClipBounds().x;
double x2=g.getClipBounds().x+g.getClipBounds().width;
g.drawLine(x,m*x+b,x2,m*x2+b); 
```

# android - Android SDK Samsung Galaxy 模拟器安装？

> ID：13114926
> 
> 赞同：0
> 
> 时间：2012-10-29T01:37:05.357
> 
> 标签：android

正如标题中所述，我无法在 Android SDK 管理器（修订版 20.0.3）中找到用于安装的三星 Galaxy 选项。

有人可以帮忙吗？

PS：我看过的地方都说应该有第三方选项或者应该在Android 2.3下，但它不存在。

感谢您的帮助。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-29T04:27:04.527

您可以（并且可能必须）使用您尝试复制的设备的规格创建一个模拟器图像。如果您正在寻找预建的，则必须与相应的制造商核实。如果您希望在模拟器版本上看到 TouchWiz 或 HTC Sense，您不会因为这些是专有皮肤。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-06-26T15:46:38.123

但是，Android != Android 和三星使用他们自己修改过的 webkit 等等。仅从硬件规格中做出最佳猜测就与使用 chrome 一样有效。

# objective-c - 选择器视图一旦关闭就不会重新出现，并且文本字段再次单击

> ID：13114927
> 
> 赞同：0
> 
> 时间：2012-10-29T01:37:15.003
> 
> 标签：objective-c, ios, uipickerview

这是一个简化的代码，视图控制器只有一个文本字段，我还更新了标题以反映较新的问题。

运行时，我单击文本字段，它会打开选​​择器视图，我可以单击选择器视图上的一个值，它会显示在文本字段上。当我按下导航栏上的完成按钮时，我现在可以关闭选择器视图。但是现在当我第二次单击文本字段时，我没有第二次弹出选择器视图。

# 进口

```
@interface MyPickerViewViewController : UIViewController <UIPickerViewDelegate,
                                                      UIPickerViewDataSource,
                                                      UITextFieldDelegate>

@end

@interface MyPickerViewViewController () {
    UIPickerView *_pv;
    NSArray *_array;
    IBOutlet __weak UITextField *_tf;
}

@end

@implementation MyPickerViewViewController

- (void)viewDidLoad
{
    [super viewDidLoad];

    _array = [NSArray arrayWithObjects:@"One", @"Two", @"Three", nil];

// Do any additional setup after loading the view, typically from a nib.
    _pv = [[UIPickerView alloc] initWithFrame:CGRectZero];
    _pv.dataSource = self;
    _pv.delegate = self;
    _tf.inputView = _pv;

    UIToolbar*  mypickerToolbar = [[UIToolbar alloc] initWithFrame:CGRectMake(0, 0, 320, 56)];
    mypickerToolbar.barStyle = UIBarStyleBlackOpaque;
    [mypickerToolbar sizeToFit];
    NSMutableArray *barItems = [[NSMutableArray alloc] init];
    UIBarButtonItem *flexSpace = [[UIBarButtonItem alloc]    initWithBarButtonSystemItem:UIBarButtonSystemItemFlexibleSpace target:self action:nil];
    [barItems addObject:flexSpace];
    UIBarButtonItem *doneBtn = [[UIBarButtonItem alloc] initWithBarButtonSystemItem:UIBarButtonSystemItemDone target:self action:@selector(pickerDoneClicked:)];
    [barItems addObject:doneBtn];
    [mypickerToolbar setItems:barItems animated:YES];
    _tf.inputAccessoryView = mypickerToolbar;

    _tf.delegate = self;

}

- (void)pickerDoneClicked:(id)sender
{
    [_pv removeFromSuperview];
    [_tf.inputView removeFromSuperview];
    [_tf.inputAccessoryView removeFromSuperview];
}

- (void)didReceiveMemoryWarning
{
    [super didReceiveMemoryWarning];
    // Dispose of any resources that can be recreated.
}

// Added this method and now the picker view comes up every time I
// click on the text field, even after I dismiss it. However, the
// picker view is in wrong place, so I just have to adjust the
// CGRect assigned to it.
- (BOOL)textFieldShouldBeginEditing:(UITextField *)textField
{
    [self.view addSubview:_tf.inputAccessoryView];
    [self.view addSubview:_tf.inputView];
    return NO;
}
- (void)textFieldDidBeginEditing:(UITextField *)textField
{
    NSLog(@"Hello there");
}

- (void)textFieldDidEndEditing:(UITextField *)textField
{
    [textField resignFirstResponder];
}

- (BOOL)textFieldShouldReturn:(UITextField *)textField
{
    [textField resignFirstResponder];
    return YES;
}

- (void)selectRow:(NSInteger)row inComponent:(NSInteger)component animated:(BOOL)animated
{

}

- (NSString *)pickerView:(UIPickerView *)pickerView titleForRow:(NSInteger)row forComponent:(    NSInteger)component
{
    return [_array objectAtIndex:row];
}

- (NSInteger)numberOfComponentsInPickerView:(UIPickerView *)pickerView
{
    return 1;
}

- (NSInteger)pickerView:(UIPickerView *)pickerView numberOfRowsInComponent:(NSInteger)component
{
    return _array.count;
}

- (void) pickerView:(UIPickerView *)pickerView didSelectRow:(NSInteger)row inComponent:(NSInteger)component
{
    _tf.text = [_array objectAtIndex:row];
}    

@end 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-31T14:25:35.350

请参阅此添加的更新

```
// Added this method and now the picker view comes up every time I
// click on the text field, even after I dismiss it. However, the
// picker view is in wrong place, so I just have to adjust the
// CGRect assigned to it.
- (BOOL)textFieldShouldBeginEditing:(UITextField *)textField
{    
    [self.view addSubview:_tf.inputAccessoryView];
    [self.view addSubview:_tf.inputView];
    return NO;
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-31T15:00:24.577

这是一个调整后的 CGRect 用于选择器视图和工具栏的工作。我想知道pickerview是否有默认高度？

```
- (void)viewDidLoad
{
    [super viewDidLoad];

    _array = [NSArray arrayWithObjects:@"One", @"Two", @"Three", @"Four", nil];

// Do any additional setup after loading the view, typically from a nib.
    CGRect viewRect = [[UIScreen mainScreen] bounds];
    CGFloat pvHeight = 235;
    CGFloat pvYpos = viewRect.size.height - pvHeight;

    CGRect pvRect = CGRectMake(viewRect.origin.x, pvYpos, viewRect.size.width, pvHeight);
    _pv = [[UIPickerView alloc] initWithFrame:pvRect];
    _pv.dataSource = self;
    _pv.delegate = self;
    _tf.inputView = _pv;

    CGFloat tbYpos = pvYpos-44;
    UIToolbar*  mypickerToolbar = [[UIToolbar alloc] initWithFrame:CGRectMake(0, tbYpos, viewRect.size.width, 44)];
    mypickerToolbar.barStyle = UIBarStyleBlackOpaque;
    [mypickerToolbar sizeToFit];
    NSMutableArray *barItems = [[NSMutableArray alloc] init];
    UIBarButtonItem *flexSpace = [[UIBarButtonItem alloc] initWithBarButtonSystemItem:UIBarButtonSystemItemFlexibleSpace target:self action:nil];
    [barItems addObject:flexSpace];
    UIBarButtonItem *doneBtn = [[UIBarButtonItem alloc] initWithBarButtonSystemItem:UIBarButtonSystemItemDone target:self action:@selector(pickerDoneClicked:)];
    [barItems addObject:doneBtn];
    [mypickerToolbar setItems:barItems animated:YES];
    _tf.inputAccessoryView = mypickerToolbar;

    _tf.delegate = self;

} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-29T05:47:50.963

你可以试试：

```
[self.view endEditing:YES]; 
```

在你的行动方法中

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-29T01:45:27.570

我想你错过了这个：

```
[datePicker removeFromSuperview];
[pickerView removeFromSuperview]; 
```

# jquery - 按用户输入的日期排序 div - jquery

> ID：13114928
> 
> 赞同：2
> 
> 时间：2012-10-29T01:37:49.117
> 
> 标签：jquery, html, date, sorting

你好，

我一直在寻找某种 jQuery 插件来做我需要的，但到目前为止还没有一个能完全满足我需要的插件。

我使用我们的 CMS 为客户创建了一个 Web 应用程序，他们可以在其中输入即将运行的网络研讨会的详细信息。

用户输入的部分数据是日期（01 - 31）和月份（JAN - DEC），它们出现在我用 CSS 制作的一个小日历元素中。正如您在下面的示例中看到的那样，月份被放入`<span class="m">MONTH</span>`其中，日期被放入。`<span class="d">DAY</span>`

然后将它们以网格堆栈形式放在页面上。

**我似乎无法做的是找到一种方法来使用该特定数据对这些元素进行排序。**

任何帮助将非常感激！

```
<div class="webinar-item">
    <div class="cal">
        <span class="m">sep</span>
        <span class="d">14</span>
    </div>

    <div class="data">
        <a href="#" title="Webinar Title">
            <h2>Webinar Title</h2>

            <span class="clearfix st Specific-Times">
                <span class="s">
                    <em>Start:</em>10:00am
                </span>
                <span class="f">
                    <em>Finish:</em>12:30pm
                </span>
            </span>

            <span class="price">
                <em>Price:</em>FREE
            </span>

            <p class="overview-1">
                Lorem ipsum dolor sit amet, consectetur adipiscing elit. Etiam tincidunt sagittis nunc. Curabitur mollis hendrerit diam ac iaculis. Phasellus velit neque, aliquet eu viverra a, congue id sapien. Class aptent taciti sociosqu ad litora torquent per conubia nostra, per inceptos himenaeos. Donec magna justo, viverra nec bibendum semper, porttitor pellentesque purus. In ante metus, tincidunt eu suscipit sit amet, imperdiet id justo. Phasellus elementum egestas nibh, vitae sodales nunc aliquet non.
            </p>
        </a>
        <a href="#">go to meeting</a>
    </div>
</div> 
```

PS 没有什么能阻止我为了订购而多次提取这些数据。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-29T01:55:41.843

理想的情况是添加一个数据属性，`webinar-item`该属性具有一个格式为`Date.parse`. jQUery 可以使用`data()`方法获取或设置此数据。它也可以很容易地从您可能为用户实现的日期选择器中获得。

```
<div class="webinar-item" data-date="12/15/2012">/* add hours/mins*/ 
```

然后可以使用 UTC 时间生成自定义排序器。

```
function sortDate( a, b){
  return parseDate(a) > parseDate(b) ? true :false;    
} 

function parseDate( el){
    return Date.parse($(el).data('date'));
}

 $('#content').html( $('.webinar-item').sort(sortDate)); 
```

**演示** [http://jsfiddle.net/TxFqu/2](http://jsfiddle.net/TxFqu/2)

**编辑：**更好的是，只需将 UTC 时间存储在属性中并在这部分代码`data-date`中完全摆脱`Date.Parse`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-29T02:07:48.413

这就是我要做的。

```
function sortItems(descending) {
    descending = !!descending;
    // converts it into a boolean
    var months = ['jan','feb','mar','apr','may','jun','jul','aug','sep','oct','nov','dec'];
    // define your months here
    var items = $('.webinar-item').get();
    // get all the available nodes
    var parent = $('.webinar-item').parent();
    // assuming there's a unique, single parent
    var year = (new Date()).getFullYear();
    // assuming it's the current year
    items.sort(function(a,b) {
        var m1 = months.indexOf($(a).find('>.cal>.m').text()); // month 1
        var d1 = parseInt($(a).find('>.cal>.d').text()); // day 1
        var m2 = months.indexOf($(b).find('>.cal>.m').text()); // month 2
        var d2 = parseInt($(b).find('>.cal>.d').text()); // day 2
        var dt1 = new Date(year,m1,d1);
        var dt2 = new Date(year,m2,d2);
        if (descending)
            return dt1 > dt2 ? -1 : (dt1 < dt2 ? 1 : 0);
        return dt1 > dt2 ? 1 : (dt1 < dt2 ? -1 : 0);
    });
    $.each(items,function(idx,elm) { parent.append(elm) });
} 
```

`sortItems();`您可以像升序和`sortItems(true);`降序一样调用此函数。

# cocoa - 如何在 Cocoa 中更改窗口关闭/最小化/调整大小按钮的样式？

> ID：13114929
> 
> 赞同：1
> 
> 时间：2012-10-29T01:37:52.230
> 
> 标签：cocoa, colors, window, minimize

在标准的 Cocoa 窗口中，是否可以将关闭、最小化和调整窗口按钮的颜色从带纹理的、有光泽的、gumdrop 样式更改为没有渐变/光泽的简单的红色、黄色和绿色？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-29T06:19:02.353

没有内置方法，因此您必须自己进行自定义绘图。

查看[如何绘制自定义窗口控件（关闭、最小化和缩放按钮）](https://stackoverflow.com/questions/12471000/how-to-draw-custom-window-controls-close-minimize-and-zoom-buttons)作为示例。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-12-26T05:41:46.327

不，但是您可以创建自定义无边框窗口并根据需要创建按钮并将它们连接到相同的操作。

# c# - 从内存中删除的外部配置文件 (configSource)（MVC、C#、ASP.net）

> ID：13114932
> 
> 赞同：0
> 
> 时间：2012-10-29T01:38:06.940
> 
> 标签：c#, asp.net, asp.net-mvc, configuration, web-config

我们遇到了一个间歇性问题，即配置文件，或者更具体地说，该数据中的值子集丢失到以太中。说实话，我不知道如何处理它，因为我不确定它是代码、配置、机器还是 IIS 问题。为了让您了解正在发生的事情......

**我们在做什么**

我们有一个包含“价格”下拉值的配置文件：

```
<searchForm>
<priceLowerBoundValues>
<priceLowerBoundValue>2500</priceLowerBoundValue>
<priceLowerBoundValue>5000</priceLowerBoundValue>
....
</priceLowerBoundValues>
....
</searchForm> 
```

这些包含在名为 searchForm.config 的文件中。在 web.config 中，它们被引用为像这样的外部文件。

```
<searchForm configSource="Config\searchForm.config" /> 
```

我们有一个继承自 IConfigurationSectionHandler 的自定义配置处理程序。此处获取值的代码的要点。

```
var priceLowerBoundValueXPath = "/searchForm/priceLowerBoundValues/priceLowerBoundValue/text()";
searchFormLookups.PriceLowerBoundValues = section.SelectNodes(priceLowerBoundValueXPath).Cast<XmlNode>().Select(x => int.Parse(x.Value)); 
```

然后我们引用它的唯一地方是为视图模型构建选择列表时。它看起来有点像这样：

```
SearchFormConfiguration.PriceLowerBoundValues.ToSelectList((parameters.PriceLowerBound != null) ? parameters.PriceLowerBound.Value : 0) 
```

没有对列表进行任何修改，并且使用 resharper “Find Usages” 只会带来这个单一的调用。程序中没有其他点触及这些值。

**问题**

间歇性发生的是我们网页上的下拉框突然只有一个值（例如价格框中的2500）。请注意，它并非完全为空，但通常大多数值都已消失。我们遇到过类似的外部配置丢失（几乎完全）的问题，它会导致整个地方的空引用错误。例如，它仍在寻找应该存在的配置，但它已从地球表面抹去。

停止网站，停止应用程序池，然后再次启动所有内容可以解决问题。这让我最初认为它可能与内存使用有关，而外部配置是它下降的第一件事，但我现在真的不确定。

还有一点需要注意。我们每天凌晨都会重新启动应用程序池。

对此的任何帮助都非常感谢，即使它只是朝着正确的方向轻推。正如我所说，我找不到任何关于从哪里开始的信息，无论是 IIS 设置还是代码。:)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-29T04:14:45.727

我知道我可能做错了什么。
线

```
x.PriceLowerBoundValues = section.SelectNodes(...).Cast<XmlNode>().Select(...); 
```

基本上是 XmlNodeList 上的一个惰性枚举器。
来自 MSDN 文档：

> 此方法返回的 XmlNodeList 对象将有效，而基础文档保持不变。如果底层文档发生变化，可能会返回意外的结果（不会抛出异常）。

有机会`the underlying document changes`吗？
如果将值放入数组中，还会有问题吗？喜欢`..Select().ToArray();`

# c++builder - 将加载表格背景的 VCL RichEdit 组件

> ID：13114951
> 
> 赞同：1
> 
> 时间：2012-10-29T01:40:18.580
> 
> 标签：c++builder, vcl, richedit

我正在使用 C++ Builder XE2。我希望使用 RTF 文件将模板加载到富编辑文件中，这样我就可以更改标记的字符串，例如 $DATE$。

我已经尝试过 TRichEdit 和 TJvRichEdit 并且可以进行字符串替换没有问题。TJvRichEdit 还加载了我想要的 bmp 和 JPG。但是，当我加载在 word 或 wordpad 中生成的具有单元格背景颜色的 RTF 文件时，我得到了格式，但没有得到背景颜色。

我查看了 RichView 组件（对于单个组件来说非常昂贵（330 美元）。这会加载背景颜色但会丢失字体大小（似乎应用了自己的段落样式而不是保留 RTF 段落文件。

有谁知道一个体面的 RichText 组件，它将从 rtf 文件加载并保持文本格式和表格背景，还允许加载图像。

更喜欢免费的组件或至少合理的价格组件 < 100 美元。

# windows - 如何将进程的标准输出和标准错误通过管道传输到同一个句柄？

> ID：13114952
> 
> 赞同：6
> 
> 时间：2012-10-29T01:40:35.153
> 
> 标签：windows, haskell

如何将进程的标准输出和标准错误通过管道传输到同一个句柄？在 unix 系统上这很容易，只需使用`createPipe`并将写入端`runProcess`作为 stdout 和 stderr 传递。在 Windows 上更难：

*   unix-compat 和 Win32 包都没有导出创建管道的方法。

*   `openTempFile`（可用于模拟管道）在 created 上设置错误的模式`Handle`。

`Handle`编辑：提供更多上下文：我想运行一个进程并让它以跨平台的方式将其 stdout 和 stderr 写入相同的。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-29T03:22:30.830

您可以使用[System.Process](http://hackage.haskell.org/packages/archive/process/latest/doc/html/System-Process.html)中的东西。在`CreateProcess`定义中有

```
std_in       :: StdStream,               -- ^ How to determine stdin
std_out      :: StdStream,               -- ^ How to determine stdout
std_err      :: StdStream,               -- ^ How to determine stderr 
```

并`StdStream`有这个构造函数：

```
data StdStream = UseHandle Handle 
```

之后，将您形成的对象传递给`createProcess`函数以运行您的 proc。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-30T04:24:26.903

我最终实现了一个跨平台`createPipe`：[https ://github.com/haskell/cabal/blob/master/Cabal/tests/Distribution/Compat/CreatePipe.hsc](https://github.com/haskell/cabal/blob/master/Cabal/tests/Distribution/Compat/CreatePipe.hsc)

我们可能应该在某个时候把它放在更容易访问的地方。

# python - 如何获取调用事件的小部件的 id (Tkinter)

> ID：13114953
> 
> 赞同：5
> 
> 时间：2012-10-29T01:40:44.157
> 
> 标签：python, tkinter

我在画布上绘制了这些矩形集。它们都绑定到 Button-1 事件。我喜欢做的是设置一个带有调用事件的小部件 id 的变量。这是我喜欢做的伪代码

```
def clicked(e): #event handler. Binds to rectangle objects
    selected_button = e.widgets.get_id() 
```

PS：虽然我只将事件处理程序绑定到那些矩形对象，但当我将代码 e.widget.destroy() 放在该处理程序内时，画布也会被破坏。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-10-29T17:11:22.743

### 执行摘要

由于 canvas 方法接受标签或项目 ID 的方式无关紧要，因此您可以使用紧凑回调

```
def autodestroy(event):
    event.widget.delete("current") 
```

### 细节

您的回调接收 Tkinter*事件*作为唯一参数。此参数是一个对象，您可以从中检索受刺激的*小部件*以及其他信息（鼠标坐标或鼠标事件情况下的按钮）。

```
def clicked(event):
    canvas = event.widget 
```

要获取单击的画布*项目*，您可以使用`CURRENT`¹标记

```
 rect = canvas.find_withtag("current")[0] 
```

或用`find_closest`, `find_overlapping`, `find_enclosed`... 复制采摘（从[effbot.org](http://effbot.org/tkinterbook/canvas.htm#coordinate-systems)复制）

```
 canvas = event.widget
    x = canvas.canvasx(event.x)
    y = canvas.canvasy(event.y)
    rect = canvas.find_closest(x, y)[0] 
```

请注意，`find_`家庭返回元组，在某些情况下可能为空，您可能会测试为空或捕获异常。

然后要删除画布的一个*项目*，您可以使用`canvas.delete`方法。

```
 canvas.delete(rect) 
```

由于 canvas 方法接受标签或项目 ID 的方式无关紧要，因此您可以使用更紧凑的编写方式：

```
def autodestroy(event):
    event.widget.delete("current") 
```

¹ `Tkinter.CURRENT`并且`"current"`是等价的

# lucene - Elasticsearch 如何快速执行模糊的“相关性评分”查询？

> ID：13114958
> 
> 赞同：3
> 
> 时间：2012-10-29T01:41:22.003
> 
> 标签：lucene, elasticsearch

据我了解，为了让[Elasticsearch](http://www.elasticsearch.org/)执行涉及“相关性分数”的“模糊”查询，它必须遍历并计算所有可能匹配项（可能包括数千或数百万行）的相关性，即使“限制”查询上只有“10”。

Elasticsearch 如何在提供合理响应时间的同时实现这一目标？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-03T03:28:29.437

一种可能性是搜索过程可以在获得足够的结果后终止，即使它们没有最高分。因此，并非所有结果都需要计算。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-08T19:04:13.680

在 Lucene 4 中，模糊搜索会修剪搜索空间，而不是像以前那样强制搜索：

[Lucene 的 FuzzyQuery 在 4.0 中快了 100 倍](http://blog.mikemccandless.com/2011/03/lucenes-fuzzyquery-is-100-times-faster.html)

希望 ElasticSearch 很快会更新到 Lucene 4。

# sql-server - 在 SQL Server 中查询 XML 列

> ID：13114959
> 
> 赞同：1
> 
> 时间：2012-10-29T01:41:30.693
> 
> 标签：sql-server, xml, sql-server-2008-r2, xquery

我正在运行 SQL Server 2008 R2，并且有一个我审核更新语句的表。

```
create table STG_Participant_16_Month
(
Serial                  int,
ID                      varchar(10),
StartTime               datetime, 
FinishTime              datetime, 
ChildID                 varchar(10),
childIndex              int,
Record_State            varchar(15),
Duplicate_flag          varchar(1)
); 
```

当表 X 更新时，它会在审计表中插入一条记录：

```
select * 
into STG_Participant_16_Month_AUDIT 
from STG_Participant_16_Month;

alter table STG_Participant_16_Month_AUDIT
add audit_user                       varchar(30),
    audit_action                     varchar(1),
    audit_date                       datetime,
    columns_updated                  xml; 
```

我创建一条记录并进行更新：

```
insert into STG_Participant_16_Month
( Serial, ID, StartTime, FinishTime, ChildID, childIndex,
  Record_State, Duplicate_flag )
values
(  90, 'ID', getdate(), getdate(), 'ChildID', 1,
  'LOADED', 'N');

update STG_Participant_16_Month set serial=99, ID='xx', childIndex=99  where serial=90; 
```

我看到输出如下：

```
<Fields>
  <Field Name="Serial" />
  <Field Name="ID" />
  <Field Name="childIndex" />
</Fields> 
```

如何创建仅显示文本值的查询？

```
Serial
ID
childIndex 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-29T02:46:00.423

如果这是您的输出，那么您的触发器似乎没有正确填充 XML 文件；我试图猜测您的输出可能是什么样子，并构建了一个 xQuery SQL 语句来演示：

```
DECLARE @t TABLE ( x XML )

INSERT  INTO @t
        SELECT  '<Fields> <Field Name="Serial">99</Field> <Field Name="ID">xx</Field> <Field Name="childIndex">99</Field> </Fields>'
SELECT  x
FROM    @t

SELECT  Serial = x.value('data(for $f in //Field 
                where $f/@Name="Serial"
                return $f)[1]', 'int')
      , ID = x.value('data(for $f in //Field 
                where $f/@Name="ID"
                return $f)[1]', 'varchar(2)')
      , childIndex = x.value('data(for $f in //Field 
                where $f/@Name="childIndex"
                return $f)[1]', 'int')
FROM    @t 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-29T06:08:14.630

你可以尝试这样的事情：

```
SELECT 
    UpdFld.value('(@Name)', 'varchar(20)')
FROM 
    STG_Participant_16_Month_AUDIT
CROSS APPLY
    COLUMNS_UPDATED.nodes('/Fields/Field') AS Tbl(UpdFld) 
```

它`<Field>`获取根节点内所有节点的列表`<Fields>`，并从这些 XML 元素中提取`Name`属性。

我得到这样的输出：

![在此处输入图像描述](../Images/d4143648cd89de7f4447229b5d7e8a17.png)

# c# - Tomcat Digest 未经授权使用 C#

> ID：13114964
> 
> 赞同：1
> 
> 时间：2012-10-29T01:42:30.250
> 
> 标签：c#, authentication, tomcat, digest-authentication, unauthorized

身份验证被接受并且结果很好，但是在任何时候我在同一代码中向 URL 添加参数时，都会收到错误消息：远程服务器返回错误：（401）未授权。

我尝试了几种形式的 Digest 身份验证，但没有解决问题，这是我使用的一些代码形式

```
CredentialCache mycache = new CredentialCache();
mycache.Add(uri, "Digest", new NetworkCredential("admin", "admin"));
req.Credentials = mycache; 
```

# android - android - 如何从上下文中获取视图？

> ID：13114966
> 
> 赞同：66
> 
> 时间：2012-10-29T01:42:49.830
> 
> 标签：android, android-intent, broadcastreceiver, android-context

我想从上下文中获取视图或 findViewById()？还是出于意图？

我试图在我的广播接收器中到达特定视图，onReceive 的参数是上下文和意图。

好吧，我有一堂课，里面是我的广播接收器。现在，我正在尝试将广播接收器与其分离，但我需要一种方法，以便我仍然可以与分离的广播接收器类中的类视图进行通信。

谢谢。

* * *

## 回答 #1

> 赞同：75
> 
> 时间：2015-09-05T12:52:58.273

For example you can find any textView:

```
TextView textView = (TextView) ((Activity) context).findViewById(R.id.textView1); 
```

* * *

## 回答 #2

> 赞同：65
> 
> 时间：2014-01-15T19:01:08.530

Starting with a context, the root view of the associated activity can be had by

```
View rootView = ((Activity)_context).Window.DecorView.FindViewById(Android.Resource.Id.Content); 
```

In Raw Android it'd look something like:

```
View rootView = ((Activity)mContext).getWindow().getDecorView().findViewById(android.R.id.content) 
```

Then simply call the findViewById on this

```
View v = rootView.findViewById(R.id.your_view_id); 
```

* * *

## 回答 #3

> 赞同：7
> 
> 时间：2012-10-29T02:03:01.943

在您的广播接收器中，您可以通过膨胀来自 XML 资源的根布局来访问视图，然后使用 findViewByid() 从该根布局中找到您的所有视图：

```
View view = View.inflate(context, R.layout.ROOT_LAYOUT, null); 
```

现在您可以通过“视图”访问您的视图并将它们转换为您的视图类型：

```
myImage = (ImageView) view.findViewById(R.id.my_image); 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2014-03-31T06:03:28.263

首先使用这个：

```
LayoutInflater inflater = (LayoutInflater) Read_file.this
                .getSystemService(Context.LAYOUT_INFLATER_SERVICE);

Read file is current activity in which you want your context.

View layout = inflater.inflate(R.layout.your_layout_name,(ViewGroup)findViewById(R.id.layout_name_id)); 
```

然后您可以使用它来查找布局中的任何元素。

```
ImageView myImage = (ImageView) layout.findViewById(R.id.my_image); 
```

* * *

## 回答 #5

> 赞同：-2
> 
> 时间：2017-07-14T18:05:28.010

你为什么不只使用单例？

```
import android.content.Context;

public class ClassicSingleton {
    private Context c=null;
    private static ClassicSingleton instance = null;
    protected ClassicSingleton()
    {
       // Exists only to defeat instantiation.
    }
    public void setContext(Context ctx)
    {
    c=ctx;
    }
    public Context getContext()
    {
       return c;
    }
    public static ClassicSingleton getInstance()
    {
        if(instance == null) {
            instance = new ClassicSingleton();
        }
        return instance;
    }
} 
```

然后在活动类中：

```
 private ClassicSingleton cs = ClassicSingleton.getInstance(); 
```

在非活动类中：

```
ClassicSingleton cs= ClassicSingleton.getInstance();
        Context c=cs.getContext();
        ImageView imageView = (ImageView) ((Activity)c).findViewById(R.id.imageView1); 
```

# wireshark - 在不连接到网络的情况下捕获 IEEE 802.11 数据包

> ID：13114967
> 
> 赞同：1
> 
> 时间：2012-10-29T01:42:53.483
> 
> 标签：wireshark, libpcap, packet-sniffers, wifi

> 我想分析网络流量，但不是通过连接它只需打开 wifi 并在混杂模式下嗅探数据包（IEEE 802.11 帧）

我已经尝试过 libpcap，但它可能会在内部更改 datalinktype，因为我正在提供 wifi 接口

```
descr=pcap_open_live("en1", MAXBYTES2CAPTURE, 1, 512, errbuf); 
```

（我们知道 mac OS x 有 en1 作为 wifi 接口）

现在当我这样做时

```
printf("%s", pcap_datalink_val_to_name( pcap_datalink(descr))); 
```

它给了我结果`"ethernet"`
我尝试使用wireshark捕获数据包而不连接到我的wifi网络并且它有效！我能够在`Beacon , Acknowledgement and Authentication frames`不连接到我的 wifi 网络的情况下进行捕捉。

现在：

1.  我是否必须为此制作网卡驱动程序，或者 libpcap 可以做到这一点？如果是的话怎么做？
2.  Wireshark 是否为此制作了某种驱动程序？如果是，请帮助我在它的源代码中找到它。
    *   我已经尝试过 Apple 的 CFNetwork，但如果不连接到网络，它也无法捕获。
    *   如果我对某些用户空间代码有一些建议，那将非常有帮助，因为内核级编码有点凝灰岩:(

我在 xCode 4.5.1 中的 MacOS 10.7 上编码

更新：
我已经这样做了：

```
descr=pcap_create("e1", errbuf);
pcap_set_rfmon(descr, 0);
pcap_set_promisc(descr, 0);
pcap_activate(descr);    
descr=pcap_open_live("en1", 2048, 1, 512, errbuf); 
```

> 是的，wifi 上有一个小监视器图标，我可以嗅探数据包，但只有当我连接到网络时，我想在没有连接到 wifi 时做同样的事情，比如捕获信标和确认帧意味着我们的数据包通过网卡检测到可用的wifi网络

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-29T18:54:38.393

If you're running on Snow Leopard or later (which you are, as you're running Lion), you should use the new `pcap_create()`/`pcap_activate()` APIs, and turn on monitor mode by calling `pcap_set_rfmon()` between the `pcap_create()` and `pcap_activate()` calls.

That's what Wireshark 1.6.0 and later do if you check the monitor mode checkbox, and what tcpdump 1.0.0 and later, and TShark and dumpcap in Wireshark 1.6.0 and later, do if you specify the `-I` command-line flag.

By default, Wi-Fi interfaces on many OSes, including but not limited to OS X, supply Ethernet headers, not 802.11 headers, which is why `pcap_datalink_val_to_name(pcap_datalink(descr))` is reporting Ethernet headers. On Linux and OS X, you have to go into monitor mode to get 802.11 headers; on *BSD, you can get 802.11 headers without going into monitor mode.

You do not need your own driver to go into monitor mode on OS X; Wireshark does not supply its own drivers.

# javascript - 使用 Javascript 进行实时波形渲染

> ID：13114968
> 
> 赞同：0
> 
> 时间：2012-10-29T01:42:59.483
> 
> 标签：javascript

我正在构建一个从麦克风渲染实时音频的波形库，但是是否有任何纯 JavaScript 库可以完成这项工作。

有很多库可以从音频文件 wav、mp3、ogg 等（我在项目中使用其中一个）渲染波形，但我还没有看到任何可以从麦克风渲染波形实时音频的东西。

# wpf - wpf "emailto" - 带附件

> ID：13114969
> 
> 赞同：1
> 
> 时间：2012-10-29T01:43:00.833
> 
> 标签：wpf

我正在开发一个 MVVM 演示模式的 WPF 应用程序。我有一个网格，我试图有一个“emailto”超链接，当用户点击我试图将所有数据导出到 Excel 并打开带有草稿新消息窗口的默认电子邮件客户端（电子邮件客户端可能是 Lotus /Outlook) 并将 Excel 作为附件附加到邮件中。我可以定义一个“Mailto”超链接，当我点击它时，我可以打开草稿邮件电子邮件窗口。但我不确定如何将 excel 作为附件发送。任何帮助是极大的赞赏。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-29T04:46:28.823

发送 Excel 文件并不意味着以某种方式生成此文件。对？所以你只需要附加一个文件。

我总是使用[Andrew Baker 的 MAPI 包装类](http://www.vbusers.com/codecsharp/codeget.asp?ThreadID=71&PostID=1)，它看起来非常可靠，并且在过去 6 年中从未失败过。它只有 18Kb 的 C# 代码，它完全可以满足您的需求。

```
var message = new MapiMailMessage(subject, body);
message.Recipients.Add(mailAddress);
message.Files.Add(filePath);
message.ShowDialog(); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-29T04:10:40.310

您可以使用[Simple MAPI API](http://www.codeproject.com/script/Articles/ViewDownloads.aspx?aid=2048&zep=SimpleMAPICon/MapiApi.cs&rzp=/KB/IP/simplemapidotnet//simplemapidotnet.zip)来解决您的问题：

```
var mapi = new Mapi();
mapi.Logon(IntPtr.Zero);

foreach (var filePath in files)
    mapi.Attach(filePath);

mapi.Send("subject", "body text", true /* show send message dialog to user */);
mapi.Logoff(); 
```

# maven - 具有 Maven 依赖项的 Jersey + Gradle 不起作用

> ID：13114970
> 
> 赞同：4
> 
> 时间：2012-10-29T01:43:25.903
> 
> 标签：maven, jersey, gradle, dependency-management

嗨，我正在关注泽西太阳文档。我之前部署过这个简单的 pom.xml

```
<dependency>
    <groupId>com.sun.jersey</groupId>
    <artifactId>jersey-server</artifactId>
    <version>1.14</version>
</dependency>
<dependency>
    <groupId>com.sun.jersey</groupId>
    <artifactId>jersey-grizzly2</artifactId>
    <version>1.14</version>
</dependency> 
```

并添加存储库

```
 <url>https://maven.java.net/content/repositories/snapshots/</url> 
```

然而，当我尝试使用 gradle 执行此操作时，它似乎没有工作，没有下载需要的其余依赖项，显然我必须明确放置 javax.ws.rs:jsr311-api:1.1.1 甚至 jersey -核。这是我的 build.gradle。

```
apply plugin: 'java'
apply plugin: 'eclipse'
apply plugin: 'jetty'

sourceCompatibility = 1.6

repositories {
    mavenCentral()
    maven {
        url 'https://maven.java.net/content/repositories/snapshots/'
    }
}

List compileLibraries =['com.sun.jersey:jersey-server:1.14',
                        'com.sun.jersey:jersey-grizzly2:1.14',
                        'com.sun.jersey:jersey-core:1.14',
                        'javax.ws.rs:jsr311-api:1.1.1']

dependencies {
    compile (compileLibraries )

    testCompile group: 'junit', name: 'junit', version: '4.+'
}

httpPort = 8888
stopPort = 9451
stopKey = 'foo' 
```

**这是正确的 gradle 行为吗？我怎么能像使用 maven 一样做呢？**

**编辑**

只是为了这个，如果有人有兴趣看到一个与 gradle 一起工作的 gradle 构建文件，你可以去

[https://github.com/necronet/XTradeJerseyimpl/](https://github.com/necronet/XTradeJerseyimpl/)

谢谢！！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-16T07:43:12.057

似乎 Gradle 没有正确解释从 jersey-server 到 jersey-core 的依赖关系。查看[pom](http://repo1.maven.org/maven2/com/sun/jersey/jersey-server/1.14/jersey-server-1.14.pom)表明 jersey-core 依赖项位于配置文件中，这可能是它没有被拾取的原因。而 jersey-core 对 jsr311 有依赖。在这种情况下，听起来 Gradle 可能应该考虑标记为“activeByDefault”的配置文件。

也就是说，您已经找到了解决方案，即直接指定两个 jar - 与 maven xml 相比，配置的行数仍然更少 :)

此外，看起来您需要的所有 jar 都可以在 mavenCentral 中找到，因此快照存储库没有任何贡献。

这并不能解决明确提及这两个额外 jar 的需要，但我希望这能解释原因，如果您认为应该解决这个问题，您可能想在[Gradle Jira上提出问题。](http://issues.gradle.org/browse/GRADLE)

# c++ - 我需要帮助考虑在 C 中实现 C++ 样式链接列表的不同方法

> ID：13114972
> 
> 赞同：1
> 
> 时间：2012-10-29T01:43:34.510
> 
> 标签：c++, c, list, pointers, linked-list

这是我的 C 课上的作业；我已经有使用 C++ 的经验。我遇到的问题是，我的实现简直就像地狱一样阴暗。我当前的实现只允许一次使用一个 LinkedList。我知道我总是可以只传递一个指向结构的指针，但我想避免这种情况。因此，它变得非常阴暗。我也没有办法规范函数的范围；它们在全球范围内可见。还要注意指向 h 文件中结构的指针；这就是为什么我不能拥有多个合一程序的原因。除了将指针传递给每个函数之外，任何人都可以想到另一种方式吗？

它目前只是单链接，但双链接一个不会超过 30 分钟。

[链表.h](http://pastebin.com/J479P2Db)

[链表.c](http://pastebin.com/xtpnTn2C)

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-29T01:49:27.180

是的，在 C 语言中，您会将指向结构的指针传递给对其进行操作的每个函数。

```
typedef struct list list_t;

list_t *list_new();
void list_delete(list_t *list);
void list_insert_back(list_t *list, void *obj);
void list_insert_front(list_t *list, void *obj);
/* etc. */ 
```

我不确定您所说的“调节范围”是什么意思。如果您在谈论函数名称，那么您通常会在函数名称前面加上一个像`list_`上面一样的通用前缀。

在幕后，这最终与 C++ 代码相同。C++ 编译器为成员函数添加前缀（如示例使用`list_`，尽管 C++ 编译器的做法不同），并且 C++ 编译器也`this`隐式传递参数。

事实上，最古老的 C++ 编译器 (cfront) 会将 C++ 代码直接翻译成 C 代码，就像上面一样。

请注意，与典型的 C++ 方法相比，您不必在头文件中定义链表结构——这允许您在不破坏 ABI 兼容性的情况下更改数据结构。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-10-29T02:46:10.173

由于您的问题的其余部分已得到解答，我想补充一点，您可以限制函数的范围：只需声明它们`static`，这将为它们提供内部链接：

```
/* This function won't be seen outside of the header file */
static void foo(list *l); 
```

这基本上相当于`foo`在一个类中声明一个私有函数：

```
class list
{
private:
    void foo();    
}; 
```

# ruby-on-rails - Postgresql 或 psql 'rails db' 密码错误

> ID：13114975
> 
> 赞同：3
> 
> 时间：2012-10-29T01:44:58.457
> 
> 标签：ruby-on-rails, postgresql

我正在尝试提示 psql 界面尝试创建数据库，实际上是按照 Hartl 博士的教程[http://ruby.railstutorial.org/book/ruby-on-rails-tutorial?version=3.2](http://ruby.railstutorial.org/book/ruby-on-rails-tutorial?version=3.2)进行的。

我创建了这个项目：

```
rails new postgr_ --database=postgresql 
```

我在 database.yml 文件中添加了密码：

```
development:
  adapter: postgresql
  encoding: unicode
  database: postgr__development
  pool: 5
  username: postgr_
  password: 12345

test:
  adapter: postgresql
  encoding: unicode
  database: postgr__test
  pool: 5
  username: postgr_
  password: 12345

production:
  adapter: postgresql
  encoding: unicode
  database: postgr__production
  pool: 5
  username: postgr_
  password: 12345 
```

然后我进入终端：

```
$ rails db 
```

输入密码后出现以下错误：

```
psql: FATAL:  password authentication failed for user "postgr_" 
```

我昨天和今天一整天都在处理这个问题，但无法解决这个问题。我很可能遗漏了一些基本的东西，如果你发现它请告诉我。谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-29T02:10:37.793

您缺少设置 postgresql 角色和数据库创建的步骤。

此过程取决于您使用的系统。我将假设您使用的是主流的 linux 发行版。首先登录到 postgresql 帐户。您可以使用以下命令之一：

```
$ su - postgres 
```

或者

```
$ sudo -i -u postgres 
```

登录后，启动 psql 程序：

```
$ psql template1 
```

在 psql 提示符下，为您的项目创建一个新的用户角色和一个数据库：

```
=> create role postgr_ with createdb login password '12345'; 
```

然后简单地退出程序

```
=> \q 
```

并从 postgresql 用户帐户注销

```
$ exit 
```

然后你应该能够`rail db`成功运行命令

# asp.net - 为什么这个 ASPX 站点的 ScraperWiki 只返回相同页面的搜索结果？

> ID：13114977
> 
> 赞同：0
> 
> 时间：2012-10-29T01:45:24.977
> 
> 标签：asp.net, python, web-scraping, mechanize, scraperwiki

我正在尝试使用 ScraperWiki 的工具抓取一个由 ASP 提供支持的站点。

我想从 BBSmates.com 网站获取特定区号中的 BBS 列表。该站点一次显示 20 个 BBS 搜索结果，因此我必须提交表单才能从一页结果移动到下一页。

这篇[博文](http://blog.scraperwiki.com/2011/11/09/how-to-get-along-with-an-asp-webpage/)帮助我入门。我认为下面的代码会抓取 314 区号的 BBS 列表的最后一页（第 79 页）。

但是，我得到的响应是第一页。

```
url = 'http://bbsmates.com/browsebbs.aspx?BBSName=&AreaCode=314'
br = mechanize.Browser()
br.addheaders = [('User-agent', 'Mozilla/5.0 (X11; U; Linux i686; en-US; rv:1.9.0.1) Gecko/2008071615 Fedora/3.0.1-1.fc9 Firefox/3.0.1')]
response = br.open(url)

html = response.read()

br.select_form(name='aspnetForm')
br.form.set_all_readonly(False)
br['__EVENTTARGET'] = 'ctl00$ContentPlaceHolder1$GridView1'
br['__EVENTARGUMENT'] = 'Page$79'
print br.form
response2 = br.submit()

html2 = response2.read()
print html2 
```

我上面引用的博客文章提到，在他们的情况下，*SubmitControl*存在问题，因此我尝试禁用此表单上的两个 SubmitControls。

```
br.find_control("ctl00$cmdLogin").disabled = True 
```

禁用 cmdLogin 生成 HTTP 错误 500。

```
br.find_control("ctl00$ContentPlaceHolder1$Button1").disabled = True 
```

禁用 ContentPlaceHolder1$Button1 没有任何区别。提交通过了，但是它返回的页面仍然是搜索结果的第 1 页。

值得注意的是，该站点不使用“Page$Next”。

谁能帮我弄清楚我需要做什么才能让 ASPX 表单提交工作？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-29T15:45:15.103

您需要发布页面给出的值（EVENTVALIDATION、VIEWSTATE 等）。

这段代码可以工作（注意它使用了很棒的[Requests](http://docs.python-requests.org/en/latest/)库而不是 Mechanize）

```
import lxml.html 
import requests
starturl = 'http://bbsmates.com/browsebbs.aspx?BBSName=&AreaCode=314'
s = requests.session() # create a session object 
r1 = s.get(starturl) #get page 1
html = r1.text
root = lxml.html.fromstring(html)

#pick up the javascript values 
EVENTVALIDATION = root.xpath('//input[@name="__EVENTVALIDATION"]')[0].attrib['value'] 
#find the __EVENTVALIDATION value 
VIEWSTATE = root.xpath('//input[@name="__VIEWSTATE"]')[0].attrib['value'] 
#find the __VIEWSTATE value
# build a dictionary to post to the site with the values we have collected. The __EVENTARGUMENT can be changed to fetch another result page (3,4,5 etc.)
payload = {'__EVENTTARGET': 'ctl00$ContentPlaceHolder1$GridView1','__EVENTARGUMENT':'Page$25','__EVENTVALIDATION':EVENTVALIDATION,'__VIEWSTATE':VIEWSTATE,'__VIEWSTATEENCRYPTED':'','ctl00$txtUsername':'','ctl00$txtPassword':'','ctl00$ContentPlaceHolder1$txtBBSName':'','ctl00$ContentPlaceHolder1$txtSysop':'','ctl00$ContentPlaceHolder1$txtSoftware':'','ctl00$ContentPlaceHolder1$txtCity':'','ctl00$ContentPlaceHolder1$txtState':'','ctl00$ContentPlaceHolder1$txtCountry':'','ctl00$ContentPlaceHolder1$txtZipCode':'','ctl00$ContentPlaceHolder1$txtAreaCode':'314','ctl00$ContentPlaceHolder1$txtPrefix':'','ctl00$ContentPlaceHolder1$txtDescription':'','ctl00$ContentPlaceHolder1$Activity':'rdoBoth','ctl00$ContentPlaceHolder1$drpRPP':'20'}
# post it 
r2 = s.post(starturl, data=payload)
# our response is now page 2 
print r2.text 
```

当您到达结果的末尾（结果第 21 页）时，您必须再次获取 VIEWSTATE 和 EVENTVALIDATION 值（并且每 20 页执行一次）。

请注意，您发布的一些值是空的，还有一些包含值。完整列表是这样的：

```
'ctl00$txtUsername':'','ctl00$txtPassword':'','ctl00$ContentPlaceHolder1$txtBBSName':'','ctl00$ContentPlaceHolder1$txtSysop':'','ctl00$ContentPlaceHolder1$txtSoftware':'','ctl00$ContentPlaceHolder1$txtCity':'','ctl00$ContentPlaceHolder1$txtState':'','ctl00$ContentPlaceHolder1$txtCountry':'','ctl00$ContentPlaceHolder1$txtZipCode':'','ctl00$ContentPlaceHolder1$txtAreaCode':'314','ctl00$ContentPlaceHolder1$txtPrefix':'','ctl00$ContentPlaceHolder1$txtDescription':'','ctl00$ContentPlaceHolder1$Activity':'rdoBoth','ctl00$ContentPlaceHolder1$drpRPP':'20' 
```

以下是 Scraperwiki 邮件列表上关于类似问题的讨论：[https ://groups.google.com/forum/#!topic/scraperwiki/W0Xi7AxfZp0](https://groups.google.com/forum/#!topic/scraperwiki/W0Xi7AxfZp0)

# java - 在 main 和方法 Java 之间传递信息

> ID：13114980
> 
> 赞同：0
> 
> 时间：2012-10-29T01:45:48.987
> 
> 标签：java

卡在我的最终项目上，要么忘记了如何来回传递数据，要么我只是错过了一些东西。真的很想得到提示或回答谢谢！

```
package coutingdays;
import coutingdays.day.Day;
import java.util.*;

public class CoutingDays {

    public static void main(String[] args)
    {
        // declare the scanner for the keyboard
        Scanner kb = new Scanner(System.in);
        int farDay;
                String userDay;
        // create the Day object
        Day theDay = new theDay();
        userDay = "";
        farDay = 0;

        // get the users day
        System.out.println("Enter today's Day in caps: ");
        userDay = kb.next();

        System.out.println("Enter the number of days from today to calculate: ");
        farDay = kb.nextInt();

        // pass the input to the object 
        theDay.setDay(userDay, farDay);

        // print the results
        theDay.printDay();

    }
} 
```

上课日

```
public class Day
{

    // declare the private variables.
    private String toDay;
    private String toMorrow;
    private String yesterDay;
    private String laterDay;
    private int d = 0;
    private int e;

    // create array of the days of the week
    private String[] weekDays = {"SUNDAY","MONDAY","TUESDAY","WEDNESDAY","THURSDAY","FRIDAY","SATURDAY"};

    // create a constructor to initialize the object to zero
    public Day()
    {
        toDay = "";
        toMorrow = "";
        yesterDay = "";
        laterDay = "";
        e = 0;

    }

    // define the setDay method that will calculate today's day,
    // tomorrow's day, yesterday's day, and a day in the future
    public void setDay(String userDay, int farDay)
    {
        //declare variables to be used by the method
        toMorrow = userDay;
        yesterDay = userDay;
        laterDay = userDay;
        e = farDay;
        int x = 0;
        int y = 0;
        int z = 0;

        // print today's day based on user input
        System.out.println("Today is: " + userDay);

        // loop through the array to match day entered by user
        // then add one to return array value of tomorrow
        for (x = 0; x<7; x++)
        {
            if (toMorrow.equals (weekDays[6]))
            {
                toMorrow = weekDays[0];
                break;
            }
            else
            {
            if (toMorrow.equals(weekDays[x]))
                {
                    toMorrow = weekDays[x+1];
                    break;

                }
            }
        }

            //loop through the array to match day entered by user
            //then subtract one to return yesterday value           
            for (y=0; y<7; y++)
            {
                if (yesterDay.equals (weekDays[0]))
                    {
                        yesterDay = weekDays[6];
                        break;
                    }
                else
                {
                if (yesterDay.equals    (weekDays[y]))
                    {
                            yesterDay = weekDays[y-1];
                            break;
                    }
                }
            }

            //loop through the array to match value entered by user
            //then use modulus to calculate days in the future
            for (z = 0; z<7; z++)
            {
                if (laterDay.equals (weekDays[z]))
                {
                    d = (farDay + z) % 7;

                    break;

                }
            }

        }

    //define the printDay method to print results
    public void printDay()
    {
        System.out.println("Tomorrow is: " + toMorrow);
        System.out.println("Yesterday was: " + yesterDay);
        System.out.println(e + " days from today is: " + weekDays[d]);
    }

// fin

}
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-29T01:53:46.860

我不知道你`Day`在构造对象时是否拼错了：

```
Day theDay = new theDay(); 
```

应该

```
Day theDay = new Day(); 
```

# jquery-mobile - jqm表单在多页上提交

> ID：13114981
> 
> 赞同：1
> 
> 时间：2012-10-29T01:45:53.390
> 
> 标签：jquery-mobile

我在具有两个或更多页面的 jquery 移动网站上遇到了表单问题。

一个页面包含一个表单，当单击此表单的提交按钮时，我想提交表单数据，然后留在此页面上。所以我将该页面的 id 添加到表单的操作属性中。( `<form action="#two">`)。

但不幸的是，这似乎不起作用。提交表单数据时，始终加载实际文件的第一页，即使浏览器的 url 看起来正确（正确的 id 已附加到它）。

而且情况越来越糟。因为我将 id 添加到表单的 action 属性中，jqm 加载文件的第一页，但显然认为在第二页上，因此指向带有表单的页面的链接将不再起作用。

一件事解决了这个问题：添加`data-ajax="false"`到表单元素会强制 jqm 停止对此表单的基于 ajax 的页面处理，当单击提交按钮时，我最终会出现在正确的页面上，但我不想重新加载整个页面，所以没有解决方案。

有谁知道这里发生了什么并且遇到了同样的问题？随意尝试附加的例子，我希望有人能解决这个问题。

```
<!DOCTYPE html> 
<html> 
<head> 
    <title>My Page</title> 
    <meta name="viewport" content="width=device-width, initial-scale=1"> 
    <link rel="stylesheet" href="http://code.jquery.com/mobile/1.2.0/jquery.mobile-1.2.0.min.css" />
    <script src="http://code.jquery.com/jquery-1.8.2.min.js"></script>
    <script src="http://code.jquery.com/mobile/1.2.0/jquery.mobile-1.2.0.min.js"></script>
</head> 
<body> 

<div data-role="page" id="one">

    <div data-role="header">
        <h1>First page</h1>
    </div><!-- /header -->

    <div data-role="content">   
        <p>Hello world</p>
        <p><a href="#two">Link to second page</a></p>   
    </div><!-- /content -->

</div><!-- /page -->

<div data-role="page" id="two">

    <div data-role="header">
        <h1>Second page</h1>
    </div><!-- /header -->

    <div data-role="content">   

        <form action="#two">
            <button type="submit">Submit</button>
        </form>

    </div><!-- /content -->

</div><!-- /page -->

</body>
</html> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-29T01:55:32.267

更改您的输入提交标签以调用函数。

```
<input type="submit" onclick="submitThis()" /> 
```

将此逻辑添加到您的提交函数中，该函数将通过 ajax 调用提交 url 并返回 false 以避免物理提交表单。

```
var submitThis = function() {

// get form data using jQuery, and call the link using $.ajax()

return false; // This will avoid submitting the page
} 
```

--EDIT-- 代替或返回false，您也可以使用preventDefault() 方法

```
 $("#submit").submit( function (e) {
                e.preventDefault();
               // do your task
        }); 
```

# asp.net - Asp.net mvc3 - 如何在本地调试时停止清除 HttpRuntime.Cache

> ID：13114983
> 
> 赞同：1
> 
> 时间：2012-10-29T01:46:05.900
> 
> 标签：asp.net, asp.net-mvc-3

我正在使用 asp.net mvc3。我们的应用大量使用 HttpRuntime.Cache 将数据存储在 Web 服务器的内存中，以减少数据库调用。

我的问题是，每次我在本地运行应用程序（Visual Studio 中的 F5）时，缓存似乎都被清除了，导致从数据库中完全重新加载所有数据。即我运行一次，从数据库中获取数据然后停止。如果我在几秒钟后再次运行，缓存似乎已失效并且数据库调用再次发生。我的超时时间都在未来，所以不确定这里发生了什么。

我真的只想在缓存真的为空时获取数据，而不是每次在VS中按F5。有没有办法关闭每次我在本地运行时清除缓存的设置？

谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-29T01:50:55.380

每次停止调试时，它都会杀死存储缓存的应用程序域。您对此无能为力，因为要重新编译应用程序并启动新应用程序，您必须构建一个新的 AppDomain。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-29T02:13:48.317

如果您想在编译后保留缓存，我建议您使用其他缓存框架（例如[AppFabric](http://msdn.microsoft.com/en-us/windowsserver/ee695849.aspx)或[memcached](http://memcached.org/) ）将缓存置于进程之外。这些框架使用分布式缓存将缓存存储在进程之外，从而避免每次编译时缓存失效。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-29T01:50:41.977

没有办法阻止这种情况。当您在 VS 中停止调试器然后再次重新附加调试器时，它将回收工作进程。工作进程中缓存的任何内容都将被刷新，因为该进程将重新启动。

# java - 如何在java中正确格式化或合并两个直方图？

> ID：13114985
> 
> 赞同：1
> 
> 时间：2012-10-29T01:46:49.627
> 
> 标签：java, format

我有这段代码可以打印出一些骰子的直方图。我的问题是我想在第二个直方图旁边打印第一个直方图，目前我的输出看起来像这样![在此处输入图像描述](../Images/29668e61611c428e3cf10865eb7e4560.png)，但我想把星星放在滚动次数的右侧：2：3 次 /// 3： 1次/以此类推。

```
 public static void main(String[] args) {
    // TODO code application logic here
    System.out.print("Please enter how many times to roll the dice: ");
    Scanner sc = new Scanner(System.in);
    int n = sc.nextInt();
    int [] rolls = new int[n];

    Random r1 = new Random();
    Random r2 = new Random();

    int dice1;
    int dice2;
    int [] t = new int [13];

    for (int roll=0; roll < rolls.length; roll++)
    {
         dice1 = r1.nextInt(6)+1;
         dice2 = r2.nextInt(6)+1;

         System.out.println(roll + " : I rolled a " + dice1 + " and a " + dice2);

         int sum;
         sum = dice1 + dice2;

         if (sum == 2)
             t[0]++;
         if (sum == 3)
             t[1]++;
         if (sum == 4)
             t[2]++;
         if (sum == 5)
             t[3]++;
         if (sum == 6)
             t[4]++;
         if (sum == 7)
             t[5]++;
         if (sum == 8)
             t[6]++;
         if (sum == 9)
             t[7]++;
         if (sum == 10)
             t[8]++;
         if (sum == 11)
             t[9]++;
         if (sum == 12)
             t[10]++;

    }   

System.out.println("Histogram of rolls:" ); 
    String star ="*";
    int [] h= {t[0], t[1],t[2], t[3],t[4], t[5], t[6], t[7],t[8], t[9],t[10]};
     for (int i=0; i <h.length; i++)
             {
        for(int j = 0; j < h[i]; j++) 
           System.out.print( star);
        System.out.println();
    }

    System.out.println("Histogram of rolls:" );

    System.out.println( "2 : " + t[0] + " times");
    System.out.println("3 : " + t[1] + " times");
    System.out.println("4 : " + t[2] + " times");
    System.out.println("5 : " + t[3] + " times");
    System.out.println("6 : " + t[4] + " times");
    System.out.println("7 : " + t[5] + " times");
    System.out.println("8 : " + t[6] + " times");
    System.out.println("9 : " + t[7] + " times");
    System.out.println("10 : " + t[8] + " times");
    System.out.println("11 : " + t[9] + " times");
    System.out.println("12 : " + t[10] + " times");

} 
```

}

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-29T01:54:19.330

将代码的最后一部分更改为：

```
 ...
    System.out.println("Histogram of rolls:" ); 
    String star ="*";

    // No point in using "int [] h"

    for (int i=0; i < t.length; i++) {

        // Placing the logic for printing the text inside the loop
        // is how you use arrays
        System.out.print( (i+2) + " : " + t[0] + " times");
        for(int j = 0; j < t[i]; j++) {
           System.out.print(star);
        }
        System.out.println();
    }
} 
```

更重要的是，您可能会错过使用数组的一个关键优势：您应该尽可能使用循环，而不是硬编码顺序逻辑。例如，一大群 if 语句：

```
 if (sum == 2)
         t[0]++;
     if (sum == 3)
         t[1]++;
     if (sum == 4)
         t[2]++;
     if (sum == 5)
         t[3]++;
     if (sum == 6)
         t[4]++;
     if (sum == 7)
         t[5]++;
     if (sum == 8)
         t[6]++;
     if (sum == 9)
         t[7]++;
     if (sum == 10)
         t[8]++;
     if (sum == 11)
         t[9]++;
     if (sum == 12)
         t[10]++; 
```

可以简单地简化为：

```
 t[sum-2]++; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-29T01:54:47.500

建议：

1) 你根本不需要数组 h[]

2）您需要在同一个循环内一起打印直方图的每一行（“***”）和“直方图卷数”的每一行

3）我将创建一个变量，“`String asterisks = "************";`并使用 subString.() 副本打印正确数量的星号，而不是“for (...)”循环。

PS：

String.subString() 是我试图在你的[另一个问题中提出的建议](https://stackoverflow.com/questions/13106906/how-to-create-a-histogram-in-java)

# ruby-on-rails - rails 3：我怎样才能干这个？

> ID：13114989
> 
> 赞同：0
> 
> 时间：2012-10-29T01:48:07.847
> 
> 标签：ruby-on-rails, dry

我想干燥以下代码。我知道我可以将 if 和 else 语句组合成一行，但有更好的方法吗？谢谢，

```
def group_access
 @group = Group.find_by_url(params[:id])

 if user_signed_in?
    if @group.is_private == true and current_user.id == @group.user_id
      return
    end

    if @group.is_private == true and current_user.id != @group.user_id
      render "show_noaccess"
    end
  end

  if !user_signed_in?
    if @group.is_private == false
      return
    end

    if @group.is_private == true 
      render "show_noaccess"
    end
  end
end 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-29T01:54:32.653

```
def group_access @group = Group.find_by_url(params[:id])
  if @group.is_private? and current_user.try(:id) != @group.user_id
    render "show_noaccess"
  end
end 
```

# java - Java Process Builder IO 异常 - 不会运行程序

> ID：13114991
> 
> 赞同：1
> 
> 时间：2012-10-29T01:48:36.117
> 
> 标签：java, process, processbuilder

这是我的代码，我不确定为什么会出现以下错误：

```
 Opening firefox at Sun Oct 28 21:45:27 EDT 2012
 java.io.IOException: Cannot run program "firefox.exe": CreateProcess error=2, The system cannot find the file specified

public static void open(String app) {
        try {
            Calendar calendar = Calendar.getInstance();
            Date now = calendar.getTime();
            System.out.println("Opening " + app + " at " + now);
            ProcessBuilder builder = new ProcessBuilder(app+".exe");
            builder.start();
        }
        catch (IOException e) {
            System.out.println(e);
        }
    } 
```

有什么建议么？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-29T01:52:40.020

您必须指定 Firefox 可执行文件的完整路径。

# cedet - 如何在 cedet 中设置不同的源目录？

> ID：13114992
> 
> 赞同：0
> 
> 时间：2012-10-29T01:48:43.337
> 
> 标签：cedet, emacs24

如何在 cedet 下指定不同的源目录？

我已经像这样配置了我的项目：

```
(when (file-exists-p "~/ws/madwifi/build/Makefile")  
(setq cpp-tests-project  
(ede-cpp-root-project "madwifi"  
                  :file "~/ws/madwifi/build/Makefile"  
                  :system-include-path '("~/ws/madwifi/build/include/drivers"  
                                         "~/ws/madwifi/build/include/hw/"  
                                         )  
))) 
```

但是当我对符号执行语义符号引用符号时，它有时只列出项目中使用的函数。变量不是 symref'd 但是当我完全删除上面的块时，它只显示当前目录中的变量引用。如何正确配置 ede-cpp-root-project。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-02T16:45:24.213

symref 工具仅在当前项目中工作，不会从包含路径中提取数据。您可以从包含文件中搜索对符号的引用，但它不会从包含中找到声明。

symref 工具可与多种不同的外部工具一起使用，例如 GNU Global 或 idutils。理论上，您可以使用其中一种工具来索引您想要的任何文件，只要索引文件位于项目的根目录，它就会找到它，并找到您的外部包含。不过我还没有尝试过，所以我不知道这些工具是否有这种能力。

如果您想跳转到外​​部包含中的引用，您可以使用其他工具，例如 semantic-ia-fast-jump，它使用包含路径而不是项目索引，但它不会找到引用。