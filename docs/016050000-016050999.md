# StackOverflow 问答 16050000-16050999

# javascript - 在 JavaScript 中有效地将数组映射到字符串

> ID：16050001
> 
> 赞同：1
> 
> 时间：2013-04-17T01:38:33.267
> 
> 标签：javascript, ajax, arrays, json

我想使用 AJAX 加载数据而不将其格式化为 JSON，所以我自己对其进行了编码。

数据是客户记录：井号 ( `#`) 分隔客户记录，管道符号 ( `|`) 分隔客户数据的字段，克拉符号 ( `^`) 分隔字段名称和该字段的值。

所以，我有这样的东西（简化）：

```
name^James|email^somemail@gmail.com#name^Bary|email^bary@bary.com#... 
```

将此数据加载到 Javascript 中时，我想将其制成二维数组，如下所示：

```
clients = [
['name'=>'James','email'=>'somemail@gmail.com'],
['name'=>'Bary','email'=>bary@bary.com]
] 
```

...或者是对象格式的东西。如何最好地做到这一点？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-17T01:50:51.537

请注意，您不能在键或值中使用特殊字符（|、^、#）。如果您决定对它们进行编码，那么您可能可以使用 JSON。所以我真的推荐 JSON，所以你不必自己做任何事情。

如果您决定不支持包含 (|,^,#) 的键和值，则可以使用 javascript 拆分功能。像这样的东西（我没有运行它）：

```
var output=[];
var clients = input.split("#");

for (var client in clients)
{
  var outputClient={}
  var clientProps = client.split('|');
  for (var propPair in clientProps)
  {
     var propPairVal = propPair.split('^');
     outputClient[propPairVal[0]] = propPairVal[1];  
  }
  output.push(outputClient);
} 
```

但是，我真的推荐 JSON。它将更加灵活且不易出错。

# r - 以数据帧内和跨数据帧的组为条件时非唯一实例的频率

> ID：16050003
> 
> 赞同：0
> 
> 时间：2013-04-17T01:38:52.683
> 
> 标签：r, data-binding, unique, aggregation, conditional-operator

我正在分析包含个人在给定年份工作的公司信息的就业数据，每一年都是一个单独的数据框。

我希望能够快速识别在给定年份为多家公司工作过的个人，以及在一年内为多家公司工作过的个人。我的目标是计算给定公司在年内（单个数据框）和跨年经历“退出”（员工更换公司）的次数的一些频率。

数据帧的结构如下：

```
year1 <- data.frame(individual=c("1", "2", "3", "4", "2", "6", "7", "3", "9", "10"),
                firm=c("A", "B", "C", "D", "A", "C", "D", "B", "B", "C"))

year2 <- data.frame(individual=c("1", "2", "3", "4", "5", "6", "7", "8", "9", "10"),
                firm=c("A", "B", "D", "D", "A", "C", "D", "A", "B", "C")) 
```

通过搜索个人和公司之间的所有非唯一关联，我相当确定如何在给定的一年内做到这一点，但我不知道如何在多个数据对象/年份上做到这一点。同样，我对公司而不是特定个人的“退出”频率感兴趣。

我的理想输出是每家公司员工总数的频率/比例如下：

```
exit(withinyear)_byfirm
exit(betweenyear)_byfirm 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-17T02:51:21.187

计数，而不是比例：

```
within <- function(y) {
  # A vector of length > 1 in the aggregate function means that the person has
  # changed jobs.
  # `[` ignores the value 0 if there are other values present, and returns a
  # zero-length vector if not.  Often a source of confusion, but perfect here.
  table(levels(y$firm)[aggregate(firm~individual, data=y,
                                 function(x) {z<- unique(x)                 
                                              if(length(z) > 1) head(z, -1) else 0})$firm])
}

between <- function(year1, year2) {
  # Last place worked in year1
  y1 <- rbind(do.call(rbind, by(year1, year1$individual, FUN=tail, 1)))

  # First place worked in year2
  y2 <- rbind(do.call(rbind, by(year2, year2$individual, FUN=head, 1)))

  # Combine these and look for duplicate individuals with the prior function
  y <- rbind(y1, y2)
  within(y)
} 
```

结果：

```
> within(year1)

B C 
1 1 

> within(year2)
character(0)

> between(year1, year2)

A B 
1 1 
```

# c# - 这可以作为通用工厂方法工作吗？

> ID：16050007
> 
> 赞同：1
> 
> 时间：2013-04-17T01:39:05.067
> 
> 标签：c#, design-patterns, generics, factory-pattern

只是鬼混，我得到了这个想法，这是通用工厂方法模式的一个很好的实现吗？

工厂代码：

```
public static class Factory
{
    public static T Create<T>() where T : new()
    {
        return new T();
    }
} 
```

在其他地方调用工厂：

```
 class Program
    {
        static void Main(string[] args)
        {
            var obj = Factory.Create<Person>();
            obj.Name = "Mark";
            Console.WriteLine(obj.Name);

            var obj2 = Factory.Create<Animal>();
            obj2.AnimalType= "Dog";
            Console.WriteLine(obj2.AnimalType);

            dynamic obj3 = Factory.Create<ExpandoObject>();
            obj3.Age= 20;

            Console.WriteLine(obj3.Age);

            Console.ReadKey();
        }
    } 
```

我的意思是按预期工作...但是您在这里看到任何问题吗？因为我不...

任何建议都将不胜感激，因为我计划使用工厂来实例化对象，这些看起来不错..

提前致谢

**编辑**：我修改了工厂方法的名称以澄清问题，因为以前的名称是 GetInstance 并且令人困惑。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-17T07:13:08.290

您的代码在技术上是正确的，但 IMO 没用。使用这个工厂没有任何好处。对于您需要的每个新实例，使用**new**会更容易。所以，这是一个问题。

事实上，它几乎挫败了拥有工厂的理由。它不返回抽象，也不适合构建昂贵的对象。此外，您的代码将与工厂耦合。

DI Container，autofac 非常好，几乎是一个工厂，并且知道如何处理注册到它的任何类型的实例化。此外，它可用于注入您需要的任何实例作为依赖项。

总之，我想说对简单的情况使用*new*关键字，对具有依赖关系的对象使用 DI Container。您编写的 Factory 类及其用法实际上更像是糟糕的代码，因此请不要在实际应用中使用它。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-17T07:16:19.430

该示例运行良好，但我很难想象您真正需要它的情况。我想到的唯一用法是当您需要在每个对象创建操作时进行一些日志记录或类似的事情时。否则，您可以只调用目标类型构造函数。通常你使用工厂来创建实现通用接口的不同对象。因此，工厂的客户不知道所用接口的确切实现，从而导致解决方案的耦合度降低。基本上工厂知道某些接口的具体实现而工厂的消费者不知道，这是主要思想。

# apache - 山狮 apache 虚拟主机

> ID：16050008
> 
> 赞同：0
> 
> 时间：2013-04-17T01:39:06.330
> 
> 标签：apache, osx-mountain-lion

尝试设置虚拟主机并不确定我做错了什么。如果我运行 apachectl，我会收到此警告。

```
$ sudo apachectl -t
httpd: Could not reliably determine the server's fully qualified domain name, using Johns-MacBook-Pro.local for ServerName
[Tue Apr 16 21:34:01 2013] [warn] _default_ VirtualHost overlap on port 80, the first has precedence
Syntax OK 
```

所以发生的事情是一切都恢复到顶级虚拟主机。这是我的虚拟主机文件

```
<VirtualHost *:80>
    DocumentRoot "/Users/jcostanzo/development/impress"
    ServerName impress.local
    ServerAlias impress.local
    ErrorLog "/private/var/log/apache2/impress.local-error_log"

    <Directory "/Users/jcostanzo/development/impress" >
        AllowOverride All
        Order allow,deny
        Allow from all
    </Directory>
</VirtualHost>

<VirtualHost *:80>
    DocumentRoot "/Users/jcostanzo/development/testsomething"
    ServerName testing.local
    ServerAlias testing.local
    ErrorLog "/private/var/log/apache2/test.local-error_log"

    <Directory "/Users/jcostanzo/development/testsomething" >
        AllowOverride All
        Order allow,deny
        Allow from all
    </Directory>
</VirtualHost> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-21T10:23:39.533

第一个警告

```
httpd: Could not reliably determine the server's fully qualified domain name, using Johns-MacBook-Pro.local for ServerName 
```

你明白了，因为你还没有定义服务器名称。在 /private/etc/apache2/httpd.conf 中轻松定义它：

```
ServerName localhost 
```

比您的主机名是 localhost 并且您不会再收到此警告。更多信息在这里：[httpd：无法可靠地确定服务器的完全限定域名，使用 127.0.0.1 作为 ServerName](https://stackoverflow.com/questions/9541460/httpd-could-not-reliably-determine-the-servers-fully-qualified-domain-name-us)

第二个警告：

```
[Tue Apr 16 21:34:01 2013] [warn] _default_ VirtualHost overlap on port 80, the first has precedence 
```

可能出现是因为你不见了

```
NameVirtualHost *:80 
```

在您的虚拟主机文件中。您是否编辑了标准

```
/private/etc/apache2/extra/httpd-vhosts.conf
```

文件？您使用相同的 URL 也有点奇怪

```
服务器别名
```

至于

```
服务器名称
```

使用此配置再试一次，它应该可以工作：

```
NameVirtualHost *:80

<VirtualHost *:80>
    ServerName impress.local
    ServerAlias www.impress.local
    DocumentRoot "/Users/jcostanzo/development/impress"
    ErrorLog "/private/var/log/apache2/impress.local-error_log"
    <Directory "/Users/jcostanzo/development/impress" >
        AllowOverride All
        Order allow,deny
        Allow from all
    </Directory>
</VirtualHost>

<VirtualHost *:80>
    ServerName testing.local
    ServerAlias www.testing.local
    DocumentRoot "/Users/jcostanzo/development/testsomething"
    ErrorLog "/private/var/log/apache2/test.local-error_log"
    <Directory "/Users/jcostanzo/development/testsomething" >
        AllowOverride All
        Order allow,deny
        Allow from all
    </Directory>
</VirtualHost> 
```

跑

```
apachectl -S
```

看看，如果 apache 接受你的配置。

# batch-file - 有没有办法在 bat 文件中测试此表达式中的空值？

> ID：16050010
> 
> 赞同：0
> 
> 时间：2013-04-17T01:39:19.343
> 
> 标签：batch-file, isnull

有没有办法在 bat 文件中测试此表达式中的空值？

```
FOR /F %%f IN ('C:\Windows\System32\inetsrv\appcmd list site /text:name /bindings:') DO rmdir /s/q "D:\Websites\%%f" 
```

如果 %%f 为空，它不会执行 Do rmdir 语句？

感谢你的协助。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-17T02:47:26.203

应该没有必要。如果的输出`APPCMD`是一个空字符串，`FOR /F`将忽略它（如果行开始`;`）

现在，如果任何一行只包含空格，那是另一个问题。

通过运行此批处理进行检查：

```
@echo off
setlocal
FOR /F %%f IN ('C:\Windows\System32\inetsrv\appcmd list site /text:name /bindings:') DO ECHO ++%%f$$
pause 
```

这将在每行`++`的开头和`$$`结尾显示返回的每个项目。

如果报告了不需要的名称，那么我们需要处理它。

要寻找的东西：

*   ++ 在每行的开头和 $$ 在每行的末尾
*   似乎没有行以 $$ 开头
*   可能有一行“++[空格]$$”
*   应该没有“++$$”行

# sitecore - Sitecore MediaRequestHandler throwing String was not recognized as a valid DateTime because the day of week was incorrect

> ID：16050012
> 
> 赞同：2
> 
> 时间：2013-04-17T01:39:22.607
> 
> 标签：sitecore

I am regularly seeing exceptions show up in my Sitecore log file as follows:

```
at System.DateTimeParse.Parse(String s, DateTimeFormatInfo dtfi, DateTimeStyles\ styles)
at Sitecore.Resources.Media.MediaRequestHandler.Modified(HttpContext context,\ Media media, MediaOptions options)
at Sitecore.Resources.Media.MediaRequestHandler.DoProcessRequest(HttpContext\ context, MediaRequest request, Media media)
at Sitecore.Resources.Media.MediaRequestHandler.DoProcessRequest(HttpContext\ context)
at Sitecore.Resources.Media.MediaRequestHandler.ProcessRequest(HttpContext\ context)
at System.Web.HttpApplication.CallHandlerExecutionStep.System.Web.HttpApplication.IExecutionStep.Execute()
at System.Web.HttpApplication.ExecuteStep(IExecutionStep step, Boolean& completedSynchronously) 
```

I am using Sitecore 6.1

I realise there are a number of posts highlighting this is usually caused by incorrect date formatting or by having a string which contains a date, and then a day of the week which is not correct for that date. What I am looking for is an understanding of what specifically causes the Sitecore MediaHandler to throw this error.

I'm not sure if this is signficant but under `<handlers>`I have

```
<add verb="*" path="sitecore_media.ashx" type="Sitecore.Resources.Media.MediaRequestHandler, Sitecore.Kernel" name="Sitecore.MediaRequestHandler" /> 
```

and under `<httpHandlers>`,

```
<add verb="*" path="sitecore_media.ashx" type="Sitecore.Resources.Media.MediaRequestHandler, Sitecore.Kernel" /> 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-17T06:15:30.033

Sitecore is trying to convert the date from the "If-Modified-Since" request header to a DateTime object but fails to do so.

In Sitecore v6.1.0 rev. 090821 (Update-2) this behavior has been fixed according to the change log: "Media requests would sometimes fail due to the browser sending an invalid "If-Modified-Since" header."

I can't find a Sitecore.Kernel.dll on the SDN for an older v6.1.0 so I can reflect the code and explain what they do wrong in your v6.1.0.

# php - How to grab a list of active calls from Twilio

> ID：16050021
> 
> 赞同：4
> 
> 时间：2013-04-17T01:40:31.840
> 
> 标签：php, twilio

I'm running into a double records issue when pulling a list of `in-progress` calls using the Twilio REST API. Here is how I want the workflow to go.

1.  Caller dials client's number. **Check**
2.  Caller hears welcome message and is placed into call queue. **Check**
3.  Operator sees caller in queue from dashboard. ***Issue***
4.  Operator chooses to be connected to caller. **Check**
5.  Calls are bridged. **Check**

My problem is that when I make a query for all calls in progress, I am getting double records.

*   One record shows up as soon as the caller is placed in the queue, this record shows the caller's number in the `from` property, and the Twilio number in the `to` property.
*   The second record appears after choosing to connect the calls. It appears to be a duplicate of the first, but instead of showing the global Twilio number (the mother number) as the `to` property, it displays the agent's phone number.

Here is how I am pulling the list:

```
<?php foreach($client->account->calls->getIterator(0,50,array("Status" => "in-progress")) as $call): ?>
    <tr>
    <td><?=$call->start_time?></td>
    <td><?=$call->duration?></td>
    <td><?=$call->from?></td>
    <td><?=$call->to?></td>
    <td>
        <form action="actions/queue.php" method="post">
        <input type="hidden" name="caller" value="<?=$call->parent_call_sid?>" />
        <input type="submit" value="Return Call to Queue" style="color: #555;" />
        </form>
    </td>
    </tr>
<?php endforeach; ?><!-- foreach calls as call --> 
```

**A few extra things worth noting.**

*   This has a little bit of styling so that I can see what I am doing, most of these interactions will eventually take place on an iPad or desktop software.
*   The second record mentioned above (the one that displays the agent's phone number) can move between the list of calls that show up as queued and the list of calls that show up as `in-progress`. It is only the first record (the one showing the Twilio phone number) that always appears an `in-progress`
*   Yes, I can filter the record out on my end by ignoring the records that show the Twilio number as the `to`property, but I would prefer to filter it on Twilio's end, if possible.

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2014-01-14T00:01:53.863

Twilio Developer Evangelist here.

You can [filter for only incoming or outgoing calls](https://www.twilio.com/docs/api/rest/call?utm_source=stackoverflow&utm_medium=jan2014&utm_campaign=stackathon#instance-properties) in your API request to Twilio. If you add a `direction` parameter to your `getIterator` call you should be able to get only the incoming call in your logs and not the outgoing call going to the agent:

```
foreach($client->account->calls->getIterator(0,50,array("Status" => "in-progress", "Direction" => "inbound")) as $call): 
```

The reason you are getting multiple entries is because each person you call (aka the agent and the customer in this case) is counted as an individual leg of the call by Twilio.

# xml - 如何在 XQuery 中选择节点的属性值？

> ID：16050023
> 
> 赞同：30
> 
> 时间：2013-04-17T01:40:45.773
> 
> 标签：xml, xquery

在下面的 XML 中：

```
<company>
    <customers>
    <customer cno="2222">
            <cname>Charles</cname>
            <street>123 Main St.</street>
            <city>Wichita</city>
            <zip>67226</zip>
            <phone>316-636-5555</phone>
        </customer>
        <customer cno="1000">
            <cname>Bismita</cname>
            <street>Ashford Dunwoody</street>
            <city>Wichita</city>
            <zip>67226-1555</zip>
            <phone>000-000-0000</phone>
        </customer>     
    </customers>
</company> 
```

我需要获取客户的编号，这是一个属性。在 XPath 中我知道它是`/company/customers/customer/@cno`，在 XQuery 中我尝试了下面的表达式，但对我不起作用：

```
for $c in /company/customers/customer
return $c/@cno 
```

* * *

## 回答 #1

> 赞同：55
> 
> 时间：2013-04-17T05:11:52.710

您应该使用数据来选择属性值：-

```
for $c in /company/customers/customer
return data($c/@cno) 
```

* * *

## 回答 #2

> 赞同：14
> 
> 时间：2015-03-04T13:17:12.577

您还可以使用`string`获取属性值：

```
for $c in /company/customers/customer
    return $c/@cno/string() 
```

# javascript - Youtube iframe API 无法发布消息

> ID：16050024
> 
> 赞同：12
> 
> 时间：2013-04-17T01:40:47.200
> 
> 标签：javascript, youtube, youtube-api

一段时间以来，我编写的一段 javascript 可以在某个页面上监听 youtube 操作，效果非常好。我正在使用 Youtube 的 iframe js api：[https](https://developers.google.com/youtube/iframe_api_reference) ://developers.google.com/youtube/iframe_api_reference 。但是最近添加的一个内容，一个特定的 youtube 视频，跟踪不起作用。事件根本不会触发。

在控制台中，我注意到这个帖子消息错误： `Unable to post message to http://youtube.com. Recipient has origin http://www.youtube.com.`

所以我自己的代码没有任何帮助。stackoverflow 上的一些问题表明这是启动`new YT.player`太早的问题，所以我尝试了一大堆事情，比如在加载时加载 yt js api 文件，`window`然后才应用 api，但这似乎也没有任何好处.

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2016-04-25T15:34:38.117

我知道这篇文章已有 3 年历史，但对于那些仍在寻找答案的人：

添加此脚本，一切正常：

```
<script src="https://www.youtube.com/iframe_api"></script> 
```

我对 jwplayer 也有同样的问题，并用那个脚本修复了它。

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2013-04-17T01:40:47.200

我花了一个多小时，但答案就在我面前。这实际上是非常自我解释的：**你不能使用 youtube 的 js api 来跟踪没有`www`**. 我不知道为什么，他们的文档中肯定没有这样说。

我对此进行了几次测试并确认，截至目前，使用源跟踪 iframe`www.youtube.com/embed/0GN2kpBoFs4`可以很好地工作，而跟踪`youtube.com/embed/0GN2kpBoFs4`会抛出：

`Unable to post message to http://youtube.com. Recipient has origin http://www.youtube.com.`

当然，令人困惑的部分是视频加载和播放都很好。只有 API 不能正常工作。

小提琴 - [http://jsfiddle.net/8tkgW/](http://jsfiddle.net/8tkgW/)（在铬/山狮上测试）

顺便说一句，在写这个答案时，我遇到了[YouTube iframe API：如何控制 HTML 中已经存在的 iframe 播放器？](https://stackoverflow.com/questions/7443578/youtube-iframe-api-how-do-i-control-a-iframe-player-thats-already-in-the-html)- 注意这家伙的小提琴。他编写了自己的 youtube iframe 实现（哇！）。如果您将 fiddle 中的 iframe 源地址更改为没有`www`，它将*起作用*。这仅意味着 youtube 编写了糟糕的 js。坏坏坏！

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2016-05-24T17:18:49.773

不要忘记将其添加到白名单中：

```
<!-- Add the whitelist plugin -->
<plugin name="cordova-plugin-whitelist" source="npm" spec="*"/>

<!-- White list https access to Youtube -->
<allow-navigation href="https://*youtube.com/*"/> 
```

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2016-06-11T09:34:24.667

# youtube api 文档建议像这样加载 api

```
var tag = document.createElement('script');
tag.src = "http://youtube.com/iframe_api";
tag.id = "youtubeScript";
var firstScriptTag = document.getElementsByTagName('script')[1];
firstScriptTag.parentNode.insertBefore(tag, firstScriptTag); 
```

# 但收到此错误：无法将消息发布到[http://youtube.com](http://youtube.com)。收件人来源[http://www.youtube.com](http://www.youtube.com)

这是我从 [a now-dead site] 找到的最佳解决方案：

所以在调用 Api 之前先在顶部添加这个

```
if (!window['YT']) {var YT = {loading: 0,loaded: 0};}
if (!window['YTConfig']) {var YTConfig = {'host': 'http://www.youtube.com'};}
if (!YT.loading) {YT.loading = 1;(function(){var l = [];YT.ready = function(f) {if (YT.loaded) {f();} 
else 
{l.push(f);}};
window.onYTReady = function() {YT.loaded = 1;for (var i = 0; i < l.length; i++) {try {l[i]();} catch (e) {}}};
YT.setConfig = function(c) {for (var k in c) {if (c.hasOwnProperty(k)) {YTConfig[k] = c[k];}}};
var a = document.createElement('script');
a.type = 'text/javascript';
a.id = 'www-widgetapi-script';
a.src = 'https:' + '//s.ytimg.com/yts/jsbin/www-widgetapi-vflumC9r0/www-widgetapi.js';
a.async = true;
var b = document.getElementsByTagName('script')[0];
b.parentNode.insertBefore(a, b);})();} 
```

//===========THEN==============================

```
function onYouTubeIframeAPIReady () {// do stuff here} 
```

# c - 文件系统统计

> ID：16050027
> 
> 赞同：0
> 
> 时间：2013-04-17T01:40:59.297
> 
> 标签：c, disk-access

我使用以下代码来查找我的磁盘使用情况`/`

```
int main()
{
    struct statfs *stat;
    statfs64("/tmp",stat);
    perror("");
    printf("%lu \n",stat->f_bfree*stat->f_bsize);
    return 0;
} 
```

perror 继续打印“错误地址”和大小的随机数。

`Bad address`

`3264987920`

PS：我试过了`sudo ./a.out`，`statfs("a.out",stat)`

可能是什么问题？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-17T01:44:17.313

您已经声明了一个指向结构的指针，`statfs`但实际上并没有为这样的结构分配空间。指针指向无处。它是未初始化的，它没有指向任何合法的地方。

```
struct statfs stat;

if (statfs64("/tmp", &stat) == -1) {
    perror("statfs64");
}
else {
    printf("%lu\n", stat.f_bfree * stat.f_bsize);
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-17T09:15:47.857

您使用 statfs *stat 没有内存分配，因此野指针使用它可能指向任何地方（非法内存地址）要么用有效内存初始化它，要么使用变量并传递它的引用。

# sql - 我可以创建一个内部有错误的新存储过程吗？

> ID：16050031
> 
> 赞同：0
> 
> 时间：2013-04-17T01:41:12.200
> 
> 标签：sql, sql-server

今天早上我尝试在 SQL Server 中创建一个存储过程，我知道其中存在错误，但由于某些原因，我想保留它并在将来修复它。但是当我执行“创建过程”时，它返回的错误告诉我出了点问题。我认为正因为如此，程序没有被创建，但我想创建这个程序，即使有问题。

有任何想法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-17T05:06:27.983

还有另一种方式。

而不是**保存****.sql 文件**。

您可以**注释错误部分**并运行程序。

这会将**过程存储在您的数据库中**，然后您可以稍后修复它。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-17T01:47:32.843

如果您在运行 CREATE 语句时遇到错误，那么您将无法创建它。您可以将其保存为 .SQL 文件并稍后修复错误。

这与您在运行该过程时可能遇到的错误不同。create 语句的语法有问题，或者其他一些问题，例如同名的 SP、缺乏创建 SP 的权限等。无论哪种方式，在这些问题得到解决之前，您都不能创建 SP。

# erlang - 使用 Erlang etop 将信息转储到文件中？

> ID：16050034
> 
> 赞同：1
> 
> 时间：2013-04-17T01:41:32.360
> 
> 标签：erlang, erlang-escript

使用 Erlang etop 将 Erlang 程序信息转储到文件的命令行选项是什么？如果这不能在命令行中完成，可以在 escript 中完成吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-17T09:24:10.487

这是我在 Makefile 中找到的：

```
run_etop:
    erl -name node@127.0.0.1 -setcookie cookie -pa ebin/ -detached -s app
    erl -name etop@127.0.0.1 -noinput -s etop -s erlang halt -output text \
    -setcookie cookie -interval 1 -lines 20 -accumulate true > etop.log 
```

我启动我的应用程序 ( `app`) `node@127.0.0.1`，然后启动另一个节点 ( `etop@127.0.0.1`)，从该节点连接到第一个节点并在其中运行 etop。

要获取 etop 选项列表，请`etop:help()`在 erlang 控制台中尝试。

# sdk - BLE设备的ios后台任务通知

> ID：16050039
> 
> 赞同：1
> 
> 时间：2013-04-17T01:42:28.080
> 
> 标签：sdk, background, bluetooth, notifications, iso

我正在开发一个连接到 BLE（蓝牙低功耗）设备的“后台任务启用”应用程序。当应用程序在前台时，用户打开应用程序并连接到 BLE。一旦应用程序进入后台，它将保持与设备的通信畅通（如果在范围内），并警惕从此类设备收到的任何信息。现在我的问题是如何处理甚至注意到数据来自设备？似乎现在我的通知已排队，并且仅在我手动将应用程序置于前台时才显示。

谢谢，

安德烈斯·N。

# php - PHP 代码只在 javascript setInterval 中运行一次

> ID：16050041
> 
> 赞同：0
> 
> 时间：2013-04-17T01:42:54.140
> 
> 标签：php, javascript, setinterval

我只是在 JC 课程中学习 PHP 和 Javascript。我有以下学校项目。以下`setInterval()`每 3 秒运行一次，但嵌入的 PHP 代码仅在第一次运行。

即`newVal`第一次更新，但在接下来的迭代中不会改变它的值。该脚本永远不会远程登录回服务器以查找值是否已更改。

```
 setInterval(function () {
    var newVal, mem;

    <?php $telnet = new PHPTelnet();?>;
    <?php $result = $telnet->Connect('ip_address','username','password');?>;
    <?php   $telnet->DoCommand('show process memory summary"', $result);?>;
    <?php $result = preg_replace('/[\r\n ]+/',' ', trim($result)); ?>;

    newVal = "<?php echo substr($result,61,7) ?>"; 
    newVal = newVal / 10000;

    mem.update(newVal);
  }, 3000); 
```

感谢下面的一些答案/评论，这就是我为使其工作所做的工作：

Javascript

```
 setInterval(function () {
        $.get("memAccess.php", function(return_value) {
                mem.update(parseFloat(return_value));
        });
    }, 3000); 
```

单独的 PHP 文件

```
<?php
    $telnet = new PHPTelnet();
    $result = $telnet->Connect('ip_address','username','password');

    $telnet->DoCommand('show process memory summary', $result);
    $result = preg_replace('/[\r\n ]+/',' ', trim($result));
    $result = substr($result,61,7);

    echo $result; 
    $telnet->Disconnect();
    exit();
?> 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-17T01:52:10.540

基本上，当您在 javascript 中编写 php 代码时，它总是在页面加载时运行一次。在这之后你只是将php代码写到浏览器中，根本看不懂（php在服务器上处理，输出是浏览器可以解释的Html、Css和Javascript）

因此，如果您需要在不重新加载页面的情况下从服务器更新数据，唯一的方法是使用 Ajax 请求，它基本上连接到页面内的服务器并从中获取数据。

更多关于 Ajax：[Ajax 基础知识](http://www.w3schools.com/ajax/)

# matlab - Matlab中的错误，调用函数

> ID：16050050
> 
> 赞同：-1
> 
> 时间：2013-04-17T01:44:09.487
> 
> 标签：matlab, function

错误是：

getvalues 中的错误（第 4 行） faceNoNoise = wiener2(x, [5 5]);

在调用“C:\Users\Trent\face\getvalues.m>getvalues”期间未分配输出参数“mouthTall”（可能还有其他参数）。

finalProject2 中的错误（第 10 行）[numWhiteEyebrow,mouthTall,brownHeight] = getvalues(faceGray)

```
faceNoNoise = wiener2(x, [5 5]); <---- getvalues.m  line with error

function finalProject2(x)       <----- finalproject file

face = imread(x);
faceGray = rgb2gray(face);

numWhiteEyebrow = 0;
mouthTall = 0;
eyebrowHeight = 0;

[ numWhiteEyebrow, mouthTall, eyebrowHeight ] = getvalues( faceGray ) <--error above

end 
```

我试图弄清楚它为什么这样做......

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-17T01:51:32.263

发生这种情况是因为您没有在函数中分配所需的输出值`getvalues.m`。有 3 个输出参数应该由`getvalues.m`. 看到[这个](https://stackoverflow.com/questions/14227564/error-output-argument-not-assigned-during-call)和[这个](http://www.mathworks.com/support/solutions/en/data/1-FA99V6/index.html)。为了更清楚地说明，如果您在`getvalues.m`文件中的函数定义是`[a,b,c]=getvalues(x)`（在您的情况下通常是这样），那么在您的文件中，`getvalue.m`您应该有 variables`a`和.`b``c`

# java - selectonemenu 验证错误：值无效

> ID：16050051
> 
> 赞同：3
> 
> 时间：2013-04-17T01:44:15.163
> 
> 标签：java, hibernate, jsf

我正在使用这样的selectonemenu：

```
<h:selectOneMenu value="#{MyBean.zajecie.przedmiot}">
    <f:selectItems value="#{MyBean.przedmioty}" var="p"
        itemLabel="#{p.nazwa}" itemValue="#{p}" />
    <f:converter converterId="converter.PrzedmiotConverter" />
</h:selectOneMenu> 
```

我的豆：

```
private Zajecie zajecie;//+set get
private List<Przedmiot> przedmioty;//+set get

@PostConstruct
private void init() {
    przedmioty = przedmiotDao.findByLogin("login");
    zajecie = new Zajecie();
} 
```

和转换器方法：

```
public Object getAsObject(FacesContext context, UIComponent component, String value) {
    PrzedmiotDao przedmiotDao = DaoFactory.getInstance().getPrzedmiotDao();
    Przedmiot przedmiot = przedmiotDao.findById(Przedmiot.class, Integer.parseInt(value));
    return przedmiot;
}

public String getAsString(FacesContext context, UIComponent component, Object value) {
    Przedmiot przedmiot = (Przedmiot) value;
    String idAsString = String.valueOf(przedmiot.getPrzedmiotId());
    return idAsString;
} 
```

selectonemenu 组件正在按预期填充。当我提交时，它显示`Validation Error: Value is not valid`. 我知道`equals()`我的实体需要一个合适的方法，所以我只使用 id 字段用 eclipse 生成了它。然后我不得不将测试更改`getClass() != obj.getClass()`为`obj instanceof Przedmiot`因为`obj.getClass()`返回了这样的内容：`Przedmiot_$$_javassist_1`。我不确定这是否相关，因为毕竟`obj`证明是`null`. 我究竟做错了什么？

**编辑：**

MyBean 是 ViewScoped。

有趣的是，使用相同转换器的类似代码可以在应用程序的其他部分工作。不同之处在于，在工作部分我只是查看类型列表，`Przedmiot`并以另一种方式获取它。

```
@PostConstruct
private void init() {
    student = studentDao.findByLogin(ra.getUser());
}

<h:selectOneMenu value="#{otherBean.przedmiot}">
    <f:selectItems value="#{otherBean.student.grupa.przedmiots}" var="p" 
        itemLabel="#{p.nazwa}" itemValue="#{p}" />
    <f:converter converterId="converter.PrzedmiotConverter" />
</h:selectOneMenu> 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-04-17T18:24:13.123

解决了。这当然是写得很糟糕的`equals()`方法。首先，我的问题有一个错误。`obj`没有解决为空，但`other.przedmiotId`做了。对此感到抱歉。查看eclipse生成的方法：

```
@Override
public boolean equals(Object obj) {
    if (this == obj)
        return true;
    if (obj == null)
        return false;
    if (!(obj instanceof Przedmiot))//changed this from (getClass() != obj.getClass())
        return false;
    Przedmiot other = (Przedmiot) obj;
    if (przedmiotId == null) {
        if (other.przedmiotId != null)
            return false;
    } else if (!przedmiotId.equals(other.przedmiotId))
        return false;
    return true;
} 
```

问题在`other.przedmiotId`. 当使用 getter 获取值时，`other.getPrzedmiotId()`它不再解析为 null。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-17T03:27:57.853

在您的转换器`Integer.parseInt(value)`中： 和`<f:selectItems`您的 set`itemValue="#{p}"`中，因此每个`#{p}`都是`Przedmiot`类型的实例。

另请参阅： [为什么 selectOneMenu 将 ItemLabel 发送给转换器？](https://stackoverflow.com/questions/7022965/why-selectonemenu-send-itemlabel-to-the-converter)

# r - 聚类序数数据

> ID：16050056
> 
> 赞同：-1
> 
> 时间：2013-04-17T01:44:46.370
> 
> 标签：r, cluster-analysis, k-means, hclust

我想用 R 语言（编码）对我的数据（kmeans 或 hclust）进行聚类。我的数据是有序的，这意味着数据是李克特量表来衡量成本上升的原因（我有 41 个原因“变量”），范围从 1 到 5，其中 1 是无影响到 5 主要影响（我有大约 160观察“谁对原因进行排名”）......关于如何根据观察对 41 个原因进行聚类的任何帮助......我是否必须在聚类或任何有帮助的东西之前将比例转换为百分比或 z 分数...... .. 我真的需要你的帮助！！这是要使用的数据 [https://docs.google.com/spreadsheet/ccc?key=0AlrR2eXjV8nXdGtLdlYzVk01cE96Rzg2NzRpbEZjUFE&usp=sharing](https://docs.google.com/spreadsheet/ccc?key=0AlrR2eXjV8nXdGtLdlYzVk01cE96Rzg2NzRpbEZjUFE&usp=sharing)

我想根据观察中出现的相似性对变量（列）进行聚类……我遵循 statmethods.net/advstats/cluster.html 中的代码；但我无法根据观察中出现的相似性对变量（列）进行聚类，并且我遵循 mattpeeples.net/kmeans.html#help 上的工作；但我不知道他为什么将数据转换为百分比，然后转换为 Z-score 标准化。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-17T03:27:37.463

我不清楚您是想根据变量中的相似性对行（观察）进行聚类，还是根据观察中出现的相似性对变量（列）进行聚类？

无论如何，请参阅 package **[cluster](http://cran.r-project.org/web/packages/cluster/index.html)**。这是所有 R 安装随附的推荐软件包。

阅读`?daisy`有关如何处理序数数据的详细信息。该度量可用于诸如`agnes`（用于层次聚类）或`pam`（用于对中心点进行分区，更强大的*k*均值版本）等功能。

默认情况下，这些将聚集行/观察。`t()`如果要对列（变量）进行聚类，只需使用转置数据对象。尽管这可能会根据您存储数据的方式而弄乱数据。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-01-09T08:55:28.663

将数据转换为百分比称为数据归一化，因此所有变量都在 0 - 1 的范围内。

如果数据未标准化，您可能会偏向具有较大值的维度

# c++ - c ++循环遍历目录中的文件

> ID：16050058
> 
> 赞同：2
> 
> 时间：2013-04-17T01:45:20.057
> 
> 标签：c++

我不确定这是否可行，但是否可以循环遍历 C++ 目录中的文件？

例如，我如何知道来自 c++ 文件的目录中有多少文件，以及如何单独调用该文件而不是手动提供每个文件的路径，这将非常痛苦？

```
while(1){
   pcl::io::loadPCDFile<pcl::PointXYZ> ("getFiles.pcd", *cloud1); <-- each file
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-17T01:49:26.290

有特定于操作系统的解决方案，例如

*   `opendir``readdir`在 Linux上
*   `FindFirstFile``FindNextFile`在 Windows上

或者您可以使用[Boost Filesystem](http://www.boost.org/doc/libs/1_53_0/libs/filesystem/doc/tutorial.html#Directory-iteration)，它已经找出了所有特定于操作系统的位。

# python - 为简单的 python 脚本创建 GUI

> ID：16050061
> 
> 赞同：0
> 
> 时间：2013-04-17T01:45:32.603
> 
> 标签：python, user-interface, wxpython

我有这个小脚本，可以计算文件中有多少个单词以及一个单词重复了多少次。我想在 wxPython 中制作一个 gui，我可以在其中输入文件名，它会显示结果。

我一直在查看 wxPython 示例，但仍然没有掌握它的窍门。这是脚本

```
 #!/usr/bin/env python
import sys
import os
import re
import operator

if len(sys.argv) == 1:
        sys.exit("Usage: "+sys.argv[0]+" files...");
line = sys.argv[1:]
num = 0
dic = {}
for i in line:
        dat = open(i, "r").read()
        words = re.findall(r'[a-z]+',dat)
        for word in words:
                if len(word)>3:
                        num=num+1
                        if dic.has_key(word):
                                dic[word]=dic[word]+1
                        else:
                                dic[word]=1
print num

sorted_dic = sorted(dic.iteritems(), key=operator.itemgetter(1), reverse=True)
print sorted_dic 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-17T13:27:13.063

查看 wx.FileDialog 以帮助您入门。这是一个讨论所有标准对话框的教程，包括文件对话框： http: [//www.blog.pythonlibrary.org/2010/06/26/the-dialogs-of-wxpython-part-1-of-2/](http://www.blog.pythonlibrary.org/2010/06/26/the-dialogs-of-wxpython-part-1-of-2/)（向下滚动大约一半）。

现在您可能会使用某种按钮打开文件对话框。因此，您将按钮绑定到 EVT_BUTTON 并在事件处理程序中打开文件对话框。像这样的东西：

```
myButton.Bind(wx.EVT_BUTTON, self.openFileDialog) 
```

现在在您的 openFileDialog（事件处理程序）方法中，您可以打开对话框并检索路径。此时，您将路径传递给您已经编写的代码，该代码可以是事件处理程序的一部分，也可以将其放入自己的方法中。然后，当您获得结果时，您可能希望在 wx.StaticText 小部件中显示它，或者在 wx.MessageBox 中显示它

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-17T02:47:53.240

目前尚不清楚您的问题是什么，GUI 的哪个部分（此处未显示）您遇到问题？而不是 wxPython，请查看[tkinter](http://docs.python.org/2/library/tkinter.html)。在 tkinter 中，您可以使用[tkFileDialog](http://tkinter.unpythonic.net/wiki/tkFileDialog)并获取要打开和解析的文件的文件路径，尽管 wxPython 具有类似的功能。

我不想为你写出代码，但基本上，它需要：

*   创建一个框架，
*   创建将绑定到将启动 tkFileDialog 的命令的按钮
*   另一组将绑定到将计算文件中的单词的命令的小部件
*   以某种方式显示您的结果。

# php - 设置表单中文本框的值

> ID：16050071
> 
> 赞同：0
> 
> 时间：2013-04-17T01:47:35.073
> 
> 标签：php, javascript

`formDrawer`我在下面有我的表格

```
<table id="drawer-table">
<form action="" method="post" name="formDrawer">
    <tr>
        <td>New Drawer Name</td>
        <td><input type="text" name="name" size="30" maxlength="20"/> </textarea>       
        </td>
    </tr>
    <tr>
        <td>Prefix</td>
        <td><input type="text" name="prefix" size="10" maxlength="6"/> </textarea>      
        </td>
    </tr>
 </form>
    <tr>
      <td colspan="2" align="center">
          <form id="form1" name="form1" method="post" action="">
            <label>
            <input type="submit" name="drawerAdd" value="Save"/>
            <input type="submit" name="pCancel" value="Cancel" />
            </label>
          </form>
      </td>
  </tr> 
</table> 
```

下面我添加了一个 PHP，它使用在我的表单中输入的数据创建表。在我的表格的最后一列中，我添加`edit`了当我单击它时我想在表单中设置我的控件的值。我在下面有我的代码，但它不起作用。在我的`a href`我添加了 javascript 但没有运气。

```
while($row = mysql_fetch_array($result, MYSQL_BOTH))
      {
      echo "<tr onMouseover=this.bgColor='#EEEEEE' onMouseout=this.bgColor='#FFFFFF'>";
      echo "<td>" . $row['drawerName'] . "</td>";
      echo "<td>" . $row['drawerPrefix'] . "</td>";

      echo "<td class='add-edit'><button type='button' onclick='this.formDrawer.prefix.value = ".$row['drawerPrefix'].";'>Edit</button></td>";

      echo "</tr>";
      } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-17T01:59:47.297

您似乎遇到了以下问题：

```
<a id='myLink' href='#' onClick='$('a#myLink').click(function(){
  document.getElementsByName('prefix')[0].value=".$row['drawerName']."; return false;
  });'>Edit</a> 
```

在内联侦听器中，您可以使用*this*引用当前元素。您似乎还从同一元素的单击侦听器中添加了单击侦听器，这没有任何意义。

此外，如果您需要按钮，请使用按钮，而不是链接。因此，您可能想要执行以下操作：

```
<button type="button" onclick="this.form.prefix.value = 'whatever';">Set the value</button> 
```

# r - rgl 包散点图标签

> ID：16050073
> 
> 赞同：1
> 
> 时间：2013-04-17T01:47:55.557
> 
> 标签：r, graphics, rgl

我似乎在 rgl 包中添加标题和轴标签时遇到问题。这是一个最小的工作示例：

```
> plot3d(x = c(1,2,3,1), y = c(2,3,1,4), z = c(2,3,4,5), type = 's', size =1)
> decorate3d(main = "My Plot") 
```

我既没有看到标签（默认情况下应该在 decorate3d 中设置）也没有`My Plot`.

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-17T01:54:59.347

`decorate3d`为现有图添加标签，因此在您的示例中

```
plot3d(x = c(1,2,3,1), y = c(2,3,1,4), z = c(2,3,4,5), type = 's', size =1) 
```

使用 xlab = 'c(1,2,3,1)', ylab = ' c(2,3,1,4)' 等创建一个绘图

`decorate3d`然后在原始标签之外添加默认值（`x`, `y`, `z`）（因为它正在当前绘图上书写）。

如果您想使用`decorate3d`标记轴，将它们设置为`''`在原始调用中会更安全`plot3d`

例如

```
plot3d(x = c(1,2,3,1), y = c(2,3,1,4), z = c(2,3,4,5), type = 's', size =1,
       xlab = '', ylab = '', zlab = '')

## then 
decorate3d(main = "My Plot")
## will work as you wish. 
```

# python - 使用 Scapy 构建探测请求请求

> ID：16050074
> 
> 赞同：4
> 
> 时间：2013-04-17T01:47:55.817
> 
> 标签：python, wireless, scapy

如何使用 scapy 发送**IEEE802.11**探测请求？我使用了以下代码：

```
srp(Dot11(type=0,subtype=4,addr1 = '00:23:68:a3:28:fc', addr2 = '8c:a9:82:3a:94:5e'), iface = 'wlan0') 
```

addr1 是 dest-AP 的 Mac 地址，addr2 是本地 Mac，但我无法使用 监控此数据包`wireshark or scapy sniff monitor`，这是怎么回事？（监控数据包时，我使用`airmon-ng start wlan0` 更改模式）

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-25T20:15:45.293

IEEE 802.11 使用 CSMA/CA（带有冲突避免的载波侦听多路访问），这意味着卡不能同时发送和接收。

你需要两张卡才能按照你想要的方式工作。一个专门在监控模式下收集数据包，另一个用于传输数据包。

观看此视频以了解有关碰撞检测/避免的更多信息。[Youtube 视频解释 CSMA/CD/CA](http://www.youtube.com/watch?v=RKkxKG5usaw)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-02-18T02:08:23.993

这就是我所做的。希望能帮助到你

```
 def sendprobereq_bo_null(target):
  for i in range (1,255):
    radiotap              = RadioTap()
    dot11                 = Dot11(type=0,subtype=0100,addr2=target)
    dot11probereq         = Dot11ProbeReq("00"*i)
    fuzz_frame            = radiotap/dot11/dot11probereq
    hexdump(fuzz_frame)
    sendp(fuzz_frame) 
```

# sql - PostgreSQL 组合表

> ID：16050081
> 
> 赞同：2
> 
> 时间：2013-04-17T01:48:54.170
> 
> 标签：sql, postgresql

我对将一张桌子合并到另一张桌子有点困惑。我的两张桌子看起来像这样：

```
Table A                                         Table B
id | name | likes | email | username            id | name | email   | username
1  | joe  |  3    |  null | null                1  | ben  | a@co.co | user

Result: Table A
id | name | likes | email   | username
1  | joe  | 3     | null    | null
2  | ben  | null  | a@co.co | user 
```

我的问题是我不想覆盖表 A 中的属性。这很简单`UNION`吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-17T01:50:49.257

你可以只执行`INSERT INTO..SELECT`语句，

```
INSERT INTO TableA(id, name, likes, email, username)
SELECT id, name, NULL AS likes, email, username
FROM TableB 
```

它的作用是将所有记录复制`TableB`到`TableA`. 但是如果你只想要投影的记录，那么一个简单的`UNION`就可以了

```
SELECT id, name, likes, email, username FROM tableA
UNION
SELECT id, name, NULL AS likes, email, username FROM TableB 
```

# ruby-on-rails - 嵌套形式 - 无法批量分配受保护的属性：

> ID：16050083
> 
> 赞同：0
> 
> 时间：2013-04-17T01:49:14.800
> 
> 标签：ruby-on-rails, nested-forms

我已经阅读了几个线程，到目前为止还没有。我正在尝试将一种形式嵌套在另一种形式中。我收到无法批量分配受保护的属性错误。\

app/controllers/projects_controller.rb:46:in `new' app/controllers/projects_controller.rb:46:in`create'

Projects_controller.rb

```
 def create
  @project = Project.new(params[:project])

respond_to do |format|
  if @project.save
    format.html { redirect_to @project, notice: 'Project was successfully created.' }
    format.json { render json: @project, status: :created, location: @project }
  else
    format.html { render action: "new" }
    format.json { render json: @project.errors, status: :unprocessable_entity }
  end
 end
end 
```

项目.rb

```
 WF::Application.routes.draw do
    resources :line_items

    resources :projects do
      resources :line_items
    end

   devise_for :users
   get 'about' => 'pages#about'
   get 'Production' => 'projects#index'
   root :to => 'pages#home'
end 
```

这是错误...
ProjectsController#create 中的 ActiveModel::MassAssignmentSecurity::Error

无法批量分配受保护的属性：line_item

这是我的项目模型

```
class Project < ActiveRecord::Base
    attr_accessible :quantity
    # may be unnessary
    attr_accessible :line_items_attributes

    belongs_to :user
    has_many :line_items
    accepts_nested_attributes_for :line_items, :allow_destroy => true
end 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-17T01:52:22.113

Rails 试图保护您避免意外分配您无意分配的值。

您可以通过这种方式告诉 Rails 可以分配哪些值：

```
attr_accessible :value1, :value2 
```

如果您将该行添加到`Project` **模型**的顶部（替换`:value1`并`:value2`使用列的实际名称），它应该允许您执行您正在尝试的操作。

有关更多信息，[请参阅文档](http://apidock.com/rails/ActiveRecord/Base/attr_accessible/class)。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-17T02:32:00.893

假设您尝试通过项目模型创建行项目，您需要确保`Project`模型中有以下行：

```
# project.rb
Class Project < ActiveRecord::Base
  attr_accessible :line_items_attributes

  accepts_nested_attributes_for :line_items

  ...
end 
```

# r - 摆脱 R 中的 for 循环

> ID：16050084
> 
> 赞同：0
> 
> 时间：2013-04-17T01:49:16.320
> 
> 标签：r

我想在没有循环的情况下对具有不同概率集的给定向量进行采样。有没有办法做到这一点？

例如，在这段代码中，我想用某种 apply() 结构或任何真正的东西替换循环..

```
a <- c(1,2,3)
p <- matrix(c(.1,.1,.8,.1,.8,.1,.8,.1,.1), nrow=3)
s <- matrix(ncol=5, nrow=3)
for(i in 1:nrow(p)){
s[i,] <- sample(a, size=5, replace=T, prob=p[i,])
} 
```

谢谢您的帮助！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-17T01:56:05.643

`apply`对`p`自身：

```
t(apply(p, 1, sample, x=a, size=5, replace=TRUE))
     [,1] [,2] [,3] [,4] [,5]
[1,]    3    3    1    3    3
[2,]    2    2    1    1    2
[3,]    1    1    1    1    1 
```

**编辑**我`functional::Curry`在这里有一个，直到 flodel 指出它没有必要，因为`apply`通过允许命名参数通过`...`.

# unix - 在 grep 中结合 -v 标志和 -A 标志

> ID：16050085
> 
> 赞同：10
> 
> 时间：2013-04-17T01:49:21.547
> 
> 标签：unix, sed, grep

我需要在文件中搜索字符串，删除包含该字符串的任何行，并删除包含该字符串的任何行之后的两行。我希望我可以用这样的东西来完成这个......

```
$ grep -v -A 2 two temp.txt
one
five
$ 
```

...但不幸的是，这不起作用。有没有一个简单的我可以用 grep 或其他 shell 命令来做到这一点？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-04-17T01:54:02.893

以下适用于 GNU sed 和 OS X。

```
$ sed '/two/{N;N;d;}' temp.txt
one
five 
```

*   查找行匹配`two`
*   再读两行
*   删除它们

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-04-17T01:55:45.323

使用 GNU sed：

```
sed '/two/,+2d' temp.txt 
```

这使用双地址语法 ( `addr1,addr2`) 来匹配包含单词二 ( `/two/`) 的行加上 ( ) 之后的两行`+2`。该`d`命令删除这些行。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2013-04-17T01:56:42.667

您可以使用 执行此操作`awk`，根据以下记录：

```
pax> echo 'one
two
three
four
five' | awk '/two/ {skip=3} skip>0 {skip--;next} {print}'

one
five 
```

`two`每当它在一行上找到字符串时，它基本上都会启动一个行计数器来丢弃（3） 。然后它会丢弃这些行，直到跳过计数器达到零。打印任何未标记为跳过的行。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-04-17T02:59:24.123

这是使用 Perl 的一种方法：

```
$ perl -ne'if (/two/){$x=<>;$x=<>;}else{print}' temp.txt 
one
five 
```

这`-n`是输入的隐式循环。如果匹配`/two/`，则阅读接下来的两行，否则打印您所在的行。

然而，问题是，如果第三或第四行匹配 /two/，那么你仍然会得到相同的输出。@paxdiablo 的解决方案更完整。但我的更多Q&D。

# css - 背景中心问题

> ID：16050087
> 
> 赞同：-2
> 
> 时间：2013-04-17T01:49:45.843
> 
> 标签：css, html, background, center

这是我的网站编码，我已经遇到了问题，请帮助！

这是我的 CSS 样式表：

```
.center {
  position: absolute;
  left: 50%;
}

body
{
  background-color: #45a8e1;
  background-image:url('images/background.png');
  background-repeat:repeat-x;
} 
```

然后是 HTML：

```
<body>

  <div id="header" class="center">
    <img src="images/header.png">
  </div>

</body> 
```

最终结果很好，但页面非常宽。我正在尝试使我的背景图像适合视口（页面）。另外，我想将我的 div 居中，因为页面太宽，这似乎不起作用。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-17T03:25:36.850

试试这个 - [jsFiddle](http://jsfiddle.net/apaul34208/QJWxF/)

```
#header {
    background: url('/*yourImageHere*/') repeat-x center;
    height:200px;
    width:100%;
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-17T01:56:56.920

使用这个 CSS：

```
.center {
   display:inline-block;
   margin: 0 auto;
}

body
{
  width: 100%;
  text-align: center;
  background-color: #45a8e1;
  background:url('images/background.png');
  -webkit-background-size: auto 100%;
  -moz-background-size: auto 100%;
  -o-background-size: auto 100%;
  background-size: auto 100%;
  background-repeat:repeat-x;
} 
```

注意：`background-size`IE8 及以下不支持。

# uilabel - 导航栏标题未调整大小

> ID：16050090
> 
> 赞同：2
> 
> 时间：2013-04-17T01:50:13.013
> 
> 标签：uilabel, uinavigationitem, rightbarbuttonitem

我有我的导航栏标题作为我试图调整字体大小的标签。我将右栏按钮设置为两个按钮的数组。而不是调整标题的大小，只是敲掉一个正确的按钮。

这是我的代码

```
- (void)setTitle:(NSString *)title
{
    [super setTitle:title];
    UILabel *titleView = (UILabel *)self.navigationItem.titleView;
    if (!titleView) {
        titleView = [[UILabel alloc] initWithFrame:CGRectZero];
        titleView.backgroundColor = [UIColor clearColor];
        titleView.font = [UIFont boldSystemFontOfSize:18.0];
        titleView.shadowColor = [UIColor colorWithWhite:0.0 alpha:0.5];

        titleView.textColor = [UIColor greenColor]; // Change to desired color
        [titleView sizeToFit];
        titleView.minimumScaleFactor = .33f;
        CGRect frame = self.navigationItem.titleView.frame;
        frame.origin .x = 10;

        self.navigationItem.titleView = titleView;
        self.navigationItem.titleView.frame = frame;
        self.navigationItem.titleView = titleView;

    }
    titleView.text = title;
    [titleView sizeToFit];
    titleView.adjustsFontSizeToFitWidth = TRUE;
} 
```

如您所见，我已将最大字体大小设置为 18，将最小字体大小设置为 6，即最大大小的 0.33。我也尝试将它与左侧对齐，但没有奏效。以下代码在右侧设置了一个包含两个按钮的数组。

```
buttonimage = [UIImage imageNamed:@"share icon1 Camera.png"];

    UIBarButtonItem *saveButton =[[UIBarButtonItem alloc]
                                  initWithImage:buttonimage
                                  style:UIBarButtonItemStyleBordered
                                  target:self
                                  action:@selector(shareByActivity:)];

    buttonimage2 = [UIImage imageNamed:@"mail icon sm Sound.png"];

    UIBarButtonItem *soundButton =[[UIBarButtonItem alloc]
                                   initWithImage:buttonimage2
                                   style:UIBarButtonItemStyleBordered
                                   target:self
                                   action:@selector(shareByActivity2:)];

    self.navigationItem.rightBarButtonItem = saveButton;

    self.navigationItem.rightBarButtonItems = [NSArray arrayWithObjects:soundButton,saveButton, nil]; 
```

如何让标题调整大小而不覆盖数组的第二个按钮”

我可以设置一个 if 语句，如果标题字符串多于这么多字符，那么字体大小就是什么。

# c - 访问另一台机器上的设备

> ID：16050102
> 
> 赞同：0
> 
> 时间：2013-04-17T01:51:57.697
> 
> 标签：c, linux, windows, serial-port

我希望在 linux 机器上访问连接在 windows 机器上的设备；这些不是虚拟机。windows中的设备可以通过com口访问；它在 COM9 上运行。最好的方法是什么？在 linux 端，我将用 c 编写一个用户空间应用程序，它将控制连接在 windows 机器上的设备。两台机器（linux、windows）通过网络连接。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-17T02:08:52.367

[Windows 机器上的http://www.javiervalcarce.eu/wiki/Access_to_serial_port_from_Internet](http://www.javiervalcarce.eu/wiki/Access_to_serial_port_from_Internet)将 com 端口映射到 tcp 端口。然后它只是linux端的套接字编程。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-17T03:05:03.770

在 Windows、Linux 等上有许多可用的[COM 端口重定向器解决方案。](http://en.wikipedia.org/wiki/COM_port_redirector)

一些支持传输符合[RFC 2217](https://www.rfc-editor.org/rfc/rfc2217)的硬件握手线路（DTR、DCD 等） 。

# html - 如何垂直居中其大小可以在 div 中更改的图像？

> ID：16050106
> 
> 赞同：4
> 
> 时间：2013-04-17T01:52:22.047
> 
> 标签：html, css

当我不知道图像的高度时，如何使用 css 垂直居中图像？图像以及高度将由服务器在运行时提供，它可以是任意数量的高度。知道了这一点，我在一个 div 中创建了一个 div，或多或少遵循此处找到的教程的方法 1：http: [//phrogz.net/css/vertical-align/](http://phrogz.net/css/vertical-align/)。但我相信，这只有在您知道要居中的内容的高度时才有效。那么我到底如何垂直居中：

```
<div class="galleryItem">
    <a href="wherever">
    <img src="whatever" width="173" height="155">
       <div class="galleryTitle">
           <div class="galleryImg">
               <img src="centerMeVertically.jpg">
           </div>
       </div>
    </a>
</div> 
```

这是失败的CSS：

```
 .galleryItem {
    float: left;
    border-style: solid;
    border-width: 1px;
    border-color: #b78e18;
    margin: 7px 4px;
    padding: 5px;
    width: 173px;
    height: 190px;
    position: relative;
}

.galleryTitle {
    height: 33px;
    width: 173px;
    position: relative;
}

.galleryImg {
     width: 173px;
     height: 30px;
     position: absolute;
     top: 50%;
     margin-top: -15px;
 }

.galleryImg > img {
     display: block;
     margin-left: auto;
     margin-right: auto;
 } 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-17T04:48:40.963

表格单元格能够将其内容垂直居中对齐。所以我们需要通过将 div 的 'display' 属性更改为 'table cell' 来将 div 的行为更改为 table-cell。

现在请检查下面的代码，看到相应 div 中的图像垂直对齐到中心。

```
.galleryImg {
   display: table-cell;
   height: 60px;
   vertical-align: middle;
   width: 173px;
} 
```

希望它会帮助你。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-17T12:15:46.917

//jQuery

```
$(function(){
    // vertical align images
    $.fn.vAlign = function() {
        return this.each(function(i){
            var ah = $(this).height();
            var ph = $(this).parent().height();        
            var mh = Math.ceil((ph-ah) / 2); //var mh = (ph - ah) / 2;
            $(this).css('margin-top', mh);
            //console.log(mh);
        });
    };
    $('.galleryItem img').vAlign();
}); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-18T05:43:22.850

这是现场示例，如何将图像居中到任何 div 有一些额外的 CSS 用于美化，但你可以忽略它

> [http://jsfiddle.net/pratswinz/vCBnD/](http://jsfiddle.net/pratswinz/vCBnD/)

```
<div class="span2 cen_eventspan2">
            <figure class="span12 cen_event">
                <img class="img-polaroid-user" src="https://www.dropbox.com/s/j4x8plvaupv0ftp/AC_Feedback-box-buttons_unlcear_b.png" />
            </figure>
        </div> 
```

/ *-----------------css--------------------------------* /

```
.cen_event {
    background-color: #FFFFFF;
    border: 1px solid rgba(0, 0, 0, 0.2);
    box-shadow: 0 1px 3px rgba(0, 0, 0, 0.1);
    height: 172px;
    line-height: 159px;
    padding: 4px;
    text-align: center;
    width: 182px;
}
.cen_event .img-polaroid-user {
    max-height: 160px;
    max-width: 172px;
    vertical-align: middle;
    border:1px solid #f00;

} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-04-17T02:55:21.680

我会首先计算容器和图像之间的高度差是多少，然后将其一分为二并使其顶部边缘

requiredMargin=(容器高度-图像高度)/2

您可以通过 JS 来执行此操作，或者服务器端可以更好地处理人们出于任何原因关闭 JS 的情况。

```
.galleryImg img {margin-top:<requiredMargin>px;} 
```

这是一种可靠的方法。

**或者，CSS3 方式**

如果你只想使用 CSS 并且只支持最新的浏览器，那么你可以考虑使用 Flexbox：

```
<div class="imageContainer">
    <img src="http://placehold.it/350x100">
</div>

<style>
.imageContainer {
   height:300px;
   display: -webkit-box;
    -webkit-box-align: center;
   display: -moz-box;
   -moz-box-align: center;
   display: -ms-flexbox;
   -ms-box-align: center; 
   display: box;
   box-align: center; 
}
</style> 
```

[http://jsfiddle.net/gp5Ry/1/](http://jsfiddle.net/gp5Ry/1/)

要同时支持旧版浏览器，您可以考虑使用[Flexie](http://flexiejs.com/)。虽然我自己没有使用过，但它似乎是一个不错的选择。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-04-17T03:23:08.367

在 div 上使用表格显示属性。它不漂亮，但它有效。

[http://jsfiddle.net/staircasebug/dv9RS/](http://jsfiddle.net/staircasebug/dv9RS/)

```
.galleryTitle {
display: table;
width: 100%;
height: 300px;
background: #eee;
}

.galleryImg {
display: table-cell;
vertical-align: middle;
}

img {
margin: 0 auto;
display: block;
} 
```

* * *

## 回答 #6

> 赞同：-3
> 
> 时间：2013-04-17T02:36:53.320

在css中添加以下内容；

垂直对齐：中央；或垂直对齐：中间；

# python - 连接到插槽时如何向 Qt PySide 内置信号添加参数

> ID：16050108
> 
> 赞同：1
> 
> 时间：2013-04-17T01:52:31.090
> 
> 标签：python, qt, pyside, qlineedit

这是我试图实现一个简单的表达式求值器的类：

```
class mainWindow(QtGui.QMainWindow, mainGui.Ui_MainWindow):

    def __init__(*args, **kwargs)
        super(mainWindow, self).__init__(*args, **kwargs)
        self.setupUi(self)
        self.connecting_range_displays()

    def connecting_range_displays(self):    
        ranges = num_ranges()
        first_range = num_ranges.ones_range
        second_range = num_ranges.tens_range

        print first_range
        print second_range

        self.top_lineEdit.setText(str(first_range))
        self.bottom_lineEdit.setText(str(second_range))

        ex_a = first_range + second_range
        print "this is expressions answer", ex_a

        self.answer_lineEdit.returnPressed.connect(self.ex_evaluator)

    def ex_evaluator(self, right_answer):
        answer = self.answer_lineEdit.text()

        if ex_a == right_answer:
            print "Correct answer bucko" 
```

在上面的一个简单算术练习应用程序的代码中，我使用两行来显示一定范围内的随机数，第三行，`QlineEdit`即`answer_lineEdit`我用它来获取用户输入，然后检查它是否正确我使用`Signal` `returnPressed`并将它连接到`ex_evaluator`which然后会告诉您是否给出了正确的响应，问题似乎是我无法将`ex_a`参数传递给函数以对其进行评估，可能是命名空间问题，我是编码和哲学方面的新手是只学最少的东西才能让我到达我想要的地方，所以我想知道我是否必须学习如何对`QLineEdit`我不知道该怎么做的子类化，我看到装饰器可能会有所帮助，这是另一桶我不想陷入的麻烦。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-04-17T17:45:22.430

您需要执行以下操作之一：

*   通过将 ex_a 更改为“self.ex_a”来使 ex_a 成为类属性。然后它可以在课堂内的任何地方使用
*   使用 lambda 或 functools.partial 将其传递给插槽（ex_evaluator）

对于第二个选项，我写了一个教程，描述了这样做的两种方法：http: [//www.blog.pythonlibrary.org/2013/04/10/pyside-connecting-multiple-widgets-to-the-same-slot /](http://www.blog.pythonlibrary.org/2013/04/10/pyside-connecting-multiple-widgets-to-the-same-slot/)

要使用 lambda，请执行以下操作：

```
self.answer_lineEdit.returnPressed.connect(lambda ans=ex_a: self.ex_evaluator(ans)) 
```

对于 functools.partial，它会是这样的：

```
import functools
callback = partial(self.ex_evaluator, ex_a)
self.answer_lineEdit.returnPressed.connect(callback) 
```

如果您不理解最后一个，您可能需要查看[文档](http://docs.python.org/2/library/functools.html#functools.partial)。

# excel - 仅对两列中的匹配值求和

> ID：16050109
> 
> 赞同：1
> 
> 时间：2013-04-17T01:52:32.367
> 
> 标签：excel, indexing, match, sumifs

![在此处输入图像描述](https://i.stack.imgur.com/KX1b7.png)

大家好，

如果 A 列的数字与 E 列匹配并按月求和，有谁知道如何从 B 列（小时）求和。

例如，以 2 月的数据为例，因为 A 列和 E 列中只存在 3000 和 4000，这就是为什么我需要将 B 列的小时数 (20+10=30) 与下面的月份相加。

我还附上了下面的示例 excel 表。 [https://www.dropbox.com/s/0s51g1i8g6s6e2d/Test.xls?m](https://www.dropbox.com/s/0s51g1i8g6s6e2d/Test.xls?m)

提前致谢。:-)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-17T02:11:06.300

将此公式放入单元格 D2 并向下拖动：

`=IF(NOT(ISERROR(MATCH(A2,$E$2:$E$20,FALSE))),B2,"")`

在第 22 行中，将月份名称更改为全名，**或者**在 C 列中，将月份名称更改为三个字母的缩写名称，这样我们就可以使用该`SumIf`功能。

然后，在单元格 B23 中，输入此公式并将其拖过：

`=SUMIF($C$2:$C$16,B22,$D$2:$D$16)`

（我将公式放在第 24 行以检查您在第 23 行中已有的数据）

![SumIf 函数结果截图](https://i.stack.imgur.com/6SuNE.jpg)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-17T02:15:45.017

您可能会因客户功能而变得复杂，但如果有一个额外的列（可能隐藏）并不重要，那么这将起作用：

在单元格 D2 中输入：

```
=iferror(vlookup($A2,$E$2:$E$20,1,FALSE),"x") 
```

向下拖动公式。

然后，您可以在每个月下放置：

```
=sumifs($B$2:$B$16,$C$2:$C$16,B$22,$D$2:$D$16,"<>x") 
```

将公式拖过

这假设您可以将 C 列或第 22 行中的月份格式更改为相同，即。一月，二月，三月或一月，二月，三月等。

即时编写，未经测试，请原谅任何小错误...

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-17T04:51:32.273

到目前为止发布的两个答案都很好，但作为替代方案，这就是我要做的。将此公式放入单元格 D2 并将其向下拖动：

```
=IF(NOT(ISNA(VLOOKUP(A2, $E$2:$E$20, 1, FALSE))), B2, "") 
```

然后，如果您创建一个包含月份名称的列，例如从 G2 到 G7，您有二月、三月、...、七月，您可以将此公式放入 H2 并向下拖动：

```
=SUMIFS($D$2:$D$16, $C$2:$C$16, G2) 
```

那应该得到你想要的。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-04-17T07:33:53.593

如果没有辅助列，应该不会更难。只需确保您在第 22 行中有完整的月份名称以匹配 C 列数据，然后在 B23 中使用此公式复制

`=SUMPRODUCT(SUMIFS($B2:$B16,$C2:$C16,B22,$A2:$A16,$E2:$E20))`

# git - 克隆了一个公共回购，推回。权限被拒绝（公钥）

> ID：16050110
> 
> 赞同：2
> 
> 时间：2013-04-17T01:52:48.723
> 
> 标签：git, github, repository

刚刚克隆了一个`public`属于`company`我所在的 github 上的仓库`admin`。做了一些更改并将其推回。

首先，它问我这`username / password`对，我输入了我自己的用户名和密码，它告诉我：

```
Username for 'github.com': 
Password for 'github.com': 
error: The requested URL returned error: 403 while accessing https://github.com/KablamoAU/SenchaXCodeBuild.git/info/refs
fatal: HTTP request failed 
```

我通过添加`ssh`到 URL解决了它

比它让我烦恼的是：

```
Permission denied (publickey).
fatal: The remote end hung up unexpectedly 
```

但是，我可以提交`private`该组织中的所有存储库，也可以创建其他存储库。

所以我的问题是：

1.  为什么 github 不允许我提交`master`克隆的 repo，但这是一个微不足道的问题
2.  我应该向组织添加密钥以推送到`public`回购吗？或者你会提供什么解决方案

PS。从来没有想过这么简单的问题可能需要这么长时间才能解决。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-17T02:12:46.760

首先确保您已 将此文件中的[密钥添加](http://help.github.com/articles/generating-ssh-keys) 到 GitHub

```
~/.ssh/id_rsa.pub 
```

然后确保您使用与此类似的 URL 进行克隆

```
git clone git@github.com:antirez/redis.git 
```

如果您还没有联系他们，另一种选择是直接联系他们。我已经给他们发了几次电子邮件，体验很愉快。

```
support@github.com 
```

也许这个页面可以帮助

[错误：权限被拒绝（公钥）](http://help.github.com/articles/error-permission-denied-publickey)

# php - 有没有办法找出方法是否是静态的？

> ID：16050114
> 
> 赞同：0
> 
> 时间：2013-04-17T01:53:18.403
> 
> 标签：php, static-methods

有没有办法找出方法是否是静态的？

我需要知道的原因：我在任何实例化上下文之外调用静态方法。那时不能调用非静态方法，因为它们还没有意义。一旦这些类的实例存在，我想稍后再调用它们。

当我调用`call_user_function_array($className.'::'.$functionName, $args);`并且该方法是非静态的时，php 似乎会自动创建一个 className 实例并调用该函数。我希望对非静态函数调用 FAIL。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-17T01:58:34.110

> 当我调用`call_user_function_array($className.'::'.$functionName, $args);` 并且该方法是非静态的时，php 似乎会自动创建一个 className 实例并调用该函数。

不，它没有。PHP 并不是*那么*自动化。不知道你在那里做什么。

要静态调用方法，您可以这样做：

```
call_user_func_array("$className::$functionName", $args); 
```

要调用对象的方法，*首先*需要显式实例化一个对象，然后像这样调用它：

```
$obj = new MyClass;
call_user_func_array(array($obj, $method), $args); 
```

要以编程方式确定方法是否为静态方法，请使用[`ReflectionClass`](http://www.php.net/ReflectionClass)：

```
$r = new ReflectionClass($myClass);
$m = $r->getMethod($method);
var_dump($m->isStatic()); 
```

不过，在调用它之前，您应该真正*知道*什么是方法，而不是动态地试图弄清楚它。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-17T01:59:38.443

您可以使用反射检查方法。

```
class foo
    {
    static public function bar()
        {}

    public function baz()
        {}
    }

$reflection_class = new ReflectionClass('foo');

var_dump($reflection_class->getMethod('bar')->isStatic()); // boolean true
var_dump($reflection_class->getMethod('baz')->isStatic()); // boolean false 
```

PS 你试图调用方法但你不知道它们到底是什么，这很奇怪。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-17T03:12:07.970

由于反射很昂贵，我实际上最终调用`set_error_handler`了一个抛出 ErrorException 的回调，如此处所述[，](https://stackoverflow.com/questions/1241728/can-i-try-catch-a-warning)以在对非静态方法进行静态调用时捕获警告。

# jquery - 关闭时 JQuery 对话框“数据”错误

> ID：16050116
> 
> 赞同：0
> 
> 时间：2013-04-17T01:53:47.500
> 
> 标签：jquery, jquery-dialog

我正在使用 jQuery 对话框，当我用角 X 关闭对话框时，在 IE8 中我收到以下 JavaScript 错误 -

```
Microsoft JScript runtime error: 'data(...)' is null or not an object 
```

在这行代码的 jquery-ui-1.10.2.custom.js 中发生错误 -

```
function(s){e._allowInteraction(s)||(s.preventDefault(),t(".ui-dialog:visible:last .ui-dialog-content").data(i)._focusTabbable())} 
```

我的对话框定义如下 -

```
$("#myForm").dialog({
    autoOpen: false,
    height: 600,
    width: 800,
    modal: true,
    open: function (event, ui) {
        $(this).parent().css('top', '55px');
    },
    beforeClose: function (event, ui) {
         //code here - commented out still get error
         return true;
    },
    close:function (event, ui) {
         //code here - commented out still get error
         return true;
    }
}); 
```

Chrome 和 FireFox 工作正常。知道什么可能导致此错误吗？非常感谢！

# java - Android - 无法以编程方式删除 Wifi 网络 - WifiManager 类型中的方法 removeNetwork(int) 不适用于参数（字符串）

> ID：16050122
> 
> 赞同：9
> 
> 时间：2013-04-17T01:54:12.680
> 
> 标签：java, android, timer, wifi

我正在尝试以编程方式删除我的 wifi 网络 - 但是我似乎无法让它删除/忘记当前连接的 wifi 连接。这应该是一个非常简单的任务 - 所以我不确定我到底做错了什么。

我以下面的 StackOverflow 帖子为例：

[如何以编程方式忘记android中的无线网络？](https://stackoverflow.com/questions/11134383/how-to-forget-a-wireless-network-in-android-programmatically)

```
 public class KillTimer extends Activity {

     @Override
   public void onCreate(Bundle savedInstanceState) {
       super.onCreate(savedInstanceState);
       setContentView(R.layout.killtimer);
       WifiManager wifiManager = (WifiManager) getApplicationContext().getSystemService(Context.WIFI_SERVICE);
       wifiManager.getConnectionInfo().getSSID()
       wifiManager.getConnectionInfo().getNetoworkId();
       wifiManager.removeNetwork(wifiConfig.networkId);
       wifiManager.saveConfiguration();

   }} 
```

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2013-04-17T06:41:40.003

`removeNetwork()`只接受整数参数。是`networkSSID`一个字符串值。这就是错误的原因。我看到您使用的是字符串 SSID。您必须提供整数的网络 ID。您可以尝试`getConnectionInfo().getSSID()`与您的 ssid 进行比较，如果它们相同，那么您可以尝试获取`getConnectionInfo().getNetoworkId()`哪个应该给出连接网络的网络 ID，您可以使用它来删除网络。

尝试这个：

```
public class KillTimer extends Activity {
       @Override
       public void onCreate(Bundle savedInstanceState) {
           super.onCreate(savedInstanceState);
           setContentView(R.layout.killtimer);
           WifiManager wifiManager = (WifiManager) getApplicationContext().getSystemService(Context.WIFI_SERVICE);
           int networkId = wifiManager.getConnectionInfo().getNetworkId();
           wifiManager.removeNetwork(networkId);
           wifiManager.saveConfiguration();
       }} 
```

**截至 2019 年 6 月 10 日的最新更新**

Android 6.0 及以后的 Wifi Manager 有一些变化。

**如果 WIFI_DEVICE_OWNER_CONFIGS_LOCKDOWN 不为零，则用户无法再修改或删除活动设备所有者创建的任何 Wi-Fi 配置。**

活动设备所有者有权编辑或删除任何 Wi-Fi 配置，包括那些不是由他们创建的配置。

更多详情请参考：[https ://developer.android.com/about/versions/marshmallow/android-6.0-changes.html](https://developer.android.com/about/versions/marshmallow/android-6.0-changes.html)

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2015-10-19T17:00:56.750

```
private void RemoveWifiNetworks() {

    WifiManager wifiManager = (WifiManager) getApplicationContext().getSystemService(Context.WIFI_SERVICE);

    List<WifiConfiguration> list = wifiManager.getConfiguredNetworks();
    for (WifiConfiguration i : list) {
        //int networkId = wifiManager.getConnectionInfo().getNetworkId();
        wifiManager.removeNetwork(i.networkId);
        wifiManager.saveConfiguration();
    }

} 
```

# java - 从 System.in 获取 unicode 值

> ID：16050123
> 
> 赞同：5
> 
> 时间：2013-04-17T01:54:13.883
> 
> 标签：java, java.util.scanner

我创建了一个`Scanner`从中获取输入的，`System.in`以便我可以从控制台获取输入。

```
Scanner scanner = new Scanner(System.in, "UTF-8"); 
```

当我做

```
String s = scanner.next(); 
```

然后`Слово דבר`在控制台输入，字符串的值变成`???? ???`.

控制台能够显示 Unicode 字符，但为什么我不能读取它们？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-17T01:59:36.413

`System.in`假设是 UTF-8 编码是不安全的。有关一些解决方法，请参阅[此问题](https://stackoverflow.com/questions/8616915/java-console-charset-translation)。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-17T04:45:28.603

这是因为 System.in 以默认编码返回文本（您的默认编码显然不是 UTF-8）。这应该可以

```
Scanner sc = new Scanner(System.in);
String s = sc.next();
System.out.println(s); 
```

您可以从 Java 中读取默认编码

```
System.out.println(System.getProperty("file.encoding")); 
```

# modx - Modx Evo：升级到 1.0.9 后无法添加新用户

> ID：16050124
> 
> 赞同：0
> 
> 时间：2013-04-17T01:54:26.113
> 
> 标签：modx, modx-evolution

我刚刚将站点从 1.0.6 升级到 1.0.9，现在无法添加新用户。我在后端完成了这个过程，一切似乎都很好，但它们没有出现在 Manager Users 下的用户列表中。

但是，检查数据库时，它们确实出现在 modx_manager_users 表中，而不是 modx_active_users 表中。

有人知道我能做些什么来解决这个问题吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-17T23:29:36.233

原来这是 1.0.9 的常见问题，可以通过安装 1.0.10 来修复

[http://forums.modx.com/thread/83325/modx-1-0-10-rc-need-testers](http://forums.modx.com/thread/83325/modx-1-0-10-rc-need-testers)

# java - 如何创建包含所有 256 个 ASCII 字符的示例文本文件

> ID：16050126
> 
> 赞同：-2
> 
> 时间：2013-04-17T01:54:36.540
> 
> 标签：java, ascii, huffman-code

我正在为 Huffman Coding 编写程序。我需要输入 10 个文件，每个文件包含 500-1000 个字符，至少 1 次包含所有 256 个 ASCII 字符。我要怎么做？互联网上是否有包含所有 256 个 ASCII 字符的示例文件？请帮忙！

更新：我可以输入 255 个 ascii 字符。但由于某种原因，我似乎无法输入 NULL。它只是没有显示在文件中。所有其他字符显示，例如删除由五边形表示。我试过 Alt+0。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-17T02:10:25.580

我不是java程序员（我一点java都不懂），我是ac程序员。但是，你想要做的很简单。我找到了一个你应该检查的例子。

[http://www.java2s.com/Code/Java/File-Input-Output/Writesomedatainbinary.htm](http://www.java2s.com/Code/Java/File-Input-Output/Writesomedatainbinary.htm)

您需要修改代码以便写入字节而不是整数。你应该循环执行。如果需要随机，请按照 dasblinkenlight 的建议进行操作。我写的以下片段替换了我给你的链接中的片段。

```
import java.io.DataOutputStream;
import java.io.FileOutputStream;
import java.io.IOException;

public class WriteBinary {
  public static void main(String[] argv) throws IOException {

    String FILENAME = "binary.dat";
    DataOutputStream os = new DataOutputStream(new FileOutputStream(
        FILENAME));

    for( int i = 0; i < 256; i++ ) os.writeByte( (byte) i );

    os.close();
  }
} 
```

您还应该注意，并非所有 ascii 值都是可打印字符。因此，当您查看文件时，您将无法计算 256 个字符。但是，您应该能够看到整个字母表和 0 - 9。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-17T02:01:43.140

您可以自己生成这些文件——一个相对简单的算法就足够了：

*   依次遍历`c`从 0 到 255 的数字
*   对于每个数字`c`，生成一个`n`1 到 4 范围内的随机数，包括 1 到 4
*   `n`将的值添加`c`到列表中
*   如果列表中的项目数少于 500（这不太可能），您可以设置`c`回`0`，并继续使用相同的算法，直到超过 500 个计数。
*   将[随机洗牌](http://docs.oracle.com/javase/6/docs/api/java/util/Collections.html#shuffle%28java.util.List%29)算法应用于列表
*   将结果写入文件。

# ruby - 访问 ruby 数组中的元素

> ID：16050130
> 
> 赞同：1
> 
> 时间：2013-04-17T01:55:00.073
> 
> 标签：ruby, arrays

我一直在研究[learnstreet](http://www.learnstreet.com/cg/simple/project/piglatin-ruby)上的项目，但我有点注意到它们访问数组中元素的方式有些有趣，并希望得到一些澄清。要访问数组中的第一个元素，我知道我可以做类似的事情

```
a = [2,4,5,6,7]
a[0] 
output=> 2 
```

然而，在 learnstreet 网站上，他们通过执行类似的操作来访问第一个元素

```
a = [2,4,5,6,7]
a[0,1]
output => 2 
```

我的猜测可能是他们使用的是旧版本的 ruby​​，需要你这样做。如果我错了，请纠正我，我只是好奇为什么会这样。

实际上，为了验证这一点，我更进一步并尝试了它，[但](http://pryrepl.org/)我注意到使用他们的方法只返回数组的第一个元素。

![在此处输入图像描述](https://i.stack.imgur.com/iSSUB.png)

我的 ruby​​ 版本是 => ruby​​ 1.9.3p327（2012-11-10 修订版 37606）[x86_64-darwin12.2.0]

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-04-17T01:58:08.713

这只是获取第一个索引的另一种方式：

`a[0, 1]`

从 0 索引开始，抓取长度为 1 的切片。这对于抓取数组的“块”或“切片”很有用。通常，当只涉及数组的某个项目时，使用单索引版本会更清楚。即`a[0]`.

有关更多说明，请参见[此处](http://ruby-doc.org/core-2.0/Array.html#method-i-5B-5D)。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-17T10:59:23.257

抓取n个索引值的最佳方法

一个[0..1]

它将返回 0 索引到索引 1 例如：- a = [2,4,5,6,7]

```
 a[0..1]

output => [2,4] 
```

它将整洁干净，但它将返回数组中的值而不是字符串。

# php - 实现 Sketchfab API

> ID：16050132
> 
> 赞同：0
> 
> 时间：2013-04-17T01:55:17.087
> 
> 标签：php, curl

我正在尝试在我的网站中实现sketchfab api。我从他们的网站获得了代码和访问令牌，我实现了一切，但是当我执行代码时，我得到一个空白屏幕。问题是什么？

第一个问题是 curl，我通过转到 php.ini 文件来启用它，但随后出现了这个空白屏幕问题。

```
<?php

$url = "https://api.sketchfab.com/v1/models";

$path = "./";
$filename = "m.3DS";
$description = "Test of the api with a simple model";
$token_api = "THE ACCESS TOKEN";
$title = "Uber Glasses";
$tags = "test collada glasses";
$private = 1;
$password = "Tr0b4dor&3";

$data = array(
    "title" => $title,
    "description" => $description,
    "fileModel" => "@".$path.$filename,
    "filenameModel" => $filename,
    "tags" => $tags,
    "token" => $token_api,
    "private" => $private,
    "password" => $password
);

$ch = curl_init();
curl_setopt_array($ch, array(
    CURLOPT_RETURNTRANSFER => 1,
    CURLOPT_URL => $url,
    CURLOPT_POST => 1,
    CURLOPT_POSTFIELDS => $data
));

$response = curl_exec($ch);

curl_close($ch);

echo $response;  // I am trying to echo the response here

?> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-19T13:58:58.900

对上传 api 的调用将返回一个包含模型 id 的 json。您可以使用此 id 生成一个 url 并再次调用 oEmbed api。伪代码示例：

```
// your curl setup
$response = curl_exec($ch);

// Response
{success: true, {result: {id: 'xxxxxx'} } when upload OK
{success: false, error: 'error message'} when upload error

$id = $response['result']['id'];
$call= "https://sketchfab.com/oembed?url=https://sketchfab.com/show/" . $id;
// do another curl call with $call content
// it will return a response like below but with your model information
// Response
{
    provider_url: "http://sketchfab.com",
    provider_name: "Sketchfab",
    thumbnail_url: "https://sketchfab.com/urls/dGUrytaktlDeNudCEGKk31oTJY/thumbnail_448.png?v=24a1cb0590851ccfeeae01a2ca1eece1",
    thumbnail_width: "448",
    thumbnail_height: "280",
    author_name: "Klaas Nienhuis",
    author_url: "https://sketchfab.com/klaasnienhuis",
    title: "Maison d'artiste",
    html: "<iframe frameborder="0" width="640" height="320" webkitallowfullscreen="true" mozallowfullscreen="true" src="http://sketchfab.com/embed/dGUrytaktlDeNudCEGKk31oTJY?autostart=0&amp;transparent=0&amp;autospin=0&amp;controls=1&amp;watermark=0"></iframe>",
    width: 640,
    height: 320,
    version: "1.0",
    type: "rich"
} 
```

如果您对此有疑问，请尝试在命令行中打印调用结果。

# html - 对齐文本框和按钮，引导程序

> ID：16050133
> 
> 赞同：14
> 
> 时间：2013-04-17T01:55:30.240
> 
> 标签：html, css, twitter-bootstrap

引导样式的文本字段和输入按钮多次出现以下问题。请注意，它们不是垂直对齐的：

![在此处输入图像描述](https://i.stack.imgur.com/h6nvi.png)

如何对齐这两个元素？这是HTML：

```
<div class="span6">
    <input type="text" placeholder="email"> <button type="button" class="btn btn-info">Sign up</button>
</div> 
```

* * *

## 回答 #1

> 赞同：29
> 
> 时间：2013-04-17T02:02:50.890

为了完成它，您必须[为表单使用正确的 Twitter Bootstrap 类](http://twitter.github.io/bootstrap/base-css.html#forms)。

在这种情况下，这就是`.form-inline`类。

这是正确的标记：

```
<form class="form-inline">
  <input type="text" class="input-small" placeholder="Email"/>
  <button type="submit" class="btn">Sign in</button>
</form> 
```

这是演示[http://jsfiddle.net/YpXvT/42/](http://jsfiddle.net/YpXvT/42/)

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-04-17T02:02:53.013

```
<div class="navbar-form pull-left">
  <input type="text" class="span2">
  <button class="btn">Sign up</button>
</div> 
```

[从http://twitter.github.io/bootstrap/components.html#navbar](http://twitter.github.io/bootstrap/components.html#navbar)复制

或者

```
<div class="input-append">
    <input type="text"/>
    <button class="btn">Sign up</button>
</div> 
```

或者

```
<div class="form-horizontal">
    <input type="text"/>
    <button class="btn">Sign up</button>
</div> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2017-05-30T09:58:31.530

```
<div class="input-group">
        <input type="email" class="form-control" required="required" placeholder="monEmail@domaine.fr">
        <span class="input-group-btn">
            <button class="btn btn-default" type="submit"><i class="fa fa-send"></i></button>
        </span>
    </div> 
```

在 boostrap-min 中更改类 input-group-btn 的 css：vertical-align =>top 它对我有用

# python - Python 3d 绘图

> ID：16050136
> 
> 赞同：-4
> 
> 时间：2013-04-17T01:56:00.180
> 
> 标签：python, matplotlib

如何在 python 中进行 3D 绘图？

我正在尝试绘制轨道轨迹。 [绘制轨道轨迹](https://stackoverflow.com/questions/16049390/plotting-orbital-trajectories-in-python/16049681?noredirect=1#16049681)

从上面的链接，我能够获得有关设置功能的帮助。但是我不知道如何在 3D 中绘图。

运行时，它不会生成正确的轨迹。

切换`np.linspace`导致`np.arnage`内存错误，我在运行带有 16 GB 内存的 Xubuntu 的 64 位系统上运行它。

所以我尝试转换距离单位和时间单位，但有些地方不正确。也许我的数学或其他东西。

我让`149.6 * 10 ** 6 = 1 DU`。TU 是`mu = DU ** 3 / TU ** 2`这样定义的，`1TU = 2241.15`并且`DU/TU = 66751.4` 使用这些转换，我有：我也尝试使用`x2,y2,z2`来查看是否可行。

```
import numpy as np
from scipy.integrate import odeint
import matplotlib.pyplot as plt
from numpy import linspace
from mpl_toolkits.mplot3d import Axes3D

mu = 1
# r0 = [-149.6 * 10 ** 6, 0.0, 0.0]  #  Initial position
# v0 = [29.9652, -5.04769, 0.0]      #  Initial velocity
u0 = [-1, 0.0, 0.0, 0.000448907, -0.0000756192, 0.0]

def deriv(u, dt):
    n = -mu / np.sqrt(u[0] ** 2 + u[1] ** 2 + u[2] ** 2)
    return [u[3],     #  dotu[0] = u[3]'
            u[4],     #  dotu[1] = u[4]'
            u[5],     #  dotu[2] = u[5]'
            u[0] * n,       #  dotu[3] = u[0] * n
            u[1] * n,       #  dotu[4] = u[1] * n
            u[2] * n]       #  dotu[5] = u[2] * n

dt = np.arange(0.0, 20, .0001)   #  Time to run code in seconds'
u = odeint(deriv, u0, dt)
x, y, z, x2, y2, z2 = u.T

fig = plt.figure()
ax = fig.add_subplot(111, projection='3d')
ax.plot(x2, y2, z2)
plt.show() 
```

但这个情节也不正确。它应该是一个保持在同一轨迹上的椭圆。

![在此处输入图像描述](https://i.stack.imgur.com/6ka0Z.png)

```
#!/usr/bin/env python
#  This program solves the 3 Body Problem numerically and plots the
#  trajectories

import numpy as np
from scipy.integrate import odeint
import matplotlib.pyplot as plt
from numpy import linspace
from mpl_toolkits.mplot3d import Axes3D

mu = 132712000000.0
# r0 = [-149.6 * 10 ** 6, 0.0, 0.0]  #  Initial position
# v0 = [29.9652, -5.04769, 0.0]      #  Initial velocity
u0 = [-149.6 * 10 ** 6, 0.0, 0.0, 29.9652, -5.04769, 0.0]

def deriv(u, dt):
    n = -mu / np.sqrt(u[0] ** 2 + u[1] ** 2 + u[2] ** 2)
    return [u[3],     #  dotu[0] = u[3]'
            u[4],     #  dotu[1] = u[4]'
            u[5],     #  dotu[2] = u[5]'
            u[0] * n,       #  dotu[3] = u[0] * n
            u[1] * n,       #  dotu[4] = u[1] * n
            u[2] * n]       #  dotu[5] = u[2] * n

dt = np.linspace(0.0, 86400 * 700, 5000)  #  Time to run code in seconds'
u = odeint(deriv, u0, dt)
x, y, z, x2, y2, z2 = u.T

fig = plt.figure()
ax = fig.add_subplot(111, projection='3d')
ax.plot(x, y, z)
plt.show() 
```

![在此处输入图像描述](https://i.stack.imgur.com/kwZd5.png)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-17T02:29:18.437

您可以从 @sashkello 的那个页面中取出前几行，然后插入您从 ode 求解器获得的`x`,`y`和。`z`

[从http://matplotlib.org/mpl_toolkits/mplot3d/tutorial.html](http://matplotlib.org/mpl_toolkits/mplot3d/tutorial.html)复制：

```
import matplotlib.pyplot as plt
from mpl_toolkits.mplot3d import Axes3D

#<<solve for x, y, z here>>#

fig = plt.figure()
ax = fig.add_subplot(111, projection='3d')
ax.plot(x, y, z)
plt.show() 
```

# php - 用于检查文件是否已上传的 php bool 语句无法正常工作

> ID：16050142
> 
> 赞同：0
> 
> 时间：2013-04-17T01:56:23.870
> 
> 标签：php, file-upload, forms

我有一个简单的 php 页面，您可以在其中添加联系人，并且可以选择给他们一张图片。如果没有上传图片，则联系人将获得服务器上已有的默认图片。

问题是我用来检查用户是否上传文件的布尔测试总是返回为真，即使用户没有上传文件

这是我的 html 表单中的代码

```
<tr>
    <td align="right">Contacts Photo</td>
    <td><label>
      <input type="file" name="fileField" id="fileField" />
    </label></td>
  </tr> 
```

这是我用来查看文件是否已上传的 php

```
$haspicture = false;

if (empty($_FILES['fileField'])){
    $haspicture = false;
}

if (!empty($_FILES['fileField'])){
    $haspicture = true; 
} 
```

如果有人能告诉我做错了什么，将不胜感激

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-17T02:10:03.893

数组中的元素`$_FILES`始终是数组本身。这是因为表单元素始终与表单一起提交，即使它不包含任何内容。换句话说，它们永远不会“空”。试着`var_dump($_FILES)`看看你得到了什么。

你应该像这样检查：

```
if (isset($_FILES['fileField']['error']) && $_FILES['fileField']['error'] === UPLOAD_ERR_OK) 
```

请参阅[http://www.php.net/manual/en/features.file-upload.errors.php](http://www.php.net/manual/en/features.file-upload.errors.php)。

# android - 无法以编程方式在 Jellybean 平板电脑上创建工作 Wi-Fi 接入点

> ID：16050143
> 
> 赞同：1
> 
> 时间：2013-04-17T01:56:24.257
> 
> 标签：android, android-wifi

我正在尝试以编程方式在 Android 平板电脑设备（Nexus 10 - 4.2.2）上创建一个 Wi-Fi 接入点并从 PC 连接到它但没有成功。在发布大量代码并浪费人们时间之前，我想检查一下我是否走在正确的轨道上。平板电脑没有 3G 或 4G 功能，因此通常不需要接入点（也称为热点）。

我知道已发布的 Android API 不提供此功能。我使用的一般技术在此处描述 [http://www.whitebyte.info/android/android-wifi-hotspot-manager-class](http://www.whitebyte.info/android/android-wifi-hotspot-manager-class) 它使用反射来访问 WiFiManager 方法

```
设置WifiApConfiguration
```

和

```
设置WifiApEnabled
```

. 我也知道该方法自 4.0 版以来已更改，如此处所述 [如何在 Android 3.x 或 4.x 上以编程方式配置静态 IP 地址、网络掩码、网关](https://stackoverflow.com/questions/10278461/how-to-configue-static-ip-netmask-gateway-programmatically-on-android-3-x-or-4)

使用这些方法，我能够创建一个接入点，并从 PC 连接到它，但我尝试在接入点上设置一个 IP 地址，然后实际建立从 PC 到平板电脑没有成功。我在这里和其他地方阅读了许多问题和答案，但到目前为止还没有运气。

有没有人试过这个或类似的东西？

通常如何看待使用这些未记录的方法？

有没有人记录了“无证”的 WifiManger 方法？

谢谢史蒂夫

# javascript - 计算时出现 Javascript 错误

> ID：16050145
> 
> 赞同：1
> 
> 时间：2013-04-17T01:56:41.057
> 
> 标签：javascript, html, forms

我有一个 php 简单的程序来计算一个文本框和另一个文本框，1 年前，现在没有问题，我的 JavaScript 有问题。它无法计算我的文本框。

我的表单代码在这里（没有 html 标签，以最小化这里的代码）：

```
<table>
<tr>
    <td>Tol</td>
    <td>:</td>
    <td><input type="text" maxlength="11" name="tol" onkeydown="calculate()" value="0" /></td>
</tr>
<tr>
    <td>Parkir</td>
    <td>:</td>
    <td><input type="text" maxlength="11" name="parkir" onkeydown="calculate()" value="0" /></td>
</tr>
<tr>
    <td>Joki</td>
    <td>:</td>
    <td><input type="number" maxlength="11" name="joki" onkeydown="calculate();" value="0" /></td>
</tr>
<tr>
    <td>Other</td>
    <td>:</td>
    <td><input type="number" name="other" maxlength="11" onkeydown="calculate();" value="0" /> <input type="text" name="othername" maxlength="50" /> </td>
</tr>
<tr>
    <td>Total</td>
    <td>:</td>
    <td><input type="text" id="subtotal" onfocus="this.value = numberFormat(this.value);" name="subtotal" maxlength="100" value="0" />
        <input type="text" id="totalbox" name="totalbox" maxlength="100" />
    </td>
</tr>
    </table> 
```

和我的 JS 脚本：

```
function calculate(){
var num1=document.myform.tol.value;
var num2=document.myform.parkir.value;
var num3=document.myform.joki.value;
var num4=document.myform.other.value;

var sum=parseFloat(num1)+parseFloat(num2)+parseFloat(num3)+parseFloat(num4);
document.getElementById('totalbox').value=sum.toString();
document.getElementById('subtotal').value=sum.toString();
} 
```

有人可以更正我的代码还是 JS 的任何更新使我的 JS 代码现在不起作用？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-17T02:24:29.857

尝试使用 onkeyup 事件而不是 onkeydown。onkeydown 事件在您的文本框的值反映正在输入的输入之前触发。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-17T02:09:09.320

尝试通过 id 而不是 form.name 引用输入框：

```
function calculate(){
   var num1=document.getElementById('tol').value;
   var num2=document.getElementById('parkir').value;
   var num3=document.getElementById('joki').value;
   var num4=document.getElementById('other').value;

   var sum=parseFloat(num1)+parseFloat(num2)+parseFloat(num3)+parseFloat(num4);
   document.getElementById('totalbox').value=sum.toString();
   document.getElementById('subtotal').value=sum.toString();
} 
```

将 id 属性添加到您的输入中：

```
<input type="text" maxlength="11" name="tol" id="tol" onkeydown="calculate()" value="0" />
... 
```

您可能还希望通过在尝试获取值之前检查元素是否存在来使您的代码更加健壮：

```
function calculate(){
  var fld1 = document.getElementById('tol');
  var num1 = 0;
  if (fld1 && fld1 != 'undefined') num1 = fld1.value;
  ... 
```

# javascript - angular-ui select2 initSelection 没有被调用

> ID：16050149
> 
> 赞同：6
> 
> 时间：2013-04-17T01:57:36.550
> 
> 标签：javascript, angularjs, jquery-select2, angular-ui

我的页面上有一个 angular-ui select2 组件。当用户输入某些内容时它工作正常（它使用 ajax 加载数据）。

但是 initSelection 函数永远不会被调用。这是我传递给 select2 的配置对象

```
{
    multiple: true,
    minimumInputLength: 1,
    tokenSeparators: [",", " "],
    createSearchChoice: function (term) {
        return term;
    },
    width: 'resolve',
    ajax: {
        url: '...',
        method: 'GET',
        quietMillis: 100,
        data: function (term, page) {
            ...
        },
        results: function (data, page) {
            ...
        }
    },
    initSelection: function (element, callback) {
        console.log('initSelection');
        return $.ajax({
            url: "...",
            type: "GET",
            data: {
                ...
            },
        }).done(function(data) {
            console.log(data);
            return callback(data);
        });
    }
}; 
```

“initSelection”永远不会被记录到控制台。为什么不调用 initSelection？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-19T14:23:27.590

仅当需要处理初始输入时才调用 initSelection（请参见[此处](http://ivaynberg.github.io/select2/#doc-tokenizer)上方的蓝色框- 恐怕是最接近的链接位置）。我怀疑从问题的措辞来看这可能是您的问题。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-12-19T11:59:34.227

我可以在 Angular Js 中使用 InItSelection 将选定的值作为编辑时间。

```
$scope.partInitSelection = function (element, callback) {
        var resultArray = [];
        resultArray.push({ id: "1", text: "hi" });
        $scope.HospitalizationView.HospitalName = resultArray[0];
        callback(resultArray[0]);
    }; 
```

# asp-classic - 使用 Mid 函数提交长查询字符串 - 出现错误并且字符串被截断

> ID：16050150
> 
> 赞同：0
> 
> 时间：2013-04-17T01:57:38.260
> 
> 标签：asp-classic

我有一个页面，用户可以在其中选择很多复选框，然后将他们选择的每个值都插入到数据库中。我正在使用查询字符串将初始页面中的值提交到帖子页面。

这些值是用竖线分隔的，存储过程会为它们中的每一个运行。我也有一个整数提交给数据库。

几个问题 - 首先，有时我会遇到中间“无效的过程调用”错误。在其他时候，似乎我为 QueryString 提交了太多字符，因此它被截断并且并非所有值都被提交。

任何帮助表示赞赏。谢谢！

提交值的主页 - Javascript：

```
function submit()
{
    var n = 0;
    var stringIDs = "";

              //Number of records to submit stored in hidden text box.
    for (n=1; n<=parseInt(document.getElementById("txtResultsIndex").value); n++)
        {
            try
            {
                var cb = document.getElementById("cbSelection"+n);
                if (cb.checked) 
                    {
                        stringIDs = stringIDs + "|" + document.getElementById("linkNumber"+n).innerText;
                    }
            }

            catch(exception)
            {}
        }

window.open("submit.asp?stringIDs=" + stringIDs + "|&cboResearchedBy=" + document.getElementById("cboResearchedBy").value);

} 
```

帖子页面经典 ASP（错误似乎源于此）：

```
 Dim vSQLInsert, v1ID, RS, stringIDs, cboResearchedBy, CN

'GetDataConnection is included in header file.
Set CN = GetDataConnection

stringIDs = Request.QueryString("stringIDs")
cboResearchedBy = Request.QueryString("cboResearchedBy")

stringIDs = Mid(stringIDs,2,len(stringIDs)) 

Do While stringIDs <> ""
    v1ID = Mid(stringIDs,1,InStr(stringIds,"|")-1)

    'Insert data into main table.  
    vSQLInsert = "spInsert "    
    vSQLInsert = vSQLInsert & "@vResearchedBy = '" & cboResearchedBy & "',"
    vSQLInsert = vSQLInsert & "@vSequenceNumber = '" & v1ID & "'"       

    Set RS = CN.Execute (vSQLInsert)

    stringIDs = Replace(stringIDs, v1ID & "|","")
Loop 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-05-02T16:36:30.083

删除中间功能。使用 for each 循环将值放在文本框中以提交到数组中的帖子页面。页面仍然需要一些时间来提交，但没有错误结果。

vIndex = stripquotes(Request.Form("txtIndex"))

If Request.Form("cboResearchedBy") <> "" Then vResearchedBy = stripquotes(Request.Form("cboResearchedBy")) End If

If Request.Form("txtMySeq") <> "" Then txtMySeq = Request.Form("txtMySeq") End If

vSeqArray = Split(txtMySeq, "|")

对于 vSeqArray 中的每个 vSeq

```
vSQLInsert = "Insert "  
vSQLInsert = vSQLInsert & "@vResearchedBy = '" & vResearchedBy & "',"
vSQLInsert = vSQLInsert & "@vSequenceNumber = '" & vSeq & "'"   

Response.Write(vSQLInsert)

Set RS = CN.Execute (vSQLInsert) 
```

下一个

# windows - 在 Windows 7 上使用 Inno Setup 安装 Segoe UI Symbol

> ID：16050151
> 
> 赞同：1
> 
> 时间：2013-04-17T01:57:42.260
> 
> 标签：windows, fonts, installation, inno-setup

我在我的开发机器上使用 Windows 8，并在运行 Windows 7 的平板电脑上安装程序。

在安装过程中，我需要在平板电脑上安装更新版本的 Segoe UI Symbol。我正在使用 Inno Setup，以下行编译得很好：

```
Source: "C:\PathHere\seguisym.ttf"; DestDir: "{fonts}"; FontInstall: "Segoe UI Symbol"; Flags: ignoreversion uninsneveruninstall 
```

我可以很好地安装其他字体，但没有 Segoe UI Symbol。

尝试在 Windows 7 上安装 Segoe UI Symbol 5.9 版时是否存在已知问题？

（如果我手动安装字体，它安装完全没有问题。）

# mysql - MySQL 数据库结构

> ID：16050152
> 
> 赞同：1
> 
> 时间：2013-04-17T01:57:46.357
> 
> 标签：mysql, database

我将有一个包含几百万个条目的表，我一直想知道创建多个表是否更聪明，即使它们都具有相同的结构？它会节省资源，最终会更有效率吗？

这是我特别关心的问题，因为我计划创建一个小型搜索引擎，它索引大约 3.000.000 个站点，每个站点将有大约 30 个正在被索引的单词。这是我现在的结构

```
site
--id
--url

word
--id
--word

appearances
--site_id
--word_id
--score 
```

我应该保留这个结构吗？或者我应该为 A 词、B 词、C 词等创建表格？与出场表相同

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-17T02:23:26.873

这里有一些问题要问自己：

*   这些记录都是相互关联的吗？有没有办法将它们清晰地划分为不同的、不重叠的组？这些组是否明确定义或可能发生变化？
*   保持最佳写入速度是否比访问数据的简单性更受关注？
*   有没有办法将记录划分为不同的类别？
*   复制是一个问题吗？冗余？
*   您担心交易安全吗？
*   如果初始架构错误，是否可以稍后重新构建数据？

有很多方法可以解决这个问题，但是在你知道你正在使用的参数之前，很难说。

通常第一步是收集大量真实数据，或者至少模拟足够多的数据，这些数据与真实数据相当相似，在结构上是相同的。然后，您使用您的测试数据尝试不同的存储和检索方法。

没有任何测试数据，你只是在黑暗中刺伤

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-17T02:15:17.817

选择查询在较小的表上更快。您希望将必须排序的索引放入系统内存以获得更好的性能。
更重要的是，不应该为了保存某种类型的数据而定义表，而是为了保存相关数据的集合。因此，如果您存储的数据存在逻辑差异，则可能应该将它们分成单独的表。

（不完整）

优点：

*   更快的数据访问

*   更容易复制或备份

缺点：

*   无法轻松比较来自不同表的数据。

    *   需要联合和连接查询来进行跨表比较

如果您不关心数据库上的一些延迟，它应该能够处理几百万条记录中的另一条记录，而不会带来太多麻烦。

# sql - 是否可以在 postgres sql 命令中引用环境变量？

> ID：16050157
> 
> 赞同：12
> 
> 时间：2013-04-17T01:58:32.357
> 
> 标签：sql, postgresql

例如，假设我想从运行 postgres 服务器的同一台机器上的路径导入 CSV 文件。

系统上有一个环境变量`MyPath`设置为`'/path/to/my/csv/file/'`.

我可以轻松地导入这个 CSV 文件，如下所示：

```
COPY MyTable FROM
'/path/to/my/csv/file/myTable.csv'
DELIMITERS ','
CSV HEADER; 
```

是否可以从此 postgres sql 命令中引用 MyPath 变量？大致如下：

```
COPY MyTable FROM
get_environmental_variable('MyPath') || 'myTable.csv'
DELIMITERS ','
CSV HEADER; 
```

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2013-04-17T02:08:41.150

开始时试试这个

```
 psql --set 'var=foo' -c '\i thesqlscript' 
```

这在查询中

```
update table set column = :var; 
```

这是取自[论坛上的这个问题](http://postgresql.1045698.n5.nabble.com/Passing-parameters-into-an-in-line-psql-invocation-td4448898.html)

如果您使用的是旧版本的 postgres，这看起来就像[在 postgres 论坛中](http://www.postgresql.org/message-id/20041028122902.GB22647@cspcag.swan.ac.uk)提出的相同问题（尽管这是很多年前的事了）。没有直接的方法，但他们提供了一些解决方法。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-04-17T02:06:09.423

如果您安装[PL/R](http://joeconway.com/plr/)，您可以使用 plr_environ() 函数来获取环境变量列表及其值`COPY MyTable from (SELECT VALUE FROM plr_environ() WHERE name = 'MyPath')`：其他存储过程语言可能有类似的方式——在 plpython 中，我想可以使用 os.environ['MyPath']，plperlu 可以访问 %ENV 哈希，等等。如果您需要进一步的帮助，请发表评论，我很乐意为您进一步研究。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2020-10-10T14:31:04.827

在 Posix 系统（Linux、MacOS）上...

**您可以访问与您正在使用的 postgresql角色**匹配的**系统用户**的环境变量，通常是系统**postgres**用户（或运行 postgres 服务器的任何系统用户）。

 ****因为`env`使用 '=' 作为分隔符，所以拆分`k=v`意味着您必须防止字符串**values**中出现 '=' 。

你可以做：

```
DROP TABLE IF EXISTS env;
DROP TABLE IF EXISTS env_tmp;
CREATE TEMP TABLE env_tmp(e text);
CREATE TEMP TABLE env(k text, v text);

COPY env_tmp ( e ) FROM PROGRAM 'env';

INSERT INTO env
SELECT (regexp_split_to_array(e,'={1,1}'))[1],
  (regexp_match(e, '={1,1}(.*)'))[1]
FROM env_tmp;

SELECT * FROM env;

            k             |         v                                                             
--------------------------+----------------------------
 LC_TIME                  | C
 DEPLOY_ENV               | local
 PG_VERSION               | 12.4-1.pgdg100+1
 LC_CTYPE                 | en_US.utf8
 LC_COLLATE               | en_US.utf8
 LANG                     | en_US.utf8
 LC_MESSAGES              | en_US.UTF-8
 PG_MAJOR                 | 12
 LC_NUMERIC               | C
 SERVICE_COMMAND          | postgres -c "config_file=postgresql.conf" -c "port=5432"

[...] 
```

也应该可以使用“CSV”版本的 COPY 来做一些事情，我没有尝试过这种方式。****

# angularjs - 在Angular中的控制器内调用控制器

> ID：16050158
> 
> 赞同：2
> 
> 时间：2013-04-17T01:58:32.540
> 
> 标签：angularjs

我有一个弹出控制器：

```
@PopupController = ["$scope", ($scope) ->
  $scope.isActive = false

  $scope.open = ->
    $scope.isActive = true

] 
```

和教师控制器：

```
@TeachersController = ["$scope", "Teacher", ($scope, Teacher) ->
  $scope.teachers = Teacher.query()

  $scope.showTeacher = ->
    # somehow call PopupController.open()

] 
```

如何拨打`PopupController.open()`电话`TeachersController`？

或者也许我做错了，Angular 有一些更好的方法来实现它？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-17T08:18:38.340

您可以使用[$broadcast](http://docs.angularjs.org/api/ng.%24rootScope.Scope#%24broadcast)（向下到子作用域）或 $emit（向上到作用域层次结构）将事件从一个控制器传输到另一个控制器。

然后，您将在接收器上注册一个触发您的功能的事件。请参阅[http://docs.angularjs.org/api/ng.$ro​​otScope.Scope#$on](http://docs.angularjs.org/api/ng.%24rootScope.Scope#%24on)。

# c# - 查询字符串未正确传递到操作链接

> ID：16050164
> 
> 赞同：0
> 
> 时间：2013-04-17T01:59:02.503
> 
> 标签：c#, asp.net, asp.net-mvc

我有这个动作链接：

```
@Html.ActionLink("Export to Excel",  // link text
    "Export",                        // action
    "Members",                       // controller
    Request.QueryString,             // query string
    "excel");                        // class 
```

使用我自己的重载 Action Link 方法：

```
public static MvcHtmlString ActionLink(this HtmlHelper htmlHelper,
    string linkText, string action, string controllerName,
    NameValueCollection queryString, string className)
{
    var newRoute = new RouteValueDictionary();

    IDictionary<string, object> htmlAttributes =
        new Dictionary<string, object> {{"class", className}};

    newRoute = htmlHelper.ViewContext.HttpContext.Request.QueryString.ToRouteDic(newRoute);

    return HtmlHelper.GenerateLink(htmlHelper.ViewContext.RequestContext, 
        htmlHelper.RouteCollection, linkText, null, action, null,
        newRoute, htmlAttributes).ToMvcHtml();
} 
```

所以这是我的页面的网址：

> mysite.com/Members?searchName=&searchEmail=&agencyId=&agencyTypeId=®ionId=®ionId=67&searchTaxIdNum=&searchDateStart=&searchDateEnd=

我拥有的 Action Link 生成了这个 url：

> mysite.com/Members/Export?regionId=%2C67

所以由于某种原因`%2C`被添加到 中`regionId`，但我不确定。有人知道我在做什么错吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-17T02:37:31.727

URL 中的 %2 相当于一个空格，您的代码中的某处可能有一个空格。

# javascript - 如何通过 javascript 加载初始数据？

> ID：16050165
> 
> 赞同：0
> 
> 时间：2013-04-17T01:59:35.537
> 
> 标签：javascript, jquery, file, cordova, underscore.js

我想通过文件或任何最好的方式预加载 9000 条记录。我的想法是我想在某个地方有 9000 条记录，我想通过 phonegap 将它们加载到 sqlite 数据库中。除了从某个地方加载数据之外，我还有所有这些工作。这是我到目前为止所拥有的

我有一个文件 records.csv 文件，这是我的代码

```
function populate_events_from_csv(db){
  var event_data; 
  $.ajax({
      type: "GET",
      url: "records.csv",
      dataType: "text/csv",
      error: function (request, status, error) {
         console.log('fail'); 
        console.log(request.responseText);
      },
      success: function(data) { 
               console.log('success'); 
               event_data = $.csv.toObjects(data); }
   });
   console.log(event_data);
    db.transaction(function(tx) {
    var q = 'INSERT INTO Events (id, name) VALUES (?, ?)';
      _(event_data).each(function(row) {
        tx.executeSql(q, [row.id, row.name]);
      });
    });
} 
```

这种方法可行，但由于记录 csv 中的双引号和单引号而失败

如果有人看到我做错了什么或最初插入这 9000 条记录的另一种解决方案

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-17T17:30:54.383

```
function populate_events_from_csv(db) {
    var event_data;
    $.ajax({
        type: "GET",
        url: "records.csv",
        dataType: "text/csv",
        error: function (request, status, error) {
            console.log('fail');
            console.log(request.responseText);
        },
        success: function (data) {
            console.log('success');
            event_data = $.csv.toObjects(data);
            db.transaction(function (tx) {
                var q = 'INSERT INTO Events (id, name) VALUES (?, ?)';
                _(event_data).each(function (row) {
                    tx.executeSql(q, [row.id, row.name]);
                });
            });
        }
    });

} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-17T18:31:01.720

为什么不将数据转换为 JSON，这将使其更快地加载到您的 javascript（最小解析）中，同时简化您的代码？

JSON化后，您将能够编写

```
function populate_events(db, url) {
    $.getJSON(url).done(function(data) {
        db.transaction(function (tx) {
            var q = 'INSERT INTO Events (id, name) VALUES (?, ?)';
            $(data).each(function (index, row) {
                tx.executeSql(q, [row.id, row.name]);
            });
        });
    }).fail(function(request, status, error) {
        console.log('fail');
        console.log(request.responseText);
    });
} 
```

将 CSV 转换为 JSON 留作练习，但有许多工具可以处理该任务。我会使用 Python 脚本（csv + json 库）。

# javascript - Jquery 对象悬停对象

> ID：16050168
> 
> 赞同：0
> 
> 时间：2013-04-17T01:59:41.157
> 
> 标签：javascript, jquery, html

我有一张桌子`z-index = 10`。我也有一个带有 .gif 的图像（.gif）`z-index = 100`。图像通过使用从左向右移动：

```
$('#misil').animate({'margin-left':'1250px'},1700}); 
```

现在我想要图像经过的每个单元格，制作一些动画，也许像这样

```
 $('#cell').animate({'opacity':'1250px'},400}); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-17T02:40:13.107

我能想到的唯一方法是不断地将图像的位置与每个单元格的位置进行比较。这将对浏览器造成极大的负担，但我认为这确实是您唯一的选择。像这样的东西：

```
setInterval(function(){
    var imgpos = $('#misil').offset().left;
    var imgwidth = $('#misil').width();
    $('table .cell').each(function(){
        var cellpos = $(this).offset().left;
        var cellwidth = $(this).width();
        if( cellpos <= imgpos && (cellpos + cellwidth) <= (imgpos) )
        {
            $(this).animate({opacity: 1},400)
        }
    })
},10) 
```

上面的代码将使每个单元格在图像在其上方时动画化为完全不透明。

您的代码有点奇怪（您不能使用像素值等为不透明度设置动画），但我想我理解了您的问题。

# python-3.x - 类型错误：+ 不支持的操作数类型：“int”和“str”

> ID：16050174
> 
> 赞同：-3
> 
> 时间：2013-04-17T02:00:10.313
> 
> 标签：python-3.x

此代码用于问答游戏，每次有人答对问题，每个问题都会获得一定数量的积分。我不知道如何让代码在每个正确答案后将分数加在一起。每次我尝试不同的东西时，我总是会收到此错误消息。

```
import sys

def open_file(file_name, mode):
    """Open a file."""
    try:
        the_file = open(file_name, mode)
    except IOError as e:
        print("Unable to open the file", file_name, "Ending program.\n", e)
        input("\n\nPress the enter key to exit.")
        sys.exit()
    else:
        return the_file

def next_line(the_file):
    """Return next line from the trivia file, formatted."""
    line = the_file.readline()
    line = line.replace("/", "\n")
    return line

def next_block(the_file):
    """Return the next block of data from the trivia file."""
    category = next_line(the_file)

    question = next_line(the_file)

    answers = []
    for i in range(4):
        answers.append(next_line(the_file))

    correct = next_line(the_file)
    if correct:
        correct = correct[0]

    explanation = next_line(the_file)

    points = next_line(the_file)

    return category, question, answers, correct, explanation, points

def welcome(title):
    """Welcome the player and get his/her name."""
    print("\t\tWelcome to Trivia Challenge!\n")
    print("\t\t", title, "\n")

def main():
    trivia_file = open_file("trivia_points.txt", "r")
    title = next_line(trivia_file)
    welcome(title)
    score = 0

    # get first block
    category, question, answers, correct, explanation, points = next_block(trivia_file)
    while category:
        # ask a question
        print(category)
        print(question)
        for i in range(4):
            print("\t", i + 1, "-", answers[i])

        # get answer
        answer = input("What's your answer?: ")

        # check answer
        if answer == correct:
            print("\nRight!", end=" ")
            total = sum(points + points)
            score = total
        else:
            print("\nWrong.", end=" ")
        print(explanation)
        print("Score:", score, "\n\n")

        points = int(points)

        # get next block
        category, question, answers, correct, explanation, points =       next_block(trivia_file)

    trivia_file.close()

    print("That was the last question!")
    print("You're final score is", score)

main()  
input("\n\nPress the enter key to exit.") 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-17T08:16:22.017

您将点作为字符串取出，并且需要在对其进行任何计算*之前*将它们转换为 int ，最好尽快：

```
points = int(next_line(the_file)) 
```

在 next_block 中应该可以解决问题。此外，您不是在分数中添加分数，而是在替换它。

```
total = sum(points + points)
score = total 
```

应该

```
score += points 
```

将“分数”添加到“分数”。

# actionscript-3 - 列出 DoubleClick 事件监听器

> ID：16050176
> 
> 赞同：0
> 
> 时间：2013-04-17T02:00:24.470
> 
> 标签：actionscript-3, list, event-handling

我在我的 AS3 程序中使用列表组件。我想添加一个双击事件侦听器，但这似乎不起作用：

```
m_list.addEventListener(MouseEvent.DOUBLE_CLICK, OnDoubleClick); 
```

我需要做一些特殊的事情来将点击监听器添加到列表中吗？我需要为列表中的每个单元格添加一个侦听器吗？

谢谢你的帮助。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-12-16T09:26:16.007

尝试这个：

```
m_list.addEventListener(ListEvent.ITEM_DOUBLE_CLICK, OnDoubleClick); 
```

# c - 为什么我不能以这种方式在 C 中写入我的结构数组？

> ID：16050182
> 
> 赞同：2
> 
> 时间：2013-04-17T02:01:22.983
> 
> 标签：c, arrays, struct

我有一个这样声明的结构数组：

```
typedef struct {
    int a;
    int b;
} buffer_t;

buffer = (buffer_t *) calloc(SIZE, sizeof(buffer_t)); 
```

稍后在代码中我这样写：

```
buffer_t temp = buffer[id];
temp.a = new_a;
temp.b = new_b; 
```

但是，当我以这种方式写信时，似乎没有任何问题。如果我这样做：

```
buffer[id].a = new_a;
buffer[id].b = new_b; 
```

它工作得很好。

我在这里做错了什么？我在这里错过了一些重要的部分吗？

（我的内部循环中有这段代码，所以我想让它尽可能高效......）

如果这很重要，我正在使用 Visual C++ 2008。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-04-17T02:04:54.823

这是因为`struct`值被复制：当你写

```
buffer_t temp = buffer[id]; 
```

`temp`在 的索引处获取项目的*副本*`id`。您可以随心所欲地修改副本，但除非您将其重新分配（例如`buffer[id] = temp`），否则更改不会“坚持”。

使用指针解决了这个问题：

```
buffer_t *temp = &buffer[id];
temp->a = new_a;
temp->b = new_b; 
```

现在`temp` *指向*`struct`at ，`buffer[id]`所以所有修改都发生在它`struct`本身上，而不是它的副本上。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-17T02:08:03.870

创建 temp 变量时，您是在*复制*结构，而不是创建对它的引用。如果要使变量相互修改，可以使用参考：

```
buffer_t &temp = buffer[id];
temp.a = new_a
temp.b = new_b 
```

# javascript - Javascript 函数在传递元素 ID 与硬编码时改变行为

> ID：16050188
> 
> 赞同：0
> 
> 时间：2013-04-17T02:01:57.917
> 
> 标签：javascript, html-table, getelementbyid

我有以下 Javascript，在 id="freq-table" 的表格单元格中单击鼠标即可使用`<input>`单元格的值填充 id="searchTerm(x)" 的连续表单字段。它在`<body>`标签中被引用为：

```
<body onload="populateFields()> 
```

并`<table>`标记为：

```
<table onclick="populateFields()> 

var index=0;
function populateFields(){
    var ft_id = document.getElementById("freq-table");    
    var alltds = ft_id.getElementsByTagName("td");
    for (var i in alltds) {
        alltds[i].onclick = function () {
            if(index==0) {
                searchTerm1.value = this.innerHTML;
            } else {
                setThis(this.innerHTML);
            }
        }
    }
    if (index<2) {
        index++;
    } else {
        index = 1;
    }
}

function setThis(value) {
    document.getElementById("searchTerm"+index).value = value;
} 
```

当试图通过传递元素 id（如下）使函数更通用时，现在需要第二次鼠标单击来开始填充字段。

```
<table onclick="populateFields(this)" id="freq-table">

function populateFields(element){
   var alltds = element.getElementsByTagName("td"); 
```

改变行为的修订是什么？我只是错误地传递了 id 吗？还是修改后的函数现在期望在`<body>`标签中将变量传递给它？这很令人困惑，因为：如果我错误地传递了 id，为什么该函数会在第一次鼠标单击后连续工作？请问有什么办法解决这个问题？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-17T02:55:23.373

您在这里有一些繁重的代码，其中第一个表单击（或正文加载）设置了额外的单击事件处理程序。

你应该做的是使用[事件委托](http://javascript.info/tutorial/event-delegation)。通过事件委托，单击事件处理程序附加到表格，但知道单击了哪个单元格（目标）。

[更新] 基于上述文章的代码示例：

```
var index=0;
var tableIds=["freq-table1","freq-table2","freq-table3"];
for (var i=0;i<tableIds.length;i++) {
var currentId=tableIds[i];
var table=document.getElementById(currentId);
table.onclick = function(event) {
  event = event || window.event;
  var target = event.target || event.srcElement;
  while(target != this) {
    if (target.nodeName == 'TD') {
        // target is our cell
        setThis(target.innerHTML);
    }
    target = target.parentNode;
  }
  // increment index modulo 3
  index=(index+1)%3;
}; // end of onclick function
}  // end of for loop 
```

现场演示：http: [//jsfiddle.net/srVmF/2/](http://jsfiddle.net/srVmF/2/)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-17T03:09:28.457

我认为呼叫可能来自 TD 或 TR 元素。因此，第一次 id 将是“未定义”。

为什么不使用事件调用函数并验证标签名称：

```
<table onclick="populateFields(event)" id="freq-table"> 
```

Javascript

```
function populateFields(e) { 

 var source = e.target || e.srcElement;
 if (e.tagName == 'table') {
 var ft_id = document.getElementById(source.id); 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-04-17T03:15:13.213

现在您必须在表格填充字段之前单击表格，而不是在页面加载时填充。

您可以离开页面加载处理程序：

```
<body onload="populateAllFields()"> 
```

为每个表添加一个类：

```
<table class="mytable"> 
```

然后，代码：

```
function populateAllFields()
{
    [].forEach.call(document.getElementsByClassName('mytable'), populateFields);
} 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-04-17T02:15:07.930

您`<body onload="populateFields()>`没有传递您想要的元素，因此不再发生页面加载时将完成的初始设置。

您可以通过传递 ID 来修复它，并为`onload`处理程序提供 ID。

```
function populateFields(id){
    var ft_id = document.getElementById(id);    
    var alltds = ft_id.getElementsByTagName("td");
    // and so on...
} 
```

* * *

```
<body onload="populateFields('freq-table')">

<table onclick="populateFields(this.id)"> 
```

# android - 像 Gallery 这样的 Android 水平滚动容器

> ID：16050190
> 
> 赞同：3
> 
> 时间：2013-04-17T02:02:17.063
> 
> 标签：android, scroll, gallery, centering, horizontal-scrolling

首先，对不起我的英语不好。希望能理解这一点。

请检查下面的网址我想要做什么。 ![在此处输入图像描述](https://i.stack.imgur.com/zl2WC.png)

我想制作像画廊这样的水平滚动查看器。但是 Gallery 现在已被弃用。所以我要找其他可滚动的容器，比如Horizo​​ntalScrollView 或Horizo​​ntalListView，而不是Gallery。

可滚动容器应具有中心锁定、速度和每个子项的宽度都可以动态调整的属性。

我想我们可以使用Horizo​​ntalListView或者Horizo​​ntalScrollView，ViewPager。但是他们有问题。Horizo​​ntalListView 或 Horizo​​ntalScrollView 没有“中心锁定”功能，ViewPager 没有速度功能。我也研究了 VelocityViewPager，但没有子项的触摸事件处理程序。

最好的例子是脉冲新闻阅读器：- [https://market.android.com/details?id=com.alphonso.pulse](https://market.android.com/details?id=com.alphonso.pulse)

# php - 未定义 Java 脚本函数

> ID：16050192
> 
> 赞同：0
> 
> 时间：2013-04-17T02:02:26.980
> 
> 标签：php, javascript, undefined-function

我从 chrome 开发人员工具中收到以下错误

> 未捕获的 ReferenceError：未定义 searchRequests searchProcess.php:174 onclick。

当我单击从 生成的超链接时`engine.php`，我没有从该`searchRequests`函数中收到警报。我不确定问题是什么，我很感激任何建议。这是我的代码：

**`searchProcess.php`**

```
<?php
include '../include/engine.php';
?>

<html>
<head>
<script type="text/javascript" src="../jQuery.js"></script>
<script type="text/javascript">
$( document ).ready(function() {

    var instrID;
    var cat;

    $(window).load(function(){

    });

    var newheight = $(window).height();

    function searchRequests(instr)
    {

        alert("in searchResults");
        instrID = instr;
        alert(instrID);

    }

    });

</script>
</head>
<body>
<?php
    drawSearchResults($var1, $var2, $var3, $var3, $var4); 
?>
</body>
</html> 
```

**`engine.php`**

```
<?php
function drawSearchResults($var1, $var2, $var3, $var4, $var5)
{
while($row = mysql_fetch_assoc($result))
{
    echo ("<tr>");
        echo ("<td id='InstrumentID'><a href='javascript:void(0);' onclick='searchRequests($row[InstrumentID])'>$row[InstrumentID]</a></td>");
    echo ("</tr>");
}
?> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-17T02:15:44.473

问题是该函数`searchRequests`不在`$(document).ready()`. 把它移到外面`$(document).ready()`。

一般来说，您不应该在 html 中嵌入您的 javascript。好多了：

```
$('#InstrumentID a').click(someFunctionThatIsInScope); 
```

您可以将该代码放入`$(document).ready()`块中。此外，您调用的函数将获得一个事件对象，您可以使用该对象从标记中获取您可能需要的任何值。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-17T02:14:44.203

因为它是私人的。您将其隐藏在全局范围内，因为它位于 ready 函数内。不要使用内联事件处理程序，使用 on() 附加事件！

# javascript - knockout object value changes but ui remains the same

> ID：16050194
> 
> 赞同：0
> 
> 时间：2013-04-17T02:02:41.803
> 
> 标签：javascript, knockout.js

I have a drop down list that is bound to a `SelectedFormat` value. The lists options are populated from external source on load and matches the view models `data.Format` object base on id.

Take a look at the [js fiddle](http://jsfiddle.net/QrvJN/8/)

Can anyone tell me why the model updates but the UI is not updating with the correct `Format.Name`

Thanks.

HTML:

```
<div data-bind="text:data.Format.Name"></div>
<select data-bind="
    options:Controls,
    optionsText: 'Name',
    value: data.SelectedFormat"></select> 
```

Model:

```
var jsonData = {
    Id: "abc-123",
    Name: "Chicken Cheese",
    Format: {
        Id: 2,
        Name: 'Medium',
        Other: 'Bar'
    }
};

var self = this;
self = ko.mapping.fromJS(data);
self.SelectedFormat = ko.observable(
    //return the first match based on id
    $.grep(vm.Controls,function(item){            
        return item.Id === self.Format.Id();
    })[0]
);

//when changed update the actual object that will be sent back to server 
self.SelectedFormat.subscribe(function (d) {
    this.Format = d;        
},self); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-17T02:15:59.427

In your code, you have `Format` and `SelectedFormat`. The former isn't an observable and so can't trigger updates. You have to use `SelectedFormat` instead.

```
<div data-bind="text:data.SelectedFormat().Name"></div> 
```

Example: [http://jsfiddle.net/QrvJN/9/](http://jsfiddle.net/QrvJN/9/)

# ruby-on-rails - Ruby on Rails - 在帖子被管理员标记为已审核之前，我如何才能发布帖子？

> ID：16050195
> 
> 赞同：1
> 
> 时间：2013-04-17T02:02:45.093
> 
> 标签：ruby-on-rails

我正在开发我的第一个应用程序，类似于用户可以发布帖子的 Pinterest。现在，所有发布的帖子都会立即发布。如何建立管理员批准流程，以便在管理员批准每个帖子之前不会发布帖子？

所以我在“Pins”下创建了一个名为“pinreview”的布尔值，每个帖子最初都是空白的。我将如何编辑控制器，以便公众可以在索引和显示视图中查看的引脚以及索引视图上的分页仅说明已批准的“引脚”？如果可以做到这一点，我如何构建一个管理页面，允许管理员查看非公开帖子提交并选中“pinreview”复选框？

我在下面附上了我的代码。谢谢！

**架构.rb**

```
create_table "pins", :force => true do |t|
    ...
    t.boolean  "pinreview"
end 
```

**pin_controller.rb**

```
def index
  @pins = Pin.order("created_at desc").page(params[:page]).per_page(5)

  respond_to do |format|
    format.html # index.html.erb
    format.json { render json: @pins }
  end
end

def show
  @pin = Pins.find(params[:id])

  respond_to do |format|
    format.html # show.html.erb
    format.json { render json: @pin }
  end
end 
```

**index.html.erb**

```
<%= render @pins %>
<%= will_paginate @pins %> 
```

**_pins.html.erb**

```
<%= pin.name %>
<%= pin.description %> 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-04-17T02:07:37.690

将[作用域](http://guides.rubyonrails.org/active_record_querying.html#scopes)添加到您的 Pin 模型：

```
scope :approved, where(:pinreview => false)
scope :pending,  where(:pinreview => true) 
```

我将建议另一个范围来帮助清理您的控制器：

```
scope :newest, order("created_at desc") 
```

然后，您可以查询这些范围：

```
@pins = Pin.approved.newest.page(params[:page]).per_page(5) 
```

要获得未经批准的 Pin 图，只需更改您的范围：

```
@pins = Pin.pending.newest.page(params[:page]).per_page(5) 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2016-02-29T14:29:10.773

如果您通常不想显示当前正在审核的任何 Pin 图，我发现也有帮助的是在控制器中集成“before_action”方法。

```
before_action :is_approved, only: :index

def is_approved
    @pins = Pin.all.where(:pinreview => false)
end 
```

希望这可以帮助寻找不显示任何内容的整体解决方案的人，例如在索引上

# vb.net - ICSharpCode.TextEditor.TextEditorControl 到 VB.net UserControl 移植问题

> ID：16050198
> 
> 赞同：0
> 
> 时间：2013-04-17T02:03:05.273
> 
> 标签：vb.net, code-completion, sharpdevelop

我正在尝试基于 SharpDevelop TextEditor 创建一个 vb.net 用户控件。我想要语法高亮和代码完成。为了做到这一点，我决定从 SharpDevelop 的源代码（版本 3.2.1.6466）中移植 CSharpCodeCompletion 示例。它在文件夹“samples\CSharpCodeCompletion”中

控件似乎在运行，语法突出显示正常，并且在“。”时显示代码完成窗口。（句号）键被按下。所有成员都在完成窗口中列出。现在我面临三个问题： 1\. 当显示代码完成窗口时，任何击键都会进入编辑器，因此列表框中的搜索功能不起作用。2\. 当我从列表框中选择一个条目时，单词会返回到编辑器，但会删除句点。例如，我正在输入“字符串”。--> 显示列表框 --> 选择单词“Empty”，我在编辑器中得到“StringEmpty”。3\. 在这个命令`Return GetMemberText(ambience, CType(c, ICSharpCode.SharpDevelop.Dom.IMember))`中，我得到一个强制转换异常。

请注意，当我从示例编译和运行原始 C# 代码时，编辑器和完成窗口按预期工作。我的猜测集中在两件事上，首先有一个问题，因为我将编辑器放在用户控件而不是示例中的表单中，但是我在代码中看不到任何明显的问题指向这个方向。其次，由于将 C# 代码移植到 VB，因此存在问题。C# 根本不是我的菜，但我尽我所能（我知道一些 Java）将整个东西重写为 VB。

我知道我的代码很大，但我会发布整个控制代码，以防有人想将它加载到 VS2010 并试一试。在这种情况下，您将需要示例 bin 文件夹中的 ICSharpCode.NRefactory、ICSharpCode.SharpDevelop.Dom、ICSharpCode.TextEditor、log4net 和 Mono.Cecil 程序集。

谢谢，请原谅我的英语。这是我的代码

```
Public Class ctlVBCodeEditor

Private Class HostCallbackImplementation
    Private Shared Sub ShowMessageWithException(msg As String, ex As Exception)
        DevExpress.XtraEditors.XtraMessageBox.Show(msg & vbCrLf & ex.Message, "Error", MessageBoxButtons.OK, MessageBoxIcon.Stop)
    End Sub

    Private Shared Sub ShowMessage(msg As String)
        DevExpress.XtraEditors.XtraMessageBox.Show(msg, "Error", MessageBoxButtons.OK, MessageBoxIcon.Stop)
    End Sub

    Private Shared Sub ShowAssemblyLoadError(fileName As String, include As String, msg As String)
        DevExpress.XtraEditors.XtraMessageBox.Show(msg & vbCrLf & "File: " & fileName & vbCrLf & "Include: " & include, "Error", MessageBoxButtons.OK, MessageBoxIcon.Stop)
    End Sub

    Public Shared Sub Register(ctlCode As ctlVBCodeEditor)
        ICSharpCode.SharpDevelop.Dom.HostCallback.GetCurrentProjectContent = New Func(Of ICSharpCode.SharpDevelop.Dom.IProjectContent)(Function() ctlCode.myContent)
        ICSharpCode.SharpDevelop.Dom.HostCallback.ShowError = New Action(Of String, System.Exception)(AddressOf ShowMessageWithException)
        ICSharpCode.SharpDevelop.Dom.HostCallback.ShowMessage = New Action(Of String)(AddressOf ShowMessage)
        ICSharpCode.SharpDevelop.Dom.HostCallback.ShowAssemblyLoadError = New Action(Of String, String, String)(AddressOf ShowAssemblyLoadError)
    End Sub
End Class

Private Class CodeCompletionData
    Inherits ICSharpCode.TextEditor.Gui.CompletionWindow.DefaultCompletionData
    Implements ICSharpCode.TextEditor.Gui.CompletionWindow.ICompletionData

    Private Shared vbAmbience As ICSharpCode.SharpDevelop.Dom.VBNet.VBNetAmbience = New ICSharpCode.SharpDevelop.Dom.VBNet.VBNetAmbience

    Private Shared Function GetMemberImageIndex(m As ICSharpCode.SharpDevelop.Dom.IMember) As Integer
        Dim Result As Integer = 0

        If TypeOf m Is ICSharpCode.SharpDevelop.Dom.IMethod Then
            Result = 1
        ElseIf TypeOf m Is ICSharpCode.SharpDevelop.Dom.IProperty Then
            Result = 2
        ElseIf TypeOf m Is ICSharpCode.SharpDevelop.Dom.IField Then
            Result = 3
        ElseIf TypeOf m Is ICSharpCode.SharpDevelop.Dom.IEvent Then
            Result = 6
        Else
            Result = 3
        End If
        Return Result
    End Function

    Private Shared Function GetClassImageIndex(cl As ICSharpCode.SharpDevelop.Dom.IClass) As Integer
        Dim Result As Integer = 0
        If cl.ClassType = ICSharpCode.SharpDevelop.Dom.ClassType.Enum Then
            Result = 4
        End If
        Return Result
    End Function

    Private Shared Function GetEntityText(e As ICSharpCode.SharpDevelop.Dom.IEntity) As String
        Dim Result As String = String.Empty

        Dim amb As ICSharpCode.SharpDevelop.Dom.IAmbience = vbAmbience

        If TypeOf e Is ICSharpCode.SharpDevelop.Dom.IMethod Then
            Result = amb.Convert(CType(e, ICSharpCode.SharpDevelop.Dom.IMethod))
        ElseIf TypeOf e Is ICSharpCode.SharpDevelop.Dom.IProperty Then
            Result = amb.Convert(CType(e, ICSharpCode.SharpDevelop.Dom.IProperty))
        ElseIf TypeOf e Is ICSharpCode.SharpDevelop.Dom.IEvent Then
            Result = amb.Convert(CType(e, ICSharpCode.SharpDevelop.Dom.IEvent))
        ElseIf TypeOf e Is ICSharpCode.SharpDevelop.Dom.IField Then
            Result = amb.Convert(CType(e, ICSharpCode.SharpDevelop.Dom.IField))
        ElseIf TypeOf e Is ICSharpCode.SharpDevelop.Dom.IClass Then
            Result = amb.Convert(CType(e, ICSharpCode.SharpDevelop.Dom.IClass))
        Else
            Result = e.ToString
        End If

        Return Result
    End Function

    Public Shared Function XmlDocumentationToText(xmlDoc As String) As String
        Dim sb As New System.Text.StringBuilder

        Try
            Using reader As New Xml.XmlTextReader(New IO.StringReader("<root>" & xmlDoc & "</root>"))
                reader.XmlResolver = Nothing
                While reader.Read
                    Select Case reader.NodeType
                        Case Xml.XmlNodeType.Text
                            sb.Append(reader.Value)
                        Case Xml.XmlNodeType.Element
                            Select Case reader.Name
                                Case "filterpriority"
                                    reader.Skip()
                                Case "returns"
                                    sb.AppendLine()
                                    sb.Append("Returns: ")
                                Case "param"
                                    sb.AppendLine()
                                    sb.Append(reader.GetAttribute("name") + ": ")
                                Case "remarks"
                                    sb.AppendLine()
                                    sb.Append("Remarks: ")
                                Case "see"
                                    If reader.IsEmptyElement Then
                                        sb.Append(reader.GetAttribute("cref"))
                                    Else
                                        reader.MoveToContent()
                                        If reader.HasValue Then
                                            sb.Append(reader.Value)
                                        Else
                                            sb.Append(reader.GetAttribute("cref"))
                                        End If
                                    End If
                            End Select
                    End Select
                End While
            End Using

            Return sb.ToString
        Catch ex As Exception
            Return xmlDoc
        End Try
    End Function

    Private member As ICSharpCode.SharpDevelop.Dom.IMember
    Private c As ICSharpCode.SharpDevelop.Dom.IClass
    Private mOverloads As Integer = 0

    Private _Description As String
    Public Overrides ReadOnly Property Description As String
        Get
            If String.IsNullOrEmpty(_Description) Then
                Dim entity As ICSharpCode.SharpDevelop.Dom.IEntity
                If member IsNot Nothing Then
                    entity = CType(member, ICSharpCode.SharpDevelop.Dom.IEntity)
                Else
                    entity = CType(c, ICSharpCode.SharpDevelop.Dom.IEntity)
                End If
                _Description = GetEntityText(entity)
                If mOverloads > 1 Then _Description &= " (+" & mOverloads.ToString & " overloads"
                _Description &= vbCrLf & XmlDocumentationToText(entity.Documentation)
            End If

            Return _Description
        End Get
    End Property
    Public Sub AddOverload()
        mOverloads += 1
    End Sub
    Public Sub New(theMember As ICSharpCode.SharpDevelop.Dom.IMember)
        MyBase.New(theMember.Name, String.Empty, GetMemberImageIndex(theMember))
        Me.member = theMember
    End Sub
    Public Sub New(theClass As ICSharpCode.SharpDevelop.Dom.IClass)
        MyBase.New(theClass.Name, String.Empty, GetClassImageIndex(theClass))
        Me.c = theClass
    End Sub
End Class

Private Class CodeCompletionProvider
    Implements ICSharpCode.TextEditor.Gui.CompletionWindow.ICompletionDataProvider
    Private ctlCode As ctlVBCodeEditor
    Private Function FindExpression(txtArea As ICSharpCode.TextEditor.TextArea) As ICSharpCode.SharpDevelop.Dom.ExpressionResult
        Dim finder As ICSharpCode.SharpDevelop.Dom.IExpressionFinder = New ICSharpCode.SharpDevelop.Dom.VBNet.VBExpressionFinder
        Dim Result As ICSharpCode.SharpDevelop.Dom.ExpressionResult = finder.FindExpression(txtArea.Document.TextContent, txtArea.Caret.Offset)
        If Result.Region.IsEmpty Then Result.Region = New ICSharpCode.SharpDevelop.Dom.DomRegion(txtArea.Caret.Line + 1, txtArea.Caret.Column + 1)
        Return Result
    End Function
    Private Sub AddCompletionData(resultList As List(Of ICSharpCode.TextEditor.Gui.CompletionWindow.ICompletionData), completionData As ArrayList)
        Dim nameDictionary As Dictionary(Of String, CodeCompletionData) = New Dictionary(Of String, CodeCompletionData)
        'Add the completion data as returned by SharpDevelop.Dom to the
        'list for the text editor
        For Each obj As Object In completionData
            If TypeOf obj Is String Then
                'namespace names are returned as string
                resultList.Add(New ICSharpCode.TextEditor.Gui.CompletionWindow.DefaultCompletionData(Convert.ToString(obj), "namespace " & obj.ToString, 5))
            ElseIf TypeOf obj Is ICSharpCode.SharpDevelop.Dom.IClass Then
                Dim cl As ICSharpCode.SharpDevelop.Dom.IClass = CType(obj, ICSharpCode.SharpDevelop.Dom.IClass)
                resultList.Add(New CodeCompletionData(cl))
            ElseIf TypeOf obj Is ICSharpCode.SharpDevelop.Dom.IMember Then
                Dim mm As ICSharpCode.SharpDevelop.Dom.IMember = CType(obj, ICSharpCode.SharpDevelop.Dom.IMember)
                If (TypeOf mm Is ICSharpCode.SharpDevelop.Dom.IMethod) AndAlso (CType(mm, ICSharpCode.SharpDevelop.Dom.IMethod).IsConstructor) Then
                    Continue For
                End If
                'Group results by name and add "(x Overloads)" to the
                'description if there are multiple results with the same name.
                Dim data As CodeCompletionData = Nothing
                If nameDictionary.TryGetValue(mm.Name, data) Then
                    data.AddOverload()
                Else
                    data = New CodeCompletionData(mm)
                    nameDictionary(mm.Name) = data
                    resultList.Add(data)
                End If
            Else
                'Current ICSharpCode.SharpDevelop.Dom should never return anything else
                Throw New NotSupportedException
            End If
        Next
    End Sub
    Public ReadOnly Property ImageList As System.Windows.Forms.ImageList Implements ICSharpCode.TextEditor.Gui.CompletionWindow.ICompletionDataProvider.ImageList
        Get
            Return ctlCode.imageList1
        End Get
    End Property
    Public ReadOnly Property PreSelection As String Implements ICSharpCode.TextEditor.Gui.CompletionWindow.ICompletionDataProvider.PreSelection
        Get
            Return String.Empty
        End Get
    End Property
    Public ReadOnly Property DefaultIndex As Integer Implements ICSharpCode.TextEditor.Gui.CompletionWindow.ICompletionDataProvider.DefaultIndex
        Get
            Return -1
        End Get
    End Property
    Public Function ProcessKey(key As Char) As ICSharpCode.TextEditor.Gui.CompletionWindow.CompletionDataProviderKeyResult Implements ICSharpCode.TextEditor.Gui.CompletionWindow.ICompletionDataProvider.ProcessKey
        If (Char.IsLetterOrDigit(key) Or key = " ") Then
            Return ICSharpCode.TextEditor.Gui.CompletionWindow.CompletionDataProviderKeyResult.NormalKey
        Else
            Return ICSharpCode.TextEditor.Gui.CompletionWindow.CompletionDataProviderKeyResult.InsertionKey
        End If
    End Function
    Public Function InsertAction(data As ICSharpCode.TextEditor.Gui.CompletionWindow.ICompletionData, textArea As ICSharpCode.TextEditor.TextArea, insertionOffset As Integer, key As Char) As Boolean Implements ICSharpCode.TextEditor.Gui.CompletionWindow.ICompletionDataProvider.InsertAction
        textArea.Caret.Position = textArea.Document.OffsetToPosition(insertionOffset)
        Return data.InsertAction(textArea, key)
    End Function
    Public Function GenerateCompletionData(fileName As String, textArea As ICSharpCode.TextEditor.TextArea, charTyped As Char) As ICSharpCode.TextEditor.Gui.CompletionWindow.ICompletionData() Implements ICSharpCode.TextEditor.Gui.CompletionWindow.ICompletionDataProvider.GenerateCompletionData
        Dim resolver As New ICSharpCode.SharpDevelop.Dom.NRefactoryResolver.NRefactoryResolver(ctlCode.myContent.Language)
        Dim rr As ICSharpCode.SharpDevelop.Dom.ResolveResult = resolver.Resolve(FindExpression(textArea), _
                                                                                ctlCode.parseInfo, _
                                                                                textArea.MotherTextEditorControl.Text)
        Dim resultList As New List(Of ICSharpCode.TextEditor.Gui.CompletionWindow.ICompletionData)
        If rr IsNot Nothing Then
            Dim completionData As ArrayList = rr.GetCompletionData(ctlCode.myContent)
            If completionData IsNot Nothing Then
                AddCompletionData(resultList, completionData)
            End If
        End If
        Return resultList.ToArray()
    End Function
    Public Sub New(myControl As ctlVBCodeEditor)
        Me.ctlCode = myControl
    End Sub
End Class

Private Class CodeCompletionKeyHandler
    Private ctlCode As ctlVBCodeEditor
    Private txtCode As ICSharpCode.TextEditor.TextEditorControl
    Private codeCompletionWin As ICSharpCode.TextEditor.Gui.CompletionWindow.CodeCompletionWindow
    Private Sub CloseCodeCompletionWindow(sender As Object, e As EventArgs)
        If codeCompletionWin IsNot Nothing Then
            RemoveHandler codeCompletionWin.FormClosed, AddressOf CloseCodeCompletionWindow
            codeCompletionWin.Dispose()
            codeCompletionWin = Nothing
        End If
    End Sub
    Public Function TextAreaKeyEventHandler(key As Char) As Boolean
        If codeCompletionWin IsNot Nothing Then
            If codeCompletionWin.ProcessKeyEvent(key) Then
                Return True
            End If
        End If
        If key = "." Then
            Dim completionDataProvider As ICSharpCode.TextEditor.Gui.CompletionWindow.ICompletionDataProvider = New CodeCompletionProvider(Me.ctlCode)
            Dim theForm As System.Windows.Forms.Form = Me.ctlCode.FindForm
            codeCompletionWin = ICSharpCode.TextEditor.Gui.CompletionWindow.CodeCompletionWindow.ShowCompletionWindow(theForm, Me.txtCode, ctlVBCodeEditor.DummyFileName, completionDataProvider, key)
            If codeCompletionWin IsNot Nothing Then
                AddHandler codeCompletionWin.FormClosed, AddressOf CloseCodeCompletionWindow
            End If
        End If
        Return False
    End Function
    Public Sub New(myControl As ctlVBCodeEditor, myCodeText As ICSharpCode.TextEditor.TextEditorControl)
        Me.ctlCode = myControl
        Me.txtCode = myCodeText
    End Sub
    Public Shared Function Attach(theControl As ctlVBCodeEditor, theEditor As ICSharpCode.TextEditor.TextEditorControl) As CodeCompletionKeyHandler
        Dim Result As New CodeCompletionKeyHandler(theControl, theEditor)
        AddHandler theEditor.ActiveTextAreaControl.TextArea.KeyEventHandler, AddressOf Result.TextAreaKeyEventHandler
        AddHandler theEditor.Disposed, AddressOf Result.CloseCodeCompletionWindow
        Return Result
    End Function
End Class

Private Class ToolTipProvider
    Private ctlCode As ctlVBCodeEditor
    Private txtCode As ICSharpCode.TextEditor.TextEditorControl
    Private Function GetText(result As ICSharpCode.SharpDevelop.Dom.ResolveResult) As String
        If result Is Nothing Then
            Return String.Empty
        End If

        If TypeOf result Is ICSharpCode.SharpDevelop.Dom.MixedResolveResult Then
            Return GetText(CType(result, ICSharpCode.SharpDevelop.Dom.MixedResolveResult).PrimaryResult)
        End If
        Dim ambience As ICSharpCode.SharpDevelop.Dom.IAmbience = New ICSharpCode.SharpDevelop.Dom.VBNet.VBNetAmbience
        ambience.ConversionFlags = ICSharpCode.SharpDevelop.Dom.ConversionFlags.StandardConversionFlags Or ICSharpCode.SharpDevelop.Dom.ConversionFlags.ShowAccessibility
        If TypeOf result Is ICSharpCode.SharpDevelop.Dom.MemberResolveResult Then
            Return GetMemberText(ambience, CType(result, ICSharpCode.SharpDevelop.Dom.MemberResolveResult).ResolvedMember)
        ElseIf TypeOf result Is ICSharpCode.SharpDevelop.Dom.LocalResolveResult Then
            Dim lrr As ICSharpCode.SharpDevelop.Dom.LocalResolveResult = CType(result, ICSharpCode.SharpDevelop.Dom.LocalResolveResult)
            ambience.ConversionFlags = ICSharpCode.SharpDevelop.Dom.ConversionFlags.UseFullyQualifiedTypeNames Or ICSharpCode.SharpDevelop.Dom.ConversionFlags.ShowReturnType
            Dim sb As New System.Text.StringBuilder
            If lrr.IsParameter Then
                sb.Append("parameter ")
            Else
                sb.Append("local variable ")
            End If
            sb.Append(ambience.Convert(lrr.Field))
            Return sb.ToString
        ElseIf TypeOf result Is ICSharpCode.SharpDevelop.Dom.NamespaceResolveResult Then
            Return "namespace " & CType(result, ICSharpCode.SharpDevelop.Dom.NamespaceResolveResult).Name
        ElseIf TypeOf result Is ICSharpCode.SharpDevelop.Dom.TypeResolveResult Then
            Dim c As ICSharpCode.SharpDevelop.Dom.IClass = CType(result, ICSharpCode.SharpDevelop.Dom.TypeResolveResult).ResolvedClass
            If c IsNot Nothing Then
                'Return ambience.Convert(result.ResolvedType)
                Return GetMemberText(ambience, CType(c, ICSharpCode.SharpDevelop.Dom.IMember))
            Else
                Return ambience.Convert(result.ResolvedType)
            End If
        ElseIf TypeOf result Is ICSharpCode.SharpDevelop.Dom.MethodGroupResolveResult Then
            Dim mrr As ICSharpCode.SharpDevelop.Dom.MethodGroupResolveResult = CType(result, ICSharpCode.SharpDevelop.Dom.MethodGroupResolveResult)
            Dim m As ICSharpCode.SharpDevelop.Dom.IMethod = mrr.GetMethodIfSingleOverload
            If m IsNot Nothing Then
                Return GetMemberText(ambience, m)
            Else
                Return "Overload of " & ambience.Convert(mrr.ContainingType) & "." & mrr.Name
            End If
        Else
            Return String.Empty
        End If
    End Function
    Private Shared Function GetMemberText(ambience As ICSharpCode.SharpDevelop.Dom.IAmbience, member As ICSharpCode.SharpDevelop.Dom.IMember) As String
        Dim sb As New System.Text.StringBuilder
        If TypeOf member Is ICSharpCode.SharpDevelop.Dom.IField Then
            sb.Append(ambience.Convert(CType(member, ICSharpCode.SharpDevelop.Dom.IField)))
        ElseIf TypeOf member Is ICSharpCode.SharpDevelop.Dom.IProperty Then
            sb.Append(ambience.Convert(CType(member, ICSharpCode.SharpDevelop.Dom.IProperty)))
        ElseIf TypeOf member Is ICSharpCode.SharpDevelop.Dom.IEvent Then
            sb.Append(ambience.Convert(CType(member, ICSharpCode.SharpDevelop.Dom.IEvent)))
        ElseIf TypeOf member Is ICSharpCode.SharpDevelop.Dom.IMethod Then
            sb.Append(ambience.Convert(CType(member, ICSharpCode.SharpDevelop.Dom.IMethod)))
        ElseIf TypeOf member Is ICSharpCode.SharpDevelop.Dom.IClass Then
            sb.Append(ambience.Convert(CType(member, ICSharpCode.SharpDevelop.Dom.IClass)))
        Else
            sb.Append("unknown member ")
            sb.Append(member.ToString())
        End If
        Dim documentation As String = member.Documentation
        If (documentation IsNot Nothing) AndAlso (documentation.Length > 0) Then
            sb.Append(vbCrLf)
            sb.Append(CodeCompletionData.XmlDocumentationToText(documentation))
        End If

        Return sb.ToString
    End Function
    Private Sub OnToolTipRequest(sender As Object, e As ICSharpCode.TextEditor.ToolTipRequestEventArgs)
        If e.InDocument And (Not e.ToolTipShown) Then
            Dim expFinder As ICSharpCode.SharpDevelop.Dom.IExpressionFinder = New ICSharpCode.SharpDevelop.Dom.VBNet.VBExpressionFinder
            Dim expResult As ICSharpCode.SharpDevelop.Dom.ExpressionResult = expFinder.FindFullExpression(txtCode.Text, txtCode.Document.PositionToOffset(e.LogicalPosition))
            If expResult.Region.IsEmpty Then
                expResult.Region = New ICSharpCode.SharpDevelop.Dom.DomRegion(e.LogicalPosition.Line + 1, e.LogicalPosition.Column + 1)
            End If
            Dim txtArea As ICSharpCode.TextEditor.TextArea = txtCode.ActiveTextAreaControl.TextArea
            Dim resolver As New ICSharpCode.SharpDevelop.Dom.NRefactoryResolver.NRefactoryResolver(ctlCode.myContent.Language)
            Dim rr As ICSharpCode.SharpDevelop.Dom.ResolveResult = resolver.Resolve(expResult, ctlCode.parseInfo, txtArea.MotherTextEditorControl.Text)
            Dim toolTipText As String = GetText(rr)
            If Not String.IsNullOrEmpty(toolTipText) Then
                e.ShowToolTip(toolTipText)
            End If
        End If
    End Sub
    Public Sub New(myControl As ctlVBCodeEditor, myCodeText As ICSharpCode.TextEditor.TextEditorControl)
        Me.ctlCode = myControl
        Me.txtCode = myCodeText
    End Sub
    Public Shared Sub Attach(theControl As ctlVBCodeEditor, theEditor As ICSharpCode.TextEditor.TextEditorControl)
        Dim tp As New ToolTipProvider(theControl, theEditor)
        AddHandler theEditor.ActiveTextAreaControl.TextArea.ToolTipRequest, AddressOf tp.OnToolTipRequest
    End Sub
End Class

Private Const DummyFileName As String = "dummy.vb"

Private pcREG As ICSharpCode.SharpDevelop.Dom.ProjectContentRegistry
Private myContent As ICSharpCode.SharpDevelop.Dom.DefaultProjectContent
Private parseInfo As ICSharpCode.SharpDevelop.Dom.ParseInformation
Private lastCompUnit As ICSharpCode.SharpDevelop.Dom.ICompilationUnit
Private parserThread As Threading.Thread
Private CurrentLanguageProperties As ICSharpCode.SharpDevelop.Dom.LanguageProperties

Private Sub InitializeControl()
    parseInfo = New ICSharpCode.SharpDevelop.Dom.ParseInformation
    CurrentLanguageProperties = ICSharpCode.SharpDevelop.Dom.LanguageProperties.VBNet
    txtCode.SetHighlighting("VBNET")

    HostCallbackImplementation.Register(Me)
    CodeCompletionKeyHandler.Attach(Me, txtCode)
    ToolTipProvider.Attach(Me, txtCode)
    pcREG = New ICSharpCode.SharpDevelop.Dom.ProjectContentRegistry
    'pcREG.ActivatePersistence(IO.Path.Combine(My.Computer.FileSystem.SpecialDirectories.Temp, "test"))
    myContent = New ICSharpCode.SharpDevelop.Dom.DefaultProjectContent()
    myContent.Language = CurrentLanguageProperties
End Sub

Private Function ConvertCompilationUnit(cu As ICSharpCode.NRefactory.Ast.CompilationUnit) As ICSharpCode.SharpDevelop.Dom.ICompilationUnit
    Dim converter As New ICSharpCode.SharpDevelop.Dom.NRefactoryResolver.NRefactoryASTConvertVisitor(myContent)
    cu.AcceptVisitor(converter, Nothing)
    Return converter.Cu
End Function

Private Sub ParseStep()
    Dim code As String = String.Empty
    Invoke(New MethodInvoker(Sub() code = txtCode.Text))
    Dim txtReader As IO.TextReader = New IO.StringReader(code)
    Dim newCompUnit As ICSharpCode.SharpDevelop.Dom.ICompilationUnit
    Dim supportedLanguage As ICSharpCode.NRefactory.SupportedLanguage = ICSharpCode.NRefactory.SupportedLanguage.VBNet
    Using p As ICSharpCode.NRefactory.IParser = ICSharpCode.NRefactory.ParserFactory.CreateParser(supportedLanguage, txtReader)
        'we only need to parse types and method definitions, no method bodies
        p.ParseMethodBodies = False
        p.Parse()
        newCompUnit = ConvertCompilationUnit(p.CompilationUnit)
    End Using
    'Remove information from lastCompilationUnit and add from newCompilationUnit.
    myContent.UpdateCompilationUnit(lastCompUnit, newCompUnit, DummyFileName)
    lastCompUnit = newCompUnit
    parseInfo.SetCompilationUnit(newCompUnit)
End Sub

Private Sub BackgroundParser()
    BeginInvoke(New MethodInvoker(Sub() lblInfo.Text = "Loading Visual Basic..."))
    myContent.AddReferencedContent(pcREG.Mscorlib)

    'do one initial parser step to enable code-completion while other references are loading
    ParseStep()

    Dim refAssemblies As String() = {"System", _
                                     "System.Data", _
                                     "System.Drawing", _
                                     "System.Xml", _
                                     "System.Windows.Forms", _
                                     "Microsoft.VisualBasic"}
    For Each asmName As String In refAssemblies
        Dim asmNameCopy As String = asmName
        BeginInvoke(New MethodInvoker(Sub() lblInfo.Text = "Loading " & asmNameCopy & "..."))
        Dim refContent As ICSharpCode.SharpDevelop.Dom.IProjectContent = pcREG.GetProjectContentForReference(asmName, asmName)
        myContent.AddReferencedContent(refContent)
        If TypeOf refContent Is ICSharpCode.SharpDevelop.Dom.ReflectionProjectContent Then
            CType(refContent, ICSharpCode.SharpDevelop.Dom.ReflectionProjectContent).InitializeReferences()
        End If
    Next
    myContent.DefaultImports = New ICSharpCode.SharpDevelop.Dom.DefaultUsing(myContent)
    myContent.DefaultImports.Usings.Add("System")
    myContent.DefaultImports.Usings.Add("System.Text")
    myContent.DefaultImports.Usings.Add("Microsoft.VisualBasic")
    BeginInvoke(New MethodInvoker(Sub() lblInfo.Text = "Ready..."))
    'Parse the current file every 2 seconds
    While Not IsDisposed
        ParseStep()
        Threading.Thread.Sleep(2000)
    End While
End Sub

Protected Overrides Sub OnLoad(e As System.EventArgs)
    MyBase.OnLoad(e)

    If Not DesignMode Then
        parserThread = New Threading.Thread(AddressOf BackgroundParser)
        parserThread.IsBackground = True
        parserThread.Start()
    End If
End Sub

Public Sub New()

    ' This call is required by the designer.
    InitializeComponent()

    ' Add any initialization after the InitializeComponent() call.
    If Not DesignMode Then
        InitializeControl()
    End If
End Sub
End Class 
```

# c# - 将画布转换为 WPF 中可写位图的最快方法？

> ID：16050202
> 
> 赞同：3
> 
> 时间：2013-04-17T02:03:39.977
> 
> 标签：c#, wpf, writeablebitmap

我目前有一个可写位图图像和带有绘图的画布，我想将图像发送给对等方。为了减少带宽，我想将画布转换为可写位图，因此我可以将两个图像都blit到一个新的可写位图。问题是我找不到转换画布的好方法。所以想问问有没有直接的办法可以把canvas转成writeablebitmap类。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-04-17T02:14:58.597

这取自[这篇博](http://denisvuyka.wordpress.com/2007/12/03/wpf-diagramming-saving-you-canvas-to-image-xps-document-or-raw-xaml/)文，但不是写入文件，而是写入 WriteableBitmap。

```
public WriteableBitmap SaveAsWriteableBitmap(Canvas surface)
{
    if (surface == null) return null;

    // Save current canvas transform
    Transform transform = surface.LayoutTransform;
    // reset current transform (in case it is scaled or rotated)
    surface.LayoutTransform = null;

    // Get the size of canvas
    Size size = new Size(surface.ActualWidth, surface.ActualHeight);
    // Measure and arrange the surface
    // VERY IMPORTANT
    surface.Measure(size);
    surface.Arrange(new Rect(size));

    // Create a render bitmap and push the surface to it
    RenderTargetBitmap renderBitmap = new RenderTargetBitmap(
      (int)size.Width, 
      (int)size.Height, 
      96d, 
      96d, 
      PixelFormats.Pbgra32);
    renderBitmap.Render(surface);

    //Restore previously saved layout
    surface.LayoutTransform = transform;

    //create and return a new WriteableBitmap using the RenderTargetBitmap
    return new WriteableBitmap(renderBitmap);

} 
```

# mongodb - 如何在 MongoDB 上的 Grails 集成测试中回滚事务

> ID：16050204
> 
> 赞同：2
> 
> 时间：2013-04-17T02:04:01.303
> 
> 标签：mongodb, grails, grails-orm

当使用 MongoDB 作为数据源时，我如何（应该）配置 Grails 集成测试以自动回滚事务？（我正在使用 Grails 2.2.1 + mongodb 插件 1.2.0）

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-07-23T20:23:12.343

对于 spock 集成测试，我定义了一个 MongoIntegrationSpec，它可以控制清理测试数据。

*   dropDbOnCleanup = true // 将在每个特性方法执行后删除整个 DB。
*   dropDbOnCleanupSpec = true // 在规范完成后将删除整个数据库。
*   dropCollectionsOnCleanup = ["collectionA", "collectionB", ...] // 在每个特征方法执行后删除集合。
*   dropCollectionsOnCleanupSpec = ["collectionA", "collectionB", ...] // 在规范完成后丢弃集合。
*   dropNewCollectionsOnCleanup = true // 在每个特征方法执行后，所有新的集合都被丢弃
*   dropNewCollectionsOnCleanupSpec = true // 规范完成后，所有新集合都被丢弃

这是来源

[https://github.com/onetribeyoyo/mtm/tree/dev/src/test/integration/com/onetribeyoyo/util/MongoIntegrationSpec.groovy](https://github.com/onetribeyoyo/mtm/tree/dev/src/test/integration/com/onetribeyoyo/util/MongoIntegrationSpec.groovy)

该项目也有几个使用示例。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-17T16:08:50.380

我认为这是不可能的，因为 MongoDB 不支持事务。您可以使用建议`static transactional = 'mongo'`，但只有在您不刷新数据时才有帮助（我认为这种情况很少见）

相反，您可以`setUp()`手动清理数据库。您可以删除要测试的域的集合，例如：

```
MyDomain.collection.drop() 
```

和（可选）填写测试所需的所有数据。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-17T02:25:19.807

可以`static transactional = 'mongo'`在`integration`测试和/或`service`课堂中使用。有关更多详细信息，请参阅[MongoDB 插件](http://springsource.github.io/grails-data-mapping/mongo/manual/guide/5.%20Transactions.html)。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2015-01-14T12:03:34.440

MongoDB 不支持事务！因此你不能使用它。您拥有的选项是

### 1\. 四处走走并删除您使用的 DomainClasses 的集合。

```
MyDomain.collection.drop() //If you use mongoDB plugin alone without hibernate
MyDomain.mongo.collection.drop() //If you use mongoDB plugin with hibernate 
```

**缺点是您必须为您使用的每个域都这样做**

### 2\. 删除整个数据库（你不需要显式创建它，但你可以）

```
String host = grailsApplication.config.grails.mongo.host
Integer port = grailsApplication.config.grails.mongo.port
Integer databaseName = grailsApplication.config.grails.mongo.databaseName

def mongo = new GMongo(host, port)
mongo.getDB(databaseName).dropDatabase() //this takes 0.3-0.5 seconds in my machin 
```

第二种选择更简单、更快捷。为了让你的所有测试都可以工作，扩展`IntegrationSpec`并添加代码以将数据库放在清理块中（我假设你正在使用 Spock 测试框架）或对 JUnit 类似的测试做类似的事情！

希望这可以帮助！

# sql - 数据库之间的安全价值转移

> ID：16050205
> 
> 赞同：0
> 
> 时间：2013-04-17T02:04:01.350
> 
> 标签：sql, currency, billing, accounting, distributed-algorithm

我做了一些搜索，但找不到合适的搜索词。

有两个完全分开但受信任的数据库。它们的连接不可靠（但安全）。两个数据库都在不同的服务器上运行，并有一定的服务器故障概率。

两个数据库都是用钱运作的，需要将一些金额从一个账户（数据库#1，服务器#1）“转移”到另一个账户（数据库#2，服务器#2）。

这应该以永远不会导致“损失金钱”或“重复金钱”的方式完成，即使两个服务器都崩溃并在最坏的时刻恢复。

我认为应该有一个通用算法。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-17T06:32:44.283

你是对的，就是这样一个算法。它被称为*两阶段提交*。它通常要求两个 DBMS 相同。

# c# - 在 Windows 窗体中将 NULL 值插入到 mdf 表中

> ID：16050206
> 
> 赞同：0
> 
> 时间：2013-04-17T02:04:01.697
> 
> 标签：c#

我无法弄清楚我在这里做错了什么，在调试器中，当我设置断点时，字符串中都有字符串值，但是当需要将它们插入表中时，什么都没有放入。

该表定义如下

```
CREATE TABLE [dbo].[tblMissEvents] (
[EventID]          INT            IDENTITY (1, 1) NOT NULL,
[EventTime]        NVARCHAR (MAX) NULL,
[MIS_Event_Action] VARCHAR (50)   NULL,
[Bogey_Type]       VARCHAR (50)   NULL,
PRIMARY KEY CLUSTERED ([EventID] ASC) 
```

);

我的代码：

```
 string date = DateTime.Now.ToString();
        string MISaction = text1.Text;
        string BogeyType = text2.Text;

        try
        {
            con = new SqlConnection();
            con.ConnectionString =
                @"data source=(LocalDB)\v11.0;attachdbfilename=|DataDirectory|\MissileEvents.mdf;integrated security=True;MultipleActiveResultSets=True;Connect Timeout=30";
            con.Open();
            SqlCommand cmd = new SqlCommand();
            cmd.CommandType = CommandType.Text;
            cmd.CommandText =
                "INSERT into tblMissEvents (EventTime, MIS_Event_Action, Bogey_Type) Values (@date, @MISaction, @BogeyType)";  
            cmd.Parameters.AddWithValue("@date", date);
            cmd.Parameters.AddWithValue("@MISaction", MISaction);
            cmd.Parameters.AddWithValue("@BogeyType", BogeyType);
            cmd.Connection = con;
            cmd.ExecuteNonQuery();
        }
        catch (Exception ex)
        {
            MessageBox.Show(ex.ToString());
        }
        con.Close(); 
```

有什么想法吗？？我没有例外，只是没有进入我的桌子。

为 Arshad 编辑：

```
 con = new SqlConnection();
        con.ConnectionString =
            @"data source=(LocalDB)\v11.0;attachdbfilename=|DataDirectory|\MissileEvents.mdf;integrated security=True;MultipleActiveResultSets=True;Connect Timeout=30";
        con.Open();
        SqlCommand cmd = new SqlCommand();
        cmd.CommandType = CommandType.Text;
        cmd.CommandText =
            "INSERT into tblMissEvents (MIS_Event_Action, Bogey_Type) Values (@date, @MISaction, @BogeyType)";  
        cmd.Parameters.AddWithValue("@date", date);
        cmd.Parameters.AddWithValue("@MISaction", MISaction);
        cmd.Parameters.AddWithValue("@BogeyType", BogeyType);
        cmd.Connection = con;
        cmd.ExecuteNonQuery(); 
```

更新:: 代码很好，它在我的 bin\Debug 目录中复制了数据库，这就是所有数据的去向。可能与我的连接字符串设置有关。谢谢大家！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-17T02:11:22.787

您也可以将 null 值传递为：

```
 cmd.CommandText =
            "INSERT into tblMissEvents (EventTime, MIS_Event_Action, Bogey_Type)
                                Values (@eventTime, @MISaction, @BogeyType)";  
        cmd.Parameters.AddWithValue("@eventTime", DBNull.Value);          
        cmd.Parameters.AddWithValue("@MISaction", MISaction);
        cmd.Parameters.AddWithValue("@BogeyType", BogeyType); 
```

**更新 1**

```
cmd.CommandText =
        "INSERT into tblMissEvents (EventTime,MIS_Event_Action, Bogey_Type) 
                                Values 
                                   (@date, @MISaction, @BogeyType)"; 
```

**更新 2**

```
int RowUpdated=cmd.ExecuteNonQuery();
MessageBox.Show("Number of row updated"+RowUpdated); 
```

# c# - 如何恢复在 C# 中备份的数据？

> ID：16050209
> 
> 赞同：0
> 
> 时间：2013-04-17T02:04:19.300
> 
> 标签：c#, backup

如何恢复在 C# 中备份的数据？我试图弄清楚如何恢复已经保存的数据。我想我知道如何保存数据，但是当我的应用程序运行时，我无法恢复数据，我真的需要帮助吗？

```
using System;
using System.Collections.Generic;
using System.ComponentModel;
using System.Data;
using System.Drawing;
using System.Linq;
using System.Text;
using System.Threading.Tasks;
using System.Windows.Forms;
using System.IO;
using System.Runtime.Serialization.Formatters.Binary;

namespace Lab09_E00988190
{
    public partial class Form1 : Form
    {
        List<Student> listOfStudents;
        int intCurrentStudent = 0;

        string fileName;
        StreamWriter outputFile;
        StreamWriter inputFile;
        BinaryFormatter studentFormatter = new BinaryFormatter();

        public Form1()
        {
            InitializeComponent();
            listOfStudents = new List<Student>();
            txtGPA.Enabled = false;
            txtID.Enabled = false;
            txtName.Enabled = false;
            btnPrevious.Enabled = false;
            btnNext.Enabled = false;
            btnRegisterStudent.Enabled = false;
        }

        private void btnNewStudent_Click(object sender, EventArgs e)
        {
            txtName.Text = "";
            txtGPA.Text = "";
            txtID.Text = "";

            txtName.Enabled = true;
            txtGPA.Enabled = true;
            txtID.Enabled = true;
            txtName.Focus();

            btnRegisterStudent.Enabled = true;
            btnNewStudent.Enabled = true;
        }

       private void btnNext_Click(object sender, EventArgs e)
       {
            intCurrentStudent++;
            displayCurrent();
            if (intCurrentStudent == listOfStudents.Count - 1)
            {
               btnNext.Enabled = false;
            }
            btnPrevious.Enabled = true;
       }

        private void displayCurrent()
        {
            txtGPA.Text = listOfStudents[intCurrentStudent].GPA.ToString();
            txtName.Text = listOfStudents[intCurrentStudent].Name;
            txtID.Text = listOfStudents[intCurrentStudent].ID.ToString();
            lblNumberofStudents.Text =     listOfStudents[intCurrentStudent].Students.ToString();
        }

        private void btnPrevious_Click(object sender, EventArgs e)
        {
            intCurrentStudent--;
            displayCurrent();
            if (intCurrentStudent == 0)
            {
                btnPrevious.Enabled = false;
            }
            btnNext.Enabled = true;
        }

        private void btnRegisterStudent_Click(object sender, EventArgs e)
        {
            try
            {
                if (txtName.Text != "")
                {
                    if (Decimal.Parse(txtGPA.Text) >= 0 && Decimal.Parse(txtGPA.Text) <= 4)
                    {
                        listOfStudents.Add(new Student(txtName.Text, txtID.Text, Int32.Parse(lblNumberofStudents.Text), Decimal.Parse(txtGPA.Text)));
                        txtGPA.Enabled = false;
                        txtID.Enabled = false;
                        txtName.Enabled = false;

                        if (listOfStudents.Count == 0)
                        {
                            btnPrevious.Enabled = false;
                            btnNext.Enabled = false;
                        }

                        if (listOfStudents.Count == 1)
                        {
                            btnPrevious.Enabled = false;
                            btnNext.Enabled = false;
                        }

                        if (listOfStudents.Count > 1)
                        {
                            btnPrevious.Enabled = true;
                            btnNext.Enabled = true;
                        }

                        if (listOfStudents.Count >= 5)
                        {
                            btnRegisterStudent.Enabled = false;
                            btnNewStudent.Enabled = false;
                        }
                }
                else
                {
                    MessageBox.Show("GPA can't be less than 0 or greater than 4");
                }
            }
            else
            {
                MessageBox.Show("GPA must be in numbers!");
            }
        }
        catch
        {
            MessageBox.Show("Make sure you have all the right information entered there");
        }
        displaySummary();
    }

    private void displaySummary()
    {
        int numberOfStudents = 0;

        foreach (Student aStudent in listOfStudents)
        {
            numberOfStudents += aStudent.Students;
        }
        lblNumberofStudents.Text = listOfStudents.Count.ToString();
    }

    private void exitToolStripMenuItem_Click(object sender, EventArgs e)
    {
        this.Close();
    }

    private void openFileDialogToolStripMenuItem_Click(object sender, EventArgs e)
    {
        DialogResult result = openFileDialog1.ShowDialog();
        if (result == DialogResult.OK)
        {
            fileName = openFileDialog1.FileName;
            if (!File.Exists(fileName))
            {
                fileName += ".txt";
            }
        }
        {
            try
            {
                using (Stream inputFile = File.OpenRead(fileName))
                {
                    listOfStudents = (List<Student>)studentFormatter.Deserialize(inputFile);
                }
                if (listOfStudents.Count == 0)
                {
                    btnPrevious.Enabled = false;
                    btnNext.Enabled = false;
                }

                if (listOfStudents.Count == 1)
                {
                    btnPrevious.Enabled = false;
                    btnNext.Enabled = false;
                }

                if (listOfStudents.Count > 1)
                {
                    btnPrevious.Enabled = true;
                    btnNext.Enabled = true;
                }

                if (listOfStudents.Count >= 5)
                {
                    btnRegisterStudent.Enabled = false;
                    btnNewStudent.Enabled = false;
                }
                displaySummary();
                displayCurrent();
                MessageBox.Show("File backup complete!");
            }
            catch (ArgumentNullException)
            {
                MessageBox.Show("You need to select file first!");
            }
            catch (IOException exception)
            {
                MessageBox.Show(exception.ToString(), "An IO exception has occured!");
            }
        }   
    }

    private void saveFileDialogToolStripMenuItem_Click(object sender, EventArgs e)
    {
        DialogResult result = saveFileDialog1.ShowDialog();
        if (result == DialogResult.OK)
        {
            fileName = saveFileDialog1.FileName;
            if (!File.Exists(fileName))
            {
                fileName += ".txt";
            }
        }
        try
        {
            using (Stream outputFile = File.Create(fileName))
            {
                studentFormatter.Serialize(outputFile, listOfStudents);
            }
            MessageBox.Show("File restoration complete!");
        }
        catch (IOException exception)
        {
            MessageBox.Show(exception.ToString(), "An IO exception has occured!");
        }
    }
} 
```

}

# jquery - 如何优化图片的加载

> ID：16050210
> 
> 赞同：0
> 
> 时间：2013-04-17T02:04:23.227
> 
> 标签：jquery, performance, load

我很想知道是否有人对如何最好地加快此页面的加载有任何建议。或者至少给人一种加载速度更快的印象。我发现加载图形持续时间太长了。我不是 jQuery 延迟加载插件的忠实粉丝。

[http://www.peterclarke.com.au/project-type/architecture/](http://www.peterclarke.com.au/project-type/architecture/)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-17T02:11:36.950

尝试安装 pageSpeed 扩展。此扩展为您提供可用于提高网站速度的建议（无 cookie 域、精灵等）。

**例子**

![在此处输入图像描述](https://i.stack.imgur.com/rggFZ.png)

另一个不错的工具是[webpagetest](http://www.webpagetest.org)。使用此工具，您可以在世界各地的各种浏览器中测试您的网站速度。

**例子**

![在此处输入图像描述](https://i.stack.imgur.com/3YUoc.png)

# c# - WPF Datagrid 分组和排序

> ID：16050211
> 
> 赞同：3
> 
> 时间：2013-04-17T02:04:30.037
> 
> 标签：c#, wpf, sorting, data-binding, collections

我正在 WPF 数据网格中实现分组。我想对分组的项目进行排序。例如，datagrid 有四列（empno、name、dept、address）。我正在按部门列分组。当我单击 dept 列标题时，我想对分组的项目进行排序。

这里我使用 ListCollectionView 对后面代码中的项目进行分组。

```
public  ListCollectionView collection;
collection = new ListCollectionView(obj.empData);

collection.GroupDescriptions.Add(new PropertyGroupDescription("Country"));
dgData.Items.SortDescriptions.Add
          (new System.ComponentModel.SortDescription
                   ("Country"
                    ,System.ComponentModel.ListSortDirection.Descending
                   )
           );
dgData.Items.SortDescriptions.Add
          (new System.ComponentModel.SortDescription
                    ("Contact"
                     , System.ComponentModel.ListSortDirection.Descending
                    )
          );
dgData.ItemsSource = collection;

private void dgData_Sorting
        (object sender, Microsoft.Windows.Controls.DataGridSortingEventArgs e)
{
    if (e.Column.SortDirection.ToString() == "Ascending")
    {
        //dgData.Items.SortDescriptions.Clear();
        collection.Refresh();
        collection = new ListCollectionView(obj.empData);
        collection.GroupDescriptions.Add(new PropertyGroupDescription("Country"));
        dgData.Items.SortDescriptions.Add
             ( new System.ComponentModel.SortDescription
                  ("Country"
                   , System.ComponentModel.ListSortDirection.Descending
                  )
              );
         dgData.ItemsSource = collection;
    }
} 
```

更改排序顺序后，它不会反映在 UI 中。请让我知道实现这一点的正确方法。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-17T08:10:30.700

您是否看过 MSDN 文章[How to: Sort a GridView Column When a Header Is Clicked](http://msdn.microsoft.com/en-us/library/ms745786%28v=vs.90%29.aspx)，它指的是[ListView That Sorts Data Sample](http://download.microsoft.com/download/f/6/e/f6e32974-726e-4054-96af-9c747bf89a6e/ListViewSort.exe)中的示例，后者具有（[下载示例](http://download.microsoft.com/download/f/6/e/f6e32974-726e-4054-96af-9c747bf89a6e/ListViewSort.exe)）链接

[有趣的是，对示例下载](http://download.microsoft.com/download/f/6/e/f6e32974-726e-4054-96af-9c747bf89a6e/ListViewSort.exe)的最终引用只能通过 MSDN 文章的 .NET 3.0 和 3.5 版本获得，但不能通过 .NET 4.0 和 4.5 的版本获得，尽管代码片段是相同的。

还有一些基于上述 MSDN 示例的沼泽文章：

*   Thomas Levesque 的 [[WPF] Automatically sort a GridView when a column header is clicked](http://www.thomaslevesque.com/2009/03/27/wpf-automatically-sort-a-gridview-when-a-column-header-is-clicked/)
*   Thomas Levesque 的[[WPF] Automatically sort a GridView（续）](http://www.thomaslevesque.com/2009/08/04/wpf-automatically-sort-a-gridview-continued/)
    后者也[有代码](http://projets.developpez.com/projects/dvp-net/repository/entry/trunk/src/Developpez.Dotnet.Windows/Behaviors/GridViewBehavior.cs)

还有可运行的 Visual Studio 项目的 MSDN 博客文章（依赖于 WPF 工具包）：

*   [WPF DataGrid：三态排序示例](http://blogs.msdn.com/b/vinsibal/archive/2008/08/29/wpf-datagrid-tri-state-sorting-sample.aspx)
*   [提高 Microsoft DataGrid CTP 排序性能](http://blogs.msdn.com/b/jgoldb/archive/2008/08/26/improving-microsoft-datagrid-ctp-sorting-performance.aspx)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-17T12:28:04.077

您可以使用此代码（限制：在“联系人”上排序时，“国家”顺序将重置为升序）：

```
void dgData_Sorting(object sender, DataGridSortingEventArgs e)
{
    // reset sortings
    collection.SortDescriptions.Clear();

    // define column sort
    e.Column.SortDirection = e.Column.SortDirection 
          == ListSortDirection.Ascending 
             ? ListSortDirection.Descending : ListSortDirection.Ascending;

    // sort collection
    collection.SortDescriptions.Add
             (new SortDescription
                   (e.Column.SortMemberPath
                    , e.Column.SortDirection.GetValueOrDefault()
                   )
              );

    // mark event as handled otherwise the datagrid will "reset" your custom sorting
    e.Handled = true;
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2016-02-03T23:35:57.097

I found that turning on Live Sorting makes the second sort column actually take affect, e.g:

```
collection.IsLiveSortingRequested = true;
collection.LiveSortingProperties.Clear();
collection.LiveSortingProperties.Add("Contact"); 
```

# python - 有没有办法在 concurrent.futures 中停止正在运行的进程？

> ID：16050212
> 
> 赞同：12
> 
> 时间：2013-04-17T02:04:31.917
> 
> 标签：python, python-3.x, multiprocessing

如何终止使用[concurrent.futures](http://docs.python.org/3.2/library/concurrent.futures.html)开始的正在运行的进程？据我了解，`cancel()`如果该进程未运行，则该方法可以从队列中删除该进程。但是杀死一个正在运行的进程呢？例如，如果我有一个长时间运行的进程，并且我想在我按下 GUI 中的取消按钮时停止它。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2017-07-30T08:26:08.693

在这种情况下，最好将 a`multiprocessing.Process`用于长时间运行的任务。

在开始新进程`multiprocessing.Event` *之前*创建一个。让子进程定期检查 this 的状态`Event`，并在`Event.is_set()`返回时退出`True`。

在您的 GUI 代码中，将回调`set()`与`Event`.

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2017-08-04T20:43:27.993

您可能想在[此处](https://stackoverflow.com/a/45515052/2063031)查看我对相关 StackOverflow 问题的回答。

简而言之，似乎没有一种简单的方法可以取消`concurrent.futures.ProcessPoolExecutor`. 但是您可以通过手动杀死子进程来以一种*骇人听闻的方式完成它。*

# java - Hibernate - 为什么在 getter 而不是变量之前放一个列名？

> ID：16050217
> 
> 赞同：0
> 
> 时间：2013-04-17T02:05:03.810
> 
> 标签：java, hibernate, jpa

如果我们创建一个对应于用户 id 的列 Id，那么为什么我们不把它放在变量 id 附近而不是 id 的 getter 附近呢？我在这里得到了答案 -[在哪里放置休眠注释？](https://stackoverflow.com/questions/3286508/where-to-put-hibernate-annotations).

但是，因为我的书把它放在 getter 附近，所以看起来**某些类**需要通过 getter 访问这个对象以将其序列化/持久化到数据库中。这个类是什么，它是如何执行持久性的？我是否调用它的方法来做持久性？

```
import javax.persistence.Entity;
import javax.persistence.GeneratedValue;
import javax.persistence.Id;

@Entity
public class User {
  private Long id;
  private String password;

  @Id
  @GeneratedValue
  public Long getId() {
    return id;
  }

  public void setId(Long id) {
    this.id = id;
  }

  public String getPassword() {
    return password;
  }

  public void setPassword(String password) {
    this.password = password;
  }
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-17T02:51:03.450

Hibernate 将使用反射在您的类中找到要读取的适当方法或字段。这就是 Hibernate 能够读取私有字段的原因。

[从session.save(Object object)](http://docs.jboss.org/hibernate/orm/3.5/javadoc/org/hibernate/Session.html)调用执行此反射的代码。

# c++ - UTF8 与宽字符？

> ID：16050218
> 
> 赞同：3
> 
> 时间：2013-04-17T02:05:18.370
> 
> 标签：c++, unicode

我似乎很难把头绕在什么东西上。我正在尝试创建一个 C++ 函数来将 UTF8 转换为 Wide。我开始在谷歌上搜索，发现了 Boost 和 ICU（两者看起来都太大了）。然后我找到了 utf-cpp 头库，看起来不错。我通过这里的一些线程发现了这一点。

然后我阅读了该线程并找到了[https://stackoverflow.com/a/6155524](https://stackoverflow.com/a/6155524)

但是这两个函数是如何将 UTF32 字符串转换为 Wide char 的呢？它似乎只是 UTF32 到 UTF8。我在 utf-cpp 标头文档中找不到任何关于宽字符的提及...

无论如何，是否有任何类型的库可以将 UTF8/16/32 转换为 Wide 和反向？我正在查看似乎使用 ICU的[http://src.chromium.org/svn/trunk/src/base/utf_string_conversions.cc ，但它也有 18 个头文件。](http://src.chromium.org/svn/trunk/src/base/utf_string_conversions.cc)

有什么帮助吗？也许这只是我今天的头坏了。

编辑：重读后这是两个问题......我真的想知道是否有一个不错的小型库（如 utf-cpp 标头）来处理宽字符和 unicode。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-04-17T02:21:08.413

如果您指的是“宽字符”，`wchar_t`那么您必须考虑到它在某些平台上是 16 位（使用 UCS-2 或 UTF-16），但它是 32 位（使用 UTF-32）在其他平台上。因此，询问如何转换为“宽字符”/从“宽字符”转换，您首先必须定义“宽字符”的实际含义。处理 UTF-16/32 时需要使用正确的 16 位/32 位数据类型。

几乎所有 Unicode 库，包括 utf8-cpp 和 ICU，都具有使用适当数据类型在 UTF8<->UTF16 和 UTF8<->UTF32 之间转换的功能，而不依赖于`wchar_t`.

# java - 二叉搜索树到 inOrder 数组

> ID：16050219
> 
> 赞同：2
> 
> 时间：2013-04-17T02:05:32.563
> 
> 标签：java, arrays, binary-search-tree

很简单的问题：

递归如何创建使用此构造函数的二叉搜索树数组（按顺序）：

```
public class OrderedSet<E extends Comparable<E>> {
    private class TreeNode {
    private E data;
    private TreeNode left, right;

    public TreeNode(E el) {
        data = el;
        left = null;
        right = null;
    }
}

  private TreeNode root;
  public int size = 0;

  public OrderedSet() {
    root = null;
  } 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-17T02:36:55.030

有序意味着您首先必须遍历树的左侧，因此：

```
TreeNode tree  // this is your tree you want to traverse
E[] array = new E[tree.size];  // the arrays length must be equivalent to the number of Nodes in the tree
int index = 0; // when adding something to the array we need an index
inOrder(tree, array, index);  // thats the call for the method you'll create 
```

该方法本身可能看起来像这样：

```
public void inOrder(TreeNode node, E[] array, int index){
    if(node == null){  // recursion anchor: when the node is null an empty leaf was reached (doesn't matter if it is left or right, just end the method call
       return;
    }
    inOrder(node.getLeft(), array, index);   // first do every left child tree
    array[index++]= node.getData();          // then write the data in the array
    inOrder(node.getRight(), array, index);  // do the same with the right child
} 
```

有点像这样。我只是不确定索引以及它需要在哪里增加。如果您不想担心索引，或者您不知道树中有多少个节点，那么请改用 ArrayList 并将其最终转换为数组。

通常一个更简洁的调用方法是围绕递归方法构建的，如下所示：

```
public E[] inOrderSort(TreeNode tree){
    E[] array = new E[tree.size];
    inOrder(tree, array, 0);
    return array;
} 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-04-17T21:48:08.840

谢谢，效果很好。Java不允许我创建一个泛型数组，所以使用你的算法我让它与一个ArrayList一起工作（就像你建议的那样）这是方法（使用上面的构造函数），以防其他人问同样的问题。（Ref 是我对当前树节点的引用）

```
public ArrayList<E> toArray() {
    ArrayList<E> result = new ArrayList<E>();
    toArrayHelp(root, result);
    return result;
}

private void toArrayHelp(TreeNode ref, ArrayList<E> result) {
    if (ref == null) {
        return;
    }
    toArrayHelp(ref.left, result); 
    result.add(ref.data); 
    toArrayHelp(ref.right, result); 
} 
```

# java - 在java中的数组的输入上放置一个范围

> ID：16050222
> 
> 赞同：1
> 
> 时间：2013-04-17T02:05:58.267
> 
> 标签：java, arrays

我是java编程新手。我想知道是否有一种方法可以用键盘上的整数填充数组（范围：10 到 65）。这是我的代码：

```
public static void main(String[] args)      
{
    //Keyboard Initialization
    Scanner kbin = new Scanner(System.in);

    //a.Declare an array to hold 10 intgers values
    int list[]=new int[10];     
    int i=0;
    //b.Fill the array with intgers from the keyboard(range: 10 to 50).
    System.out.print("\n\tInput numbers from 10 to 50: \n");
    list[i]= kbin.nextInt();
    if(10<=list[i] && list[i] <= 50)
    {
        for(i=1; i<=9;i++)
        {
            list [i] = kbin.nextInt();      
        }
    }
} 
```

请帮忙。谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-17T02:14:24.337

这应该解决它...

```
System.out.print("\n\tInput numbers from 10 to 50: \n");
for(int i=0; i<10;)
{
    int k = kbin.nextInt();      
    if (k >= 10 && k <= 50)
    {
        list[i] = k;
        ++i;
    }
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-17T02:14:38.130

如果我理解你的意图正确......

您需要循环直到有 10 个有效数字。如果用户输入的数字超出范围，则需要将其丢弃。

```
import java.util.Scanner;

public class TestStuff {

    public static void main(String[] args) {
        //Keyboard Initialization
        Scanner kbin = new Scanner(System.in);

        //a.Declare an array to hold 10 intgers values
        int list[] = new int[10];
        int i = 0;

        System.out.print("\n\tInput numbers from 10 to 50: \n");
        while (i < 10) {
            //b.Fill the array with intgers from the keyboard(range: 10 to 50).
            int value = kbin.nextInt();
            if (value >= 10 && value <= 50) {
                list[i] = value;
                i++;
            } else {
                System.out.println("!! Bad number !!");
            }
        }
        for (int value : list) {
            System.out.println("..." + value);
        }
    }
} 
```

示例输出...

```
 Input numbers from 10 to 50: 
1
!! Bad number !!
2
!! Bad number !!
3
!! Bad number !!
4
!! Bad number !!
5
!! Bad number !!
6
!! Bad number !!
7
!! Bad number !!
8
!! Bad number !!
9
!! Bad number !!
10
11
12
13
14
15
16
17
18
19
...10
...11
...12
...13
...14
...15
...16
...17
...18
...19 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-17T02:13:28.957

我不确定您要做什么。但是，我猜您正在尝试获取用户输入的前 10 个数字？

要记住的一件重要事情是 java（和其他语言）使用基于 0 的索引。所以你的 for 循环 where i = 1, i <= 9; i++ 我认为我应该从 0 开始，但我再次不确定您要在这里做什么。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2018-09-06T03:58:14.943

虽然这个问题已经得到回答，但我注意到没有人提供或谈论`.hasNext()` **正则表达式**方法，所以下面我使用**正则表达式**提供这个问题的答案：

```
import java.util.Scanner;

public class Main3 {
    public static void main (String [] args) {
        int list [] = new int [10];
        for (int i = 0; i < 10; i ++) {
            Scanner sc = new Scanner (System.in);
            if (sc.hasNext("([1-4][0-9])?(50)?")) {
                list[i] = sc.nextInt();
            } else {
                System.err.println("Entered value is out of range 10 - 50\. Please enter a valid number");
                i --;
            }
        }

        for (int i = 0; i < 9; i ++) {
            System.out.print(list[i] + " ");
        }
        System.out.println(list[9]);
    }
} 
```

# jquery - 使用 .load 为在刷新的 div 中不起作用的社交按钮加载外部 js 文件

> ID：16050223
> 
> 赞同：0
> 
> 时间：2013-04-17T02:06:02.627
> 
> 标签：jquery, html

我有一个包含新闻容器、社交按钮容器和评论框容器的盒子。盒子的高度是固定的，所以我不能使用 .append 而不是我想刷新那个盒子。问题是当我在框中使用 .load 时社交按钮不起作用，因为它使用的是外部 .js 文件。这可能吗？

这是我的盒子：

```
<div class="pin-box" id="pinbox_<?php echo $row['articles_id'];?>">
    <div class="box1">
        <?php
            //Script that will echo articles
        ?>

        <hr class="art_line">

        <div class="social_button" id="social_<?php echo $row['articles_id'];?>">

            <span class='st_facebook_large' st_url='<?php echo base_url(); ?>index.php/be_informed/show/<?php echo $row['articles_id']; ?>' displayText='Facebook'></span>
            <span class='st_twitter_large' st_url='<?php echo base_url(); ?>index.php/be_informed/show/<?php echo $row['articles_id']; ?>'  displayText='Tweet'></span>

            <span class='st_linkedin_large' st_url='<?php echo base_url(); ?>index.php/be_informed/show/<?php echo $row['articles_id']; ?>' displayText='LinkedIn'></span>
            <span class='st_googleplus_large' st_url='<?php echo base_url(); ?>index.php/be_informed/show/<?php echo $row['articles_id']; ?>' displayText='Google +'></span>
        </div>
        <div id="space"></div>

        <div id="beinformed_comment">
            <?php
                //Script that will echo comments
            ?>

        </div>
    </div>
</div>

<script type="text/javascript" src="http://w.sharethis.com/button/buttons.js"></script>
<script type="text/javascript">
        stLight.options({publisher: "751d0899-1764-4d1f-aac0-1bf112ad5cfd",
        doNotHash: false,
        doNotCopy: false, 
        hashAddressBar: false
        });
</script> 
```

这是我的 Jquery 代码（我使用的是 1.4.2）：

```
$('.comment_button_article').live("click",function() 
{

var ID = $(this).attr("id");

var comment= $("#ctextarea"+ID).val();
var user_id= $("#user_id_"+ID).val();
var dataString = 'comment='+ comment + '&msg_id=' + ID + '&user_id=' + user_id;

if(comment=='' | comment=='Enter your comment here')
{
alert("Please Enter a Comment");
}
else

{
$.ajax({
type: "POST",
url: "comment_ajax.php",
data: dataString,
cache: false,
success: function(html){

$('#pinbox_'+ID).load('<?php echo base_url(); ?>index.php/be_informed/index #pinbox_'+ID);

 }
 });

}
return false;
}); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-17T03:59:31.840

我的猜测是它可能是没有执行的外部脚本。

将内容添加到页面后（作为 load() 调用中的回调函数），您应该尝试手动调用脚本，例如：

```
$.ajax({
    type: "POST",
    url: "comment_ajax.php",
    data: dataString,
    cache: false,
    success: function(html){    
        $('#pinbox_'+ID).load('<?php echo base_url(); ?>index.php/be_informed/index #pinbox_'+ID, function(){
             $.ajax({
                dataType: "script",
                cache: true,
                url: 'http://w.sharethis.com/button/buttons.js'
            });
        });            
     }
}); 
```

}

# coldfusion - CFSelect 不绑定，但文本框是

> ID：16050227
> 
> 赞同：1
> 
> 时间：2013-04-17T02:07:07.817
> 
> 标签：coldfusion, coldfusion-10, cfselect

我正在使用CF10。我有一个选择：

```
<cfselect name="company" id="company" query="qcompany" display="placename" value="placeid" queryposition="below">
                <option value="0">--Select--
</cfselect> 
```

我有另一个 cfselect 绑定到第一个：

```
<cfselect  name="People" bind="cfc:schedule.GetPeopleArray({company})" ></cfselect> 
```

我无法让第二个 cfselect 显示任何结果。为了测试我是否从我的组件接收数据（我将在底部显示），我绑定了一个文本框：

```
 <cfinput name="test" bind="cfc:schedule.GetPeopleArray({company})" bindonload="false"/> 
```

此文本框每次都显示对我的组件的调用结果，但 cfselect 从不显示任何内容。

我可能做错了什么？

我尝试从我的组件返回数组和查询。没有帮助。我尝试将显示和值属性添加到第二个 cfselect。没有帮助。

这是我的组件：

```
<cfcomponent output="false">
<cffunction name="GetPeopleArray" access="remote" returnType="array" output="false">
    <cfargument name="company" type="string" >

    <!--- Define variables --->
    <cfset var data="">
    <cfset var result=ArrayNew(2)>
    <cfset var i=0>

    <cfquery name="qEmployee" datasource="texas" >
        SELECT 0 as personid,'Select Person' as fullname,0 as sortorder
        UNION
        SELECT p.personid ,concat(firstname,' ',lastname) as fullname,3 as sortorder
        FROM person p
        INNER JOIN placeperson pp
        ON p.personid=pp.personid
        where personstatus='ACT'
        and pp.placeid=#arguments.company#
        order by sortorder,fullname
    </cfquery>

    <!--- Convert results to array --->
    <cfloop index="i" from="1" to="#qEmployee.RecordCount#">
        <cfset result[i][1]=qEmployee.personid[i]>
        <cfset result[i][2]=qEmployee.fullname[i]>
    </cfloop>

    <!--- And return it --->
    <cfreturn result>
</cffunction>   
 </cfcomponent> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-17T21:27:22.247

最终，您可能还是想使用 jQuery，但是 FWIW 您现有的代码在 CF10 上运行良好。（为了简单起见，唯一的变化是删除了 JOIN）所以要么你使用不同的代码，要么还有其他我们不知道的事情发生..

说实话，Ajax 功能确实有一些“怪癖”。但是，对于这样的简单案例，您应该没有任何问题。除了添加文本字段之外，您还执行了哪些其他调试或故障排除步骤？我通常推荐的是：

*   **先独立测试CFC**。使用各种示例值直接在浏览器中访问它：

    `http://localhost/path/to/schedule.cfc?method=GetPeopleArray&company=someValue`

    我使用原始代码执行此操作，发现当`company`值不是数字时发生错误，例如空字符串。（我怀疑这可能是问题所在）您可以通过替换像 0 这样的无效 ID 来防止该错误。注意，一定要使用`cfqueryparam`防止sql注入。

    ```
     AND  pp.placeid = <cfqueryparam value="#val(arguments.company)#" 
                                cfsqltype="cf_sql_integer"> 
    ```

*   **在 CF Administrator 中启用[CF AJAX 调试器](http://help.adobe.com/en_US/ColdFusion/9.0/Developing/WSc3ff6d0ea77859461172e0811cbec10e40-8000.html)**。然后附加`?cfdebug`到您的测试脚本，以便您可以查看控制台并检查问题/错误。

    `http://localhost/path/to/yourTestForm.cfm?cfdebug`

    同样，我在调整查询后这样做了。但是没有错误。您现有的 cfform 代码运行良好。

通常这两个步骤足以查明任何问题。如果没有，请确保您的`Application.cfc` 文件（如果您正在使用文件）没有干扰 Ajax 请求。这是一个常见的问题。在任何应用程序文件之外的单独目录中测试代码。

编辑：另外，您也可以设置`bindonload="false"`选择列表。由于您不想在页面首次加载时调用该函数。仅当用户从列表中选择某些内容时。

# java - 在 facebook 应用程序中创建登录布局，如 android

> ID：16050228
> 
> 赞同：6
> 
> 时间：2013-04-17T02:07:29.913
> 
> 标签：java, android, xml, layout

我想制作一个登录活动/布局类似于 Facebook 应用程序的应用程序。我的意思是当文本字段聚焦时，软键盘会向上推动整个视图，但不会挤压徽标。我已经尝试过`android:windowSoftInputMode="adjustPan/adjustResize"`，但这不是我想要达到的目标。

我在 SO 上发现[了这个](https://stackoverflow.com/questions/15264049/keyboard-popup-to-scroll-up-full-layout-in-android)问题，也许它会让事情变得更清楚，但它没有解决问题的办法。

我也尝试过各种布局类型，但它的软键盘只会将焦点 < EditText > 向上推。请指导我。

**更新：**

![在此处输入图像描述](https://i.stack.imgur.com/5WX5L.jpg)![在此处输入图像描述](https://i.stack.imgur.com/NxFMq.jpg)

![在此处输入图像描述](https://i.stack.imgur.com/Udfpm.jpg)![在此处输入图像描述](https://i.stack.imgur.com/Z2GAB.jpg)

```
 <?xml version="1.0" encoding="utf-8"?>
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:layout_width="fill_parent"
    android:layout_height="fill_parent"
    android:orientation="vertical"
    android:background="#DDDDDD">
    <RelativeLayout 
        android:height="0dp"
        android:layout_weight="1"
        android:layout_height="0dp"
        android:layout_width="fill_parent"
        android:background="#ff0000">
        <ImageView
            android:layout_centerVertical="true"
            android:layout_height="fill_parent"
            android:layout_width="fill_parent"></ImageView>
    </RelativeLayout>
    <RelativeLayout 
        android:height="0dp"
        android:layout_height="0dp"
        android:layout_weight="1"
        android:layout_width="fill_parent"
        android:background="#00ff00">
    </RelativeLayout>

    <RelativeLayout
        android:layout_width="fill_parent"
        android:layout_height="0dp"
        android:layout_weight="1"
        android:background="#0000ff"
        android:height="0dp" >

        <Button
            android:layout_width="fill_parent"
            android:layout_height="40dp"
            android:layout_alignParentBottom="true"
            android:layout_centerHorizontal="true"
            android:text="Log in" 
            />

        <EditText
            android:layout_width="fill_parent"
            android:layout_height="40dp"
            android:layout_centerHorizontal="true"
            android:layout_centerVertical="true"
            android:padding="4dp"
            android:hint="password"
            android:inputType="textPassword" >
        </EditText>

        <EditText
            android:id="@+id/editText1"
            android:hint="login"
            android:padding="4dp"
            android:layout_width="fill_parent"
            android:layout_height="40dp"
            android:layout_alignParentTop="true"
            android:layout_centerHorizontal="true" ></EditText>
    </RelativeLayout>

</LinearLayout> 
```

**更新工作解决方案** 我不能在这里粘贴整个 xml 文件，但结构应该足够了。基于 Gabe Sechan 的回答。

```
Layout{
   Layout top weight 1
   Layout mid weight 1
   Layout bot weight 1
} 
```

子布局已设置为：

```
android:layout_width="match_parent"
android:layout_height="0dp"
android:layout_weight="1"  // should be changed accordingly to your layout design. 
```

这是活动的Java代码（键盘向上/向下）：

```
View top, mid, bot;
    final View activityRootView = findViewById(R.id.loginLayout);
            activityRootView.getViewTreeObserver().addOnGlobalLayoutListener(
                    new OnGlobalLayoutListener() {
                        @Override
                        public void onGlobalLayout() {
                            int heightDiff = activityRootView.getRootView()
                                    .getHeight() - activityRootView.getHeight();
                            if (heightDiff > 100) { //keyboard up
                                mid.setVisibility(View.INVISIBLE);
                                top.setLayoutParams(new TableLayout.LayoutParams(
                                        LayoutParams.MATCH_PARENT, 0, 0f));
                                bot.setLayoutParams(new TableLayout.LayoutParams(
                                        LayoutParams.MATCH_PARENT, 0, 1f));

                            } else {// keyboard down
                                // v.setVisibility(View.VISIBLE);
                                mid.setVisibility(View.VISIBLE);
                                top.setLayoutParams(new TableLayout.LayoutParams(
                                        LayoutParams.MATCH_PARENT, 0, 2f));
                                bot.setLayoutParams(new TableLayout.LayoutParams(
                                        LayoutParams.MATCH_PARENT, 0, 3f));

                            }
                        }
                    }); 
```

在键盘向上时，您需要根据键盘向上设计更改权重，在键盘向下时更改回默认值（您通过 xml/java 设置的布局）。我已经在 2.3.x 及更高版本上测试了代码。并且不要忘记使用`android:inputType="textFilter"`login&password`EditText`来删除输入建议并保存一些像素。在您的活动清单中`android:windowSoftInputMode="adjustResize|stateHidden"`。`stateHidden`用于使键盘在活动加载时不会启动。希望能帮助到你。祝你好运。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-04-17T03:36:23.243

They're doing it with relative layouts, adjustResize, and android:layout_centerVertical. Basically, they have a linear layout for their main layout, with 3 equally weighted relative layouts inside of it. Each is set to 0dp height, so they take up equal thirds of the screen. The top RelativeLayout holds the logo, centered vertically. The middle holds the login fields and button, centered vertically one on top of the other. The bottom one holds the copyright text, aligned to bottom. The end result is that when the keyboard comes up, the 3 relative layouts get resized to take 1/3 of the new screen. Then their elements are centered in the new screen.

Remember you need the adjustResize window mode to get this, if you use pan it will just move up and the logo will scroll off center.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-17T04:31:47.420

在 Eclipse 中，转到 File|New|Other，然后在随后的向导中，选择 Android Activity，然后在下一页上，从活动列表中选择 LoginActivity。这具有您正在谈论的确切布局，您可以将其用作框架。它使用 ScrollView 来实现您正在寻找的效果。

# c# - 如何在 C# 中获取当前应用程序的名称

> ID：16050235
> 
> 赞同：4
> 
> 时间：2013-04-17T02:08:23.760
> 
> 标签：c#, process

我想获取它在 Windows 上运行的当前应用程序的名称。

**例如，如果我使用 ie，此功能将提供“Internet Explorer”，或者如果我使用 Google chrome，则提供 Chrome ...**

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-04-17T02:10:47.610

```
System.AppDomain.CurrentDomain.FriendlyName 
```

或者可能

```
System.Reflection.Assembly.GetExecutingAssembly() 
```

或者如果您的意思是您想要活动窗口的名称，那么您应该查看；

[如何使用 c# 获取当前活动窗口的标题？](https://stackoverflow.com/questions/115868/how-do-i-get-the-title-of-the-current-active-window-using-c)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-17T02:24:50.723

您可以使用[Assembly.FullName](http://msdn.microsoft.com/en-us/library/system.reflection.assembly.fullname.aspx)

```
System.Reflection.Assembly.GetEntryAssembly().FullName; 
```

也请看看这个问题：

[如何在 C# 中获取当前可执行文件的名称？](https://stackoverflow.com/questions/616584/how-do-i-get-the-name-of-the-current-executable-in-c)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-06-28T07:15:43.447

试试这个，如果你用过 GetWindowThreadProcessId。

```
public String GetActiveFileNameTitle()
    {
        IntPtr hWnd = GetForegroundWindow();
        uint procId = 0;
        GetWindowThreadProcessId(hWnd, out procId);
        var proc = Process.GetProcessById((int)procId);
        if (proc != null)
        {
           return proc.MainModule.FileVersionInfo.ProductName;
        }

    } 
```

# php - 如何使用 Symfony Validation 验证数组键？

> ID：16050240
> 
> 赞同：17
> 
> 时间：2013-04-17T02:08:52.083
> 
> 标签：php, validation, symfony

如何使用 Symfony Validation 验证数组键？

假设我有以下内容，并且`emails`数组的每个键都是一个 ID。如何使用回调或其他一些约束（例如，正则表达式约束而不是回调）来验证它们？

```
$input = [
    'emails' => [
        7 => 'david@panmedia.co.nz',
        12 => 'some@email.add',
    ],
    'user' => 'bob',
    'amount' => 7,
];

use Symfony\Component\Validator\Validation;
use Symfony\Component\Validator\Constraints;
$validator = Validation::createValidator();
$constraint = new Constraints\Collection(array(
    'emails' => new Constraints\All(array(
        new Constraints\Email(),
    )),
    'user' => new Constraints\Regex('/[a-z]/i'),
    'amount' => new Constraints\Range(['min' => 5, 'max' => 10]),
));

$violations = $validator->validateValue($input, $constraint);
echo $violations; 
```

*（使用最新的 dev-master symfony）*

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-04-23T18:20:58.577

我将创建一个自定义验证约束，该约束对数组中的每个键值对（或仅当您想要的键）应用约束。类似于`All`约束，但验证是在键值对上执行的，而不仅仅是值。

```
namespace GLS\DemoBundle\Validator\Constraints;
use Symfony\Component\Validator\Constraint;
use Symfony\Component\Validator\Exception\ConstraintDefinitionException;

class AssocAll extends Constraint
{
    public $constraints = array();

    public function __construct($options = null)
    {
        parent::__construct($options);

        if (! is_array($this->constraints)) {
            $this->constraints = array($this->constraints);
        }

        foreach ($this->constraints as $constraint) {
            if (!$constraint instanceof Constraint) {
                throw new ConstraintDefinitionException('The value ' . $constraint . ' is not an instance of Constraint in constraint ' . __CLASS__);
            }
        }
    }

    public function getDefaultOption()
    {
        return 'constraints';
    }

    public function getRequiredOptions()
    {
        return array('constraints');
    }
} 
```

约束验证器，它将带有键值对的数组传递给每个约束：

```
namespace GLS\DemooBundle\Validator\Constraints;
use Symfony\Component\Validator\Constraint;
use Symfony\Component\Validator\ConstraintValidator;
use Symfony\Component\Validator\Exception\UnexpectedTypeException;

class AssocAllValidator extends ConstraintValidator
{
    public function validate($value, Constraint $constraint)
    {
        if (null === $value) {
            return;
        }

        if (!is_array($value) && !$value instanceof \Traversable) {
            throw new UnexpectedTypeException($value, 'array or Traversable');
        }

        $walker = $this->context->getGraphWalker();
        $group = $this->context->getGroup();
        $propertyPath = $this->context->getPropertyPath();

        foreach ($value as $key => $element) {
            foreach ($constraint->constraints as $constr) {
                $walker->walkConstraint($constr, array($key, $element), $group, $propertyPath.'['.$key.']');
            }
        }
    }
} 
```

我想，只有`Callback`将约束应用于您放置验证逻辑的每个键值对才有意义。

```
use GLS\DemoBundle\Validator\Constraints\AssocAll;

$validator = Validation::createValidator();
$constraint = new Constraints\Collection(array(
    'emails' => new AssocAll(array(
        new Constraints\Callback(array(
            'methods' => array(function($item, ExecutionContext $context) {
                    $key = $item[0];
                    $value = $item[1];

                    //your validation logic goes here
                    //...
                }
            ))),
    )),
    'user' => new Constraints\Regex('/^[a-z]+$/i'),
    'amount' => new Constraints\Range(['min' => 5, 'max' => 10]),
));

$violations = $validator->validateValue($input, $constraint);
var_dump($violations); 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-04-17T03:45:43.830

有一个回调约束。请参阅[http://symfony.com/doc/master/reference/constraints/Callback.html](http://symfony.com/doc/master/reference/constraints/Callback.html)

**更新：**

我找不到更简洁的方法来获取正在验证的当前值的键。可能有更好的方法，我没有花太多时间在这上面，但它适用于你的情况。

```
 use Symfony\Component\Validator\Constraints;
    use Symfony\Component\Validator\Context\ExecutionContextInterface;

    // ...

    $input = array(
    'emails' => array(
            7 => 'david@panmedia.co.nz',
            12 => 'some@email.add',
    ),
    'user' => 'bob',
    'amount' => 7,
    );

    // inside a sf2 controller: $validator = $this->get('validator.builder')->getValidator();
    $validator = Validation::createValidator();
    $constraint = new Constraints\Collection(array(
        'emails' => new Constraints\All(array(
                new Constraints\Email(),
                new Constraints\Callback(array('methods' => array(function($value, ExecutionContextInterface $context){
                    $propertyPath = $context->getPropertyPath();
                    $valueKey = preg_replace('/[^0-9]/','',$propertyPath);
                    if($valueKey == 7){
                        $context->addViolationAt('email', sprintf('E-Mail %s Has Has Key 7',$value), array(), null);
                    }
                })))
        )),
        'user' => new Constraints\Regex('/[a-z]/i'),
        'amount' => new Constraints\Range(array('min' => 5, 'max' => 10)),
    ));

    $violations = $validator->validate($input, $constraint);
    echo $violations; 
```

* * *

## 回答 #3

> 赞同：-2
> 
> 时间：2013-04-20T10:33:01.807

您可以使用 php 函数[array_flip](http://php.net/manual/en/function.array-flip.php)来反转键、值，并使用验证器或自定义验证器。

希望它有帮助。

最良好的问候。

* * *

## 回答 #4

> 赞同：-2
> 
> 时间：2017-10-13T08:24:29.397

有点晚了，但是给你，我的朋友：

```
use Symfony\Component\Validator\Constraints as Assert;

public function getConstraints()
{
    return [
        'employee' => [new Assert\NotBlank(), new Assert\Type("integer")],
        'terms' => [new Assert\NotBlank(), new Assert\Type("array")],
        'pivotData' => new Assert\All([
            new Assert\Type("array"),
            new Assert\Collection([
                'amount' => new Assert\Optional(new Assert\Type('double'))
            ])
        ]),
    ];
} 
```

这里有几点需要注意：

*   在上面提供的示例中，我们正在验证`pivotData`密钥。`pivotData`应该是我们要验证的额外数据数组。

*   每次我们想要验证一个数组时，我们都以 开头`new Assert\All`，这意味着我们想要验证其中的所有内容`pivotData`

*   之后，我们添加 new`Assert\Type("array")`来检查一个数组是否真的从前端传递过来。

*   而且，最重要的是，我们创建了一个`new Assert\Collection`我们一个一个地定义我们的新属性的地方，作为一个标准。在上面的示例中，我添加了一个`amount`表示 pivotData 属性的键。您可以在这里自由列出您的所有属性，它们将得到验证:)

祝你好运 ：）

# html - 在 Twitter Bootstrap 的导航按钮之间放置居中文本

> ID：16050246
> 
> 赞同：5
> 
> 时间：2013-04-17T02:09:17.090
> 
> 标签：html, css, twitter-bootstrap

Twitter Bootstrap 已对齐放置在页面两侧的导航按钮。

```
<ul class="pager">
  <li class="previous">
    <a href="#">Previous</a>
  </li>
  <li class="next">
    <a href="#">Next</a>
  </li>
</ul> 
```

我`<h3>`在这些导航链接上方有一个标题（顶部）

![之前（上），期望（下）](https://i.stack.imgur.com/aXVtV.png)

我想把这个标题放在这些按钮之间（底部）。我该怎么做，保持导航按钮对齐？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-04-17T02:16:51.737

试试这个：- [http://jsfiddle.net/Z2hH2/](http://jsfiddle.net/Z2hH2/)

```
<ul class="pager">
  <li class="previous">
    <a href="#">Previous</a>
  </li>
    <li >
        <h3 class="fillSpace">Title goes here</h3>
    </li>
  <li class="next">
    <a href="#">Next</a>
  </li>
</ul>

h3.fillSpace
{
   display:inline-block;
   margin:0;
} 
```

或者：-

```
h3.fillSpace
{
position: absolute; top:  0; right: 0; left: 0;
} 
```

# ios - Appirater 中使用的天数或使用次数是否具有优先权？

> ID：16050247
> 
> 赞同：0
> 
> 时间：2013-04-17T02:09:17.107
> 
> 标签：ios, objective-c, appirater

借助 Appirater，我们的开发人员可以要求用户对应用程序进行评分。有两种不同的设置：

```
static double _daysUntilPrompt = 15;
static NSInteger _usesUntilPrompt = 10; 
```

我的问题很简单，是否必须经过 15 天并且必须使用 10 次才能发出警报？或者它们是否具有优先级逻辑，这意味着如果一个发生在另一个之前，警报就会出现？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-17T02:16:33.193

两者都必须在它出现之前发生

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-17T02:46:03.280

您可以在[Appirater.m 的第 180 行](https://github.com/arashpayan/appirater/blob/master/Appirater.m#L180)看到自己的逻辑：

```
- (BOOL)ratingConditionsHaveBeenMet {
    if (_debug)
        return YES;

    NSUserDefaults *userDefaults = [NSUserDefaults standardUserDefaults];

    NSDate *dateOfFirstLaunch = [NSDate dateWithTimeIntervalSince1970:[userDefaults doubleForKey:kAppiraterFirstUseDate]];
    NSTimeInterval timeSinceFirstLaunch = [[NSDate date] timeIntervalSinceDate:dateOfFirstLaunch];
    NSTimeInterval timeUntilRate = 60 * 60 * 24 * _daysUntilPrompt;
    if (timeSinceFirstLaunch < timeUntilRate)
        return NO;

    // check if the app has been used enough
    int useCount = [userDefaults integerForKey:kAppiraterUseCount];
    if (useCount <= _usesUntilPrompt)
        return NO; 
```

这两个条件都需要满足。

# c# - Windows窗体文本框的透明度

> ID：16050249
> 
> 赞同：18
> 
> 时间：2013-04-17T02:09:47.483
> 
> 标签：c#, winforms, textbox, transparency, alpha

我在 C# 中使用 Windows 窗体，我需要使文本框的背景颜色透明。我有一个从 0 到 255 的轨迹栏，应该可以控制它，但我遇到了一些麻烦。我今天早些时候提出了一个问题，问了完全相同的问题，但没有成功。

这是我目前拥有的代码：

```
private void trackAlpha_ValueChanged(object sender, EventArgs e)
{
    newColor = Color.FromArgb(trackAlpha.Value, colorDialog.Color.R, colorDialog.Color.G, colorDialog.Color.B);
    colorDialog.Color = newColor; // The Windows dialog used to pick the colors
    colorPreview.BackColor = newColor; // Textbox that I'm setting the background color
} 
```

问题是绝对没有任何事情发生。关于为什么这不起作用的任何想法？

在上一个问题上，这个好人说了一些关于`SetStyle(ControlStyles.SupportsTransparentBackColor, true);`，但我不知道我应该把它放在哪里。

* * *

## 回答 #1

> 赞同：17
> 
> 时间：2013-04-17T03:19:31.047

你需要尝试这样的事情。

添加一个新的用户控件，比如**CustomTextBox**并更改

```
public partial class CustomTextBox : UserControl 
```

至

```
public partial class CustomTextBox : TextBox 
```

然后，您将收到以下错误消息，指出未定义“AutoScaleMode”。删除 Designer.cs 类中的以下行。

```
this.AutoScaleMode = System.Windows.Forms.AutoScaleMode.Font; 
```

对新添加的控件的构造函数进行如下更改。

```
public partial class CustomTextBox : TextBox
{
    public CustomTextBox()
    {
        InitializeComponent();
        SetStyle(ControlStyles.SupportsTransparentBackColor |
                 ControlStyles.OptimizedDoubleBuffer |
                 ControlStyles.AllPaintingInWmPaint |
                 ControlStyles.ResizeRedraw |
                 ControlStyles.UserPaint, true);
        BackColor = Color.Transparent;
    }
} 
```

构建，关闭自定义控件设计器（如果打开），您将能够在任何其他控件或窗体上使用此控件。

从工具箱中删除它，如下所示 [![在此处输入图像描述](https://i.stack.imgur.com/wvjMM.png)](https://i.stack.imgur.com/wvjMM.png)

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2013-04-17T02:44:21.707

创建一个继承自 TextBox 的新控件，在构造函数中设置样式以允许透明。然后使用您的新控件而不是 TextBox

在您的构造函数中执行此操作：

```
this.SetStyle(ControlStyles.SupportsTransparentBackColor, true); 
```

这将允许您的新控件具有透明的背景颜色。

您可以在此处阅读有关控件样式的更多信息；[MSDN：Control Styles](http://msdn.microsoft.com/en-us/library/system.windows.forms.control.setstyle.aspx)，这也可能有所帮助；[使用 Visual C# 从 Windows 窗体控件继承](http://msdn.microsoft.com/en-us/library/5h0k2e6x%28v=vs.80%29.aspx)

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2014-02-19T15:47:27.257

我从不喜欢为此制作自己的继承控件。所以我为私有 SetStyle 函数做了一个包装函数。

尝试使用它而不是创建自己的类？

```
public static bool SetStyle(Control c, ControlStyles Style, bool value)
{
    bool retval = false;
    Type typeTB = typeof(Control);
    System.Reflection.MethodInfo misSetStyle = typeTB.GetMethod("SetStyle", System.Reflection.BindingFlags.NonPublic | System.Reflection.BindingFlags.Instance);
    if (misSetStyle != null && c != null) { misSetStyle.Invoke(c, new object[] { Style, value }); retval = true; }
    return retval;
} 
```

`bool itWorked = SetStyle(myControl, ControlStyles.SupportsTransparentBackColor, true);`

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2014-09-03T14:53:58.990

很抱歉发现旧帖子，但是，现在一直在寻找几天来解决这个可怕的文本框不透明问题的解决方案！！！（令人惊讶的是，MSAccess 有一个检查状态来显示透明度！）

无论如何，我已经建立了一个 VB 解决方法，但是，它非常粗糙，虽然可能对很多人有所帮助，但也希望从更核心的人那里获得任何见解......

它基本上使用文本框，然后将其调整大小并替换为标签（因此现在代表一个透明的“出现”文本框。还有其他一些事情，例如在单行文本框上按 enter 时停止哔哔声。

要使用 - 创建一个新类并将所有代码粘贴到顶部，这应该创建两个自定义对象（ CTextBox 和 CLabel ） - 您只需要在表单设计中使用 CTEXTBOX。

轻松转换为 C，如果那是您的语言，但如果有任何建议，请告诉我？

```
Imports System.ComponentModel

Public Class CTextBox
Inherits TextBox
Dim _zUseEnterAsTab As Boolean = True
Dim _zUseTransparent As Boolean = False
Dim _zUseTransparentColor As Color = Color.Transparent
Dim _zUseTransparentBorderColor As Color = Color.Gray
<Description("Use the Enter Key as Tab (Stops Beeps) only for Single line TextBox"), Category("CTextBox")> _
Public Property zUseEnterAsTab() As Boolean
    Get
        Return _zUseEnterAsTab
    End Get
    Set(value As Boolean)
        _zUseEnterAsTab = value
        Me.Invalidate()
    End Set
End Property
<Description("Use Transparent TextBox"), Category("CTextBox")> _
    Public Property zUseTransparent() As Boolean
    Get
        Return _zUseTransparent
    End Get
    Set(value As Boolean)
        _zUseTransparent = value
        Me.Invalidate()
    End Set
End Property
<Description("Change the transparency to ANY color or shade or Alpha"), Category("CTextBox")> _
Public Property zUseTransparentColor() As Color
    Get
        Return _zUseTransparentColor
    End Get
    Set(value As Color)
        _zUseTransparentColor = value
        Me.Invalidate()
    End Set
End Property
<Description("Border color of the texbox when transparency used"), Category("CTextBox")> _
    Public Property zUseTransparentBorderColor() As Color
    Get
        Return _zUseTransparentBorderColor
    End Get
    Set(value As Color)
        _zUseTransparentBorderColor = value
        Me.Invalidate()
    End Set
End Property
Protected Overrides Sub OnCreateControl()
    'Again for my benifit - there may be other ways to force the transparency 
    'code at form / event startup, but this is the way i chose, any advice
    'or alternatives would be great!! :)
    If Not DesignMode Then
        'Basically don't do in design mode!
        If _zUseTransparent Then
            'Added to handle the event of textbox dissabled
            If Me.Enabled Then
                CreateMyLabel(Me)
                MakeLabelVisible(foundLabel, Me)
            End If
        End If
    End If
    MyBase.OnCreateControl()
End Sub
Protected Overrides Sub OnKeyPress(e As KeyPressEventArgs)
    If MyBase.Multiline = True Then
        MyBase.OnKeyPress(e)
    Else
        If e.KeyChar = Chr(Keys.Enter) Then
            e.Handled = True
            If zUseEnterAsTab = True Then SendKeys.Send("{tab}")
            MyBase.OnKeyPress(e)
        End If
    End If
End Sub
Protected Overrides Sub OnLeave(e As EventArgs)
    If _zUseTransparent Then
        CreateMyLabel(Me)
        MakeLabelVisible(foundLabel, Me)
    End If
    MyBase.OnLeave(e)
End Sub
Protected Overrides Sub OnEnter(e As EventArgs)
    If _zUseTransparent Then
        CreateMyLabel(Me)
        MakeTextBoxVisible(foundLabel, Me)
    End If
    MyBase.OnEnter(e)
End Sub
Dim foundLabel As CLabel = Nothing
Sub CreateMyLabel(_TxtBox As CTextBox)
    foundLabel = Nothing
    Dim l As CLabel
    If GetMyLabel("L_" & Me.Name, Me) Then
        l = foundLabel
        If Not l.Name = "L_" & Me.Name Then
            MsgBox("L_" & Me.Name)
        End If
        l.Font = _TxtBox.Font
        l.Text = _TxtBox.Text
        l.BorderColor = _zUseTransparentBorderColor
        l.BackColor = _zUseTransparentColor
        l.BorderStyle = Windows.Forms.BorderStyle.None 'Handled by paint event
    Else
        l = New CLabel
        l.Name = "L_" & _TxtBox.Name
        l.BorderColor = _zUseTransparentBorderColor
        l.BackColor = _zUseTransparentColor
        l.Size = _TxtBox.Size
        l.BorderStyle = Windows.Forms.BorderStyle.None 'Handled by paint event
        l.AutoSize = False
        l.Font = _TxtBox.Font
        l.Location = _TxtBox.Location
        l.Text = _TxtBox.Text
        l.Anchor = _TxtBox.Anchor
        _TxtBox.Parent.Controls.Add(l)
        foundLabel = l
    End If
End Sub
Function GetMyLabel(_LabelName As String, _TxtBox As CTextBox) As Boolean
    For Each ctl As Control In _TxtBox.Parent.Controls
        If ctl.Name = _LabelName Then
            foundLabel = ctl
            Return True
        End If
    Next
    Return False
End Function
Private Sub MakeLabelVisible(_Label As CLabel, _TxtBox As CTextBox)
    _Label.Location = _TxtBox.Location
    _Label.Anchor = _TxtBox.Anchor
    _Label.Size = _TxtBox.Size
    _TxtBox.Size = New Size(0, 0)
    _TxtBox.Anchor = AnchorStyles.None
End Sub
Private Sub MakeTextBoxVisible(_Label As CLabel, _TxtBox As CTextBox)
    _TxtBox.Location = _Label.Location
    _TxtBox.Anchor = _Label.Anchor
    _TxtBox.Size = _Label.Size
    _Label.Size = New Size(0, 0)
    _Label.Anchor = AnchorStyles.None
End Sub
End Class

Public Class CLabel
Inherits Label
Public BorderColor As Color = Color.Gray
Sub New()
    MyBase.FlatStyle = Windows.Forms.FlatStyle.Standard
    'Added padding as labels shifted text upwards
    'NOT tested on all fonts etc, purely for my sources
    MyBase.Padding = New Padding(0, 3, 0, 0)
End Sub
Protected Overrides Sub OnMouseDown(e As MouseEventArgs)
    Dim _TxtBox As CTextBox = Nothing
    Dim _TxtBoxName As String = Microsoft.VisualBasic.Right(Me.Name, Len(Me.Name) - 2)
    For Each elem As Control In Me.Parent.Controls
        If elem.Name = _TxtBoxName Then
            _TxtBox = elem
            Exit For
        End If
    Next
    _TxtBox.Select()
    MyBase.OnMouseDown(e)
End Sub
Protected Overrides Sub OnMouseEnter(e As EventArgs)
    Cursor = Cursors.IBeam
    MyBase.OnMouseEnter(e)
End Sub
Protected Overrides Sub OnMouseLeave(e As EventArgs)
    Cursor = Cursors.Default
    MyBase.OnMouseLeave(e)
End Sub
Protected Overrides Sub OnPaint(e As PaintEventArgs)
    MyBase.OnPaint(e)
    ControlPaint.DrawBorder(e.Graphics, Me.DisplayRectangle, Color.Gray, ButtonBorderStyle.Solid)
End Sub
Private Sub MakeLabelVisible(_Label As CLabel, _TxtBox As CTextBox)
    _Label.Size = _TxtBox.Size
    _TxtBox.Size = New Size(0, 0)
    _Label.Anchor = _TxtBox.Anchor
    _TxtBox.Anchor = AnchorStyles.None
End Sub
Private Sub MakeTextBoxVisible(_Label As CLabel, _TxtBox As CTextBox)
    _TxtBox.Size = _Label.Size
    _Label.Size = New Size(0, 0)
    _TxtBox.Anchor = _Label.Anchor
    _TxtBox.Anchor = AnchorStyles.None
End Sub
End Class 
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2020-10-27T23:31:42.027

就这一行，它对我来说非常有效！

```
textBox1.BackColor = this.BackColor; 
```

来源：[https ://www.codegrepper.com/code-examples/csharp/set+textbox+colour+to+transparent+c%23](https://www.codegrepper.com/code-examples/csharp/set+textbox+colour+to+transparent+c%23)

* * *

## 回答 #6

> 赞同：-3
> 
> 时间：2015-12-11T01:25:10.780

```
this.SetStyle(ControlStyles.SupportsTransparentBackColor, true); 
```

# c# - 将用户控件中的事件引发到 MainWindow

> ID：16050250
> 
> 赞同：0
> 
> 时间：2013-04-17T02:09:56.440
> 
> 标签：c#, wpf

首先抱歉，因为我看到另一个问题，但都是答案。和问题。不够清楚 [如何从 WPF 中的用户控件引发父事件？](https://stackoverflow.com/questions/3065256/how-can-i-raise-a-parent-event-from-a-user-control-in-wpf)

在我的 MainWindow.xaml 中，我有一个正确的面板

```
<local:RightSideContent x:Name="RightPanel"  Grid.Column="1"> 
```

所以在 MainWindow.xaml.cs 中，如果我想向这个面板发起一个事件，我编写了这样的代码：

```
public delegate void Event1();
public MainWindow()
{
    this.InitializeComponent();
    Event1 obj = new Event1(this.RightPanel.func);
    obj();
    // Insert code required on object creation below this point.        
} 
```

在 RightPanel 类中，我声明了函数*func*

问题是：如果我在 RightPanel 类中，我如何将事件引发到 MainWindow，因为我不能写这样的东西。RightPanel.func .....

顺便说一句，我在另一个没有 xaml 文件的类中，如果我想向 UserControl 引发事件，我该怎么办？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-17T03:43:51.033

抱歉，我没有足够的代表发表评论来澄清，但正如我所看到的，你在这里尝试做三件事。

1.  您正试图从一些不在 MainWindow 中的代码触发 MainWindow 上的事件。在这种情况下，您需要确保您有对 MainWindow 的引用，并且 MainWindow 上有一个将触发该事件的公共方法。

2.  您希望 MainWindow 处理来自 RightPanel 的点击等。在这种情况下，您只需在 MainWindow 上放置一个 Button.Click="blah" （或任何事件）属性，它就会捕获从其下方未处理的任何按钮单击。事实上，您甚至可以在较低的位置处理它，并确保您设置 EventArgs 以使其有效地未处理，以便您也可以在较高的位置处理它。

3.  您希望能够处理 RightPanel 中生成的自定义事件，其方式类似于您处理上面第 2 项中的按钮单击场景的方式。在这种情况下，我会引导您访问[http://msdn.microsoft.com/en-us/library/ms742806.aspx](http://msdn.microsoft.com/en-us/library/ms742806.aspx)，这是 WPF 中路由事件的文档，您应该能够弄清楚如何创建您的从那里拥有自己的 RoutedEvent。

# c++ - Mandelbrot的每个像素计算如何划分到不同的节点？

> ID：16050254
> 
> 赞同：2
> 
> 时间：2013-04-17T02:10:10.683
> 
> 标签：c++, c, multithreading, parallel-processing, mandelbrot

![在此处输入图像描述](https://i.stack.imgur.com/evbLc.png)

我的问题是我应该使用什么数据结构将工作分配给每个线程并从中获取计算值。我想到的第一件事是使用包含 x、y 和 iterate_value 的结构填充向量 [0] .. 向量 [63999]（对于 800x800 像素）。将这些向量传递给每个节点->然后将给定向量进一步划分给每个核心（Os-thread）->然后将给定向量进一步划分给每个线程。有没有其他可能的方式来发送和接收这些值？并且如果我以向量方式执行此操作，我应该通过值传递向量还是通过引用传递向量，在这种情况下哪个会更好？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-17T02:32:35.350

mandelbrot 集合的不同点需要不同的时间来计算（靠近边缘的点更昂贵），因此给每个工人偶数个像素将使它们中的一些比其他点完成得更快。

将图像分成小矩形（图块）。使用多线程队列创建工作列表，并用图块填充它。每个工作线程循环，从工作列表中挑选一个图块并提交结果，直到工作列表为空。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-17T02:27:33.857

像素是均匀分布的，那么为什么要发送每个像素的坐标呢？只需告诉每个节点其左下像素的 x 和 y 坐标、像素之间的间距和像素数。这样，您的工作单元规格是一个小的常数大小。

就更大的设计而言，拥有比物理内核更多的工作线程来运行是没有意义的。每个内核的多个线程的上下文切换只会降低性能。

# jquery - 删除元素时未触发鼠标离开

> ID：16050256
> 
> 赞同：4
> 
> 时间：2013-04-17T02:10:23.033
> 
> 标签：jquery

## [示例小提琴](http://jsfiddle.net/mnpenner/Sjt2u/)

**JavaScript**

```
$('#btn').on('mouseover', function() {
    $('#tt').show();
}).on('mouseleave', function() {
    $('#tt').hide();
}).on('click', function() {
    $(this).remove();
}); 
```

**HTML**

```
<button id="btn">press me</button>
<div id="tt">tooltip</div> 
```

基本上，当您在光标仍在其上方时移除元素时，该`mouseleave`事件永远不会触发。我想这是有道理的，因为如果元素消失了，事件/绑定也消失了。

但是我们如何解决它呢？

当然，我也可以`$('#tt').hide();`参加这个`click`活动，但我希望有一个更通用的解决方案。我在现实生活中的例子要复杂一些，而且我并不总是知道元素什么时候会被移除。

没有任何`ondestroy`事件或任何我可以挂钩的东西，它会在它被移除之前触发，是吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-17T02:20:46.940

我已使用[此解决方案](https://stackoverflow.com/a/10172676/1846192)中的代码更新了您的[jsFiddle](http://jsfiddle.net/Sjt2u/2/)。

```
(function($){
  $.event.special.destroyed = {
    remove: function(o) {
      if (o.handler) {
        o.handler()
      }
    }
  }
})(jQuery)

$('#btn').on('mouseover', function() {
  $('#tt').show();
}).on('mouseleave', function() {
  $('#tt').hide();
}).on('click', function() {
  $(this).remove();
}).on('destroyed', function() {
  $('#tt').hide();
}) 
```

或者，您可以绑定到 DOMNodeRemoved 突变事件，但[W3 规范](http://www.w3.org/TR/DOM-Level-3-Events/#event-type-DOMNodeRemoved)指出，[由于性能和跨浏览器支持问题，](https://developer.mozilla.org/en-US/docs/DOM/Mutation_events)不推荐使用此事件类型。

```
$(document).bind('DOMNodeRemoved', function(e) {
  if(e.target.id=='btn') {
    $('#tt').hide();
  }
}); 
```

在较新的浏览器（Chrome 18+、Firefox 14+）中，支持[MutationObserver](https://dvcs.w3.org/hg/domcore/raw-file/tip/Overview.html#mutation-observers)对象，该对象旨在替换突变事件。在您的情况下，它可以这样工作：

```
var target = document.querySelector('body');

var observer = new MutationObserver(function(mutations) {
  mutations.forEach(function(mutation) {  
    if(mutation.removedNodes[0]!=undefined) {
      if(mutation.removedNodes[0].id=='btn') {
        $('#tt').hide();              
      }
    }
  });    
});

var config = { attributes: true, childList: true, characterData: true };

observer.observe(target, config); 
```

这是Code Review 上一个问题的[链接](https://codereview.stackexchange.com/questions/18269/simple-dom-mutation-abstraction)，其中有人正在编写一个 DOM MutationObserver shim，当 MutationObserver 对象不可用时，它会依赖于突变事件。

# c# - 如何将命名参数列表传递给打开的 Windows 窗体应用程序

> ID：16050273
> 
> 赞同：1
> 
> 时间：2013-04-17T02:12:23.183
> 
> 标签：c#, parameter-passing

我有一个 Windows 窗体应用程序让我们称之为 B 现在我有另一个应用程序。让我们称之为A

A 将作为新进程启动 B 现在我想将命名参数列表传递给 B 并在 B 中使用它们我该怎么做？

我的意思是示例参数列表

```
{job:"computer engineer",age:"32",experience:"3 years"} 
```

这些参数列表也应该是可选的。有时我可能会传递 5 个参数，有时是 0

我将如何在 B 应用程序启动时读取这些参数

那么这样做的方法是什么？谢谢你

C＃

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-17T02:28:05.783

假设您使用 Process.Start 调用您的“B”进程，以下应该可以工作：

```
System.Diagnostics.Process.Start(string fileName, string arguments) 
```

并且您的“B”进程主线程应该接受一个数组来容纳可能的参数，然后您可以对其进行迭代。

```
static void Main(string[] args)
{
    //your code to decipher arguments here
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-17T02:30:56.270

我可以想到两种方法来做到这一点。

首先是使用命令行参数。如果您将进程（从命令行）称为：

```
your.exe -job "computer engineer" -age 32 -experience "3 years" 
```

`arguments`然后，您可以通过在流程的启动选项中设置来在代码中复制它。然后，您必须设置您的流程来查找所有这些标志，记住它们都可以是可选的，等等。

第二个选项（这更灵活一点）是创建一个包含您传递的值的文件，并从您启动的进程中读取它。您可以制作此 XML 或直接值。

**编辑**：这是第一个选项的示例

```
Process p = new Process();
ProcessStartInfo startInfo = new ProcessStartInfo();
startInfo.FileName = "your exe path";
startInfo.Arguments = "your argument list";
p.StartInfo = startInfo;
p.Start(); 
```

我不想告诉你如何格式化你的参数字符串；这应该由您决定。但是，我会推荐使用[一个库](http://cmdline.codeplex.com/)，它可能会使接收端的解析更容易一些。

# .htaccess - Htaccess 通过掩码重定向

> ID：16050277
> 
> 赞同：0
> 
> 时间：2013-04-17T02:12:54.453
> 
> 标签：.htaccess

请帮助我编写 htaccess 以从[http://mysite.com/www.anyword.txt](http://mysite.com/www.anyword.txt)重定向到[http://mysite.com/anyword.txt](http://mysite.com/anyword.txt)。我怎么能做到？anyword 是一个变量，我很少有带有这种掩码的文件。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-17T06:05:31.823

**编辑：（根据@anubhava下面的评论）**

```
RewriteEngine On
RewriteRule ^www\.([^.]+\.txt)/?$ /$1 [R,L,NC] 
```

如果可行，请将`R`标志更改为`R=301`- 您永远不应该使用后者来测试您的服务器是否处于活动状态。

# jquery - jquery淡入淡出不显示

> ID：16050279
> 
> 赞同：0
> 
> 时间：2013-04-17T02:13:14.440
> 
> 标签：jquery, html, function

嘿伙计们，我正在尝试用 jquery 解决一些问题，而我是一个用 javascript 完成的菜鸟。

因此，让我们首先向您展示我的代码：

```
<html>
<head>
    <style>
        #circle { background: #f00; width: 200px; height: 200px; border-radius: 100%; display: none;}
    </style>
    <script src="scripts/jquery-1.9.1.js"></script>
    <script>
    function showAllSlowly()
    {
        $('#circle').fadeIn('slow', function() {
            //complete
        });
        alert("Showing elements");
    };
    </script>
</head>

<body onLoad=showAllSlowly()>

<div id="circle"></div>
</body> 
```

当我在 $('#circle') 之前设置警报时，我可以看到它，但之后看不到，所以我想我的问题出在该函数内。我使用的是来自 jquery 网站的完全相同的一个。

知道我做错了什么吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-17T02:38:52.353

或者，您可以在加载文档时将该函数作为立即调用的函数运行。

链接：http: [//jsfiddle.net/RUwXZ/](http://jsfiddle.net/RUwXZ/)

```
$(document).ready(function(){

(function showAllSlowly() {
        $('#circle').fadeIn('slow', function() {
            alert("complete");
        });
    })();

}); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-17T02:31:35.593

我似乎无法重现您遇到的错误。看到这个小提琴 - [http://jsfiddle.net/2SCRv/](http://jsfiddle.net/2SCRv/)

在#circle 选择器之前、之后或之内放置警报都可以正常工作。你能提供一个重现错误的 jsFiddle 示例吗？

使用 onLoad 很好，尽管更简单的方法是使用文档就绪功能，您很可能已经熟悉该功能，并且可以达到相同的结果。

```
$(document).ready(function(){

    $('#circle').fadeIn('slow', function() {
           alert("Showing elements");
    });            
}); 
```

# oracle - JFreeChart 使用数字查询 ORACLE

> ID：16050280
> 
> 赞同：0
> 
> 时间：2013-04-17T02:13:27.193
> 
> 标签：oracle, jfreechart, bar-chart

晚上好！

我有一个名为 SWIMMER 的表，需要查找（在名为 TIME 的 NUMERIC 字段中）给定时间间隔内某些值的出现次数（我使用的是 Oracle10g）。我需要展示类似的东西：

**23 高于或等于 TIME 显示值为 300
的 Horizo​​ntalBar 22,3 高于或等于 TIME 次要或等于 23 显示值为 140
的 Horizo​​ntalBar 21,6 高于或等于 TIME 次要或等于 22,3 显示值为 15
的 Horizo​​ntalBar 20,9 高于或等于TIME 次要或等于 21,6 显示值为 3 的 Horizo​​ntalBar**

它可能有一个查询有这样的回报？我怎么能组装那个查询？（注意：符号是次要或相等，我不能在这里发布，因为它每次都会出错）

最好的祝福，

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-17T05:20:25.863

尝试这样的事情（[这是一个 sqlfiddle](http://www.sqlfiddle.com/#!4/02d93/8)）：

```
select case 
           when time >= 23 then '23 =< TIME'
           when time < 23 and time >= 22.3 then '23 > TIME >= 22,3'
           when time < 22.3 and time >= 21.6 then '22,3 > TIME >= 21,6'
           when time < 21.6 and time >= 20.9 then '21,6 > TIME >= 20,9'
           else '20,9 > TIME'
        end   || ' with value '|| count(*) v
from your_table
group by case 
           when time >= 23 then '23 =< TIME'
           when time < 23 and time >= 22.3 then '23 > TIME >= 22,3'
           when time < 22.3 and time >= 21.6 then '22,3 > TIME >= 21,6'
           when time < 21.6 and time >= 20.9 then '21,6 > TIME >= 20,9'
           else '20,9 > TIME'
         end 
```

结果：

```
21,6 > TIME >= 20,9 with value 8 
20,9 > TIME with value 4 
22,3 > TIME >= 21,6 with value 6 
23 > TIME >= 22,3 with value 15 
23 =< TIME with value 66 
```

* * *

**更新：**正如 DavidAldrige 建议的那样，您可以有一个子查询：

```
select intrvl || ' with value '|| count(*) v
from
(select case 
           when time >= 23 then '23 =< TIME'
           when time < 23 and time >= 22.3 then '23 > TIME >= 22,3'
           when time < 22.3 and time >= 21.6 then '22,3 > TIME >= 21,6'
           when time < 21.6 and time >= 20.9 then '21,6 > TIME >= 20,9'
           else '20,9 > TIME'
        end   intrvl, time
from t)
group by intrvl 
```

[这是另一个演示](http://www.sqlfiddle.com/#!4/02d93/11)

# com - CoCreateInstance 需要很多时间

> ID：16050281
> 
> 赞同：1
> 
> 时间：2013-04-17T02:13:28.740
> 
> 标签：com, regasm

在注册（RegAsm）我的 C# COM 可见类之后，我发现`CoCreateInstance(__uuidof(myclass))`仅第一次需要很多时间，随后在同一客户端进程中的尝试立即得到解决。知道为什么要花时间吗？NGen 对我来说不是一个选择。

我的 COM 服务器在 C# 中，客户端在 MFC/ATL

```
CComPtr<namespace::Imyclass> obj;
hrx = obj.CoCreateInstance(__uuidof(namespace::myclass)); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-17T07:08:33.937

第一次调用`CoCreateInstance`必须加载到进程中并初始化 .NET 运行时。然后，您的 DLL 必须被加载、“验证”并编译成机器代码（尽管即时有助于加快启动速度）。.NET 运行时还必须解析程序集的元数据，然后动态生成和编译“COM 可调用包装器”（[http://msdn.microsoft.com/en-us/library/f07c8z1c.aspx](http://msdn.microsoft.com/en-us/library/f07c8z1c.aspx)），它们是在非托管 COM 世界和托管 .NET 运行时之间架起桥梁的代理。您的代码可能使用的任何其他库也需要加载、验证并可能编译成机器代码（如果不是 NGEN 的话）。

这本质上是一个昂贵的过程。你提到的延误并非闻所未闻。

我不相信你可以做很多事情来加快速度。我建议您考虑是否可以通过在启动后不久创建一个对象来在程序生命周期的早期受到打击。它不会让它更快，但它可能会显着改善用户体验。如果您的程序不能容忍延迟，那么您不应该使用 .NET 来编写 COM 对象（更具体地说，您根本不应该在您的进程中使用 .NET。这不是使用 COM 的问题；它是加载.NET的问题）

顺便说一句，这是在 .NET 中编写 shell 扩展的原因之一……“非常不鼓励”。请参阅有关此主题的最新帖子，其中也涉及 .NET 的启动性能：http: [//blogs.msdn.com/b/oldnewthing/archive/2013/02/22/10396079.aspx](http://blogs.msdn.com/b/oldnewthing/archive/2013/02/22/10396079.aspx)

（这就是为什么我之前问过您正在运行什么样的客户端。已经运行 .NET 托管代码的客户端依赖于 .NET 运行时并且不会受到这些延迟的影响）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-17T06:28:31.737

第一次调用`CoCreateInstance`可能必须查询注册表和文件系统，加载适当的代码，允许它初始化，最后调用工厂来创建您要求的实例（如果可以找到它）。

第二次调用极大地受益于这些前面的步骤。如果第一次调用成功，则代码已经加载并初始化，它所要做的就是第二次调用工厂。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-11-25T14:21:08.227

如果此延迟仅适用于首次加载*（计算机启动后）*，则这是由加载所有库引起的。启动后的第一次延迟*（或长时间不使用 .NET）*总是很慢。（见米切利回答）

每次加载也可能导致延迟。今天我发现互联网连接也会导致延迟。

测量值：

1.  无以太网且无 WiFi 连接延迟：94 毫秒 (Win7) / 1.5 (WinXP)
2.  Windows XP：互联网连接*（使用代理和非标准网关；并非所有端口都允许）*：4-5 秒（WinXP）
3.  连接到以太网而不是不连接到 Internet：10 秒（Win7）
4.  连接到以太网后不久*（Windows 测试 Internet 连接；网络图标上的蓝色圆圈）*：30 秒（Win7）
5.  互联网连接*（使用代理和非标准网关；只允许少数端口）*：30 秒（Win7）

*非标准网关：每台计算机允许的 TCP 端口和连接不同（WinXP 和 Win7 不同）。

在 Windows 7 (x64) 和 WinXP 上测试。我对它进行了测试，因为它来自客户的抱怨，并定位到**CoCreateInstance**的延迟加载的库在 c# 中并已签名*（使用 snk 签名的程序集和用于签署可执行文件的标准证书）*。

另请参阅：[http ://social.msdn.microsoft.com/Forums/sqlserver/en-US/cda45e39-ed11-4a17-a922-e47aa2e7b325/ce-40-delay-when-cocreateinstance-on-pc-without-internet ?forum=sqlce](http://social.msdn.microsoft.com/Forums/sqlserver/en-US/cda45e39-ed11-4a17-a922-e47aa2e7b325/ce-40-delay-when-cocreateinstance-on-pc-without-internet?forum=sqlce)

# database - 基于文本文件或数据库的聊天室？不仅是消息而且不仅是一对一

> ID：16050286
> 
> 赞同：1
> 
> 时间：2013-04-17T02:13:58.873
> 
> 标签：database, json, performance, file, chat

我正在开发一个网络聊天，我必须决定使用什么策略。我可以使用文本文件或数据库来存储来自和去往用户的数据。

是的，我看过人们在谈论它的其他帖子，但我还有一些问题，而不仅仅是“哪个更快”（这也是我的问题之一，但不是唯一的问题）。我会更仔细地指出问题。

首先，许多用户将共享同一个房间并同时与所有其他人聊天。许多房间将同时开放（同一用户可以同时在两个房间）。

在这个系统中，消息不是唯一来来去去的东西。状态（离开、在线、打字等）、更新（“别跟我说话，我度过了我生命中最糟糕的一天”或“我是新来的”）、退出和登录、回复其他消息，而消息本身就是将要出现的那种流量。某处。

我希望 Javascript 以 JSON 格式接收数据。

我希望这个聊天能够被很多人同时使用！将每 5 或 10 秒发送一次请求。

一些数据肯定会存储在数据库中（用户会话、它的 id、用户的 id、关于房间的信息、它的创建时间等），但是它将如何处理动态数据流仍有待决定。

换句话说，即使它不是有史以来最复杂的聊天，也不是最简单的。

如果选择的策略是文本文件，则文件分发示例： 路径：/root/room/1（到房间 1） 文件：1000001、100002、100003（此房间中的用户）

路径：/root/room/2 文件：1000002、100005、100010

...

来自用户 1000001 在房间 1 中发送的消息和任何其他类型的更新（访问、状态、个人更新等）将保存在路径 /root/room/1/100002（用户 2）和 /root/room/1/100003（用户 3) 等等。

每个用户都会为该房间读取他自己的文件并在读取后将其删除，因此每次他们读取文件时只有新数据会出现在该文件中。

数据以 JSON 格式写入，因此无需进一步编码。

问题：1-考虑到大量数据正在写入和从这些文本文件中读取，最好的选择是什么，使用数据库保存文件然后进行查询（SELECT FROM 消息（以及来自更新和来自访问, 和其他任何东西) WHERE id > #number) 每 5 或 10 秒，对于每个房间中的每个用户，还是使用文本文件？

2- 如果数据库是最好的选择，我应该用 JSON 格式编写它吗？我会使用一个名为 JSON 的字段，因为我不想失去在该数据库中进行查询的能力。或者我可能会创建一个新表，连接用户、房间和 JSON，并在其他表中再次写入以保持元组格式。

3-如果文件是最好的选择，您是否会考虑在每次将数据保存在文件中时复制数据库中的数据（以防万一您想查询或其他）？

# javascript - Javascript document.getElementById 未从下拉列表返回完整值

> ID：16050290
> 
> 赞同：0
> 
> 时间：2013-04-17T02:14:29.997
> 
> 标签：javascript

我的下拉列表从我的 MySQL 数据库中正确填充。

当我选择一个单词的标记（例如“Home”）时，startname 和 endname 变量写入正确，我遇到的问题是，当我在下拉列表中有一个带有空格的值时，只返回第一个单词。

因此，如果“中央公园”是下拉列表中的值，则变量设置为“中央”

这是下拉列表的代码，calcroute函数的javascript如下：

```
 <div id="control_panel" style="float:right;width:80%;text-align:left;padding-top:20px">
    <div style="margin:20px;border-width:2px;">
    <b>Start:</b>
    <select id="start">
<?php
  //php code to get data from mysql
    $prodQuery4=mysql_query("SELECT * FROM markers");
    while ($t=mysql_fetch_array($prodQuery4)) {
  //foreach/while to iterate through elements
    echo '<option value='.$t['name'].'>'.$t['name'].'</option>';
    }
  //end of foreach/while
?>    </select>
<br>
    <b>End:</b>
    <select id="end">
 <?php
  //php code to get data from mysql
    $prodQuery4=mysql_query("SELECT * FROM markers");
    while ($t=mysql_fetch_array($prodQuery4)) {
  //foreach/while to iterate through elements
    echo '<option value='.$t['name'].'>'.$t['name'].'</option>';
    }
  //end of foreach/while
?>    </select>
    <b>Waypoints:</b> 
    <select multiple id="waypoints">
<?php
  //php code to get data from mysql
    $prodQuery4=mysql_query("SELECT * FROM markers");
    while ($t=mysql_fetch_array($prodQuery4)) {
  //foreach/while to iterate through elements
    echo '<option value='.$t['name'].'>'.$t['name'].'</option>';
    }
  //end of foreach/while
?>    </select>
      <input type="submit" onclick="calcRoute();">
    </div> 
```

Javascript函数：

```
function calcRoute() {
        var startname = document.getElementById('start').value;
        console.log(startname)
        var endname = document.getElementById('end').value;
        var waypts = [];
        var checkboxArray = document.getElementById('waypoints');
        for (var i = 0; i < checkboxArray.length; i++) {
          if (checkboxArray.options[i].selected == true) {
              $.ajax({
                    url:'phpsearch2.php', 
                    dataType:'json', 
                    data:{name:checkboxArray[i].value},
                    async:false,
                    success:function (result)
                    {
    //              console.log(result)
                    waypoint = new google.maps.LatLng(result[0].lat, result[0].             lng);
            }});
            waypts.push({
                location:waypoint,
                stopover:true});
          }
        }

$.ajax({
    url:'phpsearch2.php', 
    dataType:'json', 
    data:{name:startname},
    async:false,
    success:function (result)
{
//  console.log(result)
    origin = new google.maps.LatLng(result[0].lat, result[0].lng);
}});

$.ajax({
    url:'phpsearch2.php', 
    dataType:'json', 
    data:{name:endname},
    async:false,
    success:function (result)
{
//  console.log(result)
    end = new google.maps.LatLng(result[0].lat, result[0].lng);
}});

    var request = {
            origin: origin,
            destination: end,
            waypoints: waypts,
            optimizeWaypoints: true,
            travelMode: google.maps.DirectionsTravelMode.WALKING
        };

            directionsService.route(request, function(response, status) {
        document.write('<b>'+ origin +'</b>');
          if (status == google.maps.DirectionsStatus.OK) {
            directionsDisplay.setDirections(response);
            var route = response.routes[0];
            var summaryPanel = document.getElementById('directions_panel');
            summaryPanel.innerHTML = '';
            // For each route, display summary information.
            for (var i = 0; i < route.legs.length; i++) {
              var routeSegment = i + 1;
              summaryPanel.innerHTML += '<b>Time for a Walkabout </b><br>';
              summaryPanel.innerHTML += '<b>From ' + startname + '   </b>';
              summaryPanel.innerHTML += '<b>to ' + endname + '('+ route.legs[i].distance.text +')</b><br>';
//            summaryPanel.innerHtml += '<b>' + waypts.toString() + '   </b>';
          } 
          }
        });
     }
//} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-17T02:27:30.737

您没有引用您的选项值属性，因此空格表示属性值的结尾

```
echo '<option value="'.htmlspecialchars($t['name']).'">'.htmlspecialchars($t['name']).'</option>';
                  //^                                ^ 
```

# ios - 如何将手势从 UIPinchGestureRecognizer 处理程序转换为 UIPanGestureRecognizer 处理程序？

> ID：16050300
> 
> 赞同：1
> 
> 时间：2013-04-17T02:15:20.780
> 
> 标签：ios, touch, uigesturerecognizer, uipangesturerecognizer, uipinchgesturerecognizer

我有一个用于缩放视图的 UIPinchGestureRecognizer 的处理程序方法。我想要做到的是，当屏幕上有两次触摸以进行捏合手势时，如果抬起手指，剩下的手指将由平移手势识别器管理。有没有办法做到这一点？我想不出一种将一个手势从一个处理程序传递给另一个处理程序的正确方法。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-17T06:22:21.220

这应该很容易。创建两个手势识别器。UIPinchGestureRecognizer 和 UIPanGestureRecognizer。不要忘记成为两者的代表！

```
 pinchRecognizer = [[UIPinchGestureRecognizer alloc] initWithTarget:self action:@selector(scaleHandler:)];
    [pinchRecognizer setDelegate:self];
    [pinchRecognizer setDelaysTouchesBegan:NO];
    [pinchRecognizer setDelaysTouchesEnded:NO];
    [pinchRecognizer setCancelsTouchesInView:NO];
    panRecognizer = [[UIPanGestureRecognizer alloc] initWithTarget:self action:@selector(panHandler:)];
    [panRecognizer setMaximumNumberOfTouches:2];
    [panRecognizer setMinimumNumberOfTouches:1];
    [panRecognizer setDelegate:self];
    [panRecognizer setDelaysTouchesBegan:NO];
    [panRecognizer setDelaysTouchesEnded:NO];
    [panRecognizer setCancelsTouchesInView:NO]; 
```

现在实现手势委托的以下方法。

```
- (BOOL)gestureRecognizer:(UIGestureRecognizer *)gestureRecognizer shouldRecognizeSimultaneouslyWithGestureRecognizer:(UIGestureRecognizer *)otherGestureRecognizer{
return YES; 
```

}

这将使两个处理程序都被触发，因此当您释放其中一个手指时它会平移，但是当您同时拥有它们时它会捏住。

# python - 对象未在烧瓶路线中传递给函数

> ID：16050301
> 
> 赞同：1
> 
> 时间：2013-04-17T02:15:21.370
> 
> 标签：python, function, flask, decorator, routes

我有一个函数和一个烧瓶路线设置。但是，当我转到“simplepage”时，出现错误“NameError：未定义全局名称'aaa'”。为什么没有任何对象被传递给 testfun？这是由于 app.route 装饰器，还是由于烧瓶？我可以让所有的对象都传递给 testfun 吗？我的实际代码要复杂得多，需要传递更多的对象，但创建这个简化的场景是为了说明我的问题。

```
def testfun():
    b=aaa

@app.route("/simplepage/", methods=['GET'])
def simplepage():
    aaa=1
    testfun()
    return flask.render_template('page.html') 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-17T04:11:59.197

这是由于[Python 的作用域规则](https://stackoverflow.com/a/292502/322909)（正如@johnthexiii 指出的那样） -`testfun->aaa`绑定到全局作用域，因为在其中的任何`aaa`地方都没有声明命名的变量`testfun`，也没有封闭作用域（即`testfun`没有在另一个函数或类中声明）。

您需要`aaa`作为参数传递给`testfun`：

```
testfun(aaa) 
```

如果`testfun`需要太多参数，有几种方法可以干掉代码：

*   **使用多个函数：**如果`testfun`正在做大量工作，则将其分解为多个返回数据中间转换的函数：

    ```
    def start_test(arg1, arg2, arg3):
        # do stuff with args
        return result_stage_1

    def continue_test(arg3, arg4, arg5):
        # do stuff with args
        return result_stage_2

    def finalize_test(arg7, arg8):
        # do stuff with args
        return real_result 
    ```

*   **使用关键字参数：**如果需要可变数量的参数并且`testfun` *不能分解*，您可以使用关键字参数来简化函数的调用：

    ```
    def testfun(arg1=None, arg2=None, arg3=None, arg4=None,
                  arg5=None, arg6=None, arg7=None, arg8=None):
        # do stuff with args

    # call it as so
    args = {"arg1": "some args", "arg5": "have defaults"}
    if complex_condition:
        args["arg3"] = 17
    elif another_condition:
        args["arg7"] = 10

    testfun(**args) 
    ```

*   **用类（或闭包）封装状态和行为：**如果上述方法都不适合您，那么您可能需要离开无状态函数的领域并创建类或创建闭包的函数来保留您的状态并使您能够将行为修改为需要。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-17T02:55:13.200

基本上发生的事情是这样的

```
def t():
    print aaa 

def s():
    aaa = "hi"
    t()

s() 
```

Python`aaa`首先在本地范围内查找，然后在任何包装函数范围内查找，然后在全局范围内查找，最后在内置函数中查找。由于`s`函数作用域不是任何这些东西，python 会抛出一个未定义的错误，因为它找不到`aaa`.

一种解决方案是声明`aaa`为全局。

```
def t():
    print aaa

def s():
    global aaa
    aaa = "hi"
    t()

s() 
```

# wordpress - 将页面数据解析到侧边栏 - wordpress

> ID：16050314
> 
> 赞同：0
> 
> 时间：2013-04-17T02:16:42.077
> 
> 标签：wordpress

访问当前页面 html 数据并获取所有特定标签并将它们作为链接放入侧边栏的正确程序是什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-18T05:04:49.407

我不确定你对 php 的熟练程度，但我会给你概述一下你可能想要做什么。

首先，您需要 HTML。我假设您在页面上运行它（在 page.php 文件或 single.php 文件或类似文件中），这意味着您可以访问全局变量 $post，其中包含页面的 html它。要访问它，您可以使用辅助函数`get_the_content()`，这将返回正在显示的 html。
接下来，您需要解析它以获取 h2 标签。一个简单的正则表达式可以处理这个问题，比如`<h2[^>]*>(.*)</h2>`. 重要的是要记住这个正则表达式非常挑剔，所以要正确格式化你的 html，不要多行 h2s。所以现在你有了 html，并用正则表达式解析它以获得 h2s。现在您需要从结果中生成列表，并将其添加到页面内容的顶部。有很多方法可以做到这一点，最简单的方法是在模板文件的正确位置运行代码。

当然，可能有更好的方法可以做到这一点，我建议你看一个常见问题插件（如果这就是它的用途），或者手动做列表（因为这个系统可能会被破坏），或者可能使用自定义帖子类型；但对于你的问题，我就是这样做的。

# javascript - Mailto：作为变量的主题

> ID：16050318
> 
> 赞同：0
> 
> 时间：2013-04-17T02:17:09.147
> 
> 标签：javascript

** 编辑：谢谢，Shivan Raptor！我有点忘了“encodeURIcomponent()”！**

出于某种原因，我正在制作一个 Javascript 小书签，可以快速通过电子邮件发送我的两封电子邮件中的一封。（我将只显示缩进的 JS 以使其更容易，因为我可以转换它。）它为主题和正文使用了几个变量，这些变量由提示输入。

```
var address = confirm("School email?");

        var sub = prompt("What is the subject?");

        var bod = prompt("What would you like the message to read?");

        if(address == true) {
            window.location.assign("mailto:areiter@hightechhigh.org?Subject=sub&body=bod");
            alert("Message sent to 'areiter@hightechhigh.org'.");
        }
        else {
            window.location.assign("mailto:burningphantom13@gmail.com?Subject=sub&body=bod");
            alert("Message sent to 'areiter@hightechhigh.org'.");
        } 
```

唯一的问题是变量“sub”和“bod”分别是主语和正文的样子。因此，代码打开 Outlook，并准备好发送电子邮件，正文中包含主题“sub”和“bod”。有没有办法让 Javascript 代码的主题和主体成为变量的值？请记住，它将是一个书签，因此不能有任何 HTML。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-17T02:24:14.910

您可以更换：

```
window.location.assign("mailto:areiter@hightechhigh.org?Subject=sub&body=bod"); 
```

和：

```
window.location.assign("mailto:areiter@hightechhigh.org?Subject=" + encodeURIComponent(sub) + "&body=" + encodeURIComponent(bod)); 
```

这样变量`sub`和`bod`将根据用户输入是动态的。`encodeURIComponent`对参数进行编码，所以如果用户输入特殊字符，代码不会崩溃。

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2013-04-17T02:24:27.580

更改代码如下，

```
 var address = confirm("School email?");

    var sub = prompt("What is the subject?");

    var bod = prompt("What would you like the message to read?");

    if(address == true) {
        window.location.assign("mailto:areiter@hightechhigh.org?Subject=" + sub + "&body=" + bod);
        alert("Message sent to 'areiter@hightechhigh.org'.");
    }
    else {
        window.location.assign("mailto:burningphantom13@gmail.com?Subject=" + sub + "&body=" + bod);
        alert("Message sent to 'areiter@hightechhigh.org'.");
    } 
```

希望这会奏效:)

# java - java错误信息不显示

> ID：16050326
> 
> 赞同：0
> 
> 时间：2013-04-17T02:18:24.587
> 
> 标签：java

我在验证这部分代码时遇到问题，错误消息显示不正确，如果我只按回车键程序将退出，感谢任何帮助。

```
 strInput1="";
    strInput1 = JOptionPane.showInputDialog(null,
            "2013 SHIPPING OPTIONS\n\n(O)vernight shipping-$10.00"+
            "\n(T)wo-Day shipping-$7.50\n(P)riority shipping-$5.00"+
            "\n(N)o cost shipping"+
            "\n\nPlease select a shipping option(O,P,T or N) ",
            "Wiliam's Party Store",3);
            if(!strInput1.equals(""))
                JOptionPane.showMessageDialog(null, 
                "You MUST enter O,o,T,t,P,p,N,n",
                "ERROR!!!",0);
            cShipping=(strInput1.toUpperCase().charAt(0));

        while((!strInput1.equals(""))&& !(cShipping=='P')|(cShipping=='T')||(cShipping=='O'))
     {
            JOptionPane.showMessageDialog(null, 
            "You MUST enter O,o,T,t,P,p,N,n",
            "ERROR!!!",0);
            strInput1 = JOptionPane.showInputDialog(null,
            "2013 SHIPPING OPTIONS\n\n(O)vernight shipping-$10.00"+
            "\n(T)wo-Day shipping-$7.50\n(P)riority shipping-$5.00"+
            "\n(N)o cost shipping"+
            "\n\nPlease select a shipping option(O,P,T or N) ",
            "Wiliam's Party Store",3);
            if (!strInput1.equals(""))
            cShipping=(strInput1.toUpperCase().charAt(0));
                    strInput1 = "N";
    }
    PO1.setShipping(cShipping); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-17T02:27:30.363

对于多个否定表达式，请使用逻辑`&&`运算符：

```
while (!strInput1.equals("") && cShipping != 'P' && 
                                       cShipping != 'T' && cShipping != 'O') 
```

运算符将`||`表达式短路，因此`while`即使`strInput1`为空，循环也可以保持活动状态。也`cShipping`永远不会在第二个`while`循环中分配，这将阻止循环退出。

*旁白：*一个[`do-while`循环](http://docs.oracle.com/javase/tutorial/java/nutsandbolts/while.html)可以允许两个循环合并为一个。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-17T02:51:27.283

所以你的麻烦是验证你的代码，而不是代码本身？我知道我们的第一直觉太急于纠正您的代码，但是我想提供一个我认为更有益的替代解决方案。

我认为解决您的麻烦的方法是重构您的代码，首先学习良好的编码实践和风格。这将有助于您将来进行任何开发工作。

一个很好的起点是[这里（维基百科）](http://en.wikipedia.org/wiki/Coding_conventions)，他们讨论编码约定和重构。

在您粘贴的代码中，我看到拼写错误、“在此处输入代码”一行以及您的逻辑缺陷。除此之外，还不清楚您的最后一个“if”语句在哪里包括第二行：虽然缩进表明它可能，但缺少大括号可以确保其他情况。

```
if (!strInput1.equals(""))
        cShipping=(strInput1.toUpperCase().charAt(0));
                strInput1 = "N"; 
```

应该是以下..（如果这确实是您的意图）

```
if (!strInput1.equals(""))
        cShipping=(strInput1.toUpperCase().charAt(0));
strInput1 = "N"; 
```

附带说明一下，通过使用模块化、耦合甚至更多的错误检查/捕获来改进您的代码是值得的。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-17T02:40:42.597

您`|`的代码中有一个是按[位或](http://en.wikipedia.org/wiki/Bitwise_OR#OR)而不是逻辑或`||`

# java - 如何在 Java 中生成类似于 YouTube 的视频标识符字符串的字符串？

> ID：16050327
> 
> 赞同：1
> 
> 时间：2013-04-17T02:18:26.803
> 
> 标签：java, identifier

## 编辑：我改写了这个问题。

我注意到在 YouTube，每个视频都有一个唯一的字符串，例如 1cru2fzUlEc 来标识自己。

我想知道如何在 Java 中有效地做同样的事情。

感谢您的任何意见。

干杯!

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-17T12:34:50.743

正如 Patashu 已经指出的那样：这些字符串没有加密，它们只是无法猜测或计算的唯一标识符。

这可以在 Java 中使用[UUID实现来](http://en.wikipedia.org/wiki/Universally_unique_identifier#Version_4_.28random.29) [实现](http://docs.oracle.com/javase/1.5.0/docs/api/java/util/UUID.html#randomUUID%28%29)。这些 UUID 比 youtube 的长，但原理是一样的。

这些 UUID 的安全性对于几乎所有场合都应该足够好，正如[这里](https://stackoverflow.com/questions/2513573/how-good-is-javas-uuid-randomuuid)所讨论的那样。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2015-09-03T22:32:52.537

使用 apache commons-lang

```
import org.apache.commons.lang.RandomStringUtils;

public static final int ID_LENGTH = 11;

public String generateUniqueId() {
    return RandomStringUtils.randomAlphanumeric(ID_LENGTH);
} 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-04-17T03:42:15.330

youtube 等网站不会“加密”视频的标识符。制作视频时，它会为其生成一个随机字符串，并且该随机字符串（在确保它是唯一的之后）是视频的标识符。

# java - 动画启动屏幕后未显示主要活动

> ID：16050331
> 
> 赞同：0
> 
> 时间：2013-04-17T02:19:28.813
> 
> 标签：java, android, eclipse

我试图做一个动画启动画面，问题是在启动画面之后没有显示 MainActivity。我添加了一些代码，但它使它崩溃。你能帮我吗。在启动屏幕活动的代码下方

```
 public class SplashScreenActivity extends Activity {
 public void onAttachedToWindow() {
        super.onAttachedToWindow();
        Window window = getWindow();
        window.setFormat(PixelFormat.RGBA_8888);
    }
  /** Called when the activity is first created. */
   public void onCreate(Bundle savedInstanceState) {
       super.onCreate(savedInstanceState);
       setContentView(R.layout.main);
       CountDown _tik;
       _tik=new CountDown(3000,3000,this,MainActivity.class);// It delay th
  screen for 3 second and after that switch to my MainActivity
       _tik.start();
       StartAnimations();
       }

   private void StartAnimations() {
   Animation anim = AnimationUtils.loadAnimation(this, R.anim.alpha);
   anim.reset();
   LinearLayout l=(LinearLayout) findViewById(R.id.lin_lay);
   l.clearAnimation();
   l.startAnimation(anim);

   anim = AnimationUtils.loadAnimation(this, R.anim.translate);
   anim.reset();
   ImageView iv = (ImageView) findViewById(R.id.logo);
   iv.clearAnimation();
   iv.startAnimation(anim);

   } 
```

倒计时代码下方

```
public class CountDown extends CountDownTimer{
private Activity _act;
private Class _cls;
public CountDown(long millisInFuture, long countDownInterval,Activity act,Class cls) {
super(millisInFuture, countDownInterval);
_act=act;
_cls=cls;
}
@Override
public void onFinish() {
_act.startActivity(new Intent(_act,_cls));
_act.finish();
}
@Override
public void onTick(long millisUntilFinished) {

} 
```

最后一个是我想要在启动画面之后显示的活动

```
 public class MainActivity extends Activity {

@Override
protected void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.activity_main);
}

@Override
public boolean onCreateOptionsMenu(Menu menu) {
    // Inflate the menu; this adds items to the action bar if it is present.
    getMenuInflater().inflate(R.menu.main, menu);
    return true;
} 
```

请注意。动画效果很好。唯一的问题是当我试图在启动画面后获取 MainActivity 时。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-17T03:27:24.167

您是否错过了设置动画侦听器？我认为你必须从动画监听器的 onAnimationEnd 方法调用你的主要活动。可能这会帮助你[问题](https://stackoverflow.com/questions/5474923/onanimationend-is-not-getting-called-onanimationstart-works-fine) 会帮助你。

# mips - MIPS：整数乘除法

> ID：16050338
> 
> 赞同：18
> 
> 时间：2013-04-17T02:20:52.617
> 
> 标签：mips

所以我正在 MIPS 中构建一个计算器程序，我正在尝试编写乘法和除法函数。

目前我在一个循环中读取整数，如下所示：

```
li $v0, 5
syscall 
```

然后最终调用我的函数`multi`，`divi`具体取决于用户想要执行的操作。

因此，假设我在`$a0`and中有整数，那么乘以和/或除以的`$a1`干净方法是什么？我一直在网上四处寻找，但我找不到一个干净简单的方法来做到这一点，因为我必须将结果答案发回`$a0``$a1``$a0``$a1``$v0`

* * *

## 回答 #1

> 赞同：30
> 
> 时间：2013-04-17T13:19:45.100

要相乘，请使用`mult`有符号乘法和`multu`无符号乘法。请注意，两个 32 位数字相乘的结果是 64 位数字。如果您想要返回结果，`$v0`这意味着您假设结果将适合 32 位。

32 个最高有效位将保存在`HI`特殊寄存器中（可通过`mfhi`指令访问），32 个最低有效位将保存在`LO`特殊寄存器中（可通过`mflo`指令访问）：

例如：

```
li $a0, 5
li $a1, 3
mult $a0, $a1
mfhi $a2 # 32 most significant bits of multiplication to $a2
mflo $v0 # 32 least significant bits of multiplication to $v0 
```

除法，`div`用于有符号除法和`divu`无符号除法。在这种情况下，`HI`特殊寄存器将保存余数，而`LO`特殊寄存器将保存除法的商。

例如：

```
div $a0, $a1
mfhi $a2 # remainder to $a2
mflo $v0 # quotient to $v0 
```

# php - 检查目录是否存在，创建目录

> ID：16050339
> 
> 赞同：2
> 
> 时间：2013-04-17T02:20:54.713
> 
> 标签：php

我对此有点麻烦。以为会更容易，结果却很沮丧。我要做的只是有一个文本字段，我可以在其中键入新目录的名称，检查该目录是否存在，如果不存在则创建它。我发现大约 50 个其他人的代码几乎完全相同，所以我认为我的代码是正确的，但我不断根据“if”语句获取 Directory 存在。

最终我想把它绑定到我的文件上传脚本中。

这是insert.php

```
<form action="" method="post" enctype="multipart/form-data" name="form1" id="form1">
  <p>
    <label for="directory">Directory:</label>
    <input value="<?php if ($_POST && $errors) {
  echo htmlentities($_POST['directory'], ENT_COMPAT, 'UTF-8');
}?>" type="text" name="directory" id="directory" />
  </p>
  <p>
    <input type="submit" name="insert" id="insert" value="insert" />
  </p>
</form> 
```

这是post.php

```
try {
if (isset($_POST['insert'])) {
    $directory = $_POST['directory'];
    $photo_destination = 'image_upload/';
    $path = $photo_destination;
    $new_path = $path . $directory;
    $mode = 0755;
    if(!is_dir($new_path)) {
        echo "The Directory {$new_path} exists";
        } else {
            mkdir($new_path , 0777);
            echo "The Directory {$new_path} was created";
            }
        }
} 
```

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2013-04-17T02:27:54.420

改变这个：

```
if(!is_dir($new_path)) {
    echo "The Directory {$new_path} exists";
    } 
```

对此：

```
if(is_dir($new_path)) {
    echo "The Directory {$new_path} exists";
    } 
```

试着告诉我结果:)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-17T02:26:38.057

而不是`is_dir`在 if 块中使用，您可以使用`file_exists`. 因为 file_exists 是检查文件是否存在的函数。同样你也可以参考[http://php.net/manual/en/function.file-exists.php](http://php.net/manual/en/function.file-exists.php)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-17T02:58:00.650

尝试

```
if( is_dir( $new_path ) ) {
    echo "The Directory {$new_path} exists";
} 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2016-11-25T15:33:12.663

让某人想创建一个子文件夹，文件夹下
有一个年份名称，然后他/她想在一个 名为的下创建另一个子文件夹。**`/uploads`**
**`/uploads/<year_name_folder>/`**
**`project_number`**

```
$yearfolder = date('y');
if (!file_exists('uploads/'.$yearfolder)) {
        mkdir("uploads/".$yearfolder);
    }
*// Folder named by year has been created.*

$project_number = Any Unique field ,Come from database or anywhere !
$target_directory = mkdir("uploads/".$yearfolder."/".$project_number);

*// project number wise folder also created.
// If project number is not unique do check like year folder. I think every project number is unique.* 

$target_dir = "uploads/$yearfolder/$project_number/";
*//my target dir has created where my document or pic whatever will be uploaded.*

Now Upload ! Woo 
$target_file = $target_dir.($_FILES["file"]["name"]); 
```

# php - 此 foreach 语句仅将最后一行添加到数组

> ID：16050340
> 
> 赞同：1
> 
> 时间：2013-04-17T02:20:55.563
> 
> 标签：php, arrays, foreach

如何更改此 foreach 语句，以便它将构建一个包含特定列中所有行的数组？它目前仅将“first_name”列中的最后一行添加到数组中。

```
try {  
    $stmt = $conn->prepare("SELECT * FROM student");  
    $stmt->execute();
} catch(PDOException $e) {
    echo $e->getMessage();
} 
$rows = $stmt->fetchAll(PDO::FETCH_ASSOC);
$first_names = array();
foreach ($rows as $row) { 
  $first_names = $row['first_name'];
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-17T02:22:49.017

你忘了括号。你需要这样做：

```
$first_names[] = $row['first_name']; 
```

否则，您将 $first_names 变量重新创建为单个字符串，并在循环的每次迭代中覆盖它。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-17T02:23:02.120

您当前正在覆盖需要将其填充到数组中的变量：

```
$first_names[] = $row['first_name']; 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-17T02:24:35.617

你可以试试这个

```
array_push($first_names, $row['first_name']); 
```

或者

```
$first_names[] = $row['first_name']; 
```

您的代码中的问题是您一次又一次地覆盖自己的变量。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-04-17T02:27:48.093

你必须为你的变量添加括号`

```
$first_names[] = $row['first_name'];` 
```

我也可以建议一种更清洁的方法吗？

您似乎在查询中使用了 try/catch，并且可能在大多数查询中也使用了它......

您实际上应该使用

```
$pdo = new PDO("mysql:host=xxxxx;dbname=xxxxxxxx", $username, $password);
$pdo->setAttribute(PDO::ATTR_ERRMODE, PDO::ERRMODE_EXCEPTION); // < - - - THIS 
```

这样现在您就不需要在代码中添加 try/catch 了。

通常，如果查询失败，您不想做其他事情，您只需要使用 try/catch。

[在此处](https://stackoverflow.com/questions/15990857/reference-frequently-asked-questions-about-pdo#15990858)和[此处](https://stackoverflow.com/questions/272203/pdo-try-catch-usage-in-functions)阅读此内容

享受 ：）

# java - 填充 BigInteger 的二进制表示

> ID：16050343
> 
> 赞同：2
> 
> 时间：2013-04-17T02:21:15.543
> 
> 标签：java

只是想知道如何/是否可以将字符串填充到左侧。我看到使用 format() 但我不知道在我的案例中输入什么参数。

我最初从 BigInteger 开始，`Message`然后说`message.toString(2)`将 BigInteger 的二进制表示形式作为字符串。但在这种情况下，我想检查长度是否是 8 的倍数，如果没有将字符串填充到下一个 8 的倍数的长度。

因此，在我的情况下，在我`message.toString(2)`调用该字符串的长度`plaintext`为 63 之后，我想通过在前面添加一个零来将其填充到长度 64。

任何帮助将不胜感激！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-17T02:26:20.140

您可以像这样计算要添加到左侧的零的数量：

```
int numZeros = 8 - str.length() % 8; 
```

如果`numZeros`不是 8，您可以像这样填充字符串：

```
if (str.length() % 8 != 0) {
    str = "00000000".substring(str.length() % 8) + str;
} 
```

这是[关于 ideone 的演示](http://ideone.com/PVVFp8)。

# image - kineticjs 正多边形 setFillPatternImage 对齐问题

> ID：16050351
> 
> 赞同：0
> 
> 时间：2013-04-17T02:22:52.857
> 
> 标签：image, polygon, kineticjs, fill, polyfills

我正在使用 kineticjs 正多边形（在本例中为六边形），并使用 setFillPatternImage 填充图像。这是有效的。我正在创建一个动态实现，因此我需要根据多边形的当前大小来缩放源图像。这涉及计算 setFillPatternOffset 和 setFillPatternScale，因为正多边形的尺寸是相对于中心的。关于填充图像的参考点，我找不到明确的文档，也没有缩放因子是否应该使用半径作为宽度和高度比的代理。以下代码会导致多边形上的图像错位。任何人都知道fillPatternImage的对齐规则是什么？

```
imageObj.onload = function() {
    var whex = hexagon.getRadius() * 2;
    var xratio = whex / imageObj.width;  
    var yratio = whex / imageObj.height;

    hexagon.setFillPatternImage(imageObj);
    hexagon.setFillPatternOffset(-whex/2,-whex/2);
    hexagon.setFillPatternScale( [ xratio, yratio ] );
}; 
```

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-18T11:30:30.697

看来我是多虑了。在设置偏移量时，kineticjs 不会使用目标多边形的宽度，而是为您处理该偏移量的缩放。因此，您只需设置偏移量：

```
hexagon.setFillPatternOffset(-imageObj.width/2, -imageObj.height/2); 
```

# javascript - 在多个字段中进行 Twitter Bootstrap 的 typead 搜索

> ID：16050356
> 
> 赞同：4
> 
> 时间：2013-04-17T02:23:23.637
> 
> 标签：javascript, twitter-bootstrap, bootstrap-typeahead, typeahead.js

默认情况下，[typeahead 插件](http://twitter.github.io/bootstrap/javascript.html#typeahead)使用单个数据源来获取结果。我想要的是它在多个字段中搜索，所以如果说，我有：

```
var items = [
    {'title': 'Acceptable', 'description': 'Good, but not great'}
] 
```

它将搜索`title`和`description`字段，最好是通过 AJAX。

这个插件可以实现吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-17T02:36:50.873

Typeahead 不支持在没有两个调整的情况下使用 JSON 对象。Github 中对此的拉取请求很少，我[自己也提交了一个](https://github.com/twitter/bootstrap/pull/7298)，但是目前您必须手动覆盖`select`and `render`。此外，您还必须覆盖`highlighter`、`matcher`、`sorter`和`updater`，但这些可以通过传递给预输入的选项来完成。

```
var typeahead = control.typeahead({ /* ... */ }).data('typeahead');

// manually override select and render
//  (change attr('data-value' ...) to data('value' ...))
//  otherwise both functions are exact copies
typeahead.select = function() {
    var val = this.$menu.find('.active').data('value')
    this.$element.val(this.updater(val)).change()
    return this.hide()
};
typeahead.render = function(items) {
    var that = this

    items = $(items).map(function (i, item) {
        i = $(that.options.item).data('value', item)
        i.find('a').html(that.highlighter(item))
        return i[0]
    });

    items.first().addClass('active')
    this.$menu.html(items)
    return this
}; 
```

如果您需要其他人的帮助，请告诉我，但要点是：

```
control.typehead({
    matcher: function (item) {
        var lcQuery = this.query.toLowerCase();
        return ~item.title.toLowerCase().indexOf(lcQuery)
            || ~item.description.toLowerCase().indexOf(lcQuery);
    }
}; 
```

我也有一个与我提出的拉取请求相关的[JFiddle 示例](http://jsfiddle.net/Mtxkn/15/)，但是在没有接受拉取请求的情况下，排序功能在 2.3.1 甚至 3.x 中都不存在，因此您必须完全覆盖`sorter`才能有效重复我在`matcher`上面所做的（在排序时检查两者）。

至于 AJAX 调用，您可以重写`source`传入的选项中的方法以获取 AJAX 功能。通过不返回`source`调用，它假定第二个参数`process,`将被调用并带有结果。

```
control.typehead({
    minLength: 3,
    source: function(query, process) {
        $.ajax({
            url: url + encodeURIComponent(query),
            type: 'GET',
            success: process,
            error: function() { /* ... */ }
        });
    }
}); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-02-13T23:35:55.197

Typeahead 在 v10.3 中添加了对多字段搜索的支持 [https://github.com/twitter/typeahead.js/pull/811](https://github.com/twitter/typeahead.js/pull/811)

用法：
`datumTokenizer: Bloodhound.tokenizers.obj.whitespace('title', 'description'),`

# python - 在没有 Nans 的情况下组合 DataFrame

> ID：16050358
> 
> 赞同：1
> 
> 时间：2013-04-17T02:23:31.313
> 
> 标签：python, pandas

我有两个df。一个将值映射到 ID。另一个具有这些 ID 的多个条目。我想要一个带有第一个数据帧的 df ，其值分配给相应的 ID。

```
 df1 = 
    Val1   Val2  Val3
x   1000    2     0
y   2000    3     9
z   3000    1     8

df2=
      foo          ID    bar
0    something     y      a
1    nothing       y      b
2    everything    x      c
3    who           z      d

result=
      foo          ID    bar    Val1     Val2     Val3
0    something     y      a     2000      3        9
1    nothing       y      b     2000      3        9
2    everything    x      c     1000      2        0
3    who           z      d     3000      1        8 
```

我已经尝试过合并和加入（显然不正确），但是当我这样做时我得到了一堆 NaN。看来我在每个备用 ID 上都得到了 NaN。我也尝试过按 ID 索引两个 DF，但这似乎也无济于事。我显然错过了一些我猜是核心功能的东西，但我无法理解它。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-17T02:35:34.647

`merge`并且`join`都可以为您提供所需的结果 DataFrame。由于您的 DataFrame 之一是索引（按 ID），而另一个只有一个整数索引，`merge`因此是合乎逻辑的选择。

合并：

```
# use ID as the column to join on in df2 and the index of df1 
result = df2.merge(df1, left_on="ID", right_index=True, how="inner") 
```

加入：

```
df2.set_index("ID", inplace=True)  # index df2 in place so you can use join, which merges by index by default
result = df2.join(df1, how="inner") # join df1 by index 
```

# java - 协助 Java 方法

> ID：16050359
> 
> 赞同：0
> 
> 时间：2013-04-17T02:23:34.270
> 
> 标签：java

我对在哪里使用以下方法感到困惑：

```
initialize(alpha);
print(alpha); 
```

我做了下面的程序，我得到了我想要的信息，但我不知道如何使用这些方法来更改代码但得到相同的输出。也许是我看得太多了？任何帮助将不胜感激。

```
import java.util.*;

public class ProgEx_Ch9_No1{

static Scanner console = new Scanner(System.in);    

public static void main(String[] args){

    double[] alpha = new double[50];

    for(int i=0; i<alpha.length; i++){

        alpha[i] = Math.pow(1,2);
        System.out.println("Alpha[" + i + "]: " + alpha[i]);

        if(i < 25){
            alpha[i] = Math.pow(1,2);
            System.out.println("Alpha[" + i + "]: " + alpha[i]);
        }
        else{
            alpha[i] = i*3;
            System.out.println("Alpha[" + i + "]: " + alpha[i]);
        }
    }

    for(int i=0; i<alpha.length; i++){
        System.out.print(alpha[i] + " ");
        if ((i + 1)%10 == 0)
            System.out.println();

}

}
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-17T02:31:03.937

这听起来像是一个关于重构的问题，所以你可能有这样的方法：

```
public static double[] initialize(double[] alpha)
{
    for(int i=0; i<alpha.length; i++)
    {
        alpha[i] = Math.pow(1,2);
        System.out.println("Alpha[" + i + "]: " + alpha[i]);

        if(i < 25)
        {
            alpha[i] = Math.pow(1,2);
            System.out.println("Alpha[" + i + "]: " + alpha[i]);
        }
        else
        {
            alpha[i] = i*3;
            System.out.println("Alpha[" + i + "]: " + alpha[i]);
        }
    }

    return alpha;
} 
```

然后，您可以从 main 调用此方法：

```
public static void main(String[] args)
{
    double[] alpha = new double[50];
    alpha = initialize(alpha);
    ....
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-17T02:32:34.910

我认为您正在寻找类似的东西：

```
public static void main(String[] args)
{
    double[] alpha = initialize();

    print(alpha);        

}

private static double[] initialize() {

    double[] alpha = new double[50];

    for(int i=0; i<alpha.length; i++)
    {
        alpha[i] = Math.pow(1,2);
        System.out.println("Alpha[" + i + "]: " + alpha[i]);

        if(i < 25)
        {
            alpha[i] = Math.pow(1,2);
            System.out.println("Alpha[" + i + "]: " + alpha[i]);
        }
        else
        {
            alpha[i] = i*3;
            System.out.println("Alpha[" + i + "]: " + alpha[i]);
        }
    }
    return alpha;
}

public static void print(double[] alpha) {
    for(int i=0; i<alpha.length; i++)
    {
        System.out.print(alpha[i] + " ");
        if ((i+ 1)%10 == 0)
            System.out.println();
    }
} 
```

# compiler-errors - 如何在编译时为 -lfl 修复丢失的 ld 库？

> ID：16050362
> 
> 赞同：10
> 
> 时间：2013-04-17T02:23:44.343
> 
> 标签：compiler-errors, compiler-construction, dependencies, bison, flex-lexer

我正在尝试将我`.spl`的文件翻译成 C 文件（因为没有编译器）。我有一个示例“Hello World”.spl 文件，我已经下载了[莎士比亚编程语言](http://shakespearelang.sourceforge.net/report/shakespeare/) `.tar`并将其解压缩，但我不知道下一步该做什么。我似乎在任何文档中都找不到说明。任何人都可以帮忙吗？

编辑：

当我输入时`make -f "Makefile"`，我得到以下输出：

```
bison --verbose -d grammar.y
gcc -O2 -Wall -c grammar.tab.c
gcc -O2 -Wall -c makescanner.c
gcc makescanner.o -O2 -Wall -o makescanner
./makescanner include > scanner.l
flex -Cem -t scanner.l > scanner.c
scanner.l:600: warning, rule cannot be matched
gcc -O2 -Wall -c scanner.c
<stdout>:5823: warning: ‘yyunput’ defined but not used
gcc -O2 -Wall -c strutils.c
gcc grammar.tab.o scanner.o strutils.o -O2 -Wall -lfl -o spl2c
ld: library not found for -lfl
collect2: ld returned 1 exit status
make: *** [spl2c] Error 1 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-11-29T11:07:38.093

错误：

> `ld: library not found for -lfl`

意味着您缺少作为[flex library](https://en.wikipedia.org/wiki/Flex_(lexical_analyser_generator))一部分的库。

要检查你是否已经安装了 flex 库，你可以使用 locate 来管理它：

```
locate libfl.a 
```

**操作系统**

如果你没有它，你可以安装 install flex （如果你使用的是[brew](http://brew.sh/)）：

```
brew install flex 
```

如果您仍然遇到问题，您可以尝试在 make 过程中手动传递以下变量，例如：

```
LDFLAGS="-L/usr/local/Cellar/flex/*/lib" CPPFLAGS="-I/usr/local/Cellar/flex/*/include" make -f "Makefile" 
```

或者：

```
MAKEFLAGS="-j8 -L/usr/local/Cellar/flex/*/lib -I/usr/local/Cellar/flex/*/include" make -f "Makefile" 
```

最终通过修改`DYLD_FALLBACK_LIBRARY_PATH`环境。

您可以通过执行来查看传递了哪个环境`brew --env`。

注意：确保您将根据您的环境更改路径。

有关的：

*   [Dylibs 和 OS X](https://stackoverflow.com/questions/10820981/dylibs-and-os-x)

**Linux**

在大多数流行的 Linux 发行版上，您可以通过以下方式安装它：

```
apt-get install flex 
```

有关的：

*   [RHEL 上缺少 libfl.a 文件](http://www.linuxquestions.org/questions/linux-software-2/libfl-a-file-missing-on-rhel-709005/)

* * *

### OS X（自制）

或者使用 Homebrew 安装莎士比亚：

```
brew install shakespeare -v 
```

哪个应该检测您的所有依赖项。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2015-04-12T06:25:06.093

问题是作者决定将他们的程序与几乎没有用的 libfl 库链接，因此它不包含在某些 flex 发行版中（尤其是 MacOS 上的那个）。

事实证明，libfl 中只定义了两个函数——`main`和`yywrap`. in libfl`main`几乎从未使用过，也`yywrap`可能不使用，因为它所做的只是 return `1`。

事实证明，您可以很容易地修复代码：

1.  编辑文件`include/user_code_top.metaflex`并将该行添加`%option noyywrap`到末尾。

2.  编辑`Makefile`并`-lfl`从链接行中删除（只需搜索字符串`-lfl`并删除这 4 个字符）

现在您应该能够构建它（尽管`scanner.l`如果您之前运行 make 并遇到失败，您可能需要删除该文件，因为 Makefile 无法检测到它需要在编辑 metaflex 文件后重新构建）。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-17T12:18:50.517

您想使用 command 运行名为“Makefile”的文件`make -f "Makefile"`，如果您 `ar` `gcc` `flex` `ranlib` `tar` `bison` 的终端中有这些命令，您应该没问题。
您可以通过键入命令的名称然后`--help`进入终端来测试您是否有命令。

然后您可以使用`spl2c`（现在已出现在您的 SPL 文件夹中）与您的代码一起制作一个 .c 文件，然后您可以`gcc`使用 spl.h 将其放入以制作一个 .o 文件，您最终可以`gcc`使用 libspl 再次放入该文件.a 制作最终的编译程序。

以防万一，将文件放入`gcc`如下：
第一遍：`gcc programname.c spl.h -o programname.o`
第二遍：`gcc programname.o libspl.a -o compiledprogramname`

如果您想了解更多信息，您可以发表评论，希望这会有所帮助（甚至有效）。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-05-04T03:01:46.110

如果您使用的是 Mac，显然 OSX 不包含 flex 所需的库，这就是导致错误的原因：`library not found for -lfl`

但是，应该有一个等效的替代品可以使用，您只需要更改 Makefile 中的一行。你应该改变这一行：

```
$(CC) $^ $(CCFLAGS) -ll -o $@ 
```

对此：

```
$(CC) $^ $(CCFLAGS) -lfl -o $@ 
```

之后，再次尝试运行 make 并查看是否获得更好的结果。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2015-04-11T23:11:46.003

实际上，我在 OS X Yosemite 上遇到了同样的问题。

```
make -f "Makefile"
bison --verbose -d grammar.y
gcc -O2 -Wall -c grammar.tab.c
grammar.y:915:42: warning: illegal character encoding in string literal
      [-Winvalid-source-encoding]
  ...converter by Jon <C5>slund and Karl Hasselstr<F6>m.           *\n");
                      ^~~~                        ~~~~
1 warning generated.
gcc -O2 -Wall -c makescanner.c
gcc makescanner.o -O2 -Wall -o makescanner
./makescanner include > scanner.l
flex -Cem -t scanner.l > scanner.c
scanner.l:600: warning, rule cannot be matched
gcc -O2 -Wall -c scanner.c
<stdout>:5822:17: warning: unused function 'yyunput' [-Wunused-function]
    static void yyunput (int c, register char * yy_bp )
                ^
<stdout>:5867:16: warning: function 'input' is not needed and will not be
      emitted [-Wunneeded-internal-declaration]
    static int input  (void)
               ^
2 warnings generated.
gcc -O2 -Wall -c strutils.c
gcc grammar.tab.o scanner.o strutils.o -O2 -Wall -lfl -o spl2c
ld: library not found for -lfl
clang: error: linker command failed with exit code 1 (use -v to see invocation)
make: *** [spl2c] Error 1 
```

**解决方案**

更改后我能够制作“Makefile”：

```
spl2c: grammar.tab.o scanner.o strutils.o
  $(CC) $^ $(CCFLAGS) -lfl -o $@ 
```

至

```
spl2c: grammar.tab.o scanner.o strutils.o
  $(CC) $^ $(CCFLAGS) -ll -o $@ 
```

与此同时，我安装了 flex 库，但我不确定它是否有帮助。如果我的解决方案在没有 flex 库的情况下无法运行，您可以使用以下方法简单地安装它：

```
brew install flex 
```

（这里是如何获得`brew`：[http](http://brew.sh) ://brew.sh ）

# ruby-on-rails-3.2 - Sorcery 的 current_user 方法在登录生产后直接返回 false

> ID：16050363
> 
> 赞同：1
> 
> 时间：2013-04-17T02:23:48.593
> 
> 标签：ruby-on-rails-3.2, sorcery

我对魔法宝石有点问题。当我登录到我的应用程序时，控制器成功登录，然后将我重定向到另一个页面（我可以确定登录凭据是正确的，就好像它们不是登录页面操作而不是重定向一样地方）。但是，当应用程序尝试加载此页面时，Sorcery 的`requires_login`方法失败，因为`current_user`返回 false（然后触发`not_authenticated`并引导我回到首页）。

这仅在生产中发生，如果我在开发中运行该站点，则一切正常。我已经尝试删除所有其他`before_filters`运行的，但仍然遇到同样的问题，所以它不存在。

登录由以下控制器操作处理（我认为其中没有任何责任，但以防万一）：

```
# user_sessions_controller.rb
def create
  logout
  @user = login(params[:email], params[:password])
  if @user
    @user.assign_locale(params[:locale])
    flash[:success] = "Log in successful."
    if can? :read, Organisation
      redirect_to some_path
    else
      redirect_to another_path
    end
  else
    flash.now[:error] = "Unrecognised email/password combination"
    render "new"
  end
end 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-29T02:08:35.513

这完全是我自己创造的问题。我正在我自己的机器上测试生产，没有 ssl，并且有

```
secure: Rails.env.production? 
```

设置为我的`session_store`选项之一，这意味着没有提供 Sorcery 所需的 cookie。

# list - 特定大小或更大/更少的模式匹配列表

> ID：16050364
> 
> 赞同：20
> 
> 时间：2013-04-17T02:24:07.583
> 
> 标签：list, scala, pattern-matching

有没有办法在Scala中指定一个与大小更大（或更小）或等于某个值的列表匹配的模式？

例如，如果我想对所有大小为 3 或更小的列表应用相同的操作：

```
list match {
    case Nil => op(list) 
    case x :: Nil => op(list)
    case x :: y :: Nil => op(list)
    case x :: y :: z :: Nil => op(list)
    case x :: tail => other(list)
} 
```

有没有办法将这种情况减少到两种情况？

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2013-04-17T02:52:56.517

是的，尽管您需要颠倒案件的顺序：

```
list match {
  case l @ (_ :: _ :: _ :: _) => other(l)
  case l => op(l)
} 
```

请注意，我已经将一个新变量绑定`l`到模式中的列表而不是引用`list`，并且我在`_`不需要变量时使用了该变量。我建议坚持这两种做法，但如果没有它们，答案将完全相同。

* * *

## 回答 #2

> 赞同：13
> 
> 时间：2013-04-17T08:24:59.160

如果您坚持使用模式匹配（也许您想包含更多*匹配情况*？），您可以为其使用**保护条件**：

```
list match {
    case l if(l.size <= 3) => op(l)
    case l => other(l)
} 
```

* * *

## 回答 #3

> 赞同：6
> 
> 时间：2013-04-17T03:14:25.023

一个普通的旧 if / else 有什么问题？

```
if (list.length >= minimumLength)
  longer(list)
else
  shorter(list) 
```

* * *

## 回答 #4

> 赞同：4
> 
> 时间：2013-04-17T06:41:18.307

你也可以这样做：

```
list.splitAt(len) match {
   case (xs, Nil) => other(xs)
   case (_, _) => op(list)
} 
```

`O(len)`因此，即使列表很长，复杂性也是`len`决定因素。

上述调用`op`if `list.size < len`else 调用`other`

# python - 美丽的汤类型错误和正则表达式

> ID：16050373
> 
> 赞同：3
> 
> 时间：2013-04-17T02:24:47.300
> 
> 标签：python, regex, beautifulsoup

我正在尝试查找给定页面上的所有电子邮件并使用正则表达式匹配它们。我正在使用 BeautifulSoup 来获取所有标签

```
email_re = re.compile('[A-Za-z0-9\.\+_-]+@[A-Za-z0-9\._-]+\.[a-zA-Z]*')

email = soup.findAll("a")
for j in email:
    email = j.string
    for match in email_re.findall(email):
        outfile.write(match + "\n")
        print match 
```

但是，当我运行我的脚本时，它的这一部分会得到一个 TypeError: expected string or buffer。我认为这是因为 email 是 BeautifulSoup 对象，而不是 python 字符串。我尝试使用 str() 或**str** () 将其转换为字符串，并且都返回另一个错误：UnicodeEncodeError: 'ascii' codec can't encode character u'\u2019' in position 9: ordinal not in range(128 ）。我能做些什么来解决这些错误，并实际运行我的脚本。我没主意了。请帮忙！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-17T02:45:14.273

最有可能的是，该`match`变量具有`unicode`类型。要将其写入文件，需要使用某种编码对其进行编码。默认情况下，Python 尝试使用 ASCII 编码对其进行编码。请尝试以下方法：

```
outfile.write(match.encode('utf-8') + "\n") 
```

您可能还想将`UTF-8`编码更改为您的 outfile 应该具有的编码。

还有一个不错的[Unicode HOWTO for Python 2.x](http://docs.python.org/2/howto/unicode.html)。但请注意，Python 3 有另一种更合乎逻辑的方法来处理 Unicode。

# c# - 如何使用 kinect 制作交互式显示窗口

> ID：16050376
> 
> 赞同：-1
> 
> 时间：2013-04-17T02:25:01.640
> 
> 标签：c#, kinect, tracking, interactive, head

我想做这样的事情[http://www.youtube.com/watch?v=xFgvNMN2DiQ&feature=related](http://www.youtube.com/watch?v=xFgvNMN2DiQ&feature=related)

我想用 kinect 跟踪头部，当它向左移动时，当它停止播放视频时，它会反转视频。有人可以帮我提供示例或有用的教程吗？谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-05-10T09:56:26.373

首先深入了解访问 kinect 数据的简单应用程序示例，这里有关于 kinect 入门的教程 [http://channel9.msdn.com/coding4fun/kinect/Getting-started-with-Kinect-development-quickly-with-the- Kinect-for-Windows-快速入门系列](http://channel9.msdn.com/coding4fun/kinect/Getting-started-with-Kinect-development-quickly-with-the-Kinect-for-Windows-Quickstart-Series)

从这个骨骼跟踪示例开始，您将看到访问 kinect 关节的方式，例如它们使用左右手和**HEAD** !!，因此您需要访问您选择的视频播放器并获取 api 访问滚动条，然后将头部的 X 坐标绑定到玩家的滚动位置。

干杯！！..

# android - 如何让 Android 服务每隔几秒广播一次意图？

> ID：16050381
> 
> 赞同：2
> 
> 时间：2013-04-17T02:25:35.467
> 
> 标签：android, service, asynchronous

如果我创建了一个服务，我如何让它每 X 秒广播一次意图？我记得看到过一段代码

```
startThreadDelayed( new Thread() {
    public void run() {
        doStuff();
        sendBroadcast(messageIntent);
        startThreadDelayed(this, 1000);
    }
}, 1000); 
```

不幸的是，对于循环的任何内容，我都不确定类名或确切的方法名。只要一个名字就可以为我指明正确的搜索方向。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-17T02:44:16.603

您可以考虑使用[AlarmManager](http://developer.android.com/reference/android/app/AlarmManager.html)。通过使用它，您可以触发任何`Intent`一次或任何计划的重复。

例如：

```
Intent i = new Intent(this, YourReceiver.class);
PendingIntent broadcast = PendingIntent.getBroadcast(this, 0, i, 0);

long first = System.currentTimeInMillis(); // now
long interval = 5 * 1000; // every 5 seconds
AlarmManager am = (AlarmManager)getSystemService(ALARM_SERVICE);
am.setRepeating(AlarmManager.RTC, first, interval, broadcast); 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-04-17T02:27:52.870

你可以使用`Handler.postDelayed`. [这是文档。](http://developer.android.com/reference/android/os/Handler.html#postDelayed%28java.lang.Runnable,%20long%29)

例如

```
Handler h = new Handler();
YourClass yourRunnable = new YourClass();
h.postDelayed(youRunnable,1000);

public class YourClass implements Runnable{
    public void run(){
    doStuff();
    sendBroadcast(messageIntent);
    if(running)
        h.postDelayed(youRunnable,1000);
} 
```

这里 running 是一个标志，最好将其保持为 volatile 布尔值。因此，通过更改它的值，您可以停止重复。

# ruby-on-rails - 从Rails中的提交按钮禁用URL参数？

> ID：16050383
> 
> 赞同：1
> 
> 时间：2013-04-17T02:25:50.100
> 
> 标签：ruby-on-rails, forms, url-parameters

单击按钮传入`button=`URL：

```
# example.html.haml
= form_for @contact, html: { method: :get }
  = f.text_field :phone
  = f.button "Call Me!" 
```

如何防止 Rails 传递额外的 URL 参数？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-17T02:25:50.100

添加`name: nil`到按钮：

```
= form_for @contact, html: { method: :get }
  = f.text_field :phone
  = f.button "Call Me!", name: nil 
```

来源：[如何在 Rails 中禁用提交按钮参数](http://lucastej.blogspot.com/2008/03/how-to-disable-submit-button-parameter.html)。

# mysql - 如果 B 列是最早的日期，则在 A 列中显示值。

> ID：16050388
> 
> 赞同：1
> 
> 时间：2013-04-17T02:26:11.170
> 
> 标签：mysql, sql

我在下表中遇到了困难。表 A 只是执行脚本时我当前表的一部分，还有其他列和行，但我只是取出其中的一部分，我认为这对理解我的问题很有用。场景：客户购买了 10 件带有序列号 IA003 的 itemA，但是当我执行查询时，它会显示 TABLE A 结果。我想要的只是当客户订购 10 件特定商品时，它应该与该商品的序列号内联显示，而不是所有具有该商品名称的序列号。或者，如果客户订购了 ItemA，那么无论它有什么系列，它都会寻找最近的到期日期。非常感谢

```
### Table A ### 

ITEMNAME ||    SERIALS  || EXPIRATION DATE  ||   SO_QTY      
ITEM A        IA0001         2014-01-20           10         
ITEM A        IA0002         2014-01-01           10        
ITEM A        IA0003         2013-05-13           10         
ITEM B        IB001          2012-11-08           15       
ITEM B        IB002          2015-12-28           15        
ITEM B        IB003          2014-06-01           15       

### how will i get this output? ### 
```

### 表 A ###

```
ITEMNAME      SERIALS      EXPIRATION DATE       SO_QTY      
ITEM A         IA0001         2014-01-20                
ITEM A         IA0002         2014-01-01                      
ITEM A         IA0003         2013-05-13            10         
ITEM B         IB001          2012-11-08           15          
ITEM B         IB002          2015-12-28                     
ITEM B         IB003          2014-06-01 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-17T02:30:33.817

您可以使用子查询连接表，该子查询为 each*获取最旧`EXPIRATIONDATE`的`Itemname`*，`LEFT JOIN`因此您可以测试记录是否是最旧的 each `ItemName`。

```
SELECT  a.ItemName,
        a.Serials,
        a.EXPIRATIONDATE,
        IF(b.Itemname IS NULL, NULL, a.SO_QTY) SO_QTY
FROM    TableA a
        LEFT JOIN
        (
            SELECT  Itemname, MIN(EXPIRATIONDATE) min_date
            FROM    TableA
            GROUP   BY ItemName
        ) b ON  a.Itemname = b.Itemname AND
                a.EXPIRATIONDATE = b.min_date 
```

*   [SQLFiddle 演示](http://www.sqlfiddle.com/#!2/fad20/2)
*   [SQLFiddle 演示 ( `with COALESCE`)](http://www.sqlfiddle.com/#!2/fad20/4)

# iphone - 使用 UIImage 的大 NSArray 时的内存问题

> ID：16050393
> 
> 赞同：2
> 
> 时间：2013-04-17T02:26:53.123
> 
> 标签：iphone, ios, xcode, uiimage, nsarray

我正在尝试使用 UIImages 数组在屏幕上显示大量图像。目前我将每个图像添加到 NSMutableArray 中，然后在需要时访问它们，但是随着图像数量的增加，应用程序最终会崩溃。

我尝试使用 Instruments 来计算内存分配，似乎一旦内存达到 20MB 左右，应用程序就会崩溃。有没有办法解决这个问题？或者当我这样做时有什么方法可以尽可能地节省内存？即使您对此没有答案，有没有人遇到过类似的问题？如果是这样，你是如何妥协/解决的？

顺便说一句，我没有想到存储到文件（或核心数据）和从文件（或核心数据）中检索一个选项，因为该应用程序需要快速使用图像，而我的印象是在 iOS 上写入/读取核心数据或文件是与使用内存时相比慢（如果我错了，请纠正我）

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-17T05:06:33.497

是的，如果您将大量图像存储在可变数组中，那么它会占用大量可用内存。您也可以考虑核心数据。但是在运行时从核心数据存储和检索数据时会发生一些缓慢的功能，但它可以安全地防止内存使用。
对于这种情况，我总是推荐并使用以下功能。我将所有图像缓存在文档目录中，并将其 URL（文件位置）路径保存在 coredata（或任何其他数据库）中。现在在演示时，我从存储当前图像、上一个图像和下一个图像中拍摄了 3 张图像。每当我显示当前图像时，用户可以滚动，他可以流畅地看到下一张或上一张图像。如果用户继续下一张图片，那么我会更改这三张图片。当前图像现在将是我以前的图像，下一个图像将是我当前的图像，我从我的存储位置加载新图像，这将是下一个图像。所以让所有图像都循环播放，我们只使用 3 张图像来处理这个循环。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-05-09T21:43:04.620

我有同样的问题。尝试了不同的方法，最终决定存储 NSData 对象数组并即时转换为 UIImage。

```
for (NSString *imageFile in directoryList) {
    NSString *fileLocation = [imageFolder stringByAppendingPathComponent:imageFile];
    NSData *imageData = [NSData dataWithContentsOfFile:fileLocation];
    if (imageData) {
        [images addObject:imageData];
    } else {
        [Util trace:@"cannot get image data for image named: %@", fileLocation];
    } 
```

然后更新您的图像：

```
 -(void)updateImageView:(id)sender
{       
    UIImage *anImage = [UIImage imageWithData:[images safeObjectAtIndex:nextImage] ];
    [imageView setImage:anImage];
    nextImage++;
} 
```

# java - 一种检查用户是否正在运行脚本的方法？

> ID：16050401
> 
> 赞同：1
> 
> 时间：2013-04-17T02:27:33.097
> 
> 标签：java, sql, authentication, cron

背景信息：游戏机器人的 Java 脚本，用户运行加载程序，输入他们的用户名和身份验证代码，加载程序使用 URLClassLoader 创建脚本实例以提供给机器人。

我正在尝试做的事情：我希望使用户一次只能运行一个脚本实例，但我无法弄清楚如何准确地执行此操作。

我如何理论化该过程： 1\. 用户输入信息，检查信息，如果是这样，脚本将开始 2\. 在 sql 表中：为 authInUse 添加一列，并在脚本启动时将值设置为 1 3\. 每 10 分钟，确保 authInUse设置为 1。同样在另一列中，lastUpdated 值将包含时间戳。

问题是我将如何将 authInUse 设置为 0(false)。我正在考虑使用 SQL 自动化作业（对它们没有太多研究）来检查身份验证是否确实在使用中，如果是，它将检查时间戳，如果时间戳超过 10 分钟前，它将设置authInUse 为假。

有没有更好或更可靠的方法来做到这一点，我是不是想多了，还是应该这样做？

# heroku - 如何使用 --remote 代替 --app 来执行 Heroku CLI 命令？

> ID：16050411
> 
> 赞同：0
> 
> 时间：2013-04-17T02:28:07.813
> 
> 标签：heroku, heroku-toolbelt

我通常将 --app 标志用于多个应用程序，但最近发现了 --remote。我更喜欢更通用的 --remote 但一直无法让它工作。

“git remote”列出了原始、暂存和生产，但运行，例如，“heroku logs --remote staging”会产生“未指定应用程序”错误。

在 Heroku irc 频道中有人告诉我，这应该可以工作，而且 --remote 可以用来代替 --app。我错过了什么？

heroku-toolbelt v. 2.37.2。谢谢。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-17T03:57:23.383

这可能是您的 git 遥控器未正确设置以匹配[Toolbelt](https://github.com/heroku/heroku/blob/70551392e6cb4a1bbe693d478407e9794081b28b/lib/heroku/command/base.rb#L208)中的正则表达式的问题。要查看遥控器的详细信息，请运行：

```
git remote -v 
```

这应该给你这样的东西：

```
dev     git@heroku.com:example-dev-ryan.git (push)
dev     git@heroku.com:example-dev-ryan.git (fetch)
origin  git@github.com:ryanbrainard/example.git (fetch)
origin  git@github.com:ryanbrainard/example.git (push)
prod    git@heroku.com:example.git (push)
prod    git@heroku.com:example.git (fetch)
staging git@heroku.com:example-staging.git (fetch)
staging git@heroku.com:example-staging.git (push) 
```

确保您的 Heroku git 遥控器与[模式](https://github.com/heroku/heroku/blob/70551392e6cb4a1bbe693d478407e9794081b28b/lib/heroku/command/base.rb#L208)匹配：

```
^git@#{Heroku::Auth.git_host}(?:[\.\w]*):([\w\d-]+)\.git$ 
```

Where`#{Heroku::Auth.git_host}`等于`heroku.com`，除非你在你的`~/.ssh/config`.

然后你就可以使用`--remote`（或`-r`简称），像这样：

```
heroku info --remote prod 
```

# ruby-on-rails-3 - 如何使用 Capybara、Rails、MiniTest 规范填写 datepicker

> ID：16050414
> 
> 赞同：20
> 
> 时间：2013-04-17T02:28:38.317
> 
> 标签：ruby-on-rails-3, capybara, minitest

我有一个生成以下 HTML 的 form_tag：

```
<form accept-charset="UTF-8" action="http://www.example.com/product_page" id="dates_form" method="get"><div style="margin:0;padding:0;display:inline"><input name="utf8" type="hidden" value="&#x2713;" /></div>
  Min date: <input id="datepicker_mini" name="datepicker_mini" type="text" />
  Max date: <input id="datepicker_maxi" name="datepicker_maxi" type="text" />
</form> 
```

以上是所有生成的 HTML。我已经删除了所有部分和布局，以尝试尽可能轻松地调试此问题。

datepicker 字段调用 jquery UI datepicker。

我想在我的测试中避免使用 javascript，只需用文本日期填写日期字段。我已经尝试过`fill_in "datepicker_mini", :with => "01/01/2010"`，但是虽然它不会导致测试失败，但在我用来测试时它也不会填写该字段`save_and_open_page`。

**更新：测试代码**

```
it "runs report" do
  login_test_user
  within("#dates_form") do
    fill_in "datepicker_mini", :with => "01/01/2010"
    fill_in "datepicker_maxi", :with => "01/01/2020"
  end
  save_and_open_page
end 
```

任何帮助将不胜感激。

谢谢。

* * *

## 回答 #1

> 赞同：28
> 
> 时间：2013-09-15T02:27:26.477

我有同样的问题。在阅读了 capybara 的文档后，我的解决方案是使用 page.execute_script() 直接为输入设置一个值。

```
## fill_in "person_birthdate, with: "21/12/1980"
page.execute_script("$('#person_birthdate').val('21/12/1980')") 
```

这有点脏，我想，但为我工作。

陷阱：

*   我使用硒驱动器。
*   我用 js 运行示例：true
*   我使用了一个名为 zebra 的插件来生成日期选择器，但原理是一样的。

编辑：这也适用于 Poltergeist

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2014-07-24T17:16:46.043

我喜欢这个解决方案：

```
page.execute_script("$('#show_sale_date').datepicker('setDate', '01/01/2010')") 
```

取自这里[http://api.jqueryui.com/datepicker/#method-setDate](http://api.jqueryui.com/datepicker/#method-setDate)

* * *

## 回答 #3

> 赞同：7
> 
> 时间：2016-04-29T15:47:53.540

如果你想模拟 UI 点击，这对我有用（使用 javascript 驱动程序）。

当我的日期选择器的 ID 是“target_date”时，它会导航到下个月，然后选择 15 号。

```
page.execute_script %Q{ $('#target_date').trigger('focus') }
page.execute_script %Q{ $('a.ui-datepicker-next').trigger('click') }
page.execute_script %Q{ $('a.ui-state-default:contains("15")').trigger('click') } 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2015-01-23T17:00:17.007

上述解决方案对我不起作用。也许是因为我正在为其编写测试的应用程序上没有输入字段。我的解决方案要丑得多，但它会选择日期并在仅是 GUI 的日期选择器中验证选择。

```
##selects 'Custom' option, then specified dates, and verifies that specified dates are displayed.
Then(/^select "Custom" values, "([^"]*)" to "([^"]*)" and verify selection$/) do |arg1,arg2|
  step %{select 'Custom' from timespan drop-down}
  start = Date.strptime("#{arg1}",'%m/%d/%Y')
  start_day = start.day
  start_month = start.strftime('%b')
  start_year = start.year
  stop = Date.strptime("#{arg2}",'%m/%d/%Y')
  stop_day = stop.day
  stop_month = stop.strftime('%b')
  stop_year = stop.year
  within('.left.hasDatepicker') do
    find('.ui-datepicker-year').click
    find('option', :text => start_year).click
    find('.ui-datepicker-month').click
    find('option', :text => start_month).click
    find('.ui-state-default', :text => start_day, :match => :prefer_exact).click
  end
  within('.right.customdatepicker') do
    find('.ui-datepicker-year').click
    find('option', :text => stop_year).click
    find('.ui-datepicker-month').click
    find('option', :text => stop_month).click
    find('.ui-state-default', :text => stop_day, :match => :prefer_exact).click
  end
  find('input[value="Go"]').click
  date_picker = find('.timespanperiod').text
  start_date, end_date = date_picker.split(" - ")
  start_formatted = Date.strptime("#{start_date}",'%d/%m/%Y')
  end_formatted = Date.strptime("#{end_date}",'%d/%m/%Y')
  start_formatted.should eq (Date.strptime("#{arg1}",'%m/%d/%Y'))
  end_formatted.should eq (Date.strptime("#{arg2}",'%m/%d/%Y'))
end 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2018-12-24T07:37:23.123

这对我有用。日期采用该格式很重要，否则日期选择器不会对其进行解析。 `page.execute_script %Q{ $("md-datepicker[name='datepicker_mini'] input").val('2010-1-1').trigger('input') }`

# sql - oracle中查询sql

> ID：16050419
> 
> 赞同：-5
> 
> 时间：2013-04-17T02:29:39.660
> 
> 标签：sql, oracle

这是上一个查询 ( `select Well_Dprod_Date,Formation_Name from data_dprod`) 的结果。

```
 Well_Dprod_Date    Formation_Name  
 11/15/2002        BRF. 
 11/16/2002        BRF. 
 11/17/2002        BRF. 
 11/18/2002        BRF. 
 11/19/2002         BRF.    
 11/20/2002         BRF.    
 11/21/2002         BRF.    
 11/22/2002         BRF.    
 11/23/2002         BRF. 
```

如何获取查询结果如下：

```
 Well_Dprod_Date    Formation_Name  
 11/15/2002         BRF.        
 11/16/2002     
 11/17/2002     
 11/18/2002     
 11/19/2002     
 11/20/2002     
 11/21/2002     
 11/22/2002     
 11/23/2002          BRF. 
```

谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-17T03:00:39.040

你的问题有点模棱两可。是你想要的吗？

```
SELECT WELL_DPROD_DATE,
       FORMATION_NAME,
       CASE
         WHEN R1 = 1 OR R2 = 1 THEN
          FORMATION_NAME
         ELSE
          NULL
       END AS FORMATION_NAME_F
 FROM (SELECT WELL_DPROD_DATE,
           FORMATION_NAME,
           RANK() OVER(PARTITION BY FORMATION_NAME ORDER BY WELL_DPROD_DATE ASC) AS R1,
           RANK() OVER(PARTITION BY FORMATION_NAME ORDER BY WELL_DPROD_DATE DESC) AS R2
          FROM DATA_DPROD) T 
```

# c# - 如何将 XML“行”加载到列表框 C# 的索引中

> ID：16050422
> 
> 赞同：2
> 
> 时间：2013-04-17T02:29:58.790
> 
> 标签：c#, xml, listbox, indexing

我正在尝试将单个“行”的 xml 加载到列表框索引。

```
<?xml version="1.0" encoding="utf-8"?>
<!--User | 4/16/2013 @ 10:05 PM-->
<ContactBook>
<Contact>
<Name>
   <Name>personName</Name>
</Name>
<City>
   <City>testCity</City>
</City>
<State>
   <State>testState</State>
</State>
<Phone>
   <Phone>testPhone</Phone>
</Phone>
</Contact>
</ContactBook> 
```

所以我想让姓名、城市、州和电话出现在列表框中的一行上，然后让下一个联系人出现在下一个列表框行中。

我还想知道是否有人有一些很好的网站来展示如何更新 XML 文件的教程，而不是覆盖它们。

/*编辑由于评论中的问题*/

我真的不知道从哪里开始。我的 xml 文件是从一个对话框（类中的几个文本框）写入的，this.Tag 更新列表框，并保存到 xml 文件中。但是，如果保存了第二组联系信息，它会覆盖第一组，而不是附加它。

/*编辑*/

感谢LexeRoy，我获得了更多的理解，但是，我仍然挂断了电话。

```
private void updateXml_Click(object sender, EventArgs e)
{
    var xDoc = XDocument.Load(book);
    var listBoxItems = xDoc.Elements("Contact");
    listBox1.Items.Add(listBoxItems);
} 
```

其中 book 是一个变量，表示我的 xml 文件路径，而 listBox1 很明显。不幸的是，在按钮单击时，第一行得到这个值：

```
System.Xml.Linq.XContainer+<GetElements>d_11 
```

现在已经声明了数据源，我得到了一个抛出的异常： ![错误](https://i.stack.imgur.com/NgboG.png)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-17T02:48:02.597

您可以使用[`XDocument`](http://msdn.microsoft.com/en-us/library/bb345449.aspx)可以表示 XML 文档的位置并迭代其中的每个项目。对于你的例子，

您可以为 a 创建一个对象，`Contact`其中您将拥有 a `Name`、`City`、`State`和`Phone`属性。

```
var xDoc = XDocument.Load("ContactBook.xml");
var listBoxItems = xDoc.Elements("Contact"); //This will be a list of IEnumerable<XElement> child elements of Contact xml tag 
```

然后你可以通过你的代码来操作这些东西。

**编辑：**

```
listBox1.DataSource = listBoxItems.ToList();
listBox1.DisplayMember = "Value";
listBox1.ValueMember = "Value"; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-17T02:43:52.507

这是我加载 XML 的方式：

```
System.Data.DataSet ds = new System.Data.DataSet();
ds.ReadXml(HttpContext.Current.Server.MapPath("~/App_Data/Lang.xml")); 
```

希望这对您有所帮助。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-17T03:31:16.587

如果您想要在列表框中显示某些“联系人”对象的“成员”（以及我猜它们的值），一种方法可能是为“联系人”对象创建一个类，并为其“成员”创建另一个类：

```
class Contact
{
    public IList<ObjectMember> Members { get; set; }
}

class ObjectMember
{
    public string Name { get; set; }
    public string Value { get;set; }
} 
```

这些类也可能有助于处理对话框中的字段。

然后，当您阅读 xml 时，您将一个新的实例化到`ObjectMember`您`Add`的成员列表中（或者任何可以为您提供的东西！）。Linq to Xml 可能是最简单和最有趣的方式。

当您拥有所有*成员*时，您可以将您的绑定`ListBox`到联系人`Members`列表，但其实现取决于您是在 WinForms 中还是在 WPF 领域中。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2015-02-16T09:26:47.853

有一种更简单的方法可以使用 Dictionary 对象进行绑定

```
var dic = (from order in ds.Tables[0].AsEnumerable()
                   select new
                   {
                       UserView = order.Field<String>("Value"),
                       DevView = order.Field<String>("id")

                   }).AsEnumerable().ToDictionary(k => k.DevView, v => v.UserView);
                    ListBox1.DataSource = dic;
                    ListBox1.DataTextField = "Value";
                    ListBox1.DataValueField = "key";
                    ListBox1.DataBind(); 
```

[参考链接](http://www.fourthbottle.com/2015/02/how-to-bind-data-from-xml-file.html)

# python - JUMP_FORWARD 或 JUMP_ABSOLUTE 与 IF 语句？蟒蛇2.5

> ID：16050423
> 
> 赞同：8
> 
> 时间：2013-04-17T02:30:08.637
> 
> 标签：python, if-statement, bytecode

我一直在使用' [dis](http://docs.python.org/2/library/dis.html) '模块来重新编写一些编译脚本（.pyc）。我了解 JUMP_FORWARD 和 JUMP_ABSOLUTE 之间的区别。据我所知，IF 语句将由 JUMP_FORWARD 关闭：

```
>>> def f():
        if a:
                print ''
>>> from dis import dis
>>> dis(f)
  2           0 LOAD_GLOBAL              0 (a)
              3 JUMP_IF_FALSE            9 (to 15)
              6 POP_TOP             

  3           7 LOAD_CONST               1 ('')
             10 PRINT_ITEM          
             11 PRINT_NEWLINE       
             12 JUMP_FORWARD             1 (to 16)
        >>   15 POP_TOP             
        >>   16 LOAD_CONST               0 (None)
             19 RETURN_VALUE 
```

如果 IF 语句位于另一个循环的末尾，则会出现 JUMP_ABSOLUTE。例如：

```
>>> def f1():
    if a:
        if b:
            print ''
>>> dis(f1)
  2           0 LOAD_GLOBAL              0 (a)
              3 JUMP_IF_FALSE           20 (to 26)
              6 POP_TOP             

  3           7 LOAD_GLOBAL              1 (b)
             10 JUMP_IF_FALSE            9 (to 22)
             13 POP_TOP             

  4          14 LOAD_CONST               1 ('')
             17 PRINT_ITEM          
             18 PRINT_NEWLINE       
             19 JUMP_ABSOLUTE           27
        >>   22 POP_TOP             
             23 JUMP_FORWARD             1 (to 27)
        >>   26 POP_TOP             
        >>   27 LOAD_CONST               0 (None)
             30 RETURN_VALUE 
```

从我正在阅读以写回代码的字节码中，有一个 JUMP_ABSOLUTE 让我感到惊讶：

```
121         228 LOAD_FAST               11 (a)
            231 LOAD_CONST               9 (100)
            234 COMPARE_OP               0 (<)
            237 JUMP_IF_FALSE           23 (to 263)
            240 POP_TOP             
            241 LOAD_FAST               11 (b)
            244 LOAD_CONST              11 (10)
            247 COMPARE_OP               4 (>)
            250 JUMP_IF_FALSE           10 (to 263)
            253 POP_TOP             

122         254 LOAD_CONST               3 (1)
            257 STORE_FAST               4 (ok)
            260 JUMP_ABSOLUTE           27
        >>  263 POP_TOP 
```

我认为代码如下：

```
if a<100 and b>10:
            ok=1 
```

但它会引发 JUMP_FORWARD 而不是 JUMP_ABSOLUTE。我知道这不是 WHILE 循环，也不是 FOR 语句，因为它们都在字节码中创建了 SETUP_LOOP 行。

我的问题是：我错过了什么？为什么我得到一个 FORWARD 而不是 ABSOLUTE 跳转？

编辑：到索引 27 的绝对跳转指向（WHILE？）循环的开始，其中这两行 121 和 122 属于：

```
106          24 SETUP_LOOP             297 (to 324)
        >>   27 LOAD_FAST                4 (ok)
             30 LOAD_CONST               1 (0)
             33 COMPARE_OP               2 (==)
             36 JUMP_IF_FALSE          283 (to 322)
             39 POP_TOP 
```

在这些行之前和之后有一个 IF 语句。这是之前的代码，使用相同的 JUMP_ABSOLUTE 关闭语句。

```
115         170 LOAD_FAST                3 (q)
            173 LOAD_CONST              10 (1)
            176 COMPARE_OP               0 (<)
            179 JUMP_IF_FALSE           45 (to 227)
            182 POP_TOP             
            183 LOAD_FAST               11 (z)
            186 LOAD_CONST              11 (10)
            189 COMPARE_OP               4 (>)
            192 JUMP_IF_FALSE           32 (to 227)
            195 POP_TOP             

116         196 LOAD_CONST               1 (0)
            199 STORE_FAST               4 (ok)

117         202 LOAD_FAST                5 (u)
            205 LOAD_CONST               3 (1)
            208 BINARY_ADD          
            209 STORE_FAST               5 (u)

118         212 LOAD_CONST               1 (0)
            215 STORE_FAST               3 (k)

119         218 LOAD_CONST               3 (10)
            221 STORE_FAST               6 (dv)
            224 JUMP_ABSOLUTE           27
        >>  227 POP_TOP 
```

JUMP_FORWARD 表示“转到下一行”，JUMP_ABSOLUTE 表示“回到 WHILE 循环的开头”。问题是我不知道如何复制可以提供与上述相同字节码的代码。

谢谢 ！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-17T15:00:02.693

我接受了挑战，并在您的帮助下使用以下（废话）功能重现了您的情况（或非常相似的情况）：

```
>>> def f():
...    while ok==0:
...      if q<1 and z>10:
...        ok=0
...        u=u+1
...        k=0
...        dv=10
...      elif a<100 and b>10:
...        ok=1
...
>>> dis(f)
  2           0 SETUP_LOOP             112 (to 115)
        >>    3 LOAD_FAST                0 (ok)
              6 LOAD_CONST               1 (0)
              9 COMPARE_OP               2 (==)
             12 JUMP_IF_FALSE           98 (to 113)
             15 POP_TOP

  3          16 LOAD_GLOBAL              0 (q)
             19 LOAD_CONST               2 (1)
             22 COMPARE_OP               0 (<)
             25 JUMP_IF_FALSE           45 (to 73)
             28 POP_TOP
             29 LOAD_GLOBAL              1 (z)
             32 LOAD_CONST               3 (10)
             35 COMPARE_OP               4 (>)
             38 JUMP_IF_FALSE           32 (to 73)
             41 POP_TOP

  4          42 LOAD_CONST               1 (0)
             45 STORE_FAST               0 (ok)

  5          48 LOAD_FAST                1 (u)
             51 LOAD_CONST               2 (1)
             54 BINARY_ADD
             55 STORE_FAST               1 (u)

  6          58 LOAD_CONST               1 (0)
             61 STORE_FAST               2 (k)

  7          64 LOAD_CONST               3 (10)
             67 STORE_FAST               3 (dv)
             70 JUMP_ABSOLUTE            3
        >>   73 POP_TOP

  8          74 LOAD_GLOBAL              2 (a)
             77 LOAD_CONST               4 (100)
             80 COMPARE_OP               0 (<)
             83 JUMP_IF_FALSE           23 (to 109)
             86 POP_TOP
             87 LOAD_GLOBAL              3 (b)
             90 LOAD_CONST               3 (10)
             93 COMPARE_OP               4 (>)
             96 JUMP_IF_FALSE           10 (to 109)
             99 POP_TOP

  9         100 LOAD_CONST               2 (1)
            103 STORE_FAST               0 (ok)
            106 JUMP_ABSOLUTE            3
        >>  109 POP_TOP
            110 JUMP_ABSOLUTE            3
        >>  113 POP_TOP
            114 POP_BLOCK
        >>  115 LOAD_CONST               0 (None)
            118 RETURN_VALUE 
```

第 8 行和第 11 行有`JUMP_ABSOLUTE`您要求的内容。`LOAD_GLOBAL`像vs这样的细微差别`LOAD_FAST`是由变量的范围引起的。

请注意，我必须切换到 Python 2.5 才能重现这一点。较新的版本会产生不同的结果。

如果`continue`似乎不适用于您的情况，我建议您在 Python 的源代码中进行一些研究，并查找`ADDOP_JABS`在[`Python/compile.c`](http://hg.python.org/cpython/file/80b1dc3b3231/Python/compile.c)其他情况下插入绝对跳转的情况。

如果您的目标是“只是”反编译 this `.pyc`，那么您应该尝试[`uncompyle2`](https://github.com/Mysterie/uncompyle2)，它将自己描述为“A Python 2.5、2.6、2.7 字节码反编译器，用 Python 2.7 编写”

# jquery - 输入文本时如何实现标签的即时隐藏（）

> ID：16050425
> 
> 赞同：2
> 
> 时间：2013-04-17T02:30:23.877
> 
> 标签：jquery, html

我有一个带有标签的文本输入，该标签位于顶部以用作占位符。我熟悉占位符属性，但与此任务无关。

当用户输入输入时，占位符标签隐藏。但问题是，它实际上需要一微秒的时间才能发生——它不是瞬间的。这意味着您会在占位符覆盖您的前几个文本字符时得到延迟。

我的html代码是：

```
<div class="input-wrap">';

    <div class="label" contenteditable="false">Write something</div>
    <div id="input" contenteditable="true"></div>

</div> 
```

jQuery：

```
$('.input-wrap').on('keyup','#status-input',function(){

    $('#label').hide();

}); 
```

**[我在这里做了一个codepen示例。](http://codepen.io/robertnorth/pen/ubqdB)**

如何使标签在输入内容后立即消失？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-17T02:32:16.000

您是否尝试过使用该`keydown`事件？

[http://codepen.io/anon/pen/Apxmy](http://codepen.io/anon/pen/Apxmy)

# c++ - C/C++ (Linux) 中的信号量访问模式

> ID：16050429
> 
> 赞同：2
> 
> 时间：2013-04-17T02:30:41.333
> 
> 标签：c++, c, linux, semaphore

我很好奇存储/使用信号量的最佳方式。

以前，我一直使用存储在共享内存中的信号量（因为无论如何我已经在使用共享内存）作为，`sem_t`然后使用`sem_init()`,`sem_wait()`和来操作信号量。`sem_timedwait()``sem_post()`

但是今天我正在阅读`man`页面并开始查看`sem_get()`,`sem_ctl()`等...我认为这将是节省声明共享内存的步骤以获取信号量的好方法。当我开始编写代码时，我意识到我找不到从 to 获取的`sem_get()`方法`sem_t`。

如果我使用`shm_get()`我只能手动操作信号量`sem_ctl()`吗？这需要大量的开销，这些开销被`sem_wait()`,`sem_timedwait()`和所掩盖`sem_post()`。

`sem_t`当你只有一个类型的变量时，有没有办法获得一个类型的变量`key_t`？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-17T03:05:45.633

经过深入[阅读](http://www.linuxdevcenter.com/pub/a/linux/2007/05/24/semaphores-in-linux.html?page=1)，大多数 Linux 发行版都标配了两种类型的信号量；**系统 V**和**POSIX**。简而言之，**System V**是一个非常适合自己动手的工具，也许是“粗制滥造”的工具，而**POSIX**使用起来要简单得多。

我的问题源于我以前不知道二分法这一事实。`sem_t`它的友好工具来自**POSIX**家族，而`shmget()`来自`shmctl()`System **V**家族——它们不兼容，并且没有“开箱即用”的选择。

我正在寻找的解决方案是`sem_open()`and `sem_close()`。这允许 a`char *name = "named_semaphore";`识别信号量，而信号量又返回 的变量`sem_t`。

# php - 可扩展的 DataMapper ORM？

> ID：16050430
> 
> 赞同：0
> 
> 时间：2013-04-17T02:30:45.547
> 
> 标签：php, database, codeigniter, module, codeigniter-datamapper

我们正在考虑将 DataMapper ORM 添加到我们的 Code Igniter HMVC 设置中。

DataMapper 看起来很酷，但我注意到这些模型都与datamapper 文档中的`has_one`和Eg 紧密耦合：`has_many`

```
class User extends DataMapper {

    var $has_many = array('book');
    var $has_one = array('country');

........

class Country extends DataMapper {

    var $table = 'countries';

    var $has_many = array('user');

........

class Book extends DataMapper {

var $has_many = array('user'); 
```

正如我在开始时提到的，我们使用 HMVC 来处理模块化代码。这意味着我们可能有国家模块，和/或我们可能有书籍模块。但是它们是模块化的，因此用户模块（包括用户对象）不知道其他两个模块的存在，因此我们无法在模型中指定`User`有关其他两个模型的信息。

现在其他两个模型依赖于 users 模块，所以他们知道它存在，我在想的是在 Country 模型中我们可以附加`book`到 User`has_many`数组吗？

这是正确的方法吗？我想datamapper必须有办法处理这些用例？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-17T07:55:33.873

如果您无法在代码文件中提交关系，则可以使用[Runtime relationship definition](http://datamapper.wanwizard.eu/pages/advancedrelations.html#runtime)。这样，您可以在创建模型实例后设置关系，例如在您的 Books 模块中，当您获得 User 实例时，只需添加“您自己”（书籍）关系。

我不确定这种设置在您的情况下是否可行。您可能希望为此创建一些工厂类或方法，这样您就不必在控制器中乱扔设置代码。

# ios - 跨多个设备同步浏览器窗口？

> ID：16050439
> 
> 赞同：1
> 
> 时间：2013-04-17T02:31:46.603
> 
> 标签：ios, browser, responsive-design, sync

我的平面设计作品集即将推出，我想知道是否有一种方法可以同步 iMac、iPad 和 iPhone，这样当您单击其中任何一个上的链接时，该链接将在所有 3 台设备上打开同时。这样做的原因是我将有一些响应式网页设计示例，我认为这对用户来说是一个很好的效果，所以你不必分别点击所有 3 台设备上的任何给定链接。说得通？不确定是否已经有答案，但我没有任何运气来寻找它。任何帮助将不胜感激。谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-12-24T12:10:16.473

我知道这是一个旧线程，但人们在那里寻找解决方案，应该检查一下

[https://github.com/shakyShane/browser-sync](https://github.com/shakyShane/browser-sync)

最重要的是它是免费的。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-17T02:43:11.143

您可以编写一个服务器端应用程序来执行此操作，但要为客户​​端自己获取它，则需要一些浏览器插件。我不知道 Apple 如何处理 safari 的插件，但你可以在 chrome 中做到这一点。无论哪种方式，您仍然需要一个中央位置来跟踪您请求的页面。如果您控制托管页面的站点，则不会花费那么长时间，否则您将不得不编写浏览器插件和服务器应用程序。

# tfs - TFS 2012 Microsoft.WebApplication.targets

> ID：16050440
> 
> 赞同：2
> 
> 时间：2013-04-17T02:31:47.513
> 
> 标签：tfs, tfs-2012

环境：在 Windows Server 2012 VM 上运行的 TFS 2012 构建代理。.Net 4.0/.Net 4.5 已安装。Windows SDK ( [http://msdn.microsoft.com/en-us/library/ms717422.aspx](http://msdn.microsoft.com/en-us/library/ms717422.aspx) ) 也已安装。

问题：构建代理无法构建使用 VS 2012 开发的 .net 4.0 Web 应用程序。

构建失败，因为它无法解析 Web 目标：

错误未找到导入的项目“C:\Program Files (x86)\MSBuild\Microsoft\VisualStudio\v11.0\WebApplications\Microsoft.WebApplication.targets”。确认声明中的路径正确，并且该文件存在于磁盘上。

随后会出现其他警告：未找到框架“.NETFramework,Version=v4.0”的参考程序集。要解决此问题，请为此框架版本安装 SDK 或 Targeting Pack，或者将您的应用程序重新定位到已安装 SDK 或 Targeting Pack 的框架版本。请注意，程序集将从全局程序集缓存 (GAC) 中解析，并将用于代替引用程序集。因此，您的程序集可能无法正确定位于您想要的框架。

我在这里搜索了 .NET 4.0 目标包：

[http://msdn.microsoft.com/en-US/hh487283.aspx](http://msdn.microsoft.com/en-US/hh487283.aspx)

但 Windows Server 2012 未列为受支持的平台。

IT 基础架构团队并不热衷于在每个构建代理 VM 上安装 VS，只是为了获得目标包。

有人对我如何解决这个问题有任何想法吗？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-04-17T07:59:58.183

**免责声明**

我意识到我在下面提到的解决方案被很多开发人员所反对，但根据我的经验，它是迄今为止解决问题的最简单和最可靠的方法。

**解决方案**

到目前为止，此问题最简单的解决方案是安装`Visual Studio 2012`在您的构建服务器上。我知道你说过基础设施团队并不热衷于这样做，但 IMO 这是一个最佳实践。我将尝试在下面概述原因。

在您的构建服务器上安装 Visual Studio 似乎是一件奇怪的事情，但经过`TFS`一段时间后，我发现它是管理构建服务器的最简单方法。

您可以手动将文件（目标）从您的开发机器复制到您的构建服务器，但如果对 Visual Studio 进行了更新，您将需要弄清楚发生了什么变化并确保您也更新了所有这些文件。这些文件通常包括 Targets 文件和关联的 dll。

此外，借助现在可用的所有扩展和包，在构建服务器上加载 Visual Studio 并安装所需的包比尝试找出复制功能所需的内容更容易。

最近微软发布`ASP.Net and Web Tools 2012.2`. 这改变了网站和 Web 项目的发布管道，我需要在我的 TFS 构建中使用它。只需能够登录到我的构建服务器、加载 Visual Studio 并下载新更新就容易多了。

我肯定会支持在您的构建服务器上安装 Visual Studio。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-17T07:48:13.557

您的 Web 应用程序是用 asp.net mvc 编写的吗？在这种情况下，您可能需要在构建机器上安装[asp.net mvc 。](http://www.asp.net/mvc/mvc4)在完全干净的机器上运行构建代理时，我遇到了同样的问题。安装该软件包后，构建代理设法构建了一个应用程序。

希望有帮助。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-10-28T16:22:14.963

为了正确运行 TFS 2012，不得不在构建服务器上安装 Visual Studio 2012 很遗憾。这意味着在 TFS 2012 的包装中缺少这些功能（“C:\Program Files (x86)\MSBuild\Microsoft\VisualStudio\v11.0\WebApplications\Microsoft.WebApplication.targets ....）。感谢微软修改包;-)。

# ubuntu - 如何修复始终返回 EOF 的 Zabbix 触发器

> ID：16050444
> 
> 赞同：0
> 
> 时间：2013-04-17T02:32:23.067
> 
> 标签：ubuntu, triggers, zabbix

我在配置 Zabbix 模板项/触发器时遇到问题。我正在尝试设置触发器来检查网页的 HTTP 状态。但是，我似乎遇到了一些困难，因为它总是返回“EOF”错误。

我阅读了[web.page.regexp](https://www.zabbix.com/documentation/doku.php?id=1.8/manual/config/items)如果出现错误将返回 EOF 的文档。我知道正则表达式的主机有效，因为我从主机“卷曲”了它。

下面是我的项目密钥：

```
web.page.regexp[127.0.0.1,,9198,HTTP/1\.1.*,12] 
```

这是我的触发器：

```
(({Tungsten Check:web.page.regexp[127.0.0.1,,9198,HTTP/1\.1.*,12].regexp(HTTP/1.1\ 200)})#1) 
```

有没有人看到任何明显的错误？我正在按照以下教程中的说明进行操作：[没有 Web 监控的 HTTP 返回代码监控](http://blog.kdecherf.com/2012/12/03/zabbix-http-return-code-monitoring-without-web-monitoring/)

我不确定我是否使用 CURL 编译了 Zabbix，这可能是原因吗？

**更新#1**

我重新编译了支持 CURL 的 Zabbix，但它没有解决问题，仍然收到 EOF 消息。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-08-22T17:04:20.573

以下适用于我的实例：

`zabbix_get -s localhost -k web.page.regexp[www.bbc.co.uk,,80,HTTP/1\.1.*,12]`

并返回

`HTTP/1.1 200`

我认为当它尝试选择无内容的前 12 个字符时会出现该错误。我可以通过从无效的主机/端口请求或正则表达式不匹配任何内容来生成该错误。

看到我使用了你的正则表达式，我猜你要么没有从你的网络服务器收到任何东西，要么它没有返回与你的正则表达式匹配的行——也许是 HTTP 1.0？

我建议使用适当的网络检查，即使它只是一次检查。会让它更容易一些。

希望这可以帮助。

将要

# c++ - 需要帮助在循环/数组程序 C++ 中显示值

> ID：16050445
> 
> 赞同：0
> 
> 时间：2013-04-17T02:32:26.937
> 
> 标签：c++, arrays, loops, output

我正在尝试编写一个程序来计算和显示身高超过 60 英寸的学生的身高。例如：我需要它来统计和显示身高超过 60 英寸的学生人数并显示他们各自的身高。我不确定如何存储单独的值并显示它们的高度。我已经让程序计算身高超过 60 英寸的学生人数，但我需要帮助来显示他们的具体身高。

```
#include <iostream>

using namespace std;

int main()
{
    double count60 = 0.0;
    double height[10];
    for (int x = 0; x < 10; x = x + 1)
    {
        height[x] = 0.0;
    }

    cout << "You are asked to enter heights of 10 students. "<< endl;
    for (int x = 0; x < 10; x = x + 1)
    {
        cout << "Enter height of a student: ";
        cin >> height[x];
    if (height[x] > 60)
    {
        count60 = count60 + 1;
    }       
    }

    cout << "The number of students taller than 60 inches: "<< count60 << endl;
    cout << "The heights of these students are: "

    system("pause"); 
    return 0;
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-17T02:35:41.720

不确定我是否完全理解您的问题所在。

从您提供的代码中可以清楚地看出，您知道如何：

*   遍历一个数组（您`for`的输入语句）；
*   确定某物是否大于 60（您`if`的更新计数声明）；和
*   输出一个变量（你的倒数第二个`cout <<`语句。

因此，将它们与以下内容结合起来应该是一件简单的事情：

```
for (int x = 0; x < 10; x = x + 1) {
    if (height[x] > 60) {
        cout << height << '\n';
    }
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-17T02:40:42.643

这是代码：

```
#include <iostream>

using namespace std;

int main()
{
double count60 = 0.0;
double height[10];
for (int x = 0; x < 10; x = x + 1)
{
    height[x] = 0.0;
}

cout << "You are asked to enter heights of 10 students. "<< endl;
for (int x = 0; x < 10; x = x + 1)
{
    cout << "Enter height of a student: ";
    cin >> height[x];
if (height[x] > 60)
{
    count60 = count60 + 1;
}       
}

cout << "The number of students taller than 60 inches: "<< count60 << endl;
cout << "The heights of these students are: ";
for(int i=0;i<10;++i)
    if(height[i]>60)
        cout<<' '<<height[i];
cout<<endl;

return 0; 
```

}

顺便说一句，我认为 count60 最好是一个无符号整数。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-17T02:40:54.707

尝试使用`std::vector`. 它们基本上是数组的包装器，允许您动态添加值。在这种情况下，您将添加代码：

```
#include <vector> // obviously with the rest of the includes.

std::vector<int> tallPeople;
for (int x = 0; x < 10; x = x + 1)
{
    if (height[x] > 60)
    {
        count60 = count60 + 1;
        tallPeople.push_back(height[x]);
    }   
}

//...

for (int num = 0; num < tallPeople.size(); num++)
{
    cout << tallPeople[num] << endl;
} 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-04-17T02:42:25.683

给你...在空间利用率方面不是最好的，但避免了 STL。

```
 #include <iostream>

        using namespace std;

        int main()
        {
            int count60 = 0;
            double height[10];
            double maxheight[10];
            for (int x = 0; x < 10; x = x + 1)
            {
                height[x] = 0.0;
            }

            cout << "You are asked to enter heights of 10 students. "<< endl;
            for (int x = 0; x < 10; x = x + 1)
            {
                cout << "Enter height of a student: ";
                cin >> height[x];
            if (height[x] > 60)
            {
                maxheight[count60] = height[x];
                count60 = count60 + 1;
            }       
            }

            cout << "The number of students taller than 60 inches: "<< count60 << endl;

            for (int i = 0; i < count60; i = i + 1)
            {
               cout<<"The heights of these students are: "<< maxheight[i] << endl;
            }

            system("pause"); 
            return 0;
        } 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-04-17T02:54:14.167

如果要删除重复项，请执行此操作

```
//bubble sort
for(int i=0;i<9;i++)
{
    for(int j=i+1;j<10;j++)
    {
        if(height[i]>height[j])
        {
            double temp = height[i];
            height[i] = height[j];
            height[j] = temp;
        }       
    }
}   
//print
for(int i=0;i<10;i++)
{
    if(height[i]>60 && (i==0 || height[i]!= height[i-1]))   
    {
        cout << ' ' << height[i];
    }   
} 
```

# javascript - 如何在悬停时随机更改字符串？

> ID：16050446
> 
> 赞同：-3
> 
> 时间：2013-04-17T02:32:28.910
> 
> 标签：javascript, jquery, html, fonts

我需要一个执行以下操作的 javascript/jquery 脚本：

我在 h1 标签或 div 中有一个大字母（大约 40px 字体大小）没关系，可以说它是字母 B。当我将鼠标悬停在它上面时，我希望它从我的字符列表/数组中更改为另一个随机字符指定（即“！@#$%^&*0123456789ABCDEFGHIJKLMNOPQRSTUVWXTZabcdefghiklmnopqrstuvwxyz”）。我怎样才能做到这一点？PS。当我将鼠标悬停再次随机变化时，所以基本上每当我的鼠标经过当前字符时，它都需要更改为新字符（即 B 然后 F 然后 $ 然后 0 然后 s 然后 f 等等）

谢谢 ：）

PS。我实际上希望它是任何 unicode 字符，我经常使用字体，我将操纵字形。那么列表/池看起来像这样吗？“±²·”等 ?

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-17T02:51:28.540

这很简单。如果你的 div 有一个字符 id，你的 javascript 可能看起来像这样：

```
var characters = "!@#$%^&*0123456789ABCDEFGHIJKLMNOPQRSTUVWXTZabcdefghiklmnopqrstuvwxyz";

function changeCharacter() {
    var randomIndex = Math.floor(characters.length * Math.random());
    var randomCharacter = characters[randomIndex];
    $("#character").text(randomCharacter);
}
$("#character").mouseenter(changeCharacter);
$("#character").mouseleave(changeCharacter); 
```

jsFiddle 中的示例：http: [//jsfiddle.net/9EsQJ/1/](http://jsfiddle.net/9EsQJ/1/)

# installation - 在我的应用程序设置中的 Net framework 4 之前安装 SQL Server CE 4.0 错误

> ID：16050450
> 
> 赞同：0
> 
> 时间：2013-04-17T02:32:49.863
> 
> 标签：installation, sql-server-ce-4

我的应用程序需要 SQL Server CE 4.0（使用实体框架）和网络框架 4。我提出了要求网络框架 4 和 SQL Server CE 4.0（对于最后一个我必须提出特殊要求，因为它不在默认列表）。

问题是当我有一个 Windows XP 清理并运行我的应用程序设置时。首先它检测到我没有安装 SQL Server CE 4.0，我同意并且我的应用程序安装了 SQL Server CE。安装后，安装程序检测到我没有 .NET Framework 4 并且再次相同。它还安装了 .NET Framework 4。这两个二进制文件都来自我的设置（没有互联网连接）。

因此，设置然后安装应用程序。当我尝试使用该应用程序时，出现错误：

> 类型：System.ArgumentException，mscorlib，Version=4.0.0.0，Culture=neutral，PublicKeyToken=b77a5c561934e089
> 消息：在配置中找不到指定的存储提供程序，或者无效。
> 源：System.Data.Entity
> 数据：System.Collections.ListDictionaryInternal
> TargetSite：System.Data.Common.DbProviderFactory GetFactory(System.String)
> 堆栈跟踪：
> 在 System.Data.EntityClient.EntityConnection.GetFactory(String providerString)
> 在 System.Data .EntityClient.EntityConnection.ChangeConnectionString(String newConnectionString)
> 在 System.Data.EntityClient.EntityConnection..ctor(String connectionString)
> 在 System.Data.Objects.ObjectContext.CreateEntityConnection(String connectionString)
> 在 System.Data.Objects.ObjectContext..ctor(String connectionString, String defaultContainerName)
> 在 DAL.DataModel.SpecaModelContainer..ctor() 在 D:\Desarrollos\CNE\SPECA\DAL\DataModel\Model.Context.cs:line 24
> 在 D:\Desarrollos\CNE\SPECA\DAL\Repository\SpecaContext.cs 中的 DAL.Repository.SpecaContext.getContext()：DAL.Repository.BaseRepository 的第 17 行
> `1.get_contexto() 在 D:\Desarrollos\CNE \SPECA\DAL\Repository\BaseRepository.cs：
> DAL.Services.DistritoRepository.obtenerUniverso() 中的第 18 行：\Desarrollos\CNE\SPECA\DAL\Repository\DistritoRepository.cs:第 18 行

好的。然后我再次安装 Win XP 并在没有要求的情况下安装我的应用程序。然后我安装 .NET Framework 4，然后安装 SQL Server CE 4.0。当我运行应用程序时，不会出现错误。它工作正常。

**因此，如果我在 .NET Framework 4 之前安装 SQL Server CE 4.0，我就会遇到问题，但反之则不然。**

有谁知道为什么？我在哪里可以告诉我的应用安装项目更改需求顺序？

谢谢

# audit - bash - 监控文件夹 / inotify 或审计或 smth 的 chown（用户和组）更改。别的

> ID：16050451
> 
> 赞同：0
> 
> 时间：2013-04-17T02:32:55.913
> 
> 标签：audit, opensuse, inotify, chown, pulseaudio

我在 opensuse 12.3 上，我的 /run/user/$UID/pulse 文件夹的所有者不时更改为 root:root 导致pulseaudio无法启动：

> [autospawn] core-util.c：无法创建安全目录（/run/user/1000/pulse）：权限被拒绝 [autospawn] lock-autospawn.c：无法访问自动生成锁。[pulseaudio] main.c：无法获取自动生成锁

有没有办法监控何时和谁（用户、pid、程序名称）更改所有者？似乎不适用于 inotify，但我认为它可能适用于审计，但我无法从文档中找到一些东西。还是有其他方法？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-12-07T04:58:47.437

您可以尝试`tripwire`或`iwatch`，但`iwatch`已经好几年没有更新了。

参考：
[记录谁在目录中创建文件，可能使用 inotify](https://stackoverflow.com/questions/19666606/log-who-creates-files-in-a-directory-maybe-using-inotify)

# java - 在类及其元素中访问 Hashtable，Java

> ID：16050454
> 
> 赞同：0
> 
> 时间：2013-04-17T02:33:18.403
> 
> 标签：java, class, object, hashtable

我有一个包含以下内容的“项目”类...

```
public class Item{

    private String barcode;

    private String productName;

    private int quantity;

} 
```

我还有一个名为“Store”的类，它像这样包含我的 HashTable...

```
public class Store implements Serializable{

Hashtable<String, Item> store = new Hashtable<String, Item>();

} 
```

字符串将与条形码相同，并且是 HashTable 中项目对象的“键”。

现在，我主要尝试创建这些类对象的实例，并使用 put() 方法将项目存储在 Hashtable 中，但我似乎无法访问它。我想将项目添加到哈希表中，如果它发现该项目已经存在，它会增加项目数量值。

我对 HashTables 的经验为零，有人可以帮忙吗？

编辑：

我的主要代码...

```
Store store = new Store();

    Item item1 = new Item();
    item1.setProductName("Paper Towel Roll");
    item1.setBarCode("111222333444");
    item1.setQuantity(1);

    store.put("111222333444", item1); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-17T04:49:32.467

添加 Public 以便您可以从包中访问它。它在“package-private”中，因为没有指定修饰符。

```
public class Store implements Serializable{

    private Hashtable<String, Item> items = new Hashtable<String, Item>();

    // Getter and setter for items hashtable

} 
```

主要代码：

```
Store store = new Store();

Item item1 = new Item();
item1.setProductName("Paper Towel Roll");
item1.setBarCode("111222333444");
item1.setQuantity(1);

// NOTE: getItems() is the getter for the store object. 
// Don't expose it as public. Bad encapsulation

store.getItems().put(item1.getBarCode(), item1); 
```

注意：最好避免使用 Hashtable 并改用 HashMap

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-17T04:25:53.930

试试这样：

```
public class Store implements Serializable{
 public Hashtable<String, Item> itemsTable = new Hashtable<String, Item>();
} 
```

主要是：

```
Store store = new Store();

Item item1 = new Item();
item1.setProductName("Paper Towel Roll");
item1.setBarCode("111222333444");
item1.setQuantity(1);

store.itemsTable.put("111222333444", item1); 
```

# javascript - 是否可以在网站上概述非矩形对象？

> ID：16050455
> 
> 赞同：0
> 
> 时间：2013-04-17T02:33:21.103
> 
> 标签：javascript, jquery

我想创建一种在元素悬停时勾勒出某些区域的地图。所以基本上我希望某些国家得到概述，甚至填满。有没有可能的方法来做到这一点，也许使用 javascript/query？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-17T02:37:49.567

你应该看看 raphaeljs - 一个 javascript SVG 库。这是一个完全符合您所说的示例：[http ://raphaeljs.com/world/](http://raphaeljs.com/world/)

# sqldatasource - VB.NET sqlatasource 使用 scope_identity() 检索 id

> ID：16050456
> 
> 赞同：0
> 
> 时间：2013-04-17T02:33:21.967
> 
> 标签：sqldatasource

我有一些 sqldatasource 问题。我想在数据库表中插入 3 个值，然后获取自动递增的 ID。我已经阅读了有关 scope_identity 的所有内容，但我无法正确构建所有内容。我们付钱给开发人员来建立我们的网站，但我已经接管了编程，所以我正在使用现有代码并尝试修改。

这是用户单击时我在子例程中的内容：

```
dim firstlike As Integer = 1
likeslbl.Text = firstlike
sqlvoted.InsertParameters.Clear()
sqlvoted.InsertCommand = "INSERT INTO urls (url,likes,mlsid) SELECT ?url,?likes,?mlsid; SELECT SCOPE_IDENTITY() AS @newID"
sqlvoted.InsertParameters.Add("url", System.Data.DbType.String, url)
sqlvoted.InsertParameters.Add("likes", System.Data.DbType.String, firstlike.ToString)
sqlvoted.InsertParameters.Add("mlsid", System.Data.DbType.String, newmlsid)
sqlvoted.Insert() 
```

这是我的sqldatasource：

```
<asp:SqlDataSource id="sqlvoted" runat="server" ConnectionString="<%$ConnectionStrings:Mym6pConnection %>"
ProviderName="MySql.Data.MySqlClient">
<SelectParameters>
<asp:Parameter Direction="Output" Name="newID" Type="Int32" />
</SelectParameters>
</asp:SqlDataSource> 
```

如果我删除 insertCommand 的“SELECT SCOPE_IDENTITY() AS @newID”部分，一切正常。我只是不确定如何将其与其余部分集成。我猜它与双重“选择”语句有关。不过，我不明白“SELECT ?url,?likes,?mlsid”语句是如何工作的。在我看过的其他任何地方，命令的一部分都是“VALUES @url，@likes，@mlsid”，但这不起作用。这里的任何帮助将不胜感激。

谢谢，杰瑞德

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-17T02:50:24.033

dim str as string = "INSERT INTO urls (url,likes,mlsid) VALUES ('" & url & "','" & firstlike.ToString & "','" & newmlsid & "');SELECT SCOPE_IDENTITY() AS新身份证”

并将 str 分配给 InsertCommand。sqlvoted.InsertCommand = str sqlvoted.Insert()

# sql - Oracle SQL 查询，给定模式

> ID：16050458
> 
> 赞同：-4
> 
> 时间：2013-04-17T02:33:28.813
> 
> 标签：sql, oracle

考虑关系 BOAT(BID, BNAME, COLOUR), SAILOR(SID, SNAME, AGE, RATING) RESERVES(BID,SID, DAY) 我想检索所有水手保留的船只的出价

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-17T02:58:45.007

正确的关系划分实现在这里。其他人可能会建议进行汇总，但在某些情况下可能会导致误导性信息（误报）——“有哪些船只没有保留？”

```
SELECT bid FROM Boat WHERE NOT EXISTS (SELECT sid FROM Sailor WHERE SID NOT IN (SELECT Sid   from Reserves WHERE Sailor.SID = Reserves.SID)) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-17T02:47:26.327

如果每个水手都预订了一艘船，则该船的 RESERVES.SID 计数（仅计算唯一 SID）将与水手的计数相同：

```
SELECT bid FROM Reserves
GROUP BY bid
HAVING COUNT(DISTINCT sid) = (SELECT COUNT(sid) FROM Sailor) 
```

# javascript - 正则表达式从 YouTube URL 返回开始时间 (#t=)

> ID：16050460
> 
> 赞同：1
> 
> 时间：2013-04-17T02:34:06.720
> 
> 标签：javascript, regex, string

我正在寻找一种可以获取以下 URL 的方法：

```
http://www.youtube.com/watch?v=Nlwa0ZWrO8g#t=1m30s?someweirdthing
http://www.youtube.com/watch?v=Nlwa0ZWrO8g#t=90s&anotherweirdthing
http://www.youtube.com/watch?v=Nlwa0ZWrO8g#t=90 
```

返回如下值：

```
1m30s
90s
90 
```

这可以用一个正则表达式吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-17T02:42:11.140

```
youtube.com\S+#t=((\d+m)?(\d+[s]?)?) 
```

找到捕获组 1 的值，它将返回

```
1m30s
90s
90 
```

话虽如此，按照 Blender 的建议使用 Split() 可能会更好。

在 javascript 中，组匹配很简单

```
var youtubeString = "http://www.youtube.com/watch?v=Nlwa0ZWrO8g#t=1m30s?someweirdthing";
var myRegexp      = /youtube.com\S+#t=((\d+m)?(\d+[s]?)?)/g;
var match         = myRegexp.exec(youtubeString);
alert(match[1]); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-17T02:36:18.980

我会使用`.split()`：

```
> 'http://www.youtube.com/watch?v=Nlwa0ZWrO8g#t=1m30s'.split('#t=')[1]
"1m30s" 
```

至于正则表达式，您可以使用：

```
/#t=([^&$?]+)/ 
```

# ipython - 如何在文本编辑器上打开 ipython 命令历史记录？

> ID：16050463
> 
> 赞同：10
> 
> 时间：2013-04-17T02:34:27.223
> 
> 标签：ipython

我正在使用 Windows 机器，并想使用默认文本编辑器打开 ipython 历史命令。有没有允许我这样做的命令？谢谢。

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2013-04-17T17:12:18.050

```
%edit 1-4 
```

这应该在编辑器中打开当前会话的第 1-4 行。您也可以获取以前的会话 - 运行`%hist?`以查看语法是如何工作的。

您可能需要将`EDITOR`环境变量设置为启动您喜欢的编辑器的命令。

# php - Assetic 和 Silex - 调试模式

> ID：16050464
> 
> 赞同：0
> 
> 时间：2013-04-17T02:34:33.780
> 
> 标签：php, silex, assetic

第一个 Stackoverflow 问题。嗯！

Silex-Assetic 就像我的头脑一样。

遵循 https://github.com/mheap/Silex-Assetic/blob/master/doc/assetic.rst 上的文档和 https://github.com/mheap/Silex-Assetic-Demo 上[的](https://github.com/mheap/Silex-Assetic-Demo)[演示](https://github.com/mheap/Silex-Assetic/blob/master/doc/assetic.rst)，我最终得到了这个：

```
$app->register(new SilexAssetic\AsseticServiceProvider());

$app['assetic.path_to_web'] = __DIR__ . '/assets/min';
$app['assetic.options'] = array(
    'debug'              => true,
    'auto_dump_assets'  => true
);

$app['assetic.filter_manager'] = $app->share(
$app->extend('assetic.filter_manager', function($fm, $app) {
        $fm->set('yui_css', new Assetic\Filter\Yui\CssCompressorFilter(
            __DIR__ . '/../yuicompressor-2.4.7.jar'
        ));
        $fm->set('yui_js', new Assetic\Filter\Yui\JsCompressorFilter(
            __DIR__ . '/../yuicompressor-2.4.7.jar'
        ));

        return $fm;
    })
);

$app['assetic.asset_manager'] = $app->share(
    $app->extend('assetic.asset_manager', function($am, $app) {
        $am->set('dragons', new Assetic\Asset\AssetCache(
            new Assetic\Asset\GlobAsset(
                __DIR__ . '/assets/css/*.css',
                array($app['assetic.filter_manager']->get('yui_css'))
            ),
            new Assetic\Cache\FilesystemCache(__DIR__ . '/../cache/assetic')
        ));
        $am->get('dragons')->setTargetPath('dragons-min.css');

        return $am;
    })
); 
```

而且，在我的树枝文件上：

```
{% stylesheets '../../assets/css/*.css' filter='yui_css' output='/assets/min/dragons-min.css' %}
    <link href="{{ asset_url }}" type="text/css" rel="stylesheet" />
{% endstylesheets %} 
```

我有两个问题：

*   `/assets/min/dragons-min.css`不知何故，我以AND 中的一个 dragons-min.css 文件结束`/assets/min/assets/min/dragons-min.css`
*   如果我启用调试模式，我最终会得到奇怪的文件。

像这样：

```
<link href="/assets/min/dragons-min_part_1_bootstrap.min_1.css" type="text/css" rel="stylesheet" />
<link href="/assets/min/dragons-min_part_1_main_2.css" type="text/css" rel="stylesheet" />
<link href="/assets/min/dragons-min_part_1_normalize_3.css" type="text/css" rel="stylesheet" /> 
```

如果调试模式关闭，我想在`/assets/css`. 而且也不要以重复的目录结构结束。

在这个阶段，文档非常糟糕，我对 Silex 也有点陌生。我希望我的结构和代码受到你的挑战。:)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-03-01T23:10:03.857

我会查看这个 repo，它是如何集成 AsseticServiceProvider 的一个更好的例子。 [https://github.com/lyrixx/Silex-Kitchen-Edition](https://github.com/lyrixx/Silex-Kitchen-Edition)

# ios - 使用 nil 视图属性加载带有 nib 结果的 UIViewController

> ID：16050466
> 
> 赞同：0
> 
> 时间：2013-04-17T02:35:21.990
> 
> 标签：ios, objective-c, uiviewcontroller, exc-bad-access, nib

所以我有一些 UIViewControllers 我已经子类化了我试图用 nib 文件作为视图实例化。问题是，一旦我实例化它们，它们上的视图属性就会引发`EXC_BAD_ACCESS`错误并使应用程序崩溃。

这就是我正在做的事情：

### KMLFTPConnectionEditViewController.h

```
#import <UIKit/UIKit.h>
@interface KMLFTPConnectionEditViewController : UIViewController
@end 
```

### KMLFTPConnectionEditViewController.m

```
#import "KMLFTPConnectionEditViewController.h"

@interface KMLFTPConnectionEditViewController ()

@end

@implementation KMLFTPConnectionEditViewController

- (id)init
{
    self = [super initWithNibName:@"KMLFTPConnectionEditView" bundle:nil];
    if ( self ) {
    }
    return self;
}

- (id)initWithNibName:(NSString *)nibNameOrNil bundle:(NSBundle *)nibBundleOrNil
{
    return [self init];
}

- (void)viewDidLoad
{
    [super viewDidLoad];
}

@end 
```

### 别处

```
KMLFTPConnectionEditViewController * ftpvc = [[KMLFTPConnectionEditViewController alloc] init];
NSLog(@"View: %@", ftpvc.view); // <- crash! 
```

现在，至于笔尖，它被称为`KMLFTPConnectionEditView.xib`，它满足我认为它需要的所有要求，据我从其他 SO 帖子以及 Apple 自己的文档中可以看出：

1.  其文件的所有者类设置为`KMLFTPConnectionEditViewController`
2.  其文件所有者的视图出口连接到 nib 中的主视图。
3.  nib 存在于项目中，并且包含在主应用程序包中。

这也是我用笔尖设置的另一个 UIViewController 子类的情况。

今天早上这对我有用，但我必须做出改变（今天有一个 XCode 更新......）我只是没有看到。我已经为此奋斗了几个小时，但无济于事。

我在这里忽略了一些简单的事情吗？

### 更新 1

在这里发布内联太大了，但根据下面 Aaron 的要求，[这里是崩溃日志](https://dl.dropboxusercontent.com/u/479690/picuploader-crashlog.txt)。看起来我设置的 UITextField 外观代理正在递归某些东西。有任何想法吗？

### 更新 2

如果我从尝试加载的笔尖中删除 UITextFields，则没有问题。一旦我将任何 UITextInput 视图放回笔尖，即使它们没有连接到任何插座或以任何方式设置，我也会遇到这种递归崩溃。

由于外观代理和 UITextField 似乎发生了一些事情，这是我在 AppDelegate 中设置的用于定义外观的方法。请注意，任何非标准颜色都已在导入 AppDelegate 的 UIColor+AppStyles 类别中定义。

```
- (void)customizeAppearance
{
    // Customize the navigation bar appearance
    UIImage *navbarBackgroundImage = [[UIImage imageNamed:@"background-navbar.png"] resizableImageWithCapInsets:UIEdgeInsetsMake(0, 0, 0, 0)];
    [[UINavigationBar appearance] setBackgroundImage:navbarBackgroundImage forBarMetrics:UIBarMetricsDefault];
    [[UINavigationBar appearance] setTitleTextAttributes:
         [NSDictionary dictionaryWithObjectsAndKeys:
              [UIColor primaryTextColor], UITextAttributeTextColor,
              [UIColor primaryTextShadowColor], UITextAttributeTextShadowColor,
              [NSValue valueWithUIOffset:UIOffsetMake(0, -1)], UITextAttributeTextShadowOffset,
              [UIFont titleHeaderFont], UITextAttributeFont,
              nil
          ]
     ];
    [[UINavigationBar appearance] setTitleVerticalPositionAdjustment:1 forBarMetrics:UIBarMetricsDefault];

    // And the toolbar buttons
    UIOffset buttonTextOffset = UIOffsetMake(0, 2);
    UIImage *navbarButtonImage = [[UIImage imageNamed:@"background-navbar-button"] resizableImageWithCapInsets:UIEdgeInsetsMake(0, 2, 0, 2)];
    UIImage *navbarBackButton = [[UIImage imageNamed:@"background-navbar-back-button"] resizableImageWithCapInsets:UIEdgeInsetsMake(0, 15, 0, 2)];
    NSDictionary *buttonTextAttributes = [NSDictionary dictionaryWithObjectsAndKeys:
                                            [UIColor invertedTextColor], UITextAttributeTextColor,
                                            [UIColor invertedTextShadowColor], UITextAttributeTextShadowColor,
                                            [NSValue valueWithUIOffset:UIOffsetMake(0, 1)], UITextAttributeTextShadowOffset,
                                            [UIFont buttonFontSmall], UITextAttributeFont,
                                            nil
                                          ];

    // Text styles
    [[UIBarButtonItem appearance] setTitleTextAttributes:buttonTextAttributes forState:UIControlStateNormal];

    // Normal bar buttons
    [[UIBarButtonItem appearance] setBackgroundImage:navbarButtonImage forState:UIControlStateNormal barMetrics:UIBarMetricsDefault];
    [[UIBarButtonItem appearance] setTitlePositionAdjustment:buttonTextOffset forBarMetrics:UIBarMetricsDefault];

    // Back button
    [[UIBarButtonItem appearance] setBackButtonBackgroundImage:navbarBackButton forState:UIControlStateNormal barMetrics:UIBarMetricsDefault];
    [[UIBarButtonItem appearance] setBackButtonTitlePositionAdjustment:buttonTextOffset forBarMetrics:UIBarMetricsDefault];

    // And now for the tab bar
    UIImage *toolbarBackgroundImage = [[UIImage imageNamed:@"background-toolbar.png"] resizableImageWithCapInsets:UIEdgeInsetsMake(0, 0, 0, 0)];
    [[UIToolbar appearance] setBackgroundImage:toolbarBackgroundImage forToolbarPosition:UIToolbarPositionBottom barMetrics:UIBarMetricsDefault];

    // Text Inputs  
    [[UITextField appearance] setBorderStyle:UITextBorderStyleNone];
    [[UITextField appearance] setBackgroundColor:[UIColor clearColor]];
    [[UITextField appearance] setFont:[UIFont textInputFont]];
    [[UITextField appearance] setTextColor:[UIColor invertedTextColor]];
    [[UITextField appearance] setTextAlignment:NSTextAlignmentRight];

    // And labels
    [[UILabel appearance] setFont:[UIFont formLabelFont]];
    [[UILabel appearance] setTextColor:[UIColor invertedTextColor]];

    [[KMLSectionHeaderLabel appearance] setFont:[UIFont titleHeaderFont]];
    [[KMLSectionHeaderLabel appearance] setBackgroundColor:[UIColor sectionHeaderBackgroundColor]];
} 
```

### 更新 3

因此，我将其缩小到导致崩溃的外观代理方法中的一行代码：

```
[[UITextField appearance] setBackgroundColor:[UIColor clearColor]]; 
```

如果我对此发表评论，一切都很好。似乎我什至不需要它来做我想做的事情，但是关于为什么这会导致递归和崩溃的任何想法？更令人费解的是，为什么昨天早上还可以正常工作？我没有对外观代理代码的那部分进行任何更改（不过，我已经调整了这些`UILabel`位并添加了这些`KMLSectionHeaderLabel`位）。我想了解这里发生了什么。

# iphone - 使用 Restkit 解析纯文本

> ID：16050473
> 
> 赞同：1
> 
> 时间：2013-04-17T02:35:50.680
> 
> 标签：iphone, ios, ipad, parsing, restkit

我收到一个 RestKit GET 请求的响应，它只是一个数字。它不是 JSON，不是 HTML，也不是 XML。只是一个普通的数字。例如，当我查看源代码时，我看到的是：

```
19 
```

有人可以告诉我如何使用 RestKit 并仍然解析这些内容吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-17T02:51:40.173

当你可以做这样简单的事情时，为什么还要使用 RestKit

```
NSString *str = [NSString stringWithContentsOfURL:yourURL encoding:NSUTF8StringEncoding error:nil]; 
```

字符串包含数字`19`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-17T03:44:35.817

如果我理解正确，该服务将返回 NSData，它是数字的 UTF8 表示形式。在这种情况下...

```
NSString *resultAsString = [[NSString alloc] initWithData:resultAsData encoding:NSUTF8StringEncoding];
NSNumberFormatter *f = [[NSNumberFormatter alloc] init];
[f setNumberStyle:NSNumberFormatterDecimalStyle];
NSNumber *resultAsNumber = [f numberFromString:resultAsString]; 
```

# javascript - Angularjs 动态创建模型

> ID：16050474
> 
> 赞同：3
> 
> 时间：2013-04-17T02:35:59.637
> 
> 标签：javascript, angularjs

我正在遍历结果集并动态创建模型值，例如：

```
 angular.forEach(users, function(user) {
           $scope.usersModels.online[user.id] = 0;
           $scope.usersModels.online[user.id]['checked'] = 'checked';
           $scope.$watch('usersModels.online[user.id]', function(val) {
                  console.log(val);

           });
     }); 
```

我也在尝试观察这些模型的变化并获得价值。但是，这不起作用，有什么想法吗？

谢谢！

编辑：

```
angular.forEach(users, function(user) {
       $scope.usersModels.online[user.id] = {};
       $scope.usersModels.online[user.id]['value']   = 0;
       $scope.usersModels.online[user.id]['checked'] = 'checked';
       $scope.$watch(function() {
            return $scope.usersModels.online[user.id]['value'];
       }, function(val) {
            console.log(val);
       });
 }); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-17T17:09:43.390

您提供的代码并没有给我们一个完整的画面。一些缺失的部分是：

*   填充`users`对象的代码
*   显示如何将输入绑定到模型的视图代码

因此，我需要做一些假设：

*   填充`users`对象的代码不是问题的原因。
*   绑定到`checked`属性的输入是一个复选框。

考虑到这些假设，我在您的代码中发现的一个直接问题是，当您应该使用布尔值时，您将字符串值 , 分配给属性`"checked"`。`checked`复选框输入的双向绑定仅适用于布尔值。

由于我没有看到完整的图片，我很难说这是否是您的代码的唯一问题。根据您提供的信息，我创建了一个工作[plunkr](http://plnkr.co/edit/HwcxwMv7sU9904fjzhXr?p=preview)。请注意，我只是分配了一个具有三个用户 ID 的`users`对象来生成具有上述假设的对象。将其与您的代码进行比较并确定其他可能的问题（如果有）。如果您在代码中发现其他错误，请务必报告，因为它可能对新手有好处。

# ml - 堆的 Poly/ML 运行时调整大小

> ID：16050483
> 
> 赞同：1
> 
> 时间：2013-04-17T02:36:54.327
> 
> 标签：ml, polyml

我在 Poly/ML 中的堆调整大小的论文中读到了以下内容。但我不明白堆的大小是如何调整的？谁能更详细地解释一下？

> 在每次主要 GC（垃圾收集）结束时，都会调用 adjustHeapSize() 方法。此方法动态改变堆大小，因此有特定数量的可用空间。也就是说，假设成熟空间在一次 GC 后立即包含 l MB 的存活数据，则 adjustHeapSize() 将成熟空间大小更改为 K +l MB，其中 K 是预先计算的常数。K 是 gc.cpp 中的 majorGCFree 静态变量的值，设置为 Poly/ML 运行时开始执行时成熟空间的大小。

我了解每次 GC 后都有一定数量的可用空间。但是如何获得堆大小的下一个计算值？什么是 K 以及如何计算 K？为什么将其设置为**K + l**？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-25T11:33:59.567

这是旧的内存管理机制，在 5.5 版本中已完全取代。您引用的论文是一些导致当前版本的实验性工作。

在旧版本中，初始堆大小设置为 -H 参数中给出的值，默认为物理内存的一半。粗略地说，K就是那个大小。将堆大小设置为 K 和活动数据大小之和的原因是，这意味着每次 GC 之后都有 K 个空闲空间。可用空间的大小大致决定了每次 GC 之间的时间。

这是相当粗略的，新版本调整堆大小以保持 GC 时间与 mutator（应用程序）时间的比率大致恒定，在上限和下限内。

# java - 如何在 Java 课程注册系统中以用户身份登录

> ID：16050488
> 
> 赞同：1
> 
> 时间：2013-04-17T02:37:31.313
> 
> 标签：java, session, authentication, servlets

我正在使用 Web 项目在 Netbeans 上创建一个非常基本的课程注册表单。我已经设法让它达到学生可以通过填写注册表来注册的程度。然后将输入的信息保存到 Derby DB 中。现在我需要它来允许注册学生登录以搜索要添加/删除的课程。

这是我的 RegServlet.java 文件的代码，它接受用户输入并将它们存储在数据库中：

```
public class RegServlet extends HttpServlet {
SaveToDB toDB = new SaveToDB();

@Override
protected void doGet(HttpServletRequest request, HttpServletResponse response) throws ServletException, IOException {
    try {
        try {
            doStuff(request, response);
        } catch (SQLException ex) {
            Logger.getLogger(RegServlet.class.getName()).log(Level.SEVERE, null, ex);
        }
    } catch (InstantiationException ex) {
        Logger.getLogger(RegServlet.class.getName()).log(Level.SEVERE, null, ex);
    } catch (IllegalAccessException ex) {
        Logger.getLogger(RegServlet.class.getName()).log(Level.SEVERE, null, ex);
    }
}

public void doStuff(HttpServletRequest request, HttpServletResponse response) throws ServletException, IOException, InstantiationException, IllegalAccessException, SQLException {
    //see if search parameter is present        
    String userName = request.getParameter("userName");
    String passWord = request.getParameter("passWord");                
    if(!userName.isEmpty()&&!passWord.isEmpty()&&!lastName.isEmpty()&&!firstName.isEmpty()&&!age.isEmpty()&& (sex=='F' || sex=='M') &&!email.isEmpty()) {
        request.setAttribute("userName", userName);
        request.setAttribute("passWord", passWord);

        toDB.createConnection();
        toDB.insertNewUser(userName, passWord, lastName, firstName, age, sex, email);
        RequestDispatcher view = request.getRequestDispatcher("login.jsp");
        view.forward(request, response);            
    } else {
        RequestDispatcher view = request.getRequestDispatcher("index.jsp");
        view.forward(request, response);
    }            
} 
```

这是我的 newUser.jsp 文件：

```
<html>
<head>
    <meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
    <title>New User Registration</title>
</head>
<body>
    <form method="get" action="RegServlet">
        <h1>Register!</h1>
            Fill out information below:<p>                

            Username:
            <input type="text" name="userName" value =""><p>
            Password:
            <input type="text" name="passWord" value =""><p>                

            <input type="submit" value="Finish!"><p>

                <script type="text/javascript">
                    var var1 = "<%= (String) request.getAttribute("userName")%>";
                    if(var1 == (""))
                        document.write("<bSystem doesn't like an empty string.....Try Again!!!</b>");    

                    var var2 = "<%= (String) request.getAttribute("passWord")%>";
                    if(var2 == (""))
                        document.write("<bSystem doesn't like an empty string.....Try Again!!!</b>");
                </script>

    </form>
</body> 
```

这个 jsp 代码片段`<form method="get" action="RegServlet">`将我的代码链接到 RegServlet.java 文件，在 RegServlet 类中，我曾经`RequestDispatcher`将用户发送到名为 login.jsp 的下一页以实际登录。

我需要一些有关 login.jsp 文件的帮助。这是我的 login.jsp 文件：

```
<html>
<head>
    <meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
    <title>Login Page</title>
</head>
<body>
    <form method="Login" action="RegServlet">
    <h1>Login!</h1>        
    Username:
    <input type="text" name="userName" value =""><p>
    Password:
    <input type="text" name="passWord" value =""><p>

    <input type="submit" value="Login!"><p>
</body> 
```

我`doLogin()`在我的 RegServlet.java 类文件中命名了另一个方法`doStuff()`，我将在其中将用户名与存储在数据库中的密码匹配。如果用户名和密码匹配，我想为希望登录系统的学生启动一个会话，以搜索也将存储在数据库中的课程。

我该怎么做`doLogin()`？我应该在哪里实现这个方法？下`doStuff()`方法？还是别的班？我应该如何开始身份验证过程？

在处理所有安全问题之前，我只是先练习基础知识。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-17T23:00:34.403

好吧，首先，您不应该像现在在 newUser.jsp 中那样检查 Javascript 中的用户名和密码，而应该在服务器端进行。该文本“系统不喜欢空字符串”应该来自对类的调用。当您像正在做的那样将密码打印到 javascript 中时，如果用户查看源代码，它就会对用户可见。如果有人拦截流量，则不是很安全。

此外，一旦您验证了 servlet 中的用户名/密码，您应该执行 response.sendRedirect 而不是转发。Forward 会将所有参数转发到下一页。您无需将密码转发到每个页面。如果用户名/密码正确，设置一个会话变量，sendRedirect 到索引页面，并在索引页面上拉会话变量并检查该人是否已登录，如果没有，则重定向回登录页面。

现在，不要在会话变量中设置密码。那很糟。只需在会话变量中设置用户名。对密码更加小心。如果用户名/密码正确，则仅在会话变量中设置用户名。然后在索引页面上，您可以从会话中获取用户名，如果会话中的用户名不为空或为空，则表明该人已登录。否则，如果会话中的用户名为空或空字符串，则您知道人没有登录，所以重定向到登录页面。

至于将 doLogin 与 doStuff 放在哪里，登录 servlet 实际上只需要验证登录，那么为什么不将 doStuff 重命名为 doLogin 并将所有代码放在那里呢？

还有一件事：对于登录，您应该使用 POST 而不是 GET，因此在您的 servlet 中将 doGet 更改为 doPost，并在您的 login.jsp 中在您的表单标签中设置 method=POST。您不希望在地址栏中显示用户密码（这就是 get 所做的）。（表单标签中没有method=login；它的me​​thod=post）

此外，对于您的密码文本框，请使用 type="password" 而不是 type="text"。不同之处在于， type='password' 会在输入密码时隐藏密码。

# java - 使用扫描器从传递的文件创建字符串数组

> ID：16050490
> 
> 赞同：0
> 
> 时间：2013-04-17T02:37:44.847
> 
> 标签：java, arrays, string, file

我正在尝试从作为参数传递的 .txt 文件创建一个字符串数组，但我遇到了问题。有什么帮助吗？这是我的代码：

```
public String[] getStrings( String filename ){

    File sourceFile = new File(filename);
    Scanner input = new Scanner(sourceFile);
    String[] strArray;

    while(input.hasNext()){
      String s1 = input.nextLine();
      strArray = s1.toArray();
    }

    return strArray;
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-17T02:45:53.480

您在该方法中有一些问题需要解决。首先，每当您处理文件 i/o 时，几乎总是存在`IOException`. 例如，您可以将整个代码包装在：

```
public String[] getStrings( String filename ){
    try {
        //Method content
    } catch (IOException e) {
        e.printStackTrace();
    }
} 
```

其次，数组是*固定大小*的，这意味着您需要预先知道数组的大小。而且由于您不知道这一点（文件可以有任意数量的行），因此您需要使用可变大小的容器，例如`ArrayList`。

您可以声明`ArrayList`如下：

```
ArrayList<String> strArray = new ArrayList<String>(); 
```

这将创建一个空的`ArrayList`. 现在，代替`strArray = s1.toArray();`，使用`strArray.add(s1)`。

然后，要转换回数组（因为您的方法返回数组），请使用`strArray.toArray(new String[]{})`. 该`new String[]{}`参数是必要的，以告诉编译器这实际上是一个字符串数组，而不是一般的对象。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-17T02:40:48.550

我想你想用`strArray.append(s1);`. 否则，您每次都会覆盖您的 strArray，并且只接收来自文本文件最后一行的信息。

编辑：忘记了数组大小:(对我来说太多的网络脚本..这个链接应该有帮助。 [如何向数组添加新元素？](https://stackoverflow.com/questions/2843366/how-to-add-new-elements-to-an-array)

# java - 如何合并 2 个或多个 lucene 索引并避免在最终索引中出现重复值？

> ID：16050492
> 
> 赞同：2
> 
> 时间：2013-04-17T02:37:52.887
> 
> 标签：java, lucene

如何合并 2 个或多个 lucene 索引并避免在最终索引中出现重复值？

今天，我正在使用此代码在索引之间进行合并：

```
 IndexWriterConfig iwc = new IndexWriterConfig(Version.LUCENE_36, new StandardAnalyzer(Version.LUCENE_36));
        IndexWriter writer = new IndexWriter(getFSDirectory(INDEX_DIR), iwc);
        LogMergePolicy logMerge = new LogMergePolicy() {

            @Override
            protected long size(SegmentInfo arg0) throws IOException {
                return 0;
            }
        };
        logMerge.setMergeFactor(1000);
        iwc.setRAMBufferSizeMB(50);

        Directory indexes[] = new Directory[INDEXES_DIR.size()];

        for (int i = 0; i < INDEXES_DIR.size(); i++) {
            Directory d = FSDirectory.open(new File(INDEXES_DIR.get(i)).getAbsoluteFile());

            System.out.println("Adding: " + INDEXES_DIR.get(i));
            indexes[i] = d;
        }

        System.out.print("Merging added indexes...");
        writer.addIndexes(indexes);
        System.out.println("done"); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-17T08:37:21.200

我不相信 Lucene 提供了任何很好的简单方法来做到这一点，比如`addIndexes`.

您可能必须：

再次通过索引以删除重复项。您可以使用[TermsEnum](http://lucene.apache.org/core/4_0_0/core/org/apache/lucene/index/TermsEnum.html)获取每个文档中的 id 字段的`term()`和，以检测重复项。然后，您可以从 a 、从对 的调用中`docFreq()`获取 DocID 。[`DocsEnum`](http://lucene.apache.org/core/4_0_0/core/org/apache/lucene/index/DocsEnum.html)`TermsEnum.docs`

或者，可能是更明智的方式，自己执行合并，使用[IndexWriter.updateDocument](http://lucene.apache.org/core/4_0_0/core/org/apache/lucene/index/IndexWriter.html#updateDocument%28org.apache.lucene.index.Term,%20java.lang.Iterable,%20org.apache.lucene.analysis.Analyzer%29)来防止重复。

# c++ - 将这个模板函数专门用于 int8_t 和 uint8_t 的更好方法是什么？

> ID：16050497
> 
> 赞同：1
> 
> 时间：2013-04-17T02:38:22.750
> 
> 标签：c++, templates, template-specialization, vmat

考虑下面的模板`dump`函数：

```
namespace {

    using namespace Eigen;
    using namespace std;
    using namespace vMAT;

    template <typename T>
    NSString *
    dump(NSString * prefix, T * A, vMAT_Size sizeA)
    {
        NSMutableString * dump = [NSMutableString stringWithString:prefix];
        [dump appendString:@" = \n"];
        Eigen::Map<Matrix<T, Dynamic, Dynamic>> DATA(A, sizeA[0], sizeA[1]);
        stringstream out;
        out << DATA << endl;
        [dump appendFormat:@"%s", out.str().c_str()];
        return dump;
    }

    template <> // Specialized so elements print as numbers instead of chars
    NSString *
    dump(NSString * prefix, int8_t * A, vMAT_Size sizeA)
    {
        NSMutableString * dump = [NSMutableString stringWithString:prefix];
        [dump appendString:@" = \n"];
        Eigen::Map<Matrix<int8_t, Dynamic, Dynamic>> DATA(A, sizeA[0], sizeA[1]);
        stringstream out;
        out << DATA.cast<int32_t>() << endl;
        [dump appendFormat:@"%s", out.str().c_str()];
        return dump;
    }

    template <> // Specialized so elements print as numbers instead of chars
    NSString *
    dump(NSString * prefix, uint8_t * A, vMAT_Size sizeA)
    {
        NSMutableString * dump = [NSMutableString stringWithString:prefix];
        [dump appendString:@" = \n"];
        Eigen::Map<Matrix<uint8_t, Dynamic, Dynamic>> DATA(A, sizeA[0], sizeA[1]);
        stringstream out;
        out << DATA.cast<uint32_t>() << endl;
        [dump appendFormat:@"%s", out.str().c_str()];
        return dump;
    }

} 
```

如您所见，我已经复制/粘贴/编辑了它以专门处理如何转储`int8_t`和`uint8_t`矩阵。但这正是模板应该消除的那种疯狂！

我试图向`typename AsT`原始函数添加一个额外的模板参数，但一直运行与抱怨这一行的编译器发生冲突：

```
out << DATA.cast<AsT>() << endl; 
```

Xcode 抱怨它`cast<AsT>()`是一个“依赖模板”并想`template`在它前面插入关键字……这似乎是一种无意义的语法，然后会产生另一个编译器错误。

将这个模板函数专门用于 int8_t 和 uint8_t 的更好方法是什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-17T02:41:32.740

创建另一个仅适用于 uint8_t 和/或 int8_t 的函数模板，并让您专门`dump`调用该其他函数模板。

或者，只需创建从函数模板调用的函数的重载`dump`。这是一个演示其工作原理的示例：http: [//ideone.com/Z88DU6](http://ideone.com/Z88DU6)

我相信对您的代码执行此操作会如下所示，但鉴于我从未使用过 Objective-C（或 Objective-C++），我并不完全肯定它的工作原理。

```
// Note: I believe this works but am not a template wizard and have not tried
namespace {

    using namespace Eigen;
    using namespace std;
    using namespace vMAT;

    template <typename T>
    inline Eigen::Map<Matrix<T, Dynamic, Dynamic>> get_printable_eigen(Eigen::Map<Matrix<T, Dynamic, Dynamic>> const& in)
    {
        return in;
    }

    // No specialization; simple overloads!
    inline Eigen::Map<Matrix<int32_t, Dynamic, Dynamic>> get_printable_eigen(Eigen::Map<Matrix<int8_t, Dynamic, Dynamic>> const& in)
    {
        return in.cast<int32_t>();
    }

    inline Eigen::Map<Matrix<uint32_t, Dynamic, Dynamic>> get_printable_eigen(Eigen::Map<Matrix<uint8_t, Dynamic, Dynamic>> const& in)
    {
        return in.cast<uint32_t>();
    }

    template <typename T>
    NSString *
    dump(NSString * prefix, T * A, vMAT_Size sizeA)
    {
        NSMutableString * dump = [NSMutableString stringWithString:prefix];
        [dump appendString:@" = \n"];
        Eigen::Map<Matrix<T, Dynamic, Dynamic>> DATA(A, sizeA[0], sizeA[1]);
        stringstream out;
        out << get_printable_eigen(DATA) << endl;
        [dump appendFormat:@"%s", out.str().c_str()];
        return dump;
    }
} 
```

（可能还有其他使用`enable_if`和类型特征的解决方案，但 SFINAE 应该保留用于无法通过更简单的方式完成的情况，因为它会产生糟糕的错误消息）

# git - aptana studio sh.exe": gem: 找不到命令

> ID：16050498
> 
> 赞同：2
> 
> 时间：2013-04-17T02:38:27.857
> 
> 标签：git, heroku, gem, aptana3

我正在使用 aptana studio 3。
我正在创建一个名为`UBDTCE`.
我想运行 web 部署向导登录到我的 heroku 帐户，它询问是否安装 heroku gem。
然后我收到一条错误消息：

```
$ gem install heroku && heroku create UBDTCE
sh.exe": gem: command not found 
```

或者

```
$ gem install heroku && heroku create UBDTCE; git push heroku master
sh.exe": gem: command not found
fatal: 'heroku' does not appear to be a git repository
fatal: Could not read from remote repository.

Please make sure you have the correct access rights
and the repository exists. 
```

我是这个 git 的新手，你将如何解决这些错误消息？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-17T08:02:19.837

错误消息`fatal: 'heroku' does not appear to be a git repository`源于第一个错误`gem: command not found`

如“[`-bash`搞砸了？](https://stackoverflow.com/a/3950640/6309) ”中所述，您需要检查您的，并`PATH`确保正确安装了 和 （如在[此评论](https://github.com/heroku/heroku/issues/439#issuecomment-7073122)中：：它确实包括）。`ruby``gem``rvm install ruby-1.9.3; rvm use ruby-1.9.3``rubygems`

# python - nginx/bottle python - 将请求路由到另一个端口

> ID：16050501
> 
> 赞同：5
> 
> 时间：2013-04-17T02:39:01.753
> 
> 标签：python, redirect, nginx, port, bottle

我一直在寻找答案，我相信答案很简单，但我找不到。我认为由于我缺乏对nginx的了解......

我的 nginx 实例在 localhost:8080 上运行，而我的 Bottle 服务器在 localhost:8081 上侦听。如果我从浏览器打开地址，它们可以正常工作，但是当我尝试从在 localhost:8080 上运行的应用程序访问时，我无法检索 Bottle 服务器生成的资源。

我需要做的是将所有对 /data/ 路径的调用重定向到同一个域（localhost）但另一个端口（8081），我的瓶服务器正在侦听的端口。

这是代码：Nginx：

```
server {
    listen       8080;
    server_name  localhost;
    root /Users/Diego/Desktop;

    location / {
        index  index.html index.htm;
    }

    location /data/ {
        proxy_pass http://127.0.0.1:8081;
    }
} 
```

瓶子服务器：

```
@route('/')
def printtest():
    print 'success'
    return 'loaded page'

@route('/<scenename>/data/<filename:path>')
def testMethod(scenename,filename):
    print scenename, filename

run(host='localhost', port=8081, debug=True) 
```

在浏览器中调用 localhost:8080 会向我显示通过 nginx 提供的页面，但是，如果我调用一个链接来检索存储在 /data/directory/filename.json 中的内容，Bottle 似乎没有收到请求。错误日志指出：

```
2013/04/16 18:50:52 [error] 3544#10612: *69 CreateFile() "C:/Users/Diego/Desktop/project1/data/directory/directory-varietal.json" failed (3: The system cannot find the path specified), client: 127.0.0.1, server: localhost, request: "GET /project1/data/directory/directory-varietal.json HTTP/1.1", host: "localhost:8081", referrer: "http://localhost:8080/project1/" 
```

谁能告诉我如何处理这种重定向/路由？

另外，有没有办法在 nginx 的日志中打印提要？像命令 print_entry 或类似命令？

谢谢！

编辑：我试过这个但没有结果...... [https://serverfault.com/questions/208656/routing-to-various-node-js-servers-on-same-machine](https://serverfault.com/questions/208656/routing-to-various-node-js-servers-on-same-machine)

编辑：好的一些改进，我发现这可能是查询位置的问题。使用这个块并请求一个 .json 文件，它实际上会查询 Bottle 服务器。

```
location ~* \.(json)$ {
    proxy_pass http://localhost:8081;
} 
```

编辑：耶！我找到了解决办法……原来是该位置定义的路径有问题。自我注意：仔细阅读手册：[http ://wiki.nginx.org/HttpCoreModule#location](http://wiki.nginx.org/HttpCoreModule#location)

服务器的新代码：

```
server {
    listen       8080;
    server_name  localhost;
    root /Users/Diego/Desktop;

    location / {
        index  index.html index.htm;
    }

    location ~* /data/ {
        proxy_pass http://localhost:8081;
    }
} 
```

无论如何，如果有人有更好的解决方案或任何建议，那么欢迎贡献。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-09-24T21:33:29.257

编辑：耶！我找到了解决办法……原来是该位置定义的路径有问题。自我注意：仔细阅读手册：[http ://wiki.nginx.org/HttpCoreModule#location](http://wiki.nginx.org/HttpCoreModule#location)

服务器的新代码：

```
server {
  listen       8080;
  server_name  localhost;
  root /Users/Diego/Desktop;

  location / {
    index  index.html index.htm;
  }

  location ~* /data/ {
    proxy_pass http://localhost:8081;
  }
} 
```

无论如何，如果有人有更好的解决方案或任何建议，那么欢迎贡献。

# c++ - 线程拒绝退出

> ID：16050502
> 
> 赞同：3
> 
> 时间：2013-04-17T02:39:07.990
> 
> 标签：c++, qt, qt5

我遇到了问题`QThread::currentThread()->quit();`

主.cpp：

```
#include <QCoreApplication>
#include <QtCore>
#include "myobject.h"

QThread* cThread;
MyObject* cObject;

int main(int argc, char *argv[])
{
    QCoreApplication a(argc, argv);
    cThread = new QThread();
    cObject = new MyObject();
    cObject->moveToThread(cThread);

    QObject::connect(cThread, SIGNAL(started()),
                     cObject, SLOT(doWork()));

    QObject::connect(cThread, SIGNAL(finished()),
                     cThread, SLOT(deleteLater()));

    QObject::connect(cThread, SIGNAL(finished()),
                     cObject, SLOT(deleteLater()));

    cThread->start();

    return a.exec();
} 
```

我的对象.cpp：

```
#include "myobject.h"

MyObject::MyObject(QObject *parent) :
    QObject(parent)
{
}

void MyObject::doWork()
{
    qDebug() << "Hi";
    QThread::currentThread()->quit(); // It is supposed to stop here, but it doesn't.
    for (int i = 0; i < 1000000; i++) {
        qDebug() << i;
    }
} 
```

我的对象.h：

```
#ifndef MYOBJECT_H
#define MYOBJECT_H

#include <QtCore>

class MyObject : public QObject
{
    Q_OBJECT
public:
    explicit MyObject(QObject *parent = 0);

signals:

public slots:
    void doWork();

};

#endif // MYOBJECT_H 
```

它应该在 myobject.cpp 中停止，`QThread::currentThread()->quit();`但它没有。

收到一个错误，说这个问题太短了。

解决方法：添加“return;” 在退出电话之后。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-17T14:26:56.127

从[函数退出的文档](http://qt-project.org/doc/qt-4.8/qthread.html#exit)（这是退出调用）：

> 请注意，与同名的 C 库函数不同，此函数确实返回给调用者——它是事件处理停止

这意味着您编写的代码通过进入循环来表现应有的表现。您正在停止执行线程的事件循环，这是*quit*所做的唯一事情。线程将完成`doWork()`.

现在它提出了一个有趣的问题：会`cThread`和`cObject`被删除吗？[否。当控件返回事件循环](http://qt-project.org/doc/qt-4.8/qobject.html#deleteLater)时，将删除带有*deleteLater*的对象。但是这里你只是停止了线程的事件循环，所以即使*deleteLater*被发布，它们也不会被处理。

 *您的对象将继续存在，并且您将发生内存泄漏。一个简单的测试是声明一个虚拟析构函数，`MyObject`它只打印一些东西并检查它是否被调用。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-17T03:37:10.547

如果你有一个，[quit](http://qt-project.org/doc/qt-4.8/qthread.html#quit)函数只会终止与线程关联的事件循环。

默认情况下，[run](http://qt-project.org/doc/qt-4.8/qthread.html#run)方法调用启动事件循环的[exec方法。](http://qt-project.org/doc/qt-4.8/qthread.html#exec)

看QThread的代码：

```
emit started
run(); 
```

这意味着当发出*启动*事件时，您的事件循环尚未启动，因为它只会在 run 方法内部启动。仅当事件循环已通过*exec*调用启动时，方法*quit才有效。*

 *我希望这可以帮助**

# windows - Windows 同时物理驱动器访问

> ID：16050503
> 
> 赞同：2
> 
> 时间：2013-04-17T02:39:19.783
> 
> 标签：windows, file-io

我似乎找不到这个问题的答案。Windows 可以同时读取/写入两个物理上独立的磁盘驱动器（两个驱动器号，非 RAID）吗？显然，您可以在看似同步的模式下读/写应用程序、文件等。但是请求是真正同时运行还是交替运行？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-17T02:50:12.043

它并不完全取决于 Windows。此外，从 Windows 到物理驱动器的接口不止一个（即驱动程序到端点缓冲区、端点缓冲区到 SATA 控制器等）。你的问题的答案可能是肯定的，但你的问题有点含糊。

两个驱动器可以同时从它们的缓冲区读取或写入某些内容到磁盘。

两个驱动器可能同时将数据传输到 SATA 控制器。

CPU 是否会同时读取数据取决于有多少 SATA-to-CPU 或 SATA-to-memory 总线，以及 CPU 是否有多个核心。

在任何情况下，一次都可以进行多个读/写操作，但它们几乎总是在不同的软件线程和硬件总线之间进行划分。这通常是可以的，因为与 CPU 多路复用接口的速度相比，硬盘驱动器需要*很长时间来读取和写入。*

切题的事实：单个 SATA 设备在物理*上不能*同时执行读写操作。如果您在同一个磁盘上有多个分区，这可能与您的问题相关。

# google-maps-api-3 - 在 HtmlService GAS 中加载 Google Maps API

> ID：16050504
> 
> 赞同：3
> 
> 时间：2013-04-17T02:39:34.153
> 
> 标签：google-maps-api-3, google-apps-script, google-caja

我有一个 doGet() [GAS](http://devtest.lagaroo.com.br/dev-test/dev-test-maps)，我在其中调用一个带有`HtmlService`.
在 HTML 文件中，我有基本的 Google Maps API 调用

```
<script src="http://maps.googleapis.com/maps/api/js?v=3.11?key=kkkkkkeeeeeyyyy&sensor=true" type="text/javascript">
</script> 
```

在`<body>`我展示了一个简单的动态地图，带有一个带有功能
的标记`onload="initialize()"`。我在我的
项目中启用了 API，还编辑了允许的裁判。

当我打开页面时，显示一个错误，指示
**属性不能以“__”结尾：规则“setBadSuffix”**

查看 caja 文档时，我了解到
可以从[r5160](https://code.google.com/p/google-caja/source/detail?r=5160)调用 Google Maps API ，对吗？

但是该错误与[HtmlService 文档](https://developers.google.com/apps-script/html_service#GoogleScriptAPI)
中提到的不允许使用此双下划线一致。

那么真的不可能在
HtmlService 中加载谷歌地图 API，如果不是的话，在[Apps
Script 问题](https://code.google.com/p/google-apps-script-issues/)中是否有一个请求，或者在[Caja 问题](https://code.google.com/p/google-caja/issues/list)中更好？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-07-11T19:20:02.690

您可以将 GAS API 用于地图服务。

您不必包含外部脚本，并且您还可以避免一些配额限制（当您确实找到解决方法时，即 HTTP 调用）。

一探究竟：`https://developers.google.com/apps-script/reference/maps/`

雅各布

# java - Car.class - “类”是一个变量吗？

> ID：16050509
> 
> 赞同：4
> 
> 时间：2013-04-17T02:40:31.237
> 
> 标签：java

`Class c1 = Car.class;`这是什么`.class`？它是每个类中都存在的公共变量吗？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-04-17T02:43:32.767

语法与访问静态字段的`.class`语法相同，但它实际上不是静态字段；这是一个特殊的语言功能。它类似于数组的`length`属性，就像一个字段一样被访问，但实际上并没有作为一个字段存储。

要查看差异，请考虑以下示例类：

```
class Test {
  public static Class<Test> myClass = Test.class;
} 
```

运行`javap Test`给

```
class Test {
  public static java.lang.Class<Test> myClass;
  Test();
  static {};
} 
```

如您所见，`Test.myClass`由于我们自己声明它，它被存储为静态字段，但`Test.class`由于它实际上并未存储为静态字段而没有显示。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-04-17T02:42:38.730

这是获取相应`Class`对象的特殊语法。`class`是一个关键字，所以不，没有称为“类”的属性，它只是一个类似于属性访问的语法快捷方式。就像是

```
Class.forName("Car") 
```

除了它不会抛出异常。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2013-04-17T02:46:28.230

Java 中的每个对象都属于某个类。这就是为什么由所有其他类继承的 Object 类定义 getClass() 方法的原因。

`getClass()`, 或 class-literal -`Foo.class`返回一个 Class 对象，其中包含有关该类的一些元数据：

*   姓名
*   包裹
*   方法
*   字段
*   构造函数
*   注释

以及一些有用的方法，如强制转换和各种检查（isAbstract()、isPrimitive() 等）。[javadoc](http://download.oracle.com/javase/6/docs/api/java/lang/Class.html)准确地显示了您可以获得哪些关于类的信息。

它指向`Class`一个类名的实例。如果你有同一个类的对象，你也可以使用

```
Class c1 = Class.forName("Car"); 
```

# java - 从服务器下载文件失败

> ID：16050510
> 
> 赞同：0
> 
> 时间：2013-04-17T02:40:34.663
> 
> 标签：java, http, httpclient, apache-commons-httpclient

现在我正在尝试从使用 302 将获取请求重定向到下载资源的服务器下载文件。好吧，当我使用下面的代码下载文件时，服务器响应失败，我认为服务器知道我不使用浏览器下载文件。当我使用浏览器时，它工作正常并且文件是正确的。

你能告诉我代码中的问题在哪里吗？谢谢。

这是我的代码：

```
@SuppressWarnings("deprecation")
public static void downloadFile(String url, String fileName, String page) throws InterruptedException, IOException {

    httpClient = new DefaultHttpClient(cm);

    // set timeout
    HttpParams httpParams = httpClient.getParams();
    HttpConnectionParams.setSoTimeout(httpParams, TIMEOUT_SECONDS * 1000);

    HttpEntity entity = null;
    HttpGet httpGet = new HttpGet(url);
    Random r=new java.util.Random(UAS.length); 
    //Cookie:AJSTAT_ok_times=7
    String ua = UAS[r.nextInt(UAS.length)];

    httpGet.setHeader("Accept", "text/html,application/xhtml+xml,application/xml;q=0.9,*/*;q=0.8");
    httpGet.setHeader("User-Agent", "Mozilla/5.0 (Windows NT 6.1; WOW64) AppleWebKit/537.31 (KHTML, like Gecko) Chrome/26.0.1410.64 Safari/537.31 AlexaToolbar/alxg-3.1");
    httpGet.setHeader("Accept-Charset", "UTF-8,utf-8;q=0.7,*;q=0.3");
    httpGet.setHeader("Accept-Encoding", "deflate,sdch");
    httpGet.setHeader("Accept-Language", "zh-CN,zh;q=0.8");
    httpGet.setHeader("Cache-Control", "max-age=0");
    httpGet.setHeader("Connection", "keep-alive");
    httpGet.setHeader("Cookie", "AJSTAT_ok_times=7");
    httpGet.setHeader("Host", "www.test.com");
    httpGet.setHeader("Cookie", "AJSTAT_ok_times=7");

    try {
        HttpContext context = new BasicHttpContext();

        HttpResponse remoteResponse = httpClient.execute(httpGet, context);
        entity = remoteResponse.getEntity();
        if (remoteResponse.getStatusLine().getStatusCode() != 200) {
            System.out.println(remoteResponse.getStatusLine().getStatusCode());
        }
    } catch (Exception e) {
        httpGet.abort();
        e.printStackTrace();
        return;
    }

    // 404返回
    if (entity == null) {
        System.out.println("404");
        return;
    }

    File file = new File(fileOutPutDIR + page + "/" + fileName + ".rar");

    File parent = file.getParentFile();
    if (parent.exists() || parent.mkdirs()) {
        // ...
    } else {
        throw new IOException("Failed to create output directory " + parent);
    }

    System.out.println("downloading..." + file.getName());

    InputStream input = entity.getContent();

    try {
        FileUtils.copyInputStreamToFile(input, file);
    } catch (IllegalStateException e) {
        e.printStackTrace();
    } catch (IOException e) {
        e.printStackTrace();
    } finally {
        IOUtils.closeQuietly(input);
    }

} 
```

起居室：

```
<dependency>
    <groupId>org.apache.httpcomponents</groupId>
    <artifactId>httpclient</artifactId>
    <version>4.2.3</version>
</dependency> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-17T02:49:30.310

请查看 http 文档 [http://hc.apache.org/httpclient-legacy/redirects.html](http://hc.apache.org/httpclient-legacy/redirects.html) 我认为您需要手动处理重定向

> 手动处理重定向

300 到 399 之间的所有响应代码都是某种形式的重定向响应。最常见的重定向响应代码是：

```
301 Moved Permanently. HttpStatus.SC_MOVED_PERMANENTLY
302 Moved Temporarily. HttpStatus.SC_MOVED_TEMPORARILY
303 See Other. HttpStatus.SC_SEE_OTHER
307 Temporary Redirect. HttpStatus.SC_TEMPORARY_REDIRECT 
```

注意：在 3xx 范围内有许多响应代码，它们不仅仅表示将请求发送到的不同 URI。下面列出了这些响应代码，它们的处理方式将是特定于应用程序的。

当您的应用程序收到“简单”重定向响应之一时，它应该从 HttpMethod 对象中提取新 URL，然后从该 URL 重试下载。此外，如果重定向形成递归循环，限制将遵循的重定向数量通常是一个好主意。

要连接的 URL 可以从 Location 标头中提取。

```
 String redirectLocation;
    Header locationHeader = method.getResponseHeader("location");
    if (locationHeader != null) {
        redirectLocation = locationHeader.getValue();
    } else {
        // The response is invalid and did not provide the new location for
        // the resource.  Report an error or possibly handle the response
        // like a 404 Not Found error.
    } 
```

确定新位置后，您可以像往常一样重新尝试连接。有关这方面的更多信息，请参阅教程。

# zend-framework - Zend 框架在视图助手中使用多个方法

> ID：16050513
> 
> 赞同：1
> 
> 时间：2013-04-17T02:40:47.150
> 
> 标签：zend-framework, view, methods, helper

我想知道是否可以通过 View Helper 使用多个功能？假设我有这个视图助手：

```
class Zend_View_Helper_Time extends Zend_View_Helper_Abstract {

    public function time($date) {
        // Some code here
    }
} 
```

在我看来，我会这样使用它：

```
$this->time($some_date); 
```

但是，如果我愿意，在同一个助手中可以调用另一个方法，例如：

```
$this->Time->convertMyDate($some_date); 
```

我试图这样做，但不幸的是我遇到了一个错误。我们是否锁定为仅在类名之后使用方法名？

谢谢你的帮助

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-17T06:46:56.810

I do this, and simply return $this in the constructor:

```
public function time() {
     return $this;
}

public function convertMyDate($some_date) {
    ...
} 
```

Then:

```
$this->time()->convertMyDate(); 
```

If you want to keep `$this->time($some_date)`, then you could do as follows (although I think a new method is nicer):

```
public function time($time = false) {
    if(!$time)
       return $this;
    else {
       ...
    }
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-17T08:16:32.407

即使班级工作了这个电话也可能不会：

```
$this->Time->convertMyDate($some_date); 
```

当前正在尝试访问 $this 的公共成员（时间）：

```
$this->time()->convertMyDate($some_date); 
```

现在将访问助手*time()的**convertMyDate()*方法（至少在理论上）

 *构建一个 convertMyDate() 帮助器并像这样使用它可能是最简单和更灵活的：

```
$this->convertMyDate($this->time($some_date)); 
```

查看诸如帮助程序之类的代码也可能会有所帮助，`HeadScript()`因为它会执行您正在寻找的事情的类型。*

# ios - 如何将情节提要中的多个按钮连接到单个动作？

> ID：16050516
> 
> 赞同：21
> 
> 时间：2013-04-17T02:41:00.397
> 
> 标签：ios, objective-c, uiview, uibutton, interface-builder

我目前正在使用 Xcode 4.6，我只是想知道如何在不同的 UIViews 中选择多个按钮，但在单个视图控制器下。CMD 点击似乎不起作用。我需要这个功能，因为在 Xcode 4.6 中，让 IB 上的两个按钮共享相同操作的唯一方法是一次选择它们，然后将操作拖到您的视图控制器。

我的最终目标是使用 Xcode 4.6 中的情节提要在两个不同的 UIView 上获得两个不同的按钮以匹配相同的操作。有没有办法做到这一点？

编辑：我目前正在使用 Xcode 4.6.1 没有任何运气，升级到 4.6.2。

* * *

## 回答 #1

> 赞同：79
> 
> 时间：2013-04-17T03:42:06.003

您可以将多个按钮连接到单个操作，而无需一次全部选择。

但是，在创建动作之后，您需要保存包含动作的源文件，然后 Xcode 才能让您将另一个控件连接到动作。

我用 Xcode 4.6.2 做到了这一点：

[![将按钮连接到操作](https://i.stack.imgur.com/IhUaD.gif)](https://i.stack.imgur.com/IhUaD.gif)

* * *

## 回答 #2

> 赞同：9
> 
> 时间：2016-12-30T04:53:08.623

斯威夫特 3.0 Xcode 8.0+

将所有按钮连接到下面的方法签名。确保参数 sender 的类型为***UIButton（或 UIButton 的子类）***，以便连接情节提要中的其余按钮。

```
@IBAction func dialconfigTapped(_ sender: UIButton) {} 
```

使用*sender.tag*来识别被点击的按钮。

* * *

## 回答 #3

> 赞同：8
> 
> 时间：2014-07-19T16:51:31.600

按照这个步骤

**1.在视图控制器中创建IBAction**

在 .h 文件中

```
-(IBAction)action:(id)sender; 
```

在 .m 文件中

```
-(IBAction)action:(id)sender{

} 
```

**2\. 将所有按钮连接到此操作**

![在此处输入图像描述](https://i.stack.imgur.com/P25ao.png)

**3\. 按照下一张图片给每个按钮一个标签** ![在此处输入图像描述](https://i.stack.imgur.com/f00Jr.png)

**4\. 现在在你的动作函数里面放这些**

```
 -(IBAction)action:(id)sender{

        UIButton *button=(UIButton*)sender;

        if(button.tag==1){

            //your stuff!
        }
        if(button.tag==2){

            //your stuff!
        }
        if(button.tag==3){

            //your stuff!
        }

    } 
```

奔跑吧。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-04-17T02:55:14.280

您应该能够在 IB 中执行此操作。`IBAction`在 IB 中，只需在相关类中将它们指向相同即可。

`IBAction`当动作发生时，如果您想知道从哪个按钮获得了动作，您可以通过从按钮读取文本或使用`tag`您应该从 IB 设置的属性来区分方法中的按钮。

```
- (IBAction)buttonClicked:(id)sender {
    NSLog(@"Button pressed: %@", [sender currentTitle]);
    NSLog(@"Button pressed: %@", [sender tag]);
} 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-04-17T04:28:12.053

您可以使用`IBOutletCollection` 以下链接将帮助您使用它

[http://useyourloaf.com/blog/2011/03/28/interface-builder-outlet-collections.html](http://useyourloaf.com/blog/2011/03/28/interface-builder-outlet-collections.html)

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2014-04-07T07:58:32.047

在 Xcode 5 中，为第一个按钮设置操作后，我必须构建应用程序。然后，这允许我将其他按钮操作连接到相同的 IBAction 方法

* * *

## 回答 #7

> 赞同：-2
> 
> 时间：2013-08-21T05:14:08.860

在 xcode 4.6.3 中，您不再需要在分配操作之前保存。

# mysql - 在 Windows Azure 中恢复 Mysql 数据库

> ID：16050522
> 
> 赞同：0
> 
> 时间：2013-04-17T02:41:49.247
> 
> 标签：mysql, wordpress, azure

我正在 Windows Azure 网站上运行一个 wordpress 博客（免费）。

我尝试创建另一个博客并使用其他数据库。由于我使用的是免费模式，它拒绝我创建一个新数据库，所以我选择使用相同的。

它没有用，我决定删除第二个站点。但是现在，我无法访问我的第一个站点。错误消息是：“建立数据库连接时出错”。

有没有办法处理这个？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-17T18:52:12.917

实际上我联系了 ClearDB，因为他们负责在 Azure 中运行的 MySQL 数据库，并且他们恢复了我的数据库。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-17T07:55:30.920

不。

您无法恢复已删除的 MySQL 数据库。特别是在**预览**功能中。

# python - SQLAlchemy 给出错误没有这样的列

> ID：16050523
> 
> 赞同：-1
> 
> 时间：2013-04-17T02:42:02.603
> 
> 标签：python, sqlalchemy

您好，我是 SQLAlchemy 的新手。

我创建了 Table Row 并使用`Base.metadata.create_all(engine)`. 在我`no_of_row`变成之后`no_of_seats`，我得到了错误

> 没有这样的列：rows.no_of_seats

我应该怎么办？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-17T06:16:42.930

假设`rows.no_of_row`以前有效：

1.  更改数据库中的列名，使其与模型同步。
2.  如果您的数据库中没有数据（或者您可以保留它），并且您没有更改表名，只需调用`Base.metadata.drop_all(engine)`，然后`create_all(..)`再调用

# jquery - 如何使带有 Jquery 缓动的框从中心展开

> ID：16050530
> 
> 赞同：0
> 
> 时间：2013-04-17T02:42:27.087
> 
> 标签：jquery, easing, jquery-easing

嘿伙计们，我在这里很新，想知道一些关于大学项目的 jquery 信息。

我正在使用两个 jquery 脚本：

jquery-1.9.1.min.js jquery.easing.1.3.js

这是我当前缓动的示例 [http://opax.swin.edu.au/~9689419/HDMMD211/TASKS/Task3%20site/](http://opax.swin.edu.au/~9689419/HDMMD211/TASKS/Task3%20site/)

我想要的是一个从中心而不是从左侧扩展和收缩的矩形。

让我知道你们中是否有人找到了解决方案，我卡住了。

欢呼朋友

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-17T02:53:26.410

`margin: auto`在 CSS 中为您的 div (row1, row2...)设置。这将使它们水平居中。如果要保留顶部和底部边距，请设置`margin-left: auto; margin-right: auto;`

# angularjs - 如何在变量中获取角度“| filter”表达式的结果数组？

> ID：16050533
> 
> 赞同：35
> 
> 时间：2013-04-17T02:42:37.440
> 
> 标签：angularjs

在 Angular 中，您可以编写过滤器表达式，例如

```
<input type="text" ng-model="query">

<table>
    <tr ng-repeat="phone in phones | filter: query">
       <td>{{phone.vendor}}</td>
       <td>{{phone.model}}</td>
    </tr>
</table> 
```

它将更新表格以仅显示与`query`您输入的文本匹配的电话`input`。

如何`[phone object]`在变量（例如范围变量）中获取过滤器的相应结果数组，例如当前显示的 s？

* * *

## 回答 #1

> 赞同：81
> 
> 时间：2013-04-17T07:19:47.897

您实际上可以在角度表达式中将新变量分配给范围。所以最简单的解决方案是做`<tr ng-repeat="phone in (filteredPhones = (phones | filter: query))">`. filtersPhones现在是当前范围内的一个变量 - 请参阅[这个 plnkr 示例](http://plnkr.co/edit/0X6XkjMcejXUjMevpZ6p?p=preview)。

* * *

## 回答 #2

> 赞同：19
> 
> 时间：2013-04-17T02:42:37.440

在您的控制器内部，您可以查看`query`文本的更改并使用 Javascript 等效项`{expression} | filter: {expression}`，即（使用您必须注入的服务`$filter('filter')`命名的过滤器）。`'filter'``$filter`

假设您的 HTML 片段由控制器*MyController*控制。然后您可以将其更改为：

```
myApp.controller("MyController", ["$scope", "$filter", function($scope, $filter) {

    $scope.$watch('query', function(newVal, oldVal) {
      console.log("new value in filter box:", newVal);

      // this is the JS equivalent of "phones | filter: newVal"
      $scope.filteredArray = $filter('filter')($scope.phones, newVal);
    });
}]); 
```

每当您`query`进行更改时，过滤后的数组将`filteredArray`在您的 $scope 中可用，并且您可以`filteredArray`在代码段中用作表达式。

* * *

所有这些实际上都应该记录在[http://docs.angularjs.org/api/ng.$filter](http://docs.angularjs.org/api/ng.$filter)和[http://docs.angularjs.org/api/ng.filter:filter](http://docs.angularjs.org/api/ng.$filter)中。但是，第一个链接的文档太少了，您实际上只能从第二个链接的评论中获取它。我试图将它添加到文档中，但是在克隆 angular 并构建文档之后，通过浏览器访问它们根本不起作用，并且导航 API 无声无息地失败，没有任何有用的错误，所以我放弃了。

# c++ - c++ 'std::out_of_range'

> ID：16050537
> 
> 赞同：1
> 
> 时间：2013-04-17T02:42:50.200
> 
> 标签：c++, error-handling

我尝试使用链表打开一个测试文件。部分代码是这样的

```
#include <iostream>
#include <stdlib.h>
#include <string>
#include <fstream>
#include <list>
#include <iomanip>
#include <stdexcept>
using namespace std;

class isbn
{
    private:
    string code;
    int digit;

    public:
        //constructor
        isbn(): code(""), digit(0) { }

        //copy constructor
        isbn(const isbn &other):
        code(other.code),
        digit(other.digit) 
        {
            for(unsigned int i=0; i < (unsigned int) digit; i++)    
                code[i] = other.code[i];
        }
        void setCode(const char &temp);
        void setDigit(const int &num);

        isbn operator = (const isbn &other)
        {
            code = other.digit;
            digit = other.digit;
            for(unsigned int i=0; i < (unsigned int) digit; i++)    
            code[i] = other.code[i];
            return *this;
        }

};

void isbn::setCode(const char &temp)
{
    code = temp;
}
void isbn::setDigit(const int &num)
{
    digit = num;
}

void extIsbn_in_file(list<isbn> &isbns, const string &filename)
{
    ifstream filein;
    filein.clear();
    filein.open(filename.c_str());
    if(!filein)
    {
        cout << "error \n";
        exit(0);
    }
    cout << "\n";

    string contents;
    isbn aisbn;
    list<isbn>::iterator isbnitr;
    isbnitr = isbns.begin();
    int count = 0;

    while(!filein.eof())
    {
        getline(filein, contents, '\n');
        aisbn.setCode(contents.at(count));
        aisbn.setDigit(count);
        isbns.push_back(aisbn);
        count++;

    ..<more code>......
    ..<more code>......

    }
    filein.close();
}

int main(int argc, char *argv[])
{
if(argc > 0)
{
if(argc != 2)
{
cout << "invalid number of argument!! \n";
exit(0);
}
list<isbn> code;
extIsbn_in_file(code, argv[1]);
}
else
{
cout << "invalid number of argument!! \n";
exit(0);
}
return 0;
} 
```

调用给定行时肯定会发生问题

```
 aisbn.setCode(contents.at(count)); 
```

在这段代码中，at 方法已被调用，但不太确定我在 setCode() 上做错了或尝试使用 at()

错误说明 **what(): basic_string::at** 任何想法？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-17T04:15:57.823

我觉得变量`count`超出了索引。`if(count < contents.size())`打电话前检查一下`aisbn.setCode`

我看到代码中的其他缺陷，你`aisbn`一次又一次地将同一个对象推送到`isbns`（`isbns.push_back(aisbn)`）

# c# - 让包装器对象公开其被包装者的属性

> ID：16050541
> 
> 赞同：0
> 
> 时间：2013-04-17T02:43:27.123
> 
> 标签：c#, oop, inheritance, wrapper

我目前正在尝试弄清楚如何让包装类公开它所包装的任何内容的属性，而不必在包装类中手动设置它们。我一直试图弄清楚这是否是一个好的设计选择，或者我是否完全被误导并通过这样做进入一个非常糟糕的地方™。

我也已经让我的包装类继承了一些东西......

下面的示例代码（假对象，请不要读入它们）：

```
public class Car {
    public String Name { get; set; }
    public String Status { get; set; }
    public String Type { get; set; }

    public Car(takes params) {
        // makes car!
    }
}

public class CarWrapper : OtherAutomotiveRelatedThing {
    public Car car;        

    public CarWrapper(Car c) {
        car = c;
    }
}

public class OtherAutomotiveRelatedThing {
    public String Property1 { get; protected set; }
    public String Property2 { get; protected set; }
} 
```

我在包装器对象上使用继承，因为我无法修改基础 Car 类，它需要其他汽车事物的属性。多个其他类也继承自 OtherAutomotiveRelatedThing。

我将 CarWrapper 对象的列表作为 Json 返回（因为我正在构建一个 Web 应用程序），并且包装器对象给我带来了问题。当转换/转换为 Json 时，列表中的 CarWrapper 对象都包含另一个嵌套对象 - Car 对象和我正在​​使用的框架无法获取其属性来满足其需要。

有没有办法在 CarWrapper 的“顶层”公开包装的 Car 对象的属性，而无需执行以下操作：

```
public class CarWrapper : OtherAutomotiveRelatedThing {
    public Car car; 
    public String Name { get; private set; }
    public String Status { get; private set; }
    public String Type { get; private set; }

    public CarWrapper(Car c) {
        car = c;
        this.Name = c.Name;
        this.Status = c.Status;
        this.Type = c.Type;
    }
} 
```

如果我不清楚，如果您有任何问题或需要/想要更多信息，请告诉我。

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-17T09:49:13.757

对我来说，看起来你想要`prototype`像 JavaScript 那样的风格编程，这不是他们在 OOP 中使用的。

也许将其视为“如果我有两个不同的汽车包装器（具有不同的属性集），我应该如何向其中任何一个传递方法？”是一个很好的开始。或“我可以有一个包装汽车和动物的包装器”，以及“如何公开汽车和动物同名但含义不同的公共财产，比如`skin color`？” ETC

答案可以帮助您确定是否需要说接口，或暴露公共对象的包装器，或纯封装，或将语言更改为说 JavaScript。

# visual-studio-2010 - Libtool 将不兼容的标志传递给 Microsoft 的 C/C++ 编译器

> ID：16050544
> 
> 赞同：4
> 
> 时间：2013-04-17T02:43:52.383
> 
> 标签：visual-studio-2010, autotools, libtool

我们正在尝试使用 Libtool，结合 GNU 构建系统工具的完整补充，为 Windows 7 32 位生成“DLL”。更具体地说，我们正在尝试生成 Matlab 模块。

莫名其妙，Autotools 做了两件非常矛盾的事情：

1) 它识别出将使用的 C/C++ 工具链是“msvc7”。因此，它知道我使用的是 Microsoft 的编译器而不是 GCC。

2) 它通过：-Xlinker 到 'cl'。

毫不奇怪，'cl' 抱怨无法识别的选项。如果“Xlinker”的出现之一没有被跟随，这个问题几乎是可以容忍的：

```
.libs/AverageFilter.mexw32 
```

结果是几乎有趣的错误：

```
LINK : fatal error LNK1149: output filename matches input filename 
```

谁能解释这种行为或提供有关如何补救的建议？

# python - 如何用 numpy 在 Cython 中表示 inf 或 -inf？

> ID：16050549
> 
> 赞同：12
> 
> 时间：2013-04-17T02:44:31.260
> 
> 标签：python, optimization, numpy, scipy, cython

我正在逐个元素地构建一个带有 cython 的数组。我想将常量`np.inf`（或`-1 * np.inf`）存储在某些条目中。但是，这将需要返回 Python 来查找`inf`. 有`libc.math`这个常数的等价物吗？或者其他一些可以轻松使用的值，它等同`(-1*np.inf)`于 Cython 并且可以在没有开销的情况下使用？

*编辑*示例，您有：

```
cdef double value = 0
for k in xrange(...):
  # use -inf here -- how to avoid referring to np.inf and calling back to python?
  value = -1 * np.inf 
```

* * *

## 回答 #1

> 赞同：17
> 
> 时间：2013-04-17T02:49:09.383

它没有文字，但`float`可以从字符串中解析它：

```
>>> float('inf')
inf
>>> np.inf == float('inf')
True 
```

或者，`math.h` *可以*（几乎肯定会）声明一个计算结果为 inf 的宏，在这种情况下，您可以使用它：

```
cdef extern from "math.h":
    float INFINITY 
```

* * *

（没有干净的方法来检查是否在纯 Cython 中定义了 INFINITY，因此，如果您想覆盖所有基础，则需要变得 hacky。一种方法是创建一个小的 C 标头，例如`fallbackinf.h`：

```
#ifndef INFINITY
#define INFINITY 0
#endif 
```

然后在您的 .pyx 文件中：

```
cdef extern from "math.h":
    float INFINITY

cdef extern from "fallbackinf.h":
    pass

inf = INFINITY if INFINITY != 0 else float('inf') 
```

（您不能分配给 INFINITY，因为它是一个右值。如果您在标头中 #defined INFINITY 为 1.0/0.0，则可以取消三元运算符，但这可能会引发 SIGFPE，具体取决于您的编译器。）

不过，这绝对属于货物崇拜优化领域。）

* * *

## 回答 #2

> 赞同：15
> 
> 时间：2014-12-08T18:07:31.110

在 Cython 中执行此操作的推荐方法是：

```
from numpy.math cimport INFINITY 
```

请注意，这是“cimport”而不是常规导入。这是 Cython 对 NumPy 的官方包装`npymath`。

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2013-04-17T20:32:07.810

您可以使用 Numpy 的数学库，[请参阅此处了解可用的内容](http://docs.scipy.org/doc/numpy/reference/c-api.coremath.html)：

```
来自“numpy/npy_math.h”的 cdef extern：
    双信息“NPY_INFINITY”

```

在构建 Cython 扩展模块时，需要指定正确的包含目录和库来链接：

```
>>> 从 numpy.distutils.misc_util 导入 get_info
>>> get_info('npymath')
{'define_macros': [],
 '库'：['npymath'，'m']，
 'library_dirs': ['/usr/lib/python2.7/dist-packages/numpy/core/lib'],
 'include_dirs': ['/usr/lib/python2.7/dist-packages/numpy/core/include']}

```

从该函数获得的信息可以传递到 Python distutils 或您使用的任何构建系统。

# c++ - 在 C++ 中产生 typename 和 typedef 相关错误的模板类？

> ID：16050550
> 
> 赞同：1
> 
> 时间：2013-04-17T02:44:35.807
> 
> 标签：c++, templates, inheritance

我有一个包含类 Car 的实例的类 Tran。如果程序包含`typename`before `typedef`，则会产生错误：“expected nested-name-specifier before `typedef`”。如果不包含`typename`，则会产生错误：“在 'Tran::CarType::Model' 之前需要 'typename'，因为 'Tran::CarType' 是依赖范围”。是什么导致了这个问题？

```
#include "Car.hpp"

template<typename A, typename B, typename C>
class Tran {

    public: 
    typedef Car<A, B> CarType;  //compilation error
    typedef CarType::Model M;   //compilation error

private: 
CarType myCar;
} 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-17T02:46:44.670

问题在于这一行：

```
typedef CarType::Model M; 
```

这里，注意`CarType`定义为

```
typedef Car<A, B> CarType; 
```

请注意，这`CarType`取决于什么`A`和`B`是。事实上，正因为如此，它才被称为*依赖类型*。

在 C++ 中，如果要访问嵌套在依赖类型中的类型，则必须明确告诉编译器您正在从依赖类型内部查找其他类型的名称。因此，这一行是错误的：

```
typedef CarType::Model M; 
```

因为没有迹象表明这`Model`是一个类型名称。要解决此问题，请将行更改为

```
typedef typename CarType::Model M; 
```

在这里，`typename`关键字向 C++ 指示`Model`嵌套在从属类型中的类型的名称`CarType`。

希望这可以帮助！

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-17T02:47:19.960

正确的顺序是`typedef typename`，而不是相反。您只需要在第二个声明中使用它，因为它是一个从属名称，编译器在查找的第一阶段无法知道它是什么`CarType::Model`。

# c - 如何用空终止符替换换行符？

> ID：16050551
> 
> 赞同：2
> 
> 时间：2013-04-17T02:44:51.243
> 
> 标签：c

我的程序是一个任务列表管理器......它使用 fgets/stdin 获取任务的名称、优先级和日期，并将其放入一个结构中。这是我的程序的相关片段：

```
task *makeTask(char *name, char *date, char *priority)
{

        task *the_task = malloc(sizeof(task));

        int i;

        the_task->task_name = (char*)malloc(sizeof(char) * (strlen(name)));

         for (i=0;name[i] != '\n'; i++) {
                if (name[i] != '\0')
                the_task->task_name[i] = name[i];
        }

        the_task->task_name[i] = '\0';

        //already allocated for in struct
        for (i=0;date[i] != '\n'; i++) {
                if (date[i] != '\0')
                the_task->date_entered[i] = date[i];
        }

        the_task->date_entered[i] = '\0';

        the_task->priority = atoi(priority);
        return the_task; // FILE THIS IN
} 
```

这是预期的输出：

```
0: Feed the cats, priority: 5\.  Entered 01/01/1111 
```

这是实际的输出：

```
0: edsats, priority: 5\.  Entered 01/01/1111 
```

在过去的一个小时里，我一直在挠头试图解决这个问题……我的代码怎么了？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-17T02:49:40.250

我会建议几件事：

*   您需要一个额外的字节来存储任务名称，以保存空终止符
*   用于`strdup`为字符串分配内存并将其复制到其中（用于任务名称）
*   用于`strcpy`将日期复制到其预先分配的字符串中

我也不确定您是否向我们展示了实际导致问题的代码，但请尝试修复任务名称内存块以查看是否有帮助。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-17T02:49:44.327

1.  您没有为`the_task->date_entered`.

2.  您需要添加`strlen(name) + 1`字节来说明空终止符。

# c++ - 使用此代码时，我不断收到错误消息。我正在尝试在继承的类中使用构造函数。C++

> ID：16050553
> 
> 赞同：1
> 
> 时间：2013-04-17T02:44:59.927
> 
> 标签：c++, class, inheritance

所以，我的问题是我对课程知之甚少。所以，我试图让这个构造函数工作。我需要基构造函数和派生类的构造函数来工作，而无需在那里实现它。我可以在那里定义它，但我无法实现它。编译器告诉我它需要一个花括号。#ifdef SHAPE.H #endif SHAPE.H #define

```
#include<string>
using namespace std;
class QuizShape
{
    private:    
        char outer, inner;
        string quizLabel;

    public:
        //Constructor
        QuizShape();
};

class Rectangle : public QuizShape
{
    public:
        int height, width;

        //Getter & setter methods
        int getHeight() const;
        void setHeight(int);
        int getWidth() const;
        void setWidth(int);

        //Constructor for Rectangle
        Rectangle() : QuizShape();
};

class Square : public Rectangle
{
    public:
        //constructors
        Square() : Rectangle (); This area here is where the error comes // IT says it expects a { but I'm not allowed to define the constructor in line.
        Square(int w, int h) : Rectangle (height , width);
}; 

class doubleSquare : public Square
{
//Fill in with constructors 
}; 
```

我不明白它给我的错误。我很确定我也没有重新定义它。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-17T02:51:28.717

需要定义构造函数。请观察构造函数定义/使用方式的变化。

```
 #include<string>
    using namespace std;
    class QuizShape
    {
        private:    
            char outer, inner;
            string quizLabel;

        public:
            //Constructor
            QuizShape();
    };

    class Rectangle : public QuizShape
    {
        public:
            int height, width;

            //Getter & setter methods
            int getHeight() const;
            void setHeight(int);
            int getWidth() const;
            void setWidth(int);

            //Constructor for Rectangle
            Rectangle() { } 
            Rectangle(int h, int w): height(h), width(w) { }
    };

    class Square : public Rectangle
    {
        public:
            //constructors
          Square() { }  // 
          Square(int w, int h) : Rectangle (h, w) {}
    }; 

    class doubleSquare : public Square
    {
    //Fill in with constructors 
    }; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-17T02:47:08.123

将您的构造函数初始值设定项列表移动到定义中。例如，对于`Square`：

```
//declarations
Square();
Square(int w, int h);

//definitions
Square() : Rectangle() {/*body*/}
Square(int w, int h) : Rectangle(w, h) {/*body*/} //assuming you meant w, h 
```

对声明中带有初始化列表的其他构造函数也这样做。

# git - Bitbucket 合并不会更新主分支

> ID：16050554
> 
> 赞同：2
> 
> 时间：2013-04-17T02:45:06.460
> 
> 标签：git, bitbucket

我正在尝试熟悉**GIT**和**Bitbucket**。
我首先创建了一个`master`分支，然后将所有内容推送到它（`add origin..`），因为我已经在我的项目中完成了一些工作。

然后我的命令看起来像这样：

```
git branch dev
git checkout dev 
```

做一些工作..

```
git add . -A
git commit -m "Some work done"
git push -u origin dev 
```

回到大师..

```
git checkout master
git merge dev 
```

问题是，由于我计算机上的文件夹现在在 master 和 dev 分支上同步，Bitbucket 上的 master 分支仍然没有更新，它是我最初上传的源。

感谢您的任何建议！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-17T02:54:48.730

*   您还需要推送`master`分支的更改。

    ```
    git push origin master 
    ```

    如果无法抱怨上游分支未设置，请尝试：

    ```
    git push -u origin master 
    ```

*   如果您只想推送您`refs/heads`（即所有本地分支）中的所有参考，您可以运行以下命令：

    ```
    git push origin --all 
    ```

*   另请注意，任何标签也不会自动推送到遥控器。您需要明确指定标签名称：

    ```
    git push origin my-new-tag 
    ```

*   `refs/tags`您还可以要求 git 推送本地仓库中的所有标签（在 下）：

    ```
    git push origin --tags 
    ```

*   您还可以像这样链接这些命令，例如推送所有分支和所有标签：

    ```
    git push origin --all --tags 
    ```

**有关 git 中的分支的更多信息**：

您可以将 git 中的分支视为跟踪提交的轻量级指针。当这样的分支指针在本地仓库中移动或更新时，并且您调用 a `push`，git 将更新远程端的分支指针，并将当前分支指针和新分支指针之间的所有提交发送到远程.

当您将一个分支合并到另一个分支时（就像您合并`dev`到中一样`master`），您将要么进行快进合并（两个分支指针将基本上指向同一个提交），要么创建一个新的合并提交，该分支`master`将指向至。

同样，这些更改仅在本地可见，直到您将它们推送到远程。

# javascript - 当我单击网格中的单元格时，如何获取单元格的列标题和行的第一个 td？

> ID：16050561
> 
> 赞同：1
> 
> 时间：2013-04-17T02:46:02.247
> 
> 标签：javascript, jquery, kendo-ui, kendo-grid, kendo-asp.net-mvc

当我单击网格中的单元格时，如何获取单元格的列标题和行的第一个 td？

我可以使用以下方式获取 td 的文本：

```
trigger.find('td:first').attr('id') 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-17T08:35:46.913

您可以使用此类方法[jsFiddle](http://jsfiddle.net/6n8vt/)。

要获取行中单元格的位置，您可以使用`jQuery.fn.index`和 对于第一个单元格，您可以使用 获取行，`$(this).closest("tr")`然后使用 选择第一个单元格`.find("td:first")`。

# linux - 查找和替换将执行简单算术的函数？

> ID：16050563
> 
> 赞同：0
> 
> 时间：2013-04-17T02:46:05.540
> 
> 标签：linux, svg, sed, replace, linux-mint

我通过在某些文本输入上使用 sed 查找和替换来生成简单的 SVG 图。**但是，我需要一个涉及简单数学**的更复杂的查找和替换操作，以更改某些 X 和 Y 值。

例如，我需要将所有 Y 值乘以 0.5 或 0.2 或 0 的系数。

由于我希望它工作的方式，它无法通过 SVG 中的转换操作来实现。*

我只需要能够找到`([0-9.]*)VERT`（在 sed 中）的所有实例并替换为`\1`乘以我选择的常数的数学结果。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-17T04:45:57.637

```
 perl -ape 's/[0-9.]*(?=VERT)/$& * .5/e' file 
```

希望这有效 +

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-17T03:07:29.763

您可以编写一个简单的 perl 脚本。不确定是什么决定了 $factor，但这至少应该给你一个良好的开端。

```
#! /usr/bin/perl
my $factor=0.5;
while(my $line=<>) {
    if ($line =~ /([0-9.]*)VERT/) {
        my $num = $factor * $1;
        $line =~ s/([0-9.]*)VERT/${num}VERT/;
    }
    print $line;
} 
```

用法： `./scriptname.pl <file_to_process.txt`;

# jquery - mouseMove 上的水平滚动 - 较小 div 中的宽 div 溢出：隐藏（无法让数学工作）

> ID：16050564
> 
> 赞同：9
> 
> 时间：2013-04-17T02:46:12.437
> 
> 标签：jquery, math, scroll, mousemove

我正在尝试制作一条图像拇指“线”，它在鼠标移动时滚动。我让它工作了，但我现在的问题是我想在两边做一个“填充”，所以我不必把鼠标一直放在两边就能看到第一个/最后一个拇指。但我真的无法让它工作：/

这是我现在拥有的脚本：

```
// MouseMove scrolling on thumbs
var box = $('.thumbs-block'),
    innerBox = $('.thumbs'),
    lastElement = innerBox.find('a:last-child');

var offsetPx = 100;
var boxOffset = box.offset().left;

var boxWidth = box.width() /* - (offsetPx*2)*/;
var innerBoxWidth = (lastElement[0].offsetLeft + lastElement.outerWidth(true)) - boxOffset /* + (offsetPx*2)*/;

scrollDelayTimer = null;
box.mousemove(function (e) {
    console.log('boxWidth: ' + boxWidth + '   innerBoxWidth: ' + innerBoxWidth + '   box.scrollLeft(): ' + box.scrollLeft());

    var mouseX = e.pageX;
    var boxMouseX = mouseX - boxOffset;

    if ((boxMouseX > offsetPx) && (boxMouseX < (boxWidth - offsetPx))) {
        var left = (boxMouseX * (innerBoxWidth - boxWidth) / boxWidth) /* - offsetPx*/;

        clearTimeout(scrollDelayTimer);
        scrollDelayTimer = setTimeout(function () {
            scrollDelayTimer = null;
            box.stop().animate({
                "scrollLeft": left
            }, {
                queue: false,
                duration: 500,
                easing: 'linear'
            });
        }, 10);
    }
}); 
```

我尝试在一些地方添加偏移量（内联注释掉），其中一些让它在一端工作，但不是在另一端工作：/

我很确定这是数学上的问题，但我不知道我应该做什么：/

这是一个 jsFiddle：http: [//jsfiddle.net/6CJfs/1/](http://jsfiddle.net/6CJfs/1/)

我希望我的问题足够清楚，不知道如何解释，希望有人能提供帮助:)

* * *

## 回答 #1

> 赞同：22
> 
> 时间：2013-04-17T13:16:21.610

你的脚本不流畅，所以我
用一个非常简单的方法完全修改了它（对不起:)：

```
$(function() {

  const $bl = $(".thumbs-block"),
    $th = $(".thumbs"),
    blW = $bl.outerWidth(),
    blSW = $bl.prop("scrollWidth"),
    wDiff = (blSW / blW) - 1, // widths difference ratio
    mPadd = 60, // Mousemove Padding
    damp = 20; // Mousemove response softness

  let posX = 0,
    mX2 = 0, // Modified mouse position
    mmAA = blW - (mPadd * 2), // The mousemove available area
    mmAAr = (blW / mmAA), // get available mousemove fidderence ratio
    itv = null;

  const anim = () => {
    posX += (mX2 - posX) / damp; // zeno's paradox equation "catching delay"    
    $th.css({
      transform: `translateX(${-posX * wDiff}px)`
    });
  };

  $bl.on("mousemove", function(e) {
    const mouseX = e.pageX - $(this).prop("offsetLeft");
    mX2 = Math.min(Math.max(0, mouseX - mPadd), mmAA) * mmAAr;
  }).on("mouseenter", function(e) {
    itv = setInterval(anim, 10);
  }).on("mouseleave", function() {
    clearInterval(itv);
  });

});
```

```
.thumbs-block {
  position: relative;
  overflow: hidden;
  max-width: 100%;
}

.thumbs-block .thumbs {
  display: flex;
  flex-flow: row nowrap;
}
```

```
<div class="thumbs-block">
  <div class="thumbs">
    <a class="thumb"><img src="http://placehold.it/120x120/0bf&text=01" /></a>
    <a class="thumb"><img src="http://placehold.it/120x120/f0b&text=02" /></a>
    <a class="thumb"><img src="http://placehold.it/120x120/bf0&text=03" /></a>
    <a class="thumb"><img src="http://placehold.it/120x120/b0f&text=04" /></a>
    <a class="thumb"><img src="http://placehold.it/120x120/fb0&text=05" /></a>
    <a class="thumb"><img src="http://placehold.it/120x120/0fb&text=06" /></a>
    <a class="thumb"><img src="http://placehold.it/120x120/0bf&text=07" /></a>
    <a class="thumb"><img src="http://placehold.it/120x120/f0b&text=08" /></a>
    <a class="thumb"><img src="http://placehold.it/120x120/bf0&text=09" /></a>
    <a class="thumb"><img src="http://placehold.it/120x120/b0f&text=10" /></a>
    <a class="thumb"><img src="http://placehold.it/120x120/fb0&text=11" /></a>
    <a class="thumb"><img src="http://placehold.it/120x120/0fb&text=12" /></a>
  </div>
</div>

<script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.5.1/jquery.min.js"></script>
```

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2021-05-06T23:35:39.507

```
var $imgWrapper = $(".js-img-wrapper");
var $imgInnerWrapper;
var elementLength = 0;
var width = 0;
var elementRangeWidth = 0;
var saveShowedNumberOfElement = 1;

$imgWrapper.on("mouseenter", function() {
    $imgInnerWrapper = $(this).find(".js-img-inner");
    elementLength = $imgInnerWrapper.children().length;
    width = $(this).outerWidth();
    elementRangeWidth = width / elementLength;
}).on("mousemove", function(e) {
    var mousePosition = e.pageX - $(this).offset().left;
    if (mousePosition > 0 && mousePosition <= width) {
        var showedNumberOfElement = Math.ceil(mousePosition / elementRangeWidth);

        if (saveShowedNumberOfElement !== showedNumberOfElement) {
            saveShowedNumberOfElement = showedNumberOfElement;
            var imagePositionOffset = -width * (showedNumberOfElement - 1);
            $imgInnerWrapper.css({
                transform: "translateX("+ imagePositionOffset +"px)"
            });
        }
    }
}).on("mouseleave", function() {
    $imgInnerWrapper.css({
        transform: "translateX(0px)"
    });

    $imgInnerWrapper = undefined;
    elementLength = 0;
    width = 0;
    elementRangeWidth = 0;
    saveShowedNumberOfElement = 1;
}); 
```

您可以在[CodePen上观看它是如何工作的](https://codepen.io/vUdav/pen/qBrEEqd)

# jqgrid - jqGrid：单字段搜索中的搜索规则

> ID：16050565
> 
> 赞同：1
> 
> 时间：2013-04-17T02:46:14.407
> 
> 标签：jqgrid

我正在尝试仅验证整数数据的搜索字段，但不幸的是我无法这样做。我已经尝试了所有可能的解决方案，例如 searchrules:{required:true,integer=true} 等。但没有一个证明是富有成效的。我基本上使用该字段启动搜索对话框并且没有输入任何数据，我点击了“查找”按钮。根据上述选项，我相信应该向用户显示一条验证消息，要求他在点击查找之前在字段中输入一个值。

[更新] - 代码片段

```
 var grid = $("#list");  
            grid.jqGrid({
             url:'/index.jsp',
             datatype: 'json',
             mtype: 'POST',
             colNames:['Name','Age', 'Address'],
             colModel :[ 
                  {name:'name', index:'name', width:55,search:true }, 
                  {name:'age', index:'age', 
                   width:90,editable:true,search:true, stype:'text',
                   searchrules:{required:true,integer:true}}, 
                  {name:'address', index:'address', width:80, 
                   align:'right', editable: true,search:false }
             ],
             pager: '#pager',
             jsonReader : {
                     root:"address",
                     page: "page",
                     total: "total",
                     records: "records",
                     repeatitems: false
             },
             rowNum:10,
             rowList:[10,20,30],
             sortname: 'name',
             sortorder: 'desc',
             viewrecords: true,
             gridview: true,
             autowidth: true,
             toppager: true,
             loadtext: "Loading records.....",
             caption: 'Test Grid',
             gridComplete: function(){ 

         }

          });

      **grid**.jqGrid('navGrid','#pager',
      {view:true,edit:true,add:true,del:true,refresh:true,
       refreshtext:'Refresh',addtext:'Add',
       edittext:'Edit',cloneToTop:true,
       edittitle: "Edit selected row"},
      {},{},{},
      {caption: "Search The Grid",Find: "Find Value",Reset: "Reset"},
      {}); 
```

[更新]：无法使搜索规则在单一/高级搜索模式下正常工作。

[更新]：即使 [jqGrid Demo](http://www.trirand.com/blog/jqgrid/jqgrid.html)中的“搜索验证”也不适用于搜索规则。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-19T17:57:07.673

The reason of described problem is a bug in jqGrid. [The line](https://github.com/tonytomov/jqGrid/blob/v4.4.5/js/grid.filter.js#L153)

```
ret = $.jgrid.checkValues(val, -1, null, colModelItem.searchrules, colModelItem.label); 
```

initialize the third parameter of `$.jgrid.checkValues` to `null`, but the last version of `checkValues` implementation started (see [the line](https://github.com/tonytomov/jqGrid/blob/v4.4.5/js/grid.common.js#L571)) with

```
var cm = g.p.colModel; 
```

but `g` is initialized to `null`. [The last modification](https://github.com/tonytomov/jqGrid/commit/16146121d0c6ef356753588188daf0fb14e0b244) which generates the error was based on [my suggestion](http://www.trirand.com/blog/?page_id=393/bugs/small-bug-in-jgrid-checkvalues/#p28521), but I don't wrote the part of the code.

One can solve the problem in different way. I would suggest to modify the line where `$.jgrid.checkValues` will be called with `null` parameter to the following

```
ret = $.jgrid.checkValues(val, -1, {p: {colModel: p.columns}}, colModelItem.searchrules, colModelItem.label); 
```

Additionally, to be sure, I would suggest to modify [one more line](https://github.com/tonytomov/jqGrid/blob/v4.4.5/js/grid.common.js#L590)

```
if(!nm) { nm = g.p.colNames[valref]; } 
```

to

```
if(!nm) { nm = g.p.colNames != null ? g.p.colNames[valref] : cm.label; } 
```

The fixed version of `jquery.jqGrid.src.js` one can get [here](http://www.ok-soft-gmbh.com/jqGrid/jquery.jqGrid-4.4.5/js/jquery.jqGrid.src-ValidateSearch.js). I will post my bug report with the same suggestions later ti trirand.

# haskell - Haskell 重叠/不连贯的实例

> ID：16050566
> 
> 赞同：13
> 
> 时间：2013-04-17T02:46:17.480
> 
> 标签：haskell, types

我知道这是代码有点傻，但是有人可以解释为什么这会`isList [42]`返回`True`而`isList2 [42]`prints `False`，以及如何防止这种情况？我想更好地理解一些更晦涩的 GHC 类型扩展，我认为这将是一个有趣的例子。

```
{-# LANGUAGE FlexibleInstances #-}
{-# LANGUAGE OverlappingInstances #-}
{-# LANGUAGE IncoherentInstances #-}

class IsList a where
  isList :: a -> Bool

instance IsList a where
  isList x = False

instance IsList [a] where
  isList x = True

isList2 = isList

main = 
  print (isList 42) >> 
  print (isList2 42) >> 
  print (isList [42]) >> 
  print (isList2 [42]) 
```

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2013-04-17T03:08:30.177

这真的很简单。让我们问一下 GHCi 的类型`isList2`是什么：

```
∀x. x ⊢ :t isList2
isList2 :: a -> Bool 
```

这与实例不匹配`[a]`（即使它可以通过统一），但它确实`a`立即匹配实例。因此，GHC 选择`a`实例，因此`isList2`返回`False`.

这种行为恰恰是什么`IncoherentInstances`意思。实际上，这是一个很好的演示。

* * *

有趣的是，如果你简单地禁用`IncoherentInstances`，我们会得到完全相反的效果，GHCi 现在这样说：

```
∀x. x ⊢ :t isList2
isList2 :: [Integer] -> Bool 
```

发生这种情况`isList2`是因为顶层绑定没有使用函数语法定义，因此受到 Dreaded Monomorphism Restriction 的约束。所以它被专门用于它实际使用的实例。

添加`NoMonomorphismRestriction`和禁用`IncoherentInstances`，我们得到了这个：

```
∀x. x ⊢ :t isList2
isList2 :: IsList a => a -> Bool
∀x. x ⊢ isList2 'a'
False
∀x. x ⊢ isList2 "a"
True
∀x. x ⊢ isList2 undefined

<interactive>:19:1:
    Overlapping instances for IsList a0 arising from a use of `isList2' 
```

这是预期的重叠行为，如果选择不明确，则根据使用和投诉选择实例。

* * *

关于对问题的编辑，我不相信没有类型注释就可以获得所需的结果。

第一个选项是提供`isList2`类型签名，以防止`IncoherentInstances`过早选择实例。

```
isList2 :: (IsList a) => a -> Bool
isList2 = isList 
```

您可能需要在其他任何`isList`提到（甚至是间接）的地方做同样的事情，而不是应用于一个论点。

第二个选项是消除数字文字的歧义并禁用`IncoherentInstances`.

```
main = 
  print (isList (42 :: Integer)) >> 
  print (isList2 (42 :: Integer)) >> 
  print (isList [42]) >> 
  print (isList2 [42]) 
```

在这种情况下，有足够的信息来选择一个最具体的实例，`OverlappingInstances`它的事情也是如此。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-17T05:55:25.417

下面的[代码](http://ideone.com/rLbJiH)不需要`IncoherentInstances`：

```
{-# LANGUAGE FlexibleInstances #-}
{-# LANGUAGE OverlappingInstances #-}

class IsList a where
  isList :: a -> Bool

instance IsList a where
  isList x = False

instance IsList [a] where
  isList x = True

isList2 :: (IsList a) => a -> Bool
isList2 = isList

main = do
  print (isList (42 :: Int))
  print (isList [42 :: Int])
  print (isList2 (42 :: Int))
  print (isList2 [42 :: Int]) 
```

我建议不要使用`IncoherentInstances`，这似乎会造成很多麻烦，因为您可以很容易地根据上下文默默地调用不同的重载。

# breeze - 在 Breeze 中验证多个属性

> ID：16050569
> 
> 赞同：1
> 
> 时间：2013-04-17T02:46:30.967
> 
> 标签：breeze

使用 Breeze 处理以下场景的验证的推荐方法是什么？

> **场景：**我有一个带有`startDate`,`endDate`和`useDate`字段的实体。如果`useDate`是真的，那么我想验证 `startDate`并且`endDate`是有效日期和`endDate`> `startDate`。

Breeze 文档中建议的方法是创建一个自定义验证器并将其注册到实体上。`validateEntity()`我在这种方法中看到的问题是，每次这三个属性之一发生更改时，我都需要手动调用，以便将验证错误添加到实体的错误集合中。在单个属性上添加自定义验证器的另一种推荐方法不提供对实体的访问（仅提供当前属性值），因此这也不是一个很好的选择。

我可以订阅实体上的每个 Knockout 属性更改事件，然后调用`validateEntity()`，但这似乎很笨拙。

有没有办法将自定义实体级验证器添加到实体，但将其与一个或多个属性相关联，以便当相关属性之一更改时，调用实体级验证器？Breeze 似乎在这里缺少一个常见的验证用例场景，但我可能遗漏了一些东西。

谢谢，理查德

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-17T03:38:20.537

我认为您可以针对每个 startDate、endDate 和 useDate 字段应用您的自定义验证器函数，以便对这些属性中的任何一个的更改都会触发相同的逻辑。

查看 Breeze 代码，看起来传递给验证函数的*上下文*对象将具有*实体*属性，因此您可以访问实体上的其他属性（未测试）。

之后，*如果需要*，您还可以使用本文中的代码[复制](https://stackoverflow.com/questions/15635958/mark-fields-not-valid-as-red-with-knockout-durandal/15639832#15639832)这些验证函数，使其成为用于在您的 UI 中绑定的[knockout.validation](https://github.com/ericmbarnard/Knockout-Validation)规则。

# shader - 使用纹理图集时的 HLSL 颜色溢出

> ID：16050574
> 
> 赞同：3
> 
> 时间：2013-04-17T02:47:02.597
> 
> 标签：shader, textures, hlsl, texture-atlas

我正在用 C#/XNA 制作游戏。我目前正在研究将用于地形的着色器。我正在使用纹理图集来提高速度和效率，但我在瓷砖之间遇到纹理/颜色渗色：http: [//i.imgur.com/lZcESsn.png](http://i.imgur.com/lZcESsn.png)

我在 FX Composer 和我的游戏本身中都得到了这种效果。这是我的着色器：

```
//-----------------------------------------------------------------------------
// InstancedModel.fx
//
// Microsoft XNA Community Game Platform
// Copyright (C) Microsoft Corporation. All rights reserved.
//-----------------------------------------------------------------------------

// Camera settings.
float4x4 World : World < string UIWidget="None"; >;
float4x4 View : View < string UIWidget="None"; >;
float4x4 Projection : Projection < string UIWidget="None"; >;

// This sampler uses a simple Lambert lighting model.
float3 LightDirection = normalize(float3(-1, -1, -1));
float3 DiffuseLight = 1.25;
float3 AmbientLight = 0.25;

float TextureSide = 0; //0 = top, 1 = side, 2 = bottom
float2 TextureCoord;
texture Texture;
float2 TextureSize = 2.0;

sampler Sampler = sampler_state
{
    Texture = (Texture);
    MinFilter = Linear;
    MipFilter = Linear;
    MagFilter = Linear;
    AddressU = Clamp;
    AddressV = Clamp;
};

struct VertexShaderInput
{
    float4 Position : POSITION0;
    float3 Normal : NORMAL0;
    float2 TextureCoordinate : TEXCOORD0;
};

struct VertexShaderOutput
{
    float4 Position : POSITION0;
    float4 Color : COLOR0;
    float2 TextureCoordinate : TEXCOORD0;
};

// Vertex shader helper function shared between the two techniques.
VertexShaderOutput VertexShaderCommon(VertexShaderInput input, float4x4 instanceTransform, float2 atlasCoord, float4 colour)
{
    VertexShaderOutput output;

    // Apply the world and camera matrices to compute the output position.
    float4 worldPosition = mul(input.Position, instanceTransform);
    float4 viewPosition = mul(worldPosition, View);
    output.Position = mul(viewPosition, Projection);

    // Compute lighting, using a simple Lambert model.
    float3 worldNormal = mul(input.Normal, instanceTransform);    
    float diffuseAmount = max(-dot(worldNormal, LightDirection), 0);    
    float3 lightingResult = saturate(diffuseAmount * DiffuseLight + AmbientLight);    
    output.Color = float4(lightingResult, 1);
    output.Color = output.Color * colour;

    //calculate texture coords  
    float2 InputTextureCoords = input.TextureCoordinate;// / TextureSize;
    float2 InputAtlasCoords = atlasCoord;// / TextureSize;  

    float2 textCoordsActual = InputTextureCoords + InputAtlasCoords;

    output.TextureCoordinate = textCoordsActual;

    return output;
}

// Hardware instancing reads the per-instance world transform from a secondary vertex stream.
VertexShaderOutput HardwareInstancingVertexShader(VertexShaderInput input,
                                                  float4x4 instanceTransform : BLENDWEIGHT,
                                                  float2 atlasCoord1 : TEXCOORD1, float2 atlasCoord2 : TEXCOORD2, float2 atlasCoord3 : TEXCOORD3, 
                                                  float4 colour : COLOR1)
{
    float2 atlasCoord = atlasCoord1;
    if (TextureSide == 1)
    {
        atlasCoord = atlasCoord1;
    }
    if (TextureSide == 2)
    {
        atlasCoord = atlasCoord2;
    }
    else if (TextureSide == 3)
    {
        atlasCoord = atlasCoord3;
    }
    return VertexShaderCommon(input, mul(World, transpose(instanceTransform)), atlasCoord, colour);
}

// When instancing is disabled we take the world transform from an effect parameter.
VertexShaderOutput NoInstancingVertexShader(VertexShaderInput input,
                                                  float4x4 instanceTransform : BLENDWEIGHT,
                                                  float2 atlasCoord1 : TEXCOORD1, float2 atlasCoord2 : TEXCOORD2, float2 atlasCoord3 : TEXCOORD3, 
                                                  float4 colour : COLOR1)
{
    return VertexShaderCommon(input, World, TextureCoord, float4(1,1,1,1));
}

float2 HalfPixileCorrectedCoords(float2 coords)
{
    float u = (coords.x) / TextureSize;
    float v = (coords.y) / TextureSize;

    return float2(u, v);
}

// Both techniques share this same pixel shader.
float4 PixelShaderFunction(VertexShaderOutput input, 
                            float2 atlasCoord1 : TEXCOORD1) : COLOR00
{                           
    float2 outputTextureCoords = HalfPixileCorrectedCoords(input.TextureCoordinate);    
    return tex2D(Sampler, outputTextureCoords) * input.Color;
}

// Hardware instancing technique.
technique HardwareInstancing
{
    pass Pass1
    {
        VertexShader = compile vs_3_0 HardwareInstancingVertexShader();
        PixelShader = compile ps_3_0 PixelShaderFunction();
    }
}

// For rendering without instancing.
technique NoInstancing
{
    pass Pass1
    {
        VertexShader = compile vs_3_0 NoInstancingVertexShader();
        PixelShader = compile ps_3_0 PixelShaderFunction();
    }
} 
```

我的 FX Composer HLSL 个人资料：http: [//i.imgur.com/wNzmPXA.png](http://i.imgur.com/wNzmPXA.png)

和我正在使用的测试图集：（不能发布，因为我需要更多的声誉，我可以在后续发布它？）

我已经阅读了很多关于此的内容，看来我要么需要进行“半像素校正”，要么将像素包裹在图集中指定纹理的边缘。我已经尝试了这两种方法，但都没有成功。

问题：如何解决我遇到的像素出血问题？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-04-17T21:32:37.810

如果您想使用图集获得漂亮的无缝平铺纹理，您必须创建一个比预期大 4 倍的纹理（即（2 x 宽度）x（2 x 高度））。

更具体地说，图集中的每个图块应如下所示： ![图片](https://i.stack.imgur.com/gdygZ.png)

整个图块应重复两次，从其中心 (u,v) 开始。

(u,v) 是地图集纹理中瓦片的坐标。

但是，在对对象进行纹理处理时，您应该用于此图块的坐标是：

(u0, v0) <---> (u1, v1)

您可以按如下方式计算它们：

```
rw = tile_width / atlas_width
rh = tile_height / atlas_height
u0 = u + 0.5 * rw
v0 = v + 0.5 * rh
u1 = u0 + rw
v1 = v0 + rh 
```

使用纹理图集时颜色渗色的主要问题之一是 mipmapping。创建 mipmap 时，纹理被下采样并且相邻的瓦片被混合在一起，这会导致伪影。我上面描述的方法通过提供足够的纹理区域储备来防止它。

在对纹理进行采样时得到伪像的另一个原因是纹理过滤。上述方法也有帮助，因为在 (u0, v0) - (u1, v1) 范围内的样本附近总是有足够的区域被瓦片的纹理覆盖。

# php - 关于用户访问被拒绝的 PHP 错误消息（使用密码：否）

> ID：16050576
> 
> 赞同：-1
> 
> 时间：2013-04-17T02:47:13.453
> 
> 标签：php

我的 php 版本是 5.2，这是旧版本。这是因为我使用免费服务器它是我的网站[http://driverrecord.hostzi.com/android_login_api/include/profile.php?username=4](http://driverrecord.hostzi.com/android_login_api/include/profile.php?username=4)

我希望有一个人可以帮助我。问题可能与代码有关。

错误信息：

> 警告：mysql_query() [function.mysql-query]：第 20 行 /home/a6578726/public_html/android_login_api/include/profile.php 中的用户 'a6578726'@'localhost'（使用密码：NO）的访问被拒绝

配置文件.php

```
 // array for JSON response
 $response = array();

 // include db connect class
 require_once dirname(__FILE__). '/DB_Connect.php';

 // connecting to db
 $db = new DB_CONNECT();

 // check for post data
 if (isset($_GET["username"])) {

     $username = $_GET['username'];

     // get a product from products table
    $result = mysql_query("SELECT * FROM user WHERE user_id = $username");

     if (!empty($result)) {
         // check for empty result
         if (mysql_num_rows($result) > 0) {

             $result = mysql_fetch_array($result);

             $username = array();
           $username["username"] = $result["user_id"];
           $username["first_name"] = $result["first_name"];
           $username["last_name"] = $result["last_name"];
        $username["email"] = $result["email"];
        $username["tel"] = $result["tel"];
        $username["age"] = $result["age"];
        $username["gender"] = $result["gender"];
        // success
        $response["success"] = 1;

        // user node
         $response["username"] = array();

         array_push($response["username"], $username);

        // echoing JSON response
         echo json_encode($response);
      } else {
         // no product found
         $response["success"] = 0;
         $response["message"] = "No product found";

         // echo no users JSON
         echo json_encode($response);
       }
     } else {
      // no product found
      $response["success"] = 0;
       $response["message"] = "No product found";

    // echo no users JSON
    echo json_encode($response);
  }
  } else {
    // required field is missing
    $response["success"] = 0;
   $response["message"] = "Required field(s) is missing";

  // echoing JSON response
  echo json_encode($response);

  }
   ?> 
```

DB_Connect.php

```
 class DB_Connect {

    // constructor
   function __construct() {

  }

  // destructor
  function __destruct() {
      // $this->close();
  }

    // Connecting to database
    public function connect() {
        require_once 'include/config.php';
         // connecting to mysql
          $con = mysql_connect("XXXXXwebhost.com", "a6578726_driver", "abcde");
       // selecting database
       mysql_select_db(DB_DATABASE);

      // return database handler
      return $con;
    }

  // Closing database connection
  public function close() {
    mysql_close();
  }

 }

 ?> 
```

配置文件

```
 <?php
  /**
   * Database config variables
   */
 define("DB_HOST", "XXXXwebhost.com");
  define("DB_USER", "a6578726_driver");
  define("DB_PASSWORD", "abcde");
  define("DB_DATABASE", "a6578726_driver");
  ?> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-17T03:07:17.167

您永远不会连接到数据库。您正在构建一个`DB_Connect`实例，但`DB_Connect::connect`永远不会调用其中的代码。因此，当您运行时`mysql_query`，没有活动连接。如果没有活动连接，`mysql_query`它将尝试使用一些默认用户名和密码建立连接，它从沙发后面或任何地方拼凑起来，这显然失败了。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-17T02:52:17.810

创建`DB_Connect`对象不足以连接到数据库。调用`connect()`该对象以连接到数据库。

# iphone - 如何在另一个视图控制器中更改 UIImageView 的图像？

> ID：16050580
> 
> 赞同：1
> 
> 时间：2013-04-17T02:47:43.380
> 
> 标签：iphone, sdk, uiimageview

我有一个非常简单但令人沮丧的问题。在我的`didSelectRowAtIndexPath:`方法中，我试图更改`UIImageView`另一个视图，但不幸的是，它不起作用，并且`UIImageView`保持不变。

我究竟做错了什么？

```
- (void)tableView:(UITableView *)tableView didSelectRowAtIndexPath:(NSIndexPath *)indexPath {
    MainViewController *demoController = [[MainViewController alloc] initWithNibName:@"MainViewController" bundle:nil];
    demoController.title = [NSString stringWithFormat:@"Demo Controller #%d-%d", indexPath.section, indexPath.row];

    NSArray *controllers = [NSArray arrayWithObject:demoController];
    self.sideMenu.navigationController.viewControllers = controllers;
    [self.sideMenu setMenuState:MFSideMenuStateClosed];

    if ([[[NSUserDefaults standardUserDefaults] objectForKey:@"server"] isEqualToString:@"imap.mail.me.com"]){
        if (indexPath.row == 0)
            theAppDelegate.folder = @"INBOX";
            UIImage *image = [UIImage imageNamed:@"inbox.png"];
            demoController.imageBG.image = image;

        if (indexPath.row == 1)
            theAppDelegate.folder = @"Sent Messages";
        UIImage *image2 = [UIImage imageNamed:@"sentmail.png"];
        demoController.imageBG.image = image2;

        if (indexPath.row == 2)
            theAppDelegate.folder = @"Drafts";
        UIImage *image3 = [UIImage imageNamed:@"drafts.png"];
        demoController.imageBG.image = image3;

        if (indexPath.row == 3)
            theAppDelegate.folder = @"Deleted Messages";
        UIImage *image4 = [UIImage imageNamed:@"trash.png"];
        demoController.imageBG.image = image4;

        if (indexPath.row == 4)
            theAppDelegate.folder = @"Archive";
        UIImage *image5 = [UIImage imageNamed:@"archive.png"];
        demoController.imageBG.image = image5;

        if (indexPath.row == 5)
            theAppDelegate.folder = @"Junk";
        UIImage *image6 = [UIImage imageNamed:@"junk.png"];
        demoController.imageBG.image = image6;

    }
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-17T03:43:04.983

照此行`if ([[[NSUserDefaults standardUserDefaults] objectForKey:@"server"] isEqualToString:@"imap.mail.me.com"])`必得真意，你`demoController.imageBG.image`总有`junk.png`。

我想你在身体`{}`之间失踪了。`if`

它必须是这样的

```
if (indexPath.row == 0)
{
    theAppDelegate.folder = @"INBOX";
    UIImage *image = [UIImage imageNamed:@"inbox.png"];
    demoController.imageBG.image = image;    
}
 if (indexPath.row == 1)
     ......... 
```

**注意：**在编写此类编码时，最好使用`else-if`OR `switch-case`。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-17T03:55:27.297

拳头你错过`{}`了`if`条件，所以在这里你每次都能得到`junk.png`图像......`UIImageView`

也在这里，而不是你的这个逻辑，你可以简单地传递图像的名称`NSString`......

只需对字符串进行属性合成并`MainViewController`像下面这样传入您的类...

=>`MainViewController.h`

```
@property (nonatomic, retain)   NSString *strImageName; 
```

=>`MainViewController.m`

```
@synthesize strImageName; 
```

并像上面的代码一样在这个变量中传递这个名称......

```
 if (indexPath.row == 0){
    theAppDelegate.folder = @"INBOX";
    demoController.strImageName = @"inbox.png";
    [demoController.strImageName retain];
   }
   else if (indexPath.row == 1){
        theAppDelegate.folder = @"Sent Messages";
    demoController.strImageName = @"sentmail.png";
    [demoController.strImageName retain];
   } 
```

并在您`MainViewController`的 viewDidLoad 方法中分配此图像，如下所示。

```
 - (void)viewDidLoad
{
        [super viewDidLoad];
        UIImage *image = [UIImage imageNamed:strImageName];
        imageBG.image = image;
} 
```

# visual-studio-2012 - 如何在 Visual Studio 2012 for C# 中启用括号补全？

> ID：16050582
> 
> 赞同：2
> 
> 时间：2013-04-17T02:47:59.867
> 
> 标签：visual-studio-2012, parentheses

标题说明了一切。我一直在搜索：

`TOOLS -> Options... -> Text Editor -> C# -> Formatting`

并且找不到像“完整的括号是/否”这样的东西。Textmate有paren完成，Eclipse有paren完成，OS X上的Mono有paren完成但是VS真的需要插件来做到这一点吗？

**编辑：**我对 VS 在键入打开的括号时自动插入关闭的括号很感兴趣。标题和问题已更新。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-06-13T17:06:12.610

查看名为[Brace Completer](http://visualstudiogallery.msdn.microsoft.com/0e33cb22-d4ac-4f5a-902f-aff5177cc94d)的 Visual Studio 扩展。根据您的描述，我认为它会完全按照您的要求进行。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-17T03:06:22.477

我假设您的意思是突出显示左括号或右括号（或）会突出显示相反的匹配括号？

它就在那里，只有当您将光标放在感兴趣的括号的左侧而不是突出显示或右侧时才会发生这种情况，并且默认的突出显示颜色可能很难看到。

这是 VS2010 信息，我假设他们在 2012 年在这方面不会有太大变化，他们只是似乎没有针对该版本的这样的页面。 [http://msdn.microsoft.com/en-us/library/be94e8aw.aspx](http://msdn.microsoft.com/en-us/library/be94e8aw.aspx)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2015-07-03T10:54:26.097

如果有帮助，Visual Assist X 扩展还可以完全按照问题描述的方式自动完成大括号（并且还做了很多其他有用的事情）。

我最终在这里寻找一种关闭它的方法，它位于 VAssistX -> Visual Assist Options ... -> Corrections 下。

# python - 在无限循环内只执行一次命令

> ID：16050587
> 
> 赞同：0
> 
> 时间：2013-04-17T02:48:20.913
> 
> 标签：python, loops, raspberry-pi

我有一个树莓派，我用它来监视来自 GPIO 端口的输入，为此我需要运行一个无限循环。

当我在输入中收到 a`LOW`时，我想执行系统命令 usint `subprocess.call`。问题是，只要输入正在接收，它就会执行这个命令，`LOW`我已经尝试过让它只执行一次，但我不能让它工作。

```
while 1:
    if (GPIO.input(11) != GPIO.HIGH ):
         puerta_abierta = 1
         if(puerta_abierta == 1 ):
              call(["mpg123", "file.mp3"])
              puerta_abierta = 0
    else:
        puerta_abierta = 0 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-17T02:52:37.867

你可以这样做：

```
called = False

while True:
    if GPIO.input(11) != GPIO.HIGH:
        if not called:
            call(["mpg123", "file.mp3"])
            called = True 
```

您也可以跳出循环，但这可能不是您想要发生的：

```
while True:
    if GPIO.input(11) != GPIO.HIGH:
        call(["mpg123", "file.mp3"])
        break 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-17T02:52:59.067

像这样：

```
puerta_abierta = 0
while 1:
    if (GPIO.input(11) != GPIO.HIGH ):
        puerta_abierta += 1
        if(puerta_abierta == 1 ):
            call(["mpg123", "file.mp3"])
    else:
        puerta_abierta = 0 
```

# php - 在苗条中，如何将文件路径传递给变量？

> ID：16050590
> 
> 赞同：0
> 
> 时间：2013-04-17T02:48:59.067
> 
> 标签：php, get, urlencode, filepath, slim

我现在拥有的是：

```
$app->get(/folderBrowse/:path function($app){
bla bla bla 

}); // I know this is not using '' or , 
but it's just for example, because I've tried it with many configurations. my 
syntax is correct in my code, because it works fine when I don't pass a path 
```

但是当我传递一个文件路径时，即使使用 URL 编码它也会给我一个 404 页面。有什么我想念的吗？

任何帮助将不胜感激。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-17T22:24:04.330

现在您可以像这样通过 url 发送文件路径之类的东西

```
http://localhost/api/something?file_path=some url encoded string

$app->get('/something', function() use($app) {
  $file_path = $app->request()->get('file_path');
call some other stuff... etc

}); 
```

# python - Python：如何位掩码和比较mac地址？

> ID：16050592
> 
> 赞同：0
> 
> 时间：2013-04-17T02:49:11.960
> 
> 标签：python

我是 Python 新手。

以下代码行从以太网数据包中提取 dst mac 和 src mac。

```
dst, src, _eth_type = struct.unpack_from('!6s6sH', buffer(msg.data), 0) 
```

众所周知，mac地址是6字节的。我要归档的是比较 dst/src mac 地址的前 5 个字节是否相等。如何为此编写python代码？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-17T02:59:38.203

使用[切片表示法](https://stackoverflow.com/questions/509211/the-python-slice-notation)从列表或字符串等序列中提取子序列。比较你的`dst`和`src`字符串的前五个字节/字符是微不足道的：

```
dst[:5] == src[:5] 
```

# linux - 将输入文件解析为环境变量

> ID：16050599
> 
> 赞同：1
> 
> 时间：2013-04-17T02:49:48.670
> 
> 标签：linux, bash

我有一个 bash 脚本，我想读取一个设置文件。设置文件的每一行对于脚本的其余部分都有特殊含义（例如 line1=source_directory line2=destination_directory）

有没有一种简单的方法可以将设置文件解析为我可以在脚本的其余部分中使用的环境变量？

编辑：我喜欢源代码的想法，但是......我原本打算有一个这样的文件：

```
/我的/源/目录
/我的/目的地/目录

```

不是：

```
src_dir=/我的/源/目录
dst_dir=/我的/dest/dir

```

我可以以某种方式解析第一个文件吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-17T02:53:22.897

你可以采购它

```
. foo.sh 
```

这将允许您使用`foo.sh`. 您也可以使用`source`关键字调用

```
source foo.sh 
```

[更多信息](http://linux.die.net/man/1/bash)

```
source: source filename [arguments]

    Read and execute commands from FILENAME in the current shell. 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-17T02:53:34.830

一个常见的技巧是获取配置文件。例如，在 Red Hat 系统上，系统脚本会`/etc/rc.d`执行`/etc/sysconfig`此操作。

```
. /etc/prog.conf 
```

这就像它们是脚本一样读取它们。如果设置使用`name=value`表单并且注释以`#`.

**注意：**确保配置文件是可信的，因为您像脚本一样执行它。它应该由相同的用户和组拥有，并具有与父脚本相同的权限。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-17T04:49:19.993

如果您的文件只有值，那么您并没有真正“解析”它。

```
exec 3<config
read source <&3
read dest <&3
exec 3<- 
```

`read`如果您的值可能包含空格等，您可能想要添加一些标志。我也许应该将答案更改为有`read -r`，但我鼓励您也[研究其他可用的标志](http://ss64.com/bash/read.html)。

# java - JScrollPane 缩放视图，其中包含组件

> ID：16050604
> 
> 赞同：3
> 
> 时间：2013-04-17T02:50:19.463
> 
> 标签：java, swing, zooming, jscrollpane, jviewport

是否有任何方法我想缩放视口的视图但内部组件的位置不会改变。设置是我在 jscrollpane 中有一个大 jpanel，我只想将视图更改为缩放模式。对象可以拖放到面板内的任何位置，因此保留其 xy 位置很重要。

这是我目前的缩放代码，我所做的是使用图形 2d 比例缩放视图。问题是位置一团糟。我还想将其缩小，以便整个面板适合 jscrollpane。

```
//zoom in draw method using scale
g2.translate(zoomX, zoomY);

g2.scale(zoomScale, zoomScale);

g2.translate(-zoomX, -zoomY); 
```

我也在考虑操纵视口。这是我的视口初始化。2000 x 1000 尺寸是面板，750 x 698 是我视口的范围大小。关于如何在不弄乱组件位置的情况下进行缩放的任何建议？也许移动 setviewposition 是解决方案的一部分？

```
 view = new JViewport();

 view.setViewSize(new Dimension(2000,1000));

 view.setExtentSize(new Dimension(750,698));

 view.setViewPosition(new Point(view.getExtentSize().width/2,view.getExtentSize().height/2)); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-17T03:04:41.783

使用增加/减少缩放系数的两个按钮。像这样覆盖`paintComponent`JScrollPane 中面板的方法。

```
@Override
public void paintComponent(Graphics g)
{
    g.scale(zoomFactor, zoomFactor);
    // Change the size of the panel
    setSize(origWidth * zoomFactor, origHeight * zoomFactor);
    // Re-Layout the panel
    validate();
    super.paintComponent(g);
} 
```

希望它有效。

# c# - 你如何在 C# 中寻找 VLC 2.0.6

> ID：16050610
> 
> 赞同：0
> 
> 时间：2013-04-17T02:51:07.933
> 
> 标签：c#, vlc, seek, libvlc

我在 Visual Studio 2012 windows 应用程序中使用 VLC 2.0.6 ActiveX 控件。我想出了如何使用以下代码加载和播放基本视频：

```
 axVLCPlugin21.playlist.add(filename, title, null);
        axVLCPlugin21.playlist.play(); 
```

我试图弄清楚如何以编程方式将视频搜索到某个位置。我浏览了互联网，发现人们在谈论Shuttle( *)*、*MoveToPosition()*、*Position*等，但我没有这些方法/属性可用。我只能看到*axVLCPlugin21.StartTime ，它是一个 int，并且在调用**play()*之前或之后设置它都没有影响。

提前致谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-17T04:34:25.197

根据这里的文档

[http://wiki.videolan.org/Documentation:WebPlugin](http://wiki.videolan.org/Documentation:WebPlugin)

可以通过使用设置搜索位置

axVLCPlugin21.input.time = 20000; // 以毫秒为单位

那里有更多关于以毫秒为单位获取总长度的信息。

如果它没有出现在您的自动生成的 COM 包装器中，请完全放弃它并自行开发。创建自己的 AxHost 继承者并使用“动态”（.NET 4 关键字）OCX 对象并不难。

# android - 链接到 Google Play 不起作用 Android 2.2

> ID：16050611
> 
> 赞同：0
> 
> 时间：2013-04-17T02:51:13.303
> 
> 标签：android, android-intent, google-play

我正在从我的应用链接到 Google Play 中的另一个应用。该链接在我的 Nexus 平板电脑和 ICS HTC One X 上运行良好，但在 HTC Inspire 4G Android 2.2 上该链接出现错误，它说

> “找不到请求的项目。”

这是我正在使用的链接：

```
String pushUrl = "market://details?id=com.laughingplaceapps.relaxopen"; 
```

我正在使用的代码：

```
 Uri marketUri = Uri.parse(pushUrl);
                Intent intent = new Intent(Intent.ACTION_VIEW, marketUri);
                startActivity(intent); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-17T10:39:53.557

如果手机上没有 Google Play App (Market)，则隐式 Intent`market://`将不会运行。您可以使用`PackageManager.getInstalledPackages()`来检查是否有应用程序来处理您的隐式意图。如果不是，您可以使用`URI`通过 Web 浏览器 ( ) 将您的 URL 更改为链接到应用程序的 URL，`https://play.google.com/store/apps/details?id=com.laughingplaceapps.relaxopen`如上面的评论中所述，这将导致隐式意图由浏览器处理。

# http - 通过 http post 收集 Asterisk cdr 记录

> ID：16050613
> 
> 赞同：0
> 
> 时间：2013-04-17T02:51:21.647
> 
> 标签：http, url, voip, asterisk, cdr

我正在使用 Asterisk 并想收集 cdr 记录。我搜索了一会儿，发现已经有模块可以用来将 cdr 记录收集到 CSV 文件或 MySQL 中。

我想知道是否已经有一个模块可以让我通过 http post 收集 cdr 记录。这样当调用结束时，Asterisk 会将 cdr 记录发布到预定义的 URL。

提前致谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-17T11:17:15.840

我不知道这样的模块，但你可以在挂断时执行一个应用程序。

您可以使用该功能`${CURL(url[,post-data])}`：

```
exten => h,n,Set(result=${CURL(http://SERVER/cdr.php?\
             cdranswer=${CDR(answer)}&exten=${EXTEN}&cidnum=${CALLERID(num)})}) 
exten => h,n,Noop(${result}) 
```

另一种方法是在挂断时执行脚本：

```
exten => h,n,System('php -f /opt/scripts/cdr.php \
                        ${CallerID(num)} ${EXTEN} "${CDR(answer)}" ${EPOCH}'); 
```

也许你也可以使用 ${CDR(billsec)}。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-18T12:56:36.233

另一种选择是使用 CRON 作业每隔几分钟运行一次 Ruby 或 PHP 脚本，以提取和 HTTP POST 自上次运行脚本以来的所有 CDR。我已经为客户做了这件事，而且效果还不错。

也就是说，我发现如果我需要让 CDR 可以“脱离机器”访问，那么从长远来看，最简单的方法是设置 MySQL 复制。将 CDR 写入 PBX 机器，从报告机器上的复制副本中读取它们。一开始它的设置更加密集，但以后一切都会变得容易得多。

# javascript - 使用 AJAX/Jquery 调用外部页面并将动态内容加载到 DIV

> ID：16050620
> 
> 赞同：0
> 
> 时间：2013-04-17T02:51:49.340
> 
> 标签：javascript, jquery, ajax, url

好吧，我知道有一种方法可以使用 Ajax 调用和加载函数来更改同一页面内的内容（我的示例页面 a）
我正在寻找的是，有没有一种方法可以调用外部页面并将动态内容加载到所选内容该外部页面上的 div 。我想使用 HTTP 请求方法是可能的，但我真的是个菜鸟。

好的，我有一个页面（附图片）
![在此处输入图像描述](https://i.stack.imgur.com/qjYSd.jpg)

ajax 在单击特定 ID 时将内容加载到“RESULT”div 中，
这里是 ajax 脚本和我到目前为止的 html。这可以完美地加载到“页面 a”本身的 Result div 上。

```
<a href="#" id="one" /><br>
<a href="#" id="two" /><br>
<a href="#" id="three" /><br>
<div id="result"  class="functions"></div> 
```

```
 $.ajaxSetup({
        cache: false
    });
    var ajax_load = "<img class='loading' src='img/load.gif' alt='loading...' />";

    $("#one").click(function () {
    var loadUrl = "content.php";
    $("#result").html(ajax_load).load(loadUrl);
    });

    $("#two").click(function () {
    var loadUrl = "content1.php";
    $("#result").html(ajax_load).load(loadUrl);
    });

    $("#three").click(function () {
    var loadUrl = "content2.php";
    $("#result").html(ajax_load).load(loadUrl);
    }); 
```

所以查询是，我有“页面 b”和某些按钮，在单击按钮时，我想加载“页面 a”并将所选内容加载到结果 DIV。
![在此处输入图像描述](https://i.stack.imgur.com/SGxmS.jpg)

这个概念是，在页面 b 上，单击 id，它在新选项卡中加载页面 a 并在“结果”div 上加载所选内容。两个页面都在同一台服务器上
非常感谢任何帮助或提示。谢谢你。

# c# - 你调用的对象是空的。请求.查询字符串

> ID：16050621
> 
> 赞同：1
> 
> 时间：2013-04-17T02:51:53.233
> 
> 标签：c#, asp.net, string

我知道有人问过这个问题，但这是我的情况：

正确的网址是：`http://localhost:1478/application/ProductID.aspx?ID=1001`

这将检索我的产品列表。但是，如果我删除查询字符串，可以说：

```
http://localhost:1478/application/ProductID.aspx 
```

错误是对象引用未设置为对象的实例。在这个问题中是否有任何错误处理的实现？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-17T05:15:12.333

改变

```
string ProductID = Request.QueryString["ID"].ToString(); 
```

至

```
 if(!string.IsNullOrWhiteSpace(Request.QueryString["ID"]))
 {
    string ProductID = Request.QueryString["ID"]; 
    DataList1.DataSource = showResult.ShowProductResult(ProductID);
 } 
 else
 {
    //Do something when Id is empty or null
    //DataList1.DataSource =null;
 } 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-17T03:50:26.480

基本上你得到那个错误是因为页面需要缺少的信息来完成它的过程。

如果您希望它在没有错误的情况下运行，那么您需要一个“if”块来检查（产品）Id 参数是否已在查询字符串或 url 中传递。

VB

```
If trim(request("ID")) <> "" Then
  'Do your product search here and display the results in your page HTML 
Else
  'No product ID parameter was passed! - You may optionally display this fact in your HTML
End If 
```

C＃

```
if (!string.IsNullOrEmpty(request("ID")) {
  //Do your product search here and display the results in your page HTML 
} else {
  //No product ID parameter was passed! - You may optionally display this fact in your HTML
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-17T05:15:46.787

试试这种方式，首先检查查询字符串返回不为空的条件。见下面的代码。

```
int ProductID ;
if(Request.QueryString["ID"]!=null)
 {
    ProductID =Convert.ToInt32( Request.QueryString["ID"].ToString()); 
    showResult.YourmethodName(ProductID);
 } 
 else
 {
    //Show one error lik "INVALID URL" ,Please go back
 } 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-04-17T04:24:35.213

改变

```
string ProductID = Request.QueryString["ID"].ToString(); 
```

至

```
 string ProductID="";
 if(Request.QueryString["ID"]!=null)
 {
    ProductID = Request.QueryString["ID"].ToString(); 
    DataList1.DataSource = showResult.ShowProductResult(ProductID);
 } 
 else
 {
    //DataList1.DataSource =null;
 } 
```

# performance - jQueryMobile PageTransition 速度

> ID：16050622
> 
> 赞同：0
> 
> 时间：2013-04-17T02:52:04.087
> 
> 标签：performance, cordova, jquery-mobile

我正在使用带有 PhoneGap/Cordova 2.4.0 的 jQueryMobile 1.3.0 并试图弄清楚如何加快页面转换。在我的笔记本电脑上运行时，我已将页面转换减少到大约 50 毫秒，但是，当部署到 iPhone 4 时，页面转换显着减慢。

从页面 A 到页面 B 的场景转换。我注意到“页面 B - pagebeforecreate”事件和“页面 A - pageHide”事件之间大约有 500 毫秒。

这是我尝试过的：

1.  我已经剥离了大部分代码。
2.  已验证页面 A - pageRemove 事件未触发，因此无需时间。
3.  将 css 中的动画持续时间从 350 毫秒减少到 30 毫秒。（这有帮助，但还不够）

    ```
    .slide.out,.slide.in {
        -webkit-animation-timing-function:ease-out;
        -webkit-animation-duration:30ms;
    } 
    ```

4.  使用 changePage 尝试了“a”标签和 div

    ```
    <a href="#pageB">Go</a>

    <div onclick="$.mobile.changePage('#pageB');">Go2</div> 
    ```

任何人都对 jQueryMobile 在这两个需要时间的事件之间所做的事情有任何想法。我的下一步将是从 jquerymobile 代码内部开始记录，以缩小花费时间的范围。

我很感激任何帮助！

谢谢，汤姆

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-05-16T13:44:56.057

jQuery Mobile 默认为点击事件添加了 300 毫秒的延迟——它正在监听诸如双击和滑动之类的事情。如果您不使用任何这些类型的事件，请考虑合并 FastClick [http://forum.jquery.com/topic/how-to-remove-the-300ms-delay-when-clicking-on-a-link-in -jquery-mobile](http://forum.jquery.com/topic/how-to-remove-the-300ms-delay-when-clicking-on-a-link-in-jquery-mobile)解决了我在 PhoneGap/jQueryMobile 应用程序中的速度问题。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-17T14:47:47.567

禁用转换的最快方法

```
 <script type="text/javascript">
    $(document).on("mobileinit", function() {
                $.mobile.defaultPageTransition = $.mobile.defaultDialogTransition = "none";
            });
   </script> 
```

# ruby - 由于 Openssl.org 关闭而无法安装 Ruby 2.0？

> ID：16050624
> 
> 赞同：0
> 
> 时间：2013-04-17T02:52:22.700
> 
> 标签：ruby, openssl, rvm

我曾多次尝试在 Macintosh 上安装 ruby​​-2.0.0-p0。但我从来没有成功过。我试过了`brew install openssl`，`rvm pkg install openssl`但是进度条总是 0%，我从来没有访问过[www.openssl.org](http://www.openssl.org)。没有 openssl 就无法安装它们。这只是我的问题吗？我找到了任何类似的资源，但对我没有帮助……我被 Openssl 禁止了吗？或者这不仅仅是我的问题？你能告诉我任何好的建议吗？

**编辑**

谢谢@fmendez，但我再次遇到同样的错误...... [Gist 上的完整跟踪](https://gist.github.com/anonymous/5401732)

```
==> Downloading http://openssl.org/source/openssl-1.0.1e.tar.gz
Error: Download failed: http://openssl.org/source/openssl-1.0.1e.tar.gz
$ brew install openssl
==> Downloading http://openssl.org/source/openssl-1.0.1e.tar.gz
                                                                       0.0%
curl: (7) couldn't connect to host
Error: Download failed: http://openssl.org/source/openssl-1.0.1e.tar.gz 
```

**编辑**

最后我连接了 openssl.org。我不知道是什么问题 :\ 抱歉引起注意。我会删除这个。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-17T03:02:54.537

最新指向的网址`openssl brew formula`是： http: [//openssl.org/source/openssl-1.0.1e.tar.gz](http://openssl.org/source/openssl-1.0.1e.tar.gz)，它工作正常。尝试做 a `brew update`，然后执行以下操作：

```
rvm get head
rvm pkg remove
rvm requirements run
rvm reinstall 2.0.0 
```

**笔记**

运行后`rvm requirements`确保安装任何提示的库（`homebrew`如果有）。

# c++ - c++ 数组和函数和计数器

> ID：16050627
> 
> 赞同：0
> 
> 时间：2013-04-17T02:52:31.237
> 
> 标签：c++, arrays, function, validation, search

我的代码已经完成并且可以工作了。但我不知道如何计算用户尝试的次数和输入的无效帐号。我应该在 cin >> accountNum 之后的 main 开始执行此操作。用户输入 9999 退出后，应该会显示尝试的次数和输入的无效计费帐号的数量。当我运行它时，尝试次数为 0，输入的无效数字为 -1。

```
#include <iomanip>
#include <iostream>
#include <fstream>
using namespace std;

void getAccountNumbers(int[], int);
void displayAccountNumbers(int[], int);
void selectionSort(int[], int);
int binarySearch(const int[], int, int);

int main()
{
int accountNum;
int results;
int attempts = 0;
int invalidNumbers = 0;

const int ARRAY_SIZE = 18; // Array size
int numbers[ARRAY_SIZE]; // Array with 18 elements
int count = 0;
//ifstream inputFile; 

getAccountNumbers(numbers, ARRAY_SIZE);

cout << "Original Order" << endl;
displayAccountNumbers(numbers, ARRAY_SIZE);

selectionSort(numbers, ARRAY_SIZE);

cout << "Sorted List" << endl;
displayAccountNumbers(numbers, ARRAY_SIZE);
cout << "********************" << endl;

cout << "Enter an Account number or 9999 to quit" << endl;
cin >> accountNum;

if(accountNum == 9999)
{
    cout << "Thank You!" << endl;
}

while(accountNum != 9999)
{
    results = binarySearch(numbers, ARRAY_SIZE, accountNum);
        if(results == -1)
        {
                cout << "That number was not found" << endl;
                invalidNumbers = results++; 
        }
        else 
    {
        cout << "That number is valid " << endl;
    }
        attempts = results++;
    cin >> accountNum;
}
cout << "Number of attempts: " << attempts << endl;
cout << "Invalid numbers entered: " << invalidNumbers << endl;

system("pause");
return 0;
}

void getAccountNumbers(int nums[], int size)
{
ifstream inputFile; 
int count = 0;

//Open the file 
inputFile.open("charges.txt");

while(count < size && inputFile >> nums[count])
    count ++;
//Close the file
inputFile.close();
}

void displayAccountNumbers(int nums[], int size)
{
for(int count = 0; count < size; count++)
    cout << nums[count] << "\t";
cout << endl << endl;

}

void selectionSort(int nums[], int size)
{
int startScan, minIndex, minValue;

for(startScan = 0; startScan < (size - 1); startScan++)
{
    minIndex = startScan;
    minValue = nums[startScan];
    for(int index = startScan + 1; index < size; index++)
    {
        if(nums[index] < minValue)
        {
            minValue = nums[index];
            minIndex = index;
        }
    }
    nums[minIndex] = nums[startScan];
    nums[startScan] = minValue;
}
}

int binarySearch(const int nums[], int size, int value)
{
int first = 0,       //First element
    last = size - 1, // Last element
    middle,          // Midpoint 
    position = -1;   //Position of search value

bool found = false;
while(!found && first <= last)
{
    middle = (first + last) / 2; //Midpoint
if(nums[middle] == value)
{
    found = true;
    position = middle;
}
else if(nums[middle] > value) // Value is in lower half
    last = middle - 1;
else
    first = middle + 1; // Value is in upper half
}
return position;
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-17T02:58:17.007

您的问题在于您尝试添加到的行`invalidNumbers`和`attempts`. ++ 后缀运算符将其前面的数字加一。你不用说`invalidNumbers = results++;`；你只需要`invalidNumbers++;`，同样适用`attempts`。您的代码所做的是将`invalidNumbers`(and `attempts`) 设置为 的值，`results`然后将其加一`results`。

# ios - 调用某些函数时变量消失

> ID：16050629
> 
> 赞同：0
> 
> 时间：2013-04-17T02:52:42.793
> 
> 标签：ios, objective-c, xcode, uitableview, uistoryboardsegue

我是个菜鸟，所以希望这不是太复杂。我的代码有问题，到目前为止，这让我和其他一些用户感到困惑和困惑。我花了一些时间清理我的代码，并遵循一些教程，但我仍然解决了这个问题。我只知道这很简单，所以这里是：

我为我的博客网站制作了一个 iOS 应用程序。它进入站点，提取一个 XML 文档（包含博客标题、简要描述和完整的文章 url），然后解析它以显示在 UITableView 中。为了管理这个，有两个自定义对象：“PostList”和“Post”。Post 只是一个包含单个帖子数据（url、标题、发布日期等）的对象，而 PostList 有一个包含 Post 对象的数组，以及一些 getter/setter/init 函数。

这一切都很好。视图加载，XML 被解析并显示在列表中。当用户点击链接或将某些单元格滚动出屏幕时，就会出现问题。据我所知，这些都与同一个问题有关。在用户点击单元格的情况下，视图控制器不会将值传递给详细视图控制器（prepareForSegue），并且在滚动的情况下，cellForRowAtIndexPath 不会重新初始化单元格值。

我相信这也是由于同样的问题，一旦视图被初始化，PostList 数组中的现有值就会以某种方式被删除。调试器说数组仍然可以看到其中的对象，但它们都是空白对象。我一直在试图找出原因。

如果您能给我一些想法，为什么会发生这种情况，那将是惊人的！我的代码如下。我发布了几乎所有内容，因为我之前发布的内容不够多。希望这可以帮助。如果您需要更多，请询问！

-提前致谢 ;）

## 第一视图控制器.h

```
 #import <UIKit/UIKit.h>
 #import "PostList.h"
 #import "Post.h"

 @interface FirstViewController : UITableViewController     

 @property (nonatomic, strong) PostList *postController;
 @property (nonatomic, strong) IBOutlet UITableView *tableView;
 @property (nonatomic, strong) Post *postToSendToDetailView;
 @property (nonatomic, strong) NSString *type;

 @end 
```

## 第一视图控制器.m

```
#import "FirstViewController.h"
#import "DetailViewController.h"
#import "Post.h"
#import "PostList.h"

@interface FirstViewController ()
@end

@implementation FirstViewController

- (void)viewDidLoad {
    [super viewDidLoad];
    self.type = @"blog";
    self.postController = [[PostList alloc] initWithType:self.type];
}

- (void)didReceiveMemoryWarning {
    [super didReceiveMemoryWarning];
}

- (NSInteger)numberOfSectionsInTableView:(UITableView *)tableView {
    return 1;
}

- (NSInteger)tableView:(UITableView *)tableView numberOfRowsInSection:(NSInteger)section {
    return [self.postController countOfList];
}

- (UITableViewCell *)tableView:(UITableView *)tableView cellForRowAtIndexPath:(NSIndexPath *)indexPath {
    static NSString *CellIdentifier = @"Cell";
    UITableViewCell *cell = [self.tableView dequeueReusableCellWithIdentifier:CellIdentifier];

    Post *postAtSighting = [self.postController objectInListAtIndex:indexPath.row];

    // Configure the cell...
    [[cell textLabel] setText:postAtSighting.name];
    [[cell detailTextLabel] setText:postAtSighting.content];
    NSLog(@"Cell Initalized");
    return cell;
}

- (void)prepareForSegue:(UIStoryboardSegue *)segue sender:(id)sender {
    if ([segue.identifier isEqualToString:@"pushToDetailView"]) {
        NSIndexPath *indexPath = [self.tableView indexPathForSelectedRow];
        DetailViewController *destViewController = segue.destinationViewController;
        destViewController.aPost = [self.postController objectInListAtIndex:indexPath.row];
    }
}

@end 
```

## PostList.h

```
#import <Foundation/Foundation.h>
#import "Post.h"

@interface PostList : NSObject

-(NSMutableArray *) getPostsofType:(NSString *)type;
-(NSString *) getName: (Post *)aPost;
-(NSUInteger) countOfList;
-(Post *)objectInListAtIndex:(NSUInteger)theIndex;
-(id)initWithType:(NSString *)type;

@property (nonatomic, strong) NSMutableArray *postsArray;
@property (nonatomic) NSString *urlString;
@property (nonatomic) NSUInteger countingIndex;

@end 
```

## PostList.m

```
#import "PostList.h"
#import "TBXML+HTTP.h"

@implementation PostList

- (id)initWithType:(NSString *)type {
    self = [super init];
    if (self) {    
        //Creates postArray to store Post objects
        self.postsArray = [[NSMutableArray alloc] init];

        //Create other resources
        self.urlString = [[NSString alloc] init];
        self.countingIndex = 0;
        [self getPostsofType:type];
    }
    return self;
}

-(NSString *)getName:(Post *)somePost {
    //Gets the Name of the Post object and returns the value
    NSString *name = somePost.name;
    return name;
}

-(NSMutableArray *)getPostsofType:(NSString *)type {

    //Go to the Server and get the posts that are available for the post type selected.

    //Determing the post type
    if ([type isEqual: @"blog"]) {
        self.urlString = @"http://www.biteofanapple.com/blog/feeds/blogFeed.xml";
    }
    if ([type isEqual: @"bbp"]) {
        self.urlString = @"http://www.biteofanapple.com/blog/feeds/blogFeed.xml";
    }

    //Checks for an existant xmlBlogData.xml
    NSArray *paths = NSSearchPathForDirectoriesInDomains(NSDocumentDirectory, NSUserDomainMask, YES);
    NSString *documentsDirectory = [paths objectAtIndex:0]; // Get documents directory

    NSString* blogXML = [documentsDirectory stringByAppendingPathComponent:@"xmlBlogData.xml"];
    BOOL fileExists = [[NSFileManager defaultManager] fileExistsAtPath:blogXML];
    NSData *data = [[NSData alloc] init];

    //Determines the best way to handle the xml file
    if (fileExists) {
        data = [NSData dataWithContentsOfFile:blogXML];
    } else {
        NSURL *url = [NSURL URLWithString:self.urlString];

        //Goes to the Server and reads the XML file of the Posts
        data = [NSData dataWithContentsOfURL:url];
        if (data != nil) {
        NSLog(@" NSData value is not nil");
    }

        //Saves the XML data to a .dat file in the document's directory
        NSError *error;
    BOOL succeed = [data writeToFile:[documentsDirectory stringByAppendingPathComponent:@"xmlBlogData.dat"] atomically:YES];
        if (!succeed){
            // Handle error here
            NSLog(@"Error: File was unable to be written to the documents directory.");
            [error setValue:@"-1" forKey: @"File unable to be written"];
        }
    }

    //Parses the XML file
    TBXML *tbxml = [TBXML newTBXMLWithXMLData:data error:nil];

    //Prints the data Variable to NSLog
    NSLog(@"%@", [NSString stringWithUTF8String:[data bytes]]);

    //Make some placeholder variables
    if (tbxml.rootXMLElement == nil) {
        NSLog(@"XML Document does not have rootElement. Error -1");
        UIAlertView *alert = [[UIAlertView alloc] initWithTitle:@"Sorry, there was an error" message:@"Could not find root XML element. Please contact support for help with this issue." delegate:nil cancelButtonTitle:@"Ok" otherButtonTitles:nil, nil];
        [alert show];
    }

    TBXMLElement *element = tbxml.rootXMLElement;
    TBXMLElement *nextElement = element->nextSibling;
    NSLog(@"URLs have been set, preparing for parse/input. [PostList.getPosts]");

    //Extracts the content of the XML file and saves it to values in the Post Class
    do {
        /**********
         * This loop goes through the XML file looking for <item> tags that hold information
         * about the blog posts. It finds <item> tags and scours them for <title>, <description>, 
         * <pubdate>, and <link> tags to put into the class variables for the Post Class (aPost).
         **********/

        NSString *stringElement = [TBXML elementName:element];
        NSLog(@"%@", stringElement);

        //Creates Post variable to put stuff in.
        Post *aPost = [[Post alloc] init];

        //Sorts through the header junk to find the first <item> tag.
        if (![stringElement isEqualToString:@"item"]) {
            if (!(element->firstChild)) {
                if (!(element->nextSibling)) {
                    element = nil;
                }
                element = element->nextSibling;
            }
            element = element->firstChild;
        }
        //Once the first <item> tag is found, this code executes.
        else {
            //Now we move to the first child tag and scour its contents and its siblings
            nextElement = [TBXML nextSiblingNamed:@"item" searchFromElement:element];
            element = element->firstChild;
            do {
                //Here it loops over and over until all the parts have been collected.
                stringElement = [TBXML elementName:element];
                if ([stringElement isEqualToString:@"title"]) {
                    aPost.name = [TBXML textForElement:element];
                }
                if ([stringElement isEqualToString:@"description"]) {
                    aPost.content = [TBXML textForElement:element];
                }
                if ([stringElement isEqualToString:@"link"]) {
                    aPost.postURL = [TBXML textForElement:element];
                }
                if ([stringElement isEqualToString:@"pubdate"]) {
                    aPost.publicationDate = [TBXML textForElement:element];
                }
                element = element->nextSibling;
            } while (element->nextSibling);
            NSLog(@"%@", [self getName:aPost]);
            NSLog(@"name %@ content %@", aPost.name, aPost.content);
            [self.postsArray insertObject:aPost atIndex:self.countingIndex];
            self.countingIndex++;
            element = nextElement;

        }
    } while ((element != nil));
    return self.postsArray;
}

-(Post *)objectInListAtIndex:(NSUInteger)theIndex {
    return [self.postsArray objectAtIndex:theIndex];
}

-(NSUInteger)countOfList {
    return [self.postsArray count];
}

@end 
```

## Post.h

```
#import <Foundation/Foundation.h>

@class Post;

@interface Post : NSObject

@property (nonatomic, weak) NSString *name;
@property (nonatomic, weak) NSString *author;
@property (nonatomic, weak) NSString *publicationDate;
@property (nonatomic, weak) NSString *content;
@property (nonatomic, weak) NSString *postURL;

@end 
```

## Post.m

```
#import "Post.h"

@implementation Post

- (id)init {
    self = [super init];
    if (self) {
        self.name = @"";
        self.author = @"";
        self.content = @"";
        self.publicationDate = @"";
        self.postURL = @"";
    }
    return self;
}
@end 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-17T04:45:43.997

正如我在上面的评论中发布的那样，问题是您在 Post 类中使用了弱引用。试试这个代码：

```
#import <Foundation/Foundation.h>

@class Post;

@interface Post : NSObject

@property (nonatomic, strong) NSString *name;
@property (nonatomic, strong) NSString *author;
@property (nonatomic, strong) NSString *publicationDate;
@property (nonatomic, strong) NSString *content;
@property (nonatomic, strong) NSString *postURL;

@end 
```

如果你想了解强引用和弱引用之间的区别，看看这个问题： [Objective-C 中强引用和弱引用的区别](https://stackoverflow.com/questions/11013587/differences-between-strong-and-weak-in-objective-c)

另请注意，objective-c 属性的默认引用类型是`strong`，因此您可以根据需要省略`strong`关键字。

# mysql - 这是有效的 SQL 吗？还是它违反了任何 MySQL 规则？

> ID：16050634
> 
> 赞同：0
> 
> 时间：2013-04-17T02:53:16.547
> 
> 标签：mysql, sql

这是有效的 SQL 吗？as well的用法对`GROUP BY`吗？

另外，如何按 TOTAL 对结果进行排序？

谢谢

```
 SELECT packages.id          AS PPIIDD,
       Q_ALLOTMENTS.total   AS TOTAL,
       roomname,
       hotelrooms.room_id   AS RID,
       packages.description AS PDESC,
       hotelname,
       regionname,
       places.name          AS PLACENAME,
       destinationname,
       hotels.property_desc,
       hotels.hotel_id      AS HID,
       room_rates.high      AS ROOM_HIGH,
       packages.low         AS PLOW,
       hotels.startype,
       address1,
       address2,
       town,
       postcode,
       hotelrooms.room_id   AS RID,
       packages.type        AS PTYPE
FROM   packages
       INNER JOIN hotels
               ON hotels.hotel_id = packages.hotel_id
                  AND hotels.status = 'active'
       INNER JOIN allotments_new
               ON allotments_new.package_id = packages.id
                  AND allotments_new.day_date >= '2013-04-17'
                  AND allotments_new.day_date < '2013-04-18'
                  AND allotments_new.day_rate > 0
                  AND allotments_new.status != 'n'
                  AND allotments_new.minimum_number_of_nights <= 1
       INNER JOIN hotelrooms
               ON hotelrooms.room_id = packages.room_id
                  AND hotelrooms.status = 'active'
       INNER JOIN room_rates
               ON room_rates.room_id = hotelrooms.room_id
       INNER JOIN destinations
               ON destinations.destination_id = hotels.destination_id
       INNER JOIN regions
               ON regions.region_id = hotels.region_id
       LEFT OUTER JOIN places
                    ON places.id = hotels.places_id
       INNER JOIN (SELECT Sum(day_rate) AS TOTAL,
                          allotments_new.status,
                          allotments_new.number_of_rooms,
                          day_rate,
                          day_date,
                          package_id
                   FROM   allotments_new
                   WHERE  allotments_new.day_date >= '2013-04-17'
                          AND allotments_new.day_date < '2013-04-18'
                          AND allotments_new.day_rate > 0
                          AND allotments_new.status != 'n'
                          AND allotments_new.minimum_number_of_nights <= 1
                   GROUP  BY allotments_new.status,
                             allotments_new.number_of_rooms,
                             day_rate,
                             day_date,
                             package_id) AS Q_ALLOTMENTS
               ON Q_ALLOTMENTS.package_id = packages.id
WHERE  hotels.hotel_id = '1875'
       AND packages.status = 'active'
       AND hotels.status = 'active'
       AND hotelrooms.status = 'active'
       AND maximum_number_of_adults_and_children >= '1'
       AND 1 = '1'
       AND 1 = '1'
       AND 1 = '1'
       AND 1 = '1'
       AND 1 = '1'
       AND 1 = 1
       AND 1 = 1
GROUP  BY ppiidd
ORDER  BY startype DESC 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-17T03:01:01.847

Mysql 有一种特殊的方式来处理组，因为任何其他数据库都不支持 AFAIK。这里是：

通常，group by 必须列出*所有*未聚合的列。但是在 mysql 中，mysql 的行为不是抛出错误，而是为group by 子句*中*列出的列的每个唯一组合返回随机选择的一行。出于实用性考虑，选择的行不是随机的，而是遇到的*第一行。*

答案是这不是错误，但查询可能不会返回您期望的结果。

* * *

顺便说一句，此功能对于根据列的某些子集获取第一行/最后一行非常方便，例如获取每个项目的最新行：

```
select * from (
    select * from mytable order by timestamp desc) x
group by item_id 
```

中间查询确保以最新的时间戳顺序遇到行。时髦的 group by 返回每个 item_id 遇到的第一行，这当然是最新的。

# xcode - Xcode 产品 -> 存档已禁用

> ID：16050640
> 
> 赞同：589
> 
> 时间：2013-04-17T02:53:52.540
> 
> 标签：xcode, provisioning, ad-hoc-distribution

几个月以来，我一直在为临时分发进行归档，但今天突然间我无法这样做，因为归档菜单项被禁用。我没有改变任何东西。我完成了项目的配置设置，看起来还不错。

我的 Ad Hoc 个人资料将在 14 天后到期。这可能是问题吗？我不相信我可以在它到期之前更新它。组织者中有一个我的临时个人资料的“更新”按钮，但是当我点击它时，我得到......

> 在供应门户上找不到给定的配置文件。请在尝试更新“MyAddHocProfile”之前刷新您的配置文件</p>

供应门户中的配置文件显示为活动状态，将于 30 日到期。我注意到我还没有升级到 4.6.2 并且升级了。然后我下载了我的配置文件并双击它，以为会在 Xcode 中刷新配置文件，但仍然没有乐趣。我还尝试手动替换库中的配置文件 MyAddHocProfile.mobileprovision。

他们是什么意思“刷新您的配置文件”？

即便如此，我认为只要配置文件处于活动状态，我就应该能够创建档案。我一定做错了什么。

* * *

## 回答 #1

> 赞同：1633
> 
> 时间：2013-09-13T17:09:57.890

您已将方案目标更改为模拟器而不是**Generic iOS Device**。

这就是为什么它是灰色的。

![从模拟器更改为通用 iOS 设备](https://i.stack.imgur.com/bvn1f.png)

* * *

## 回答 #2

> 赞同：43
> 
> 时间：2021-04-24T16:11:24.730

在较新版本的 Xcode 中选择**“任何 iOS 设备” 。**并且**存档选项**将被**启用**！

* * *

## 回答 #3

> 赞同：20
> 
> 时间：2018-05-11T09:55:59.893

将活动方案 Device 从 Simulator 更改为 Generic iOS Device

* * *

## 回答 #4

> 赞同：10
> 
> 时间：2020-06-23T06:36:20.757

为通用 iOs 设备选择活动方案。

[![选择通用 iOs 设备](https://i.stack.imgur.com/DJy5b.jpg)](https://i.stack.imgur.com/DJy5b.jpg)

* * *

## 回答 #5

> 赞同：8
> 
> 时间：2021-02-08T14:45:01.380

除了其他答案中提到的通用设备（或较新版本的 Xcode 中的“任何 iOS 设备”）之外，可能没有为方案中的当前目标选择“存档”操作。

要查看和编辑当前方案，请选择`Product > Schemes > Edit Scheme...`( `Cmd`+ `<`)，然后确保在与所需目标对应的行中选中“存档”操作。

在下图中，`Archive`未选中，并且该`Archive`操作在`Product`菜单中显示为灰色。检查指示的复选框为我解决了这个问题。

[![方案设置](https://i.stack.imgur.com/SmyYE.png)](https://i.stack.imgur.com/SmyYE.png)

* * *

## 回答 #6

> 赞同：5
> 
> 时间：2019-11-04T09:33:48.077

如果您确定您选择了`Generic iOS device`并且仍然看不到该选项，那么您只需重新启动 Xcode。

作为一名使用 Xcode 11.2 的 cordova 开发人员，这对我来说是缺少的解决方案

# r - 在我的数据中引用特定位置

> ID：16050641
> 
> 赞同：0
> 
> 时间：2013-04-17T02:53:53.257
> 
> 标签：r

我是 R 新手，正在尝试解决问题。

这是我的数据示例：

```
product_id             week           purchases
      53                0                   19              
      53                1                   27               
      53                2                   34                   
      53                3                   43                
      53                4                   44 
```

对于这个数据，product_id 有 3 种类型，每一种的 week 变量从 0 到 15 运行，每一种都有一个正的购买值。

我想添加第三个变量，称为百分比，并希望它等于购买/当周 = 15 时的购买价值，用于相关的产品数据 ID。

我的问题是，在编写此方程式时，我不知道如何告诉 RI 只想参考 week=15 和我所在行的产品 ID。

任何帮助，将不胜感激！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-17T03:05:47.287

使用`week==4`而不是 15（因此它适用于您的示例数据）。所有这些结果都假设只有`value == TRUE`一个`week==4`

你可以使用`ave`（和`transform`）

```
transform(DF, prop.purchases = ave(purchases, product_id, FUN = function(x) x/ x[week==4])) 
```

使用`data.table`

```
library(data.table)
DT <- data.table(DF)
DT[, prop.purchase := purchases / purchases[week==4], by = product_id] 
```

使用键的替代方法和`by-without-by`

```
DT <- data.table(DF, key = 'product_id')

DT[DT[week==4], prop.purchase := purchases / i.purchaes] 
```

使用`plyr`和`ddply`

```
library(plyr)

ddply(DF, .(product_id), mutate,  prop.purchases = purchases / purchases[week==4]) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-17T03:24:00.497

`ifelse`对您的简单示例数据使用 simple有效：

# 样本数据称为样本

```
sample data  (with added data for id 54 and 55: 
product_id  week    purchases
53  0   19
53  1   27
53  2   34
53  3   43
53  4   44
53  14  23
54  0   23
54  1   21
54  2   22
54  3   32
54  4   33
54  14  22
55  0   22
55  1   33
55  2   44
55  3   55
55  4   11
55  14  12

sample$percent<-with(sample,ifelse(product_id ==53, purchases/purchases[week==14 &product_id==53],ifelse(product_id ==54, purchases/purchases[week==14 & product_id==54],purchases/purchases[week==14 &product_id==55])))

Output: 
 product_id week purchases   percent
1          53    0        19 0.8260870
2          53    1        27 1.1739130
3          53    2        34 1.4782609
4          53    3        43 1.8695652
5          53    4        44 1.9130435
6          53   14        23 1.0000000
7          54    0        23 1.0454545
8          54    1        21 0.9545455
9          54    2        22 1.0000000
10         54    3        32 1.4545455
11         54    4        33 1.5000000
12         54   14        22 1.0000000
13         55    0        22 1.8333333
14         55    1        33 2.7500000
15         55    2        44 3.6666667
16         55    3        55 4.5833333
17         55    4        11 0.9166667
18         55   14        12 1.0000000 
```

# c# - 间隔调度算法：最早完成时间

> ID：16050643
> 
> 赞同：1
> 
> 时间：2013-04-17T02:53:57.013
> 
> 标签：c#, algorithm, scheduling, greedy

我正在尝试使用贪婪技术模拟检测最早完成时间的间隔调度算法。我的问题是，如果它将在控制台应用程序中创建，输入是什么？有哪些方法？非常感谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-17T03:44:45.740

每个任务的输入是开始时间和结束时间（例如 10:00 开始时间和 14:00 结束时间）。您可以将控制台输入解析为日期或类似的东西，但如果这只是一个模拟，那么您最好让控制台输入为非负整数（例如 4 个开始时间和 9 个结束时间），因为它会使你解析输入的工作更容易。

您可以采取几种贪心的方法，例如始终选择最短的任务（即间隔最短的任务）；最佳方法是始终选择首先完成的任务（例如，您可以根据结束时间对任务进行排序并选择下一个不冲突的任务，尽管可能有一个线性时间算法来完成此任务）。

# python - 将目录中所有文件的第n列复制到单个文件中

> ID：16050647
> 
> 赞同：2
> 
> 时间：2013-04-17T02:54:27.503
> 
> 标签：python, bash, awk

我有一个包含许多 .csv 文件的目录。如何按列将每个文件的第 n 列提取到新文件中？

例如：

档案一：

```
111,222,333
111,222,333 
```

文件 B：

```
AAA,BBB,CCC
AAA,BBB,CCC 
```

文件 C：

```
123,456,789
456,342,122 
```

等等...

如果 n = 2，我希望我的结果文件是：

```
222,BBB,456,... 
222,BBB,342,... 
```

where`...`表示将有与目录中的文件数一样多的列。

到目前为止我的尝试：

```
#!/bin/bash

for i in `find ./ -iname "*.csv"`
  do
    awk -F, '{ print $2}' < $i >> result.csv ## This would append row-wise, not column-wise.
  done 
```

**更新：**

我不想只加入两个文件。特定目录中有 100 个文件，我想将所有文件的第 n 列复制到一个文件中。我以两个文件为例来说明如果只有两个文件，我希望数据如何。

正如评论中所指出的，加入两个文件是微不足道的，但加入多个文件可能并不容易，这是我问题的重点。python会帮助完成这项工作吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2015-09-16T06:58:33.947

基于三元组的解决方案，这是一个使用 eval 的通用版本：

`eval paste -d, $(printf "<(cut -d, -f2 %s) " *.csv)`

我不太喜欢 eval （使用它时要小心），但它有它的用途。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-17T08:14:44.350

这一个班轮应该工作：

```
awk -F, -v OFS="," 'NR==FNR{a[NR]=$2;next}{print a[FNR],$2}' file1 file2 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-17T04:27:00.787

假设 Bash 进程替换是可以接受的（即您不需要将解决方案移植到 Bash 不可用的系统）；

```
paste -d, <(cut -d, -f2 file1) <(cut -d, -f2 file2) <(cut -d, -f2 file3) # etc 
```

POSIX 解决方案需要临时文件。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-04-17T02:58:14.003

唔。我的第一个想法是同时拥有外循环和内循环。外部循环将是行号的计数器。内部循环将通过 csv 文件。您需要在内部循环中使用 head/tail 来获取正确的行号，以便您可以获取正确的字段。

另一种方法是使用您现在拥有的一个循环，但将每一行写入一个单独的文件，然后合并它们。

这些似乎都不理想。老实说，我会在 Perl 中执行此操作，因此您可以使用实际的内存数据结构并避免需要复杂的逻辑。

# tkinter - 适用于 Android 的 PYgame 和 TKinter

> ID：16050650
> 
> 赞同：2
> 
> 时间：2013-04-17T02:54:42.677
> 
> 标签：tkinter, pygame

我正在使用 PGS4A 为 android 构建一个应用程序。我正在使用 pygame，但在 pygame 中我想要一个向下滚动窗口来显示我的游戏的说明，我想为此使用 TKINTER。

可以将 tkinter 与 pygame 一起使用吗？如果我将 tkinter 和 pygame 子集一起用于 android，它会在 android 上运行吗？

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-10-02T21:11:42.580

根据对这个问题的回答：[有什么我需要注意一起使用 Tkinter 和 pygame 的吗？](https://stackoverflow.com/questions/8291274/is-there-anything-i-need-aware-of-using-tkinter-and-pygame-together)这显然不是那么简单。也许阅读那个问题，然后一起尝试一些 Pygame 和 tkinter。至于PGS4A，我自己没有任何经验。

# javascript - 如何将我正在使用的这个 API 的 JSON 响应分配给我页面上的元素？

> ID：16050652
> 
> 赞同：2
> 
> 时间：2013-04-17T02:54:44.433
> 
> 标签：javascript, json, api

我正在尝试使用来自[https://developer.forecast.io](https://developer.forecast.io)的 API，我收到 JSON 响应，这是我第一次使用 API，我真正需要知道的是，我该怎么做将我从他们的 API 返回的 JSON 响应分配给我页面上的元素。谢谢！

![在此处输入图像描述](https://i.stack.imgur.com/w0HxR.png)

这是通过我的标题中的脚本标签完成的：

脚本（src=' [https://api.forecast.io/forecast/APIKEY/LAT,LON](https://api.forecast.io/forecast/APIKEY/LAT,LON) '）

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-17T03:05:23.223

[http://api.jquery.com/jQuery.ajax/](http://api.jquery.com/jQuery.ajax/)您需要添加一个成功回调，该页面底部是您可以查看的示例。

**编辑**

好的，我看到您在请求中使用了脚本标签，因为 api 在您当前的域之外，您需要发出 JSONP 请求

```
$(document).ready(function(){
    $.ajax({
        url: 'https://api.forecast.io/forecast/APIKEY/LAT,LON',
        dataType: 'jsonp',
        success: function(data){
            //do whatever you want with the data here
            $("body").append(JSON.stringify(data));
        }
    });
}); 
```

当然，您需要对该块进行一些调整，但您明白了

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-17T03:03:01.680

您正在寻找的是 DOM 操作。DOM 是 HTML[文档对象模型](http://en.wikipedia.org/wiki/Document_Object_Model)，是构成文档的 HTML 的对象表示。有*很多*方法可以解决这个问题，但用于执行此任务的更流行的 Javascript 库之一是 jQuery。[有关更多信息，请参阅有关操作](http://api.jquery.com/category/manipulation/)的帮助文档类别。

好的，根据您的说明，您还没有使用 AJAX。我说“还没有”，因为你需要这样做。同样，我会为此推荐 jQuery，并将他们自己的文档作为最佳资源。对于简单的“获取”，您最简单的选择是[getJSON 方法](http://api.jquery.com/jQuery.getJSON/)。

因此，在一个非常简单的级别上，您可能会执行以下操作：

```
$(function(){
    $.getJSON('url_to_api', function(data) {
        $("#SummaryBox").append("<div>" + data.hourly.summary + "</div>");
    }
}); 
```

# ibm-mobilefirst - IBM Worklight：扩展服务器端 Java 代码

> ID：16050659
> 
> 赞同：0
> 
> 时间：2013-04-17T02:55:28.773
> 
> 标签：ibm-mobilefirst

我可以在 Worklight 中扩展服务器端 Java 代码吗？例如，有一个名为`JavaScriptIntegrationLibraryImplementation`under的类`com.worklight.integration.js`。在这个类里面，有一个方法`broadcastNotification`，我想重写这个方法。有可能这样做吗？

**编辑**
原因是：当我在客户端使用选项字段进行订阅时（例如添加customType：A），我想检索已订阅此事件源的设备列表。基于 deviceSubscrpition 中的选项字段，我想有一些业务逻辑来确定向谁发送通知消息。例如，我只会将消息提交给“customType=A”的用户。

但是，Worklight 中没有 API 可以检索设备列表，这使我首先检索该列表。然后在 JavaScript 中执行逻辑并调用 WL.Server.notifyDevice..

因此，我想检查是否有任何方法可以检索已订阅事件源的设备列表（通过连接到 DB 的 API / 适配器） .

谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-17T07:03:42.813

Worklight 的这一部分不可扩展。您可以按照您的说法尝试覆盖此方法，但请注意不支持此方法，在这种情况下我们无法提供帮助。

**编辑**

现在很清楚您要实现的目标......您正在寻找的内容目前不可用。我将为它打开一个功能请求，并在某个时候对其进行评估（如果您是 IBM 的客户，我建议与您的联系人联系......）。

我的建议（形式上有些骇人听闻）：您也许可以使用多个事件源，其中每个事件源代表一个 iOS 版本。在客户端，在应用程序初始化时，您可以检索 iOS 版本并使用它来注册到正确的事件源（这将是允许重用的非常通用的代码）。如果发布了新的 iOS 版本（您可能会提前知道这一点），您只需将此事件源添加到适配器代码并重新部署适配器。新 iOS 版本的用户仍然可以注册通知，因为您在初始化时获得了 iOS 版本，并使用此信息注册到正确的事件源...

重申：

适配器包含： ES_iOS5 ES_iOS6

客户端：

*   获取 iOS 版本，将其存储在某个变量中。
*   注册到事件源，其中事件源名称为 ES_${iOSVersion}
*   如果发布了新的 iOS 版本，只需创建一个新的事件源并重新部署适配器；客户已经有能力处理这个问题。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-05-30T08:30:17.507

@Red23jordon，

我有类似的情况，我创建了一个自定义表，在订阅时，我将用户 ID 和事件类型保存在自定义表中。当用户取消订阅时，我也会从自定义表中删除详细信息。

为了向订阅特定“偶数类型”的用户发送推送，我查看自定义表以获取订阅特定事件类型的用户 ID 列表，然后我进入通知用户/设备表并获取相应的设备并发送推送。

希望它可以帮助你。

谢谢

# python - 将您自己的文本数据集加载到 scikit-learn

> ID：16050660
> 
> 赞同：1
> 
> 时间：2013-04-17T02:55:43.233
> 
> 标签：python, scikit-learn

我想通过加载我自己的数据集来尝试一些算法。我对加载文本文件特别感兴趣（非常类似于 20 NewsGroups 数据集[http://scikit-learn.org/stable/datasets/index.html#general-dataset-api](http://scikit-learn.org/stable/datasets/index.html#general-dataset-api)）。是否有任何文档解释加载示例数据集以外的数据的格式（和过程）？

谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-17T07:30:41.337

scikit-learn 中的 TfidfVectorizer 和其他文本矢量化器类只需将 Python unicode 字符串列表作为输入。因此，您可以根据来源以您想要的方式加载文本：使用 SQLAlchemy 的数据库查询、来自 HTTP API 的 json 流、CSV 文件或文件夹中的随机文本文件。

对于最后一个选项，如果类信息存储在包含文本文件的文件夹名称中，您可以使用[load_files](http://scikit-learn.org/stable/modules/generated/sklearn.datasets.load_files.html)实用程序函数。

# sql - 比较 Oracle 中的日期时间

> ID：16050663
> 
> 赞同：0
> 
> 时间：2013-04-17T02:56:02.563
> 
> 标签：sql, oracle, date, timezone, timestamp

在进行比较之前我需要转换`TIMESTAMP`为吗？`DATE`前任：

```
AND SORD.CREATED >= TO_DATE(FROM_TZ(CAST(TO_DATE('','DD-MON-YYYY HH24:MI:SS') AS TIMESTAMP), 'Asia/Kuala_Lumpur') AT TIME ZONE 'UTC','DD-MON-YYYY HH24:MI:SS')
AND SORD.CREATED < TO_DATE(FROM_TZ(CAST(TO_DATE('','DD-MON-YYYY HH24:MI:SS') AS TIMESTAMP), 'Asia/Kuala_Lumpur') AT TIME ZONE 'UTC','DD-MON-YYYY HH24:MI:SS') 
```

只是在寻找意见，因为我还是新手并且正在学习数据库。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-17T14:53:29.657

很难准确地说出您使用的是什么数据库。根据您提供的代码中的功能，我猜是 Oracle？请确认。

一般来说，我可以告诉你以下几点：

*   您没有传递任何值。to 的第一个参数`TO_DATE`是空的，它将包含要转换为日期的字符串。

*   您需要知道数据库中的值是什么。是`SORD.CREATED`a`DATE`还是`TIMESTAMP`数据类型？它是否保持 UTC 值？如果是这样，那么是的，您应该在查询之前将本地时间转换为 UTC。如果可能，您应该在查询本身之外执行此操作。

*   如果数据库中的值是 type `TIMESTAMP WITH TIME ZONE`，那么您可以使用 a `DATE`or`TIMESTAMP`与`AT TIME ZONE`函数，就像您在问题中显示的那样。

*   不要不必要地转换到字符串/从字符串转换。如果您的源数据已经是`DATE`or`TIMESTAMP`数据类型，则无需转换为字符串。一旦日期成为日期，您就应该保持日期。引入字符串格式有时会引入错误。

# java - 这个号码是素数和安全的？

> ID：16050664
> 
> 赞同：0
> 
> 时间：2013-04-17T02:56:36.613
> 
> 标签：java, primes

我需要创建一个 2048 位素数。

我用过这段代码。

```
SecureRandom rnd = new SecureRandom();
int certainty = 100000000;
BigInteger p = new BigInteger(2048, certainty, rnd); 
```

这个号码是素数和安全的？

如果方法错误，我该怎么办？

如果你让我知道，我非常感谢你！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-17T03:02:43.993

这个数字*可能是*素数。有一些方法可以检查它是否确实是素数，但这并没有。另一方面，我建议使用`BigInteger.probablePrime(int bitLength, Random rnd)`Javadoc[来](http://docs.oracle.com/javase/1.4.2/docs/api/java/math/BigInteger.html#probablePrime%28int,%20java.util.Random%29)摆脱确定性值。

至于它是否*安全*，这完全取决于你对安全的定义，但是 SecureRandom 类符合各种加密标准，所以你应该在这方面做得很好。

# ruby - 如何通过涟漪多关联获取记录？

> ID：16050665
> 
> 赞同：1
> 
> 时间：2013-04-17T02:56:55.443
> 
> 标签：ruby, riak, ripple

我想通过涟漪[https://github.com/basho/ripple](https://github.com/basho/ripple)将数据保存到 riak 中，我创建了一个模型：

```
class Person
  include Ripple::Document
  property :name, String
  many :friends, :class_name => "Person"
end 
```

如果有两个人模型实例，如何知道一个人是否是另一个人的朋友？喜欢：

`person.friends.get(somekey)`

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-11-11T16:22:45.987

作为`person.friends`一个数组，你可以这样称呼它：

```
person.friends.include? otherperson 
```

# azure - Azure 辅助角色在睡眠时是否会收取 $$？

> ID：16050669
> 
> 赞同：3
> 
> 时间：2013-04-17T02:57:12.687
> 
> 标签：azure, azure-worker-roles

我试图弄清楚如何（粗略地）计算我正在考虑创建的一些工人角色的一些预期成本。

**TLDR；**

***`Sleep(someTime)`如果您的工人正在/睡觉，Azure 会向您收取 $$吗？***

* * *

**细节**

[Azure 定价页面](http://www.windowsazure.com/en-us/pricing/details/cloud-services/)说明了它们的定价、每小时和每个 VM 大小。

所以为了让我的问题保持简单，让我们假设我想要 3 个工人，每个工人都在一个小 (A1) 实例上。

现在 - 关键是这 => 时间！

所以让我们也假装，这正是每个工人所做的。

```
Worker 1 : Do-Some-Work-That-Takes-1-Second-Exactly. Sleep(59000);

Worker 2: Do-Some-Work-That-Takes-5-Seconds-Exactly. Sleep(550000);

Worker 3: Do-Some-Work-That-Takes-10-Seconds-Exactly. Sleep(50000); 
```

因此，工人 1 工作 1 秒，然后休眠 59 秒。工人 2：5 秒 + 55 秒睡眠。工人 3：10 秒 + 50 秒睡眠。

这个想法，工人们每分钟都会“开始”，做他们的工作。

** 是的，我知道实时工作是可变的.. 但让我们保持简单 **

那么，对于每个工人，他们是按每分钟（工作 + 睡眠）收费还是只按他们工作的时间收费？

例如。1 秒 + 5 秒 + 10 秒 = 每分钟 16 秒。= 16 * 60 = 960 秒/小时

如果一个小时内有 3600 秒 .. 这意味着在我被收取 1 小时的“工作”费用之前，还不到 4 小时或现实生活时间？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-04-17T03:11:18.607

Worker 和 Web 角色按部署的小时收费，因此即使什么都不做，也会因为您实际调试要启动的虚拟机而被收费。

即使角色已停止但部署尚未删除，您仍需为实例付费。

另请注意，它按整小时收费，因此如果您在 10 分钟后部署并关闭，您仍需为整小时付费。或者，如果您在上午 11:55 部署并在下午 12:15 删除，您将支付 2 小时的费用。

来自[http://www.windowsazure.com/en-us/pricing/details/cloud-services/#](http://www.windowsazure.com/en-us/pricing/details/cloud-services/#)

**如果我部署的实例处于“停止”状态，我是否仍需要付费？**

是的，已停止的实例仍会占用为实例提供动力的计算资源，因此您仍需付费。为了停止计费，您需要删除您的部署。

**如果我的 Web 或 Worker 角色部署不到一小时，我需要支付多少费用？**

云服务根据您的服务部署的时钟小时数计费。如果部署在一个时钟小时内超过五分钟，则任何部分时钟小时都按整小时计费。如果您的服务部署时间不到一小时，您可能需要支付零、一或两个小时的费用，具体取决于部署发生的时间。例如，如果您在上午 10:50 部署一个小型云服务实例并在上午 11:10 删除它，您将需要支付两个小时的费用，其中一个小时用于上午 10:50 至上午 11:00 的使用，另一个小时用于在上午 11:00 和上午 11:10 期间使用。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2017-08-10T15:25:50.663

我知道这是一个老问题，但我正在做一些 Azure 定价研究，并且接受的答案有一部分不再正确。

问题“**如果我的 Web 或 Worker 角色的部署时间不到一个小时，我需要支付多少费用？** ”答案中提到：

> 如果部署在一个时钟小时内超过五分钟，则任何部分时钟小时都按整小时计费。

当前[定价页面](https://azure.microsoft.com/en-us/pricing/details/cloud-services/)有一个常见问题解答，其中指出这是*不正确*的。

**如果我的 Web 或辅助角色部署不到一小时，我需要支付多少费用？**

答案是：

> 云服务根据您的服务部署的持续时间计费。如果您的实例部署时间不到一个小时，或者几个小时加上几分之一小时，您将只为该持续时间付费。Azure 不会将部分小时取整为整小时进行计费——您只需为云服务实例处于“运行”状态的持续时间付费。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-17T03:28:24.917

只要您在 Windows azure 中进行部署，您就需要付费。不管是运行状态还是停止状态。如果您关闭角色，那么您也将产生费用。

# java - 生成 Java 日期，但日期和时间不变

> ID：16050671
> 
> 赞同：1
> 
> 时间：2013-04-17T02:57:18.047
> 
> 标签：java

我正在尝试将随机日期生成为 Java 日期，但日期保持不变。我希望时间只是随机的，而不是日期。

例如测试用例 1：1/1/2013 9:08:52

测试用例 2：1/1/2013 15:01:42 等。

有任何想法吗？

嘿伙计们，我发现了一些有用的东西。谢谢您的帮助！

```
import java.util.Random;
import java.sql.Time;

public class Clock2 {
public static void main(String[] args) {

    for (int i=0; i< 100; i++){ 
        final Random random = new Random();
        final int millisInDay = 24*60*60*1000;
        Time time = new Time((long)random.nextInt(millisInDay));
        System.out.println(time);
    }

} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-17T03:24:46.650

使用它来找出您想要的日期的开始和结束 Unix 时间戳：[http ://www.epochconverter.com/](http://www.epochconverter.com/)

`long`在这两个值之间生成一个随机数。最终`long`使用`SimpleDateFormat` [http://docs.oracle.com/javase/6/docs/api/java/text/SimpleDateFormat.html格式化](http://docs.oracle.com/javase/6/docs/api/java/text/SimpleDateFormat.html)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-17T04:32:38.030

尝试

```
 Random r = new Random();
    GregorianCalendar c = new GregorianCalendar(r.nextInt(100) + 2000, r.nextInt(11), r.nextInt(31));
    long t0 = c.getTimeInMillis();
    for(int i = 0; i < 10; i++) {
        Date d = new Date(t0 + r.nextInt(24 * 3600 * 1000));
        System.out.println(d);
    } 
```

# c++ - C++ 中 FindFirstFile() 的错误 C2664

> ID：16050672
> 
> 赞同：-1
> 
> 时间：2013-04-17T02:57:19.257
> 
> 标签：c++, file

箭头在哪里，如果不是字符串 si，而是写存储在字符串 s 中的内容（“C:/Users/John/Desktop/mama/*”）它运行良好，但我需要像这样使用它，因为我将从用户。我怎样才能使它与字符串一起工作？错误：错误 1 ​​错误 C2664：“FindFirstFileA”：无法将参数 1 从“std::string”转换为“LPCSTR”

同样在此错误之前出现了另一个类似的错误，我将字符集从 Unicode 更改为未设置以使其工作。这种变化会给我的主要项目带来麻烦吗？这是一个测试，当它可以时我会将它添加到我的哈希表项​​目中！感谢您的时间 ：）

```
#include <windows.h>
#include <iostream>
#include <fstream>
#include <string>
#include <tchar.h>
#include <stdio.h>
using namespace std;

struct pathname
{
    string path;
    pathname *next;
};

int main()
{
    pathname *head = new pathname;
    pathname *temp = head;
    WIN32_FIND_DATA fData;
    string s = "C:/Users/John/Desktop/mama/*";
    void * handle = FindFirstFile( s, &fData ); //<~~~~~~
    FindNextFile(handle, &fData);//meta apo auto emfanizei ta onomata
    FindNextFile(handle, &fData);
    temp->next = 0;
    temp->path = fData.cFileName;
    while (FindNextFile(handle, &fData) != 0) //swsto listing
    {   
          temp->next = new pathname;
          temp = temp->next;
          temp->next = 0;
          temp->path = fData.cFileName;
    }
    temp = head;
    cout <<"edw arxizei" <<endl;
    while(temp != 0)
    {
        cout << temp->path << endl;
        temp = temp->next;
    }
    system("pause");
} 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-17T03:00:01.360

`std::string`没有隐式转换为`const char*`. 您必须通过调用的`c_str()`成员函数手动检索指针`std::string`。

```
void * handle = FindFirstFile( s.c_str(), &fData ); 
```

改用微软的 Unicode 理念也无济于事。您必须切换到使用`std::wstring`，并且仍然必须调用`c_str()`以检索指向字符串缓冲区的原始指针。

[您可以在cppreference.com](http://en.cppreference.com/w/cpp/string/basic_string)上找到有关各种字符串及其操作的更多信息

# azure - 如何在天蓝色中存储.bat文件，执行它并连接到它

> ID：16050673
> 
> 赞同：1
> 
> 时间：2013-04-17T02:57:37.173
> 
> 标签：azure

我是 Windows azure 的新手，但我已经知道如何在 azure 中部署我的服务。我需要像 azure 中的文件夹一样来存储一些文本文件、两个 .exe 文件和一个 .bat 文件。然后我希望我部署的服务使用这些文件并执行 .bat 文件并在该文件夹上创建一些新的文本文件。

我的问题是是否有像我需要的文件夹一样的东西？如何执行它？以及如何通过我的 wcf 服务连接到该文件夹​​？

我真的很感谢你的帮助。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-17T03:26:28.187

如果您希望该 bat 文件执行一次，即在角色启动期间，您可以使用[start up task](http://msdn.microsoft.com/en-us/library/windowsazure/hh180155.aspx)。如果要在 WCF 调用期间执行 bat 文件，可以使用 .NET[进程](http://msdn.microsoft.com/en-in/library/system.diagnostics.process.aspx)类。但是，要执行此任务，您可能需要更高的权限。

# javascript - 动态更改 URL 而不将先前添加到历史堆栈

> ID：16050676
> 
> 赞同：4
> 
> 时间：2013-04-17T02:57:46.883
> 
> 标签：javascript

stackoverflow 问题 URL 包括一个 servlet、id# 和标题，如下所示......

```
stackoverflow.com/questions/824349/modify-the-url-without-reloading-the-page 
```

我的网站与 URL 的工作方式相同......

```
localhost:8443/user/1/admin 
```

我在后端进行的获取用户信息的查询只需要 ID 号。之后的用户名只是为了展示。因此，如果您在浏览器中输入此内容，`localhost:8443/user/1/a`它将为您提供与此完全相同的页面`localhost:8443/user/1/admin`

Stackoverflow 能够注意到 URL 的末尾部分丢失并将其添加回来。所以如果你把它放到地址栏中

```
stackoverflow.com/questions/824349/modify 
```

他们会动态地将其更改为

```
stackoverflow.com/questions/824349/modify-the-url-without-reloading-the-page 
```

现在我确实阅读了有关在 stackoverflow 上动态更改 URL 的内容，每个人都一直在参考， `history.pushstate`所以我尝试了一下。这样做的问题是它向历史堆栈添加了不正确的 URL。我想要完成的是将 URL 更改为应有的路径，而不是将错误的 URL 包含到历史堆栈中。因此，如果用户决定返回，他们会返回到他们上次访问的实际页面，`stackoverflow.com/questions/824349/modify`. 就像 stackoverflow 一样。我怎么能这样！？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-17T03:00:34.217

查看[replaceState 方法](https://developer.mozilla.org/en-US/docs/DOM/Manipulating_the_browser_history#The_replaceState%28%29.C2.A0method)。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-17T03:10:35.433

尝试使用 history.replaceState 而不是 history.pushState

# typo3 - 您可以为 plugin.tt_news.limit 设置的最大数量是多少

> ID：16050677
> 
> 赞同：1
> 
> 时间：2013-04-17T02:57:58.397
> 
> 标签：typo3, typoscript, tt-news

我有一个网站，我想在一页上显示我所有未归档的文章。您可以为此设置的最大限制是多少？即使我在常量中有以下打字稿并且我想在一个列表中显示超过 100 篇，它似乎永远不会显示超过 40 篇文章？

```
 plugin.tt_news.limit = 200 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-17T07:51:17.010

默认的 TypoScript 值为 7。该数字必须在 0 到**1000**的范围内。如果没有，插件会将限制设置为 50。

换句话说，您的值 200 应该没问题。考虑到您的设置，请检查...

1.  ...如果在根页面中设置了常量的 TypoScript 值`plugin.tt_news.limit`，则它不会被显示新闻的页面或某些父页面上设置的值覆盖。

2.  ... TypoScript 设置（！）中没有设置值。默认设置是`plugin.tt_news.limit = {$plugin.tt_news.limit}`- 这意味着设置使用常量值。您可能不小心将它设置为 eg `plugin.tt_news.limit = xx`，这意味着永远不会使用常量值。

3.  ...插件内容元素中没有设置限制，因为它会覆盖 TypoScript 值。

# unit-testing - JavaDB vs HSQL vs H2 用于测试从简单到复杂的 Oracle SQL

> ID：16050682
> 
> 赞同：1
> 
> 时间：2013-04-17T02:58:26.740
> 
> 标签：unit-testing, hsqldb, h2, javadb

我的产品的 DB 层使用 MyBatis 对 Oracle 数据库执行查询。想要测试数据库层并能够运行特定于 Oracle 的 SQL 并返回模拟数据。

从我所做的搜索中，我发现 HSQL 支持 Oracle 语法，JavaDB 是否支持类似的功能？对于 javaDB，它带有 > java6，因此不需要添加更多依赖项。如果我的 SQL 演变为使用新的 Oracle 特定功能等，哪一个更合适。我也在查询中使用 Oracle 序列。

为什么我要测试 SQL 的？我希望能够在 SQL 的@开发时间而不是在生产中捕获逻辑错误。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-17T08:50:15.323

这是一个功能比较请求，可能会被版主关闭。

JavaDB 是否支持 Oracle 语法？明显不是。Oracle 10g 的系统税特性和功能是最新 JavaDB 的数倍。它是否支持一小部分 Oracle 语法？是的。

请阅读这些数据库的指南，看看哪一个涵盖了您需要的 Oracle 语法特性。

# php - PHP MYSQL将统一值输出到同一表列

> ID：16050683
> 
> 赞同：1
> 
> 时间：2013-04-17T02:58:32.820
> 
> 标签：php, mysql, sql

我的 MySQL 中有一张表，如下所示

```
============================
id  | courses   | r_number  
----------------------------
1   | English   | C/009
2   | Maths     | C/009
3   | English   | C/003
4   | Maths     | C/002
============================ 
```

我如何将其输出为类似于下面的 HTML 表

```
====================================
id  | courses           | r_number  
------------------------------------
1   | English, Maths    | C/009
2   | English           | C/003
3   | Maths             | C/002
==================================== 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-17T02:59:37.963

```
SELECT  MIN(ID) ID,
        GROUP_CONCAT(Courses SEPARATOR ', ') Courses,
        r_Number
FROM    TableName
GROUP   BY r_Number
ORDER   BY ID 
```

*   [SQLFiddle 演示](http://www.sqlfiddle.com/#!2/d2cec/2)

*我想知道为什么在您的示例`ID`中与记录不匹配，这是为什么呢？*

# r - 使用组合预测(auto.arima())

> ID：16050684
> 
> 赞同：1
> 
> 时间：2013-04-17T02:58:43.883
> 
> 标签：r, time-series, forecasting

我最近更新到 forecast() 版本 4.03，下面示例代码的最后一行（第 4 行）现在给出了错误消息（如底部所示）。请注意，第 4 行中的 forecast() 是第 3 行的 auto.arima() 的输出（它可以正常工作）。预测包中有什么变化吗？

此外，使用以下代码将第 3 行中的 zoo 术语替换为 ts 术语时，错误消息消失：

```
 autarimod <- auto.arima(log(as.ts(zooinpdat))) ##New line 3 
```

那么，forecast(auto.arima()) 组合不再接受 zoo 对象了吗？如果是这种情况，有没有比 as.ts() 方法更好的方法来处理这个问题？

```
library(zoo)
library(forecast)

inpdat <- c(353.03, 383.06, 407.9, 420.58, 345.96, 299.73, 286.42, 291.03, 
  297.71, 300.92, 272.13, 283.58, 331.72, 372.95, 404.78, 403.04, 
  374.57, 332.94, 284.37, 311.78, 307.27, 302.42, 283.52, 288.64, 
  337.19, 416.35, 418.65, 431.51, 407.74, 319.28, 297.33, 314.83, 
  290.49, 309.38, 294.5, 330.63, 371.2, 418.76, 440.05, 467.23, 
  384.32, 329.81, 300.4, 318.9, 355.06, 329.93, 293.43, 297.76, 
  340.42, 393.09, 395.2, 443.13, 396.45, 341.96, 307.95, 322, 339.63, 
  312.12, 304.31, 310.95)

zooinpdat <- zooreg(inpdat, frequency=12, start=as.yearmon("May 1965"))

autarimod <- auto.arima(log(zooinpdat)) ##Line 3

for_arima <- forecast(autarimod, level=0.98, h=48) ##Line 4

Error in .cbind.ts(list(e1, e2), c(deparse(substitute(e1))[1L], deparse(substitute(e2))[1L]),  : 
not all series have the same frequency 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-17T05:15:48.647

预测包适用于`ts`对象，而不是`zoo`对象。有些函数可以与`zoo`对象一起工作，但不能保证。特别是，当我对包进行更改时，我从不检查更改是否会`zoo`在使用对象时引起问题。

您可以使用修复错误

```
zooinpdat <- as.ts(zooinpdat) 
```

# ruby-on-rails - 使用 rspec 获取“ActiveRecord::UnknownAttributeError：未知属性：email_confirmation”错误

> ID：16050686
> 
> 赞同：25
> 
> 时间：2013-04-17T02:58:58.430
> 
> 标签：ruby-on-rails, validation

我在运行测试时遇到了这个错误。我已经检查以确保所有的`email_confirmation`s 拼写正确并且（除非我疯了）它们是正确的。我有点像 Rails 菜鸟，所以它可能很简单。

用户模型

```
class User < ActiveRecord::Base
  attr_accessible :email, :email_confirmation, :first_name, :last_name,
                  :password, :password_confirmation
  has_secure_password

  before_save { |user| user.email = email.downcase }

  validates :first_name, presence: true, length: { maximum: 25 }
  validates :last_name, presence: true, length: { maximum: 25 }
  VALID_EMAIL_REGEX = /\A[\w+\-.]+@[a-z\d\-.]+\.[a-z]+\z/i
  validates :email, presence: true, format: { with: VALID_EMAIL_REGEX },
                    uniqueness: { case_sensitive: false }
  validates :email_confirmation, presence: true
  validates :password, presence: true, length: { maximum: 6 }
  validates :password_confirmation, presence: true
end 
```

Rspec 测试

```
require 'spec_helper'

describe User do
  before { @user = User.new(email: "user@example.com",
                            first_name: "John", last_name: "Smith",
                            password: "foobar", password_confirmation: "foobar",
                            email_confirmation: "user@example.com") }

  subject { @user }

  it { should respond_to(:first_name) }
  it { should respond_to(:last_name) }
  it { should respond_to(:email) }
  it { should respond_to(:email_confirmation) }
  it { should respond_to(:password_digest) }
  it { should respond_to(:password) }
  it { should respond_to(:password_confirmation) }
  it { should respond_to(:authenticate) }

  it { should be_valid }

  describe "when first name is not present" do
    before { @user.first_name = " " }
    it { should_not be_valid }
  end

  describe "when last name is not present" do
    before { @user.last_name = " " }
    it { should_not be_valid }
  end

  describe "when email is not present" do
    before { @user.email = @user.email_confirmation = " " }
    it { should_not be_valid }
  end

  describe "when password is not present" do
    before { @user.password = @user.password_confirmation = " " }
    it { should_not be_valid }
  end

  describe "when first_name is too long" do
    before { @user.first_name = "a" * 26 }
    it { should_not be_valid }
  end

  describe "when last_name is too long" do
    before { @user.last_name = "a" * 26 }
    it { should_not be_valid }
  end

  describe "when email format is invalid" do
    it "should be invalid" do
      addresses = %w[user@foo,com user_at_foo.org example.user@foo.
                             foo@bar_baz.com foo@bar+baz.com]
      addresses.each do |invalid_address|
        @user.email = invalid_address
        @user.should_not be_valid
     end      
    end
  end

  describe "when email format is valid" do
    it "should be valid" do
      addresses = %w[user@foo.COM A_US-ER@f.b.org frst.lst@foo.jp a+b@baz.cn]
      addresses.each do |valid_address|
        @user.email = valid_address
        @user.should be_valid
      end      
    end
  end

  describe "when email address is already taken" do
    before do
      user_with_same_email = @user.dup
      user_with_same_email.email = @user.email.upcase
      user_with_same_email.save
    end

    it { should_not be_valid }
  end

  describe "when password doesn't match confirmation" do
    before { @user.password_confirmation = "mismatch" }
    it { should_not be_valid }
  end

  describe "when email doesn't match confirmation" do
    before { @user.email_confirmation = "mismatch@example.com" }
    it { should_not be_valid }
  end

  describe "when password confirmation is nil" do
    before { @user.password_confirmation = nil }
    it { should_not be_valid }
  end

  describe "when email confirmation is nil" do
    before { @user.email_confirmation = nil }
    it { should_not be_valid }
  end

  describe "with a password that's too short" do
    before { @user.password = @user.password_confirmation = "a" * 5 }
    it { should be_invalid }
  end

  describe "return value of authenticate method" do
    before { @user.save }
    let(:found_user) { User.find_by_email(@user.email) }

    describe "with valid password" do
      it { should == found_user.authenticate(@user.password) }
    end

    describe "with invalid password" do
      let(:user_for_invalid_password) { found_user.authenticate("invalid") }

      it { should_not == user_for_invalid_password }
      specify { user_for_invalid_password.should be_false }
    end
  end
end 
```

架构.rb

```
ActiveRecord::Schema.define(:version => 20130417021135) do

  create_table "users", :force => true do |t|
    t.string   "first_name"
    t.string   "last_name"
    t.string   "email"
    t.datetime "created_at",      :null => false
    t.datetime "updated_at",      :null => false
    t.string   "password_digest"
  end

  add_index "users", ["email"], :name => "index_users_on_email", :unique => true

end 
```

* * *

## 回答 #1

> 赞同：29
> 
> 时间：2013-04-17T04:04:53.923

你得到`UnknownAttributeError`是因为你的`users`表中没有名为`email_confirmation`. 默认情况下，ActiveRecord 将查找与您用于构造模型的属性名称相同的 DB 列，但此行试图使用数据库不知道的属性构造用户：

```
 before { @user = User.new(email: "user@example.com",
                        first_name: "John", last_name: "Smith",
                        password: "foobar", password_confirmation: "foobar",
                        email_confirmation: "user@example.com") } 
```

您是否真的打算将电子邮件确认保存在数据库中，或者您只是想在保存之前检查它是否与电子邮件匹配？我假设是后者，Rails 实际上已经内置支持这样做：

```
class User < ActiveRecord::Base
  validates :email, :confirmation => true
  validates :email_confirmation, :presence => true
end 
```

[在Rails Guide to Validations](http://guides.rubyonrails.org/active_record_validations_callbacks.html#confirmation)或[`validates_confirmation_of`](http://api.rubyonrails.org/classes/ActiveModel/Validations/HelperMethods.html#method-i-validates_confirmation_of)API 文档中查看更多详细信息。（你可能需要为 . 做同样的事情`:password_confirmation`。）

* * *

## 回答 #2

> 赞同：27
> 
> 时间：2016-09-09T13:39:30.893

刚刚花了很多时间调试我自己的这个实例，我想我会加入第三种可能性。

`ActiveRecord`我已经正确完成了迁移，并通过在 rails 控制台中检查我的来验证它。我曾多次尝试从架构中重新创建数据库，并且多次尝试重新运行迁移，但均无济于事。

就我而言，问题是我在运行单元测试时看到了问题，而不是在运行时。问题是我的测试数据库在我的迁移/回滚测试中不同步。解决方案非常简单。我所要做的就是重置测试数据库：

```
rake db:test:prepare 
```

* * *

## 回答 #3

> 赞同：11
> 
> 时间：2014-12-15T23:45:56.103

我知道上面的答案被标记为正确并解决了 OP 的问题。但是这个错误还有另一个原因，在关于这个主题的许多 stackoverflow 帖子中都没有引起注意。当您忘记将 as: 选项用于 has_many 时，此错误可能发生在多态多态中。例如：

```
class AProfile < ActiveRecord::Base
  has_many :profile_students
  has_many :students, through: :profile_students
end

class BProfile < ActiveRecord::Base
  has_many :profile_students
  has_many :students, through: :profile_students
end

class ProfileStudent < ActiveRecord::Base
  belongs_to :profile, polymorphic: :true
  belongs_to :student
end

class Student < ActiveRecord::Base
  has_many :profile_students
  has_many :aprofiles, through: :profile_students
  has_many :bprofiles, through: :profile_students
end 
```

这会给你这个错误：

```
Getting “ActiveRecord::UnknownAttributeError: unknown attribute: profile_id 
```

当您尝试执行以下操作时：

```
a = AProfile.new
a.students << Student.new 
```

解决方案是将 :as 选项添加到 AProfile 和 BProfile：

```
class AProfile < ActiveRecord::Base
  has_many :profile_students, as: :profile
  has_many :students, through: :profile_students
end

class BProfile < ActiveRecord::Base
  has_many :profile_students, as: :profile
  has_many :students, through: :profile_students
end 
```

* * *

## 回答 #4

> 赞同：6
> 
> 时间：2018-04-16T15:59:29.097

我有同样的问题，这就像魔术一样。在要更新的每个模型的迁移语句末尾添加此行。重置有关列的所有缓存信息，这将导致它们在下一次请求时重新加载。

```
 <ModelName>.reset_column_information 
```

参考：[https ://apidock.com/rails/ActiveRecord/Base/reset_column_information/class](https://apidock.com/rails/ActiveRecord/Base/reset_column_information/class)

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2020-11-17T07:16:21.997

当表格没有列时，我多次遇到此错误，但这次我有奇怪的原因。出于某种原因，我的迁移很完美，但（奇怪的是）`schema.rb`没有更新，所以`rake db:migrate db:seed`没有创建专栏。我不知道为什么会这样。

TL;DR，如果您的迁移是最新的，请检查`schema.rb`并确保它也是

* * *

## 回答 #6

> 赞同：-1
> 
> 时间：2015-07-29T13:52:59.127

我有相同的消息错误，我修复了将参数排序为数据库中列定义的相同顺序：

> 控制器

```
def create
    worktime = Worktime.create(name: params[:name], workhours: params[:workhours], organization: @organization, workdays: params[:workdays])

    render json: worktime
end 
```

> 数据库

```
Table: worktimes
Columns:
id  int(11) AI PK
name    varchar(255)
workhours   text
organization_id int(11)
workdays    text 
```

# twitter-bootstrap - 无法弄清楚如何让 Bootstrap 下拉按钮与我的网站一起使用

> ID：16050696
> 
> 赞同：2
> 
> 时间：2013-04-17T02:59:47.887
> 
> 标签：twitter-bootstrap

www.wishywell.net

我阅读了 Bootstrap 指南，它应该像添加这些代码行一样简单，以便拥有一个带有下拉菜单的按钮

```
<li class="dropdown">
<a class="dropdown-toggle" data-toggle="dropdown" role="button" href="#">Features <b class="caret"></b></a>
    <ul class="dropdown-menu" role="menu">
        <li><a href="blog.html" tabindex="-1">Blog</a></li>
        <li><a href="single.html" tabindex="-1">Blog Single</a></li>
        <li><a href="dividers.html" tabindex="-1">Dividers</a></li>
    </ul></li> 
```

在顶部，出现了“功能”一词，但有下拉菜单，我的网站上是否有其他原因导致它失败？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-17T03:03:40.530

为了正确使用 Bootstrap 的 Javascript 组件，您需要将 bootstrap.js（或 bootstrap.min.js）文件作为资源包含在您网站的页面上。

您可以在 bootstrap 提供的 zipball 中找到这些文件：http: [//twitter.github.io/bootstrap/assets/bootstrap.zip](http://twitter.github.io/bootstrap/assets/bootstrap.zip)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-17T03:07:13.250

如上所述，您需要调用引导 javascript 组件。

您还需要更改[http://www.wishywell.net/js/backtotop.js](http://www.wishywell.net/js/backtotop.js)文件，如

```
$(document).ready(function(){

    application.init ();

(function () {
        a('<i id="back-to-top" class="icon-chevron-up"></i>').appendTo(a("body"));
        a(window).scroll(function () {
            if (a(this).scrollTop() != 0) {
                a("#back-to-top").fadeIn()
            } else {
                a("#back-to-top").fadeOut()
            }
        });
        a("#back-to-top").click(function () {
            a("body,html").animate({
                scrollTop: 0
            }, 600)
        })
    })();

}); 
```

并在调用 jquery 文件*后调用它*

```
 <!-- Start: Java Script -->
    <script src="http://ajax.googleapis.com/ajax/libs/jquery/1.8.3/jquery.min.js"></script>
 <script src="http://cdn.jsdelivr.net/flexslider/2.0/jquery.flexslider-min.js"></script> 
<script src="/js/backtotop.js"></script> 
```

# ios - iOS如何以最少的用户交互连接特定的WiFi SSID

> ID：16050697
> 
> 赞同：1
> 
> 时间：2013-04-17T02:59:48.250
> 
> 标签：ios, objective-c, networking, wifi, ssid

我必须将它们使用两个不同网络的 iphone 应用程序。更改每个应用程序的网络设置对用户不友好。我想做如下的事情，

当应用程序启动时，它会检查特定网络 (SSID) 的可用性并向用户弹出一条消息以允许连接。一旦用户单击“确定”，他们就会连接到该特定网络。

有人有类似的经历吗？如何使用 ObjectiveC 连接到给定的 SSID？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-06-06T07:58:41.977

我一直在阅读实现应用程序控制网络的解决方案，但如果不使用`Apple80211`私有 API，这似乎是不可能的。

我认为您能做的最好的事情就是使用[CaptiveNetwork](http://developer.apple.com/library/ios/#documentation/SystemConfiguration/Reference/CaptiveNetworkRef/Reference/reference.html)。

有了这个，你可以为你的设备注册一个 SSID 的列表，它会抑制 web 表。

从文档：

`By calling the CNSetSupportedSSIDs function, an application can register a list of wireless network SSIDs with Captive Network Support, thereby assuming responsibility for authenticating with those networks. Typically when a user joins a captive network, Captive Network Support provides a web sheet that allows the user to authenticate with the network. If an application has registered the SSID of the captive network, however, the web sheet is suppressed, and the user can complete authentication in the appropriate application.`

# c# - 动态导航到页面

> ID：16050699
> 
> 赞同：0
> 
> 时间：2013-04-17T03:00:04.020
> 
> 标签：c#, asp.net, dynamic, navigation, state

在我的第一个 ASP.NET 页面（主页）中，用户回答了许多问题，这些问题决定了他们在单击“下一步”时将转到哪个页面。

例如，如果下表来自用户输入：

```
PageID Parameter
1      16
2      1
3      20 
```

然后它告诉系统有 3 个页面可以导航到。

在主页上，当用户单击 Next 时，它会转到 PageID = 1 的页面（一个特定的 aspx 页面）并传递参数 16。

在该页面的末尾，单击 Next 按钮将用户带到 PageID = 2 传递参数 1 的页面，然后再次单击 Next 按钮，用户再次使用参数 20 转到 pageID = 3。

最后，在最后一页上单击下一步，它会导致最后一页。

我不确定如何设计/编码这种动态页面导航。

有任何想法吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-17T03:11:21.440

您可以通过继承`RouteBase`类来定义自定义路由。

一个例子 -

```
public class ParameterizedRoute : RouteBase
{
    const Dictionary<string,int> CustomParameters = new Dictionary<string,int> {{"1",16},{"2",1},{"3",20} };
    public override RouteData GetRouteData(HttpContextBase httpContext)
    {
        var routeData = new RouteData(this, new MvcRouteHandler());
        routeData.Values.Add("controller", "Datasheet");
        routeData.Values.Add("action", datasheetUrl.Action);
        var pageId = httpContext.Request.QueryString["PageId"].ToString();
        var param = CustomParameters[pageId];
        routeData.Values.Add("PageId", pageId);
        routeData.Values.Add("Parameter", param);
        return routeData;
    }
} 
```

在这里，我假设您`PageId`通过`QueryString`并用于`RouteData`传递值。

在你`global.asax.cs`的`Application_Start`中，你可以像这样添加它

```
RouteTable.Routes.Add("CustomRoutes", new ParameterizedRoute()); 
```

在`ParameterizedRoute`中，我使用了字典，您可以根据自己的情况添加任何其他来源。

# java - JAXB 中的 XML IDREF 返回错误的类？

> ID：16050709
> 
> 赞同：1
> 
> 时间：2013-04-17T03:01:12.270
> 
> 标签：java, xml, xsd, jaxb

我是 XSD 设计和 JAXB 的新手。我设法创建了我的 XSD，如下所示：

```
<xsd:element name="policy" >
<xsd:complexType>
    <xsd:sequence>
        <xsd:element name="actor-def" type="tns:actor-def"/>                        
        <xsd:element name="actor-system-def" type="tns:actor-system-def"/>           
        </xsd:sequence>
</xsd:complexType>
</xsd:element>

<xsd:complexType name="actor-def">
    <xsd:sequence>
        <xsd:element name="actor-system" type="tns:actor-system-type"/>
    </xsd:sequence>
    <xsd:attribute name="name" type="xsd:ID" use="required" />
</xsd:complexType>
<xsd:complexType name="actor-system-type">
    <xsd:attribute name="name" type="xsd:IDREF" use="required" />
</xsd:complexType>

<xsd:complexType name="actor-system-def">
    <xsd:attribute name="name" type="xsd:ID" use="required" />
    <xsd:attribute name="url" type="xsd:anyURI" use="required" />
</xsd:complexType> 
```

基本上，我有一个“policy”的根元素，它允许定义几个“actor-def”和“actor-system-def”。每个“actor-def”都属于一个使用 ID 和 IDREF 实现的“actor-system-def”。

为了使用 JAXB，我使用 Eclipse 的 JAXB Classes for Schema 创建工具自动创建了所有必需的类。它会根据 XSD 文件自动创建以下类：

策略.java

ActorDef.java

ActorSystemDef.java

ActorSystemType.java

除了 ActorDef.java 文件和其中使用 XSD 文件中的 IDREF 定义的 actorSystem 变量的类型之外，一切看起来都很好。基本上，ActorDef.java 文件具有以下内容：

```
@XmlElement(name = "actor-system", required = true)
protected ActorSystemType actorSystem;
public ActorSystemType getActorSystem() {
    return actorSystem;
} 
```

这样做的问题是，由于从 ActorDef.getActorSystem() 返回的类型是 ActorSystemType 类型，它是对错误对象的引用。我想要的是对相关 ActorSystemDef 的引用，以便我可以调用 getName() 方法来获取 ActorSystemDef 的名称（如下所示）

```
JAXBContext myJAXBContext = JAXBContext.newInstance("spec_jaxb");
Unmarshaller myUnmarshaller = myJAXBContext.createUnmarshaller();
Policy myPolicy = (Policy) myUnmarshaller.unmarshal(new  File("src/main/java/spec/private_policy.xml"));

List<ActorDef> actorList = myPolicy.getActorDef();
for (ActorDef actor : actorList) {
    System.out.println(actor.getActorSystem().getName());
} 
```

我能够通过手动修改由 JAXB 工具自动创建的类来使代码工作。我将 ActorDef.java 中的 actorSystem 变量的类型更改为 ActorSystemDef，如下所示：

```
protected ActorSystemDef actorSystem;
public ActorSystemDef getActorSystem() {
    return actorSystem;
} 
```

这解决了问题，代码工作正常，但我想了解如何更正我的 XSD 文件，以便 JAXB 类创建工具自动更正上述问题。我认为我在导致此问题的 XSD 定义中犯了一个错误。我经常修改我的 XSD 文件，不能每次都手动进行所有这些更改。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-17T04:03:24.443

我尝试了您的架构，并获得了`ActorDef`与您相同的课程：

```
@XmlElement(name = "actor-system", required = true)
protected ActorSystemType actorSystem;

public ActorSystemType getActorSystem() { return actorSystem; }
public void setActorSystem(ActorSystemType value) { this.actorSystem = value; } 
```

但是后来我删除了你架构的这一部分（因为你似乎没有使用它 - 为什么它在那里？）：

```
<xsd:complexType name="actor-system-type">
    <xsd:attribute name="name" type="xsd:IDREF" use="required" />
</xsd:complexType> 
```

然后将`actor-system`元素`type`从：

```
<xsd:element name="actor-system" type="tns:actor-system-type"/> 
```

至：

```
<xsd:element name="actor-system" type="tns:actor-system-def"/> 
```

因此，结束模式变为：

```
<xsd:element name="policy">
<xsd:complexType>
    <xsd:sequence>
        <xsd:element name="actor-def" type="tns:actor-def"/>
        <xsd:element name="actor-system-def" type="tns:actor-system-def"/>
    </xsd:sequence>
</xsd:complexType>
</xsd:element>

<xsd:complexType name="actor-def">
    <xsd:sequence>
        <xsd:element name="actor-system" type="tns:actor-system-def"/>
    </xsd:sequence>
    <xsd:attribute name="name" type="xsd:ID" use="required" />
</xsd:complexType>

<xsd:complexType name="actor-system-def">
    <xsd:attribute name="name" type="xsd:ID" use="required" />
    <xsd:attribute name="url" type="xsd:anyURI" use="required" />
</xsd:complexType> 
```

然后使用这个，我生成了类并得到了，对于`ActorDef`，这个：

```
@XmlElement(name = "actor-system", required = true)
protected ActorSystemDef actorSystem;

public ActorSystemDef getActorSystem() { return actorSystem; }
public void setActorSystem(ActorSystemDef value) { this.actorSystem = value; } 
```

在我看来，这就是你一开始所期待的，对吧？

此外，应该是，`ActorSystemType.java`不再生成。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-18T00:05:56.920

@acdcjunior：根据我的最后一条评论，您提供的解决方案将不允许这样的代码：

```
 <tns:actor-def>
    <tns:name>actor1</tns:name>
    <tns:description>actor 1 desc</tns:description>
    <tns:type>local</tns:type>
    <tns:actor-reference>www.actor.com</tns:actor-reference>
    <tns:actor-system>
      <tns:name>actor-system-1</tns:name>
    </tns:actor-system>
  </tns:actor-def>
  <tns:actor-system-def>
    <tns:name>actor-system-1</tns:name>
    <tns:description>actor-system-1 desc</tns:description>
    <tns:url>http://actorsystem1.org</tns:url>
    <tns:port>80</tns:port>
  </tns:actor-system-def> 
```

事实上，如果 actor-system-1 已经定义，它就不允许引用它。相反，您必须从 actor-def 中创建一个新的 actor-system。

我能够通过更改您的代码来解决问题，如下所示：

```
<xsd:element name="policy">
<xsd:complexType>
    <xsd:sequence>
        <xsd:element name="actor-def" type="tns:actor-def"/>
        <xsd:element name="actor-system-def" type="tns:actor-system-def"/>
    </xsd:sequence>
</xsd:complexType>
</xsd:element>

<xsd:complexType name="actor-def">
    <xsd:sequence>
        <xsd:element name="actor-system" type="xsd:IDREF"/>
    </xsd:sequence>
    <xsd:attribute name="name" type="xsd:ID" use="required" />
</xsd:complexType>

<xsd:complexType name="actor-system-def">
    <xsd:attribute name="name" type="xsd:ID" use="required" />
    <xsd:attribute name="url" type="xsd:anyURI" use="required" />
</xsd:complexType> 
```

现在创建 JAXB 类时，我只有 ActorDef.java 和 ActorSystemDef.java 并且 ActorDef.getActorSystem() 的代码如下所示：

```
@XmlElement(name = "actor-system", required = true)
@XmlIDREF
@XmlSchemaType(name = "IDREF")
protected Object actorSystem;    

public Object getActorSystem() {
        return actorSystem;
    } 
```

可以使用强制转换轻松地将其转换为 ActorSystemDef 对象：

```
system.out.println(   ((ActorSystemDef) actor.getActorSystem()).getName()  ); 
```

# python - 尽管调用 help(gridspec) 会显示 Gridspec 类，但“'module' 对象没有属性 'Gridspec'”

> ID：16050713
> 
> 赞同：0
> 
> 时间：2013-04-17T03:02:04.217
> 
> 标签：python, matplotlib

如果我运行 python 控制台并执行

```
import matplotlib
matplotlib.__version__
import matplotlib.gridspec as gs 
```

我看到 matplotlib 版本是 1.2.1。

如果我这样做，`help(gs)`我会看到 Gridspec 类。

但是下面的代码

```
import matplotlib
import matplotlib.gridspec as gs
g = gs.Gridspec(1,1) 
```

产生错误：

`AttributeError: 'module' object has no attribute 'Gridspec'`

为什么我不能创建一个新的 Gridspec 对象？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-17T03:06:23.993

你的意思是输入`g = gs.GridSpec(1,1)`. “Spec”中的“s”大写。

# wordpress - 像 google play 这样的 wordpress 滑块产品？

> ID：16050717
> 
> 赞同：1
> 
> 时间：2013-04-17T03:02:27.697
> 
> 标签：wordpress

我正在寻找 silder 产品插件或 wordpress 网站的代码。滑块看起来像[https://play.google.com/store](https://play.google.com/store)之一 请帮助我。太感谢了！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-18T07:08:27.383

我找到了一些可以帮助你的代码：http: [//oldmill1.github.io/posts/google-play-slider.html](http://oldmill1.github.io/posts/google-play-slider.html)

# haskell - 忽略 Control.Applicative 中的参数

> ID：16050719
> 
> 赞同：6
> 
> 时间：2013-04-17T03:02:44.993
> 
> 标签：haskell, applicative

我正在编写一个 xml-conduit 解析器，我更喜欢应用语法而不是 monadic。虽然有很多论据要结合，但我在应用中有些迷失了。我当前的问题是 8 个参数，我只想使用第 4 个和第 6 个来构造结果。

我可以使它工作的唯一方法是以下；不过，对于平面解决方案，应该有精美的星星排列：

```
import Control.Applicative

a1 :: Applicative Text
a2 :: Applicative Text
a3 :: Applicative Text
a4 :: Applicative Text
a5 :: Applicative Text
a6 :: Applicative Text
a7 :: Applicative Text
a8 :: Applicative Text

data Data = Data Text Text
f :: Text -> Text -> Data

parser :: Applicative Data
parser = a1 *> a2 *> a3 *> (f <$> a4 <* a5 <*> a6) <* a7 <* a8 
```

有什么方法可以在没有括号的表格中做同样的事情？

```
parser = f <$> a1 ?? a2 ?? a3 ?? a4 ?? a5 ?? a6 ?? a7 ?? a8 
```

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-04-17T03:11:15.637

啊哈，[带有两个参数的构造函数的建议链接 Applicative style parser 让](https://stackoverflow.com/questions/14067552/applicative-style-parser-for-constructor-with-two-arguments)我得到了答案：使用`(<$)`，不要使用`(*>)`。

```
parser = f <$ a1 <* a2 <* a3 <*> a4 <* a5 <*> a6 <* a7 <* a8 
```

# java - Java Applet 游戏 2D 窗口滚动

> ID：16050723
> 
> 赞同：2
> 
> 时间：2013-04-17T03:02:55.980
> 
> 标签：java, 2d

我正在尝试在 Java Applet 中开发 2D RPG 游戏。现在我有一个简单的椭圆形，玩家可以使用左、右、上和下移动，与小程序边界的碰撞会阻止它们。问题是，我想创建一个玩家可以移动的巨大世界（2000 像素 x 2000 倍）。但是，我希望他们一次只能看到 600 x 400 倍的屏幕。如果他们继续向右移动，我希望屏幕跟随他们，向上、向下和向左也是如此。谁能告诉我该怎么做？到目前为止，这是我的代码：

```
import java.awt.*;
import java.awt.event.KeyEvent;
import java.applet.Applet;
import java.awt.event.KeyListener;
import javax.swing.*;

public class Main extends Applet implements Runnable, KeyListener
{
    private Image dbImage;
    private Graphics dbg;
    Thread t1;
    int x = 0;
    int y = 0;
    int prevX = x;
    int prevY = y;
    int radius = 40;
    boolean keyReleased = false;

    public void init()
    {
        setSize(600, 400);

    }

    public void start()
    {

        addKeyListener(this);
        t1 = new Thread(this);
        t1.start();
    }

    public void destroy()
    {
    }

    public void stop()
    {
    }

    public void paint(Graphics g)
    {
        //player
        g.setColor(Color.RED);
        g.fillOval(x, y, radius, radius);
    }

    public void update(Graphics g)
    {

        dbImage = createImage (this.getSize().width, this.getSize().height);
        dbg = dbImage.getGraphics();
        // initialize buffer
        if (dbImage == null)
        {
        }

        // clear screen in background
        dbg.setColor(getBackground());
        dbg.fillRect(0, 0, this.getSize().width, this.getSize().height);

        // draw elements in background
        dbg.setColor(getForeground());
        paint(dbg);
        // draw image on the screen
        g.drawImage(dbImage, 0, 0, this);
    }

    @Override
    public void run()
    {
        while (true)
        {
            //x++;
            repaint();

            try
            {
                t1.sleep(17);
            }
            catch (Exception e)
            {
            }
        }
    }

    public boolean CheckCollision(String dir)
    {
        if (x <= 0 && dir.equals("L"))
        {
            x = prevX;
            return true;
        }
        else if (y <= 0 && dir.equals("U"))
        {
            y = prevY;
            return true;
        }
        else if (x >= (getWidth() - radius) && dir.equals("R"))
        {
            System.out.println(getWidth());
            x = prevX;
            return true;
        }
        else if (y >= (getHeight() - radius) && dir.equals("D"))
        {
            y = prevY;
            return true;
        }
        return false;
    }

    @Override
    public void keyPressed(KeyEvent e)
    {
        switch (e.getKeyCode())
        {
        case KeyEvent.VK_RIGHT:
            if (!CheckCollision("R"))
            {
            x += 4;
            prevX = x;
            }
            break;
        case KeyEvent.VK_LEFT:
            if (!CheckCollision("L"))
            {
            x -= 4;
            prevX = x;
            }
            break;
        case KeyEvent.VK_UP:
            if (!CheckCollision("U"))
            {
            y -= 4;
            prevY = y;
            }
            break;
        case KeyEvent.VK_DOWN:
            if (!CheckCollision("D"))
            {
            y += 4;
            prevY = y;
            }
            break;
        }

    }

    @Override
    public void keyReleased(KeyEvent arg0)
    {
        // TODO Auto-generated method stub

    }

    @Override
    public void keyTyped(KeyEvent arg0)
    {
        // TODO Auto-generated method stub

    }
} 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-04-17T05:15:31.477

这是滚动可视区域的基本示例，其中虚拟世界比可视区域大。

这基本上维护了一些参数。它保持了世界中视图顶部/左侧的位置以及玩家在世界中的位置。

这些值被转换回真实世界坐标（其中 0x0 是可视区域的左上角）。

这些示例还用于`BufferedImage#getSubImage`使其更易于呈现。您也可以计算地图到视图的偏移位置，但这归结为需要......

![在此处输入图像描述](https://i.stack.imgur.com/Tub52.png)

```
import java.awt.BorderLayout;
import java.awt.Dimension;
import java.awt.EventQueue;
import java.awt.Graphics;
import java.awt.Graphics2D;
import java.awt.Point;
import java.awt.event.ActionEvent;
import java.awt.event.KeyEvent;
import java.awt.image.BufferedImage;
import java.io.IOException;
import javax.imageio.ImageIO;
import javax.swing.AbstractAction;
import javax.swing.ActionMap;
import javax.swing.InputMap;
import javax.swing.JFrame;
import javax.swing.JPanel;
import javax.swing.KeyStroke;
import javax.swing.UIManager;
import javax.swing.UnsupportedLookAndFeelException;

public class MiddleEarth {

    public static void main(String[] args) {
        new MiddleEarth();
    }

    public MiddleEarth() {
        EventQueue.invokeLater(new Runnable() {
            @Override
            public void run() {
                try {
                    UIManager.setLookAndFeel(UIManager.getSystemLookAndFeelClassName());
                } catch (ClassNotFoundException | InstantiationException | IllegalAccessException | UnsupportedLookAndFeelException ex) {
                }

                JFrame frame = new JFrame("Testing");
                frame.setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);
                frame.setLayout(new BorderLayout());
                frame.add(new WorldPane());
                frame.pack();
                frame.setLocationRelativeTo(null);
                frame.setVisible(true);
            }
        });
    }

    public class WorldPane extends JPanel {

        private BufferedImage map;
        private BufferedImage party;
        private Point viewPort;
        private Point partyPoint;
        private BufferedImage view;

        public WorldPane() {
            try {
                map = ImageIO.read(getClass().getResource("/MiddleEarth.jpg"));
                party = ImageIO.read(getClass().getResource("/8BitFrodo.png"));

                viewPort = new Point(0, (map.getHeight() / 2) - 100);
                partyPoint = new Point(party.getWidth() / 2, (map.getHeight() / 2)); // Virtual Point...

            } catch (IOException exp) {
                exp.printStackTrace();
            }

            InputMap im = getInputMap(WHEN_IN_FOCUSED_WINDOW);
            ActionMap am = getActionMap();

            im.put(KeyStroke.getKeyStroke(KeyEvent.VK_RIGHT, 0), "goRight");
            im.put(KeyStroke.getKeyStroke(KeyEvent.VK_LEFT, 0), "goLeft");
            im.put(KeyStroke.getKeyStroke(KeyEvent.VK_UP, 0), "goUp");
            im.put(KeyStroke.getKeyStroke(KeyEvent.VK_DOWN, 0), "goDown");

            am.put("goRight", new AbstractAction() {
                @Override
                public void actionPerformed(ActionEvent e) {
                    moveParty(10, 0);
                }
            });
            am.put("goLeft", new AbstractAction() {
                @Override
                public void actionPerformed(ActionEvent e) {
                    moveParty(-10, 0);
                }
            });

            am.put("goUp", new AbstractAction() {
                @Override
                public void actionPerformed(ActionEvent e) {
                    moveParty(0, -10);
                }
            });
            am.put("goDown", new AbstractAction() {
                @Override
                public void actionPerformed(ActionEvent e) {
                    moveParty(0, 10);
                }
            });

        }

        protected void moveParty(int xDelta, int yDelta) {
            partyPoint.x += xDelta;
            partyPoint.y += yDelta;
            Point view = fromWorld(partyPoint);
            if (view.x > getWidth() - (party.getWidth() / 2)) {
                viewPort.x += xDelta;
                if (viewPort.x + getWidth() > map.getWidth()) {
                    viewPort.x = map.getWidth() - getWidth();
                    partyPoint.x = map.getWidth() - (party.getWidth() / 2) - 1;
                }
                invalidate();
            } else if (view.x < party.getWidth() / 2) {
                viewPort.x += xDelta;
                if (viewPort.x < 0) {
                    viewPort.x = 0;
                    partyPoint.x = (party.getWidth() / 2);
                }
                invalidate();
            }
            System.out.println(view + "; " + getHeight());
            if (view.y > getHeight() - (party.getHeight() / 2)) {
                viewPort.y += yDelta;
                if (viewPort.y + getHeight() > map.getHeight()) {
                    viewPort.y = map.getHeight() - getHeight();
                    partyPoint.y = map.getHeight() - (party.getHeight() / 2) - 1;
                }
                invalidate();
            } else if (view.y < party.getHeight() / 2) {
                viewPort.y += yDelta;
                if (viewPort.y < 0) {
                    viewPort.y = 0;
                    partyPoint.y = (party.getHeight() / 2);
                }
                invalidate();
            }
            repaint();
        }

        @Override
        public void invalidate() {
            view = null;
            super.invalidate();
        }

        public BufferedImage getView() {

            if (view == null && getWidth() > 0 && getHeight() > 0) {

                view = map.getSubimage(viewPort.x, viewPort.y, getWidth(), getHeight());

            }

            return view;

        }

        @Override
        public Dimension getPreferredSize() {
            return new Dimension(400, 400);
        }

        @Override
        protected void paintComponent(Graphics g) {
            super.paintComponent(g);
            Graphics2D g2d = (Graphics2D) g.create();
            if (map != null) {
                g2d.drawImage(getView(), 0, 0, this);

                Point real = fromWorld(partyPoint);

                int x = real.x - (party.getWidth() / 2);
                int y = real.y - (party.getHeight()/ 2);
                g2d.drawImage(party, x, y, this);
            }
            g2d.dispose();
        }

        protected Point fromWorld(Point wp) {

            Point p = new Point();

            p.x = wp.x - viewPort.x;
            p.y = wp.y - viewPort.y;

            return p;

        }
    }
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-17T03:16:37.703

这就是我在我的引擎中所做的。

我将保留两个变量`OffSetX`和`OffSetY`

并计算它们以使玩家像这样居中。

```
OffSetX = 0;
OffSetY = 0;
if (MAP_WIDTH > WINDOW_WIDTH) {
    OffSetX = Math.round(WINDOW_WIDTH / 2 - obj.getX() - TILE_SIZE);
    OffSetX = Math.min(OffSetX, 0);
    OffSetX = Math.max(OffSetX, WINDOW_WIDTH - MAP_WIDTH);
}
if (MAP_HEIGHT > WINDOW_HEIGHT) {
    OffSetY = Math.round(WINDOW_HEIGHT / 2 - obj.getY() - TILE_SIZE);
    OffSetY = Math.min(OffSetY, 0);
    OffSetY = Math.max(OffSetY, WINDOW_HEIGHT - MAP_HEIGHT);
} 
```

然后在该位置绘制地图`(OffSetX, OffSetY)`，只需将这些添加到要绘制的对象的原始位置即可。

您可能想要跳过不可见的渲染对象。

# javascript - Sencha Ext.define 使用与要求

> ID：16050728
> 
> 赞同：9
> 
> 时间：2013-04-17T03:03:48.450
> 
> 标签：javascript, extjs

```
Ext.define('...', { 
    uses: ['...'],
}); 
```

和

```
Ext.define('...', {
    requires: ['...'],
}); 
```

我有点困惑......他们有共同点吗？我们什么时候使用其中一个？

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2013-04-17T03:15:05.667

文档几乎涵盖了它：

> 使用是可选的类依赖项，由类使用，但不是必需的。这些可以异步加载，并且不必对要实例化的类可用。

例如，如果它是你的类在构造函数中实例化 Foo 的东西，那么它应该在`requires`.

如果它以某种可能被开发人员稍后调用的方法实例化 Foo，它可以进入`uses`.

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2013-11-15T02:17:13.890

创建类需要“requires”，创建该类的对象需要“uses”。

事件顺序为：

*   Ext.define 被称为
*   'requires' 和 'uses' 被排队异步加载
*   类是在加载所有“要求”时创建的
*   加载所有类的“requires”和“uses”时调用 Ext.onReady 侦听器

# tibco - tibco 主题订阅耗时过长

> ID：16050730
> 
> 赞同：0
> 
> 时间：2013-04-17T03:04:25.703
> 
> 标签：tibco

我遇到了一个问题，即订阅 TIBCO 上的特定主题需要很长时间才能获得更新。发布到同一缓存的其他主题的消息工作正常。任何想法为什么会这样，我能做些什么来调试它？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-17T09:13:26.207

我的猜测是您使用 TIBCO EMS（还有另一种产品称为 TIBCO Rendezvous）。

可以使用名为 TIBCO Gems 的工具。它允许您监控主题和队列。这意味着您应该能够看到您的订阅者何时接受该主题的某些内容（也是确认操作）。

希望有帮助

干杯塞巴斯蒂安

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-27T05:08:31.547

检查您的主题是同步的还是异步的。同步主题需要时间。我希望你明白同步是什么意思 别的问我

# python - 使用 json.dumps/loads 进行序列化/反序列化给出 AttributeError: 'unicode' object has no attribute 'read'

> ID：16050738
> 
> 赞同：1
> 
> 时间：2013-04-17T03:05:24.873
> 
> 标签：python, django

我正在尝试从 Amazon FPS 获取付款结果信息，该信息有两种形式：

*   用户使用 GET 和查询字符串参数重定向到原始服务器
*   亚马逊将 POST 发送到具有匹配参数的原始服务器

我不能保证哪个请求会首先到达服务器，所以我通过序列化`request.GET`或`request.POST`使用将第一个请求存储在数据库中`json.dumps`，然后尝试稍后加载它`json.loads`以与另一个请求进行比较：

初始请求：

```
type = request.META['REQUEST_METHOD']
sub_req = SubscriptionRequest()
params = getattr(request, type)
serialized_params = json.dumps(params)
if type == 'GET': sub_req.client_params = serialized_params
if type == 'POST': sub_req.server_params = serialized_params
sub_req.save() 
```

跟进请求：

```
stored_params = json.load(sub_req.server_params if type == "GET" else sub_req.client_params) 
```

错误：

```
 File "/var/www/test.com/htdocs/apps/subscription/services.py", line 147, in subscription_request_check_or_store
    stored_params = json.load(sub_req.server_params if type == "GET" else sub_req.client_params)
  File "/usr/lib/python2.7/json/__init__.py", line 274, in load
    return loads(fp.read(),
AttributeError: 'unicode' object has no attribute 'read' 
```

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2013-04-17T03:14:08.383

Json.load() 从文件中读取。使用 json.loads() 解析字符串。

# jquery - Bootstrap 下拉菜单在输入选择时消失

> ID：16050743
> 
> 赞同：9
> 
> 时间：2013-04-17T03:06:10.743
> 
> 标签：jquery, html, css, twitter-bootstrap

我有一个打算用来登录的 Bootstrap 下拉菜单。它看起来很好，但是当我选择用户名 nput 时它消失了，因为焦点已经转到输入。我将如何着手添加对输入的支持，或者是否有可行的方法？

我目前的代码是：

```
 <li id="fat-menu" class="dropdown">
         <a href="#" id="drop3" role="button" class="dropdown-toggle" data-toggle="dropdown" data-target="#">Login <b class="caret"></b></a>
         <ul class="dropdown-menu" role="menu" aria-labelledby="drop3">
            <li role="presentation"><input name="username" type="text" placeholder="Username" /></li>
            <li role="presentation"><input name="password" type="password" placeholder="Password" /></li>
            <li role="presentation" class="divider"></li>
            <li role="presentation"><a role="menuitem" tabindex="-1" href="#">Login</a></li>
          </ul>
     </li> 
```

我对 jsfiddle 的尝试。我根本无法让下拉菜单工作：http: [//jsfiddle.net/KF8dv/](http://jsfiddle.net/KF8dv/)

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2013-04-17T03:15:42.497

请看这个：- [http://jsfiddle.net/b8769/](http://jsfiddle.net/b8769/)

单击输入文本框时，您需要防止下拉事件。您可以使用 javascript 来实现这一点。[停止传播](http://api.jquery.com/event.stopPropagation/)

```
$('.dropdown-menu input').click(function(e) {
        e.stopPropagation(); //This will prevent the event from bubbling up and close the dropdown when you type/click on text boxes.
    }); 
```

# google-maps - Google Map V2 GIcon.shadow 图像显示在本地开发服务器中，但不是来自测试服务器

> ID：16050744
> 
> 赞同：0
> 
> 时间：2013-04-17T03:06:15.713
> 
> 标签：google-maps, google-maps-api-2

我有自定义标记图标 (gif/png) 显示在 Google Map V2 上。我正在使用 GICON 和 shadow 属性来设置图像路径。标记图标在开发系统中按预期显示。但是在我将系统部署到服务器（Windows server 2008 r2，IIS 7.5）后，某些PC（不是全部）中没有显示图标。对于某些用户，图标正在显示，但对于某些用户，它不显示。我非常感谢您在这方面的所有帮助。

使用的代码如下：

```
var cm_baseIcon = new GIcon();

if (Records[i].Act == '1')  

   cm_baseIcon.shadow = "images/img/Markers/green.gif";

else

cm_baseIcon.shadow = "images/img/Markers/red.gif";

cm_baseIcon.iconSize = new GSize(27, 27);

cm_baseIcon.iconAnchor = new GPoint(9, 34);

cm_baseIcon.infoWindowAnchor = new GPoint(0, 0);

cm_baseIcon.infoShadowAnchor = new GPoint(13, 27);

var markerOpts = {};

var icon = new GIcon(cm_baseIcon);

markerOpts.icon = icon; 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-18T17:40:49.053

当我加载您的测试页面时，我没有看到任何标记。页面应该在第一次像这样加载时创建一些标记，还是我需要以某种方式与页面交互以使其显示任何标记？

`initialize()`我在函数内部设置了一个断点。您的`Records`变量是一个空数组，即`[]`. 所以`for`这个函数中创建标记的循环永远不会执行。

你知道如何在浏览器中使用 JavaScript 调试器吗？它可以让您找出问题所在，而无需询问任何人。当然，我和这里的其他人很乐意提供帮助，但如果你能自己调试，你会取得更快的进步*。*

我推荐 Chrome 浏览器中的开发者工具。这是[对 Chrome DevTools 的一个很好的介绍](https://developers.google.com/chrome-developer-tools/)。通读并特别尝试 JavaScript 调试器。您可以停止代码并查看变量、更改值、单步执行代码以查看每一行的作用等。这至少会使您在 JavaScript 中的工作效率翻倍，甚至可能更多。

# asp.net-mvc-4 - 带有 JavaScript 变量的 ASP.NET MVC 4 Html.Action

> ID：16050748
> 
> 赞同：1
> 
> 时间：2013-04-17T03:06:35.930
> 
> 标签：asp.net-mvc-4, knockout.js

我想在 MVC Action 路由值中使用 javascript 变量。我提到了这个[Stackoverflow 帖子](https://stackoverflow.com/questions/5067813/asp-net-mvc-2-html-actionlink-with-javascript-variable)，那里给出的答案工作正常。

但我不想编写额外的 javascript 函数来实现这一点。不用写额外的函数，有没有其他方法可以做到。我的意思是，MVC4 中有没有为此添加的新功能？由于该链接中的示例适用于 MVC 2。

```
self.EditUrl = ko.computed(function () {
            return "@Url.Action(Actions.User_Update, Controllers.User, new { Id = self.Id() } )";
        }); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-17T03:15:49.140

MVC 4 的情况仍然相同。您不能混合客户端代码和服务器代码。我不认为这在未来是可能的。话虽如此，你想做的事情是可以实现的。您始终可以在隐藏字段中写入 url：

```
<input type="hidden" id="userUpdateUrl" value="@Url.Action("User_Update","User")"/> 
```

然后在您的客户端绑定上使用它：

```
self.EditUrl = ko.computed(function () {
    return $("#userUpdateUrl").val() + "?" + self.Id();
}); 
```

# c# - 如何将 C# 中的文本框限制为仅接收数字和（点“。”或逗号“，”），在“。”之后 或 "," 只允许 2 个数字字符

> ID：16050749
> 
> 赞同：2
> 
> 时间：2013-04-17T03:06:48.227
> 
> 标签：c#, numbers, comma, restrict

我正在尝试开发一个代码来限制使用 C# 的 TextBox 只允许输入数字+逗号（“，”）或点（“。”）+点或逗号后仅 2 个数字所以这种方式可以查看可以输入的可能数字：

```
3213,04 = OK
3211,664 = Not
32.31 = OK
32.3214 = Not
334,,00 = Not
3247,.00 = Not
214.,00 = Not
32.. = Not
8465,0 = Ok
654.0 = Ok 
```

明白我的目标了吗？我开发了下面的代码

```
private void txtValormetrocubico_KeyPress(object sender, KeyPressEventArgs e)
{
    if (txtValormetrocubico.TextLength >= 0 && (e.KeyChar == (char)Keys.OemPeriod || e.KeyChar == (char)Keys.Oemcomma))
    {
        //tests 
    }
    else
    {
        if (!char.IsControl(e.KeyChar)
            && !char.IsDigit(e.KeyChar)
            && e.KeyChar != '.' && e.KeyChar != ',')
        {
            e.Handled = true;
        }
        // only allow one decimal point
        if (e.KeyChar == '.' && (sender as TextBox).Text.IndexOf('.') > -1)
        {
            e.Handled = true;
        }

        if (e.KeyChar == ','  && (sender as TextBox).Text.IndexOf(',') > -1)
        {
            e.Handled = true;
        }
    }
} 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-04-17T07:04:08.163

试试这个代码！我希望这有帮助。如果我能进一步帮助您，请告诉我。

这是我写的辅助功能

```
private bool alreadyExist(string _text , ref char KeyChar)
        {
            if (_text.IndexOf('.')>-1)
            {
                KeyChar = '.';
                return true;
            }
            if (_text.IndexOf(',') > -1)
            {
                KeyChar = ',';
                return true;
            }
            return false;
        } 
```

这是您的按键事件处理程序

```
 private void txtValormetrocubico_KeyPress(object sender, KeyPressEventArgs e)
        {
            if (!char.IsControl(e.KeyChar)
                    && !char.IsDigit(e.KeyChar)
                    && e.KeyChar != '.' && e.KeyChar != ',')
            {
                e.Handled = true;
            }

            //check if '.' , ',' pressed
            char sepratorChar='s';
            if (e.KeyChar == '.' || e.KeyChar == ',')
            {
                // check if it's in the beginning of text not accept
                if (txtValormetrocubico.Text.Length == 0) e.Handled = true;
                // check if it's in the beginning of text not accept
                if (txtValormetrocubico.SelectionStart== 0 ) e.Handled = true;
                // check if there is already exist a '.' , ','
                if (alreadyExist(txtValormetrocubico.Text , ref sepratorChar)) e.Handled = true;
                //check if '.' or ',' is in middle of a number and after it is not a number greater than 99
                if (txtValormetrocubico.SelectionStart != txtValormetrocubico.Text.Length && e.Handled ==false)
                {
                    // '.' or ',' is in the middle
                    string AfterDotString = txtValormetrocubico.Text.Substring(txtValormetrocubico.SelectionStart);

                    if (AfterDotString.Length> 2)
                    {
                        e.Handled = true;
                    }
                }
            }
            //check if a number pressed

            if (Char.IsDigit(e.KeyChar))
            {
                //check if a coma or dot exist
                if (alreadyExist(txtValormetrocubico.Text ,ref sepratorChar))
                {
                    int sepratorPosition = txtValormetrocubico.Text.IndexOf(sepratorChar);
                    string afterSepratorString = txtValormetrocubico.Text.Substring(sepratorPosition + 1 );
                    if (txtValormetrocubico.SelectionStart > sepratorPosition && afterSepratorString.Length >1)
                    {
                        e.Handled = true;
                    }

                }
            }

        } 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-04-17T03:13:18.050

我认为你需要像 Masked Textbox control 这样的东西，你有一些参考资料

[http://msdn.microsoft.com/en-us/library/kkx4h3az.aspx](http://msdn.microsoft.com/en-us/library/kkx4h3az.aspx) [http://www.c-sharpcorner.com/uploadfile/mahesh/maskedtextbox-in-C-Sharp/](http://www.c-sharpcorner.com/uploadfile/mahesh/maskedtextbox-in-C-Sharp/)

做你想做的另一种方法是使用正则表达式

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-04-18T03:55:27.333

好吧，您可以创建一个通用函数并在`keypress`此代码是通用实例的情况下调用它。

`validate_textBox`是一个通用函数

```
private void validate_textBox(TextBox _text, KeyPressEventArgs e)
        {
            if (!char.IsControl(e.KeyChar)
                    && !char.IsDigit(e.KeyChar)
                    && e.KeyChar != '.' && e.KeyChar != ',')
            {
                e.Handled = true;
            }
            if (!char.IsControl(e.KeyChar)
        && !char.IsDigit(e.KeyChar)
        && e.KeyChar != '.' && e.KeyChar != ',')
            {
                e.Handled = true;
            }

            //check if '.' , ',' pressed
            char sepratorChar = 's';
            if (e.KeyChar == '.' || e.KeyChar == ',')
            {
                // check if it's in the beginning of text not accept
                if (_text.Text.Length == 0) e.Handled = true;
                // check if it's in the beginning of text not accept
                if (_text.SelectionStart == 0) e.Handled = true;
                // check if there is already exist a '.' , ','
                if (alreadyExist(_text.Text, ref sepratorChar)) e.Handled = true;
                //check if '.' or ',' is in middle of a number and after it is not a number greater than 99
                if (_text.SelectionStart != _text.Text.Length && e.Handled == false)
                {
                    // '.' or ',' is in the middle
                    string AfterDotString = _text.Text.Substring(_text.SelectionStart);

                    if (AfterDotString.Length > 2)
                    {
                        e.Handled = true;
                    }
                }
            }
            //check if a number pressed

            if (Char.IsDigit(e.KeyChar))
            {
                //check if a coma or dot exist
                if (alreadyExist(_text.Text, ref sepratorChar))
                {
                    int sepratorPosition = _text.Text.IndexOf(sepratorChar);
                    string afterSepratorString = _text.Text.Substring(sepratorPosition + 1);
                    if (_text.SelectionStart > sepratorPosition && afterSepratorString.Length > 1)
                    {
                        e.Handled = true;
                    }

                }
            }
        } 
```

然后，您可以为表单中的每个文本框调用类似此代码的函数

```
 private void txtValormetrocubico_KeyPress(object sender, KeyPressEventArgs e)
        {
            validate_textBox(sender as TextBox, e);
        }
        private void textBox1_KeyPress(object sender, KeyPressEventArgs e)
        {
            validate_textBox(sender as TextBox, e);
        } 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2021-07-19T21:03:03.197

我不知道谁在 2021 年寻找这个，但这是一种覆盖 ontextchange 事件的解决方案！干杯

```
 protected override void OnTextChanged(EventArgs e)
    {

        base.OnTextChanged(e);
        String text = "";

        Char[] chars = this.Text.ToString().ToCharArray();

        int total_dots = 0;
        int dot_pos = 0;

        int char_pos = 0;

        foreach (Char c in chars )
        {
            char_pos++;

            if (Char.IsDigit(c))
            {

                if(dot_pos > 0) { //dot already exists

                    if (char_pos <= dot_pos + 2)  //only accept two numbers after dot (3.99)
                    {
                        text += c.ToString();
                    }

                }
                else
                {
                    text += c.ToString();
                }

            }

            if(c == '.' || c == ',')
            {
                total_dots++;

                if (char_pos > 1 && total_dots <=1)   //only accept one dot and if the dot is not in first position
                {
                    text += c.ToString();
                    dot_pos = char_pos;
                }
            }

        }

        this.Text = text;
        this.SelectionStart = this.Text.Length;

    } 
```

# wordpress - 在 WP 电子商务中按类别和子类别显示产品组

> ID：16050750
> 
> 赞同：1
> 
> 时间：2013-04-17T03:06:50.927
> 
> 标签：wordpress, product

我在使用这个演示文稿时遇到问题，我正在使用 WP E-Commerce（版本 3.8.9.5）。例如，我想要显示的产品页面是这样的：

类别
  1 子类别1
    产品1 产品   2产品     3     子类别2     产品1 产品2 产品     3类别2   子类别1产品1 产品2 产品     3     子 类别2 产品1     产品   2     产品     3     提前
    致谢 。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-21T14:32:49.453

在 WP e-Commerce 的产品列表页面顶部显示子类别是一件看似完全常识的事情，但 WP e-Commerce 显然没有真正的解决方案。我最终在主题的 WP 电子商务模板文件的顶部创建了一个例程来完成此操作。

要获取产品分配到的类别：

```
$categories = wp_get_object_terms ($post->ID, 'wpsc_product_category'); 
```

查看这篇文章->[这里](http://wordpress.org/support/topic/plugin-wp-e-commerce-how-can-i-display-the-categories-a-product-is-in)

或

更复杂的文章->[这里](http://www.craniumstorm.com/wp-e-commerce-sub-category-display/)

# contenteditable - 当内容为空时，插入符号在 contenteditable 中消失

> ID：16050753
> 
> 赞同：4
> 
> 时间：2013-04-17T03:06:58.840
> 
> 标签：contenteditable, caret, focusin

当 div[contenteditable] 为空时（如 $(this).html("")) 然后插入符号消失了。

> 是虫子吗？我还找到了其他一些解决方案。使用 setTimeout 函数。但这对我来说不是完美的解决方案。当我使用许多 contenteditables 部门时，使用 Tab 键移动焦点。那么该解决方案无法正常工作。
> 
> > 当我在 Ubuntu 12.04 上测试时，
> > 
> > > 在 Firefox 20.0 点击事件中：插入符号消失，
> > > 
> > > 在 Chrome 25.0 Focusin 事件中：插入符号消失了。

```
$(function() {
  $("#alpha").on("click", function(e) {
    console.log("click");
    $(this).children().html("");
  });
  $("#beta").on("focusin", function(e) {  
    console.log("focusin");
    $(this).html("");
  });     
}); 
```

你可以测试一下[我的小提琴](http://jsfiddle.net/ratsbomb/4yZ8K/) 点击黄色区域，或者其他区域。

# usb - 无法打开服务 xx，当我将 wdf 驱动程序安装到 win7 x64 时

> ID：16050754
> 
> 赞同：1
> 
> 时间：2013-04-17T03:06:59.057
> 
> 标签：usb, driver, wdk, inf, kmdf

我认为我的 inf 文件有问题。但我的驱动程序和 inf 在 windows xp 和 win7 x86 中工作正常。

我也搜索了这个问题，看到有人说服务的名字不一样。但在我的inf中，它是一样的：`ECTEKCANcard`

我的问题是（我从 windbg 得到这些）：

```
==================

WdfCoInstaller: [04/17/2013 10:37.55.323] DIF_INSTALLDEVICE: Pre-Processing

WdfCoInstaller: [04/17/2013 10:37.55.385] ReadComponents:  WdfSection for Driver Service ECTEKCANcard using KMDF lib version Major 0x1, minor 0x9 

WdfCoInstaller: [04/17/2013 10:37.55.432] DIF_INSTALLDEVICE: Post-Processing

WdfCoInstaller: [04/17/2013 10:37.55.479] BootApplication: could not open service ECTEKCANcard, error error(1060)  The specified service does not exist as an
installed service.

WdfCoInstaller: [04/17/2013 10:37.55.510] BootApplication: GetStartType error error(87) The parameter is incorrect.

 Driver Service name ECTEKCANcard

======================= 
```

我的 inf 文件：

```
[Version]

Signature="$WINDOWS NT$"

Class=USB   

ClassGuid={36FC9E60-C465-11CF-8056-444553540000}

provider=%PHILIPS%

DriverVer=02/01/2013,1.0.0000.0000

[ControlFlags]

ExcludeFromSelect = *

[SourceDisksNames]

1=%Disk_Description%,,,

[SourceDisksFiles.x86]

CANcard.sys = 1,,

WdfCoInstaller01009.dll=1,,

[SourceDisksFiles.amd64]

CANcard.sys = 1,,

WdfCoInstaller01009.dll=1,,

[DestinationDirs]

DefaultDestDir = 12

CoInstaller.Files = 11

[CANcard.Files]

CANcard.sys

[CoInstaller.Files]

WdfCoInstaller01009.dll

[Manufacturer]

%MfgName%=ECTEKCANcard, NTX86, NtAMD64

[ECTEKCANcard]

%USB\VID_0471&PID_1200.DeviceDesc%=ECTEKCANcard.Dev, USB\VID_0471&PID_1200

[ECTEKCANcard.NTx86]

%USB\VID_0471&PID_1200.DeviceDesc%=ECTEKCANcard.Dev, USB\VID_0471&PID_1200

[ECTEKCANcard.NTAMD64]

%USB\VID_0471&PID_1200.DeviceDesc%=ECTEKCANcard.Dev, USB\VID_0471&PID_1200

[ECTEKCANcard.Dev.NTx86]

CopyFiles=CANcard.Files

[ECTEKCANcard.Dev.NTx86.Services]

Addservice = ECTEKCANcard, 0x00000002, CANcard.AddService

[ECTEKCANcard.Dev.NTx86.HW]

AddReg = ECTEKCANcard.Security

[ECTEKCANcard.Dev.NTAMD64]

CopyFiles=CANcard.Files

[ECTEKCANcard.Dev.NTAMD64.Services]

Addservice = ECTEKCANcard, 0x00000002, CANcard.AddService

[ECTEKCANcard.Dev.NTAMD64.HW]

AddReg = ECTEKCANcard.Security

[CANcard.AddService]

DisplayName    = %CANcard.SvcDesc%

ServiceType    = 1                  ; SERVICE_KERNEL_DRIVER

StartType      = 3                  ; SERVICE_DEMAND_START

ErrorControl   = 1                  ; SERVICE_ERROR_NORMAL

ServiceBinary  = %10%\System32\Drivers\CANcard.sys

LoadOrderGroup = Base

[ECTEKCANcard.Security]

HKR,,DeviceCharacteristics,0x10001,0x100

HKR,,Security,,"D:P(A;;GA;;;SY)(A;;GRGWGX;;;BA)(A;;GRGW;;;WD)(A;;GRGW;;;RC)"

[ECTEKCANcard.Dev.NTAMD64.CoInstallers]

AddReg=CoInstaller_AddReg

CopyFiles=CoInstaller.Files

[ECTEKCANcard.Dev.NTx86.CoInstallers]

AddReg=CoInstaller_AddReg

CopyFiles=CoInstaller.Files

[CoInstaller_AddReg]

HKR,,CoInstallers32,0x00010000, "WdfCoInstaller01009.dll,WdfCoInstaller"

[ECTEKCANcard.Dev.NTAMD64.Wdf]

KmdfService = ECTEKCANcard, CANcard_wdfsect

[ECTEKCANcard.Dev.NTx86.Wdf]

KmdfService = ECTEKCANcard, CANcard_wdfsect

[CANcard_wdfsect]

KmdfLibraryVersion = 1.9

[Strings]

MfgName="ECTEK"

Disk_Description = "CANcard Installation Disk"

CANcard.SvcDesc = "CanCard.sys ectek"

USB\VID_0471&PID_1200.DeviceDesc="ECTEK USBCAN"

PHILIPS="ECTEK Automotive Electronics Co,LTD" 
```

有人知道吗？

# python - Python：根据第一列和第二列将列添加到csv文件

> ID：16050755
> 
> 赞同：2
> 
> 时间：2013-04-17T03:07:03.077
> 
> 标签：python, csv

我有一个 csv 文件，其第一列中有重复值，例如：

```
mg,known,127
mg,unknown,142
pnt,known,37
pnt,unknown,0
lmo,known,75
lmo,unknown,3
sl,known,197
sl,unknown,21
oc,unknown,32
oc,known,163
sv,known,368
sv,unknown,308
az,unknown,6
az,known,241
bug,unknown,1
bug,known,167
li,unknown,15
li,known,174
lg,known,3 
```

我想要做的是构建一个新的 csv 文件，例如：

```
header1, known, unknown
mg, 127, 142
pnt, 37, 0 
```

我试图弄清楚我如何才能真正构建行：

```
def read_stats(path):
    has_seen = set()
    with open(writepath, 'wb') as write_csv:
        with open(path, 'r') as csv_file:
            data_reader = csv.reader(csv_file, delimiter=',')
            for line in data_reader:
                if line[0] in has_seen: 
```

这是我目前感到震惊的地方，我是否必须保留指向下一行的指针？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-17T03:21:25.103

[*这是在OrderedDict*](http://docs.python.org/2.7/library/collections.html#collections.OrderedDict)中累积结果的一种方法：

```
>>> import csv
>>> import collections

>>> d = collections.OrderedDict()
>>> for header1, category, value in csv.reader(datafile):
        d.setdefault(header1, {})[category] = value

>>> for header1, m in d.items():
        print ', '.join([header1, m['known'], m['unknown']])

mg, 127, 142
pnt, 37, 0
lmo, 75, 3
sl, 197, 21
oc, 163, 32
sv, 368, 308
az, 241, 6
bug, 167, 1
li, 174, 15 
```

如果您可以假设这些行总是首先与已知组连续成对出现，您可以为 knowns 创建一个中间结果并为 unkwowns 发出一个完整的行：

```
>>> for header1, category, value in csv.reader(data):
        if category == 'known':
            result = [header1, value]
        else:
            result += [value]
            print ', '.join(result)

mg, 127, 142
pnt, 37, 0
lmo, 75, 3
sl, 197, 21
oc, 163, 32
sv, 368, 308
az, 241, 6
bug, 167, 1
li, 174, 15 
```

# javascript - 如何使用正则表达式在 javascript 中链接 unicode 数字

> ID：16050756
> 
> 赞同：3
> 
> 时间：2013-04-17T03:07:03.667
> 
> 标签：javascript, regex, unicode

如何更改下面的正则表达式以同时选择 unicode 数字？目前只选择 ASCII 数字。

```
function numberfy(text) {
    var urlRegex = /[+0-9]+(?:\.[0-9]*)?[0-9]{5,}/g;

    return text.replace(urlRegex, function(url) {
        return '<font color="blue"><u><a href="tel:' + url + '">' + url + '</a></u></font>';
    });
} 
```

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-17T03:34:09.710

In `Javascript` you would have to include unicode number range for every culture.

You can specify the range using `\uxxxx` where x is hexadecimal..

So you can match digits of specific cultures like

```
[\u0966-\u096F]+//matches `Devangiri` digits
[\u0E50-\u0E59]+//matches `Thai` digits

[\d\u0966-\u096F\u0E50-\u0E59]+//matches `Thai`,`Devangiri`,`ascii` digits 
```

You can find unicode number range for all cultures [here](http://www.fileformat.info/info/unicode/category/Nd/list.htm)

* * *

Instead you can use [xregexp](http://xregexp.com/plugins/#unicode) library in which you can use

`\p{N}` to match any Unicode number

* * *

If you are interested in complete range that covers all cultures.

> 0030-003900B200B300B900BC-00BE0660-066906F0-06F907C0-07C90966-096F09E6-09EF09F4-09F90A66-0A6F0AE6-0AEF0B66-0B6F0B72-0B770BE6-0BF20C66-0C6F0C78-0C7E0CE6-0CEF0D66-0D750E50-0E590ED0-0ED90F20-0F331040-10491090-10991369-137C16EE-16F017E0-17E917F0-17F91810-18191946-194F19D0-19DA1A80-1A891A90-1A991B50-1B591BB0-1BB91C40-1C491C50-1C5920702074-20792080-20892150-21822185-21892460-249B24EA-24FF2776-27932CFD30073021-30293038-303A3192-31953220-32293248-324F3251-325F3280-328932B1-32BFA620-A629A6E6-A6EFA830-A835A8D0-A8D9A900-A909A9D0-A9D9AA50-AA59ABF0-ABF9FF10-FF19

Refer [here](http://xregexp.com/addons/unicode/unicode-categories.js)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-17T03:40:31.433

您的问题尚不清楚，但如果您希望包含替代的 Unicode 数字形式，例如 Unicode 全角字符，您可以像这样添加明确的 Unicode 范围：

```
// Adds the full-width unicode range FF10-FF19 (    ０-９)
var urlRegex = /[+0-9\uFF10-\uFF19]+(?:\.[0-9\uFF10-\uFF19]*)?[0-9\uFF10-\uFF19]{5,}/g; 
```

[一个工作示例。](http://jsfiddle.net/YmanU/) 您只需添加附加范围即可。我很想修改你的代码，这样如果你有多个范围，你可以减少重复：

```
var digit = "0-9\uFF10-\uFF19";
var urlRegex = new RegExp("[+"+digit+"]+(?:\\.["+digit+"]*)?["+digit+"]{5,}", "g"); 
```

[可在此处找到替代 Unicode 数字形式](http://www.fileformat.info/info/unicode/category/Nd/list.htm)的列表。这包括其他语言的其他形式。

请注意，只有 2 字节的 Unicode 值有效（最多`\uFFFF`）。在该页面上，它们包含一些超出 JavaScript 支持的 2 字节 Unicode 范围的扩展形式（例如，数学粗体）。

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2013-04-17T03:29:48.257

From Comment @Alexey i updated my answer:

in you comment "123٧٨٩" thease are arabic digits

```
 ARABIC-INDIC DIGIT---> \u0660-\u0669
 EXTENDED ARABIC-INDIC DIGIT---> \u06F0-\u06F9 
```

try this pattren

```
[+0-9\u0660-\u0669\u06F0-\u06F9]+(?:\.[0-9\u0660-\u0669\u06F0-\u06F9]*)?[0-9\u0660-\u0669\u06F0-\u06F9]{5,} 
```

if you want any unicode symbol then you can search that symbol here [http://www.ltg.ed.ac.uk/~richard/unicode-sample-3-2.html](http://www.ltg.ed.ac.uk/~richard/unicode-sample-3-2.html)

# javascript - jQuery / Contenteditable - keypress 上的新段落适用于原始但未生成的内容

> ID：16050762
> 
> 赞同：3
> 
> 时间：2013-04-17T03:07:34.247
> 
> 标签：javascript, jquery, keypress, contenteditable

我有一些内容可编辑的段落，并编写了一些 jquery 以在按下回车键时生成一个新段落。

```
$('p[contenteditable="true"]').keypress(function(e) {
    if(e.which == 13) {
        e.preventDefault();
        $(this).after('<p contenteditable = "true">New Paragraph</p>');
        $(this).next('p').focus();
    }
}); 
```

这对于页面加载时存在的所有段落都非常有效。然而，它对新生成的段落根本不起作用。如何在生成的段落和原始段落上进行此操作？

[http://jsfiddle.net/UU4Cg/1/](http://jsfiddle.net/UU4Cg/1/)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-17T03:09:58.317

用于动态内容`.on`

```
$(document).on('keypress', 'p[contenteditable="true"]', function(e) {
    //code here
}); 
```

# python - 敌人的健康

> ID：16050764
> 
> 赞同：4
> 
> 时间：2013-04-17T03:07:41.777
> 
> 标签：python

我正在用 python 编写文本冒险，我很新，但我知道我的方式。我遇到的问题是我的敌人（enemy1）没有失去健康。这是可以帮助您理解的代码。

```
hp=100
punch=10
kick=20
kill=99999999
burger=10
soup=10
glass=999999999
nothing=100
enemy1=100

from time import sleep

print("What's Your name?")
usr=raw_input("> ")
print("Your starting health is 100"), usr
sleep(1)
print("You awake in your prison cell. You can go to the gym or outside.")
sleep(.5)
print("type gym or outside to go there")
cell=raw_input("> ")
if cell=="gym":
    print("You go to the gym. There are 2 guards here and 5 prisoners. You can lift weights, go outside, go to the cells or fight a prisoner")
    sleep(1)
    print("Type fight, weights, outside or cells")
    gym=raw_input("> ")
    if gym=="fight":
        print("You walk up to a prisoner and he stabs you.")
        sleep(2)
        print("Game Over"), usr
    if gym=="weights":
        print("You go and pick up some weights. You forget overwork yourself and die of a heart attack")
    if gym=="outside":
        print("You go outside to ")
if cell=="outside":
    print("You go outside. There are some people playing basketball and some people doing drugs. You can do drugs, play bball or fight someone")
    outside=raw_input("> ")
    if outside=="fight":
        print("You walk up to a guy")
        sleep(1)
        print("Hey, wanna fight?")
        sleep(1)
        print("Sure!")
        sleep(1)
        print("The stranger punches you.")
        sleep(1)
        print("Your health is now"), hp-punch
        while enemy1>0:
            print("You can kick or punch")
            fight1=raw_input("> ")
            if fight1=="punch":
                print("You punch that mothafucka")
                sleep(1)
                print("His health is"), enemy1-punch
            if fight1=="kick":
                print("You kick that mothafucka")
                sleep(1)
                print("His health is now"), enemy1-kick
            if fight1=="kill":
                print("You evicerate that mothafucka")
                sleep(1)
                print("His health is now"), enemy1-kill
        print("You win!") 
```

别想着你出去，你和人打架，他的健康回到一百。我发现这是因为我一直在输入enemy1-x。我想知道如何降低敌人的生命值并记住它较低，并且当它达到零时它会中断 while 循环。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-17T03:11:13.030

```
print("Your health is now"), hp-punch
print("His health is"), enemy1-punch
print("His health is now"), enemy1-kick
print("His health is now"), enemy1-kill 
```

这些行实际上并没有改变`hp`或`enemy1`。使用*赋值语句*来更改它们的值：`a -= b`，它是 的简写`a = a - b`。

```
hp -= punch
print "Your health is now", hp

enemy1 -= punch
print "His health is", enemy1

enemy1 -= kick
print "His health is now", enemy1

enemy1 -= kill
print "His health is now", enemy1 
```

# json - ng-repeat 不能准确地提取数据

> ID：16050766
> 
> 赞同：3
> 
> 时间：2013-04-17T03:07:47.000
> 
> 标签：json, angularjs, angularjs-directive

有人可以向我指出我在这里可能做错了什么吗？我有一个控制器使用 $http 服务从服务器上的 JSON 文件中提取数据，并将其通过属性传递给指令。问题是，即使我在我的 JSON 循环中只看到 4 个对象，它给了我 325。此外，我无法访问任何属性。

我的 JSON

```
[{

"name": "Cute Shirt",
"Type": "Shirt",
"Size": "S,M,L,XL",
"Color": "R,G,B",
"SRC": "img/shirt.png"

}
,

{

    "name": "Cute Shirt",
    "Type": "Shirt",
    "Size": "S,M,L,XL",
    "Color": "R,G,B",
    "SRC": "img/shirt.png"

}

,

{

    "name": "Cute Shirt",
    "Type": "Shirt",
    "Size": "S,M,L,XL",
    "Color": "R,G,B",
    "SRC": "img/shirt.png"

}

,

{

    "name": "Cute Shirt",
    "Type": "Shirt",
    "Size": "S,M,L,XL",
    "Color": "R,G,B",
    "SRC": "img/shirt.png"

}

] 
```

我的控制器

```
"use strict";

function itemControl ($http,$scope) {

$http.get('doc/products.json' ).success(function(prodata){$scope.data = prodata;});

} 
```

我的指令

```
app.directive("showcase", function() {
 return {
    restrict: "A",
    template: '{{stuff.length}}',
    scope: {
        stuff: "@"
    }
};
}); 
```

最后是 HTML

```
<div ng-controller="itemControl">

        <div showcase stuff="{{data}}"></div>

</div> 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-17T03:48:27.687

从 AngularJS 文档：

> @ 或 @attr - 将本地范围属性绑定到 DOM 属性的值。结果始终是字符串，因为 DOM 属性是字符串。

使用 = 会有所帮助

> = 或 =attr - 在本地范围属性和通过 attr 属性值定义的 name 的父范围属性之间建立双向绑定。

你会想要改变你`<div showcase stuff="{{data}}"></div>`的`<div showcase stuff="data"></div>`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-17T03:45:28.267

更改`@`为`=`

@ 表示它将对象插入到字符串中。

# shell - 如何编写一个 Unix Shell 来针对每个唯一列对一行中的值求和（例如，如何计算每个不同候选人的总票数）

> ID：16050769
> 
> 赞同：0
> 
> 时间：2013-04-17T03:08:18.020
> 
> 标签：shell, unix, awk, grep

在其基本形式中，我收到了一个包含 2012 年总统选举的州投票结果的文本文件，我需要在 Unix 中编写一个单行 shell 脚本来确定哪个候选人获胜。该文件有多个字段，其中一个是 CandidateName，另一个是 TotalVotes。文件中的每条记录都是来自州内一个选区的结果，因此任何给定的 CandidateName 都有很多记录，所以我想做的是根据 CandidateName 对数据进行排序，然后最终将 TotalVotes 求和每个唯一的 CandidateName（因此总和从唯一的 CandidateName 开始，在下一个唯一的 CandidateName 之前结束）。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-17T03:38:51.273

无需使用`awk`及其关联数组进行排序。为方便起见，数据文件格式可以是：

```
precinct1:candidate name1:732
precinct1:candidate2 name:1435
precinct2:candidate name1:9920
precinct2:candidate2 name:1238 
```

因此，您需要以字段 2`:`为分隔符创建字段 3 的总计。

```
awk -F: '{sum[$2] += $3} END { for (name in sum) { print name " = " sum[name] } }' data.file 
```

有些版本`awk`可以内部排序；其他人不能。我会使用排序程序来处理结果：

```
sort -t= -k2nb 
```

（字段分隔符是`=`符号；排序在字段 2 上，这是一个数字字段，可能带有前导空格）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-17T04:03:31.257

不是一行，但会起作用

```
$ cat votes.txt
Colorado  Obama     50
Colorado  Romney    20
Colorado  Gingrich  30
Florida   Obama     60
Florida   Romney    20
Florida   Gingrich  30 
```

脚本

```
while read loc can num
do
  if ! [ ${!can} ]
  then
    cans+=($can)
  fi
  (( $can += num ))
done < votes.txt
for can in ${cans[*]}
do
  echo $can ${!can}
done 
```

输出

```
Obama 110
Romney 40
Gingrich 60 
```

# html - HTML Canvas：旋转图像 3D 效果

> ID：16050771
> 
> 赞同：5
> 
> 时间：2013-04-17T03:08:25.313
> 
> 标签：html, canvas

我如何旋转图像（例如 45 度）并挤压图像。假设我有一个完美的方形图像。我可以将它旋转到我想要的任何角度，但我想让旋转的正方形被压扁，使高度比宽度小 2/3。生成的图像将不是一个完美的旋转正方形，而是一个压扁的正方形。

你知道我怎样才能达到效果吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-17T03:30:12.817

压扁一个正方形非常容易，只需应用一个比例：

`ctx.scale(1, 2/3); // squish it to 2/3 vertical size`

不过，您必须将其翻译`(opposite fraction * the height) / 2`为居中。

因此，要旋转然后挤压 200x200 方形图像，您只需：

```
// rotation first
ctx.translate(100,100);
ctx.rotate(.3);
ctx.translate(-100,-100);

// than scale
ctx.translate(0,200 * (1/3) / 2) // move by half of the 1/3 space to center it
ctx.scale(1, 2/3); // squish it to 2/3 vertical size

ctx.drawImage(img, 0,0); 
```

示例：http: [//jsfiddle.net/simonsarris/3Qr3S/](http://jsfiddle.net/simonsarris/3Qr3S/)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-17T03:50:29.757

**您可以使用 2D 画布通过扭曲宽度与高度来“伪造”3d**

通过使用 context.drawImage 并不成比例地改变宽度与高度来做到这一点

```
// draw image increasingly "squashed"
// to fake a 3d effect
ctx.drawImage(img,0,0,img.width,img.height,
    left,
    10,
    (300-(right-left))/1,
    300-(right-left)/1.5); 
```

您可以使用失真率来获得不同的效果，但这只是“挤压”。

这是代码和小提琴：http: [//jsfiddle.net/m1erickson/J2WfS/](http://jsfiddle.net/m1erickson/J2WfS/)

```
<!doctype html>
<html>
<head>
<link rel="stylesheet" type="text/css" media="all" href="css/reset.css" /> <!-- reset css -->
<script type="text/javascript" src="http://code.jquery.com/jquery.min.js"></script>

<style>
    body{ background-color: ivory; padding:20px;}
    canvas{border:1px solid red;}
</style>

<script>
    $(function(){

        var canvas=document.getElementById("canvas");
        var ctx=canvas.getContext("2d");

        window.requestAnimFrame = (function(callback) {
          return window.requestAnimationFrame || window.webkitRequestAnimationFrame || window.mozRequestAnimationFrame || window.oRequestAnimationFrame || window.msRequestAnimationFrame ||
          function(callback) {
            window.setTimeout(callback, 1000 / 60);
          };
        })();

        var left=1.0;
        var right=300;
        var sizing=.25;

        var img=new Image();
        img.onload=function(){
          animate();
        }
        img.src="koolaidman.png";

        function animate() {

          // update scaling factors
          left+=sizing;
          right-=sizing;
          if(left<0 || left>100){sizing = -sizing;}
          console.log(left+"/"+right);

          // clear and save the context
          ctx.clearRect(0, 0, canvas.width, canvas.height);
          ctx.save();

          // draw image increasingly "squashed"
          // to fake a 3d effect
          ctx.drawImage(img,0,0,img.width,img.height,
              left,
              10,
              (300-(right-left))/1,
              300-(right-left)/1.5);

          ctx.restore();

          // request new frame
          requestAnimFrame(function() {
            animate();
          });
        }
        animate();

    }); // end $(function(){});
</script>

</head>

<body>
    <canvas id="canvas" width=300 height=235></canvas>
</body>
</html> 
```

# css - Twitter Bootstrap，Firefox 中的字体非常细（附图片）

> ID：16050774
> 
> 赞同：0
> 
> 时间：2013-04-17T03:08:41.830
> 
> 标签：css, firefox, twitter-bootstrap, fonts, cross-browser

我目前遇到了 Twitter Bootstrap 的问题，现在我说一个问题，但字体在 Bootstrap 主页上看起来也很“薄”（[http://twitter.github.io/bootstrap/](http://twitter.github.io/bootstrap/)）。

请参阅下图，了解 FF 和 Chrome 之间的字体样式差异：

![看这张图，看看 FF 和 Chrome 字体样式的区别](https://i.stack.imgur.com/ideQq.png)

在我看来，顶部菜单栏很难阅读，此外，欢迎文本 (h2) 也不像 Chrome 中那样粗体。

我研究了文本渲染调整，例如抗锯齿等，但无济于事。

还有什么我可以尝试解决的吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-17T03:26:09.350

使用谷歌字体。Twitter bootstrap 很棒，但我不会将它用于排版。您可以在一分钟内将谷歌字体导入您的网站。我推荐open sans。

# sql - 哪个更好：每次从数据库解析大数据还是缓存结果？

> ID：16050775
> 
> 赞同：3
> 
> 时间：2013-04-17T03:08:48.857
> 
> 标签：sql, database, performance

我对系统性能有疑问。在 DB 表中，每条记录都会有一个很大的 XML 数据。我担心的是，如果我每次都应该从数据库中解析 XML 数据以获取 XML 中的属性和信息。另一种选择可能是解析 XML 一次并捕获它们。XML 大小平均为 100KB，将有 10^10 条记录。如何解决这个空间与计算性能问题？我的猜测是捕捉结果（XML 中的重要属性）。因为每次查询解析 10^10 条记录并不是一件容易的事。加上解析后的属性可以用作索引。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-17T03:23:11.980

如果您要解析所有*查询*，那么您无疑应该缓存结果，也许将完整生成的产品放入单个数据库字段或文件中以供将来使用，或者最后直到某些内容发生更改，就像论坛系统一样。

知道你总是会得到相同的结果，对大量数据重复一个昂贵的过程是对资源的真正浪费。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-17T03:16:20.313

如果您打算使用 XML 中的某些属性进行索引，最好将它们作为列添加到表中。

关于解析 XML，100kb 几乎不是影响性能的大小。此外，您可以在获取记录时读取 XML（按原样）并将其存储在字符串中，并仅在您想要显示/使用这些附加属性时对其进行解析。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-17T06:26:13.647

您没有提到最佳选择：解析 XML 并将其数据存储在它们所属的表中。如果您确实需要逐字逐句的原始 XML，请将其保留为 blob，否则请忽略它。

（顺便说一下，我认为您的意思是*cache*，而不是 catch 。）

# foreign-keys - 尝试使用 heidisql 在 mysql 中添加外键

> ID：16050778
> 
> 赞同：4
> 
> 时间：2013-04-17T03:09:00.090
> 
> 标签：foreign-keys, innodb, mysql-error-1452, heidisql

我一直在尝试使用 heidisql 将外键添加到我的表中，但我不断收到错误 1452。

在阅读之后，我确保我的所有表都在 InnoDB 上运行，并检查它们是否具有相同的数据类型，我可以添加密钥的唯一方法是如果我删除所有我不打算做的数据，因为我有在这上面花了好几个小时。

这是我的表创建代码：

```
CREATE TABLE `data` (
`ID` INT(10) NOT NULL AUTO_INCREMENT,
#bunch of random other columns stripped out
`Ability_1` SMALLINT(5) UNSIGNED NOT NULL DEFAULT '0',
#more stripped tables
`Extra_Info` SET('1','2','3','Final','Legendary') NOT NULL DEFAULT '1' COLLATE 'utf8_unicode_ci',
PRIMARY KEY (`ID`),
UNIQUE INDEX `ID` (`ID`)
)
COLLATE='utf8_unicode_ci'
ENGINE=InnoDB
AUTO_INCREMENT=650; 
```

这是表2

```
CREATE TABLE `ability` (
`ability_ID` SMALLINT(5) UNSIGNED NOT NULL AUTO_INCREMENT,
#stripped columns
`Name_English` VARCHAR(12) NOT NULL COLLATE 'utf8_unicode_ci',
PRIMARY KEY (`ability_ID`),
UNIQUE INDEX `ability_ID` (`ability_ID`)
)
COLLATE='utf8_unicode_ci'
ENGINE=InnoDB
AUTO_INCREMENT=165; 
```

最后是创建代码以及错误。

```
ALTER TABLE `data`
ADD CONSTRAINT `Ability_1` FOREIGN KEY (`Ability_1`) REFERENCES `ability` (`ability_ID`) ON UPDATE CASCADE ON DELETE CASCADE;
/* SQL Error (1452): Cannot add or update a child row: a foreign key constraint fails (`check`.`#sql-ec0_2`, CONSTRAINT `Ability_1` FOREIGN KEY (`Ability_1`) REFERENCES `ability` (`ability_ID`) ON DELETE CASCADE ON UPDATE CASCADE) */ 
```

如果还有什么我可以提供的，请让我知道这真的很困扰我。我还在使用 5.5.27 - xampp 安装程序附带的 MySQL 社区服务器 (GPL)。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2018-04-14T19:40:58.790

这是你如何做到的；

1.  创建您的主键。对我来说这很简单，所以我不会在这里发布如何做到这一点

2.  要创建外键，您需要将每个表的表/引擎类型从 MyIASM 更改为 InnoDb。为此，请选择右侧的表，然后选择右侧的 OPTIONS 选项卡，并将每个表的引擎从 MyIASM 更改为 InnoDb。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2017-09-04T11:19:00.977

[![在此处输入图像描述](https://i.stack.imgur.com/QaKNF.jpg)](https://i.stack.imgur.com/QaKNF.jpg)

如果您使用的是 HeidiSQL，这很容易。

只需看到图像，单击+添加以添加外键。

我更喜欢创建表及其属性的 GUI 方式，因为它可以节省时间并减少错误。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-17T13:28:01.840

我找到了。对不起大家。问题是我有 0 作为我的字段的默认值，而我的原始表没有 0 的值。

# ios - 如何知道要导入什么？

> ID：16050779
> 
> 赞同：5
> 
> 时间：2013-04-17T03:09:17.173
> 
> 标签：ios

我一直困惑于找出我需要导入什么才能使用某个功能。

例如，当我使用 MFMailComposeViewController 时，我通过谷歌搜索知道我需要

```
#import <MessageUI/MFMailComposeViewController.h> 
```

并添加：MessageUI.framework

从参考文档中，我怎么知道我需要这些东西？

[http://developer.apple.com/library/ios/#documentation/MessageUI/Reference/MFMailComposeViewController_class/Reference/Reference.html](http://developer.apple.com/library/ios/#documentation/MessageUI/Reference/MFMailComposeViewController_class/Reference/Reference.html)

我想学习如何更好地使用参考文档而不依赖谷歌搜索示例代码来找出我将来需要导入的内容，所以有人可以解释如何从文档中解决这个问题吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-17T03:19:34.983

看看顶部是如何在 MFMailComposeViewController.h 中声明的？那么问题是它在哪个框架中。这是找出答案的一种方法。

从 Xcode 中的实际 iOS 项目开始。按 Shift-Command-O（文件 > 快速打开）并粘贴或键入 MFMailComposeViewController 到其中。打开 MFMailComposeViewController.h 的列表。

现在阅读编辑器顶部的跳转栏。它说： ... > 框架 > MessageUI.framework > ...

这使您可以推断出您需要 MessageUI 框架并且需要导入（不是您所说的，而是）`<MessageUI/MessageUI.h>`。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-17T03:33:19.253

我就是这样做的，它可能对你也有用..

![主办方截图](https://i.stack.imgur.com/D1r47.png)

你注意到顶部的导航栏了吗？如果您单击“MFMailComposeViewController 类参考”字段，那么它将为您提供类似的内容..

![在此处输入图像描述](https://i.stack.imgur.com/Ogm20.png)

然后你可以看到“消息 UI 框架参考”，这个页面告诉你你需要导入什么。这并不完美，但它在大多数情况下都有帮助......

# r - 我需要定义 3 个向量 xA、xB 和 xC。其中每个向量有 3 个值，例如 ("A",1)、("A",2) 等。

> ID：16050780
> 
> 赞同：0
> 
> 时间：2013-04-17T03:09:18.633
> 
> 标签：r, vector

我需要定义 3 个向量`xA`、`xB`和`xC`。其中每个向量有 3 个值，例如 ("A",1)、("A",2) 等。每次我尝试输入`xA<- ("A",1),("A",2),..`等等，R 都会说出乎意料的“，”。

我还需要从已知的对数方程中确定 p 值的 9 向量`p = exp(u)/(1 + exp(u))`。我搞不清楚了。任何帮助将不胜感激。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-17T03:27:26.870

你需要`list`并且`c`——或者只是`list`：

```
 # option 1
 xA <- list(c("A", 1),  c("A", 2), c("A", 3))   
 # note, the integers will be coerced to strings

 # option 2
 xA <- list(list("A", 1), list("A", 2), list("A", 3))
 # integers will *not* be coerced to strings. 

 # options 3
 xA <- list(A=1, A=2, A=3) 
```

# angularjs - Angular ng 视图无法在 Firefox 中正确呈现 - 我只是得到“function () { return html; }”

> ID：16050782
> 
> 赞同：1
> 
> 时间：2013-04-17T03:09:26.520
> 
> 标签：angularjs

我正处于一个大小合理的 AngularJS 应用程序的中间，而我们的 BDD 最近开始出现故障。事实证明，它们失败了，因为在 Firefox 中首次加载站点后（即重新加载页面）导致 NG-View 呈现

函数（）{返回html；}

这个的html是

```
<div data-ng-view="">
    <span class="ng-scope">function () { return html; }</span>
</div> 
```

我可以通过重新加载页面轻松地在 Firefox 中重现此错误，但在 IE7 模式下的 Chrome/IE10 和 IE10 中我无法重现它。

调试应用程序时，应用程序正常“启动” - 进行一些服务调用以获取查找数据等，注册服务、指令和加载控制器。

当页面处于这种状态时，我可以执行

```
angular.element($0).scope() 
```

在控制台上查看范围

```
<html data-ng-controller="app.controller"> 
```

当应用程序处于此状态时，控制台中没有错误，如果我将调试器设置为暂停错误，我会在 jquery-min 中得到一个错误，而没有其他错误。

任何想法将不胜感激。如果需要，我还可以将代码示例发布到特定区域，例如路由。

**编辑 **

该问题与使用此 google 组中的一些代码动态加载控制器/html 有关

[https://groups.google.com/forum/#!msg/angular/rs1dj097oHA/cPwPZfLvX4EJ](https://groups.google.com/forum/#!msg/angular/rs1dj097oHA/cPwPZfLvX4EJ)

可以在线程中看到对代码的修复。

我没有将其标记为答案，因为我觉得 Angular 处理“routeDefinition.template”的方式存在更深层次的问题，否则我会一直看到 html 或整个函数的打印 - 而不是一些看似随机的交换。

```
routeDefinition.template = function () {
            return html;
        }; 
```

欢呼克莱

# c++ - MPI 和 Valgrind 不显示行号

> ID：16050791
> 
> 赞同：3
> 
> 时间：2013-04-17T03:10:56.410
> 
> 标签：c++, mpi, valgrind

我编写了一个大型程序，并且很难追踪分段错误。我发布了一个问题，但我没有足够的信息继续下去（请参阅下面的链接 - 如果你这样做了，请注意，我花了几乎一整天的时间尝试多次想出一个最小可编译的代码版本来重现错误无济于事）。

[https://stackoverflow.com/questions/16025411/phantom-bug-involving-stdvectors-mpi-c](https://stackoverflow.com/questions/16025411/phantom-bug-involving-stdvectors-mpi-c)

所以现在我第一次尝试使用 valgrind。我刚刚安装了它（只是“sudo apt-get install valgrind”），没有特殊安装来解释 MPI（如果有的话）。我希望提供包括文件名和行号在内的具体信息（我知道 valgrind 不可能提供变量名）。当我得到有用的信息时，包括

*   大小为 4 的无效读取
*   条件跳转或移动取决于未初始化的值
*   未初始化的值是由堆栈分配创建的
*   1 个块中的 4 个字节肯定会丢失

除了这个神奇的东西

*   系统调用参数 sched_setaffinity(mask) 指向 0x433CE77 处的不可寻址字节：系统调用 (syscall.S:31) 地址 0x0 未堆栈、malloc 或（最近）释放

我没有得到文件名和行号。相反，我得到

```
==15095==    by 0x406909A: ??? (in /usr/lib/openmpi/lib/libopen-rte.so.0.0.0) 
```

这是我编译代码的方式：

```
mpic++ -Wall -Wextra -g -O0 -o Hybrid.out (…file names) 
```

这是我执行 valgrind 的两种方法：

```
valgrind --tool=memcheck --leak-check=full --track-origins=yes --log-file=log.txt mpirun -np 1 Hybrid.out 
```

和

```
mpirun -np 1 valgrind --tool=memcheck --leak-check=full --track-origins=yes --log-file=log4.txt -v ./Hybrid.out 
```

第二个版本基于中的说明

[当我使用 Open MPI 运行并行程序时出现分段错误](https://stackoverflow.com/questions/5247526/segmentation-faults-occur-when-i-run-a-parallel-program-with-open-mpi)

如果我正确理解选择的答案，这似乎与

[带有 valgrind 的 openmpi（我可以在 Ubuntu 发行版中使用 MPI 进行编译吗？）](https://stackoverflow.com/questions/11077746/openmpi-with-valgrind-can-i-compile-with-mpi-in-ubuntu-distro)

我故意在一个处理器上运行 valgrind，因为这是我的程序在没有分段错误的情况下执行完成的唯一方法。我也用两个处理器运行它，并且我的程序段出现了预期的错误，但我从 valgrind 得到的日志似乎包含基本相同的信息。我希望通过解决 valgrind 在一个处理器上报告的问题，我将神奇地解决不止一个处理器上发生的问题。

我尝试按照建议在程序编译中包含“-static”

[尽管有 -g 标志，Valgrind 不显示行号（在 Ubuntu 11.10/VirtualBox 上）](https://stackoverflow.com/questions/9321385/valgrind-not-showing-line-numbers-in-spite-of-g-flag-on-ubuntu-11-10-virtualbo)

但编译失败，说（除了几个警告）

```
dynamic STT_GNU_IFUNC symbol "strcmp" with pointer equality in '…' can not be used when making an executably; recompile with fPIE and relink with -pie 
```

我还没有研究过“fPIE”和“-pie”是什么意思。另外，请注意我没有使用 makefile，我目前也不知道如何编写。

还有一些注意事项：我的代码不使用命令 malloc、calloc 或 new。我完全使用 std::vector; 没有 C 数组。我确实使用 .resize()、.insert()、.erase() 和 .pop_back() 等命令。我的代码还通过引用和常量引用将向量传递给函数。至于并行命令，我只使用 MPI_Barrier()、MPI_Bcast() 和 MPI_Allgatherv()。

如何让 valgrind 显示它报告的错误的文件名和行号？谢谢大家的帮助！

**编辑**

我继续研究它，我的一个朋友指出没有行号的报告都是来自 MPI 文件，我没有从源代码编译，并且由于我没有编译它们，我不能使用 -g 选项，因此看不到线条。所以我根据这个命令再次尝试了valgrind，

```
mpirun -np 1 valgrind --tool=memcheck --leak-check=full --track-origins=yes --log-file=log4.txt -v ./Hybrid.out 
```

但现在对于两个处理器，即

```
mpirun -np 2 valgrind --tool=memcheck --leak-check=full --track-origins=yes --log-file=log4.txt -v ./Hybrid.out 
```

程序运行完成（我没有看到命令行中报告的 seg 错误）但是 valgrind 的执行确实给了我文件中的行号。valgrind 指向的行是我调用 MPI_Bcast() 的行。可以肯定地说这是因为内存问题仅在多个处理器上表现出来（因为我已经在 np -1 上成功运行它）？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-05-27T16:49:38.203

听起来您使用了错误的工具。如果您想知道分段错误发生在哪里，请使用 gdb。

这是一个简单的例子。该程序将在`*b=5`

```
// main.c

int
main(int argc, char** argv)
{
   int* b = 0;
   *b = 5;
   return *b;
} 
```

使用 gdb 查看发生了什么；（<---- 部分解释输入行）

```
svengali ~ % g++ -g -c main.c -o main.o # include debugging symbols in .o file
svengali ~ % g++ main.o -o a.out        # executable is linked (no -g here)
svengali ~ % gdb a.out
GNU gdb (GDB) 7.4.1-debian
<SNIP>
Reading symbols from ~/a.out...done.
(gdb) run <--------------------------------------- RUNS THE PROGRAM
Starting program: ~/a.out 

Program received signal SIGSEGV, Segmentation fault.
0x00000000004005a3 in main (argc=1, argv=0x7fffffffe2d8) at main.c:5
5      *b = 5;
(gdb) bt  <--------------------------------------- PRINTS A BACKTRACE
#0  0x00000000004005a3 in main (argc=1, argv=0x7fffffffe2d8) at main.c:5
(gdb) print b <----------------------------------- EXAMINE THE CONTENTS OF 'b'
$2 = (int *) 0x0
(gdb) 
```

# html - 如何在 div 中设置背景

> ID：16050792
> 
> 赞同：-1
> 
> 时间：2013-04-17T03:10:56.687
> 
> 标签：html, css

我需要的最终结果背景图像：

![生成的背景图像](https://i.stack.imgur.com/ufCcp.jpg)

我使用的背景图片：

![原始背景图片](https://i.stack.imgur.com/GWVfL.jpg)

但我有这个**[小提琴](http://jsfiddle.net/gpB7R/10/)**

**::小提琴总结::**

HTML...

```
<div id="top-part">
<div id="topmost">
    <div id="top-most" class="wrapper">

    </div>
</div>
<div id="topmenu" class="wrapper">

</div> 
```

CSS...

```
.wrapper{
      position: relative;
      width: 943px;
      margin: 0 auto;
}
#top-part{
      background: url(img/bg-header-effects.png) no-repeat top center;
}
#topmost{
      background: #900;
      opacity: 0.8;
}
#top-most{
      height: 139px;
}
#topmenu{
      background: #900;
      opacity: 0.8;
      height: 51px;
      border-radius: 0 0 20px 20px;
} 
```

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2013-04-17T03:12:42.173

# 更新 - 涵盖您最近的编辑

```
#header{

    background: #f00 url('http://i.stack.imgur.com/GWVfL.jpg');
    opacity: .6;
    width: 100%;
    height: 189px;
} 
```

# [工作小提琴](http://jsfiddle.net/gpB7R/5/)

* * *

您可以尝试`background`在 CSS 中使用该属性：

```
div{
    background: url('path_to_your_image.jpg') no-repeat;
} 
```

[在此处了解有关使用该`background-image`物业的更多信息](https://developer.mozilla.org/en-US/docs/CSS/background-image)

**笔记：**

`background`和之间有区别`background-image`。在这个答案中，我使用了该`background`属性，它基本上采用 CSS 中背景图像的所有可能选项，并让它们在一次调用中使用。

例如，您可以将上述内容拆分为两个选择器：

```
div{
    background-image: url('path_to_your_image.jpg') no-repeat; 
    background-repeat: no-repeat;
} 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-04-19T03:25:37.130

你可以像**[这个小提琴一样](http://jsfiddle.net/GKX2B/)**

html...

```
<div id="top-part">
  <div id="topmost">
  </div>
</div>
<div id="top-menu" class="wrapper">
  <div id="topmenu">
  </div>
</div> 
```

css...

```
.wrapper{
    position: relative; 
    width: 943px; 
    margin: 0 auto;
}

#top-part{
   background: url(img/bg-header-effects.png) no-repeat top center;
}
#topmost{
   background: #900; 
   opacity: 0.8; 
   height: 139px;
}
#top-menu{
   background: url(img/bg-header-effects.png) no-repeat 50% 45%; 
   border-radius: 0 0 20px 20px;
}
#topmenu{
   background: #900; 
   opacity: 0.8; 
   height: 51px; 
   border-radius: 0 0 20px 20px;
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-20T05:02:01.633

我正在考虑的简单方法是在覆盖整个页面的 div 中放置一张图片。代码将非常简单，但唯一的缺点是图像可能会变形或者可以单击，除非你有这个。

HTML：

```
<div id="backgroundcolor">
            <div id="backgroundimage">
                </div>
        </div> 
```

CSS：

```
#backgroundcolor {
    background-color: #000;
    z-index: 1;
}
#backgroundimage {
    background: ("http://cdn.theatlantic.com/static/infocus/election110712/s_e01_37923312.jpg");
    resize: none;
    object-position: center;
    object-fit: initial;
} 
```

# c++ - 我如何知道指针是否已通过“新”分配数据？

> ID：16050793
> 
> 赞同：0
> 
> 时间：2013-04-17T03:11:02.333
> 
> 标签：c++, pointers, new-operator, delete-operator

假设我有一个这样的指针：

```
int *thingy; 
```

在某些时候，可能会或可能不会调用此代码：

```
thingy=new int; 
```

我怎么知道我是否可以这样做：

```
delete thingy; 
```

我可以`bool`为每个指针使用 a 并将 bool 标记为`true`每当我使用 时`new`，但我有很多指针，这会变得非常笨拙。

如果我没有调用`new`它`thingy`，调用`delete`它可能会导致崩溃，对吧？

我搜索了很多，但找不到明显适合我情况的答案。

**编辑：**我需要能够`delete`多次指向指针，而指针不一定指向任何数据。如果这是不可能的，我将不得不重新编写我的代码。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-17T03:12:02.097

始终将其初始化为 NULL

```
int *thingy = NULL; 
```

接着

```
delete thingy;
thingy = NULL; 
```

即使 thingy 为 NULL 也是有效的。您可以根据需要多次删除，只要`thingy`不会`NULL` `delete`产生不必要的副作用。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-17T03:45:46.423

没有内置方法可以判断特定指针值是否可用`delete`。相反，您只需设计程序来做正确的事情，最好是根据您的要求仔细设计资源所有权策略，并使用 RAII 之类的方法来实施它们。

给定适当的 RAII 类型，您将不需要`delete`在代码周围分散 s 或其他资源管理命令。您将简单地初始化和使用适当类型的对象，并将清理工作留给对象本身。例如，如果 RAII 类型`unique_ptr`对应于您要使用的所有权策略，那么您可以通过以下方式管理对象：

```
unique_ptr<int> thingy {new int};
// use thingy ... 
```

无需手动清理，因为`unique_ptr`它会为您处理好。

另一方面，如果您尝试直接管理资源，您最终会得到大量代码，例如：

```
int *thingy = nullptr;

// ...

thingy = new int;

try {
    // something that might throw
} catch(...) {
    delete thingy;
    thingy = nullptr;
    throw;
}

delete thingy;
thingy = nullptr; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-17T04:37:29.993

Write a wrapper class that does the tracking for you, eg:

```
template<typename T>
class ptr_t
{
private:
    T* m_ptr;
    bool m_delete;

    ptr_t(const ptr_t&) {}
    ptr_t& operator=(const ptr_t&) { return *this; }

public:
    ptr_t()
        : m_ptr(NULL), m_delete(false)
    {
    }

    ptr_t(T *ptr, bool del)
         : m_ptr(ptr), m_delete(del)
    {
    }

    ~ptr_t()
    {
       reset();
    }

    void assign(T *ptr, bool del)
    {
        if (m_delete)
            delete m_ptr;
        m_ptr = ptr;
        m_delete = del;
    }

    void reset()
    {
        assign(NULL, false);
    }

    operator T*() { return m_ptr; }
    bool operator!() const { return (!m_ptr); }
};

typedef ptr_t<int> int_ptr; 
```

.

```
int_ptr thingy;
...
thingy.assign(new int, true);
...
thingy.reset(); 
```

.

```
int i;
int_ptr pi;
...
pi.assign(&i, false);
...
pi.reset(); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-04-17T04:21:42.603

没有内置的 C++ 工具来识别指针是否指向堆数据并且可以安全地`delete`d。删除 NULL 指针是安全的，您可以将已删除数据的每个指针设置为 NULL。但这无助于区分指向堆数据的指针和指向其他数据或代码的指针。

当您的操作系统启动一个进程时，它会将代码和数据部分定位到特定的数据区域。在 Windows 中，这部分由 EXE 文件的 PE 头控制。因此，内存区域的实际地址可能会有所不同。但是您可以确定这些区域的位置：

*   代码
*   bss
*   数据
*   堆
*   堆

在获得每个区域的地址范围后，您可以区分指向堆数据的指针（适合删除的地方）和指向堆栈数据的指针。这使您可以区分`delete`不能删除的指针和数据。

# javascript - html表单提交使用javascript vs提交按钮

> ID：16050798
> 
> 赞同：3
> 
> 时间：2013-04-17T03:11:34.763
> 
> 标签：javascript, forms, submit

我一直在使用 javascript 来提交 HTML 表单，以获得一些说服力。我想知道与使用提交按钮使用经典表单提交相比，这种方法是否有任何缺点

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-04-17T03:24:02.107

使用纯 HTML 更好，原因有很多：

*   如果您的用户没有启用 JavaScript，或者您的代码中有 JavaScript 错误，您的表单仍然有效。
*   纯 HTML 表单更容易编写，更难搞砸
*   实际按钮在语义上比为您提交表单的魔术链接或 div 更好。这有助于诸如标签排序、操作系统集成、屏幕阅读器之类的事情，并且对于在您之后处理代码的程序员来说更清楚。
*   浏览器已经有经过实战测试的代码来提交表单。你为什么要无缘无故地重写那段代码？它增加了风险、复杂性和时间。
*   不编写 JavaScript 代码意味着您有更多时间做其他事情，比如不再编写代码。

如果某些东西已经存在并且适用于您的用例，请不要重新发明轮子！

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-17T03:16:53.167

我能想到的唯一缺点是，如果您需要重新加载页面，因为您正在与每次重新生成 HTML 的旧站点集成......但是如果您正在构建一个新系统，或者它已经这样做了，在我的意见是更好。节省带宽、计算时间、重新渲染时间等。如果您只是在谈论提交 HTML 表单，那真的没有什么区别。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-17T03:20:30.920

不，真的没有缺点。您可能有更多的代码，而不是仅仅将所有内容包装在一个表单中并提交按钮，但是您当然仍然可以利用 https 以及这些天网络可能提供的所有其他内容。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-04-17T03:23:57.090

最主要的缺点是无法为禁用 Javascript 的访问者提供功能。您可以通过在禁用 javascript 时提供不同的页面来重定向到同时支持两者。

以下是用于检测和响应禁用 javascript 的方法列表：

1.  `<noscript>` [HTML noscript 标记。](http://www.w3schools.com/tags/tag_noscript.asp)
2.  [使用 jQuery 或 Javascript 设置 cookie](http://www.thonky.com/javascript-and-css-guide/set-cookie/)
3.  使用 Javascript 隐藏使用 CSS 的区域。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2015-05-07T15:03:18.153

就个人而言，我不喜欢 HTML 表单。HTML 是一种布局语言，在这方面很差。保持布局和功能分离是面向对象编程的核心原则。您是否将 HTML 和 JavaScript 视为以这种方式表示这些功能可能是个人选择。你可以说 CSS 是布局。

如果您正在编写一个简单的页面，几乎没有其他内容，那么使用 HTML 表单不是一个坏主意。

如果您打算编写一个具有许多不错功能的大型应用程序，那么至少对我来说，将它放在一个地方是有意义的。

如果您开始引入 JSON 或任何类型的客户端/服务器关系，而不是“这是我的文本或下拉选择”，那么请采用程序员的方法而不是网页设计师。JavaScript 为您提供了更多的灵活性。您可以与服务器聊天，而不会在页面上发生任何事情。

如果您使用 jQuery 之类的库，则编码开销非常小。

# c++ - 显示数组中的最小值

> ID：16050800
> 
> 赞同：0
> 
> 时间：2013-04-17T03:11:47.280
> 
> 标签：c++, arrays, output, minimum

好的，我还需要使用单独的 10 元素数组计算并显示增加 5% 后的每个高度。有任何想法吗？对这一切感到抱歉。这是我第一次使用数组。

```
#include <iostream>

using namespace std;

int main()
{
    int MINheight = 0;
    double height[10];
    for (int x = 0; x < 10; x = x + 1)
    {
        height[x] = 0.0;
    }

    cout << "You are asked to enter heights of 10 students. "<< endl;
    for (int x = 0; x < 10; x = x + 1)
    {
        cout << "Enter height of a student: ";
        cin >> height[x];  
    }

    system("pause"); 
    return 0;
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-17T03:16:37.147

像这样简单地循环：

```
MINheight = height[0];
for (int x = 1; x < 10; x++)
{
   if (height[x] < MINheight)
   {
      MINheight = height[x];
   } 
}
std::cout << "minimum height " << MINheight <<std::endl; 
```

旁注：你不应该命名一个以大写字母开头的局部变量，`x`用作数组索引也有点奇怪，虽然它们都工作得很好，但不是很好的风格。

你也可以`std::min_element`如下使用：

```
std::cout << *std::min_element(height,height+10) << std::endl; 
                               //^^using default comparison 
```

要将元素放在具有增加高度的单独数组中并显示它们，请执行以下操作：

```
float increasedHeights[10] = {0.0};
for (int i = 0; i < 10;  ++i)
{
   increasedHeights[i] = height[i] * 1.05;
}

//output increased heights
for (int i = 0; i < 10;  ++i)
{
   std::cout << increasedHeights[i] << std::endl;
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-17T03:16:26.587

本质上，您可以在输入最小值时跟踪它，因此：

```
cout << "You are asked to enter heights of 10 students. "<< endl;

MINheight = numerical_limits<int>::max
for (int x = 0; x < 10; x = x + 1)
{
    cout << "Enter height of a student: ";
    cin >> height[x];  
    if(height[x] < MINheight)MINheight = height[x];
}
cout << "Minimum value was: " << MINheight << "\n"; 
```

这样做是创建一个变量，其值是可能的最大值，然后当用户输入一个新值时，检查它是否小于当前最小值，如果是则存储它。然后在最后打印出当前的最小值。

# android - 后延迟方法 - Android

> ID：16050807
> 
> 赞同：2
> 
> 时间：2013-04-17T03:13:01.053
> 
> 标签：android, android-intent, android-activity, postdelayed

我使用了postedDelayed 方法来刷新我的Activity，效果很好。但问题是，即使我按下后退按钮后延迟方法回调上一个活动..

//30000 毫秒后延迟刷新活动的处理程序

```
mHandler.postDelayed(new Runnable() {
public void run() {
               dostuff();

        }
            }, 30000);
    }

protected void dostuff() {
Intent intent = getIntent();
finish();startActivity(intent);
Toast.makeText(getApplicationContext(), "refreshed", Toast.LENGTH_LONG).show();
}

public void onBackPressed() {
        super.onBackPressed();
        finish();
        mHandler.removeCallbacks(null);
        }

protected void onStop() {
            mHandler.removeCallbacks(null);
        super.onStop();
    } 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-17T03:52:12.160

您可以使用`removeCallbacks(runnable)`调用方法的处理程序的`postDelayed()`方法。例如，如果您使用：

```
mHandler.postDelayed(mRunnable, mTime) 
```

刷新活动，然后使用

```
mHandler.removeCallbacks(mRunnable) 
```

在`onPause()`活动的方法上。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-17T03:36:47.917

在你的 postdelayed 方法中做一个布尔符号。初始化sign为true，活动结束后，设置sign值为false。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-06-06T10:26:36.557

您可以使用这段代码在延迟 3 秒后运行。

```
new Timer().schedule(new TimerTask() {          
    @Override
    public void run() {

        // run your code here    

    }
}, 3000); 
```

# ruby-on-rails-3.2 - 生产 private_pub - 401 未经授权的错误

> ID：16050814
> 
> 赞同：0
> 
> 时间：2013-04-17T03:13:57.107
> 
> 标签：ruby-on-rails-3.2, faye, private-pub

我已经在开发和 UAT 中使用 private_pub/faye 进行了一段时间的测试，没有任何问题。当我将代码移至生产环境时，尽管我一进入使用 private_pub 作为聊天界面的页面就会收到错误消息。

我不确定是什么导致了未经授权的访问错误，这是在使用 Devise 和 CanCan 进行权限设置的站点的经过身份验证的部分内。

有人在迁移到生产时遇到任何问题吗？

这可能是我在设置中错过的东西吗？

**private_pub.yml**

```
development:
  server: "http://localhost:9292/faye"
  secret_token: "secret"
production:
  server: "http://example.com/faye"
  secret_token: <secret_token>
  signature_expiration: 3600 
```

**启动命令：**

```
rackup private_pub.ru -s thin -E production 
```

**查看代码：**

```
<%= subscribe_to "/messages/private/#{@event.id}" %> 
```

当页面加载时，如果我在 Chrome 上查看控制台日志，我会收到以下错误：

```
GET http://example.com/faye.js 401 (Authorization Required) 
```

在 Rails 日志中，我收到以下错误：

```
Started GET "/faye.js" for 101.172.127.241 at 2013-04-16 23:00:15 -0400
Processing by ApplicationController#routing_error as JS
  Parameters: {"path"=>"faye"}
Completed 401 Unauthorized in 1ms 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-18T02:01:00.277

我不喜欢不回答这些问题，所以现在我已经设法解决了这个问题，我只想回帖以防其他人遇到这个问题。

原来，当我们在开发和 UAT 中使用 ufw 时，有人在生产服务器上启用了 iptables 防火墙。

通过在 iptables 中启用端口 9292，我们能够使其正常工作。

# javascript - 将事件绑定到模板中的模板中的选择选项

> ID：16050819
> 
> 赞同：1
> 
> 时间：2013-04-17T03:14:54.613
> 
> 标签：javascript, backbone.js

我正在使用骨干。完全是菜鸟。我有一个显示模态视图的外部模板。我们称它为模板模式。然后根据`libraries`传递给我的模态视图的对象，我显示数据行。每行有两个选择下拉列表。第二个下拉列表取决于下拉列表的名称（即当第一个下拉列表更改时，我想更新第二个下拉列表）。

库对象具有这些属性

```
name (1st drop down)
sequences[] (2nd drop down) 
```

所以我的内部模板（我在下拉菜单中讨论的行，在我的`template-inner`.

```
<select id="libraryName" style="display:inline; width: 100px">
                    <% _.each(libraries, function (library) { %>
                    <option><%= library.name %></option>
                    <% }); %>
                </select> 
```

这个内部模板是通过在我的模板模式中创建的。

```
this.$el.html(this.template({ libraries: libraries.toJSON() })); 
```

如何根据库填充第二个下拉列表？我想也许在渲染模板内部的主干视图中，我可以做这样的事情：

```
 events: {
        "change #libraryName" : "handleLibraryName"
    }, 
```

编辑：（重新澄清的问题）然后在 handleLibraryName 中，使用 jQuery 填充下拉列表？这是最好的方法吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-17T09:01:27.513

为什么不制作地图`{name: sequences[]}`，以便使用模板来创建第二个选择（或只是它的选项）？至于在哪里使用它，如果您希望通过动态使用它，我想使用您的`handleLibraryName`方法是一个不错的方法。

# git - 停止跟踪整个存储库以删除本地文件

> ID：16050820
> 
> 赞同：1
> 
> 时间：2013-04-17T03:15:00.103
> 
> 标签：git, github

一个简单的问题：

如何停止跟踪整个存储库并安全地删除所有本地文件？
我有一个远程存储库，在几次提交后，我决定不理会它。但我也不希望它堵塞我的磁盘空间，所以我想把它从我的本地磁盘上擦掉。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-17T03:20:06.343

例如，如果回购是这样的

```
git clone git://github.com/antirez/redis.git 
```

您只需删除文件夹即可删除本地文件

```
rm -r redis 
```

这将使远程文件保持不变。

# database - 关于数据库设计以记录系统中的用户活动的建议

> ID：16050821
> 
> 赞同：4
> 
> 时间：2013-04-17T03:15:02.550
> 
> 标签：database, database-design, logging

我想请教一个好的数据库设计来记录用户活动的建议。

目前我正在为一个简单的网站实施这种方法，用户可以在该网站上发布/编辑/删除文章。

**表日志**

```
- log_id
- log_change[Enum: new/edit/remove]
- log_date
- member_id
- post_id 
```

**桌柱**

```
- post_id
- post_title
- etc.... 
```

**表成员**

```
- member_id
- member_username
- member_pwd
- etc.. 
```

使用此表，每次用户发表一篇文章的新帖子（或编辑/删除）时，它都会记录在日志中（连同它发生的时间）。

但是，如果我正在处理一个更大的系统，用户不仅可以发布文章，还可以执行其他操作，例如登录/注销（从系统），进行购买（交易）。

我应该为每个模块选择不同的表吗？例如，如果系统具有发布文章、电子商务等模块。因此，我将有以下日志表：

1.  文章日志
2.  电子商务日志

每个表将记录每个相应模块中的活动。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-17T12:55:18.393

您可以使用实体子类型设计方法，其中常见的日志属性，如*谁*和*何时*在单个表中跟踪所有类型的更改。对于具有附加属性的更改，您可以拥有附加表，每种类型一个。

每个子类型的日志表都使用外键引用公用表。通常从子类型表到普通表的外键也是子类型表的主键，即1:1的关系。

在这样的设计中，公用表通常包括一个列（*分区属性*），该列指示公用表中的每条记录适用哪个子类型。

这种方法减少了构建和维护日志系统所需的代码量，同时允许您保持日志表的规范化。

# java - FileChannel ByteBuffer 和散列文件

> ID：16050827
> 
> 赞同：7
> 
> 时间：2013-04-17T03:15:29.763
> 
> 标签：java, file, hash

我在java中构建了一个文件散列方法，它接受a的输入字符串表示，`filepath+filename`然后计算该文件的散列。哈希可以是任何本机支持的 ​​java 哈希算法，例如`MD2`through `SHA-512`。

我试图找出最后一滴性能，因为这种方法是我正在从事的项目的一个组成部分。我被建议尝试使用`FileChannel`而不是常规的`FileInputStream`.

我原来的方法：

```
 /**
     * Gets Hash of file.
     * 
     * @param file String path + filename of file to get hash.
     * @param hashAlgo Hash algorithm to use. <br/>
     *     Supported algorithms are: <br/>
     *     MD2, MD5 <br/>
     *     SHA-1 <br/>
     *     SHA-256, SHA-384, SHA-512
     * @return String value of hash. (Variable length dependent on hash algorithm used)
     * @throws IOException If file is invalid.
     * @throws HashTypeException If no supported or valid hash algorithm was found.
     */
    public String getHash(String file, String hashAlgo) throws IOException, HashTypeException {
        StringBuffer hexString = null;
        try {
            MessageDigest md = MessageDigest.getInstance(validateHashType(hashAlgo));
            FileInputStream fis = new FileInputStream(file);

            byte[] dataBytes = new byte[1024];

            int nread = 0;
            while ((nread = fis.read(dataBytes)) != -1) {
                md.update(dataBytes, 0, nread);
            }
            fis.close();
            byte[] mdbytes = md.digest();

            hexString = new StringBuffer();
            for (int i = 0; i < mdbytes.length; i++) {
                hexString.append(Integer.toHexString((0xFF & mdbytes[i])));
            }

            return hexString.toString();

        } catch (NoSuchAlgorithmException | HashTypeException e) {
            throw new HashTypeException("Unsuppored Hash Algorithm.", e);
        }
    } 
```

重构方法：

```
 /**
     * Gets Hash of file.
     * 
     * @param file String path + filename of file to get hash.
     * @param hashAlgo Hash algorithm to use. <br/>
     *     Supported algorithms are: <br/>
     *     MD2, MD5 <br/>
     *     SHA-1 <br/>
     *     SHA-256, SHA-384, SHA-512
     * @return String value of hash. (Variable length dependent on hash algorithm used)
     * @throws IOException If file is invalid.
     * @throws HashTypeException If no supported or valid hash algorithm was found.
     */
    public String getHash(String fileStr, String hashAlgo) throws IOException, HasherException {

        File file = new File(fileStr);

        MessageDigest md = null;
        FileInputStream fis = null;
        FileChannel fc = null;
        ByteBuffer bbf = null;
        StringBuilder hexString = null;

        try {
            md = MessageDigest.getInstance(hashAlgo);
            fis = new FileInputStream(file);
            fc = fis.getChannel();
            bbf = ByteBuffer.allocate(1024); // allocation in bytes

            int bytes;

            while ((bytes = fc.read(bbf)) != -1) {
                md.update(bbf.array(), 0, bytes);
            }

            fc.close();
            fis.close();

            byte[] mdbytes = md.digest();

            hexString = new StringBuilder();

            for (int i = 0; i < mdbytes.length; i++) {
                hexString.append(Integer.toHexString((0xFF & mdbytes[i])));
            }

            return hexString.toString();

        } catch (NoSuchAlgorithmException e) {
            throw new HasherException("Unsupported Hash Algorithm.", e);
        }
    } 
```

两者都返回正确的哈希，但是重构的方法似乎只在小文件上进行合作。当我传入一个大文件时，它完全窒息而我不知道为什么。我是新手，`NIO`请多多指教。

编辑：忘了提到我正在通过它进行 SHA-512 测试。

`UPDATE:`用我现在的方法更新。

```
 /**
     * Gets Hash of file.
     * 
     * @param file String path + filename of file to get hash.
     * @param hashAlgo Hash algorithm to use. <br/>
     *     Supported algorithms are: <br/>
     *     MD2, MD5 <br/>
     *     SHA-1 <br/>
     *     SHA-256, SHA-384, SHA-512
     * @return String value of hash. (Variable length dependent on hash algorithm used)
     * @throws IOException If file is invalid.
     * @throws HashTypeException If no supported or valid hash algorithm was found.
     */
    public String getHash(String fileStr, String hashAlgo) throws IOException, HasherException {

        File file = new File(fileStr);

        MessageDigest md = null;
        FileInputStream fis = null;
        FileChannel fc = null;
        ByteBuffer bbf = null;
        StringBuilder hexString = null;

        try {
            md = MessageDigest.getInstance(hashAlgo);
            fis = new FileInputStream(file);
            fc = fis.getChannel();
            bbf = ByteBuffer.allocateDirect(8192); // allocation in bytes - 1024, 2048, 4096, 8192

            int b;

            b = fc.read(bbf);

            while ((b != -1) && (b != 0)) {
                bbf.flip();

                byte[] bytes = new byte[b];
                bbf.get(bytes);

                md.update(bytes, 0, b);

                bbf.clear();
                b = fc.read(bbf);
            }

            fis.close();

            byte[] mdbytes = md.digest();

            hexString = new StringBuilder();

            for (int i = 0; i < mdbytes.length; i++) {
                hexString.append(Integer.toHexString((0xFF & mdbytes[i])));
            }

            return hexString.toString();

        } catch (NoSuchAlgorithmException e) {
            throw new HasherException("Unsupported Hash Algorithm.", e);
        }
    } 
```

因此，我尝试使用我的原始示例和最新更新的示例对 2.92GB 文件的 MD5 进行基准测试。当然，任何基准测试都是相对的，因为存在操作系统和磁盘缓存以及其他“魔法”，它们会扭曲对相同文件的重复读取......但这里是一些基准测试的一个镜头。我加载了每种方法，并在重新编译后将其关闭了 5 次。基准测试取自最后一次（第 5 次）运行，因为这将是该算法的“最热门”运行，以及任何“魔法”（无论如何在我的理论中）。

```
Here's the benchmarks so far: 

    Original Method - 14.987909 (s) 
    Latest Method - 11.236802 (s) 
```

这是`25.03% decrease`对同一个 2.92GB 文件进行哈希处理所需的时间。非常好。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-17T04:11:19.480

3条建议：

1) 每次读取后清除缓冲区

```
while (fc.read(bbf) != -1) {
    md.update(bbf.array(), 0, bytes);
    bbf.clear();
} 
```

2）不要同时关闭fc和fis，这是多余的，关闭fis就足够了。FileInputStream.close API 说：

```
If this stream has an associated channel then the channel is closed as well. 
```

3）如果您想使用 FileChannel 提高性能

```
ByteBuffer.allocateDirect(1024); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2014-04-01T20:15:55.767

如果代码只分配一次临时缓冲区，则可能会出现另一个可能的改进。

例如

```
 int bufsize = 8192;
        ByteBuffer buffer = ByteBuffer.allocateDirect(bufsize); 
        byte[] temp = new byte[bufsize];
        int b = channel.read(buffer);

        while (b > 0) {
            buffer.flip();

            buffer.get(temp, 0, b);
            md.update(temp, 0, b);
            buffer.clear();

            b = channel.read(buffer);
        } 
```

*附录*

注意：字符串构建代码中有一个错误。它将零打印为单个数字。这很容易解决。例如

```
hexString.append(mdbytes[i] == 0 ? "00" : Integer.toHexString((0xFF & mdbytes[i]))); 
```

此外，作为一个实验，我重写了代码以使用映射字节缓冲区。它的运行速度提高了大约 30%（6-7 毫秒对 9-11 毫秒 FWIW）。如果您编写直接在字节缓冲区上操作的代码散列代码，我希望您可以从中获得更多收益。

我试图通过在启动计时器之前使用每种算法散列*不同*的文件来考虑 JVM 初始化和文件系统缓存。第一次运行代码比正常运行慢约 25 倍。这似乎是由于 JVM 初始化造成的，因为计时循环中的所有运行的长度大致相同。它们似乎没有从缓存中受益。我用MD5算法测试过。此外，在计时部分，在测试程序的持续时间内只运行一种算法。

循环中的代码更短，因此可能更容易理解。我不能 100% 确定大量文件在 JVM 上会产生什么样的压力内存映射，所以如果你想运行，你可能需要研究和考虑这种解决方案这在负载下。

```
public static byte[] hash(File file, String hashAlgo) throws IOException {

    FileInputStream inputStream = null;

    try {
        MessageDigest md = MessageDigest.getInstance(hashAlgo);
        inputStream = new FileInputStream(file);
        FileChannel channel = inputStream.getChannel();

        long length = file.length();
        if(length > Integer.MAX_VALUE) {
            // you could make this work with some care,
            // but this code does not bother.
            throw new IOException("File "+file.getAbsolutePath()+" is too large.");
        }

        ByteBuffer buffer = channel.map(MapMode.READ_ONLY, 0, length);

        int bufsize = 1024 * 8;          
        byte[] temp = new byte[bufsize];
        int bytesRead = 0;

        while (bytesRead < length) {
            int numBytes = (int)length - bytesRead >= bufsize ? 
                                         bufsize : 
                                         (int)length - bytesRead;
            buffer.get(temp, 0, numBytes);
            md.update(temp, 0, numBytes);
            bytesRead += numBytes;
        }

        byte[] mdbytes = md.digest();
        return mdbytes;

    } catch (NoSuchAlgorithmException e) {
        throw new IllegalArgumentException("Unsupported Hash Algorithm.", e);
    }
    finally {
        if(inputStream != null) {
            inputStream.close();
        }
    }
} 
```

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2013-10-06T21:40:35.577

这是使用 NIO 进行文件哈希的示例

*   小路
*   文件通道
*   映射字节缓冲区

并避免使用 byte[]。所以我认为这应该是上述的改进版本。第二个 nio 示例，其中哈希值存储在用户属性中。这可用于 HTML etag 生成，其他示例文件不会更改。

```
 public static final byte[] getFileHash(final File src, final String hashAlgo) throws IOException, NoSuchAlgorithmException {
    final int         BUFFER = 32 * 1024;
    final Path        file = src.toPath();
    try(final FileChannel fc   = FileChannel.open(file)) {
        final long        size = fc.size();
        final MessageDigest hash = MessageDigest.getInstance(hashAlgo);
        long position = 0;
        while(position < size) {
            final MappedByteBuffer data = fc.map(FileChannel.MapMode.READ_ONLY, 0, Math.min(size, BUFFER));
            if(!data.isLoaded()) data.load();
            System.out.println("POS:"+position);
            hash.update(data);
            position += data.limit();
            if(position >= size) break;
        }
        return hash.digest();
    }
}

public static final byte[] getCachedFileHash(final File src, final String hashAlgo) throws NoSuchAlgorithmException, FileNotFoundException, IOException{
    final Path path = src.toPath();
    if(!Files.isReadable(path)) return null;
    final UserDefinedFileAttributeView view = Files.getFileAttributeView(path, UserDefinedFileAttributeView.class);
    final String name = "user.hash."+hashAlgo;
    final ByteBuffer bb = ByteBuffer.allocate(64);
    try { view.read(name, bb); return ((ByteBuffer)bb.flip()).array();
    } catch(final NoSuchFileException t) { // Not yet calculated
    } catch(final Throwable t) { t.printStackTrace(); }
    System.out.println("Hash not found calculation");
    final byte[] hash = getFileHash(src, hashAlgo);
    view.write(name, ByteBuffer.wrap(hash));
    return hash;
} 
```

# c# - 使用任务计划程序托管包装器的计划任务

> ID：16050830
> 
> 赞同：4
> 
> 时间：2013-04-17T03:16:03.010
> 
> 标签：c#, scheduled-tasks

在过去的几天里，我做了很多关于检查计划任务是否存在，如果存在的搜索`<insert awesome here>`。基本上我有一个应用程序可以安装和卸载我们软件的计划任务。我现在需要做的是如果任务存在则选中一个复选框，如果不存在则取消选中。有一个使用的参考：

```
 ScheduledTasks st = new ScheduledTasks(server);
        string[] taskNames = st.GetTaskNames();
        List<string> jobs = new List<string>(taskNames); 
```

这对我不起作用，它表明找不到 ScheduledTasks 命名空间。我相信我已经安装了我需要的东西。“使用 Microsoft.Win32.TaskScheduler；”

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-17T10:33:24.687

我没有在这个包装器中看到这个 ScheduledTasks。

[TaskScheduler Managed Wrapper](http://taskscheduler.codeplex.com/)使用服务习惯用法，您需要拥有文件夹的上下文。

他们的[文档](http://taskscheduler.codeplex.com/wikipage?title=Examples&referringTitle=Documentation)中有很好的示例，包括用于[枚举所有任务](http://taskscheduler.codeplex.com/wikipage?title=Examples&referringTitle=Documentation#enum)的示例。

如果要查找特定任务：

```
var t = taskService.GetTask(scheduledTaskName); 
bool taskExists = t!=null;
if(taskExists) DoYourThing(); 
```

如果您的任务在文件夹中，则使用类似以下的内容

```
var t = taskService.GetTask(taskFolder + "\\" + scheduledTaskName); 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2015-08-17T10:36:32.087

要添加 Dove 的答案（我还没有代表发表评论），您还可以使用[TaskScheduler](http://www.nuget.org/packages/TaskScheduler/)的 FindTask 方法，如果您在 sub- 中启用搜索，则可以忽略指定具有名称的子文件夹通过将“True”作为第二个参数传递给文件夹；例如。

```
using ( TaskService sched = new TaskService() ) {
    var task = sched.FindTask( "UniqueTaskName", true );

    if ( task != null ) {
        ...
    }
} 
```

# mysql - mysql触发不起作用

> ID：16050831
> 
> 赞同：0
> 
> 时间：2013-04-17T03:16:09.323
> 
> 标签：mysql, triggers

我有一个名为 login 的表，其中包含 3 个字段 'id'、'token' 和 'status' 。id 是自动生成的。每当使用触发器插入该表时，我想将自动生成的“id”存储在字段“状态”中。我可以在触发器后使用插入来做到这一点吗？这是我第一次使用触发器，所以任何帮助将不胜感激. 我的代码在下面给出..

```
CREATE TRIGGER ins_masterid AFTER INSERT ON `login`
FOR EACH ROW BEGIN
SET NEW.status = NEW.id; 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-17T07:44:50.403

尝试这个

```
CREATE TRIGGER ins_masterid
BEFORE INSERT ON login 
FOR EACH ROW SET new.status = (select max(id)+1 from login); 
```

但是您应该手动更新第一行的状态。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-17T03:41:35.970

每当您想在触发器中使用“SET NEW.column”时，请注意您不能将其与 AFTER 操作一起使用，而必须在操作之前使用它。

```
delimiter |

CREATE TRIGGER ins_masterid BEFORE INSERT ON `login`
FOR EACH ROW BEGIN
SET NEW.status = NEW.id;
  END;
|

delimiter ; 
```

# c# - 多个文件上传并转换成html格式

> ID：16050832
> 
> 赞同：1
> 
> 时间：2013-04-17T03:16:12.823
> 
> 标签：c#, asp.net

我正在尝试上传多个文件，并`.html`通过将它们放入 for 循环同时将它们转换为格式。多个文件上传完成并存储到“上传的”文件中，但只有第一个文件被转换为`.htm`格式，而不是全部。

这是我的代码：

```
protected void btnUpload_Click(object sender, EventArgs e)
    {

        HttpFileCollection fileCollection = Request.Files;
        //Code to check if user has selected any file on the form
        if (!(fUpload1.HasFile))
        {
            lblMessage1.Text = "Please choose file to upload";
        }
        else
        {
            for (int i = 0; i < fileCollection.Count; i++)
            {
                try
                {
                    HttpPostedFile uploadfile = fileCollection[i];
                    string fileName = System.IO.Path.GetFileName(uploadfile.FileName);

                    //To check the file extension if it is word document or something else
                    //string strFileName = fUpload1.FileName;
                    string[] strSep = fileName.Split('.');
                    int arrLength = strSep.Length - 1;
                    string strExt = strSep[arrLength].ToString().ToUpper();

                    //Save the uploaded file to the folder
                    strPathToUpload = Server.MapPath("Uploaded2");

                    //Map-path to the folder where html to be saved
                    strPathToConvert = Server.MapPath("Aadi2");

                    object FileName = strPathToUpload + "\\" + fileName;
                    object FileToSave = strPathToConvert + "\\" + fileName + ".htm";

                    if (strExt.ToUpper().Equals("DOC") | strExt.ToUpper().Equals("DOCX"))
                    {
                        uploadfile.SaveAs(strPathToUpload + "\\" + fileName);
                        lblMessage1.Text = "File uploaded successfully";
                        //open the file internally in word. In the method all the parameters should be passed by object reference
                        objWord.Documents.Open(ref FileName, ref readOnly, ref missing, ref missing, ref missing, ref missing, ref missing, ref missing, ref missing, ref missing, ref isVisible, ref missing, ref missing, ref missing, ref missing, ref missing);
                        //Do the background activity
                        objWord.Visible = false;

                        Microsoft.Office.Interop.Word.Document oDoc = objWord.ActiveDocument;
                        oDoc.SaveAs(ref FileToSave, ref fltDocFormat, ref missing, ref missing, ref missing, ref missing, ref missing, ref missing, ref missing, ref missing, ref missing, ref missing, ref missing, ref missing, ref missing, ref missing);
                        lblMessage1.Text = fileName + " done";

                    }
                    else if (strExt.ToUpper().Equals("JPG"))
                    {
                        strPathToUpload = Server.MapPath("images");
                        uploadfile.SaveAs(strPathToUpload + "\\" + fUpload1.FileName);
                        lblMessage1.Text = "logo uploaded successfully";

                    }
                    else if (strExt.ToUpper().Equals("TXT"))
                    {
                        strPathToUpload = Server.MapPath("name");
                        fUpload1.SaveAs(strPathToUpload + "\\" + fUpload1.FileName);
                        lblMessage1.Text = "Website name uploaded successfully";

                    }
                    else if (strExt.ToUpper().Equals("MP4"))
                    {
                        strPathToUpload = Server.MapPath("video");
                        fUpload1.SaveAs(strPathToUpload + "\\" + fUpload1.FileName);
                        lblMessage1.Text = "Video uploaded successfully";

                    }

                    else
                    {
                        lblMessage1.Text = "Invalid file selected!";
                    }
                    //Close/quit word
                    objWord.Quit(ref missing, ref missing, ref missing);
                }
                catch (Exception ex)
                {
                    Response.Write(ex.Message);
                }
            }
        }
    } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-17T03:38:39.057

您不能使用 asp.net 中的一个文件上传控件上传多个文件。

在这里查看解决方案：[asp.net multiple uploads with multiple fileupload control](https://stackoverflow.com/questions/6806574/asp-net-multiple-uploads-with-multiple-fileupload-control) and [http://www.dotnetcurry.com/ShowArticle.aspx?ID=68](http://www.dotnetcurry.com/ShowArticle.aspx?ID=68)

或要上传多个文件，您可以在客户端生成多个上传控件或创建用户定义的控件。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-17T04:02:57.687

您正在使用 Interop 转换 DOC 文件 -**这是[根据 Microsoft NOT SUPPORTED in ASP.NET 等](http://support.microsoft.com/default.aspx?scid=kb;EN-US;q257757#kb2)！**

您可以使用其他库，例如[来自 Microsoft](http://www.microsoft.com/download/en/details.aspx?id=5124)（免费）或[Aspose.Words](http://www.aspose.com/.net/word-component.aspx)（商业）的 OpenXML，它们不依赖于 Office，并且在像您这样的服务器方案中完全受支持。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-18T03:47:11.870

如果上传的文件存在于目录中，则不要使用 httpfilecollection，而是使用 Directory.GetFiles。它将在您的情况下从目录中返回特定文件 *.doc 文件，然后将其转换为 .html。

```
string[] filePaths = Directory.GetFiles(@"d:\files\", "*.doc"); 
```

# verilog - 模块实例中的寄存器

> ID：16050834
> 
> 赞同：0
> 
> 时间：2013-04-17T03:16:24.187
> 
> 标签：verilog, synthesizer

`aF`并且`bF`是寄存器。所有其他信号都相应地声明。`P1,P2 . . P3`是推送信号。这合法吗？在我合成它之前，我有很多代码要写，但我觉得它可能无法正确合成。

```
//Example ,similar to my code

always@ (posedge clk or negedge reset)
begin
    if (~reset)
    begin
        aF  =   0;
        bF  =   0;

    end
    else
    begin
        aF  = {{{WIDTH-SIZE-1}{0}},a};
        bF  = {{{WIDTH-SIZE-1}{0}},b};
    end
end

rippleadder_16bit  S0(aF[15:0],bF[15:0],c0,result1[15:0],P0,P1,c1,clk);
rippleadder_16bit  S1(aF[31:16],bF[31:16],c1,result1[31:16],P1,P2,c2,clk);
rippleadder_16bit  S2(aF[47:32],bF[47:32],c2,result1[47:32],P2,P3,c3,clk);
rippleadder_16bit  S3(aF[63:48],bF[63:48],c3,result1[63:48],P3,P4,c4,clk);* 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-17T06:09:53.003

> 只是想知道我是否可以将 aF 和 bF 指示的寄存器文件中的值传递到模块rippleadder_16bit 而不将它们声明为电线？

是的，这样做很好。

# c++ - 使用 OpenAL 和 C++ 同步音频和视频播放

> ID：16050839
> 
> 赞同：2
> 
> 时间：2013-04-17T03:16:47.800
> 
> 标签：c++, openal

我正在尝试用 C++ 创建一个网络摄像头聊天程序，虽然我已经能够获取要发送和播放的图像，但我在对音频做同样的事情时遇到了麻烦：音频滞后并且很快就消失了与视频同步，即使我只是自己播放。

我发现[这个](https://stackoverflow.com/a/5518320/2288890)答案和示例代码非常有用。

我可以对此代码进行任何修改以使其几乎没有延迟，还是 OpenAL 不适合这个？我正在使用 Windows，但我计划稍后制作一个 linux 版本。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-02-19T12:54:44.233

从链接的代码：

```
ALCdevice* inputDevice = alcCaptureOpenDevice(NULL,FREQ,AL_FORMAT_MONO16,FREQ/2); 
```

尝试使用更大的缓冲区：

```
ALCdevice* inputDevice = alcCaptureOpenDevice(NULL,FREQ,AL_FORMAT_MONO16,FREQ*4); 
```

* * *

投票[非常激进](http://en.wikipedia.org/wiki/Spinlock)。尝试在循环中休眠：

```
while (!done) {
    ...
} 
```

至：

```
int sleepSeconds = 1;
while (!done) {
    ...
    Sleep(sleepSeconds/10) //windows, miliseconds
    //sleep(sleepSeconds) //linux, seconds
} 
```

# ios - iPad Opengl ES 程序在模拟器上运行良好，但在设备上运行良好

> ID：16050840
> 
> 赞同：1
> 
> 时间：2013-04-17T03:16:49.007
> 
> 标签：ios, ipad, opengl-es-2.0, glsles

对于该设备，我所有的着色器都可以正常加载，除了一个。对于这个着色器程序，当我调用 glGetProgramInfoLog(...); 时，我得到“片段程序无法使用当前上下文状态编译”错误，然后是顶点着色器的类似错误。

顶点着色器：

```
#version 100

uniform mat4 Projection;
uniform mat4 Modelview;
uniform mat4 Rotation;
uniform vec3 Translation;

uniform vec4 LightDirection;
uniform vec4 MaterialDiffuse;
uniform float MaterialShininess;

attribute vec3 position;
attribute vec3 normal;

varying vec4 color;
varying float specularCoefficient;

void main() {
    vec3 _normal = normalize(mat3(Modelview[0].xyz, Modelview[1].xyz, Modelview[2].xyz)*normal); 
    // There is an easier way to do the above using typecast, but is apparently broken

    float NdotL = dot(-_normal, normalize(vec3(LightDirection)));
    if(NdotL < 0.0){
        NdotL = 0.0;
    }
    color = NdotL * MaterialDiffuse;
    float NdotO = dot(-_normal, vec3(0.0, 0.0, -1.0));
    if(NdotO < 0.0){
        NdotO = 0.0;
    }
    specularCoefficient = pow(NdotO, MaterialShininess);

    vec3 p = position + Translation;
    gl_Position = Projection*Modelview*vec4(p, 1.0);
} 
```

片段着色器：

```
#version 100
precision mediump float;

varying vec4 color;
varying float specularCoefficient;
uniform vec4 MaterialSpecular;

void main(){
    gl_FragColor = vec4((color + specularCoefficient*MaterialSpecular).rgb, 1.0);
} 
```

我不确定发生了什么，特别是因为我有一个与上面完全相同的类似程序，并添加了纹理坐标。此外，当我使用 glGetShaderiv(theShader, GL_COMPILE_STATUS, &result) 链接程序时，我检查了每个着色器的编译状态，它们都检查得很好。有任何想法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-17T17:19:29.253

换行

```
gl_FragColor = vec4((color + specularCoefficient*MaterialSpecular).rgb, 1.0); 
```

在片段着色器中

```
gl_FragColor = vec4((1.0*color + specularCoefficient*MaterialSpecular).rgb, 1.0); 
```

解决问题。我怀疑它与与可变颜色相关的精度有关，以便将行重新排序为

```
gl_FragColor = vec4((MaterialSpecular + specularCoefficient*color).rgb, 1.0); 
```

也可以。

# google-glass - 谷歌眼镜可以识别条形码并让您的设备订阅它们吗？

> ID：16050841
> 
> 赞同：4
> 
> 时间：2013-04-17T03:16:49.307
> 
> 标签：google-glass, google-mirror-api

有没有办法让玻璃识别条形码并让您的设备订阅它们？到目前为止，我只看到了位置选项。如果不是，您可以订阅一张照片以确定它是否是条形码吗？或者您的程序是否已添加到可用于拍摄照片的菜单选项中？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-17T21:47:26.847

与当前版本的 Mirror API 最接近的是共享[Contact](https://developers.google.com/glass/v1/reference/contacts)。

看一下[Add A Cat to That 示例用例](https://developers.google.com/glass/stories#add_a_cat_to_that)。它描述了一个场景，其中用户与代表 Glassware 的联系人共享一张照片，并在其中添加一张猫的照片。您可以使用相同的流程下载照片、识别条形码、提取编码信息并在您的 Glassware 中执行操作。

这是此图像处理流程的序列图：

![照片处理时序图](https://i.stack.imgur.com/g2dZP.png)

请注意，在这种情况下，用户必须明确共享要扫描条形码的每张照片。如果您知道我们如何扩展此 API 以支持此功能，请将其提交到官方[问题跟踪器](https://code.google.com/p/google-glass-api/issues/list)中。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-17T21:42:52.540

[通过将您的“条形码阅读器”注册为联系人](https://developers.google.com/glass/contacts)并添加[订阅](https://developers.google.com/glass/subscriptions)，应该可以使用 API 执行此类操作

这将允许用户与您共享照片，这意味着您可以在服务器上检索图像并检查是否有条形码，对其进行解码并根据它执行一些操作。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-17T17:10:19.603

Glass 客户端和 API 尚不支持此功能。随时在我们的[问题跟踪器](https://code.google.com/p/google-glass-api/issues)中提出功能请求。

# c - 如何使用gdb在c中观察字符串

> ID：16050846
> 
> 赞同：3
> 
> 时间：2013-04-17T03:17:05.677
> 
> 标签：c, string, gdb, watch

作为主题，我希望我可以在 c 中观看一个字符串，例如下面。
我希望我只能在
HELLO->GOOD、GOOD->HELLO 时停下来，我应该怎么做？

`char s[10];`
`strcpy(s,"HELLO");`
`strcpy(s,"HELLO");`
`strcpy(s,"HELLO");`
`strcpy(s,"GOOD");`
`strcpy(s,"GOOD");`
`strcpy(s,"GOOD");`
`strcpy(s,"HELLO");`
`strcpy(s,"HELLO");`
`strcpy(s,"HELLO");`

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-05-07T14:15:43.587

[这个问题](https://stackoverflow.com/questions/1651682/how-to-watch-a-c-dynamic-array-using-gdb)的答案可能会对你有所帮助。

我无法使用该语法设置*观察点*（这将是完美的解决方案），但该`display`命令是一个非常好的选择。每次执行中断时，它都会打印其表达式的结果。

要使其适用于您的代码，请在该`char s[10];`行设置一个断点并找出`s`数组的地址（使用`p s`）。然后，设置一个显示`display *(char *)0x00000000@10`（其中`0x00000000`是数组的地址，后面的数字`@`是数组的大小）。然后您可以在程序的不同点设置断点，以便每次缩小搜索空间。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2017-02-27T09:44:07.353

作为一种解决方法，您可以为表达式设置监视

```
watch s[0]+s[1]+s[2]+s[3] 
```

当字符串中的前四个字符中的任何一个更改时将停止

* * *

## 回答 #3

> 赞同：-2
> 
> 时间：2013-04-17T04:56:16.383

您可以通过使用 -g 编译 tha 程序来使用 gdb，然后创建一个断点，然后使用 n 查看调试......但经常使用 printf 语句，以便您可以看到实际发生的情况......

# sql - 按时间范围选择不同的用户组

> ID：16050847
> 
> 赞同：3
> 
> 时间：2013-04-17T03:17:10.030
> 
> 标签：sql, postgresql, date, correlated-subquery, window-functions

我有一张包含以下信息的表格

```
 |date | user_id | week_beg | month_beg| 
```

使用测试值创建表的 SQL：

```
CREATE TABLE uniques
(
  date DATE,
  user_id INT,
  week_beg DATE,
  month_beg DATE
)
INSERT INTO uniques VALUES ('2013-01-01', 1, '2012-12-30', '2013-01-01')
INSERT INTO uniques VALUES ('2013-01-03', 3, '2012-12-30', '2013-01-01')
INSERT INTO uniques VALUES ('2013-01-06', 4, '2013-01-06', '2013-01-01')
INSERT INTO uniques VALUES ('2013-01-07', 4, '2013-01-06', '2013-01-01') 
```

输入表：

```
 | date       | user_id     | week_beg   | month_beg  |    
 | 2013-01-01 | 1           | 2012-12-30 | 2013-01-01 |    
 | 2013-01-03 | 3           | 2012-12-30 | 2013-01-01 |    
 | 2013-01-06 | 4           | 2013-01-06 | 2013-01-01 |    
 | 2013-01-07 | 4           | 2013-01-06 | 2013-01-01 | 
```

输出表：

```
 | date       | time_series | cnt        |                 
 | 2013-01-01 | D           | 1          |                 
 | 2013-01-01 | W           | 1          |                 
 | 2013-01-01 | M           | 1          |                 
 | 2013-01-03 | D           | 1          |                 
 | 2013-01-03 | W           | 2          |                 
 | 2013-01-03 | M           | 2          |                 
 | 2013-01-06 | D           | 1          |                 
 | 2013-01-06 | W           | 1          |                 
 | 2013-01-06 | M           | 3          |                 
 | 2013-01-07 | D           | 1          |                 
 | 2013-01-07 | W           | 1          |                 
 | 2013-01-07 | M           | 3          | 
```

我想计算一个日期的不同 user_id 的数量：

1.  对于那个日期

2.  截至该日期的那一周（截至日期）

3.  截至该日期的月份 (Month to date)

1 容易计算。对于 2 和 3，我正在尝试使用这样的查询：

```
SELECT
  date,
  'W' AS "time_series",
  (COUNT DISTINCT user_id) COUNT (user_id) OVER (PARTITION BY week_beg) AS "cnt"
  FROM user_subtitles

SELECT
  date,
  'M' AS "time_series",
  (COUNT DISTINCT user_id) COUNT (user_id) OVER (PARTITION BY month_beg) AS "cnt"
  FROM user_subtitles 
```

Postgres 不允许用于 DISTINCT 计算的窗口函数，因此这种方法不起作用。

我也尝试过 GROUP BY 方法，但它不起作用，因为它给了我整周/月的数字。

解决这个问题的最佳方法是什么？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-17T05:20:15.963

### 计算*所有*行

```
SELECT date, '1_D' AS time_series,  count(DISTINCT user_id) AS cnt
FROM   uniques
GROUP  BY 1

UNION  ALL
SELECT DISTINCT ON (1)
       date, '2_W', count(*) OVER (PARTITION BY week_beg ORDER BY date)
FROM   uniques

UNION  ALL
SELECT DISTINCT ON (1)
       date, '3_M', count(*) OVER (PARTITION BY month_beg ORDER BY date)
FROM   uniques
ORDER  BY 1, time_series 
```

*   您的列`week_beg`和`month_beg`是 100 % 冗余的，可以很容易地分别替换为 `date_trunc('week', date + 1) - 1`和`date_trunc('month', date)`。

*   您的一周似乎从星期日开始（减一），因此`+ 1 .. - 1`.

*   在子句中使用的[窗口函数](http://www.postgresql.org/docs/current/interactive/sql-expressions.html#SYNTAX-WINDOW-FUNCTIONS)的默认框架是. 这正是你所需要的。`ORDER BY``OVER``RANGE BETWEEN UNBOUNDED PRECEDING AND CURRENT ROW`

*   使用`UNION ALL`，不使用`UNION`。

*   您对`time_series`(D, W, M) 的不幸选择排序不好，我重命名以使最终`ORDER BY`更容易。

*   此查询每天可以处理多行。计数包括一天的所有同龄人。

*   更多关于`DISTINCT ON`：

    *   [在每个 GROUP BY 组中选择第一行？](https://stackoverflow.com/questions/3800551/select-first-row-in-each-group-by-group/7630564#7630564)

### 每天有不同的用户

要每天只计算每个用户一次，请使用[CTE](http://www.postgresql.org/docs/current/interactive/queries-with.html)`DISTINCT ON`：

```
WITH x AS (SELECT DISTINCT ON (1,2) date, user_id FROM uniques)
SELECT date, '1_D' AS time_series,  count(user_id) AS cnt
FROM   x
GROUP  BY 1

UNION ALL
SELECT DISTINCT ON (1)
       date, '2_W'
      ,count(*) OVER (PARTITION BY (date_trunc('week', date + 1)::date - 1)
                      ORDER BY date)
FROM   x

UNION ALL
SELECT DISTINCT ON (1)
       date, '3_M'
      ,count(*) OVER (PARTITION BY date_trunc('month', date) ORDER BY date)
FROM   x
ORDER BY 1, 2 
```

### 动态时间段内的 DISTINCT 用户

您总是可以求助于**相关子查询**。大桌子往往很慢！
基于之前的查询：

```
WITH du AS (SELECT date, user_id FROM uniques GROUP BY 1,2)
    ,d  AS (
    SELECT date
          ,(date_trunc('week', date + 1)::date - 1) AS week_beg
          ,date_trunc('month', date)::date AS month_beg
    FROM   uniques
    GROUP  BY 1
    )
SELECT date, '1_D' AS time_series,  count(user_id) AS cnt
FROM   du
GROUP  BY 1

UNION ALL
SELECT date, '2_W', (SELECT count(DISTINCT user_id) FROM du
                     WHERE  du.date BETWEEN d.week_beg AND d.date )
FROM   d
GROUP  BY date, week_beg

UNION ALL
SELECT date, '3_M', (SELECT count(DISTINCT user_id) FROM du
                     WHERE  du.date BETWEEN d.month_beg AND d.date)
FROM   d
GROUP  BY date, month_beg
ORDER  BY 1,2; 
```

[**SQL Fiddle**](http://sqlfiddle.com/#!12/77b31/4)适用于所有三种解决方案。

### 更快`dense_rank()`

[@Clodoaldo](https://stackoverflow.com/a/16061909/939860)提出了一项重大改进：使用[窗口函数`dense_rank()`](http://www.postgresql.org/docs/current/interactive/functions-window.html)。这是优化版本的另一个想法。立即排除每日重复项应该更快。性能增益随着每天的行数而增长。

建立在*简化和清理的数据模型*上 - 没有冗余列 -`day`作为列名而不是`date`

`date`是[标准 SQL 中的保留字](http://www.postgresql.org/docs/current/interactive/sql-keywords-appendix.html)和 PostgreSQL 中的基本类型名称，不应用作标识符。

```
CREATE TABLE uniques(
   day date     -- instead of "date"
  ,user_id int
); 
```

改进的查询：

```
WITH du AS (
   SELECT DISTINCT ON (1, 2)
          day, user_id 
         ,date_trunc('week',  day + 1)::date - 1 AS week_beg
         ,date_trunc('month', day)::date         AS month_beg
   FROM   uniques
   )
SELECT day, count(user_id) AS d, max(w) AS w, max(m) AS m
FROM  (
    SELECT user_id, day
          ,dense_rank() OVER(PARTITION BY week_beg  ORDER BY user_id) AS w
          ,dense_rank() OVER(PARTITION BY month_beg ORDER BY user_id) AS m
    FROM   du
    ) s
GROUP  BY day
ORDER  BY day; 
```

[**SQL Fiddle**](http://sqlfiddle.com/#!12/75b42/3)展示了 4 个更快变体的性能。这取决于您的数据分布，这对您来说是最快的。
所有这些都大约是相关子查询版本的 10 倍（这对于相关子查询来说还不错）。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-17T13:49:54.487

没有相关的子查询。[SQL小提琴](http://www.sqlfiddle.com/#!12/02926/2)

```
with u as (
    select
        "date", user_id,
        date_trunc('week', "date" + 1)::date - 1 week_beg,
        date_trunc('month', "date")::date month_beg
    from uniques
)
select
    "date", count(distinct user_id) D,
    max(week_dr) W, max(month_dr) M
from (
    select
        user_id, "date",
        dense_rank() over(partition by week_beg order by user_id) week_dr,
        dense_rank() over(partition by month_beg order by user_id) month_dr
    from u
    ) s
group by "date"
order by "date" 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-17T04:08:37.030

尝试

```
SELECT
  * 
FROM 
(
  SELECT dates, count(user_id), 'D' as timesereis FROM users_data GROUP BY dates
  UNION
  SELECT max(dates), count(user_id), 'W' FROM users_data GROUP BY date_part('year',dates)+date_part('week',dates)
  UNION
  SELECT max(dates), count(user_id), 'M' FROM users_data GROUP BY date_part('year',dates)+date_part('week',dates)
) tEMP order by dates, timesereis 
```

[**SQLFIDDLE**](http://sqlfiddle.com/#!1/6b3f7/19)

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2013-04-17T04:05:22.817

尝试这样的查询

```
SELECT count(distinct user_id), date_format(date, '%Y-%m-%d') as date_period
FROM uniques
GROUP By date_period 
```

# android - Appinventor FTP 到 Web 服务器

> ID：16050848
> 
> 赞同：0
> 
> 时间：2013-04-17T03:17:13.210
> 
> 标签：android, app-inventor

我正在尝试在 AppInventor 中创建一个 FTP 页面，以便可以将文件从 Android 移动设备上传和下载到我的 Web 服务器。

浏览我读过的关于 Appinventor 不支持它的论坛，但它可以通过您可以通过 ActivityStarter 打开的第 3 方应用程序来完成。这是真的吗？这真的是唯一的方法吗？

我只是再问一次，因为我已经阅读了一些过时的帖子。如果有人知道某个解决方案（直接或间接），您的提示和建议将不胜感激！

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-17T13:11:27.383

如前所述，有以下解决方案可以将文件上传/下载到 Web 服务器：[1](https://groups.google.com/d/msg/ai4a/qywgqA9S-ow/fm31kaLlWbYJ)
）[如何上传文件](http://puravidaapps.com/postfile.php)
2）[如何下载文件](http://puravidaapps.com/filedownload.php)

# c# - 为什么我不能将对象列表分配给它实现的接口的 IList

> ID：16050849
> 
> 赞同：0
> 
> 时间：2013-04-17T03:17:32.167
> 
> 标签：c#, covariance

```
public interface IRandom {}    
public class Random: IRandom {} 
```

我可以分配：

```
IRandom random = new Random(); 
```

但是当我尝试这个时：

```
IList<IRandom> randomList = new List<Random>(); 
```

我明白了`cannot convert List<Random> to target type IList<IRandom>`

有人可以解释为什么不吗？

基本上我试图有一个列表，我可以分配另一个列表，其中包含从`IRandom`.

# java - 仅将文件中的特定文本添加到数组列表

> ID：16050851
> 
> 赞同：0
> 
> 时间：2013-04-17T03:17:59.970
> 
> 标签：java, arraylist, text-files

我希望我能在这里得到一些帮助。

这是我文件中的文本：

```
Name: John
Name: Peter
Name: Sarah
Place: New York
Place: London
Place: Hongkong 
```

例如，如何仅在以下数组列表中添加文本文件中的名称？到目前为止，我已经......它添加了数组列表中的所有内容，包括地点！

```
private ArrayList<Name> names = new ArrayList<>();

public void load(String fileName) throws FileNotFoundException {
    String text;
    try {
         BufferedReader input = new BufferedReader(new FileReader(fileName));

        while((text = input.readLine()) != null){
            text = text.replaceAll("Name:", "");
            names.add(new Name(text));
        }
    }
    catch (Exception e) {//Catch exception if any
        System.err.println("Error: " + e.getMessage());
    }
} 
```

最后，它应该只添加 Name ArrayLIst 中的名称，例如 John、Peter、Sarah。

我将不胜感激任何建议，谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-17T03:21:06.867

尝试拆分分隔符上的每一行`:`，例如：

```
String[] parts = text.split(":");
String part1 = parts[0]; // Name
String part2 = parts[1]; // John 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-17T03:25:01.147

添加一个 if 语句并使用正则表达式查找带有“Place”的字符串并将其剔除。这是最简单的方法。

但这是另一个简单的解决方案。您还可以添加更多单词以注意在 if 中使用 OR 运算符。

```
while((text = input.readLine()) != null){
       //gets rid of places 
if !(a.contains("Place")){
           text = text.replaceAll("Name:", "");
           names.add(new Name(text));
         }
    } 
```

# javascript - 打开和关闭fancybox时更改url

> ID：16050852
> 
> 赞同：3
> 
> 时间：2013-04-17T03:18:15.497
> 
> 标签：javascript, jquery, fancybox

我将此代码与fancybox 1.3.7 一起使用。当 fancybox 打开 url 更改为相应的 div (/page#div-id) 时，当它关闭时它应该返回到 /page 但注释功能不起作用。我必须使用一个临时值，如下所示。我怎样才能解决这个问题？

```
window.onload = function(){
    function showfb(id) {
        if (/^#.*/.test(id)) {
            $(id).show();
            $.fancybox({
                href: id,
                type:'inline',
                position: 'center',
                'transitionIn': 'fade', // elastic, none, ease, fade
                'transitionOut': 'fade',
                onClosed: function(){
                    //$(id).hide();
                    window.location.hash = "_"; // temporary
                }
            });
        }
    }
    showfb(location.hash);
    $('a.profile').click(function(e){
            showfb($(this).attr('href'));
    });
}; 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-17T03:29:27.610

Try replacing the function with the below:

```
window.location.hash = ""; 
```

# asp.net - 如何在asp.net中动态制作按钮，但来自sharepoint列表的数据库

> ID：16050856
> 
> 赞同：0
> 
> 时间：2013-04-17T03:18:51.447
> 
> 标签：asp.net, sharepoint-list

我想问，我有表格测验当用户**单击下一步按钮**时，它将出现下一个问题和下一个选择，但问题和来自共享点列表的选择，但我在 asp.net 工作

你能帮助我吗？谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-17T13:07:28.740

您可以使用 caml 查询来查询 SharePoint 列表中的问题和答案。只需查询下一个问题 ID 或类似的东西。获取 SPListitem 并从中获取问题和答案。

像这样

```
 SPQuery query = new SPQuery();
        query.Query = "
        <Where>
            <Or>
                <Eq>
                    <FieldRef Name=\"ID\" />
                    <Value Type=\"Number\">1</Value>
                </Eq>
            </Or>
        </Where>";
      SPListItemCollection item = questionList.getItems(query);

// Get the question and the answers from the item and show them on screen. 
```

# java - 任何java包来绘制简单的几何形状？

> ID：16050858
> 
> 赞同：2
> 
> 时间：2013-04-17T03:19:07.230
> 
> 标签：java, image, draw

有没有人对任何库/包有任何建议来绘制简单的几何图形，例如三角形、正方形？它可以保存为 png 格式。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-04-17T05:18:25.847

此源使用`Graphics2D`Java 2D API 来绘制一些简单的彩色形状。

作为参考，这里是生成的 32x32 图像。

![在此处输入图像描述](https://i.stack.imgur.com/gJmeJ.png)![在此处输入图像描述](https://i.stack.imgur.com/T5uTa.png)![在此处输入图像描述](https://i.stack.imgur.com/wCF8S.png)![在此处输入图像描述](https://i.stack.imgur.com/IHARa.png)
![在此处输入图像描述](https://i.stack.imgur.com/L5DGx.png)![在此处输入图像描述](https://i.stack.imgur.com/gYxHm.png)![在此处输入图像描述](https://i.stack.imgur.com/5v2TX.png)![在此处输入图像描述](https://i.stack.imgur.com/8BGfi.png)
![在此处输入图像描述](https://i.stack.imgur.com/in9g1.png)![在此处输入图像描述](https://i.stack.imgur.com/1lgtq.png)![在此处输入图像描述](https://i.stack.imgur.com/F0JHK.png)![在此处输入图像描述](https://i.stack.imgur.com/6ZXhi.png)
![在此处输入图像描述](https://i.stack.imgur.com/IucNt.png)![在此处输入图像描述](https://i.stack.imgur.com/yBOv3.png)![在此处输入图像描述](https://i.stack.imgur.com/4EVv1.png)![在此处输入图像描述](https://i.stack.imgur.com/Lqkl0.png)
![在此处输入图像描述](https://i.stack.imgur.com/yoKxT.png)![在此处输入图像描述](https://i.stack.imgur.com/zJ8am.png)![在此处输入图像描述](https://i.stack.imgur.com/xj49g.png)![在此处输入图像描述](https://i.stack.imgur.com/c67nr.png)

```
import java.awt.*;
import java.awt.geom.Ellipse2D;
import java.awt.geom.GeneralPath;
import java.awt.image.BufferedImage;
import java.io.File;
import javax.imageio.ImageIO;
import javax.swing.*;

public class SimpleImages {

    public static BufferedImage getColoredShapeImage(
            int size, Shape shape, Color color) {
        BufferedImage bi = new BufferedImage(
                size, size, BufferedImage.TYPE_INT_ARGB);

        Graphics2D g = bi.createGraphics();
        g.setRenderingHint(
                RenderingHints.KEY_ANTIALIASING,
                RenderingHints.VALUE_ANTIALIAS_ON);
        g.setColor(color);
        g.fill(shape);
        g.dispose();

        return bi;
    }

    public static Shape getPointedShape(int points, int radius) {
        double angle = Math.PI * 2 / points;

        GeneralPath p = new GeneralPath();
        for (int ii = 0; ii < points; ii++) {
            double a = angle * ii;

            double x = (Math.cos(a) * radius) + radius;
            double y = (Math.sin(a) * radius) + radius;
            if (ii == 0) {
                p.moveTo(x, y);
            } else {
                p.lineTo(x, y);
            }
        }
        p.closePath();

        return p;
    }

    public static void main(String[] args) throws Exception {
        Color[] colors = {
            Color.RED,
            Color.GREEN,
            Color.BLUE,
            Color.YELLOW
        };
        File f = new File(System.getProperty("user.home"));
        f = new File(f, "ShapedImages");
        f.mkdirs();
        for (Color c : colors) {
            for (int s = 15; s < 31; s += 15) {
                Shape sh = new Ellipse2D.Double(1, 1, 2 * s, 2 * s);
                BufferedImage i = getColoredShapeImage((2 * s) + 2, sh, c);
                String name = "Image"
                        + "0point-"
                        + s + "px-"
                        + c.getRed() + "r-"
                        + c.getGreen() + "g-"
                        + c.getBlue() + "b"
                        + ".png";
                File t = new File(f, name);
                ImageIO.write(i, "png", t);
                for (int ii = 3; ii < 7; ii++) {
                    sh = getPointedShape(ii, s);
                    i = getColoredShapeImage((2 * s) + 2, sh, c);
                    name = "Image"
                            + ii + "point-"
                            + s + "px-"
                            + c.getRed() + "r-"
                            + c.getGreen() + "g-"
                            + c.getBlue() + "b"
                            + ".png";
                    t = new File(f, name);
                    ImageIO.write(i, "png", t);
                }
            }
        }
        Desktop.getDesktop().open(f);
    }
} 
```

## 界面`GeometricShapeImages`

```
/**
 * Interface for accessing the images seen in
 * http://stackoverflow.com/a/16052085/418556
 */
interface GeometricShapeImages {

    public static final int BLUE = 0;
    public static final int GREEN = 1;
    public static final int RED = 2;
    public static final int YELLOW = 3;

    public static final int CIRCLE = 0;
    public static final int TRIANGLE = 1;
    public static final int DIAMOND = 2;
    public static final int PENTAGON = 3;
    public static final int HEXAGON = 4;

    /**
     * Stores a String representation of the URL for the colored shape image.
     * Can be accessed like GeometricShapeImages.URL[DIAMOND][BLUE]
     */
    public static final String[][] URL = {
        { // CIRCLE
            "http://i.stack.imgur.com/gJmeJ.png", // BLUE
            "http://i.stack.imgur.com/T5uTa.png", // GREEN
            "http://i.stack.imgur.com/wCF8S.png", // RED
            "http://i.stack.imgur.com/IHARa.png" // YELLOW
        }, // END: CIRCLE
        { // TRIANGLE
            "http://i.stack.imgur.com/L5DGx.png", // BLUE
            "http://i.stack.imgur.com/gYxHm.png", // GREEN
            "http://i.stack.imgur.com/5v2TX.png", // RED
            "http://i.stack.imgur.com/8BGfi.png" // YELLOW
        }, // END: TRIANGLE
        { // DIAMOND
            "http://i.stack.imgur.com/in9g1.png", // BLUE
            "http://i.stack.imgur.com/1lgtq.png", // GREEN
            "http://i.stack.imgur.com/F0JHK.png", // RED
            "http://i.stack.imgur.com/6ZXhi.png" // YELLOW
        }, // END: DIAMOND
        { // PENTAGON
            "http://i.stack.imgur.com/IucNt.png", // BLUE
            "http://i.stack.imgur.com/yBOv3.png", // GREEN
            "http://i.stack.imgur.com/4EVv1.png", // RED
            "http://i.stack.imgur.com/Lqkl0.png" // YELLOW
        }, // END: PENTAGON
        { // HEXAGON
            "http://i.stack.imgur.com/yoKxT.png", // BLUE
            "http://i.stack.imgur.com/zJ8am.png", // GREEN
            "http://i.stack.imgur.com/xj49g.png", // RED
            "http://i.stack.imgur.com/c67nr.png" // YELLOW
        } // END: HEXAGON
    };
} 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-04-17T03:24:11.973

您需要查看 Java 2D API： [http ://docs.oracle.com/javase/tutorial/2d/overview/index.html](http://docs.oracle.com/javase/tutorial/2d/overview/index.html)

# svn - Subversion：忽略一些文件

> ID：16050859
> 
> 赞同：0
> 
> 时间：2013-04-17T03:19:07.260
> 
> 标签：svn

我有带有颠覆的代码签入。现在我也将配置文件放入存储库中。

我想避免使用“svn up”命令更新配置文件。我将如何设置 SVN 属性？

提前致谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-17T19:32:19.897

该`svn:ignore`属性用于忽略*将文件添加*到存储库中。而且由于它们不会被添加，因此当您执行`svn update`. 但是，一旦您将文件添加到存储库中，`svn:ignore`就*不再*适用，正如您所说的那样。

当您希望在存储库中保留用户特定文件的基本版本或模板版本时，一种常见的做法是将其存储在派生名称下并将其添加到存储库中，例如，而不是`app.config`您可能命名它`app.config.template`。*对该*文件的更新（您只会偶尔且始终明确地执行此操作）然后将由`svn update`. 然后，每个用户从该模板开始，并将其在本地重命名为“真实”名称`app.config`。然后，每个用户都有责任合并模板中可能发生的任何更改（如果它们发生时）（同样，这通常是不常见的）。

（请确保您的真实姓名`app.config`——在本例中——包含在`svn:ignore`其包含目录的属性中！）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-17T03:31:21.767

我推荐 TortoiseSvn，除非你真的更喜欢 cmd 行。安装后，您可以连接到您的存储库并进行所需的所有属性更改。

# java - 从 struts-rest-plugin 请求时如何排除属性？

> ID：16050860
> 
> 赞同：2
> 
> 时间：2013-04-17T03:19:09.997
> 
> 标签：java, xml, json, rest, struts2

我正在研究 struts-rest-plugin`index`方法以返回我的`Fruit`对象​​列表`xml`或`json`格式。它真的很好用。

型号类：

```
class Fruit {

    private String name;
    private double price;

    // constructor

    // getter/setter

    // equals and hash method

} 
```

我想在 xml/json 输出中从我的模型对象中排除一些属性，比如价格。我知道我可以用包装类来包装它，但似乎有很多事情要做。

我试过的：

```
@Results(@Result(name = "success", type = "redirectAction", params = {
        "actionName", "fruit"}))
public class FruitController extends ActionSupport implements
        ModelDriven<Object> {

    private int id;
    private Fruit model = new Fruit();
    private List<Fruit> list;
    private FruitService fruitService = new FruitService();

    public void setId(int id) {
        this.id = id;
        if (id > 0) {
            this.model = fruitService.get(this.id);
        }
    }

    public int getId() {
        return this.id;
    }

    public HttpHeaders index() {
        list = fruitService.getAll();
        return new DefaultHttpHeaders("index").disableCaching();
    }

    @Override
    public Object getModel() {
        return (list != null ? list : model);
    }

    ....

} 
```

struts.xml

```
...
<constant name="struts.convention.action.suffix" value="Controller"/>
<constant name="struts.convention.action.mapAllMatches" value="true"/>
<constant name="struts.convention.default.parent.package" value="rest-default"/> 
<constant name="struts.convention.package.locators" value="controller" />
...
<interceptor-ref name="params">
                <param name="excludeParams">price</param>
</interceptor-ref>
... 
```

它不工作。请帮忙。谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-08-27T19:10:35.413

您应该使用 XStream 注释从结果中省略必填字段

# python - 数组输出中的 Pymongo dict 元素

> ID：16050865
> 
> 赞同：0
> 
> 时间：2013-04-17T03:19:52.790
> 
> 标签：python, mongodb, python-2.7, pymongo, bottle

我有一个包含以下信息的数据库：

```
{"_id":1, "test":6,"foo":[{"mom":5,"dad":10},{"mom":7, "dad":12}]}
{"_id":2, "test":9,"foo":[{"mom":6,"dad":20},{"mom":7, "dad":15}]}
{"_id":3, "test":10, "foo":[{"mom":10,"dad":13},{"mom":2, "dad":19}]} 
```

我用 mom=7 从 db 查询 mongo：

```
cursor = foo.find({"foo.mom":7},{"foo.$":1,"_id":0, "test":1})
for key in cursor:
    print key 
```

它打印我这个：

```
{"test":6,"foo":[{"mom":7, "dad":12}]}
{"test":9,"foo":[{"mom":7, "dad":15}]} 
```

如果我使用

```
print key['test'] 
```

我会得到只有“测试”的结果

所以，问题是：我怎样才能得到这样的结果：

```
{"test":6,"foo":[{"dad":12}]}
{"test":9,"foo":[{"dad":15}]} 
```

我试着用

```
print key["foo.dad"] 
```

但它只返回一个错误

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-17T05:22:16.070

由于“foo”的值保存在数组中，因此您需要使用 key['foo'][0]['dad'] 从结果中打印 'dad' 的值。

我使用的代码是这样的：

```
cursor = foo.find({"foo.mom":7},{"foo.$":1,"_id":0, "test":1})
for key in cursor:
    print key
    print key['test']
    print key['foo'][0]['dad'] 
```

我得到的结果是这样的：

```
{u'test': 6.0, u'foo': [{u'dad': 12.0, u'mom': 7.0}]}
6.0
12.0
{u'test': 9.0, u'foo': [{u'dad': 15.0, u'mom': 7.0}]}
9.0
15.0 
```

如果您想获得没有“妈妈”字段的结果：

```
{"test":6,"foo":[{"dad":12}]}
{"test":9,"foo":[{"dad":15}]} 
```

您可以使用聚合框架：

```
db.foo.aggregate([
    { $unwind : "$foo" },
    { $match : { "foo.mom" : 7 }}, 
    { $project : { 
          _id : 0,
          test : 1,
          "foo.dad" : "$foo.dad"
    }}, 
]) 
```

结果是：

```
{
    "result" : [
        {
            "test" : 6,
            "foo" : {
                "dad" : 12
            }
        },
        {
            "test" : 9,
            "foo" : {
                "dad" : 15
            }
        }
    ],
    "ok" : 1
} 
```

# matlab - 在 Matlab 中使用矩形。使用总和（）

> ID：16050866
> 
> 赞同：0
> 
> 时间：2013-04-17T03:19:52.897
> 
> 标签：matlab, sum, rectangles

我在图像上执行了 rgb2gray 并对图像进行了 sobel 边缘检测。然后做了

```
faceEdges = faceNoNoise(:,:) > 50;        %binary threshold 
```

所以它将图像的轮廓（一张脸的图片）设置为黑白。值 1 是白色像素，0 是黑色像素。有人说我可以用这个

```
mouthsquare = rectangle('position',[recX-mouthBoxBuffer, recY-mouthBoxBuffer, recXDiff*2+mouthBoxBuffer/2, recYDiff*2+mouthBoxBuffer/2],...   % see the change in coordinates
      'edgecolor','r');
numWhite = sum(sum(mouthsquare)); 
```

他说使用两个 sum()，因为它获取矩形内包含的像素的列和行。numWhite 总是返回 178 和一些十进制数。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-17T03:47:07.143

如果您有一个 2D 矩阵`M`（这是 - 例如 - 一个图像），计算有多少元素具有值 1 的方法是：

```
count_1 = sum(M(:)==1) 
```

或者

```
count_1 = sum(reshape(M,1,[])==1) 
```

如果目标值不**完全是**1，但有一个 Δ 阈值，比如说 +/- 0.02，那么应该要求：

```
count_1_pm02 = sum((M(:)>=0.98) & (M(:)<=1.02)) 
```

或使用重塑的等效项。

# php - PHP Zend Framework Application 在 CENTOS 上操作需要 URL 中的 index.php

> ID：16050869
> 
> 赞同：0
> 
> 时间：2013-04-17T03:20:25.800
> 
> 标签：php, .htaccess, zend-framework, mod-rewrite, url-rewriting

仅当我将“index.php”添加到 URL 的末尾时，该应用程序才有效。我正在使用 CENTOS。如何删除它，例如我可以转到`http://server/admin/dashboard`而不是`http://server/admin/index.php/dashboard`. 这是我的 htaccess 文件：

```
SetEnv APPLICATION_ENV development
RewriteEngine On
RewriteCond %{REQUEST_FILENAME} -s [OR]
RewriteCond %{REQUEST_FILENAME} -l [OR]
RewriteCond %{REQUEST_FILENAME} -d
RewriteRule ^.*$ - [NC,L]
RewriteRule ^.*$ index.php [NC,L] 
```

谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-17T08:03:51.203

这是我使用的，如果我没记错的话，我是从[Rob Allen那里得到的：](http://akrabat.com/)

```
//index.php
<?php
$_SERVER["REQUEST_URI"] = str_replace('index.php', '', $_SERVER["REQUEST_URI"]);
//rest of index.php 
```

还有其他方法可以做到这一点，这只是我选择的一种。

# c++ - 在类声明中定义的 c++ 函数不显示为链接器符号

> ID：16050875
> 
> 赞同：2
> 
> 时间：2013-04-17T03:21:01.483
> 
> 标签：c++, linker

这是我的 C++ 类，部分在类内部定义，部分在外部定义。问题：做 nm 表明类声明中定义的函数不会出现在目标文件中，但外部的会出现。我应该怎么做才能使类中的符号也出现在目标文件中？我正在使用 g++ 4 系列。

```
class A {
  public: 
    void this_will_not_show_up() { };
    void this_will_show_up();
};
void A::this_will_show_up() { } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-17T04:32:43.170

在类定义中内联定义的函数被编译为内联函数，即这个函数中的代码被“复制”到调用函数。因此，您没有任何专用的内联函数实现，也没有链接器符号。

当您在编译单元中定义非内联方法时，可能是从不同的编译单元调用此函数。因此，此实现需要可以链接的功能。编译器只生成一个函数，其中包括您在链接器映射中找到的标头和（装饰的）名称。

在共享库中使用它没问题，因为编译器需要使用的所有内容都在头文件中定义。有像 STL 这样的库几乎完全只作为头文件实现。

# javascript - 将外部数据加载到 SproutCore 应用程序

> ID：16050879
> 
> 赞同：0
> 
> 时间：2013-04-17T03:21:22.097
> 
> 标签：javascript, sproutcore

我在[https://github.com/ericgorr/myproject](https://github.com/ericgorr/myproject)有一个示例 SproutCore 应用程序。该应用程序是项目内部的 *sc_technique*。这个应用程序基于[https://gist.github.com/mauritslamers/5384031](https://gist.github.com/mauritslamers/5384031)的要点。

据我了解所描述的技术，要加载的外部数据存储在 helper.js 文件中。例如：

```
MyApp.statechart.sendEvent("loadData",[{ folder: "name": files: ["filename1.js"] }]); 
```

然后将其作为 javascript 脚本添加到文档中。执行脚本的行以生成事件并将数据添加到应用程序的 SC.Store。脚本执行后，将其删除。

当我尝试在我自己的应用程序中实现这种技术时，我无法让它发挥作用。我得到的错误是：

```
Uncaught SyntaxError: Unexpected token : helper.js:1 
```

在我告诉它这样做之前，似乎应用程序正在尝试加载 helper.js 文件。我在应用程序首次启动时以及在它执行 main.js 中的第一行之前收到此错误。

我知道这个应用程序中还有其他问题，但我无法解决这些问题，直到我能解决这个问题。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-17T21:36:09.243

正如浏览器所指出的：helper.js 文件中存在语法错误：

“名称”后面的冒号应该是逗号。

# c++ - 一个函数将 *this 列表与另一个列表连接起来，并将结果列表存储在新列表中。避免内存泄漏

> ID：16050880
> 
> 赞同：0
> 
> 时间：2013-04-17T03:21:24.300
> 
> 标签：c++, list, templates

```
template<typename NODETYPE>
const List<NODETYPE> &List<NODETYPE>::operator =(const List<NODETYPE> &right)
{
    if(&right !=this)
    //ListNode is another class I friended with my list class
    {

        ListNode<NODETYPE> *tempPtr = firstPtr;
        ListNode<NODETYPE> *rightPtr = right.firstPtr;

        if(firstPtr==lastPtr)
        {
            firstPtr = lastPtr = 0;
            delete tempPtr;

            while(rightPtr!=NULL)
            {
                insertAtBack(rightPtr->data);
                rightPtr=rightPtr->nextPtr;
            }
        }
        else
        {
            while(tempPtr!=NULL)
            {
                firstPtr = firstPtr->nextPtr;
                delete tempPtr;
                tempPtr = firstPtr;
            }
            while(rightPtr!=NULL)
            {
                insertAtBack(rightPtr->data);
                rightPtr=rightPtr->nextPtr;
            }
        }
    }
    return *this;
}
template<typename NODETYPE>
List<NODETYPE>& List<NODETYPE>::concatenate(const List<NODETYPE>&right)const
{
    ListNode<NODETYPE>*tempPtr = firstPtr; 
```

我在这里使用了 new 运算符，因此当我返回它时不会调用对象的析构函数。我想创建一个由两个列表组成的全新 List 对象并将其返回给主函数，同时避免任何内存泄漏。

```
 List<NODETYPE>*newList = new List;

    while(tempPtr != NULL)
    {
        newList->insertAtBack(tempPtr->data);
        tempPtr = tempPtr->nextPtr;
    }
    tempPtr = right.firstPtr;

    while(tempPtr != NULL)
    {
        newList->insertAtBack(tempPtr->data);
        tempPtr = tempPtr->nextPtr;
    }
    return *newList;
} 
```

如何在不造成内存泄漏的情况下返回 newlist 对象？

```
template< typename NODETYPE >

void List< NODETYPE >::insertAtBack( const NODETYPE &value )
{
   ListNode< NODETYPE > *newPtr = getNewNode( value ); // new node

   if ( isEmpty() ) // List is empty
      firstPtr = lastPtr = newPtr; // new list has only one node
   else // List is not empty
   {
      lastPtr->nextPtr = newPtr; // update previous last node
      lastPtr = newPtr; // new last node
   } // end else
} // end function insertAtBack

template< typename NODETYPE >
void List< NODETYPE >::insertAtPos( const NODETYPE & value, int pos)
{
    if (pos == 0)
        insertAtFront(value);
    else if (pos < 0)
        cerr << "Trying to insert at invalid list position: " << pos << endl;
    else {
        ListNode< NODETYPE > * ptr = firstPtr;
        for (int i=0; i<pos-1 && ptr != NULL; i++)
            ptr = ptr->nextPtr;
        if (ptr != NULL) {
            ListNode< NODETYPE > *newPtr = getNewNode( value ); // new node
            newPtr->nextPtr = ptr->nextPtr;
            ptr->nextPtr = newPtr;
        }
        else {
            cerr << "Trying to insert at invalid list position." << endl;
        }
    }
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-17T03:32:07.003

如果有人忘记删除从连接返回的对象，则会出现内存泄漏问题。如果您将对列表的引用作为参数，您可以让他们分配列表，并且它将在他们的代码中适当地保留范围。

本质上不要在函数中分配内存，要求将其传递给函数。

```
List<NODETYPE>& List<NODETYPE>::concatenate(const List<NODETYPE> &right, List &newList) const 
```

您仍然可以在最后返回对 newList 的引用，以便可以链接函数。

# dart - 如何在 Dart js-interop 中为“代理”类定义方法？

> ID：16050884
> 
> 赞同：3
> 
> 时间：2013-04-17T03:22:21.053
> 
> 标签：dart, dart-js-interop

我目前正在调用一个名为[Bootstrap Context Menu](https://github.com/sydcanem/bootstrap-contextmenu)的基于 jQuery 的插件。

为了调用它，我需要使用[Javascript Interop library](http://pub.dartlang.org/packages/js)。但是当我从中调用 jQuery 方法时，我收到以下警告：

```
The method 'jQuery' is not defined for the class 'Proxy' 
```

代码片段：

```
 js.scoped(() {
    js.context.jQuery('#canvas').contextmenu();
  }); 
```

这在一些 dart/js-interop 更新之前没有发生。摆脱此警告的正确方法是什么？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-17T09:55:40.233

您收到此警告是因为新的分析器似乎不知道*当类定义 noSuchMethod() 时选项报告“无此类成员”警告*（报告于[http://dartbug.com/10016](http://dartbug.com/10016)）。如果您切换回*旧版分析器*，则不应再看到此警告。

也就是说，如果你想使用新的分析器并摆脱这个警告，你可以使用这样的数组表示法：

```
js.context["jQuery"]('#canvas')["contextmenu"](); 
```

但 ：

*   对于方法调用，它的可读性特别差。
*   方法调用的效率较低，因为完成了 2 个操作（`f = js.context["jQuery"]`后跟`f('#canvas')`）而不是 1 个（`js.context.jQuery('#canvas')`）

# java - 查询后如何匹配用户名和密码

> ID：16050885
> 
> 赞同：0
> 
> 时间：2013-04-17T03:22:33.667
> 
> 标签：java, sql, authentication

如何检查用户名和密码（在登录页面中作为输入）是否匹配？所有信息都存储在 Derby DB 中。我只需要知道是否为给定的用户名输入了正确的密码。

这是我的代码：

```
public void checkIdPw(String userName, String passWord) {
    try {
        stmt = conn.createStatement();
        String checkPwforIdSQL = "SELECT PASSWORD FROM " + studentsTable + " WHERE USERNAME = '" + userName + "'";
        stmt.executeQuery(checkPwforIdSQL);
        stmt.close();
    } catch(SQLException sqlExcept) {
        sqlExcept.printStackTrace();
    }
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-17T03:52:57.893

存储未加密的密码的安全性很差，使用[Bcrypt](http://en.wikipedia.org/wiki/Bcrypt)之类的东西加密会好得多。

像下面这样的东西应该可以满足你的需要。使用 a`PreparedStatement`是至关重要的，不应该使用简单的字符串连接，因为它允许 SQL 注入攻击。

```
PreparedStatement stmt = conn.prepareStatement(
        "SELECT USERNAME FROM studentsTable WHERE USERNAME = ? AND PASSWORD = ?");
stmt.setString(1, username);
stmt.setString(2, password);
ResultSet rs = stmt.executeQuery();
if (rs.next()) {
    // valid credentials
} else {
    // invalid credentials
}

rs.close();
stmt.close(); 
```

根据站点的性质，另一个好的做法是在失败时向用户显示相同的通用消息，无论是用户名（或电子邮件地址）还是密码不正确。示例消息是“无效的用户名或密码”。这样做的好处是它有助于防止用户名被收集，因为攻击者无法从错误消息中判断用户名是有效的。对于某些站点，这比其他站点更重要，并且用户名已经公开的站点不会像其他可用的收获方法那样受益。

# jaxb - java 7 和 java 6 的 jaxb 区别

> ID：16050887
> 
> 赞同：0
> 
> 时间：2013-04-17T03:22:46.650
> 
> 标签：jaxb

我有一个以前在 java 6 中工作的 jaxb 代码，但是在我更新到 java 7 之后，它生成了不同的 xml 文件。

在 java 6 中，文件如下所示：

```
<ns2:recommendation>
    <id>4</id>
    <type>ARTICLE</type>
    <name>Application-4</name>
    <description>Great app called Application-4</description>
    <publisher>Medio</publisher>
    <category>Productivity</category>
    <updated>01062001</updated>
    <rating>4.0</rating>
    <price>.99</price>
    <currency>USD</currency>
    <iconURI>http://medio.com</iconURI>
    <downloadURI>http://medio.com</downloadURI>
    <ns2:extensions>
        <ns2:extension ns2:key="Sample">
            <ns2:value>Extension</ns2:value>
        </ns2:extension>
    </ns2:extensions>
    <ratingCount>35213614</ratingCount>
    <downloadCount>12435854</downloadCount>
</ns2:recommendation> 
```

在 java 7 中，它是：

```
<ma:recommendation>
    <id>3</id>
    <type>ARTICLE</type>
    <name>Application-3</name>
    <description>Great app called Application-3</description>
    <publisher>Medio</publisher>
    <category>Productivity</category>
    <updated>01062001</updated>
    <rating>4.0</rating>
    <price>.99</price>
    <currency>USD</currency>
    <iconURI>http://medio.com</iconURI>
    <downloadURI>http://medio.com</downloadURI>
    <_extensions>
        <entry>
            <key>Sample</key>
            <value>Extension</value>
        </entry>
    </_extensions>
    <ratingCount>35213614</ratingCount>
    <downloadCount>12435854</downloadCount>
</ma:recommendation> 
```

不同之处在于扩展标记，它映射到不会更改的 java 代码。有人知道如何解决吗？

扩展的java代码：

```
@XmlRootElement(namespace = XMLNamespace.URL)
@XmlAccessorType(XmlAccessType.NONE)
@XmlType(namespace = XMLNamespace.URL)
public final class ExtensionMap extends HashMap<String, String> {
    /** Serialized version unique identifier. */
    private static final long serialVersionUID = -7235844731135521813L;

    /**
     * Default constructor to support JAXB binding.
     */
    public ExtensionMap() {
        super();
    }
    /**
     * Default constructor to support JAXB binding.
     * @param capacity The expected capacity of the map.
     */
    public ExtensionMap(int capacity) {
        super(capacity);
    }

    /**
     * The list of wrapped Map entries that are structured for binding to XML
     * with JAXB.
     * 
     * @return The list of wrapped Map entries that are structured for binding
     *         to XML with JAXB.
     */
    @XmlElement(name = "extension", namespace = XMLNamespace.URL, required = false)
    @SuppressWarnings("unused")
    private List<ExtensionMapElement> getEntries() {
        return new ListAdapter();
    }
    /**
     * The list of wrapped Map entries that are structured for binding to XML
     * with JAXB.
     * 
     * @param entries The list of wrapped Map entries that are structured for binding
     *         to XML with JAXB.
     */
    @SuppressWarnings("unused")
    private void setEntries(List<ExtensionMapElement> entries) {
        if (entries != null) {
            for (ExtensionMapElement entry : entries) {
                put(entry.getKey(), entry.getValue());
            }
        }
    }

    /**
     * Adapter for the list collection.
     * 
     */
    private class ListAdapter implements List<ExtensionMapElement> {

        @Override
        public boolean add(ExtensionMapElement e) {
            put(e.getKey(), e.getValue());
            return true;
        }

        @Override
        public void add(int index, ExtensionMapElement element) {
            add(element);
        }

        @Override
        public boolean addAll(Collection<? extends ExtensionMapElement> c) {
            if (c != null) {
                for (ExtensionMapElement element : c) {
                    add(element);
                }
            }
            return true;
        }

        @Override
        public boolean addAll(int index, Collection<? extends ExtensionMapElement> c) {
            addAll(c);
            return true;
        }

        @Override
        public void clear() {
            ExtensionMap.this.clear();
        }

        @Override
        public boolean contains(Object o) {
            throw new UnsupportedOperationException("Not supported yet.");
        }

        @Override
        public boolean containsAll(Collection<?> c) {
            throw new UnsupportedOperationException("Not supported yet.");
        }

        @Override
        public ExtensionMapElement get(int index) {
            throw new UnsupportedOperationException("Not supported yet.");
        }

        @Override
        public int indexOf(Object o) {
            throw new UnsupportedOperationException("Not supported yet.");
        }

        @Override
        public boolean isEmpty() {
            return ExtensionMap.this.isEmpty();
        }

        @Override
        public Iterator<ExtensionMapElement> iterator() {
            return new Iterator<ExtensionMapElement>() {
                private Iterator<Map.Entry<String, String>> _iter = ExtensionMap.this.entrySet().iterator();

                @Override
                public boolean hasNext() {
                    return _iter.hasNext();
                }

                @Override
                public ExtensionMapElement next() {
                    return new ExtensionMapElement(_iter.next());
                }

                @Override
                public void remove() {
                    throw new UnsupportedOperationException("Not supported yet.");
                }
            };
        }

        @Override
        public int lastIndexOf(Object o) {
            throw new UnsupportedOperationException("Not supported yet.");
        }

        @Override
        public ListIterator<ExtensionMapElement> listIterator() {
            throw new UnsupportedOperationException("Not supported yet.");
        }

        @Override
        public ListIterator<ExtensionMapElement> listIterator(int index) {
            throw new UnsupportedOperationException("Not supported yet.");
        }

        @Override
        public boolean remove(Object o) {
            throw new UnsupportedOperationException("Not supported yet.");
        }

        @Override
        public ExtensionMapElement remove(int index) {
            throw new UnsupportedOperationException("Not supported yet.");
        }

        @Override
        public boolean removeAll(Collection<?> c) {
            throw new UnsupportedOperationException("Not supported yet.");
        }

        @Override
        public boolean retainAll(Collection<?> c) {
            throw new UnsupportedOperationException("Not supported yet.");
        }

        @Override
        public ExtensionMapElement set(int index, ExtensionMapElement element) {
            add(element);
            return null;
        }

        @Override
        public int size() {
            return ExtensionMap.this.size();
        }

        @Override
        public List<ExtensionMapElement> subList(int fromIndex, int toIndex) {
            throw new UnsupportedOperationException("Not supported yet.");
        }

        @Override
        public Object[] toArray() {
            throw new UnsupportedOperationException("Not supported yet.");
        }

        @Override
        public <T> T[] toArray(T[] a) {
            throw new UnsupportedOperationException("Not supported yet.");
        }
    }
}
/**
 * A utility type that wraps map entries to support a mapping between a
 * {@link java.util.Map} interface and a class that can be bound to XML using
 * JAXB.
 */
@XmlRootElement(namespace = XMLNamespace.URL)
@XmlAccessorType(XmlAccessType.FIELD)
@XmlType(namespace = XMLNamespace.URL)
final class ExtensionMapElement implements Serializable {

    /**
     * Serialized version unique identifier.
     */
    private static final long serialVersionUID = 8211130122512683829L;

    /**
     * The key of the wrapped map entry.
     */
    @XmlAttribute(name = "key", namespace = XMLNamespace.URL, required = true)
    private String _key;

    /**
     * The value of the wrapped map entry.
     */
    @XmlElement(name = "value", namespace = XMLNamespace.URL, required = true)
    private String _value;

    /**
     * Default constructor to support JAXB Binding.
     */
    public ExtensionMapElement() {
    }

    /**
     * Wraps a map entry with an instance of this class.
     * 
     * @param e
     *            The map entry to wrap.
     */
    public ExtensionMapElement(Map.Entry<String, String> e) {
        _key = e.getKey();
        _value = e.getValue();
    }

    /**
     * The key of the wrapped map entry.
     * 
     * @return The key of the wrapped map entry.
     */
    public String getKey() {
        return _key;
    }

    /**
     * The value of the wrapped map entry.
     * 
     * @return The value of the wrapped map entry.
     */
    public String getValue() {
        return _value;
    }
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-17T08:36:55.740

利用

```
public final class ExtensionMap {  
   private Map<String, String> holder = new HashMap<String, String>();  
   public String put(String key, String value)
   {
      return holder.put(key, value); 
   }   
   // ... 
```

而不是扩展`HashMap`.

Java 6 使用

```
public List<ExtensionMapElement> getEntries() 
```

获取条目，但 Java 7 忽略此方法，因为您的类扩展`HashMap`

# c# - 在 DLL 中查找从不可用程序集中的类继承的类

> ID：16050888
> 
> 赞同：0
> 
> 时间：2013-04-17T03:22:59.477
> 
> 标签：c#, .net, reflection, .net-assembly, system.reflection

我正在开发一种工具，可以将加载项加载到我们办公室使用的商业软件中。可以通过使用从软件 API 中的类继承的类创建 .NET 程序集来开发此软件的插件。

所以我的软件需要检查 DLL 以确定它们是否包含按名称从 API 插件类继承的类。但是，我不希望我的应用程序依赖于 API 本身。它不需要实例化或执行任何这些类，只需确定从 API 插件类继承的类的全名。

我可以使用以下方法加载 dll 程序集：

```
Assembly.LoadFrom(dllFileName) 
```

然而，当我尝试在加载的程序集中调用 GetTypes() 时。我收到一个 ReflectionTypeLoadException，其中包含许多 LoaderExceptions，抱怨找不到 API 文件。

我也尝试过使用`ReflectionOnlyLoadFrom()`，但它抛出了同样的异常。

有没有其他方法可以获取这些信息？同样，我不需要执行任何代码，最终我希望我的工具可以在根本没有安装 API 或软件的计算机上工作。我只需要知道完整的类名。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-17T04:29:05.287

无法使用`Reflection`. 如果您只是对查找依赖项感兴趣，可以使用`ObjectExplorer`来查看`DLL`程序集中的类并查看它们的基类型。并查找不属于同一程序集的类型。

您可以在此处找到一些有用的信息：
[Visual Studio 中的哪个程序可以让我查看 DLL 以查看其 API？](https://stackoverflow.com/questions/131985/which-program-in-visual-studio-lets-me-look-into-dlls-to-see-its-api)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-17T04:29:51.463

这不能使用框架的反射 API 来完成。反射需要访问程序集以加载类型元数据。您可以做的是使用 Mono.Cecil（可在 nuget 上获得）之类的东西来检查 MSIL。以下示例显示了程序集中具有基类和接口的类型：

```
using Mono.Cecil;
using Mono.Cecil.Cil;

var assembly = AssemblyDefinition.ReadAssembly("ClassLibrary.dll");
// skip the first type '<Module>' whatever that is.
var types = assembly.MainModule.Types.Skip(1);

foreach (var type in types)
{
    var interfaces = type.Interfaces.Select(i => i.FullName);
    if (interfaces.Any())
    {
         Console.WriteLine("{0} : {1}, {2}", type.FullName, type.BaseType.FullName, string.Join(", ", interfaces));
    }
    else
    {
         Console.WriteLine("{0} : {1}", type.FullName, type.BaseType.FullName);
    }
} 
```

这不会导致程序集或其任何依赖项被加载。当您知道您感兴趣的类直接从外部 API 类继承时，这将很有用。如果有多个继承级别，那么您将不得不做比我上面显示的更多的工作。

# jsf - 如何编辑 CSS？

> ID：16050890
> 
> 赞同：4
> 
> 时间：2013-04-17T03:23:03.880
> 
> 标签：jsf, file-upload, jsf-2, upload, richfaces

我试图只显示按钮`add`和按钮下方上传的图片，但不管我在我的 CSS 中做什么，生成的表格`richfaces`总是相同的：

这是我使用的表格`richfaces`：

```
<ui:define name="content">
        <h:form>
            <h:panelGrid>
                <rich:fileUpload fileUploadListener="#{fileUploadBean.listener}" id="upload" acceptedTypes="jpg, gif, png, bmp"  ontyperejected="alert('Just JPG, GIF, PNG and BMP are allowed');" maxFilesQuantity="12" immediateUpload="true" >
                    <a4j:ajax event="uploadcomplete" execute="@none" render="info" />
                </rich:fileUpload>

                <h:panelGroup id="info">
                    <h:outputText value="Add picture" rendered="#{fileUploadBean.size==0}" />
                    <rich:dataGrid columns="4" value="#{fileUploadBean.files}" var="file" rowKeyVar="row">
                        <a4j:mediaOutput element="img" mimeType="image/jpeg" createContent="#{fileUploadBean.paint}" value="#{row}" style="width:100px; height:100px;" cacheable="false" />
                    </rich:dataGrid>

                    <br />
                    <a4j:commandButton action="#{fileUploadBean.clearUploadData}" render="info, upload" value="Clear Uploaded Data" rendered="#{fileUploadBean.size>0}" />
                </h:panelGroup>
            </h:panelGrid>
        </h:form>
    </ui:define> 
```

这就是生成方式：

![形式](https://i.stack.imgur.com/lf6jF.jpg)

我想要一些更简单的东西，因为稍后我会添加一些`jQuery slider`插件。但是我不能用生成的这张表消失`richfaces`。[是的，我的richfaces配置](https://stackoverflow.com/questions/7429254/richfaces-4-how-to-disable-skins)中禁用了皮肤：

**更新** 按照建议，我的 CSS 现在看起来像这样：

```
 <style>
    div div.rf-fu { border: 0px; width: 85px; }
    div div.rf-fu-hdr { border: 0px; }
    span span.rf-fu-btn-clr { border: 0px; }
    span.rf-fu-btns-lft{ width: 85px; }
    span.rf-fu-btns-rgh{ display: none; }
    div div.rf-fu-lst { display:none; }
    </style> 
```

现在我的`add..`文件按钮看起来像：

![在此处输入图像描述](https://i.stack.imgur.com/zrpsP.jpg)

这些帖子也非常有用：

[我应该使用'border：none'还是'border：0'？](https://stackoverflow.com/questions/2922909/should-i-use-border-none-or-border-0)
[内部 div 有边框 - 如何用外部 div 上的类覆盖？](https://stackoverflow.com/questions/4969977/inner-div-has-borders-how-to-override-with-a-class-on-an-outer-div)

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-04-17T12:17:48.193

您可以使用 Adrian 的答案来覆盖richfaces css，但是您不需要使用`!important`来覆盖richfaces css。只需使用[选择器特异性](http://www.w3.org/TR/CSS21/cascade.html#specificity)来覆盖richfaces 应用的css。

对于使用 Instance 的情况`important`，将 css 应用为：

`div div.rf-fu-lst { display:none }`它会为你工作。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-17T09:32:05.960

我目前正在为我的项目做这个。您必须像这样覆盖样式表中的richfaces css：

```
.rf-fu, .rf-fu-hdr {
    float: left;
    width: auto;
    border: none;
    background: none;
    padding: 0;
    margin: 0;
}

.rf-fu-btn-cnt-add {
    paddin-left: 0;
    cursor: pointer;
}

.rf-fu-btn-add {
    margin: 0;
}

.rf-fu-btns-rgh, .rf-fu-lst {
    display: none;
}

.rf-fu-btns-lft {
    width: 100%;
} 
```

# opengl-es-2.0 - 着色器中的变量名称效率 (OpenGL ES 2)

> ID：16050891
> 
> 赞同：2
> 
> 时间：2013-04-17T03:23:07.880
> 
> 标签：opengl-es-2.0, shader

出于好奇，这样编写着色器变量会更有效吗：

```
 lowp vec4 tC = texture2D(uTexture, vTexCoord); // texture color 
```

或者

```
 lowp vec4 textureColor = texture2D(uTexture, vTexCoord); // texture color 
```

请注意，我写了变量**tC**，因为它的字符少于变量**textureColor**

我了解像 C/ObjC 这样的编程语言，没关系，但是着色器呢，因为您可以查询属性/统一名称。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-10-17T21:12:27.687

它不应该产生可衡量的差异。在初始化期间链接您的程序后，查询属性/制服的位置，并将结果与​​程序句柄一起保存。从那时起，您的应用程序和驱动程序都不会接触名称字符串，只会接触整数位置。

即使您每次需要更改属性绑定或统一值时都重新查询位置，与进行查找和绑定的其他成本相比，短名称长度和“中等”名称长度之间的差异可能不会有太大差异/值变化。

# c# - 加载父页面时自动调用用户控件中的按钮单击事件？

> ID：16050896
> 
> 赞同：0
> 
> 时间：2013-04-17T03:23:26.410
> 
> 标签：c#, asp.net

我有一个页面，`parent.aspx`其中包括一个用户控件，`csForm.ascx`。这个用户控件只是一个简单的表单，最后有一个发送按钮。我也使用`Modal Popup Extender`from`AjaxToolKit`来显示表单。

**父.aspx**

```
<asp:ScriptManager runat="server" ID="scmg" />
<ajaxToolkit:ModalPopupExtender ID="mdlPopup" runat="server" 
TargetControlID="btnCS" PopupControlID="csForm$pnlPopup"
BackgroundCssClass="modalBackground" OkControlID="csForm$btnSend" 
CancelControlID="csForm$imgBtnClose" PopupDragHandleControlID="csForm$pnlPopup" 
Drag="true" DropShadow="true" /> 
```

**csForm.ascx.cs**

```
protected void btnSend_Click(object sender, EventArgs e)
{
    sendEmail(); //this gets automatically called when parent page is loaded. 
} 
```

我遇到的问题是`sendEmail()`在加载 parent.aspx 页面时自动调用。有没有办法阻止它？我只想在`Send`单击按钮时调用它。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-09-23T19:19:16.487

```
protected void btnSend_Click(object sender, EventArgs e)
{
    if(IsPostBack)
    {
        sendEmail(); //this gets automatically called when parent page is loaded. 
    }
} 
```

这不是正确的解决方案，但会解决此问题。

# spring - spring servlet 过滤器

> ID：16050897
> 
> 赞同：0
> 
> 时间：2013-04-17T03:23:40.383
> 
> 标签：spring, spring-mvc, spring-security, servlet-filters

我正在尝试为 spring 实现 servlet 过滤器以实现基于用户角色的应用程序访问控制，因为我是 spring mvc 的新手，你们能推荐我一些教程吗？谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-17T06:07:34.590

有很多教程。
检查这个[http://static.springsource.org/spring-security/site/tutorial.html](http://static.springsource.org/spring-security/site/tutorial.html)，
这个[寻找一个简单的 Spring 安全示例](https://stackoverflow.com/questions/4899518/looking-for-a-simple-spring-security-example)
和这个[Spring Security By Example](https://stackoverflow.com/questions/7319896/spring-security-by-example)

# facebook - Facebook 实时更新不会被推送

> ID：16050898
> 
> 赞同：2
> 
> 时间：2013-04-17T03:23:45.603
> 
> 标签：facebook, facebook-like, real-time-updates

我想从 Facebook 检索用户喜欢的音乐。我已订阅实时更新，并在应用程序本身中设置了适当的权限。

我正在使用 facebook 的 UI 来设置权限和实时更新

1.  在 facebook 应用程序中设置“用户和朋友权限”权限。

    *   电子邮件
    *   用户兴趣
    *   用户喜欢
    *   用户位置
    *   朋友兴趣
    *   朋友喜欢
    *   朋友位置
    *   user_actions.music
    *   friends_actions.music
2.  为实时更新设置所需的值。

    *   音乐
    *   喜欢
    *   兴趣
    *   当前位置
    *   签到

我的回调 URL 的代码是：

```
$myverify_token = 'vt1';
if($_SERVER['REQUEST_METHOD'] == 'GET') {
    if($_GET['hub_verify_token'] == $myverify_token) {
    $handle = fopen('f_d.txt', 'w');
    fwrite($handle, 'FaceBook can GET me');
    fclose($handle);

    echo $_GET['hub_challenge'];
    }
}
if($_SERVER['REQUEST_METHOD'] == 'POST') {
    $data = file_get_contents("php://input");
    $json = json_decode($data);

    $handle = fopen('f_d.txt', 'w');
    fwrite($handle, $json);
    fclose($handle);
} 
```

**f_d.txt**设置了 777 个权限。

当我测试 mycallback URL 时，GET 条件为真，并且“FaceBook can GET me”被写入文件。现在我清除文件的内容（不删除）。

现在我登录我的 facebook，更改喜欢的音乐。等了一整天仍然没有来自 Facebook 的推送。该文件仍然是空白的。甚至没有对我的回调 URL 的 GET 请求？？

我还需要什么才能获得适当的实时更新？

发布在 Facebook 上：[https ://developers.facebook.com/bugs/394779173962716](https://developers.facebook.com/bugs/394779173962716)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-11-04T14:01:50.970

我注意到您正在尝试将响应写入文本文件中，这没关系，但是您在解码 json 之后执行此操作。这意味着您正在编写结果对象的内容。该文件将被创建，但实际写入将导致致命错误，留下一个空文件。

长话短说：删除 json_decode 命令，这样您就可以编写实际的字符串（即使它是 json 编码的，它也很简短，足以让您阅读它）。

# java - 如何用其他非数字java替换非数字

> ID：16050906
> 
> 赞同：0
> 
> 时间：2013-04-17T03:24:14.283
> 
> 标签：java, string, replace

我想用字符串中的其他非数字字符替换非数字字符。例如在下面，改变

```
4/14/2013%Univ. of Massachusetts-Amherst%Sacred Heart University%7-0 
```

至

```
4/14/2013%Univ. of Massachusetts-Amherst%Sacred Heart University%7%0 
```

我不想消除所有连字符，只是数字之间的连字符。我试图使用

```
line.replaceAll("-\\d+", "%\\d+"); 
```

但这用文字替换了第二个数字`d+`

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-17T03:31:33.450

把你的参数改成`string.replaceAll()`这个`"-(\\d+)", "%$1"`，这里的`$1`意思是`group 1`被捕获`(\\d+)`

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-17T03:33:53.870

Firstly, you need two backslashes when you're dealing with regex in JAVA. The `\\` escape sequence will translate to a single backslash at runtime. Now, in order to "capture" a piece of the initial expression, you need to use [capture groups](http://www.regular-expressions.info/brackets.html). By putting a piece of the regex expression in parentheses, you "capture" that piece of the string to be used in the replacement. So the initial string would be `(\\d)-(\\d)`, where the first capture group is the digit before the hyphen and the second is the digit after.

To replace those digits back into the string, you need to use the syntax for capturing them back, which in JAVA is $. The resulting string should be `$1%$2`, meaning "capture group 1, followed by a %, followed by capture group 2".

Your final line of code would look something like this:

```
line.replaceAll("(\\d)-(\\d)", "$1%$2"); 
```

# zend-framework2 - Zend / ZF2 / TableGateway update() 如何处理这个“hits = hits + 1”

> ID：16050908
> 
> 赞同：4
> 
> 时间：2013-04-17T03:24:28.993
> 
> 标签：zend-framework2

我想写一个这样的sql：

```
"Update tablename SET hits = hits + 1 WHERE id = $id" 
```

在zf2中，我们使用了TableGateway，我写了代码：

```
$this->tablenametableGateway->update(array(
  'hits' => new Expression('hits + 1')),array(
        'id' => $id)
  ); 
```

但是结果有问题，例如：第一次命中等于 1，刷新页面后，命中等于 3，每次命中增加 2，而不是增加 1。

我不知道如何解决这个问题，需要你帮助，谢谢！

* * *

## 回答 #1

> 赞同：-7
> 
> 时间：2013-04-22T09:16:09.380

我解决了这个问题。我安装了Chrome扩展“Web Server Notifier”，这个扩展会导致chrome访问当前页面的2倍，非常快！关闭扩展后，我的代码运行良好！

# ruby-on-rails - Ruby on Rails 同时发出多个 HTTP 请求？

> ID：16050910
> 
> 赞同：10
> 
> 时间：2013-04-17T03:24:39.860
> 
> 标签：ruby-on-rails, ruby, multithreading, httprequest, instagram

我正在拉多个请求（一次拉一个），我想知道如果我有这样的东西，是否有办法同时拉取请求：

```
client = Instagram.client(:access_token => session[:access_token])
@user = client.user
@recent_media_items = client.user_recent_media

@lv = client.tag_recent_media('lv', options = {:count => 60})
@lv1 = client.tag_recent_media('lv1', options = {:count => 60})
@lv2 = client.tag_recent_media('lv2', options = {:count => 60})
@lv3 = client.tag_recent_media('lv3', options = {:count => 60}) 
```

每个`lv`人都向`client`. 我想知道是否有办法做到这一点，以便它可以一次（一起）完成请求，而不是一个完成请求，然后继续下一个请求，依此类推......

谢谢！

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2013-04-17T03:53:12.643

是的！对于概念验证，请尝试

```
require 'thread'

client = Instagram.client(:access_token => session[:access_token])
@user = client.user
@recent_media_items = client.user_recent_media

threads = []
threads << Thread.new { @lv = client.tag_recent_media('lv', options = {:count => 60}) }
threads << Thread.new { @lv1 = client.tag_recent_media('lv1', options = {:count => 60}) }
threads << Thread.new { @lv2 = client.tag_recent_media('lv2', options = {:count => 60}) }
threads << Thread.new { @lv3 = client.tag_recent_media('lv3', options = {:count => 60}) }
threads.each(&:join) # this waits for all the threads to finish before proceeding
puts [@lv, @lv1, @lv2, @lv3] 
```

在实践中，您需要在线程中设置一些错误处理和重试设置。此外，您可能会在 Instagram gem 中遇到线程安全问题。如果您正在使用数百或数千个请求大规模地执行此操作，您可能想要尝试像[Typhoeus](https://github.com/typhoeus/typhoeus)这样的并发 HTTP 客户端或像[EM-HTTP-Request](https://github.com/igrigorik/em-http-request)这样的事件 HTTP 客户端。对于这些，您必须手动实现`tag_recent_media`Instagram gem 中的方法。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2013-04-17T03:32:50.820

有像 spawn 这样的宝石在分叉进程中或作为进程中的新线程执行此操作.. 这是另一个讨论它的 SO 帖子的链接

[后台进程中的分叉和线程有什么区别？](https://stackoverflow.com/questions/10666997/what-is-the-difference-between-forking-and-threading-in-a-background-process)

这是有问题的宝石：[https ://github.com/tra/spawnling](https://github.com/tra/spawnling)

# css - Twitter Bootstrap 的 JQgrid 样式问题

> ID：16050911
> 
> 赞同：6
> 
> 时间：2013-04-17T03:24:44.737
> 
> 标签：css, twitter-bootstrap, jqgrid

我正在使用 JQgrid 来显示信息并执行 CRUD 操作。我想要一个具有 Twitter Bootstrap 外观和感觉的页面以及显示一些数据的 JQGrid，但是如果我导入 JQGrid 的 CSS 和 Bootstrap 的 CSS，则网格根本不可见。我基本上想要的是将 JQGrid 样式与其他页面样式完全分开。

这可能吗？

下面是我尝试将 Twitter Bootstrap 与 JQGrid 一起使用的页面代码：

```
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />

    <!--Styles for JQGrid-->
    <link rel="stylesheet" type="text/css" media="screen" href="/css/flick/jquery-ui-1.8.16.custom.css" />
    <link rel="stylesheet" type="text/css" media="screen" href="/jqgrid/css/ui.jqgrid.css" />

    <script src="https://ajax.googleapis.com/ajax/libs/jquery/1.7.1/jquery.min.js" type="text/javascript"></script>
    <script src="https://ajax.googleapis.com/ajax/libs/jqueryui/1.8.16/jquery-ui.min.js" type="text/javascript"></script>
    <script src="/jqgrid/js/i18n/grid.locale-es.js" type="text/javascript"></script>
    <script src="/jqgrid/js/jquery.jqGrid.min.js" type="text/javascript"></script>

    <!--Twitter Bootstrap Styles -->

        <link href="/bootstrap/css/bootstrap.min.css" rel="stylesheet" media="screen">

        <script src="http://code.jquery.com/jquery.js"></script>
        <script src="/bootstrap/js/bootstrap.min.js"></script>

<title>Manejo de alumnos</title>
</head>
<body>
<center>

    <div class="myjqueryUI">
        <table id="list"></table><!--Grid table-->
        <div id="pager"></div>  <!--pagination div-->
        <a href="http://localhost/ProyectoNetbeans/CodeIgniter_2.1.3/index.php/Alumnos_controller/mostrarInsertar">Insertar alumno</a>
    </div>

</center> 
```

```
<script type="text/javascript">

    $(document).ready(function (){
        jQuery("#list").jqGrid({
            url: 'http://localhost/ProyectoNetbeans/CodeIgniter_2.1.3/index.php/Alumnos_controller/loadData',
            mtype : "post",             //Ajax request type. It also could be GET
            datatype: "json",            //supported formats XML, JSON or Arrray
            colNames:['Expediente','Primer apellido','Segundo apellido', 'Nombre','Cédula'],       //Grid column headings
            colModel:[
                {name:'expediente',index:'expediente', width:300, editable:true, edittype:'text'},
                {name:'primerApellido',index:'primerApellido', width:300, editable:true, edittype:'text'},
                {name:'segundoApellido',index:'segundoApellido', width:300, editable:true, edittype:'text'},
                {name:'nombre',index:'nombre', width:300, editable:true, edittype:'text'},
                {name:'cedula',index:'cedula', width:300, editable:true, edittype:'text'}

            ],
            pager: '#pager',
            rowNum:10,
            rowList:[15,30],
            sortname: 'primerApellido',
    reloadAfterSubmit: true,
            sortorder: 'asc',
            viewrecords: true,
    postData: {expediente:"expediente"},
            caption: 'Alumnos'
        }).navGrid('#pager',{edit:false,add:false,del:false},
            {

            },
            {
              },

    },  

    {multipleSearch : false}, // enable the advanced searching
    {closeOnEscape:true}

        );
    });
</script> 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-04-17T06:08:12.787

您不仅应该发布您所做的描述，还应该发布显示您*如何*尝试执行此操作的代码（HTML、JavaScript 等）。

如果您想将 jqGrid 放在主要使用 Twitter Bootstrap 的页面上，我建议您使用特殊的 jQuery UI：[jQuery UI Bootstrap](http://jquery-ui-bootstrap.github.io/jquery-ui-bootstrap/)。

如果您更喜欢使用其他一些 jQuery UI CSS，您可以从官方[jQuery UI 下载页面下载](http://jqueryui.com/download/)您需要的 CSS ，但在“CSS Scope:”字段中设置一些类名：

![在此处输入图像描述](https://i.stack.imgur.com/QuPHp.png)

如果您在“CSS Scope：”字段中输入例如“.myjqueryUI”，那么您需要`<table>`将用于 jqGrid 的内容放在`<div>`“myjqueryUI”类中：

```
<div class="myjqueryUI">
    <table id="grid"></table>
</div> 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2014-03-19T15:17:32.070

关于 jqGrid + Bootstrap 主题的附加信息：

jqGrid（4.6.0）和Bootstrap（3）似乎存在表格边框折叠覆盖问题。

jqGrid 想要：`border-collapse: separate;`（CSS 默认）

Bootsrap 想要：`border-collapse: collapse;`

它导致网格右侧出现溢出问题。

```
#grid_container_id table{
    border-collapse: separate;
} 
```

解决了这个问题。

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2013-08-18T04:06:40.110

检查此[Bootstrap UI 模板](https://wrapbootstrap.com/theme/ace-responsive-admin-template-WB0B30DGR)是否包含 jqGrid 插件

您可以使用此模板中的许多功能。看起来很棒

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2014-11-16T15:41:25.680

这对我们有用：

1- 从以下位置获取 css： [https ://github.com/Soliman/jqGrid.bootstrap](https://github.com/Soliman/jqGrid.bootstrap)

这不会更改任何 jqgrid 规范，仅更改一些 css。

该演示位于[http://www.soliman.nl/test/jqgrid.bootstrap/jqGrid.bootstrap.html](http://www.soliman.nl/test/jqgrid.bootstrap/jqGrid.bootstrap.html)

2-如果您希望所有引导 css 都适用于您的表，则必须在网格加载后在下面运行：

```
//remove the 'ui-state' and 'ui-widget' from jquery-ui.css which prevents your customize ccs to apply on  jquery grid 
//the gbox_gridtable is the most top element in the grid
function removeJqueryUiClass(){
    $('#gbox_gridtable').find('*').andSelf().attr('class',
            function(i, css){
                if (typeof css !== 'undefined') {                    
                       return css.replace(/\ui-state\S+/g, '').replace(/\ui-widget\S+/g, '');
                    }
           });

} 
```

3-要使 jqgrid 响应，请将您的网格放在一个 div 中，例如`<div id="grid">`：当然，这个 div 必须是引导网格系统的一部分，然后将下面的 js 放在您的文件中

```
//When the window size changes resize the gird
$(window).bind('resize', function() {
    $("#gridtable").jqGrid("setGridWidth",$("#grid").width() );
}); 
```

4-您还可以在完全加载网格时设置网格大小

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2015-12-15T15:26:41.990

新版 jqGrid 5.0 原生支持 Bootstrap。[http://www.trirand.com/blog/?p=1484](http://www.trirand.com/blog/?p=1484)

# javascript - 重置类时CSS动画不会重新启动

> ID：16050914
> 
> 赞同：11
> 
> 时间：2013-04-17T03:24:51.460
> 
> 标签：javascript, jquery, css, webkit

我正在使用 CSS 着色器 + 动画。我的着色器类定义如下：

```
.shader{
-webkit-filter :custom(url(v.vs) mix(url(f.fs) multiply destination-over), 200 200);
-webkit-animation-name: test;
-webkit-animation-duration: 2s;
-webkit-animation-iteration-count: 1
} 
```

我正在尝试使用jquery通过动态设置/取消设置样式（着色器+动画）`$('#holder').addClass('shader');`和动态设置/取消设置样式（着色器+动画）`$('#holder').removeClass('shader');`

然而，奇怪的是当我重置类时（例如，在 removeClass 之后调用 addClass），只有着色器被重新应用但动画没有（我已经挂钩 AnimationStart 事件以查看我的动画何时开始）。任何人都知道为什么会这样以及我该如何解决？

[编辑：我在这里](http://jsfiddle.net/HuFBN/1/)添加了一个简化版本的 JSfiddle 片段。本质上，我将动画重新应用到 div 两次，但实际动画只在第一次被调用。

* * *

## 回答 #1

> 赞同：26
> 
> 时间：2013-05-17T23:42:24.113

问题是，即使您删除然后重新应用动画类，您也是在单个阻塞函数的过程中执行此操作的。当您的函数退出时，渲染引擎似乎没有任何变化。

一种解决方案（您选择的那个）是克隆元素并销毁原始元素。这很好，但是如果您对原始元素有任何事件绑定（我认为），它们也会被销毁。

另一种方法是从元素中删除动画类，然后将重新应用类的代码包装在 setTimeout() 调用中，延迟非常小，例如

```
$('#holder').removeClass('shader');
setTimeout(
    function(){$('#holder').addClass('shader')}
    , 1); 
```

我已经调整了你的 jsfiddle 以使用这种方法：http: [//jsfiddle.net/HuFBN/7/](http://jsfiddle.net/HuFBN/7/)

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2014-06-06T15:04:42.873

根据css-tricks.com 上2011 年的[一篇文章，在删除和添加类之间触发重排将重新启动动画。](http://css-tricks.com/restart-css-animation/)示例（详细）：

```
$('#holder').removeClass('shader');
$('#holder').offsetWidth = $('#holder').offsetWidth; // triggers reflow
$('#holder').addClass('shader'); // restarts animation 
```

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2013-04-17T05:19:07.230

我想我想通了。根据[this](http://css-tricks.com/restart-css-animation/)，css动画不能两次应用于同一个节点（即使你有不同的动画！）。所以我不得不克隆节点，删除原始节点，然后重新添加克隆节点。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2015-10-09T19:24:43.620

您需要重新创建元素。

```
function resetAnimation(jqNode) {
   var clone = jqNode.clone();
   jqNode.after( clone );
   jqNode.remove();
   jqNode[0] = clone[0];
} 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2015-04-29T15:14:43.050

在应用动画后尝试使用它 - 假设“e”是您的动画元素：

```
e.outerHTML = e.outerHTML; 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2020-06-04T18:04:37.693

我很高兴听到对我的方法使用的任何批评，`requestAnimationFrame`因为我没有看到其他人使用它：

```
element.classList.add("class");
window.requestAnimationFrame(() => element.classList.remove("class")); 
```

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2019-03-28T22:04:10.160

触发回流的方法：

```
 element.classList.remove("class");
  element.scrollBy(0, 0);
  element.classList.add("class"); 
```

在严格模式下工作！不需要对只读值进行写操作！不需要全新的功能！一条线走！:)

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2021-06-06T20:55:16.907

使用这个简单的代码，您可以做到（您必须使用触发回流**.width()**）：

```
$('#holder').removeClass('shader');
$('#holder').width();
$('#holder').addClass('shader'); 
```

* * *

## 回答 #9

> 赞同：-1
> 
> 时间：2017-06-10T23:03:20.703

您肯定必须删除包含动画的类，然后再次添加它。它也应该在没有`.offsetWidth`. 它对我有用。所以

```
$('#id').removeClass('animationClass');
$('#id').addClass('animationClass'); // starts animation again 
```

应该做的伎俩。

# c# - mongodb c# 1.8.1 driver remove getdatabase(string name, MongoCredential credential)

> ID：16050916
> 
> 赞同：2
> 
> 时间：2013-04-17T03:25:06.347
> 
> 标签：c#, mongodb

在 Mongodb c# 1.8.1 中，不再有 MongoServer.GetDatabase(string databaseName, MongoCredential credential) 方法。替换是使用 MongoClientSetting。但是，我希望具有不同数据库具有不同用户和密码的功能。如何在 Mongodb C# 1.8.1 中实现这一点

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-25T13:42:31.947

您仍然可以为不同的数据库使用不同的用户。您可以在此处查看文档：http: [//docs.mongodb.org/ecosystem/tutorial/authenticate-with-csharp-driver/](http://docs.mongodb.org/ecosystem/tutorial/authenticate-with-csharp-driver/)。

如果您相反表明您想为同一个数据库使用不同的用户，那么您需要创建多个 MongoClient 实例。MongoClient 是到集群的逻辑连接。我们在下面缓存连接池，由于 MongoDB 服务器版本 2.4 现在处理身份验证的方式，我们需要删除旧功能。

# haskell - Haskell计算函数执行时间

> ID：16050917
> 
> 赞同：5
> 
> 时间：2013-04-17T03:25:10.893
> 
> 标签：haskell, benchmarking

我试图编写代码来计算函数花费的时间

```
list <- buildlist 10000 10000    
starttime <- getClockTime
let sortedlist = quicksort list
endtime <- getClockTime
let difftime = diffClockTimes endtime starttime 
```

*功能构建列表：*

```
buildlist :: Int -> Int -> IO [Int]
buildlist n m = do
    seed <- getStdGen
    let l = randomRs (0, m) seed
    let list = take n l
    return list 
```

*功能快速排序：*

```
quicksort [] = []
quicksort (x:xs) =
    let head = [a|a<-xs,a<=x]
        tail = [a|a<-xs,a>x]
    in quicksort head ++ [x] ++ quicksort tail 
```

**第一个问题：**当我输出 difftime 时，无论列表有多长，它总是为零。

**第二个：我想知道**[Real World Haskell](http://book.realworldhaskell.org/read/systems-programming-in-haskell.html)代码中的“>>=”是什么意思。

```
getClockTime >>= (\(TOD sec _) -> return sec) 
```

**第三：**我写这个是为了从**TimeDiff**变量中获取**tdSec**和**tdPicosec 。**有没有更简单的方法？

 **```
time <-(\(TimeDiff _ _ _ _ _ s ps) -> return [ ( \a -> fromIntegral a :: Double ) s , ( \a -> fromIntegral a :: Double ) ps ] ) difftime 
```

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2013-04-17T03:33:51.247

## 问题一：

您的代码没有对列表进行排序！它只是将名称定义`sortedlist`为存在，`quicksort list`但在实际需要该值之前不会计算该名称。那是懒惰的评价。我们不会用这种语言做额外的工作。

由于基准测试是额外无用的工作（这就是重点），这使得基准测试变得困难。

您的选择

*   使用`seq`. `seq`具有类型`a -> b -> b`并且具有将其第一个参数评估为所谓的“弱头范式”的行为。在这里，因为您想强制使用您可能想要使用的整个列表`deepseq`
*   使用适当的基准测试包，如[标准](http://hackage.haskell.org/package/criterion)（首选且更容易）

## 问题2：

`>>=`是一元绑定运算符。在这里，它需要一个`IO`类型的动作`IO a`和一个函数`a -> IO b`，并将它们组合在一起以形成一个新的类型动作`IO b`。这与 do 表示法的作用相同。 `foo >>= \x -> expr`是一样的

```
 do x <- foo
    expr 
```

事实上，`do`符号只是语法糖`>>=`

我不确定问题 3 中要问的是什么——也许它应该有自己的 Stackoverflow 问题。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-04-17T03:46:41.883

`difftime`总是零，因为 Haskell 的惰性求值顺序已经完全优化掉了实际排序。您的程序中没有任何内容访问`sortedlist`，因此它甚至从未计算过。

正如另一个答案中所述，您可以强制您的程序使用一个名为from`sortedlist`的有点神奇的函数进行计算。 等价于，除了它具有强制进行全面评估的副作用。`deepseq``Control.Deepseq``deepseq v``id``v`

```
starttime <- getClockTime
let sortedlist = quicksort list
endtime <- deepseq sortedlist getClockTime 
```

至于你的第二个问题，是的，有一种更简单的方法可以访问 a 的字段`TimeDiff`。声明中的字段名称`Data`第二个作为 getter 函数。因此，`tdSec td`获取秒`td`并`tdPicosec td`获取皮秒。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2013-04-17T06:01:30.013

为了测量纯函数的评估时间，您可能对我的`Chronograph`包感兴趣：http: [//hackage.haskell.org/package/chronograph](http://hackage.haskell.org/package/chronograph)

以下是如何使用它的简短示例：

```
Prelude Data.Chronograph> :m Data.Chronograph Data.List
Prelude Data.Chronograph Data.List> let theList = reverse [1..1000]
Prelude Data.Chronograph Data.List> sum theList 
500500
Prelude Data.Chronograph Data.List> let timed = chronoNF (sort theList)
Prelude Data.Chronograph Data.List> measure timed
0.000062s
Prelude Data.Chronograph Data.List> head $ val timed
1 
```

几点：

*   我评估原始的总和`theList`以强制其构造和反转。如果这里不强制，则构建成本将归因于传递给的表达式的评估`chronoNF`
*   `chronoNF``deepseq`使用与其他一些答案讨论的相同策略进行评估。计时码表为不同的评估策略提供了其他功能。例如，我们可以评估为弱头范式，这实际上不会对列表进行完全排序。

计时码表也可以测量`IO`表达式，但处理这些表达式通常比非 IO 表达式简单得多。**

# git - 无需克隆即可使用 Github 存储库（合并、重置）

> ID：16050919
> 
> 赞同：1
> 
> 时间：2013-04-17T03:25:32.373
> 
> 标签：git, github

想象一下，我已经 fork 了一个 Github 存储库，并且在进行了许多更改后，发现自动合并我的拉取请求是不可能的。

但我不想将母存储库克隆到我的本地驱动器以便`reset --hard`或`merge -f`.

我的主要问题是遥控器——我似乎无法找到将远程引用添加到 Github API 之类的东西的方法，因此我无法将我的**远程存储库**合并到我最初派生的父存储库中。

如果我不清楚，请告诉我，我很乐意编辑我的问题。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-17T08:41:03.000

我不完全确定你在这里问什么。首先，您不合并存储库，而是合并分支。存储库只保存与它们关联的分支和提交。其次，为了将远程添加到本地存储库，您不需要与 GitHub API 交互。而且我建议不要将远程添加到您的远程存储库，因为它不会自动保持最新。

我通常做的是`upstream`向我的本地存储库添加一个新的远程：

```
git remote add upstream <url-to-parent> 
```

获取更新的引用：

```
git fetch upstream 
```

现在您可以访问父存储库中的最新数据。好的部分是存储库中的大多数对象都将被重用，因此您不会拥有完全独立的副本。`upstream`现在您可以通过遥控器访问父仓库中的内容。例如，您可以在父存储库中合并最新版本的 master：

```
git merge upstream/master 
```

您还可以在更新后的 master 上*重新设置当前的更改集（小心这一点！*）：

```
git rebase upstream/master 
```

当它是私人分支机构时，我倾向于选择后者。如果有人在我的分支上构建，有时前者是必要的。如果你还没有处理过 rebase，你可能不希望这是你第一次体验它。你会想在一个压力更小、更可控的环境中进行实验。

无论你决定做什么，一定要学会处理合并冲突。大多数都很容易解决，从长远来看，它会让 Git（或任何其他 VCS）的生活变得更好。

**更新**

在评论中进行了一些讨论之后，现在很明显您希望将您的工作合并回上游。是的，这是完全可能的。事实上，如果你已经合并`upstream/master`到你的 master 分支，你真正需要做的就是：

```
git push upstream master 
```

这会将您的主分支推送到主分支项目的远程存储库。它应该是快进的，没有理由使用`--force`. 如果您确实看到一些关于无法快进或使用 的建议，请`--force`小心。丢失数据的可能性很大。

在这种模式下，我更喜欢使用`git rebase upstream/master`后跟 a`git push upstream master`来避免`"Merging upstream/master into master"`在日志消息中看到类似的内容。正如我之前提到的，`git rebase`它也有自己的担忧。

在这种模式下，master 是您和上游之间发生所有合并和解析的地方。您不能直接合并到远程引用中，因为没有（本地）与之关联的分支。 `git merge`需要一个工作树来工作，以防万一出现合并冲突。但是在你的场景中你真的不需要它。合并上游主分支后，您可以毫无问题地将分支向上推。

# php - 根据内容长度使用 PHP 更改标签

> ID：16050922
> 
> 赞同：3
> 
> 时间：2013-04-17T03:25:52.910
> 
> 标签：php, html, tinymce, htmlpurifier

我正在编写一个为用户提供 tinymce HTML 编辑器的应用程序。我面临的问题是，尽管我经常要求我的用户使用“标题 2”（h2）样式来格式化他们的标题，但他们要么使用 h1（我可以处理！），要么使用新段落，然后将内容的段落加粗。

IE

```
<p><strong>This is a header</strong></p>
<p>Content content blah blah blah.</p> 
```

我想做的是找到所有的实例，`<p><strong>`其中说的单词少于八个，然后用 h2 替换它们。

做这个的最好方式是什么？

更新：感谢 Jack 的代码，我已经开发了一个简单的模块，它可以完成我在此处描述的所有内容以及更多内容。[代码在 GitHub 上](https://github.com/timgws/CleanHTML/blob/master/src/CleanHTML/CleanHTML.php#L231-L262)。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-17T03:58:57.887

你可以用[`DOMDocument`](http://php.net/domdocument)这个。找到 的`<strong>`子标签`<p>`，计算单词数并用 > 替换节点和父标签`<h2`：

```
$content = <<<'EOM'
<p><strong>This is a header</strong></p>
<p>Content content blah blah blah.</p>
EOM;

$doc = new DOMDocument;
$doc->loadHTML($content);
$xp = new DOMXPath($doc);

foreach ($xp->query('//p/strong') as $node) {
        $parent = $node->parentNode;
        if ($parent->textContent == $node->textContent && 
                str_word_count($node->textContent) <= 8) {
            $header = $doc->createElement('h2', $node->textContent);
            $parent->parentNode->replaceChild($header, $parent);
        }
}

echo $doc->saveHTML(); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-17T03:34:56.837

Since you seem to be proficient in PHP, you may find the [PHP Simple HTML Dom Parser](http://simplehtmldom.sourceforge.net/) very intuitive for this task. Here's a snippet from the documentation showcasing a very simple way to change the tag name after locating the elements you're requesting:

```
$html = str_get_html("<div>foo <b>bar</b></div>");
$e = $html->find("div", 0);

echo $e->tag; // Returns: " div"
echo $e->outertext; // Returns: " <div>foo <b>bar</b></div>"
echo $e->innertext; // Returns: " foo <b>bar</b>"
echo $e->plaintext; // Returns: " foo bar"

Attribute Name  Usage
$e->tag     Read or write the tag name of element.
$e->outertext   Read or write the outer HTML text of element.
$e->innertext   Read or write the inner HTML text of element.
$e->plaintext   Read or write the plain text of element. 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-17T06:12:06.860

这是我处理的代码。

```
<?php

$content_old = <<<'EOM'
<p>&nbsp; </p>
<p>lol<strong>test</strong></p>
<p><strong>This is a header</strong></p>
<p>Content content blah blah blah.</p>
EOM;

$content = preg_replace("/<p[^>]*>[\s|&nbsp;]*<\/p>/", '', $content_old);

$doc = new DOMDocument;
$doc->loadHTML($content);
$xp = new DOMXPath($doc);

foreach ($xp->query('//p/strong') as $node) {
    $parent = $node->parentNode;
    if ($parent->textContent == $node->textContent && 
            str_word_count($node->textContent) <= 8) {
        $header = $doc->createElement('h2');
        $parent->parentNode->replaceChild($header, $parent);
        $header->appendChild($doc->createTextNode( $node->textContent ));
    }
}

// just using saveXML() is not good enough, because it adds random html tags
$xp = new DOMXPath($doc);
$everything = $xp->query("body/*"); // retrieves all elements inside body tag
$output = '';
if ($everything->length > 0) { // check if it retrieved anything in there
    foreach ($everything as $thing) {
        $output .= $doc->saveXML($thing) . "\n";
    }
};

echo "--- ORIGINAL --\n\n";
echo $content_old;
echo "\n\n--- UPDATED ---\n\n";
echo $output; 
```

当我运行脚本时，这是我得到的输出：

```
--- ORIGINAL --

<p>&nbsp; </p>
<p>lol<strong>test</strong></p>
<p><strong>This is a header</strong></p>
<p>Content content blah blah blah.</p>

--- UPDATED ---

<p>lol<strong>test</strong></p>
<h2>This is a header</h2>
<p>Content content blah blah blah.</p> 
```

## 更新#1

如果标签内有其他标签`<p><strong>`（例如，`<p><strong><a>`），那么整个`<p>`将被替换，这不是我的意图，这是毫无价值的。

通过将 if 更改为以下内容可以轻松解决此问题：

```
 if ($parent->textContent == $node->textContent &&
                str_word_count($node->textContent) <= 8 &&
                $node->childNodes->item(0)->nodeType == XML_TEXT_NODE) { 
```

## 更新#2

还值得注意的是，如果`<p><strong>`包含的 HTML 字符中的内容应该被转义（例如`&`），则原始 createElement 会导致问题。

旧代码是：

```
 $header = $doc->createElement('h2', $node->textContent);
        $parent->parentNode->replaceChild($header, $parent); 
```

新代码（正常工作）是：

```
 $header = $doc->createElement('h2');
        $parent->parentNode->replaceChild($header, $parent);
        $header->appendChild($doc->createTextNode( $node->textContent )); 
```

# ios - 如何在我的 iOS 应用程序的 sqlite 中使 sql 查询不区分大小写

> ID：16050923
> 
> 赞同：1
> 
> 时间：2013-04-17T03:26:02.960
> 
> 标签：ios, sql, sqlite

我在我的 sqlite 数据库中执行 sql 查询，如下所示：

```
NSString *queryString = [NSString stringWithFormat:@"SELECT * FROM PROFILE WHERE no = '%@'", txtNo.text]; 
```

但我需要查询不区分大小写。我怎么做？

在这方面需要一些指导。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-04-17T03:49:50.433

使用`upper()`功能：

```
SELECT * FROM PROFILE WHERE upper(no) = upper(?); 
```

你永远不应该用它`stringWithFormat`来创建你的查询。正确使用`sqlite3_bind_xxx`将值绑定到查询。这样做的原因是正确使用`sqlite3_bind_xxx`将确保正确引用该值并正确转义任何特殊字符。阅读 SQL injection hacks，了解正确转义的重要性。

# css - 为什么不使用边距定位而不是使用 position:relative top 5px？

> ID：16050924
> 
> 赞同：16
> 
> 时间：2013-04-17T03:26:09.263
> 
> 标签：css, html

标题，基本上。我一直在使用边距定位而不是类似的东西做很多工作`position: relative`，只是因为我不知道你可以这样控制它。

`margin`应该做什么，为什么我应该在完成工作`position`时使用？`margin`

* * *

## 回答 #1

> 赞同：20
> 
> 时间：2013-04-17T03:59:31.183

简而言之，边距在元素框周围添加空间，并修改页面流中为其保留的空间量以匹配。因此，上边距将一个块向下移动，同时也将其后面的所有内容向下移动。底部边距将跟随它的内容向下移动，同时将块本身留在同一位置。这非常直观，并且可能完全符合您的预期。

相对定位做了一些奇怪的事情：它改变了块的*绘制*位置，而不是为其保留的空间。因此，如果您使用相对定位并将 top 设置为 10px，则一个框将在页面下方移动 10px ——但它之后的内容不会移动。这可能会导致一个框与它后面的内容重叠。

如果您真的想要一个奇怪的效果（并查看实际的相对定位），请将 float: left 和 relative 定位应用于一个小块。该块将被移动，但为其保留的区域将保留在其原始位置。

我为你做了一个例子：

```
<div style="position: relative; left: -100px; width: 100px; height: 100px; float: left;">
</div> (lorem ipsum text) 
```

**[小提琴](http://jsfiddle.net/LgF2x/)**

* * *

## 回答 #2

> 赞同：12
> 
> 时间：2013-04-17T03:28:27.090

首先，静态定位忽略了`top`价值，所以我认为你的问题有点困惑。如果您要问的是`position:relative`，那么这里有一个解决该问题的答案。

一般来说，我认为使用边距和填充来相对于它们的邻居而不是相对定位来定位元素要好得多（这是我假设你真正要问的，因为静态定位忽略了该`top`值）。

相对定位或负边距可能会导致重叠的对象，这很少是我想要的，并且可能导致事件路由、边框、背景等的一些问题......如果这不是你想要的。我把你`position:relative`当作一个容器来装孩子`position: absolute`，但几乎从来没有用它来单独移动一个元素，因为边框和填充几乎总是更干净。

至于你关于保证金做什么的问题的额外部分，你可能应该做一些搜索，然后阅读一些图表可能真的会帮助你想象这一点。边距是对象周围的一组外部像素。边距内是边框。边框内是内边距，内边距内是内容。因此，边距是边界外对象周围的像素数，而填充是边界与对象内容之间的像素数。

如果您没有指定边框，则边距和填充提供非常相似的效果，只是相邻对象的边距有时会折叠（例如合并为单个边距），但填充永远不会以这种方式组合，并且背景会延伸到边框，但不会低于边距。

这是关于边距与填充的 StackOverflow 问题/答案，它提供了一些其他有用的参考：[When to use margin vs padding in CSS](https://stackoverflow.com/questions/2189452/when-to-use-margin-vs-padding-in-css)

这是一篇关于 CSS 盒子模型的好[文章](http://www.w3.org/TR/CSS2/box.html)，它涵盖了边距和填充

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2018-05-14T09:57:07.740

使用这个技巧：

a) 查看 HTML5 的文档类型

b) 重置隐藏边距：

星号 { 边距：0；填充：0;}

# javascript - 使用 javascript 或 jQuery 生成 CSS 媒体查询

> ID：16050926
> 
> 赞同：17
> 
> 时间：2013-04-17T03:26:17.243
> 
> 标签：javascript, jquery, css, media-queries

是否可以使用 Javascript 或 jQuery 即时创建完整的媒体查询规则？

我使用了许多媒体查询来使用内联 CSS、导入和链接文件来定位通用视口和特定设备/屏幕：

```
@media screen and (min-width:400px) { ... }
@import url(foo.css) (min-width:400px);
<link rel="stylesheet" type="text/css" media="screen and (min-width: 400px)" href="foo.css" /> 
```

我可以使用 jQuery 添加/删除类：

```
$("foobar").click(function(){
  $("h1,h2,h3").addClass("blue");
  $("div").addClass("important");
  $('#snafu').removeClass('highlight');
}); 
```

我还查看`document.stylesheets`了看似古老且特定于浏览器的内容：

```
 document.styleSheets[0].insertRule("p{font-size: 20px;}", 0) 
```

但我找不到任何关于以编程方式生成的参考：

```
 @media screen and (min-width:400px) 
```

直接或以任何形式来自 javascript。

* * *

## 回答 #1

> 赞同：34
> 
> 时间：2013-04-17T03:49:34.277

您可以只更新现有`<style>`元素（或创建一个）`textContent`以包含规则，这将使其在给定上下文中有效。

```
document.querySelector('style').textContent +=
    "@media screen and (min-width:400px) { div { color: red; }}" 
```

[http://jsfiddle.net/vfLS3/](http://jsfiddle.net/vfLS3/)

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2016-02-29T14:57:38.893

我用这种方式。这允许更新文档中的多个样式

在 HTML 中：

```
<style class="background_image_styles">
</style> 
```

在 JS 中

```
$(".background_image_styles").text("@media (min-width: 1200px) {.user_background_image{background-image: url('https://placehold.it/1200x300');}}"); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2020-03-20T15:33:39.123

对于一般用途，您可以将样式表附加到`document.head`. 然后你可以把任何你想要的模组放在那里——包括媒体查询。由于它是 中的最终样式表`document.head`，因此它会覆盖任何先前的 CSS 规则。

香草 JavaScript：

```
 let style = document.getElementById('custom-styles');
    if (!style) {
      style = document.createElement('style');
      style.id = "custom-styles";
      document.head.appendChild(style);
    }
    style.innerHTML =
      "@media screen and (min-width:400px) {...}"; 
```

# c# - 获取有两条记录的元素列表

> ID：16050929
> 
> 赞同：0
> 
> 时间：2013-04-17T03:27:05.170
> 
> 标签：c#, linq

我有一张看起来有点像这样的桌子；

```
id - int
tpc - string
dcid - int
other fields 
```

独一无二的这对真的`tpc`和`dcid`。 `tpc`此时可以是 LQ 或 GR。可能还会有更多，但现在只有两个。

因此，我正在查看通过 LINQ 获取记录列表，其中有两条具有相同 dcid 的记录，一条用于 LQ，一条用于 GR。

所以如果我有以下数据；

```
1, GR, 1, ...
2, LQ, 1, ...
3, GR, 2, ...
4, GR, 3, ...
5, LQ, 3, ... 
```

我想要的返回列表是 1,2,4,5。
3 不会在列表中，因为它缺少 dcid 2 的 LQ 条目。

我尝试了各种查询，但在使用 tpc 检查两个 dcid 的逻辑时遇到了困难。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-17T05:32:13.680

```
var required = new List<string> { "LQ", "GR" };
var query = data
    .GroupBy(x => x.dcid)
    .Where(g => g
        .Select(x => x.tpc)
        .Intersect(required)
        .Count() == required.Count)
    .Select(g => g.Key); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-17T05:29:57.843

因此，如果我理解正确，您希望返回每个可用 TPC 类型存在记录的 ID。在您的示例中，有 2 种 TPC 类型，但可能还有更多。

像这样的工作：

```
var tpcs = new List<string>();

var filtered = records.GroupBy(record =>
{
  //Keep a track of the available TPC types
  if (!tpcs.Contains(record.TPC))
  {
    tpcs.Add(record.TPC);
  }

  return record.DCID;

})
.Where(group =>
{
  //Get the TPCs for the group
  var groupTpcs = group.Select(record => record.TPC);

  //Only return groups that have records for all the TPC types
  return groupTpcs.Intersect(tpcs).Count() == tpcs.Count;       
});

//Print groups
foreach (var group in filtered)
{
  Console.WriteLine(group.Key);
  foreach (var record in group)
  {
    Console.WriteLine("\tID = {0}, TPC = {1}, DCID = {2}", record.ID, record.TPC, record.DCID);
  }
} 
```

结果：

```
1
    ID = 1, TPC = GR, DCID = 1
    ID = 2, TPC = LQ, DCID = 1
3
    ID = 4, TPC = GR, DCID = 3
    ID = 5, TPC = LQ, DCID = 3 
```

如果您只想要 ID，请在 LINQ 语句的末尾添加 SelectMany

```
.SelectMany(group =>
{
  //Return a list of IDs for each record in the group
  return group.Select(record => record.ID);
}); 
```

不确定我会推荐这种方法。

# c# - C# WPF AutoCompleteBox - 返回列表中第一个匹配项的类似命名项目

> ID：16050938
> 
> 赞同：1
> 
> 时间：2013-04-17T03:28:22.720
> 
> 标签：c#, wpf, binding, autocomplete, selecteditem

我有一个 AutoCompleteBox，我使用 ProductCode 进行搜索。自动完成框的项目源是一个列表`List<Product>`，其中 Product 具有以下属性：ProductCode、ProductID、ProductBrandCode。

一切正常，除非当所选产品与列表中的另一个产品具有相同的 ProductCode 时我尝试检索 SelectedItem 属性。

例如，假设我有 6 种产品：

```
 ProductID | ProductCode | ProductBrandCode 
 1              t1                abc
 2              t34               zyx
 3              test123           abc
 4              test123           zxc 
 5              test123           asd
 6              t23               asd 
```

如果我选择第 5 个产品（ID 为 5），SelectedItem 将返回 ID = 3 的产品。如果我选​​择 id=4 的产品，也会发生同样的情况，我总是得到与 ProductCode 匹配的第一个产品。我假设这是由于在这种情况下我的 ValueMemberPath 设置为 ProductCode 女巫不是唯一的，并且 autoCompleteBox 以某种方式获取了第一个匹配的 ProductCode。如果我选择列表中没有重复 ProductCode 的产品，它工作得非常好。

这是它在 xaml 中的外观：

```
 <my:AutoCompleteBox x:Name="autoTxtBoxProductCode"
                 verticalAlignment="Top" HorizontalAlignment="Left"
                 Height="25" Margin="116,10,0,0"
                 Width="144" Background="#FFEDF4AB" 
                 TabIndex="2001" IsTabStop="True"
                 Populating="AutoBoxPopulateProductCode"    
                 ValueMemberPath="ProductCode"
                 Style="{StaticResource autoTextBoxInError}"
                 Validation.Error="Validation_Error"
                 PreviewKeyUp="autoTxtBoxProductCode_PreviewKeyUp"
                 IsTextCompletionEnabled="False" MinimumPrefixLength="2"
                 Text="{Binding Path=ProductCode,
                        UpdateSourceTrigger=PropertyChanged,
                        ValidatesOnDataErrors=true,
                        NotifyOnValidationError=true,
                        Mode=TwoWay}"
                        SelectedItem="{Binding Path=ProductID}">
                        <my:AutoCompleteBox.ItemTemplate>
                            <DataTemplate>
                                <StackPanel Orientation="Horizontal">
                                    <TextBlock Text="{Binding ProductBrandCode}"
                                               FontWeight="Bold"
                                               Foreground="Black"
                                               Width="65" FontSize="14"/>
                                    <TextBlock Text="{Binding ProductCode}"
                                                  Foreground="Black"/>
                                </StackPanel>
                            </DataTemplate>
                        </my:AutoCompleteBox.ItemTemplate>
                    </my:AutoCompleteBox> 
```

在我的代码中，我像这样检索所选项目：

```
 private void autoTxtBoxProductCode_PreviewKeyUp(object sender, KeyEventArgs e)
  {
   Product prd = (Product)(autoTxtBoxProductCode.SelectedItem);
   MessageBox.Show(prd.ProductID.ToString());
  } 
```

有没有办法解决这个问题？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-03-25T09:51:05.153

我有同样的问题。问题是当 DropDown 关闭框时会再次更新所选项目。所以我在我自己的 AutoCompleteBox 中抑制了这个事件。

```
class CustomAutoCompleteBox : System.Windows.Controls.AutoCompleteBox
{
    private bool dropDown = false;

    protected override void OnDropDownOpening(System.Windows.Controls.RoutedPropertyChangingEventArgs<bool> e)
    {
        base.OnDropDownOpening(e);
        dropDown = false;
    }

    protected override void OnDropDownClosing(System.Windows.Controls.RoutedPropertyChangingEventArgs<bool> e)
    {
        base.OnDropDownClosing(e);
        dropDown = true;
    }

    protected override void OnSelectionChanged(System.Windows.Controls.SelectionChangedEventArgs e)
    {
        if (!dropDown)
            base.OnSelectionChanged(e);
        else
            dropDown = false;
    }
} 
```

我希望我能帮助你。

* * *

编辑：我忘记了要重置的 OnDropDownOpening 事件。

# python - 使用 sqlite 在 python 中使用 cursor.execute 和 cursor.fetchall 的问题

> ID：16050940
> 
> 赞同：1
> 
> 时间：2013-04-17T03:28:27.043
> 
> 标签：python, sql, database, eclipse, sqlite

我在我的代码中将所有注释列表作为元组返回时遇到问题。这是我所拥有的：

```
def list_comments(db, limit=None):
    """return a list of all comments as tuples

       - tuples are (id, useremail, page, comment)
       if limit is provided it should be an integer and only that
       many comments will be returned
    """

    cursor.execute("SELECT * FROM comments")
    manyresults = cursor.fetchall()

    for row in cursor:
        return row 
```

所以我想做的是从我的评论表中选择所有内容并将其返回：

```
CREATE TABLE comments (
        id integer unique primary key autoincrement,
        useremail text,
        page text,
        comment text,
        FOREIGN KEY(useremail) REFERENCES users(email)
);""" 
```

我对这一切都很陌生，所以如果我完全错了，请让我知道我在哪里或做错了什么。谢谢！

编辑：这是我正在运行的测试

```
 def test_list_comments(self):
    """The list_comments procedure should return a list of tuples
    one for each of the comment entries in the database, each tuple
    should contain """

    clist = interface.list_comments(self.db)

    # we should have the same number of comments as we created
    self.assertEquals(len(clist), len(self.comments), "Wrong number of comments returned from list_units, expected %d, got %d" % (len(self.comments), len(clist)))

    # comments should be in order so the largest id should be first
    self.assertEquals(clist[0][0], self.comments[-1][0], "Wrong comment id first in comment list, expected %d, got %d" % (clist[0][0], self.comments[-1][0]))

    # and the comment list should be ordered by id
    ids = [c[0] for c in clist]
    self.assertEqual(sorted(ids, reverse=True), ids, "List of comments returned is not in large-to-small order: %s" % (ids,))

    # try the limit argument
    clist = interface.list_comments(self.db, 3)
    self.assertEquals(len(clist), 3, "Wrong number of comments returned from list_comments with a limit argument, expected 3, got %d" % (len(clist),)) 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-17T03:43:31.477

你有几个问题：

1.  你没有做任何事情的结果`cursor.fetchall()`
2.  您只返回第一个结果，而不是全部

我认为你需要的是：

```
cursor.execute("SELECT * FROM comments")
manyresults = cursor.fetchall()
return list(manyresults) 
```

虽然你也可以这样做：

```
return list(cursor.execute("SELECT * FROM comments")) 
```

# javascript - JQuery 下一节课

> ID：16050942
> 
> 赞同：0
> 
> 时间：2013-04-17T03:28:28.723
> 
> 标签：javascript, jquery, html

我需要启用禁用的下拉菜单并从 json 更改值。当我的程序有`<select></select><select></select>` 我的意思是连续选择时，它可以正常工作，但是当中间有元素时，它就不行了。

索引页面代码：

```
<ul>
 <li>
  <label>Item 1</label>
  <select name="item1" id="item1" class="update">
   <option value="">Select Item1</option>
   <option value="1">1</option>
   <option value="2">2</option>
  </select>
 </li>
 <li>
  <label>Item 2</label>
  <select name="item2" id="item2" class="update" disabled="disabled">
   <option value="">Select Item2</option>
   /*output based on item1*/
  </select>
</li>
<li>
 <label>Item 3</label>
 <select name="item3" id="item3" class="update" disabled="disabled">
  <option value="">Select Item3</option>
  /*output based on item2*/
 </select>
</li> 
```

在索引中加载的脚本（以及 jquery）：

```
var formObject = {
    run : function(obj) {
        if (obj.val() === '') {
            obj.nextAll('.update').html('<option value="">----</option>').attr('disabled', true);
        } else {
            var id = obj.attr('id');
            var v = obj.val();
            jQuery.getJSON('/test/mod/update.php', { id : id, value : v }, function(data) {
                if (!data.error) {
                    obj.next('.update').html(data.list).removeAttr('disabled');
                } else {
                    obj.nextAll('.update').html('<option value="">----</option>').attr('disabled', true);
                }
            });
        }
    }
};
$(function() {

    $('.update').live('change', function() {
        formObject.run($(this));
    });

}); 
```

我知道我需要改变

```
obj.next('.update').html(data.list).removeAttr('disabled'); 
```

但想不通。

这也适用于 jquery 1.6.4 但不适用于 1.9.1 我需要更改哪个部分以更新代码以与最新的 jquery 兼容？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-17T03:32:25.863

而不是使用`.removeAttr('disabled')`use `.prop('disabled', false)`。 [`.prop`](http://api.jquery.com/prop/)自 1.6 以来，它被用作更新元素*属性*的方法，但在 1.7 之后更是如此

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-17T03:38:09.953

你应该这样

替换`obj.next('.update').html(data.list).removeAttr('disabled');` 为

```
 obj.parent().next().children().removeAttr('disabled'); 
```

jsfiddle：http: [//jsfiddle.net/habo/7vMw8/](http://jsfiddle.net/habo/7vMw8/)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-17T03:49:19.883

该[`.live()`](http://api.jquery.com/live/)函数在 jQuery 1.7 中被弃用，并在 jQuery 1.9 中被删除。

您可以`.on()`改用：

```
$(document.body).on('change', '.update', function() {
    formObject.run($(this));
}); 
```

使用 时`.on()`，使用要为其调用处理程序的元素的最近祖先是最有效的。`document.body`因此，您可以使用该`<ul>`元素而不是 using 。不过，如果该元素具有“id”属性会更容易。

为了处理`<select>`不是兄弟姐妹的元素，我建议改变以下情况：

```
obj.nextAll('.update').html(...
obj.next('.update').html(... 
```

对此：

```
obj.closest('li').nextAll().find('.update').html(...
obj.closest('li').next().find('.update').html(... 
```

当然，您还应该`.prop()`按照@Explosion Pills 的建议用于启用/禁用。

# c - Call to malloc never returns on an embedded system - weird one

> ID：16050944
> 
> 赞同：1
> 
> 时间：2013-04-17T03:29:12.223
> 
> 标签：c, gcc, assembly, embedded

I'm trying to use malloc on an embedded system, specifically a nordic cortex m0\. I'm using gcc 4.6.3\. If I compile with uVision, the call works, if I compile with gcc it doesn't. I'm at the end of my rope. I've whittled my main file down to the following (I can only interact with the board over serial, hence the uart commands). I don't think it's a library inclusion problem, but I've included the .map file as well. I did notice one odd thing if I log &malloc and then look at the map, the address seems to be off by one. Is that normal? If malloc is in the map at say 0x200 and I log &malloc I get 0x201\. Any help would be greatly appreciated.

EDIT: The code compiles in both compilers. The malloc call completes successfully when I compile with uVision, but when I compile with gcc, the call to malloc never returns.

```
#include <stdlib.h>
#include "boards.h"
#include "simple_uart.h"

void logSt(const char *str){
    simple_uart_putstring((const uint8_t *) str);
    simple_uart_putstring((const uint8_t *) "\r\n");
}

void logCh(const char ch){
    simple_uart_put(ch);
}

int main(void)
{

    simple_uart_config(
        RTS_PIN_NUMBER, 
        TX_PIN_NUMBER, 
        CTS_PIN_NUMBER, 
        RX_PIN_NUMBER, HWFC);

    logSt(" ----- System Started -------");

    logSt("before malloc");

    void *p = malloc(sizeof(int));
    /* NEVER GETS HERE */
    logSt("after malloc"); 
    int *i = (int *)p;
    logSt("after malloc");
    *i = 3;
    logCh((char)(*i));

    return(0);

} 
```

.map file (library paths have been shortened, and I removed the debug sections so I could fit it all, that's where the ... are.)

```
Archive member included because of file (symbol)

lib/armv6-m/libc.a(lib_a-malloc.o)
                              build/hw-debug/main.o (malloc)
lib/armv6-m/libc.a(lib_a-mallocr.o)
                              lib/armv6-m/libc.a(lib_a-malloc.o) (_malloc_r)
lib/armv6-m/libc.a(lib_a-mlock.o)
                              lib/armv6-m/libc.a(lib_a-mallocr.o) (__malloc_lock)
lib/armv6-m/libc.a(lib_a-sbrkr.o)
                              lib/armv6-m/libc.a(lib_a-mallocr.o) (_sbrk_r)
lib/armv6-m/libc.a(lib_a-freer.o)
                              lib/armv6-m/libc.a(lib_a-malloc.o) (_free_r)
lib/armv6-m/libc.a(lib_a-impure.o)
                              lib/armv6-m/libc.a(lib_a-malloc.o) (_impure_ptr)
lib/armv6-m/libc.a(lib_a-reent.o)
                              lib/armv6-m/libc.a(lib_a-sbrkr.o) (errno)
lib/armv6-m/libcs3.a(start_c.o)
                              (__cs3_start_c)
lib/armv6-m/libcs3unhosted.a(unhosted-sbrk.o)
                              lib/armv6-m/libc.a(lib_a-sbrkr.o) (_sbrk)
lib/armv6-m/libcs3unhosted.a(unhosted-start.o)
                              (_start)
lib/armv6-m/libc.a(lib_a-errno.o)
                              lib/armv6-m/libcs3unhosted.a(unhosted-sbrk.o) (__errno)
lib/armv6-m/libc.a(lib_a-init.o)
                              lib/armv6-m/libcs3.a(start_c.o) (__libc_init_array)
lib/armv6-m/libcs3.a(heap.o)
                              lib/armv6-m/libcs3unhosted.a(unhosted-sbrk.o) (__cs3_heap_limit)

Allocating common symbols
Common symbol       size              file

errno               0x4               lib/armv6-m/libc.a(lib_a-reent.o)

Memory Configuration

Name             Origin             Length             Attributes
rom              0x0000000000014000 0x000000000002c000 xr
ram              0x0000000020002000 0x0000000000002000 xrw
*default*        0x0000000000000000 0xffffffffffffffff

Linker script and memory map

LOAD lib/gcc/arm-none-eabi/4.6.3/armv6-m/crti.o
LOAD lib/gcc/arm-none-eabi/4.6.3/armv6-m/crtbegin.o
LOAD build/hw-debug/system_nrf51.o
LOAD build/hw-debug/main.o
LOAD build/hw-debug/simple_uart.o
LOAD build/hw-debug/gcc_startup_nrf51.o
START GROUP
LOAD lib/gcc/arm-none-eabi/4.6.3/armv6-m/libgcc.a
LOAD lib/armv6-m/libc.a
LOAD lib/armv6-m/libcs3.a
LOAD lib/armv6-m/libcs3unhosted.a
LOAD lib/armv6-m/libm.a
LOAD lib/armv6-m/libstdc++.a
END GROUP
START GROUP
LOAD lib/gcc/arm-none-eabi/4.6.3/armv6-m/libgcc.a
LOAD lib/armv6-m/libc.a
END GROUP
LOAD lib/gcc/arm-none-eabi/4.6.3/armv6-m/crtend.o
LOAD lib/gcc/arm-none-eabi/4.6.3/armv6-m/crtn.o
START GROUP
LOAD lib/gcc/arm-none-eabi/4.6.3/armv6-m/libgcc.a
LOAD lib/armv6-m/libc.a
LOAD lib/armv6-m/libcs3.a
LOAD lib/armv6-m/libcs3unhosted.a
END GROUP
                0x00000000200028b0                PROVIDE (__cs3_heap_start, _end)
                0x0000000020004000                PROVIDE (__cs3_heap_end, (__cs3_region_start_ram + __cs3_region_size_ram))
                0x0000000000000001                PROVIDE (__cs3_region_num, ((__cs3_regions_end - __cs3_regions) / 0x14))
                0x0000000020004000                PROVIDE (__cs3_stack, (__cs3_region_start_ram + __cs3_region_size_ram))

.text           0x0000000000014000      0xe84
 CREATE_OBJECT_SYMBOLS
                0x0000000000014000                __cs3_region_start_rom = .
 *(.cs3.region-head.rom)
                0x0000000000000001                ASSERT ((. == __cs3_region_start_rom), .cs3.region-head.rom not permitted)
                0x0000000000014000                __cs3_interrupt_vector = __cs3_interrupt_vector_cortex_m
 *(.cs3.interrupt_vector)
 .cs3.interrupt_vector
                0x0000000000014000       0xc0 build/hw-debug/gcc_startup_nrf51.o
                0x0000000000014000                __cs3_interrupt_vector_cortex_m
                0x0000000000000001                ASSERT ((. != __cs3_interrupt_vector_cortex_m), No interrupt vector)
                0x00000000000140c0                PROVIDE (__cs3_reset, __cs3_reset_cortex_m)
 *(.cs3.reset)
 .cs3.reset     0x00000000000140c0       0x20 build/hw-debug/gcc_startup_nrf51.o
                0x00000000000140c0                __cs3_reset_cortex_m
                0x0000000000014128                PROVIDE (__cs3_start_asm, _start)
 *(.text.cs3.init)
 .text.cs3.init
                0x00000000000140e0       0x48 lib/armv6-m/libcs3.a(start_c.o)
                0x00000000000140e0                __cs3_start_c
 .text.cs3.init
                0x0000000000014128       0x10 lib/armv6-m/libcs3unhosted.a(unhosted-start.o)
                0x0000000000014128                _start
 *(.text .text.* .gnu.linkonce.t.*)
 .text          0x0000000000014138        0x0 lib/gcc/arm-none-eabi/4.6.3/armv6-m/crti.o
 .text          0x0000000000014138       0x60 lib/gcc/arm-none-eabi/4.6.3/armv6-m/crtbegin.o
 .text          0x0000000000014198        0x0 build/hw-debug/system_nrf51.o
 .text.SystemInit
                0x0000000000014198       0x34 build/hw-debug/system_nrf51.o
                0x0000000000014198                SystemInit
 .text.SystemCoreClockUpdate
                0x00000000000141cc       0x10 build/hw-debug/system_nrf51.o
                0x00000000000141cc                SystemCoreClockUpdate
 .text          0x00000000000141dc        0x0 build/hw-debug/main.o
 .text.logSt    0x00000000000141dc       0x20 build/hw-debug/main.o
                0x00000000000141dc                logSt
 .text.logCh    0x00000000000141fc       0x20 build/hw-debug/main.o
                0x00000000000141fc                logCh
 .text.main     0x000000000001421c       0x68 build/hw-debug/main.o
                0x000000000001421c                main
 .text          0x0000000000014284        0x0 build/hw-debug/simple_uart.o
 .text.nrf_delay_us
                0x0000000000014284       0x3c build/hw-debug/simple_uart.o
 .text.nrf_gpio_cfg_output
                0x00000000000142c0       0x18 build/hw-debug/simple_uart.o
 .text.nrf_gpio_cfg_input
                0x00000000000142d8       0x2c build/hw-debug/simple_uart.o
 .text.simple_uart_get
                0x0000000000014304       0x2c build/hw-debug/simple_uart.o
                0x0000000000014304                simple_uart_get
 .text.simple_uart_get_with_timeout
                0x0000000000014330       0x78 build/hw-debug/simple_uart.o
                0x0000000000014330                simple_uart_get_with_timeout
 .text.simple_uart_put
                0x00000000000143a8       0x40 build/hw-debug/simple_uart.o
                0x00000000000143a8                simple_uart_put
 .text.simple_uart_putstring
                0x00000000000143e8       0x50 build/hw-debug/simple_uart.o
                0x00000000000143e8                simple_uart_putstring
 .text.simple_uart_config
                0x0000000000014438       0xdc build/hw-debug/simple_uart.o
                0x0000000000014438                simple_uart_config
 .text          0x0000000000014514        0xc build/hw-debug/gcc_startup_nrf51.o
                0x0000000000014514                NMI_Handler
                0x0000000000014516                HardFault_Handler
                0x0000000000014518                SVC_Handler
                0x000000000001451a                PendSV_Handler
                0x000000000001451c                SysTick_Handler
                0x000000000001451e                RADIO_IRQHandler
                0x000000000001451e                SWI4_IRQHandler
                0x000000000001451e                TEMP_IRQHandler
                0x000000000001451e                QDEC_IRQHandler
                0x000000000001451e                UART0_IRQHandler
                0x000000000001451e                SWI5_IRQHandler
                0x000000000001451e                WUCOMP_COMP_IRQHandler
                0x000000000001451e                TIMER0_IRQHandler
                0x000000000001451e                SWI0_IRQHandler
                0x000000000001451e                TIMER1_IRQHandler
                0x000000000001451e                ECB_IRQHandler
                0x000000000001451e                Default_Handler
                0x000000000001451e                ADC_IRQHandler
                0x000000000001451e                SWI3_IRQHandler
                0x000000000001451e                CCM_AAR_IRQHandler
                0x000000000001451e                WDT_IRQHandler
                0x000000000001451e                SWI2_IRQHandler
                0x000000000001451e                RNG_IRQHandler
                0x000000000001451e                SPI1_TWI1_IRQHandler
                0x000000000001451e                RTC1_IRQHandler
                0x000000000001451e                TIMER2_IRQHandler
                0x000000000001451e                SWI1_IRQHandler
                0x000000000001451e                SPI0_TWI0_IRQHandler
                0x000000000001451e                RTC0_IRQHandler
                0x000000000001451e                GPIOTE_IRQHandler
                0x000000000001451e                POWER_CLOCK_IRQHandler
 .text          0x0000000000014520       0x28 lib/armv6-m/libc.a(lib_a-malloc.o)
                0x0000000000014520                malloc
                0x0000000000014534                free
 .text          0x0000000000014548      0x510 lib/armv6-m/libc.a(lib_a-mallocr.o)
                0x0000000000014548                _malloc_r
 .text          0x0000000000014a58        0x8 lib/armv6-m/libc.a(lib_a-mlock.o)
                0x0000000000014a58                __malloc_lock
                0x0000000000014a5c                __malloc_unlock
 .text          0x0000000000014a60       0x24 lib/armv6-m/libc.a(lib_a-sbrkr.o)
                0x0000000000014a60                _sbrk_r
 .text          0x0000000000014a84      0x240 lib/armv6-m/libc.a(lib_a-freer.o)
                0x0000000000014a84                _malloc_trim_r
                0x0000000000014b2c                _free_r
 .text          0x0000000000014cc4        0x0 lib/armv6-m/libc.a(lib_a-impure.o)
 .text          0x0000000000014cc4      0x100 lib/armv6-m/libc.a(lib_a-reent.o)
                0x0000000000014cc4                cleanup_glue
                0x0000000000014ce0                _reclaim_reent
                0x0000000000014d80                _wrapup_reent
 .text          0x0000000000014dc4       0x34 lib/armv6-m/libcs3.a(start_c.o)
                0x0000000000014dc4                __cs3_premain
 .text          0x0000000000014df8       0x3c lib/armv6-m/libcs3unhosted.a(unhosted-sbrk.o)
                0x0000000000014df8                _sbrk
 .text          0x0000000000014e34        0x0 lib/armv6-m/libcs3unhosted.a(unhosted-start.o)
 .text          0x0000000000014e34        0xc lib/armv6-m/libc.a(lib_a-errno.o)
                0x0000000000014e34                __errno
 .text          0x0000000000014e40       0x44 lib/armv6-m/libc.a(lib_a-init.o)
                0x0000000000014e40                __libc_init_array
 .text          0x0000000000014e84        0x0 lib/armv6-m/libcs3.a(heap.o)
 .text          0x0000000000014e84        0x0 lib/gcc/arm-none-eabi/4.6.3/armv6-m/crtend.o
 .text          0x0000000000014e84        0x0 lib/gcc/arm-none-eabi/4.6.3/armv6-m/crtn.o
 *(.plt)
 *(.gnu.warning)
 *(.glue_7t)
 .glue_7t       0x0000000000000000        0x0 linker stubs
 *(.glue_7)
 .glue_7        0x0000000000000000        0x0 linker stubs
 *(.vfp11_veneer)
 .vfp11_veneer  0x0000000000000000        0x0 linker stubs
 *(.ARM.extab* .gnu.linkonce.armextab.*)
 .ARM.extab.cs3.reset
                0x0000000000014e84        0x0 build/hw-debug/gcc_startup_nrf51.o
 *(.gcc_except_table)

.v4_bx          0x0000000000014e84        0x0
 .v4_bx         0x0000000000000000        0x0 linker stubs

.iplt           0x0000000000014e84        0x0
 .iplt          0x0000000000000000        0x0 lib/gcc/arm-none-eabi/4.6.3/armv6-m/crti.o

.eh_frame_hdr
 *(.eh_frame_hdr)

.eh_frame       0x0000000000014e84        0x4
 *(.eh_frame)
 .eh_frame      0x0000000000014e84        0x0 lib/gcc/arm-none-eabi/4.6.3/armv6-m/crtbegin.o
 .eh_frame      0x0000000000014e84        0x4 lib/gcc/arm-none-eabi/4.6.3/armv6-m/crtend.o
                0x0000000000014e88                PROVIDE (__exidx_start, .)

.ARM.exidx      0x0000000000014e88        0x8
 *(.ARM.exidx* .gnu.linkonce.armexidx.*)
 .ARM.exidx.cs3.reset
                0x0000000000014e88        0x8 build/hw-debug/gcc_startup_nrf51.o
                0x0000000000014e90                PROVIDE (__exidx_end, .)

.rel.dyn        0x0000000000014e90        0x0
 .rel.iplt      0x0000000000000000        0x0 lib/gcc/arm-none-eabi/4.6.3/armv6-m/crti.o

.rodata         0x0000000000014e90       0x80
 *(.rodata .rodata.* .gnu.linkonce.r.*)
 .rodata        0x0000000000014e90       0x44 build/hw-debug/main.o
 .rodata        0x0000000000014ed4        0x4 lib/armv6-m/libc.a(lib_a-impure.o)
                0x0000000000014ed4                _global_impure_ptr
 .rodata.str1.4
                0x0000000000014ed8        0x4 lib/armv6-m/libc.a(lib_a-impure.o)
                0x0000000000014edc                . = ALIGN (0x4)
 *(.init)
 .init          0x0000000000014edc        0x4 lib/gcc/arm-none-eabi/4.6.3/armv6-m/crti.o
                0x0000000000014edc                _init
 .init          0x0000000000014ee0        0x8 lib/gcc/arm-none-eabi/4.6.3/armv6-m/crtn.o
                0x0000000000014ee8                . = ALIGN (0x4)
                0x0000000000014ee8                __preinit_array_start = .
 *(.preinit_array)
                0x0000000000014ee8                __preinit_array_end = .
                0x0000000000014ee8                . = ALIGN (0x4)
                0x0000000000014ee8                __init_array_start = .
 *(SORT(.init_array.*))
 *(.init_array)
 .init_array    0x0000000000014ee8        0x4 lib/gcc/arm-none-eabi/4.6.3/armv6-m/crtbegin.o
                0x0000000000014eec                __init_array_end = .
                0x0000000000014eec                . = ALIGN (0x4)
 *(.fini)
 .fini          0x0000000000014eec        0x4 lib/gcc/arm-none-eabi/4.6.3/armv6-m/crti.o
                0x0000000000014eec                _fini
 .fini          0x0000000000014ef0        0x8 lib/gcc/arm-none-eabi/4.6.3/armv6-m/crtn.o
                0x0000000000014ef8                . = ALIGN (0x4)
                0x0000000000014ef8                __fini_array_start = .
 *(.fini_array)
 .fini_array    0x0000000000014ef8        0x4 lib/gcc/arm-none-eabi/4.6.3/armv6-m/crtbegin.o
 *(SORT(.fini_array.*))
                0x0000000000014efc                __fini_array_end = .
                0x0000000000014efc                . = ALIGN (0x4)
 *crtbegin.o(.ctors)
 *(EXCLUDE_FILE(*crtend.o) .ctors)
 *(SORT(.ctors.*))
 *crtend.o(.ctors)
                0x0000000000014efc                . = ALIGN (0x4)
 *crtbegin.o(.dtors)
 *(EXCLUDE_FILE(*crtend.o) .dtors)
 *(SORT(.dtors.*))
 *crtend.o(.dtors)
                0x0000000000014efc                . = ALIGN (0x4)
                0x0000000000014efc                __cs3_regions = .
                0x0000000000014efc        0x4 LONG 0x0
                0x0000000000014f00        0x4 LONG 0x14f10 __cs3_region_init_ram
                0x0000000000014f04        0x4 LONG 0x20002000 __cs3_region_start_ram
                0x0000000000014f08        0x4 LONG 0x858 __cs3_region_init_size_ram
                0x0000000000014f0c        0x4 LONG 0x58 __cs3_region_zero_size_ram
                0x0000000000014f10                __cs3_regions_end = .
                0x0000000000014f10                . = ALIGN (0x8)
 *(.rom)
 *(.rom.b .bss.rom)
                0x0000000000014f10                _etext = .
                0x0000000000040000                __cs3_region_end_rom = (__cs3_region_start_rom + 0x2c000)
                0x000000000002c000                __cs3_region_size_rom = 0x2c000

.data           0x0000000020002000      0x858 load address 0x0000000000014f10
                0x0000000020002000                __cs3_region_start_ram = .
 *(.cs3.region-head.ram)
 *(.jcr)
 .jcr           0x0000000020002000        0x0 lib/gcc/arm-none-eabi/4.6.3/armv6-m/crtbegin.o
 .jcr           0x0000000020002000        0x4 lib/gcc/arm-none-eabi/4.6.3/armv6-m/crtend.o
 *(.got.plt)
 *(.got)
 *(.shdata)
 *(.data .data.* .gnu.linkonce.d.*)
 .data          0x0000000020002004        0x0 lib/gcc/arm-none-eabi/4.6.3/armv6-m/crti.o
 .data          0x0000000020002004        0x4 lib/gcc/arm-none-eabi/4.6.3/armv6-m/crtbegin.o
                0x0000000020002004                __dso_handle
 .data          0x0000000020002008        0x0 build/hw-debug/system_nrf51.o
 .data.SystemCoreClock
                0x0000000020002008        0x4 build/hw-debug/system_nrf51.o
                0x0000000020002008                SystemCoreClock
 .data          0x000000002000200c        0x0 build/hw-debug/main.o
 .data          0x000000002000200c        0x0 build/hw-debug/simple_uart.o
 .data          0x000000002000200c        0x0 build/hw-debug/gcc_startup_nrf51.o
 .data          0x000000002000200c        0x0 lib/armv6-m/libc.a(lib_a-malloc.o)
 .data          0x000000002000200c      0x410 lib/armv6-m/libc.a(lib_a-mallocr.o)
                0x000000002000200c                __malloc_av_
                0x0000000020002414                __malloc_sbrk_base
                0x0000000020002418                __malloc_trim_threshold
 .data          0x000000002000241c        0x0 lib/armv6-m/libc.a(lib_a-mlock.o)
 .data          0x000000002000241c        0x0 lib/armv6-m/libc.a(lib_a-sbrkr.o)
 .data          0x000000002000241c        0x0 lib/armv6-m/libc.a(lib_a-freer.o)
 *fill*         0x000000002000241c        0x4 00
 .data          0x0000000020002420      0x430 lib/armv6-m/libc.a(lib_a-impure.o)
                0x0000000020002420                _impure_ptr
 .data          0x0000000020002850        0x0 lib/armv6-m/libc.a(lib_a-reent.o)
 .data          0x0000000020002850        0x0 lib/armv6-m/libcs3.a(start_c.o)
 .data          0x0000000020002850        0x4 lib/armv6-m/libcs3unhosted.a(unhosted-sbrk.o)
 .data          0x0000000020002854        0x0 lib/armv6-m/libcs3unhosted.a(unhosted-start.o)
 .data          0x0000000020002854        0x0 lib/armv6-m/libc.a(lib_a-errno.o)
 .data          0x0000000020002854        0x0 lib/armv6-m/libc.a(lib_a-init.o)
 .data          0x0000000020002854        0x4 lib/armv6-m/libcs3.a(heap.o)
                0x0000000020002854                __cs3_heap_limit
 .data          0x0000000020002858        0x0 lib/gcc/arm-none-eabi/4.6.3/armv6-m/crtend.o
 .data          0x0000000020002858        0x0 lib/gcc/arm-none-eabi/4.6.3/armv6-m/crtn.o
                0x0000000020002858                . = ALIGN (0x8)
 *(.ram)
                0x0000000020002858                _edata = .

.igot.plt       0x0000000020002858        0x0 load address 0x0000000000015768
 .igot.plt      0x0000000000000000        0x0 lib/gcc/arm-none-eabi/4.6.3/armv6-m/crti.o

.bss            0x0000000020002858       0x58 load address 0x0000000000015768
 *(.shbss)
 *(.bss .bss.* .gnu.linkonce.b.*)
 .bss           0x0000000020002858        0x0 lib/gcc/arm-none-eabi/4.6.3/armv6-m/crti.o
 .bss           0x0000000020002858       0x1c lib/gcc/arm-none-eabi/4.6.3/armv6-m/crtbegin.o
 .bss           0x0000000020002874        0x0 build/hw-debug/system_nrf51.o
 .bss           0x0000000020002874        0x0 build/hw-debug/main.o
 .bss           0x0000000020002874        0x0 build/hw-debug/simple_uart.o
 .bss           0x0000000020002874        0x0 build/hw-debug/gcc_startup_nrf51.o
 .bss           0x0000000020002874        0x0 lib/armv6-m/libc.a(lib_a-malloc.o)
 .bss           0x0000000020002874       0x34 lib/armv6-m/libc.a(lib_a-mallocr.o)
                0x0000000020002874                __malloc_top_pad
                0x0000000020002878                __malloc_current_mallinfo
                0x00000000200028a0                __malloc_max_sbrked_mem
                0x00000000200028a4                __malloc_max_total_mem
 .bss           0x00000000200028a8        0x0 lib/armv6-m/libc.a(lib_a-mlock.o)
 .bss           0x00000000200028a8        0x0 lib/armv6-m/libc.a(lib_a-sbrkr.o)
 .bss           0x00000000200028a8        0x0 lib/armv6-m/libc.a(lib_a-freer.o)
 .bss           0x00000000200028a8        0x0 lib/armv6-m/libc.a(lib_a-impure.o)
 .bss           0x00000000200028a8        0x0 lib/armv6-m/libc.a(lib_a-reent.o)
 .bss           0x00000000200028a8        0x0 lib/armv6-m/libcs3.a(start_c.o)
 .bss           0x00000000200028a8        0x0 lib/armv6-m/libcs3unhosted.a(unhosted-sbrk.o)
 .bss           0x00000000200028a8        0x0 lib/armv6-m/libcs3unhosted.a(unhosted-start.o)
 .bss           0x00000000200028a8        0x0 lib/armv6-m/libc.a(lib_a-errno.o)
 .bss           0x00000000200028a8        0x0 lib/armv6-m/libc.a(lib_a-init.o)
 .bss           0x00000000200028a8        0x0 lib/armv6-m/libcs3.a(heap.o)
 .bss           0x00000000200028a8        0x0 lib/gcc/arm-none-eabi/4.6.3/armv6-m/crtend.o
 .bss           0x00000000200028a8        0x0 lib/gcc/arm-none-eabi/4.6.3/armv6-m/crtn.o
 *(COMMON)
 COMMON         0x00000000200028a8        0x4 lib/armv6-m/libc.a(lib_a-reent.o)
                0x00000000200028a8                errno
                0x00000000200028b0                . = ALIGN (0x8)
 *fill*         0x00000000200028ac        0x4 00
 *(.ram.b .bss.ram)
                0x00000000200028b0                _end = .
                0x00000000200028b0                __end = .
                0x0000000020004000                __cs3_region_end_ram = (__cs3_region_start_ram + 0x2000)
                0x0000000000002000                __cs3_region_size_ram = 0x2000
                0x0000000000014f10                __cs3_region_init_ram = LOADADDR (.data)
                0x0000000000000858                __cs3_region_init_size_ram = (_edata - ADDR (.data))
                0x0000000000000058                __cs3_region_zero_size_ram = (_end - _edata)

 ...

.comment        0x0000000000000000       0x3d
 .comment       0x0000000000000000       0x3d lib/gcc/arm-none-eabi/4.6.3/armv6-m/crtbegin.o
                                         0x3e (size before relaxing)
 .comment       0x0000000000000000       0x3e build/hw-debug/system_nrf51.o
 .comment       0x0000000000000000       0x3e build/hw-debug/main.o
 .comment       0x0000000000000000       0x3e build/hw-debug/simple_uart.o
 .comment       0x0000000000000000       0x3e lib/armv6-m/libc.a(lib_a-malloc.o)
 .comment       0x0000000000000000       0x3e lib/armv6-m/libc.a(lib_a-mallocr.o)
 .comment       0x0000000000000000       0x3e lib/armv6-m/libc.a(lib_a-mlock.o)
 .comment       0x0000000000000000       0x3e lib/armv6-m/libc.a(lib_a-sbrkr.o)
 .comment       0x0000000000000000       0x3e lib/armv6-m/libc.a(lib_a-freer.o)
 .comment       0x0000000000000000       0x3e lib/armv6-m/libc.a(lib_a-impure.o)
 .comment       0x0000000000000000       0x3e lib/armv6-m/libc.a(lib_a-reent.o)
 .comment       0x0000000000000000       0x3e lib/armv6-m/libc.a(lib_a-errno.o)
 .comment       0x0000000000000000       0x3e lib/armv6-m/libc.a(lib_a-init.o)
 .comment       0x0000000000000000       0x3e lib/gcc/arm-none-eabi/4.6.3/armv6-m/crtend.o

.stack          0x0000000000000000      0x800
 .stack         0x0000000000000000      0x800 build/hw-debug/gcc_startup_nrf51.o
                0x0000000000000000                __cs3_stack_mem

.heap           0x0000000000000000      0x800
 .heap          0x0000000000000000      0x800 build/hw-debug/gcc_startup_nrf51.o
                0x0000000000000000                __cs3_heap_start
                0x0000000000000800                __cs3_heap_end

 ...

.ARM.attributes
                0x0000000000000000       0x2f
 *(.ARM.attributes)
 .ARM.attributes
                0x0000000000000000       0x1f lib/gcc/arm-none-eabi/4.6.3/armv6-m/crti.o
 .ARM.attributes
                0x000000000000001f       0x2d lib/gcc/arm-none-eabi/4.6.3/armv6-m/crtbegin.o
 .ARM.attributes
                0x000000000000004c       0x33 build/hw-debug/system_nrf51.o
 .ARM.attributes
                0x000000000000007f       0x33 build/hw-debug/main.o
 .ARM.attributes
                0x00000000000000b2       0x33 build/hw-debug/simple_uart.o
 .ARM.attributes
                0x00000000000000e5       0x23 build/hw-debug/gcc_startup_nrf51.o
 .ARM.attributes
                0x0000000000000108       0x2d lib/armv6-m/libc.a(lib_a-malloc.o)
 .ARM.attributes
                0x0000000000000135       0x2d lib/armv6-m/libc.a(lib_a-mallocr.o)
 .ARM.attributes
                0x0000000000000162       0x2d lib/armv6-m/libc.a(lib_a-mlock.o)
 .ARM.attributes
                0x000000000000018f       0x2d lib/armv6-m/libc.a(lib_a-sbrkr.o)
 .ARM.attributes
                0x00000000000001bc       0x2d lib/armv6-m/libc.a(lib_a-freer.o)
 .ARM.attributes
                0x00000000000001e9       0x2d lib/armv6-m/libc.a(lib_a-impure.o)
 .ARM.attributes
                0x0000000000000216       0x2d lib/armv6-m/libc.a(lib_a-reent.o)
 .ARM.attributes
                0x0000000000000243       0x2d lib/armv6-m/libcs3.a(start_c.o)
 .ARM.attributes
                0x0000000000000270       0x2d lib/armv6-m/libcs3unhosted.a(unhosted-sbrk.o)
 .ARM.attributes
                0x000000000000029d       0x1d lib/armv6-m/libcs3unhosted.a(unhosted-start.o)
 .ARM.attributes
                0x00000000000002ba       0x2d lib/armv6-m/libc.a(lib_a-errno.o)
 .ARM.attributes
                0x00000000000002e7       0x2d lib/armv6-m/libc.a(lib_a-init.o)
 .ARM.attributes
                0x0000000000000314       0x2d lib/armv6-m/libcs3.a(heap.o)
 .ARM.attributes
                0x0000000000000341       0x2d lib/gcc/arm-none-eabi/4.6.3/armv6-m/crtend.o
 .ARM.attributes
                0x000000000000036e       0x1f lib/gcc/arm-none-eabi/4.6.3/armv6-m/crtn.o 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-17T16:46:07.427

地址的关闭 1 是 ARM 事物（Cortex）。它表明所讨论的函数是一个 Thumb 函数。CPU 在跳转时剥离低位，并在到达时将 CPU 设置为 Thumb。

您描述的 malloc 失败可能是由于代码中其他地方的错误内存写入破坏了堆管理系统。它出现在 GCC 中的原因是内存的组织方式不同，并且错误的写入是用 GCC 和其他一些随机的 RAM 用 uVision 撞击堆管理器（如果它是运行时错误。）

现在你的 malloc 问题到底是什么？无限循环？记不清？还是编译/链接时错误？如果是这样，那么它可能是库、死区，甚至没有编译您的项目，并且启用了交互工作的类型问题（因为 malloc 是一个 Thumb 函数，而您的其他代码不是。）

请提供更多信息以获得更完整的答案。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-19T14:02:21.187

对我来说，问题似乎出在您为堆分配内存的启动文件中。您可以仔细检查用于 gcc 编译器的启动文件中的堆开始和堆结束位置是否正确并且没有超出为堆分配的边界。如果可能，请发布您分配堆内存的启动文件部分。

# r - 在 R 中选择随机数据点

> ID：16050946
> 
> 赞同：1
> 
> 时间：2013-04-17T03:29:22.970
> 
> 标签：r, random-sample

我有一个大数据集，我想创建原始数据集的 3 个随机选择（大小 = 50）子集。我只想从特定列（具体为第 13 列）中提取分数。

这在R中一定很容易做到，我应该怎么做？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-04-17T03:31:32.247

```
replicate(3, sample(200, 50)) 
```

`200`数据框中的行数在哪里（相应调整）。更自动地，假设数据在对象中`df`

```
replicate(3, sample(nrow(df), 50)) 
```

这是一个例子

```
set.seed(10)
df <- data.frame(x1 = rnorm(1000), x2 = rnorm(1000))

ind <- replicate(3, sample(nrow(df), 50))
head(ind)

> head(ind)
     [,1] [,2] [,3]
[1,]  380  220  702
[2,]   75  751  720
[3,]  775  278  153
[4,]  988  612  340
[5,]  282  568  925
[6,]  266  794  812 
```

这些列包含您想要的 3 个子集。然后您可以使用它来索引原始数据框，例如

```
df[ind[,1], "x2"]

> df[ind[,1], "x2"]
 [1]  0.57982435  0.27016645 -0.08435526  1.16768142  1.38124150  0.62444167
 [7] -0.54887437  1.91301831  1.84116197  0.94045377 -1.15417235 -0.06809104
[13] -2.03652525  1.06773801 -0.34235315 -0.24707548 -1.80470122  0.11993674
[19] -0.36358182  0.16819156 -1.84507669 -0.16707925 -1.80789383  0.78894210
[25] -0.05741295 -0.28905260  2.38724835  2.75762831 -0.18082554  1.61820620
[31] -0.48192569 -0.03298339  0.52087746  0.32774925  1.52103207 -0.15619668
[37] -0.49687983 -0.06623606  2.21855213 -0.48727519  1.01115806  0.25213485
[43]  1.01927105  0.31362619  0.40260968  0.26795767  0.01803656  0.19579576
[49] -0.26464131  0.48141105 
```

其中我取第一个子集和*唯一*变量`x2`。

请注意，这假设您要在不更换的情况下进行采样；换句话说，每一行**只能**`df`在一个子集中出现 0 次或 1 次，而不是多次。如果您想要后者，请参阅 中的论点。**`replace``?sample`**

 *** * *

## 回答 #2

> 赞同：1
> 
> 时间：2015-03-27T12:00:36.477

@Gavin 解决方案很好，但它可能会生成具有非空交集的子集。我的解决方案保证每一行最多在一个子集中。

```
k <- 3
x <- sample(nrow(df), 50*k, replace = FALSE) 
split(x, ceiling(seq_along(x)/50))
$`1`
 [1] 595 392 370 504 494 167 633 264 648 465 757 566 914 406 104 486 965 360 426 724 442 583
[23] 252 732 588 513  76 514 142 843 923 806 540 470 128 356  20 391 117 879 185 977 849 820
[45] 174 170 157 737 692 308

$`2`
 [1]  48 207   7 415 850 777 525  85 389 440 503 459 718 455 865 108 453 810 864 608 567 184
[23] 731 954 575 579 784 795 435 898 106  53 450 841 916 768  26 919 860 502 858 481 225 303
[45] 272 646  49 422 803 320

$`3`
 [1] 596 447 516 789 948 893 218 838 100 493 958 410 353 982  93 581 188 822 660 230 696 891
[23] 892 368 161 786  50 326 984 944 478 483 690 776 642 522 203 475 325 449 305 134 463 582
[45] 432 548 759   1 578 825 
```**

# ios - 故事板 segue 调用顺序

> ID：16050949
> 
> 赞同：0
> 
> 时间：2013-04-17T03:29:36.140
> 
> 标签：ios, storyboard, uistoryboardsegue

因此，我正在尝试使用 segues，并且刚刚使用手来`prepareForSegue`根据标识符获取目标控制器并将变量向上（向下）传递给链。但是我遇到了一个问题，我当前的 segue 依赖于 uitableView 的 NSIndexpath，并且在按下所述表的 uitableviewcell 时激活了 segue。问题是`prepareForSegue`之前被调用`tableViewDidSelect`的，我能想到的唯一可能的解决方案是使用预定的计时器......这确实不理想而且有点混乱，任何人都可以了解更多关于 seagues 等的信息，可以在这里帮帮我吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-17T03:38:17.100

没关系，我在这里找到了我的答案[Storyboard segue 在 UITableView 的 didSelectRow 之前被调用](https://stackoverflow.com/questions/13475365/storyboard-segue-gets-called-before-uitableviews-didselectrow)

本质上，我一直在寻找的答案是设置手动 seague，基本上是一个 segue，只有在通过代码显式调用而不是基于操作时才会执行。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-17T03:39:41.137

在 prepareForSegue 方法中，您可以通过

```
[self.tableView indexPathForSelectedRow].row 
```

这种情况在苹果的 [《你的第二个 iOS 应用》教程](http://developer.apple.com/library/ios/#documentation/iPhone/Conceptual/SecondiOSAppTutorial/)中有详细描述。您可以查看触发从 MasterViewController 到 DetailViewController 的 segue 时如何设置 DetailViewController（在教程中）的“瞄准”属性。转场称为“ShowSightingDetails”。

# python - 如何删除字符串中的所有标点符号？（Python）

> ID：16050952
> 
> 赞同：9
> 
> 时间：2013-04-17T03:29:58.163
> 
> 标签：python

例如：

```
asking="hello! what's your name?" 
```

我可以这样做吗？

```
asking.strip("!'?") 
```

* * *

## 回答 #1

> 赞同：22
> 
> 时间：2013-04-17T03:36:29.100

一个非常简单的实现是：

```
out = "".join(c for c in asking if c not in ('!','.',':')) 
```

并继续添加任何其他类型的标点符号。

一种更有效的方法是

```
import string
stringIn = "string.with.punctuation!"
out = stringIn.translate(stringIn.maketrans("",""), string.punctuation) 
```

编辑：这里有更多关于效率和其他实现的讨论： [Best way to strip punctuation from a string in Python](https://stackoverflow.com/questions/265960/best-way-to-strip-punctuation-from-a-string-in-python)

* * *

## 回答 #2

> 赞同：15
> 
> 时间：2013-04-17T03:31:55.147

```
import string

asking = "".join(l for l in asking if l not in string.punctuation) 
```

过滤[`string.punctuation`](http://docs.python.org/3/library/string.html#string.punctuation)。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-17T03:35:59.097

This works, but there might be better solutions.

```
asking="hello! what's your name?"
asking = ''.join([c for c in asking if c not in ('!', '?')])
print asking 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-04-17T03:43:22.193

剥离将不起作用。它只删除前导和尾随实例，而不是介于两者之间的所有内容：http: [//docs.python.org/2/library/stdtypes.html#str.strip](http://docs.python.org/2/library/stdtypes.html#str.strip)

玩过滤器的乐趣：

```
import string
asking = "hello! what's your name?"
predicate = lambda x:x not in string.punctuation
filter(predicate, asking) 
```

# jquery - 如何通过 jQuery 将 SOAP 结果传递给其他 SOAP

> ID：16050953
> 
> 赞同：0
> 
> 时间：2013-04-17T03:30:03.427
> 
> 标签：jquery, web-services, soap

是否可以获取 SOAP Web 服务的结果，然后使用 AJAX 将其传递给使用 jQuery 的其他 SOAP Web 服务？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-17T03:37:27.450

**从技术上讲，是的。**

从 HTML 页面，通过 Ajax，可以调用 SOAP Web 服务，因为从技术角度来看：

*   SOAP 调用只是一个 HTTP POST 请求（可以这样做，您必须自己构建 SOAP 信封）；和
*   SOAP 响应只是一个 XML 文件（因此可以被解析——尽管不像 Json 那样容易）。

**但有一个警告：**

它们（两个服务和页面）都必须在同一个域中，否则两个 Web 服务必须实现支持 CORS 请求。

查看[这个答案](https://stackoverflow.com/a/16007356/1850609)，详细解释为什么 CORS 是个麻烦。[这个问题](https://stackoverflow.com/a/16007356/1850609)（实际上是答案所在的问题）显示了一个可以调用 SOAP Web 服务的 HTML 示例。

在 ASP.NET Web 服务中启用 CORS：

您可以通过将以下行添加**到源页面来**通过 ASP.NET 添加标题：

```
Response.AppendHeader("Access-Control-Allow-Origin", "*"); 
```

更多详细信息：[使用 CORS 跨域访问 ASP.NET 服务](http://encosia.com/using-cors-to-access-asp-net-services-across-domains/)

# linux - File permissions get overwritten when editing file remotely in ubuntu

> ID：16050955
> 
> 赞同：2
> 
> 时间：2013-04-17T03:30:08.757
> 
> 标签：linux, ubuntu, file-permissions, remote-access

I use Ubuntu for development (12.10 currently). I usually work on files by mounting remote resource in nautilus by SSH. Files on the remote server are owned by different user and my user account is attached to that user's group so I can have full access. The problem I'm experiencing is that every time I edit a file and save it I become the owner of that file. This causes other users not being able to work on those file anymore. It seems like using FTP client like Filezilla solves the problem (ownership does not change) but I don't want to switch back using FTP client. I did a bit of research online and run across couple posts where people were heaving the same issue but the problem was not solved.

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-04-16T09:35:25.707

您正在远程服务器上编辑文件。其他用户是否有权访问您在该服务器上的用户文件夹和文件是否重要？可能不是。

假设您是用户`marcin`，具有组名`marcin`，那么您可以将其他用户添加到组`marcin`中。然后另一个用户 (john) 编辑一个文件并将所有权更改为`john:john`. 因此，您需要将所有用户添加到 group `john`。对应该有权访问这些文件的所有用户执行此操作。

不是一个漂亮的解决方案，但我想不出更好的解决方案。

# joomla - 尽管上传成功，但 Joomla 1.5 图像上传错误

> ID：16050958
> 
> 赞同：0
> 
> 时间：2013-04-17T03:30:23.637
> 
> 标签：joomla, joomla1.5

通过 RSGallery2 将图像上传到 Joomla 时，我不断收到以下消息：

[![joomla 错误消息消息](https://i.stack.imgur.com/8y5z0.png)](https://i.stack.imgur.com/8y5z0.png)

该图像显示在项目列表中，因此它显然有效，但显然上传脚本尝试将其复制到其他文件夹并失败。有谁知道那些可能是什么文件夹？谢谢。

我不是设置这个 Joomla 安装的人。这个项目是刚刚传给我的。我对Joomla一无所知。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-18T12:09:45.783

检查您对 /tmp 和 /cache 文件夹的权限（您可以在 Joomla 中名为目录权限的区域中执行此操作）

# c# - 从 Querystring 将匹配的字符串项添加到字典

> ID：16050959
> 
> 赞同：0
> 
> 时间：2013-04-17T03:30:25.540
> 
> 标签：c#, regex, dictionary

从 Querystring 将匹配项添加到字典

我的查询 =`"RecordFiles/findrecords/$filter=userid eq 8w4W4E and recordid eq 1catf2deb-4wdx-450c-97cd-6rre331d4a6ec";`

字符串 myRegexQueryPattern =`@"^(RecordFiles/findrecords/\$filter=userid eq)\s(?<userid>\S+)((\s(and recordid eq)\s(?<recordid>\w+))|())";`

```
 Dictionary<string, string> dataDictionary;
            Regex myregx = new Regex(myRegexQueryPattern, RegexOptions.IgnoreCase);
            bool status= AddToDictionary(myQuery, myregx, out dataDictionary); 
```

但是当我运行这段代码时，我只得到了 recordid 的第一部分并且正在跳过剩余的部分。

**实际结果**

> 记录ID=1catf2deb

**预期结果** 这里我的字典应该包含

> 记录ID = 1catf2deb-4wdx-450c-97cd-6rre331d4a6ec

有人可以帮我得到预期的结果吗？我的代码的哪一部分是错误的，我该如何更正我的代码以获得预期的结果

```
 public static bool AddToDictionary(string query, Regex regex, out Dictionary<string, string> data)
        {
            Match match = regex.Match(query);
            bool status = false;
            string[] groupNames = regex.GetGroupNames();
            data = new Dictionary<string, string>();
            if (match.Success)
            {
                foreach (var groupName in groupNames)
                {
                    data.Add(groupName, match.Groups[groupName].Value);
                }
                status = true;
            }
            return status;
        } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-17T03:41:05.243

在你的正则表达式的这一部分

```
(?<recordid>\w+) 
```

您使用匹配所有单词字符的“\w”，字符“-”不是其中的一部分。

如果您将其编辑为

```
(?<recordid>\S+)
or even
(?<recordid>[\w-]+) if you can only allow \w or - 
```

我相信，您将能够获得您想要的价值。

将来，对于 Regexp 测试，我建议使用[RegExr](http://gskinner.com/RegExr/)。它可用于桌面，也可作为在线应用程序，直观地告诉您 RegEx 何时通过/未通过。

# python - 在哪里键入与 IDE 插入的主要样板代码相关的代码

> ID：16050964
> 
> 赞同：-1
> 
> 时间：2013-04-17T03:31:23.937
> 
> 标签：python, main, function

每当我创建新文件时，我的 IDE 总是自动将以下代码插入到我的 Python 项目中。

```
def main():
    pass

if __name__ == '__main__':
    main() 
```

我知道这段代码相对于函数的顺序做了什么，但我不确定我在哪里输入与这段代码相关的代码。

我见过很多例子，程序员在整个代码块之后（在第二个“main()”出现之后）键入他们的代码。但是，我也看到了一些程序员在“pass”和“if”之间输入代码的例子。

什么是公认的约定？为什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-17T03:35:04.407

The contents of the `if __name__ == '__main__':` block are executed only if you run the script (not import it), so it doesn't really matter if you do:

```
if __name__ == '__main__':
    ... 
```

Or:

```
def main():
    ...

if __name__ == '__main__':
    main() 
```

The first one is shorter, but the second one exposes a `main()` method which you can call from another module. Unless you expect that the `main()` method will be called from another module, it's personal preference.

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-17T03:37:05.577

它只是给你一个起点。`def main():`部分设置方法。你可以把你的代码放在那里。请注意，您不必这样做。这

```
if __name__ == '__main__':
    main() 
```

部分检查程序是否在没有导入的情况下运行。如果是这样，那么它运行 main();

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-17T03:34:48.340

You can type you code in either of the places you mentioned..

Coding within the main() function seems better as it is well organized.

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-04-17T03:39:14.503

如果需要，只需删除默认代码并开始输入。

# c# - 在 asp.net 中使用 dropzone.js

> ID：16050965
> 
> 赞同：21
> 
> 时间：2013-04-17T03:31:25.287
> 
> 标签：c#, javascript, jquery, asp.net

几天以来，我试图通过拖放界面实现多个文件上传。我搜索了很多，最后从 [http://www.dropzonejs.com/找到了我的确切要求](http://www.dropzonejs.com/)

我从上面的站点尝试了相同的步骤。但是，我无法在我的 aspx 页面中实现这个 dropzone 功能。

* * *

## 回答 #1

> 赞同：39
> 
> 时间：2013-04-17T04:49:32.243

假设您使用的是 Web 表单，您需要实现一个页面来读取发布的文件数据并将其保存到文件中。

示例 .ASPX

```
 <%@ Page Language="C#" AutoEventWireup="true" CodeBehind="WebForm1.aspx.cs" Inherits="Mvc4Application_Basic.WebForm1" %>

    <!DOCTYPE html>

    <html xmlns="http://www.w3.org/1999/xhtml">
    <head runat="server">
        <title></title>
        <script src="https://raw.github.com/enyo/dropzone/master/downloads/dropzone.js"></script>
        <link href="http://www.dropzonejs.com/css/general.css?v=7" rel="stylesheet" />
    </head>
    <body>
        <form id="frmMain" runat="server" class="dropzone">
            <div>
                <div class="fallback">
                    <input name="file" type="file" multiple />
                </div>
            </div>
        </form>
    </body>
    </html> 
```

示例代码隐藏

```
 public partial class WebForm1 : System.Web.UI.Page
    {
        protected void Page_Load(object sender, EventArgs e)
        {
            foreach (string s in Request.Files)
            {
                HttpPostedFile file = Request.Files[s];

                int fileSizeInBytes = file.ContentLength;
                string fileName = Request.Headers["X-File-Name"];
                string fileExtension = "";

                if (!string.IsNullOrEmpty(fileName))
                    fileExtension = Path.GetExtension(fileName);

                // IMPORTANT! Make sure to validate uploaded file contents, size, etc. to prevent scripts being uploaded into your web app directory
                string savedFileName = Path.Combine(@"C:\Temp\", Guid.NewGuid().ToString() + fileExtension);
                file.SaveAs(savedFileName);
            }
        }
    } 
```

如果您使用的是 MVC，请参阅此[https://stackoverflow.com/a/15670033/2288997](https://stackoverflow.com/a/15670033/2288997)

# php - Doctrine 1.2 中 Doctrine_Query 的奇怪行为

> ID：16050976
> 
> 赞同：0
> 
> 时间：2013-04-17T03:32:27.187
> 
> 标签：php, doctrine-1.2, doctrine-query

我有一个包含多个 orWhere 语句的查询。PHP 代码如下所示：

```
$firstDay = $params['datetimeForMonth']->format('Y-m-d');
$lastDay = $params['datetimeForMonth']->format('Y-m-t 23:59:59');
$whereStatement = "(s.level = ?
    AND s.idForLevel IN (?) 
    AND s.startDatetime BETWEEN '$firstDay' AND '$lastDay')";
$q = Doctrine_Query::create()
    ->from('Mmb_Model_Schedule s')
    ->where($whereStatement, ['prefecture', $this->id])
    ->orWhere($whereStatement, ['district', $districtIds])
    ->orWhere($whereStatement, ['municipality', $municipalityIds])
    ->orWhere($whereStatement, ['workplace',    $workplaceIds])
    ->orWhere($whereStatement, ['user', $userIds]); 
```

变量 $districtIds、$municipalityIds、$workplaceIds 和 $userIds 都提前定义为逗号分隔值。

此查询在除地区 ID 之外的每个级别都可以正常工作。查询中不会返回任何具有“地区”级别的记录。

真正奇怪的是，如果我不使用绑定参数而是插入以下代码，一切正常：

```
->orWhere("s.level = 'district' AND s.idForLevel IN ($districtIds) AND s.startDatetime BETWEEN '$firstDay' AND '$lastDay'") 
```

更令人气愤的是，即使这个查询作为一个单独的 where 语句（不包括所有其他语句）单独完成，如果我使用绑定参数，我也什么也得不到。

好像这还不够，我什至尝试更新表格，将'district'更改为'prefDistrict'，以防万一'district'这个词引起问题。没有改变。

尽管我将 EXACT SAME 数据作为绑定参数插入，就像直接输入它们时一样，但行为发生了巨大变化。这到底是怎么回事？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-05-21T17:21:25.073

我想说在`$districtIds`var 的值中一定有一些东西会绊倒 Doctrine 中的查询构建器。您可以发布这些值的样本吗？

此外，您是否查看过学说运行的生成 SQL（跟踪 SQL 日志或挂钩到 preExecute 事件）？我很想看到类似的输出。

（这可能应该是一个评论，但我的声誉还不够高；））

# android - Android：将 Iperf 作为单独的进程启动

> ID：16050979
> 
> 赞同：3
> 
> 时间：2013-04-17T03:32:49.147
> 
> 标签：android, networking, process

嗨，我正在使用 iperf 测试网络吞吐量，因为我正在使用 NDK 创建 iperf c 代码的可执行文件，并且我能够成功启动该过程，如下所示：

```
 Process process ;
 process = new ProcessBuilder().command(commandList).redirectErrorStream(true).start(); 
```

但我担心的是，如果我的应用程序在某个时候崩溃（因此没有崩溃，但万一它崩溃了），那么外部进程会继续运行，所以我需要一种方法来随时从任何活动或服务。因此，如果有人有任何想法，请提供帮助。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-26T14:23:18.260

好吧，JVM 领域的常用解决方案是使用`Runtime.addShutdownHook`，但 Android 版本带有此警告：

> 请注意，在 Android 上，应用程序生命周期不包括 VM 终止，因此调用此方法不会确保您的代码运行。相反，您应该使用最合适的生命周期通知（比如 Activity.onPause）。

由于您关心崩溃，您可以在任何可能崩溃的线程上设置未捕获的异常处理程序以杀死子进程（查找`Thread.setUncaughtExceptionHandler`）。

除此之外，如果你知道 PID，你可以`kill`用来发送信号（因为我们没有 pkill）。你可以尝试做`Runtime.getRuntime().exec("kill -SIGINT <PID-goes-here>");`

如果您没有 PID，Android 的标准图像带有一个版本，`ps`但不幸的是，不清楚它支持什么语法，所以我建议改为解析它的输出。（此外，它在基础映像中的事实让我相信 OEM 构建也会拥有它）。

但是，是的，这是停止进程的一种不必要的困难方法。这只是你必须为使用 JVM-ish 付出的代价——你应该构建 JNI 桥，而不是启动外部进程。

# c++ - 不断收到“查看'class 的声明”错误

> ID：16050981
> 
> 赞同：1
> 
> 时间：2013-04-17T03:33:09.113
> 
> 标签：c++, error-handling

我已经编写了代码，但是当我尝试运行它时不断得到以下信息：

```
1>------ Build started: Project: Project 2, Configuration: Debug Win32 ------
1>  Project 2.cpp
1>c:\users\geena\desktop\zaks stuff\project 2\project 2\project 2\account.h(6): error C2011: 'account' : 'class' type redefinition
1>          c:\users\geena\desktop\zaks stuff\project 2\project 2\project 2\account.h(6) : see declaration of 'account'
1>c:\users\geena\desktop\zaks stuff\project 2\project 2\project 2\checking.h(9): error C2504: 'account' : base class undefined
1>c:\users\geena\desktop\zaks stuff\project 2\project 2\project 2\creditcard.h(9): error C2504: 'account' : base class undefined
1>c:\users\geena\desktop\zaks stuff\project 2\project 2\project 2\saving.h(9): error C2504: 'account' : base class undefined
1>c:\users\geena\desktop\zaks stuff\project 2\project 2\project 2\project 2.cpp(45): error C2039: 'makeDeposit' : is not a member of 'saving'
1>          c:\users\geena\desktop\zaks stuff\project 2\project 2\project 2\saving.h(8) : see declaration of 'saving'
1>c:\users\geena\desktop\zaks stuff\project 2\project 2\project 2\project 2.cpp(59): error C2039: 'makeDeposit' : is not a member of 'checking'
1>          c:\users\geena\desktop\zaks stuff\project 2\project 2\project 2\checking.h(8) : see declaration of 'checking'
1>  Account.cpp
1>  Generating Code...
1>  Skipping... (no relevant changes detected)
1>  Saving.cpp
1>  CreditCard.cpp
1>  Checking.cpp
========== Build: 0 succeeded, 1 failed, 0 up-to-date, 0 skipped ========== 
```

我不确定这些错误是什么或我做错了什么......

这是我的主要（）：

```
#include "stdafx.h"
#include <iostream>
#include <string>
#include <sstream>
#include "Account.h"
#include "Checking.h"
#include "CreditCard.h"
#include "Saving.h"

using namespace std;

int main ()
{
    saving sa;
    creditCard cca;
    checking ca;

    string n;
    int option;
    int exit = 1;
    cout << endl;
    cout << "Checking Balance:" << " " << "          " << "Savings balance:" << " " << "          " << "Credit Card balance:" << " " << endl;
    cout << endl;
    cout << " (1) Savings Deposit " << endl;
    cout << " (2) Savings withdrawel " << endl;
    cout << " (3) Checking Deposit " << endl;
    cout << " (4) Write A Check " << endl;
    cout << " (5) Credit Card Payment " << endl;
    cout << " (6) Make A Charge " << endl;
    cout << " (7) Display Savings " << endl;
    cout << " (8) Display Checkings " << endl;
    cout << " (9) Display Credit Card " << endl;
    cout << " (0) Exit " << endl;
    cin >> option;

    do{

    switch ( option )

    {
        case 1 : {
                 double SamtD;
                 cout << " Please enter how much you would like to deposit into savings " << endl;
                 cin >> SamtD;
                 sa.makeDeposit(SamtD);
                 break;
                 }
        case 2 : {
                 double SamtW;
                 cout << " Please enter how much you would like to withdrawel "<< endl;
                 cin >> SamtW;
                 sa.doWithdraw(SamtW);
                 break;
                 }
        case 3 : {
                 double CamtD;
                 cout << " Please enter how much you would like to deposit into checkings " << endl;
                 cin >> CamtD;
                 ca.makeDeposit(CamtD);
                 break;
                 }
        case 4 : {
                 double CamtW;
                 int chkNum;
                 cout << " Please enter how much you wrote on the check " << endl;
                 cin >> CamtW;
                 cout << " Please enter the check number " << endl;
                 cin >> chkNum;
                 ca.writeCheck(chkNum, CamtW);
                 break;
                 }
        case 5 : {
                 double CCmkP;
                 cout << " Please enter the amount you would like to deposit " << endl;
                 cin >> CCmkP;
                 cca.makePayment(CCmkP);
                 break;
                 }
        case 6 : {
                 double DoC;
                 string Nm;
                 cout << " Please enter the amount charged to your credit card " << endl;
                 cin >> DoC;
                 cout << " Please enter where the charge was made " << endl;
                 getline(cin, Nm);
                 cca.doCharge(Nm,DoC);
                 break;
                 }
        case 7 : {
                 sa.display();
                 break;
                 }
        case 8 : {
                 ca.display();
                 break;
                 }
        case 9 : {
                 cca.display();
                 break;
                 }
        case 0 : exit = 0;
                 break;
        default : exit = 0;
                 cout << " ERROR ";
    }
    }
    while(exit==1);
    return 0;
} 
```

这是类 Saving.h（与检查和信用卡非常相似，所以我认为它们是相关问题：

```
#include "stdafx.h"
#include "iostream"
#include "Account.h"
#include <string>
#include <sstream>
using namespace std;

class saving: public account
{
public :

    double doWithdraw(double amount);
    string display();
    saving();
    saving(string itsName, long itsTaxID, double itsBalance);
}; 
```

这是用于保存的 .cpp 文件：

```
#include "stdafx.h"
#include "iostream"
#include "Saving.h"
#include <string>
#include <sstream>
using namespace std;

saving::saving():account()
{
}

saving::saving(string itsName, long itsTaxID, double itsBalance): account(itsName, itsTaxID, itsBalance)
{
}

double saving:: doWithdraw(double amount)
{
    return 0;
} 
```

这是基类account.h。储蓄支票和信用卡继承自此类：

```
#include "stdafx.h"
#include "iostream"
#include <string>
#include <sstream>
using namespace std;
class account {

public :
    void setName(string name); void setTaxID(long taxID); void setBalance(double balance);
    string getName(); long getTaxID(); double getBalance();
    double makeDeposit( double amount );
    account();
    account(string itsName, long itsTaxID, double itsBalance);
    int display();

private :
    string itsName;
    long itsTaxID;
    double itsBalance;

protected :
    double last10withdraws[10];
    double last10deposits[10];
    int numdeposits;
    int numwithdraws;

}; 
```

和 account.cpp ：

```
#include "stdafx.h"
#include <iostream>
#include "Account.h"
#include <string>
#include <sstream>

using namespace std;

account::account():itsName(""), itsTaxID(0), itsBalance(0)
{
}

account::account(string itsName, long itsTaxID, double itsBalance): itsName(), itsTaxID(), itsBalance()
{
}

void account::setName(string name)
{
    itsName = name;
}

string account::getName()
{
    return itsName;
}

void account::setTaxID(long taxID)
{
    itsTaxID = taxID;
}

long account::getTaxID()
{
    return itsTaxID;
}

void account::setBalance(double balance)
{
    balance = 100;
    itsBalance = balance;
}

double account::getBalance()
{
    return itsBalance;
}

double account::makeDeposit( double amount )
{
    return amount;
}

int account::display()
{
    return 0;
} 
```

知道为什么我不断收到这些错误吗？这对我来说毫无意义。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-17T03:39:41.620

您不断收到错误，因为头文件包含不止一次。这会导致编译器多次尝试编译类。由于该类已经被声明，你不能再这样做了。要解决这个问题，您需要使用*放在头文件中的头文件*保护。

```
#ifndef FILENAME_H // <--- first line of your header file.
#define FILENAME_H

// Place your header file contents here

#endif // <--- last line of your header file. 
```

`FILENAME_H`通常匹配头文件的文件名。

作为旁注，`#include "stdafx.h"`从头文件中删除。它仅属于 .cpp 文件，然后**仅**作为第一个.cpp 文件`#include`。例如，您的 account.h 文件看起来像这样

```
#ifndef ACCOUNT_H
#define ACCOUNT_H

#include "iostream"
#include <string>
#include <sstream>
using namespace std;
class account {

public :
    void setName(string name); void setTaxID(long taxID); void setBalance(double balance);
    string getName(); long getTaxID(); double getBalance();
    double makeDeposit( double amount );
    account();
    account(string itsName, long itsTaxID, double itsBalance);
    int display();

private :
    string itsName;
    long itsTaxID;
    double itsBalance;

protected :
    double last10withdraws[10];
    double last10deposits[10];
    int numdeposits;
    int numwithdraws;

};

#endif 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-17T03:44:09.373

我认为头文件被包含不止一次。只需`#pragma once`在每个头文件中添加第一行。

# java - Java 并发与数组列表（如何处理？）

> ID：16050982
> 
> 赞同：0
> 
> 时间：2013-04-17T03:33:10.597
> 
> 标签：java, design-patterns, observer-pattern, concurrentmodification

确实，当您在迭代时尝试修改数组列表时会收到 ConcurrentModificationException 错误，是吗？**但是，如果您首先删除**要修改的元素，遍历列表，然后再将元素**插入**回来，错误如何仍然存在？我不明白逻辑是否是这样的，为什么它会引发并发修改异常。

整个程序使用观察者模式。

* * *

该程序的目的是拥有多个文本框，当您输入一个时，其他文本框会更新为相同的文本。

**主题**- 界面

```
public interface Subject {

public void attach(Observer o);
public void detach(Observer o);
public void notifyAllObservers();
} 
```

**SubjectImpl** - 实现主题

```
import java.util.*;

public class SubjectImpl implements Subject {

private List <Observer> observers;

public SubjectImpl(){
    observers = new ArrayList<Observer>();
}

@Override
public void attach(Observer o) {
    observers.add(o);
}

@Override
public void detach(Observer o) {
    observers.remove(o);
}

@Override
public void notifyAllObservers() {
            //Iterating code
    for(Observer o: observers){
        o.update();
    }
}
} 
```

**观察者**- 界面

```
public interface Observer {
public void update();
} 
```

**编辑器**- 实现观察者

```
import java.awt.*
import java.io.*;
import javax.swing.*;

public class Editor extends JFrame implements DocumentListener, Observer {

private FileContentSubject reference;

    private JScrollPane textAreaScrollPane;
    private JTextArea textArea;

public Editor(FileContentSubject filecontentsubject) throws IOException {
    super("Editor");
    initComponents();

    this.reference = filecontentsubject;
    textArea.getDocument().addDocumentListener(reference);
    textArea.getDocument().putProperty("ownerEditor", this); 
}

private void initComponents(){

    textArea = new JTextArea();       

    //set location, size, visible and defaultcloseoperation here        

    getContentPane().setLayout(new BorderLayout());
    getContentPane().add(textArea, BorderLayout.CENTER);
}

@Override
public void update() {
    textArea.setText(reference.getState()); //Call to update each text box
}

@Override
public void changedUpdate(DocumentEvent e) {
}

@Override
public void insertUpdate(DocumentEvent e) {
}

@Override
public void removeUpdate(DocumentEvent e) {
}
} 
```

**文件内容系统**- 作为观察者中的具体主题（只有一个）

```
import javax.swing.event.*;
import javax.swing.text.*;

public class FileContentSubject implements Subject, DocumentListener {

private String state; //Current, most recent copy of everything

public String getState() {
    return this.state;
}

private SubjectImpl reference;

@Override
public void attach(Observer o) {
    reference.attach(o);
}

@Override
public void detach(Observer o) {
    reference.detach(o);
}

@Override
public void notifyAllObservers() {
    reference.notifyAllObservers();
}

public FileContentSubject() {
    reference = new SubjectImpl();
}

@Override
public void changedUpdate(DocumentEvent arg0) {
}

@Override
public void insertUpdate(DocumentEvent arg0) {

    Document doc = (Document) arg0.getDocument();
    try {
        this.state = doc.getText(0, doc.getLength());
    } catch (BadLocationException e) {
        e.printStackTrace();
    }

    Editor e = (Editor) doc.getProperty("ownerEditor");
    reference.detach(e); 
    notifyAllObservers(); 
    reference.attach(e); 
}

@Override
public void removeUpdate(DocumentEvent arg0) {

   //same as insertUpdate(DocumentEvent arg0) ^^
}

} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-17T05:07:26.000

我相信`ConcurrentModificationException`只有在使用 3 个或更多编辑器时才会抛出你的问题，对吧？无论如何，让我试着解释发生了什么。

假设您有 3 个`Editor`实例：“Editor1”、“Editor2”和“Editor3”。

当您在“Editor1”中输入文本时会发生这种情况（或者，我称之为“开始事件链”时）：

```
User types on Editor1 // chain begins
FileContentSubject detaches editor: Editor1
FileContentSubject begin notifyAllObservers(): [Editor2, Editor3]
    Editor2 receives update() to new state 
```

到目前为止，正常的行为，对吧？问题是当 Editor2's`update()`被调用时，它会更改 Editor2's `textArea`，并且`FileContentSubject` **也是**`DocumentListener`其中的一个`textArea`（就像是 Editor1's 一样`textArea`）。

这会触发一个新版本，从而创建一个**新**的“事件链”。在实践中，会发生以下情况（从头开始重复）：

```
User types on Editor1 // chain begins
FileContentSubject detaches editor: Editor1
FileContentSubject begin notifyAllObservers(): [Editor2, Editor3] // first notification
    Editor2 receives update() to new state // another chain begins! (the 1st chain didn't end yet!)
        FileContentSubject detaches editor: Editor2
        FileContentSubject begin notifyAllObservers(): [Editor3]
            Editor3 receives update() to new state // chain THREE!!
                FileContentSubject detaches editor: Editor3
                FileContentSubject begin notifyAllObservers(): [] // empty list... nobody to notify
                FileContentSubject reattaches editor: Editor3
                FileContentSubject ended notifyAllObservers(): [Editor3] // chain 3 over
        FileContentSubject reattaches editor: Editor2
        FileContentSubject ended notifyAllObservers(): [Editor3, Editor2] // chain 2 over 
```

这是`ConcurrentModificationException`被抛出的点。但它到底在哪里抛出，在代码上？

实际上，它在`SubjectImpl`（！）：

```
@Override
public void notifyAllObservers() {
    for (Observer o : observers) {
        o.update();
    }
} 
```

**问题是什么？**

事情是：

*   请注意，在`// first notification`注释行中有一个调用`notifyAllObservers()`
*   目前，附加的观察者列表是（按此顺序）[Editor2，Editor3]。
*   `notifyAllObservers()`，然后，当被调用时，开始在该列表上迭代
    *   迭代的第一步是调用`Editor2.update()`.
        *   `Editor2.update()`开始一个全新的链条...
        *   当该链结束时，附加的观察者列表现在是 [Editor3, Editor2] （注意：顺序已更改！）
    *   当`notifyAllObservers()`尝试继续迭代到下一步时，它注意到列表已更改并且... bam！`ConcurrentModificationException`被抛出。

为什么？因为您无法更改已开始迭代的列表。（使用迭代器或“foreach”。）

## 解决方案：

可能有很多，但最简单的就是停止“事件链”。为此，只需`update()`从以下位置更改`Editor`：

```
@Override
public void update() {
    textArea.setText(reference.getState()); // Call to update each text box
} 
```

到：

```
@Override
public void update() {
    textArea.getDocument().removeDocumentListener(reference);
    textArea.setText(reference.getState()); // Call to update each text box
    textArea.getDocument().addDocumentListener(reference);
} 
```

这是什么意思？这意味着当**由于其他人**而不是在其上键入而`Editor`改变自身时，他将不再通知(the )，他只会悄悄地改变。**`textArea``FileContentSubject``DocumentListener`**

 **这将从一开始就阻止任何第二个事件链。

希望我设法解释了这个问题！如果我可以更清楚地说明任何一点，请告诉我！干杯!

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-17T04:03:11.863

由于没有关于代码的问题，我正在回答带有问号的句子。

> 确实，当您在迭代时尝试修改数组列表时会收到 ConcurrentModificationException 错误，是吗？

真的。要引发 ConcurrentModificationException，您需要修改列表上调用方法的列表，然后尝试继续迭代。

> 但是，如果您首先删除要修改的元素，遍历列表，然后再将元素插入回来，错误如何仍然存在？我不明白逻辑是否是这样的，为什么它会引发并发修改异常。

当您使用 List.iterator() 创建迭代器时，您将使用 List 创建一个合约，您将使用刚刚创建的迭代器对象对 List 进行所有修改。

如果你直接删除一个元素 - List.remove() - 你违反了合同。

如果你直接添加一个元素 - List.add() - 你违反了合同。

列表或列表迭代器不关心是否修改元素本身。

希望，这将为您澄清事情。**

# php - preg_match 变量 php

> ID：16050985
> 
> 赞同：-1
> 
> 时间：2013-04-17T03:33:22.210
> 
> 标签：php, regex, preg-replace

我想匹配变量中的一些字符串。如果末尾有“i”或“an” `$var`，则返回true。

```
$__var = preg_replace('/^(i|an)$/','',$var); 
```

但它返回 0（假）。

例子：

```
$var = "kesehatan"; 
```

它应该返回`true`

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-17T03:35:15.497

Remove the `^`, otherwise you will only ever match `i` or `an`.

# python - 终端命令行python3.3

> ID：16050987
> 
> 赞同：-1
> 
> 时间：2013-04-17T03:33:41.707
> 
> 标签：python, python-3.x

我正在关注一本书教程，它告诉我使用命令行安装 python3.3

```
sudo apt-get install python3.3 
```

但是我遇到了错误

```
Unable to locate package python3.3
Couldn't find any package by regex 'python3.3; 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-17T03:42:36.413

检查链接： [https ://askubuntu.com/questions/244544/how-to-install-python-3-3](https://askubuntu.com/questions/244544/how-to-install-python-3-3)

只需安装python3.2.3。如下所示

```
sudo apt-get install python3 
```

# java - Guice：无法注入辅助列表

> ID：16050989
> 
> 赞同：0
> 
> 时间：2013-04-17T03:33:43.367
> 
> 标签：java, dependency-injection, guice, guice-3

我刚开始学习如何使用 Guice，但在尝试配置辅助注射时遇到了一些麻烦。我有以下界面：

```
public interface Individual extends Comparable<Individual>, Iterable<Long>{ ... } 
```

它将由工厂创建。构造函数必须接收一个长列表：

```
public interface IndividualFactory {
    public Individual createIndividual(List<Long> chromossomes);
} 
```

实现类有一个@Assisted 参数来接收列表：

```
public class IndividualImpl implements Individual {
@Inject
public IndividualImpl(
    ConfigurationService configurationService,
    RandomService randomService,
    FitnessCalculatorService fitnessService,
    @Assisted List<Long> chromossomes
    ) { ... } 
```

最后，这是我的模块类：

```
public class SimpleModule extends AbstractModule {
    @Override
    protected void configure() {
        bind(Individual.class).to(IndividualImpl.class);
        install(new FactoryModuleBuilder().implement(Individual.class,
            IndividualImpl.class).build(IndividualFactory.class));
} 
```

问题是我运行项目时显示此错误：

```
1) No implementation for java.util.ArrayList<java.lang.Long> annotated with @com.google.inject.assistedinject.Assisted(value=) was bound.
  while locating java.util.ArrayList<java.lang.Long> annotated with @com.google.inject.assistedinject.Assisted(value=)
    for parameter 3 at implementation.entities.IndividualImpl.<init>(IndividualImpl.java:25)
  at SimpleModule.configure(SimpleModule.java:36) 
```

如果我只是删除辅助参数（不仅是注释，而且是参数本身）一切正常。我无法弄清楚我做错了什么。我遵循了我找到的所有 Guice 教程，但找不到使用 List<>; 的辅助参数示例；但是，即使我将此参数更改为整数，例如，我也会收到相同的错误。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-18T11:43:20.557

消除：

```
bind(Individual.class).to(IndividualImpl.class); 
```

使用您指定将 IndividualImpl 用于 @Inject Individual 的绑定。这是没有意义的，因为您不会在代码中的任何地方@Inject Individual。您将改为 @Inject IndividualFactory。

遥不可及的是

```
bind(Individual.class).toProvider(BlowUpWithUseFactoryExceptionProvider.class); 
```

但这样做是没有意义的，因为默认行为是相似的。

我可以建议：

```
Iterable<Long> -> DnaContaining
List<Long> -> DnaMaterial 
```

# django - 如何在 Django 中加载应用程序特定的模板标签？

> ID：16050990
> 
> 赞同：1
> 
> 时间：2013-04-17T03:33:46.740
> 
> 标签：django, django-templates

我从同一个项目中的不同应用程序调用此模板标签。但是，我想对其进行更改，以使其在我正在开发的应用程序上更好地工作。

我只是`templatetags`在我的应用程序中创建了一个目录并在其中复制了模板标记文件，然后进行了我的更改。所以它看起来像这样：

```
theotherapp/templatetags/sometags.py
myapp/templatetags/sometags.py 
```

我注意到的是，另一个应用程序的模板标签仍在使用中。但是当我在我的应用程序中更改模板标签的文件名时......

```
myapp/templatetags/sometags.py -> myapp/templatetags/sometags_myapp.py 
```

然后将加载的模板标签重命名为我脚本中的新标签，它按预期工作。但我不想那样做。

**我的问题是：**
我如何让 Django 知道使用我的应用程序本地的模板标记脚本，因为它与另一个应用程序的模板标记具有相同的文件名？

但我仍然想保留 Django 仍然查看其他应用程序的模板标签，因为项目中的其他应用程序都依赖于它。

顺便说一句，我正在使用 Django 1.3。

# ruby - 定义自定义 DataMapper 属性类型时出现 NoMethodError

> ID：16050992
> 
> 赞同：0
> 
> 时间：2013-04-17T03:33:53.417
> 
> 标签：ruby, datamapper, ruby-datamapper

我正在使用 DataMapper 1.2.0 并尝试定义自定义属性类型以保存在数据库中。我试图了解我应该如何做到这一点，但我不断得到一个`NoMethodError`.

对象是 a `Dog`，但这种类型来自我无法控制的 gem，所以我不能让它继承自`DataMapper::Property::Object`，所以我认为我需要创建一个新类型，它将作为自定义属性（`DatabaseDog`）。我从[文档](http://datamapper.org/docs/dm_more/types.html)中的理解是它需要两种方法：

*   `#load(value)`从数据库中获取一个字符串并返回`Dog`它所代表的
*   `#dump(value)`接受一个`Dog`并返回一个字符串，该字符串将保存在数据库中

我不断收到错误的事实让我认为我误解了这一点。

我应该如何正确创建此自定义类型？

**编辑：**我稍微改变了转储方法，发现它一直在接收一个字符串。为什么`#dump`接收字符串作为参数？它不应该接收`Dog`我分配的对象吗？

## 测试.rb

```
# The setup

require 'dm-core'
require 'dm-migrations'
require 'dm-sqlite-adapter'

class Dog
  attr_accessor :name
end

class DatabaseDog < DataMapper::Property::Text
  def load(value)
    d = Dog.new
    d.name = value
    d
  end

  def dump(value)
    puts "got here: #{value.inspect}"
    if value.nil?
      value
    else
      value.name
    end
  end
end

class User
  include DataMapper::Resource
  property :id, Serial, key: true
  property :pet, DatabaseDog
end

DataMapper.setup(:default, "sqlite3://#{File.join(Dir.pwd, "users.db")}")
DataMapper.finalize
DataMapper.auto_upgrade!

# Finally, the test

ein = Dog.new
ein.name = "Ein"

spike = User.create
spike.pet = ein

spike.save #=> NoMethodError 
```

## 错误

```
got here: nil
got here: "#<Dog:0x007fca399b7d40>"
./test.rb:19:in `dump': undefined method `name' for "#<Dog:0x007fba19960c00>":String (NoMethodError)
        from (...)/test/.bundle/gems/dm-core-1.2.0/lib/dm-core/property.rb:700:in `valid?'
        from (...)/test/.bundle/gems/dm-core-1.2.0/lib/dm-core/resource/persistence_state/dirty.rb:88:in `block in valid_attributes?'
        from (...)/test/.bundle/gems/dm-core-1.2.0/lib/dm-core/resource/persistence_state/dirty.rb:87:in `each_key'
        from (...)/test/.bundle/gems/dm-core-1.2.0/lib/dm-core/resource/persistence_state/dirty.rb:87:in `valid_attributes?'
        from (...)/test/.bundle/gems/dm-core-1.2.0/lib/dm-core/resource/persistence_state/dirty.rb:21:in `commit'
        from (...)/test/.bundle/gems/dm-core-1.2.0/lib/dm-core/resource.rb:956:in `_persist'
        from (...)/test/.bundle/gems/dm-core-1.2.0/lib/dm-core/resource.rb:987:in `block in update_with_hooks'
        from (...)/test/.bundle/gems/dm-core-1.2.0/lib/dm-core/resource.rb:984:in `catch'
        from (...)/test/.bundle/gems/dm-core-1.2.0/lib/dm-core/resource.rb:984:in `update_with_hooks'
        from (...)/test/.bundle/gems/dm-core-1.2.0/lib/dm-core/resource.rb:1021:in `save_self'
        from (...)/test/.bundle/gems/dm-core-1.2.0/lib/dm-core/resource.rb:1006:in `block in _save'
        from (...)/test/.bundle/gems/dm-core-1.2.0/lib/dm-core/resource.rb:1222:in `run_once'
        from (...)/test/.bundle/gems/dm-core-1.2.0/lib/dm-core/resource.rb:1005:in `_save'
        from (...)/test/.bundle/gems/dm-core-1.2.0/lib/dm-core/resource.rb:405:in `save'
        from ./test.rb:42:in `<main>' 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-17T13:45:28.480

根据文档，DatabaseDog 应该继承自 DataMapper::Property::Object 而不是 DataMapper::Property::Text。

# python - 如何在 Windows 上将 gzip 包上传到 PyPI

> ID：16050999
> 
> 赞同：2
> 
> 时间：2013-04-17T03:34:15.977
> 
> 标签：python, python-3.x, pypi

在 Windows 上，我使用以下命令上传了一个包：

`python setup.py sdist bdist_wininst upload`

但是，由于我在 Windows 上使用 Python，它会上传 zip 文件而不是 gzip 文件。我怎样才能让它和它一起发送一个gzip？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-17T03:57:14.577

```
python setup.py sdist --formats=zip,gztar bdist_winist upload 
```

请参阅[文档](http://docs.python.org/3/distutils/sourcedist.html)。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-17T03:57:24.847

您可以[指定](http://docs.python.org/2/distutils/sourcedist.html)压缩源文件的格式：

```
python setup.py sdist --formats=gztar,zip 
```