# StackOverflow 问答 13937000-13937999

# php - 通过 PHP 回显 OnClick 中的 Jquery 错误

> ID：13937002
> 
> 赞同：0
> 
> 时间：2012-12-18T16:10:18.773
> 
> 标签：php, jquery, variables, onclick

首先是一些上下文，我有一个非常基本的图像轮播，它显示我通过 php foreach 循环抓取的视频缩略图。当用户点击缩略图时，它会将相应的视频加载到上面的 div 中。轮播效果很好，但是将其发送到 div 的 onclick 事件却没有。

好的，我想要执行以下代码行，代码编辑器说它是正确的，但是当我在浏览器中运行它时，我收到一个语法错误“Unexpected Token”，并且代码最终无法正常工作。

```
 echo "<li><a href='javascript:void(0);' onClick='setVideo(" .$youtube_link. "," .$type. "," .$video_title. "," .$custom_description. "," .$postURL. ");'>";
  print_thumbnail($featured_thumb,"thumbnail",$youtube_link);
  echo "</a></li>"; 
```

所以我改用以下代码：

```
 echo '<li><a href="javascript:void(0);" onClick="setVideo(\'' . $youtube_link . '\', \'yt\',\'' . $video_title . '\',\'' . $custom_description . '\',\'' . $postURL . '\' );">';
  print_thumbnail($featured_thumb,"thumbnail",$youtube_link);
  echo "</a></li>";
  } ?> 
```

此代码有效并将视频放入 div 但在某些视频缩略图上单击时会返回“意外标识符”错误并且不起作用。我查看了为每个缩略图发送的数据，我没有看到每个缩略图之间的任何差异，使其适用于某些但不适用于其他缩略图。错误也是一致的，并且每次都停留在相同的帖子上。所以我的问题是，错误是来自 JQuery 还是来自发送到 JQuery 的数据。

这是对应的 JQuery 函数。

```
 function setVideo(videoID, playerType, postTitle, postExcerpt, postURL ){
  width = 720;
  height = 405;
  if( playerType == 'yt' ) {
  $('#video_player').replaceWith("<iframe id='video_player' class='youtube-player' type='text/html' width='"+ width +"' height='"+ height +"' src='http://www.youtube.com/embed/" + videoID + "?hd=1&html5=1&rel=0&autohide=1&showinfo=0' frameborder='0' ></iframe>");
   }
  } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-19T16:53:13.137

想通了大部分。使用这段代码，我注意到进入 $custom_description 的数据包含一个单引号（ ' ），它通过 jquery 并因此给出了错误。

```
 echo '<li><a href="javascript:void(0);" onClick="setVideo(\'' . $youtube_link . '\', \'yt\',\'' . $video_title . '\',\'' . $custom_description . '\',\'' . $postURL . '\' );">';
  print_thumbnail($featured_thumb,"thumbnail",$youtube_link);
  echo "</a></li>";
  } ?> 
```

我做了一个简单的 str_replace 像这样：

```
$string_desc = str_replace("'","\\'", $custom_description);
$string_title = str_replace("'","\\'", $video_title);

echo '<li><a href="javascript:void(0);" onClick="setVideo(\'' . $youtube_link . '\', \'yt\', 
\'' . $string_title . '\',\'' . $string_desc . '\',\'' . $postURL . '\' );">';
print_thumbnail($featured_thumb,"thumbnail",$youtube_link); $video_title;
echo "</a></li>"; 
```

一切正常

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-18T16:23:14.313

我已经用 jqVideoBox 进行了测试，并且我已经测试了来自 youtube、metacafe、google 和 iFilm 的视频......

```
<a title="Youtube example." class="vidbox" href="http://www.youtube.com/v/NRH2jEyiiLo&hl=en&fs=1&rel=0"><img alt="Youtube" style="width: 130px;" src="http://i2.ytimg.com/vi/NRH2jEyiiLo/default.jpg"/></a>
<a title="Metacafe example." class="vidbox" href="http://www.metacafe.com/watch/386357/teach_magic_be_magician_money_magic/"><img alt="Metacafe" style="width: 130px;" src="http://images.metacafe.com/thumb/386357/2767198/4/catalog_top_item5/0/teach_magic_be_magician_money_magic.jpg"/></a>
<a title="Google Video example." class="vidbox" href="http://video.google.com/videoplay?docid=1811233136844420765"><img alt="Google Video" style="width: 130px;" src="http://video.google.com/ThumbnailServer2?app=vss&amp;contentid=d53e613f82f74c96&amp;offsetms=50000&amp;itag=w160&amp;lang=en&amp;sigh=QGtXRNh3rW4hfa6DSQSFtfOimno"/></a>
<a title="iFilm example." class="vidbox" href="http://www.ifilm.com/video/2783985"><img alt="iFilm" style="width: 130px;" src="http://img4.ifilmpro.com/resize/image/stills/films/resize/istd/2783985.jpg?width=130"/></a> 
```

只需调用此函数即可打开视频！

```
$(document).ready(
function()
{
    $(".vidbox").jqvideobox();
} 
```

);

我已经导入了 3 个 js

```
<script type="text/javascript" src="js/jquery.js"></script>
<script type="text/javascript" src="js/swfobject.js"></script>
<script type="text/javascript" src="js/jqvideobox.js"></script> 
```

你可以试试这个库，看看会发生什么......

# jquery-ui - 表格单元格内的 jQuery UI 按钮 - 渲染问题

> ID：13937003
> 
> 赞同：1
> 
> 时间：2012-12-18T16:10:26.413
> 
> 标签：jquery-ui, css, jquery-ui-button

我正在使用 jQuery 按钮，特别是这个例子：

[http://jqueryui.com/button/#splitbutton](http://jqueryui.com/button/#splitbutton)

我已经为每一行放置了这个标记 incide 表**td ：**

```
<div>
    <button id="possible-actions">Action</button>
</div>
<ul>
    <li><a href="#">Reopen</a></li>
    <li><a href="#">Close</a></li>
    <li><a href="#">Delete</a></li>
    <li><a href="#">Move...</a></li>
</ul> 
```

当然我已经相应地修改了javascript。但是，现在我正在努力解决 Internet Explorer 8 中的渲染问题。正在发生的事情是，其他单元格的内容被渲染了一个错误 - 例如，行的高度很奇怪，一些单元格的内容被渲染在单元格之外。但是当我将鼠标移到行上时，似乎 IE 重绘/刷新并且行是固定的。

我没有任何鼠标悬停处理程序或其他事件。普通表 + 这个 jQuery UI 按钮。我想知道这是否会发生，因为我在**td**中使用块元素，或者我在页面加载后动态创建这些按钮并且浏览器在呈现表时遇到问题。

仅供参考：Google Chrome 和 FF 没有这个问题。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-23T11:37:52.497

将标记更改为：

```
<span style="display: inline-block">
    <button id="possible-actions">Action</button>
</span>
<ul style="display: none">
    <li><a href="#">Reopen</a></li>
    <li><a href="#">Close</a></li>
    <li><a href="#">Delete</a></li>
    <li><a href="#">Move...</a></li>
</ul> 
```

修复了问题。我使用的样式是：

*   display: inline-block - 因为我需要控制一些宽度/高度尺寸
*   显示：无 - 因为我在单击按钮时按需创建和显示菜单

# c++ - 铸造 boost::units::quantity 加倍

> ID：13937004
> 
> 赞同：6
> 
> 时间：2012-12-18T16:10:28.340
> 
> 标签：c++, boost, boost-units

我需要将数量的值传递给库进行评估。[boost 单位库](http://www.boost.org/doc/libs/1_52_0/doc/html/boost_units.html)在 SI 中采用 double 值，因此boost 单位库在确保该要求方面非常有吸引力。但是，我应该如何将数量转换为双精度值？文档和示例似乎避免了这种情况，因为其目的是理所当然地维护这些单元。

就像是：

```
quantity<pressure> p(101.1 * kilo * pascals);
double dblP = static_cast<double>(p);  // double value in Pascals 
```

浏览标题建议...这是转换为基本类型的正确方法吗？

```
p.value(); 
```

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-11-11T22:19:57.670

我认为您正在寻找的是：

```
quantity<pressure> p(101.1 * kilo * pascals);
double dblP = p / pascals;  // double value in Pascals 
```

如果你把单位分开，你会得到 a `quantity<dimensionless>`，它会隐式转换为 a `double`。这消除了关于内部表示（`value()`返回）单位是什么的任何问题。

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2014-02-09T12:59:55.223

才发现这个。我认为预期的方法是使用 Boost 的`quantity_cast`运算符。

```
quantity<pressure> p(101.1 * kilo * pascals);
double dblP = quantity_cast<double>(p); 
```

[http://www.boost.org/doc/libs/1_55_0/doc/html/boost_units/Quantities.html#boost_units.Quantities.Quantity_Construction_and_Conversion](http://www.boost.org/doc/libs/1_55_0/doc/html/boost_units/Quantities.html#boost_units.Quantities.Quantity_Construction_and_Conversion)

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2012-12-18T16:54:49.040

参考[文档](http://www.boost.org/doc/libs/1_52_0/doc/html/boost/units/quantity_BOOST_U_id1897170.html#id1897251-bb)显示可以使用隐式转换或`value()`成员方法。

> 1.  `operator value_type() const;`
>     
>     
>     
>     允许隐式转换为 value_type
>     
>     
> 2.  `const value_type & value() const;`
>     
>     
>     
>     值的常量访问器

# c# - ASP.NET MVC：ValueProviders 的执行顺序

> ID：13937006
> 
> 赞同：8
> 
> 时间：2012-12-18T16:10:31.637
> 
> 标签：c#, asp.net-mvc, value-provider

我想知道`ValueProviders`ASP.NET MVC 中不同的执行顺序。

价值提供者：

*   QueryStringValueProvider
*   RouteDataValueProvider
*   表单值提供者
*   ...

我没有找到信息。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-12-18T16:13:54.313

如果记忆对我有用，优先级是这样的。

1.  请求中的表单数据
2.  路线数据
3.  请求参数
4.  Http 文件集合

**编辑** 我似乎同意以下网站，该网站列出了相同的订单。 [http://www.howmvcworks.net/OnModelsAndViewModels/TheBeautyThatIsTheModelBinder](http://www.howmvcworks.net/OnModelsAndViewModels/TheBeautyThatIsTheModelBinder)

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2015-11-08T17:38:23.147

您可以从 ASP.NET MVC 源代码中查看：[ValueProviderFactories.cs](http://aspnetwebstack.codeplex.com/SourceControl/latest#src/System.Web.Mvc/ValueProviderFactories.cs)

这是 ValueProviders 的预定义顺序：

```
 private static readonly ValueProviderFactoryCollection _factories = new ValueProviderFactoryCollection()
    {
        new ChildActionValueProviderFactory(),
        new FormValueProviderFactory(),
        new JsonValueProviderFactory(),
        new RouteDataValueProviderFactory(),
        new QueryStringValueProviderFactory(),
        new HttpFileCollectionValueProviderFactory(),
    }; 
```

# mysql - 如何找出特定组中特定行在表中的行号？

> ID：13937009
> 
> 赞同：0
> 
> 时间：2012-12-18T16:10:36.930
> 
> 标签：mysql, optimization, row

考虑下表：

```
rowid   |   text    |   group
1       |   a       |   1
2       |   b       |   2
3       |   c       |   2
4       |   d       |   3
5       |   e       |   4
6       |   f       |   1
7       |   g       |   1
8       |   h       |   4
9       |   j       |   5
10      |   k       |   2
11      |   i       |   3
12      |   l       |   3 
```

现在想象我想要 6 的行号`rowid`（用于例如分页）。由于它是自动递增的，因此仅选择非常简单`where rowid = 6`，但在这种情况下，我想知道它*在组 1 中的*行号。

显然，在这样一个小例子（它是第 2 行）中，通过肉眼很容易做到这一点。

第 1 行将是`rowid = 1`. 第 2 行将是`rowid = 6`. 第 3 行将是`rowid = 7`.

我的第一个想法是这样的：

```
SELECT
    tmp.rowid,
    tmp.text,
    tmp.group,
    tmp.row_number
FROM
    (
        SELECT
            `rowid`,
            `text`,
            `group`,
            (@rowNumber := @rowNumber + 1) as `row_number`
        FROM
            `my_table`,
            (SELECT @rowNumber := 0) as `r`
        WHERE
            `group` = 1
        ORDER BY
            `rowid` DESC
    ) as `tmp`
WHERE
    tmp.rowid = 6 
```

这将给出正确的结果（在 中`row_number`），但在一个大表（半百万条记录）上，这将在快速服务器上花费 2.5 秒，因为它必须首先收集所有 500,000 个条目，然后选择行 id 6。

我应该怎么做才能让它更快/更好？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-18T16:10:36.930

解决方案其实很简单。

## SQL

```
SELECT
    COUNT(`rowid`) as `row_number`
FROM
    `my_table`
WHERE
    `group` = 1
AND
    `rowid` >= 6 
```

* * *

## 笔记

您需要有一行具有递增值（例如时间戳、递增 ID 等）。

在这里，我们将原始转换`ORDER BY rowid DESC`为`WHERE`rowid `>= '6'`。如果你使用`ORDER BY`升序，你会想要使用`<=`。

查询耗时 0.00002 秒，并返回正确的行号（in `row_number`）。如果您想要`text`and`group`列，则必须将其设为子查询或进行额外的查询以选择`WHERE rowid = 6`.

# google-maps - Google 教程中的 Google 地图 API 网络服务对我不起作用。

> ID：13937010
> 
> 赞同：0
> 
> 时间：2012-12-18T16:10:38.097
> 
> 标签：google-maps, google-places-api

我是 Google Map API 的新手，我只是尝试使用以下来自 Google MAP API 教程的给定 URL 搜索我所在位置附近的医院。

另外，通过我的 Google 控制台，我打开了 Google MAP API 版本 2 和 3，并打开了 API。

我将教程中的这个 URL 输入到我的浏览器中，然后按回车键

[https://maps.googleapis.com/maps/api/place/search/xml?location=37.722434,-121.465902&radius=10000&types=hospitals&sensor=false&key=mykey](https://maps.googleapis.com/maps/api/place/search/xml?location=37.722434,-121.465902&radius=10000&types=hospitals&sensor=false&key=mykey)

其中 mykey 是我从 Google 控制台获得的 Google API 密钥，

我收到了这条消息

请求被拒绝

我很困惑。我不知道我错过了什么。我按照 Google 教程进行操作，并从 Google 控制台获得了 Google API 密钥。我想知道是否还有其他我不知道的 api 密钥。如果可以的话，请帮助我。

提前非常感谢，

汤姆

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-18T16:19:02.207

如果您有 Google 帐户，请确保您发出请求的位置已添加到您的允许域列表中。这是使用谷歌地图时的常见问题。除此之外，您的密钥可能是错误的和/或您需要创建一个加密密钥。

# editor - 如何在 adobe-brackets 中创建一个新项目？

> ID：13937018
> 
> 赞同：18
> 
> 时间：2012-12-18T16:11:09.447
> 
> 标签：editor, html-editor, adobe-brackets

我已经开始使用[adobe-brackets](https://github.com/adobe/brackets)来编辑 JavaScript、HTML 和 CSS。

目前，我在侧边栏中打开了“入门”项目。我想**创建一个新项目**，但文件菜单中没有这样的“新项目”项。

我尝试单击“项目设置”，但这只是给了我这个：

![入门项目设置](../Images/c28f276c4f4596846a9896820f4b9ebb.png)

您如何摆脱默认的“入门”项目，并开始一个全新的项目？

* * *

## 回答 #1

> 赞同：34
> 
> 时间：2012-12-18T16:50:32.833

假设您希望您的项目位于此位置：

```
/Users/myName/Sites/mySite 
```

要在此处创建一个新项目，您只需执行以下操作：

1.  文件 -> 打开文件夹 -> /Users/myName/Sites/mySite

恭喜，您刚刚创建了一个新项目！您将看到新项目显示在左侧菜单的顶部。

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2014-12-29T17:54:58.210

您必须安装 Brackets 新项目创建者。

# python - 使用 pandas 使用数据框中的两个不同列选择行？

> ID：13937022
> 
> 赞同：15
> 
> 时间：2012-12-18T16:11:22.367
> 
> 标签：python, pandas

Q 与此类似： [使用值列表从 pandas 数据框中选择行](https://stackoverflow.com/questions/12096252/use-a-list-of-values-to-select-rows-from-a-pandas-dataframe)

如果两列中的任何一个值都在列表中，我想要数据框。返回两列（合并#1 和#4 的结果。

```
import numpy as np
from pandas import *

d = {'one' : [1., 2., 3., 4] ,'two' : [5., 6., 7., 8.],'three' : [9., 16., 17., 18.]}

df = DataFrame(d)
print df

checkList = [1,7]

print df[df.one == 1 ]#1
print df[df.one == 7 ]#2
print df[df.two == 1 ]#3
print df[df.two == 7 ]#4

#print df[df.one == 1 or df.two ==7]
print df[df.one.isin(checkList)] 
```

* * *

## 回答 #1

> 赞同：26
> 
> 时间：2012-12-18T16:18:48.200

您几乎拥有它，但您必须使用[“按位或”](http://docs.scipy.org/doc/numpy/reference/generated/numpy.bitwise_or.html#numpy.bitwise_or)运算符：

```
In [6]: df[(df.one == 1) | (df.two == 7)]
Out[6]: 
   one  three  two
0    1      9    5
2    3     17    7

In [7]: df[(df.one.isin(checkList)) | (df.two.isin(checkList))]
Out[7]: 
   one  three  two
0    1      9    5
2    3     17    7 
```

# php - 输入时提交

> ID：13937025
> 
> 赞同：0
> 
> 时间：2012-12-18T16:11:34.743
> 
> 标签：php, javascript, html

我有这样的事情：

```
 <div style="float:left;"><a class="btn btn-primary" href="#sign-in" data-toggle="modal"  data-dismiss="modal" ><i class="icon-ok icon-white"></i> Sign-in</a></div>
        <div>
            <a href="#" class="btn btn-small" data-dismiss="modal"><i class="icon-remove"></i> Close</a>
            <button class="btn-success btn-small" type="button" name="submit" value="login" onclick="forgotPassAjax();"><i class="icon-ok icon-white"></i> Send</button>
        </div> 
```

在我需要它可以点击进入，现在你必须手动使用光标来点击按钮，我该如何做到这一点？我之前看过一些JS示例，有没有更简单的方法？现在它有一个onclick函数，它是在php中为特定目的生成的，那我该怎么办？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-18T16:14:11.633

jQuery：

```
$(document).on("keydown", processKeyEvents);
$(document).on("keypress", processKeyEvents);

function processKeyEvents(event) {
     if ( event.which == 13 ) {
        forgotPassAjax();
     }
} 
```

您可以将 $(document) 替换为 $("id of focus element") 以限制按键的范围。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-18T16:16:58.693

Surround this with form tags and then use, change the button type to submit.

```
$("form-selector").submit(function(e){
      e.preventDefault();
 //perform other stuff here
}); 
```

Not tested it though :)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-18T16:17:01.803

You can use jQuery syntax

```
$(document).on("keydown", enterPress);
$(document).on("keypress", enterPress);

function enterPress(e) {
     if ( e.which == 13 ) { //if the key press is enter (13)
        $('button').click();
     }
} 
```

Replace document with the id of your modal or input (ex : '#modal') and 'button' with your button id (ex 'myButton')

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-12-18T16:28:01.997

另一个 jquery 示例可能是这样的：

```
$(document).on("keydown keypress", function (e) {
    if (e.which == 13) {
        e.preventDefault();
        forgotPassAjax();
    }
}); 
```

# matlab - 有人可以向我指出一个在线/免费的 MATLAB 编译器/解释器，或者解释这个 MATLAB 代码中发生了什么吗？

> ID：13937026
> 
> 赞同：20
> 
> 时间：2012-12-18T16:11:38.933
> 
> 标签：matlab, matlab-compiler

我提前为这个问题道歉。我不喜欢“解释这段代码”的问题，但我找不到任何关于我的具体示例的文档。

**背景**
我的问题是这个。我正在尝试将一些 MATLAB 代码翻译成 C#，但同时我必须学习 MATLAB。我不与任何了解 MATLAB 代码的人合作，我无法访问 MATLAB，因此我无法测试任何代码，也找不到关于以下问题的任何文档。所以...

**问题）**

1.  是否有免费的在线/桌面 MATLAB 编译器/解释器可以用来测试 MATLAB 代码？

    ...或者...

2.  有没有人可以解释以下代码片段：

    ```
    someVar.member1=myValue1;
    someVar.member2=myValue2;
    if (myCondition)
        for i=1:myTotal
            someVar(i).member3=myValue3;
        end;
    end; 
    ```

    这会`someVar`变成一个数组吗？我会丢失`member1`，`member2`还是会以某种方式保存我设置的内容？

* * *

## 回答 #1

> 赞同：17
> 
> 时间：2012-12-18T16:20:40.913

回复：1 - 有优秀的[Matlab 文档](http://www.mathworks.com/help/matlab/getting-started-with-matlab.html;jsessionid=ed1746979abe0d82ab1e62b4d017?s_tid=doc_12b)，包括视频教程，这将帮助您了解 Matlab。这比编译器有用得多，因为您将了解代码的意图，以便您可以以适合 C# 的方式重新编写它，而不是尝试复制 Matlab 优化的语法。

但是，为了测试运行 Matlab 代码，[Octave](http://www.gnu.org/software/octave/)提供了核心 Matlab 的大部分功能，但可能不支持工具箱功能（Matlab 的附加模块，您需要额外付费）。

回复：2 - 这是代码的作用

使用字段实例化[结构数组](http://www.mathworks.com/help/matlab/ref/struct.html) `someVar`（Matlab 不需要事先声明变量）`member`；分配给`myValue1`

```
someVar.member1=myValue1; 
```

创建一个附加字段`member2`，将其设置为`myValue2`

```
someVar.member2=myValue2; 
```

如果条件为真，则循环`myTotal`次数，并将`member3`所有`i`元素的字段设置`someVar`为`myValue3`。因此，`someVar`从 1-by-1 结构体数组变为 1-by-`myTotal`结构体数组。`someVar(1).member1`剩余`myValue1`，而`someVar(i).member1`被初始化为空（`[]`）。

```
if (myCondition)
    for i=1:myTotal
        someVar(i).member3=myValue3;
    end;
end; 
```

/aside：这个循环是定义结构的一种相当低效的方式。因此，您需要翻译的代码中可能没有太多 Matlab 优化的语法。

* * *

## 回答 #2

> 赞同：9
> 
> 时间：2013-10-19T05:27:51.597

我已经为 MATLAB/Octave 编写了一个免费的在线界面，它运行脚本并且还有一个实时提示，您可以在其中键入命令。您还可以在会话之间保存脚本。在[octave-online.net](http://octave-online.net/)上查看。

* * *

## 回答 #3

> 赞同：8
> 
> 时间：2012-12-18T16:19:12.567

1.  你可以试试 Octave，它是免费的并且与 MATLAB 非常兼容。

2.  在这个片段的末尾（假设`myCondition`是真的），`someVar`将是一个长度为的向量`myTotal`（即一个大小为 1 by 的数组`myTotal`）。向量的每个元素将是一个具有三个字段`member1`和`member2`的结构`member3`。向量的第一个元素将具有所有三个字段的值；其余的将仅具有`member3`, 并将空数组作为`member1`和的值`member2`。如果`myCondition`为 false，您将拥有一个包含两个字段`member1`和`member2`.

希望有帮助！

* * *

## 回答 #4

> 赞同：8
> 
> 时间：2013-04-30T16:03:58.060

试试这个网站： http:
[//www.compileonline.com/execute_matlab_online.php](http://www.compileonline.com/execute_matlab_online.php)
它有一个 Matlab 编译器以及许多其他语言，如 Perl、Python、Java、C 等。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2014-03-22T08:25:19.977

我只想重申一个建议的选择：[anycodex.com](http://anycodex.com)在之前的答案中，因为没有提到它是一个真正的在线 MATLAB 解释器，这真的很好。一开始我很怀疑，认为它只是另一个由 Octave 驱动的，但在使用`ver`命令后，它似乎表明它使用`MATLAB Version: 7.14.0.739 (R2012a)`了此处所见的已安装产品：

```
--------------------------------------------------------------------------------------------------
MATLAB Version: 7.14.0.739 (R2012a)
MATLAB License Number: 161052
Operating System: Linux 3.5.0-23-generic #35~precise1-Ubuntu SMP Fri Jan 25 17:15:33 UTC 2013 i686
Java Version: Java 1.6.0_17-b04 with Sun Microsystems Inc. Java HotSpot(TM) Client VM mixed mode
--------------------------------------------------------------------------------------------------
MATLAB                                                Version 7.14       (R2012a)
Simulink                                              Version 7.9        (R2012a)
Aerospace Blockset                                    Version 3.9        (R2012a)
Aerospace Toolbox                                     Version 2.9        (R2012a)
Bioinformatics Toolbox                                Version 4.1        (R2012a)
Communications System Toolbox                         Version 5.2        (R2012a)
Computer Vision System Toolbox                        Version 5.0        (R2012a)
Control System Toolbox                                Version 9.3        (R2012a)
Curve Fitting Toolbox                                 Version 3.2.1      (R2012a)
DO Qualification Kit                                  Version 1.6        (R2012a)
DSP System Toolbox                                    Version 8.2        (R2012a)
Database Toolbox                                      Version 3.11       (R2012a)
Datafeed Toolbox                                      Version 4.3        (R2012a)
Econometrics Toolbox                                  Version 2.1        (R2012a)
Embedded Coder                                        Version 6.2        (R2012a)
Filter Design HDL Coder                               Version 2.9.1      (R2012a)
Financial Derivatives Toolbox                         Version 5.9        (R2012a)
Financial Toolbox                                     Version 4.2        (R2012a)
Fixed-Income Toolbox                                  Version 2.3        (R2012a)
Fixed-Point Toolbox                                   Version 3.5        (R2012a)
Fuzzy Logic Toolbox                                   Version 2.2.15     (R2012a)
Global Optimization Toolbox                           Version 3.2.1      (R2012a)
HDL Coder                                             Version 3.0        (R2012a)
HDL Verifier                                          Version 4.0        (R2012a)
IEC Certification Kit                                 Version 2.1        (R2012a)
Image Acquisition Toolbox                             Version 4.3        (R2012a)
Image Processing Toolbox                              Version 8.0        (R2012a)
Instrument Control Toolbox                            Version 3.1        (R2012a)
MATLAB Builder JA                                     Version 2.2.4      (R2012a)
MATLAB Coder                                          Version 2.2        (R2012a)
MATLAB Compiler                                       Version 4.17       (R2012a)
MATLAB Distributed Computing Server                   Version 6.0        (R2012a)
MATLAB Report Generator                               Version 3.12       (R2012a)
Mapping Toolbox                                       Version 3.5        (R2012a)
Model Predictive Control Toolbox                      Version 4.1        (R2012a)
Neural Network Toolbox                                Version 7.0.3      (R2012a)
Optimization Toolbox                                  Version 6.2        (R2012a)
Parallel Computing Toolbox                            Version 6.0        (R2012a)
Partial Differential Equation Toolbox                 Version 1.0.20     (R2012a)
Phased Array System Toolbox                           Version 1.2        (R2012a)
RF Toolbox                                            Version 2.10       (R2012a)
Robust Control Toolbox                                Version 4.1        (R2012a)
Signal Processing Toolbox                             Version 6.17       (R2012a)
SimBiology                                            Version 4.1        (R2012a)
SimDriveline                                          Version 2.2        (R2012a)
SimElectronics                                        Version 2.1        (R2012a)
SimEvents                                             Version 4.1        (R2012a)
SimHydraulics                                         Version 1.10.1     (R2012a)
SimMechanics                                          Version 4.0        (R2012a)
SimPowerSystems                                       Version 5.6        (R2012a)
SimRF                                                 Version 3.2        (R2012a)
Simscape                                              Version 3.7        (R2012a)
Simulink 3D Animation                                 Version 6.1        (R2012a)
Simulink Code Inspector                               Version 1.1        (R2012a)
Simulink Coder                                        Version 8.2        (R2012a)
Simulink Control Design                               Version 3.5        (R2012a)
Simulink Design Optimization                          Version 2.1        (R2012a)
Simulink Design Verifier                              Version 2.2        (R2012a)
Simulink Fixed Point                                  Version 7.1        (R2012a)
Simulink Report Generator                             Version 3.12       (R2012a)
Simulink Verification and Validation                  Version 3.3        (R2012a)
Stateflow                                             Version 7.9        (R2012a)
Statistics Toolbox                                    Version 8.0        (R2012a)
Symbolic Math Toolbox                                 Version 5.8        (R2012a)
System Identification Toolbox                         Version 8.0        (R2012a)
SystemTest                                            Version 2.6.3      (R2012a)
Wavelet Toolbox                                       Version 4.9        (R2012a) 
```

非常好的发现确实。干杯。

# r - 创建按分类变量分组的连续变量的散点图

> ID：13937027
> 
> 赞同：0
> 
> 时间：2012-12-18T16:11:41.960
> 
> 标签：r, plot, scatter-plot, ggplot2

我有一个名为年份的分类变量，我想为每个人（类别）绘制风险值（连续）。我希望通过每年之间的线路连接风险。如果我只是简单地在 Y 轴上绘制风险，然后对变量进行颜色编码，那就是一团糟，因为许多人具有相同的价值或非常相似的东西，而且您无法看到每个人随时间变化的风险。我已经附上了一张我认为它应该看起来像我在 Excel 中创建的图像（名称/年份可能不匹配）。我正在为每个人创建一个新的“系列”，问题是我有超过 200 个人，所以不想坐在这里为每个人做这个。
![Excel绘图](../Images/c0a1e85e3666db91f6f4ead14caea05b.png)

这是我正在使用的数据示例：

```
structure(list(IDr = structure(c(2L, 2L, 2L, 2L, 2L, 2L, 1L, 
2L, 1L, 2L, 1L, 1L, 1L, 1L, 2L, 2L, 2L, 2L, 4L, 4L), .Label = c("F07001_f", 
"F07001_fc", "F07002_f", "F07002_fc", "F07003_fc", "F07004_f", 
"F07005_f", "F07005_fc", "F07006_f", "F07006_fc", "F07008_f", 
"F07009_f", "F07009_fc", "F07010_f", "F07010_fc", "F07011_f", 
"F07011_fc", "F07014_f", "F07014_fc", "F07015_fc", "F07017_fc", 
"F07018_fc", "F07019_f", "F07019_fc", "F07020_f", "F07020_fc", 
"F07021_fc", "F07022_f", "F07023_f", "F07024_fc", "F10001_fc", 
"F10004_fc", "F10008_fc", "F10009_f", "F10009_fc", "F10010_f", 
"F10012_fc", "F10013_fc", "F98015_f", "M07007_m", "M07012_m", 
"M07013_m", "M07016_m", "M10007_m", "M10011_m", "M10015_m"), class = "factor"), 
    ln1wr = c(0.833126490613386, 0.824526258616325, 0.990730077688989, 
    0.981816265754353, 0.933462450382474, 0.932242818088082, 
    0.833865187498825, 0.859381698700969, 0.821716281354653, 
    0.861496579787016, 0.746687947487975, 0.755605414399556, 
    0.689741387425112, 0.694046775802782, 0.746403546860377, 
    0.765095679872529, 1.05733880335233, 1.04549276633745, 0.925765702236673, 
    0.909990929725627), MooseYear = c(2007, 2007, 2008, 2008, 
    2009, 2009, 2010, 2010, 2010, 2010, 7.08, 7.08, 8.09, 8.09, 
    9.1, 9.1, 10.11, 10.11, 2007, 2007)), .Names = c("IDr", "ln1wr", 
"MooseYear"), row.names = c(NA, 20L), class = "data.frame") 
```

我真的不知道从哪里开始，它看起来很简单，但是如果不将绘图变成条形图，我什至无法获得绘图命令。我试过了

```
plot(ln1wr~ID, data=test)
plot(ln1wr~MooseYear, data=test)
scatterplot(ln1wr~MooseYear, data=test) 
```

他们甚至都没有开始接近起点。我不在乎它是在 x 轴或 y 轴上绘制每个人，还是将每个人分箱。我只需要了解每个人的风险如何随时间变化，并查看点之间变化的斜率。您会注意到在该年内有针对 1 个人的多项措施。我有一个额外的分类，我可以合并（季节）我正在努力处理它。我只是希望它最终会平均化或消失。

# java - 仅使用一个循环打印图案

> ID：13937041
> 
> 赞同：4
> 
> 时间：2012-12-18T16:12:46.897
> 
> 标签：java, loops, for-loop, design-patterns

我使用一个循环打印了这种模式：

```
*
**
***
****
*****

String s = "";
for (i = 1; i <= n; ++i) {
    s += "*";
    System.out.println(s);
} 
```

现在我想如何只使用一个循环打印以下模式。

```
1)
    *
   * *
  * * *
 * * * *
* * * * *

2)
  * * * * * 
   * * * *
    * * *
     * *
      *

3)
   1 2 3 4 5
   1 2 3 4
   1 2 3 
   1 2
   1 
```

**和仅使用一个循环**的其他类似模式，我已经使用**多个循环**完成了所有这些模式。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-12-18T16:30:00.190

> 我要优化。两个循环的时间复杂度为 O(n^2)，而只有一个循环的时间复杂度为 O(n)。并且 O(n) < O(n^2)。

您意识到 99.999% 的时间将用于更新控制台。如果您想节省时间，请不要写任何东西。相比之下，循环所花费的时间微不足道。

顺便说一句，您产生的星数将为 O(N^2)，因此无论您使用 1、2 还是 3 个循环，时间复杂度都是 O(N^2)。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2017-04-27T10:26:51.940

以下代码将使用单循环打印菱形。您可以相应地更改大小变量的值。

```
import java.util.Arrays;

class DiamondShapeUsingSingleLoop{
    public static void main(String args[]){
        int size = 5;
        for(int rowNumber = -size +1 ; rowNumber < size ; rowNumber++){
            char row[] = new char[2*size - Math.abs(rowNumber) - 1];
            Arrays.fill(row,0,Math.abs(rowNumber),' ');
            Arrays.fill(row,Math.abs(rowNumber), row.length,'*');
            System.out.println(String.valueOf(row));
        }
    }
} 
```

输出如下：

```
 *                                                                                                                                                           
   ***                                                                                                                                                          
  *****                                                                                                                                                         
 *******                                                                                                                                                        
*********                                                                                                                                                       
 *******                                                                                                                                                        
  *****                                                                                                                                                         
   ***                                                                                                                                                          
    * 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-18T16:35:55.793

```
 *
   * *
  * * *
 * * * *
* * * * * 
```

写一些要求 - 然后解决方案变得清晰：

*   在迭代**0**时，在位置**4**打印**1 个序列** `"* "`
***   在迭代**1**中，在位置**3**打印**2 个序列** `"* "`***   在迭代**2**中，在位置**2**打印**3 个序列** `"* "`***   **在第 3**次迭代中，在位置**1**打印**4 个序列** `"* "`***   **在第 4**次迭代中，在位置**0**处打印**5 个序列** `"* "`********

 ******* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-10-02T19:53:14.637

int col=1; 整数空间=4；

```
 for(int i=1;i<=5;i++){
       for(int j=1;j<=space;j++){
           System.out.print(" ");

    }
       space--;

    for(int j=1;j<=col;j++){
    System.out.print("*");
        }
    System.out.println();
    col=col+2; 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2016-11-17T10:46:04.973

您可以打印菱形，仅使用一个循环，如果您想打印金字塔，请使用该程序的一半逻辑

```
import java.util.Scanner;
class DiamandOneLoop {

    public static void main(String arg[]){
        Scanner sc=new Scanner(System.in);
        System.out.println("Enter the row Diamond Size");
        int n=sc.nextInt();
        String numSp="                                                                   ";
        String spaceAdd=numSp.substring(0,n-1);
        StringBuilder space=new StringBuilder(spaceAdd);
        StringBuilder star=new StringBuilder("* ");

        for(int i=1;i<=n*2-1;i++){
            if(i<n){
                System.out.print(space);
                space.delete(0,1);
                System.out.println(star);
                star.append("* ");
            }
            if(i==n){
                System.out.println(star);
            }
            if(i>n){
                space.append(' ');
                System.out.print(space);
                star.delete(0,2); 
                System.out.println(star);
            }
        }
    }
} 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2017-06-09T04:30:51.373

使用单循环打印图案：

代码是用objective-c编写的，任何人都可以使用这个逻辑并用他们各自的语言编写程序。

诠释 k = 5;

```
for (int i = 1; i<= k; i++)
{
    NSLog(@"%d",i);
    if (i==k) {
        i=0;
        k--;
        NSLog(@"\n");
    }
} 
```

输出：

1 2 3 4 5

1 2 3 4

1 2 3

1 2

1

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2018-02-25T18:19:24.277

试试这个 JavaScript 代码：

```
count=0, j=0, str="";
while(count < 5) {
    if(j < 4 - count) {
        str += " ";
        j++;
    } else if(j < 5) {
        str += "* ";
        j++;
    } else {
        str += "\n";
        count++;
        j = 0;
    }
}
console.log(str); 
```

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2018-04-11T20:03:37.577

这是c中的解决方案

```
#include<iostream>
using namespace std;
int main(){
    int n=15;
    int x=1;
    int j=1;
    for(int i=1;x<=n; )
    {

        if(!(j<=i))
        {
            cout<<endl;
            j=1;
            i++;
        }
        else
        {
            cout<<"*";
            x++;
            j++;
        }

    }
}
```

请随时询问

* * *

## 回答 #9

> 赞同：0
> 
> 时间：2021-08-09T11:05:22.803

从 JDK 11 开始，我们可以使用单循环打印任何基本模式，即使使用单语句也是如此。在 JDK 11 中，我们有一个`String`名为`repeat`.

```
class Sample
{
 public static void main(String...arg)
 {
  int n = 5;

  System.out.println("\nPattern #1");
  for(int i=0;i<=n;i++)
   System.out.println(" ".repeat(n-i)+"* ".repeat(i));
 }
} 
```

* * *

## 回答 #10

> 赞同：-1
> 
> 时间：2012-12-18T16:40:36.233

> 我要优化。两个循环的时间复杂度为 O(n^2)，而只有一个循环的时间复杂度为 O(n)。并且 O(n) < O(n^2)。

最佳解决方案是没有循环吗？

```
System.out.println("     *\n    * *\n   * * *\n  * * * *\n* * * * *"); 
```

如果你真的想用一个循环来做到这一点，你可以使用逗号运算符以及 String`format()`和`replace()`方法的强大功能：

```
int j = triangle_levels - 1; // triangle_levels is some int you can make 5, but this 
                             // is more generic
for(int i = 0; i < triangle_levels; j--, i++) {
    System.out.println("%" + j + "s", " ");
    System.out.println("%0" + (i+1) + "d", 0).replace("0", "* "));
} 
```

这将允许您在没有第二个循环的情况下打印空格数，然后是`*`'s 模式。

您可以使用这种类型的解决方案来制作任何方向的三角形。

* * *

## 回答 #11

> 赞同：-1
> 
> 时间：2017-06-05T06:13:18.230

用单环制作星形金字塔

```
for(i=0; i<a; i++)
{
    for(j=0; j<a-i-1; j++)
        printf(" ");
    for(j=0; j<2*i+1; j++)
        printf("*");
    printf("\n");
} 
```******

# sql - 需要创建一个报告，显示每个客户在过去一年中每个月的最新订单

> ID：13937049
> 
> 赞同：0
> 
> 时间：2012-12-18T16:13:10.610
> 
> 标签：sql, sql-server

我是新手，`SQL server`所以如果这被认为是一个简单的问题，我深表歉意。

我正在使用来自示例`sales.orders`的表格。`sales.customers``TSQL 2012 database`

我知道这是错误的，但到目前为止我只能串起来

```
SELECT cust.custid, ord.orderid, ord.orderdate
FROM sales.customers as cust
INNER JOIN sales.orders as ord ON (ord.custid=cust.custid)
AND ord.orderid = (SELECT TOP 1 ord.orderid
                FROM sales.orders
                WHERE cust.custid=ord.custid 
                ORDER BY ord.orderdate DESC); 
```

我觉得我应该在子查询中使用 MAX 某人，但我不知道如何编写它以获得

1.  每个客户的最新商品
2.  每个月内。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-18T16:19:00.430

对于这种类型的查询，我`row_number`特别喜欢使用排名函数。以下查询使用 seqnum 确定每个客户每月的最新订单，然后选择它：

```
select cust.custid, ord.orderid, ord.orderdate
from sales.customers cust INNER JOIN
     (select o.*,
             ROW_NUMBER() over (partition by custid, yr, mon order by orderdate desc) as seqnum
      from (select o.*, YEAR(o.orderdate) as yr, MONTH(o.orderdate) as mon
            from sales.orders o
           )
     ) ord
     on cust.custid = ord.custid and
        ord.seqnum = 1 
```

您的查询版本没有考虑月份。

# jquery - jQuery 向下滚动 100%，将元素重新定位到顶部：0，导致闪烁

> ID：13937050
> 
> 赞同：0
> 
> 时间：2012-12-18T16:13:12.510
> 
> 标签：jquery

我有两个元素。第一个使用浏览器的 100% 高度，并且定位在`fixed`. 第二个元素的位置`top: 100%;`出现在第一个固定元素的下方。

我设置了这个，所以第二个元素可以在滚动时滑过第一个元素。到目前为止没有问题。

`.remove()`但是现在，在我滚动到第二个元素之后，我想要第一个元素。所以第二个替换了第一个元素。

为了做到这一点，我必须将第二个元素重新定位到`top: 0`，而不是最初的`top: 100%`。然后我还必须`scrollTop(0)`看到第二个元素的顶部，因为它被重新定位。

但是，这最后一步会导致页面闪烁（10 次中有 9 次）！我该如何解决这个问题？

有没有更清洁的方法来实现这一目标？

更新：到目前为止，闪烁仅发生在 Safari 中，Chrome 完美无缺。而在 Firefox 中它甚至不起作用.. 这只是基本的 jQuery，对吧？

这是我的 jQuery 代码：

```
$(window).scroll(function() {
    if ($('body').scrollTop() >= $('body').height()) {
        $('#elem-2').css({top: '0'});
        $('body').scrollTop(0);
        $('header').css({position: 'fixed'});  // header inside #elem-2
        $('#elem-1').remove();
    }
}); 
```

和CSS：

```
#elem-1 {
    position: fixed;
    top: 0;
    width: 100%;
    height: 100%;
    display: block;
    background-color: #00a1b1;
}

#elem-2 {
    position: relative;
    top: 100%;
    width: 100%;
    height: 100%;
    display: block;
    z-index: 1;
}

header {
    position: relative;
    top: 0;
    width: 100%;
    height: 130px;
    display: block;
} 
```

任何人？

# iphone - 在保持原始字符串大小写的同时替换 NSString 中出现的字符串

> ID：13937052
> 
> 赞同：3
> 
> 时间：2012-12-18T16:13:15.143
> 
> 标签：iphone, objective-c, ios, nsstring

我有一些使用 UIWebview 显示的本地 HTML 和 CSS。我想合并搜索命中突出显示。

这是我的突出显示方法：

```
-(void) highlightsSearchTerm:(NSString *)searchTerm
{
    NSString *highlightedSearchTerm = [NSString stringWithFormat:@"<span class='highlight'>%@</span>",searchTerm];

    NSString *highlightedArticle = [article.articleHTML stringByReplacingOccurrencesOfString:searchTerm withString:highlightedSearchTerm options:NSCaseInsensitiveSearch range:NSMakeRange(0, [article.articleHTML length])];

    article.articleHTML = highlightedArticle;
} 
```

这样做的问题是它替换了，例如，`Obama`用户的搜索查询，这可能是`obama`（注意大小写）。我想在加入热门突出显示的同时保持原始文章的情况。

我希望有一个更优雅的解决方案，而不是手动查找每个命中项的开始和结束索引，然后`<span class="highlights">`分别插入和 ''。

基本上我想要类似的东西：

```
+ [NSString stringByWrappingExistingString:(NSString *)stringToWrap withString:(NSString *)wrappingString options:NSCaseInsensitiveCompare]; 
```

有什么想法吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-18T17:19:31.333

您可以使用`NSRegularExpression`来执行此操作（直接输入代码，检查错误）：

```
NSRegularExpression *re = [NSRegularExpression regularExpressionWithPattern:@"Obama" 
                                                                    options:NSRegularExpressionCaseInsensitive
                                                                      error:NULL];
NSString *output = [re stringByReplacingMatchesInString:inputString
                                                options:0
                                                  range:NSMakeRange(0, inputString.length)
                                           withTemplate:@"<span class='highlight'>$0</span>"]; 
```

在这种情况下，正则表达式搜索字符串`@"Obama"`很简单，因为您正在寻找文字匹配；该选项`options:NSRegularExpressionCaseInsensitive`使匹配不区分大小写。

虽然该示例使用文字*Obama*，但您显然可以动态构造字符串；**但是**在这种情况下要小心使用包含正则表达式元字符的字符串，它们需要被转义。

替换模板包含`$0`哪些将被匹配的内容替换（*完全是*，所以保留大小写）。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-18T16:58:04.427

这里是：

```
-(void) highlightsSearchTerm:(NSString *)searchTerm
{
    NSString *openSpan = @"<span class='highlight'>";
    NSString *closeSpan = @"</span>";

    NSRange searchRange = NSMakeRange(0, article.articleHTML.length);
    NSRange foundRange;

    NSString *highlightedArticle = article.articleHTML;

    while (searchRange.location < highlightedArticle.length)
    {
        searchRange.length = highlightedArticle.length - searchRange.location;

        foundRange = [highlightedArticle rangeOfString:searchTerm options:NSCaseInsensitiveSearch range:searchRange];

        if (foundRange.location != NSNotFound)
        {
            // found an occurrence of the substring! do stuff here
            searchRange.location = foundRange.location + foundRange.length;

            NSString *casePreservedSearchQuery = [highlightedArticle substringWithRange:foundRange];
            NSString *styledSearchQuery = [NSString stringWithFormat:@"%@%@%@", openSpan, casePreservedSearchQuery, closeSpan];

            highlightedArticle = [highlightedArticle stringByReplacingCharactersInRange:foundRange withString:styledSearchQuery];

            //increase the current location by the length of new string - search query length
            searchRange.location = searchRange.location + [styledSearchQuery length] - [casePreservedSearchQuery length];
        }
        else
        {
            break;
        }
    }

    // no more substring to find
    article.articleHTML = highlightedArticle;
} 
```

# c - 变量值中的固定点。UC皮层

> ID：13937054
> 
> 赞同：0
> 
> 时间：2012-12-18T16:13:27.243
> 
> 标签：c, fixed-point

我想在微控制器上按比例因子计算多个值，我不能使用浮点值。例如，一旦我得到值 170，它乘以比例因子 ex。0.00065，所以结果是 0.1105，我只需要 0.11。我有从 -500 到 +500 的值。我知道这是关于固定点的事情，但我不知道如何解决它。谢谢帮助

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-18T16:28:44.510

如果您的输入是一个整数，并且只有输出需要是定点，那么这相当简单。

让我们使用 16.16 固定点。这意味着您有 16 位小数和 16 位整数。要将整数转换为定点，只需左移 16 位（或乘以 65536）。

您的输入是`170`, 或`0xAA`。所以定点表示将是`0xAA0000`。

您想乘以 0.00065，即`0x002b`.

要相乘，您需要将数字相乘，然后取消其中一个比例（两个输入都被缩放，因此结果将被缩放两次），或者在相乘之前取消其中一个比例。

```
0xaa0000 * 0x2b = 0x1c8e0000
0x1c8e0000 >> 16 = 0x1c8e 
```

但是请注意，这可能会因更大的输入而溢出。如果您尝试使用 500，它将产生大于 32 位的值。

如果你的输入是一个整数，你可以让它保持不变。让我们这样做：

```
0xaa * 0x2b = 0x1c8e 
```

相同的答案，但没有变化。但是，您的输入显然只能是整数。

无论哪种方式，`0x1c8e`都是您的答案，但以 65536 表示。如果您将该数字取十进制 (7310) 并除以 65536，您将得到 0.11154...，这是您想要的答案的近似值。

您可以使用固定点选择您喜欢的任何分数/整数拆分，甚至可以混合搭配。当您执行任何数学运算时，您只需要考虑拆分的位置，通常会适当地移动输入或输出。要处理的主要问题是为您要执行的操作选择一种不会溢出或下溢的格式。

要打印出这些值，您只需要一点整数操作。

让我们取值`0xaa1c8e`。首先，通过移位 16 来取整数部分。得到 0xaa。

现在取分数，即 0x1c8e。乘以您想要的数字的适当数量。让我们乘以 100，得到两位小数。这给出了 0xb2778。将其移回 16，只剩下 0xb。

如果您使用字符串 printf: `"%d.%02d", 0xaa, 0xb`，您将得到“170.11”，这是正确的。

这是一个粗略且现成的示例：

```
int a = (0.00065 * 65536 + 0.5); // Convert the float value to fixed point, with rounding.
int b = 170;

int m = b * a;

bool n = false;
if(m < 0) {m = -m; n=true;}
int i_part = m >> 16;
int f_part = m & 0xffff;
f_part *= 100;
f_part >>= 16;

printf("%s%d.%02d\n",n?"-":"",i_part,f_part); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-18T16:18:03.723

用 2 个整数表示您的固定点，并在需要执行某些操作时同时使用它们。例如，`0.11 = 11/100`, 所以你可以有两个整数变量， numerator( `11`) 和 denominator( `100`) ，它们一起代表一个与你的值相对应的有理数。

# android - 按名称获取位置的坐标

> ID：13937055
> 
> 赞同：0
> 
> 时间：2012-12-18T16:13:28.183
> 
> 标签：android, google-maps-api-3, coordinates, geocoding

我想在我的 android 应用程序中接收给定位置名称的经度和纬度值。我知道谷歌有一个地理编码 API，但它似乎强制我在谷歌地图上显示结果：

> 地理编码 API 只能与谷歌地图一起使用；禁止在未在地图上显示的情况下对结果进行地理编码。 [从这里](https://developers.google.com/maps/documentation/geocoding/)

那么还有其他方法可以接收位置名称的坐标吗？或者我没有正确理解 TOU？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-12-02T07:35:27.933

你可以

```
Geocoder geocoder = new Geocoder(<your context>);  
List<Address> addresses;
addresses = geocoder.getFromLocationName(<String address>, 1);
if(addresses.size() > 0) {
  double latitude= addresses.get(0).getLatitude();
  double longitude= addresses.get(0).getLongitude();
} 
```

参考[https://stackoverflow.com/a/9698408/2458192](https://stackoverflow.com/a/9698408/2458192)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-18T16:27:45.557

地理编码和反向地理编码 API 应该能够为您提供帮助。

但无论如何，雅虎！有非常好的 Geocoding API，它甚至可以给你 JSON 的响应。

我已经尝试过它们，它们非常适合这样的用例。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-18T16:41:46.870

没有`Google's Geocoding API / google maps / any Maps API`，就是`not possible`使用位置名称来获取位置坐标。甚至，`yahoo API doesn't give full support`对于所有地理位置名称。在雅虎，它只提供一些热门城市的位置信息，而不是每个位置。到目前为止`google's map API is better than any other API`。

只需在您的应用程序中隐藏该地图视图，并覆盖您想要查看的任何其他视图。

# iphone - 使用 AR 支持创建 ios 应用程序的最佳方式

> ID：13937066
> 
> 赞同：0
> 
> 时间：2012-12-18T16:14:17.650
> 
> 标签：iphone, augmented-reality

> **可能重复：**
> [适用于 iPhone 的 Markerless AR 库](https://stackoverflow.com/questions/6953365/markerless-ar-lib-for-iphone)

我计划创建一个 iPhone 应用程序，它支持带有现实世界对象的增强现实。ex - ：假设我将相机放在瓶子前面并在它旁边显示一个动态对象。事情是。该对象应仅在应用程序指向该瓶子时显示。

我使用过字符串框架。但我认为它不能与现实世界的事物交互，我认为它只能与图像交互并在其上绘制动态内容。

有什么方法可以满足我的要求吗

谢谢

# php - 如何使用 Codigniter 使 Facebook 登录持续存在？

> ID：13937068
> 
> 赞同：2
> 
> 时间：2012-12-18T16:14:26.777
> 
> 标签：php, facebook, codeigniter, facebook-javascript-sdk

这是我第一次集成 Facebook。我在 CI 上有一个站点，到目前为止，我主要使用 JS SDK。

所以我的问题是——一旦用户使用 FB 登录，你如何将他的身份和图片从一个页面保存到另一个页面？您是否在每个页面上都对 FB.api 的信息进行 JS 调用？或者您是否通过 PHP 将信息保存在会话变量中。（或者其他方式？）

我不确定通常的做法是什么。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-18T16:16:02.937

I use [tank auth](http://konyukhov.com/soft/tank_auth/) to accomplish this. It is an authentication library for codeigniter that can be used for fb_login too

tere are a couple sample projects on github with tutorials and code. [this](https://github.com/ericbae/XTA2) looks interesting, as it provides support for many of the popular networks,

you could just start a session and put their facebook data in it. Each page view you could have a helper that just checks to see if they have any facebook session data set

# azure - 从 azure worker 角色启动的进程在几分钟后失败

> ID：13937069
> 
> 赞同：1
> 
> 时间：2012-12-18T16:14:27.837
> 
> 标签：azure, azure-worker-roles

我有一个 Azure Worker Role，它生成另一个进程 (System.Diagnostics.Process) 用于在虚拟机中执行 *.exe 文件。

问题是几分钟后执行失败，没有任何异常。

我尝试登录到虚拟机并从命令行启动可执行文件，它工作正常。

可执行文件是一个 Fortran 程序，它分配所有将在执行开始时使用的内存。

这是启动该过程的代码：

```
Process p = new Process();

ProcessStartInfo startInfo = new ProcessStartInfo(strPath, strArguments);

startInfo.WorkingDirectory = strDir;

p.StartInfo = startInfo;

p.Start();

p.WaitForExit(); 
```

程序启动、完成一些工作并意外结束。关于什么可能会扼杀这个过程的任何想法？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-20T08:50:15.403

我发现了问题。

重定向输出我已经看到应用程序由于“磁盘空间不足”而失败。错误，即使我有足够的磁盘空间。问题是应用程序在执行期间会创建临时文件，并且托管服务的临时目录会占用空间。我认为这个目录的最大大小为 100 MB。

[解决方案是在服务定义中配置一个新的本地存储，并在 RoleEntryPoint.OnStart 方法（ http://msdn.microsoft.com/en-us/library/windowsazure/](http://msdn.microsoft.com/en-us/library/windowsazure/hh134851.aspx)）上将 TMP 和 TEMP 环境变量设置为这个本地存储[hh134851.aspx](http://msdn.microsoft.com/en-us/library/windowsazure/hh134851.aspx)）。

# ide - 回滚 intelij 12 外观和感觉

> ID：13937070
> 
> 赞同：1
> 
> 时间：2012-12-18T16:14:29.053
> 
> 标签：ide, intellij-idea

新的 Intellij 12 外观和感觉很棒，但它可以回滚吗？我已经习惯了旧的 Intellij 样式和图标，我真的很喜欢 v 11 的外观和感觉。我可以以某种方式将它改回来吗？

谢谢，阿克德

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-18T16:31:31.097

外观可以在`File`|中更改 `Settings`| `Appearance`, 编辑器配色方案在`File`| `Settings`| `Editor`| [，可以使用插件恢复](http://bulenkov.com/2012/10/10/intellij-idea-11-icons-pack-plugin/)`Colors & Fonts`旧图标。

# javascript - 如何使用 javascript 发布到 wordpress？

> ID：13937071
> 
> 赞同：0
> 
> 时间：2012-12-18T16:14:36.293
> 
> 标签：javascript, wordpress, google-chrome-extension

我正在编写一个需要将内容发布到 Wordpress 的 Chrome 扩展程序。是否可以使用 javascript 发布到 Wordpress，或者我需要编写一个 Wordpress 插件来执行此操作？如果可能的话，有没有可以推荐的库？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-18T16:17:22.703

您应该向运行 wordpress 的服务器执行 AJAX 请求，我不是 wordpress 用户，但我假设 WP 具有某种 JSON api。

# regex - 正则表达式匹配问号前的所有内容

> ID：13937072
> 
> 赞同：1
> 
> 时间：2012-12-18T16:14:41.757
> 
> 标签：regex, .htaccess, codeigniter

好的，我正在尝试重写 .htaccess 中的 URL

现在 URL 看起来像这样：

```
http://host.com/catalog/search/item/465?item=465 
```

我希望它看起来像

```
http://host.com/catalog/search/item/465 
```

我的重写如下，这似乎适用于[正则表达式测试器](http://regexpal.com/?flags=g&regex=search/item/%28%5B%5E?%5D%2b%29&input=http://host.com/catalog/search/item/465?item=465)：

```
RewriteRule search/item/([^?]+) http://host.com/catalog/search/item/$1 [R=301,L] 
```

但相反，我得到：

```
"This page isn't redirecting properly." 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-12-18T16:21:36.623

直到第一个“？”

```
(^.*)?\? 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-18T16:19:10.553

试试这个：

```
RewriteRule ^([^?]*)\?.* $1 [R=301,L] 
```

# wpf - wpf中java分隔符边框的等价物

> ID：13937073
> 
> 赞同：0
> 
> 时间：2012-12-18T16:14:47.263
> 
> 标签：wpf, wpf-controls, border, separator

我正在开发一个 WPF 应用程序。我想知道上图中是否有等效的控件（写有“频率”的边框）

![分隔器](../Images/41b3253690765b65b069aaf57ab1e77c.png)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-18T16:19:08.980

您要查找的控件称为[GroupBox](http://msdn.microsoft.com/en-us/library/system.windows.controls.groupbox.aspx)

# java - 是否可以从 Java 中的子类访问父类的私有方法？

> ID：13937077
> 
> 赞同：2
> 
> 时间：2012-12-18T16:15:07.250
> 
> 标签：java

如何在这种类型的父类中调用私有方法？我所做的是一段丑陋的代码，但它可以工作，尽管我认为这不是一个真正的解决方案。

非常感谢一些关于如何完成的建议。我一直在寻找解决方案，但没有让我对此事有所了解。

```
 public abstract class Car {

         public void passItOn(int a) {

                takesVariable(a);

         }
    private void takesVariable(int a) {

         //Process the variables
    } 
```

孩子：

```
 public abstract class Wheel extends Car {

     boolean a = anotherMethod();
        if(value() != a) {
          passItOn(a);
        }

     } 
```

我的录取率有一些问题，但我已经解决了！全部回复+分！！！

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-12-18T16:26:09.810

*如果安全管理器允许，*[则可以使用反射](http://onjava.com/pub/a/onjava/2003/11/12/reflection.html) 访问私有字段/方法，但强烈建议不要这样做。

 *私有方法是私有的是有原因的。如果您可以访问基类，则制作该方法`protected`是一个更好的解决方案。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-12-18T16:17:11.147

私有方法不被继承，因此不能被调用。如果您真的想访问此方法，请更改其访问修饰符关键字（`protected`或`public`）。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-12-18T16:20:14.943

如果您可以将其保护起来，请执行此操作：

```
public class BaseClass {
    protected void whatever() {}
} 
```

或者，如果您出于某种原因想将其保密，并且它还将使您的基类能够更好地控制“whatever”的使用方式/时间：

```
public class BaseClass {
    private void whatever() {}
    protected void doWhatever() {
        if(!forSomeReasonDoNotWantThisToBeUsed()) {        
            whatever();
        }
    }
} 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-12-18T16:17:53.940

`protected`如果您想从子类中获得它，请制作它。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-12-18T16:20:13.850

绝对没有办法做到这一点。您不能`private`从任何其他类（无论是扩展类）调用一个类的方法。它只能在该类本身内部访问。据说是有原因的`private`。

如果您希望它只被扩展类而不是外部世界访问，那么`protected`对您的函数使用访问修饰符。*

# java - 从大型数据数组用 Java 制作等高线图

> ID：13937078
> 
> 赞同：3
> 
> 时间：2012-12-18T16:15:08.180
> 
> 标签：java, plot, jfreechart, contour, jscience

我有以下问题：

是否有工具可以在运行时使用大型数据数组在 Java 中制作轮廓图？

我发现了很多与这个问题相关的帖子（还有这里[的轮廓图问题](https://stackoverflow.com/questions/12352355/what-is-a-good-free-library-to-make-a-contour-plot-close-as-possible-to-this)和[另一个问题](https://stackoverflow.com/questions/4245424/opensource-java-library-for-surface-plots-contour-plots)），但是我没有找到任何解决方案来从大型数组中制作一个快速的轮廓图。

我试图用[Jsci](http://jsci.sourceforge.net/)和[jfreechart](http://www.jfree.org/jfreechart/)来做到这一点。使用[Jsci](http://jsci.sourceforge.net/)我在显示图像时遇到问题，使用[jfreechart](http://www.jfree.org/jfreechart/)需要很长时间才能绘制图。

我寻求的是类似于 python 中的 matplotlib 的东西。图像应该看起来像[这样](http://www.davidpace.com/images/stories/physics/d17_book33_vf_pt64ms.png)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-18T18:20:19.757

您可能正在寻找[`XYBlockRenderer`](http://www.jfree.org/jfreechart/api/javadoc/org/jfree/chart/renderer/xy/XYBlockRenderer.html). API 中显示的图像`XYBlockChartDemo1`来自[演示](http://www.jfree.org/jfreechart/samples.html)。它似乎几乎可以立即渲染 10,000 个 100 x 100 的块。如果您的经验不同，编辑您的问题以包含[sscce](http://sscce.org/)可能会揭示问题。

# azure - Publishing Code First Project to Cloud

> ID：13937086
> 
> 赞同：4
> 
> 时间：2012-12-18T16:15:37.120
> 
> 标签：azure, cloud, publishing

I do not know how to publish my code first project from Visual Studio 2012 to Azure cloud as the publish method for the cloud is different compared to publishing to Azure Web site. When I try to publish to Azure cloud, my database does not get created and initialized as it does when I publish to Azure web site.

How should I publish to cloud and make sure my database is created and seeded?

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2012-12-18T21:48:17.357

您可能需要验证多项内容才能使代码首先与 SQL 数据库一起使用。

1.  CodeFirst 确实适用于 SQL 数据库，但是如果有更新版本可用，您必须使用 EF 4.3.1 或更高版本。
2.  请验证您的连接字符串确实连接到 SQL DB，并且您指定的用户确实具有在 SQL 数据库中创建不同对象的完全访问权限。
3.  确保您的连接字符串提供程序使用 System.Data.SqlClient

由于您确实有相同的连接字符串与 Windows Azure 网站一起使用，所以我相信它是正确的并且可以按原样使用。

[2012 年 12 月 20 日添加] 在包管理器控制台中，请执行 Enable-Migrations" 这将添加必要的迁移特定代码。

同样在发布对话框中，您应该看到“执行代码优先迁移”设置，该设置应该在将包部署到服务器时启用迁移。

您需要进行必要的更改，如下所述：

1.  [http://msdn.microsoft.com/en-us/library/dd394698#efcfmigrations](http://msdn.microsoft.com/en-us/library/dd394698#efcfmigrations)

如果您没有看到上述设置，请阅读此 SO 讨论：

1.  [执行代码优先迁移在发布设置中显示为灰色](https://stackoverflow.com/questions/12495792/execute-code-first-migrations-is-grayed-out-in-publish-settings)

![在此处输入图像描述](../Images/c233aecae2175f29869732ac1e53b512.png)

# sql - sql查询以检索数据

> ID：13937088
> 
> 赞同：-2
> 
> 时间：2012-12-18T16:15:46.543
> 
> 标签：sql

![在此处输入图像描述](../Images/49239a44219b608db9d585b9166259bd.png)

我想检索薪水低于经理的员工姓名。

例如：

Employee_Lastname：WARX

Employee_Firstname：辛西娅

MANAGER_NANE：史密斯

Warx Cythnia 的经理 Manager_ID=7369，他是 Smith John，因为 Smith 的 Employee_ID=7369。而且Warx的薪水比Smith小(1575<8900)

```
SELECT  a.Employee_LastName, a.Employee_Firstname 
FROM    EMPLOYEE a
    LEFT JOIN EMPLOYEE b
        ON a.Manager_ID = b.Employee_ID AND a.Employee_Salary > b.Employee_Salary 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-18T16:20:40.817

这与您之前的问题略有修改，

```
SELECT  a.Employee_LastName,
        a.Employee_FirstName,
        b.Employee_LastName AS MANAGER_LASTNAME
FROM    EmpTable a
        LEFT JOIN EmpTable b
            ON a.Manager_ID = b.Employee_ID
WHERE   a.employee_salary < b.employee_salary 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-18T16:19:33.363

尝试 ：

```
SELECT e1.employee_id, e1.lastname, e1.firstname
FROM employee e1 INNER JOIN employee e2 ON e1.manager_id = e2.employee_id
WHERE e1.employee_salary < e2.employee_salary 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-18T16:20:30.230

```
Select Employee_Firstname
From Employee worker
INNER JOIN Employee manager ON worker.Employee_ID = manager.Manager_ID
AND worker.Employee_Salary < manager.Employee_Salary 
```

# jquery - jquery ui count sortable elements

> ID：13937091
> 
> 赞同：1
> 
> 时间：2012-12-18T16:16:07.727
> 
> 标签：jquery, jquery-ui

What is the easiest way to count of ui sortable elements?

```
<ul id="sortableList">
  <li class="nosort"></li>
  <li>item 1<li>
  <li>item 2<li>
  <li class="nosort"></li>
  <li>item 3<li>
</ul> 
```

Since i have already performed DOM elemens selection
(>:not(.nosort)) in options of sortable function

```
$("#sortableList").sortable({
    items: ">:not(.nosort)" 
```

may i use ui.item somehow to count?

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-18T16:20:39.487

```
alert($('#sortableList li').not('.nosort').length); 
```

警告没有类的`li`元素计数`#sortableList``.nosort`

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-18T16:21:19.397

您可以只使用 .length ，因为 jQuery 返回一个包含所选项目的数组：

```
$('#sortableList li:not(.nosort)').length 
```

# c# - 计算两个鼠标点之间的距离

> ID：13937093
> 
> 赞同：3
> 
> 时间：2012-12-18T16:16:09.913
> 
> 标签：c#, math, mouse, distance

我需要计算鼠标在屏幕上单击的两个位置之间的距离。

target(x & Y) & source(X & Y) 在鼠标移动事件 (eX & eY) 上填充

我有`distance = Math.Sqrt(Math.Pow(targetX - sourceX, 2) + Math.Pow(targetY - sourceY, 2));`

这给了我一个结果，但老实说，我不确定测量的单位是什么或如何转换它。如何将该结果转换为有意义的结果，例如厘米或英寸？我猜我需要考虑屏幕分辨率？

**更新** 我真的只是在消磨时间。不是在寻找一个很好的解决方案，只是在寻找有效的解决方案。它只会持续一两天。

这是`MoveMove`事件和呼叫。应该在之前发布所有内容以便更清楚。

```
 private void HookManager_MouseMove(object sender, MouseEventArgs e)
    {

        labelMousePosition.Text = string.Format("x={0:0000}; y={1:0000}", e.X, e.Y);
        AddDistance(Convert.ToDouble(e.X), Convert.ToDouble(e.Y));
    }

    private void AddDistance(double targetX, double targetY)
    {
        if (sourceX != 0 && sourceY != 0)
        {
            double distance = Convert.ToDouble(lblDistanceTravelled.Text);
            distance =+ Math.Sqrt(Math.Pow(targetX - sourceX, 2) + Math.Pow(targetY - sourceY, 2));
            lblDistanceTravelled.Text = distance.ToString();
        }
        sourceX = targetX;
        sourceY = targetY;
    } 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-12-18T16:18:07.470

变量 targetX 和 sourceX 最有可能以像素为单位，因此得到的距离将以像素为单位。

为了将其转换为“屏幕上的英寸”，您必须知道屏幕的大小。您可以确定每英寸的像素数并从那里进行转换（尽管这仅提供了您将尺子实际放在屏幕上时所获得的估计值）。要获得每英寸的像素，请参阅

[如何在 .NET 中确定监视器的真实像素大小？](https://stackoverflow.com/questions/422296/how-do-i-determine-the-true-pixel-size-of-my-monitor-in-net)

从那个问题中，您可以获得如下 DPI（但请阅读已接受的答案以了解许多警告）

```
PointF dpi = PointF.Empty;
using(Graphics g = this.CreateGraphics()){
    dpi.X = g.DpiX;
    dpi.Y = g.DpiY;
} 
```

单位之间的转换是这样的：

```
lengthInInches = numberOfPixes / dotsPerInch 
```

这里的“点”和“像素”是同一个意思。我使用的是通用术语。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-12-18T16:20:43.787

您可以通过以下方式获取“当前 DPI”

```
int currentDPI = 0;  
using (Graphics g = this.CreateGraphics())  
{  
    currentDPI = (int)g.DpiX;      
} 
```

然后你可以得到

```
double distanceInInches = distance/*InPixels*/ / currentDPI; 
```

但是，不能真正依赖系统的 DPI 设置来实现从像素距离到屏幕英寸距离的真正转换。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-18T16:19:18.480

```
 double dpc = this.CreateGraphics().DpiX / 2.54; //Dots Per Centimeter

        //calculate the number of pixels in the line
        double lineLengthInPixels = Math.Sqrt(Math.Pow(x2 - x1, 2) + Math.Pow(y2 - y1, 2));

        //line length in centimenters
        double lineLengthInCentimeters = dpc / lineLengthInPixels; 
```

# java - Distributed Computing with Java and Spring, Messaging or RMI?

> ID：13937095
> 
> 赞同：2
> 
> 时间：2012-12-18T16:16:13.813
> 
> 标签：java, spring, rmi, messaging

I am working in a firm that is new to java and I am the only java programmer and I need to write about 10 systems within a few months.. The firm has 2 other programmers that know basic java. Not Spring or anything like that.

The firm has User Data in LDAP, MySQL and on the AS/400\. I am trying to think of some easy why to work with the 2 Jr Programmers. I was thinking about making them using Messaging or RMI call for all the hard to get data. Let them do the front-ends with Java and Springs and then do calls to messaging or RMI and I do all the backend work..

I would like to hear some of the best approach on this and the best ways.. All of the projects are web applications

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-19T19:00:37.660

Spring Integration 的替代方案是[Apache Camel](http://camel.apache.org/)。

以下是其他选择：

**消息传递：** JMS、AMQP (RabbitMQ)、Redis (PubSub)、ZeroMQ

**RPC：** JAX-WS (SOAP)、JAX-RS (REST)、Protobuf 和 Thrift

我已经有 7 年没见过使用 Java RMI 了……

（列表的顺序有点像从 Java 友好到不太友好但性能/灵活性更高的顺序）。

您还可以使用带有[**Hazelcast**](http://www.hazelcast.com/docs/2.4/manual/single_html/)的分布式数据数据结构进行大量消息传递/rpc，并且看起来非常容易使用（尽管我从未广泛使用过它）。

您还可以使用一些消息队列，例如用于 RPC 的 RabbitMQ。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-18T17:17:29.680

如果您想坚持使用 Spring，您可以查看[Spring Integration](http://www.springsource.org/spring-integration)。它将为您提供消息传递和 RMI 功能，但还包括许多其他功能，以便在出现其他集成样式时合并它们。

# c - linux select performance scenarios

> ID：13937096
> 
> 赞同：3
> 
> 时间：2012-12-18T16:16:16.697
> 
> 标签：c, linux, tcp

I wrote a simple tcp server application, where my fd_set for read includes the connection socket descriptor. The server application, simply sends an ACK, whenever it receives a message. The client application only sends the next message, after it receives an ACK from server.

```
// timeval == NULL
select(maxfd, &read_set, NULL, NULL, NULL) 
```

When I do this, the performance is about 3K messages/sec. The latency between sending an ack and receiving a response from client is 0.3ms.

```
// tm.tv_sec=0 and tm.tv_usec=0
select(maxfd, &read_set, NULL, NULL, tm) 
```

But if I do this, the performance goes to 8K messages/sec and latency drops to 0.18ms.

In the latter case, select becomes a poll. Can someone please explain why the latter case performs so much better than the first case?

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-18T16:23:31.210

**可能的答案**

当超时为零时，当没有可用数据时，select() 调用会立即返回。这使您可以忙于等待轮询套接字，主动消耗 CPU 周期，直到数据到达。

当 timeout 为 NULL 时，如果没有数据，您的进程将进入 WAIT_INTERRUPTIBLE 状态，等待数据可用。这会导致至少两次上下文切换的惩罚，一次离开您的进程，另一次在数据可用时返回。这样做的好处是你的进程放弃了 CPU 并允许其他进程运行。

这就像比较[自旋锁和信号量](https://stackoverflow.com/questions/195853/spinlock-versus-semaphore)。自旋锁“旋转” CPU 等待条件，而信号量则产生 CPU。自旋锁的性能更高，但它们会占用 CPU，因此它们只能用于非常非常短的等待。信号量与其他进程更加合作，但由于额外的上下文切换，它们会产生明显的开销。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-18T16:42:46.377

它不会回答您的问题，但是如果您真的想要良好的性能，并且收到的消息率很高，您可以尝试：

*   用 O_NONBLOCK 打开
*   首先尝试阅读
*   如果读取失败并出现错误代码 EAGAIN 或 EWOULDBLOCK，请使用 timeval == NULL 进行选择
*   处理数据

* * *

## 回答 #3

> 赞同：-2
> 
> 时间：2012-12-18T16:19:50.087

手册页`select(2)`说

> timeout 是 select() 返回之前经过的时间量的上限。如果 timeval 结构的两个字段都为零，则 select() 立即返回。（这对于轮询很有用。） **如果 timeout 为 NULL（没有超时）， select() 可以无限期地阻塞**。

添加的重点是我的。如果您担心延迟，您应该查看[`epoll(4)`](http://linux.die.net/man/4/epoll).

# python - Remove Brackets from Python List for an SQL query

> ID：13937097
> 
> 赞同：2
> 
> 时间：2012-12-18T16:16:16.273
> 
> 标签：python, pandas

> **Possible Duplicate:**
> [Python challenging string encoding](https://stackoverflow.com/questions/13770560/python-challenging-string-encoding)

I am trying to put a list of tickers into a SQL query. I am new to Python.

cus is a list set up as ['x', 'y', ..., 'a']

```
test = psql.frame_query(
    "select * from dataBase where cus IN (%r)", con = db) % cus 
```

I tried this and it failed.

My next attempt was to try and remove the brackets and then paste the list in. How do I remove the brackets so that I get:

```
cus2 = 'x', 'y', ..., 'a' 
```

I was going to do:

```
str = "select * from dataBase where cus IN (%r)" % cus2
test2 = psql.frame_query(str, con = db) 
```

Or is there another way I should be attempting this?

Thank you.

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-18T16:38:37.783

使用 SQL，您确实希望避免将值插入到查询中。您通常将其留给数据库适配器，该适配器具有有关如何避免从您的值创建危险 SQL 的专业知识（SQL 引用转义，也称为 SQL 注入攻击）。

不幸的是，该[`pandas.io.sql`模块](https://github.com/pydata/pandas/blob/master/pandas/io/sql.py)只是半心半意地实现了参数支持。

而不是使用`frame_query`，直接使用[`DataFrame.from_records()`](http://pandas.pydata.org/pandas-docs/stable/generated/pandas.DataFrame.from_records.html)。

首先，生成带参数的 SQL 查询。SQL 参数的格式因数据库适配器而异，因为[Python DB API 标准](http://www.python.org/dev/peps/pep-0249/)允许一些变体。我假设您在这里使用 MySQL，它`%s`用于位置参数，与 Python 的语法相呼应：

```
sql = "select * from dataBase where cus IN ({0})".format(', '.join(['%s'] * len(cus2))) 
```

这为 中的每个值创建了足够的参数`cus2`。然后查询数据库：

```
cur = psql.execute(sql, con, params=cus2)
rows = cur.fetchall()
columns = [col_desc[0] for col_desc in cur.description]
cur.close()

result = DataFrame.from_records(rows, columns=columns, coerce_float=True) 
```

由于您似乎正在使用[`Sybase`模块](http://python-sybase.sourceforge.net/)模块进行连接，因此您必须针对库使用的（有些非标准的）SQL 参数语法进行调整。它只接受命名参数，使用*形式*`@name`：

```
params = dict(('@param{0}'.format(i), v) for i, v in enumerate(cus2))
sql = "select * from dataBase where cus IN ({0})".format(
    ', '.join(sorted(params.keys())))

cur = psql.execute(sql, con, params=params)
rows = cur.fetchall()
columns = [col_desc[0] for col_desc in cur.description]
cur.close()

result = DataFrame.from_records(rows, columns=columns, coerce_float=True) 
```

# string - Split string in WiX include file (WXI)

> ID：13937100
> 
> 赞同：1
> 
> 时间：2012-12-18T16:16:27.943
> 
> 标签：string, variables, wix

I am trying to alter a variable defined by referencing a project: `$(var.PROJECTTITLE).Targetdir` is called in my Product.wxs

PROJECTTITLE is of the form `company.product.customerAcronym` and I would like to be able to change the customerAcronym part dynamically. So basically the best solution imo would be to

1.  define a new variable that holds the full targetdir
2.  split that new variable based on the dot
3.  replace the customerAcronym with the selected one (another defined variable used everywhere else)

Any insights on how to do this?

# objective-c - QTKit 中的播放状态

> ID：13937104
> 
> 赞同：0
> 
> 时间：2012-12-18T16:16:36.923
> 
> 标签：objective-c, macos, quicktime, qtkit, monomac

我有一个使用 QTkit 从互联网读取音频的应用程序，问题是，我需要从 QTMovie 对象获取播放状态（例如：缓冲、播放、暂停等）但找不到任何方法或属性要做到这一点

任何人都知道我怎样才能获得播放状态？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-08T05:07:50.240

该`rate`方法指示是否正在播放电影。

```
float rate = [movie rate]; 
```

rate = 1.0 表示正常播放，rate = 0 表示电影停止或暂停，rate = 0.5 表示回报慢，负值表示倒带等。没有缓冲的方法。但是，有许多有用的属性，特别是指示负载状态的属性。

```
NSInteger loadState = [[movie attributeForKey:QTMovieLoadStateAttribute] longValue]; 
```

# ios - 注册 UIDeviceOrientation

> ID：13937114
> 
> 赞同：1
> 
> 时间：2012-12-18T16:17:17.813
> 
> 标签：ios, uidevice, uideviceorientation

我想检测设备的当前方向。

所以，我用了一行代码

注意：即使我没有注册它也会给我方向

```
-(IBAction) deviceOrientationChanged:(id) sender{
    NSLog(@"Device Orientation= %d",[[UIDevice currentDevice] orientation]);
} 
```

当我更改方向时，在按钮单击事件中我得到设备方向。

但是，[文档](http://developer.apple.com/library/ios/#documentation/uikit/reference/UIDevice_Class/Reference/UIDevice.html)说你需要先注册它，然后使用上面的代码。

注意：在下面的代码中，我已注册设备以接收设备方向通知

```
-(IBAction) deviceOrientationChanged:(id) sender{

    if(![[UIDevice currentDevice] isGeneratingDeviceOrientationNotifications]){
        //This statement is called very time when I click on the button. I expected to execute only once.
        [[UIDevice currentDevice] beginGeneratingDeviceOrientationNotifications];
    }
    NSLog(@"Device Orientation= %d",[[UIDevice currentDevice] orientation]);
} 
```

所以，我无法通过完美的方式来获得设备方向。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-20T17:27:54.150

注册通知不同于生成通知。通常，如果您计划在应用程序委托中或在适当的位置使用设备方向通知，您将在 UIDevice 上调用 beginGeneratingDeviceOrientationNotifications，并在 U 不再需要通知时在另一个适当的位置调用 endGeneratingDeviceOrientationNotifications。这只是 deviceOrientaion 通知的初始设置。

要在您的控制器或对象中获得这些通知，您必须向我们通知中心。U注册通知UIDeviceOrientationDidChangeNotification。[[NSNotificationCenter defaultCenter] addObserver:myObject 选择器:@selector(deviceRotated:)name:UIDeviceOrientationDidChangeNotification object:nil]

当你不需要它或在对象的dealloc中将其从通知中心删除。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-18T23:48:51.727

我认为你的 if 条件是错误的；你有它 if([[UIDevice currentDevice] isGeneratingDeviceOrientationNotifications]) 它应该是

if( **!** [[UIDevice currentDevice] isGeneratingDeviceOrientationNotifications])

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-18T16:20:48.077

您无法阻止设备生成`UIViewController`轮播通知。请参阅此处的问题[。](https://stackoverflow.com/questions/9239258/stop-device-orienation?rq=1)

您链接到的文档所指的是`NSNotificationCenter`通知。

# javascript - 检查图像是否存在而不加载它

> ID：13937116
> 
> 赞同：3
> 
> 时间：2012-12-18T16:17:22.693
> 
> 标签：javascript, jquery, ajax, xmlhttprequest, loading

我目前在悬停功能中使用以下脚本：

```
function UrlExists(url) {
    var http = new XMLHttpRequest();
    http.open('HEAD', url, false);
    http.send();
    return http.status!=404;
} 
```

它一个接一个地加载每个图像，导致整个网站变慢（甚至崩溃）。

有没有办法**检查图像是否存在**，尽管防止使用javascript（完全）**加载它？**

非常感谢！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-18T16:20:46.263

由于 JavaScript（以及因此 jQuery）是客户端，并且图像在加载之前驻留在服务器端，因此如果不使用 Ajax 或服务器端脚本来确保图像存在，就无法检查图像是否存在。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-18T16:39:45.513

如果图像存在而不**加载，则****无法**确定使用 javascript 或 jQuery 。

 ****解决方法**：

检查服务器端是否存在图像的唯一方法是尝试将图像加载到隐藏`div`或其他东西并检查图像是否存在然后显示它。

或者您可以使用您选择的一些服务器端语言，例如（php、asp、jsp、python 等）并将对图像的请求发送到服务器端语言（最好使用 AJAX）并让服务器端脚本检查图像是否存在与否，如果存在则发回图像，如果不存在则发送错误代码。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2018-02-27T20:36:02.967

My solution:

```
function imageExists(url) {
    return new Promise((resolve, reject) => {
        const img = new Image(url);
        img.onerror = reject;
        img.onload = resolve;
        const timer = setInterval(() => {
            if (img.naturalWidth && img.naturalHeight) {
                img.src = ''; /* stop loading */
                clearInterval(timer);
                resolve();
            }
        }, 10);
        img.src = url;
    });
} 
```

Example:

```
imageExists(url)
    .then(() => console.log("Image exists."))
    .catch(() => console.log("Image not exists.")); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-05-02T06:44:22.723

Here's how you can check if an image exists:

```
 function checkImage(src) {
     var img = new Image();
     img.onload = function() {
     // code to set the src on success
  };
  img.onerror = function() {
// doesn't exist or error loading
 };

 img.src = src; // fires off loading of image
} 
```

Here's a working implementation [http://jsfiddle.net/jeeah/](http://jsfiddle.net/jeeah/)**

# javascript - 使用 Javascript 设置 html 5 音频标签的音量

> ID：13937118
> 
> 赞同：0
> 
> 时间：2012-12-18T16:17:24.963
> 
> 标签：javascript, html, audio

> **可能重复：**
> [使用 jQuery 控制 HTML5 <audio> 音量](https://stackoverflow.com/questions/9589292/using-jquery-to-control-html5-audio-volume)

我有一个 html 音频标签：

```
<audio class="audio" autoplay="autoplay" controls="controls" src="All_Right.mp3"></audio> 
```

如果它尝试像这样使用 Javascript 设置音量：

```
$('.audio').volume = 0.1;

alert($('.audio').volume); 
```

但这不起作用。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-12-18T16:19:06.547

我假设您正在使用 jQuery。

`$('.audio')`返回一个 jQuery 对象，而不是一个 DOM 元素。
在 jQuery 对象上设置属性对 DOM 没有影响。

相反，您需要调用 jQuery`.prop(name, value)`方法。

# android - 在 Android Gradle 构建中禁用清单合并

> ID：13937123
> 
> 赞同：17
> 
> 时间：2012-12-18T16:17:49.663
> 
> 标签：android, gradle, android-build

我正在使用新的 gradle android 构建系统。

该项目由两个android库项目和一个主项目组成。

使用 ant 构建，必须在 project.properties 中启用清单合并。但是在使用 gradle 构建系统时，默认情况下会启用清单合并。如何禁用清单合并？

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-12-19T18:52:40.417

编辑：这实际上是可能的，虽然是间接的，从 0.3 开始

您需要做的是禁用 processManifest 任务，使其不会运行并告诉 processResources 要使用的清单在哪里：

```
android.applicationVariants.all { variant ->
    variant.processResources.manifestFile = file('src/main/AndroidManifest.xml')
    variant.processManifest.enabled=false
} 
```

请注意，如果您通过 DSL 自定义应用程序包名称，则应在默认位置保持默认清单不变，以便为 R 类提供一致的包名称，然后将手动合并的清单放在其他位置并指向每个变体 processResources交给他们的任务。

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2015-04-20T22:03:41.310

这可能会有所帮助。

```
 android.applicationVariants.all{ variant ->
       variant.outputs.each { output ->
         output.processResources.manifestFile = file('AndroidManifest.xml')
         output.processManifest.enabled=false
       }
  } 
```

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2013-11-15T12:41:28.667

对于 0.6.+ 插件，您还必须从更改`buildVariants`为`applicationVariants`：

```
android.applicationVariants.all { variant ->
    variant.processResources.manifestFile = file('src/main/AndroidManifest.xml')
    variant.processManifest.enabled=false
} 
```

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2015-01-22T19:20:47.393

看起来这些解决方案不适用于 1.0 插件：

> 在 com.android.build.gradle.internal.api.ApplicationVariantImpl_Decorated@774f1d0b 上找不到属性“processResources”。

有人有更新吗？我们的问题是 recyclerview-v7:21.0.3 的最终 apk 中出现了一个杂散活动：

```
<activity
   android:label="RecyclerViewTestActivity"
   android:name="android.support.v7.widget.TestActivity"/> 
```

**更新：**看起来可以配置清单合并（请参阅[http://tools.android.com/tech-docs/new-build-system/user-guide/manifest-merger](http://tools.android.com/tech-docs/new-build-system/user-guide/manifest-merger)）。在这种特定情况下，来自 recyclerview-v7 库的 TestActivity 可以通过以下方式删除：

```
<activity
    android:name="android.support.v7.widget.TestActivity"
    android:label="RecyclerViewTestActivity"
    tools:node="remove"/> 
```

谢谢[菲利普](https://stackoverflow.com/users/4511641/filip-maelbrancke)。

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2013-10-28T14:39:54.773

对于 0.5.+ 插件，您必须从更改`each`为`all`：

```
android.buildVariants.all { variant ->
    variant.processResources.manifestFile = file('src/main/AndroidManifest.xml')
    variant.processManifest.enabled=false
} 
```

# licensing - 我能否以不同于实际库/应用程序源代码的方式许可我的规范/测试？

> ID：13937127
> 
> 赞同：1
> 
> 时间：2012-12-18T16:18:03.830
> 
> 标签：licensing

我已经编写了一个 Ruby gem，我在 MIT 许可下获得了许可，但我认为我可以通过在我的规范中使用 AGPL 库来大大提高测试覆盖率。我编写的实际库代码（将由使用 gem 的人执行）永远不会使用这个 AGPL 库，它只是用于在运行 gem 规范时在开发环境中运行测试。

然后我在 AGPL 下许可我的规范代码同时在 MIT 下许可我的库/应用程序代码是否合法？关于我的 GitHub 存储库（例如，规范的单独存储库）或我的 .gemspec 文件（例如，不将规范和 AGPL 库与 gem 捆绑在一起），我有什么特别需要做的吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-18T17:32:06.157

首先，我不是律师。

假设您要使用的库名为 L。

由于您的应用程序代码不是 L 的衍生作品，因此不受 AGPL 许可的影响。因此，您可以自由选择分发它的规则。

您的测试代码是 L 在 AGPL 意义上的衍生作品，因此如果您发布它，您必须使用 AGPL 的条款。

在单个存储库中存储具有不同许可证的文件不是问题。重要的是清楚明确地说明每个文件的许可证是什么。最好的办法是将相关注释放在文件头和 README 或 LICENSE 文件中。我的意思是

> 目录中的所有文件`test`均根据 (...) 条款发布。除非另有说明，否则所有其余文件均根据 (...) 条款发布。

请记住在项目的每种分发形式中添加此信息，即gem 文件、tarball 等。如果您必须指定发布*整个*gem 的条款，则必须提供两个许可证。就[gemspec](http://docs.rubygems.org/read/chapter/20#license)而言，这意味着

```
spec.licenses = ['MIT', 'AGPL'] 
```

# binding - 使用 NSObjectController 将数字绑定到 NSTextField，但无法显示

> ID：13937135
> 
> 赞同：2
> 
> 时间：2012-12-18T16:18:30.970
> 
> 标签：binding, nsobjectcontroller

我对可可编程很陌生。我正在学习绑定，试图制作一个简单的绑定代码：

```
 - (void)awakeFromNib
    {
        self.aValue = [[Model alloc] init];

        NSString *aKey = @"value";
        NSDictionary *aDic = [[NSDictionary alloc] initWithObjectsAndKeys:self.aValue, aKey, nil];

        self.anObjctCtrler = [[NSObjectController alloc] initWithContent:nil];
        [self.anObjctCtrler setContent:aDic];
        NSLog(@"%ld", [[[[self.anObjctCtrler content] valueForKey:@"value"] number] integerValue]);
     } 
```

anObjectCtrler是Interface Builder中的NSObjectController，我将一个NSTextField“绑定”到对象控制器，anObjectCtrler的类，在“value”的模型键路径和“selection”的控制器键处；对象控制器具有作为对象的引用到文件所有者的出口。

当我运行代码时，NSTextField 显示“No Selection”，而不是“self.aValue”的值。您可以看到我通过使用“NSLog ...”的输出来检查对象控制器的内容，它显示了正确的值。

任何人都可以帮我解决这个问题，好吗？

非常感谢。

# apache - 用户使用 CURL 时如何返回特定信息？

> ID：13937136
> 
> 赞同：-1
> 
> 时间：2012-12-18T16:18:34.220
> 
> 标签：apache, curl

我试图弄清楚当用户在我的一个网页上使用 cURL 时如何返回特定的信息（即我不希望 curl 下载所有代码）。我在 ifconfig.me 上看到了一个工作示例，当您 curl ifconfig.me 时，它​​只返回您的 IP 地址。这是通过 Apache 完成并重定向 cURL 用户代理还是通过 PHP/HTML 以某种方式完成的？

**已解决：** 感谢@Dancrumb 为我指明了正确的方向。我能够使用 Apache mod_rewrite 将 curl 用户代理重定向到自定义页面，其中包含我希望 curl 提取的特定信息。

```
RewriteEngine  on
RewriteCond %{HTTP_USER_AGENT}  ^curl/*
RewriteRule ^/index\.php$ /ip.php [L] 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-18T16:26:23.057

ifconfig.me 最有可能使用标头中的用户代理字符串来确定这不是浏览器请求。

如果你执行：

```
curl ifconfig.me/ua 
```

你得到

```
curl/7.27.0 
```

（或其他一些版本字符串）。

因此，如果您检查`User-Agent`HTTP 请求中的标头，您可以查看该请求是 Curl 请求、浏览器请求还是其他一些 UA。

# sql - 加入与 LINQ 的多对多关系

> ID：13937143
> 
> 赞同：2
> 
> 时间：2012-12-18T16:18:49.617
> 
> 标签：sql, linq, entity-framework, ef-database-first

我的任务是将一些旧的 SQL 存储过程转换为 LINQ 以进行我们正在进行的 EF 迁移，我有点难过。鉴于这是从现有应用程序的迁移，edmx 是首先生成数据库的。所以，我有一个我试图复制的 SQL 语句：

```
SELECT DISTINCT
    d.DeliverySubscriptionId
,   d.ContactId
,   d.statementMacroId_fk
,   m.Name as MacroName
,   DeliveryMethod  =     REPLACE((SELECT DISTINCT
                                    dm2.Name + ',' AS 'data()'
                              FROM
                                    DeliverySubscription d2     
                              JOIN 
                                    StatementMacro m2 on 
                                    d2.StatementMacroId_fk = m2.StatementMacroId    
                              JOIN 
                                    DeliverySubscription_Method_Rel dmr2 ON 
                                    d2.DeliverySubscriptionId = dmr2.DeliverySubscriptionId_Fk
                              JOIN 
                                    dbo.DeliveryMethod dm2 ON 
                                    dmr2.DeliveryMethodId_Fk = dm2.DeliveryMethodId
                              WHERE
                                    d.DeliveryConfigurationId_fk = @configurationId
                                    AND 
                                    d.IsActive = 1
                                    AND
                                    D.DeliverySubscriptionId = D2.DeliverySubscriptionId FOR XML PATH('')) + '$', ',$', '') 

FROM 
      DeliverySubscription d     
INNER JOIN 
      StatementMacro m ON 
      d.StatementMacroId_fk = m.StatementMacroId    
JOIN 
      DeliverySubscription_Method_Rel dmr ON 
      d.DeliverySubscriptionId = dmr.DeliverySubscriptionId_Fk
JOIN dbo.DeliveryMethod dm ON 
      dmr.DeliveryMethodId_Fk = dm.DeliveryMethodId
WHERE 
      d.DeliveryConfigurationId_fk = @configurationId
      AND 
      d.IsActive = 1 
```

特别是我遇到问题的部分是 JOIN ，它是一个关系表，表示和`DeliverySubscription_Method_Rel`之间的多对多关系。`DeliverySubscription``DeliveryMethod`

这显示为：

`[DeliverySubscription] * ---- * [Delivery Method]`

在 edmx 的数据库图中。没有`DeliverySubscription_Method_Rel`创建实体。正如您在 SQL 语句中看到的，JOIN 直接在关系表上，但我似乎无法弄清楚如何在 LINQ 中复制它。请帮忙！

更新：所以环顾网络，我发现了一个类似的例子，它建议做这样的事情：

```
from s in Context.DeliverySubscriptions
                from dm in s.DeliveryMethods
                join sm in Context.StatementMacroes on s.StatementMacroId_Fk equals sm.StatementMacroId
                where s.DeliveryConfigurationId_Fk == configurationId
                select new DeliverySubscription_dto
                {
                    DeliverySubscriptionId = s.DeliverySubscriptionId,
                    QubeContactId = s.QubeContactId,
                    statementMacroId_fk = s.StatementMacroId_Fk,
                    MacroName = sm.Name,
                    DeliveryMethod = dm.Name.Replace("$","").Replace(",$","")
                } 
```

...但是，因为到目前为止我在应用程序中还有很多其他的事情要更改，所以我无法构建以进行测试，所以我只是想运行这个，让大家看看这是否正确。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-12-27T21:32:27.990

该查询是一个野兽。如果您对它没有任何性能问题，我可能只是将它添加到数据模型中并使用 linq/EF 来调用它。

# svg - defs/use 中的 foreignObject 中的画布未显示

> ID：13937144
> 
> 赞同：4
> 
> 时间：2012-12-18T16:18:49.210
> 
> 标签：svg, html5-canvas

我想使用 JavaScript 在嵌入 svg 的 html5 画布上绘制（在 html5 页面中）。如果这样做，在“cvs”上绘图就可以了：

```
<svg id="fig" version="1.1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" x="0px" y="0px" width="1024px" height="1024px" viewBox="0 0 1024 1024">
  <foreignObject x="0" y="0" width="512" height="512">
    <body xmlns="http://www.w3.org/1999/xhtml">
      <canvas id="cvs" width="512" height="512"></canvas>
    </body>
  </foreignObject>
</svg> 
```

但如果使用画布完成并在**使用**标签中引用，则不会。图纸根本没有出现。在 Safari 中检查元素告诉我**使用**元素的尺寸是 NaN x NaN；Firebug 说 0x0。

```
<svg id="fig" version="1.1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" x="0px" y="0px" width="1024px" height="1024px" viewBox="0 0 1024 1024">
  <defs>
    <foreignObject id="circles" x="0" y="0" width="512" height="512">
      <body xmlns="http://www.w3.org/1999/xhtml">
        <canvas id="cvs" width="512" height="512"></canvas>
      </body>
    </foreignObject>
  </defs>
  <use x="0" y="0" xlink:href="#circles"></use>
</svg> 
```

这是一个错误吗？预期的行为？我只是不明白如何使用foreignObject（很可能）？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-18T16:38:00.507

您不能直接指向 foreignObject 元素，它在[SVG 规范中是这样说的](http://www.w3.org/TR/SVG/struct.html#UseElement)

'svg', 'symbol', 'g', graphics element or other 'use' only. 因此，您可以指向一个`<g>`or`<svg>`元素，`<foreignObject>`例如，该元素具有一个子元素。

# objective-c - 屏幕上特定位置的点击事件的手势识别器

> ID：13937146
> 
> 赞同：1
> 
> 时间：2012-12-18T16:18:53.050
> 
> 标签：objective-c, ios, uigesturerecognizer

我正在视图中显示数百个缩略图。我知道处理点击缩略图的默认方法是使用 UICollectionView 委托方法“didSelectItemAtIndexPath”，但由于它有很多缩略图，我想研究将手势添加到屏幕位置，所以当我点击屏幕上的特定位置时，它会处理事件相应地用于下面的特定缩略图。我想知道这是否是一个好的/可能的方法？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-18T16:34:21.420

使用 UICollectionView 会容易得多。

如果您需要自定义布局，那么您可以继承 UICollectionViewLayout 并获得一些非常酷的动态布局。

您还可以获得出列单元的额外好处，这意味着您可以使用它获得更好的内存管理。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-18T16:36:28.837

你可能会觉得`UIGestureRecognizer`有用。一个很好的入门教程在[这里](http://developer.apple.com/library/ios/#documentation/uikit/reference/UIGestureRecognizer_Class/Reference/Reference.html)。

# objective-c - 找不到协议声明

> ID：13937147
> 
> 赞同：1
> 
> 时间：2012-12-18T16:18:55.670
> 
> 标签：objective-c, ios, restkit

我尝试按照[此说明](https://github.com/RestKit/RestKit/wiki/Installing-restkit-v0.20.x-via-cocoapods)使用 cocoapod 设置 RestKit 。一切看起来都很好。我可以导入 RestKit 并构建项目。但是，当我添加`<RKObjectLoaderDelegate>`到`ViewController`接口时，出现错误：找不到`RKObjectLoaderDelegate`.

我错过了什么吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-18T16:42:09.263

你`#import "RKObjectLoader.h"`在你的标题中吗？

# sqlite - 在 qt 中使用 sqlite 数据库

> ID：13937148
> 
> 赞同：1
> 
> 时间：2012-12-18T16:18:58.933
> 
> 标签：sqlite, qt

这是我的代码，似乎没有任何问题：

```
QSqlDatabase db=QSqlDatabase::addDatabase("QSQLITE");
db.setDatabaseName("thedata.sqlite");
db.open();

QSqlQuery query;
query.prepare("SELECT lastname FROM people where firstname='?' ");
query.bindValue(0, lineEdit->text());

bool x = query.exec();

if(x){
   lineEdit_2->setText(query.value(0).toString());
 }

 else {
   QSqlError err;
    err = query.lastError();
    QMessageBox::about(this,"error",err.text()   );
 } 
```

当程序始终运行时，它会给出错误`parameter count mismatch`，我正在使用 qt 4.8 以及它自己的用于使用 sqlite 的标头。

我会非常感谢任何建议，虽然我在谷歌搜索我看到这个问题的很多帖子，但没有任何帮助。

谢谢你。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-18T17:32:44.407

你准备好的陈述是错误的，应该是：

```
quary.prepare("SELECT lastname FROM people where firstname=?"); 
```

`'`请注意，占位符周围没有单引号 ( )。如果你加上引号，它会作为文字传递给数据库，给你留下一个无参数的查询和传递太多参数的代码。

（将该变量名称更改为`query`也将是一个不错的选择。）

您还需要检查返回值 if `QSqlQuery::prepare`，并打印/显示您从中获得的错误消息，如果它失败 - 否则`QSqlQuery::exec`重置当前错误，如果解析有问题，您将收到一条非常无意义的错误消息准备好的声明。

```
if(x){
  lineEdit_2->setText(quary.value(0).toString());
} 
```

这也是不正确的。您需要调用（并检查返回值）`query.next()`将结果集定位到返回的第一行（如果有的话）。`.value(X)`在你打电话之前你不能使用`.next()`。

# uml - UML2 活动图：对象流和控制流

> ID：13937154
> 
> 赞同：3
> 
> 时间：2012-12-18T16:19:06.187
> 
> 标签：uml, activity-diagram

我想通过 UML2 活动图对以下活动进行建模：

1.  执行动作 1。此操作产生两个输出参数：Object1 和 Object2。
2.  执行动作 2。此操作需要 Object2 作为输入参数。它不需要 Object1 作为输入参数。
3.  执行动作 3。此操作需要 Object1 和 Object2（Action1 的输出参数）作为输入参数。

见下图（忽略名称“LoopNode1”）：

![UML2 活动图](../Images/4789b7ca538d204a124ae31ac764f616.png)

我想我还没有完全理解 UML2 中的标记、对象流和控制流的概念。如何明确 Action2 在 Action3 之前执行？恕我直言，在显示的图表中，执行操作的顺序不清楚，是吗？我想完全按照上面描述的方式实现活动，没有任何并行性！

非常感谢您的帮助！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-18T16:32:23.933

您可以使用`synchronization bar (join)`来指示依赖关系（请参见[此处](http://www.sparxsystems.com/resources/uml2_tutorial/uml2_activitydiagram.html)）。或者，您可以使用序列图而不是活动图 - 在那里自然地定义了顺序。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2020-08-03T16:11:00.167

正如 UML 2.5.1 所述...

> 对象节点保存从可执行节点输入和输出的数据，并在对象流边缘移动。控制节点通过控制流边缘指定可执行节点的顺序

...我认为很明显，您的 Action2 在 Action3 之前执行，因为包含 Action2 的分支是唯一指定任何排序/控制流（ActivityEdge）元素的分支。

老实说，我不太确定如何解释以下句子，以及它是否对我的争论有一些影响：

> 活动本质上就是通常所说的“控制和数据流”模型。这样的计算模型本质上是并发的，因为任何活动节点执行的排序都是由活动边显式建模的，并且对于没有显式排序的任何计算都不需要排序。

# c# - 编写属性路径以查找控件的属性

> ID：13937160
> 
> 赞同：0
> 
> 时间：2012-12-18T16:19:11.833
> 
> 标签：c#, wpf, user-controls

我有一个`UserControl`：

```
<UserControl x:Class="WpfApplication1.UserControl1"
             xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
             xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
             xmlns:mc="http://schemas.openxmlformats.org/markup-compatibility/2006" 
             xmlns:d="http://schemas.microsoft.com/expression/blend/2008" 
             mc:Ignorable="d" 
             d:DesignHeight="300" d:DesignWidth="300">
    <Button Name="myButton" Content="hello world" Padding="10" VerticalAlignment="Center" HorizontalAlignment="Center"/>
</UserControl> 
```

和代码隐藏：

```
public partial class UserControl1 : UserControl
{
    public bool IsShown
    {
        get { return (bool)GetValue(IsShownProperty); }
        set { SetValue(IsShownProperty, value); }
    } 

    public static readonly DependencyProperty IsShownProperty =
        DependencyProperty.Register("IsShown", typeof(bool), typeof(UserControl1), new UIPropertyMetadata(false));

    public UserControl1()
    {
        InitializeComponent();
    }
} 
```

**当 IsShown 为 true 时，**我想向myButton 添加一个 Effect 。在主窗口中，

```
<Window x:Class="WpfApplication1.MainWindow"
        xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
        xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
        Title="MainWindow" Height="350" Width="525" xmlns:my="clr-namespace:WpfApplication1">
    <Window.Resources>
        <DropShadowEffect x:Key="outerGlow" Color="#00E300" Direction="0" ShadowDepth="0" BlurRadius="12" />
        <Style x:Key="style" TargetType="my:UserControl1">
            <Style.Triggers>
                <Trigger Property="IsShown" Value="true">
                    <Setter Property="myButton.Effect" Value="{StaticResource outerGlow}"/>
                </Trigger>
            </Style.Triggers>
        </Style>
    </Window.Resources>
    <my:UserControl1 x:Name="userControl11" Style="{StaticResource style}" />
</Window> 
```

但是 VS 无法解决 symbol `myButton`。

如何解决？

**更新：**

我找到[了 MSDN 文章](http://msdn.microsoft.com/en-us/library/ms742451.aspx)。谁能告诉我我的财产路径属于哪一类？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-18T16:21:39.497

当您需要在可以外部应用的样式中设置此效果时，您可以创建另一个属性`MyButtonEffect`并在触发器中设置它。

```
public partial class UserControl1 : UserControl
{
    public Effect MyButtonEffect
    {
        get { return (Effect)GetValue(MyButtonEffectProperty); }
        set { SetValue(MyButtonEffectProperty, value); }
    }

    public static readonly DependencyProperty MyButtonEffectProperty =
        DependencyProperty.Register("MyButtonEffect", typeof(Effect), typeof(UserControl1),
        new FrameworkPropertyMetadata(null, MyButtonEffectPropertyChanged));

    private static void MyButtonEffectPropertyChanged(
        DependencyObject obj, DependencyPropertyChangedEventArgs e)
    {
        ((UserControl1)obj).myButton.Effect = (Effect)e.NewValue;
    }
} 
```

触发：

```
<Trigger Property="IsShown" Value="true">
    <Setter Property="MyButtonEffect" Value="{StaticResource outerGlow}"/>
</Trigger> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-18T16:32:44.873

你不能那样做。

如果您需要影响 UserControl 范围内的控件，则需要在 UserControl 中定义一个属性，并使用 RelativeSource 或 ElementName 在内部控件中引用该属性：

```
<UserControl x:Class="WpfApplication1.UserControl1"
             xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
             xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
             xmlns:mc="http://schemas.openxmlformats.org/markup-compatibility/2006" 
             xmlns:d="http://schemas.microsoft.com/expression/blend/2008" 
             mc:Ignorable="d" 
             d:DesignHeight="300" d:DesignWidth="300" x:Name="mycontrol">
    <Button Name="myButton" Content="hello world" Padding="10" VerticalAlignment="Center" HorizontalAlignment="Center">
       <Button.Style>
          <Style>
             <Style.Triggers>
                <DataTrigger Binding="{Binding IsShown, ElementName="mycontrol"}" Value="True">
                    <Setter Property="Effect" Value"{StaticResource OrWhatever}"/>
                </DataTrigger>
             </Style.Triggers>
          </Style>
</UserControl> 
```

# web-services - 在 jboss 中将 cxf Web 服务配置为 7

> ID：13937163
> 
> 赞同：1
> 
> 时间：2012-12-18T16:19:18.450
> 
> 标签：web-services, spring, jax-ws, cxf, jboss7.x

我正在开发一个新的网络服务。但我似乎无法找出设置 Web 服务以在 jboss 中部署为 7 的最佳方法。

根据 jboss 文档，这里是 web.xml。

```
<web-app xmlns="http://java.sun.com/xml/ns/javaee"
  xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
  xsi:schemaLocation="http://java.sun.com/xml/ns/javaee http://java.sun.com/xml/ns/javaee/web-app_2_5.xsd"
  version="2.5"> 

<servlet>
    <servlet-name>testService</servlet-name>
    <servlet-class>com.sgb.testService.ws.web.TestService</servlet-class>
    <load-on-startup>1</load-on-startup>
</servlet>

<servlet-mapping>
    <servlet-name>testService</servlet-name>
    <url-pattern>/*</url-pattern>
</servlet-mapping> 
```

根据 jboss 文档，它还需要一个 jboss-cxf.xml 用于 cxf 和 spring 的所有配置。

```
 <beans xmlns="http://www.springframework.org/schema/beans"
xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" 
xmlns:cxf="http://cxf.apache.org/core" 
xmlns:jaxws="http://cxf.apache.org/jaxws" 
xmlns:context="http://www.springframework.org/schema/context" 
xmlns:wsa="http://cxf.apache.org/ws/addressing" 
xmlns:http="http://cxf.apache.org/transports/http/configuration" 
xmlns:sec="http://cxf.apache.org/configuration/security" 
xsi:schemaLocation="
 http://www.springframework.org/schema/beans http://www.springframework.org/schema/beans/spring-beans-3.1.xsd 
 http://cxf.apache.org/core http://cxf.apache.org/schemas/core.xsd 
 http://cxf.apache.org/jaxws http://cxf.apache.org/schemas/jaxws.xsd 
 http://www.springframework.org/schema/context http://www.springframework.org/schema/context/spring-context-3.1.xsd 
 http://cxf.apache.org/transports/http/configuration http://cxf.apache.org/schemas/configuration/http-conf.xsd ">

<import resource="classpath:META-INF/cxf/cxf.xml" />
<import resource="classpath:META-INF/cxf/cxf-servlet.xml" />
<import resource="classpath:META-INF/cxf/cxf-extension-soap.xml" />

<!--  import spring application context configurations -->
<import resource="classpath:META-INF/spring/applicationContext-ws.xml" />

<jaxws:endpoint id="testService" 
    implementor="com.sgb.testService.ws.web.TestService"
    address="/testService" >
    <!-- 
    address="http://localhost:8080/testService">
    -->
    <jaxws:properties>
        <entry key="schema-validation-enabled" value="true" />
    </jaxws:properties>
    <jaxws:invoker>
        <bean class="org.jboss.wsf.stack.cxf.InvokerJSE" />
    </jaxws:invoker>
</jaxws:endpoint> 
```

并且 spring 配置在这里的 ApplicationContext-ws.xml 中定义。

```
<beans xmlns="http://www.springframework.org/schema/beans"
xmlns:aop="http://www.springframework.org/schema/aop" 
xmlns:context="http://www.springframework.org/schema/context"
xmlns:jee="http://www.springframework.org/schema/jee" 
xmlns:jaxws="http://cxf.apache.org/jaxws"
xmlns:tx="http://www.springframework.org/schema/tx"
xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
xsi:schemaLocation="http://www.springframework.org/schema/aop      http://www.springframework.org/schema/aop/spring-aop-3.1.xsd
    http://www.springframework.org/schema/beans http://www.springframework.org/schema/beans/spring-beans-3.1.xsd
    http://www.springframework.org/schema/context      http://www.springframework.org/schema/context/spring-context-3.1.xsd
    http://www.springframework.org/schema/jee http://www.springframework.org/schema/jee/spring-jee-3.1.xsd
    http://www.springframework.org/schema/tx http://www.springframework.org/schema/tx/spring-tx-3.1.xsd
    http://cxf.apache.org/jaxws http://cxf.apache.org/schemas/jaxws.xsd">

<context:property-placeholder location="classpath*:META-INF/spring/*.properties" />

<!--  
import the common configurations from core sub-module
which contains the declarations for Datasource, EntityManagerFactory & PersistanceUnit 
-->
<import resource="applicationContext-core.xml" />
<import resource="applicationContext-jpa.xml" />

<!-- setting up multiple packages to scan for components -->
<context:component-scan base-package="com.sgb.testService.ws.service" />

<!-- Declare the Transaction Manager -->
<bean id="transactionManager" 
    class="org.springframework.orm.jpa.JpaTransactionManager">
    <property name="entityManagerFactory" ref="entityManagerFactory" />
</bean>

<!-- declare transactions as annotation driven -->
<tx:annotation-driven 
    transaction-manager="transactionManager" /> 
```

上面的看起来对吗？我错过了什么吗？

具体问题：在jboss AS 7中部署基于cxf的web服务，spring beans配置（上面的ApplicationContext-ws.xml）需要在哪里定义？

有人可以指出我最近的（2012）示例或教程。我在网上找到的大多数示例似乎都很旧，而且我似乎无法在 jboss 或 spring 网站上找到合适的教程......

谢谢你。-SGB

编辑添加：错误消息似乎表明在部署war文件时，jboss试图将wsdl发布到JBOSS_HOME/standalone/data/wsdl/TestService.war，但由于找不到架构（xsd文件）而失败. 这有点奇怪，因为 bot 架构和 wsdl 位于 WEB-INF/wsdl/ 目录中。其中 JBOSS_HOME = C:\Program Files (x86)\Apache Software Foundation\jboss-as-7.1.1.Final\

错误信息：

```
15:56:09,146 INFO  [org.apache.cxf.service.factory.ReflectionServiceFactoryBean] (MSC service thread 1-4) Creating Service {http://www.sgb.com/Slm/ES
/TestServiceIdentifier}TestServiceIdentifier from WSDL: WEB-INF/wsdl/TestService.wsdl
15:56:09,238 INFO  [org.apache.cxf.endpoint.ServerImpl] (MSC service thread 1-4) Setting the server's publish address to be http://localhost:8080/eucl
id-ws
15:56:09,266 INFO  [org.jboss.wsf.stack.cxf.deployment.WSDLFilePublisher] (MSC service thread 1-4) WSDL published to: JBOSS_HOME/standalone/data/wsdl/testService-ws.war    /TestService.wsdl
15:56:09,270 ERROR [org.jboss.msc.service.fail] (MSC service thread 1-4) MSC00001: Failed to start service jboss.deployment.unit."testService-ws.war".INSTA
LL: org.jboss.msc.service.StartException in service jboss.deployment.unit."testService-ws.war".INSTALL: Failed to process phase INSTALL of deployment "eucl
id-ws.war"
    at    org.jboss.as.server.deployment.DeploymentUnitPhaseService.start(DeploymentUnitPhaseService.java:119) [jboss-as-server-7.1.1.Final.jar:7.1.1.Final]
    at org.jboss.msc.service.ServiceControllerImpl$StartTask.startService(ServiceControllerImpl.java:1811) [jboss-msc-1.0.2.GA.jar:1.0.2.GA]
    at org.jboss.msc.service.ServiceControllerImpl$StartTask.run(ServiceControllerImpl.java:1746) [jboss-msc-1.0.2.GA.jar:1.0.2.GA]
    at java.util.concurrent.ThreadPoolExecutor$Worker.runTask(ThreadPoolExecutor.java:886) [rt.jar:1.6.0_33]
    at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:908) [rt.jar:1.6.0_33]
    at java.lang.Thread.run(Thread.java:662) [rt.jar:1.6.0_33]
 Caused by: java.lang.RuntimeException: Cannot publish wsdl to: JBOSS_HOME\standalone\data\
wsdl\testService-ws.war\TestService.wsdl
    at org.jboss.wsf.stack.cxf.deployment.WSDLFilePublisher.publishWsdlFiles(WSDLFilePublisher.java:107)
    at org.jboss.wsf.stack.cxf.deployment.EndpointImpl.publishContractToFilesystem(EndpointImpl.java:222)
    at org.jboss.wsf.stack.cxf.deployment.EndpointImpl.doPublish(EndpointImpl.java:93)
    at org.apache.cxf.jaxws.EndpointImpl.publish(EndpointImpl.java:239)
    at org.apache.cxf.jaxws.EndpointImpl.publish(EndpointImpl.java:509)
    at org.jboss.wsf.stack.cxf.configuration.NonSpringBusHolder.configure(NonSpringBusHolder.java:117)
    at org.jboss.wsf.stack.cxf.deployment.aspect.BusDeploymentAspect.startDeploymentBus(BusDeploymentAspect.java:113)
    at org.jboss.wsf.stack.cxf.deployment.aspect.BusDeploymentAspect.start(BusDeploymentAspect.java:66)
    at org.jboss.as.webservices.deployers.AspectDeploymentProcessor.deploy(AspectDeploymentProcessor.java:74)
    at org.jboss.as.server.deployment.DeploymentUnitPhaseService.start(DeploymentUnitPhaseService.java:113) [jboss-as-server-7.1.1.Final.jar:7.1.1
 .Final]
    ... 5 more
Caused by: java.io.FileNotFoundException: JBOSS_HOME\standalone\data\wsdl\testService-ws.war\TestServiceIdentifier.xsd (The system cannot find the file specified)
    at java.io.FileInputStream.open(Native Method) [rt.jar:1.6.0_33]
    at java.io.FileInputStream.<init>(FileInputStream.java:120) [rt.jar:1.6.0_33]
    at java.io.FileInputStream.<init>(FileInputStream.java:79) [rt.jar:1.6.0_33]
    at sun.net.www.protocol.file.FileURLConnection.connect(FileURLConnection.java:70) [rt.jar:1.6.0_33]
        at     sun.net.www.protocol.file.FileURLConnection.getInputStream(FileURLConnection.java:161) [rt.jar:1.6.0_33]
        at java.net.URL.openStream(URL.java:1010) [rt.jar:1.6.0_33]
    at org.jboss.ws.common.utils.AbstractWSDLFilePublisher.publishSchemaImports(AbstractWSDLFilePublisher.java:243)
    at org.jboss.ws.common.utils.AbstractWSDLFilePublisher.publishSchemaImports(AbstractWSDLFilePublisher.java:250)
    at org.jboss.ws.common.utils.AbstractWSDLFilePublisher.publishSchemaImports(AbstractWSDLFilePublisher.java:250)
    at org.jboss.wsf.stack.cxf.deployment.WSDLFilePublisher.publishWsdlFiles(WSDLFilePublisher.java:94)
    ... 14 more

15:56:09,343 INFO  [org.jboss.as.server] (DeploymentScanner-threads - 2) JBAS015870:     Deploy of deployment "testService-ws.war" was rolled back with failure
 message {"JBAS014671: Failed services" => {"jboss.deployment.unit.\"testService-ws.war\".INSTALL" => "org.jboss.msc.service.StartException in service jbos
s.deployment.unit.\"testService-ws.war\".INSTALL: Failed to process phase INSTALL of deployment \"testService-ws.war\""}}
15:56:09,413 INFO  [org.jboss.as.server.deployment] (MSC service thread 1-4) JBAS015877: Stopped deployment testService-ws.war in 70ms
15:56:09,414 INFO  [org.jboss.as.controller] (DeploymentScanner-threads - 2)     JBAS014774: Service status report
JBAS014777:   Services which failed to start:      service jboss.deployment.unit."testService-ws.war".INSTALL: org.jboss.msc.service.StartException in serv
ice jboss.deployment.unit."testService-ws.war".INSTALL: Failed to process phase INSTALL of deployment "testService-ws.war"

15:56:09,421 ERROR [org.jboss.as.server.deployment.scanner] (DeploymentScanner-threads - 1) {"JBAS014653: Composite operation failed and was rolled ba
ck. Steps that failed:" => {"Operation step-2" => {"JBAS014671: Failed services" => {"jboss.deployment.unit.\"testService-ws.war\".INSTALL" => "org.jboss.m
sc.service.StartException in service jboss.deployment.unit.\"testService-ws.war\".INSTALL: Failed to process phase INSTALL of deployment \"testService-ws.war\"" 
```

}}}}

从上面看，根本原因似乎是这样的：

```
Caused by: java.io.FileNotFoundException: JBOSS_HOME\standalone\data\wsdl\testService-ws.war\TestServiceIdentifier.xsd (The system cannot find the file specified) 
```

似乎它能够找到 WSDL，但找不到它使用的相应 xsd，它与 WSDL 文件位于同一目录中。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-19T16:51:08.197

根据这个[https://issues.jboss.org/browse/JBWS-3532](https://issues.jboss.org/browse/JBWS-3532)，这可能是由于 JBOSS_HOME 目录路径中的空间。根据上面链接中 Richard Opalka 的评论，看起来它也已在较新的版本中修复。

我下载了最新的 jboss nightly 并安装在 c:\jboss\ 中，问题消失了。

# sql - 一个复杂的sql查询建议

> ID：13937170
> 
> 赞同：0
> 
> 时间：2012-12-18T16:19:49.960
> 
> 标签：sql

我正在构建一个应用程序

我的 SQL 数据库中有一个 Student 表，它具有以下结构

```
(
Student_ID int,
FullName varchar(255),
FirstName varchar(255),
LastName varchar(255),
FatherName varchar(255),
Father_FirstName varchar(255),
Father_LastName varchar(255),
Date_of_Birth datetime,
Gender varchar(10),
Date_of_Registration datetime,
Regestration_Status varchar(10),
Degree_Status varchar(10),
Qualification varchar(15),
Campus varchar(15),
Batch int,
Degree varchar(10)
) 
```

此表中收集的数据来自 4 个不同的城市 卡拉奇、伊斯兰堡、白沙瓦、卡拉奇

从白沙瓦收集的学生数据没有设置 Gender 属性，因此在整个表中，来自白沙瓦的学生的 Gender 列不包含任何值。

我的主管要求我通过关联规则填写表格的这一部分，即大多数学生的名字在整个表格中非常相似，如果有一个特定的名字，比如“USMAN”，那么总共有 100 个像 USMAN 这样的名字表，无论他们来自哪个城市，如果 60 USMAN 行的性别为 MALE，那么补丁中白沙瓦为城市且学生姓名为 Usman 的任何行我应该将其性别设置为男性

我希望我已经明确了我的问题我正在尝试通过一些 sql 查询来完成这项工作，如果有人可以帮助我，我将非常感谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-18T16:35:31.477

这是设置性别列的一个好技巧。首先按名字总结：

```
select FirstName, count(*), sum(case when gender = 'M' then 1 else 0 end) as NumMales,
       avg(case when gender = 'M' then 1.0 else 0.0 end) as MalePercent,
       (case when avg(case when gender = 'M' then 1.0 else 0.0 end) > 0.5 then 'M'
             else 'F'
        end) as ImputedGender
from Students s
where gender is not null
group by FirstName 
```

接下来，您需要查看结果并设置截止值。具有特定名称的单个男学生或女学生不能令人信服地认为该名称指定了性别。因此，假设您需要至少 5 个示例和 80% 的性别：

```
select FirstName, count(*), sum(case when gender = 'M' then 1 else 0 end) as NumMales,
       avg(case when gender = 'M' then 1.0 else 0.0 end) as MalePercent,
       (case when avg(case when gender = 'M' then 1.0 else 0.0 end) > 0.5 then 'M'
             else 'F'
        end) as ImputedGender
from Students s
where gender is not null
group by FirstName
having count(*) >= 5 and
       avg(case when gender = 'M' then 1.0 else 0.0 end) not between 0.2 and 0.8 
```

下一步是将估算的性别分配给行。这可能取决于 SQL 的种类。这类似于：

```
update Students
    set gender = ImputedGender
    from (<the above query>) ig
    where ig.Firstname = Students.FirstName and
          Students.city <> 'Peshawar' and
          Students.gender is null 
```

# javascript - Youtube Javascript API - 播放率

> ID：13937172
> 
> 赞同：1
> 
> 时间：2012-12-18T16:19:56.423
> 
> 标签：javascript, youtube, youtube-api

我正在使用 Youtube Javascript API，我希望能够提高或降低播放速率。每次我调用 getAvailablePlaybackRates() 时，我只得到 [1] 。因此，当我尝试将播放速率设置为 2 时，它不起作用。我应该怎么做才能改变播放速率？

谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-18T19:05:36.650

[getAvailablePlaybackRates()](https://developers.google.com/youtube/iframe_api_reference#getAvailablePlaybackRates)的文档：

> 该函数返回一个从最慢到最快播放速度排序的数字数组。即使播放器不支持可变播放速度，数组也应始终包含至少一个值 (1)。

AS3 播放器不支持可变播放速度，并非所有的 HTML5 视频播放器都支持。所以我认为这就是你所看到的。

# java - Jglue（CDI 单元）是否仍然可用？

> ID：13937173
> 
> 赞同：0
> 
> 时间：2012-12-18T16:19:58.213
> 
> 标签：java, unit-testing, cdi, cdi-unit

在一些项目中，我使用 jglue 来测试 CDI 注入支持。

服务器“jglue.org”和 maven 存储库不再可访问。有谁知道会发生什么？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-13T22:48:32.753

我在 12 月遇到了一些托管问题。从那时起，我们将人工制品移至 Maven 中心。对停机时间感到抱歉。

# python - 如何从左上角开始将小部件添加到网格布局

> ID：13937176
> 
> 赞同：5
> 
> 时间：2012-12-18T16:20:10.183
> 
> 标签：python, layout, pyqt

我在 Qt Designer 中创建了一个 UI 并将其转换为 python：

![在此处输入图像描述](../Images/38a31415d9f1cf371d3e3e57c3b31c92.png)

在空白区域中，我添加了一个滚动区域和一个网格布局来对齐我的按钮。

每次我按下“CreatePose”按钮时，我都需要在网格布局中添加一个带有图标的按钮，从左上角开始。现在它将它添加到网格布局的中心。

```
self.ui.PoseBtn_GridLayout.setColumnMinimumWidth(4,4)
self.button = QtGui.QPushButton('')
self.button.setIcon(self._icon)
self.button.setIconSize(QtCore.QSize(128, 128))
self.button.setMinimumSize(QtCore.QSize(128, 128))
self.button.setMaximumSize(QtCore.QSize(128, 128))
self.ui.PoseBtn_GridLayout.addWidget(self.button) 
```

如何解决这个问题？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-19T13:56:39.960

看看用这个替换你发布的代码是否适合你：

```
self.ui.PoseBtn_GridLayout.setColumnMinimumWidth(4,4)

spacerItem = QtGui.QSpacerItem(40, 20, QtGui.QSizePolicy.Expanding, QtGui.QSizePolicy.Minimum)
self.ui.PoseBtn_GridLayout.addItem(spacerItem, 1, 1, 1, 1)

spacerItem1 = QtGui.QSpacerItem(20, 40, QtGui.QSizePolicy.Minimum, QtGui.QSizePolicy.Expanding)
self.ui.PoseBtn_GridLayout.addItem(spacerItem1, 1, 0, 1, 1)

self.button = QtGui.QPushButton('')
self.button.setIcon(self._icon)
self.button.setIconSize(QtCore.QSize(128, 128))
self.button.setMinimumSize(QtCore.QSize(128, 128))
self.button.setMaximumSize(QtCore.QSize(128, 128))
self.ui.PoseBtn_GridLayout.addWidget(self.button, 0, 0, 1, 1) 
```

*编辑*

这就是你应该如何显示你的小部件以获得预期的结果，检查*Object Inspector*，基本上你需要一个`QWidget`带有网格布局的另一个`QWidget`网格布局和 2 `QSpaceItem`：

![Qt 设计器截图](../Images/dc0aa8a3dba23addcdd9e6c3a694ec0c.png)

# php - 根据当前页面突出显示菜单项

> ID：13937177
> 
> 赞同：0
> 
> 时间：2012-12-18T16:20:10.993
> 
> 标签：php, wordpress

我试图突出显示一个菜单项，具体取决于它是否在当前页面上。下面的代码当前突出显示每个菜单项，因为它位于 foreach 循环中。如果分类术语位于某个页面 id 上并且只有该术语（不是每个术语），我如何突出显示它？

```
 <?php $args = array( 'taxonomy' => 'blog' );
                        $terms = get_terms('blog', $args);

                        $count = count($terms); $i=0;
                        if ($count > 0) {
                            $cape_list = '<p class="my_term-archive">';
                            echo $postid;
                            foreach ($terms as $term) {
                                $i++;
                                $absolute = get_bloginfo('url');
                                $postid = get_the_ID();
                                if($postid == "561") {
                                    $term_list .= '<a class="menu-active" style="padding-left:30px;width:88%!IMPORTANT;" href="' . $absolute . '/blog/' . $term->slug . '" title="' . sprintf(__('View all post filed under %s', 'my_localization_domain'), $term->name) . '">' . $term->name . '</a>';
                                } else {
                                    $term_list .= '<a style="padding-left:30px;width:88%!IMPORTANT;" href="' . $absolute . '/blog/' . $term->slug . '" title="' . sprintf(__('View all post filed under %s', 'my_localization_domain'), $term->name) . '">' . $term->name . '</a>';
                                } } ?>

                            <?php echo $term_list; } ?> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-18T16:57:49.583

您将必须查询属于当前页面的分类术语并在 foreach 循环中比较它们的 id-s。

该`get_the_ID()`函数返回当前帖子的 id，而不是当前分类。

这是一个与 wordpress 相关的问题的链接，它显示了如何查询当前的分类术语：

[https://wordpress.stackexchange.com/questions/20431/how-to-get-taxonomy-term-of-the-current-page-and-populate-queries-in-the-templat](https://wordpress.stackexchange.com/questions/20431/how-to-get-taxonomy-term-of-the-current-page-and-populate-queries-in-the-templat)

# unix - BASH sh 脚本

> ID：13937183
> 
> 赞同：0
> 
> 时间：2012-12-18T16:20:28.773
> 
> 标签：unix, unixodbc

我想启动 BASH shell 脚本，但我的计算机在 Windows 7（64 位）上运行。有没有一种无需更改操作系统即可下载 UNIX 的方法。我该如何去下载 UNIX。谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-18T16:24:05.453

你试过[CygWin](http://www.cygwin.com/)吗？这是

> 一组为 Windows 提供 Linux 外观和感觉环境的工具。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-18T16:24:15.433

[Cygwin](http://www.cygwin.com/)是一组工具，可为 Windows 提供 Linux 外观和感觉环境，并且是最接近 Windows 上的 Unix 环境的工具。

您可能对[VirtualBox](https://www.virtualbox.org/)等软件感兴趣，它允许您在主机操作系统内运行虚拟环境或查看实时 CD/USB。

第三种选择是双启动操作系统，多个操作系统可以安装在您的硬盘驱动器上，您可以选择启动哪个操作系统。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-18T16:23:34.600

试试[MinGW](http://www.mingw.org/)。它是一个适用于 Windows 的极简 GNU 实现。它有自己的工具、构建系统等存储库。

# ejb-3.0 - ejb poller 总是每 30 秒触发一次

> ID：13937193
> 
> 赞同：1
> 
> 时间：2012-12-18T16:20:40.427
> 
> 标签：ejb-3.0, weblogic-10.x

我创建了 EJB 3 Timer 并将其部署到 weblogic 集群中。createTimer 参数为 createTimer(1000, 20000, null); 这应该每 20 秒创建一次重复计时器。但是计时器总是每 30 秒创建一次。我什至将 intervalDuration 更改为 40 和 50 秒，但超时方法总是每 30 秒触发一次。

以下是 WEBLOGIC_TIMERS 表中的条目 1@@OSBNode2_1355845459844 (BLOB) 1355846770914 1000 TimerearTimerTest.jarTimerTest OSBDomain OSBCluster

Below are the entry from ACTIVE table timer.1@@OSBNode2_1355843156331 -96726833478167425/OSBNode2 OSBDomain OSBCluster 18-DEC-12 service.TimerMaster 8866906753834651127/OSBNode1 OSBDomain OSBCluster 18-DEC-12 service.SINGLETON_MASTER 8866906753834651127/OSBNode1 OSBDomain OSBCluster 18-DEC-12

谁能帮我调查为什么计时器总是每 30 秒触发一次而不是我的 intervalDuration 值？

下面是 EJB ----->>

```
 package com.timertest;
import java.util.*;
import javax.annotation.Resource;
import javax.ejb.*;

@Stateless(mappedName = "TimerTest")
public class TimerTest implements TimerTestRemote
{
    @Resource
    private SessionContext ctx;

  @Override
  public void createMyTimer()
    throws EJBException
  {
        ctx.getTimerService().createTimer(1000, 20000, null);
  }

    @Timeout
    public void timeout(Timer timer) 
    {
        System.out.println("-> Timed Out ..."+ new Date());

    }
}

Below is the and weblogic descripor-------->>
    <?xml version="1.0" encoding="UTF-8"?>
<wls:weblogic-ejb-jar
    xmlns:wls="http://xmlns.oracle.com/weblogic/weblogic-ejb-jar"
    xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
    xsi:schemaLocation="http://java.sun.com/xml/ns/javaee http://java.sun.com/xml/ns/javaee/ejb-jar_3_0.xsd http://xmlns.oracle.com/weblogic/weblogic-ejb-jar http://xmlns.oracle.com/weblogic/weblogic-ejb-jar/1.2/weblogic-ejb-jar.xsd">
    <wls:weblogic-enterprise-bean>
        <wls:ejb-name>TimerTest</wls:ejb-name>
        <wls:stateless-session-descriptor>

            <wls:stateless-clustering>
                <wls:home-is-clusterable>true</wls:home-is-clusterable>
                <wls:home-load-algorithm>round-robin</wls:home-load-algorithm>
                <wls:stateless-bean-is-clusterable>true</wls:stateless-bean-is-clusterable>
                <wls:stateless-bean-load-algorithm>round-robin
                </wls:stateless-bean-load-algorithm>
            </wls:stateless-clustering>
            <wls:business-interface-jndi-name-map>
                <wls:business-remote>TimerTestRemote</wls:business-remote>
                <wls:jndi-name>TimerTest</wls:jndi-name>
            </wls:business-interface-jndi-name-map>
        </wls:stateless-session-descriptor>
        <wls:enable-call-by-reference>false</wls:enable-call-by-reference>
        <wls:jndi-name>TimerTest</wls:jndi-name>
    </wls:weblogic-enterprise-bean>
    <wls:timer-implementation>Clustered</wls:timer-implementation>
</wls:weblogic-ejb-jar> 
```

提前致谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-21T18:43:15.017

**您可以使用不同的样式（注释）。见下文：**

```
 @Schedule(hour = "*", minute = "*",second = "*/40")
    @TransactionAttribute(TransactionAttributeType.REQUIRES_NEW)
    @Lock(LockType.WRITE)
    @AccessTimeout(1000 * 60 * 60)//1 Hour...//Concurrent Access is not permitted... 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-19T10:30:33.510

这可能不是直接的答案，但可能有助于避免这种情况。

* * *

默认情况下，计时器是持久的，因此您必须在启动新计时器之前取消以前的计时器。

此外，您可以`info`在创建计时器对象时提供而不是传递`null`, 可能是字符串标识符。稍后它将有助于识别哪个计时器已超时或在系统中有多个计时器的情况下取消它。

创建计时器并多次重新启动应用程序，有几个这样的计时器具有相同`info`的 ，但具有不同的`hashCode`。因此它们不会重叠并且每次都会创建新的。

`ctx.getTimerService().getTimers()`您可以通过迭代来获取计时器并取消它们。

**编辑：**我已经复制了场景并遇到了类似的问题。我已经调试过，当有多个先前的计时器在同一时间间隔内处于活动状态时，就会发生这种情况，而这些计时器没有被取消。

你试试下面的代码，我试过了，它解决了这个问题。

```
for(Timer t : timerService.getTimers())
    t.cancel();  //-- Cancel timers before creatimng new one
ctx.getTimerService().createTimer(1000, 20000, null); 
```

文档摘录：

> intervalDuration - 如果过期被延迟（例如，由于 bean 上的其他方法调用的交错），两个或多个过期通知可能会连续发生以“赶上”。

# c# - 具有可为空元素的 ConfigurationSection

> ID：13937198
> 
> 赞同：0
> 
> 时间：2012-12-18T16:20:51.680
> 
> 标签：c#, app-config

我正在自定义我自己的配置部分。我想知道是否可以为配置文件中不存在的元素返回 null 。例如，考虑：

```
<myConfig><myElement/></myConfig> 
```

这建立在：

```
public class MyConfig : ConfigurationSection
{
   [ConfigurationProperty ("myElement")]
   public MyElement MyElement { get { return (MyElement) this["myElement"]; } }
} 
```

`MyElement`即使`<myElement/>`不存在，这也会返回一个实例。

我该如何克服呢？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-18T16:31:33.903

好吧，我意识到有一个`MyElement.ElementInformation.IsPresent`属性。

# python - 喜欢一个正在运行的 python 进程？

> ID：13937199
> 
> 赞同：14
> 
> 时间：2012-12-18T16:20:53.750
> 
> 标签：python, nice

当我的运行时间较长的程序启动时，我想降低它的优先级，这样它就不会消耗它运行的机器上的所有可用资源。环境使程序有必要限制自己。

有没有我可以使用的类似 python 的命令，这样程序就不会利用它正在运行的计算机的全部容量？

* * *

## 回答 #1

> 赞同：25
> 
> 时间：2012-12-18T16:24:13.913

您始终可以使用`nice pythonscript`,

但是如果你想在脚本中设置 nice-level，你可以这样做：

```
import os
os.nice(20) 
```

脚本运行的时间越长，您可以逐步增加 nice 级别，因此随着时间的推移，它使用的资源越来越少，这很简单，只需将其集成到脚本中即可。

或者，从脚本外部，一旦它运行，您应该能够使用`renice -p <pid>`

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2012-12-18T16:26:58.923

psutil 似乎是为 python 设置进程优先级的跨平台解决方案。

[https://github.com/giampaolo/psutil](https://github.com/giampaolo/psutil)

Windows 特定解决方案：[http ://code.activestate.com/recipes/496767/](http://code.activestate.com/recipes/496767/)

```
def setpriority(pid=None,priority=1):
""" Set The Priority of a Windows Process.  Priority is a value between 0-5 where
    2 is normal priority.  Default sets the priority of the current
    python process but can take any valid process ID. """

import win32api,win32process,win32con

priorityclasses = [win32process.IDLE_PRIORITY_CLASS,
                   win32process.BELOW_NORMAL_PRIORITY_CLASS,
                   win32process.NORMAL_PRIORITY_CLASS,
                   win32process.ABOVE_NORMAL_PRIORITY_CLASS,
                   win32process.HIGH_PRIORITY_CLASS,
                   win32process.REALTIME_PRIORITY_CLASS]
if pid == None:
    pid = win32api.GetCurrentProcessId()
handle = win32api.OpenProcess(win32con.PROCESS_ALL_ACCESS, True, pid)
win32process.SetPriorityClass(handle, priorityclasses[priority]) 
```

# ios - ios 6上的iOS UIImagePickerController奇怪崩溃

> ID：13937200
> 
> 赞同：1
> 
> 时间：2012-12-18T16:21:10.780
> 
> 标签：ios, uiimagepickercontroller

在我的应用程序中，我试图使用相机制作一张照片，但它总是无缘无故地崩溃。

我现在处理这个问题很长时间了，所以我提供了看起来不必要的代码：在视图控制器中：

```
- (id) init
{
    if([[UIDevice currentDevice] userInterfaceIdiom] == UIUserInterfaceIdiomPhone)
    {
        self = [super initWithNibName:@"WCAddNewWatchViewController_iPhone" bundle:[NSBundle mainBundle]];
    }else
    {
        self = [super initWithNibName:@"WCAddNewWatchViewController_iPad" bundle:[NSBundle mainBundle]];
    }

    if(self)
    {

    }

    return self;
}
- (void)viewDidLoad
{
    [super viewDidLoad];
    // Do any additional setup after loading the view from its nib.

    [[self navigationItem]setRightBarButtonItem:self.AddButton];
}

- (void)didReceiveMemoryWarning
{
    [super didReceiveMemoryWarning];
    // Dispose of any resources that can be recreated.
}

- (IBAction)ChangeImageButtonTapped:(id)sender {
    UIImagePickerController* picker = [[UIImagePickerController alloc] init];

    if ([UIImagePickerController isSourceTypeAvailable:UIImagePickerControllerSourceTypeCamera])
    {
        picker.sourceType = UIImagePickerControllerSourceTypeCamera;
    }
    else
    {
        picker.sourceType = UIImagePickerControllerSourceTypePhotoLibrary;
    }

    picker.mediaTypes = @[(NSString *) kUTTypeImage];
    picker.allowsEditing = NO;
    [picker setDelegate:self];

    [self presentViewController:picker animated:YES completion:nil];

}

#pragma mark UIImagePickerControllerDelegate

- (void)imagePickerController:(UIImagePickerController *)picker didFinishPickingMediaWithInfo:(NSDictionary *)info {

    NSString *mediaType = info[UIImagePickerControllerMediaType];

    [self dismissViewControllerAnimated:YES completion:nil];

    if ([mediaType isEqualToString:(NSString *)kUTTypeImage]) {
        UIImage *image = info[UIImagePickerControllerOriginalImage];
        selectedImage = image;
     //   self.watchImageView.image = selectedImage;

    }

    NSLog(@"no crash!!!!"); //that's a lie...
} 
```

没有崩溃消息，日志写道应用程序收到内存警告，然后崩溃。设备日志说：

> TIL 内存不足的杀手在 iOS 上被称为“jetsam”

谁能看看我的代码并告诉我我做错了什么？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-18T17:13:55.700

你被看门狗进程杀死了，因为你没有处理内存警告（ios 有进程监控内存使用和应用程序启动时间，并杀死看起来流氓的应用程序'）

顺便说一句：TIL = 今天我学到了：D

使用按比例缩小的图像进行显示。

```
- (UIImage *)scaledCopyOfSize:(CGSize)newSize {
    CGImageRef imgRef = self.CGImage;

    CGFloat width = CGImageGetWidth(imgRef);
    CGFloat height = CGImageGetHeight(imgRef);

    CGAffineTransform transform = CGAffineTransformIdentity;
    CGRect bounds = CGRectMake(0, 0, width, height);
    if (width > newSize.width || height > newSize.height) {
        CGFloat ratio = width/height;
        if (ratio > 1) {
            bounds.size.width = newSize.width;
            bounds.size.height = bounds.size.width / ratio;
        }
        else {
            bounds.size.height = newSize.height;
            bounds.size.width = bounds.size.height * ratio;
        }
    }

    CGFloat scaleRatio = bounds.size.width / width;
    CGSize imageSize = CGSizeMake(CGImageGetWidth(imgRef), CGImageGetHeight(imgRef));
    CGFloat boundHeight;
    UIImageOrientation orient = self.imageOrientation;
    switch(orient) {

        case UIImageOrientationUp: //EXIF = 1
            transform = CGAffineTransformIdentity;
            break;

        case UIImageOrientationUpMirrored: //EXIF = 2
            transform = CGAffineTransformMakeTranslation(imageSize.width, 0.0);
            transform = CGAffineTransformScale(transform, -1.0, 1.0);
            break;

        case UIImageOrientationDown: //EXIF = 3
            transform = CGAffineTransformMakeTranslation(imageSize.width, imageSize.height);
            transform = CGAffineTransformRotate(transform, M_PI);
            break;

        case UIImageOrientationDownMirrored: //EXIF = 4
            transform = CGAffineTransformMakeTranslation(0.0, imageSize.height);
            transform = CGAffineTransformScale(transform, 1.0, -1.0);
            break;

        case UIImageOrientationLeftMirrored: //EXIF = 5
            boundHeight = bounds.size.height;
            bounds.size.height = bounds.size.width;
            bounds.size.width = boundHeight;
            transform = CGAffineTransformMakeTranslation(imageSize.height, imageSize.width);
            transform = CGAffineTransformScale(transform, -1.0, 1.0);
            transform = CGAffineTransformRotate(transform, 3.0 * M_PI / 2.0);
            break;

        case UIImageOrientationLeft: //EXIF = 6
            boundHeight = bounds.size.height;
            bounds.size.height = bounds.size.width;
            bounds.size.width = boundHeight;
            transform = CGAffineTransformMakeTranslation(0.0, imageSize.width);
            transform = CGAffineTransformRotate(transform, 3.0 * M_PI / 2.0);
            break;

        case UIImageOrientationRightMirrored: //EXIF = 7
            boundHeight = bounds.size.height;
            bounds.size.height = bounds.size.width;
            bounds.size.width = boundHeight;
            transform = CGAffineTransformMakeScale(-1.0, 1.0);
            transform = CGAffineTransformRotate(transform, M_PI / 2.0);
            break;

        case UIImageOrientationRight: //EXIF = 8
            boundHeight = bounds.size.height;
            bounds.size.height = bounds.size.width;
            bounds.size.width = boundHeight;
            transform = CGAffineTransformMakeTranslation(imageSize.height, 0.0);
            transform = CGAffineTransformRotate(transform, M_PI / 2.0);
            break;

        default:
            [NSException raise:NSInternalInconsistencyException format:@"Invalid image orientation"];

    }

    if (UIGraphicsBeginImageContextWithOptions) {
        UIGraphicsBeginImageContextWithOptions(bounds.size, NO,
                                               /* 0.0f will scale to 1.0/2.0 depending on if the
                                                device has a high-resolution screen */
                                               0.0f);
    } else {
        UIGraphicsBeginImageContext(bounds.size);
    }

    CGContextRef context = UIGraphicsGetCurrentContext();

    if (orient == UIImageOrientationRight || orient == UIImageOrientationLeft) {
        CGContextScaleCTM(context, -scaleRatio, scaleRatio);
        CGContextTranslateCTM(context, -height, 0);
    }
    else {
        CGContextScaleCTM(context, scaleRatio, -scaleRatio);
        CGContextTranslateCTM(context, 0, -height);
    }

    CGContextConcatCTM(context, transform);

    CGContextDrawImage(context, CGRectMake(0, 0, width, height), imgRef);
    UIImage *imageCopy = UIGraphicsGetImageFromCurrentImageContext();
    UIGraphicsEndImageContext();

    return imageCopy;
} 
```

# python - 检查构造函数参数有效性的pythonic方法是什么？

> ID：13937203
> 
> 赞同：1
> 
> 时间：2012-12-18T16:21:27.497
> 
> 标签：python, types, error-handling, type-safety

例如，以一个代表一个人的简单类为例。唯一的类属性是表示人员姓名的字符串。我想确保没有人试图向构造函数传递一些其他类型的对象，例如 int 或 list...等。这是我在下面的第一次尝试，我认为如果参数不是 str，这将返回 None 类型的 obj，但它似乎仍然返回 Person obj。我来自一个“更多”的强类型语言背景，我对如何在 python 中处理我自己感到有点困惑。pythonic 风格对这种情况和更一般的类型安全有什么看法？我应该提出例外吗？还是想办法返回None？或者完全是别的东西。

```
class Person: 

    name = None

    def __init__(self, name):
        if not isinstance(name, str):
            return None
        self.name = name 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-12-18T16:23:18.483

就是这样 - 没有使用某种形式的装饰器，但一般来说，类型检查不是非常 Pythonic，虽然在某些情况下有效，但您的代码应该是：

```
def __init__(self, name):
    if not isinstance(name, basestring):
        raise TypeError('name must be str/unicode')
    # ... 
```

请注意，它`basestring`是 Python 2.x 的父级`str`和`unicode`在 Python 2.x 中，所以这将允许两者 - 要么使用`str`（就像你现在在 2.x 中一样）不允许使用 unicode（反之亦然 - 出于任何特定原因）。在 3.x 中，`basestring`不存在，您只有`str`.

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-12-18T16:23:18.637

您想在`__init__`方法中引发错误：

```
if not isinstance(name,basestring):
    raise TypeError("I don't think that is a name ...") 
```

*请注意，这`basestring`也包括`unicode`在 python2.x 中，但在 python3.x 中不可用。

`person`不过要小心，这里没有什么可以阻止用户在构建后将人名重新设置为列表。

```
jack = Person("Jack")
jack.name = ["cheese","steak"]  #??? 
```

如果你想内置这种安全性，你需要开始学习[`property`](http://docs.python.org/2/library/functions.html#property).

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-18T16:23:21.807

我不会回到`None`这里，而是用 raise 和 exception 来表示不正确的对象类型。

# vb.net - VBS自动优化

> ID：13937204
> 
> 赞同：2
> 
> 时间：2012-12-18T16:21:31.193
> 
> 标签：vb.net, performance, vba, optimization

我正在运行一个非常简单的 VB 程序来解决 Project Euler[问题 2](https://projecteuler.net/problem=2)，我想计算性能。我的做法是：

```
StartTime = Timer()
Set streamer = CreateObject("Scripting.FileSystemObject")
Set writingWriter = streamer.GetStandardStream(1)
Dim n, nIterations, Temp1, Temp2, Collector
n = 4000000
nIterations = 0
Temp1 = 0
Collector = 0
Temp2 = 1

Do
    Fib = Temp1 + Temp2
    Temp2 = Temp1
    Temp1 = Fib
    Select Case Fib Mod 2
        Case 0
            Collector = Collector + Fib
    End Select
Loop Until Fib > n
EndTime = Timer()
writingWriter.WriteLine("Solution is: " & Collector)
writingWriter.WriteLine("Code took " & EndTime - StartTime & " to execute") 
```

我第一次运行代码时得到以下输出（我的输入也包括在内）：

```
C:\Dev\cscript program.vbs
Microsoft (R) Windows Script Host Version 5.7
Copyright (C) Microsoft Corporation. All rights reserved.

Solution is: 4613732
Code took 0.015625 to execute 
```

每次后续执行（不改变任何东西）都会给我以下信息：

```
C:\Dev\cscript program.vbs
Microsoft (R) Windows Script Host Version 5.7
Copyright (C) Microsoft Corporation. All rights reserved.

Solution is: 4613732
Code took 0 to execute 
```

有人可以解释这里发生了什么吗？似乎 Windows 控制台已经存储了 Fib 的值，并且只是在执行代码时调用它。一位运行类似程序的朋友（尽管他使用 VBA）得到了相同的结果——他随后的每次执行都经历了运行时间的减少。

请注意：我知道这是一种非常简单的方法，我只是想了解一下 VB。到目前为止还不是一个超级粉丝。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-18T16:44:26.733

问题不在于Fib。虽然您没有声明它，但它会在计算中使用它时立即使用默认值。一旦你的脚本结束，它就会超出范围。您的程序的主要瓶颈区域是：

```
Set streamer = CreateObject("Scripting.FileSystemObject")
Set writingWriter = streamer.GetStandardStream(1) 
```

一旦它第一次运行，它就能够在不久之后更快地执行相同的操作，这可能是由于缓存在 RAM 中的数据。

您在 Do 循环中进行的实际计算发生得如此之快，以至于您的计时器不够精确，无法区分时间。您可能会找到有关此问题的一些信息：[什么可以导致程序第二次运行得更快？](https://stackoverflow.com/q/7561362/1316573)有趣的。如果你在谷歌上搜索“程序第二次运行速度更快”之类的内容，你会看到很多响应表明缓存是罪魁祸首。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-18T16:29:22.807

你是在自问自答：

> 似乎 Windows 控制台已经存储了 Fib 的值，并且只是在执行代码时调用它。

如果您在`Fib`退出之前没有清除并且您让控制台保持打开状态，那么它仍然在临时内存中的某个位置。

解决方法是：

```
StartTime = Timer()
Set streamer = CreateObject("Scripting.FileSystemObject")
Set writingWriter = streamer.GetStandardStream(1)
Dim n, nIterations, Temp1, Temp2, Collector
n = 4000000
nIterations = 0
Temp1 = 0
Collector = 0
Temp2 = 1

Do
    Fib = Temp1 + Temp2
    Temp2 = Temp1
    Temp1 = Fib
    Select Case Fib Mod 2
        Case 0
            Collector = Collector + Fib
    End Select
Loop Until Fib > n
EndTime = Timer()
writingWriter.WriteLine("Solution is: " & Collector)
writingWriter.WriteLine("Code took " & EndTime - StartTime & " to execute")
streamer = NULL
writingWriter = NULL
Fib = 0 
```

# sql - 无重复的多列联合查询

> ID：13937209
> 
> 赞同：3
> 
> 时间：2012-12-18T16:21:46.967
> 
> 标签：sql, oracle, union

我正在尝试`Union Query`使用来自两个不同 talbes 的多个列（duh）编写一个，但由于某种原因，第二个语句的第二列`Select`没有显示在输出中。我不知道这是否正确地绘制了图片，但这是我的代码：

```
Select empno, job
From EMP
Where job = 'MANAGER'
Union
  Select empno, empstate
  From EMPADDRESS
  Where empstate = 'NY'
  Order By empno 
```

输出如下所示：

```
EMPNO   JOB
4600    NY
5300    MANAGER
5300    NY
7566    MANAGER
7698    MANAGER
7782    MANAGER
7782    NY
7934    NY
9873    NY 
```

而不是 5300 和 7782 出现两次，我认为`empstate`会出现在输出旁边`job`。对于所有其他`empno`的，我认为字段中的值是`(null)`。我是不是理解不`Unions`正确，还是他们应该这样工作？

感谢您提前提供任何帮助。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-18T16:24:54.197

如果您希望将数据放在单独的列中，您将需要 a `JOIN`not a `UNION`：

```
Select e.empno, e.job, a.empstate
From EMP e
left join EMPADDRESS a
    on e.empno = a.empno
Where job = 'MANAGER'
    AND empstate = 'NY'
Order By e.empno 
```

A`UNION`将两个结果合并为一个集合，但数据列在同一列中。所以基本上它们是相互重叠的：

```
select col1, col2, 'table1' as src
from table1
union all
select col1, col2, 'table2' as src
from table2 
```

将导致：

```
col1 | col2 | src
t1   | t1   | table1
t2   | t2   | table2 
```

如果您想将数据放在一个单独的列中，这听起来像您所做的那样，那么您将使用表的连接。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-18T17:10:16.950

蓝脚有正确的答案。

将连接视为水平组合表 - 您正在使用您连接的每个表向原始查询添加更多列。

将联合视为垂直堆叠记录集 - 您正在向同一列集添加额外的行。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-18T16:25:34.880

你需要一个加入这个..

```
Select e.empno, e.job, ea.empstate
From EMP e LEFT OUTER JOIN EMPADDRESS ea ON e.empno = ea.empno
Where e.job = 'MANAGER'
And ea.empstate = 'NY'
Order By e.empno 
```

UNION 用于获取具有相同列名的 2 个结果集并将它们合并为一个。在您的示例中，它将第 2 列（作业和 empstate）集中在一起，并从第一个选择中获取名称。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-12-18T16:28:38.507

我想你的意思是写是作为一个连接而不是？

即，如果您希望那些不在纽约的员工的 empstate 为空。

```
select empno, job, empstate
from emp e
     left outer join empaddress a
                  on a.empno = e.empno
                 and e.empstate = 'NY'
where e.job = 'MANAGER'; 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-12-18T17:02:22.280

这个在 oracle 中工作 ..通过使用 union ..here 内部查询将取出与 empno 分组之后的所有列，其余列是字符串连接的

```
 select EMPNO
        ,wm_concat(job) job
        ,wm_concat(EMPSTATE) EMPSTATE 
  from 
  ( select EMPNO,job,'' as EMPSTATE  from EMP Where job ='MANAGER'
    union  select EMPNO,'' as job, EMPSTATE from EMPADDRESS Where empstate ='NY'
  )
 group by EMPNO order by 1 
```

# sql - 确定数据库中出现在某个日期之前但不在该日期之后的值

> ID：13937212
> 
> 赞同：0
> 
> 时间：2012-12-18T16:21:52.677
> 
> 标签：sql, tsql

我需要确定数据库表中的某个字段值是否出现在某个日期之前，而不是该日期之后。

我可以通过简单的选择来确定截止日期之前出现的值，但在该日期之后可能会有记录。

我使用的字段值是“输入日期”和我正在寻找的值（在本例中为运营商代码）。

谢谢你的帮助！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-18T16:33:36.793

这是我在不看数据结构的情况下能做的最好的事情。

```
SELECT *
FROM BillTBL a
INNER JOIN carriertbl b ON a.carrier_key = b.carrier_key
WHERE a.billentereddate < '2009-09-01'
AND NOT EXISTS (SELECT 1 
                FROM BillTBL 
                WHERE whatever_the_key_is = a.whatever_the_key_is
                AND billentereddate > '2009-09-01') 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-18T16:33:48.443

```
select a.carriercode
    from carriertbl as a
        inner join BillTBL as b ON b.carrier_key = a.carrier_key and b.enteredate < '2009-09-01' 
```

也许你必须调整一些列名......

# c# - 通过 ASP.NET 站点上的文本框插入数据时如何增加 MS SQL 数据库中的 ID

> ID：13937217
> 
> 赞同：-3
> 
> 时间：2012-12-18T16:22:07.513
> 
> 标签：c#, asp.net, sql-server

> **可能重复：**
> [SQL 表中的自动递增主键](https://stackoverflow.com/questions/3359170/auto-increment-primary-key-in-sql-tables)

我有一个关于如何自动增加并在我的 MS SQL 数据库中输入 ID 的问题，当我通过我的 ASP.NET 网站上的文本框插入数据时，我会尝试这个指南..

[http://mrbool.com/inserting-data-into-sql-server-database-using-csharp-and-asp-net/25091](http://mrbool.com/inserting-data-into-sql-server-database-using-csharp-and-asp-net/25091)

但是正如你所看到的，用户需要写一个 ID，但这不是我想要的。你能帮帮我吗？:)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-18T16:24:46.403

您需要使 id 列类型为 int 并设置该字段的自动增量属性。这是一个类似[的帖子](https://stackoverflow.com/questions/3359170/auto-increment-primary-key-in-sql-tables)。

# c++ - 使用 for_each 或 transform 访问地图的第二个元素

> ID：13937218
> 
> 赞同：1
> 
> 时间：2012-12-18T16:22:15.327
> 
> 标签：c++, map, foreach, copy, deque

我想问你我怎么能复制所有的第二个元素

```
map<string, string> myMap 
```

至

```
deque<string> myDeq 
```

在不创建仿函数的情况下使用 for_each 或 transform。我在[这个问题中尝试过](https://stackoverflow.com/questions/2850312/use-of-for-each-on-map-elements)

```
transform(myMap.begin(), myMap.end(), back_inserter(myDeq), mem_fun_ref(&map<string, string>::value_type::second)); 
```

但它对我不起作用 - 我收到错误“非法使用这种类型”。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-18T17:36:33.010

您收到错误的原因`map<string, string>::value_type::second`是不是成员函数。它只是 std::pair 模板结构的成员变量。

一种不使用仿函数的可能解决方案是使用 lambda。但这是一个 C++11 特性，所以我不知道这是否是你想要的。

看看下面的例子

```
#include <iostream>
#include <map>
#include <deque>
#include <algorithm>
#include <string>
#include <iterator>

using namespace std;

int main()
{
    map<string,string> myMap;
    deque<string> myDeque;

    myMap["key1"]="value1";
    myMap["key2"]="value2";
    transform(myMap.begin(),myMap.end(),back_inserter(myDeque),[](map<string,string>::value_type p){return p.second;});

    copy(myDeque.begin(),myDeque.end(),ostream_iterator<string>(cout,"\n"));
} 
```

# javascript - 如何在运行时将 ItemView 实例附加到 Backbone.marionette.Composite View

> ID：13937225
> 
> 赞同：0
> 
> 时间：2012-12-18T16:22:50.403
> 
> 标签：javascript, backbone.js, marionette, backbone-views

我正在尝试在表格中添加不同的视图 {Tabular View or Chart View}。每个都可以有自己的数据。我为此使用 Backbone Marionette 并具有以下代码行。但是项目视图不呈现。

html

```
<script id="grid-template" type="text/template">
 <div>
     Data is displayed using Tabular View and Chart View !

    </div>
</script>

<script id="TabularViewTemplate" type="text/template">

    <table><tr><td>Value1</td><td>Value2</td></tr>         </table>

</script>

<script id="ChartTemplate" type="text/template">

    <table><tr><td>Value1</td><td>Value2</td></tr>         </table>

</script>

<div id="grid">
</div>
​ 
```

JS

```
var ANBaseModel= Backbone.Model.extend({

    name:"",
    type:""
});

  var SSANModel= ANBaseModel.extend({
      type:"SS"
});  

var BaseView=Backbone.Marionette.ItemView.extend({
template: "#row-template",
    tagName: "tr"  ,
    model:SSANModel

});
// A Spreadsheet View
var SSView= BaseView.extend({

    render: function(){
    alert(this.model.type);
    if(this.model.type=="SS")
    alert("Spreadsheet");
        else if(this.model.type=="ChartAN")
                alert("Chart");

    }  

});

// A Chart View
var ChartView = BaseView.extend({

    render: function(){
    alert(this.model.type);
    if(this.model.type=="SS")
    alert("Spreadsheet");
        else if(this.model.type=="ChartAN")
                alert("Chart");

    }  

});

// The grid view
var GridView = Backbone.Marionette.CompositeView.extend({
    tagName: "table",
    template: "#grid-template",

});

var SS= new SSANModel();
alert(SS.type);
var objSSView=new SSView ({model:SS,template:"TabularViewTemplate"});

var gridView = new GridView({

    itemView: objSSView
});

gridView.render();

console.log(gridView.el);
$("#grid").html(gridView.el); 
```

JsFiddle：http: [//jsfiddle.net/Irfanmunir/ABdFj/](http://jsfiddle.net/Irfanmunir/ABdFj/)

我如何将 ItemView 实例附加到复合视图。使用它我可以创建具有自己数据的不同视图。我没有将集合用于复合视图。

问候，

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-18T18:15:53.217

好吧，您应该使用模型创建一个集合，并在创建 gridView 时将其作为参数传递：

```
var gridView = new GridView({
    collection: SSCollection,
    itemView: objSSView
}); 
```

集合的每个模型都将是您定义的 itemView 的新实例。

您还需要告诉 CompositeView 将 itemViews 放在哪里：

```
appendHtml: function(collectionView, itemView, index){
      collectionView.$("tbody").append(itemView.el);
}, 
```

您也可以尝试使用 buildItemView 方法：

```
buildItemView: function(item, ItemViewType, itemViewOptions){
    var options = _.extend({model: item}, itemViewOptions);

    switch(item.type){
        case 'ss':
            ItemViewType = SSView;
        case 'another':
            ItemViewType = AnotherView;
    }
    var view = new ItemViewType(options);
    return view;
}, 
```

# python - 在 Mac OS X 上，easy_install fabric 和/或 easy_install pycrypto 由于链接器错误“非法文本重定位”而失败

> ID：13937228
> 
> 赞同：3
> 
> 时间：2012-12-18T16:23:03.453
> 
> 标签：python, macos, fabric, pycrypto

在尝试`easy_install`[`fabric`](http://docs.fabfile.org/en/1.5/)（或`easy_install`[`pycrypto`](https://www.dlitz.net/software/pycrypto/)依赖于哪个结构）时，我在 Mac OS X 上收到以下链接器错误：

```
ld: illegal text-relocation to ___gmp_binvert_limb_table in /usr/local/lib/libgmp.a(mp_minv_tab.o) from ___gmpn_divexact_1 in /usr/local/lib/libgmp.a(dive_1.o) for architecture x86_64
clang: error: linker command failed with exit code 1 (use -v to see invocation)
error: Setup script exited with error: command 'clang' failed with exit status 1 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-18T16:23:03.453

我使用的是 python 的自定义安装，这显然与我的标准安装[libGMP](http://gmplib.org/)不兼容。从源代码构建 libGMP（在我自己的前缀位置，由我的特殊 python 安装使用）解决了这个问题。

```
$ bunzip2 gmp-5.0.5.tar.bz2
$ tar -xf gmp-5.0.5.tar
$ cd gmp-5.0.5
$ ./configure --prefix=/path/to/my/special/prefix
$ make
$ make check
$ make install
$ easy_install pycrypto
$ easy_install fabric 
```

# android - Android：加载屏幕外的 GridView 项目

> ID：13937229
> 
> 赞同：4
> 
> 时间：2012-12-18T16:23:03.990
> 
> 标签：android, gridview

通常，gridview 仅将屏幕上可见的项目加载到内存中。是否可以为其在当前可见元素上方和下方加载 X 数量的项目/行提供“屏幕外限制”？

# c# - FakeItEasy 说 MustHaveHappened 没有发生……但确实发生了

> ID：13937232
> 
> 赞同：7
> 
> 时间：2012-12-18T16:23:10.653
> 
> 标签：c#, unit-testing, mocking, fakeiteasy

我正在尝试对“服务层”/“应用程序外观层”方法进行单元测试。这是我试图单元测试的方法：

```
// Create a new order in the database for a customer.  Given a customer id,
// will create a new order and return an OrderDto for use in the presentation
// layer.
public OrderDto CreateOrderForCustomer(int customerId)
{
  // Find the customer
  var customer = _customerRepository.GetCustomerById(customerId);

  // Create an order and apply special logic to get it ready for use.
  var orderFactory = new OrderFactory();
  var order = orderFactory.CreateOrder(customer);

  // IMPORTANT: This is what I'm trying to unit test ...
  _orderRepository.Save(order);

  order.Status = "Editing";

  // Using AutoMapper to turn this into a DTO that will be returned
  // to the Presentation layer.  The Mappings are created in the 
  // constructor and not depicted in this code snippet.
  var orderDto = Mapper.Map<Order, OrderDto>(order);

  return orderDto;
} 
```

（注意……为了清楚起见，我在这里添加了大量的注释。我通常不那么健谈。）

由于这个方法的工作是编排领域层方法和持久层方法来创建一个空订单，持久化它，并将它作为一个简单的 DTO 返回，我认为这对于 FakeItEasy 来说是一项很棒的工作......我会确保那些关键方法正在被正确编排，以确保使用 FakeItEasy 的 MustHaveHappened() 调用它们。

因此，考虑到这一点，这是我创建的单元测试：

```
[TestMethod]
public void CreateOrderForCustomer_ValidCustomer_CreatesNewOrder()
{
  // Arrange
  var customer = _customerRepository.GetCustomerById(1);
  Assert.AreEqual(0, customer.Orders.Count);

  // Act
  var orderDto = _orderEntryService.CreateOrderForCustomer(1);

  // Assert

  // Here I'm trying to make sure to re-create the order that was actually 
  // sent into the _customerRepository.Save() ... I should be able to
  // simple un-map the OrderDto back to an Order, and undo the property 
  // change.
  var order = Mapper.Map<OrderDto, Order>(orderDto);
  order.Status = "New";

  A.CallTo(() => _customerRepository.GetCustomerById(1)).MustHaveHappened();

  // **THIS CAUSES AN EXCEPTION**
  A.CallTo(() => _orderRepository.Save(order)).MustHaveHappened();
  Assert.AreEqual(1, customer.Orders.Count);
} 
```

在单元测试中，我无法访问在被测方法中创建的 ACTUAL Order，我尝试做下一件最好的事情......取被测试方法返回的 Order 的 DTO 版本，map Order 的 DTO 版本返回到域模型 Order 的新实例，并在将其发送到 FakeItEasy 的 MustHaveHappened() 之前确保属性相同。

我已经调试了单元测试并查看了 ACTUAL Order 的属性与 FAKED Order 的属性……我向你保证，它们是相同的。此外，我可以通过调试确认 _customerRepository.Save(order) 确实被调用了。

**问题** .MustHaveHappened() 是否失败是因为我实际上是在发送 Order 对象的两个不同实例——即使它们的属性相同？即使属性相同，FakeItEasy 是否需要输入参数的相同实例才能确保方法调用发生？

此外，关于我应该如何测试这类事情（即编排/服务/“应用程序外观”/what-ever-you-want-to-call-it layer 方法）的任何建议？

* * *

## 回答 #1

> 赞同：18
> 
> 时间：2012-12-18T17:50:21.060

> .MustHaveHappened() 是否失败是因为我本质上是在发送 Order 对象的两个不同实例——即使它们的属性相同？

是的。FakeItEasy 将使用`.Equals`, （除非你的类覆盖它）引用类型*默认*为引用相等。

> (...) FakeItEasy 是否需要输入参数的相同实例来确保方法调用已经发生？

不，您可以像这样进行自定义参数匹配：

```
A.CallTo(() => _orderRepository.Save(A<Order>.That.Matches(o =>
    o.Status == "New" &&
    o.Id == 10
))).MustHaveHappened(); 
```

但是，这个问题揭示了**您的代码**存在问题。从您的示例中可以清楚地看出您是`_customerRepository`作为依赖项注入的。那太棒了。你为什么不这样做`OrderFactory`呢？如果它是通过接口/基类依赖注入的，那么您可以轻松地模拟（伪造）它，并且您当前的问题将不存在。

如果您可以更改代码，我建议您注入工厂（遵循简单的准则 - *“没有`new`s 是好消息！”*）。如果没有，请使用自定义匹配器来验证订单属性，就像我在上面的示例中所做的那样。

# django - django-cms：错误的当前页面语言

> ID：13937234
> 
> 赞同：0
> 
> 时间：2012-12-18T16:23:16.160
> 
> 标签：django, django-models, django-templates, django-cms, django-cache

我有一个多语言网站（it、en、ru），它使用 django-cms 和一些挂在各个页面上的应用程序。我的问题是内容始终以意大利语提供，即使我访问以“/en/”或“/ru/”为前缀的页面。在我的基本模板 (base.html) 上，我有一个 {{ lang }} 模板变量，它允许我检索当前页面语言，它工作得很好......直到今天。现在，如果我访问***wwww.myhomepage/en***（或***/ru***），“lang”的值始终是“it”。

这些是我的语言设置（cms 而不是 cms）以及与语言相关的其他设置：

```
LANGUAGE_CODE = 'it' 

DEFAULT_LANGUAGE = 0

LANGUAGES = (
    ('it', gettext(u'Italiano')),
    ('en', gettext(u'English')),
    ('ru', gettext(u'Russian')),     )                                                                                                                                                                  

CMS_LANGUAGES = (
    ('it', ugettext('Italian')),
    ('en', ugettext('English')),
    ('ru', ugettext('Russian')),
)

LOCALE_PATHS = (os.path.join(PROJECT_PATH, 'locale'))

CMS_LANGUAGE_CONF = {
    'it': ['en'],
    'ru': ['en'],
    }  

CMS_HIDE_UNTRANSLATED = False

    MIDDLEWARE_CLASSES = (
     'django.middleware.common.CommonMiddleware',
     'django.contrib.sessions.middleware.SessionMiddleware',
     'django.middleware.csrf.CsrfViewMiddleware',
     'django.contrib.auth.middleware.AuthenticationMiddleware',
     'django.contrib.messages.middleware.MessageMiddleware',
     'cms.middleware.multilingual.MultilingualURLMiddleware',
     'cms.middleware.page.CurrentPageMiddleware',
     'cms.middleware.user.CurrentUserMiddleware',
     'cms.middleware.toolbar.ToolbarMiddleware',
     'django.middleware.common.CommonMiddleware',
     'django.contrib.sessions.middleware.SessionMiddleware',
     'django.middleware.csrf.CsrfViewMiddleware',
     'django.contrib.auth.middleware.AuthenticationMiddleware',
     'django.contrib.messages.middleware.MessageMiddleware',
     'cms.middleware.multilingual.MultilingualURLMiddleware',
     'cms.middleware.page.CurrentPageMiddleware',
     'cms.middleware.user.CurrentUserMiddleware',
     'debug_toolbar.middleware.DebugToolbarMiddleware',
     'cms.middleware.multilingual.MultilingualURLMiddleware',
     'cms.middleware.page.CurrentPageMiddleware',
     'cms.middleware.user.CurrentUserMiddleware',
     'cms.middleware.toolbar.ToolbarMiddleware'
) 
```

有什么帮助吗？谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-30T09:22:18.990

您有几个在您的设置中重复的中间件。它们应该看起来像这样：

```
MIDDLEWARE_CLASSES = (
 'django.middleware.common.CommonMiddleware',
 'django.contrib.sessions.middleware.SessionMiddleware',
 'django.middleware.csrf.CsrfViewMiddleware',
 'django.contrib.auth.middleware.AuthenticationMiddleware',
 'django.contrib.messages.middleware.MessageMiddleware',

 'cms.middleware.multilingual.MultilingualURLMiddleware',
 'cms.middleware.page.CurrentPageMiddleware',
 'cms.middleware.user.CurrentUserMiddleware',
 'cms.middleware.toolbar.ToolbarMiddleware',
) 
```

另外，您也可以提供您的`CONTEXT_PROCESSOR`设置吗？

然后，我假设您使用的是 Django-cms <= 2.3.5。这是正确的吗？有一个 2.4 测试版正在摆脱 MultilingualMiddleware，如果您可以尝试它是否适合您（即使它仍然是测试版）。

# javascript - 将 JavaScript 代码从后面的代码运行到 updatePanel

> ID：13937240
> 
> 赞同：1
> 
> 时间：2012-12-18T16:23:25.923
> 
> 标签：javascript, asp.net, c#-4.0

`OnClick`我在发生以下情况时有此代码`Button`：

```
if (true) {
  ClientScript.RegisterStartupScript(UpdatePanel1.GetType(), "", "show_modal('true');", true);
} else {
  ClientScript.RegisterStartupScript(UpdatePanel1.GetType(), "", "show_modal();", true);
} 
```

我将 Button 定义为一个触发器`UpdatePanel`：

```
<Triggers>
  <asp:AsyncPostBackTrigger ControlID="btnEdit" EventName="Click" />
</Triggers> 
```

该函数`show_modal`位于`.js`包含在 ASP 页中的文件中。

我怎样才能使这个脚本工作？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-18T22:59:03.650

不要使用`ClientScript.RegisterStartupScript`. 改为使用`ScriptManager1.RegisterStartupScript`。其中“ScriptManager1”是 ScriptManager 控件的名称。

# regex - 如何在 Notepad++ 中查找单引号并将其替换为两个单引号？

> ID：13937241
> 
> 赞同：2
> 
> 时间：2012-12-18T16:23:25.877
> 
> 标签：regex, notepad++, quote

我需要在文本中找到单引号并将它们替换为两个单引号，例如：

阿尔布雷

=>

l''arbre

文本中已经有很多地方有两个单引号，所以我不能只使用查找/替换功能，因为它会将所有这两个单引号一起拾取，并且它们应该保持不变，而无需修改。

有谁知道如何做到这一点 ？我想我必须使用正则表达式，但到目前为止我尝试过的都没有真正起作用。

谢谢 ！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-18T16:25:40.317

按`ctrl`+`h`并在正常模式下（无正则表达式）：

1）替换`'`为`''`

2）替换`''''`为`''`

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-18T16:25:46.830

按`ctrl`+ `F`，转到第二个选项卡（或`ctrl`+ `h`）。

*   放入`([a-zA-Z0-9]+)\'([a-zA-Z0-9]+)`第一个输入。
*   放上`\1"\2`第二个输入。
*   在搜索类型上，选择正则表达式。
*   按全部替换。

匹配：`text'text`, `09text09'09text09`, `text'09text09`,`09text09'text`

不匹配：`text'`, `'text`,`'`

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-18T16:27:56.847

```
find what: '
replace with: '' 
```

为我工作。不需要正则表达式

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2021-12-16T14:30:48.653

找什么：`([^'])(['])([^'])`

用。。。来代替：`\1''\3`

这仅用双引号替换单引号，并使已经存在的双引号保持不变

# java - java如何将字节数组中的字节值转换为int / long值？

> ID：13937242
> 
> 赞同：1
> 
> 时间：2012-12-18T16:23:26.580
> 
> 标签：java, int, bytearray, byte, long-integer

> **可能重复：**
> [如何将 Long 转换为 byte[] 并返回到 java](https://stackoverflow.com/questions/4485128/how-do-i-convert-long-to-byte-and-back-in-java)

我想将字节数组中特定位置的字节值（开始偏移量和我想转换的字节数）转换为 int/long 值？如果可能，反之亦然，在 int --> byte : 4bytes-array 返回的情况下，以及 long --> byte: 8bytes array 返回的情况下？

我使用了以下方法，但它们返回错误值..

```
public static final byte[] longToByteArray(long value) {
    return new byte[] {
            (byte)(value >>> 56),
            (byte)(value >>> 48),
            (byte)(value >>> 40),
            (byte)(value >>> 32),
            (byte)(value >>> 24),
            (byte)(value >>> 16),
            (byte)(value >>> 8),
            (byte)value};
}

public static final byte[] intToByteArray(int value) {
    return new byte[] {
            (byte)(value >>> 24),
            (byte)(value >>> 16),
            (byte)(value >>> 8),
            (byte)value};
}

public static long byteToLongWert(byte[] array, int offBegin, int offEnd) 
{
    long result = 0;
    for (int i = offBegin; i<offEnd; i++) {
        result <<= 8; //verschieben um 8 bits nach links
        result += array[i];
    }
    return result;
}

public static int byteToIntWert(byte[] array, int offBegin, int offEnd) 
{
    int result = 0;
    for (int i = offBegin; i<offEnd; i++) {
        result <<= 8; //verschieben um 8 bits nach links
        result += array[i];
    }
    return result;
} 
```

非常感谢您的帮助！！

# c# - 如何检查 DataRow 是否不包含空值

> ID：13937247
> 
> 赞同：0
> 
> 时间：2012-12-18T16:23:47.190
> 
> 标签：c#

我有一个 DataRow，我需要确保它不包含空值；想出了这个，但我不确定如何从 DataColumn 获取值

```
 foreach (DataColumn dc in dr.Table.Columns)
        {
            if (dc == null && !(dc.ColumnName.Equals("id")))
            {
                return false;
            }
        } 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-18T16:25:39.750

```
if (dc.ColumnName != "id" && dr[dc] == DBNull.Value) 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-12-18T16:28:52.333

```
Table.Columns.Cast<DataColumn>().Where(col => col.ColumnName != "id").Any(col => dr[col] == DBNull.Value); 
```

# java - SWIG - 重命名结构成员

> ID：13937249
> 
> 赞同：3
> 
> 时间：2012-12-18T16:23:59.793
> 
> 标签：java, swig

我正在尝试使用 SWIG 的 %rename 功能将 C++ 结构的多个成员重命名为 Java。

这是我的**SActivityType.h**：

```
struct SActivityType
{
    unsigned int m_uActivityType;
    unsigned int m_uActivityId;
}; 
```

这是一个工作**项目**。我：

```
%rename("%(strip:[m_u])s") MY_NAMESPACE::SActivityType::m_uActivityType;
%rename("%(strip:[m_u])s") MY_NAMESPACE::SActivityType::m_uActivityId;
%include "SActivityType.h" 
```

但我没有指定所有成员，而是尝试执行以下操作：

```
%rename("%(strip:[m_u])s") "MY_NAMESPACE::SActivityType::m_u*";
%include "SActivityType.h" 
```

或者

```
%rename("%(strip:[m_u])s") MY_NAMESPACE::SActivityType;
%include "SActivityType.h" 
```

但没有一个工作，getter/setter 在生成的 Java中返回到**setM_uActivityType/getM_uActivityType 。**

那么有没有办法告诉 SWIG 在一个声明中重命名所有匹配的成员？

# android - 快速滚动时出现 NullPointerException

> ID：13937264
> 
> 赞同：0
> 
> 时间：2012-12-18T16:25:16.400
> 
> 标签：android, baseadapter

我正在尝试将类别字段包含到我的自定义 ListView 中。在我开始快速滚动之前它工作正常。当滚动非常慢时，不会发生此错误。这真的让我很困惑。有人可以帮忙吗？我的代码：

```
package com.mamlambo.tutorial.tutlist;

import java.util.ArrayList;
import java.util.TreeSet;

import android.os.Bundle;
import android.view.LayoutInflater;
import android.view.View;
import android.view.ViewGroup;
import android.view.View.OnClickListener;
import android.app.Activity;
import android.content.Context;
import android.content.Intent;
import android.database.Cursor;
import android.database.sqlite.SQLiteDatabase;
import android.widget.BaseAdapter;
import android.widget.ListView;
import android.widget.TextView;
import android.widget.ImageView;
import android.graphics.Bitmap;
import android.graphics.BitmapFactory;

public class TutListActivity extends Activity {

private DatabaseManager mHelper;
private SQLiteDatabase mDatenbank;
private ArrayList<String> devicesList;
private TreeSet<Object> mSeparatorsSet;
ListView listView;
EfficientAdapter objectAdapter;

private class EfficientAdapter extends BaseAdapter {
    private LayoutInflater mInflater;
    private Bitmap mIcon1;
    private Bitmap mIcon2;

    private static final int TYPE_ITEM = 0;
    private static final int TYPE_SEPARATOR = 1;
    private static final int TYPE_MAX_COUNT = TYPE_SEPARATOR + 1;

    public EfficientAdapter(Context context) {
        // Cache the LayoutInflate to avoid asking for a new one each time.
        mInflater = LayoutInflater.from(context);

        // Icons bound to the rows.
        mIcon1 = BitmapFactory.decodeResource(context.getResources(), R.drawable.icon);
        mIcon2 = BitmapFactory.decodeResource(context.getResources(), R.drawable.icon);
    }

    /**
     * The number of items in the list is determined by the number of speeches
     * in our array.
     *
     * @see android.widget.ListAdapter#getCount()
     */
    public int getCount() {
        return devicesList.size();
    }

    public void addItem(final String item) {
        devicesList.add(item);
        notifyDataSetChanged();
    }

    /**
     * Since the data comes from an array, just returning the index is
     * sufficent to get at the data. If we were using a more complex data
     * structure, we would return whatever object represents one row in the
     * list.
     *
     * @see android.widget.ListAdapter#getItem(int)
     */
    public Object getItem(int position) {
        return position;
    }
    /**
     * Use the array index as a unique id.
     *
     * @see android.widget.ListAdapter#getItemId(int)
     */
    public long getItemId(int position) {
        return position;
    }

    @Override
    public void notifyDataSetChanged() // Create this function in your adapter class
    {
        super.notifyDataSetChanged();
    }

    public void addSeparatorItem(final String item) {
        devicesList.add(item);
        // save separator position
        mSeparatorsSet.add(devicesList.size() - 1);
        notifyDataSetChanged();
    }

    @Override
    public int getItemViewType(int position) {
        return mSeparatorsSet.contains(position) ? TYPE_SEPARATOR : TYPE_ITEM;
    }

    public View getView(int position, View convertView, ViewGroup parent) {
        // A ViewHolder keeps references to children views to avoid unneccessary calls
        // to findViewById() on each row.
        ViewHolder holder;
        // When convertView is not null, we can reuse it directly, there is no need
        // to reinflate it. We only inflate a new View when the convertView supplied
        // by ListView is null.
        int type = getItemViewType(position);

        if (convertView == null) {

            holder = new ViewHolder();

            switch (type) {
                case TYPE_ITEM:

                    convertView = mInflater.inflate(R.layout.list_item, null);

                    holder.text = (TextView) convertView.findViewById(R.id.Title_List_Item);
                    holder.icon = (ImageView) convertView.findViewById(R.id.Delete_List_Item);

                    convertView.findViewById(R.id.Title_List_Item).setTag(devicesList.get(position));
                    convertView.findViewById(R.id.Delete_List_Item).setTag(devicesList.get(position));

                    holder.text.setText(devicesList.get(position));
                    holder.icon.setImageBitmap((position & 1) == 1 ? mIcon1 : mIcon2);

                    holder.text.setOnClickListener(mOnTitleClickListener);
                    holder.icon.setOnClickListener(mOnIconClickListener);

                    break;

                case TYPE_SEPARATOR:

                    convertView = mInflater.inflate(R.layout.seperator_item, null);

                    holder.text = (TextView)convertView.findViewById(R.id.Text_Seperator_Item);

                    holder.text.setText(devicesList.get(position));

                    break;
            }

            convertView.setTag(holder);

        } else {
            // Get the ViewHolder back to get fast access to the TextView
            // and the ImageView.
            holder = (ViewHolder) convertView.getTag();
        }
        return convertView;
    }

    private OnClickListener mOnTitleClickListener = new OnClickListener() {
        public void onClick(View v) {
                if(v.getTag().toString() == "ADD DEVICE"){
                    Intent addDevice = new Intent(getApplicationContext(), addDevice.class);
                    startActivity(addDevice);
                }else{
                    Intent showRemote = new Intent(TutListActivity.this, Remote.class);
                    showRemote.putExtra("selectedDevice", v.getTag().toString());
                    startActivity(showRemote);
                }
        }
    };

    private OnClickListener mOnIconClickListener = new OnClickListener() {
        public void onClick(View v) {
            String NameOfDevice[] = new String[2];
            NameOfDevice = v.getTag().toString().split(",");
            mDatenbank.execSQL("DELETE FROM addedDevices WHERE name = '"+NameOfDevice[0]+"'");

            ladeDevices();
            objectAdapter.notifyDataSetChanged();
        }
    };

    class ViewHolder {
        TextView text;
        ImageView icon;
    }
}

public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);

    setContentView(R.layout.mainlayout);

    mHelper = new DatabaseManager(this);
    mDatenbank = mHelper.getReadableDatabase();

    listView = (ListView) findViewById(R.id.list);
    objectAdapter = new EfficientAdapter(this);

    ladeDevices();
}

/*

@Override
protected void onPause() {
    super.onPause();
    mDatenbank.close();
    dataloaded = false;
}

@Override
protected void onResume() {
    super.onResume();
    mDatenbank = mHelper.getReadableDatabase();
    ladeDevices();
}

*/

private void ladeDevices() {
        devicesList = new ArrayList<String>();
        mSeparatorsSet = new TreeSet<Object>();

        Cursor devicesCursor = mDatenbank.query("addedDevices", new String[] {"name", "hersteller"}, null, null, null, null, null);
        startManagingCursor(devicesCursor);
        devicesCursor.moveToFirst();

        for (int i=0;i<devicesCursor.getCount();i++){ 
            String addingElement = new String(devicesCursor.getString(0)+", "+devicesCursor.getString(1));
            objectAdapter.addItem(addingElement);
            devicesCursor.moveToNext();
            if (i % 4 == 0) {
                objectAdapter.addSeparatorItem("separator " + i);
            }
        } 
        objectAdapter.addItem("ADD DEVICE");
        listView.setAdapter(objectAdapter);
    } 
```

}

谢谢！

编辑：LogCat 输出：

```
11-19 15:01:44.898: E/AndroidRuntime(957): FATAL EXCEPTION: main
11-19 15:01:44.898: E/AndroidRuntime(957): java.lang.NullPointerException
11-19 15:01:44.898: E/AndroidRuntime(957):  at com.mamlambo.tutorial.tutlist.TutListActivity$EfficientAdapter.getView(TutListActivity.java:150)
11-19 15:01:44.898: E/AndroidRuntime(957):  at android.widget.AbsListView.obtainView(AbsListView.java:2012)
11-19 15:01:44.898: E/AndroidRuntime(957):  at android.widget.ListView.makeAndAddView(ListView.java:1772)
11-19 15:01:44.898: E/AndroidRuntime(957):  at android.widget.ListView.fillUp(ListView.java:705)
11-19 15:01:44.898: E/AndroidRuntime(957):  at android.widget.ListView.correctTooHigh(ListView.java:1395)
11-19 15:01:44.898: E/AndroidRuntime(957):  at android.widget.ListView.fillGap(ListView.java:637)
11-19 15:01:44.898: E/AndroidRuntime(957):  at android.widget.AbsListView.trackMotionScroll(AbsListView.java:4546)
11-19 15:01:44.898: E/AndroidRuntime(957):  at android.widget.AbsListView.scrollIfNeeded(AbsListView.java:2852)
11-19 15:01:44.898: E/AndroidRuntime(957):  at android.widget.AbsListView.onTouchEvent(AbsListView.java:3106)
11-19 15:01:44.898: E/AndroidRuntime(957):  at android.view.View.dispatchTouchEvent(View.java:5486)
11-19 15:01:44.898: E/AndroidRuntime(957):  at android.view.ViewGroup.dispatchTransformedTouchEvent(ViewGroup.java:1953)
11-19 15:01:44.898: E/AndroidRuntime(957):  at android.view.ViewGroup.dispatchTouchEvent(ViewGroup.java:1714)
11-19 15:01:44.898: E/AndroidRuntime(957):  at android.view.ViewGroup.dispatchTransformedTouchEvent(ViewGroup.java:1959)
11-19 15:01:44.898: E/AndroidRuntime(957):  at android.view.ViewGroup.dispatchTouchEvent(ViewGroup.java:1728)
11-19 15:01:44.898: E/AndroidRuntime(957):  at android.view.ViewGroup.dispatchTransformedTouchEvent(ViewGroup.java:1959)
11-19 15:01:44.898: E/AndroidRuntime(957):  at android.view.ViewGroup.dispatchTouchEvent(ViewGroup.java:1728)
11-19 15:01:44.898: E/AndroidRuntime(957):  at android.view.ViewGroup.dispatchTransformedTouchEvent(ViewGroup.java:1959)
11-19 15:01:44.898: E/AndroidRuntime(957):  at android.view.ViewGroup.dispatchTouchEvent(ViewGroup.java:1728)
11-19 15:01:44.898: E/AndroidRuntime(957):  at android.view.ViewGroup.dispatchTransformedTouchEvent(ViewGroup.java:1959)
11-19 15:01:44.898: E/AndroidRuntime(957):  at android.view.ViewGroup.dispatchTouchEvent(ViewGroup.java:1728)
11-19 15:01:44.898: E/AndroidRuntime(957):  at com.android.internal.policy.impl.PhoneWindow$DecorView.superDispatchTouchEvent(PhoneWindow.java:1892)
11-19 15:01:44.898: E/AndroidRuntime(957):  at com.android.internal.policy.impl.PhoneWindow.superDispatchTouchEvent(PhoneWindow.java:1371)
11-19 15:01:44.898: E/AndroidRuntime(957):  at android.app.Activity.dispatchTouchEvent(Activity.java:2364)
11-19 15:01:44.898: E/AndroidRuntime(957):  at com.android.internal.policy.impl.PhoneWindow$DecorView.dispatchTouchEvent(PhoneWindow.java:1840)
11-19 15:01:44.898: E/AndroidRuntime(957):  at android.view.View.dispatchPointerEvent(View.java:5662)
11-19 15:01:44.898: E/AndroidRuntime(957):  at android.view.ViewRootImpl.deliverPointerEvent(ViewRootImpl.java:2863)
11-19 15:01:44.898: E/AndroidRuntime(957):  at android.view.ViewRootImpl.handleMessage(ViewRootImpl.java:2442)
11-19 15:01:44.898: E/AndroidRuntime(957):  at android.os.Handler.dispatchMessage(Handler.java:99)
11-19 15:01:44.898: E/AndroidRuntime(957):  at android.os.Looper.loop(Looper.java:137)
11-19 15:01:44.898: E/AndroidRuntime(957):  at android.app.ActivityThread.main(ActivityThread.java:4340)
11-19 15:01:44.898: E/AndroidRuntime(957):  at java.lang.reflect.Method.invokeNative(Native Method)
11-19 15:01:44.898: E/AndroidRuntime(957):  at java.lang.reflect.Method.invoke(Method.java:511)
11-19 15:01:44.898: E/AndroidRuntime(957):  at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:784)
11-19 15:01:44.898: E/AndroidRuntime(957):  at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:551)
11-19 15:01:44.898: E/AndroidRuntime(957):  at dalvik.system.NativeStart.main(Native Method) 
```

编辑：我添加了一个新版本。我把 listView.setAdapter(objectAdapter); 在从数据库加载列表条目并将它们放入 ArrayList 的方法中。这样，每次发生变化（条目被删除）时，适配器都会被设置为新的。这样做可以让我将 setTag() 和 onClickListener() 调用放入 if (convertView == null) {...} 中，以便仅在某些情况发生变化时调用它们，而不是每次调用 getView() 时调用。我相信这一定是最大的错误，尽管我不确定我的解决方案是否是一个非常好的解决方案。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-19T14:13:01.873

宣布

```
View view = null; 
```

作为适配器类中的实例变量您的 else 部分应如下所示

```
else {
        view = convertView;
}
holder = (ViewHolder) convertView.getTag(); 
```

# java - 使用 GStreamer 创建 AVI 文件

> ID：13937269
> 
> 赞同：2
> 
> 时间：2012-12-18T16:25:27.363
> 
> 标签：java, video, jframe, media, gstreamer

![GStreamer](../Images/824ac3d97266fdd52fb7a214e4092d43.png) 所以，我被推荐使用 GStreamer 创建视频文件。我正在查看他们创建视频文件的[教程。](http://code.google.com/p/gstreamer-java/wiki/VideoTestTutorial)
我遇到的问题是：

*   我如何创建一个 AVI 文件而不是一个 YUV 的东西。*   那里使用的来源是什么？

我想提供一组`BufferedImages`或其他任何东西来显示屏幕上发生的事情。我以前使用`JPEGtoMovie`过 Java 人员提供的，为此我必须首先将所有图像以 JPEG 格式保存到磁盘上，然后将它们从字典顺序中排序为正确的顺序等等。
我打算避免这种情况，这就是为什么我在考虑`Vector<BufferedImage>`或`BlockingArrayQueue<BufferedImage>`

*   我需要 GStreamer 的哪些插件来创建`AVI`输出？对不起，我今天问了太多问题。我以前从未使用过媒体框架，而且**我很笨**

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-19T09:58:54.437

*   命令 gst-inspect 将列出所有包含的元素（组件）。
*   您可以从管道生成一个 avi 文件：videotestsrc！编码器！！文件接收器，其中编码器代表您要使用的编码元素
*   另一种方法是使用： videotestsrc ！编码箱！文件接收器；在这里，您只需构建一个配置文件，encodebin 将确定我们使用什么编码器和什么复用器来创建配置文件中指定的格式

我不理解 BufferImages 周围的部分。您可以手动将图像提供给 gstreamer（例如使用 [appsrc ! decodebin] 而不是 [videotestsrc]），但这是最后的手段。还有诸如 multifilesrc 之类的元素可以读取图像序列。也许您可以提供更多详细信息（源框架来自哪里）。

# php - JQuery 发布和获取

> ID：13937277
> 
> 赞同：0
> 
> 时间：2012-12-18T16:25:46.620
> 
> 标签：php, javascript, jquery

我有一个我正在尝试编写的方法，它可以将数据发布到 php 文件并获取结果并在变量中返回输出。出于某种原因，我的代码块不起作用。

```
function post_get(){

var result = null;

$.post("modules/data.php", { "func": "getNameAndTime" },
function(data){
    result = JSON.parse(data);
}, "json");

return result;
} 
```

使用此方法时出现此错误

SyntaxError：JSON 解析错误：意外的标识符“未定义”

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-12-18T16:28:24.447

1.  Ajax 是异步的。
2.  您的 PHP 是否返回有效的 JSON？

这就是编写代码以利用 ajax 的异步特性的方式。

```
function post_get(){

    return $.post("modules/data.php", { "func": "getNameAndTime" }, "json");

}

post_get().done(function(data){
    // do stuff with data
    console.log(data);
}).fail(function(){
    console.log(arguments);
    alert("FAIL.\nCheck the console.");
});
// Do not attempt to bring data from inside the above function to out here. 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-18T16:27:32.780

如果您的服务器返回正确的 JSON 编码输出并设置正确的标头 ( `Content-Type: application/json`)，您可以`data`立即使用：

```
$.post("modules/data.php", {
    "func": "getNameAndTime"
},
function(data){
    console.log(data);
}, "json");

// btw, at this point in the code you won't have access to the return value 
```

事实上，即使它没有返回正确的数据，它也`console.log(data)`应该为您提供足够的信息来找出它为什么不工作。

# php - PDO 使用外键插入表中

> ID：13937280
> 
> 赞同：1
> 
> 时间：2012-12-18T16:25:59.820
> 
> 标签：php, mysql, pdo, insert-update

我在使用 mysql 和 PDO 时遇到了一些困难。

我希望将产品插入数据库，但是产品表包含外键。自然，插入时我不会知道外键ID。我这样做对吗？？？有没有更好的方法来解决这个问题？

餐桌产品

*   Id PK AI int
*   名称 Varchar(20)
*   CategoryId Int FK
*   TypeId Int FK

表类别

*   Id Int PK
*   猫 varchar(20)

表类型

*   Id Int PK
*   输入 varchar(20)

    ```
    $type = 'Gloves';
    $category = 'Clothing';
    $sql = 'INSERT INTO Products
        SET Name = :name, CategoryId = :catId, TypeId = :typeId
        WHERE 
            CategoryId IN (SELECT Id FROM Categories WHERE Cat = :category) AND
            TypeId IN (SELECT Id FROM Types WHERE Type = :type)'

    $stmt = $db->prepare($sql); 
    $stmt->execute(array(':name' => 'Pink childrens gloves', ':category' => $category, ':type' => $type)); 
    ```

正如下面的评论中提到的：通常，我会从选择框中获取 ID。我不能这样做，因为它将是执行查询的脚本，而不是用户。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-18T16:44:04.853

MySQL 允许在单个查询中组合[SELECT + INSERT ：](http://dev.mysql.com/doc/refman/5.5/en/insert-select.html)

```
INSERT INTO tbl_temp2 (fld_id)
  SELECT tbl_temp1.fld_order_id
  FROM tbl_temp1 WHERE tbl_temp1.fld_order_id > 100; 
```

......但我不会在意它。如果您在单个查询中执行三项不同的操作，则无法进行正确的错误检查。

我的建议是您首先验证是否存在与给定名称匹配的类别和类型。在该步骤中，您可以轻松获取相应的 ID，这将让您执行简单的 INSERT。此外，如果您需要插入许多产品，您可以先验证一次。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-18T16:29:02.033

你确定这是你想要的吗？

```
$sql = 'INSERT INTO Products
    SET Name = :name
    WHERE 
        CategoryId IN (SELECT Id FROM Categories WHERE Cat = :category) AND
        TypeId IN (SELECT Id FROM Types WHERE Type = :type)' 
```

我想你正在尝试使用`UPDATE`

```
$sql = 'UPDATE Products
    SET Name = :name
    WHERE 
        CategoryId IN (SELECT Id FROM Categories WHERE Cat = :category) AND
        TypeId IN (SELECT Id FROM Types WHERE Type = :type)' 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-08-09T09:22:30.547

首先，您需要弄清楚哪个是具有外键数据的表。

然后你需要从外键表中获取所有可能的值。

最后，您需要构建和下拉列表或类似列表以提供选择可接受的外键的能力。

```
$q=$db->prepare('SELECT ke.referenced_table_name assoc_table,
ke.referenced_column_name assoc_col FROM
information_schema.KEY_COLUMN_USAGE ke WHERE ke.referenced_table_name IS NOT NULL             
AND ke.table_schema=:database AND ke.table_name=:tablename AND ke.column_name=:col');
$q->bindValue(':database','mydatabasename'); //Set your database name here
$q->bindValue(':tablename','Departments');   //Set your table name here
$q->bindValue(':col','City');                //Set the column which foreign key values you want to have here
if($q->execute()) {
 $foreingtable=$q->fetch(PDO::FETCH_ASSOC);
 $q=$db->prepare('SELECT '.$foreingtable['assoc_col'].' FROM '.$foreingtable['assoc_table']);
  if($q->execute())
   echo json_encode($q->fetchAll(PDO::FETCH_COLUMN));
 }
else {
   header('http/1.1 500 Internal Server Error');
   print_r($q->errorInfo());
   exit;
 } 
```

有关此的更多信息：[使用 PDO 获取 MySql 中可能的外键值列表](http://domexception.blogspot.fi/2013/08/php-get-list-of-possible-foreign-key.html)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-12-18T16:52:03.707

除了@Álvaro G. Vicario's answer之外，您还可以执行以下操作（在普通 sql 中工作，我没有尝试使用绑定变量）：

```
$sql = 'INSERT INTO Products
        SET Name = :name,
            CategoryId = (SELECT Id FROM Categories WHERE Cat = :category),
            TypeId = (SELECT Id FROM Types WHERE Type = :type)'; 
```

但我总是会先检查现有的类别和类型，在必要时插入并获取所需的 id，因为如果内部选择中没有匹配项，这将导致意外结果。

# smpp - 寻找检查 SMPP 数据包的工具

> ID：13937281
> 
> 赞同：0
> 
> 时间：2012-12-18T16:26:02.190
> 
> 标签：smpp

您知道任何可用于目视检查 SMPP 数据包的工具吗？一个接受字节数组或字符串作为输入并让我们快速检查字段的工具。

我搜索了很多，但所有工具实际上都是代码库而不是工具。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-11T00:33:45.750

当给定 tcpdump 时，Wireshark 能够识别 SMPP 数据包。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-19T21:27:45.160

这是一个商业产品，可以检查 SMPP 流量并在匹配字节/字符串模式时应用操作：http: [//tritux.com/product/NetCop](http://tritux.com/product/NetCop)

我参与了这个产品背后的技术团队，它的一些基本用途是检查 SMPP 流量以检测 Deliver_sm PDU 并检查每个订阅者的吞吐量，如果一个订阅者发送的 Deliver_sm PDU 超过（比方说）每秒 6 个比起恶意移动终端（可能是 simbox）向 SMSC 充斥 MO 流量的可能性更大，NetCop 能够采取以下措施：

*   向用户发送通知
*   阻止（禁止）用户的 SMS-MO 流量（通过电信公司的智能网络集成）
*   ...

# spring-mvc - 弹簧安全注销触发器

> ID：13937286
> 
> 赞同：1
> 
> 时间：2012-12-18T16:26:16.313
> 
> 标签：spring-mvc, spring-security

我想从已登录用户的 Hashmap 中删除已注销的用户，但是当我按下注销链接时，我找不到执行此操作的方法。它只是重定向到登录页面。

在春季安全我有

```
 <logout invalidate-session="true" 
        logout-success-url="/" 
        logout-url="/logout.htm"/> 
```

注销链接就像

```
 <a href="logout.htm">Logout</a> 
```

当我按下此链接时，它只是转到我的登录映射

```
 @RequestMapping("login")
public ModelAndView login(){} 
```

当我尝试使用获取用户详细信息时

```
 SecurityContextHolder.getContext()
            .getAuthentication().getPrincipal(); 
```

它返回我匿名用户。那么如何获取已注销的用户详细信息。

如果您需要更多详细信息，请告诉我。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-18T16:45:29.870

将**org.springframework.security.web.authentication.logout.LogoutSuccessHandler**接口的实现作为 bean 添加到您的安全上下文中。

然后你可以使用它：

```
<logout success-handler-ref="yourLogoutSuccessHandler" /> 
```

**编辑。** 正如 Marcel 所提到的，这个解决方案不能开箱即用，因为你不能混合*success-handler-ref*和*logout-success-url*属性（[参考](https://stackoverflow.com/a/6770785/131929)）。我更喜欢稍微不同的解决方案：您可以使用组合而不是继承：

1.  **为SimpleUrlLogoutSuccessHandler** bean准备配置。
2.  通过相应的*defaultTargetUrl*属性设置*logout-success-url 。*
**   使用LogoutSuccessHandler接口将**SimpleUrlLogoutSuccessHandler** bean 注入到您的**CustomUrlLogoutSuccessHandler****中**，并在完成您的工作后调用它。*

 *优点是您将更少地与框架代码耦合。所以在从 Spring Security 3.1 迁移到 Spring Security YY 的情况下你会遇到更少的问题

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-18T20:34:18.590

关于的提示`LogoutSuccessHandler`是正确的。但是，如果我没记错的话，您必须考虑配置`success-handler-ref`和`logout-success-url`互斥。因此，您需要在成功处理程序中手动实现对 URL 的转发。指针：[https ://stackoverflow.com/a/6770785/131929](https://stackoverflow.com/a/6770785/131929)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-19T11:21:07.553

```
Authentication authentication = SecurityContextHolder.getContext().getAuthentication()
authentication.getName() 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-01-04T07:04:50.907

在您的 applicationContext-security.xml 文件中添加成功处理程序，如下所示

```
< logout logout-url="/resources/j_spring_security_logout" success-handler-ref="com.mycompany.security.SpringSecurityLogoutHandler" /> 
```

创建将实现`org.springframework.security.web.authentication.logout.LogoutHandler`接口的类，并在它的注销方法中执行注销时所需的所有操作。*

# sharepoint - 无法摆脱 SP 2010 中的站点模板

> ID：13937288
> 
> 赞同：0
> 
> 时间：2012-12-18T16:26:37.757
> 
> 标签：sharepoint, sharepoint-2010

我们目前正在升级到 SharePoint 2013。我们已经开始导入内容数据库。在使用 Test-SPContentDatabase 时，我们发现了“MissingSiteDefinition”。它没有给出名字，而是一个四位数的身份证号码。我们用了

```
Get-SPWebTemplate | select Name, ID 
```

并找到与模板绑定的四位 ID 号。我们已删除包含该模板的站点，并正在尝试删除该模板，因为它位于不再使用的站点上，并且是与 2013 不兼容的专业模板。当我们运行

```
Uninstall-SPWebTemplate -identity [Name of template] 
```

它不会引发错误。但是，当我再次运行时

```
Get-SPWebTemplate | select Name, ID 
```

它仍然列出。引用此模板的站点已被删除，我们必须运行

```
Remove-SPDeletedSite 
```

完全删除该网站。但是，模板仍然存在。我确信我们缺少一个简单的步骤。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-19T15:17:55.220

模板是否通过 SharePoint 解决方案/功能应用于网站？我已经看到过几次这种情况，在删除源功能之前，SharePoint 不会删除工件。

# haskell - 对应于 Haskell 中常见单子的伴随函子对是什么？

> ID：13937289
> 
> 赞同：37
> 
> 时间：2012-12-18T16:26:42.157
> 
> 标签：haskell, category-theory

在范畴论中，一个单子可以由两个伴随函子构成。特别是，如果*C*和*D*是类别，并且 *F : C --> D*和*G : D --> C*是伴随函子，在某种意义上是双射

> *hom(FX,Y) = hom(X,GY)*

*对于C*中的每个*X*和*D*中的*Y*，则组合*G o F : C --> C*是一个单子。

 **** * *

一对这样的伴随函子可以通过固定类型`b`和取`F`和`G`来给出

```
data F b a = F (a,b)
data G b a = G (b -> a)

instance Functor (F b) where
  fmap f (F (a,b)) = F (f a, b)

instance Functor (G b) where
  fmap f (G g) = G (f . g) 
```

并且通过currying给出hom集之间的双射（模构造函数）：

```
iso1 :: (F b a -> c) -> a -> G b c
iso1 f = \a -> G $ \b -> f (F (a,b))

iso2 :: (a -> G b c) -> F b a -> c
iso2 g = \(F (a,b)) -> let (G g') = g a in g' b 
```

在这种情况下，相应的单子是

```
data M b a = M { unM :: b -> (a,b) }

instance Monad (M b) where
    return a    = M (\b -> (a,b))
    (M f) >>= g = M (\r -> let (a,r') = f r in unM (g r') a) 
```

我不知道这个 monad 的名字应该是什么，除了它似乎是一个带有可覆盖信息的 reader monad（**编辑：** dbaupp 在评论中指出这是`State`monad. )

所以`State`单子可以被“分解”为一对伴随函子`F`and `G`，我们可以写

```
State = G . F 
```

到现在为止还挺好。

* * *

我现在正试图弄清楚如何将其他常见的单子分解为成对的伴随函子 - 例如`Maybe`, `[]`, `Reader`, `Writer`, `Cont`- 但我无法弄清楚我们可以将它们“分解”成的伴随函子对是什么。

唯一简单的情况似乎是`Identity`monad，它可以分解为任何一对仿函数，`F`并且与（特别是，你可以只取and ）相反。`G``F``G``F = Identity``G = Identity`

任何人都可以解释一下吗？

* * *

## 回答 #1

> 赞同：18
> 
> 时间：2012-12-18T18:57:12.357

您正在寻找的是[Kleisli 类别](https://en.wikipedia.org/wiki/Kleisli_category)。最初开发它是为了表明每个 monad 都可以由两个伴随函子构成。

问题是 Haskell`Functor`不是通用函子，它是 Haskell 类别中的 endo-functor。所以我们需要一些不同的东西（AFAIK）来表示其他类别之间的函子：

```
{-# LANGUAGE FunctionalDependencies, KindSignatures #-}
import Control.Arrow
import Control.Category hiding ((.))
import qualified Control.Category as C
import Control.Monad

class (Category c, Category d) => CFunctor f c d | f -> c d where
    cfmap :: c a b -> d (f a) (f b) 
```

请注意，如果我们`->`两者都取`c`，`d`我们得到一个 Haskell 类别的 endo-functor，它就是 的类型`fmap`：

```
cfmap :: (a -> b) -> (f a -> f b) 
```

现在我们有明确的类型类来表示两个给定类别之间的函子`c`，`d`并且我们可以表达给定 monad 的两个伴随函子。左边将一个对象映射`a`到 just`a`并将态射映射`f`到`(return .) f`：

```
-- m is phantom, hence the explicit kind is required
newtype LeftAdj (m :: * -> *) a = LeftAdj { unLeftAdj :: a }
instance Monad m => CFunctor (LeftAdj m) (->) (Kleisli m) where
    cfmap f = Kleisli $ liftM LeftAdj . return . f . unLeftAdj
    -- we could also express it as liftM LeftAdj . (return .) f . unLeftAdj 
```

右边将一个对象映射`a`到对象`m a`，并将一个态射映射`g`到`join . liftM g`，或等价于`(=<<) g`：

```
newtype RightAdj m a = RightAdj { unRightAdj :: m a }
instance Monad m => CFunctor (RightAdj m) (Kleisli m) (->) where
    cfmap (Kleisli g) = RightAdj . join . liftM g . unRightAdj
    -- this can be shortened as RightAdj . (=<<) g . unRightAdj 
```

（如果有人知道如何用 Haskell 更好地表达这一点，请告诉我。）

* * *

## 回答 #2

> 赞同：17
> 
> 时间：2012-12-18T20:06:28.130

*   `Maybe`来自自由函子进入尖集范畴和健忘函子返回
*   `[]`来自自由函子到幺半群和健忘函子的范畴

但这些类别都不是 Hask 的子类别。

* * *

## 回答 #3

> 赞同：8
> 
> 时间：2013-01-10T11:02:16.470

正如你所观察到的，每一对伴随函子都会产生一个单子。反之亦然：每一个单子都是这样产生的。事实上，它以两种典型的方式做到这一点。一种是 Petr 描述的 Kleisli 结构；另一个是 Eilenberg-Moore 结构。事实上，Kleisli 是最初的这种方式，而 EM 是终端方式，属于合适的伴随函子对类别。它们是在 1965 年独立发现的。如果您想了解详细信息，我强烈推荐[Catsters 视频](http://www.youtube.com/user/TheCatsters)。***

# asp.net - 设置 Zebra DataList 表

> ID：13937293
> 
> 赞同：1
> 
> 时间：2012-12-18T16:26:48.850
> 
> 标签：asp.net, css, datalist

首先，我需要从数据库中绑定一个表，以便每一行都是可编辑的。我决定选择 DataList，因为它有`<EditItemTemplate>`属性，而中继器没有。

我需要创建一个 Zebra 表，为此我创建了以下 CSS 类：

```
.row:nth-of-type(odd)
{
background-color:Green;
} 
```

问题是，当我在转发器中使用此类时，它工作正常，因为转发器的构建方式可以让您对行和列进行编码。例如：

```
<asp:Repeater>
<HeaderTemplate>
    <Table ...>
</HeaderTemplate>
<ItemTemplate>
  <tr Class="row">
    <td> ... </td>
    <td> ... </td>
  </tr>
</ItemTepmlate>
<FooterTemplate></Table></FooterTemplate> 
```

![这就是 REPEATER 表的样子](../Images/21e432332c6eefc492223a8014820816.png)

但是，当我以同样的方式构建我的 DataList 时，它看起来很奇怪而且很乱。所以这就是我的 Datalist 的构建方式：

```
<asp:DataList ID="dlStages" runat="server" DataKeyField="Priority" OnCancelCommand="dlStages_CancelCommand"
    OnEditCommand="dlStages_EditCommand" 
    OnUpdateCommand="dlStages_UpdateCommand" BorderWidth="2" 
     GridLines="Both" CellPadding="20" CellSpacing="20" Width="99%" 
    onitemdatabound="dlStages_ItemDataBound">

    <HeaderTemplate>

            <th>
                Priority
            </th>
            <th>
                Stage
            </th>
            <th>
                Description
            </th>
            <th>
                Command
            </th>
            <th>
                Expected End Date
            </th>
    </HeaderTemplate>
    <ItemTemplate>

            <td>
                <%# Eval("Priority") %>
            </td>
            <td>
                <%# Eval("StatusName") %>
            </td>
            <td>
                <%# Eval("Comments") %>
            </td>
            <td>
                <asp:LinkButton ID="lbtnEdit" runat="server" Text="Edit" CommandName="edit"></asp:LinkButton>
            </td>
            <td>
                <%# Eval("ExpectedEndDate", "{0:dd-MM-yyyy}")%>
            </td>

    </ItemTemplate>        
    <EditItemTemplate>

            <td>
                <%# Eval("Priority") %>
            </td>
            <td>
                <%# Eval("StatusName") %>
            </td>
            <td>
                <asp:TextBox ID="txtComments" runat="server" Text='<%# Eval("Comments") %>' Width="800px"
                    Height="48px" TextMode="MultiLine"></asp:TextBox>
            </td>
            <td>
                <asp:LinkButton ID="lbtnUpdate" runat="server" Text="Update" CommandName="update"></asp:LinkButton>
                /
                <asp:LinkButton ID="lbtnCancel" runat="server" Text="Cancel" CommandName="cancel"></asp:LinkButton>
            </td>
            <td>

                <asp:TextBox runat="server" ID="txtDate"></asp:TextBox>
                <asp:CalendarExtender ID="CalendarExtender1" runat="server" PopupButtonID="txtDate"
                    TargetControlID="txtDate" Format="dd-MM-yyyy">
                </asp:CalendarExtender>
            </td>
    </EditItemTemplate>
</asp:DataList> 
```

![数据列表表：](../Images/c122d90107f97485ff4fa35096c8ce79.png)

为了给DataList中的每一行设置css类，我在下面的代码后面写了代码：

```
protected void dlStages_ItemDataBound(object sender, DataListItemEventArgs e)
{
    e.Item.CssClass = "row";
} 
```

问题是它不会为我创建斑马表。相反，它以灰色绘制第一列（我不知道它是从哪里来的）。

谁能告诉我我的代码有什么问题？在我的情况下，如何在 DataList 控件中实现 ZEBRA 表？

提前致谢

PS我的问题可能不清楚，所以如果需要澄清，我会更详细地解释。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-18T16:42:19.963

请参阅此相关问题：[在 Datalist 中创建表](https://stackoverflow.com/questions/1033317/creating-table-inside-datalist)

1.  您尚未`<tr>`在模板中指定标签，因此`DataList`只是生成孤立`<td>`标签

2.  您可以使用`RepeatLayout`值为 的属性`Table`来为您`DataList`生成一个开始和结束`<table>`标记。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-06-20T16:45:44.270

我知道这是一个老问题，但你应该设置`ItemStyle`和的`AlternatingItemStyle`属性，`asp:DataList`以便像这样获得你想要的条带 `ItemStyle="normalRow" AlternatingItemStyle="greenRow"`

您的 datalist 标记的开头应如下所示：

```
<style type="text/css">
.normalRow { background-color: white; }
.greenRow { background-color: green; }
</style>
<asp:DataList ID="dlStages" runat="server" DataKeyField="Priority" OnCancelCommand="dlStages_CancelCommand"
    OnEditCommand="dlStages_EditCommand" 
    OnUpdateCommand="dlStages_UpdateCommand" BorderWidth="2" 
     GridLines="Both" CellPadding="20" CellSpacing="20" Width="99%" 
    ItemStyle="normalRow" AlternatingItemStyle="greenRow"
    onitemdatabound="dlStages_ItemDataBound"> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2017-11-22T23:36:07.653

您可以在 DataList 控件的 CssClass 属性中使用**引导类：**

```
CssClass="table table-striped" 
```

然后，覆盖表条带：

```
.table-stripedCSS > tbody > tr:nth-child(odd) > td,
.table-stripedCSS > tbody > tr:nth-child(odd) > th {
    background-color:red;

    /*Choose your own color here*/
} 
```

更多信息：
[Bootstrap table striped：如何更改条纹背景颜色？](https://stackoverflow.com/questions/20825211/bootstrap-table-striped-how-do-i-change-the-stripe-background-colour)

# javascript - 将客户端 JS 连接到服务器端 NodeJS 应用程序

> ID：13937295
> 
> 赞同：1
> 
> 时间：2012-12-18T16:26:51.183
> 
> 标签：javascript, ajax, node.js, mongodb, socket.io

我完全是 NodeJS 的菜鸟，我正在尝试了解应用程序结构。我有一个使用 Socket.IO 和 MongoJS 的基本应用程序，它本质上是一个跟踪系统，可以从客户端脚本中提取变量并将它们存储在 Mongo 中。

这是我想象的它的工作方式：

*   用户在我们的 10 个站点中的 1 个上加载页面
*   该页面上的 JS 文件捕获引用 URL 和时间戳
*   然后通过 Socket.IO 将这 2 个值传递给 Node 应用程序
*   然后应用程序连接到 MongoDB 并存储值

这似乎很简单，但这就是我的困惑所在。在所有文档和示例中，我已经看到与 socket.io 的连接是通过应用程序中的 HTML 页面进行的。就我而言，唯一的客户端文件是收集跟踪信息的单个 javascript 文件。

这是我想使用客户端 JS 的 socket.io 连接到服务器的方式：

```
$.getScript('/socket.io/socket.io.js', function(data){
  console.log(data);
});

    var cmnPub = "Publishers.com"
    var socket = io.connect(document.location.href);
        socket.emit('adTracker', { 
            publisher: cmnPub, time : timeStamp, referingURL : document.location.href 
        }); 
```

这是我的服务器端代码：

```
var app = require('http').createServer(handler)
  , io = require('socket.io').listen(app)
  , fs = require('fs')

app.listen(1337);

io.configure(function () {
    io.set('authorization', function (handshakeData, callback) {
        if (handshakeData.xdomain) {
            callback('Cross-domain connections are not allowed');
        } else {
        callback(null, true);
        }
    });
});

function handler (req, res) {
  fs.readFile(__dirname + '/index.html',
  function (err, data) {
    if (err) {
      res.writeHead(500);
      return res.end('Error loading index.html');
    }

    res.writeHead(200);
    res.end(data);
  });
}

io.sockets.on('connection', function (socket) {
  socket.on('adTracker', function (data) {
var adRequestData = data;
var pass = ["bigbooks"];
var databaseUrl = "username:password@linus.mongohq.com:10006/node-test";
var collections = ["cmnads"]
var db = require("mongojs").connect(databaseUrl, collections);

db.cmnads.insert({adRequest : adRequestData}, {$set: {password: pass}}, function(err, updated) {
    if( err || !updated ) console.log("User not updated");
    else console.log("User updated");
    });
  });
}); 
```

我知道如果应用程序是本地的，上面的代码将填充我的 MongoDB 集合，但是一旦我尝试从另一个站点访问它，我就会看到以下错误：

> Uncaught SyntaxError: Unexpected token - myapp.js:1 <

经过进一步研究，我的服务器配置似乎是错误的，因为我的应用正在加载 index.html 页面，但我不确定我的配置应该是什么。如果我想从外部 URL 加载客户端 JS，然后连接到我的服务器以将跟踪传递到我的应用程序，应该如何设置我的服务器？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-18T16:46:48.250

JS 文件只是代码容器，您应该考虑执行这些 JS 文件中的代码的运行时。您显示的此代码是从服务器下载并在浏览器上执行的客户端代码。因此，您不是在代码中“连接”到 socket.io，而是连接到服务器。

如果您连接到“document.location.href”，根据您的服务器端代码，您将再次获取此 js 文件。您需要连接到包含服务器端逻辑的正确服务器 url，例如[http://socket.io/](http://socket.io/)

请发布您的服务器端代码和详细的错误日志以获得更详细的解决方案。

# asp.net - ASP.NET 下拉列表

> ID：13937298
> 
> 赞同：0
> 
> 时间：2012-12-18T16:27:11.377
> 
> 标签：asp.net, visual-studio-2010

而是使用基于查找表的查询填充下拉列表，有没有办法将查找中的所有记录作为数据源并简单地“转到”在查询中找到的记录?

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-18T16:35:04.753

我在这里拿了一个赃物，但听起来你有一个来自数据库的对象集合（为了争论，我们说员工），你想要一个下拉列表，该下拉列表将填充该集合中的一个字段。您可以使用 Linq 完成此操作。

```
var emps = from e in db.Employees
           select e;

var ddlSource = emps.Select(x =>
                            new ListItem {
                                              Text = x.LastName + ", " + x.FirstName,
                                              Value =  x.ID
                                         }; 
```

然后，您可以将 DropDownList 绑定到`ddlSource`IQueryable。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-18T17:36:12.637

我猜是您已经在数据库中选择了项目，并希望在填充下拉列表时选择它。考虑下面的例子

查看模型

```
public class TestVM 
{
        public int CategoryId { get; set; }
        public IEnumerable<SelectListItem> Categories { get; set; }
} 
```

在控制器中

```
public ActionResult Index()
{
            TestVM objTestVM = new TestVM();            
            objTestVM.Categories = new List<SelectListItem>() { 
                new SelectListItem() { Value="1", Text="Food"},
                new SelectListItem() { Value="2", Text="Movie"}
            };
            objTestVM.CategoryId = 2;//get this value from DB
            return View(objTestVM);
} 
```

在视图中

```
@model MvcApplication4.Models.TestVM
@using(Html.BeginForm())
{
@Html.DropDownListFor(m => m.CategoryId, Model.Categories, "--select--")
<input type="submit" value="submit" />
} 
```

现在它会自动在下拉列表中选择类别，在这种情况下为 2。如果选择了其他类别并提交页面，则新的 categoryid 将被发送回控制器发布操作。

# iphone - 如何删除多个 UIButton 或动态创建的特定 UIButton？

> ID：13937301
> 
> 赞同：-3
> 
> 时间：2012-12-18T16:27:20.637
> 
> 标签：iphone, objective-c, ios, uibutton

在我的应用程序中，在 UIButton Click 上，我需要动态创建多个 UIButton 并为此执行方法。

如何从创建的 UIButtons 中删除特定的 UIButton？按退格键或删除键？或者有没有其他方法可以删除 UIButton？

我的创建源代码

在 .h 文件中

```
NSMutableArray *selectedBtnarr; 
```

在 .m 文件中

```
-(void)Check
{
    CGPoint origin = note.frame.origin;
    NSString* head = [note.text substringToIndex:note.selectedRange.location];
    CGSize initialSize = [head sizeWithFont:note.font constrainedToSize:note.contentSize];
    NSUInteger startOfLine = [head length];

    NSString* tail = [head substringFromIndex:startOfLine];
    CGSize lineSize = [tail sizeWithFont:note.font forWidth:note.contentSize.width lineBreakMode:UILineBreakModeWordWrap];
    CGPoint cursor = origin;
    cursor.x += lineSize.width + 15;
    cursor.y += initialSize.height - lineSize.height - 130;

    checkbox = [[UIButton alloc] initWithFrame:CGRectMake(cursor.x,cursor.y,15,15)];
    [checkbox setBackgroundImage:[UIImage imageNamed:@"unchk.png"]forState:UIControlStateNormal];
    [checkbox setBackgroundImage:[UIImage imageNamed:@"chk.png"]forState:UIControlStateSelected];
    [checkbox setBackgroundImage:[UIImage imageNamed:@"chk.png"]forState:UIControlStateHighlighted];
    checkbox.adjustsImageWhenHighlighted=YES;
    [checkbox setTag:checkButtonCount];
    [checkbox addTarget:self action:@selector(ChkUnChk:) forControlEvents:UIControlEventTouchUpInside];
    [note addSubview:checkbox];

    NSString *xAxis=[NSString stringWithFormat:@"%f" ,checkbox.frame.origin.x];
    NSString *yAxis=[NSString stringWithFormat:@"%f" ,checkbox.frame.origin.y];
    [chkBoxX addObject:xAxis];
    [chkBoxY addObject:yAxis];
    NSString *tag=[NSString stringWithFormat:@"%d" ,checkButtonCount];
    [chkTag addObject:tag];
    checkButtonCount=checkButtonCount+1;

        }

-(void)ChkUnChk:(id)sender
    {
    UIButton *btn=(UIButton *)sender;
    NSString *Str=[NSString stringWithFormat:@"%d",btn.tag];
    BOOL flag=   [selectedBtnarr containsObject:Str];

    if (flag==YES)
    {
        [btn setBackgroundImage:[UIImage imageNamed:@"unchk.png"]    forState:UIControlStateNormal];
        [selectedBtnarr removeObject:Str];
    }
    else
    {
        [selectedBtnarr addObject:Str];
        [btn setBackgroundImage:[UIImage imageNamed:@"chk.png"] forState:UIControlStateNormal];
    }
    } 
```

但我不知道如何删除这个......

删除我的代码如下

```
- (BOOL)textView:(UITextView *)textView shouldChangeTextInRange:(NSRange)range replacementText:(NSString *)text
{
    const char * _char = [text cStringUsingEncoding:NSUTF8StringEncoding];
    int isBackSpace = strcmp(_char, "\b");

    if (isBackSpace == -8)
    {
        NSLog(@"backspace Detected");

        CGPoint origin = note.frame.origin;
        NSString* head = [note.text substringToIndex:note.selectedRange.location];
        CGSize initialSize = [head sizeWithFont:note.font constrainedToSize:note.contentSize];
        NSUInteger startOfLine = [head length];

        NSString* tail = [head substringFromIndex:startOfLine];
        CGSize lineSize = [tail sizeWithFont:note.font forWidth:note.contentSize.width lineBreakMode:UILineBreakModeWordWrap];
        CGPoint cursor = origin;
        cursor.x += lineSize.width + 15;
        cursor.y += initialSize.height - lineSize.height - 130;

        NSLog(@"Cursor Place X : %f   Y: %f",cursor.x,cursor.y);

        int tagcoount=[chkTag count];

        for(int a=0;a<tagcoount;a++)
        {

            NSString *tag=[NSString stringWithFormat:@"%@" ,[chkTag objectAtIndex:a]];

            int chkcnt=[tag intValue];

            if(cursor.x==checkbox.frame.origin.x && cursor.y==checkbox.frame.origin.y && a==checkbox.tag)
                {
                    [[checkbox viewWithTag:chkcnt] removeFromSuperview];
                    [chkTag removeObjectAtIndex:chkcnt];

                }
        }
} 
```

但它只删除最后一个 UIButton ，当光标仅在当前位置时也是如此......给我正确的想法

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-18T16:31:31.280

使用 an`NSMutableArray`来存储`UIButton`对象。`UIButton`使用其方法为每个按钮分配一个标签号，`setTag:`以识别单个按钮并相应地删除它们。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-18T16:46:06.393

根据您的要求：请从我的 Mac[项目](http://www.keepandshare.com/doc/view.php?id=5296188&da=y)（不在 ios 中）获得这个想法，但您会觉得这很方便。

```
@interface AppDelegate : NSObject <NSApplicationDelegate>

@property (assign) IBOutlet NSWindow *window;

@property(strong)NSMutableArray *buttons;
- (IBAction)add:(id)sender;
- (IBAction)remove:(id)sender;
@property (strong) IBOutlet NSPopUpButton *popUp;
@property (strong) IBOutlet NSView *buttonView;

@end 
```

* * *

```
@implementation AppDelegate

- (void)applicationDidFinishLaunching:(NSNotification *)aNotification{
    _buttons=[NSMutableArray new];

}

-(void)clearButtonSubview{
    for (NSInteger i=0; i<[[_buttonView subviews]count]; i++) {
        NSView *view=[[_buttonView subviews]objectAtIndex:i];
        [view removeFromSuperview];
    }
}

-(void)drawButtons{

    //when u add, remove prev drawn and redraw all.
    [self clearButtonSubview];

    for (NSInteger i=0; i<[_buttons count]; i++) {
        NSButton *button=[_buttons objectAtIndex:i];
        [button setFrame:NSMakeRect(i*55, 10, 50, 20)];
        [_buttonView addSubview:button];

        //add buttons in popup
        [_popUp addItemWithTitle:[NSString stringWithFormat:@"%ld",button.tag]];
    }

}

- (IBAction)add:(id)sender {

    [_popUp removeAllItems];

    NSButton *bttn=[NSButton new];
    //get last button tag
    NSInteger lastButtonTag=[[_buttons lastObject] tag];

    [bttn setTag:lastButtonTag+1];
    [bttn setTitle:[NSString stringWithFormat:@"%ld",[bttn tag]]];

    [_buttons addObject:bttn];

    [self drawButtons];
}

- (IBAction)remove:(id)sender {
    NSInteger indexOfButtonToRemove;
    NSString *selectedButton=[_popUp titleOfSelectedItem];

    for (NSInteger index=0;index<[_buttons count];index++) {
        NSButton *button=[_buttons objectAtIndex:index];

        if ([[button title]isEqualToString:selectedButton]) {
            indexOfButtonToRemove=index;
            break;
        }
    }

    [_buttons removeObjectAtIndex:indexOfButtonToRemove];
    [_popUp removeItemAtIndex:indexOfButtonToRemove];

    [self clearButtonSubview];
    [self drawButtons];
}

@end 
```

# macos - 在 Mac OS 上从没有 AVAsset 的视频生成缩略图

> ID：13937304
> 
> 赞同：1
> 
> 时间：2012-12-18T16:27:27.500
> 
> 标签：macos, video, avurlasset, nsfilewrapper

我在这里有一个基于文档的应用程序，我需要从 NSFileWrappers 中可用的视频生成缩略图。问题是我无法从文件包装器中获取文件 URL，而且我似乎无法创建没有 URL 的 AVURLAsset。

有人对这样做的替代方法有任何建议吗？与 AVAssetImageGenerator 创建视频缩略图的方式不同，还是从文件包装器中的数据创建 AVAsset 的某种方式？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-18T08:57:51.993

所以事实证明没有办法做到这一点，除了将文件保存在新的地方，然后从中生成缩略图。

所以我所做的是，当我将视频添加到我的包中时，我会根据添加文件的位置创建缩略图（我将文件复制到我自己的自定义包中）。

# javascript - 带有破折号的 Tablesorter 自定义解析器

> ID：13937310
> 
> 赞同：1
> 
> 时间：2012-12-18T16:27:52.463
> 
> 标签：javascript, jquery, tablesorter

我混合了整数、双精度和几个破折号字符，我需要使用这个插件对其进行排序。

这是我的一个数据表的样子：

```
5,841
-
121
-
1,102
-
-
743
-
144
9,065
-
2,230
200
6,450
209
0
1
45
54,463
162
8,222 
```

我希望输出是这样的：

```
0
1
45
121
162
144
200
209
743 
1,102 
2,230 
5,841
6,450 
8,222
9,065
54,463
-
-
-
-
-
- 
```

或者 ：

```
-
-
-
-
-
-
0
1
45
121
162
144
200
209
743 
1,102 
2,230 
5,841
6,450 
8,222
9,065
54,463 
```

我试过这个解析器，不太工作：

```
jQuery.tablesorter.addParser({
  id: "commaDigit",
  is: function(s, table) {
    var c = table.config;
    return jQuery.tablesorter.isDigit(s.replace(/,/g, ""), c);
  },
  format: function(s) {
    return jQuery.tablesorter.formatFloat(s.replace(/,/g, ""));
  },
  type: "numeric"
});

$('#table_list').tablesorter({
        headers : { 
                0 : {sorter:'commaDigit'},
                1 : {sorter:'commaDigit'},
                2 : {sorter:'commaDigit'}
            }
    }); 
```

**更新 ：**

我不知道这是否相关，但我的数据是这样放置的：

```
<tr>
<td><span>122</span><td>
<td><span>12,2</span><td>
</tr> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-19T17:16:54.413

如果您希望将破折号视为最大值，只需将它们设置为该值 ( `Number.MAX_VALUE`)。否则，您可以将其设为负数 ( `-Number.MAX_VALUE`)。这是一个[演示](http://jsfiddle.net/Mottie/T9Bc3/4/)。

```
$.tablesorter.addParser({
  id: "commaDigit",
  is: function(s, table) {
    return false; // no need to test since you're manually setting it
  },
  format: function(s) {
    return ($.trim(s) === '-') ? Number.MAX_VALUE : $.tablesorter.formatFloat(s.replace(/,/g, ""));
  },
  type: "numeric"
}); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-18T17:01:05.133

您的脚本似乎工作正常

[示例 jsfiddle](http://jsfiddle.net/T9Bc3/)

您可能需要检查您`<table>`是否有一个`<thead>`带有标题的部分，否则插件将无法工作。

如果您使用的是 asp.net 和 GridView，则必须明确将其设置为使用`<thead>`（请参阅：[How can I use jquery tablesorter with an asp.net gridview? - 代码日志](https://stackoverflow.com/questions/3978990/how-can-i-use-jquery-tablesorter-with-an-asp-net-gridview)）

# wcf - 将 WCF 服务上传到托管 somee.com？

> ID：13937312
> 
> 赞同：1
> 
> 时间：2012-12-18T16:27:55.100
> 
> 标签：wcf, configuration, web-config, hosting, host

链接（http://futuregreatdoctor.somee.com/WcfSvcSiteMCAT/service.svc）它工作。但我将我的服务上传给某人，它不起作用:( (http://nck.somee.com/Server/Service1.scv)

网页配置

```
<?xml version="1.0"?>
<configuration>
  <system.web>
    <compilation debug="true" targetFramework="4.0" />
  </system.web>
  <system.serviceModel>
    <behaviors>
      <serviceBehaviors>
        <behavior>
          <serviceMetadata httpGetEnabled="true"/>
          <serviceDebug includeExceptionDetailInFaults="false"/>
        </behavior>
      </serviceBehaviors>
      <endpointBehaviors>
        <behavior name="web">
          <webHttp/>
        </behavior>
      </endpointBehaviors>
    </behaviors>

    <serviceHostingEnvironment  multipleSiteBindingsEnabled="true">
      <baseAddressPrefixFilters>
        <add prefix="http://nck.somee.com/Server/"/>
      </baseAddressPrefixFilters>
    </serviceHostingEnvironment>

    <services>
      <service name="Server.Service1">
        <endpoint address="" binding="webHttpBinding" contract="Server.IService1" behaviorConfiguration="web"/>
        <endpoint address="mex"
                  binding="mexHttpBinding"
                  contract="IMetadataExchange" />
      </service>
    </services>

  </system.serviceModel>
 <system.webServer>
     <handlers>
       <add name="Service1.svc" verb="Service1" path="Service1.svc" type="System.ServiceModel.Activation.HttpHandler, System.ServiceModel, Version=3.0.0.0, Culture=neutral, PublicKeyToken=b77a5c561934e089" />
      </handlers>
    <modules runAllManagedModulesForAllRequests="true"/>
  </system.webServer>

</configuration> 
```

请帮帮我！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-11T23:31:14.230

[http://nck.somee.com/Server/Service1.scv](http://nck.somee.com/Server/Service1.scv)你拼错了。[当我做http://nck.somee.com/Server/Service1.svc](http://nck.somee.com/Server/Service1.svc)时我可以看到它很好

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-19T03:02:18.607

[打开http://nck.somee.com/Server/Service1.scv](http://nck.somee.com/Server/Service1.scv)时看到 404 错误

这很可能意味着 IIS 配置不正确。

尝试将静态文件（html 或 txt）放在存储 Service1.scv 的文件夹中。

确保您可以使用[http://nck.somee.com/Server/myfile.htm 之](http://nck.somee.com/Server/myfile.htm)类的 URL 打开该静态文件，以检查 IIS 是否看到您的文件夹。

更新：

IIS 显示用于查找服务的路径 - d:\DZHosts\LocalUser\Kycomputer555\www.nck.somee.com\Server\Service1.scv

是正确的路径吗？

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-09-13T04:07:20.127

在 IIS 中托管 WCF 服务 如果您的 WCF 服务具有扩展名 .svc，则需要在 Web.Config 文件中为该扩展名添加托管处理程序。

Web.Config Handler 配置示例：

v3

v4

[http://somee.com/doka/DoHelpTopics.aspx?docode=false&thnid=113](http://somee.com/doka/DoHelpTopics.aspx?docode=false&thnid=113)

# service - 将 Angular HTTP.get 函数转换为服务

> ID：13937318
> 
> 赞同：46
> 
> 时间：2012-12-18T16:28:19.020
> 
> 标签：service, angularjs

我正在尝试将我的 Angular`HTTP.get`函数转换`controllers.js`为`services.js`.

我发现的示例都有相互冲突的实现服务的方式，并且它们的名称选择令人困惑。此外，服务的实际 Angular 文档使用的语法与所有示例不同。我知道这非常简单，但请在这里帮助我。

我有`app.js`, `controllers.js`, `services.js`, `filters.js`.

**应用程序.js**

```
angular.module('MyApp', []).
    config(['$routeProvider', function($routeProvider)
        {
            $routeProvider.
                when('/bookslist', {templateUrl: 'partials/bookslist.html', controller:             BooksListCtrl}).
                otherwise({redirectTo: '/bookslist'});
        }
    ]); 
```

**控制器.js**

```
function BooksListCtrl($scope,$http) {
    $http.get('books.php?action=query').success(function(data) {
        $scope.books = data;
    });

    $scope.orderProp = 'author';
} 
```

* * *

## 回答 #1

> 赞同：121
> 
> 时间：2012-12-18T19:10:36.590

考虑模块和依赖注入。

所以，假设你有这三个文件

```
<script src="controllers.js"></script>
<script src="services.js"></script>
<script src="app.js"></script> 
```

你需要三个模块

## 1\. 主应用模块

```
angular.module('MyApp', ['controllers', 'services'])
  .config(['$routeProvider', function($routeProvider){
    $routeProvider
      .when('/bookslist', {
        templateUrl: 'partials/bookslist.html', 
        controller:  "BooksListCtrl"
      })
      .otherwise({redirectTo: '/bookslist'});
  }]); 
```

请注意，其他两个模块被注入到主模块中，因此它们的组件可用于整个应用程序。

## 2.控制器模块

目前您的控制器是一个全局函数，您可能希望将其添加到控制器模块中

```
angular.module('controllers',[])
  .controller('BooksListCtrl', ['$scope', 'Books', function($scope, Books){
    Books.get(function(data){
      $scope.books = data;
    });

    $scope.orderProp = 'author';
  }]); 
```

`Books`传递给控制器​​功能，并由注入**主**应用程序模块的服务模块提供。

## 3\. 服务模块

这是您定义`Books`服务的地方。

```
angular.module('services', [])
  .factory('Books', ['$http', function($http){
    return{
      get: function(callback){
          $http.get('books.json').success(function(data) {
          // prepare data here
          callback(data);
        });
      }
    };
  }]); 
```

有多种注册服务的方法。

*   **service**：传递一个构造函数（我们可以称它为类）并返回该类的一个实例。
*   **provider**：最灵活和可配置的，因为它使您可以访问注入器在实例化服务时调用的函数
*   **factory**：传递一个注入器在实例化服务时调用的函数。

我更喜欢使用该`factory`函数并让它返回一个对象。在上面的示例中，我们只返回一个带有`get`传递成功回调函数的对象。您也可以更改它以传递错误函数。

* * *

**编辑**在评论中回答@yair 的请求，这是您将服务注入指令的方式。

# 4\. 指令模块

我按照惯用的模式，先添加js文件

```
<script src="directives.js"></script> 
```

然后定义一个新模块并注册东西，在这种情况下是一个指令

```
angular.module('directives',[])
  .directive('dir', ['Books', function(Books){
    return{
      restrict: 'E',
      template: "dir directive, service: {{name}}",
      link:function(scope, element, attrs){
        scope.name = Books.name;
      }
    };
  }]); 
```

将**指令**模块注入*到*.`app.js`

```
angular.module('MyApp', ['controllers', 'services', 'directives']) 
```

您可能希望遵循不同的策略并将模块注入*指令模块*

请注意，几乎所有内容的语法*内联依赖注释都是相同的。*该指令注入了相同的 Books 服务。

**更新 Plunker**：[http ://plnkr.co/edit/mveUM6YJNKIQTbIpJHco?p=preview](http://plnkr.co/edit/mveUM6YJNKIQTbIpJHco?p=preview)

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2016-07-21T19:58:12.193

这是服务服务的实现，而不是上面提到的工厂服务。希望能帮助到你。

**应用程序.js**

```
angular.module('myApp', ['controllers', 'services'])
 .config(['$routeProvider', function($routeProvider){
    $routeProvider
      .when('/bookslist', {
        templateUrl: 'partials/bookslist.html', 
        controller:  "BooksListCtrl"
      })
      .otherwise({redirectTo: '/bookslist'});
  }]); 
```

**服务.js**

```
angular.module('services', [])
  .service('books', ['$http', function($http){
      this.getData = function(onSuccess,onError){
          $http.get('books.json').then(
              onSuccess,onError);
      }  
  }]); 
```

**控制器.js**

```
angular.module('controllers',[])
    .controller('BooksListCtrl', ['$scope', 'books', function($scope, books){
       $scope.submit = function(){

        $scope.books = books.getData($scope.onSuccess,$scope.onError);
       }
           $scope.onSuccess = function(data){
           console.log(data);
           $scope.bookName = data.data.bookname;
           }

           $scope.onError = function(error){
               console.log(error);
           }
  }]); 
```

# c# - 谷歌地图边界多边形

> ID：13937323
> 
> 赞同：0
> 
> 时间：2012-12-18T16:28:26.350
> 
> 标签：c#, javascript, google-maps, geolocation

我需要能够进行空间查询以确定多边形内是否存在纬度/经度坐标。我知道您可以定义边界**框**并进行类似的查询，但是您可以对自定义形状执行相同的操作吗？

作为一个过于简化的示例，假设我需要能够确定纬度/经度点 (X,Y) 是否在美国西海岸 20 英里范围内。假设我已经有办法在 20 英里外画一条与海岸“平行”的线，并将这条线连接到顶部和底部的海岸线。我想测试点 (X,Y) 是否在由这些线界定的多边形内。

这可以使用本机 Maps API 吗？如果没有，是否有其他插件可以让我这样做？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-18T17:18:28.883

[Google Maps API v3](https://developers.google.com/maps/documentation/javascript/tutorial)包含[containsLocation 方法](https://developers.google.com/maps/documentation/javascript/reference#poly)，该方法接受 LatLng 和 Polygon 并返回布尔值。不确定您所说的“原生 Maps API”是什么意思。

# php - 写入数据并忽略重复项。

> ID：13937324
> 
> 赞同：0
> 
> 时间：2012-12-18T16:28:29.667
> 
> 标签：php, api, foursquare

我目前正在使用foursquare API。每次我运行以下 PHP 脚本时，它都会获取用户配置文件中显示的最新签入并将其写入文本文件。文本文件的每个条目都用逗号分隔。

我的问题是，我可以每分钟运行 PHP 文件 5 次，它会获取与它已经获取的相同的签入。我想做的是让下面的php脚本读取显示在foursquare JSON中的用户的最新签到，如果它已经在此之前条目的文本文件中聚合，它会忽略它并且不会添加到文本文件中。

```
<?php 
$charlotte = json_decode(file_get_contents("https://api.foursquare.com/v2/users/5464313?oauth_token=2ZO1PQOUAD5SXRAJOLZVH53RBQ1EB2C23FE2GUZLJYQUJ3SY&v=20121123"));
$venuename = $charlotte->response->user->checkins->items[0]->venue->name;
$file = 'charlotte.txt';
$current = file_get_contents($file);
$current .= $venuename.',';
file_put_contents($file, $current);
?>

<?php

$arran = json_decode(file_get_contents("https://api.foursquare.com/v2/users/1050511?oauth_token=2ZO1PQOUAD5SXRAJOLZVH53RBQ1EB2C23FE2GUZLJYQUJ3SY&v=20121109"));
$venuename = $arran->response->user->checkins->items[0]->venue->name;
$file = 'arran.txt';
$current = file_get_contents($file);
$current .= $venuename.',';
file_put_contents($file, $current);
?> 
```

当 PHP 脚本运行并输入最近签入的名称时，每个用户的文本文件的外观。

```
Venue Name, Venue Name, Venue Name, Venue Name 
```

任何帮助将非常感激！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-18T16:30:37.983

我假设 Foursquare 会为每次签到返回一个 ID。在遍历 API 结果时，您可以只检查 ID 是否与文本文件中的最后一个 ID 匹配，如果不匹配，则假定它是新的签入，并将其写入文件。

# gdata-api - 是否可以通过 API 更改 Google 群组的电子邮件地址？

> ID：13937326
> 
> 赞同：1
> 
> 时间：2012-12-18T16:28:31.573
> 
> 标签：gdata-api, google-api-client, google-api-python-client, google-provisioning-api

我正在尝试找到一种通过 api 重命名（更改电子邮件地址又名组 ID）谷歌组的方法。使用 python 客户端库和配置 api 我能够修改组名称和描述，并且我使用组设置 api 来修改组的设置。有没有办法更改电子邮件地址？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-18T17:18:40.633

组没有像用户一样的组重命名功能。但是，使用组设置和供应 API，您可以捕获大部分组细节并将其迁移到新组。你会失去：

-群组存档

-经理（仅显示为成员）

- 电子邮件递送（立即、摘要、不递送等）

# cuda - GPU上的浮点数除法与CPU上的不同

> ID：13937328
> 
> 赞同：9
> 
> 时间：2012-12-18T16:28:35.787
> 
> 标签：cuda, gpu

当我在 GPU 上划分两个浮点数时，结果是`0.196405`. 当我在 CPU 上划分它们时，结果是`0.196404`. 使用计算器的实际值为`0.196404675`。如何使 GPU 和 CPU 上的划分相同？

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-12-19T08:27:23.383

正如对另一个答案的评论所暗示的那样，有很多原因导致在 CPU 和 GPU 上运行的浮点计算获得相同的结果是不现实的。它比这更强大：你不能假设当相同的源代码针对不同的目标架构（例如 x86 或 x64）或使用不同的优化级别编译时，FP 结果会相同。

事实上，如果您的代码是多线程的，并且 FP 操作从一次运行到下一次以不同的顺序执行，那么在 EXACT SAME SYSTEM 上运行的 EXACT SAME EXECUTABLE 可能会从一次运行到下一次产生略有不同的结果。

一些原因包括但不限于：

*   浮点运算不是关联的，因此看似良性的重新排序（例如上面提到的多线程的竞争条件）可能会改变结果；
*   不同的架构在不同的条件下支持不同级别的精度和舍入（即编译器标志、控制字与每条指令）；
*   不同的编译器对语言标准的解释不同，并且
*   有些架构支持 FMAD（融合乘加），有些不支持。

请注意，出于本次讨论的目的，CUDA 的 JIT 编译器（使 PTX 代码对尚不可用的 GPU 架构具有前瞻性的魔法）肯定会扰乱 FP 结果。

尽管有上述情况，但您必须编写健壮的 FP 代码。

在我今天写这篇文章时，我相信 CUDA GPU 的浮点运算架构比任何当代 CPU 都设计得更好。GPU 包括对 16 位浮点数和 FMAD 的本机 IEEE 标准 (c. 2008) 支持，对非规范化具有全速支持，并启用基于每条指令的舍入控制，而不是其设置对所有 FP 指令有副作用的控制字并且改变起来很昂贵。

相比之下，CPU 具有过多的每个线程状态和较差的性能，除非使用 SIMD 指令，主流编译器在利用这些指令时表现不佳（因为矢量化标量 C 代码以利用此类指令集比构建一个CUDA 等伪标量架构的编译器）。如果要相信维基百科的[历史](http://en.wikipedia.org/wiki/FMA_instruction_set#History)页面，英特尔和 AMD 似乎以一种无法描述的方式完全搞砸了添加 FMAD 支持。

您可以在此处找到有关 NVIDIA GPU 中浮点精度和 IEEE 支持的精彩讨论：

[https://developer.nvidia.com/content/precision-performance-floating-point-and-ieee-754-compliance-nvidia-gpus](https://developer.nvidia.com/content/precision-performance-floating-point-and-ieee-754-compliance-nvidia-gpus)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-18T19:00:12.050

你没有。您永远不应该假设浮点值将完全等于您在数学运算后所期望的值。它们仅被定义为在指定精度下是正确的，并且会因处理器而异，无论该处理器是 CPU 还是 GPU。例如，x86 处理器实际上将默认执行 80 位精度的浮点计算，然后将结果截断为请求的精度。浮点数的等价比较应始终使用容差，因为不能保证任何两个处理器（甚至通过不同但在数学上等效的指令序列的同一处理器）都会产生相同的结果。例如，当且仅当 | 时，浮点数 a 和 b 应该被认为是相等的。a - b | <

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-19T09:13:08.757

哪个 GPU 用于计算？

如果使用单精度浮点运算，通常尾数部分的第六位会有+1/-1的精度误差。这是因为 GPU 中的舍入误差。

如果您使用双精度，您将获得 CPU 中的精确精度。但速度几乎是浮点精度的一半，内存使用量将是 2 倍。**现在，从基于 FERMI 的架构开始，NVIDIA GPU 开始支持双精度点计算。**

# c++ - 在 Python 中使用 C++ 库函数

> ID：13937329
> 
> 赞同：1
> 
> 时间：2012-12-18T16:28:40.310
> 
> 标签：c++, python, windows, dll, pyqt4

我使用 MS Visual Studio 2010 为 Win x86 创建了一个库。我无法更改库的内容以使用 Boost.Python。

我使用 Python 3.3 和 PyQt4 来创建接口，但不限于这些版本。我需要调用函数并从所述 C++ 库中获取对象。包装要从 python 调用的 C++ 库的最简单方法是什么？

我想，这样的问题已经被问过了，但我似乎找不到。

下面是一个头文件的例子：

```
namespace SDK 
{
    class IMethod 
    {
    public:
        virtual IModel* CreateModel(const IBuffer* pBuffer, const char* text) = 0;
    };

    extern __declspec(dllexport) SDK::IMethod* CreateMethod(MethodID integer);
} 
```

# android - 错误致命异常主要

> ID：13937331
> 
> 赞同：0
> 
> 时间：2012-12-18T16:28:46.927
> 
> 标签：android

我已经为我的项目创建了一个带有图像按钮的菜单页面，昨晚当我在三星手机上厌倦了它时，一切似乎都工作正常，没有错误所有链接都有效，但是今天我试图在我的模拟器上运行相同的应用程序出现这些错误我没有对代码进行任何更改，有人可以帮助我哪里出错我有以下 XML 和 JAVA 的代码

```
import android.app.Activity;
import android.content.Intent;
import android.os.Bundle;
import android.view.View;
import android.widget.ImageButton;

public class Menu extends Activity {

@Override
protected void onCreate(Bundle savedInstanceState) {
    // TODO Auto-generated method stub
    super.onCreate(savedInstanceState);
    setContentView(R.layout.menu);

    ImageButton Bmi = (ImageButton) findViewById(R.id.ibBmi);
       Bmi.setOnClickListener(new View.OnClickListener() {

        @Override
        public void onClick(View view) {
        Intent ourIntent = new Intent(view.getContext(), Bmi.class);                
             startActivityForResult(ourIntent, 0);

                }

    });

       ImageButton Camera = (ImageButton) findViewById(R.id.ibCamera);
       Camera.setOnClickListener(new View.OnClickListener() {

        @Override
        public void onClick(View view) {
       Intent ourIntent = new Intent(view.getContext(), Camera.class);
             startActivityForResult(ourIntent, 0);

                }

    });

       ImageButton Resizeme = (ImageButton) findViewById(R.id.ibResizeme);
       Resizeme.setOnClickListener(new View.OnClickListener() {

        @Override
        public void onClick(View view) {
        Intent ourIntent = new Intent(view.getContext(), Resizeme.class);
             startActivityForResult(ourIntent, 0);

                }

    });
       ImageButton Maps = (ImageButton) findViewById(R.id.ibMaps);
       Maps.setOnClickListener(new View.OnClickListener() {

        @Override
        public void onClick(View view) {
        Intent ourIntent = new Intent(view.getContext(), Maps.class);
             startActivityForResult(ourIntent, 0);

                }

    });

    }

}

 <RelativeLayout xmlns:android="http://schemas.android.com/apk/res/android"
android:layout_width="match_parent"
android:layout_height="match_parent"
android:orientation="vertical" 
android:background="@drawable/lightbackground">

    <ImageButton
        android:id="@+id/ibCamera"
        android:layout_width="125dp"
        android:layout_height="97dp"
        android:layout_alignParentRight="true"
        android:layout_alignParentTop="true"
        android:layout_marginRight="20dp"
        android:layout_marginTop="42dp"
        android:background="@null"
        android:contentDescription="@string/Camera"
        android:scaleType="fitXY"
        android:src="@drawable/camera1" />

    <ImageButton
        android:id="@+id/bStayfit"
        android:layout_width="125dp"
        android:layout_height="97dp"
        android:layout_alignLeft="@+id/ibResizeme"
        android:layout_alignParentBottom="true"
        android:background="@null"
        android:contentDescription="@string/stayfit"
        android:scaleType="fitXY"
        android:src="@drawable/abs_cartoon" />

    <ImageButton
        android:id="@+id/ibMaps"
        android:layout_width="125dp"
        android:layout_height="97dp"
        android:layout_alignLeft="@+id/bBulkup"
        android:layout_alignParentBottom="true"
        android:background="@null"
        android:contentDescription="@string/Maps"
        android:scaleType="fitXY"
        android:src="@drawable/maps1" />

    <ImageButton
        android:id="@+id/ibBmi"
        android:layout_width="125dp"
        android:layout_height="97dp"
        android:layout_alignBottom="@+id/ibCamera"
        android:layout_alignParentLeft="true"
        android:layout_marginLeft="24dp"
        android:background="@null"
        android:contentDescription="@string/BMI"
        android:src="@drawable/bmi" />

    <ImageButton
        android:id="@+id/ibResizeme"
        android:layout_width="125dp"
        android:layout_height="97dp"
        android:layout_above="@+id/bStayfit"
        android:layout_alignLeft="@+id/ibBmi"
        android:layout_marginBottom="26dp"
        android:background="@null"
        android:contentDescription="@string/resizeme"
        android:scaleType="fitXY"
        android:src="@drawable/looseweight" />

    <ImageView
        android:id="@+id/imageView2"
        android:layout_width="130dp"
        android:layout_height="130dp"
        android:layout_alignBottom="@+id/imageView1"
        android:layout_alignLeft="@+id/ibCamera"
        android:layout_alignRight="@+id/ibCamera"
        android:src="@drawable/cameralogo" />

    <ImageView
        android:id="@+id/imageView3"
        android:layout_width="130dp"
        android:layout_height="130dp"
        android:layout_above="@+id/ibResizeme"
        android:layout_alignParentLeft="true"
        android:layout_below="@+id/ibBmi"
        android:layout_toLeftOf="@+id/ibCamera"
        android:src="@drawable/resizemelogo" />

    <ImageButton
        android:id="@+id/bBulkup"
        android:layout_width="125dp"
        android:layout_height="100dp"
        android:layout_alignLeft="@+id/ibCamera"
        android:layout_below="@+id/imageView3"
        android:background="@null"
        android:contentDescription="@string/bulkup"
        android:scaleType="fitXY"
        android:src="@drawable/dumbbell1" />

    <ImageView
        android:id="@+id/imageView4"
        android:layout_width="130dp"
        android:layout_height="130dp"
        android:layout_alignBottom="@+id/imageView3"
        android:layout_alignRight="@+id/ibCamera"
        android:layout_below="@+id/ibCamera"
        android:layout_toRightOf="@+id/imageView3"
        android:src="@drawable/bulkuplogo" />

    <ImageView
        android:id="@+id/imageView5"
        android:layout_width="130dp"
        android:layout_height="130dp"
        android:layout_alignRight="@+id/bStayfit"
        android:layout_alignTop="@+id/ibResizeme"
        android:layout_marginTop="45dp"
        android:src="@drawable/stayfitlogo" />

    <ImageView
        android:id="@+id/imageView6"
        android:layout_width="140dp"
        android:layout_height="140dp"
        android:layout_alignBottom="@+id/imageView5"
        android:layout_alignParentRight="true"
        android:src="@drawable/mapslogo" />

    <ImageView
        android:id="@+id/imageView1"
        android:layout_width="130dp"
        android:layout_height="130dp"
        android:layout_above="@+id/ibBmi"
        android:layout_alignRight="@+id/ibBmi"
        android:src="@drawable/bmilogo" />

</RelativeLayout>

 The errors I am getting are: 
```

作为一个新用户，我无法上传图片，但我得到的主要错误是致命异常主要如下：

```
12-18 16:20:04.825: E/AndroidRuntime(1024): java.lang.RuntimeException: Unable to start activity ComponentInfo{com.example.gethench/com.example.gethench.Menu}: android.view.InflateException: Binary XML file line #54: Error inflating class <unknown>
12-18 16:20:04.825: E/AndroidRuntime(1024):     at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:2059)
12-18 16:20:04.825: E/AndroidRuntime(1024):     at android.app.ActivityThread.handleLaunchActivity(ActivityThread.java:2084)
12-18 16:20:04.825: E/AndroidRuntime(1024):     at android.app.ActivityThread.access$600(ActivityThread.java:130)
12-18 16:20:04.825: E/AndroidRuntime(1024):     at android.app.ActivityThread$H.handleMessage(ActivityThread.java:1195)
12-18 16:20:04.825: E/AndroidRuntime(1024):     at android.os.Handler.dispatchMessage(Handler.java:99)
12-18 16:20:04.825: E/AndroidRuntime(1024):     at android.os.Looper.loop(Looper.java:137)
12-18 16:20:04.825: E/AndroidRuntime(1024):     at android.app.ActivityThread.main(ActivityThread.java:4745)
12-18 16:20:04.825: E/AndroidRuntime(1024):     at java.lang.reflect.Method.invokeNative(Native Method)
12-18 16:20:04.825: E/AndroidRuntime(1024):     at java.lang.reflect.Method.invoke(Method.java:511)
12-18 16:20:04.825: E/AndroidRuntime(1024):     at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:786)
12-18 16:20:04.825: E/AndroidRuntime(1024):     at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:553)
12-18 16:20:04.825: E/AndroidRuntime(1024):     at dalvik.system.NativeStart.main(Native Method)
12-18 16:20:04.825: E/AndroidRuntime(1024): Caused by: android.view.InflateException: Binary XML file line #54: Error inflating class <unknown>
12-18 16:20:04.825: E/AndroidRuntime(1024):     at android.view.LayoutInflater.createView(LayoutInflater.java:613)
12-18 16:20:04.825: E/AndroidRuntime(1024):     at com.android.internal.policy.impl.PhoneLayoutInflater.onCreateView(PhoneLayoutInflater.java:56)
12-18 16:20:04.825: E/AndroidRuntime(1024):     at android.view.LayoutInflater.onCreateView(LayoutInflater.java:660)
12-18 16:20:04.825: E/AndroidRuntime(1024):     at android.view.LayoutInflater.createViewFromTag(LayoutInflater.java:685)
12-18 16:20:04.825: E/AndroidRuntime(1024):     at android.view.LayoutInflater.rInflate(LayoutInflater.java:746)
12-18 16:20:04.825: E/AndroidRuntime(1024):     at android.view.LayoutInflater.inflate(LayoutInflater.java:489)
12-18 16:20:04.825: E/AndroidRuntime(1024):     at android.view.LayoutInflater.inflate(LayoutInflater.java:396)
12-18 16:20:04.825: E/AndroidRuntime(1024):     at android.view.LayoutInflater.inflate(LayoutInflater.java:352)
12-18 16:20:04.825: E/AndroidRuntime(1024):     at com.android.internal.policy.impl.PhoneWindow.setContentView(PhoneWindow.java:256)
12-18 16:20:04.825: E/AndroidRuntime(1024):     at android.app.Activity.setContentView(Activity.java:1867)
12-18 16:20:04.825: E/AndroidRuntime(1024):     at com.example.gethench.Menu.onCreate(Menu.java:18)
12-18 16:20:04.825: E/AndroidRuntime(1024):     at android.app.Activity.performCreate(Activity.java:5008)
12-18 16:20:04.825: E/AndroidRuntime(1024):     at android.app.Instrumentation.callActivityOnCreate(Instrumentation.java:1079)
12-18 16:20:04.825: E/AndroidRuntime(1024):     at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:2023)
12-18 16:20:04.825: E/AndroidRuntime(1024):     ... 11 more
12-18 16:20:04.825: E/AndroidRuntime(1024): Caused by: java.lang.reflect.InvocationTargetException
12-18 16:20:04.825: E/AndroidRuntime(1024):     at java.lang.reflect.Constructor.constructNative(Native Method)
12-18 16:20:04.825: E/AndroidRuntime(1024):     at java.lang.reflect.Constructor.newInstance(Constructor.java:417)
12-18 16:20:04.825: E/AndroidRuntime(1024):     at android.view.LayoutInflater.createView(LayoutInflater.java:587)
12-18 16:20:04.825: E/AndroidRuntime(1024):     ... 24 more 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-18T16:58:55.433

您的布局似乎在几个按钮之间有多种关系。您是否尝试过在 Eclipse 中打开布局？我猜您以某种方式在其中一些位置之间创建了不兼容的位置（但是，由于您已经引用了几个可绘制对象，因此您比其他任何试图提供帮助的人更容易找到它们）

# .htaccess - .htaccess 使用 mydomain.com/mypage/ 调用 index.php

> ID：13937335
> 
> 赞同：0
> 
> 时间：2012-12-18T16:28:58.550
> 
> 标签：.htaccess, mod-rewrite

我的 .htaccess 包含以下代码，以便使用此 URL [http://www.example.com/contact.html](http://www.example.com/contact.html)调用 index.php?pname=contact ：

```
<IfModule mod_rewrite.c>
RewriteEngine On
RewriteBase /

RewriteCond %{REQUEST_FILENAME} !-f
RewriteCond %{REQUEST_FILENAME} !-d
RewriteRule ^/(.*)\.html$ ?pname=$1 [L,QSA]

</IfModule> 
```

我添加了以下代码，以便它也可以与此 url (http://www.example.com/contact/) 一起使用：

```
RewriteCond %{REQUEST_FILENAME} !-f
RewriteCond %{REQUEST_FILENAME} !-d
RewriteRule ^.*?([^\.\/]*)/?$ ?pname=$1 [L,QSA] 
```

现在我不希望可以通过多个 url 访问联系页面。如何包含 301 重定向，以便 www.example.com/contact.html 和 www.example.com/contact 都被重定向到 www.example.com/contact/？

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-18T16:36:17.277

您可以在 .htaccess 中使用它：

```
RewriteCond %{REQUEST_FILENAME} !-f
RewriteCond %{REQUEST_FILENAME} !-d
RewriteRule ^/(.*)\.html$ /$1/ [L,QSA,R]

RewriteCond %{REQUEST_FILENAME} !-f
RewriteCond %{REQUEST_FILENAME} !-d
RewriteRule ^.*?([^\.\/]*)$ /$1/ [L,QSA,R]

RewriteCond %{REQUEST_FILENAME} !-f
RewriteCond %{REQUEST_FILENAME} !-d
RewriteRule ^.*?([^\.\/]*)/$ ?pname=$1 [L,QSA] 
```

R 选项进行重定向。

# openerp - 如何在 openerp 6.1 中使用验证

> ID：13937338
> 
> 赞同：-2
> 
> 时间：2012-12-18T16:29:02.180
> 
> 标签：openerp

大家好，我们有一个问题，我是 openerp 6.1 的新手，就像

我们正在测试 openerp，因此我们将使用预安装的模块，而不是使用我们自己的模块，当有人申请休假时，我们希望在此处测试休假部分，它应该有这样的规定，即对于特定的休假应该有最少的天数和最长天数（我知道它不是分配请求）我们正在谈论休假表格，它询问什么样的假期可以说我们请病假超过 2 天，我们将能够上传一些医生处方，同样适用另一片叶子

我们如何实施这些验证确认

萨兰什

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-26T12:25:18.843

好吧，你只需要模块定制，这是你的具体要求。这不是问题，而是要求，请与一些 OpenERP 供应商交谈。

谢谢你

# jquery - 为什么我的元素没有获得标签焦点？

> ID：13937343
> 
> 赞同：0
> 
> 时间：2012-12-18T16:29:15.517
> 
> 标签：jquery, tabs, focus, datatables

当谈到标签焦点之类的事情时，我相当无知。我正在使用 JQuery 数据表。

在一个窗口中，点击选项卡会滚动元素，不包括表格行，但包括带有“第一个、上一个、下一个、最后一个”分页按钮的表格页脚。

在另一个窗口中，选项卡焦点停在表格行的末尾并返回到页面顶部，跳过“第一、上一个、下一个、最后一个”的分页按钮。

我对这两个数据表都进行了编码，它们非常相似，就像弹出窗口本身一样。我认为这没什么大不了的，但是我的开发团队中的某个人为此打开了一个错误，并且由于这是我的代码，我想修复它（我不知道为什么有人会浪费时间测试这样的东西，我确信我们的客户使用他们的光标点击分页按钮，我怀疑他们中的许多人甚至意识到反复点击标签会将他们带到那里）。

我的问题是，是什么决定了哪些元素可以获得标签焦点？为什么两段非常相似的代码会有如此不同的行为？我怎样才能使它们保持一致（允许所有元素获得标签焦点，或者至少是分页按钮）？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-18T16:48:21.140

我能想到的主要原因：

1.  `input`,`button`和`a`(anchor) 元素默认是“tab-able”，除非它们具有`tabindex="-1"`非标准属性，但大多数浏览器都提供支持。它用于禁用标签。如果值为 ，则从按钮中删除该属性`-1`。还要确保没有 JS 也将元素设置`tabIndex`为`-1`。

2.  除了具有`tabindex`（例如`tabindex="0"`）的默认可选项卡元素之外的元素也变为可选项卡。

3.  不太可能，但请确保没有将焦点重定向到附加到按钮的其他位置的`onfocus`属性或处理程序。`focus`密钥也是可以捕获的`tab`，但这不太可能。

这是一个[**演示**](http://jsfiddle.net/TGW8z/3/)上述内容的演示。

# r - `as.na` 函数

> ID：13937345
> 
> 赞同：20
> 
> 时间：2012-12-18T16:29:23.087
> 
> 标签：r

在 R 中，几乎`is.*`我能想到的每个函数都有一个对应的`as.*`. 有`is.na`但没有`as.na`。为什么不，如果这样的功能有意义，你将如何实现？

我有一个`x`可以是`logical`、`character`、 或的向量`integer`，我想将其转换为具有相同类和长度的向量，但填充了适当的：、、、或。`numeric``complex``NA``NA_character_``NA_integer_``NA_real_``NA_complex_`

我目前的版本：

```
as.na <- function(x) {x[] <- NA; x} 
```

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2012-12-18T16:57:34.320

为什么不`is.na<-`按照指示使用`?is.na`？

```
> l <- list(integer(10), numeric(10), character(10), logical(10), complex(10))
> str(lapply(l, function(x) {is.na(x) <- seq_along(x); x}))
List of 5
 $ : int [1:10] NA NA NA NA NA NA NA NA NA NA
 $ : num [1:10] NA NA NA NA NA NA NA NA NA NA
 $ : chr [1:10] NA NA NA NA ...
 $ : logi [1:10] NA NA NA NA NA NA ...
 $ : cplx [1:10] NA NA NA ... 
```

* * *

## 回答 #2

> 赞同：13
> 
> 时间：2012-12-18T16:55:56.293

这似乎始终比您的功能快：

```
as.na <- function(x) {
    rep(c(x[0], NA), length(x))
} 
```

（感谢 Joshua Ulrich 指出我的早期版本没有保留类属性。）

* * *

为了记录，这里是一些相对时间：

```
library(rbenchmark)

## The functions
flodel <- function(x) {x[] <- NA; x}
joshU <- function(x) {is.na(x) <- seq_along(x); x}
joshO <- function(x) rep(c(x[0], NA), length(x))

## Some vectors to  test them on
int  <- 1:1e6
char <- rep(letters[1:10], 1e5)
bool <- rep(c(TRUE, FALSE), 5e5)

benchmark(replications=100, order="relative",
    flodel_bool = flodel(bool),
    flodel_int  = flodel(int),
    flodel_char = flodel(char),
    joshU_bool = joshU(bool),
    joshU_int  = joshU(int),
    joshU_char = joshU(char),
    joshO_bool = joshO(bool),
    joshO_int  = joshO(int),
    joshO_char = joshO(char))[1:6]        
#          test replications elapsed relative user.self sys.self
# 7  joshO_bool          100    0.46    1.000      0.33     0.14
# 8   joshO_int          100    0.49    1.065      0.31     0.18
# 9  joshO_char          100    1.13    2.457      0.97     0.16
# 1 flodel_bool          100    2.31    5.022      2.01     0.30
# 2  flodel_int          100    2.31    5.022      2.00     0.31
# 3 flodel_char          100    2.64    5.739      2.36     0.28
# 4  joshU_bool          100    3.78    8.217      3.13     0.66
# 5   joshU_int          100    3.95    8.587      3.30     0.64
# 6  joshU_char          100    4.22    9.174      3.70     0.51 
```

* * *

## 回答 #3

> 赞同：11
> 
> 时间：2012-12-18T17:38:45.040

该函数不存在，因为它不是类型转换。类型转换会将 1L 更改为 1.0，或将“1”更改为 1L。NA 类型不是从其他类型转换而来的，除非该类型是文本。鉴于只有一种类型可以转换，并且有很多选项可以分配 NA （如在许多其他答案中一样），因此不需要这样的功能。

您获得的每个答案都会将 NA 分配给传递给它的所有内容，但您可能只想有条件地执行此操作。有条件地进行分配或调用小型包装器也没有什么不同。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2019-09-03T22:19:50.810

老问题，但是，怎么样

```
as.na <- function(obj){
  if(is.factor(obj)){
    # Special case for factors - any others that need to be handled?
    factor(rep(NA, length(obj)), levels = levels(obj))
  } else{
    objClass <- class(obj)
    x <- rep(NA, length(obj))
    class(x) <- objClass 
    x
  }
} 
```

对于数据框：

```
DF <- data.frame(
  int = seq(1, 10),
  real = seq(1, 10) + 0.1,
  char = letters[1:10],
  logi = rep(c(TRUE, FALSE), 5),
  Date = seq.Date(as.Date("2019-09-03"), by = 1, length.out = 10),
  posix = seq.POSIXt(as.POSIXct("2019-09-03 12:00:00"), by = 360, length.out = 10),
  stringsAsFactors = FALSE
) 
DF$factr <- as.factor(LETTERS[1:10])
str(DF)
'data.frame':   10 obs. of  7 variables:
 $ int  : int  1 2 3 4 5 6 7 8 9 10
 $ real : num  1.1 2.1 3.1 4.1 5.1 6.1 7.1 8.1 9.1 10.1
 $ char : chr  "a" "b" "c" "d" ...
 $ logi : logi  TRUE FALSE TRUE FALSE TRUE FALSE ...
 $ Date : Date, format: "2019-09-03" "2019-09-04" "2019-09-05" ...
 $ posix: POSIXct, format: "2019-09-03 12:00:00" "2019-09-03 12:06:00" "2019-09-03 12:12:00" ...
 $ factr: Factor w/ 10 levels "A","B","C","D",..: 1 2 3 4 5 6 7 8 9 10

DF_na <- DF
for(i in colnames(DF_na)){
  DF_na[,i] <- as.na(DF_na[,i])
}

str(DF_na)
'data.frame':   10 obs. of  7 variables:
 $ int  : int  NA NA NA NA NA NA NA NA NA NA
 $ real : num  NA NA NA NA NA NA NA NA NA NA
 $ char : chr  NA NA NA NA ...
 $ logi : logi  NA NA NA NA NA NA ...
 $ Date : Date, format: NA NA NA ...
 $ posix: POSIXct, format: NA NA NA ...
 $ factr: Factor w/ 10 levels "A","B","C","D",..: NA NA NA NA NA NA NA NA NA NA 
```

对于数据表：

```
library(data.table)

DT <- data.table::data.table(
  int = seq(1, 10),
  real = seq(1, 10) + 0.1,
  char = letters[1:10],
  logi = rep(c(TRUE, FALSE), 5),
  Date = seq.Date(as.Date("2019-09-03"), by = 1, length.out = 10),
  posix = seq.POSIXt(as.POSIXct("2019-09-03 12:00:00"), by = 360, length.out = 10),
  factr = as.factor(LETTERS[1:10])
)
str(DT)
Classes ‘data.table’ and 'data.frame':  10 obs. of  7 variables:
 $ int  : int  1 2 3 4 5 6 7 8 9 10
 $ real : num  1.1 2.1 3.1 4.1 5.1 6.1 7.1 8.1 9.1 10.1
 $ char : chr  "a" "b" "c" "d" ...
 $ logi : logi  TRUE FALSE TRUE FALSE TRUE FALSE ...
 $ Date : Date, format: "2019-09-03" "2019-09-04" "2019-09-05" ...
 $ posix: POSIXct, format: "2019-09-03 12:00:00" "2019-09-03 12:06:00" "2019-09-03 12:12:00" ...
 $ factr: Factor w/ 10 levels "A","B","C","D",..: 1 2 3 4 5 6 7 8 9 10
 - attr(*, ".internal.selfref")=<externalptr> 

DT_na <-
  copy(DT)[, lapply(.SD, as.na)]
str(DT_na)
Classes ‘data.table’ and 'data.frame':  10 obs. of  7 variables:
 $ int  : int  NA NA NA NA NA NA NA NA NA NA
 $ real : num  NA NA NA NA NA NA NA NA NA NA
 $ char : chr  NA NA NA NA ...
 $ logi : logi  NA NA NA NA NA NA ...
 $ Date : Date, format: NA NA NA ...
 $ posix: POSIXct, format: NA NA NA ...
 $ factr: Factor w/ 10 levels "A","B","C","D",..: NA NA NA NA NA NA NA NA NA NA
 - attr(*, ".internal.selfref")=<externalptr> 
```

# sql-server - 限制可以将唯一值输入到列中的次数

> ID：13937348
> 
> 赞同：2
> 
> 时间：2012-12-18T16:29:28.597
> 
> 标签：sql-server, sql-server-2012

我正在学习使用 SQL Server 2012，我想知道将列限制为只允许输入每个值最多次数的最佳方法是什么？

例如，一列最多`Color`只能记录 3 次？`Blue`

谢谢你。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-18T16:37:42.230

您可以使用[存储过程](http://www.mssqltips.com/sqlservertutorial/160/sql-server-stored-procedure/)来进行插入。在那里，您可以检查已经存在多少条记录`Color = 'Blue'`。

```
CREATE PROCEDURE sp_InsertColor @Color nvarchar(30), @ColorCount int OUTPUT
AS
BEGIN TRANSACTION

SELECT @ColorCount = count(*) 
FROM dbo.ColorTable
WHERE Color = @Color

IF @ColorCount <= 3 
BEGIN
    INSERT INTO dbo.ColorTable(COLOR) VALUES(@Color);
END

COMMIT
GO 
```

你可以这样执行它：

```
DECLARE @ColorCount int
EXEC sp_InsertColor @Color = 'Blue', @ColorCount = @ColorCount OUTPUT
SELECT @ColorCount 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-18T23:32:06.440

使用约束来*约束*您的数据，并为您被迫在数据库中实现业务逻辑的（希望如此）罕见的情况留下触发器（当插入新颜色时，执行 xyz）。

这是使用绑定到检查的函数的基于约束的方法：

```
--setup
create table dbo.Color (ColorId int primary key, ColorName varchar(10), Cap int);
go
create table dbo.Detail (DetailId int identity(1,1), ColorId int references dbo.Color(ColorId));
go

--create color blue with max row cap of 3
insert into dbo.Color
    values(1, 'blue', 3);
go

--create a func to evaluate the max row cap 
create function dbo.IsColorCapped(@ColorId int)
returns bit
as
begin
    return  (   select  case when count(*) > max(c.Cap) then 1 else 0 end
                from    dbo.Color c 
                join    dbo.Detail d on 
                        c.ColorId = d.ColorId
                where   c.ColorId = @ColorId
            )
end;
go

-- use the func in table constraint
alter table dbo.Detail add constraint ck_ColorCap check (dbo.IsColorCapped(ColorId)=0);
go

-- Test...

-- insert 3 blue rows
insert into dbo.Detail (ColorId)
    values(1),(1),(1);

-- insert 4th blue row - FAIL
insert into dbo.Detail (ColorId)
    values(1)
/*
Msg 547, Level 16, State 0, Line 1
The INSERT statement conflicted with the CHECK constraint "ck_ColorCap". The conflict occurred in database "yak", table "dbo.Detail", column 'ColorId'.
The statement has been terminated.
*/

-- incease the color cap
update dbo.Color
set Cap = 4
where ColorId = 1;

-- insert 4th blue row again
insert into dbo.Detail (ColorId)
    values(1); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-18T18:38:49.340

该线程中提到的存储过程方法将起作用，但只有在执行插入的所有操作都使用它时才有效。更好的方法是使用类似的逻辑在触发器中强制执行它。触发器将保证规则的执行。检查触发器中插入颜色的计数，如果它等于最大计数，则退出。不要忘记检查更新，而不仅仅是插入。

```
Create TRIGGER [dbo].[ColorTableTrigger] ON [dbo].[ColorTable] 
FOR  Insert 
AS
DECLARE @colorCount int
begin
SELECT @ColorCount = count(*) 
FROM dbo.ColorTable
WHERE Color = inserted.color

If @colorCount = 3  (
        rollback tran
    RAISERROR <some user defined error>
    )
end
end 
```

# iphone - ios：无法满足约束，来自 Storyboard

> ID：13937352
> 
> 赞同：1
> 
> 时间：2012-12-18T16:29:52.590
> 
> 标签：iphone, ios, autolayout, nslayoutconstraint

我得到“无法满足约束”，但我在情节提要中设置了所有约束。我认为这将确保没有冲突。什么可能导致此错误？

注意：我确实有一个包含另一个视图控制器的容器视图。这会导致问题吗？

# c# - 为什么 BitConverter 会缩小我已经分配的数组？（我试图防止二进制补码问题）

> ID：13937353
> 
> 赞同：0
> 
> 时间：2012-12-18T16:29:57.253
> 
> 标签：c#, performance, biginteger, twos-complement, bitconverter

我正在分配一个故意大于 BitConverter.GetBytes 结果的数组。我的目标是将最后一个字节留空，这样我就可以防止这个数字被视为两者的恭维并拥有 tempPosBytes2[

当我运行 BitConverter.GetBytes 时，我的数组`tempPosBytes2`似乎缩小了。

```
uint positiveNumber = 4293967296;
byte[] tempPosBytes2 = new byte[tempPosBytes.Length + 1]; // four bytes plus one
tempPosBytes2 = BitConverter.GetBytes(positiveNumber);  // tempPositiveBytes2 is now 4 bytes!! 
```

**问题**

幕后发生了什么，如何在不复制数组的情况下留下尾随字节？

我需要它与 BigInteger(byte[]) 一起使用，如下所示：

```
BigInteger positiveBigIntBAD2 = new BigInteger(tempPosBytes2); // Invalid 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-18T16:33:33.727

您的数组没有被缩小，您在内部分配了一个全新的数组`BitConverter.GetBytes`。

当然，您可以将该输出数据复制到具有您选择的大小的数组中。

或者，只需制作您自己的`BitConverter`. 这真的很简单：

```
byte[] tempPosBytes2 = new byte[] { (byte)(positiveNumber), 
                                    (byte)(positiveNumber >> 8), 
                                    (byte)(positiveNumber >> 16), 
                                    (byte)(positiveNumber >> 24), 
                                    0 }; 
```

我建议您比较使用这两种技术的性能。

顺便说一句，您可以只使用`BigInteger`带有`uint`.

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-18T16:36:13.233

它没有缩小任何东西。`GetBytes`总是分配一个新数组，并且您的分配会覆盖对现有字节数组的引用。

如果您需要最高字节始终为零，以便 BigInteger 不会将其解释为负数，那么您可以在将大小增加 1之后执行[Array.Resize](http://msdn.microsoft.com/en-us/library/bb348051.aspx)`GetBytes` ，新字节的值将为零，例如你要。

[BigInteger 构造函数](http://msdn.microsoft.com/en-us/library/dd268207.aspx#code-snippet-4)页面上有一个示例讨论了这件事，它提供了一个示例，该示例将导致仅在必要时调整数组的大小。你可以给自己写一个辅助方法`CreateUnsignedBigInteger(byte[])`来做这件事。

```
public BigInteger CreateUnsignedBigInteger(byte[] bytes)
{
    if ((bytes[bytes.Length - 1] & 0x80) > 0) 
    {
        byte[] old = bytes;
        bytes = new byte[old.Length + 1];
        Array.Copy(old, bytes, old.Length);
    }

    return new BigInteger(bytes);
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-18T16:33:46.820

`BitConverter.GetBytes`没有使用您的数组，它不能因为您从未将其传入。

相反，您正在创建一个数组，然后立即销毁它。

如果您需要将结果保存`GetBytes`在数组中，您可以查看是否有重载或其他方法接收数组以写入，或自己复制内容。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-12-18T16:38:51.817

具有讽刺意味的是，如果您想要一个`byte[]`可以传递给`BigInteger`构造函数以提供与您等效的值`uint`，您可以这样做

```
byte[] tempPosBytes = new BigInteger(positiveNumber).ToByteArray(); 
```

# ruby - 编码 ruby 1.8.7 字符串

> ID：13937356
> 
> 赞同：0
> 
> 时间：2012-12-18T16:30:06.927
> 
> 标签：ruby, encoding, hex

我正在尝试在 Ruby 中实现以下 C++ 代码：

```
sprintf (tmp, "|%02x", Payload[i] & 0xFF); 
```

基本上，有效载荷数据中的所有字节，其值不是 US-ASCII 代码表中的字母或数字代码，都被编码为三个字节：

```
| X1 X2 
```

其中'|' 是一个字节，其值为字符“|”的代码 在 US-ASCII 码表 (0x7C) 中，“X1”是字节码的第一个十六进制数字，“X2”是字节码的第二个十六进制数字。

到目前为止，我已经编写了这个代码：

```
payload.each_char do |char|
  if char.match(/^[[:alnum:]]$/) 
    encoded_string << char && next 
  end
  encoded_string << sprintf("|%02x", char.hex);  
end 
```

问题是，这对于“*”等特殊符号不能正常工作。

任何想法都非常感谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-18T17:21:05.030

我没有要测试的 1.8.7，但这在 1.9.3 中有效，并且使用的所有方法都应该在 1.8.7 中：

```
payload.each_byte do |byte|
  if byte.chr.match(/^[[:alnum:]]$/) 
    encoded_string << byte.chr && next 
  end
  encoded_string << sprintf("|%02x", byte);  
end 
```

结果`"hello world***"`：

```
hello|20world|2a|2a|2a 
```

# c++ - “使用声明”在 RADStudio 2010 中不起作用

> ID：13937361
> 
> 赞同：2
> 
> 时间：2012-12-18T16:30:13.810
> 
> 标签：c++, c++builder, c++builder-2010, using-declaration

我正在从 VCL 类派生一个新`TStream`类：

```
// A stream based on a temporary file, deleted when the stream is closed

class TTempFileStream : public TStream
{
...
public:
  using TStream::Seek;

   __int64 __fastcall Seek(const __int64 Offset, TSeekOrigin Origin)
  {
    return 0; // for simplicity!
  }

  ... 
} ; 
```

`TStream`声明了 Seek 的以下两种变体：-

```
virtual int __fastcall Seek(int Offset, System::Word Origin)/* overload */;
virtual __int64 __fastcall Seek(const __int64 Offset, TSeekOrigin Origin)/* overload */; 
```

但是在编译我的课程时我收到以下 W8022 警告：-

```
[BCC32 Warning]_utils.h(166): W8022 
'_fastcall TTempFileStream::Seek(const __int64,TSeekOrigin)' hides virtual function '_fastcall TStream::Seek(int,unsigned short)' 
```

当然 Using 声明应该解决这个问题？

为了将这个问题拖回正轨，我知道两个版本的 TStream::seek 相互关联的方式，我只是想获得派生类公开的继承 Seek(int,int) 方法。为什么我的`using`声明不这样做？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-09-05T11:56:56.927

罗迪，你的代码非常正确。

使用 TStream::Seek 添加时，代码按预期工作（经过测试）；否则如警告所述，将隐藏基类方法。（这部分C++语言，Remy第一次和你不服）。

该警告是误报，C++ Builder 中的一个非常古老且尚未纠正的[BUG](http://qc.embarcadero.com/wc/qcmain.aspx?d=25644)，至少从 2006 版到 XE4 存在。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-18T19:12:17.803

您根本不需要该`using`语句，因此请摆脱它。您正在覆盖 64 位`Seek()`方法。这就是你需要做的。您可以免费获得 32 位`Seek()`方法，因为它是一个公共方法，并且您在派生类上`TStream`使用继承。`public`您无需声明任何内容即可获取或使用 32 位`Seek()`方法。只要您不覆盖它，它就会在内部调用您的 64 位覆盖`Seek()`（如果调用）。

```
class TTempFileStream : public TStream
{
...
public:
    ...
    virtual __int64 __fastcall Seek(const __int64 Offset, TSeekOrigin Origin)
    {
        return 0; // for simplicity!
    }
    ... 
}; 
```

仅供参考，如果您只需要在流关闭时删除临时文件，则根本不需要派生类。`THandleStream`您可以按原样使用 RTL ，将其`HANDLE`从 Win32 API`CreateFile()`函数传递给您，在该函数中将`FILE_FLAG_DELETE_ON_CLOSE`标志指定为`CreateFile()`.

# django - vews.py 'NoneType' 对象中的 Django AttributeError 没有属性 'all'

> ID：13937363
> 
> 赞同：0
> 
> 时间：2012-12-18T16:30:18.490
> 
> 标签：django, django-models, django-views

我在 views.py 中收到以下错误，但我无法找出原因。请帮忙。

```
Request Method: GET
Request URL:    http://localhost:8000/tribalrights/

Django Version: 1.3.1
Exception Type: AttributeError
Exception Value:    'NoneType' object has no attribute 'all'
Exception Location: /home/gunjan/tribalrights/tr/views.py in home, line 70
Python Executable:  /usr/bin/python
Python Version: 2.7.3 
```

下面是在 views.py 中调用的函数。第 70 行开始于声明的下一行。

```
def home(request):
    atrocities = Atrocity.objects.all()
    cities = City.objects.all()
    for atrocity in atrocities:
       #this is line 69.below is line 70\. 
       cities = atrocity.location.all()
    return render_to_response('tr/home.html', {
            'cities' : cities,
        }) 
```

下面是 models.py 中 City 和 Atrocity 属性的定义

```
class Atrocity(models.Model):
    name = models.CharField(max_length=255)
    dateTimeOccurred = models.DateTimeField ( null=True, blank=True )
    persons = models.ManyToManyField ( Person, null=True, blank=True )
    atrocityType = models.ForeignKey(AtrocityType)
    description = models.CharField(max_length=255)
    location = models.ForeignKey(City, null=True, blank=True)
    def __unicode__(self):
        return self.name

class City(models.Model):
    name = models.CharField(max_length=255)
    district = models.ForeignKey(District)
    latitude = models.DecimalField(max_digits=13, decimal_places=10, null=True, blank=True)
    longitude = models.DecimalField(max_digits=13, decimal_places=10, null=True, blank=True)
    def __unicode__(self):
        return self.name 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-18T16:37:37.300

`atrocity.location`是 a `ForeignKey`，所以它指向一个`City`。使用您当前的模型，您应该只使用 `city = atrocity.location`检索与`Atrocity`. 您`.all()`在表示一堆对象的管理器对象上使用，例如`City.objects`，但您的`location`字段只是一个对象。

如果您希望该`Atrocity.location`字段代表许多城市，那么您可以使用

```
location = models.ManyToManyField(City) 
```

并调用`atrocity.location.all()`以获取所有位置城市`atrocity`。

编辑：从您的代码看来，您可能正在尝试获取所有城市的列表，这些城市是 some 的位置`Atrocity`？如果是这种情况，您可以使用

```
cities = list(set(map(lambda a: a.location, Atrocity.objects.all())) 
```

并传递`cities`到您的模板中。这将获取`location`每个`Atrocity`对象的 ，并将它们组合成一个集合以删除重复项。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-18T16:31:53.013

位置是外键。外键仅引用一个模型。那么你的代码就没有意义了，因为`.all()`方法是针对查询集的。应该只是：

```
cities = atrocity.location 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-18T16:34:15.010

你在做什么是错误的。有一个外键关系，所以每个暴行只与一个位置有关。所以，你不能全部使用

例子：

```
#Each Atrocity is related to only one location
city = atrocity.location

#Each can be related to more than one atrocity
atrocities = location.atrocity_set.all() 
```

而不是循环遍历每个 Atrocity 对象来收集城市。在数据库级别执行此操作会更有效。您可以通过此在 City 和 Atrocity 之间进行连接查询。

```
cities = City.objects.filter(id__in = Atrocity.objects.values_list('location', flat=True)) 
```

# java - 如何在 JAVA 中暂停进度条？

> ID：13937367
> 
> 赞同：0
> 
> 时间：2012-12-18T16:30:26.993
> 
> 标签：java, android, mobile, android-ui

我在 Android 中有一个登录表单，我希望在登录时出现一个正在加载的 progressBar 圆形图标，然后在打开下一个 Intent 时它应该被隐藏。当我单击登录按钮时，代码执行得如此之快以至于它隐藏了我的进度条，即使可见性错误的代码是在新的意图对象创建之后，但它不起作用，让我知道在这种情况下如何处理进度条。每个人都可以帮助我吗？谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-18T21:32:39.563

似乎它正在工作？ProgressBar 应该显示，直到某个后台进程完成，然后下一个 Activity 应该显示。如果您正在执行一系列启动任务，您应该在它们发生时显示它们，或者在它们全部完成之前不显示它们中的任何一个。ProgressBar 显示一些操作正在后台进行。

如果你想表明应用程序正在执行一系列步骤，每个步骤都有自己的 Activity，那么每个 Activity 的 UI 都应该显示这一点。但是，几乎不需要在前台显示任何内容，除非您想让用户跳过一步、返回或转到其他地方。

# php - URL 模组重写

> ID：13937369
> 
> 赞同：0
> 
> 时间：2012-12-18T16:30:32.330
> 
> 标签：php, .htaccess, mod-rewrite, url-rewriting

使用 .htaccess 文件更改这些 url

**website.com/b.php?g=666**到**website.com/666**

和

**website.com/g/2/1.gif**到**website.com/2/1**

这是怎么做的

还有简单的例子来学习如何做到这一点？

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-18T21:10:52.800

`http://website.com/666`对于内部重写对to的请求`/b.php?g=666`：

```
RewriteEngine On
RewriteCond %{REQUEST_FILENAME} !-f
RewriteCond %{REQUEST_FILENAME} !-d
RewriteRule ^([^/]+)/?$ /b.php?g=$1 [L] 
```

`http://website.com/2/1`对于内部重写对to的请求`/g/2/1.gif`：

```
RewriteCond %{REQUEST_URI} ^/([^/]+)/([^/]+)/?$
RewriteCond %{DOCUMENT_ROOT}/g/%1/%2.gif -f
RewriteRule ^ /g/%1/%2.gif [L] 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-18T16:37:52.013

你可以把这个放在你的`.htaccess`

```
RewriteEngine On
RewriteRule ^([^/]*)$ /b.php?g=$1 [L] 
```

使您的第一个模式工作。如果您想要的不仅仅是`b.php`工作（您希望它与*任何*PHP 文件一起工作），您可以根据需要修改规则。（这个问题没有具体说明规则应该有多普遍。）

它是否有效取决于是否在主 httpd.conf 文件中启用了此类设置。换句话说，Apache 可能被设置为*不允许*您在`.htaccess`文件中使用重写引擎。YMMV。

要了解它们是如何工作的，请浏览[Apache 文档](http://httpd.apache.org/docs/2.2/rewrite/)，尤其是[此页面](http://httpd.apache.org/docs/2.2/rewrite/remapping.html)上的示例。

您也可以尝试使用[重写规则生成器](http://www.generateit.net/mod-rewrite/)之类的东西来碰碰运气，但最好阅读文档，这样您就可以了解生成的规则的作用。

第二个可能适用于此：

```
RewriteEngine On
RewriteRule ^([^/]*)([^/]*)$ /g/$1/$2.gif [L] 
```

（当然，如果您也使用第一个，则不需要两次“RewriteEngine On”。）

# android - 如何使我在 xml 中的图像能够缩放？

> ID：13937370
> 
> 赞同：0
> 
> 时间：2012-12-18T16:30:33.913
> 
> 标签：android, xml, image, layout

我创建了一个带有按钮的应用程序，如果单击该按钮，它将重定向到此布局。但问题是，我无法缩放图像。

```
<?xml version="1.0" encoding="utf-8"?> <LinearLayout
<Linearlayout xmlns:android="http://schemas.android.com/apk/res/android"
     android:layout_width="wrap_content"
     android:layout_height="wrap_content"
     android:orientation="vertical" >

     <ImageView
     android:src="@drawable/keutamaandua"
     android:layout_width="match_parent"
     android:layout_height="match_parent" /></LinearLayout> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-18T16:33:04.947

`wrap_content`父母带着孩子没有多大意义，`match_parent`因为你并没有真正给予任何约束。

您可能应该使用`match_parent`根布局：

```
<?xml version="1.0" encoding="utf-8"?> <LinearLayout
<Linearlayout xmlns:android="http://schemas.android.com/apk/res/android"
     android:layout_width="match_parent"
     android:layout_height="match_parent"
     android:orientation="vertical" > 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-18T16:33:37.363

ImageViews 默认没有缩放功能。您可以找到一个[提供小部件的库，或者](https://github.com/sephiroth74/ImageViewZoom)[像本示例中那样](http://developer.android.com/training/animation/zoom.html)进行简单的点击以进行缩放。

# c++ - 对没有空值的多维向量进行排序

> ID：13937376
> 
> 赞同：0
> 
> 时间：2012-12-18T16:30:53.370
> 
> 标签：c++, sorting, vector

```
vector<vector<int>> sort_arr;
int n = 4, k = 2;

sort_arrsort_arr.resize(n);
for(int i = 0 ; i < n ; ++i){
sort_arrsort_arr[i].resize(k);
}

int sum = 16;
for(int i = 0 ; i < 2 ; ++i){
    for(int j = 0 ; j < 2 ;  j++){
    sort_arrsort_arr[i][j] = sum;
    sum--;
    }
}

sort(  sort_arrsort_arr.begin(), sort_arrsort_arr.end()); 
```

由于向量是 4x2 并且我只将值放在前 2 行中，所以当我对向量进行排序时，我将前 2 行作为 0,0 和 0,0 在排序时如何忽略这些值？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-18T16:38:27.723

如果您只想对已填充的部分进行排序，请使用

```
sort(sort_arrsort_arr.begin(), sort_arrsort_arr.begin()+2); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-18T16:35:16.630

您能否更具体地说明您想要实现的目标？您可以在排序时提供自己的比较运算符

```
 template <class RandomAccessIterator, class Compare>
  void sort ( RandomAccessIterator first, RandomAccessIterator last, Compare comp ); 
```

有关更多信息，请阅读手册 [http://www.cplusplus.com/reference/algorithm/sort/](http://www.cplusplus.com/reference/algorithm/sort/)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-18T16:35:33.353

好吧，它们不是空值。它们是 0，这是一个完全有效的排序数字。如果您只想要 2 行，则只需添加两行。只是做`int n = 2`而不是`4`.

有了您提供的信息，您当然可以这样做：

```
sort(sort_arr.begin(), std::next(sort_arr.begin(),2)); 
```

这只会对前两行进行排序。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-12-18T16:37:27.083

`int`C++ 中的 an永远不是`NULL`. 如果您执行以下操作：

```
int val = (int)NULL; 
```

的值为 ，与任何其他`val`值为的`0`没有区别。如果你真的会在你想要被忽略的多维向量中有那些“洞”，我建议使用.`int``0``NULL``Nullable<int>`

# jquery - 获取选中的项目

> ID：13937377
> 
> 赞同：11
> 
> 时间：2012-12-18T16:30:53.823
> 
> 标签：jquery, jquery-ui, jquery-ui-menu

对不起，如果我的问题太简单了，但我无法从 jQuery UI 文档中弄清楚。

如何确定在菜单中单击了哪个选项？我尝试了这样的事情，但没有奏效：

```
var menu = $('#menu');
menu.menu({
    select: function(event, ui) {
        alert(ui.type);
    }
});​ 
```

* * *

## 回答 #1

> 赞同：19
> 
> 时间：2012-12-18T17:00:31.597

您缺少的是“ui”是一个代表您单击的项目的 jQuery 对象。

因此，要从该项目中获取文本，您应该使用：

```
 var menu = $('#menu');

    $(document).ready(function(){
        menu.menu({
            select: function(event, ui) {
                alert(ui.item.text());
            }
        });
    }); 
```

这将为您提供项目的文本。

[这是一个小提琴](http://jsfiddle.net/4bY7d/1/)

# loops - 如何使用接受来自文本文件的参数的循环创建批处理文件？

> ID：13937378
> 
> 赞同：3
> 
> 时间：2012-12-18T16:31:05.590
> 
> 标签：loops, batch-file, text-files

我有一系列需要基于`propertyID`. 这些报告需要 2 个参数 (`PropertyID`和`date`)。我使用水晶报告导出器将这些转换为 pdf 以通过电子邮件发送出去。

我需要为每个特定属性创建一个运行此转换的批处理文件。我用 isql 创建了一个 txt 文件，其中包含`propertyIDs`. 我需要创建一个循环来读取我的列列表的第一行，然后遍历其余的 ID。

这是我第一次使用批处理文件，所以我会很感激我能得到的任何帮助:) 谢谢！

更新：一直在研究这个。现在我想我的参数有问题。现在，我只是从一个参数 -PropertyID- 开始，直到我能掌握它。这是我现在的代码.. 这是我的批处理文件，用于将报告转换为 pdf：

```
c:
cd c:\y46\crexport #navigating to proper folder
crexport.exe -U username -P password -S server -D dbname -F "C:\y46\crexport\rs_Ardent_Owner_Stmtsputesting.rpt" -O "C:\y46\crexport\output.pdf" -E pdf -a "curr_month:11/01/2012 00:00:00" -a "pscode:%A" 
```

如您所见，这里定义了我的两个参数，但 pscode(PropertyID) 被设置为 A（很可能是因为我无法理解参数的工作原理）。但这是我用来调用批处理文件的代码：

```
FOR %A IN ("C:\y46\crexport\output.txt") DO "C:\y46\crexport\batch.bat" %A 
```

这可行，但它没有向批处理文件发送正确的参数值，所以我不生成任何输出报告。一旦我解决了我的参数问题，也不确定这是否会正确循环通过每条记录。

这是另一个文本文件源示例。如下所示，只有一列。每行都是一个 propertyID。有些是 3 位数，有些是 8 位数。

```
010     
057     
152     
197     
21210721  
21210722    
22090461  
22090462  
22090781  
22090782  
22093561  
22093562  
23180051  
23180052  
23220781  
23220782  
257     
324     
350     
352     
354     
355     
367     
400     
401     
402 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-18T19:04:44.983

您快到了，只需要进行一些更改

```
cd C:\y46\crexport
for /f %%a in (file.txt) do (
crexport.exe -U username -P password -S server -D dbname -F "C:\y46\crexport\rs_Ardent_Owner_Stmtsputesting.rpt" -O "C:\y46\crexport\output.pdf" -E pdf -a "curr_month:11/01/2012 00:00:00" -a "pscode:%%a"
) 
```

我已将`%A`末尾更改`%%a`为与`for`循环匹配（假设这是循环当前正在处理的文件的名称。

简而言之，此批处理文件将处理目录中的所有文件，`C:\y46\crexport`并为每个文件运行`crexport`您在问题中指定的命令。

如果这些不是正确的参数，`crexport`请告诉我详细信息，我会对其进行调整。

# javascript - JavaScript 优化：矩阵下降

> ID：13937385
> 
> 赞同：3
> 
> 时间：2012-12-18T16:31:42.157
> 
> 标签：javascript, optimization

我实现了这个有趣的页面：

[http://www.xthema.it/misc/christmas-matrix.html](http://www.xthema.it/misc/christmas-matrix.html)

我重试以三种不同的方式执行此操作，但每次我都无法使用 Firefox 获得良好的性能结果（我使用的是 17 版）。

*   第一次尝试是每次为每个单元创建和删除 div。
*   第二次尝试是在开始时预分配所有 div 单元格并仅更改字符和颜色
*   第三次尝试（当前的尝试）是创建一个列 div，只在底部添加新的 div 单元格，并在角色下降结束时删除整个列。

在 Chrome、Safari 和 IE 上，结果总是很好，但在 FF 上却很慢。

有什么建议吗？有人知道 FF 在访问 DOM 或 CSS 方面的一些弱点吗？没有人可以推荐任何优化吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-18T17:45:40.343

首先和普遍的优化将使用[requestAnimFrame](http://paulirish.com/2011/requestanimationframe-for-smart-animating/)。它应该与每个动画一起使用。

我在你的代码中看到的是很多 dom 操作。特别是您调用 createElement 数千次调用 drawFall。这很慢。尝试在绘制之前准备秋天，然后对其进行动画更改颜色，然后移除秋天。（所以尽量减少 createElement 调用的数量）此外，您还可以使用[documentFragment](http://ejohn.org/blog/dom-documentfragments/)，它也可以提供帮助。

另一个想法是使用 WebGL 来[实现它](http://www.html5rocks.com/en/tutorials/webgl/million_letters/)，然而，这是完全不同的故事。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-20T10:55:22.410

我找到了另一种可能的（超级）快速解决方案：

描述：取半透明的 png 并将其放在您的矩阵字母上，以便其中一些是半可见的。移动png。难以描述 - 易于遵循附加的 jsfiddle 上的快速'n'dirty 实现。

快速而肮脏的实施：（见[http://jsfiddle.net/zbHne/](http://jsfiddle.net/zbHne/)）

```
<html>
<head>
<style type="text/css">
#box{
  height: 100px;
  width: 300px;
  overflow: hidden;
  border:2px solid;
  background: #000;
}

</style>
<script type="text/javascript">
onload = function(){
  var el = document.getElementById("test");
  el.style.position = "relative";

  var x = -700;
  function fly(){
    x += 10;
    el.style.left = x + "px";

    if(x > -100){
      x = -700;
    }
  }

  setInterval(fly, 50);
}
</script>
</head>

<body>

<div id="box">
<div style="position: relative; width: 1000px; color: green">test of letterstest of letterstest of letterstest of letterstest of letters</div>
<div id="test"><div style="width: 1000px; height: 100px; background: url(layer.png); position: relative; top: -50px">invisible</div></div>
</div>

</body>
</html> 
```

您应该创建适当的 layer.png 半透明图像才能使其正常工作。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-19T06:46:41.697

我尝试使用 requestAnimFrame，但没有显着改进。

使用萤火虫探查器似乎缓慢的操作正在改变颜色

cellEl.style.color = br;

所以在这一刻，我发现的唯一解决方案是在 FF 上最小化调色板

```
// BRIGHTNESS0 is the MAX brightness value
// BRIGHTNESSSTEPS is the palette size

// i : 31 = n : BRIGHTNESS0
var i = Math.floor(n * 31 / BRIGHTNESS0);
// brightness inc = BRIGHTNESS0 / BRIGHTNESSSTEPS
var inc = 31 / BRIGHTNESSSTEPS;
i = Math.floor(Math.floor(i / inc) * inc);

var brHex = '#';
if (i < 16) {
  var d = i * 16 + i;
  brHex += '0' + Number(i).toString(16) + '0';
} else {
  i -= 16
  var o = Number(i).toString(16);
  brHex += o + 'f' + o;
}

... 
```

在 FF 上，我不使用 32 渐变，但使用更少，如果颜色没有改变，我会跳过`style.color`分配。

```
var br = BRIGHTNESSTABLERGB[cell[1]];
if (cellEl.style.color != br)
  changeBrightness(cellEl,br); 
```

这种方式稍微好一点。还有什么建议吗？

# bash - ftp下载很慢，如何减少登录次数？

> ID：13937386
> 
> 赞同：0
> 
> 时间：2012-12-18T16:31:45.870
> 
> 标签：bash, shell, ftp, download, sftp

我从远程 ftp 服务器下载文件（数千个文件）时遇到了很大的麻烦。下载几个文件没什么大不了的，但是当需要下载数千个文件时，我发现登录操作确实会减慢整个过程。我需要帮助以获得更好的脚本。

远程文件夹和文件结构类似于

```
CASE
--processor0
----0
------A.gz
------B.gz
------(and so on)
------H.gz
----0.1
------A.gz
------B.gz
------(and so on)
------H.gz
----0.2
------A.gz
------B.gz
------(and so on)
------H.gz
----(And so on with 0.3 0.4 0.5 ...)
--processor1
----0
------A.gz
------B.gz
------(and so on)
------H.gz
----0.1
------A.gz
------B.gz
------(and so on)
------H.gz
----0.2
------A.gz
------B.gz
------(and so on)
------H.gz
----(And so on with 0.3 0.4 0.5 ...)
.............(and so on)
--processor2000
----0
------A.gz
------B.gz
------(and so on)
------H.gz
----0.1
------A.gz
------B.gz
------(and so on)
------H.gz
----0.2
------A.gz
------B.gz
------(and so on)
------H.gz
----(And so on with 0.3 0.4 0.5 ...) 
```

所以我写了一个shell脚本如下：

```
#!/bin/bash

stty -echo
read -p "Enter your password [ENTER]: " THISPASS; echo
stty echo
USERNAME="superman"
URL="supercomputer.org"

ROOTPATH="/home/remote/folder/CASE"
TIMELIST="0 0.1 0.2 0.3 0.4 0.5 0.6"

mkdir -p /home/LOCALFOLDER
LOCALDIR=/home/LOCALFOLDER
cd $LOCALDIR

echo ""
echo "Local Directory  : "$LOCALDIR
echo "Remote URL       : "$URL
echo "Remote Directory : "$ROOTPATH
echo ""

for TIMENAME in $TIMELIST; do
    for (( i = 0; i < 1200; i++ )); do
        CURPROC="processor"${i}
        FILEPATH=$ROOTPATH/$CURPROC
        mkdir -p $PWD/$CURPROC/$TIMENAME
        cd $PWD/$CURPROC/$TIMENAME
        echo -e "FOLDER - "$FILEPATH/$TIMENAME

        FILEFULLNAMEA=$FILEPATH/$TIMENAME/"A.gz"
        FILEFULLNAMEB=$FILEPATH/$TIMENAME/"B.gz"
        FILEFULLNAMEC=$FILEPATH/$TIMENAME/"C.gz"
        FILEFULLNAMED=$FILEPATH/$TIMENAME/"D.gz"
        FILEFULLNAMEE=$FILEPATH/$TIMENAME/"E.gz"
        FILEFULLNAMEF=$FILEPATH/$TIMENAME/"F.gz"
        FILEFULLNAMEG=$FILEPATH/$TIMENAME/"G.gz"
        FILEFULLNAMEH=$FILEPATH/$TIMENAME/"H.gz"
        lftp sftp://$USERNAME:$THISPASS@$URL -e "get $FILEFULLNAMEA $FILEFULLNAMEB $FILEFULLNAMEC $FILEFULLNAMED $FILEFULLNAMEE $FILEFULLNAMEF $    FILEFULLNAMEG $FILEFULLNAMEH; bye"
        cd ../..
    done
done
echo "" 
```

但我发现这`lftp sftp://$USERNAME:$THISPASS@$URL -e "get $FILEFULLNAMEA $FILEFULLNAMEB $FILEFULLNAMEC $FILEFULLNAMED $FILEFULLNAMEE $FILEFULLNAMEF $ FILEFULLNAMEG $FILEFULLNAMEH; bye"`是下载过程中最耗时的部分。有没有更好的解决方案让我不需要一直登录？非常感谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-18T16:47:45.913

一些选项：

1.  使用`mirror`in`lftp`来简单地获取您想要的整个目录结构。看起来远程端或多或少具有正确的目录结构（除了`uniform`），因此如果您在本地镜像远程端，您可以简单地`mv`将本地目录放到正确的位置。
2.  预先创建所有本地目录，然后创建一个包含您想要获取的所有文件的单个脚本文件（穿插`lcd`您需要将它们放在正确位置的所有命令，然后执行一个`lftp -f`该脚本文件。那也将在一次登录中批量处理所有获取。

# android - 按特定类别获取一行 SQLite android

> ID：13937387
> 
> 赞同：-1
> 
> 时间：2012-12-18T16:31:46.807
> 
> 标签：android, sql, sqlite

我有一个表“itemsDataTable”，其中一列是“类别”。我查看并搜索但没有得到我的答案。我想获取表中具有特定类别（如“电子”）的所有行并将其存储。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-18T16:50:05.827

你需要先学习 SQL： [谷歌它！](https://www.google.com/webhp?sourceid=chrome-instant&ie=UTF-8&ion=1#hl=en-US&gs_rn=1&gs_ri=hp&tok=GjohJL9BM4wTi1ghykpSmg&cp=9&gs_id=8&xhr=t&q=sql%20basics&pf=p&safe=off&tbo=d&output=search&sclient=psy-ab&oq=sql%20basis&gs_l=&pbx=1&qscrl=1&bav=on.2,or.r_gc.r_pw.r_cp.r_qf.&bvm=bv.1355534169,d.eWU&fp=f324b4352f85d59f&bpcl=40096503&biw=1366&bih=682&ion=1)

要回答您的问题：

```
SELECT * FROM itemsDataTable WHERE category LIKE 'ELETRONIC' 
```

另外，在 Google 中搜索对象关系映射！

# php - 用新行替换行并返回

> ID：13937388
> 
> 赞同：1
> 
> 时间：2012-12-18T16:31:51.487
> 
> 标签：php, replace

我在服务器上的文本文件中有这一行：

```
*/
$config['default_theme'] = 'seaside';

/* 
```

我想将其替换为：

```
*/
$config['default_theme'] = 'river';

/* 
```

'river' 存储在变量 $themename 中。我可以搜索此文件并替换该行，但希望包含回车符，例如 /n 我当前的代码不这样做，我失去了行下方的空间。

这是我当前的php代码：

```
if (stristr($line,'default_theme')) {
    $line = '$config[\'default_theme\'] = ' . '\'' . $themename . '\';' ; 
```

我怎样才能整合这个 \n 或更好地重写它？提前致谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-18T16:34:20.027

你只是想这样做：

```
if (stristr($line,'default_theme')) {
    $line = '$config[\'default_theme\'] = ' . '\'' . $themename . '\';'."\n" ; 
```

PHP 将扩展`"\n"`为一个回车，你的新行现在将是：

```
"$config['default_theme'] = 'river';
" 
```

*（注意“不可见”的新行）*

如果特殊字符被单引号引用（例如\t \n \r），PHP 不会扩展特殊字符，但如果使用双引号，它们将被替换。

* * *

一个额外的（轻微相关的注释）是你可以通过使用`"`'s 而不是`'`'s;来简化你的行。无需转义：

```
$line = "$config['default_theme'] = '" . $themename . "'\n"; 
```

这是因为您可以同时使用`'`'s 和`"`'s 来封装 PHP 中的字符串，因为您的字符串包含`'`'s 我建议使用`"`'s 因为这意味着您不需要转义它的内容！

您甚至可以将其放到以下位置，因为 php 会在字符串中搜索变量并将其展开。

```
$line = "$config['default_theme'] = '$themename'\n"; 
```

# javascript - 使用 css 或 flexslider.js 将幻灯片对齐到中心

> ID：13937394
> 
> 赞同：1
> 
> 时间：2012-12-18T16:32:29.537
> 
> 标签：javascript, css, slider, alignment

我只是想知道是否有人有办法让这些幻灯片在中间垂直对齐。我已经尝试`vertical-position: middle;`过 CSS 和其他建议，但无济于事。

[该页面可以在这里找到](http://taconstructionuk.com/dunnington.html)。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-18T16:41:44.623

有时我使用这个片段来垂直对齐东西，因为 CSS 的垂直对齐往往很喜怒无常；）

```
(function ($) {
    $.fn.vAlign = function(fn) {

        return this.each(

            function(i){

                var ah = $(this).height();
                var ph = $(this).parent().height();
                var mh = Math.ceil((ph-ah) / 2);
                $(this).css('margin-top', mh);
            });
    };
})(jQuery); 
```

然后你可以这样称呼它： $(".your-element").vAlign();

# django - Django：IntegrityError 列'user_id'不能为空

> ID：13937395
> 
> 赞同：4
> 
> 时间：2012-12-18T16:32:30.970
> 
> 标签：django, django-models

在注册时保存我的用户后，我收到以下错误消息。有人可以解释为什么吗？

谢谢

**错误信息**

```
IntegrityError at /member/registration/
(1048, "Column 'user_id' cannot be null")
Exception Type: IntegrityError at /member/registration/
Exception Value: (1048, "Column 'user_id' cannot be null") 
```

**视图.py**

```
 if form.is_valid():
            # If form has passed all validation checks then continue to save member.
            user = User.objects.create_user(
                                            username=form.cleaned_data['username'],
                                            email=form.cleaned_data['email'], 
                                            password=form.cleaned_data['password']
                                            )
            user.save()
            #member = User.get_profile()
            #member.name = form.cleaned_data['name']
            #member.save()
            member = Member(
                            name=form.cleaned_data['name']
                            )
            member.save() 
```

**模型.py**

```
class Member (models.Model):
    user =  models.OneToOneField(User)
    name = models.CharField(max_length=100)

    def __unicode__(self):
        return self.name 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-12-18T16:36:37.103

错误是当您保存成员而不是用户时。创建成员时，您没有分配用户。

# math - 使用 JS while 循环在不同位置的画布上绘制多个图像

> ID：13937397
> 
> 赞同：0
> 
> 时间：2012-12-18T16:32:32.467
> 
> 标签：math, javascript

我有以下 JS 循环，用于将多个图像绘制到 HTML5 画布：

```
while(arrayIteration < allImagesArray.length){
        context.drawImage(allImagesArray[arrayIteration], imageX, imageY, imageWidth, imageHeight); /*Declare variables for image height and width, so it can be accessed elsewhere */
        allImagesArray[arrayIteration].setAttribute('draggable', 'true');
        console.log(arrayIteration); /*Display the current array position that's being drawn */
        arrayIteration = arrayIteration+1;
        /*Now try changing the values of imageX & imageY so that the next image is drawn to a 
        different location*/
        imageX = Math.floor(Math.random()*950);
        imageY = Math.floor(Math.random()*350);

    } 
```

我曾希望通过在循环中定义我的“imageX”和“imageY”变量的值，它们可能会被赋予不同的值

```
'Math.random()' 
```

函数与循环的每次迭代一起使用，因此将每个图像绘制在不同的位置。我知道这并不一定意味着没有图像会完全重叠，但是，目前它们都被绘制到完全相同的位置，因此您必须将顶部图像拖到另一个位置才能看到那个下面等

知道如何确保我的“imageX”和“imageY”变量在循环的每次迭代中都有不同的值吗？

**编辑**

这是我的 index.html 页面的完整代码：

```
<!DOCTYPE HTML>
<html>
<head>
<style>
  body {
    margin: 0px;
    padding: 0px;
  }
  canvas{
    border: 1px solid #9C9898;
    background:#F5F5F5;
  }
</style>
<div id="container"></div>
<script src="kinetic.js"></script>
<script src="drawdescriptionboxes.js"></script>
<script src="drawLevelOneElements.js"></script>
<script src="startgamedrawgameelementsdrawstartbutton.js"></script>
<script>
/*Add the game elements' global variables */
var currentLevel = 1;
var totalLevels = 3;
var currentScore = 0;
var currentScorePositionX = 950;
var currentScorePositionY = 10;

/*Add code to draw images to random locations here */
    //var imageX = Math.floor(Math.random()*950);
    //var imageY = Math.floor(Math.random()*450);

    var stage = new Kinetic.Stage({
      container: "container",
      width: 1000,
      height: 500
    });
    var imagesLayer = new Kinetic.Layer();
    var canvas = imagesLayer.getCanvas();
    var context = canvas.getContext("2d");
    console.log("Foo ");

/*Load the images from the HTML into the JavaScript */
function loadImages(sources, callback){
    var imagesDir = "";
    var images = {};
    var loadedImages = 0;
    var numImages = 0;

    //console.log("length " + sources.length);
    for (var src in sources){
        numImages++;
        }
    //console.log("Num Images " + numImages);

    var index=0;
    console.log("length " + sources.length);
    for (index=0;index < numImages ;index++){
        console.log(index);
        images[index] = new Image();
        images[index].src = sources[index];
        console.log("Adding " + sources[index]);
        callback(images[index]);
        console.log("images array length = " + images.length);
        }

    stage.add(imagesLayer); // should only be added once!!
    }

/*Function to check whether the item being dragged is near its description box */
function isNearDescriptionBox(itemImage, descriptionBox){
    var ii = itemImage;
    var db = descriptionBox;
    if(ii.attrs.x > db.x - 20 && ii.attrs.x < db.x + 20 && ii.attrs.y > db.y - 20 && ii.attrs.y < db.y +20){
        return true;
        }else{
        return false;
        }
    }

/* This function draws the game elements */
function drawGameElements(){
    /* Draw a line for the 'score bar'. */
    context.moveTo(0, 25);
    context.lineTo(1000, 25);
    context.stroke();

    /* Draw current level/ total levels on the left, and current score on the right. */
    context.font = "11pt Calibri"; /* Text font & size */
    context.strokeStyle = "black"; /* Font colour */
    context.strokeText(currentLevel + "/" + totalLevels, 10, 15);
    context.strokeText(currentScore, 750, 15);
    }

function initStage(images){
    var stage = new Kinetic.Stage({
        container: "container",
        width: 1000,
        height: 500
        });
    var descriptionLayer = new Kinetic.Layer();
    //var imagesLayer = new Kinetic.Layer();
    var allImages = [];
    var currentScore = 0;

    var descriptionBoxes = {
        assetsDescriptionBox: {
            x: 70,
            y: 400
            },
        liabilitiesDescriptionBox: {
            x: 300,
            y: 400
            },
        incomeDescriptionBox: {
            x: 530,
            y: 400
            },
        expenditureDescriptionBox: {
            x: 760,
            y: 400
            },
        };

    /*Code to detect whether image has been dragged to correct description box */
    for (var key in sources){
        /*Anonymous function to induce scope */
        (function(){
            var privateKey = key;
            var imageSource = sources[key];

            /*Check if image has been dragged to the correct box, and add it to that box's
                array and remove from canvas if it has */
            canvasImage.on("dragend", function(){
                var descriptionBox = descriptionBoxes[privateKey];
                if(!canvasImage.inRightPlace && isNearDescriptionBox(itemImage, descriptionBox)){
                    context.remove(canvasImage);
                    /*Will need to add a line in here to add the image to the box's array */
                    }
                })

            })();
        }

    }

function drawImage(imageObj) {
    //var layer = new Kinetic.Layer();

    var canvasImage = new Kinetic.Image({
      image: imageObj,
      width: 50,
      height: 50,
      // puts the image in teh middle of the canvas
      x: stage.getWidth() / 2 - 50 / 2,
      y: stage.getHeight() / 2 - 50 / 2,
      draggable: true
    });

    // add cursor styling
    canvasImage.on('mouseover', function() {
      document.body.style.cursor = 'pointer';
    });
    canvasImage.on('mouseout', function() {
      document.body.style.cursor = 'default';
    });

    imagesLayer.add(canvasImage);
}

/*This code loads the images to the canvas when the browser window loads */
window.onload = function(){
    var sources = {};
        sources[0] = document.getElementById("building").src,
        sources[1] = document.getElementById("chair").src,
        sources[2] = document.getElementById("drink").src,
        sources[3] = document.getElementById("food").src,
        sources[4] = document.getElementById("fridge").src,
        sources[5] = document.getElementById("land").src,
        sources[6] = document.getElementById("money").src,
        sources[7] = document.getElementById("oven").src,
        sources[8] = document.getElementById("table").src,
        sources[9] = document.getElementById("van").src,

        sources[10] = document.getElementById("burger").src,
        sources[11] = document.getElementById("chips").src,
        sources[12] = document.getElementById("drink").src,
        sources[13] = document.getElementById("franchiseFee").src,
        sources[14] = document.getElementById("wages").src,

        sources[15] = document.getElementById("admin").src,
        sources[16] = document.getElementById("cleaners").src,
        sources[17] = document.getElementById("electricity").src,
        sources[18] = document.getElementById("insurance").src,
        sources[19] = document.getElementById("manager").src,
        sources[20] = document.getElementById("rates").src,
        sources[21] = document.getElementById("training").src,
        sources[22] = document.getElementById("water").src,

        sources[23] = document.getElementById("burger").src,
        sources[24] = document.getElementById("chips").src,
        sources[25] = document.getElementById("drink").src,

        sources[26] = document.getElementById("creditors").src,
        sources[27] = document.getElementById("electricity").src,
        sources[28] = document.getElementById("food").src,
        sources[29] = document.getElementById("hirePurchase").src,
        sources[30] = document.getElementById("loan").src,
        sources[31] = document.getElementById("overdraft").src,
        sources[32] = document.getElementById("payeTax").src,
        sources[33] = document.getElementById("tax").src

    loadImages(sources, drawImage);
    drawGameElements();
    drawDescriptionBoxes();
    };

    </script>

</head>
<body>

<section hidden>
<img id="startButton" src="images/startButton.png" alt="Start Button" width="179" height="180" href="javascript:drawLevelOneElements();"/>
<img id="box" src="images/box.png" alt="box.png" alt="Description Box" width="100" height="50" />

<img id="building" src="images/assets/building.png" alt="Asset" />
<img id="chair" src="images/assets/chair.gif" alt="Asset" />
<img id="drink" src="images/assets/drink.jpg" alt="Asset" />
<img id="food" src = "images/assets/food.gif" alt="Asset"/> 
```

在这个页面的“body”标签中，我有大约 40 张图片，所有图片都使用 img 标签包含，如下所示：

```
<img id="building" src="images/assets/building.png" alt="Asset" />
<img id="chair" src="images/assets/chair.gif" alt="Asset" />
<img id="drink" src="images/assets/drink.jpg" alt="Asset" />
<img id="food" src = "images/assets/food.gif" alt="Asset"/> 
```

这些是我在 JavaScript 中所指的，并添加到“源”数组中。

我的 drawleveloneelements.js 文件是我最初在问题中发布的代码的来源，如下所示：

```
 function drawLevelOneElements(){
    /*First, clear the canvas */ 
    context.clearRect(0, 0, myGameCanvas.width, myGameCanvas.height);
    /*This line clears all of the elements that were previously drawn on the canvas. */
    /*Then redraw the game elements */
    drawGameElements(); 
    /*Call the function to enable drag and drop */
    canvasState(document.getElementById('gameCanvas'));

    /*Create the four description areas, and place them near the bottom of the canvas */
    /*Create boxes with rounded corners for the description areas */
    CanvasRenderingContext2D.prototype.drawDescriptionArea = function(x, y, width, height, radius, stroke){
        if(typeof stroke == "undefined" ){
            stroke = true;
        }
        if(typeof radius === "undefined"){
            radius = 5;
        }
        this.beginPath();
        this.moveTo(x + radius, y);
        this.lineTo(x + width - radius, y);
        this.quadraticCurveTo(x + width, y, x + width, y + radius);
        this.lineTo(x + width, y + height - radius);
        this.quadraticCurveTo(x + width, y + height, x + width - radius, y + height);
        this.lineTo(x + radius, y + height);
        this.quadraticCurveTo(x, y + height, x, y + height - radius);
        this.lineTo(x, y + radius);
        this.quadraticCurveTo(x, y, x + radius, y);
        this.closePath();
        if(stroke){
            context.stroke();
        }
    }

    context.drawDescriptionArea(70, 400, 120, 70);
    context.font = '25pt Calibri';
    context.strokeText('Asset', 90, 440);

    context.drawDescriptionArea(300, 400, 120, 70);
    context.strokeText('Liability', 310, 440);

    context.drawDescriptionArea(540, 400, 120, 70);
    context.strokeText('Income', 550, 440);

    context.drawDescriptionArea(750, 400, 180, 70);
    context.strokeText('Expenditure', 760, 440);

    /*Now draw the images to the canvas */
    /*First, create variables for the x & y coordinates of the image that will be drawn.
    the x & y coordinates should hold random numbers, so that the images will be 
    drawn in random locations on the canvas.*/
    //var imageX = Math.floor(Math.random()*100);
    //var imageY = Math.floor(Math.random()*100);
    var imageWidth = 50;
    var imageHeight = 50;

    /*Create a 'table' of positions that the images will be drawn to */
    //var imagePositionsX = [20, 80, 140, 200, 260, 320, 380, 440, 500, 560];
    //var imagePositionsY = [20, 60, 100, 140, 180, 220, 260, 300, 340, 380];

    /*Draw all images from assetsImageArray */
    /*Use a while loop to loop through the array, get each item and draw it. */
    var arrayIteration = 0;
    console.log('All Images Array length: ' + allImagesArray.length); /*Display the length of the array in the console, to check it's holding the correct number of images. */
    while(arrayIteration < allImagesArray.length){
        context.drawImage(allImagesArray[arrayIteration], imageX, imageY, imageWidth, imageHeight); /*Declare variables for image height and width, so it can be accessed elsewhere */
        allImagesArray[arrayIteration].setAttribute('draggable', 'true');
        console.log(arrayIteration); /*Display the current array position that's being drawn */
        arrayIteration = arrayIteration+1;
        /*Now try changing the values of imageX & imageY so that the next image is drawn to a 
        different location*/
        imageX = Math.floor(Math.random()*950);
        imageY = Math.floor(Math.random()*350);

    }

} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-02T15:40:41.020

好的，首先，不要使用*while*；用于。尝试这个。

```
for(var arrayIteration = 0, arraylen = allImagesArray.length; arrayIteration < arraylen; arrayIteration++){
        /*Movethe var initialization & setting to the top of the loop*/
        var imageX = Math.floor(Math.random()*950);
        var imageY = Math.floor(Math.random()*350);            
        context.drawImage(allImagesArray[arrayIteration], imageX, imageY, imageWidth, imageHeight); /*...*/
        allImagesArray[arrayIteration].setAttribute('draggable', 'true');
        console.log(arrayIteration); /*... */
} 
```

# java - Primefaces数据表分页不起作用

> ID：13937398
> 
> 赞同：4
> 
> 时间：2012-12-18T16:32:40.273
> 
> 标签：java, spring, hibernate, jsf-2, primefaces

我有一个使用 JSF2.0、Spring3 和 Hibernate4 的应用程序。

我在 Primefaces 3.4.2 数据表中显示值，问题是当我单击分页时，数据表行始终保留在前 10 条记录中。它不显示接下来的 10 条记录。

我的数据表代码

```
<h:form>
        <p:dataTable id="dataTable" var="req" value="#{reqMB.myList}"
            paginator="true" rows="10"
            paginatorTemplate="{CurrentPageReport}  {FirstPageLink} {PreviousPageLink} {PageLinks} {NextPageLink} {LastPageLink} {RowsPerPageDropdown}"
            rowsPerPageTemplate="5,10,15">
            <f:facet name="header">          

        </f:facet>
            <p:column>
                <f:facet name="header">
                    <h:outputText value="XXX" />
                </f:facet>
                <h:outputText value="#{req.bbbb}" />
            </p:column>

            <p:column>
                <f:facet name="header">
                    <h:outputText value="XXXXS" />
                </f:facet>
                <h:outputText value="#{req.kkjj}" />
            </p:column>

            <p:column>
                <f:facet name="header">
                    <h:outputText value="XXXXXOO" />
                </f:facet>
                <h:outputText value="#{req.nnnn}" />
            </p:column>

            <p:column>
                <f:facet name="header">
                    <h:outputText value="XXXXKK" />
                </f:facet>
                <h:outputText value="#{req.kkkk}" />
            </p:column>

            <p:column>
                <f:facet name="header">
                    <h:outputText value="XKKKK" />
                </f:facet>
                <h:outputText value="#{req.pppp}" />
            </p:column>

            <p:column>
                <f:facet name="header">
                    <h:outputText value="LLLL" />
                </f:facet>
                <h:outputText value="#{req.llll}" />
            </p:column>
        </p:dataTable>
    </h:form> 
```

托管豆

```
@Named("reqMB")
@Scope("request")
public class MyBean implements Serializable {

    private static final long serialVersionUID = 1L;

    @Inject
    MyService myService;

    List<MyClass> myList;

    public List<MyClass> getMyList() {
        try {
            myList= new ArrayList<MyClass>();
            myList.addAll(getMyService().getMymethod());
        } catch (Exception e) {
            e.printStackTrace();
        }
        return myList;
    } 
```

我该如何解决这个问题？

更新 1

我注意到，当我显示少量记录时，分页工作正常，但是当我显示超过 1300 条记录时，分页不起作用。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-19T08:59:49.013

我刚刚尝试了 30000 条记录，它工作正常。值得注意的一件事是 getMyList 方法被多次调用（在我的情况下，在渲染响应阶段是 6 次）并且每次调用它时，您的 bean 都会获取/生成一个全新的列表，这可能是导致问题（尽管我尝试在我的 getter 方法中生成一个新列表，但它工作正常）。

一般来说，建议不要放任何业务逻辑相关的代码。相反，在许多情况下，最好在 @PostConstruct 方法或其他地方填充列表。请参阅 BalusC 发布的帖子，它可能会有所帮助。 [为什么 JSF 多次调用 getter](https://stackoverflow.com/questions/2090033/why-jsf-calls-getters-multiple-times/2090062#2090062) 你也可以阅读这篇文章以了解延迟加载 [高效的 JSF 分页](https://stackoverflow.com/questions/7382486/efficient-jsf-pagination)

以下是我的测试代码：

```
<h:body>
    <h:form>
        <p:dataTable id="dataTable" var="car" value="#{tableBean.cars}"
                     paginator="true" rows="10"
                     paginatorTemplate="{CurrentPageReport}  {FirstPageLink} {PreviousPageLink} {PageLinks} {NextPageLink} {LastPageLink} {RowsPerPageDropdown}"
                     rowsPerPageTemplate="5,10,15">
            <f:facet name="header">
                Ajax Pagination
            </f:facet>

            <p:column>
                <f:facet name="header">
                    <h:outputText value="Model" />
                </f:facet>
                <h:outputText value="#{car.model}" />
            </p:column>

            <p:column>
                <f:facet name="header">
                    <h:outputText value="Manufacturer" />
                </f:facet>
                <h:outputText value="#{car.manufacturer}" />
            </p:column>

            <p:column>
                <f:facet name="header">
                    <h:outputText value="Other Information" />
                </f:facet>
                <h:outputText value="#{car.otherInformation}" />
            </p:column>
        </p:dataTable>
    </h:form>
    <ui:debug hotkey="x"/>
</h:body> 
```

这是支持bean：

```
@ManagedBean
@RequestScoped
public class TableBean implements Serializable {

    private List<Car> cars;

    @PostConstruct
    public void init() {
        System.out.println("A new backing bean has been created");
        cars = new ArrayList<Car>();
        populateRandomCars(cars, 300000);
    }

    private void populateRandomCars(List<Car> list, int size) {
        for (int i = 0; i < size; i++) {
            list.add(new Car(i, i, UUID.randomUUID().toString()));
        }
    }

    public List<Car> getCars() {
//If i populate the list here I can still get the correct result.
//        cars = new ArrayList<Car>();
//        populateRandomCars(cars, 30000);
        return cars;
    }

    public void setCars(List<Car> cars) {
        this.cars = cars;
    }
} 
```

最后是模型类：

```
public class Car {
    private int manufacturer;
    private int model;
    private String otherInformation;

    public Car(int manufacturer, int model, String otherInformation){
        this.manufacturer = manufacturer;
        this.model = model;
        this.otherInformation = otherInformation;
    } 

    //Getters and Setters 
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-05-03T03:48:38.880

问题是，当您以这种方式使用时，您每次都在创建数据表：

```
public List<MyClass> getMyList() { 
  ...
  myList= new ArrayList<MyClass>();
  ...
} 
```

您需要初始化第一个 myList 属性，例如您可以使用 @PostContruct

```
@PostConstruct
public void init() {
   myList= new ArrayList<MyClass>();
} 
```

然后，您可以使用：

```
public List<MyClass> getMyList() { 
   return myList
} 
```

这甚至适用于惰性数据表

# jquery - JQuery 表单验证规则语法

> ID：13937401
> 
> 赞同：2
> 
> 时间：2012-12-18T16:32:46.947
> 
> 标签：jquery, validation, jquery-validate

我正在尝试将 jquery 验证与规则/消息集一起使用，但似乎无法使其正常工作。对 JQuery 来说相对较新，如果这是一个基本问题，我们深表歉意。我正在尝试使用 document.forms[0] 而不是表单 ID。它适用于字段具有 class="required" 的简单验证，但如果我尝试引入规则则不能。非常感谢任何帮助。这是代码：

```
<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" 
                "http://www.w3.org/TR/html4/loose.dtd">
<html>
<head>
  <script src="http://code.jquery.com/jquery-latest.js"></script>
  <script type="text/javascript" src="http://jzaefferer.github.com/jquery-        validation/jquery.validate.js"></script>
  <script>
  $(document).ready(function(){
    $(document.forms[0]).validate({
    rules: {
      cname: {
      required: true,
    }
    },
    messages: {
      cname: "Please enter a valid Name."
    },
  });
  });
  </script>

</head>
<body>

 <form class="cmxform" id="commentForm" method="get" action="">
 <fieldset>
   <legend>A simple comment form with submit validation and default messages</legend>
  <p>
     <label for="cname">Name</label>
     <em>*</em><input id="cname" name="name"/>
   </p>

   <p>
     <input class="submit" type="submit" value="Submit"/>
   </p>
 </fieldset>
 </form>
</body>
</html> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-18T17:18:00.443

我想我会回答这个问题，因为我的评论是正确的。

尝试将`name`属性也设置为“cname”。验证器查找`name`属性。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-18T17:32:07.677

首先，您可以通过 , 来定位您的`id`表单`#commentForm`。其次，问题的根本原因是您`input`按其`id`属性不正确地定位该字段。但是，`.validate()`插件正在寻找`name`属性，在​​您的情况下，它也恰好是`"name"`. 我在`name`下面的示例中更改了属性的值，以使其更清楚。

**jQuery：**

```
$(document).ready(function(){
    $('#commentForm').validate({
        rules: {
           username: {
               required: true
           }
        },
        messages: {
           username: "Please enter a valid Name."
        }
    });
}); 
```

**HTML：**

```
<form class="cmxform" id="commentForm" method="get" action="">

    <input type="text" id="cname" name="username" />

    .... 
```

**[工作演示：](http://jsfiddle.net/egdEn/)**

[http://jsfiddle.net/egdEn/](http://jsfiddle.net/egdEn/)

[有关详细信息，请参阅在线文档。](http://docs.jquery.com/Plugins/Validation)

# c# - ASP.NET WebApi 中的 Fire-forget 和单向调用

> ID：13937407
> 
> 赞同：5
> 
> 时间：2012-12-18T16:33:13.393
> 
> 标签：c#, asynchronous, asp.net-web-api, task-parallel-library, async-ctp

我完全理解 HTTP 世界不是单向调用的最佳选择，而 WebApi 最适合 HTTP 详细通信。毫无疑问，WCF 是这里的赢家。但是，如果你已经有一个暴露了一堆动词的 ApiController 并且在某些时候你还需要一个单向调用呢？而且您不想为此托管/维护另一个服务 (WCF)。

```
Task<HttpResponseMessage> response = client.PostAsJsonAsync<Log>("api/log", log) 
```

如果您不处理响应，那么您将得到类似于即发即弃的东西。这是 WebApi 中的唯一方法还是有其他解决方案？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-12-18T19:21:05.930

为什么不直接这样调用而忽略返回的任务呢？

```
client.PostAsJsonAsync<Log>("api/log", log); 
```

我对所有调用都执行此操作，并在必要时使用响应管道中的处理程序来处理响应。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-12-18T17:39:26.117

您最好的选择是**启动一个新任务**并立即发送响应*而不是*返回任务：

```
public void PostDoFireAndForget() // and NOT public Task PostDoFireAndForget()
    {
        Task.Factory.StartNew
            (() =>
                {
                    // ... start the operation here
                    // make sure you have an exception handler!!
                }

            );

    } 
```

# asp.net - 查询中的语法错误（缺少运算符）

> ID：13937408
> 
> 赞同：0
> 
> 时间：2012-12-18T16:33:18.630
> 
> 标签：asp.net, sql, vb.net

我正在尝试向我正在构建的网站添加评论。由于审查的内容被分成 3 个表，我试图在数据库中执行 3 次插入以进行一次审查。该页面在我运行它时显示，所以我知道它大部分都在工作，但是当我单击提交按钮时，我得到一个：

```
Syntax error (missing operator) in query expression '3')'' error message. 
```

据说问题出在这行代码中：

```
Line 86:         dbInsert.ExecuteNonQuery() 
```

这是我在本节中的代码：

```
Dim sql As String = "INSERT INTO MovieReviews (MovieID, MReviewID, ReviewerType, ReviewDate, UserID) "
    sql = sql & " VALUES ('" & movID & "','" & review_id & "','" & 2 & "','" & Date.Now & "'," & uID & "')'"
    Dim sql2 As String = "INSERT INTO MReviewRatings (MReviewID, ValueForMoney, ActingAbility, SpecialEffects, Plot, Total) "
    sql2 = sql2 & " VALUES ('" & movID & "','" & moneyStar(moneyStarRating) & "','" & actingStar(actingStarRating) & "','" & effectsStar(effectStarRating) & "','" & plotStar(plotStarRating) & "','" & totalStar(avg) & "')'"
    Dim sql3 As String = "INSERT INTO MReviewTexts (MReviewID, ReviewText) "
    sql3 = sql3 & " VALUES ('" & review_id & "','" & txtReviewText.Text & "')'"
    dbInsert.CommandText = sql
    dbInsert.CommandType = CommandType.Text
    dbInsert.Connection = aConnection

    dbInsert2.CommandText = sql2
    dbInsert2.CommandType = CommandType.Text
    dbInsert2.Connection = aConnection
    dbInsert3.CommandText = sql3
    dbInsert3.CommandType = CommandType.Text
    dbInsert3.Connection = aConnection
    dbInsert.ExecuteNonQuery()
    dbInsert2.ExecuteNonQuery()
    dbInsert3.ExecuteNonQuery() 
```

我不确定是什么导致了这个问题。有谁知道我如何才能将评论插入数据库？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-18T16:54:28.617

正如 freefaller 所指出的那样，通过以这种方式实现您的代码，您将自己暴露在 SQL 注入攻击中。

你最好这样写你的查询：

```
Dim sql As String = "INSERT INTO MovieReviews (MovieID, MReviewID, ReviewerType, ReviewDate, UserID) " & _
    " VALUES (@movID,@review_id,@reviewerType,@timestamp,@userid)"
dbInsert.CommandText = sql
dbInsert.CommandType = CommandType.Text
dbInsert.Connection = aConnection
dbInsert.Parameters.Add(New SQLParameter("@movID",movID))
dbInsert.Parameters.Add(New SQLParameter("@review_id",review_id ))
dbInsert.Parameters.Add(New SQLParameter("@reviewerType",2))
dbInsert.Parameters.Add(New SQLParameter("@timestamp",Date.Now))
dbInsert.Parameters.Add(New SQLParameter("@userid",uID))
dbInsert.ExecuteNonQuery() 
```

其余的查询可以得到类似的处理。此更改不仅可以保护您免受 SQL 注入攻击，还可以使您的数据访问层代码更易于管理。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-18T16:35:00.203

这条线看起来像是在结尾附近缺少一个单引号（就在 之前`uID`）：

```
sql = sql & " VALUES ('" & movID & "','" & review_id & "','" & 2 & "','" & Date.Now & "'," & uID & "')'" 
```

s/b：

```
sql = sql & " VALUES ('" & movID & "','" & review_id & "','" & 2 & "','" & Date.Now & "','" & uID & "')'" 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-18T16:37:35.483

假设所有的文件都是 Varchar ......

```
Dim sql As String = "INSERT INTO MovieReviews (MovieID, MReviewID, ReviewerType, ReviewDate, UserID) "
sql = sql & " VALUES ('" & movID & "','" & review_id & "','" & 2 & "','" & Date.Now & "','" & uID & "')"
Dim sql2 As String = "INSERT INTO MReviewRatings (MReviewID, ValueForMoney, ActingAbility, SpecialEffects, Plot, Total) "
sql2 = sql2 & " VALUES ('" & movID & "','" & moneyStar(moneyStarRating) & "','" & actingStar(actingStarRating) & "','" & effectsStar(effectStarRating) & "','" & plotStar(plotStarRating) & "','" & totalStar(avg) & "')"
Dim sql3 As String = "INSERT INTO MReviewTexts (MReviewID, ReviewText) "
sql3 = sql3 & " VALUES ('" & review_id & "','" & txtReviewText.Text & "')" 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-12-18T16:38:00.860

您的语句末尾有一个额外的单引号。

目前，字符串将导致类似...

```
insert into (x,y,z) values ('a','b','c')' 
```

而不是这条线就像......

```
sql = sql & " VALUES ('" & movID .... uID & "')'" 
```

你应该有（注意缺少`'`）...

```
sql = sql & " VALUES ('" & movID .... uID & "')" 
```

* * *

附带说明，如果您的列是基于数字的，则不需要将值放在单引号内。

您还应该尝试通过使用[存储过程来防止](http://www.mssqltips.com/sqlservertutorial/160/sql-server-stored-procedure/)[SQL 注入攻击](http://en.wikipedia.org/wiki/SQL_injection)

# ruby-on-rails - 资产管道未预编译所需文件

> ID：13937418
> 
> 赞同：3
> 
> 时间：2012-12-18T16:33:55.020
> 
> 标签：ruby-on-rails, ruby-on-rails-3.1, asset-pipeline

我最近在我的 Rails 3.2 应用程序中添加了一个 CSS 文件，但我正在为资产管道而苦苦挣扎。目前，它说`ActionView::Template::Error (pdf.css isn't precompiled)`。

我已经`= require pdf`在我的`app/assets/stylesheets/application.css`文件中添加了一个。

还有什么必要的？

我必须添加`pdf.css`到`config.assets.precompile`吗？

如果是这样，为什么？不应该管它`require`吗？

我的`application.css`：

```
/*
*= require_self
*= require chosen
*= require pdf
*= require_tree ./screen
*/ 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-21T09:11:02.473

您是否在 html 模板中的某处明确要求 pdf.css？

正如[资产管道官方指南中所解释的](http://guides.rubyonrails.org/asset_pipeline.html#search-paths)，您在 html 中明确需要的每个文件（在清单文件之外）都需要通过将它们添加到`config.assets.precompile`.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-18T16:49:50.187

尝试在您的 application.css 中编写（顺便说一句，它不应该是 application.css.scss 吗？）：

```
*= require_tree . 
```

这应该编译所有样式表。

也许您也可以尝试：

```
rake assets:precompile 
```

它将在您的公共文件夹中生成预编译的样式表（好吧，如果我是对的......）。然后，您可以知道您的文件是否包含在该过程中。（不要忘记在开发中删除已编译的样式表，否则浏览器将始终加载此样式表，并且您之后不会进行任何更改）

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-18T18:55:02.257

pdf.css 文件中可能存在错误（错字）。看看你是否能找到任何缺少的分号或括号。

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2012-12-19T01:20:34.037

你需要`pdf.css`在`config.assets.precompile`你的`config/environments/production.rb`.

Rails 的原因是假设您希望将所有样式集中在一个地方。

这也节省了预编译的空间。

示例：以下文件：

*   pdf.css
*   屏幕.css
*   打印.css

然后将全部编译成`application.css`.

# c - fork+exec 模式可以用 system(run-command-in-background) 代替吗？

> ID：13937420
> 
> 赞同：2
> 
> 时间：2012-12-18T16:34:09.960
> 
> 标签：c, unix

如果 fork 和 exec 模式仅用于运行程序而不冻结当前程序，那么有什么优势，例如，使用这一行：

```
system("program &"); // run in background, don't freeze 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-12-18T16:37:10.270

该`system`函数创建一个新的 shell 实例来运行程序，这就是您可以在后台运行它的原因。`fork`与/的主要区别`exec`在于，`system`像这样使用实际上会创建两个进程，即 shell 和程序，并且您不能通过匿名管道直接与新程序通信。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-18T16:43:51.413

fork+exec 比 system() 轻得多。后者将为 shell 创建一个进程，shell 将解析给定的命令行并调用所需的可执行文件。这意味着更多的内存、更多的执行时间等等。显然，如果程序将在后台运行，这些额外的资源只会暂时消耗掉，但根据你使用它的频率，差异会非常明显。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-18T16:47:22.993

系统的[手册页](http://linux.die.net/man/3/system)清楚地说明`system`通过“调用 /bin/sh -c*命令*”来执行命令，这意味着系统*至少*创建两个进程：`/bin/sh`然后是程序（shell 启动文件可能会产生多个进程）

这可能会导致一些问题：

*   可移植性（如果系统无权访问`/bin/sh`，或者不使用`&`在后台运行进程怎么办？）
*   错误处理（您无法知道进程是否因错误退出）
*   与流程交谈（您不能向流程发送任何内容，或从中获取任何内容）
*   性能等

*正确*的方法是`fork`+ `exec`，它只创建一个进程。它使您可以更好地控制性能和资源消耗，并且更容易修改以执行简单、重要的事情（如错误处理）。

# c# - sql server 数据库和 db2 数据库之间的同步

> ID：13937422
> 
> 赞同：0
> 
> 时间：2012-12-18T16:34:14.213
> 
> 标签：c#, sql-server-2008, db2

我有一个 SQL Server 数据库和一个 DB2 数据库，我需要定期自动将 sql 数据库中特定表中的特定列同步到 DB2 数据库中特定表中的特定列。

最好的方法是什么？

***SQL 数据库信息：***

```
Database Name: "SQLTest" 
Table Name:    "SQLTable"
Column Name:   "SqlValue" 
```

***DB2 数据库信息：***

```
Database Name: "Db2Test"
Table Name:    "DB2Table"
Column Name:   "Db2Value" 
```

我知道我可以使用 Windows 服务以编程方式执行此操作，但我正在寻找更好的解决方案

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-18T16:39:02.500

我会做到的

1.  创建[SqlDataAdapter](http://msdn.microsoft.com/en-us/library/system.data.sqlclient.sqldataadapter.aspx)并从 sql填充[DataTable](http://msdn.microsoft.com/en-us/library/system.data.datatable.aspx)
2.  [将DataTable](http://msdn.microsoft.com/en-us/library/system.data.datatable.aspx)行状态更改为已[更改](http://msdn.microsoft.com/en-gb/library/ch2aw0w6%28v=vs.90%29.aspx)
3.  使用现有[DataTable](http://msdn.microsoft.com/en-us/library/system.data.datatable.aspx)创建[Db2DataAdapter并更新数据库](http://publib.boulder.ibm.com/infocenter/db2luw/v9r5/index.jsp?topic=%2Fcom.ibm.swg.im.dbclient.adonet.ref.doc%2Fdoc%2FDB2DataAdapterClass.html)

# jquery - 为什么我的引导代码不起作用

> ID：13937426
> 
> 赞同：1
> 
> 时间：2012-12-18T16:34:25.173
> 
> 标签：jquery, html, css, twitter-bootstrap

我从他们的网站下载了 Bootstrap 代码。我在引导目录中编写了以下 HTML 文件（以便相对路径正确）

```
<!DOCTYPE html>

<html lang = "en">

<head>
<title>Test</title>
<link href="css/bootstrap.css" rel="stylesheet" type="text/css" />
<script src="http://code.jquery.com/jquery-latest.js"></script>
<script src="js/bootstrap.min.js"></script>

</head>
<body>

Hello world
<ul class="dropdown-menu" role="menu" aria-labelledby="dropdownMenu">
<li><a tabindex="-1" href="#">Action</a></li>
<li><a tabindex="-1" href="#">Another action</a></li>
<li><a tabindex="-1" href="#">Something else here</a></li>
<li class="divider"></li>
<li><a tabindex="-1" href="#">Separated link</a></li>
</ul>

</body>
</html> 
```

当我在 chrome 中打开该文件时，除了“Hello World”之外，我什么也没看到。我看到了另一个问题[为什么我的引导代码不起作用？](https://stackoverflow.com/questions/12649246/why-is-my-bootstrap-code-not-working) 我已经注意相对路径是正确的，但代码仍然无法正常工作。我确信它非常愚蠢。谁能帮我发现它？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-18T16:38:12.363

Bootstrap 可以正常工作，您的问题是您从 bootstrap 文档中复制并粘贴了错误的代码。

看起来您刚刚复制并粘贴了位于 components.html 页面顶部的[代码](http://twitter.github.com/bootstrap/components.html#dropdowns)。

这纯粹是为了说明什么是可能的。如果你只想显示这个，你也想改变它：

```
<ul class='dropdown-menu' role='menu' aria-labelledby='dropdownMenu' style='display: block; position: static'> 
```

但是，对于实际的有用性，您需要阅读文档的[这一](http://twitter.github.com/bootstrap/javascript.html#dropdowns)部分，它将告诉您如何有效地使用它。

它正确工作的[JSFiddle](http://jsfiddle.net/KDQGE/5/)

# redis - 如何使用 ServiceStack Redis impl 自定义序列化

> ID：13937427
> 
> 赞同：1
> 
> 时间：2012-12-18T16:34:26.727
> 
> 标签：redis, servicestack

为 ServiceStack redis 库提供自定义序列化的最简单方法是什么，[https://github.com/ServiceStack/ServiceStack.Redis](https://github.com/ServiceStack/ServiceStack.Redis)

我已经在谷歌上做了一些挖掘，但除了必须实现 IRedisNativeClient 之外没有太多运气......这听起来像是很多工作。

谢谢，

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-19T11:57:50.837

结果真的是一个愚蠢的问题。无类型的客户端接受一个字符串参数。在进一步阅读时，似乎所有类型化的客户端所做的都是序列化为字节数组，然后将字节编码为 UTF8 字符串。因此，通过使用非类型化客户端，您可以随心所欲地进行序列化。

# c# - 将列表转换为自定义对象

> ID：13937429
> 
> 赞同：0
> 
> 时间：2012-12-18T16:34:38.153
> 
> 标签：c#, .net, linq, linq-to-xml

我正在使用 XDocument 库读取 XML 文档，并在 C# 中使用 LINQ 查询列表。我将一个匿名列表返回到一个隐式变量中。anymous 类型是一个简单的结构。我不确定我做错了什么，但想将其返回到我已经定义的类的列表中，但在将此匿名类型转换为我的自定义类时出错。我是否错过了一些明显的东西。我不想在这里使用动态类型。

```
public class CustomClass
    {
        public string id { get; set; }
        public int fileName { get; set; }
    }

XDocument optXML = XDocument.Load(pathName);

var optInput = (from item in optXML.Descendants("Group")
                    select new
                    {
                        id = (int)item.Attribute("ID"),
                        fileName = (string)item.Attribute("FileName")
                    }).ToList();
foreach (CustomClass item in optInput)
        {
            Console.WriteLine(item.id);
        } 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-18T16:36:44.023

而不是选择一个`new{}`select a `new CustomClass()`：

```
public class CustomClass
    {
        public string id { get; set; }
        public int fileName { get; set; }
    }

XDocument optXML = XDocument.Load(pathName);

var optInput = (from item in optXML.Descendants("Group")
                    select new CustomClass()
                    {
                        id = (int)item.Attribute("ID"),
                        fileName = (string)item.Attribute("FileName")
                    }).ToList();
foreach (CustomClass item in optInput)
        {
            Console.WriteLine(item.id);
        } 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-18T16:37:01.393

我认为您想投影`CustomClass`而不是匿名对象

```
List<CustomClass> optInput = (from item in optXML.Descendants("Group")
                select new CustomClass 
                {
                    id = (int)item.Attribute("ID"),
                    fileName = (string)item.Attribute("FileName")
                }).ToList(); 
```

没有特定的理由将`var`您的代码更改为`List<CustomClass>`- 我只是为了向您展示您实际得到的结果。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-18T16:35:56.957

您可以使用`var`而不是自定义类型，它将是编译器在您的投影中使用新生成的类型。

```
foreach (var item in optInput)
{
     Console.WriteLine(item.id);
} 
```

或者你可以创建你的类的对象，`CustomClass`而不是使用匿名类型。

```
 var optInput = (from item in optXML.Descendants("Group")
                select new CustomClass 
                {
                    id = (int)item.Attribute("ID"),
                    fileName = (string)item.Attribute("FileName")
                }).ToList(); 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-12-18T16:38:00.280

您收到此错误是因为您在查询中选择的匿名类型不是 CustomClass。您可以像这样简单地选择 Customclass 本身

```
 select new CustomClass { id = , fileName = } 
```

或在 foreach 中像这样使用异常类型

```
 foreach (var item in optInput) 
    { 
        Console.WriteLine(item.id); 
    } 
```

你会得到完整的智能感知。

# logging - 有人可以解释标准 Jetty 日志背后的命名约定吗？

> ID：13937434
> 
> 赞同：0
> 
> 时间：2012-12-18T16:35:04.083
> 
> 标签：logging, jetty

当我查看我们的 Jetty 日志文件夹（对我们来说是 /opt/jetty/logs）时，我看到了以下“内置”日志文件。

像这样的一系列文件...

1.  2012_11_16.stderrout.log
2.  2012_11_16.stderrout.log.231810595
3.  2012_11_16.stderrout.log.232105322
4.  2012_11_16.stderrout.log.234629703

和

RPActivityLog.txt

和

开始日志

首先stderrout、RpActivyLog（这是标准吗？）和start.log有什么区别。最后 log.xxxxxx 后面的数字是什么意思？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-18T17:50:11.007

Well jetty`stderroout.log`根据下面给出的配置写入`/etc/jetty-loggin.xml`

```
 <New id="ServerLog" class="java.io.PrintStream">
  <Arg>
    <New class="org.eclipse.jetty.util.RolloverFileOutputStream">
      <Arg><Property name="jetty.logs" default="./logs"/>/yyyy_mm_dd.stderrout.log</Arg>
      <Arg type="boolean">false</Arg>
      <Arg type="int">1</Arg>
      <Arg><Call class="java.util.TimeZone" name="getTimeZone"><Arg>GMT</Arg></Call></Arg>
      <Get id="ServerLogName" name="datedFilename"/>
    </New>
  </Arg>
</New> 
```

*   `RpActivyLog`不是标准的，可能是由您的 webapp 编写的。
*   如果您正在使用`--daemon`，stderr 和 stdout 重定向到`${jetty.log}/start.log`
*   log.xxxx 意味着如果你经常重启码头，旧的日志文件可能会被一些随机数重命名。

有关更多参考，请参阅[Jetty/Feature/Jetty Logging](http://wiki.eclipse.org/Jetty/Feature/Jetty_Logging)。

# arrays - 将数百万个粒子的 x,y,z 位置转化为可视化的最佳方法

> ID：13937438
> 
> 赞同：0
> 
> 时间：2012-12-18T16:35:27.350
> 
> 标签：arrays, visualization, mesh, particles, decomposition

我对人们用来可视化盒子中数百万个粒子的不同算法感兴趣。我知道您可以使用 Cloud-In-Cell、自适应网格、内核平滑、最近网格点方法等来减少内存负载，但是关于如何在线执行这些操作的文档很少。

即我有数组：

```
x,y,z
1,2,3
4,5,6
6,7,8
xi,yi,zi 
```

例如，i = 1 亿。我不希望像 Mayavi/Paraview 这样的包来执行此操作，我想自己编写代码，然后将分解的矩阵加载到 Mayavi（而不是即时渲染）如果我尝试使用粒子，我可怜的 8Gb Macbook 会爆炸职位。任何教程将不胜感激。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-18T16:54:39.700

为复杂的多维数据分析和创建可视化是很复杂的。最好的可视化几乎总是取决于数据是什么，以及数据中存在什么关系。当然，您可能希望创建数据的可视化以显示和探索关系。最终，这归结为尝试不同的可能性。

我的建议是考虑数据，并尝试找到合理的方法来分割维度。3D 绘图，如曲面图或体素渲染可能是您想要的。就个人而言，我更喜欢尝试寻找 2D 表示，因为它们更容易理解并与其他人交流。等高线图很棒，因为它们以 2D 形式显示 3D 信息。您可以并排显示一系列等高线图，也可以在延时摄影中添加第四个维度。还有一些创造性的方法可以使用颜色来添加维度，同时保持可视化的可理解性——这是最重要的。

我看到您想自己编写代码。我明白那个。这样做需要付出不小的努力，之后，您可能无法进行有效的可视化。我的建议是：首先使用一个工具来帮助您制作可视化原型！我使用 gnuplot 取得了一些成功，尽管我确信还有其他选择。

一旦你对数据有了很好的处理，以及如何传达它的含义，那么你就可以很好地编写一个好的可视化代码。

**更新**

我将为您描述的数据提供建议。听起来好像您想要/需要点密度图。这些在地理信息系统中很流行，但还有其他用途。我以前没有使用过，但基本思想是使用一个函数来估计 3D 空间中的密度。密度成为第四维度。一些相对简单的东西，比如下面的等式，可能就足够了。

![在此处输入图像描述](../Images/029704d88c3ec8363da823fb1d337401.png)

点密度图可能比原始粒子数据更容易切片、汇总和渲染。

我分析的数据具有不同的性质，所以我以前没有使用过这种特殊的方法。希望它被证明是有帮助的。

**PS。**我刚刚在下面看到您的评论，我不确定这些信息是否会对您有所帮助。但是，无论如何，我都会发布我的更新，以防万一它是有用的信息。

# php - 如何加快我的 php PSQL 查询

> ID：13937439
> 
> 赞同：1
> 
> 时间：2012-12-18T16:35:28.260
> 
> 标签：php, postgresql

要求的表定义

```
 Table "public.call_record"
     Column      |          Type          |   Modifiers
-----------------+------------------------+---------------
 cntrct_id       | character varying(15)  | not null
 call_regard     | text                   |
 port_type       | character varying(9)   |
 inst            | text                   |
 info_taken      | character varying(40)  |
 log_date        | date                   | not null
 log_time        | time without time zone | not null
 act_taken       | text                   |
 use_material    | text                   |
 targ_pest       | integer                |
 work_comp_by    | text                   |
 emp_no          | integer                |
 comp_date       | date                   |
 job_start_time  | time without time zone |
 job_leave_time  | time without time zone |
 comp_val        | boolean                | default false
 fti_call_regd   | public.tsvector        |
 fti_inst        | public.tsvector        |
 fti_act_take    | public.tsvector        |
 route           | character(3)           |
 act_port        | text                   |
 targ_pest_opt   | text                   |
 call_regard_opt | text                   |
 targpest_other  | text                   |
 date_sched      | date                   |
 custord_num     | integer                |
 dist_id         | integer                |
 phone_slot      | integer                | default 0
 Indexes:
    "call_record_pkey" PRIMARY KEY, btree (cntrct_id, log_date, log_time)
    "route_index" hash (route)
 Check constraints:
    "call_record_targ_pest_check" CHECK (targ_pest <= 100)
    "call_record_targ_pest_check1" CHECK (targ_pest >= 0)

          Table "public.per_call"
 Column  |         Type         | Modifiers
---------+----------------------+-----------
 dist_id | character varying(2) |
 route   | character varying(2) |
 type    | character(1)         |
 total   | integer              | 
```

我需要从 2 个表中获取数据并将其打印在一个报告中。报告应如下所示：

```
district | route | type | total | callbacks
         | 01    | T    | 12    | 5
         | 02    | P    | 0     | 0
         | 03    | P    | 3     | 1
2        | 01    | T    | 4     | 1
         | 02    | T    | 1     | 0
         | 03    | P    | 0     | 0
etc... (this is theoretical sample data) 
```

所以，本质上我需要从表 per_call 中获取 dist_id、路由、类型和计数（*）以及从表 call_record 中获取 call_backs 的计数

问题：遍历表会使它变得非常缓慢。如何调整以下 PSQL 查询，以便不必循环并且可以正确回显表格数据？

让我知道是否有任何不透明的地方，我会尽力澄清

```
 echo    '<table align="center" border = 2>
            <th>DISTRICT</th>
            <th>ROUTE</th>
            <th>TYPE</th>
            <th>TOTAL</th>
            <th>CALL BACKS</th>';

    $SQL = " SELECT per_call.dist_id, per_call.route, per_call.type, per_call.total
            FROM per_call, call_record
            WHERE TRUE  ";

    if($type == 'termite'){
            $SQL = $SQL." AND per_call.type  = 'T' ";
    }
    else{
            $SQL = $SQL." AND per_call.type = 'P' ";
    }
    $SQL = $SQL."   AND call_record.dist_id = per_call.dist_id
                    AND call_record.log_date >= '$startDate'
                    AND call_record.log_date <= '$endDate'
                    ORDER BY per_call.dist_id, per_call.route, per_call.type    ASC ";

    echo    $SQL;
                    /*AND call_record.log_date = '$startDate'
                    AND call_record.log_date = '$endDate'*/

    $Q = pg_query($connect,$SQL);
    while($row = pg_fetch_row($Q)){
            $dist = $row[0];
            $route = $row[1];
            $type = $row[2];
            $total = $row[3];

            echo '<tr>';
            echo '<td align="center">'.$dist.'</td>';
            echo '<td align="center">'.$route.'</td>';
            echo '<td align="center">'.$type.'</td>';
            echo '<td align="center">'.$total.'</td>';

            $SQL2 = "SELECT COUNT(*)
                    FROM call_record
                    WHERE dist_id = $dist
                    AND route = '$route'
                    AND substring(cntrct_id from 2 for 1) = '$type'
                    AND substring(call_regard_opt from 2 for 1) = '1'

                     ";
            $Q2 = pg_query($connect,$SQL2);
            $row2 = pg_fetch_row($Q2);

            $callbacks = $row2[0];

            echo '<td align="center">'.$callbacks.'</td>';

            echo '</tr>';
    }

    echo "</table>"; 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-18T17:03:12.353

```
select pc.dist_id, pc.route, pc.type, pc.total,
    count(
        substring(cntrct_id from 2 for 1) = '$type'
        AND substring(call_regard_opt from 2 for 1) = '1'
        or null
    ) callbacks 
from
    per_call pc
    inner join
    call_record cr on cr.dist_id = pc.dist_id
where cr.log_date between '$startdate' and cr.log_date <= '$enddate'
group by pc.dist_id, pc.route, pc.type, pc.total
order by pc.dist_id, pc.route, pc.type asc 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-18T16:48:24.517

除非索引有问题，否则您的查询写得还不错，因此从查询形式的角度来看，它无法真正优化。你可以这样做虽然更清洁：

```
$SQL = "SELECT per_call.dist_id, per_call.route, per_call.type, per_call.total
  FROM per_call, call_record
 WHERE call_record.dist_id = per_call.dist_id
   AND per_call.type  = '".($type == 'termite' ? "T" : "P")."'
   AND call_record.log_date >= '$startDate'
   AND call_record.log_date <= '$endDate'
 ORDER BY per_call.dist_id, per_call.route, per_call.type" 
```

无论如何，这仍然容易受到 SQL 注入的影响。尝试使用[参数化查询](http://php.net/manual/en/function.pg-query-params.php)。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-18T17:09:07.270

您在任何一个表中都没有任何索引`dist_id`，这将使您的连接非常缓慢。在 dist_id 上添加索引，看看它改进了多少。

此外，循环内的查询将是您的死亡，因为您将执行很多很多查询。将内部查询工作到您的主查询中，这样您就只在数据库中执行一个查询。

# jquery - 单击链接时将请求发送到远程 URL？

> ID：13937442
> 
> 赞同：-3
> 
> 时间：2012-12-18T16:35:34.580
> 
> 标签：jquery

我们想为我们页面上的几个链接实现一个伪链接跟踪，并且很好奇您如何向远程 URL（信标/链接跟踪）发送请求，并且仍然将用户转发到下一页，打开一个 DIV，等等。基本上 onclick 它可以在幕后点击远程 URL 来跟踪他们点击的内容。很像使用 Google Analytics，但这是特定于应用程序的。

非常感谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-18T16:50:51.920

您能否使用 jQuery 在所有将 href 值提交到跟踪页面的锚标记上设置 onclick 事件？没有测试过，但可能是这样的：

```
$(function() {
    $("a").click(function(e) {
        var href = $(this).attr('href');
        $.post('track.php?ref=' + encodeURI(href));
    });
}); 
```

* * *

如果您只想跟踪某些链接，您可以将一个类添加到锚点。例如，添加`class="track"`到您的锚标记与下面的 jquery 结合。

```
$(function() {
    $("a.track").click(function(e) {
        var href = $(this).attr('href');
        $.post('track.php?ref=' + encodeURI(href));
    });
}); 
```

# java - 在 main 方法的类中扩展 Frame 类

> ID：13937443
> 
> 赞同：2
> 
> 时间：2012-12-18T16:35:37.597
> 
> 标签：java, inheritance, awt, frame, composition

今天在看我的讲义时，我不明白`extends`在这种情况下的目的是什么。考虑这段代码：

```
import java.net.*;    
import java.awt.*;

public class QueenApl extends Frame{ // Why extends??
  Image card;

public static void main(String[] args){
    QueenApl f = new QueenApl();
    f.show();    
}

public QueenApl(){
    setSize(400,400);
    try{
      URL u = new URL("file:/c:/windows/desktop/carn4.jpg");
      card=getToolkit().getImage(u); //Why getToolkit can be used directly?
    }catch(MalformedURLException e){
     System.out.println("Error in URL!"); System.exit(1);
    }  
}

public void paint(Graphics g){
      g.drawImage(card,120,50,this);
    }   
} 
```

1.  主方法类为什么要扩展`Frame`类？为什么不在`Frame`main 方法内或作为 class 的实例变量创建`QueenApl`？像这样：

    ```
    Frame someobj = new Frame(argument or none); 
    ```

2.  为什么不加前面的就`getToolkit()`可以直接使用呢？`classname.`是不是因为这个方法在类里面`Frame`，又因为main方法类继承`Frame`了，我们可以直接使用这个方法？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-18T16:58:22.197

您实际上不必扩展 Frame，它只是方便。将您的代码与不扩展 Frame 的代码进行比较。相反，您需要有一个 Frame 字段。

调用 setSize() 和 getToolkit() 等方法现在需要以 Frame 字段为前缀，因为**这**不再是 Frame。您的代码不需要它们，因为**这**是一个框架，您的类可以调用非私有祖先类的方法。

```
import java.net.*;    
import java.awt.*;

public class QueenApl { 
  Image card;
  Frame frame;

  public static void main(String[] args){
      QueenApl f = new QueenApl();
  }

  public QueenApl(){
    frame = new Frame();
    frame.setSize(400,400);
    try{
      URL u = new URL("file:/c:/windows/desktop/carn4.jpg");
      card=frame.getToolkit().getImage(u);
    } catch(MalformedURLException e){
      System.out.println("Error in URL!"); System.exit(1);
    } 
    frame.show();
  }

  public void paint(Graphics g){
    g.drawImage(card,120,50,frame);
  }   
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-18T16:39:01.683

`extends`是代表继承的关键字。

> 为什么 main 方法类扩展到 Frame ？为什么不在 main 方法中创建 Frame 或作为类 QueenApl Frame something = new Frame(argument or none) 的实例变量？

不同之处在于当您`extend Frame class`在类中获取它的方法时。即，您可以覆盖在QueenApl 类的框架类中声明的方法。

为了更好地理解这里有一个臭名昭著的`Animal`例子：

```
class Animal {
public void eat(){
//animal eat
}
class Dog extends Animal {
@override 
public void eat(){
//dog specific eat
}
}
} 
```

请注意，您已经覆盖了 Dog 类中的 eat 方法来实现特定于狗的吃操作。

> 2.）顺便说一下为什么可以直接使用getToolkit（）而不附加类名。前面呢？是不是因为这个方法在Frame类中，而且主方法类继承了Frame，我们可以直接使用该方法？

那是因为您的`getToolKit()`方法是从您的 s 继承`Frame clas`的，因此您不需要使用实例调用它。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-18T16:38:38.517

它继承了 JFrame，因此它可以覆盖paint 方法，从而允许将图像“卡片”绘制到屏幕上。如果不覆盖paint 方法，就无法访​​问图形对象以绘制到JFrame。

paint 方法带有一个 java.awt.Graphics 参数，它允许您绘制到 JFrame。重写“paint”方法是获取 Graphics 类以绘制到 JFrame 的唯一方法。

"getToolkit" 继承自 JFrame，直接进入你的 "QueenApl" 类。正因为如此，“getToolkit”现在在技术上是“QueenApl”类的成员。因此，在方法调用之前不得附加任何成员/类名。

如果你不明白我所说的“继承”或“扩展”是什么意思，请看[这个](http://docs.oracle.com/javase/tutorial/java/IandI/polymorphism.html)。

# android - 无法从第二个活动切换到第一个活动

> ID：13937445
> 
> 赞同：0
> 
> 时间：2012-12-18T16:35:50.500
> 
> 标签：android, android-layout, android-intent

我正在尝试一个具有两个屏幕（或活动）的简单应用程序。当我单击按钮时，我使用意图切换到另一个活动。这工作正常，但是当我尝试切换回前一个屏幕时从第二个活动开始（或活动），然后我得到错误，因为 SimpleIntent 已停止。SimpleIntent 是我的项目的名称。

为什么我不能切换回上一个屏幕？

这是我的 AndroidManifest 文件：

```
<?xml version="1.0" encoding="utf-8"?>
<manifest xmlns:android="http://schemas.android.com/apk/res/android"
      package="com.example.SimpleIntent"
      android:versionCode="1"
      android:versionName="1.0">
<uses-sdk android:minSdkVersion="16"/>
<application android:label="@string/app_name" android:icon="@drawable/ic_launcher">
    <activity android:name="MyActivity"
              android:label="@string/app_name">
        <intent-filter>
            <action android:name="android.intent.action.MAIN"/>
            <category android:name="android.intent.category.LAUNCHER"/>
        </intent-filter>
    </activity>
    <activity android:name=".Screen"
              android:label="@string/app_name" >
        <intent-filter>
            <action android:name="com.example.SimpleIntent.SCREEN" />
            <category android:name="android.intent.category.DEFAULT"/>
        </intent-filter>

    </activity>
</application> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-18T17:10:50.360

只需覆盖 MyActivity 中的以下方法

```
 @Override
  protected void onActivityResult(int requestCode, int resultCode, Intent data) {
      super.onActivityResult(requestCode, resultCode, data);
  } 
```

使用 onClick 方法启动 Activity

```
 startActivityForResult(intentName, 0); 
```

在屏幕活动中，您使用/覆盖 onStop() 方法

```
 @Override
  protected void onStop()
  {
      super.onStop();
  } 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-18T16:48:31.640

调用 Finish 结束活动并返回 [http://developer.android.com/reference/android/app/Activity.html#finish()](http://developer.android.com/reference/android/app/Activity.html#finish())

> **公共无效完成（）**
> 
> *在 API 级别 1 中添加 当您的活动完成并应该关闭时调用它。ActivityResult 被传播>回通过 onActivityResult() 启动你的人。*

也在这里阅读：

> [http://d.android.com/guide/topics/fundamentals/tasks-and-back-stack.html](http://d.android.com/guide/topics/fundamentals/tasks-and-back-stack.html)

那不是你的 logcat，那是你的控制台，logcat 应该是另一个选项卡/窗口。 [http://www.jetbrains.com/idea/webhelp/debugging-with-logcat.html](http://www.jetbrains.com/idea/webhelp/debugging-with-logcat.html)

# apache - 无法配置重写日志

> ID：13937449
> 
> 赞同：17
> 
> 时间：2012-12-18T16:36:04.947
> 
> 标签：apache, mod-rewrite, httpd.conf, apache2.4, rewritelog

我想启用重写日志来调试一些给我带来问题的重写规则。所以我在**httpd.conf**文件的末尾添加了这些行：

```
<IfModule mod_rewrite.c>
   RewriteLog "/logs/rewrite.log"
   RewriteLogLevel 4
</IfModule> 
```

接下来我做的是重新启动 Apache。但是，它会导致错误，并且不会启动。这是我在 XAMPP 控制面板中得到的：

```
13:14:56  [Apache]    Error: Apache shutdown unexpectedly.
13:14:56  [Apache]    This may be due to a blocked port, missing dependencies, 
13:14:56  [Apache]    improper privileges, a crash, or a shutdown by another method.
13:14:56  [Apache]    Check the "/xampp/apache/logs/error.log" file
13:14:56  [Apache]    and the Windows Event Viewer for more clues 
```

不过，我在**error.log**中没有任何线索。实际上，发生此错误时不会生成任何行。

我还尝试更改 RewriteLog 行以使用绝对路径：

```
RewriteLog "c:\xampp\apache\logs\rewrite.log" 
```

请你帮助我好吗？

* * *

## 回答 #1

> 赞同：31
> 
> 时间：2012-12-19T10:26:32.097

哪个版本的 Apache？

在 2.4 中，RewriteLog* 指令不再存在，因为日志记录已被重写。在这种情况下，您应该附加`mod_rewrite.c:trace3`到您的`LogLevel`行，其中 traceX 是详细级别 (8 >= X >= 1)。输出将写入 Apache 标准错误日志 ( `ErrorLog`)。

您是否还可以运行这些命令：（ `httpd -t`语法检查）然后`httpd -w`（运行 Apache 但保持打开控制台，用作标准错误）

# c# - 在foreach语句c#中更改xml属性

> ID：13937457
> 
> 赞同：1
> 
> 时间：2012-12-18T16:36:37.260
> 
> 标签：c#, xml

如果选中复选框，我需要使用信息将 XML 属性值保存在数据库中。如果复选框被选中，则属性值为“TRUE”，否则为假。当我使用 foreach 语句时，通常会分配最后一个枚举值。

这是我的代码的一部分：

```
XmlAttribute xmlAttribute = xmlDoc.CreateAttribute("BooleanValue");
foreach (string value in list) //list is a List<object>
{
    XmlNode xmlNode = xmlDoc.CreateNode(XmlNodeType.Element, "VALUE", "");
    if (checkBox1.Checked || 
        checkBox2.Checked ||
        checkBox3.Checked)
    xmlAttribute.Value = "TRUE";

    if (!checkBox1.Checked || 
        !checkBox2.Checked ||
        !checkBox3.Checked)
     xmlAttribute.Value = "FALSE";

    xmlNode.Attributes.Append(xmlAttribute);
    xmlNode.InnerText = val;
    childNode.AppendChild(xmlNode);
} 
```

当我运行我的应用程序时，无论如何我都会得到一个 XML 属性*xmlAttribute* "FALSE" 值。

我需要具备的：我需要具备以下 XML：

```
<ROOT><NODE><VALUE ATTRIBUTE="TRUE">Value 1</VALUE></NODE>
      <NODE><VALUE ATTRIBUTE="TRUE">Value 2</VALUE></NODE>
      <NODE><VALUE ATTRIBUTE="FALSE">Value 3</VALUE></NODE>
      <NODE><VALUE ATTRIBUTE="FALSE">Value 4</VALUE></NODE>
      <NODE><VALUE ATTRIBUTE="TRUE">Value 5</VALUE></NODE>
      <NODE><VALUE ATTRIBUTE="FALSE">Value 6</VALUE></NODE>
</ROOT> 
```

我实际得到的：

```
<ROOT><NODE><VALUE ATTRIBUTE="FALSE">Value 1</VALUE></NODE>
      <NODE><VALUE ATTRIBUTE="FALSE">Value 2</VALUE></NODE>
      <NODE><VALUE ATTRIBUTE="FALSE">Value 3</VALUE></NODE>
      <NODE><VALUE ATTRIBUTE="FALSE">Value 4</VALUE></NODE>
      <NODE><VALUE ATTRIBUTE="FALSE">Value 5</VALUE></NODE>
      <NODE><VALUE ATTRIBUTE="FALSE">Value 6</VALUE></NODE>
</ROOT> 
```

因为在 C# *FALSE*值停留在 foreach 循环中的最后一个位置

问题是：我该如何分配我的属性的正确值。谢谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-18T16:42:32.580

我认为你的布尔逻辑是错误的。你目前有

```
If any are checked  
   mark True  
If any are unchecked  
   mark False 
```

我会说你可能想`else`在第一个之后使用，`if`而不是写一个新的条件。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-18T18:07:53.490

```
if (checkBox1.Checked || 
        checkBox2.Checked ||
        checkBox3.Checked)
    xmlAttribute.Value = "TRUE";

    if (!checkBox1.Checked || 
        !checkBox2.Checked ||
        !checkBox3.Checked)
     xmlAttribute.Value = "FALSE"; 
```

因此，如果选中任何一个框，则为 TRUE，如果未选中任何一个框，则用 FALSE 覆盖它。即你结束了

```
if (checkBox1.Checked && 
        checkBox2.Checked &&
        checkBox3.Checked)
    xmlAttribute.Value = "TRUE"
else
    xmlAttribute.Value = "FALSE" 
```

我正在疯狂地猜测这不是你想要的

# c# - 我在哪里放置这些可见的更改以供他们显示

> ID：13937463
> 
> 赞同：0
> 
> 时间：2012-12-18T16:36:55.460
> 
> 标签：c#

我的代码是这样写的：

```
private void radioSelectButton_Click(object sender, EventArgs e)
{
    if (pteriRadio.Checked) // Selecting avatar to be displayed from here on out.
    //This avatar will also be displayed on the game board.
    {
        pteriBox1.Visible = true;
        xweetokBox1.Visible = false;
        ixiBox1.Visible = false;
        label1.Text = ("Pteri Inventory");
        player1avatar = "pteri";
    }
    else if (xweetokRadio.Checked)
    {
        xweetokBox1.Visible = true;
        pteriBox1.Visible = false;
        ixiBox1.Visible = false;
        label1.Text = ("Xweetok Inventory");
        player1avatar = "xweetok";
    }
    else if (ixiRadio.Checked)
    {
        ixiBox1.Visible = true;
        pteriBox1.Visible = false;
        xweetokBox1.Visible = false;
        label1.Text = ("Ixi Inventory");
        player1avatar = "ixi";
    }
    characterSelectBox.Visible = false;
    radioSelectButton.Visible = false;
    characterSelectBox2.Visible = true;
    radioSelectButton2.Visible = true;
} 
```

当我拥有它时，似乎应该显示可见性更改，按钮单击内的更改但在 if 语句之外（用户选择什么并不重要，一旦选择了要选择的选项需要消失该用户。）但可见性更改不会执行。我在这里想念什么？

如果我按照前人的建议嵌套 if 语句，这就是我所拥有的：

```
 private void radioSelectButton_Click(object sender, EventArgs e)
    {
        if (pteriRadio.Checked) // Selecting avatar to be displayed from here on out.
        //This avatar will also be displayed on the game board.
        {
            pteriBox1.Visible = true;
            xweetokBox1.Visible = false;
            ixiBox1.Visible = false;
            label1.Text = ("Pteri Inventory");
            player1avatar = "pteri";
            if (xweetokRadio.Checked)
            {
                xweetokBox1.Visible = true;
                pteriBox1.Visible = false;
                ixiBox1.Visible = false;
                label1.Text = ("Xweetok Inventory");
                player1avatar = "xweetok";

                if (ixiRadio.Checked)
                {
                    ixiBox1.Visible = true;
                    pteriBox1.Visible = false;
                    xweetokBox1.Visible = false;
                    label1.Text = ("Ixi Inventory");
                    player1avatar = "ixi";
                }
                characterSelectBox.Visible = false;
                radioSelectButton.Visible = false;
                characterSelectBox2.Visible = true;
                radioSelectButton2.Visible = true;
            }
        }
    } 
```

现在，不仅可见项目不会交换，两个角色选择也不会显示。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-18T16:58:37.110

看起来这里的单选按钮可以一起选中/取消选中。`if`我认为您应该为每个条件使用单独的语句，而不是`else if`.

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-12-18T16:39:41.033

[`Invalidate`](http://msdn.microsoft.com/en-us/library/system.windows.forms.form.invalidate.aspx)更改属性后，您需要重新绘制表单。假设`radioSelectButton_Click`方法是相同的形式，`this.Invalidate()`在方法结束时调用应该强制重绘。

# android - 如何轻松地将异常子类添加到 catch 中？

> ID：13937465
> 
> 赞同：3
> 
> 时间：2012-12-18T16:37:01.607
> 
> 标签：android, intellij-idea

假设我需要在 中添加一些`Exception`子类`catch`，例如这些

```
 ...//
    catch (ConnectTimeoutException e) {
        e.printStackTrace();
    } catch (HttpHostConnectException e) {
        e.printStackTrace();
    }catch (IOException e) {
        e.printStackTrace();
    } 
```

前两个（显然）是[`IOException`](http://developer.android.com/reference/java/io/IOException.html).

我怎样才能`catch`以比复制/粘贴更好（更快、更容易）的方式添加这些子类？

我相信 IDEA 有这样的自动功能，但我不确定它是哪一个或如何使用它。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-18T17:15:03.520

`Alt`+ `Enter`on `try`，**详细例外**：

![在此处输入图像描述](../Images/399d017a11f4537c7158d33f391f3ea9.png)

# jquery-ui - 使用 Jquery 和 Bootstrap 的选项卡中的选项卡，内部选项卡未填充到宽度

> ID：13937467
> 
> 赞同：0
> 
> 时间：2012-12-18T16:37:03.817
> 
> 标签：jquery-ui, asp.net-mvc-4, model-view-controller, twitter-bootstrap

因此，我正在开发一个使用 Bootstrap 选项卡的项目，其中一个选项卡在左侧是薄的，右侧是另一个选项卡控件。

现在内部选项卡不会填充屏幕右侧的其余宽度，留下很大的间隙。（如下图所示）

现在我想消除红色箭头标记的间隙，并让内部标签填充该空间。

![在此处输入图像描述](../Images/83a224aa228acf23b079da2b19e2d0e2.png)

这是外部选项卡组中实际 HTML 的外观

```
<div id="container">
<div id="leftpane">
    <div id="circles-active" class="circle">
        // Display Graph
    </div>      
</div>
<div id="rightpane">
    <div id="rightpane-inner">
                // Display Inner Tab Group  
    </div>
</div>
</div> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-19T22:45:36.833

如果没有看到您的 CSS，很难说出是什么推动了内部选项卡。

如果您有`margin`或`margin-right`在您的 CSS 中设置了`rightpane`，这可能会导致问题。

[这个小提琴](http://jsfiddle.net/mccannf/3VBym/7/)展示了如何有一个固定的标题和固定的左窗格，并且屏幕的其余部分随着页面滚动。

# c# - 企业库验证 - 允许空值但验证其他属性？

> ID：13937482
> 
> 赞同：3
> 
> 时间：2012-12-18T16:37:58.420
> 
> 标签：c#, asp.net-mvc, enterprise-library

我在一个属性的类中设置了一个属性列表，如下所示：

```
[ValidatorComposition(CompositionType.Or, Ruleset = "BillingEmail", MessageTemplate = Constants.ERROR_INVALID_EMAILADDRESS)]
[NotNullValidator(Negated = true, Ruleset = "BillingEmail")]
[StringLengthValidator(0, RangeBoundaryType.Exclusive, 255, RangeBoundaryType.Inclusive, Ruleset = "BillingEmail")]
[RegexValidator(@"^[A-Z0-9._%-]+@(?:[A-Z0-9-]+\.)+[A-Z]{2,4}$", RegexOptions.IgnoreCase, Ruleset = "BillingEmail")]
public string BillingEmailAddress { get; set; } 
```

我遇到的问题是我输入：

```
someone@blah 
```

并且电子邮件地址仍然通过验证。

我想要的规则是，如果 BillingEmailAddress 为 NULL，那么它就是 VALID。但是，如果它不为 NULL，则 EmailAddress 需要验证字符串长度并通过 Regex 电子邮件验证。

有人可以告诉我缺少什么或我在此验证中做错了吗？

**编辑**

请注意，这不在 MVC 模型中，而是在类对象中。此属性是 DTO 的一部分，而不是页面模型（此层不使用 DataAnnotations 类）。

谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-20T22:46:14.523

因此，感谢您提供的所有解决方案，但基于 Tuzo 提供的链接。我必须实施：

```
[HasSelfValidation]
public class SomeDTO
{
    public string BillingEmailAddress { get; set; }
} 
```

到班级。然后我不得不实施：

```
[SelfValidation]
public void Validation(ValidationResults results)
{
    if (!Utility.IsValidEmailAddress(this.BillingEmailAddress))
    {
        results.AddResult(new ValidationResult(Constants.ERROR_INVALID_EMAILADDRESS, this, "", "", null));
    }
} 
```

作为类的方法。

我希望这可以帮助遇到同样问题的人。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-18T22:34:33.223

看到有人通过属性进行验证只会伤害我的眼睛。再一次，我建议使用[FluentValidation](http://fluentvalidation.codeplex.com/)。你的模型会更干净，你的验证现在看起来像这样：

```
public class CustomerValidator: AbstractValidator<Customer>
{
    public CustomerValidator()
    {
        RuleFor(customer => customer.BillingEmailAddress)
            .NotEmpty()
            .WithMessage("You must specify Email Address.")
            .Length(1, 255)
            .WithMessage("Email address is too long.")
            .EmailAddress();
    }
} 
```

这是关于视图模型。现在，为了满足您对这是 DTO 的要求。您可以像这样单独触发验证：

```
Customer customer = // get your customer from whatever source
CustomerValidator validator = new CustomerValidator();
ValidationResult results = validator.Validate(customer);
if(results.Errors.Count() > 0)
    // do whatever in case your customer class does not validate 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-19T07:44:07.067

我认为问题在于您不能嵌套多个`ValidatorComposition`属性。

您绝对可以使用基于配置的方法做您想做的事情：

```
<?xml version="1.0" encoding="utf-8" ?>
<configuration>
    <configSections>
        <section name="validation" type="Microsoft.Practices.EnterpriseLibrary.Validation.Configuration.ValidationSettings, Microsoft.Practices.EnterpriseLibrary.Validation, Version=5.0.505.0, Culture=neutral, PublicKeyToken=31bf3856ad364e35" requirePermission="true" />
    </configSections>
    <validation>
        <type name="ConsoleApplication.Order" defaultRuleset="Validation Ruleset"
            assemblyName="ConsoleApplication, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null">
            <ruleset name="Validation Ruleset">
                <properties>
                    <property name="BillingEmailAddress">
                        <validator type="Microsoft.Practices.EnterpriseLibrary.Validation.Validators.AndCompositeValidator, Microsoft.Practices.EnterpriseLibrary.Validation, Version=5.0.505.0, Culture=neutral, PublicKeyToken=31bf3856ad364e35"
                            name="And Composite Validator">
                            <validator type="Microsoft.Practices.EnterpriseLibrary.Validation.Validators.OrCompositeValidator, Microsoft.Practices.EnterpriseLibrary.Validation, Version=5.0.505.0, Culture=neutral, PublicKeyToken=31bf3856ad364e35"
                                name="Or Composite Validator">
                                <validator type="Microsoft.Practices.EnterpriseLibrary.Validation.Validators.NotNullValidator, Microsoft.Practices.EnterpriseLibrary.Validation, Version=5.0.505.0, Culture=neutral, PublicKeyToken=31bf3856ad364e35"
                                    negated="true" name="Not Null Validator" />
                                <validator type="Microsoft.Practices.EnterpriseLibrary.Validation.Validators.StringLengthValidator, Microsoft.Practices.EnterpriseLibrary.Validation, Version=5.0.505.0, Culture=neutral, PublicKeyToken=31bf3856ad364e35"
                                    upperBound="255" lowerBound="5" lowerBoundType="Exclusive"
                                    name="String Length Validator" />
                            </validator>
                            <validator type="Microsoft.Practices.EnterpriseLibrary.Validation.Validators.OrCompositeValidator, Microsoft.Practices.EnterpriseLibrary.Validation, Version=5.0.505.0, Culture=neutral, PublicKeyToken=31bf3856ad364e35"
                                name="Or Composite Validator 2">
                                <validator type="Microsoft.Practices.EnterpriseLibrary.Validation.Validators.NotNullValidator, Microsoft.Practices.EnterpriseLibrary.Validation, Version=5.0.505.0, Culture=neutral, PublicKeyToken=31bf3856ad364e35"
                                    negated="true" name="Not Null Validator" />
                                <validator type="Microsoft.Practices.EnterpriseLibrary.Validation.Validators.RegexValidator, Microsoft.Practices.EnterpriseLibrary.Validation, Version=5.0.505.0, Culture=neutral, PublicKeyToken=31bf3856ad364e35"
                                    pattern="^[A-Z0-9._%-]+@(?:[A-Z0-9-]+\.)+[A-Z]{2,4}$" options="IgnoreCase"
                                    name="Regular Expression Validator" />
                            </validator>
                        </validator>
                    </property>
                </properties>
            </ruleset>
        </type>
    </validation>
</configuration> 
```

您还可以通过编程方式创建嵌套验证器。请参阅使用复合验证器进行验证@ [http://msdn.microsoft.com/en-us/library/ff953182(v=pandp.50).aspx](http://msdn.microsoft.com/en-us/library/ff953182(v=pandp.50).aspx)部分。

另一种方法可能是使用多个规则集：

```
 [ValidatorComposition(CompositionType.Or, Ruleset = "BillingEmailStringLength", MessageTemplate = Constants.ERROR_INVALID_EMAILADDRESS)]
    [StringLengthValidator(5, RangeBoundaryType.Exclusive, 255, RangeBoundaryType.Inclusive, Ruleset = "BillingEmailStringLength")]
    [NotNullValidator(Negated = true, Ruleset = "BillingEmailStringLength")]
    [ValidatorComposition(CompositionType.Or, Ruleset = "BillingEmailStringFormat", MessageTemplate = Constants.ERROR_INVALID_EMAILADDRESS)]
    [RegexValidator(@"^[A-Z0-9._%-]+@(?:[A-Z0-9-]+\.)+[A-Z]{2,4}$", RegexOptions.IgnoreCase, Ruleset = "BillingEmailStringFormat")]
    [NotNullValidator(Negated = true, Ruleset = "BillingEmailStringFormat")]
    public string BillingEmailAddress { get; set; } 
```

然后您可以指定多个规则集进行验证：

```
var vrs = Validation.Validate(objectToValidate, 
              "BillingEmailStringLength", "BillingEmailStringFormat"); 
```

另一种方法是创建您自己的处理空值的验证器。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-12-18T21:36:49.177

我自己从来不需要这样做，但我认为您可以创建自己的 DataAnnotations Validation 上下文。看到这个帖子：

[检查模型在控制器之外是否有效](https://stackoverflow.com/questions/11150375/check-if-model-is-valid-outside-of-controller)

然后你只需要制作一个验证属性。我使用自定义验证器在我的应用程序中对电子邮件地址做了类似的事情。这是我的代码，经过修改以更好地满足您的问题。

```
public class MyEmailValidationAttribute : RegularExpressionAttribute
{
    public MyEmailValidationAttribute ()
        : base(@"^([\w\!\#$\%\&\'\*\+\-\/\=\?\^\`{\|\}\~]+\.)*[\w\!\#$\%\&\'\*\+\-\/\=\?\^\`{\|\}\~]+@((((([a-zA-Z0-9]{1}[a-zA-Z0-9\-]{0,62}[a-zA-Z0-9]{1})|[a-zA-Z])\.)+[a-zA-Z]{2,6})|(\d{1,3}\.){3}\d{1,3}(\:\d{1,5})?)$")
    {
    }

    protected override ValidationResult IsValid(object value, ValidationContext validationContext)
    {
        Regex RegexObj = new Regex(this.Pattern);

        if (value == null)
        {
            return ValidationResult.Success;
        }           

        Match match = RegexObj.Match((string)value);

        if (!match.Success)
        {
            return new ValidationResult("Email not in correct format.");
        }

        return ValidationResult.Success;     
    }
} 
```

然后在您的模型中添加：

```
//You may be able to remove some of your other attributes 
//by going this route so I won't include them all.
[MyEmailValidationAttribute()]
public string BillingEmailAddress { get; set; } 
```

* * *

## 回答 #5

> 赞同：-1
> 
> 时间：2014-07-03T15:47:28.413

有一个[NullIgnoringValidatorWrapper 类](http://msdn.microsoft.com/en-us/library/microsoft.practices.enterpriselibrary.validation.validators.nullignoringvalidatorwrapper%28v=pandp.50%29.aspx)。

# php - 使用查询字符串突出显示菜单项

> ID：13937483
> 
> 赞同：0
> 
> 时间：2012-12-18T16:37:58.080
> 
> 标签：php, query-string, highlight

所以我试图使用查询字符串来突出显示“当前”菜单项。

假设网址是 www.....something.php?tag=Music

我正在循环通过此代码来检查 $tag 与数据库中的记录：

```
<li class="<?php if(isset($_GET['tag']) && $_GET['tag'] == $record->name); 
{ echo 'current'; }?>">
<a href="?tag=<?php echo $record->name; ?>">
<?php echo $record->name; ?></a></li> 
```

为什么它总是出现“真实”并回显“当前”。

它输出的html是这样的：

```
<li class="current">
<a href="?tag=Music">Music</a>
</li>

<li class="current">
<a href="?tag=Film">Film</a>
</li>

<li class="current">
<a href="?tag=biscuits">biscuits</a>
</li> 
```

当然，它应该只对“音乐”是“真实的”吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-18T16:42:11.693

`if`你的陈述后面有一个分号。删除它，它应该可以工作：

```
<li class="<?php if(isset($_GET['tag']) && $_GET['tag'] == $record->name) 
```

对于较短的代码，并且如果您启用了短标签，请尝试：

```
<li class="<?=isset($_GET['tag'])&&$_GET['tag']==$record->name?'current':''?>"> 
```

# vba - 访问单个记录的连续形式的条件格式

> ID：13937493
> 
> 赞同：3
> 
> 时间：2012-12-18T16:38:14.540
> 
> 标签：vba, ms-access

我有一个连续的表格，列出了取样的时间和这些样品中不同化学物质的含量。我想格式化单元格以显示化学水平何时超出范围。我的问题是，它们会随着每个采样时间而变化。.3 对于 10 小时的样本来说太高了，但对于 30 小时来说没问题。下面是我的连续形式的示例。

```
采样时间乳酸糖
10 小时 .085 15.2
20 小时 .125 12.8
30 小时 .345 8.4
40 小时 .405 4.2
50 小时 .415 1.9
```

所以我想说“如果 Lactics > .2 在 20 小时，那么让单元格变红”等等，对于每个时间段和我正在跟踪的每个组件。如何使用 VBA 进行设置？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-18T17:12:59.957

创建一个表格来保存您的“超出范围”规则。

```
Sample Time Lactics_limit
10 hour                .3
20 hour               .35
30 hour                .4
40 hour               .45
50 hour                 ? 
```

然后将您的表单基于一个查询，该查询将您的原始表连接到 value_limits 表，并带有一个计算字段 ，`lactics_flag`它指示值何时超出范围。并将您的条件格式设置在`lactics_flag`.

```
SELECT
    y.[Sample Time],
    y.Lactics,
    y.Sugar,
    IIf(y.Lactics > v.Lactics_limit, True, False) AS lactics_flag
FROM
    YourTable AS y
    INNER JOIN value_limits AS v
    ON y.[Sample Time] = v.[Sample Time]; 
```

`Expression Is`将该方法的简单性与表达相同规则所需的列表的复杂性进行比较：

```
([Sample Time]="10 hour" And [Lactics]>0.3) Or ([Sample Time]="20 hour" And [Lactics]>0.35) Or ([Sample Time]="30 hour" And [Lactics]>0.4) Or ([Sample Time]="40 hour" And [Lactics]>0.45) Or ([Sample Time]="50 hour" And [Lactics]>?) 
```

这种方法的另一个优点是，当规则存储在表中而不是作为条件格式表达式存储在表单中时，更容易维护规则。并且这些规则可以很容易地重新用于其他表格或报告。

如果您没有规则 every `[Sample Time]`，您可以将它们排除在`value_limits`表之外并`LEFT JOIN`在查询中使用 a 。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-18T16:59:46.837

您可以使用 Expression Is 带有值列表：

```
 ([sample]=10 And [Lactics]>=0.2) Or ([sample]=20 And [Lactics]>=0.35) 
```

![有条件的](../Images/02c2e8e32add95dcc16e500ffeb48ce8.png)

# javascript - 如何将加载的图像读入blob？

> ID：13937494
> 
> 赞同：5
> 
> 时间：2012-12-18T16:38:15.883
> 
> 标签：javascript, html

> **可能重复：**
> [如何将图像对象转换为二进制 blob](https://stackoverflow.com/questions/13375333/how-to-convert-an-image-object-to-a-binary-blob)

加载远程图像时，我面临同源策略限制。然而 DOM 0 Image 对象可用于加载远程资源（这与创建`<img />`标签本质上相同）。

```
var fr = new FileReader(),
    img = new Image();

img.src = 'http://distilleryimage8.s3.amazonaws.com/6cf25568491a11e2af8422000a9e28e9_7.jpg';

img.onload = function () {
    // how to get this image as a Blob object?
}; 
```

有没有办法将此资源读入 Blob/arraybuffer 对象？这不是[如何将图像对象转换为二进制 blob](https://stackoverflow.com/questions/13375333/how-to-convert-an-image-object-to-a-binary-blob)的副本，因为后者不会出现同源问题。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-18T16:51:47.020

在我看来，它可以在没有太多痛苦的情况下完成......

你只需要一个 HTML5 元素。使用`canvas`时可以在其上绘制远程图像。之后获取图像 dataUrl 就很容易了，你可以从画布的 API 中获得这样的功能。下一步是使用 FileReader 的`readAsDataURL`方法。

我还没有尝试过，但理论上它应该可以工作。

*   编辑：它不会工作。如果图像来自不同的来源，则不能使用画布的`toDataURL`方法。所以我认为没有服务器端没有任何解决方案。

# python - 继承父类文档字符串作为 __doc__ 属性

> ID：13937500
> 
> 赞同：14
> 
> 时间：2012-12-18T16:38:49.860
> 
> 标签：python, docstring, django-rest-framework

[在 Python 类继承中](https://stackoverflow.com/questions/2025562/inherit-docstrings-in-python-class-inheritance)有一个关于Inherit docstrings 的问题，但那里的答案涉及方法文档字符串。

我的问题是如何继承父类的文档字符串作为`__doc__`属性。用例是[Django rest 框架](http://django-rest-framework.org)根据您的视图类的文档字符串在您的 API 的 html 版本中生成很好的文档。但是在没有文档字符串的类中继承基类（带有文档字符串）时，API 不会显示文档字符串。

很可能是 sphinx 和其他工具做了正确的事情并为我处理了文档字符串继承，但是 django rest 框架会查看 (empty)`.__doc__`属性。

```
class ParentWithDocstring(object):
    """Parent docstring"""
    pass

class SubClassWithoutDoctring(ParentWithDocstring):
    pass

parent = ParentWithDocstring()
print parent.__doc__  # Prints "Parent docstring".
subclass = SubClassWithoutDoctring()
print subclass.__doc__  # Prints "None" 
```

我试过类似的东西`super(SubClassWithoutDocstring, self).__doc__`，但这也只给了我一个`None`.

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2012-12-18T16:40:16.987

由于您不能`__doc__`为类分配新的文档字符串（至少在 CPython 中），因此您必须使用元类：

```
import inspect

def inheritdocstring(name, bases, attrs):
    if not '__doc__' in attrs:
        # create a temporary 'parent' to (greatly) simplify the MRO search
        temp = type('temporaryclass', bases, {})
        for cls in inspect.getmro(temp):
            if cls.__doc__ is not None:
                attrs['__doc__'] = cls.__doc__
                break

    return type(name, bases, attrs) 
```

是的，我们跳过了一两个额外的环节，但是上面的元类会找到正确的，`__doc__`但复杂的你制作你的继承图。

用法：

```
>>> class ParentWithDocstring(object):
...     """Parent docstring"""
... 
>>> class SubClassWithoutDocstring(ParentWithDocstring):
...     __metaclass__ = inheritdocstring
... 
>>> SubClassWithoutDocstring.__doc__
'Parent docstring' 
```

另一种方法是将`__doc__`in设置`__init__`为实例变量：

```
def __init__(self):
    try:
        self.__doc__ = next(cls.__doc__ for cls in inspect.getmro(type(self)) if cls.__doc__ is not None)
    except StopIteration:
        pass 
```

然后至少您的实例有一个文档字符串：

```
>>> class SubClassWithoutDocstring(ParentWithDocstring):
...     def __init__(self):
...         try:
...             self.__doc__ = next(cls.__doc__ for cls in inspect.getmro(type(self)) if cls.__doc__ is not None)
...         except StopIteration:
...             pass
... 
>>> SubClassWithoutDocstring().__doc__
'Parent docstring' 
```

从 Python 3.3（修复[问题 12773](http://bugs.python.org/issue12773)）开始，您终于*可以*`__doc__`只设置自定义类的属性，因此您可以使用类装饰器：

```
import inspect

def inheritdocstring(cls):
    for base in inspect.getmro(cls):
        if base.__doc__ is not None:
            cls.__doc__ = base.__doc__
            break
    return cls 
```

然后可以这样应用：

```
>>> @inheritdocstring
... class SubClassWithoutDocstring(ParentWithDocstring):
...     pass
... 
>>> SubClassWithoutDocstring.__doc__
'Parent docstring' 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-18T17:49:01.537

在这种特殊情况下，您还可以通过覆盖方法来覆盖 REST 框架确定用于端点的名称的`.get_name()`方式。

如果您确实采取了这条路线，您可能会发现自己想要为您的视图定义一组基类，并使用简单的 mixin 类覆盖所有基视图上的方法。

例如：

```
class GetNameMixin(object):
    def get_name(self):
        # Your docstring-or-ancestor-docstring code here

class ListAPIView(GetNameMixin, generics.ListAPIView):
    pass

class RetrieveAPIView(GetNameMixin, generics.RetrieveAPIView):
    pass 
```

另请注意，该`get_name`方法被认为是私有的，并且将来可能会更改，因此您需要在升级时密切关注发行说明，以了解那里的任何更改。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-07-25T16:02:15.680

最简单的方法是将其分配为类变量：

```
class ParentWithDocstring(object):
    """Parent docstring"""
    pass

class SubClassWithoutDoctring(ParentWithDocstring):
    __doc__ = ParentWithDocstring.__doc__

parent = ParentWithDocstring()
print parent.__doc__  # Prints "Parent docstring".
subclass = SubClassWithoutDoctring()
assert subclass.__doc__ == parent.__doc__ 
```

不幸的是，它是手动的，但很简单。顺便说一句，虽然字符串格式化不能以通常的方式工作，但它使用相同的方法：

```
class A(object):
    _validTypes = (str, int)
    __doc__ = """A accepts the following types: %s""" % str(_validTypes)

A accepts the following types: (<type 'str'>, <type 'int'>) 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2014-01-17T01:03:04.907

您也可以使用`@property`

```
class ParentWithDocstring(object):
    """Parent docstring"""
    pass

class SubClassWithoutDocstring(ParentWithDocstring):
    @property
    def __doc__(self):
        return None

class SubClassWithCustomDocstring(ParentWithDocstring):
    def __init__(self, docstring, *args, **kwargs):
        super(SubClassWithCustomDocstring, self).__init__(*args, **kwargs)
        self.docstring = docstring
    @property
    def __doc__(self):
        return self.docstring

>>> parent = ParentWithDocstring()
>>> print parent.__doc__  # Prints "Parent docstring".
Parent docstring
>>> subclass = SubClassWithoutDocstring()
>>> print subclass.__doc__  # Prints "None"
None
>>> subclass = SubClassWithCustomDocstring('foobar')
>>> print subclass.__doc__  # Prints "foobar"
foobar 
```

你甚至可以覆盖一个文档字符串。

```
class SubClassOverwriteDocstring(ParentWithDocstring):
    """Original docstring"""
    def __init__(self, docstring, *args, **kwargs):
        super(SubClassOverwriteDocstring, self).__init__(*args, **kwargs)
        self.docstring = docstring
    @property
    def __doc__(self):
        return self.docstring

>>> subclass = SubClassOverwriteDocstring('new docstring')
>>> print subclass.__doc__  # Prints "new docstring"
new docstring 
```

需要注意的是，该属性显然不能被其他类继承，您必须在要覆盖文档字符串的每个类中添加该属性。

```
class SubClassBrokenDocstring(SubClassOverwriteDocstring):
    """Broken docstring"""
    def __init__(self, docstring, *args, **kwargs):
        super(SubClassBrokenDocstring, self).__init__(docstring, *args, **kwargs)

>>> subclass = SubClassBrokenDocstring("doesn't work")
>>> print subclass.__doc__  # Prints "Broken docstring"
Broken docstring 
```

无赖！但绝对比做元类的事情容易！

# python - 如何在 setup.py 中包含 tarball 或 svn 依赖项？

> ID：13937503
> 
> 赞同：2
> 
> 时间：2012-12-18T16:38:59.470
> 
> 标签：python, setuptools, distutils, egg, pypi

我有一个需要 python-xlib 的项目。不幸的是，python-xlib 不在 pypi 上，所以在我的需求文件中我使用：svn+ [https://python-xlib.svn.sourceforge.net/svnroot/python-xlib/tags/xlib_0_15rc1/](https://python-xlib.svn.sourceforge.net/svnroot/python-xlib/tags/xlib_0_15rc1/)根据这个建议： [你好吗用 pip 安装 Python Xlib？](https://stackoverflow.com/questions/10054745/how-do-you-install-python-xlib-with-pip)

这适用于 pip，但我想用 setup.py 打包它。install_requires 中只允许使用实际的鸡蛋，所以这个答案： [如何让 setuptools 安装不在 PyPI 上的包？](https://stackoverflow.com/questions/3472430/how-can-i-make-setuptools-install-a-package-thats-not-on-pypi) 建议使用dependency_links，我这样做了。

svn+https 在 dependency_link 中不起作用，因此我链接到此页面引用的 tarball：http: [//python-xlib.svn.sourceforge.net/viewvc/python-xlib/tags/xlib_0_15rc1/](http://python-xlib.svn.sourceforge.net/viewvc/python-xlib/tags/xlib_0_15rc1/) 。这个 tarball 以我期望的方式下载，但是当安装它时，我得到：

```
Searching for pyxlib
Best match: pyxlib [unknown version]
Downloading http://python-xlib.svn.sourceforge.net/viewvc/python-xlib/tags/xlib_0_15rc1/?view=tar#egg=pyxlib
Processing xlib_0_15rc1
error: /tmp/easy_install-BDFVH3/xlib_0_15rc1/COPYING: Not a directory 
```

我不明白。当然 COPYING 不是目录。为什么 setuptools（或者是 distutils？）不运行 python-xlib 根目录中的 setup.py？我怀疑这一定很容易。如何将 python-xlib 作为我的 egg 的依赖项？

# c - 为什么这个 arr[0] 不等于 arr+0？

> ID：13937504
> 
> 赞同：1
> 
> 时间：2012-12-18T16:39:00.507
> 
> 标签：c

嗨，我很困惑得到下面的解释，有人可以给我解释一下吗？提前致谢。

```
#include<stdio.h>
int main(){
    char *arr,c;
    arr = &c;

    arr++;
    *arr = 'a';

    arr++;
    *arr = 'b';

    arr++;
    *arr = 'c';

    arr--;
    arr--;

    printf("\narr 1 = %c",arr);
    printf("\narr 2 = %c",arr[1]);
    printf("\narr 3 = %c",arr[2]);
    getch();
    return 1;
    } 
```

输出为：
arr 1 = a
arr 2 = b
arr 3 = c

但如果换行：

```
printf("\narr 1 = %c",arr); 
```

和

```
printf("\narr 1 = %c",arr[0]); 
```

现在输出是：
arr 1 =  
arr 2 = b
arr 3 = c

为什么'a'没有被打印出来。？

*对于所有质疑该程序为糟糕编码的人。我知道使用这样的指针不是一个好的编码习惯，但我的问题是为什么 arr[0] 没有打印任何作为 arr[1] 和 arr[ 2]正在打印分配什么？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-12-18T17:59:08.370

在程序的第一个版本中，可能发生的情况是：

*   编译器将`c`某个地址放在堆栈上，比如 1003（单个字节）。
*   编译器将`arr`某个地址放在堆栈上，例如 1004-1007（四个字节）。
*   该语句`arr = &c;`将`c`1003 的地址放入`arr`.
*   该语句`arr++;`将 1 添加到`arr`，因此它现在是 1004 而不是 1003。
*   该语句`*arr = 'a';`写入`'a'`指向的位置`arr`。现在这是C 标准**未定义的行为。**当`arr`设置为`&c`时，该位置的对象中只有一个字节，并且 C 标准不保证在对象外部增加该地址后写入其他位置时会发生什么。
*   正如在这种情况下发生的那样， 1004 指向`arr`，因此您正在写入`'a'`的字节之一`arr`。这可怕地改变了`arr`.
*   然后`arr++;`再次增加地址，并`*arr = 'b';`写入`'b'`某处。我们不知道在哪里，因为`arr`它的价值不高。
*   然后`arr++;`再次增加地址，并`*arr = 'c';`写入`'c'`某处。我们不知道在哪里。
*   然后将地址返回到写入后的`arr--;`值。`arr--;``'a'`
*   然后第一个`printf`调用将值传入`arr`以使用“%c”说明符打印。“%c”用于打印一个字符，但`arr`你传递的是一个指针。但是，您之前已写入`'a'`指针，因此指针的值`'a'`在其字节之一中。
*   碰巧的是，当“%c”说明符与指针一起使用时，此实现会`printf`打印指针值中的一个字节，在这种情况下与您写入的字节相同`'a'`。所以打印了“a”。**您不能依赖其他 C 实现中发生的这种情况。**在这种情况下发生这种情况只是因为编译器恰好在`arr`in memory 之后将其放入`c`memory，因此语句`*arr = 'a';`写入. 这不会在所有 C 实现中发生。你得到了“幸运”。</li> `'a'``arr`
*   写入`'a'`into之后`arr`，`arr`是指向某个地方，虽然我们不知道在哪里。我们称这个位置`x`。
*   声明`arr++;`并`*arr = 'b';`写信`'b'`到该地点`x+1`。
*   声明`arr++;`并`*arr = 'c';`写信`'c'`到该地点`x+2`。
*   然后两条`arr--;`语句返回`arr`指向`x`。`arr[1]`处的字符也是如此`x+1`，即是`'b'`，`arr[2]`是`'c'`。将这些传递给 printf 以使用“%c”打印“b”和“c”。

在程序的第二个版本中，when`arr[0]`被传递给`printf`：

*   的值`arr`是通过写入`'a'`其字节之一形成的值。这是一些“随机”地址，指向我们无法控制的任何位置。显然那里有一个 0 字符，或者其他一些非打印字符，所以，当`arr[0]`传递给时`printf`，什么都不会打印。
*   传递`arr[1]`并`arr[2]`打印“b”和“c”，因为代码写入`'b'`了`'c'`这些位置。

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-12-18T16:40:39.300

`arr`不等同于`arr[0]`，因为`arr[0]` **取消引用**数组。正确的等价物是`&arr[0]`.

顺便说一句，你正在做的事情会调用未定义的行为，因为在递增之后`arr`，它指向一个无效的内存位置——最初它指向一个**字符，**所以你不能假设它后面有任何东西。

* * *

## 回答 #3

> 赞同：6
> 
> 时间：2012-12-18T16:41:23.367

这只是未定义的行为 -`arr++; *arr = 'a';`是非法的，因为`arr`指向单个`char`. 任何事情都有可能发生。

# events - 我如何访问之前在接缝@Observer 方法中设置的字段？

> ID：13937510
> 
> 赞同：1
> 
> 时间：2012-12-18T16:39:08.953
> 
> 标签：events, seam

我当前的设置是 JBoss 4.2.3.GA 上的 JBoss Seam 2.2。

我有两个像这样的 Bean：

```
@Name("mailingManager")
@Scope(ScopeType.PAGE)
public class MailingMgr {
  private Mailing selectedMailing;

  @Observer("mailing.letter.success")
  public void recordSuccess(final Object arg) {
    if (null != selectedMailing) { // store arg }
  }

  public void send() {
    selectedMailing = new Mailing();
    if ('EMAIL' == determineType()) {
      EmailSender mailer = (EmailSender) Component.getInstance(EmailSender.class);
      mailer.send(getAddresses());
    }
    // ... more options
  }
}

@Name("emailSender")
@Scope(ScopeType.PAGE)
public class EmailSender {
  public void send(final Set<String> addresses) {
    for (String addr : addresses) {
      // ... create a mail
      Events.instance().raiseEvent("mailing.letter.success", getGeneratedMail());
    }
  }
} 
```

问题是 when总是`recordSuccess()`被调用。`selectedMailing``null`

作为一种解决方法，我`selectedMailing`在调用任何可能触发我的事件的代码之前手动设置对话上下文，然后在调用之前对我的字段进行注释`@In(required=false)`以再次注入它`recordSuccess`。但是有没有更优雅的解决方案（保持解耦不变）？为什么不重用调用 bean 来处理事件？

# java - 在 Excel 文件中创建饼图

> ID：13937514
> 
> 赞同：2
> 
> 时间：2012-12-18T16:39:29.270
> 
> 标签：java, sql, xls

我创建了一个 csv 文件，

并将数据库中的数据显示到该文件中，

如何将饼图添加到该文件，

这是我制作的代码：

```
File file = new File("C:/Users/MY TOSHIBA/Desktop/chart.CSV");
Writer output =null;
output = new BufferedWriter(new FileWriter(file));
Connection con = DriverManager.getConnection("jdbc:oracle:thin:@ 127.0.0.1:1521:XE","username","password");
String sql="select * from table";
Statement stmt = con.createStatement();
ResultSet rs = stmt.executeQuery(sql);
while(rs.next())
{
String teller =rs.getString("name");
String flag=rs.getString("flag");
output.write(teller+flag+"\n");
}
output.close(); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-18T17:00:56.990

First, you can't create charts in Text files.

If your question is about creating charts in excel using Java, you have to use ApachePOI. It will not create charts from the scratch, but it can link a chart from somewhere else to your excel file.

[Create excel chart using Apache POI](https://stackoverflow.com/questions/3354092/create-excel-chart-using-apache-poi)

However, I found the following in google, which seems like something, which is capable of doing what you are asking for

[http://www.smartxls.com/java/drawings-charts.htm#vdrawings-charts-chart](http://www.smartxls.com/java/drawings-charts.htm#vdrawings-charts-chart)

# html - 相对链接 (RoR)

> ID：13937515
> 
> 赞同：1
> 
> 时间：2012-12-18T16:39:35.490
> 
> 标签：html, css, ruby-on-rails

我在下面有一些静态错误页面`/public`，其中我以下列方式链接了一个名为 errors.min.css 的样式表：

```
<link rel="stylesheet" href="errors.min.css"> 
```

但是，当我在除根 ( `/abc/non-existent-url`) 之外的路径上时，由于找不到 CSS 文件，页面无法正确呈现（因为它现在位于不同的路径下。）我尝试将 URL 设置为：

```
/public/errors.min.css 
```

但它似乎不起作用。有什么我可以做的（除了使 CSS 内联，我不想这样做）？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-18T16:53:26.990

您不应该在 Rails 中使用静态样式表链接。尝试以下操作：

```
<%= stylesheet_link_tag "errors.min.css" %> 
```

这假定样式表在`app/assets/stylesheets/`目录中。

此外，您的静态页面必须以此结束`.html.erb`。

* * *

PS 静态页面也应该使用控制器制作。[请参阅静态页面上的](http://ruby.railstutorial.org/chapters/static-pages#top)本教程。

# optimization - 具有多个聚合的 SPARQL 查询超出内存限制

> ID：13937516
> 
> 赞同：4
> 
> 时间：2012-11-23T16:16:19.587
> 
> 标签：optimization, sparql

我正在尝试使用 SPARQL 从三重商店生成一些用户统计信息。请参阅下面的查询。如何改进？我在这里做坏事吗？为什么会消耗这么多内存？（请参阅本文末尾的背景故事）

我更喜欢在三重存储内进行聚合和连接。拆分查询意味着我必须在数据库外部“手动”加入结果，从而失去三重存储的效率和优化。无需无缘无故地重新发明轮子。

**查询**

```
SELECT
    ?person
    (COUNT(DISTINCT ?sent_email) AS ?sent_emails)
    (COUNT(DISTINCT ?received_email) AS ?received_emails)
    (COUNT(DISTINCT ?receivedInCC_email) AS ?receivedInCC_emails)
    (COUNT(DISTINCT ?revision) AS ?commits)

WHERE {
  ?person rdf:type foaf:Person.

  OPTIONAL {
    ?sent_email rdf:type email:Email.
    ?sent_email email:sender ?person.
  }

  OPTIONAL {
    ?received_email rdf:type email:Email.
    ?received_email email:recipient ?person.
  }

  OPTIONAL {
    ?receivedInCC_email rdf:type email:Email.
    ?receivedInCC_email email:ccRecipient ?person.
  }

  OPTIONAL {
    ?revision rdf:type vcs:VcsRevision.
    ?revision vcs:committedBy ?person.
  }
}
GROUP BY ?person
ORDER BY DESC(?commits) 
```

**背景**

问题是我在 AllegroGraph 中收到错误“QUERY MEMORY LIMIT REACHED”（另请参阅我的相关[SO 问题](https://stackoverflow.com/questions/13531088/allegrograph-memorylimit-query-option "AllegroGraph memoryLimit 查询选项")）。由于存储库仅包含大约 200k 三元组，这些三元组很容易放入 ca 的（ntriples）输入文件中。60 MB，我想知道执行查询结果如何需要超过 4 GB 的 RAM，大约高出两个数量级。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-07-08T13:00:22.110

尝试在子查询中拆分计算，例如：

```
SELECT
    ?person
    (MAX(?sent_emails_) AS ?sent_emails_)
    (MAX(?received_emails_ AS ?received_emails_)
    (MAX(?receivedInCC_emails_ AS ?receivedInCC_emails_)
    (MAX(?commits_) AS ?commits)
WHERE {
  { 
   SELECT 
          ?person 
          (COUNT(DISTINCT ?sent_email) AS ?sent_emails_) 
          (0 AS ?received_emails_) 
          (0 AS ?commits_) 
   WHERE {
    ?sent_email rdf:type email:Email.
    ?sent_email email:sender ?person.
    ?person rdf:type foaf:Person.
   } GROUP BY ?person 
  } union {
     (similar pattern for the others)
     ....
  }
}
GROUP BY ?person
ORDER BY DESC(?commits) 
```

目标是：

*   避免在结果集中生成大量需要处理以进行聚合的行
*   避免使用 OPTIONAL{} 模式，这也会影响性能

# python - Common Lisp 中 Python 的 range() 类比

> ID：13937520
> 
> 赞同：36
> 
> 时间：2012-12-18T16:39:41.797
> 
> 标签：python, common-lisp, number-sequence

**如何在 Common Lisp 中创建连续数字列表？**

换句话说，`range`Common Lisp 中 Python 的函数等价物是什么？

在 Python中`range(2, 10, 2)`返回`[2, 4, 6, 8]`，第一个和最后一个参数是可选的。尽管 Emacs Lisp 有`number-sequence`.

范围可以[使用循环宏](https://stackoverflow.com/a/10872032/596361)来模拟，但我想知道生成具有起点和终点以及步骤的数字序列的公认方法。

相关：[Scheme 中 Python 范围的模拟](https://stackoverflow.com/questions/12909856/analog-of-pythons-range-in-scheme)

* * *

## 回答 #1

> 赞同：41
> 
> 时间：2012-12-18T16:47:51.357

没有生成数字序列的内置方法，这样做的规范方法是执行以下操作之一：

*   采用`loop`
*   编写一个实用函数，使用`loop`

一个示例实现是（这只接受从“低”到“高”的计数）：

```
(defun range (max &key (min 0) (step 1))
   (loop for n from min below max by step
      collect n)) 
```

这允许您指定（可选）最小值和（可选）步长值。

要生成奇数：`(range 10 :min 1 :step 2)`

* * *

## 回答 #2

> 赞同：19
> 
> 时间：2012-12-27T11:35:39.747

alexandria 实现了 scheme 的 iota：

```
(ql:quickload :alexandria)
(alexandria:iota 4 :start 2 :step 2)
;; (2 4 6 8) 
```

* * *

## 回答 #3

> 赞同：6
> 
> 时间：2012-12-18T17:52:30.757

这是我解决问题的方法：

```
(defun generate (from to &optional (by 1))
  #'(lambda (f)
      (when (< from to)
        (prog1 (or (funcall f from) t)
          (incf from by)))))

(defmacro with-generator ((var from to &optional (by 1)) &body body)
  (let ((generator (gensym)))
    `(loop with ,generator = (generate ,from ,to ,by)
        while
          (funcall ,generator
                   #'(lambda (,var) ,@body)))))

(with-generator (i 1 10)
    (format t "~&i = ~s" i)) 
```

但这只是大体思路，还有很大的改进空间。

* * *

好的，因为这里似乎有讨论。我假设真正需要的是类似于 Python 的`range`生成器函数。从某种意义上说，它会生成一个数字列表，但它是通过每次迭代产生一个数字来实现的（这样它一次不会创建一个以上的项目）。生成器是一个有点少见的概念（很少有语言实现它），所以我假设提到 Python 表明需要这个确切的特性。

在对我上面的示例进行了一些批评之后，这里有一个不同的示例，它说明了为什么可以使用生成器而不是简单循环的原因。

```
(defun generate (from to &optional (by 1))
  #'(lambda ()
      (when (< from to)
        (prog1 from
          (incf from by)))))

(defmacro with-generator
    ((var generator &optional (exit-condition t)) &body body)
  (let ((g (gensym)))
    `(do ((,g ,generator))
         (nil)
       (let ((,var (funcall ,g)))
         (when (or (null ,var) ,exit-condition)
           (return ,g))
         ,@body))))

(let ((gen
       (with-generator (i (generate 1 10) (> i 4))
         (format t "~&i = ~s" i))))
  (format t "~&in the middle")
  (with-generator (j gen (> j 7))
    (format t "~&j = ~s" j)))

;; i = 1
;; i = 2
;; i = 3
;; i = 4
;; in the middle
;; j = 6
;; j = 7 
```

同样，这只是此功能用途的说明。使用它来生成整数可能很浪费，即使您需要分两步执行此操作，但生成器最好使用解析器，当您想要生成基于解析器先前状态构建的更复杂的对象时，例如，还有一堆其他的东西。好吧，您可以在这里阅读有关它的论点：[http ://en.wikipedia.org/wiki/Generator_%28computer_programming%29](http://en.wikipedia.org/wiki/Generator_%28computer_programming%29)

* * *

## 回答 #4

> 赞同：4
> 
> 时间：2014-06-15T11:32:15.330

使用递归：

```
(defun range (min max &optional (step 1))
  (when (<= min max)
    (cons min (range (+ min step) max step)))) 
```

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2016-11-28T00:44:14.287

以简单的形式指定开始、停止、步骤：

```
(defun range (start stop step) 
  (do (
    (i start (+ i step)) 
    (acc '() (push i acc))) 
   ((>= i stop) (nreverse acc)))) 
```

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2018-05-05T07:17:33.090

你可能想试试[蛇](https://github.com/BnMcGn/snakes)：

“用于 Common Lisp 的 Python 样式生成器。包括一个 itertools 端口。”

它在[Quicklisp](https://www.quicklisp.org/beta/releases.html)中可用。可能还有其他 Common Lisp 库可以提供帮助。

* * *

## 回答 #7

> 赞同：1
> 
> 时间：2018-07-17T08:32:50.147

没有找到我想要的，也不想使用外部包，我最终编写了自己的版本，该版本与 python 版本不同（希望对其进行改进）并避免循环。如果您认为它确实效率低下并且可以改进它，请这样做。

```
;; A version of range taking the form (range [[first] last [[step]]]).
;; It takes negative numbers and corrects STEP to the same direction
;; as FIRST to LAST then returns a list starting from FIRST and
;; ending before LAST
(defun range (&rest args)
  (case (length args)                                                      
    ( (0) '())                                                             
    ( (1) (range 0 (car args) (if (minusp (car args)) -1 1)))           
    ( (2) (range (car args) (cadr args)                                    
                 (if (>= (car args) (cadr args)) -1 1)))                   
    ( (3) (let* ((start (car args)) (end (cadr args))                      
                 (step (abs (caddr args))))
           (if (>=  end start)
             (do ((i start (+ i step))
                  (acc '() (push i acc)))
               ((>= i end) (nreverse acc)))
             (do ((i start (- i step))
                  (acc '() (push i acc)))
               ((<= i end) (nreverse acc))))))
    (t (error "ERROR, too many arguments for range"))))

;; (range-inc [[first] last [[step]]] ) includes LAST in the returned range
(defun range-inc (&rest args)
  (case (length args)
    ( (0) '())
    ( (1) (append (range (car args)) args))
    ( (2) (append (range (car args) (cadr args)) (cdr args)))
    ( (3) (append (range (car args) (cadr args) (caddr args))
          (list (cadr args))))
    (t (error "ERROR, too many arguments for range-inc")))) 
```

注意：我也写了一个方案[版本](https://stackoverflow.com/a/51376529/6713615)

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2018-11-08T05:09:08.813

这是一个生成数字列表的范围函数。我们使用**do** “循环”。如果有函数循环这样的东西，那么**做**宏就是它。虽然没有递归，但当你构造一个**do**时，我发现思路非常相似。您考虑**do**中的每个变量的方式与考虑递归调用中的每个参数的方式相同。

我使用**list***而不是**cons**。**list*与****cons**完全相同，但可以有 1、2 或更多参数。**(list 1 2 3 4 nil)**和**(cons 1 (cons 2 (cons 3 (cons 4 nil))))**。

```
(defun range (from-n to-n &optional (step 1)) ; step defaults to 1
  (do ((n from-n (+ n step))        ; n initializes to from-n, increments by step
       (lst nil (list* n lst)))     ; n "pushed" or "prepended" to lst

      ((> n to-n)                   ; the "recursion" termination condition
       (reverse lst))))             ; prepending with list* more efficient than using append
                                    ; however, need extra step to reverse lst so that
                                    ; numbers are in order 
```

这是一个测试会话：

> CL-USER 23 >（范围 0 10）
> 
> (0 1 2 3 4 5 6 7 8 9 10)
> 
> CL-USER 24 >（范围 10 0 -1）
> 
> 零
> 
> CL-USER 25 > (范围 10 0 1)
> 
> 零
> 
> CL-USER 26 >（范围 1 21 2）
> 
> (1 3 5 7 9 11 13 15 17 19 21)
> 
> CL-USER 27 >（反向（范围 1 21 2））
> 
> (21 19 17 15 13 11 9 7 5 3 1)
> 
> CL-用户 28 >

此版本不适用于递减序列。但是，您会看到可以使用**reverse**来获得递减序列。

* * *

## 回答 #9

> 赞同：0
> 
> 时间：2019-09-05T23:33:31.153

需要`(range n)`在一个刚刚拥有并可用的[小型 Lisp中实现：](https://github.com/zick/ZickStandardLisp)`dotimes``setq`

```
(defun range (&rest args)
    (let ( (to '()) )
        (cond 
            ((= (length args) 1) (dotimes (i (car args))
                (push i to)))
            ((= (length args) 2) (dotimes (i (- (cadr args) (car args)))
                (push (+ i (car args)) to))))
    (nreverse to))) 
```

例子：

```
> (range 10)
(0 1 2 3 4 5 6 7 8 9)

> (range 10 15)
(10 11 12 13 14) 
```

* * *

## 回答 #10

> 赞同：0
> 
> 时间：2020-04-08T14:38:43.967

以防万一，这是 user1969453 的答案的类似物，它返回一个向量而不是一个列表：

```
(defun seq (from to &optional (step 1))
  (do ((acc (make-array 1 :adjustable t :fill-pointer 0))
       (i from (+ i step)))
      ((> i to) acc) (vector-push-extend i acc))) 
```

或者，如果您想预先分配向量并跳过“vector-push”习语：

```
(defun seq2 (from to &optional (step 1))
  (let ((size (+ 1 (floor (/ (- to from) step))))) ; size is 1 + floor((to - from) / step))
    (do ((acc (make-array size))
         (i from (+ i step))
         (count 0 (1+ count)))
        ((> i to) acc) (setf (aref acc count) i)))) 
```

# javascript - 如何在 IE 9 中使用 JavaScript 从样式属性中获取背景颜色作为十六进制值？

> ID：13937522
> 
> 赞同：0
> 
> 时间：2012-12-18T16:39:46.840
> 
> 标签：javascript, jquery, css, internet-explorer-9

> **可能重复：**
> [使用 jQuery 获取十六进制值而不是 RGB 值](https://stackoverflow.com/questions/1740700/get-hex-value-rather-than-rgb-value-using-jquery)

我有一个`<span>`这样的：

```
<span class="colour" style="background:#000000;"></span> 
```

在大多数浏览器中，包括 IE 8，我可以像这样获得背景颜色的十六进制值：

```
$('span.colour').attr('style').match(/#[0123456789ABCDEF]{3,6}/gi); 
```

但是，在 IE 9 中，`$('span.colour').attr('style')`返回以下字符串：

```
background: rgb(0, 0, 0); 
```

我是否必须在 JavaScript 中转换回十六进制，或者有没有办法让 IE 9 直接从元素中给我十六进制值（即实际上在该死的 HTML 中的东西）？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-18T16:43:05.060

您可以使用以下内容对其进行转换（[source](http://wowmotty.blogspot.com/2009/06/convert-jquery-rgb-output-to-hex-color.html)）。

我相信大多数现代浏览器（包括 chrome）返回 rgb 而不是 hex。

也许您可以进行基本匹配来确定它是十六进制还是 rgb，然后在需要时转换 rgb。

```
function rgb2hex(rgb) {
    rgb = rgb.match(/^rgb\((\d+),\s*(\d+),\s*(\d+)\)$/);
    function hex(x) {
        return ("0" + parseInt(x).toString(16)).slice(-2);
    }
    return "#" + hex(rgb[1]) + hex(rgb[2]) + hex(rgb[3]);
} 
```

* * *

Cody O'Dell 发现的更新版本（支持 alpha）：

```
//Function to convert hex format to a rgb color
function rgb2hex(rgb){
 rgb = rgb.match(/^rgba?[\s+]?\([\s+]?(\d+)[\s+]?,[\s+]?(\d+)[\s+]?,[\s+]?(\d+)[\s+]?/i);
 return (rgb && rgb.length === 4) ? "#" +
  ("0" + parseInt(rgb[1],10).toString(16)).slice(-2) +
  ("0" + parseInt(rgb[2],10).toString(16)).slice(-2) +
  ("0" + parseInt(rgb[3],10).toString(16)).slice(-2) : '';
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-18T16:46:04.007

我认为 IE 中没有直接的功能可以为您做到这一点。使用 JS 是将 rgb 值转换为十六进制代码的唯一方法。

这是一个可以将颜色值转换为十六进制的函数

```
function toHex(color) {
  var body  = createPopup().document.body,
      range = body.createTextRange();
  body.style.color = color;
  var value = range.queryCommandValue("ForeColor");
  value = ((value & 0x0000ff) << 16) | (value & 0x00ff00) | ((value & 0xff0000) >>> 16);
  value = value.toString(16);
  return "#000000".slice(0, 7 - value.length) + value;
}; 
```

你可以在这里阅读更多关于它的信息：http: [//dean.edwards.name/weblog/2009/10/convert-any-colour-value-to-hex-in-msie/](http://dean.edwards.name/weblog/2009/10/convert-any-colour-value-to-hex-in-msie/)

# c - 是否可以#Include 在“钻石继承”结构中？

> ID：13937523
> 
> 赞同：0
> 
> 时间：2012-12-18T16:39:59.577
> 
> 标签：c, include

我正在尝试用 C 做一些项目。

我想知道是否可以`#include`从同一个文件中制作两次，以一种让人想起钻石遗产的方式。

IE

*   在**交流**中有`#include "a.h"`
*   在**公元前**有`#include "b.h"`
*   在**bh**中有`#include "a.h"`

有可能`#include "b.h"`在**交流**吗？

我收到一个错误：

```
some_variable already defined in a.obj 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-12-18T16:44:55.470

简单：不要在标题中*定义*变量，只需*声明*它们：

标题：

```
// a.h

#ifndef A_H             // always use #include guards
#define A_H

extern int my_variable; // declare my_variable

...

#endif 
```

源文件交流：

```
// a.c

#include "a.h"

int my_variable;        // define my_variable

... 
```

源文件 bc:

```
// a.c

#include "a.h"
#include "b.h"

... 
```

正如其他人所提到的，#include 守卫很有用，并且是一个养成的好习惯，但它们可能不是这个特定问题的解决方案。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-18T16:44:59.083

您必须在**ah**`extern`中声明变量，然后按以下方式修改您的标头**ah ：**

 ****```
 #ifndef a_h
 #define a_h

   //your a.h 

 #endif 
```****

# c# - 异步回调不适用于保存事件 crm 2011 和 silverlight

> ID：13937524
> 
> 赞同：-1
> 
> 时间：2012-12-18T16:40:08.277
> 
> 标签：c#, silverlight, dynamics-crm-2011

我正在使用 silverlight o-data 服务与 CRM 2011 进行交互，当我尝试通过单击 CRM 表单的保存按钮来保存数据时遇到了一些问题。

当我单击保存按钮时，我调用`OnSave`了将保存我的数据的 Silverlight 函数 ( )，并且如您所知，在 Silverlight OData 服务上保存是异步的。我必须创建两个函数，第一个将 beginSave，第二个将 endSave。

有没有办法在同一功能上完成保存数据？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-18T16:45:11.510

好吧，您可以使用匿名方法，以便只有一个*命名*函数。它通常会为您节省一些打字时间，并使代码更短且更易于阅读，但从技术上讲仍然不止一个功能。

如果您使用的是 C# 5.0，您可以使用新的 async/await 功能，这样您将只编写一个函数，并且您不会*显式*创建任何其他函数，即使在幕后最终会生成一个或多个附加函数创建的。这是一些非常有趣的东西，它*极大地*简化了像 Silverlight 这样一切都是异步的范例中的编程。

您可以在技术上（可能取决于所需的签名）创建一个既是 begin 方法又是 end 方法的函数，并尝试确定它需要在方法内部执行哪些操作。这将非常、非常丑陋且难以使用，但从技术上讲只需要一种方法。请不要这样做。

# android - 如何在android中使用自定义键盘应用程序编写编辑文本

> ID：13937526
> 
> 赞同：3
> 
> 时间：2012-12-18T16:40:22.153
> 
> 标签：android

我正在做一个需要特殊键盘的应用程序，我可以通过按键将文本转换为编辑文本。

公共类 SecondActivity 扩展 Activity 实现 OnKeyboardActionListener, OnKeyListener {

```
private static final String TAG = SecondActivity.class.getName();
private EditText editText1, editText2, editText3;
private InputMethodManager imm;
private String mWordSeparators;
private StringBuilder mComposing = new StringBuilder();
private KeyboardView keyboardView;
private Keyboard keyboard;
private Keyboard miKeyboard;
private boolean mCapsLock;
private long mLastShiftTime;
private boolean mCompletionOn;
private long mMetaState;
private CompletionInfo[] mCompletions;

protected void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.activity_second);

    Button button3 = (Button) findViewById(R.id.button3);
    button3.setOnClickListener(new OnClickListener() {
        public void onClick(View v) {
            finish();
            Log.d("cambio estado", "onDestroy");
        }
    });

    Button button4 = (Button) findViewById(R.id.button4);
    button4.setOnClickListener(new OnClickListener() {
        public void onClick(View v) {
            finish();
            Log.d("cambio estado", "onDestroy");
        }
    });

    editText1 = (EditText) findViewById(R.id.editText1);
    editText2 = (EditText) findViewById(R.id.editText2);
    editText3 = (EditText) findViewById(R.id.editText3);

    imm = (InputMethodManager)getSystemService(INPUT_METHOD_SERVICE);
    imm.hideSoftInputFromWindow(editText1.getWindowToken(), 0);
    imm.hideSoftInputFromWindow(editText2.getWindowToken(), 0);
    imm.hideSoftInputFromWindow(editText3.getWindowToken(), 0);
    mWordSeparators = getResources().getString(R.string.word_separators);

    keyboardView = (KeyboardView) findViewById(R.id.keyboardView);
    keyboard = new Keyboard(this, R.xml.qwerty);
    miKeyboard = new Keyboard(this,R.xml.qwerty);
    keyboardView.setKeyboard(keyboard);
    keyboardView.setEnabled(true);
    keyboardView.setPreviewEnabled(true);
    keyboardView.setOnKeyListener(this);
    keyboardView.setOnKeyboardActionListener(this);
}

public void onStartInput(EditorInfo attribute, boolean restarting) {

    mComposing.setLength(0);
    updateCandidates();

    if (!restarting) {
        mMetaState = 0;
    }

    mCompletionOn = false;
    mCompletions = null;

    switch (attribute.inputType & InputType.TYPE_MASK_CLASS) {
        case InputType.TYPE_CLASS_NUMBER:
        case InputType.TYPE_CLASS_DATETIME:
            keyboard = miKeyboard;
            break;

        case InputType.TYPE_CLASS_PHONE:
            keyboard = miKeyboard;
            break;

        case InputType.TYPE_CLASS_TEXT:
            keyboard = miKeyboard;
            updateShiftKeyState(attribute);
            break;

        default:
            keyboard = miKeyboard;
            updateShiftKeyState(attribute);
    }
    }

 public void onDisplayCompletions(CompletionInfo[] completions) {
    if (mCompletionOn) {
        if (completions == null) {
            return;
        }
        List<String> stringList = new ArrayList<String>();
        for (int i = 0; i < completions.length; i++) {
            CompletionInfo ci = completions[i];
            if (ci != null) stringList.add(ci.getText().toString());
        }
    }
}

 private boolean translateKeyDown(int keyCode, KeyEvent event) {
     mMetaState = MetaKeyKeyListener.handleKeyDown(mMetaState,
             keyCode, event);
     int c = event.getUnicodeChar(MetaKeyKeyListener.getMetaState(mMetaState));
     mMetaState = MetaKeyKeyListener.adjustMetaAfterKeypress(mMetaState);
     InputConnection ic = getCurrentInputConnection();
     if (c == 0 || ic == null) {
         return false;
     }
     if ((c & KeyCharacterMap.COMBINING_ACCENT) != 0) {
         c = c & KeyCharacterMap.COMBINING_ACCENT_MASK;
     }  
     if (mComposing.length() > 0) {
         char accent = mComposing.charAt(mComposing.length() -1 );
         int composed = KeyEvent.getDeadChar(accent, c);
         if (composed != 0) {
             c = composed;
             mComposing.setLength(mComposing.length()-1);
         }
     } 
     onKey(c, null);
     return true;
 }

 private void hideDefaultKeyboard() {
      getWindow().setSoftInputMode(
        WindowManager.LayoutParams.SOFT_INPUT_STATE_ALWAYS_HIDDEN);
     }

private void handleShift() {
    checkToggleCapsLock();
    keyboardView.setShifted(mCapsLock || !keyboardView.isShifted());
}

private void checkToggleCapsLock() {
    long now = System.currentTimeMillis();
    if (mLastShiftTime + 800 > now) {
        mCapsLock = !mCapsLock;
        mLastShiftTime = 0;
    } else {
        mLastShiftTime = now;
    }
}

private void updateCandidates() {
    if (!mCompletionOn) {
        if (mComposing.length() > 0) {
            ArrayList<String> list = new ArrayList<String>();
            list.add(mComposing.toString());
        }
    }
}

private void handleClose() {
    commitTyped(getCurrentInputConnection());
    keyboardView.closing();
}

private void handleCharacter(int primaryCode, int[] keyCodes) {
        if (keyboardView.isShifted()) {
            primaryCode = Character.toUpperCase(primaryCode);
        }
        else {
        getCurrentInputConnection().commitText(
                String.valueOf((char) primaryCode), 1);
    }
}

public void onText(CharSequence text) {
    Log.d(TAG, "onText? \"" + text + "\"");
    InputConnection ic = getCurrentInputConnection();
    if (ic == null) return;
    ic.beginBatchEdit();
    if (mComposing.length() > 0) {
        commitTyped(ic);
    }
    ic.commitText(text, 0);
    ic.endBatchEdit();
    updateShiftKeyState((EditorInfo) getCurrentInputEditorInfo());
}

private void updateShiftKeyState(EditorInfo attr) {
    if (attr != null 
            && keyboardView != null && keyboard == keyboardView.getKeyboard()) {
        int caps = 0;
        EditorInfo ei = (EditorInfo) getCurrentInputEditorInfo();
        if (ei != null && ei.inputType != InputType.TYPE_NULL) {
            caps = getCurrentInputConnection().getCursorCapsMode(attr.inputType);
        }
        keyboardView.setShifted(mCapsLock || caps != 0);
    }}

private void commitTyped(InputConnection inputConnection) {
    if (mComposing.length() > 0) {
        inputConnection.commitText(mComposing, mComposing.length());
        mComposing.setLength(0);
        updateCandidates();
    }
}

private String getWordSeparators() {
    return mWordSeparators;
}

public boolean isWordSeparator(int code) {
    String separators = getWordSeparators();
    return separators.contains(String.valueOf((char)code));
}

private void handleBackspace() {
    final int length = mComposing.length();
    if (length > 1) {
        mComposing.delete(length - 1, length);
        getCurrentInputConnection().setComposingText(mComposing, 1);
        updateCandidates();
    } else if (length > 0) {
        mComposing.setLength(0);
        getCurrentInputConnection().commitText("", 0);
        updateCandidates();
    } else {
        keyDownUp(KeyEvent.KEYCODE_DEL);
    }
    updateShiftKeyState(getCurrentInputEditorInfo());
}

private InputConnection getCurrentInputConnection() {
    return getCurrentInputConnection();
}

private EditorInfo getCurrentInputEditorInfo() {
    return getCurrentInputEditorInfo();
}

@Override
public void swipeUp() {
    Log.d(TAG, "swipeUp");
}

@Override
public void swipeRight() {
    Log.d(TAG, "swipeRight");
}

@Override
public void swipeLeft() {
    Log.d(TAG, "swipeLeft");
    handleBackspace();
}

@Override
public void swipeDown() {
    Log.d(TAG, "swipeDown");
    handleClose();
}

@Override
public void onRelease(int primaryCode) {
    Log.d(TAG, "onRelease? primaryCode=" + primaryCode);
}

@Override
public void onPress(int primaryCode) {
    Log.d(TAG, "onPress? primaryCode=" + primaryCode);
}

@Override
public void onKey(int primaryCode, int[] keyCodes) {
    Log.d(TAG, "onKey? primaryCode=" + primaryCode);
    int n1 = 0; // -1 count
    for (int keyCode : keyCodes) {
        if (keyCode == -1) {
            n1++;
            continue;
        }
        Log.v(TAG, "keyCode=" + keyCode);
    }
    Log.v(TAG, "keyCode=-1 *" + n1);
if (isWordSeparator(primaryCode)) {
    if (mComposing.length() > 0) {
        commitTyped(getCurrentInputConnection());
    }
    sendKey(primaryCode);
    updateShiftKeyState(getCurrentInputEditorInfo());
} else if (primaryCode == Keyboard.KEYCODE_DELETE) {
    handleBackspace();
} else if (primaryCode == Keyboard.KEYCODE_SHIFT) {
    handleShift();
} else if (primaryCode == Keyboard.KEYCODE_CANCEL) {
    handleClose();
} else if (primaryCode == Keyboard.KEYCODE_MODE_CHANGE
        && keyboardView != null) {
    Keyboard current = keyboardView.getKeyboard();
    keyboardView.setKeyboard(current);
} else {
    handleCharacter(primaryCode, keyCodes);
} 
```

}

```
private void sendKey(int keyCode) {
    switch (keyCode) {
        case '\n':
            keyDownUp(KeyEvent.KEYCODE_ENTER);
            break;
        default:
            if (keyCode >= '0' && keyCode <= '9') {
                keyDownUp(keyCode - '0' + KeyEvent.KEYCODE_0);
            } else {
                getCurrentInputConnection().commitText(String.valueOf((char) keyCode), 1);
            }
            break;
    }
}

public boolean onKeyDown(int keyCode, KeyEvent event) {
    switch (keyCode) {
        case KeyEvent.KEYCODE_BACK:
            if (event.getRepeatCount() == 0 && keyboardView != null) {
                if (keyboardView.handleBack()) {
                    return true;
                }
            }
            break;    
        case KeyEvent.KEYCODE_DEL:
            if (mComposing.length() > 0) {
                onKey(Keyboard.KEYCODE_DELETE, null);
                return true;
            }
            break;
        case KeyEvent.KEYCODE_ENTER:
            return false;
        default:
            if (mCapsLock) {
                if (keyCode == KeyEvent.KEYCODE_SPACE
                        && (event.getMetaState()&KeyEvent.META_ALT_ON) != 0) {
                    InputConnection ic = getCurrentInputConnection();
                    if (ic != null) {
                        ic.clearMetaKeyStates(KeyEvent.META_ALT_ON);
                        keyDownUp(KeyEvent.KEYCODE_A);
                        keyDownUp(KeyEvent.KEYCODE_N);
                        keyDownUp(KeyEvent.KEYCODE_D);
                        keyDownUp(KeyEvent.KEYCODE_R);
                        keyDownUp(KeyEvent.KEYCODE_O);
                        keyDownUp(KeyEvent.KEYCODE_I);
                        keyDownUp(KeyEvent.KEYCODE_D);
                        return true;
                    }
                }
                if (translateKeyDown(keyCode, event)) {
                    return true;
                }
            }
    }
    return super.onKeyDown(keyCode, event);
}

private void keyDownUp(int keyEventCode) {
    getCurrentInputConnection().sendKeyEvent(
            new KeyEvent(KeyEvent.ACTION_DOWN, keyEventCode));
    getCurrentInputConnection().sendKeyEvent(
            new KeyEvent(KeyEvent.ACTION_UP, keyEventCode));
}

@Override
public boolean onKey(View v, int keyCode, KeyEvent event) {
    hideDefaultKeyboard();
    Log.d(TAG, "onKey? keyCode=" + keyCode);
    return false;
} 
```

}

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-18T17:07:11.263

在您的 Xml 文件中，在 editText 标记内您可以找到类似`android:inputType`属性的内容。您可以指定不同类型的输入类型，例如 textEmail、phoneNumber、textPassword。

类型很多，如果你指定输入类型属性，它会根据输入类型显示自定义键盘，

`If your editText input type is a phoneNumber, then it will show Num KeyPad`

`If your editText input type is a textPassword, then it will show Character Keypad`

像这样，您可以拥有更多自定义小键盘/键盘

对于密码键盘，

```
 <EditText android:id=..........
            android:inputType="textPassword" /> 
```

对于数字键盘

```
 <EditText android:id=..........
            android:inputType="number" /> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-12-18T13:22:29.707

你有没有在清单中声明它

```
 <service
            android:name="TamilSoftKeyboard"
            android:permission="android.permission.BIND_INPUT_METHOD">
            <intent-filter>
                <action android:name="android.view.InputMethod" />
            </intent-filter>

            <meta-data
                android:name="android.view.im"
                android:resource="@xml/method" />
        </service> 
```

# android - 将数据从android中的另一个活动发送到片段

> ID：13937528
> 
> 赞同：0
> 
> 时间：2012-12-18T16:40:29.497
> 
> 标签：android, android-activity, fragment

我有一个活动，它是几个片段的容器。其中一个片段启动另一个活动，我想从第二个活动向其中一个片段发送一些数据。我怎样才能做到这一点？基本上，第一个活动会超出第二个活动，并且当第二个活动关闭时，其中一个 EditView 将使用新值更新。我本可以使用意图，但如果活动已经开始，我该如何发送？谢谢你。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-18T16:59:49.190

如果您想将数据从片段传递回其包含的活动，可以通过声明接口处理程序并通过该接口传递数据来实现。并确保您的包含活动实现这些接口。

例如：在您的片段中，声明此接口如下：

```
 public interface CallBackInterface {
      public void onCallBack(String param);
 }

 //Declare this interface in your fragment
 CallBackInterface callBk;

 @Override
 public void onAttach(Activity a) {
     super.onAttach(a);
     callBk= (CallBackInterface ) a;
 } 
```

在您的片段中，当您需要处理数据的传递时，只需在“callBk”对象上调用它：

```
 public void  callBack(String param) {
     callBk.onCallBack(param);
 } 
```

最后，在实现 CallBackInterface 的包含活动中......

```
 @Override
  public void onCallBack(String param) {
       Log.d("TAG","hi " + param);
  } 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-18T17:03:54.073

您需要使用 开始您的第二个活动`startActivityForResult()`。在完成之前的第二个活动中，您需要将数据添加到捆绑包中，将其传递给意图，然后将结果设置为意图。

```
Bundle bundle = new Bundle();
bundle.putString("myData", "myValue");
Intent intent = new Intent();
intent.putExtra(bundle);
setResult(intent, 0);
finish(); 
```

然后在活动 1 中应该有一个`onactivityresult`方法可以从意图中检索值并将其设置在片段中您想要的位置

```
protected void onActivityResult(int requestCode, int resultCode, Intent data) {
Bundle bundle = data.getData();
string value = bundle.getString("myData");
} 
```

我不确定我是否完全正确地记住了它，但我认为应该足以让你开始。

# iphone - 通过 BPM 搜索 Spotify iPhone API

> ID：13937533
> 
> 赞同：0
> 
> 时间：2012-12-18T16:40:43.207
> 
> 标签：iphone, spotify, cocoalibspotify-2.0

我正在我的 iPhone 应用程序中实现 Spotify。我想按 BPM 搜索曲目。在 Spotify 中，是否有任何 API 可以按 BPM 进行搜索。请帮忙。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-18T17:13:04.397

对不起，但我不相信 Spotify 的搜索界面支持直接按节奏搜索。您可以在此社区线程上添加“荣誉”：

> [http://community.spotify.com/t5/Spotify-Ideas/Search-by-BPM-beats-per-minute/idi-p/335](http://community.spotify.com/t5/Spotify-Ideas/Search-by-BPM-beats-per-minute/idi-p/335)

做你想做的最简单的方法可能是使用另一个元数据服务按 BPM 搜索，然后将你的结果与 Spotify 交叉匹配。

# c# - 为什么 System.TimeSpan 不是 XML 可序列化的？

> ID：13937535
> 
> 赞同：8
> 
> 时间：2012-12-18T16:41:01.913
> 
> 标签：c#, serialization, xml-serialization, timespan

当我尝试将 TimeSpan 值存储到 ApplicationData Settings 中时，我收到一个错误，因为 TimeSpan 无法序列化。这个 SO 问题显示了如何处理它：[How to serialize a TimeSpan to XML](https://stackoverflow.com/questions/637933/net-how-to-serialize-a-timespan-to-xml)

为什么 TimeSpan 不容易序列化？

而且，是否有无法序列化的数据类型列表？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-12-18T17:00:49.257

The reason it won't serialize is because `XmlCustomFormatter` doesn't implement the functionality to serialize it.

From the `XmlCustomFormatter` class, here is a list of supported serializable data (from the `FromDefaultValue` method):

`DateTime`

`Date`

`Time`

You can see how it is used to serialize everything if you look at the `XmlSerializationWriter` class in the source reference:

See the `WriteTypedPrimitive` method for more details on primites etc.

```
 /// <include file='doc\XmlSerializationWriter.uex' path='docs/doc[@for="XmlSerializationWriter.WriteTypedPrimitive"]/*' /> 
    protected void WriteTypedPrimitive(string name, string ns, object o, bool xsiType) { 
```

Details on object and xml serialization:

```
 /// <include file='doc\XmlSerializationWriter.uex' path='docs/doc[@for="XmlSerializationWriter.FromByteArrayBase64"]/*' /> 
    protected static byte[] FromByteArrayBase64(byte[] value) {
        // Unlike other "From" functions that one is just a place holder for automatic code generation. 
        // The reason is performance and memory consumption for (potentially) big 64base-encoded chunks
        // And it is assumed that the caller generates the code that will distinguish between byte[] and string return types
        //
        return value; 
    }

    /// <include file='doc\XmlSerializationWriter.uex' path='docs/doc[@for="XmlSerializationWriter.FromByteArrayHex"]/*' /> 
    protected static string FromByteArrayHex(byte[] value) {
        return XmlCustomFormatter.FromByteArrayHex(value); 
    } 

    /// <include file='doc\XmlSerializationWriter.uex' path='docs/doc[@for="XmlSerializationWriter.FromDateTime"]/*' /> 
    protected static string FromDateTime(DateTime value) {
        return XmlCustomFormatter.FromDateTime(value);
    }

    /// <include file='doc\XmlSerializationWriter.uex' path='docs/doc[@for="XmlSerializationWriter.FromDate"]/*' />
    protected static string FromDate(DateTime value) { 
        return XmlCustomFormatter.FromDate(value); 
    }

    /// <include file='doc\XmlSerializationWriter.uex' path='docs/doc[@for="XmlSerializationWriter.FromTime"]/*' />
    protected static string FromTime(DateTime value) {
        return XmlCustomFormatter.FromTime(value);
    } 

    /// <include file='doc\XmlSerializationWriter.uex' path='docs/doc[@for="XmlSerializationWriter.FromChar"]/*' /> 
    protected static string FromChar(char value) { 
        return XmlCustomFormatter.FromChar(value);
    } 

    /// <include file='doc\XmlSerializationWriter.uex' path='docs/doc[@for="XmlSerializationWriter.FromEnum"]/*' />
    protected static string FromEnum(long value, string[] values, long[] ids) {
        return XmlCustomFormatter.FromEnum(value, values, ids, null); 
    }

    /// <include file='doc\XmlSerializationWriter.uex' path='docs/doc[@for="XmlSerializationWriter.FromEnum1"]/*' /> 
    protected static string FromEnum(long value, string[] values, long[] ids, string typeName) {
        return XmlCustomFormatter.FromEnum(value, values, ids, typeName); 
    }

    /// <include file='doc\XmlSerializationWriter.uex' path='docs/doc[@for="XmlSerializationWriter.FromXmlName"]/*' />
    protected static string FromXmlName(string name) { 
        return XmlCustomFormatter.FromXmlName(name);
    } 

    /// <include file='doc\XmlSerializationWriter.uex' path='docs/doc[@for="XmlSerializationWriter.FromXmlNCName"]/*' />
    protected static string FromXmlNCName(string ncName) { 
        return XmlCustomFormatter.FromXmlNCName(ncName);
    }

    /// <include file='doc\XmlSerializationWriter.uex' path='docs/doc[@for="XmlSerializationWriter.FromXmlNmToken"]/*' /> 
    protected static string FromXmlNmToken(string nmToken) {
        return XmlCustomFormatter.FromXmlNmToken(nmToken); 
    } 

    /// <include file='doc\XmlSerializationWriter.uex' path='docs/doc[@for="XmlSerializationWriter.FromXmlNmTokens"]/*' /> 
    protected static string FromXmlNmTokens(string nmTokens) {
        return XmlCustomFormatter.FromXmlNmTokens(nmTokens);
    } 
```

# ios - AppDelegate 中的点击覆盖代码不起作用。如何修复这些错误？

> ID：13937538
> 
> 赞同：0
> 
> 时间：2012-12-18T16:41:09.353
> 
> 标签：ios, uiview, appdelegate

很抱歉这个模糊的问题，但我不知道如何使它更具体，因为我不知道代码有什么问题。你们可能会立即知道这些错误的含义。

我正在尝试在应用程序启动时显示覆盖图像，然后通过点击手势使覆盖消失。我只是无法让它工作。我从另一个 SO 问题中获得了代码（链接：[创建点击覆盖指令视图](https://stackoverflow.com/questions/12289756/create-click-through-overlay-instruction-view?answertab=active#tab-top)）。**有什么想法我在这里想念的吗？**我的代码显示了我收到的错误消息（2 个错误，1 个警告）。

AppDelegate.m

```
- (BOOL)application:(UIApplication *)application didFinishLaunchingWithOptions:(NSDictionary *)launchOptions
{
    UIImageView *overlay = [[UIImageView alloc]
                            initWithImage:[UIImage imageNamed:@"overlayImg.png"]];
    [self.window addSubview:overlay];

    UITapGestureRecognizer * recognizer = [[UITapGestureRecognizer alloc] initWithTarget:self action:@selector(handleTap:)];
    recognizer.delegate = self; //WARNING: Assigning to 'id<UIGestureRecognizerDelegate>'from incompatible type 'AppDelegate *const__strong'
    [overlay addGestureRecognizer:recognizer];
    overlay.userInteractionEnabled =  YES;
    self.overlay = overlay; //ERROR: Property 'overlay' not found on object of type 'AppDelegate *'
    // Override point for customization after application launch.
    return YES;
}

- (void) handleTap:(UITapGestureRecognizer *)recognizer
{
    [self.overlay removeFromSuperView]; //ERROR: Property 'overlay' not found on object of type 'AppDelegate *'
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-18T16:50:31.680

您可以删除该行

```
recognizer.delegate = self; 
```

或实现委托。将此添加到 AppDelegate.m 的顶部以消除警告。

```
@interface AppDelegate () <UIGestureRecognizerDelegate>

@end 
```

看起来，您缺少该`UIImageView`属性。将属性添加到上面的接口扩展中。这应该是这样的：

```
@interface AppDelegate () <UIGestureRecognizerDelegate>
@property (nonatomic, strong) UIImageView *overlay;
@end 
```

# javascript - BreezeJS 和 RequireJS 没有按预期工作

> ID：13937539
> 
> 赞同：7
> 
> 时间：2012-12-18T16:41:14.803
> 
> 标签：javascript, knockout.js, requirejs, amd, breeze

我正在将breathJS 集成到一个已经使用knockoutJS 的现有requireJS 项目中。我遇到了几个问题。

首先是微风无法加载 Q 库，除非我将它作为`<script>`标签包含在我的 html 包装器中，而不是作为加载的 AMD 依赖项。在我的项目中，我试图将我的代码保留为单个脚本标记，所以这并不理想。

第二个问题是breezeJS 无法加载淘汰赛。在我的 main.js 中，我定义了淘汰赛的路径：

`knockout: '../libs/knockout/knockout-2.2.0',`

（我这样做是因为我喜欢确定我没有访问 global `ko`）

然而，当我在我的项目中添加微风时，微风无法加载我的淘汰赛库。查看微风代码，我可以看到它已被硬编码为将淘汰赛库加载为`ko`.

不想更改我的所有代码，我发现我可以将我加载的 AMD 淘汰赛库添加到全局窗口对象中`window['ko']`。但这感觉就像一个障碍。同样奇怪的是，以这种方式添加 Q 并删除`<script>`标签不起作用，因为我认为 Q 在应用程序的生命周期中为时过早，甚至在我污染全局之前 - 我确实将我的`require()`调用嵌套在 main.js 中，但隐藏了我的大部分应用程序文件都来自构建过程，所以我放弃了这种方法。

我怎样才能在我的项目中包含 Q 和淘汰赛和微风，并且仍然使用单行`<script>`标签，目前我不得不将 Q 作为单独的`<script>`标签包含并污染全局以使微风和淘汰赛能够很好地发挥作用。

我在我的项目中使用了很多其他库，但没有一个库那么难集成。

任何帮助深表感谢

干杯

加夫

编辑：这是我的完整需求配置：

```
require.config({
    /**
    * shims are for 3rd party libraries that have not been written in AMD format.
    * shims define AMD modules definitions that get created at runtime.
    */
    shim: {
        'jqueryUI': { deps: ['jquery'] },
        'jqueryAnimateEnhanced': { deps: ['jqueryUI'] },
        'jqueryScrollTo': { deps: ['jquery'] },
        'touchPunch': { deps: ['jquery'] },
        //'Q': { exports: 'Q' },
        //'breeze': { deps: ['Q', 'knockout'], exports: 'breeze' },
        'path': { exports: 'Path' },
        //'signalR': { deps: ['jquery'] },
    },

    paths: {
        //jquery
        jquery: '../libs/jquery/jquery-1.7.2.min',
        'jquery.adapter': '../libs/jquery/jquery.adapter',

        //jquery plugins
        horizontalNav: '../libs/jquery/plugins/horizontalNav/jquery.horizontalNav',
        jqueryUI: '../libs/jquery/plugins/jquery-ui/jquery-ui-1.9.2.custom',
        jqueryAnimateEnhanced: '../libs/jquery/plugins/animate-enhanced/jquery.animate-enhanced',
        touchPunch: '../libs/jquery/plugins/touch-punch/jquery.ui.touch-punch.min',
        //jqueryScrollTo: '../libs/jquery/plugins/jquery-scrollTo/jquery.scrollTo.min',
        //reveal: '../libs/jquery/plugins/reveal/jquery.reveal',
        //opentip: '../libs/jquery/plugins/opentip/opentip-jquery',

        //RequireJS
        domReady: '../libs/require/plugins/domReady',
        text: '../libs/require/plugins/text',
        async: '../libs/require/plugins/async',
        depend: '../libs/require/plugins/depend',
        json: '../libs/require/plugins/json',
        noext: '../libs/require/plugins/noext',

        //coffee-script
        'coffee-script': '../libs/coffee/coffee-script',
        cs: '../libs/require/plugins/cs',

        //Path
        path: '../libs/path/path.min',

        //Knockout
        knockout: '../libs/knockout/knockout-2.2.0',
        knockoutTemplateSource: '../libs/knockout/ko.templateSource',
        knockoutValidation: '../libs/knockout/ko.validation',

        //breeze
        Q: '../libs/breeze/q',
        breeze: '../libs/breeze/breeze.debug',

        //Signals (Observer pattern)
        signals: '../libs/signals/signals',

        //SignalR - Push notifications
        signalR: '../libs/signalR/jquery.signalR-0.5.2.min',

        //utils
        logger: 'common/logging/logger',
        tinycolor: '../libs/tinycolor/tinycolor',
        composing: 'common/composition/composing',

        //app specific
        BaseWidgetViewModel: 'app/view/core/BaseWidgetViewModel',

    }
}); 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-29T06:42:52.343

抱歉（假期）延迟解决您的问题。

我理解并感谢您消除除 RequireJS 之外的所有脚本标签的目标。根据我的经验，这个目标并不容易实现。

**您确实发现了 Breeze 缺陷**。Breeze 在内部引用了与应用程序的“require”函数不同的“require”函数。它不知道应用程序的“需要”功能或其配置。因此，当您省略 Q 脚本标签时，无论您如何配置应用程序 'require'，Breeze 都找不到 Q ...。

我们必须解决这个问题。当我们这样做时，我会在这里添加评论。

**同时，您必须为“Q”和“KO”使用脚本标签，并且必须将这些标签放在 RequireJs 的脚本标签之上**。请继续为您的应用程序脚本使用 require。

不幸的是，您还有其他与双重需求功能问题无关的问题。

首先，我认为你总是很难将 KO 排除在全局命名空间之外……这与 Breeze 无关。

在 KO 的 AMD 实现中（至少在我上次查看时），KO 要么在全局命名空间中，要么在 require 容器中；从不两者兼而有之。**不幸的是，许多有用的插件（bindingHandlers、debug.helpers）假设它位于全局命名空间中；如果您使用 require 加载 KO，您将无法使用它们**。

您可以在 Require 之前在脚本标签中加载 Knockout，然后在配置期间将 KO 填充到 Require 容器中。您的配置可能如下所示：

```
define('knockout', [], function () { return window.ko; });

```

**jQuery**开发人员意识到这将是一个问题。太多优秀的插件假定 jQuery 位于全局命名空间中。**jQuery 维护者（在我看来是**正确的）不是纯粹主义者，而是将 jQuery 放在Require 容器**和**全局命名空间中。

其次，许多其他有用的库不支持 Require。您的代码可以像这些脚本是为 require 设计的一样编写。我仍然认为最简单、最清晰的处理方法是在脚本标签中指定它们。`define`然后，您可以通过使用如上所示的调用定义它们来将它们添加到容器中。通过这种填充，**您自己的**模块可以一致地依赖 Require 来进行这些库的服务定位和依赖注入。

第三，我认为您的配置中有错误。出于我无法理解的原因，您决定在您的 Require 世界中将 Knockout 模块称为“ **knockout ”。**

很好......但是当我们修复它以使用应用程序的 require 容器时，您不应该期望 Breeze 会预期该模块名称。Breeze 将在其标准名称“ko”下寻找 KnockoutJs。Breeze 不会在您的首选名称“knockout”下找到它。

这没什么大不了的。如果您喜欢“淘汰”名称，则可以在两个名称下提供相同的实例。我很确定以下 shim 行在添加到您的配置代码时会起作用：

```
define('ko', ['knockout'], function (ko) { return ko; });

```

再次......这只有在我们修复了我们的 Breeze 需要错误之后才会有效。

[John Papa 必须在 Code Camper](http://pluralsight.com/training/Courses/TableOfContents/spa)中解决许多类似的问题；你可以看看他在那里做了什么，尤其是在`main.js`.

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-18T22:33:34.890

这应该从 Breeze v 1.2.4 开始修复。我们不再使用“require”的内部实现。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-18T17:51:16.077

听起来您的要求配置不正确。你能发布你需要配置的代码吗？我好奇：

```
keep my code down to a single script tag 
```

为什么？

编辑：现在我明白了。仍然听起来需要配置是错误的。

# php - 在数组中的特定位置查找字符串 - PHP

> ID：13937543
> 
> 赞同：-1
> 
> 时间：2012-12-18T16:41:23.863
> 
> 标签：php, regex, string, explode, implode

我有以下文本字符串：**“园艺、景观美化、足球、3D 建模”**

我需要 PHP 来挑选短语“ **Football ”*****之前***的字符串。

 **因此，无论数组的大小如何，代码都将始终扫描短语“ **Football** ”并检索紧接在它之前的文本。

到目前为止，这是我的（蹩脚的）尝试：

```
$array = "Swimming,Astronomy,Gardening,Rugby,Landscaping,Football,3D Modelling";
$find = "Football";
$string = magicFunction($find, $array);
echo $string; // $string would = 'Landscaping' 
```

对此的任何帮助将不胜感激。

非常感谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-18T16:43:36.793

```
//PHP 5.4
echo explode(',Football', $array)[0]

//PHP 5.3-
list($string) = explode(',Football', $array);
echo $string; 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-18T16:45:50.307

```
$terms = explode(',', $array);
$index = array_search('Football', $terms);
$indexBefore = $index - 1;

if (!isset($terms[$indexBefore])) {
    trigger_error('No element BEFORE');
} else {
    echo $terms[$indexBefore];
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-18T16:50:54.463

```
$array = array("Swimming","Astronomy","Gardening","Rugby","Landscaping","Football","3D" "Modelling");
$find = "Football";
$string = getFromOffset($find, $array);
echo $string; // $string would = 'Landscaping'

function getFromOffset($find, $array, $offset = -1)
{
    $id = array_search($find, $array);
    if (!$id)
        return $find.' not found';
    if (isset($array[$id + $offset]))
        return $array[$id + $offset];
    return $find.' is first in array';
} 
```

您还可以将偏移量设置为与之前的 1 不同。**

# tridion - 标题中带有特殊字符的 Tridion RTF 链接失败

> ID：13937545
> 
> 赞同：4
> 
> 时间：2012-12-18T16:41:42.423
> 
> 标签：tridion

在 RTF 字段中，我们链接到标题为“A Component [1234]”的组件。

我们的复合模板使用默认完成操作 TBB。

它在发布过程中失败并出现以下错误：

阶段：部署处理阶段失败，无法转换 tcdl 文件 ...\index.aspx，无法转换 tcdl 输入字符串 无法转换输入字符串，不平衡的属性引号 linkAttributes="title="A Component <1234 Source (32526)"

我们也在使用 Razor 调解器，但我猜它在这里不相关？

关于为什么会出现此问题的任何想法？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-24T09:26:46.800

Razor 调解员工作完美。问题在于处理 RTF 值的自定义 RTF 函数。Razor 可以开箱即用地实现 ResolveXHTML，我们无需在代码中编写它，但我们有一些基本的 RegEx 替代我们的领域。感谢大家的想法。

# c# - 正则表达式匹配 3 个字母数字字符，除了“000”、“001”和“002”

> ID：13937548
> 
> 赞同：0
> 
> 时间：2012-12-18T16:41:55.520
> 
> 标签：c#, .net, regex

我需要一个匹配任何 3 个字母数字字符（如 [0-9A-Z]{3}）但不包括 000 001 002 的模式

```
AAA - pass
003 - pass
123 - pass
000 - fail
001 - fail
002 - fail 
```

更新：抱歉问题不完整。3 个字母数字实际上是较大模式的一部分： QUEO_BK20\d{2}(0[1-9]|1[012])(0[1-9]|[12][0-9]|3[01] )(?!00[012]) **[0-9A-Z]{3}** .csv

(?!00[012])[0-9A-Z]{3} 之类的模式仅适用于 3 个字符，但不是整个模式的一部分。

我正在使用.NET

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-18T16:43:25.240

如果您的正则表达式引擎支持它，请使用前瞻断言：

```
(?!00[012])[0-9A-Z]{3} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-18T16:45:15.207

您可能会包含一个负面的前瞻性，例如

```
(?!000|001|002)[0-9A-Z]{3} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-18T16:46:33.913

最简单的两种模式：

```
if (/^[0-9A-Z]{3}\z/ && !/^00[0-2]\z/) 
```

或者，如果您想要一个实际的正则表达式：

```
[1-9A-Z][0-9A-Z]{2}|0[1-9A-Z][0-9A-Z]|00[3-9A-Z] 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-12-18T16:47:58.107

并非所有编程逻辑都需要在正则表达式中。您也可以让您的主要编程逻辑正常工作。

在 Perl 中执行此操作的代码，但您明白了：

```
if ( $x =~ /^[0-9A-Z]{3}$/ && $x !~ /^00[012]$/ ) {
    # passed... 
```

`=~`表示“匹配”和`!~`表示“不匹配”。我建议其意图比任何涉及负面前瞻性的事情都要清楚得多。

# mysql - mySQL 将包含“，”的记录移动到新列

> ID：13937553
> 
> 赞同：0
> 
> 时间：2012-12-18T16:42:12.537
> 
> 标签：mysql

我想知道如何编写查询以从单个列中获取记录并将它们推送到新列。我想要移动的记录都在记录的某处包含一个逗号。举个例子：

前：

```
Column1  
1\. Smith, John  
2\. Sue, Maggie  
3\. Big Name Corp 
```

后：

```
Column1  
1\.  
2\.  
3\. Big Name Corp  

Column2  
1\. Smith, John  
2\. Sue, Maggie  
3\. 
```

任何帮助是极大的赞赏！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-18T16:45:32.087

```
UPDATE `tbl` SET `col2` = `col1` WHERE `col1` LIKE "%,%"

UPDATE `tbl` SET `col1` = "" WHERE `col1` LIKE "%,%" 
```

我认为它也可以在单个查询中使用

```
UPDATE `tbl` SET `col2` = `col1`, `col1` = "" WHERE `col1` LIKE "%,%" 
```

# c# - WCF：读取 XML 数据时已超出最大数组长度配额 (16384)

> ID：13937555
> 
> 赞同：10
> 
> 时间：2012-12-18T16:42:26.047
> 
> 标签：c#, .net, wcf, web-services, wcf-binding

我知道这已经被问过很多次了，相信我，我已经看了半个下午并尝试了很多，但仍然无法超越这个。

我正在尝试通过 Web 服务提交一些表单内容（也可以包括附件），但是当我尝试附加除小文件以外的任何内容时，始终出现以下错误。

我的完整错误是：

> 格式化程序在尝试反序列化消息时抛出异常：尝试反序列化参数 [http://tempuri.org/:scChildForm](http://tempuri.org/:scChildForm)时出错。InnerException 消息是“反序列化 MashForms.Models.SCChildrenForm 类型的对象时出错。读取 XML 数据时已超出最大数组长度配额 (16384)。可以通过更改创建 XML 阅读器时使用的 XmlDictionaryReaderQuotas 对象的 MaxArrayLength 属性来增加此配额。第 1 行，位置 41713.'。有关更多详细信息，请参阅 InnerException。

无论我如何尝试在 WCF 服务和 Web 客户端的 web.config 中覆盖该值，它仍将其报告为最大错误和随后的错误。

## WCF 网络配置

```
<?xml version="1.0" encoding="utf-8"?>
<configuration>
  <system.web>
    <compilation debug="true" targetFramework="4.0" />
        <!--<httpRuntime maxRequestLength="409600" executionTimeout="300" />-->
  </system.web>
  <connectionStrings>
    <add name="MashFormsContext" connectionString="Data Source=ServerName;Initial Catalog=MashFormsDev;Persist Security Info=True;User ID=UserName;Password=Password" providerName="System.Data.SqlClient" />
  </connectionStrings>
  <system.serviceModel>
    <behaviors>
      <serviceBehaviors>
        <behavior>
                    <dataContractSerializer maxItemsInObjectGraph="2147483647" />
                    <serviceTimeouts transactionTimeout="05:05:00" />
                    <serviceThrottling maxConcurrentCalls="500" maxConcurrentSessions="500" maxConcurrentInstances="2147483647" />
          <!-- To avoid disclosing metadata information, set the value below to false and remove the metadata endpoint above before deployment -->
          <serviceMetadata httpGetEnabled="true"/>
          <!--<serviceMetadata httpsGetEnabled="true"/>-->
          <!-- To receive exception details in faults for debugging purposes, set the value below to true.  Set to false before deployment to avoid disclosing exception information -->
          <serviceDebug includeExceptionDetailInFaults="true" />
          <!--<StructureMapServiceBehavior />-->
        </behavior>
      </serviceBehaviors>
    </behaviors>
    <serviceHostingEnvironment multipleSiteBindingsEnabled="true" aspNetCompatibilityEnabled="false" />
    <extensions>
      <behaviorExtensions>
      </behaviorExtensions>
    </extensions>

        <bindings>
            <basicHttpBinding>
                <binding name="BasicHttpBinding_IInsertNewForm" closeTimeout="00:01:00"
          openTimeout="00:01:00" receiveTimeout="00:10:00" sendTimeout="00:01:00"
          allowCookies="false" bypassProxyOnLocal="false" hostNameComparisonMode="StrongWildcard"
          maxBufferSize="2147483647" maxBufferPoolSize="524288" maxReceivedMessageSize="2147483647"
          messageEncoding="Text" textEncoding="utf-8" transferMode="Streamed"
          useDefaultWebProxy="true">
                    <readerQuotas maxDepth="2147483647" maxStringContentLength="2147483647" maxArrayLength="2147483647"
            maxBytesPerRead="2147483647" maxNameTableCharCount="2147483647"/>
                    <security mode="None">
                        <transport clientCredentialType="None" proxyCredentialType="None"
              realm="" />
                        <message clientCredentialType="UserName" algorithmSuite="Default" />
                    </security>
                </binding>
            </basicHttpBinding>
        </bindings>

    </system.serviceModel>
  <system.webServer>
    <modules runAllManagedModulesForAllRequests="true" />
        <validation validateIntegratedModeConfiguration="false" />
  </system.webServer>
  <runtime>
    <assemblyBinding xmlns="urn:schemas-microsoft-com:asm.v1">
      <dependentAssembly>
        <assemblyIdentity name="System.Web.Mvc" publicKeyToken="31bf3856ad364e35" culture="neutral" />
        <bindingRedirect oldVersion="0.0.0.0-4.0.0.0" newVersion="4.0.0.0" />
      </dependentAssembly>
    </assemblyBinding>
  </runtime>
</configuration> 
```

## 我的 Web 客户端 Web.Config

```
<?xml version="1.0" encoding="utf-8"?>
<!--
  For more information on how to configure your ASP.NET application, please visit
  http://go.microsoft.com/fwlink/?LinkId=152368
  -->
<configuration>
  <configSections>
    <!-- For more information on Entity Framework configuration, visit http://go.microsoft.com/fwlink/?LinkID=237468 -->
    <section name="entityFramework" type="System.Data.Entity.Internal.ConfigFile.EntityFrameworkSection, EntityFramework, Version=4.4.0.0, Culture=neutral, PublicKeyToken=b77a5c561934e089" requirePermission="false" />
  </configSections>
  <connectionStrings>
    <add name="DefaultConnection" providerName="System.Data.SqlClient" connectionString="Data Source=.\SQLEXPRESS;Initial Catalog=aspnet-PublicForms-20121112151426;Integrated Security=SSPI" />
  </connectionStrings>
  <appSettings>
    <add key="webpages:Version" value="2.0.0.0" />
    <add key="webpages:Enabled" value="false" />
    <add key="PreserveLoginUrl" value="true" />
    <add key="ClientValidationEnabled" value="true" />
    <add key="UnobtrusiveJavaScriptEnabled" value="true" />
  </appSettings>
  <system.web>
    <compilation debug="true" targetFramework="4.0" />
    <authentication mode="Forms">
      <forms loginUrl="~/Account/Login" timeout="2880" />
    </authentication>
    <pages>
      <namespaces>
        <add namespace="System.Web.Helpers" />
        <add namespace="System.Web.Mvc" />
        <add namespace="System.Web.Mvc.Ajax" />
        <add namespace="System.Web.Mvc.Html" />
        <add namespace="System.Web.Optimization" />
        <add namespace="System.Web.Routing" />
        <add namespace="System.Web.WebPages" />
      </namespaces>
    </pages>

    <sessionState mode="InProc" customProvider="DefaultSessionProvider">
      <providers>
        <add name="DefaultSessionProvider" type="System.Web.Providers.DefaultSessionStateProvider, System.Web.Providers, Version=1.0.0.0, Culture=neutral, PublicKeyToken=31bf3856ad364e35" connectionStringName="DefaultConnection" />
      </providers>
    </sessionState>
  </system.web>
  <system.webServer>
    <validation validateIntegratedModeConfiguration="false" />
    <modules runAllManagedModulesForAllRequests="true" />
    <handlers>
      <remove name="ExtensionlessUrlHandler-ISAPI-4.0_32bit" />
      <remove name="ExtensionlessUrlHandler-ISAPI-4.0_64bit" />
      <remove name="ExtensionlessUrlHandler-Integrated-4.0" />
      <add name="ExtensionlessUrlHandler-ISAPI-4.0_32bit" path="*." verb="GET,HEAD,POST,DEBUG,PUT,DELETE,PATCH,OPTIONS" modules="IsapiModule" scriptProcessor="%windir%\Microsoft.NET\Framework\v4.0.30319\aspnet_isapi.dll" preCondition="classicMode,runtimeVersionv4.0,bitness32" responseBufferLimit="0" />
      <add name="ExtensionlessUrlHandler-ISAPI-4.0_64bit" path="*." verb="GET,HEAD,POST,DEBUG,PUT,DELETE,PATCH,OPTIONS" modules="IsapiModule" scriptProcessor="%windir%\Microsoft.NET\Framework64\v4.0.30319\aspnet_isapi.dll" preCondition="classicMode,runtimeVersionv4.0,bitness64" responseBufferLimit="0" />
      <add name="ExtensionlessUrlHandler-Integrated-4.0" path="*." verb="GET,HEAD,POST,DEBUG,PUT,DELETE,PATCH,OPTIONS" type="System.Web.Handlers.TransferRequestHandler" preCondition="integratedMode,runtimeVersionv4.0" />
    </handlers>
  </system.webServer>
  <runtime>
    <assemblyBinding xmlns="urn:schemas-microsoft-com:asm.v1">
      <dependentAssembly>
        <assemblyIdentity name="System.Web.Helpers" publicKeyToken="31bf3856ad364e35" />
        <bindingRedirect oldVersion="1.0.0.0-2.0.0.0" newVersion="2.0.0.0" />
      </dependentAssembly>
      <dependentAssembly>
        <assemblyIdentity name="System.Web.Mvc" publicKeyToken="31bf3856ad364e35" />
        <bindingRedirect oldVersion="0.0.0.0-4.0.0.0" newVersion="4.0.0.0" />
      </dependentAssembly>
      <dependentAssembly>
        <assemblyIdentity name="System.Web.WebPages" publicKeyToken="31bf3856ad364e35" />
        <bindingRedirect oldVersion="1.0.0.0-2.0.0.0" newVersion="2.0.0.0" />
      </dependentAssembly>
      <dependentAssembly>
        <assemblyIdentity name="System.Data" publicKeyToken="b77a5c561934e089" culture="neutral" />
        <bindingRedirect oldVersion="0.0.0.0-4.0.0.0" newVersion="4.0.0.0" />
      </dependentAssembly>
    </assemblyBinding>
  </runtime>
  <entityFramework>
    <defaultConnectionFactory type="System.Data.Entity.Infrastructure.LocalDbConnectionFactory, EntityFramework">
      <parameters>
        <parameter value="v11.0" />
      </parameters>
    </defaultConnectionFactory>
  </entityFramework>
  <system.serviceModel>

    <bindings>
      <basicHttpBinding>
        <binding name="BasicHttpBinding_IInsertNewForm" closeTimeout="00:01:00"
          openTimeout="00:01:00" receiveTimeout="00:10:00" sendTimeout="00:01:00"
          allowCookies="false" bypassProxyOnLocal="false" hostNameComparisonMode="StrongWildcard"
          maxBufferSize="2147483647" maxBufferPoolSize="2147483647" maxReceivedMessageSize="2147483647"
          messageEncoding="Text" textEncoding="utf-8" transferMode="Buffered"
          useDefaultWebProxy="true">
          <readerQuotas maxDepth="32" maxStringContentLength="2147483647" maxArrayLength="2147483647"
            maxBytesPerRead="2147483647" maxNameTableCharCount="2147483647" />
          <security mode="None">
            <transport clientCredentialType="None" proxyCredentialType="None"
              realm="" />
            <message clientCredentialType="UserName" algorithmSuite="Default" />
          </security>
        </binding>
      </basicHttpBinding>
    </bindings>
    <client>
      <endpoint address="http://localhost:54070/MashPortalService/InsertNewForm.svc"
        binding="basicHttpBinding" bindingConfiguration="BasicHttpBinding_IInsertNewForm"
        contract="InsertNewForm.IInsertNewForm" name="BasicHttpBinding_IInsertNewForm" />
    </client>
  </system.serviceModel>
</configuration> 
```

我的 WCF 服务将接受非常小的文件，但不会更大，甚至 28k 也不会。

作为附加说明，当我最初将服务引用添加到 WebClient 中时，它不会默认为较大的值，它会像这样创建它：

## 默认 Web 客户端 Web.config

```
 <system.serviceModel>
    <bindings>
      <basicHttpBinding>
        <binding name="BasicHttpBinding_IInsertNewForm" closeTimeout="00:01:00"
          openTimeout="00:01:00" receiveTimeout="00:10:00" sendTimeout="00:01:00"
          allowCookies="false" bypassProxyOnLocal="false" hostNameComparisonMode="StrongWildcard"
          maxBufferSize="65536" maxBufferPoolSize="524288" maxReceivedMessageSize="65536"
          messageEncoding="Text" textEncoding="utf-8" transferMode="Buffered"
          useDefaultWebProxy="true">
          <readerQuotas maxDepth="32" maxStringContentLength="8192" maxArrayLength="16384"
            maxBytesPerRead="4096" maxNameTableCharCount="16384" />
          <security mode="None">
            <transport clientCredentialType="None" proxyCredentialType="None"
              realm="" />
            <message clientCredentialType="UserName" algorithmSuite="Default" />
          </security>
        </binding>
      </basicHttpBinding>
    </bindings>
    <client>
      <endpoint address="http://localhost:54070/MashPortalService/InsertNewForm.svc"
        binding="basicHttpBinding" bindingConfiguration="BasicHttpBinding_IInsertNewForm"
        contract="InsertNewForm.IInsertNewForm" name="BasicHttpBinding_IInsertNewForm" />
    </client>
  </system.serviceModel> 
```

## 更新 1：对尤金的回应

```
using System.ServiceModel;
using MashForms.Models;

namespace MashPortalService
{
    [ServiceContract]
    public interface IInsertNewForm
    {
        //Testing operations
        [OperationContract]
        string TestReturnInput(string s);
        [OperationContract]
        bool Ping();

        //Child
        [OperationContract]
        int InsertFormChildGettingIdBack(SCChildrenForm scChildForm);
    }
} 
```

## 更新 2：按照建议添加了服务端点

```
</bindings>
        <services>
            <service name="MashPortalService">
                <endpoint address="http://localhost:54070/MashPortalService/InsertNewForm.svc" binding="basicHttpBinding"
                                    bindingConfiguration="BasicHttpBinding_IInsertNewForm" contract="InsertNewForm.IInsertNewForm" />
            </service>
        </services> 
```

但我仍然有同样的错误。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-19T10:30:27.040

感谢所有的建议。不幸的是，这些建议都没有解决这个问题，它似乎仍然从某个地方获得了一个覆盖它的价值。

我已经设法通过使用 customBinding 路线来处理更大的文件。

```
<system.serviceModel>
    <behaviors>
        <serviceBehaviors>
            <behavior name="MashPortalService.MyServiceBehaviour">
                <dataContractSerializer maxItemsInObjectGraph="2147483647"  />
                <serviceTimeouts transactionTimeout="05:05:00" />
                <serviceThrottling maxConcurrentCalls="500" maxConcurrentSessions="500" maxConcurrentInstances="2147483647" />
                <!-- To avoid disclosing metadata information, set the value below to false and remove the metadata endpoint above before deployment -->
                <serviceMetadata httpGetEnabled="true"/>
                <!--<serviceMetadata httpsGetEnabled="true"/>-->
                <!-- To receive exception details in faults for debugging purposes, set the value below to true.  Set to false before deployment to avoid disclosing exception information -->
                <serviceDebug includeExceptionDetailInFaults="true" />
                <!--<StructureMapServiceBehavior />-->
            </behavior>
        </serviceBehaviors>
    </behaviors>
    <serviceHostingEnvironment multipleSiteBindingsEnabled="true" aspNetCompatibilityEnabled="false" />
    <extensions>
        <behaviorExtensions>
        </behaviorExtensions>
    </extensions>
    <bindings>
        <customBinding>
            <binding name="MashCustomBinding"
                    closeTimeout="00:10:00" openTimeout="00:10:00" receiveTimeout="00:10:00" sendTimeout="00:10:00">
                <textMessageEncoding messageVersion="Soap11" maxReadPoolSize="2147483647" maxWritePoolSize="2147483647">
                    <readerQuotas maxArrayLength="2147483647" maxStringContentLength="2147483647" />
                </textMessageEncoding>
                <httpTransport transferMode="Streamed" maxReceivedMessageSize="2147483647"/>
            </binding>
        </customBinding>
    </bindings>
    <services>
        <service behaviorConfiguration="MashPortalService.MyServiceBehaviour" name="MashPortalService.InsertNewForm">
            <endpoint address="" binding="customBinding"
                                bindingConfiguration="MashCustomBinding" contract="MashPortalService.IInsertNewForm" />
        </service>
    </services>
</system.serviceModel> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-19T08:35:15.103

它只是一个使用 wsHttpBinding 的来宾。您可以在 web.config 中编写以下代码

```
<wsHttpBinding>
      <binding name="MyBinding" maxReceivedMessageSize="2147483647" />
</wsHttpBinding> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-18T17:07:21.763

您已经定义了一个“BasicHttpBinding_IInsertNewForm”绑定，但您实际上是否将此绑定连接到您的服务？你在代码中这样做吗？如果是这样，请发布代码。因为我在您的配置中看不到它...通常，您将在 <system.servicemodel> 部分中有一个 <services> 部分，其中绑定实际上连接到您的服务。

# python - 在 Google App Engine 上使用异步 urlfetch 启动后端

> ID：13937556
> 
> 赞同：4
> 
> 时间：2012-12-18T16:42:26.800
> 
> 标签：python, google-app-engine, asynchronous, backend, urlfetch

我正在尝试 GAE 的几个功能。

我已经构建了一个**动态后端，但是在****没有任务队列**的情况下让这个东西工作时遇到了几个问题

 ****后端代码：**

```
class StartHandler(webapp2.RequestHandler):

    def get(self):
    #... do stuff...    

if __name__ == '__main__':
    _handlers = [(r'/_ah/start', StartHandler)]
    run_wsgi_app(webapp2.WSGIApplication(_handlers)) 
```

后端是动态的。因此，每当它接到一个电话时，它就会做它的东西，然后停止。

当我在我的处理程序中使用时，一切都很好：

```
url = backends.get_url('worker') + '/_ah/start'
urlfetch.fetch(url) 
```

但我希望这个调用是**异步**的，因为后端可能需要长达 10 分钟才能完成它的工作。

所以我把上面的代码改成：

```
url = backends.get_url('worker') + '/_ah/start'
rpc = urlfetch.create_rpc()
urlfetch.make_fetch_call(rpc, url) 
```

但是后端没有启动。我对完成请求或从中获取任何数据不感兴趣。

我错过了什么 - 实施错误？

谢谢你们

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-19T17:20:06.817

使用 RPC 进行异步调用而不在 rpc 对象上调用 get_result() 将不会被授权调用 urlfetch。一旦您的代码退出，未完成的挂起异步调用将被中止。

使处理程序异步的唯一方法是将代码放入推送队列中。**

# mysql - MySQL 错误：操作数应包含 1 列

> ID：13937561
> 
> 赞同：0
> 
> 时间：2012-12-18T16:42:40.340
> 
> 标签：mysql, mysql-error-1241

我有这个 MySQL 查询**（工作）**

第一个查询：

```
SELECT id
FROM users
WHERE publisher_set = '1'
AND publisher_status = '1'
AND publisher_content != ''
AND publisher_amount != '0'
AND publisher_now < publisher_max
AND EXISTS (

SELECT *
FROM user_counter
WHERE users.id = user_counter.publisher_id
) 
```

上面的 MySQL 查询是从两个表中查找用户 id

现在我想再次使用第二个 MySQL 查询进行比较**（工作）**

第二个查询：

```
SELECT users.id, publisher_amount, publisher_now, publisher_max, counter
FROM users
INNER JOIN user_counter ON users.id = user_counter.publisher_id
WHERE no = 08123456789
AND counter < publisher_amount 
```

但是当我像这样加入所有查询时：

```
SELECT id
FROM users
WHERE publisher_set = '1'
AND publisher_status = '1'
AND publisher_content != ''
AND publisher_amount != '0'
AND publisher_now < publisher_max
AND EXISTS (

SELECT *
FROM user_counter
WHERE users.id = user_counter.publisher_id
)

AND (
SELECT users.id, publisher_amount, publisher_now, publisher_max, counter
FROM users
INNER JOIN user_counter ON users.id = user_counter.publisher_id
WHERE no =08123456789
AND counter < publisher_amount
) 
```

我收到此错误：

> 操作数应包含 1 列

然后，我尝试使用 1 列，但结果不是我想要的。

我的问题是如何加入第一个和第二个查询？并且不会产生错误。

我已经尝试过用谷歌搜索它，经过多次“尝试和错误”，这是我可以使查询工作的最远距离。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-18T18:02:46.747

我认为您只是在第二个子查询中错过了 EXISTS 。无论如何，如果我正确理解您的查询，我认为您可以这样编写查询：

```
SELECT
  u.id
FROM
  users u inner join user_counter uc
  on u.id=uc.publisher_id
     and no=08123456789
     and counter < publisher_amount
WHERE
  u.publisher_set = '1'
  AND u.publisher_status = '1'
  AND u.publisher_content != ''
  AND u.publisher_amount != '0'
  AND u.publisher_now < publisher_max 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-18T17:03:46.257

您可以将第一个 EXISTS 子句更改为：

```
and users.id in (select user_counter.publisher_id from user_counter) 
```

并在最终查询中使用 EXISTS。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-18T17:19:37.900

你也可以这样做：

```
AND EXISTS (

SELECT user_counter.publisher_id
FROM user_counter
WHERE users.id = user_counter.publisher_id 
```

* * *

PS：由于某种原因，SQLFIDDLE 对我不起作用。否则会很乐意给你演示；）

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-12-18T17:47:29.050

```
SELECT id
FROM users
WHERE publisher_set = '1'
AND publisher_status = '1' 
AND publisher_content != ''
AND publisher_amount != '0'
AND publisher_now < publisher_max
AND EXISTS (
select 1 from  user_counter where  users.id = user_counter.publisher_id
    and  no =08123456789
AND counter < publisher_amount
) 
```

假设`no`和`counter`都在桌子上`user_counter`。没有模式有点难以分辨。

# c++ - 如何为 cocos2dx 窗口设置标题和全屏标志

> ID：13937569
> 
> 赞同：1
> 
> 时间：2012-12-18T16:43:20.297
> 
> 标签：c++, cocos2d-iphone, cocos2d-x, game-development

我已经开始使用 cocos2dx 进行游戏，但我有 2 个至关重要的问题：

1.  如何为窗口设置标题
2.  如何为窗口设置全屏标志

我已经阅读了 CCApplication 和 CCDirector 文件，我也尝试对这些文件进行一些更改，但我的问题还没有解决，如果你能帮助我解决这些问题，我真的很感激

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-21T04:02:45.430

对于设置标题栏，我们可以使用 Windows 句柄来完成

```
HWND _handle= eglView->getHWnd();
SetWindowText(_handle, "Title"); 
```

# javascript - 用另一个对象替换一个 javascript 对象

> ID：13937578
> 
> 赞同：15
> 
> 时间：2012-12-18T16:43:56.080
> 
> 标签：javascript, reset, javascript-objects

在页面加载时，我正在创建两个 Javascript 对象，`objDemo1`而`objDemo1Backup`后者只是第一个的精确副本。

例如

```
objDemo1 { 
    sub_1 = { something: 123, somethingElse: 321 },
    sub_2 = { something: 456, somethingElse: 654 }
} 
```

我可以修改其中的值`sub_`以及添加/删除新`sub_`的，但我正在编辑的唯一对象是`objDemo1`. 即我从不改变`objDemo1Backup`

我有一个重置按钮，单击该按钮将重置`objDemo1`为最初加载页面时的状态（即`objDemo1 = objDemo1Backup`）。这就是我遇到问题的地方..

**我该如何`objDemo1`设置`objDemo1Backup`？**

我试过了：

```
objDemo1 = objDemo1Backup; 
```

和

```
objDemo1 = null;
var objDemo1 = objDemo1Backup; 
```

...以及类似的变化，但似乎没有任何效果。有任何想法吗？

*   注意：我可以确认，在重置时，`objDemo1Backup`它与我创建它时完全一样，并且`objDemo1`已经改变了。
*   我的代码肯定会达到“重置”功能，我已经尝试过`objDemo1 = objDemo1Backup`......我只是无法弄清楚替换对象的语法。

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2014-10-24T16:17:05.897

我正在使用*angularjs*，我花了一些时间来了解如何将一个对象复制到另一个对象。通常，您将通过调用*clone*或在 angular *copy*中获得对象克隆：

```
var targetObj = angular.copy(sourceObj); 
```

这为您提供了源对象的新克隆实例（带有新引用）。但是快速浏览一下文档会发现*copy*的第二个参数：

```
angular.copy(sourceObj, targetObj) 
```

这样，您可以使用源的字段和方法覆盖目标对象，**并**保持目标对象的引用。

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2012-12-18T16:47:43.083

在 JavaScript 中，对象是通过引用传递的，而不是通过值传递的。所以：

```
var objDemo, objDemoBackup;
objDemo = {
    sub_1: "foo";
};
objDemoBackup = objDemo;
objDemo.sub_2 = "bar";
console.log(objDemoBackup.sub_2);   // "bar" 
```

要获得副本，您必须使用复制功能。JavaScript 本身没有，但这里有一个`clone`实现：[如何正确克隆 JavaScript 对象？](https://stackoverflow.com/questions/728360/copying-an-object-in-javascript)

```
var objDemo, objDemoBackup;
objDemo = {
    sub_1: "foo";
};
objDemoBackup = clone(objDemo);
objDemo.sub_2 = "bar";
console.log(objDemoBackup.sub_2);   // undefined 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2019-06-22T19:26:51.863

您可以使用[`Object.assign`](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Object/assign).

```
ObjectConstructor.assign(target: T, source: U): T & U 
```

它占用两个参数：`target`和`source`。当函数完成时，对象的所有内部`target`都将附加`source`一个。

# ios - 如何模仿苹果股票计时器应用的 UIPickerView？

> ID：13937581
> 
> 赞同：1
> 
> 时间：2012-12-18T16:44:05.210
> 
> 标签：ios, uipickerview

我希望我的组件环绕轮子，不允许零值（跨所有组件），并在每个组件中静态显示单位。

基本上是每个 iPhone 上时钟应用程序中计时器的 UPickerView 中分钟组件的功能。

ATM 我想知道是否可以进行环绕，因为我没有运气在网上找到多个组件的示例。

提前致谢。

# entity-framework - Visual Studio 2012 中的实体数据模型父子关系

> ID：13937582
> 
> 赞同：1
> 
> 时间：2012-12-18T16:44:11.617
> 
> 标签：entity-framework

我刚刚升级到 Visual Studio 2012，我创建了一个实体数据模型，我很惊讶这在数据源中没有立即可用，所以我将它添加为一个对象，这是正确的吗？

其次，我做了上述操作，然后将 2 个数据网格（具有父/子关系）拖到我的 WPF 窗口中，网格中没有数据，两个网格（表）之间也没有关系。生成的代码是...

```
System.Windows.Data.CollectionViewSource countPartsEntitiesViewSource = ((System.Windows.Data.CollectionViewSource)(this.FindResource("countPartsEntitiesViewSource")));
            // Load data by setting the CollectionViewSource.Source property:
            // countPartsEntitiesViewSource.Source = [generic data source] 
```

Visual Studio 2010 在表和父子链接中都提供了数据。

我错过了什么吗？

# oracle - 使用 SQL*Loader 时没有 TNS 侦听器

> ID：13937583
> 
> 赞同：0
> 
> 时间：2012-12-18T16:44:12.867
> 
> 标签：oracle, sql-loader

我们使用 SQL*Loader 进行批量加载，并且我们编写了一个 shell 脚本来执行此操作。

当我执行脚本时，我收到此错误：

```
SQL*Plus: Release 11.2.0.1.0 Production 

Copyright (c) 1982, 2009, Oracle.  All rights reserved.

ERROR:
ORA-12514: TNS:listener does not currently know of service requested in connect
descriptor

Enter user-name: SP2-0306: Invalid option.
Usage: CONN[ECT] [{logon|/|proxy} [AS {SYSDBA|SYSOPER|SYSASM}] [edition=value]]
where <logon> ::= <username>[/<password>][@<connect_identifier>]
      <proxy> ::= <proxyuser>[<username>][/<password>][@<connect_identifier>]
Enter user-name: ERROR:
ORA-01017: invalid username/password; logon denied

SP2-0157: unable to CONNECT to ORACLE after 3 attempts, exiting SQL*Plus 
```

我可以使用 SQL Developer 登录到数据库。所以用户和密码的组合不成问题。

出了什么问题？

# windows - Windows 客户端在共享文件系统上看不到时间戳更新

> ID：13937584
> 
> 赞同：1
> 
> 时间：2012-12-18T16:44:19.433
> 
> 标签：windows, timestamp, fileserver

我在具有 Windows 文件服务器和许多安装该共享资源的客户端的环境中工作。在某些客户端（并非全部）上，它们似乎无法看到服务器上正在更新的文件。例如，时间戳不会改变，或者新文件不会出现。

客户端时间同步到文件服务器，所以它似乎与时间/日期同步无关。

有任何想法吗？我是一个 unix/linux 人，所以我有点难过。到目前为止，谷歌搜索还没有透露任何相关信息。

另一个可能相关的细节。我也将此文件系统安装在 linux 系统上。这些文件实际上是从 linux 端创建/更新的。但话又说回来，一些客户似乎很好。

# css - 谷歌网络字体抗锯齿问题

> ID：13937585
> 
> 赞同：1
> 
> 时间：2012-12-18T16:44:19.377
> 
> 标签：css, fonts, google-webfonts

我正在尝试使用 Google Web Fonts 中的 Antic 字体。这是一个漂亮的字体，我的整个网站都是围绕它设计的。

我开始为我的网站编写代码，但我遇到了 Antic 这个恼人的抗锯齿问题。

我在CSS中尝试了一切......

```
font-smooth: always;

transform: rotate(-0.0000000001deg)

-webkit-font-smoothing: subpixel-antialiased;

text-shadow: 0 0 1px rgba(0,0,0,0.3); <- barely works 
```

非常感谢您的帮助。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-09-30T17:11:03.383

[如何在 CSS 中应用字体抗锯齿效果？](https://stackoverflow.com/questions/17864742/how-to-apply-font-anti-alias-effects-in-css/17886204#17886204)

```
 -webkit-text-shadow: rgba(0,0,0,.01) 0 0 1px;

    -webkit-font-smoothing: antialiased; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-09-30T16:44:50.410

我知道这已经很老了，此时您已经通过了，但是对于其他任何来搜索的人...

如果问题只是 webkit，那么您的 -webkit 前缀可能会有一些运气，但我通常不使用子像素。喜欢`-webkit-font-smoothing: antialiased;`

当涉及到 IE 和其他非 webkit 浏览器的问题时，这将无济于事。对于那些，尝试使用 svg 作为第一个选项重新排序您的网络字体。或者您可以尝试完全省略它。这通常可以解决我遇到的任何问题，如果您可以摆脱它，请尝试摆脱 iefix，否则会导致 ie10 出现问题。如果您坚持支持较旧的ie，您也无法尝试将其移到列表中。

# php - 关于 ZVals 的说明

> ID：13937588
> 
> 赞同：4
> 
> 时间：2012-12-18T16:44:24.707
> 
> 标签：php

我在读这个： http: [//www.dereleased.com/2011/04/27/the-importance-of-zvals-and-circular-references/](http://www.dereleased.com/2011/04/27/the-importance-of-zvals-and-circular-references/)

还有一个例子让我有点失落。

```
$foo = &$bar;
$bar = &$foo;
$baz = 'baz';

$foo = &$baz;

var_dump($foo, $bar);
/*
string(3) "baz"
NULL
*/ 
```

> 如果您一直在关注，这应该很有意义。$foo 被创建，并指向一个由 $bar 标识的 ZVal 位置；创建 $bar 时，它指向 $foo 所指向的同一位置。当然，那个位置是空的。当 $foo 被重新分配时，唯一改变的是 ZVal $foo 指向哪个；如果我们首先为 $foo 分配了一个不同的值，那么 $bar 仍将保留该值。

我学会了用 C 编程。我知道 PHP 是不同的，它使用 ZVals 而不是内存位置作为引用。但是当你运行这段代码时：

```
$foo = &$bar;
$bar = &$foo; 
```

在我看来，会有两个 ZVals。在 C 中会有两个内存位置（并且值将位于相反的内存位置）。

有人可以解释吗？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-12-18T17:01:53.310

它主要归结为*符号表*的工作方式。这是一张有两个面的桌子：

```
symbol name  |  value
-------------+-------
             | 
```

有趣的是，一个值可以分配多个名称：

```
symbol name  |  value
-------------+-------
foo, bar     | 'baz' 
```

使用 分配给符号时`=`，表格的`value`一侧会更改：

```
$baz = 42;

symbol name  |  value
-------------+-------
baz          | 42 
```

分配 using 时`=&`，将`symbol name`边移动到值所在的任何位置：

```
$foo =& $baz;

symbol name  |  value
-------------+-------
baz, foo     | 42 
```

因此，在您的示例中，从头开始：

```
$foo =& $bar;
($bar does not exist, is null, which is implicitly created,
 $foo is pointed to where the implicitly created $bar points)

symbol name  |  value
-------------+-------
foo, bar     | null

$bar = &$foo;
(no real change, $bar is pointed to where $foo is pointing)

symbol name  |  value
-------------+-------
foo, bar     | null

$baz = 'baz';

symbol name  |  value
-------------+-------
foo, bar     | null
baz          | 'baz'

$foo = &$baz;
($foo is pointed to where $baz is pointing)

symbol name  |  value
-------------+-------
bar          | null
baz, foo     | 'baz' 
```

# c# - 无法访问主页内的用户控件属性

> ID：13937591
> 
> 赞同：1
> 
> 时间：2012-12-18T16:44:27.127
> 
> 标签：c#, asp.net

我有一个用户控件

```
public partial class ConLib_Custom_ClickAndCollect : System.Web.UI.UserControl
{
    public string Address
    {
        get
        {
            if (ccTextBox.Text != String.Empty)
                return ccTextBox.Text.ToString();
            else
                return "United Kingdom";
        }
    }

    private Address _clickCollectAddress;
    public Address ClickCollectAddress
    {
        get
        {
            return _clickCollectAddress;
        }
        set
        {
            _clickCollectAddress = value;
        }
    }
} 
```

当我尝试在像这样的另一个 .ascx 页面中使用此控件时。

```
<uc:ClickAndCollect ID="ClickAndCollectPanel" runat="server" Visible="false"
    EnableViewState="true" /> 
```

在后面的代码中，我只能看到 Address 属性而不是 ClickCollectAddress 属性。

```
ClickAndCollectPanel.Address // and can not see this ClickAndCollectPanel.ClickCollectAddress 
```

我不知道是什么问题。

请帮忙。谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-18T17:06:09.330

是因为冲突。你有一个`type`和一个`property`都在同一个类中命名`Addres`。重命名其中一个，然后应该解决。

# python - Django - 带有soaplib xml字符或＆符号的WebService？

> ID：13937592
> 
> 赞同：5
> 
> 时间：2012-12-18T16:44:28.123
> 
> 标签：python, django, suds, soaplib

好吧，这是我的第一个问题，所以我会尽力做到最好。

我正在尝试使用 Soaplib 2.0 在 Python 2.6 和 Django 1.4 中实现 WebService 服务器。

Webservice 正在运行，并且 Django 在 Django 开发服务器中正常运行。

这是 Django 视图和 URL 的代码：

**视图.py**

```
from soaplib.core.service import rpc, DefinitionBase, soap
from soaplib.core.model.primitive import String, Integer, Boolean
from soaplib.core.model.clazz import Array
from soaplib.core import Application
from soaplib.core.server.wsgi import Application as WSGIApplication
from django.http import HttpResponse

class HelloWorldService(DefinitionBase):
    @soap(String,Integer,_returns=Array(String))
    def say_smello(self,name,times):
        results = []
        for i in range(0,times):
            results.append('Hello, %s'%name)
        return results
    @soap(String,_returns=Boolean)
    def xml(self,xml):
        result = xml
        return True
    @soap(String,_returns=String)
    def xml2(self,xml2):
        return xml2

class DjangoSoapApp(WSGIApplication):
    csrf_exempt = True

    def __init__(self, services, tns):
        """Create Django view for given SOAP soaplib services and
tns"""

        return super(DjangoSoapApp,
            self).__init__(Application(services, tns))

    def __call__(self, request):
        django_response = HttpResponse()

        def start_response(status, headers):
            django_response.status_code = int(status.split(' ', 1)[0])
            for header, value in headers:
                django_response[header] = value

        response = super(DjangoSoapApp, self).__call__(request.META,
            start_response)
        django_response.content = '\n'.join(response)

        return django_response

my_soap_service = DjangoSoapApp([HelloWorldService], __name__) 
```

**网址.py**

```
url(r'^soap/wsdl$', 'soap.views.my_soap_service'),
url(r'^soap/$', 'soap.views.my_soap_service'), 
```

问题是，我想将 XML 传递给 WebService 方法 xml 或 xml2，然后使用 XML 中的信息进行处理。我得到错误。

如果我传递一个没有像“&”这样的字符的简单字符串 一切正常，例如：

首先让我们导入 suds 并将 suds 设置为 Debug：

```
from suds.client import Client
import logging
logging.basicConfig(level=logging.INFO)
logging.getLogger('suds.client').setLevel(logging.DEBUG) 
```

现在让我们开始调用 de WS：

```
WSDL = "http://server.test/soap/wsdl"
client = Client(WSDL)
client.service.xml('x and y') 
```

工作完美，我得到“真”，SUDS 的日志显示我正在这样做：

```
DEBUG:suds.client:sending to (http://server.test/soap/wsdl)
message:
<?xml version="1.0" encoding="UTF-8"?>
<SOAP-ENV:Envelope xmlns:ns0="soap.views" xmlns:ns1="http://schemas.xmlsoap.org/soap/envelope/" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xmlns:SOAP-ENV="http://schemas.xmlsoap.org/soap/envelope/">
   <SOAP-ENV:Header/>
   <ns1:Body>
      <ns0:xml>
         <ns0:xml>x and y</ns0:xml>
      </ns0:xml>
   </ns1:Body>
</SOAP-ENV:Envelope>
DEBUG:suds.client:headers = {'SOAPAction': '"xml"', 'Content-Type': 'text/xml; charset=utf-8'}
DEBUG:suds.client:http succeeded:
<?xml version='1.0' encoding='utf-8'?>
<senv:Envelope xmlns:wsa="http://schemas.xmlsoap.org/ws/2003/03/addressing" xmlns:plink="http://schemas.xmlsoap.org/ws/2003/05/partner-link/" xmlns:xop="http://www.w3.org/2004/08/xop/include" xmlns:senc="http://schemas.xmlsoap.org/soap/encoding/" xmlns:s0="soap.views" xmlns:s12env="http://www.w3.org/2003/05/soap-envelope/" xmlns:s12enc="http://www.w3.org/2003/05/soap-encoding/" xmlns:xs="http://www.w3.org/2001/XMLSchema" xmlns:wsdl="http://schemas.xmlsoap.org/wsdl/" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xmlns:senv="http://schemas.xmlsoap.org/soap/envelope/"  xmlns:soap="http://schemas.xmlsoap.org/wsdl/soap/"><senv:Body><s0:xmlResponse><s0:xml    Result>true</s0:xmlResult></s0:xmlResponse></senv:Body></senv:Envelope>
True 
```

但如果我这样做：

```
client.service.xml('x &  y') 
```

不起作用，它以 suds 超时结束，服务器报告管道损坏，这就是 suds 日志告诉我正在推送的内容：

```
DEBUG:suds.client:sending to (http://server.test/soap/wsdl)
message:
<?xml version="1.0" encoding="UTF-8"?>
<SOAP-ENV:Envelope xmlns:ns0="soap.views" xmlns:ns1="http://schemas.xmlsoap.org/soap/envelope/" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xmlns:SOAP-ENV="http://schemas.xmlsoap.org/soap/envelope/">
   <SOAP-ENV:Header/>
   <ns1:Body>
      <ns0:xml>
         <ns0:xml>x &amp;  y</ns0:xml>
      </ns0:xml>
   </ns1:Body>
</SOAP-ENV:Envelope>
DEBUG:suds.client:headers = {'SOAPAction': '"xml"', 'Content-Type': 'text/xml; charset=utf-8'} 
```

这是关于 suds 的错误：

```
Traceback (most recent call last):
  File "<stdin>", line 1, in <module>
  File "/usr/lib/python2.6/site-packages/suds/client.py", line 542, in __call__
    return client.invoke(args, kwargs)
  File "/usr/lib/python2.6/site-packages/suds/client.py", line 602, in invoke
    result = self.send(soapenv)
  File "/usr/lib/python2.6/site-packages/suds/client.py", line 643, in send
    reply = transport.send(request)
  File "/usr/lib/python2.6/site-packages/suds/transport/https.py", line 64, in send
    return  HttpTransport.send(self, request)
  File "/usr/lib/python2.6/site-packages/suds/transport/http.py", line 77, in send
    fp = self.u2open(u2request)
  File "/usr/lib/python2.6/site-packages/suds/transport/http.py", line 118, in u2open
    return url.open(u2request, timeout=tm)
  File "/usr/lib/python2.6/urllib2.py", line 391, in open
    response = self._open(req, data)
  File "/usr/lib/python2.6/urllib2.py", line 409, in _open
    '_open', req)
  File "/usr/lib/python2.6/urllib2.py", line 369, in _call_chain
    result = func(*args)
  File "/usr/lib/python2.6/urllib2.py", line 1190, in http_open
    return self.do_open(httplib.HTTPConnection, req)
  File "/usr/lib/python2.6/urllib2.py", line 1165, in do_open
    raise URLError(err)
urllib2.URLError: <urlopen error timed out> 
```

感谢这个链接： http: [//grokbase.com/p/python/soap/125nhj9bdm/python-suds-xml-encoding-issue](http://grokbase.com/p/python/soap/125nhj9bdm/python-suds-xml-encoding-issue)我发现是的，如果我发布 WebService 类似：

```
client.service.xml("x &amp;amp; y") 
```

我没看错：

```
DEBUG:suds.client:sending to (http://server.test/soap/wsdl)
message:
<?xml version="1.0" encoding="UTF-8"?>
<SOAP-ENV:Envelope xmlns:ns0="soap.views" xmlns:ns1="http://schemas.xmlsoap.org/soap/envelope/" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xmlns:SOAP-ENV="http://schemas.xmlsoap.org/soap/envelope/">
   <SOAP-ENV:Header/>
   <ns1:Body>
      <ns0:xml>
         <ns0:xml>x &amp;amp; y</ns0:xml>
      </ns0:xml>
   </ns1:Body>
</SOAP-ENV:Envelope>
DEBUG:suds.client:headers = {'SOAPAction': '"xml"', 'Content-Type': 'text/xml; charset=utf-8'}
True 
```

如果我使用 xml2 方法，那么我可以看到返回 WebService 的内容是这样的：

```
client.service.xml2("x &amp;amp; y") 
```

以及 Suds 的日志：

```
DEBUG:suds.client:sending to (http://server.test/soap/wsdl)
message:
<?xml version="1.0" encoding="UTF-8"?>
<SOAP-ENV:Envelope xmlns:ns0="soap.views" xmlns:ns1="http://schemas.xmlsoap.org/soap/envelope/" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xmlns:SOAP-ENV="http://schemas.xmlsoap.org/soap/envelope/">
   <SOAP-ENV:Header/>
   <ns1:Body>
      <ns0:xml2>
         <ns0:xml2>x &amp;amp; y</ns0:xml2>
      </ns0:xml2>
   </ns1:Body>
</SOAP-ENV:Envelope>
DEBUG:suds.client:headers = {'SOAPAction': '"xml2"', 'Content-Type': 'text/xml; charset=utf-8'}

DEBUG:suds.client:http succeeded:
<?xml version='1.0' encoding='utf-8'?>
<senv:Envelope xmlns:wsa="http://schemas.xmlsoap.org/ws/2003/03/addressing" xmlns:plink="http://schemas.xmlsoap.org/ws/2003/05/partner-link/" xmlns:xop="http://www.w3.org/2004/08/xop/include" xmlns:senc="http://schemas.xmlsoap.org/soap/encoding/" xmlns:s0="soap.views" xmlns:s12env="http://www.w3.org/2003/05/soap-envelope/" xmlns:s12enc="http://www.w3.org/2003/05/soap-encoding/" xmlns:xs="http://www.w3.org/2001/XMLSchema" xmlns:wsdl="http://schemas.xmlsoap.org/wsdl/" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xmlns:senv="http://schemas.xmlsoap.org/soap/envelope/" xmlns:soap="http://schemas.xmlsoap.org/wsdl/soap/"><senv:Body><s0:xml2Response><s0:xml2Result>x &amp; y</s0:xml2Result></s0:xml2Response></senv:Body></senv:Envelope>
x & y 
```

但我不认为问题出在 SUDS，因为我使用这个版本的 suds 将 XML 推送到 java WebServices，但是我没有找到这个soaplib 的方法。

有任何想法吗？这让我有点疯狂xD

我的最终目标是拥有带有 Soaplib 的 Web 服务，并从 Java 中的肥皂客户端向其推送 XML。

谢谢

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-12-20T12:04:36.680

好的，解决了:D

我只能更改服务器端，所以我将代码迁移到 spyne 并像 Charm 一样工作。

[https://github.com/arskom/spyne](https://github.com/arskom/spyne)

我在他们的网站上找到了这个：

```
 Soaplib-2.0 was never released as a stable package, but the branch is still available 
```

他们从soaplib 到Rpclib，从那里到Spyne。

确实，我发现了一个新错误，这次是在 suds 上，但我只是用于测试的 suds，但如果我使用其他客户端，SoapUI 或 Java 客户端，效果很好。

使用 PIP 安装后，这是 Django 代码：

**网址.py**

```
url(r'^testws/\?wsdl$', 'testmo.views.ws_test'),
url(r'^testws/$', 'testmo.views.ws_test'), 
```

**视图.py**

```
from django.views.decorators.csrf import csrf_exempt
from spyne.server.django import DjangoApplication
from spyne.model.primitive import String
from spyne.service import ServiceBase
from spyne.interface.wsdl import Wsdl11
from spyne.protocol.soap import Soap11
from spyne.application import Application
from spyne.decorator import srpc

class ServiceWsTest(ServiceBase):
    @srpc(String, _returns=String)
    def testMethod(string):
        return string

ws_test = csrf_exempt(DjangoApplication(Application([ServiceWsTest],
    'http://example.com',
    in_protocol=Soap11(),
    out_protocol=Soap11(),
    interface=Wsdl11(),
))) 
```

从现在开始，我将继续使用这个库

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-18T17:30:40.090

也许您可以将它不转义地包装在 cdata 标记中。更多信息请访问[http://en.wikipedia.org/wiki/CDATA](http://en.wikipedia.org/wiki/CDATA)

```
<![CDATA[
x & y
]]> 
```

# ios - UIGestureRecognizerDelegate 来管理手势——我可以解除触摸吗？

> ID：13937597
> 
> 赞同：0
> 
> 时间：2012-12-18T16:44:42.163
> 
> 标签：ios, uigesturerecognizer, gesture, pan

我正在开发一个应用程序，其中大多数触摸手势都是平移手势（但我没有使用平移手势识别器）。我正在使用`UIGestureRecognizerDelegate`和使用`touchesBegan`, `touchesMoved`,`touchesEnded`和`touchesCancelled`. 但是，屏幕上有几个位置，如果平移从那里开始，我想将其识别为点击事件。我可以通过简单地识别 touchesBegan 中的位置来做到这一点。我的问题是，我可以在那时解除触摸以防止锅的继续吗？如果平底锅从屏幕中的这个位置开始，则可以保证它不是用户真正想要的平底锅。我希望这是有道理的。

编辑：我已经意识到，即使对于一个应该被忽略的点，管理水龙头的额外开销也是微不足道的，所以我想我会这样做。不过，我会在这里保留这个问题，以防有办法阻止手势继续被跟踪。

我还需要关于如何处理以下情况的建议。

假设用户启动了一个平底锅（不是在刚刚描述的区域，而是在它真正打算成为平底锅的地方），并且当平底锅进行时，另一个平底锅在屏幕上的其他地方启动。我如何识别这种情况？

编辑：我现在正在测试这段代码是否能解决这个问题：

```
- (BOOL)gestureRecognizer:(UIGestureRecognizer *)gestureRecognizer shouldRecognizeSimultaneouslyWithGestureRecognizer:(UIGestureRecognizer *)otherGestureRecognizer {
   return YES;
} 
```

编辑：ARC 禁止显式释放，所以现在我将我的问题修改为更一般的问题，如果有的话，我可以做些什么来抑制进一步的行动。还是我只需要处理它？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-18T17:55:58.617

你想要 UIGestureRecognizerDelegate 方法[gestureRecognizer:shouldReceiveTouch:](https://developer.apple.com/library/ios/#documentation/UIKit/Reference/UIGestureRecognizerDelegate_Protocol/Reference/Reference.html#//apple_ref/occ/intfm/UIGestureRecognizerDelegate/gestureRecognizer%3ashouldReceiveTouch%3a)。至于识别第二个平移何时开始而一个已经在进行中，您可以尝试在手势识别器开始识别触摸时设置的状态变量。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-18T17:25:09.900

我不确定我是否完全理解您的问题，但也许这会有所帮助：

第一：使用 ARC，你不应该尝试释放任何东西，但你可以禁用手势。例如，如果您已将手势命名为 panGesture，您可以这样做：

```
panGesture.enabled = NO; 
```

与其尝试分配和解除分配，不如启用和禁用。

第二：您可以跟踪平移手势的动作。在您的 IBAction 方法中，您可以捕获第一次触摸的坐标，然后根据手势开始的位置决定是否要将其运动计为平移或触摸。

有关 Pan Gestures 的更多信息，我建议你看这里：

[iOS 5 中的 UIGestureRecognizer 教程：捏、平底锅等！](http://www.raywenderlich.com/6567/uigesturerecognizer-tutorial-in-ios-5-pinches-pans-and-more)

当然，在这里：

[iOS 事件处理指南：手势识别器](http://developer.apple.com/library/ios/#documentation/EventHandling/Conceptual/EventHandlingiPhoneOS/GestureRecognizers/GestureRecognizers.html)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-18T17:31:05.970

不，你不能解除分配它，无论如何这都行不通

* * *

因为你使用 GestureRecognizer 你可以取消它

```
@interface UIGestureRecognizer (Cancel)
- (void)cancel;
@end

@implementation UIGestureRecognizer (Cancel)
- (void)cancel
{
    self.enabled = NO;
    self.enabled = YES;
}
@end 
```

或者

你必须取消触摸......但到目前为止，只有私人 api 可以做到这一点。你最好的选择是为你的班级设置一个布尔值，比如 _isCanceled

在 touchesBegan 中将其重置为 NO 并在您想要结束触摸处理时将其设置为 YES

或者

您可以将要取消的触摸保存在您存储在课堂上的 NSSET 中并忽略这些触摸

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-12-22T03:55:16.047

这是我最终使用的解决方案。

为了识别点击，我只需比较触摸对象的坐标，如果坐标相同或移动不明显，则将`touchesBegan`其`touchesEnded`视为点击。我忽略`touchesMoved`了，因为触摸开始和结束大约在同一个地方，但在我的应用程序中不太可能发生在两者之间移动的情况。

为了在第一个平移开始后识别第二个平移，我跟踪触摸对象。在这种情况下，第一个和第二个平移获得两个不同的触摸对象。我最初是在跟踪坐标并遵循将 currentLocation 与 previousLocation 匹配的菊花链，但这不起作用，因为由于某种原因，第二次触摸的行为与第一次不同。无论如何，跟踪触摸对象很简单。就代码而言，它不“知道”第二个触摸对象是否与第一个触摸对象同时发生。

# c++ - 左移错误

> ID：13937598
> 
> 赞同：3
> 
> 时间：2012-12-18T16:44:42.133
> 
> 标签：c++, c

我的系统上有一个`unsigned long long`8 字节的变量，我正在尝试执行以下操作：

```
unsigned long long ull;
ull = timeLow;
ull |= timeHigh << 32; 
```

执行此操作时，我收到警告：左移计数> = 类型宽度。此外，它似乎没有考虑到 timeHigh 转移。我该如何解决这个问题？

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-12-18T16:46:39.283

您不是在转移`ull`，而是在转移`timeHigh`，然后将转移的结果存储在`ull`.

我怀疑这`timeHigh`不足以存储 32 位移位的结果。做`timeHigh`一个`unsigned long long`, (**编辑**) 或者只是分配`timeHigh`给`ull` 然后在`or`'ing in之前转移它`timeLow`。（信用@JasonD）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-18T16:49:41.743

timeHigh 似乎是 32 位类型。左移 32 位后全为零。您必须在移位之前将 timeHigh 转换为 long long 类型。

```
unsigned long long ull;
ull = timeHigh;
ull = ull << 32;
ull |= timeLow; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-18T16:50:29.293

这是你的意思吗？

```
unsigned long long timeLow = /* value */;
unsigned long long timeHigh = /* value */;
unsigned long long ull;
ull = (timeHigh << 32 | timeLow) 
```

# jquery - Tab 进入隐藏元素中的输入

> ID：13937599
> 
> 赞同：3
> 
> 时间：2012-12-18T16:44:48.717
> 
> 标签：jquery, input

我正在研究一种场景，在该场景中，用户将在隐藏元素中输入一个选项卡。当该输入集中时，我希望它的父元素，隐藏元素，使用 jQuery 显示。到目前为止，我似乎无法让它发挥作用。

这是我的 HTML 的样子：

```
<div class="select">
<input tabindex="1" type="text" name="search" class="address" id="address-1" placeholder="Tab to the next input.">
<div class="dropdown">
    <div class="dropdown-search">
        <input tabindex="2" type="text" name="search" class="search" id="dropdown-search-1" placeholder="Type to search...">
    </div>            
</div> 
```

​</p>

和 jQuery：

```
$('.select').each(function() {
    var dropdown = $('.dropdown', this),
        search = $('.search', this);

    search.focus(function() {
        dropdown.show();
    });
});​ 
```

我也把我的代码放在这里：http: [//jsfiddle.net/ae26u/1/](http://jsfiddle.net/ae26u/1/)

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-12-18T16:54:48.777

解决这个问题的一个技巧是将元素隐藏在屏幕之外，而不是从 DOM 中真正隐藏。

如果它隐藏在屏幕外，它仍然是“绘制”的，因此您可以使用标签进入它，然后在标签上将其移回屏幕。

jQuery：

```
$('.select').each(function() {
    var dropdown = $('.dropdown', this),
        search = $('.address', this);

    dropdown.focus(function() {
        console.log('show');
        dropdown.css( "left", "0px" )
    });
});​ 
```

html:

```
<div class="select">
    <input tabindex="1" type="text" name="search" class="address" id="address-1" placeholder="Tab to the next input."><br />
    <input tabindex="2" type="text" name="search" class="dropdown" id="dropdown-search-1" placeholder="Type to search...">
</div> 
```

jsFiddle 示例：http: [//jsfiddle.net/ae26u/7/](http://jsfiddle.net/ae26u/7/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-18T16:55:07.150

您无法使用 tab 键聚焦隐藏元素。但是您可以使用 javascript 来触发它。

例子 ：

```
$('.select .address').keydown(function(event) {
    // 9 == tab key code
    if (event.keyCode == 9) { 
        // Find the dropdown ...
        var dropdown = $(this).parent().find('.dropdown');

        // ... and show it
        dropdown.show();

        // Focus the input in the dropdown
        dropdown.find('.search').focus();

        return false;
    }
}) 
```

使用此代码，当您在可见输入上点击选项卡时，我们会显示隐藏的输入并将其聚焦。

# python - 用另一个数组索引 Numpy 数组的有效方法

> ID：13937600
> 
> 赞同：1
> 
> 时间：2012-12-18T16:44:47.907
> 
> 标签：python, numpy

给定一个 Numpy 数组`x`和一个整数数组`y`，我想做一些相当于：

```
z = np.array(x[i] for i in y) 
```

是否有一个 Numpy 函数/方法可以有效地执行此操作而无需转换回列表？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-18T16:47:54.757

如果`y`包含对 有效的索引`x`，则：

```
z = x[y]

>>> import numpy as np
>>> x = np.arange(100)
>>> y = np.array([1, 27, 36, 98])
>>> x[y]
array([ 1, 27, 36, 98]) 
```

# c# - 批量打印 HTML 问题假脱机文件

> ID：13937612
> 
> 赞同：0
> 
> 时间：2012-12-18T16:45:29.237
> 
> 标签：c#, shdocvw

我正在尝试将 HTML 报告批量打印到我的默认打印机，这是用于自动保存的 PDF Creator 设置。我通过 Internet Explorer 加载了 HTML 文件，然后我将在没有用户提示的情况下打印。

我遇到的问题是，当我的程序循环打印 HTML 文件列表时，它发现某些文档没有假脱机并且没有被打印。我确实在网上读到，这可以通过使用 while 循环和 Application.Dowork() 来解决。当我偶尔执行此操作时，我的所有文档都会打印，这是一个改进，但这只是偶尔而不是确定的修复。

我的问题可能是每个线程在完成处理之前就关闭了吗？

如果是这样，我怎样才能让线程独立运行，以便它们在仍在处理时不会关闭？

下面是我用来将文档打印到默认打印机的代码：

```
foreach (var x in fileList)
                {

                    // Printing files through IE on default printer.
                    Console.WriteLine("{0}", x);
                    SHDocVw.InternetExplorer IE = new SHDocVw.InternetExplorer();
                    IE.DocumentComplete += new SHDocVw.DWebBrowserEvents2_DocumentCompleteEventHandler(IE_DocumentComplete);
                    IE.PrintTemplateTeardown += new SHDocVw.DWebBrowserEvents2_PrintTemplateTeardownEventHandler(IE_PrintTemplateTeardown);
                    IE.Visible = true;
                    IE.Navigate2(x);
                    while (IE.ReadyState != SHDocVw.tagREADYSTATE.READYSTATE_COMPLETE)
                    {
                        System.Windows.Forms.Application.DoEvents();
                    }

                }
            }
        }
    }

    static void IE_PrintTemplateTeardown(object pDisp)
    {
        if (pDisp is SHDocVw.InternetExplorer)
        {
            SHDocVw.InternetExplorer IE = (SHDocVw.InternetExplorer)pDisp;
            IE.Quit();
            System.Environment.Exit(0);
        }
    }

    static void IE_DocumentComplete(object pDisp, ref object URL)
    {
        if (pDisp is SHDocVw.InternetExplorer)
        {
            SHDocVw.InternetExplorer IE = (SHDocVw.InternetExplorer)pDisp;
             IE.ExecWB(SHDocVw.OLECMDID.OLECMDID_PRINT, SHDocVw.OLECMDEXECOPT.OLECMDEXECOPT_DONTPROMPTUSER, 2);
        }
    } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-19T14:36:13.017

您如何看待以下方法？我在用修饰符修饰的表单方法`System.Windows.Forms.WebBrowser`内使用控件发出请求。在该方法中，我使用推迟到以下链接的导航，直到打印文件列表包含当前浏览的文件。`Form_Load``async``await`

```
namespace WindowsFormsApplication7
{
    public partial class Form1 : Form
    {
        List<string> fileList;
        List<string> printedFileList;
        public Form1()
        {
            InitializeComponent();

            fileList = new List<string>();
            printedFileList = new List<string>(); ;

            fileList.Add("http://www.google.de/");
            fileList.Add("http://www.yahoo.de/");

            webBrowser1.DocumentCompleted += webBrowser1_DocumentCompleted;
        }

        void webBrowser1_DocumentCompleted(object sender, WebBrowserDocumentCompletedEventArgs e)
        {
            if (!printedFileList.Contains(webBrowser1.Url.AbsoluteUri))
                webBrowser1.Print();
            printedFileList.Add(webBrowser1.Url.AbsoluteUri);
        }

        private async void Form1_Load(object sender, EventArgs e)
        {
            foreach (string link in fileList)
            {
                webBrowser1.Navigate(link);
                await Printed(link);
            }
        }

        private Task Printed(string link)
        {
            return Task.Factory.StartNew(() =>
            {
                while (!printedFileList.Contains(link))
                { }
            });
        }
    }
} 
```

# android - Android：在自己的 onClick 中禁用 onClickListener？

> ID：13937614
> 
> 赞同：2
> 
> 时间：2012-12-18T16:45:32.053
> 
> 标签：android, onclicklistener

在 Android（针对 API 14-16）中，我有一`onClickListener`组`TextView`如下：

```
theView.setOnClickListener(new View.OnClickListener() {
    @Override
    public void onClick(View v) {
        // actions
    }
}); 
```

单击的后果之一应该是禁用进一步的单击。我已经尝试`v.setOnClickListener(null);`在“动作”中加入，但它没有达到所需的效果。我应该为此做些什么？

* * *

**编辑**：@Raghav Sood 建议禁用 TextView。在这种情况下，我有一个大的 TextViews 网格，其中只有一个被单击；我想禁用所有这些。我想我必须用循环禁用所有；那是对的吗？或者是否有一个命令可以禁用它们所在的整个布局？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-12-18T16:46:16.970

不要禁用 onClickListener，禁用 TextView：

```
TextView.setEnabled(false); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2015-04-15T17:00:42.013

我知道这是旧的，但仍然......

```
theView.setOnClickListener(new View.OnClickListener() {
     @Override
     public void onClick(View v) {
         v.setClickable(false);
                 v.setClickable(false);
                // actions
         }
}); 
```

# ruby-on-rails - Ruby：多维 %w 数组？

> ID：13937616
> 
> 赞同：3
> 
> 时间：2012-12-18T16:45:39.410
> 
> 标签：ruby-on-rails, arrays, string, multidimensional-array

可以使用单个`%w`指令定义多维数组吗？

例如：

```
the_array = %w(one two three{some separator}four five{some separator}six seven eight nine) 
```

我需要这个来构建一个连续可变数量的数组：

```
the_array = [
    ['one', 'two', 'three'],
    ['four', 'five'],
    ['six', 'seven', 'eight', 'nine']
] 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-18T16:58:14.437

您可以做相反的事情，在标准数组括号中使用简写单词数组表示法。

```
the_array = [%w(one two three), %w(four five), %w(six seven eight nine)] 
```

速记单词符号的目标是保存逗号和引号中的所有标点符号。

# java - 无法在android的类中传递变量值

> ID：13937617
> 
> 赞同：0
> 
> 时间：2012-12-18T16:45:39.137
> 
> 标签：java, android, class, android-activity

## 主要课程

```
public class Main extends Activity {
    Button login;
    TextView sett;

    @Override

    protected void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.main);
        TextView sett = (TextView) findViewById(R.id.textView1);
        Button login = (Button) findViewById(R.id.login);

        login.setOnClickListener(new OnClickListener(){

            @Override
            public void onClick(View arg0) {
                // TODO Auto-generated method stub
                Intent i = new Intent(
                           Main.this,
                           Authenticate.class);
                    startActivity(i);
            }
// remaining code....... 
```

## 认证类（被调用类）

```
public class Authenticate extends Activity {
Main Instance = new Main();

@Override
protected void onCreate(Bundle savedInstanceState) {
    // TODO Auto-generated method stub
    super.onCreate(savedInstanceState);
    setContentView(R.layout.authenticate);  

    new Thread(new Runnable() {
        public void run() {             
       Instance.sett.setText("activity started, thread started, success!!");

    }
        }).start();

    } 
```

上面的代码出现空指针异常错误。如果在 authentication 类中定义了 textview 变量，则代码运行成功，

## 日志猫

```
 12-18 16:49:15.219: D/dalvikvm(2747): GC_CONCURRENT freed 1901K, 41% free 2990K/5032K,       paused 8ms+95ms, total 181ms
   12-18 16:49:15.330: W/Trace(2747): Unexpected value from nativeGetEnabledTags: 0
   12-18 16:49:15.330: W/dalvikvm(2747): threadid=11: thread exiting with uncaught exception (group=0x40a70930)
    12-18 16:49:15.339: E/AndroidRuntime(2747): FATAL EXCEPTION: Thread-198
    12-18 16:49:15.339: E/AndroidRuntime(2747): java.lang.NullPointerException
    12-18 16:49:15.339: E/AndroidRuntime(2747):     at com.example.myproject.Authenticate$1.run(Authenticate.java:21)
   12-18 16:49:15.339: E/AndroidRuntime(2747):  at java.lang.Thread.run(Thread.java:856)
    12-18 16:49:15.359: W/Trace(2747): Unexpected value from nativeGetEnabledTags: 0
     12-18 16:49:15.359: W/Trace(2747): Unexpected value from nativeGetEnabledTags: 0
     12-18 16:49:15.379: W/Trace(2747): Unexpected value from nativeGetEnabledTags: 0
    12-18 16:49:15.379: W/Trace(2747): Unexpected value from nativeGetEnabledTags: 0
   12-18 16:49:15.419: W/Trace(2747): Unexpected value from nativeGetEnabledTags: 0 
```

* * *

还尝试了静态 TextView 设置；在主类和 Main.sett.setText("活动开始，线程开始，成功！！"); 在验证类文件中仍然出现空指针错误

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-18T17:50:46.793

为什么不将 TextView 中的文本作为额外的字符串发送。

```
Intent i = new Intent(Main.this, Authenticate.class);
i.putExtra("textNeeded", sett.getText().toString());
startActivity(i); 
```

在身份验证活动中，您可以在 onCreate() 中使用它来获取文本：

```
String text = getIntent.getStringExtra("textNeeded"); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-18T16:48:39.777

您不能使用`new`. 执行此操作的正确方法是启动 Authenticate 活动，`startActivityForResult()`然后在身份验证成功时完成并发送回结果。

[文档](http://developer.android.com/reference/android/app/Activity.html#StartingActivities)

* * *

## 回答 #3

> 赞同：-2
> 
> 时间：2012-12-18T16:48:42.870

只需 make sett`static`然后你就不需要实例

# c - C 函数中的自赋值

> ID：13937618
> 
> 赞同：1
> 
> 时间：2012-12-18T16:45:45.393
> 
> 标签：c, gcc, legacy, qnx

将一些遗留 C 代码从 QNX（Photon C 编译器）移植到 Linux (GCC)。在几个地方我看到这样的代码：

```
void process_data(char key, char *data)
{
    int i;

    /* Required for compilation */
    i=i;
    key=key;
    data=data;

    ...
} 
```

显然，编译不需要此代码，它什么也不做。

我的问题是，你为什么一开始会这样做？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-12-18T16:48:36.177

这消除了关于未引用变量的编译警告/错误。通常这样的东西要么通过`#pragma`s 要么通过更具表现力的形式来完成，例如宏：`#define unused_var(x) (x)=(x)`

# java - 如何按照在jsp页面上选择复选框的顺序获取复选框的值？

> ID：13937620
> 
> 赞同：0
> 
> 时间：2012-12-18T16:45:47.803
> 
> 标签：java, javascript, jsp, struts2

我在 jsp 页面中有四个复选框。我想按照它们被选中的顺序获取它们的值。假设复选框的值是 A、B、C、D。如果我先选择 B，然后选择 D，然后选择 A，最后选择 C。我应该得到 B、D、A、C。我需要将这些值发送到 java。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-18T18:41:59.587

尝试使用

```
$('#isAgeSelected').attr('checked') 
```

这将返回 true 或 false

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-18T19:31:32.570

可能不是最好的方法，但可以通过使用单选按钮的 onClick 属性不断更新隐藏输入字段的迂回方法来完成。
未经测试的代码：

```
<script>
 function updateFoo(elemId){
   var elem = document.getElementById("foo");
   elem.value = elem.value+", "+elemId;
   console.log(elem.value);        
}

funcition cleanFoo(){
   //Now clean the string to remove the ',' at the beggining and the end and to 
   //contain A,B,C,D only once
   /*
    Scan the string from the back and keep the last occurence of each ID
    since the user can select or click on radio buttons more than once
    Eg. a,b,c,d,b,b,c,a,d,d,a
    Keep:         b,c,    d,a  //final selections
    //I may write a code here when I get some time
    */
}

</script>
<body>
<input type="radio" id="A" onClick="updateFoo('A')">A<br/>
<input type="radio" id="B" onClick="updateFoo('B')">B<br/>
<input type="radio" id="C" onClick="updateFoo('C')">C<br/>
<input type="radio" id="D" onClick="updateFoo('D')">D<br/>
<input type="hidden" id="foo" value="">
</body> 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-18T16:49:54.353

HTML 没有允许您对值进行排序的控件。您将不得不使用 JavaScript 来跟踪单击的顺序（或每次选择提交表单）。

最简单的方法是隐藏一个输入，您`hidden.value += this.value`可以在复选框上单击事件。

如果取消选中复选框并实现它，您将需要决定您的业务逻辑会发生什么。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-12-19T12:11:00.640

非常感谢大家。最后我根据大家的建议得到了结果。我用过： **JavaScript 代码**：

```
 <script type="text/javascript">

    arr = new Array();

    function updatePriority(elemId){

      var elem = document.getElementById("foo");
      var chkBox = document.getElementById(elemId);
      var options = document.getElementsByName('checkbox1');

       if(document.getElementById(elemId).checked) {    
   alert("checked");         
 arr.push(elemId);  
     }
       else { 
          for(var i = arr.length; i>=0; i--){
      if(arr[i]==elemId){
        arr.splice(i,1);
         break;
               }
      }
            }

      for(var i = (arr.length-1); i>=0; i--){
       alert("checked value list ::"+arr[i]);

      }

   } 
```

我以相反的顺序获得输出。这不是问题，因为我可以从 Java 端轻松处理这个问题。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-12-18T16:49:49.613

1）添加一个新的隐藏输入字段。2）根据用户选择填充值 3）在服务器读取隐藏变量。

例如：最初 hidden_​​variable=""

当用户选择 B 时，hidden_​​variable="B" 当用户选择 C ​​时，hidden_​​variable="B,C" 像这样。

如果用户取消选择一个值，则从 hidden_​​variable 中删除该值。

所有这些你都可以用一些基本的 js 功能来完成

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-12-18T16:50:13.737

只需使用 a`<input type="hidden" id="myList"/>`将值发送到 Java。

当复选框被选中/取消选中时，您调用一个 javascript 函数，该函数将复选框的值附加（或删除，使用 of`substring`和`indexOf`）到隐藏字段。

编辑：这是重复的：[检测单击复选框的顺序](https://stackoverflow.com/questions/3846712/detect-order-in-which-checkboxes-are-clicked)

# iphone - 如何摆脱 iPhone 指针 uint8_t 警告？

> ID：13937628
> 
> 赞同：4
> 
> 时间：2012-12-18T16:46:18.670
> 
> 标签：iphone, objective-c, c, cocoa-touch, ffmpeg

我在我的 iPhone 项目上使用**FFMPeg**`AVFrame *pFrame` ，但在使用 FFMPeg 时收到警告，如下所示：

```
AVFrame *pFrame
uint8_t *data[AV_NUM_DATA_POINTERS];

...

pFrame->data 
```

这是我收到的警告：

```
Passing 'uint8_t *[8]' to parameter of type 'const uint8_t *const *' (aka 'const unsigned char *const *') discards qualifiers in nested pointer types 
```

我如何摆脱这个警告？

谢谢！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-18T16:57:58.837

将其转换为函数期望的类型：

`(const uint8_t *const *)(pFrame->data)`

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-18T16:52:10.767

改成

```
const uint8_t *data[AV_NUM_DATA_POINTERS]; 
```

# c++ - >> 在 C++ 中做什么

> ID：13937629
> 
> 赞同：2
> 
> 时间：2012-12-18T16:46:20.793
> 
> 标签：c++

我正在浏览关于 C++ 的谷歌大学部分，但我不确定这段代码的作用：

```
if (!(cin >> input_var)) {

    cout << "you entered a non-numeric. Exiting..." << endl;
    break;

} 
```

if 语句中的语句在这里实际上做了什么？

谢谢！

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-12-18T16:49:11.570

这是非常基本的 C++。通常，`>>`和`<<`用于位移。但是，I/O 流库已重载`operator>>`和`operator<<`for 流，因此它们可以分别用于*提取*和*插入*。为什么？因为操作符看起来像两个有方向性的箭头，所以代码读起来很好——数据正朝着那个方向移动。

因此，在您的示例中，`cin`是标准输入流，并且您正在从该流中提取一个整数到变量`input_var`中。您读`cin >> input_var`作“`input_var`从标准输入中提取”。

同样，在`if`语句的主体内，您将插入到标准输出流中，`cout`.

I/O 重载`operator<<`并`operator>>`返回对您从中提取或插入的流的引用。此流可转换`bool`为允许您检查其状态。也就是说，doing`if (cin)`将检查`cin`流的状态是否正常。在您的情况下，我们使用“not”运算符`!`来检查流是否*不*正常。如果不是，我们输出错误。

值得一提的是，语句`!(cin >> input_var)`内部`if`并不是语句本身——它是一个表达式。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-12-18T16:48:24.567

它读取一个`int`（变量）并通过部件（有一个重载）`input_var`检查读取是否成功。`!(cin >> ...)``istream``operator !`

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-12-18T16:49:20.293

```
if ( !(cin >> input_var) ) 
```

这`>>`是一个为 重载的运算符`std::istream&`，并根据`input_var`特定重载的类型调用它从流中读取数据并存储在 中`input_var`。运算符重载返回类型是`std::istream&`，表示表达式的类型`cin >> input_var`是`std::istream&`，当在`if`or中使用时`while`，可以根据从流中读取是否成功*自动*转换为`true`or 。`false`因此，您可以在任何需要布尔表达式的构造中编写它，例如`if`and `while`。

```
if ( cin >> data )
{
     //this block will execute only if the data was successfully read
} 
```

相似地，

```
while ( cin >> data )
{
     //this block will execute only if the data was successfully read
     //and the loop will continue until read attempt fails.
} 
```

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-12-18T16:50:32.403

`cin >> input_var`提示用户输入保存在`input_var`. 如果接收到的输入不是整数，那么它会进入 if 条件。“考虑到变量是一个int。”

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-12-18T16:49:46.097

在 iostream 的上下文中，作者通常将 << 和 >> 分别称为“put-to”或“流插入”和“get-from”或“流提取”运算符。

如果在操作数之间使用 >> 表示其按位右移

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2012-12-18T16:51:45.000

`>>`运算符根据上下文有两种含义。

当使用整数时，它可以是右移运算符：`1024 >> 3`执行位移。

在您的情况下，您会认为它是“提取运算符”。从 中提取时`cin`，程序从标准输入（通常是键盘）读取并尝试将其格式化为适合右侧的内容。由于您正在读取整数，因此它将执行以下步骤：

*   读取并丢弃任何前面的空格
*   阅读和解释一个`+`或`-`作为一个积极或消极的符号
*   读取尽可能多的数字字符来构建一个整数。

如果 if 可以读取某些内容并生成一个整数，则该过程最终会返回评估为 true 的内容，因此该行：

```
if(!(cin >> input_var)) 
```

Checks to see if the conversion succeeded. If it couldn't read a number, say you entered `fred` instead, the process would return something that evaluates to false, since the conversion failed. The value returned is actually `cin`, which is convertible to `bool`, but that's a little down in the weeds.

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2012-12-18T16:50:28.137

这是一个重载的运算符。

*   对于输入，提取运算符为`cin>>value;`

*   用于按位右移`value>>2;`

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2012-12-18T16:51:29.393

它是一个运算符。行为取决于 input_var。看看这里：[MSDN](http://msdn.microsoft.com/en-us/library/336xbhcz%28v=vs.80%29.aspx)。

# magento - 如何捕获部分金额

> ID：13937630
> 
> 赞同：5
> 
> 时间：2012-12-18T16:46:22.820
> 
> 标签：magento, payment

我的商店中有两种类型的产品，第一种是可下载的，第二种是实体的，因此我们只想获取可下载产品的数量，其余的将在包裹准备好发货时从管理员处获取。

所以我的问题是如何实现这个功能，以便以后可以捕获剩余的金额。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-18T19:28:52.930

您可以做的是在管理员中将您的信用卡设置设置为“仅授权”

然后创建一个带有观察者的自定义模块，在每次下订单后自动为可下载产品（捕获）生成部分发票。剩余金额将作为管理发票/发货项目捕获。

见[部分发票](http://www.magentocommerce.com/boards/viewthread/267433/#t362454)

# javascript - 将 Jquery 滑块与模式弹出窗口组合的问题

> ID：13937633
> 
> 赞同：0
> 
> 时间：2012-12-18T16:46:35.730
> 
> 标签：javascript, jquery, css, slider, modal-dialog

我正在构建时间线/地图。这是一张顶部有滑块的地图；当您拖动滑块时，地图上会显示不同的图标，可以单击这些图标来启用模式弹出窗口（它还会在地图上显示叠加层）。它可以创造奇迹，看起来很漂亮，除了一件事：加载时，一切都会显示。如何将其默认为地图上的第一个日期作为唯一显示的图标和重叠？

代码如下，但我对代码并不多，无法弄清楚我做错了什么：

有一个像这样的 500 个 ID 的列表

```
var popups = [ {id:"cultarg1969a", start:1969, end:1969}, 
```

然后是这个：

```
 $(document).ready(function() {
  $("#slider").slider({
    min: 1491,
    max: 2020,
    step: 1,
    value: 1491,
  });

$( "#slider" ).bind( "slide", function(event, ui) {
    $(".category1,.category2,.category3,.category4,.category5,.iso").hide();
 $("#yearIndicator").text(ui.value);            
        for (var index=0;index<popups.length;index++) {
        var popup = popups[index];
        if (ui.value >= popup.start && ui.value <= popup.end) {
    $("#" + popup.id).show();
    }
} 
});

  $("#0").addClass("selected");

}); 
```

我只想在页面加载时显示 1491 年的项目。我究竟做错了什么？谢谢你。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-19T03:50:43.463

我的猜测是，您可能希望 popups 数组中的每个元素最初都被隐藏，这很容易通过`display: none`在它们的初始 CSS 中完成。该`.show()`调用应`display`在显示该属性时覆盖该属性。

# msbuild - TeamCity 未执行 MSBuild 命令行

> ID：13937635
> 
> 赞同：2
> 
> 时间：2012-12-18T16:46:40.293
> 
> 标签：msbuild, ssis, teamcity

我创建了一个 Team City 项目，该项目将构建 SSIS v2008 项目，利用 MSBuild 创建 SSIS 包。我可以从命令行运行构建 SSIS 项目：

```
 C:\TeamCity\buildAgent\work\3c40e9b3942c4213\Source\ETL.Scheduler\ETL.Schedule
      msbuild Build.xml /t:Default /verbosity:diaG 
```

但是，当我尝试从 Team City 运行时，将失败并声明无法在 TeamCity 构建目录中找到项目文件。

在遵循[Compiling SSIS Projects with Team City](https://stackoverflow.com/questions/10289725/compiling-ssis-projects-with-team-city)中给出的建议后，我能够在 Team City 中构建 SSIS 解决方案。如前所述，无法从 Team City 中运行，但可以从命令行完成。

下面是构建步骤的屏幕截图。

![在此处输入图像描述](../Images/1c25b1b7585da7c3988cee0fed2a7fed.png)

任何人都可以帮助解决这个问题。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-18T19:36:36.570

是相对于`Build File Path`结帐目录的。尝试仅`Source\ETL.Scheduler\ETL.....`在该领域中使用。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-25T16:09:00.457

咨询队城专家，结合试错，直接指定构建文件路径——Source/ETL.Scheduler/ETL.Scheduler/Build.xml

# python - 为什么“class”不像“def”那样开始一个新的范围？

> ID：13937637
> 
> 赞同：16
> 
> 时间：2012-12-18T16:46:44.760
> 
> 标签：python

我不完全确定这是针对stackoverflow的，所以如果不是，请纠正我。

即说我们有 t.py 内容：

```
class A(object):
    pass
print("A:", A)

class B(object):
    print("From B: A:", A)

class OuterClass(object):
    class AA(object):
        pass
    print("AA:", AA)

    class BB(object):
        print("From BB: AA:", AA) 
```

现在我们执行它：`$ python3 t.py`

```
A: <class '__main__.A'>
From B: A: <class '__main__.A'>
AA: <class '__main__.AA'>
From BB: AA:
Traceback (most recent call last):
  File "t.py", line 9, in <module>
    class OuterClass(object):
  File "t.py", line 14, in OuterClass
    class BB(object):
  File "t.py", line 15, in BB
    print "From BB: AA:", AA
NameError: name 'AA' is not defined 
```

从文档：

> 类定义是一个可执行语句。它首先评估继承列表（如果存在）。继承列表中的每个项目都应评估为允许子类化的类对象或类类型。然后使用新创建的本地名称空间和原始的全局名称空间在新的执行框架中执行该类的套件（请参阅命名和绑定部分）。（通常，套件只包含函数定义。）当类的套件完成执行时，它的执行帧被丢弃，但它的本地命名空间被保存。[4] 然后使用基类的继承列表和属性字典的保存的本地名称空间创建一个类对象。类名绑定到原始本地命名空间中的此类对象。

所以我理解这种行为，但不理解使范围不像其他地方那样具有词汇性的理由。这违背了“特殊情况不足以打破规则”。为什么`class`行为不同于，说，`def`？

这是一个“实用胜于纯粹”的案例吗？如果是这样，理由是什么？我最初认为它可能是 python 2.x 的产物，但正如您在上面看到的，这种行为也存在于 python 3.3 中。

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-12-18T19:21:22.053

正如 Wooble 在评论中指出的那样，类块*确实*创建了一个新范围。问题是嵌套在该范围内的范围无法访问类块范围中的名称。[文档](http://docs.python.org/release/3.1.3/reference/executionmodel.html#naming-and-binding)中提到了这一点：

> 类块中定义的名称范围仅限于类块；它没有扩展到方法的代码块——这包括理解和生成器表达式，因为它们是使用函数范围实现的。

我现在找不到它的来源，但是在某个地方（我认为是在 StackOverflow 问题上）我发现了一个合理的理由：如果类 def 可以在嵌套块内访问，则方法名称会影响全局函数，包括内置函数。这会使创建具有简短名称的方法但也使用同名的内置函数的类变得很尴尬。例如，您不能这样做：

```
class SomeDataStructure(object):
    def sum(self):
        return sum(self._data)
    def otherCalc(self):
        return sum(item for item in somethingElse) 
```

如果类块在方法的范围内，这将导致无限递归，因为内部`sum`调用将有权访问方法名称并将调用该方法而不是内置`sum`函数。同样，其他方法（例如`otherCalc`方法）将不再有权访问全局 sum 函数以供自己使用，但始终会获取方法。 [对另一个 SO question 的回答](https://stackoverflow.com/questions/9505979/the-scope-of-names-defined-in-class-block-doesnt-extend-to-the-methods-blocks)通过说“这是因为您应该使用`self`Python 中的方法来访问”来描述这一点。

*现在，该参数实际上只对类内部的函数*有意义，因为函数体在 is 时不执行，但在语句 is*时*`def`执行类体。但是，我认为如果你将我上面所说的与[这篇博](http://python-history.blogspot.ch/2009/03/how-everything-became-executable.html)文中的概念结合起来，你就会得到一个合理的理由。也就是说，嵌套类没有——现在仍然没有——被认为是一种值得支持的风格。但是，类中的函数当然是司空见惯的。处理类内函数用例的最简单方法是使块不将其名称传递给*任何**`class``class`*嵌套范围。如果将其名称传递给嵌套类而不是嵌套函数可能会更好，但这将是一个更复杂的规则，并且没有人足够关心支持嵌套类以使其值得。**

# oracle - 自动 tnsnames.ora 清理

> ID：13937638
> 
> 赞同：0
> 
> 时间：2012-12-18T16:46:46.740
> 
> 标签：oracle, ksh, tnsnames

我一直在编写一个脚本来删除包括 Oracle db 在内的环境。除了自动清理 tns 条目之外，我已经完成了所有工作。我最初认为使用正则表达式会很容易，但由于我注意到不同节点之间条目的不同格式，我不确定要寻找什么模式。当在 unix 机器上删除数据库时，是否有一种体面的方法来处理 tnsnames.ora 的自动清理？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-18T18:08:57.087

对于 C#，我一直在使用来自： [http ://www.codeproject.com/Articles/30962/TNSNames-Reader 的 RegEx](http://www.codeproject.com/Articles/30962/TNSNames-Reader)

如果您针对 TNSNAMES.ORA 运行以下正则表达式，您将获得数据库列表。([\n][\s]*[^(][a-zA-Z0-9_.]+[\s] *)=[\s]* (

您使用每个项目的第一个 MatchGroup 并针对它运行 TNSPING。如果它有响应，则保留该条目 - 如果没有 - 则丢弃该条目。

不利的一面是 - 如果一个数据库此时已关闭 - 无论如何你都会将它从 tnsnames 中清除...

# jasper-reports - 在报表的详细信息区域中添加其他行

> ID：13937640
> 
> 赞同：1
> 
> 时间：2012-12-18T16:46:54.877
> 
> 标签：jasper-reports, ireport

我正在处理*JR*报告并使用*iReport*生成它们。

我正在为这项任务寻找解决方案：*详细信息*带必须有六条记录。例如，查询从数据库中获取 3 条记录，然后详细信息带将有 3 行，但我想将剩余的 3 行打印为空白行。

我怎样才能用*iReport*做到这一点？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-26T22:11:21.837

我能想到的最好方法是让您的查询返回 6 行（或您设置的行数），那么 jasper 就不需要做任何不寻常的事情了。

这是一个示例，说明您如何使用 oracle 10 或更高版本执行此操作——我相信有更好的方法来执行此操作。

`with gen_6
-- creates a table of 6 rows (generate series)
as (SELECT LEVEL as row_num
FROM dual
CONNECT BY LEVEL <= 6),

Your_Query as` 

 ````
 -- your query here <BR>
    (select SYSDATE, ROWNUM as row_num from dual where rownum <=6)<BR> 
```` 

`select *
from gen_6 left join your_query using (row_num)
order by row_num` 

供参考

您甚至不需要将“字段”row_num 添加到您的报告中即可。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-08T07:34:18.017

将查询结果限制为 6，然后像往常一样，将字段放在详细信息带中

然后，在摘要中，创建三行字段。

```
 1 |    ||    ||    ||    |
   2 |    ||    ||    ||    |
   3 |    ||    ||    ||    | 
```

**在`Print When Expression`第一行的所有字段中**

`new Boolean($V{REPORT_COUNT}.intValue() == 3 || $V{REPORT_COUNT}.intValue() == 4 || $V{REPORT_COUNT}.intValue() == 5)`

**在`Print When Expression`第二行的所有字段中**

`new Boolean($V{REPORT_COUNT}.intValue() == 3 || $V{REPORT_COUNT}.intValue() == 4)`

**在`Print When Expression`第三行的所有字段中**

`new Boolean($V{REPORT_COUNT}.intValue() == 3)`

第一行字段的位置应位于摘要带的最顶部，以便字段看起来好像它们是详细信息部分的一部分。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-18T19:38:16.297

**最简单的方法**：您只需要在详细信息带上包含 N 个文本字段即可复制数据源中的记录数或硬编码所需的数字。

例子：

```
Detail Band
----------------
| FIELD_X
| FIELD_X
---------------- 
```

在这种情况下，您将从 DB 收到 3 条记录并打印 6 个值。

**另一种选择**：使用您需要的规则创建两个子报表，并将其包含在详细信息页面中，一个然后另一个在另一行中。

例子：

```
Detail Band
----------------
| SUBREPORT_1
| SUBREPORT_2
---------------- 
```

在这种情况下，您将从 DB 收到 3 条记录，并将在每个子报表中打印 3 个值，因此在第二个子报表中，您可以将行保留为空白或任何其他规则。

**业务示例：** 此方法可用于需要为特定贷方或借方分配不同帐户的财务接口。

# annotations - 调用实体存储库时出现 Doctrine2“类不存在”错误

> ID：13937641
> 
> 赞同：1
> 
> 时间：2012-12-18T16:47:00.233
> 
> 标签：annotations, doctrine-orm, many-to-many, many-to-one

我对学说 2 的注释系统有一些问题（我使用集成到 Zend 框架 2 中的 2.3）。在相对简单的关系上我没有问题，但是我有很多级联表，当我调用存储库查找方法时，我在这里得到一个 Class does not exist 错误：

```
doctrine\orm\lib\Doctrine\ORM\Proxy\ProxyFactory.php:233 
```

数据库架构本身可能存在一些问题，但我无法更改它，我必须从这个数据库制作我的应用程序。

我所有的实体都开始于：

```
namespace Gcl\Entities;
use Doctrine\ORM\Mapping as ORM; 
```

这是我的一些实体：

T公司Gcl

```
 /**
     * TCompanyGcl
     *
     * @ORM\Table(name="T_COMPANY_GCL")
     * @ORM\Entity(repositoryClass="Gcl\Repositories\TCompanyGclRepository")
     */
    class TCompanyGcl
    {
           /**
             * @var ArrayCollection $customerAccounts
             *
             * @ORM\OneToMany(targetEntity="TCustomerAccount", mappedBy="tCompanyGcl")
             */
            private $customerAccounts; 
```

TCustomerAccount

```
/**
 * TCustomerAccount
 *
 * @ORM\Table(name="T_CUSTOMER_ACCOUNT")
 * @ORM\Entity
 */
class TCustomerAccount
{
   /**
     * @var \TCompanyGcl
     *
     * @ORM\ManyToOne(targetEntity="TCompanyGcl", cascade={"all"}, fetch="EAGER")
     * @ORM\JoinColumns({
     *   @ORM\JoinColumn(name="COMPANY_ID", referencedColumnName="COMPANY_ID")
     * })
     */
    private $tCompanyGcl;

    /**
     * @var \TPerson
     *
     * @ORM\ManyToOne(targetEntity="TPerson", cascade={"all"}, fetch="EAGER")
     * @ORM\JoinColumns({
     *   @ORM\JoinColumn(name="PERSON_ID", referencedColumnName="PERSON_ID")
     * })
     */
    private $person;

    /**
     * @var ArrayCollection $customerSubscriptions
     *
     * @ORM\OneToMany(targetEntity="TSubscription", mappedBy="customerAccount")
     */
    private $customerSubscriptions; 
```

订阅

```
/**
 * TSubscription
 *
 * @ORM\Table(name="T_SUBSCRIPTION")
 * @ORM\Entity(repositoryClass="Gcl\Repositories\TSubscriptionRepository")
 */
class TSubscription
{
   /**
     * @var \TCustomerAccount
     *
     * @ORM\ManyToOne(targetEntity="TCustomerAccount", inversedBy="customerSubscriptions")
     * @ORM\JoinColumns({
     *   @ORM\JoinColumn(name="CUSTOMER_ACCOUNT_ID", referencedColumnName="CUSTOMER_ACCOUNT_ID")
     * })
     */
    private $customerAccount; 
```

所以问题是当我做这样的事情时：

```
$account = $em->getRepository('Gcl\Entities\TCustomerAccount')->find(1);
$account->getSubscriptions();
$account->getCompanyGcl(); 
```

它有效，或者当我一直从 TCompanyGcl 订阅时它也有效。但是当我这样做时：

```
$subscription = $em->getRepository('Gcl\Entities\TSubscription')->find(1); 
```

我收到上述错误。

如果有人对这个问题有丝毫线索，我将非常感谢您的帮助。

**编辑：** 这是存储库：TCompanyGclRepositories

```
namespace Gcl\Repositories;

use Doctrine\ORM\EntityRepository;

class TCompanyGclRepository extends EntityRepository
{
    /**
     * Récupère la liste des sociétés dont le champ passé en paramètre contient la chaîne de caractères passée en paramètre
     *
     * @param string field nom du champ dans lequel chercher
     * @param string search chaîne de recherche
     * @return Array company
     */
    public function getCompaniesByField($field = 'companyName', $search = '', $return_mode = 'array'){
        $qb = $this->_em->createQueryBuilder();
        $qb->select('c')
        ->from('Gcl\Entities\TCompanyGcl',  'c')
        ->where('UPPER(c.'.$field.') LIKE :search')
        ->setParameter('search', "%".mb_strtoupper($search,'UTF-8')."%");

        if($return_mode=="array"){
            $results = $qb->getQuery()->getArrayResult();
            $companies = array(0 => "Pas de société");

            foreach($results as $result){
                $companies[$result['companyId']] = $result;
            }
        }
        else{
            $companies = $qb->getQuery()->getResult();
        }

        return $companies;
    }

    public function getCustomerAccountPerson($companyId){
        $qb = $this->_em->createQueryBuilder();
        $qb->select('cust, p, t')
                    ->from('Gcl\Entities\TCustomerAccount', 'cust')
                    ->leftJoin('cust.person', 'p')
                    ->leftJoin('p.typeofcivility', 't')
                    ->where('cust.companyId = :id')
                    ->setParameter('id', $companyId);
        return $qb->getQuery()->getResult();

    }
} 
```

TSubscription 存储库

```
namespace Gcl\Repositories;

use Doctrine\ORM\EntityRepository;

class TSubscriptionRepository extends EntityRepository
{
    public function getContractTickets($subscription_id){
        $qb = $this->_em->createQueryBuilder();

        if(!is_array($subscription_id)){
            $subscription_id = array($subscription_id);
        }
        $qb->select('s, t, i, s.itemId, s.subscriptionId, i.printName, t.ticketSerialNumber')
        ->from('Gcl\Entities\TSubscription', 's')
        ->innerJoin('s.ticketSerialNumber', 't')
        ->leftJoin('s.item', 'i')
        ->add('where', $qb->expr()->in('s.subscriptionId', $subscription_id));
        return $qb->getQuery()->getArrayResult();
    }

    public function getContractVehicles($subscription_id){
        $qb = $this->_em->createQueryBuilder();

        if(!is_array($subscription_id)){
            $subscription_id = array($subscription_id);
        }
        $qb->select('s, v, tv, s.itemId, i.printName, v.licencePlate, tv.name')
        ->from('Gcl\Entities\TSubscription', 's')
        ->innerJoin('s.licencePlate', 'v')
        ->leftJoin('v.typeOfVehicle', 'tv')
        ->leftJoin('s.item', 'i')
        ->add('where', $qb->expr()->in('s.subscriptionId', $subscription_id));
        return $qb->getQuery()->getArrayResult();
    }
} 
```

我的实体位于文件夹 Gcl/Entities 中，而我的存储库位于 Gcl/Repositories 中。当我从实体中删除一些关联时，我可以调用它们以及它们的方法就好了。但是，如果在 Subscription 存储库上调用 find 方法时，我从 TCustomerAccount 中删除了 tCompanyGcl 和 person 关联，我会收到此错误：

```
Class Gcl\Entities\ArrayCollection does not exist 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-21T13:27:44.393

我发现了问题，简直不敢相信它就在我眼前。删除注释正在删除错误的事实使我认为源是注释，但问题出在 setter 方法上。

例如 TCustomer 上的 getCompanyGcl 方法：

```
/**
 * Set companyGcl
 *
 * @param \TCompanyGcl $companyGcl
 * @return TCustomerAccount
 */
public function setCompanyGcl(\TCompanyGcl $companyGcl = null)
{
    $this->companyGcl = $companyGcl;

    return $this;
} 
```

但是要工作，您必须精确参数中对象的命名空间，如下所示：

```
/**
 * Set companyGcl
 *
 * @param \TCompanyGcl $companyGcl
 * @return TCustomerAccount
 */
public function setCompanyGcl(\Gcl\Entities\TCompanyGcl $companyGcl = null)
{
    $this->companyGcl = $companyGcl;

    return $this;
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-20T01:45:28.017

未指定您的 TclCustomerAccount 存储库，这意味着您使用的是默认值。那应该完美无缺。您没有提及是否可以使用 TCompanyGcl 中的自定义存储库。

我的猜测是您到自定义存储库的路径是错误的，*或者*存储库文件本身中存储库的类名拼写错误（或与您的注释拼写不同）。

如果您需要更多帮助，您必须自己发布存储库文件。

编辑：

我对注释很弱，我不使用它们。不过，我*认为*

```
@var ArrayCollection $customerSubscriptions 
```

正在结合

```
namespace Gcl\Repositories; 
```

产生这个错误。通过以下方式在注释中指定整个 ArrayCollection 路径：

```
use Doctrine\Common\Collection\ArrayCollection as ArrayCollection; 
```

在文件的开头或在每个注释中单独作为

```
@var Doctrine\Common\Collection\ArrayCollection $customerSubscriptions 
```

和类似的

# apache - 在 Apache 代理服务器上替换后的 DEFLATE

> ID：13937642
> 
> 赞同：5
> 
> 时间：2012-12-18T16:47:09.470
> 
> 标签：apache, proxy, header, inflate, deflate

我在 Apache 上配置代理时遇到问题。我想要：

1.  从网站获取内容（是否放气）；
2.  对其应用过滤器以替换页面主体上的一些文本；
3.  将 Deflate 过滤器应用于更改的页面后，将页面重新发送给客户端。

我的配置是这样的：

```
ExtFilterDefine FAnalyse mode=output intype=text/html cmd="path_to_my_script"

<VirtualHost *:80>
    ServerName site1.com
    <Location />
        SetOutputFilter INFLATE;FAnalyse;DEFLATE
        ProxyPass http://site2.com/
        Header append Vary User-Agent env=!dont-vary
    </Location>
</VirtualHost> 
```

如果没有 DEFLATE 过滤器，它可以正常工作，但内容不会被压缩。
使用 DEFLATE 过滤器，客户端似乎获得了压缩内容，但标题错误，因为显示如下页面：

```
‹í39 Èæ*ô2ÃA(„ºÒªíïÄÃ5¹Q°sç¿^Þ^N.ç7Æðj#?
æÈ>ñ<ÙæýåÕßÑÍù{°D?]ßÎ~ ty&,é”“qÏ:<¬Ð™àYR
lŒŒÓ@ÀË¾íQÿqâõ¬ |ë6%^ç($aÅ ‚˜¸¬„ŠGàûqEyð 
```

我的脚本不是问题，因为我用 Apache 的替换过滤器替换它，问题是一样的。

我试过这个指令：

```
Header append Vary User-Agent env=!dont-vary 
```

没有成功。

# mysql - 更新大表时出现错误 1206

> ID：13937644
> 
> 赞同：1
> 
> 时间：2012-12-18T16:47:12.993
> 
> 标签：mysql

我有一个在表更改期间使用的存储过程，它失败并显示错误消息：

> ERROR 1206 (HY000): 锁总数超过锁表大小

我在网上四处寻找，在这里和 mysql 论坛上找到了条目，共识似乎是增加 innodb_buffer_pool_size 的大小或减少在单个操作中添加/更改的记录数量。

可悲的是，我没有增加 innodb_buffer_pool_size 的选项或能力，所以我试图减少每个操作更改的记录数。然而，这也失败了。

我们有一个简单的时间分区表 event_notify_occurrence_cache，它有两列：

```
CREATE TABLE `event_notify_occurrence_cache` (
`timestamp` datetime NOT NULL,
`xml` text NOT NULL,
KEY `idx_timestamp` (`timestamp`),
) ENGINE=InnoDB DEFAULT CHARSET=utf8
/*!50500 PARTITION BY RANGE COLUMNS(`timestamp`)
(PARTITION p2012_12_10__15_00_00UTC VALUES LESS THAN ('2012-12-10 16:00:00') ENGINE = InnoDB,
PARTITION p2012_12_10__16_00_00UTC VALUES LESS THAN ('2012-12-10 17:00:00') ENGINE = InnoDB,
...
...
... 
```

我们需要将其更改为具有“事件类型”列，其中事件类型是 xml 列中字符串的一部分。执行“LIKE”搜索明显很慢，因此我们想为事件类型添加另一个索引列。我们要更改为以下内容：

```
CREATE TABLE `event_notify_occurrence_cache` (
`event_type_value` smallint(5) unsigned NOT NULL,
`timestamp` datetime NOT NULL,
`xml` text NOT NULL,
KEY `idx_timestamp` (`timestamp`),
KEY `idx_event_type_value` (`event_type_value`)
) ENGINE=InnoDB DEFAULT CHARSET=utf8
/*!50500 PARTITION BY RANGE COLUMNS(`timestamp`)
(PARTITION p2012_12_10__15_00_00UTC VALUES LESS THAN ('2012-12-10 16:00:00') ENGINE = InnoDB,
PARTITION p2012_12_10__16_00_00UTC VALUES LESS THAN ('2012-12-10 17:00:00') ENGINE = InnoDB,
...
... 
```

当我们更改表以匹配它时，event_type_value 列会按照预期和期望填充无效事件类型零（0）。

到目前为止，这一切都有效。

因此，下一步是使用基本上等同于以下的逻辑，对每种可能的事件类型在表上进行一系列更新：

```
UPDATE event_notify_occurrence_cache
SET event_type_value = 1
WHERE event_type_value = 0 AND xml LIKE "%<eventType>1</eventType>"; 
```

对每种可能的事件类型重复此操作。

这对于我们的一个测试用例来说失败了，我们有 24 个分区，总共 9,110,000 条记录，其中第一次匹配将达到大约 201,827 条记录。

我尝试使用`LIMIT`带有`UPDATE`子句的语句并循环，直到给定事件类型的所有条目都完成，但这不起作用。

我首先尝试限制为 5000，但在 150,000 条记录后失败（根据调试输出）。接下来，我将限制设置为 1000，现在它在 152,000 条记录后失败。在随后的尝试中，我将该`UPDATE`子句包装在一个`TRANSACTION`/`COMMIT`对中，那次我在它出错之前将其记录到了 182,000 条记录。

这几乎就像锁表是每个存储过程而不是每个语句。

一个[stackoverflow 答案](https://stackoverflow.com/questions/6901108/the-total-number-of-locks-exceeds-the-lock-table-size)建议锁定正在写入的表。我尝试使用“LOCK TABLE”命令，但它仍然不起作用。

我正在使用服务器版本 5.5.8-enterprise-commercial-advanced-log

我的存储过程逻辑尝试之一的示例如下

```
....
OPEN etype;
REPEAT
    FETCH etype INTO etype_name, etype_value;

    IF done != 1 THEN
        SET query_str :=
        CONCAT('%<eventType>', etype_name, '</eventType>%');

        SET changes_not_done := 1;
        WHILE changes_not_done != 0 DO

            SELECT CONCAT(CURRENT_TIMESTAMP(), ' ETYPE:', etype_name,
                ' CHANGES_NOT_DONE:', changes_not_done)
                AS 'Debug Msg:';

            UPDATE `UMS`.`event_notify_occurrence_cache`
                SET event_type_value=etype_value
                WHERE event_type_value=0 AND xml LIKE query_str
                LIMIT 1000;

            -- set changes_not_done to the number of rows modified by the
            -- previous command. If it's zero, then we are done. If it's
            -- non-zero then we have more to do.
            SELECT ROW_COUNT() INTO changes_not_done;

        END WHILE;
    END IF;

UNTIL done = 1
END REPEAT;
CLOSE etype;
... 
```

我有一个事件类型表，我循环遍历它，并为每个事件类型搜索通知缓存以处理它。

在此先感谢您的帮助

# javascript - Javascript 或 jQuery。启动从输入文本中提取的多个 URL

> ID：13937654
> 
> 赞同：0
> 
> 时间：2012-12-18T16:47:54.100
> 
> 标签：javascript, jquery, dom, window.open

我写了一个基本函数如下：

```
 function launchIt() {
            var input = document.getElementById('webaddy'),
                webAddy = input.value;
            if (webAddy) {
                    // initialize array
                    var arr = new Array(6);
                    arr[0] = "/css/img/bg-home.jpg?reset=1";
                    arr[1] = "/css/img/bg-large.jpg?reset=1";
                    arr[2] = "/css/img/bg-medium.jpg?reset=1";
                    arr[3] = "/css/img/bg-small.jpg?reset=1";
                    arr[4] = "/css/img/bg-xlarge.jpg?reset=1";
                    arr[5] = "/css/img/bg-xsmall.jpg?reset=1";

                    // display all values
                    for (var i = 0; i < arr.length; i++) {
                        alert(webAddy + arr[i]);
                    };
            }
        } 
```

有用。我从 webaddy 输入字段的值中获取网址。我想将其更改`alert()`为类似`window.open`. 我试过`window.open`了，但它只打开第一个数组项然后停止。有什么建议么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-18T17:32:31.333

这是我浏览器的内置弹出块！感谢@user1105047！

# sql-server-2008 - 如何编写 JOIN 语句来组合来自不同表的数据

> ID：13937657
> 
> 赞同：0
> 
> 时间：2012-12-18T16:48:06.560
> 
> 标签：sql-server-2008, tsql

我有以下 2 个程序用作报告的来源。截至目前，我在我的 SQL Server Reporting Services 2008 R2 报告中展示了 2 个不同的表，因为它不允许我将它们放在一起，因为它们属于 2 个不同的数据集。

我想将它们呈现在一个表中，但我在这里尝试使用 JOIN 并没有成功。我怎么做？

注意：`cName`in`IAgentQueueStats`对应于`UserId`in `AgentActivityLog`。

```
/*** Aggregate values for Call Center Agents for calls, talk and hold time ***/
/*** The detail/row values is per 30-minute interval ***/
ALTER PROCEDURE [dbo].[sp_IAgentQueueStats_OnlyCalls_Grouped]
    @p_StartDate datetime,
    @p_EndDate datetime,
    @p_Agents varchar(8000)
AS

SELECT  [cName]
      ,sum([nAnswered])     SumNAnswered
      ,sum([nAnsweredAcd])  SumNAnsweredAcd
      ,sum([tTalkAcd])      SumTTalkAcd
      ,sum([nHoldAcd])      SumNHoldAcd
      ,sum([tHoldAcd])      SumTHoldAcd
      ,sum([tAcw])          SumTAcw

FROM [I3_IC].[dbo].[IAgentQueueStats]

WHERE dIntervalStart between @p_StartDate and DATEADD(s, 86400-1, @p_EndDate)
  AND CHARINDEX ( cName ,@p_Agents)> 0
  AND cReportGroup <> '*'
  AND cHKey3 = '*' and cHKey4 ='*'
  AND nEnteredAcd > 0
  AND cReportGroup <> 'CCFax Email'
GROUP BY cName 
```

这是第二个：

```
/*** Aggregate values for Call Center Agents for status/activity time ***/
/*** The detail/row values is per start-time/end-time ***/
ALTER PROCEDURE [dbo].[sp_AgentActivity_Grouped]
    @p_StartDate datetime,
    @p_EndDate datetime,
    @p_Agents varchar(8000)
AS

SELECT  [UserId],[StatusCategory],SUM([StateDuration]) [StatusDuration] FROM
(
SELECT   
    [UserId]
    ,[StatusGroup]
    ,[StatusKey]
    , CASE [StatusKey]
        WHEN 'Available'            THEN 'Productive'
        WHEN 'Follow Up'            THEN 'Productive'
        WHEN 'Campaign Call'        THEN 'Productive'
        WHEN 'Awaiting Callback'    THEN 'Productive'
        WHEN 'In a Meeting'         THEN 'Not Your Fault'
        WHEN 'Project Work'         THEN 'Not Your Fault'
        WHEN 'At a Training Session'THEN 'Not Your Fault'
        WHEN 'System Issues'        THEN 'Not Your Fault'
        WHEN 'Test'                 THEN 'Not Your Fault'
        WHEN 'At Lunch'             THEN 'Non Productive'
        WHEN 'Available, Forward'   THEN 'Non Productive'
        WHEN 'Available, Follow-Me' THEN 'Non Productive'
        WHEN 'At Play'              THEN 'Non Productive'
        WHEN 'AcdAgentNotAnswering' THEN 'Non Productive'
        WHEN 'Do Not Disturb'       THEN 'Non Productive'
        WHEN 'Available, No ACD'    THEN 'Non Productive'
        WHEN 'Away from desk'       THEN 'Non Productive'
        ELSE [StatusKey]
    END StatusCategory
     ,stateduration
FROM [I3_IC].[dbo].[AgentActivityLog]
WHERE [StatusDateTime] between @p_StartDate and DATEADD(s, 86400-1, @p_EndDate)
    AND CHARINDEX ( [UserId] ,@p_Agents)> 0
    AND [StatusKey] not in ('Gone Home','Out of the Office','On Vacation','Out of Town')
) a 
GROUP BY [UserId],[StatusCategory]
ORDER BY [UserId], [StatusCategory] desc 
```

顺便说一句，如果我花一些时间来评论/回复您的帖子，那不是缺乏兴趣，而是缺乏理解……

这是我想要的报告： Rows: Person (= `cName`in `IAgentQueueStats`= `UserId`in `AgentActivityLog`)

列：来自`IAgentQueueStats`：

```
sum([nAnswered]) 
sum([nAnsweredAcd])
sum([tTalkAcd])
sum([nHoldAcd])
sum([tHoldAcd])
sum([tAcw]) 
```

从`AgentActivityLog`

总数是`'Productive'`

总数是`'Not Your Fault'`

总数是`'Non Productive'`

但请注意`'Productive'`，`'Not Your Fault'`和`'Non Productive'`是在行中重复的值，`AgentId`这意味着许多具有相同`AgentId`和值的行，必须总计并“转换”为一列。

这很复杂，我相信...

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-18T16:54:23.233

基本连接

```
select IAgentQueueStats.*, AgentActivityLog.* 
from IAgentQueueStats 
join AgentActivityLog 
  on IAgentQueueStats.cName = AgentActivityLog.UserId 
```

那是一个开始。
从那里需要知道你想要在这个合并的报告中什么。

尝试基本组

```
select AgentActivityLog.UserId, AgentActivityLog.StatusCategory,SUM(AgentActivityLog.StateDuration),sum(IAgentQueueStats.nAnswered)     
    from IAgentQueueStats 
    join AgentActivityLog 
      on IAgentQueueStats.cName = AgentActivityLog.UserId 
Group By AgentActivityLog.UserId, AgentActivityLog.StatusCategory 
```

由于报告中的 group by 不一样，因此不清楚如何执行此操作。
一个和上面一样。
另一种是将其分成两组，然后加入该结果。
直到您定义报告才能知道哪个。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-01T02:16:47.483

我找不到在一个 SQL 语句中执行此操作的方法，因此我分几步完成，在存储过程中创建临时表，这样我就可以加入临时表并获得我正在寻找的结果。

# ios - 在 iOS 中处理带有空正文的重定向 HTTP POST 请求

> ID：13937659
> 
> 赞同：0
> 
> 时间：2012-12-18T16:48:19.740
> 
> 标签：ios, http, redirect, post, nsurlrequest

我正在开发一个与远程 WS 交互的 iOS 应用程序。由于 WS 的 URL 可能会不时更改，应用程序应该将所有请求发送到一个固定且稳定的 URL，该 URL 负责将它们重定向到 WS 的实际 URL。

这是我的代码：

```
- (NSURLRequest *)connection: (NSURLConnection *)connection
         willSendRequest: (NSURLRequest *)request
        redirectResponse: (NSURLResponse *)redirectResponse {

if (redirectResponse) {
    NSMutableURLRequest *r = [lastRequest mutableCopy];
    [r setURL: [request URL]];

    return r;
} else {
    return request;
}
} 
```

其中 lastRequest 是已发送的原始请求的副本。

这是我的问题：我不知道为什么，但是新请求，即 r，是用一个空的主体（无参数）发送的。看起来原始请求的所有参数都丢失了，即使我使用原始请求的精确副本。

你们有什么感想？我该如何解决这个问题？

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-19T16:24:10.103

我认为问题与以下事实有关，根据 HTTP 标准，重定向请求应该使用 GET 方法，因此请求正文为空。

我通过返回 nil 而不是 r 并使用正确的 URL 生成新请求来解决问题。

# ember.js - 每次循环刷新 Ember.js 中的项目

> ID：13937668
> 
> 赞同：0
> 
> 时间：2012-12-18T16:48:39.340
> 
> 标签：ember.js, handlebars.js

我在 ember 中有一个 each 循环，在第一次显示数据时可以正常工作。在其中，有一个 if 语句，它要么显示可用的图像，要么显示一个上传图像的按钮。如果我确实上传了新图像，我希望页面上的项目切换为显示图像，然后按钮将被隐藏。

我发现这样做的唯一方法是删除 if 语句，并在项目上使用一些 bindattr 属性，以便它们可见或隐藏（尽管这迫使我在模型上为视图逻辑创建特殊字段）。我想知道是否有某种方法可以刷新每个循环或仅刷新循环中的特定项目？

```
ul.thumbnails
    {{#each item in view.content}}
    li.span5.thumbnail
      {{#if item.isPlaceholder}}
      .placeholder
        <span class="photo-category">{{item.category}}</span>
        <button class="btn" {{action "showCategoryFileUpload" item target="parentView"}}>Upload Photo</button>
      {{else}}
      <a {{action "showPhoto" item target="parentView"}} class="photo-link" href="#">
      <img {{bindAttr src="item.url"}} {{bindAttr class="item.islast"}} /><span class="photo-category">{{item.category}}</span>
      </a>
      {{/if}}
    {{/each}} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-19T11:24:53.053

尝试`Collection`使用 helper 以保留`{{if}}`helper 的绑定，问题是 if 条件仅在第一次运行循环时检查，集合视图是一个`ContainerView`为数组中的每个项目创建一个具有关联绑定的视图。如果您使用的是最新的 Ember，您也可以使用helper 来

完成此操作，但使用集合是更优雅的方法`each``itemViewClassBinding`

```
{{#collection contentBinding="view.content"}}
  li.span5.thumbnail
  {{#if view.content.isPlaceholder}}
    .placeholder
    <span class="photo-category">{{view.content.category}}</span>
    <button class="btn" {{action "showCategoryFileUpload" item  target="view.parentView"}}>Upload Photo</button>
  {{else}}
    <a {{action "showPhoto" item target="view.parentView"}} class="photo-link" href="#">
      <img {{bindAttr src="view.content.url"}} {{bindAttr class="view.content.islast"}} />          
      <span class="photo-category">{{view.conetn.category}}</span>
    </a>
  {{/if}}  
{{/collection}} 
```

# ruby-on-rails - Rails 路由到唯一索引

> ID：13937670
> 
> 赞同：36
> 
> 时间：2012-12-18T16:48:43.683
> 
> 标签：ruby-on-rails, ruby, ruby-on-rails-3, ruby-on-rails-3.2

这可能是 Rails 中的一个简单路由问题，但我搜索并收到了 Rails 2 而不是 Rails 3 的答案。

我生成了一个脚手架和

```
resources :users 
```

其中包括new、edit、show和index一起路由。

我只想路由到索引并删除新的、编辑、显示等。我已经删除了 html.erb 文件，但它们仍在路由中。

任何关于我应该如何删除其他路线的建议将不胜感激。

* * *

## 回答 #1

> 赞同：77
> 
> 时间：2012-12-18T16:53:59.663

使用`only`选项：

```
resources :users, only: [:index] 
```

[参考](http://guides.rubyonrails.org/routing.html#restricting-the-routes-created)

* * *

## 回答 #2

> 赞同：11
> 
> 时间：2012-12-18T16:53:38.837

[请参阅Rails 路由指南](http://guides.rubyonrails.org/routing.html)的第 4.6 章。

> 默认情况下，Rails 为应用程序中的每个 RESTful 路由创建七个默认操作（索引、显示、新建、创建、编辑、更新和销毁）的路由。您可以使用 :only 和 :except 选项来微调此行为。:only 选项告诉 Rails 只创建指定的路由：

```
resources :photos, :only => [:index, :show] 
```

# openstreetmap - 如何在我的 Web 应用程序中包含 OpenStreetMap

> ID：13937671
> 
> 赞同：2
> 
> 时间：2012-12-18T16:48:54.333
> 
> 标签：openstreetmap

好吧，我正在寻找一个教程，告诉我如何在我的网络应用程序中包含 OpenStreetMap。谷歌提供了一个很好的教程，一步一步地告诉我们如何在我们的网络应用程序中包含谷歌地图。但是对于 OSM，我还没有遇到过这样的事情。我所遇到的只是如何使用（编辑）OSM，而不是如何将它包含在我们的应用程序中。我想要的只是用 OSM 替换我的应用程序中使用的谷歌地图。

请任何人！提前致谢。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-12-19T12:09:01.650

你还没有真正解释你真正想要做什么。对于仅显示地图，您应该阅读[switch2osm上的](http://switch2osm.org/)[使用 Tiles](http://switch2osm.org/using-tiles/)部分，然后选择[OpenLayers](http://switch2osm.org/using-tiles/getting-started-with-openlayers/)或[Leaflet](http://switch2osm.org/using-tiles/getting-started-with-leaflet/)作为您首选的 JavaScript 库。

# php - phploc输出说明

> ID：13937676
> 
> 赞同：6
> 
> 时间：2012-12-18T16:49:09.087
> 
> 标签：php, code-analysis, static-analysis, phploc

如果我`phploc`针对我的一个 PHP 项目（开源）运行，我会看到这个输出。

```
phploc 1.6.4 by Sebastian Bergmann.

Directories:                                          3
Files:                                               33

Lines of Code (LOC):                               2358
  Cyclomatic Complexity / Lines of Code:           0.08
Comment Lines of Code (CLOC):                       903
Non-Comment Lines of Code (NCLOC):                 1455

Namespaces:                                           0
Interfaces:                                           3
Classes:                                             28
  Abstract:                                           1 (3.57%)
  Concrete:                                          27 (96.43%)
  Average Class Length (NCLOC):                      49
Methods:                                            149
  Scope:
    Non-Static:                                     128 (85.91%)
    Static:                                          21 (14.09%)
  Visibility:
    Public:                                         103 (69.13%)
    Non-Public:                                      46 (30.87%)
  Average Method Length (NCLOC):                      9
  Cyclomatic Complexity / Number of Methods:       1.69

Anonymous Functions:                                  0
Functions:                                            3

Constants:                                            9
  Global constants:                                   0
  Class constants:                                    9 
```

通过这个静态分析，如何判断这个代码库是好是坏？或者写得好不好？

1.  如果圈复杂度太低或太高，它好吗？
2.  有`3.57%`抽象类是好是坏？
3.  `14.09%`静态方法。它应该在 OOP 代码库上更低吗？
4.  没有使用命名空间，是好是坏？

最后一个问题**你如何分析带有 phploc 输出的代码库？**

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-12-18T16:51:50.867

圈复杂度低好，高不好；[静态很难进行单元测试](http://kunststube.net/static/)，但是（虽然有些人认为它们与 eval 一样糟糕）它们确实有目的；phploc 的其他措施有待解释。

但是你真的应该将 phploc 与[pdepend](http://pdepend.org/)和[phpmd](http://phpmd.org/)等其他工具一起使用。pdepend 站点特别解释了许多使用的分析，并且 phpmd 输出非常不言自明

**编辑**

作为比较，我目前正在处理的代码（[https://github.com/MarkBaker/PHPGeodetic](https://github.com/MarkBaker/PHPGeodetic)）：我对抽象/具体类的级别相当满意，尽管它可能会更高一些；我有一种具有更高圈复杂度的方法，足以稍微扭曲这些数字，但这并不容易被分解；和一些更长的方法（但不足以触发 phpmd 警告）。

```
Lines of Code (LOC):                               4003
  Cyclomatic Complexity / Lines of Code:           0.07
Comment Lines of Code (CLOC):                      1580
Non-Comment Lines of Code (NCLOC):                 2423

Namespaces:                                           0
Interfaces:                                           1
Traits:                                               0
Classes:                                             25
  Abstract:                                           4 (16.00%)
  Concrete:                                          21 (84.00%)
  Average Class Length (NCLOC):                     103
Methods:                                            160
  Scope:
    Non-Static:                                     129 (80.62%)
    Static:                                          31 (19.38%)
  Visibility:
    Public:                                         131 (81.88%)
    Non-Public:                                      29 (18.12%)
  Average Method Length (NCLOC):                     16
  Cyclomatic Complexity / Number of Methods:       2.12

Anonymous Functions:                                  2
Functions:                                            0

Constants:                                           66
  Global constants:                                   0
  Class constants:                                   66 
```

总的来说，我很想为公共/私人、非静态/静态和混凝土/抽象使用 80:20 规则；但很大程度上取决于您实际编码的内容

可能更重要的是圈复杂度/方法数量……我不喜欢这个数字太高；但如果它高于 2.5 的平均值，我会更仔细地查看 phpmd 统计信息

# jquery - 尝试将 ajax 事件绑定到 jQuery 中的链接时未捕获的 TypeError

> ID：13937686
> 
> 赞同：0
> 
> 时间：2012-12-18T16:49:34.487
> 
> 标签：jquery, ruby-on-rails, ujs

我正在使用带有 UJS 的 Rails。我想在提交之前绑定一些事件以禁用 ajax 链接，并在出现错误时重新启用它。我写了这个 jQuery 来处理这个过程：

```
$('.post').on('click', 'a[data-toggle="follow"]', function() {
  var elem, href;
  elem = $(this);
  href = elem.attr('href');
  return elem.bind('ajax:loading', elem.attr('href', '#')).bind('ajax:error', elem.attr('href', href));
}); 
```

当我故意在我的控制器中模拟一个异常时，我得到了这个 JS 错误：

`Uncaught TypeError: Object [object Object] has no method 'apply'`

知道为什么会这样吗？Ajax 本身运行良好。只有当出现服务器错误时才会发生这种情况。

```
li.subscription
  - if signed_in? && current_user.subscribed?(post)
    = link_to "Unfollow", [post, current_user.subscriptions.find_by_post_id(post)], method: :delete, remote: true, 'data-toggle' => 'follow'
  - else
    = link_to "Follow", post_subscriptions_path(post), method: :post, remote: true, 'data-toggle' => 'follow' 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-18T16:53:43.610

jQuery[绑定函数](http://api.jquery.com/bind/)将处理函数作为第二个参数。然而，在这里您提供的是一个 jQuery 对象（即返回的值`elem.attr('href', '#')`）。

你需要类似的东西：

```
return elem.bind('ajax:loading', function() {
    elem.attr('href', '#');
}).bind('ajax:error', function() {
    elem.attr('href', href);
}); 
```

# php - 多张图片上传不移动目录上的文件

> ID：13937694
> 
> 赞同：4
> 
> 时间：2012-12-18T16:49:51.680
> 
> 标签：php, mysql, pdo

尝试构建一个多图像上传，从我的表单中获取 3 个提交的文件并将它们存储在我的服务器上。

我有以下内容，但无论我收到什么“无效文件”，都可以看到我哪里出错了吗？

```
for($i = 0; $i < 3; $i++) {
 $aFile = $_FILES['file'][$i];

    $allowedExts = array("jpg", "jpeg", "gif", "png");
    $extension = end(explode(".", $aFile["file"]["name"]));
    if ((($aFile["file"]["type"] == "image/gif")
    || ($aFile["file"]["type"] == "image/jpeg")
    || ($aFile["file"]["type"] == "image/png")
    || ($aFile["file"]["type"] == "image/pjpeg"))
    && ($aFile["file"]["size"] < 20000)
    && in_array($extension, $allowedExts))
      {
      if ($aFile["file"]["error"] > 0)
        {
        echo "Return Code: " .$aFile["file"]["error"] . "<br>";
        }
      else
        {

        if (file_exists("upload/" . $aFile["file"]["name"]))
          {
          echo $aFile["file"]["name"] . " already exists. ";
          }
        else
          {
          move_uploaded_file($aFile['tmp_name'],
          "upload/" . date('U')."-".$aFile["file"]["name"]);  // add a unique string to the uploaded filename so that it is unique.
          echo "Image Uploaded Successfully";
          }
        }
      }
    else
      {
      echo "Invalid file";

    }

} 
```

** HTML **

```
<li>
    <label for="picture_1">picture 1 : </label>
    <input type="file" name="file">
</li>
<li>
    <label for="picture_2">picture 2 : </label>
    <input type="file" name="picture_2">
</li>
<li>
    <label for="picture_3">picture 3 : </label>
    <input type="file" name="picture_3">
</li> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-19T03:05:47.410

我猜，主要问题是您的 HTML 元素名称和使用的名称`$_FILES`无法匹配，即您使用了第一个文件输入名称“文件”。它应该是“picture_1”。您在文件处理部分使用了索引 0 到 2。它应该是 1 到 3 来匹配“picture_1”、“picture_2”和“picture_3”。

请注意，您的表单应该有`enctype="multipart/form-data"`，否则您的文件将不会被上传。这是正确的：

有两种方法可以实现这一点：
(1) 分别命名文件输入，例如图片 1、图片 2 等。
(2) 将文件输入命名为一组，例如`file[]`.

**方法 1：分别命名文件输入**

**HTML**

```
<form method="post" enctype="multipart/form-data">
    <li>
        <label for="picture_1">picture 1 : </label>
        <input type="file" name="picture_1" id="picture_1" />
    </li>
    <li>
        <label for="picture_2">picture 2 : </label>
        <input type="file" name="picture_2" id="picture_2" />
    </li>
    <li>
        <label for="picture_3">picture 3 : </label>
        <input type="file" name="picture_3" id="picture_3" />
    </li>
    <input type="submit" name="submit" value="Upload" />
</form> 
```

**PHP**

```
if(sizeof($_FILES)){ 
    for($i = 1; $i <= 3; $i++) {
     $aFile = $_FILES['picture_'.$i];
     if(empty($aFile['tmp_name'])) continue; # skip for empty elements

        $allowedExts = array("jpg", "jpeg", "gif", "png");
        $extension = end(explode(".", $aFile["name"]));
        if ((($aFile["type"] == "image/gif")
        || ($aFile["type"] == "image/jpeg")
        || ($aFile["type"] == "image/png")
        || ($aFile["type"] == "image/pjpeg"))
        && ($aFile["size"] < 20000)
        && in_array(strtolower($extension), $allowedExts))
          {
          if ($aFile["error"] > 0)
            {
            echo "Return Code: " .$aFile["error"] . "<br>";
            }
          else
            {       
            if (file_exists("upload/" . $aFile["name"]))
              {
              echo $aFile["name"] . " already exists. ";
              }
            else
              {
              move_uploaded_file($aFile['tmp_name'], 
                "upload/" . date('U')."-".$aFile["name"]); 
              echo "Image Uploaded Successfully";
              }
            }
          }
        else
        {
          echo "Invalid file";  
        }
    }
} 
```

**方法 2：将文件输入命名为一个组**

**HTML**

```
<form method="post" enctype="multipart/form-data">
    <li>
        <label for="picture_1">picture 1 : </label>
        <input type="file" name="file[]" id="picture_1" />
    </li>
    <li>
        <label for="picture_2">picture 2 : </label>
        <input type="file" name="file[]" id="picture_2" />
    </li>
    <li>
        <label for="picture_3">picture 3 : </label>
        <input type="file" name="file[]" id="picture_3" />
    </li>
    <input type="submit" name="submit" value="Upload" />
</form> 
```

**PHP**

```
if(sizeof($_FILES)){        
    for($i = 0; $i < 3; $i++) {
        $name       = $_FILES['file']['name'][$i];
        $type       = $_FILES['file']['type'][$i];
        $tmp_name   = $_FILES['file']['tmp_name'][$i];
        $error     = $_FILES['file']['error'][$i];
        $size       = $_FILES['file']['size'][$i];

        if(empty($name)) continue; # skip for empty element

        $allowedExts = array("jpg", "jpeg", "gif", "png");
        $extension = end(explode(".", $name));
        if ((  ($type == "image/gif")
            || ($type == "image/jpeg")
            || ($type == "image/png")
            || ($type == "image/pjpeg"))
            && $size < 20000
            && in_array(strtolower($extension), $allowedExts) )
          {
          if ($error > 0)
            {
            echo "Return Code: " .$error . "<br>";
            }
          else
            {               
            if (file_exists("upload/" . $name))
              {
              echo $aFile["file"]["name"] . " already exists. ";
              }
            else
              {
              move_uploaded_file($tmp_name,
              "upload/" . date('U')."-".$name); 
              echo "Image Uploaded Successfully";
              }
            }
          }
        else
          {
          echo "Invalid file";      
        }       
    }
} 
```

**学分：**

*   文件扩展名应使用 [strtolower()](http://php.net/manual/en/function.strtolower.php)检查小写。
*   如果使用`<label for="some_id">`，则可以在各自的 HTML 元素中具有相同的 ID 属性，例如`<input type="file" name="..." id="some_id" />`. 点击标签时，会触发元素的**onclick事件。**

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-18T17:07:06.600

文件大小以字节表示。

条件之一是文件大小限制检查：`($aFile["file"]["size"] < 20000)`

这将文件大小限制降低到 20 KB。

您可能只是超出了该限制。

检查您上传的文件的大小。

**更新**

这是提交三个上传字段时文件结构的样子：

```
array (size=1)
  'file' => 
    array (size=5)
     'name' => 
        array (size=3)
          1 => string 'all_products (6).csv' (length=20)
          2 => string 'pricero (3).csv' (length=15)
          3 => string 'pricero.csv' (length=11)
      'type' => 
        array (size=3)
          1 => string 'application/octet-stream' (length=24)
          2 => string 'application/octet-stream' (length=24)
          3 => string 'application/octet-stream' (length=24)
      'tmp_name' => 
        array (size=3)
          1 => string 'E:\server\wamp\tmp\phpEF79.tmp' (length=30)
          2 => string 'E:\server\wamp\tmp\phpEF7A.tmp' (length=30)
          3 => string 'E:\server\wamp\tmp\phpEF7B.tmp' (length=30)
      'error' => 
        array (size=3)
          1 => int 0
          2 => int 0
          3 => int 0
      'size' => 
        array (size=3)
          1 => int 29702
          2 => int 23095
          3 => int 23095 
```

你的`$aFile`变量有问题。我试图运行你的脚本并得到错误（未定义的索引等）。

# php - 如何使用活动记录插入多个表

> ID：13937698
> 
> 赞同：0
> 
> 时间：2012-12-18T16:49:53.397
> 
> 标签：php, database, codeigniter

我想将一些值添加到多个表中，但现在我的代码不是那么好。我已经注释掉了想要添加到哪些表中的值。

名为 Add_employee 的控制器

```
public function addemp() 
{   
    //id like to add this to 'employees'
    $data1 = array( 
    'emp_no' => $this->input->post('emp_no'),
    'birth_date' => $this->input->post('birth_date'),
    'first_name' => $this->input->post('first_name'),
    'last_name' => $this->input->post('last_name'),
    'gender' => $this->input->post('gender'),
    'hire_date' => $this->input->post('hire_date'),
    );

    //idd like to add this to 'titles'
    $data2 = array(
    'emp_no' => $this->input->post('emp_no'),
    'title' => $this->input->post('title')
    );

    //idd like to add this to 'dept_emp' and id like to add value 'emp_no' to the table 'salaries'
    $data3 = array(
    'emp_no' => $this->input->post('emp_no'),
    'dept' => $this->input->post('dept')
    );

    $mdata ['m1'] = $data1;
    $mdata ['m2'] = $data2;
    $mdata ['m3'] = $data3;

    $this->add_model->adddata($mdata);
    $this->load->view('add_view', $data1);
} 
```

名为 Add_model 的模型

```
public function adddata($data) {

    //extract();
    $this->db->insert('employees', $m1);
    $this->db->insert('titles', $m2);
    $this->db->insert('dept_emp', $m3);
    //$this->db->insert('salaries', $emp_no);//$emp_no => 'emp_no');

    return;
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-18T17:21:40.317

你可以试试这个

## 在控制器中

```
public function addemp() 
{
    $data1 = array(...);
    $data2 = array(...);
    $data3 = array(...);

    $mdata['employees'] = $data1;
    $mdata['titles'] = $data2;
    $mdata['dept_emp'] = $data3;

    $this->load->model('add_model'); // If not auto loaded then load it first
    if($this->add_model->adddata($mdata))
    {
        // do something after successful insert
    }
    else
    {
        // something went wrong, all not inserted
    }
} 
```

## 在模型中

```
public function adddata($data) {
    $inserted=0;
    foreach($data as $k=>$v) $inserted+=(int)$this->db->insert($k, $data[$k]);
    if($inserted===count($data)) return true; // all inserted
    return false; // all not inserted
} 
```

# deployment - F# 编译/部署

> ID：13937713
> 
> 赞同：3
> 
> 时间：2012-12-18T16:50:33.650
> 
> 标签：deployment, f#, compilation

我有一个依赖于 Microsoft Office Excel 互操作的库 A。

然后我有一个依赖于应用程序 A 的应用程序 B。

如何设置 Visual Studio 以便轻松部署我的应用程序？

我尝试在属性选项卡中使用 --standalone 标志。但我最终得到了几个 dll，包括 FSharp.Core.dll（因此它没有“包含”在应用程序中）和 A.dll

但无论我是否使用--standalone，应用程序输出文件夹中都没有Excel interop dll。问题是：如何部署应用程序以确保每个人都有 Excel 互操作 dll？

我尝试将 dll 复制/粘贴到应用程序文件夹，但没有用...

谢谢你的帮助

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-18T19:52:43.763

您应该能够在解决方案资源管理器中转到`Microsoft.Office.Interop.Excel`项目 A 中引用的属性并将“复制本地”设置为**True**。

然后 B 的构建过程应该通过 A 中引用的互操作库自动复制。我认为这也应该适用`--standalone`，但我还没有测试过。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-19T12:01:46.503

显然，这更多地与我们计算机之间的 excel 版本差异有关。然而，复制本地是必要的，因此检查。非常感谢你的帮助。

# android - 错误显示日期

> ID：13937714
> 
> 赞同：0
> 
> 时间：2012-12-18T16:50:37.160
> 
> 标签：android

我想在我的活动中获取日期并显示我今天执行此代码但工作错误

```
 private int mYear;
        private int mMonth;
        private int mDay;
String Date
        final Calendar c = Calendar.getInstance();
                    mYear = c.get(Calendar.YEAR);
                    mMonth = c.get(Calendar.MONTH);
                    mDay = c.get(Calendar.DAY_OF_MONTH);
                    Date = mDay + "-" + mMonth + "-" + mYear; 
```

它显示`18-11-2012` 这是错误的，但它让我感到困惑，即使月份是 12，为什么月份显示 11 有什么问题？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-18T16:56:25.310

```
c.get(Calendar.MONTH); 
```

返回月份的索引（即一月为 0）。所以没什么错，这就是 API ......

**编辑**

```
String date = mDay + "-" + (mMonth+1) + "-" + mYear; 
```

将正确显示日期。

请注意，Java API 提供[DateFormat](http://docs.oracle.com/javase/7/docs/api/java/text/DateFormat.html) API 以各种格式显示日期（取决于用户的语言环境）。使用它通常是更好的选择。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-18T16:57:25.360

在 Java 中，mounths 的数量从 0 开始

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-19T01:20:23.057

这是一种方法，使用 Calendar 和 SimpleDateFormat 可以根据需要轻松格式化输出。

```
 Calendar myCalendar = new GregorianCalendar();
    SimpleDateFormat formatter = new SimpleDateFormat("dd-MM-yyyy", Locale.getDefault());
    formatter.setCalendar(myCalendar);
    String dateString = formatter.format(myCalendar.getTime()); 
```

输出：
`19-12-2012`

# java - JDBC 对象列表 IndexOutOfBounds

> ID：13937715
> 
> 赞同：1
> 
> 时间：2012-12-18T16:50:43.540
> 
> 标签：java, jdbc

我想要做的是我希望能够从多个 JDBC 对象中提取字段，以便我可以使用它来专门为客户端命名文件夹，我添加了每个必需对象的实例来检索数据以命名客户端文件夹以及要进入该文件夹的文件以及需要进入该文件的数据

这是我遇到问题的代码

```
java.util.List<TransactionItemBean> transactionItems = transactionItemDAO.findAllForTransaction(transactionNo);
java.util.List<TransactionBean> transactions = transactionDAO.findAll();
java.util.List<BuyerBean> buyers = buyerDAO.findAll();
java.util.List<VehicleBean> vehicles = vehicleDAO.findAll();
    for (int i = 0; i <transactionItems.size(); i++) {
        String client = buyers.get(transactions.get(transactionNo-1).getBuyerId()).getSurname_organization();
        String vehiclePlate = vehicles.get(transactionItems.get(i).getVehicleId()).getPlate_no();
        String vehicleMake = vehicles.get(transactionItems.get(i).getVehicleId()).getMake();
        String vehicleModel = vehicles.get(transactionItems.get(i).getVehicleId()).getModel(); 
```

从我所看到的看来，这个问题似乎是由嵌套的 JDBC 对象引起的，但我不确定如何解决这个问题

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-18T16:56:38.240

当您从列表中获取项目时，它是通过列表索引。那是：

```
 buyers.get(i) 
```

将从买家列表中返回第 i 个项目。您将买方 ID 作为索引传递。此 id 可能与列表中买方对象的索引不对应。假设您有 100 个买家，其中一个的 id 为 230。那么您实际上将尝试从只有 100 件商品的列表中获取第 230 件商品。因此出现 IndexOutOfBoundsException。

这似乎是您访问所有列表的方式的问题。看来您需要实施某种方式来搜索您的列表。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-18T17:04:55.790

文森特·拉姆达尼是对的。

您可以使用地图来存储您的车辆，而不是使用列表。

地图存储键值对。transactionItems.get(i).getVehicleId() 将是您的地图键，而 VehilceBean 将是您的值。

# ocaml - OCaml中的函子设计

> ID：13937717
> 
> 赞同：5
> 
> 时间：2012-12-18T16:50:45.283
> 
> 标签：ocaml, functor

我已经定义了 2 个模块，`Zone`并且是需要调用函数的原因函数列表：`Zones``Zones``Zone``Zones``Zone`

```
module Zone = struct
 type t = 
 { ...
   prop: bool }
 ...
end

modules Zones = struct
  type t =
  | ZSbot
  | ZS of Zone.t list
  | ZStop
  ...
end 
```

原则文件`all.ml`使用`Zones`和`Mis`模块， `mis.ml`包含适用于两者的函数`Zone.t`，`Zones.t`例如`val Mis.make : Zone.t -> Zones.t`.

```
open Zones
open Mis
type t = { zs: Zones.t }
...
Mis.make z 
```

现在，我想为`prop`of提供更多选择`Zone`。所以我定义了一个接口和 2个`PROPERTY`模块`Type`并`Formula`匹配它，这样我就可以为. 现在我可以想象新的几种可能性：`Zone``... prop: Property.t ...``all.ml`

```
(* 1 *)
open Zones
module ZonesType = ZonesFun(Type)
module ZonesFormula = ZonesFun(Formula)
type t = { zstype: ZonesType.t; zsformula: ZonesFormula }

(* 3 *)
open Zones
module ZonesType = ZonesFun(ZoneFun(Type))
module ZonesFormula = ZonesFun(ZoneFun(Formula))
type t = { zstype: ZonesType.t; zsformula: ZonesFormula }

(* 4 *)
open Zones
module ZoneType = ZoneFun(Type)
module ZoneFormula = ZoneFun(Formula)
module ZonesType = ZonesFun(ZoneType)
module ZonesFormula = ZonesFun(ZoneFormula)
type t = { zstype: ZonesType.t; zsformula: ZonesFormula } 
```

`ZonesFun`虽然 3 个选项的和的签名`ZoneFun`不同，但这种实现可以确保`ZoneXXX.t`并且`ZonesXXX.t`是连贯的。现在一个大问题是如何改变`Mis`：

1）如果我制作一个仿函数`MisFun: PROPERTY -> MIS`，并在里面构建`ZoneXXX`and `ZonesXXX`。它无法知道`MisXXX.Zone.t`与`Zone.t`of相同`all.ml`或与of`MisXXX.Zones.t`相同。`Zones.t``all.ml`

2）如果我做一个仿函数`MisFun: Zone -> Zones -> MIS`，它不能知道`MisXXX.Zone.t`并且`MisXXX.Zones.t`是连贯的。

有谁知道如何解决1）和2）？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-18T17:14:17.750

在选项（1）中，您是否`ZoneFun`在里面申请`ZonesFun`？

假设，我认为选择在（1）和（3）/（4）之间（这似乎是相同的）。选择哪一个取决于您是否需要能够访问`Zone`外部创建的模块`ZoneFun`（您需要（4））或不（（1）工作正常）。

**更新回复更新：**

如果我正确理解了您的问题，那么在我看来，它`Mis`也必须成为函子。此外，它的签名可以指定类型，如

```
val make: ZoneFun(X).t -> ZonesFun(X).t 
```

`X`函子参数在哪里。

（顺便说一句，我仍然认为（3）和（4）之间没有区别，除了你命名了辅助模块。）

**更新 2：**

我的猜测是，您在 OCaml 的模块类型检查器中遇到了一个古老而不幸的错误（请参阅[caml list 上的讨论](https://groups.google.com/forum/?fromgroups=#!searchin/fa.caml/dreyer/fa.caml/nhwBGaOhRRU/pXTGt8Ex7RoJ)）。以下*应该可以*工作，但不能：

```
module type PROP = sig type t end
module type ZONE = sig type t end
module MakeZone (P : PROP) = struct type t = {p : P.t} end
module MakeZones (Z : ZONE) = struct type t = ZS of Z.t list end

module MakeMisc (P : PROP) :
sig
  val make : MakeZone(P).t -> MakeZones(MakeZone(P)).t
end =
struct
  module Zone = MakeZone(P)
  module Zones = MakeZones(Zone)
  let make z = Zones.ZS [z]
end

module Type = struct type t = T end
module Formula = struct type t = F end
module ZoneType = MakeZone(Type)
module ZoneFormula = MakeZone(Formula)
module ZonesType = MakeZones(ZoneType)
module ZonesFormula = MakeZones(ZoneFormula)
module MiscType = MakeMisc(Type)
module MiscFormula = MakeMisc(Formula)
let zst = MiscType.make {ZoneType.p = Type.T}
let zsf = MiscFormula.make {ZoneFormula.p = Formula.F} 
```

`MakeMisc`您可以通过如下方式输入类型注释来强制使其工作：

```
module MakeMisc (P : PROP) :
sig
  val make : MakeZone(P).t -> MakeZones(MakeZone(P)).t
end =
struct
  module Zone : sig type t = MakeZone(P).t end = MakeZone(P)
  module Zones :
    sig type t = MakeZones(MakeZone(P)).t = ZS of MakeZone(P).t list end =
    MakeZones(MakeZone(P))
  let make z = Zones.ZS [z]
end 
```

但显然，这不是很愉快。

但是，无论如何，在 ML 中表达共享的常用方法是通过*fibration*，您可以在签名中抽象地命名要与之共享的类型或模块，并相应地对其进行细化。然后您可以将`Zone`其转换为函子`Zones`的附加参数：`Misc`

```
module type PROP = sig type t end
module type ZONE = sig type prop type t = {p : prop} end
module type ZONES = sig type zone type t = ZS of zone list end
module MakeZone (P : PROP) = struct type prop = P.t type t = {p : prop} end
module MakeZones (Z : ZONE) = struct type zone = Z.t type t = ZS of zone list end

module MakeMisc
  (P : PROP) (Z : ZONE with type prop = P.t) (Zs : ZONES with type zone = Z.t) :
sig
  val make : Z.t -> Zs.t
end =
struct
  let make z = Zs.ZS [z]
end

module Type = struct type t = T end
module Formula = struct type t = F end
module ZoneType = MakeZone(Type)
module ZoneFormula = MakeZone(Formula)
module ZonesType = MakeZones(ZoneType)
module ZonesFormula = MakeZones(ZoneFormula)
module MiscType = MakeMisc(Type)(ZoneType)(ZonesType)
module MiscFormula = MakeMisc(Formula)(ZoneFormula)(ZonesFormula)
let zst = MiscType.make {ZoneType.p = Type.T}
let zsf = MiscFormula.make {ZoneFormula.p = Formula.F} 
```

# machine-learning - 如何训练只有正面和中性数据的分类器？

> ID：13937720
> 
> 赞同：25
> 
> 时间：2012-12-18T16:50:49.050
> 
> 标签：machine-learning, nlp, recommendation-engine

我的问题：如何训练只有正面和中性数据的分类器？

我正在建立一个用于教育目的的个性化文章推荐系统。我使用的数据来自 Instapaper。

**数据集**

我只有正面数据： - 我已阅读并“喜欢”的文章，无论已读/未读状态如何

和中性数据（因为我已经表达了对它的兴趣，但我以后可能不喜欢它）： - 未读的文章 - 我已阅读并标记为已读但我没有“喜欢”它的文章

我没有的数据是负面数据： - 我没有发送到 Instapaper 稍后阅读的文章（我不感兴趣，虽然我浏览过那个页面/文章） - 我什至可能没有点击过的文章，但是我可能有也可能没有存档。

**我的问题**

在这样的问题中，负数据基本上是缺失的。我想到了以下解决方案，但尚未解决：

1）给分类器喂一些负数数据优点：直接负数数据教分类器缺点：随着我喜欢的文章数量增加，负数数据对分类器的影响减弱

2）将“中性”数据转换为负面数据 优点：现在我拥有我需要的所有正面和（新）负面数据 缺点：尽管我对中性数据感兴趣，但我仍然希望获得有关此类的建议文章，但也许​​作为一个价值较低的类别。

* * *

## 回答 #1

> 赞同：17
> 
> 时间：2012-12-18T22:45:42.870

[Spy EM 算法](http://www.cs.uic.edu/~liub/S-EM/unlabelled.pdf)正好解决了这个问题。

> S-EM 是一种文本学习或分类系统，它从一组正样本和未标记样本（无负样本）中学习。它基于“间谍”技术、朴素贝叶斯和 EM 算法。

基本的想法是把你的肯定集与一大堆随机文档结合起来，其中一些你保留了下来。您最初将所有随机文档视为负类，并在该集合上学习一个朴素贝叶斯分类器。现在，其中一些爬网文档实际上是正面的，您可以保守地重新标记任何得分高于最低得分的文档，这些文档是真正的正面文档。然后你迭代这个过程，直到它稳定。

* * *

## 回答 #2

> 赞同：9
> 
> 时间：2013-02-15T00:32:48.330

如果你有很多来自不同用户的积极反馈，那么你就有了一个相当典型的协同过滤场景。

以下是一些 CF 解决方案：

*   kNN（基于用户或基于项目），例如使用余弦相似度
*   一种矩阵分解方法（两篇论文都有相似的想法）
    *   Y. Hu、Y. Koren、C. Volinsky：隐式反馈数据集的协同过滤。ICDM 2008。[http://research.yahoo.net/files/HuKorenVolinsky-ICDM08.pdf](http://research.yahoo.net/files/HuKorenVolinsky-ICDM08.pdf)
    *   R. Pan、Y. Zhou、B. Cao、NN Liu、RM Lukose、M. Scholz、Q. Yang：一类协同过滤，ICDM 2008。[http://www.hpl.hp.com/techreports/2008/HPL-2008-48R1.pdf](http://www.hpl.hp.com/techreports/2008/HPL-2008-48R1.pdf)
    *   两篇论文都使用类似 ALS 的学习算法；当然，您也可以使用 SGD 从负面/未观察到的示例中进行采样
*   另一种矩阵分解方法（免责声明：我是本文的合著者）
    *   Steffen Rendle、Christoph Freudenthaler、Zeno Gantner、Lars Schmidt-Thieme：BPR：来自隐式反馈的贝叶斯个性化排名。阿拉伯联合酋长国 2009。[http://www.ismll.uni-hildesheim.de/pub/pdfs/Rendle_et_al2009-Bayesian_Personalized_Ranking.pdf](http://www.ismll.uni-hildesheim.de/pub/pdfs/Rendle_et_al2009-Bayesian_Personalized_Ranking.pdf)

这些算法存在公开可用的实现，例如

*   MyMediaLite（免责声明：主要作者），[http ://mymedialite.net](http://mymedialite.net)
*   Apache Mahout（免责声明：粉丝和补丁贡献者），[http://mahout.apache.org](http://mahout.apache.org)
*   GraphLab/GraphChi，[http ://graphlab.org/](http://graphlab.org/)

顺便说一句，如果您对此类问题使用分类器，请查看有关仅积极学习的文献，例如[http://users.csc.tntech.edu/~weberle/Fall2008/CSC6910/Papers/posonly.pdf](http://users.csc.tntech.edu/~weberle/Fall2008/CSC6910/Papers/posonly.pdf)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2014-06-27T20:37:18.253

这显然是一篇旧帖子，但我有一个类似的问题，希望您可以使用以下技术找到自己的信息来节省一些时间：

*   [使用支持向量机的基于正例的学习](http://www.cs.uiuc.edu/~hanj/pdf/kdd02svm.pdf)
*   [支持向量数据描述](http://mediamatica.ewi.tudelft.nl/sites/default/files/ML_SVDD_04.pdf)
*   [使用支持向量机的一类学习](http://machinelearning.wustl.edu/mlpapers/paper_files/ManevitzY01.pdf)

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2014-11-13T14:41:17.343

正如[这里](http://rvlasveld.github.io/blog/2013/07/12/introduction-to-one-class-support-vector-machines/)所解释的，您可以使用[LibSvm](http://www.csie.ntu.edu.tw/~cjlin/libsvm/)，特别是选项 one-class SVM。

希望能帮助到你！

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-12-18T17:06:53.697

你想要做的更多的是[推荐系统](http://en.wikipedia.org/wiki/Recommender_system)而不是我认为的分类器。

最先进的是使用每篇文章的内容并创建一个[词袋](http://en.wikipedia.org/wiki/Bag-of-words_model)。从这里您可以计算不同文章的距离。具有相似性的文章（使用聚类或相似性，如 Pearson、Tanimoto）将是您更可能想要阅读的文章。这是快速获得东西的最简单方法。

当然还有更复杂和准确的方法。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-12-19T15:44:13.380

制作两个二元分类器。

```
1 -> "liked" or not
2 -> "neutral" or not 
```

您还可以选择将它们链接在一起，以避免出现“喜欢”和“中立”的情况。这将允许您对内容进行分类。

正如@ThierryS 的另一个答案所表明的那样，另一种选择是创建一个推荐器，允许您推荐*其他类似用户*已识别为“喜欢”或“中立”的内容，从而利用社交方面的优势。

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2012-12-31T04:02:18.563

如果您想摆脱机器学习示例：TF-IDF 可以为您提供与您喜欢（或查看）的文章相似的文章的加权正面推荐，并且在此用例中非常常见。

更复杂的非学习方法包括用于确定文档相似度的 LSA，但实施起来并不简单，并且 LSA“空间”的构建在没有大量处理能力的情况下不会扩展到数百或数千个文档。

这两个都属于计算语言学领域。

祝你好运！

# sql - SQL 计算每日小时数

> ID：13937722
> 
> 赞同：0
> 
> 时间：2012-12-18T16:50:50.930
> 
> 标签：sql, datetime, formula

我有一个 sql 表，其中有一个名为 LogicalReaderType 的列，该列确定是否有人在当天签入或签出。还有另一列称为 BadgeTime，它是当时的时间戳。我想计算一天工作了多少小时。

两个警告：

1.  有时人们会犯错误并标记出来（完成他们一天的时间）然后在没有标记的情况下回到门口。然后再次标记出来。我希望脚本能够做出最佳猜测或选择最早的一个，然后忽略第二个徽章。
2.  人们确实在第三班工作，所以它需要足够聪明，能够跨越上午 12 点并且知道如何做数学。

这是我将与之合作的一名员工的一周价值 sql 输出的示例：

```
BadgeNumber     LastName    Initials    LogicalReaderType   BadgeTime   EmployeeNumber
153568488433    Doe J   3   41253.32631 54822
153568488433    Doe J   4   41253.68821 54822
153568488433    Doe J   3   41254.3187  54822
153568488433    Doe J   3   41254.31877 54822
153568488433    Doe J   4   41254.72185 54822
153568488433    Doe J   3   41255.32757 54822
153568488433    Doe J   4   41255.58274 54822
153568488433    Doe J   3   41255.6378  54822
153568488433    Doe J   4   41255.71527 54822
153568488433    Doe J   3   41256.31372 54822
153568488433    Doe J   4   41256.55927 54822
153568488433    Doe J   3   41256.56036 54822
153568488433    Doe J   4   41256.69249 54822
153568488433    Doe J   3   41257.3234  54822
153568488433    Doe J   4   41257.37054 54822
153568488433    Doe J   4   41257.69721 54822 
```

作为示例输出，我想要一个像这样的表：

```
In              Out             WorkTime
41253.326308    41253.688206    0.361898
41254.318704                   -41253.318704
41254.318773    41254.721852    0.403079
41255.327569    41255.582743    0.255174
41255.637801    41255.715266    0.077465
41256.313715    41256.559271    0.245556
41256.560359    41256.692488    0.132129
41257.323403    41257.370544    0.047141
                41257.697211    41257.697211 
```

让我知道我是否可以提供更多详细信息。

编辑：添加了一些其他可用的字段。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-18T18:17:10.463

您需要找到与每个出局相关的下一个徽章时间。最常用的方法是使用相关子查询。

一旦有时间，您就可以执行逻辑来获取工作时间。以下查询采用这种方法，并假设工作时间少于 1 天时下班时间有效：

```
select BadgeTime as In,
       (case when NextBadgeTime - BadgetTime < 1 then NextBadgeTime end) as Out,
       (case when NextBadgeTime - BadgetTime < 1 then NextBadgeTime - BadgeTime end) as WorkTime
from (select t.*,
             (select MIN(BadgeTime)
              from t t2
              where t2.BadgeNumber = t.BadgeNumber and
                    t2.LogicalReaderType = 4 and
                    t2.BadgeTime > t.BadgeTime
             ) NextOutTime
      from t
      where LogicalReaderType = 3
     ) t 
```

# selenium - 使用索引选择文本框

> ID：13937729
> 
> 赞同：0
> 
> 时间：2012-12-18T16:51:07.380
> 
> 标签：selenium, selenium-rc, selenium-webdriver, selenium-ide

下面是我的代码

```
<TR ID="oldContent"><TD><input type="text" name="code" id="oldContent"></TD></TR>
<TR ID="oldContent"><TD><input type="text" name="code"  id="oldContent"></TD></TR> 
```

这里没有文本框具有相同的名称、ID 和类型。我无法在这些文本框中输入数据

我已经尝试过以下

```
selenium.type("xpath=//input[1][@name='code']",87767);
selenium.type("xpath=//input[2][@name='code']",67458);

selenium.type("xpath=//input[1][@name='code' and @type='text']",87767);
selenium.type("xpath=//input[2][@name='code' and @type='text']",67458);

selenium.type("xpath=//input[@name='code' and @type='text'][1]",87767);
selenium.type("xpath=//input[@name='code' and @type='text'][2]",67458); 
```

没有工作。任何人都可以帮助我找到它的 xpath 吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-20T19:50:30.773

试试这个 xpath： //tr[@id='oldContent'][1]//input[@name='code']

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-19T06:27:56.583

假设您的 HTML 是这样的：

```
<table id="someId">
  <tr id="oldContent">
    <td>
      <input type="text" name="code" id="oldContent" />
    </td>
  </tr>
  <tr id="oldContent">
    <tr>
      <input type="text" name="code"  id="oldContent" />
    </td>
  </tr>
</table> 
```

你会使用：

```
selenium.type("css=table#someId > tr#oldContent:nth-child('1') input[type='text']",87767);
selenium.type("css=table#someId > tr#oldContent:nth-child('2') input[type='text']",67458); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-27T11:26:38.440

尝试使用dom而不是x-path，它会简单得多。

# css - 重叠的 div，以及 chrome、firefox 和 ie 8 中奇怪的 jqGrid 行为

> ID：13937730
> 
> 赞同：0
> 
> 时间：2012-12-18T16:51:12.543
> 
> 标签：css, jqgrid, html

我不是一个 css 人，我已经尝试过自己调试这个问题，但我似乎无法弄清楚如何解决我的问题。我有包含两个 div 的 jqUI 模态窗口。一个 div 保存搜索字段，另一个保存包含结果的 jqGrid。第一个网格里面有 jquery UI 选项卡。第一个 div 似乎表现良好，但第二个 div 似乎与 IE 8、firefox 和 chrome 中的第一个 div 重叠。

我有两个 div 的课程... float-left 和 main-content。在 IE9 中它看起来有点像这样...... ![浮动 Div 概率](../Images/92b04fce50cc37dbf32641e03e4569b9.png)

在我在其他浏览器中测试我的网站之前，我什至没有意识到这是一个问题（我知道大错特错，我应该在 firefox 或 Chrome 中开发。经验教训）。无论如何，**在 IE 9 上它看起来**像这样......

![看起来不错的格子](../Images/1484ceaa89bb112cf47283a2acdd3efb.png)

这就是我期望的样子。所以我显然在不同的浏览器中遇到了一些 css 重叠和行为不同的问题。我相信我在适当的 css 文件中隔离了适当的行...

我绝对不明白为什么两个 div 一直重叠。我需要弄清楚如何阻止这种情况，但更糟糕的是标题的高度。它似乎从另一个 div 的高度开始排队。它们似乎是相互关联的......如果你看看我打开另一个标签时会发生什么，你可能会明白我的意思......关于我如何解决这个问题的任何想法。如果您有任何见解，那就太好了。正如我所说，我对 CSS 不是很好，但如果你有任何想法，你可能会启动创作过程......

![在此处输入图像描述](../Images/ebbfc90fbc9e81f96d46cd219476b4a3.png)

**更新**

这是我需要正确处理的div...

```
<div id="searchPatient" class="float-left ui-tabs ui-widget ui-widget-content ui-corner-all"> 
```

那将是带有搜索字段的第一个 div 的 div 定义......

那将是第二个 div 的 div 定义。下面有几个 div，其中包括他们的类。下面是每个 css 类中每个 css 的 css（我从 chrome 开发工具中得到它们，所以我可以看到应用了什么，什么没有应用）......

```
.main-content {
background: url("../images/accent.png") no-repeat;
padding-left: 10px;
padding-top: 30px;
}
.content-wrapper {
margin: 0 auto;
max-width: 960px;
}

.ui-widget .ui-widget {
font-size: 1em;
}
.ui-tabs {
position: relative;
padding: .2em;
zoom: 1;
}

.ui-widget .ui-widget {
font-size: 1em;
}
.ui-jqgrid {
position: relative;
font-size: 11px;
}
.ui-corner-all, .ui-corner-bottom, .ui-corner-right, .ui-corner-br {
-moz-border-radius-bottomright: 4px;
-webkit-border-bottom-right-radius: 4px;
-khtml-border-bottom-right-radius: 4px;
border-bottom-right-radius: 4px;
}
.ui-corner-all, .ui-corner-bottom, .ui-corner-left, .ui-corner-bl {
-moz-border-radius-bottomleft: 4px;
-webkit-border-bottom-left-radius: 4px;
-khtml-border-bottom-left-radius: 4px;
border-bottom-left-radius: 4px;
}
.ui-corner-all, .ui-corner-top, .ui-corner-right, .ui-corner-tr {
-moz-border-radius-topright: 4px;
-webkit-border-top-right-radius: 4px;
-khtml-border-top-right-radius: 4px;
border-top-right-radius: 4px;
}
.ui-corner-all, .ui-corner-top, .ui-corner-left, .ui-corner-tl {
-moz-border-radius-topleft: 4px;
-webkit-border-top-left-radius: 4px;
-khtml-border-top-left-radius: 4px;
border-top-left-radius: 4px;
}
.ui-widget-content {
border: 1px solid #AAA;
background: white url(images/ui-bg_flat_75_ffffff_40x100.png) 50% 50% repeat-x;
color: #222;
}
.ui-widget {
font-family: Verdana,Arial,sans-serif;
font-size: 1.1em;
}
div[Attributes Style] {
direction: ltr;
unicode-bidi: embed;
}

.ui-jqgrid .ui-jqgrid-view {
position: relative;
left: 0px;
top: 0px;
padding: .0em;
font-size: 11px;
}

.ui-jqgrid .ui-jqgrid-titlebar {
padding: .3em .2em .2em .3em;
position: relative;
border-left: 0px none;
border-right: 0px none;
border-top: 0px none;
}
.ui-corner-all, .ui-corner-top, .ui-corner-right, .ui-corner-tr {
-moz-border-radius-topright: 4px;
-webkit-border-top-right-radius: 4px;
-khtml-border-top-right-radius: 4px;
border-top-right-radius: 4px;
}
.ui-corner-all, .ui-corner-top, .ui-corner-left, .ui-corner-tl {
-moz-border-radius-topleft: 4px;
-webkit-border-top-left-radius: 4px;
-khtml-border-top-left-radius: 4px;
border-top-left-radius: 4px;
}
.ui-widget-header {
border: 1px solid #671966;
background: #881B6F url(images/ui-bg_highlight-soft_75_881b6f_1x100.png) 50% 50% repeat-x;
color: #671966;
font-weight: bold;
} 
```

好像很多。似乎也可能有很多重叠。我目前正在努力解决这一切。

```
<div id="searchPatient" class="float-left">
</div>
<div class="content-wrapper main-content clear-fix">
    <table id="list" class="scroll"></table>
</div>    
<div id="resultDiv"></div> 
```

我不明白为什么我的代码在发布时会变形。但我确实尝试在类为左浮动的第一个 div 上设置像素。它确实有效，但我仍然需要弄清楚为什么我的 div 重叠以及为什么我的第一个 div 周围的边框消失了。可能是因为我将其设置为固定水平。也许我可以在另一个 div 周围包裹另一个 div 并设置它的高度？

好的...这就是当我将其中一个 div 设置为向左浮动而另一个向右浮动时得到的...

![在此处输入图像描述](../Images/a9a3c72aa0939d90bac82f3308ffa227.png)

像往常一样ie8看起来不错。我怎样才能让它们看起来像在 ie9 示例中一样。

# vb.net - Devexpress 将控件添加到布局面板

> ID：13937733
> 
> 赞同：2
> 
> 时间：2012-12-18T16:51:24.937
> 
> 标签：vb.net, devexpress

我制作了一个文档面板并将其添加到文档组中，我创建了一个 Gridcontrol，但不知道如何将其添加到我创建的面板中

```
 Dim tab As New DocumentPanel
  tab.Name = "name"
  Dim grid As New DevExpress.Xpf.Grid.GridControl
'how to add the grid to the tab?!
  DocumentGroup.Items.Add(tab) 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-18T17:00:05.703

开始了：

```
tab.Content = grid 
```

# javascript - 将 chrome 扩展迁移到清单 2 - 脚本注入

> ID：13937734
> 
> 赞同：0
> 
> 时间：2012-12-18T16:51:26.817
> 
> 标签：javascript, google-chrome-extension

我正在尝试将我的 Chrome 扩展迁移到清单 2。当前版本使用一个 background.html 页面，该页面基本上是一个大脚本标签。由于这不再可能，我转而使用 background.js 脚本，经过大量搜索和实验，仍然无法从外部文件注入脚本。在当前版本中，我只使用 document.write 来注入一个脚本标签，该标签将在浏览器加载时运行，但我现在还没有找到方法来执行此操作。

我知道 chrome.tabs.onUpdated.addListener 函数以及使用 XMLHttpRequest 对象为每个选项卡更新注入脚本的能力，但是我要运行的脚本应该只在浏览器加载时才这样做。

当前代码（在 background.html 文件中的脚本标记中）：

```
document.write("<script type='text/javascript' src='" + url + "'></script>"); 
```

在 background.js 文件中，这会导致错误：拒绝加载脚本“http://www.mydomain.com/script.js”，因为它违反了以下内容安全策略指令：“script-src 'self'铬扩展资源：“。

我尝试了各种代码，包括：

```
var s = document.createElement('script');
s.src = chrome.extension.getURL(url);
s.onload = function() {
    this.parentNode.removeChild(this);
};
(document.head||document.documentElement).appendChild(s); 
```

但似乎这仅适用于本地脚本文件，而我需要加载外部在线文件。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-18T18:27:51.710

您得到的错误是由于清单中的指令**content_security_policy**。您需要指定脚本的域作为它的一部分。这是一个jQuery的例子：

```
"content_security_policy": "script-src 'self' https://ajax.googleapis.com; object-src 'self'" 
```

并在 Background.html 页面中

```
<script src="https://ajax.googleapis.com/ajax/libs/jquery/1.8.3/jquery.min.js"></script> 
```

这并没有给我带来任何错误。关于何时下载此脚本，这取决于您的扩展架构，但您可以通过多种方式告诉您的应用程序如何执行此操作。请记住，您的应用程序首先加载的是您的背景页面，因此您可以在加载时从背景页面向您的内容脚本发送一条消息。例子：

```
/**
* Listener for Displaying the Extension Page Action when the Tab is updated.
* @private
* @event displayPageAction
* @param {Number} tabId The tabId given by the tabs listener to know which tab was updated.
* @param {Object} changeInfo The current status of the tab.
* @param {Object} tab The metadata of the tab.
**/
var displayPageAction = function (tabId, changeInfo, tab) {
    var match = regexAIESEC.exec(tab.url); // var regexAIESEC = new RegExp(/http:\/\/www.myaiesec.net\//);
    // We only display the Page Action if we are inside a MyAIESEC Tab.
    if(match && changeInfo.status == 'complete') {
        //We send the proper information to the content script to render our app.
         chrome.tabs.sendMessage(tab.id, {load: true}, function(response) {
            if(response) {
                //After successfully getting the response, we show the Page Action Icon.
                chrome.pageAction.show(tab.id);     
            }
        });
    }
}; 
```

这是更新选项卡后何时显示页面操作的示例。在之前的代码中：

```
chrome.tabs.onUpdated.addListener(displayPageAction); 
```

您可以在此处阅读有关 Chrome 扩展程序的内容安全政策的更多信息，并[在](http://developer.chrome.com/extensions/messaging.html)[此处](http://developer.chrome.com/extensions/contentSecurityPolicy.html)阅读有关消息传递的更多信息。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-18T18:15:53.247

a)`document.write("<script type='text/javascript' src='" + url + "'></script>");`无法使用，`background.js`因为您`document`是背景页面的文档。请参阅 [文档](https://developer.chrome.com/extensions/background_pages.html)和[架构](https://developer.chrome.com/extensions/overview.html#arch)

b)`chrome.extension.getURL(url);`检索文件的相对 url，您可以尝试使用[tabs API](https://developer.chrome.com/extensions/tabs.html#method-executeScript)

我能够使用以下代码将[Jquery](https://ajax.googleapis.com/ajax/libs/jquery/1.8/jquery.js)注入任意页面，您是否正确设置了权限？

## 参考

a)[内容脚本](https://developer.chrome.com/extensions/content_scripts.html)

b)[清单版本 2](https://developer.chrome.com/extensions/manifest.html)

c)[选项卡 API](https://developer.chrome.com/extensions/tabs.html)

d)[背景页](https://developer.chrome.com/extensions/background_pages.html)

### 清单.json

```
{
"name":"Script Injection Demo",
"description":"This demonstrates Script Injection",
"version":"1",
"manifest_version":2,
"content_scripts": [
    {
      "matches": ["<all_urls>"],
      "js": ["myscript.js"]
    }
  ]
} 
```

### myscript.js

```
//Creating a Script Tag
var _scriptTag = document.createElement('script');
//Referencing external URL
_scriptTag.src='https://ajax.googleapis.com/ajax/libs/jquery/1.8/jquery.js';
//Appending child
(document.head||document.documentElement).appendChild(_scriptTag); 
```

如果这种注射对您不起作用，请告诉我。

# celery - 芹菜 - 有多少队列？

> ID：13937744
> 
> 赞同：0
> 
> 时间：2012-12-18T16:52:17.043
> 
> 标签：celery

我使用 Celery 和 RabbitMQ 作为代理。

我的项目将包含一些长期运行的连续任务组。上一组任务的输出是下一组任务的输入。

所有工作节点将首先消费第一种类型（组）的任务，然后所有工作人员将依次消费下一种类型的任务，之前的结果作为输入，依此类推。

我的问题是，在 Celery 中，我应该定义多少个队列？所有任务只有 1 个队列？或者我应该为每种类型的任务使用 1 个队列？在这种情况下使用 1 个或更多队列有什么好处？

先感谢您！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-18T16:57:43.050

我会将队列分开，以便有两个。从信息流的角度来看，两个独立的队列更有意义。它还明确表示信息流过这条路径，并且任何一个队列中的所有任务都是相似的。

所以，多队列的好处是任务在逻辑上是相互分离的。使信息流更易于遵循。如果您的任务队列变得相当大，那么考虑到多个队列的设计也会将冗余应用到系统中，因为如果需要，您可以将队列分离到不同的机器上。使用 Celery Routing，您可以分离哪些机器监听哪个队列，并将您的任务分离到各种其他机器。

单个队列的好处是它易于使用且易于设置，但是您失去了对执行任务工作的位置/人员的细粒度控制。而且，从逻辑的角度来看，信息流并不那么清晰。

# .net - 在 VB.NET 中打印到打印机的首选方法是什么？

> ID：13937747
> 
> 赞同：6
> 
> 时间：2012-12-18T16:52:25.670
> 
> 标签：.net, vb.net, visual-studio, printing

一点背景知识：创建一个从数据库输入生成报告和表单的程序。我的一切正常运行，但我似乎无法弄清楚我的打印问题。我尝试了几种打印到打印机的方法，并且我从自定义程序打印的每个文档都略微偏离页面右侧的中心。

我知道这是打印机本身的原因，但是我该如何适应呢？在打印预览中，报告看起来很完美。我需要一些关于哪些方法可以在 VB.NET 中的多个不同打印机上工作的指导。任何帮助是极大的赞赏。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-18T16:56:19.050

不要使用 e.pagebounds 作为边界框，而是尝试使用 e.graphics.VisibleClipBounds。某些打印机驱动程序对 e.pagebounds 有点不可靠，并且 visibleclipbounds 似乎更准确。

例如：

```
Sub printPage(ByVal sender As Object, ByVal e As PrintPageEventArgs)
Dim g As Graphics
g = e.Graphics
g.ResetTransform() 
```

g.VisibleClipBounds 现在是一个应该是最大页面大小的矩形，可用于使文本或图形居中。只需使用 g 作为输出到打印机的图形对象。页面的水平中心是

```
g.VisibleClipBounds.Left + g.VisibleClipBounds.Width / 2 
```

# unit-testing - hadoop mapreduce 作业的最佳单元测试工具/方法

> ID：13937748
> 
> 赞同：7
> 
> 时间：2012-12-18T16:52:25.760
> 
> 标签：unit-testing, hadoop, mapreduce

我是新来的，但需要知道对通过 Apache Hadoop 编写的程序进行单元测试的最佳方法。我知道我们可以用 jUnit 方式为 map 和 reduce 方法中的逻辑编写单元测试用例。我们也可以对涉及的其他逻辑执行相同的操作，但这并不能保证它经过良好测试并且可以在实际运行环境中运行。

我读过关于 MRUnit 的文章，但它似乎也像我上面提到的那样，但以更成熟的方式。但它也不是作为真正的 mapreduce 工作运行的，而是一个模拟的工作。

任何帮助，将不胜感激。

谢谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-18T16:56:39.610

你当然还有其他选择。稍微谷歌搜索，你就会自己得到它。在这里，我为你做到了！

这是我粘贴的文本：http: [//blog.cloudera.com/blog/2009/07/advice-on-qa-testing-your-mapreduce-jobs/](http://blog.cloudera.com/blog/2009/07/advice-on-qa-testing-your-mapreduce-jobs/)

除了使用传统的 jUnit 和 MRUnit，您还有以下选择：

## 本地作业运行器测试——在单个 JVM 中的单个机器上运行 MR 作业

传统的单元测试和 MRUnit 应该可以在早期检测错误，但两者都不会使用 Hadoop 测试您的 MR 作业。本地作业运行器允许您在本地机器上运行 Hadoop，在一个 JVM 中，使 MR 作业在作业失败的情况下更容易调试。

要启用本地作业运行器，请将“mapred.job.tracker”设置为“local”，将“fs.default.name”设置为“file:///some/local/path”（这些是默认值）。

请记住，使用本地作业运行程序时无需启动任何 Hadoop 守护程序。运行*bin/hadoop*将启动一个 JVM 并为你运行你的工作。创建一个新的 hadoop-local.xml 文件（或 mapred-local.xml 和 hdfs-local.xml，如果您使用的是 0.20）可能是有意义的。然后，您可以使用*–config*参数告诉*bin/hadoop*使用哪个配置目录。如果您不想摆弄配置文件，您可以创建一个实现[Tool](http://hadoop.apache.org/common/docs/current/api/org/apache/hadoop/util/Tool.html)并使用[ToolRunner](http://hadoop.apache.org/common/docs/current/api/org/apache/hadoop/util/ToolRunner.html)的类，然后使用*bin/hadoop jar foo.jar com.example.Bar -D mapred.job.tracker=local运行这个类-D fs.default.name=file:/// (args)*，其中*Bar*是工具实现。

要开始使用本地作业运行器在 Hadoop 中测试您的 MR 作业，请创建一个启用本地作业运行器的新配置目录，并像往常一样调用您的作业，记住包含*--config*参数，该参数指向包含您的目录的目录本地配置文件。

*-conf*参数也适用于0.18.3并允许您指定 hadoop-local.xml 文件，而不是使用*–config*指定目录。Hadoop 将愉快地运行这项工作。这种测试形式的困难在于验证作业是否正确运行。注意：在运行作业之前，您必须确保输入文件设置正确并且输出目录不存在。

假设您已成功配置本地作业运行器并运行作业，您将必须验证您的作业是否正确完成。仅仅基于退出代码的成功是不够的。至少，您需要验证作业的输出是否正确。您可能还想扫描*bin/hadoop*的输出以查找异常。您应该创建一个脚本或单元测试来设置前置条件、运行作业、区分实际输出和预期输出以及扫描引发的异常。然后，此脚本或单元测试可以以适当的状态退出，并输出说明作业如何失败的特定消息。

请注意，本地作业运行器有几个限制：仅支持一个减速器，并且[DistributedCache](http://hadoop.apache.org/common/docs/current/api/org/apache/hadoop/filecache/DistributedCache.html)不起作用（[正在修复](https://issues.apache.org/jira/browse/MAPREDUCE-476)）。

## 伪分布式测试——使用守护进程在单台机器上运行 MR 作业

本地作业运行器允许您在单个线程中运行作业。在单线程中运行 MR 作业对调试很有用，但它不能正确模拟运行多个 Hadoop 守护程序（*例如，* NameNode、DataNode、TaskTracker、JobTracker、SecondaryNameNode）的真实集群。伪分布式集群由运行所有 Hadoop 守护进程的单台机器组成。这个集群仍然相对容易管理（虽然比本地作业运行器更难）并且比本地作业运行器更好地测试与 Hadoop 的集成。

要开始使用伪分布式集群在 Hadoop 中测试您的 MR 作业，请遵循上述使用本地作业运行器的建议，但在您的前置条件设置中包括所有 Hadoop 守护程序的配置和启动。然后，要开始您的工作，只需像往常一样使用*bin/hadoop 。*

## 完整的集成测试——在 QA 集群上运行 MR 作业

测试 MR 作业的最彻底但最繁琐的机制可能是在至少由几台机器组成的 QA 集群上运行它们。通过在 QA 集群上运行 MR 作业，您将测试作业的所有方面及其与 Hadoop 的集成。

在 QA 集群上运行作业与本地作业运行器存在许多相同的问题。也就是说，您必须检查作业输出的正确性。您可能还想扫描每次任务尝试产生的*标准输入*和*标准输出*，这需要将这些日志收集到一个中心位置并对其进行 grep。[Scribe](http://blog.cloudera.com/blog/2008/11/02/configuring-and-using-scribe-for-hadoop-log-collection/)是收集日志的有用工具，但根据您的 QA 集群，它可能是多余的。

我们发现，我们的大多数客户都有某种 QA 或开发集群，他们可以在其中部署和测试新作业，尝试更新版本的 Hadoop，并练习将集群从一个 Hadoop 版本升级到另一个版本。如果 Hadoop 是您的生产管道的主要部分，那么创建一个 QA 或开发集群就很有意义，并且在其上重复运行作业将确保对您的作业的更改继续得到彻底的测试。EC2 可能是您的 QA 集群的好主机，因为您可以按需启动和关闭它。如果您有兴趣在 EC2 中创建 QA 集群，请查看我们的测试版[EC2 EBS Hadoop 脚本。](http://www.cloudera.com/hadoop-ec2-ebs-beta)

您应该根据 QA 对您的组织的重要性以及您拥有的资源量来选择 QA 实践。只需使用传统的单元测试框架，MRUnit 和本地作业运行器就可以以简单的方式彻底测试您的 MR 作业，而无需使用太多资源。但是，在 QA 或开发集群上运行作业自然是使用 Hadoop 集群的费用和运营任务全面测试 MR 作业的最佳方式。

# grails - 用于从静态数据初始化域类的 Grails 设计

> ID：13937750
> 
> 赞同：1
> 
> 时间：2012-12-18T16:52:28.487
> 
> 标签：grails, dns, bootstrapping

我有一些数据 stateNames 来实例化对象 Country 的实例。现在，我只有一个国家，但每个国家的 stateNames 应该是不同的。用我的数据实例化 Country 实例的最佳方法是什么？我是 grails 的新手，我会欣赏任何“最佳实践”或常见设计。

我能想到的一种解决方案是使用 BootStrap 将 Country 的美国实例保存到数据库中。这种方法有什么缺点？

另一种解决方案是将数据保存在 web-app 文件夹下的文件中（在 xml 中？）。如果我采用这种方法，Country 的美国实例是否应该由控制器实例化？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-18T17:23:29.940

项目应旨在在签出代码后无需任何设置即可在开发模式下运行。考虑到这一点，`BootStrap.groovy`使用最少的数据集（例如用户帐户或国家名称等静态数据）初始化数据库是一个好地方。

一种常见的模式是检查某些已知实例——例如管理员用户帐户——并在不存在时插入最小数据集。例如：

```
class BootStrap {

    def init = { servletContext ->
        def admin = User.findByUsername('admin')
        if (!admin) {
            // initialize the database by inserting a minimal data set
        }
    }
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-18T17:01:20.130

编写一个接受输入并持久化到 DB 的服务，并根据您的要求从任何地方调用它，无论是引导程序还是控制器。引导带是繁重的好方法。

# php - 如何在 MODX 中配置 404 错误页面？

> ID：13937751
> 
> 赞同：2
> 
> 时间：2012-12-18T16:52:28.167
> 
> 标签：php, modx

```
http://www.example.com/test1
http://www.example.com/test2
http://www.example.com/test3 
```

所有这些都是不存在的页面并重定向到 index.php 页面，搜索引擎将这些链接标记为重复，它们返回 200 ok，如何让它们返回 404 not found？

使用 modX cms

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-12-19T13:31:45.937

默认情况下，如果您没有定义错误页面，MODX 会在找不到与请求匹配的页面时提供主页。

创建一个新资源作为您的 404 页面，然后转到`System > System Settings`，在那里搜索`error_page`并添加您的错误资源的 ID。

然后，MODX 将为“未找到”提供此资源，并自动添加到`HTTP/1.1 404 Not Found`标题中。

*注意：我假设您使用的是 MODX Revolution，但它与 Evolution 非常相似。*

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-18T16:54:08.110

假设您**拥有**这些页面。

```
 header("HTTP/1.1 404 Not Found");
    exit; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-24T18:54:18.180

它可以在系统>系统设置中进行配置。按“错误”键搜索。把你的来源的价值404。

苏尔特！

# firefox - Firefox：当 iframe 高度超过页面高度时，iframe 打印中断

> ID：13937753
> 
> 赞同：3
> 
> 时间：2012-12-18T16:52:40.453
> 
> 标签：firefox, iframe

我在我的 html 页面中使用了 iframe。那个 iframe 高度：2500px。当我使用打印预览时。iframe 仅部分出现在第 1 页上。没有第 2 页 /3 ...页。那只显示一页，其他页面完全空白。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-04-10T12:02:19.173

不幸的是，这是一个已知错误：[错误 113217 - iframe 打印在 iframe 高度大于页面高度时中断](https://bugzilla.mozilla.org/show_bug.cgi?id=113217)

# ruby-on-rails - Rails default_scope 被应用于更新

> ID：13937754
> 
> 赞同：2
> 
> 时间：2012-12-18T16:52:52.717
> 
> 标签：ruby-on-rails, ruby

我在 rails 中使用 default_scope 来吸出任何具有 is_deleted = true 值的东西（任何具有该值的东西都不应显示，但我仍然想将该行保留在数据库中）。但是有一个控制器操作实际上应该取消删除某些内容（设置 is_deleted = false），但它失败了，因为正在应用 default_scope。据我了解，default_scope 仅在选择/创建记录时应用，但在更新时不应用（来源：[http](http://api.rubyonrails.org/classes/ActiveRecord/Scoping/Default/ClassMethods.html) ://api.rubyonrails.org/classes/ActiveRecord/Scopeing/Default/ClassMethods.html ）。

> 在创建/构建记录时也会应用 default_scope。更新记录时不应用它。

我知道我可以使用 .unscoped 方法，但这似乎违反直觉。我误解了文档吗？

**应用程序/模型/post.rb**

```
class Post < ActiveRecord::Base
  default_scope where(:is_deleted => false) 
```

**应用程序/控制器/posts_controller.rb**

```
class PostsController < ApplicationController
def undelete
  @post = Post.update(params[:id], :is_deleted => false)
  render :action => :success if @post.save
end 
```

**错误**

> 找不到 id=1 的帖子 [WHERE "posts"."is_deleted" = 'f']

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-18T17:13:10.720

您提到的文档中的行 ( `The default_scope is also applied while creating/building a record. It is not applied while updating a record.`) - 表示 default_scope 属性应用于构建/创建的所有模型：

在您的情况下，所有新记录的`is_deleted`属性都将设置为 false

但是在更新时，如果您从数据库中获取记录，请更改一个属性（例如`title`），然后调用`save`- 该`is_deleted`属性不会被强制为`false`，因为它发生在创建时。

但是`update`你使用的方法（[你可以在这里查看](http://apidock.com/rails/ActiveRecord/Base/update/class)）只是`find`在内部使用，它总是使用`default_scope`

解决方案就是使用`unscoped`方法

```
class PostsController < ApplicationController
def undelete
  @post = Post.unscoped.update(params[:id], :is_deleted => false)
  render :action => :success if @post.save
end 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-18T17:06:08.007

我认为您对语义很感兴趣。Rails 必须先找到您的记录，然后才能更新它。要让 Rails 找到记录，您需要使用 .unscoped 方法。要查看 Rails 如何应用范围值，您可以：

```
raise Post.find(:id => id, :is_deleted => true).to_sql 
```

您应该会看到如下内容：

```
SELECT * FROM posts WHERE `id`=123 AND `is_deleted` = true AND `is_deleted` = false 
```

.unscoped 方法告诉 Rails 不要应用最后一个条件。Rails 不会跳过默认范围，即使您为同一字段提供了附加条件。

# c# - 使用 HAP（HTML 敏捷包）从页面获取数据

> ID：13937759
> 
> 赞同：1
> 
> 时间：2012-12-18T16:53:06.760
> 
> 标签：c#, .net, .net-4.0, html-agility-pack

[这篇文章](https://stackoverflow.com/questions/13936841/match-table-w-regex)的延续，我正在尝试从 HTML 页面中解析出一些数据。这是 HTML（页面上有更多信息，但这是重要部分）：

```
<table class="integrationteamstats">
<tbody>
<tr>
    <td class="right">
        <span class="mediumtextBlack">Queue:</span>
    </td>
    <td class="left">
        <span class="mediumtextBlack">0</span>
    </td>
    <td class="right">
        <span class="mediumtextBlack">Aban:</span>
    </td>
    <td class="left">
        <span class="mediumtextBlack">0%</span>
    </td>
    <td class="right">
        <span class="mediumtextBlack">Staffed:</span>
    </td>
    <td class="left">
        <span class="mediumtextBlack">0</span>
    </td>
</tr>
<tr>
    <td class="right">
        <span class="mediumtextBlack">Wait:</span>
    </td>
    <td class="left">
        <span class="mediumtextBlack">0:00</span>
    </td>
    <td class="right">
        <span class="mediumtextBlack">Total:</span>
    </td>
    <td class="left">
        <span class="mediumtextBlack">0</span>
    </td>
    <td class="right">
        <span class="mediumtextBlack">On ACD:</span>
    </td>
    <td class="left">
        <span class="mediumtextBlack">0</span>
    </td>
</tr>
</tbody>
</table> 
```

我需要获取 2 条信息：Queue 下面的 td 内的数据和 Wait 下面的 td 内的数据（因此是 Queue 计数和等待时间）。显然，这些数字会经常更新。

我已经到了将 HTML 放入 HtmlDocument 变量的地步。而且我发现了一些类似使用 HtmlNodeCollection 来收集满足特定条件的节点的东西。这基本上是我卡住的地方：

```
HtmlNodeCollection tds = 
    new HtmlNodeCollection(this.html.DocumentNode.ParentNode);
tds = this.html.DocumentNode.SelectNodes("//td");

foreach (HtmlNode td in tds)
{
    /* I want to write:
     * If the last node's value was 'Queue', give me the value of this node.
     * and
     * If the last node's value was 'Wait Time', give me the value of this node.
     */
} 
```

我可以通过 a 完成此操作`foreach`，但我不确定如何访问该值或如何获取下一个值。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-18T18:44:52.803

一般来说，没有必要通过 a`foreach`来获取目标信息非常容易（使用 a`foreach`你必须管理循环的每次迭代的状态，这真的很笨拙）。

首先，你想拿到桌子。过滤`class`属性通常不是一个好主意，因为您可以在 HTML 文档中拥有多个应用了类的元素。如果你有一个`id`属性，那将是理想的。

也就是说，如果这是该类的唯一表，那么您可以使用以下方法获取`table`元素的主体：

```
// Get the table.
HtmlNode tableBody = document.DocumentNode.SelectSingleNode(
    "//table[@class='integrationteamstats']/tbody"); 
```

从那里，您想要获取各个行。由于这些是元素的直接子`tbody`元素，因此您可以通过`ChildNodes`属性按位置获取行，如下所示：

```
HtmlNode queueRow = tableBody.ChildNodes[0];
HtmlNode waitRow = tableBody.ChildNodes[1]; 
```

然后你想要`td`每行中的第二个元素。虽然其中有一个`span`包装内容的标签，但您希望元素中的*所有*文本都是完整的，您可以使用该属性来获取值：`td``InnerText`

```
string queueValue = queueRow.ChildNodes[1].InnerText;
string waitValue = waitRow.ChildNodes[1].InnerText; 
```

注意，这里有复制，所以如果你发现有很多行需要像这样解析，你可能需要将一些逻辑分解到辅助方法中。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-18T19:35:04.773

您也可以使用[CsQuery](http://nuget.org/packages/csquery)来执行此操作。由于它使用熟悉的 CSS 选择器语法和 jQuery 方法，因此它比 HAP 更容易用于更复杂的 DOM 导航。例如：

```
// function to get the text from the cell AFTER the one containing 'text'

string getNextCellText(CQ dom, string text) {
    // find the target cell
    CQ target= dom.Select(".integrationteamstats td:contains(" + text + ")");

    // return the text contents of the next cell
    return target.Next().Text();
}

void Main() {
    var dom = CQ.Create(html);
    string queue = getNextCellText(dom,"Queue");
    string wait = getNextCellText(dom,"Wait:");

    .. do stuff
} 
```

# ruby-on-rails-3.1 - sh: ffmpeg: 在 Heroku 上找不到

> ID：13937763
> 
> 赞同：0
> 
> 时间：2012-12-18T16:53:13.347
> 
> 标签：ruby-on-rails-3.1, ffmpeg, paperclip

我在 Rails 3.1 设置上使用回形针 gem 和 piperclip-ffmpeg。

部署到 Heroku 后，上传视频后出现此错误。

```
sh: ffmpeg: not found on Heroku 
```

我的模特

```
class Video < ActiveRecord::Base

  has_attached_file :asset, :styles => { 
    :medium => { :geometry => "640x480", :format => 'video/mpeg' },
    :thumb => { :geometry => "100x100#", :format => 'jpg', :time => 10 }
  }, :processors => [:ffmpeg]
end 
```

如果 ffmpeg 在 Heroku 上不可用，我会感到惊讶，但这可能是问题所在。

有什么建议么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-18T16:54:40.877

Heroku dynos 上默认没有安装 ffmpeg。请参阅[此项目](https://github.com/dzello/ffmpeg-heroku/)以获取潜在的解决方案。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-10-18T05:45:34.263

在 Heroku 上部署和运行 Thumbd 很简单，但是，目前在其库存形式中，视频缩略图由于内部 ImageMagick 错误而失败。

请按照此处的详细说明进行操作：[https ://github.com/mubeenh/thumbd/commit/1d2b63a7507263db73d7971176c49e0ea4052e9d](https://github.com/mubeenh/thumbd/commit/1d2b63a7507263db73d7971176c49e0ea4052e9d)

# c# - 返回当前属性名称的最佳方法是什么？

> ID：13937764
> 
> 赞同：-1
> 
> 时间：2012-12-18T16:53:20.990
> 
> 标签：c#

此代码显示了一个属性，该属性调用一个方法来获取该属性的名称：

```
public string Foo { get { return MyName(); } }

string MyName([System.Runtime.CompilerServices.CallerMemberName] 
    string propertyName = null)
{
    return propertyName;
} 
```

有没有更好的办法？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-18T17:10:17.170

这可以说是 .Net 4.5 的最佳方式，它取代了以前的 .net 调用，例如

```
NotifyPropertyChanged("CustomerName"); 
```

用户必须对这些信息进行硬编码。现在在 .Net 4.5 中，调用如下所示：

```
NotifyPropertyChanged(); 
```

谢谢

```
void NotifyPropertyChanged([CallerMemberName] string propertyName = null) 
```

请参阅[实施 INotifyPropertyChanged - 是否存在更好的方法？](https://stackoverflow.com/questions/1315621/implementing-inotifypropertychanged-does-a-better-way-exist)对于其他策略。

# java - java.io.StreamCorruptedException：无效的流标头：

> ID：13937767
> 
> 赞同：0
> 
> 时间：2012-12-18T16:53:30.687
> 
> 标签：java, jdbc

当我运行`executeQuery(sqlStr)`（JDBC）并且我的选择选择了一个由`java.sql.PreparedStatement.setBytes( someByteArray )`

我需要以某种方式指定标题吗？

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-19T10:31:18.017

这通常表明存在低级协议错误，例如客户端 jar 对于您要连接的服务器来说太旧了。

# android - 如何在android的自定义通知中实现水平滚动

> ID：13937770
> 
> 赞同：1
> 
> 时间：2012-12-18T16:53:38.947
> 
> 标签：android, android-layout

有没有办法在 Android 的自定义通知中实现水平滚动（例如在 1Tap Quick Bar 应用程序中）？

谢谢

# apache - 使用 Apache 的 OrientDB 反向代理

> ID：13937775
> 
> 赞同：1
> 
> 时间：2012-12-18T16:53:56.090
> 
> 标签：apache, reverse-proxy, orientdb

我正在使用 OrientDB 作为一种 RESTful 方式来来回获取和发布数据到我的 AJAX 应用程序。我现在已经设置了 Apache 来提供 AJAX 应用程序并对 OrientDB RESTful 调用进行反向代理以绕过跨域限制。在大多数情况下，事情很愉快，但对于我的应用程序的一部分，我使用 jsTree (http://www.jstree.com/) 来动态加载树节点，并且由于某些未知的原因，它正在处理所有其他 AJAX 加载的子节点。

在 AJAX 应用程序 http 网络跟踪中，我得到“204 No Content”，在 Apache 日志中我看到：

```
APR does not understand this error code: proxy: pass request body failed
An established connection was aborted by the software in your host machine.  : proxy: error reading status line from remote server 
```

我已经尝试设置超时和保持活动设置，但到目前为止还没有任何帮助。我想象有一些神奇的设置可以让它像以前一样工作，但我还没有发现。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-19T12:54:09.410

阿帕奇错误：

> 代理：从远程服务器读取状态行时出错

意味着在 apache 可以将请求正文发送到 OrientDB 之前，源服务器（在您的情况下为 OrientDB）正在终止与客户端（apache 作为反向代理）建立的 TCP 连接。

当客户端（浏览器）开始向 apache 发出 HTTP 请求但发送请求很慢时，可能会发生这种情况。Apache 打开与 OrientDB 的连接，但 orientdb 由于不活动超时而关闭了连接。此时，会引发错误，并且与broser 的连接返回失败。

尝试提高 OrientDB 中的 HTTP 超时。

# javascript - 计算两条线的交点

> ID：13937782
> 
> 赞同：13
> 
> 时间：2012-12-18T16:54:15.873
> 
> 标签：javascript, linear-algebra, intersection

我已经动态生成了动画线，我想检测一条线何时撞到另一条线。我正在尝试实现一些基本的线性代数来获得线的方程，然后求解 x,y，但结果不稳定。在这一点上，我只用两条线进行测试，这意味着我应该得到一个交点，但我得到了两个。我只是想确保我的数学没问题，我应该在别处寻找问题。

```
function collision(boid1, boid2) {
  var x1 = boid1.initialX, y1 = boid1.initialY, x2 = boid1.x, y2 = boid1.y, x3 = boid2.initialX, y3 = boid2.initialY, x4 = boid2.x, y4 = boid2.y;
  slope1 = (y1 - y2)/(x1 - x2);
  slope2 = (y3 - y4)/(x3- x4);

  if(slope1 != slope2){
    var b1 = getB(slope1,x1,y1);
    var b2 = getB(slope2,x3,y3);

    if(slope2 >= 0){
      u = slope1 - slope2;
    }else{
      u = slope1 + slope2;
    }

    if(b1 >= 0){
      z = b2 - b1;
    }else{
      z = b2 + b1;
    }
    pointX = z / u;
    pointY = (slope1*pointX)+b1;
    pointYOther = (slope2*pointX)+b2;
    console.log("pointx:"+pointX+" pointy:"+pointY+" othery:"+pointYOther);
    context.beginPath();
    context.arc(pointX, pointY, 2, 0, 2 * Math.PI, false);
    context.fillStyle = 'green';
    context.fill();
    context.lineWidth = 1;
    context.strokeStyle = '#003300';
    context.stroke();
  }
  return false;
}

function getB(slope,x,y){
  var y = y, x = x, m = slope;
  a = m*x;
  if(a>=0){
    b = y - a;
  }else{
    b = y + a;
  }
  return b;
} 
```

问题是我得到了两个不同的交点值。应该只有一个，这让我相信我的计算是错误的。是的，x2,y2,x4,y4 都在移动，但它们有一个固定的角​​度，一致的坡度证实了这一点。

* * *

## 回答 #1

> 赞同：22
> 
> 时间：2016-08-16T14:36:59.337

我找到了[Paul Bourke 的一个很好的解决方案](http://paulbourke.net/geometry/pointlineplane/)。在这里，用 JavaScript 实现：

```
function line_intersect(x1, y1, x2, y2, x3, y3, x4, y4)
{
    var ua, ub, denom = (y4 - y3)*(x2 - x1) - (x4 - x3)*(y2 - y1);
    if (denom == 0) {
        return null;
    }
    ua = ((x4 - x3)*(y1 - y3) - (y4 - y3)*(x1 - x3))/denom;
    ub = ((x2 - x1)*(y1 - y3) - (y2 - y1)*(x1 - x3))/denom;
    return {
        x: x1 + ua * (x2 - x1),
        y: y1 + ua * (y2 - y1),
        seg1: ua >= 0 && ua <= 1,
        seg2: ub >= 0 && ub <= 1
    };
} 
```

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2020-02-24T02:16:22.320

对于线段-线段相交，使用[Paul Bourke 的解决方案](http://paulbourke.net/geometry/pointlineplane/javascript.txt)：

```
// line intercept math by Paul Bourke http://paulbourke.net/geometry/pointlineplane/
// Determine the intersection point of two line segments
// Return FALSE if the lines don't intersect
function intersect(x1, y1, x2, y2, x3, y3, x4, y4) {

  // Check if none of the lines are of length 0
    if ((x1 === x2 && y1 === y2) || (x3 === x4 && y3 === y4)) {
        return false
    }

    denominator = ((y4 - y3) * (x2 - x1) - (x4 - x3) * (y2 - y1))

  // Lines are parallel
    if (denominator === 0) {
        return false
    }

    let ua = ((x4 - x3) * (y1 - y3) - (y4 - y3) * (x1 - x3)) / denominator
    let ub = ((x2 - x1) * (y1 - y3) - (y2 - y1) * (x1 - x3)) / denominator

  // is the intersection along the segments
    if (ua < 0 || ua > 1 || ub < 0 || ub > 1) {
        return false
    }

  // Return a object with the x and y coordinates of the intersection
    let x = x1 + ua * (x2 - x1)
    let y = y1 + ua * (y2 - y1)

    return {x, y}
} 
```

对于无限线交叉点，使用[Justin C. Round 的算法](http://jsfiddle.net/justin_c_rounds/Gd2S2/light/)：

```
function checkLineIntersection(line1StartX, line1StartY, line1EndX, line1EndY, line2StartX, line2StartY, line2EndX, line2EndY) {
    // if the lines intersect, the result contains the x and y of the intersection (treating the lines as infinite) and booleans for whether line segment 1 or line segment 2 contain the point
    var denominator, a, b, numerator1, numerator2, result = {
        x: null,
        y: null,
        onLine1: false,
        onLine2: false
    };
    denominator = ((line2EndY - line2StartY) * (line1EndX - line1StartX)) - ((line2EndX - line2StartX) * (line1EndY - line1StartY));
    if (denominator == 0) {
        return result;
    }
    a = line1StartY - line2StartY;
    b = line1StartX - line2StartX;
    numerator1 = ((line2EndX - line2StartX) * a) - ((line2EndY - line2StartY) * b);
    numerator2 = ((line1EndX - line1StartX) * a) - ((line1EndY - line1StartY) * b);
    a = numerator1 / denominator;
    b = numerator2 / denominator;

    // if we cast these lines infinitely in both directions, they intersect here:
    result.x = line1StartX + (a * (line1EndX - line1StartX));
    result.y = line1StartY + (a * (line1EndY - line1StartY));

    // if line1 is a segment and line2 is infinite, they intersect if:
    if (a > 0 && a < 1) {
        result.onLine1 = true;
    }
    // if line2 is a segment and line1 is infinite, they intersect if:
    if (b > 0 && b < 1) {
        result.onLine2 = true;
    }
    // if line1 and line2 are segments, they intersect if both of the above are true
    return result;
}; 
```

* * *

## 回答 #3

> 赞同：6
> 
> 时间：2012-12-18T17:55:50.380

将 'found-x' 插回方程式之一时，您不需要在加/减 y 相交之间交替：

```
(function () {
    window.linear = {
        slope: function (x1, y1, x2, y2) {
            if (x1 == x2) return false;
            return (y1 - y2) / (x1 - x2);
        },
        yInt: function (x1, y1, x2, y2) {
            if (x1 === x2) return y1 === 0 ? 0 : false;
            if (y1 === y2) return y1;
            return y1 - this.slope(x1, y1, x2, y2) * x1 ;
        },
        getXInt: function (x1, y1, x2, y2) {
            var slope;
            if (y1 === y2) return x1 == 0 ? 0 : false;
            if (x1 === x2) return x1;
            return (-1 * ((slope = this.slope(x1, y1, x2, y2)) * x1 - y1)) / slope;
        },
        getIntersection: function (x11, y11, x12, y12, x21, y21, x22, y22) {
            var slope1, slope2, yint1, yint2, intx, inty;
            if (x11 == x21 && y11 == y21) return [x11, y11];
            if (x12 == x22 && y12 == y22) return [x12, y22];

            slope1 = this.slope(x11, y11, x12, y12);
            slope2 = this.slope(x21, y21, x22, y22);
            if (slope1 === slope2) return false;

            yint1 = this.yInt(x11, y11, x12, y12);
            yint2 = this.yInt(x21, y21, x22, y22);
            if (yint1 === yint2) return yint1 === false ? false : [0, yint1];

            if (slope1 === false) return [y21, slope2 * y21 + yint2];
            if (slope2 === false) return [y11, slope1 * y11 + yint1];
            intx = (slope1 * x11 + yint1 - yint2)/ slope2;
            return [intx, slope1 * intx + yint1];
        }
    }
}()); 
```

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2016-12-03T23:32:32.277

您可以执行以下操作；

```
function lineIntersect(a,b){
  a.m = (a[0].y-a[1].y)/(a[0].x-a[1].x);  // slope of line 1
  b.m = (b[0].y-b[1].y)/(b[0].x-b[1].x);  // slope of line 2
  return a.m - b.m < Number.EPSILON ? undefined
                                    : { x: (a.m * a[0].x - b.m*b[0].x + b[0].y - a[0].y) / (a.m - b.m),
                                        y: (a.m*b.m*(b[0].x-a[0].x) + b.m*a[0].y - a.m*b[0].y) / (b.m - a.m)};
}

var line1 = [{x:3, y:3},{x:17, y:8}],
    line2 = [{x:7, y:10},{x:11, y:2}];
console.log(lineIntersect(line1, line2));
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2017-04-23T16:49:01.430

有一个 npm 模块可以做到这一点：**[line-intersect](https://www.npmjs.com/package/line-intersect)**。

使用安装它

```
npm install --save line-intersect 
```

ES6 用法：

```
import { checkIntersection } from "line-intersect";

const result = lineIntersect.checkIntersection(
  line1.start.x, line1.start.y, line1.end.x, line1.end.y,
  line2.start.x, line2.start.y, line2.end.x, line2.end.y
);

result.type  // any of "none", "parallel", "colinear", "intersecting"
result.point // only exists when result.type == 'intersecting' 
```

如果您使用的是打字稿，这里是打字：

```
declare module "line-intersect" {
  export function checkIntersection(
    x1: number, y1: number,
    x2: number, y2: number,
    x3: number, y3: number,
    x4: number, y4: number): {
        type: string,
        point: {x:number, y:number}
    }; 
} 
```

将其放入文件中并在`tsconfig.json`'s`"files"`部分中引用。

# java - 更新对象时错误的删除语句

> ID：13937798
> 
> 赞同：1
> 
> 时间：2012-12-18T16:55:06.567
> 
> 标签：java, hibernate

在我的场景中，我有 2 个表：专辑和图像（关系是一对多的）。

这是简化的映射：

```
<hibernate-mapping>
  <class name="Album" table="album">
    <id name="id" column="album_id" type="int">
        <generator class="sequence">
            <param name="sequence">TestObject_seq</param>
        </generator>
    </id>
    <set name="image" table="image" order-by="orderBy">
        <key column="album_id" />
        <composite-element class="Image">
            <property name="caption" column="caption" type="string"/>
            <property name="path" column="path" type="string"/>
            <property name="orderBy" column="orderBy" type="int"/>
        </composite-element>
    </set>  
    </class>
</hibernate-mapping> 
```

我正在这样做：1\. 在 db 中查找对象，2\. 从集合中删除一些记录，3\. 调用 saveOrUpdate。

```
Album album = dao.getAlbum("Name of album");

Set<Image> imagesToRemove = getImagesToRemove();
album.getImages().removeAll(imagesToRemove);

dao.saveOrUpdate(album);
dao.flushAndClear(); 
```

一切正常，直到表格图像中的某些值为空。例如标题有空值。

在日志中我可以看到：

```
DEBUG SQL:292 - delete from image where album_id=? and caption=? and path=? and orderBy=?
DEBUG AbstractBatcher:343 - preparing statement
DEBUG IntegerType:59 - binding '463' to parameter: 1
DEBUG StringType:52 - binding null to parameter: 2
... 
```

在这种情况下，删除语句不会删除任何记录。

我做错了什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-18T18:30:56.437

实际上，您并没有删除孤儿。当您通过删除实体来更新对象时，它们作为孤儿存在于数据库中。尝试使用这个。

```
<set name="image" table="image" cascade="all-delete-orphan" order-by="orderBy">
    <key column="album_id" ></key>
    <composite-element class="Image">
        <property name="caption" column="caption" type="string"/>
        <property name="path" column="path" type="string"/>
        <property name="orderBy" column="orderBy" type="int"/>
    </composite-element>
 </set> 
```

# c# - 我如何在 oracle 的 sql 段中使用参数两次

> ID：13937801
> 
> 赞同：2
> 
> 时间：2012-12-18T16:55:22.220
> 
> 标签：c#, oracle10g, oledb

嗨，我希望有美好的日子

在 oracle 中，当我在 sql 段中两次使用参数时出现错误

像那样

```
Select OPS$ASY.UNTARTAB.EEA_DOV,OPS$ASY.UNTARTAB.EEA_EOV from OPS$ASY.UNTARTAB

   WHERE OPS$ASY.UNTARTAB.EEA_DOV = :X OR OPS$ASY.UNTARTAB.EEA_EOV = :X 
```

错误是：ORA-01036：非法变量名称/编号

但我使用这个段我没有问题但我需要使用 A 参数两次

```
Select OPS$ASY.UNTARTAB.EEA_DOV,OPS$ASY.UNTARTAB.EEA_EOV from OPS$ASY.UNTARTAB

   WHERE OPS$ASY.UNTARTAB.EEA_DOV = :X OR OPS$ASY.UNTARTAB.EEA_EOV = :Y 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-19T04:33:35.190

我明白我是如何解决这个问题的

我必须添加两个具有相同值的时间参数 x

有美好的一天

# mongodb - MongoDb 数据库与集合

> ID：13937806
> 
> 赞同：19
> 
> 时间：2012-12-18T16:55:33.823
> 
> 标签：mongodb

我正在设计一个使用 MongoDb（64 位版本）的系统来处理大量用户（大约 100,000），每个用户将拥有大量数据（大约 100 万条记录）。

最好的设计策略是什么？

1.  转储单个集合中的所有记录

2.  为每个用户创建一个集合

3.  为每个用户建立一个数据库。

非常感谢，

* * *

## 回答 #1

> 赞同：19
> 
> 时间：2012-12-18T17:11:35.003

因此，您正在查看大约 1000 亿条记录（100 万条记录 * 100,000 个用户）的区域。

处理大量数据的首选方法是创建一个分片集群，将数据拆分到多个服务器上，这些服务器通过 mongo 客户端呈现为单个逻辑单元。

因此，您的问题的答案是将所有记录放在一个分片集合中。

集群所需的分片数量和配置与数据的大小以及读写的数量和分布等其他因素有关。这些问题的答案可能非常适合您的独特情况，因此我不会尝试猜测它们。

我可能会首先确定您有多少分片以及有多少机器可用于在这么多机器的集群上设置和测试系统。根据其性能，您可以决定在集群中是否需要更多或更少的分片

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2012-12-18T20:45:22.960

因此，您正在为 10 万用户寻找总共 100,000,000 条详细记录？

很多人似乎不明白的是，MongoDB 擅长水平扩展。水平扩展通常被归类为跨大型集群中的许多（许多）服务器扩展巨大的单个数据集合。

因此，如果您对公共数据使用单个集合（即一个集合称为一个集合`user`）`detail`，那么您已经适合 MongoDB 的核心目的和构建。

正如其他人所提到的，MongoDB 并不擅长在许多集合中垂直扩展。它一开始就有一个 nssize 限制，即使由于索引大小在现实中*估计*了 12K 初始集合，您的数据库中也可以只有 5K 集合。

因此，每个用户的集合根本不可行。它将违背其核心原则使用 MongoDB。

每个用户拥有一个数据库涉及到相同的问题，也许更多，就像每个用户拥有一个单一的集合一样。

我从来没有遇到过有人无法在优化的设置上将 MongoDB 扩展到数十亿甚至接近 100 亿（或更多），但是，我不明白为什么它不能；毕竟 Facebook 能够使 MySQL 扩展到每个用户的 1000 亿（跨越 32K+ 分片），并且两个数据库之间的分片概念是相似的。

所以这样做的理论和可能性是存在的。这一切都是关于选择正确的模式和分片概念和密钥（以及服务器和网络等等等）。

If you were to witness problems you could go for splitting archive collections, or deleted items away from the main collection but I think that is overkill, instead you want to make sure that MongoDB knows where each segment of your huge dataset is at any given point in time on the master and ensure that this data is always hot, that way queries that don't do a global and scatter OP should be quite fast.

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2012-12-18T17:10:15.517

*关于每个用户的集合：*

默认配置下，MongoDB 限制为 12k 个集合。您可以使用**--nssize**增加它的大小，但它不是无限的。而且您必须将索引计入这 12k 中。（检查 mongo 文档中的“命名空间”概念）。

*关于每个用户的数据库：*

从模型的角度来看，这非常奇怪。对于技术，对 mongo 没有限制，但您可能对文件描述符有限制（来自您的操作系统/设置的限制）。

所以正如@Rohit 所说，最后两个不好。也许你应该更多地解释你的情况。也许您可以将用户分成不同的集合（例如：每个名称的第一个字母等，或公司的每个服务......）。而且，当然使用*sharding*。

编辑：也许 MongoDb 不是您用例的最佳数据库。

# wpf - 如何在 GUI 更新期间防止 WPF 窗口冻结？

> ID：13937811
> 
> 赞同：0
> 
> 时间：2012-12-18T16:55:56.057
> 
> 标签：wpf, wpfdatagrid, inotifypropertychanged, freeze, bindinglist

我有一个包含 1000 行的数据网格。ItemsSource 是一个 CollectionViewSource。我的 CollectionViewSource 的源是一个 BindingList，其中包含我称为 RowTypes 的对象。我的 RowType 对象实现了 INotifyPropertyChanged。每个 RowType 的一个属性大约每两秒更改一次。这意味着我的数据网格的其中一列中的值每两秒更改一次。

我的问题是此更新会影响用户体验。此更新大约需要一秒钟，在此期间用户无法对 GUI 执行任何操作。如果在用户滚动数据网格的记录时发生此更新，滚动将停止（冻结），然后在一秒钟后向前跳转。这让人分心。

有没有办法在更新执行此更新时防止我的窗口冻结？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-18T17:14:13.310

只需在单独的线程（不是 UI 线程）中执行读取操作。WPF 将完美地改变视图上的标量属性。您可以轻松启动新任务：

```
System.Threading.Tasks.Task.Factory.StartNew(() =>
{
    try
    {
        // This method is heavy call - to the DataBase or to the WebService
        ReadData(); 
        // In this method, do the updates of the properties of 
        // your RowType collection. You can do it in previous method.
        UpdateData();
     }
    catch (Exception e)
    {
        // you can log the errors which occurs during data updating
        LogError(e); 
    }
}); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-18T17:01:07.033

确保为您的 DataGrid 启用虚拟化。有了它，它实际上应该只更新屏幕上显示的内容，而不是全部 1000 行。除非我想那里有大量的行，否则这不应该花一秒钟。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-18T19:16:52.350

你试过`DeferRefresh()`吗？

```
var view = CollectionViewSource.GetDefaultView(RowTypesList);
using (view.DeferRefresh())
{
    // perform updates here
} 
```

# python - Python os.rename windowsError

> ID：13937812
> 
> 赞同：3
> 
> 时间：2012-12-18T16:56:00.630
> 
> 标签：python, python-2.7

我有一些代码正在处理以将时间戳添加到 Windows 中文件的开头，但我无法使其正常工作。

```
for root, dirs, files in os.walk('D:\\development\\test'):
    for f in files:
        fullpath = os.path.join(root + os.sep, f)
        print fullpath
        if fullpath.endswith('txt'):
            d = str(mod_date(fullpath))
            dt = d.split()
            newName = str(dt[1]) + '_' + f
            newNameFull = os.path.join(root + os.sep, newName)
            print newNameFull
            os.rename(fullpath, newNameFull) 
```

这将正确打印：

```
fullpath D:\development\test\New Text Document (2).txt
newNameFull D:\development\test\11:44:04.464341_New Text Document (2).txt 
```

但是 os.rename 会给出 windowsError：

```
Traceback (most recent call last):
  File "D:/Python27/Scripts/getTime.py", line 17, in <module>
os.rename(fullpath, newNameFull)
WindowsError: [Error 123] The filename, directory name, or volume label syntax is incorrect 
```

有任何想法吗？我已经尝试了多次 // / \ 的迭代，但找不到合适的。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-12-18T16:59:57.380

Windows 不允许文件名包含`:`字符（驱动器标识符除外）。您需要更改时间戳以使用不同的格式。

[MSDN 参考](http://msdn.microsoft.com/en-us/library/windows/desktop/aa365247%28v=vs.85%29.aspx#naming_conventions)。

# git - git推送到远程后目标目录为空

> ID：13937816
> 
> 赞同：5
> 
> 时间：2012-12-18T16:56:16.250
> 
> 标签：git

我正在尝试创建一个远程 git 存储库（我使用该`--bare`选项进行了初始化）并将一些源文件推送到它。

我有一个本地 git repo 和一个裸远程：

```
ubuntu@ip-LOCAL-IP:~/notebooks$ cat .git/config  
[core]
    repositoryformatversion = 0
    filemode = true
    bare = false
    logallrefupdates = true
[branch "master"]
[remote "nbcsm"]
    url = ssh://ubuntu@ec2-RE-DA-CT-ED.compute1.amazonaws.com/home/ubuntu/notebooks/.git
    fetch = +refs/heads/*:refs/remotes/nbcsm/* 
```

我创建了本地仓库： 1\. `git init` 2\. `git add *.ipynb` 3\. `git commit -m "first import of IPython Notebooks"

然后，我通过使用 vi 编辑 *.ipynb 文件，然后运行`git status`​​. git 确实看到了更改的文件。

但是，当我执行`git push nbcsm master`推送似乎成功但我的远程计算机/实例上的目标目录是空的（即它不包含我试图推送到远程的文件）：

```
ubuntu@ip-LOCAL-IP:~/notebooks$ git push nbcsm master
Enter passphrase for key '/home/ubuntu/.ssh/id_rsa': 
Counting objects: 11, done.
Compressing objects: 100% (9/9), done.
Writing objects: 100% (9/9), 2.49 KiB, done.
Total 9 (delta 5), reused 0 (delta 0)
To ssh://ubuntu@ec2-ec2-RE-DA-CT-ED.amazonaws.com/home/ubuntu/notebooks/.git
7a50f44..295a4fa  master -> master
ubuntu@ip-LOCAL-IP:~/notebooks$ 
```

验证文件不在远程：

```
ubuntu@ip-LOCAL-IP:~/notebooks$ ssh ubuntu@ec2-ec2-RE-DA-CT-ED.compute-1.amazonaws.com
Enter passphrase for key '/home/ubuntu/.ssh/id_rsa': 
Welcome to Ubuntu 12.04 LTS (GNU/Linux 3.2.0-25-virtual x86_64)

* Documentation:  https://help.ubuntu.com/

System information as of Tue Dec 18 16:46:23 UTC 2012

System load:  0.02              Processes:           63
Usage of /:   41.7% of 7.97GB   Users logged in:     0
Memory usage: 12%               IP address for eth0:REMOTE-IP
Swap usage:   0%

Graph this data and manage this system at https://landscape.canonical.com/

Get cloud support with Ubuntu Advantage Cloud Guest
http://www.ubuntu.com/business/services/cloud
*** /dev/xvda1 will be checked for errors at next reboot ***

ubuntu@REMOTE-IP:~$ sudo find /home/ubuntu/ -name "*.ipynb"  
/home/ubuntu/notebooks/Untitled0.ipynb
ubuntu@ip-REMOTE-IP:~$ 
```

本地 repo 中大约有 12 个 *.ipynb 文件没有被推送。我相当确定这是一个概念问题而不是语法问题，但我已经阅读并重新阅读了 O'Reilly Git 书中的远程章节，我很困惑。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-12-18T18:12:05.797

`git push`除非您通过其中一个钩子脚本明确告诉它，否则不会更新远程端的工作目录。通常，如果您在远端签出的分支是您正在推送的分支之一，它会大声抱怨并拒绝推送。但是，可以禁用该警告，允许您推送，但它仍然不会更新工作目录。您可以`git reset --hard HEAD`在远程存储库（或`git checkout master`类似的东西）中运行，也可以设置一个`post-receive`钩子来为您或其他东西做这件事。不过，让远程存储库裸露可能会更好——可能会引入第三个存储库，以便您的开发存储库可以推送到那里，而您的生产存储库可以从中提取。

编辑：好的，现在这是一个不同的问题，因为您提到您的远程存储库是使用`--bare`. 如果您的远程存储库是裸露的，那么您不应该期望以“正常”的方式在那里看到您的文件，因为裸露的存储库没有与之关联的工作目录。相反，您会看到一些通常在非裸存储库中看到的子目录（如`branches`、`hooks`、`info`和）`objects`和`refs`文件（`config`、`description`、`HEAD`） 。`.git`不过，您仍然应该能够运行`git log`其他命令（如`git show HEAD:<some_file>`）来验证您的数据是否存在。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-18T17:08:45.467

> `git status`那个 git 看到文件被改变了。

`git status`应该告诉你没有文件被修改！

```
git status
# On branch master
nothing to commit (working directory clean) 
```

如果它列出了修改过的文件，您需要先添加并提交这些文件*，*然后再推送：

```
git add .
git commit -m "my commit message"
git push -u  nbcsm master 
```

另外，确保并检查在服务器端签出的分支：

```
cd /home/ubuntu/notebooks
git branch 
```

你不应该能够在没有警告的情况下推送到非裸仓库。
但是由于您没有，因此可能会检出另一个分支。

# jquery - 将 div 框排列在另一个 div 框内以灵活适应大小屏幕宽度

> ID：13937817
> 
> 赞同：0
> 
> 时间：2012-12-18T16:56:17.940
> 
> 标签：jquery

我正在尝试创建一个功能，允许用户拖动 div 框，然后使用样式更新数据库，这样当他们回到页面时，它会记住他们的位置并将框放在正确的位置（相对于父 div ）。

我目前有这个工作，但是，如果用户使用 1600 像素的屏幕宽度定位框，然后在他们的 iPad 或较小的屏幕尺寸（例如 1000 像素）上打开页面，那么如果它们的位置太靠近父边界。

我需要一些帮助来弄清楚如何在父级内部排列 div 框，但是当它们转到不同的屏幕尺寸时，它会变得非常灵活，这些框仍然会在那里。

我创建了一个 jsfiddle 来模拟这种情况。

[Jsfiddle 链接](http://jsfiddle.net/VN4hw/)

HTML代码：

```
<div id="dashboard_wrapper">
  <div class="ui-corner-all border_all_grey dashboard_widget drag_drop">
    Box 1
  </div>
  <div class="ui-corner-all border_all_grey dashboard_widget drag_drop">
    Box 2
  </div>               
</div>
<div id="box_positions"></div> 
```

和JS代码：

```
$(".drag_drop, .drag_drop_chart").resizable();
$(".drag_drop, .drag_drop_chart").draggable({
    start: function( event, ui ) {$(this).trigger("click")},
    stop: function ( event, ui ) {
        var position = $(this).position();
        var offset = $(this).offset();
        var top = position.top;
        var left = position.left;
        var max_top = 0;

        if(top < 0){ $(this).css({"top":1}); }
        if(left < 0){ $(this).css({"left":1}); }                                    
        if(top > 800){ $(this).css({"top":800}); }

        $(".drag_drop, .drag_drop_chart").each(function() {
            //Find the box with the largest "top" value
            var x_top = $(this).position().top;
            if(max_top < x_top){ max_top = x_top; }
        });

        var height = max_top + 280;
        $("#dashboard_wrapper").css({"height":height});

        var style = $(this).attr("style");
        var box = $(this).text();
        $("#box_positions").append(box + ": style=" + style + "<br/>");
    }
});

var boxes = $(".drag_drop, .drag_drop_chart");

// Set up click handlers for each box
boxes.click(function() {

    var el = $(this), // The box that was clicked
    max = 0;

    // Find the highest z-index
    boxes.each(function() {
        // Find the current z-index value
        var z = parseInt( $( this ).css( "z-index" ), 10 );
        if ( isNaN(z) ){ z = 1; }

        // Keep either the current max, or the current z-index, whichever is higher
        max = Math.max( max, z );
    });

    // Set the box that was clicked to the highest z-index plus one
    el.css("z-index", max + 1 );
}); 
```

任何帮助和想法将不胜感激。提前致谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-18T17:06:17.693

只需在打开页面时检查当前分辨率。

将位于可见区域之外的任何框向左移动。

检查使用 Box Left Position 和 Box Width。

例如，如果一个 Box 的宽度为 200 像素，左侧为 900 像素，则它在 1100 像素处结束。

如果您现在的分辨率为 1000 像素，则可以将其向左移动（最大屏幕分辨率 - 框的宽度），然后向左移动 = (1000 像素 - 200 像素) = 800 像素。

# java - Java Swing HTML 解析器的方法未按预期工作

> ID：13937820
> 
> 赞同：3
> 
> 时间：2012-12-18T16:56:22.767
> 
> 标签：java, html, swing, parsing

所以我有一个`JTextPane`a`keyListener`并在每次按键后从窗格中获取文本。然后我尝试解析 HTML 标签以使它们具有不同的颜色。

```
public void handleStartTag(HTML.Tag tag, MutableAttributeSet a, int pos)
{   
    if (tag == HTML.Tag.DIV)
    {
        System.out.println("tag Started:" + tag);
        tagFound = true;
    }
}

public void handleEndTag(HTML.Tag tag, int pos)
{
    if (tag == HTML.Tag.DIV)
    {
        System.out.println("tag Ended:" + tag);
        tagFound = false;
    }
} 
```

问题是当我输入

```
<div 
```

即使没有右括号它也会输出

标签开始：div 标签结束：div

当我关闭标签时不应该`handleEndTag()`被调用，例如`</div>`，`handleStartTag()`当我正确结束标签时不应该被调用，如下所示： `<div>`

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-26T16:31:50.697

如果您检查使用的[JavaDoc`DocumentParser`](http://docs.oracle.com/javase/7/docs/api/javax/swing/text/html/parser/DocumentParser.html)`HTMLEditorKit.ParserCallback`

> 这将为所有有效标签**以及隐含但未明确指定的标签发送回调消息。**

你可以检查一下

> 对于隐含的标记，AttributeSet 参数将具有 Boolean.TRUE 值，用于键 HTMLEditorKit.ParserCallback.IMPLIED。

# ruby-on-rails - 自定义 Rails 路线

> ID：13937826
> 
> 赞同：0
> 
> 时间：2012-12-18T16:56:47.003
> 
> 标签：ruby-on-rails, routes

在 routes.rb 我已经声明：

```
resources :photos 
```

如何使用 /admins/photos/new 映射 /photos/new 路线？使用命名空间？

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-18T16:59:41.597

[请参阅Rails 路由指南](http://guides.rubyonrails.org/routing.html#controller-namespaces-and-routing)的第 2.6 章。

> 您可能希望在命名空间下组织控制器组。最常见的情况是，您可以将多个管理控制器分组到一个 Admin:: 命名空间下。您可以将这些控制器放在 app/controllers/admin 目录下，并且可以在路由器中将它们组合在一起：

```
namespace :admin do
  resources :posts, :comments
end 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-18T16:58:58.713

这是正确的。您可以使用：

```
namespace :admin do
  resources :photos
end 
```

# azure - 无法进行记录重定向，因为 azure 网站无法将 IP 地址解析为网站

> ID：13937827
> 
> 赞同：0
> 
> 时间：2012-12-18T16:56:56.347
> 
> 标签：azure, dns, hosting

我创建了一个正常运行的 Azure 网站

[daphine.azurewebsites.net](http://daphine.azurewebsites.net)

这有默认页面。当我 ping 该地址时，我得到了 IP 地址，但 ping 失败并且每次尝试都会超时。

`65.52.128.33`

我的问题是它不会将 IP 解析为 daphine 地址。

我已经购买了一个域，并且我已经设置了所有重定向，`CNAME record`它工作正常，但是`A record`重定向到失败的 IP。

谁能指出我正确的方向？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-18T19:12:10.330

如果您希望 A 记录正常工作，除了简单地 ping CNAME 并使用该 IP 之外，还有更多的事情要做。

首先，您需要设置域验证。这意味着您需要将自定义子域指向验证域，如下所示：

awverify.www.contoso.com > awverify.mysite.azurewebsites.net

完成此操作后，您需要返回门户，打开您的网站并转到配置选项卡，您将能够在其中管理域。管理域对话框将显示可用于 A 记录的 IP。

按照本教程了解更多信息：[为 Windows Azure 网站配置自定义域名](https://www.windowsazure.com/en-us/develop/net/common-tasks/custom-dns-web-site/)

# jquery - 取消选中 ComponentView 中的复选框

> ID：13937829
> 
> 赞同：11
> 
> 时间：2012-12-18T16:57:01.030
> 
> 标签：jquery, events, tridion, tridion-2011

我试图通过 jquery 使用 GUI 扩展中的文档就绪事件取消选中 Tridion 的 ComponentView 中的复选框：

```
$j(document).ready(function(){
    alert("is loaded");
    var field = $j('[type=checkbox][value=Aceptar]')
    field.attr("checked",false);
    console.log("field = " + field.is(':checked'));
    alert("is checked field = " + field.is(':checked'));
}); 
```

问题是“$j(document).ready”上的字段值似乎没有加载到 ComponentView 中。我的警报返回该字段未选中，但是当视图完成加载时复选框被选中。似乎“$j(document).ready”在加载值之前触发。有人知道我应该使用哪个事件吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-20T10:19:52.830

@Adrian Salazar @Sogo 感谢您的帮助，也许我应该使用更好的“prop”而不是“attr”来更改该属性，但问题是一样的，字段仍未加载，所以我无法更改该属性.

@Frank 我尝试使用 "$evt.addEventHandler($display, "start", onDisplayStarted);" 在“ComponentView”显示上，并在我的 GUI 扩展的配置上扩展该视图，但在那个事件中，字段仍然没有加载，每次我尝试访问我的复选框字段时，它都说这是“未定义”。

最后我设法取消选中订阅组件加载事件的复选框：

```
"EventSystem.Subscribe <Component, LoadEventArgs> (OnComponentLoad, EventPhases.Processed);" 
```

正如 Nuno 在这里解释的那样[http://www.tridiondeveloper.com/inheriting-metadata-on-organizational-items#more-1073](http://www.tridiondeveloper.com/inheriting-metadata-on-organizational-items#more-1073)，他在 OrganizationalItem 上使用它，但对组件的工作方式相同。

谢谢你的帮助！！

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-19T10:04:15.533

尝试，

```
field.prop("checked",false); 
```

`field.is(':checked')`工作正常，如果需要，您可以使用它`prop('checked')`来代替。无论如何，如果您要使用 prop()，请确保您的 jquery 版本是 1.6 或更高版本

# delphi - 当 dgRowSelect 设置为 True 时，检测在 TDBGrid 中单击了哪个单元格？

> ID：13937830
> 
> 赞同：6
> 
> 时间：2012-12-18T16:57:02.627
> 
> 标签：delphi, delphi-2010, tdbgrid

在 Delphi 2010 中，有什么方法可以检测`dgRowSelect`设置为 True 时单击了哪个单元格？

通常我会使用`OnCellClick(Column: TColumn)`事件处理程序，但这不能按预期工作。使用`dgRowSelect = False`此过程会传递单击的列，但使用`dgRowSelect = True`此过程会传递第一列，而不管单击了哪一列。

我无法弄清楚调用参数`OnCellClick`传递的代码在哪里`TColumn`，如果我能发现我可能能够解决这个奇怪的行为。

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2012-12-18T17:09:43.317

您可以使用鼠标坐标来获取列。调用后`TDBGrid.MouseCoord`，返回`TGridCoord.X`的包含列号，而`Y`包含行（当然，你已经有了）：

```
procedure TForm1.DBGrid1CellClick(Column: TColumn);
var
  Pt: TPoint;
  Coord: TGridCoord;
  ClickCol: Integer;
begin
  Pt := DBGrid1.ScreenToClient(Mouse.CursorPos);
  Coord := DBGrid1.MouseCoord(Pt.X, Pt.Y);
  ClickCol := Coord.X;
  ShowMessage('You clicked column ' + IntToStr(ClickCol));
end; 
```

`TGridCoord`有关[文档](http://docwiki.embarcadero.com/Libraries/XE3/en/Vcl.Grids.TGridCoord)的更多信息。

[使用我回答您上一个问题](https://stackoverflow.com/a/13829114/62576)时使用的相同应用程序进行了测试。

# php - html标签之间的PHP preg_match图像

> ID：13937834
> 
> 赞同：1
> 
> 时间：2012-12-18T16:57:04.467
> 
> 标签：php, parsing, preg-match

我有一个这样的html模板：

```
 <div class="cont">
    <div class="...">
    <p>...<p>
    <img alt="" class="popup" src="DESIRED IMAGE LINK" style="..." /></p><p>...</p>
    .... 
```

我想在“”标签中提取“DESIRED IMAGE LINK”，目前我正在使用这个：

```
$pattern = '<div class="cont">.*?src=["\']?([^"\']?.*?(png|jpg|jpeg|gif))["\']?/i';
if (preg_match($pattern, $content, $image))
     ..... 
```

但它不起作用，错误是：

```
 warning: preg_match() [function.preg-match]: Unknown modifier '.' 
```

我该如何解决？谢谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-18T17:01:27.597

答案是，不要使用正则表达式。

```
$contents = <<<EOS
<div class="cont">
    <div class="...">
    <p>...<p>
    <img alt="" class="popup" src="DESIRED IMAGE LINK" style="..." /></p><p>...</p>
EOS;

$doc = new DOMDocument;
libxml_use_internal_errors(true);
$doc->loadHTML($contents);
libxml_clear_errors();

$xp = new DOMXPath($doc);

// get first image inside div.cont
foreach($xp->query('//div[@class="cont"]//img[1]') as $node) {
        // output the src attribute
        echo $node->getAttribute('src'), PHP_EOL;
} 
```

参见：[DOMDocument](http://www.php.net/domdocument) [`DOMXPath`](http://www.php.net/domxpath)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-18T17:00:13.807

If you're planning on parsing html try using [DOM](http://php.net/manual/en/book.dom.php) with [xpath](http://php.net/manual/en/simplexmlelement.xpath.php).

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-18T16:58:39.677

`$pattern = '/<div class="cont">.*?src=["\']?([^"\']?.*?(png|jpg|jpeg|gif))["\']?/i`

您缺少前导分隔符`/`。

# javascript - 重新启动浏览器时不会删除没有过期的cookie

> ID：13937835
> 
> 赞同：1
> 
> 时间：2012-12-18T16:57:20.630
> 
> 标签：javascript

我使用此函数在客户端中写入 cookie：

```
createCookie: function(name, value, days) {
    var expires = "";
    if (days) {
        var date = new Date();
        date.setTime(date.getTime() + (days * 24 * 60 * 60 * 1000));
        expires = "; expires=" + date.toGMTString();
    }
    document.cookie = name + "=" + value + expires + "; path=/";
} 
```

我这样设置了一个cookie：

```
createCookie("foo", "1"); // no expiration time 
```

我希望浏览器在关闭时删除这个 cookie，事实上它在大多数时候都是这样工作的。不过我注意到，在 Firefox 中情况并非如此，即使重新启动后 cookie 仍然存在。

我想这取决于一些设置，这些设置允许用户在浏览器关闭时冻结浏览器的状态，以便在重新启动它时，您使用的所有选项卡仍然存在并且正在运行。

有没有人经历过这样的事情？

您可以推荐任何解决方法吗？

干杯

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-18T17:16:56.027

我还没有尝试完全解决这个问题，我确实有一个应该可行的建议，但有一个警告；它不仅会将您的会话限制在浏览器会话中，而且还会限制在特定选项卡上。

您可以做的是将 设置`window.name`为一个随机数，然后将该标识符附加到该会话的 cookie 名称中。读取 cookie 时，仅使用标识符与窗口名称中的标识符匹配的 cookie。 `window.name`之所以选择它，是因为它在刷新和导航中仍然存在。

不是最好的解决方案，但它会抵消你所看到的问题。

此外，如果您需要在 window.name 中存储的不仅仅是该标识符，您可以 json_encode 然后 base64_encode 一个对象以存储更多属性。

# firefox - 多个 Firefox 安装（+ 配置文件）仍然始终执行最新版本

> ID：13937842
> 
> 赞同：1
> 
> 时间：2012-12-18T16:57:50.507
> 
> 标签：firefox, ubuntu, selenium

我很难弄清楚为什么我不能运行不同版本的 Firefox。

我下载了版本 10 和 14 来进行一些测试，并且我还从 Ubuntu 的官方仓库（现在是版本 17）进行了默认安装。

我为不同的安装（ffx10、ffx14）创建了单独的配置文件。

当我尝试运行命令时：

```
firefox-14/firefox-bin -P ffx14 
```

我仍然得到Firefox 17 ......

ps 无法发布屏幕截图...但这里有一个链接:) [https://i.stack.imgur.com/r3c2f.png](https://i.stack.imgur.com/r3c2f.png)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-18T17:21:57.790

Firefox 现在执行自动更新，因此请检查是否禁用，否则所有以前的版本都会自动更新到 FF17。

# java - 如何在 java 中更正此查询，以便访问变量 SequenceId 并从数据库中获取序列的值

> ID：13937845
> 
> 赞同：1
> 
> 时间：2012-12-18T16:57:56.307
> 
> 标签：java, sql, eclipse

我有一条错误提示“ORA-00933：SQL 命令未正确结束”

```
 rs = st.executeQuery("select * from msg_new_to_bde t where t.ACTION = 804 and t.seq > ? order by t.seq desc" + sequenceID); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-18T16:59:50.447

you are concatenating `sequenceID` to you query. its not a valid query.

I think your query should be something like below:

```
 rs = st.executeQuery("select * from msg_new_to_bde t 
      where t.ACTION = 804 and t.seq > ? order by t.seq desc");  
     PreparedStatement.setInt(1,sequenceID );// setting the column using preparedStatement 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-18T16:59:59.613

Try this:

```
rs = st.executeQuery("select * from msg_new_to_bde t where t.ACTION = 804 and t.seq > " + sequenceID + " order by t.seq desc"); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-18T17:16:17.530

尝试将 sequenceID 作为参数传递给准备好的语句。

```
 String query="select * from msg_new_to_bde t where t.ACTION = 804 and t.seq > ? order by t.seq desc"; 
  // int(your datatype) input parameterized.  
  PreparedStatement st = con.prepareStatement(query);  
  st.setInt(1, sequenceID);  
  rs = st.executeQuery(); 
```

# cordova - Phonegap到谷歌播放

> ID：13937847
> 
> 赞同：2
> 
> 时间：2012-12-18T16:58:00.303
> 
> 标签：cordova, mobile

我创建了一个包含 html、css、js 文件的网络应用程序.....

```
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1    /DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head runat="server">
<title>ssssss</title>
<script type="text/javascript" src="js/jquery.js"></script>

</head>
<body>
<div>
    <br />
    <input type="text" id="username" />
    <button onclick="calling()">
        Call ajaxing</button>
        index.html
    <br />
    <span id="hii">see the change here...</span>
    <br />
</div> 
```

现在我使用免费提供的 phonegap 在线打包程序创建了一个 apk。

我可以在 google store 上分享那个 apk，还是我需要先获得一些[许可](http://phonegap.com/support)，然后再去 google play 上发布应用程序。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-18T17:58:01.117

除非您想要他们提供的支持服务，否则您不需要支付 PhoneGap 的任何支持费用。如果您可以提供支持或依赖社区支持，请不要为不需要的东西付费。如果您想要额外的支持承诺，那么您将不得不考虑这对您来说价值多少。

在直接访问 Google Play 之前，请先查看这些链接。您只*需要*完成 Google 要求的步骤，但其他清单的建议将帮助您确保您的应用程序成功。

[http://developer.android.com/distribute/googleplay/publish/register.html](http://developer.android.com/distribute/googleplay/publish/register.html)

[http://developer.android.com/distribute/googleplay/publish/preparing.html](http://developer.android.com/distribute/googleplay/publish/preparing.html)

# ios - NSKeyedUnarchiever 加载行使 App 在启动时崩溃

> ID：13937851
> 
> 赞同：2
> 
> 时间：2012-12-18T16:58:05.493
> 
> 标签：ios, loading, save, nskeyedarchiver

我在使用 NSKeyedUnarchiever 加载对象时遇到问题。
我的对象是一个 NSDictionary，其中包含几个对象，如数组和我自己的一些。它们都符合 NSCoding 协议。

我像这样保存我的对象：

```
[NSKeyedArchiver archiveRootObject:myDictionary toFile:path]; 
```

如果我使用此代码在同一运行中加载对象：

```
myDictionary = [NSKeyedUnarchiver unarchiveObjectWithFile:path]; 
```

一切正常。
但是当我退出应用程序并再次打开它时，它就在这条线上崩溃了。

有谁知道出了什么问题？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-18T17:20:45.093

确保您的保存成功：

```
if (![NSKeyedArchiver archiveRootObject:myDictionary toFile:path])
{
    // saving failed for some reason
    return;
} 
```

在尝试取消归档之前，还要确保文件存在：

```
if ([[NSFileManager defaultManager] fileExistsAtPath:path])
{
    // file does not exist at path (deleted?)
    return;
} 
```

# windows-8 - 如何保证 IXMLHTTPRequest2 回调将在不同的线程上调用？

> ID：13937853
> 
> 赞同：0
> 
> 时间：2012-12-18T16:58:10.167
> 
> 标签：windows-8, microsoft-metro, windows-runtime, winrt-async

我正在使用 IXMLHTTPRequest2/IXMLHTTPRequest2Callback 接口发送 HTTP 请求并处理响应。有时响应回调（OnHeadersAvailable() 等）在与发送请求的线程不同的线程上调用，有时回调在发送请求的同一线程上调用，如下面的调用堆栈所示：

```
my.dll!xxxXMLHTTPRequest2Callback::OnHeadersAvailable(IXMLHTTPRequest2 * pXHR, unsigned long dwStatus, const wchar_t * pwszStatus) Line 185 C++
msxml6.dll!URLMONRequest::_CallOnHeadersAvailable() Line 305    C++
msxml6.dll!URLMONRequest::_OnResponse(unsigned long dwResponseCode, const wchar_t * pwszResponseHeaders, const wchar_t * pwszRequestHeaders) Line 2946  C++
msxml6.dll!URLMONRequest::OnResponse(unsigned long dwResponseCode, const wchar_t * pwszResponseHeaders, const wchar_t * pwszRequestHeaders, wchar_t * * ppwszAdditionalRequestHeaders) Line 2993    C++
msxml6.dll!URLMONRequest::URLMONRequestSink::OnResponse(unsigned long dwResponseCode, const wchar_t * szResponseHeaders, const wchar_t * szRequestHeaders, wchar_t * * pszAdditionalRequestHeaders) Line 212    C++
urlmon.dll!CINetHttp::QueryStatusOnResponseDefault()    Unknown
urlmon.dll!CINetHttp::QueryStatusOnResponse()   Unknown
urlmon.dll!CINetHttp::INetAsyncSendRequest()    Unknown
urlmon.dll!CINetHttp::INetAsyncOpenRequest()    Unknown
urlmon.dll!CINet::INetAsyncConnect()    Unknown
urlmon.dll!CINet::INetAsyncOpen()   Unknown
urlmon.dll!CINet::StartCommon() Unknown
urlmon.dll!CINet::Start()   Unknown
msxml6.dll!URLMONRequest::send(tagVARIANT varBody) Line 838 C++
msxml6.dll!XMLHttp::send(tagVARIANT varBody) Line 549   C++
msxml6.dll!XMLHttp2::_Send(ISequentialStream * pBody, unsigned __int64 cbBody) Line 2440    C++
msxml6.dll!XMLHttp2::Send(ISequentialStream * pBody, unsigned __int64 cbBody) Line 2993 C++ 
```

我希望回调总是在不同的线程上调用，因为这被记录为异步接口。有没有一种方法可以保证始终在与发送请求的线程不同的线程上调用回调？感谢您提供任何信息。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-18T17:00:08.887

“异步”仅仅意味着它不会消耗线程池中的线程，直到有结果可供处理。

如果不编写自己的池管理器，就无法控制异步请求的结果如何分配给给定线程。

您可以让线程接收异步回调队列结果（例如，使用 BlockingCollection）并让您选择的线程将工作项从队列中拉出。这样，即使您无法控制哪个线程接收结果，您也可以控制哪个线程处理结果。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-06-29T01:00:48.657

如果您在应用程序主线程上，默认行为似乎是在当前线程上回调，如果您在后台工作线程上，则使用另一个线程。这是基于我在从主线程发送请求时开始在 Win8 商店应用程序中看到的一些错误。

# java - 使用 LookAR 的增强现实示例

> ID：13937863
> 
> 赞同：3
> 
> 时间：2012-12-18T16:58:34.153
> 
> 标签：java, android, augmented-reality

我正在尝试为 LookAR 框架编译一个示例，但每次我在手机上打开应用程序时都会崩溃。

我正在使用带有 Android SDK 的 Eclipse，并在我的手机中使用 Android 2.3.3 Gingerbread 进行测试。

```
package com.example.turistear;

import es.ucm.look.ar.LookAR;
import es.ucm.look.data.EntityData;
import es.ucm.look.data.LookData;
import android.os.Bundle;

public class MyARActivity extends LookAR {

    public MyARActivity(){
            super(true , true , true , true ,100.0f , true);
    }
@Override
public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);

    EntityData data = new EntityData ( ) ;
    data.setLocation (10 , 0 , 0 ) ;
    LookData.getInstance().getDataHandler().addEntity ( data );
    LookData.getInstance().updateData();

}
} 
```

这是布局（我认为问题出在此处）

```
<RelativeLayout xmlns:android="http://schemas.android.com/apk/res/android"
xmlns:tools="http://schemas.android.com/tools"
android:layout_width="match_parent"
android:layout_height="match_parent"
tools:context=".MyARActivity" >

<TextView
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"
    android:layout_centerHorizontal="true"
    android:layout_centerVertical="true"
    android:text="@string/hello_world" />

</RelativeLayout> 
```

这是清单

```
<?xml version="1.0" encoding="utf-8"?>
<manifest xmlns:android="http://schemas.android.com/apk/res/android"
package="com.example.turistear"
android:versionCode="1"
android:versionName="1.0" >

<uses-sdk
    android:minSdkVersion="9"
    android:targetSdkVersion="10" />
<uses-permission android:name="android.permission.CAMERA"/>

<application
    android:allowBackup="true"
    android:icon="@drawable/ic_launcher"
    android:label="@string/app_name"
    android:theme="@style/AppTheme" >
    <activity
        android:name="com.example.turistear.MyARActivity"
        android:label="@string/app_name" >
        <intent-filter>
            <action android:name="android.intent.action.MAIN" />

            <category android:name="android.intent.category.LAUNCHER" />
        </intent-filter>
    </activity>
</application>

</manifest> 
```

希望你们能帮助我。

谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-05-08T09:01:35.643

将清单中的 minSdkVersion 设置为 7 或更低，并删除 targetSDKVersion（为了更容易实现更高操作系统版本的手机）。应该这样做

# c++ - 使用 TGA 文件对立方体网格的发光/光晕效果

> ID：13937864
> 
> 赞同：1
> 
> 时间：2012-12-18T16:58:35.267
> 
> 标签：c++, opengl, textures, glow, halo

首先，我们（我和我的朋友）正在开展一个计算机图形项目，我们应该在该项目中模拟粒子（在我们的例子中，小立方体 (mesh3d)），这些粒子将在空间环境中相互交互。也就是说，数百个粒子使用物理定律爆炸并相互吸引。

我们的实施基于我们学校提供的框架，因此我们必须“适应”它。

在创建立方体 (mesh3d) 时，我们提供了包含纹理的材质。

```
Mesh3D* 
SolarViewer::
createCube()
{
// initialize Mesh3D
Mesh3D *cube = new Mesh3D();
MeshMaterial* mat = new MeshMaterial; //we create the material for the cube
mat->m_diffuseTexture.create("particle.tga"); //we create the diffuse texture of the material to be particle.tga

// setup uniform cube with side length 0.5 and center of cube being (0,0,0)
std::vector< Vector3 > cubeVertices;
std::vector< Vector3 > cubeNormals;
std::vector< Vector3 > cubeColors;
std::vector< unsigned int > cubeIndices;
float d = 1.0;

// front
cubeVertices.push_back(Vector3(-d,-d, d));
cubeVertices.push_back(Vector3( d,-d, d));
cubeVertices.push_back(Vector3( d, d, d));
cubeVertices.push_back(Vector3(-d, d, d));
for(int k = 0; k < 4; k++) cubeNormals.push_back(Vector3(0,0,1));
for(int k = 0; k < 4; k++) cubeColors.push_back(Vector3(0.8,0.3,0.3));
cubeIndices.push_back(0);
cubeIndices.push_back(1);
cubeIndices.push_back(2);
cubeIndices.push_back(0);
cubeIndices.push_back(2);
cubeIndices.push_back(3);

// right
cubeVertices.push_back(Vector3( d,-d,-d));
cubeVertices.push_back(Vector3( d,-d, d));
cubeVertices.push_back(Vector3( d, d, d));
cubeVertices.push_back(Vector3( d, d,-d));
for(int k = 0; k < 4; k++) cubeNormals.push_back(Vector3(1,0,0));
for(int k = 0; k < 4; k++) cubeColors.push_back(Vector3(0.3,0.8,0.3));
cubeIndices.push_back(4);
cubeIndices.push_back(5);
cubeIndices.push_back(6);
cubeIndices.push_back(4);
cubeIndices.push_back(6);
cubeIndices.push_back(7);

// back
cubeVertices.push_back(Vector3( d,-d,-d));
cubeVertices.push_back(Vector3(-d,-d,-d));
cubeVertices.push_back(Vector3(-d, d,-d));
cubeVertices.push_back(Vector3( d, d,-d));
for(int k = 0; k < 4; k++) cubeNormals.push_back(Vector3(0,0,-1));
for(int k = 0; k < 4; k++) cubeColors.push_back(Vector3(0.3,0.3,0.8));
cubeIndices.push_back(8);
cubeIndices.push_back(9);
cubeIndices.push_back(10);
cubeIndices.push_back(8);
cubeIndices.push_back(10);
cubeIndices.push_back(11);

// left
cubeVertices.push_back(Vector3(-d,-d, d));
cubeVertices.push_back(Vector3(-d,-d,-d));
cubeVertices.push_back(Vector3(-d, d,-d));
cubeVertices.push_back(Vector3(-d, d, d));
for(int k = 0; k < 4; k++) cubeNormals.push_back(Vector3(-1,0,0));
for(int k = 0; k < 4; k++) cubeColors.push_back(Vector3(0.8,0.8,0.3));
cubeIndices.push_back(12);
cubeIndices.push_back(13);
cubeIndices.push_back(14);
cubeIndices.push_back(12);
cubeIndices.push_back(14);
cubeIndices.push_back(15);

// top
cubeVertices.push_back(Vector3(-d, d,-d));
cubeVertices.push_back(Vector3( d, d,-d));
cubeVertices.push_back(Vector3( d, d, d));
cubeVertices.push_back(Vector3(-d, d, d));
for(int k = 0; k < 4; k++) cubeNormals.push_back(Vector3(0,1,0));
for(int k = 0; k < 4; k++) cubeColors.push_back(Vector3(0.8,0.3,0.8));
cubeIndices.push_back(16);
cubeIndices.push_back(17);
cubeIndices.push_back(18);
cubeIndices.push_back(16);
cubeIndices.push_back(18);
cubeIndices.push_back(19);

// bottom
cubeVertices.push_back(Vector3( d,-d,-d));
cubeVertices.push_back(Vector3(-d,-d,-d));
cubeVertices.push_back(Vector3(-d,-d, d));
cubeVertices.push_back(Vector3( d,-d, d));
for(int k = 0; k < 4; k++) cubeNormals.push_back(Vector3(0,-1,0));
for(int k = 0; k < 4; k++) cubeColors.push_back(Vector3(0.3,0.8,0.8));
cubeIndices.push_back(20);
cubeIndices.push_back(21);
cubeIndices.push_back(22);
cubeIndices.push_back(20);
cubeIndices.push_back(22);
cubeIndices.push_back(23);

cube->setIndices(cubeIndices, mat); //we set the cubeIndices and the material for the cube
cube->setVertexPositions(cubeVertices);
cube->setVertexNormals(cubeNormals);
cube->setVertexColors(cubeColors);

    return cube;
} 
```

然后我们在绘制场景方法中遍历所有立方体以绘制它们

```
for (std::vector<Mesh3D*>::iterator mIt = m_meshes.begin(); mIt != m_meshes.end(); ++mIt)
                {
                    Mesh3D* cube =  *mIt;           
                    m_meshShaderTexture.setMatrix4x4Uniform("modelworld", cube->getTransformation());
                   cube->getMaterial(0).m_diffuseTexture.bind();
                   m_meshShaderTexture.setIntUniform("texture", cube->getMaterial(0).m_diffuseTexture.getLayer());
                   draw_object(m_meshShaderTexture, cube);// method called to draw the cube

                } 
```

我们在用于绘制 mesh3d 对象的方法“drawObject”中调用了这条线：

```
 void SolarViewer::draw_object(Shader& sh, Mesh3D *mesh)
{

sh.setMatrix4x4Uniform("modelworld", mesh->getTransformation() );

glEnableClientState(GL_VERTEX_ARRAY);
glEnableClientState(GL_NORMAL_ARRAY);
glEnableClientState(GL_TEXTURE_COORD_ARRAY);

glVertexPointer( 3, GL_DOUBLE, 0, mesh->getVertexPointer() );
glNormalPointer( GL_DOUBLE, 0, mesh->getNormalPointer() );
glTexCoordPointer( 2, GL_DOUBLE, 0, mesh->getUvTextureCoordPointer() );

for(unsigned int i = 0; i < mesh->getNumberOfParts(); i++)
{   
    glDrawElements( GL_TRIANGLES, mesh->getNumberOfFaces()*3, GL_UNSIGNED_INT, mesh->getVertexIndicesPointer() );

}

glDisableClientState(GL_NORMAL_ARRAY);
glDisableClientState(GL_VERTEX_ARRAY);
glDisableClientState(GL_TEXTURE_COORD_ARRAY);

} 
```

但最后，在尝试编译时，以下行给了我们一个 BAD_ACCESS :(

```
glDrawElements( GL_TRIANGLES, mesh->getNumberOfFaces()*3, GL_UNSIGNED_INT, mesh->getVertexIndicesPointer() ); 
```

我们做错了什么？绑定以下纹理（.tga）是否足以产生发光效果？: [http://i166.photobucket.com/albums/u83/j1m68/star.jpg](http://i166.photobucket.com/albums/u83/j1m68/star.jpg)

# css - HTML 编码 - 使用“引号”或“撇号”是否有好处？

> ID：13937870
> 
> 赞同：0
> 
> 时间：2012-12-18T16:58:52.553
> 
> 标签：css, html, web-standards

> **可能重复：**
> [单引号和双引号（' vs "）](https://stackoverflow.com/questions/2373074/single-vs-double-quotes-vs)

我刚刚购买了一个基于 Twitter Bootstrap 构建的 HTML 模板。模板的某些部分用`class='navbar'`而不是编码`class="navbar"`（注意类属性的撇号而不是引号）。

**在引号上使用撇号有好处还是坏处？**

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-18T17:00:20.817

没有。您可以完全免费使用其中任何一个。

两者都存在的原因之一是在 javascript 中使用它们的工作量更少。

```
var lumpOfHTML="<a href='http://google.com'>Link 1</a>";
var anotherLumpOfHTML='<a href="http://google.com">Link 1</a>'; 
```

这两者都会做同样的事情。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-18T17:01:21.273

这是个人喜好。

顺便说一句：在 HTML5 中是否允许不使用引号，例如。 `class=navbar`如果 te 值为 1 个字

# php - PHP流套接字客户端 - 无效的IP地址

> ID：13937871
> 
> 赞同：1
> 
> 时间：2012-12-18T16:58:54.317
> 
> 标签：php, ip, stream-socket-client

我的服务器有多个 IP 地址，我使用此代码将 IP 绑定到流套接字客户端。它工作正常。但有时我收到这个警告：

> stream_socket_client()：IP 地址无效：

我正在使用 PHP 5.3.3 并且我的服务器正在运行 CentOS 5.x

```
 $opts = array(
    'socket' => array(
        'bindto' => '1.1.1.1:0',
    ),
);

// create the context...
$context = stream_context_create($opts);
$fp = @stream_socket_client ( $link, $errno, $errstr, 120, STREAM_CLIENT_CONNECT, $context); 
```

你能告诉我如何避免这个警告。非常感谢！！！

* * *

**更新**

以下评论要求的代码：

```
if (function_exists('stream_context_create')
    && function_exists('stream_socket_client')
) {
    $socket_options = array('socket' => array('bindto' => $ip .':0'));
    $socket_context = stream_context_create($socket_options);
    $this->smtp_conn = stream_socket_client(
        "$host:$port",
        $errno,
        $errstr,
        30,
        STREAM_CLIENT_CONNECT,
        $socket_context
    );
} else {
    $this->smtp_conn = @fsockopen($host, $port, $errno, $errstr, $tval);
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-18T17:02:48.307

那是一个无效的 IP 地址……您还需要一个正确的端口。

如果您要连接到本地计算机，则 IP 将为 127.0.0.1

# c++ - 如何防止可变参数构造函数优于复制构造函数？

> ID：13937873
> 
> 赞同：33
> 
> 时间：2012-12-18T16:58:56.830
> 
> 标签：c++, c++11, copy-constructor, variadic-templates

我有一个模板'Foo'，它拥有一个 T，我希望它有一个可变参数构造函数，将其参数转发给 T 的构造函数：

```
template<typename T>
struct Foo {

    Foo()
        : t() {}

    Foo(const Foo& other)
        : t(other.t) {}

    template<typename ...Args>
    Foo(Args&&... args)
        : t(std::forward<Args>(args)...) {}

    T t;
}; 
```

但是，这会导致 Foo 不可复制：

```
int main(int argc, char* argv[]) {
    Foo<std::shared_ptr<int>> x(new int(42));
    decltype(x) copy_of_x(x);  // FAILS TO COMPILE
    return EXIT_SUCCESS;
} 
```

因为，根据[这个答案](https://stackoverflow.com/questions/2953611 "这个答案")，参数的非常量性导致可变参数构造函数更好地匹配。出于显而易见的原因，我不想强​​迫我的调用者使用 const_cast。

我发现的一种可能的解决方案是为 Foo 编写一个“复制构造函数”，它采用非常量 Foo 并使用构造函数转发：

```
Foo(Foo& other)
    : Foo(const_cast<const Foo&>(other)) {} 
```

定义此构造函数后，事情又开始了：现在首选非 const Foo 参数复制 ctor。然而，这对我来说似乎很粗略，因为这种“治疗”似乎比疾病更糟糕。

是否有另一种方法可以实现这种效果，表明自然复制构造函数应该优先于可变参数构造函数？如果没有，定义这个非常量参数复制构造函数是否有任何不利后果？

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2012-12-18T17:25:16.933

您可以使用一些丑陋的 SFINAE with `std::enable_if`，但我不确定它是否比您最初的解决方案更好（事实上，我很确定它更糟！）：

```
#include <memory>
#include <type_traits>

// helper that was not included in C++11
template<bool B, typename T = void> using disable_if = std::enable_if<!B, T>;

template<typename T>
struct Foo {

    Foo() = default;
    Foo(const Foo &) = default;

    template<typename Arg, typename ...Args, typename = typename
        disable_if<
            sizeof...(Args) == 0 &&
            std::is_same<typename
                std::remove_reference<Arg>::type,
                Foo
            >::value
        >::type
    >
    Foo(Arg&& arg, Args&&... args)
        : t(std::forward<Arg>(arg), std::forward<Args>(args)...) {}

    T t;
};

int main(int argc, char* argv[]) {
    Foo<std::shared_ptr<int>> x(new int(42));
    decltype(x) copy_of_x(x);
    decltype(x) copy_of_temp(Foo<std::shared_ptr<int>>(new int));
    return 0;
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-18T18:22:20.767

最好的方法是不要做你正在做的事情。

也就是说，一个简单的解决方法是让可变参数构造函数转发到基类构造函数，并带有一些特殊的第一个参数。

例如，以下使用 MinGW g++ 4.7.1 编译：

```
#include <iostream>         // std::wcout, std::endl
#include <memory>           // std::shared_ptr
#include <stdlib.h>         // EXIT_SUCCESS
#include <tuple>
#include <utility>          // std::forward

void say( char const* const s ) { std::wcout << s << std::endl; }

template<typename T>
struct Foo;

namespace detail {
    template<typename T>
    struct Foo_Base
    {
        enum Variadic { variadic };

        Foo_Base()
            : t()
        { say( "default-init" ); }

        Foo_Base( Foo_Base const& other )
            : t( other.t )
        { say( "copy-init" ); }

        template<typename ...Args>
        Foo_Base( Variadic, Args&&... args )
            : t( std::forward<Args>(args)... )
        { say( "variadic-init" ); }

        T t;
    };

    template<typename T>
    struct Foo_ConstructorDispatch
        : public Foo_Base<T>
    {
        Foo_ConstructorDispatch()
            : Foo_Base<T>()
        {}

        template<typename ...Args>
        Foo_ConstructorDispatch( std::tuple<Foo<T>&>*, Args&&... args )
            : Foo_Base<T>( args... )
        {}

        template<typename ...Args>
        Foo_ConstructorDispatch( std::tuple<Foo<T> const&>*, Args&&... args )
            : Foo_Base<T>( args... )
        {}

        template<typename ...Args>
        Foo_ConstructorDispatch( void*, Args&&... args)
            : Foo_Base<T>( Foo_Base<T>::variadic, std::forward<Args>(args)... )
        {}
    };
}  // namespace detail

template<typename T>
struct Foo
    : public detail::Foo_ConstructorDispatch<T>
{
    template<typename ...Args>
    Foo( Args&&... args)
        : detail::Foo_ConstructorDispatch<T>(
            (std::tuple<Args...>*)0,
            std::forward<Args>(args)...
            )
    {}
};

int main()
{
    Foo<std::shared_ptr<int>>   x( new int( 42 ) );
    decltype(x)                 copy_of_x( x );
} 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-12-18T22:36:21.187

> 如果没有，定义这个非常量参数复制构造函数是否有任何不利后果？

我将忽略“如果不是”，因为还有*其他*方法。但是你的方法有*一个*不利的后果。下面仍然使用模板构造函数

```
Foo<X> g();
Foo<X> f(g()); 
```

因为`g()`是右值，所以模板是更好的匹配，因为它将参数推导出为右值引用。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2016-02-11T22:15:11.707

当参数类型与 this 类型相同或派生自 this 时，禁用构造函数：

```
template<typename ThisType, typename ... Args>
struct is_this_or_derived : public std::false_type {};

template<typename ThisType, typename T>
struct is_this_or_derived<ThisType, T>
    : public std::is_base_of<std::decay_t<ThisType>, std::decay_t<T> >::type {};

template<typename ThisType, typename ... Args>
using disable_for_this_and_derived 
      = std::enable_if_t<!is_this_or_derived<ThisType, Args ...>::value>; 
```

用它作为

```
template<typename ...Args
        , typename = disable_for_this_and_derived<Foo, Args ...> >
                                                //^^^^
                                                //this needs to be adjusted for each class
Foo(Args&&... args) : t(std::forward<Args>(args)...) {} 
```

# twitter-bootstrap - 引导菜单自定义

> ID：13937876
> 
> 赞同：1
> 
> 时间：2012-12-18T16:59:02.877
> 
> 标签：twitter-bootstrap, menu, navigation, customization

我正在使用 Bootstrap 2.2.2，我很好奇是否有人已经实现或了解如何自定义移动导航？当前，在移动设备或平板电脑视图中，引导程序会显示一个按钮，您可以按下该按钮以垂直下拉菜单。

我想要的是能够从右侧或水平方向拉菜单。最好有一个类似于 Facebook 应用程序或 Google+ 应用程序的菜单，当您点击菜单按钮时，菜单会从左侧滑出，将页面的所有内容推到右侧。

谁能指导我如何使用引导程序做到这一点？感谢您的帮助！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-08-19T06:54:00.360

目前在 Bootstrap 中没有这样的组件。总结一下我对幻灯片菜单的搜索，您有三个选项：a）覆盖引导 css 文件：这里有一个代码示例：[http](http://codepen.io/michaelschofield/pen/FAnKG) : //codepen.io/michaelschofield/pen/FAnKG b）angularjs 模块和滑出菜单您的应用程序：http: [//ngmodules.org/modules/ng-mobile-menu](http://ngmodules.org/modules/ng-mobile-menu) c) jquery 插件只需使用查询+幻灯片菜单搜索网络

# html - 在图像旁边垂直对齐跨度

> ID：13937878
> 
> 赞同：0
> 
> 时间：2012-12-18T16:59:21.220
> 
> 标签：html, css

我正在尝试构建一个`<ul>`像这里描述的那样的入口结构：

![在此处输入图像描述](../Images/6d3fa8cb05cb75e36087f791f2fc41ee.png)

如图所示，红框是`<li>.`

此外，如果我动态删除位于图像旁边的底部`<span>`，我希望顶部`<span>`垂直居中（当然，在图像旁边）。

我已经尝试将所有内容都变成块并使用宽度和高度，但我想知道那里是否有“更清洁”的版本。

非常感谢！

**编辑：**

## [我当前的代码：](http://jsfiddle.net/PUsBR/)

### HTML：

```
<ul>
<li>
    <span><img src="http://ctelab.berkeley.edu/Images/image%202_use.jpg" /></span>
    <span>Text1</span>
    <span>Text2</span>
    <span>Text3</span>
</li>
</ul>​ 
```

### CSS：

```
li{
    border: 1px solid red;
    padding: 20px;
}
span:first-child{
    display: inline-block;
    width: 120px; 
    height: 120px; /* width and height of the image*/
    vertical-align: middle;
}
span{
    border: 1px dashed green;
}​ 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-18T17:48:41.690

据我所知，只有 TD 元素支持垂直对齐。如果您想要垂直对齐（将 SPAN 定位在 LI 的中间），我建议您采用两种方式：

使用 JS 或将您的 LI 转换为 TD。

# c# - MVC 中的文件预览

> ID：13937880
> 
> 赞同：1
> 
> 时间：2012-12-18T16:59:23.780
> 
> 标签：c#, asp.net-mvc-3, preview

我想为我的 ASP.NET MVC3 应用程序中的文件实现文件预览。

我需要在我的 MVC 项目中为多种类型的文件创建预览。文件包括：pdf、doc、docx、xsl、scv、txt、img、png、rtf、csv 等

我的想法是为每种文件类型创建类，并将这些文件中的任何一个呈现为将显示给用户的一组图像文件。

解决方案只需要 HTML + Javascript。

任何想法什么是最好的解决方案？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-19T21:42:45.067

我决定使用这种方法来加载任何文件创建 pdf 并从 pdf 到 img。我知道它的漫长过程，但它是我能想到的最好的。

# parsing - 在不知道 .proto 的情况下解析协议缓冲区

> ID：13937882
> 
> 赞同：22
> 
> 时间：2012-12-18T16:59:29.700
> 
> 标签：parsing, protocol-buffers

我知道协议缓冲区是一种序列化格式，需要 .proto 中的消息格式才能正确读取。但是我有一个文件我不知道正确的消息格式，因为它没有发布。我想做的是自己对数据进行逆向工程，以便我可以重建消息。为此，我需要读取原始文件，从中可以获取字段编号、类型和值。

是否有一个程序可以做到这一点（最好在 python 中，但 C/C++ 也很酷）？

* * *

## 回答 #1

> 赞同：18
> 
> 时间：2012-12-25T01:51:44.280

在进行了一些挖掘之后，我编写了自己的工具来执行此操作。我敢肯定，还有其他方法可以做到这一点，但这个工具会查看源二进制文件中的描述。它读入描述流并输出一个伪 .proto 文件。从该 .proto 文件中，您可以编译自己的 pb 文件并解码您的流。

```
import sys
import struct

# Helper functions ------------------------------------------------------------
# this comes largely straight out of the google protocol-buffers code for DecodeVarint(internal\decoder.py)
# with a few tweaks to make it work for me
def readVarInt(buffer, pos):
  mask = (1 << 64) - 1
  result = 0
  shift = 0
  startPos = pos
  while 1:
    b = ord(buffer[pos])
    result |= ((b & 0x7f) << shift)
    pos += 1
    if not (b & 0x80):
      if result > 0x7fffffffffffffff:
        result -= (1 << 64)
        result |= ~mask
      else:
        result &= mask
      return (result, pos, pos-startPos)
    shift += 7
    if shift >= 64:
      raise Error('Too many bytes when decoding varint.')

def readQWORD(d, pos):
    try:
        v = struct.unpack("<Q", d[pos:pos+8])[0]
    except:
        print "Exception in readQWORD"
        print sys.exc_info()
        return (None, pos)
    pos += 8
    return (v, pos);

def readDWORD(d, pos):
    try:
        v = struct.unpack("<L", d[pos:pos+4])[0]
    except:
        print "Exception in readDWORD"
        print sys.exc_info()
        return (None, pos)
    pos += 4
    return (v, pos);

def readBYTE(d, pos):
    try:
        v = struct.unpack("<B", d[pos:pos+1])[0]
    except:
        print "Exception in readBYTE"
        print sys.exc_info()
        return (None, pos)
    pos += 1
    return (v, pos);

# returns (value, new position, data type, field ID, and value's length)
def readField(d, pos):
    # read field and type info
    (v, p) = readBYTE(d, pos);
    datatype = v & 7;
    fieldnum = v >> 3;

    if datatype == 0:       # varint
        (v, p, l) = readVarInt(d, p)
        return (v, p, datatype, fieldnum, l)    
    elif datatype == 1: # 64-bit
        (v,p) = readQWORD(d, p)
        return (v, p, datatype, fieldnum, 8)    
    elif datatype == 2: # varlen string/blob
        (v, p, l) = readVarInt(d, p)    # get string length
        return (d[p:p+v], p+v, datatype, fieldnum, v)       
    elif datatype == 5: # 32-bit value
        (v,p) = readDWORD(d, p)
        return (v, p, datatype, fieldnum, 4)
    else:
        print "Unknown type: %d [%x]\n" % (datatype, pos)
        return (None, p, datatype, fieldnum, 1);

# PARSERS ---------------------------------------------------------------------

#  Parse DescriptorProto field
def PrintDescriptorProto(data, size, prefix):
    pos = 0

    while pos < size:
        (d, p, t, fid, l)  = readField(data, pos);
        pos = p

        if fid == 1: print "%smessage %s {" % (prefix,d)
        elif fid == 2: PrintFieldDescriptorProto(d, l, prefix+"\t") # FieldDescriptorProto
        elif fid == 3: PrintDescriptorProto(d, l, prefix+"\t") # DescriptorProto
        elif fid == 4: PrintEnumDescriptorProto(d, l, prefix+"\t") # EnumDescriptorProto
        elif fid == 5: 
            print "%sextension_range:" % (prefix)
            PrintDescriptorProto(d, l, prefix+"\t") # ExtensionRange
        elif fid == 6: print "%sextension: %s" % (prefix,d) # FieldDescriptorProto
        elif fid == 7: print "%soptions: %s" % (prefix,d) # MessageOptions
        else: print "***UNKNOWN fid in PrintDescriptorProto %d" % fid

    print "%s}" % prefix

# Parse EnumDescriptorProto
def PrintEnumDescriptorProto(data, size, prefix):
    pos = 0
    while pos < size:
        (d, p, t, fid, l)  = readField(data, pos);
        pos = p

        if fid == 1: print "%senum %s {" % (prefix,d)
        elif fid == 2: PrintEnumValueDescriptorProto(d, l, prefix+"\t") # EnumValueDescriptorProto
        elif fid == 3: # EnumOptions
            print "%soptions" % prefix
        else: print "***UNKNOWN fid in PrintDescriptorProto %d" % fid
    print "%s};" % prefix

# Parse EnumValueDescriptorProto
def PrintEnumValueDescriptorProto(data, size, prefix):
    pos = 0
    enum = {"name": None, "number": None}
    while pos < size:
        (d, p, t, fid, l)  = readField(data, pos);
        pos = p
        if fid == 1: enum['name'] = d
        elif fid == 2: enum['number'] = d
        elif fid == 3: # EnumValueOptions
            print "%soptions: %s" % (prefix,d)
        else: print "***UNKNOWN fid in PrintDescriptorProto %d" % fid

    print "%s%s = %s;" % (prefix, enum['name'], enum['number'])

# Parse FieldDescriptorProto
def PrintFieldDescriptorProto(data, size, prefix):
    pos = 0
    field = {"name": None, "extendee": None, "number": None, "label": None, "type": None, "type_name": None, "default_value": None, "options": None}
    while pos < size:
        (d, p, t, fid, l)  = readField(data, pos);
        pos = p

        if fid == 1: field['name'] = d
        elif fid == 2: field['extendee'] = d
        elif fid == 3: field['number'] = d
        elif fid == 4: 
            if d == 1: field['label'] = "optional"
            elif d == 2: field['label'] = "required"
            elif d == 3: field['label'] = "repeated"
            else: print "{{Label: UNKNOWN (%d)}}" % (prefix,d)

        elif fid == 5: 
            types = {1: "double", 
                             2: "float", 
                             3: "int64", 
                             4: "uint64", 
                             5: "int32", 
                             6: "fixed64",
                             7: "fixed32",
                             8: "bool",
                             9: "string",
                             10: "group", 
                             11: "message",
                             12: "bytes",
                             13: "uint32",
                             14: "enum",
                             15: "sfixed32",
                             16: "sfixed64",
                             17: "sint32",
                             18: "sint64" }
            if d not in types:
                print "%sType: UNKNOWN(%d)" % (prefix,d)
            else:
                field['type'] = types[d]

        elif fid == 6: field["type_name"] = d
        elif fid == 7: field["default_value"] = d
        elif fid == 8: field["options"] = d
        else: print "***UNKNOWN fid in PrintFieldDescriptorProto %d" % fid

    output = prefix

    if field['label'] is not None: output += " %s" % field['label']
    output += " %s" % field['type']
    output += " %s" % field['name']
    output += " = %d" % field['number']
    if field['default_value']: output += " [DEFAULT = %s]" % field['default_value']
    output += ";"
    print output

#  Parse ExtensionRange field
def PrintExtensionRange(data, size, prefix):
    pos = 0
    while pos < size:
        (d, p, t, fid, l)  = readField(data, pos);
        pos = p
        print "%stype %d, field %d, length %d" % (prefix, t, fid, l)

        if fid == 1: print "%sstart: %d" % (prefix,d)
        elif fid == 2: print "%send: %d" % (prefix,d)
        else: print "***UNKNOWN fid in PrintExtensionRange %d" % fid

def PrintFileOptions(data, size, prefix):
    pos = 0
    while pos < size:
        (d, p, t, fid, l)  = readField(data, pos);
        pos = p

        if fid == 1: print "%soption java_package = \"%s\";" % (prefix,d)
        elif fid == 8: print "%soption java_outer_classname = \"%s\"" % (prefix,d)
        elif fid == 10: print "%soption java_multiple_files = %d" % (prefix,d)
        elif fid == 20: print "%soption java_generate_equals_and_hash = %d" % (prefix,d)
        elif fid == 9: print "%soption optimize_for = %d" % (prefix,d)
        elif fid == 16: print "%soption cc_generic_services = %d" % (prefix,d)
        elif fid == 17: print "%soption java_generic_services = %d" % (prefix,d)
        elif fid == 18: print "%soption py_generic_services = %d" % (prefix,d)
        elif fid == 999: print "%soption uninterpreted_option = \"%s\"" % (prefix,d)        # UninterpretedOption
        else: print "***UNKNOWN fid in PrintFileOptions %d" % fid

# -----------------------------------------------------------------------------
# Main function. 
def ParseProto(filename, offset, size):
    f = open(filename, "rb").read()

    data = f[offset:offset+size]

    pos = 0
    while pos < size:
        (d, p, t, fid, l)  = readField(data, pos);
        pos = p
        #print "type %d, field %d, length %d" % (t, fid, l)

        if fid == 1: print "// source filename: %s" % d
        elif fid == 2: print "package %s;" % d
        elif fid == 3: print "import \"%s\"" % d
        elif fid == 4: PrintDescriptorProto(d, l, "")
        elif fid == 5: print "EnumDescriptorProto: %s" % d
        elif fid == 6: print "ServiceDescriptorProto: %s" % d
        elif fid == 7: print "FieldDescriptorProto: %s" % d
        elif fid == 8: PrintFileOptions(d, l, "")
        else: print "***UNKNOWN fid in ParseProto %d" % fid
    return {}

# main
if __name__ == "__main__":
    if len(sys.argv) != 4:
        print "Usage: %s binaryfile offset size" % sys.argv[0]
        sys.exit(0)

    ParseProto(sys.argv[1], int(sys.argv[2]), int(sys.argv[3])) 
```

* * *

## 回答 #2

> 赞同：10
> 
> 时间：2016-01-06T12:00:57.273

[我发现使用 .将原始消息转换为文本](https://stackoverflow.com/q/7343867/357313)很有用`protoc --decode_raw < file`。如果文件实际上包含*多个*（以长度为前缀的）消息，请先[将它们保存到单独的文件](https://stackoverflow.com/a/34632255/357313)中。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2021-06-22T17:54:37.743

也许试试这个在线 protobuf 解码器：http: [//pb-decode.online](http://pb-decode.online)

它是开源的：[https ://github.com/aj3423/aproto](https://github.com/aj3423/aproto)

比协议好。顺便说一句，我是作者，欢迎提出建议。

[![在此处输入图像描述](../Images/e9cc73069109a93f965fb32c6a0e0538.png)](https://i.stack.imgur.com/ROvM6.png)

# php - MAGENTO：将属性添加到“list.phtml”以进行比较页面

> ID：13937883
> 
> 赞同：1
> 
> 时间：2012-12-18T16:59:37.690
> 
> 标签：php, magento, compare

编辑：这是我现在拥有的：

![比较](../Images/ac931866b715c60de994754424a1fb49.png)

_______________
我希望此信息位于添加到购物车按钮上方：

![在此处输入图像描述](../Images/4251dd17ade7059140d255de6fe05ef3.png)

这是来自产品页面的代码：
`getProductUrl($_item) ?>', true)" title="stripTags($_item->getName(), null, true) ?>">helper('catalog/image ')->init($_item, 'small_image')->resize(125, 125); ?>" width="125" height="125" alt="stripTags($_item->getName(), null,真的) ?>" />

```
 <h2 class="product-name"><a href="#" onclick="setPLocation('<?php echo $this->getProductUrl($_item) ?>', true)" title="<?php echo $this->stripTags($_item->getName(), null, true) ?>"><?php echo $this->helper('catalog/output')->productAttribute($_item, $_item->getName(), 'name') ?></a></h2>

                <?php echo $this->getReviewsSummaryHtml($_item, 'short') ?>
                <?php echo $this->getPriceHtml($_item, true, '-compare-list-top') ?>
                <?php if($_item->isSaleable()): ?>
                    <p><button type="button" title="<?php echo $this->__('Add to Cart') ?>" class="button btn-cart" onclick="setPLocation('<?php echo $this->helper('catalog/product_compare')->getAddToCartUrl($_item) ?>', true)"><span><span><?php echo $this->__('Add to Cart') ?></span></span></button></p>
                <?php else: ?>
                    <p class="availability out-of-stock"><span><?php echo $this->__('Out of stock') ?></span></p>
                <?php endif; ?>
                <?php if ($this->helper('wishlist')->isAllow()) : ?>
                    <ul class="add-to-links">
                        <li><a href="<?php echo $this->getAddToWishlistUrl($_item) ?>" class="link-wishlist" onclick="setPLocation(this.href, true)"><?php echo $this->__('Add to Wishlist') ?></a>` 
```

这是我（天真地）试图复制的产品页面中的代码。
`<?php echo (($_product->getResource()->getAttribute('hersteller')->getFrontend()->getValue($_product) && $_product->getResource()->getAttribute('hersteller')->getFrontend()->getValue($_product) != "Nein") ? $_product->getResource()->getAttribute('hersteller')->getFrontend()->getValue($_product) : ''); ?> <?php echo (($_product->getResource()->getAttribute('weingut')->getFrontend()->getValue($_product) && $_product->getResource()->getAttribute('weingut')->getFrontend()->getValue($_product) != "Nein") ? $_product->getResource()->getAttribute('weingut')->getFrontend()->getValue($_product) : ''); ?> <?php echo (($_product->getResource()->getAttribute('ob_hersteller')->getFrontend()->getValue($_product) && $_product->getResource()->getAttribute('ob_hersteller')->getFrontend()->getValue($_product) != "Nein") ? $_product->getResource()->getAttribute('ob_hersteller')->getFrontend()->getValue($_product) : ''); ?>`

旧帖子
我正在尝试向 magento 中的比较页面添加更多属性，但是当我添加在产品页面上成功运行的代码时出现以下错误。

我的产品页面有以下内容：

* 图片
* 型号名称
* 价格
* 添加到购物车按钮

我想要以下内容：

* 图片
* 品牌或葡萄园或酿酒厂
* 型号名称
* 价格
* 库存
* 交货时间

* 添加到购物车按钮

这就是我在产品页面的“list.phtml”上的显示方式。但是，当我将该代码复制到比较“list.phtml”时，出现以下错误：

> 致命错误：在线....../app/design/frontend/base/default/template/catalog/product/compare/list.phtml中的非对象调用成员函数getResource() 68

这是一个代码工作的产品页面：
[http](http://weinwerk-klimascout.de/obstbrand/selection-kirsch.html)

://weinwerk-klimascout.de/obstbrand/selection-kirsch.html这是代码：

```
<h2>
    <?php echo (($_product->getResource()->getAttribute('hersteller')->getFrontend()->getValue($_product) && $_product->getResource()->getAttribute('hersteller')->getFrontend()->getValue($_product) != "Nein") ? $_product->getResource()->getAttribute('hersteller')->getFrontend()->getValue($_product) : ''); ?>
    <?php echo (($_product->getResource()->getAttribute('weingut')->getFrontend()->getValue($_product) && $_product->getResource()->getAttribute('weingut')->getFrontend()->getValue($_product) != "Nein") ? $_product->getResource()->getAttribute('weingut')->getFrontend()->getValue($_product) : ''); ?>
    <?php echo (($_product->getResource()->getAttribute('ob_hersteller')->getFrontend()->getValue($_product) && $_product->getResource()->getAttribute('ob_hersteller')->getFrontend()->getValue($_product) != "Nein") ? $_product->getResource()->getAttribute('ob_hersteller')->getFrontend()->getValue($_product) : ''); ?>
</h2> 
```

怎么了？

* * *

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-18T22:58:59.880

您在此模板中没有 $_product 变量，您应该改用 $_item->getProduct() ;)

问候，

# php - PDF Annotation for iOS Using a Mouse

> ID：13937890
> 
> 赞同：0
> 
> 时间：2012-12-18T16:59:57.317
> 
> 标签：php, javascript, mysql, ios, pdf

I am building an iOS application which consumes PDF documents and displays them to a user on their device, I need to allow the user to be able to interact with the content of the PDF by placing buttons over sections of the PDF.

To do this I need the coordinates of where the button should be placed within the PDF file view.

My initial thoughts were a web application using Javascript, PHP and MySQL would need to be created to allow my client to 'Draw' the buttons on to the PDF's and that this process would generate the coordinates needed and save them in a database.

After A LOT of googling I haven't found anything that does what I need so it looks like I will have to build something but I am stuck as what and where to start.

So the question is does anyone know of or can suggest a solution to the above that might get me started down the right path?

*N.B. I did ask a similar question but got marked down for vagueness so I have re asked here with more detail.*

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-18T17:09:44.330

我实际上构建了一个与此非常相似的系统，尽管我无法与您分享代码。我能做的就是告诉你它是如何工作的。

正如您所建议的，Web 应用程序可以让您将项目放置在您想要的位置，然后将其捆绑到一个 JSON 文件中，该文件以点为单位描述每个项目的位置。然后，我们使用滚动视图内的 CATiledLayer 渲染 PDF，并将渲染的按钮/资产放在顶部。

我认为解决它的最佳方法是考虑如何在客户端实现它，然后在您对使用虚拟数据显示/渲染事物的方式感到满意时转移到服务器端。您目前如何显示您的 PDF？如果你正在使用一个`UIWebView`东西会变得更加困难。

# javascript - How to set up yaml references within a single .yaml file?

> ID：13937891
> 
> 赞同：1
> 
> 时间：2012-12-18T16:59:57.503
> 
> 标签：javascript, html, yaml, jinja2

I have inherited a large number of .yaml files that contain an attribute like this:

```
our_price: Our price is just <sup>$</sup><span class="amount">99.95</span> this month 
```

Now, the client wants to be able to take our_price, add some taxes and fees, and display a total price in the jinja templates.

What I'd like to do is add a new attribute, so it looks like this:

```
simple_price: 99.95
our_price: Our price is just <sup>$</sup><span class="amount">simple_price</span> this month 
```

I've tried using aliases, but it seems they only work as the entire value of the node.

Is there a way to set this up in YAML, or a way to pull out just the float from the our_price string in jinja2?

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-23T02:39:16.507

尽管我对 jinja 一无所知，但我认为您的问题在概念上与[此 StackOverflow question](https://stackoverflow.com/q/13055753/567863)相似。

简短的回答是，您不能按照您/您的客户想要的方式在 YAML 中进行字符串插值。我相信您必须将`simple_price`值传递给`our_price`视图文件（或 jinja 等效文件）中的值，并将 YAML 条目更改为：

```
simple_price: 99.95
our_price: Our price is just <sup>$</sup><span class="amount">%{simple_price}</span> 
```

或者，使用别名和锚点，您可以将价格和字符串作为数组带回视图，然后将它们连接成一个字符串：

```
simple_price: &simple_price <sup>$</sup><span class="amount">99.95</span>
our_price: 
  - Our price is just
  - *simple_price 
```

# sql - Grouping and sum Quarter values

> ID：13937893
> 
> 赞同：3
> 
> 时间：2012-12-18T17:00:04.357
> 
> 标签：sql, sql-server, tsql, sql-server-2012

I have the following table in my SQL Server 2012 instance:

```
+---------+---------+
| Quarter | Values  |
+---------+---------+
| Q1      | 10      |
| Q2      | 15      |
| Q3      |  5      |
| Q4      |  1      |
+---------+---------+ 
```

I would like grouping quarter in order to sum values to obtain
Q1 = 25
Q2 = 31
So, Q2 sum also previous values that exist in Q1. If I had Q3 the sum would be Sum(Q1) + Sum (Q2) + Sum (Q3).
In this way a simple Group by clause doesn't work. Can anybody help me to find a solution in order to perform the described task using a simple select statement without using Union, please?

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-19T01:35:27.297

由于您使用的是 SQL 2012，因此您也可以使用[RANGES](http://msdn.microsoft.com/de-de/library/ms189461.aspx)

```
SELECT DISTINCT
  TheQuarter
  , SUM( TheValue ) OVER ( ORDER BY TheQuarter RANGE BETWEEN UNBOUNDED PRECEDING AND CURRENT ROW ) AS "RollingSum"
FROM 
  MyData 
```

[SQL小提琴](http://sqlfiddle.com/#!6/fc0e1/8/0)

**@编辑：**

如果您要处理多年，请参阅[this fiddle](http://sqlfiddle.com/#!6/7a6ca/1/0)。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-18T17:25:55.383

请注意，如果您处理多年，您可能需要更改此查询。

```
--Setup sample table
DECLARE @MyData TABLE (
    TheQuarter VARCHAR(2) NOT NULL,
    TheValue INT NOT NULL
);

--insert sample data
INSERT INTO @MyData VALUES ('Q1',10),
    ('Q1',15),
    ('Q2',5),
    ('Q2',1);

WITH Totals AS (SELECT ROW_NUMBER() OVER (ORDER BY TheQuarter ASC) AS [QuarterIndex],
            TheQuarter, SUM(TheValue) AS [TotalValue]
        FROM @MyData GROUP BY TheQuarter)
    SELECT t.TheQuarter, SUM(tPlusPrev.TotalValue) AS [TotalValue]
    FROM Totals t
        LEFT OUTER JOIN Totals tPlusPrev ON t.QuarterIndex >= tPlusPrev.QuarterIndex
    GROUP BY t.TheQuarter; 
```

# performance - Why is my UITextField(and my subview in general) in my subview acting really slow (Xcode)

> ID：13937894
> 
> 赞同：0
> 
> 时间：2012-12-18T17:00:05.063
> 
> 标签：performance, view, cursor, uitextfield, subview

I got a view with a uitableview. I am adding a subview to this by using this code:

```
.h
IBOutlet UIView *colorView;
@property (nonatomic, retain) UIView *colorView;

.m in viewDidLoad
[self.view addSubview:colorView]; 
```

The problem is that my subview is acting really slow. When click in a UITextField in my subview, the cursor sort of slide slowly in for the top left corner and when you type the cursor moves slowly too.

Hope someone can help me

Thanks in advance :)

Update: I figured out that it all happens when I'm adding the subview.

Update 2: I have localized the problem to be when I present the subview. I have made so that when you click at a certain tableviewcell the colorView is displayed by this code:

```
 [UIView beginAnimations:@"SlideInFromTop" context:nil];
  [UIView setAnimationDuration:0.35];
  [UIView setAnimationDelegate:self];
  [UIView setAnimationRepeatCount:0];
  [UIView setAnimationRepeatAutoreverses:NO]; 
```

After this code is executed my app begins to work very slow, especially when I'm typing in a UITextField.

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-18T19:37:54.853

我解决了！问题是我忘了提交动画：

```
[UIView commitAnimations]; 
```

# iphone - App crashes in lower versions of iPhone

> ID：13937897
> 
> 赞同：2
> 
> 时间：2012-12-18T17:00:08.087
> 
> 标签：iphone, ios, autolayout

I have created my iPhone app using X code 4.5 and used .xib as 4 inch retina display mode,i have checked "Auto layout" in many views(actually while beginning i was not aware about size issue and all), Now my project is almost over,its running fine with ios6,but when i run it on ios5 it crashes and also if i unchecked all "Auto layout" it crashes in ios6 too.

I am not getting an idea about auto layout, How can make it OK?

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-18T17:49:31.630

不要对 iOS 5.0 及以下版本使用自动布局。删除所有 xib 的复选标记并尝试...

# javascript - Detected when everything has finished downloading

> ID：13937900
> 
> 赞同：1
> 
> 时间：2012-12-18T17:00:11.790
> 
> 标签：javascript, jquery, html, css

Using only HTML, CSS, and Javascript, has the web development world got to a stage where it is possible to display a loading message on the screen until absolutely everything has downloaded before the web page is displayed on the screen?

For example, display "loading", until all html, css, javascript, images etc etc have downloaded and can be displayed without the user seeing bits of the website still appearing after the load message has gone?

**UPDATE, .LOAD DOESN'T WORK:**

```
<!doctype html>
<html lang="en">
    <head>
        <meta charset="utf-8">
        <title></title>

        <script  type="text/javascript" src="http://code.jquery.com/jquery-1.8.3.min.js"></script>

        <script type="text/javascript">

            $(document).load(function(){

                alert("loaded");

            });

        </script>
    </head>
    <body>

    </body>
</html> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-18T17:08:45.533

毫无疑问，这将通过 jQuery 和 javascript 实现：

```
$(function(){

    $('body').addClass('loader'); // this will show the loading gif

    $(window).load(function(){
        $('body').removeClass('loader'); // remove the loader when window gets loaded.
        $('#wrapper').show();    // show the wrapper div after everything loaded.
    });

}); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-18T17:01:14.247

你可以使用[**$(window).load()**](http://api.jquery.com/load-event/)

```
$(window).load(function(){
    alert("");
}) 
```

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2012-12-18T17:02:03.260

是的，[这里](http://www.w3schools.com/jsref/event_body_onload.asp)`<body>`有`onLoad`描述的属性，例如：

```
<script type="text/javascript">
function done() {
    document.getElementById("loadingtext").innerHTML = "";
}
</script>

<body onload="done()">
<div id="loadingtext">Loading...</div> 
```

但是，当然，使用框架更容易。

# java - Java - Writing to txt in a JAR file

> ID：13937904
> 
> 赞同：6
> 
> 时间：2012-12-18T17:00:19.717
> 
> 标签：java, file-io, jar, executable-jar, streamwriter

> **Possible Duplicate:**
> [How can a Java program use files inside the .jar for read and write?](https://stackoverflow.com/questions/5052311/how-can-a-java-program-use-files-inside-the-jar-for-read-and-write)

How do I write to a .txt file from a [JAR](http://en.wikipedia.org/wiki/JAR_%28file_format%29) java compiled project?

When I run my projects, it doesn't give errors, but it just doesn't write to the .txt inside JAR file.

I make the JAR file using:

```
netbeans clean /build tool 
```

### Code:

```
public class FileIO   {
    private File file;
    private Scanner filescScanner, lineScanner;
    private PrintWriter fileWriter;
    private String[][] data;

    public FileIO () {
        data = new String[100][2];
    }

    public String[][] getLineScores(){
        return this.loadHighscores(this.getClass().getResourceAsStream("LineHighscores.txt"));
    }

    public String[][] getTimeScores(){
        return this.loadHighscores(this.getClass().getResourceAsStream("TimeHighscores.txt"));
    }

    public void setLineScores( String name,String lines ){
        boolean found= false;
        data = this.getLineScores();
        for(int i = 0; i<data.length && !found ; i++){
            if(data[i][0] == null || "Niemand".equals(data[i][0])){
                data[i][0]=name;
                data[i][1]=lines;
                found=true;
            }
        }
        this.saveHighscores(this.getClass().getResource("LineHighscores.txt"),data);
    }

    public void setTimeScores(String time, String name){
        boolean found= false;
        data = this.getLineScores();
        for(int i = 0; i<data.length && !found ; i++){
            if(data[i][0] == null || "Niemand".equals(data[i][0])){
                data[i][0]=name;
                data[i][1]=time;
                found=true;
            }

        }
        this.saveHighscores(this.getClass().getResource("TimeHighscores.txt"),data);
    }

    private String[][] loadHighscores( InputStream resourceStream){
        int x=0;
        String test = "";
        try{
            filescScanner = new Scanner(resourceStream);
        }
        catch(Exception ioe){
            System.err.println(ioe);
        }

        if (filescScanner.hasNext()){
            while(filescScanner.hasNextLine()&& x<100) {
                lineScanner = new Scanner(filescScanner.nextLine());
                lineScanner.useDelimiter("-/-");

                data[x][0]=lineScanner.next();//name
                data[x][1]=lineScanner.next();//data
                x++;
            }
            lineScanner.close();
            filescScanner.close();
        }
        else{
            data[0][0] = "Niemand";
            data[0][1] = "0";
        }
        return data;
    }

    private void saveHighscores( URL resourceStream, String[][] data){
        int x=0;
        try {
            file = new File(resourceStream.toURI());
        } catch (URISyntaxException ex) {
            Logger.getLogger(FileIO.class.getName()).log(Level.SEVERE, null, ex);
        }

        try {
            fileWriter = new PrintWriter(file);
        } catch (FileNotFoundException ex) {
            Logger.getLogger(FileIO.class.getName()).log(Level.SEVERE, null, ex);
        }
        if(data.length>x){
            while(data.length>x && data[x][0] != null ){
                fileWriter.println(data[x][0]+"-/-"+data[x][1]);
                x++;
            }
            fileWriter.close();
        }
    }

    public static void main(String[] args){
        FileIO file = new FileIO();
        file.setLineScores("55555555", "KoenKevin");
    }
} 
```

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-12-18T17:05:13.990

你不能那样做，即使你能那样做，也不推荐：写到罐子外面的一个地方。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-12-18T17:58:46.387

Jar 是一个存档，它的意思是保持不变。如果您需要您的 jar（应用程序）来编写某些内容，请写入外部源。

我建议您创建一个单独的文件夹并让您的应用程序指向该文件夹并在那里执行所有外部活动。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-12-18T18:24:40.833

当您尝试在 jar 中写入文本文件时，java 无法识别文本文件的绝对路径。

它会像

```
C:User/adom/documents/jarName.jar!/fileName.txt 
```

这不是绝对路径，因此无法写入文件。尝试从外部写入文件。

# c# - C# NullReferenceException by JSON print

> ID：13937906
> 
> 赞同：1
> 
> 时间：2012-12-18T17:00:20.793
> 
> 标签：c#, json, object, dynamic

I have some problems with NullReferenceException by JSON print. I would like to parse dynamically created JSON code, and write out the value of them.

This is an example JSON that I want to parse with `System.Json(Object.Parse)` (these JSONs are created by PHP code, and it is not always six items long, "db" gives the size of the list):

* * *

```
{
    "crossclouds": {
        "files": {
            "db":"6",
            "a1": {
                "name": "list.txt",
                "id": "2",
                "size": "0",
                "modif": "2012-05-17 23:10:33",
                "given": "3vdcl7WXo5I0m9rcXontHEIQgf661JXS.txt",
                "sec": "6To92mE15BO7",
                "mappa": "/"
            },

            "a2": {
                "name": "hexa2.png",
                "id": "3",
                "size": "0",
                "modif": "2012-05-17 23:10:33",
                "given": "Z87L6f84XUEtLVJ53g0T7ifYnnJ47UmE.png",
                "sec": "iKX2bL9UsU98",
                "mappa": "/"
            },

            ....

            "a6": {
                "name": "kristof.txt",
                "id": "24",
                "size": "127",
                "modif": "2012-05-17 23:10:33",
                "given": "Ze5U3oi59CrkI4xTXLjUP07rilVa0jbS.txt",
                "sec": "h25yaL8207n6",
                "mappa": "/"
            }
        }
    }
} 
```

So I want to get all of the values from a1 to a6 with a `for` loop. I tried this code (and so much else), but it doesn't work. I get:

> Microsoft.CSharp.RuntimeBinder.RuntimeBinderException -> Cannot perform runtime binding on a null reference

or

> "NullReferenceException" -> Object reference not set to an instance of an object.

```
using System;
using System.Collections.Generic;
using System.Linq;
using System.Text;
using System.Net;
//using Newtonsoft.Json;
using System.Json;
using System.IO;
using System.Reflection;

namespace cc3
{
    class Program
    {
        static void Main(string[] args)
        {
            Console.Write("Username: ");
            string user = Console.ReadLine();
            Console.Write("Password: ");
            string pass = Console.ReadLine();

            CookieContainer cookies = new CookieContainer();
            ServicePointManager.Expect100Continue = false;
            HttpWebRequest httpWReq = (HttpWebRequest)WebRequest.Create("http://XXXXX/fafa.php");
            ASCIIEncoding encoding = new ASCIIEncoding();
            string postData = "user=" + user;
            postData += "&psw=" + pass;
            byte[] data = encoding.GetBytes(postData);

            httpWReq.CookieContainer = cookies;

            httpWReq.Method = "POST";
            httpWReq.ContentType = "application/x-www-form-urlencoded";
            httpWReq.ContentLength = data.Length;

            using (Stream newStream = httpWReq.GetRequestStream())
            {
                newStream.Write(data, 0, data.Length);
                newStream.Close();
                WebResponse response = httpWReq.GetResponse();
                Console.WriteLine(((HttpWebResponse)response).StatusDescription);
                Stream newStream2 = response.GetResponseStream();
                StreamReader reader = new StreamReader(newStream2);
                string responseFromServer = reader.ReadToEnd();
                responseFromServer = responseFromServer.Replace("\n", "");
                responseFromServer = responseFromServer.Replace("\r", "");
                responseFromServer = responseFromServer.Replace("\t", "");

                dynamic json = JsonValue.Parse(responseFromServer);

                Console.WriteLine(json.crossclouds.files.db);
                string db = json.crossclouds.files.db;
                db = db.Replace("\"", "");

                Console.WriteLine(json["db"]);

                for (int i = 1; i <= Convert.ToInt16(db); i++)
                {
                    string av = "a" + Convert.ToString(i);
                    object av2 = Convert.ToString("json.crossclouds.files." + av);
                    object r1 = (av2).GetType().GetProperty("name").GetValue(av2, null);

                    if (r1 == null)
                    {
                        Console.WriteLine("Unknown");
                    }
                    else
                    {
                        Console.WriteLine(r1);
                    }
                }
            }
            reader.Close();
            newStream2.Close();
            response.Close();
        }
        Console.ReadLine();
    } 
```

What can I do?

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-07-10T11:40:59.217

我已经做到了 :) 我将 JSON 数据更改为“文件”：[ {“名称”：“abc”等...并应用了一个 foreach 循环 –

# java - Java, all instances of Person are linked to one object

> ID：13937907
> 
> 赞同：3
> 
> 时间：2012-12-18T17:00:20.997
> 
> 标签：java

I am currently writing a program but I found a problem. The problem is that in this loop below all instances of the class Person are attached to one instance of Item. What I want is that a Person each have his own Item. Do you have any suggestions?

Class simulate:

```
public void simulate(int days){

    for(int i=0;i<days;i++) {

        int persons = 10;

        for(int j=0;j<persons;j++){

            Person person = new Person();

            Item item = new Item();

            person.setItem(item);
        }
     }
 } 
```

Class Person:

```
private Item item;

public void setItem(Item item)
{
        this.item = item;
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-18T17:04:11.517

我怀疑你`get`应该是`set`

要使所有 Person 对象都使用同一个对象，您必须创建您的 field `static`。不要那样做，`static`从该字段中删除关键字。我建议您不要将字段设为静态，除非它们是常量（在可能的情况下）

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-18T17:04:42.400

你的代码有各种各样的错误，我确定它不能编译。

如果要构建一个 Person 对象，并在构造函数上传递一个 object 类型的参数，则需要执行以下操作：

```
Object someKindOfObject = new Object(); //should really be a specific type...
Person person = new Person(sometKindOfObject); 
```

getSomething 方法不应该改变对象的状态，只返回关于它的信息。如果您不想使用构造函数选项，请创建一个 setObject 方法。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-12-18T17:19:35.197

> 我想要的是每个人都有自己的项目。

但这正是你正在做的。您正在创建的实例，`Person`并且每个新创建的实例都会收到一个新创建的实例`Item`

```
for(int j=0;j<persons;j++){
  Person person = new Person();
  Item item = new Item();
  person.setItem(item);
} 
```

只是您不保留对所有已创建对象的引用。所以它们迟早会被垃圾收集。你的循环相当于

```
for(int j=0;j<persons;j++){
  new Person().setItem(new Item());
} 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-12-18T17:12:19.473

你在哪里存储人对象？每次你用新的引用覆盖人对象。所以走出循环，你将有一个对象引用。这是我猜你期望的更正代码；- )

```
public void simulate(int days){

    for(int i=0;i<days;i++) {

        int persons = 10;

        Person[] personArray = new Person[persons];

        for(int j=0;j<persons;j++){

            personArray[j] = new Person();

            Object object = new Object();

            personArray[j].setObject(object);
        }

//here you have the reference to all person objects in array
     }
 } 
```

类人

```
public void setObject(Object object)
{
        this.object = object;
} 
```

* * *

## 回答 #5

> 赞同：-1
> 
> 时间：2012-12-18T17:04:25.120

现在代码看起来可以工作，或者问题不明显。OP 应提供有关他/她收到的错误的更多详细信息。

初始帖子中的错误在这里：

```
public void getObject(Object Object)
{
        this.object = object;
} 
```

你应该命名形式参数`object`而不是`Object`，即写

```
public void getObject(Object object) 
```

代替

```
public void getObject(Object Object) 
```

Java 区分大小写。

自从将字段分配给自身以来， Line`this.object = object;`在您的代码中什么也不做。`object`单独的变量`Object`不起作用。你应该得到警告。

另外你最好命名方法`setObject`。

# php - Reliability way for understand previous page address

> ID：13937911
> 
> 赞同：0
> 
> 时间：2012-12-18T17:00:41.103
> 
> 标签：php, url

I want that after opening some page, redirect browser on previous page. I know about `$_SERVER['HTTP_REFERER']` but this is not reliability right? There is better way for understand previous page url ?

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-18T17:13:47.777

试试这个，它会将页面存储在会话中。有点像您最近查看过的内容。

```
session_start();

$_SESSION['pages'][] = $_SERVER['HTTP_REFERER'];

if ( Count ( $_SESSION['pages'] ) > 2 ){
 Array_Shift ( $_SESSION['pages'] );
}  

if ( Count ( $_SESSION['pages'] ) > 2 ){
 foreach ($_SESSION['pages'] as $key => $link)
{
if ($_SESSION['pages'][$key] == '')
{
    unset($_SESSION['pages'][$key]);
}
} 
}

//this will output previous page                                
echo $_SESSION['pages'][0]; 
```

可能有点矫枉过正，但您可以在过去的几个数组中保留页面历史记录

# django - Django Forms：验证消息未显示

> ID：13937912
> 
> 赞同：3
> 
> 时间：2012-12-18T17:00:42.520
> 
> 标签：django, django-forms

任何人都可以在以下示例中发现我做错了什么。当输入不正确的详细信息（例如无效的电子邮件地址）时，验证消息不会出现在我的模板中。模板正在加载，没有错误。

我排除了要在页面上打印的验证消息，但是由于某种原因，这突然停止工作。正如您从下面的代码示例中看到的那样，我将上下文中的表单传递回模板。这曾经有效，今天刚刚停止。

**视图.py**

```
if request.method == 'POST':
        form = RegistrationForm(request.POST)
        if form.is_valid():
            # If form has passed all validation checks then continue to save member.
            user = User.objects.create_user(
                                            username=form.cleaned_data['username'],
                                            email=form.cleaned_data['email'], 
                                            password=form.cleaned_data['password']
                                            )
            user.save()
            #member = User.get_profile()
            #member.name = form.cleaned_data['name']
            #member.save()
            member = Member(
                            user=user,
                            name=form.cleaned_data['name']
                            )
            member.save()

            # Save is done redirect member to logged in page.
            return HttpResponseRedirect('/profile')
        else:
            # If form is NOT valid then show the registration page again.
            form = RegistrationForm() 
            context = {'form':form}
            return render_to_response('pageRegistration.html', context,context_instance=RequestContext(request)) 
```

**表格.py**

```
class RegistrationForm(ModelForm):
    username = forms.CharField(label=(u'User Name'))
    email = forms.EmailField(label=(u'Email'))
    password = forms.CharField(label=(u'Password'), widget=forms.PasswordInput(render_value=False))
    passwordConfirm = forms.CharField(label=(u'Confirm Password'), widget=forms.PasswordInput(render_value=False))

    class Meta:
        model = Member
        # Don't show user drop down.
        exclude = ('user',)

    def clean_username(self):
        username = self.cleaned_data['username']
        try:
                User.objects.get(username=username)
        except User.DoesNotExist:
                return username
        raise forms.ValidationError("Username already taken.")

    def clean(self):
        try:   
            cleaned_data = super(RegistrationForm, self).clean() 
            password = cleaned_data.get("password")
            passwordConfirm = cleaned_data.get('passwordConfirm')

            if password != passwordConfirm:
                raise forms.ValidationError("Password does not match, try again.")
            return cleaned_data
        except:
            raise forms.ValidationError("Error") 
```

**pageRegistration.html**

```
<form action="" method="POST">
            {% csrf_token %}

            {% if forms.errors %}
            <p>
                correct some stuff
            </p>
            {% endif %}

            {{form}}
            <br>
            <input type="submit" value="submit">
        </form> 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-12-18T17:04:38.160

因为，表单在 else 子句中没有被验证，你的表单变量被一个新的表单覆盖，它丢失了所有的错误

```
if request.method == 'POST':
        form = RegistrationForm(request.POST)
        if form.is_valid():
            # If form has passed all validation checks then continue to save member.
            user = User.objects.create_user(
                                            username=form.cleaned_data['username'],
                                            email=form.cleaned_data['email'], 
                                            password=form.cleaned_data['password']
                                            )
            user.save()
            #member = User.get_profile()
            #member.name = form.cleaned_data['name']
            #member.save()
            member = Member(
                            user=user,
                            name=form.cleaned_data['name']
                            )
            member.save()

            # Save is done redirect member to logged in page.
            return HttpResponseRedirect('/profile')
        return render_to_response('pageRegistration.html', context,context_instance=RequestContext(request)) 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2014-05-13T05:24:11.137

为 CBV 世界更新。

这就是对我造成等效错误的原因：

```
class CreateView(generic.CreateView): # or generic.UpdateView

    def get_context_data(self, **kwargs):
        context_data = super(CreateView, self).get_context_data(**kwargs)
        # context_data['form'] = self.form_class # << this was the problematic override 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2018-10-21T10:48:24.413

也许页面每次重新加载时都会返回一个新表单。检查views.py中的上下文变量是否包含'form'：form

# c++ - 将 Boost.Asio 与 SPI 等其他串行设备一起使用

> ID：13937922
> 
> 赞同：4
> 
> 时间：2012-12-18T17:01:08.630
> 
> 标签：c++, serial-port, boost-asio, spi

Boost.Asio 使用 Proactor 来出色地使用单线程处理 I/O。我将它与插座一起使用，我喜欢它。我看到有一种方法可以将 Boost.Asio（和底层 Proactor）的 io_service 与串行端口（Windows 上的 COMX 设备和 Linux 上的 /dev/ttyXXX）一起使用，而不是使用套接字。事实上，我认为 Boost.Asio 旨在用于任何类型的 I/O，包括文件句柄等。

我想知道我是否可以直接使用它，开箱即用，用于任何串行设备，如[SPI](http://en.wikipedia.org/wiki/Serial_Peripheral_Interface_Bus)或[I2C](http://en.wikipedia.org/wiki/I%C2%B2C)。这类串行设备在 Linux 下看起来像 /dev/spi。

例如，我可以这样使用它：

```
boost::asio::io_service my_io_service;
boost::asio::serial_port my_spi_serial_port("/dev/spi0", my_io_service); 
```

并且自动地，它就像一个普通的串口（即RS232）一样工作？

或者，如果 Boost.Asio 不直接支持 SPI，那么后者是否提供了一种轻松合并对任何其他设备类型的支持的方法，而无需修改 Boost.Asio 的核心代码？

# jquery - jQuery 事件触发器 - 可取消事件

> ID：13937930
> 
> 赞同：4
> 
> 时间：2012-12-18T17:01:47.053
> 
> 标签：jquery

我创建了一个触发事件的 jquery 插件：

```
$.fn.myplugin = function(options) {
    this.on("foo.myplugin", options.foo);
    this.on("bar.myplugin", options.bar);
}; 
```

我想检查 foo 是否已被用户取消并防止 bar 被触发：

```
// trigger foo
this.trigger("foo.myplugin");

// how do I check if foo was canceled
if( !fooCanceled ) {
    this.trigger("bar.myplugin");
} 
```

如何检查 foo 是否被取消以防止触发 bar？

jQuery UI 做了类似的事情，但是当我尝试时它没有工作：

```
if (this._trigger("search", event) === false) {
    return;
} 
```

我尝试了类似的东西：

```
if( this.trigger("foo.myplugin") === false ) {
    return;
}

this.trigger("bar.myplugin"); 
```

但是 bar 仍然被触发。

我正在初始化我的插件，如下所示：

```
$("#asdf").myplugin({
    foo: function(event) {
        // cancel the event
        event.preventDefault();
    },

    bar: function(event) {
        console.log("should not be triggered");
    }
}); 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-18T20:24:20.763

遵循这种模式可能会让你完成你所追求的。

**示例：http:** [//jsfiddle.net/VzzLf/3/](http://jsfiddle.net/VzzLf/3/)

**JS**

```
//Plugin structure from : http://docs.jquery.com/Plugins/Authoring
(function( $ ){

  var methods = {
     init : function( options ) {

       return this.each(function(){
           var ele = $(this); 

           ele.on('click.myPlugin', function(e){

               //Hold a reference to the event
               var event = $.Event("closing")

               //Trigger it on the element
               ele.trigger(event); 

               //Check to see if it was disabled
               if(!event.isDefaultPrevented()){
                   ele.trigger('close');
               }

           }); 

       });

     }
  };

  $.fn.myPlugin = function( method ) {

    if ( methods[method] ) {
      return methods[method].apply( this, Array.prototype.slice.call( arguments, 1 ));
    } else if ( typeof method === 'object' || ! method ) {
      return methods.init.apply( this, arguments );
    } else {
      $.error( 'Method ' +  method + ' does not exist on jQuery.myPlugin' );
    }    

  };

})( jQuery );

  $(function(){
      $('#myPlugin')
          .myPlugin()
          .on('closing', function(){
            alert('closing');      
          })
          .on('close', function(){
            alert('close fired');      
          });   
      $('#myPluginDisabled')
          .myPlugin()
          .on('closing', function(e){
              alert('Disable close'); 
              e.preventDefault(); 
          })
          .on('close', function(e){
              alert('Will never get here'); 
          });      
  }); 
​ 
```

**HTML**

```
<div id='myPlugin'>Click me I'm enabled</div>

<div id='myPluginDisabled'>Click me I'm disabled</div>​ 
```

# c# - 读取内存流

> ID：13937932
> 
> 赞同：0
> 
> 时间：2012-12-18T17:01:58.213
> 
> 标签：c#, .net

在 StackOverflow 上使用几个示例，我认为以下代码将解压缩 gzip 文件，然后读取内存流并将其内容写入控制台。没有发生错误，但我没有得到任何输出。

```
public static void Decompress(FileInfo fileToDecompress)
        {
            using (FileStream originalFileStream = fileToDecompress.OpenRead())
            {
                string currentFileName = fileToDecompress.FullName;
                string newFileName = currentFileName.Remove(currentFileName.Length - fileToDecompress.Extension.Length);

                using (FileStream decompressedFileStream = File.Create(newFileName))
                {
                    using (GZipStream decompressionStream = new GZipStream(originalFileStream, CompressionMode.Decompress))
                    {
                        MemoryStream memStream = new MemoryStream();
                        memStream.SetLength(decompressedFileStream.Length);
                        decompressedFileStream.Read(memStream.GetBuffer(), 0, (int)decompressedFileStream.Length);

                        memStream.Position = 0;
                        var sr = new StreamReader(memStream);
                        var myStr = sr.ReadToEnd();
                        Console.WriteLine("Stream Output: " + myStr);
                    }
                }
            }
        } 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-18T17:36:38.947

您正在尝试复制一个空流。"decompressedFileStream" 是由 File.Create() 创建的，所以它是空的。将“decompressedFileStream”交换为“decompressionStream”，您将能够在“myStr”中看到您的文件内容。

```
 public static void Decompress(FileInfo fileToDecompress)
    {
        using (FileStream originalFileStream = fileToDecompress.OpenRead())
        {
            string currentFileName = fileToDecompress.FullName;
            string newFileName = currentFileName.Remove(currentFileName.Length - fileToDecompress.Extension.Length);

            using (FileStream decompressedFileStream = File.Create(newFileName))
            {
                using (GZipStream decompressionStream = new GZipStream(originalFileStream, CompressionMode.Decompress))
                {
                    MemoryStream memStream = new MemoryStream();
                    //memStream.SetLength(decompressedFileStream.Length); not necessary
                    decompressionStream.CopyTo(memStream);

                    memStream.Seek(0, SeekOrigin.Begin);
                    var sr = new StreamReader(memStream);
                    var myStr = sr.ReadToEnd();
                    Console.WriteLine("Stream Output: " + myStr);
                }
            }
        }
    } 
```

试试这个片段。我使用 CopyTo 而不是 Read 将数据复制到内存流，我使用 Seek() 方法而不是 Position 在内存流的开头返回。

# asp.net - HttpContext 用户和 Thread 用户的性能差异

> ID：13937936
> 
> 赞同：1
> 
> 时间：2012-12-18T17:02:07.773
> 
> 标签：asp.net, vb.net, performance, vb.net-2010

我想知道`HttpContext.Current.User.Identity.Name.ToString.ToLower`和之间有什么区别`Thread.CurrentPrincipal.Identity.Name.ToString.ToLower`。这两种方法都在我的 asp.net 3.5 Web 服务中获取用户名。我决定使用一个小程序来弄清楚性能是否有任何差异。在每次运行中从完全停止运行到开始调试。

```
Dim st As DateTime = DateAndTime.Now
        Try
            'user = HttpContext.Current.User.Identity.Name.ToString.ToLower
            user = Thread.CurrentPrincipal.Identity.Name.ToString.ToLower
            Dim dif As TimeSpan = Now.Subtract(st)
            Dim break As String = "nothing"

        Catch ex As Exception
            user = "Undefined"
        End Try 
```

我在 break 上设置了一个断点来读取`dif`. 两种方法的结果相同。

```
 dif.Milliseconds    0   Integer

    dif.Ticks           0   Long 
```

使用更长的持续时间，循环 5,000 次会产生这些数字。

线程方法

```
 run 1
    dif.Milliseconds    125     Integer
    dif.Ticks           1250000 Long

        run 2 
    dif.Milliseconds    0   Integer
    dif.Ticks   0   Long

        run 3 
    dif.Milliseconds    0   Integer
    dif.Ticks   0   Long 
```

HttpContext 方法

```
 run 1
    dif.Milliseconds    15  Integer
    dif.Ticks   156250  Long

        run 2
    dif.Milliseconds    156 Integer
    dif.Ticks   1562500 Long

        run 3
    dif.Milliseconds    0   Integer
    dif.Ticks   0   Long 
```

所以我猜什么更受欢迎，或者更符合网络服务标准？如果有某种类型的性能优势，我真的不能说。哪一个更容易扩展到更大的环境？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-18T20:24:43.027

您的测试表明差异最多是微不足道的，但请注意[SystemThreadingThreadCurrentPrincipalVsSystemWebHttpContextCurrentUserOrWhyFormsAuthenticationCanBeSubtle](http://www.hanselman.com/blog/SystemThreadingThreadCurrentPrincipalVsSystemWebHttpContextCurrentUserOrWhyFormsAuthenticationCanBeSubtle.aspx)

此外，如果这代表实际代码，您真的需要 Try..Catch 还是可以使用首选方法来测试`Is Nothing`可能什么都不是的适当实体？

# android - 如何在 Android GridView 中获取 ImageButton 的大小？

> ID：13937937
> 
> 赞同：1
> 
> 时间：2012-12-18T17:02:10.730
> 
> 标签：android, layout, graphics

我正在继承 ImageButton 以便在其上绘制线条并试图找出实际按钮坐标在我的 gridview 中的位置。我正在使用 onGlobalLayout 来设置顶部、底部、右侧和左侧，但这些似乎是针对网格内的实际“正方形”，而不是实际按钮（见图）。紫色线是使用从 myImageButton.onGlobalLayout() 收集的坐标在 myImageButton.onDraw() 中绘制的。我认为这些将用于按钮，但它们似乎来自其他东西。不确定是什么。我希望紫色线条与按钮的轮廓相匹配，这样我绘制的线条就会出现在按钮上，而不仅仅是漂浮在某个地方的 LinearLayout 中。浅蓝色是垂直 LinearLayout 的背景颜色，它包含 Textview（用于数字）和 myImageButton。有什么办法可以得到实际的按钮大小？

![网格视图/布局/按钮](../Images/926cf7306247efc66244af6b21c3dedc.png)

XML 布局：

```
<FrameLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:id="@+id/lay_cellframe"
    android:layout_width="fill_parent"
    android:layout_height="fill_parent" >

    <LinearLayout
        android:layout_width="fill_parent"
        android:layout_height="fill_parent"
        android:gravity="fill_vertical|fill_horizontal"
        android:orientation="vertical" >

        <TextView
            android:id="@+id/tv_cell"
            android:layout_width="fill_parent"
            android:layout_height="wrap_content"
            android:layout_margin="2dp"
            android:gravity="center"
            android:text="TextView"
            android:textSize="10sp" />

        <com.example.icaltest2.myImageButton
            android:id="@+id/imageButton1"
            android:layout_width="fill_parent"
            android:layout_height="fill_parent"
            android:layout_gravity="center"
            android:layout_margin="0dp"
            android:adjustViewBounds="false"
            android:background="@android:drawable/btn_default"
            android:scaleType="fitXY"
            android:src="@android:color/transparent" />

    </LinearLayout>
</FrameLayout> 
```

myImageButton.java

```
 public myImageButton (Context context, AttributeSet attrs)
   {
       super (context, attrs);
       mBounds = new Rect();
       ViewTreeObserver vto = this.getViewTreeObserver ();
       vto.addOnGlobalLayoutListener (ogl);
       Log.d (TAG, "myImageButton");
   }

...

    OnGlobalLayoutListener ogl = new OnGlobalLayoutListener()
        {

            @Override
            public void onGlobalLayout ()
            {
                Rect b = getDrawable ().getBounds ();

                mBtnTop = b.centerY () - (b.height () / 2);
                mBtnBot = b.centerY () + (b.height () / 2);
                mBtnLeft = b.centerX () - (b.width () / 2);
                mBtnRight = b.centerX () + (b.width () / 2);

            }
        };
...

 @Override
   protected void onDraw (Canvas canvas)
   {

      super.onDraw (canvas);
      Paint p = new Paint ();
        p.setStyle (Paint.Style.STROKE);
        p.setStrokeWidth (1);

        p.setColor (Color.MAGENTA);
        canvas.drawCircle (mBtnLeft, mBtnTop, 2, p);
        canvas.drawCircle (mBtnLeft, mBtnBot, 2, p);
        canvas.drawCircle (mBtnRight, mBtnTop, 2, p);
        canvas.drawCircle (mBtnRight, mBtnBot, 2, p);
            canvas.drawRect (mBtnLeft, mBtnTop, mBtnRight, mBtnBot, p);

} 
```

**更新：**添加了 jsmith 建议的图片

```
Rect r = canvas.getClipBounds (); //<- not sure about this
        int w = getMeasuredWidth () - getPaddingLeft () - getPaddingRight ();
        int h = getMeasuredHeight () - getPaddingTop () - getPaddingBottom ();

        int left = r.centerX () - (w / 2);
        int right = r.centerX() + ( w / 2);
        int top = r.centerY() - (h / 2);
        int bot = r.centerY() + (h / 2);

        p.setColor (Color.GREEN);
        canvas.drawRect (left, top, right, bot, p); 
```

![在此处输入图像描述](../Images/7f74b44a7e11f5e96d20bc181ffe071f.png)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-18T17:16:56.147

我认为您所做的是正确的，问题是 Android 的标准按钮样式有大约 3dip 的填充，所以看起来图像与 gridview 的单元格对齐，但不是。

因此，线条需要有更少的 6dip 宽度（向左 3 和向右 3）以适合按钮的视图。

```
mBtnLeft = b.centerX () - (b.width () / 2) + 3;
mBtnRight = b.centerX () + (b.width () / 2) - 3; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-18T17:29:53.350

到调用 onDraw 时，布局已处理，尺寸信息应该可用。您可以使用`View.getMeasuredWidth() / View.getMeasuredHeight()`检索您需要的信息。但是，您可能还需要使用`View.getPaddingLeft() / ..`. 例如：

```
final int displayWidth = (getMeasuredWidth() - getPaddingLeft() - getPaddingRight()); 
```

# c# - 如果用户用户存在，则套接字关闭

> ID：13937941
> 
> 赞同：0
> 
> 时间：2012-12-18T17:02:24.197
> 
> 标签：c#, sockets

我正在尝试为学校项目创建服务器/客户端应用程序。

我在给定端口上有一台服务器，连接了多个用户，每个用户都有自己的用户名。

现在我想检查尝试连接的用户是否使用了有效的用户名。例如，如果用户名 A 的用户已连接，则想要连接的新用户不能使用用户名 A。

如果发生这种情况，服务器将使用错误代码响应新客户端。

这是这部分的代码：

```
 private void Receive()
    {
        while (true)
        {
            byte[] buffer = new byte[64];
            socket.Receive(buffer);
            string received = Encoding.Default.GetString(buffer);
            if (received.IndexOf("!error") != -1)
            {
                string[] mySplit = received.Split(':');
                string errorCode = mySplit[1].Trim((char)0);
                if (errorCode == "user exists")
                {
                    richTextBox1.AppendText("Your connection was refused by server, because there's already another user connected with the username you choose");
                    socket.Disconnect(true);

                    connectBtn.Enabled = true;
                }
            }
        }
    } 
```

当我尝试执行此操作时，程序崩溃并且 Visual Studio 说`richTextBox1`.

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-18T17:08:22.580

您只能从 UI 线程访问 UI 元素。如果您尝试从后台线程访问它们，您将收到此异常。此代码需要在后台线程中运行，这样您就不会永远阻塞 UI 线程并冻结您的应用程序。

有几种方法可以编组回 UI 线程，其中一部分取决于您最初决定如何启动后台线程。（如果您使用的是`BackgroundWorker, Tasks,`await` 等。有内置的方法可以做到这一点。）

一种通用选项选项是仅使用`Invoke`：

```
if (errorCode == "user exists")
{
    this.Invoke(new Action(()=> { DisplayError(); } ));
} 
```

`DisplayError`然后可以包含针对这种情况的所有 UI 代码。请注意，通常最好将 UI 代码与业务逻辑分开。在整个应用程序中嵌入 UI 代码是不可取的。

# sql - MS-Access 2003 SQL Alike 修改不起作用

> ID：13937943
> 
> 赞同：2
> 
> 时间：2012-12-18T17:02:33.013
> 
> 标签：sql, ms-access-2003

我有一个查询，可以获取员工获得、使用和离开的休假时间。我已经修改了“Gain”上的 Alike 语句来寻找“Anniversary”然后返回值。它现在返回 0 Iif 的失败语句。这是SQL。

```
SELECT 
       SchedulingLog.UserID, 
       SchedulingLog.Category, 
       Sum(IIf([CatDetail] ALike 'Anniversary*',[Value],0)) AS Gain, 
       Sum(IIf(CatDetail ALike '%Used',[Value],0)) AS Used, [Gain]+[Used] AS [Left]
FROM SchedulingLog
GROUP BY SchedulingLog.UserID, SchedulingLog.Category
HAVING (((SchedulingLog.Category) Like "Vac*")); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-18T17:13:15.573

当您使用 Alike 时，您将使用 ANSI 通配符 (%) 而不是 Jet 的默认值 (*)。

所以

```
WHERE FieldName Like 'Something*' 
```

将会

```
WHERE FieldName ALike 'Something%' 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-18T17:09:49.597

有几件事。我认为您想要“Anniversary%”和“Vac%”，我建议您使用类似功能与类似功能。我读过访问确实支持通过 ADO 连接，但没有记录我可以找到。

验证 CatDetail 是否包含源表中“AnniversaryXXXXX”形式的数据，如果列不总是以“Anniversary”开头，您可能需要将其修改为“%Anniversary%”

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-18T17:29:38.293

您正在使用标准 ANSI SQL 设置纯粹在 MS Access 中工作，对吗？如果是这样，则无需使用 Alike 使事情复杂化，只需使用 Like 和标准通配符 *。

# sql-server - 使用游标对表中的数据进行排序

> ID：13937944
> 
> 赞同：1
> 
> 时间：2012-12-18T17:02:35.170
> 
> 标签：sql-server, tsql, sorting, cursor

我们在学校做的一个测试中有一个挑战问题，我们创建一个 t-sql 脚本，该脚本使用游标按员工工资对表中的数据进行排序，而不使用另一个表或使用 ORDER BY 子句。

没有人这样做，因为正如我所说，这是一个具有挑战性的问题，我想在家里做，但不幸的是我没有取得太大进展，所以任何帮助都会更感激。

提前谢谢了！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-18T19:43:23.390

我认为以这种方式订购数据**绝对**是错误的方式 - 无论如何，这种方法可以满足 OP 的要求。是的 - 游标绝对是多余的，因为您可以在没有最后一个`WHERE`子句的情况下运行内部查询来进行排序而不使用`ORDER BY`. 仅添加它以配合原始问题。

```
--CREATE TABLE salary( emplId int, salary int );
--INSERT INTO salary VALUES( 4, 150), (2, 100), (3, 200), (1, 10);

DECLARE @emplId INT;
DECLARE @runs INT = 0;

DECLARE sal CURSOR
FOR SELECT EmplId FROM "salary" 
OPEN sal

FETCH NEXT FROM sal INTO @emplId
WHILE @@FETCH_STATUS = 0
BEGIN
    SELECT 
        S."emplId", S."salary"
    FROM 
        "salary" AS S 
        CROSS APPLY ( SELECT COUNT( "salary" ) AS "successors" 
                  FROM "salary" 
                  WHERE "salary" < S."salary" ) AS Data 
    WHERE 
        Data."successors" = @runs 

    SET @runs +=1

    FETCH NEXT FROM sal INTO @emplId
END

CLOSE sal
DEALLOCATE sal; 
```

# ajax - 如果 JSF 页面受 j_security_check 保护，则不会在 ajax 请求上引发 ViewExpiredException - 跟进

> ID：13937945
> 
> 赞同：-3
> 
> 时间：2012-12-18T17:02:42.287
> 
> 标签：ajax, jsf-2, j-security-check, viewexpiredexception

[ViewExpiredException not throw on ajax request if JSF page is protected by j_security_check](https://stackoverflow.com/questions/12504131/viewexpiredexception-not-thrown-on-ajax-request-if-jsf-page-is-protected-by-j-se/13937042#13937042)提供了登录页面为 JSF 页面时的解决方案。但是如果登录页面是 JSP 页面呢？

我有一个jsp登录页面：

```
<login-config>
    <auth-method>FORM</auth-method>
    <form-login-config>
        <form-login-page>/core/login.jsp</form-login-page>
        <form-error-page>/core/login.jsp</form-error-page>
    </form-login-config>
</login-config> 
```

在我的 JSF 页面（facelet）中，如果我单击非 Ajax 按钮，我将被重定向到 login.jsp。如果我单击 Ajax 按钮，它将保留在同一个 JSF 页面上。但是，在这两种情况下，我添加到 JSP 登录页面的调试代码都将显示在控制台中。

===

我使用 facelet 而不是 jsp 重写了登录页面

```
<login-config>
    <auth-method>FORM</auth-method>
    <form-login-config>
        <form-login-page>/facelets/login.jsf</form-login-page>
        <form-error-page>/facelets/login.jsf</form-error-page>
    </form-login-config>
</login-config> 
```

我添加了一个 AjaxLoginListener：

```
public class AjaxLoginListener implements PhaseListener {

        @Override
        public PhaseId getPhaseId() {
    //        return PhaseId.ANY_PHASE;
            return PhaseId.RESTORE_VIEW;
        }

        @Override
        public void beforePhase(PhaseEvent event) {
            System.out.println("    **** AjaxLoginListener: Before Phase: " + event.getPhaseId());
            // NOOP.
        }

        @Override
        public void afterPhase(PhaseEvent event) {
            System.out.println("    **** AjaxLoginListener: After Phase: " + event.getPhaseId());
            FacesContext context = event.getFacesContext();
            HttpServletRequest request = (HttpServletRequest) context.getExternalContext().getRequest();
            String originalURL = (String) request.getAttribute(RequestDispatcher.FORWARD_REQUEST_URI);
            String loginURL = request.getContextPath() + "/facelets/login.jsf";
            System.out.println("    **** "+new java.sql.Timestamp(System.currentTimeMillis()) + " -- "
                    + this.getClass().getName()+" AjaxLoginListener: After Phase: originalURL: " + originalURL + " Login URL: "+loginURL);
            System.out.println("    **** AjaxLoginListener: After Phase: request.getRequestURI() " +request.getRequestURI());

            System.out.println("    **** "+new java.sql.Timestamp(System.currentTimeMillis()) + " -- "
                    + this.getClass().getName()+" AjaxLoginListener: After Phase: isAjaxRequest " +context.getPartialViewContext().isAjaxRequest());

            if (context.getPartialViewContext().isAjaxRequest()
                    && originalURL != null
                    && loginURL.equals(request.getRequestURI()))
            {
                System.out.println("    **** "+new java.sql.Timestamp(System.currentTimeMillis()) + " -- "
                        + this.getClass().getName()+" AjaxLoginListener: After Phase: AjaxRequest " + event.getPhaseId());
                try {
                    context.getExternalContext().redirect(originalURL);
                } catch (IOException e) {
                    e.printStackTrace();
                    throw new FacesException(e);
                }
            }
        }
    } 
```

一旦我使用 facelet 而不是 jsp，我就能够调用侦听器。但是，它永远不会进入登录页面，因为 originalURL (RequestDispatcher.FORWARD_REQUEST_URI) 对于 Ajax 请求始终为 NULL。做错了什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-20T18:08:38.410

简单的解决方案是添加一个检查用户是否登录，如果没有，则重定向到登录页面：

```
 @Override
    public void afterPhase(PhaseEvent event) {
        System.out.println("    **** AjaxLoginListener: After Phase: " + event.getPhaseId());
        FacesContext context = event.getFacesContext();
        HttpServletRequest request = (HttpServletRequest) context.getExternalContext().getRequest();
        HttpSession session = request.getSession();

//        String originalURL = (String) request.getAttribute(RequestDispatcher.FORWARD_REQUEST_URI);

        String loginURL = request.getContextPath() + "/facelets/login.dti";
        System.out.println("    **** "+new java.sql.Timestamp(System.currentTimeMillis()) + " -- "
                + this.getClass().getName()+" AjaxLoginListener: After Phase:  Login URL: "+loginURL);
        System.out.println("    **** AjaxLoginListener: After Phase: request.getRequestURI() " +request.getRequestURI());

        System.out.println("    **** "+new java.sql.Timestamp(System.currentTimeMillis()) + " -- "
                + this.getClass().getName()+" AjaxLoginListener: After Phase: isAjaxRequest " +context.getPartialViewContext().isAjaxRequest());

        if (context.getPartialViewContext().isAjaxRequest()
                && session.getAttribute("user") == null
                && loginURL.equals(request.getRequestURI()))
        {
            System.out.println("    **** "+new java.sql.Timestamp(System.currentTimeMillis()) + " -- "
                    + this.getClass().getName()+" AjaxLoginListener: After Phase: AjaxRequest " + event.getPhaseId());
            try {
                context.getExternalContext().redirect(loginURL);
            } catch (IOException e) {
                e.printStackTrace();
                throw new FacesException(e);
            }
        }

    } 
```

但是，这里的显着缺点是登录后它不会转到原始页面。

# sql - 如何改进这个 SQL 查询？

> ID：13937948
> 
> 赞同：0
> 
> 时间：2012-12-18T17:03:09.040
> 
> 标签：sql, oracle

我相信这是在 Oracle 上运行的 SQL 查询：

```
SELECT ID, DEVICE_TYPE, S3_KEY, TO_CHAR(CREATION_DATE, 'YYYY-MM-DD HH24:MI:SS') AS CREATION_DAT
FROM KASE_DDL.ARCHIVED_LOG 
WHERE 
    CREATION_DATE >= TO_DATE('{DIST_YYYY/MM/DD HH24:MI:SS_UTC}', 'YYYY/MM/DD HH24:MI:SS') 
    AND CREATION_DATE <= TO_DATE('{DIET_YYYY/MM/DD HH24:MI:SS_UTC}', 'YYYY/MM/DD HH24:MI:SS') 
```

它运行缓慢，我想知道如何重写它以提高其效率。例如，如果在 CREATION_DATE 上构建了索引，此查询是否可以使用索引？我记得读过书说，如果围绕列进行计算，Oracle 可能无法使用基于它的任何索引。我的查询是否属于这种情况？还有什么建议吗？谢谢你。

更新：

在我的问题中，CREATION_DATE 有一个内置索引。我很好奇这个查询是否使数据库能够利用索引。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-18T17:06:39.220

在 上添加索引`CREATION_DATE`。

我也会使用[`BETWEEN`](http://docs.oracle.com/cd/B28359_01/server.111/b28286/conditions011.htm)运算符来表示日期，但我喜欢这样阅读。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-19T11:38:21.373

您可以通过将 user_indexes 表中的 clustering_factor 与表的行数和块数进行比较来检查索引的可能有效性。聚类因子将介于块数和行数之间，分别代表理论最小值和最大值。

如果集群因子更接近块的数量（即它相对较小），那么索引将更有可能被选择，并且基于访问索引从表中选择块将需要更少的系统工作。

如果您对使用索引访问表时所看到的性能改进有任何疑问，总是值得检查一下。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-19T11:33:39.787

为了获得额外的性能提升，您可以尝试使用覆盖索引。在你的情况下

```
create index ndxCovering on KASE_DDL.ARCHIVED_LOG(CREATION_DATE, ID, DEVICE_TYPE, S3_KEY); 
```

它允许只从索引页读取数据，而不需要寻找数据页。

# database - 将 db-table 导出到 yaml

> ID：13937954
> 
> 赞同：1
> 
> 时间：2012-12-18T17:03:26.150
> 
> 标签：database, export, yaml

我正在尝试为我的集成测试生成测试数据。因此我需要将 db-tables 导出到 yaml-files 中。最好的方法是什么？

# sharepoint-2010 - Sharepoint 2010 从 MyLInks Webpart 的添加链接对话框中删除组

> ID：13937956
> 
> 赞同：2
> 
> 时间：2012-12-18T17:03:32.107
> 
> 标签：sharepoint-2010

在 MyLinks Web 部件的添加链接对话框中，我需要从“现有组”和“显示链接”下拉列表中删除几个选项。为这些字段显示的所有选项都是现成的。我需要为“显示这些链接到”字段显示“仅限我”选项。同样，我只需要为“分组”字段显示“常规”和“最佳匹配”选项。您知道是否有办法从这些字段中删除不需要的选项？

这是显示这些下拉字段的对话框的屏幕截图。

[添加链接对话框](http://blogs.kma-llc.net/.a/6a0115709993d0970b014e8b5c410e970d-pi)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-19T07:04:35.387

您必须编写自己的 Web 部件，然后只链接到该 Web 部件（更好的方法，如果您确实需要进行这些更改，请执行此操作）

# jquery - AJAX 连接疑难解答

> ID：13937959
> 
> 赞同：-1
> 
> 时间：2012-12-18T17:03:41.043
> 
> 标签：jquery, ajax, joomla

我在 Joomla 中的 AJAX 连接有问题。

**AJAX**

```
$(document).ready(function() {
    var results = $('#hidden').serialize();

    var url = '<php? echo JURI::base(); ?>index.php?option=com_mls&view=list&format=raw&' + results;

    $('#test').html(url); //Just to see that the string is working.

    $.ajax({
        url: url,
        success: function(){
            alert('success');
        },
        error: function(){
            alert('failure');
        }
    });

}); 
```

**Joomla 模型`view=list`：**

```
function ListData()
{
    error_reporting(E_ALL);
    $db =& JFactory::getDBO();
    $sort = JRequest::getVar('sort');
    $pstart = JRequest::getVar('pstart');
    $plimit = JRequest::getVar('plimit');
    $hprice = JRequest::getVar('hprice');
    $lprice = JRequest::getVar('lprice');
    $city = JRequest::getVar('city');
    $zip = JRequest::getVar('zip');
    $bdrms = JRequest::getVar('bdrms');
    $bths = JRequest::getVar('bths');

    $query = "SELECT * FROM " . $db->nameQuote('#__mls') . " WHERE 1=1 ";
    if ($zip != null || $city != null || $bdrms != null || $bths != null || $hprice != null || $lprice != null){
        $firstand = "AND ";
    }
    $clauses = array();
    if ($zip != null) {
        $clauses[] = "MSTZIP = " . $zip;
    }

            ... a bunch of IF statements for building query...

    $query .= $firstand . implode(" AND ", $clauses) . $orderby . $pages;

    $db->setQuery($query);
    $table = $db->loadRowList();

    return $table; 
```

**Joomla 视图：**

```
function display($tpl = null)
{
    $model = &$this->getModel();
    $array = $model->ListData();
    $this->assignRef( 'disparray', $array );
    parent::display($tpl);
} 
```

在我能走路之前跑，我只是想让 AJAX 显示`success`。它不是。我不知道错误在哪里，也无法得到任何错误报告来帮助我。有任何 AJAX/Joomla 精明的人伸出援手吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-18T20:50:59.970

试试下面的代码

```
jQuery.post('index.php',{
                'option'    : 'com_mls',
                'controller': 'controllerName',
                'task'  : 'taskName',
                'format'    : 'raw',            
                'results'   :  results                        
            }).success(function(result) { 
               alert('success');
            }).error(function() { 
                alert('error');
            }); 
```

在控制器中，您可以拥有任何您想要的功能（任务名称）。如果您有任何问题，请告诉我

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-18T20:55:20.103

需要使用开发人员工具来查看 AJAX 查询字符串试图去哪里。之后，我能够确定需要在 URL 字符串中访问的正确 URL 和类。

```
//Removed '<php? echo JURI::base(); ?>'
var url = 'index.php?option=com_mls&view=list&format=raw&' + results; 
```

感谢 Sajjan 的帮助。

# java - 通过 SSH 将 Jconsole 连接到远程 JVM

> ID：13937965
> 
> 赞同：1
> 
> 时间：2012-12-18T17:04:03.157
> 
> 标签：java, jmx

我正在尝试使用 jconsole 作为 JMX 客户端通过 ssh 连接到远程 Java 应用程序

[我已经构建了https://blogs.oracle.com/jmxetc/entry/connecting_through_firewall_using_jmx](https://blogs.oracle.com/jmxetc/entry/connecting_through_firewall_using_jmx)上描述的 CustomAgent

代理的代码在这里

```
/**
* CustomAgent.java

* https://blogs.oracle.com/jmxetc/entry/connecting_through_firewall_using_jmx
*/

package example.rmi.agent;

import java.io.IOException;
import java.lang.management.ManagementFactory;
import java.net.InetAddress;
import java.rmi.registry.LocateRegistry;
import java.util.HashMap;
import javax.management.MBeanServer;
import javax.management.remote.JMXConnectorServer;
import javax.management.remote.JMXConnectorServerFactory;
import javax.management.remote.JMXServiceURL;

/**
 * This CustomAgent will start an RMI COnnector Server using only
 * port "example.rmi.agent.port".
 *
 * @author dfuchs
 */
public class CustomAgent {

    private CustomAgent() { }

    public static void premain(String agentArgs) 
    throws IOException {

        // Ensure cryptographically strong random number generator used
        // to choose the object number - see java.rmi.server.ObjID
        //
        System.setProperty("java.rmi.server.randomIDs", "true");

        // Start an RMI registry on port specified by example.rmi.agent.port
        // (default 3000).
        //
        final int port= Integer.parseInt(
                System.getProperty("example.rmi.agent.port","3000"));
        System.out.println("Create RMI registry on port "+port);
        LocateRegistry.createRegistry(port);

        // Retrieve the PlatformMBeanServer.
        //
        System.out.println("Get the platform's MBean server");
        MBeanServer mbs = ManagementFactory.getPlatformMBeanServer();

        // Environment map.
        //
        System.out.println("Initialize the environment map");
        HashMap<String,Object> env = new HashMap<String,Object>();

        // This where we would enable security - left out of this
        // for the sake of the example....
        //

        // Create an RMI connector server.
        //
        // As specified in the JMXServiceURL the RMIServer stub will be
        // registered in the RMI registry running in the local host on
        // port 3000 with the name "jmxrmi". This is the same name the
        // out-of-the-box management agent uses to register the RMIServer
        // stub too.
        //
        // The port specified in "service:jmx:rmi://"+hostname+":"+port
        // is the second port, where RMI connection objects will be exported.
        // Here we use the same port as that we choose for the RMI registry. 
        // The port for the RMI registry is specified in the second part
        // of the URL, in "rmi://"+hostname+":"+port
        //
        System.out.println("Create an RMI connector server");
        final String hostname = InetAddress.getLocalHost().getHostName();
        //JMXServiceURL url =
        //    new JMXServiceURL("service:jmx:rmi://"+hostname+
        //    ":"+port+"/jndi/rmi://"+hostname+":"+port+"/jmxrmi");

        //Added to allow  connection through a firewall
        // We use (port+1) to export the RMI connection objects
        JMXServiceURL url =
            new JMXServiceURL("service:jmx:rmi://"+hostname+
            ":"+(port+1)+"/jndi/rmi://"+hostname+":"+port+"/jmxrmi");

        // Now create the server from the JMXServiceURL
        //
        JMXConnectorServer cs =
            JMXConnectorServerFactory.newJMXConnectorServer(url, env, mbs);

        // Start the RMI connector server.
        //
        System.out.println("Start the RMI connector server on port "+port);
        cs.start();
    }
} 
```

构建脚本在这里

```
<project name="Agent" basedir="." default="main">

    <property name="src.dir"     value="src"/>
    <property name="build.dir"   value="build"/>
    <property name="classes.dir" value="${build.dir}/classes"/>
    <property name="jar.dir"     value="${build.dir}/jar"/>
    <property name="main-class"  value="example.rmi.agent.CustomAgent"/>

    <target name="clean">
        <delete dir="${build.dir}"/>
    </target>

    <target name="compile">
        <mkdir dir="${classes.dir}"/>
        <javac srcdir="${src.dir}" destdir="${classes.dir}"/>
    </target>

    <target name="jar" depends="compile">
        <mkdir dir="${jar.dir}"/>
        <jar destfile="${jar.dir}/${ant.project.name}.jar" basedir="${classes.dir}">
            <manifest>
                <attribute name="Main-Class" value="${main-class}"/>
            </manifest>
        </jar>
    </target>    

    <target name="run" depends="jar">
        <java jar="${jar.dir}/${ant.project.name}.jar" fork="true"/>
    </target>    
    <target name="clean-build" depends="clean,jar"/>    
    <target name="main" depends="clean,run"/>

     <!-- Builds dist.agent.jar -->    
    <target name="build-agent-jar" description="build an agent jar that can be used with -javaagent"   depends="compile">
        <mkdir dir="${jar.dir}"/>
        <jar basedir="${classes.dir}"  destfile="${jar.dir}/${ant.project.name}.jar">
                <manifest>
                    <attribute name="Premain-Class" value="example.rmi.agent.CustomAgent"/>
                </manifest>
        </jar>
        <echo>To use this application with agent try:</echo>
        <echo>java -Dexample.rmi.port=3000 -javaagent:${dist.agent.jar} -classpath [application-classpath] [application-classpath] [application-main-class]</echo>
    </target>
</project> 
```

我使用在远程机器上启动应用程序

> java -javaagent:agents/build/jar/Agent.jar -Dexample.rmi.agent.port=6004 -server -server -Dcom.sun.management.jmxremote.authenticate="false" -Dcom.sun.management.jmxremote= "true" -Dcom.sun.management.jmxremote.ssl="false" -Dcom.sun.management.jmxremote.local.only="false" -jar path-to-my-app/app.jar

主机上打开了两个端口，6004 和 6005，如果 jconsole 是应用程序本地的，我可以通过 jconsole 连接到应用程序。

然后我创建 2 个 ssh 隧道

> ssh 隧道 ssh -L 6004:localhost:6004 foo@server ssh 隧道 ssh -L 6005:localhost:6005 foo@server

隧道创建成功。我可以在这些端口上远程登录。

现在的问题是我无法使用 Jconsole 进行远程连接

> 服务：jmx:rmi://localhost:6005/jndi/rmi://localhost:6004/jmxrmi

jconsole 由以下人员启动：

> jconsole -J-Djava.util.logging.config.file=logging.properties -debug

错误日志是：

> ```
> Dec 18, 2011 4:57:46 PM RMIConnector connect
> FINER: [javax.management.remote.rmi.RMIConnector: jmxServiceURL=service:jmx:rmi://localhost:6005/jndi/rmi://localhost:6004/jmxrmi] 
> ```
> 
> ConnectException：连接拒绝主机：172.16.0.111；嵌套异常是：java.net.ConnectException：连接超时 java.rmi.ConnectException：连接拒绝主机：172.16.0.111；嵌套异常是：java.net.ConnectException：连接在 sun.rmi.transport.tcp.TCPChannel.createConnection(TCPChannel.java:216 的 sun.rmi.transport.tcp.TCPEndpoint.newSocket(TCPEndpoint.java:619) 处超时) 在 sun.rmi.transport.tcp.TCPChannel.newConnection(TCPChannel.java:202) 在 sun.rmi.server.UnicastRef.invoke(UnicastRef.java:128) 在 javax.management.remote.rmi.RMIServerImpl_Stub.newClient(未知来源）在 javax.management.remote.rmi.RMIConnector.getConnection(RMIConnector.java:2343) 在 javax.management.remote.rmi.RMIConnector.connect(RMIConnector.java:

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-18T17:05:10.673

我需要添加

> -Djava.rmi.server.hostname=localhost

到 java -server 参数

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-10-21T20:40:50.390

顺便说一句，Hotspot 7 JVM 现在直接支持第二个端口 - [http://dimovelev.blogspot.de/2013/10/out-of-box-jmx-over-firewall-in-hotspot.html](http://dimovelev.blogspot.de/2013/10/out-of-box-jmx-over-firewall-in-hotspot.html)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2017-09-04T14:19:59.273

尝试使用以下选项运行您的服务器：

```
-Dcom.sun.management.jmxremote
-Dcom.sun.management.jmxremote.port=6004
-Dcom.sun.management.jmxremote.rmi.port=6004
-Dcom.sun.management.jmxremote.ssl=false 
-Dcom.sun.management.jmxremote.authenticate=false 
-Dcom.sun.management.jmxremote.local.only=true 
```

一旦你有一个 6004 的隧道，用 jconsole 试试这个：

```
jconsole -J-DsocksProxyHost=127.0.0.1 -J-DsocksProxyPort=6004 service:jmx:rmi:///jndi/rmi://0.0.0.0:6004/jmxrmi -J-DsocksNonProxyHosts= 
```

# google-maps - 在脚本上获取用户语言环境

> ID：13937971
> 
> 赞同：1
> 
> 时间：2012-12-18T17:04:15.777
> 
> 标签：google-maps, jsf, primefaces

我有一个小问题。我在 primefaces 中使用 gmap，我们需要加载脚本

```
<script src="http://maps.google.com/maps/api/js?sensor=true" type="text/javascript"/> 
```

但是我需要根据用户区域设置的语言加载脚本。

我怎样才能在不“硬编码”字符串的情况下做到这一点？

我试过这样的事情：

```
 <script src="http://maps.google.com/maps/api/js?sensor=true&amp;language="#{template.userLocale} type="text/javascript"/>
// {template.userLocale} has a string o the locale 
```

你能帮忙吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-18T17:10:22.427

你有一个 HTML 语法错误。给定语言，您最终得到的结果如下`en`：

```
<script src="http://maps.google.com/maps/api/js?sensor=true&amp;language="en type="text/javascript"/> 
```

*（在浏览器中右键单击页面并查看源代码以自己查看）*

您需要将双引号移动到属性值的末尾：

```
<script src="http://maps.google.com/maps/api/js?sensor=true&amp;language=#{template.userLocale}" type="text/javascript"/> 
```

这样HTML最终将是：

```
<script src="http://maps.google.com/maps/api/js?sensor=true&amp;language=en" type="text/javascript"/> 
```

EL 只能用于模板文本。您需要意识到 JSF 基本上生成 HTML 代码。HTML`<script src>`属性和 EL`#{}`不同步运行。相反，JSF/EL 处理它，您只需要确保生成的 HTML 在语法上是有效的。

# javascript - 使用条件运算符声明数组元素的 Javascript 行为异常？

> ID：13937972
> 
> 赞同：1
> 
> 时间：2012-12-18T17:04:20.373
> 
> 标签：javascript, arrays, syntax

我对javascript相当陌生，我看到了这个我无法理解的问题，

这是 Chrome 的代码和检查器输出，

```
> test?'test':'ok'
"ok"
> [test?'test':'ok']
["ok"]
> ['ok' + test?'test':'ok']
["test"] 
```

这个数组是怎么回事？我想要的只是创建一个数组 ['browser' + isIE? 'IE'：'未知']。

我可以用 [isIE? 'browser: IE' : 'browser: UNKNOWN'] 有效。但我不明白上述语法有什么问题？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-12-18T17:06:39.033

您可以重写`[isIE? 'browser: IE' : 'browser: UNKNOWN']`为：

`["browser: " + (isIE ? 'IE' : 'UNKNOWN') ]`

我建议***始终***在条件运算符中**使用方括号。**

一个常见的陷阱是：`bool ? "a" : "b" + "c"`将给出`"a"`or `"bc"`，但不是预期的`"ac"`。

`(bool ? "a" : "b") + "c"`是预期的功能。

另一个陷阱：

`'ok' + test?'test':'ok'`给出`"test"`or`"ok"`但从不给出`"oktest"`or `"okok"`。这是因为`'ok' + test`被视为布尔值（我认为这总是正确的？）。

`'ok' + (test ? 'test' : 'ok')`是预期的功能。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-18T17:09:47.043

这是表达式的评估方式：

```
('ok' + test) ? 'test' : 'ok'; 
```

*评估 and 的连接`'ok'`，如果为真则`test`返回`'test'`，`'ok'`否则返回。*

你想要的是：

```
'ok' + (test ? 'test' : 'ok'); 
```

*与三元表达式的结果连接`'ok'`，即`'test'`if`test`为真，`'ok'`否则*

**更新**

具体例子。这将返回你想要的。

```
'browser: ' + (isIE? 'IE' : 'UNKNOWN') 
```

我不确定您是否将表达式括在方括号中以表示数组，但我已将它们放在这里 ;-)

# caching - 在 Liferay 生产环境中禁用缓存有什么负面影响吗？

> ID：13937978
> 
> 赞同：0
> 
> 时间：2012-12-18T17:04:54.653
> 
> 标签：caching, properties, liferay-6, production-environment

我们的生产 Liferay 实例绝对*拒绝*部署我的最新主题。有些东西阻止它显示我最新的 CSS 更改。不幸的是，没有日志错误，也没有 Firebug 控制台错误，因此诊断起来确实令人头疼。我只是得到一个非常丑陋的普通页面，其中包含链接并且没有应用任何样式。我已经尝试了我能想到的一切来解决这个问题。

*   取消部署/重新部署主题
*   重新启动 Glassfish 容器
*   使用 Liferay 服务器管理页面来“清除缓存在这个 JVM 中的内容”、“清除数据库缓存”、“验证数据库插件”等。
*   取消部署，重新启动，重新部署
*   取消部署，删除“应用程序”文件夹中与主题有关的剩余文件/文件夹，重新启动容器，重新部署
*   清除我的浏览器缓存
*   尝试不同的浏览器
*   以上的更多组合。你明白了。

昨晚我达到了沸点，因为我的主题在我们的测试环境中部署和显示没有问题，但在生产中不起作用。唯一不同的是我没有使用

```
include-and-override=portal-developer.properties 
```

在我的 portal-ext.properties 文件中。我赌了一把，将此行添加到我的生产 portal-ext.properties 并重新启动生产服务器。我的主题现在显示没有问题。

文件 portal-developer.properties 似乎只包含以下属性：

```
theme.css.fast.load=false
theme.images.fast.load=false

javascript.fast.load=true
javascript.log.enabled=false

layout.template.cache.enabled=false

browser.launcher.url=

combo.check.timestamp=true

freemarker.engine.cache.storage=soft:1
freemarker.engine.modification.check.interval=0

openoffice.cache.enabled=false

velocity.engine.resource.manager.cache.enabled=false

com.liferay.portal.servlet.filters.cache.CacheFilter=false
com.liferay.portal.servlet.filters.etag.ETagFilter=false
com.liferay.portal.servlet.filters.header.HeaderFilter=false
com.liferay.portal.servlet.filters.themepreview.ThemePreviewFilter=true 
```

所以，最后，我的问题是，我是否只是为了获得更轻松的部署体验而牺牲了轻微的性能提升？

或者在生产环境中加载这个文件是否有更严重的问题？

提前感谢您的输入！

本

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-21T08:48:15.760

你会得到一个非常糟糕的表现`portal-ext.properties`。该配置仅用于开发环境。

如果您删除已`css/.sass_cache`部署主题上的目录，您将看到您的 css 更改，并且您将能够`portal-ext.properties`在生产环境中使用不同的目录。

[http://issues.liferay.com/browse/LPS-26939](http://issues.liferay.com/browse/LPS-26939)

问候

# ios - CATransform3D 动画后 UIViewController 不响应触摸

> ID：13937985
> 
> 赞同：3
> 
> 时间：2012-12-18T17:05:15.497
> 
> 标签：ios, quartz-core

我的“图书馆”风格的 UIViewController 执行 CATransform3D 旋转动画，角度为 1.75 弧度，以便在将其推送（没有动画）到下一个或最后一个视图之前隐藏它。不幸的是，在弹出 UIViewController 时执行动画时，弹出的 VC 不会响应触摸。

我尝试过的事情： -

*   为了让动画在弹出后显示，而不是让它根本没有动画，我必须将它延迟 0.1 秒。为此，我使用 NSObject 的 performSelector:withObject:afterDelay。不幸的是，虽然完美地执行了预期的动画，但导致了我的名字问题。
*   使用 NSTimer 在 0.1 秒后执行该操作且不重复。这无济于事。
*   动画时使用 UIView 的延迟功能，这意味着动画不执行。
*   使用一个选择器通过被另一个选择器引用来执行动画。没有效果。
*   在视图没有响应触摸时调用 touchesEnded，没有效果。

我当前的代码，虽然有点不整洁（我第一次使用 Core Animation/QuartzCore），但...

弹出时执行动画。

```
//To collect it in the SecondVC
[[NSNotificationCenter defaultCenter] addObserver:self selector:@selector(coolAnimation) name:@"ReturnSecond" object:nil];
//To send it from the ThirdVC
[[NSNotificationCenter defaultCenter] postNotificationName:@"ReturnSecond" object:nil]; 
```

弹出 VC

```
[[NSNotificationCenter defaultCenter] postNotificationName:@"ReturnWeird" object:nil];
NSUInteger integer = [[self.navigationController viewControllers] indexOfObject:self];
[[self navigationController] popToViewController:[[self.navigationController viewControllers] objectAtIndex:integer-1] animated:NO]; 
```

呈现动画

```
- (void)coolAnimation
{
    [self performSelector:@selector(tryThis) withObject:nil afterDelay:0.1];
}

- (void)tryThis
{
    CGRect framer = self.view.layer.frame;
    self.view.layer.anchorPoint = CGPointMake(0.f, 0.f);
    self.view.layer.frame = framer;
    [UIView beginAnimations:nil context:nil];
    [UIView setAnimationDuration:0.3];
    CATransform3D rotationAndPerspectiveTransforms = CATransform3DIdentity;
    rotationAndPerspectiveTransforms.m34 = 1.0 / 500;
    rotationAndPerspectiveTransforms = CATransform3DRotate(rotationAndPerspectiveTransforms, 0, 0, 1, 0);
    self.view.layer.transform = rotationAndPerspectiveTransforms;
    [UIView commitAnimations];

    CGRect framers = flippedCell.layer.frame;
    flippedCell.layer.anchorPoint = CGPointMake(0.f, 0.f);
    flippedCell.layer.frame = framers;
    [UIView beginAnimations:nil context:nil];
    [UIView setAnimationDuration:0.7];
    CATransform3D rotateTransform = CATransform3DIdentity;
    rotateTransform.m34 = 1.0 / 500;
    rotateTransform = CATransform3DRotate(rotateTransform, 0, 0, 1, 0);
    flippedCell.layer.transform = rotateTransform;
    [UIView commitAnimations];

    [self performSelector:@selector(cellAnimationDidStop) withObject:nil afterDelay:0.7];
}

- (void)cellAnimationDidStop
{
    [self.tableView reloadData];
} 
```

视图在推动之前旋转了 1.75 弧度，因此将保持在该变换角度，直到它被旋转回来。

我的代码的任何提示也将不胜感激！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-19T21:31:20.977

经过3天的调试，我找到了答案。原来我最好使用以下行来刷新整个 ViewController。内存很重，但它修复了一个巨大的错误。

```
[self becomeFirstResponder]; 
```

# c++ - Node.js 插件定时器上下文

> ID：13937986
> 
> 赞同：1
> 
> 时间：2012-12-18T17:05:15.853
> 
> 标签：c++, node.js, libuv

libuv 计时器方法在[此处](http://nikhilm.github.com/uvbook/utilities.html)记录，并为 Node.js 插件提供了一种定期接收回调以执行任意处理的方法。

```
uv_timer_t timer;
uv_timer_init( uv_default_loop(), &timer);
uv_timer_start( &timer, callback, 0, interval ); 
```

这里的*回调*是超时方法，带有原型：

```
void callback( uv_timer_t *handle, int status ); 
```

如何向计时器回调过程提供上下文，最好以*void * 的形式提供？*

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-18T18:55:35.653

您可以通过将指向它的指针分配给 uv_timer_t 结构的数据成员来提供上下文，如下所示：

```
uv_timer_t timer;
timer.data = context; 
```

# c# - 往返 XML -> Excel -> XML

> ID：13937992
> 
> 赞同：3
> 
> 时间：2012-12-18T17:05:39.537
> 
> 标签：c#, excel, openxml, openxml-sdk, aspose

我想在 Web 应用程序中从服务器端 C#使用 Excel 的[XML Map功能。](https://office.microsoft.com/en-in/excel-help/overview-of-xml-in-excel-HA010206396.aspx)XML 映射使您能够将 XML 架构与工作簿相关联，并指定哪些单元格映射到架构的哪些部分。从那里您可以导入 XML 文件以更新单元格值，并导出包含最新值的 XML（即，如果它们已被手动更改）。您可以在 Excel 的“开发人员”选项卡上手动执行此操作。

我们已经获得了 Aspose Cells 的许可证，但是（尽管最近在这方面做了一些工作）它似乎并不完全支持 XML 映射。有没有人在这方面取得任何成功？

我已经使用 Excel 互操作创建了一个测试，它可以工作（即可以以编程方式设置 XML 映射并将其用于导入和导出值）。归结为：

```
XmlMap map = workbook.XmlMaps.Add(xmlSchema, Missing.Value);

// map cell C3 to the question text
var worksheet = (Worksheet)workbook.Worksheets[1];
Range cell = (Range)worksheet.Cells[3, 3];
cell.XPath.Clear(); // just in case
cell.XPath.SetValue(map, "/Root/Question/Text", Missing.Value, false);

// import the XML to populate the mapped cells
map.ImportXml(xmlData, true); 
```

但是，这并不适合在服务器上使用，因为它依赖于在后台运行 Excel 进程。

是否可以使用 Microsoft 的[Open XML SDK](http://msdn.microsoft.com/en-us/library/office/bb448854%28v=office.14%29.aspx)通过 XML Map 导入或导出 XML？我找到了[Map 类](http://msdn.microsoft.com/en-us/library/office/documentformat.openxml.spreadsheet.map.aspx)，但我认为它只代表已经存在的地图的元数据。SDK 是否包含这种转换逻辑，还是仅将工作表的内容表示为类？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-26T07:16:28.750

为了进一步向您提供有关 XMLMaps 功能的详细信息，目前 Aspose.Cells 仅支持以下有关 XML Maps 的选项：

1.  它可以将 XmlMaps 保存在模板文件中，并用它重新保存文件。
2.  它支持从外部源导入 XML 映射。
3.  它可以删除或检查 XML 映射。

目前它不支持以下内容：

1.  它无法将 XML 映射添加到 Excel 文件。
2.  它不导出 XML Maps 以保存外部文件（我们将在 2013 年第二季度尝试支持导出 xml Maps）

我的名字是 Nayyer，我是 Aspose 的开发布道者。

# java - ExceptionMapper 创建响应时未遍历 RestEasy 后处理拦截器链

> ID：13937998
> 
> 赞同：6
> 
> 时间：2012-12-18T17:06:07.863
> 
> 标签：java, jakarta-ee, resteasy

我正在使用 RestEasy 构建我的 Restful Web 服务。我已经实现了 ExceptionMappers 来准备特定的异常响应。

我还实现了 MessageBodyWriterInterceptors 和几个 PostProcessorInterceptor。

**问题：**当任何资源不引发任何异常时，一切正常。我的实现按预期工作。调用所有后处理器拦截器和消息正文编写器拦截器。

但是当任何资源方法抛出异常时，注册的 ExceptionMappers 会被调用并创建响应。但在这种情况下，不会遍历后处理器拦截器链。他们没有被叫到。

在这种情况下我该怎么办。在我的异常映射器中编写该拦截器逻辑，或者是否有可用的解决方案？

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-12-18T17:46:16.293

如果抛出异常，则不会调用后处理器。它们位于不同的并行解析路径上：

```
           /“正常”JAX-RS 响应 -> 后处理器 -> 消息正文编写器
加工
           \ 异常 -> 异常映射器

```

如果您有需要在后处理器和异常映射器中运行的逻辑，那么您需要将其合并到两者中（最好通过一个通用的实用程序类）。

# java - 如何在 Android 中进行重复操作？

> ID：13937999
> 
> 赞同：1
> 
> 时间：2012-12-18T17:06:07.583
> 
> 标签：java, android

**我使用这样的代码：**

```
t = new Timer();
t.schedule(new TimerTask() { 
  @Override
  public void run() {
    //some action
  }
}, 30000, 30000); 
```

如果我结束应用程序（单击主页），然后恢复应用程序，则任务被取消。如何解决这个问题？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-18T17:15:10.193

使用此任务的服务： [教程](http://developer.android.com/guide/components/services.html)